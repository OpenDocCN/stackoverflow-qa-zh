# StackOverflow 问答 12444000-12444999

# node.js - nodejs 流与回调

> ID：12444000
> 
> 赞同：6
> 
> 时间：2012-09-16T02:30:26.170
> 
> 标签：node.js, stream

我正在阅读这篇文章：[http](http://elegantcode.com/2011/04/06/taking-baby-steps-with-node-js-pumping-data-between-streams/) ://elegantcode.com/2011/04/06/taking-baby-steps-with-node-js-pumping-data-between-streams/并且在理解流时遇到了一些小麻烦。

**引用：**

> ```
> "Suppose we want to develop a simple web application
> that reads a particular file from disk and send it to the browser.
> The following code shows a very simple and naïve implementation
> in order to make this happen." 
> ```

所以代码示例如下：

```
var readStream = fileSystem.createReadStream(filePath);
readStream.on('data', function(data) {
    response.write(data);
});

readStream.on('end', function() {
    response.end();        
}); 
```

当我们可以简单地执行以下操作时，为什么要使用上述方式：

```
fs.readFile(filePath, function(err, data){
  response.write(data);
  response.end();
}); 
```

我何时或为什么要使用流？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T02:36:32.783

处理大文件时，您会使用流。使用回调，所有文件的内容必须一次加载到内存中，而使用流，在任何给定时间只有文件的一部分在内存中。

此外，流接口可以说更优雅。除了显式附加`data`、`drain`和`end`回调之外，您还可以使用[`pipe`](http://nodejs.org/api/stream.html#stream_stream_pipe_destination_options)：

```
var readStream = fileSystem.createReadStream(filePath);
readStream.pipe(response); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-04T20:54:11.297

一个重要的原因是您可以在数据全部进入内存之前开始处理数据。想想“流媒体视频”，您可以在其中开始观看仍在加载的剪辑。在许多用例中，流将允许您在加载整个内容之前开始处理文件中的数据。

另一个常见的用例是当您只想读取一个对象，直到您检测到数据中的某些条件。假设您需要检查一个大文件是否包含“兔子”一词。如果使用回调模式，则需要将整个文件读入内存，然后遍历文件并检查单词是否在里面。使用流，您可能会在文件的第 5 行检测到单词，然后您可以关闭流，而无需加载整个内容。

There are obviously many more complex use cases, and there are still plenty of times where a callback still makes more sense for simplicity (such as if you needed to count the total times "rabbit" appeared, in which case you have to load the entire file anyway).

# javascript - 多个输入/复选框 jQuery 搜索

> ID：12444001
> 
> 赞同：0
> 
> 时间：2012-09-16T02:30:30.850
> 
> 标签：javascript, jquery, json, jquery-pagination

我不确定从哪里开始或实现这一目标的最佳方法是，但我目前有 4 个多个滑块（滑块上有两个手柄）、一个输入框、另外 4 个复选框和一个下拉列表，并且有 1000 多个结果返回时，我想每当有变化时，通过 jQuery 更新结果并对其进行分页。

到目前为止，我以多种格式返回结果，json、html，但我不确定通过分页实现这种实时（onchange of any）搜索的最佳方式。

任何建议，或者如果你能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:34:00.190

不确定您想在哪里显示这 1000 多个结果。我希望不要在下拉列表中，因为这会严重困扰大多数用户。:D

看看[jquery 数据表](http://datatables.net/)。

# iphone - iOS 上的 iScroll 4 性能

> ID：12444002
> 
> 赞同：1
> 
> 时间：2012-09-16T02:30:53.580
> 
> 标签：iphone, ios, gwt, iscroll4, iscroll

[iOS 上iScroll](http://cubiq.org/iscroll-4)的流畅性给我留下了深刻的印象，因此我尝试在我的 iPhone 应用程序中实现它。

iScroll [Demo](http://cubiq.org/dropbox/iscroll4/examples/pull-to-refresh/)在我的 iPhone 上运行良好。但只有当可滚动内容像`<li>`元素中的短文本一样简单时：

```
<ul id="thelist">
    <li>Pretty row 1</li>
    <li>Pretty row 2</li>
    <li>Pretty row 3</li>
        etc..
</ul> 
```

当我试图放一个稍微复杂一点的内容时：

```
<ul>
    <li class="GOE-WOTBDO GOE-WOTBIO GOE-WOTBEO " __idx="0">
        <div class="cssDivStyle">
                <img width="120px" height="74px" src="http://some_jpg_image.jpg">
        </div> 
        <div> 
            <p>Some long text ....</p>
        </div>
    </li> 
```

平滑度完全消失了，列表几乎没有滚动..

有没有办法让我的内容更轻？

有什么建议吗？非常感谢你 ！

这是我声明 iScroll 元素的方式：

```
myScroll = new $wnd.iScroll(
            elem,
            {
                useTransition : true,
                topOffset : pullDownOffset,
                hScroll : false,
                onRefresh : function() {
                    if (pullDownEl.className.match('loading')) {
                        pullDownEl.className = 'pullDown';
                        pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Pull down to refresh...';
                    }
                },
                onScrollMove : function() {
                    if (this.y > 5 && !pullDownEl.className.match('flip')) {
                        pullDownEl.className = 'flip pullDown';
                        pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Release to refresh...';
                        this.minScrollY = 0;
                    }

                },
                onScrollEnd : function(response) {
                    if (pullDownEl.className.match('flip')) {
                        pullDownEl.className = 'loading pullDown';
                        pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Loading...';
                        app.@ma.xxx.xxxxx.clientcommon.utils.IPhoneScroller::callbackSuccess(Lcom/google/gwt/user/client/rpc/AsyncCallback;Lcom/google/gwt/core/client/JavaScriptObject;)(pullDownCallback,response);
                    }
                }
            }); 
```

[编辑]

仅通过从以下位置删除`divs`：

```
<ul>
    <li class="GOE-WOTBDO GOE-WOTBIO GOE-WOTBEO " __idx="0">
        <div class="cssDivStyle">
            <img width="120px" height="74px" src="http://some_jpg_image.jpg">
        </div> 
        <div> 
            <p>Some long text ....</p>
        </div>
</li> 
```

并使其：

```
<ul>
    <li class="GOE-WOTBDO GOE-WOTBIO GOE-WOTBEO " __idx="0">
        <img class="cssDivStyle" width="120px" height="74px" src="http://some_jpg_image.jpg">
        <p>Some long text ....</p>
    </li> 
```

使滚动速度更快！我不知道为什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:18:14.627

下面的代码将以 webkit 期望的方式呈现您的页面。所以重绘会大大加快。

的HTML

```
<body>
    <div class="headerFix">
        <div class="header">
            <!-- The content in header...logo/menu/e.t.c -->
        </div>
    </div>
    <div class="content"><!-- you dont need this extra div but it keeps structure neat -->
        <ul>
            <li>List content here which can be as complex as needed</li>
            <li>Item</li>
            <li>Item</li>
            <li>Item</li>
            <li>Item</li>
            <li>Item</li>
            <li>Item</li>
        </ul>
    </div>
    <div class="footerFix">
        <div class="footer">
            <!-- The content in footer -->
        </div>
    </div>
... 
```

的CSS

```
.headerFix, .header {
    height:50px; /*important to share width in both divs*/    
    width:100%;
    background:red;
}

.headerFix, .footerFix {
    position:relative;
}

.header {
    position:fixed;
    top:0;
    left:0;
    /*this is now fixed, but the parent being in flow keeps this div from overlapping your list which is why the height had to be the same for both*/
}

ul li {
    /*basic list look for sample purposes*/
    display:block;
    min-height:40px;
    border-bottom:solid 1px #777;
}

.footerFix, .footer {
    height:50px; /*important to share width in both divs*/
    width:100%;
    background:red;
}

.footer {
    position:fixed;
    top:0;
    left:0;
    /*you will need to use javascript to find the height of device screen to know what the css value for "top" should really be. This will take some work on android where getting screen sizes is funky if you plan to support it. */
    /*If its iphone only you can assume the size which has always been the same, and make an exception for the new iphone 6\. I say use javascript to position this footer if you plan to support many platforms*/
} 
```

顺便说一句，我建议在您的 html 头中使用此元标记，以确保您以最佳状态使用屏幕

```
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T03:17:51.620

当我在移动应用程序中使用“iscroll-lite.js”库时，我遇到了同样的问题。然后我在“iscroll-lite.js”库中几乎没有变化。

只需将 e.preventDefault() 添加到 'iscroll-lite.js' 中的 '_move:' 函数；

它解决了我的问题。

# python - 我的 Python 应用程序需要多长时间才能运行？

> ID：12444004
> 
> 赞同：39
> 
> 时间：2012-09-16T02:31:11.707
> 
> 标签：python, timer

基本上，我希望能够输出应用程序运行的经过时间。我想我需要使用某种 timeit 函数，但我不确定是哪一个。我正在寻找类似以下的东西......

```
START MY TIMER
code for application
more code
more code
etc
STOP MY TIMER 
```

OUTPUT ELAPSED TIME 在定时器的启动和停止之间执行上述代码。想法？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-16T02:34:22.360

最简单的方法是放置：

```
import time
start_time = time.time() 
```

在开始和

```
print "My program took", time.time() - start_time, "to run" 
```

在最后。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-16T02:46:10.770

要在不同平台上获得最佳结果：

```
from timeit import default_timer as timer

# START MY TIMER
start = timer()
code for application
more code
more code
etc
# STOP MY TIMER
elapsed_time = timer() - start # in seconds 
```

`timer()`[`time.perf_counter()`](http://docs.python.org/dev/library/time.html#time.perf_counter)在 Python 3.3 和`time.clock()/time.time()`Windows/其他平台上的旧版本中是 a 。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-16T02:35:46.700

如果您运行的是 Mac OS X 或 Linux，只需使用该`time`实用程序：

```
$ time python script.py
real    0m0.043s
user    0m0.027s
sys     0m0.013s 
```

如果没有，请使用该`time`模块：

```
import time

start_time = time.time()

# ...

print time.time() - start_time, 's' 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-16T02:36:33.550

您可以使用系统命令`time`：

```
foo@foo:~# time python test.py
hello world!

real    0m0.015s
user    0m0.008s
sys     0m0.007s 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-05-21T09:29:37.727

在程序开始时取系统当前时间，最后再取程序结束时间，最后减去两次。

下面的代码描述了我们如何执行上述操作：

```
import time
start = time.time() 
```

> 示例代码从这里开始

```
cnt = 1
for fun in range(10**11):
    if (fun % 10**9 == 0):
        print(cnt, fun)
        cnt += 1 
```

> 示例代码到此结束

```
end = time.time()
print('Time taken for fun program: ', end - start) 
```

希望这永远清楚。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-16T02:33:37.917

您不能在开始和结束时获取当前系统时间，然后从最终时间中减去开始时间吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-02T10:40:00.540

```
import time as t
def TimeTakenDecorator(func):
    def wraper(*args,**kwargs):
        start = t.time()
        func(*args,**kwargs)
        end = t.time()
        print('Time taken for fun program: ', end - start)
    return wraper

@TimeTakenDecorator
def hello(s):
    for _ in range(100000000):
        pass
    print(s)

hello("test") 
```

# java - Java Convert String[] to Byte[] making sure to skip empty strings

> ID：12444005
> 
> 赞同：1
> 
> 时间：2012-09-16T02:31:18.010
> 
> 标签：java

I need to convert `String[]` to `Byte[]` in Java. Essentially, I have a space delimited string returned from my database. I have successfully split this String into an array of string elements, and now I need to convert each element into a byte, and produce a byte[] at the end.

So far, the code below is what I have been able to put together but I need some help making this work please, as the getBytes() function returns a byte[] instead of a single byte. I only need a single byte for the string (**example string is 0xd1** )

```
byte[] localbyte = null;
if(nbytes != null)
{
    String[] arr = (nbytes.split(" ")); 
    localbyte = new byte[arr.length];  
    for (int i=0;  i<localbyte.length;  i++) {
        localbyte[i] = arr[i].getBytes();  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T02:51:38.563

I assume you'd like to split strings like this:

```
"Hello  world!" 
```

Into `"Hello"`, `"world!"` instead of `"Hello"`, `" "`, `"world!"`

If that's the case, you can simply tweak on the split regex, using this instead:

```
String[] arr = (nbytes.split(" +")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T03:24:11.417

You should be familiar with **regular expression**. Instead of removing empty string after splitting, you can split the string with **one or more white space**:

To split a string by **space or tab**, you can use:

```
String[] arr = (nbytes.split("\\p{Blank}+")); 
```

E.g.

```
"Hello \tworld!" 
```

results in

```
"Hello","world!" 
```

To split a string by any **whitespace**, you can use:

```
String[] arr = (nbytes.split("\\p{Space}+")); 
```

E.g

```
"Hello \tworld!\nRegular expression" 
```

results in

```
"Hello","world!","Regular","expression" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T04:03:46.870

What about `Byte(String string)` ([Java documentation](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Byte.html#Byte%28java.lang.String%29)).
Also you might want to look up `Byte.parseByte(string)` ([doc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Byte.html#parseByte%28java.lang.String%29))

```
byte[] localbyte = null;
if(nbytes != null)
{
    String[] arr = (nbytes.split(" ")); 
    localbyte = new byte[arr.length];  
    for (int i=0;  i<localbyte.length;  i++) {
        localbyte[i] = new Byte(arr[i]);  
    }
} 
```

Notice:

> The characters in the string must all be decimal digits, except that the first character may be an ASCII minus sign '-' ('\u002D') to indicate a negative value.

So you might want to catch the `NumberFormatException`.
If this is not what your looking for maybe you can provide additional information about `nbytes` ?

Also Michael's answer could turn out helpful: [https://stackoverflow.com/a/2758746/1063730](https://stackoverflow.com/a/2758746/1063730)

# php - 从 View 获取当前用户

> ID：12444011
> 
> 赞同：6
> 
> 时间：2012-09-16T02:33:04.553
> 
> 标签：php, cakephp, cakephp-2.0

所以我想做的是，在我的主布局中，为登录用户提供一个菜单，为匿名用户提供一个不同的菜单。

布局将在每个页面上使用，所以我不确定如何执行此操作，正如我所见，Auth 组件只能在控制器中使用，如果我只能在一个中执行此操作会很好视图，但是对于每个视图，我该怎么做？我必须在 AppController 上做些什么吗？

我想做的基本上是

```
// layout
<?php if(logged): ?>
Welcome <?php echo $user; ?>
<?php else: ?>
Welcom anon, Log in?
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T03:32:54.767

您也可以使用 Auth 组件在您的视图中访问已登录的用户。从[手册](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#accessing-the-logged-in-user)：

> 用户登录后，您通常需要一些有关当前用户的特定信息。您可以使用 AuthComponent::user() 访问当前登录的用户。此方法是静态的，可以在加载 AuthComponent 后全局使用。您可以作为实例方法或静态方法访问它：

```
// Use anywhere
AuthComponent::user('id')

// From inside a controller
$this->Auth->user('id'); 
```

您应该能够执行以下操作：

```
// layout
<?php if(AuthComponent::user('name')): ?>
    Welcome <?php echo AuthComponent::user('name'); ?>
<?php else: ?>
    Welcom anon, Log in?
<?php endif; ?> 
```

# javascript - .focus(function) 选择了多个

> ID：12444015
> 
> 赞同：-1
> 
> 时间：2012-09-16T02:33:38.977
> 
> 标签：javascript, jquery, events, jquery-chosen

这个问题已经被问过很多次了，但是我没有看到“多个”品种的任何答案：

[http://jsfiddle.net/queZ6/107/](http://jsfiddle.net/queZ6/107/)

当您进入框中时，我想显示警报并捕获焦点事件。我基本上想更改围绕每个输入的元素的突出显示，随着您填写表格。这基本上是向用户发出的一个信号，可以轻松查看他们所在的字段。

我终其一生都无法弄清楚如何通过点击框（或者显然也单击它）来捕获焦点事件。

考虑到您正在输入 INTO 输入，我不明白为什么这很困难。javascript 不能看到新创建的输入（您正在输入的输入）并绑定到它吗？JS有时让我很困惑：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T02:44:51.460

因为元素是动态创建的，所以您需要使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)，使用 jquery 的`on`. 这将允许您在元素存在之前附加处理程序。

```
$('.chzn-choices').focus(function(e){ 
```

相反会是

```
$("container").on("focus", '.chzn-choices',function(e){ 
```

where`container`是一些未动态加载的静态祖先元素的选择器。如果不存在这样的容器，`document`则可以使用，但应尽可能避免。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T02:46:19.610

**更新：**

虽然旧的答案表明您不能绑定到动态创建的元素（这在某种程度上仍然是正确的），但对相关插件的更新已经使这不再是一个问题。

虽然有问题的插件仍然存在多次触发处理程序的问题，但在使用警报消息的情况下，由于更新，现在可以绑定到那些动态创建的元素。

为此，必须做的就是通过 绑定到原始目标选择列表上[`.on()`](http://api.jquery.com/on/)的事件。[`chosen:showing_dropdown`](https://harvesthq.github.io/chosen/options.html#triggered-events)

但是为了解决alert box不断创建的问题，我决定使用[underscore.js的](http://underscorejs.org/) [`.debounce()`](http://underscorejs.org/#debounce)方法，所以每1秒只立即触发一次。

下划线库绝不是必需的，但是您需要具有某种去抖动功能才能解决这个小怪癖。

```
var debouncedAlert = _.debounce(window.alert, 1000, true);
$('#select').chosen();

$('#select').on('chosen:showing_dropdown', function(e){
    e.preventDefault();
    e.stopPropagation();
    debouncedAlert('focused');
}); 
```

工作示例：

```
$(document).ready(function() {
    var debouncedAlert = _.debounce(window.alert, 1000, true);
    $('#select').chosen();

    $('#select').on('chosen:showing_dropdown', function(e){
        e.preventDefault();
        e.stopPropagation();
        debouncedAlert('focused');
    });

    $('button').click(function() {
        $('#select').trigger('chosen:open');
    });

});
```

```
body {
    margin: 10px;
}

select {
    width: 200px;
}
```

```
<link href="https://harvesthq.github.io/chosen/chosen.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><script src="https://harvesthq.github.io/chosen/chosen.jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<input type="text" value="Put your cursor here then Press Tab. Chosen will be focused!" style="width:100%">
<br>
<select id="select" multiple>
    <option value="1">abc</option>
    <option value="2">def</option>
    <option value="3">ghi</option>
</select>
<br>
<button>Press this button. Now chosen <b>will</b> be focused! :)</button>
```

**老答案：**

不，它不能。Jquery 的常规绑定方法**不适**用于动态创建的元素。为了绑定到这些类型的元素，您需要[`.on()`](http://api.jquery.com/on/).

```
$('.chzn-choices').focus(function(e){
    e.preventDefault();
    alert('focused!');
}); 
```

将改为：

```
$('#select_chzn').on('focus', '.chzn-choices', function(e){
    e.preventDefault();
    alert('focused!');
}); 
```

在这种情况下，您将事件委托给容器元素，然后将其指向您的特定元素。

[工作示例](http://jsfiddle.net/queZ6/108/)

# plugins - 在 Go 中开发插件？

> ID：12444022
> 
> 赞同：20
> 
> 时间：2012-09-16T02:34:53.930
> 
> 标签：plugins, go

可以动态运行以用于基于插件的应用程序吗？

在eclipse中，我们可以创建一些Eclipse可以动态运行的插件。

在 Go 中会发生同样的事情吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-16T10:22:22.837

我会争辩说这是两个不同的问题：

1.  有动态负载
2.  有插件

第一个是 no ：Go 程序是静态链接的，这意味着您不能将代码添加到正在运行的程序中。这也意味着您必须编译程序以使其集成插件。

幸运的是，您可以像在大多数语言中一样在 Go 中定义一个接受插件的程序，并且带有接口和快速编译的 Go 不会使这项任务变得困难。

这里有两种可能的方法：

**解决方案1：插件集成在主程序中**

与 Eclipse 插件类似，我们可以将“插件”集成到主程序内存中，只需重新编译程序即可。从这个意义上说，我们可以说数据库驱动程序是插件。

这可能不像在 Java 中那么简单，因为您必须重新编译，并且您必须在代码的某些位置导入“插件”（查看[它是如何为数据库驱动程序完成的](https://stackoverflow.com/questions/11353679/whats-the-recommended-way-to-connect-to-mysql-from-go/11357116#11357116)）但是，鉴于 Go 对目录和导入的标准化，通过一个简单的 makefile 导入插件并重新编译应用程序似乎很容易处理。

鉴于 Go 中编译的简便性和速度，以及包结构的标准化，在我看来这是一个非常可行的解决方案。

**解决方案 2：分离过程**

在 Go 中，通信和处理异步调用特别容易。这意味着您可以基于通过命名管道（或任何网络解决方案）进行通信的许多进程来定义解决方案。请注意，Go 中有一个[rpc 包](http://golang.org/pkg/net/rpc/)。对于大多数程序来说，这可能足够有效，并且主程序将能够启动和停止插件进程。这很可能与*您*在 Eclipse 中所拥有的类似，并具有内存空间保护的额外好处。

*写了几个 Eclipse 插件的人的最后一条说明：你不想要那种混乱；把事情简单化。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-14T06:11:34.153

Go 1.8 支持插件（即将于 2017 年 2 月发布。）

[https://tip.golang.org/pkg/plugin/](https://tip.golang.org/pkg/plugin/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T12:28:15.917

正如dystroy 已经说过的，在运行时加载包是不可能的。

在未来（或今天有限制），可能会在类似的项目中使用此功能[`go-eval`](https://github.com/sbinet/go-eval)，这是“Go 解释器的开始”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-08T02:55:09.037

我发现一些包可以做到这一点：

*   [https://golang.org/pkg/net/rpc/](https://golang.org/pkg/net/rpc/)
*   [https://github.com/hashicorp/go-plugin](https://github.com/hashicorp/go-plugin)
*   [https://github.com/natefinch/pie](https://github.com/natefinch/pie)

# batch-file - 如何让我的批处理文件执行两个程序

> ID：12444027
> 
> 赞同：1
> 
> 时间：2012-09-16T02:35:44.057
> 
> 标签：batch-file, execute

```
@ECHO OFF
:EXECUTE
"C:\Users\Lake\Desktop\New folder\Executes\spotify.bat"
:EXECUTE
"C:\Users\Lake\Desktop\New Folder\Executes\Firefox.bat" 
```

这就是我的批处理文件中的内容。它只执行第一个，我希望它同时执行。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T02:39:25.407

只需删除两个`:EXECUTE`标签并使用`CALL`，因此它在执行`CALL`ed 后返回到当前批处理文件：

```
@ECHO OFF
CALL "C:\Users\Lake\Desktop\New folder\Executes\spotify.bat"
CALL "C:\Users\Lake\Desktop\New Folder\Executes\Firefox.bat" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:44:12.220

或者，如果您希望它们异步执行，您可以使用 START 而不是 CALL：

```
@ECHO OFF
START "C:\Users\Lake\Desktop\New folder\Executes\spotify.bat"
START "C:\Users\Lake\Desktop\New Folder\Executes\Firefox.bat" 
```

# ruby-on-rails - GIT 删除了我的本地文件

> ID：12444030
> 
> 赞同：3
> 
> 时间：2012-09-16T02:36:16.303
> 
> 标签：ruby-on-rails, git, version-control, github

我有一个很大的问题。我正在阅读 Ruby on Rails 教程，他们建议我使用 GIT 进行版本控制。我以前从未使用过它，并且通过教程我认为我没有正确使用它。这是一些背景故事。

我创建了一个新项目，然后创建了一个新的 Github 存储库。我将它们命名为相同的东西，并将我的项目推送到该存储库。然后我查看了 Github，我所有的项目文件都在那里。然后我浏览了本教程的几章，并按照说明将文件推送到 GIT。过了一会儿，我意识到，我的文件都没有被上传。我真的不在乎，所以我继续学习教程。即使文件没有出现，仍然将文件推送到 GIT。

**重要** 我的 Github 存储库只有我第一次创建它时的几个文件，我本地机器上的项目有更多文件。在我能够遵循的教程的最后一章中，它告诉我执行以下命令：

```
$ git add .
$ git commit -m "Finish layout and routes"
$ git checkout master
$ git merge filling-in-layout 
```

一旦我执行了这些命令，我​​位于本地计算机上的项目就会丢失我在过去几天创建的所有文件。我的猜测是 Github 用 Github 上的文件替换了我本地机器上的文件（只是我启动项目时创建的文件）

我想我一直在向本地机器上的 GIT 添加文件，因为文件夹 '~/.git/logs/HEAD' 包含我所做的所有提交，看起来像 GIT 文件编号。

任何帮助都会为我节省很多时间。谢谢，-克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T02:46:32.567

您提交了一些更改，然后获得了旧版本并通过发出“git mergefilling-in-layout”恢复到旧版本。（您创建了一个分支“填充布局”）

无论你做什么都不要 -> `git reset --hard`<- 不要。

“git分支”说什么？

做这个：

```
git checkout master (or one of the others) 
```

看看哪一个是你的。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:49:49.170

从你的脑海中抹去 github。这是无关紧要的。git 存储库位于您的机器上，位于您的 rails 应用程序文件夹中。这就是 git 的美妙之处。因此，您在该文件夹中工作时提交给 git 的所有内容都在那里。您可能在此过程中犯了一些错误，或者教程对您的指示不正确，但是您可以使用“git log”查看所有提交，然后回到事情好的地方：签出该提交（因此重建当时的情况），然后从那里重新开始。

从教学上讲，我建议您不要尝试同时学习 git 和 rails。它们既大又有趣，但它们是完全正交的（这是“它们彼此无关”的花哨说法）。如果你想学习轨道，学习轨道。如果你想学 git，就学 git。只是一个建议。

# transactions - EntityFramework 5 CommitTransaction 用于上下文对象

> ID：12444035
> 
> 赞同：1
> 
> 时间：2012-09-16T02:37:41.233
> 
> 标签：transactions, entity-framework-5

我看到 EF 5 有一个“BeginTransaction”，但我无法在提交的上下文中获得智能感知。当没有 CommitTransaction 时，拥有 BeginTransaction 有什么好处？我是否正确我所看到的？

`DbContext.BeginTransaction(System.Data.IsolationLevel.RepeatableRead)`已验证。上面的相应语句没有 Commit... 有人可以告诉我这是否正确吗？如果没有 Commit 或 Complete 事务，它将不会被更新......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T21:35:12.170

有这个：

```
var transaction = DbContext.Database.Connection.BeginTransaction();
transaction.Commit(); 
```

还有这个：

```
using(var scope = new System.Transactions.TransactionScope()) {
   // do stuff
   scope.Complete();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T07:59:47.637

你在哪里找到`DbContext`包含`BeginTransaction`方法的？它不是。事务在方法内部自动管理`SaveChanges`。如果您想自己管理事务，则必须在范围内使用`TransactionScope`和调用。`SaveChanges`

# c#-4.0 - 无法将 X 类型的对象转换为 Y

> ID：12444036
> 
> 赞同：1
> 
> 时间：2012-09-16T02:37:49.717
> 
> 标签：c#-4.0, interface, compiler-errors, runtime-error

我在某些代码中不断收到异常“无法将 X 类型的对象转换为 Y”。我有一个接口和两个实现它的类，并且在从一个转换到另一个时不断抛出此错误。这两个类和接口在同一个程序集中的同一个命名空间中，所以这不是问题。我创建了一个独立的控制台应用程序来解决这个问题，但我无法让它们相互转换。我想我在这里忘记了一些基本的.Net 规则。这段代码对你有什么影响吗？

我隔离的应用程序代码：

```
class Program
{
    static void Main(string[] args)
    {

        RecurringPaymentResult r = new RecurringPaymentResult();
        r.AddError("test");
        ProcessPaymentResult p = null;
        p = (ProcessPaymentResult)r; // Doesn't compile. "Cannot convert type RecurringPaymentResult to ProcessPaymentResult"
        p = (IPaymentResult)r; // Doesn't compile. "Cannot convert type RecurringPaymentResult to ProcessPaymentResult. An explicit conversion exists (are you missing a cast?)"
        p = (ProcessPaymentResult)((IPaymentResult)r); // Compiles but throws: "Unable to cast object of type RecurringPaymentResult to ProcessPaymentResult" during runtime
    }
} 
```

我的核心代码：

```
public interface IPaymentResult
{
    IList<string> Errors { get; set; }
    bool Success { get; }
    void AddError(string error);
}

public partial class RecurringPaymentResult : IPaymentResult
{
    public IList<string> Errors { get; set; }

    public RecurringPaymentResult() 
    {
        this.Errors = new List<string>();
    }

    public bool Success
    {
        get { return (this.Errors.Count == 0); }
    }

    public void AddError(string error) 
    {
        this.Errors.Add(error);
    }
}

public partial class ProcessPaymentResult : IPaymentResult
{
    private PaymentStatus _newPaymentStatus = PaymentStatus.Pending;
    public IList<string> Errors { get; set; }

    public ProcessPaymentResult() 
    {
        this.Errors = new List<string>();
    }

    public bool Success
    {
        get { return (this.Errors.Count == 0); }
    }

    public void AddError(string error)
    {
        this.Errors.Add(error);
    }

    // More properties and methods here…

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:15:55.410

我在您的代码中看到的一个主要错误是说“ **p =** ”。

您已经决定了**p**的类型，并且您在这种类型中分配了各种其他变量，这是错误的。

**以下是所有可能的转换：**

```
RecurringPaymentResult r = new RecurringPaymentResult();
r.AddError("test");
ProcessPaymentResult p = null;

var r1 = (IPaymentResult)r;  //type of r1 becomes IPaymentResult
var r2 = (IPaymentResult)p;  //type of r2 becomes IPaymentResult
var r3 = (RecurringPaymentResult)r1; //type of r3 becomes RecurringPaymentResult 
var r4 =  (ProcessPaymentResult)r2; //type of r4 becomes ProcessPaymentResult 
```

**逻辑解释：**

人（类）有眼睛（接口），大象（类）有眼睛（接口）。接口提供 See method()。Man 和 Deer 都通过在其中包含 See 方法来实现 Eye 接口。

**现在**，您正在尝试将 Man 对象转换为 Elephant 对象，这是不可能的，因为存储这些对象的空间有不同的要求。

# php - 文件上传未在文件扩展名检查中上传文件

> ID：12444041
> 
> 赞同：0
> 
> 时间：2012-09-16T02:39:28.733
> 
> 标签：php, file-upload

在检查上传图片的文件扩展名时，我的代码总是返回false，导致图片没有上传。上传的图像具有适当的扩展名。

我的问题是为什么它不接受文件？如果检查出文件，则上传成功。

仅供参考，还有其他检查，所以不要担心这是我唯一的安全检查。只是这是导致所有问题的原因。

```
$name = $_FILES['file']['name'];
$tmp_name = $_FILES['file']['tmp_name'];
$pre_ext = explode(".", $tmp_name);
$ext = end($pre_ext);   

if (getimagesize($tmp_name) != false)
{
    //below is the check that is causing all the problems
    if ($ext == "PNG" || $ext == "png" || $ext == "jpg" || $ext == "JPG" || $ext == "jpeg" || $ext == "JPEG" || $ext == "GIF" || $ext == "gif"){
        if ($_FILES['file']['error'] == 0)      
        {
            move_uploaded_file($tmp_name, 'post_images/' . $name);
        }       
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T02:42:38.437

```
$name = $_FILES['file']['name'];
$tmp_name = $_FILES['file']['tmp_name'];
$pre_ext = explode(".", $name); 
```

应该修复它。我建议检查文件本身，而不仅仅是扩展名。tmp_name 是服务器上的临时名称，通常类似于`/tmp/random8y7ofad9`

# java - HashMap：多个读者和一个写者的多线程访问安全吗？

> ID：12444042
> 
> 赞同：4
> 
> 时间：2012-09-16T02:39:38.380
> 
> 标签：java, concurrency, hashmap

我正在阅读 的文档[`java.util.HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)，它说：

> 如果多个线程同时访问此映射，并且至少有一个线程在结构上修改了映射，则必须在外部进行同步。

**这是什么意思？**“它”可以解释为表示修改映射的线程，也可以表示映射本身。

“多线程读取安全”和“只有在有编写器时才在单线程上安全”两种情况都不是明智之举（至少对我而言），这让我相信在文档意味着该语句应该被解释为“安全地读取多个线程和一个线程写入”，而不是“当你有一个作家时锁定一切”。

更重要的是，.Net 中的哈希表实现（明确地）记录为：

> Hashtable 是线程安全的，可供多个读取线程和单个写入线程使用

（默认情况下，.Net 类不是线程安全的），因此“多个读取器线程和一个单个写入器线程”的情况必须有一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T02:52:26.120

当线程“在结构上修改映射”时，内部元素处于不确定状态，因此可能会影响读取。因此需要使用映射外部的某种方法来同步读取和写入。

也许 .Net 库的编写者在更新期间更小心地将其内部结构保持在确定状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:55:21.640

地图本身。HashMap 不是线程安全的。

看看[ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)，它是一个线程安全的映射。

您也可以自己管理。代码可能如下所示

```
class SomeClass {

    private Map<Object, Object> map = new HashMap<Object, Object>();

    public synchronized void put(Object key, Object value) {
        map.put(key, value);
    }

    public synchronized Object get(Object key) {
        return map.get(key);
    }
} 
```

更安全的是，返回值对象的副本以避免意外行为。

```
public synchronized ValueType get(Object key) {
    return map.get(key).clone(); // assume that the ValueType implements Cloneable
    // of course, you can return a copy in many ways you like
} 
```

这将只允许该`put`方法修改地图。并且所有操作都是线程安全的。

# c++ - C++，使用stack.h读取一个字符串，然后反向显示

> ID：12444043
> 
> 赞同：0
> 
> 时间：2012-09-16T02:39:44.313
> 
> 标签：c++, string, header, stack

对于我当前的任务，我必须使用以下头文件，

```
#ifndef STACK_H
#define STACK_H

template <class T, int n>
class STACK
{
  private:
    T a[n];
    int counter;

  public:
    void MakeStack() {
        counter = 0;
    }

    bool FullStack() {
        return (counter == n) ? true : false ;
    }

    bool EmptyStack() {
        return (counter == 0) ? true : false ;
    }

    void PushStack(T x) {
        a[counter] = x;
        counter++;
    }

    T PopStack() {
        counter--;
        return a[counter];
    }
};

#endif 
```

要编写一个将接收一个句子的程序，将其存储到“堆栈”中，然后将其反向显示，我必须允许用户尽可能多地重复这个过程。问题是，我不允许使用数组（否则我不需要帮助），我发现自己被难住了。

为了让我了解我正在尝试什么，这是我发布时的代码，它显然不能完全工作，但只是为了给出分配的想法。

```
#include <iostream>
#include <cstring>
#include <ctime>
#include "STACK.h"
using namespace std;

int main(void)
{
    auto time_t a;
    auto STACK<char, 256> s;
    auto string curStr;
    auto int i;

    // Displays the current time and date
    time(&a);
    cout << "Today is " << ctime(&a) << endl;

    s.MakeStack();
    cin >> curStr;
    i = 0;
    do
    {
        s.PushStack(curStr[i]);
        i++;
    } while (s.FullStack() == false);

    do
    {
        cout << s.PopStack();
    } while (s.EmptyStack() == false);

    return 0;
} // end of "main" 
```

**更新** 这是我目前的代码

```
#include   <iostream>
#include   <string>
#include   <ctime>
#include   "STACK.h"
using namespace std;

time_t                      a;
STACK<char, 256>        s;
string             curStr;
int                     i;
int                     n;

// Displays the current time and date
time(&a);
cout << "Today is " << ctime(&a) << endl;

s.MakeStack();
getline(cin, curStr);
i = 0;
n = curStr.size();
do
{
   s.PushStack(curStr[i++]);
    i++;
}while(i < n);

do
{
    cout << s.PopStack();
}while( !(s.EmptyStack()) );    

return 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:45:46.543

您在正确的轨道上，但在堆栈*已满*之前您不应该循环- 不能保证`curStr`至少包含 256 个字符。相反，循环如下...

```
int n = curStr.size();
do {
  s.PushStack(curStr[i++]);
} while (i < n); 
```

现在，你真的不应该写`<bool-expr> == false`or `<bool-expr> == true`... 而只是分别写`!<bool-expr>`and `<bool-expr>`。您也不需要`auto`局部变量上的所有存储说明符。您的教授还应该考虑使用构造函数而不是使用`MakeStack`.

编辑：看来您在翻译我的代码时遇到了一些麻烦。每个循环只需要`i++`一次——这会增加我们在字符串中的位置。正如您现在所做的那样，您实际上将位置增加了两次，因此只会推动其他所有角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T03:51:51.530

在堆栈中使用 a[`linked list`](http://en.wikipedia.org/wiki/Linked_list)而不是。`array`

在链表中，始终存储链表最后一个节点的尾指针。每个节点都维护对您的上一个节点的引用。

```
A <--- B <---- C (tail) 
```

推：

```
A <--- B <---- C <---- D (tail) 
```

流行音乐：

```
A <--- B <---- C (tail)

// D is popped out 
```

当 时`tail == null`，你知道它是一个空栈

# file - 复制文件并同时获取文件位置 VBS

> ID：12444044
> 
> 赞同：0
> 
> 时间：2012-09-16T02:39:45.377
> 
> 标签：file, vbscript, get, copy, location

我可以复制，但我不知道要放什么来获取当前目录，所以文件在哪里并不重要，但它会复制它。代码将是这样的：

```
Set fso = CreateObject("Scripting.FileSystemObject")
strFolder = fso.GetParentFolderName(WScript.ScriptFullName)
Const DestinationFile = "C:\Users\John\Foldar\output.vbs"
Const SourceFile = "fso.BuildPath (strFolder, "getty.vbs")"

    If fso.FileExists(DestinationFile) Then
        If Not fso.GetFile(DestinationFile).Attributes And 1 Then 
                fso.CopyFile SourceFile, "C:\Users\John\AnyFile\", True
        Else
                fso.GetFile(DestinationFile).Attributes = fso.GetFile(DestinationFile).Attributes - 1
                fso.CopyFile SourceFile, "C:\Users\John\AnyFile\", True
                fso.GetFile(DestinationFile).Attributes = fso.GetFile(DestinationFile).Attributes + 1
        End If
    Else
        fso.CopyFile SourceFile, "C:\Users\John\AnyFile\", True
    End If
Set fso = Nothing 
```

我需要的是这样的：

```
Const SourceFile = "currentplace\something.vbs" 
```

或类似的东西。因为我在第 4 char 48 行收到错误 Expected end of statement 。

这是我更新的代码：

```
Set fso = CreateObject("Scripting.FileSystemObject")
strFolder = fso.GetFolder(".").Path
DestinationFile = "C:\Test\getty.vbs"
SourceFile = fso.BuildPath(dir, getty.vbs)

    If fso.FileExists(DestinationFile) Then
        If Not fso.GetFile(DestinationFile).Attributes And 1 Then 
                fso.CopyFile SourceFile, "C:\Test\", True
        Else 
                fso.GetFile(DestinationFile).Attributes = fso.GetFile(DestinationFile).Attributes - 1
                fso.CopyFile SourceFile, "C:\Test\", True
                fso.GetFile(DestinationFile).Attributes = fso.GetFile(DestinationFile).Attributes + 1
        End If
    Else
        fso.CopyFile SourceFile, "C:\Test\", True
    End If
Set fso = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:28:38.503

`GetParentFolderName(WScript.ScriptFullName)`返回包含脚本解释器的文件夹的名称。这可能是也可能不是当前工作目录。如果您需要工作目录，请*不要*使用此方法。

有几种方法可以确定实际工作目录。@Jay 已经提出了一种方法：

```
strFolder = fso.GetFolder(".").Path 
```

其他人会是

```
strFolder = fso.GetAbsolutePathName(".") 
```

或对象的[`CurrentDirectory`](http://msdn.microsoft.com/en-us/library/3cc5edzd%28v=vs.84%29.aspx)方法[`WshShell`](http://msdn.microsoft.com/en-us/library/aew9yb99%28v=vs.84%29.aspx)

```
strFolder = CreateObject("WScript.Shell").CurrentDirectory 
```

**编辑：**至于你得到的错误，`Const`只适用于文字，即你不能做类似的事情

```
Const foo = fso.BuildPath(dir, filename) 
```

甚至像

```
Const foo = 23 + 42 
```

没有计算，没有函数/方法调用，没有字符串连接，什么都没有。只有文字常量：

```
Const foo = "something"
Const bar = 23 
```

如果要分配方法调用的结果，则**必须**使用变量：

```
foo = fso.BuildPath(dir, filename) 
```

# java - 分解出 Maven pom.xml 的常见元素

> ID：12444046
> 
> 赞同：2
> 
> 时间：2012-09-16T02:40:29.140
> 
> 标签：java, maven, build-process, pom.xml

我在各种项目中有许多 Maven pom.xml 文件，其中包含许多类似的配置（许可证声明、插件、资源文件夹的定义等）

将这些常见元素分解到父 pom 中并使它们可供重用的最佳方法是什么？

我特别感兴趣：

*   父 pom 中应该包含什么与项目特定？
*   在哪里存储父 pom，例如在 GitHub 上？
*   有什么需要注意的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:10:19.927

对于企业项目，您可以使用 Maven 将您的父 pom 部署到像[Sonatype Nexus](http://www.sonatype.org/nexus/ "Sonatype Nexus：管理工件")这样的工件存储库上。但这对于个人项目来说可能很麻烦。

需要共享的所有内容都必须在父 pom.xml 中。

# java - Do-while 循环不会逃逸 - Java

> ID：12444047
> 
> 赞同：0
> 
> 时间：2012-09-16T02:40:33.550
> 
> 标签：java, loops, do-while

do-while 循环是在增加之前还是之后检查一个值？我似乎无法使这个 do-while 循环转义，也无法确定这是否是我所犯的错误。这个循环的重点是从用户那里获取输入，当他们点击“X”时，我希望循环结束。我是否使用了错误类型的循环，或者可能是不正确的语句？

```
int i = 0, 
inputCount = 0;
char letter = 'a';
String[] coefficient = new String[MAX_LENGTH];  
do{ 
    System.out.print("What is " + letter +"? ");
    coefficient[i] = keyboard.nextLine();
    i++;
    letter++;
    inputCount++;           
}while(coefficient[i] != "X"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T02:43:38.493

不要使用`==`. 请改用`equals(...)`or`equalsIgnoreCase(...)`方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

* * *

特别是在你的情况下，我会改变

```
} while(coefficient[i] != "X"); 
```

类似于：

```
} while(!"X".equalsIgnoreCase(coefficient[i])); 
```

* * *

而且您的代码中还有另一个问题，您想测试您放入的用户输入`coefficient[i]`，但随后您立即增加 i 变量以`coefficient[i]`不再引用输入。

所以也许测试应该是：

```
} while(!"X".equalsIgnoreCase(coefficient[i - 1])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:48:30.773

这里有两个问题。首先，您不应该使用逻辑运算符比较字符串。使用 .equals 代替。例如：

```
coefficient[i].equals("X"); 
```

其次，在检查 while 条件之前，您要增加数组索引计数器。所以你实际上需要从中减去一个来检查最近输入的字符串是否是 X。

看看使用它是否可以正常工作：

```
coefficient[i-1].equals("X"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T02:49:08.883

您在and`i`之间递增，因此在检查 coefficient[i] 为空时，也使用 .equals 比较字符串。`coefficient[i] = keyboard.nextLine();``while(coefficient[i] != "X");`

```
int i = 0, 
inputCount = 0;
char letter = 'a';
String[] coefficient = new String[MAX_LENGTH];  
do{ 
    System.out.print("What is " + letter +"? ");
    coefficient[i] = keyboard.nextLine();
    i++;
    letter++;
    inputCount++;           
}while(!coefficient[i-1].equals("X")); 
```

# ios - NSDateFormatter 的输出不正确

> ID：12444050
> 
> 赞同：1
> 
> 时间：2012-09-16T02:42:05.717
> 
> 标签：ios, nsdateformatter

我从 NSDateFormatter 得到一些奇怪的输出。我正在将日期从 GMT 转换为系统时区，即 EDT。这应该是格林威治标准时间 -4 小时。

-(NSDate*)parseDate:(NSString*)inStrDate {

```
NSLog(@"Date To Parse %@", inStrDate);
NSDateFormatter* dtFormatter = [[NSDateFormatter alloc] init];
[dtFormatter setLocale:[NSLocale systemLocale]];
[dtFormatter setTimeZone:[NSTimeZone systemTimeZone]];
[dtFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss +0000"];
NSDate* dateOutput = [dtFormatter dateFromString:inStrDate];
NSLog(@"Parsed Date %@ %@", dateOutput, [NSTimeZone systemTimeZone]);

return dateOutput; 
```

}

日志输出：

> 2012-09-15 22:32:53.358 解析日期 2012-09-16 02:32:53 +0000 2012-09-15 22:32:53.360 解析日期 2012-09-16 06:32:53 +0000 美国/New_York (EDT) 偏移量 -14400（日光）

但它返回 +4 小时而不是 -4 小时。所以它应该输出 22.30 EDT（格林威治标准时间 02.30）它实际上返回 06.30 EDT。也就是未来 8 小时。

谁能帮我理解我在这里的某个地方是否出错了？我在挠头，但我不明白为什么这似乎不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T03:14:24.353

你只是弄错了 dateFormatter 。当你这样做

```
[dtFormatter setTimeZone:[NSTimeZone systemTimeZone]]; 
```

你告诉它*输入*日期是根据你的时区。因此，它将其转换为 GMT 并输出时间 +4 小时。要反过来做，你可以使用这个：

```
NSDateFormatter* df_local = [[NSDateFormatter alloc] init];
[df_local setTimeZone:[NSTimeZone timeZoneWithName:@"America/New_York"]];
[df_local setDateFormat:@"yyyy.MM.dd' 'HH:mm:ss zzz"];

NSDate* dateOutput = [dtFormatter dateFromString:dateString];
NSLog(@"Parsed Date in GMT %@", dateOutput);
NSString *yourLocalDate = [df_local stringFromDate:dateOutput];
NSLog(@"in EDT %@",yourLocalDate); 
```

这记录

```
2012-09-16 05:23:53.297 TestingApplication[10109:c07] Date To Parse 2012-09-16 02:32:53 +0000
2012-09-16 05:23:53.302 TestingApplication[10109:c07] Parsed Date in GMT 2012-09-16 02:32:53 +0000
2012-09-16 05:23:53.304 TestingApplication[10109:c07] in EDT 2012.09.15 22:32:53 EDT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:43:58.503

如果您想要一个日期作为最终输出，您可以跳过辅助 NSDateFormatter，只需“添加”UTC 日期和本地时间之间的差异。

```
formatter = [[NSDateFormatter alloc] init];
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];        
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"];
NSDate *date = [formatter dateFromString:dateString]; // UTC date
NSDate *date2 = [date dateByAddingTimeInterval:[[NSTimeZone localTimeZone] secondsFromGMTForDate:date]]; // local date! 
```

# ruby-on-rails - Rails - 在 Twitter Bootstrap 弹出框内渲染部分内容

> ID：12444057
> 
> 赞同：5
> 
> 时间：2012-09-16T02:43:43.390
> 
> 标签：ruby-on-rails, twitter-bootstrap

我想使用 Twitter Bootstrap 弹出框来显示用户头像和电子邮件地址，并有可能在以后添加更多详细信息。

我在获取部分内容以在链接的内容字段内呈现时遇到问题。视图代码如下（在 HAML 中）。

```
%span.comment-username
    =link_to comment.user_name, "#", "title" => comment.user_name,
      "data-content" => "=render 'users/name_popover'", 
      class: "comment-user-name" 
```

目前，这只会将内容代码生成为字符串。

有没有办法做到这一点，所以将插入部分而不是代码作为字符串？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T02:57:09.330

您希望 rails 实际评估字符串的内容，而不仅仅是显示字符串。最简单的方法是：

```
%span.comment-username
  =link_to comment.user_name, "#", "title" => comment.user_name,
    "data-content" => "#{render 'users/name_popover'}", 
      class: "comment-user-name" 
```

这应该将渲染语句传递给 rails 并按预期渲染您的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T06:16:46.057

感谢 jrc 的回答 - 它帮助我找到了解决方案。

我的解决方案可能对像我这样的其他非 HAML 人员有用：

```
`<%= link_to('Service History' , '#', :class => "popover-history", :rel => "popover", :"data-placement" => "bottom", :title => "Service History", :"data-content" => "#{render 'services/service_history'}") %>` 
```

和

```
`$(function () {
$('.popover-history').popover({ html : true });
});` 
```

# javascript - 将整个 javascript 库包装在 try catch 块中的缺点是什么？

> ID：12444058
> 
> 赞同：2
> 
> 时间：2012-09-16T02:43:46.587
> 
> 标签：javascript, error-handling

我正在考虑将我的整个 javascript 库包装在一个 try catch 块中，这样任何错误都不会导致使用该库的第三方页面中断。

此外，我还能够捕获我自己的代码引发的错误并将它们发送到我的服务器。

我唯一的问题是这样做会不会产生任何潜在的负面影响？（性能、错误跟踪等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T07:29:34.293

将您的库包装在一个`try{}`块中**并不是**一个好主意。有几个不同的问题。值得注意的是，V8 无法优化 a 内部的堆栈`try{}`，从而导致明显的性能损失。将任何您实际上不希望`throw`出现错误的内容包装起来通常不是一个好习惯，因为它会从调试控制台中吞下并隐藏错误。

此外，包装库`try{} catch(e) {}`并不会神奇地捕获发生的每个错误。也许你的“库”只是一段加载时执行一次的 JavaScript 代码，但很可能你有某种异步操作会导致代码在`try{}`. 重要的是要注意这**不会**捕获：

```
try {
    setTimeout(function() {
        throw "test";
    }, 100);
} catch(e) { 
    console.log( "I got caught" );
} 
```

[在 jsFiddle 中尝试一下](http://jsfiddle.net/qJemR/)

幸运的是，有一个捕捉“未处理”错误的好地方——`window.onerror`对于“第一方”开发人员来说，保持理智是一个非常好的主意，但是当你在一个库上工作时，你应该依赖于坚如磐石的单元测试。为“第一方开发人员”提供一个明显且易于使用的错误报告表也是必须的。相信我，如果你的图书馆坏了，人们会抱怨的。:)

PS - 我在程序员 SE 上发现了[这个问题](https://softwareengineering.stackexchange.com/questions/144326/try-catch-in-javascript-isnt-it-a-good-practice)，这应该能更清楚地说明`try{}`

PPS - 找到了一个不错的[jsperf](http://jsperf.com/try-catch-performance-overhead)使用`try{}`，如果你看一下，它似乎表明包含`try{}`块的函数的性能会降低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:55:27.863

如果你正在吞下一个异常，你并没有阻止第三方页面被破坏——你的代码被调用并且发生了一个异常，显然页面现在被破坏了——除了现在第三方页面的开发人员不知道你的代码坏了。恕我直言，这是一个很大的缺点。如果发生了不好的事情，看在上帝的份上，让别人知道。这就是例外的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T03:10:36.150

尽管我同意 Blender 的观点，理想情况下您会尝试通过一些彻底的 QA 来跟踪任何错误，以回答您的问题“什么是不利影响”：

*   在性能方面，try-catch 块在没有错误发生时无效。这并不取决于代码的大小。Try/catch 仅在发生错误时才会产生开销效应。并且代码的大小不会显着增加/减少这种开销。大多数情况下，错误处理将查看被捕获块的返回类型，而不是整个块（[请参阅 ECMA 规范的第 96 页](http://www.ecma-international.org/publications/standards/Ecma-262.htm)：）
*   @Aquinas 还有一个很好的观点，即其他第 3 方脚本需要知道该页面可能已损坏...

# asp.net-mvc - 如何在 Orchard CMS 中显示列表的标题？

> ID：12444063
> 
> 赞同：0
> 
> 时间：2012-09-16T02:45:44.263
> 
> 标签：asp.net-mvc, razor, orchardcms

我已经接管了 Orchard 中特定列表的列表渲染，这样我就可以向“ul”标签添加一个新类，并在项目的开头和结尾添加两个虚拟“li”元素（需要正确的“视觉-效果”网页设计师设计）。这是覆盖的模板代码：

```
@using Orchard.DisplayManagement.Shapes;
@{
    var list = Model.List;
    var items = list.Items;
    var count = items.Count;
    var listTag = Tag(list, "ul");
    listTag.AddCssClass("historia");
    var index = 0;
}
@listTag.StartElement
<li></li><li></li>
    @foreach (var item in items) {
        var itemTag = Tag(item, "li");
        if (index == 0) {
            itemTag.AddCssClass("first");
        }
        else if (index == count - 1) {
            itemTag.AddCssClass("last");
        }
        @itemTag.StartElement
        @Display(item)
        @itemTag.EndElement
        ++index;
    }
<li></li><li></li>
@listTag.EndElement
<div class="scroll">
    <hr />
    <p>
    <input type="button" value="back" />
    </p>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="local"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <p>
    <input type="button" value="next" />
    </p>
</div>
@Display(Model.Pager) 
```

现在我正在尝试显示列表的标题，我注意到它根本没有在我的自定义渲染和标准列表渲染例程中显示。我已经尝试将这几个选项添加到布局中，现在可以使用：

```
<h1>@Model.Title</h1>
@Display(Model.Header)
@Display(Model.Title)
@Display(Model.List.Header)
@Display(Model.List.Title)
<h1>@Model.Header.Items[0].Title</h1> 
```

没有任何成功！我错过了什么？（当然这是一个新手问题:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:55:19.247

我不敢相信我忘了检查 Placement.info 文件！在我看来，所有placement.info 文件的总和是果园主题的圣杯！

Orchard.Web\Modules\Orchard.Lists\Placement.info 文件如下所示：

```
<Placement>
    <!-- available display shapes -->
    <!--
        Parts_Container_Contained_SummaryAdmin
    -->
  <Match ContentType="List" DisplayType="Detail">
    <!-- don't show the List title or Common Metadata -->
    <Place Parts_Title="-" />
    <Place Parts_Common_Metadata="-" />
  </Match>
  <Match DisplayType="SummaryAdmin">
    <Place Parts_Container_Contained_SummaryAdmin="Actions:10"/>
  </Match>
</Placement> 
```

请注意，标题部分与“-”特殊位置一起被遗忘了吗？

我所要做的就是在我的主题的位置信息上覆盖它：

```
 <Match ContentType="List" DisplayType="Detail">
    <Place Parts_Title="Header:2>" />
  </Match> 
```

我告诉过你这是一个菜鸟问题！毕竟我能够自己回答！很抱歉用这个愚蠢的问题打扰社区！

# javascript - 滚动时导致延迟的大背景图像

> ID：12444067
> 
> 赞同：6
> 
> 时间：2012-09-16T02:46:19.427
> 
> 标签：javascript, jquery, css, image, scroll

我正在构建的网站有 4 张大背景图片，它们占据了用户浏览器的整个高度和宽度。它们被实现为 CSS 背景 div。问题是，在较大的屏幕尺寸上滚动时，它非常滞后且不稳定。当用户按下按钮时，这些图像之间的滚动是通过 JavaScript 自动完成的，因此这是我网站的核心功能的一部分，我必须找到一种防止延迟的方法。

到目前为止，我已经尝试通过 JS 预加载图像并将图像从 PNG 转换为 JPEG（增加压缩并降低质量）服务器端。这些都不起作用。

图像的最小高度可以是 630 像素。如何在部分之间滚动时防止滞后？

这是我的代码：

CSS：

```
 body { height: 100%; margin: 0px; font-family: HelveticaNeue, Helvetica, Arial, sans-serif; }

 .area { height: 630px; border: 0px solid red; background: repeat-x; margin-bottom: 0px; }

 a { text-decoration: none; }
 h1, h2, h3, h4, h5, h6 { font-family: Av, Helvetica, Arial, sans-serif; color: #292E37; font-weight: lighter; }

 #top { position: fixed; width: 100%; height: 10%; background: #292E37; box-shadow: inset 0px -1px 5px #000; z-index: 1000; }
 #navigation { float: right; height: 100%; }
 #bottom { width: 100%; position: fixed; bottom: 0px; padding: 10px; background: #292E37; box-shadow: inset 0px 1px 5px #000; text-shadow: 0px 1px 0px #000; color: #fff; }
 #sceneSelection { top: 20%; position: fixed; padding: 10px; }
 #info { margin-top: 50px; margin-bottom: 50px; }
 .box { margin-top: 50px; padding: 75px; background: #292E37; box-shadow: inset 0px 1px 5px #000; text-shadow: 0px 1px 0px #000; color: #fff; }

 .nav { position: relative; top: 38%; height: 100%; margin-right: 35px; display: inline-block;  color: #fff; text-shadow: 0px 1px #000; }
 .nav:hover { color: #EA5555; }

 .nimage { float: left; width: 16px; height: 16px; position: relative; top: 5%; left: -20%; }
 .home { background: url(site_images/icons/nav/home.png); }
 .pricing { background: url(site_images/icons/nav/pricing.png); }
 .features { background: url(site_images/icons/nav/features.png); }
 .blog { background: url(site_images/icons/nav/blog.png); }
 .contact { background: url(site_images/icons/nav/contact.png); }
 .about { background: url(site_images/icons/nav/us.png); }

 .logo { font-size: 2em; text-shadow: 0px 1px #000; padding-top: 10px;  padding-left: 15px; color: #EA5555; font-family: Av, Helvetica, Arial, sans-serif; }
 .red { color: #EA5555; }
 .white { color: #fff; text-shadow: 0px 1px 0px #000; font-weight: bold; }
 .dark { color: #202020; }

 .center { text-align: center; }
 .left { text-align: left; }
 .right { text-align: right; }

 .larger { font-size: 1.25em; }

 .buttoni { -webkit-border-radius: 2px; -moz-border-radius: 0px; border-radius: 4px; background: #ddd; display: block; color: #ccc; font-size: 14pt; height: 50px; text-align: right; margin: 10px; cursor: pointer; color: #505050; }
 .buttoni:hover { background: #EA5555; color: #fff; }

 .btext { padding: 15px; position: relative; top: 25%; }

 .groundi { background: url(ground_button.png); }
 .skyi { background: url(sky_button.png); }
 .stratospherei { background: url(stratosphere_button.png); }
 .spacei { background: url(space_button.png); }

 .image { height: 50px; width: 50px; float: left; border-top-left-radius: 5px; border-bottom-left-radius: 5px; }

 li { color: #EA5555; }
 li span { color: #505050; } 
```

HTML：

```
 <div class="space area" id="a4">

  </div>
  <div class="stratosphere area" id="a3">

  </div>
  <div class="sky area" id="a2">

  </div>
  <div class="ground area" id="a1">

  </div> 
```

JavaScript：

```
function scroll_to(id, speed, margin) {
         $('html, body').animate({
           scrollTop: $('#' + id).offset().top - margin
         }, speed);
       }

function match_height() {
         var heights = [11, 630, 693, 756, 819, 882, 945, 1008, 1071, 1134, 1197, 1260, 1323, 1386, 1449, 1512, 1575, 1638, 1701, 1764, 1827, 1890, 1953, 2016, 2079, 2142, 2205, 2268, 2331, 2394, 2457, 2520];

           var browsery = $(window).height();

           var i = 0;

           while(browsery > heights[i]) {
             i++;
           }

           var h = heights[i];

           $(".area").css("height", h + "px");
           $(".area").css("width", "100%");

           $(".ground").css("background", "url(scenes/ground/" + h + ".png)");

           $(".sky").css("background", "url(scenes/sky/" + h + ".png)");
           $(".stratosphere").css("background", "url(scenes/stratosphere/" + h + ".png)");

           $(".space").css("background", "url(scenes/space/" + h + ".png)");

       }

       match_height();

       var pos = 0;

       $(".buttoni").click(function() {
         var id = $(this).attr("id");

         if(pos != id) {
           scroll_to("a" + id, 2000, 0);
         }

         pos = id;
       }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T02:08:38.203

操作，

对于支持 3d 转换的浏览器，例如：`-webkit-transform`，您可以尝试以下操作：

```
your.div { -webkit-transform: translate3d(0,0,1px); } 
```

可能看起来不多，但执行上述操作会导致有问题的 div 被硬件加速。

如果您遇到任何闪烁的问题（已知它们在某些情况下会出现），以下应该可以解决您的问题：

```
your.div { 
    -webkit-transform: translate3d(0,0,1px); 
    -webkit-backface-visibility: hidden;
} 
```

### 通过大卫沃尔什 - [http://davidwalsh.name/translate3d](http://davidwalsh.name/translate3d)

> **translate3d**的使用将 CSS 动画推入硬件加速。即使您要进行基本的 2D 翻译，也请使用`translate3d`更多功能！如果你的动画在切换到上面的变换后仍然闪烁，你可以使用一些鲜为人知的 CSS 属性来尝试修复问题

希望有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T12:28:08.893

据我了解，OP中起草的问题和解决方案有两个方面：

*   最初，在 match_height() 函数中，OP 作者检索最适合屏幕高度的图像，以便在完成动画后用户看到一个完整的背景图像。
*   初始加载后，用户可以在触发 scroll_to() 函数及其包含的动画的一些按钮的帮助下向上和向下导航部分（及其各自的背景图像）。这是实际问题所在。

我的努力和由此产生的小提琴专注于 scroll_to() 函数和相关的动画。我采用了以下措施，结合起来，产生了（根据我的主观观察）“*更顺畅*”的滑行体验：

*   原始动画发生在“html”*和*“body”上，我将 jQuery 选择器减少到只有一个选择器。为了能够使用 jQuery 1.9（不推荐使用 jQuery.browser），我使用功能检测来获取“正确”选择器：

    ```
    function getScrollerSelector() {
        var $body = $("<body/>");
        $body.scrollTop(1);
        return $body.scrollTop() == 1 ? "body" : "html";
    } 
    ```

*   为了减少浏览器的处理负载，我应用了一个逻辑，根据 CSS，在滚动期间将不可见部分的背景图像设置为无：

    ```
    .scrolldown.scrollto-a2 #a1,
    .scrolldown.scrollto-a3 #a1, .scrolldown.scrollto-a3 #a2,
    .scrolldown.scrollfrom-a3 #a4,
    .scrolldown.scrollfrom-a2 #a4, .scrolldown.scrollfrom-a2 #a3,
    .scrollup.scrollto-a3 #a4,
    .scrollup.scrollto-a2 #a4, .scrollup.scrollto-a2 #a3,
    .scrollup.scrollfrom-a2 #a1,
    .scrollup.scrollfrom-a3 #a1, .scrollup.scrollfrom-a3 #a2
        { background: none; } 
    ```

*   我玩过线性缓动，但这并不一定能改善任何东西

总而言之，滚动对我来说似乎不再不稳定，但请考虑到这也取决于客户端计算机的处理能力。

这是 scroll_to() 函数：

```
function scroll_to(id, speed, margin) {
    var currentScrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
    var scrollTop = $('#' + id).offset().top - margin;
    var direction = scrollTop > currentScrollTop ? "down" : "up";
    $("body").addClass("scroll"+direction + " scrollto-"+id + " scrollfrom-"+getScrollFrom(direction));
    $( scrollerSelector ).animate({
             scrollTop: scrollTop
        }, {
             //easing: 'linear',
             duration: speed,
             complete: function() {
                 $("body").removeClass("scrollup scrolldown scrollto-a1 scrollto-a2 scrollto-a3 scrollto-a4 scrollfrom-a1 scrollfrom-a2 scrollfrom-a3 scrollfrom-a4");                     
             }
         }
     );
} 
```

这是[**jsfiddle 的链接**](http://jsfiddle.net/martyk/EHECD/15/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:10:40.710

由于您正在放大图像，因此您可以告诉浏览器如何处理图像的渲染。在动画/滚动期间，您可以告诉浏览器优化速度和完成动画/滚动，优化质量。

这是您可以在 img 上使用的 CSS 属性：'image-rendering'，其值为 optimizeSpeed / optimizeQuality。

[https://developer.mozilla.org/en-US/docs/CSS/image-rendering](https://developer.mozilla.org/en-US/docs/CSS/image-rendering)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T04:27:03.337

在本地测试，您的代码似乎应该可以正常工作，我有 firefox 15 和 chrome，没有看到任何滞后

如果您尝试使用滚动到方法怎么办？

```
function scroll_to(id, speed, margin) {
     $('html, body').animate({
       scrollTop: $('#' + id)
     }, speed);
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T04:31:09.290

您可以对图像做的一件事是使用[http://www.smushit.com/ysmush.it/](http://www.smushit.com/ysmush.it/)将其弄脏， 这样可以减小图像的大小，而不会降低质量，删除所有不需要的元数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T08:17:53.107

我正在处理的一个网站也有类似的问题。最后，问题似乎是由于计算机/浏览器必须计算并在屏幕上呈现的图像的大尺寸。

我的建议是尽可能减少需要在屏幕上显示和滚动的图像数量。

大多数现代浏览器现在支持硬件（显卡）渲染，而不是传统的（通常较慢）基于软件 (CPU) 的渲染。基于硬件的渲染理论上应该可以减少您遇到的延迟。但是，如果您的 PC 仅具有基本或平均图形渲染功能，那么无论如何您都不会取得太大的成功。在我放弃并删除图像之前，我个人在 Chrome、FireFox 或 IE 上都没有成功。

# macos - MonoDevelop - 在 Mac 上使用 Subversion 1.7

> ID：12444081
> 
> 赞同：2
> 
> 时间：2012-09-16T02:50:16.243
> 
> 标签：macos, svn, mono, monodevelop

我安装了自制软件，并且能够使用它将 subversion 升级到 1.7（并在我的 PATH 中将 /usr/local/bin 移动到 /usr/bin 之前）。

所以如果我输入：

```
svn help
Subversion command-line client, version 1.7.6. 
```

问题是 MonoDevelop 似乎没有在 PATH 中使用 svn，因为 svn 1.7 repos 似乎没有在 MonoDevelop 中进行版本控制。

我需要 1.7，因为我还使用带有 Windows 的 VM，并且我在主机和来宾之间共享存储库。在 Windows 上，我使用了 TortoiseSVN/AnkhSvn，它的目标是 subversion 1.7。

有没有办法让 MonoDevelop 在不同的位置使用 svn？我尝试使用 MonoDevelop.VersionControl.Subversion.Unix.dll.config，但无法让它工作：

```
<configuration>
    <dllmap os="osx" dll="libsvn_client-1.so.0" target="libsvn_client-1.dylib" />
    <dllmap os="osx" dll="libapr-0.so.0" target="libapr-1.0.dylib" />
    <dllmap os="freebsd" dll="libapr-0.so.0" target="libapr-1.so" />
</configuration> 
```

我尝试在与 Subversion dll 相同的目录中创建符号链接：

```
libsvn_client-1.dylib -> /usr/local/Cellar/subversion/1.7.6/lib/libsvn_client-1.dylib 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:41:15.520

尝试在启用 MONO 调试的情况下启动 monodevelop，即使用类似：

```
export MONO_LOG_LEVEL=debug; export MONO_LOG_MASK=dll; mono MonoDevelop.exe 
```

这应该会给你一些关于 mono 试图找到 subversion 库的确切位置的信息。

# html - 需要帮助将 CSS 转换为 Mozilla 兼容

> ID：12444082
> 
> 赞同：-2
> 
> 时间：2012-09-16T02:50:26.973
> 
> 标签：html, css

```
.greenbutton {
    font-family:"Helvetica";
       font-size:28px;
       font-weight:normal;
       line-height:130%;
       color:rgb(255,255,255);
       font-weight:300;
       height:100%;
       text-decoration:none;
       padding-left:40px;
       padding-right:40px;
       padding-top:3px;
       padding-bottom:3px;
       text-align: center;
       margin-top:25px;
       border-top-width:1px;
       border-top-color:#999999;
       border-top-style:solid;
       background-image: -webkit-gradient(
             linear,
             left bottom,
             left top,
             color-stop(0%, rgba(6,171,151,1)),
             color-stop(60%, rgba(6,171,151,1)),
             color-stop(61%, rgba(120,212,205,1)),
              color-stop(100%, rgba(120,212,205,1))
            );
       -webkit-border-radius:15px ;

}
.greenbuttonholder{
           width:140px;
           height:50px;
           padding-top:25px;
           position:relative;
           margin:auto;

} 
```

此按钮仅适用于 Google Chrome，但不适用于 Firefox。

顺便说一下，对于那些想要在这里做一些实验的人来说，jsfiddle 链接是：http: [//jsfiddle.net/M5Bzn/](http://jsfiddle.net/M5Bzn/)

我唯一尝试过的是将 -moz- 添加到所有行中，但这显然不起作用：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:12:17.827

如果您想专门针对 Mozilla，您可以将其添加到您的 css：

```
 border-radius: 15px;
   background: -moz-linear-gradient(
         top,
         rgba(120,212,205,1),
         rgba(120,212,205,1) 40%,
         rgba(6,171,151,1) 41%,
         rgba(6,171,151,1)
        ); 
```

[您可以在开发人员文档](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)中阅读有关线性渐变的更多信息

注意：另外，对于边界半径，根据[Mozilla 的文档](https://developer.mozilla.org/en-US/docs/CSS/border-radius)，*“在 Gecko 13.0 (Firefox 13.0 / Thunderbird 13.0 / SeaMonkey 2.10) 中删除了对前缀版本 (-moz-border-radius) 的支持。”* . 如果您想支持旧版本的 firefox，您可以轻松添加 -moz-border-radius

# c++ - 对包含 100 个元素的整数数组进行排序，其中只有 3 个元素

> ID：12444083
> 
> 赞同：3
> 
> 时间：2012-09-16T02:50:29.217
> 
> 标签：c++, algorithm, sorting

假设我有一个包含 100 个数字的数组。数组中唯一不同的值是 1、2 和 3。这些值在整个数组中随机排序。例如，数组可能填充为：

```
int values[100];

for (int i = 0; i < 100; i++)
    values[i] = 1 + rand() % 3; 
```

我怎样才能有效地对这样的数组进行排序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T02:53:59.877

最快的解决方案是根本不“排序”：

*   遍历数组并计算 1,2 和 3 的出现次数。希望这些计数适合寄存器......
*   用正确数量的 1、2 和 3 填充数组，覆盖已经存在的任何内容。

最后，您将拥有一个完全排序的数组。

通常，当与数组大小相比，可能值的范围非常小时，这可能是一种有用的 O(n) 排序算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T15:40:08.753

[荷兰国旗算法](http://en.wikipedia.org/wiki/Dutch_national_flag_problem)是常用的算法，实际上是快速排序变体之一中的分区步骤（1 对应于小于，2 对应于，3 对应于大于）。在该变体中，您不需要对中间部分进行排序。

# c# - 如何使用 Form.ShowDialog？

> ID：12444086
> 
> 赞同：14
> 
> 时间：2012-09-16T02:51:05.363
> 
> 标签：c#

```
private void button2_Click(object sender, EventArgs e)
        {
            ChangeLink cl = new ChangeLink();
            // Show testDialog as a modal dialog and determine if DialogResult = OK.
            if (cl.ShowDialog() == DialogResult.OK)
            {
                // Read the contents of testDialog's TextBox. 
               // cl.AcceptButton.DialogResult = DialogResult.OK;
                this.label4.Text = cl.textBox1Text;
            }
            else
            {
                this.label4.Text = "Cancelled";
            }
            cl.Dispose();

        } 
```

当我单击按钮时，我会在新表单中看到新表单和 textBox1。我可以在 textBox1 中输入一些东西，但是我在任何地方都看不到 OK 或 CANCEL 按钮。我应该在新的表单设计器中手动添加它们吗？以及如何使用它们呢？

这是我的新表单中的代码我想要做的是在新表单 textBox1 中输入一些内容并将 textBox1 中的文本传递给 Form1 label4。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace GatherLinks
{
    public partial class ChangeLink : Form
    {
        public ChangeLink()
        {
            InitializeComponent();

        }

        public string textBox1Text
        {
            get
            {
                return textBox1Text = textBox1.Text;
            }
            set
            {

            }
        }
    }
} 
```

那么Form.ShowDialog的OK和CANCEL按钮在哪里呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-16T02:56:59.907

您需要自己添加它们，您可以将按钮添加到您的`Form`并设置它们的[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.dialogresult%28v=vs.100%29.aspx)属性。这将返回 DialogResult 并关闭表单，而无需连接任何代码。这是一个使用方法返回 Form2 上的 TextBox 值的示例（Form2 上有两个按钮，它们的 DialogResults 分别设置为 Cancel 和 Ok）。

**表格1**

```
public partial class Form1 : Form
{
    Form2 frm2;
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        frm2 = new Form2();
        DialogResult dr = frm2.ShowDialog(this);
        if (dr == DialogResult.Cancel)
        {
            frm2.Close();
        }
        else if (dr == DialogResult.OK)
        {
            textBox1.Text = frm2.getText();
            frm2.Close();
        }
    }
} 
```

**表格2**

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public string getText()
    {
        return textBox1.Text;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-30T11:41:01.613

鉴于您唯一的标签是 C#，并且您期望一个确定和取消按钮，在我看来，您实际上是在寻找 MessageBox 函数。仅仅为了显示消息框对话框而创建和处理表单是不必要的。

```
if (MessageBox.Show("boxtext", "boxcaption" MessageBoxButtons.OKCancel) == DialogResult.OK) 
{
// Read the contents of testDialog's TextBox. 
// cl.AcceptButton.DialogResult = DialogResult.OK;
this.label4.Text = cl.textBox1Text;
}else
{
    this.label4.Text = "Cancelled";
} 
```

[MessageBox](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)是同名 WIN32 API 函数的包装器：

```
int WINAPI MessageBox(
  _In_opt_  HWND hWnd,
  _In_opt_  LPCTSTR lpText,
  _In_opt_  LPCTSTR lpCaption,
  _In_      UINT uType
); 
```

注意：如果您已经有一个窗口句柄/表单，请确保将其作为第一个参数传递给 MessageBox。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-15T20:01:20.990

[https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.dialogresult?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.dialogresult?view=net-5.0)

提供显示“确定”和“取消”按钮如何链接的最佳方式您需要手动添加 2 个按钮，例如 button1 和 button2

```
 // Set the accept button of the form to button1.
      form1.AcceptButton = button1;
     // Set the cancel button of the form to button2.
       form1.CancelButton = button2; 
```

Acceptbutton，button1被认为是OK按钮。CancelButton, button2 被认为是取消按钮。

坦率地说，没有一个答案明确提到这一点。所以，我不得不提出这个答案。

此外，您可以查看 MSDN 文档，

[https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.dialogresult?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.dialogresult?view=net-5.0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T02:57:33.380

你想要的是visualbasic命名空间的输入框，是的，你可以在c#中使用它

[Microsoft.VisualBasic.Interaction.InputBox](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.interaction.inputbox.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T03:01:54.797

如果您从基本表单类创建表单，则需要定义一个返回按钮`DialogResult`属性的按钮。

`FileDialog`这些在类是 MS 定义形式的`MessageBox`等中最有用。

# java - 在 GridBagLayout 中设置 columnWidth 和 rowHeight

> ID：12444092
> 
> 赞同：3
> 
> 时间：2012-09-16T02:51:59.927
> 
> 标签：java, swing, layout, gridbaglayout

如何在 GridBagLayout 中设置 columnWidth 和 rowHeight？是gridWidth和gridHeight吗？

![在此处输入图像描述](../Images/a616900f98662c6dca5cf27370bdfd44.png)

如何动态指定此列的宽度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T03:03:19.047

根据[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/awt/GridBagConstraints.html)

网格高度

> 为组件的显示区域指定一列中的单元格数。使用 REMAINDER 指定组件的显示区域将从网格到列中的最后一个单元格。使用 RELATIVE 指定组件的显示区域将从网格到其列中最后一个区域的下一个。
> 
> gridheight 应该是一个非负值，默认值为 1。

网格宽度

> 为组件的显示区域指定一行中的单元格数。使用 REMAINDER 指定组件的显示区域将从 gridx 到行中的最后一个单元格。使用 RELATIVE 指定组件的显示区域将从 gridx 到其行中最后一个的下一个。
> 
> gridwidth 应为非负数，默认值为 1。

因此，如果您想指定组件将跨越的行数或列数，那么，是的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T03:15:57.903

您不能在 GridBagLayout 中指定单元格的`width`与`height`；如果那是你想要做的。布局管理器根据行中的所有组件计算行高。

[您可以在 GridBagLayout 上](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)查看此Oracle 教程

**已添加** 根据您添加的屏幕截图，您似乎正在使用 JFormDesigner 之类的工具。它是自定义布局，标准 GridBagLayout 中没有列宽和列高。

# c# - 真实世界距离：立体摄像头、cvPerspectiveTransform、Emgu、C#

> ID：12444093
> 
> 赞同：3
> 
> 时间：2012-09-16T02:52:14.327
> 
> 标签：c#, distance, emgucv, stereo-3d

对于以下问题，我非常感谢您的帮助：

已从校准的立体装置中捕获并校正灰度图像。我现在正试图在左侧图像中获取特定点相对于左侧相机的真实世界 x,y,z 坐标；我正在尝试使用 cvPerspectiveTransform 来做到这一点。

我的缩写代码如下。

该代码似乎在某种程度上有效，并返回以下 4 个数据点：（15.4510、-474.7451、-527.0327、-912.6536），我理解它们代表 x、y、z 和 w。

问题1）这个假设正确吗？- 可能已经发生了除以 w 并且 XYZ 已经返回，在这种情况下 -912.6536 是一个可以忽略的人工制品 - 欢迎对此提出任何意见。

问题2）但是，如果要实现真实世界坐标X，Y，Z，'x'，'y'，'z'中的每一个分别除以'w'，得到的XYZ坐标的单位是什么？我理解它们与校准中使用的“点”有关 - 在这种情况下，棋盘角相距 2.5 厘米，但在这种情况下，与物体相机的距离约为 60 厘米......如你所见，数学没有不太行。

我已经认真阅读了布拉德斯基书中的相关页面（并在网上搜索过），但我一定遗漏了一些东西。

```
Matrix<float> inputMatLeft = new Matrix<float>(4,1,3);
inputMatLeft[0,0] = xL; // xL, a float, the x coord of a point in the left image
inputMatLeft[1,0] = yL; // yL, a float, the y coord of same point in left image
inputMatLeft[2,0] = d;  // d, a float, the disparity between the same featurepoint in the left and right rectified images,  is calc'd and defined elsewhere
inputMatLeft[3,0] = 1F;

Matrix<float> rwCoords = new Matrix<float>(4,1,3);
rwCoords = computeRealWorldCoords(inputMatLeft);

// ....do stuff with rwCoords

public Matrix<float> computeRealWorldCoords(Matrix <float> leftSrc)
{
Matrix<float> leftDest = new Matrix<float>(4,1,3);
CvInvoke.cvPerspectiveTransform(leftSrc, leftDest, inputMatrixQ); // Q Matrix is 4x4 float
return leftDest;
} 
```

谢谢！

# c++ - C++ - 字体颜色、大小和追加管理

> ID：12444095
> 
> 赞同：0
> 
> 时间：2012-09-16T02:52:27.343
> 
> 标签：c++

我正在制作一个处理 C++ 中简单命令行（控制台）的控制台程序。它工作正常，程序完全没有错误。我的设计问题是：如何在 C++ 中实例化更改将在程序中显示的字体大小和颜色？假设这样：

“你好。这是列表命令。请明智地选择。”

如何使字体为绿色而其他字体为白色？设置大小？

谢谢回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:00:59.933

如果你在 Linux 上，我会推荐 ncurses，放下手来：

*   [http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

# java - 使用 Spring Tool Suite 部署 Spring Web 应用程序

> ID：12444096
> 
> 赞同：4
> 
> 时间：2012-09-16T02:52:43.733
> 
> 标签：java, spring, web-applications

我是 Java web 框架的新手，我用谷歌搜索发现 spring 是最流行的框架之一。我尝试安装工具并搜索教程以在我的 mac 上运行 spring 框架。

### 第 1 步 - Tomcat 安装

在[这个站点](http://neilang.com/entries/how-to-install-tomcat-on-mac-os-x/)之后，我可以在我的 Mac 上安装 Tomcat。我正在为 Tomcat 使用 :8080 端口。

### 第 2 步 - 弹簧工具套件安装

从[这个站点](http://www.springsource.org/spring-tool-suite-download)，我可以安装 Spring Tool Suite。

### 第 3 步 - 按照教程制作示例

我[找到了](http://manueljordan.wordpress.com/2011/12/12/creating-a-spring-web-mvc-project-with-springsource-tool-suite/)使用 Spring Tool Suite 的教程。按照该过程，我可以构建 manolitomvc 应用程序。

![在此处输入图像描述](../Images/83326b0c463f20280850284dd1b3d35a.png)

### 步骤 4.1 - 部署 <-- 问题 1

最后，我想在`http://localhost:8080/manolitomvc`.

我单击绿色箭头查看错误消息。

![在此处输入图像描述](../Images/cabf8c8d2d190505e2b4e853759d2149.png) ![在此处输入图像描述](../Images/64712319f9e7b2fa6607c8f3a51dd8b2.png)

### 步骤 4.2 - 部署 <-- 问题 2

我打开概述页面，我猜我可以设置服务器位置和部署路径以使 Spring Web 应用程序可用。

但是，我不知道如何设置服务器位置（我在步骤 1 中安装的 Tomcat 服务器位置）。

![在此处输入图像描述](../Images/160d2384d6f249956d2e230402350cf8.png)

我试图将 manolitomvc 目录复制到 Tomcat 主文档目录（`/Library/Tomcat/webapps`）中，但它不起作用。

如何部署 Web 应用程序以便我可以访问 Spring Web 应用程序`http://localhost:8080/manolitomvc`？

您能否推荐任何其他我可以遵循的实用教程来设置和使用 spring 框架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T16:24:02.233

感谢 Ralph 的帮助，我可以让 Tomcat 服务器运行 Spring Tool Suite。

## 第1步。停止 tomcat 服务器

`cd /Library/Tomcat/bin`并执行`sudo sh shutdown.sh`.

## 第2步。创建服务器

从服务器，新建 > 其他 ...

![在此处输入图像描述](../Images/0d3bb6aff67ba06742369fed73a0a033.png)

选择服务器/服务器

![在此处输入图像描述](../Images/ad626593a66537e41babf6a30665a336.png)

选择 Apache/Tomcat

![在此处输入图像描述](../Images/2157fab10e0fbd402dc236a7207aeead.png)

选择网络应用程序

![在此处输入图像描述](../Images/f2b384a8af45d2ea85a4e36c9550fe18.png)

## 第三步。执行和测试

执行服务器

![在此处输入图像描述](../Images/cc0b6ff44c4650baea833d22ccfbcafd.png)

您可以通过 访问该应用程序`localhost:8080/manolitomvc`。

![在此处输入图像描述](../Images/881715c2d9445712ff72e47f76296390.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:47:41.260

尽量不要使用“VMware TC”尝试从“普通”Tomcat 启动。

*   在“服务器”选项卡中打开上下文菜单：新建/服务器
*   选择 Apache/Tomcat v? -> 下一步
*   选择 Tomcat 安装目录，或单击“下载并安装..”

# java - 一组数据的百分位数可以用map-reduce的方式计算吗？

> ID：12444099
> 
> 赞同：6
> 
> 时间：2012-09-16T02:53:04.910
> 
> 标签：java, statistics, mapreduce, percentile

我的理解是计算百分位数，数据需要排序。如果大量数据分布在多个服务器上，而无需移动，这是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:20:07.477

While MapReduce as a paradigm does not looks suited for the problem, hadoop's implementation of MR - is.
Hadoop's implementation of map reduce is based on **distributed sort** - and it is what you need. Hadoop is doing sort by moving data between servers only once - not that bad.
I would suggest to look onto hadoop terasort implementaiton which illustrate the good (and probabbly the best) way to sort massive data with hadoop. [http://hadoop.apache.org/docs/current/api/org/apache/hadoop/examples/terasort/package-summary.html](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/examples/terasort/package-summary.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T09:36:34.930

我会首先在一台机器或多台机器上创建一个直方图。一旦您对可能值的桶的每个可能值进行计数，您可以在需要时将它们组合起来。使用直方图的好处是它具有 O(1) 插入/排序时间而不是 O(log n) 并使用 O(M) 空间，其中 M 是可能值或桶的数量，而不是 O(N)，其中 N是样本数。

直方图是自然排序的，因此您可以获得总计数并通过从任一端计数来找到百分位数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T03:40:32.473

你的问题的答案是**肯定**的，有*可能*。但 Map-Reduce 并不是真正为此类任务而设计的。Map-Reduce（例如在 Hadoop 集群中使用）适用于非结构化或半结构化数据。虽然它具有处理其他种类的*能力*，但它并不是最适合它。（我在一家公司有一个项目，他们想在 Hadoop 集群中分析 XML……这不是最有趣的事情。）

[这篇学术文章](http://www.timkaldewey.de/pubs/Clydesdale__EDBT12.pdf)描述了 Map-Reduce 在结构化数据上的一些问题，并提供了“Clydesdale”的替代方法。（我从未听说过或使用过这个，所以我既不能认可它，也不能说出它的优点/缺点。）

我正在寻找更多提供解释和替代方案的链接。

# python - 如何在 Windows 7 上安装 Eclipse Indigo

> ID：12444104
> 
> 赞同：0
> 
> 时间：2012-09-16T02:54:11.913
> 
> 标签：python, eclipse, windows-7, python-3.x

我已经下载了 Eclipse Indigo，准备用它来用 Python 编写应用程序。好像没有安装文件。当我双击`eclipse.exe`程序刚刚运行。我可以将 Eclipse 目录移动到任何我想要的位置，创建一个快捷方式并将其放在我的任务栏上，然后开始编写程序吗？

我将 Eclipse 目录放在我的 Path 语句中，并尝试从命令行运行它。它不会在任何地方运行，而是在 Eclipse 目录中。我已经安装了 Python 3.2，它*确实*可以从命令行的任何地方运行。Eclipse 会自动找到我的 Python 可执行文件还是我必须做其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:10:03.607

说明很清楚......而且很简单：

1.  在 Win7 上安装 JDK（我会为 64 位 Windows 选择 64 位 JVM，但 32 位同样适用于 64 位 Windows）

2.  从 .zip 文件中将“eclipse”文件夹解压缩到您想要的任何位置。我的恰好在 c:\eclipse 中。

3.  手动创建桌面和/或开始菜单链接到 eclipse/eclipse.exe

4.  这是关于[“PyDev”](http://pydev.org/)的一个很好的参考：

    *   [http://www.vogella.com/articles/Python/article.html](http://www.vogella.com/articles/Python/article.html)

我还鼓励您安装最新/最好的 Eclipse（“Juno”）而不是 Indigo。

# asp.net - 无论如何要连接没有更新面板的按钮？

> ID：12444106
> 
> 赞同：0
> 
> 时间：2012-09-16T02:55:01.937
> 
> 标签：asp.net, ajax, webforms, updatepanel

在处理更新面板时，我通常处理单个控件并通过 JavaScript 处理其他所有内容。

```
<asp:UpdatePanel ID="updatepanel1" childrenastriggers="false" runat="server">
 <ContentTemplate>
  <asp:button id="button1" runat="server" onclick="update()" />
 </ContentTemplate>
</asp:UpdatePanel> 
```

对于简单的回发来说，这似乎是太多的代码。如果我没记错的话，有一种方法可以连接按钮进行回发，而不需要更新面板。更新完成后，我仍然希望访问 scriptmanager 以调用 JS 函数。关于更清洁的解决方案的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:00:50.753

你想在这里做什么..你不需要更新面板来触发按钮点击事件..按钮就足够了..你想在点击按钮时处理服务器端或客户端代码..你也没有正确关闭按钮标签..应该是这样的

OnClick 是服务器端事件，OnClientClick 是客户端点击事件

```
// This is the server side code that has to be written
    void Page_Load(Object sender, EventArgs e)
    {

    }

    void Btn_Click(Object sender, EventArgs e)
    {
    } 
```

# jquery-ui - 使用缓存将图像添加到 jQuery UI 自动完成远程源

> ID：12444110
> 
> 赞同：2
> 
> 时间：2012-09-16T02:55:20.973
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我正在使用带有缓存的 jQuery 自动完成远程源。[根据 jQUery UI 网站的演示，](http://jqueryui.com/demos/autocomplete/#remote-with-cache)带有缓存的远程源 javascript 是

```
<script>
$(function() {
    var cache = {},
        lastXhr;
    $( "#birds" ).autocomplete({
        minLength: 2,
        source: function( request, response ) {
            var term = request.term;
            if ( term in cache ) {
                response( cache[ term ] );
                return;
            }

            lastXhr = $.getJSON( "search.php", request, function( data, status, xhr ) {
                cache[ term ] = data;
                if ( xhr === lastXhr ) {
                    response( data );
                }
            });
        }
    });
});
</script> 
```

现在我想在上面的 javascript 中添加一些代码以在自动完成列表中显示图像。在 jQuery 自动完成中显示图像有一个很好的示例，例如：http: [//jsfiddle.net/3zSMG/](http://jsfiddle.net/3zSMG/)，但它不包括缓存部分。

我一直在尝试但无法将此示例集成到现有的带有缓存 javascript 的遥控器中。任何帮助将不胜感激。非常感谢。

跟进：根据 Andrew Whitaker 的建议，我已将脚本更新如下：

```
<script>
$(function() {
    var cache = {},
        lastXhr;
    $( "#birds" ).autocomplete({
        minLength: 2,
        source: function( request, response ) {
            var term = request.term;
            if ( term in cache ) {
                response(cache[term]);
                return;
            }

            lastXhr = $.getJSON( "search.php", request, function( data, status, xhr ) {
                var results;
                if ( xhr === lastXhr ) {
                    results = $.map(data, function(item) {
                        return {
                        value: item.value,
                        avatar: item.avatar
                        };
                    });
                    cache[term] = results;
                    response(results);
                }                   
            });
        },
    }).data("autocomplete")._renderItem = function (ul, item) {
    if ( item.value != null ) {
        if ( item.avatar != null) {
            return $("<li/>")
                .data("item.autocomplete", item)
                .append("<a><img src='images/" + item.avatar + "' />" + item.value + "</a>")
                .appendTo(ul);
            }
        else {
            return $("<li/>")
                .data("item.autocomplete", item)
                .append("<a>" + item.value + "</a>")
                .appendTo(ul);
        }
    }
    }; 
}); 
```

和search.php的内容：

```
<?php
require_once "config.php";
$term = trim(strip_tags($_GET['term']));//retrieve the search term that autocomplete sends
$qstring = "select id, subject as value, avatar from Suggests where subject LIKE '%".$term."%'";
$result = mysql_query($qstring);//query the database for entries containing the term
while ($row = mysql_fetch_array($result,MYSQL_ASSOC))//loop through the retrieved values
{
    $row['value']=htmlentities(stripslashes($row['value']));
    $row['id']=(int)$row['id'];
    $row['avatar']=$row['avatar'];
    $row_set[] = $row;//build an array
}
echo json_encode($row_set);//format the array into json data

?> 
```

我能够在自动完成列表中看到图像。但是有一个问题：键入几个字母后，会显示自动完成列表，如果我继续添加更多随机字母以期望自动完成列表消失（因为用户输入不再匹配）但它没有。[安德鲁的例子效果很好](http://jsfiddle.net/rK7TS/)。我的javascript有什么问题吗？尝试通过 Firebug 进行调试，我收到错误：TypeError 元素为空。

![呃](../Images/bf8a71a74848caa8c5ff013a54c68367.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:31:21.237

演示图像部分的关键是重写`_renderItem`函数以更改`li`生成的建议项目。这通常意味着您的源是一个数组，其中包含具有`label`和/或`value`属性的对象，以及允许您在`_renderItem`.

缓存代码只存储搜索词并以散列的形式存储搜索结果，并在访问服务器之前查看该散列。

以您链接的 JSFiddle 为例，这里有一些使用 StackOverflow 的 API 来缓存和图像的东西：

```
$(document).ready(function() {
    var cache = {},
        lastXhr;

    $("#auto").autocomplete({
        source: function(request, response) {
            var term = request.term;

            if (term in cache) {
                response(cache[term]);
                return;
            }

            lastXhr = $.ajax({
                url: "http://api.stackoverflow.com/1.1/users",
                data: {
                    filter: request.term,
                    pagesize: 10
                },
                jsonp: "jsonp",
                dataType: "jsonp",
                success: function(data, status, xhr) {
                    var results;
                    if (xhr === lastXhr) {
                        results = $.map(data.users, function(el, index) {
                            return {
                                value: el.display_name,
                                avatar: "http://www.gravatar.com/avatar/" + el.email_hash
                            };
                        });

                        cache[term] = results;
                        response(results);                                 
                    }
                }
            });
        },
        delay: 500
    }).data("autocomplete")._renderItem = function(ul, item) {
        return $("<li />")
            .data("item.autocomplete", item)
            .append("<a><img src='" + item.avatar + "' />" + item.value + "</a>")
            .appendTo(ul);
    };
});​ 
```

**备注**：

*   这个示例比 jQueryUI 网站上的示例更复杂，因为来自 API 的数据必须进行转换（具有`avatar`/`value`属性）。需要注意的重要一点是，我们在调用转换结果数组之后缓存接收到的值*。*`$.map`
*   这看起来很复杂，但只要记住答案顶部的两条准则，你就应该很好。

**示例：http:** [//jsfiddle.net/rK7TS/](http://jsfiddle.net/rK7TS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-12T15:27:37.357

这是我所做的：

```
 lastXhr = $.getJSON( action, request, function( data, status, xhr ) {

        if( data && data !== null ) {
            var results;
            if( xhr === lastXhr ) {
                results = $.map(data, function(item) {
                    return {
                        value: item.value,
                        avatar: item.avatar
                    };
                });
                cache[term] = results;
                response(results);
            }
        } else {
            response([{ value: 'No results found.', avatar: null}]);
        }

    }); 
```

# jquery - jquery中的动画

> ID：12444112
> 
> 赞同：1
> 
> 时间：2012-09-16T02:55:26.873
> 
> 标签：jquery

有没有办法让一系列动画，在 jquery 中一个跟随另一个。例如，我希望文本先淡入然后淡出，然后出现图像。我参考了文档，但它只有导致动画的单击事件的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:09:09.023

```
<div id="wow">Hello. This is text. Wow!!!</div>​

var $wow = $('#wow');

$wow.animate({fontSize: '150px'}, 'slow', function s() {
    $wow.animate({padding: '50px', opacity: .1}, 'fast', function l() {
        $wow.animate({background: '#f00', opacity: .5, padding: 0}, function r() {
            $wow.animate({fontSize: 0, height: 1, width: 1, opacity: 0}, 10000);
        });
    });
}); 
```

[​jsfiddle.net/userdude/ZcATK/](http://jsfiddle.net/userdude/ZcATK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:56:44.587

听起来您会从使用具有多个元素的队列中受益。查看 FxQueues jQuery 插件[https://github.com/lucianopanaro/jQuery-FxQueues](https://github.com/lucianopanaro/jQuery-FxQueues)

查看他们的使用示例代码：[https ://github.com/lucianopanaro/jQuery-FxQueues/blob/master/example.html](https://github.com/lucianopanaro/jQuery-FxQueues/blob/master/example.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T03:00:40.553

这里有一个示例[**JS Bin**](http://jsbin.com/ipoqit/2/edit)

HTML 代码：

```
<h3 style='display: none;'>Some text</h3>
<img src='http://domain.com/image.png' style='display: none;'/> 
```

Javascript代码：

```
$("h3").fadeIn(1000)
       .fadeOut(1000, function(){
          $("img").fadeIn(1500);
       }); 
```

# c# - 将 DBNull.Value 和 Empty 文本框值传递给数据库

> ID：12444115
> 
> 赞同：12
> 
> 时间：2012-09-16T02:56:07.343
> 
> 标签：c#, .net, sql-server, ado.net, dbnull

我的页面上有一些文本框可以为空，因为它们是可选的，并且我有这个 DAL 代码

```
parameters.Add(new SqlParameter("@FirstName", FirstName));
parameters.Add(new SqlParameter("@LastName", LastName));
parameters.Add(new SqlParameter("@DisplayName", DisplayName));
parameters.Add(new SqlParameter("@BirthDate", BirthDate));
parameters.Add(new SqlParameter("@Gender", Gender)); 
```

这些字段中的任何一个都可以为空。问题是当他们是空的我收到`Procedure XXX requires @FirstName which was not supplied`

然后我将代码更改为

```
parameters.Add(new SqlParameter("@FirstName", String.IsNullOrEmpty(FirstName) ? DBNull.Value : (object)FirstName));
parameters.Add(new SqlParameter("@LastName", String.IsNullOrEmpty(LastName) ? DBNull.Value : (object) LastName));
parameters.Add(new SqlParameter("@DisplayName", String.IsNullOrEmpty(DisplayName) ? DBNull.Value : (object) DisplayName));
parameters.Add(new SqlParameter("@BirthDate", BirthDate.HasValue ? (object)BirthDate.Value : DBNull.Value));
parameters.Add(new SqlParameter("@Gender", String.IsNullOrEmpty(Gender) ? DBNull.Value : (object) Gender)); 
```

但这对我来说看起来很乱，尤其是转换为，`object`因为三元语句要求两个值都是相同的类型。

为什么在数据库中不处理空字符串或空字符串`NULL`？如果我必须将其转换为`DBNull.Value`是否有更清洁的方法？将值保存为数据库中的空字符串可能会有所帮助，但`NULL`数据库中的查询也会变得混乱

请就常见做法或类似做法提出建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T07:05:33.760

首先，还有 2 个更方便的重载：

```
command.Parameters.Add("@name").Value = value; 
```

或者

```
command.Parameters.AddWithValue("@name", value); 
```

* * *

我个人使用以下扩展方法：

```
public static object DbNullIfNull(this object obj)
{
    return obj != null ? obj : DBNull.Value;
}

command.Parameters.AddWithValue("@name", value.DbNullIfNull()); 
```

或者

```
public static object DbNullIfNullOrEmpty(this string str)
{
    return !String.IsNullOrEmpty(str) ? str : (object)DBNull.Value;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T06:27:26.623

一点重构可能会使代码不那么混乱。试试这个

```
dbParams.Add(SetDBNullIfEmpty("@FirstName", FirstName));
dbParams.Add(SetDBNullIfEmpty("@LastName", LastName));
dbParams.Add(SetDBNullIfEmpty("@DisplayName", DisplayName));
dbParams.Add(SetDBNullIfEmpty("@BirthDate", BirthDate));
dbParams.Add(SetDBNullIfEmpty("@Gender", Gender));

private SqlParameter SetDBNullIfEmpty(string parmName, string parmValue)
{
    return new SqlParameter(parmName, String.IsNullOrEmpty(parmValue) ? DBNull.Value : (object)parmValue));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T04:21:37.837

您可以默认存储过程中的参数，使其成为可选参数。

```
create procedure XXX
(
   @FirstName nvarchar(50) = null,
   @LastName nvarchar(50) = null,
   ...
) 
```

# r - 如何从 R 中的包中提取信息并在函数中使用？

> ID：12444116
> 
> 赞同：2
> 
> 时间：2012-09-16T02:56:29.443
> 
> 标签：r, function, if-statement, nested-loops

我为模糊的问题标题道歉。我想做的是使用geepack R包中的geeglm在R中运行回归，然后使用其中的信息来计算拟似然信息标准（QIC；Pan 2001）。对于单个模型，我可以很容易地做到这一点，但我想编写一个通用函数，可以为各种不同类型的模型做到这一点。我想我真正的问题是是否有比拥有一长串嵌套 ifelse 语句更好的选择？

这是我当前的代码：

```
library(geepack)
data(dietox) #data from the geepack package
# Run gee regression
dietox$Cu <- as.factor(dietox$Cu)
mf <- formula(Weight ~ Cu * (Time + I(Time^2) + I(Time^3)))
gee1 <- geeglm(mf, data = dietox, id = Pig, family = gaussian, corstr = "ar1") 
```

然后我可以运行一个函数来计算拟似然：

```
QlogLik.normal <- function(model.R) {
  library(MASS)
  mu.R <- model.R$fitted.values
  y <- model.R$y
  # Quasi Likelihood for Normal
  quasi.R <- sum(((y - mu.R)^2)/-2)
  quasi.R
  } 
```

但是，我想编写一个更通用的函数，因为每个分布的拟似然函数都不同。上述函数适用于 gee1，因为它具有高斯（正态）分布。如果我想将它推广到各种发行版，我可以使用一系列嵌套的 ifelse 语句（如下），但我不知道这是否是最好的方法。有没有人有其他选择或更好的解决方案？至少可以说这似乎不是很优雅（显然我没有太多的编程或 R 经验）。

```
QlogLik <- function(model.R) {
  library(MASS)
  mu.R <- model.R$fitted.values
  y <- model.R$y
  ifelse(model.R$modelInfo$variance == "poisson",
     # Quasi Likelihood for Poisson
     quasi.R <- sum((y*log(mu.R)) - mu.R),
     ifelse(model.R$modelInfo$variance == "gaussian",
       # Quasi Likelihood for Normal
       quasi.R <- sum(((y - mu.R)^2)/-2),
       ifelse(model.R$modelInfo$variance == "binomial",
         # Quasilikelihood for Binomial
         quasi.R <- sum(y*log(mu.R/(1 - mu.R)) + log(1 - mu.R)),
         quasi.R <- "Error: distribution not recognized")))
  quasi.R
  } 
```

在此示例中，我使用 geeglm 的模型输出来提取用于对方差建模的分布类型

```
 model.R$modelInfo$variance 
```

但可能还有其他方法可以确定 geeglm 模型中使用的分布。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T08:13:35.613

您应该能够像这样重写您的函数：

```
QlogLik <- function(model.R) {
  library(MASS)
  mu.R <- model.R$fitted.values
  y <- model.R$y
  type <- family(model.R)$family
  switch(type,
         poisson = sum((y*log(mu.R)) - mu.R),
         gaussian = sum(((y - mu.R)^2)/-2),
         binomial = sum(y*log(mu.R/(1 - mu.R)) + log(1 - mu.R)),
         stop("Error: distribution not recognized"))
} 
```

正如@baptise 指出的那样，`switch`在这些情况下很有用。您用于`family(model.R)$family`自动检测应与 . 一起使用的族类型`switch`。

此外，如果您在不同情况下执行的命令超出了一行，则可以用大括号 ( `{ do something here }`) 将这些行括起来。

```
switch(type,
       type1 = { something <- do(this)
                 thisis(something) },
       type2 = do(that)) 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T04:01:56.583

您也可以使用`model.R$family$family`which 给出用于模拟方差的分布类型，但到目前为止我不知道您是否可以消除这些`ifelse`陈述。您的`quasi.R`代码中的 不同发行版之间有所不同，因此您必须分别定义它们中的每一个。

顺便说一句，这是一个很好的问题，感谢您发布它：我过去也遇到过类似的情况，希望得到一些关于如何更有效地编写代码的建议。

# algorithm - 图 - 从 s 到 t 的路径，具有最小的单个边长

> ID：12444118
> 
> 赞同：1
> 
> 时间：2012-09-16T02:56:46.490
> 
> 标签：algorithm, graph

我想知道是否可以修改 Dijkstra 的算法以找到两个节点之间的路径，其中路径中所有边长的最大值最小。

即它更喜欢边长为 1,3,5,9 的路径，而不是单边长 10 的路径，因为 max(1,3,5,9) < max(10)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T03:26:28.783

是的，这可以使用 Dijkstra 算法来完成

提示：在每个节点 u 处，存储最小的权重 w，这样就存在一条从 s 到 u 的访问顶点的路径，其最大权重为 w。考虑在访问新顶点时修改松弛条件以满足上述条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:50:14.647

还记得 d(u) 何时被 d(v)+c(u,v) 更新吗？现在，您只需将 d(u) 更新为 max(d(v),c(u,v)) 即可。

另一种解决方案是对结果进行二进制搜索。对于给定的上限，您可以删除违反该上限的边，然后使用 DFS/BFS 检查两个节点 s & t 之间是否仍有路径。因此，现在您可以尝试不同的上限以使用二分搜索找到最严格的上限。

# java - 创建类 ArrayList 类时出现 NullPointerException

> ID：12444122
> 
> 赞同：1
> 
> 时间：2012-09-16T02:57:21.433
> 
> 标签：java, junit, arraylist, abstract

作为练习练习，我正在创建自己的泛型类，它基本上是`ArrayList`. 在使用 测试类时，我在 add 方法中`JUnit`遇到错误：`NullPointerException`

```
public void add(int index, T element) {
    if (index > this.size() || index < 0) {
        throw new IndexOutOfBoundsException();
    }

    if (this.size() == data.length) {
        // ^ This is the line that the error points to
        resize(this.data);
    }

    for (int i = index; i < this.size; i++) {
        this.data[i + 1] = this.data[i]; //fix
    }

    this.data[index] = element;
    size++;
} 
```

在课堂上捣乱了很多之后，我无法弄清楚错误来自哪里。我可以提供所需的课程的任何细节/其他部分。任何关于问题所在位置的指导都会很棒。谢谢你。

类的构造函数：

```
MyArrayList(int startSize) {
    // round the startSize to nearest power of 2
    int pow2 = 1;
    do {
        pow2 *= 2;
    } while (pow2 < startSize);

    startSize = pow2;
    this.size = 0;
    T[] data = (T[]) new Object[startSize];
} 
```

以下测试用例测试大小，但在尝试添加元素时遇到错误：

```
public void testSize() {
    MyArrayList<Integer> test = new MyArrayList<Integer>(); 
    ArrayList<Integer> real = new ArrayList<Integer>();
    assertEquals("Size after construction", real.size(), test.size());
    test.add(0,5);
    real.add(0,5);
    assertEquals("Size after add", real.size(), test.size());
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T03:11:24.043

```
T[] data = (T[]) new Object[startSize]; 
```

这会初始化局部变量`data`。你不想要的。

将其更改为以下以确保初始化实例变量 -

```
this.data = (T[]) new Object[startSize]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T03:05:11.577

我 NPE 就在你提到的那条线上，这只是因为`data`is `null`。你在哪里初始化`data`？

也许当你创建你的时候，`CustomArrayList`你并没有初始化你的内部数组`data`。

`data`初始化是问题所在。它应该是
`this.data = (T[])new Object[startSize];`

# joomla - Joomla 的 Prestashop 组件

> ID：12444123
> 
> 赞同：1
> 
> 时间：2012-09-16T02:57:24.847
> 
> 标签：joomla, prestashop

有谁知道 Joomla 是否有 Prestashop 扩展？我有一个 Joomla 网站，但我的客户更喜欢 Prestashop 和 Joomla。所以我只想在我的 Joomla 网站上展示他们 Prestashop 商店中的产品和类别。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:29:35.363

是的，Joomla 有一个 prestashop 组件。它是新的但稳定的。我在过去的两周里一直在使用它，我计划将我的所有客户从 ddermart 切换到 prestashop。它遥遥领先于美德市场。

开发者的网址是[http://prestashop-joomla.com](http://prestashop-joomla.com)

如果您想查看他们的在线演示，可以查看

[http://prestashop-joomla.com/online-demo/](http://prestashop-joomla.com/online-demo/)

# bash - Bash 字符串（命令输出）相等性测试

> ID：12444125
> 
> 赞同：10
> 
> 时间：2012-09-16T02:57:47.263
> 
> 标签：bash

我有一个简单的脚本来检查网页是否包含指定的字符串。看起来像：

```
#!/bin/bash
res=`curl -s "http://www.google.com" | grep "foo bar foo bar" | wc -l`
if [[ $res == "0" ]]; then
    echo "OK"
else
    echo "Wrong"
fi 
```

如您所见，我希望得到“OK”，但得到了“Wrong”。

它出什么问题了？

如果我使用 if [ $res == "0" ]，它会起作用。如果我只使用 res="0" 而不是 res= `curl...`，它也可以获得所需的结果。

为什么会有这些差异？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-16T10:17:48.283

您可以看到`res`包含的内容：`echo "Wrong: res=>$res<"`

如果您想查看某些文本是否包含其他文本，则不必查看 grep 输出的*长度*：您应该查看 grep 的返回码：

```
string="foo bar foo bar"
if curl -s "http://www.google.com" | grep -q "$string"; then
    echo "'$string' found"
else
    echo "'$string' not found"
fi 
```

甚至没有 grep：

```
text=$(curl -s "$url")
string="foo bar foo bar"
if [[ $text == *"$string"* ]]; then
    echo "'$string' found"
else
    echo "'$string' not found in text:"
    echo "$text"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:39:50.950

我在[glenn jackman](https://stackoverflow.com/users/7552/glenn-jackman)的帮助中找到了答案。

我在这个问题中得到以下几点：

*   `wc -l`的输出包含空格。
*   `echo "$var"`使用而不是调试`echo $var`
*   `[[`保留 var 中所有字符的字面值。
*   `[`在执行之前将 var 扩展为它们的值，这是因为 [ 实际上是`test`cmd，所以它遵循[Shell Expansions](http://www.gnu.org/software/bash/manual/html_node/Shell-Expansions.html#Shell-Expansions)规则。

# c++ - 如何修改这个基于 MFC 的代码片段以使用我自己选择的窗口类名称？

> ID：12444131
> 
> 赞同：1
> 
> 时间：2012-09-16T02:58:30.087
> 
> 标签：c++, winapi, visual-c++, mfc

我正在查看一些 MFC/C++ CView 对象子类，如下所示：

```
BOOL CCustomView::CreateView(DWORD dwStyle,
                  CDocument * pDocument,
                  CWnd * pParent,
                  String title)
{
  ...
   CString className = AfxRegisterWndClass(CS_DBLCLKS,
                       ::LoadCursor(NULL, IDC_IBEAM));
   return Create(className, title, dwStyle,
         rect, pParent, -1, &context);
} 
```

我不喜欢这一点，尽管这对于 MFC 应用程序编程来说可能是正常的，但运行时窗口类名称不是我自己选择的名称。如果以后，我想从另一个 Win32 应用程序中找到这个窗口，并通过窗口类名找到窗口，我将不得不使用丑陋的“Afx:123:39843:39843”字符串，实际上，我没有知道这些窗口类名称是否可以指望不会改变。我宁愿将窗口类更改为“CCustomView”，但仍然具有与上面创建的窗口类相同的行为。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:47:40.527

有更好的方法来解决您的问题。我使用的典型协议是：

*   [`RegisterWindowMessage`](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http://msdn.microsoft.com/en-us/library/windows/desktop/ms644947%28v=vs.85%29.aspx&ei=AP9VUOGwEM7asgbEwoGQDw&usg=AFQjCNHLyesu0zvZPqoRPseqiIB_aU4yAA&sig2=D5DF_rScIHllWpasvxGK5g)在两个应用程序中使用注册窗口消息。消息名称应包含 GUID 以使其唯一
*   在应用程序 A 中，用于将*您的*
    `PostMessage(HWND_BROADCAST, registeredMsg, idIWantToFindYou, HWNDofA)`
    窗口句柄 发布到所有顶级窗口。由于注册消息的用途不止一种，并且您应该限制您注册的消息数量，用于区分您的消息的不同命令。*`idIWantTofindYou`*
**   接收应用程序 B 现在拥有发送者的窗口句柄，并且可以建立连接（例如，通过
    `PostMessage(HWNDofA, registeredMessage, idHereIsMyHWnd, HWNDofB)`*

 *这种机制的好处是不会遇到程序无响应的问题。但是，“连接”不是立即的，因此您必须更改程序流程。或者，您可以使用[`EnumWindows`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx)和[`SendMessageTimeout`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644952%28v=vs.85%29.aspx)探测所有顶级窗口。

* * *

如果需要使用窗口类：

由 MFC 分配的类名只是为了重用具有相同属性的窗口类。我不知道使用您自己的窗口类有任何问题。

所以以下*应该*工作：

*   用所需的属性填充`WNDCLASS`或`WNDCLASSEX`
*   `DefWindowProc`用作`WNDPROC`（这就是 MFC 所做的，MFC是在`WNDPROC`创建窗口时设置的）
*   使用[`AfxRegisterClass`](http://msdn.microsoft.com/en-us/library/kcb1w44w%28VS.80%29.aspx)或`RegisterClass`注册窗口类。`AfxRegisterClass`检查该类是否已经注册，如果该类是从 DLL 注册的，它将在卸载 DLL 时取消注册该类。否则它们大致相等。*

# python - 在 Facebook 上单击带有机械化和 Python 的 AJAX 按钮

> ID：12444132
> 
> 赞同：1
> 
> 时间：2012-09-16T02:58:46.263
> 
> 标签：python, mechanize, spidermonkey

因此，我一直在尝试创建一个脚本，通过转到活动日志并单击所有按钮来删除我在 Facebook 上的所有活动，或者如果它无法隐藏，则删除所有帖子。Mechanize 允许我登录我的帐户，然后导航到该页面。但是，一旦到达那里，单击按钮就很困难，因为它们使用 javascript。我听说 spidermonkey 可以很好地评估 javascript，但我想知道如何将它修补到 mechanize 上，以便它可以与 Facebook 使用的 AJAX 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:10:43.873

您最好使用[Selenium](http://seleniumhq.org/)来检测普通浏览器并执行您想要的操作。

可能可以使用 spidermonkey 来评估 javascript，或者使用[node.js](http://nodejs.org)做一些事情，但我的猜测是它会更复杂和更脆弱。

# c++ - “/usr/lib/libstdc .so.6: version `GLIBCXX_3.4.15' not found”是什么意思，我该如何解决？

> ID：12444136
> 
> 赞同：3
> 
> 时间：2012-09-16T02:59:50.770
> 
> 标签：c++, ubuntu, shared-libraries

我是`.so`在 Ubuntu 下编译库的新手。我有源`.cpp`文件。我很好地安装了 build-essentials 包，我正在使用 Anjuta IDE 编译源代码。我有 Makefile，一切都很好。

现在虽然它编译没有错误，但当我加载它时，我得到了错误：

```
/usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.15' not found` 
```

这是什么意思，我该如何解决？

编辑：还有更多提示吗？

Edit2：我真的需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T04:55:34.167

我有类似的问题，我试过（[https://askubuntu.com/questions/164296/glibcxx-3-4-15-not-found](https://askubuntu.com/questions/164296/glibcxx-3-4-15-not-found)）：

```
sudo apt-get install libstdc++6 
```

您可以选择强制对所有链接库进行全局更新

```
sudo ldconfig 
```

最后一个命令可能需要一些时间，并且不会在 bash 上打印任何内容，请稍等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T03:13:17.023

听起来像一个依赖问题，你的系统是最新的吗？

```
apt-get install && apt-get upgrade 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-11T09:20:29.047

解决此问题的一种方法是简单地静态链接 libstdc++（在链接可执行文件时将此参数发送到 g++）：

```
-static-libstdc++ 
```

如果在库中静态链接是一个选项，这可能是最快的解决方法。

# java - 在 JAX-WS 中重命名参数名称

> ID：12444138
> 
> 赞同：9
> 
> 时间：2012-09-16T03:00:11.063
> 
> 标签：java, xml, web-services, soap, jax-ws

我使用自下而上的方法在 RSA 7.5 和 Websphere 7 中使用 JAX-WS 创建了一个 Web 服务。当我在 SOAP UI 中打开 WSDL 时，参数部分显示如下：

```
<!--Optional-->
<arg0>
    <empID>?</empId>
</arg0>
<!--Optional-->
<arg1>
    <empName>?</empName>
</arg1>
<!--Optional-->
<arg2>
    <empAddress>?</empAddress>
</arg2>
<!--Optional-->
<arg3>
    <empCountry>?</empCountry>
</arg3> 
```

service 方法以上述 4 个元素为参数，返回员工详细信息。

1) 我想用一些有效的名称重命名这个 arg0、arg1 等等。

2）我想删除`<!--optional-->`arg 标签上方的礼物。（为了删除`<!--optional-->`元素名称，我使用了@XMLElement(required=true)）。但我不确定在这种情况下到底在哪里使用这个注释:(

请帮忙。

问候，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T03:33:57.160

您将`@XMLElement(required=true)`上述变量放在您的类中，这些变量将从您的服务返回。大约一个月前，我刚刚了解了该选项。因此，就在您声明 empName 的位置上方放置标签和必需的。

要重命名服务的参数，请在服务`@WebParam(name="<name you want in soap>")`的每个输入变量前面使用。

例如，如果您有一个名为的服务方法`get(String name)`，它看起来像`get(@WebParam(name = "name") String name)`

* * *

你是对的，现在我再次阅读了你的评论。我支持的服务在输入和输出中使用对象，这就是我将 XMLElement 标记放在这些对象的类中的原因。

您需要将标签放在声明传入或返回到服务的变量的类中。如果这些恰好在您的服务类中声明，那很好。要点是您将 XMLElement 标记放在变量声明之上，而不是将其放在 getter 或 setter 上。

本教程展示了一些使用示例。[JAXB 教程](http://www.vogella.com/articles/JAXB/article.html)

# postgresql - PostgreSQL：如何使用 generate_series() 找出列中缺失的数字？

> ID：12444142
> 
> 赞同：9
> 
> 时间：2012-09-16T03:01:01.817
> 
> 标签：postgresql, postgresql-8.4, generate-series

```
SELECT commandid 
FROM results 
WHERE NOT EXISTS (
    SELECT * 
    FROM generate_series(0,119999) 
    WHERE generate_series = results.commandid 
    ); 
```

`results`我有一个类型的列，`int`但各种测试失败并且没有添加到表中。我想创建一个查询，该查询返回`commandid`在`results`. 我认为上面的查询会做我想要的。`commandid`但是，如果我使用超出预期可能范围的范围（如负数），它甚至不起作用。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-16T03:10:23.660

给定样本数据：

```
create table results ( commandid integer primary key);
insert into results (commandid) select * from generate_series(1,1000);
delete from results where random() < 0.20; 
```

这有效：

```
SELECT s.i AS missing_cmd
FROM generate_series(0,1000) s(i)
WHERE NOT EXISTS (SELECT 1 FROM results WHERE commandid = s.i); 
```

就像这个替代公式一样：

```
SELECT s.i AS missing_cmd
FROM generate_series(0,1000) s(i)
LEFT OUTER JOIN results ON (results.commandid = s.i) 
WHERE results.commandid IS NULL; 
```

在我的测试中，上述两种方法似乎都产生了相同的查询计划，但您应该与数据库中的数据进行比较，`EXPLAIN ANALYZE`看看哪个是最好的。

## 解释

请注意，不是`NOT IN`我在一个公式中使用`NOT EXISTS`了子查询，而在另一个公式中使用了普通查询`OUTER JOIN`。数据库服务器更容易优化这些，并且避免了`NULL`s in可能出现的令人困惑的问题`NOT IN`。

我最初喜欢这个`OUTER JOIN`公式，但至少在 9.1 中，我的测试数据`NOT EXISTS`表格优化到了相同的计划。

`NOT IN`当系列很大时，两者都会比下面的公式表现更好，就像你的情况一样。`NOT IN`过去需要 Pg`IN`对每个被测试的元组进行列表的线性搜索，但对查询计划的检查表明 Pg 可能足够聪明，现在可以散列它。（由查询计划器`NOT EXISTS`转换为 a ）并且工作得更好。`JOIN``JOIN`

该`NOT IN`公式在存在 NULL 时既令人困惑，`commandid`也可能效率低下：

```
SELECT s.i AS missing_cmd
FROM generate_series(0,1000) s(i)
WHERE s.i NOT IN (SELECT commandid FROM results); 
```

所以我会避免它。有 1,000,000 行，另外两个在 1.2 秒内完成，`NOT IN`公式运行 CPU 密集型，直到我感到无聊并取消它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-16T03:07:24.237

正如我在评论中提到的，您需要执行上述查询的相反操作。

```
SELECT
    generate_series
FROM
    generate_series(0, 119999)
WHERE
    NOT generate_series IN (SELECT commandid FROM results); 
```

`commandid`此时，您应该在所选范围内的列中找到不存在的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-28T19:13:38.913

我不是很有经验的 SQL 大师，但我喜欢其他解决问题的方法。就在今天，我遇到了类似的问题 - 在一个字符列中查找未使用的数字。我已经通过使用 pl/pgsql 解决了我的问题，并且对我的程序的速度非常感兴趣。我使用@Craig Ringer 的方式生成带有序列列的表，添加一百万条记录，然后每第 99 条记录删除一次。此过程在搜索丢失的数字时大约需要 3 秒：

```
-- creating table
create table results (commandid character(7) primary key);
-- populating table with serial numbers formatted as characters
insert into results (commandid) select cast(num_id as character(7)) from generate_series(1,1000000) as num_id;
-- delete some records
delete from results where cast(commandid as integer) % 99 = 0;

create or replace function unused_numbers()
  returns setof integer as
$body$
declare
   i integer;
   r record;
begin
   -- looping trough table with sychronized counter:
   i := 1;
   for r in
      (select distinct cast(commandid as integer) as num_value
      from results
      order by num_value asc)
   loop
      if not (i = r.num_value) then
            while true loop
               return next i;

               i = i + 1;
               if (i = r.num_value) then
                     i = i + 1;
                     exit;
                  else
                     continue;
               end if;
            end loop;
         else
            i := i + 1;
      end if;
   end loop;

   return;
end;
$body$
  language plpgsql volatile
  cost 100
  rows 1000;

select * from unused_numbers(); 
```

也许它对某人有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-03T05:47:52.347

如果您使用的是 AWS redshift，您可能最终需要回答这个问题，因为它不支持`generate_series`. 你最终会得到这样的东西：

```
select 
    startpoints.id    gapstart, 
    min(endpoints.id) resume 
from (
     select id+1 id 
     from   yourtable outer_series 
     where not exists 
         (select null 
          from   yourtable inner_series 
          where  inner_series.id = outer_series.id + 1
         )
     order by id
     ) startpoints,   

     yourtable endpoints 
where 
    endpoints.id > startpoints.id 
group by 
    startpoints.id; 
```

# python - 如何下载 Enthought Tool Suite python 脚本？

> ID：12444144
> 
> 赞同：0
> 
> 时间：2012-09-16T03:02:25.283
> 
> 标签：python, ets

我已经下载了 Python，但想为 Enthought Tool Suite (ETS) 贡献代码。根据这个网站（http://code.enthought.com/source/）：

它说要下载以下python脚本：[https ://raw.github.com/enthought/ets/master/ets.py](https://raw.github.com/enthought/ets/master/ets.py)

我将 ets.py 放入 python 脚本中，另存为......在 Python Shell 中，我输入了“import ets”

然而，什么也没有发生。

此外，该网站说要运行以下命令：

```
$ mkdir ets

$ cd ets   # and copy ets.py here

$ python ets.py clone 
```

在 Python Shell 中键入这些行会给我以下消息：“SyntaxError: invalid syntax”

如您所见，我是 Python 新手，不知道自己在做什么。如何下载 ETS 脚本并运行命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:34:19.040

这些最后的命令并不意味着要输入到 Python 控制台中，而是要在终端 shell 中输入。

```
localhost-2:tmp $ mkdir ets
localhost-2:tmp $ cd ets
localhost-2:ets $ cp ../ets.py . 
```

最后一个命令假定 ets.py 在原始目录中。现在我们可以运行它[编辑：确保您已经`git`安装，否则这将不起作用]：

```
localhost-2:ets $ python ets.py clone
Cloning package encore
URL: https://github.com/enthought/encore.git
Cloning into encore...
remote: Counting objects: 1081, done.
remote: Compressing objects: 100% (483/483), done.
remote: Total 1081 (delta 729), reused 942 (delta 592)
Receiving objects: 100% (1081/1081), 981.12 KiB | 1.80 MiB/s, done.
Resolving deltas: 100% (729/729), done.

Cloning package traits
URL: https://github.com/enthought/traits.git
Cloning into traits...

[etc.]

Cloning package etsproxy
URL: https://github.com/enthought/etsproxy.git
Cloning into etsproxy...
remote: Counting objects: 3577, done.
remote: Compressing objects: 100% (2243/2243), done.
remote: Total 3577 (delta 1053), reused 3571 (delta 1047)
Receiving objects: 100% (3577/3577), 369.81 KiB, done.
Resolving deltas: 100% (1053/1053), done. 
```

在此之后，您需要安装所有内容（根据您的操作系统，这看起来会有所不同）：

```
localhost-2:ets $ python ets.py develop
Running command ['/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python', 'setup.py', 'develop'] in package encore
running develop
running egg_info
creating encore.egg-info
writing encore.egg-info/PKG-INFO

[long build process removed] 
```

# jquery - 停止重复设置定时器函数jQuery

> ID：12444146
> 
> 赞同：0
> 
> 时间：2012-09-16T03:03:10.240
> 
> 标签：jquery, time, timer, set

我不是 jquery 的专业人士，但我只是做了一个简单的代码来显示一个 div，然后单击另一个 div 与 10 秒计时器。

这是我的代码：

```
$(document).ready(function() {
    $('.link').click(function() {
    $('#my-timer').fadeIn('slow');
        var settimmer = 0;
        $(function(){
                setInterval(function() {
                    var timeCounter = $("b[id=show-time]").html();
                    var updateTime = eval(timeCounter)- eval(1);
                    $("b[id=show-time]").html(updateTime);

                    if(updateTime == 0){
                    $('#my-timer').hide(); 
                      $('.download').fadeIn('slow'); 
                    }
                }, 1000);           
});
});
        $(".download").hide();
        $("#my-timer").hide();
}); 
```

HTML：

```
<div class="link">Link</div>
<div class="download">Download</div>
<div style="display:none" id="my-timer">Page Will Redirect with in <b id="show-time">10</b> seconds<br />
</div> 
```

演示：http: [//jsfiddle.net/vuJZX/](http://jsfiddle.net/vuJZX/)

我的问题是：

1：第一次点击链接时，一切正常，但我只需要显示这个计时器一次！在演示中，您可以看到，每 10 秒后，如果您单击链接，计时器将启动并像这样计数，-1、-2、-3、-4 ... 我如何在 10 秒后停止和禁用此计时器秒？我需要在 10 秒后禁用计时器。

2：我需要显示这个计时器 10 秒，但如果你点击链接字 3-4 次，计时器将工作得很快！我认为我的问题是计时器速度！我不知道我该如何解释这个问题，但你可以在演示链接中尝试，只需点击链接 4-5 次并查看计时器！

我的最后一个问题，我不知道我的代码是否标准。我需要更改代码还是正确的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T03:10:18.850

我认为处理它的最简单方法就是使用`one`. 由于您只希望此事件触发一次，`one`因此将在第一次单击后取消绑定处理程序。

```
$('.link').one("click", function() { 
```

完成后，您还需要使用`clearInterval`停止间隔。

在相关说明中，不要使用`eval`. 您应该`parseInt`在这种情况下使用，或者将数字保存在 javascript 变量中。

[http://jsfiddle.net/vuJZX/3](http://jsfiddle.net/vuJZX/3)

```
$('.link').one("click", function() {
    $('#my-timer').fadeIn('slow');
    var settimmer = 0;
    var counter = 10;
    var interval = -1;
    $(function() {
        interval = setInterval(function() {
            var timeCounter = $("b[id=show-time]").html();
            $("b[id=show-time]").html(counter--);

            if (counter == 0) {
                $('#my-timer').hide();
                $('.download').fadeIn('slow');
                clearInterval(interval);
            }
        }, 1000);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T03:08:38.537

您可以使用 jQuery[`unbind()`](http://api.jquery.com/unbind/)函数和本机 JavaScript[`clearInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)函数。

演示：http: [//jsfiddle.net/SO_AMK/rzrez/1/](http://jsfiddle.net/SO_AMK/rzrez/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T03:29:39.517

我只是编辑你的小提琴。

```
var timeCounter = 10;
var istimerStart = false;

$(document).ready(function() {
  $('.link').click(function() {
    $('#my-timer').fadeIn('slow');

    $(function(){

        if(istimerStart == false){

           setInterval(function() {
              istimerStart = true;
                timeCounter = $("b[id=show-time]").html();
                var updateTime = eval(timeCounter)- eval(1);
                $("b[id=show-time]").html(updateTime);

                if(updateTime == 0){
                   $('#my-timer').hide();
                   $('.download').fadeIn('slow');
                }
            }, 1000);
         }
     });
    });
    $(".download").hide();
    $("#my-timer").hide();
}); 
```

[http://jsfiddle.net/vuJZX/](http://jsfiddle.net/vuJZX/)

你的错误：每当你点击链接时，新的间隔就开始了，所以我设置了一个标志。

无用的建议：计时器函数永远不要写在 document.ready 如果可能的话做单独的函数。

（这不是规则，但我遵循此规则以避免错误）。

# php - 使用 curl 从 file_get_contents / imagecreatefromstring 上传

> ID：12444148
> 
> 赞同：1
> 
> 时间：2012-09-16T03:03:18.453
> 
> 标签：php, stream

我有以下代码：

```
$image = imagecreatefromstring(file_get_contents('http://externaldomain.com/image.png')); 
```

并想提出一个 curl 请求：

```
$files = array();
$files[] = '@' . $image['tmp_name'] . ';filename=' . $image['name'] . ';type=' . $image['type'];

$ch = curl_init('index.php?route=upload');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $files);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec($ch); 
```

主要问题是，如何从`$image`变量中获取文件名和扩展名？

我可以用 替换`$image['tmp_name']`，`tempnam()`但是其他的东西呢？

有别的办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:23:55.447

imagecreatefromstring 返回一个 GD 句柄。没有与之关联的tmp_name、名称**或类型。**您试图将该 GD 句柄视为标准基于 POST 的 $_FILES 数据结构的结果。

不能将 GD 句柄传递给 curl 进行上传，因为它不是真正的图像，并且在您使用 imagejpeg/imagepng/imagewhatever 将其保存到文件之前不会如此，然后您可以将 curl 指向该文件，例如

```
$image = imagecreatefromstring(...);
imagejpeg($image, 'tempfile.jpg');

$files[] = '@tempfile.jpg;filename=tempfile.jpg;type=image/jpeg';

curl... 
```

# sml - ML中警告和类型的含义

> ID：12444149
> 
> 赞同：1
> 
> 时间：2012-09-16T03:03:52.017
> 
> 标签：sml

```
fun a(list) = 
   let
   val num = length(hd(list))
   fun inner(list) = 
      if num = length(hd(list)) then
         if tl(list) = nil then true
         else inner(tl(list))
      else false
   in
   if length(hd(list))-1 = length(tl(list)) then inner(tl(list))
   else false
   end; 
```

这是 ml 代码，我收到此警告并输入。

```
stdIn:6.16 Warning: calling polyEqual
val a = fn : ''a list list -> bool 
```

我不明白这个警告。为什么出现和类型。''为什么它有两个'？''？'a list list 和 ''a list list 有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T04:16:23.360

摘自[ML 提示](http://www.cs.williams.edu/~freund/cs334/auxread/ML-hints.html)：

> `Warning: calling polyEqual`[可能发生] 每当您使用`=`多态类型比较两个值时。
> 
> 例如，`fun eq(x,y) = (x = y);`将导致生成此警告，因为`x`and`y`将具有多态类型`''a`。这很好，您可以忽略警告。它不会在您的代码中报告任何类型的语义错误或类型错误。编译器会报告警告，因为 ML 如何测试多态类型的两个值是否相等可能会稍微低效。特别是，要执行相等测试，运行时系统必须首先确定您当前使用的值的类型，然后确定这些值是否相等。第一部分（检查运行时类型）可以使`=`测试比提前知道类型（例如当我们测试`3 = 4`并知道`=`测试正在应用于整数）。然而，这并不是大多数 ML 用户需要担心的事情......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T19:15:37.590

要回答你的第二个问题，

> 为什么它有两个'？''？'a list list 和 ''a list list 有什么区别？

`''a`与 相同`'a`，但要求它是*相等类型*。SML 中的*相等类型*是可以使用 比较的类型`=`。不能使用 比较不等式类型`=`。创建数据类型时，可以指定它是否为相等类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-20T12:04:07.580

```
dict=val a =[("a",[1,2]),("b",[2,3])] ; 
```

这是实现在字典中查找的代码

```
 fun look key [] = []
| look key ((a,b)::xs) = if (key =a ) then b else look key xs ; 
```

输出为

```
 test1.sml:8.36 Warning: calling polyEqual 
```

这是因为它不知道要比较的类型是什么，所以下面的代码说两者都是字符串类型。

```
fun look (key:string) [] = []
| look (key:string) ((a:string,b)::xs) = if (key =a ) then b else look (key:string) xs ; 
```

# cognos - COGNOS 使查询主题之间的连接成为条件

> ID：12444153
> 
> 赞同：1
> 
> 时间：2012-09-16T03:06:52.910
> 
> 标签：cognos

在 COGNOS 中，当我在 2 个查询主题 A 和 B 之间创建 1...1 关系时，该关系是否始终有效？或者有没有办法说只在我查询A时强制关系，但是当我查询B时，给我来自B的所有记录并忽略A。

这很重要，因为对我来说，B 是基于查找表的提示查询主题。所以让我们说 A 是所有客户的列表，B 是状态（活动/非活动）的查找表。
当我查询 B 时，我只想将 Active/Inactive 视为提示值。我选择活动，它应该只为我带来来自 A 的活动状态的记录。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:38:38.330

Cognos 默认使用最小化的 SQL。您可以在此处阅读：
[Cognos - 什么是最小化 SQL？](http://publib.boulder.ibm.com/infocenter/cbi/v10r1m1/topic/com.ibm.swg.ba.cognos.ug_best.10.1.1.doc/c_bp-minimized_sql.html#bp-minimized_SQL)

它的基本意思是 Cognos 只选择 SELECT 语句中的必填字段。
因此，如果您从表 B 中选择提示值字段，它将仅使用表 B（仅适用于提示页面）。
当您执行报表时假设您同时具有表 A 和 B 中的值，它将执行连接

# python - Python elif 语句无条件执行

> ID：12444161
> 
> 赞同：0
> 
> 时间：2012-09-16T03:09:18.727
> 
> 标签：python

不知道为什么我的代码默认使用这个 elif。但它永远不会到达 else 语句。甚至在最后一个 elif 中将索引抛出边界错误。

请忽略我不使用正则表达式。这个家庭作业不允许。问题是 else 语句之前的最后一个 elif。

```
if item == '':
    print ("%s\n" % item).rstrip('\n')

elif item.startswith('MOVE') and not item.startswith('MOVEI'):
    print 'Found MOVE'

elif item.startswith('MOVEI'):
    print 'Found MOVEI'

elif item.startswith('BGT'):
    print 'Found BGT'

# ...

elif item.find(':') and item[(item.find(':') -1)].isalpha():
    print 'Mya have found a label'

else:
    # Never get to this branch
    print 'Not sure what I found' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T03:12:34.347

`item.find(':')`当在 中找不到`-1`“”时将返回。`:``item`

`-1`被评估为`True`-ish，因此这可能是您问题的根源。仅当 " " 以 . 开头时`if item.find(':')`才会匹配。`:``item`

要解决此问题，只需替换此行：

```
elif item.find(':') and item[(item.find(':') -1)].isalpha(): 
```

用这条线：

```
elif ':' in item and item[item.find(':') - 1].isalpha(): 
```

如果“”前面的字符`:`是字母数字，这将有效地检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T03:21:00.877

*   你的`if`情况很奇怪：

    ```
    print ("%s\n" % item).rstrip('\n') 
    ```

    如果`item == ''`,`(item + '\n').rstrip('\n')`将等于`item`, 即`''`. 我很确定您可以摆脱该代码。

*   重新排序您的`if`语句可以消除`MOVEI`/`MOVE`问题。
*   添加到[Tadeck 的答案](https://stackoverflow.com/a/12444174/464744)，您需要使用`item.find(':') > 0`作为您的条件。如果您的字符串以 , 开头`:`，`string[0 - 1] == string[-1]`这是字符串的*最后一个*字符。

这是代码的可能固定版本

```
if item == '':
    print ''
elif item.startswith('MOVEI'):
    print 'Found MOVEI'
elif item.startswith('MOVE'):
    print 'Found MOVE'
elif item.startswith('BGT'):
    print 'Found BGT'
elif item.startswith('ADD'):
    print 'Found ADD'
elif item.startswith('INC'):
    print 'Found INC'
elif item.startswith('SUB'):
    print 'Found SUB'
elif item.startswith('DEC'):
    print 'Found DEC'
elif item.startswith('MUL'):
    print 'Found MUL'
elif item.startswith('DIV'):
    print 'Found DIV'
elif item.startswith('BEQ'):
    print 'Found BEQ'
elif item.startswith('BLT'):
    print 'Found BLT'
elif item.startswith('BR'):
    print 'Found BR'
elif item.startswith('END'):
    print 'Found END'
elif item.find(':') > 0 and item[(item.find(':') - 1)].isalpha():
    print 'Mya have found a label'
else:
    print 'Not sure what I found' 
```

* * *

这是您的代码的稍微 Pythonic 版本：

```
def test_item(item):
  tests = ['MOVEI', 'MOVE', 'BGT', 'ADD', 'INC', 'SUB', 'DEC', 'MUL', 'DIV', 'BEQ', 'BLT', 'BR', 'END']

  for test in tests:
    if item.startswith(test):
      return 'Found ' + test

  if item.find(':') > 0 and item[(item.find(':') - 1)].isalpha():
    return 'Mya have found a label'
  else:
    return 'Not sure what I found' 
```

# java - STS Tomcat Deploy 导致 IllegalArgumentException

> ID：12444172
> 
> 赞同：0
> 
> 时间：2012-09-16T03:11:57.947
> 
> 标签：java, spring, tomcat, http-status-code-404

我正在使用以下堆栈、spring 框架、Tomcat 7.0 和 maven，并试图编译和“在服务器上运行”，我似乎无法访问本地主机地址。我从浏览器收到的`404 /Dugsi_Manager`不可用。

*   第一次尝试是将此项目切换到 maven 项目并尝试“更新 maven 配置”。（事实上​​，这让事情变得更糟，因为我的堆栈跟踪显示缺少几个 Bean 定义。）
*   第二次尝试是删除所有 tomcat 实例并创建新实例并确保部署程序集包含我所有的 .M2 Repo jar。不去。

截至目前的堆栈跟踪。

```
 Sep 15, 2012 10:07:09 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
Sep 15, 2012 10:07:09 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Dugsi_Manager' did not find a matching property.
Sep 15, 2012 10:07:10 PM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Sep 15, 2012 10:07:10 PM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Sep 15, 2012 10:07:10 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1046 ms
Sep 15, 2012 10:07:10 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Sep 15, 2012 10:07:10 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.12
Sep 15, 2012 10:07:10 PM org.apache.catalina.core.StandardContext resourcesStart
SEVERE: Error starting static Resources
java.lang.IllegalArgumentException: Document base /Users/warz07/Documents/workspace-sts-2.8.0.RELEASE/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Dugsi_Manager does not exist or is not a readable directory
    at org.apache.naming.resources.FileDirContext.setDocBase(FileDirContext.java:140)
    at org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4814)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4994)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431)
Sep 15, 2012 10:07:10 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error in resourceStart()
Sep 15, 2012 10:07:10 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error getConfigured
Sep 15, 2012 10:07:10 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/Dugsi_Manager] startup failed due to previous errors
Sep 15, 2012 10:07:10 PM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Sep 15, 2012 10:07:10 PM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Sep 15, 2012 10:07:10 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 374 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:18:56.343

*   首先：您需要确保 Eclipse 编译文件！-- 你可以检查一下：如果有WAR文件，那么编译过程就可以工作了。
*   第二：确保部署过程有效：清理服务器并发布项目，然后启动服务器

# c - C 代码不能在 Linux 上运行，但可以在 Mac 上运行

> ID：12444182
> 
> 赞同：-3
> 
> 时间：2012-09-16T03:15:06.323
> 
> 标签：c, linux, macos

我在 Mac 上编写并测试了一个小型 C 程序。但是，当我在 linux 机器上使用 make 文件进行编译时，我得到一个我无法理解的错误。任何帮助/指针表示赞赏。

```
    ssss@deas:a0$ 使
    gcc -Wall -g -c -o map.o map.c
    gcc -Wall -g -c -o main.o main.c
    gcc map.o main.o -o map
    ssss@deas:a0$ ./map
    插入 2 2
    映射添加成功（旧值为 ）。
    *** 检测到 glibc *** ./map: free(): 无效指针：0x00007fd7e0826b58 ***
    ======= 回溯：=========
    /lib64/libc.so.6(+0x766d6)[0x7fd7e02ed6d6]
    ./map[0x400f5d]
    /lib64/libc.so.6(__libc_start_main+0xed)[0x7fd7e029823d]
    ./map[0x4007b9]
    ======= 内存映射：========
    00400000-00402000 r-xp 00000000 00:33 27911597 /home/k/k7r7/cs317/a0/map
    00601000-00602000 r--p 00001000 00:33 27911597 /home/k/k7r7/cs317/a0/map
    00602000-00603000 rw-p 00002000 00:33 27911597 /home/k/k7r7/cs317/a0/map
    00603000-00624000 rw-p 00000000 00:00 0 [堆]
    7fd7e0061000-7fd7e0076000 r-xp 00000000 08:01 917688 /lib64/libgcc_s.so.1
    7fd7e0076000-7fd7e0275000 ---p 00015000 08:01 917688 /lib64/libgcc_s.so.1
    7fd7e0275000-7fd7e0276000 r--p 00014000 08:01 917688 /lib64/libgcc_s.so.1
    7fd7e0276000-7fd7e0277000 rw-p 00015000 08:01 917688 /lib64/libgcc_s.so.1
    7fd7e0277000-7fd7e03fe000 r-xp 00000000 08:01 917554 /lib64/libc-2.14.1.so
    7fd7e03fe000-7fd7e05fd000 ---p 00187000 08:01 917554 /lib64/libc-2.14.1.so
    7fd7e05fd000-7fd7e0601000 r--p 00186000 08:01 917554 /lib64/libc-2.14.1.so
    7fd7e0601000-7fd7e0602000 rw-p 0018a000 08:01 917554 /lib64/libc-2.14.1.so
    7fd7e0602000-7fd7e0607000 rw-p 00000000 00:00 0
    7fd7e0607000-7fd7e0627000 r-xp 00000000 08:01 917547 /lib64/ld-2.14.1.so
    7fd7e07e3000-7fd7e07e6000 rw-p 00000000 00:00 0
    7fd7e0823000-7fd7e0827000 rw-p 00000000 00:00 0
    7fd7e0827000-7fd7e0828000 r--p 00020000 08:01 917547 /lib64/ld-2.14.1.so
    7fd7e0828000-7fd7e0829000 rw-p 00021000 08:01 917547 /lib64/ld-2.14.1.so
    7fd7e0829000-7fd7e082a000 rw-p 00000000 00:00 0
    7fff9db94000-7fff9dbb5000 rw-p 00000000 00:00 0 [堆栈]
    7fff9dbff000-7fff9dc00000 r-xp 00000000 00:00 0 [vdso]
    ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0 [vsyscall]
    中止

```

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T03:19:59.573

这是一个糟糕的代码，它取消了一个指针，然后不能被释放。如果你写了这个，看看 e-fence 或 valgrind。

# php - 搜索结果中的 JQuery Cycle javascript。馊主意？

> ID：12444192
> 
> 赞同：0
> 
> 时间：2012-09-16T03:17:40.520
> 
> 标签：php, javascript, jquery, optimization

我在一堆不同的东西中经常使用 JQuery Cycle 幻灯片。头脑中总是有相同的交易：

```
<script type="text/javascript">
  $(document).ready(function() {
    $('.slideshow').cycle({
      fx: 'fade',
      etc...'
    });
  });
</script> 
```

然后是身体上的照片：

```
<div class='slideshow'>
  <img src='photo1.jpg' width height />
  <img src='photo1.jpg' width height />
  <img src='photo1.jpg' width height />
  etc...
</div> 
```

不过这一次，我正在为供应商构建一个搜索引擎。每个返回的供应商都需要在他们的展示框中放一个小幻灯片。我使用 vendor_id 来保持幻灯片类的唯一性，但我不得不将 javascript 向下移动到正文中，这实际上是我的查询结果的一部分：

```
while($rst = mysql_fetch_array( SQL is happening... )) {
print("
  <script type='text/javascript'>
  $(document).ready(function() {
    $('.s$rst[vendor_id]').cycle({ 
    fx:     'fade', 
    etc...
    });
  });
  </script> 
  <div class='s$rst[vendor_id]'>
    <img src='$rst[prime_image]' width height />
    <img src='$rst[second_image]' width height />
    <img src='$rst[third_image]' width height />
    etc...
  </div>
");} 
```

工作得很好，在我按下它并继续做其他事情之前，任何人都可以想到这个方法的问题吗？烧掉不必要的内存或类似的东西？

谢谢，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:31:20.500

为什么不将这些调用包装`cycle()`在一个函数中？

您将保存 count($rst) 次 strlen() - strlen(functionname+parameters) 并且它看起来会更干净。您甚至可以将您的 cycle() 保存在标题中......或者更好......在专用的 file.js 中。（如果你喜欢的话，它甚至可以包含一个包装调用的 jquery 插件！）

```
while($rst = mysql_fetch_array( SQL is happening... )) {
print("
  <script type='text/javascript'>
  $(document).ready(function() {
    $('.s$rst[vendor_id]').cyclecaller(cycleoptions);
  });
...... 
```

# facebook - 通过 Facebook 插件发表的评论在我的网站上发布，但不在 Facebook 页面上

> ID：12444196
> 
> 赞同：-1
> 
> 时间：2012-09-16T03:18:05.177
> 
> 标签：facebook, plugins, comments, posting

我正在尝试在我的网页上添加一个**Facebook 评论框。**

我尝试了几个不同的插件，它们都有相同的问题：当我尝试通过我的网站对有问题的 facebook 页面发表评论时，*评论会显示在我的网站上，但不会显示在 Facebook 页面上。*
我已在插件中输入了正确的 Facebook 应用 ID 和 Facebook 页面 URL。我不明白我做错了什么。我正在使用**Rapidweaver**作为网页设计程序。请帮忙（请注意，我对此很陌生，而不是程序员）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T04:40:32.543

评论永远不会出现在您的 Facebook 页面上。

评论插件是您网站上的社交互动，因此用户评论您的网站*而不是*您的 Facebook 页面。除非您明确要求用户访问以在您的 Facebook 页面上发布，否则任何插件都不会重复发表评论。从我目前所见，不存在这样的插件。

欲了解更多信息：阅读[http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

# ruby-on-rails - Rails：除非加入主线程，否则线程不会影响数据库

> ID：12444198
> 
> 赞同：2
> 
> 时间：2012-09-16T03:18:05.957
> 
> 标签：ruby-on-rails, ruby, multithreading, activerecord

鉴于某些条件为真，我希望在 Rails 中每 20 秒执行一次后台操作。它在某个控制器路由被击中时启动，它看起来像这样

```
def startProcess
    argId = self.id
    t = Thread.new do
        while (Argument.isRunning(argId)) do
            Argument.update(argId)
            Argument.markVotes(argId)
            puts "Thread ran"
            sleep 20
        end
    end
end 
```

但是，除非我调用此代码，否则此代码对我的数据库绝对没有任何作用，`"t.join"`在这种情况下，我的整个服务器被阻塞了很长时间（但它可以工作）。

为什么不加入主线程就不能读取提交 ActiveRecords？线程调用看起来像的方法

```
def sample
  model = Model.new()
  model.save()
end 
```

但除非线程加入主线程，否则模型不会保存到数据库中。为什么是这样？几个小时以来，我一直在为此头疼。

编辑：

标记为正确的答案在技术上是正确的，但是此编辑是为了概述我最终使用的解决方案。问题是 Ruby 没有真正的线程，所以即使我的数据库连接正常工作，除非服务器的流量很少，否则线程无法获得处理器时间。

解决方案：启动一个新的 Heroku worker 实例，将其指向同一个数据库，并使其执行与线程具有相同功能的 rake 任务。现在一切都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T03:22:01.410

您需要重新建立数据库连接：

```
ActiveRecord::Base.establish_connection Rails.env 
```

# php - 如何修复mod重写

> ID：12444202
> 
> 赞同：0
> 
> 时间：2012-09-16T03:19:02.143
> 
> 标签：php, forms, .htaccess, mod-rewrite, url-rewriting

我有 mod rewrite 的问题

我让 htaccess 将 url 从 php 转换为 html

一切都很好

但问题是一些文件我不需要像 form.php 那样转换

这是我的 htaccess

```
RewriteCond %{REQUEST_URI} !^(.*)form.php(.*)$
RewriteCond %{REQUEST_URI} !^(.*)sitemap\.xml(.*)$
RewriteCond %{THE_REQUEST} ^[A-Z]+\s([^/]+)\.php\s
RewriteRule .* %1.html [R=301,L]
RewriteRule ^([^/]*)\.html$ $1.php
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^.*$ - [L]
RewriteRule ^index.php$ http://%{http_host} [R=301,L] 
```

我不需要转换 sitemap.xml 和 form.php

但是当我尝试查看文件 form.php 时出现错误

HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

我可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T04:01:40.583

正如 Marc B 所建议的那样，检查日志是最好的起点。您应该启用更详细的 mod_rewrite 日志记录，如下所示：

```
RewriteLog "/usr/local/var/apache/logs/rewrite.log"
RewriteLogLevel 3 
```

不要采用`RewriteLogLevel`高于 3 的详细程度。

因此，阅读您的规则，我想我可能知道您的意思。你应该试试这个：

```
RewriteCond %{REQUEST_URI} !form\.php$ 
```

我认为 Apache 并不关心 URL 上可能出现的查询字符串。`%{QUERY_STRING}`除了 . 之外，您还可以使用一个变量`%{REQUEST_URI}`。除非您有一些奇怪的 URL，其中可能包含“php”，否则我认为它们都将以“.php”结尾。

由于“sitemap.xml”看起来不错，因此您很可能应该按照它的示例并使用“\”以相同的方式转义句点字符（“.”）。

一天后，我有时间思考这些规则。

```
# Use simpler rules, not all that jazz you prepend, appended.
# 
RewriteCond %{REQUEST_URI} form\.php$ [OR]
RewriteCond %{REQUEST_URI} sitemap\.xml$ 
# If %{REQUEST_URI} matches either of the previous rule, 
# we skip a certain number of RewriteRules that follow. 
# If you add more rules, and need to skip more, you *need* to adjust this number.
RewriteRule . - [S=2]  

# Your original line reads:
#
# RewriteCond %{THE_REQUEST} ^[A-Z]+\s([^/]+)\.php\s
#
# Using "%{THE_REQUEST}" variable means you are processing
# a string like this
#
# "GET /something.html HTTP/1.1"
#
# Did you really need the HTTP method and the protocol version?
# Do something simpler. Match the the "http://host/foo/bar/baz/" portion
# Then match the first part of the PHP file name. So, if URL ends in "something.php"
# The second parenthesis will match "something". Then append ".html" 

RewriteRule (^.*\/)([^/]+)(\.php)$   $1$2.html [R=301,L]

# **Then** you are trying to rewrite your HTML files to PHP? Why?
# In any case, do something similar as the last RewriteRule. 

RewriteRule (^.*\/)([^/]+)(\.html)$   $1$2.php [R=301,L]

# I do not understand RewriteCond %{ENV:REDIRECT_STATUS} 200 at all
# I don't see you using this environmental variable later on in this
# snippet. Recommend the use of "PT" in case you have other stuff running
# that you want to send the rewrite target to be passed back to the 
# URL mapping engine. 

RewriteRule ^.*$ - [PT, QSA]

# You neglected to add the leading slash in this pattern
RewriteRule ^/index.php$ http://%{http_host} [R=301,L] 
```

# php - 带有引导扩展名的 Yii，别名“bootstrap.widgets.TbNavbar”无效。确保它指向一个现有的 PHP 文件

> ID：12444204
> 
> 赞同：1
> 
> 时间：2012-09-16T03:20:07.480
> 
> 标签：php, twitter-bootstrap, yii

我正在尝试将[引导扩展](http://www.cniska.net/yii-bootstrap/setup.html)与 yii 一起使用，但我不断收到标题中提到的错误，我仔细检查了我的配置文件，但我不知道我在哪里做错了。这是我的`config/main.php`

```
 <?php

// uncomment the following to define a path alias
// Yii::setPathOfAlias('local','path/to/local-folder');

// This is the main Web application configuration. Any writable
// CWebApplication properties can be configured here.
return array(
        'language'=>'en_us',
        'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..',
        'name'=>'CODEPAC',

        // preloading 'bootstrap,log' component
        'preload'=>array('bootstrap','log',),

        // autoloading model and component classes
        'import'=>array(
                'application.models.*',
                'application.components.*',

        ),

        'modules'=>array(
                // uncomment the following to enable the Gii tool
                'user'=>array(
                'debug'=>false,
                'userTable'=>'user',
                'translationTable'=>'translation',
                'mailer'=>'PHPMailer',
                'facebookConfig'=>array(
                        'appId'=>'12345',
                        'secret'=>'secret',
                        'domain'=>'localhost',
                        'status'=>true,
                        'xfbml'=>true,
                        'cookie'=>true,
                        'lang'=>'en_US',)
                ),
                 'avatar'=>array(),

                'profile' => array(
                'privacySettingTable' => 'privacysetting',
                'profileFieldTable' => 'profile_field',
                'profileTable' => 'profile',
                'profileCommentTable' => 'profile_comment',
                'profileVisitTable' => 'profile_visit',
                 ),
                 'role' => array(
                'roleTable' => 'role',
                'userRoleTable' => 'user_role',
                'actionTable' => 'action',
                'permissionTable' => 'permission',
                 ),

                'registration' => array(
                 ),

                'gii'=>array(
                        'class'=>'system.gii.GiiModule',
                        'password'=>'password',
                        // If removed, Gii defaults to localhost only. Edit carefully to taste.
                        'ipFilters'=>array('127.0.0.1','::1'),
                        'generatorPaths'=>array('bootstrap.gii',),
                ),

        ),

        // application components
        'components'=>array(
                'bootstrap'=>array(
                'class'=>'ext.bootstrap.components.Bootstrap',),
                'session'=>array(
                'sessionName'=>'SiteSession',
                'class'=>'CHttpSession',
'autoStart'=>true,
                ),
                 'cache'=>array('class'=>'system.caching.CFileCache'),
                        'user'=>array(
                        'class'=>'application.modules.user.components.YumWebUser',
                        // enable cookie-based authentication
                        'allowAutoLogin'=>true,
                         'loginUrl'=>array('//user/user/login'),
                ),
                // uncomment the following to enable URLs in path-format

                'urlManager'=>array(
                        'urlFormat'=>'path',
                        /*'rules'=>array(
                                '<controller:\w+>/<id:\d+>'=>'<controller>/view',
                                '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
                                '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
                        ),*/
                ),
                /*
                'db'=>array(
                        'connectionString' => 'sqlite:'.dirname(__FILE__).'/../data/testdrive.db',
                ),
                // uncomment the following to use a MySQL database
                */

                'db'=>array(
                        'connectionString' => 'mysql:host=localhost;dbname=myDb',
                        'emulatePrepare' => true,
                        'username' => 'myDbUsername',
                        'password' => 'myDbPassword',
                        'charset' => 'utf8',
                        'tablePrefix'=>'',
                ),

                'errorHandler'=>array(
                        // use 'site/error' action to display errors

'errorAction'=>'site/error',
        ),
                'log'=>array(
                        'class'=>'CLogRouter',
                        'routes'=>array(
                                array(
                                        'class'=>'CFileLogRoute',
                                        'levels'=>'error, warning',
                                ),
                                // uncomment the following to show log messages on web pages
                                /*
                                array(
                                        'class'=>'CWebLogRoute',
                                ),
                                */
                        ),
                ),
        ),

        // application-level parameters that can be accessed
        // using Yii::app()->params['paramName']
        'params'=>array(
                // this is used in contact page
                'adminEmail'=>'example@example.com',
        ),
        'import'=>array('application.modules.user.models.*',
        'application.models.*',
        'application.components.*',),
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T17:42:11.537

Yii-Bootstrap 不再预加载，所以现在必须使用路径别名。做这个。下载最新版本的 yii-bootstrap。在 main.php 配置粘贴的第一行：

```
Yii::setPathOfAlias('bootstrap', dirname(__FILE__).'/../extensions/bootstrap'); 
```

并像这样配置扩展：

```
'components'=>array(
        [...]
    'bootstrap' => array(
                //'class' => 'ext.bootstrap.components.Bootstrap'),
                'class'=>'bootstrap.components.Bootstrap'), 
```

你完成了。

如需更多参考资料，请阅读：[http ://www.cniska.net/yii-bootstrap/setup.html](http://www.cniska.net/yii-bootstrap/setup.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:40:11.843

确保为您解压缩的扩展程序/引导程序分配 [读取] 访问权限。

如果您在 Mac / Linux 上，请执行：

chmod 755 引导程序

在 Windows 上，右键单击该文件夹，并为 Apache 的帐户分配读取权限。有时也可以将读取权限分配给“所有人”（不过，这取决于您是否关心安全性）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T08:34:47.480

我遇到了同样的问题。我授予扩展文件夹的完全（777）权限。

尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-05T18:57:55.473

我在我的生产服务器上遇到了这个问题，即使它在本地运行良好。

解决方案是将 apache 所有权授予 yii 安装：

```
sudo chown www-data:www-data -R /var/www/yourapp 
```

以前的所有权是 root 并且 apache 看不到文件

# layout - 如何正确地将多个片段添加到片段过渡？

> ID：12444205
> 
> 赞同：6
> 
> 时间：2012-09-16T03:20:10.823
> 
> 标签：layout, view, transactions, fragment

[我最近在这里](http://stackoverflow.com/questions/12443312/listview-not-populating-or-webview-taking-up-entire-screen)问了一个关于片段的问题：

在搞砸了很多之后，我发现了问题所在，但经过更多的胡闹和研究（其中正确的代码似乎与我的相同），我无法弄清楚我的问题是什么。

创建完所有内容后，我发现只有最后添加到事务中的片段是可见的。这是我添加它们的代码：

```
FragmentManager manager = getFragmentManager();
FragmentTransaction trans = manager.beginTransaction();
UrlListFragment urlfragment = new UrlListFragment();
MyWebFragment webfragment = new MyWebFragment();
trans.add(R.id.fragment_container, urlfragment, "my_url_fragment");
trans.add(R.id.fragment_container, webfragment, "my_web_fragment");
trans.commit(); 
```

这是我的主要 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </FrameLayout>
</LinearLayout> 
```

**我做错了什么，或者可以做什么才能正确添加两个片段并且可以正确看到？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T13:32:25.080

不幸的是，您不能以这种方式使用片段，每个容器只需要使用一个片段。无论如何，它将相当于相同的视觉布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<FrameLayout
    android:id="@+id/fragment_container1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout>
<FrameLayout
    android:id="@+id/fragment_container2"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout>
</LinearLayout> 
```

和

```
FragmentManager manager = getFragmentManager();
FragmentTransaction trans = manager.beginTransaction();
UrlListFragment urlfragment = new UrlListFragment();
MyWebFragment webfragment = new MyWebFragment();
trans.add(R.id.fragment_container1, urlfragment, "my_url_fragment");
trans.add(R.id.fragment_container2, webfragment, "my_web_fragment");
trans.commit(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-13T01:37:55.823

要在一个布局中添加多个片段，您需要为每个单独的片段调用`add()`和`commit()`方法。但是，如果您要在循环中添加片段，或者例如如下所示：

```
FragmentManager manager = getFragmentManager();
manager.beginTransaction().add(R.id.parentView, myFragment1, "fragment:1").commit();
manager.beginTransaction().add(R.id.parentView, myFragment2, "fragment:2").commit(); 
```

这也可能让你陷入一些问题。由于该`commit()`方法不会立即添加片段，因此您需要确保前一个片段是从活动的`onAttachFragment()`方法附加的，然后进一步添加另一个片段。

# mysql - mysql中的Case出错，错误在哪里？

> ID：12444211
> 
> 赞同：-2
> 
> 时间：2012-09-16T03:22:04.527
> 
> 标签：mysql, sql

我想知道以下代码有什么问题：

```
cursor.execute("""SELECT calldate, dst, billsec, accountcode, disposition, 
                case when cast(substring(dst,4,1), unsigned) <= 5 then
                        billsec/60*%s as total
                else
                        billsec/60*%s as total
                end case
                FROM cdr where calldate >= '%s' and calldate < '%s' and disposition like '%s' and accountcode = '%s' and dst like '%s'""" %(rate_fixo, rate_movel, start_date, end_date, status, accountcode, destino)) 
```

尝试过这种方式并没有用：

```
cursor.execute("""SELECT calldate, dst, billsec, accountcode, disposition,
    case when cast(substring(dst,4,1), unsigned) <= 5 then 
        billsec/60*%s 
    else 
        billsec/60*%s 
    end as total
    FROM cdr where calldate >= '%s' and calldate < '%s' and disposition like '%s' 
    and accountcode = '%s' and dst like '%s'""" 
    %(rate_fixo, rate_movel, start_date, end_date, status, accountcode, destino)) 
```

错误：

“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 ' unsigned) <= 5 附近使用正确的语法，然后 billsec/60*0.1 否则 billsec/60*0.2 end as total FROM cdr w' 在第 1 行")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T03:28:51.540

MySQL 有两种 case 语句语法。一种用于[查询](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)，一种用于[存储过程](http://dev.mysql.com/doc/refman/5.0/en/case.html)。您在查询中使用 sproc 版本，导致错误。查询版本中没有“结束案例”：

```
SELECT ..., CASE WHEN ... THEN... END 
                                      ^---no 'case' here
FROM ... 
```

- - 跟进

同样，您不能给案例的组件起别名 - 这会动态地更改字段的名称，具体取决于案例的评估结果。您只能给整个 case 语句起别名：

```
SELECT ..., CASE WHEN ... THEN ... END AS total
                                      ^^^^^^^^^ 
```

例如

```
mysql> select case when 1=1 then 'a' else 'b' end case, 'hello';
                                                  ^^^^---syntax error         
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'case, 'hello'' at line 1

mysql> select case when 1=1 then 'a' else 'b' end, 'hello';     
+-------------------------------------+-------+
| case when 1=1 then 'a' else 'b' end | hello |
+-------------------------------------+-------+
| a                                   | hello |
+-------------------------------------+-------+
1 row in set (0.00 sec)

mysql> select case when 1=1 then 'a' as 'a_val' else 'b' as 'b_val' end, 'hello
';
                                    ^^^^^^^^^^^--error  ^^^^^^^^^^^--- error
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'as 'a_val' else 'b' as 'b_val' end, 'hello'' at line 1

mysql> select case when 1=1 then 'a' else 'b' end as total, 'hello';           
+-------+-------+
| total | hello |
+-------+-------+
| a     | hello |
+-------+-------+
1 row in set (0.00 sec) 
```

# many-to-many - datomic 中的限定关系

> ID：12444214
> 
> 赞同：8
> 
> 时间：2012-09-16T03:22:19.340
> 
> 标签：many-to-many, data-modeling, datomic

在关系数据库中，我可以有一个 table`Person`和一个 table `Hobby`。每个人都可以**有零个、一个或多个爱好**，我也想记录一下，比如说，**这些爱好对每个人的优先级**。

我可以使用 2 个外键和和一个普通列创建一个**关系表**。`PersonFK``HobbyFK``Priority`

在 datomic 中，为了建模一个简单的 n:m 关系（没有优先级），我可能会创建一个**带有 cardinality****的类型属性`Reference``Many`**，我将用于`Person`实体。

但是我将如何去*限定*该关系以能够存储优先级？是否必须类似于关系案例，即通过仅为该关系创建新实体类型来完成？或者有没有更好的方法？使用一些元数据工具之类的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:38:52.160

几天前在 Datomic 邮件列表上提出了一个类似的问题：

[https://groups.google.com/d/topic/datomic/7uOl-TISdxA/discussion](https://groups.google.com/d/topic/datomic/7uOl-TISdxA/discussion)

总之，那里给出的答案是你是对的：你需要创建一个关系实体来存储额外的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-24T11:17:11.897

鉴于 2019 年 6 月添加到 Datomic 的新功能，这里接受的答案现在不再是完整的故事。有时您仍想具体化这种关系，但现在还有另一种选择：[异构元组](https://docs.datomic.com/on-prem/schema.html#heterogeneous-tuples)

一个属性值，即5 元组`v`中的`eavto`，现在本身可以是一个元组。

这是一个最大长度为 8 的 clojure 向量。由于最大长度为 8，这不是存储任意数量的关系元数据的方法。

官[方博文](https://blog.datomic.com/2019/06/tuples-and-database-predicates.html)公告。

[在推特](https://twitter.com/datomic_team/status/1144615294608039937)上讨论发布。

在你的情况下：

```
{:db/ident       :person/hobby
 :db/valueType   :db.type/tuple
 :db/tupleTypes  [:db.type/ref :db.type/long] ; hobby, priority
 :db/cardinality :db.cardinality/many} 
```

要在数据记录中使用它，您可以使用[tuple](https://docs.datomic.com/on-prem/query.html#tuple)和[untuple](https://docs.datomic.com/on-prem/query.html#untuple)函数。

最好使用像数组这样的元组，其中元组真正代表复合数据。事实上，文档中的示例应该是针对这些*异质*元组的，实际上使用的是*同质*数据，所以我认为这真的取决于 datomic 的用户如何做出这些选择。

在 sql 世界中，通常如果数据是不同类型的，那么将其视为数组可能不是一个好主意，因为对于初学者来说，从查询语言中操作这些数据结构时会失去能力。Datomic 可能不完全等同，因为它是一个图形数据库，也许这仍然是相对未知的领域。

# ruby-on-rails - 没有路线匹配 [GET] "/book/list"

> ID：12444217
> 
> 赞同：1
> 
> 时间：2012-09-16T03:23:00.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rails-routing

我正在使用 Rails 3.2.7。我有一个控制器和一个动作，如下所示：

```
class BookController < ApplicationController

   def list
      @books = Book.find(:all)
   end

end 
```

我还创建了一个模型，名称`book.rb`位于模型和`list.rhtml`内部`\app\views\book`文件夹中。当我点击`http://127.0.0.1:3000/book/list`时，我收到此错误：

```
No route matches [GET] "/book/list"** 
```

这是`config/routes.rb`：

```
Ravi::Application.routes.draw do
  # The priority is based upon order of creation:
  # first created -> highest priority.

  # rest of the explanations in default "config/routes.rb"
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T03:27:11.137

您的路由器配置已全部注释掉，您需要自己添加规则。

***[向导：路由](http://guides.rubyonrails.org/routing.html)***

尝试添加以下内容：

```
resources :books do
  get 'list', :on => :collection
end 
```

并通过以下方式访问：`http://127.0.0.1:3000/books/list`

# vb.net - 用于修复 SSRS 报告中显示的 #Error 的自定义代码

> ID：12444220
> 
> 赞同：1
> 
> 时间：2012-09-16T03:23:40.997
> 
> 标签：vb.net, function, ssrs-2008, reporting-services

我有一些使用 Report Builder 3 for MSSQL 2008 Reporting Services 构建的报告。我的报告中的某些字段显示“#Error”，而不是这个我只想显示一个简单的“-”。是否有任何内置函数或自定义代码来克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:59:12.800

我仍然很想看看你的公式，但你似乎决心不展示它，所以我会在没有它的情况下大胆回答。我想你正在做一些事情，比如将当前行的字段除以前一行的字段。但是，这会给你`Infinity`第一行而不是`#Error`所以还有其他事情发生。但无论如何，我们还是用这个来运行，因为我们没有你的公式。

解决此问题的最常见方法是检查 Previous 函数是否返回 Nothing，通常表明您在第一行（假设您的字段始终有数据）。这样做的好处是还可以处理不能保证有值的字段。

```
 =IIF(IsNothing(Previous(Fields!MyField.Value)), "-", Fields!MyField.Value / Previous(Fields!MyField.Value)) 
```

这是您可以使用行号执行此操作的另一种方法，无论如何，它将始终检查第一行：

```
=IIF(RowNumber(Nothing) = 1, "-", Fields!MyField.Value / Previous(Fields!MyField.Value)) 
```

这假定错误是由值公式引起的，而不是由其他机制引起的，例如将表达式应用于其他属性，如格式、颜色，当没有前一行时，这是无效的。

# iphone - Google 的 GTMOAuth2Authentication 客户端是否支持授予离线访问权限？

> ID：12444223
> 
> 赞同：0
> 
> 时间：2012-09-16T03:24:00.357
> 
> 标签：iphone, picasa

我正在尝试获取 Picasa 离线访问相册和照片的请求令牌。我可以使用这两个参数（access_type 和approval_prompt）从服务器端请求它，但我不确定如何将它们传递给iPhone客户端（GTMOAuth2Authentication 和GTMOAuth2ViewControllerTouch）。

access_type=offline&approval_prompt=force"

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T20:07:48.753

找到了答案。在发出请求之前，您在 GTMOAuth2SignIn additionalAuthorizationParameters 属性中设置参数。

```
GTMOAuth2ViewControllerTouch *viewController;

[[viewController signIn] setAdditionalAuthorizationParameters:[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"offline",@"force", nil] forKeys:[NSArray arrayWithObjects:@"access_type",@"approval_prompt", nil]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T06:28:37.937

```
-(void)showGoogleLoginPage{
    SEL finishedSelector = @selector(viewController:finishedWithAuth:error:);
    GTMOAuth2ViewControllerTouch *authViewController =
    [[GTMOAuth2ViewControllerTouch alloc] initWithScope:kGTLAuthScopeDrive
                                               clientID:kClientID
                                           clientSecret:kClientSecret
                                       keychainItemName:userKeyChainName
                                               delegate:self
                                       finishedSelector:finishedSelector];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjects:[NSArray
                                                                              arrayWithObjects:@"offline",@"force",@"en", nil] forKeys:[NSArray arrayWithObjects:@"access_type",@"approval_prompt",@"hl", nil]];

    authViewController.signIn.shouldFetchGoogleUserProfile = YES;
    authViewController.signIn.additionalAuthorizationParameters=params;
    [self presentViewController:authViewController animated:YES completion:nil];
} 
```

> 希望这对你有帮助..

# ios - iPhone上的视频保存在哪里？

> ID：12444227
> 
> 赞同：2
> 
> 时间：2012-09-16T03:24:38.067
> 
> 标签：ios, video, save, gallery, assets

我的应用程序正在录制视频并创建其他文档和元数据 - 看起来所有 Apple 文档和其他代码都指将其保存在相册或相机胶卷中[这两个不同吗？] 使用 AssetsLibrary - 这不会混淆我所有的应用程序与其余的视频？

我找不到 Apple 或任何提供将自定义媒体文件单独存储在文件系统中并使用自定义库显示的最佳实践的书籍 - 即使在 Stackflow 中也没有好的指针。一些 iOS 大师能否给我指出一些好的例子。

注意我不是在问如何读/写视频等。问题是如何使用文件系统和数据存储组织自定义画廊，这是正确的方法吗？如果没有，还有什么其他选择？AssetsLibrary 的优点/缺点是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:03:06.580

您可以将它们存储在您的文档目录中。这仅适用于您的应用程序。您可以通过以下方式获得对该文件夹的引用：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

Apple 建议使用`NSFileManager`来创建、移动和删除文件。

```
NSFileManager *fileManager = [NSFileManager defaultManager]; 
```

> NSFileManager 类使您能够执行许多通用文件系统操作并将应用程序与底层文件系统隔离开来。

[NSFileManager](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFileManager)文档。

[NSSearchPathForDirectoriesInDomains](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/func/NSSearchPathForDirectoriesInDomains)

# java - 识别 11 的倍数和奇数或偶数的输入 java

> ID：12444228
> 
> 赞同：-1
> 
> 时间：2012-09-16T03:25:07.723
> 
> 标签：java

@oldrinb 和 @iccthedral 谢谢，但我应该使用 printf 或 println。我以这种方式编辑但与以前相同

```
import java.util.Scanner;
public class test
{
    public static void main( String args[] )
    {
        Scanner input = new Scanner( System.in );
        int x;
        int EO;
        int Mult;
        System.out.print ( "Enter value: " );
        x = input.nextInt();
        EO=x%2;
            Mult=x%11;
            if(EO>0&&Mult>0)
            {
                System.out.printf ("%d:NOT:ODD\n",x);
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T03:35:37.433

> 但是当我输入我的值时，它没有显示结果。作为“输入：NOT：ODD”

什么都没有显示？

如果我在这里假设的事情有误，请纠正我，但这...

`System.out.printf ("%d:NOT:ODD", );`

应该改为

`System.out.printf ("%d:NOT:ODD\n", x);`

PS 需要注意的一件事是@Blender 的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:52:56.853

您必须输入一个满足 if 语句中的两个条件的数字。因此，如果您要输入 11 或 22，它将不会打印任何内容。

# ios - 如何让 ARC 保留一个代表足够长的时间以便在一个块中调用它？

> ID：12444229
> 
> 赞同：0
> 
> 时间：2012-09-16T03:25:20.873
> 
> 标签：ios, objective-c, automatic-ref-counting, objective-c-blocks

在以下代码片段中，使用 ARC，我如何让委托的寿命足够长以调用这两种方法？

当前我得到一个编译器错误

> 错误的接收器类型“__autoreleasing id *”

我认为我需要做一些事情来让 ARC 保留委托并在它完成调用时释放它，但不确定该做什么是正确的。

```
- (BOOL) requestFromURL:(NSString*)url withDelegate:( id<SimpleDataDelegate>*) delegate
{
    [NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://..."]]
                                       queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {
         if ( error )
         {
             [delegate gotFailure:data];
         }
         else
         {
             [delegate gotResult:data];
         }
     }];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T03:40:32.950

我认为您的方法签名可能应该是

```
- (BOOL) requestFromURL:(NSString*)url withDelegate:(id<SimpleDataDelegate>) delegate 
```

代替

```
- (BOOL) requestFromURL:(NSString*)url withDelegate:(id<SimpleDataDelegate>*) delegate 
```

注意在第一个参数中缺少 a `*`，在第二个参数中。试试看，看看错误是否消失。如果没有，请回来报告。

# .net - Windows 7 中是否有用于 Metro 应用程序的 UI 工具包？

> ID：12444230
> 
> 赞同：3
> 
> 时间：2012-09-16T03:25:28.323
> 
> 标签：.net, windows-7, microsoft-metro

我知道真正的 Metro（呃，我的意思是 Windows 8 UI 样式）需要 Windows 8，因为它基于 WinRT，但我注意到像 GitHub for Windows 之类的应用程序具有 Metro 外观。

是否有用于 .net 的库或 UI 工具包为 Windows 7/.net 4.0 提供类似于 Metro 的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T03:45:44.197

[MahApps.Metro](http://mahapps.com/MahApps.Metro/)是一个 WPF 库，可以为 Windows 7 应用程序提供 Metro 外观；它还提供了一些 Metro 风格的常用控件。

它在 Microsoft 公共许可证下的[NuGet 上可用。](http://nuget.org/packages/MahApps.Metro/)

# svd - SVD 矩阵调节 - 如何从原始空间投影到条件空间？

> ID：12444231
> 
> 赞同：1
> 
> 时间：2012-09-16T03:25:38.537
> 
> 标签：svd, projection-matrix, regularized

一种经典的数据去噪方法是创建一个矩阵，执行 SVD，将小的奇异值设置为零，然后将分解的矩阵部分相乘以创建一个新矩阵。这是“调节”或“规范化”输入数据的一种方式。

给定原始矩阵空间中的一个向量，如何将该向量投影到新的条件空间中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:34:27.710

如果分解是 A ~= Ak = Uk * Sk * Vk'，那么您可以通过在右侧乘以右逆来获得仅 Uk 的表达式。你想去掉 V'，和 S 的“一半”，意思是它的平方根。所以我们真的在使用 Ak ~= (Uk * sqrt(Sk)) * (sqrt(Sk) * Vk')

Vk' 的右逆是 Vk，因为它是正交的。对角矩阵的逆矩阵就是它的倒数的对角矩阵。调用 sqrt(S) 的倒数 1/sqrt(S)

所以 Uk * sqrt(Sk) = Ak * Vk * 1/sqrt(Sk)

这就是你投射一排 Ak 的方式。列的情况完全相似：

sqrt(Sk) * Vk' = 1/sqrt(Sk) * Uk' * Ak

# uitableview - EXC_BAD_ACCESS iOS6 GM UITableTextAccessibilityElement

> ID：12444233
> 
> 赞同：2
> 
> 时间：2012-09-16T03:26:05.257
> 
> 标签：uitableview, exc-bad-access, ios6, nszombieenabled

我开始更新我的应用程序，该应用程序从 iOS 2.2.1 一直可用并一直运行到 5（如果重要的话，我仍然对其进行手动内存管理）。

现在，当我在 iOS6 GM 上运行它时，我得到了 EXC_BAD_ACCESS，

当我在启用 Zombie Object 的情况下运行项目时，

我得到：

-[UITableTextAccessibilityElementaccessibilityContainer]：消息发送到释放的实例 0xb3cacff0

什么？

有没有人遇到同样的问题？你是怎么解决的？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:30:16.617

我在 iOS 6 GM 上遇到了同样的问题，但在 iOS 5.1 上没问题。这可能是 iOS 6 的错误，它在我调用 [tableView reloadData] 时发生；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:26:03.340

XA，我通过在我的应用程序中删除一些遗留线程代码来摆脱它。表的内部运作和正在运行的线程使其崩溃。

这是一个自 iOS 2.2.1 以来一直存在的应用程序，当时 iPhone 的速度（不记得是 iphone 2 还是 3）需要一个活动指示器。但是对于 iphone 4s / 5 / ipod touch 第 4 和第 5 代，指示器将显示大约半秒

YMMV

# jquery - 如何使前置和附加不克隆

> ID：12444237
> 
> 赞同：0
> 
> 时间：2012-09-16T03:28:10.427
> 
> 标签：jquery, append, prepend

因此，在某些情况下，我使用 prepend 或 append 将一个元素移动到另一个元素，例如：

```
$('.categories').prependTo($('.date')); 
```

现在我知道 prepend 和 append 有时可以克隆内容，但是我怎样才能取消克隆呢？我不能重命名我的 div 也不能创建新的...我根本没有访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:31:27.320

仅当有多个目标时才会发生克隆，因为在您的情况下情况并非如此，因此不会发生克隆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T21:21:44.867

您可以使用[`detach()`](https://api.jquery.com/detach/)从 DOM 中删除元素然后添加/添加的方法。

```
$(document).ready(function() {
  $("li a").click(function() {
    var target = $(this).parent().closest('ul');
    $(this).parent().detach().prependTo(target);
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<ul>
  <li><a href="#">Cat 1</a>
  </li>
  <li><a href="#">Cat 2</a>
  </li>
  <li><a href="#">Cat 3</a>
  </li>
</ul>
<ul>
  <li><a href="#">Cat 4</a>
  </li>
  <li><a href="#">Cat 5</a>
  </li>
  <li><a href="#">Cat 6</a>
  </li>
</ul>
```

# mongodb - 如何在 mongoDB 中使用 geoNear 命令查询具有日期范围的位置？

> ID：12444242
> 
> 赞同：0
> 
> 时间：2012-09-16T03:29:12.170
> 
> 标签：mongodb, geospatial

我用了find还可以：</p>

```
{
    $and:[
        {"online":1},
        {"uptime":{$gte: new Date(2012,8,16,2,51)}}
    ]
} 
```

以下命令也可以：

```
{
    geoNear : "Driver", 
    near : [120.105148,30.447977 ],
    num : 100,
    spherical : true,
    maxDistance :500/6378,
    query:{"online":1}
} 
```

但我将 geoNear 命令与地理空间索引一起使用，我什么也得不到：

```
{
    geoNear : "Driver", 
    near : [120.105148,30.447977 ],
    num : 100,
    spherical : true,
    maxDistance :500/6378 ,
    query:{
        $and:[
            {"online":1},
            {"uptime":{$gte: new Date(2012,8,16,2,51)}}
        ]
    }
} 
```

要求是：我想在10分钟内让他们更新位置的在线客户，怎么做？我创建了名为“pos”的地理空间索引，包括列：正常运行时间和在线

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:29:10.877

您不需要 $and 在查询中。如果添加两个字段，则只返回同时满足这两个条件的文档。

试试这个：

```
db.runCommand(
    {
        geoNear : "Driver", 
        near : [120.105148,30.447977 ],
        num : 100,
        spherical : true,
        maxDistance :500/6378 ,
        query: { "online": 1,
                 "uptime": {$gte: new Date(2012,8,16,2,51)}

        }
    }
) 
```

仅当您想在同一字段上有两个条件，或者如果您想制定涉及 $and 和 $or 的更复杂的逻辑查询时，才需要 $and。有关更多信息，请参阅[$and 文档](http://docs.mongodb.org/manual/reference/operator/and/#_S_and)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:12:27.383

thks at first; I used the $or instead of the $and, it also could not work, I need use the $or; now, I add a Millisecond（long type） column that it convert from the Date column , and I changed the Date column as the following, It worked:

```
{
geoNear : "Driver", 
near : [120.105148,30.447977 ],
num : 100,
spherical : true,
maxDistance :500/6378 ,
query:{
    $or:[
        {"online":2},
        {"online":1,"uptimestap":{$gte: 1348156800000}}
    ]
}
} 
```

# notifications - 对于 Win8 应用程序，我如何在使用电池时安排磁贴通知/更新

> ID：12444243
> 
> 赞同：0
> 
> 时间：2012-09-16T03:29:25.223
> 
> 标签：notifications, windows-8, microsoft-metro

我目前正在安排一个后台任务，然后将一些磁贴更新排队。当机器上电时，后台任务会安排下一批更新。我正在使用使用电池时不运行的维护类型后台任务。大多数其他类型的后台任务类型都需要将应用程序固定到锁定屏幕。

我需要一个后台任务来定期运行，以安排磁贴更新，包括在电池模式下。显示的信息很快就会过时，因此我需要经常更新磁贴。

我还查看了 TileUpdater.StartPeriodicUpdate 磁贴更新，但这需要某处的 Web 服务，我的代码在后台任务中是本地的。当机器通电时，它可以作为维护任务工作。

我很确定这是可能的，我可以在电池模式下看到其他应用程序更新，而不会被固定。

如何从后台任务定期（比如每分钟）更新磁贴，而不管是否通电或使用电池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:59:52.597

有几种方法可以使用电池更新应用程序磁贴，而无需将应用程序固定到锁定屏幕。其中两种方法需要网络存在：推送通知和定期通知（您提到过）。这篇 MSDN 文章介绍了每种交付方法：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh779721.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh779721.aspx)

如果磁贴通知的内容不是动态的，则可以使用计划的磁贴通知。每次启动时，应用程序都可以将一些固定数量的磁贴通知安排​​到遥远的未来。这篇 MSDN 文章提供了一个示例应用程序提前一周安排通知，并使用应用程序启动和计时器后台任务来持续保持应用程序磁贴最新：http: [//msdn.microsoft.com/en-us/库/windows/apps/hh761464.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh761464.aspx)

# java - 不会画瓷砖？

> ID：12444247
> 
> 赞同：0
> 
> 时间：2012-09-16T03:29:46.813
> 
> 标签：java

好吧，我正在用 java 制作一个相对简单的平台游戏，我有一个生成关卡的方法，但是瓷砖不会绘制。

```
public void generateDungeon() {
    int y = 30;
    for(int x = 0; x < block[0].length; x++) {
        block[x][y] = new Block(new Rectangle(x * Tile.tileSize, y *      Tile.tileSize, Tile.tileSize, Tile.tileSize), Tile.basic);
    }
} 
```

我希望 Y 保持不变，这就是它具有设定值的原因。

这就是我认为问题所在，但这是控制台消息

```
Exception in thread "Thread-2" java.lang.NullPointerException
at mineandbuild.Player.isCollidingWithBlock(Player.java:82)
at mineandbuild.Player.tick(Player.java:22)
at mineandbuild.Component.tick(Component.java:89)
at mineandbuild.Component.run(Component.java:110)
at java.lang.Thread.run(Unknown Source) 
```

控制台说问题出在这行代码上：

```
public boolean isCollidingWithBlock(Point pt1, Point pt2) {     
    for(int x = (int) (this.x / Tile.tileSize); x < (int) (this.x / Tile.tileSize  + 3); x++) {
        for(int y = (int) (this.y / Tile.tileSize); y < (int) (this.y / Tile.tileSize  + 3); y++) {
            if(x >= 0 && y >= 0 && x < Component.dungeon.block.length && y < Component.dungeon.block[0].length)
This line --->  if(Component.dungeon.block[x][y].id != Tile.air) {
                if(Component.dungeon.block[x][y].contains(pt1) || Component.dungeon.block[x][y].contains(pt2)) {
                    return true;
                }
            }
        }
    }

    return false;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T03:38:42.793

尝试打印出 x 和 y 值

```
if(Component.dungeon.block[x][y].id != Tile.air) { 
```

您说在 y 的值之前的代码中应该保持不变，这意味着对于二维数组中 y 的每个其他索引，它们都设置为 null，但是在 forloop 中你有这个

```
for(int y = (int) (this.y / Tile.tileSize); y < (int) (this.y / Tile.tileSize  + 3); y++) { 
```

这使我相信您正在尝试访问为空的索引，然后尝试访问“id”字段，但该对象不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T03:56:49.710

block[x][y] 可能没有为所有 y 值初始化......就像在 genrateDunegeon() 方法中你正在为所有 x 值初始化 block[x][30] 一样。

所以问题是 y 的其他值是什么...您是否在未显示的代码片段中对其进行了初始化。

除非您不初始化，否则将生成异常。

我认为这可能有效.....（虽然不确定..）

```
public void generateDungeon()
{
  for(int x = 0; x < block[0].length; x++) 
 {
 for (int y=0; /*your termination condition like y<n */; y++)
  if(y == 30)
    block[x][y] = new Block(new Rectangle(x * Tile.tileSize, y *      Tile.tileSize, Tile.tileSize, Tile.tileSize), Tile.basic);
  else
    block[x][y] = new Block(null);
 }
  } 
```

并在 Block 构造函数中处理空值。

# php - PHP TCP Client 无法连接到服务器

> ID：12444248
> 
> 赞同：1
> 
> 时间：2012-09-16T03:29:48.973
> 
> 标签：php, tcp, client

我已经收集了一些将 TCP 客户端连接到服务器并更改了 IP 的示例，但我真的不知道我的代码中的错误是什么，因为它应该可以工作并且服务器也从 Gta San Andrease 多人脚本控制台在线，服务器位于我的另一台电脑的 localhost 上，IP 为 192.168.0.11 ，服务器端口为 7777 ，这是来自我的 PHP 网站的客户端代码：

```
 <?php

  // form submitted
  // where is the socket server?
  $host="192.168.0.11";
  $port = 7777;
  // open a client connection
  echo "1";
  $fp = fsockopen ($host, $port, $errno, $timeout);
  echo "2";
  if (!$fp){
  echo "3";
  $result = "Error: could not open socket connection";
  }
  else
  {
 echo "4";
  // get the welcome message
  fgets ($fp, 7777);
  // write the user string to the socket
  fputs ($fp, $message);
  // get the result
  $result .= fgets ($fp, 7777);
  // close the connection
  fputs ($fp, "END");
  fclose ($fp);
  // trim the result and remove the starting ?
  $result = trim($result);
  $result = substr($result, 2);
  // now print it to the browser
  }
  ?>
  Server said: <b><? echo $result; ?></b>
  <?

  ?> 
```

这是警告/错误：

警告：fsockopen(): unable to connect to 192.168.0.11:7777（连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接的主机没有响应，建立连接失败。）

# php - 如何使用 javascript 重新提交 PHP 表单

> ID：12444252
> 
> 赞同：2
> 
> 时间：2012-09-16T03:31:02.840
> 
> 标签：php, javascript, forms

我想知道是否可以通过单击调用 javascript 命令的按钮重新提交表单。

所以这基本上就是我想要做的 -
第 1 页：表格；action = page2.php
page 2：根据page 1设置的参数生成随机列表

我想在第 2 页上放置一个按钮，以便在单击时，就好像用户按了 F5，并且将使用相同的参数生成一个新列表。

我在谷歌上找到了很多帮助，人们试图不让这发生，但我不知道如何真正让它发生......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T03:34:33.160

您可以使用`location.reload(true);`刷新页面。

```
<button onclick="location.reload(true);">refresh</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:02:55.413

你只需要使用。`location.reload()`而不是`location.reload(true)`. 因为这不会禁用重新加载的缓存，而是`true`作为参数使用。

这是参考。[jquery如何刷新页面？](https://stackoverflow.com/questions/4324424/how-to-refresh-a-page-in-jquery)

编辑：为什么不只是使用`hidden input field`和保留值并随时获取它？

# python - 将第二个项目添加到 Django 项目

> ID：12444258
> 
> 赞同：2
> 
> 时间：2012-09-16T03:31:59.840
> 
> 标签：python, django, eclipse, import, project

我是 Django 的新手。我在 Eclipse 中使用 Django。我使用 Eclipse 创建了一个 Django 项目（称为“Django_Test_Project”）。我还在 Eclipse 之外使用命令行（称为“polls”）创建了一个 PyDev 项目。它有models.py、views.py 和tests.py。

我使用以下命令创建了“民意调查”：

```
 manage.py startapp polls 
```

我想使用 Eclipse 将“polls”作为第二个项目添加到“Django_Test_Project”。如何使用在 Eclipse 之外创建的项目来做到这一点？Eclipse 不将“polls”识别为项目，可能是因为“polls”中缺少项目文件。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T11:51:45.980

您正在编写 Django 教程，对吧？首先，您的术语不正确。*您将项目*与*应用程序*或简称*应用*程序混淆。Eclipse 不将*投票*识别为项目也就不足为奇了，因为它不是项目而是应用程序。

在 Django 1.4.1 中，名为*mysite*的项目的标准结构是这样的：

```
mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py 
```

您的*投票*应用程序应位于文件所在的同一目录中`manage.py`：

```
mysite/
    manage.py
    polls/
        __init__.py
        models.py
        tests.py
        views.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py 
```

您可以使用 Windows 资源管理器、Finder、终端等将目录移动到`polls`目录`mysite`中（取决于您运行的操作系统）。在 Eclipse 中刷新项目视图后，您的*投票*应用程序应该会显示出来。无论如何，您应该更仔细地阅读[Django 教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)，因为它基本上已经回答了您的问题。

此外，请查看[此线程](https://stackoverflow.com/questions/734255/what-is-the-difference-between-a-site-and-an-app-in-django)，该线程更详细地解释了项目和应用程序之间的区别。

# iphone - 为什么我的电影不能使用 MPMoviePlayerController 播放？

> ID：12444259
> 
> 赞同：0
> 
> 时间：2012-09-16T03:32:36.913
> 
> 标签：iphone, objective-c, ios, mpmediaplayercontroller

我正在尝试让一部基本电影在 iPhone 应用程序中播放；但是，我似乎无法让它工作。这是我的整个代码：

```
#import <MediaPlayer/MediaPlayer.h>
#import "ViewController.h"

@implementation ViewController

- (IBAction)playMoviePressed:(id)sender
{
    NSURL *url = [NSURL URLWithString:@"http://www.ebookfrenzy.com/ios_book/movie/movie.mov"];

    MPMoviePlayerController *moviePlayer =
    [[MPMoviePlayerController alloc] initWithContentURL:url];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayer];

    moviePlayer.controlStyle = MPMovieControlStyleDefault;
    moviePlayer.shouldAutoplay = YES;
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES];
    [moviePlayer prepareToPlay];
    [moviePlayer play];
}

@end 
```

`playMoviePressed`我在屏幕上有一个按钮，当它被点击时会调用。我知道这个方法被调用了。我也尝试过使用拖入 xcode 的本地文件`.mov`。`.mp4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T06:02:17.313

我得到了你的代码，通过为它添加一个框架来播放视频：

```
[moviePlayer.view setFrame:CGRectMake(0, 0, 320, 200)]; 
```

但是视频断断续续，但这可能是我的互联网连接。看到您正在使用 IBAction，您可能正在使用 Interface Builder 或 Storyboard，所以我认为阻止它播放的唯一原因是您缺少与 IBOutlet 的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:56:22.987

如果您想要全屏模式，您可以简单地使用 MPMoviePlayerViewController 并执行以下操作：

```
MPMoviePlayerViewController* viewController = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
[self presentMoviePlayerViewControllerAnimated:viewController]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:28:19.440

我想到了。我的问题真的很愚蠢。因为我没有维护指向我的 MPMoviePlayerViewController 的强指针，所以方法一结束它就会被释放。一个简单`@property`的界面解决了这个问题。

# php - Wordpress 和动态编程 PHP

> ID：12444266
> 
> 赞同：3
> 
> 时间：2012-09-16T03:34:26.473
> 
> 标签：php, wordpress

我有两种类型的业务列表的地理页面。每个页面都来自州、县、市，但我需要在两种类型的业务之间共享相同的地理位置。

我的两种业务类型是牙医和脊医。

我正在尝试拥有这样的永久链接结构：

```
xyz.com/dentist/alabama
xyz.com/dentist/alabama/polk-county/
xyz.com/chiropractors/alabama/
xyz.com/chiropractors/alabama/polk-county/ 
```

我最初打算将地理加载为页面和子页面，但使用这种方法我无法获得由类型脊医和牙医分隔的永久链接。

所以现在我为脊医和牙医创建了一个自定义帖子类型，这给了我永久链接

`xyz.com/dentist and xyz.com/chiropractor.`

我现在的问题是如何处理我的类别地理页面。我想知道是否可以在 wordpress 中创建一个 shell 页面`xyz.com/dentist/[state]/`，然后通过 php 为每个状态动态构建一个页面？因此，在显示 [state] 的地方，当查看该特定页面时，它将被实际状态（例如阿拉巴马州、加利福尼亚州等）替换。但是外壳页面只是数据库中的 1 页。

如果是这样，有人可以给我一个关于如何指导程序员这样做的基本解释吗？

我意识到 wordpress 是动态的，但我试图阻止的是为我的数据库加载大量的页面，比如牙医和脊医的州、县和城市。

我在数据库中列出了 5000 多名牙医，然后将每个州、县和市加载到其自己的类别页面中，这使数据库陷入困境。

我想知道是否可以在 wordpress 中加载一个页面来表示状态，然后通过 php 在幕后根据用户正在查看的内容为每个状态构建一个状态类别页面。

例如，状态页面上的文本可能会显示“在阿拉巴马州寻找牙医”，然后该页面将列出加载到我的数据库中且具有阿拉巴马州状态的所有牙医。

然后对于得克萨斯州，页面可能会显示“在得克萨斯州寻找牙医”，然后列出数据库中加载的所有具有得克萨斯州状态的牙医。所有这些都将通过我的 wordpress db 调用状态中的一个页面来处理，该页面充当 shell 页面。

shell 页面将包含以下文本：“在 [插入 php 代码以列出用户正在查看的状态] 中查找牙医”。然后在此文本下方将有 php 代码来拉出处于用户正在查看的状态的所有牙医。我想指导我的程序员最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:25:04.600

我的建议是使用“ [WP Super Cache”之](http://wordpress.org/extend/plugins/wp-super-cache/)类的东西以及您在上面为您的类别定义的适当结构。

1.  牙医

    *   阿拉巴马州
        *   波尔克县
2.  脊医

    *   阿拉巴马州
        *   波尔克县

确保向下的每一层都有上一层的“父级”。起初配置起来有点费力，但应该可以满足您的需求。

您最终会得到一个类似于以下内容的网址：

xyz.com/**类别**/dentist/alabama/polk-county/

如果您想从头开始**分类**部分，您还可以创建脊医和牙医作为自定义分类法并为它们创建自定义“.php”文件。结果将是：

*   xyz.com/dentist/alabama/polk-county/
*   xyz.com/chiropractor/alabama/polk-county/

WP Super Cache 将使页面不必在每次有人访问它时从头开始加载，并且应该减少您的服务器负载。

希望这可以帮助！

# c++ - 几个 Makefile 问题

> ID：12444271
> 
> 赞同：0
> 
> 时间：2012-09-16T03:36:09.700
> 
> 标签：c++, makefile

我有这个 Makefile：

```
CFLAGS = -c -Wall
CC = g++
EXEC = main
SOURCES = main.cpp listpath.cpp Parser.cpp
OBJECTS = $(SOURCES: .cpp=.o)
EXECUTABLE = tp

DIR_SRC = /src/
DIR_OBJ = /obj/

all: $(SOURCES) $(OBJECTS)

$(EXECUTABLE): $(OBJECTS)
    $(CC) $(CFLAGS) $(OBJECTS) -o $@

.cpp.o:
    $(CC) $(CFLAGS) $< -o $@

clean:
    rm $(OBJECTS) $(EXECUTABLE) 
```

请注意：

*   我在目录“。”中。其中包含生成文件
*   文件夹“./src”已存在，并包含所有 .h 和 .cpp 文件
*   文件夹“./obj”不存在，我希望 makefile 创建它并将所有 .o 放在那里

我得到的错误是：

```
No rules to build "main.cpp", necessary for "all". Stopping. 
```

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T04:06:39.330

好的，从顶部开始：

```
CFLAGS = -c -Wall
CC = g++
# EXEC = main never used, not needed
SOURCES = main.cpp listpath.cpp Parser.cpp 
```

到目前为止，一切都很好。请注意，这`SOURCES`没有提到`DIR_SRC`，因此我们稍后必须建立该连接（并且`$(DIR_SRC)$(SOURCES)`不会工作，因为路径必须附加到列表的*每个成员*）。但`OBJECTS`确实需要路径（例如`/obj/main.o`）：

```
OBJECTS = $(patsubst %.cpp, $(DIR_OBJ)%.o, $(SOURCES))
EXECUTABLE = tp

DIR_SRC = /src/
DIR_OBJ = /obj/ 
```

（我个人不喜欢将斜杠放在变量中，但这只是个人喜好问题。）第一个目标是默认目标，因此它应该构建您真正想要构建的内容：

```
all: $(EXECUTABLE) 
```

不要担心将来源列为先决条件；他们稍后会自行解决。

```
$(EXECUTABLE): $(OBJECTS)
    $(CC) $(CFLAGS) $^ -o $@  # <-- note the automatic variable $^ 
```

约定在`.cpp.o`这里实际上不起作用。我们必须把它拼出来。我们必须告诉 Make 搜索`$(DIR_SRC)`文件`.cpp`：

```
$(OBJECTS): $(DIR_OBJ)%.o: %.cpp $(DIR_OBJ)
    $(CC) $(CFLAGS) $< -o $@

$(DIR_OBJ):
    mkdir $@

vpath %.cpp $(DIR_SRC) 
```

并告诉 Make 这`clean`不是一个真正的目标，只是为了安全起见：

```
.PHONY: clean
clean:
    rm $(OBJECTS) $(EXECUTABLE) 
```

**编辑：**

我不应该一步尝试这么多。让我们尝试一些更简单的方法：

```
$(DIR_OBJ)%.o: $(DIR_SRC)%.cpp $(DIR_OBJ)
    $(CC) $(CFLAGS) $< -o $@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T03:43:53.683

编辑`SOURCES`以包含源目录（例如`src/main.cpp`等）。

对于目标文件，请考虑如下内容：

```
OBJECTS = $(subst src/,obj/,$(SOURCES:%.cpp=%.o))

# ...

all: $(SOURCES) build

.PHONY: build
build: pre_build $(EXECUTABLE)

.PHONY: pre_build
pre_build: obj

obj:
    -mkdir obj

$(EXECUTABLE): $(OBJECTS)
    $(CC) $(CFLAGS) $^ -o $@ 
```

# python - 错误 2006：“MySQL 服务器已消失”使用 Python、Bottle Microframework 和 Apache

> ID：12444272
> 
> 赞同：6
> 
> 时间：2012-09-16T03:37:00.667
> 
> 标签：python, mysql, apache, mod-wsgi, bottle

使用以下方式访问我的网络应用程序后：
- Python 2.7
- Bottle 微框架 v. 0.10.6
- Apache 2.2.22
- mod_wsgi
- 在 Ubuntu Server 12.04 64 位上；几个小时后我收到此错误：

```
OperationalError: (2006, 'MySQL server has gone away') 
```

我正在使用 MySQL——Python 中包含的原生 MySQL。它通常发生在我不访问服务器时。我尝试使用以下方法关闭所有连接：

```
cursor.close()
db.close() 
```

其中 db 是标准的 MySQLdb.Connection() 调用。

my.cnf 文件如下所示：

```
key_buffer      = 16M
max_allowed_packet  = 128M
thread_stack        = 192K
thread_cache_size       = 8
# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched
myisam-recover         = BACKUP
#max_connections        = 100
#table_cache            = 64
#thread_concurrency     = 10 
```

它是默认配置文件，除了 max_allowed_pa​​cket 是 128M 而不是 16M。

对数据库的查询非常简单，最多检索大约 100 条记录。

谁能帮我解决这个问题？我确实有一个想法是使用 try/except 但我不确定这是否真的有效。

提前致谢，

杰米

更新：try/except 调用不起作用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-16T03:40:12.593

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T09:41:35.487

此处发布了一个（非常相关的）问题的答案：[https ://stackoverflow.com/a/982873/209532](https://stackoverflow.com/a/982873/209532)

它与 MySQLdb 驱动程序（MySQL-python（未维护）和 mysqlclient（已维护 fork））直接相关，但方法与不支持自动重新连接的其他驱动程序相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T16:52:36.343

确保您没有尝试提交已关闭的 MySqldb 对象

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-07-18T03:49:09.823

对我来说，这是使用

```
MySQLdb.connect("127.0.0.1","root","","db" ) 
```

代替

```
MySQLdb.connect("localhost","root","","db" ) 
```

接着

```
df.to_sql('df',sql_cnxn,flavor='mysql',if_exists='replace', chunksize=100) 
```

# url - 在 Yii 框架中美化 URL 时出现 Server 400 错误

> ID：12444273
> 
> 赞同：0
> 
> 时间：2012-09-16T03:37:11.920
> 
> 标签：url, url-rewriting, yii

所以，使用 urlManager 我已经能够做到这一点：

```
'people/<id:\d+>/<last:.*?>/<name:.*?>'=>'person/view', 
```

生成这个：http: [//foo.com/people/3/smith/john](http://foo.com/people/3/smith/john)

我想消除 ID 号，在本例中为“3”

我尝试使用这个：

```
'people/<last:.*?>/<name:.*?>'=>'person/view', //makes sense right? 
```

但是，当我尝试导航到[http://foo.com/people/smith/john](http://foo.com/people/smith/john)时，出现服务器 400 错误。是什么赋予了？我应该尝试修改 .htaccess 文件吗？

这里要求的是我的整个 urlManager 组件：

```
 'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName'=>false,
        'rules'=>array(
            'about' => array('site/page', 'defaultParams' => array('view' => 'about')),
            'contact'=>'site/contact',
            'login' =>'site/login',
            '/'=>'site/index',
            'people/<last:.*?>/<name:.*?>'=>'person/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
    ), 
```

这是我的 PersonController.php 文件：

```
public function actionView()
{
    $person=$this->loadModel();
    $this->render('view',array(
        'model'=>$person,
    ));
}

private $_model;

public function loadModel()
{
    if($this->_model===null)
    {
        if(isset($_GET['last']))
        {
            $this->_model=Person::model()->findByPk($_GET['id']);
        }
        if($this->_model===null)
            throw new CHttpException(404,'The requested page does not exist.');
    }
    return $this->_model;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:58:43.333

您可能需要 URL 的重写条件，因此请求仍会路由回 index.php。

查看本指南：[http ://www.yiiframework.com/doc/guide/1.1/en/topics.url#user-friendly-urls](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#user-friendly-urls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:40:19.293

看看`actionView`_`PersonController`

```
public function actionView($id,...)
{

} 
```

所以视图动作必须需要一个`$id`参数才能工作。否则会抛出 400 bad request 错误。在您修改后的 url 规则中，指定的唯一参数是`$last`和`$name`。解决的办法是，如果里面没有用到，就去掉`$id`参数to 。否则，您必须更改功能逻辑来确定所需人员，而不是`actionView()``actionView``$last``$name``$id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T04:28:46.730

您的视图操作需要接受名称并通过属性进行查找，而不是使用需要 ID 的 loadModel：

```
public function actionView($last, $name)
{
    $person = Person::model()->find(
        'name=":name" AND last=":last"',
        array(':name'=>$name, ':last'=>$last)
    );

    if($person === null) throw new CHttpException(404);

    $this->render('view',array(
        'model'=>$person,
    ));
} 
```

请注意，您的请求将不支持多个具有相同名字和姓氏的人！

# php - CakePHP Auth loginRedirect 错误/总是重定向到“用户/登录”，而我放置了不同的控制器

> ID：12444274
> 
> 赞同：0
> 
> 时间：2012-09-16T03:37:30.813
> 
> 标签：php, model-view-controller, authentication, cakephp-2.0

CakePHP Auth loginRedirect 错误/总是重定向到“用户/登录”，而我放置了不同的控制器。我的意思是，当我打开禁止页面时（不允许/需要登录）

```
$this->Auth->allow('index', 'profile', 'view', 'register'); 
```

它必须重定向到“玩家/索引”。我把登录重定向到“玩家”，

```
'loginRedirect' => array('controller' => 'Players', 'action' => 'index'), 
```

但它不起作用。它总是重定向到“用户/登录”而不是“玩家/索引”，而我写的是“'loginRedirect' => array('controller' => 'Players', 'action' => 'index')”。

这是我的代码：

```
class AppController extends Controller {
public $components = array(
    'Session',
    'Auth'=>array(
        'loginRedirect' => array('controller' => 'Players', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'Players', 'action' => 'index'),
        'authError'=>"Anda tidak dapat mengakses halaman.",
        'authorize'=>array('Controller')
    )
);

public function isAuthorized($user) {
    return true;
}

public function beforeFilter() {
    $this->Auth->allow('index', 'profile', 'view', 'register');
    $this->set('logged_in', $this->Auth->loggedIn());
    $this->set('current_user', $this->Auth->user());
}} 
```

我的桌子名称：玩家

为什么结果总是重定向到“用户/登录”而不是“玩家/”或“玩家/索引”？请告诉我为什么会发生这种情况以及我该如何解决。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:02:39.443

我被同样的问题困扰了好几个小时。`beforeFilter`在您的中设置登录操作，`AppController`如下所示：

```
$this->Auth->loginAction = array('controller'=>'yourcontollername', 'action'=>'login'); 
```

我关注了视频[youtube.com/watch?v=zvwQGZ1BxdM](http://www.youtube.com/watch?v=zvwQGZ1BxdM)，请参阅第一个回复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T19:13:49.453

您是否尝试过小写控制器名称？玩家 => 玩家

```
'loginRedirect' => array('controller' => 'players', 'action' => 'index'),
'logoutRedirect' => array('controller' => 'players', 'action' => 'index'), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T08:55:41.087

非常有趣，我遇到了类似的问题 - 登录后重定向到默认主页。我已经尝试了以上所有方法，但没有一个可以解决问题。

最后，我发现登录表单没有正确构建哪个动作和控制器没有设置。因此，html 表单在发布时指向“/”。但是，系统仍然设法登录到正确的帐户，但重定向功能在这种情况下不起作用。

这可能是你需要研究的东西。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T18:30:33.917

答案就在 AppController.php 中的 beforeFilter 函数中。您必须为 Auth 对象设置限额。

```
public function beforeFilter() {
    // put in the functions that point to the views you want to be able to see 
    // without logging in. This works for all controllers so be careful for naming
    // functions the same thing. (all index pages are viewable in this example)
    $this->Auth->allow('index', 'thePageIWantToSee', 'userAdd', 'landingPage');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-18T09:37:08.143

只需在用户/播放器控制器中使用 login() 函数。使用 if cause 您可以重定向到不同的页面。

```
public function login()
    {
        if ($this->request->is('post')) {
            $user = $this->Auth->identify();
            if ($user) {
                $this->Auth->setUser($user);
                return $this->redirect('/account'); //$this->redirect($this->Auth->redirectUrl());
            }                
            return $this->redirect( ['controller' =>'pages', 'action' => 'login-fail']);
        }
    } 
```

CakePHP 3.2 中使用的示例

# javascript - 如何使用内联 javascript 代码自动居中弹出窗口

> ID：12444275
> 
> 赞同：0
> 
> 时间：2012-09-16T03:37:37.277
> 
> 标签：javascript

我有一个在 AJAX 中使用的内联 javascript，希望在打开时自动居中，但只在内联脚本中进行更改。那可能吗？这是我的代码：

```
<a href='javascript:void(0)' title='owner' onclick=\"window.open('owner.html','owner','height=320, width=300,location=no,scrollbars=yes')\ >some text</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T17:48:05.447

我使用了逼真的答案并使它起作用：

```
<a onclick="javascript:void window.open('http://www.google.com','1380642102467','width=400,height=300,resizable=1,left='+(screen.width/2-200)+',top='+(screen.height/2-150));return false;" href="http://www.google.com"><u>CLICK HERE</u></a> 
```

主要区别在于本节：

```
left='+(screen.width/2-200)+'
top='+(screen.height/2-150) 
```

我发现如果在 (screen.) 参数中减去一半的窗口大小，则减去窗口大小的差异是有效的。-200 和 -150 部分是从我的弹出窗口大小的一半计算出来的（在“宽度”和“高度”中手动输入）。我不知道是否有基于不同弹出窗口大小的更动态的方法，但我个人不需要它来做到这一点，并且可以输入静态值。

我也需要它完全内联。我需要使用它的地方不允许更改头部或添加其他文件。我仅限于上传正文 HTML。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T03:53:51.520

您需要计算`left`并将`top`计算值作为参数提供给`window.open()`调用。我不确定您为什么希望 JavaScript 内联，最好在单独的调用中完成，以便您可以从所有地方调用相同的函数。

```
Left = (screen.width / 2) - (Provided Width of the Popup / 2)
Top  = (screen.height / 2) - (Provided Height of the Popup / 2) 
```

仅发布相关代码 -

```
window.open('owner.html','owner','height=320, width=300,location=no,scrollbars=yes,left=' + (screen.width/2)-(300/2) + ',top=' + (screen.height/2)-(320/2)) 
```

# module - 如何在内核模块中打印 proc/meminfo 的内容？

> ID：12444276
> 
> 赞同：0
> 
> 时间：2012-09-16T03:38:02.650
> 
> 标签：module, kernel, procfs

我目前正在制作一个内核模块，该模块将使用 printk 将 proc/meminfo（具体为 SwapTotal）的某些内容打印到内核中。不幸的是，网上所有的指南都教你如何打开自己的 procfs 文件。是否可以修改 proc/meminfo 的 proc_read 以仅查看 SwapTotal 组件？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:30:50.483

这是您感兴趣的文件：

[http://lxr.linux.no/linux+v3.5.4/fs/proc/meminfo.c](http://lxr.linux.no/linux+v3.5.4/fs/proc/meminfo.c)

# c# - 为什么新表单在我第二次单击确定时关闭并且文本框为空？

> ID：12444286
> 
> 赞同：1
> 
> 时间：2012-09-16T03:40:43.600
> 
> 标签：c#, winforms

```
private void button2_Click(object sender, EventArgs e)
        {
            cl = new ChangeLink();
            cl.StartPosition = FormStartPosition.CenterParent;
            DialogResult dr = cl.ShowDialog(this);
            if (dr == DialogResult.Ok)
            {
                if (cl.getText() == "")
                {
                    MessageBox.Show("The TextBox Cannot Be Empty");
                    cl.ShowDialog(this);
                    return;
                }
                else
                {
                    label4.Text = cl.getText();
                    cl.Close();
                }
            }
            else if (dr == DialogResult.Cancel)
            { 
                cl.Close();
            } 
```

cl 是我从中获取文本的新表格。现在我检查如果 cl.getText() 为空“”，它会向用户发送一条消息，当用户在消息框上单击“确定”时，我希望它返回并再次显示新的表单对话框。当我单击一次新表单的确定按钮并显示messaeBox消息然后再次向我显示新表单的对话框结果框但是当我再次单击确定并且文本框仍然为空时它不会再次显示消息框只需关闭新表单并将 label4 文本设置为空。

我希望每次用户单击“确定”并且文本框为空时，它将一直显示新的“表单”文本框对话框，直到用户单击“取消”或在文本框中放入某些内容，然后单击“确定”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T03:55:04.787

如果您在第二个表格中进行检查，它会干净得多。您需要将代码添加到 Form2 的 OK 按钮的 Click 事件中。`DialogResult`确保从 OK 按钮属性中删除默认值。

```
private void button2_Click(object sender, EventArgs e)
{
    if(!string.IsNullOrEmpty(textBox1.Text))
        DialogResult = DialogResult.OK;
} 
```

# android - Android拖放API：我可以强制只向一个方向拖动吗？

> ID：12444287
> 
> 赞同：2
> 
> 时间：2012-09-16T03:40:46.883
> 
> 标签：android, drag

我在视图上使用 Android 拖动 API (startDrag)，但我需要使视图只能在一个方向上拖动（即仅底部）。有任何想法吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T21:25:15.160

您可以尝试我的解决方案，只更改所需的边距 - 水平拖动的左和右，或垂直拖动的顶部和底部：

[https://stackoverflow.com/a/18806475/878126](https://stackoverflow.com/a/18806475/878126)

# iphone - Xcode 4.4.1 如何通过标签刷新全局变量？

> ID：12444288
> 
> 赞同：1
> 
> 时间：2012-09-16T03:40:55.493
> 
> 标签：iphone, objective-c

`Float32`我有一个存储一些数据的全局变量。我的视图控制器中有一个标签和一个按钮。我希望标签在按下按钮时自动更新全局变量的内容。我该怎么做呢？我有一个与按钮关联的功能：

```
- (IBAction)Start:(id)sender {

    // some code

    NSString *dBstring = [[NSString alloc] initWithFormat:@"%.0f dB", decibels];

    self.output.text = dBstring;

} 
```

但是运行时标签上的值不会更新。

我试图将代码放在`viewDidLoad`函数中，但它不起作用。

我应该怎么办？

任何信息表示赞赏。

```
global variable:

extern Float32 decibels; 
```

# java - 修改 JTree 中的焦点遍历

> ID：12444291
> 
> 赞同：0
> 
> 时间：2012-09-16T03:42:00.767
> 
> 标签：java, swing, focus, jtree, setfocus

我有一个运行良好的 JTree，混合了叶节点和非叶节点。当我给树根焦点时，向下箭头和向上箭头键会做明显的事情。我想做的一个小改变是让向上/向下箭头导致焦点转到下一个非叶节点（即跳过叶节点）。我可以（我认为）通过让持有树的 JPanel 响应向上和向下箭头键、检查节点并相应地移动来了解如何做到这一点，但这似乎是在重新发明焦点子系统。

有没有更简单的方法，也许是树的新焦点遍历策略？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T09:30:44.100

面板都与树内部导航无关，也与焦点无关。这一切都是通过树的 actionMap 中的 keyBindings 处理的。因此解决方案是用自定义操作替换默认导航操作。下面的代码片段通过委托给默认值来做到这一点：

```
 final JXTree tree = new JXTree();
    tree.expandAll();
    final Action delegate = tree.getActionMap().get("selectNext");
    Action action = new AbstractAction("navigateNonLeaf") {

        @Override
        public void actionPerformed(ActionEvent e) {
            boolean searching = true;
            while (searching) {
                TreePath old = tree.getLeadSelectionPath();
                delegate.actionPerformed(e);
                TreePath path = tree.getLeadSelectionPath();
                // nothing happened, back off
                if (areSame(old, path)) break;
                Object last = path.getLastPathComponent();
                if (!tree.getModel().isLeaf(last)) {
                    searching = false;
                }
            }
        }

        // TBD: implement "end of tree"
        private boolean areSame(TreePath old, TreePath path) {
            return path.equals(old);
        }
    };
    tree.getActionMap().put("selectNext", action); 
```

# c - 制作/制作安装到自定义目录

> ID：12444293
> 
> 赞同：0
> 
> 时间：2012-09-16T03:42:45.400
> 
> 标签：c, shell, gcc, makefile

我正在尝试将它安装[到](http://www.surdeanu.name/mihai/swirl/index.php)我通过共享托管公司拥有的网络服务器上。在安装说明中，它告诉我导航到程序的目录，然后使用 shell 命令 ./configure、make 和 make install 来安装程序。当我输入 ./configure 时，一切正常。但是当我输入make时，它说

```
cd . && /bin/sh /home/blahblahname/swirl-1.1.0/config/missing --run aclocal-1.10
/home/blahblahname/swirl-1.1.0/config/missing: line 54:
aclocal-1.10: command not found WARNING: `aclocal-1.10' is missing on
your system.  You should only need it if
         you modified `acinclude.m4' or `configure.ac'.  You might want
         to install the `Automake' and `Perl' packages.  Grab them from
         any GNU archive site.
cd . && /bin/sh /home/blahblahname/swirl-1.1.0/config/missing --run automake-1.10 --gnu
/home/blahblahname/swirl-1.1.0/config/missing: line 54: automake-1.10: command not found
WARNING: `automake-1.10' is missing on your system.  You should only need it if
         you modified `Makefile.am', `acinclude.m4' or `configure.ac'.
         You might want to install the `Automake' and `Perl' packages.
         Grab them from any GNU archive site.
/home/blahblahname/swirl-1.1.0/config/missing: line 185:
/usr/bin/find: Permission denied
cd . && /bin/sh /home/blahblahname/swirl-1.1.0/config/missing --run autoconf autoconf:
configure.in: No such file or directory make: *** [configure] Error 1 
```

与 make install 相同。看起来我无权访问它试图安装到的目录。有没有办法在不访问该目录的情况下让它工作？也许我可以以某种方式设置自定义制作/制作安装位置？

# asp.net - ASP.NET 网站没有发布选项

> ID：12444295
> 
> 赞同：0
> 
> 时间：2012-09-16T03:43:25.867
> 
> 标签：asp.net, web, webforms

我接手了一个由另一个开发人员开发的项目。客户端需要对站点进行一些更改，因此我获得了源代码并发现它是作为 ASP.NET 网站项目（而不是 Web 应用程序）开发的。查看 FTP 站点，文件背后的每个代码都被编译为 bin 文件夹中的 dll。

我使用 Web Developer 2012 Express 打开了网站，进行了修改，甚至成功地调试了应用程序，一切看起来都很好。问题是我不知道如何发布它！当我构建网站时，应用程序的目录结构中不会生成任何 dll。此外，没有构建菜单，因此没有构建 > 发布选项来发布网站。

我已经使用 APS.NET MVC 构建和部署了主要应用程序，但我一生都无法弄清楚如何部署这个简单的网站项目，因为没有创建 dll。

如何发布或部署没有 Build > Publish 选项且在构建时没有创建 dll 的网站项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:49:46.033

我认为这是视觉工作室表达的东西。我在家里没有快速构建菜单，但在工作中它在项目中显示得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:34:02.783

您是否尝试在解决方案资源管理器中右键单击该站点并在那里观察任何可能的“发布站点”选项？

否则，您可以尝试将文件直接复制到网络服务器上站点的根文件夹中。

# jquery - JQuery 数据表添加新行

> ID：12444296
> 
> 赞同：6
> 
> 时间：2012-09-16T03:43:31.657
> 
> 标签：jquery, html, datatables, html-table, row

我正在创建一个注册页面，如果他们愿意，最多可以注册 20 个人。所以我有这些文本框：

```
First Name: <br/><input type="text" name="fname" id="fname" /> <br/>
Last Name: <br/><input type="text" name="lname" id="lname" /> <br/>
Email: <br/><input type="text" name="email" id="email"/> <br/> 
```

这是我的 html 表和我的 DataTables 的 JQuery 初始化：

```
<div id="tables">
    <table id="table" border="1">
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
            </tr>
        </thead>
    </table>
</div>

$('#reg_more').dataTable({
    "bLengthChange": false,
    "bInfo": false
}); 
```

现在我想放一个添加按钮，以便用户可以输入名字和姓氏，以及电子邮件并点击添加，它将被放入表格中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-16T03:56:30.263

```
$(document).ready(function() {
    $('#example').dataTable();
    $('#addbtn').click(addrow);
} );

function addrow() {
    $('#example').dataTable().fnAddData( [
        $('#fname').val(),
        $('#lname').val(),
        $('#email').val() ] );

} 
```

您需要在按钮单击中调用 addrow() 。

在您的 html 代码中添加此按钮

```
<input type="button" value="add" id="addbtn" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-05T15:43:28.760

这是现在在 DataTables 1.10 中完成的方式

```
<input type="button" value="add" id="addbtn" />

var dTable = $('#example').DataTable();
$('#addbtn').on( 'click', function () {
    dTable.row.add([
        $('#fname').val(),
        $('#lname').val(),
        $('#email').val() 
    ]).draw();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T10:05:04.993

这也可能会有所帮助，但有时并非总是如此。我自己调试过这个，即使你有更多的数据也不会花费太多时间。

```
var table = $(".tableclassName")["1"]
var tableClone = $(".tableclassName")["3"]
$(yournewrowtext).insertAfter(table.children["1"].children[currentRowId]);
$(yourfirstcolumn).insertAfter(tableClone.children["1"]. 
children[currentRowId]); 
```

注意：如果您不使用固定列，则可以删除此行 $(yourfirstcolumn).insertAfter(tableClone.children["1"].

# deployment - 使用 capistrano + Nginx + Passenger + MYSQL 将 Rails 部署到 VPS

> ID：12444297
> 
> 赞同：4
> 
> 时间：2012-09-16T03:43:40.223
> 
> 标签：deployment, nginx, ruby-on-rails-3.2, capistrano, passenger

这是我第一次部署 Rails 应用程序，我发现这个过程非常令人沮丧。出于工作相关的原因，我们使用带有 Ubuntu 12.04 LTS（Precise Pangolin）和 MYSQL 的 Rackspace 云，而不是 Heroku 路由。

我一直试图解决这个问题 2 多天，我终于转向社区寻求帮助。目前我收到“我的服务器上未找到 404 错误”

我已经关注了 Ryan 的“部署到 VPS”、“Capistrano 食谱”、[本教程](http://excid3.com/blog/setting-up-ubuntu-12-04-with-ruby-1-9-3-nginx-passenger-and-postgresql-or-mysql/)以及 google 上的其他内容等的截屏视频，但我还没有完全了解。

我设法安装了以下内容：

*   节点.js
*   虚拟机
*   ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]
*   导轨 3.2.8
*   MYSQL
*   乘客
*   Nginx

我很确定我在这里的 Capistrano Deployer 中遗漏了一些简单的东西：

```
require "bundler/capistrano"

server "198.101.242.242", :web, :app, :db, primary: true

set :application, "myapp"
set :user, "deployer"
set :deploy_to, "/home/#{user}/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:xxxx/#{application}.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

# if you want to clean up old releases on each deploy uncomment this:
after "deploy", "deploy:cleanup"

# if you're still using the script/reaper helper you will need
# these http://github.com/rails/irs_process_scripts

# If you are using Passenger mod_rails uncomment this:
namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

在部署之前我应该​​做些什么吗？

以下是 Nginx 错误日志：

```
2012/09/16 23:22:17 [error] 13939#0: *1 "/home/deployer/myapp/public/index.html" is not found (2: No such file or directory), client: ip, server: localhost, request: "GET / HTTP/1.1", host: "ip"
2012/09/16 23:22:17 [error] 13939#0: *1 open() "/home/deployer/myapp/public/favicon.ico" failed (2: No such file or directory), client: ip, server: localhost, request: "GET /favicon.ico HTTP/1.1", host: "65.61.189.109"
2012/09/16 23:22:19 [error] 13939#0: *1 "/home/deployer/myapp/public/index.html" is not found (2: No such file or directory), client: ip, server: localhost, request: "GET / HTTP/1.1", host: "ip"
2012/09/16 23:22:19 [error] 13939#0: *1 open() "/home/deployer/myapp/public/favicon.ico" failed (2: No such file or directory), client: ip, server: localhost, request: "GET /favicon.ico HTTP/1.1", host: "ip" 
```

Nginx 服务器配置文件：

```
 #user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    passenger_root /home/deployer/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17;
    passenger_ruby /home/deployer/.rvm/wrappers/ruby-1.9.3-p194/ruby;

    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    server {

      listen 80;
      server_name localhost;
      location / {
            root /home/deployer/myapp/public;   # <--- be sure to point to 'public'!
      }
      passenger_enabled on;

        # listen       80;
        # server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        # location / {
        #     root   html;
        #     index  index.html index.htm;
        # }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        # error_page   500 502 503 504  /50x.html;
        # location = /50x.html {
        #     root   html;
        # }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #    deny  all;
        #}
    }

   # server {
   #    listen 80;
   #    server_name localhost;
   #      location / {
   #            root /home/deployer/myapp/public;   # <--- be sure to point to 'public'!
   #    }
   #      passenger_enabled on;
   # }

    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

    # HTTPS server
    #
    #server {
    #    listen       443;
    #    server_name  localhost;

    #    ssl                  on;
    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;

    #    ssl_session_timeout  5m;

    #    ssl_protocols  SSLv2 SSLv3 TLSv1;
    #    ssl_ciphers  HIGH:!aNULL:!MD5;
    #    ssl_prefer_server_ciphers   on;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T23:51:57.260

好的，所以我最终通过反复试验和[牛肉干的](https://stackoverflow.com/users/536770/beef-jerky)评论找出了问题所在。

第一个问题是 capistrano 无法从我的应用程序中安装一些具有依赖项的 gem。所以我将它们安装在生产环境中……特别是 rvm capistrano gem 和 rmagick。RVM Capistrano gem 是我部署时遇到错误的主要问题和原因。rmagick 是在修复了我通过安装它的依赖项解决的 rvm 问题之后出现的。

我遇到的第二个问题是指向我的应用程序文件夹 myapp/public 而不是 Nginx 服务器配置文件中的当前版本 myapp/current/public。所以我保留了现有的服务器块并将我的设置放在里面，然后它就可以工作了。以下是 Nginx 服务器配置文件的设置

```
server {

      listen 80;
      server_name localhost;
      root /home/deployer/banking_analytics/current/public;   # <--- be sure to point to 'public'!
      passenger_enabled on;

        # listen       80;
        # server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        # location / {
        #     root   html;
        #     index  index.html index.htm;
        # }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        # error_page   500 502 503 504  /50x.html;
        # location = /50x.html {
        #     root   html;
        # }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #    deny  all;
        #}
    }

   # server {
   #    listen 80;
   #    server_name localhost;
   #      location / {
   #            root /home/deployer/banking_analytics/public;   # <--- be sure to point to 'public'!
   #    }
   #      passenger_enabled on;
   # }

    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

    # HTTPS server
    #
    #server {
    #    listen       443;
    #    server_name  localhost;

    #    ssl                  on;
    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;

    #    ssl_session_timeout  5m;

    #    ssl_protocols  SSLv2 SSLv3 TLSv1;
    #    ssl_ciphers  HIGH:!aNULL:!MD5;
    #    ssl_prefer_server_ciphers   on;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-20T20:06:18.820

前段时间我在第一次部署时遇到了类似的错误。

就我而言，我在文件 mod-http-passenger.conf 中设置了错误的路径

我的建议是在 nginx 设置中启用passenger_friendly_error_pages 以获取更多错误信息。在某些情况下，它似乎比日志更好。

在服务器端

```
sudo vim /etc/nginx/sites-enabled/myApp 
```

添加

```
passenger_friendly_error_pages on; 
```

# php - 在注册表单中标记用户输入中的错误字段的推荐方法？

> ID：12444299
> 
> 赞同：1
> 
> 时间：2012-09-16T03:44:13.183
> 
> 标签：php, javascript, forms, validation

这是一个相当开放的问题，但是我想知道在注册表格中验证用户输入的推荐方法是什么，并向用户传达在尝试再次提交之前需要更改哪些信息（如果有的话）。现在，我的表单设置了一些 HTML 属性，例如 maxlength，但这显然不可靠。所以在 PHP 代码中，我让它过滤掉超过长度的字符串，清理输入等等。

但是，如果给定的输入无效，我让 PHP 代码将用户重定向回注册页面，该页面正常显示，没有用户先前的输入，也没有任何需要更改的指示。

这显然是不可接受的，所以我需要知道我是否应该使用 JavaScript 作为验证和显示指标的中介手段，或者我是否应该使用会话变量来中继先前的输入，并指示要显示哪些字段的错误。或者，完全是别的东西。

希望我的问题很清楚，非常感谢所有帮助！

编辑：禁用 JavaScript 的用户是否应该考虑此类事情的现实问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:57:43.310

你的答案很简单：

***两者***。

首先，在客户端进行初始验证。这与进行用户检查/身份验证/权限级别无关（至少现在还没有）。如果您使用 AJAX 调用来检查是否有人试图使用已注册的电子邮件地址或那种“安全”的电子邮件地址创建帐户，则可能会有例外情况（清理... ...一切）查看。

它是关于：“这个字段是否通过了白痴检查”。

这就是 JS-validation 应该做的。如果失败，请在该字段上设置 css 类，让人们从视觉上知道有什么事情发生了。查看 css`:before`和`:after`伪选择器，它们可以让你做一些事情，比如在你设计的东西之前/之后添加文本或图像（`input`在这种情况下）

```
input.valid:before { content : url("checkmark.png") }
input.invalid:after { content : url("big-red-x.png") } 
```

您可以动态添加工具提示或消息横幅，以提供有关错误的用户友好信息。

所有这些东西都可以由知道如何提交 POST 请求的人解决，使用许多对开发人员友好的 Web 解决方案之一（或者只是非常无聊的人，他们将使用自己服务器上的脚本来完成，如果你的网站是开放的）。

这就是为什么您仍然需要使用 PHP 进行验证。

这也是您清理***一切***（或使用 PDO 作为数据库访问层，并使用他们预先清理的解决方案）的时候。然后你就可以开始在你的数据库中寻找权威之类的东西了。

如果在 PHP 方面出现错误，请将它们转储到它们已经存在的页面上，并已填充它们的旧值。

从那里，要么触发 JS 验证错误，并带有一些服务器端消息... ...并再次运行 JS 验证，以获取字段中的错误 ...而且（对于非 JS 人员，尽管您可以在页面加载时隐藏/删除它）在某处包含一个静态横幅，用于保存您在 PHP 中遇到的错误列表。

这可以深入到你想要的深度，你可以将所有这些设置为通过一系列 AJAX 调用运行，PHP 错误在错误数组中返回，返回到页面，进行解析和应用到不适当的领域，或在某处放置中央横幅......

就像你说的，这是一个非常开放的问题。

因此，就客户而言，您的高层次目标是： 1\. 在出现错误时提供响应式（/即时）用户友好的反馈 2\. 使反馈简洁、明确和可操作 3\. 尽可能多地做不会让我重写所有内容，或在页面之间来回导航——最终，梦想是在填写表单和进入我试图访问的内容之间进行 0 页面更改。

# grails - Grails Spring Security 自定义 UserDetailsS ervice（电子邮件代替用户名的目标）

> ID：12444305
> 
> 赞同：3
> 
> 时间：2012-09-16T03:46:33.820
> 
> 标签：grails, spring-security

我正在使用`Grails Spring Security Plugin 1.2.7.3`并希望用户通过电子邮件地址和密码进行身份验证。我希望电子邮件地址成为主要登录 ID。

我遇到了以下[关于不区分大小写的用户名的 Nabble 帖子](http://grails.1312388.n4.nabble.com/Spring-Security-Plugin-Case-insensitive-usernames-td3811436.html)，原始发帖人正试图这样做。但是，我对以下几点感到有些困惑：

1.  我知道我需要编写自己的实现`UserDetailsService`并将其注册到`grails-app/conf/spring/resources.groovy`.

    但是，我不确定自定义实现`UserDetailsService`应该去哪个文件夹（最佳实践）。我的猜测是`/grails-app/services`,`/grails-app/utils`或`/src/groovy`. 有没有人这样做过，哪里是定制的最佳地点`UserDetailsService`？

    我在文档中阅读了这一章：http: [//grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsS​​ervice.html](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsService.html)但我并没有真正看到关于将其放入哪个 Grails 文件夹。

2.  我通过 s2 命令创建了我的用户域类：

    ```
    s2-quickstart com.philiptenn.security User Role Requestmap 
    ```

    如果我要重命名该字段`User.username`以`User.email`使我的代码更清晰，我会受到伤害吗？

    我在这个领域做了一个 Find Usages，一个在**DefaultSecurityConfig.groovy**中突出：`userLookup.usernamePropertyName = 'username'`

    我可以将其更新为： **DefaultSecurityConfig.groovy**：`userLookup.usernamePropertyName = 'email'`

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T05:17:30.410

正如您所指出的，您可以覆盖自己的默认安全配置`Config.groovy`，选项都以 开头`grails.plugins.springsecurity`，所以它是`grails.plugins.springsecurity.userLookup.usernamePropertyName = 'email'`（[文档](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/single.html#1.1%20Configuration%20Settings%20Now%20in%20Config.groovy)）。这是我要尝试的第一件事。如果您查看 GormUserDetailsS​​ervice 的来源，即默认的[userDetailsS](https://github.com/grails-plugins/grails-spring-security-core/blob/master/src/groovy/org/codehaus/groovy/grails/plugins/springsecurity/GormUserDetailsService.groovy#L60) ​​ervice，您会看到它使用该属性进行查找。

# c - 以像素为单位确定棋盘尺寸

> ID：12444307
> 
> 赞同：1
> 
> 时间：2012-09-16T03:46:46.463
> 
> 标签：c, opencv, camera-calibration

类似于用棋盘校准单个相机 2D 图像，我希望以像素为单位确定棋盘（或单个正方形）的宽度/高度。

我有一个垂直对准地面的相机，确保与下面的表面完全齐平。我正在使用相机来确定连续帧之间的平移（使用傅立叶相位相关成功实现），目前我的结果返回以像素为单位的平移，但是我想使用类似于校准的技术，我将相机移动到棋盘平放在地面上，以相对于我的图像高度和宽度自动确定棋盘的大小（以像素为单位）。

以毫米为单位知道棋盘的大小，然后我可以将像素单位转换为以毫米为单位的现实世界单位，即，1 个像素将代表与地面上相机高度成比例的距离。这将允许我以像素为单位的转换转换为以毫米为单位的转换，每次我改变相机的高度时都重新校准。

实现这一目标的推荐方法是什么？当然，它一定比单相机 2D 校准更简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:56:42.340

OpenCV 可以为您提供棋盘角的位置[`cv::findChessboardCorners()`](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html#cv-findchessboardcorners)。

我不确定透视失真是否会影响您的计算，但如果棋盘在相机下方完全对齐，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T03:50:11.013

这只是一个想法，所以不要打我..但也许使用棋盘的自然对比？

“在某些时候，它会从亮像素切换到暗像素，这应该会发生（不记得棋盘上的列数）次。” 应该是一个可行的算法。

# node.js - Node.js - 在生产模式下动态禁止一些公共路径

> ID：12444310
> 
> 赞同：0
> 
> 时间：2012-09-16T03:48:12.387
> 
> 标签：node.js, path, public, production, restrict

我将 node.js 与 express.js 一起使用。这是我的公共目录结构：

```
public/
    js/
    css/
    images/
    built/
        main-built.js
        main-built.css
    index.html
    dev.html 
```

Where链接到and`index.html`中的脚本，而链接到and 。当应用程序作为生产模式启动时，如何动态禁止 ( 和 )下的某些 路径？`js/``css/``dev.html``main-built.js``main-built.css``public/``js/*``css/*``dev.html`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T05:24:52.347

如果你使用 Express，你可以用一小块中间件来阻止它们。

```
app.configure(function() {
  app.use(function(req, res, next) {
    if(process.env.NODE_ENV === 'production') {
      if( /* check req.url for blocked content */) {
        res.send('Access Denied');
      }
    }
    else {
      // Not in production, proceed to next handler.
      next();
    }
  });
  app.use(express.static(__dirname + '/public'));
}); 
```

# java - java processbuilder readline cpu密集型

> ID：12444311
> 
> 赞同：0
> 
> 时间：2012-09-16T03:48:18.367
> 
> 标签：java, readline, processbuilder

使用 ProcessBuilder 从 JAVA 中运行外部 C 代码。（编译的）C 代码需要大约 1 秒才能产生输出 - 相对较慢。

我注意到的是，在 C 代码完成之前，BufferedReader Readline 似乎是相当 CPU 密集型的。而且由于我必须每 5 秒运行一次外部 C 代码，因此 CPU 利用率会增加。这是readline代码：

```
 BufferedReader br = null;
        try {
            br = new BufferedReader(new InputStreamReader(in));
            String line = null;
            while ( (line = br.readLine()) != null) {
                this.pw.add(line);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                br.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } 
```

[我可以发布整个代码 - 但是，它与您在此页面](http://thilosdevblog.wordpress.com/2011/11/21/proper-handling-of-the-processbuilder/)上看到的非常相似。

[这是 JProfiler 屏幕截图。](http://imgur.com/Wa0Io)

有什么建议吗？

# c - c select() 读取直到空字符

> ID：12444312
> 
> 赞同：0
> 
> 时间：2012-09-16T03:48:44.693
> 
> 标签：c, sockets, proxy

我在 c 中实现了一个代理，并且正在使用 select() 来不阻塞 I/O。有多个客户端连接到代理，因此我在消息中包含套接字描述符 # 以便我知道将来自服务器的回复消息转发到哪个套接字。

但是，有时 read() 不会收到完整的消息直到空字符，但会在下一轮 select() 中发送消息的其余部分。我想立即收到完整的消息，以便知道将回复转发到哪个套接字（缓冲不起作用，因为当有多个客户端时，我不知道哪个消息属于哪个）。有没有办法在等待空字符到达时不阻塞读取？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T04:10:09.680

TCP 中没有消息之类的东西。它是一个字节流协议。你写字节，它发送字节，你读字节。无法保证您在任何时候将收到多少字节，并且无法保证单次写入写入的数据量与单次读取读取的数据量之间的关联。如果你想要消息，你必须自己实现它们。任何给定的读取都可以读取零个、一个或多个字节，直到缓冲区的长度。这可能是半条消息。可能是一条半消息。它是什么完全取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:29:58.080

如果您正在处理单个消息，请使用 ZeroMQ。它具有大量语言的绑定，并且是网络的一个很好的抽象。事实上，它可以为你处理这个代理模型。

# python - TypeError：只有一个元素的整数数组可以转换为索引

> ID：12444316
> 
> 赞同：31
> 
> 时间：2012-09-16T03:50:00.703
> 
> 标签：python, scikit-learn, feature-selection

使用交叉验证执行递归特征选择时出现以下错误：

```
Traceback (most recent call last):
  File "/Users/.../srl/main.py", line 32, in <module>
    argident_sys.train_classifier()
  File "/Users/.../srl/identification.py", line 194, in train_classifier
    feat_selector.fit(train_argcands_feats,train_argcands_target)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/sklearn/feature_selection/rfe.py", line 298, in fit
    ranking_ = rfe.fit(X[train], y[train]).ranking_
TypeError: only integer arrays with one element can be converted to an index 
```

产生错误的代码如下：

```
def train_classifier(self):

    # Get the argument candidates
    argcands = self.get_argcands(self.reader)

    # Extract the necessary features from the argument candidates
    train_argcands_feats = []
    train_argcands_target = []

    for argcand in argcands:
        train_argcands_feats.append(self.extract_features(argcand))
        if argcand["info"]["label"] == "NULL":
            train_argcands_target.append("NULL")
        else:
            train_argcands_target.append("ARG")

    # Transform the features to the format required by the classifier
    self.feat_vectorizer = DictVectorizer()
    train_argcands_feats = self.feat_vectorizer.fit_transform(train_argcands_feats)

    # Transform the target labels to the format required by the classifier
    self.target_names = list(set(train_argcands_target))
    train_argcands_target = [self.target_names.index(target) for target in train_argcands_target]

    ## Train the appropriate supervised model      

    # Recursive Feature Elimination
    self.classifier = LogisticRegression()
    feat_selector = RFECV(estimator=self.classifier, step=1, cv=StratifiedKFold(train_argcands_target, 10))

    feat_selector.fit(train_argcands_feats,train_argcands_target)

    print feat_selector.n_features_
    print feat_selector.support_
    print feat_selector.ranking_
    print feat_selector.cv_scores_

    return 
```

我知道我还应该对 LogisticRegression 分类器的参数执行 GridSearch，但我认为这不是错误的根源（或者是吗？）。

我应该提一下，我正在测试大约 50 个功能，并且几乎所有功能都是分类的（这就是我使用 DictVectorizer 对它们进行适当转换的原因）。

您可以给我的任何帮助或指导都非常受欢迎。谢谢！

**编辑**

以下是一些训练数据示例：

```
train_argcands_feats = [{'head_lemma': u'Bras\xedlia', 'head': u'Bras\xedlia', 'head_postag': u'PROP'}, {'head_lemma': u'Pesquisa_Datafolha', 'head': u'Pesquisa_Datafolha', 'head_postag': u'N'}, {'head_lemma': u'dado', 'head': u'dado', 'head_postag': u'N'}, {'head_lemma': u'postura', 'head': u'postura', 'head_postag': u'N'}, {'head_lemma': u'maioria', 'head': u'maioria', 'head_postag': u'N'}, {'head_lemma': u'querer', 'head': u'quer', 'head_postag': u'V-FIN'}, {'head_lemma': u'PT', 'head': u'PT', 'head_postag': u'PROP'}, {'head_lemma': u'participar', 'head': u'participando', 'head_postag': u'V-GER'}, {'head_lemma': u'surpreendente', 'head': u'supreendente', 'head_postag': u'ADJ'}, {'head_lemma': u'Bras\xedlia', 'head': u'Bras\xedlia', 'head_postag': u'PROP'}, {'head_lemma': u'Pesquisa_Datafolha', 'head': u'Pesquisa_Datafolha', 'head_postag': u'N'}, {'head_lemma': u'revelar', 'head': u'revela', 'head_postag': u'V-FIN'}, {'head_lemma': u'recusar', 'head': u'recusando', 'head_postag': u'V-GER'}, {'head_lemma': u'maioria', 'head': u'maioria', 'head_postag': u'N'}, {'head_lemma': u'PT', 'head': u'PT', 'head_postag': u'PROP'}, {'head_lemma': u'participar', 'head': u'participando', 'head_postag': u'V-GER'}, {'head_lemma': u'surpreendente', 'head': u'supreendente', 'head_postag': u'ADJ'}, {'head_lemma': u'Bras\xedlia', 'head': u'Bras\xedlia', 'head_postag': u'PROP'}, {'head_lemma': u'Pesquisa_Datafolha', 'head': u'Pesquisa_Datafolha', 'head_postag': u'N'}, {'head_lemma': u'revelar', 'head': u'revela', 'head_postag': u'V-FIN'}, {'head_lemma': u'governo', 'head': u'Governo', 'head_postag': u'N'}, {'head_lemma': u'de', 'head': u'de', 'head_postag': u'PRP'}, {'head_lemma': u'governo', 'head': u'Governo', 'head_postag': u'N'}, {'head_lemma': u'recusar', 'head': u'recusando', 'head_postag': u'V-GER'}, {'head_lemma': u'maioria', 'head': u'maioria', 'head_postag': u'N'}, {'head_lemma': u'querer', 'head': u'quer', 'head_postag': u'V-FIN'}, {'head_lemma': u'PT', 'head': u'PT', 'head_postag': u'PROP'}, {'head_lemma': u'surpreendente', 'head': u'supreendente', 'head_postag': u'ADJ'}, {'head_lemma': u'Bras\xedlia', 'head': u'Bras\xedlia', 'head_postag': u'PROP'}, {'head_lemma': u'Pesquisa_Datafolha', 'head': u'Pesquisa_Datafolha', 'head_postag': u'N'}, {'head_lemma': u'revelar', 'head': u'revela', 'head_postag': u'V-FIN'}, {'head_lemma': u'muito', 'head': u'Muitas', 'head_postag': u'PRON-DET'}, {'head_lemma': u'prioridade', 'head': u'prioridades', 'head_postag': u'N'}, {'head_lemma': u'com', 'head': u'com', 'head_postag': u'PRP'}, {'head_lemma': u'prioridade', 'head': u'prioridades', 'head_postag': u'N'}]

train_argcands_target = ['NULL', 'ARG', 'ARG', 'ARG', 'NULL', 'NULL', 'NULL', 'NULL', 'NULL', 'NULL', 'NULL', 'NULL', 'ARG', 'ARG', 'ARG', 'ARG', 'NULL', 'NULL', 'NULL', 'NULL', 'ARG', 'NULL', 'NULL', 'NULL', 'NULL', 'NULL', 'ARG', 'NULL', 'NULL', 'NULL', 'NULL', 'ARG', 'ARG', 'NULL', 'NULL'] 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-17T14:05:03.510

我终于解决了这个问题。必须做两件事：

1.  **train_argcands_target**是一个列表，它必须是一个 numpy 数组。我很惊讶在我直接使用估算器之前它运行良好。
2.  出于某种原因（我还不知道为什么），如果我使用由 DictVectorizer 创建的稀疏矩阵，它也不起作用。我必须“手动”将每个特征字典转换为一个特征数组，其中只有整数代表每个特征值。转换过程类似于我在目标值的代码中呈现的过程。

感谢所有试图提供帮助的人！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-10T03:44:35.787

如果还有人感兴趣，

我使用了`CountVectorizer`非常相似的东西，它给了我同样的错误。我意识到矢量化器给了我一个 COO 稀疏矩阵，它基本上是一个坐标列表。COO 矩阵中的元素不能通过行索引访问。最好将其转换为按行索引的 CSR 矩阵（压缩稀疏行）。转换可以很容易地完成`coo_matrix.tocsr()`。不需要其他更改，这对我有用。

# php - Codeigniter：每次刷新页面时都会运行函数

> ID：12444318
> 
> 赞同：2
> 
> 时间：2012-09-16T03:50:30.323
> 
> 标签：php, codeigniter, tankauth

好的，所以我现在有一个测试页面，它只是在测试我的积分系统。几乎当用户按下按钮时，它会给他们 5 分。现在的问题是每次我刷新页面时，用户都会得到 5 分。这怎么了？如有必要，我可以发布库和模型功能。这是控制器和视图：

欢迎.php 视图：

```
Hi, <strong><?php echo $username; ?></strong>! <?php echo $fullname ?> is now logged in now. </br>
You have <?php echo $points; ?> Points.</br>
<?php echo anchor('/auth/logout/', 'Logout'); ?></br>
<?php echo form_open('add_points'); ?>
<?php echo form_submit('/auth/add_points/', 'Get 5 free Points!'); ?>
<?php echo form_close(); ?>
<?php echo var_dump($pointhistory); ?> 
```

Welcome.php 控制器：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class Welcome extends CI_Controller
{
        function __construct()
        {
                parent::__construct();

                $this->load->helper(array('form','url'));
                $this->load->library('tank_auth');
                $this->lang->load('tank_auth');
        }

        function index()
        {
                if (!$this->tank_auth->is_logged_in()) {
                        redirect('/auth/login/');
                } else {
                        $data['user_id']        = $this->tank_auth->get_user_id();
                        $data['username']       = $this->tank_auth->get_username();
                        $data['fullname']       = $this->tank_auth->get_fullname();
                        $data['points']         = $this->tank_auth->get_points();
                        $data['pointhistory']   = $this->tank_auth->get_point_history();
                        $this->load->view('welcome', $data);
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T04:19:58.407

要解决您所拥有的问题，只需检查您的控制器，如果页面有提交给它的帖子，而不仅仅是刷新：

你可以使用这个：

```
if($_POST)
{
   // do something
} 
```

或者

更好的方法是使用 AJAX 调用而不刷新页面。这可能是最好的解决方案。

要在 Codeigniter 中进行 AJAX 发布，您只需要在控制器中调用一个公共函数并回显要返回的值，我会使用 JSON。

jQuery makes this really easy on the client side: [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c - c/c++ 中的 3D 或 2D 图形？

> ID：12444319
> 
> 赞同：-5
> 
> 时间：2012-09-16T03:50:42.413
> 
> 标签：c, graphics

在我的第 4 年项目中，我们正在 vlsi 中进行***遗传算法***，为此我需要从结构程序构建一个电路并打破它并交换部件。

我想知道如何在 C++/C 中做到这一点？我尝试使用***graphics.h***逐行绘制图形，逐圈绘制非常耗时！！！还有其他方法吗？

我使用 turbo C 和 dev c++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T04:01:40.743

你必须在你的代码中画出每一行和每一圈，不会有捷径。不过，我建议使用其他图形库，如 OpenGL。在其他语言中，某些 IDE 具有您不必编写代码但您可以在编辑器窗口上手动设计图形并自行生成其背后的代码的功能。我不确定是否有任何此类用于 c/c++ 的 IDE。

# android - 在 Android 中的 EditText 左侧设置图像

> ID：12444320
> 
> 赞同：17
> 
> 时间：2012-09-16T03:50:48.283
> 
> 标签：android, drawable, android-edittext

我有一个联系表格，我想在其中添加一些图标到我的编辑文本中以获得更好的外观。我想创建如下所示的 EditText。

![在此处输入图像描述](../Images/d86424a3450da85b54c78102d889d505.png)

我有如下所示的 EditText。我得到了类似的结果。我希望图像绝对在左侧，就像上图一样。我知道 EditText 内部使用的是九个补丁图像，我认为这就是结果有些不同的原因。谁能知道如何解决这个问题？

![在此处输入图像描述](../Images/74cc95eca85b7e20d2aee5170e15967c.png)

```
<EditText
            android:id="@+id/name"
            android:layout_width="fill_parent"
            android:layout_height="51dip"
            android:hint="@string/name"
            android:inputType="text"
            android:drawableLeft="@drawable/name_icon_edittext" /> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-16T04:48:48.167

而不是使用`android:drawableLeft="@drawable/name_icon_edittext"`，`ImageView`为`name_icon`. 这样您就可以更好地控制将其放置在`layout`

**注意：**我假设你`layout`是`RelativeLayout`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-04-01T06:16:21.903

如果您想在文本和图像之间添加一些空格，请在 xml 中使用“drawablePadding”属性

```
android:drawablePadding="10dp" 
```

这是如何在 xml 文件中的 edittext 中使用的完整示例

```
 <EditText
                android:id="@+id/edittext"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:drawableLeft="@drawable/ic_left"
                android:drawablePadding="10dp" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-19T09:44:45.127

您可以`android:drawablePadding="10dp"`在 xml 文件中使用属性。无需为图标创建单独的 imagview。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T16:15:20.717

有点旧，但可能供将来参考：

我会自己用你想要的外观做一个 9-patch 图像，保持比例和除图标之外的所有东西，所以你可以自己添加它（并重用背景），`drawableLeft`属性为`EditText`. 这样，只有图像的中间部分会被拉伸，而其余部分将保持不变。

# java - 如何创建一个简单的横向卷轴游戏

> ID：12444321
> 
> 赞同：2
> 
> 时间：2012-09-16T03:51:14.520
> 
> 标签：java, c++, processing, side-scroller

我对游戏编程还是很陌生，我使用过的任何教程都只停留在具有初始屏幕的游戏上。我想开始创建自己的游戏，但我仍然需要学习一些东西。其中之一是如何创建横向卷轴游戏。例如; 马里奥......或任何类型的游戏......

谁能给我一个小例子来创建类似的东西。我没有要求任何特定的语言，因为目前在学校我正在学习 javascript，但我也知道一些 c++/java/processing/objective-c。所以这些语言中的任何一种都可以，我可能可以在其他任何一种语言中实现它......

我一直在寻找一些帮助，但实际上从来没有得到任何帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:21:59.447

无论您选择哪种编程语言，无论您选择使用任何更高级别的图形，甚至是游戏编程库，您需要学习的一项基本技术就是创建侧面运动的错觉。正如所指出的，这可以通过在屏幕中心绘制你的头像然后移动它后面的图像来实现。这可以通过不同的方式来完成，例如渲染和剪切较大图像的不同部分，或者如果您使用涉及相机对象的图形/游戏库，则动态控制相机渲染的部分。

您的目标是学习游戏编程，还是只是学习编程并简要了解游戏编程？如果是前者，那么你真的应该花时间学习一种或多种游戏编程技术。我建议你看看 Unity，它可以免费下载和试用。Unity 使用的脚本语言本质上是 javascript（您也可以使用 C#），因此您已经很熟悉了。通过一些教程，您将立即开始运行。

请注意，使用 Unity（和其他）等技术可以创建在二维和三维空间中移动的游戏对象，并基于一个或多个摄像机进行渲染。你的背景（或 3d 世界中的地形）保持不变，这更能反映我们生活的现实。所以在精神上，使用这些技术进行开发实际上更容易，然后通过虚幻的技术来伪造它。

# java - 运行此 GTFS 示例代码

> ID：12444326
> 
> 赞同：7
> 
> 时间：2012-09-16T03:53:12.770
> 
> 标签：java, android, gtfs

我无法找到允许我读取 GTFS 数据的 API。经过大量搜索，我能够找到并运行 [此](http://code.google.com/p/gtfs-android/source/browse/?r=4)代码，但实际上并没有太多解释。我最终无法弄清楚如何获取信息并将其显示在 .xml 布局中。

问题：

1.  我是否需要使用 onCreate 方法创建另一个类并调用这些其他类？
2.  这个程序不需要我将值加载到数据库中吗？
3.  我在哪里可以找到可以帮助我了解如何读入、解析和显示值的 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:36:09.653

xml、manifest 的源代码中没有任何内容，甚至没有 MainActivity.java 或任何活动

所以除了使用你完全属于的类之外，你无能为力

能够通过阅读规范自己做。

问题：

```
 1\. Do I need to create another class with an onCreate method and call
    these other classes? 
```

没有活动，所以没有 onCreate，没有调用方法，什么都没有。

```
 2\. Does this program not require me to load values
    into a database? 
```

同问题一。

```
 3\. Where can I find an API that would help me understand how to read in, parse, and
    display values. 
```

你真的可以通过自己遵循规范来实现这一点。这真的很简单。

无论如何，我为你做了一个例子，所以你可以使用 git clone 来获取源代码并做

随你喜欢。 [https://github.com/cwhsu1984/GtfsDemo.git](https://github.com/cwhsu1984/GtfsDemo.git)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T20:56:06.360

查看[https://developers.google.com/transit/gtfs/](https://developers.google.com/transit/gtfs/)了解更多 GTFS 规范

该项目是我想开源的类项目中构建的项目的一部分。其他团队成员不像我那样相信开源模型。

如果我记得，我所做的是制作 GTFS 数据的 sqlite 数据库，并在活动中从数据库中提取信息。

对不起，我对团队感到沮丧，我几乎删除了我拥有的所有代码；）

另外，从那以后我就再也没有碰过Android，所以……对不起，我帮不上忙。

# c# - 根据当前日期验证 ASP.net 日历控件

> ID：12444330
> 
> 赞同：0
> 
> 时间：2012-09-16T03:54:39.947
> 
> 标签：c#, asp.net, date, calendar

我正在使用 ASP.net 日历控件，需要验证所选日期是否在当前日期之后。因此，如果用户尝试在日历上选择当前日期之前的日期，则会出错。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T04:00:33.440

怎么样

```
if(calendercontroldate < DateTime.Now.Date)
{
    //Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T04:07:05.190

日历控件没有预定义的验证器。为此，您必须使用 CustomValidator

为您的日历控件添加一个 CustomValidator 并检查 CustomValidator 方法的日期 OnServerValidate 事件

```
public void Custom_validaor_Validate(object sender, ServerValidateEventArgs e)
{
    if( calnderDate > DateTime.Now )
    {
        //Code here
    }
} 
```

在您的提交按钮上单击检查页面是否通过说

```
public void myButton_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    {
        // the button click event executes even if the page isn't
        // valid, so you have to wrap your save event
        // in this kind of if block to avoid saving bad data to
        // to the database.
    }
} 
```

# multithreading - 内核线程 本机线程 os 线程

> ID：12444332
> 
> 赞同：1
> 
> 时间：2012-09-16T03:55:32.630
> 
> 标签：multithreading, operating-system

谁能告诉我。所有术语“内核线程”、“本机线程”和“Os 线程”都代表内核线程吗？或者他们是不同的？如果它们不同，那么它们之间的关系是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T07:19:11.723

没有真正的标准。术语因上下文而异。但是，我将尝试解释我所知道的不同类型的线程（并添加纤维只是为了完整性，因为我看到人们称它们为线程）。

--**内核中的线程**

这些很可能是您的*内核线程*术语所指的内容。它们只存在于内核级别。它们允许（有限的）内核代码本身的并行执行。

--**应用线程**

这些是术语*线程*的一般含义。它们是并行执行的单独线程，可以在不同的处理器上调度，共享相同的地址空间并由操作系统作为单个进程处理。

POSIX 标准定义了线程在 POSIX 兼容系统中应该具有的属性（实际上是库以及每个库条目应该如何表现）。Windows 线程模型与 POSIX 模型极为相似，而且，AFAIK 可以安全地按照我所做的一般方式谈论线程：并行执行发生在同一个进程中，并且可以在不同的处理器上调度。

--**古代 linux 线程**

早期的 linux 内核不支持线程。然而，它确实支持创建两个共享相同地址空间的不同进程。有一个项目（LinuxThreads）试图用它来实现某种线程能力。

当然，问题在于内核仍会将它们视为单独的进程。因此，结果不符合 POSIX。例如，信号的处理是有问题的（因为信号是一个过程级别的概念）。正是在这个非常具体的背景下，“本地人”这个词开始变得普遍。它指的是“本机”，如“内核级别”对线程的支持。

在内核的帮助下，最终实现了对 POSIX 兼容线程的实际支持。今天，这是唯一真正名副其实的线程。事实上，旧的方式根本不是真正的线程。它是由多个进程共享地址空间，因此应该被引用。但曾经有一段时间，这**被**称为线程（因为它是你在 Linux 上唯一能做的事情）。

--**用户级和绿色线程**

这是另一个上下文，其中“本机”通常用于与另一个线程模型形成对比。绿色线程和用户级线程是确实发生在同一进程中的线程，但它们完全在用户级处理。绿色线程用于虚拟机（尤其是那些实现 pcode 执行的虚拟机，如 java 虚拟机的情况），并且它们也由许多语言在库级别实现（例如：Haskell、Racket、Smalltalk）。

这些线程不需要依赖内核提供的任何线程工具（但通常确实依赖于异步 I/O）。因此，它们通常不能在单独的处理器上进行调度。在这些上下文中，“本机线程”或“OS 线程”可以用来指代实际的内核调度线程，而不是绿色/用户级线程。

请注意，“不能在单独的处理器上调度”仅在它们单独使用时才成立。在同时具有用户级/绿色线程和本机/操作系统线程的混合系统中，可以为每个处理器创建一个本机/操作系统线程（并且在某些系统上设置关联掩码，以便每个仅在特定处理器），然后有效地将用户级线程分配给这些。

--**纤维和协同多任务处理**

我看到有些人称这些线程。不妥，正确的名字是纤维。它们也是并行执行的模型，但与线程（和进程）相反，它们是协作的。这意味着每当一个纤程运行时，其他纤程将不会运行，直到正在运行的纤程自愿“屈服”执行接受暂停并最终在稍后恢复。

# android - 一个活动中的多个选项卡（TabHost）android

> ID：12444338
> 
> 赞同：2
> 
> 时间：2012-09-16T03:58:12.800
> 
> 标签：android, tabs, android-tabhost

我正在使用聊天应用程序。所以，用户问我的设计是`"2 groups"`标签。一个有房间和私人聊天，另一个`"List of users"`和`"List of rooms"`. 这怎么可能？我试过：

```
 android:id="@android:id/tabhost" 
```

和：

```
android:id="@android:id/tabhost_othertabs" 
```

但给了我错误：

无法创建选项卡内容，因为找不到具有 id 的视图

提前致谢

# javascript - 在页面onload中选择一个div

> ID：12444343
> 
> 赞同：1
> 
> 时间：2012-09-16T03:59:12.703
> 
> 标签：javascript, google-closure-library

基本上，页面中某个div的溢出设置为垂直滚动。我希望用户能够在页面加载后立即滚动。为了滚动，这时候你必须先点击那个div然后才能滚动。

我怎样才能立即做到这一点？我恳请您不要使用 document.location.hash 方法，因为这似乎由于某种原因导致页面内出现其他一些问题。

如果您查看页面，可滚动的 div 是#mainView。

[示例页面](http://www.niuzly.com/p/5053df08ea39d36930000001/2012-9-15)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T04:39:42.633

好吧，你可以使用[`window.scroll()`](https://developer.mozilla.org/en-US/docs/DOM/window.scroll). 它甚至似乎得到了很好的支持（IE9、Chrome、Firefox）。IE8/7 我不太确定，因为它不能识别元素`height: 100%`。`html, body`

例如，在这里我将动态创建 20 个元素并将 设置`window.scroll`为 的总高度`div`，这反过来（应该是）与`document.body`“高度”相同的高度。

试试看：

```
(function load(d) {
    var body = d.body,
        i = 0,
        div,
        winheight = h(),
        scroll = 0;

    (function loop() {
        if (i++ < 20) {
            scroll = scroll + 20 + 100 + 5 + winheight;

            div = document.createElement('div'); 
            div.style.height = winheight - 125 + 'px';
            div.className = 'block';
            div.innerHTML = 'DIV #' + i;

            document.body.appendChild(div);

            window.scroll(0, scroll);

            setTimeout(loop, 2000);
        }
    })();

    function h() {
        return Math.max(
            Math.max(body.scrollHeight, d.documentElement.scrollHeight),
            Math.max(body.offsetHeight, d.documentElement.offsetHeight),
            Math.max(body.clientHeight, d.documentElement.clientHeight)
        );
    }    
})(document); 
```

[​示范](http://jsfiddle.net/userdude/QCuAu/embedded/result/)（[来源](http://jsfiddle.net/userdude/QCuAu/)）

# windows-phone-7 - Windows Phone 中的 OnBackKeyPress 仅适用于启动页面

> ID：12444352
> 
> 赞同：0
> 
> 时间：2012-09-16T04:02:22.403
> 
> 标签：windows-phone-7

我需要在每个页面中处理硬件后退按钮，但它不起作用。我只能在主页中调用 OnBackKeyPress。和其他页面运行我在主页 OnBackKeyPress 事件中放置的相同功能。我用谷歌搜索了两个多小时，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T04:48:57.370

这完全取决于你在做什么。有两种方法可以捕获 Back 键：覆盖 PhoneApplicationPage 类的 OnBackKeyPress，或者将事件侦听器附加到 RootFrame.BackKeyPress。如果您正在附加事件侦听器，那么即使您离开当前页面，事件侦听器仍将被附加，并且在按下返回键时将被调用。您需要更具体地说明您正在做什么、您希望看到什么以及您正在看到什么。

# algorithm - Matlab中用于interp3的算法是什么？

> ID：12444355
> 
> 赞同：0
> 
> 时间：2012-09-16T04:03:36.083
> 
> 标签：algorithm, matlab, interpolation

给定由 f(x,y,z) 在统一和离散 (x,y,z) 值处定义的 3D 数据集，Matlab 如何计算函数 f(x,y,z) 在以下位置的值不是来自原始数据集（例如 x+0.1, y+0.1,z+0.1）。该 3D 数据集可以是具有特定离散 x、y、z 值的像素强度值的 3D 图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T11:40:22.117

它取决于提供的“方法”参数，默认情况下（没有提供方法）它使用[线性](http://en.wikipedia.org/wiki/Linear_interpolation)插值，您也可以选择“最近”，它只是找到最近的点并分配相同的值，或者您可以使用“样条曲线” '和'立方'。

对于单调数据（均匀分布的网格），您可以使用“*线性”，这可能使用[三线性](http://en.wikipedia.org/wiki/Trilinear_interpolation)插值。

编辑：在这里回答评论中的问题是一个三线性插值的例子，说 f(x,y,z) 定义为 x,y,z 属于 {0,1} 并且我想要 0 <= i 的值,j,k <= 1

```
f(i,j,k) = ((f(0,0,0)*(1-i)+f(1,0,0)*i)*(1-j)+ 
            (f(0,1,0)*(1-i)+f(1,1,0)*i)*  j  )     *    (1-k)+

           ((f(0,0,1)*(1-i)+f(1,0,1)*i)*(1-j)+ 
            (f(0,1,1)*(1-i)+f(1,1,1)*i)*  j  )     *      k 
```

注意这里有 7 个线性插值。

# licensing - 有人可以将开源程序更改为商业程序吗？

> ID：12444358
> 
> 赞同：-2
> 
> 时间：2012-09-16T04:04:08.387
> 
> 标签：licensing, gpl

1- 如果有 GPL 许可下的软件版本 1 和商业许可下的版本 2，其他开发人员是否可以继续使用该软件的版本 1 并拥有自己的程序版本？

2- 或者，原作者是否可以将当前开源软件的许可证更改为商业软件，从而阻止其他人制作它的免费版本？从开源时创建的新程序现在是否违法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T04:14:52.233

答案：

1.  第一个问题，是的，如果有 gpl 版本，您可以分叉并制作自己的版本，但您不能封闭您的版本，如果您发布它，它必须在 GPL 兼容许可证下。

2.  第二个问题，确实，作者可以更改他的开源程序的许可证，但**前提是他对项目中的****所有**代码拥有版权，也就是说，该项目不应该有其他开发者贡献的代码或补丁，在这种情况下，原作者必须询问这些开发人员是否可以更改许可证，他们可以反对并且不能更改许可证。如果在接受其他开发人员的代码或补丁之前，您让他们签署版权归属协议，则可以规避这种情况，这意味着他们将其贡献（代码/补丁）的版权移交给原作者，因此在这种情况下，他拥有完整的版权在所有的代码，所以他可以在不咨询任何人的情况下更改许可证。

3.  关于你的第三个问题：

    > 从开源时创建的新程序现在是否违法？

    不，他们不是，如果 1.2 版是最后一个开源版本，而 1.3 版现在是封闭源代码，那么**任何人都**可以使用 1.2 版并进一步开发和制作新程序，但如果你再次使用，最终结果**必须**是开源的发布它（或与此问题兼容的 GPL）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T04:19:36.740

> 1- 如果有 GPL 许可下的软件版本 1 和商业许可下的版本 2，其他开发人员是否可以继续使用该软件的版本 1 并拥有自己的程序版本？

是的。当然，他们自己的版本也必须在 GPL 下分发。

> 2- 或者，原作者是否可以将当前开源软件的许可证更改为商业软件，从而阻止其他人制作它的免费版本？从开源时创建的新程序现在是否违法？

一旦有人根据给定的许可证收到程序的副本，您就不能在他们的脚下更改许可证。因此，如果一个程序曾经在 GPL 下发布，那么任何下载 GPL 版本的人都可以根据 GPL 的条款永久自由地使用和修改他们的副本，以及分发他们的修改。

您可能能够做的是将您的 GPL 程序的许可证更改为不同的许可证（例如，“商业”（即专有）许可证），然后从那时起从您那里下载该程序的人受新的许可证（但是，请记住，在 GPL 时已经下载该程序的人仍然可以根据 GPL 条款自由地将其分发给其他人，你不能把它拿走）。您能否做到这一点取决于您是否是该程序的唯一版权所有者。如果你是，你可以自由地重新授权你想要的。如果您不是（例如，因为您接受了其他人的贡献而没有让他们将其版权分配给您的贡献），那么您需要获得所有其他版权所有者的许可才能重新许可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T04:15:52.307

1.  一般来说，这取决于许可证的文本，但特别是对于 GPL，如果某个程序的某个版本作为 GPL 发布，许多探索过这个场景的人的普遍共识是它不能被追溯撤销。所以是的，其他开发人员可以继续使用 GPL 版本并制作他们自己的版本，只要他们遵守发布它的许可条款（即，在这种情况下，他们在 GPL 下发布了他们自己的代码和更改为好）。显然，有一些细节。仔细阅读许可证文本。

2.  原作者可以重新授权他们所写的任何内容。这并不一定会撤销最初的许可授予，并且如上所述，普遍的共识是，这对于 GPL 来说是不可能的。对于其他许可，可能会根据原始许可授予的文本中的内容而有所不同。所以对于 GPL 软件，不，原作者不能追溯撤销它的 GPL 特性或阻止其他人继续制作它的新版本。

当然，所有这一切都忽略了商标、血淋淋的细节等。显然，在做可能有法律问题的事情之前，您需要自己进行研究并做出自己的决定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T04:21:48.567

开源软件与商业销售兼容。GPL 并不禁止程序以金钱为目的出售。

对于您的问题：

1.  是的。您可以使用 GPL 版本的程序。

2.  不可以。您不能撤销程序的 GPL 许可。

# jquery - Opera 在页面加载时为 div 提供上边距

> ID：12444359
> 
> 赞同：-2
> 
> 时间：2012-09-16T04:06:21.013
> 
> 标签：jquery, css

好的，所以我的网站在 Opera 中遇到了一个奇怪的问题。这很明显。

我的网站： http: [//fortiswebsystems.com/](http://fortiswebsystems.com/)。

**问题：**在 Opera 中，页面刷新时，中心 div 距顶部有很大的余量。当我将鼠标悬停在导航栏上时，它会猛地向上调整。

它在 FF 和 Chrome 中正常工作。请帮忙！谢谢！

**编辑：** 固定。请参阅下面的修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T04:42:36.767

啊哈！我找到了。Opera 不喜欢我在底层 div 中的边距`#content-container`。我将上边距移到了`#container`div，它现在可以工作了

# iphone - iOS didSelectTabBarItem 知道之前选择了什么项目

> ID：12444361
> 
> 赞同：3
> 
> 时间：2012-09-16T04:07:01.367
> 
> 标签：iphone, ios, uitabbar, uitabbaritem

我有一个带有 a 的 IOS 应用程序，`UITabBar`并将其代表设置为我的班级..`didSelectTabBarItem`正确触发，世界一切正常。但是，我确实有一些条件代码，当`UITabBarItem`所选内容位于一个特定`UITabBarItem`的 IE 之后。如果用户选择了标签栏项目 3 并且之前在标签栏项目 1 上，我将不必这样做。

所以，无论如何是以编程方式（除了通过状态变量通过我的程序保持直接轨道，要知道选中新的选项卡栏项时，先前所选项目在选项卡栏上是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T07:16:59.177

是的，通过键值观察 ( `KVO`) 是可能的。

**注意**这个答案是关于 a `UITabBar`not a 的`UITabBarController`。选项卡栏控制器委托具有您正在寻找的方法（如 rdelmar 所述）。

首先，像这样观察你的标签栏：

```
- (void)viewDidLoad{
    [super viewDidLoad];
    [self.tabBar addObserver:self forKeyPath:@"selectedItem" options:NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew context:nil];
} 
```

我认为您已经可以根据我使用新旧两种选项来了解我的前进方向。然后简单地观察变化而不是使用委托方法，如下所示：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
    if ([keyPath isEqualToString:@"selectedItem"] && [object isKindOfClass:[UITabBar class]]){
        UITabBar *bar = (UITabBar *)object; // The object will be the bar we're observing.
        // The change dictionary will contain the previous tabBarItem for the "old" key.
        UITabBarItem *wasItem = [change objectForKey:NSKeyValueChangeOldKey];
        NSUInteger was = [bar.items indexOfObject:wasItem];
        // The same is true for the new tabBarItem but it will be under the "new" key.
        UITabBarItem *isItem = [change objectForKey:NSKeyValueChangeNewKey];
        NSUInteger is = [bar.items indexOfObject:isItem];
        NSLog(@"was tab %i",was);
        NSLog(@"is tab  %i",is);
    } 
    // handle other observings.
} 
```

`viewDidUnload`请记住在and中删除自己作为观察者`dealloc`，因为`viewDidUnload`可能永远不会被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T06:13:37.960

如果您不使用 UITabBarController，我不知道这是否可以通过您建议的方式（状态变量）以外的方式完成。如果您使用的是标签栏控制器，那么您可以在标签栏控制器的委托中执行此操作：

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {
    if (viewController == [self.tabBarController.viewControllers objectAtIndex:2 && self.tabBarController.selectedIndex == 1]) {
        NSLog(@"Do special programming");
    }
    return YES;
} 
```

在进行切换之前调用此方法（与 UITabBar 方法 didSelectTabBarItem 不同），因此所选索引将是在您触摸新选项卡之前处于活动状态的选项卡的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T05:34:26.377

可能有更好的想法，但一种方法是在 AppDelegate 中创建一个 NSString 对象来存储当前视图控制器的类的名称，以便您可以从下一个视图控制器读取字符串并检查先前选择的项目.

在 AppDelegate.h 中声明一个字符串并合成它。

```
@property (strong, nonatomic) NSString * preSelectedViewController; 
```

在**所有**设置为 UITabViewController 项目的 UIViewControllers 中执行此操作

在**.h**文件中

```
#import "AppDelegate.h" 
```

在**.m**文件中将其包含在您的**viewWillAppear:**方法中

```
AppDelegate * delegate1 =(AppDelegate *) [[UIApplication sharedApplication] delegate];
if (delegate1.preSelectedViewController ==nil) 
{
    delegate1.preSelectedViewController=NSStringFromClass( [self class]);

}

NSLog(@"previous %@",delegate1.preSelectedViewController);

//include 2nd_viewcontroller.h file and this if statement in your 3rd_viewcontroller(i.e. where you want to check and do your other programming) 
if ([delegate1.preSelectedViewController isEqualToString:NSStringFromClass([2nd_ViewController class]) ]) {
    //do your little extra code
}

delegate1.preSelectedViewController=NSStringFromClass( [self class]);
NSLog(@"present %@",delegate1.preSelectedViewController); 
```

猜猜这对你有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T07:23:47.877

为什么不将 lastSelectedIndex 存储在 iVar 中，并且 `- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController` 您手头上有两个值。您甚至可能（从未尝试过）使用 `- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController` ，因此您拥有当前选定的视图控制器索引视图 selectedIndex，然后通过其他方法您可以找到视图控制器的要选择索引的索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-18T01:26:06.717

我发现这适用于[ReactiveCocoa](https://github.com/ReactiveCocoa/ReactiveObjC)：

```
#import <ReactiveCocoa/ReactiveCocoa.h>
// ...
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
@weakify(self);
[RACObserve(appDelegate, tabBarController.tabBar.selectedItem) subscribeNext:^(UITabBarItem *selectedTab) {
    @strongify(self);
    NSUInteger selectedIndex = [appDelegate.tabBarController.tabBar.items indexOfObject:selectedTab];
    NSLog(@"selected index: %lu", (unsigned long)selectedIndex);
}]; 
```

# codeigniter - Payza IPN 处理程序上的 500 内部服务器错误

> ID：12444363
> 
> 赞同：0
> 
> 时间：2012-09-16T04:07:25.693
> 
> 标签：codeigniter, curl, paypal-ipn

我正在将应用程序从 PayPal 迁移到 Payza（以前称为 AlertPay）。当我直接从浏览器运行代码以测试令牌处理时，它会显示在日志中并且我得到正确的响应：token=47TXhMVgdPrmV3n5aauIZ5CC0MrytYXWjID81pjVnQsEhkSUklPXT3clXZ4SFUFOL5WqepRUpBz5SKomoyPuDw==& INVALID TOKEN。当我直接在浏览器中运行完整的 IPN 响应时，我得到一个失败但没有可见的错误。

但是当我从 Payza 生成交易或重新发送 IPN 时，它没有显示在日志中，并且我收到 500 内部服务器错误。我在 CI 配置文件中打开了允许查询字符串。

```
class PayzaIPN {  
function validate_ipn($payzaIPN ='',$logId = null)  {

define("IPN_V2_HANDLER", "https://secure.payza.com/ipn2.ashx");
define("TOKEN_IDENTIFIER", "token=");
$_POST['token'] = ''; 

$token = urlencode($_POST['token']);

$token = TOKEN_IDENTIFIER.$payzaIPN;

$response = '';

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, IPN_V2_HANDLER);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $token);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

$response = curl_exec($ch);

curl_close($ch);

if(strlen($response) > 0) 
```

# android - 在 WebView 中显示带有图像的静态 html

> ID：12444368
> 
> 赞同：0
> 
> 时间：2012-09-15T23:01:18.737
> 
> 标签：android, html

我在显示带有额外图像（存储为资产）的静态 html 文件时遇到了一些问题，例如*About.html*。

```
<html>
 <body>
  <div style="text-align:center;">
   <p>Some text in utf-8</p>
   <img src="image.png"/>
  </div>
 <body>
<html> 
```

在第一种方法中，我尝试将我的内容显示为：

```
webView.loadUrl("file:///android_asset/About.html"); 
```

几乎一切正常。我看到了图像和我的字符串，但不是 utf-8。经过一些研究，我尝试以另一种方式加载我的 html：

```
webView.loadDataWithBaseURL(null, dataContent, "text/html", "utf-8", null); 
```

在正确显示字符串之后，但我无法显示图像。看起来 webView 无法从资产文件夹加载图像。您对如何显示静态 html 内容（utf-8 + 图像）有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T11:38:49.603

当您使用“loadDataWithBaseURL”方法时，您必须设置基本 URL。在您的情况下，它将是资产文件夹。所以，试试这个：

```
 webView.loadDataWithBaseURL("file:///android_asset/", dataContent, "text/html", "utf-8", null); 
```

在我的测试中，文本和图像已正确加载。也看看这个问题：[Using webView's loadDataWithBaseURL not loading images from sdcard](https://stackoverflow.com/questions/11754288/using-webviews-loaddatawithbaseurl-not-loading-images-from-sdcard)

# android - layout.xml 文本编辑器在 Eclipse android 中单击或突出显示时发生更改

> ID：12444369
> 
> 赞同：1
> 
> 时间：2012-09-16T04:09:36.943
> 
> 标签：android, eclipse, android-layout

当我尝试编辑我的 layout.xml 时，文本视图发生了奇怪的刷新并更改了我单击的文本（好像文本编辑器中的行号被弄乱了）

当我单击文本进行编辑时，它会消失并出现下面的行的副本

对于我选择的每一行，实际的行消失了，另一行在我选择的行上重复

就好像小编在玩我一样！！令人沮丧...

我最终从 Eclipse 外部的编辑器中打开 xml，只是为了进行简单的编辑。

PS 由于积分规则，我无法上传屏幕截图（事情只会越来越好：P）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:25:53.543

Juno 和 Android 插件之间的大部分兼容性问题已在 ADT 20 中修复。请更新到最新版本的 ADT 和 SDK（截至目前为 20.0.3）。

# javascript - 检查 iframe 是否有可见的滚动条？

> ID：12444374
> 
> 赞同：14
> 
> 时间：2012-09-16T04:13:06.697
> 
> 标签：javascript, jquery

我想知道是否有人知道如何检查 iframe 中的内容是否溢出并且滚动条是否可见？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T10:02:19.423

一般来说，您应该比较元素的 scrollHeight/scrollWidth 和 offsetHeight/offsetWidth 的增量。如果是肯定的，那么'我们赢了'。但是.. 在 iframe 中寻找滚动条时，事情变得有点棘手：

```
var frm=document.getElementById("frm");
var iIsVrScrollBar =  frm.contentWindow.document.documentElement.scrollHeight>frm.contentWindow.document.documentElement.offsetHeight ? 1 : 0;
var iIsHrScrollBar = frm.contentWindow.document.documentElement.scrollWidth>frm.contentWindow.document.documentElement.offsetWidth ? 1 : 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:25:31.233

您想检查元素`scrollHeight`是否大于`clientHeight`，或者元素`scrollWidth`是否大于`clientWidth`。这可以直接使用这些属性来完成，也可以使用 jQuery 提供的辅助方法来完成。

[MDN：元素.scrollHeight](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight)

> 如果元素的内容生成了垂直滚动条，则 scrollHeight 值等于元素需要的最小 clientHeight 以便在不使用垂直滚动条的情况下适应视点中的所有内容。当一个元素的内容不生成垂直滚动条时，它的 scrollHeight 属性等于它的 clientHeight 属性。这可能意味着内容太短而无法使用滚动条，或者元素的 CSS 样式溢出值为可见（不可滚动）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T08:12:02.797

我不得不修改代码以使其正常工作。

1) IFRAME 和内容在同一个网站/文件夹结构上

2) 通过将“sizewindow”设置为 TRUE 来启动该过程

3) 它片段是设置在 0.5 秒内的计时器功能的一部分

4) 在 IE11、FF34 & 35、Chrome 31 & 40 和 Opera 12.6 上测试

5）活动代码将窗口大小调整为比内容大，

见[http://www.users.waitrose.com/~cresby/map2.htm](http://www.users.waitrose.com/~cresby/map2.htm)

```
if (sizewindow){
  if(iIsVrScrollBar==1) { 
   frm.style.height = (frm.contentWindow.document.body.offsetHeight+20); 
   iIsVrScrollBar =  (frm.scrollWidth!=frm.contentWindow.document.documentElement.scrollWidth) ? 1 : 0;
   if(iIsVrScrollBar==0) sizewindow=false;
 }else{
   frm.style.height = (frm.contentWindow.document.body.offsetHeight-10);
   iIsVrScrollBar =  (frm.scrollWidth!=frm.contentWindow.document.documentElement.scrollWidth) ? 1 : 0;
   if(iIsVrScrollBar==1) {frm.style.height = (frm.contentWindow.document.body.offsetHeight+10);}
 }
} 
```

# sql - 关于查询的输出

> ID：12444376
> 
> 赞同：-1
> 
> 时间：2012-09-16T04:15:22.403
> 
> 标签：sql, oracle

我有一个查询，我在两张表下面..

```
CREATE table "EMPLOYEE" (
    "EMP_ID"     NUMBER,
    "ENAME"      VARCHAR2(4000),
    "SALARY"     VARCHAR2(4000),
    "COMPANY"    VARCHAR2(4000),
    "CONTACTNO." NUMBER,
    "GENDER"     CHAR(100),
    constraint  "EMPLOYEE_PK" primary key ("EMP_ID")
)

CREATE TABLE  "DEPARTMENT" 
(   
    "DEPT_ID" NUMBER, 
    "DEPT_NAME" VARCHAR2(4000), 
    "LOCATION" VARCHAR2(4000), 
    "CONTACTNO." NUMBER, 
     CONSTRAINT "DEPARTMENT_PK" PRIMARY KEY ("DEPT_ID") ENABLE
) 
```

现在如果我写 select * from EMPLOYEE,DEPARTMENT 会是什么输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T04:30:18.930

逗号运算符返回两个表的交叉连接。这是连接中涉及的表的笛卡尔积。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T04:31:12.690

只有一个模式，什么都没有。如果表有数据，您将获得每个表中所有内容的交叉连接。

# ios - 将数字转换为日期时间

> ID：12444383
> 
> 赞同：1
> 
> 时间：2012-09-16T04:16:41.903
> 
> 标签：ios, date, format

我不是程序员。我只需要从我的 iphone 备份中获取一些日历信息。我将数据输入 SQL Lite 数据库，但日期是我不理解的数字格式，我找不到将它们转换为我可以阅读的格式的方法。有人可以告诉我如何转换数字，或者为我转换它们可能更容易。号码是：352425600 353718000 356054400 357350400 358560000 359769600

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:08:30.223

这些数字存储为与日期 1\. 2001 年 1 月 GMT 之间的时差（以秒为单位）。如果将数字视为秒，则可以通过将数字添加到该日期来计算日期。

如果您可以使用Objective-C，则可以使用以下方法：`dateWithTimeIntervalSinceReferenceDate`

这是一个用于计算日期的简短循环：

```
NSArray *dates = @[@352425600, @353718000, @356054400, @357350400, @358560000, @359769600];

    for (NSNumber *timeInterval in dates) {
        NSDate *date = [NSDate dateWithTimeIntervalSinceReferenceDate:[timeInterval integerValue]];
        NSLog(@"timeInterval:%@ = date:%@ ", timeInterval, date);
    } 
```

结果如下：

> timeInterval:352425600 = date:2012-03-03 00:00:00 +0000
> timeInterval:353718000 = date:2012-03-17 23:00:00 +0000
> timeInterval:356054400 = date:2012-04-14 00:00 :00 +0000
> timeInterval:357350400 = date:2012-04-29 00:00:00 +0000
> timeInterval:358560000 = date:2012-05-13 00:00:00 +0000
> timeInterval:359769600 = date:2012-05- 27 00:00:00 +0000

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:48:13.657

我想知道这些是否处于时代？尝试使用[这个计算器](http://www.convert-unix-time.com)，看看结果对你来说是否可行。

**编辑：**

没关系，[这个答案](https://stackoverflow.com/a/2494696/442328)有你想要的。

# database - R中有一个游标来操作数据库吗？

> ID：12444384
> 
> 赞同：1
> 
> 时间：2012-09-16T04:17:09.623
> 
> 标签：database, r, cursor

python中有一个概念游标来操作数据库，例如：

```
cu = cx.cursor()
cu.execute('create table catalog (id integer primary key,pid integer,name varchar(10) UNIQUE）') 
```

在 R 中是否有相同的方法来操作数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:11:39.980

看看包**sqldf**。

它在这里有一个很好的文档：[https ://code.google.com/p/sqldf/](https://code.google.com/p/sqldf/)

```
library(sqldf)

# create new empty database called mydb
sqldf("attach 'mydb' as new") 

 sqldf("create table catalog (id integer not null, pid integer,name text(10) ）", dbname = "mydb")

#close 
sqldf() 
```

PS：也许你应该解释一下你想要做什么。如果您已经“连接”到数据库，则指定哪个引擎（因为在创建表时使用不同的 SQL 语句等......）

# c - 如何编写接受任何类型的（一个）参数的 C 函数

> ID：12444385
> 
> 赞同：8
> 
> 时间：2012-09-16T04:18:54.067
> 
> 标签：c, types, variadic, any

我正在为 C 中的列表实现简单的库，但我在编写`find`函数时遇到了问题。

我希望我的函数接受*任何*类型的参数来查找，包括: `find(my_list, 3)`和`find(my_list, my_int_var_to_find)`. **我已经知道什么是列表元素的类型**。

现在我已经找到了几种方法来处理这个问题：

*   不同类型的后缀不同的函数：`int findi(void* list, int i)`，`int findd(void* list, double d)`-但我不喜欢这种方法，这对我来说似乎是多余的，而且 API 令人困惑。

*   使用联合：

    ```
    typedef union {
       int i;
       double d;
       char c;
       ...
    } any_type; 
    ```

    但是通过这种方式，我强制用户既要了解`any_type`联合，又要在调用`find`. 我想避免这种情况。

*   使用可变参数函数：`int find(void* list, ...)`. 我喜欢这种方法。但是，我担心参数数量没有限制。用户可以自由写作，`int x = find(list, 1, 2.0, 'c')`虽然我不知道它应该是什么意思。

我也看到了对这个问题的回答：[C：为一个函数参数发送不同的结构，](https://stackoverflow.com/questions/10212655/c-send-different-structures-for-one-function-argument)但这无关紧要，因为我想接受非指针参数。

处理此功能的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T04:32:26.720

您可以尝试实现类似于通用函数的函数，例如`bsearch`，它可以对任何数据类型的数组执行二进制搜索：

```
void *bsearch(const void *key, const void *base, size_t nmemb, size_t size,
              int (*compar)(const void *, const void *)) 
```

与其在函数内部对不同数据类型的不同实现进行硬编码，不如将指针传递给将执行类型相关操作的函数，并且只有它知道底层实现。在您的情况下，这可能是某种遍历/迭代功能。

另一件事`bsearch`需要知道（除了显而易见的 - 搜索键和数组长度）是数组中每个元素的大小，以便它可以计算数组中每个元素的地址并将其传递给比较函数。

如果您有一个要操作的类型的有限列表，那么拥有一系列`findX()`函数并没有错。上述方法需要将每种数据类型的函数传递给`bsearch`函数，但主要区别之一是不需要重复通用功能，通用函数可用于*任何*数据类型。

我真的不会说有任何*正确的*方法可以做到这一点，这取决于您，并且实际上取决于您要解决的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:33:06.360

我不确定回答我自己的问题是否礼貌，但我想听听你的意见。

我尝试使用 va_list 解决这个问题。为什么这样？因为这样我只能写一个函数。请注意，我**知道参数应该是什么类型**。这样我可以做到这一点：

```
 int find(void* list, ...) {
      any_type object = {0};
      int i = -1;
      va_list args;
      va_start(args, list);
      switch(type_of_elem(list)) {
        case INT: object.i = va_arg(args, int); break;
        ...
      }
      /* now &object is pointer to memory ready for comparision
       * f.eg. using memcmp */
      return i;
    } 
```

这个解决方案的优点是我可以包装呈现的 switch-case 并将其与其他功能一起使用。

在对我对参数数量没有限制的担忧进行了更多研究之后，我意识到也`printf`没有这个限制。你可以写`printf("%d", 1, 2, 3)`。但我用额外的宏调整了我的解决方案：

```
 #define find_(list, object) find((list), (object)) 
```

这会在编译时产生错误消息，说`find_ macro expects 2 arguments not 3`.

你怎么看待这件事？您认为这比以前建议的解决方案更好吗？

# r - 将定义半径的透明圆添加到R中的现有绘图

> ID：12444387
> 
> 赞同：0
> 
> 时间：2012-09-16T04:19:19.497
> 
> 标签：r, plot, geometry

![在此处输入图像描述](../Images/5df1627109ff389aebd8961751df724c.png)

我有一个带有 X 和 Y 坐标值的 data.frame。X 轴是位置信息，Y 轴是对数比率值。这些点是基于对数比率值着色的（绿色 > 0.25、-0.25 < 灰色 < 0.25 和红色 < -0.25）。橙色水平虚线是 0.58、0 和 -1 的 log2 值。

圆形二元分割算法分割对数比率的变化，由水平蓝线表示。在附图中可以看到几个片段，大多数接近 log2 为 0。靠近图左端的是小的蓝色片段，log 值接近 0.58，还有一个小得多（几乎看不见，因为周围的红点) 对数值接近 -1 的蓝色段（图的右边缘）。我在另一个 data.frame 中有这些蓝色段的 x 和 y 坐标。我想实现以下

1) 在 -0.70 < log2 > 0.50 上方添加包围这些蓝色段的圆圈。这有助于识别可能遗漏的小段 2) 使用 alpha 值向这些圆圈添加透明颜色，以便看到蓝色段 3) 圆圈的大小将基于这些蓝色段的宽度。

我也对在 -0.70 < log2 > 0.5 处高亮这些蓝色段的其他想法持开放态度。也许我应该禁止绘制找到这些蓝色段的点（绿色和红色）。我正在使用 R 来制作这个情节。感谢帮助。

这是使用的代码：有两个 df 对象。df(X) 包含 Chr.no、Chr.Start、Chr.End 和 Log2。df(Y) 类似，但 col.name 不同，例如 loc。开始，然后定位。结尾。而不是 Log2，它们有 seg.mean 值

```
for (i in 1:25)  {       # Plot each chromosome separately

  plot(X[which(X$Chr.No ==i),"Chr.Start"], X[which(X$Chr.No ==i),"Log2"], ylim=c(-4.0,4.0), col=X[which(X$Chr.No ==i),"Color"], pch=16, cex=0.4, ylab="Log2", xlab="Genomic Position", main= paste("KCL:180522_SS", "chromosome", i, sep=" "))
  abline(h=c(-1,0,log2(3/2)), lty=2, col="chocolate")
  xleft  = Y[which(Y$Chr.No ==i),"loc.start"]            # Left limit of the blue horizontal line
  xright = Y[which(Y$Chr.No ==i),"loc.end"]              # Right limit of the blue horizontal line
  ybottom= Y[which(Y$Chr.No ==i),"seg.mean"] - 0.010     # Adding thickness to the "seg.mean"
  ytop   = Y[which(Y$Chr.No ==i),"seg.mean"] + 0.010     # Adding thickness to the "seg.mean"
  rect(xleft=xleft, ybottom=ybottom, xright=xright, ytop=ytop, col="blue", border="blue")
} 
```

@Dwin是的，“颜色”是“浅绿色”、“灰色”和“红色”的向量。这些是 plot(x,y) 中 pch=16 的颜色信息。我不想修改 pch=16 点。水平“蓝色”线段由“矩形”添加，它们跨越许多 pch=16 点。正如您所看到的，有许多“蓝色”段，一些非常小，一些长度很大，它们的 log2 值不同。这就是我想用一个填充的透明圆圈来绑定的。不是所有的“蓝色”段，而是只有“蓝色”段 0.25< log2 > 0.25 的段。在这个图中，较小的“蓝色”部分靠近情节的边缘，由于它们很难被发现，我想用它们周围的实心圆圈来突出它们。如果我仍然不清楚，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:56:30.013

（删除了基于对蓝点（实际上是段）构建方式的猜测的错误方法。）

编辑：使用新信息，我建议绘制普通的“点”，即在由 (xleft+xright)/2 形成的 x 向量和使用 ytop 的 y 向量（应该与 ybottom 相同）每个对于符合您的条件的选定 ytop 值。您将创建一个逻辑向量来选择这些向量中的每一个。所以：

```
selvec <- ytop < -0.70 | ytop > 0.5
points ( x= (xleft[selvec]+xright[selvec])/2, y= ytop[selvec], cex =1.5, col="blue") 
```

如果您使用 rgb() 函数创建具有透明度的颜色，也可以使用透明度：

```
points ( x= (xleft[selvec]+xright[selvec])/2, y= ytop[selvec], cex = 2, col=rgb(0, 0, 1, 0.3) ) 
```

....如果您的输出设备支持它，应该给您透明的圆圈。

# android - 如何在 ANDROID 中构建我自己的网格布局，以便它可以与 API 14 以下的设备一起使用

> ID：12444391
> 
> 赞同：0
> 
> 时间：2012-09-16T04:21:13.540
> 
> 标签：android, android-layout, layout, grid, grid-layout

我想构建一个计算器应用程序，我想在其中格式化所有必需的按钮，使它们都以网格形式出现在我看来......我制作的那个只在 Android 4.0 上运行及以上设备...但我希望我的计算器应用程序应该在最大的 Android 设备（Android 2.2 及以上）上运行并且其中有一个 GridLayout..！

请通过建议我一些代码或其他任何东西来帮助我......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T04:48:20.220

`GridLayout`支持库中的 Android 库项目也提供向后兼容的实现（适用于 API 级别 7 及更高级别） 。下载此插件后，您将在本地 sdk 文件夹中找到一个 Android 库项目，该文件夹位于：

```
<sdk_folder>\extras\android\compatibility\v7\gridlayout 
```

将其设置为您正在处理的项目的依赖项。之后，您需要将整个项目中的引用从 14 级版本更改为此兼容性版本，以支持 ICS 之前的设备。用法应该是相似的，如果不完全相同的话。

也可以看看：

*   [Android 2.0 中的网格布局？](https://stackoverflow.com/questions/11126625/gridlayout-in-android-2-0/11126742#11126742)
*   [android API 10 中的网格布局支持](https://stackoverflow.com/questions/10278358/grid-layout-support-in-android-api-10/10278642#10278642)

# mysql - 请帮我优化 MySQL 查询

> ID：12444394
> 
> 赞同：-2
> 
> 时间：2012-09-16T04:22:06.743
> 
> 标签：mysql, sql, subquery

我在下面有查询，查询返回正确的结果，但是当表**cslogcurve_datanode**中有超过 10000 行时，我的查询需要很长时间，我想问如何优化我的查询或最好的 sintax，并且必须返回相同的结果我在下面的查询

```
 SELECT DISTINCT
    (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-1' AND s1.baseNodeDouble = t.baseNodeDouble) AS R1,
    (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-10' AND s1.baseNodeDouble = t.baseNodeDouble) AS R2
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-11' AND s1.baseNodeDouble = t.baseNodeDouble) AS R3,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-12' AND s1.baseNodeDouble = t.baseNodeDouble) AS R4,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-13' AND s1.baseNodeDouble = t.baseNodeDouble) AS R5,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-14' AND s1.baseNodeDouble = t.baseNodeDouble) AS R6,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-15' AND s1.baseNodeDouble = t.baseNodeDouble) AS R7,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-16' AND s1.baseNodeDouble = t.baseNodeDouble) AS R8,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-17' AND s1.baseNodeDouble = t.baseNodeDouble) AS R9,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-18' AND s1.baseNodeDouble = t.baseNodeDouble) AS R10
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-19' AND s1.baseNodeDouble = t.baseNodeDouble) AS R11,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-2' AND s1.baseNodeDouble = t.baseNodeDouble) AS R12,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-20' AND s1.baseNodeDouble = t.baseNodeDouble) AS R13,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-21' AND s1.baseNodeDouble = t.baseNodeDouble) AS R14,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-3' AND s1.baseNodeDouble = t.baseNodeDouble) AS R15,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-4' AND s1.baseNodeDouble = t.baseNodeDouble) AS R16,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-5' AND s1.baseNodeDouble = t.baseNodeDouble) AS R17,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-6' AND s1.baseNodeDouble = t.baseNodeDouble) AS R18,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-7' AND s1.baseNodeDouble = t.baseNodeDouble) AS R19,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-8' AND s1.baseNodeDouble = t.baseNodeDouble) AS R20,
     (SELECT dataNode FROM cslogcurve_datanode s1 WHERE logCurveInfoUID = 'W-12B-01f34a-lci-9' AND s1.baseNodeDouble = t.baseNodeDouble) AS R21 
  FROM cslogcurve_datanode t ORDER BY R1 ASC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T04:40:30.173

改用[`IN`](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)子句。
句法：

```
SELECT DISTINCT <COLUMN> 
FROM <TABLE> 
WHERE <COLUMN> IN (<VALUE1>,<VALUE2>,...) 
ORDER BY <COLUMN>; 
```

所以你的查询应该是这样的：

```
SELECT DISTINCT dataNode 
FROM cslogcurve_datanode 
WHERE logCurveInfoUID IN ('W-12B-01f34a-lci-1', 'W-12B-01f34a-lci-10'
                         ,'W-12B-01f34a-lci-11','W-12B-01f34a-lci-12'
                         ,'W-12B-01f34a-lci-13',....)
ORDER BY dataNode ASC; 
```

# sql - 复杂的 SQL join 与 group by

> ID：12444397
> 
> 赞同：6
> 
> 时间：2012-09-16T04:24:45.597
> 
> 标签：sql, sql-server, sql-server-2008, join, group-by

我正在尝试优化需要很长时间的查询。查询的目标是获得最相似的 F2 。（特别是相似性度量）这是我所拥有的一个示例：

```
 CREATE TABLE Test
(
   F1 varchar(124),
   F2 varchar(124),
   F3 varchar(124)
)
INSERT INTO TEST ( F1, F2, F3 ) VALUES ( 'A', 'B', 'C' )
INSERT INTO TEST (  F1, F2, F3 ) VALUES ( 'D', 'B', 'E' )
INSERT INTO TEST (  F1, F2, F3 ) VALUES ( 'F', 'I', 'G' )
INSERT INTO TEST (  F1, F2, F3 ) VALUES ( 'F', 'I', 'G' )
INSERT INTO TEST (  F1, F2, F3 ) VALUES ( 'D', 'B', 'C' )
INSERT INTO TEST (  F1, F2, F3 ) VALUES ( 'F', 'B', 'G' )
INSERT INTO TEST (  F1, F2, F3 ) VALUES ( 'D', 'I', 'C' )
INSERT INTO TEST (  F1, F2, F3 ) VALUES ( 'A', 'B', 'C' )
INSERT INTO TEST (  F1, F2, F3 ) VALUES ( 'A', 'B', 'K' )
INSERT INTO TEST (  F1, F2, F3 ) VALUES ( 'A', 'K', 'K' ) 
```

现在如果我运行这个查询：

```
SELECT B.f2,COUNT(*) AS CNT  
FROM 
(
select F1,F3 from Test
where F2='B'
 )AS A
    INNER JOIN  Test AS B
   ON A.F1 = B.F1 AND  A.F3 = B.F3
GROUP BY B.F2 
ORDER BY CNT DESC 
```

该表有 1m+ 行。有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T04:58:40.227

你也可以用这种形式写你的查询，因为你有一个选择，所以你的检索时间会减少

```
SELECT  Test_1.F2, COUNT(Test_1.F1) AS Cnt 
FROM    Test 
INNER JOIN Test AS Test_1 ON Test.F1 = Test_1.F1 AND Test.F3 = Test_1.F3 
WHERE   (Test.F2 = 'B') 
GROUP BY Test_1.F2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T08:25:13.373

这是编写查询的另一种方法。接近 guido 在 MS SQL 中可运行的答案。

```
WITH Filtered AS (SELECT DISTINCT F1,F3 FROM Test WHERE F2='B')
SELECT B.f2,COUNT(*) AS CNT
  FROM Test B
       INNER JOIN Filtered
           ON B.F1 = Filtered.F1 AND B.F3 = Filtered.F3
 GROUP BY B.F2
 ORDER BY CNT DESC 
```

我认为您的原始查询可能有错误，就像 Fred 提到的那样。在您的示例中，F2="B" 的计数应该是 6，而不是 8，对吗？如果打算使用 8，则取出`DISTINCT`.

您可能会尝试的另一件事是将 TEST 表的聚集索引设为 (F2, F1, F3)，并在 (F1, F3) 上创建另一个非聚集索引。

示例代码也可以在[SqlFiddle](http://sqlfiddle.com/#!3/ff8bd/3)上找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T06:34:44.073

对所有行的过滤搜索`WHERE F2 = 'B'`将导致全表扫描，除非您创建的索引将 F2 作为其第一列或唯一列。再往下，连接条件涉及列 F1 和 F3，您提到的列已经是以 F1 开头的索引的一部分。

我还注意到，查询的第一部分并没有消除 T2 = 'B' 的 (T1, T3) 集合的重复项，正如人们在将该集合与同一个表的另一个子集相交时所期望的那样。您可能有这样做的理由，但在您提供有关您尝试实现的相似性测量算法的一些详细信息之前，我们无法确定。

您的`ORDER BY`子句还通过对最终结果集进行潜在的大型内部排序来影响查询运行时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T06:01:25.087

如果您的 Test 表有 1m+ 行，那么您分组的连接临时表很容易有数亿行。

这将在 mysql 中有效，但在 sql-server afaik 上无效：

```
SELECT F2,COUNT(*)
FROM Test AS B 
WHERE (B.F1,B.F3) IN (
  SELECT F1,F3 FROM Test
  WHERE F2='B') 
GROUP BY F2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-16T17:46:32.757

我意识到这已经得到了回答，但我认为这种方法可能会快得多，特别是如果 F1 和 F3 有很多重复值：

```
SELECT B.f2, sum(A.cnt) AS CNT  
FROM (select F1, F3, count(*) as cnt
      from Test
      where F2='B'
      group by f1, f3
     ) A INNER JOIN
     Test B
     ON A.F1 = B.F1 AND A.F3 = B.F3
GROUP BY B.F2 
ORDER BY CNT DESC 
```

如果 F1 和 F3 没有很多组合，那么第一个子查询应该减少到几百或几千行。（您的示例数据只有一个大写字母，因此如果使用所有字母，则组合数将为 576。）SQL Server 可能会对结果进行合并或散列连接，这应该会很好地执行。

您也可以使用 windows 函数在没有 join 和 group by 的情况下执行此操作：

```
select t.f2, sum(nummatches) as cnt
from (select t.*,
             sum(isB) over (partition by f1, f3) as nummatches
      from (select t.*,
                   (case when F2 = 'B' then 1 else 0 end) as IsB
            from test
           ) t
     ) t
group by t.f2
order by 2 desc 
```

窗口函数通常表现更好，因为它们适用于较小的数据块。

# vim - 在vim中输入两次{时如何禁用自动换行？

> ID：12444401
> 
> 赞同：0
> 
> 时间：2012-09-16T04:26:30.527
> 
> 标签：vim

你知道，在 Django 模板中，变量是用 {{ }} 包裹起来的，但是在 Vim 中（vi 和 gvim 是一样的），在你输入 {} 后，再输入一个 {，它会自动插入一个新的行而不是 { 。有谁知道如何禁用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:45:58.567

似乎该功能不可配置。您可能必须通过编辑自动关闭的源代码来禁用它。只有两行代码需要更改。

改变这个：

```
88         "inoremap <silent> { {<C-R>=<SID>CloseStackPush('}')<CR>
89         inoremap <silent> { <C-R>=<SID>OpenSpecial('{','}')<CR> 
```

至

```
88         inoremap <silent> { {<C-R>=<SID>CloseStackPush('}')<CR>
89         "inoremap <silent> { <C-R>=<SID>OpenSpecial('{','}')<CR> 
```

此外，您可以通过 暂时关闭自动关闭`<leader>a`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:22:23.220

如果您想将此自动关闭插件用于某些文件类型，例如仅用于 .c 和 .h 文件，则可以将其放入`.vim/ftplugin/c_autoclose.vim`and中`.vim/ftplugin/h_autoclose.vim`，也许可以从一个中心位置对其进行符号链接。

对我来说，一个影响如此之大的插件不会有一个开关来暂时禁用它，这对我来说似乎很奇怪。如果您修改它以添加一个`b:disable_autoclose`变量（`b:`变量可以在不同的缓冲区中具有不同的值）并使其尊重该值，那肯定会对该脚本进行改进。然后你可以做

```
autocmd BufNewFile,BufRead *.html let b:disable_autoclose=1 
```

或者只是制作一个键映射来切换它，这样您就可以将它用于任何嵌入式 CSS 或 JS，并为 Django 禁用它。

# python - 按 ctrl+c 时如何在多进程中获取共享目录

> ID：12444405
> 
> 赞同：0
> 
> 时间：2012-09-16T04:28:21.890
> 
> 标签：python

我在我的程序中使用多处理模块进行并行处理，我想获取多进程之间的共享dict对象，我可以在多进程正常关闭时进行，但按CTRL + C时无法获取，我怎样才能实现我的目标？我的代码如下

```
#!/usr/bin/python
from multiprocessing import Process, Manager, Pool
import os
import signal
import time

def init_worker():
    signal.signal(signal.SIGINT, signal.SIG_IGN)

def run_worker(i,my_d):
    print 'Work Started: %d %d' % (os.getpid(), i)
    for j in range(5):
        print j
        tmp1 = str(i) + str(j)
        my_d[tmp1] = j
        time.sleep(1)

def main():
    print "Initializng 3 workers"
    pool = Pool(3, init_worker)

    manager = Manager()
    my_d = manager.dict()
    try:
        for i in range(3):
            pool.apply_async(run_worker,args=(i,my_d))
        pool.close()
        pool.join()
        print my_d
# When process is closed normally, I could get the my_d successfully

    except KeyboardInterrupt:
        print "Caught KeyboardInterrupt, terminating workers"
        pool.terminate()
        pool.join()
        print my_d
#When process is closed by Ctrl+C, couldn't I get the my_d ?

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:38:48.557

您需要一个共享字典，来自多处理中的[Manager](http://docs.python.org/library/multiprocessing.html#sharing-state-between-processes) -Object。

在这里看到这个类似的问题（第一个答案）： [Python multiprocessing: How do I share a dict between multiple processes？](https://stackoverflow.com/questions/6832554/python-multiprocessing-how-do-i-share-a-dict-among-multiple-processes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:44:26.240

查看中断父进程时产生的错误：

```
Caught KeyboardInterrupt, terminating workers
<DictProxy object, typeid 'dict' at 0x801abe150; '__str__()' failed> 
```

尝试更改`print "Caught KeyboardInterrupt, terminating workers"`为`print len(my_d)`，您可以详细了解会发生什么。请注意，这是*在*您尝试终止/加入工人池之前：

```
Traceback (most recent call last):
  File "manager-test.py", line 39, in <module>
    main()
  File "manager-test.py", line 33, in main
    print len(my_d)
  File "<string>", line 2, in __len__
  File "/usr/local/lib/python2.7/multiprocessing/managers.py", line 755, in _callmethod
    self._connect()
  File "/usr/local/lib/python2.7/multiprocessing/managers.py", line 742, in _connect
    conn = self._Client(self._token.address, authkey=self._authkey)
  File "/usr/local/lib/python2.7/multiprocessing/connection.py", line 169, in Client
    c = SocketClient(address)
  File "/usr/local/lib/python2.7/multiprocessing/connection.py", line 293, in SocketClient
    s.connect(address)
  File "/usr/local/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.error: [Errno 2] No such file or directory 
```

当您中断主程序时，从子进程到管理器的连接将中断。这会使管理器（及其管理的对象）处于不可用状态。从管理器到子进程的套接字连接不再起作用，因此代理无法获取数据。

如果你想中断长时间运行的进程而不丢失数据，你应该更温和地做，我认为。像这样的东西：

```
import select
import sys

print 'Type q<enter> it you want to quit...'
while True:
    r, foo, bla = select.select([sys.stdin], [], [], 1)
    if len(r):
        what = sys.stdin.readline()
        if 'q' in what:
            print 'bye!'
            break;
    # E.g. check on the progress of your calculation here
# Close and join the pool here, and do other clean-up. 
```

# java - 如何从另一个 Maven 项目中引用一个 Maven 项目？

> ID：12444413
> 
> 赞同：3
> 
> 时间：2012-09-16T04:33:05.643
> 
> 标签：java, maven

我有一个开发中的库项目（IntelliJ 定义的模块），我想从其他项目中引用它。我将如何在其他项目中引用该项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T05:55:16.260

您可以在项目的 pom.xml 中使用依赖项或模块标记。取决于你想做什么。

```
<dependency>
        <groupId>com.mysubpro</groupId>
        <artifactId>myproject</artifactId>
        <version>1.0-SNAPSHOT</version>
</dependency> 
```

或者

```
<modules>
    <module>myproject</module>
</modules> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T04:42:34.943

你必须使用`mvn install`目标。这会将您的库安装到本地存储库。链接到[Maven 安装插件](http://maven.apache.org/plugins/maven-install-plugin/usage.html)。完成后，您可以在其他项目中依赖它。

# ruby-on-rails - Rails 中的文件访问控制

> ID：12444416
> 
> 赞同：0
> 
> 时间：2012-09-16T04:34:18.653
> 
> 标签：ruby-on-rails, ruby, ubuntu

我有一个网络应用程序，它允许用户上传文件并通过互联网与其他人共享。任何有权访问的人都可以下载文件，但如果上传者没有专门与其他人共享文件，则该人无法下载文件。

由于用户权限由 rails 控制，因此每次有人尝试下载文件时，它都会从 rails 进程发送给用户。这是一个严重的瓶颈——文件上传和权限需要rails，但它不应该只是为了让其他人下载文件而占用内存。

我想在前端、数据库和文件服务器的不同服务器上拆分应用程序。如果用户访问我的站点，他们应该能够直接从 my-fileserver.domain.com/file/38183 之类的文件下载文件，而不是通过 rails 运行它。

什么是最好的选择？我想控制数据库级别的文件访问，而不是文件系统 - 但我不希望 rails 为这样一个简单的过程占用我系统上的所有内存。有任何想法吗？

编辑：我可以做的一件事是将 mysql 中的文件/权限列表加载到 node.js 应用程序中，并根据文件服务器发送的内容作为真/假响应授予对文件服务器的访问权限。这个但是，仍然需要文件服务器来运行 Web 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:51:48.947

可能是您可以为文件生成一个 rand url，并由中心系统控制。

# hadoop - 从 HIVE 集成在 HBASE 表中插入数据

> ID：12444417
> 
> 赞同：3
> 
> 时间：2012-09-16T04:35:25.280
> 
> 标签：hadoop, integration, hbase, hive

我在下面的第 5 步中遇到错误...非常感谢任何帮助。

我正在遵循[https://cwiki.apache.org/Hive/hbaseintegration.html中给出的步骤](https://cwiki.apache.org/Hive/hbaseintegration.html)

步骤1

```
hive> CREATE TABLE tblHbase(key int, a int, b int,c bigint)
STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'
WITH SERDEPROPERTIES ("hbase.columns.mapping" = ":key,f:a,f:b,f:c")
TBLPROPERTIES("hbase.table.name"="tblHbase"); 
```

第2步

```
hbase(main):001:0> describe "tblHbase"
DESCRIPTION                                        ENABLED                   
 {NAME => 'tblHbase', FAMILIES => [{NAME => 'f', B true                      
 LOOMFILTER => 'NONE', REPLICATION_SCOPE => '0', V                           
 ERSIONS => '3', COMPRESSION => 'NONE', MIN_VERSIO                           
 NS => '0', TTL => '2147483647', BLOCKSIZE => '655                           
 36', IN_MEMORY => 'false', BLOCKCACHE => 'true'}]                           
 } 
```

步骤#3

```
hive> describe tblhive; 
```

OK id int a int b int c bigint

第4步

```
hive> select * from tblhive; 
```

正常 1 101 102 103 2 201 202 203

Step#5 -- 从 Hive 向 HBase 表插入数据时出错

```
hive> insert overwrite table tblHbase select id,a,b,c from tblhive;

Total MapReduce jobs = 1 Launching Job 1 out of 1 Number of reduce tasks is set to 0 
since there's no reduce operator Starting Job = job_1347311485447_0005, 
Tracking URL = <url_deleted> Kill Command = /usr/lib/hadoop/bin/hadoop job  -Dmapred.job.tracker=0.0.0.0:8021
-kill job_1347311485447_0005 Hadoop job information for Stage-0: 
number of mappers: 1; 
number of reducers: 0 
2012-09-10 18:19:35,844 Stage-0 map = 0%,  reduce = 0% Ended Job = job_1347311485447_0005 with errors Error during job, obtaining debugging information... 
Examining task ID: task_1347311485447_0005_m_000000 (and more) from job job_1347311485447_0005

Task with the most failures(4): 
----- Task ID:   task_1347311485447_0005_m_000000

URL:   http://x.x.x.x:50030/taskdetails.jsp?jobid=job_1347311485447_0005&tipid=task_1347311485447_0005_m_000000
-----

**FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask** 
MapReduce Jobs Launched:  Job 0: Map: 1   HDFS Read: 0 HDFS Write: 0 
FAIL Total MapReduce CPU Time Spent: 0 msec 
```

# c++ - 二叉搜索树 - 访问冲突

> ID：12444419
> 
> 赞同：0
> 
> 时间：2012-09-16T04:35:55.807
> 
> 标签：c++, c, data-structures

此方法找到 BST 中的最大节点，返回其值并将其删除。我在 处遇到访问冲突`prev->rightLink = cur->leftLink;`。我对C++比较陌生，找不到原因。

```
int CTree::popLargest(TreeNode* tr)
{   
    int largest;
    TreeNode* prev = NULL;
    TreeNode* cur = tr;

    while (cur->rightLink != NULL)
    {
        prev = cur;
        cur = cur->rightLink;
        largest = cur->info;
        //DeleteAttemptTwo(tr, largest);//DeleteItem(largest);     
    }

    if (cur->leftLink != NULL)
    {
        prev->rightLink = cur->leftLink;
    }
    else 
    {
        prev->rightLink = NULL;
    }

    return largest;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T04:42:04.250

这个 if 和 else 没有什么意义 -

```
if (cur->leftLink != NULL)
{
    prev->rightLink = cur->leftLink;
}
else 
{
    prev->rightLink = NULL;
} 
```

你想要做的事情可以通过 -`prev->rightLink = cur->leftLink;`

并且您在此语句上遇到访问冲突的原因是它`prev`没有指向有效节点，即它是`NULL`（初始化时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T04:45:06.417

如果树没有任何正确的孩子，prev 将保持为空并在执行时

```
prev->rightLink = cur->leftLink; 
```

您正在尝试访问空变量的属性，因此是“访问破坏”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T07:02:00.687

原因是 prev 仍然为 NULL。当你取消引用它时，你应该验证一个指针是否为NULL。顺便说一句，这个问题很容易通过调试找到。

```
const int INVALID_VALUE = -1;    // change it by yourself.
int CTree::popLargest(TreeNode* tr)
{  
    int largest = INVALID_VALUE;
    if (tr != NULL)
    {
        TreeNode* prev = NULL;
        TreeNode* cur = tr;
        while (cur->rightLink != NULL)
        {
            prev = cur;
            cur = cur->rightLink;
            largest = cur->info;
            //DeleteAttemptTwo(tr, largest);//DeleteItem(largest);     
        }
        if (prev != NULL)
        {
            if (cur->leftLink != NULL)
            {
                prev->rightLink = cur->leftLink;
            }
            else 
            {
                prev->rightLink = NULL;
            }
        }
    }
    return largest;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T04:40:57.660

您没有考虑`tr`没有正确元素（`tr->rightLink = NULL`, `cur = tr`）的情况，因此`while`循环的内容永远不会执行。在这种情况下，`prev`保持为`NULL`，这意味着您在`NULL`尝试访问 的`rightLink`元素时尝试取消引用`prev`。

尝试取消引用`NULL`将导致某种访问冲突错误。

# apache - 即使 kill -11 生成一个，Apache 也没有生成核心转储

> ID：12444420
> 
> 赞同：0
> 
> 时间：2012-09-16T04:36:07.800
> 
> 标签：apache, coredump

希望这很简单，但也许不是。

我在负载均衡器后面设置了4 个**RHEL5网络盒。**所有人都通过共享来提供大部分内容`NFS`。

偶尔（一天两次或更少）我会在内核的 syslog 中看到一条关于 apache 段错误的注释：

```
/var/log/messages.2:Sep 13 14:09:14 20050lpweb01 kernel: httpd[10006]: segfault at 00007fffae2eede8 rip 00002ab21a4045d4 rsp 00007fffae2eedd0 error 6 
```

有时，这也伴随着 apache 错误日志的消息，但并非总是如此：

```
# grep -ic seg /var/log/messages* |egrep -v '0$'
/var/log/messages.2:1
/var/log/messages.3:2
/var/log/messages.4:4
# zgrep -ic seg /var/log/httpd/error_log* |egrep -v '0$'
/var/log/httpd/error_log:1
/var/log/httpd/error_log.10.gz:1
/var/log/httpd/error_log.17.gz:1
/var/log/httpd/error_log.19.gz:1
/var/log/httpd/error_log.23.gz:1
/var/log/httpd/error_log.24.gz:2
/var/log/httpd/error_log.25.gz:1
/var/log/httpd/error_log.28.gz:2
/var/log/httpd/error_log.30.gz:1
/var/log/httpd/error_log.31.gz:1
/var/log/httpd/error_log.35.gz:1
/var/log/httpd/error_log.39.gz:4
/var/log/httpd/error_log.42.gz:1
/var/log/httpd/error_log.44.gz:3
/var/log/httpd/error_log.46.gz:1 
```

我已经按照整个网络的说明设置了核心转储：

```
echo "ulimit -c unlimited >/dev/null 2>&1" >> /etc/profile
echo "DAEMON_COREFILE_LIMIT='unlimited'" >> /etc/sysconfig/init
echo 1 > /proc/sys/fs/suid_dumpable
echo "core.%p" > /proc/sys/kernel/core_pattern
echo "CoreDumpDirectory /home/coredump" > /etc/httpd/conf.d/core_dumps.conf
mkdir /home/coredump
chown apache: /home/coredump
source /etc/profile
service httpd stop
service httpd start 
```

当我“诱导”一个段错误（kill -11）时，会生成核心转储：

```
/var/log/httpd/error_log:[Sat Sep 15 20:43:32 2012] [notice] child pid 20746 exit signal Segmentation fault (11), possible coredump in /home/coredumps 
```

但是当段错误自行发生时，不会进行核心转储：

```
/var/log/httpd/error_log:[Sat Sep 15 12:03:44 2012] [notice] child pid 10652 exit signal Segmentation fault (11) 
```

为什么会发生这种情况？如何确保每次都发生核心转储？

我们正在运行**PHP 5.2**，但除此之外，一切都是从标准**RHEL**或**EPEL 存储**库安装的。

# jsp - 为不同的http错误配置带有不同消息的单个jsp错误页面

> ID：12444422
> 
> 赞同：0
> 
> 时间：2012-09-16T04:37:07.910
> 
> 标签：jsp, servlets, web.xml, http-error

我正在开发一个网络应用程序。

我正在寻找在 web.xml 中配置错误页面。

我想**为不同的 http 错误（如 400,404 等）制作一个包含不同错误消息的错误页面。**

例如：我想对所有 http 错误使用相同的错误页面“error.jsp”。假设**如果出现错误 400**，jsp 应该显示**“Bad request”** ，**如果出现错误 404**，jsp 应该显示 messgae 为**“page not found”。**

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:46:00.767

这实际上是可能的并且相当简单。我将在这里发布3种方式。

1) Servlets 3.0 方式：如果您已经升级到最新的 Servlets 3.0，您可以通过省略`<error-code>`or`exception-type`元素`<error-page>`并提供`<location>`并为您的应用程序创建一个默认的 error.jsp 来非常容易地做到这一点。`

2) 显式输入所有 400 和 500 并将它们映射到您的 error.jsp 中`web.xml`；这是为了以防您使用的是较旧的容器并且不希望升级。[数量](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)不多

[3）这里](https://stackoverflow.com/a/6513444/608170)有第三种方式（@BalusC 的回答，我承认我尊重那个人的知识和他在 SO 上的声誉）

要在您的 error.jsp 中输出错误代码特定消息，请使用 `${requestScope['javax.servlet.error.status_code']}`a`switch-case`或`if-else-if`构造。

# jquery - JQuery 数据表行高

> ID：12444423
> 
> 赞同：7
> 
> 时间：2012-09-16T04:37:17.363
> 
> 标签：jquery, html, datatables, html-table, dynamic-tables

我有一个页面，人们可以在其中输入名字/姓氏、电话、电子邮件和种族，单击添加，它会在数据表中添加一个条目。问题是单击添加后，表格显示如下：

![桌子](../Images/876e0229624e39cac0623ac190172a13.png)

如何调整每行的高度以使其正确显示。这是我的表格的 html 代码：

```
<div id="table">
    <form id="add_nrow" title="Add">
        <br/>
        <label for="name">First Name</label><input type="text" name="fname" id="fname" class="required" rel="0" />
        <br />
        <label for="name">Last Name</label><input type="text" name="lname" id="lname" rel="1" />
        <br />
        <label for="name">Phone</label><input type="text" name="phone" id="phone" rel="3" />
        <br />
        <label for="name">Email</label><input type="text" name="email" id="email" rel="4" />
        <br />
        <label for="name">Ethnicity</label><input type="text" name="ethnicity" id="ethnicity" rel="5" />
        <br />   
        <input type="button" value="Add" id="addbtn" /><br/><br/>  
    </form>

    <table id="reg_more" border="1">
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Ethnicity</th>
            </tr>
        </thead>
    </table>
</div> 
```

这是我的jQuery代码

```
$("#addbtn").click(addrow);
$('#reg_more').dataTable({
                "bLengthChange": false,
                "bInfo": false,
                "bPaginate": false,
                "bStateSave": true,
                "rowHeight": 'auto',
                "bFilter": true,
                "bSort": false,
                "bAutoWidth": false
            });

function addrow() {
    $('#reg_more').dataTable().fnAddData( [
        $('#fname').val(),
        $('#lname').val(),
        $('#phone').val(),
        $('#email').val(),
        $('#ethnicity').val()] );
    } 
```

我真的有两个问题：

1.  如何正确调整高度以便用户可以看到数据？
2.  如果输入 20 个人的信息，我如何将所有这些数据输入到 mysql 数据库中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T13:14:20.553

正如您在这个[小提琴](http://jsfiddle.net/nicolapeluchetti/7Tm4t/3/)中看到的那样，您的代码是正确的，应该可以按预期工作。

无论如何设置行高，只需使用 css

```
 tr { height: 50px } 
```

我认为没有必要更复杂。

关于如何将数据插入数据库的问题，[google](https://www.google.it/#hl=it&sclient=psy-ab&q=basic+php+mysql+tutorial&oq=basic+php+mysql+tutorial&gs_l=hp.12...0.0.2.11211.0.0.0.0.0.0.0.0..0.0...0.0...1c.svaVYOLGrvo&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=d5b030dd275b5370&biw=1920&bih=955)上有大量示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-14T11:08:35.080

这是一个老问题，但如果你像我一样不想在 CSS 中这样做，你可以在 1.10 或更高版本中使用[drawCallback](https://datatables.net/reference/option/drawCallback)来使用 JS 更改表格单元格填充和/或高度。

```
var import_list = $( 'table.import_list' ).DataTable( {
    'drawCallback': function () {
        $( 'table.import_list tbody tr td' ).css( 'padding', '5px 8px 5px 8px' );
    }
} ) 
```

# c# - 将 backgroundworker 与 c dll 一起使用

> ID：12444425
> 
> 赞同：0
> 
> 时间：2012-09-16T04:37:43.397
> 
> 标签：c#, c, multithreading, dll, backgroundworker

我有一个调用**C dll的****c#** ui 。UI 会打开一个工作区，我希望 DLL 在用户在工作区中执行其他工作时在后台加载一个大文件。现在，UI 在 pinvoke 的帮助下与 DLL 进行通信。（这是 C dll 函数之一。）**`loadFile`**

 **在某些时候，用户将在工作区中执行一些需要完全加载文件的操作，因此需要以某种方式查询 DLL 是否已完成文件加载。我有**c#**和**C 代码**的源代码，所以我可以改变任何一方的东西。

作为**c#**的新手，而且只是一个业余的 C 编码器，我可以使用 a 来实现我想要的`c# backgroundWorker`吗？

或者使用某种形式的线程？

还是 C dll 会阻止所有内容，直到加载完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T04:50:58.983

您可以从后台工作组件调用 C 函数。此外，您需要确保触发后台工作人员的完成事件。这可以使用后台工作人员的属性进行设置。

这样，当后台工作人员完成其工作时，它会通知用户界面工作已完成，用户界面可以适当地处理图像。

在这里，您必须确保您的 C 代码是阻塞的，即不是多线程的，以确保仅在函数完成其工作后触发后台工作程序事件。**

# css - 如何修复 Internet Explorer 的字体

> ID：12444427
> 
> 赞同：0
> 
> 时间：2012-09-16T04:38:33.477
> 
> 标签：css, font-face

我有一个社交网络，允许用户为其个人资料选择字体。它在 Chrome、Safari 和 Firefox 上运行良好，但 IE7-9 运行不佳。

我应该在我的字体 php 文件中更改什么来回显一些不错的 css？这是代码：

```
$fontovi_style='';
foreach(explode(",", str_replace("\n",'',file_get_contents(ROOT.'media/font-list.txt'))) as $k=>$v){
$ime=str_ireplace('.ttf','',$v);
$fontovi_style.='@font-face {font-family:"'.$ime.'";src: url("/media/fonts/'.$v.'") 
format("truetype");}'."\n";
}
echo $fontovi_style; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:17:30.763

Internet Explorer 不支持 TTF，它只支持 EOT。

检查[此链接](http://randsco.com/index.php/2009/07/04/p680)以获取更多说明。

这在某种程度上是[这个问题的副本](https://stackoverflow.com/questions/4323078/css-font-issue-in-internet-explorer)

不过，我只想做一个观察：为每个页面动态生成这个列表会减慢页面加载速度，而且它会给你的服务器带来一些额外的负载（即它不可缓存，它会使你的页面更大，I/O 读取每次的字体列表等）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T16:48:05.353

转到此链接[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

上传你的字体

然后下载所有具有不同字体格式的文件，这些文件支持不同的浏览器并在您的项目中使用。现在它将在所有浏览器中正常工作

# php - 多部分表单数据不允许撇号？

> ID：12444429
> 
> 赞同：3
> 
> 时间：2012-09-16T04:38:37.990
> 
> 标签：php, forms

我正在使用以下表单代码：

```
<form enctype="multipart/form-data" action="process.php" method="POST">
 <input type="text" name="draftTitle"/>
 <textarea name="draftText" class="draftText"></textarea>
 <input type="file" name="uploadfile"/>
 <button class="draftSubmit">Add</button>
</form> 
```

如您所见，表单包含文本和文件的字段。当我在 textarea 中提交带有撇号的表单时，没有提交任何内容。在 process.php 中，我正在剥离斜杠并正确清理 POST 数据，但似乎问题与 from enctype 有关。关于如何防止撇号弄乱语法的任何想法？

***更新：这是表单的输出：***

```
-----------------------------276443266232757\r\nContent-Disposition: form-data;
name="MAX_FILE_SIZE"\r\n\r\n4000000\r\n-----------------------------276443266232757\r\nContent-Disposition: form-data;
name="userID"\r\n\r\n2\r\n-----------------------------276443266232757\r\nContent-Disposition: form-data;
name="lineID"\r\n\r\n1\r\n-----------------------------276443266232757\r\nContent-Disposition: form-data;
name="draftTitle"\r\n\r\nThis is my title\r\n-----------------------------276443266232757\r\nContent-Disposition: form-data;
name="uploadfile";
filename=""\r\nContent-Type: application/octet-stream\r\n\r\n\r\n-----------------------------276443266232757\r\nContent-Disposition: form-data;
name="draftText"\r\n\r\nIt's my description with an apostrophe in it.\r\n-----------------------------276443266232757--\r\n 
```

正如您将看到的，还有一些额外的字段。我在上面删除了它们以简化问题。

***更新***

我正在使用以下代码插入数据库。

```
$query = "INSERT INTO posts (line_id, user_id, stamp_title, element, type) VALUES ('$line_id', '$user_id', '$stamp_title', '$data', '$type')";
mysql_query($query); 
```

***已解决：*** 我添加了 mysql_real_escape_string 并且它有效。感谢所有帮助过的人！

```
$data = mysql_real_escape_string($data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T05:15:15.180

如果您的表单提交是：

```
-----------------------------276443266232757
Content-Disposition: form-data; name="MAX_FILE_SIZE"

4000000
-----------------------------276443266232757
Content-Disposition: form-data; name="userID"

2
-----------------------------276443266232757
Content-Disposition: form-data; name="lineID"

1
-----------------------------276443266232757
Content-Disposition: form-data; name="draftTitle"

This is my title
-----------------------------276443266232757
Content-Disposition: form-data; name="uploadfile"; filename=""
Content-Type: application/octet-stream

-----------------------------276443266232757
Content-Disposition: form-data; name="draftText"

It's my description with an apostrophe in it.
-----------------------------276443266232757-- 
```

这很好，你的撇号在那里。

但是，从这里到：

```
$query = "INSERT INTO posts (line_id, user_id, stamp_title, element, type) VALUES ('$line_id', '$user_id', '$stamp_title', '$data', '$type')";
mysql_query($query); 
```

似乎是问题所在，因为您在 SQL 插入中使用了撇号。您应该在每个输入变量上调用[`mysqli_real_escape_string()`](http://php.net/manual/en/mysqli.real-escape-string.php)or [`PDO::quote()`](http://php.net/manual/en/pdo.quote.php)（如果您有该扩展名）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T04:53:48.620

我的观察是，这不是 PHP 的问题，而是您用于将值放入数据库或文件的其余代码。请也发布该代码。

我假设您正在向 MySql 数据库插入值。为了帮助它，您可以在插入之前尝试[使用 Mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)函数为 mysql 准备它。

# extjs - 当我使用 'ext.js' 时项目不会启动，但在我使用 'extjs-all.js' 时可以工作

> ID：12444436
> 
> 赞同：0
> 
> 时间：2012-09-16T04:40:35.490
> 
> 标签：extjs, extjs4, extjs4.1

我使用这两个命令来压缩我的项目；

```
sencha create jsb -a http://localhost/Project/app.html -p a.jsb3 -v
sencha build -p a.jsb3 -v -d . 
```

然后在 app.html 文件中使用以下代码

```
<script type="text/javascript" src="extjs/ext.js"></script>
<script type="text/javascript" src="app-all.js"></script> 
```

但是，问题是当我运行应用程序时，我收到一条错误消息

```
"NetworkError: 404 Not Found - http://localhost/Project/MyApp/view/PersonView.js?_dc=1347769776730" 
```

和许多其他观点；但是当我更改`ext.js`为`ext-all.js`一切正常时。

但是如果我使用 ext-all.js 我想我正在调用所有的 extjs 类，这可能会降低启动速度。我应该如何更正我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:21:43.673

调用时应在 app.html 中包含 ext.js 或 ext-dev.js `sencha build tools`（不是 ext-all 变体）。请记住启用动态加载器以及配置为在 src 文件夹中查找 ExtJS 类。然后将创建一个具有正确 ExtJS 引用的 JSB3 文件。

```
 Ext.Loader.setConfig({
            enabled: true,
            paths: {
                'Ext': '/ext-4.1.1/src', 
                'Ext.ux': ... // Set UX path if you use any ux classes 
                // Set path for your classes as well
            }
        }); 
```

在启用 Firebug 的情况下运行网站并修复控制台选项卡中的任何警告。

# asp.net - 在 razor asp.net 中将表单值作为数组获取

> ID：12444439
> 
> 赞同：1
> 
> 时间：2012-09-16T04:41:31.840
> 
> 标签：asp.net, razor

我有一个带有值的表格

```
 Price  <input type="text" name="items[price]" value="" /> <br />
       Condition  <input type="text" name="items[condition]" value="" /> <br />
           Brand  <input type="text" name="items[brand]" value="" /> <br /> 
```

我想将此发送到数据库

```
 string[] allitems = Request.Form["items"];
    var db2x = Database.Open("mystring");

    foreach (var item in allitems)
    {
       var insertCommand2x = "INSERT INTO Classifieds_attr_value (AttrId,CarBikeId,AttrVal) VALUES(@0,@1,@2)";
       db2x.Execute(insertCommand2x, AttrId, CarBikeId, AttrVal);

   } 
```

这不起作用请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T04:55:37.147

您应该必须`items`对所有值使用值并通过方法`input`读取值。`Request.Form.GetValues("items")`

```
Price      <input type="text" name="items" value="" /> <br />
Condition  <input type="text" name="items" value="" /> <br />
Brand      <input type="text" name="items" value="" /> <br /> 
```

并读取值，

```
string []items=Request.Form.GetValues("items");
if(items!=null){
   //read
} 
```

*或者为名称*属性选择不同的值。

```
Price      <input type="text" name="price" value="" /> <br />
Condition  <input type="text" name="condition" value="" /> <br />
Brand      <input type="text" name="brand" value="" /> <br /> 
```

并读取键值，

```
string[] keys = Request.Form.AllKeys;
if (keys!= null)
 {
  foreach (var key in keys)
   {
   Response.Write("<br/>" + key + " " + Request.Form[key]);
   }
 } 
```

# javascript - 动态 div 不触发

> ID：12444446
> 
> 赞同：0
> 
> 时间：2012-09-16T04:45:03.210
> 
> 标签：javascript, jquery

我试图在我的 div 中创建一个动态滚动，在我到达 div 的底部之前，数据可以继续加载。我耳朵后面湿透了，不确定我是否以正确的方式看待这个问题，因为我的代码根本没有触发。任何指导将不胜感激

```
function  yHandler (){
    var movelist = document.getElementById('movelist');
    //turning div into an object
    var contentHeight = movelist.offsetHeight;
    //gets page content height, this so you know how much vetical pixel height you
    //have on the page
    var yOffset = movelist.pageYoffset;
    //get vertical scroll position, lets you know where the user is in their scroll
    //postion
    var y = yOffset + movelist.innerHeight;
    //getting inner height of div
    if(y >= contentHeight){
    //if the user scrolls to the bottom. If user goes over or hits it
        movelist.innerHTML += '<div class ="newData">hey look at me</div>';

    }

}

div.onscroll = yHandler; 
```

//监听并在 div 向上或向下滚动时触发 yHandler

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T04:55:20.497

代替

```
div.onscroll = yHandler; 
```

尝试

```
window.onscroll = yHandler; 
```

***[演示](http://jsfiddle.net/9zXL5/)***

* * *

## 但

如果你想将滚动处理程序设置为`div`with 然后试试这个：

```
/*
 *  Keep reference of div id=movelist
 *  out of yHandler method
 */

var movelist = document.getElementById('movelist'); 
function yHandler() {
    var contentHeight = movelist.offsetHeight;
    var yOffset = movelist.pageYoffset;
    var y = yOffset + movelist.innerHeight;
    if (y >= contentHeight) {
        movelist.innerHTML += '<div class ="newData">hey look at me</div>';
    }
}

// handler to div with id=movelist
movelist.onscroll = yHandler; 
```

***[工作样本](http://jsfiddle.net/9zXL5/4/)***​</p>

* * *

## 更新您的代码

```
var movelist = document.getElementById('movelist');

function yHandler() {
    var contentHeight = movelist.scrollHeight;
    var yOffset = movelist.clientHeight;
    var y = yOffset + movelist.scrollTop;
    if (y >= contentHeight) {
        movelist.innerHTML += '<div class ="newData">hey look at me</div>';
    }
}

movelist.onscroll = yHandler;​ 
```

​工作 ***[样本](http://jsfiddle.net/9zXL5/5/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:50:35.293

您应该替换以下行：

```
div.onscroll = yHandler; 
```

对于这个：

```
$(window).bind("scroll", yHandler); 
```

那会做你想做的事。

# azure - appfabric复合模型

> ID：12444448
> 
> 赞同：2
> 
> 时间：2012-09-16T04:45:45.737
> 
> 标签：azure

我想使用**appfabric**复合应用程序/模型开发一个应用程序，但我找不到任何最新更新。与它相关的帮助也很少出现在网络上，因此造成了混淆，这个功能是否在**2011 年 6 月 CTP**之后继续存在？

在未来的版本中是否有任何更新？

我还安装了 windows **azure toolkit 1.7**，之后安装了**azure appfabric sdk1.5**，但在 Visual Studio 项目模板中我找不到任何**appfabric**模板，如某些视频中所示。

我需要哪些额外的安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:55:56.583

在 Windows Azure 中，不再使用“App Fabric”一词，而是将所有属于“Windows Azure App Fabric *”的服务命名为完全不同的名称（服务总线、ACS、Cache * 等），具体到它们的目标。这就是为什么您在 Windows Azure 中看不到任何特定于“App Fabric”的最新文档的原因。现在，当使用特定于 Windows Server 特定服务模型的 App Fabric 术语时。

这是安装 Windows Azure SDK 1.7 时根本看不到任何特定于 App Fabric 的东西的另一个原因。

我不确定它会应用多少，但您肯定可以查看“[在 Windows Azure 上的云中构建混合应用程序 - 电子书](http://www.microsoft.com/en-us/download/details.aspx?id=30325&ocid=aff-n-we-loc--ITPRO40886)”，看看是否对您有帮助。

# jquery - 在一些 JQuery 对象的 html 中替换

> ID：12444450
> 
> 赞同：0
> 
> 时间：2012-09-16T04:45:48.090
> 
> 标签：jquery, replace

如果我有一些 JQuery 对象`$("#someDiv")`，它的 html()，

```
$("#someDiv").html(); 
```

等于：

```
<div id="bla_i">
  <input ... id="ble_i" />
</div> 
```

（即：很多嵌套元素，其中一些具有包含“_i”的 id 和名称）

**我怎样才能使所有这些 "_i" 成为 "_5" ？** 如何替换某些 JQuery 对象中的所有“_i”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T04:47:56.543

```
var html = $('#someDiv').html();  // get the html string

$(html)  // make jQuery object
       .find('[id*="_i"]')  // find elements with id contains "_i"
       .attr('id',function(i, oldId) {
          return oldId.replace('_i', '_5');  // replace all "_i" with "_5"
       }); 
```

# wordpress - 将第二个样式表提供给页面上也使用的侧边栏插件

> ID：12444453
> 
> 赞同：1
> 
> 时间：2012-09-16T04:46:38.570
> 
> 标签：wordpress, wordpress-theming, stylesheet

如何更改我在页面（模板）上使用的插件的外观而不影响它在侧边栏上的外观？这是我在该模板上使用的以下 php

```
<?php
/*
Template Name: hot
*/
?>

<?php get_header(); ?>

<div class="content-title">
What's Hot
<a href="javascript: void(0);" id="m"<?php if ($_COOKIE['mode'] == 'list') echo '     class="flip"'; ?>></a>
</div>

<?php if (function_exists('wpp_get_mostpopular')) wpp_get_mostpopular(); ?>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:20:44.553

如果将插件输出包装在 div 中，则可以直接在 CSS 中定位它。

```
<div id="something-unique">
    <?php if (function_exists('wpp_get_mostpopular')) wpp_get_mostpopular(); ?>
</div> 
```

在 css 中，您可以开始选择器以`#something-unique`仅针对模板。

# python - 使用python对列表进行排序时遇到问题

> ID：12444454
> 
> 赞同：1
> 
> 时间：2012-09-16T04:47:04.407
> 
> 标签：python, sorting

我对python有点陌生。我正在尝试对字符串和整数列表进行排序。列表包含一些需要过滤掉的符号（即 ro!ad 应该以 road 结尾）。而且，它们都在一行上，由空格隔开。所以我需要使用 2 个参数；一个用于输入文件，然后是输出文件。它应该先用数字排序，然后是没有特殊字符的单词，每个单词都在不同的行上。我一直在查看大量的列表函数，但是在将它们组合在一起时遇到了一些麻烦，因为我从来没有做过这样的事情。有接盘侠吗？

到目前为止，我有基本的东西

```
#!/usr/bin/python

import sys

try:
  infilename = sys.argv[1] #outfilename = sys.argv[2]
except:
  print "Usage: ",sys.argv[0], "infile outfile"; sys.exit(1)

ifile = open(infilename, 'r')
#ofile = open(outfilename, 'w')
data = ifile.readlines()
r = sorted(data, key=lambda item: (int(item.partition(' ')[0])
                               if item[0].isdigit() else float('inf'), item))
ifile.close()
print '\n'.join(r)
#ofile.writelines(r)
#ofile.close() 
```

输出准确地显示了文件中的内容，但与文件的写入完全一致，并且根本没有排序。目标是获取一个文件（arg1.txt）并对其进行排序并创建一个新文件（arg2.txt），该文件将是 cmd 行变量。在这种情况下，我使用 print 来加快编辑速度，但需要将其写入文件。这就是为什么输出文件区域被评论的原因，但如果我把它搞砸了，请随时告诉我我很愚蠢！谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:52:55.007

因为它们在同一行，所以你真的不需要 readlines

```
with open('some.txt') as f:
    data = f.read()  #now data = "item 1 item2 etc..." 
```

您可以使用 re 过滤掉不需要的字符

```
import re
data = "ro!ad"
fixed_data = re.sub("[!?@$]","",data) 
```

分区可能矫枉过正

```
data = "hello 23frank sam wilbur"
my_list = data.split() # ["hello","23frank","sam","wilbur"]
print sorted(my_list) 
```

但是你需要做更多的事情来强制数字排序可能是这样的

```
numbers = [x for x in my_list if x[0].isdigit()]
strings = [x for x in my_list if not x[0].isdigit()]
sorted_list = sorted(numbers,key=lambda x:int(re.sub("[^0-9]","",x))) + sorted(strings( 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T05:53:32.517

当您遇到此类问题时，通常最好在整个程序的各个点检查您的数据，以确保它看起来像您想要的那样。这里的问题似乎在于您在文件中阅读的方式。

```
data = ifile.readlines() 
```

将读取整个文件作为行列表。但是由于您要排序的所有条目都在一行上，因此该列表将只有一个条目。当您尝试对列表进行排序时，您将传递一个长度为 1 的列表，无论您的关键功能是什么，它都会返回相同的列表。尝试将行更改为

```
data = ifile.readlines()[0].split() 
```

您甚至可能不再需要按键功能，因为默认情况下数字放在字母之前。不过，我在您的代码中看不到任何删除特殊字符的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T05:54:45.417

> 而且，它们都在一行上，由空格隔开。

所以你的文件包含一行？

> 数据 = ifile.readlines()

这将`data`成为文件中行的列表。所有1个。

> r = 排序（...）

这使得`r`该列表的排序版本。

要从行中获取单词，您可以`.read()`将整个文件作为单个字符串，然后`.split()`它（默认情况下，它在空白处拆分）。

# .net - Eziriz .NET Reactor 混淆器性能

> ID：12444460
> 
> 赞同：1
> 
> 时间：2012-09-16T04:47:58.437
> 
> 标签：.net, vb.net, performance, security, obfuscation

我计划使用 .net reactor v4.5 来保护我的应用程序。我有一个用 vb.net 编写的 .NET 2.0 应用程序，针对性能进行了优化。如果我在软件中选择“应用程序最强”预设，是否会因为每次运行时解密/保护应用程序的开销过程而减慢我的应用程序的性能？

谢谢，阿尔伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:20:48.390

通常是的，具体取决于您选择的选项。

我已经尝试了**Eziriz .NET Reactor**和**Intellilock**几个月，当应用程序第一次启动时我确实注意到了非常轻微的延迟，但是在应用程序的运行时我看不到受保护和不受保护的应用程序之间的性能差异。

> “每次运行时保护应用程序”

这不是最终的原因，但更多是由于在编译时注入了额外的代码和函数，例如混淆行的循环。但也有一些选项甚至可能有助于提高性能（例如压缩）。总而言之，这取决于您选择的保护选项。

# javascript - iPhone - Safari 父窗口焦点问题

> ID：12444466
> 
> 赞同：3
> 
> 时间：2012-09-16T04:49:40.997
> 
> 标签：javascript, iphone, safari, window, focus

我正在开发的网站有一个特殊的问题。该问题*仅*发生在 iPhone(safari) 上。

我的设置如下。

1) 我有一个客户页面 - 显示一个初始页面，并有一个登录按钮。

2）用户单击登录按钮，并显示一个登录弹出/新窗口（这是通过使用 jquery 'submit' 函数和 target='_blank' 发布表单创建的）

客户.html

```
var formData = '<form style="display: none; margin: 0; padding: 0; border-width: 0; overflow: hidden;" id="MyFormId" action="https://MYSERVER.COM/v2/widgets" method="POST" target="_blank"><input type="hidden" name="action" value="connect"/><input type="hidden" name="referringURL" value="http://MYCLIENT.com/ClientPage.html"/><input type="hidden" name="cartOwnerId" value="A2R6QUFKT17A1O"/></form>';

jQuery("#"+this.getLocation()).append(formData);

jQuery("#"+formIdName).submit(); 
```

3) 用户在登录窗口输入凭据，然后提交。调用 SERVER 进行身份验证。在成功的身份验证中，我们想要

*   关闭登录窗口
*   将客户端页面重定向到新 URL

4）一切都按计划进行，除了客户端窗口（创建登录弹出/新窗口）没有返回全屏（登录窗口关闭后）。

如果我尝试将 window.opener.focus() 放在 LOGIN 页面 javascript 中，我将焦点放在 CLIENT 页面上，但 LOGIN 页面不会关闭（即使我将 window.close 放在 window.opener.focus 之前（ ))

```
LOGIN html
jQuery(document).ready(function() {
  ...
  ...

    window.close();

    window.opener.focus()
}); 
```

关于如何关闭登录窗口并将客户端页面重定向到新 URL 并使客户端窗口全屏显示，是否有任何提示？

任何提示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:03:33.600

Does something like this work:

In opener:

```
window.closePopup = function () {
  window.popup.close();
  window.focus();
}
// open login popup
window.popup = window.open(...); 
```

After user logs in in popup window:

```
window.opener.closePopup(); 
```

THat is, don't have a window close itself, but have the opener close the popup. I've tried something like this and it seems to work *sometimes*... I haven't quite been able to isolate why it doesn't work. I know one thing that happens in my case is that the user has to interact with the popup window in order for the `window.opener.closePopup()` to work...

# c# - 如何在 C# 中从 USB 令牌中读取证书

> ID：12444468
> 
> 赞同：6
> 
> 时间：2012-09-16T04:50:24.310
> 
> 标签：c#, usb, token, certificate

我有一个包含加密证书的 USB 令牌，该证书具有公钥和私钥。现在我想用 C# 创建一个应用程序，通过它我可以找到可访问的证书信息。当我插入 USB 令牌时，它正在被检测到，但计算机部分上没有显示驱动器，因为它发生在闪存驱动器上。

如何从 USB 驱动器读取证书？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-19T23:45:09.663

您可以浏览具有`X509Store`类的证书列表。它不仅会为您提供 USB 中的认证，还会为您的计算机提供认证。然后，`X509Certificate2UI`您可以从图形 UI 列表中选择正确的证书。

此实现示例可以很好地开始： http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2ui (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2ui(v=vs.110).aspx)

# sql-server - SQL Server 计算远程连接

> ID：12444471
> 
> 赞同：3
> 
> 时间：2012-09-16T04:50:44.450
> 
> 标签：sql-server, database-connection

我有一个使用 ado.net 的 asp.net 应用程序使用的 SQL 服务器数据库。服务器版本为 10.50.1600.1 c:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL 用户最终抱怨孤立连接和超出限制的连接。

我在笔记本电脑上启动管理工作室并远程连接到服务器。我使用相同的 ADO.NET 用户 ID 连接到 Management Studio。用户无权查看动态管理视图或启动分析器或活动监视器。

我想检查同一用户打开的连接数。（我使用 ADP.NET 用户连接管理工作室。）

我已经尝试过`sp_who`并`sp_who2`从 sys.processes 视图中进行选择，但我只得到关于我的本地连接的报告。

我期待为同一用户获得所有连接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-28T08:09:05.450

为此，您需要管理员用户，最低权限用户无法访问此类信息。

# html - 本地存在时避免下载 webfont

> ID：12444473
> 
> 赞同：3
> 
> 时间：2012-09-16T04:50:57.560
> 
> 标签：html, css, webfonts

当本地计算机上已经存在网站时，如何避免从网站动态加载网络字体（例如 Mylius Modern）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T04:53:14.627

您可以`local()`在 webfont 的`@font-face`块中使用源代码：

```
@font-face {
    font-family: Mylius Modern;
    src: local('Mylius Modern') …;
} 
```

但是，它*可能会*导致权限问题。

（... 是您应该放置其余源的位置，就像您可能已经在做的那样，用逗号分隔。但是，对于Internet Explorer 支持：确保*在*`src`包含，因为 IE8 和更早版本无法识别它。）`.eot`*`src``local()`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T04:57:06.547

对于其他网站，您无能为力。但是如果您想在您的网站上执行此操作，那么 css3 可以帮助您

```
@font-face {
  font-family: Mylius Modern;
  src: local(Mylius Modern),   /* use locally available Mylius Modern*/
       url(Mylius_Modern.ttf); /* otherwise, download it */
} 
```*

# vb.net - 使用 vb.net 从文本文件中查找和删除重复项

> ID：12444475
> 
> 赞同：1
> 
> 时间：2012-09-16T04:51:08.117
> 
> 标签：vb.net

我有一个巨大的文本文件，其中发生了大量重复。重复如下。

帖子总数 16

Pin Code = GFDHG
TITLE = 商店标志/投影标志/工业标志/餐厅标志/伦敦菜单板和盒子
DATE = 12-09-2012
跟踪密钥 # 85265E712050-15207427406854753

帖子总数 16

Pin Code = GFDHG
TITLE = 商店标志/投影标志/工业标志/餐厅标志/伦敦菜单板和盒子
DATE = 12-09-2012
跟踪密钥 # 85265E712050-15207427406854753

帖子总数 2894

Pin Code = GFDHG
TITLE = 商店标志/投影标志/工业标志/餐厅标志/伦敦菜单板和盒子
DATE = 15-09-2012
跟踪密钥 # 85265E712050-152797637654753

帖子总数 2894

Pin Code = GFDHG
TITLE = 商店标志/投影标志/工业标志/餐厅标志/伦敦菜单板和盒子
DATE = 15-09-2012
跟踪密钥 # 85265E712050-152797637654753

依此类推，此文本文件中有多达 4000 个帖子。我希望我的程序将总帖子 6 与文件中出现的所有总帖子以及在哪里找到重复项进行匹配，然后以编程方式删除该重复项并删除该重复项的下 7 行。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T18:45:14.303

假设格式是一致的（即文件中的每个记录事件总共使用 6 行文本），那么如果您要从文件中删除重复项，您只需要执行以下操作：

```
Sub DupClean(ByVal fpath As String) 'fpath is the FULL file path, i.e. C:\Users\username\Documents\filename.txt
        Dim OrigText As String = ""
        Dim CleanText As String = ""
        Dim CText As String = ""
        Dim SReader As New System.IO.StreamReader(fpath, System.Text.Encoding.UTF8)
        Dim TxtLines As New List(Of String)
        Dim i As Long = 0
        Dim writer As New System.IO.StreamWriter(Left(fpath, fpath.Length - 4) & "_clean.txt", False) 'to overwrite the text inside the same file simply use StreamWriter(fpath)

        Try
            'Read in the text
            OrigText = SReader.ReadToEnd

            'Parse the text at new lines to allow selecting groups of 6 lines
            TxtLines.AddRange(Split(OrigText, Chr(10))) 'may need to change the Chr # to look for depending on if 10 or 13 is used when the file is generated
        Catch ex As Exception
            MsgBox("Encountered an error while reading in the text file contents and parsing them. Details: " & ex.Message, vbOKOnly, "Read Error")
            End
        End Try

        Try
            'Now we iterate through blocks of 6 lines 
            Do While i < TxtLines.Count
                'Set CText to the next 6 lines of text
                CText = TxtLines.Item(i) & Chr(10) & TxtLines.Item(i + 1) & Chr(10) & TxtLines.Item(i + 2) & Chr(10) & TxtLines.Item(i + 3) & Chr(10) & TxtLines.Item(i + 4) & Chr(10) & TxtLines.Item(i + 5)

                'Check if CText is already present in CleanText
                If Not (CleanText.Contains(CText)) Then
                    'Add CText to CleanText
                    If CleanText.Length = 0 Then
                        CleanText = CText
                    Else
                        CleanText = CleanText & Chr(10) & CText
                    End If
                End If 'else the text is already present and we don't need to do anything

                i = i + 6
            Loop
        Catch ex As Exception
            MsgBox("Encountered an error while running cleaning duplicates from the read in text. The application was on the " & i & "-th line of text when the following error was thrown: " & ex.Message, _
                   vbOKOnly, "Comparison Error")
            End
        End Try

        Try
            'Write out the clean text
            writer.Write(CleanText)
        Catch ex As Exception
            MsgBox("Encountered an error writing the cleaned text. Details: " & ex.Message & Chr(10) & Chr(10) & "The cleaned text was " & CleanText, vbOKOnly, "Write Error")
        End Try
    End Sub 
```

如果格式不一致，您将需要更高级并定义规则来告诉在任何给定的循环中添加哪些行到 CText，但是如果没有上下文，我将无法给您任何关于什么的想法那些可能是。

# c# - 检查上传文件的类型

> ID：12444477
> 
> 赞同：3
> 
> 时间：2012-09-16T04:51:59.307
> 
> 标签：c#, asp.net, file-upload

如何检查`FileUploader`在 ASP.NET C# 网页中使用控件上传的文件的文件类型？

1.  `Leonardo.jpg`我尝试检查文件扩展名，但是当 JPEG 图像（例如）被重命名为具有 PDF 的扩展名（例如）时，它显然会失败`Leonardo.pdf`。

2.  我试过

    ```
    FileUpload1.PostedFile.ContentType.ToLower().Equals("application/pdf") 
    ```

    但这失败了，因为上面的代码与第一个代码的行为方式相同。

有没有其他方法可以检查实际文件类型，而不仅仅是扩展名？

我查看了[ASP.NET 如何检查文件类型的类型，而与扩展名无关](https://stackoverflow.com/questions/3458242/asp-net-how-to-check-type-of-the-file-type-irrespective-of-extension)。

**编辑：**我在stackoverflow中的一篇文章中尝试了下面的代码。但这不起作用。关于这个的任何想法。

```
/// <summary>
/// This class allows access to the internal MimeMapping-Class in System.Web
/// </summary>
class MimeMappingWrapper
{
  static MethodInfo getMimeMappingMethod;

    static MimeMappingWrapper() {
    // dirty trick - Assembly.LoadWIthPartialName has been deprecated
    Assembly ass = Assembly.LoadWithPartialName("System.Web");
    Type t = ass.GetType("System.Web.MimeMapping");

    getMimeMappingMethod t.GetMethod("GetMimeMapping", BindingFlags.Static | BindingFlags.NonPublic | BindingFlags.Public));
}

/// <summary>
/// Returns a MIME type depending on the passed files extension
/// </summary>
/// <param name="fileName">File to get a MIME type for</param>
/// <returns>MIME type according to the files extension</returns>
public static string GetMimeMapping(string fileName) {
    return (string)getMimeMappingMethod.Invoke(null, new[] { fileName });
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T05:08:32.713

不要使用文件扩展名来计算 MIME 类型，而是使用“Winista”进行二进制分析。

*假设有人`exe`用`jpg`扩展名重命名了一个。您仍然可以确定真正的文件格式。它不检测 swf 或 flv，但几乎可以检测所有其他众所周知的格式，您可以使用十六进制编辑器添加更多它可以检测到的文件。*

下载 Winista：[这里](http://www.netomatix.com/Products/DocumentManagement/MimeDetector.aspx)或[我的镜像](http://jeremythompson.net/rocks/mimedetect.zip)或我的 GitHub [https://github.com/MeaningOfLights/MimeDetect](https://github.com/MeaningOfLights/MimeDetect)。

在 Winista 无法检测到真实文件格式的地方，我求助于 URLMon 方法：

```
public class urlmonMimeDetect
{
    [DllImport(@"urlmon.dll", CharSet = CharSet.Auto)]
    private extern static System.UInt32 FindMimeFromData(
        System.UInt32 pBC,
        [MarshalAs(UnmanagedType.LPStr)] System.String pwzUrl,
        [MarshalAs(UnmanagedType.LPArray)] byte[] pBuffer,
        System.UInt32 cbSize,
        [MarshalAs(UnmanagedType.LPStr)] System.String pwzMimeProposed,
        System.UInt32 dwMimeFlags,
        out System.UInt32 ppwzMimeOut,
        System.UInt32 dwReserverd
    );

public string GetMimeFromFile(string filename)
{
    if (!File.Exists(filename))
        throw new FileNotFoundException(filename + " not found");

    byte[] buffer = new byte[256];
    using (FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read))
    {
        if (fs.Length >= 256)
            fs.Read(buffer, 0, 256);
        else
            fs.Read(buffer, 0, (int)fs.Length);
    }
    try
    {
        System.UInt32 mimetype;
        FindMimeFromData(0, null, buffer, 256, null, 0, out mimetype, 0);
        System.IntPtr mimeTypePtr = new IntPtr(mimetype);
        string mime = Marshal.PtrToStringUni(mimeTypePtr);
        Marshal.FreeCoTaskMem(mimeTypePtr);
        return mime;
    }
    catch (Exception e)
    {
        return "unknown/unknown";
    }
}
} 
```

从 Winista 方法内部，我在这里求助于 URLMon：

```
 public MimeType GetMimeTypeFromFile(string filePath)
    {
        sbyte[] fileData = null;
        using (FileStream srcFile = new FileStream(filePath, FileMode.Open, FileAccess.Read))
        {
            byte[] data = new byte[srcFile.Length];
            srcFile.Read(data, 0, (Int32)srcFile.Length);
            fileData = Winista.Mime.SupportUtil.ToSByteArray(data);
        }

        MimeType oMimeType = GetMimeType(fileData);
        if (oMimeType != null) return oMimeType;

        //We haven't found the file using Magic (eg a text/plain file)
        //so instead use URLMon to try and get the files format
        Winista.MimeDetect.URLMONMimeDetect.urlmonMimeDetect urlmonMimeDetect = new Winista.MimeDetect.URLMONMimeDetect.urlmonMimeDetect();
        string urlmonMimeType = urlmonMimeDetect.GetMimeFromFile(filePath);
        if (!string.IsNullOrEmpty(urlmonMimeType))
        {
            foreach (MimeType mimeType in types)
            {
                if (mimeType.Name == urlmonMimeType)
                {
                    return mimeType;
                }
            }
        }

        return oMimeType;
    } 
```

**更新：**

在这里使用魔法计算更多文件是一个[文件签名表](http://www.garykessler.net/library/file_sigs.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T04:59:29.840

检查名称或扩展名绝不是一个可靠的想法。您可以确定的唯一方法是您实际读取了文件的内容。

即如果你想检查文件中的图像，你应该尝试从文件中加载图像，如果失败，你可以确定它不是图像文件。这可以使用 GDI 对象轻松完成。

PDF 文件也是如此。

结论是，不要依赖用户提供的名称或扩展名。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-09T11:38:56.270

您可以通过以下方式检查 FileAppload 中的文件类型

**ValidationExpression="^.+.(([pP][dD][fF])|([jJ][pP][gG])|([pP][nN][gG])))$"**

例如：您可以为 Rar 文件类型等添加**([rR][aA][rR]) ...**

# c# - XPath 访问非统一的 XML 文件

> ID：12444481
> 
> 赞同：1
> 
> 时间：2012-09-16T04:52:39.933
> 
> 标签：c#, xml, c#-4.0, xpath

我有一个建模如下的 XML 文件：

```
<data>
    <customer>
        <id></id>
        <name></name>
        <model>
            <id></id>
            <name></name>
            <item>
                <id></id>
                <history>
                    <date></date>
                    <location></location>
                </history>
            </item>
            <item>
                <id></id>
                <history>
                    <date></date>
                    <location></location>
                </history>
            </item>
        </model>
        <model>
            <id></id>
            <name></name>
            <item>
                <id></id>
                <history>
                    <date></date>
                    <location></location>
                </history>
            </item>
        </model>
    </customer>
    <customer>
        <id></id>
        <name></name>
        <model>
            <id></id>
            <name></name>
            <item>
                <id></id>
                <history>
                    <date></date>
                    <location></location>
                </history>
            </item>
            <item>
                <id></id>
                <history>
                    <date></date>
                    <location></location>
                </history>
            </item>
        </model>
    </customer>
    <customer>
        <id></id>
        <name></name>
    </customer>
</data> 
```

在 C# 中使用 XPath，我需要为每个客户访问以下内容：

```
customer/id
customer/name
customer/model/id
customer/model/name
customer/model/item/id
customer/model/item/history/date
customer/model/item/history/location 
```

当任何给定客户的数据不存在时，存储的结果将为空，因为必须填充我的客户对象的所有字段。如果 XML 文件是统一的，这将很容易。我的问题是当每个客户可能有不同数量的模型和项目节点时访问每个客户的数据。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:03:19.893

假设结果将包含这些类型的对象：

```
Customer, Model, Item and History 
```

填充它们的伪代码是：

1.  选择所有`/data/customer`元素

2.  对于 1\. 中选择的每个节点，请执行以下操作：

3.  选择`./id`并`./name`填充对象的相应属性。

4.  从当前元素的所有子元素中填充一个`List<Model>`属性：`model``customer`

5.  选择`./model`当前元素的所有子元素。

6.  对于 5\. 中的每个选定`model`元素，创建一个模型对象并填充其属性：

7.  对于当前模型对象，通过选择当前元素的子`./id`元素来填充其 Id 和 Name 属性。`./name``model`

8.  从当前元素的所有子元素中填充一个`List<Item>`属性：`item``model`

9.  选择`./item`当前元素的所有子元素。

10.  对于当前 Item 对象，通过选择`./id`当前`item`元素的子元素来填充其 Id 属性。

11.  以类似的方式，使用 History 对象填充 Item 对象的 History 属性，该对象是从`./history`当前`item`元素的子元素创建和填充的。

当然，如果你使用 XML 序列化，你可以跳过所有这些——在这里阅读：http: [//msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

# ios - ios 将制表符分隔的文本加载到 Dictionary 和 UIPickerView

> ID：12444482
> 
> 赞同：0
> 
> 时间：2012-09-16T04:52:41.320
> 
> 标签：ios, nsdictionary

我正在尝试实现一个 UiPickerView，它将显示货币名称及其符号。

例如：美利坚合众国，美元 $

我有 406 个货币名称的完整列表，其中包含货币标识符、货币名称和以制表符分隔的符号：

USD 美国，美元 $

VND 越南盾 ₫</p>

我不想向用户显示标识符，只是名称和符号。我计划在代码中使用标识符。

我的问题是

1.  在应用程序中存储所有 406 种货币的最佳方式是什么？使用 AppName-Prefix.pch 对此有用吗？或者我应该使用 plist 吗？

2.  我应该如何以标识符为键将所有这些货币加载到字典中？我认为使用代码加载每个标识符不是一种有效的方法吗？

3.  除了使用这种向用户显示所有货币的方式，Apple 或 3rd 方 API 是否有更好的方式为我们提供所有流通货币的列表？

仅向用户显示所有货币选项以选择一个似乎太多工作......Apple 应该包含另一个 Picker 视图，就像他们为 Date Picker 提供的一样，它仅用于货币。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:06:19.790

解决此问题的一种方法是使用 CoreData。将它们全部保存在数据库中，以currencyList为实体，以currencyName、Country、Currency ID为属性。当用户执行查询时执行获取请求。仅显示所需的货币详细信息

# iphone - UIView布局建议

> ID：12444486
> 
> 赞同：1
> 
> 时间：2012-09-16T04:53:27.303
> 
> 标签：iphone, ios, uiview, custom-view, uipangesturerecognizer

我想创建一个 4x4 的正方形网格（每个正方形由一些空间分隔）。当用户将手指从一个正方形平移到另一个正方形时，我想突出显示正方形并在正方形之间画线（以显示它们是连接的）。

我创建了一个 GridView 自定义 UIView 和 16 个子 GridElement 自定义 UIView，布局为 4x4，我想使用平移手势来选择正方形和画线。这是正确的方法吗？

感谢您的回复。所以我尝试了你的建议。现在，我创建了 UIControl 的各个网格正方形子类，并且包含视图是它们操作的目标。我的包含视图是 UIView 的子类。包含视图接收到 UIControlEventTouchDown 事件但没有接收到 UIControlEventTouchDragExit 或 (Enter)

```
- (void) sendAction:(SEL)action to:(id)target forEvent:(UIEvent *)event {
    [super sendAction:action to:target forEvent:event]; 
}

- (void) sendActionsForControlEvents:(UIControlEvents)controlEvents {
    [super sendActionsForControlEvents:controlEvents];
}

- (BOOL) beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
    return YES;
}

- (BOOL) continueTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
    return YES;
} 
```

在我的 ContainerView 我有

```
[gridElement addTarget:self action:@selector(elementSelected:)forControlEvents:UIControlEventTouchDragEnter]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:25:36.713

This will only select the first square once the finger has moved enough to be considered a pan- you may need to add another recogniser to pick up the first touch.

If I were doing this, I'd approach it differently. You could make your individual grid squares UIControl subclasses, and make your containing view the target for their actions. UIControls already respond to events such as touch down inside, touch drag entered, touch up inside etc. you can pass these events to the containing view and highlight/draw lines as appropriate as the user moves their finger around.

# ruby-on-rails - Rails 3.2.6 和 dbi

> ID：12444495
> 
> 赞同：0
> 
> 时间：2012-09-16T04:55:39.387
> 
> 标签：ruby-on-rails, ruby, gem, dbi, incompatibility

我有一个小型 Rails 应用程序，它在 Ruby 1.8x 和 Rails 2.x 上运行良好。在一个令人遗憾的决定中，我决定迁移到 Ruby 1.9.x 和 Rails 3，这是一个光荣的痛苦。

我的 Ruby 应用程序使用 MySQL，为此我使用 Active Record。但是，在我使用 Rails (2.x) 之前，我已经编写了一个用于填充数据库的早期 pgm，它现在是完整应用程序的一部分。（我可以在 Rails 之外测试/运行独立的 pgm，没有问题。）

这个独立程序使用 MySQL 和 dbi gems。我从一个模型中调用这个程序：

```
 system("ruby standalonepgm.rb -args ") 
```

在 Rails 2.0 中，这没有任何问题。在 3.0 中，程序退出时没有任何方法来捕获错误。

在控制台下运行我看到程序死了，因为它找不到 dbi gem！

如果我将 dbi gem 放在 Gemfile 中并进行捆绑日期，那么就会有真正的麻烦。Rails 拒绝启动 - rails 服务器因各种问题而死机。我可以放入屏幕转储，但我认为这并不重要。

似乎有2个问题：

1.  DBI 肯定与 Rails 之神格格不入
2.  Rails 创建了一个沙箱，所有被调用的程序都必须存在于该沙箱中（这就是为什么仅仅一个 require 语句是不够的......它必须在 Gemfile 中）。

它是否可以修复，或者我是被隐藏的铁轨黑魔法咬伤的人之一，而我过去 8 多周的努力是失败的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T00:25:57.337

通过使用 Bundle.with_clean_env do system("ruby pgm.rb" end

我从来没有读过捆绑文档..这个案例在里面有描述..

# python - 自动文本摘要

> ID：12444496
> 
> 赞同：2
> 
> 时间：2012-09-16T04:55:40.777
> 
> 标签：python, django, nlp, summarization

我决定使用 Python/Django 开发一个**自动文本摘要**工具。

有人可以推荐有关如何入门的书籍或文章吗？

**自动文本摘要**中是否有任何开源算法或制作项目，以便我能够获得这个想法？

另外，您想建议我在 Django/Python 中为我准备的新的具有挑战性的 FYP 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-15T22:30:47.887

首先是纸，我建议：

1- 最近的自动文本摘要技术：M.Gambhir 和 V.Gupta
的调查 2- 文本摘要技术的调查，A.Nenkova

至于 Python 的工具，我建议看看这些工具：

1.  征服者：NLTK
2.  王子：TextBlob
3.  佣兵：斯坦福 CoreNLP
4.  篡位者：spaCy
5.  The Admiral: gensim
    首先了解不同类型的总结以及最适合您的。此外，请记住确保您拥有适合您所针对的语言的预处理工具，因为这对于摘要器的质量非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-20T08:33:16.300

关于论文，我想在上一个答案中添加下一个：

1.  “文本数据管理与分析”，ZhengXang Zhai 和 Sean Massung，第 16 章。
2.  “计算机科学文本：预测文本挖掘的基础”，Sholom M. Weiss、Nitin Indurkhya 和 Tong Zhang（第二版），第 9 章。

# elasticsearch - query_string 中的弹性搜索模糊性

> ID：12444497
> 
> 赞同：9
> 
> 时间：2012-09-16T04:55:56.577
> 
> 标签：elasticsearch

我在查询字符串中指定了一个fuzzy_prefix_length，但是搜索“tes”并没有拉出标题为“test”的帖子......任何想法我做错了什么？

这是我的查询字符串设置

```
"query" : {
  "query_string" : {
    "query" : the-query-string-goes-here,
    "default_operator" : "AND",
    "fuzzy_prefix_length" : 3,
  }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T23:54:24.430

您可能在查询末尾缺少“模糊”运算符。试试这个：

```
"query" : {
  "query_string" : {
    "query" : "tes~",
    "default_operator" : "AND",
    "fuzzy_prefix_length" : 3,
  }
} 
```

# asp.net-mvc - 使用 Knockout.js 将 JSON 数组与 HTML 列表绑定

> ID：12444499
> 
> 赞同：1
> 
> 时间：2012-09-16T04:56:16.267
> 
> 标签：asp.net-mvc, knockout.js

我是 knockout.js 框架的新手，我陷入了一个相当简单的问题，即将 JSON 数组与 html UL 列表绑定。html标记如下：

```
<div id="genres">
    <ul data-bind="foreach: GenreCollection">
        <li>
            <a href="#"><span data-bind="text: $data"></span></a>
        </li>
    </ul>
</div> 
```

我使用以下标记来捕获作为模板绑定数据传入的 JSON 数据：

```
<pre data-bind="text: ko.toJSON($data, null, 2)"></pre> 
```

JSON输出是：

```
{
  "GenreCollection": [
    "Action & Adventure",
    "Action Comedies",
    "Action Sci-Fi & Fantasy",
    "Action Thrillers",
    "Anime Action",
    "Bollywood Action & Adventure",
    "British Action & Adventure",
    "Classic Action & Adventure",
    "Crime Action & Adventure",
    "Foreign Action & Adventure",
    "Independent Action & Adventure",
    "Military Action & Adventure",
    "Spy Action & Adventure",
    "TV Action & Adventure"
  ]
} 
```

视图模型：

```
 function viewModel(){
        var self = this;
        self.GenreCollection = ko.observableArray([]);

        self.addData = function (data) {
        for (var item in data) {            
            self.GenreCollection.push(data[item]);
        }
    }
}

GenreNamespace.bindData = function (data) {
    var obj = new viewModel();
    obj.addData(data);
    ko.applyBindings(obj);
}

GenreNamespace.getData = function (searchText) {
    $.ajax({
        url: 'Genre/SearchGenre',
        type: 'POST',
        data: JSON.stringify(searchText),
        dataType: 'json',
        processData: false,
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            GenreNamespace.bindData(data);
        },
        error: function (message) {
            alert(message);
        }
    });
} 
```

任何人都可以帮助我弄清楚上述html模板中的问题所在。我正在使用 VS 2012 和 Knockout 2.1 框架。

谢谢

# c++ - 使用 find_first_of() 和 substr() 分隔字符串，但输出不正确

> ID：12444501
> 
> 赞同：0
> 
> 时间：2012-09-16T04:56:25.363
> 
> 标签：c++

我正在从一个包含一些汇编指令的文本文件中读取，如下所示

[标签] 操作码 [arg1] [,arg2]

现在我只处于读取标签的阶段，但是当我从文件中读取并将标签输入到数组中时，我得到了一些不应该存在的空白行。这是我的代码

```
#include <string>
#include <iostream>
#include <cstdlib>
#include <string.h>
#include <fstream>
#include <stdio.h>

using namespace std;

int main(int argc, char *argv[])
{
// If no extra file is provided then exit the program with error message
if (argc <= 1)
{
    cout << "Correct Usage: " << argv[0] << " <Filename>" << endl;
    exit (1);
}

// Array to hold the registers and initialize them all to zero
int registers [] = {0,0,0,0,0,0,0,0};

string memory [16000];

string Symtablelab[1000];
int Symtablepos[1000];

string line;
string label;
string opcode;
string arg1;
string arg2;

// Open the file that was input on the command line
ifstream myFile;
myFile.open(argv[1]);

if (!myFile.is_open())
{
    cerr << "Cannot open the file." << endl;
}

int counter = 0;
int i = 0;
int j = 0;

while (getline(myFile, line, '\n'))
{

    if (line[0] == '#')
    {
        continue;
    }

    if (line[0] != '\t' && line[0] != ' ')
    {

        string delimeters = "\t";

        int current;
        int next = -1;

        current = next + 1;
        next = line.find_first_of( delimeters, current);
        label = line.substr( current, next - current );

        Symtablelab[i] = label;

        cout << Symtablelab[i] << endl;

        i++;

    }

}

return 0;
} 
```

我从这段代码得到的输出是：

```
blank line
TOP
VAL
TAN
blank line 
```

我应该只得到：

```
TOP
VAL
TAN 
```

这是我正在阅读的示例文本文件

```
# Sample Input

    LA 1,3
    LA 2,1
TOP     NOP
    ADDR 3,1
    ST 3, VAL
    CMPR 3,4
    JNE TOP
    P_INT 1,VAL
    P_REGS
    HALT
VAL     INT 0
TAN     LA  2,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:02:25.640

注释后的空行和末尾的隐式空行会导致您的问题。您应该在空行的注释检查之后添加一个检查。

```
if (line.length == 0) {
  continue;
} 
```

# c++ - 从隐式转换中复制构造 shared_ptr 有什么问题？

> ID：12444503
> 
> 赞同：12
> 
> 时间：2012-09-16T04:57:09.683
> 
> 标签：c++, c++11, compiler-errors, g++, type-conversion

考虑这个最小的例子：

```
#include <memory>

struct B {
  typedef std::shared_ptr<B> Ptr;
};

struct A {
  operator B::Ptr() { // type conversion operator                  <----+
    return std::make_shared<B>();  //                                   |
  }                                //                                   |
};                                 //                                   |
                                   //                                   |
int main() {                       //                                   |
  A* a = new A;                    //                                   |
  B::Ptr{*a}; // copy construction from a's implicit cast to B::Ptr ----+ 
} 
```

这种无害的 a 副本构造`shared_ptr<B>` **在 g++ 4.6.3 x86_64-linux-gnu 上非常失败，**但似乎适用于[g++ 4.5](http://ideone.com/RKkgS)（请注意，较新的版本会中断，而较旧的版本可以工作！）。从我可以从错误（见下文）中看出，g++ 4.6 似乎是`A`按值传递，而不是按（r 或 l）引用传递。

所以，问题是，哪个是正确的，哪个是错误的？这种行为应该失败吗？如果是这样，为什么？
据我了解转换规则，此时`B::Ptr` *应该*尝试隐式转换，对吗？

* * *

[注意：我将此示例简化为纯粹的技术问题，并且此代码对任何生产系统都没有意义。]

这是精确的错误：

```
shp.cpp: In function ‘int main()’:
shp.cpp:17:12: error: no matching function for call to ‘std::shared_ptr<B>::shared_ptr(<brace-enclosed initializer list>)’
shp.cpp:17:12: note: candidates are:
/usr/include/c++/4.6/bits/shared_ptr.h:315:2: note: template<class _Alloc, class ... _Args> std::shared_ptr::shared_ptr(std::_Sp_make_shared_tag, const _Alloc&, _Args&& ...)
/usr/include/c++/4.6/bits/shared_ptr.h:266:17: note: constexpr std::shared_ptr<_Tp>::shared_ptr(std::nullptr_t) [with _Tp = B, std::nullptr_t = std::nullptr_t]
/usr/include/c++/4.6/bits/shared_ptr.h:266:17: note:   no known conversion for argument 1 from ‘A’ to ‘std::nullptr_t’
/usr/include/c++/4.6/bits/shared_ptr.h:258:2: note: template<class _Tp1, class _Del> std::shared_ptr::shared_ptr(std::unique_ptr<_Up, _Ep>&&)
/usr/include/c++/4.6/bits/shared_ptr.h:253:2: note: template<class _Tp1> std::shared_ptr::shared_ptr(std::auto_ptr<_Tp1>&&)
/usr/include/c++/4.6/bits/shared_ptr.h:248:11: note: template<class _Tp1> std::shared_ptr::shared_ptr(const std::weak_ptr<_Tp1>&)
/usr/include/c++/4.6/bits/shared_ptr.h:236:2: note: template<class _Tp1, class> std::shared_ptr::shared_ptr(std::shared_ptr<_Tp1>&&)
/usr/include/c++/4.6/bits/shared_ptr.h:226:7: note: std::shared_ptr<_Tp>::shared_ptr(std::shared_ptr<_Tp>&&) [with _Tp = B, std::shared_ptr<_Tp> = std::shared_ptr<B>]
/usr/include/c++/4.6/bits/shared_ptr.h:226:7: note:   no known conversion for argument 1 from ‘A’ to ‘std::shared_ptr<B>&&’
/usr/include/c++/4.6/bits/shared_ptr.h:218:2: note: template<class _Tp1, class> std::shared_ptr::shared_ptr(const std::shared_ptr<_Tp1>&)
/usr/include/c++/4.6/bits/shared_ptr.h:206:2: note: template<class _Tp1> std::shared_ptr::shared_ptr(const std::shared_ptr<_Tp1>&, _Tp*)
/usr/include/c++/4.6/bits/shared_ptr.h:184:2: note: template<class _Deleter, class _Alloc> std::shared_ptr::shared_ptr(std::nullptr_t, _Deleter, _Alloc)
/usr/include/c++/4.6/bits/shared_ptr.h:165:2: note: template<class _Tp1, class _Deleter, class _Alloc> std::shared_ptr::shared_ptr(_Tp1*, _Deleter, _Alloc)
/usr/include/c++/4.6/bits/shared_ptr.h:146:2: note: template<class _Deleter> std::shared_ptr::shared_ptr(std::nullptr_t, _Deleter)
/usr/include/c++/4.6/bits/shared_ptr.h:129:2: note: template<class _Tp1, class _Deleter> std::shared_ptr::shared_ptr(_Tp1*, _Deleter)
/usr/include/c++/4.6/bits/shared_ptr.h:112:11: note: template<class _Tp1> std::shared_ptr::shared_ptr(_Tp1*)
/usr/include/c++/4.6/bits/shared_ptr.h:103:7: note: std::shared_ptr<_Tp>::shared_ptr(const std::shared_ptr<_Tp>&) [with _Tp = B, std::shared_ptr<_Tp> = std::shared_ptr<B>]
/usr/include/c++/4.6/bits/shared_ptr.h:103:7: note:   no known conversion for argument 1 from ‘A’ to ‘const std::shared_ptr<B>&’
/usr/include/c++/4.6/bits/shared_ptr.h:100:17: note: constexpr std::shared_ptr<_Tp>::shared_ptr() [with _Tp = B]
/usr/include/c++/4.6/bits/shared_ptr.h:100:17: note:   candidate expects 0 arguments, 1 provided 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T21:10:21.683

在当前版本的标准下，代码不正确（我正在查看后标准草案 n3376）。

列表初始化的规则指定：

> ### 13.3.1.7 通过列表初始化 [over.match.list] 进行初始化
> 
> 1 - 当非聚合类类型的对象`T`被列表初始化时[...]：
> 
> *   如果没有找到可行的初始化列表构造函数，则再次执行重载决议，其中候选函数是类的所有构造函数，`T`参数列表由初始化列表的元素组成。

但是，当重载决议应用于采用`B::Ptr`单个参数的复制构造函数时`const std::shared_ptr<B> &`，参数列表是`(*a)`，由一个*lvalue* `A`类型的元素组成；不允许重载决议考虑转换函数`A::operator B::Ptr`：

> ### 13.3.3.1 隐式转换序列 [over.best.ics]
> 
> 4 - 但是，当考虑构造函数或用户定义的转换函数的参数时，它是 13.3.1.7 [...] 的候选 [...] 当初始化器列表只有一个元素并且转换到某个类 X或对（可能是 cv 限定的）X 的引用被认为是 X [...] 的构造函数的第一个参数，仅考虑标准转换序列和省略号转换序列。

所以g++-4.6拒绝这个代码是正确的；g++-4.7.2 不幸地接受了它，这是不正确的。

编写此代码的正确方法是使用直接初始化 ( `B::Ptr(*a)`) 或`static_cast<B::Ptr>`.

允许转换的限制可以追溯到论文[n2672](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2672.htm)，尽管在该论文中第 13.3.3.1p4 段仅适用于*用户定义的转换函数的参数*。[在缺陷 978](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n3006.html#978)中添加了对构造函数的附加限制：

> ### 978\. 拷贝初始化的指定不正确
> 
> 13.3.3.1 [over.best.ics] 第 4 段说，
> [...]
> 这不太正确，因为这适用于构造函数参数，而不仅仅是用户定义的转换函数的参数。

13.3.3.1p4 的当前措辞可以追溯到开创性[缺陷 84](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#84)，它引入了“*普通法规则，即仅调用单个用户定义的转换来进行隐式转换*”。

我对这个答案有点不安；我问过[是否可以通过列表初始化调用用户定义的转换函数？](https://stackoverflow.com/questions/12677711/is-it-possible-to-invoke-a-user-defined-conversion-function-via-list-initializat)看看是否有人可以在这里澄清标准的意图。

# ios - Xcode Instruments Leaks Cycles 图上的“no ivar”

> ID：12444504
> 
> 赞同：11
> 
> 时间：2012-09-16T04:57:34.317
> 
> 标签：ios, memory-leaks, instruments

我正在使用仪器检查我的应用程序是否泄漏，并且我正在尝试学习如何读取泄漏周期数据。我在我的一个泄漏点上得到了这张图：

![在此处输入图像描述](../Images/07564cf55a7f137a0fb401f1ea9deb36.png)

如果图表是什么意思？“没有 ivar”是什么意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T18:26:33.610

“no ivar”消息类似于查看已剥离其符号的程序的调用堆栈。如果您正在查看调用堆栈，您会看到内存地址而不是函数名。在您的示例中，仪器显示地址 +16 和 +24。Instruments 找不到分配内存的变量名称，因此您会收到 [no ivar] 消息。

我没有办法让 Instruments 提供更好的信息。我从来没有让 Instruments 对泄漏周期做很多事情。

更新

如果您试图查找代码泄漏内存的位置，我建议您切换到调用树视图，您可以从跳转栏中执行此操作。选择 Invert Call Tree 和 Hide System Libraries 复选框可以更轻松地在调用树视图中定位您的代码。复选框位于跟踪文档窗口的左侧。

# shell - 在linux中绘制图形

> ID：12444509
> 
> 赞同：1
> 
> 时间：2012-09-16T04:58:43.567
> 
> 标签：shell, graph, gnuplot, gnu

我有一个文件，其中包含两个实体之间的映射。我必须使用 linux 在图中绘制 x 和 Y 轴。X 轴是 Time like (12:35:07)，Y 轴将有一些整数范围 (1-14)。我需要使用一些应该从 linux shell 脚本调用的方法来绘制 x 和 Y 轴。X 轴将总共有大约 500 到 800 个样本。说（从 12:14:00 到 12:30:00）。谁能帮帮我。我尝试使用 GNUplot，但图表不正确。示例输入如下

```
12:34:58   5
12:35:06   9
12:35:07   14
12:35:07   13
12:35:08   4
12:35:08   5
12:35:17   9
12:35:17   13
12:35:18   14
12:35:19   4
12:35:19   5 
```

这是我写的

```
1 set terminal png
2 set output 'test.png'
3 set xdata time
4 set timefmt "%H:%M:%S"
5 set yrange [1:15]
6 plot  "Graph1" using 1:2 title 'data A' 
```

我遇到的问题是因为图像有大量样本（大约 700 个间隔，我无法正确看到每个值。Y 轴也不正确。我需要将 Y 轴限制为仅 10 个值（1- 10). 另外我需要绘制 4 个相似的图表并将每个图表放在每个角落（子图）。我还没有在 GNUplot 中完成子图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:36:57.650

看来你现在有三个主要问题。对于其中一些人来说，问题并不完全清楚，因此如果您可以更新您的问题（或发表评论）以澄清，这将有所帮助，我可以更新我的回复。

**1) 无法正确查看约 700 个值中的每一个。**

在这里，我需要澄清一下。我假设您不想单独查看 700 个数据点中的每一个，而是希望能够摆脱在绘制时间值时发生的 x 轴上的杂乱。为此，您可以使用命令

```
set xtics X 
```

其中 X 是您想要的抽动之间的间隔，在本例中为秒数。这是你想要的吗？

你也可以使用

```
set format x '%M:%S' 
```

（或其他）如果您想控制 x 值在轴上的显示方式。

**2) y 轴需要限制为 10 个值。**

这里也不完全清楚你在找什么。您想将所有内容缩小到 1 到 10 之间吗？呈现的数据范围是 4 到 14，因此减去 4 可以得到 0 到 10 之间的数据，如下所示：

```
plot  "Graph1" using 1:($2-4) title 'data A' 
```

如果您想将任意 y 数据集限制在 1 到 10 之间，那就有点棘手了：

```
stats "Graph1"
plot "Graph1" using 1:(($2-STATS_min_y)*9/(STATS_max_y-STATS_min_y)+1) title 'data A' 
```

该`stats`命令在绘制文件之前获取有关文件的统计信息。convoluted plot 命令应该在 y 轴上将所有内容缩放到 1 到 10 之间。

**3）你想要有 4 个子图。**

这很容易。在您的第一个绘图命令之前，使用命令

```
set multiplot layout 2,2 
```

这将为您的绘图创建一个 2x2 网格。每个绘图命令都将绘制在一个新的子图上。在 gnuplot 命令行中键入`help set multiplot`以获取有关更改使用的子图序列的详细信息。

# ios - 如何为自定义绘制文本的大小设置动画？

> ID：12444515
> 
> 赞同：0
> 
> 时间：2012-09-16T04:59:49.010
> 
> 标签：ios, core-animation, core-graphics, core-text

我正在开发一个涉及复杂脚本的教育应用程序，我在其中绘制不同“字母”不同颜色的部分。 `UILabel`是不可能的，所以我深入研究了 Core Text，并且在`CALayers`.

我没有设法做的是为我的自定义绘制文本的大小设置动画。`CALayers`基本上，我在屏幕上移动的“图块”( ) 上有文字。四处走动是可以的，但现在我想放大用户按下的那些。

我的想法是尝试缓存“全分辨率”图块，然后在图像边界动画期间将其绘制为缩放。到目前为止，我已经尝试通过以下方式绘制和缓存，然后重绘这样的图块：

```
UIGraphicsBeginImageContext(CGSizeMake(50, 50));
CGContextRef context = UIGraphicsGetCurrentContext();

//do some drawing...

myTextImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

然后在`[CALayer drawInContext:(CGContextRef)context]`，我打电话`[myTextImage drawAtPoint:CGPointZero]`。

当我运行应用程序时，控制台显示`<Error>: CGContextDrawImage: invalid context 0x0`. `context`同时，即使在记录了该错误之后， 我也可以完美地继续以相同的方法绘制文本。

所以我有两个问题：（1）为什么这不起作用？我应该`CGBitmap`改用吗？更重要的是：（2）有没有更聪明的方法来解决整体问题？也许将我的文本存储为路径，然后`CAAnimation`随着封闭范围的变化以不同的比例绘制它`CALayer`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T00:54:22.790

好吧，这比我想象的要容易得多。只需在 UIView 内的 CALayer 的 drawInContext: 中绘制文本。然后使用 transform 属性为视图设置动画，文本将根据需要收缩或扩展。

只需注意缩放，以免文本变得块状。最简单的方法是确保变换比例因子不超过 1。换句话说，将 UIView 的“默认”1:1 尺寸设为您想要显示的最大尺寸。

# c# - 尝试在 dapper 查询中映射多个对象时引发错误

> ID：12444516
> 
> 赞同：3
> 
> 时间：2012-09-16T05:00:35.253
> 
> 标签：c#, dapper

我正在使用下面 SQL 中给出的表结构测试 dapper

```
 CREATE TABLE [dbo].[Layer](
        [Name] [nvarchar](50) NOT NULL,
        [Key] [nvarchar](255) NULL,
        [FeatureColumn] [nvarchar](255) NULL,
        [Description] [nvarchar](255) NULL,
        [Defaults] [nvarchar](255) NULL,
        [Comments] [nvarchar](255) NULL,
        PRIMARY KEY  ([Name] ASC)
    )

    CREATE TABLE [dbo].[Theme](
        [Name] [nvarchar](50) NOT NULL,
        [IsDefault] [bit] NULL,
        [Field] [nvarchar](255) NULL,
        [Layer] [nvarchar](255) NULL,
        PRIMARY KEY  ([Name] ASC)
    ) 
```

用于在表中生成数据的 SQL

```
 INSERT INTO LAYER 
           (Name  ,[Key]   ,[Description]    ,Defaults,Comments)
    SELECT  'MOJO'  ,'ADM1','Administrative' ,'NULL'    ,'NULL'     UNION ALL
    SELECT  'Roads' ,'LID' ,'Roads'          ,'NULL'    ,'NULL'

    INSERT INTO Theme (Name,IsDefault,Field,Layer)
    SELECT 'M01',1,'ADM1','MOJO' 
```

POCO对象是Layer和Theme，虽然我在SQL中没有提到，但是Layer表和Theme表Theme.Layer->Layer之间是有关系的

```
 public class Layer 
    {
        public virtual string Name { get; set; }
        public virtual string Key { get; set; }
        public virtual string Description{ get; set; }
        public virtual ICollection<Theme> Themes { get; set; }
        public virtual string Defaults { get; set; }
        public virtual string Comments { get; set; }

        public Layer()
        {
            Themes = new List<Theme>();
        }

    }

    public class Theme 
    {

        public virtual string Name { get; set; }
        public virtual bool IsDefault { get; set; }
        public virtual string Field { get; set; }
        public virtual Layer Layer { get; set; }

        public Theme()
        {
        }

    } 
```

当我尝试在单个查询中映射图层和主题时出现以下错误，例如：

```
 var sql = @"SELECT * FROM  Layer AS a LEFT OUTER JOIN
    Theme AS b ON a.Name = b.Layer";

    var k = conn.Query<Layer,Theme,  Theme>(
        sql,
        (a, b) => { a.Themes.Add(b); return a ; },
        splitOn: "Name"
        ); 
```

引发的异常是

```
 Error parsing column 9 (Layer=MOJO - String) 
```

谁能指导我可能是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:35:56.420

问题是您的查询将 Theme.Layer 作为字符串返回，但在您的模型上它映射为 Layer 类对象。解决此问题的一种方法是将查询更改为不返回该字段，因为它无论如何都不需要，然后更新您的映射代码以将 Layer 属性设置为返回的图层对象。就像是：

```
var sql = @"SELECT a.*, b.Name, b.IsDefault, b.Field
            FROM  Layer AS a 
            LEFT OUTER JOIN Theme AS b ON a.Name = b.Layer";

var k = conn.Query<Layer, Theme, Layer>(sql, (a, b) =>
        {
            if (b != null)
                b.Layer = a;
            a.Themes.Add(b);
            return a;
        }, splitOn: "Name"); 
```

# python - python中这个表达式的代码

> ID：12444517
> 
> 赞同：2
> 
> 时间：2012-09-16T05:00:43.143
> 
> 标签：python, numpy, scipy

我正在尝试在 python 中编写这个表达式，但我遇到了一些困难。

![在此处输入图像描述](../Images/378e5ec245443dadd00bd5d4da61cb6f.png)

这是我到目前为止的代码，需要一些建议。

```
 x = 1x2 vector
 mu = 1x2 vector
 Sigma = 2x2 matrix 

 xT = (x-mu).transpose()
 sig = Sigma**(-1)
 dotP = dot(xT ,sig )
 dotdot = dot(dotP, (x-mu))
  E = exp( (-1/2) dotdot  ) 
```

我在正确的轨道上吗？有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T05:06:48.750

*   `Sigma ** (-1)`不是你想要的。这将提高 的每个元素`Sigma`的`-1`幂，即`1 / Sigma`，而在数学表达式中，它表示逆，用 Python 编写为`np.linalg.inv(Sigma)`。

*   `(-1/2) dotdot`是语法错误；在 Python 中，您需要始终包含`*`乘法，或者只需执行`- dotdot / 2`. 由于您可能使用的是 python 2，因此除法有点不稳定；除非你已经完成`from __future__ import division`（强烈推荐），`1/2`否则实际上会是`0`，因为它是整数除法。您可以使用`.5`它来解决这个问题，尽管就像我说的那样，我强烈建议您进行部门导入。

*   这是非常简单的，但是你在`x-mu`只需要做一次的情况下进行两次减法。如果您的向量很大，只需执行一次即可节省一点速度。（当然，这里你是在二维上做的，所以这根本不重要。）

*   `the_array.transpose()`与其调用（这很好），不如使用它通常更好`the_array.T`，这是同一件事。

*   我也不会使用这个名字`xT`；它向我暗示它是 的转置`x`，这是错误的。

我可能会这样组合它：

```
# near the top of the file
# you probably did some kind of `from somewhere import *`.
# most people like to only import specific names and/or do imports like this,
# to make it clear where your functions are coming from.
import numpy as np

centered = x - mu
prec = np.linalg.inv(Sigma)
E = np.exp(-.5 * np.dot(centered.T, np.dot(prec, centered))) 
```

# android - 即使删除了所有源文件，也会显示 Android 自定义视图

> ID：12444522
> 
> 赞同：0
> 
> 时间：2012-09-16T05:02:43.663
> 
> 标签：android, actionbarsherlock, android-custom-view

使用`SherlockActionBar`我为其中一个操作栏项目编写了一个自定义`actionProviderClass`（微调器）。

我决定不需要它并删除了它的所有文件以及`actionProviderClass`菜单文件中的属性。我什至从 strings.xml 中删除了微调器的值。

但是，如果我切换到水平方向，该死的东西仍然会出现。我尝试了一个新的模拟器和一个设备，它仍然会发生。我还在 Eclipse 中清理了项目。

我猜有些东西被缓存在某个地方，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:48:53.697

用户错误在这里。

即使有视图空间，SherlockActionBar 有时也会将选项卡折叠成微调器

# java - 为什么我会收到 MalformedURLException

> ID：12444524
> 
> 赞同：0
> 
> 时间：2012-09-16T05:03:12.570
> 
> 标签：java, android

我不确定为什么这个 url 会抛出`MalformedURL`异常：`http%3A%2F%2Fapi.themoviedb.org%2F3%2Fsearch%2Fperson%3Fapi_key%3secret%26query%3Dchristopher_guest`

这是我需要使用的api所需的url。[http://api.themoviedb.org/3/search/person?api_key=secret&query=christopher_guest](http://api.themoviedb.org/3/search/person?api_key=secret&query=christopher_guest)

我一直在使用此 url 获取 target host must not be **null**错误，然后我将我的编码更改为您在下面看到的内容。不确定这里发生了什么，尽管我听说包含下划线的 url 在 Web 浏览器之外无法验证并导致这些类型的情况。

有什么想法吗？

这是我建立网址的地方

```
package com.tot.tipofthetongue;

import android.widget.EditText;

public class getName {
static String nameOne = null;
static String nameTwo = null;

static StringBuilder personURLOne = new StringBuilder();
static StringBuilder personURLTwo = new StringBuilder();

public static String personURL = "http://api.themoviedb.org/3/search/person?api_key=secret&query=";

public static StringBuilder getName1(EditText searchOne){
    nameOne = searchOne.getText().toString();

    nameOne = nameOne.replace(" ", "_");

    personURLOne.append(personURL); 
    personURLOne = personURLOne.append(nameOne);

    return personURLOne;

} 
```

这是我的 jsonparser，我将该 url 传递给。

```
public class JSONParser extends AsyncTask<String, Void, JSONObject> {

static InputStream inputStream = null;
static JSONObject jObject = null;
static String jSon = "";
public String myURL;
String host;
HttpRequest request;
protected JSONObject doInBackground(String... url) {
    // TODO Auto-generated method stub

    //Make HTTP Request
    try {
        //defaultHttpClient

        for(int i = 0; i < url.length; i++){
             myURL = url[0];
             myURL = URLEncoder.encode(myURL, "utf-8");
        }
        HttpGet httpGet = new HttpGet(myURL);

                //header
                httpGet.setHeader("Accept", "application/json");

                HttpResponse httpResponse = new DefaultHttpClient().execute(new HttpHost(new URL(myURL).getHost()), request);
                HttpEntity httpEntity = httpResponse.getEntity();
                inputStream = httpEntity.getContent();

            } catch (UnsupportedEncodingException e){
                e.printStackTrace();
            } catch (ClientProtocolException e){
                e.printStackTrace();
            }catch (IOException e){
                e.printStackTrace();
            }

            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 8);
                StringBuilder stringBuilder = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null){
                    stringBuilder.append(line + "\n");
                }
                Log.d("JSON Contents", stringBuilder.toString());
                inputStream.close();

                jSon = stringBuilder.toString();

            } catch (Exception e){
                Log.e("Buffer Error", "Error converting result " + e.toString());
            }
            //try to parse the string to JSON Object
            try {
                jObject = new JSONObject(jSon);

            } catch (JSONException e){
                Log.e("JSON Parser", "Error parsing data " + e.toString());
            }
            //return JSON String
            return jObject;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:06:11.617

打印您在最终提交之前形成的字符串以形成 Uri。并将其附加到您的问题中。回答起来会容易得多。

尝试使用

```
HttpGet(URI uri)
```

代替

```
HttpGet(String uri)
```

原因很简单。如果您使用的是 Uri，您将立即获得异常。

希望这能帮助您快速调试。

# uiimagepickercontroller - iPad iOS 6 上带有 cameraOverlayView 的 UIImagePickerController 没有“拍照”按钮

> ID：12444526
> 
> 赞同：4
> 
> 时间：2012-09-16T05:03:22.360
> 
> 标签：uiimagepickercontroller, popover, ios6, camera-overlay

下面的代码创建一个弹出框控制器，`UIImagePickerController`它使用 cameraOverlayView 来显示一个打开照片库的自定义按钮。

这在 iOS 5 上效果很好，但在 iOS 6 上，“拍照”按钮不见了，取而代之的是 - 在前置和后置摄像头按钮之间还有另一个切换！

请参阅以下屏幕截图 -

![缺少拍照按钮](../Images/3e81400a93c15092aba065c531eed73d.png)

这是代码 - UIImagePickerControllerSourceType sourceType = UIImagePickerControllerSourceTypeCamera;

```
if ( ![UIImagePickerController isSourceTypeAvailable: sourceType] ) {
    [self openLibrary: sender];
    return;
}

UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.delegate = self;
picker.sourceType = sourceType;

UIButton *libraryButton = [UIButton buttonWithType: UIButtonTypeCustom];
libraryButton.frame = CGRectMake(12, 12, self.photoLibraryIcon.size.width, self.photoLibraryIcon.size.height);
[libraryButton setImage: self.photoLibraryIcon forState: UIControlStateNormal];
[libraryButton addTarget: self action: @selector(openLibrary:) forControlEvents: UIControlEventTouchUpInside];

[picker.cameraOverlayView addSubview:libraryButton];

__imagePickerPopoverController = [[UIPopoverController alloc] initWithContentViewController: picker];
self.imagePickerPopoverController.delegate = self;

[self.imagePickerPopoverController presentPopoverFromRect: CGRectMake(self.center.x - 5, self.center.y - 5, 10, 10)
                                                   inView: self.superview
                                 permittedArrowDirections: UIPopoverArrowDirectionAny
                                                 animated: YES]; 
```

如果我删除`[picker.cameraOverlayView addSubview:libraryButton]`，它可以正常工作，但是我的自定义按钮将消失（如预期的那样）。

那么为什么要分配`cameraOverlayView`更改底部工具栏呢？

关于如何让“拍照”按钮回到 iOS 6 的任何线索？

# nhibernate - Nhibernate ByCode Mapping -- 如何避免空的多对一对象映射？

> ID：12444528
> 
> 赞同：0
> 
> 时间：2012-09-16T05:04:11.000
> 
> 标签：nhibernate, nhibernate-mapping, nullable, mapping-by-code

我正在映射一个遗留数据库，以前用户在注册并稍后添加它时不需要选择一个国家。

所以有些用户的 CountryID 为 NULL。因此，当我的多对一映射（ByCode）尝试加载相应的国家/地区详细信息时，它没有找到，因此用户的“国家/地区”对象为空。

例如，当我尝试显示 user.Country.Name 时，我得到一个对象引用未找到。

我可以通过创建一个 ID 为 -1 的国家（称为未公开）来破解这个问题，然后将所有空国家 ID 更改为 -1，但这是在解决我认为的一个常见问题时作弊。

所以我的问题是如何映射，以便如果找不到 CountryID，该用户将获得一个新的 Country 对象。

我在用户对象中的映射是：

```
ManyToOne<Country>(x => x.Country, m =>
{
      m.Column("CountryID");
      m.Lazy(LazyRelation.NoLazy);
      m.NotNullable(false);
      m.Fetch(FetchKind.Join);
}); 
```

我的 CountryMap 非常基本......

```
public CountryMap()
{
      Id(p => p.ID, m => m.Generator(Generators.Identity));
      Property(p => p.Code);
      Property(p => p.Name);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:43:47.740

编码太晚了......大脑冻结......

如果国家为 NULL，我只是修改了 User POCO 上的 Country 属性以返回一个新的 Country()。

希望这对某人有所帮助，但如果管理员删除我不会被冒犯的问题。:) :) :)

# xslt - XSLT 不工作

> ID：12444530
> 
> 赞同：4
> 
> 时间：2012-09-16T05:04:32.723
> 
> 标签：xslt

您好，我的 XML 文档和 XSLT 无法生成良好的 HTML……这是怎么回事？

这基本上是 XML 文件，我已经使用 XML Schema 验证了这一点，但是

当我使用 XSLT 文件将其转换为 HTML 文件时，它只会生成带有一段整段文本的课程目录标题。

我这里有什么问题？

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
                 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- Generate HTML output -->
  <xsl:output method="html"/>

  <!-- The root template is defined here -->
  <xsl:template match="/">
<html>
  <head>
    <title>Courses Catalogue</title>
  </head>
  <body>
    <h2>Courses catalogue</h2>
    <xsl:apply-templates />
  </body>
</html>
 </xsl:template>

  <xsl:template match="course">

<p>
    <xsl:apply-templates select="code" />
    <xsl:apply-templates select="title" />
    <xsl:apply-templates select="year" />
    <xsl:apply-templates select="science" />
    <xsl:apply-templates select="area" />
    <xsl:apply-templates select="subject" />
    <xsl:apply-templates select="updated" />
    <xsl:apply-templates select="unit" />
    <xsl:apply-templates select="description" />
    <xsl:apply-templates select="outcomes" />
    <xsl:apply-templates select="incompatibility" />

</p>

  </xsl:template>

  <xsl:template match="code">

Course Code: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

  </xsl:template>

  <xsl:template match="title">

Course Title: <span style="color:#000">
<xsl:value-of select="." /> </span>
<br />

  </xsl:template>

  <xsl:template match="year">

Student Year: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

  </xsl:template>

  <xsl:template match="science">

Science Group: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

   </xsl:template>

  <xsl:template match="area">

Area: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

  </xsl:template>

   <xsl:template match="subject">

Course Subject: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

   </xsl:template>

   <xsl:template match="updated">

Page was updated in: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

   </xsl:template>

   <xsl:template match="unit">

Unit: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

   </xsl:template>

   <xsl:template match="description">

Course Description: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

   </xsl:template>  

   <xsl:template match="outcomes">

Course Outcomes: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

   </xsl:template>

  < xsl:template match="incompatibility">

Incompatible courses: <span style="color:#C66">
<xsl:value-of select="." /> </span>
<br />

   </xsl:template>  

 </xsl:stylesheet> 
```

和我的 XML 文件

```
<?xml version="1.0"?>
 <?xml-stylesheet type="text/xsl"
             href="courses.xsl"?>

<!--catalogue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="catalogue.xsd"-->

<catalogue xmlns="file://"
       xmlns:xsi="http:/e"
       xsi:schemaLocation="file://">

  <course>

<code>COMP3410</code>
<title> Information Technology in Electronic Commerce </title>
<year>later year</year>
<science>C</science>
<area> Research School of Computer Science </area>
<subject> Computer Science </subject>
<updated>2012-03-13T13:12:00</updated>
<unit>6</unit> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T10:50:29.500

**您的问题是所有元素都在`file://Volumes/u1234567/Assignment`名称空间中，但在您的 XSLT 中，您的模板匹配没有名称空间的元素。**

如果您仔细查看，`<catalogue>`您会看到一个没有前缀的命名空间声明。`<catalogue xmlns="file://Volumes/u1234567/Assignment"`所有后代元素都继承该命名空间。

**Define that namespace with a prefix in your XSLT and then change the places where you refer to those elements to use that namespace prefix:**

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:a="file://Volumes/u1234567/Assignment">

    <!-- Generate HTML output -->
    <xsl:output method="html"/>

    <!-- The root template is defined here -->
    <xsl:template match="/">
        <html>
            <head>
                <title>Courses Catalogue</title>
            </head>
            <body>
                <h2>Courses catalogue</h2>
                <xsl:apply-templates />
            </body>
        </html>
    </xsl:template>

    <xsl:template match="a:course">

        <p>
            <xsl:apply-templates select="a:code" />
            <xsl:apply-templates select="a:title" />
            <xsl:apply-templates select="a:year" />
            <xsl:apply-templates select="a:science" />
            <xsl:apply-templates select="a:area" />
            <xsl:apply-templates select="a:subject" />
            <xsl:apply-templates select="a:updated" />
            <xsl:apply-templates select="a:unit" />
            <xsl:apply-templates select="a:description" />
            <xsl:apply-templates select="a:outcomes" />
            <xsl:apply-templates select="a:incompatibility" />

        </p>

    </xsl:template>

    <xsl:template match="a:code">

        Course Code:
            <xsl:value-of select="." /> 
        <br />

    </xsl:template>

    <xsl:template match="a:title">

        Course Title: 
            <xsl:value-of select="." /> 
        <br />

    </xsl:template>

    <xsl:template match="a:year">

        Student Year: <span style="color:#C66">
            <xsl:value-of select="." /> </span>
        <br />

    </xsl:template>

    <xsl:template match="a:science">

        Science Group: 
            <xsl:value-of select="." /> 
        <br />

    </xsl:template>

    <xsl:template match="a:area">

        Area:
            <xsl:value-of select="." />
        <br />

    </xsl:template>

    <xsl:template match="a:subject">

        Course Subject: 
            <xsl:value-of select="." />
        <br />

    </xsl:template>

    <xsl:template match="a:updated">

        Page was updated in: 
            <xsl:value-of select="." /> 
        <br />

    </xsl:template>

    <xsl:template match="a:unit">

        Unit: 
            <xsl:value-of select="." /> 
        <br />

    </xsl:template>

    <xsl:template match="a:description">

        Course Description:
            <xsl:value-of select="." /> 
        <br />

    </xsl:template>  

    <xsl:template match="a:outcomes">

        Course Outcomes: 
            <xsl:value-of select="." />
        <br />

    </xsl:template>

    <xsl:template match="a:incompatibility">

    Incompatible courses: 
        <xsl:value-of select="." /> 
    <br />

    </xsl:template>  

</xsl:stylesheet> 
```

# java - 在 Java 中传递自定义对象

> ID：12444531
> 
> 赞同：0
> 
> 时间：2012-09-16T05:04:53.637
> 
> 标签：java

我知道这可能是非常基本的，我为不知道如何做到这一点而感到羞耻（更糟糕的是，在寻找解决方案时没有成功）。

我如何将对象类型的对象*从*A 传递到 C？

```
public class A extends B {

}

public class B {

    public class thing {

    }

}

public class C extends JFrame {

} 
```

我可以访问 A 中的*东西*，因为我正在扩展 B，但是在使用类 C 时我无法扩展 B，因为我需要扩展 JFrame。

**编辑**

抱歉含糊不清。A类有一个*thing*类型的对象集合，我想遍历C类中的这些对象。

**编辑 2**

当然……显而易见的选择。使*事物*成为自己的类... :(

为了那些可能也有类似问题的人而承认耻辱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T05:13:19.873

首先，如果它是一个内部类 - 你可能不应该从外部访问它......
但是，如果你坚持，你可以尝试如下：

```
public class A extends B {

}

public class B {

    public class thing {

    }

    private thing mything = new thing();
    public thing getThing(){
      return mything;
    }

}

public class C extends JFrame {
      A a = new A();
      Object thing = a.getThing();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T05:21:15.470

从外部访问内部类通常是一个坏主意，但如果必须，我建议您查看本文中的委托设计模式：

[委托设计模式](http://www.vogella.com/articles/DesignPatterns/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T05:47:00.317

您可能尝试使用在 java 中不可能的多重继承！您可以使用接口来实现 2 种不同的行为，或者使用一些设计模式来实现这样的目标。

真的不清楚您要做什么。但是查看复合或工厂方法模式我认为它可能会有所帮助。

# jquery - jQuery：如何检测元素是否未被点击？

> ID：12444534
> 
> 赞同：3
> 
> 时间：2012-09-16T05:06:31.623
> 
> 标签：jquery, jquery-callback, jquery-click-event

我想知道是否可以检测一个元素是否没有被点击。这是我的代码：

```
$("#mpElement").myFeature({
            .........
            .........
            .........
    afterDo: function() {
        // This if-else statement has to go inside "when not clicked" condition. 
        // Not sure how to do this...
        if($(".myButton").last().hasClass("selected")) {
            $(".myButton").first().addClass("selected");
            $(".myButton").last().removeClass("selected");
        } else {
            $(".selected").removeClass("selected").next().addClass("selected");
        }
        $(".myButton").on("click", function(){
            $(".myButton").removeClass("selected");
            $(this).closest(".myButton").addClass("selected"); 
        });
    }
}); 
```

您会注意到**$(".myButton").on("click", function(){**用于检测点击事件。我想**在未点击**条件时将 if-else 语句放在此函数上方。不知道如何做这个。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-16T05:12:22.083

您可以维护`data`该元素的属性作为点击检测器。

例子：

```
<button class="myButton" data-clicked="no">My Button</button> 
```

在这里，我设置`data-clicked=no`为初始配置。

在设置为喜欢的`click`事件内：`data-clicked``yes`

```
$('.myButton').on('click', function() {
  $(this).data('clicked', 'yes');
}); 
```

现在检查这个`data-clicked`属性，如下所示：

```
var isClicked = $('.myButton').data('clicked');

if( isClicked == 'yes') {
   // do something
} else {
  // do something else
} 
```

# sockets - 如何从 PCAP 文件中的数据包中获取发件人 IP 地址？

> ID：12444547
> 
> 赞同：0
> 
> 时间：2012-09-16T05:11:54.300
> 
> 标签：sockets, networking, tcp, udp, pcap

我很可能在这里遗漏了一些东西，但是[PCAP 规范](http://wiki.wireshark.org/Development/LibpcapFileFormat)没有显示捕获的数据包的发送者**IP**地址和**端口**。

有没有办法让我知道谁在**PCAP**文件中发送了数据包？

[http://wiki.wireshark.org/Development/LibpcapFileFormat](http://wiki.wireshark.org/Development/LibpcapFileFormat)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:43:09.703

数据包来源在 IP 数据包本身。所以它也不需要在 PCap 标头中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T23:36:49.527

根据 EJP 所说，您必须自己解析数据包数据。请参阅[tcpdump.org 链接层标头类型页面](http://www.tcpdump.org/linktypes.html)以获取文件标头中字段的值列表以及`network`数据包数据开头的标头的相应格式。

您需要查看这些标头以确定数据包是否为 IP 数据包；如果是，那么您需要解析 IPv4 或 IPv6 标头（取决于标头是否指示它是 IPv4 或 IPv6 数据包，或者，取决于标头中的“版本”字段是 4 还是 6 - “版本”字段出现在 IPv4 和 IPv6 标头中的相同位置；对于`LINKTYPE_RAW`，您必须查看“版本”字段，因为 IPv4 或 IPv6 标头前面没有标头）才能找到源 IP 地址。IPv4 标头的形式参见[RFC 791](https://www.rfc-editor.org/rfc/rfc791)；有关 IPv6 标头的形式，请参阅[RFC 2460](https://www.rfc-editor.org/rfc/rfc2460)。

如果您需要端口号，则必须检查 IPv4 标头的“协议”字段，或检查 IPv6 标头的“下一个标头”字段*并*处理扩展标头，以确定 IP 之上承载的协议。有关该字段的值，请参阅[IANA 协议编号注册表](http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xml)；TCP 为 6，UDP 为 17。如果协议是 TCP，TCP 头的格式见[RFC 793](https://www.rfc-editor.org/rfc/rfc793)；如果协议是 UDP，请参阅[RFC 768](https://www.rfc-editor.org/rfc/rfc768)了解 UDP 标头的格式。

或者您可能想要使用现有的数据包解析库，例如用于 C 或 C++ 的[libtrace](http://research.wand.net.nz/software/libtrace.php)或用于其他语言的其他库（例如，我认为它们可能存在于 Perl、Python、C# 和 Java 中），因为这可能会让您避免做很多上述事情。

（就此而言，您不需要查看 pcap 格式规范；您应该使用 libpcap/WinPcap 来读取 pcap 文件，因为这也意味着您的程序也可以读取一些 pcap-ng 文件，如果它使用的是最新版本的 libpcap。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-14T18:08:26.273

我能够使用以下 Github 示例获取源端点和目标端点的 IP 地址和端口号：

[https://github.com/arisath/Pcap-dissection/blob/master/PcapDissector.java](https://github.com/arisath/Pcap-dissection/blob/master/PcapDissector.java)

# mysql - 将数据库从 phpmyadmin 导入到 linode

> ID：12444560
> 
> 赞同：0
> 
> 时间：2012-09-16T05:14:23.360
> 
> 标签：mysql, sql, import, phpmyadmin, linode

我已经在网上搜索了一段时间的解决方案，但似乎无法通过我在网上找到的解决方案来获得它。我已经导出了我的 phpMyAdmin 数据库并将其上传到我的 Linode，所以它现在在那里（/home/user_name/public/www.sitename.com/public/phpmyadmindatabase.sql）

所以现在在终端我输入以下内容：

```
mysql -u root -pMyPassword database_name < ~/public/sitename.com/public/phpmyadmindatabase.sql 
```

我得到以下信息：

```
ERROR 1049 (42000): Unknown database 'database_name' 
```

现在我想知道是否需要先创建“database_name”，但我正在遵循 Linode 自己的启动指南：

[http://library.linode.com/hosting-website#sph_installing-mysql](http://library.linode.com/hosting-website#sph_installing-mysql)

他们在“创建数据库”部分说...（如果您已经有一个要导入的数据库...跳到“导入数据库”）。所以我一直假设我不应该创建一个数据库，因为它告诉我跳过它。

任何和所有的帮助将不胜感激......

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:42:25.390

愚蠢的错误......只需要手动创建新数据库或确保 phpmyadmin 在将数据库添加到 Linode 时在 mysql 中创建数据库。

另一方面 - Linode 拥有非常出色的客户支持（我想这将是第一个去的地方）。

# mysql - 这是将数组存储在数据库中的可接受情况吗？

> ID：12444561
> 
> 赞同：4
> 
> 时间：2012-09-16T05:14:45.647
> 
> 标签：mysql, arrays, database-design, multidimensional-array

我一直在开发一个应用程序，并且遇到了一种情况，我想对当前数据进行**快照**。

例如，在此应用程序中，用户将拥有不同的统计数据并能够输入匹配项。他们在比赛中的排名取决于他们的数据。确定比赛后，应用程序将提取用户的所有当前统计数据并确定他们的分数以查看谁获胜。

现在，在比赛结束后，我希望用户能够查看过去的比赛，当我想显示比赛时参与者的分数时，问题就出现了。我认为存储如下结构的数组是可以接受的：

```
array(
 array(username, points),
 array(username, points),
 etc.
) 
```

现在规范化数据通常可能是最佳实践，但在这种情况下：

*   一场比赛可以有**2**到**25**名参与者。
*   数据永远不会更新，只会读取。
*   我认为将它放在数据库中的数组结构中可以节省我在后端代码中构造数组的时间。
*   **编辑：数据不是永久的。比赛记录将在比赛结束*7*天后删除。**

谁能告诉我这个解决方案是否会带来任何问题？

* * *

## 编辑

我将在序列化数组后保存数据，所以在我的数据库中我会有一个名为“matches”的表，它会有一个名为“results”的列。

此列的行将包含序列化数组。因此，如果数组看起来像这样：

```
$array["a"] = "Foo";
$array["b"] = "Bar";
$array["c"] = "Baz";
$array["d"] = "Wom"; 
```

Then the row in the database would look like this:

```
a:4:{s:1:"a";s:3:"Foo";s:1:"b";s:3:"Bar";s:1:"c";s:3:"Baz";s:1:"d";s:3:"Wom";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:29:21.443

This solution wouldn't pose any problems in the short term - but say you wanted to eventually add in functionality to show all of the games a user has played in, or their highest scoring games... having this data in an inaccessible-from-sql array would not allow you to have those features.

I'm thinking a table like this would be perfect:

```
CREATE TABLE game_scores(
    id int AUTO_INCREMENT NOT NULL PRIMARY KEY,
    game_id int,
    user_id int,
    final_score int,
    KEY(game_id),KEY(user_id)
) 
```

At the end of every game, you'd simply insert a row for every user that was playing that round with their corresponding score and the game id. Later, you'd be able to select all of the scores for a certain game:

```
SELECT * FROM game_scores WHERE game_id=? 
```

... or show all scores by a certain user:

```
SELECT * FROM game_scores WHERE user_id=? 
```

etc. Have fun with it!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T05:42:06.620

If you're really committed to the use cases you've outlined in the question along with the qualification in your comment to Sean Johnson, then I don't see any problems with your approach.

I still might qualify that by suggesting that you normalize the data if you think there's a chance you'll want to be able to mine historical information, but dumping an array into the database as a long lived (relatively speaking) sort of cache might make sense. In other words, store it in both formats, but the main line of the use case you've outlined would just hit the array format, but you'd still have the data in a queryable form if you ever wanted it.

# asp.net-mvc - 在 MVC 中维护列表框的状态

> ID：12444564
> 
> 赞同：0
> 
> 时间：2012-09-16T05:16:22.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在**MVC**中有双重列表框。所选列表框中所有项目的 ID 需要发布到服务器。模型定义了三个属性

```
IEnumerable<SelectListItem> AvailItems {get;set;}
IEnumerable<SelectListItem> SelectedItems {get;set;}
string SelectedItemIds {get;set;} 
```

我已经填充了具有不同名称`availItems`和属性的`selectedItems`列表框`SelectedItemIds`作为隐藏字段。如果用户从列表框中添加/删除项目，Javascript 会更新隐藏字段。在 httpost 中，我收到只是`selectedItemIds`因为列表框的名称已更改，这是预期的行为。

问题是当模型无效或发生任何异常时，返回`View(model)`被执行，列表框填充空值但`hiddenfield`包含修改项的值。当用户再次提交页面时，来自`hiddenfield`发布但显示的项目的值将来自 db。我遵循了这种`hiddenfield`在提交之前使用而不是选择所有项目的方法（使用 javascript），因为如果非 js 用户提交页面，它不会造成伤害。来自的值`hiddenfield`被拾取。

关于如何处理上述情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:40:07.107

为什么不在做之前将该信息重新填充到模型中`View(model)`？我假设您的代码类似于：

```
if (ModelState.IsValid) 
{
    //...all is ok
}
else 
{
    model.AvailItems = // repopulate
    model.SelectedItems = // repopulate
    return View(model);
} 
```

# mysql - 这个sql查询怎么做？

> ID：12444569
> 
> 赞同：5
> 
> 时间：2012-09-16T05:17:19.013
> 
> 标签：mysql, sql

架构：

```
Student(studentid,name,age)
Course(coursename,dept)
enroll(studentid,coursename,grade) 
```

我需要编写 sql 来查找每个年龄组的学生姓名，其中历史和政治学系的课程成绩最高。

到目前为止，我的尝试是

```
SELECT 
    name 
FROM 
    student 
GROUP BY age 
HAVING sid IN 
            (
                SELECT 
                    max(grade) 
                FROM 
                    enroll e,enroll e1 
                WHERE 
                    e.studentid = e1.studentid 
                AND e.coursename = (
                                    SELECT coursename FROM course 
                                    WHERE 
                                        dname like '%History%'
                                  ) 
                AND e1.coursename = (
                                    SELECT coursename FROM course 
                                    WHERE 
                                        dname like '%PoliticalScience%'
                                    )
            ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T05:48:07.480

您可以使用`subquery`. 尝试，

```
SELECT  d.*,
        f.dept,
        e.grade
FROM    student d
        INNER JOIN enroll e
            on d.studentID = e.studentID
        INNER JOIN course f
            ON e.courseName = f.courseName
        INNER JOIN
            (
                SELECT  a.age, c.dept, Max(b.grade) maxGrade
                FROM    student a
                        INNER JOIN enroll b
                            on a.studentID = b.studentID
                        INNER JOIN course c
                            ON b.courseName = c.courseName
                WHERE    c.dept IN ('history','political science')
                GROUP BY a.age, c.dept
            ) topScore
            ON  topscore.age = d.age AND
                topscore.dept = f.dept AND
                topscore.maxGrade = e.grade 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T05:30:28.123

你可以尝试这些方面的东西

```
select 
    s.name 
from 
    student s, enroll e,
    (
        select 
            s.age as age, e.coursename as coursename, max(e.grade) as grade 
        from 
            student s, course c, enroll e
        where 
            s.studentid = e.studentid 
        and c.coursename = e.coursename 
        and (c.dept = 'history' or c.dept = 'political science') 
        group by s.age, e.coursename
    ) t
where 
    s.studentid = e.studentid 
and s.age = t.age 
and e.grade = t.grade 
and e.coursename = t.coursename 
```

# jquery - jQuery: $('#id').find('> a')... 找到什么，究竟是什么？

> ID：12444574
> 
> 赞同：1
> 
> 时间：2012-09-16T05:17:49.237
> 
> 标签：jquery, find

我敢肯定有人会更改我的标题，但我喜欢它持续的时间。

无论如何，赫克托尔做了什么（就像我七岁的孩子会说的那样）？

```
$('#id').find('> a')... 
```

顺便说一句，我知道这`$('#parent > .child')`与`$('#parent').children('.child')`（如此处所解释[的](http://api.jquery.com/child-selector/)）相同，而不是我曾经使用过它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T05:19:44.457

在没有指定父级的情况下使用`> a`实际上是不推荐使用的语法，因为您已经发现它具有模棱两可的语义。 `.find('> a')`实际上等价于`.children('a')`。

来自[http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

> 注意：`$("> elem", context)`选择器将在未来的版本中被弃用。因此不鼓励使用它来代替使用替代选择器。

[记住这`$(sel, context)`相当于`$(context).find(sel)`]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T05:35:09.567

`.find()`通常用于选择许多级别的后代，但是，在您的情况下，`>`在限制选择之前添加`a`仅限子项（或仅当您使用 CSS 类代替 #id 时才添加第一级）。

它本质上与`$('#id > a')`或`$('#id').children('a')`具有额外的函数调用相同。

你的标题很完美，顺便说一句:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T06:05:51.033

当您尝试使用以下查询查找元素时

```
$("#master").find('> a')
```

然后它将在具有属性 id = 'master' 的元素内找到所有第一级锚元素

当您尝试使用以下查询查找元素时

```
$("#master").find('a')
```

然后它会在元素中找到所有具有属性 id = 'master' 的锚元素，无论它在什么级别。

# java - 如何匹配任意数量的大写字母？

> ID：12444580
> 
> 赞同：1
> 
> 时间：2012-09-16T05:20:52.233
> 
> 标签：java, regex

```
public static void main(String[] args) {
    Pattern p = Pattern.compile("[A-Z]*");
    Matcher matcher = p.matcher("CSE");
    System.out.println(matcher.group());
} 
```

为什么上面的代码会引发 java.lang.IllegalStateException ？如何匹配任意数量的大写字母？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T05:23:32.607

您需要调用`Matcher.find()`以启动正则表达式匹配过程。

```
public static void main(String[] args)
{
    Pattern p = Pattern.compile("[A-Z]*");
    Matcher matcher = p.matcher("CSE");
    while (matcher.find()) {
        System.out.println(matcher.group());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T05:26:27.473

你必须先打电话`matcher.matches();`，然后再打电话`matcher.group());`

`matcher.group()`给你上一个匹配项标识的子字符串。

你的模式应该是`[A-Z]+` 。这将打印所有匹配的大写字母序列

```
public static void main(String[] args) {
    Pattern p = Pattern.compile("[A-Z]+");
    Matcher matcher = p.matcher("CSEsdsdWWERdfsdfSSEEfdD");

    while (matcher.find()) {
        System.out.println(matcher.group());
    }
} 
```

# java - Applet 嵌入标签返回 ClassNotFoundException

> ID：12444581
> 
> 赞同：1
> 
> 时间：2012-09-16T05:21:13.170
> 
> 标签：java, html, google-chrome, applet, classnotfoundexception

我有一个小程序 jar 文件`cia.jar`和其中的类，`main.class`我的类在包中`com.gmail.connorbphtml.WebApp`。我正在尝试将我的小程序嵌入到网页中。当我尝试这样做时，我得到一个找不到类的错误。

该小程序在 Eclipse 中运行良好，但是当我尝试嵌入它时它不起作用。

这是我使用嵌入的 HTML：

```
<embed code="main.class"
archive="cia.jar"
width="200" height="200"
type="application/x-java-applet;version=1.6.0"
pluginspage="http://java.sun.com/javase/downloads"/> 
```

几个月来我一直遇到这个问题，这让我放弃了小程序，因为我无法让它工作。

有谁知道出了什么问题？

结果`jar -tvf cia.jar`是：

```
39 Sun Sep 16 12:34:50 EDT 2012 META-INF/MANIFEST.MF
     0 Sat Sep 15 18:02:30 EDT 2012 com/
     0 Sat Sep 15 18:02:30 EDT 2012 com/gmail/
     0 Sat Sep 15 18:02:30 EDT 2012 com/gmail/connorbphtml/
     0 Sat Sep 15 18:02:30 EDT 2012 com/gmail/connorbphtml/WebApp/
   136 Sat Sep 15 18:02:16 EDT 2012 com/gmail/connorbphtml/WebApp/package-info.class
   692 Sat Sep 15 23:26:08 EDT 2012 com/gmail/connorbphtml/WebApp/main.class
   226 Sat Sep 15 18:01:20 EDT 2012 .classpath
   366 Sat Sep 15 18:01:20 EDT 2012 .project 
```

控制台中的错误：

```
Java Plug-in 1.6.0_33
Using JRE version 1.6.0_33-b03-424-11M3720 Java HotSpot(TM) 64-Bit Server VM
User home directory = /Users/Connor

----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
----------------------------------------------------

Java Plug-in 1.6.0_33
Using JRE version 1.6.0_33-b03-424-11M3720 Java HotSpot(TM) 64-Bit Server VM
User home directory = /Users/Connorload: class Sun_Microsystems_Java_Security_Update_6.class not found.
java.lang.ClassNotFoundException: Sun_Microsystems_Java_Security_Update_6.class
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:252)
load: class com/gmail/connorbphtml/WebApp/main.class not found.
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:249)
load: class com/gmail/connorbphtml/WebApp/main.class not found.
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:179)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:160)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Plugin2ClassLoader.java:690)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3045)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1497)
    at java.lang.Thread.run(Thread.java:680)
Exception: java.lang.ClassNotFoundException: Sun_Microsystems_Java_Security_Update_6.class
java.lang.ClassNotFoundException: com.gmail.connorbphtml.WebApp.main.class
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:252)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:249)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:179)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:160)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Plugin2ClassLoader.java:690)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3045)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1497)
    at java.lang.Thread.run(Thread.java:680)
Exception: java.lang.ClassNotFoundException: com.gmail.connorbphtml.WebApp.main.class
java.lang.ClassNotFoundException: com.gmail.connorbphtml.WebApp.main.class
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:252)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:249)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:179)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:160)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Plugin2ClassLoader.java:690)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3045)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1497)
    at java.lang.Thread.run(Thread.java:680)
Exception: java.lang.ClassNotFoundException: com.gmail.connorbphtml.WebApp.main.class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:49:55.687

用于[编写小程序的](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html#deployingApplets)`deployJava.js`元素。

EG改编自页面：

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
    var attributes = {codebase:'.',
                      code:'com.gmail.connorbphtml.WebApp.main',
                      archive:'cia.jar',
                      width:200, height:200};
    var version = '1.6';
    deployJava.runApplet(attributes, parameters, version);
</script> 
```

该脚本将为运行它的浏览器/操作系统以正确的形式编写适当的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:36:57.687

Code should not contain `.class` extension. Try this.

```
<applet code="com.gmail.connorbphtml.WebApp.main" archive="cia.jar"
width="200" height="200"></applet> 
```

Also you did not include the `package` name in the `code` attribute.

# escaping - 在 SWIPL swi-prolog 中使用 string_concatenate 时转义“\=”

> ID：12444583
> 
> 赞同：0
> 
> 时间：2012-09-16T05:21:15.590
> 
> 标签：escaping, prolog, swi-prolog, string-concatenation

使用 string_concat 时，我想在 swipl 中转义反斜杠。

情景 1-

```
string_concat('stack', ' overflow', Result).
Result = "stack overflow" 
```

方案 2-

```
string_concat('stack', ' \=overflow', Result).
Syntax error: Undefined character escape in quoted atom or string: `\=' 
```

场景 3-

```
string_concat('stack', ' \\=overflow', Result).
Result = "stack \\=overflow" 
```

现在，scenario1 的行为符合预期。我遇到了场景 2 中解释的情况，我需要连接一个包含反斜杠和等于的字符串。即，string1 仅包含文本，string2 包含带有 \= 的文本，并且我的结果应该是 string1 和 string2 连接的。但是，在方案 2 中仅使用 \= 会导致错误要求我转义序列。现在，在场景 3 中转义给了​​我两个反斜杠和等号。我不想要两个反斜杠。

我的输出应该是完全正确`stack \=overflow`的。我在这里缺少一些转义序列或方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:28:53.717

双反斜杠仅用于显示：

```
?- string_concat(stack, ' \\=overflow', X), writeln(X).
stack \=overflow
X = "stack \\=overflow". 
```

但您可以使用此标志更改行为：

```
?- set_prolog_flag(character_escapes,false).
true.

?- writeln('stack \=overflow').
stack \=overflow
true. 
```

使用默认值`true`我得到你报告的错误：

```
?- set_prolog_flag(character_escapes,true).
true.

?- writeln('stack \=overflow').
ERROR: Syntax error: Undefined character escape in quoted atom or string: `\='
ERROR: writeln('stack \
ERROR: ** here **
ERROR: =overflow') . 
```

无论如何，我认为你应该在完成后将其值重置为默认值，或者仔细检查你的 SW 是否对文字产生了​​不必要的副作用。

高温高压

# java - 在 for each 循环中同步仍然会引发 ConcurrentModificationExceptions

> ID：12444586
> 
> 赞同：3
> 
> 时间：2012-09-16T05:21:31.297
> 
> 标签：java, concurrency, synchronized

我正在尝试遍历一个线程上的循环，如下所示：

```
for (UnitTask task : chain) {
    g.drawLine((int) task.getLocation().getX(), (int) task.getLocation().getY(), (int) currentPos.getX(), (int) currentPos.getY());
    g.fillOval((int) task.getLocation().getX() - 2, (int) task.getLocation().getY() - 2, 5, 5);
    currentPos = task.getLocation();
} 
```

但是，我有另一个线程（Swing 事件线程）可以添加到这个对象。因此，`ConcurrentModificationException`。我尝试通过用 包围代码来获得锁`synchronized (chain) { ... }`，但我仍然得到错误。

作为一个Java同步新手，我有点困惑为什么。我希望这会使循环线程安全，但显然不是。

有趣`chain`的是，它是一个自定义类的实例，但它只是一个`LinkedList`. 该列表本身是私有的，外部类无法直接检索它（有显式添加/删除对象的方法），所以我不希望这会影响结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T06:12:01.843

的意思

```
synchronized (c) {
    ... code that uses c ...
} 
```

是

*   等待`c`解锁
*   锁`c`
*   执行身体
*   开锁`c`

所以如果你在你的线程中同步，那么你的线程将等待`c`被解锁然后潜入。

现在，如果您*不*同步修改 的*另一个*线程上的代码`c`，则该代码将继续进行修改`c`而无需等待锁定。在一个线程中同步块不会使另一个线程等待锁。如果另一个线程有一行如

```
c.add(someOtherTask) 
```

那不在同步块中，那么无论如何它都会进行添加。这是您的异常的原因。这也是为什么即使您将代码放在同步块中的线程中也看到异常的原因：您的代码是“按规则播放”，但另一个线程却不在乎。

不过要小心同步长时间运行的代码。正如 Stephen C 所说，你最好使用并发集合类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T05:33:43.983

同步不一定有帮助。

基本上问题是您使用的集合类型不允许在迭代进行时修改集合（除非通过迭代器的`remove`方法......如果支持）。*这本身*不是线程/同步问题。（如果你试图简单地通过同步来解决它，你可能会引入另一个问题。）

如果您希望能够同时进行迭代和修改，则需要使用不同的集合类型，例如[ConcurrentLinkedDeque](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html)而不是`LinkedList`.

* * *

> 如果迭代和写入发生在不同的线程上，那么在迭代完成之前不应该同步阻塞写入吗？还是我错过了什么？

问题在于您如何实现同步：

*   如果您没有在您的版本中明确进行某种同步`LinkedList`，则不会为您完成同步。

*   如果您使用由其中一种`Collections.synchronizedXxx`方法创建的同步包装器，那么这些方法的 javadocs 会明确声明`Iterator`包装器方法返回的对象未`iterator()`同步。

*   如果您手动进行同步，那么您必须确保所有内容都在同一个互斥锁上同步。并且该锁必须在迭代期间保持在该互斥体上……而不仅仅是调用`iterator()`.

请注意，如果您长时间持有锁（例如，当您迭代一个长列表时），这可能会阻塞需要长时间更新列表的其他线程。这种事情可能是并发瓶颈，可以（在最坏的情况下）将系统性能降低到单个处理器的速度。

这些`ConcurrentXxx`类通常通过放宽迭代器产生的序列的一致性保证来避免这种情况。例如，您可能看不到在开始迭代后添加到集合中的元素。

# java - 霍纳的小数部分递归算法 - Java

> ID：12444587
> 
> 赞同：7
> 
> 时间：2012-09-16T05:22:04.080
> 
> 标签：java, algorithm, recursion

我正在尝试创建一种递归方法，该方法使用霍纳算法将以 n 为底的小数转换为以 10 为底的小数。我在这里和所有地方都进行了搜索，但找不到任何详细处理小数部分的地方。提醒一下，我的递归很弱，因为我还没有在我的编程课程中正式学习过它，但是已经被另一个课程分配了。

我能够制作一种方法来处理数字的整数部分，而不是小数部分。

我觉得我写的方法相当接近，因为它让我的测试数字的答案加倍（可能是因为我正在测试基数 2）。

传递的第一个参数是一个用系数填充的 int 数组。我不太关心系数的顺序，因为我让所有系数都相同来测试它。

第二个参数是基础。第三个参数初始化为系数数减 1，我也将其用于整数部分方法。我尝试使用系数的数量，但这超出了数组。

我尝试再除以基数一次，因为这会给我正确的答案，但如果我在基本情况返回语句或最终返回语句的末尾这样做，它就不起作用。

因此，当我尝试将**0.1111** base 2 转换为 base 10 时，我的方法返回**1.875**（正确答案的两倍**0.9375**）。

任何提示将不胜感激！

```
//TL;DR
coef[0] = 1; coef[1] = 1; coef[2] = 1; coef[3] = 1;
base = 2; it = 3;
//results in 1.875 instead of the correct 0.9375

public static double fracHorner(int[] coef, int base, int it) {
    if (it == 0) {
        return coef[it];
    }
    return ((float)1/base * fracHorner(coef, base, it-1)) + coef[it];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T05:44:43.060

请注意，它`fracHorner`总是返回一个至少等于的值，`coef[it]`因为它要么返回，要么将`coef[it]`正数添加到`coef[it]`. 因为`coef[it] >= 1`在您的测试中，它总是会返回一个大于或等于 1 的数字。

它相对容易修复：将两者`coef[it]`除以`base`：

```
public static double fracHorner(int[] coef, int base, int it) {
    if (it == 0) {
        return ((double)coef[it])/base;
    }
    return (fracHorner(coef, base, it-1) + coef[it])/base;
} 
```

# php - 为数据库结果分配标签

> ID：12444590
> 
> 赞同：1
> 
> 时间：2012-09-16T05:22:50.930
> 
> 标签：php, model-view-controller

很长一段时间以来，我一直想问这个问题，但我无法（而且还没有）想出一个合适的标题来描述这个问题。英语不是我的母语，我什至不知道这个概念叫什么。忍受我...

直到最近，当从数据库中获取结果时，我只需要以它们的存储方式输出它们。所以当我这样做的时候

`SELECT name, gender, country FROM contacts`

我只需要输出它

`echo $result['name'] . " - " . $result['gender'] . " - " . $result['country'];`.

国家名称按其**ISO**国家代码存储在数据库中。这意味着美国存储为 USA，巴西存储为 BRA。这样做的目的是确保与其他系统的兼容性。另一方面，用户不想处理这些国家代码，他们希望看到完整的国家名称。

同样，在搜索给定国家的所有联系人时，他们希望能够在搜索框中输入完整的国家名称，而不是**ISO-code**。

我如何为这些结果分配标签（如果您愿意，可以使用人类可读的值）？

我在没有框架的情况下使用 PHP，但我确实遵循**MVC**类比（业务逻辑和表示分离）。这将如何适应**MVC**架构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:36:52.273

表“联系人”包含列名称、性别、国家 ISO 代码。表“country_labels”包含国家 ISO 代码和标签。

MySQL：

```
SELECT * FROM contacts INNER JOIN country_labels ON contacts.country=country_labels.country 
```

PHP：

```
echo $result['name'] . " - " . $result['gender'] . " - " . $result['label'];. 
```

# configuration - Ejabberd 名册 odbc

> ID：12444591
> 
> 赞同：0
> 
> 时间：2012-09-16T05:22:53.840
> 
> 标签：configuration, odbc, ejabberd

我是 ejabberd 的新手，我对 mod_roster_odbc 有疑问。我按照此处的说明进行操作： [http](http://www.planeterlang.org/en/planet/article/How_to_install_ejabberd_2.0.0_with_PostgreSQL_support/) : //www.planeterlang.org/en/planet/article/How_to_install_ejabberd_2.0.0_with_PostgreSQL_support/ 在 ejabberd.cfg 中，我将 mod_roster 替换为 mod_roster_odbc 并提供 pgsql 信息（信息正确）我下载pgsql 的 ejabberd 架构：（我修复了一些查询错误，缺少一些逗号。） [https://github.com/processone/ejabberd/tree/master/src/odbc](https://github.com/processone/ejabberd/tree/master/src/odbc)

但是 odbc 名册不起作用。当我使用 ejabberdctl 创建用户时，它说：用户 newuser@domain 已经在节点 ejabberd@localhost 注册。在 pgsql 数据库中，没有任何变化，没有插入数据。

所以，我的最后一个问题是：我有一个数据库存储名册用户，名册组，......我如何使用 mod_roster_odbc。

非常感谢更新 1：当我尝试订阅（使用 XMPP 客户端将用户添加到名册）时，我可以看到日志：

```
=ERROR REPORT==== 2012-09-16 12:29:21 ===
E(<0.308.0>:ejabberd_odbc:405) : SQL transaction restarts exceeded
** Restarts: 10
** Last abort reason: []
** Stacktrace: [{ejabberd_odbc,sql_query_t,1},
                {mod_roster_odbc,'-process_subscription/6-fun-0-',8},
                {ejabberd_odbc,outer_transaction,3},
                {ejabberd_odbc,run_sql_cmd,4},
                {p1_fsm,handle_msg,10},
                {proc_lib,init_p_do_apply,3}]
** When State == {state,<0.309.0>,pgsql,30000,"mossi",1000,{0,{[],[]}}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:23:07.793

由于Postgres版本，我终于找到了问题。我将 Postgres 从 9.0 更改为 8.4 并且有效。这个问题是因为 Postgres 9.0 不使用“\”处理多行查询。

# java - session 是否存在多个 servlet 之间的同步问题？

> ID：12444592
> 
> 赞同：3
> 
> 时间：2012-09-16T05:23:02.803
> 
> 标签：java, session, servlets, synchronization

例如，用户可能访问一个 servlet，而该 servlet 有一系列关于会话的操作，这可能需要一些时间。同时，用户打开另一个窗口并访问另一个有关会话的 servlet。由于这两个 servlet 由同一用户访问，因此它们使用相同的会话变量。所以我认为往往存在同步问题。

如果存在这样的问题，使用同步块是否足以解决问题？（我认为同步块只能处理同一个线程中的事情。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:03:24.360

会话本身是线程安全的。但这并不意味着在没有任何同步的情况下使用它会导致正确的行为。这仅意味着如果由多个线程访问，会话将正常运行。

例如，假设您同时执行以下代码：

```
Integer visitCount = (Integer) session.getAttribute("visitCount");
visitCount = Integer.valueOf(visitCount.intValue() + 1);
session.setAttribute("visitCount", visitCount); 
```

并假设 的原始值为`visitCount`0。最终结果可能是 2（预期值），也可能是 1。事实上，两个线程都可以同时读取当前值 (0)，然后都将其递增到 1，并且两者都将其存储在会话中。

同样，如果您在会话中存储一个线程不安全的对象（例如 HashMap），并且两个线程同时使用此 HashMap，您可能会看到不稳定的行为。

与每个多线程程序一样，您必须在必要时使用适当的同步机制，和/或使您的对象成为线程安全的。但这是整本书的主题。我会*在实践中推荐 Java Concurrency*。

# extjs - extjs 深入搜索存储数据？

> ID：12444593
> 
> 赞同：1
> 
> 时间：2012-09-16T05:23:27.467
> 
> 标签：extjs

在 Flex 应用程序中，元数据作为 xml 加载，具有很好的功能，可以深入搜索 xml 节点。在 extjs 版本中，我已将 xml 数据转换为 json，保留深层分层内容，并使用 json 阅读器加载到 extjs Store。我没有创建模型，认为这没有必要，因为模型没有添加任何搜索功能（？）。我正在查看可以使用函数的 store.find、store.findBy、store.findRecord 等，但这些函数看起来非常“单一”。我需要转到“Tabs”“节点”，找到其“名称”为“Tab1”的子“Tab”，并找到其属性“Title”的值......我正在使用描述“节点”但它是分层的 json 数据。我是否缺少可以执行此操作的商店功能，我应该使用商店吗？s 原始 json 数据 - json 是否具有更好的搜索功能，或者我应该通过循环遍历所有“节点”来恢复暴力 javascript？我希望避免循环并找到某种功能。与往常一样，蒂亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:42:01.327

好吧，我从我们的评论中了解到，您需要一种存储来尽可能快速轻松地访问您的**JSON数据。**JSON 表示*JavaScript Object Notation*，所以它是一个对象！

好的，我给你举两个例子。首先，设置 JSON 数据：

```
{
    "users": [{
        "user": {
            "id": 0 ,
            "name": "foo" ,
            "age": 22 ,
            "skills": [{
                "type": "bowcrafting" ,
                "skillLevel": 50 ,
                "levels": [10, 25, 50, 75, 90, 95, 99, 100]
            }]
        }} , { 
        "user": {
            "id": 1 ,
            "name": "bar" ,
            "age": 71 ,
            "skills": [{
                "type": "fencing" ,
                "skillLevel": 32 ,
                "levels": [10, 25, 50, 90, 95, 99, 100]
            } , {
                "type": "swordsmanship" ,
                "skillLevel": 73 ,
                "levels": [10, 25, 50, 75, 80, 85, 90, 95, 99, 100]
            }]
        }} , {
        "user": {
            "id": 2 ,
            "name": "foobar" ,
            "age": 132 ,
            "skills": [{
                "type": "tactics" ,
                "skillLevel": 90 ,
                "levels": [10, 25, 50, 90, 95, 99, 100]
            } , {
                "type": "carpentery" ,
                "skillLevel": 86 ,
                "levels": [10, 25, 50, 75, 90, 95, 99, 100]
            } , {
                "type": "hiding" ,
                "skillLevel": 100 ,
                "levels": [10, 25, 50, 65, 75, 80, 85, 90, 95, 99, 100]
            }]
        }
    }]
} 
```

现在我们有两种方法可以遵循：

**第一种方式**：我们可以想象将上面的 JSON 保存到一个名为*nested-json.json*的文件中，然后我们通过一个简单的存储来读取它。然后，我们可以使用*findBy*搜索来找到我们需要的内容：

```
var jstore = Ext.create ('Ext.data.Store', {
    fields: ['id', 'name', 'age', 'skills'] ,

    proxy: {
        type: 'ajax' ,
        url: 'nested-json.json' ,
        reader: {
            type: 'json' ,
            root: 'users' ,
            record: 'user' ,
            idProperty: 'id'
        }
    } ,

    autoLoad: true
});

Ext.create ('Ext.button.Button', {
    text: 'Push me' ,
    renderTo: Ext.getBody () ,
    handler: function (btn) {
        var index = jstore.findBy (function (user, id) {
            // Here's the hint
            if (user.data.skills.skillLevel === 50) return id;
            else return -1;
        });

        if (index != -1) {
            // It will print 'foo' because it's the user
            // that has the skillLevel equal to 50
            console.log (jstore.getAt(index).get ('name'));
        }
    }
}); 
```

另一种方式是将上面的 JSON 想象*成一个对象*，直接从原始 JSON 数据中读取。此时，只需将其用作 javascript 对象即可：

```
// Users model: required by JSON reader
Ext.define ('Users', {
    extend: 'Ext.data.Model' ,
    fields: ['id', 'name', 'age', 'skills']
});

// JSON reader
var jreader = Ext.create ('Ext.data.reader.Json', {
    model: 'Users' ,
    root: 'users' ,
    record: 'user' ,
    idProperty: 'id'
});

// Reads records directly from raw JSON
var users = jreader.readRecords ({
    "users": [{
        "user": {
            "id": 0 ,
            "name": "foo" ,
            "age": 22 ,
            "skills": [{
                "type": "bowcrafting" ,
                "skillLevel": 50 ,
                "levels": [10, 25, 50, 75, 90, 95, 99, 100]
            }]
        }} , { 
        "user": {
            "id": 1 ,
            "name": "bar" ,
            "age": 71 ,
            "skills": [{
                "type": "fencing" ,
                "skillLevel": 32 ,
                "levels": [10, 25, 50, 90, 95, 99, 100]
            } , {
                "type": "swordsmanship" ,
                "skillLevel": 73 ,
                "levels": [10, 25, 50, 75, 80, 85, 90, 95, 99, 100]
            }]
        }} , {
        "user": {
            "id": 2 ,
            "name": "foobar" ,
            "age": 132 ,
            "skills": [{
                "type": "tactics" ,
                "skillLevel": 90 ,
                "levels": [10, 25, 50, 90, 95, 99, 100]
            } , {
                "type": "carpentery" ,
                "skillLevel": 86 ,
                "levels": [10, 25, 50, 75, 90, 95, 99, 100]
            } , {
                "type": "hiding" ,
                "skillLevel": 100 ,
                "levels": [10, 25, 50, 65, 75, 80, 85, 90, 95, 99, 100]
            }]
        }
    }]
});

// Here's the magic
Ext.each (users.records, function (user) {
    console.log ('*** USER ***');
    console.log (user);

    console.log ('id: ' + user.get ('id'));
    console.log ('name: ' + user.get ('name'));
    console.log ('age: ' + user.get ('age'));

    Ext.each (user.get ('skills'), function (skill) {
        console.log ('*** SKILL ***');
        console.log (skill);

        console.log ('type: ' + skill.type);
        console.log ('level: ' + skill.skillLevel);

        console.log ('*** LEVELS ***');
        Ext.each (skill.levels, function (level) {
            console.log (level);
        });
    });
}); 
```

这是一个**jsfiddle**来测试最后一个：[jsfiddle](http://jsfiddle.net/e58Vn/)

我希望能理解你的要求。如果我没有，请通过您自己制作的示例告诉我；）

# sockets - 为什么在“结束”事件中未定义 socket.remoteAddress？

> ID：12444598
> 
> 赞同：6
> 
> 时间：2012-09-16T05:24:37.367
> 
> 标签：sockets, node.js

我有一个简单的 TCP 服务器，如下所示：

```
var net = require('net');
var PORT = 6346;

var server = net.createServer(function(socket) {

    socket.on('connect', function() {
        console.log('Client connected: ' + socket.remoteAddress);
        socket.write('Welcome to the server!\r\n');
    });

    socket.on('end', function() {
        console.log('Client disconnected: ' + socket.remoteAddress);
    });

    socket.on('error', function() {
        console.log('Client error: ' + socket.remoteAddress);
    });

    socket.on('timeout', function() {
        console.log('Client timed out:' + socket.remoteAddress);
    });

}).listen(PORT); 
```

当我连接到服务器时，我看到了预期`Client connected: 127.0.0.1`，但是当我断开连接时，我看到了`Client disconnected: undefined`. 为什么 socket.remoteAddress 未定义，如何在断开连接时记录客户端的 IP？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T05:30:33.107

问题是套接字断开后，某些属性（例如`remoteAddress`）不再可用！

您可以通过使用自己的对象包装套接字来解决此问题，或者在连接时在其他地方跟踪该远程地址。（为关闭而努力。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-17T03:20:51.197

[一旦https://github.com/joyent/node/commit/8c38b07252d86f4eef91344f8df4f0c3e38bca35](https://github.com/joyent/node/commit/8c38b07252d86f4eef91344f8df4f0c3e38bca35)在 Node.js 的稳定版本中，即使断开连接，remoteAddress 属性也会存在。io.js 将在下一个版本中包含它：[https ://github.com/iojs/io.js/issues/1157](https://github.com/iojs/io.js/issues/1157)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T16:07:53.800

在尝试从某些服务器调试 504 错误时，我发现更改此代码

```
request(url, function (error, response, body) {
    if (error) {
        callback(error);
    } else {
        if (response.statusCode == 200) {
            callback(null, body);
        } else {
            // response.connection.remoteAddress is undefined here
            callback(new Error("Non status 200: " + response.statusCode + " received from " + response.connection.remoteAddress + " when requesting " + url));
        }
    }
}); 
```

到这个代码

```
request(url, function (error, response, body) {
    if (error) {
        callback(error);
    } else {
        if (response.statusCode == 200) {
            callback(null, body);
        } else {
            // response.connection.remoteAddress is now magically set somehow
            callback(new Error("Non status 200: " + response.statusCode + " received from " + response.connection.remoteAddress + " when requesting " + url));
        }
    }
}).on('response', function(response) {
    // This next line is very important.  It seems to make the remoteAddress variable stay in the socket so we can read it.
    let remoteAddress = response.connection.remoteAddress;
}); 
```

似乎工作。我不知道为什么在响应处理程序中访问 remoteAddress 变量会使其停留在阅读状态。

# multithreading - Azure Web 角色 - Monitor.Wait 和线程饥饿

> ID：12444600
> 
> 赞同：0
> 
> 时间：2012-09-16T05:24:56.303
> 
> 标签：multithreading, asynchronous, azure, azure-web-roles

情况：一个大规模的 Azure IIS7 应用程序，它必须这样做：

1.  接收请求
2.  将请求负载放入队列以进行解耦异步处理
3.  保持与客户端的连接
4.  等待异步进程完成的通知
5.  回复客户

请注意，这些将是长时间运行的进程（30 秒到 5 分钟）。

如果我们在这里使用 Monitor.Wait(...)，等待来自异步进程的对同一个 Web 应用程序的回调，以在我们调用 Monitor.Wait() 的对象上调用 Monitor.Pulse(...)，这会有效地迅速造成线程饥饿吗？

如果是这样，如何减轻这种情况？这里有更好的模式来等待回调吗？例如，我们是否可以将 Response 对象放入线程安全的字典中，然后以某种方式让步，让回调代码锁定 Response 并继续响应客户端？如果是这样，怎么做？

此外，如果异步进程终止，并且从不调用回调，从而永远不会导致 Monitor.Pulse() 触发怎么办？我们的线程现在挂了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:00:38.420

鉴于您的要求，我建议您查看[AsyncPage](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx) / [AsyncController](http://www.aaronstannard.com/post/2011/01/06/asynchonrous-controllers-ASPNET-mvc.aspx)（取决于您使用的是 ASP.NET WebForms 还是 ASP.NET MVC）。这些使您可以在 IIS 中执行长时间运行的任务，而不会阻塞 I/O 线程。

# javascript - 使用 jQuery 函数提交表单

> ID：12444602
> 
> 赞同：0
> 
> 时间：2012-09-16T05:25:08.977
> 
> 标签：javascript, jquery, html, ajax, django

我有一个 html 页面，其中包含一个表单，我希望当表单成功提交时，显示以下 div：

```
<div class="response" style="display: none;">
  <p>you can download it<a href="{{ link }}">here</a></p>
</div> 
```

我还有一个 jquery 函数：

```
 <script type="text/javascript">
        $(function() {
            $('#sendButton').click(function(e) {            
                e.preventDefault();
                var temp = $("#backupSubmit").serialize();
                validateForm();
                $.ajax({
                    type: "POST",
                    data: temp,
                    url: 'backup/',
                    success: function(data) {
                        $(".response").show();
                    }
                });
            });
        });

</script> 
```

在我的`views.py`（后面的代码）中，我创建了一个链接并将其传递给 html 页面。我有：

```
def backup(request):
    if request.is_ajax():
        if request.method=='POST':
            //create a link that user can download a file from it. (link)
            variables = RequestContext(request,{'link':link})
            return render_to_response('backup.html',variables)
        else:
            return render_to_response('backup.html')
    else:
        return render_to_response("show.html", {
            'str': "bad Request! :(",
            }, context_instance=RequestContext(request))
backup = login_required(backup) 
```

我的问题：我的观点似乎没有执行。它没有显示我发送到此页面的链接。似乎只执行了 jQuery 函数。我很困惑。我怎样才能让它们都执行（我的意思是 jQuery 函数，然后是我在这个函数中设置的 url，它使我的视图被执行。）

我不知道如何使用序列化功能。每当我搜索时，他们写道：

> .serialize() 方法以标准 URL 编码表示法创建文本字符串，并生成查询字符串，如“a=1&b=2&c=3&d=4&e=5。

我不知道什么时候必须使用它，而我可以在 request.Post["field name"] 中访问我的表单字段。而且我不知道在我的情况下成功的数据应该是什么：函数（数据）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:48:52.267

`data`您必须从您的 ajax post 函数中获取并显示，`data`您通过 DJango 服务器呈现的响应在哪里，例如：

```
t = Template("{{ link }}")
c = Context({"link": link})
t.render(c): 
```

你的 JS / jQuery 应该变成这样：

```
<script type="text/javascript">
    $(function() {
        $('#sendButton').click(function(e) {            
            e.preventDefault();
            var temp = $("#backupSubmit").serialize();
            validateForm();
            $.ajax({
                type: "POST",
                data: temp,
                url: 'backup/',

                success: function(data) {
                    // 'data' is the response from your server
                    // (=the link you want to generate from the server)

                    // Append the resulting link 'data' to your DIV '.response'
                    $(".response").html('<p>you can download it<a href="'+data+'">here</a></p>');

                    $(".response").show();
                }
            });
        });
    });
</script> 
```

希望这可以帮助。

# html - 可以在属性中使用 HTML 实体吗？

> ID：12444605
> 
> 赞同：7
> 
> 时间：2012-09-16T05:26:24.933
> 
> 标签：html, escaping, html-entities

我一直在使用 slim，突然注意到它默认会转义所有内容。所以锚标签看起来像这样：

```
<a href="&#47;users&#47;lyann&#47;followers">
<img class="user-image" src="http:&#47;&#47;adasdasdasd.cloudfront.net&#47;users&# 47;2011&#47;05&#47;24&#47;4asdasd&#47;asdasd.jpg" /> 
```

`href`和`src`属性可以这样转义吗？还有其他影响吗？不过，所有浏览器似乎都可以毫无问题地呈现它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T05:28:17.697

是的，完全没问题。字符引用在属性内部也是有效的，并且将被视为相同的字符引用。

供参考，请参阅：

*   [字符引用的描述](http://dev.w3.org/html5/spec/syntax.html#character-references)（它们可以在文本中找到）
*   [文字说明](http://dev.w3.org/html5/spec/syntax.html#syntax-text)

# php - 如何在不使用验证码的情况下保护 JSON 调用

> ID：12444608
> 
> 赞同：1
> 
> 时间：2012-09-16T05:27:11.330
> 
> 标签：php, sql, json

因此，我们正在建立一个网站并创建我们的基本信息以将登录信息发送到我们的数据库。我们在尝试禁止仅插入自己的数据的请求时遇到了麻烦。

例如

```
http://testing.site.com/php/interfaces/User.php?Action=1&Email=test@gmail.com&FirstName=herp%20derp 
```

通过替换电子邮件和名字，他们能够将多个用户添加到数据库中，并且可能使用数千个脚本。有没有办法在不使用验证码的情况下防止这种情况发生？我们正在尝试将网站设计做到最小化和开放性，因此如果可能的话，我们希望能提供一些意见。

我们考虑过的一种选择是将我们的 PHP 下线并只允许我们的 API 访问它——但是它仍然存在用户添加授权数据的问题（并且由于成千上万的多个请求而使我们的数据库超载）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:33:06.167

这是一个示例选项，创建一个包含 2 个字段的表，一个是自动增量 ID，一个是随机代码，让我们命名它们`ID`并`CODE`

发送该请求时，在该表中创建 1 条记录`ID`并`CODE`与请求一起传递，当接收到请求时，检查数据库中是否有记录`ID`并`CODE`处理请求并从数据库中删除该记录，如果没有t那个记录，只是忽略请求......

# jquery - jQuery：为什么这个警报没有触发？

> ID：12444610
> 
> 赞同：0
> 
> 时间：2012-09-16T05:27:46.570
> 
> 标签：jquery, jquery-ui

破演示：http: [//jsfiddle.net/sTzCS/52/](http://jsfiddle.net/sTzCS/52/)

如果您使用小提琴，您应该能够将列表中的团队拖放到新的顺序中。您还可以输入一个值来表示您认为每支球队将在本赛季中获得的分数。jQuery 在您完成重新排列后读取排序顺序，并尝试获取每个团队的输入值。

小提琴中的警报（我为测试目的创建的）应该向团队展示您放在首位的团队以及您希望他们获得的积分数量。但是，警报没有触发。jLint 说代码是有效的。我正在使用警报来确保我实际上得到了正确的值。你能解释为什么警报不起作用吗？

```
<form<form id="new_entry">

<ul id="sortlist">

        <li id="Vancouver">Canucks<input type="text" name="name" id="vanpoints"></li>
        <li id="Toronto">Toronto<input type="text" name="name" id="torontopoints"></li>
        <li id="Montreal">Montreal<input type="text" name="name" id="montrealpoints"></li>
        <li id="Ottawa">Ottawa<input type="text" name="name" id="ottawapoints"></li>
        <li id="Calgary">Calgary<input type="text" name="name" id="calgarypoints"></li>
        <li id="Edmonton">Edmonton<input type="text" name="name" id="edmontonpoints"></li>
        <li id="Winnipeg">Winnipeg<input type="text" name="name" id="winnipegpoints"></li>
</ul>
<input type="submit" value="Add">
</form> 
```

jQuery

```
$("#sortlist").sortable({
    stop: function(event, ui) {
        result = $("#sortlist").sortable("toArray");
        var attributes;
        attributes = {
            first: { team: result[0].id, value: result[0].children()[0].val() },
       second : { team: result[1].id, value: result[1].children()[0].val() },
        third: { team: result[2].id, value: result[2].children()[0].val() },
        fourth: { team: result[3].id, value: result[3].children()[0].val() },
        fifth: { team: result[4].id, value: result[4].children()[0].val() },
        sixth: { team: result[5].id, value: result[5].children()[0].val() },
        seventh: { team: result[6].id, value: result[6].children()[0].val() }
        };

        alert(attributes.first.team + attributes.first.value);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:40:52.220

`$("#sortlist").sortable("toArray")`返回一个可排序项目的 id 数组，它是一个字符串数组。

字符串没有`id`属性和`children`方法。

# c - 在 typedef 结构上使用静态

> ID：12444611
> 
> 赞同：20
> 
> 时间：2012-09-16T05:28:05.193
> 
> 标签：c, static, struct, typedef

我在 C 中经常使用以下代码：

```
typedef struct
  {
  int member;
  } structname; 
```

现在我试图将该结构定义保留在特定源文件的本地，这样其他源文件甚至都不知道该结构存在。我尝试了以下方法：

```
static typedef struct
  {
  int member;
  } structname; 
```

但是 GCC 因为非法的访问说明符而抱怨。甚至可以将结构的声明保留为源文件私有吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-16T05:33:40.310

如果您在 .c 文件中声明 typedef 结构，它将对该源文件是私有的。

如果您在 .h 文件中声明此 typedef，则包含此头文件的所有 .c 文件都可以访问它。

您的声明：

```
static typedef struct 
```

显然是非法的，因为您既没有声明变量也没有定义新类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T05:33:14.573

所有声明对于 C 中的特定翻译单元始终是本地的。这就是为什么您需要在所有打算使用给定声明的源文件中包含标头。

如果你想限制使用你的`struct`，要么在你使用它的文件中声明它，要么创建一个只有你的文件包含的特殊头文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-16T05:32:30.027

结构定义对源文件是私有的，除非放在共享头文件中。没有其他源文件可以访问该结构的成员，即使给定了一个指向该结构的指针（因为在其他编译单元中不知道布局）。

如果该结构需要在其他地方使用，它必须仅用作指针。在头文件中放置表单的前向声明`struct structname; typedef struct structname structname;`，并`structname *`在代码库中的其他任何地方使用。然后，由于结构成员仅出现在一个源文件中，因此结构的内容实际上是该文件的“私有”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T05:40:40.770

Hernan Velasquez 的答案是正确答案：您的代码片段存在*几个*问题。这是一个反例：

```
/* This should go in a .h if you will use this typedef in multiple .c files */
typedef struct {
  int a;
  char b[8];
} mystructdef;

int
main (int argc, char *argv[])
{
  /* "static" is legal when you define the variable ...
    ... but *not* when you declare the typedef */
  static mystructdef ms; 
```

# actionscript-3 - 计算物体的轨迹，当给定一个角度和速度时

> ID：12444615
> 
> 赞同：3
> 
> 时间：2012-09-16T05:28:39.413
> 
> 标签：actionscript-3, flash, game-physics, flash-cs6

我正在尝试从大炮发射炮弹并让它遵循一条现实的路径。射击角度根据大炮的方向而变化（自动定位到鼠标指针）。所以我想弄清楚的是，在给定角度和设定速度的情况下，如何沿着抛物线路径移动炮弹。

我读过这可以在没有复杂的三角函数的情况下完成（在高中从未听过它），并且可以通过在每个滴答声中添加重力到 yVelocity 来简单地计算。但是，此时，我不知道如何计算初始 yVelocity（同样，取决于大炮方向）。

您可以在此处查看当前动画：http: [//kate.ict.op.ac.nz/~welfajw1/portfolio/videos/task3-assignment2.swf](http://kate.ict.op.ac.nz/~welfajw1/portfolio/videos/task3-assignment2.swf)

这都是在AS3中完成的，我的代码如下：

**主要时间线代码：**

```
import flash.display.*;
import flash.events.*;
import flash.geom.*;

var cannonball:ball_mc;
var angleDegree;

myCannon.addEventListener(Event.ENTER_FRAME, cannonEnterFrame);

function cannonEnterFrame(pEvt)
{
    var mc = myCannon;
    var mg = myCannon.myGun;

    //find angle for orientation
    var angleRadian = Math.atan2(mouseY - mc.y, mouseX - mc.x);

    //convert to degrees
    angleDegree = angleRadian * 180 / Math.PI;

    //limit rotation
    if(angleDegree > -63 && angleDegree < 20)
        mg.rotation = angleDegree;
}

stage.addEventListener(Event.ENTER_FRAME, stageRefresh);

function stageRefresh(pEvt)
{
    if (cannonball)
    {
        //move every "tick"
        cannonball.move();
    }
}

stage.addEventListener(MouseEvent.CLICK, mouseClicked);

function mouseClicked(pEvt)
{
    //starting position of the ball
    cannonball = new ball_mc(100, 475);

    //SEND IN INITIAL x, y VELOCITIES
    cannonball.fire(20, angleDegree);

    //add to stage
    stage.addChild(cannonball);
} 
```

**ball_mc 代码：**

```
package 
{

    import flash.display.MovieClip;
    import flash.sensors.Accelerometer;
    import flashx.textLayout.formats.Float;

    public class ball_mc extends MovieClip
    {
        //constant gravity
        public static const g:Number = 2;

        //starting velocities
        private var ux:Number;
        private var uy:Number;

        public function ball_mc(startX:int, startY:int)
        {
            x = startX;
            y = startY;
        }

        public function fire(vx:Number, vy:Number):void
        {
            ux = vx;
            uy = vy;
        }

        public function move():void
        {
            //distance moved in x dir
            var sx:Number = ux; 
            //new velocity in y dir
            var vy:Number = uy + g;
            //distance moved in y dir
            var sy:Number = uy + g/2;

            //apply movement
            x += sx;
            y += sy;

            //save new y velocity
            uy = vy;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T10:10:51.827

你需要一点物理知识。

必须使用您自己添加的一些标准来计算初始速度。一个例子是使用鼠标按下时鼠标和大炮之间的距离来计算初始速度。如果距离越大，弹丸的速度就会越大，如果距离越小，弹丸的速度就会越小。

您添加一个类型为 ENTER_FRAME 的事件侦听器。

我猜这是二维动画，所以你必须在任何时间点找到当前的 x 和 y。

这里有一点代码：

```
var TimeperFrame:Number = 1/fps //fps is not a constant, here you should add a number, a value that you previously added in fla. document properties. I usualy use 60 fps
var Time:Number = 0;

addEventListener(ENTER_FRAME, movingCannonBall);
function movingCannonBall(e:Event):void
{
   Time += TimeperFrame;
} 
```

现在这是弹丸轨迹的方程式。

x = xo + vxo·t

y = yo + vyo·t - 0.5·g·t^2

yo = 炮弹的初始高度

vyo = 初始 y 速度；vyo = vo·sin θ

t = 时间过去了，我们通过上面的代码来控制它

g = 地球表面的加速度 (9,81 m/s^2)

xo = 开始的初始距离

vxo = 初始 x 速度；vxo = vo·cos θ

现在在上面的代码中，我们添加这些方程式，它应该看起来像这样：

```
var TimeperFrame:Number = 1/fps
var Time:Number = 0;
var initx: Number = cannonball.x;
var inity: Number = cannonball.y;
var initVelocity: Number = (you define initial Velocity by your criteria)
var G: Number = 9.81;

addEventListener(ENTER_FRAME, movingCannonBall);
function movingCannonBall(e:Event):void
{
   Time += TimeperFrame;
   cannonball.x = initx + Math.cos(angle) * initVelocity * Time;
   cannonball.y = inity + Math.sin(angle) * initVelocity * Time - G * Time * Time * 0.5
} 
```

这应该有效。我已经多次使用此代码，它既高效又简单。

# c# - 当我尝试将枚举格式化为字符串时，为什么我的格式会出现错误？

> ID：12444616
> 
> 赞同：7
> 
> 时间：2012-09-16T05:28:44.757
> 
> 标签：c#

我有以下枚举：

```
public enum EReferenceKey {
        Accounts             = 1,
        Emails                = 3,
        Phones               = 4
} 
```

当我的枚举变量 pk 是 Accounts 时，我尝试使用将其转换为“01”

```
var a = pk.ToString("00"); 
```

它给了我以下例外：

格式字符串只能是“G”、“g”、“X”、“x”、“F”、“f”、“D”或“d”

有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T05:32:16.517

在尝试该格式字符串之前，您需要将其转换为 int 。Enum 有自己的 ToString 实现，因此您的 int 格式字符串不正确。

```
var a = ((int)pk).ToString("00"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T05:32:47.047

`int`在尝试格式化枚举值之前尝试转换为：

```
var a = ((int)EReferenceKey.Accounts).ToString("00"); 
```

这对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T05:35:28.320

您正在尝试使用 String.Format 的格式字符。枚举是不同的。看看[http://msdn.microsoft.com/en-us/library/system.enum.format.aspx](http://msdn.microsoft.com/en-us/library/system.enum.format.aspx)。

您必须获取值然后格式化。演员表是最简单的方法。

# php - 从 PHP 访问 AStats 信息？

> ID：12444635
> 
> 赞同：1
> 
> 时间：2012-09-16T05:34:41.830
> 
> 标签：php, logging, traffic, awstats

是否可以使用 PHP 从 AwStats 访问访问者县的来源信息？我想添加到项目中的一个新功能列出了最近访问者的国家（30 天）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:01:36.553

您需要做的是从 Apache 访问日志中的 IP 地址查找国家/地区。这与 Awstats 用于生成其数据的日志相同。

1.  使用诸如 [Eric Lamb 创建](http://blog.ericlamb.net/2010/01/parse-apache-log-files-with-php/)的类 来解析 Apache 访问日志。
2.  在同一个脚本中，使用类似[hostip](http://www.hostip.info/use.html)的服务来确定国家。
3.  创建一个 cron 作业以在每晚凌晨 2 点运行脚本。

# php - 如何在制作书签网站时保存链接

> ID：12444637
> 
> 赞同：0
> 
> 时间：2012-09-16T05:34:56.763
> 
> 标签：php, mysql, regex, hyperlink

我为链接提供了一个 ID，以便我可以轻松地制作统计数据并向用户展示人们在谈论什么链接？

目前 :// 前面的部分

但问题是，对于某些网站我无法修剪`www`，但对于其他网站我可以修剪`www`。

我需要单独保存链接`www.example.com`吗`example.com`？

对于某些网站，例如 iitm.ac.in 不能重定向到 www.iitm.ac.in，我无法修剪 www 的原因请检查第一个链接没有进入网站，但第二个链接进入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:13:11.057

正如您所说，您不能假设`http://example.com`并且`http://www.example.com`具有相同的内容。他们可以有完全不同的内容。

但是，通常我认为您不会发现这是一个问题，因为许多网站会从一种形式重定向到另一种形式（例如 ebay.co.uk 重定向到 www.ebay.co.uk）。这意味着大多数用户只会为后者添加书签。

也许对您的网站的实际修改是检查您保存的 URL 是否不会重定向到其他地方（301 重定向）。

# php - htaccess 重定向到父目录 - 错误请求

> ID：12444643
> 
> 赞同：-1
> 
> 时间：2012-09-16T05:36:34.017
> 
> 标签：php, apache, .htaccess, mod-rewrite, redirect

我们有一个 htaccess 文件来处理几个文件夹的漂亮链接。一些例子：

```
http://test.com/basecamp/en/foobar -> ../init.php?lang=en&request=foobar&site=basecamp
http://test.com/ravili/en/foobar   -> ../init.php?lang=en&request=foobar&site=ravili
http://test.com/ravili/ar/foo/bar  -> ../init.php?lang=ar&request=foo/bar&site=ravili 
```

**目录结构**

```
/webroot
   init.php
/webroot/basecamp
   .htaccess
/webroot/ravili
   .htaccess 
```

但是现在，我们正在尝试将文件夹移动到单独的域中，所以`http://test.com/basecamp`我们将拥有`http://test-basecamp.com`

因此`.htaccess`不再重定向到 webroot 中的 init.php，我们在错误日志中收到 400 Bad Request 和“Invalid URI in request GET /en/ HTTP/1.1”

**.htaccess 文件**

```
Options +FollowSymlinks
RewriteEngine on

RewriteBase /

RewriteCond %{REQUEST_URI} !/(content|images|css|js|fonts|pdfs)/
RewriteRule /([^.]+\.(jpe?g|gif|bmp|png|css|js|eot|svg|ttf|ico|pdf))$ /$1 [NC,R,L]

RewriteCond %{REQUEST_URI} !(content|images|css|js|fonts|pdfs)/.*
RewriteRule !^[a-z]{2}/ /en/ [NC,L,R]

RewriteCond %{REQUEST_URI} !/(content|images|css|js|fonts|pdfs)/
RewriteRule ^([a-z]{2})/(.*)$ ../init.php?lang=$1&request=$2&site=basecamp [L,QSA] 
```

那么我们该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:43:13.830

由于您已经有一个重写基础`/`，因此`../`您的规则目标的一部分导致了 400 错误请求（因为它试图遍历文档根目录的父目录）。`../`从您的 RewriteRule中删除：

```
RewriteRule ^([a-z]{2})/(.*)$ /init.php?lang=$1&request=$2&site=basecamp [L,QSA] 
```

# c++ - 使用二叉搜索树的优先级队列不产生正确的输出

> ID：12444645
> 
> 赞同：-3
> 
> 时间：2012-09-16T05:37:00.490
> 
> 标签：c++, data-structures

我使用 BST 实现了优先级队列。它的输出不正确。

输出：

```
输入元素数：9
输入第 1 个，共 9 个：8
输入第 2 个，共 9 个：10
输入第 3 个，共 9 个：14
输入 9 中的第 4 号：13
输入第 5 个，共 9 个：3
输入第 6 个，共 9 个：6
输入第 7 个，共 9 个：7
输入第 8 个，共 9 个：4
输入第 9 个，共 9 个：1
输出 9 个中的第 1 个：14
输出第 2 个，共 9 个：13
输出第 3 个，共 9 个：10
输出第 4 个，共 9 个：3
输出 9 个中的第 5 个：3
输出第 6 个，共 9 个：3
输出 9 个中的第 7 个：3
输出第 8 个，共 9 个：3
输出第 9 个，共 9 个：3
按任意键继续 。. .

```

测试.cpp

```
//Arkadiy Vasilkovskiy 832a1
#include <iostream>
#include "CTree.h"
#include "PriorityQueueBST.h"
using namespace std;

int main()
{

    int num, input, output;
    cout << "Enter number of elements: ";
    cin >> num;
    PriorityQueueBST p;
    for (int x = 0; x < num; x++)
    {
        cout << "Enter number " << x + 1  
            << " of " << num << ": ";
        cin >> input;
        p.Enqueue(input);
    }

    for (int y = 0; y < num; y++)
    {
        cout << "Outputting number " << y + 1  
            << " of " << num << ": ";
        if(p.IsEmpty())
        {
            break; //we are done (this is an error!)
        }

        output = p.Dequeue();
        cout << output << endl;
    }

    system("pause");
    return 0;
    //CTree* tr = new CTree();
    //
    //for (int i = 0; i < 3; i++)
    //  tr->Add();

    //tr->View();
    //system("pause");

    //return 0;
} 
```

BST 声明文件

```
struct TreeNode
{
    int info;
    TreeNode* leftLink;
    TreeNode* rightLink;
};

class CTree
{
public:
    CTree();
    ~CTree();
    void Add(int);
    void View();
    bool IsEmpty();
    int popLargest(TreeNode*);
    TreeNode *tree;

private:    
    void AddItem( TreeNode*&, TreeNode*);
    void DisplayTree(TreeNode*);
    void Retrieve(TreeNode*&, TreeNode*,bool&);
    void Destroy(TreeNode*&);
}; 
```

BST 实施文件

```
#include <iostream>
#include <string>

using namespace std;

#include "CTree.h"

CTree::CTree()
{
    tree = NULL;
}

CTree::~CTree()
{
    Destroy(tree);
}

void CTree::Destroy(TreeNode*& tree)
{
    if (tree != NULL)
    {
    Destroy(tree->leftLink);
    Destroy(tree->rightLink);
    delete tree;
    }
}

bool CTree::IsEmpty()
{
    if(tree == NULL) 
    {
        return true;
    }
    else
    {
        return false;
    }
}

void CTree::Add(int dataToEnter)
{
    TreeNode* newPerson = new TreeNode();
    /*cout << "Enter the person's name: ";
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
    cin.getline(newPerson->name, 20);*/
    //cout << "Enter the person's contribution: ";
    //cin >> newPerson->info;
    /*bool found = false;*/

    newPerson->info = dataToEnter;
    newPerson->leftLink = NULL;
    newPerson->rightLink = NULL;

    /*Retrieve(tree, newPerson, found);
     if (found)
         cout << "info allready entered\n";
     else*/
         AddItem(tree, newPerson);
}

void CTree::View()
{
    if (IsEmpty())
    {
        cout<<"The list is empy";
    }
    else
    {
        DisplayTree(tree);

    }

};

void CTree::AddItem( TreeNode*& ptr, TreeNode* newPer )
{
        if (ptr == NULL)
        {
            ptr = newPer;
        }
        else if ( newPer->info < ptr->info)
            AddItem(ptr->leftLink, newPer); 
        else
            AddItem(ptr->rightLink, newPer); 
}
void CTree::DisplayTree(TreeNode* ptr)
{
    if (ptr == NULL)
                    return;
    DisplayTree(ptr->rightLink);
    cout << ptr->info << endl; //cout<<ptr->name<<" "<<"$"<<ptr->info <<endl;
    DisplayTree(ptr->leftLink); 
}
void CTree::Retrieve(TreeNode*& ptr, TreeNode* newPer, bool& found)
{
    {
        if (ptr == NULL)
        {
            found = false; // item is not found.
        }
        else if ( newPer->info < ptr->info)
        {
            Retrieve(ptr->leftLink, newPer, found);
        }
             // Search left subtree.
        else if (newPer->info > ptr->info)
        {
            Retrieve(ptr->rightLink, newPer, found);// Search right subtree.
        }   
        else
        {
            //newPer.info = ptr->info; // item is found.
            found = true;
        }
    }
}

int CTree::popLargest(TreeNode* tr)
{
    //Failed Attempt at returning one value at a time and deleting that node
    int largest; // = tr->info;
    TreeNode* prev = NULL;
    TreeNode* cur = tr;

    if(tr != NULL)
        largest = tr->info;

    while (cur->rightLink != NULL)
    {
        prev = cur;
        cur = cur->rightLink;
        largest = cur->info;
        //DeleteAttemptTwo(tr, largest);//DeleteItem(largest);  

    }

    /*if (prev != NULL)
    {
        prev->rightLink = cur->leftLink;
    }*/

    if(prev != NULL)
    {
        if (cur->leftLink != NULL)
        {
            prev->rightLink = cur->leftLink;
        }
        else 
        {
            prev->rightLink = NULL;
        }
    }
    else if (cur->leftLink != NULL)
    {
        largest = cur->leftLink->info;
    }

    return largest;
} 
```

优先队列声明文件

```
#ifndef PRIORITYQUEUESLL__H
#define PRIORITYQUEUESLL__H

class PriorityQueueBST
{
    public:
        PriorityQueueBST();
        ~PriorityQueueBST();
        void Enqueue(int);
        int Dequeue();
        bool IsEmpty();

    private:
        CTree* ourTree;
};

#endif 
```

优先队列实现文件

```
#include <iostream>
using namespace std;
#include "CTree.h"
#include "PriorityQueueBST.h"

PriorityQueueBST::PriorityQueueBST()
{
    ourTree = new CTree();
    //head = NULL;
}

PriorityQueueBST::~PriorityQueueBST()
{

}

void PriorityQueueBST::Enqueue(int dataToEnter)
{
    ourTree->Add(dataToEnter);
}

int PriorityQueueBST::Dequeue()
{
    int largest = ourTree->popLargest(ourTree->tree);
    return largest;
}

bool PriorityQueueBST::IsEmpty()
{
    return ourTree->IsEmpty();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:37:53.457

我运行了您的代码并查看了调试器中发生的情况。事实证明，当您从中弹出数字时，您的树已损坏。我没有仔细研究它是如何发生的，但基本上。在第一次调用 pop 最大之前，你的树看起来像：

```
 8
    3            10
1      6              14
     4   7         13 
```

在你弹出 14、13、10 之后，它变成了：

```
 8
    3
1      6
     4   7 
```

现在，如果我正确理解了您的代码，则逻辑错误就在这里：

```
if(prev != NULL)
{
    if (cur->leftLink != NULL)
    {
        prev->rightLink = cur->leftLink;
    }
    else 
    {
        prev->rightLink = NULL;
    }
}
else if (cur->leftLink != NULL)
{
    largest = cur->leftLink->info;
} 
```

现在，如果您注意到在这种情况下最大的数字是树的根（意味着 prev == NULL），在这种情况下是 8，您返回错误的值。您说最高值是左链接，但它不是根节点的值。糟糕，你永远不会把它从树上拿下来，所以你一直被困在给出相同的答案。

# ember.js - ember.js：在我创建或编辑记录时，将侧边栏保留为项目列表

> ID：12444646
> 
> 赞同：2
> 
> 时间：2012-09-16T05:37:05.687
> 
> 标签：ember.js

基本上，我想要一个简单的结构：侧边栏（带有游戏列表）和中心的表单（新/编辑）。

因此，当用户访问路由 route /games/new 时，它将在中心呈现新表单，并将侧边栏保持在左侧。当用户访问 /games/1/edit 时，它会在中间渲染 de edition 表单，将侧边栏保持在左侧并选择正在编辑的项目。

我的问题是关于侧边栏。我没有找到解决这个问题的方法，我认为我需要使用 2 个不同的控制器，但我不知道......

[http://jsfiddle.net/alexandrebini/8BKE8/19/](http://jsfiddle.net/alexandrebini/8BKE8/19/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T23:45:49.883

您应该创建一个控制器来在侧边栏中渲染游戏，`GamesController`. 您可以将侧边栏插座与路径`GamesController`中的游戏集合（和的`games`父级）连接。在路由中，您可以设置相应的属性。`new``edit``edit``selectedObject``GamesController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:13:03.477

我的建议是侧边栏有游戏列表，列表中的每个元素都有“游戏名称”，“编辑”按钮......在侧边栏的顶部将是加号按钮，点击后可以添加新游戏，一旦创建了一个新游戏，它将被添加到具有“编辑”按钮的游戏列表中......我们可以使用 Ember.CollectionView 巧妙地完成这个，当我有空闲时间时会发布小提琴，尽快 ！

**PS：我认为您不需要很多控制器，只需要一个会根据所选上下文（所选游戏）执行的控制器。**

# javascript - Jquery .submit() 事件触发

> ID：12444648
> 
> 赞同：0
> 
> 时间：2012-09-16T05:37:24.797
> 
> 标签：javascript, jquery, html, cross-browser

HTML

```
<form action="includes/photos.php" id="joinPhotoUploadForm" enctype="multipart/form-data">
  <input type="file" name="file" id="file"><br>
</form> 
```

jQuery

```
$('div#photoCropContainer').click(function() {
  $('input#file').trigger('click');
}); 
```

和

```
$(document).on('change','input#file', function() {
    alert('ready to upload');
    $('form#joinPhotoUploadForm').submit();
}); 
```

当有人单击 Div@photoCropContainer 时，它会触发对文件输入的单击，显示弹出窗口并发送文件。这适用于 FF 和 Chrome。

但是在 IE9 上，我总是得到弹出窗口，但没有其他回复......

谁能给我任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:27:53.710

As I can see in IE9 console "access denied" on form submit line, thats why nothing works. Look at this question [ie javascript form submit with file input](https://stackoverflow.com/questions/9396411/ie-javascript-form-submit-with-file-input)

# iphone - 在 ViewController 类之外添加 UIView 类以显示子视图

> ID：12444650
> 
> 赞同：3
> 
> 时间：2012-09-16T05:37:41.130
> 
> 标签：iphone, xcode, uiview, uiviewcontroller, subview

我已经在这里检查了很多接近的答案，没有人能解决我的愚蠢问题..

我的问题是：我有 2 个类，UIViewController classA 和 UIView classB。

一个按钮（classA）触发处理（classB），然后在屏幕上显示子视图（classA）。但它不起作用。

A类.m：

```
@implementation ViewController
...

- (IBAction)trigger:(UIButton *)sender {
    [classB  makeViewOn];
} 
```

B类.h：

```
#import <UIKit/UIKit.h>

@interface classB : UIView
+ (void)makeViewOn;

@end 
```

B类.m：

```
#import "classB.h"

#import "ViewController.h"

@implementation classB

+ (void)makeViewOn
{        
    ViewController *pointer = [ViewController new];
    UIWindow *window = pointer.view.window;

    classB *overlayView = [[classB alloc] initWithFrame:window.bounds];
    overlayView.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0.5f];
    overlayView.userInteractionEnabled = YES;

    [pointer.view addSubview:overlayView];
}

@end 
```

如果我只在一个类 UIViewController 中这样做，它就可以正常工作；但是，如果我在两个单独的类（UIViewController 和 UIView）上执行此操作，我该如何解决？

我在类之间通信的基本概念上做错了吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:29:26.653

**首先**，您正在创建一个名为ViewController 类**指针**的新对象，因此您的 classB 对象**overlayView**不会作为子视图添加到 classA 中，而是添加到对象**指针**中。

**其次**，如果您打印并检查您的**window.bounds**其返回（空）。

在classB中修改你的类方法

```
+ (void)makeViewOnParentView:(id)sender;

+ (void)makeViewOnParentView:(id)sender
{        
        ViewController *pointer = (ViewController*)sender;
        //UIWindow *window = pointer.view.window;
        CGRect rect=pointer.view.frame;

        classB *overlayView = [[classB alloc] initWithFrame:CGRectMake(0, 0,rect.size.width, rect.size.height)];
        overlayView.backgroundColor = [[UIColor greenColor] colorWithAlphaComponent:0.5f];
        overlayView.userInteractionEnabled = YES;

        [pointer.view addSubview:overlayView];
} 
```

并在您的 classA 中调用该方法

```
[classB makeViewOnParentView:self]; 
```

希望这对你有用...

# php - 如何制作一个检索链接并用该页面的相关标题名称替换 url 的系统？

> ID：12444652
> 
> 赞同：-2
> 
> 时间：2012-09-16T05:37:44.907
> 
> 标签：php, html, ajax

最近我看到，当我将链接放在我的个人资料中时，它用问题的确切标题替换了它。所以我想知道，他们是怎么做到的？

> ![他们用带有标题的相关链接替换了一个网址](../Images/cc5923e59707d3598a06325d776aa175.png)

我猜他们是通过 ajax 发送链接然后通过 php 创建链接头来做到这一点的`implode ,explode`。这是 Stack Overflow 的正确方式/相同方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T05:54:12.467

假设我像这样将上面的链接粘贴到 textarea 中

```
http://stackoverflow.com/questions/12444652/how-to-make-a-link-system-link-stackoverw 
```

这就是幕后发生的事情。向以下 URL 发出 GET 请求

```
http://api.stackexchange.com/2.0/questions/12444652?pagesize=30&key=6AU78DZ)GcdjNjAszYmTLQ((&filter=!6G7RPxWUNTleV&site=stackoverflow.com&callback=apiCallbacks[%22stackoverflow.com%22]&_=1347774461814 
```

该 GET 的响应是

```
apiCallbacks["stackoverflow.com"]({"items":[{"question_id":12444652,"title":"How to make a link system link stackoverw"}]}); 
```

从中可以检索到标题。希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T05:41:06.040

我认为这是太多信息，无法发表评论，所以我只是将其作为答案。该程序只是简单地检索该页面上标题元素的值。

所以这是基本过程：

1.  该程序执行正则表达式（或其他）搜索字符串中的 url。
2.  程序获取该 url。
3.  程序将url替换为相关的html代码：（'foo'等）

**更新：**这是使用 php 进行第三步的方式：

```
$myURL = 'http://www.google.com';
preg_match('/<title>(.+)<\/title>/',file_get_contents($myURL),$matches);
$title = $matches[1]; 
```

（从[这里](https://stackoverflow.com/questions/4914573/how-can-i-get-the-title-of-an-html-page-using-php)）

# c# - 如何在 C# 中将 IntPtr 转换为 Boolean[]？

> ID：12444654
> 
> 赞同：2
> 
> 时间：2012-09-16T05:38:01.550
> 
> 标签：c#, c, arrays, marshalling, intptr

**背景资料**

我在 C 中有一个函数，它返回一个`void*`.

我开始测试两个项目之间的转换，将`true`或分配`false`给指针，回到 C# 中，我得到了`IntPtr`，我使用了该`IntPtr.ToPointer()`函数，然后将其转换为一个字节，根据我读到的内容，这相当于 c# 中的布尔值.

这对我来说很好。

DLL 导入：

```
[DllImport(Library.ruta,
SetLastError = true,
CallingConvention = CallingConvention.Cdecl)]
public extern static IntPtr test_boolean(int flag); 
```

使用功能：

```
x = Library.test_boolean(1);

z = x.ToPointer();
Console.WriteLine("Prueba");

if (Convert.ToBoolean((byte)z))
    Console.WriteLine("True");
else
    Console.WriteLine("False"); 
```

**问题**
当我尝试做同样的事情但将一个布尔数组分配给指针时，我无法在 C# 中将其取回。

这就是 C 中的函数的样子

```
...
vpointer *chromosome;

chromosome = s_malloc(2*sizeof(boolean *));

if (flag == 1)
{
    chromosome[0] = true;
    chromosome[1] = true;
}
...
Return chromosome; 
```

我在 C# 中尝试做的事情：

(1) 我尝试了相同的“强制转换”，这次是字节数组。这给了我一个空引用异常：

```
if (Convert.ToBoolean(((byte*)z)[1]))
    Console.WriteLine("True");
else
    Console.WriteLine("False"); 
```

（2）因为那没有用，经过一些研究，我尝试了这个`Marshal.Copy`函数，将我的指针复制到一个字节数组。尽管这一次我没有得到任何异常，但我没有得到正确的结果。我的意思是，例如，如果数组的第一个布尔值是假的，我就会得到真。

这是 C# 代码的样子：

```
x = Library.test_boolean(1);

byte [] managedArray = new byte[2];

Marshal.Copy(x, managedArray, 0, 2);

foreach (var qq in managedArray)
{
    Boolean a = Convert.ToBoolean(qq);
    Console.WriteLine(a.ToString());
} 
```

**问题**
所以我的问题是从 C# 中的 IntPtr 转换为布尔数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T09:48:37.703

> ... 将`true`or分配`false`给指针，回到 C# 中，我得到了`IntPtr`，然后我使用了该`IntPtr.ToPointer()`函数，然后将其转换为一个字节 ...</p>

那是错误的，即使它可能奏效了。如果返回类型是`void*`，那么它实际上应该是一个指针，而不是一个布尔值。而且如果你真的想执行这个暴行，那么你不需要带有指针的中间步骤，你可以`IntPtr`直接转换为`byte`.

现在，对于您的实际问题：如果您知道该函数将始终返回两个布尔值的数组，我认为最好将其声明为`bool[]`在 C# 中返回并带有适当的属性（类似于`[return: MarshalAs(UnmanagedType.LPArray, ArraySubType=UnmanagedType.I1, SizeConst=2)]`）。

但是您的 C# 代码也应该可以工作。我认为问题出在您的 C 代码中：您返回的数组被声明为`vpointer*`，根据您的评论，它相当于`void**`. 这意味着在 32 位机器上，C 编译器将此变量视为 4 字节值的数组。如果你想让它把它当作 1 字节值的数组，你需要这样声明它（例如`boolean *chromosome;`）。

# xcode - Xcode 组件安装期间出错

> ID：12444656
> 
> 赞同：61
> 
> 时间：2012-09-16T05:38:26.730
> 
> 标签：xcode, xcode4, installation, xcode4.3

我刚刚安装了一个系统提示我的软件更新，可能会影响 Xcode。现在，当我启动 Xcode 时，我会看到一个对话框，指出 Xcode 必须在继续之前安装移动设备框架。当我尝试执行此操作时，在提供密码后，它失败并显示“发生未知错误。有关详细信息，请参阅安装日志。” 我在 install.log 中没有看到任何可以识别问题的有用信息。我尝试重新安装多次并重新启动无济于事。

我目前正在运行 Xcode 4.3。也许我需要升级到 4.4？有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2019-10-31T22:00:40.803

This problem has once again appeared in Xcode 11.1 and is caused by an invalid certificate that expired some day in October 2019.

You can work around the problem by temporarily changing the system date to before the certificate expiration date.

In the case of Xcode 11, set the system date to Oct 3, 2019, run Xcode, then change the date back after the components have installed.

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-09-18T18:45:21.683

在 Xcode 版本 4.3.1 (4E1019) 中，我怀疑我在今天早上 iTunes 更新后遇到了问题。在网上某处找到以下内容：

*   转到应用程序文件夹
*   右键单击 Xcode
*   点击`Show Package Contents`

然后导航到 `Contents/Resources/Packages`。双击`Install MobileDevice.pkg`。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2019-12-06T15:15:18.550

只需将日期更改为 2019 年 10 月即可：

[![在此处输入图像描述](../Images/0898b1349590b806e268419cf6c5d322.png)](https://i.stack.imgur.com/jnim0.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-27T20:01:34.897

我尝试安装所需的组件：

![](../Images/dbfc56bebc93fb60c132ddfce87427e3.png)

但我有同样的问题：

![](../Images/ce00457c45db170ec2da9b1b60db3a6f.png)

我推荐@Darren 回答（[https://stackoverflow.com/a/58651694/7602110](https://stackoverflow.com/a/58651694/7602110)）但我尝试了另一种方法，即卸载 Xcode 并重新安装它，这不是最好的方法，因为我们都知道要多久Xcode 需要安装，但它也可以工作并且值得分享。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-31T01:14:51.297

即时更改终端日期的解析器，例如：

须藤日期 103106

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-09T19:01:57.637

使用上面 cugino 的答案为我解决了这个问题。就我而言，用于签署 .pkg 文件的证书已过期。这可能是任何人在 2015 年 2 月 14 日之后遇到这种情况的原因

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-07T21:41:44.910

我是iOS开发的新手

我在尝试使用 macOS yosemite 在我的 2009 mac pro 13inch 上安装 XCode 6.4 时遇到了同样的问题。我不知道为什么，就在我根据该线程中的一个答案将系统时间更改回 2019 年 10 月 10 日并单击“重试”按钮后，XCode 终于安装并运行了！

在此之后，我将系统时间改回当前时间（选择自动日期和时间选项），一切对我来说都很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-10T20:47:35.080

在更新到 Big Sur 版本后，我也遇到了同样的情况。@cugino 在这里报告的一个非常相似的解决方案对我有用，如下所示：

*   转到“应用程序”文件夹>右键单击Xco​​de>单击显示包内容>然后导航到内容/资源/包。
*   双击安装**XcodeSystemResources** .pkg。

# php - 用于解析 URL 的正则表达式

> ID：12444657
> 
> 赞同：-2
> 
> 时间：2012-09-16T05:38:36.090
> 
> 标签：php, regex

我正在以[http://site.com/page/var1/var2](http://site.com/page/var1/var2)的形式解析 url，我正在使用以下正则表达式：

```
([^/]+) 
```

现在我明白这需要所有不是 / 但我也希望能够使用其中带有转义斜杠的变量。当我将这些粘贴到浏览器中时，它们最终看起来像这样：[http](http://site.com/page/var1//stillvar1/var2) : //site.com/page/var1//stillvar1/var2 等于 var1/stillvar1 和 var2。我的问题基本上是如何修改这个正则表达式来捕获所有不是 / 除非 / 后跟斜杠的值。

希望我是清楚的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:57:13.007

下面的正则表达式怎么样？

```
((//|[^/])+) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:16:24.410

不清楚您的要求，但据我所知，试试这个（在 robular 中测试）

```
^\w+\:\/{2}(\w+\.)+\w+(\/{1}\w+)+$ 
```

# java - 由于Java中所有对象都是用“new”创建的，这是否意味着它们都是在堆上创建的？

> ID：12444660
> 
> 赞同：6
> 
> 时间：2012-09-16T05:39:01.637
> 
> 标签：java, heap-memory

此查询的目的是比较 Java 和 C++ 的一个方面，这与“new”运算符有关。

现在，我知道在 C++ 中有两种创建对象的方法；有或没有“新”运算符。如果没有该运算符，则不会在堆区域中分配空间，而在存在该运算符时，会在堆区域中分配空间。

爪哇呢？我注意到“new”运算符用于创建每个对象。甚至数组也是使用“new”运算符创建的。这是否意味着在 Java 中对象只有一个存在的地方——即堆区域？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T05:42:54.327

是的，new 运算符总是为堆上的对象分配内存。与 C++ 不同，Java 中的对象不能在堆栈上创建。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T05:41:07.120

本地原始类型和对对象类型的本地*引用*都占用“堆栈”内存，就像它们作为参数传递给方法时一样。

所有对象本身都存在于一个“堆”的等价物中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T09:59:12.880

从应用程序和应用程序程序员²的角度来看，所有 Java 对象（即所有具有引用的事物）都分配在堆¹中。Java 不支持在堆栈上显式分配对象。对象引用可以存储在堆节点（即类或实例字段）和堆栈帧（即局部变量等）中。

事实上，有几种方法可以在**不**涉及使用`new`关键字的 Java 中创建一流的 Java 对象。

*   `{ ... }`数组初始值设定项语法可以在没有关键字的数组声明中使用`new`。

*   字符串文字涉及创建字符串对象（在类加载时）。

*   装箱转换将（通常）创建一个新的包装器对象，而无需显式`new`或方法调用。

*   反射`newInstance`和类似方法创建没有显式`new`.

*   在底层，Java 序列化的实现使用`Unsafe`类中的一种特殊方法来创建对象，而无需执行任何已声明的构造函数。

*   您还可以使用 JNI / JNA api 在本机代码中创建 Java 对象。

（有一个强烈的论点是最后两个“不是 Java”，但无论如何它们都值得一提。字符串文字和自动装箱案例涉及在底层使用`new`的 Java 代码。）

* * *

^(1 - 可以有多个堆，尽管这对应用程序是透明的。)

^(2 - 最新的 Hotspot JVM 具有实验性的“逃逸分析”功能，可确定对象是否从创建它们的上下文中“逃逸”。不会逃逸的对象可以安全地分配到堆栈上。再一次，这种优化对应用程序是透明的。)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-04T12:53:00.400

**在 Java 中，所有对象都在 Heap 上动态分配**。这与 C++ 中的对象可以在堆栈或堆上分配内存不同。在 C++ 中，当我们使用 分配 abject 时`new()`，abject 分配在堆上，否则如果不是全局或静态的，则分配在堆栈上。

在Java中，当我们只声明一个类类型的变量时，只会创建一个引用（不为对象分配内存）。要将内存分配给对象，我们必须使用 new()。所以对象总是在堆上分配内存。

**示例 1：** 给出编译错误。

```
class Test {
    void show() {
        System.out.println("Test::show() called");
    }
}     
public class Main {
    public static void main(String[] args) {
        Test t; 
        t.show(); // Error here because t is not initialed
    } 
```

**示例 2：**`new()`使用使上述程序工作的 分配内存。

```
class Test {
    void show() {
        System.out.println("Test::show() called");
    }
}      
public class Main {
    public static void main(String[] args) {
        Test t = new Test(); //all objects are dynamically allocated
        t.show(); // No error 
    }
} 
```

# c# - 进度条和文件加载

> ID：12444661
> 
> 赞同：6
> 
> 时间：2012-09-16T05:39:27.243
> 
> 标签：c#, file, progress-bar, backgroundworker

我有一个`text file`包含大量数据行的大数据。在我的应用程序中，我打开此文件，通过匹配正则表达式读取每一行并将其显示在 Datagridview 中。生成的总行数约为 2000（*有时甚至更多，非常大*）。

因此，对于所有这些操作，它需要相当多的时间。所以我使用后台工作人员将此代码移动到另一个线程中，一切都很好，除了我想在我失败的进度条中显示加载状态。

我使用`FileInfo`类来获取文件长度，然后将此值赋予`Progressbar.Maximum`. 似乎不是正确的方法，因为包含“3”行的测试文件返回的文件长度为“305”。我不明白我应该以这种方式给出多少步间隔。

代码示例：

```
FileInfo ff = new FileInfo(openFileDialog1.FileName);
int fsize= Convert.ToInt32(ff.Length);
int val=1;
pgbar_load.Invoke(new MethodInvoker(delegate { pgbar_load.Maximum = fsize; })); 
```

并在循环中：

```
++val;
wk.ReportProgress(val); 
```

进而：

```
private void bgwrkr_load_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
   pgbar_load.Value = e.ProgressPercentage;
} 
```

所以我正在寻找两件事：

1.  设置进度条的最大值。
2.  正确设置步长索引。

请建议我前进的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T05:48:01.660

将 Progressbar.Maximum 保持在 100。然后在 int 变量中跟踪您读取的数据。在 UI 线程上运行一个循环（您可以使用计时器来执行此操作），通过检查您的读取字节来设置进度条百分比的值。例如，假设您将读取的字节存储在其中`int totalRead;`并`int totalFileSize`包含文件的大小。

```
myProgressBar.Value = Convert.ToInt32(Math.Ceil(100d * totalRead/totalFileSize)); 
```

You can put this in your timer tick event handler. This will run the progress bar gradually to 100%. When file read is complete, disable the timer.

# c - makefile 循环依赖和覆盖命令

> ID：12444662
> 
> 赞同：1
> 
> 时间：2012-09-16T05:39:38.190
> 
> 标签：c, build, makefile

有一个参考makefile，我正在慢慢编辑和使用它吐出这两个错误

```
Makefile:25: warning: overriding commands for target `build/semanticHash'
Makefile:21: warning: ignoring old commands for target `build/semanticHash'
make: Circular build/semanticHash <- build/semanticHash dependency dropped.
cc -g -ldl  -lgsl -lgslcblas -lzmq  -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  -fPIC   -c -o src/semanticHash/rmb.o src/semanticHash/rmb.c 
```

我是 makefile 语法和规则的新手，所以我谷歌搜索的任何常见错误，但在这种情况下我自己没有运气。

所以问题是，我在哪里导致这些错误，在我当前的 makefile 中是否有任何我应该避免的模式？

```
CFLAGS= -g $(LIBS) -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG $(OPTFLAGS)
LIBS= -ldl  $(OPTLIBS)
PREFIX?=/usr/local
OPTLIBS= -lgsl -lgslcblas -lzmq 

SOURCES=$(wildcard src/**/*.c src/*.c)
OBJECTS=$(patsubst %.c,%.o,$(SOURCES))

TEST_SRC=$(wildcard tests/*_tests.c)
TESTS=$(patsubst %.c,%,$(TEST_SRC))

TARGET=build/semanticHash  # Rename to library !!!!!
SO_TARGET=$(patsubst %.a,%.so,$(TARGET))

# The Target Build
all: $(TARGET) tests

$(TARGET): CFLAGS += -fPIC
$(TARGET): build $(OBJECTS)
    ar rcs $@ $(OBJECTS)
    ranlib $@

$(SO_TARGET): $(TARGET) $(OBJECTS) 
    $(CC) -shared -o $@ $(OBJECTS) 

build:
    @mkdir -p build
    @mkdir -p bin

# The Unit Tests
.PHONY: tests
tests: CFLAGS += $(TARGET)
tests: $(TESTS)
    sh ./tests/runtests.sh

valgrind:
    VALGRIND="valgrind --log-file=/tmp/valgrind-%p.log" $(MAKE)

# The Cleaner
clean:
    rm -rf build $(OBJECTS) $(TESTS)
    rm -f tests/tests.log 
    find . -name "*.gc*" -exec rm {} \;
    rm -rf `find . -name "*.dSYM" -print`

# The Install
install: all
    install -d $(DESTDIR)/$(PREFIX)/lib/
    install $(TARGET) $(DESTDIR)/$(PREFIX)/lib/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:55:48.320

您设置`SO_TARGET`为相同`TARGET`：

```
TARGET=build/semanticHash  # Rename to library !!!!!
SO_TARGET=$(patsubst %.a,%.so,$(TARGET)) 
```

正如所见`TARGET`不以 结尾，所以*没有*`.a`任何东西可以代替制作`SO_TARGET`相同的东西。

后来你有

```
$(SO_TARGET): $(TARGET) $(OBJECTS) 
```

由于两者`SO_TARGET`和`TARGET`相同，因此您具有循环依赖关系。

其他两个警告也是因为这个问题，因为您对同一目标有冲突的命令。

在不相关的说明中，您不应该像您那样混合编译器和链接器标志。编译器标志用于编译，链接器标志用于链接。您还应该更改链接器选项的顺序，并将要链接的库放在目标文件*之后。*这是因为 GNU 链接器不会加载任何依赖于它们的库，并且在加载目标文件之前不会加载依赖项。

# hadoop - Hadoop MRUnit 抛出异常

> ID：12444663
> 
> 赞同：7
> 
> 时间：2012-09-16T05:40:04.500
> 
> 标签：hadoop, mapreduce

我正在尝试为我的 hadoop MR 工作编写一些单元测试并得到以下异常。这是我第一次使用 MRUnit，所以我不太确定这里发生了什么。

```
java.lang.IncompatibleClassChangeError: Found class org.apache.hadoop.mapreduce.TaskInputOutputContext, but interface was expected
    at org.apache.hadoop.mrunit.mapreduce.mock.MockContextWrapper.createCommon(MockContextWrapper.java:53)
    at org.apache.hadoop.mrunit.mapreduce.mock.MockMapContextWrapper.create(MockMapContextWrapper.java:70)
    at org.apache.hadoop.mrunit.mapreduce.mock.MockMapContextWrapper.<init>(MockMapContextWrapper.java:62)
    at org.apache.hadoop.mrunit.mapreduce.MapDriver.run(MapDriver.java:217)
    at org.apache.hadoop.mrunit.MapDriverBase.runTest(MapDriverBase.java:150)
    at org.apache.hadoop.mrunit.TestDriver.runTest(TestDriver.java:137) 
```

我的实际代码看起来很简单

```
private MapDriver<Text, Text, Text, Text> mapDriver = MapDriver.newMapDriver(mapper);
private ReduceDriver<Text, Text, Text, Text> reduceDriver = ReduceDriver.newReduceDriver(reducer);
private MapReduceDriver<Text, Text, Text, Text, Text, Text> driver = MapReduceDriver.newMapReduceDriver(mapper, reducer);

@Test
public void testMapper() {
    mapDriver.withInput(new Text("1"), new Text("Line 1"));
    mapDriver.withOutput(new Text("1"), new Text("Line 1"));
    mapDriver.runTest();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T21:59:07.460

正如您在[这里](https://repository.apache.org/index.html#nexus-search;gav~org.apache.mrunit~~~~)看到的，mrunit 0.9 中有两个分类器。在 Java 7 环境下使用 mrunit 也存在一些问题。

也许，您正在使用 hadoop 1.0.x 进行开发，并且在 pom.xml 文件中仅添加了两个分类器之一。解决方案很简单：**只需添加另一个，如下所述。**就这样。

```
<dependencies>
    <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>1.0.3</version>
    </dependency>
    <dependency>
        <groupId>org.apache.mrunit</groupId>
        <artifactId>mrunit</artifactId>
        <version>0.9.0-incubating</version>
        <classifier>hadoop1</classifier>
    </dependency>
    <dependency>
        <groupId>org.apache.mrunit</groupId>
        <artifactId>mrunit</artifactId>
        <version>0.9.0-incubating</version>
        <classifier>hadoop2</classifier>
    </dependency>
</dependencies> 
```

我认为这个错误会在下一个版本中解决，但我不能相信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:21:57.130

如果您使用的 MRUnit 版本是针对与您正在测试的代码不同的 Hadoop 版本构建的，则往往会发生此错误。在这种特殊情况下，我相信 TaskInputOutputContext 在 0.21 中已从抽象类更改为接口。

因此，您可能使用的是 0.21，而您使用的 MRUnit 版本是针对 0.20 构建的。我只会努力整理好版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T09:17:48.077

MRUnit 有两个用于 Hadoop 1.x 和 Hadoop 2.x 的发布包。您应该确保 mrunit 版本等于 hadoop 版本。

# iis-7 - SignalR 在生产服务器上不起作用

> ID：12444664
> 
> 赞同：2
> 
> 时间：2012-09-16T05:40:26.090
> 
> 标签：iis-7, signalr

我正在尝试使用一个简单的 SignalR 示例，出于以下原因，我得到了 404 代码 -

```
<script src="<%= ResolveUrl("~/signalr/hubs") %>" type="text/javascript"></script> 
```

我检查了 SignalR 文档并根据那里的建议更改了我的 web.config 我仍然得到了 404 状态代码。

我的代码如下 -

网络配置：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </assemblies>
    </compilation>
    <httpRuntime/>
  </system.web>
  <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <modules runAllManagedModulesForAllRequests="true">
        </modules>
    </system.webServer>
</configuration> 
```

默认.aspx：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.signalR-0.5.3.min.js" type="text/javascript"></script>
    <script src="<%= ResolveUrl("~/signalr/hubs") %>" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {

            //var connection = new Connection( "127.0.0.1");

            // Proxy created on the fly
            var chat = $.connection.chatt;

            // Declare a function on the chat hub so the server can invoke it
            chat.addMessage = function (message) {
                $('#messages').append('<li>' + message + '</li>');
            };

            $("#broadcast").click(function () {
                // Call the chat method on the server
                chat.send($('#msg').val());
            });

            // Start the connection
            $.connection.hub.start();
        });
    </script>
</head>

<input type="text" id="msg" />
<input type="button" id="broadcast" value="broadcast" />

<ul id="messages">
</ul>
</html> 
```

请协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:25:11.140

我遇到了同样的问题，解决方案是将其放入您的 Global.asax 文件中：

```
protected void Application_Start(object sender, EventArgs e)
{
    RouteTable.Routes.MapHubs();
} 
```

不幸的是，这在任何地方都没有记录，即使它是 SignalR 配置的重要组成部分......

# java - Java在范围内设置迭代

> ID：12444673
> 
> 赞同：0
> 
> 时间：2012-09-16T05:42:09.757
> 
> 标签：java, set

我想通过提供一些范围来迭代 java 集。就像我可以为列表做的一样..

```
//for list
int startRange=3;
int endRange = 5; 
List list = myList();
for (int i=startRange;i<endRange;i++){
    System.out.println(list.get(i));
} 
```

现在我想在 startRange 和 endRange 中迭代下面的 java 集合

```
Set<String> set = new java.util.HashSet<String>(list); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T05:52:45.217

```
int count =0, min= 3 , max = 5;
Set<String> s = new HashSet<String>();

Iterator<String> itr  = s.iterator();

while (itr.hasNext()) {
    if ( count > min && count < max ) {
        //Do something
    }
    count++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T06:01:11.127

您可以使用[`LinkedHashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)并维护订单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T06:00:13.560

集合未排序使用[类 LinkedHashSet](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T05:57:00.893

请参阅下面[的评论](https://stackoverflow.com/questions/12444673/java-set-iteration-in-range#comment16733378_12444673)。

> @alfasin 是正确的；`List`包含对其元素的总排序，但`HashSet`没有这样的东西......您应该`List.listIterator`在原始代码中使用。

话虽如此，对于其他类型的`Set`s 也有类似的东西，它们*确实*强加了一个总顺序 - [`SortedSet`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)s。存在一个类似的[`subSet`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html#subSet(E,%20E)), 以及[`headSet`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html#headSet(E))和[`tailSet`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html#tailSet(E))具有相似的功能。这些也[`NavigableSet`](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableSet.html)与其他方法一起存在，如[`ceiling`](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableSet.html#ceiling(E)),[`floor`](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableSet.html#floor(E))等。

请注意，这里的订单不太相似。`List`order 本质上是任意的，无论用户想要什么，而`SortedSet`s order 使用比较排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T10:32:28.663

```
//You can change the Set to Array and then iterate over a range.

Set<Integer> set = new TreeSet<Integer>();
for (int i = 0; i <= 100; i++) {
         set.add(i);
    }
Object[] array = set.toArray();

for (Integer i = 0; i < 100; i++) {
        System.out.print(array[i] + " ,");
    } 
```

# c - 为什么此消息不仅在写入文件时显示（使用 poll C Linux 函数）？

> ID：12444679
> 
> 赞同：5
> 
> 时间：2012-09-16T05:43:45.040
> 
> 标签：c, linux, polling

我正在阅读 C 编程中的 poll 并构建了[poll(2) 手册页](https://linux.die.net/man/2/poll)上给出的应用程序。

这是示例：

```
#include<stdio.h>
#include <stropts.h>
#include <poll.h>
#include <fcntl.h>

int main() {

    struct pollfd fds[2];
    int timeout_msecs = -1;
    int ret;
    int i;

    /* Open STREAMS device. */
    fds[0].fd = open("/home/jeshwanth/mywork/poll/dev0", O_RDONLY);
    fds[1].fd = open("/home/jeshwanth/mywork/poll/dev1", O_RDONLY);
    fds[0].events = POLLOUT | POLLWRBAND;
    fds[1].events = POLLOUT | POLLWRBAND;

    while (1) {
        ret = poll(fds, 2, timeout_msecs);

        if (ret > 0) {
            /* An event on one of the fds has occurred. */
            for (i = 0; i < 2; i++) {
                if (fds[i].revents != 0) {
                    /* Priority data may be written on device number i. */
                    printf(
                            "Priority Data may be written on device number %d POLLWRBAND\n",
                            i);

                }
                if (fds[i].revents = !0) {
                    /* Data may be written on device number i. */
                    printf("Data may be written on device number %d POLLOUT\n",
                            i);
                }
                if (fds[i].revents = !0) {
                    /* A hangup has occurred on device number i. */
                    printf("A hangup has occurred on device number %d\n", i);

                }
            }
        }
    }
    return 0;
} 
```

注意：dev0 和 dev1 是普通文件。当我运行程序时，如果 dev0 和 dev1 中没有发生任何事件，则会显示该消息。但我期待当一些写入文件发生时，它才会显示消息。我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:46:44.207

轮询它是否准备好输出并不意味着您会在某些输出发生时收到通知：这意味着您会在有可用的输出缓冲区空间时收到通知以便您可以输出（但您仍然应该检查输出函数的返回值. 缓冲区状态可能在轮询和输出之间发生了变化；始终检查返回值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-23T06:46:18.340

**最小 FIFO 命名管道示例**

您将看不到常规文件的任何有趣内容，因为它们总是`POLLIN`立即给出：[select() 如何等待常规文件描述符（非套接字）？](https://stackoverflow.com/questions/11901884/how-can-select-wait-on-regular-file-descriptors-non-sockets)

最简单的方法`poll`是使用命名管道，如下所示。这应该让您为他们的主要应用做好准备：套接字和设备文件。

来源如下。用法：

```
sudo mknod poll0.tmp p
sudo mknod poll1.tmp p
sudo chmod 666 poll*.tmp
./poll.out 
```

在另一个外壳上：

```
printf a > poll0.tmp
printf b > poll1.tmp 
```

输出：

```
loop
POLLIN i=0 n=1 buf=a
loop
POLLHUP i=0
loop
POLLIN i=1 n=1 buf=b
POLLHUP i=1
loop 
```

所以请注意如何`poll`等待读取而不循环。

冷却器示例：

```
(while true; do date; sleep 1; done) > poll0.tmp &
(while true; do date; sleep 2; done) > poll1.tmp & 
```

`0`每隔一秒和`1`每两秒写入一次，这显示了如何`poll()`同时处理两个输入，而不会相互拖延。

来源：

```
#define _XOPEN_SOURCE 700
#include <fcntl.h> /* creat, O_CREAT */
#include <poll.h> /* poll */
#include <stdio.h> /* printf, puts, snprintf */
#include <stdlib.h> /* EXIT_FAILURE, EXIT_SUCCESS */
#include <unistd.h> /* read */

int main(void) {
    enum { N = 2 };
    char buf[1024], path[1024];
    int fd, i, n;
    short revents;
    struct pollfd pfds[N];

    for (i = 0; i < N; ++i) {
        snprintf(path, sizeof(path), "poll%d.tmp", i);
        /* O_NONBLOCK is required or else the open blocks
         * until the other side of the pipe opens. */
        fd = open(path, O_RDONLY | O_NONBLOCK);
        if (fd == -1) {
            perror("open");
            exit(EXIT_FAILURE);
        }
        pfds[i].fd = fd;
        /* Only events in this mask will be listened to.
         * However, there are also some events that are unmaskable,
         * notably POLLHUP when pipe closes! */
        pfds[i].events = POLLIN;
    }
    while (1) {
        puts("loop");
        i = poll(pfds, N, -1);
        if (i == -1) {
            perror("poll");
            exit(EXIT_FAILURE);
        }
        for (i = 0; i < N; ++i) {
            revents = pfds[i].revents;
            if (revents & POLLIN) {
                n = read(pfds[i].fd, buf, sizeof(buf));
                printf("POLLIN i=%d n=%d buf=%.*s\n", i, n, n, buf);
            }
            if (revents & POLLHUP) {
                printf("POLLHUP i=%d\n", i);

                /* This happens when the other side closed.
                 * This event is only cleared when we close the reader. */

                /* poll won't set POLLHUP anymore once all fds are closed.
                 * Any futher polls on this will give the POLLNVAL event instead. */
                close(pfds[i].fd);

                /* negative fds are ignored. So if we negate an FD,
                 * we can both turn if off for a while, and turn it on
                 * later on by re-nagating it. */
                pfds[i].fd *= -1;
            }
        }
    }
} 
```

编译：

```
gcc -o poll.out -std=c99 poll.c 
```

在 Ubuntu 14.04 中测试。

[GitHub 上游](https://github.com/cirosantilli/cpp-cheat/blob/3f864a41c8fae8ccdb75328dba2e17a6974396f1/posix/interactive/poll.c).

这些行：

```
close(pfds[i].fd);
pfds[i].fd *= -1; 
```

是必需的，否则你会`POLLHUP`永远得到，另请参阅：[如何使用 poll C 函数来观察 Linux 中的命名管道？](https://stackoverflow.com/questions/5857461/how-to-use-the-poll-c-function-to-watch-named-pipes-in-linux)

为了更有趣，创建一个实现`poll`fops 的 Linux 内核模块：[如何在内核模块代码中添加轮询功能？](https://stackoverflow.com/questions/30035776/how-to-add-poll-function-to-the-kernel-module-code/44645336#44645336)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T06:16:56.897

我会给你一个关于如何纠正它的提示。`revents`被解释为几个位标志。

```
/* check for priority write readiness */
if (fds[i].revents & POLLWRBAND) {
  printf("Priority Data may be written on device number %d POLLWRBAND\n", i);
}

/* check for write readiness */
if (fds[i].revents & POLLOUT) {
  printf("Data may be written on device number %d POLLOUT\n", i);
}

/* check for hang-up */
if (fds[i].revents & POLLHUP) {
  printf("A hangup has occurred on device number %d\n", i);
} 
```

# xml - 为什么 Eclipse 项目的源目录中的 xml 文件没有复制到 target/classes 目录？

> ID：12444683
> 
> 赞同：4
> 
> 时间：2012-09-16T05:44:24.090
> 
> 标签：xml, eclipse, maven, buildpath, eclipse-project-file

此问题与[MyBatis 3.0.5 和映射器加载问题](https://stackoverflow.com/questions/7557111/mybatis-3-0-5-and-mappers-loading-problem)以及[如何抑制 Maven “无法找到资源”消息不同？](https://stackoverflow.com/questions/2878309/how-to-suppress-maven-unable-to-find-resource-messages)

我在 org.org.wpse.db.config.db.config 包中有 xml 文件，但是为什么即使在我运行 mvn compile 之后我也无法在 target/classes/org/wpse/db/config/ 目录中找到这些 xml 文件。

当我使用 mybatis 时，这个错误会导致以下失败：

```
Could not find resource 
```

导致此错误的问题是 .xml 文件未复制到构建目录，即使我使用 mvn compile 明确

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T11:57:04.937

Maven 默认在目录中查找资源文件，即*.xml、*.properties 等`src/main/resources`。建议把你的资源文件放在这里。

但是，没有什么能阻止您将资源文件放在其他地方，例如，`src/main/java/org/wpse/db/config/`由于有些人喜欢将资源文件与类文件一起放在特殊包下，您只需要在 pom.xml 中进行更多配置：

```
<build>
  <resources>
    <resource>
      <!-- This include everything else under src/main/java directory -->
      <directory>${basedir}/src/main/java</directory>
      <excludes>
        <exclude>**/*.java</exclude>
      </excludes>
    </resource>
  </resources>

  ... ...
</build> 
```

* * *

**相关问题：** [如何自定义 maven 以生成我想要的 .classpath？](https://stackoverflow.com/questions/12444772/how-to-customize-maven-to-generate-the-classpath-that-i-want)

默认情况下，运行时`mvn eclipse:eclipse`会生成以下 .classpath 文件：

```
<classpath>
  <classpathentry kind="src" path="src/main/java" including="**/*.java"/>
  ... ...
</classpath>
... ... 
```

导入 Eclipse 时，它​​会为您提供以下类路径（您不想要的）：

![在此处输入图像描述](../Images/f50b851ae358cf6aee4c8386813047da.png)

使用上面的 pom 配置，当运行 'mvn eclipse:eclipse' 时，它会生成以下 .classpath 文件：

```
<classpath>
  <classpathentry kind="src" path="src/main/java"/>
  ... ...
</classpath>
... ... 
```

导入 Eclipse 时，它​​会为您提供以下类路径（您想要的）：

![在此处输入图像描述](../Images/38271e132a20c3b0aa5113190ff40f13.png)

# objective-c - 如何在 CALayer 上添加 UIImageView？

> ID：12444685
> 
> 赞同：0
> 
> 时间：2012-09-16T05:44:51.177
> 
> 标签：objective-c, animation, uiimageview, calayer, uitouch

需要帮忙。我被这个问题困扰了很多天......我正在做一个触摸杀鸟游戏。当鸟被触摸时，它会随着一系列图像而死去，使其血液飞溅..鸟是静止的，有时它会飞..我可以使用以下代码轻松完成静态部分：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
   if ([touches count]==1)
   {    
    location = [mytouch locationInView:self];
    UIView *killView = [self hitTest:location withEvent:nil];

    if ([killView isKindOfClass:[UIImageView class]]) {
        birdKilled = YES;
        [self addSubview:[self bloodSplash:killView]];}}}

-(UIImageView *)bloodSplash:(UIView*)killedView {
    UIImageView *blood = [[UIImageView alloc] 
          initWithFrame:CGRectMake(killedView.center.x-100.0/2.0,    killedView.center.y-100.0/2.0, 100, 100)];
    [killedView setHidden:YES];
    blood.image = [bloodExplodes objectAtIndex:2];
    [blood setAnimationImages:bloodExplodes];
    [blood setAnimationDuration:0.4];
    [blood setAnimationRepeatCount:1];
    [blood startAnimating];            
    [self performSelector:@selector(cleanBlood:) withObject:blood afterDelay:.8];
    return [blood autorelease];} 
```

但是对于飞行部分，我真的被卡住了！因为我在为飞鸟制作动画时了解到这一点。我需要在 hitTest 中检测它的表示层。我可以使用“UIViewAnimationOptionAllowUserInteraction”成功地做到这一点。但问题是我无法弄清楚如何将bloodSplash函数添加到接触点，因为它将UIImageView返回给CALayer ..这是我的试验......

```
-(void)touchesBegan:(NSSet *)touches withEvent: (UIEvent *)event{

    if ([flyingBird.layer.presentationLayer hitTest:location]) {
     CALayer* touchedLayer = 
       [flyingBird.layer.presentationLayer hitTest:location];
    //No Idea what to do next..
  }} 
```

因为我真的不太了解图层......谢谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:08:08.663

为了将图像视图添加到您的飞鸟视图中，您需要找到正确的视图。UIView 由 CALayer 支持，并且该层将 UIView 作为其委托。当您制作动画时，您需要在表示层上进行 hitTest，然后返回模型层，因为那是与您相关的层。从那里您可以通过查询图层的委托找到相应的 UIView。所以看起来像这样：

```
CALayer *hitLayer = [[flyingBird.layer.presentationLayer hitTest:location] modelLayer];
UIView *hitView = [hitLayer delegate]; 
```

这应该是您可以添加动画 UIImageView 的视图。

# python - 有什么方法可以使用“nmap”端口扫描器在我的 Django 应用程序上生成和输出结果

> ID：12444689
> 
> 赞同：1
> 
> 时间：2012-09-16T05:46:27.433
> 
> 标签：python, django, linux, nmap

我正在尝试在 Django 中创建一些网络应用程序，我想问的是：是否可以这样做：客户端类型 IP 地址，而不是服务器使用“nmap”扫描它，然后将结果传递给Django 应用程序，而不是我用它做很多事情。

只是想知道是否有可能做到，或者听起来很荒谬？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:43:05.563

我的建议是这样的：

```
pout,perr = subprocess.Popen(['nmap', '192.168.1.2', '-oX', '-'], shell=False, stdout=subprocess.PIPE, stderr=subprocess.PIPE)

xml_results = pout.read() 
```

如果你用谷歌搜索一下，还有一些 nmapXML -> Python dict 脚本也在浮动。

这种方法存在一些问题 - 让我们称之为幼稚的方法，因为它不能很好地扩展，或者处理诸如机器不 ping 和 nmap 回退到慢扫描之类的事情（这可能需要几个小时，具体取决于目标网络）

考虑制作一个异步运行 nmap 的服务器，并可以将状态返回给用户 - 以及取消正在进行的扫描的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T13:20:30.450

Nmap 在[https://pypi.python.org/pypi/python-nmap](https://pypi.python.org/pypi/python-nmap)有一个名为 python-nmap 的 python 库（或包装器？） 。

您可以使用安装它

`pip install python-nmap`

你可以使用一个库，就像`celery`在 Django 中使用它一样

# c# - Ajax自动完成不适用于搜索框asp.net c#

> ID：12444691
> 
> 赞同：0
> 
> 时间：2012-09-16T05:47:39.833
> 
> 标签：c#, asp.net, webforms, asp.net-ajax

我正在尝试创建一个类似谷歌的搜索框。我没有得到任何结果。我只是想暂时使自动完成功能搜索事情尚未完成。以下是我尝试过的。
<====== Directory.aspx 文件 =======>

```
<ajaxToolkit:ToolkitScriptManager  ID="ScriptManager1" runat="server">
</ajaxToolkit:ToolkitScriptManager>

       <div class="search-box">
           <span class="strong">Search Members: </span> 
<ajaxToolkit:AutoCompleteExtender ID="autoComplete1" runat="server"
  EnableCaching="true"
  BehaviorID="AutoCompleteEx"
  MinimumPrefixLength="2"
  TargetControlID="myTextBox"
  ServicePath="AutoComplete.asmx"
  ServiceMethod="GetCompletionList" 
  CompletionInterval="100"  
  CompletionSetCount="20"
  CompletionListCssClass="autocomplete_completionListElement"
  CompletionListItemCssClass="autocomplete_listItem"
  CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem"
  DelimiterCharacters=";, :"
  ShowOnlyCurrentWordInCompletionListItem="true">
  <Animations>
  <OnShow>
  <Sequence>
  <%-- Make the completion list transparent and then show it --%>
  <OpacityAction Opacity="0" />
  <HideAction Visible="true" />

  <%--Cache the original size of the completion list the first time
    the animation is played and then set it to zero --%>
  <ScriptAction Script="// Cache the size and setup the initial size
                                var behavior = $find('AutoCompleteEx');
                                if (!behavior._height) {
                                    var target = behavior.get_completionList();
                                    behavior._height = target.offsetHeight - 2;
                                    target.style.height = '0px';
                                }" />
  <%-- Expand from 0px to the appropriate size while fading in --%>
  <Parallel Duration=".4">
  <FadeIn />
  <Length PropertyKey="height" StartValue="0" 
    EndValueScript="$find('AutoCompleteEx')._height" />
  </Parallel>
  </Sequence>
  </OnShow>
  <OnHide>
  <%-- Collapse down to 0px and fade out --%>
  <Parallel Duration=".4">
  <FadeOut />
  <Length PropertyKey="height" StartValueScript=
    "$find('AutoCompleteEx')._height" EndValue="0" />
  </Parallel>
  </OnHide>
  </Animations>
  </ajaxToolkit:AutoCompleteExtender>
<asp:TextBox ID="myTextBox" AutoCompleteType="FirstName" placeholder="Type First Name Here" runat="server"></asp:TextBox>
</div> 
```

和 AutoComplete.asmx.cs 文件

```
// (c) Copyright Microsoft Corporation.
// This source is subject to the Microsoft Public License.
// See http://www.microsoft.com/opensource/licenses.mspx#Ms-PL.
// All other rights reserved.
using System;
using System.Collections;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Xml.Linq;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using MySql.Data.MySqlClient;

///<summary>
/// Summary description for AutoComplete
///</summary>

[WebService(Namespace = "localhost")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, 
// uncomment the following line.
[System.Web.Script.Services.ScriptService]
public class AutoComplete : System.Web.Services.WebService
{

    public AutoComplete()
    {

        //Uncomment the following line if using designed components
        //InitializeComponent();
    }

    [WebMethod]
    public string[] GetCompletionList(string prefixText, int count)
    {
        //ADO.Net
        MySqlConnection cn = new MySqlConnection("Database=bvshree;Data Source=localhost;User Id=root;Password=axcva4@@@3");

        DataSet ds = new DataSet();
        DataTable dt = new DataTable();
        MySqlCommand cmd = new MySqlCommand();
        cmd.CommandType = CommandType.Text;
        //Compare String From Textbox(prefixText) AND String From 
        //Column in DataBase(CompanyName)
        //If String from DataBase is equal to String from TextBox(prefixText) 
        //then add it to return ItemList
        //-----I defined a parameter instead of passing value directly to 
        //prevent SQL injection--------//
        cmd.CommandText = "select * from family_header Where Self_Name like @myParameter";
        cmd.Parameters.AddWithValue("@myParameter", "%" + prefixText + "%");

            cn.Open();
            cmd.ExecuteNonQuery();
            MySqlDataAdapter da = new MySqlDataAdapter(cmd);
            da.Fill(ds);

            cn.Close();

        dt = ds.Tables[0];

        //Then return List of string(txtItems) as result
        List<string> txtItems = new List<string>();
        String dbValues;

        foreach (DataRow row in dt.Rows)
        {
            //String From DataBase(dbValues)
            dbValues = row["Self_Name"].ToString();
            dbValues = dbValues.ToLower();
            txtItems.Add(dbValues);
        }

        return txtItems.ToArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T22:16:17.883

很久之后我再次看到这个问题，因为没有人发布任何回复，我认为我应该自己回复它。问题在于代码的样式，正在生成的列表的不透明度设置为零并且没有按预期改变。所以我只是从中删除动画以获得解决方案。:)

# javascript - 在Javascript中将对象中的键作为函数参数传递

> ID：12444693
> 
> 赞同：0
> 
> 时间：2012-09-16T05:48:02.610
> 
> 标签：javascript, json, object

我打算用 Javascript 编写一个函数。它将通过传递一个密钥来处理。

```
// generate by coffeescript

var get_key, obj;

obj = [
  { name: 'Ape', sales: 100, location: 'US' },
  { name: 'Bob', sales: 200, location: 'UK' },
  { name: 'Cat', sales: 120, location: 'Hell' }
];

// What I want to do: (of cause it is wrong)

get_key = function(obj, key) {
  var item, value_arr, _i, _len;
  value_arr = [];
  for (_i = 0, _len = obj.length; _i < _len; _i++) {
    item = obj[_i];
    value_arr.push(obj.key);
  }
  return value_arr; // return array containing all values of key in object
};

alert(get_key(obj, 'sales')); // expect return 100,200,120 
```

问题是：如何传递“密钥”？

ps 我什至不知道在这件事上搜索任何关键字（英语不好）。所以我在 StackOverflow 和 Google 中找不到任何答案。请给出一些提示以正确提问。

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:02:47.617

```
var get_key, obj;

obj = [
  { name: 'Ape', sales: 100, location: 'US' },
  { name: 'Bob', sales: 200, location: 'UK' },
  { name: 'Cat', sales: 120, location: 'Hell' }
];

// What I want to do: (of cause it is wrong)

get_key = function(obj, key) {
  var item, value_arr, _i, _len;
  value_arr = [];
  for (_i = 0, _len = obj.length; _i < _len; _i++) {
    item = obj[_i];
    if (key in item){
        value_arr.push(item[key]);
    }
  }
  return value_arr; // return array containing all values of key in object
};

alert(get_key(obj, 'sales')); // expect return 100,200,120 
```

`item`是具有您要查找的键的对象，因此更改`value_arr.push(obj.key);`为`value_arr.push(item[key]);`，您必须使用`[]`符号通过变量访问对象属性，还添加了检查以查看该项目是否具有属性`key`，然后再添加到数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T05:51:32.070

```
function get_key(arr, key) {
    return arr.map(function(el) {
        return el[key];
    });
} 
```

如果需要支持旧浏览器，则需要在 Array 中添加 map 功能（[查看此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T06:09:08.253

```
var obj = [
    {
    name: 'Ape',
    sales: 100,
    location: 'US'},
{
    name: 'Bob',
    sales: 200,
    location: 'UK'},
{
    name: 'Cat',
    sales: 120,
    location: 'Hell'}
];

get_key = function(obj, key) {
    var result = [];
    for (var i = 0; i < obj.length; i++) {
        /*
         *  Here, obj[i] gives the object e.g: 
         * { name: 'Ape', sales: 100, location: 'US' }...
         * 
         * and obj[i][key] give the value of corresponding key e.g:
         * 100, 200... (suppose for: sales) 
         */

        result.push(obj[i][key]);
    }
    return result;
};

alert(get_key(obj, 'sales').join(',')); ​ 
```

***[工作样本](http://jsfiddle.net/bUQmz/3/)***

* * *

## 在您的代码中

只是换行

```
item = obj[_i];
value_arr.push(obj.key);// this line 
```

到

```
 value_arr.push(item[key]); 
```

# android-webview - Kindle Fire 无法将我的网页放入特定大小的 Web 视图中

> ID：12444697
> 
> 赞同：1
> 
> 时间：2012-09-16T05:49:31.053
> 
> 标签：android-webview, kindle-fire

这对我来说很莫名其妙。请帮忙，我想不通...

在我的示例 html 文件中，我将元标记设置为

```
<meta name="viewport" content="target-densitydpi=device-dpi, user-scalable=no"> 
```

使网页适合我的自定义尺寸的网页视图，例如 800x600。在 Android 中，我必须指定“target-densitydpi=device-dpi”，它做得很好。我使用 nexus 7 平板电脑测试了我的自定义网页，该网页正确地适合我的网页视图。

相同的代码在 Kindle Fire 中不起作用。只显示了我网页的一部分，即使我设置了 'initial-scale=1.0' 也无济于事。

我以编程方式尝试了各种设置，但也无济于事。

```
webview.getSettings().setBuiltInZoomControls(true);
webview.getSettings().setSupportZoom(true); 
webview.getSettings().setLoadWithOverviewMode(true);
webview.setInitialScale(1);
webview.getSettings().setUseWideViewPort(true); 
```

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:35:16.993

我找到了解决我报告的问题的方法。基本上，我最终采用了基于 JavaScript 的解决方案，我`zoomscale`根据视口尺寸动态计算。在我的例子中，原始网页内容被创作为 1024x768，我需要一个 800x600 的视口来显示缩放后的内容。

`load()`加载文档时调用该函数。

```
<body style="position: relative; background: url('opt_background.jpg'); background-repeat: no-repeat; background-size: 100% auto;" onload="load()">

function load()
{
// This function gets the current view port width and height, computes an adjusted zoom scale and sets it.
var viewportWidth  = document.documentElement.clientWidth
var viewportHeight = document.documentElement.clientHeight  
var zoomScale = Math.ceil(viewportWidth * 100 / 1024);
document.body.style.zoom= zoomScale + "%";
} 
```

那成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:01:13.857

因为 Kindle-Fire 是 hdpi 设备，您需要使用 target-density=high-dpi 或明确设置 533（Fire HD 和 Nexus7 不太匹配）

[http://developer.android.com/guide/webapps/targeting.html#ViewportDensity](http://developer.android.com/guide/webapps/targeting.html#ViewportDensity)

# ruby-on-rails - 对rails中的attr_accessor和attr_accessible感到困惑

> ID：12444706
> 
> 赞同：0
> 
> 时间：2012-09-16T05:52:01.863
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

这是一个简单的注册应用程序

架构.rb

```
create_table "users", :force => true do |t|
t.string   "email"
t.string   "password_hash"
t.string   "password_salt"
t.datetime "created_at",    :null => false
t.datetime "updated_at",    :null => false 
```

用户.rb

```
attr_accessible :email, :password, :password_confirmation
attr_accessor :password
before_save :encrypt_password
validates_confirmation_of :password
validates_presence_of :password, :on => :create
validates_presence_of :email
validates_uniqueness_of :email
.
.
. 
```

**为什么在 attr_accessible 和 attr_accessor 中都使用密码？**

当我在 Rails 控制台中删除 attr_accessor :password 时，执行时出现错误：

```
user = User.new
user.password # => no method error 
```

但是当我执行这个时：

```
user = User.new
user.email # => nil 
```

**这意味着 user.email 没有在 attr_accessor 中添加它就可以工作，为什么？！**

这也有效：

```
user = User.new
user.password_confirmation # => nil 
```

但是当我删除时：

```
validates_confirmation_of :password 
```

**它不会工作，为什么？？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T06:09:51.383

**attr_accessor**和**attr_accessible**尽管拼写几乎相同，但它们是完全不同的方法。

**attr_accessor**，一个原生 Ruby 方法，它为类的实例定义了一个 getter 和一个 setter 方法：

```
class User
  attr_accessor :password
end

u = User.new
u.password = "secret"
u.password # => "secret" 
```

**attr_accessible**是 Rails 带来的一种方法，它旨在将模型的*现有*属性“列入白名单”。**attr_accessible**中枚举的属性可以稍后通过模型属性的批量分配来更改（而其他属性将被列入黑名单且不可更改）：

```
class Account < ActiveRecord::Base
  # First, you define 2 attributes: "password" and "created_at"
  attr_accessor :password
  attr_accessor :created_at

  # Now you say that you want "password" attribute
  # to be changeable via mass-assignment, while making
  # "created_at" to be non-changeable via mass-assignment
  attr_accessible :password
end

a = Account.new

# Perform mass-assignment (which is usually done when you update
# your model using the attributes submitted via a web form)
a.update_attributes(:password => "secret", :created_at => Time.now)

a.password # => "secret"
# "password" is changed

a.created_at # => nil
# "created_at" remains not changed 
```

您使用**attr_accessible**来防止“外部人员”干预您的模型的某些属性（例如，您不希望通过简单的表单提交来更改您的“Account.superadmin”属性，这将是一个糟糕的安全问题）。

请注意，您可以单独更改属性，而不管它们的“白名单/黑名单”状态如何：

```
a.created_at = Time.now

a.created_at # => 2012-09-16 10:03:14 
```

# jquery-ui - jquery ui滑块页面向上/向下增量值

> ID：12444711
> 
> 赞同：1
> 
> 时间：2012-09-16T05:53:26.370
> 
> 标签：jquery-ui, jquery-ui-slider

有没有办法设置当有人按下向上或向下翻页时滑块移动多少？目前，我的滑块移动的值相当于滑块范围的五分之一。我想将其设置为移动 10 步。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:55:31.990

您必须为此使用“步骤”选项：

```
 $( "#slider" ).slider({
        value:100,
        min: 0,
        max: 500,
        step: 50
    }); 
```

要解决向上翻页/向下翻页的奇怪行为，请尝试以下操作：http: [//jsfiddle.net/SPDBw/](http://jsfiddle.net/SPDBw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T21:42:43.010

从**1.8 版开始。****到**1.11。***，他们将变量`numPages`放入 ui.slider 容器中，并将其固定为**5**。*

 *即使您覆盖 keyCode 处理程序以识别键“PageUp”和“PageDown”也无法解决问题。

***但是***，作为一种解决方法，您可以在页面加载开始时覆盖此变量，该变量包含在滑块小部件的原型范围中。

**优点**：我不需要担心获取对象的*最大值*和*最小值*

**缺点**：解决方案只是一种解决方法，解决方案可以（并且*将*）在未来的补丁中被破坏。

我所做的是：

```
$(document).ready(function() {
  $.ui.slider.prototype.numPages = 10;
}); 
```

希望它有效;）*

# vim - 如何在 vimwiki 中使用字符的真实值？

> ID：12444715
> 
> 赞同：2
> 
> 时间：2012-09-16T05:54:32.140
> 
> 标签：vim, escaping

我在 vimwiki 中输入了这些内容：

`here $1 is matched for[[name]]`

然后我将 wiki 转换为 HTML：

`here \)1 is matched for <a href="">name</a>`

问题是如何获得特殊字符的**真实值**，例如`$`，`[[`？

在 Regexp 中，我可以使用反斜杠来使用字符的 tre 值： `here \$1 ....`

但是在 vimwiki 中，我该怎么做呢？

# python - 如何在 Matplotlib 中设置图形标题和轴标签字体大小？

> ID：12444716
> 
> 赞同：779
> 
> 时间：2012-09-16T05:54:36.627
> 
> 标签：python, matplotlib

我正在像这样在 Matplotlib 中创建一个图形：

```
from matplotlib import pyplot as plt

fig = plt.figure()
plt.plot(data)
fig.suptitle('test title')
plt.xlabel('xlabel')
plt.ylabel('ylabel')
fig.savefig('test.jpg') 
```

我想为图形标题和轴标签指定字体大小。我需要这三个字体大小不同，因此设置全局字体大小 ( `mpl.rcParams['font.size']=x`) 不是我想要的。如何分别设置图形标题和轴标签的字体大小？

* * *

## 回答 #1

> 赞同：1096
> 
> 时间：2012-09-16T06:07:44.857

处理诸如`label`,`title`等文本的函数接受与 . 相同的参数[`matplotlib.text.Text`](http://matplotlib.org/users/text_props.html)。对于字体大小，您可以使用`size/fontsize`：

```
from matplotlib import pyplot as plt    

fig = plt.figure()
plt.plot(data)
fig.suptitle('test title', fontsize=20)
plt.xlabel('xlabel', fontsize=18)
plt.ylabel('ylabel', fontsize=16)
fig.savefig('test.jpg') 
```

对于全局设置`title`和`label`大小，[`mpl.rcParams`](http://matplotlib.org/users/customizing.html)包含`axes.titlesize`和`axes.labelsize`。（从页面）：

```
axes.titlesize      : large   # fontsize of the axes title
axes.labelsize      : medium  # fontsize of the x any y labels 
```

（据我所知，没有办法分别设置`x`和`y`标注尺寸。）

而且我看到`axes.titlesize`不影响`suptitle`。我想，你需要手动设置。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2016-07-07T17:13:01.897

您也可以通过 rcParams 字典全局执行此操作：

```
import matplotlib.pylab as pylab
params = {'legend.fontsize': 'x-large',
          'figure.figsize': (15, 5),
         'axes.labelsize': 'x-large',
         'axes.titlesize':'x-large',
         'xtick.labelsize':'x-large',
         'ytick.labelsize':'x-large'}
pylab.rcParams.update(params) 
```

* * *

## 回答 #3

> 赞同：117
> 
> 时间：2017-10-09T16:35:05.750

如果您更习惯于使用`ax`对象进行绘图，您可能会发现`ax.xaxis.label.set_size()`更容易记住，或者至少更容易在 ipython 终端中使用 tab 找到。之后好像需要重绘操作才能看到效果。例如：

```
import matplotlib.pyplot as plt

# set up a plot with dummy data
fig, ax = plt.subplots()
x = [0, 1, 2]
y = [0, 3, 9]
ax.plot(x,y)

# title and labels, setting initial sizes
fig.suptitle('test title', fontsize=12)
ax.set_xlabel('xlabel', fontsize=10)
ax.set_ylabel('ylabel', fontsize='medium')   # relative to plt.rcParams['font.size']

# setting label sizes after creation
ax.xaxis.label.set_size(20)
plt.draw() 
```

我不知道在创建后设置字幕大小的类似方法。

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2018-12-12T14:20:24.647

为了只修改标题的字体（而不是轴的字体），我使用了这个：

```
import matplotlib.pyplot as plt
fig = plt.Figure()
ax = fig.add_subplot(111)
ax.set_title('My Title', fontdict={'fontsize': 8, 'fontweight': 'medium'}) 
```

fontdict 接受来自[matplotlib.text.Text](https://matplotlib.org/api/text_api.html#matplotlib.text.Text)的所有 kwargs 。

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2019-12-04T05:25:29.467

> 根据[官方指南](https://matplotlib.org/faq/usage_faq.html#matplotlib-pyplot-and-pylab-how-are-they-related)，`pylab`不再推荐使用 。`matplotlib.pyplot`应该直接使用。

全局设置字体大小`rcParams`应该通过

```
import matplotlib.pyplot as plt
plt.rcParams['axes.labelsize'] = 16
plt.rcParams['axes.titlesize'] = 16

# or

params = {'axes.labelsize': 16,
          'axes.titlesize': 16}
plt.rcParams.update(params)

# or

import matplotlib as mpl
mpl.rc('axes', labelsize=16, titlesize=16)

# or 

axes = {'labelsize': 16,
        'titlesize': 16}
mpl.rc('axes', **axes) 
```

可以使用恢复默认值

```
plt.rcParams.update(plt.rcParamsDefault) 
```

[您也可以通过在matplotlib 配置目录](https://matplotlib.org/3.1.1/faq/troubleshooting_faq.html#matplotlib-configuration-and-cache-directory-locations)下的目录中创建[样式表](https://matplotlib.org/3.1.1/tutorials/introductory/customizing.html#using-style-sheets)来做到这一点（您可以从 获取配置目录）。样式表格式为`stylelib``matplotlib.get_configdir()`

```
axes.labelsize: 16
axes.titlesize: 16 
```

如果您有样式表，`/path/to/mpl_configdir/stylelib/mystyle.mplstyle`则可以通过

```
plt.style.use('mystyle')

# or, for a single section

with plt.style.context('mystyle'):
    # ... 
```

您还可以创建（或修改）共享格式的[matplotlibrc 文件](https://matplotlib.org/3.1.1/tutorials/introductory/customizing.html#the-matplotlibrc-file)

```
axes.labelsize = 16
axes.titlesize = 16 
```

根据您修改的 matplotlibrc 文件，这些更改将仅用于当前工作目录、所有**没有**matplotlibrc 文件的工作目录，或所有**没有**matplotlibrc 文件且没有其他 matplotlibrc 文件的工作目录被指定。有关更多详细信息，请参阅自定义 matplotlib 页面的[这一部分](https://matplotlib.org/3.1.1/tutorials/introductory/customizing.html#the-matplotlibrc-file)。

`rcParams`可以通过 检索完整的键列表`plt.rcParams.keys()`，但要调整字体大小（[此处](https://matplotlib.org/3.1.1/tutorials/introductory/customizing.html#a-sample-matplotlibrc-file)引用的斜体）

*   `axes.labelsize`- *x 和 y 标签的字体大小*
*   `axes.titlesize`-*轴标题的字体大小*
*   `figure.titlesize`-*图形标题的大小 ( `Figure.suptitle()`)*
*   `xtick.labelsize`-*刻度标签的字体大小*
*   `ytick.labelsize`-*刻度标签的字体大小*
*   `legend.fontsize`- 图例的字体大小 ( `plt.legend()`, `fig.legend()`)
*   `legend.title_fontsize`- 图例标题的字体大小，*`None`设置为与默认轴相同。*有关用法示例，请参[见此答案](https://stackoverflow.com/questions/12402561/how-to-set-font-size-of-matplotlib-axis-legend/17093475#17093475)。

所有这些都接受字符串大小`{'xx-small', 'x-small', 'smaller', 'small', 'medium', 'large', 'larger', 'x-large', 'xxlarge'}`或`float`in `pt`。字符串大小是相对于由指定的默认字体大小定义的

*   `font.size`-*文本的默认字体大小，以 pts 为单位。10 pt 是标准值*

此外，可以通过以下方式指定权重（尽管仅针对其出现的默认值）

*   `font.weight`- 使用的字体的默认粗细`text.Text`。接受`{100, 200, 300, 400, 500, 600, 700, 800, 900}`或`'normal'`（400）、`'bold'`（700）`'lighter'`、和`'bolder'`（*相对于当前权重*）。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-06-26T15:44:49.060

其他人已经提供了如何更改标题大小的答案，但是对于轴刻度标签大小，您也可以使用[set_tick_params](https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.axes.Axes.tick_params.html#matplotlib.axes.Axes.tick_params)方法。

例如，要使 x 轴刻度标签尺寸变小：

```
ax.xaxis.set_tick_params(labelsize='small') 
```

或者，使 y 轴刻度标签变大：

```
ax.yaxis.set_tick_params(labelsize='large') 
```

您还可以输入`labelsize`浮点数或以下任何字符串选项：“xx-small”、“x-small”、“small”、“medium”、“large”、“x-large”或“xx” -大的'。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2021-09-02T14:05:12.253

如果您没有显式创建图形和轴对象，则可以在使用参数创建标题时设置标题字体大小`fontdict`。

当您使用参数创建 x 和 y 标签时，您可以分别设置 x 和 y 标签字体大小`fontsize`。

例如：

```
plt.title('Car Prices are Increasing', fontdict={'fontsize':20})
plt.xlabel('Year', fontsize=18)
plt.ylabel('Price', fontsize=16) 
```

也适用于 seaborn 和 pandas 绘图！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-09T20:56:43.887

更改字体大小的另一种解决方案是更改填充。当 Python 保存您的 PNG 时，您可以使用打开的对话框更改布局。轴之间的间距，如果您愿意，可以在此阶段更改填充。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-09-21T18:34:05.203

放在`right_ax`前面`set_ylabel()`

`ax.right_ax.set_ylabel('AB scale')`

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2021-08-04T13:21:32.227

# 图书馆

将 numpy 导入为 np

将 matplotlib.pyplot 导入为 plt

# 创建数据集

高度 = [3, 12, 5, 18, 45]

条形=（'A'，'B'，'C'，'D'，'E'）

x_pos = np.arange(len(bars))

# 创建条形图并选择颜色

plt.bar(x_pos, 高度, 颜色 = (0.5,0.1,0.5,0.6))

# 添加标题和轴名称

plt.title('我的标题')

plt.xlabel('类别')

plt.ylabel('值')

# 在 x 轴上创建名称

plt.xticks(x_pos, 条形图)

# 显示情节

plt.show()

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2020-01-14T07:38:54.737

# 7（最佳解决方案）

```
 from numpy import*
 import matplotlib.pyplot as plt
 X = linspace(-pi, pi, 1000)

class Crtaj:

    def nacrtaj(self,x,y):
         self.x=x
         self.y=y
         return plt.plot (x,y,"om")

def oznaci(self):
    return plt.xlabel("x-os"), plt.ylabel("y-os"), plt.grid(b=True) 
```

# 6（稍微差一点的解决方案）

```
from numpy import*
M = array([[3,2,3],[1,2,6]])
class AriSred(object):
    def __init__(self,m):
    self.m=m

def srednja(self):
    redovi = len(M)
    stupci = len (M[0])
    lista=[]
    a=0
    suma=0
    while a<stupci:
        for i in range (0,redovi):
            suma=suma+ M[i,a]
        lista.append(suma)
        a=a+1
        suma=0
    b=array(lista) 
    b=b/redovi
    return b

OBJ = AriSred(M)
sr = OBJ.srednja() 
```

# c++ - 将指针推回指针向量是否存在内存泄漏？

> ID：12444723
> 
> 赞同：7
> 
> 时间：2012-09-16T05:56:14.213
> 
> 标签：c++, pointers, memory-leaks, vector, c++11

在我的课堂上，我有一个成员变量`std::vector<node*> children`

以下类成员函数是否会造成内存泄漏？

```
//adds a child node
{
    node* child = new node("blah","blah","blah");
    child->Set_Parent(this);
    children.push_back(child);  //<- Is this ok?
} 
```

向量复制了指针，我有两个指向同一内存的指针，然后原始指针超出范围，对吗？

这可能简单明了，但我只想证实我的假设。
谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T06:08:16.697

这不是泄漏......但是。但是，如果`vector`超出范围，或者 you `erase`，`pop_back`或者做其他事情从向量中删除元素，而没有首先`delete`ing 你要删除的元素，你手上就会有泄漏。

正确的做法是从使用 a 更改`vector<node *>`为`vector<unique_ptr<node>>`。您的代码将更改为

```
//adds a child node
{
    node* child = new node("blah","blah","blah");
    child->Set_Parent(this);
    children.push_back(std::unique_ptr<node>(child));
} 
```

或者`boost::ptr_vector<node>`，如果您可以使用 Boost，请使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T05:59:14.567

如果在调用包含向量的析构函数的类时忘记释放子节点，这只是内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T05:59:25.247

这不是内存泄漏。您仍然在向量中有一个指针，您将能够在需要时释放内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T06:00:50.263

当向量超出范围时，它的析构函数不会破坏指向的对象。它破坏了指针——它什么也不做。

您的代码通过创建该对象`new`。您的代码负责删除该对象。如果你不这样做，你就有泄漏。如果你这样做很早，即在从向量中删除指针之前，你会遇到更大的问题。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-16T06:04:36.040

假设`children`是一个类成员，您只需删除类解构器上向量中的所有项目。

```
struct Foo{};

class Bar
{
public:
    Bar(){};
    ~Bar()
    {
        for( vector<Foo*>::iterator it = children.begin(); it != children.end(); ++it )
        {
            SAFE_DELETE( (*it) ); //use your own macro/template or use delete if you don't have one
            delete (*it);
            (*it) = NULL;
        }
    }
    vector<Foo*>children;
}

Foo* p = new Foo();
children.push_back( p ); 
```

如果您使用 a`vector<Foo>child`代替，`push_back`则向量上的 each 将创建要存储的原始对象的副本，但是由于您使用的是指针，在这种情况下，在堆上分配的`new`对象副本不会被创建，指向 a 的指针long-life term object 只是简单地存储，这意味着是的，您必须稍后将其删除。

# php - 如何将登录重定向到不同的文件夹

> ID：12444724
> 
> 赞同：-2
> 
> 时间：2012-09-16T05:56:35.560
> 
> 标签：php, mysql, redirect, admin

我们有 2 个管理页面。一个用于管理员，另一个用于分支。我们公司有16个分支机构。我已将 16 个分支作为不同的文件夹。一个是用于管理部分。如果我登录 www.xxx.com，它会询问登录页面。当管理员进入时，它应该只进入管理页面。如果任何分支尝试登录 www.xxx.com，它应该重定向到它们各自的分支文件夹。请告诉我如何在 php/mysql 中执行 dat。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:00:49.653

例如，您在 mysql 表中添加一个新行，`login_type`并为每个用户添加他的登录类型：

```
admin    - login_type = admin_folder
branch 1 - login_type = branch1_folder 
```

因此，每次用户进行身份验证时，您都会将他重定向到存储在`login_type`. 当然，您还要检查他是否没有降落在其他文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:08:49.190

您可以根据管理员或分支对用户进行分类。首先，您需要将每个可以登录该站点的用户的分支存储在数据库中。当用户登录时，从行中检索分支并重定向他相应的分支。

# asterisk - 星号发起掉线

> ID：12444730
> 
> 赞同：0
> 
> 时间：2012-09-16T05:58:06.173
> 
> 标签：asterisk, amazon-ami

我正在使用星号（1.6.2.13）大量源自使用 perl 和 AMI 来自 mysql 数据库的指定数字。如果我将所有呼叫（同时）发送到星号，它会在大约 20 秒后丢弃一半。但是如果我在每个发起之间睡 1 秒钟，它将清楚地处理呼叫。所以这会降低发起能力。

有没有办法摆脱这个限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:34:03.623

Asterisk 使用一个线程来处理所有的 SIP 消息，所有与 SIP 消息相关的事情都发生在这个线程中（例如，实时数据库访问）。这对每秒可以处理的调用数量施加了上限。您可以使用“netstat -na |grep 5060”之类的方法来监视套接字队列上未处理的 SIP 数据包。我发现它每秒最多可以进行 200 次呼叫建立，除此之外，它将开始丢失和重新传输数据包并最终丢弃呼叫。

# c# - 当客户端日历为非公历时，如何获取公历格式的“DateTime.Now”？

> ID：12444731
> 
> 赞同：6
> 
> 时间：2012-09-16T05:58:06.260
> 
> 标签：c#, silverlight, datetime, gregorian-calendar

当客户日历不是公历时，如何进入`DateTime.Now`公历*？*

我的项目是带有 C# 代码的 Silverlight，并且无法预测客户端默认日历。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T13:35:20.760

DateTime 值没有格式。在内部，它只是自 .NET 纪元 0001-01-01 00:00 以来的滴答计数。格式化是当你调用 ToString 时。

只需为具有所需日历的文化使用不同的 CultureInfo，例如

```
CultureInfo french = CultureInfo.GetCultureInfo("fr-FR");

String nowStr = DateTime.Now.ToString( french ); 
```

`CultreInfo.InvariantCulture`如果您只是将可预测的西方文化与公历一起使用，请使用。

# maven - 如何在基于 github 的 maven repo 中存储 jars

> ID：12444735
> 
> 赞同：0
> 
> 时间：2012-09-16T05:58:58.063
> 
> 标签：maven

我已经设置了一个 github 存储库来存储自定义原型，我可以使用类似的东西从这些原型（在单独的 vm 上）开始一个新项目

```
 mvn archetype:generate -Dcatalog=https://raw.github.etc./archetype-catalog.xml 
```

现在我正在尝试将一些 3rd 方 jar 远程存储在同一个 repo 中，并从 pom.xml 中将它们作为依赖项引用

首先，我在本地安装了 jar

```
mvn install:install-file ..params.. 
```

我的回购结构如下：

**https://github.com/myappco/myrepo**

```
 |
 |___releases
 |           | 
              (group id)adobe.flex.messaging   (ie. adobe/flex/messaging)
                               common  
                                     1.0  
                                        (common-1.0.jar) 
                                        * trying to make this work
 |___snapshots
              |
               (group id)com.acme.archetypes   (ie. com/acme/archetypes)
                                my-archetype
                                           1.0-SNAPSHOT   
                                           * archetype resolved ok

 archetype-catalog.xml 
```

我的项目中的设置：

```
<dependency>
  <groupId>adobe.flex.messaging</groupId>
  <artifactId>common</artifactId>
  <version>1.0</version>
  <scope>test</scope>
</dependency>

 <repositories>
  <repository>
    <id>orb-snapshots</id>
       <url>https://github.com/myappco/myrepo/releases</url>
    </repository>
 </repositories> 
```

我想我一定是在做一些愚蠢的事情，因为我可以从 github repo archetype-catalog.xml 中进行原型：生成。谁能看到我搞砸了什么？

塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:40:20.197

您需要使用您`deploy`的工件。您需要进行适当的设置 - 可能类似于[在 Github 上托管 Maven 存储库](http://cemerick.com/2010/08/24/hosting-maven-repos-on-github/)中提到的内容。`github``mvn deploy``github`

# html - 像桌面图标一样的浮动 div

> ID：12444743
> 
> 赞同：1
> 
> 时间：2012-09-16T06:00:46.430
> 
> 标签：html, css

我有 15 个 200 像素 x 200 像素大小的 div。我还有一个高度设置为 100% 的容器 div。

我需要一个一个地垂直显示 div，当它到达容器高度的末端时，以下 div 应该显示在第二列中。

我确实需要我的 div 像 PC 桌面上的浮动图标一样显示。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:27:20.647

This can be done by setting css column-count property of ul to number of columns

This link explain more about this solution

[How to make floating DIV list appear in columns, not rows](https://stackoverflow.com/questions/5484215/how-to-make-floating-div-list-appear-in-columns-not-rows)

# javascript - DOM Level 2 的 JavaScript 实现（或更好？）

> ID：12444746
> 
> 赞同：-4
> 
> 时间：2012-09-16T06:01:03.177
> 
> 标签：javascript, dom, cross-browser

由于我在[这里](https://stackoverflow.com/questions/12331997/is-the-conversion-from-html-to-dom-and-back-to-html-standardized)收到的评论，我正在寻找可以在所有常见浏览器中运行的 DOM 的纯 JavaScript 实现。请注意，我不希望与 DOM 的浏览器实现进行交互（甚至不通过 jQuery）。我正在寻找一个完整的替代品。

编辑：由于不常见的问题偶尔会遇到对 SO 的批评，我将尝试解释为什么我需要这样做。我正在编写一个富文本编辑器，它需要一些非常具体的功能，并且浏览器之间的实现差异导致我无法依赖它们来保持一致性。请参阅另一个问题的答案（与我的需求相关）[ExecCommand 函数的定义是否为粗体？](https://stackoverflow.com/questions/12158503/definition-of-execcommand-function-for-bold/12166267#12166267)这详细说明了为什么这是必要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:18:59.213

[jsdom](https://github.com/tmpvar/jsdom)是这个问题的规范答案。[dom.js](https://github.com/andreasgal/dom.js/)是另一个，但我不知道有谁在使用它，所以我怀疑它是否经过了很多测试。

# python - python 诅咒文本框小部件

> ID：12444755
> 
> 赞同：1
> 
> 时间：2012-09-16T06:02:38.853
> 
> 标签：python, curses

```
#! /usr/bin/python

import curses
import curses.textpad as textpad

try:
    mainwindow = curses.initscr()
    textpad.Textbox(mainwindow).edit()
finally:
    curses.endwin() 
```

问题是我输入了一个字符，但屏幕上显示了两个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T06:44:21.413

回显默认开启。您需要致电`noecho`停用它。

```
#!/usr/bin/env python

import curses
import curses.textpad as textpad

try:
    mainwindow = curses.initscr()
    # Some curses-friendly terminal settings
    curses.cbreak(); mainwindow.keypad(1); curses.noecho()
    textpad.Textbox(mainwindow).edit()
finally:
    # Reverse curses-friendly terminal settings
    curses.nocbreak(); mainwindow.keypad(0); curses.echo()
    curses.endwin() 
```

（该脚本已在 Python 2.7 上进行了测试）。我建议你看看[curses 编程页面](http://docs.python.org/howto/curses.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T06:38:34.690

使用[`curses.noecho()`](http://docs.python.org/howto/curses.html#starting-and-ending-a-curses-application)：

```
import curses
import curses.textpad as textpad

try:
    mainwindow = curses.initscr()
    curses.noecho()
    textpad.Textbox(mainwindow).edit()
finally:
    curses.endwin() 
```

# android - 如何为android应用程序提供一些资源文件？

> ID：12444758
> 
> 赞同：0
> 
> 时间：2012-09-16T06:03:10.893
> 
> 标签：android, assets

我正在编写一个 android 应用程序，用户可以从服务器下载一些图像文件。那里的图像文件将存储在 android 手机中。

现在我想把一些图像文件放在apk文件中，用户可以在安装后快速启动应用程序。我发现我可以将它们放入`assets`目录，但该目录是只读的。当用户下载其他图像文件时，我需要将它们存储到另一个目录中。

所以会有两个目录来存放图片文件，但是它们是同一类型的。

这种情况有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:14:07.323

查看[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)以获取可以在 Android 上放置数据的不同位置的列表。

您应该根据需要将下载的图像文件放在三个位置之一。

如果图像旨在供用户查看（例如下载的照片），请将它们放在外部存储设备上。如果它们是用户界面元素或其他重要的（但不是面向用户的）图像，请将它们放在内部存储中。如果它们是为了快速访问而被缓存但在必要时下载的（例如，在网站上找到的临时图像），请将它们放在内部缓存目录中 ( `Context.getCacheDir()`)。

如果您没有很多资产，您可以在程序第一次运行时将它们复制到目标位置（例如，检查某个文件是否存在，并在完成设置后创建该文件）。然后你只需要检查一个地方（除非它是缓存目录，在这种情况下你不能保证文件会永远存在）。

如果您有很多资产文件，我会使用两阶段查找：首先查阅您下载的图像目录（例如，您可以覆盖内置资产），然后查阅您的资产目录。这也足够灵活，可以让您在需要时使用多个存储位置。

# css - 如何使用内联图像实现多列布局

> ID：12444760
> 
> 赞同：1
> 
> 时间：2012-09-16T06:03:49.960
> 
> 标签：css, microsoft-metro

我正在尝试使用内联图像实现多列布局。

如下图所示：

```
===========   ============   ============   ============   ============   + + + + + +
===========   ============   ============   ============   ============   +         +
===========   ============   ============   ============   ============   + Image-3 +
===========   ============   ============   ============   ============   +         +
+ + + + + + + + + + + +  +   ============   + + + + + +    ============   +         +
+                        +   ============   +         +    ============   +         +
+        Image-1         +   ============   + Image-2 +    ============   + + + + + +
+ Spanned across columns +   ============   +         +    Empty space    ============
+                        +   ============   +         +     as Image-3    ============
+                        +   ============   +         +     cannot fit    ============
+ + + + + + + + + + + +  +   ============   + + + + + +        here       ============ 
```

我必须在基于 Windows 8 应用程序 JavaScript/HTML 的应用程序中使用它（**因此您可以假设它仅适用于 IE 10**）。

我尝试使用以下 CSS，但它没有按预期布置图像。

```
column-fill: auto;
column-gap: 30px;
column-width: 270px; 
```

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:52:05.823

你看过 -ms-grid-* 属性了吗？api 文档： http: [//msdn.microsoft.com/en-us/library/windows/apps/hh453256.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh453256.aspx) 示例：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh972605 .aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh972605.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:39:27.027

```
<!DOCTYPE HTML>
<html>
<head>
<style>
 .col1{ float:left; left:5%;}
  .col2{float:left; left:15%;} 
  .col3{float:left; left:35%;} 
  .col4{float:left; left:55%;}
  .col5{float:left; left:75%;} 
  .col6{float:left; left:95%;}
  div{ display:inline;width:150px; padding:3px; margin:6px; text-align:justify;}
</style>

</head>
<body>
   <div class="col1">
   multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. <img src="images/apms_buttonbgr.PNG" width="300">
   </div>

     <div class="col2">
  multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. 
   </div>

     <div class="col3">
  multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images.
   </div>

     <div class="col4">
  multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images.<img src="images/apms_buttonbgr.PNG">
   </div>

     <div class="col5">
  multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. <img src="images/apms_buttonbgr1.PNG" border="1">
   </div>

     <div class="col6">
  <img src="images/apms_buttonbgr.PNG"> multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. multi-column layout with inline images. 
   </div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T22:46:01.837

我建议查看Internet Explorer 10 支持的[CSS 多列布局。](http://msdn.microsoft.com/en-us/library/ie/hh673534%28v=vs.85%29.aspx)

# postgresql - 如何在 Heroku 上使用 Temporal Postgres / Postgres 9.2 的 PERIOD 功能？

> ID：12444764
> 
> 赞同：2
> 
> 时间：2012-09-16T06:04:36.553
> 
> 标签：postgresql, datetime, heroku, timestamp, postgresql-9.2

我正在构建一个处理时间和持续时间的应用程序，以及数据库中给定时间单位和开始/结束时间之间的交集，例如：

数据库：

```
Row # | start - end
Row 1 | 1:00 - 4:00
Row 2 | 3:00 - 6:00 
```

我希望能够选择两个特定时间之间的时间总和，或者 GROUP BY 一个 INTERVAL 以便返回的记录集在给定的时间间隔内每个总和都有一行，例如：

```
SELECT length( (start, end) )  WHERE (start, end) INTERSECTS (2:00,4:00) 
```

（在这种情况下， (start,end) 是一个 PERIOD，它是 Postgres Temporal 和 pg9.2 中的一种新数据类型）

这将返回

```
INTERVAL 3 HOURS 
```

因为第 1 行在 2:00 - 4:00 之间有两个小时，而第 2 行在此期间有一个小时。

此外，我希望能够：

```
SELECT "lower bound of start", length( (start, end) )  GROUP BY INTERVAL 1 HOUR 
```

我想返回：

```
1:00 | 1
2:00 | 1
3:00 | 2
4:00 | 2
5:00 | 1 
```

它显示给定间隔期间每小时的一行以及该间隔开始时的时间总和

我*认为*PERIOD 类型可以用于此，它在 Postgres Temporal 和 Postgres 9.2 中。但是，据我所知，这些目前在 Heroku 上不可用 - 所以，

如何在 Heroku 上启用这些数学？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:34:57.483

尝试运行：

```
 heroku addons:add heroku-postgresql:dev --version=9.2 
```

那应该为您提供支持范围类型的 9.2 版本。由于这是目前非常早期的任何反馈，我们将不胜感激 dod-feedback@heroku.com

# php - 搜索并从内容中删除？

> ID：12444766
> 
> 赞同：0
> 
> 时间：2012-09-16T06:04:45.963
> 
> 标签：php

我有这个内容“Lorem ipsum dolor sit amet，**[Hello world]** consectetur adipiscing elit. Mauris ornare luctus diam sit amet mollis”。
我想删除任何包裹的东西，`[]`
所以应该删除这个内容的结果**[Hello world]**
像这样

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Mauris ornare luctus diam sit amet mollis。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T06:08:14.447

使用[preg_replace](http://php.net/manual/en/function.preg-replace.php)：

```
$string = 'Lorem ipsum dolor sit amet,[Hello world] consectetur adipiscing elit. Mauris ornare luctus diam sit amet mollis.';
$newString = preg_replace('/\[.+?\]/', '', $string);
echo $newString; 
```

[键盘示例](http://codepad.org/QiJ12TFD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:24:19.487

[preg_replace](http://php.net/manual/en/function.preg-replace.php)是要走的路。它使用正则表达式来匹配输入字符串中的模式（第三个参数），并返回一个字符串，该字符串用替换字符串（第二个参数）替换与模式（第一个参数）匹配的任何内容。

```
$input = "Lorem ipsum dolor sit amet,[Hello world] consectetur adipiscing elit. Mauris ornare luctus diam sit amet mollis.";
$output = preg_replace('/\[.+\]/', '', $input);
echo $output; 
```

会给你：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris ornare luctus diam sit amet mollis. 
```

*   在这种情况下要意识到的重要一点是，您需要使用 a`\`来转义`[`and`]`字符，因为它们在正则表达式中具有特殊含义。关于正则表达式的 Wikipedia 条目有一个部分介绍了[语法](http://en.wikipedia.org/wiki/Regular_expression#Syntax)并涵盖了其他元字符。
*   另一个考虑因素是您应该使用`+`非贪婪匹配而不是`*`因为如果您的输入是：

    ```
    $input = "Lorem ipsum dolor sit amet,[Hello world] consectetur [test] adipiscing elit. Mauris ornare luctus diam sit amet mollis."; 
    ```

    那么您的输出将删除`consectetur`您可能不想要的并给您：

    ```
    Lorem ipsum dolor sit amet, adipiscing elit. Mauris ornare luctus diam sit amet mollis. 
    ```

# python - Django PasswordInput 正在打印对象而不是表单字段

> ID：12444770
> 
> 赞同：0
> 
> 时间：2012-09-16T06:05:46.130
> 
> 标签：python, django, forms

我正在尝试通过使用 Django Auth 模块来创建自己的身份验证系统。问题是当我在模板中打印表单时，用户名和文本字段显示正常，但密码字段显示对象类似于这样`<django.forms.widgets.PasswordInput object at 0x00000000039E1710>`

这是我的表格

```
class UserLoginForm(forms.Form):
    username = forms.CharField(required = True)
    password = forms.PasswordInput(render_value = True) 
```

模板放在这里。

```
{% if form.errors %}
<p>Your username and password didn't match. Please try again.</p>
{% endif %}

<form method="post" action="/portal/login">
{% csrf_token %}
<table>
<tr>
<td>{{ form.username.label_tag }}</td>
<td>{{ form.username }}</td>
</tr>
<tr>
<td>{{ form.password.label_tag }}</td>
<td>{{ form.password }}</td>
</tr>
</table>

<input type="submit" value="login" />
<input type="hidden" name="next" value="{{ next }}" />
</form> 
```

有人帮我解决这个问题

-维克拉姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T06:10:06.893

改变

```
password = forms.PasswordInput(render_value = True) 
```

到

```
password = forms.CharField(widget=forms.PasswordInput(render_value = True)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:08:44.083

好的，我得到了答案：像这样更正表格后显示正常

```
class UserLoginForm(forms.Form):
   username = forms.CharField(required = True)
   password = forms.CharField(widget=forms.PasswordInput()) 
```

对不起垃圾邮件

-维克拉姆

# eclipse - 如何自定义 maven 以生成我想要的 .classpath？

> ID：12444772
> 
> 赞同：0
> 
> 时间：2012-09-16T06:05:53.030
> 
> 标签：eclipse, maven, maven-3, m2eclipse

使用以下命令

```
mvn eclipse:eclipse 
```

我可以得到一个 .classpath 的行，例如：

```
 <classpathentry kind="src" path="src/main/java" including="**/*.java"/> 
```

但这不是我想要的配置，我希望它是

```
 <classpathentry kind="src" path="src/main/java" including="**/*.*"/> 
```

这意味着它应该**包括="** / *.* "** 而不包括=" **/ *.* *jave** "

为什么我要自定义 maven 以生成我想要的 .classpath？

# html - 当页面小于窗口时如何强制HTML背景到底部

> ID：12444774
> 
> 赞同：3
> 
> 时间：2012-09-16T06:06:36.027
> 
> 标签：html, css, background-image, background-position

我有一个带有 2 个背景图像的页面，其中一个需要显示在页面的最底部。目前我已经这样实现它：

```
body {
    background-image: url('/cheri/image/background.png'), 
                      url('/cheri/image/backgroundB.png');
    background-position: top, bottom;
    background-repeat: repeat-x, repeat-x;
} 
```

当页面内容高于浏览器窗口时，这可以正常工作，但如果它更小，则会在背景图像下方留下空白区域，如下图所示：

[http://img198.imageshack.us/img198/4560/screenshot20120916at851.png](http://img198.imageshack.us/img198/4560/screenshot20120916at851.png)

我试图将主体设置为位置：绝对，高度：100%，但是当存在滚动时它没有正确呈现。我还尝试为背景图像创建一个单独的 div 并将其绝对定位到底部，但由于底部出现的某些元素具有不同的位置属性，z-indexing 无法正常工作。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T10:56:58.717

`min-height: 100%`在`html`和上使用`body`：

```
html, body { min-height: 100%; } 
```

[**演示**](http://dabblet.com/gist/3731948/3f3ce1f2f132adf14e8aca4236ee090bcdaff2c8)

当您有足够的内容导致滚动时，它不会产生任何问题。

[**演示**](http://dabblet.com/gist/3731948/8721b626ef93595980c394dc12e88e699d92b246)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T06:14:34.107

同时设置 HTML 元素：

```
html {
    background-image: url('/cheri/image/background.png'), url('/cheri/image/backgroundB.png');
    background-position: top, bottom;
    background-repeat: repeat-x, repeat-x;
} 
```

# c - 在函数中传递指向结构类型的指针

> ID：12444780
> 
> 赞同：1
> 
> 时间：2012-09-16T06:08:21.293
> 
> 标签：c, struct, typedef

这可能是一个非常基本的问题，但我是 C 的新手，所以请多多包涵。

我正在浏览一些用 C 编写的固件的文档，我遇到了这个问题：

```
typedef struct {
                 int x;
                 int arr[10];
               } sx; 
```

然后我有一个函数，其中传递了指向该类型的指针。

```
int f(sx xtype *sp, int i){
                            return sp -> arr[i];
                          } 
```

我不确定两件事在哪里：根据我的 Java 经验，我认为第一个片段相当于一个超类，很像 Java 中的 Object 类，然后第二个片段使用 sx 的子类。但是我不确定。有人可以确认吗？从我到目前为止的小 C 经验来看，我认为将指针传递给类型的更易于理解的方法如下：

```
typedef struct xtype {
                 int x;
                 int arr[10];
                 } sx;

int f(sx *sp, int i){
                     return sp -> arr[i];
                    } 
```

但我只是怀疑我从这张照片中遗漏了一些东西。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T06:19:14.323

这是不寻常的语法。我怀疑这`xtype`是在某处定义的宏，*可能*看起来像这样

```
#define xtype const 
```

无论如何，变量的声明`sx xtype *sp`并*没有*说它`sp`引用了的子类型`xtype`，`sx`或者这是我很长时间以来见过的最糟糕的预处理器魔法。

* * *

至于你的第二个例子，这也不是子类化的模型。这是什么：

```
typedef struct A {
  /* ... */
} B; 
```

说的是那`struct A`是一样的`B`。它是一个`typedef`：它只是定义了一个新类型，一个较长名称的简短改写版本。

```
void func(struct A);
void func(B); // exactly equivalent 
```

它与继承*无关。*

# android - Sherlock 操作栏的菜单项背景

> ID：12444781
> 
> 赞同：3
> 
> 时间：2012-09-16T06:08:29.690
> 
> 标签：android, actionbarsherlock

我在 Sherlock 操作栏中呈现自定义视图时遇到问题。发生的事情是我已经成功地在操作栏中设置了自定义视图，旨在将标题文本视图设置在中心，但是当我设置其他菜单项（如刷新）时，它的背景显示为黑色。主页按钮也会发生同样的事情。请浏览以下快照。

![自定义 Sherlock 操作栏](../Images/8581ffffc3311fdb0596b8d29b218ea5.png)

正如您在这张图片中看到的那样，当我将主页按钮设置为可见或设置刷新菜单项时，它不应该像这样以黑色背景显示。

在我的活动屏幕中

```
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.menu_activity);
   .... 
   View customNav = LayoutInflater.from(this).inflate(R.layout.custom_navigation, null);
   TextView textView = (TextView)customNav.findViewById(R.id.screen_title);
   textView.setText("Category");
   getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM);
   getSupportActionBar().setCustomView(customNav);
   getSupportActionBar().setDisplayHomeAsUpEnabled(true);
   getSupportActionBar().setDisplayShowHomeEnabled(true);   
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0,Constants.REFRESH_ITEM_ID,0,Constants.LABEL_REFRESH)
        .setIcon(R.drawable.ic_refresh)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    return true;
} 
```

我已经尝试了很多但无法修复它。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:01:49.820

您似乎在清单文件中为整个应用程序或此活动使用 Theme.Sherlock.Dark。这是 ActionBar 的正常行为——它由样式定义，但您的自定义视图元素具有自己的背景、文本样式等...来自 setCustomView() javadoc：

> 自定义导航视图出现在应用程序图标和任何操作按钮之间，并且可以使用那里的任何可用空间。

此方法只是将新视图添加到栏，但没有设置“整个栏的视图”。

看看[http://jgilfelt.github.com/android-actionbarstylegenerator——](http://jgilfelt.github.com/android-actionbarstylegenerator)这是一个动作栏的样式生成器。注意切换按钮“样式兼容性”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:35:36.740

我发现这个解决方案不完全是我想要的方式，而是另一种方式。实际上，我已经为各种屏幕创建了具有居中屏幕标题的图像，并将其设置为操作栏背景，而不是创建自定义视图，并且 SherlockActionBar 足够灵活，可以隐藏左上角显示的默认标题。我所做的就是。

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true);
getSupportActionBar().setDisplayShowTitleEnabled(false);
getSupportActionBar()
            .setBackgroundDrawable(getResources().getDrawable(R.drawable.menu_head)); 
```

# javascript - Underscore 对 Foreach 方法的实现

> ID：12444783
> 
> 赞同：0
> 
> 时间：2012-09-16T06:08:43.343
> 
> 标签：javascript, functional-programming, underscore.js

> **可能重复：**
> [下划线的每个检查 {} 返回回调](https://stackoverflow.com/questions/11600735/underscores-each-checking-for-return-of-callback)

我正在查看下划线的 Foreach 方法的来源和实现。我对以下方法只有一个问题。

```
var breaker = {};

var each = _.each = _.forEach = function(obj, iterator, context) {
   if (obj == null) return;
   if (nativeForEach && obj.forEach === nativeForEach) {
     obj.forEach(iterator, context);
   } else if (obj.length === +obj.length) {
     for (var i = 0, l = obj.length; i < l; i++) {
        if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) return;
     }
   } else {
      for (var key in obj) {
        if (_.has(obj, key)) {
          if (iterator.call(context, obj[key], key, obj) === breaker) return;
        }
      }
   }
}; 
```

我正在为以下几行而苦苦挣扎？为什么要检查被调用的迭代器是否为空对象？为什么要从迭代器返回一个空对象？

```
if (iterator.call(context, obj[key], key, obj) === breaker) return; 
```

# javascript - 使用 Java 脚本 (JQuery) 绘制交互式（dom 元素/对象）点

> ID：12444793
> 
> 赞同：1
> 
> 时间：2012-09-16T06:10:34.433
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试制作一个网页，我想在其中绘制可以关联鼠标事件（Jquery）的点。所以，我想我希望它们成为 dom 对象，而不是仅仅绘制它们。（请建议我们是否可以使用 html5 进行绘制并且仍然将它们视为 dom 元素）

所以基本上我有一个带有 x,y 坐标的文本文件，我想绘制这些但想将 Jquery 事件与它们相关联。例如：左键单击它们会出现一个图表，或者右键单击它们会出现一个菜单，具体取决于我单击的节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:25:03.347

好吧，几种方法。

您可以使用这些点获取坐标并在 DOM 上创建绝对定位的元素。使用 jQuery，您可以设置 'top' 和 'left' 点来定位它们。这个方法对你来说可能是最简单的，因为 jQuery 可以很容易地应用点击事件。

您可以使用 HTML5 画布并使用文件中的坐标在其上绘制形状。使用这种方法，您要么需要编写自己的事件库，要么使用已经编写好的库，例如 kinetic.js。此外，与使用第一种方法一样使用 DOM 对象和 CSS 相比，这些样式的动态性和扩展性要少一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T10:01:53.783

恕我直言，用线条和点编写 DOM 元素是一种非常愚蠢的方法。例如，您将如何制作圆线 - 您*可以*使用边框 CSS 样式创建对角线，但是......嗯 - 有很多可用的选项！另一种方法可能是 Highslide。

## jqueryui-可视化

[jQuery](http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/) top5 绘图工具

[http://www.filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/](http://www.filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/)

[演示](http://www.filamentgroup.com/examples/jqueryui-visualize/)

## 道场工具包

由于您出于某种原因已将其标记为 dojo，请查看此博客条目；
[http://www.sitepen.com/blog/2008/05/27/dojo-charting-event-support-has-landed/](http://www.sitepen.com/blog/2008/05/27/dojo-charting-event-support-has-landed/)

[2dChart 演示](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/charting/tests/test_event2d.html)

[在此处阅读有关滚动/缩放的信息](http://www.sitepen.com/blog/2008/05/15/zooming-scrolling-and-panning-in-dojo-charting/)

[缩放演示](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/charting/tests/test_win2d.html)

这是一个来自 apache 用户的漂亮的小[介绍幻灯片](http://people.apache.org/%7Etonywu/Roadshow10/track1/Data%20Visualization%20with%20Dojo%20toolkit.ppt)

# fluent-nhibernate - 如何配置 Fluent NHibernate 自动映射，以便为子类创建单独的 hbm？

> ID：12444794
> 
> 赞同：1
> 
> 时间：2012-09-16T06:10:40.700
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

这个问题起初可能看起来有点奇怪，但有一个遗留项目正在以这种方式工作，我想知道是否有一种方法可以使用 Fluent Nhibernate 生成其 hbm 文档。我们有一个不是抽象类的父类。像这样：

```
 [Entity("EmployeeTable")]
    public class Employee
    {
       //Memebers of Employee
    } 
```

它有一些子类。这些子类的目的仅仅是为了代码的可重用性，正如你所看到的，这些是一些视图（摘要）来表示一些信息。

```
[Entity("EmployeeType1View")]
public class EmployeeType1:Employee
{
//Memebers of EmployeeType1
}

[Entity("EmployeeType2View")]
public class EmployeeType2:Employee
{
//Memebers of EmployeeType2
} 
```

所以这里有一个问题：有没有一种方法可以告诉 fluent nhibernate 不要考虑这个继承层次结构，或者换句话说，告诉它为这些类中的每一个生成单独的 hbm 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:05:45.770

不幸的是，FNH 不能单独编写子类映射。但是，您可以在将映射写入光盘后更改映射。

```
var model = new FluentNHibernate.Automapping.AutoPersistenceModel();
// add assembly and the like to model
model.WriteMappingsTo(path);

forech(var baseclass in classesWithSubclasses)
{
    var doc = new XmlDocument();
    doc.Load(baseclass.getType().FullName + ".hbm.xml");
    // use xpath to separate the subclassmapping in its own file
} 
```

# python - 在 PIL 中使用多处理

> ID：12444795
> 
> 赞同：4
> 
> 时间：2012-09-16T06:10:52.937
> 
> 标签：python, multiprocessing, python-imaging-library

我有一些代码对一堆 Python Imaging Library (PIL) Image 对象执行（独立）操作。我想尝试使用并行处理来加快速度，所以我阅读了下面的多处理模块：

[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)

但是我仍然不太清楚如何使用多处理来解决这个问题。

从概念上讲，我可以使用图像对象的 multiprocessing.Queue 并使用工作人员池。但 Image 对象似乎“不可挑剔”：

```
UnpickleableError: Cannot pickle <type 'ImagingCore'> objects 
```

有没有更好的方法来并行处理 PIL 图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:18:27.257

如果您从文件中获取图像对象，您只需将文件名发送给工作人员并让他们自己打开图像。

否则，您可以发送图像数据（使用`Image.getdata()`）以及大小和像素格式，并让工作人员使用`Image.new()`和重建图像`Image.putdata()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T10:28:32.510

只需将文件名放在一个列表中，然后让工作进程处理它们。下面的示例在[子进程中使用](http://docs.python.org/library/subprocess.html)[ImageMagick](http://www.imagemagick.org/)从晦涩的格式进行一些图像转换。但是同样的原理也可以用于 PIL。只需替换函数的内容。这是我经常使用的程序，用于将 DICOM 文件（医学成像中使用的一种格式，在本例中来自 X 射线机）转换为 PNG 格式。`processfile()`

```
"""Convert DICOM files to PNG format, remove blank areas. The blank erea
   removal is based on the image size of a Philips flat detector. The image
   goes from 2048x2048 pixels to 1574x2048 pixels."""

import os
import sys
import subprocess
from multiprocessing import Pool, Lock

globallock = Lock()

def checkfor(args):
    """Make sure that a program necessary for using this script is
    available.

    Arguments:
    args -- string or list of strings containing a command to test
    """
    if isinstance(args, str):
        args = args.split()
    try:
        f = open('/dev/null')
        subprocess.call(args, stderr=subprocess.STDOUT, stdout=f)
        f.close()
    except:
        print "Required program '{}' not found! exiting.".format(args[0])
        sys.exit(1)

def processfile(fname):
    """Use the convert(1) program from the ImageMagick suite to convert the
       image and crop it.

    Arguments:
    fname -- string containing the name of the file to process
    """
    size = '1574x2048'
    args = ['convert', fname, '-units', 'PixelsPerInch', '-density', '300',
            '-crop', size+'+232+0', '-page', size+'+0+0', fname+'.png']
    rv = subprocess.call(args)
    globallock.acquire()
    if rv != 0:
        print "Error '{}' when processing file '{}'.".format(rv, fname)
    else:
        print "File '{}' processed.".format(fname)
    globallock.release()

def main(argv):
    """Main program.

    Arguments:
    argv -- command line arguments
    """
    if len(argv) == 1:
        # If no filenames are given, print a usage message.
        path, binary = os.path.split(argv[0])
        print "Usage: {} [file ...]".format(binary)
        sys.exit(0)
    # Verify that the convert program that we need is available.
    checkfor('convert')
    # Apply the processfile() function to all files in parallel.
    p = Pool()
    p.map(processfile, argv[1:])
    p.close()

if __name__ == '__main__':
    main(sys.argv) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-06T17:35:06.810

另一种选择是[将](https://stackoverflow.com/questions/384759/pil-and-numpy)PIL 图像转换为可腌制的 numpy 数组。

```
from __future__ import print_function
import numpy
import pickle

my_array = numpy.array([1,2,3])
pickled_array = pickle.dumps(my_array)
print('The pickled version of %s is:\n\n%s.' % (my_array, pickled_array)) 
```

# git - git commit 提交未分级的大块

> ID：12444796
> 
> 赞同：2
> 
> 时间：2012-09-16T06:11:14.603
> 
> 标签：git

我曾经`git add -p`将我的代码更改拆分为多个提交。但是，在此`git commit`之后执行*所有*更改，包括未暂存的更改。我看了几个关于 SO 的问题，但找不到任何明显的错误。你能帮我理解我做错了什么吗？以下是我尝试过的命令及其输出。

```
bash-3.2$ git diff test11.txt
diff --git a/test11.txt b/test11.txt
index f077274..e811cae 100644
--- a/test11.txt
+++ b/test11.txt
@@ -1,5 +1,5 @@
-Hello
-World
+hello
+world

-Blahblahblah
-blah
+blahblahblah
+Blah
bash-3.2$ git add -p test11.txt
diff --git a/test11.txt b/test11.txt
index f077274..e811cae 100644
--- a/test11.txt
+++ b/test11.txt
@@ -1,5 +1,5 @@
-Hello
-World
+hello
+world

-Blahblahblah
-blah
+blahblahblah
+Blah
Stage this hunk [y,n,q,a,d,/,s,e,?]? s
Split into 2 hunks.
@@ -1,3 +1,3 @@
-Hello
-World
+hello
+world

Stage this hunk [y,n,q,a,d,/,j,J,g,e,?]? y
@@ -3,3 +3,3 @@

-Blahblahblah
-blah
+blahblahblah
+Blah
Stage this hunk [y,n,q,a,d,/,K,g,e,?]? n

bash-3.2$ git status
# On branch test
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   test11.txt
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   test11.txt
bash-3.2$ git commit test11.txt
[test 1b85189] Test12
 1 files changed, 4 insertions(+), 4 deletions(-)
bash-3.2$ git status
# On branch test
nothing added to commit 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T06:18:17.693

不要在`git commit`命令中指定文件名。

默认情况下，`git commit`在没有其他参数的情况下提交索引的内容（无论您通过什么暂存`git add`）。

但是，如果您指定文件名（例如`git commit <filename>`），那么 Git 实际上会完全绕过索引并提交指定文件的当前状态，因为它们在工作目录中。

* * *

基本上，使用`git add` **或**指定文件名`git commit`，但不要同时使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T06:19:42.687

```
$ man git-commit
NAME
       git-commit - Record changes to the repository

SYNOPSIS
       git commit [-a | --interactive] [-s] [-v] [-u<mode>] [--amend] [--dry-run]
                  [(-c | -C | --fixup | --squash) <commit>] [-F <file> | -m <msg>]
                  [--reset-author] [--allow-empty] [--allow-empty-message] [--no-verify]
                  [-e] [--author=<author>] [--date=<date>] [--cleanup=<mode>]
                  [--status | --no-status] [-i | -o] [--] [<file>...]
[...]

       <file>...
           When files are given on the command line, the command commits the contents of the named files, without recording the changes already
           staged. The contents of these files are also staged for the next commit on top of what have been staged before. 
```

而不是写作`git commit <file>`，你会想写只是`git commit`或`git commit -m "this is my commit message"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-14T16:16:45.087

`git commit --patch <pathnames...>`做你所期待的。那就是：“提交我已经在这些特定文件中暂存的内容，但不要在这些文件中自动暂存并提交任何未暂存的大块。” 不幸的是，它还具有令人惊讶的效果，即提交未在`<pathnames...>`. (git 2.13.6)

# node.js - 节点 gm - 调整图像大小并保持纵横比？

> ID：12444798
> 
> 赞同：3
> 
> 时间：2012-09-16T06:12:07.660
> 
> 标签：node.js, imagemagick, graphicsmagick

Node gm 是否具有在保持纵横比的同时调整图像大小（即生成缩略图）的内置支持？或者我应该获取图像大小，计算适当的比例，然后调用调整大小？

这个问题的灵感来自[PIL 的类似功能](https://stackoverflow.com/questions/273946/how-do-i-resize-an-image-using-pil-and-maintain-its-aspect-ratio)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T22:38:01.923

乔纳森的评论是解决方案：

```
gm().resize(maxSize) 
```

这会将图像的大小调整为 width `maxSize`。请参阅[相关文档](https://aheckmann.github.io/gm/docs.html)。

# android - 在 Android 上保持单一数据库连接

> ID：12444800
> 
> 赞同：1
> 
> 时间：2012-09-16T06:13:00.580
> 
> 标签：android, database, singleton, blocking

这个问题似乎与我读过的许多问题非常相似，但话又说回来，我没有找到任何能让我满意的代码。（或者我太困了，没有意识到这一点）

我有一个单例数据库助手来确保其中只有一个存在。问题不在这里。在尝试确保仅存在一个数据库连接同时仍在使用`getReadableDatabase`和`getWritableDatabse`方法时遇到问题。

我知道它在大多数情况下返回相同的引用，我可以处理它的使用，但我不知道如果我打开了只读连接（可能内存不足）并且另一个线程想要打开一个可写连接。我想阻止写入线程，直到只读连接关闭，然后尝试打开可写连接。

你是怎样做的？这可能只能在 Java 中通过一些线程锁定来完成，但不确定应该使用哪些方法。

PS如果我遗漏了什么 - 请随时告诉我应该如何以另一种方式完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:28:19.070

我过去也遇到过同样的问题，同步就是答案。简单地说，就是在databasehelper实例上同步。或者你可以做的是为getWritableDatabase创建一个包装器方法，并在方法声明中使用synchronized关键字。然后永远不要调用 getReadableDatabase ，而只是调用包装器方法。由于 getReadableDB 和 getWritableDB 提供相同的参考，因此这样做是安全的。有道理？

# php - 面向对象的 PHP 数据库访问问题

> ID：12444802
> 
> 赞同：2
> 
> 时间：2012-09-16T06:13:48.773
> 
> 标签：php, mysql

坦率地说，我对面向对象编程很陌生。我更熟悉诸如 C 之类的过程代码。

我开始设计一个以php为底层框架的网站。最初，我坚持采用程序化风格设计。这很快就变得相当麻烦。不用说，我想使用面向对象的方法。我看到了很多这样做的机会。

特别是在访问数据库方面 - 在这种情况下是 MySQL。

现在，我正在决定如何设计一个数据库类。显然，它将通过 PHP 的 PDO 合并一个连接。但我被困在课堂上除此之外的内容上。它显然可以包含其他方法，但到什么程度？例如，我是否还应该包含 MySQL 查询、插入、删除等功能？这些是我需要定期调用的常用函数，所以我不应该将它们全部包含在同一个类中吗？否则，如果我需要创建四个或更多不同的类，使用类似乎几乎没有意义？

哪位有经验的，请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:05:26.747

我喜欢编写自己的简单包装类的想法。如果在将来的某个时候您想要切换到不同的数据库库，那么您所要做的就是更改包装类中的代码。

在我工作的地方，我们为 php mysql 函数编写了一个包装类。我们有生产和测试服务器，主要的 mysql 服务器位于生产中，另外还有带有复制的服务器。我们的包装器确定连接到何处以提取数据 - 在某些情况下它连接到复制器仅用于选择。我们可能想要连接的每个数据库的凭据都在包装器中定义，从而简化了使用。类方法是执行 sql，获取一行或所有行并转储到数组中，转义数据，返回最后一个 id 等。还有一种方法可以为每个 SQL 语句附加一些有用信息的注释（如执行查询的文件）以方便调试。

将数据放入数组的示例：

```
$db = MysqlWrapper('db_name');
$data = $db->fetchAll($query); 
```

稍后在相同的代码中，我们可以使用相同的实例发出更新或插入。

```
$db->execute($query); 
```

# stackmob - 在 StackMob 上设置自定义域

> ID：12444803
> 
> 赞同：0
> 
> 时间：2012-09-16T06:14:06.730
> 
> 标签：stackmob

StackMob 允许您设置自定义域。您所要做的就是为指向 stackmobapp.com 的通配符“*”添加 CNAME 记录

我在 24 小时前在我的域名注册商上设置了它，但它仍然无法解决。当我输入 dev.mydomain.com 时，它将转到我的网络托管服务提供商服务器而不是 stackmob 的服务器

我保持我的名称服务器相同（ns1.myisp.com 和 ns2.myisp.com）。

我必须将这些更改为其他内容吗？

更新：已经一个多星期了，我的 dev.domain.com 不去 stackmob。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:09:01.223

您不必更改您的名称服务器。可能 dns 更改尚未传播到您的名称服务器。已知需要长达 72 小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:09:40.860

我发现我必须使用我的注册商名称服务器，而不是我自己的，才能向其中添加 A/CNAME 记录。

但是 stackmob 有一个问题，[http](http://example.com) ://example.com不转发到 stackmob，只有 www.example.com 和 dev.example.com

# bash - 如何在 bash 中的 grep 结果之前/之后获取行？

> ID：12444808
> 
> 赞同：190
> 
> 时间：2012-09-16T06:15:04.953
> 
> 标签：bash, shell, ubuntu

我想要一种在给定文本中搜索的方法。为此，我使用`grep`：

```
grep -i "my_regex" 
```

这样可行。但鉴于这样的数据：

```
This is the test data
This is the error data as follows
. . . 
. . . .
. . . . . . 
. . . . . . . . .
Error data ends 
```

一旦我找到这个词`error`（使用`grep -i error data`），我希望找到这个词后面的 10 行`error`。所以我的输出应该是：

```
. . . 
. . . .
. . . . . . 
. . . . . . . . .
Error data ends 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2012-09-16T06:16:52.310

您可以使用`-B`and`-A`打印匹配前后的行。

```
grep -i -B 10 'error' data 
```

将打印匹配前的 10 行，包括匹配行本身。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2017-07-12T08:12:55.777

这会在匹配行之后打印 10 行尾随上下文

```
grep -i "my_regex" -A 10 
```

如果您需要在匹配行之前打印 10 行前导上下文，

```
grep -i "my_regex" -B 10 
```

如果您需要打印 10 行前导和尾随输出上下文。

```
grep -i "my_regex" -C 10 
```

**例子**

```
user@box:~$ cat out 
line 1
line 2
line 3
line 4
line 5 my_regex
line 6
line 7
line 8
line 9
user@box:~$ 
```

**普通的 grep**

```
user@box:~$ grep my_regex out 
line 5 my_regex
user@box:~$ 
```

**grep 完全匹配的行和之后的 2 行**

```
user@box:~$ grep -A 2 my_regex out   
line 5 my_regex
line 6
line 7
user@box:~$ 
```

**grep 完全匹配的行和之前的 2 行**

```
user@box:~$ grep -B 2 my_regex out  
line 3
line 4
line 5 my_regex
user@box:~$ 
```

**grep 精确匹配行和前后 2 行**

```
user@box:~$ grep -C 2 my_regex out  
line 3
line 4
line 5 my_regex
line 6
line 7
user@box:~$ 
```

**参考：手册页 grep**

```
-A num
--after-context=num

    Print num lines of trailing context after matching lines.
-B num
--before-context=num

    Print num lines of leading context before matching lines.
-C num
-num
--context=num

    Print num lines of leading and trailing output context. 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-16T06:17:26.170

执行此操作的方法位于手册页顶部附近

```
grep -i -A 10 'error data' 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-16T06:17:24.870

试试这个：

```
grep -i -A 10 "my_regex" 
```

-A 10 表示，匹配后打印十行到“my_regex”

# facebook - 脸书应用程序中的错误

> ID：12444809
> 
> 赞同：0
> 
> 时间：2012-09-16T06:15:11.280
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用 javascript sdk 来更新 facebook 中的状态。这是我的代码

```
window.fbAsyncInit = function() {
FB.init({
  appId      : 'id', // App ID
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

// Additional initialization code heres

   FB.login(function(response) {
  if (response.authResponse) {
 console.log('Welcome!  Fetching your information.... ');
 FB.api('/me', function(response) {
   console.log('Good to see you, ' + response.name + '.');
 });
   } else {
 console.log('User cancelled login or did not fully authorize.')
   }
});
   };

   // Load the SDK Asynchronously
     (function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "http://connect.facebook.net/en_US/all.js";
      ref.parentNode.insertBefore(js, ref);
      }(document));
   </script> 
```

但是我在打开此页面时收到一条错误消息。请提供解决方案来解决此问题。或者任何其他人都可以共享运行正常的应用程序 ID

# c - 为什么我的并行代码比顺序代码慢？

> ID：12444815
> 
> 赞同：3
> 
> 时间：2012-09-16T06:16:58.317
> 
> 标签：c, optimization, parallel-processing, openmp, mergesort

我已经在 C 中实现了一个并行代码，用于使用 OPENMP 进行合并排序。我得到了 3.9 秒的加速，这比相同代码的顺序版本（我得到 3.6）要慢得多。我正在尝试将代码优化到可能的最佳状态，但无法提高速度。你能帮忙解决这个问题吗？谢谢。

```
 void partition(int arr[],int arr1[],int low,int high,int thread_count)
 {
int tid,mid;

#pragma omp if
if(low<high)
{
    if(thread_count==1)
    {
            mid=(low+high)/2;
            partition(arr,arr1,low,mid,thread_count);
            partition(arr,arr1,mid+1,high,thread_count);
                sort(arr,arr1,low,mid,high);
    }
    else
    {
        #pragma omp parallel num_threads(thread_count) 
        {
                mid=(low+high)/2;
                #pragma omp parallel sections  
                {
                    #pragma omp section
                    {
                        partition(arr,arr1,low,mid,thread_count/2);
                        }
                    #pragma omp section
                    {   
                        partition(arr,arr1,mid+1,high,thread_count/2);
                    }
                }
        }
        sort(arr,arr1,low,mid,high);

    }
}
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:28:55.667

正如正确指出的那样，您的代码中有几个错误会阻止其正确执行，所以我首先建议检查这些错误。

无论如何，仅考虑 OpenMP 性能如何随线程扩展，也许基于任务指令的实现会更好，因为它克服了先前答案已经指出的限制：

> 由于sections指令只有两个部分，我认为你不会从在并行子句中产生多于两个的线程中获得任何好处

您可以在下面找到此类实现的跟踪：

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <sys/time.h>

void getTime(double *t) {

  struct timeval tv;

  gettimeofday(&tv, 0);
  *t = tv.tv_sec + (tv.tv_usec * 1e-6);
}

int compare( const void * pa, const void * pb ) {

  const int a = *((const int*) pa);
  const int b = *((const int*) pb);

  return (a-b);
}

void merge(int * array, int * workspace, int low, int mid, int high) {

  int i = low;
  int j = mid + 1;
  int l = low;

  while( (l <= mid) && (j <= high) ) {
    if( array[l] <= array[j] ) {
      workspace[i] = array[l];
      l++;
    } else {
      workspace[i] = array[j];
      j++;
    }
    i++;
  }
  if (l > mid) {
    for(int k=j; k <= high; k++) {
      workspace[i]=array[k];
      i++;
    }
  } else {
    for(int k=l; k <= mid; k++) {
      workspace[i]=array[k];
      i++;
    }
  }
  for(int k=low; k <= high; k++) {
    array[k] = workspace[k];
  }
}

void mergesort_impl(int array[],int workspace[],int low,int high) {

  const int threshold = 1000000;

  if( high - low > threshold  ) {
    int mid = (low+high)/2;
    /* Recursively sort on halves */
#ifdef _OPENMP
#pragma omp task 
#endif
    mergesort_impl(array,workspace,low,mid);
#ifdef _OPENMP
#pragma omp task
#endif
    mergesort_impl(array,workspace,mid+1,high);
#ifdef _OPENMP
#pragma omp taskwait
#endif
    /* Merge the two sorted halves */
#ifdef _OPENMP
#pragma omp task
#endif
    merge(array,workspace,low,mid,high);
#ifdef _OPENMP
#pragma omp taskwait
#endif
  } else if (high - low > 0) {
    /* Coarsen the base case */
    qsort(&array[low],high-low+1,sizeof(int),compare);
  }

}

void mergesort(int array[],int workspace[],int low,int high) {
  #ifdef _OPENMP
  #pragma omp parallel
  #endif
  {
#ifdef _OPENMP
#pragma omp single nowait
#endif
    mergesort_impl(array,workspace,low,high);
  }
}

const size_t largest = 100000000;
const size_t length  = 10000000;

int main(int argc, char *argv[]) {

  int * array = NULL;
  int * workspace = NULL;

  double start,end;

  printf("Largest random number generated: %d \n",RAND_MAX);
  printf("Largest random number after truncation: %d \n",largest);
  printf("Array size: %d \n",length);
  /* Allocate and initialize random vector */
  array     = (int*) malloc(length*sizeof(int));
  workspace = (int*) malloc(length*sizeof(int));
  for( int ii = 0; ii < length; ii++)
    array[ii] = rand()%largest;
  /* Sort */  
  getTime(&start);
  mergesort(array,workspace,0,length-1);
  getTime(&end);
  printf("Elapsed time sorting: %g sec.\n", end-start);
  /* Check result */
  for( int ii = 1; ii < length; ii++) {
    if( array[ii] < array[ii-1] ) printf("Error:\n%d %d\n%d %d\n",ii-1,array[ii-1],ii,array[ii]);
  }
  free(array);
  free(workspace);
  return 0;
} 
```

请注意，如果您寻求性能，您还必须保证递归的基本情况足够粗略，以避免由于递归函数调用而产生的大量开销。除此之外，我建议对您的代码进行概要分析，以便您可以很好地提示哪些部分真正值得优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T16:16:14.627

花了一些时间弄清楚，这有点尴尬，因为当你看到它时，答案是如此简单。

就问题而言，该程序无法正常工作，而是在某些运行中随机重复某些数字并丢失其他数字。这似乎是一个完全并行的错误，在使用变量 thread_count == 1 运行程序时不会出现。

pragma "parallel section" 是一个组合的 parallel 和 section 指令，在这种情况下，这意味着它在前一个并行区域内开始第二个并行区域。其他并行区域内的并行区域很好，但我认为大多数实现在遇到嵌套并行区域时不会给你额外的线程。

解决方法是更换

```
 #pragma omp parallel sections 
```

和

```
 #pragma omp sections 
```

在此修复后，程序开始给出正确答案，并使用两个核心系统和一百万个数字来计时以下结果。

一根线：

```
time taken: 0.378794 
```

两个线程：

```
time taken: 0.203178 
```

由于sections指令只有两个部分，我认为在parallel子句中产生多于两个的线程不会有任何好处，所以改变 num_threads(thread_count) -> num_threads(2)

但是由于我尝试的至少两个实现不能为嵌套的并行区域生成新线程，因此该程序不能扩展到两个以上的线程。

# c# - 如何在 XAML 页面之间传递值（参数）？

> ID：12444816
> 
> 赞同：39
> 
> 时间：2012-09-16T06:17:03.700
> 
> 标签：c#, wpf, xaml, windows-8, windows-phone

*之前也有人问过类似的问题，但这个问题试图探索更多的选择和传递复杂对象的能力。*

问题是如何传递参数，但它确实需要分成三个部分..

1.  在 XAML 应用程序的页面之间导航时，如何传递参数？
2.  使用 Uri 导航和手动导航有什么区别？
3.  使用 Uri 导航时如何传递对象（不仅仅是字符串）？

**Uri 导航示例**

```
page.NavigationService.Navigate(new Uri("/Views/Page.xaml", UriKind.Relative)); 
```

**手动导航示例**

```
page.NavigationService.Navigate(new Page()); 
```

这个问题的答案适用于 WP7、silverlight、WPF 和 Windows 8。

注意：Silverlight 和 Windows8 之间存在差异

*   Windows Phone：页面导航到使用 Uri 和作为查询字符串或实例传递的数据
*   [Windows 8](http://mikaelkoskinen.net/winrt-xaml-navigating-from-page-to-page-how-it-differs-from-windows-phone-7/)：通过将类型和参数作为对象传递来导航到页面

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-09-16T06:17:03.700

# 传递参数的方法

**1.使用查询字符串**

您可以通过查询字符串传递参数，使用此方法意味着必须将您的数据转换为字符串并对它们进行 url 编码。您应该只使用它来传递简单的数据。

导航页面：

```
page.NavigationService.Navigate(new Uri("/Views/Page.xaml?parameter=test", UriKind.Relative)); 
```

目标页面：

```
string parameter = string.Empty;
if (NavigationContext.QueryString.TryGetValue("parameter", out parameter)) {
    this.label.Text = parameter;
} 
```

**2\. 使用 NavigationEventArgs**

导航页面：

```
page.NavigationService.Navigate(new Uri("/Views/Page.xaml?parameter=test", UriKind.Relative));

// and ..

protected override void OnNavigatedFrom(NavigationEventArgs e)
{
    // NavigationEventArgs returns destination page
    Page destinationPage = e.Content as Page;
    if (destinationPage != null) {

        // Change property of destination page
        destinationPage.PublicProperty = "String or object..";
    }
} 
```

目标页面：

```
// Just use the value of "PublicProperty".. 
```

**3.使用手动导航**

导航页面：

```
page.NavigationService.Navigate(new Page("passing a string to the constructor")); 
```

目标页面：

```
public Page(string value) {
    // Use the value in the constructor...
} 
```

# Uri 和手动导航的区别

我认为这里的主要区别是应用程序生命周期。出于导航原因，手动创建的页面会保存在内存中。[在此处](http://www.paulstovell.com/wpf-navigation)阅读更多相关信息。

# 传递复杂对象

您可以使用方法一或二来传递复杂对象（推荐）。您还可以将自定义属性添加到`Application`类或将数据存储在`Application.Current.Properties`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-11T23:56:58.473

对于那些仍然有问题的人，因为他们没有 onNavigatedTo 函数来覆盖和使用框架进行导航，这就是我使用的。

在您从中导航的页面中：假设此页面称为“StartPoint.xaml”

```
NameOfFrame.Navigate(new System.Uri("Destination.xaml", UriKind.RelativeOrAbsolute), ValueToBePassed); 
```

*   在我没有尝试过对象的情况下，ValueToBePassed 是一个简单的字符串。（我的意思是简单的字符串`string code = "hello world";`）

在 Destination.xaml 页面上：创建页面加载事件。

*   这可以通过转到页面的属性窗口 > 事件 > 加载 > 双击加载旁边的字段来自动生成函数并在代码隐藏中转到它来完成。

Destinations.xaml > 加载

```
private string x;

private void Page_Loaded(object sender, RoutedEventArgs e)
{
   x = StartPoint.ValueToBePassed;
   //Call functions or do other stuff while im here
   //e.g. if (x != "") { please work you damn code }
   //     else { go to sleep and forget about the worries }
} 
```

# network-programming - 使用 UDPConn 请求/响应会话

> ID：12444818
> 
> 赞同：1
> 
> 时间：2012-09-16T06:17:15.323
> 
> 标签：network-programming, udp, go

我正在尝试实现以下 UDP 协议，但我在弄清楚我应该如何处理这个问题时遇到了一些麻烦。

该协议规定我应该将特定的 UDP 数据包发送到某个服务器，之后服务器将*流式传输*（几个相关的 UDP 数据包）向我返回响应，也作为 UDP 数据包。我已经成功地使用以下代码发送了 UDP 数据包：

```
connection, error := net.DialUDP("udp", nil, endpoint)
...
if written, error := connection.Write(query.ToBytes()); error != nil {
    ...
} else {
    log.Printf("Successfully wrote %d bytes to %s", written, connection.RemoteAddr())
} 
```

当我使用 Wireshark 并查看线路上发生了什么时，它看起来好像发送数据包很好（这里唯一的问题是我从来没有得到服务器的回复，但这与这个问题无关）。

在这种情况下，我处理服务器回复的最佳方式是什么？我可以使用先前建立`connection`的来读取服务器响应（这对我来说似乎不太可能，因为它是 UDP 无连接）还是应该使用`net.ListenUDP(...)`在正确的本地地址和端口上建立服务器来读取服务器发回给我的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:41:32.120

该协议的意图显然是您只需使用相同的 UDP 套接字来接收您用来发送请求的回复。如果您有客户端防火墙，则必须在发送之前显式打开 UDP 端口并将 UDP 套接字绑定到该端口。否则只是让系统选择本地端口，根本不绑定。

短语“与初始数据包建立的端口相同”具有误导性。它们是你的话，还是协议规范的？当您进行第一次发送时真正发生的是，如果您还没有绑定套接字，它会自动绑定到系统选择的端口，就像您将它绑定到端口 0 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:24:30.320

由于特定的协议设计，不可能知道服务器将在哪个端口发送其回复数据包。在再次查看数据包转储后，我注意到服务器实际上*确实*回复了，只有客户端立即回复了一条 ICMP 消息说`Destination port unreachable`。所以服务器试图回复，但它不能，因为客户端不会接受该端口上的数据包。

为了解决这个问题，我曾经`net.ListenUDP`在客户端使用已建立的连接的本地地址发送初始数据包后立即侦听传入的数据包：

```
incomingConnection, _ := net.ListenUDP("udp", connection.LocalAddr().(*net.UDPAddr))
log.Printf("Listening for packets on %s", incomingConnection.LocalAddr())
defer incomingConnection.Close() 
```

之后`incomingConnection`可以用作`Reader`- 例如 - 读取服务器正在发送的数据包。

# ios - iOS 是否有每月重置的每月订阅模式？

> ID：12444821
> 
> 赞同：1
> 
> 时间：2012-09-16T06:17:40.950
> 
> 标签：ios, subscription, threshold

我正在启动一个我想每月免费提供的应用程序，直到达到一定的使用水平。如果用户超过阈值，该应用程序将向他们收取每月订阅费用。但是，我不希望订阅每月自动续订。相反，我希望在下个月重置使用级别，如果用户未超过阈值，则该应用程序在该月是免费的。

关于如何实现这一点的任何创造性想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:22:47.927

Yes, look at Apple [Overview of In-App Purchase](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html):

> **Non-renewing subscriptions** are a mechanism for creating products with a limited duration. Non-renewing subscriptions differ from auto-renewable subscriptions in a few key ways: The term of the subscription is not declared when you create the product in iTunes Connect; your application is responsible for providing this information to the user. In most cases, you would include the term of the subscription in the description of your product. Non-renewing subscriptions may be purchased multiple times (like a consumable product) and are not automatically renewed by the App Store. You are responsible for implementing the renewal process inside your application. Specifically, your application must recognize when the subscription has expired and prompt the user to purchase the product again. You are required to deliver non-renewing subscriptions to all devices owned by the user. Non-renewing subscriptions are not automatically synchronized to all devices by Store Kit; you must implement this infrastructure yourself. For example, most subscriptions are provided by an external server; your server would need to implement a mechanism to identify users and associate subscription purchases with the user who purchased them.

You can track the user usage and ask him to buy your *Non-renewing subscriptions** if the usage exceeds the threshold. Then at the end of the subscription you can check it again and ask him to pay again for the next month.

I would consider using **renewable subscriptions** for users that know that their usage will always exceed the threshold.

# c# - 使用 C# 将文本框中的数据写入 ASP.net 中的文本文件

> ID：12444826
> 
> 赞同：1
> 
> 时间：2012-09-16T06:18:58.510
> 
> 标签：c#, asp.net, writetofile

我有一个文本框，用户可以在其中输入他们的电子邮件，我想要做的是当他们点击提交按钮时。该电子邮件将保存到名为 emails.txt 的文本文件（在我的服务器上）中

我设法使用 System.IO 然后使用 File.WriteAll 方法使其工作。但是我想这样做，以便它将电子邮件添加到列表中（在新行上），而不是仅仅覆盖那里已经存在的内容。

我见过有人提到使用 Append，但我不太明白如何让它工作。

这是我当前的代码（覆盖而不是附加）。

```
public partial class _Default : Page
{
    private string path = null;

    protected void Page_Load(object sender, EventArgs e)
    {
        path = Server.MapPath("~/emails.txt");
    }

    protected void emailButton_Click(object sender, EventArgs e)
    {
        File.WriteAllText(path, emailTextBox.Text.Trim());
        confirmEmailLabel.Text = "Thank you for subscribing";
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T06:27:44.940

您可以使用[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)来处理文本文件。模式中的`WriteLine`方法`true`每次都会在新行中附加您的电子邮件....

```
using (StreamWriter writer = new StreamWriter("email.txt", true)) //// true to append data to the file
{
    writer.WriteLine("your_data"); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T06:25:26.617

从官方[MSDN 文档](http://msdn.microsoft.com/en-us/library/3zc0w663.aspx)：

```
using (StreamWriter w = File.AppendText("log.txt"))
{
   MyWriteFunction("Test1", w);
   MyWriteFunction("Test2", w);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T06:26:18.997

`StreamWriter`在追加模式下使用。用 . 写入您的数据`WriteLine(data)`。

```
using (StreamWriter writer = new StreamWriter("emails.txt", true))
{
    writer.WriteLine(email);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T06:22:49.873

似乎是一个非常简单的问题，答案非常简单：[打开现有文件，附加一行](https://stackoverflow.com/questions/2837020/open-existing-file-append-a-single-line)

如果您发布当前代码，我们可以将其修改为追加而不是覆盖。

# php - 我想将 ajax 加载 gif 添加到我的网站，但我的代码不起作用

> ID：12444829
> 
> 赞同：0
> 
> 时间：2012-09-16T06:19:22.187
> 
> 标签：php, html, ajax, gif, loader

我正在为我的网站[http://notes-store.com/制作上传器](http://notes-store.com/)

我想在`.gif`使用 AJAX 加载带有子类别选项的选择框时显示加载图像。

我当前的代码：

```
function category_change(kuchbhi) {
    var catID = $(kuchbhi).val();   
    $.ajax({
        type: "GET",
        url: "subCategory.php?category="+catID,
        beforeSend: function () {
             $("#loder").html('<img src="images/loader.gif" /> Now loding...');
        },
        success: function(data){
            $('#select3').html(data);
        }
     });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:23:58.333

Why not add it when function starts and remove it when success is called:

```
function category_change(kuchbhi) {
    $("#loder").html('<img src="images/loader.gif" /> Now loding...');
    var catID = $(kuchbhi).val();   
    $.ajax({
        type: "GET",
        url: "subCategory.php?category="+catID,
        success: function(data){
            $('#select3').html(data);
            $("#loder").html('');
        }
    });
} 
```

Note: your selector is `#loder` and not `#loader`

# c# - 当 TextBlock 放置在 ScrollViewer 中时在 TextBlock 上显示边框

> ID：12444830
> 
> 赞同：1
> 
> 时间：2012-09-16T06:19:30.327
> 
> 标签：c#, wpf, user-interface

我有 WPF 应用程序，在我的 WPF 表单之一中有 TextBlock。我在 ScrollViewer 中放置了 TextBlock 以提供滚动功能。我想要 TextBlock 上的边框，所以我在`XAML`.

```
<ScrollViewer Margin="230,32,12,147">
    <Border BorderThickness="1" BorderBrush="Black">
          <TextBlock Name="textBlock1"></TextBlock>
      </Border>
 </ScrollViewer> 
```

滚动条 GUI 显示如下。

![在此处输入图像描述](../Images/4b6cecd413c9122e8aa0c0e296ec327c.png)

向下滚动到 TextBlock 时显示底部边框。用户体验不适合这种设计。所以，我尝试了下面的代码，但没有显示边框。

```
<Border BorderThickness="1" BorderBrush="Black">
    <ScrollViewer Margin="230,32,12,147">
          <TextBlock Name="textBlock1"></TextBlock>
     </ScrollViewer>
 </Border> 
```

TextBlock 放置在 ScrollViewer 中时如何显示边框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T06:43:41.187

在 ScrollViewer 控件中设置边框！

```
<ScrollViewer Margin="230,32,12,147" BorderThickness="5">
      <TextBlock Name="textBlock1"></TextBlock>
 </ScrollViewer> 
```

在属性窗口中，展开`Other`组并设置`BorderThickness`

下一个代码运行良好：

```
<ScrollViewer Height="116"  Margin="115,112,0,0" Width="269">
        <Border BorderBrush="Silver" BorderThickness="5" Height="100" Width="200">
            <TextBlock Height="69" Name="textBlock1" Text="TextBlock" />
        </Border>
    </ScrollViewer> 
```

![在此处输入图像描述](../Images/37b80383761c0816315785b47969c10f.png)

外边框的代码示例：

```
<Border BorderBrush="Silver" BorderThickness="5" Height="100" HorizontalAlignment="Left" Margin="167,104,0,0" Name="border1" VerticalAlignment="Top" Width="200">
        <ScrollViewer Height="83" Name="sv" Width="184">
            <TextBlock Name="textBlock1" Text="TextBlock TextBlockTextBlockTextBlock TextBlock TextBlock TextBlock TextBlock TextBlockTextBlockTextBlock TextBlock TextBlock TextBloc TextBlock TextBlockTextBlockTextBlock TextBlock TextBlock TextBloc TextBlock TextBlockTextBlockTextBlock TextBlock TextBlock TextBloc" TextWrapping="Wrap" />
        </ScrollViewer>
    </Border> 
```

![在此处输入图像描述](../Images/2bd92746780ac306b772c1b61d23539c.png)

# c++ - 从双端队列中删除时出错

> ID：12444833
> 
> 赞同：0
> 
> 时间：2012-09-16T06:20:11.127
> 
> 标签：c++, stl, deque

我有一个`std::deque<CustomType>`，我正在尝试删除一个我不知道其位置的成员。因此，我首先找到它，然后将其删除。

```
/* 
  Remove from - members, which is the private variable of std::deque<User> type
*/
void Group::remove_member(User u) {  
    if(this->is_member(u)) {
           std::deque<User>::iterator iter;
           iter = std::find(this->members.begin(), this->members.end(), u);
           if(iter != this->members.end()) {
                this->members.erase(iter);
           }
     }
} 
```

但是，编译器 (GCC) 抛出了一个错误，似乎缺少运算符重载。

```
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/algorithm:62,
from Group.cpp:4:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h: In function ‘_RandomAccessIterator std::__find(_RandomAccessIterator, _RandomAccessIterator, const _Tp&, std::random_access_iterator_tag) [with _RandomAccessIterator = std::_Deque_iterator<User, User&, User*>, _Tp = User]’:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h:4224:   instantiated from ‘_IIter std::find(_IIter, _IIter, const _Tp&) [with _IIter = std::_Deque_iterator<User, User&, User*>, _Tp = User]’
Group.cpp:36:   instantiated from here
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h:174: error: no match for ‘operator==’ in ‘__first.std::_Deque_iterator<_Tp, _Ref, _Ptr>::operator* [with _Tp = User, _Ref = User&, _Ptr = User*]() == __val’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h:178: error: no match for ‘operator==’ in ‘__first.std::_Deque_iterator<_Tp, _Ref, _Ptr>::operator* [with _Tp = User, _Ref = User&, _Ptr = User*]() == __val’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h:182: error: no match for ‘operator==’ in ‘__first.std::_Deque_iterator<_Tp, _Ref, _Ptr>::operator* [with _Tp = User, _Ref = User&, _Ptr = User*]() == __val’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h:186: error: no match for ‘operator==’ in ‘__first.std::_Deque_iterator<_Tp, _Ref, _Ptr>::operator* [with _Tp = User, _Ref = User&, _Ptr = User*]() == __val’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h:194: error: no match for ‘operator==’ in ‘__first.std::_Deque_iterator<_Tp, _Ref, _Ptr>::operator* [with _Tp = User, _Ref = User&, _Ptr = User*]() == __val’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h:198: error: no match for ‘operator==’ in ‘__first.std::_Deque_iterator<_Tp, _Ref, _Ptr>::operator* [with _Tp = User, _Ref = User&, _Ptr = User*]() == __val’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h:202: error: no match for ‘operator==’ in ‘__first.std::_Deque_iterator<_Tp, _Ref, _Ptr>::operator* [with _Tp = User, _Ref = User&, _Ptr = User*]() == __val’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T06:31:21.280

见[我的评论](https://stackoverflow.com/questions/12444833/error-while-removing-from-deque#comment16733641_12444833)。

> 我有一种感觉你没有宣布`bool User::operator==(const User&)`

该错误告诉您它试图`*iterator == ...`在`std::find`. 然而，问题是你没有`operator==`为`User`. 尝试在内部声明一个成员函数`User`，如下所示...

```
bool operator==(const User&); 
```

现在，定义它以在 s 之间提供一些有意义的语义相等`User`，否则`std::find`不知道如何比较它们。

* * *

作为旁注，为什么不`Group::remove_member`采取`const User&`而不是`User`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T06:36:41.000

就像提到的@oldrinb 一样，您需要明确说明如何测试两个`User`类的相等性。否则`find`算法将无法找到您要查找的项目。这是通过覆盖`==`操作符来完成的。

```
#include <iostream>
#include <deque>
#include <algorithm>

using namespace std;

class MyCustomClass{
  public:
    MyCustomClass(int id) : id_(id) { }

   // Would produce the same error without this
   bool operator==(const MyCustomClass& b){
     return id_ == b.id_;
   }

   int id(){ return id_; }

  private:
    int id_;
};

int main(void){
  deque<MyCustomClass> q;
  q.push_back(MyCustomClass(1));
  q.push_back(MyCustomClass(2));
  q.push_back(MyCustomClass(3));
  deque<MyCustomClass>::iterator it = 
    find(q.begin(), q.end(), MyCustomClass(2));

  if ( it != q.end() ){
    printf("Found\n");
    q.erase(it);
  }else{
    printf("Not Found!\n");
  }

  for(it = q.begin(); it != q.end() ; it++)
    printf("%d ", it->id());

  printf("\n");

  return 0;
} 
```

# r - R error when calculating log rates of returns on portfolios (ETFs)

> ID：12444834
> 
> 赞同：1
> 
> 时间：2012-09-16T06:20:36.380
> 
> 标签：r, error-handling

I have tried to calculate the log rate of return for a world index (labled acw) portfolio and a country index portfolio (labled chi). The world index works but the country index gives me the error "only 0's may be mixed with negative subscripts". I have combed the data and there are no zeros or negative numbers in it. I'm going insane trying to work it out. I am learning R for the first time so it is probably a very basic problem but I can't find an answer anywhere online. Here is the code,

```
> data <- read.table("C:/Documents and Settings/Emma/My Documents/data.csv",header=T,sep=",")
> data <- data.frame(data)

> td<-length(data$date)
> t<-td-1

> acwr<-250*log(data$acw[2:td]/data$acw[1:(td-1)])
> chir<-250*log(data$chi[2:td]/data$chi[1:(td-1)])
Error in data$chi[1:(td - 1)] : 
  only 0's may be mixed with negative subscripts
> traceback()
No traceback available 
```

Any advice or help would be much appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:58:15.753

当然，这一切都是基于猜测......

但我觉得....

您的数据没有`date`列。您的根本失败是没有检查这一点。

因此`td`为零。你的第二个失败是没有检查这个。

然后你尝试下标`data$acw[1:(td-1)]`。你说，这行得通，因为它不会返回错误。但是你没有检查这个。我猜它返回 NULL 因为您的数据没有`acw`列。NULL 也是如此`data$acw`，R 不在乎你如何尝试和子集 NULL。你得到 NULL。你的第三个失败是没有检查这个。

然后你尝试下标`data$chi[1:(td-1)]`。这失败了，因为`data$chi`存在，并且：

```
> 1:(td-1)
[1]  1  0 -1 
```

所以你的下标里面有+1和-1。

在 R 下标中，这是说要获取元素 1 而不是元素 1（零无关紧要）。所以它失败了。

`summary(data)`如果您已经完成或向我们展示了数据文件，所有这些都是显而易见的。目前，在您向我们展示这些东西之前，这只是猜测，它可以为我节省 20 分钟。

尝试将您的 R 分解为元素，并检查它们是否都是您所期望的。作为一种解释型语言，R 让这一切变得简单。

当然，您真正应该做的不是在尝试使用`data$date`. 有一个`nrow`功能。

# java - 计算并显示数组中值的百分比

> ID：12444846
> 
> 赞同：0
> 
> 时间：2012-09-16T06:25:32.833
> 
> 标签：java, arrays, percentage

这是我的要求：

1.  从用户（n）处读入一个整数
2.  声明一个大小为 n 的浮点数数组
3.  用 0 到 100 之间的随机浮点数填充此数组。
4.  计算并显示数组中至少为 70 的值的百分比

我不知道如何做最后一部分。

```
import java.util.Random;
import java.util.Scanner;
/**
 *
 *
 */
public class Mo {

    /**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
    System.out.print("please enter a number: ");
    Scanner sc = new Scanner(System.in);
    int n = sc.nextInt();

    float[] values;
    values = new float[n];

    int[] counters;
    counters = new int[n];

    Random r = new Random();

    for(int i=0; i < values.length; i++)
    {
        values[i] = r.nextInt(100);
        System.out.print(values[i] + " " );

    }
    System.out.println();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:29:45.840

计算 <70 的值的数量，然后将此计数除以总计数 if (values[i] >= 70 ) count++;

在为之外

计数/值.长度*100

# javascript - AngularJS: why empty model fields are removed from object?

> ID：12444849
> 
> 赞同：7
> 
> 时间：2012-09-16T06:26:36.980
> 
> 标签：javascript, angularjs

In my application I have a model attached to a form which is something like that:

```
$scope.location = { description: "my descriptive description", address: "blah" } 
```

Cleaning the field "description" in the form, which is bound to ng-model="location.description", removes the field from $scope.location which becomes:

```
$scope.location = { address: "blah" } 
```

Now I would like it to retain the "description" field. What can I do in order to achieve this behaviour?

Thanks for your help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:17:09.373

一种可能性是使用 ng-change 指令：

```
<input ng-model="desc" ng-change="setDescription()"> 
```

在你的控制器中：

```
$scope.setDescription = function(){
    $scope.location.description = $scope.desc ? $scope.desc: "default" 
} 
```

基于 Kozlowski 的评论：http: [//jsfiddle.net/myMyQ/2/](http://jsfiddle.net/myMyQ/2/)

# java - 为了在过滤器中获得休眠会话，在 applicationContext.xml 中写什么

> ID：12444850
> 
> 赞同：2
> 
> 时间：2012-09-16T06:27:05.373
> 
> 标签：java, jakarta-ee, spring-mvc

我需要在 Filter for spring mvc 中初始化休眠会话，我知道我需要在 web.xml 中添加 ContextListner 但我不知道在 applicationContext.xml 文件中写什么。请指导一些教程或示例......

**详细说明：**我需要使用 spring 表单标签预填充我的表单，因为我需要在 jsp 生命周期执行中打开 HibernateSession。我创建了一个 HibernateSessionFilter 来在 jsp 中启用休眠会话。现在再次为此我需要初始化我的休眠会话。见

> sf = //不知道写什么;

在下面的代码中。我不知道如何在那里获得休眠 sessionFactory。我知道它可以通过 applicationContext.xml 完成，但无法获得所需的确切配置。

**编辑1* *** *****

现在再次回到我开始的同一个异常：

```
 org.springframework.beans.InvalidPropertyException: Invalid property 'firstname' of bean class [net.viralpatel.contact.form.Contact_$$_javassist_0]: Getter for property 'firstname' threw exception; nested exception is java.lang.reflect.InvocationTargetException
at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:845)
at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:721)
at org.springframework.validation.AbstractPropertyBindingResult.getActualFieldValue(AbstractPropertyBindingResult.java:99)
at org.springframework.validation.AbstractBindingResult.getFieldValue(AbstractBindingResult.java:219)
at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:120)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129)
at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119)
at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89)
at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005flabel_005f0(contact_005fedit_jsp.java:255)
at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005fform_005f0(contact_005fedit_jsp.java:177)
at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspService(contact_005fedit_jsp.java:126)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:761)
        ... 55 more
Caused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session
        at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)
        at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
        at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
        at net.viralpatel.contact.form.Contact_$$_javassist_0.getFirstname(Contact_$$_javassist_0.java)
        ... 60 more
Sep 16, 2012 4:36:12 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
        at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)
        at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
        at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
        at net.viralpatel.contact.form.Contact_$$_javassist_0.getFirstname(Contact_$$_javassist_0.java)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:761)
        at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:721)
        at org.springframework.validation.AbstractPropertyBindingResult.getActualFieldValue(AbstractPropertyBindingResult.java:99)
        at org.springframework.validation.AbstractBindingResult.getFieldValue(AbstractBindingResult.java:219)
        at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:120)
        at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
        at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
        at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129)
        at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119)
        at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89)
        at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
        at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
        at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005flabel_005f0(contact_005fedit_jsp.java:255)
        at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspx_meth_form_005fform_005f0(contact_005fedit_jsp.java:177)
        at org.apache.jsp.WEB_002dINF.jsp.contact_005fedit_jsp._jspService(contact_005fedit_jsp.java:126)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
        at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
        at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
        at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Sep 16, 2012 4:36:12 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [spring] in context with path [/Spring3HibernateMaven] threw exception [org.springframework.beans.InvalidPropertyException: Invalid property 'firstname' of bean class [net.viralpatel.contact.form.Contact_$$_javassist_0]: Getter for property 'firstname' threw exception; nested exception is java.lang.reflect.InvocationTargetException] with root cause 
```

我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>Spring3-Hibernate</display-name>
<welcome-file-list>
    <welcome-file>list.html</welcome-file>
</welcome-file-list>
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.css</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.js</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.gif</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.jpg</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.png</url-pattern>
</servlet-mapping>
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    <init-param>
        <param-name>sessionFactoryBeanName</param-name>
        <param-value>sessionFactory</param-value>
    </init-param>
</filter>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<filter-mapping>
    <filter-name>hibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我的联系方式：

```
package net.viralpatel.contact.form;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="CONTACTS")
public class Contact {

@Id
@Column(name="ID")
@GeneratedValue
private Integer id;

@Column(name="FIRSTNAME")
private String firstname;

@Column(name="LASTNAME")
private String lastname;

@Column(name="EMAIL")
private String email;

@Column(name="TELEPHONE")
private String telephone;

public String getEmail() {
    return email;
}
public String getTelephone() {
    return telephone;
}
public void setEmail(String email) {
    this.email = email;
}
public void setTelephone(String telephone) {
    this.telephone = telephone;
}
public String getFirstname() {
    return firstname;
}
public String getLastname() {
    return lastname;
}
public void setFirstname(String firstname) {
    this.firstname = firstname;
}
public void setLastname(String lastname) {
    this.lastname = lastname;
}
public Integer getId() {
    return id;
}
public void setId(Integer id) {
    this.id = id;
}

} 
```

我的应用过滤器：

```
private static Log log = LogFactory.getLog(HibernateSessionRequestFilter.class);

private SessionFactory sf;

 public void init(FilterConfig filterConfig) throws ServletException {
    log.debug("Initializing filter...");
    sf = //don't know what to write ;
}

} 
```

我的联系人DAO

```
@Repository
public class ContactDAOImpl implements ContactDAO {

@Autowired
private SessionFactory sessionFactory;

public void addContact(Contact contact) {
    sessionFactory.getCurrentSession().save(contact);
}

public List<Contact> listContact() {

    return sessionFactory.getCurrentSession().createQuery("from Contact")
            .list();
}

public void removeContact(Integer id) {
    Contact contact = (Contact) sessionFactory.getCurrentSession().load(
            Contact.class, id);
    if (null != contact) {
        sessionFactory.getCurrentSession().delete(contact);
    }

}

public Contact editContact(Integer id) {
    Contact contact = (Contact) sessionFactory.getCurrentSession().load(
            Contact.class, id);
    System.out.println("contact: "+contact);
    if (null != contact) {
        sessionFactory.getCurrentSession().update(contact);
    }
    return contact;
}

public Contact getContact(Integer id) {
    Contact contact = (Contact) sessionFactory.getCurrentSession().load(
            Contact.class, id);
    return contact;
}

} 
```

编辑页面的控制器渲染方法：

```
@RequestMapping(value = "/edit/{contactId}", method = RequestMethod.GET)
public ModelAndView edit(@PathVariable("contactId") Integer contactId,
        HttpServletRequest request) {
    Contact contact = contactService.getContact(contactId);

    Map<String, Object> model = new HashedMap();
    model.put("contact", contact);

    return new ModelAndView("contact_edit", model);
}

    @RequestMapping(value = "/doedit/{contactId}", method = RequestMethod.POST)
public String editContact(@PathVariable("contactId") Integer contactId) {

    contactService.editContact(contactId);

    return "redirect:/index";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T09:37:43.900

我在您的代码中发现了一个主要错误和一个小错误。

主要错误是您在 in `applicationContext.xml`（正确）和 on `spring-servlet.xml`（必须删除）上配置了两个 Hibernate 会话工厂（这种情况下是 stange 异常）。（在 xml 中有更多详细信息作为注释）

更新的`spring-servlet.xml`

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
         http://www.springframework.org/schema/mvc
         http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />
    <context:component-scan base-package="net.viralpatel.contact" />

    <bean id="jspViewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>

    <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" />

<!--
Already defined in the inner spring context, you do not need it twice

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close" p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.databaseurl}" p:username="${jdbc.username}" p:password="${jdbc.password}" />
-->

<!--
ONLY one session factory per application!!
You have configured them already in applicationContext.xml

Spring mvc application have two spring contexts, an other and an inner context.
The inner context is created by ContextLoaderListener and in your case it is described in applicationContext.xml.
The outer context is created by DispatcherServelet and in your case it is described in spring-servlet.xml.

Filters can access only the inner context, therefore the OpenSessionInViewFilter requires that the inner context contain all the hibernate stuff
The outer context can beans access the inner context.
The outer context has access to all the web stuff (not like the inner context) therefore the @Controller Beans can be only instanceated in the outer context.

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>

                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>
-->

    <tx:annotation-driven />

    <!-- JSR-303 support will be detected on classpath and enabled automatically -->
    <mvc:annotation-driven />
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

你的小错误`contact_edit.jsp`

而不是`<form:form method="post" action="add.html" commandName="contact">`使用：

```
<c:url var="updateUrl" value="/doedit/${contact.id}"/>
<form:form method="post" action="${updateUrl}" commandName="contact"> 
```

在你的这个修改之后，`editContact`我能够修改名字

```
/**
 * This is only prove that it works.
 * You should not update the contact directly in the controller (this is only a shortcut in for the example).
 * If you load and update the contact in an method that is @Transactional, than you can remove the @Transactional from this
 * controller method.
 */
@Transactional
@RequestMapping(value = "/doedit/{contactId}", method = RequestMethod.POST)
public String editContact(@PathVariable("contactId") final Integer contactId, final Contact editedContact) {

  //contactService.editContact(contactId);

    Contact contact = contactService.getContact(contactId);
    contact.setFirstname(editedContact.getFirstname()); //only first name for the example

    return "redirect:/index";
} 
```

# xml - 如何获得在 agavi 框架中创建文件的权限？

> ID：12444856
> 
> 赞同：0
> 
> 时间：2012-09-16T06:28:06.930
> 
> 标签：xml, dom, permissions, agavi

我正在使用 DOMDocument 来创建和解析 xml 文件，但是当我在 agavi 框架中使用它时，它向我显示了这个错误：

( ! ) 警告：DOMDocument::save(mci_sitemap.xml) [domdocument.save]: 无法打开流：/home/sample6/tps/app/modules/Mci/models/PrcModel.class.php 中的权限被拒绝在线531

它不允许我创建我的 xml 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T21:30:24.850

您的 Web 服务器需要写入目标目录的权限。如果您正在运行 Apache，则该用户通常被命名为 apache。如果您正在运行 IIS，则用户名会根据服务器名称而有所不同；您可以在 IIS 管理控制台中找到它。

在授予 web 根目录下的 web 服务器用户写入权限之前，您需要考虑安全性。理想情况下，您应该在 Web 根目录之外编写 xml 文件。

Agavi 在这里没有做任何不寻常的事情。

# plone - Getting skin method results in AttributeError

> ID：12444857
> 
> 赞同：0
> 
> 时间：2012-09-16T06:28:11.927
> 
> 标签：plone

When I try to call a skin method as follows:

```
portal.skin_method() 
```

it results in

```
AttributeError. 
```

I remember being able to do this in older versions of Plone.

Has something changed here?

PS: I am able to do:

```
portal.portal_skins.skin_name.skin_method() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:42:21.620

行为没有改变。

主题升级后，您的 portal_skins 注册很可能会以某种方式损坏或丢失。

*   您能否确认您可以在 ZMI > portal_skins 中看到 skin_method.py

*   您能否在 ZMI > portal_skins > 属性选项卡的当前主题皮肤列表中检查此特定皮肤文件夹是否处于活动状态？

# java - 如何在PDFBox中使用带有表单的源文档作为多页目标文档的模板

> ID：12444861
> 
> 赞同：0
> 
> 时间：2012-09-16T06:29:16.073
> 
> 标签：java, pdfbox

我在 Java 中使用 PDFBox 1.2.1，我正在尝试使用其中包含 acro 表单的单页 pdf 文档作为制作多页目标 pdf 的模板。

```
PDDocument sourceDocument = PDDocument.load(fileStream);
PDDocument targetDocument = new PDDocument();
PDDocumentCatalog sourceDocCatalog = sourceDocument.getDocumentCatalog();
PDAcroForm acroFormFromSource = sourceDocCatalog.getAcroForm();
targetDocument.getDocumentCatalog().setAcroForm(acroFormFromSource);
PDPage templatePdfPage = (PDPage) sourceDocument.getDocumentCatalog().getAllPages().get(0);

  for (int i = 0; i < 5; i++) {

    targetDocument.addPage(templatePdfPage);
    PDDocumentCatalog targetDocumentsDocumentCatalog = targetDocument.getDocumentCatalog();
    PDAcroForm acroForm = targetDocumentsDocumentCatalog.getAcroForm();
    acroForm.getField("Text1").setValue("Car " + i);
  } 
```

不幸的是，生成的目标 pdf 包含 5 页，但每个页面都有 Text1 字段，其值为“Car 4”。所以每个页面都是相同的 acro 形式。是否有可能为每个页面生成新的唯一 acro 表单，或者我的用例是否有其他可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:50:44.427

我认为问题在于您`acroFormFromSource`对所有页面使用相同的 Java 对象，因此当您在第 4 页（第 0 页到第 4 页的最后一页）上设置“Text1”字段时，它会为所有 5 页设置它。

我认为您需要为每个页面制作一个原始 PDAcroForm 的新副本。`COSDictionary( COSDictionary dict )`我怀疑制作副本的最简单方法是使用 CosDictionary ( )的复制构造函数。但是请注意，这会产生浅拷贝！

# php - wordpress 新实例将 wp-admin 重定向到旧 url

> ID：12444862
> 
> 赞同：2
> 
> 时间：2012-09-16T06:29:24.233
> 
> 标签：php, wordpress, .htaccess

出于开发目的，我将实时实例文件复制到具有不同数据库的单独子域中。我修改了子域和 .htaccess 文件的路径，包括数据库表设置更改。一切都适用于子域博客，但是当我尝试访问时

[http://dev.mysite.com/wp-admin](http://dev.mysite.com/wp-admin)

它正在重定向到

[http://www.mysite.com/login?redirect_to=http%3A%2F%2Fdev.mysite.com%2Fwp-admin%2F&reauth=1](http://www.mysite.com/login?redirect_to=http%3A%2F%2Fdev.mysite.com%2Fwp-admin%2F&reauth=1)

所以管理面板移动到根站点管理员。

我无法找出我错过了哪些设置。

非常感谢任何帮助/线索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:30:36.503

WordPress 将您的主机名硬编码在数据库中的几个位置，包括 wp_options 表中的“siteurl”和“home”。如果您在移动站点时忘记更新其中的一些，这可能会导致麻烦。

每当我移动或复制 WordPress 安装时，我都会运行这些查询：

```
# update wp_posts set guid = replace(guid, 'old.com', 'new.com');
update wp_options set option_value = replace(option_value, 'old.com', 'new.com'); 
```

在生产环境中，帖子的指南不应更改。在开发环境中，当新站点位于本地计算机上时，有时取消注释第一行是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:38:10.647

查看数据库中的`wp_options`表并确保将`siteurl`值设置为`http://dev.mysite.com/`.

您可以使用[phpMyAdmin](http://codex.wordpress.org/phpMyAdmin)，或者如果您可以直接访问数据库，您可以通过以下方式查看您的选项：

```
select * from wp_options where option_name='siteurl'; 
```

并通过以下方式更改：

```
update wp_options set option_value='http://dev.mysite.com/' where option_name='siteurl' 
```

# android - NDK。Protobuf 库链接

> ID：12444865
> 
> 赞同：1
> 
> 时间：2012-09-16T06:29:46.133
> 
> 标签：android, c++, gcc, android-ndk, protocol-buffers

再会。我用 ndk 编译了 protobuf 2.4.1 库。我从那篇文章中获取的脚本： [How to build protocol buffer by Android NDK](https://stackoverflow.com/questions/7144008/how-to-build-protocol-buffer-by-android-ndk)

但是当我尝试将我的库链接到测试 cocos2d-x 项目时，我得到了下一个错误：

```
SharedLibrary  : libgame.so
./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/protocol.pb.o: In function `promowall::RegistrationRequest const* google::protobuf::internal::dynamic_cast_if_available<promowall::RegistrationRequest const*, google::protobuf::Message const*>(google::protobuf::Message const*)':
/usr/include/google/protobuf/generated_message_reflection.h:396: undefined reference to `typeinfo for google::protobuf::Message'
./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/protocol.pb.o: In function `promowall::RegistrationResponse const* google::protobuf::internal::dynamic_cast_if_available<promowall::RegistrationResponse const*, google::protobuf::Message const*>(google::protobuf::Message const*)':
/usr/include/google/protobuf/generated_message_reflection.h:396: undefined reference to `typeinfo for google::protobuf::Message'
./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/protocol.pb.o: In function `promowall::InstallIntentRequest const* google::protobuf::internal::dynamic_cast_if_available<promowall::InstallIntentRequest const*, google::protobuf::Message const*>(google::protobuf::Message const*)':
/usr/include/google/protobuf/generated_message_reflection.h:396: undefined reference to `typeinfo for google::protobuf::Message'
./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/protocol.pb.o: In function `promowall::ItemRequest const* google::protobuf::internal::dynamic_cast_if_available<promowall::ItemRequest const*, google::protobuf::Message const*>(google::protobuf::Message const*)':
/usr/include/google/protobuf/generated_message_reflection.h:396: undefined reference to `typeinfo for google::protobuf::Message'
./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/protocol.pb.o: In function `promowall::ItemResponse const* google::protobuf::internal::dynamic_cast_if_available<promowall::ItemResponse const*, google::protobuf::Message const*>(google::protobuf::Message const*)':
/usr/include/google/protobuf/generated_message_reflection.h:396: undefined reference to `typeinfo for google::protobuf::Message'
./obj/local/armeabi/objs-debug/game_shared/__/__/Classes/protocol.pb.o:/usr/include/google/protobuf/generated_message_reflection.h:396: more undefined references to `typeinfo for google::protobuf::Message' follow
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/libgame.so] Error 1 
```

正如我从这个日志编译器中看到的，找不到消息类型。但是源文件 message.cc 和 message_lite.cc 包含在 libprotobuf.so 库中。下面列出了我的测试应用程序 Android.mk 的源代码

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := protobuf
LOCAL_MODULE_FILENAME := libprotobuf
LOCAL_SRC_FILES := libprotobuf.so

include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

LOCAL_SRC_FILES := hellocpp/main.cpp \
                   ../../Classes/AppDelegate.cpp \
                   ../../Classes/HelloWorldScene.cpp \
              ../../Classes/protocol.pb.cpp

LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes

LOCAL_SHARED_LIBRARIES := protobuf

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static cocos_extension_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) \
$(call import-module,cocos2dx) \
$(call import-module,extensions) 
```

我将非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:48:07.237

您的日志表明您没有打开 RTTI 支持。有关说明，请参阅[https://developer.android.com/ndk/guides/cpp-support#rtti](https://developer.android.com/ndk/guides/cpp-support#rtti)：

> 要在 ndk-build 中跨整个应用程序启用 RTTI，请将以下行添加到[Application.mk](https://developer.android.com/ndk/guides/application_mk.html)文件中：
> 
> ```
> APP_CPPFLAGS := -frtti 
> ```
> 
> 要为单个 ndk-build 模块启用 RTTI，请将以下行添加到其[Android.mk](https://developer.android.com/ndk/guides/android_mk.html)中的给定模块：
> 
> ```
> LOCAL_CPP_FEATURES := rtti 
> ```
> 
> 或者，您可以使用：
> 
> ```
> LOCAL_CPPFLAGS := -frtti 
> ```

# loops - 循环结束条件不起作用

> ID：12444866
> 
> 赞同：0
> 
> 时间：2012-09-16T06:29:50.687
> 
> 标签：loops, assembly, mips

我做了一个乘法程序。但问题是结束循环的条件不能正常工作。这种奇怪行为的可能原因是什么。

问题在循环标签下..

```
.text

main:

li $t0,1
li $t1,2
li $t2,3
li $t3,4

li $v0,5
syscall

move $s0,$v0
beq $s0,$t2,MULT

MULT:
li $v0,5
syscall

move $s5,$v0

li $v0,5
syscall

move $s6,$v0
move $t5,$s6

Loop:
add $a0,$s5,$s5

addi $t5,$t5,1
li $v0,1
syscall
bne $t5,$s6, Loop

j EXIT

EXIT:

li $v0,10
syscall 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:22:07.693

这：

```
addi $t5,$t5,1
...
bne $t5,$s6, Loop 
```

应该：

```
addi $t5,$t5,-1
...
bnez $t5, Loop 
```

现在您只是将 $t5 从您读取的值数到无穷大，并且永远不会停止。

或者，您也可以替换`move $t5,$s6`为`li $5, 0`

此外，不要忘记将 $a0 初始化为 0。

# linq - Retrieving sharepoint list items using linq

> ID：12444868
> 
> 赞同：0
> 
> 时间：2012-09-16T06:30:30.050
> 
> 标签：linq, sharepoint-2010, datatable

How can I retrieve all items from SharePoint 2010 list and store in a datatable using LINQ query?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:07:22.750

SPList yourlist = yourweb.Lists["YourListName"]; SPListItemCollection 项目 = yourList.Items;

以上将为您提供所有项目作为一个集合，然后您只需要迭代并插入到您的数据库中。正如 Rawling 所说，你真的不需要 linq 查询。

问候，KS

# java - 获取序列中最大和第二大的数字

> ID：12444870
> 
> 赞同：1
> 
> 时间：2012-09-16T06:31:11.647
> 
> 标签：java, sequence, max

帮助我理解这段代码的最后一部分，它旨在打印序列中的最大和第二大数字。我不完全理解的是，`else if`声明的必要性是什么？使用代码：

```
 if (input > largest) {
        secondLargest = largest;
        largest = input; 
```

那不应该做正确的工作吗？它检查输入是否大于最大数字，将第二大数字设置为前一个最大数字。并用输入的一个用户更新新的最大数字。

那么这行代码的目的到底是什么呢？以及整数`largest`和`secondLargest`设置为的任何原因，`-1`而不仅仅是`0`，它与`sentinel`中断程序设置的原因有关`0`吗？

```
} else if (input > secondLargest) {
    secondLargest = input; 
```

.

```
 int largest = -1;
  int secondLargest = -1;
  while (true) {
     int input = readInt(" ? ");
     if (input == SENTINEL) break;
     if (input > largest) {
        secondLargest = largest;
        largest = input;
     } else if (input > secondLargest) {
        secondLargest = input;
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T06:38:00.353

使用序列尝试您的程序

```
 1 2 3 5 4 
```

如果省略`else if (input > secondLargest) { secondLargest = input; }`则结果将是最大的=5 和秒最大的=3，这是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T06:35:07.150

该`else if`代码处理`input`介于 和 的当前值之间的`largest`情况`secondLargest`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T06:36:29.360

`else if`部分是如果在`input`不大于`largest`但大于的情况下`secondLargest`，`secondLargest`即使`largest`不会改变，也应该改变。

# angularjs - 根据指令中的属性设置 templateUrl

> ID：12444872
> 
> 赞同：15
> 
> 时间：2012-09-16T06:31:12.810
> 
> 标签：angularjs, directive

我正在研究一组角度指令，我想根据属性的存在或值加载正确的模板。

```
<my-form horizontal> </my-form>
<my-form vertical> </my-form> 
```

如果是水平的，templateUrl 应该是`/partials/horizontal-form`，如果是垂直的，templateUrl 应该是`/partials/vertical-form`

我对 templateUrl 很感兴趣，因为`template`html 依赖于属性，所以我不能使用。在`compile.pre`函数中，已经加载了 html。

如果有另一种方法可以实现这一点，我对此持开放态度，因为我现在从角度开始，信息越多越好。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-13T09:16:47.820

仅供参考，现在已正确固定在角度 1.1.4

您可以将函数传递给 templateUrl。输入参数是元素，属性。并返回一个字符串（您希望使用的 templateUrl）

此处的文档：http: [//code.angularjs.org/1.1.4/docs/guide/directive](http://code.angularjs.org/1.1.4/docs/guide/directive)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-17T08:08:21.307

解决方案之一是在模板文件中使用 ng-include。

模板文件中的第一个属性将具有以下内容：

```
<div ng-include = "getTemplate()">

</div> 
```

在您的指令代码中，您将编写如下内容：

```
scope : {direction : "="},
link : function(scope,element,attrs)
{
    scope.getTemplate = function(){
        if(scope.direction === "horizontal")
        {
            return "horizontal.html";
        }
        return "vertical.html";
    }
} 
```

希望这可以帮助！

# matlab - 如何在matlab中应用伽马滤波器？

> ID：12444874
> 
> 赞同：2
> 
> 时间：2012-09-16T06:31:52.440
> 
> 标签：matlab

所以我试图增强我的图像的对比度，我发现一位绅士通过在线伽马校正来做到这一点，代码如下：

```
(im/255).^0.45*255 
```

据我了解，1/gammavalue = 0.45，其中 gammavalue 取决于监视器（介于 1.0 和 2.2 之间），我们将图像提升到 1/.45 的幂，但我不明白为什么这两个操作使用 '255'在那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:04:07.500

我的猜测是，人们使用的原始值在 0 到 255 之间，并且伽玛校正通常应用于 0 到 1 之间的值。所以代码所做的是将值重新缩放到 0 到 1 之间，应用伽玛过滤，然后重新调整到原始范围。

# python - Python 类成员的行为好像是静态的？

> ID：12444881
> 
> 赞同：2
> 
> 时间：2012-09-16T06:33:20.860
> 
> 标签：python, list

我正在编写我的第一个 python 程序，我遇到了一些看起来很奇怪的东西。

我的程序如下所示：

```
def main():
  listOfThings = []
  for i in range(0,3):
    newThing = thing()
    newThing.listOfStrings.append('newString')
    listOfThings.append(newThing) 
```

事情看起来像这样：

```
class thing:
  listOfStrings = [] 
```

我期待 listOfThings 是：

```
listOfThings
 -thing1
  -newString
 -thing2
  -newString
 -thing3
  -newString 
```

但相反，我得到了这个：

```
listOfThings
 -thing1
  -newString
  -newString
  -newString
 -thing2
  -newString
  -newString
  -newString
 -thing3
  -newString
  -newString
  -newString 
```

在其他语言中，如果 thing.listOfStrings 是静态的，这就是我希望看到的。我在这里缺少一些python的微妙之处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T06:35:37.367

`listOfStrings`是一个类属性。所有实例将共享相同的`list`

相反，您应该在`__init__`

```
class thing:
    def __init__(self):
        self.listOfStrings = [] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T06:43:36.190

In Python, any "variables" declared at class scope become *class attributes*, which are akin to static class members in other languages. They can be accessed either through the class name `thing.listOfStrings` or an instance `newThing.listOfStrings`, but they always refer to the same attribute.

If you want *instance attributes*, create them in an `__init__` method:

```
class Thing:
    def __init__(self):
        self.listOfStrings = [] 
```

Every time you instantiate a new instance of `Thing` using `Thing()`, the `__init__` will run in the new instance and give it its own `listOfStrings` list.

Note that due to Python's dynamic nature, `__init__` is not the only place where instance attributes can be added (though it is the recommended location). For example, the following is legal:

```
class Foo:
    pass # empty class definition

a = Foo()
a.x = 42
print a.x # prints 42

b = Foo()
b.y = 99
print b.x # raises AttributeError
print b.y # prints 99 
```

# php - How do I paginate facebook feed?

> ID：12444882
> 
> 赞同：0
> 
> 时间：2012-09-16T06:33:57.427
> 
> 标签：php, javascript, facebook, facebook-graph-api

I am trying to get facebook feed data for a particular user. I can get using php code

```
$pageFeed = $facebook->api("/me/feed",array('access_token' => $facebook->getAccessToken(),'limit'=>5)); 
```

I got a response like below,

```
Array
(
    [data] => Array
        (
                .....feed data...
        )
    [paging] => Array
        (
            [previous] => https://graph.facebook.com/xxxxxxx/feed?limit=5&since=1347771792&__previous=1
            [next] => https://graph.facebook.com/xxxx/feed?limit=5&until=1347642062
        )

) 
```

Later I found [https://developers.facebook.com/blog/post/478/](https://developers.facebook.com/blog/post/478/) to paginate feed data using javascript. In the following code I tried

```
<html>
<body onload="loadPosts()">
  <div id="fb-root"></div>
  <script>
    var graphURL = "https://graph.facebook.com/testname/posts?" +
                     "callback=processResult&access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&limit=10";

    // Use JSONP to call the Graph API
    function loadPosts() {
      var script = document.createElement("script");
      script.src = graphURL;
      document.body.appendChild(script);
    }

    function processResult(posts) {
      if (posts.paging == undefined) {
        document.getElementById("loadMore").innerHTML =
          "No more results";
      }
      else {
        graphURL = posts.paging.next;
        for (var post in posts.data) {
          var message = document.createElement("div");
          message.innerHTML = posts.data[post].message;
          document.getElementById("content").appendChild(message);
        }
      }
    }
  </script>
  <div id="content"></div>
  <button id="loadMore" onclick="loadPosts()">Load more</button>
</body>
</html> 
```

When I run the javascript code I always get `undefined` as a result and I could not get next set of result when clicked `load more` button.

How do I get the next set of facebook data using php or javascipt? I tried both but I was not able to find the solution yet.

Please give some advice.

Thanks in advance.

# javascript - 如何更改对话框窗口的确定/取消按钮的标签？

> ID：12444884
> 
> 赞同：2
> 
> 时间：2012-09-16T06:34:36.430
> 
> 标签：javascript, firefox, xul, xpcom

如何更改/翻译`OK/Cancel`XPCOM 对话窗口的按钮标签？[您可以在此处](http://www.oxymoronical.com/experiments/apidocs/compare/interface/nsIPrompt/1.9.2a1pre/1.8.1)查看此类按钮的列表。

事实上，我想本地化 Zotero Firefox 插件。显示此类对话框的部分代码如下：

```
var regenerate = promptService.confirmEx(
    window, 
    Zotero.getString('integration.revert.title'),
    Zotero.getString('integration.revert.body'),
    promptService.STD_OK_CANCEL_BUTTONS + promptService.BUTTON_POS_1_DEFAULT,
    null, null, null, null, out
);​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:27:57.263

首先，如果您想学习 XUL，我强烈建议您使用[XUL Explorer](https://developer.mozilla.org/en-US/docs/XUL_Explorer)，这是一个交互式工具，您可以使用它来构建代码片段并预览您正在设计的内容。

如果您以前从未在 XUL 中工作过，这将派上用场，就好像它看起来*很像*HTML，但它不是相同的元素和方法阵容。它确实比 HTML 稍高一点，因为它用于构建桌面应用程序，可用于构建以下内容：

[https://developer.mozilla.org/en-US/docs/tag/tools](https://developer.mozilla.org/en-US/docs/tag/tools)

这些程序中的大多数您都可以下载源代码并像查看文档列表一样浏览它。您还会注意到一些扩展，例如 Firefox Web Developer 附加组件。这是[源代码](https://github.com/chrispederick/web-developer/tree/master/source)，这里是[一些 XUL 文件](https://github.com/chrispederick/web-developer/tree/master/source/firefox/xul)。恰好包括一个`dialogs`目录和一个[`message.xul`](https://github.com/chrispederick/web-developer/blob/master/source/firefox/xul/dialogs/message.xul)：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/"?>
<?xml-stylesheet href="chrome://web-developer/content/dialogs/style-sheets/message.css"?>
<!DOCTYPE dialog SYSTEM "chrome://web-developer/locale/dialogs/message.dtd">
<dialog buttons="accept" id="web-developer-message-dialog" onload="WebDeveloper.Message.initialize()" title="&webdeveloper.message.title;" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
    <script src="chrome://web-developer/content/common/common.js"/>
    <script src="chrome://web-developer/content/dialogs/javascript/message.js"/>

    <vbox id="web-developer-message-details">
        <description id="web-developer-message"/>
        <description id="web-developer-more-information" value="&webdeveloper.more.information;" onclick="WebDeveloper.Message.moreInformation()" class="url"/>
    </vbox>
</dialog>​ 
```

[所以你可以使用 a`Dialog`来](https://developer.mozilla.org/en-US/docs/XUL/dialog)创建不同类型的提示。例如，我前段时间通过教程做了以下内容：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<dialog id="myDialog" title="My Dialog"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        onload="window.sizeToContent();"
        buttons="accept,cancel"
        buttonlabelaccept="Set Favorite"
        buttonaccesskeyaccept="S"
        ondialogaccept="return doSave();"
        buttonlabelcancel="Cancel"
        buttonaccesskeycancel="n"
        ondialogcancel="return doCancel();">
  <script>
  function doSave(){
      //doSomething()
      return true;
  }
  function doCancel(){
      return true;
  }
  </script>
  <dialogheader title="My dialog" description="Example dialog"/>
  <groupbox flex="1">
    <caption label="Select favorite fruit"/>
    <radiogroup>
      <radio id="1" label="Oranges because they are fruity"/>
      <radio id="2" selected="true" label="Strawberries because of color"/>
      <radio id="3" label="Bananna because it pre packaged"/>
    </radiogroup>
  </groupbox>
</dialog> 
```

看起来像：

![在此处输入图像描述](../Images/2fe126f99510208db9fc42b2e68bbcd2.png)

所以你真的有很多选择，即使，如果你愿意，[`nsIPromptService`](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIPromptService)......

```
var prompts = Components.classes["@mozilla.org/embedcomp/prompt-service;1"]
                        .getService(Components.interfaces.nsIPromptService);

var check = {value: false};                  // default the checkbox to false

var flags = prompts.BUTTON_POS_0 * prompts.BUTTON_TITLE_SAVE +
            prompts.BUTTON_POS_1 * prompts.BUTTON_TITLE_IS_STRING  +
            prompts.BUTTON_POS_2 * prompts.BUTTON_TITLE_CANCEL;
// This value of flags will create 3 buttons. The first will be "Save", the
// second will be the value of aButtonTitle1, and the third will be "Cancel"

var button = prompts.confirmEx(null, "Title of this Dialog", "What do you want to do?",
                               flags, "", "Button 1", "", null, check); 
```

还有一个东西叫[`PopupNotifications.jsm`](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/PopupNotifications.jsm)。那里有很多，所以我相信你可以找到一些你想做的事情。还有[Zotero 源](https://github.com/zotero/zotero/blob/master/chrome/content/zotero/ingester/selectitems.xul)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:17:14.093

如果您需要自定义标签，那么您不应该使用默认按钮：

```
promptService.confirmEx(
    window, 
    Zotero.getString('integration.revert.title'),
    Zotero.getString('integration.revert.body'),
    promptService.BUTTON_POS_0 * BUTTON_POS_0_DEFAULT,
    Zotero.getString('integration.revert.OK'),
    Zotero.getString('integration.revert.cancel'),
    null, null, out
);​ 
```

这将第一个按钮声明为默认按钮，除了不需要指定标志 - 已指定两个标签，因此将显示两个按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T12:25:05.583

在支持每个浏览器的同时做到这一点的唯一方法是使用对话框库来创建它，[jQueryUI](http://jqueryui.com/)作为一个时髦的库有点走到了生命的尽头，但仍然功能齐全。

# unix - 诸如“您在 /usr/spool/mail/root 中有邮件”之类的消息的目的是什么？

> ID：12444887
> 
> 赞同：2
> 
> 时间：2012-09-16T06:35:31.137
> 
> 标签：unix, aix

我正在研究 sn AIX6.1 机器，但我的问题可能适用于所有 Unix 平台。不幸的是，我在网上没有找到任何令人满意的答案。

我的问题：

每当我登录到我的 AIX 机器（或者说，任何 Unix 机器）时，我都会看到如下消息，

```
You have mail in /usr/spool/mail/root 
```

谁能告诉我这个消息的一个很好的解释，比如它的目的是什么，以及这个消息是在什么事件上显示给用户的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:42:24.250

这是旧 CLI-only Unix 时代的剩余部分。当还没有 GUI 电子邮件客户端，并且用户在具有关联邮箱的计算机上登录到他的帐户时（在我们学校，我们也有这些），通知用户有未读电子邮件很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T06:43:00.733

这是外壳邮件检查。如果由 shell 变量 MAIL 命名的文件（默认为 /var/spool/mail/username 之类的文件）比上次检查时大，那么它会回显该消息以让您知道，新邮件已经到达。

# c# - Are memory-barriers required when joining on a thread?

> ID：12444891
> 
> 赞同：5
> 
> 时间：2012-09-16T06:36:37.257
> 
> 标签：c#, .net, multithreading, thread-safety, memory-barriers

If a thread A spawns another thread B with the single purpose of writing to a variable V and then waits for it to terminate, are memory-barriers required to ensure that subsequent reads of V on thread A are fresh? I'm unsure if there any implicit barriers in the termination / joining operations that make them redundant.

Here's an example:

```
public static T ExecuteWithCustomStackSize<T>
    (Func<T> func, int stackSize)
{
    T result = default(T);

    var thread = new Thread(
        () => 
                {
                    result = func();
                    Thread.MemoryBarrier(); // Required?
                }
        , stackSize);

    thread.Start();
    thread.Join();

    Thread.MemoryBarrier(); // Required?
    return result;
} 
```

Are are either / both (or more) of the barriers in the above snippet required?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T15:09:42.470

不，同步机制会生成隐式内存栅栏。线程加入后，线程修改的所有数据都将可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:56:51.170

从文档看来它们不是必需的 -

MemoryBarrier 仅在内存排序较弱的多处理器系统上需要（例如，使用多个 Intel Itanium 处理器的系统）。

对于大多数用途，C# lock 语句、Visual Basic SyncLock 语句或 Monitor 类提供了更简单的数据同步方法。

当您使用 join 阻塞时，就更没有必要了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:09:39.050

您不需要第一个内存屏障。您只需要在访问已在单独线程中修改的数据之前调用它们。由于您没有在“线程”内这样做，因此您不需要调用。

如果您打算保留加入通话，则可以摆脱第二个。如果您保留第二个电话，您可以摆脱加入。

# javascript - Javascript - 检查某个索引是否在数组中具有某个值

> ID：12444903
> 
> 赞同：1
> 
> 时间：2012-09-16T06:38:16.587
> 
> 标签：javascript, arrays, function

我有一个包含 144 个索引的数组，我用表单中的数据填充。我想检查某个索引是否包含某个值，我不知道 JavaScript 中是否存在这样的函数，或者如何制作该函数。
你能帮我制作一个函数，获取一个数组、某个索引和某个值作为参数，如果存在则返回 true 吗？

一个例子：

```
var board = new Array();
board.push('X');
board.push('O');
function inArrayatindex(array, index, value)
{
/* if(certain code that i need help with...)
{
return true;
}
}
inArrayatindex(board, 2, 'O'); //returns true
inArrayatindex(board, 2, 'o'); // returns false
inArrayatindex(board, 3, 'X'); // returns false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T06:41:46.613

试试这个：

```
function check(array, index, value) {
    if(index < 0 || index >= array.length) {
         return false;
    }
    return array[index] === value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:47:09.013

我想这就是你需要的，

```
function inArray(array,valueToMatch){

  var myArray = array
  var index = -1;

  for(int i=0;i<myArray.length;i++){
      if(myArray[i].match(valueToMatch)){
        index = i;
      }   
   }

  return index;
} 
```

注意：数组参数你的 144 索引数组

valueToMatch 参数是您搜索的值

# postgresql - 使用 psql 登录

> ID：12444904
> 
> 赞同：2
> 
> 时间：2012-09-16T06:38:30.967
> 
> 标签：postgresql, psql

我正在尝试从终端运行 postgres。我错过了什么？

```
$psql
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
LANGUAGE = (unset),
LC_ALL = (unset),
LC_CTYPE = "UTF-8",
LANG = "en_GB.UTF-8"
are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T06:58:04.960

看起来您使用的[`pg_wrapper`](http://manpages.ubuntu.com/manpages/lucid/man1/pg_wrapper.1.html)是 Ubuntu 或 Debian 之类的系统，并且您的语言环境设置混乱了。这与 PostgreSQL 无关，这是系统配置问题。Perl 只是在抱怨它。

不争论就跑`perl`，你会看到同样的抱怨。

假设您使用的是 Ubuntu，因为您没有另外说，请参阅：

*   [语言环境 - Ubuntu Wiki](https://help.ubuntu.com/community/Locale)
*   [如何在 Ubuntu 上选择和生成语言环境 - UbuntuGeek](http://www.ubuntugeek.com/how-to-select-and-generate-locales-on-ubuntu.html)

# macos - sed 两个命令的组合，有可能吗

> ID：12444908
> 
> 赞同：1
> 
> 时间：2012-09-16T06:38:47.933
> 
> 标签：macos, sed, terminal

我有两个 sed 命令来删除文本文件中“[”和“]”的出现，仅在包含“INSERT INTO”的行中，这些行到目前为止做得很好。

```
1 sed "/INSERT INTO/ s/\[//g" < Export.sql     > ExportTemp.sql
2 sed "/INSERT INTO/ s/\]//g" < ExportTemp.sql > ExportSQL.sql 
```

现在我 1 读取文件 Export.sql 并写入文件 ExportTemp.sql ，然后 2 读取文件 ExportTemp.sql 并写入文件 ExportSQL.sql 这是我真正想要的。

我想知道我是否可以将这两条线合二为一？

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T06:52:13.187

在您的情况下，您可能不需要`sed`多个命令。关于什么：

```
sed '/INSERT INTO/ s/[][]//g' Export.sql > ExportSQL.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:43:14.483

每次调用可以有多个命令。请参阅 sed 联机帮助页——

[http://linux.die.net/man/1/sed](http://linux.die.net/man/1/sed)

# android - 安卓键盘布局错误

> ID：12444909
> 
> 赞同：1
> 
> 时间：2012-09-16T06:38:48.223
> 
> 标签：android, android-layout, android-softkeyboard

我正在通过编辑默认的 LatinIME 键盘来开发一个 android 键盘。我的键盘在 android 2.1 & 2.3 模拟器 (HVGA Skin) 中运行良好。但是在三星 Galaxy DUOS (2.3) 中，按键图标变得非常大，只显示了三/四个按键，并且只有一/两行可见。

有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:16:00.193

为该分辨率创建新版本的值（字符串或值或 xml 布局）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:42:46.850

最后在文件中指定`android:versionCode`&`android:versionName`属性`AndroidManifest.xml`解决了这个问题。在开发应用程序时，我没有指定这些。不知道为什么它解决了这个问题。

我还检查了稍后删除这些属性&在这种情况下问题又回来了！最奇怪的问题，我见过。

# algorithm - 家庭作业的简单加密算法。没有让解密正常工作

> ID：12444915
> 
> 赞同：1
> 
> 时间：2012-09-16T06:41:43.937
> 
> 标签：algorithm, encryption

这是一个我完全无法理解的家庭作业问题

它是一个非常简单的加密算法。您以一串字符作为字母表开始：

`ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!, .`

然后要求用户输入自己的字符串，`map`例如：

`0987654321! .,POIUYTREWQASDFGHJKLMNBVCXZ`

然后程序使用它来制作一个`map`并允许您输入被加密的文本。

例如`MY NAME IS JOSEPH`将被加密为`.AX,0.6X2YX1PY6O3`

这一切都很容易，但是他说这是一对一的映射，因此暗示如果我`.AX,0.6X2YX1PY6O3`重新进入程序，我就会退出`MY NAME IS JOSEPH`

这不会发生，因为`.AX,0.6X2YX1PY6O3`变成`Z0QCDZQGAQFOALDH`

该映射仅在您向后退时解密，但问题意味着程序每次都只是循环并运行一个算法。

即使有人会说我可能会很高兴，我有一页又一页的纸填满了可能的工作原理，但我什么也没想出来，唯一的解决方案是向后运行算法我不认为我们是允许这样做。

有任何想法吗？

编辑：

不幸的是我不能让它工作（使用轨道计算的想法）我做错了什么？

```
//import scanner class
import java.util.Scanner;

public class Encryption {

    static Scanner inputString = new Scanner(System.in);
    //define alphabet
    private static String alpha = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!, .";
    private static String map;
    private static int[] encryptionMap = new int[40];//mapping int array
    private static boolean exit = false;
    private static boolean valid = true;

    public static void main(String[] args) {

        String encrypt, userInput;
        userInput = new String();

        System.out.println("This program takes a large reordered string");
        System.out.println("and uses it to encrypt your data");
        System.out.println("Please enter a mapping string of 40 length and the same characters as below but in different order:");
        System.out.println(alpha);

        //getMap();//don't get user input for map, for testing!
        map=".ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!, ";//forced input for testing only!
        do{
            if (valid == true){
                System.out.println("Enter Q to quit, otherwise enter a string:");
                userInput = getInput();
                if (userInput.charAt(0) != 'Q' ){//&& userInput.length()<2){

                    encrypt = encrypt(userInput);
                    for (int x=0; x<39; x++){//here I am trying to get the orbit computation going
                        encrypt = encrypt(encrypt);
                    }
                    System.out.println("You entered: "+userInput);
                    System.out.println("Encrypted Version: "+encrypt);
                }else if (userInput.charAt(0) == 'Q'){//&& userInput.length()<2){
                    exit = true;
                }

            }
            else if (valid == false){
                System.out.println("Error, your string for mapping is incorrect");
                valid = true;//reset condition to repeat
            }
        }while(exit == false);
        System.out.println("Good bye");
    }

    static String encrypt(String userInput){
        //use mapping array to encypt data
        String encrypt;
        StringBuffer tmp = new StringBuffer();
        char current;
        int alphaPosition;
        int temp;

        //run through the user string
        for (int x=0; x<userInput.length(); x++){
            //get character
            current = userInput.charAt(x);

            //get location of current character in alphabet
            alphaPosition = alpha.indexOf(current);
            //encryptionMap.charAt(alphaPosition)

            tmp.append(map.charAt(alphaPosition));

        }
        encrypt = tmp.toString();
        return(encrypt);
    }

    static void getMap(){
        //get a mapping string and validate from the user
        map = getInput();
        //validate code
        if (map.length() != 40){
            valid = false;
        }
        else{
            for (int x=0; x<40; x++){
                if (map.indexOf(alpha.charAt(x)) == -1){
                    valid = false;
                }
            }
        }
        if (valid == true){
            for (int x=0; x<40; x++){
                int a = (int)(alpha.charAt(x));
                int y = (int)( map.charAt(x));
                //create encryption map
                encryptionMap[x]=(a-y);
            }
        }
    }

    static String getInput(){
        //get input(this repeats)
        String input = inputString.nextLine();
        input = input.toUpperCase();
        if ("QUIT".equals(input) || "END".equals(input) || "NO".equals(input) || "N".equals(input)){
            StringBuffer tmp = new StringBuffer();
            tmp.append('Q');
            input = tmp.toString();
        }
        return(input);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:45:06.963

如果您再次应用该替换，您将（可能）无法取回原始字符串。我说可能是因为你可以构造这样的输入（它们都做一些事情，比如如果 A->B 然后 B->A）。但大多数输入不会那样做。您必须构建反向映射才能解密。

但是，如果您只被允许前进，您可以做一个技巧。继续应用映射，您最终将返回到原始输入。您必须这样做的次数取决于您的输入。要计算出多少次，计算每个字符的[轨道](http://en.wikipedia.org/wiki/Orbit_%28group_theory%29#Orbits_and_stabilizers)，并取所有轨道大小的最小公倍数。对于您的输入，轨道大小为 1 (T->T, W->W)，2 (B->9->B H->3->H U->R->U P->O->P )、4 (C->8->N->,->C)、9 (A->...->Y->A) 和 17 (E->...->V->E ）。所有这些的 LCM 是 612，因此应用于密文的 611 前向映射会将您返回到明文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:50:37.317

好吧，只有在进行反向映射时，才能以这种方式取回字符串。一对一映射意味着默认字母表中的单个字母仅映射到新字母表中的一个字母，反之亦然。即你不能映射`ABCD`到`ABBA`. 这并不意味着您可以通过进行第二轮加密来获得初始字符串。

如果您使用有限的字母表和位移来编码您的字符串，则可以实现您所描述的事情。您可以选择位移，这样在经过多轮加密之后，`totalDisplacement mod alphabetSize == 0`您将只能向前返回字符串。

# android - 如何找出 ListView 中项目的哪一部分被触摸？

> ID：12444924
> 
> 赞同：2
> 
> 时间：2012-09-16T06:43:33.650
> 
> 标签：android, listview, onclick

我`ListView`在每一行中显示了三件事（左图标、中间文本、右图标）。当用户“点击”一行时，我想根据“点击”的水平位置执行操作，但是没有 x 坐标，`AdapterView.OnItemClickListener.onItemClick`我也不知道该怎么做。

我不需要确切的坐标，像“左/中/右”这样的信息就足够了。知道这三样东西中的哪一个被触动了是差不多的。我找到[了这个答案](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview)，但我怀疑它是否相关。*是吗？有没有办法获得x坐标？*

还是我应该试试`GridLayout`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:51:43.393

如果要获取单击的确切坐标，则需要[`onTouchListener`](https://developer.android.com/reference/android/view/View.OnTouchListener.html)在要接收事件的视图上进行设置。

从中，您将获得[`MotionEvent`](https://developer.android.com/reference/android/view/MotionEvent.html)可用于计算坐标以及几乎所有您想知道的其他信息。

# algorithm - 命题逻辑算法的混乱

> ID：12444927
> 
> 赞同：6
> 
> 时间：2012-09-16T06:44:04.383
> 
> 标签：algorithm, logic, artificial-intelligence

我无法理解以下有关命题逻辑和蕴涵的算法，取自《人工智能现代方法》一书。

一种用于确定命题蕴涵的真值表枚举算法。TT 代表真值表。PL-真？如果句子在模型中成立，则返回 true。变量模型表示仅对某些变量的部分模型分配。函数调用 EXTEND(P, true, model) 返回一个新的部分模型，其中 P 的值为 true。

```
function  TT-ENTAILS? (KB,α) returns  true  or  false
  inputs: KB, the knowledge base, a sentence in propositional logic
           α, the query, a sentence in propositional logic

symbols <--- a list of the propositional symbols in KB and α
return TT-CHECK-ALL(KB,α,symbols,[]) 
```

* * *

```
function TT-CHECK-ALL(KB,α,symbols,model ) returns true or false
   if EMPTY?(symbols) then
       if PL-TRUE?(KB, model) then return PL-TRUE?(α,model)
       else return true

   else do
       P <---FIRST(symbols); rest <--- REST(symbols)
       return TT-CHECK-ALL(KB,α,rest,EXTEND(P,true,model) and
              TT-CHECK-ALL(KB, α, rest, EXTEND(P,false,model) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T19:01:32.203

当然，唯一要做的`TT-ENTAILS`就是`TT-CHECK-ALL`用适当的参数调用，所以这里没有太多要说的。有趣的`else`部分开始于`TT-CHECK-ALL`递归地为知识库和查询（“模型”）中出现的符号的所有可能分配构造一个*巨大的连接。*

例如，`TT-CHECK-ALL(KB, a, [P, Q], [])`将评估为

```
(
   TT-CHECK-ALL(KB, a, [], [P=true, Q=true]) 
   and 
   TT-CHECK-ALL(KB, a, [], [P=true, Q=false])
) 
and 
(
    TT-CHECK-ALL(KB, a, [], [P=false, Q=true]) 
    and 
    TT-CHECK-ALL(KB, a, [], [P=false, Q=false])
) 
```

的第一部分`TT-CHECK-ALL`，当模型中的所有符号都被赋值时执行，检查给定的模型，例如[P=true，Q=false]，是否与知识库（`PL-TRUE?(KB, model)`）一致。这些模型对应于真值表中的行，这些行在`true`KB 列中有一个。对于那些，算法然后检查查询的计算结果是否为真（`PL-TRUE?(query, model)`）。所有其他模型，首先与 KB 不一致，通过返回 不考虑，`true`这是共轭的中性元素。

换句话说，这与 相同`PL-TRUE?(KB, model) -> PL-TRUE?(query, model)`。

所以简而言之，TT-CHECK-ALL 检查与 KB 一致的*每个*模型（每个可能的“真”或“假”分配给不同的符号），查询评估为真：

`foreach model: PL-TRUE?(KB, model) -> PL-TRUE?(query, model)`

这在逻辑上等同于

`not exist model: PL-TRUE?(KB, model) and not PL-TRUE?(query, model)`

即不存在模型，使得KB和查询的*否定*都可以为真，即KB和查询的*否定在**逻辑上不一致*。

而这正是 的定义`KB entails query`。

**编辑：** 关于`symbols`. 这些是词汇表中的*原子*命题符号。在书中的示例中，这些将是各种`P_i,j`and `B_i,j`，表示房间 (i,j) 是否有坑和/或微风。请注意，`R1`through`R5`不是 的一部分`symbols`，因为它们只是为了方便起见的简写，代表更复杂的术语。因此，当将 传递给`KB`算法时，我们不会传递`R1 and R2 and ... R5`，而是传递`(not P_1,1) and (B_1,1 <=> (P_1,2 or P_2,1)) and ... and (B_2,1)`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-28T19:34:07.380

TT-CHECK-ALL(KB,α,symbols,model ) 在第一次迭代中，TT-CHECK-ALL 的第二部分 `i) TT-CHECK-ALL(KB,a,Q,Extend(P,true,[])) at first TT-CHECK-ALL(KB,a,Q,Extend(P,false,[]))` 发生了 tobias 所说的情况。

最后，所有这些 TT-CHECK-ALL() 都从 TT-entails 函数返回。

`ii) (TT-CHECK-ALL(KB, a, [], [P=true, Q=true]) and TT-CHECK-ALL(KB, a, [], [P=true, Q=false])) and (TT-CHECK-ALL(KB, a, [], [P=false, Q=true]) and TT-CHECK-ALL(KB, a, [], [P=false, Q=false]))`

PS。if EMPTY?(symbols) then if PL-TRUE?(KB, model) then return PL-TRUE?(α,model)

在 i) 符号不是空的，有 q 所以它会进入 TT-CHECK-ALL 的第二部分，但在 ii) 作为空的符号它会进入第一部分 (KB,model) ，如果 model 不是 true ，它不会检查 alpha 是否为 true 。关键是，如果 alpha 查询在知识库的每个 (true) 模型中为真。如果所有 alpha 在每个真实的知识库（模型）中都是真实的。如果每个真正的知识库（模型）中的 alpha 都不为真，那么 alpha 的值又是可能的。那么我们不能确定那个查询。

exmp：在 wumpus-world 示例中，相关命题符号为 B1,1、B1,2、P1,2、P2,1、P2,3 和 P3,1。有七个符号，有 27 = 128 种可能的模型；在其中三个中，KB（这些符号的不同值的结合）为真。在这三个模型中，-p1,2 为真，因此 [1,2] 中没有坑。另一方面，P2,1 三个模型中有两个为真，一个为假，所以我们还不能判断 [2,2] 中是否有坑。

TT-entails 算法的全部要点，根据我拥有的知识库，查询是否有答案。知识库（模型）是真实的，查询（一个命题句）在所有这些中都是真实的，然后 BINGO ！:)

我发现托比亚斯的解释非常有帮助。只是想添加一些基本的东西，以使其更好。

# python - Supervisord 无法启动 Tornado 服务器

> ID：12444929
> 
> 赞同：2
> 
> 时间：2012-09-16T06:44:07.787
> 
> 标签：python, macos, tornado, supervisord

我花了 6 个小时试图找出它为什么不起作用。真的不知道为什么。提前致谢！

注意：以下设置在 ubuntu 服务器上完美运行，但在我的本地 MacOSX 上失败

这是我的supervisord.conf：

```
;local conf

[unix_http_server]
file=/var/run/supervisor.sock   ; (the path to the socket file)

[supervisord]
logfile=/tmp/supervisord.log ; (main log file;default $CWD/supervisord.log)
logfile_maxbytes=50MB        ; (max main logfile bytes b4 rotation;default 50MB)
logfile_backups=10           ; (num of main logfile rotation backups;default 10)
loglevel=debug                ; (log level;default info; others: debug,warn,trace)
pidfile=/tmp/supervisord.pid ; (supervisord pidfile;default supervisord.pid)
nodaemon=false               ; (start in foreground if true;default false)
minfds=1024                  ; (min. avail startup file descriptors;default 1024)
minprocs=200                 ; (min. avail process descriptors;default 200)
[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock ; use a unix:// URL  for a unix socket

[include]
files = conf.d/*.conf 
```

这是我在 conf.d 文件夹下的 tornado.conf：

```
[group:tornadoes]
programs=tornado-8000,tornado-8001,tornado-8002,tornado-8003

[program:tornado-8000]
command=python /Users/horace/server/server.py --port=8000
directory=/var/www
user=www-data
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/tornado.log
loglevel=info

[program:tornado-8001]
command=python /Users/horace/server/server.py --port=8001
directory=/var/www
user=www-data
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/tornado.log
loglevel=info

[program:tornado-8002]
command=python /Users/horace/server/server.py --port=8002
directory=/var/www
user=www-data
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/tornado.log
loglevel=info

[program:tornado-8003]
command=python /Users/horace/server/server.py --port=8003
directory=/var/www
user=www-data
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/tornado.log
loglevel=info 
```

运行后

```
sudo supervisord -n -edebug 
```

我得到了这些日志。

注意：我看到了“ImportError：没有名为 tornado.httpserver 的模块”错误。但是当我尝试从带有“

```
python server.py --port=8000 
```

服务器启动没有任何问题。这让我很困惑，为什么 supervisord 无法启动它。

```
/Library/Python/2.7/site-packages/supervisor/options.py:286: UserWarning: Supervisord is running as root and it is searching for its configuration file in default locations (including its current working directory); you probably want to specify a "-c" argument specifying an absolute path to a configuration file for improved security.
  'Supervisord is running as root and it is searching '
2012-09-16 14:29:40,866 CRIT Supervisor running as root (no user in config file)
2012-09-16 14:29:40,866 WARN Included extra file "/Users/horace/supervisor/conf.d/tornado.conf" during parsing
2012-09-16 14:29:40,866 INFO Increased RLIMIT_NOFILE limit to 1024
2012-09-16 14:29:40,889 INFO RPC interface 'supervisor' initialized
2012-09-16 14:29:40,889 CRIT Server 'unix_http_server' running without any HTTP authentication checking
2012-09-16 14:29:40,889 INFO supervisord started with pid 6367
2012-09-16 14:29:41,895 INFO spawned: 'tornado-8000' with pid 6370
2012-09-16 14:29:41,897 INFO spawned: 'tornado-8001' with pid 6371
2012-09-16 14:29:41,899 INFO spawned: 'tornado-8002' with pid 6372
2012-09-16 14:29:41,902 INFO spawned: 'tornado-8003' with pid 6373
2012-09-16 14:29:41,915 DEBG 'tornado-8000' stdout output:
supervisor: error trying to setuid to 0 (Could not set groups of effective user)

2012-09-16 14:29:41,915 DEBG 'tornado-8001' stdout output:
supervisor: error trying to setuid to 0 (Could not set groups of effective user)

2012-09-16 14:29:41,917 DEBG 'tornado-8002' stdout output:
supervisor: error trying to setuid to 0 (Could not set groups of effective user)

2012-09-16 14:29:41,919 DEBG 'tornado-8003' stdout output:
supervisor: error trying to setuid to 0 (Could not set groups of effective user)

2012-09-16 14:29:41,974 DEBG 'tornado-8000' stdout output:
Traceback (most recent call last):
  File "/Users/horace/server/server.py", line 4, in <module>
    import tornado.httpserver
ImportError: No module named tornado.httpserver

2012-09-16 14:29:41,974 DEBG 'tornado-8001' stdout output:
Traceback (most recent call last):
  File "/Users/horace/server/server.py", line 4, in <module>
    import tornado.httpserver
ImportError: No module named tornado.httpserver

2012-09-16 14:29:41,974 DEBG 'tornado-8002' stdout output:
Traceback (most recent call last):
  File "/Users/horace/server/server.py", line 4, in <module>
    import tornado.httpserver
ImportError: No module named tornado.httpserver

2012-09-16 14:29:41,974 DEBG 'tornado-8003' stdout output:
Traceback (most recent call last):
  File "/Users/horace/server/server.py", line 4, in <module>
    import tornado.httpserver
ImportError: No module named tornado.httpserver

2012-09-16 14:29:48,133 DEBG fd 10 closed, stopped monitoring <POutputDispatcher at 4345929384 for <Subprocess at 4345718256 with name tornado-8001 in state STARTING> (stdout)>
2012-09-16 14:29:48,133 INFO exited: tornado-8001 (exit status 1; not expected)
2012-09-16 14:29:48,133 DEBG fd 7 closed, stopped monitoring <POutputDispatcher at 4345929312 for <Subprocess at 4345718112 with name tornado-8000 in state STARTING> (stdout)>
2012-09-16 14:29:48,133 INFO exited: tornado-8000 (exit status 1; not expected)
2012-09-16 14:29:48,133 DEBG received SIGCHLD indicating a child quit
2012-09-16 14:29:48,135 DEBG 'tornado-8002' stdout output:
Traceback (most recent call last):
  File "/Users/horace/server/server.py", line 4, in <module>
    import tornado.httpserver
ImportError: No module named tornado.httpserver

2012-09-16 14:29:48,136 DEBG 'tornado-8003' stdout output:
Traceback (most recent call last):
  File "/Users/horace/server/server.py", line 4, in <module>
    import tornado.httpserver
ImportError: No module named tornado.httpserver

2012-09-16 14:29:48,136 INFO gave up: tornado-8000 entered FATAL state, too many start retries too quickly
2012-09-16 14:29:48,136 INFO gave up: tornado-8001 entered FATAL state, too many start retries too quickly
2012-09-16 14:29:48,137 DEBG fd 14 closed, stopped monitoring <POutputDispatcher at 4346496280 for <Subprocess at 4345718400 with name tornado-8003 in state STARTING> (stdout)>
2012-09-16 14:29:48,137 INFO exited: tornado-8003 (exit status 1; not expected)
2012-09-16 14:29:48,137 DEBG fd 12 closed, stopped monitoring <POutputDispatcher at 4346495200 for <Subprocess at 4345718328 with name tornado-8002 in state STARTING> (stdout)>
2012-09-16 14:29:48,137 INFO exited: tornado-8002 (exit status 1; not expected)
2012-09-16 14:29:48,137 DEBG received SIGCHLD indicating a child quit
2012-09-16 14:29:49,139 INFO gave up: tornado-8002 entered FATAL state, too many start retries too quickly
2012-09-16 14:29:49,139 INFO gave up: tornado-8003 entered FATAL state, too many start retries too quickly 
```

**更新**：我不知道为什么，但我通过以下方式启动了服务器：

```
su root 
```

然后启动supervisord。一切运行正常。但是还是不知道为什么在我的普通用户horace下，我无法启动它。（导入 tornado.httpserver 模块）

```
sudo supervisord 
```

有人知道原因吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:57:34.920

Your supervisord configuration file looks pretty good.

What was missing for me was running supervisor inside the virtualenv on the server.

I added the virtualenv source mydir/bin/activate line before running supervisord -c my_conf_file, and that worked.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:10:40.933

您是否尝试设置 `environment=PYTHONPATH="..."`变量？

编辑：

主管.conf：

```
[include]
files = *.supervisor

[supervisord]

[supervisorctl]
serverurl = unix://supervisord.sock

[unix_http_server]
file = supervisord.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface 
```

app1.supervisor:

```
[program:app1]
process_name = app1-%(process_num)s
environment = PYTHONPATH="%(here)s/apps/env/current"
command = python -m apps.app1 --port=%(process_num)s
#--log_file_prefix=app.log                                                                                  
# Increase numprocs to run multiple processes on different ports.                                                   
# Note that the chat demo won't actually work in that configuration                                                 
# because it assumes all listeners are in one process.                                                              
numprocs = 2
numprocs_start = 8000 
```

# c++ - Qt 示例记事本程序不显示任何控件

> ID：12444934
> 
> 赞同：1
> 
> 时间：2012-09-16T06:45:29.917
> 
> 标签：c++, qt, compilation

我正在关注 QtSDK 中列出的 Qt 示例，标题为：“Qt 入门编程”。我的问题是程序不显示任何对象。

我的 main.cpp 看起来像这样：

```
#include <QtGui>

#include <notepad.h>

int main(int argv, char **args)  {
    QApplication app(argv, args);

    QVBoxLayout layout;

    Notepad notepad();

    QWidget window;
    window.setLayout(&layout);

    window.show();

    return app.exec();
} 
```

'notepad.h' 文件：

```
#ifndef NOTEPAD_H
#define NOTEPAD_H

#include <QtGui>

class Notepad : public QMainWindow  {
    Q_OBJECT

    public:
        Notepad();

    private slots:
        void open();
        void save();
        void quit();

    private:
        QTextEdit *text_edit;

        QAction *open_action;
        QAction *save_action;
        QAction *exit_action;

        QMenu *file_menu;
};

#endif // NOTEPAD_H 
```

“notepad.cpp”文件：

```
#include "notepad.h"

Notepad::Notepad()  {
    open_action = new QAction(tr("&Open"), this);
    save_action = new QAction(tr("&Save"), this);
    exit_action = new QAction(tr("&Exit"), this);

    connect(open_action, SIGNAL(triggered()), this, SLOT(open()));
    connect(save_action, SIGNAL(triggered()), this, SLOT(save()));
    connect(exit_action, SIGNAL(triggered()), qApp, SLOT(quit()));

    file_menu = menuBar()->addMenu(tr("&File"));
    file_menu->addAction(open_action);
    file_menu->addAction(save_action);
    file_menu->addSeparator();
    file_menu->addAction(exit_action);

    text_edit = new QTextEdit;
    setCentralWidget(text_edit);

    setWindowTitle(tr("Notepad"));
}

void Notepad::open()  {
    ...
}

void Notepad::save()  {
    ...
}

void Notepad::quit()  {
} 
```

任何解决此事的帮助将不胜感激。

**编辑**

我最初的问题问为什么我因为没有实现“退出”功能而出现编译时错误，以防你想知道:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:50:47.080

您必须实现在 notepad.h 中定义为私有插槽的 quit() 方法。未解决的错误是链接错误，它告诉您链接器没有找到函数声明的任何实现。将此添加到 notepad.cpp ：

```
void Notepad::quit()  {
    ...
} 
```

对于新问题：

试试记事​​本.show()。您的 MainWindow 可以是记事本对象，因为它是 QMainWindow。

```
int main(int argv, char **args)  {
    QApplication app(argv, args);

    Notepad notepad();
    notepad.show();

    return app.exec();
} 
```

# java - 为什么我的 GUI 不显示

> ID：12444935
> 
> 赞同：0
> 
> 时间：2012-09-16T06:45:34.520
> 
> 标签：java, swing, applet, awt, japplet

我正在尝试从文本文件、二维数组和 toString() 中播放 9x9 网格；出来很好，但我不知道为什么我的网格甚至没有弹出。我什至尝试从另一个类调用一个非常简单的事件按钮，看看它是否会起作用，但我仍然什么也没得到（我是从 main 方法调用它）。但是，当我在另一个类中运行这个简单的事件按钮时它工作正常，我不知道为什么它不起作用。

```
 import static org.junit.Assert.assertEquals;

    import java.io.File;
    import java.io.FileNotFoundException;
    import java.io.FileReader;
    import java.io.PrintWriter;
    import java.util.InputMismatchException;
    import java.util.Scanner;
    import javax.swing.JFileChooser;
    import javax.swing.JTextField;

    import java.applet.Applet;
    import java.awt.GridLayout;

    public class SudokuBrdManager extends Applet implements SudokuBoardManager 
    {

    private static SudokuBrdManager myBoard;
    private static ButtonGrid button;
    private int [][] Board= new int[9][9];
    private String output;

    public static void main(String[] args)
    {
        myBoard = new SudokuBrdManager();
            try {
                //myBoard.setBoard();
            } catch (InputOutOfRangeException e) {
                 TODO Auto-generated catch block
                //e.printStackTrace();
            } catch (ValueNotValidException e) {
                // TODO Auto-generated catch block
                //e.printStackTrace();
            }    
        //System.out.println(myBoard.toString());   
    }

    public void setBoard () throws InputOutOfRangeException, ValueNotValidException
    {           
        JFileChooser chooser = new JFileChooser();
        int status;

        chooser.setDialogTitle("Select Sudoku Game File");
        status = chooser.showOpenDialog(null);

        if(status == JFileChooser.APPROVE_OPTION)
        {
            try
            {
                File inFile = chooser.getSelectedFile();
                myBoard.newGame(inFile);    
            }
            catch(InputMismatchException e)
            {
                e.printStackTrace();
            } catch (NumberFormatException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        Scanner scanner = new Scanner(myBoard.toString()).useDelimiter(",|\r\n");
        for (int i=0; i < 9; i++) 
        {
               for (int j=0; j < 9; j++) 
               {
                   myBoard.setValueAt(i, j, scanner.nextInt());
                   add(new JTextField(String.valueOf(Board[i][j])));
               }
        }
    }        

    }
    @Override
    public void setValueAt(int r, int c, int v) throws InputOutOfRangeException, ValueNotValidException 
    {
        Board[r][c] = v;
    }

    @Override
    public int getValueAt(int r, int c) throws InputOutOfRangeException 
    {
        return 0;
    }

    @Override
    public int[] displayPossibleValues(int r, int c)throws InputOutOfRangeException 
    {
        return null;
    }

    public String toString()
    {
            return output;
    }

    @Override
    public void newGame(File gameFile) 
    {
        {
            try
            {
                output = new Scanner(gameFile).useDelimiter("\\Z").next();
            }
                 catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                 }
            }
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:47:00.417

因为`static void main()`不适用于 Applet，所以它们具有与标准应用程序不同的入口点和生命周期。将初始化逻辑移至`void init()`.

参考[http://docs.oracle.com/javase/6/docs/api/java/applet/Applet.html](http://docs.oracle.com/javase/6/docs/api/java/applet/Applet.html)和[https://www.google.com/search?q=java+applet+lifecycle](https://www.google.com/search?q=java+applet+lifecycle)

此外，您在这里混合了 AWT 和 Swing。我认为应该使用 JApplet 而不是 Applet。

# android - 我可以将 OPENGL 用于逐帧动画吗？

> ID：12444937
> 
> 赞同：1
> 
> 时间：2012-09-16T06:46:00.333
> 
> 标签：android, opengl-es

我需要制作几个逐帧动画，每个动画最多包含 150 个全屏、480x800、帧、压缩 JPEG。

AnimationDrawable 会在前 10 帧左右超出 vm 预算时自行挂起。

在计时器上加载新位图的 SurfaceView 的帧速率非常慢，可能低于 5 fps。

由于我是 OpenGL 的新手，我想问一下在我的情况下它是否正确？

谢谢！:)

编辑：

加载jpges

```
 ByteArrayOutputStream stream = new ByteArrayOutputStream();
    BitmapFactory.decodeResource(getResources(), R.drawable.y1).compress(Bitmap.CompressFormat.JPEG, 80, stream);
    byeArr.add( stream.toByteArray() );

    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    BitmapFactory.decodeResource(getResources(), R.drawable.y2).compress(Bitmap.CompressFormat.JPEG, 80, stream);
    byeArr.add( stream.toByteArray() );

... and so on. 
```

和玩

```
@Override
public void onTick(long millisUntilFinished) {

    if ( i < byeArr.size() )
    {
    bitMap = BitmapFactory.decodeByteArray ( byeArr.get(i) , 0,  byeArr.get(i).length );
    } 
```

但加载 25 帧大约需要 3-5 秒。也许有办法加快速度？还有一种方法可以查看我有多少可用内存，即我可以加载多少帧？

谢谢

* * *

**edit2：实验发现可以保持350帧左右的数组，对于2个左右的全动画效果非常好。现在我只需要找到一种方法以某种方式将这些图片存储为字节，以便能够几乎实时加载它们，因为 decodeResource 有点慢。**

编辑 3：在编辑 2 中，我确保可以在一个数组中存储大约 350 帧，这对于一个动画来说已经足够了。

因此，我可以将当​​前动画所需的帧加载到字节数组中并播放动画。

然而问题是加载帧

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
BitmapFactory.decodeResource(getResources(), R.drawable.y1).compress(Bitmap.CompressFormat.JPEG, 80, stream);
byeArr.add( stream.toByteArray() ); 
```

需要太长时间。所以我需要找到一种方法来加快速度。假设我需要将 jpegs 作为字节数组存储在 res 或 assets 中，你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T07:26:15.927

首先将您的动画转换为视频流，然后使用[MediaMetadataRetriever.getFrameAtTime](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html#getFrameAtTime%28long,%20int%29)获取帧。如果获取正确的帧成为问题，您可能需要使用[ffmpeg](http://ffmpeg.org/)之类的库，请看[这里](https://stackoverflow.com/questions/2645041/ffmpeg-for-a-android-using-tutorial-ffmpeg-and-android-mk)。

另一种解决方案 - 如果 jpeg 集的总分配大小足够小 - 可能是将 jpeg 作为字节数组保存在内存中，并在需要时通过[BitmapFactory.decodeByteArray对其进行解码。](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray%28byte[],%20int,%20int%29)这将帮助您 1) 虚拟机预算 2) 缓慢的磁盘访问。

您可以使用以下方法从资源中获取原始数据。

```
byte[] getBytesFromResource(final int res) {
    byte[] buffer = null;
    InputStream input = null;

    try {
        input = getResources().openRawResource(res);
        buffer = new byte[input.available()];
        if (input.read(buffer, 0, buffer.length) != buffer.length) {
            buffer = null;
        }
    } catch (IOException e) {
        buffer = null;
    } finally {
        if (input != null) {
            try {
                input.close();
            } catch (IOException e) {}
        }
    }

    return buffer;
} 
```

# iphone - 如何在 UITableViewCell 上按下 UIButton 时为 UILabel 的值设置动画？

> ID：12444939
> 
> 赞同：1
> 
> 时间：2012-09-16T06:46:23.823
> 
> 标签：iphone, xcode, uitableview

一旦用户在我的 UITableViewCell 中按下 UIButton，我一直在尝试为 UILabel 的值设置动画。

问题是，在每个单元格中，我都放置了两个按钮（+ 和 -），它们可以更改用户拥有的特定项目的数量。问题是我需要让用户知道当他点击它时金额发生了变化。每次用户点击按钮时，客户端都希望在表示数量的数字上显示某种动画。

# python - Python浮点数不可调用

> ID：12444942
> 
> 赞同：-1
> 
> 时间：2012-09-16T06:47:18.830
> 
> 标签：python

我正在使用 python 和 pygame 进行进化实验，但这并不重要，它是一个不起作用的函数，我想你看看。

我收到的错误消息是浮动对象不可调用。它说问题出在第 205 行，它正在从第 51 行调用该函数。

我将发布我的所有代码，其中大部分与解决此问题无关。但我认为对你们有一个整体代码的想法很有用，请不要因为缺乏评论而讨厌我：P 它会到达那里！

谢谢

代码链接：http: [//pastebin.com/BBm7Ehax](http://pastebin.com/BBm7Ehax)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T06:48:59.947

第 51 行：

```
def distance(self,listx,listy): 
```

第 55 行：

```
self.distance=(((self.x-self.tcentrex)**2) + ((self.y-self.tcentrey)**2))**0.5 
```

您不能`self.distance`既是方法又是变量，并期望事情正常工作。

执行第 55 行时（在第一次`distance()`调用该方法期间），它会用一个值覆盖该方法（该方法是 at `self.distance`，因为它是`distance`被调用的方法 on `self`）`float`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T06:52:02.730

在第 55 行，在`distance`方法中，您将浮点值分配给`self.distance`. 因此，在您调用`distance`一次之后，`distance`该对象上的属性引用了一个浮点数，该浮点数是不可调用的。

# php - 剪掉10个字后的内容

> ID：12444945
> 
> 赞同：6
> 
> 时间：2012-09-16T06:47:43.197
> 
> 标签：php, string

> **可能重复：**
> [如何选择句子的前 10 个单词？](https://stackoverflow.com/questions/5956610/how-to-select-first-10-words-of-a-sentence)

我想显示内容词的 10 个词而不是字符

```
$string = 'Lorem ipsum dolor sit amet,consectetur adipiscing elit. Mauris ornare luctus diam sit amet mollis.'; 
```

结果应该是
“Lorem ipsum dolor sit amet,consectetur adipiscing elit. Mauris ornare”

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-16T06:50:40.617

试试这个功能：

```
function shorten_string($string, $wordsreturned)
{
  $retval = $string;
  $string = preg_replace('/(?<=\S,)(?=\S)/', ' ', $string);
  $string = str_replace("\n", " ", $string);
  $array = explode(" ", $string);
  if (count($array)<=$wordsreturned)
  {
    $retval = $string;
  }
  else
  {
    array_splice($array, $wordsreturned);
    $retval = implode(" ", $array)." ...";
  }
  return $retval;
} 
```

在你的文字上，像这样：

```
$string = 'Lorem ipsum dolor sit amet,consectetur adipiscing elit. Mauris ornare luctus diam sit amet mollis.';
$firsttenwords = shorten_string($string, 10); 
```

从[这里](http://www.nutt.net/2004/12/29/php-a-function-to-return-the-first-n-words-from-a-string/)。

**更新：**现在它符合空间要求，也符合换行要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T07:31:21.427

无论您在单词之间使用哪种“空格”，此版本都可以使用，并且可以轻松扩展以处理其他字符……它目前支持任何空格字符加 , . ; ? ！

```
function getSnippet( $str, $wordCount = 10 ) {
  return implode( 
    '', 
    array_slice( 
      preg_split(
        '/([\s,\.;\?\!]+)/', 
        $str, 
        $wordCount*2+1, 
        PREG_SPLIT_DELIM_CAPTURE
      ),
      0,
      $wordCount*2-1
    )
  );
} 
```

对于那些~~应该~~可能更喜欢原始格式:)

```
function getSnippet( $str, $wordCount = 10 ) {
  return implode( '', array_slice( preg_split('/([\s,\.;\?\!]+)/', $str, $wordCount*2+1, PREG_SPLIT_DELIM_CAPTURE), 0, $wordCount*2-1 ) );
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T06:51:56.737

尝试：

```
$str = 'Lorem ipsum dolor sit amet,consectetur adipiscing elit. Mauris ornare luctus diam sit amet mollis.';
$arr = explode(" ", str_replace(",", ", ", $str));
for ($index = 0; $index < 10; $index++) {
    echo $arr[$index]. " ";
} 
```

**输出：**
Lorem ipsum dolor sit amet，consectetur adipiscing elit。毛里斯·奥尔纳雷

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-16T10:02:05.937

我们可以使用 str_word_count 函数检索字符串中的单词。

有关该功能的更多说明，请参阅以下链接

[http://php.net/manual/en/function.str-word-count.php](http://php.net/manual/en/function.str-word-count.php)

要在字符串中仅显示 10 个单词，请参考以下代码片段

```
 $str='Lorem ipsum dolor sit amet,consectetur adipiscing elit. Mauris ornare luctus diam sit amet mollis.';
    $words=str_word_count($str,true);
    $a=array_slice($words,10);
    $s=join('',$a);
    echo $s; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-16T07:03:49.017

像这样试试

```
$str = 'Lorem ipsum dolor sit amet,consectetur adipiscing elit. Mauris ornare luctus diam sit amet mollis.';
$arr = explode(" ", str_replace(",",", ",$str), 10);
echo implode(" ", $arr); 
```

# c# - 错误：无效的回发或回调参数

> ID：12444946
> 
> 赞同：5
> 
> 时间：2012-09-16T06:48:02.060
> 
> 标签：c#, asp.net, ajax, button, gridview

使用gridview单击按钮时出现以下错误

```
 Server Error in '/' Application.
Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.ArgumentException: Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[ArgumentException: Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation.]
   System.Web.UI.ClientScriptManager.ValidateEvent(String uniqueId, String argument) +144
   System.Web.UI.Control.ValidateEvent(String uniqueID, String eventArgument) +111
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +29
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +35
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17929 
```

当我在gridview中按下一个按钮时会发生这种情况，奇怪的是我有另一个gridview，在运行不同代码的列中也有自定义按钮，但没有给出错误。下面是页面的代码和代码隐藏。

```
namespace CCCC
{
    public partial class drivermangement : System.Web.UI.MasterPage
    {

        protected void Page_Load(object sender, EventArgs e)
        {
            if (System.Web.HttpContext.Current.User.Identity.IsAuthenticated)
            {
                if (Roles.IsUserInRole("Administrator"))
                {
                    LoggedInUser.Value = Convert.ToString(Request.QueryString["driver"]);
                }
                else
                {
                    LoggedInUser.Value = Membership.GetUser().UserName.ToString();
                }
                DayOfTheWeekHiddenField.Value = Convert.ToString(Request.QueryString["dow"]);
            }
            else
            {
                Response.Redirect("default.aspx");
            }
            if (NewCustomersGrid.Rows.Count == 0)
            {
                NewCustomersLabel.Visible = false;
            }
            else
            {
                NewCustomersLabel.Visible = true;
            }
            if (NeedCompostGrid.Rows.Count == 0)
            {
                NeedCompostLabel.Visible = false;
            }
            else
            {
                NeedCompostLabel.Visible = true;
            }
            if (CanceledGrid.Rows.Count == 0)
            {
                CanceledLabel.Visible = false;
            }
            else
            {
                CanceledLabel.Visible = true;
            }
            if (VacationGrid.Rows.Count == 0)
            {
                VacationLabel.Visible = false;
            }
            else
            {
                VacationLabel.Visible = true;
            }
            if (NewCustomersGrid0.Rows.Count == 0)
            {
                NewCustomersLabel0.Visible = false;
            }
            else
            {
                NewCustomersLabel0.Visible = true;
            }
            if (NeedCompostGrid0.Rows.Count == 0)
            {
                NeedCompostLabel0.Visible = false;
            }
            else
            {
                NeedCompostLabel0.Visible = true;
            }
            if (CanceledGrid0.Rows.Count == 0)
            {
                CanceledLabel0.Visible = false;
            }
            else
            {
                CanceledLabel0.Visible = true;
            }
        }

        protected void NewCustomerDoneButton_Click(object sender, EventArgs e)
        {
            int CustomerID = Convert.ToInt32(((Button)sender).CommandArgument);
            string CustomerBinNeedAcknowledged = "Yes";
            string strConnString = "Data Source";
            using (SqlConnection con = new SqlConnection(strConnString))
            {
                using (SqlCommand cmd = new SqlCommand())
                {
                    cmd.Connection = con;
                    cmd.CommandType = CommandType.Text;
                    cmd.CommandText = "UPDATE Customers SET CustomerBinNeedAcknowledged=@CustomerBinNeedAcknowledged WHERE CustomerID=@CustomerID";
                    cmd.Parameters.AddWithValue("@CustomerBinNeedAcknowledged", CustomerBinNeedAcknowledged);
                    cmd.Parameters.AddWithValue("@CustomerId", CustomerID);
                    con.Open();
                    cmd.ExecuteNonQuery();
                    con.Close();
                }
            } 
       } 
```

和实际页面：

```
<%@ Master Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" Inherits="CCCCCC.drivermangement" CodeBehind="drivermangement.master.cs" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <asp:HiddenField ID="LoggedInUser" runat="server" />
    <asp:HiddenField ID="DayOfTheWeekHiddenField" runat="server" />
    <ajaxToolkit:TabContainer ID="RoutingTabs" runat="server" ActiveTabIndex="0" 
        Width="900px">
        <ajaxToolkit:TabPanel runat="server" HeaderText="Pre-Route" ID="PreRouteTab">
        <ContentTemplate>
<br />
<asp:Label ID="NewCustomersLabel" runat="server" 
        style="font-weight: 700; font-size: large; color: #009933" Text="New Customers"></asp:Label>

<asp:GridView ID="NewCustomersGrid" runat="server" AllowPaging="True" AutoGenerateColumns="False" BackColor="White" 
        BorderColor="#999999" BorderStyle="Solid" BorderWidth="1px" CellPadding="3" 
        DataKeyNames="CustomerId" DataSourceID="NewCustomers" ForeColor="Black" 
        GridLines="Vertical">
<AlternatingRowStyle BackColor="#99FF99" ></AlternatingRowStyle>
<Columns>
<asp:BoundField DataField="CustomerFullName" HeaderText="Name" 
                SortExpression="CustomerFullName" />
<asp:BoundField DataField="CustomerFullAddress" HeaderText="Address" 
                SortExpression="CustomerFullAddress" />
<asp:BoundField DataField="CustomerNeedsBin" HeaderText="Needs Bin?" 
        SortExpression="CustomerNeedsBin" />
<asp:TemplateField ShowHeader="False"><ItemTemplate>
                <asp:Button ID="NewCustomerDoneButton" runat="server" CommandName="" 
                Text="Done" CommandArgument='<%# Eval("CustomerID") %>' OnClick="NewCustomerDoneButton_Click" CausesValidation="False" />

</ItemTemplate>
</asp:TemplateField>
</Columns>
<asp:SqlDataSource ID="NewCustomers" runat="server" 
        ConnectionString="<%$ ConnectionStrings:tcc_customersConnectionString %>" 

                SelectCommand="SELECT [CustomerId], [CustomerStatus], [CustomerFullName], [CompanyName], [CustomerFullAddress], [CustomerPickUpDay], [CustomerPickUpDay2], [CustomerDriver], [CustomerNeedsBin], [CustomerBinNeedAcknowledged] FROM [Customers] WHERE (([CustomerBinNeedAcknowledged] = @CustomerBinNeedAcknowledged) AND ([CustomerNeedsBin] = @CustomerNeedsBin) AND ([CustomerDriver] = @CustomerDriver) AND ([CustomerStatus] = @CustomerStatus) AND ([CustomerPickUpDay] = @CustomerPickUpDay OR [CustomerPickUpDay2] = @CustomerPickUpDay2))"><SelectParameters>
<asp:Parameter DefaultValue="No" Name="CustomerBinNeedAcknowledged" Type="String" />
<asp:Parameter DefaultValue="Yes" Name="CustomerNeedsBin" Type="String" />
<asp:ControlParameter ControlID="LoggedInUser" Name="CustomerDriver" 
            PropertyName="Value" Type="String"></asp:ControlParameter>
<asp:Parameter DefaultValue="New" Name="CustomerStatus" Type="String" />
<asp:ControlParameter ControlID="DayOfTheWeekHiddenField" Name="CustomerPickUpDay" 
                PropertyName="Value" Type="String" ></asp:ControlParameter>
<asp:ControlParameter ControlID="DayOfTheWeekHiddenField" 
            Name="CustomerPickUpDay2" PropertyName="Value" Type="String" />
</SelectParameters>
</asp:SqlDataSource>

</ContentTemplate>

</ajaxToolkit:TabPanel>
        <ajaxToolkit:TabPanel runat="server" HeaderText="Post-Route" ID="PostRouteTab"><ContentTemplate> 
```

我现在想知道，这与 in 在`GridView`里面有什么关系`Ajax Tab Container`吗？因为我的另一张工作正常的桌子不是......

注意：由于字符限制，不得不从页面中删除一些代码

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-16T19:57:23.260

1) GridView 中的回发或回调参数无效 问题可能是：您正在将 Page_Load 事件中的数据与对象数据源或手动绑定与函数调用绑定。这将使您的 GridView 在任何控件的每个事件触发上绑定数据。

当您使用 OnRowCommand 触发任何 GridView 命令时，在 RowCommand 触发之前，您的 GridView 将重新绑定，并且其中的所有控件都将分配给新的 id。所以 RowCommand 无法获取触发事件的项目。

GridView 中的无效回发或回调参数的解决方案：您可以在此 if 条件内绑定数据

```
if (!IsPostBack)
{
    //Your code for Bind data 
} 
```

如果这不起作用，此代码肯定会为您提供解决方案，然后检查是否有任何其他控件没有给出错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:43:14.697

您是否通过 javascript 或 Ajax 更新 Grid 或任何此类控件。

如果是这种情况，那么您可能会遇到这种情况。可能的解决方案是将 EnableEventValidation 设置为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:52:05.893

有几件事要尝试

1.  在您的`Page Load`事件中，添加一个检查`!Page.IsPostBack`并将非身份验证代码块移动到那里。
2.  尝试使用 a`LinkButton`而不是常规按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T09:54:37.763

这可能是因为您正在使用任何第三方控件。

我也有这个错误。在我的情况下，我在更新面板和中继器控件中有一个中继器控件，我使用的是 Telerik datepicker 控件。它在 IE 中运行良好，但在 Mozilla 和 chrome 中运行良好。我通过从 chrome 和 IE 发送请求检查了这两种情况下的表单数据，发现触发控件值略有不同。我使用 Telerik RadAjaxmanager 而不是 updatepanel 错误消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-25T06:05:04.607

我测试了所有上述解决方案和其他帖子，但我的问题还没有解决。

在服务器端的网格事件结束时取消事件时，我的问题得到了解决。

**当我们使用 gridview 的编辑事件时，就会出现这种类型的问题。只需添加 e.Cancel = true; 在活动结束时。**

```
protected void grdEducation_RowEditing(object sender, GridViewEditEventArgs e)
{
  // do your processing ... 

  // at end     
  e.Cancel = true;
} 
```

# bash - 在while循环中丢失环境

> ID：12444949
> 
> 赞同：4
> 
> 时间：2012-09-16T06:48:14.180
> 
> 标签：bash

一个有趣的小 bash 预告片，我很想解释一下。

我拥有的两个循环结构虽然是相同的，但显然不是。似乎在进行`while`循环时管道与重定向存在一些差异。

**输入文件**

给定使用此内容调用的示例文件`values.txt`：

```
1
2
3
4
5
6 
```

**管道**到 while

```
$ value=0; cat values.txt | while read var; do value=`expr $value + $var`; done
$ echo $value
0 
```

**重定向**到 while

```
$ value=0; while read var; do value=`expr $value + $var`; done < values.txt
$ echo $value
21 
```

简而言之，显然在第一个版本中，`while`循环的每次迭代都有效地执行，`()`而在第二个版本中，每次迭代都以`{}`

`()`问题不在于和之间的区别`{}`。我的问题是是什么*导致*`while`了循环行为的这种差异？

是否有合乎逻辑的原因他们应该表现不同，或者这只是早期做出的错误选择，出于兼容性原因无法更改？是否有可能通过管道`while`获取`{}`行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T07:39:33.637

这是一个已知问题，并在此处进行了很好的解释：http: [//mywiki.wooledge.org/BashFAQ/024](http://mywiki.wooledge.org/BashFAQ/024)

引用最具解释性的部分：

> 在这种情况下，不同的 shell 表现出不同的行为：
> 
> *   **BourneShell**在任何输入或输出（循环、案例等）但简单命令被重定向时创建一个子shell，无论是通过使用管道还是通过重定向运算符（'<'，'>'）。
> *   **只有当循环是管道的一部分时，**BASH才会创建一个新进程。****
> ***   **仅当循环是管道的一部分时，**KornShell才会创建它，但如果循环是它的最后一部分，则不会创建它。*******   **POSIX**指定 bash 行为，但作为扩展允许管道的任何或所有部分在没有子 shell 的情况下运行（因此也允许 KornShell 行为）。****

 ****至于最后一个问题：是的，在某些 shell 中是可能的，并且只有在 bash >=4.2 的情况下才可以在 bash 中使用，并且在代码之前禁用作业控制并使用以下代码启用 lastpipe 选项：`set +m; shopt -s lastpipe`****

# php - PHP - 我有帖子 ID、帖子 slug 和帖子标题。如果给定一个，我想得到其他两个中的任何一个。我怎样才能最好地将它存储在一个数组中？

> ID：12444951
> 
> 赞同：3
> 
> 时间：2012-09-16T06:48:27.050
> 
> 标签：php, arrays, sorting

我有来自博客的数据，包括帖子 ID、标题和 slug。都是独一无二的。（这个问题被简化了，但基本上我有三位数据）

我*可能会*像这样表示数据

```
$data = array(

1 => array('slug' => 'post1', 'title' => 'title1'),
2 => array('slug' => 'slug123', 'title' => 'a test title'),
3 => array('slug' => 'slugfoo', 'title' => 'etc'),
4 => array('slug' => 'slugbar', 'title' => 'foobar'),

) 
```

我应该如何保存该数据，以及如何检索该数据？

因为最基本的做法似乎很慢：

```
function get_slug_from_id($id) {  //not slow
global $data;
return $data[$id]['slug'];
}

function get id_from_slug($slug) { // seems slow for big array

global $data;
foreach($data as $id => $val ) {
if ($val['slug'] == $slug) {
return $id;
}
}

}

etc ... 
```

我应该使用什么技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:44:36.653

> 我应该使用什么技巧？

用您的内存换取 CPU - 将索引与您的数据一起存储。例如，您可以将其视为电话簿中的索引。实际上，数据库正在使用几乎这样的技术，尽管更加复杂和优化。

但它也适用于像这样的简单情况：

```
function build_slug_index() {
    global $slug_index, $data;

    $slug_index = array();

    foreach ($data as $id => $val) {
        $slug_index[$val['slug']] = $id;
    }
}

function get_id_from_slug_indexed($slug) {
    global $slug_index;

    return $slug_index[$slug];
} 
```

然后不要忘记在搜索数据之前建立索引。

与我的计算机上的普通搜索相比，这种简单的方法几乎可以提供两倍的速度：

```
C:\WebDev>php search.php
W/o index - elapsed: 2.7301969528198
W/index - elapsed: 1.3415520191193 
```

# audiounit - 如何从 AudioButterList 获取样本计数

> ID：12444954
> 
> 赞同：0
> 
> 时间：2012-09-16T06:48:50.387
> 
> 标签：audiounit

我从 wav 文件中获取 AudioBufferList。（采样频率为44100Hz，时间长度为2秒）。但是，我无法获得 44100*2=88200 样本。我得到一个包含 512 个 NumberBuffers 的 AudioBufferList。如何从 AudioBufferList 中获取样本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:15:32.953

您使用以下方法获取文件中的帧数：

```
AudioUnitGetProperty(<#AudioUnit inUnit#>, kAudioFilePropertyAudioDataPacketCount, <#AudioUnitScope inScope#>, <#AudioUnitElement inElement#>, <#void *outData#>, <#UInt32 *ioDataSize#>) 
```

# python - 无法在 webapp2 中使用套接字库

> ID：12444956
> 
> 赞同：0
> 
> 时间：2012-09-16T06:49:43.303
> 
> 标签：python, google-app-engine, sockets, webapp2

由于某种原因，我无法在 webapp2 中完全使用套接字库。在打印库的目录内容时，我得到以下信息：

```
[
 'AF_INET', 'SOCK_DGRAM', 'SOCK_STREAM', '_GLOBAL_DEFAULT_TIMEOUT',
 '__all__', '__builtins__', '__doc__', '__file__', '__loader__', '__name__',
 '__package__', '_fileobject', 'error', 'gaierror', 'getdefaulttimeout',
 'herror', 'setdefaulttimeout', 'ssl', 'timeout'
] 
```

如您所见，这不是完整的套接字库（它还缺少 socket() 构造函数）。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:30:14.873

因为在 AppEngine中[明确禁止](https://developers.google.com/appengine/docs/python/runtime#The_Sandbox)打开套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T16:03:54.207

好消息！谷歌最近发布了一个应用引擎的套接字 API，文档在这里：

[https://developers.google.com/appengine/docs/python/sockets/](https://developers.google.com/appengine/docs/python/sockets/)

它仍处于预览版本中（截至 2014 年 3 月），它有其自身的许多限制，但它应该能够处理许多情况。

# html - 下拉菜单截断或出现在 div 后面

> ID：12444958
> 
> 赞同：13
> 
> 时间：2012-09-16T06:50:00.667
> 
> 标签：html, css, drop-down-menu

我有一个下拉菜单，它出现在我的图像转换库 div 后面。下面是它的外观图像以及它的 HTML 和 CSS。

![在此处输入图像描述](../Images/14848d59e3a46749dd8a760714e936c2.png)

HTML：

```
<body>
<div id="top_bar">
<div id="top_inner">
<div id="logo"> <a href="http://www.edosbornephotography.com"><img src="images/logo.gif" alt="Ed Osborne" width="225" height="115" class="logo"></a></div>
<div class="nav">
<ul class = "menu" >
            <li> <a href = "#" > Home </a> </li>
            <li><a href = "#" > Packages </a>
            <li><a href = "#" > Weddings </a>
            <li><a href = "#" id="left" > Lifestyle </a>
        <ul class = "submenu" >
            <li> <a href = "#" > Families </a> </li>
            <li> <a href = "#"> Newborn/Child </a> </li>
            <li> <a href = "#" > Portraits </a> </li>
        </ul>
        </li>

        <li> <a href = "#" > Blog </a> </li>
        <li><a href = "#" id="left"> Abous Us </a>
        <ul class = "submenu" >
        <li> <a href = "#" > Ed Osborne </a> </li>
        <li> <a href = "#" > Testimonials </a> </li>
        <li> <a href = "#" > FAQs </a> </li>
        </ul>
        </li>

        <li> <a href = "#" > Contact Us </a> </li>
        <li> <a href = "#" > Links </a> </li>
        </ul>
    </div>
</div>
</div>

<div id="main">  

<div id="smart-gallery">
    <a href="images/cubagallery-img-1.jpg">
        <img src="images/cubagallery-img-1.jpg" /></a> 

    <a href="images/cubagallery-img-15.jpg">
        <img src="images/cubagallery-img-15.jpg" /></a> 

    <a href="images/cubagallery-img-3.jpg">
        <img src="images/cubagallery-img-3.jpg" /></a> 

    <a href="images/cubagallery-img-4.jpg"></a>
        <img src="images/cubagallery-img-4.jpg" /></a>
</div>

</div> 
```

CSS：

```
.min-gallery
{
width: 927px;
height: 615px;
border: solid 1px black;
background-color: Black;
background: url(../images/bg.jpg);
margin: auto;
margin-left: 232px;
}

.min-gallery .preview
{
width: 852px;
height: 493px;
margin-top: 36px;
margin-left: 36px;
margin-right: 36px;
position: relative;
border: solid 2px black;
overflow: hidden;
background-color: White;
}

.min-gallery .preview img
{
/* width: 795px;             height: 525px;*/
position: absolute;
}

.min-gallery .bottom
{
width: 100%;
height: 98px;
color: Gray;
font-family: Arial;
font-size: 1em;
font-weight: bold;
overflow: hidden;
}

#top_bar {
width: 100%;
height: 145px;
background: #000000;
padding-bottom: 20px;
}

#top_inner {
text-align: center;
margin: 0 auto;
width: 1000px;
height: 144px;
}

.nav {
margin: 0 auto;
position: relative;
padding-top: 100px;
}

ul.menu {
list-style: none;
margin: 0;
float: left;
background: #222;
font-size: 1.2em;
background: url(../images/topnav_bg.gif) repeat-x;
}
ul.menu li {
float: left;
margin: 0;  
position: relative; 
}
ul.menu li a{
padding: 10px 18px;
color: #fff;
display: block;
text-decoration: none;
float: left;
}

ul.menu li a#left{
padding: 10px 5px;
color: #fff;
display: block;
text-decoration: none;
float: left;
}

ul.menu li a:hover {
background: url(../images/topnav_hover.gif) no-repeat center top;
}

ul.menu li span { 
width: 11px;
height: 35px;
float: left;
background: url(../images/subnav_btn.gif) no-repeat center top;
}

ul.menu li span.subhover {
background-position: center bottom; cursor: pointer;
}

ul.menu li ul.submenu {
list-style: none;
position: absolute; 
left: 0; top: 35px;
background: #333;
margin: 0; padding: 0;
display: none;
float: left;
width: 170px;
-moz-border-radius-bottomleft: 5px;
-moz-border-radius-bottomright: 5px;
-webkit-border-bottom-left-radius: 5px;
-webkit-border-bottom-right-radius: 5px;
border: 1px solid #111;
}

ul.menu li ul.submenu li{
margin: 0; padding: 0;
border-top: 1px solid #252525; 
border-bottom: 1px solid #444; 
clear: both;
width: 170px;
}

html ul.menu li ul.submenu li a {
float: left;
width: 122px;
padding-left: 30px;
text-align: left;
} 
```

当我从 .min-gallery .preview img 中删除 position:absolute 时，下拉菜单出现在顶部，这就是我想要的，但图像确实停止变化，只停留在一个图像上。

有人有快速修复吗？抱歉粘贴了所有代码，但我不知道我还能如何向你们表达我的观点

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-16T06:57:19.717

设置下拉菜单的较高 z-index。

```
.submenu { z-index: 999; } 
```

原因“具有较大堆栈顺序的元素始终位于具有较低堆栈顺序的元素之前。”

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-16T06:54:39.893

为您的下拉菜单使用 z-index。

```
.submenu { z-index: 1; } 
```

另外，作为旁注，如果您使用前缀属性，您还应该使用 spec 属性，该属性应该出现在供应商特定前缀之后。例子：

```
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px; 
```

当供应商支持标准属性时，您不必更改代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-31T00:10:26.983

在父元素或子元素中找到溢出属性并删除溢出属性。

不客气

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-06T09:28:55.013

采用

> .submenu { z-index: 1;position :relative}

# java - 递归计算深度

> ID：12444961
> 
> 赞同：1
> 
> 时间：2012-09-16T06:50:43.853
> 
> 标签：java

我们有一些输入链接：
“http://test.com” 这个链接有链接：
“http://test.com”、“http://test.com/some”、“http://google. com”
和“http://test.com/some”有链接：“http://facebook.com”、“some.com”

需要的结果是：
主要步骤：0 链接：“http://test.com” ExtLinksCount：1

主要步骤：1 链接：“http://test.com/some” ExtLinksCount：2

我计算了extlinks，但我不知道如何计算递归步骤

```
public void info(String url) throws IOException {

        if (!parsedLinks.contains(url)) {

            parsedLinks.add(url);
            String[] links =  hp.getLinks(url);
            System.out.println("Link : " + url + "\n"
                              +"ExtLinksCount : " + externalLinksCount(links) + "\n"
                              +"Steps to main : " + step
                              );
            String strippedLink;

            for (int i = 0; i < links.length; i++) {

                strippedLink = LinkParser.parseLink(links[i]);

                if ( strippedLink.contains(this.baseUrl) ) {
                    ++ step; 
                    info(links[i]);
                }

            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:55:10.330

如何将变量“步骤”添加到您的构造函数。您已经有了增加它的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:06:49.573

如果您想确定从“主” URL 开始到达某个 URL 所需的步骤数，跟踪深度并不总能获得所需的结果，因为递归实现的行为类似于深度优先搜索。

考虑下图：`A -> [B, C]; B -> [C]`. 调用`info(A)`您将遍历到 B 和 C 的链接。首先，您调用`info(B)`，将距离 (A, B) 设置为 1。现在，从调用 到`info(B)`，您调用`info(C)`，将距离 (A, C) 设置为 2 `info(C)`。`info(B)`返回，然后您`info(C)`再次调用 from `info(A)`，但此调用立即返回，而不会将距离 (A, C) 更新为 1，因为 C 已经在已解析链接的集合中。

使用递归，您可以尝试这样的事情（伪代码）：

```
info(url):
    for link in links(url):
        if link not in visited or visited[link] > visited[url] + 1:
            visited[link] = visited[url] + 1
            info(link) 
```

where`visited`是一个映射，将 URL 映射到它们与主 URL 的距离，被初始化以便`visited[main] = 0`. 但是，这仍然会多次访问某些链接，因此使用广度优先搜索会更有效：

```
info(main):
    visited = map{main: 0}
    queue = queue(main)
    while queue not empty:
        url = queue.pop()
        for link in links(url):
            if link not in visited:
                visited[link] = visited[url] + 1
                queue.append(link) 
```

# c# - 从文本框中获取电子邮件并使用 Gmail 发送

> ID：12444974
> 
> 赞同：0
> 
> 时间：2012-09-16T06:52:43.290
> 
> 标签：c#, asp.net, email

看看我背后的电子邮件代码。

```
 protected void Button1_Click(object sender, EventArgs e)
{

    try
    {
        MailMessage mail = new MailMessage();
        mail.To.Add("color.shadow@yahoo.com");

        mail.From = new MailAddress("abc@gmail.com");
        mail.Subject = "Reservation Status";

        string Body = "Greeting from us." +
                      " You may view your booking details at your profile now." +
                      " Have a nice day." +
                      "Thank you.";
        mail.Body = Body;

        mail.IsBodyHtml = true;

        SmtpClient smtp = new SmtpClient("localhost", 25);
        smtp.Host = "smtp.gmail.com"; 
        smtp.Credentials = new System.Net.NetworkCredential
             (abc@gmail.com", "abcdef");

        smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
        smtp.EnableSsl = true;

        smtp.Send(mail);
        Label1.Text = "Mail Send...";
    }
    catch (Exception ex)
    {
        Label1.Text = ex.Message;
    }
} 
```

在此代码中，我必须手动输入收件人电子邮件。我的问题是如何将电子邮件输入到文本框中，而不是`mail.To.Add("color.shadow@yahoo.com");` 提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:55:52.283

如果您创建`mail.To.Add("color.shadow@yahoo.com");`了`mail.To.Add(textBoxEmail.Text);`一个名为`textBoxEmail`.

# python - 如何在我的应用程序中分发 ruby 解释器

> ID：12444976
> 
> 赞同：2
> 
> 时间：2012-09-16T06:52:51.740
> 
> 标签：python, ruby

> **可能重复：**
> [分发 Ruby/Python 桌面应用程序](https://stackoverflow.com/questions/940149/distributing-ruby-python-desktop-apps)

对于 python，我们有 py2exe、py2app、freeze 之类的东西。

我只想要一个可运行的应用程序；它甚至可以不是 exe 或应用程序。我只想将 ruby​​/python 解释器与所有库和我的应用程序一起分发给用户。它更像是应用程序的嵌入式版本。

有没有这样的工具用于 ruby​​（也许还有 python）？如果是跨平台的就更好了，包括OSX、windows和linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:55:42.890

如果您使用 jruby，您可以将其编译为可执行的 JAR。请参阅此答案：[创建可部署的 jruby JAR 文件](https://stackoverflow.com/a/5758996/125816)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T07:00:50.387

[Shoes](http://shoesrb.com/)允许您为三个平台打包 Ruby 应用程序。

[OneClick Ruby Application Builder](http://rubyforge.org/projects/ocra/)可以为 Ruby 脚本构建独立的 .exe 文件。

免责声明：我没有使用过这两种工具，所以我不能保证它们的可用性或稳定性。

# python - “Josephus-p‌r‌o‌b‌l‌e‌m”在python中使用列表

> ID：12444979
> 
> 赞同：9
> 
> 时间：2012-09-16T06:53:02.867
> 
> 标签：python, list, josephus

我想知道是否可以在 python 中使用 list 来解决 Josepheus 问题。

简单来说，约瑟夫斯问题就是在循环排列中找到一个位置，如果使用预先知道的跳过参数处理执行，这将是安全的。

例如：给定一个圆形排列，例如`[1,2,3,4,5,6,7]`跳过参数为 3，人员将按顺序执行，`3,6,2,7,5,1`并且位置`4`将是安全的。

一段时间以来，我一直在尝试使用 list 来解决这个问题，但是索引位置对我来说变得难以处理。

```
 a=[x for x in range(1,11)]
 skip=2
 step=2
 while (len(a)!=1):
   value=a[step-1]
   a.remove(value)
   n=len(a)
   step=step+skip
   large=max(a)
   if step>=n:        
      diff=abs(large-value)
      step=diff%skip
   print a 
```

**用代码片段更新**了问题，但我认为我的逻辑不正确。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-16T07:10:12.937

很简单，您可以使用`list.pop(i)`循环删除每个受害者（并获取他的 ID）。然后，我们只需要担心包装索引，您可以通过将跳过的索引 mod 剩余囚犯的数量来做到这一点。

那么，问题的解决方案就变成了

```
def josephus(ls, skip):
    skip -= 1 # pop automatically skips the dead guy
    idx = skip
    while len(ls) > 1:
        print(ls.pop(idx)) # kill prisoner at idx
        idx = (idx + skip) % len(ls)
    print('survivor: ', ls[0]) 
```

测试输出：

```
>>> josephus([1,2,3,4,5,6,7], 3)
3
6
2
7
5
1
survivor:  4 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-11T06:26:02.240

```
In [96]: def josephus(ls, skip):
    ...:     from collections import deque
    ...:     d = deque(ls)
    ...:     while len(d)>1:
    ...:         d.rotate(-skip)
    ...:         print(d.pop())
    ...:     print('survivor:' , d.pop())
    ...:     

In [97]: josephus([1,2,3,4,5,6,7], 3)
3
6
2
7
5
1
survivor: 4 
```

如果不想计算索引，可以使用`deque`数据结构。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-13T21:47:02.613

我的解决方案使用了我在网上找到的一个数学技巧：[https](https://www.youtube.com/watch?v=uCsD3ZGzMgE) ://www.youtube.com/watch?v=uCsD3ZGzMgE 它使用二进制方式来写圆圈中的人数和幸存者所在的位置。结果是一样的，代码更短。

代码是这样的：

```
numar_persoane = int(input("How many people are in the circle?\n")) #here we manually insert the number of people in the circle

x='{0:08b}'.format(int(numar_persoane)) #here we convert to binary

m=list(x) #here we transform it into a list

for i in range(0,len(m)): #here we remove the first '1' and append to the same list

    m.remove('1')

    m.append('1')

    break

w=''.join(m) #here we make it a string again

print("The survivor sits in position",int(w, 2)) #int(w, 2) makes our string a decimal number 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-24T14:13:33.323

对于初学者来说，它看起来更糟但更容易理解

```
def last(n):
    a=[x for x in range(1,n+1)]
    man_with_sword = 1
    print(a)
    while len(a)!=1:   
        if man_with_sword == a[len(a)-2]:  #man_with_sword before last in circle
            killed = a[len(a)-1]
            a.remove(killed)
            man_with_sword=a[0]
        elif man_with_sword==a[len(a)-1]:  #man_with_sword last in circle
            killed = a[0]
            a.remove(killed)
            man_with_sword=a[0]
        else:
            i=0
            while i < (len(a)//2): 
                i=a.index(man_with_sword)
                killed = a[a.index(man_with_sword)+1]
                a.remove(killed)
                #pass the sword 
                man_with_sword=a[i+1] # pass the sword to next ( we killed next)
                print (a, man_with_sword) #show who survived and sword owner
                i+=1
        print (a, man_with_sword,'next circle') #show who survived and sword owner 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-02T18:06:18.247

如果您只寻找最终结果，这里有一个简单的解决方案。

```
def JosephusProblem(people):
  binary = bin(people)  # Converting to binary
  winner = binary[3:]+binary[2]  # as the output looks like '0b101001'. removing 0b and adding the 1 to the end
  print('The winner is',int(winner,2))  #converting the binary  back to decimal 
```

如果您正在寻找此代码背后的数学原理，请观看此视频： [Josephus Problem(youTube)](https://www.youtube.com/watch?v=uCsD3ZGzMgE)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-24T12:57:08.143

总人数`n`和一个数字`k`，表示`k-1`跳过的人，在圈子里杀了第k个人。

```
def josephus(n, k): 
  if n == 1: 
    return 1
  else: 
    return (josephus(n - 1, k) + k-1) % n + 1

n = 14
k = 2            
print("The chosen place is ", josephus(n, k)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-11T03:29:06.747

这是我对您的问题的解决方案：

```
# simple queue implementation<ADT>
class Queue:
    def __init__(self):
        self.q = []
    def enqueue(self,data):
        self.q.insert(0,data)
    def dequeue(self):
        self.q.pop()
    def sizeQ(self):
        return len(self.q)
    def printQ(self):
        return self.q

lists = ["Josephus","Mark","Gladiator","Coward"]
to_die = 3
Q = Queue()
# inserting element into Q
for i in lists:
    Q.enqueue(i)
# for size > 1 
while Q.sizeP() > 1:
    for j in range(1,3): 
# every third element to be eliminated
         Q.enqueue(Q.dequeue())
    Q.dequeue()
print(Q.printQ()) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-05T03:50:28.397

```
def Last_Person(n):
    person = [x for x in range(1,n+1)]
    x = 0
    c = 1
    while len(person) > 1:
        if x == len(person) - 1:
            print("Round ", c, "- Here's who is left: ", person, "Person ", person[x], "killed person", person[0])
            person.pop(0)
            x = 0
            c = c+1
        elif x == len(person) - 2:
            print("Round ", c, "- Here's who is left: ", person, "Person ", person[x], "killed person", person[x + 1])
            person.pop(x+1)
            x = 0
            c = c + 1
        else:
            print("Round ", c, "- Here's who is left: ", person, "Person ", person[x], "killed person", person[x + 1])
            person.pop(x + 1)
            x = x + 1
            c = c + 1
    print("Person", person[x], "is the winner")

Last_Person(50) 
```

# php - 从本地数据库表更新远程数据库表

> ID：12444990
> 
> 赞同：1
> 
> 时间：2012-09-16T06:55:37.617
> 
> 标签：php, mysql

我想从本地数据库更新远程数据库，我已经编写了 php 脚本来做到这一点，但它显示了致命错误。

远程数据库和本地数据库具有相同的名称、相同的表、相同的字段。

我已经尝试过这种方式，但它不起作用。

```
 $tablename="pc_games";
    $database = 'games';

    $local_query = "SELECT * FROM $tablename LIMIT 100 OFFSET $remoterows";
    $local_result = mysql_query($local_query, $connection) or trigger_error("SQL", E_USER_ERROR);

    while($list=mysql_fetch_array($local_result))
    {
    $remote_update=mysql_query("INSERT INTO $tablename SETLECT * from $tablename");
    $remote_update_result = mysql_query($remote_update, $remote_connection) or trigger_error("SQL", E_USER_ERROR);
    } 
```

请参阅并建议任何可能的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:03:59.017

```
"INSERT INTO $tablename SETLECT * from $tablename" 
```

这是一个无效的 SQL 语句。SETLET 必须是 SELECT

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T07:04:44.057

您的远程查询有语法错误：`"INSERT INTO $tablename SETLECT * from $tablename"`。你的意思是`SELECT`而不是`SETLECT`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:05:26.920

替换代码：

```
$tablename="pc_games";
$database = 'games';

$local_query = "SELECT * FROM $tablename LIMIT 100 OFFSET $remoterows";
$local_result = mysql_query($local_query, $connection) or die(mysql_error());

while($list=mysql_fetch_array($local_result))
{
$remote_update=mysql_query("INSERT INTO $tablename SELECT * from $tablename");
$remote_update_result = mysql_query($remote_update, $remote_connection) or die (mysql_error());
} 
```

你做错了什么，是你打错了这一行：

```
$remote_update=mysql_query("INSERT INTO $tablename SETLECT * from $tablename"); 
```

请注意，您使用`SETLECT`了 ，而不是您打算使用的（也许）：`SELECT`。

我还惊叹于检测打字错误需要多长时间。

我将您所有的错误处理程序都更改为我在评论中提到的那些。将来使用它们。他们更好。

**更新：**你对你的代码做了什么？我刚刚意识到一些激烈的事情：

```
$remote_update=mysql_query("INSERT INTO $tablename SELECT * from $tablename");
$remote_update_result = mysql_query($remote_update, $remote_connection) or die (mysql_error()); 
```

首先，你正在运行`mysql_query`一个结果。其次，你没有插入任何东西`INSERT INTO $tablename`。是我的错，还是你做错了什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T07:11:23.963

1.  `while($list=mysql_fetch_array($local_result))` 当您绝对不需要时，为什么要遍历结果（使用）？

2.  为什么到处都将错误函数设置为：`trigger_error("SQL", E_USER_ERROR);`.

3.  为什么您仍在使用`mysql_*`数据库方法？

4.  如果您只需要从另一个表中插入数据，只需输入：

* * *

```
mysql_query("INSERT INTO $tablename SELECT * FROM $tablename LIMIT 100 OFFSET $remoterows") or die(mysql_error()); 
```

并完成它。

# php - SSL Step Wise 初学者实施指南

> ID：12444992
> 
> 赞同：0
> 
> 时间：2012-09-16T06:55:44.577
> 
> 标签：php, ssl, wamp, implementation

在阅读了几个地方之后，我对 SSL 有了一个很好的了解。但是自学 PHP 开发人员可以从哪里学习如何实施 SSL - 有没有一步一步的指南？

具体疑问 - SSL 证书将是一个文本文件、一个可安装的应用程序、一个 XML ?? 什么

如何制作自己的 SSL 证书，有 STEP WISE GUIDE 吗？（如果它落在先进的一侧，现在可以停车。

我已阅读该代码与 SSL 加密无关。安全会话是由服务器在调用 HTTPS 协议时建立的，其中只需要安全访问的网页保存在特定文件夹中。

但是假设我购买了一个 SSL 证书（来自 Verisign、GoDaddy 或其他人），并且我需要通过 SSL 访问的以下页面，我将如何去做以及我应该怎么做。

```
<?php
echo " This was not changed for sure ! " ;
?> 
```

我知道我不应该对所有页面进行 SSL 保护，因为（en）解密会影响性能。我现在只需要一个非常基本的实现示例。性能提示可以稍后学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:39:43.600

So as I see it you want to create a certificate if so the following links might be helpful (you're using LAMP right?) : [1](http://slacksite.com/apache/certificate.php) [2](https://developers.google.com/search-appliance/kb/secure/external-ssl) [3](https://devcenter.heroku.com/articles/ssl-certificate-self). WAMP related guides: [1](http://www.viduka.info/eblog/kebic/how-to-setup-https-ssl-on-wamp.html) [2](http://forum.wampserver.com/read.php?2,32986)

# php - 在控制器中验证表单时，对于下拉菜单和复选框/单选框是否足够修剪，或者我是否也应该始终使用 xss_clean？

> ID：12444994
> 
> 赞同：0
> 
> 时间：2012-09-16T06:55:56.083
> 
> 标签：php, codeigniter

验证表单时是否足够修剪下拉菜单和复选框/单选框，还是我也应该始终使用 xss_clean？

我想我应该但是，有人可以向我解释一下，为什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:12:55.267

始终使用 Codeigniters`$this->input->post()`并使用其 xss-clean 引擎是一种很好的做法，因为它在框架中提供。

此外，即使您有表单操作，例如。'example.com/register' 并只修剪复选框值，例如`$subscribe = trim($_POST['subscribe'])`，我可以在我的网站上制作另一个表单，该表单也将操作设置为 'example.com/register'，但输入类型 ='text' 为 'subscribe' 字段。从那里我可以将各种讨厌的东西发布到您的网站上。

# android - “AndEngine”的文档在哪里？

> ID：12444998
> 
> 赞同：4
> 
> 时间：2012-09-16T06:56:37.717
> 
> 标签：android, andengine

我想获取 AndEngine 文档，它在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T17:52:49.613

AndEngineExamples[是](https://github.com/nicolasgramlich/AndEngineExamples)文档。它们几乎涵盖了你可以用 AndEngine 做的每一件事。当有问题时，仔细查看方法名称及其参数应该可以很好地了解方法将要做什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T09:14:38.313

这是一个棘手的问题，因为没有。只要搜索 Stack Overflow 和 AndEngine 论坛，您可能遇到的大部分问题都可以在这两个地方找到答案，并且有很多用户愿意提供帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T05:03:37.250

开源游戏引擎的可悲之处在于它们缺乏适当的文档，无论是 Cocos-2dx 还是 AndEngine。不过你可以去博客为你查询或者有今年1月发布的 [AndEngine Cook Book](https://rads.stackoverflow.com/amzn/click/com/184951898X)

而且我还发现这些关于 AndEngine 的链接可能对你有用

[Andengine 文档](http://srcrr.com/android/AndEngine/GLES2/2012.03.27/reference/classes.html)

[初学者教程](http://www.andengine.org/forums/tutorials/mimminito-s-tutorial-list-t417.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T09:30:00.520

您可以阅读有关 Android 游戏开发的一本书，“Learning Android Game Programming: A Hands-On Guide to Build Your First Android Game” ISBN-10: 0321769627 作者在整本书中都使用了 AndEngine。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-22T10:39:32.507

还有一本书：AndEngine for Android Game Development Cookbook by Jayme Schroeder, Brian Broyles (ISBN: 184951898X ISBN-13: 9781849518987)，我一直在使用它。它通过示例解释了 AndEngine 的工作原理。