# StackOverflow 问答 10057000-10057999

# git - Git 拉出最后一次完成的推送

> ID：10057000
> 
> 赞同：1
> 
> 时间：2012-04-07T18:09:30.003
> 
> 标签：git

我已经对我的源文件进行了许多更改，并且只想拉出最后一次完成的推送。我希望它删除任何新文件，并将修改后的文件恢复到最新版本。我基本上只想恢复到原来的主人上次的样子。

有没有办法在不删除目录、重新初始化 git 然后克隆 repo 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T18:11:22.040

`git reset --hard`将带您回到最后一次提交，`git reset --hard origin/master`并将带您回到`origin/master`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T18:12:22.950

您可以还原更改

阅读更多： [http ://book.git-scm.com/4_undoing_in_git_-_reset,_checkout_and_revert.html](http://book.git-scm.com/4_undoing_in_git_-_reset,_checkout_and_revert.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:16:07.157

另一种选择是放弃所有更改

```
git checkout . 
```

进而

```
git pull 
```

# c - 将 realloc 用于存储从文件读取的 int 的数组时出错

> ID：10057002
> 
> 赞同：0
> 
> 时间：2012-04-07T18:10:08.843
> 
> 标签：c

我想在达到最大容量时调整数组的大小。但是在我这样做之后出现了错误。/a.out 请帮助我...

```
Error: a.out: malloc.c:3574: mremap_chunk: Assertion `((size + offset) & (mp_.pagesize-1)) == 0' failed. 
```

代码：

```
#include<stdio.h>
#include <stdlib.h>

int main(void)
{
  int cap=5;
  int *arr = malloc(cap*sizeof(int));
  FILE *f;

  if((f=fopen("/home/file.txt","r"))==NULL)
    printf("You cannot open");  

  while(fscanf(f, "%d", arr++)!=EOF)
  {
    index++;
    if(index==cap-1)
      arr = realloc(arr, (cap +=1) * sizeof(int));
  } 

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T18:13:01.173

你有`arr++`你的循环条件。这意味着`arr`当您调用`realloc()`. 这最终会导致您看到的错误。

还：

1.  编程安全注意事项：

    不要`realloc()`在表格中调用：

    ```
    foo = realloc(foo, bar); 
    ```

    如果发生错误，`foo`将设置为`NULL`并且您将泄漏原始分配。

2.  非惯用代码注释：

    ```
    (cap +=1) * sizeof(int) 
    ```

    有点奇怪。为什么不`++cap * sizeof(int)`呢？或者更好的是，分两条线做，而不是把它全部塞进一条线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:13:31.103

您需要`realloc`在从 m 收到的相同地址上执行`malloc`，但您增加`arr`了`while(fscanf(f, "%d", arr++)!=EOF)`

# windows - 将每个文件复制到每个文件夹

> ID：10057013
> 
> 赞同：1
> 
> 时间：2012-04-07T18:11:33.890
> 
> 标签：windows, batch-file

我对你的知识水平印象深刻。

我的问题是：

我有一个包含 31 个 MP3 文件的文件夹，每个月的每一天都有一个。

我需要一个批处理来创建名为 01 02....31 的文件夹并将 01.mp3 复制到 01 文件夹，将 02.mp3 复制到 02 文件夹等等。这在 windows server 2k8 r2 命令中是可能的吗？

我尝试使用以下内容：

```
FOR /F %%j in (filelist.txt) do (
FOR /F "tokens=1 delims=." %%i in (filelist.txt) do (
xcopy %%j e:\%%i\
)) 
```

还有很多其他的......但是该批次创建了 31 个文件夹，每个文件夹上都有 31 个 MP3 文件。

此致。莱奥波尔多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:58:06.180

您有嵌套循环，每个循环都会遍历整个文件列表。这就是为什么你最终得到 31 个文件夹，每个文件夹包含 31 个文件。

相反，您可能应该只处理一次列表。尝试这个：

```
FOR /F %%j IN (filelist.txt) DO XCOPY %%j E:\%%~nj\ 
```

修饰符更改了的`~n`值，`%%j`因此它仅计算为名称（`01.mp3`-> `01`）。

阅读`FOR`命令 ( `FOR /?`) 的帮助以获取有关修饰符的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-11T22:10:26.320

由于这是 google 上的第一个结果，而 Andriy 的示例不起作用。这是一个实际工作的结果

```
for /r "%CD%" %%f in (.) do (copy "filelist.txt" "%%~ff" > nul) 
```

[归功于](https://stackoverflow.com/a/14021777/2009282)extramaster

# javascript - Firefox 插件全局对象与 firebug 控制台全局对象

> ID：10057017
> 
> 赞同：0
> 
> 时间：2012-04-07T18:12:06.960
> 
> 标签：javascript, firefox-addon, firebug

Firebug 是一个很棒的插件，我很想在开发 Firefox 扩展时使用它，不幸的是它需要一点杂技——看起来它主要是用网页制作的，而不是考虑到 chrome 脚本。

我想使用 Firebug 控制台来检查和操作由我的扩展创建的对象。不幸的是，当在控制台中输入“this”时，我发现当前的全局对象是

```
Window <url here> 
```

从我的插件范围中转储“this”时，我得到了

```
Window browser.xul 
```

这就是我的插件及其所有对象所在的位置。如何从 Firebug 控制台访问此对象（或以其他方式 - 从我的插件访问所谓的“this”到控制台）？

有一种方法可以执行 MDN 上描述的类似操作：

[https://developer.mozilla.org/en/Working_with_windows_in_chrome_code#Accessing_the_elements_of_the_top-level_document_from_a_child_window](https://developer.mozilla.org/en/Working_with_windows_in_chrome_code#Accessing_the_elements_of_the_top-level_document_from_a_child_window)

但它要求调用脚本是一个特权窗口，而控制台显然不是。在控制台中运行此代码段会导致：

```
Error: Permission denied for <http://siteurl> to create wrapper for object of     class UnnamedClass
[Break On This Error]   

.getInterface(Components.interfaces.nsIWebNavigation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:25:38.157

你可以试试 Chromebug。

另一种方法是打开 chrome://browser/content/browser.xul，然后你会在选项卡中看到一个 Firefox 浏览器窗口，打开父窗口 Firebug，`window`对象就是你想要的。

# javascript - /(\S)\1(\1)+/g 匹配所有出现的三个相等的非空白字符

> ID：10057018
> 
> 赞同：1
> 
> 时间：2012-04-07T18:12:13.547
> 
> 标签：javascript, regex

它的给定： /(\S)\1(\1)+/g 匹配所有出现的三个相等的非空白字符。

我不明白为什么 (\S) 和第二个 (\1) 周围有 ()，但第一个 (\1) 周围没有。任何人都可以帮助解释上述正则表达式的工作原理吗？

来源：[http ://www.javascriptkit.com/javatutors/redev2.shtml](http://www.javascriptkit.com/javatutors/redev2.shtml)

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T18:20:44.740

`\S`需要括号来捕获其值，因此您可以使用`\1`. `\1`表示“匹配与捕获组#1 匹配的相同文本”。

我相信这个正则表达式有问题。你说你想匹配“三个相等的非空白字符”。但是这`+`将使这个匹配 3 个*或更多*相等的连续非空白字符。

最后`g`的意思是“将此正则表达式应用于整个输入字符串或*全局*”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:39:22.843

第二组括号不是必需的。它不必要地再次捕获重复的字符，同时匹配与此正则表达式相同的字符串：

```
/(\S)\1\1+/g 
```

此外，正如@AlexD 指出的那样，描述应该说它**至少**匹配三个字符。`BONK`如果您在字符串中替换了该正则表达式`fooxxxxxxbar`：

```
'fooxxxxxxbar'.replace(/(\S)\1\1+/g, 'BONK') 
```

..您可能期望结果`fooBONKBONKbar`来自他们的描述，因为有两组三个“x”。但实际上结果是`fooBONKbar`；第一个`\1`匹配第二个'x'，`\1+`匹配第三个'x'*和任何跟随它的*'x' 。如果他们只想匹配三个字符，他们应该`+`放弃。

我注意到其他几个类似的草率描述，加上至少一个彻底的错误：`\B`相当于`(?!\b)`（一个不是单词边界的位置），而不是`[^\b]`（一个不是退格的字符）。就此而言，他们对单词边界的描述——“单词和空格之间的位置”——也是错误的。单词边界不是由任何特定字符定义的，比如空格——事实上，它也可以是没有*任何*字符来创建一个。字符串：

```
Word 
```

...以单词边界开头，因为 'W' 是单词字符，并且首先，它前面没有另一个单词字符。类似地，'d' 后面没有另一个单词字符，所以字符串的结尾也是单词边界。

此外，正则表达式不知道*words*，只知道 word *characters*。单词字符的定义可能因正则表达式风格和 Unicode 或语言环境设置而异，但它始终包括`[A-Za-z0-9_]`（ASCII 字母和数字加上下划线）。单词边界只是这些字符之一与任何其他字符（或*没有*其他字符，如前所述）之间的位置。

如果您想了解正则表达式，我建议您忘记该站点并从这里开始：[regular-expressions.info](http://www.regular-expressions.info/tutorial.html)。

# android - 在 Android 的同一屏幕上显示视频和按钮

> ID：10057019
> 
> 赞同：0
> 
> 时间：2012-04-07T18:12:15.333
> 
> 标签：android, layout, view, imagebutton, android-videoview

我正在尝试创建一个在同一屏幕上播放视频和两个 ImageButton 的视图。我正在使用 VideoView 来包含我的两个按钮的视频和 ImageButtons。当我独立测试每个功能时，两者都正确显示，但当我尝试在同一屏幕上显示两者时，它们不会同时显示！我尝试了许多布局（框架、线性、相对），将 VideoView 限制为较小的 layout_width 和 layout_height，并尝试了 xml 文件中的权重，但似乎没有任何效果。显示这似乎太简单了，不需要自定义视图，但如果必须，我会这样做。

以下是我的问题：你知道如何让 imageButtons 和 VideoView 在同一个屏幕上显示吗？创建自定义视图时可以使用 Android 视图，如 VideoView 和 ImageButton 吗？或者您可以在自定义视图中的画布上绘制 2D 东西吗？

这是我的代码作为参考：XML

```
<LinearLayout
        android:id="@+id/videopart"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center"
        android:layout_weight="1">
     <VideoView
         android:id="@+id/videoplayer"
         android:layout_width="395dp"
         android:layout_height="111dp" >
       </VideoView>
</LinearLayout>

 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_weight="1">   

        <ImageButton
             android:contentDescription="@string/top"
             android:id="@+id/topbutton"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"                
             android:paddingRight="5dip" 
             android:src="@drawable/yesbutton"
             android:background="@null"/>  
       <ImageButton
             android:contentDescription="@string/bottom"
             android:id="@+id/bottombutton"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"  
             android:paddingLeft="5dip" 
             android:src="@drawable/nobutton"
             android:background="@null">
        </ImageButton>           

    </LinearLayout> 
```

和活动：

```
public class iplayer extends Activity {
VideoView videoHolder;
MediaPlayer mp;
ImageButton top, bottom;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);      

    getWindow().setFormat(PixelFormat.TRANSLUCENT);
    videoHolder = new VideoView(this);

    //if you want the controls to appear
    videoHolder.setMediaController(new MediaController(this));

    Uri video = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.interactivevid); 
    videoHolder.setVideoURI(video);

    // video finish listener:
    videoHolder.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            // The video has finished, return from this activity
            finish(); //close activity
        }
    });

    videoHolder.requestFocus();
    /*
    videoHolder.requestLayout();
    videoHolder.invalidate();
    videoHolder.getLayoutParams().width = 20;//480;     
     */
    //start video
    drawButtons();
    //videoHolder.setPadding(BIND_NOT_FOREGROUND, BIND_NOT_FOREGROUND, BIND_NOT_FOREGROUND, BIND_NOT_FOREGROUND);
    videoHolder.setPadding(5, 0, 5, 200);
    setContentView(videoHolder); // used to actually put in video. when removed, shows buttons 
    videoHolder.start();    

 }

private void drawButtons(){

    //make buttons invisible
    top = (ImageButton)findViewById(R.id.topbutton);
    top.setImageResource(R.drawable.yesbutton);
    top.setVisibility(View.VISIBLE);

    bottom = (ImageButton)findViewById(R.id.bottombutton);
    bottom.setImageResource(R.drawable.nobutton); 
    bottom.setVisibility(View.VISIBLE);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:02:55.110

我不是通过计算机进行测试，但您可能想尝试的是绝对布局。

您应该能够将按钮放置在视频顶部，这是一个示例 [http://www.tutorialforandroid.com/2009/01/absolutelayout-in-android-xml.html](http://www.tutorialforandroid.com/2009/01/absolutelayout-in-android-xml.html)

您可能还想尝试将按钮和 VideoView 放在同一布局中

# php - php在另一个私有变量中调用私有变量错误

> ID：10057020
> 
> 赞同：1
> 
> 时间：2012-04-07T18:12:16.790
> 
> 标签：php, class, codeigniter, variables

我的`PHP Code`：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class admin extends CI_Controller {

    function __construct(){
        parent::__construct();
        $this->load->helper('ajax');
    }

    private $password = 'password';

    private $login_details = array(
        'username' => 'username',
        'password' => sha1('salt'.$this->password)
    ); 
```

以上`code`返回以下`PHP`错误：

```
Parse error: syntax error, unexpected '(', expecting ')' 
```

我正在使用codeigniter，但我认为这与问题无关，因为它基于PHP...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:15:06.430

类成员必须用静态值初始化。您不能在初始化中使用函数结果，所以

```
 'password' => sha1('salt'.$this->password) 
```

禁止。您必须在构造函数中执行此操作。

# nhibernate - asp.net 的最佳 Nhibernate 会话

> ID：10057025
> 
> 赞同：-1
> 
> 时间：2012-04-07T18:12:54.013
> 
> 标签：nhibernate, sessionfactory

我是 nHibernate 的新手，我需要一些专业人士的帮助。我想为长生命周期的 asp/net web 应用程序创建休眠会话，什么是最好的解决方案，因为我不想犯一些错误，例如客户端打开会话时间过长。有什么建议么？我看到了一些无状态会话的选项，但我不知道何时使用正常会话以及何时使用无状态有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:21:27.873

在这里，我们有两个问题，老实说，很难详细解释。简而言之：-

**问题 1 - 长寿命会话管理**

我建议[购买这本书](https://www.packtpub.com/nhibernate-3-0-cookbook/book)，因为它非常详细地向您展示了如何为小型工作单元和长寿命会话（即在页面请求之间保持打开的会话）设置和使用会话管理

**问题 2 - 无状态会话。**

这些通常在您需要执行大量批量操作（例如将大量数据插入数据库）时使用。无状态会话不跟踪更改并消耗更少的内存并且速度更快。对于普通的 CRUD，不要使用无状态会话。

希望这可以帮助。

# jquery - jquery ajax form + ajax setTimeout 不起作用

> ID：10057033
> 
> 赞同：-2
> 
> 时间：2012-04-07T18:13:35.533
> 
> 标签：jquery, ajax, forms, settimeout

我正在处理充满表单的简单测试页面。正如你们中的一个人几天前发布的那样，我现在使用 jquery 来使用 ajax 并避免在按下提交按钮之一后刷新页面。所以只要按照我在这里找到的模板：http: [//jquery.malsup.com/form/](http://jquery.malsup.com/form/)

我已将这段代码添加到我的网页中：

```
<script> 
    $(document).ready(function() { 
        // bind 'myForm' and provide a simple callback function 
        $('#myForm').ajaxForm(function() { 
            alert("Thank you for your comment!"); 
        }); 
    }); 
</script> 
```

我的经验是，现在表单可以完美运行，但是 ajax setTimeout 函数不再起作用！如果我删除以前的代码，ajax setTimeout 将再次工作。你们知道为什么会这样吗？

```
<script type="text/javascript">

    function myff(abc)
    {

        var
            $http,
            $self = arguments.callee;

        if (window.XMLHttpRequest) {
            $http = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
            try {
                $http = new ActiveXObject('Msxml2.XMLHTTP');
            } catch(e) {
                $http = new ActiveXObject('Microsoft.XMLHTTP');
            }
        }

        if ($http) {
            $http.onreadystatechange = function()
            {
                if (/4|^complete$/.test($http.readyState)) {
                    document.getElementById('ReloadThis3').innerHTML = $http.responseText;
                    setTimeout(function(){$self(abc);}, 1000);
                }
            };
            $http.open('GET', 'loadfunc.php' + '?abc=' + abc);
            $http.send(null);
        }
    }

</script> 
```

新代码：

```
<script>   
        $(document).ready(function() {

        $('#s1hvform1').ajaxForm(function() {
        });

      sendreq(abc);
});

function sendreq(abc)
{
    $.get('loadfu.php?abc='+abc,function(r)
    {          
        $('#ReloadThis2').html(r);
        setTimeout(function(){sendreq(abc);},1000);        });
}           

</script>

<div id="ReloadThis2">Loading data...</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:21:33.540

setTimeout() 不是一个 ajax 函数，它必须以字符串的形式传递一个函数句柄，我相当确定。另外，你为什么不使用 jquery，就像你在第一个代码块中一样？

```
function sendRequest(abc)
{
    $.get('loadfunc.php?abc='+abc,function(r)
    {
        $('#ReloadThis3').html(r);
        setTimeout(function(){sendRequest(abc);},1000);
    });
} 
```

# android - 将文本视图添加到对话框

> ID：10057036
> 
> 赞同：0
> 
> 时间：2012-04-07T18:13:49.863
> 
> 标签：android, android-layout, android-ui

我正在尝试在我的对话框中对齐正确的文本。我怎样才能做到这一点 ？我试图：

```
TextView loadMsg = new TextView(context);
loadMsg.setText("טוען...");
loadMsg.setGravity(Gravity.RIGHT);       
dialog.setView(loadMsg);
dialog.show(); 
```

但文字没有显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T18:23:52.493

子方式：创建子布局并以此设置内容视图 `dialog.setContentView(R.layout.dialog_layout);`

并按照您喜欢的方式设计子布局：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:25:29.510

这是因为您在 TextView**内**设置了重力。但是，如果你的 TextView 是用重力布局的，`WRAP_CONTENT`那么对于这么短的字符串来说真的没关系。您应该在里面插入`TextView`一些`Layout`，指定`FILL_PARENT`并将布局设置为 Dialog 内容视图

```
// width is FILL_PARENT -1, height is WRAP_CONTENT -2
ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(-1, -2);
LinerLayout layout = new LinearLayout(context, params);
layout.addView(loadMsg, params);
dialog.setView(layout); 
```

或者，您可以在布局本身上设置重力并将`TextView`' 宽度设置为`WRAP_CONTENT`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:25:33.523

也许您缺少必须定义高度和宽度的 LayoutParams。如果您使用 wrap_content 作为宽度，那么它将不会对齐，因为不会有任何额外的空间。

# css - div 之间的空格：我该如何阻止它？

> ID：10057037
> 
> 赞同：0
> 
> 时间：2012-04-07T18:13:56.243
> 
> 标签：css

我有一个问题，如果我这样写 div：

```
 <div class="asdf">
      Some content..
 </div>
 <div class="asdf2">
       Some content
 </div> 
```

然后两个 div 之间有一个空格渲染。如果我写它有这样的：

```
 <div class="asdf">
      Some content..
 </div> <div class="asdf2">
       Some content
 </div> 
```

然后在 div 之间出现一个空格......但我是这样写的：

```
 <div class="asdf">
      Some content..
 </div><div class="asdf2">
       Some content
 </div> 
```

然后div之间不会出现空格。这是怎么回事？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:22:14.143

简而言之，HTML 呈现空白。我假设您正在渲染这些 div 的内联？你给出的解决方案，简单地说，就是解决方案。

# java - 在 Java 中，如何从 xml 中检索数据值并将它们存储在数组中？

> ID：10057038
> 
> 赞同：0
> 
> 时间：2012-04-07T18:14:08.353
> 
> 标签：java, xml

这是我的 xml 文件

```
<waveform>
    <Ivalue>12,13,14,15,16,17,18</Ivalue>
    <IIvalue>1,4,15,23,22,44</IIvalue>
</waveform>
<waveform>
    <Ivalue>12,13,14,15,16,17,18</Ivalue>
    <IIvalue>1,4,15,23,22,44</IIvalue>
</waveform> 
```

在这里，我知道如何通过标签检索值，但是否可以将这些值存储到单独的`int[]`？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:21:39.767

您可以使用**JAXB**来提取像 Ivalue AS STRING 这样的标签。

据我所知，将它直接作为 int 数组（使用 JAXB）至少并不容易

**但是，使用String.split拆分字符串并使用****Integer.parse**转换结果 很容易

# xcode - Xcode UML 图

> ID：10057054
> 
> 赞同：2
> 
> 时间：2012-04-07T18:16:31.997
> 
> 标签：xcode, xcode4.2, uml

我有一个用 Objective C 编写的 Xcode 项目，我正在尝试创建一个 UML 图。但是，这个项目太大了，我无法手动创建，所以我在 Xcode4 中找不到类建模功能。是否有免费的 UML 程序可以导入我的 xcode 项目并自动生成 UML 图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T18:21:04.757

看看[OmniGraffle](http://www.omnigroup.com/products/omnigraffle/)应该可以为你的代码绘制UML图。

另一种选择可能是[Visual Paradigm](http://www.visual-paradigm.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-30T05:48:56.900

如果您使用的是 XIB 文件并且想要更好地理解 Xcode 中的应用程序，您可以查看 main.storyboard。[iOS Storyboards](https://www.raywenderlich.com/5055364-ios-storyboards-getting-started)这个视图对我帮助很大。 [![main.storyboard 图](../Images/e8d1786d3c43790c00ee2a59f36af153.png)](https://i.stack.imgur.com/RSuyd.jpg)

# c# - 查找数组中最小元素的位置

> ID：10057066
> 
> 赞同：1
> 
> 时间：2012-04-07T18:18:06.367
> 
> 标签：c#, algorithm, search

我已经看到很多关于在数组中查找指定元素的位置的主题，但我无法将他们的解决方案应用于我的问题或找到合适的解决方案。

我有一个锯齿状数组：

```
double[][][] _distance = new double[_mapSize][_mapSize][1]; 
//incorrect, but for clarifying array's structure 
```

我需要获取最小元素的索引。

如果

```
_distance[2][5][0] 
```

是最小值，我需要得到“2”和“5”

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:23:07.110

尝试以下

```
Tuple<int, int, int> minimumIndex = null;
double minimumValue = Double.Max;

for (var i = 0; i < _mapSize; i++) {
  for (var j = 0; j < _mapSize; j++) {
    for (var k = 0; k < _lastDimension; k++) {
      var current = _distance[i][j][k];
      if (current <= minimumValue) {
        minimumValue = current;
        minimumIndex = Tuple.Create(i, j, k);
      }
    }
  }
}

Console.WriteLine("{0} {1} {2}", minimumIndex.Item1, minimumIndex.Item2, minimumIndex.Item3); 
```

# php - 在 TItanium 中使用 SQLite 的 PHP

> ID：10057067
> 
> 赞同：0
> 
> 时间：2012-04-07T18:18:14.883
> 
> 标签：php, sqlite, titanium, desktop-application

大家好，我在 PHP 中使用 Titanium studio 进行桌面开发，

当我尝试与 sqlite3 连接时，它显示错误消息为

消息无法打开数据库文件的未捕获异常

提供的代码是

```
$db = new SQLite3('sample.db'); 
```

另一个麻烦是我无法使用 Titanium`$_GET`在php 桌面开发中`$_POST`访问`$_REQUEST`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:38:12.963

我用这个拉头发。似乎您可以将 PDO 连接用于 mysql，也可以将 SQLite3 用于 SQLite。（至少对于 SKD 1.2.0.RC4 ，不确定任何其他以前的版本）

检查**phpinfo()**；函数返回，**尝试找到这个字符串**“sqlite3 SQLite3 support => enabled”。如果你 phpinfo 返回这个，这意味着你可以使用 SQLite3 类。

如果它确实有效，请在此处查看[http://www.php.net/manual/en/sqlite3.open.php](http://www.php.net/manual/en/sqlite3.open.php)并让我们知道它对您有何帮助。对我来说，这工作得很好，我可以毫无问题地打开、插入和选择。尝试首先为您的数据库使用完整路径来进行测试。

至于 $_GET、$_POST 和 $_REQUEST，您是对的，除非您使用相同字符串 ("login.php?user=me&pass=secret") 中的 get 参数加载 php 页面，否则它们不可用，在这种情况下， $_GET 变量确实变得可用。不是最好的方式，但它是一种选择。您还可以创建一个数据类，并在执行期间使用它在 php 页面之间保存和传递数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:57:32.273

您应该使用[Titanium.Database.open](http://developer.appcelerator.com/apidoc/desktop/latest/Titanium.Database.open-method)打开数据库：

```
var db = Titanium.Database.open("Path to your db"); 
```

# sharepoint - Sharepoint 2010 在具有可编辑属性的母版页中添加自定义可视 Web 部件

> ID：10057068
> 
> 赞同：0
> 
> 时间：2012-04-07T18:18:17.217
> 
> 标签：sharepoint, sharepoint-2010

我可以轻松地将 web 部件添加到我的自定义母版页，但它们看起来是静态的（在页面编辑模式下）...有没有办法我可以在用户编辑其属性的母版页中添加自定义 web 部件（通过属性包）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T01:26:51.267

您是否尝试将 WebBrowsable 属性添加到您的 WebPart？请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webparts.webbrowsableattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webparts.webbrowsableattribute.aspx)

[Personalizable(), WebBrowsable(), WebDisplayName("我的 WebPart"), WebDescription("这是我的可编辑 WebPart")]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:49:49.083

遗憾的是，在母版页中，可视 Web 部件不可编辑，因为它们不存在于 Web 部件区域中，因此现在我们使用用户控件作为委托控件。

# objective-c - 我可以继承从 Storyboard 实例化的 ViewController 吗？

> ID：10057071
> 
> 赞同：4
> 
> 时间：2012-04-07T18:18:34.790
> 
> 标签：objective-c, uistoryboard

我发现当我初始化一个新的子类时，我得到了一个返回父类的对象。

家长：

```
- (id)init
{  
    self = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"EditController"];        
    return self;
} 
```

孩子：

```
- (id)init
{
    NSLog(@"New child");
    self = [super init];
    return self;
} 
```

如果我分配并初始化一个孩子，它会显示`New child`但会给我一个父类的对象。调用仅在子级中声明的方法会导致崩溃。

有人可以解释这里的初始化过程是如何工作的，以及如何创建一个子对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:59:51.863

我敢打赌，崩溃是由父级`init`返回一个**自动释放**的 EditController 实例引起的。无论哪种方式，您为什么不直接在情节提要中将班级类型设置为孩子的班级类型？

# python - 使用 PyROOT 访问 TTree 中的嵌套容器

> ID：10057076
> 
> 赞同：2
> 
> 时间：2012-04-07T18:19:04.133
> 
> 标签：python, root-framework

在 PyROOT 中，很容易从树中读取值，即打印叶子`val`：

```
file = TFile('file.root')
tree = file.Get('tree')
for entry in tree: 
    print entry.val 
```

也很容易从 stl 中读取值`vector<float>`，`vec`：

```
for entry in tree: 
    print entry.vec[1] 
```

但是嵌套向量，即`nested`type`vector<vector<float> >`呢？跑步

```
for entry in tree: 
    print entry.nested[0][0] 
```

会抛出一个`TypeError: 'vector<vector<float> >' object is unindexable`.

处理这个问题的最佳方法是什么？（如果不需要在 ROOT 字典中加载就更好了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:39:23.837

这适用于我在 python 中使用索引。

```
 >>>from ROOT import *
    >>>vec1 = std.vector('double')()
    >>>vec2 = std.vector('double')()
    >>>vec_vec = std.vector(std.vector('double'))()

    >>>for i in range(3):
    >>>   vec1.push_back(i)
    >>>for i in range(5):
    >>>   vec2.push_back(i)
    >>>vec_vec.push_back(vec1)
    >>>vec_vec.push_back(vec2)

    >>>len(vec_vec)
    2
    >>>len(vec_vec[0])
    3
    >>>len(vec_vec[1])
    5
    >>>vec_vec[1][2]
    2.0 
```

在您的示例中，错误说：

```
 TypeError: 'vector<vector<float> >' object is unindexable 
```

调用构造函数 std.vector(type)() 后，您有不同的类型表明内存空间分配器正在工作。

```
 >>>type(vec1)
    <class 'ROOT.vector<double,allocator<double> >'>
    >>>type(vec_vec)
    <class 'ROOT.vector<vector<double,allocator<double> >,allocator<vector<double,allocator<double> > > >'> 
```

要从 TTree 导入此类向量，请使用 setBranchAddress，如下例所示：

```
 >>>tree = file.Get('tree')
    >>>tree.SetBranchAddress("nested",vec_vec)
    >>>N = tree.GetEntries()
    >>>for i in range(N):
    >>>    vec_vec.clear()
    >>>    tree.GetEntry(i)
    >>>    print vec_vec[0][0] 
```

另请注意，使用后这可能会明显更快

```
 >>>tree.setBranchStatus('*',0)
   >>>tree.setBranchStatus('nested',1) 
```

# php - FQL 查询/API 调用使我的页面不可能变慢（PHP SDK）

> ID：10057078
> 
> 赞同：1
> 
> 时间：2012-04-07T18:19:09.890
> 
> 标签：php, facebook, performance, facebook-fql

页面总加载时间从 4 到 8 秒不等，由于某种原因，页面甚至在调用 API 之前才开始加载。因此，即使主要的 API 调用位于页面（和脚本）的底部，页面上的任何其他内容都不会预先加载。

解决这个问题的最佳方法是什么？最有问题的 API 调用是

```
$result = $facebook->api('/fql?q=select+uid,+name,+is_app_user+from+user+where+uid+in+(select+uid2+from+friend+where+uid1=me())+and+is_app_user=1'); 
```

它使用我的应用程序找到用户的朋友列表。此外，我正在进行多次 api 调用以获取不是该人朋友的用户的姓名。

如果无法加快 API 调用速度，我如何至少在 FQL 运行时加载页面的其余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:34:50.337

facebook api 非常慢，您可能希望通过 javascript api 进行 fb api 调用，并且只有在绝对必要时才通过 php。Ajax 是你最好的朋友。只进行客户端调用还有一个好处，那就是关键的用户数据可能永远不会触及服务器，这对您的站点来说是一个很好的论据。这些天人们非常谨慎。

# html - 和 Main 和 Content 显示为蓝色，需要为红色吗？

> ID：10057084
> 
> 赞同：-4
> 
> 时间：2012-04-07T18:20:00.430
> 
> 标签：html, main

如何将 Main 和 content 设为红色？我究竟做错了什么？当我输入时

```
<div id="main">
<div id="content"> 
```

main 和 content 以蓝色显示，它们应该以红色显示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:05:54.750

除了您在评论中发布的代码段外，我看不到代码。

问题：您想要改变背景或文本颜色吗？

此外，您使用的选择器错误。只需在`#main,#content`.

把它放在你的 CSS 文件中：

```
#main, #content{color:red;} 
```

我希望这有帮助！

# java - OpenCV/JavaCV Android人脸检测初始化

> ID：10057085
> 
> 赞同：2
> 
> 时间：2012-04-07T18:20:12.653
> 
> 标签：java, android, xml, opencv, javacv

我正在处理人脸检测问题，我有使用 Androids FaceDetector 来查找人脸的工作代码，但我需要找出一种方法来实现 OpenCV/JavaCV 函数来检测人脸。这不是使用实时摄像机，它使用画廊中的图像，我能够检索该图像路径，但我似乎无法初始化 CvHaarClassifierCascade 分类器和 CvMemStorage 存储，如果有人不能指出我正确的方向或提供一些在 Java 中正确初始化这些变量的源代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:05:45.397

类定义基本上是 C 中原始头文件的 Java 端口，加上仅由 OpenCV 的 C++ API 公开的缺失功能。你可以参考这个链接，它包括[http://code.google.com/p/javacv/](http://code.google.com/p/javacv/)

和[http://geekoverdose.wordpress.com/tag/opencv-javacv-android-haarcascade-face-detection/](http://geekoverdose.wordpress.com/tag/opencv-javacv-android-haarcascade-face-detection/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:24:02.297

你可以这样做：只需提供一个 BufferedImage。

或者，使用 cvLoadImage(..) 直接使用图像路径加载原始 IplImage。

```
// provide an BufferedImage
BufferedImage image;

// Preload the opencv_objdetect module to work around a known bug.
Loader.load(opencv_objdetect.class);

// Path to the cascade file provided by opencv
String cascade = "../haarcascade_frontalface_alt2.xml"

CvHaarClassifierCascade cvCascade = new CvHaarClassifierCascade(cvLoad(cascade));

// create storage for face detection
CvMemStorage tempStorage = CvMemStorage.create();

// create IplImage from BufferedImage
IplImage original = IplImage.createFrom(image);

IplImage grayImage = null;

if (original.nChannels() >= 3) {
  // We need a grayscale image in order to do the recognition, so we
  // create a new image of the same size as the original one.
  grayImage = IplImage.create(image.getWidth(), image.getHeight(),
                IPL_DEPTH_8U, 1);
  // We convert the original image to grayscale.
  cvCvtColor(original, grayImage, CV_BGR2GRAY);
} else {
  grayImage = original.clone();
}

// We detect the faces with some default params
CvSeq faces = cvHaarDetectObjects(grayImage, cvCascade,
            tempStorage, 1.1, 3,
            0;

// Get face rectangles
CvRect[] fArray = new CvRect[faces.total()];
for (int i = 0; i < faces.total(); i++) {
            fArray[i] = new CvRect(cvGetSeqElem(faces, i));
        }
// print them out
for(CvRect f: fArray){
   System.out.println("x: " + f.x() + "y: " + f.y() + "width: " + f.width() +  "height: " + f.height());
}

tempStorage.release(); 
```

# java - 为此应用理念推荐一个 Java 图形 API

> ID：10057089
> 
> 赞同：2
> 
> 时间：2012-04-07T18:20:46.597
> 
> 标签：java, api, diagnostics, fsm, circuit

我想制作一个用于创建[FSM](http://en.wikipedia.org/wiki/Finite-state_machine)控制电路仿真的工具。注意！不是 ALU 部分。

任何人都可以推荐一个具有尽可能多功能的好的 Java API 吗？它基本上类似于图形建模语言编辑器。

用户应该能够制作和运行这样的东西：![在此处输入图像描述](../Images/68e45831673a1973005208a61012cbdd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T20:00:48.103

有许多用于可视化图形的 Java 库。我听到很多提到的一些包括：

1.  [荣格](http://jung.sourceforge.net/)

2.  [jGraph](http://www.jgraph.com/)

3.  [GraphVis](http://www.graphviz.org/)和[Grappa](http://www2.research.att.com/~john/Grappa/)

以下博客有一个相当广泛的选项列表，带有评论和截图：[http ://s6ai.livejournal.com/33969.html](http://s6ai.livejournal.com/33969.html)

# backbone.js - 使用coffeescript登录和注销主干js时通知事件

> ID：10057091
> 
> 赞同：2
> 
> 时间：2012-04-07T18:20:56.347
> 
> 标签：backbone.js, coffeescript

我对骨干js有点困惑。

我有多个视图，它们根据会话采取不同的行动。IE。当我登录时，我的所有视图都将允许我点赞评论并关注问题，但是当我注销时，与用户活动相对应的所有其他视图都应提示登录表单。

所以，困惑是，当我登录时我应该如何通知其他视图，以便他们允许我做相应的活动。

我目前能够实现这一点，但我需要在登录后刷新页面，但骨干js的目的没有实现。

用户模型：user.js.coffee

```
class window.User extends Backbone.Model
  urlRoot: '/users'

  isSignedIn: ->
    Boolean(@get('remember_token'))

  login: (attributes, options) ->
    options.url = Root + '/sessions'
    @save(attributes, options)

  signup: (attributes, options) ->
    options.url = Root + '/users/create'
    @save(attributes, options) 
```

登录视图：signin_view.js.coffee

```
class window.UserView extends Backbone.View
  initialize: ->
    _.bindAll(this, 'onSignedIn', 'onSignedUp', 'onCommented')
    $(@el).show()

    if @model.isSignedIn()
      @showUserDetails()
    else
      Some code here 
```

用户详情视图：user_detail_view.js.coffee

```
class window.UserDetailsView extends Backbone.View
  initialize: ->
    _.bindAll(this, 'onValidUser')
    @model.on('change', @onValidUser)

   if (@model.get('email'))
     @onValidUser()
   else
     @model.fetch()

   onValidUser: ->   
     @render()

  render: ->
    $(@el).show()
      this.$(".name").text(currentUser.get('user')['first_name'] + ' ' + currentUser.get('user')['last_name']) 
```

现在我想通知我的关注视图我已登录并且我不应该再提示登录表单了，事实上所有与用户活动相关的视图

跟随视图看起来像这样

```
class window.FollowView extends Backbone.View
  initialize: ->
    $(@el).show() 
```

我该如何做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:36:51.447

我觉得你有点结构性问题。“已登录”实际上并不是用户的属性，而是整个应用程序的属性：如果他们未登录，则应用程序没有用户，如果他们已登录，则应用程序确实有一个用户。

所以你应该有一个具有用户属性的应用程序对象。人登录时，在应用对象上设置用户；当此人退出时，清除用户。

一旦上述内容到位，解决方案自然会失败：我们正在使用 Backbone，所以一切都基于触发和侦听事件，这里的事件是`signed-in`and `signed-out`。是什么触发了这些事件？应用程序对象可以。谁监听这些事件？关心某人是否签名的观点。

假设你有一个这样的应用程序类：

```
class App
    constructor: (@user_name) ->
        _(@).extend(Backbone.Events);
    sign_out: ->
        @user_name = null
        @trigger('signed-out')
    sign_in: (user)->
        @user_name = user
        @trigger('signed-in')
    user: ->
        @user_name

window.app = new App 
```

然后关心用户的视图可以做这样的事情：

```
initialize: ->
    app.on('signed-in signed-out', @render) 
```

并且`render`当有人登录或退出时会调用它们的方法；当然，这些`render`方法会检查用户并显示适当的东西。

现场演示：http: [//jsfiddle.net/ambiguous/TfPf9/](http://jsfiddle.net/ambiguous/TfPf9/)

真正的代码可能希望有`remove`实现`app.off('signed-out signed-in')`来避免悬空的侦听器。

我在这里的时候还有其他几件事：

1.  [`bindAll`](http://documentcloud.github.com/underscore/#bindAll)CoffeeScript 很少需要使用。而不是这个：

    ```
    _.bindAll(this, 'onSignedIn', 'onSignedUp', 'onCommented') 
    ```

    定义方法[`=>`](http://coffeescript.org/#fat_arrow)：

    ```
    onSignedIn: => #...
    onSignedUp: => #... 
    ```

2.  较新版本的 Backbone 自动为您提供 jQuery/Zepto 包装版本，`el`因此您可以替换`$(@el).show()`为`@$el.show()`.

# python - 用 Python 2.7 安装 numpy Lion？

> ID：10057095
> 
> 赞同：8
> 
> 时间：2012-04-07T18:21:17.207
> 
> 标签：python, numpy, osx-lion

我正在使用来自 python.org 的 Python 2.7 和 XCode 4.2 开发 OS X 10.7。

1.  按照这些[说明](http://www.scipy.org/Installing_SciPy/Mac_OS_X#head-9ec15aabd402675e5139a8c9c727e6a23513d56a)，我尝试更改`CC`、`CXX`和`FFLAGS`变量并使用`sudo pip install numpy`. 但是，安装仍然会寻找`gcc-4.2`.
2.  我尝试`gcc-4.2`通过 MacPorts 安装，但得到了`Error: gcc42 does not build on Snow Leopard or later.`
3.  当我从 sourceforge 上的预编译二进制文件安装 numpy 时，我收到以下错误：

    > > > 导入 numpy

    回溯（最近一次通话最后）：

    文件“”，第 1 行，在

    文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/init **.py** ”，第 137 行，在

    ```
    import add_newdocs 
    ```

    文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/add_newdocs.py”，第 9 行，在

    ```
    from numpy.lib import add_newdoc 
    ```

    文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/lib/init **.py** ”，第 4 行，在

    ```
    from type_check import * 
    ```

    文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/lib/type_check.py”，第 8 行，在

    ```
    import numpy.core.numeric as _nx 
    ```

    文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/init **.py** ”，第 5 行，在

    ```
    import multiarray 
    ```

    ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/multiarray.so, 2): 找不到合适的图像。确实找到了：/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/multiarray.so：通用包装器中没有匹配的架构

有什么帮助吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T18:42:44.340

如果我没记错的话，源伪造上的预编译二进制文件是 32 位的。我花了很长时间才在我的 macbook 上安装 Numpy、Scipy 和 Matplotlib，这绝对比它应该做的要难得多。

我相信您最好的选择是[Scipy superpack](http://fonnesbeck.github.com/ScipySuperpack/)。在使用 superpack 之前，您需要更新到 Xcode 4.3.2

所以我刚刚从 python.org 安装了 python 2.7.2，抓住了超级包，现在我的机器上有 numpy 工作。安装 python 2.7.2 后，我做了`sudo pip uninstall numpy`，但删除得不够多。所以我 cd'd 进入`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/`并将 numpy 目录和 numpy egg 移动到它们的“旧”版本。然后我跑了*，*`sh install_superpack.sh`回答“你是从克隆到这台机器的存储库安装吗（非常重要，哈哈，第一次不假思索地点击是）。

 *但是，现在我能够做到这一点：

```
$ python
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
>>> import scipy
>>> import matplotlib 
```

没有问题:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T06:24:53.227

SuperPack 在安装了 XCode 4.5.1 的 OS X 10.8 (Mountain Lion) 上为我工作（感谢@Nolen）。

Numpy 在`pip install numpy`下面的第 1 步之后为我工作。但是 scipy*不会*使用 pip 安装。SuperPack 解决了这个问题。

我做的唯一不同的事情是使用 HomeBrew 作为步骤 1 安装 Python，而不是手动下载它。

1.  安装 Python（独立于 OS X 10.8 附带的版本）

    *   `brew install python --framework --universal`
    *   `pushd /System/Library/Frameworks/Python.framework/Versions`
    *   `sudo rm Current`
    *   `sudo ln -s /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/Current`
    *   `popd`
2.  安装超级包：

    *   `curl -o install_superpack.sh https://raw.github.com/fonnesbeck/ScipySuperpack/master/install_superpack.sh`
    *   `sh install_superpack.sh`
    *   （在安装过程中多次输入您的管理员密码...）*

# c# - 将文本从文本框中保存到全局字符串。使用存档的最佳方式？

> ID：10057100
> 
> 赞同：0
> 
> 时间：2012-04-07T18:21:55.457
> 
> 标签：c#, wpf, textbox, global-variables

（使用 WPF 应用程序/WPF 用户控件）

可以使用以下代码将文本从文本框中保存到全局字符串。

```
private void commentBox_TextChanged(object sender, TextChangedEventArgs e)
{
    Properties.Settings.Default.cmd01 = commentBox.Text;

    //always save on every input change??
    Properties.Settings.Default.Save();
} 
```

但我现在想知道的是，在这种情况下，`save`每次文本更改都会调用 。所以如果我理解正确，它现在会保存在每个按下的键上。

我可以用更干净的方式做到这一点吗？例如，当用户离开文本框或其他东西的焦点时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:41:08.180

正如您所建议的：订阅您的UIElement.LostFocus[事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.lostfocus.aspx)或[Keyboard.LostKeyboardFocus 附加事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.lostkeyboardfocus.aspx)`TextBox`并在那里进行保存。

```
private void commentBox_LostFocus(object sender, RoutedEventArgs e)
{
    Properties.Settings.Default.Save();
} 
```

或者

```
private void commentBox_LostKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e)
{
    Properties.Settings.Default.Save();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:56:36.273

如果您打算使用 WPF，您不妨利用 Binding 基础设施来处理这类事情。您可以使用 LostFocus 的 UpdateSourceTrigger

XAML：

```
<TextBox Text="{Binding Path=Settings.Command01, 
                        Mode=OneWayToSource, 
                        UpdateSourceTrigger=LostFocus}" /> 
```

C＃：

```
 public class BindableSettings : INotifyPropertyChanged
    {
         public string Command01
         {
                get { return Properties.Settings.Default.cmd01; }
                set 
                {
                      if (Properties.Settings.Default.cmd01 == value)
                           return;

                      NotifyPropertyChanged("Command01");
                }
         }

         public void NotifyPropertyChanged(string prop)
         {
             Properties.Settings.Default.Save();
             //Raise INPC event here...
         }

    } 
```

# php - 如何移交给 CodeIgniter 中的另一个控制器？

> ID：10057103
> 
> 赞同：0
> 
> 时间：2012-04-07T18:22:18.043
> 
> 标签：php, codeigniter, http-redirect

我是 CodeIgniter 的新手，并创建了一个与一些视图和模型对话的控制器。

一旦我的控制器完成它的工作（假设这个控制器处理登录和注册），它如何移交给另一个控制器（处理用户界面等等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:36:27.773

看来我只是做错了。我收到如下错误：

> 无法修改标头信息 - 标头已由（输出开始于 [path]

诸如此类。我做事的顺序不对。

我的解决方案是修复代码和用户重定向（）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-07T18:33:19.227

您可以包含包含控制器的文件，然后创建控制器的新实例：

```
<?php
require_once("path/to/other_controller.php");
class MainController extends CI_Controller {
    public function index() {
        // Logic here...
        $other_controller = new OtherController();
        $other_controller->moreLogic();
    }
}
?> 
```

但是如果你需要使用多个控制器，你就做错了。您应该使用多个模型，每个模型都处理其适当的逻辑（也在单独的文件中！）。无论如何，用户界面应该在视图中处理，即使这意味着必须在视图中完成逻辑。

# php - php查询中每一行的jquery悬停效果

> ID：10057104
> 
> 赞同：0
> 
> 时间：2012-04-07T18:22:19.640
> 
> 标签：php, jquery

对于初学者，这是我的 php：

```
$id2 = mysql_real_escape_string($id2);
                $getdata8 = mysql_query("SELECT * FROM musicbook WHERE identify='$identify' ORDER BY id DESC LIMIT 20");
                $numrowsgetdata = mysql_num_rows($getdata8);
                if ((mysql_num_rows($getdata8))<1)
                {
                echo "<i>Be the first to say something?</i><p/>"; 
                }
                while ($row8 = mysql_fetch_assoc($getdata8))
                {
                $id8 = $row8['id'];
                $name8 = $row8['name'];
                $message8 = $row8['message'];
                $message10 = nl2br($message8);
                $date8 = $row8['date'];
                if ($name8==$username)
                {
                echo "
                <div class='messagediv' style='background:#1A1A1A;'><div style='padding:5px;'>$message10<br/>
                <div style='margin-top:4px; font-size:.8em; float:left;'><div style='float:left;'><a href='http://www.pearlsquirrel.com/$name8' style='color:white;'>$name8</a><font style='color:#D6D6D6'> on $date8</font></div>
                <input type='hidden' id='wpm2' value='$id8'><input type='button' id='deletelistenchat' class='deletelistenchat' style='display:none;' onclick='LinkOnClick2($id8); loadlistenchat();' value='(delete?)' /></div></div></div>
                ";
                }
                else
                {
                echo "
                <div class='messagediv'><div style='padding:5px;'>$message10<br/>
                <div style='margin-top:4px; font-size:.8em; float:left;'><div style='float:left;'><a href='http://www.pearlsquirrel.com/$name8' style='color:white;'>$name8</a><font style='color:#D6D6D6'> on $date8</font></div>
                </div></div></div>";
                }
                }
                if($numrowsgetdata >= 20)
                {
                echo "<div id='loadingcomments'><img src='loading.gif' style='height:30px; width:30px;'></div>";
                }
                ?> 
```

这是我的jQuery：

```
$('.messagediv').live('mouseover mouseout', function(event) {
    if (event.type == 'mouseover') {
    document.getElementById('deletelistenchat').style.display='block';
    } else {
    document.getElementById('deletelistenchat').style.display='none';
    }
    }); 
```

现在我想要发生的是，当您将鼠标悬停在每个 .messagediv div 上时，它会显示删除按钮，#deletelistenchat。但是，它仅适用于每个 mysql 查询的最后一行，我希望悬停效果在用户悬停在每个查询上时都可以使用。例如，如果我将鼠标悬停在用户的第一个帖子上，悬停效果会在 mysql 查询检索到的最后一个帖子上激活。我一直试图弄清楚这一点已经有一段时间了，并且迷失了。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:39:38.983

ID 是唯一的。您一遍又一遍地使用相同的 ID，因此，DOM 只会找到具有该 ID 的最后一个元素——这是预期的效果，这是您编写 php.ini 的结果。

`<input type='button' id='deletelistenchat'`

从此按钮中删除 ID。你已经在这里上课了。

让我们改变你的悬停事件。

```
$(function(){
  $('.messagediv').on('mouseover', function() {
    $(this).find('.deletelistenchat').css('display', 'block');
  }).on('mouseout', function(){
    $(this).find('.deletelistenchat').css('display', 'none');
  });
}); 
```

`*Edit*`

DOM 行为没有按预期运行，因为我没有清楚地查看您的标记，这是我的错。让它成为 jQuery 1.7 的价值，并将你的 mouseover 和 mouseout 语句分开，以便能够清楚地看到它们。

工作小提琴-> [http://jsfiddle.net/6MpX9/](http://jsfiddle.net/6MpX9/)

# mysql - 使用 ColdFusion 将日期和时间插入 MySQL

> ID：10057107
> 
> 赞同：3
> 
> 时间：2012-04-07T18:22:29.293
> 
> 标签：mysql, datetime, coldfusion

我完全迷失在这里。

MySQL 数据库中有一个“日期时间”类型的字段。我想用 ColdFusion 程序生成的日期时间填充它。我发现必须使用 CreateODBCDateTime 转换为属性格式，以便 MySQL 接受它，所以...

```
<cfset myDateTime = CreateODBCDateTime("07-04-2012 20:11:00")> 
```

稍后的某个地方：

```
<cfquery name="qAddDate">
    INSERT INTO some_table
    (`date`)
    VALUES
    ('#myDateTime#')
</cfquery> 
```

但是，尝试将数据发送到数据库时出现此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 8 行的 '2012-07-04 20:11:00'}')' 附近使用正确的语法

第 8 行是带日期的行：

```
INSERT INTO some_table
(`date`)
VALUES
('{ts '2012-07-04 20:11:00'}') 
```

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T19:00:17.960

您不需要在日期*对象*周围加上引号，只需要字符串。删除引号应该可以解决您的语法错误：

```
 INSERT INTO some_table (`date`)
  VALUES ( #myDateTime# ) 
```

虽然你应该养成使用的习惯`cfqueryparam`

```
 INSERT INTO some_table (`date`)
  VALUES ( <cfqueryparam value="#myDateTime#" cfsqltype="cf_sql_timestamp"> ) 
```

...或者，如果它是有效/可解析的美国日期字符串，您可以跳过 createODBCDate 并使用：

```
 INSERT INTO some_table (`date`)
  VALUES ( <cfqueryparam value="07-04-2012 20:11:00" cfsqltype="cf_sql_timestamp"> ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:35:20.453

这些看起来像“倒勾”，这会导致问题。当然，我没用过MySQL，所以不能肯定。

```
(`date`) 
```

你应该能够做到这一点：

```
INSERT INTO some_table(date)
VALUES ('{ts '2012-07-04 20:11:00'}') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-09T07:40:32.593

以下代码片段和输出显示（在帖子底部）

## 使用 ColdFusion 10 显示 MySQL 日期字段插入和更新。

```
<CFOUTPUT>

  <CFSET mLST_UPDT = CreateODBCDate("07/04/2012")>

  Date for SQL Insert = #mLST_UPDT# <br>

<!---- INSERT code without use of cfqueryparam ---->
<CFQUERY NAME="TAB_INSERT" DATASOURCE="HELMSFARMS">
INSERT INTO DATE_TABLE (LST_UPDT) VALUES (#mLST_UPDT#)
</CFQUERY>

<!---- INSERT code using cfqueryparam ---->
<CFQUERY NAME="TAB_INSERT" DATASOURCE="HELMSFARMS">
INSERT INTO DATE_TABLE
(LST_UPDT)
VALUES (<cfqueryparam value="#mLST_UPDT#" cfsqltype="cf_sql_date"> ) 
</CFQUERY>

<!---- Getting and Displaying results of INSERT ---->
<CFQUERY NAME="GET_DATES1" DATASOURCE="HELMSFARMS">
SELECT LST_UPDT FROM DATE_TABLE  
</CFQUERY>

<CFLOOP QUERY="GET_DATES1">
#CURRENTROW#. #GET_DATES1.LST_UPDT# #dateformat(GET_DATES1.LST_UPDT,"mm/dd/yyyy")#
<br>
</CFLOOP>

<!---- Code that uses UPDATE on the records INSERTED above ---->
<cfset mNXT_UPDT = CreateODBCDate("08/05/2014")>
<br>
Date for SQL Update = #mNXT_UPDT# <br>

<!---- UPDATE code using cfqueryparam ---->
<CFQUERY NAME="GET_DATES2" DATASOURCE="HELMSFARMS">
UPDATE DATE_TABLE SET
LST_UPDT = <cfqueryparam value="#mNXT_UPDT#" CFSQLType="cf_sql_date" > 
</CFQUERY>

<CFQUERY NAME="GET_DATES2" DATASOURCE="HELMSFARMS">
SELECT LST_UPDT FROM DATE_TABLE  
</CFQUERY>

<CFLOOP QUERY="GET_DATES2">
#CURRENTROW#. #GET_DATES2.LST_UPDT# #dateformat(GET_DATES2.LST_UPDT,"mm/dd/yyyy")#<br>
</CFLOOP>

</CFOUTPUT>  

<!----- Results of running above code 
Used a MySQL table named DATE_TABLE with 
one Date Field named LST_UPDT
--------------------------------------
Date for SQL Insert = {d '2012-07-04'} 
1\. {ts '2014-08-05 00:00:00'} 08/05/2014
2\. {ts '2014-08-05 00:00:00'} 08/05/2014
3\. {ts '2014-08-05 00:00:00'} 08/05/2014
4\. {ts '2014-08-05 00:00:00'} 08/05/2014
5\. {ts '2012-07-04 00:00:00'} 07/04/2012
6\. {ts '2012-07-04 00:00:00'} 07/04/2012
Date for SQL Update = {d '2014-08-05'} 
1\. {ts '2014-08-05 00:00:00'} 08/05/2014
2\. {ts '2014-08-05 00:00:00'} 08/05/2014
3\. {ts '2014-08-05 00:00:00'} 08/05/2014
4\. {ts '2014-08-05 00:00:00'} 08/05/2014
5\. {ts '2014-08-05 00:00:00'} 08/05/2014
6\. {ts '2014-08-05 00:00:00'} 08/05/2014
----> 
```

# c++ - 用于计算机视觉的 openmp 与 opencl

> ID：10057109
> 
> 赞同：1
> 
> 时间：2012-04-07T18:22:35.643
> 
> 标签：c++, opencl, openmp

我正在创建一个通过网络摄像头检测对象的计算机视觉应用程序。我目前专注于应用程序的性能

我的问题在于使用 Haartraining 文件生成 XML 级联文件的应用程序的一部分。这很慢，大约需要**6 天**。为了解决这个问题，我决定使用多处理，以最小化生成 Haartraining XML 文件的总时间。

我找到了两个解决方案：[opencl](http://www.khronos.org/opencl/)和（[openMp](http://openmp.org/wp/)和 openMPI ）。

现在我对使用哪一个感到困惑。我读到 opencl 是**在同一台机器上**使用多个 cpu 和 GPU 。是这样吗？另一方面，OpenMP 用于多处理，使用 openmpi 我们可以通过网络使用多个 CPU。但是 OpenMP 没有 GPU 支持。

您能否建议使用任何一个库的优缺点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T18:25:08.247

OpenCL 用于使用 GPU 流处理器。 [http://en.wikipedia.org/wiki/Opencl](http://en.wikipedia.org/wiki/Opencl)

OpenMP 用于使用 CPU 内核。 [http://en.wikipedia.org/wiki/Openmp](http://en.wikipedia.org/wiki/Openmp)

OpenMPI 用于使用分布式网络集群。 [http://en.wikipedia.org/wiki/Openmpi](http://en.wikipedia.org/wiki/Openmpi)

哪个最好使用取决于您的问题规范，但我会先尝试使用 OpenMP，因为将单线程程序移植到它是最容易的。有时你可以只用一个 pragma 告诉它并行化一个主循环，你可以按照 CPU 内核数量的顺序获得加速。

如果您的问题是非常数据并行和浮点型 - 比您可以从 GPU 中获得更好的性能 - 但您必须用类似 C 的语言编写内核并在主机和 GPU 之间映射或读/写内存缓冲区。这很麻烦，但在某些情况下，性能提升可能达到 100 左右，因为 GPU 是专门为数据并行工作而设计的。

OpenMPI 将为您提供最高性能，但您需要一个集群（同一网络上的一堆服务器），而且它们很昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:55:06.500

性能问题可能出在 XML 文件本身吗？

您是否尝试过使用不同的、更轻的文件格式？

我认为需要 6 天才能生成的 XML 文件一定很长很复杂。如果您可以控制这种数据格式，请尝试 Google 的[Protocol Buffers](http://code.google.com/p/protobuf/)。

在深入研究 OpenMP、OpenCL 或其他任何东西之前，请检查访问硬盘所花费的时间；如果这是问题所在，并行库将不会改进。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-04-24T02:30:27.433

研究opencv，看看它是否有帮助。

# ios - 在全屏视频后，如何确保我的视图方向正确？

> ID：10057112
> 
> 赞同：11
> 
> 时间：2012-04-07T18:23:45.347
> 
> 标签：ios, ios5, orientation

我有一个通用的 ipad/iphone 应用程序，允许用户观看视频，然后他们可以将其扩展到全屏模式。

我已经实现`(void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration`了，在该方法中，我根据视图元素是横向还是纵向，对视图元素执行各种 setFrame 调用。

在正常使用中，这一切似乎都可以正常使用，即来回旋转可以正常工作。

但是如果用户以纵向模式开始，开始播放视频，进入全屏模式，变成横向，然后视频停止——元素通常没有正确调整大小。它们的大小似乎仍然像纵向模式一样。

如果我然后转到纵向模式，然后再转到横向，则视图会正确重置。

奇怪的是，我已经实现`(void)exitedFullscreen:(NSNotification*)notification`并在其中打印出方向，并且可以正确看到。我还调用我的代码来根据当前方向重置视图元素，但我仍然遇到这个问题。

另一个相关问题是有时在处理旋转时，我的视图最终会在屏幕上太远，实际上位于设备顶部的状态栏下方。

**编辑**这是最新的例子。我在全屏视频播放期间旋转到横向模式，然后当我离开全屏视频时，您可以在视图顶部看到导航栏的问题。

![在全屏视频期间，导航栏在旋转后位于状态栏下方。](../Images/7780748875dcaada9ba17901f23750e0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:22:35.350

解决此问题的一种可能方法是通过模态显示您的视图控制器而不是使用导航视图控制器。

请参阅肯尼在[从横向到纵向的问题 pushViewController 中的回答](https://stackoverflow.com/questions/4822372/problem-pushviewcontroller-from-landscape-to-portrait)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:05:57.380

您的 ViewController 可能不会旋转，因为另一个控制器是第一响应者。为了避免这种情况，您可以做的是将视图控制器注册到设备旋转更改，并在收到此类通知时在您调用的选择器中实现旋转。

在 appDelegate 中：

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

在您的视图控制器中

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didRotate:)name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

在确实旋转中，您可以检查方向

```
 [[UIDevice currentDevice] orientation] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T11:17:59.957

视图顶部的导航栏。我用这段代码解决了它->

```
[[UIApplication sharedApplication] setStatusBarHidden:NO animated:NO];
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:YES]; 
```

轮换后使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T07:31:32.123

梅森，您是否记录并检查了您的方法 willAnimateRotationToInterfaceOrientation:duration: 在每次状态转换后是否被调用？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T11:03:28.630

如果有另一个控制器充当第一响应者，您的方向可能无法正确更新。克服这个问题的最好方法是`viewWillAppear:`使用视图控制器的当前方向来调用用于定位屏幕的函数：`[self interfaceOrientation]`

如果您使用子类子视图，您可能需要重新实现方法 layoutSubviews 并调用 setNeedsLayout。可能导致这种情况的另一件事是辞去您将视频作为第一响应者的视图控制器（您可以搜索是否在某个地方使用了methon resignfirstresponder 并尝试在没有它的情况下如何工作）。如果这不起作用，我不知道，这件事可能非常棘手，并且取决于您如何实现它。但是对于您所说的事情，您不需要太多代码，因为视图的自动旋转和调整大小现在由视图编辑器的大小检查器处理。

我认为应该这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T14:11:53.657

对我来说，这个最新的截图看起来不像是方向改变问题。导航栏基本上是由状态栏的高度关闭的。

可能您的位置计算失败，因为您在播放全屏视频（不带状态栏）时使用视图的框架，并且一旦状态栏返回就会失败？

# scala - 如何创建像 BeanProperty 这样的自定义注解

> ID：10057119
> 
> 赞同：7
> 
> 时间：2012-04-07T18:24:38.450
> 
> 标签：scala, annotations

在 Scala 中，可以使用注解 @BeanProperty 自动为字段生成 getter 和 setter。

我怎样才能创建自己的注释呢？

我对创建更改源代码的注释很感兴趣，就像 @BeanProperty 所做的那样。

例如，如何创建仅生成 get 方法的注释？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T19:43:45.607

两个字：[编译器插件](http://www.scala-lang.org/node/140)。这并不容易，文档也很少，但这是一种方法。

Scala 的未来版本可能会[支持宏](http://scalamacros.org/)，这给了您很多相同的灵活性。

# jquery-mobile - Phonegap - jQuery Mobile - 下载/保存/加载文件

> ID：10057129
> 
> 赞同：4
> 
> 时间：2012-04-07T18:25:36.877
> 
> 标签：jquery-mobile, cordova

我将 Phonegap 与 jQuery Mobile 一起使用，并具有以下用例：

*   我想通过 JSON 从远程服务器下载文件。
*   将文件存储在移动设备的本地文件系统上（也可以离线工作）。
*   目标平台：iOS、Android，可能还有 Windows Phone 和 BlackBerry。
*   从文件系统加载文件。

推荐的方法是什么？

*   Phonegap.FileWriter？还有一种方法可以将其保存到“assets/www../”吗？
*   Phonegap.Storage？

或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:35:02.727

*   使用 XHR 下载 JSON 数据。
*   使用 FileWriter 将文件保存到文件系统。
*   使用 FileReader 或 XHR 从文件系统读取 JSON 文件。

不，您不能将文件保存到 assets/www，因为它不可写。

# c# - 是否具有上下文的业务对象？

> ID：10057136
> 
> 赞同：4
> 
> 时间：2012-04-07T18:26:30.540
> 
> 标签：c#, business-logic

哪一种是实现业务对象的首选方式（为什么）？

没有单独的“上下文”

```
class Product
{
   public string Code { get; set; }

   public void Save()
   {
       using (IDataService service = IoC.GetInstance<IDataService>())
       {
           service.Save(this);
       }
   }
} 
```

用法是：

```
Product p = new Product();
p.Code = "A1";
p.Save(); 
```

带有单独的“上下文”

```
class Product
{
    private IContext context;

    public Product(IContext context)
    {
        this.context = context;
    }

    public string Code { get; set; }

    public void Save()
    {
        this.context.Save(this);
    }
 } 
```

用法是：

```
using (IContext context = IoC.GetInstance<IContext>())
{
    Product p = new Product(context);
    p.Code = "A1";
    p.Save();
} 
```

这一切都发生在 BL 层（使用示例除外），与数据库等无关。 IDataService 是数据层的接口，用于将业务对象保存在“某处”。IContext 基本上以某种方式包装了 IDataService。实际的业务对象更复杂，具有更多的属性和相互引用（如 Order -> OrderRow <- Product）。

我的观点是第一种方法（太）简单，第二种选择在单个业务对象实例之外提供更多控制......？有没有这样的指导方针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:32:23.160

我个人选择了第三个版本，其中对象本身不知道如何保存自己，而是依赖另一个组件来保存它。当有多种方法来保存对象时，这变得很有趣，比如将其保存到数据库、json 流、xml 流。这样的对象通常被称为序列化器。

所以在你的情况下，我会像这样简单：

```
class Product
{
    public string Code { get; set; }
} 
```

IContext 序列化的序列化将是：

```
class ContextSerializer
{
    public void SaveProduct(Product prod)
    {
        using(IContext context = IoC.GetInstance<IContext>())
        {
           context.Save(prod);
        }
     }
} 
```

用法是：

```
public void SaveNewProduct(string code)
{
   var prod = new Product() { Code = code };
   var contextSerializer = new ContextSerialzer();
   contextSerializer.SaveProduct(prod);
} 
```

这可以防止对象保留上下文（示例中的字段）并使您的业务对象保持简单。它还消除了担忧。

如果您遇到业务对象继承的情况，请考虑[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

# c# - 在电子邮件正文中动态获取收件人的电子邮件地址

> ID：10057138
> 
> 赞同：2
> 
> 时间：2012-04-07T18:26:50.807
> 
> 标签：c#, asp.net, email

这个问题背后的主要议程是我想用收到邮件的电子邮件地址替换我的电子邮件正文中的动态持有人

我们将使用 asp.net 的标准程序，即制作电子邮件正文，然后使用 smtp.send()，将邮件发送到相关的电子邮件地址。但我想在我的电子邮件正文中有一个占位符（例如，感谢您阅读邮件，xxx@yyy.com），这样 xxx@yyy.com 就会被打开邮件的人替换。

现在有趣的部分来了.....我发送邮件的用户（例如xxx@yyy.com）如果将邮件转发到其他电子邮件地址（例如abc@zzz.com），那么当abc@zzz。 com 打开邮件，他会看到“感谢阅读邮件，abc@zzz.com”。

首先有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T20:49:40.413

我不相信你问的是可能的。当您生成和发送电子邮件时，电子邮件正文是在服务器端编写的，因此您可以完全控制它。一旦用户在他们的邮箱中拥有它，您就不能再更改该电子邮件的内容。

电子邮件的内容无法更改——这种行为类似于您在未经客户许可的情况下在客户端机器上运行代码，即病毒，通常会受到反对。

# qt - 如何使 QComboBox 向上弹出？

> ID：10057140
> 
> 赞同：12
> 
> 时间：2012-04-07T18:27:01.680
> 
> 标签：qt, popup, stylesheet, qcombobox

我的*QComboBox*派生类位于（可见）屏幕底端的*QGraphicsScene中 - 但它向下弹出，因此看不见。*

（如何）是否可以强制弹出窗口在小部件**上方**打开？

我试过像这样重新实现*showPopup*：

```
void MyComboBox::showPopup()
{
     QAbstractItemView *popupView = view();
     popupView->move(0,-100);
     //popupView->window->move(0,-100);
     QComboBox::showPopup();
} 
```

结果是，内容似乎发生了变化，而不是底层的弹出对象。我认为可能可以找到具有 [本文](https://stackoverflow.com/questions/2510445/qt-qcombobox-popup-position)所述样式的解决方案，但我找不到任何可能对这里有用的 Styles 控件。我对 C++ 和 Qt 都很陌生，所以我可能会遗漏一些明显的东西。

我将不胜感激在这件事上的任何帮助！

此致，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T12:34:47.183

使用[此处](http://www.qtcentre.org/threads/46795-QComboBox-problem-with-popup-position)找到的信息，我能够以这种方式完成它：

```
void SteuerQComboBox::showPopup() {
    QComboBox::showPopup();
    QWidget *popup = this->findChild<QFrame*>(); 
    popup->move(popup->x(),popup->y()-this->height()-popup->height());
} 
```

**请注意，首先调用基类“** *showPopup* ”至关重要。

 **感谢所有阅读我的问题并思考问题的人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-04T00:17:33.503

user1319422 的解决方案还不错，但有两个问题。

1.  如果您的平台有 GUI 动画，列表框将动画向下打开，*然后*移动到文本框上方。
2.  如果您禁用组合框动画（或者您没有），对 QComboBox::showPopup() 的调用仍然会使 GUI 元素开始出现在屏幕上。因此，将它移动到那里会导致它闪烁，因为它首先出现并移动到下一个。

所以，为了解决第一个问题，我刚刚关闭了动画：

```
void MyComboBox::showPopup()
{
  bool oldAnimationEffects = qApp->isEffectEnabled(Qt::UI_AnimateCombo);
  qApp->setEffectEnabled(Qt::UI_AnimateCombo, false);

  QComboBox::showPopup();
  qApp->setEffectEnabled(Qt::UI_AnimateCombo, oldAnimationEffects);
} 
```

然后，对于第二个问题，我在`Show`事件中移动了框架：

```
bool MyComboBox::eventFilter(QObject *o, QEvent *e)
{
  bool handled = false;
  if (e->type() == QEvent::Show)
  {
    if (o == view())
    {
      QWidget *frame = findChild<QFrame*>(); 

      //For some reason, the frame's geometry is GLOBAL, not relative to the QComboBox!
      frame->move(frame->x(),
                  mapToGlobal(lineEdit()->geometry().topLeft()).y() - frame->height());
    }
  }
  /*else if other filters here*/

  if (!handled)
    handled = QComboBox::eventFilter(o, e);

  return handled;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-26T14:21:46.763

如果你想强制弹出窗口只有在它看不见时才在上面打开，你可以这样做：

```
void SteuerQComboBox::showPopup() {
    QComboBox::showPopup();
    QWidget *popup = this->findChild<QFrame*>(); 

    if((popup->y() + popup->height()) > this->window()->height())
        popup->move(popup->x(),popup->y()-this->height()-popup->height());
} 
```**

# javascript - jquery在2秒后延迟显示

> ID：10057142
> 
> 赞同：0
> 
> 时间：2012-04-07T18:27:05.360
> 
> 标签：javascript, jquery

我想如果用户在一个班级上移动鼠标两秒钟（保持鼠标按钮两秒钟），向他展示隐藏班级。如何？()

如果您在课堂上移动鼠标（多次），您将看到 slideToggle 自动完成，我不希望这样。如何解决？

**演示：http:** [//jsfiddle.net/tD8hc/](http://jsfiddle.net/tD8hc/)

我试过：

```
$('.clientele-logoindex').live('mouseenter', function() {
    setTimeout(function(){
        $('.clientele_mess').slideToggle("slow");
    }, 2000 );
}).live('mouseleave', function() {
        $('.clientele_mess').slideUp("slow");
})​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:39:56.200

请尝试以下链接您的问题将解决

```
http://jsfiddle.net/G3dk3/1/ 
```

> 变量 s;
> $('.clientele-logoindex').live('mouseenter', function() {
> 
> ```
>  s = setTimeout(function(){
>         $('.clientele_mess').slideDown();
>     }, 2000 );
> }).live('mouseleave', function() {
>         $('.clientele_mess').slideUp("slow");
>     clearTimeout(s)
> }) 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:32:39.620

像这样写你的html

```
<div class="clientele-logoindex">Keep the mouse here
<div class="clientele_mess" style="display: none;">okkkkkkko</div></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:38:43.890

记录计时器何时启动并在启动新计时器之前检查是否存在：

```
window.timer = null;    
$('.clientele-logoindex').live('mouseenter', function() {
    if(!window.timer) {
        window.timer = setTimeout(function(){
            $('.clientele_mess').slideToggle("slow");
            window.timer = null;
        }, 2000 );
    }
}).live('mouseleave', function() {
        $('.clientele_mess').slideUp("slow");
})​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T19:04:51.500

看看[hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html)是一个确保悬停在元素上的 jquery 插件。

# android - Android，如何降低图像适配器中图像的高度？

> ID：10057143
> 
> 赞同：0
> 
> 时间：2012-04-07T18:27:18.507
> 
> 标签：android, gridview, height, imageview

在我的活动中，我必须展示一些图像。我在我的活动中使用了 gridview，每行应该显示 4 个图像（每个图像的宽度是屏幕的 25%）。我需要减小与宽度相同大小的图像的高度。

所以，在我的 UI 中，我有一个 gridview，我的 imageAdapter 将图片排列到屏幕上。这是适配器的代码：

```
public class ContestantsPhotoAdapter extends BaseAdapter {

    private LayoutInflater myInflater;
    private Bitmap[] bitmapList;

    public ContestantsPhotoAdapter(Context c) {
        myInflater = LayoutInflater.from(c);
    }

    public void setData(Bitmap[] bmImages){ 
        bitmapList = bmImages;  

        Log.i("ContestantsPhotoAdapter", "Images passed to the adapter.");
    }

    @Override
    public int getCount() {
        return bitmapList.length;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent){
        ViewHolder holder;

        if (convertView == null) {
            convertView = myInflater.inflate(R.layout.grid_contestantsphoto, null);
            holder = new ViewHolder();
            holder.ivIcon = (ImageView) convertView.findViewById(R.id.imvContestantsPhoto_icon);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.ivIcon.setImageBitmap(bitmapList[position]);

        return convertView;
    }   

    static class ViewHolder {
        ImageView ivIcon;
    }
} 
```

grid_contestantsphoto.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>

<ImageView
    xmlns:android                   = "http://schemas.android.com/apk/res/android"
    android:id                      = "@+id/imvContestantsPhoto_icon"
    android:layout_width            = "wrap_content"
    android:layout_height           = "100dip"
    android:contentDescription      = "@string/menu_contentdescription" /> 
```

我的问题是当我更改时`android:layout_height = "100dip"`它不会生效，并且高度总是和以前一样。

请告诉我如何减小尺寸。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:30:35.110

这真的对我有用！请试试这个！

```
<ImageView
        android:id="@+id/productImage"
        android:layout_width="100px"
        android:layout_height="100px"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:scaleType="fitCenter"
        android:layout_marginRight="10dip"
        android:adjustViewBounds="true"
        android:src="@drawable/loading" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:07:03.933

备查。我将适配器代码更改为：

```
public void setData(Bitmap[] bmImages){ 
        bitmapList = bmImages;  

        for(int i=0; i < bitmapList.length; i++){
            bitmap = bitmapList[i];
            bitmap = Bitmap.createScaledBitmap(bitmap, bitmap.getWidth(), bitmap.getWidth(), false);
            bitmapList[i] = bitmap;
        }
        Log.i("ContestantsPhotoAdapter", "Images passed to the adapter.");
    } 
```

现在，图像的高度与宽度相同。

# asp.net - 如何混合使用 jQuery Mobile 和 ASP.NET

> ID：10057145
> 
> 赞同：7
> 
> 时间：2012-04-07T18:27:26.480
> 
> 标签：asp.net, ajax, jquery-mobile, webforms

我正在制作一个移动网站，使用 jQuery Mobile 和 ASP.NET 4.0 Webforms。我制作了一个初始登录页面（Default.aspx），其中的按钮调用了一个 ajax JavaScript 函数，该函数在后端调用一个页面方法，如下所示：

**默认.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="UCP.Default" %>
<!DOCTYPE html>
<html>
<head>
    <title>UA Cover Plus</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
</head>
<body>
    <!-- Login -->
    <div data-role="page" id="login">
        <div data-role="header" data-position="fixed">
           <h1>Login</h1>
            <a href="#Family" data-icon="gear" class="ui-btn-right" data-iconpos="notext" data-theme="b" >Options</a>
        </div>
       <div data-role="content" data-theme="a">   
            <input type="text" id="txtUserName" placeholder="Username" />
            <input type="password" name="passwordinput" id="txtPassword"  placeholder="Password" value=""  />
            <a href="javascript:Authenticate();" data-role="button" data-icon="check" data-iconpos="right">Log Me In!</a>
       </div><!-- /content -->
    </div><!-- /page -->
</body> 
```

**Ajax JQuery 功能：**

```
function Authenticate() {
    $.ajax({
        type: "POST",
        url: "Default.aspx/Authenticate",
        data: "{'name': '" + $('#txtUserName').val() + "','pass': '" + $('#txtPassword').val() + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            if (msg.d != '-1') {
                userId = msg.d;
                GetCustomisedConsole();
            } else {
                alert("Authentication Failed");
            }
        },
        error: function () {
            alert("Error :(");
        }
    });
}; 
```

**Default.aspx.cs 中的页面方法**

```
 [WebMethod]
    public static int Authenticate(string name, string pass)
    {
        using (DbContext db = new DbContext())
        {
            var user = db.Users.Where(x => x.UserName == name && x.Password == pass).SingleOrDefault();
            if (user != null)
            {
                return user.Id;
            }
            else
            {
                return -1;
            }
        }
    } 
```

我的问题是，这是它的意思吗？我问这个是因为我在 jQuery 示例中看到了表单和提交的使用，我不知道如何在 asp.net 中实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:57:58.113

我以同样的方式做，并且工作完美。

请看一下这个例子

[使用 Jquery 调用服务器方法](http://www.codeproject.com/Articles/238866/Invoke-Server-Methods-From-Client-Side-Using-JQuer)

# php - 在存储到数据库之前添加到用户输入值

> ID：10057146
> 
> 赞同：3
> 
> 时间：2012-04-07T18:27:28.357
> 
> 标签：php, sql

我有一个表单，用户填写并点击提交。然后将信息存储在数据库中。我有一个名为高度的字段。我希望用户输入类似 10 的内容，但我不希望他们输入测量值。我希望在存储到数据库之前将其添加到“10”

所以当他们点击 10 并提交时，我希望它在数据库中显示为 10 英寸或 10 英寸。

我试图用谷歌搜索它，但我什么也没得到，因为我必须非常具体地使用关键字，而我只是不知道如何搜索它。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T18:29:36.343

为什么要将其作为文本存储在数据库中？这不应该是数据库问题，而是 UI 问题。存储 10，然后`inches`在提取数据时添加？

或者您可以将 10 存储为一个值以及映射到它的类型（例如英寸/厘米/等）。这种设计会给你更多的灵活性

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-07T18:50:34.930

您可以使用 javascript 来验证表单提交 (onSubmit) 上的文本框值

在服务器 php 脚本中，您还可以再次检查该值。

# paypal - opencart 付款通过贝宝取消

> ID：10057149
> 
> 赞同：0
> 
> 时间：2012-04-07T18:28:07.187
> 
> 标签：paypal, opencart

Helo 我目前在网站上使用 opencart 1.5.1 版，当客户通过贝宝付款时，交易显示为已取消，然后以待处理状态发送到贝宝。

谁能解释一下我能做些什么来解决这个问题？

首先十分感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T22:42:32.550

您是否在管理面板中设置了正确的状态`EXTENSIONS > PAYMENTS > PAYPAL STANDARD`？如果它们都设置为取消，那就可以解释这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T11:51:39.207

在管理面板 Paypal 结帐部分，有一个选项卡订单状态。在这里您可以设置处理后的订单状态。

# asp.net - asp.net SqlDataSource SelectCommand 使用 LIKE 和 QueryString

> ID：10057152
> 
> 赞同：3
> 
> 时间：2012-04-07T18:28:27.700
> 
> 标签：asp.net, sql-like, sqldatasource, querystringparameter, selectcommand

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
SelectCommand="SELECT ProductName, ProductPrice FROM Product WHERE (@type LIKE '%' + @seach + '%')">
<SelectParameters>
    <asp:QueryStringParameter Name="type" QueryStringField="type" />
    <asp:QueryStringParameter Name="seach" QueryStringField="search" />
</SelectParameters>
</asp:SqlDataSource> 
```

问题是我根本无法得到任何返回结果，因为 og `@type`。如果我将其更改`@type`为`ProductName`它可以正常工作，但我希望该`@type`值是一个动态值，可以由用户选择并通过 using 传入`QueryString`。我该如何解决这种问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:16:11.730

在这种情况下，您可以使用动态 SQL。

将选择查询更改为存储过程说 -

```
CREATE PROCEDURE usp_GetData
    @type VARCHAR(100),
    @search NVARCHAR(max)
AS 
    BEGIN

        DECLARE @SQLQuery AS NVARCHAR(max)

        SET @SQLQuery = 'SELECT ProductName, ProductPrice FROM Product WHERE ( ['
            + @type + '] LIKE ''%' + @search + '%'')'

        PRINT @SQLQuery
        EXECUTE sp_executesql @sqlquery

    END 
```

然后使用上述程序获取数据

你可以看看： http: [//www.codeproject.com/Articles/20815/Building-Dynamic-SQL-In-a-Stored-Procedure](http://www.codeproject.com/Articles/20815/Building-Dynamic-SQL-In-a-Stored-Procedure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:24:00.327

如果您要检查的字段很少，则可以使用类似

```
"SELECT ProductName, ProductPrice FROM Product 
        WHERE (@type = 'ProductName' and ProductName LIKE '%' + @search + '%')
           OR (@type = 'ProductDescription' and ProductDescription LIKE '%' + @search + '%')
           OR (@type = 'Metadata' and Metadata LIKE '%' + @search + '%')" 
```

# php - 使用一个 SSL 证书将数据安全地从多个服务器发布到和从多个服务器？

> ID：10057153
> 
> 赞同：0
> 
> 时间：2012-04-07T18:28:43.053
> 
> 标签：php, security, ssl, curl, ssl-certificate

情况如下：

我正在开发一个开源 Web 应用程序（在 PHP 中），该应用程序将分发给域所有者（如 WordPress 之类的 abbit）。

现在我（我的服务器）需要与我的用户（用户服务器）进行通信。我将使用 cURL 在服务器之间传输数据（使用 POST）。

唯一的问题是，我有一个 SSL 证书，但用户没有。因此，用户服务器将能够与我的服务器通信，而不会受到一些邪恶的 b**** ***窃听，但我的服务器将无法安全地与我的用户服务器通信。

而且我当然不想要求用户购买 SSL 证书才能使用该应用程序。

我想知道是否有一种方法可以摆脱只使用一个 SSL 证书并仍然设法安全地往返发送数据？

我也愿意接受任何替代建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:46:38.457

您可以发布请求以回调您的服务器（并传递一些要从您的服务器请求的数据的唯一 ID），以便服务器作为客户端连接到您的服务器，传递 ID 并获取他们的信息。

但是，问题是您需要证书做什么。如果您想对那些服务器进行身份验证（或确保您的数据只到达合法服务器），那么您需要这些服务器具有有效的证书（顺便说一句，它们不称为 SSL 证书，命名是错误的）。否则欺骗服务器很容易。

# javascript - 带有 JavaScript 的 ipad 3 屏幕

> ID：10057155
> 
> 赞同：0
> 
> 时间：2012-04-07T18:29:24.253
> 
> 标签：javascript, ipad

JavaScript 提取了什么：

```
 screen.width 
```

和

```
 screen.height 
```

在 iPad 3 上？是吗：

```
1024x768 
```

是否有 2048x1536 的宽度/高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:35:26.913

`1024x768`这样大小在设备之间是一致的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:53:43.990

iPad 3 的分辨率为 2048×1536 像素——正好是当前 iPad 分辨率的两倍。

那是 iPad 的用户代理：

**平板电脑**：

```
Mozilla/5.0 (iPad; U; CPU OS 4_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8F190 Safari/6533.18.5 
```

**iPad2**：

```
Mozilla/5.0 (iPad; U; CPU OS 4_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8F191 Safari/6533.18.5 
```

**iPad3**：？？

有一种方法可以检测用户是否正在使用 iPad 设备：

```
// For use within normal web clients 
var isiPad = navigator.userAgent.match(/iPad/i) != null;

// For use within iPad developer UIWebView
// Thanks to Andrew Hedges!
var ua = navigator.userAgent;
var isiPad = /iPad/i.test(ua) || /iPhone OS 3_1_2/i.test(ua) || /iPhone OS 3_2_2/i.test(ua); 
```

但是，我认为正确的方法是根据用户分辨率而不是用户设备创建界面。您可以阅读有关响应式网页设计的更多信息，您的访问者应该会喜欢 :)

**奖金** 有一个工具，您可以同时在所有分辨率下测试您的“响应式”设计：http: [//mattkersley.com/responsive/](http://mattkersley.com/responsive/)

# java - 按下按钮时强制关闭应用程序错误

> ID：10057160
> 
> 赞同：0
> 
> 时间：2012-04-07T18:29:44.113
> 
> 标签：java, android, if-statement, android-edittext

因此，每当我单击启动页面上的按钮时，都会出现强制关闭错误。这是 main.xml 布局文件的类：

```
public class ForeverAloneActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button btnstrt = (Button) findViewById(R.id.toq1);
        btnstrt.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent frstq = new Intent(v.getContext(), QuestionOne.class);
                startActivityForResult(frstq, 0); 
```

这就是我认为产生错误的原因。此类与在启动页面上按下按钮时，您将被带到的页面相关：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView (R.layout.frstq);
    Button startQ2 = (Button) findViewById(R.id.toq2);
    startQ2.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent toQ2 = new Intent(v.getContext(), QuestionTwo.class);
            final EditText number = (EditText) findViewById(R.id.editText1);
            final Toast error = Toast.makeText(QuestionOne.this, "Please insert a value", Toast.LENGTH_SHORT);
            if (number.getText().toString().equals("")) {error.show();
            }else{
            startActivityForResult(toQ2, 0);} 
```

if 语句与下一页一样，有一个 EditText 框。我试图这样做，如果 EditText 框中没有任何内容，它会显示一条 toast 消息，说“请插入一个值”。在将整数放入 EditText 框之前，该按钮将不起作用。

如果有人可以提供帮助，将不胜感激。

日志猫：

```
04-07 19:33:58.199: W/dalvikvm(362): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-07 19:33:58.221: E/AndroidRuntime(362): FATAL EXCEPTION: main
04-07 19:33:58.221: E/AndroidRuntime(362): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.kenning.foreveralone/com.kenning.foreveralone.QuestionOne}; have you declared this activity in your AndroidManifest.xml?
04-07 19:33:58.221: E/AndroidRuntime(362):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
04-07 19:33:58.221: E/AndroidRuntime(362):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
04-07 19:33:58.221: E/AndroidRuntime(362):  at android.app.Activity.startActivityForResult(Activity.java:2817)
04-07 19:33:58.221: E/AndroidRuntime(362):  at com.kenning.foreveralone.ForeverAloneActivity$1.onClick(ForeverAloneActivity.java:22)
04-07 19:33:58.221: E/AndroidRuntime(362):  at android.view.View.performClick(View.java:2408)
04-07 19:33:58.221: E/AndroidRuntime(362):  at android.view.View$PerformClick.run(View.java:8816)
04-07 19:33:58.221: E/AndroidRuntime(362):  at android.os.Handler.handleCallback(Handler.java:587)
04-07 19:33:58.221: E/AndroidRuntime(362):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-07 19:33:58.221: E/AndroidRuntime(362):  at android.os.Looper.loop(Looper.java:123)
04-07 19:33:58.221: E/AndroidRuntime(362):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-07 19:33:58.221: E/AndroidRuntime(362):  at java.lang.reflect.Method.invokeNative(Native Method)
04-07 19:33:58.221: E/AndroidRuntime(362):  at java.lang.reflect.Method.invoke(Method.java:521)
04-07 19:33:58.221: E/AndroidRuntime(362):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-07 19:33:58.221: E/AndroidRuntime(362):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-07 19:33:58.221: E/AndroidRuntime(362):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:32:02.787

你`QuestionTwo`在清单文件中添加吗？检查您的错误 - 您是否在 AndroidManifest.xml 中声明了此活动？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:39:24.570

在清单文件中声明您的活动。看来你忘记了

```
<activity android:name="QuestionTwo" /> 
```

也不要忘记在清单文件中包含每个活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:41:34.067

嘿，您是否已将 QuestionTwo 类添加为清单文件中的活动。如果添加后

```
Intent toQ2 = new Intent(YourCurrentActivity.this,QuestionTwo.class); 
```

那么你一定没有在menifest.B'coz中添加活动，因为它在日志中清楚地显示找不到活动。您必须在清单文件中声明活动。

希望你能运行你的应用程序。

# java - 从服务器在客户端上运行一些 java 代码

> ID：10057161
> 
> 赞同：0
> 
> 时间：2012-04-07T18:29:45.160
> 
> 标签：java, rmi

我想知道这是怎么做到的。假设我有一个客户端应用程序并且它有这个方法`restartMachine();` 我怎样才能让这个方法在服务器上的客户端上执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:44:08.987

通常您会使用提供[CORBA](http://en.wikipedia.org/wiki/RMI-IIOP)的 IIOP 之类的协议。这将允许一个接口或契约来定义服务器和客户端之间的公共对象结构。

请参阅[OMG 的规格](http://www.omg.org/spec/)以进一步阅读。

# java - 无法运行 Selenium / WebDriver 的 Java 示例

> ID：10057163
> 
> 赞同：9
> 
> 时间：2012-04-07T18:29:58.357
> 
> 标签：java, selenium, webdriver

在 Java 上使用 Selenium 时遇到问题。我正在尝试遵循此页面上的示例： [http ://code.google.com/p/selenium/wiki/GettingStarted](http://code.google.com/p/selenium/wiki/GettingStarted)

我正在输入这个：

```
$ javac -cp . -cp ~/Downloads/selenium-2.20.0/selenium-java-2.20.0-srcs.jar -cp ~/Downloads/selenium-2.20.0/selenium-java-2.20.0.jar -g Example.java 
```

得到这个：

```
alis-mac-pro:selenium ali$ java ExampleException in thread "main" java.lang.NoClassDefFoundError: Example (wrong name: org/openqa/selenium/example/Example)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我将示例中的代码粘贴到 Example.java 中。

更新

* * *

irc.freenode.net 上#java 上的一个好心人告诉我将我的条目链接到类路径中。所以，而不是：

```
$ javac -cp . -cp ~/Downloads/selenium-2.20.0/selenium-java-2.20.0-srcs.jar -cp ~/Downloads/selenium-2.20.0/selenium-java-2.20.0.jar -g Example.java 
```

我用了：

```
javac -cp .:~/Downloads/selenium-2.20.0/selenium-java-2.20.0-srcs.jar:~/Downloads/selenium-2.20.0/selenium-java-2.20.0.jar -g Example.java 
```

伟大的！:-) 但现在出现了新错误：

```
Example.java:3: cannot find symbol
symbol  : class By
location: package org.openqa.selenium
import org.openqa.selenium.By;
                          ^
Example.java:4: cannot find symbol
symbol  : class WebDriver
location: package org.openqa.selenium
import org.openqa.selenium.WebDriver;
                          ^
Example.java:5: cannot find symbol
symbol  : class WebElement
location: package org.openqa.selenium
import org.openqa.selenium.WebElement;
                          ^
Example.java:6: package org.openqa.selenium.htmlunit does not exist
import org.openqa.selenium.htmlunit.HtmlUnitDriver;
                                   ^
Example.java:13: cannot find symbol
symbol  : class WebDriver
location: class org.openqa.selenium.example.Example
        WebDriver driver = new HtmlUnitDriver();
        ^
Example.java:13: cannot find symbol
symbol  : class HtmlUnitDriver
location: class org.openqa.selenium.example.Example
        WebDriver driver = new HtmlUnitDriver();
                               ^
Example.java:19: cannot find symbol
symbol  : class WebElement
location: class org.openqa.selenium.example.Example
        WebElement element = driver.findElement(By.name("q"));
        ^
Example.java:19: cannot find symbol
symbol  : variable By
location: class org.openqa.selenium.example.Example
        WebElement element = driver.findElement(By.name("q"));
                                                ^
8 errors 
```

更新

* * *

我试过了：

```
$ jar tf ~/Downloads/selenium-2.20.0/selenium-java-2.20.0.jar 
```

但是我看到了 org.openqa.selenium.By 类，例如，所以看起来我没有丢失任何包。

更新

* * *

好的！:-) 我删除了包说明符。我执行了：

```
$ javac -classpath ~/Downloads/selenium-2.20.0/selenium-java-2.20.0.jar Example.java 
```

这是评论者给我的，除了我添加了.jar的完整路径。然后我执行：

```
$ java -cp .:~/Downloads/selenium-2.20.0/selenium-java-2.20.0.jar Example 
```

这给了我：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/openqa/selenium/WebDriver
Caused by: java.lang.ClassNotFoundException: org.openqa.selenium.WebDriver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

更新

* * *

欢呼！胜利，感谢 Mike Kwan。以下是有效的：

```
alis-mac-pro:selenium ali$ javac -cp ".:/Users/ali/Downloads/selenium-2.20.0/selenium-java-2.20.0.jar:/Users/ali/Downloads/selenium-2.20.0/selenium-java-2.20.0-srcs.jar:/Users/ali/Downloads/selenium-2.20.0/libs/*" Example.java
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
alis-mac-pro:selenium ali$ java -cp ".:/Users/ali/Downloads/selenium-2.20.0/selenium-java-2.20.0.jar:/Users/ali/Downloads/selenium-2.20.0/selenium-java-2.20.0-srcs.jar:/Users/ali/Downloads/selenium-2.20.0/libs/*" Example
Page title is: Cheese! - Google Search 
```

顺便说一句，我添加了“-cp”选项的最后一部分（用于“libs/*”），因为这是我下载 Selenium / WebDriver 内容时 HTMLUnit 所在的位置。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T22:28:16.807

像这样编译：

```
javac -classpath selenium-server-standalone-2.20.0.jar Example.java 
```

除非您将 Java 文件放在 中`org.openqa.selenium.example`，否则您将不得不删除包说明符。像这样运行编译后的文件：

```
java -cp .:selenium-server-standalone-2.20.0.jar Example 
```

这会将当前目录链接到类路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T12:56:53.903

对于那些在 Eclipse 中执行 java 动态 Web 项目并收到上述错误的人，以下链接可能会有所帮助：

[http://me-ol-blog.blogspot.co.il/2013/07/using-selenium-in-java-dynamic-web.html](http://me-ol-blog.blogspot.co.il/2013/07/using-selenium-in-java-dynamic-web.html)

基本上，它提到在使用动态 Web 项目时，独立 jar 不是“独立的”，并且应该使用不同的 jar 及其依赖的 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T09:34:24.873

在您的 pom 文件中添加 html 单元驱动程序依赖项。

```
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>htmlunit-driver</artifactId>
    <version>2.21</version>
</dependency> 
```

它对我来说很好。

# javascript - 浏览器调试：如何查看某些操作后调用了哪些 Javascript 函数？

> ID：10057164
> 
> 赞同：9
> 
> 时间：2012-04-07T18:30:03.753
> 
> 标签：javascript, debugging, browser, dom-events

也许 Firebug 或 Opera，谷歌浏览器工具允许它。在哪里可以找到它？如何使用？

示例：我单击按钮并想查看该操作后触发的 Javascript 代码。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-07T18:39:08.040

在谷歌浏览器中，您可以打开开发者工具 (Ctrl+Shift+J)

选择 Profiles 选项卡，选择 Collect JavaScript CPU Profile，单击 Start

完成后，单击停止并查看进度日志...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:36:02.910

你可以在你的html中包含firebug lite ..这将使你能够调试javascript ..你可以从这里得到它：http: [//getfirebug.com/firebuglite](http://getfirebug.com/firebuglite)

# c# - 使用 JsonFX 反序列化 POCO 数组

> ID：10057165
> 
> 赞同：1
> 
> 时间：2012-04-07T18:30:15.157
> 
> 标签：c#, json, poco

我想简单地从 URL 读取一些 JSON 数据，然后将其转换为 POCO 类的集合，但我似乎无法弄清楚我做错了什么。

这是从 URL 获取的 JSON 数据示例：

```
[
{
"Name":"Together As One Run",
"Location":"Parkville, MO",
"ScheduledAt":"\/Date(1334984400000)\/",
"URL":"http://www.runningintheusa.com/Race/View.aspx?RaceID=36667"
},
{
"Name":"Lean Green Running Machine 5K Run/Walk and 1 Mile Run",
"Location":"Springfield, MO",
"ScheduledAt":"\/Date(1335589200000)\/",
"URL":"http://www.runningintheusa.com/Race/View.aspx?RaceID=53945"
},
{
"Name":"Festival of Miles",
"Location":"St. Louis, MO",
"ScheduledAt":"\/Date(1338440400000)\/",
"URL":"http://www.runningintheusa.com/Race/View.aspx?RaceID=53901"
},
{
"Name":"Miles Against Melanoma",
"Location":"Saint Charles, MO",
"ScheduledAt":"\/Date(1338613200000)\/",
"URL":"http://www.runningintheusa.com/Race/View.aspx?RaceID=53939"
}
] 
```

我可以用 WebClient 得到这些数据就好了。

我正在像这样设置我的 JsonFX 阅读器：

```
var json = new JsonReader(new DataReaderSettings(new PocoResolverStrategy())); 
```

这是我的 POCO 课程：

```
public class Race {
  public String Name { get; set; }
  public String Location { get; set; }
  public DateTime ScheduledAt { get; set; }
  public String URL { get; set; }
} 
```

我尝试以多种方式反序列化 JSON 数据，但似乎没有任何效果：

```
//reader is an instance of StreamReader
var content = reader.ReadToEnd();
//nope
//var output = json.Read<Race>(content);
//nope
//var output = json.Read<Race[]>(content); 
```

这必须是一件简单的事情，我只是找不到解决方案。我花了大约30分钟。谷歌搜索无济于事。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:48:41.467

我从未使用过 JsonFX，但您可以尝试[Json.Net](http://json.codeplex.com/)或内置的`JavaScriptSerializer`. 两者都可以正常工作。

```
 var jObj1 = JsonConvert.DeserializeObject<Race[]>(jsonstr);
 var jobj2 = new JavaScriptSerializer().Deserialize<Race[]>(jsonstr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:33:23.800

您可能需要告诉它尝试将您的日期解析为 Microsoft 样式的日期时间：

```
var jsonReader = new JsonReader(
    new DataReaderSettings(
        new PocoResolverStrategy(),
        new MSAjaxDateFilter())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:46:15.360

*编辑*哎呀，没看标题。你为什么使用 jsonfx？也许尝试一个列表？

```
var output = json.Read<List<Race>>(input); 
```

这是一个如何使用 JSON.Net 完成它的有效示例。

您将要使用 JSON.NET。它比任何内置类都快，并且在序列化字典方面做得更好。

使用 Nuget

`> Install-Package Newtonsoft.Json`

```
List<Race> deserializedRaces = JsonConvert.DeserializeObject<List<Race>>(jsonString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T18:54:25.710

我敢打赌，您需要在自定义类型上指定 datacontract 和 datamember 属性，以便 jsonFX 识别它。

```
using System.Runtime.Serialization;
[DataContract]
public class Race {
  [DataMember]
  public String Name { get; set; }
  [DataMember]
  public String Location { get; set; }
  [DataMember]
  public DateTime ScheduledAt { get; set; }
  [DataMember]
  public String URL { get; set; }
} 
```

# android - 确定我从轮式机器人中选择的内容

> ID：10057166
> 
> 赞同：0
> 
> 时间：2012-04-07T18:30:24.003
> 
> 标签：android, android-wheel

我正在使用[此处](http://code.google.com/p/android-wheel/)的车轮选择器代码。所以可以说我想实现像 cityactivities.java 这样的东西。代码如下。我现在想要的是：当用户使用滑块选择他想要的内容时，按下按钮 Go 并将他带到一个新活动。所以我必须在某处插入一个 buttonOnClickListener 但我不知道在哪里？我的意思是在代码中的哪个位置指定了用户选择的项目？我的意思是如果选择加拿大和温哥华，按 go 带他去 CanadaVancouverActivity，如果多伦多去 CanadaTorontoActivity 等等。

代码在这里：

```
package kankan.wheel.demo;

import kankan.wheel.R;
import kankan.wheel.widget.OnWheelChangedListener;
import kankan.wheel.widget.OnWheelScrollListener;
import kankan.wheel.widget.WheelView;
import kankan.wheel.widget.adapters.AbstractWheelTextAdapter;
import kankan.wheel.widget.adapters.ArrayWheelAdapter;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;

public class CitiesActivity extends Activity {
    // Scrolling flag
    private boolean scrolling = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.cities_layout);

        final WheelView country = (WheelView) findViewById(R.id.country);
        country.setVisibleItems(3);
        country.setViewAdapter(new CountryAdapter(this));

        final String cities[][] = new String[][] {
                new String[] {"New York", "Washington", "Chicago", "Atlanta", "Orlando"},
                new String[] {"Ottawa", "Vancouver", "Toronto", "Windsor", "Montreal"},
                new String[] {"Kiev", "Dnipro", "Lviv", "Kharkiv"},
                new String[] {"Paris", "Bordeaux"},
                };

        final WheelView city = (WheelView) findViewById(R.id.city);
        city.setVisibleItems(5);

        country.addChangingListener(new OnWheelChangedListener() {
            public void onChanged(WheelView wheel, int oldValue, int newValue) {
                if (!scrolling) {
                    updateCities(city, cities, newValue);
                }
            }
        });

        country.addScrollingListener( new OnWheelScrollListener() {
            public void onScrollingStarted(WheelView wheel) {
                scrolling = true;
            }
            public void onScrollingFinished(WheelView wheel) {
                scrolling = false;
                updateCities(city, cities, country.getCurrentItem());
            }
        });

        country.setCurrentItem(1);
    }

    /**
     * Updates the city wheel
     */
    private void updateCities(WheelView city, String cities[][], int index) {
        ArrayWheelAdapter<String> adapter =
            new ArrayWheelAdapter<String>(this, cities[index]);
        adapter.setTextSize(18);
        city.setViewAdapter(adapter);
        city.setCurrentItem(cities[index].length / 2);        
    }

    /**
     * Adapter for countries
     */
    private class CountryAdapter extends AbstractWheelTextAdapter {
        // Countries names
        private String countries[] =
            new String[] {"USA", "Canada", "Ukraine", "France"};
        // Countries flags
        private int flags[] =
            new int[] {R.drawable.usa, R.drawable.canada, R.drawable.ukraine, R.drawable.france};

        /**
         * Constructor
         */
        protected CountryAdapter(Context context) {
            super(context, R.layout.country_layout, NO_RESOURCE);

            setItemTextResource(R.id.country_name);
        }

        @Override
        public View getItem(int index, View cachedView, ViewGroup parent) {
            View view = super.getItem(index, cachedView, parent);
            ImageView img = (ImageView) view.findViewById(R.id.flag);
            img.setImageResource(flags[index]);
            return view;
        }

        @Override
        public int getItemsCount() {
            return countries.length;
        }

        @Override
        protected CharSequence getItemText(int index) {
            return countries[index];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T21:23:34.467

最后我找到了答案。包中有一个名为 getCurrentItem() 的函数。

# c++ - ACM ICPC-数论

> ID：10057168
> 
> 赞同：2
> 
> 时间：2012-04-07T18:30:36.430
> 
> 标签：c++, algorithm, number-theory

我正在练习 ACM ICPC 过去的问题[http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=1030](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=1030)

我无法解决这个问题，并且完全不知道如何在 3 秒的时间限制内以有效的方式做到这一点。我认为这个问题是基于数论的，但不知道该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-25T09:21:34.183

虽然转化为向量问题，但是三维向量和这么多变量有些棘手，所以我们可以先降维，把原来的方程改成： `A[1]* (s[1][2]-s[1][1], s[1][3]-s[1][1]) + a[2]* (s[2][2]- s[2][1], s[2][3]- s[2][1]) +.....+a[n]* (s[n][2]- s[n][1],..+a[n]*) = (())`。二维向量被认为是平面坐标系中从原点开始的向量。如果只有两个向量，因为`a[i]`是非负数，所以`PI`只有两个向量时，夹角一定是。如果两个相邻向量之间的夹角不大于 ，则 N 个向量可以满足上式`PI`。代码不长，但需要一个数学思维T_T这里是正确的代码。

```
#include <iostream>
#include <cstdio>
#include <cmath>
#include <algorithm>
using namespace std;

const int maxn=1000+5;
const double PI=acos(-1);
int main()
{
    int n;
    double A[maxn];
    while(scanf("%d",&n),n)
    {
        int s1,s2,s3;
        for(int i=0;i<n;i++)
        {
            scanf("%d%d%d",&s1,&s2,&s3);
            A[i]=atan2(s2-s1,s3-s1);
        }
        sort(A,A+n);
        double tmp=0;
        for(int i=1;i<n;i++)
            tmp=max(tmp,A[i]-A[i-1]);
        tmp=max(tmp,A[0]-A[n-1]+2*PI);
        if(tmp<=PI)
            printf("Yes\n");
        else
            printf("No\n");
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:49:02.123

所以我相信给出：

```
(a1,b1,c1), (a2,b2,c2) ... (an,bn,cn) 
```

您需要**确定**是否存在非负系数：

```
X = (x1,x2,...,xn) 
```

这样

```
x1*a1 + x2*a2 + ... + xn*an == 
x1*b1 + x2*b2 + ... + xn*bn == 
x1*c1 + x2*c2 + ... + xn*cn 
```

只需要一点线性代数。

**提示**：尝试用 n == 4 构造一个输入，这样所有 4 个 xis 都必须为正才能解决问题（仅用 3 个不能解决）。这可能吗？

# c# - XDocument 防止无效字符

> ID：10057171
> 
> 赞同：2
> 
> 时间：2012-04-07T18:31:00.257
> 
> 标签：c#, xml, linq-to-xml

我正在使用 XDocument 来保存某种数据库。该数据库由注册的聊天机器人组成，我只是有许多具有诸如“用户名”、“所有者”等属性的“机器人”节点。但是，偶尔会有一些聪明人决定制作一个具有*非常*奇怪角色的机器人作为属性之一。这使得 XDocument 类系列在读取该节点时抛出异常，这是一个非常大的问题，因为数据库无法完全保存，因为它一旦遇到无效字符就停止写入文件。

我的问题是 - 有没有类似的简单方法`XSomething.IsValidString(string s)`，所以我可以省略有问题的数据？我的数据库不是官方的，只是个人使用，所以我没有必要包含坏数据。

我正在使用的一些代码（变量`file`是 XDocument）：
保存：
`file.Save(Path.Combine(Environment.CurrentDirectory, "bots.xml"));`

加载（在检查是否`File.Exists()`等之后）：
`file = XDocument.Load(Path.Combine(Environment.CurrentDirectory, "bots.xml"));`

添加到数据库（变量都是字符串）：

```
 file.Root.Add(new XElement("bot",
                new XAttribute("username", botusername),
                new XAttribute("type", type),
                new XAttribute("botversion", botversion),
                new XAttribute("bdsversion", bdsversion),
                new XAttribute("owner", owner),
                new XAttribute("trigger", trigger))); 
```

请原谅我缺乏适当的 XML 技术，我才刚刚开始。我要问的是是否有`XSomething.IsValidString(string s)`方法，而不是我的 XML 有多糟糕。

好的，我又遇到了异常，这是确切的消息和堆栈跟踪。

```
System.ArgumentException: '', hexadecimal value 0x07, is an invalid character.
at System.Xml.XmlUtf8RawTextWriter.InvalidXmlChar(Int32 ch, Byte* pDst, Boolean entitize)
at System.Xml.XmlUtf8RawTextWriter.WriteAttributeTextBlock(Char* pSrc, Char* pSrcEnd)
at System.Xml.XmlUtf8RawTextWriter.WriteString(String text)
at System.Xml.XmlUtf8RawTextWriterIndent.WriteString(String text)
at System.Xml.XmlWellFormedWriter.WriteString(String text)
at System.Xml.XmlWriter.WriteAttributeString(String prefix, String localName, String ns, String value)
at System.Xml.Linq.ElementWriter.WriteStartElement(XElement e)
at System.Xml.Linq.ElementWriter.WriteElement(XElement e)
at System.Xml.Linq.XElement.WriteTo(XmlWriter writer)
at System.Xml.Linq.XContainer.WriteContentTo(XmlWriter writer)
at System.Xml.Linq.XDocument.WriteTo(XmlWriter writer)
at System.Xml.Linq.XDocument.Save(String fileName, SaveOptions options)
at System.Xml.Linq.XDocument.Save(String fileName)
at /* my code stack trace omitted */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T18:45:03.993

尝试更改以下代码的 file.Save 行：

```
XmlWriterSettings settings = new XmlWriterSettings();
settings.CheckCharacters = false;
XmlWriter writer = XmlWriter.Create(Path.Combine(Environment.CurrentDirectory, "bots.xml"), settings);
file.Save(writer); 
```

来源：[http ://sartorialsolutions.wordpress.com/page/2/](http://sartorialsolutions.wordpress.com/page/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:51:06.000

从 .NET 4 开始，您可以使用`XmlConvert.VerifyXmlChars(string content)`. 如果不接受传递的字符串，这将引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:36:55.017

首先，您可以检查您的 XML 文件是否以正确的编码保存？我通常将 xml 文件保存为 UTF8，您可以在 xml 标头中声明编码

```
<?xml version="1.0" encoding="UTF-8"?> 
```

当然，您的 xml 正文必须符合 xml 标准。这是一篇关于它的好文章

[http://weblogs.sqlteam.com/mladenp/archive/2008/10/21/Different-ways-how-to-escape-an-XML-string-in-C.aspx](http://weblogs.sqlteam.com/mladenp/archive/2008/10/21/Different-ways-how-to-escape-an-XML-string-in-C.aspx)

# javascript - JavaScript 中的键盘事件监听器

> ID：10057172
> 
> 赞同：6
> 
> 时间：2012-04-07T18:31:12.647
> 
> 标签：javascript, mouseevent, dom-events, keyboard-events

是否有可能 `canvas.addEventListener('onkeydown', ev_keydown, false);`像我们有鼠标事件监听器一样有键盘事件监听器

```
canvas.removeEventListener('mousedown', ev_mousedown, false);
canvas.addEventListener('mousedown', ev_mousedown, false); 
```

在 JavaScript 中。如果不是，那么替代方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:48:09.953

检查这是否适合您。您的示例行的前缀仅用于 IE 方法 attachEvent。

```
function listener(elem, evnt, func)
{
    if (elem.addEventListener)
        elem.addEventListener(evnt,func,false);
    else if (elem.attachEvent) // For IE
        return elem.attachEvent("on" + evnt, func);
}

listener(document.getElementById('myCanvas'), 'keydown', ev_keydown); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:39:36.183

jQuery 提供了一种将事件监听器绑定到 DOMElements 的简单方法

还有键盘事件的事件监听器这里有一些链接

[http://api.jquery.com/keydown/](http://api.jquery.com/keydown/)

[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

你可以将它们绑定到窗口，这应该做你想要的

您还可以使用自己的方法以跨浏览器兼容的方式绑定事件

```
function bindEvent(e, typ, handler) {
   if(e.addEventListener) {
      e.addEventListener(typ, handler, false);
   }else{
      e.attachEvent('on'+typ, handler);
   }
} 
```

这也应该允许您绑定提到的事件类型

# php - PHP 易于嵌入的网络统计引擎

> ID：10057173
> 
> 赞同：0
> 
> 时间：2012-04-07T18:31:27.797
> 
> 标签：php, content-management-system, web, statistics, embeddable

我正在开发一个内容管理系统，我想在我的后端面板中嵌入一个网络统计引擎（视图、访问者、每个日期的唯一访问者等），在我的后端本身而不是引擎外部显示报告后端。您能否向我推荐任何可轻松嵌入到现有 cms 中的统计引擎？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:36:24.280

[谷歌分析](http://www.google.com/analytics/)，也许使用他们的[报告 API 。](http://code.google.com/apis/analytics/docs/gdata/v3/gdataGettingStarted.html)

# javascript - 如何将大的双精度序列存储为javascript文件中的文字字符串

> ID：10057174
> 
> 赞同：0
> 
> 时间：2012-04-07T18:31:32.490
> 
> 标签：javascript, base64, decode

存储 ca 的最佳方法是什么？直接在js文件中的100个双打序列？每个序列的长度为 ca。10 000 双倍或更多。

要求

*   javascript 文件必须尽可能快地执行

*   对我来说，按需迭代序列就足够了（我不需要在 js 执行时解码所有数字。它们将在事件时解码。）

*   它不应该占用太多空间

最简单的选择可能是使用 CSV 格式的字符串，但是双打并没有以最有效的方式存储，对吧？

另一种选择可能是将数字存储在 Base64 字节数组中，但是我不知道如何将 base64 字符串读取为双精度。

编辑：

我想使用双打来转换 Adob​​e 3D 注释中的 3d 节点的 Matrix4x4。Adobe 允许导入外部文件，但它非常复杂，直接将所有数据包含在 js 文件中可能会更简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:40:12.450

正如我在评论中提到的，尝试对值进行编码可能不值得。以下是我关于存储双打所需数据量的一些值（根据评论更新）。

假设有 1,000,000 个值：

*   使用直接编码（不适用于 JS 文件）：8 B = 8 MB
*   使用 base64：10.7 B = 10.7 MB
*   文字（最佳情况）：1 B + 分隔符 = 2 MB
*   文字（最坏情况）：21 B + 分隔符 = 22 MB
*   文字（平均情况假设均匀分布的值）：19 B + 分隔符 = 20MB

注意：在最坏的情况下，双精度可能需要 21 个字节（假设精度为 15 位）：1.23456789101112e-131

如您所见，您仍然无法将其减少到使用带有编码的纯文字值的 1/2 以下，如果您打算进行随机访问解码，它会很快变得复杂。最好坚持文字。您可能会从使用您提到的外部文件中获得一些好处，但这取决于这样做需要付出多少努力。

关于如何使用文字进行优化的一些想法：

*   根据所需的精度，您可以近似值并将值限制为 5 位精度。这将难以置信地缩短文件。
*   你可以压缩文件。我认为您可以使用 14 个字符 ( `0123456789.e-,`) 指定任意数量的双精度数，因此理论上，您可以将这样的字符串压缩到其大小的一半。我不知道实用的现代压缩程序有多好。

# facebook - 当我打开 facebook.com / mebload trojan 时 Firefox 冻结

> ID：10057176
> 
> 赞同：-1
> 
> 时间：2012-04-07T18:31:38.317
> 
> 标签：facebook, firefox, freeze

我不知道我的 Firefox 发生了什么（其他浏览器工作正常）。[我尝试了http://support.mozilla.org/en-US/kb/Firefox-hangs](http://support.mozilla.org/en-US/kb/Firefox-hangs)上提到的每一步，但问题仍然存在。

我使用 Revo Uninstaller 删除并完全卸载了 Firefox，但这并没有帮助。问题是，当我在按 Enter 后开始输入 facebook.com 之类的网站时，Firefox 会冻结一段时间，然后该网站就会打开。每次点击网站都会重复此行为。

我还注意到，有时 nod32 会警告我有关 firefox.exe 中的 MEBLOAD TROJAN，它在内存中运行。Firefox 版本是 11.0，我最近也更新了我的 nod32。我在法语中找到了这个链接[http://forum.malekal.com/trojan-win32-mebload-t36996.html](http://forum.malekal.com/trojan-win32-mebload-t36996.html)，但我不明白所描述的内容。

有人可以建议修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:49:08.917

fixed by running combofix.exe www.combofix.org/download.php

# python - 无法在 Django 中调用模型方法

> ID：10057182
> 
> 赞同：0
> 
> 时间：2012-04-07T18:32:42.560
> 
> 标签：python, django, django-models

我在 Django model.py 中有一个类

```
class Ticket(models.Model):
    game = models.ForeignKey(Game)

    def __unicode__(self):
        return self.numbers

    def checksum(self):
        #calculate checksum here 
```

在其他功能中，我可以调用类似：ticket.checksum

但后来，我添加了另一种方法（get_scan）

```
class Ticket(models.Model):
    game = models.ForeignKey(Game)

    def __unicode__(self):
        return self.numbers

    def checksum(self):
        #calculate checksum here

    def get_scan(self):
        #calculate get_scan here 
```

但现在我不能打电话给 ticket.get_scan （尽管 ticket.checksum 仍然有效）

我尝试过不同的方式，比如重启 web 服务器，调用 Django shell ......但它不起作用。

错误：“票证”对象没有属性“get_scan”

更新：关于缩进问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:59:52.317

尝试删除任何剩余的 *.pyc 文件并重新启动网络服务器

# java - java：分别读取同一行中的元素

> ID：10057184
> 
> 赞同：1
> 
> 时间：2012-04-07T18:32:59.940
> 
> 标签：java, filereader

我知道这是基本的，但不知何故我已经在这里停留了一段时间。如果我必须从文本文件中读取一些像这样的模式

```
10     9    20    12    14      29
11     3    16    30    33      26
12    20    10    14     8 
```

我希望所有这些数字都采用不同的方式。需要使用的基本java函数是什么。我确实尝试使用修剪然后拆分，但我没有得到正确的结果，将“|\t”作为拆分的参数。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T18:35:04.127

你可以试试这个：

```
String[] line = s.split("\\s+");
for (String next : line) {
    int i = Integer.parseInt(next);
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T18:47:03.017

最容易使用的是[扫描仪](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)。

```
Scanner sc = new Scanner(new File("foo.txt"));
while (sc.hasNextLong()) {
    long aLong = sc.nextLong();
} 
```

# sql - 从单个报告中的两个不同表中检索数据

> ID：10057185
> 
> 赞同：1
> 
> 时间：2012-04-07T18:33:08.630
> 
> 标签：sql

我有两个表 Employee 和 Salary 表，salary 由名为 Salary_employee 的字段中的员工薪水组成。第二个是额外费用，额外费用包含与公司额外费用相关的记录，例如电费，办公室维护在名为extra_expense的字段中。

（他们是这两个表之间没有关系）。

最后，我只想在报告中显示公司的所有费用，为此我需要对两个表进行分组。在这里使用什么加入或联合？

![](../Images/4c071c2a9fe4c7077ca3831978089947.png) ![](../Images/228e17066ab7a6dacbdb40598f44bd81.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:36:00.553

如果这两个表之间没有关系，那么这真的行不通，因为你不知道费用应该绑定到哪里。如果可能，您应该重新设计数据库，因为根据您的描述这听起来不可能。

**更新**

好的，看你的截图，我猜这个数据库只存储一个公司信息？而不是多个？

如果这是正确的，并且如果您只想将数据压缩成一份流动的费用报告，那么我确实建议使用`UNION`. A`JOIN`不会给你你正在寻找的流量。A`UNION`只会将两个输出粉碎成一个......我认为这就是你所要求的？

```
SELECT ext_amount AS amount, ext_date AS date_of_trans
FROM extra_expenses
UNION
SELECT sal_cash AS amount, sal_dateof_payment AS date_of_trans
FROM employee_salary 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:55:01.777

听起来您不需要使用组*或*加入。只需在脚本中分别查询这两个表并根据它们的结构处理它们以生成报告。

联接和联合是可用于从单独的表中提取关于共同事物的不同信息的函数。例如，如果您有一个用户的私人详细信息存储在一个表中，但他们的个人资料信息在另一个表中。如果您想同时显示私人详细信息和个人资料信息，您可以通过通用用户名连接这两个表，以便在一个查询中组合和收集有关用户的所有信息。

# c++ - 多个线程同时在 unordered_map 中添加值使其崩溃

> ID：10057186
> 
> 赞同：-3
> 
> 时间：2012-04-07T18:33:09.870
> 
> 标签：c++, multithreading, visual-c++, c++-cli, backgroundworker

```
unordered_map<std::string,unordered_map<std::string, std::string> >* storing_vars; 
```

我在作用域中声明的作用域中有这个变量。

这是在构造函数中声明的。

```
this->storing_vars =  new unordered_map<std::string,unordered_map<std::string, std::string> >(); 
```

为了初始化它。

然后我所做的是我的 BackgroundWorker 一遍又一遍地调用一个函数

```
for(int i2 = 0; i2 < 30; i2++){

                int index_pos_curr = i2;

                //Start the Threads HERE

                this->backgroundWorker2 = gcnew System::ComponentModel::BackgroundWorker;
                this->backgroundWorker2->WorkerReportsProgress = true;
                this->backgroundWorker2->WorkerSupportsCancellation = true;

                //this->backgroundWorker2->FieldSetter(L"std::string",L"test","damnnit");

                backgroundWorker2->DoWork += gcnew DoWorkEventHandler( this, &MainFacebook::backgroundWorker2_DoWork );
                backgroundWorker2->RunWorkerCompleted += gcnew RunWorkerCompletedEventHandler( this, &MainFacebook::backgroundWorker2_RunWorkerCompleted );
                backgroundWorker2->ProgressChanged += gcnew ProgressChangedEventHandler( this, &MainFacebook::backgroundWorker2_ProgressChanged );
                backgroundWorker2->RunWorkerAsync(index_pos_curr);
                Sleep(50); //THE PROBLEM IS HERE, IF I COMMENT THIS OUT it won't work, that's probably because there are a lot of functions trying to add values in the same variable (even though the indexes are differents in each call)
            } 
```

完成后，它会调用 DoWork 函数

```
void backgroundWorker2_DoWork(Object^ sender, DoWorkEventArgs^ e ){
             BackgroundWorker^ worker = dynamic_cast<BackgroundWorker^>(sender);         
             e->Result = SendThem( safe_cast<Int32>(e->Argument), worker, e );          

        }

int SendThem(int index){

            stringstream st;
            st << index;

            //...
            (*this->storing_vars)[st.str()]["index"] =  "testing1";
            (*this->storing_vars)[st.str()]["rs"] = "testing2";
            return 0;
} 
```

当我在该行中添加注释时`Sleep(50)`，我认为问题在于，由于后台线程调用相同的函数，因此在多次调用时存储数据可能会出现问题，甚至可能没有等待其他存储到完成后，它会导致“xhash.h”文件中出现错误，该错误已通过 using 进行清理`Sleep(50)`，但我无法使用这些错误，因为它会冻结我的 UI，而且 50 毫秒是我假设它已经存储的时间变量值，但是如果在较慢的计算机上需要更长的时间怎么办？这不是正确的方法。

我该怎么做才能解决这个问题？

我希望能够在不使用 SLEEP 的情况下更新 unordered_map

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T21:30:54.680

`unordered_map`您一次只能从*一个*线程修改标准库容器（包括但不限于）。解决方案是使用临界区、互斥体、锁来同步访问。如果您不知道这些是什么，那么您需要在尝试创建多个线程*之前知道。*

没有如果、但是或为什么。

如果您有多个线程，则需要同步它们的机制，以序列化对共享数据的访问。常见的同步机制就是上面提到的那些，所以去查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T20:31:17.510

经过这么多票否决后，我实际上开始寻找互斥锁，人们在这里谈论，过了一段时间我发现它真的很容易使用。这是我的同事告诉我的正确方法。谢谢大家的帮助=D

在这里我做了什么，我只需要添加

```
//Declare the Mutex
static Mutex^ mut = gcnew Mutex;

//then inside the function called over and over again I used mutex
mut->WaitOne();
//Declare/Update the variables
mut->ReleaseMutex();
//Then I release it. 
```

效果很好，谢谢大家的帮助和批评。哈哈

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-07T21:21:22.057

我通过预定义我想使用的 unordered_map 的索引找到了一种解决方案，问题只是创建索引，多线程更新似乎没问题。

```
for(int i2 = 0; i2 < 30; i2++){

                int index_pos_curr = i2;

                //Start the Threads HERE

                this->backgroundWorker2 = gcnew System::ComponentModel::BackgroundWorker;
                this->backgroundWorker2->WorkerReportsProgress = true;
                this->backgroundWorker2->WorkerSupportsCancellation = true;
                backgroundWorker2->DoWork += gcnew DoWorkEventHandler( this, &MainFacebook::backgroundWorker2_DoWork );
                backgroundWorker2->RunWorkerCompleted += gcnew RunWorkerCompletedEventHandler( this, &MainFacebook::backgroundWorker2_RunWorkerCompleted ); stringstream st; st << index_pos_curr;

                (*this->storing_vars)[st.str()]["index"] = ""; 
               //This ^^^^^ will initialize it and then in the BackgroundWorker will only update, this way it doesn't crash. :)

                backgroundWorker2->ProgressChanged += gcnew ProgressChangedEventHandler( this, &MainFacebook::backgroundWorker2_ProgressChanged );
                backgroundWorker2->RunWorkerAsync(index_pos_curr);
                Sleep(50); //THE PROBLEM IS HERE, IF I COMMENT THIS OUT it won't work, that's probably because there are a lot of functions trying to add values in the same variable (even though the indexes are differents in each call)
            } 
```

# ftp - 从 FTP 下载 xml 文件

> ID：10057188
> 
> 赞同：0
> 
> 时间：2012-04-07T18:33:35.237
> 
> 标签：ftp, download, automation

我想要脚本从 ftp 下载 xml 文件，已经为它编写了小脚本并且看起来工作正常，同时从命令提示符 ftp -s:script.txt 运行脚本。是否可以将 script.txt 文件保存在其他驱动器中并运行它。

因为我的脚本在 D\scripts 驱动器中，并且我的命令提示符默认我为 C 驱动器，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:44:59.143

如果我没记错的话，你可以指定完整路径：

```
ftp -s:D:\somepath\script.txt 
```

如果路径包含空格，请小心使用引号：

```
ftp -s:"D:\some path with spaces\script.txt" 
```

# android - MQTT 安全 - 如何防止滥用者订阅主题？

> ID：10057189
> 
> 赞同：31
> 
> 时间：2012-04-07T18:33:36.043
> 
> 标签：android, mqtt

我现在已经为 MQTT 做好了一切设置和工作。我正在使用 IBM wmqtt.jar 和 Mosquitto 代理..

我的 Java Servlet 创建到代理的 MQTTConnection 并在“AndroidDeviceID/myAppName”主题下发布。

Android 客户端订阅了相同的主题...

在我看来，如果有人知道我用户的设备名称，他们可以创建一个简单的 Android 应用程序并在我的 MQTT 代理上订阅该主题。然后他们从我的用户那里得到所有的通知（在这种情况下是即时消息）..

如何正确避免这种情况？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-07T18:54:12.270

Mosquitto 通过用户名和密码身份验证以及使用访问控制列表限制对主题的访问来提供安全性。mosquitto.conf 手册页中有详细信息：http: [//mosquitto.org/man/mosquitto-conf-5.html](http://mosquitto.org/man/mosquitto-conf-5.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-17T14:05:30.237

ACL 是限制客户端订阅主题的原因，我正在使用 auth-plugin 这样做，这里是链接[mosquitto auth plugin](https://github.com/jpmens/mosquitto-auth-plug)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T15:49:59.240

一般来说，MQTT 保持安全性非常“轻”，因为它最初是为与封闭的传感器网络一起使用而设计的。由代理实现提供例如 SSL 并决定如何处理用户名/密码后端。

消息数据的加密不太可能由协议本身提供，如果这很关键，通常会在应用层完成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-03T18:49:54.923

如果您需要更自定义的方式来处理主题的访问控制和权限，请尝试使用 HiveMQ MQTT 代理。就像文档中解释的那样，您可以使用插件实现自己的行为。这种方法允许您完全决定如何处理客户端、发布和订阅的身份验证和授权 [1]。如果您有兴趣开始使用您自己的插件的最佳方式，请参阅此处 [2]。

顺便说一句，为 HiveMQ [3] 配置 TLS 也很容易。

克里斯蒂安（HiveMQ 团队）

[1] [http://www.hivemq.com/docs/plugins/1.5.0/#auth-permission-chapter](http://www.hivemq.com/docs/plugins/1.5.0/#auth-permission-chapter)

[2] [http://www.hivemq.com/documentations/getting-started-plugins/](http://www.hivemq.com/documentations/getting-started-plugins/)

[3] [http://www.hivemq.com/docs/hivemq/1.5.0/#hivemqdocs_ssl_tls](http://www.hivemq.com/docs/hivemq/1.5.0/#hivemqdocs_ssl_tls)

# asp.net - 在 Html.Raw() (MVC3) 中渲染 Razor

> ID：10057194
> 
> 赞同：1
> 
> 时间：2012-04-07T18:34:17.147
> 
> 标签：asp.net, asp.net-mvc-3, razor

是否可以在 Html.Raw() 中渲染 Razor？我正在生成一个动态页面，它使用 Html.Raw() 方法来呈现在控制器中创建的页面。在这个页面中，我有一个图像标签，它应该通过 Url.Action 检索图像。

```
var image = string.Format("<img src=\"@Url.Action(\"GetImage\", \"ImageUtility\")?id={0}\" alt=\"{1}\" />", Image.ImageId, Image.Name); 
```

如您所见，这将在不渲染剃刀的情况下渲染以下内容：

```
<img src="@Url.Action("GetImage", "ImageUtility")?id=10000" alt="Image Name" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:48:32.103

尝试`Url.Action`用括号括起来。

请参阅[此答案](https://stackoverflow.com/a/4249994/290343)和@Igor 相关的评论。

# regex - 使用正则表达式使用纯 URL 搜索和替换 wordpress 视频短代码

> ID：10057195
> 
> 赞同：0
> 
> 时间：2012-04-07T18:34:23.847
> 
> 标签：regex, wordpress

我正在将朋友的 wordpress.com 博客转移到我的服务器上的自托管安装。问题是，他在他的博客中嵌入了许多视频，使用 wordpress 3 上不需要的简码插件（您只需粘贴纯 URL 即可嵌入来自 YouTube、Vimeo 等的视频；

我找到了一个搜索正则表达式插件，它可以使用正则表达式进行搜索和替换，但我自己不熟悉正则表达式。我如何在 [youtube="URL"] 之类的短代码中捕获 url 并仅用 URL 替换它？

感谢您的任何帮助，您可以提供！！

-珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T21:50:49.007

你想从 " `[youtube=http://www.youtube.com/watch?v=JaNH56Vpg-A]`" 到`http://www.youtube.com/watch?v=JaNH56Vpg-A`?

如果不同 URL 之间有空格，则此方法有效。

```
find: \[youtube=(\S*)\]
replace with: $1 
```

很难一次更换所有不同的服务，因为它们的短代码似乎不同。对于 Vimeo，这将起作用。它允许在“vimeo”和 URL 之间有一个随机数的空白。并且它在关闭“]”后再次需要空格。

```
find: \[vimeo\s+(\S*)\]
replace with: $1 
```

也许有更健壮的方式来编写表达式。（这验证了正确的语法。）这是一个非常简单的想法。

实际的正则表达式语法取决于所使用的语言。希望这可以帮助。

# php - Imagick `convert` 仅适用于终端而不适用于 PHP

> ID：10057196
> 
> 赞同：0
> 
> 时间：2012-04-07T18:34:30.220
> 
> 标签：php, osx-lion, mamp, imagick

## 实际情况

2008 年初的 MacBook Pro

OSX 狮子 10.7.3

MAMP 2.0.5

ImageMagick-x86_64-apple-darwin11.3.0.tar.gz - 从终端安装并完美运行

gplgs-8.71.dmg - 从终端和 Imagick 安装并完美运行

## 什么有效？

使用终端“转换”命令可以完美运行！我可以毫无问题地将PDF转换为JPG...

## 问题是什么？

如果我尝试在 PHP 中使用 Imagick 午餐（最简单的）演示命令：

*“转换标志：logo.gif”*

什么都没发生！我一步一步地遵循[了这个指南](http://www.maratz.com/blog/archives/2010/05/11/imagemagick-with-mamp/)，我知道我必须修改“envvars”文件并且我做到了，但是......这不是解决方案！

我试图读取 shell 错误，但 PHP 没有返回任何内容……我尝试了各种命令：

```
define('MAGICK_PATH', '/Applications/MAMP/bin/ImageMagick/ImageMagick-6.7.5/bin/');

echo exec(MAGICK_PATH.'convert logo: logo.gif', $output);
var_dump($output);
=> array(0) { }

$output = shell_exec(MAGICK_PATH."convert logo: logo.gif");
echo "<pre>$output</pre>";
=> *nothing*

$last_line = system(MAGICK_PATH.'convert logo: logo.gif', $retval);
echo '
</pre>
<hr />Last line of the output: ' . $last_line . '
<hr />Return value: ' . $retval;
=> Last line of the output:
=> Return value: 5

$last_line = system(MAGICK_PATH.'convert -version', $retval);
echo '
</pre>
<hr />Last line of the output: ' . $last_line . '
<hr />Return value: ' . $retval;
=> Last line of the output:
=> Return value: 5

$last_line = system(MAGICK_PATH."convert -colorspace RGB -interlace none -density 104.6x104.6 -quality 100 -bordercolor white doc.pdf[0] doc.png", $retval);
echo '
</pre>
<hr />Last line of the output: ' . $last_line . '
<hr />Return value: ' . $retval;
=> Last line of the output:
=> Return value: 5 
```

我想也许程序没有吃午饭但是......我可以在任务管理器中看到它并且 CPU 工作了几秒钟，Imagick 正在做一些事情，但最后我没有任何输出！！！>_< 我发现了很多关于这个的话题，但我还没有找到一个可行的解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:21:53.537

尝试像这样包装命令：

```
exec($cmd." 2>&1", $out, $ret);
if ($ret){
    echo "There was a problem!\n";
    print_r($out);
}else{
    echo "Everything went better than expected!\n";
} 
```

`exec()`让您捕获所有输出并获取退出代码。添加`2>&1`确保重定向`STDERR`到，`STDOUT`以便您可以看到任何错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:39:49.490

Also, as an addendum to my earlier comment: try supplying fully-qualified paths to your input and output filenames. Commands are launched in PHP with a default current working directory - and this may not be the same dir that the script is actually contained within.

If you want to see what your default directory is for system commands, try:

```
exec('pwd'); 
```

If any of your paths have spaces in (or if at any stage they contain user input) you should run your parameters through `escapeshellarg()` to make sure they will work (and that they are safe to run).

# asp.net - ASP.NET MVC 3：以编程方式将 DataAnnotation (RequiredAttribute) 添加到视图模型

> ID：10057199
> 
> 赞同：2
> 
> 时间：2012-04-07T18:35:03.073
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, validation

我正在使用 javascript 不显眼的验证。我有一个视图模型，我正在为多个表单重复使用，并且在某些表单中，视图模型上的一些属性是必需的。在其他形式上，它们不应该是。有没有办法以编程方式在属性上设置 [Required]，这样我就可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T18:45:27.903

不能使用 DataAnnotations 来完成，因为这些是在编译时实现的，不能动态添加。你可以

创建具有正确注释的不同视图模型

或者

有一个服务，您将视图模型发送到该服务，该服务根据模型来自的操作检查模型并返回您可以附加到模型状态的验证错误列表

或者

在 ViewModel 上放置一个属性，例如`string IsBeingUsedFor`并将其与RequiredIf DataAnnotation 结合使用。 [这是一个已经构建的使用条件 DataAnnotations 的库的示例](http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx)。然后你可以说，[RequireIf("IsBeingUsedFor", "Action_A")]

这些不一定是所有选项，而是一些更清洁的选项。您可以在 JavaScript 中完成所有这些操作，但是如果“坏人”提交表单并绕过客户端验证，您将失去服务器端验证，并且可能会在您的应用程序中打开一些漏洞。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T18:45:08.210

我不知道有任何方法可以使用数据注释来做到这一点。但是，在您看来，您可以在 javascript 中添加/删除所需的规则。

```
$("#myProperty").rules("add", { required: true }); 
```

或者

```
$("#myProperty").rules("remove", "required"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T18:45:29.920

[属性](http://msdn.microsoft.com/en-us/library/aa288059%28v=vs.71%29.aspx)是在运行时通过反射访问的，所以我不知道您可以在需要时关闭和打开。我的建议是创建一个“必需”视图模型和一个“非必需”视图模型。我知道你这可能是你想要的，但这将是我能想到的最简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-01T17:21:21.230

如果客户端验证对您来说足够了，那么您可以在 Razor 视图中执行以下操作，例如：

```
 @Html.LabelFor(model => model.title, new { @class = "control-label col-md-2" })
    <div class="col-md-10">
        @if (Model.IsTitleRequired == true)
        {
            @Html.TextBoxFor(model => model.title, new { @required = true })
        }
        else
        {
            @Html.TextBoxFor(model => model.title)
        }
        @Html.ValidationMessageFor(model => model.title)
    </div> 
```

# javascript - 固定模板侧边栏位置固定

> ID：10057204
> 
> 赞同：1
> 
> 时间：2012-04-07T18:35:33.417
> 
> 标签：javascript, html, css

我想将以下模板上的侧边栏更改为固定位置。

是否可以不使用javascript而只使用css来做到这一点？

[模板演示](http://jsfiddle.net/kFBuD/109/)

PS：侧边栏的放置位置固定它不是一个选项，因为它改变了网站的整个结构并且它们被放置在内容区域之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T04:23:45.753

你想这样吗？？[http://jsfiddle.net/kFBuD/1447/](http://jsfiddle.net/kFBuD/1447/)

```
overflow:hidden; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:43:43.467

您可以使用**位置：固定**

```
.sidebar1, .sidebar2 {
    background: red;
    height:100%;
    width: 100px;
    top:0;
    padding-top:60px;
    **position:fixed;**
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:46:05.650

`overflow`如果您不希望在 CSS 或 JavaScript 中使用 HTML 的属性，则可以使用它。

# hbase - 通过 Hive 访问 HBase 表中的现有行

> ID：10057206
> 
> 赞同：1
> 
> 时间：2012-04-07T18:35:53.210
> 
> 标签：hbase, hive

有没有办法通过 Hive 访问现有的 HBase 表记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:17:26.633

根据[Hive HBase 集成 wiki 页面](https://cwiki.apache.org/Hive/hbaseintegration.html)，可以使用如下的 create table 命令：

```
CREATE TABLE hbase_table_1(key int, value string) 
STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'
WITH SERDEPROPERTIES ("hbase.columns.mapping" = ":key,cf1:val")
TBLPROPERTIES ("hbase.table.name" = "xyz"); 
```

但是，请记住，在 Hive 0.8 及之前的版本中创建这样的表将只允许您访问通过相应 Hive 表插入的 HBase 表中的数据。如果您的 HBase 表中有任何未通过 Hive 表插入的预先存在的数据，您也将无法通过 Hive 表查询它。

从 Hive 0.9 开始，[JIRA 1634](https://issues.apache.org/jira/browse/HIVE-1634)将可用，它允许 Hive 表访问 HBase 表中存在的所有数据，而不管它是如何插入其中的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T21:15:00.590

是的，这绝对是可能的。事实上 Hive 被大量使用，因为 Hbase 不提供诸如“JOINS”等 SQL 函数。此外，Hive 让不熟悉 NOSQL 术语的用户变得容易。你只需要在 Hive 中创建一个表，该表提供与现有 Hbase 表的映射。创建此映射时应小心。正确包含 Hbase 表中存在的所有内容。我想在这里添加一件重要的事情。 .我们不应该将 Hive 视为 Hbase 的替代品，因为它适用于批处理而不是完全实时的应用程序。

# sugarcrm - sugarcrm globalsearch 自定义字段

> ID：10057212
> 
> 赞同：1
> 
> 时间：2012-04-07T18:36:13.107
> 
> 标签：sugarcrm

我想为主要地址字段的潜在客户实施全球搜索，我

按照[此链接](http://developers.sugarcrm.com/wordpress/2011/04/29/howto-add-custom-fields-into-the-global-search/)执行以下步骤。

一旦完成，我已经进行了快速修复和重建，但我无法得到结果。还有什么要做的吗？

在中创建了一个名为 customGlobalSearchFields.php 的新文件 `/custom/Extension/modules/Leads/ext/Vardefs/`

并添加了以下代码：

```
$dictionary['Leads']['fields']['primary_address_street']['unified_search'] = true; 
```

还添加了`custom\modules\Leads\metadata\SearchFields.php`

```
'primary_address_street' => 
  array (
    'query_type' => 'default',
  ), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:49:51.877

您已经为全球搜索启用了潜在客户模块，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-03T06:34:38.167

请尝试此代码..

> custom\modules\Leads\metadata\SearchFields.php

```
'primary_address_street' => 
  array (
    'query_type' => 'default',
    'force_unifiedsearch'=>true
  ), 
```

班蒂·格洛特

# php - 如何检查用户/应用程序是否可以在目标组墙上发帖？

> ID：10057220
> 
> 赞同：2
> 
> 时间：2012-04-07T18:36:46.083
> 
> 标签：php, facebook, facebook-graph-api

我可以在群组/页面和用户墙上发帖，但我不希望我的应用在所选墙上发帖时显示错误，如果所选墙不允许发帖，那么**有什么方法可以知道我们是否可以发帖在目标墙上？**

注意：我发现了两个类似的问题，但它们并不完全符合我想要的

[1 应用程序可以发布在用户的墙上](https://stackoverflow.com/questions/8148626/application-able-to-post-on-users-wall)

[2 如何使用php sdk检查朋友是否允许我在他的墙上发帖](https://stackoverflow.com/questions/8485020/how-to-check-the-permission-whether-a-friend-allow-me-to-post-on-his-wall-or-not)

在采取任何负面行动之前，请在评论中讨论。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:20:19.577

AFAIK，没有办法准确地检查你想要的方式，因为隐私会有所不同，正如你已经说过的那样。唯一可以查询的隐私设置是`OPEN, CLOSED, or SECRET`group [，](https://developers.facebook.com/docs/reference/api/group/ "https://developers.facebook.com/docs/reference/api/group/")可以通过调用graph api来完成：

```
`http://graph.facebook.com/$Group_id` 
```

这将返回具有字段的 json 数据，该字段`privacy`将是`OPEN, CLOSED, or SECRET`.

但除此之外，您还有群组设置，您可以将发帖限制为仅限*群组管理员*。并且该权限**不能被检查**。

所以我认为你必须做的是检查返回的值，即`$response` **在**发布后。如果未授予权限，则返回的数据如下所示：

```
{
   "error": {
      "type": "Exception",
      "message": "You do not have permission to post in this group."
   }
} 
```

因此，您可以检查是否`$response`有“错误”字段，并相应地通知用户。有点像这样：`if(isset($response['error']))`。

如果您还没有，请查看代表[组](https://developers.facebook.com/docs/reference/fql/group/ "https://developers.facebook.com/docs/reference/fql/group/")的 fql 表以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:18:29.507

您的意思是如何检查用户是否已授予在他们的墙上发帖的权限？

```
try {
    // Get the permissions this user has
    $call = $this->facebook->api("/me/permissions");

    // If they have the permission we require ('publish_stream')
    if($call['data'][0]['publish_actions']){
        try{
            // Do your magic here...
            // Also include your access token in the array
            $params = array('message'=> 'hello world');
            $call = $this->facebook->api('/me/feed','POST',$params);

        }catch(FacebookApiException $e) {
            $result = $e->getResult(); // prob no permissions
        }
    }
} catch(FacebookApiException $e) {
    $result = $e->getResult();
} 
```

所以基本上，首先检查用户是否具有特定操作的权限，然后如果他们这样做，`$call[data][0]['publish_action']`将设置为`1 (int)`.

示例输出`$call = $this->facebook->api("/me/permissions");`

```
[installed] => (int) 1
[email] => (int) 1
[publish_actions] => (int) 1 
```

我通过 facebook 从用户那里获得了上述权限。

# php - html形式的回显变量

> ID：10057222
> 
> 赞同：1
> 
> 时间：2012-04-07T18:37:12.930
> 
> 标签：php, html

我正在尝试根据从数据库查询返回的行数在表单中回显一个值。不断收到错误解析错误：语法错误，意外的 T_ECHO，期待 ',' 或 ';'

正如您可能会说的那样，我对此很陌生。谁能帮我回显变量？我知道 $num_rows 正在返回一个值，就像使用 var_dump 节目一样。谢谢

```
<?

if($num_rows <= 10) {

echo '</br></br><form id="h1" class="rounded" action="4.php" target="" 
method="post"/>
<input type="submit" name="submit"  class="button" value="10" /><br>
<input type="text" name="number_of_tests" value="'echo $num_rows;'"/>
</form>';
 }
if($num_rows >10) {
echo '</br></br><form id="h2" class="rounded" action="4.php"    
target="_blank" method="post"/>
<input type="submit" name="submit"  class="button" value="11"/><BR>
<input type="text" name="number_of_tests" value="'echo $num_rows;'"/>

</form>';
}?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:50:44.587

在您的两个代码块中，您重复命令 echo 而不是连接输出或使用两个语句。你已经这样做了：

```
echo '</br></br><form id="h1" class="rounded" action="4.php" target="" 
method="post"/>
<input type="submit" name="submit"  class="button" value="10" /><br>
<input type="text" name="number_of_tests" value="'echo $num_rows;'"/>
</form>'; 
```

这是一个语法错误。相反，您可以这样做：

```
echo '</br></br><form id="h1" class="rounded" action="4.php" target="" 
method="post"/>
<input type="submit" name="submit"  class="button" value="10" /><br>
<input type="text" name="number_of_tests" value="' . $num_rows . '"/>
</form>'; 
```

或这个：

```
echo '</br></br><form id="h1" class="rounded" action="4.php" target="" 
method="post"/>
<input type="submit" name="submit"  class="button" value="10" /><br>
<input type="text" name="number_of_tests" value="';
echo $num_rows . '"/>';
echo '</form>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:40:07.600

这是您应该用来连接字符串并输出结果的代码

```
echo ' some value ' . $variable . ' other text '; 
```

该`echo`函数输出一个字符串，而点 (.) 运算符连接字符串。这是一种**错误的代码**

```
echo 'value="'echo $num_rows;'"/>'; 
```

当你想插入一个变量的值时，这就是方法

```
$a_string = 'I\'m a string';
echo "I'm a double quoted string and can contain a variable: $a_string"; 
```

这也适用于数组

```
$an_array = array('one', 'two', 'three');
echo "The first element of the array is {$an_array[0]}" 
```

请参阅[PHP 手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)

# jakarta-ee - Java EE 简介

> ID：10057223
> 
> 赞同：-1
> 
> 时间：2012-04-07T18:37:30.527
> 
> 标签：jakarta-ee, glassfish-3, jboss7.x

我是 Java EE 的新手，我需要弄清楚一些事实。

我知道 GlassFish、JBoss 和 JSP/servlet 都是服务器。任何人都可以区分它们吗？它们都用于在 Java EE 中构建应用程序吗？

如果是，它们是否像构建它们的平台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:49:11.113

GlassFish 和 JBoss 是应用服务器——这意味着它们实现了用于实现企业级解决方案的 Java EE 规范——例如，消息传递、Web 服务、servlet、JTA 等。JBoss 是一个开源服务器并且非常受欢迎。GlassFish 服务器有一个社区版，最初来自 Sun（现在是 Oracle），主要用作 Java EE 的参考实现，尽管我听说有些公司在其生产环境中使用该服务器。

Tomcat 是 servlet 容器的一个示例 - 意味着它可以托管 JSP 和 servlet 以呈现动态内容。Tomcat 实现了 Servlet 规范，并且 EJB 不能本地托管在 Tomcat 中。有一种方法可以在 Tomcat 中使用 Apache OpenEJB 在 Tomcat 中托管 EJB。

Weblogic 和 Websphere 是另外两个流行的商业 Java EE 服务器。

这些服务器不用于构建应用程序，而是用于托管应用程序。希望这种区分有所帮助。有关更多信息，请参阅[Java EE 规范](http://www.oracle.com/technetwork/java/javaee/tech/index.html)。

# javascript - 如何通过 JavaScript 获取 html 表格 td 单元格值？

> ID：10057226
> 
> 赞同：12
> 
> 时间：2012-04-07T18:37:51.887
> 
> 标签：javascript, html-table, cell

我有一个使用动态数据创建的 HTML 表，无法预测其中的行数。我想要做的是在单击一行时获取单元格的值。我知道使用 td onclick 但我不知道如何访问 Javascript 函数中的单元格值。

单元格的值实际上是记录的索引，它隐藏在表格中。找到记录键后，我可以从数据库中检索整个记录。

如果我不知道我单击的表格的行索引和列索引，如何获取单元格值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T18:47:32.817

不要使用内联 JavaScript，将您的行为与数据分开，这样会更容易处理。我建议如下：

```
var table = document.getElementById('tableID'),
    cells = table.getElementsByTagName('td');

for (var i=0,len=cells.length; i<len; i++){
    cells[i].onclick = function(){
        console.log(this.innerHTML);
        /* if you know it's going to be numeric:
        console.log(parseInt(this.innerHTML),10);
        */
    }
} 
```

```
var table = document.getElementById('tableID'),
  cells = table.getElementsByTagName('td');

for (var i = 0, len = cells.length; i < len; i++) {
  cells[i].onclick = function() {
    console.log(this.innerHTML);
  };
}
```

```
th,
td {
  border: 1px solid #000;
  padding: 0.2em 0.3em 0.1em 0.3em;
}
```

```
<table id="tableID">
  <thead>
    <tr>
      <th>Column heading 1</th>
      <th>Column heading 2</th>
      <th>Column heading 3</th>
      <th>Column heading 4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>43</td>
      <td>23</td>
      <td>89</td>
      <td>5</td>
    </tr>
    <tr>
      <td>4</td>
      <td>3</td>
      <td>0</td>
      <td>98</td>
    </tr>
    <tr>
      <td>10</td>
      <td>32</td>
      <td>7</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/Zqk6r/401/)。

针对评论（[如下](https://stackoverflow.com/questions/10057226/how-to-get-html-table-td-cell-value-by-javascript/10057299?noredirect=1#comment48330120_10057299)）的修订方法：

> 你少了一个分号。另外，不要在循环中创建函数。

此修订版将（单个）命名函数绑定为`click`多个元素的事件处理程序`<td>`，并避免在循环中创建多个匿名函数的不必要开销（由于重复和内存使用对性能的影响，这是不好的做法） ):

```
function logText() {
  // 'this' is automatically passed to the named
  // function via the use of addEventListener()
  // (later):
  console.log(this.textContent);
}

// using a CSS Selector, with document.querySelectorAll()
// to get a NodeList of <td> elements within the #tableID element:
var cells = document.querySelectorAll('#tableID td');

// iterating over the array-like NodeList, using
// Array.prototype.forEach() and Function.prototype.call():
Array.prototype.forEach.call(cells, function(td) {
  // the first argument of the anonymous function (here: 'td')
  // is the element of the array over which we're iterating.

  // adding an event-handler (the function logText) to handle
  // the click events on the <td> elements:
  td.addEventListener('click', logText);
}); 
```

```
function logText() {
  console.log(this.textContent);
}

var cells = document.querySelectorAll('#tableID td');

Array.prototype.forEach.call(cells, function(td) {
  td.addEventListener('click', logText);
});
```

```
th,
td {
  border: 1px solid #000;
  padding: 0.2em 0.3em 0.1em 0.3em;
}
```

```
<table id="tableID">
  <thead>
    <tr>
      <th>Column heading 1</th>
      <th>Column heading 2</th>
      <th>Column heading 3</th>
      <th>Column heading 4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>43</td>
      <td>23</td>
      <td>89</td>
      <td>5</td>
    </tr>
    <tr>
      <td>4</td>
      <td>3</td>
      <td>0</td>
      <td>98</td>
    </tr>
    <tr>
      <td>10</td>
      <td>32</td>
      <td>7</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/Zqk6r/402/)。

参考：

*   [`Array.prototype.forEach()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach).
*   [`document.getElementById()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById).
*   [`document.getElementsByTagName()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByTagName).
*   [`document.querySelectorAll()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll).
*   [`EventTarget.addEventListener()`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener).
*   [`Function.prototype.call()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T20:37:55.477

这是我的解决方案

```
var cells = Array.prototype.slice.call(document.getElementById("tableI").getElementsByTagName("td"));
for(var i in cells){
    console.log("My contents is \"" + cells[i].innerHTML + "\"");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T18:42:56.503

您可以使用：

```
<td onclick='javascript:someFunc(this);'></td> 
```

通过传递**它**，您可以通过函数参数访问 DOM 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:58:00.883

.....................

```
 <head>

    <title>Search students by courses/professors</title>

    <script type="text/javascript">

    function ChangeColor(tableRow, highLight)
    {
       if (highLight){
           tableRow.style.backgroundColor = '00CCCC';
       }

    else{
         tableRow.style.backgroundColor = 'white';
        }   
  }

  function DoNav(theUrl)
  {
  document.location.href = theUrl;
  }
  </script>

</head>
<body>

     <table id = "c" width="180" border="1" cellpadding="0" cellspacing="0">

            <% for (Course cs : courses){ %>

            <tr onmouseover="ChangeColor(this, true);" 
                onmouseout="ChangeColor(this, false);" 
                onclick="DoNav('http://localhost:8080/Mydata/ComplexSearch/FoundS.jsp?courseId=<%=cs.getCourseId()%>');">

                 <td name = "title" align = "center"><%= cs.getTitle() %></td>

            </tr>
           <%}%>

........................
</body> 
```

我用 JSP 编写了 HTML 表格。 **当然**是一种类型。例如 Course cs, cs= 类型为 Course 的对象，它有 2 个属性：id、title。 **courses**是 Course 对象的 ArrayList。

HTML 表格显示每个单元格中的所有课程标题。所以该表只有 1 列： Course1 Course2 Course3 ......暂且不说：

```
 onclick="DoNav('http://localhost:8080/Mydata/ComplexSearch/FoundS.jsp?courseId=<%=cs.getCourseId()%>');" 
```

这意味着在用户选择一个表格单元格后，例如“Course2”，课程的标题“Course2”将转到 URL 指向用户的页面：`http://localhost:8080/Mydata/ComplexSearch/FoundS.jsp` 。“Course2”将到达 FoundS.jsp 页面。“Course2”的标识符是 courseId。要声明将保留 CourseX 的变量 courseId，请输入“？” 在 URL 之后，在它旁边是标识符。有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T18:55:46.200

我给桌子一个ID，这样我就可以找到它。在 onload（当页面被浏览器加载时），我将 onclick 事件处理程序设置为表的所有行。这些处理程序会提醒第一个单元格的内容。

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            var p = {
                onload: function() {
                    var rows = document.getElementById("mytable").rows;
                    for(var i = 0, ceiling = rows.length; i < ceiling; i++) {
                        rows[i].onclick = function() {
                            alert(this.cells[0].innerHTML);
                        }
                    }
                }
            };
        </script>
    </head>
    <body onload="p.onload()">
        <table id="mytable">
            <tr>
                <td>0</td>
                <td>row 1 cell 2</td>
            </tr>
            <tr>
                <td>1</td>
                <td>row 2 cell 2</td>
            </tr>
        </table>    
    </body>
</html> 
```

# powershell - Powershell：使用 try 和 catch 进行错误处理

> ID：10057227
> 
> 赞同：3
> 
> 时间：2012-04-07T18:37:56.560
> 
> 标签：powershell, error-handling, try-catch

我正在编写一个脚本并想控制错误。但是，我无法使用 try,catch 查找有关错误处理的信息。我想捕获特定错误（如下所示），然后执行一些操作并恢复代码。这需要什么代码？

这是我正在运行的代码，我在提示时输入了无效的用户名。

```
Get-WMIObject Win32_Service -ComputerName localhost -Credential (Get-Credential)

Get-WmiObject : User credentials cannot be used for local connections 
At C:\Users\alex.kelly\AppData\Local\Temp\a3f819b4-4321-4743-acb5-0183dff88462.ps1:2 char:16
+         Get-WMIObject <<<<  Win32_Service -ComputerName localhost -Credential (Get-Credential)
    + CategoryInfo          : InvalidOperation: (:) [Get-WmiObject], ManagementException
    + FullyQualifiedErrorId : GetWMIManagementException,Microsoft.PowerShell.Commands.GetWmiObjectCommand 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T23:25:27.397

谁能弄清楚为什么我在尝试捕获 [System.Management.ManagementException] 类型的异常时无法捕获此异常？

PowerShell 应该能够捕获与某些异常类匹配的异常，但即使下面的异常类是 [System.Management.ManagementException]，它也不会在那个 catch 块中捕获它！

IE：

```
Try
{
    Get-WMIObject Win32_Service -ComputerName localhost -Credential (Get-Credential) -ErrorAction "Stop"
}
Catch [System.Management.ManagementException]
{
    Write-Host "System.Management.ManagementException"
    Write-Host $_
    $_ | Select *
}
Catch [Exception]
{
    Write-Host "Generic Exception"
    Write-Host $_
    $_ | Select *
} 
```

工作方式相同：

```
Try
{
    Get-WMIObject Win32_Service -ComputerName localhost -Credential (Get-Credential) -ErrorAction "Stop"
}
Catch [Exception]
{
    Write-Host "Generic Exception"
    Write-Host $_
    $_ | Select *
} 
```

对我来说没有意义。

您还可以在 Generic Exception catch 块中捕获错误，然后检查文本以查看它是否与您之后的单词匹配，但它有点脏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:54:27.330

您必须使用`-erroraction stop`进入`the try/catch`或`trap`脚本块。你可以测试一下：

```
Clear-Host
$blGoOn = $true

while ($blGoOn)
{
  trap
  {
    Write-Host $_.exception.message
    continue
  }
  Get-WMIObject Win32_Service -ComputerName $computer -Credential (Get-Credential) -ErrorAction Stop
  if ($?)
  {
    $blGoOn=$false
  }
} 
```

# android - ExpandableListView - 安卓

> ID：10057231
> 
> 赞同：1
> 
> 时间：2012-04-07T18:38:13.043
> 
> 标签：android, expandablelistview

我对 android 中的 expandableListView 有疑问

我只想在用户单击指示器而不是在任何其他位置时展开 ExpandableListView 并通过单击子视图中的按钮来删除展开

我想知道是否可以将列表扩展为向上而不是向下（这意味着孩子出现在父母之上）

# python - OpenCV：完成后如何重新启动视频？

> ID：10057234
> 
> 赞同：4
> 
> 时间：2012-04-07T18:38:23.353
> 
> 标签：python, c++, c, opencv

我正在播放一个视频文件，但播放完后如何再次播放？

哈维尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-11T18:24:23.967

如果您想一遍又一遍地重新启动视频（也就是循环播放），您可以使用 if 语句来判断帧数何时达到`cap.get(cv2.cv.CV_CAP_PROP_FRAME_COUNT)`，然后将帧数重置`cap.set(cv2.cv.CV_CAP_PROP_POS_FRAMES, num)`为相同的值。我将 OpenCV 2.4.9 与 Python 2.7.9 一起使用，下面的示例不断为我循环播放视频。

```
import cv2

cap = cv2.VideoCapture('path/to/video') 
frame_counter = 0
while(True):
    # Capture frame-by-frame
    ret, frame = cap.read()
    frame_counter += 1
    #If the last frame is reached, reset the capture and the frame_counter
    if frame_counter == cap.get(cv2.cv.CV_CAP_PROP_FRAME_COUNT):
        frame_counter = 0 #Or whatever as long as it is the same as next line
        cap.set(cv2.cv.CV_CAP_PROP_POS_FRAMES, 0)
    # Our operations on the frame come here
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    # Display the resulting frame
    cv2.imshow('frame',gray)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break
# When everything done, release the capture
cap.release()
cv2.destroyAllWindows() 
```

它还可以重新捕获视频而不是重置帧数：

```
if frame_counter == cap.get(cv2.cv.CV_CAP_PROP_FRAME_COUNT):
    frame_counter = 0
    cap = cv2.VideoCapture(video_name) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T15:55:02.393

您无需重新打开当前捕获。您需要做的就是将位置重置到文件的开头并继续循环而不是中断它。

```
if (!frame) 
{
    printf("!!! cvQueryFrame failed: no frame\n");
    cvSetCaptureProperty(capture, CV_CAP_PROP_POS_AVI_RATIO , 0);
    continue;
} 
```

然而，有一个明显的延迟，就好像你重新打开它一样......

见 [http://docs.opencv.org/2.4.6/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=cvqueryframe#videocapture-set](http://docs.opencv.org/2.4.6/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=cvqueryframe#videocapture-set)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-22T12:19:00.250

最简单的方法-：

```
cap = cv2.VideoCapture("path")
while True:
  ret, image = cap.read()
  if ret == False:
         cap = cv2.VideoCapture("path")
          ret, image = cap.read() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T18:47:54.530

关闭当前捕获并再次打开它：

```
// play video in a loop
while (1)
{
    CvCapture *capture = cvCaptureFromAVI("video.avi");
    if(!capture) 
    {
        printf("!!! cvCaptureFromAVI failed (file not found?)\n");
        return -1; 
    }

    IplImage* frame = NULL;
    char key = 0;   
    while (key != 'q') 
    {
        frame = cvQueryFrame(capture);       
        if (!frame) 
        {
            printf("!!! cvQueryFrame failed: no frame\n");
            break;
        }     

        cvShowImage("window", frame);

        key = cvWaitKey(10);  
    }

    cvReleaseImage(&frame);
    cvReleaseCapture(&capture);
} 
```

此代码不完整，尚未经过测试。它仅用于说明目的。

# regex - 正则表达式匹配任何包含西里尔符号的字符串，除了用 //、///、/// 等标记的注释

> ID：10057235
> 
> 赞同：2
> 
> 时间：2012-04-07T18:38:34.953
> 
> 标签：regex

我想找到所有包含至少 1 个西里尔字符的字符串（基本上是 /.*[А-я].*/），但注释除外。

注释是以 2 个或更多 / 字符开头的字符串或字符串的一部分。目前我得到了这个正则表达式，它起到了一些作用：

```
^(?=^.*?[А-я]+).*?((?=[\/]{2,})|(^(?:(?![\/]{2,}).)*$)) 
```

但我想得到更少的臃肿和更快的表达。

另外一个问题是：谁能解释为什么这个工作有效？我通过反复试验将它结合起来，但我不确定我是否完全理解它是如何工作的，因为当我尝试在任何部分更改它时 - 它会停止工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:08:47.727

以下正则表达式将匹配任何前面没有双斜杠的西里尔字符

```
(?<!/{2}.*)[А-я] 
```

它通过使用否定的lookbehind 指定它不应在其前面加上双斜杠。

您尚未指定您使用的正则表达式的风格，但请注意某些风格不支持环视。例如 PCRE (javascript) 没有。你在你的正则表达式中使用了其中的 3 个，所以我认为它没问题。

# java - 这是 Guice 反模式吗？

> ID：10057239
> 
> 赞同：0
> 
> 时间：2012-04-07T18:39:01.360
> 
> 标签：java, dependency-injection, guice

```
public class Widget {
    @Inject
    Fizz fizz;

    public Widget(Fizz fizz) {
        super();

        setFizz(fizz);
    }

    public void setFizz(Fizz fizz) {
        this.fizz = fizz;
    }
} 
```

**这是 Guice 反模式吗？！？！**

如果我说“`fizz`将被注入（通过`@Inject`）”，但是我允许构造函数和设置器接受嘶嘶声，这是不必要的冗余吗？会不会和Guice的喷油器发生冲突？

我想我很困惑：

*   当你应该用`@Inject`, vs注释属性时
*   当您应该通过构造函数/getter 自己“注入”属性时

有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T18:42:40.533

为什么不使用这样的东西（即使用构造函数注入）？

```
public class Widget {
    private Fizz fizz;

    @Inject
    public Widget(Fizz fizz) {
        super();

        this.fizz = fizz;
    }

} 
```

另请参阅[http://code.google.com/p/google-guice/wiki/Injections](http://code.google.com/p/google-guice/wiki/Injections)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T16:37:15.857

您应该对**REQUIRED**的依赖项使用**构造函数注入**。当依赖项是**OPTIONAL**时使用**属性注入**。

 ******* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T14:36:21.113

我肯定会说这是一个问题，不是因为 Guice 做不到，而是因为您的代码有错误。Guice 将尝试调用默认的无参数构造函数（它不存在）并失败。

但即使您添加了无参数构造函数，这仍然是一种反模式。我使用 DI 框架已经有一段时间了，从来没有遇到过需要进行字段注入的情况。我确信它有一个用例，否则 Guice 的人不会包含它，但是如果没有特殊代码（字节码操作或反射），它会使您的代码无法测试。

由于多种原因，构造函数注入通常是最好的。它使任何调用者都清楚您的依赖项是什么，它允许您同时初始化所有类的不变量（避免部分初始化的类），并且它是唯一允许您创建不可变对象的 DI 风格，它们是线程安全并降低程序复杂性。

我唯一的方法注入用例是当我不想要求子类来声明父类的依赖项时，或者当我想要一个“可选”依赖项时，但这些很少见。******

# iphone - 在不使用 Return 键的情况下关闭 UITextView 的键盘

> ID：10057242
> 
> 赞同：3
> 
> 时间：2012-04-07T18:39:32.353
> 
> 标签：iphone, textview, resignfirstresponder

我正在使用 UITextView 并希望保持 Return 键的正常使用，即插入新行。但是当我不能使用 Return 键时，我该如何关闭键盘呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T19:01:43.583

`Done`很多人在键盘上方添加了一个带有按钮的 UIToolbar 。这也是 Safari 应用程序的做法，我认为这是处理这种情况的最佳方式。在这里看一张[照片](http://www.nwmobiledev.com/wp-content/uploads/2012/01/Screenshot_22.png)。

要关闭键盘，您只需要做`[textField resignFirstResponder];.`

[这](http://www.randomsequence.com/articles/adding-a-toolbar-with-next-previous-above-uitextfield-keyboard-iphone/)是一个在键盘显示/隐藏时如何添加 UIToolbar 的好示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:51:05.933

用户如何触发它是一个设计决策：另一个按钮、滑动手势？

当它被触发时，调用：

```
[self.textView resignFirstResponder]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:11:27.743

您可以只使用背景点击来隐藏键盘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:53:47.113

关闭键盘的好方法。

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{
    //NSLog(@"ShouldBeginEditing");

    if(textView == indexOneTW)
    {
          here use uibutton and set its target to a method which contains 
          [urTextView resignFirstResponder] 
    }

    return TRUE;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T07:07:02.940

确保声明对 UITextViewDelegate 协议的支持。

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:     (NSString *)text

{

    if([text isEqualToString:@"\n"]) 
    {
        [textView resignFirstResponder];

        return NO;
    }

    return YES;

} 
```

使用此代码享受 Buddy....

# android - 实现 Android 应用程序通过 TCP 服务器与计算机交换恒定数据流的最佳方法

> ID：10057249
> 
> 赞同：0
> 
> 时间：2012-04-07T18:40:11.077
> 
> 标签：android, multithreading, tcp

我正在开发一个应用程序，它将实时接收和显示遥测数据，我想知道通过 TCPServer 实现交换的最佳方式是什么？我应该使用多线程来打开和关闭每个新数据的套接字还是让连接保持打开状态直到程序终止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:43:08.460

如果您通过高延迟无线电链路不断打开和关闭套接字，您的性能将非常差。在这种应用程序中打开和关闭 TCP 套接字的唯一（蹩脚）借口是它提供了一种“消息协议”。不幸的是，它经常被用于这个目的:((

# ios - 获取 NSString 中字符的位置

> ID：10057254
> 
> 赞同：2
> 
> 时间：2012-04-07T18:41:22.433
> 
> 标签：ios, nsstring

我正在尝试使用 rangeOfString 方法获取字符在 NSString 中的位置。例如，如果我有单词“BEER”，我希望得到字母 E 在字符串中的位置，所以我应该得到位置 1 和 2 rangeOfString 只给了我第一次出现的字母

```
NSRange range = [word rangeOfString:letter];

NSLog(@"Word is %@ Range is %d" , word, range.location); 
```

所以我只得到位置1

我可以使用另一种方法还是必须为此使用 NSScanner？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:24:57.777

根据文档，这是它的工作方式：`rangeOfString`仅返回您传入的字符串的第一次出现。

您可以在`[rangeOfString:options:range:][1]`每次为`range`参数指定适当的值时使用和迭代它提供的结果，也可以使用`NSRegularExpression`该类。

您可以在此处获取第一种方法的示例代码，在[此处](http://remarkablepixels.com/blog/2011/1/13/regular-expressions-on-ios-nsregularexpression.html)[获取](https://stackoverflow.com/questions/5425812/iphone-rangeofstring)第二种方法的示例代码。

# android - Android Rom 是否使用自定义内核配置？

> ID：10057255
> 
> 赞同：2
> 
> 时间：2012-04-07T18:41:33.267
> 
> 标签：android, linux-kernel, rom

所以只是想知道。所有的 Android Rom 都是为每台设备定制的吗？我的意思是，它是不是像 Gentoo 一样的配置，你用你需要的所有东西来编译 linux 内核，而不是使用通用的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T02:05:32.313

确实，这就是目前的情况。嵌入式设备非常具体，以至于它们中的每一个都带有自己的板配置文件（在 arch/arm/mach-xxx 中），其中其设备布局是硬编码的。设备树努力试图解决这个问题，但我们距离 x86 的情况还很远，即一个内核可以引导所有机器。

拥有定制内核的另一个动机是减少其内存占用并避免将数百个未使用的内核模块放在有限的存储空间上。

# django - 如何为基于 ListView 的类编写 get 方法

> ID：10057257
> 
> 赞同：1
> 
> 时间：2012-04-07T18:41:51.893
> 
> 标签：django, django-views

我尝试基于 ListView 为我的类编写 get 方法，我想从模板中的表单获取请求，并从请求中返回带有过滤器的模型。这是我的代码的一部分：

```
class SearchListView(ListView):
    context_object_name = 'projects_list'
    template_name = 'projects/search.html'
    paginate_by = 10

    def get(self, request, *args, **kwargs):
        do smth??
        return self.render_to_response(??) 
```

我的表格：

```
<form class="well form-search" action="/search/" method="get">
    <input type="text" class="input-medium search-query" name="q">
    <button type="submit" class="btn">Search</button>
</form> 
```

请给我举个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T18:50:10.920

无需重写`get`方法。

```
class SearchListView(ListView):
    context_object_name = 'projects_list'
    template_name = 'projects/search.html'
    paginate_by = 10

    def get_queryset(self):
        query = self.request.GET.get('q')
        return Model.objects.filter(title=q) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-18T16:17:56.363

您可以像这样使用 super() ：

```
class SearchListView(ListView):
    ...

    def get(self, request, *args, **kwargs):
        do smth??
        return super(SearchListView, self).get(request, *args, **kwargs) 
```

# c++ - "\x" 如何在字符串中工作？

> ID：10057258
> 
> 赞同：10
> 
> 时间：2012-04-07T18:41:57.767
> 
> 标签：c++, c, hex

我正在编写一个 C/C++ 程序，该程序涉及将数字的十六进制表示形式放入字符串中，我对如何`\x`工作感到困惑。我见过人们写诸如“\xb2”之类的东西的例子。在这种情况下，程序如何知道您想要 b 的十六进制后跟数字 2 还是想要 b2 的十六进制？此外，当它将它存储到内存中时，它是保存“\x”字符还是只保存十六进制表示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T18:43:43.857

从 C99 标准（6.4.4.4）：

> 每个八进制或十六进制转义序列都是可以构成转义序列的最长字符序列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T18:51:27.543

例如，字符串`"123\x45"`以十六进制存储为`31 32 33 45`.

根据 Oli 的回答，使用 '\x' 之后的最长有效值。

'\x' 未存储。任何转义序列都不会存储您在屏幕上看到的字符，它会存储指定的实际字符。例如，'\n' 实际上存储为换行符 0x0A。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T18:51:38.487

当您在字符串中使用转义序列 \x 时，\x 后面的数据实际上存储在它的二进制表示中。

所以字符串“ABC”等价于字符串“\x414243”

如果要以显示字符形式发出十六进制值，则需要使用 %x 或 %X 格式说明符字符：

```
printf("%X%X%X", 'A', 'B', 'C');    // emits "414243" 
```

请参阅C 库参考指南的第[1.2.6](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/1.2.html#const)节和第[1.2.7节](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/1.2.html#strings)

希望解释有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T18:57:31.497

翻译是在编译时完成的，因此您手动输入到源代码中的每个字符串`\x`最终都是它在二进制文件中表示的字符。如果要在运行时执行此操作，则需要调用解析函数，例如`strtol()`使用 base 16 传递包含十六进制的字符串并将其转换为字符。

# c# - 用户单击后禁用按钮（在数据列表中）

> ID：10057259
> 
> 赞同：3
> 
> 时间：2012-04-07T18:41:59.220
> 
> 标签：c#, javascript, asp.net

我想禁用数据列表行中包含的按钮。用户单击一次按钮后是否可以禁用该按钮？如果是这样，有人可以建议我如何实现这一目标。

```
<asp:DataList ID="DataList1" runat="server" DataKeyField="Qno" OnItemCommand="DataList1_OnItemCommand"
        DataSourceID="SqlDataSource1">
        <ItemTemplate> <asp:RadioButton ID="RadioButton1" runat="server" Text='<%# Eval("Ans1") %>' GroupName="qu" />
            <br />
            <asp:RadioButton ID="RadioButton2" runat="server" Text='<%# Eval("Ans2") %>' GroupName="qu" /> <asp:Button ID="Button2" runat="server" Text="Submit" CommandName="Validate" />
            <br />
        </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:46:29.680

我与 ASP 无关，但如果你想要 javascript (jQuery) 解决方案，那么你可以做类似的事情

```
$(.once-clickable-button).click(function(){ 
  $(this).attr("disabled", "disabled");
  // if needed - do what it is supposed to do
}); 
```

（当然添加类“once-clickable-button”到按钮或选择适合您的名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:47:14.650

```
<script type="text/javascript">
   function checkEnableSubmit() {
     document.getElementById("Button2").disabled = true;
   }
</script> 
```

当您想禁用按钮时，在 onclick 事件上调用此方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T18:50:12.130

使用 javascript，您可以执行以下操作：

```
document.getElementById("buttonID").disabled = true 
```

# php - CakePHP 2.1 的初学者教程？

> ID：10057260
> 
> 赞同：4
> 
> 时间：2012-04-07T18:42:10.780
> 
> 标签：php, mysql, cakephp, frameworks, cakephp-2.1

我只是想知道除了他们网站上的那些（cakephp 书/博客教程）之外，是否有人知道 CakePHP 2.1 的任何好的初学者教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:18:26.367

为你：D

[http://devmoose.com/coding/10-awesome-cakephp-tutorials](http://devmoose.com/coding/10-awesome-cakephp-tutorials)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T21:03:26.553

我见过的最流行的教程是博客教程。它与您指定的版本相关。

[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html)

这很容易理解和遵循。

# pdf - 如何使用itextsharp将一个pdf附加到另一个pdf文件

> ID：10057281
> 
> 赞同：0
> 
> 时间：2012-04-07T18:45:26.727
> 
> 标签：pdf, append

如何在不使用 itextsharp 创建新 pdf 的情况下将页面从另一个 pdf 文件附加到一个 pdf 文件。我将元数据附加到一个 pdf，所以我只想添加其他 pdf 页面，这样第一个 pdf 元数据应该保持原样。

问候 Himvj

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T18:59:57.047

假设您有 2 个 pdf 文件：`file1.pdf`并且`file2.pdf`您希望将生成的 pdf 连接并保存到`file1.pdf`（通过替换其内容），您可以尝试以下操作：

```
using (var output = new MemoryStream())
{
    var document = new Document();
    var writer = new PdfCopy(document, output);
    document.Open();
    foreach (var file in new[] { "file1.pdf", "file2.pdf" })
    {
        var reader = new PdfReader(file);
        int n = reader.NumberOfPages;
        PdfImportedPage page;
        for (int p = 1; p <= n; p++)
        {
            page = writer.GetImportedPage(reader, p);
            writer.AddPage(page);
        }
    }
    document.Close();
    File.WriteAllBytes("file1.pdf", output.ToArray());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:42:21.647

你可以试试这个它添加带有元数据的整个文档

```
public static void MergeFiles(string destinationFile, string[] sourceFiles)
            {
                try
                {

                    //1:  Create the MemoryStream for the destination document.
                    using (MemoryStream ms = new MemoryStream())
                    {
                        //2:  Create the PdfCopyFields object.
                        PdfCopyFields copy = new PdfCopyFields(ms);
                        // - Set the security and other settings for the destination file.
                        //copy.Writer.SetEncryption(PdfWriter.STRENGTH128BITS, null, "1234", PdfWriter.AllowPrinting | PdfWriter.AllowCopy | PdfWriter.AllowFillIn);
                        copy.Writer.ViewerPreferences = PdfWriter.PageModeUseOutlines;
                        // - Create an arraylist to hold bookmarks for later use.
                        ArrayList outlines = new ArrayList();
                        int pageOffset = 0;
                        int f = 0;
                        //3:  Import the documents specified in args[1], args[2], etc...
                        while (f < sourceFiles.Length)
                        {
                            //  Grab the file from args[] and open it with PdfReader.
                            string file = sourceFiles[f];
                            PdfReader reader = new PdfReader(file);

                            //  Import the pages from the current file.
                            copy.AddDocument(reader);
                            //  Create an ArrayList of bookmarks in the file being imported.
                            //      ArrayList bookmarkLst = SimpleBookmark.GetBookmark(reader);
                            //  Shift the pages to accomidate any pages that were imported before the current document.
                            //     SimpleBookmark.ShiftPageNumbers(bookmarkLst, pageOffset, null);
                            //  Fill the outlines ArrayList with each bookmark as a HashTable.
                            //      foreach (Hashtable ht in bookmarkLst)
                            //      {
                            //         outlines.Add(ht);
                            //     }
                            //  Set the page offset to the last page imported.
                            //copy.Writer.SetPageSize(rec);
                            pageOffset += reader.NumberOfPages;
                            f++;
                        }
                        //4:  Put the outlines from all documents under a new "Root" outline and 
                        //    set them for destination document 
                        //   copy.Writer.Outlines = GetBookmarks("Root", ((Hashtable)outlines[0])["Page"], outlines);
                        //5:  Close the PdfCopyFields object.
                        copy.Close();
                        //6:  Save the MemoryStream to a file.
                        MemoryStreamToFile(ms, destinationFile);

                    }
                }
                catch (System.Exception e)
                {
                    System.Console.Error.WriteLine(e.Message);
                    System.Console.Error.WriteLine(e.StackTrace);
                    System.Console.ReadLine();
                }
            }
            public static void MemoryStreamToFile(MemoryStream MS, string FileName)
            {
                using (FileStream fs = new FileStream(@FileName, FileMode.Create))
                {
                    byte[] data = MS.ToArray();
                    fs.Write(data, 0, data.Length);
                    fs.Close();
                }
            } 
```

# perl - 从我的脚本下载文件时，前 8 个字节总是错误的

> ID：10057285
> 
> 赞同：4
> 
> 时间：2012-04-07T18:45:40.140
> 
> 标签：perl, mojolicious

我有一个 Mojolicious Lite 脚本，它“发出”一个可执行文件（用户可以从脚本的 URL 下载文件）。我将编码数据保存在 DATA 部分的内联模板中，然后对其进行编码和 render_data。

```
get '/download' => sub {
    my $self = shift;

    my $hex_data = $self->render_partial( 'TestEXE' );
    my $bin_data;
    while( $hex_data =~ /([^\n]+)\n?/g ) {
        $bin_data .= pack "H".(length $1), $1;
    }

    my $headers = Mojo::Headers->new; 
    $headers->add( 'Content-Type', 'application/x-download;name=Test.exe' );
    $headers->add( 'Content-Disposition', 'attachment;filename=Test.exe' );
    $headers->add( 'Content-Description', 'File Transfer');

    $self->res->content->headers($headers);
    $self->render_data( $bin_data ); 
};

__DATA__

@@ TestEXE.html.ep
4d5a90000300000004000000ffff0000b8000000000000004000000000000000
00000000000000000000000000000000000000000000000000000000b0000000
0e1fba0e00b409cd21b8014ccd21546836362070726f6772616d2063616e6e6f
.... 
```

[当我在本地运行它时（通过http://127.0.0.1:3000/](http://127.0.0.1:3000/)上的内置网络服务器，Win7），我得到了正确的文件（大小和内容）。但是当我在共享主机 (Linux) 上以 CGI 模式运行它时，它会以正确的大小返回，但文件的前 8 个字节总是不正确的（并且总是不同的）。文件的其余部分是正确的。

如果在我的潜艇中我指定`$hex_data`而不是`$bin_data`我得到假设存在的东西。

我迷路了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T20:02:00.210

*render_partial*不是你想要的。

首先，[将可执行文件重新编码为 base64 格式](https://superuser.com/a/133253/34808)，并指定模板为 base64 编码（假设您的应用不需要十六进制）：

```
@@ template-name (base64) 
```

此外，您实际上根本不需要控制器方法。Mojolicious 将为您处理该过程 - 您所要做的就是适当地命名模板。

```
use Mojolicious::Lite;

app->start;

__DATA__

@@ Test.exe (base64)
... 
```

[然后http://127.0.0.1:3000/Test.exe](http://127.0.0.1:3000/Test.exe)将下载该文件。

-

如果您仍想对特定于应用程序的问题使用控制器方法，请专门获取数据模板：

```
use Mojolicious::Lite;

get '/download' => sub {
    my $self = shift;

    # http://mojolicio.us/perldoc/Mojolicious/Renderer.pm#get_data_template
    my $data = $self->app->renderer->get_data_template({}, 'Test.exe');

    # Replace content-disposition instead of adding it, 
    # to prevent duplication from elsewhere in the app
    $self->res->headers->header(
        'Content-Disposition', 'attachment;filename=name.exe');

    $self->render_data($data);
};

app->start;

__DATA__

@@ Test.exe (base64)
... 
```

[http://127.0.0.1:3000/download](http://127.0.0.1:3000/download)将获取模板，设置标题，然后将其下载为name.exe。

# android - Android + sqlite 插入速度提升？

> ID：10057287
> 
> 赞同：0
> 
> 时间：2012-04-07T18:45:45.787
> 
> 标签：android, database, sqlite, saxparser, sqliteopenhelper

我最近继承了一个项目，其中一个 sqlite db 存储在用户 sdcard 上（只有表和列，没有内容）。对于初始安装（和后续数据更新），通过 saxParser 解析 XML 文件，将其内容存储到 db 列，如下所示：

**萨克斯解析器：**

```
 @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
            currentElement = false;

            if (localName.equals("StoreID")) {
                buffer.toString().trim();
                storeDetails.setStoreId(buffer.toString());
            } else if (localName.equals("StoreName")) {
                buffer.toString().trim();
                storeDetails.setStoreName(buffer.toString());
            ...

            } else if (localName.equals("StoreDescription")) {
              buffer.toString().trim();
              storeDetails.setStoreDescription(buffer.toString());
              // when the final column is checked, call custom db helper method
              dBHelper.addtoStoreDetail(storeDetails);
            }

            buffer = new StringBuffer();
    }           

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        if (currentElement) {
            buffer.append(ch, start, length);
        }
    } 
```

**数据库助手：**

```
 // add to StoreDetails table
    public void addtoStoreDetail(StoreDetails storeDetails) {
        SQLiteDatabase database = null;
        InsertHelper ih = null;
        try {
            database = getWritableDatabase();
            ih = new InsertHelper(database, "StoreDetails");

            // Get the numeric indexes for each of the columns that we're updating
            final int idColumn = ih.getColumnIndex("_id");
            final int nameColumn = ih.getColumnIndex("StoreName");
            ...
            final int descColumn = ih.getColumnIndex("StoreDescription");

            // Add the data for each column
            ih.bind(idColumn, storeDetails.getStoreId());
            ih.bind(nameColumn, storeDetails.getStoreName());
            ...
            ih.bind(descColumn, storeDetails.getStoreDescription());

            // Insert the row into the database.
            ih.execute();
        } finally {
            ih.close();
            safeCloseDataBase(database);
        }
    } 
```

加载的 xml 文档有 6000 多行。在设备上进行测试时，它会在大约中途（无错误）后停止插入，大约需要 4-5 分钟。然而，在模拟器上，它运行得相当快，在大约 20 秒内将所有行写入数据库。我有在打开数据库、添加数据然后关闭时运行的日志语句。在设备上运行时，LogCat 输出明显变慢。我在这里缺少什么吗？为什么我的数据需要这么长时间才能写入？我认为改进的 InsertHelper 会有所帮助，但不幸的是甚至没有更快。有人可以在这里指出我的缺陷吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:53:35.867

我还指望显着`InsertHelper`提高速度，但是当我测试它时差异并没有那么大。

的优势仍然`InsertHelper`在于多次插入，因为它只编译一次查询。你这样做的方式是`InsertHelper`为每个插入声明新的，这绕过了一次性编译改进。尝试对多个插入使用相同的实例。

但是，我认为在慢速设备上，6000 多个插入不会在一分钟内完成。

**编辑**还要确保只获取一次列索引，这将加快速度。将这些放置在批量插入的循环之外。

```
 // Get the numeric indexes for each of the columns that we're updating
 final int idColumn = ih.getColumnIndex("_id");
 final int nameColumn = ih.getColumnIndex("StoreName");
 final int descColumn = ih.getColumnIndex("StoreDescription"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:50:54.893

当您进行这样的批量插入时，您最好在数据库助手中为它设置一个特殊操作。现在，每次插入一行时，您都在打开和关闭与 SQLite DB 的连接，这会大大降低您的速度。对于批处理，进行设置，以便您可以维护整个导入作业的连接。我认为它在模拟器中更快的原因是，在运行时，模拟器完全存在于内存中 - 所以虽然它故意降低你的 CPU 速度，但文件 IO 的速度要快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T20:20:09.163

除了只连接一次数据库之外，是否可以将数据库连接设置为在每次插入后不提交更改，而在批处理结束时只提交一次？我试图浏览 Android 开发文档，但找不到如何执行此操作的确切说明（或者它已经设置好了）。在其他平台上，将 SQLite 驱动程序的 AutoCommit 设置为 false 并仅在批处理结束时提交可以显着提高插入速度。

# random - AppleScript 返回随机浮点数

> ID：10057289
> 
> 赞同：0
> 
> 时间：2012-04-07T18:45:51.413
> 
> 标签：random, numbers, click, applescript

我正在尝试在 AppleScript 中创建代码，该代码将每 1-2 秒随机单击一次鼠标......我想要一个我正在玩的视频游戏不知道或能够告诉机器人正在为我点击，所以我需要它是随机的……不是每秒或每 2 秒，而是每 x 秒，其中 x 是一个在 1 到 2 秒之间不断变化的变量……这是到目前为止的代码，但它每 1 秒点击一次：

```
on idle
    tell application "System Events"
        key code 87
    end tell
    return 1
end idle 
```

我认为改变`return 1`to`return random number 1 to 2`会起作用

像这样的东西：

```
on idle
    tell application "System Events"
        key code 87
    end tell
    set randomDelay to random number from 1 to 2
    return randomDelay
end idle 
```

但它没有工作/：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:08:06.240

把它变成

```
random number from 1.0 to 2.0 
```

如果您将整数作为随机数的界限，它只会选择随机整数。通过给出浮点字面量，AppleScript 切换到给出范围内的随机浮点数。从 StandardAdditions 中的文档来看`random number`，限制似乎都是包容性的，这对于浮点数来说很奇怪，但在您的情况下不是问题。

# c# - 如何在 Windows 窗体中制作虚线边框样式？

> ID：10057295
> 
> 赞同：3
> 
> 时间：2012-04-07T18:46:45.620
> 
> 标签：c#, winforms

我正在尝试使用 Windows 窗体更改窗体的边框样式。问题是我被卡住了，不知道该去哪里。至于现在`FormBorderStyle`设置为`none`. 我得到的提示是我必须使用`Pen.DashStyle`. 这是我需要的截图。

![截屏](../Images/c20b5d5361fd21e9279f0158f7d5a21a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:59:29.700

您将希望查看[`Paint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)您的事件`Form`和[`Graphics.DrawRectangle`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawrectangle.aspx)PaintEventArgs 的方法。

# django - 对于多页注册表单（使用 Django），我应该有哪些 URL 模式？

> ID：10057296
> 
> 赞同：0
> 
> 时间：2012-04-07T18:46:56.727
> 
> 标签：django, django-forms, django-urls

第一次发帖，请原谅任何菜鸟——我正在尝试创建一个多页产品注册表单。我可以获得要显示的表单和提交按钮，但我找不到任何我的 urls.py 文件的 URL 模式示例。我发现另一个类似的问题有以下建议：

“您需要编写一个视图来处理您的请求。（这样做）您需要编辑 urls.py 以将您的测验 url 映射到 views.py 中的函数（尝试，但失败）。所以当一个带有该测验 url 的请求时来 Django 应用该视图功能。

当我将用户重定向到新的 url 是问题所在。我似乎找不到下一个模式应该是什么的例子。这是我的 urls.py 代码（到目前为止，index.html 和 details.html 是我的模板）：

```
url(r'^signup/$', 'signup.views.select_product', name='select_product'),
url(r'^signup/(?P<product_id>\d+)/$', 'signup.views.subscriber_signup', name='subscriber_signup'),
    #... 
```

这是我的视图代码：

```
def select_product(request):
    title = "get yourself an e-edition. wurd."
    pform = ProductForm(request.POST)  
    if request.method == 'POST': # If the form has been submitted...
        pform = ProductForm(request.POST) # A form bound to the POST data
        if pform.is_valid(): # All validation rules pass
        # Process the data in form.cleaned_data
        # ...
            return HttpResponseRedirect('signup/index.html') # Redirect after POST
    else:
        form = ProductForm() # An unbound form
    return render_to_response('signup/index.html', {'title': title, 'pform': pform}, context_instance=RequestContext(request))

def subscriber_signup(request, product_id):
    signup = Product.objects.get(id=product_id)
    title = "get yourself an e-edition. wurd."
    sform = SubscriberForm(request.POST)  
    if request.method == 'POST': # If the form has been submitted...
        sform = SubscriberForm(request.POST) # A form bound to the POST data
        if sform.is_valid(): # All validation rules pass
        # Process the data in form.cleaned_data
        # ...
            return HttpResponseRedirect('signup/detail.html') # Redirect after POST
    else:
        sform = SubscriberForm() # An unbound form
    return render_to_response('signup/detail.html', {'title': title, 'sform': sform, 'signup': signup,}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:41:41.790

所以问题的一部分是我在我的订阅者类中使用了（用户）模型，订阅者表单是基于它的。我放弃了这一点，并基于普通类制作了一个表单，其中单独定义了对象。

这是最终奏效的 URL 模式。

```
url(r'^signup/$', 'signup.views.select_product', name='select_product'),
url(r'^signup/(?P<product_id>\d+)/$', 'signup.views.subscriber_signup', name='subscriber_signup'), 
url(r'^signup/(?P<product_id>\d+)/thankyou/$', 'signup.views.thankyou', name='thankyou'), 
```

感谢您的回复。

安东尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:23:13.863

或者使用为此设计的[Django 表单向导。](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)

# session - 没有 HttpSession 的 Spring Security 记住我服务

> ID：10057300
> 
> 赞同：4
> 
> 时间：2012-04-07T18:47:35.493
> 
> 标签：session, spring-security, remember-me

我的问题与[此](https://stackoverflow.com/questions/2504590/how-can-i-use-spring-security-without-sessions)类似，但我可以简化一些。基本上我想通过记住我的 cookie 来验证用户，但我希望服务器端的一切都是完全无状态的，即永远不要创建一个`HttpSession`. 我有以下设置：

```
<security:http use-expressions="true" create-session="stateless" >
    <security:intercept-url pattern="/index.jsp" access="hasRole('ROLE_ANONYMOUS')" />
    <security:intercept-url pattern="/**" access="hasRole('ROLE_TEST')" />
    <security:form-login login-page="/index.jsp" default-target-url="/home" always-use-default-target="true" authentication-failure-url="/index.jsp?login_error=1" />
    <security:logout logout-success-url="/index.jsp"/>
    <security:remember-me key="MY_KEY" />
</security:http>

<security:authentication-manager>
    <security:authentication-provider>
        <security:user-service>
            <security:user name="testUser" password="testPassword" authorities="ROLE_TEST" />
        </security:user-service>
    </security:authentication-provider>
</security:authentication-manager> 
```

我使用上面的用户名和密码进行了身份验证，并在我的浏览器中看到了记住我的 cookie。它的那部分工作得很好。但是，我发现它在此过程中创建了一个会话。我认为`create-session="stateless"`应该防止这种情况发生。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:19:01.917

在处理了更多之后，我发现创建会话的不是 Spring Security。每次我点击 index.jsp 时，它都会创建一个新会话。我只是添加`<%@ page session="false">`到 index.jsp 的顶部，现在没有创建会话。

# windows - 如何从 CMD 关闭 Windows 资源管理器

> ID：10057301
> 
> 赞同：6
> 
> 时间：2012-04-07T18:47:35.977
> 
> 标签：windows, batch-file

是否可以从 CMD 关闭 Windows 资源管理器？我有一批这样做：它将更改目录，在此文件夹中打开资源管理器，然后运行程序。用户关闭程序后，批处理应关闭资源管理器（或所有已打开的资源管理器），继续下一个文件夹（cd 文件夹），在此文件夹中运行相同的程序，依此类推。直到最后一个文件夹被处理。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-05T16:22:46.410

通过终止资源管理器进程来关闭资源管理器窗口（请注意，这可能不仅仅是终止窗口，但它肯定会这样做）：

例如，使用 win+r 试试这个

```
cmd /c "taskkill /f /im explorer.exe && start explorer" 
```

如果在没有重新启动的情况下杀死资源管理器，请使用 Ctrl+shift+Esc 拉起任务管理器并启动一个新任务“资源管理器”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:54:01.557

不是来自批处理文件，除非您想编写自己的命令行应用程序来打开 Windows 资源管理器窗口，并且（这是关键部分）以某种方式知道该资源管理器窗口的窗口句柄，因此它可以向其发布`WM_CLOSE`消息，这基本上模拟了关闭该窗口的人。

您将如何确定“所有打开的资源管理器窗口”将不是仅`explorer.exe`从命令行启动实例，而是从您自己的应用程序中执行。

我认为确定窗口句柄（`HWND`在 win32 api 术语中）并发布关闭消息会比尝试跟踪进程句柄和终止资源管理器进程实例更好，因为这可能会导致一些超出您想要的副作用。

# node.js - Node.js 的可写流和 drain 事件

> ID：10057302
> 
> 赞同：9
> 
> 时间：2012-04-07T18:47:37.893
> 
> 标签：node.js, streaming

[write()](http://nodejs.org/api/stream.html#stream_stream_write_string_encoding_fd)的文档说：

> 返回 false 表示内核缓冲区已满，以后会发出数据。

事件的文件`drain`说：

> 在 write() 方法返回 false 后，会发出此事件以指示再次写入是安全的。

这意味着什么？我必须等待`drain`事件才能再次写作吗？我试图写入的数据发生了什么？那是丢了吗？当我在不等待`drain`事件的情况下调用 write 会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-02-01T14:10:43.683

@TooTallNate 答案是错误的。你应该绝对关心`.write`返回值。

> 这意味着什么？我是否必须等待排水事件才能再次写入？

是的，当`.write`返回 false 时，您必须等待。

> 我试图写入的数据发生了什么？那是丢了吗？

不，它没有丢失，它以正确的顺序缓冲。

> 当我在没有等待排水事件的情况下调用 write 会发生什么？

如果您没有正确处理 drain 事件，您的脚本将阻塞事件循环，并最终耗尽内存限制使您的应用程序崩溃。

我在另一个问题中给出了详细解释：[为什么尝试写入大文件会导致js堆内存不足](https://stackoverflow.com/questions/50357777/why-does-attempting-to-write-large-a-large-file-cause-js-heap-to-run-out-of-memo?noredirect=1&lq=1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T20:05:38.453

您可以安全地调用`write()`而不关心返回值。当内核缓冲区已满时，Node 将缓冲任何写入调用，并按您期望的顺序推送它们。您*无需*等待`'drain'`事件再次写入。

或者，您可以检查的返回值，`write()`然后通知正在写入 Stream 缓冲区已满的事物。这正是这样[`Stream#pipe()`做的](https://github.com/joyent/node/blob/b3f91f15b2482a8f3e5d37f0e09429a4b4775230/lib/stream.js#L38-40)。

所以通常，只需使用`Stream#pipe()`，所有的好东西都会为你处理好 :)

# javascript - HTMLElement 和 HTMLDocument 的通用接口？

> ID：10057306
> 
> 赞同：0
> 
> 时间：2012-04-07T18:48:06.390
> 
> 标签：javascript, dom

一些 DOM 选择方法，如 getElementsByClassName() 对 HTMLDocument 和 HTMLElement 是通用的。

有没有继承常用选择方法的通用接口？（例如 Node 接口提供了一些常用方法）。

```
document.getElementsByClassName("test");

element.getElementsByClassName("test"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:03:46.773

两者都通过原型链从[Node](https://developer.mozilla.org/en/DOM/Node)继承，但似乎这些特定方法没有在公共接口中定义；它们独立出现在`Element`和`Document`中。

```
Object --> Node --> Element --> HTMLElement
             \----> Document --> HTMLDocument 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:11:28.613

我认为这些是选择时的常用方法：

```
getElementsByClassName
getElementsByTagName
getElementsByTagNameNS
querySelector
querySelectorAll 
```

其他方法如`getElementById`仅适用于`document`

# javascript - 使用函数作为参数

> ID：10057308
> 
> 赞同：0
> 
> 时间：2012-04-07T18:48:13.657
> 
> 标签：javascript, html, function, syntax, parameter-passing

首先让我说，我确实是从搜索开始的，并且有一个非常相似的问题，但它完全不同，我仍然感到困惑。

免责声明：我正在为家庭作业制作一个石头剪刀布游戏，只是有一个关于适当的 JavaScript 函数/参数传递的快速问题。

我有一个名为的函数，它返回一个随机的“石头或纸或剪刀”值作为对手（计算机）的选择。

我有另一个函数 compareChoices() 将您的值（由 html 文档中的“onclick”确定）与来自对位随机（）函数的值进行比较。

现在，在游戏所在的表格中，其中一个表格数据（为大家提供一个示例，说明单击其中一张图片应该如何工作）如下：

```
<td onclick="comparisonChoices('paper', 'opponentRandomizer()**;**');">
    <img src="paper.jpg" alt="paper" />
</td> 
```

现在，比较中的第一个参数应该是您的选择，我真的很想如果我可以轻松地在 td onclick 内的 compareChoices 函数内调用对手随机函数，因为这样随机结果将在 compareChoices 内被考虑功能。

这行得通吗？您是否允许在另一个被调用函数中抛出一个函数作为参数？对手随机函数确实会返回一个石头、纸、剪刀值，然后比较函数会确定您是赢了、输了还是平局。我不知道适当的语法，或者我什至可以做到这一点，而且我还没有将 javascript 集成到我的 html 中，在我拥有游戏所需的所有功能之前，我不知道任何简单的方法来实现它跑步。

TL;DR - 你能把一个返回值的函数放在另一个被称为 onclick="function(param,'function()');" 的函数中吗？?

另外，我上面的粗体分号应该在那里吗？（编辑：** ** 没有显示为粗体，但我说的是由 ** ** 包围的分号）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T18:51:52.063

有什么问题：

```
function comparisonChoices(selection) {
    other_selection = opponentRandomizer();
    etc....
} 
```

?

# url - 从服务生成链接

> ID：10057309
> 
> 赞同：29
> 
> 时间：2012-04-07T18:48:31.623
> 
> 标签：url, symfony, service

如何从服务生成链接？我在我的服务中注入了“路由器”，但是生成的链接`/view/42`不是`/app_dev.php/view/42`. 我该如何解决这个问题？

我的代码是这样的：

**服务.yml**

```
services:
    myservice:
        class: My\MyBundle\MyService
        arguments: [ @router ] 
```

**我的服务.php**

```
<?php

namespace My\MyBundle;

class MyService {

    public function __construct($router) {

        // of course, the die is an example
        die($router->generate('BackoffUserBundle.Profile.edit'));
    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-07T22:25:27.370

所以：你需要两件事。

首先，您必须对@router 有依赖（以获取 generate()）。

其次，您必须将服务范围设置为“请求”（我错过了）。 [http://symfony.com/doc/current/cookbook/service_container/scopes.html](http://symfony.com/doc/current/cookbook/service_container/scopes.html)

你的`services.yml`变成：

```
services:
    myservice:
        class: My\MyBundle\MyService
        arguments: [ @router ]
        scope: request 
```

现在您可以使用@router 服务的生成器功能了！

* * *

**关于 Symfony 3.x**的重要说明：正如[文档](http://symfony.com/doc/2.8/cookbook/service_container/scopes.html)所说，

> 本文中解释的“容器作用域”概念在 Symfony 2.8 中已被弃用，并将在 Symfony 3.0 中删除。
> 
> 使用`request_stack`服务（在 Symfony 2.4 中引入）而不是`request`服务/范围，并使用`shared`设置（在 Symfony 2.8 中引入）而不是`prototype`范围（阅读有关共享服务的更多信息）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-08-25T11:24:31.007

对于**Symfony 4.x ，按照此链接**[在服务中生成 URL 中](https://symfony.com/doc/current/routing.html#generating-urls-in-services)的说明进行操作要容易得多

您只需要注入`UrlGeneratorInterface`您的服务，然后调用`generate('route_name')`以检索链接。

```
// src/Service/SomeService.php
use Symfony\Component\Routing\Generator\UrlGeneratorInterface;

class SomeService
{
    private $router;

    public function __construct(UrlGeneratorInterface $router)
    {
        $this->router = $router;
    }
    public function someMethod()
    {
        // ...

        // generate a URL with no route arguments
        $signUpPage = $this->router->generate('sign_up');
    }

    // ...
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-26T13:08:39.847

我有一个[类似的问题](https://stackoverflow.com/questions/43630670/how-to-generate-absolute-url-from-early-auto-loaded-symfony-3-router/43634938#43634938)，但使用的是 Symfony 3。虽然在上一个答案中没有提到，但要找出一个人将如何`request_stack`使用`scope: request`.

在这个问题的情况下，它看起来像这样：

services.yml 配置

```
services:
    myservice:
        class: My\MyBundle\MyService
        arguments:
            - '@request_stack'
            - '@router' 
```

和 MyService 类

```
<?php

    namespace My\MyBundle;

    use Symfony\Component\Routing\RequestContext;

    class MyService {

        private $requestStack;
        private $router;

        public function __construct($requestStack, $router) {
            $this->requestStack = $requestStack;
            $this->router = $router;
        }

        public doThing() {
            $context = new RequestContext();
            $context->fromRequest($this->requestStack->getCurrentRequest());
            $this->router->setContext($context);
            // of course, the die is an example
            die($this->router->generate('BackoffUserBundle.Profile.edit'));
        }
    } 
```

**注意：**[建议不要](https://github.com/symfony/symfony/issues/17273#issuecomment-297650396)在构造函数中访问 RequestStack，因为它可能会在内核处理请求之前尝试访问它。因此，当尝试从 RequestStack 获取请求对象时，它可能会返回 null。

# java - 将 JFileChooser 嵌入到另一个组件中

> ID：10057312
> 
> 赞同：0
> 
> 时间：2012-04-07T18:48:45.163
> 
> 标签：java, jlist, jfilechooser

我的意图是将 JFileChooser 嵌入到其他组件中，例如，可以选择一个文件并单击“添加”按钮，以便将文件添加到 JList（在运行时）。我创建了一个示例 GUI以这种形式：

![图形用户界面](../Images/65c9891888dee024b8c51ec00d2bbc8d.png)

我无法在 JFileChooser 和 JList 之间创建链接。有人可以帮忙吗？

您还可以查看我尝试过的内容：

```
 public Converter() {
    setForeground(Color.BLACK);
    getContentPane().setLayout(null);

    textField = new JTextField();
    textField.setBounds(20, 12, 714, 20);
    getContentPane().add(textField);
    textField.setColumns(10);

    final JScrollPane scrollPane = new JScrollPane();
    setTitle("ABC"); 
    scrollPane.setBounds(0, 470, 766, -438);
    getContentPane().add(scrollPane);

    list = new JList();
    list.setBackground(Color.LIGHT_GRAY);
    list.setForeground(Color.GRAY);

    vector = new Vector<File>();
    field = new JTextField();

    final JFileChooser fileChooser = new JFileChooser();
    fileChooser.setBounds(10, 43, 485, 463);
    getContentPane().add(fileChooser);

    list = new JList(vector);
    list.setBackground(Color.LIGHT_GRAY);

    JButton btnNewButton = new JButton("ADD");
    btnNewButton.setBounds(505, 106, 89, 23);
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
              add();
        }

        private void add() {
            // TODO Auto-generated method stub

              {
                  for (File file : fileChooser.getSelectedFiles()) {
                        field.setText(file.getAbsolutePath());
                        vector.add(file);
                        System.out.println("Added..!!");
                }
                //list.updateUI();
              }
            }
    });
    getContentPane().add(btnNewButton);

    JButton btnNewButton_1 = new JButton("REMOVE");
    btnNewButton_1.setBounds(505, 190, 89, 23);
    btnNewButton_1.addActionListener(new ActionListener() {
               public void actionPerformed(ActionEvent e) {
               remove();
               }

        private void remove() {
            if(list.getSelectedIndices().length > 0) {
                  int[] selectedIndices = list.getSelectedIndices();
                  for (int i = selectedIndices.length-1; i >=0; i--) {
                        vector.removeElementAt(i);
                        System.out.println("Removed..!!");
                  } 
                   }
                    list.updateUI();

        }   
        });
    getContentPane().add(btnNewButton_1);

    JButton btnNewButton_2 = new JButton("DECODE");
    btnNewButton_2.setBounds(505, 278, 89, 23);

    getContentPane().add(btnNewButton_2);

    JList list_1 = new JList();
    list_1.setForeground(Color.BLACK);
    list_1.setBackground(Color.LIGHT_GRAY);
    list_1.setBounds(604, 109, 162, 328);
    getContentPane().add(list_1);

    final JFrame Jframe = new JFrame();
    Jframe.setFont(new Font("Arial", Font.BOLD, 14));
    Jframe.setForeground(Color.WHITE);
    Jframe.setTitle("Additional Loader Information");
    Jframe.getContentPane().setLayout(null);

}       

static class PreviewPane extends JPanel implements PropertyChangeListener {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private JLabel label;
    private int maxImgWidth;
    public PreviewPane() {
        setLayout(new BorderLayout(5,5));
        setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
        add(new JLabel("Preview:"), BorderLayout.NORTH);
        label = new JLabel();
        label.setBackground(Color.WHITE);
        label.setOpaque(true);
        label.setPreferredSize(new Dimension(200, 200));
        maxImgWidth = 195;
        label.setBorder(BorderFactory.createEtchedBorder());
        add(label, BorderLayout.CENTER);
    }

    public void propertyChange(PropertyChangeEvent evt) {
        Icon icon = null;
        if(JFileChooser.SELECTED_FILE_CHANGED_PROPERTY.equals(evt
                .getPropertyName())) {
            File newFile = (File) evt.getNewValue();
            if(newFile != null) {
                String path = newFile.getAbsolutePath();
                if(path.endsWith(".gif") || path.endsWith(".jpg")                                                             
                             || path.endsWith(".png") || path.endsWith(".bmp")) {
                    try {
                        BufferedImage img = 
                                             ImageIO.read(newFile);
                        float width = img.getWidth();
                        float height = img.getHeight();
                        float scale = height / width;
                        width = maxImgWidth;
                        height = (width * scale); 
                                           // height should be scaled from new width                            

                    }
                    catch(IOException e) {
                        // couldn't read image.
                    }
                }
            }

            label.setIcon(icon);
            this.repaint();

        }
                   }

                 }

                 public static void main(String args[]) {        
                    // Create an instance of the test application         
                        Converter frame = new Converter();        
                         frame.pack();     
                           frame.setVisible(true);     
                      }
                 } 
```

如果有人可以帮助我解决这个问题，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:28:11.917

您遇到的问题是`ListModel`您`JList`为您创建的不支持更改。您需要创建一个`DefaultListModel`并使用它而不是您的`Vector`.

前任：

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            final DefaultListModel<String> model = new DefaultListModel<>();
            JList<String> list = new JList<>(model);

            JButton add = new JButton("Click Me!");
            add.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    model.addElement(model.getSize() + "");
                }
            });

            JPanel p = new JPanel();
            p.add(new JScrollPane(list));
            p.add(add);

            JFrame frame = new JFrame("Example");
            frame.setContentPane(p);
            frame.pack();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setVisible(true);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:51:04.340

[JFileChooser](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html)是一个JComponent [，](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html)因此您只需[将](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#add%28java.awt.Component%29)其添加到具有[BorderLayout的](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/BorderLayout.html)[JPanel](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)中，它将填满整个面板。

# mysql - 简单的MySql更新查询很慢

> ID：10057314
> 
> 赞同：2
> 
> 时间：2012-04-07T18:49:17.713
> 
> 标签：mysql, sql, sql-update

以下查询需要很长时间，尽管它应该立即执行：

```
mysql> UPDATE articles SET description='test' WHERE article_id=6;
Query OK, 1 row affected (40.80 sec)
Rows matched: 1  Changed: 1  Warnings: 0 
```

*   article_id 是 INT 自动增量
*   表只有大约 1000 条记录

我尝试分析查询，您可以看到它快速执行更新，但由于某种原因它挂起：

```
mysql> SHOW PROFILE FOR QUERY 1;
+----------------------+-----------+
| Status               | Duration  |
+----------------------+-----------+
| starting             |  0.000079 |
| checking permissions |  0.000016 |
| Opening tables       |  0.000020 |
| System lock          |  0.000011 |
| Table lock           |  0.000864 |
| init                 |  0.000078 |
| Updating             |  0.000315 |
| end                  | 40.798736 |
| query end            |  0.000028 |
| freeing items        |  0.000014 |
| closing tables       |  0.000012 |
| logging slow query   |  0.000010 |
| logging slow query   |  0.000046 |
| cleaning up          |  0.000012 |
+----------------------+-----------+
14 rows in set (0.00 sec) 
```

我尝试将 tmp 目录挂载到 RAM 以加快查询速度，但这也无济于事。

我发现如果我冲洗桌子，问题会暂时消失，但过一段时间又会出现。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:52:41.440

已解决 - 原来 mysql 缓存大小太大。降低它的大小解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:04:20.040

如果这是一个 MyISAM 表，您可能需要修复它。我有这种数据文件损坏的现象。

# functional-programming - 标准 ML 重复上一个命令，向左箭头？

> ID：10057315
> 
> 赞同：6
> 
> 时间：2012-04-07T18:49:20.810
> 
> 标签：functional-programming, interpreter, sml, ml, ledit

我正在使用其解释器学习标准 ML。有时我会打错字，只想像在 Linux shell 中那样重复前面的命令。但是，向上箭头最终会在屏幕上打印特殊字符。有时我想回到左边更正一些东西，左箭头也会导致打印特殊字符。

有谁知道正确的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T21:05:59.040

我使用莫斯科 ML，但我认为答案将适用于您使用的任何版本：

您可以使用[`rlwrap`](http://utopia.knoware.nl/~hlub/rlwrap/).

我在我的 中设置了以下别名`.zshrc`，它会自动处理它：

```
alias mosml="rlwrap mosml" 
```

（替换`mosml`为您的 SML 解释器的名称。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T16:55:08.683

考虑使用程序 ledit。它允许您使用箭头键访问以前的命令。

例子：

```
ledit mosml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:31:48.247

如果您要进行任何严重的 SML 黑客攻击，我强烈建议您使用允许您与 SML 顶级环境交互的开发环境。

我使用 Emacs 和[SML 模式](http://www.iro.umontreal.ca/~monnier/elisp/)。这里的美妙之处在于，您可以在顶部窗口中编写函数并将它们保存到文件中。然后，您可以将它们发送到包含 Inferior-SML 过程的下部窗口进行编译。此外，Inferior-SML 进程默认具有命令历史记录。

# c# - 如何在 Metro 应用程序中为组合框添加颜色？

> ID：10057317
> 
> 赞同：2
> 
> 时间：2012-04-07T18:49:44.067
> 
> 标签：c#, windows-8, microsoft-metro

我想使用 C# 将颜色列表添加到 Metro 应用程序中的组合框。反过来，用户可以从列表中选择一种特定的颜色来改变背景。

可用的可能库是 Windows.UI.Colors

这是一个简单的桌面应用程序的链接：[http ://www.c-sharpcorner.com/uploadfile/mahesh/how-to-load-all-colors-in-a-combobox-using-C-Sharp /](http://www.c-sharpcorner.com/uploadfile/mahesh/how-to-load-all-colors-in-a-combobox-using-C-Sharp/)

但我无法将它移植到地铁环境。

此外，作为列表项的颜色名称和颜色本身都是一个巨大的优势。

来自 MSDN 的另一个线程：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/880a3b5b-e287-4cdc-a1ab-d1cd4a19aedb/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/880a3b5b-e287-4cdc-a1ab-d1cd4a19aedb/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:47:01.620

这段代码对我有用：

```
var colorsTypeInfo = typeof(Colors).GetTypeInfo();
var properties = colorsTypeInfo.DeclaredProperties;
Dictionary<string, string> colours = new Dictionary<string, string>();
foreach (var dp in properties)
{
    colours.Add(dp.Name, dp.GetValue(typeof(Colors)).ToString());
} 
```

***确保您已添加以下参考，否则将无法正常工作***

```
using System.Reflection;
using Windows.UI; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T09:45:23.917

```
<ComboBox x:Name="cbColorNames" Grid.Row="1" Height="40"
      ItemsSource="{Binding Colors}"
      SelectedItem="{Binding SelectedColorName, Mode=TwoWay}">
<ComboBox.ItemTemplate>
    <DataTemplate>
        <Grid Background="Black">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Rectangle Width="35" Height="20" Fill="{Binding Name}" Margin="5,0"/>
            <TextBlock Grid.Column="1" Margin="10,0,0,0" Text="{Binding Name}" Foreground="White"/>
        </Grid>
    </DataTemplate>
</ComboBox.ItemTemplate> 
```

这是 xaml 文件。

```
private static void LoadColors()
{
    var t = typeof(Colors);
    var ti = t.GetTypeInfo();
    var dp = ti.DeclaredProperties;
    colors = new List<PropertyInfo>();
    foreach (var item in dp)
    {
        colors.Add(item);
    }
}
private static List<PropertyInfo> colors;
public List<PropertyInfo> Colors
{
    get
    {
        if (colors == null)
            LoadColors();
        return colors;
    }
} 
```

这是 C# 代码。

感谢大家的支持和帮助。

# java - 在摇摆中创建带有提交按钮的表单面板

> ID：10057321
> 
> 赞同：2
> 
> 时间：2012-04-07T18:50:27.787
> 
> 标签：java, swing, events, event-handling

我想创建一个表单，如果用户按下`Enter`该表单，则在该表单中提交。问题是这个表单有很多组件，每个组件都有自己的事件处理程序。

我想`KeyListener`为整个面板创建一个，但事件被面板的组件消耗，并且没有到达面板。

目前我已经`KeyListener`为每个组件添加了一个 , 监听`Enter`键。有没有更好的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T20:22:45.247

*   采用`getRootPane().setDefaultButton(myButton);`

*   KeyListener 不是为 Swing JComponents 指定的，您可以使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

SSCCE 代码

```
import java.awt.event.*;
import javax.swing.*;

public class ButtonTest {

    private JFrame frame;

    public void createAndShowGUI() {
        frame = new JFrame();
        frame.add(new JButton("Please press ENTER"));
        frame.setLocation(150, 150);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
        setKeyBindings();
    }

    private void setKeyBindings() {
        frame.getRootPane().getInputMap(
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(
                KeyStroke.getKeyStroke("ENTER"), "clickENTER");
        frame.getRootPane().getActionMap().put("clickENTER", new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ButtonTest().createAndShowGUI();
            }
        });
    }
} 
```

*** 代码 ***

```
import java.awt.event.*;
import java.awt.Color;
import java.awt.AlphaComposite;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;

public class ButtonTest {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ButtonTest().createAndShowGUI();
            }
        });
    }
    private JFrame frame;
    private SoftJButton softButton1;

    public void createAndShowGUI() {
        softButton1 = new SoftJButton("Transparent Button");
        frame = new JFrame();
        frame.add(softButton1);
        frame.setLocation(150, 150);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
        Timer alphaChanger = new Timer(50, new ActionListener() {

            private float incrementer = -.03f;

            @Override
            public void actionPerformed(ActionEvent e) {
                float newAlpha = softButton1.getAlpha() + incrementer;
                if (newAlpha < 0) {
                    newAlpha = 0;
                    incrementer = -incrementer;
                } else if (newAlpha > 1f) {
                    newAlpha = 1f;
                    incrementer = -incrementer;
                }
                softButton1.setAlpha(newAlpha);
            }
        });
        alphaChanger.start();
        Timer uiChanger = new Timer(5500, new ActionListener() {

            private LookAndFeelInfo[] laf = UIManager.getInstalledLookAndFeels();
            private int index = 1;

            @Override
            public void actionPerformed(ActionEvent e) {
                try {
                    UIManager.setLookAndFeel(laf[index].getClassName());
                    SwingUtilities.updateComponentTreeUI(frame);
                } catch (Exception exc) {
                    exc.printStackTrace();
                }
                index = (index + 1) % laf.length;
            }
        });
        uiChanger.start();
        setKeyBindings();
    }

    private void setKeyBindings() {
        frame.getRootPane().getInputMap(
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(
                KeyStroke.getKeyStroke("ENTER"), "clickENTER");
        frame.getRootPane().getActionMap().put("clickENTER", new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
    }

    public static class SoftJButton extends JButton {

        private static final JButton lafDeterminer = new JButton();
        private static final long serialVersionUID = 1L;
        private boolean rectangularLAF;
        private float alpha = 1f;

        public SoftJButton() {
            this(null, null);
        }

        public SoftJButton(String text) {
            this(text, null);
        }

        public SoftJButton(String text, Icon icon) {
            super(text, icon);

            setOpaque(false);
            setFocusPainted(false);
        }

        public float getAlpha() {
            return alpha;
        }

        public void setAlpha(float alpha) {
            this.alpha = alpha;
            repaint();
        }

        @Override
        public void paintComponent(java.awt.Graphics g) {
            java.awt.Graphics2D g2 = (java.awt.Graphics2D) g;
            g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, alpha));
            if (rectangularLAF && isBackgroundSet()) {
                Color c = getBackground();
                g2.setColor(c);
                g.fillRect(0, 0, getWidth(), getHeight());
            }
            super.paintComponent(g2);
        }

        @Override
        public void updateUI() {
            super.updateUI();
            lafDeterminer.updateUI();
            rectangularLAF = lafDeterminer.isOpaque();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:07:50.040

我将为整个 JFrame 实现一个 keyListener 并将您的提交代码添加到适当的 KeyListener 事件中。

```
public class class_name extends JFrame implements KeyListener{

    public class_name(){
        //add components here and add the listener to the objects
    }
    public void keyTyped(KeyEvent e) {
    }

    public void keyPressed(KeyEvent e) {
    }

    public void keyReleased(KeyEvent e) {
    }
} 
```

# ruby - 如何在 Intitalize 中访问此变量？

> ID：10057324
> 
> 赞同：0
> 
> 时间：2012-04-07T18:50:36.167
> 
> 标签：ruby

> **可能重复：**
> [如何访问此变量？](https://stackoverflow.com/questions/10055552/how-do-i-access-this-variable)

可以说我有代码：

```
class Player
  def getsaves
    print "Saves: "
    saves = gets
  end
  def initialize(saves, era, holds, strikeouts, whip)
  end
end 
```

我希望能够在初始化方法中访问getsaves中的saves变量说：

```
j = Player.new(getsaves_saves_variable, 30, 30, 30, 30) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:02:11.900

定义属性：

```
attr_accessor :saves_attr
attr_accessor :era_attr
attr_accessor :holds_attr
attr_accessor :strikeouts_attr
attr_accessor :whip_attr

def initialize(saves, era, holds, strikeouts, whip)
   self.saves = saves
   self.era_attr = era
   ...
end 
```

然后在getsaves中你可以这样做：

```
self.saves_attr = gets 
```

# javascript - 如何让 maven jetty 插件知道额外的 web 目录？

> ID：10057325
> 
> 赞同：6
> 
> 时间：2012-04-07T18:50:37.193
> 
> 标签：javascript, maven, jetty

我想使用 src/main/javascript 作为我的 javascript 文件的源目录，同时仍然对大多数其他 web 文件使用 src/main/webapp 但 maven jetty:run 插件默认情况下不知道该目录。

以下是我到目前为止所获得的，但它似乎并没有让 Jetty 知道我的 javascript 目录：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.mortbay.jetty</groupId>
      <artifactId>maven-jetty-plugin</artifactId>
      <version>6.1.12</version>
      <configuration>
        <webAppConfig>
          <contextPath>/${project.artifactId}</contextPath>
          <extraClasspath>target/classes/:src/main/javascript</extraClasspath>
        </webAppConfig> 
        <webResources>
          <resource>
            <directory>src/main/webapp</directory>
            <directory>src/main/javascript</directory>
          </resource>
        </webResources>
      </configuration>
    </plugin> 
```

如何让 maven jetty 插件知道这个附加的 web 目录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T20:42:30.377

看起来这可以帮助你：

*   [http://docs.codehaus.org/display/JETTY/Multiple+WebApp+Source+Directory](http://docs.codehaus.org/display/JETTY/Multiple+WebApp+Source+Directory)

所以我会修改你的配置如下：

```
<plugin>
  <groupId>org.mortbay.jetty</groupId>
  <artifactId>maven-jetty-plugin</artifactId>
  <version>6.1.12</version>
  <configuration>
    <webAppConfig>
      <contextPath>/${project.artifactId}</contextPath>
      <!-- Javascript files are not java class files, so you can skip this
      <extraClasspath>target/classes/:src/main/javascript</extraClasspath>
      -->
      <baseResource implementation="org.mortbay.resource.ResourceCollection">
        <resourcesAsCSV>src/main/webapp,src/main/javascript</resourcesAsCSV>
      </baseResource>
    </webAppConfig> 
  </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-15T13:58:07.203

请注意，该`ResourceCollection`课程已移入最新版本的 Jetty (9.3.0.M2)。

因此，实施应指向`org.eclipse.jetty.util.resource`：

```
<plugin>
  <groupId>org.eclipse.jetty</groupId>
  <artifactId>maven-jetty-plugin</artifactId>
  <version>9.3.0.M2</version>
  <configuration>
    <webAppConfig>
      <baseResource implementation="org.eclipse.jetty.util.resource.ResourceCollection">
        <resourcesAsCSV>src/main/webapp,src/main/javascript</resourcesAsCSV>
      </baseResource>
    </webAppConfig> 
  </configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-10T14:19:18.520

从[Jetty 9](https://www.eclipse.org/jetty/documentation/jetty-9/index.html#configuring-your-webapp)开始：

```
<webApp>
  <contextPath>/my-app</contextPath>
  <resourceBases>
    <resourceBase>${project.basedir}/src/main/webapp</resourceBase>
    <resourceBase>${project.basedir}/external-static</resourceBase>
  </resourceBases>
</webApp> 
```

# android - 无法将 OnCheckedChangeListener 设置为复选框

> ID：10057328
> 
> 赞同：12
> 
> 时间：2012-04-07T18:50:46.757
> 
> 标签：android, checkbox, android-listview, android-adapter

我正在尝试将 a 设置`OnCheckedChangeListener`为 a`CheckBox`但我的应用程序在运行时退出。我还尝试为我设置监听器`TextView`，但我仍然得到相同的结果。任何人都可以帮忙吗？

```
import android.app.ListActivity;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ListViewActivity extends ListActivity implements OnCheckedChangeListener {

TextView label;
CheckBox checkBox;

public class MyCustomAdapter extends ArrayAdapter<String> {

public MyCustomAdapter(Context context, int textViewResourceId,
String[] objects) {
super(context, textViewResourceId, objects);

 // TODO Auto-generated constructor stub
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
// TODO Auto-generated method stub
//return super.getView(position, convertView, parent);

View row = convertView;

if(row==null){
LayoutInflater inflater=getLayoutInflater();
row=inflater.inflate(R.layout.main, parent, false); 

}  

label=(TextView)row.findViewById(R.id.weekofday);
label.setText(month[position]);
checkBox=(CheckBox)row.findViewById(R.id.checkBox);

return row;
}
}

String[] month = {
"January", "February", "March", "April",
"May", "June", "July", "August",
"September", "October", "November", "December"
};

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
// setContentView(R.layout.main);
 /*setListAdapter(new ArrayAdapter<String>(this,
   R.layout.row, R.id.weekofday, DayOfWeek));*/

   setListAdapter(new MyCustomAdapter(ListViewActivity.this, R.layout.main, month));

   checkBox.setOnCheckedChangeListener(this); //my application exits here!!!!

 }

@Override
public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
// TODO Auto-generated method stub
//Toast.makeText(getApplicationContext(), "box checked", Toast.LENGTH_LONG);

}

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-07T19:41:11.520

你不能像这样为你设置监听器`CheckBox`（`ListView`它可能会抛出一个`NullPointerException`），而是在`getView()`方法中设置监听器（你还必须保持`CheckBox`状态，这样你就不会得到奇怪的行状态） . 贝娄是一个例子：

```
public class ListViewActivity extends ListActivity {

    public class MyCustomAdapter extends ArrayAdapter<String> {

        private ArrayList<Boolean> status = new ArrayList<Boolean>();

        public MyCustomAdapter(Context context, int textViewResourceId,
                String[] objects) {
            super(context, textViewResourceId, objects);
            for (int i = 0; i < objects.length; i++) {
                status.add(false);
            }
        }

        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            View row = convertView;
            if (row == null) {
                LayoutInflater inflater = getLayoutInflater();
                row = inflater.inflate(R.layout.adapters_listviewactivity_row,
                        parent, false);
            }

            TextView label = (TextView) row.findViewById(R.id.weekofday);
            label.setText(month[position]);
            CheckBox checkBox = (CheckBox) row.findViewById(R.id.checkBox);
            checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    Toast.makeText(getApplicationContext(), "" + position,
                            Toast.LENGTH_SHORT).show();
                    if (isChecked) {
                        status.set(position, true);
                    } else {
                        status.set(position, false);
                    }
                }
            });
            checkBox.setChecked(status.get(position));
            return row;
        }
    }

    String[] month = { "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December" };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new MyCustomAdapter(ListViewActivity.this,
                R.layout.main, month));
    }

} 
```

因为`TextView`你必须做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-07T09:39:47.487

**以这种方式为您的类实现 CheckBox Listener，特别是如果您有多个 CheckBox 要处理，您可以在 switch case 块中处理并使您的代码更整洁：**

```
 public class MyClass extends AppCompatActivity implements
    CompoundButton.OnCheckedChangeListener,{

      CheckBox myCheckBox;
  } 
```

**在您的 onCreate() 方法中输入：**

```
 myCheckBox = (CheckBox)findViewById(R.Id.myCheckBoxName_in_XML_layout);
    mmyCheckBox.setOnCheckedChangeListener(this); 
```

**像这样监听您的复选框视图事件：**

```
 @Override
   public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

    switch (buttonView.getId()){
        case R.id.myCheckBoxName_in_XML_layout:

            if(isChecked == true) {
                Toast.makeText(this, "Checked", Toast.LENGTH_SHORT).show();
            } else{
                    Toast.makeText(this, "Unchecked", Toast.LENGTH_SHORT).show();
                   }

            break;
         }

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T06:53:50.610

```
public class MainActivity extends AppCompatActivity implements CompoundButton.OnCheckedChangeListener {
List<String> mList = new ArrayList<>();
CheckBox android, java, python, php, unity3D;
Button submitButton;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    android = (CheckBox) findViewById(R.id.androidCheckBox);
    android.setOnCheckedChangeListener(this);
    java = (CheckBox) findViewById(R.id.javaCheckBox);
    java.setOnCheckedChangeListener(this);
    python = (CheckBox) findViewById(R.id.pythonCheckBox);
    python.setOnCheckedChangeListener(this);
    php = (CheckBox) findViewById(R.id.phpCheckBox);
    php.setOnCheckedChangeListener(this);
    unity3D = (CheckBox) findViewById(R.id.unityCheckBox);
    unity3D.setOnCheckedChangeListener(this);

    submitButton = (Button) findViewById(R.id.submitButton);
    submitButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Log.e("ArrayList Values*******",mList.toString());
        }
    });

}

@Override
public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
    switch (compoundButton.getId()) {
        case R.id.androidCheckBox:
            if (android.isChecked()) {
                mList.add(String.valueOf(android.getText()));
                Log.e("Android*******",mList.toString());
            }
            else {
                    mList.remove(android.getText());
            }
            break;

        case R.id.javaCheckBox:
            if (java.isChecked()) {
                mList.add(String.valueOf(java.getText()));
                Log.e("Java*******",mList.toString());
            }
            else {
                mList.remove(java.getText());
            }
            break;

        case R.id.phpCheckBox:
            if (php.isChecked()) {
                mList.add(String.valueOf(php.getText()));
                Log.e("PHP*******",mList.toString());
            }
            else {
                mList.remove(php.getText());
            }
            break;

        case R.id.pythonCheckBox:
            if (python.isChecked()){
                mList.add(String.valueOf(python.getText()));
                Log.e("Python*******",mList.toString());
            }
            else {
                mList.remove(python.getText());
            }
            break;

        case R.id.unityCheckBox:
            if (unity3D.isChecked()){
                mList.add(String.valueOf(unity3D.getText()));
                Log.e("Unity*******",mList.toString());
            }
            else {
                mList.remove(unity3D.getText());
            }
            break;
      }
  }
} 
```

# c++ - 关于核心数量的并行化限制

> ID：10057331
> 
> 赞同：1
> 
> 时间：2012-04-07T18:51:02.660
> 
> 标签：c++, gcc, parallel-processing, openmp

我正在英特尔 i5 核机器上开发一种并行算法，它有两个内核，四个线程。

n 定义了我在其上执行计算的矩阵的大小。从下表可以看出，从 1 个线程到 2 个线程的利用率几乎减少了 50%，但 2 个线程和 4 个线程之间几乎没有区别。数字表示经过的秒数

![#of 线程 - 计算时间](../Images/ca8b27876da78af6a78771c8d408f627.png)

我的编译器是 windows 平台上的 mingw-gcc。我的并行化工具是 openmp。我`omp_set_num_threads(numThreads);`在并行例程的开头定义了线程数。

我无法在“真正的”8 核机器上测试算法。在我的 i5 机器上，在 1 个线程上，任务管理器显示使用了总 CPU 功率的 25%。在 2 个线程时，它是 50%，在 4 个线程时，它是预期的 96-99%。

那么造成这种情况的原因可能是什么？为什么计算时间没有减半？

并行代码段如下所示：

```
 #pragma omp parallel for schedule(guided) shared(L,A) \
    private(i)
    for (i=k+1;i<row;i++){
        double dummy = 0;
        for (int nn=0;nn<k;nn++){
            dummy += L[i][nn]*L[k][nn];
            L[i][k] = (A[i][k] - dummy)/L[k][k];
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T18:55:33.163

嗯，你的机器有2***核******4 线程***。

你只有 2 个***核心***，所以你不会从 1-4 个线程获得 4 倍的加速。

其次，当您扩展到更多线程时，您可能会开始遇到资源争用，例如最大化内存带宽。

# c# - 什么时候应该使用 using 语句？

> ID：10057334
> 
> 赞同：10
> 
> 时间：2012-04-07T18:51:06.943
> 
> 标签：c#, .net, using-statement

> **可能重复：**
> [什么是 C# Using 块，我为什么要使用它？](https://stackoverflow.com/questions/212198/what-is-the-c-sharp-using-block-and-why-should-i-use-it)

我正在将旧网站转换为 C#，但我不确定何时应该使用“使用”。有没有一般的指导方针？我知道好处，但我不是 100% 确定如何使用它。每次我“新”一个方法/属性时都是这样吗？

```
SqlConnection awesomeConn = new SqlConnection(connection); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-07T18:56:57.987

如果一个类实现了`IDisposable`，那么它将创建一些非托管资源，当您完成使用它们时需要“处置”它们。所以你会做这样的事情：

```
SqlConnection awesomeConn = new SqlConnection(connection);

// Do some stuff

awesomeConn.Dispose(); 
```

为了避免忘记释放资源（在这种情况下关闭数据库连接），尤其是在抛出异常时，您可以使用`using`语法在超出 using 语句的范围时自动调用 dispose：

```
using (SqlConnection awesomeConn = new SqlConnection(connection))
{
     // Do some stuff
} // automatically does the .Dispose call as if it was in a finally block 
```

其实 using 块等价于：

```
try
{
    SqlConnection awesomeConn = new SqlConnection(connection);

    // do some stuff
}
finally 
{
    awesomeConn.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-07T18:54:34.450

[**MSDN**](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)：

> 通常，**当您使用 IDisposable 对象时，您应该在 using 语句中声明和实例化它。using 语句以正确的方式调用对象的 Dispose 方法**，并且（当您如前所示使用它时）它还会导致对象本身在调用 Dispose 时立即超出范围。在 using 块中，对象是只读的，不能修改或重新分配。
> 
> **using 语句可确保调用 Dispose，即使在调用对象上的方法时发生异常也是如此。**您可以通过将对象放在 try 块中，然后在 finally 块中调用 Dispose 来获得相同的结果；事实上，这就是编译器翻译 using 语句的方式。前面的代码示例在编译时扩展为以下代码（注意额外的花括号以创建对象的有限范围）：

例子：

```
using (StreamReader stream = new StreamReader("path")) 
{
     string line = stream.ReadLine();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T18:59:06.660

对您实例化的所有实现 IDisposable 的对象使用 using，除非它们的生命周期超出当前执行范围（即方法调用）。在这种情况下，例如，如果您有一个一次性成员变量，那么包含类应该在其 Dispose 中实现 IDisposable 和 Dispose 成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T18:53:47.177

如果您想自动处置对象，则经常使用它。否则你必须手动调用 myobj.Dispose() 。

请参阅此处的参考文档：http: [//msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T18:54:13.010

Using 是一种方便，它允许您确保在不处理资源的情况下无法退出块。每当您必须在本地代码块中使用 IDisposable 实现程序时，都可以并且应该使用它。

# objective-c - 设备旋转时以编程方式更新按钮的位置

> ID：10057341
> 
> 赞同：0
> 
> 时间：2012-04-07T18:51:49.480
> 
> 标签：objective-c, ios5, uibutton

我是 iOS 开发的新手，这是我关于 SO 的第一个问题。如果这是一个愚蠢的问题，我很抱歉。

我没有使用 XIB。我的目标是获取一个按钮并在设备旋转时移动其位置。我的问题是在旋转发生后我找不到更新/刷新屏幕上按钮“框架”的方法。

这是我正在使用的 04 文件。我已经阅读了其他几个 SO 问题，但我无法解决这个问题。谢谢大家的任何建议。

LV_AppDelegate.h

```
#import <UIKit/UIKit.h>
//
@class LV_ViewController;
//
@interface LV_AppDelegate : UIResponder <UIApplicationDelegate>
//
@property (strong, nonatomic) UIWindow *window;
//
@property (strong, nonatomic) LV_ViewController *viewController;
//
@end 
```

LV_AppDelegate.m

```
#import "LV_AppDelegate.h"
#import "LV_ViewController.h"
//
@implementation LV_AppDelegate
//
@synthesize window = _window;
@synthesize viewController = _viewController;
//
- (void)dealloc
{
[_window release];
[_viewController release];
[super dealloc];
}
//
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//
NSLog(@"Entering didFinishLaunchingWithOptions");
//
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
self.viewController = [[[LV_ViewController alloc] initWithNibName:@"LV_ViewController" bundle:nil] autorelease];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;
}
//
- (void)applicationWillResignActive:(UIApplication *)application
{
}
//
- (void)applicationDidEnterBackground:(UIApplication *)application
{
}
//
- (void)applicationWillEnterForeground:(UIApplication *)application
{
}
//
- (void)applicationDidBecomeActive:(UIApplication *)application
{
}
//
- (void)applicationWillTerminate:(UIApplication *)application
{
}
//
@end 
```

LV_ViewController.h

```
#import <UIKit/UIKit.h>
//
@interface LV_ViewController : UIViewController {
    UIButton *button_Narr_Places;
}
//
@property (nonatomic, retain) UIButton *button_Narr_Places;
//
@end 
```

LV_ViewController.m

```
#import "LV_ViewController.h"
//
//
// - - - - - Open errors: - - - - -
/*
 a.) Local declaration of 'button_Narr_Places' hides instance variable.
 b.) If launched in Landscape, still thinks the device is in Portrait mode, and then 
 rotates to Landscape.
   Launched in Portrait
   Moved to Landscape
 c.) Can not see button once screen is rotated. How to refresh the button's "frame" position after it's updated by "willAnimateRotationToInterfaceOrientation"?
 */
// - - - - - 
@implementation LV_ViewController
//
@synthesize button_Narr_Places;
//
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}
//
- (void)viewDidLoad
{
    [super viewDidLoad];
}
//
- (void)loadView
{
    // - - Create the "view" canvas - -
    UIView *view = [[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
    view.backgroundColor = [UIColor whiteColor];

    //
    // - - - - - Create a button - - - - -
    UIButton *button_Narr_Places    = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    //
    // - - - Adjust position based on INITIAL device orientation - - -
    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    //
    if (orientation == UIDeviceOrientationPortrait || orientation == UIDeviceOrientationPortraitUpsideDown) {
        NSLog(@"Launched in Portrait");
        button_Narr_Places.frame    = CGRectMake(10, 200, 100,  40);
    }
    else if (orientation == UIDeviceOrientationLandscapeRight || orientation == UIDeviceOrientationLandscapeLeft) {
        NSLog(@"Launched in Landscape");
        button_Narr_Places.frame    = CGRectMake(50, 400, 100,  40);
    }
    // - - - Add button's title, color, selector - - -
    [button_Narr_Places setTitle:@"Places Lived" forState:UIControlStateNormal];
    button_Narr_Places.backgroundColor = [UIColor clearColor];
    button_Narr_Places.tag = 2000;
    [button_Narr_Places addTarget:self action:@selector(method_Narr_Places:) 
                 forControlEvents:UIControlEventTouchUpInside];
    //
    [view addSubview:button_Narr_Places];
    //

    // -- Create a "label" view:
    CGRect frame = CGRectMake(10, 85, 300, 20);
    UILabel *label = [[UILabel alloc] initWithFrame:frame];
    label.textAlignment = UITextAlignmentCenter;
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont fontWithName:@"Verdana" size:20];
    label.text = @"Test ViewController.";
    label.tag = 1000;
    //
    [view addSubview:label];
    [label release];
    self.view = view;
}
//
// - - - - - Method called by button above - - - - -
- (IBAction)method_Narr_Places:(id)sender
{
    NSLog(@"Entering method_Narr_Places");
}
//
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation) interfaceOrientation duration:(NSTimeInterval)duration 
{       
    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    if (orientation == UIDeviceOrientationPortrait) {
        NSLog(@"Moved to Portrait");
        //
        // [button_Narr_Places setFrame:CGRectMake( 10, 778, 100,  40)];
        button_Narr_Places.frame  = CGRectMake( 10, 200, 100,  40);
    }
    else if (orientation == UIDeviceOrientationPortraitUpsideDown) {
        NSLog(@"Moved to Portrait UpsideDown");
    }
    //
    else if (orientation == UIDeviceOrientationLandscapeRight || orientation == UIDeviceOrientationLandscapeLeft) {
        NSLog(@"Moved to Landscape");
        //
        // [button_Narr_Places setFrame:CGRectMake(778, 100, 100,  40)];
        button_Narr_Places.frame  = CGRectMake(50, 400, 100,  40);
    }

}
//
// - - - - - Boilerplate methods below - - - - -
//
- (void)viewDidUnload
{
    [super viewDidUnload];
}
//
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}
//
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}
//
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}
//
- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}
//
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}
//
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:11:40.257

在您的`LV_ViewController.m - loadView`函数中，您正在为按钮声明（本地）变量，如下所示：

```
UIButton *button_Narr_Places    = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

这将创建按钮的临时本地副本（它“隐藏”全局属性，以便您无法在此函数中访问它），然后在函数结束时将其丢弃。如果您希望以后能够引用它（例如在 中`willAnimateRotationToInterfaceOrientation`），您需要使用您在头文件中定义的属性：

```
button_Narr_Places    = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

甚至更好：

```
self.button_Narr_Places    = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

请注意，除非您有其他原因，否则您应该使用`self.`符号通过它的访问器而不是直接访问 ivar。

# c# - 将实现 NSFastEnumeration 协议的 Obj-C 类型绑定到 MonoTouch

> ID：10057343
> 
> 赞同：2
> 
> 时间：2012-04-07T18:51:54.337
> 
> 标签：c#, objective-c, xamarin.ios

我正在尝试为 ZBar 库编写 MonoTouch 绑定，但已被困在`ZBarSymbolSet`类型上。乍一看很简单：

```
@interface ZBarSymbolSet
    : NSObject <NSFastEnumeration>
{
    const zbar_symbol_set_t *set;
    BOOL filterSymbols;
}

@property (readonly, nonatomic) int count;
@property (readonly, nonatomic) const zbar_symbol_set_t *zbarSymbolSet;
@property (nonatomic) BOOL filterSymbols;

- (id) initWithSymbolSet: (const zbar_symbol_set_t*) set;

@end

@interface ZBarSymbol : NSObject
... I've left out the ZBarSymbol members, all thats important is that the ZBarSymbolSet should be an IEnumerable<ZBarSymbol>
@end 
```

但是当我开始研究如何将标准 .NET`IEnumerable`接口绑定到`NSFastEnumerator`协议实现时，问题就开始了。我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:25:30.180

所以我没有找到一种自动方法来指示 btouch 挂钩协议方法以在绑定类上`NSFastEnumerable`提供接口实现。`IEnumerable`相反，我采用了手动方法，并添加了我自己的带有 IEnumerable 实现的部分类。然后我不得不直接调用这个 Obj-C 库正在包装的 C 库！

```
public partial class ZBarSymbolSet : IEnumerable<ZBarSymbol>
{
    public IEnumerator<ZBarSymbol> GetEnumerator ()
    {
        IntPtr symbol;
        if ( FilterEnabled )
            symbol = zbar_symbol_set_first_symbol(this.InnerNativeSymbolSetHandle);
        else
            symbol = zbar_symbol_set_first_unfiltered(this.InnerNativeSymbolSetHandle);

        while ( symbol != IntPtr.Zero )
        {
            yield return new ZBarSymbol(symbol,0);
            symbol = zbar_symbol_next(symbol);
        }
    }

    IEnumerator IEnumerable.GetEnumerator ()
    {
        return GetEnumerator();
    }

    [DllImport("__Internal")]
    private extern static IntPtr zbar_symbol_next(IntPtr zBarSymbol); 

    [DllImport("__Internal")]
    private extern static IntPtr zbar_symbol_set_first_symbol(IntPtr zbarSymbolSet); 

    [DllImport("__Internal")]
    private extern static IntPtr zbar_symbol_set_first_unfiltered(IntPtr zbarSymbolSet);
} 
```

`InnerNativeSymbolSetHandle`上面用来传递给 C 函数的是我绑定在 ZBarSymbolSet 类上的一个属性，幸运的是，ZBar iPhone SDK 作者从 C ZBar 库中公开了指向底层结构的指针：

```
// @interface ZBarSymbolSet : NSObject <NSFastEnumeration>
[BaseType (typeof(NSObject))]
interface ZBarSymbolSet
{
    // @property (readonly, nonatomic) int count;
    [Export("count")]
    int Count { get; }

    // @property (readonly, nonatomic) const zbar_symbol_set_t *zbarSymbolSet;
    [Export("zbarSymbolSet")]
    IntPtr InnerNativeSymbolSetHandle{ get; }

    // @property (nonatomic) BOOL filterSymbols;
    [Export("filterSymbols")]
    bool FilterEnabled { get; set; }
} 
```

所以这是手动解决方案。
我仍然希望 btouch 有一种自动方式来做到这一点（显然不是通过这些 C 函数，而是通过挂钩协议的`countByEnumeratingWithState`函数`NSFastEnumeration`。如果 Objective-c 可以使用 Objective-c for 循环以通用方式做到这一点，那么 MonoTouch 肯定也可以自动挂钩吗？

# forms - Spring MVC 3：HTTP 状态 405 - 不支持请求方法“POST”

> ID：10057345
> 
> 赞同：1
> 
> 时间：2012-04-07T18:52:17.877
> 
> 标签：forms, spring-mvc, spring-3

我正在使用 Spring MVC 3 设置和处理表单，但是在使用 Spring MVC 3 提交表单时遇到了以前从未遇到过的问题，我无法理解其背后的原因。

当我提交表单时，我收到**HTTP 状态 405 - 不支持请求方法“POST”**错误。以下是我用来使其工作的 .jsp 表单和控制器。

**新问题.jsp**

```
<form:form  commandName="problem" >
        <form:label path="problem" >
            <span class="label">Problem <form:errors path="problem" /></span>
        </form:label>
        <form:textarea path="problem" cssClass="editor"  id="editor"/>

        <input type="submit" value="create"  />
</form:form> 
```

**问题管理控制器.java**

```
//Add new problem (GET)
@RequestMapping(method=RequestMethod.GET, value="/admin/problems/new")
public String setUpForm(Model model) {
    model.addAttribute("problem", new Problem());
    return "newProblem";
}

//Add new problem (POST)
@RequestMapping(method=RequestMethod.POST, value="/admin/problems/new")
public String processForm(@Valid Problem problem, Errors result) {
    if(result.hasErrors()) {
        return "newProblem";
    }
    problemManagementService.createProblem(problem);
    return "redirect:/admin/problems";
}

//Display all problems
@RequestMapping(value="/admin/problems")
public String displayAllProblems(Model model) {
    List<Problem> allProblems = problemManagementService.getAllProblems();

    model.addAttribute("allProblems", allProblems);
    return "allProblems";
} 
```

有人可以帮我理解为什么我会收到这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:34:21.923

您忘记在`<form:form>`标签中添加操作。

试试这个：

```
<form:form action="admin/problems/new" commandName="problem" >
        <form:label path="problem" >
            <span class="label">Problem <form:errors path="problem" /></span>
        </form:label>
        <form:textarea path="problem" cssClass="editor"  id="editor"/>

        <input type="submit" value="create"  />
</form:form> 
```

# php - 使用 SQL 将 UTC 时间戳转换为 EST 日期和时间

> ID：10057346
> 
> 赞同：2
> 
> 时间：2012-04-07T18:52:24.690
> 
> 标签：php, mysql, sql, twitter, timestamp

我从 Twitter API 下载了一堆推文。据我了解，（JSON） created_at 属性以 UTC 给出（由 +0000 表示）：

```
created_at: Fri Feb 18 21:08:38 +0000 2011 
```

在我的脚本中，我通过使用 PHP 的 strtotime 将这些日期转换为 unix 时间戳：

```
strtotime(Fri Feb 18 21:08:38 +0000 2011) = 1298063318 
```

因此，我现在有一张带有 UTC unix 时间戳的推文表：

```
id  nyse_date   nyse_time  twitter_timestamp
-------------------------------------------
1   2011-02-18  16:08:38   1298063318 
```

我收集的推文都在谈论纽约证券交易所的股票。纽约证券交易所（显然是在纽约）位于美国东部标准时间，即 UTC - 5 小时（或：18.000 秒）。因此，在 2011 年 2 月 18 日星期五 21:08:38 写在 UTC 时间的推文在 2011 年 2 月 18 日星期五 16:08:38 写在纽约证券交易所时间。因此，（见表格）1298063318 UTC 时间戳被存储转换为 EST (NYSE)日期和时间。

我现在需要对表中的所有（数百万条）推文执行此操作。我可以通过什么查询自动执行此操作？例如，当我想到 UTC 时间戳时，我会感到非常困惑

```
Fri Feb 18 02:08:38 +0000 2011 
```

在这里，nyse_date 将是 2011-02-17（不是：18）和 nyse_time 21:08:38。

我希望有一些 SQL 优点，因为这让我非常困惑（可能是不必要的，但这是我第一次使用时间戳和时区）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:10:05.700

读入数据后，更新 twitter_timestamp 字段，如

```
update mydata set twitter_timestamp = twitter_timestamp - 5 * 3600; 
```

# php - Javascript 日期对象未正确调整时区偏移

> ID：10057347
> 
> 赞同：4
> 
> 时间：2012-04-07T18:52:48.647
> 
> 标签：php, javascript, mysql, datetime, timestamp

我在一个活动网站上工作。我从本地主机上的 MySQL 数据库获取 UTC 时间，并使用 PHP 将它们回显到页面，然后使用 Javascript 将它们转换为用户的时区。出于某种原因，Javascript 给我的时间比我从 MySQL 得到的时间晚了两个小时。我自己和我的服务器都在山区标准时区，所以 Javascript 应该将日期推迟 6 小时，但日期会推迟 8 小时。即使是夏令时也只考虑一小时的差异，而不是两个。

这是用于将 PHP 时间戳转换为日期对象并以 YYYY-mm-dd HH:ii:ss 格式输出的 Javascript（使用 jQuery）：

```
function leadingzeros(string){
    if (string.toString().length == 1){
        string = "0" + string;
    }
    return string;
}

$(document).ready(function(){
    var thisdate = new Date(<?php echo (strtotime($row['start'])*1000);?>);
    $("#jsdate").html(
        thisdate.getFullYear()+"-"+leadingzeros((thisdate.getMonth()+1))+"-"+ leadingzeros(thisdate.getDate())+" "+
        leadingzeros(thisdate.getHours())+":"+leadingzeros(thisdate.getMinutes())+":"+leadingzeros(thisdate.getSeconds())
    );
}); 
```

这是文档正文的 PHP：

```
<?php
$row = mysqli_fetch_assoc($result);
echo "<ul><li>MySQL datetime object: ".$row['start']."</li>".
"<li>PHP Unix timestamp: ".strtotime($row['start'])."</li>".
"<li>PHP date string: ".date("Y-m-d H:i:s",strtotime($row['start']))."</li>".
"<li>PHP date minus 6 hours (which is our timezone offset): ".date("Y-m-d H:i:s",strtotime($row['start']) - (6*3600))."</li>".
"<li>Javascript date: <span id='jsdate'></span></li></ul>";
?> 
```

它输出：

*   MySQL 日期时间对象：2012-04-07 23:00:00
*   PHP Unix 时间戳：1333832400
*   PHP日期字符串：2012-04-07 23:00:00
*   PHP 日期减去 6 小时（这是我们的时区偏移量）：2012-04-07 17:00:00
*   Javascript日期：2012-04-07 15:00:00

我读过的所有文档都没有给出答案。为什么 Javascript 日期比 MST 中的 PHP 日期晚两个小时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:31:15.110

我只是使用此代码在 js 中提醒日期。

```
var thisdate = new Date(<?php echo (strtotime('2012-04-07 23:00:00')*1000);?>);
    alert(thisdate);
    alert(<?php echo (strtotime('2012-04-07 23:00:00')*1000);?>); 
```

我得到的是 ![在此处输入图像描述](../Images/4f34eef0ea4753300f984cfb3a7b48b2.png)

所以你有时间就 gmt .in php 和 mysql 服务器必须配置时区。所以你不必担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:32:11.277

发生这种情况的原因是因为在解析给定日期/时间时默认`strtotime()`使用该设置，因此结果会得到相应的补偿。`date.timezone`

要解决此问题，您可以将数据库中的时间戳设置`date.timezone`为或“锚定”，如下所示：`Etc/UTC`

```
strtotime("{$row['start']} GMT") 
```

# perforce - 如何在 Perforce 中删除幻像更改列表

> ID：10057349
> 
> 赞同：0
> 
> 时间：2012-04-07T18:53:20.647
> 
> 标签：perforce

昨天我们的一位远程用户通过 P4V 提交了一个变更列表。提交似乎已经成功 - 它显示在提交的选项卡中，我能够从更改列表同步文件。

但是，当我查看在 depot 视图中提交的文件时，似乎这些文件仍被标记为添加/编辑，并且它列出了挂起的更改列表以及挂起时（提交之前）的编号。但是，如果我尝试获取该更改列表的描述，我会收到“没有这样的更改列表”消息。

如何删除此幻像更改列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:36:32.603

嗯，所以您是说在一个 P4V 中您看到更改列表（我们称之为 100）已提交，但在另一个 P4V 中您看到它仍处于待处理状态？当您尝试运行类似的东西时`p4 describe -s 100`，您会得到“没有这样的更改列表”？

这只是在敲响警钟，但找出正在发生的事情的最快方法是与 Perforce Support 合作。如果您怀疑发生任何类型的数据损坏，这始终是我的建议。

# php - 从 XMLReader 打开的 simplexml 中的 CData

> ID：10057352
> 
> 赞同：3
> 
> 时间：2012-04-07T18:53:36.617
> 
> 标签：php, simplexml, xmlreader

我有一堆 XML 文件，我正在使用 XMLReader 将它们加载到我的脚本中，创建 DOM 对象，然后转换为 Simplexml。

问题是其中一个 XML 文件使用了 SIMPLEXML 忽略的 CDATA，通常使用 SIMPLEXML_LOAD_FILE 我会添加 LIBXML_NOCDATA 参数，但由于我使用的是 simplexml_import_dom，所以我无法弄清楚如何在下面的场景中忽略 CDATA。

请问有什么想法吗？

非常感谢布雷特

```
$file = 'test.xml';
$reader = new XMLReader();
$reader->open($file);       
while ($reader->read())
{
    // are we in a product?
    if ($reader->nodeType == XMLReader::ELEMENT &&
        strtolower($reader->localName) == 'product')

    {
        if (!$node = $reader->expand()) {
            //do nothing 
        }
        else {
             // expand the node into a DOMNode
        // Convert to SimpleXML via DOM, messy but SimpleXML is soo much nicer.
        $dom  = new DomDocument();
        $dom->appendChild($dom->importNode($node, true));
        $products = simplexml_import_dom($dom);

        // do whatever we want to do with the product data

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-25T06:04:18.423

您可以尝试以下方法：

```
<?php
$str = $dom->saveXML();
$product = simplexml_load_string($str, 'SimpleXMLElement', LIBXML_NOCDATA | LIBXML_NOBLANKS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:18:53.363

关于 SimpleXML 对 CDATA 节点的处理似乎存在很多混淆和错误信息。它**不会“忽略” CDATA**，它只是通过将特定节点表示为对象而不是纯字符串来记住 CDATA 中的特定节点。

如果您始终遵循将 SimpleXML 的返回值显式转换为字符串的良好做法，您应该可以很好地看到 CDATA 的内容。

有关更多信息，请参阅[http://php.net/function.simplexml-load-string.php#84365](http://php.net/function.simplexml-load-string.php#84365)

或者，`LIBXML_NOCDATA`您提到的参数可以传递给`simplexml_load_string`. 如果您出于其他原因确实需要 XMLReader，您可能可以使用`$reader->readOuterXML()`而不是通过`DOMDocument`.

# php - PHP模板引擎和CMS

> ID：10057354
> 
> 赞同：-1
> 
> 时间：2012-04-07T18:53:45.040
> 
> 标签：php, wordpress, drupal, content-management-system, template-engine

我使用 PHP 和 MySQL 开发了一个动态网站。现在我正在考虑切换到 CM`，例如 WordPress 或 Drupal。我还听说过一些关于 PHP 模板引擎的事情。谁能给我一些关于 PHP 模板和 CMS 的优缺点的见解？

如果您推荐一个 CMS，您会推荐哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:07:05.813

当您谈论模板引擎时，所有这些都意味着将 PHP 细分，这些 PHP 将被重用到单独的文件中，然后将它们包含在需要它们的其他文件中。当您的网站上的页眉和页脚在整个站点范围内保持相同（或几乎相同）时，这很有用。

当您为几乎没有或根本没有编程知识的人制作网站时，内容管理系统真的很棒。就个人而言，我使用[WordPress](http://wordpress.org)；我发现它是最容易学习的 CMS，并且拥有最大的开发者社区。其他 CMS 是 Drupal 和 Joomla！我不喜欢使用 Drupal 或 Joomla！因为我不太舒服，但我想这取决于提供的情况和开发人员的愿望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T19:16:03.367

我认为作者在谈论模板引擎，如 SMARTY 或 OPT。我更喜欢SMARTY，但还有更多。彼此非常相似，而且切换的好东西并不难。当您有开发人员和设计人员时，它们很有用，因为一个工作与逻辑文件一起工作，另一个工作与文件设计工作。或者，如果您学习了 C# 等语言的编程，或者您拥有庞大而复杂的应用程序视觉方面 (WPF) 的类似语言。

对于 CMS 系统。有时我自己写，或者我使用 Wordpress（非常好），或者 Drupal，或者使用某种框架 Kohana 或 Symphony。真的要看情况。这没有什么黄金主意。也许更精确的问题将有助于回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T19:31:27.030

首先，如果您使用 cms，您将使用模板系统。它恰好是cms提供的模板系统。

两大基于 php 的 cms 系统是 Joomla 和 Drupal。然后是博客，其中使用最多的是wordpress。

使用博客还是使用 cms 会更好，这在很大程度上取决于您正在开发的网站类型，尽管可以使用任何一种类型的平台构建一个完整的网站。

几乎在每种情况下，这些系统都存在大量学习曲线，特别是如果您打算扩展它们，或者从头开始实现自己的模板。但是，使用流行的 cms 或博客包的一个优势是，您可以在市场上以相对较少的钱购买预制模板，然后您可以调整这些模板而无需自己灌输。

[我强烈建议您花一些时间在http://www.opensourcecms.com/](http://www.opensourcecms.com/)上探索这些软件包，其中包含所有可供使用的系统的演示。

# ios5 - 自定义 UIStoryBoardSegue 以放大

> ID：10057355
> 
> 赞同：2
> 
> 时间：2012-04-07T18:53:46.107
> 
> 标签：ios5

我希望这个应用程序的 UI segues 起作用的方式是，当用户点击屏幕的一部分时，它会放大以提供屏幕该部分的详细信息，但我可能想使用不同的 uiviewcontroller 来管理它因为它会做与缩小视图控制器不同的事情。使用 UIViewController 的`transitionFromViewController:toViewController:duration:options:animations:completion:`方法和 a来做到这一点的方法是`CGAffineTransform`什么？或者还有其他我没见过的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:04:14.573

我在Turner 和 Harrington的*Learning iPad Programming中找到了一个很好的教程。*它真的帮助我了解了自定义转场是如何工作的。

[http://books.google.com/books?id=Xd5Z8K3aiIwC&q=uistoryboardsegue#v=snippet&q=(void)perform&f=false](http://books.google.com/books?id=Xd5Z8K3aiIwC&q=uistoryboardsegue#v=snippet&q=(void)perform&f=false)

你可以在谷歌图书的预览中获得它的要点，但如果你真的觉得它有用，你可能想买这本书。

# python - 点和框求解算法

> ID：10057357
> 
> 赞同：9
> 
> 时间：2012-04-07T18:53:57.897
> 
> 标签：python, algorithm

我目前正在开发一个“[点和框](http://en.wikipedia.org/wiki/Dots_and_Boxes)”程序，其中输入由计算机自动生成，我们的输出就是我们将要采取的行动。我将与另一位玩家（他们的算法）竞争。

我将点和框板表​​示为 Python 中的矩阵。赢得比赛是重中之重：算法效率并不那么重要。

在给定棋盘的情况下，是否有一种最好的、不复杂的算法来自动计算出我们应该采取什么行动？

PS - 如果你愿意，你不需要在代码中给我任何东西......英文算法是完全可以接受的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-12T18:43:45.683

我认为极小极大不是点盒算法的最佳选择。关于这个游戏的完整故事，你真的需要阅读[Elwyn R. Berlekamp的书](http://math.berkeley.edu/~berlek/cgt/dots.html)[*The Dots and Boxes Game: Sophisticated Child's Play*](http://math.berkeley.edu/~berlek/cgt/dots.html)，但我会在这里给你一个简短的总结。

Berlekamp 提出了许多有力的意见。第一个是*双重交叉策略*，我假设你知道（它在[游戏的维基百科页面中有](http://en.wikipedia.org/wiki/Dots_and_Boxes#Strategy)描述）。

二是*长链奇偶校验规则*。这是从大多数出色游戏的三个事实得出的：

1.  长链将在游戏结束时上演。
2.  除最后一条外，每条链中都会有一个双叉。
3.  首先必须在任何长链中玩的玩家输掉了游戏。

加上你开始的点数加上双叉的数量等于游戏中的回合数的限制。所以如果开始有十六个点，并且有一个双十字，那么就会有十七个回合。（在大多数游戏中，这意味着第一个玩家将获胜。）

这极大地简化了对游戏中期位置的分析。例如，考虑这个有 16 个点和 11 步棋的局面（Berlekamp 书中的问题 3.3）。这里最好的举动是什么？

![伯莱坎普问题 3.3](../Images/96c61e00da116a587edc83c507e63997.png)

好吧，如果有两条长链，就会有一个双叉，游戏将在另外六步（16 + 1 = 11 + 6）之后结束，走棋的玩家将输。但如果只有一条长链，就不会出现双叉，游戏将在另外五步（16 + 0 = 11 + 5）后结束，走棋的玩家获胜。那么玩家移动如何保证只有一条长链呢？唯一获胜的举动牺牲了两个盒子：

![获胜的举动](../Images/2964fe2d076cbc90e22669a529c15e0d.png)

Minimax 会发现这一举措，但需要做更多的工作。

第三个也是最有力的观察是点和盒子是一种[*不偏不倚的游戏*](http://en.wikipedia.org/wiki/Impartial_game)：无论轮到谁玩，以及在游戏过程中出现的典型位置（即包含*长链*的位置），可用的移动都是相同的盒子）这也是一个[*正常的游戏*](http://en.wikipedia.org/wiki/Normal_play_convention)：最后移动的玩家获胜。这些属性的组合意味着可以使用[Sprague-Grundy 理论](http://en.wikipedia.org/wiki/Sprague%E2%80%93Grundy_theorem)静态分析位置。

下面是一个使用 Berlekamp 书中的图 25 来说明这种方法的强大功能的示例。

![带有长链的点和框位置](../Images/427c3802810bd0fad19d7bce292c1bd3.png)

在这个位置有 33 种可能的移动，一个玩得好的游戏会持续大约 20 多个移动，所以如果 minimax 在合理的时间内完成分析是可行的，我会感到惊讶。但是该位置有一个*长链*（上半部分的六个正方形链），因此可以静态分析。该位置分为三个部分，其值为[*nimbers*](http://en.wikipedia.org/wiki/Nimber)：

![位置分析成数字](../Images/de583f769280d756dac6397a755e0f65.png)

*对于剩余n*步的位置，可以通过动态规划在时间 O(2 ^(*n*) )中计算这些 nimber ，并且无论如何您可能希望缓存许多常见小位置的结果。

 *Nimbers 使用异或相加：*1 + *4 + *2 = *7。因此，唯一获胜的举动（将 nim-sum 减少到 *0 的举动）是将 *4 更改为 *3（因此头寸总和为 *1 + *3 + *2 = *0）。三个虚线红色动作中的任何一个都会获胜：

![制胜法宝](../Images/9c6896aff8cd402f0042b19488b913c7.png)

* * *

编辑补充：我知道这个总结并没有真正构成这样的*算法*，并且留下了很多没有答案的问题。对于一些答案，您可以阅读 Berlekamp 的书。但在开局方面有一点差距：链数和斯普拉格-格兰迪理论实际上只在中局和残局中实用。对于开幕式，你需要尝试一些新的东西：如果是我，我很想尝试[*蒙特卡洛树搜索*](http://senseis.xmp.net/?MonteCarlo)，直到可以数出链条。这种技术为围棋游戏创造了奇迹，在这里也可能很有成效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-18T22:32:03.997

我认为[Gareth](https://stackoverflow.com/users/68063/gareth-rees)上面的答案非常好，但只是补充一下（我没有任何声誉可以添加评论），根据以下内容，点和框（至少通过草图）被证明是 np-hard： [arxiv。 org/pdf/cs/0106019v2.pdf](http://arxiv.org/pdf/cs/0106019v2.pdf)

我写了一个 javascript 版本的点和框，试图结合上面提到的策略[dotsandboxes.org](http://dotsandboxes.org)。它不是最好的（尚未包含 Gareth 提到的所有技术），但图形很好，它击败了大多数人类和其他实现 :) 随意查看代码，还有其他一些其他链接人民版的游戏，你可以训练你的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-07T18:57:59.420

这个游戏是[**零和游戏**](http://en.wikipedia.org/wiki/Zero%E2%80%93sum_game)，所以我建议使用[**min-max 算法**](http://en.wikipedia.org/wiki/Minimax)。[深蓝](http://en.wikipedia.org/wiki/Deep_Blue_%28chess_computer%29)使用该算法在国际象棋中赢得卡斯帕罗夫。

创建您的启发式函数，它评估游戏的每个状态，并将其用作 min-max 算法的评估函数。

您还可以通过使用[alpha-beta prunning](http://en.wikipedia.org/wiki/Alpha-beta_pruning)来提高 min-max 。

min-max 的想法是**彻底搜索所有可能的移动**[通常到一定深度，因为你需要经过的状态在深度的数量上是指数级的]，并选择最好的移动，假设你的对手也要去做出他最好的举动。

ps

> 赢得比赛是重中之重：算法效率并不那么重要。

它们紧密相连，因为您的算法越高效，您将能够检查可能的解决方案，以获得更好的深度，并且您获胜的机会就越大。请注意，在无限时间的情况下，您可以探索整个游戏树并从每个游戏状态中提出获胜策略。然而——探索整个游戏树可能是不现实的。*

# database - 使用 Playframework 2.0 和 Ebean 进行多数据库管理

> ID：10057362
> 
> 赞同：1
> 
> 时间：2012-04-07T18:54:16.613
> 
> 标签：database, playframework, playframework-2.0, ebean

我是第一次使用 Playframework，使用 2.0。我在配置两个要使用 Eebean ORM（集成到 Play）管理的数据库时遇到了麻烦。参考这个[文档页面](http://www.playframework.org/documentation/2.0/JavaEbean)，我想出了：

conf/application.conf

```
db.global.driver="com.mysql.jdbc.Driver"
db.global.url="mysql://root:root@localhost/phdcoursedb"

# In the developement environment this might even change backend
db.statistics.driver="com.mysql.jdbc.Driver" 
db.statistics.url="mysql://root:root@localhost/statistics"

ebean.global="models.global.*"
ebean.statistics="models.statistics.*" 
```

我在 models.globals 和 models.statistics 包中编写了相应的模型。当我运行应用程序时，evolution 系统要求我升级（使用 Ebean DDL 生成的文件）。问题是，对于两个数据库，它都向我建议了一个包含所有模型（在 models.global 和 models.statistics 中）的进化 sql 脚本。

问题是，我想为第二个数据库保留 Ebean DDL（我实际上并不需要它用于另一个数据库，它是一个遗留的不可触及的数据库），但我希望它只构建正确的表。

你能看出我做错了什么吗？其实我并没有深入探究Ebean文档，因为它总是引用一些我不知道在哪里找到的配置文件，如Play！本身嵌入了 Ebean。

非常感谢

戴维德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:15:01.980

看`/framework/src/play/src/main/java/play/db/ebean/EbeanPlugin.java`

正如我在代码中看到的，如果您的模型列表以星号结尾，它将获取所有模型，因此您只需为每个基础提供一个逗号分隔的模型列表。

# php - RSS 输出中的奇数字符

> ID：10057363
> 
> 赞同：0
> 
> 时间：2012-04-07T18:54:25.417
> 
> 标签：php, rss, content-type, simple-html-dom

我使用 simple_html_dom.php 库从各种网页生成 RSS 提要。出于某种原因，我在 RSS 输出中出现了奇怪的字符。

例如，我正在抓取的网页包含以下 HTML：

```
WinJS – Comment utiliser les resources (et faire de la localization en bonus) | Communauté des Développeurs Windows 8 
```

但在我的 RSS 提要中，它们显示为：

```
WinJS â€“ Comment utiliser les resources (et faire de la localization en bonus) | CommunautÃ© des DÃ©veloppeurs Windows 8 
```

我输出的 RSS 使用以下标头：

```
header("Content-Type: application/rss+xml; charset=ISO-8859-1"); 
```

我可以以某种方式正确显示文本吗？

# android - Android客户端强制关闭

> ID：10057367
> 
> 赞同：0
> 
> 时间：2012-04-07T18:54:44.100
> 
> 标签：android, tcp

我是 android 新手，想知道是否有人可以帮助我，这是我拥有的代码。

```
import java.io.*;
import java.net.*;
import android.app.*;
import android.util.Log;
import android.os.*;
import android.view.*;

public class MainActivity extends Activity
  {
  @Override
  public void onCreate(Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    try
      {
      Socket TestSocket = new Socket("96.29.64.93",2215);
      OutputStream writer = TestSocket.getOutputStream();
      writer.write(new byte[]{1});
      writer.flush();

      InputStream reader = TestSocket.getInputStream();
      byte array[] = new byte[1];
      int i = reader.read(array);
      }catch(IOException ex)
        {
        Log.e("TcpTest","Error",ex);
        }
     }
   } 
```

编辑：在清单应用程序强制关闭此处设置的互联网权限是 logcat。 [http://i43.tinypic.com/25tc1o7.png](http://i43.tinypic.com/25tc1o7.png)

如果我取消互联网权限，它不会强制关闭。

并感谢到目前为止所有已在此处发布的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:02:20.057

您正在尝试在 UI 线程上建立连接，而 ICS 正在使您的应用程序崩溃（因为尝试在 UI 线程上连接到 Web 服务器几乎肯定会保证您的应用程序无法正常运行）。确保您使用`AsyncTask`或 进行连接`Thread`。

* * *

### 编辑：

你要求澄清一下，所以就这样吧。来自开发者网站上的一篇 Android[文章](http://developer.android.com/resources/articles/painless-threading.html)：

> 启动应用程序时，系统会为该应用程序创建一个名为“main”的线程。主线程，也称为 UI 线程，非常重要，因为它负责将事件分派给适当的小部件，包括绘图事件。它也是您的应用程序与正在运行的 Android UI 工具包组件交互的线程。
> 
> 例如，如果您触摸屏幕上的 a 按钮，UI 线程会将触摸事件分派给小部件，然后小部件设置其按下状态并将无效请求发送到事件队列。UI 线程将请求出列并通知小部件重绘自身。
> 
> 除非您的应用程序正确实现，否则这种单线程模型可能会产生较差的性能。具体来说，如果一切都发生在单个线程中，在 UI 线程上执行网络访问或数据库查询等长时间操作将阻塞整个用户界面。长时间操作正在进行时，不能分派任何事件，包括绘图事件。从用户的角度来看，应用程序似乎挂起。更糟糕的是，如果 UI 线程被阻塞超过几秒（目前大约 5 秒），用户会看到臭名昭著的“应用程序无响应”（ANR）对话框。

这适用于您的情况，因为尝试在客户端和服务器之间建立套接字连接会*阻塞*UI 线程——在建立连接之前，用户根本无法与屏幕交互（这不会在 Android 市场中获得太多好评 :P)。因此，在单独的线程上执行潜在的昂贵/长期操作非常重要。最简单的方法是使用 an `AsyncTask`，它非常容易实现并且本质上抽象了`Thread`s 的整个概念，因此您不必担心它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:00:05.597

如果你移动`setContentView`上面的`try`语句呢？

# java - 如何更换战斧 和 带有标准 JSF 标签的标签？

> ID：10057371
> 
> 赞同：1
> 
> 时间：2012-04-07T18:55:57.737
> 
> 标签：java, jsf, jsf-2, tomahawk

我找到[了这个](http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html)JSF 教程，它展示了如何使用分页和排序创建 JSF 表

```
<%@taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@taglib uri="http://myfaces.apache.org/tomahawk" prefix="t"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<f:view>
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <title>Effective datatable paging and sorting at DAO level</title>
        </head>
        <body>
            <h:form id="form">

                <%-- The sortable datatable --%>
                <h:dataTable value="#{myBean.dataList}" var="item">
                    <h:column>
                        <f:facet name="header">
                            <h:commandLink value="ID" actionListener="#{myBean.sort}">
                                <f:attribute name="sortField" value="id" />
                            </h:commandLink>
                        </f:facet>
                        <h:outputText value="#{item.id}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:commandLink value="Name" actionListener="#{myBean.sort}">
                                <f:attribute name="sortField" value="name" />
                            </h:commandLink>
                        </f:facet>
                        <h:outputText value="#{item.name}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:commandLink value="Value" actionListener="#{myBean.sort}">
                                <f:attribute name="sortField" value="value" />
                            </h:commandLink>
                        </f:facet>
                        <h:outputText value="#{item.value}" />
                    </h:column>
                </h:dataTable>

                <%-- The paging buttons --%>
                <h:commandButton value="first" action="#{myBean.pageFirst}"
                    disabled="#{myBean.firstRow == 0}" />
                <h:commandButton value="prev" action="#{myBean.pagePrevious}"
                    disabled="#{myBean.firstRow == 0}" />
                <h:commandButton value="next" action="#{myBean.pageNext}"
                    disabled="#{myBean.firstRow + myBean.rowsPerPage >= myBean.totalRows}" />
                <h:commandButton value="last" action="#{myBean.pageLast}"
                    disabled="#{myBean.firstRow + myBean.rowsPerPage >= myBean.totalRows}" />
                <h:outputText value="Page #{myBean.currentPage} / #{myBean.totalPages}" />
                <br />

                <%-- The paging links --%>
                <t:dataList value="#{myBean.pages}" var="page">
                    <h:commandLink value="#{page}" actionListener="#{myBean.page}"
                        rendered="#{page != myBean.currentPage}" />
                    <h:outputText value="<b>#{page}</b>" escape="false"
                        rendered="#{page == myBean.currentPage}" />
                </t:dataList>
                <br />

                <%-- Set rows per page --%>
                <h:outputLabel for="rowsPerPage" value="Rows per page" />
                <h:inputText id="rowsPerPage" value="#{myBean.rowsPerPage}" size="3" maxlength="3" />
                <h:commandButton value="Set" action="#{myBean.pageFirst}" />
                <h:message for="rowsPerPage" errorStyle="color: red;" />

                <%-- Cache bean with data list, paging and sorting variables for next request --%>
                <t:saveState value="#{myBean}" />
            </h:form>
        </body>
    </html>
</f:view> 
```

这个表可以在没有`Tomahawk`库的情况下使用吗？我想尽可能多地使用干净的 JSF？可以仅使用标准 JSF 标记编辑此代码而不更改分页和排序吗？

最良好的祝愿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:10:09.673

那篇旧文章针对的是 JSF 1.x，并且代码旨在与请求范围的 bean 一起使用。确保请求范围的`<t:saveState>`bean 保留在下一个 POST 请求中，就像新的 JSF 2.x 视图范围所做的一样（因此标准 JSF 1.x 中还不存在）。会话范围不是一个选项，因为它会导致不直观的行为和“wtf？” 最终用户在多个浏览器窗口/选项卡中打开相同页面的情况，因此每个基于请求的操作都会影响同一页面在另一个窗口/选项卡中的行为，以及当最终用户在它们之间切换并在它们上调用基于请求的操作时.

对于 JSF 2.x，`<t:saveState>`可以通过将 bean 放入视图范围而不是通过标记它来替换请求范围`@ViewScoped`。

```
@ManagedBean
@ViewScoped
public class MyBean {
    // ...
} 
```

另请注意，本文使用的是旧的 JSP 视图技术。从 JSF 2.0 开始，Facelets 就继承了这一点。您还想用 Facelets 替换 JSP。通过顶级标记（`<html>`标记）中通常的 XML 命名空间声明删除这些 JSP 标记库，并将文件从 重命名`.jsp`为`.xhtml`. 这样您就可以替换JSP`<t:dataList>`中`<ui:repeat>`不存在的。

```
<ui:repeat value="#{myBean.pages}" var="page">
    ...
</ui:repeat> 
```

# javascript - Python：解析类似 JSON 的 Javascript 数据结构（带连续逗号）

> ID：10057375
> 
> 赞同：2
> 
> 时间：2012-04-07T18:56:27.377
> 
> 标签：javascript, python, json, parsing

我想解析类似 JSON 的字符串。它们与普通 JSON 的唯一区别是数组中存在*连续的逗号*。当有两个这样的逗号时，它隐含地表示`null`应该在中间插入。例子：

```
 JSON-like:  ["foo",,,"bar",[1,,3,4]]
      Javascript:  ["foo",null,null,"bar",[1,null,3,4]]
Decoded (Python):  ["foo", None, None, "bar", [1, None, 3, 4]] 
```

本机`json.JSONDecoder`类不允许我更改数组解析的行为。我只能修改对象（字典）、整数、浮点数、字符串的解析器（通过将 kwargs 函数赋予给`JSONDecoder()`，请参阅[文档](http://docs.python.org/library/json.html#json.JSONDecoder)）。

那么，这是否意味着我必须从头开始编写 JSON 解析器？的 Python 代码`json`是可用的，但它相当混乱。我宁愿使用它的内部结构而不是复制它的代码！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T19:11:38.973

由于您要解析的不是 JSON*本身*，而是一种与 JSON 非常相似的不同语言，因此您可能需要自己的解析器。

幸运的是，这并不像听起来那么难。您可以使用 Python 解析器生成器，例如[pyparsing](http://pyparsing.wikispaces.com/)。JSON 可以使用相当简单的上下文无关语法（我在[此处](http://www.xerial.org/svn/project/XerialJ/trunk/xerial-core/src/main/java/org/xerial/json/impl/JSON.g)找到）来完全指定，因此您应该能够对其进行修改以满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T19:06:22.160

尝试小而简单的解决方法：

1.  将类似 JSON 的数据转换为字符串。
2.  将“,”替换为“,null”。
3.  将其转换为您的代表。
4.  让 JSONDecoder() 完成繁重的工作。

    1.  & 3\. 如果你已经处理过字符串，可以省略。

（如果转换为字符串不切实际，请使用此信息更新您的问题！）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T19:22:38.387

您可以通过使用后向表达式一次性替换[Lattyware 的](https://stackoverflow.com/a/10057518/344821)/ [przemo_li 的](https://stackoverflow.com/a/10057449/344821)答案，即“替换所有以逗号开头的逗号”：

```
>>> s = '["foo",,,"bar",[1,,3,4]]'

>>> re.sub(r'(?<=,)\s*,', ' null,', s)
'["foo", null, null,"bar",[1, null,3,4]]' 
```

请注意，这适用于您可以假设字符串文字中没有连续逗号的小事情，例如。一般来说，正则表达式不足以处理这个问题，而[Taymon](https://stackoverflow.com/a/10057494/344821)使用真正解析器的方法是唯一完全正确的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T20:41:23.753

我查看了 Taymon 的推荐，pyparsing，并成功破解了[此处](http://pyparsing.wikispaces.com/file/view/jsonParser.py)提供的示例以满足我的需要。它在模拟 Javascript 方面效果很好，`eval()`但**在一种情况下失败了**：尾随逗号。应该有一个可选的尾随逗号——参见下面的测试——但我找不到任何合适的方法来实现它。

```
from pyparsing import *

TRUE = Keyword("true").setParseAction(replaceWith(True))
FALSE = Keyword("false").setParseAction(replaceWith(False))
NULL = Keyword("null").setParseAction(replaceWith(None))

jsonString = dblQuotedString.setParseAction(removeQuotes)
jsonNumber = Combine(Optional('-') + ('0' | Word('123456789', nums)) +
                    Optional('.' + Word(nums)) +
                    Optional(Word('eE', exact=1) + Word(nums + '+-', nums)))

jsonObject = Forward()
jsonValue = Forward()
# black magic begins
commaToNull = Word(',,', exact=1).setParseAction(replaceWith(None))
jsonElements = ZeroOrMore(commaToNull) + Optional(jsonValue) + ZeroOrMore((Suppress(',') + jsonValue) | commaToNull)
# black magic ends
jsonArray = Group(Suppress('[') + Optional(jsonElements) + Suppress(']'))
jsonValue << (jsonString | jsonNumber | Group(jsonObject) | jsonArray | TRUE | FALSE | NULL)
memberDef = Group(jsonString + Suppress(':') + jsonValue)
jsonMembers = delimitedList(memberDef)
jsonObject << Dict(Suppress('{') + Optional(jsonMembers) + Suppress('}'))

jsonComment = cppStyleComment
jsonObject.ignore(jsonComment)

def convertNumbers(s, l, toks):
    n = toks[0]
    try:
        return int(n)
    except ValueError:
        return float(n)

jsonNumber.setParseAction(convertNumbers)

def test():
    tests = (
        '[1,2]',       # ok
        '[,]',         # ok
        '[,,]',        # ok
        '[  , ,  , ]', # ok
        '[,1]',        # ok
        '[,,1]',       # ok
        '[1,,2]',      # ok
        '[1,]',        # failure, I got [1, None], I should have [1]
        '[1,,]',       # failure, I got [1, None, None], I should have [1, None]
    )
    for test in tests:
        results = jsonArray.parseString(test)
        print(results.asList()) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T19:14:54.630

这是一种骇人听闻的做法，但一种解决方案是简单地对 JSON-ish 数据进行一些字符串修改，以便在解析之前使其符合要求。

```
import re
import json

not_quite_json = '["foo",,,"bar",[1,,3,4]]'
not_json = True
while not_json:
    not_quite_json, not_json = re.subn(r',\s*,', ', null, ', not_quite_json) 
```

这给我们留下了：

```
'["foo", null, null, "bar",[1, null, 3,4]]' 
```

然后我们可以这样做：

```
json.loads(not_quite_json) 
```

给我们：

```
['foo', None, None, 'bar', [1, None, 3, 4]] 
```

请注意，它不像替换那么简单，因为替换还会插入可能需要替换的逗号。鉴于此，您必须循环访问，直到无法进行更多替换。在这里，我使用了一个简单的正则表达式来完成这项工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-08T11:37:23.427

对于那些寻找快速而肮脏的东西来转换一般 JS 对象（到 dicts）的人。一个真实站点的页面的某些部分给了我一些我想处理的对象。日期有“新”结构，它在一行中，中间没有空格，所以两行就足够了：

```
data=sub(r'new Date\(([^)])*\)', r'\1', data)
data=sub(r'([,{])(\w*):', r'\1"\2":', data) 
```

然后 json.loads() 工作正常。你的旅费可能会改变：）

# iphone - 在真实 iPhone 上测试时对象序列化不起作用（在模拟器中工作）

> ID：10057376
> 
> 赞同：0
> 
> 时间：2012-04-07T18:56:33.837
> 
> 标签：iphone, objective-c, serialization

我有一个应用程序，我在退出（或进入后台）之前将数据保存到文件中，并在重新启动应用程序时恢复从文件中读取的数据。问题是这在模拟器上完美运行，但在真实设备上却不行。这是我用来获取路径的代码（在 applicationDidFinishLaunching 上）：

```
NSString *path=[[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]stringByAppendingString:@"archive"];
NSLog(@"Reading from filePath:%@",path);
if ([[NSFileManager defaultManager]fileExistsAtPath:path])
{
    //Init data from file
}
else
{
    //Present the view where the users has to enter info for the first time (this is what always gets executed)
} 
```

这是我用来保存数据的代码（在 applicationDidEnterBackground 上）：

```
NSString *path=[[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]stringByAppendingString:@"archive"];
 NSLog(@"Reading from filePath:%@",path);
NSMutableData *data=[[NSMutableData alloc]init];
//Put info to save in data
[data writeToFile:path atomically:YES]; 
```

我检查了 iphone 的控制台，在加载信息时它打印的是一个看起来正常的目录（我这里没有设备，所以我不能发布确切的目录），然后我看到一个拒绝文件写入- 创建这样的错误：

```
unknown sandboxd[1332] <Notice>: AppName(1328) deny file-write-create 
```

当我再次访问该设备时（明天），我将使用打印的确切目录更新帖子。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:11:07.980

尝试使用`stringByAppendingPathComponent`而不是`stringByAppendingString`

```
NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"archive"]; 
```

# java - Java：为选定列提供汇总统计信息的代码示例

> ID：10057379
> 
> 赞同：0
> 
> 时间：2012-04-07T18:56:48.233
> 
> 标签：java, jtable, jtableheader

我正在编写一个程序来对从`csv`文件或数据库导入的数据进行一些统计分析。我可以将数据加载到 a 中`jTable`并显示，但我正在为下一步而苦苦挣扎。

我希望能够单击列标题并将列内容的摘要统计信息显示在面板侧面的标签中`jTable`（见图）。

![在此处输入图像描述](../Images/409dad4ae6962b3ee14661a87fcd3063.png)

任何人都可以建议查看类似项目的方法或示例代码吗？任何帮助，将不胜感激。

编辑：我在 netbeans 中这样做。通常在 netbeans 中，我只需在设计模式下单击组件，然后通过右键单击添加侦听器，然后在源选项卡上填写代码。但是，当在设计选项卡中不可见时，我不确定如何将侦听器添加到表或标题中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:02:17.717

```
JTable table = ...
TableColumnModel columnModel = table.getColumnModel();
columnModel.add(new TableColumnModelListener() {
    // other methods
    public void columnSelectionChanged(ListSelectionEvent e) {
        // user selected or deselected a column, change summary as necessary
    }
} 
```

[`TableColumnModel`参考](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableColumnModel.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:30:07.457

对于监听器部分，我使用了这里的信息：

[在 JTable 组件中侦听对列标题的点击](http://www.exampledepot.com/egs/javax.swing.table/ColHeadEvent.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T20:32:15.193

因此，问题有两个部分：-

1.  选择列时要执行的事件处理程序。

2.  获取摘要的代码。

对于第一个（事件处理程序），您可以参考@Jeffrey 的回答。对于摘要部分，您可以编写如下方法：

```
/* Method to return values in a column of JTable as an array */

public Object[] columnToArray(JTable table, int columnIndex){
    // get the row count
    int rowCount = table.getModel().getRowCount();
    // declare the array
    Object [] data = new Object[rowCount];
    // fetch the data
    for(int i = 0; i < rowCount; i++){
        data[i] = table.getModel().getValueAt(i, columnIndex);        
    }
    return(data);
} 
```

从事件处理程序内部调用此方法，如下所示：

```
public void columnSelectionChanged(ListSelectionEvent e) {
    //assuming single column is selected
    Object[] data = columnToArray(table,table.getSelectedColumn());
   /* type cast if using specific data type. for eg:
    * Integer[] data = (Integer[]) columnToArray(table,table.getSelectedColumn());
    */
    // other functions to create the summary
} 
```

对象数组可用于计算您需要的摘要，例如查找范围、标准偏差等。这些应该是微不足道的。请记住在调用方法中对 Object 数组进行类型转换。

# css - 我可以剥离 CSS 文件的所有内容吗？

> ID：10057381
> 
> 赞同：0
> 
> 时间：2012-04-07T18:56:59.597
> 
> 标签：css, wordpress, textmate

我想剥离所有样式，但将所有选择器保留在 WordPress 的 TwentyEleven 主题中，所以基本上是文件中 {} 之间的任何内容。最好使用 Textmate，但任何指导都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:04:24.640

TextMate 支持多行正则表达式，因此您应该能够匹配 and 中的所有内容`{`，`}`包括换行符，并替换它们。

我从来没有使用过 TextMate，但浏览他们的[文档](http://manual.macromates.com/en/regular_expressions)表明这应该是可能的。

正则表达式可能类似于：

```
(?m{[^}]*}) 
```

替换为

```
{ } 
```

注意：`?m`打开多行匹配 - 请参阅我链接的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:01:15.893

[也许您想做的是正则表达式搜索。](http://manual.macromates.com/en/regular_expressions) 这也应该向您展示如何使用 TextMate 进行此类搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:02:32.100

如果 Textmate 支持正则表达式替换，那么您可以替换`\{.*\}`与`{}`. 应该做的伎俩:)

# java - 如何测量 C/C++/Java 程序在执行期间使用的内存？

> ID：10057382
> 
> 赞同：4
> 
> 时间：2012-04-07T18:57:07.720
> 
> 标签：java, c++, c, memory, memory-management

我正在尝试创建像[spoj.pl](http://spoj.pl)这样的编程法官。我必须测量 C/C++/Java 程序正在使用的时间和内存。我想为我希望执行的程序设置最大内存限制。你能建议我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:07:15.937

为了分析时间和内存消耗，您可以使用 callgrind：http: [//valgrind.org/docs/manual/cl-manual.html](http://valgrind.org/docs/manual/cl-manual.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T02:27:30.890

系统-, where-, how-, what-,...- 依赖。

* * *

限制，即：

Linux 命令行： > `$ ulimit -v NNN && ./tha_prog`, `$ man ulimit`, `$ ulimit -a`.

Linux C 编码：> `setrlimit()`linux.die: [setrlimit](http://linux.die.net/man/2/setrlimit) , opengroup: [setrlimit](http://pubs.opengroup.org/onlinepubs/9699919799/functions/setrlimit.html)

Windows: `CreateJobObject`,[作业对象](http://msdn.microsoft.com/en-us/library/ms684161%28VS.85%29.aspx)

那么问题也变成了限制什么。静态库与动态库等。

* * *

要配置文件：

Valgrind 与 callgrind，- 和即[kcachegrind](http://kcachegrind.sourceforge.net/html/Home.html)，+++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T00:36:44.417

在 Windows 上，您可以使用[jobs](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684161%28v=vs.85%29.aspx)，它们是内核对象，允许您对当前不在另一个作业中的任何进程进行沙箱处理。您可以应用所有不同类型的限制，包括最大处理时间和内存/工作集限制。

有几个步骤
1\. 调用[`CreateJobObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682409%28v=vs.85%29.aspx)以获取内核对象的句柄
2\. 调用[`SetInformationJobObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686216%28v=vs.85%29.aspx)以设置您的限制
3\. 创建一个要对其施加限制的挂起进程
4.[`AssignProcessToJobObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681949%28v=vs.85%29.aspx)使用作业和进程句柄调用
5\. 恢复通过调用进程的主线程`ResumeThread`

# c - 使用 C 的 RPCGEN 介绍 - 无法创建客户端

> ID：10057388
> 
> 赞同：0
> 
> 时间：2012-04-07T18:57:44.000
> 
> 标签：c, rpc

我正在尝试创建一个示例 RPC 程序以了解更多信息。它所做的只是承认我手头有一个工作的 RPC 程序，然后再开始进一步干预它。在提到我的问题之前，这里是我的代码，它非常简单：

```
/* myrpc.x file*/
program MESSAGEPROG {
   version EVALMESSAGEVERS {
     int EVALMESSAGE(string) = 1;
   } = 1;
} = 0x20000002; 
```

远程方法如下：

```
/* Remote method on a .c file */
#include <stdio.h>
#include "myrpc.h" 

int * evalmessage_1_svc(char **msg, struct svc_req *req)

{
    static int result = 0;
    printf("Message is: %s,\n",*msg);
    return (&result);
} 
```

最后，测试文件如下：

```
#include <stdio.h>
#include "myrpc.h" 

main(int argc, char **argv)

{
    CLIENT * clnt;
    char * server;
    char * msg;

    server = argv[1];
    msg = argv[2];

    clnt = clnt_create(server, MESSAGEPROG, EVALMESSAGEVERS, "visible");
    if (clnt == (CLIENT *)NULL) { printf("Failure\n"); }

    int * answer;
    answer = evalmessage_1(&msg,clnt);

    clnt_destroy(clnt);
    exit(0); 
```

}

我的问题是，我得到输出：“失败”，表明我无法创建客户端。我使用 ubuntu/linux 作为我的平台并使用 C 作为我的编程语言。构建项目时我没有遇到问题。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:06:23.040

在有问题的行：

```
clnt = clnt_create(server, MESSAGEPROG, EVALMESSAGEVERS, "visible"); 
```

将最后一个参数更改为“udp”对我有用。

```
clnt = clnt_create(server, MESSAGEPROG, EVALMESSAGEVERS, "udp"); 
```

# jquery - 如何强制后退按钮不在 jQuery Mobile 中缓存？

> ID：10057390
> 
> 赞同：1
> 
> 时间：2012-04-07T18:58:04.943
> 
> 标签：jquery, jquery-mobile

当用户登录我的 jQuery Mobile 应用程序并按下自动生成的后退按钮时，他们会返回登录屏幕。如何防止这种影响？

我尝试使用此代码来防止缓存（我从这个问题中发现：[How do dos one disable Caching in jQuery Mobile UI](https://stackoverflow.com/questions/4660934/how-does-one-disable-caching-in-jquery-mobile-ui)）。

```
jQuery('div').live('pagehide', function(event, ui){
  var page = jQuery(event.target);

  if(page.attr('data-cache') == 'never'){
    page.remove();
  };
}); 
```

此代码确实可以防止缓存。但是，由于某种原因，它破坏了我的表单中的所有弹出、多个选择选项框，这些选项框依赖于 pagehide 事件。因此，我无法使用它。

什么是防止用户在登录并单击返回后进入登录屏幕的可靠方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:51:35.853

问题不在于缓存。它是 JQM 使用 history.replaceState 在 ajax 环境中跟踪导航的方式。阅读更多>> [http://jquerymobile.com/demos/1.1.0-rc.2/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.1.0-rc.2/docs/pages/page-navmodel.html)

您可以用自己的后退按钮替换自动生成的后退按钮。IE

```
<div data-role="header">
    <a data-role="button" data-icon="arrow-l" class="back">back</a>
    <h1>Page after login</h1>
</div> 
```

然后将单击绑定到该按钮以使用 window.history.go(-2) 导航回历史记录中的 2 页。IE

```
$(document).delegate('.back','click',function(){
    window.history.go(-2);
});​​​​​​​​​​​​​​​ 
```

另请注意，默认情况下，JQM 的 ajax 历史系统不会跟踪对话框页面。因此，如果您有某种类型的 ajax 登录系统，它包含在一个对话框页面中，它就不会被插入到历史记录中。而且您自动生成的后退按钮可以正常工作。这是假设您没有禁用 ajax。祝大卫好运，希望对您有所帮助！

# c++ - C++ AVL 树实现

> ID：10057391
> 
> 赞同：1
> 
> 时间：2012-04-07T18:58:24.023
> 
> 标签：c++, pointers, binary-search-tree, treenode, avl-tree

我正在尝试实现 AVL。这是我的插入、balance_tree、check_bf（平衡因子）和单左旋转函数的顺序：

```
BinaryNode *BinarySearchTree::insert(int x,BinaryNode *t, int dpt) throw(DuplicateItem)
{
    if (t == NULL) t = new BinaryNode(x,NULL,NULL,dpt+1);
    else if (x < t->element) t->left = insert(x, t->left, dpt+1);
    else if (x > t->element) t->right = insert(x, t->right, dpt+1);
    else
        throw DuplicateItem();
    balance_tree(t);
    return t;
}
BinaryNode* BinarySearchTree::balance_tree(BinaryNode *t)
{
    double debug = check_BF(t);
    while(check_BF(t)>1 || check_BF(t)<-1)
    {
        if(check_BF(t)>1)
        {
            if(check_BF(t->right)<-1) return doubleLeft(t);
            else return singleLeft(t);
        }
        else if(check_BF(t)<-1)
        {
            if(check_BF(t->left)>1) return doubleRight(t);
            else return singleRight(t);
        }
    }
}
double BinarySearchTree::check_BF(BinaryNode *t)
{
    double l, r;
    if(t->left!=NULL) l = t->height(t->left)+1;
    else l=0;

    if(t->right!=NULL) r = t->height(t->right)+1;
    else r=0;

    return r-l;
}
BinaryNode* BinarySearchTree::singleLeft(BinaryNode *t)
{
    BinaryNode* Y = t;
    if(Y!=NULL)
    {
        t = t->right;
        Y->right = t->left;
        t->left=Y;
    }
    return t;
} 
```

我用一棵需要向左旋转的小树进行了尝试：

```
1 <----t
 \
  2
   \
    3 
```

单次左旋转函数结束时，t指向2，1为左节点，3为右节点，所以函数起作用。树看起来像这样：

```
 2<----t
 / \
1   3 
```

但是，当它退出函数时，t 指向 1，没有左节点或右节点。我不明白 return t 和右括号 } 之间会发生什么，它结束了更改 t 的函数。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:33:57.673

这里缺少的是您在测试中调用该函数的行。我想我听到你说 t 没有改变，但是 t 指向的节点发生了变化。t 指向的节点（1）被改变是预期的行为。t 不变不是您所期望的。您的例程返回一个值。您是将该值分配给 t，还是只是期望 t 被例程更改？

# matlab - MATLAB 支持向量机结构

> ID：10057392
> 
> 赞同：1
> 
> 时间：2012-04-07T18:58:26.363
> 
> 标签：matlab, image-processing, svm

我对 MATLAB 中的 SVMstruct 函数有疑问。请记住，我是这类事情的初学者，有人可以帮我解决这个问题：

对于我的项目，我已经下载了 NUS 范围内的图像数据集，其中还有一个 500 维的词袋：http: [//lms.comp.nus.edu.sg/research/NUS-WIDE.htm](http://lms.comp.nus.edu.sg/research/NUS-WIDE.htm) （我假设所有图像的 BoW 信息都被压缩到该文件中）。现在我应该使用 SVM 分类器对此进行分类。我是否正确假设对于 SVMstruct 函数：SVMStruct = svmtrain(Training,Group)，我可以将整个 BoW 矩阵作为输入（作为训练参数），然后对于 Group，我可以给出标签的字符矩阵（作为组参数）？如果 Training 和 Group 的行数和列数不同，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:01:18.437

训练的大小应该是（N，M），其中 N（行）是实例的数量（这个数据集看起来像 269,648），M 是特征的数量（500）。Group 数组的大小应为 (N, 1)，其中每一行对应一个训练实例。

我认为您不能将标签字符矩阵用于 group 参数。您也许可以给出一个像 {'tag1'; 这样的字符串单元数组。'标签2'; '标签3'; ...'标签N'}。通常我会将其转换为数值数组。

# iphone - 如何以编程方式读取 iPhone iOS 5 上的通话记录

> ID：10057395
> 
> 赞同：4
> 
> 时间：2012-04-07T18:58:37.807
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我在 iOS 4 上找到了许多用于读取通话记录的代码示例，但似乎在 iOS 5 上未启用此功能（读取通话记录数据库）。

那么解决方法是什么？是否有任何（第三方？）方法或技巧可以读取 iOS 5 中的通话记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T21:38:51.887

看看 GitHub 上的[SpyPhone](https://github.com/nst/SpyPhone)项目。

例如，您可以获得最近拨打的号码，如下所示：

```
NSString *path = @"/var/mobile/Library/Preferences/com.apple.mobilephone.plist";
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];
NSString *lastDialed = [NSString stringWithFormat:@"%@", [d valueForKey:@"DialerSavedNumber"]]; 
```

这适用于我的 iOS5 手机。我不希望 Apple 对这种功能感到满意了。

# sql - 如何在 SQL Server 2008 中使用我的 ip

> ID：10057396
> 
> 赞同：0
> 
> 时间：2012-04-07T18:59:06.197
> 
> 标签：sql, sql-server, sql-server-2008

我设置了一个 SQL Server 实例，我可以从网络中的所有计算机上看到它......这意味着它已正确配置为远程访问。（192,168.0.50）。

服务器绑定了一个ip地址65.xx.xx.xx

我可以从 IIS 中看到我在其上托管的网站，当我对它执行 ping 操作时，它会给出静态地址。

当我尝试使用 SQL Server Management Studio 连接到 SQL Server 时...使用该地址 65.xx.xx.xx, 1433 它将无法连接！

[SQL 配置][1]..

我应该在连接的属性...中看到我的静态地址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:07:38.930

从互联网连接到网络并不容易，因为它位于路由器和防火墙后面

访问您的 sql 实例的教程

[http://lifehacker.com/127276/geek-to-live--how-to-access-a-home-server-behind-a-routerfirewall](http://lifehacker.com/127276/geek-to-live--how-to-access-a-home-server-behind-a-routerfirewall)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:05:03.017

如果您尝试从网络内连接到它，请尝试使用本地网络 IP。

如果您将实例设置为命名实例，请记住在连接字符串中包含实例名称。

示例 192.168.0.50\instanceName

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T20:26:18.577

> 我可以从 IIS 中看到我在其上托管的网站，当我对它执行 ping 操作时，它会给出静态地址。

仅仅因为您可以看到一个网站，并且可以 ping 静态地址，并不意味着服务器和 Internet 之间的防火墙配置为允许流量通过 1433 端口。

您的路由器管理员需要将入站端口 1433 映射到 65.xxx 地址，然后使用 NAT（网络地址转换）将其指向内部 IP 地址 192.168.0.50。

这与您提到的 IIS 网站所做的相同，只是在这种情况下，端口将是 80，或者可能是 443，以允许 HTTPS 流量通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T20:27:29.750

首先你必须检查[这个](http://msdn.microsoft.com/en-us/library/ms175043%28v=sql.100%29.aspx)，当你对内部网络配置没问题时，你需要检查路由器配置以允许端口转发连接。每个路由器都有自己的配置。

例如 ：

1.  打开 SQL Server 网络实用程序，设置 TCP/IP 启用并设置要使用的端口。
2.  如果您有路由器（端口转发安装 SQL Server 的 PC 的 IP）
3.  现在，如果您的 Internet IP 是 STATIC（使用路由器的 DDNS 服务）并且您的 Internet IP 是 DYNAMIC（继续下一步）
4.  现在，在执行步骤 1-3 之后，您的 SQL Server 已经具有 Internet 连接，因此您必须转到要使用的客户端 PC（例如，您的服务器是办公室 PC，客户端是家用 PC）打开“客户端网络实用程序”
5.  打开别名选项卡，单击添加，输入您的服务器别名（您要使用的任何名称）
6.  在网络库中选择 TCP/IP
7.  在连接参数 - 服务器名称 =（您的服务器互联网 IP 地址）
8.  单击动态确定端口并输入端口号（您从路由器设置的端口）
9.  基本上在哪里完成... 打开 SQL Server 管理器，然后注册您的数据库！

希望能帮助到你 ！！

# jquery - 在鼠标悬停jquery上获取子元素的类名

> ID：10057398
> 
> 赞同：0
> 
> 时间：2012-04-07T18:59:07.220
> 
> 标签：jquery, get, classname

当悬停在 menuItem 列表上时，我希望 subMenu 显示然后 mouseout 再次隐藏。问题是我如何在单击的 menuItem 中定位特定的子菜单（假设我将有更多带有子菜单的菜单项）。

html

```
<ul>
 <li class="menuItem">
 Menu Item 1
 <ul class="subMenu">
 <li> <a href="#"> Link 1 </a> </li>
 <li> <a href="#"> Link 2 </a> </li>
 </ul>
</li> 
```

javascript

```
$(document).ready(function() {
$('.menuItem').mouseover(function() {

$($this).class('.subMenu').show();

});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:02:04.347

尝试：

```
$('.menuItem').hover(
    function(){
        // first function is for the mouseover/mouseenter events
        $(this).find('.subMenu').show();
    },
    function(){
        // second function is for mouseleave/mouseout events
        $(this).find('.subMenu').hide();
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/8pu3K/)。

值得指出的是，您根本不需要为此使用 JavaScript（除非您必须支持 IE6 及以下浏览器），并且可以只使用 CSS：

```
.menuItem:hover .subMenu,
.subMenu:hover {
    display: list-item;
}
.subMenu {
    display: none;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/8pu3K/1/)。

参考：

*   [`find()`](http://api.jquery.com/find/).
*   [`hide()`](http://api.jquery.com/hide/).
*   [`hover()`](http://api.jquery.com/hover/).
*   [`show()`](http://api.jquery.com/show/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T08:31:47.050

David Thomas 解决方案的一个稍微不同的版本，它使用[toggle()](http://api.jquery.com/toggle/)并且只有一个内部函数：

```
$('.menuItem').hover(function(){
    $(this).find('.subMenu').toggle();
}); 
```

由于您只想显示或隐藏`.subMenu`，因此您只需要一个内部函数，该函数在鼠标悬停和鼠标离开时调用。如果您想显式编写鼠标离开功能，这可能是个人喜好问题，但我喜欢这个较短的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:01:55.987

利用：

```
$(this).find('.subMenu').show(); 
```

代替：

```
$($this).class('.subMenu').show(); 
```

# c++ - 如何使用小端格式表示字符串中的十六进制地址？

> ID：10057407
> 
> 赞同：1
> 
> 时间：2012-04-07T19:01:06.260
> 
> 标签：c++, c, string, binary, hex

好的，假设我想将地址存储`0xcdddd298`在 C 字符串中，以便它以小端格式存储该地址的位。我该怎么做？会是这样的`\x98d2ddcd`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:03:51.400

不，会的`"\x98\xd2\xdd\xcd"`。

但我不确定您为什么要将地址存储在字符串中。

# c - 用 C 写一个 shell，在某处关闭标准输入

> ID：10057409
> 
> 赞同：0
> 
> 时间：2012-04-07T19:01:17.197
> 
> 标签：c, shell, pipe, system

我正在写一个 shell，我似乎在某个时候关闭了标准输入，但我不知道在哪里。我已经倾注了这段代码，但找不到我可能在哪里关闭它。

只有当我使用这样的管道时它才会关闭：

```
cat f2.txt | cat 
```

或者

```
cat < f2.txt | cat 
```

或者

```
cat | cat | cat 
```

处理此代码的行是 232 到 268，然后是 270 到 288

我似乎无法正确格式化，所以这里是格式化的代码： http: [//pastebin.com/pe8BkVPV](http://pastebin.com/pe8BkVPV)

我还将在下面粘贴有问题的部分。

有任何想法吗？

```
if (ct->recieve_input == 1 && ct->redirect_output == 0) { 

ptr = dll_prev(tmp) ; 
    ctmp = jval_v(ptr->val) ; 
//fprintf(stderr, "Previous->command = %s\n", ctmp->command) ; 
fflush(stdout) ; 
            fs = fork() ; 
            if (fs == 0) { 

                if (ct->tdw == 1) { /* If we are redirecting output */
                    fprintf(stderr, "ct->tdw = 1\n") ; 
                    if (dup2(ct->fd1, 1) != 1) { perror("dup2 tdw A") ; exit(1) ; } 
                    if (close(ct->fd1) < 0) { perror("c1"); exit(1); }
                } /* tdw == 1 */ 

                if (ct->tdr == 1) { /* If we are recieving input */
                    fprintf(stderr, "ct->tdr = 1\n") ; 
                    if (dup2(ct->fd0, 0) != 0) { perror("dup2 tdr A") ; exit(1) ; } 
                    if (close(ct->fd0) < 0) { perror("c0"); exit(1); }
                }

                if (dup2(ctmp->pipefd[0], 0) != 0) { 
                    perror("dup2 : 0, 0") ; 
                    exit(1) ; 
                }
                //close(ct->pipefd[1]) ;
                //close(ct->pipefd[0]) ; 
                close(ctmp->pipefd[1]) ; 
                close(ct->pipefd[1]) ; 

                status = execvp(ct->command, ct->args) ; 
                fprintf(stderr, "execvp command failed\n") ; 
                exit(1) ; 
            } 
        }

        if (ct->redirect_output == 1 && ct->recieve_input == 0) { 
            ptr = (to_exec)->blink ; 
            ctmp = jval_v(ptr->val) ; 

            ctmp->recieve_input = 1 ; 
            fflush(stdout) ; 
            fs = fork() ; 

            if (fs == 0) { 

                if (dup2(ct->pipefd[1], 1) == -1) { 
                    perror("dup2 : RD== 1:1, 1") ;
                    exit(1) ; 
                } 

                //close(ct->pipefd[0]) ; // TODO
                status = execvp(ct->command, ct->args) ; 
                fprintf(stderr, "exevp command failed\n") ; 
                exit(1) ; 
            } 
        } /* End redirect output */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T21:14:03.127

据我所知，你缺少的是另一个

```
if (cc > 0) c->recieve_input = 1 ; 
```

行处理循环结束后。你需要练习你的 DRY 纪律（不要重复自己）。

PS你拼错了receive

# android - 模拟器与设备上的Android布局

> ID：10057410
> 
> 赞同：0
> 
> 时间：2012-04-07T19:01:19.990
> 
> 标签：android, layout, screen, emulation

我使用所有必要的东西创建了我的应用程序以支持不同的屏幕尺寸/密度（相对布局、倾斜等）

我已经为此支持创建了所有必要的布局文件（ldpi、mdpi 等）和图像。

我已经使用 Eclipse 在所有可用的模拟器皮肤上测试了该应用程序，它们看起来都应该。然后我在真实设备（三星 Galaxy SII）上进行了测试，它看起来很棒。然后我在 Galaxy Tab (7") 上测试了它，布局有点错误，文字大小也错误，让它在平板电脑上看起来很糟糕。

我对此感到非常困惑，因为它是使用所有模拟器皮肤（包括 7 英寸屏幕皮肤）进行测试的。然后我创建了一个自定义 AVD -（1024X600，240 密度），以匹配银河系的确切规格平板电脑。这在模拟器上看起来还是应该的，但真实设备的显示方式不同。

任何想法为什么会这样？与真实设备具有相同规格的模拟器不应该与设备看起来相同吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:24:16.893

看看这个帖子：

[Android，关于用户界面设计](https://stackoverflow.com/questions/8988473/android-concerning-the-user-interface-design)

您会注意到 Tim 的评论，他提到 Galaxy Tab 7" 具有大屏幕并使用 mdpi 资源。因此您的模拟器设置为 1024x600 和 hdpi，这将解释差异。

或者只是从三星下载/安装模拟器。

[模拟三星 Galaxy Tab](https://stackoverflow.com/questions/3745491/emulate-samsung-galaxy-tab)

# linq - mvc3 和 linq - 创建 ViewModel

> ID：10057411
> 
> 赞同：1
> 
> 时间：2012-04-07T19:01:23.740
> 
> 标签：linq, linq-to-entities

我需要做两个/三个独立的查询并加载到同一个视图模型中并将其传递给视图。

这就是我正在做的事情，但它甚至没有编译，请看看，让我知道我做错了什么......谢谢

UserViewModel 类有 2 个参数，title，option

例如

```
UserViewModel user= new UserViewModel ();

    var model = (from a in db.Table1
     where string.Equals(a.username, "bob")
    select user
    {   user.Title = a.Title,
        user.option = 1
    }); 
```

第二次查询

```
 model = (from b in db.Table2
             where string.Equals(b.username, "bob")
             select user
             {
                 user.Title= b.Title,
                 user.option= 2
             });

var list = model.ToList();
return View("List",list); 
```

这是简单的查询，我知道我现在可以将它们放入 1 个查询中，但将来它将完全独立，我需要知道如何进行两个/三个查询并将它们放入一个视图模型中。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:08:45.890

```
var user = db.Table1
     .Where(m => m.username == "bob")
     .Select(x => new UserViewModel 
         {
            Title = x.Title,
            Option = 1
         })
      .Union(
           db.Table2
      .Where(m => m.username == "bob")
      .Select(x => new UserViewModel
        {
           Title = x.Title,
           option = 2
        })
      ).ToList(); 
```

# php - Mysql查询和foreach查询带有双项

> ID：10057416
> 
> 赞同：1
> 
> 时间：2012-04-07T19:02:07.557
> 
> 标签：php, mysql, codeigniter, join, codeigniter-2

我只是从几个表中获取用户数据，但用户可以选择添加多个技能或经验。

```
$query_str = "SELECT a.*, b.*, c.*, d.*, e.* FROM edu a
              JOIN exp b ON a.user_id=b.user_id
              JOIN user_profiles c ON a.user_id=c.user_id
              JOIN skills d ON a.user_id=d.user_id
              JOIN comp e ON a.user_id=e.user_id
              WHERE a.user_id = ?";

$query = $this->db->query($query_str, $end_user);
            if($query->num_rows() > 0) {
                    foreach($query->result_array() as $stuff) {
                            $data[] = $stuff;
                    }
                    return $data;
                    } else {
            return false;
                    } 
```

一切都很好，直到我尝试显示数据。如果用户有两个 exp，则其他所有内容都会显示两次。我不知道怎么写。将它们分开会更容易吗？每个项目一个查询？

```
public function get_education()
    {
           $one_edu = $this->test_model->one_edu($end_user);
            if ($one_edu != false)
            {
                    foreach($one_edu as $edas) {
                            $one_edu_html .='<p>'.$edas['objective'].'</p>';
                    }

                    foreach($one_edu as $exp) {
                            $one_edu_html .= '<p>'.$exp['exp_title'].'</p>';

                    }

                    foreach($one_edu as $educ) {
                            $one_edu_html .= '<p>'.$educ['edu_title'].'</p>';
                    }

                    $result = array('status' => 'ok', 'content' => $one_edu_html);
                    echo json_encode($result);
                    exit();
            }else{
                    $result = array('status' => 'ok', 'content' => '');
                    echo json_encode($result);
                    exit();
            }
    } 
```

现在它返回如下内容：

```
Objective
Exp title1
Exp title2
Edu title
Edu title <- Extra 
```

使用代码点火器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T21:44:47.213

主要原因是您没有对行进行分组。添加石斑鱼，就像 `GROUP BY a.id`最后一样

* * *

### 更新

行是重复的，因为它们是不同的，您可以将字段分组到单行上，使用`GROUP_CONCAT`

```
SELECT a.user_id, a.education, GROUP_CONCAT(a.edu_title SEPARATOR ",") "Edu_Title", GROUP_CONCAT(b.exp_title SEPARATOR ",") "Experience Title" ,b.experience, c.objective, d.skill, e.comp FROM edu a
JOIN exp b ON a.user_id=b.user_id
JOIN user_profiles c ON a.user_id=c.user_id
JOIN skills d ON a.user_id=d.user_id
JOIN comp e ON a.user_id=e.user_id
WHERE a.user_id = 243; 
```

### [演示](http://sqlfiddle.com/#!2/3d822/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:25:54.853

我不确定到底该怎么做，但你可以尝试一些事情。您可以设置两个不同的子查询来创建额外的字段，但这可能会为您创建不必要的字段。另一件事是连接其他表的结果并使用它。您也可以只订购它们并使用 php 检查是否重复。无论哪种方式， group_concat 都可能是您正在寻找的。

我不确定结构和您需要什么，但假设您需要 2 个技能字段和 1 个 exp 字段：

```
SELECT a.*, b.*, c.*, d.*, e.*
    FROM edu a,
      (SELECT GROUP_CONCAT(s.F1) as d_f1, GROUP_CONCAT(s.F2) as d_f2
       FROM skills s
       WHERE a.user_id=s.user_id
       GROUP BY s.user_id) d,
      (SELECT GROUP_CONCAT(t.F1) as e_f1
       FROM exp t
       WHERE a.user_id=t.user_id
       GROUP BY t.user_id) e
    JOIN user_profiles b ON a.user_id=b.user_id
    JOIN comp c ON a.user_id=c.user_id
    WHERE a.user_id = ? 
```

[http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)

抱歉，我无法测试它是否有效，但您可以根据需要调整分隔符和其他内容。我不确定如果没有匹配的记录它会如何反应，但我认为它只会返回一个 null 或空字符串，但您可能需要检查。

...他们可能不得不进入`select`而不是进入`from`，但我不确定。您将不得不使用它，看看哪些有效，哪些更快。

编辑：我必须在线测试（[http://demo.phpmyadmin.net/](http://demo.phpmyadmin.net/)），这应该可以工作（假设我没有搞砸语法）：

```
SELECT *
    FROM edu a
    JOIN user_profiles b ON a.user_id=b.user_id
    JOIN comp c ON a.user_id=c.user_id
    JOIN (SELECT s.user_id, GROUP_CONCAT(s.F1) as d_f1, GROUP_CONCAT(s.F2) as d_f2
       FROM skills s
       GROUP BY s.user_id) d ON a.user_id = d.user_id
    JOIN (SELECT t.user_id, GROUP_CONCAT(t.F1) as e_f1
       FROM exp t
       GROUP BY t.user_id) e ON a.user_id = e.user_id
    WHERE a.user_id = ? 
```

如果您必须做很多事情（或基本上删除`where`条件），那应该会更快，因为我认为子查询创建临时表并且只运行一次。

.. 如果您一次只查询一行，那么只需将条件重新粘贴到子查询上。

# c# - C#循环遍历具有嵌套索引的目录

> ID：10057418
> 
> 赞同：-1
> 
> 时间：2012-04-07T19:02:17.117
> 
> 标签：c#

如何使用 C# 遍历具有指定嵌套索引的目录？

小例子：

```
Folder1
|__Folder1.1
|  |__Folder1.1.1
|__Folder1.2

Folder2
|__Folder2.1
   |__Folder2.1.1
   |__Folder2.1.2
      |__Folder2.1.2.1 
```

使用最大嵌套索引 1，我们将获得以下目录：（
*嵌套级别 0）* Folder1、Folder2
*（嵌套级别 1）*  Folder1.1、Folder1.2、Folder2.1

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:06:01.787

[`Directory.GetDirectories`](http://msdn.microsoft.com/en-us/library/c1sez4sc.aspx)您可以使用该函数编写递归方法：

```
class Program
{
    static void Main()
    {
        Loop(@"c:\work", 1);
    }

    static void Loop(string root, int nestingIndex = 0)
    {
        if (nestingIndex < 0)
        {
            return;
        }
        foreach (var folder in Directory.GetDirectories(root))
        {
            Console.WriteLine(folder);
            Loop(folder, nestingIndex - 1);
        }
    }
} 
```

# ios - iOS：下载 xml/json 来改变游戏的功能？

> ID：10057423
> 
> 赞同：1
> 
> 时间：2012-04-07T19:02:40.660
> 
> 标签：ios

我想知道这是否违反了苹果的条款。基本上我正在考虑的本质上是一种修改游戏的方式。该应用程序将能够从我的服务器下载一组 xml/json 文件，这些文件将改变诸如怪物有多少生命值之类的东西。据我所知，这完全没问题，但是我不确定的部分是怪物动作。

假设我想赋予怪物改变他们对某事的反应方式的能力。因此，让我们在 xml/json 中说，您可以定义类似 oh 之类的事件，在该事件中，怪物 hp 变化有 20% 的变化来施放治疗。那是一种脚本，但实际上只是原始数据。iphone/ipad 上的应用程序将执行它，您将无法仅在应用程序允许的情况下插入任何自定义脚本。

这是一个非常粗略的例子，说明我的意思是否有帮助：

```
{
    event: {
        type: 'hpChange',
        range: '<50%',
        cast: {
            spell: 'heal',
            chance: .2
        }
    }
} 
```

所以本质上这意味着当怪物的生命值发生变化时，如果它低于 50%，那么有 20% 的机会施放治疗。那么从本质上讲，这会违反苹果的条款吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:06:23.160

没关系。如果不允许这样做，则应用商店中将没有客户端-服务器应用程序。只要您传输的数据没有用非法内容或违反任何其他条款替换内容，您的申请就应该没有问题获得批准。

# python - Python + PyGame - 处理同时发生的鼠标和键盘事件

> ID：10057426
> 
> 赞同：2
> 
> 时间：2012-04-07T19:03:00.277
> 
> 标签：python, event-handling, pygame

我完全愿意接受我的硬件是这里问题的原因的想法，但我并不这么认为，因为我确实看到计算机使用其他软件/游戏/等同时处理这两种输入，所以我猜这里的错误是我对 PyGame 事件处理程序的方法。

我在随意使用 Python 和 PyGame，只是试图一次构建我的知识，并在我学习的时候通过构建一个“游戏”来表达这些知识。这在很大程度上是一项正在进行的工作，没有任何像碰撞检测或记分这样的实现，我认为这可能会在以后出现。

这里的相关难题是游戏将执行 MOUSEMOTION 事件和 KEYDOWN 事件，它似乎不想同时处理它们。“玩家”对象在移动时不能射击，在射击时也不能移动。由于大多数游戏玩家喜欢在射击时移动的奢侈，我认为这是一个障碍。

```
import pygame, random, sys
from pygame.locals import *

pygame.init()

width = 640
height = 480

DISPLAYSURF = pygame.display.set_mode((width, height))
pygame.display.set_caption('It moves!')
pygame.mouse.set_visible(0)

class Player(pygame.sprite.Sprite):

    def __init__(self, x, y):
        pygame.sprite.Sprite.__init__(self)

        self.x = x
        self.y = y
        self.width = 50
        self.height = 25
        self.playerRect = None

    def update(self, event):
        if event.type == MOUSEMOTION:
            self.x, self.y = event.pos

        #get a new playerRect and draw it
        self.playerRect = pygame.Rect(self.x, self.y, self.width, self.height)
        pygame.draw.ellipse(DISPLAYSURF, RED, (self.playerRect), 3)

    def shotcheck(self, event):
        if event.type == KEYDOWN:
            if event.key == K_KP8:
                return (True, 'up')
            elif event.key == K_KP2:
                return (True, 'down')
            elif event.key == K_KP4:
                return (True, 'left')
            elif event.key == K_KP6:
                return (True, 'right')
            elif event.key == K_KP7:
                return (True, 'upleft')
            elif event.key == K_KP1:
                return (True, 'downleft')
            elif event.key == K_KP9:
                return (True, 'upright')
            elif event.key == K_KP3:
                return (True, 'downright')
            else:
                return (0, 0)

class Enemy(pygame.sprite.Sprite):
    def __init__(self, x, y):
        pygame.sprite.Sprite.__init__(self)
        self.x = x
        self.y = y
        #self.body = pygame.rect.Rect(self.x, self.y, 15, 15)
        self.speed = 5
        self.xmove = 0
        self.ymove = 0

    def update(self, event):
        self.x += self.speed
        if self.x > 350:
            self.speed *= -1
        elif self.x < 25:
            self.speed *= -1

        pygame.draw.rect(DISPLAYSURF, BLUE, (self.x, self.y, 15, 15), 4)

#pass it a directional value when fired based on the key
#may have to divide speed / 2 if moving diagonally
class Bullet(pygame.sprite.Sprite):
    def __init__(self, x, y, direction):
        pygame.sprite.Sprite.__init__(self)
        self.x = x
        self.y = y
        self.direction = direction
        self.width = 4
        self.height = 4
        self.bulletRect = None
        self.speed = 8

    def update(self, event):

        if self.direction == 'up':
            self.y -= self.speed

        elif self.direction == 'down':
            self.y += self.speed

        elif self.direction == 'left':
            self.x -= self.speed

        elif self.direction == 'right':
            self.x += self.speed

        elif self.direction == 'upleft':
            self.x -= (self.speed/2)
            self.y -= (self.speed/2)

        elif self.direction == 'downleft':
            self.x -= (self.speed/2)
            self.y += (self.speed/2)

        elif self.direction == 'upright':
            self.x += (self.speed/2)
                self.y -= (self.speed/2)

        elif self.direction == 'downright':
            self.x += (self.speed/2)
            self.y += (self.speed/2)

        self.bulletRect = pygame.Rect(self.x, self.y, 4, 4)
        pygame.draw.ellipse(DISPLAYSURF, GREEN, (self.bulletRect), 2)

FPS = 30
fpsClock = pygame.time.Clock()

RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)
BLACK = (0, 0, 0)

ship = Player(width / 2, height / 2)
bads = Enemy(width / 2, height / 2)

queue = pygame.sprite.Group()
queue.add(ship)
queue.add(bads)

while True:
    DISPLAYSURF.fill(BLACK)
    for event in pygame.event.get():
        if event.type == QUIT:
            sys.exit()

        #passes 'event' to everything in the queue and calls
        #their obj.update().  in this way the gameloop 
        #is a bit more readable
    for thing in queue:
        thing.update(event)

    try: #i'm not married to this bit of code :/
        checkForShot, shotDirection = ship.shotcheck(event)
        if checkForShot:
            shotx, shoty = ship.playerRect.center
            shot = Bullet(shotx, shoty, shotDirection)
            queue.add(shot)
    except TypeError:
        pass

    pygame.display.flip()
    fpsClock.tick(FPS) 
```

我知道这基本上会产生一个非常平淡无奇的 Robotron 克隆，但就像我说的那样，这是我的一个蹒跚学步的项目，我在通过在线教程运行时将其放在一起。是的，现在有一个不必要的“随机导入”，以后会很重要。

我猜有几个挂断；对于初学者，我不喜欢处理子弹创建的方式（在我看来，玩家对象应该将它们添加到游戏队列本身而不是返回 True/False 元组，但这似乎有点不直观让播放器对象直接提及队列。用 try/except 处理它感觉很懒，但也许我很挑剔）。但是我也感觉到这个问题无异于弄清楚如何处理让事件处理程序正确地 thing.update() 以同时移动（MOUSEMOTION）和射击（KEYDOWN）。

而且我还猜测，为了让它表现得更“像人们期望的那样”，我需要告诉它也处理 KEYUP 事件。但是，我仍然对为什么事件处理程序似乎选择一个 event.type 而忽略另一个感到困惑（根据我的经验，无论哪个先出现）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:14:01.707

**看一下这个！**

```
import pygame, random, sys
from pygame.locals import *

pygame.init()

width = 640
height = 480

DISPLAYSURF = pygame.display.set_mode((width, height))
pygame.display.set_caption('It moves!')
pygame.mouse.set_visible(0)

class Player(pygame.sprite.Sprite):

    def __init__(self, x, y):
        pygame.sprite.Sprite.__init__(self)

        self.x = x
        self.y = y
        self.width = 50
        self.height = 25
        self.playerRect = None

    def update(self, event):
        if event.type == MOUSEMOTION:
            self.x, self.y = event.pos

        #get a new playerRect and draw it
        self.playerRect = pygame.Rect(self.x, self.y, self.width, self.height)
        pygame.draw.ellipse(DISPLAYSURF, RED, (self.playerRect), 3)

    def shotcheck(self, event):
        if event.type == KEYDOWN:
            if event.key == K_KP8:
                return (True, 'up')
            elif event.key == K_KP2:
                return (True, 'down')
            elif event.key == K_KP4:
                return (True, 'left')
            elif event.key == K_KP6:
                return (True, 'right')
            elif event.key == K_KP7:
                return (True, 'upleft')
            elif event.key == K_KP1:
                return (True, 'downleft')
            elif event.key == K_KP9:
                return (True, 'upright')
            elif event.key == K_KP3:
                return (True, 'downright')
            else:
                return (0, 0)

class Enemy(pygame.sprite.Sprite):
    def __init__(self, x, y):
        pygame.sprite.Sprite.__init__(self)
        self.x = x
        self.y = y
        #self.body = pygame.rect.Rect(self.x, self.y, 15, 15)
        self.speed = 5
        self.xmove = 0
        self.ymove = 0

    def update(self, event):
        self.x += self.speed
        if self.x > 350:
            self.speed *= -1
        elif self.x < 25:
            self.speed *= -1

        pygame.draw.rect(DISPLAYSURF, BLUE, (self.x, self.y, 15, 15), 4)

#pass it a directional value when fired based on the key
#may have to divide speed / 2 if moving diagonally
class Bullet(pygame.sprite.Sprite):
    def __init__(self, x, y, direction):
        pygame.sprite.Sprite.__init__(self)
        self.x = x
        self.y = y
        self.direction = direction
        self.width = 4
        self.height = 4
        self.bulletRect = None
        self.speed = 8

    def update(self, event):

        if self.direction == 'up':
            self.y -= self.speed

        elif self.direction == 'down':
            self.y += self.speed

        elif self.direction == 'left':
            self.x -= self.speed

        elif self.direction == 'right':
            self.x += self.speed

        elif self.direction == 'upleft':
            self.x -= (self.speed/2)
            self.y -= (self.speed/2)

        elif self.direction == 'downleft':
            self.x -= (self.speed/2)
            self.y += (self.speed/2)

        elif self.direction == 'upright':
            self.x += (self.speed/2)
                self.y -= (self.speed/2)

        elif self.direction == 'downright':
            self.x += (self.speed/2)
            self.y += (self.speed/2)

        self.bulletRect = pygame.Rect(self.x, self.y, 4, 4)
        pygame.draw.ellipse(DISPLAYSURF, GREEN, (self.bulletRect), 2)

FPS = 30
fpsClock = pygame.time.Clock()

RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)
BLACK = (0, 0, 0)

ship = Player(width / 2, height / 2)
bads = Enemy(width / 2, height / 2)

queue = pygame.sprite.Group()
queue.add(ship)
queue.add(bads)

while True:
    DISPLAYSURF.fill(BLACK)
    for event in pygame.event.get():
        if event.type == QUIT:
            sys.exit()

                #passes 'event' to everything in the queue and calls
                #their obj.update().  in this way the gameloop 
                #is a bit more readable
            for thing in queue:
                thing.update(event)

    try: #i'm not married to this bit of code :/
        checkForShot, shotDirection = ship.shotcheck(event)
        if checkForShot:
            shotx, shoty = ship.playerRect.center
            shot = Bullet(shotx, shoty, shotDirection)
            queue.add(shot)
    except TypeError:
        pass

    pygame.display.flip()
    fpsClock.tick(FPS) 
```

问题出在处理拉取（从 pygame 中检索它们）的代码中。您制作了获取每个事件的循环。但是后来你“更新”了你的游戏状态，而不是每一个，而是**最后**一个！我认为纠正缩进就足够了。

# tcl - FindFiles: 更新问题

> ID：10057427
> 
> 赞同：0
> 
> 时间：2012-04-07T19:03:06.073
> 
> 标签：tcl

我写了一个 FindFile.tcl 的程序。它会在所有子目录中找到 .v、.sv 和 .vhd 并附加到一个列表（$tb_file）。无论如何，它只附加其中的一部分。假设它应该附加所有文件。

```
结果：Test_Plan.sv Test_Plan_Copy.sv sim_driver_2.sv
预期结果：Test_Plan.sv Test_Plan_Copy.sv sim_driver_1.sv sim_driver_2.sv

```

我发现了什么： `$tb_file`在进入第二个 foreach 语句之前会错过列表中的一个元素；

我的 FindFile.tcl

```
proc FindFiles { MY_TB_DIR tb_file } {
  set pwd [pwd];
  # set tb_file $tb_file
  set tb_file $tb_file
  # puts "after proc call testbench files are $tb_file"
  set MY_TB_DIR $MY_TB_DIR
  puts "after proc call tb_dir $MY_TB_DIR"
  set dir_file [glob -nocomplain -dir $MY_TB_DIR *];
  # puts $dir_file
  # set dir_file [glob -nocomplain *]

  foreach item $dir_file {
    set file [file tail $item];
    puts $file;
    switch -glob -- $file {
      *.v {lappend tb_file $file
        puts "Append $tb_file"
      }

      *.sv {lappend tb_file $file
        puts "Append $tb_file"
      }

      *.vhd {lappend tb_file $file
        # puts "Test bench file is $tb_file"
      }

      default {}
    };
    set tb_file $tb_file;
  };

  foreach item2 $dir_file {
    # recurse - go into the sub directory
    if { [file isdirectory $item2] } {
      set sub_dir [file join $MY_TB_DIR $item2] ;
      puts "\n\n before proc call $tb_file";
      puts " \n\n sub_dir $sub_dir";
      FindFiles $sub_dir $tb_file;
      # FindFiles $sub_dir
    }
  };
  # puts "Testbench are $tb_file"
  cd $pwd
} 
```

请建议。非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T11:31:06.667

您的主要问题是您想从子目录中累积文件，但实际上并没有这样做。您也没有使用`glob`well 的功能。这是我的看法：

```
proc FindFiles {MY_TB_DIR {accumulate_var ""}} {
    if {$accumulate_var ne ""} {
        upvar 1 $accumulate_var result
    }
    foreach file [glob -nocomplain -dir $MY_TB_DIR -type f "*.{v,sv,vhd}"] {
        lappend result [file tail $file]
    }
    foreach dir [glob -nocomplain -dir $MY_TB_DIR -type d "*"] {
        FindFiles $dir result
    }
    return $result
} 
```

^(（这些全局术语实际上都不需要用双引号括起来。我只是为了语法突出显示！）)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:50:08.087

我想你还没有理解进程调用在 Tcl 中是如何工作的。你有几行这样的

```
set a $a 
```

它只是将变量设置为其自身。看起来好像您正在尝试将参数更新到嵌套调用中的 proc 并期望结果在父 proc 中可用。Tcl proc 参数不能那样工作，您需要返回一个新列表并将其加入您的结果。

# prolog - 在 Prolog 中列出 4x4 板上所有可能的操作

> ID：10057431
> 
> 赞同：5
> 
> 时间：2012-04-07T19:03:44.890
> 
> 标签：prolog

在（例如）一名玩家在 4x4 棋盘（带有 8 个不同的π介子）中执行某些操作之后，我如何列出所有可能的棋盘？

介子应该是，例如：

```
([1,2,3,4,5,6,7,8]) 
```

并且每次自动播放时都无法重复使用。

板子应该像这个板子

```
([1,1,-,-],(1,2,-,-)...(1,3,-,-)(1,4,-,-)
 [2,1,-,-],(2,2,-,-)...(2,3,-,-)(2,4,-,-)
 [3,1,-,-],(3,2,-,-)...(3,3,-,-)(3,4,-,-)
 [4,1,-,-],(4,2,-,-)...(4,3,-,-)(4,4,-,-) 
```

每轮一名玩家将一个π介子放在棋盘上，直到填满为止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:19:40.443

我假设你有一个谓词`board0_move_board/3`，它是棋盘 B、移动 M 和在 B 上移动 M 后产生的棋盘之间的三元关系。此外，我假设你有一个谓词`board_move/2`将棋盘与移动相关联这在该板上是可能的，并且在回溯时连续给出所有可能的移动。使用这些谓词，您可以获得所有可能的板：

```
findall(Board, (board_move(Board0, Move), board0_move_board(Board0, Move, Board)), Boards) 
```

# actionscript-3 - 使用制表键 as3

> ID：10057433
> 
> 赞同：0
> 
> 时间：2012-04-07T19:03:47.963
> 
> 标签：actionscript-3

我正在开发一个类的数据提供程序应用程序，并希望更进一步提高可用性并为导航添加选项卡，但我在下面的 tabIndex 代码什么也不做。我想在按钮和文本字段之间切换。制表符是否适用于数据提供者？

```
package 
{

    import fl.controls.Button;
    import fl.controls.List;
    import fl.controls.TextInput;

    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class EditableList extends Sprite 
    {

        public function EditableList() 
        {
            init();
        }

        private function init():void 
        {
            addName_bn.addEventListener(MouseEvent.CLICK, onAddName);
            addName_ti.addEventListener(Event.CHANGE, onNameEnter);
            addName_ti.addEventListener("enter", onAddName);
            deleteName_bn.addEventListener(MouseEvent.CLICK, onDeleteName);
            editName_ti.addEventListener("enter", onDeleteName);
            editName_ti.addEventListener(Event.CHANGE, onNameChange);
            names_li.addEventListener(Event.CHANGE, onNameSelected);
            addEventListener(Event.ENTER_FRAME, onNextFrame);
            addEventListener(Event.ENTER_FRAME, onFocus);
            addName_ti.setFocus();

        }

        private function onFocus(event:Event):void {
            addName_ti.tabIndex = 0;
            addName_bn.tabIndex = 1;
            editName_ti.tabIndex = 2;
            deleteName_bn.tabIndex = 3;
        }

        // Handler for when the next frame is reached after initialization, when buttons can be disabled.

        private function onNextFrame(event:Event):void {
            removeEventListener(Event.ENTER_FRAME, onNextFrame);
            addName_bn.enabled = false;
            deleteName_bn.enabled = false;
            editName_ti.enabled = false;
        }

        // Handler for when the add name button is clicked, adds item to list.

        private function onAddName(event:Event):void {
            var newItem:Object = {label:addName_ti.text};
            names_li.dataProvider.addItem(newItem);
            names_li.dataProvider.sortOn("label");
            addName_ti.text = "";
            addName_bn.enabled = false;
            addName_ti.setFocus();
        }

        // Handler for when text is entered into the add name textfield, enables the add name button.

        private function onNameEnter(event:Event):void {
            addName_bn.enabled = addName_ti.text.length > 0;
        }

        // Handler for when the delete name button is clicked, removes the list item.

        private function onDeleteName(event:Event):void {
            names_li.dataProvider.removeItemAt(names_li.selectedIndex);
            deleteName_bn.enabled = false;
            names_li.dataProvider.sortOn("label");
            editName_ti.text = "";
            editName_ti.enabled = false;
            editName_ti.setFocus();
        }

        // Handler for when text is changed into the edit name textfield, alters the item in the list.

        private function onNameChange(event:Event):void {
            var newItem:Object = {label:editName_ti.text};
            names_li.dataProvider.replaceItemAt(newItem, names_li.selectedIndex);
        }

        //  Handler for when an item is selected in the list, populates fields and enables buttons.

        private function onNameSelected(event:Event):void {
            editName_ti.text = names_li.selectedItem.label;
            editName_ti.enabled = true;
            deleteName_bn.enabled = true;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:22:42.100

尝试`InteractiveObject.tabEnabled`在您希望使用 tab 键选择的任何按钮上将属性设置为 true。此外，如果按钮包含在父剪辑中，您还需要将 parent`tabChildren`属性设置为 true。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html#tabEnabled](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html#tabEnabled)

# java - 从两个文件中读取，然后将它们组合并写入第三个文件，java

> ID：10057435
> 
> 赞同：0
> 
> 时间：2012-04-07T19:03:53.740
> 
> 标签：java, file-io, printwriter, file-read, alphabetical-sort

我必须编写一个程序，该程序从两个文件中读取，每个文件都有一个名称和 ID 列表，这些名称和 ID 都已经根据姓氏按字母顺序排列。然后假设该程序创建第三个用户名文件，其中包含来自两个程序的所有名称和 ID 的完整列表，并将它们按字母顺序排列。文件格式如下——

姓，名
ID(ex.rbb091020)
姓，名
ID

我的程序读取了这两个文件，并创建了第三个文件，但由于某种原因，它没有向第三个文件写入任何内容，并且该文件留空。我能做些什么来解决这个问题？

这是我的代码...

```
import java.io.*;
import java.util.Scanner;

public class Combine_Files
{
public static void main(String[]args) throws IOException
{
    String filename1 = "";
    String filename2 = "";
    String combinedFileName = "";
    String response = "";
    String nextName1 = "";
    String nextName2 = "";
    String nextIDNumber1 = "";
    String nextIDNumber2 = "";
    boolean okToOverwrite = false;
    Scanner keyboard = new Scanner(System.in);

    System.out.println("What is the name of the first file?");
    filename1 = keyboard.nextLine();

    File file1 = new File(filename1);

    if (!file1.exists())
    {
        System.out.println(file1 + " does not exist.\nTerminating Program.");
        System.exit(0);
    }

    System.out.println("What is the name of the second file?");
    filename2 = keyboard.nextLine();

    File file2 = new File (filename2);
    if (!file2.exists())
    {
        System.out.println(file2 + " does not exist.\nTerminating Program.");
        System.exit(0);
    }   

    System.out.println("What is the name of the file that you wish to create?");
    combinedFileName = keyboard.nextLine();
    File combinedFile = new File (combinedFileName);

    while (combinedFile.exists() && !okToOverwrite)
    {
        System.out.println("\nError, a file named " +
            combinedFileName + " already exists." +
            "\nWould you like to overwrite this file?" +  
            "\nEnter Y for Yes or N for No.");
        response = keyboard.nextLine();

        // Add input validation on response

        if (response.equalsIgnoreCase("Y"))
        {
            okToOverwrite = true;
        }
        else 
        {
            System.out.println("Enter a new filename.");
            combinedFileName = keyboard.nextLine();
            combinedFile = new File(combinedFileName);
        }
    }

    if (file1.exists() && file2.exists())
    {

        Scanner list1 = new Scanner(file1);
        Scanner list2 = new Scanner(file2);
        PrintWriter outputFile = new PrintWriter(combinedFile);

            while (list1.hasNext() && list2.hasNext())
            {
                nextName1 = list1.nextLine();
                nextName2 = list2.nextLine();

                if(nextName1.compareToIgnoreCase(nextName2) <0)
                {
                    outputFile.print(nextName1);
                    nextName1 = list1.nextLine();
                    outputFile.print(nextName1);
                }
                else if(nextName1.compareToIgnoreCase(nextName2) >0)
                {
                    outputFile.println(nextName2);
                    nextName2 = list2.nextLine();
                    outputFile.println(nextName2);
                }
                else
                {
                    outputFile.println(nextName1);
                    nextName1 = list1.nextLine();
                    outputFile.println(nextName1);
                    outputFile.println(nextName2);
                    nextName2 = list2.nextLine();
                    outputFile.println(nextName2);
                }       
            }

            while (list1.hasNext() && !list2.hasNext())
            {
                outputFile.println(nextName1);
            }

            while (list2.hasNext() && !list1.hasNext())
            {
                outputFile.println(nextName2);
            }
    outputFile.close();             
    }
}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:02:02.883

我发现了两个错误：主要的一个是在另一个输入文件用尽后在一个输入文件中输出行的底部循环不会推进他们正在阅读的文件。因此，如果它们完全执行，那些循环就没有尽头。

第二个错误是在名字比较之后使用“print()”而不是“println()”；这会输出没有行尾的行，可能不是您想要的。

之后我得到了输出，尽管我没有检查它是否有其他错误。

如果我可以建议：如果您使用更多执行常见功能的方法，您可以使您的程序更简单。例如：一种方法可以将已读取的输入、一个输入扫描器和输出文件作为参数并写出当前名称。就像是

```
private void writeName(String currentLine, Scanner inFile, File outFile)
{
  outFile.println(currentLine);
  String nextLine = inFile.nextLine();
  outFile.println(nextLine);
} 
```

发现这些问题的方法是注意您似乎不止一次地执行相同的编码步骤。在这种情况下，您对两个输入文件分别执行上述步骤，因此您可以使用此方法（以及其他类似方法）消除代码的“复制和粘贴”性质。

# html - IE8 身体没有占据 100% 的高度

> ID：10057436
> 
> 赞同：3
> 
> 时间：2012-04-07T19:03:56.313
> 
> 标签：html, internet-explorer-8, height, document-body

在我的应用程序中，我无法完全覆盖 IE8 中的浏览器窗口页面。

的HTML：

```
<body class="body">
    <div class="wrapper">
        <div class="main-holder">
            <form id="Form1" runat="server">

            </form>
        </div>
    </div>
</body> 
```

和CSS：

```
.body {
    background: -webkit-gradient(linear, left top, right top, from(#2F2727), color-stop(0.25, #1a82f7), color-stop(0.5, #2F2727), color-stop(0.75, #1a82f7), to(#2F2727));
    background: -webkit-linear-gradient(left, #2F2727, #1a82f7, #2F2727, #1a82f7, #2F2727);
    background: -moz-linear-gradient(left, #2F2727, #1a82f7, #2F2727, #1a82f7, #2F2727);
    background: -ms-linear-gradient(left, #2F2727, #1a82f7, #2F2727, #1a82f7, #2F2727);
    background: -o-linear-gradient(left, #2F2727, #1a82f7, #2F2727, #1a82f7, #2F2727);
    background: linear-gradient(left, #2F2727, #1a82f7, #2F2727, #1a82f7, #2F2727);
    -pie-background: linear-gradient(left, #2F2727, #1a82f7, #2F2727, #1a82f7, #2F2727);
    behavior: url(PIE.htc);
    height: 100%;
}
.main-holder {
    width: 1000px;
    min-height: 600px;
    margin: 10px auto;
    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
    -khtml-border-radius: 20px;
    border-radius: 10px;
    -moz-box-shadow: 10px 10px 10px #000;
    -webkit-box-shadow: 10px 10px 10px #000;
    box-shadow: 10px 10px 10px #000;
    background: -webkit-gradient(linear, left bottom, left top, from(#F8AC25), color-stop(0.05, #FFF999), color-stop(0.5, #F8AC25), color-stop(0.95, #FFF999), to(#F8AC25));
    background: -webkit-linear-gradient(top, #F8AC25, #FFF999 5%, #F8AC25, #FFF999 95%, #F8AC25);
    background: -moz-linear-gradient(top, #F8AC25, #FFF999 5%, #F8AC25, #FFF999 95%, #F8AC25);
    background: -ms-linear-gradient(top, #F8AC25, #FFF999 5%, #F8AC25, #FFF999 95%, #F8AC25);
    background: -o-linear-gradient(top, #F8AC25, #FFF999 5%, #F8AC25, #FFF999 95%, #F8AC25);
    background: linear-gradient(top, #F8AC25, #FFF999 5%, #F8AC25, #FFF999 95%, #F8AC25);
    -pie-background: linear-gradient(top, #F8AC25, #FFF999 5%, #F8AC25, #FFF999 95%, #F8AC25);
    behavior: url(PIE.htc);
}

* {
    margin: 0;
    padding: 0;
}

body {
    font-family: Arial Sans-Serif;
} 
```

但在 IE8 中，页面顶部和底部有两条白色条带。出于这个原因，body 并没有完全覆盖页面，但在 Firefox 中它确实如此。

截图 IE8：

![在此处输入图像描述](../Images/3af384ce29c4cb1c98be3a10a89b05e6.png)

截图火狐：

![在此处输入图像描述](../Images/0a024ee7347030094f6c8a06d3be235a.png)

在 IE8 中，它们是围绕包装器的偏移量：

![在此处输入图像描述](../Images/aa5fcfc1ce6576ba99b53b4771af1078.png)

任何信息都会对我很有帮助。

谢谢。

* * *

![在此处输入图像描述](../Images/9364bfbf93c2b7e5e70868a5d9345651.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T19:17:58.223

问题可能是由于 html 或 body 元素。试试这个：

```
html, body {
padding: 0;
margin: 0;
height: 100%;
} 
```

请注意，将高度设置为 100% 可能会在站点流出画布以显示滚动条时给您带来问题。然后高度仍将是 100%，并且可能会导致内容溢出问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T19:12:34.593

您的 100% 高度需要同时应用于 HTML 和 BODY 标签：

```
html, body { height: 100%; } 
```

[这里有更多信息！](http://www.dave-woods.co.uk/index.php/100-height-layout-using-css/comment-page-5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T19:03:54.250

试试这个

```
body
{
    overflow: scroll;
} 
```

# c# - 如何在一个更新语句中更新多个表

> ID：10057437
> 
> 赞同：0
> 
> 时间：2012-04-07T19:04:01.790
> 
> 标签：c#, .net, sql-server-2005

我正在从 .net 3.5 的详细信息视图控件并使用 SQL Server 2005 更新表中的一列

问题是我必须更新同一数据库中另外 5 个表中的同一列，但必须使用单个数据库

可能吗？

如果可能，请让我知道 SQL 查询语法表单更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:07:31.630

您不能在一个更新查询中更新 5 个不同的表。

您可以编写一个存储过程来更新这 5 个表并调用该过程一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T06:56:55.900

有解决办法。

1.  创建一个视图，使其具有 5 个表连接和 5 个列上的 select 语句。然后更新视图。

2.  在表 1 上写入更新触发器并在表 2 的触发器写入更新中...继续。

我以前没有尝试过，所以先试一试。

# sql - 在与另一个表合并之前按一个参数对一个表进行分组

> ID：10057438
> 
> 赞同：2
> 
> 时间：2012-04-07T19:04:04.017
> 
> 标签：sql, postgresql, merge

我已经成功合并了 3 个表（使用 ID），但是当我尝试添加第 4 个表时 - 输出完全混乱（值变得不切实际/错误）所以我认为我与这个事实有关，即第 4 个表有未分组的 ID，所以我需要在加入这个新表之前对它们进行分组。现在查询如下：

```
SELECT name, SUM(money) AS MONEY
FROM transactions
JOIN results ON transactions.id = results.id
JOIN more ON results.per_id = more.per_id
GROUP BY name
HAVING SUM(money)>500 
```

当我加入新表时：

```
SELECT name, SUM(money) AS MONEY, SUM(data_from_NT1), SUM(data_from_NT2)
FROM transactions
JOIN results ON transactions.id = results.id
JOIN more ON results.per_id = more.per_id

JOIN newtable ON results.per_id = newtable.per_id

GROUP BY name
HAVING SUM(money)>500 
```

**是否可以执行命令 GROUP BY per_id：**

```
(JOIN newtable ON results.per_id = newtable.per_id GROUP BY per_id) 
```

**在将这个新表添加到主表之前？**上面的线不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:22:50.610

是的，这是可能的，但您必须将其编写为 SELECT。这是可能答案的第一个版本：

```
SELECT name,
       SUM(money)             AS money,
       SUM(nt2.data_from_NT1) AS data_from_NT1,
       SUM(nt2.data_from_NT2) AS data_from_NT2
  FROM transactions AS t
  JOIN results      AS r ON t.id = r.id
  JOIN more         AS m ON r.per_id = m.per_id
  JOIN (SELECT per_id, SUM(data_from_NT1) AS data_from_NT1, SUM(data_from_NT2) AS data_from_NT2
          FROM newtable GROUP BY per_id
       ) AS nt2 ON results.per_id = nt2.per_id
 GROUP BY name
HAVING SUM(money) > 500; 
```

目前尚不清楚您是否需要主选择列表中的“SUM of SUM”；你可能不知道。也不清楚`name`or`money`列的来源；我通常也会在它们前面加上适当的表别名。有了这些警告，这可能更接近您所追求的：

```
SELECT name, SUM(money) AS MONEY, nt2.data_from_NT1, nt2.data_from_NT2
  FROM transactions AS t
  JOIN results      AS r ON t.id = r.id
  JOIN more         AS m ON r.per_id = m.per_id
  JOIN (SELECT per_id, SUM(data_from_NT1) AS data_from_NT1, SUM(data_from_NT2) AS data_from_NT2
          FROM newtable GROUP BY per_id
       ) AS nt2 ON results.per_id = nt2.per_id
 GROUP BY name, nt2.data_from_NT1, nt2.data_from_NT2
HAVING SUM(money) > 500; 
```

毫无疑问，还有其他写法。主查询中的分组最好放在并行子查询中，在主查询中留下简单的直接连接。但是我们没有实际为您执行此操作的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T19:16:49.973

您可以将 移动`group by`到子查询：

```
join   (
       select  per_id
       ,       sum(col1) as col1_avg
       ,       avg(col2) as col2_avg
       from    newtable 
       group by
               per_id
       ) as newtable
on     results.per_id = newtable.per_id 
```

如果您对 进行分组`per_id`，则必须聚合任何其他列。

# java - 带有 Fiddler 和 SSL 的 HTMLUnit

> ID：10057440
> 
> 赞同：0
> 
> 时间：2012-04-07T19:04:24.470
> 
> 标签：java, automated-tests, fiddler, htmlunit

我配置了 HTMLUnit，所以它使用 Fiddler 作为代理。但是，当 Fiddler 捕获流量并且我浏览具有 ssl(https) 的站点时，我在 Java 中收到以下错误

“javax.net.ssl.SSLPeerUnverifiedException：对等体未通过身份验证”

反正有解决这个问题吗？我想查看 Fiddler 中的所有 SSL 流量。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:38:22.147

您需要配置 Java 以信任 Fiddler 的根证书，您可以使用工具 > Fiddler 选项 > HTTPS > 导出根证书按钮从 Fiddler 导出该证书。

# callstack - 简述栈帧的概念

> ID：10057443
> 
> 赞同：241
> 
> 时间：2012-04-07T19:05:06.310
> 
> 标签：callstack

似乎我在编程语言设计中得到了*调用堆栈的想法。*但是我找不到（可能是我搜索得不够努力）关于什么是*堆栈帧*的任何体面的解释。

所以我想请人用几句话向我解释一下。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-04-07T19:16:16.733

堆栈帧是被压入堆栈的数据帧。在调用堆栈的情况下，堆栈帧将表示函数调用及其参数数据。

如果我没记错的话，函数返回地址首先被压入堆栈，然后是局部变量的参数和空间。它们一起构成了“框架”，尽管这可能取决于架构。处理器知道每个帧中有多少字节，并在帧被压入和弹出堆栈时相应地移动堆栈指针。

### 编辑：

更高级别的调用栈和处理器的调用栈有很大的不同。

当我们谈论处理器的调用堆栈时，我们谈论的是在汇编或机器代码中在*字节/字级别处理地址和值。*在谈论高级语言时存在“调用堆栈”，但它们是由运行时环境管理的调试/运行时工具，因此您可以记录程序出现的问题（在较高级别）。在这个级别，诸如行号、方法和类名之类的东西通常是已知的。当处理器得到代码时，它完全没有这些东西的概念。

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2016-10-18T11:04:18.657

如果您非常了解堆栈，那么您将了解内存在程序中的工作原理，如果您了解内存在程序中的工作原理，您将了解函数如何在程序中存储，如果您了解函数如何在程序中存储，您将了解递归函数的工作原理以及是否您了解递归函数的工作原理您将了解编译器的工作原理，如果您了解编译器的工作原理，您的思想将作为编译器工作，您将非常轻松地调试任何程序

让我解释一下堆栈是如何工作的：

首先，您必须知道函数在堆栈中的表示方式：

堆存储动态分配的值。
堆栈存储自动分配和删除值。

[![在此处输入图像描述](../Images/5cda1e8a2d9d3c879a7574e2f755832f.png)](https://i.stack.imgur.com/P56ru.jpg)

让我们通过示例来理解：

```
def hello(x):
    if x==1:
        return "op"
    else:
        u=1
        e=12
        s=hello(x-1)
        e+=1
        print(s)
        print(x)
        u+=1
    return e

hello(4) 
```

现在了解该程序的部分内容：

[![在此处输入图像描述](../Images/7fff746c0d445504e4d029fdf57bed4d.png)](https://i.stack.imgur.com/Mu9nS.png)

现在让我们看看什么是堆栈，什么是堆栈部分：

[![在此处输入图像描述](../Images/cee3caac982ae2b1bfac183be648ed0c.png)](https://i.stack.imgur.com/1PI03.png)

> 堆栈分配：

记住一件事：如果任何函数的返回条件得到满足，无论它是否加载了局部变量，它都会立即带着它的栈帧从栈中返回。这意味着只要任何递归函数满足基本条件并且我们在基本条件之后放置一个返回，基本条件就不会等待加载位于程序“else”部分的局部变量。它将立即从堆栈中返回当前帧，随后下一帧现在在激活记录中。

在实践中看到这一点：

[![在此处输入图像描述](../Images/a6f0d5f1f9140abf9c427f23d1bb1772.png)](https://i.stack.imgur.com/N94IW.png)

> 块的释放：

所以现在每当一个函数遇到 return 语句时，它都会从堆栈中删除当前帧。

从堆栈返回时，值将按照与它们在堆栈中分配的原始顺序相反的顺序返回。

[![在此处输入图像描述](../Images/162482abe89eb3b5159203f6ec35d5e3.png)](https://i.stack.imgur.com/5TrkZ.png)

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2012-04-07T19:37:00.510

快速总结一下。也许有人有更好的解释。

调用堆栈由 1 个或多个堆栈帧组成。每个堆栈帧对应于对尚未以返回终止的函数或过程的调用。

为了使用堆栈帧，线程保持两个指针，一个称为堆栈指针（SP），另一个称为帧指针（FP）。SP 始终指向堆栈的“顶部”，而 FP 始终指向帧的“顶部”。此外，线程还维护一个程序计数器 (PC)，它指向要执行的下一条指令。

以下内容存储在堆栈中：局部变量和临时变量、当前指令的实际参数（过程、函数等）

关于堆栈的清理有不同的调用约定。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-04-07T19:08:14.390

“调用堆栈由堆栈帧组成……” — <a href="http://en.wikipedia.org/wiki/Call_stack#Structure" rel="noreferrer">维基百科

堆栈框架是您放在堆栈上的东西。它们是包含要调用的子例程信息的数据结构。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-07-14T10:50:40.670

程序员可能对堆栈帧有疑问，不是广义的（它是堆栈中的一个单一实体，只服务一个函数调用并保留返回地址、参数和局部变量），而是狭义的——当这个术语`stack frames`在编译器选项的上下文。

无论问题的作者是否有意，但从编译器选项方面来看堆栈框架的概念是一个非常重要的问题，此处其他回复未涵盖。

例如，Microsoft Visual Studio 2015 C/C++ 编译器具有以下相关选项`stack frames`：

*   /Oy（帧指针省略）

海合会有以下内容：

*   -fomit-frame-pointer（不要将帧指针保存在不需要的函数的寄存器中。这避免了保存、设置和恢复帧指针的指令；它还在许多函数中提供了一个额外的寄存器)

英特尔 C++ 编译器具有以下功能：

*   -fomit-frame-pointer（确定 EBP 是否用作优化中的通用寄存器）

它具有以下别名：

*   /Oy

Delphi 有以下命令行选项：

*   -$W+（生成堆栈帧）

在这个特定的意义上，从编译器的角度来看，堆栈帧只是*例程的入口和出口代码*，它将锚推入堆栈——也可用于调试和异常处理。调试工具可以扫描堆栈数据并使用这些锚点进行回溯，同时定位`call sites`在堆栈中，即按照它们被分层调用的顺序显示函数的名称。对于 Intel 架构来说，是`push ebp; mov ebp, esp`or `enter`for entry 和`mov esp, ebp; pop ebp`or `leave`for exit。

这就是为什么当涉及到编译器选项时，了解堆栈帧在什么位置对程序员来说非常重要——因为编译器可以控制是否生成此代码。

在某些情况下，编译器可以省略堆栈帧（例程的入口和出口代码），变量将直接通过堆栈指针（SP/ESP/RSP）而不是方便的基指针（BP/ ESP/RSP）。省略栈帧的条件，例如：

*   该函数是叶函数（即不调用其他函数的终端实体）；
*   没有 try/finally 或 try/except 或类似的结构，即没有使用异常；
*   没有使用堆栈上的传出参数调用例程；
*   该函数没有参数；
*   该函数没有内联汇编代码；
*   ETC...

省略堆栈帧（例程的进入和退出代码）可以使代码更小更快，但它也可能对调试器回溯堆栈中的数据并将其显示给程序员的能力产生负面影响。这些是编译器选项，用于确定函数应在哪些条件下具有进入和退出代码，例如：(a) 始终、(b) 从不、(c) 需要时（指定条件）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-02-28T06:15:18.840

堆栈帧是与函数调用相关的打包信息。此信息通常包括传递给函数的参数、局部变量以及终止时返回的位置。激活记录是堆栈帧的另一个名称。堆栈帧的布局由制造商在 ABI 中确定，每个支持 ISA 的编译器都必须符合此标准，但是布局方案可以取决于编译器。通常堆栈帧大小不受限制，但有一个称为“红色/保护区”的概念，以允许系统调用...等在不干扰堆栈帧的情况下执行。

总有一个 SP，但在某些 ABI（例如 ARM 和 PowerPC）上，FP 是可选的。需要放入堆栈的参数只能使用 SP 进行偏移。是否为函数调用生成堆栈帧取决于参数的类型和数量、局部变量以及通常如何访问局部变量。在大多数 ISA 上，首先使用寄存器，如果参数多于专用于传递参数的寄存器，则将它们放置到堆栈中（例如 x86 ABI 有 6 个寄存器来传递整数参数）。因此，有时，某些函数不需要将堆栈帧放入堆栈，只需将返回地址压入堆栈即可。

# android - android应用程序的入口点

> ID：10057448
> 
> 赞同：12
> 
> 时间：2012-04-07T19:06:09.680
> 
> 标签：android, mobile, dalvik

当我们开发一个Android应用程序时，我们总是从`onCreate()`主Activity的方法开始。很明显，在调用之前应该进行一些初始化`onCreate()`。我的问题是：`main`Android 应用程序的入口点（或方法）是什么？Dalvik VM 一开始会调用什么（即，当它完成自己的初始化，并将控制权转移给应用程序时）？我在哪里可以找到这个的代码`main`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T19:13:14.670

正如金士顿所指出的，第一个“入口”点是应用程序类。

但是，获得第一个起点最简单的方法是在调试 onCreate 时检查堆栈。

你可以检查 Instrumentation，这听起来有点像你想要的。

[http://developer.android.com/reference/android/app/Instrumentation.html](http://developer.android.com/reference/android/app/Instrumentation.html)

```
MainActivity.onCreate(Bundle) line: 12  
Instrumentation.callActivityOnCreate(Activity, Bundle) line: 1047   
ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2627  
ActivityThread.handleLaunchActivity(ActivityThread$ActivityRecord, Intent) line: 2679   
ActivityThread.access$2300(ActivityThread, ActivityThread$ActivityRecord, Intent) line: 125 
ActivityThread$H.handleMessage(Message) line: 2033  
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 123 
ActivityThread.main(String[]) line: 4627    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 521  
ZygoteInit$MethodAndArgsCaller.run() line: 868  
ZygoteInit.main(String[]) line: 626 
NativeStart.main(String[]) line: not available [native method] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T19:10:22.360

您应该扩展 Application 类并覆盖 onCreate 方法。

供参考：[应用类](http://developer.android.com/reference/android/app/Application.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T19:27:16.300

我自己不知道，但这听起来是一个有趣的问题。[这是](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/app/Activity.java#Activity.startActivityForResult%28android.content.Intent,int%29)触发新`Activity`代码并遵循代码的代码，您将[在 JNI 代码中结束](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/app/IActivityManager.java#IActivityManager.startActivity%28android.app.IApplicationThread,android.content.Intent,java.lang.String,android.net.Uri%5B%5D,int,android.os.IBinder,java.lang.String,int,boolean,boolean,java.lang.String,android.os.ParcelFileDescriptor,boolean%29)

```
public void startActivityForResult(Intent intent, int requestCode) {
        if (mParent == null) {
            Instrumentation.ActivityResult ar =
                mInstrumentation.execStartActivity(
                    this, mMainThread.getApplicationThread(), mToken, this,
                    intent, requestCode);
            if (ar != null) {
                mMainThread.sendActivityResult(
                    mToken, mEmbeddedID, requestCode, ar.getResultCode(),
                    ar.getResultData());
            }
            if (requestCode >= 0) {
                // If this start is requesting a result, we can avoid making
                // the activity visible until the result is received.  Setting
                // this code during onCreate(Bundle savedInstanceState) or onResume() will keep the
                // activity hidden during this time, to avoid flickering.
                // This can only be done when a result is requested because
                // that guarantees we will get information back when the
                // activity is finished, no matter what happens to it.
                mStartedActivity = true;
            }
        } else {
            mParent.startActivityFromChild(this, intent, requestCode);
        }
    } 
```

Android 源代码是可用的，但获取它有点棘手，因为它的文档记录很差。您必须[安装`repo`](http://source.android.com/source/downloading.html)然后下载该`framework/base`项目

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-18T12:59:11.443

在核心 Java 程序中，我们需要一个 main() 方法，因为在执行字节码时，JVM（Java 虚拟机）将在类中搜索 main() 方法并开始在那里执行。

在 Android 中，（DVM）Dalvik 虚拟机旨在找到一个类，该类是 Activity 的子类，并设置为 LAUNCHER 以从其 onCreate() 方法开始执行应用程序，因此不需要main() 方法。

# sql - 序列不包含任何元素 记录存在

> ID：10057451
> 
> 赞同：0
> 
> 时间：2012-04-07T19:06:42.503
> 
> 标签：sql, linq, azure

我正在通过 linq 查询 SQL Azure 数据库。添加新公司时，该站点会重定向用户以显示刚刚添加的公司。它还在查询字符串中提供了一个 ID。

正在使用的语句是：

```
var Result = (from d in company.Companies
                          join c in company.originalSources on d.originalSource equals c.ID
                          join f in company.revenues on d.turnover equals f.ID
                          join g in company.recordTypes on d.type equals g.ID
                          where d.ID == Convert.ToInt32(Request.QueryString["ID"])
                          select new { d, c, f, g }).First(); 
```

然而，它返回该序列不包含任何元素。我使用了断点来确保 ID 查询字符串具有正确的编号并且记录存在，因此我无法弄清楚它为什么不返回记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:14:32.027

连接运算符执行内部连接。如果 originalSources/revenues/recordTypes 为空，则不会返回任何结果。通过使用“into”运算符来使用左外连接，如下所述：http: [//msdn.microsoft.com/en-us/library/bb397895.aspx](http://msdn.microsoft.com/en-us/library/bb397895.aspx)

# c# - 以编程方式从当前正在媒体播放器中播放的文件中访问 mp3 标签

> ID：10057452
> 
> 赞同：0
> 
> 时间：2012-04-07T19:06:58.613
> 
> 标签：c#, .net, mp3, media-player, media

我的问题与从不同媒体播放器中获取文件信息有关。如何访问在媒体播放器中播放的文件的 mp3 文件标签，例如`winamp`或`aimp`. 我需要实现类似的东西，`last.fm` `scrobller`但我真的不知道从哪里开始。我正在使用`.NET 4`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:20:00.373

如果我没记错的话，last.fm 使用自定义插件为用户提供此类服务。基本上，您为将“当前播放”数据传输到服务器的每种类型的多媒体播放器（winamp、aimp 等）编写自定义插件。插件通常是用 C++ 编写的。

如果这不是一个选项，您可以尝试使用[FindWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)函数访问窗口并找到播放列表窗口（尽管这可能会很麻烦）。

要读取标签数据，您需要自定义或第三方标签阅读器。在 C# 中，我强烈建议使用[taglibsharp](http://download.banshee.fm/taglib-sharp/)。

# hadoop - Hadoop有什么用？

> ID：10057455
> 
> 赞同：0
> 
> 时间：2012-04-07T19:07:09.477
> 
> 标签：hadoop

我正在阅读、阅读和阅读有关这项技术的信息，但我仍然不确定它有什么用处。

1）它似乎不能很好地支持顺序作业，大多数作业本质上都是顺序的。- 不是说它不能工作，但让它工作是非常非常笨拙的。

2) 为什么这不能通过负载平衡服务 + 3rd 方/自定义无 sql 解决方案来完成？NoSql 解决方案，例如。Azure Table 或 Federated Databases 等提供类似 HDFS 的功能，而 map reduce 可以在服务内完成。这将提供更好的关注点分离，同时提供更好的访问，例如顺序读取等等。是的，成本可能是个问题，但如果我有 PB 或 2 PB 的数据需要通过 $$$ 来处理，我最不担心的就是成本。

3) 另一件烦人的事情是将代码运送到文件系统上本地运行。我知道这对性能有好处，但从代码组织/复杂性管理角度来看却很糟糕。否则 ORM 不会那么受欢迎，因为在 UDF 和存储过程中编写所有内容要快得多。我以为我们以前走这条路，看看它有多糟糕。

那么，为什么 Hadoop 如此受欢迎却又笨重又慢呢？我不明白。

请赐教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:18:34.610

代码运行位置如何影响代码组织/管理？它是透明的；这才是重点。

当然 Hadoop 的功能可以使用一堆其他技术的组合来重新创建——M/R 是一种方式，而不是堆栈。

作业管理是通过各种应用程序处理的。

您回答了您自己关于“第 3 方/自定义”解决方案的问题：关键是它是一个框架，可用于消除大部分或所有非数据/应用程序特定的开发。

我也从未经历过“$$$ 是我最不担心的事情”的环境。

我不清楚您对此的实际反对意见是什么。

# objective-c - 使用 NSDateFormatter 解析 ISO 8601

> ID：10057456
> 
> 赞同：1
> 
> 时间：2012-04-07T19:07:13.177
> 
> 标签：objective-c, ios, cocoa-touch, nsdate, iso8601

我已经阅读了关于这个的各种帖子，但仍然没有解决这个问题。

这是我试图解析为`NSDate`对象的字符串：

```
2012-04-08T12:00:00.00+02:00 
```

我知道问题出在时区格式上。这是我正在尝试的日期格式字符串：

```
yyyy-MM-dd'T'HH:mm:SSZZZZ 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:36:09.463

三件事：

*   使用 -[NSDateFormatter getObjectValue:forString:range:error:] 方法来了解有多少字符串被解析，以及哪些错误阻止了进一步解析。

*   ZZZZ 格式字符串对应于“GMT+02:00”之类的内容，其中包含“GMT”。您可能需要将其注入您正在解析的字符串中才能使其工作。

*   Apple 的 Data Formatting Guide 建议[“考虑使用 Unix Functions for Fixed-Format, Unlocalized Dates”](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW12)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T16:01:34.647

现在可以使用专用的 NSISO8601DateFormatter。

# objective-c - 为什么指定的初始化程序不能在其基类中调用辅助初始化程序？

> ID：10057461
> 
> 赞同：9
> 
> 时间：2012-04-07T19:07:42.720
> 
> 标签：objective-c, inheritance, coding-style, designated-initializer

根据文档，Objective-C 中类的指定初始化程序必须调用其基类的指定初始化程序。

另一个规则是辅助初始化器必须调用它们自己类的指定初始化器。

但是如果遵循第二条规则，为什么指定初始化器不能在其基类中调用辅助初始化器呢？这个基础二级初始化器最终会调用它自己关卡的 DI，所以对象仍然会被正确初始化，对吧？

区别似乎在于谁为缺失的变量选择默认值——你或你的基类。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T19:27:49.880

让我们考虑一下`NSSet`。它有一个指定的初始化器：

```
- (id)initWithObjects:(const id *)objects count:(NSUInteger)cnt {
   // initialization code here
   return self;
} 
```

它还有一些辅助初始化器，比如这个：

```
- (id)initWithArray:(NSArray *)array {
    NSUInteger count = array.count;
    id objects[count];
    [array getObjects:objects range:NSMakeRange(0, count)];
    return [self initWithObjects:objects count:count];
} 
```

现在你想要一个`NSSet`自动拒绝字符串“Bob”的子类。因此，您尽职尽责地覆盖了子类中指定的初始化程序，但您调用了 super 的辅助初始化程序之一：

```
@implementation BobRejectingSet

- (id)initWithObjects:(const id *)objects count:(NSUInteger)count {
    NSMutableArray *array = [[NSMutableArray alloc] initWithCount:count];
    for (NSUInteger i = 0; i < count; ++i) {
        if (![objects[i] isEqual:@"Bob"]) {
            [array addObject:objects[i]];
        }
    }
    return [super initWithArray:array];
} 
```

当你这样做时会发生什么：

```
BobRejectingSet *noBobs = [[BobRejectingSet alloc] initWithArray:someObjects]; 
```

由于您没有覆盖`initWithArray:`，因此程序调用`-[NSSet initWithArray:]`，它调用指定的初始化程序`initWithObjects:count:`. 您覆盖了指定的初始化程序，因此它调用了您的方法。您的方法过滤掉 Bobs，然后调用 super 的辅助初始化程序，`initWithArray:`……它转身并再次调用您指定的初始化程序覆盖。无限递归。堆栈溢出。你会得到分段违反核心转储的蓝调。

这就是为什么你总是使用 super 的指定初始化器的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T19:21:06.587

如果指定初始化器在其自己的类中调用辅助初始化器，则它不会充当指定初始化器的角色。指定初始化器的意义在于，子类实现者知道他/她可以覆盖所有其他初始化器将通过的单个初始化器。

如果子类中的指定初始化程序要调用其超类中的非指定初始化程序，则超类初始化程序可能会转而调用另一个初始化程序。由于方法分派的动态特性，它不能将其限制为仅调用在其级别实现的方法。该调用很可能是对子类的覆盖之一，这将汇集到子类的指定初始化程序中，从而导致无限递归。

# struts2 - 拦截器和过滤器之间的区别 - 这是对的吗？

> ID：10057463
> 
> 赞同：13
> 
> 时间：2012-04-07T19:07:57.763
> 
> 标签：struts2, struts

我正在研究这个，以便我可以在面试中做出更好的回应。我一直在寻找一个清晰简洁的答案。

到目前为止，如果我错了或缺乏细节，一定要纠正我：

1.  过滤器是 Servlet API 的一部分，拦截器是 Struts 2。（虽然看起来很明显）
2.  拦截器堆栈触发已配置包中的请求，而过滤器仅适用于其映射的 URL。
3.  拦截器可以通过 excludeMethods 和 includeMethods 配置为根据特定的目标操作方法执行或不执行，而过滤器缺少此功能。
4.  过滤器是拦截过滤器模式的实现，而拦截器是拦截器模式的实现。

这似乎是一个准确而完整的答案吗？我应该添加或更正任何内容吗？线程问题/差异呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T20:29:05.880

我认为第一点就是答案，但你应该能说的不仅仅是

> 拦截器在 struts 2 中，过滤器是 Servlet API 的一部分

事实上，作为一名面试官，我期待并希望在这里您能准确解释 Servelt API 和 Web 应用程序框架（如 Struts 2）之间的区别。这实际上是一个展示您对整个 Java Web 应用生态系统和基础架构的理解的机会。

好的答案可能会涉及：

1.  Struts 2 框架是如何在 Servlet 过滤器中实现的。

2.  哪些特定用例需要在 struts 2 之外但在同一个 Web 应用程序中的 servlet 过滤器？

3.  Servlet API、Web 应用程序、Web 应用程序框架等到底是什么？

我猜想，以显示您对所有这些主题的理解的方式回答就是那里正在寻找的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T11:35:24.333

过滤器来自 Servlet API，拦截器来自 Struts 2，当我们谈论 Web 应用程序和企业应用程序时，区别就来了，过滤器仅用于 Web 应用程序，而拦截器可用于 Web 和企业应用程序。两者的生命周期方法，也不同。

拦截器堆栈在每个请求上触发。过滤器仅适用于为其定义的 url。您可以根据需要使用其中一种。假设您需要验证每个请求是否存在 cookie。使用拦截器。假设您需要在某些请求（由 url 驱动）上弹出一个外部应用程序，使用过滤器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:59:17.570

在一次采访中，我回答了这个问题，例如，

拦截器是 struts2 的概念，应用程序开发人员可以控制它。此外，它与 struts2 应用程序边界一起工作，并且可以访问 Actions、ValueStack 和其他对象以及 Struts2 的好东西。

而 Filter 更适合部署时的配置。它对应用程序的访问权限有限，并且在大多数情况下，它对于部署在服务器中的大多数 Web 应用程序都是通用的。

如果代码中的逻辑与应用程序耦合度更高，它更适合拦截器，或者如果它的基础设施，我们可以将它放在 servlet 过滤器中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-28T02:43:24.930

**过滤器：**

1.  基于 Servlet 规范
2.  在请求的模式匹配上执行。
3.  不可配置的方法调用。

**拦截器：**

1.  基于Struts2。
2.  执行所有符合前端控制器（Servlet 过滤器）的请求。并且可以配置为执行特定操作的附加拦截器。
3.  `excludeMethods`拦截器中的方法可以通过或来配置是否执行`includeMethods`。

# charts - PhpChart 或 Jqplot 线阈值

> ID：10057467
> 
> 赞同：1
> 
> 时间：2012-04-07T19:08:14.247
> 
> 标签：charts, line, jqplot

我是 jqplot 或 phpChart 的新手。我正在使用 jqplot 来表示具有特定颜色的折线图。但我需要的是用不同的颜色设置线的一些点。就像我的线是`(x1,y1), (x2, y2), (x3,y3), (x4, y4)....(xn, yn)`。我想从（`x2, y2), (x3,y3), (x4,y4)`不同的颜色。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:53:45.463

对不起，去年夏天因为一个项目，我在 jqplot 上辛苦了。但是库本身没有这样的功能。我遇到了同样的问题，所以我决定渲染更多这样的行：

![jqplot 图表](../Images/4ba3906653c60765ba60d9c6b2864a50.png)

在我的图表中，我想对警报 1,2 和 3 做同样的事情。但这不可能，所以我只制作了 3 条线，而不是用不同的颜色渲染线的一部分。为此，您必须更改许多基本功能，然后有时您将无法更新它...

# java - “将我的 Java 应用程序带到 Mac OS X”：菜单

> ID：10057469
> 
> 赞同：1
> 
> 时间：2012-04-07T19:08:36.353
> 
> 标签：java, macos

我正在尝试使我的 Java 应用程序与 Mac OSX 更好地集成，并且我已经做到了，以便菜单将转到屏幕顶部。但是，我正在尝试使用以下页面管理*预制应用程序菜单中的退出和关于菜单项：http:* [//java.sun.com/developer/technicalArticles/JavaLP/JavaToMac2/](http://java.sun.com/developer/technicalArticles/JavaLP/JavaToMac2/)

但是，当我尝试`extends Application`在 Eclipse 中创建一个类（在我的 Windows 计算机上）时，我收到一个错误，唯一的选择是创建类，没有可用的导入。有人知道为什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:13:25.340

Application 类仅在 Mac OS X 上可用，因此您不能在 Windows 上扩展它。看看[OSXAdapter](http://developer.apple.com/library/mac/#samplecode/OSXAdapter/Introduction/Intro.html#//apple_ref/doc/uid/DTS10000685-Intro-DontLinkElementID_2)，它展示了一种仅使用反射来集成功能的方法，因此可以在 Mac OS X 上工作，至少可以在其他系统上编译。

# sql - 存储过程名称到 id 的转换

> ID：10057470
> 
> 赞同：1
> 
> 时间：2012-04-07T19:08:36.523
> 
> 标签：sql, postgresql, stored-procedures, plpgsql

我有一张桌子我 有另一张`provider`桌子`id|provider_name|url`
`user``id|name|provider_id`

我想创建一个函数`create_user(name,provider_name)`来检查是否存在具有该提供程序名称的任何提供程序。如果存在则插入行并返回最后一行 id。其他明智的回报`0`。`provider_id`我已经在->上设置了外键完整性`user.id`。两个`id`字段都是`pkey`和`serial`

```
insert into users
  (name, provider_id)
values($1, (
    select id from provider where name = $2
)) returning id 
```

可以吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:09:04.937

你的陈述

```
INSERT INTO users (name, provider_id)
VALUES ($1, (SELECT id FROM provider WHERE name = $2))
RETURNING id; 
```

如果您制作 users.provider_id 将起作用`NOT NULL`。否则，您将输入一个`NULL`不存在的 provider_id 的值。外键约束不禁止这一点！
（我假设你的意思是：`provider_id -> provider.id`，不是`-> user.id`。）

您可能希望也可能不想`users.name UNIQUE`禁止重复名称。

使用唯一名称，代理主键 ( `user.id`) 在大多数情况下仍然有意义。处理整数比处理（更长的）文本更快。特别是如果您有多个其他表引用该表的主键，`user`这通常是这种情况。使用整数作为外键和相关索引的速度要快得多，并且需要更少的磁盘和 RAM 空间。以后进行更改也更容易，例如拆分`name`为`firstname`和`surname`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:18:37.150

如果有多个具有该名称的用户行，这将不起作用。如果用户之间的重复名称是不可能的，那么就可以了。（如果这真的是一个名字，假设不可能有重复似乎是不明智的。）

当然，如果不可能有重复的用户名，那么就没有充分的理由在 user 表上有一个 id 列；我强烈建议只将 name 设为主键并省略 id 列。（它也应该被称为别的东西。）这将简化和加速这个查询，以及整个查询类。这种模式设计还假设一个用户最多可以有一个提供者（如果 provider_id 可以为空）或只有一个提供者（如果 provider_id 不为空）。

# cython - 如何将 Sphinx 与 Cython 一起使用？

> ID：10057476
> 
> 赞同：24
> 
> 时间：2012-04-07T19:08:54.220
> 
> 标签：cython, python-sphinx

我最近通过将所有模块（顶级模块除外`__init__.py`）重命名为`*.pyx`，并`ext_modules = [Extension('foo', ['foo.pyx'])]`放入`setup.py`. 建筑和安装工作正常。但是，当我这样做时`cd doc; make html`，Sphinx 会失败，因为它无法导入现在的任何模块`*.pyx`。

如果我编辑`doc/conf.py`并更改`sys.path.insert(0, os.path.abspath('..'))`为`sys.path.insert(0, os.path.abspath('../build/temp.linux-x86_64-2.7'))`，则 Sphinx 可以找到所有模块并可以生成文档，但在这种情况下，我会收到类似`error while formatting arguments for foo.bar: <built-in function bar> is not a Python function`. 大概这是因为现在 Sphinx 只能访问`*.so`文件，而不是源文件。同样`sys.path`的修改还允许通过 Sphinx ( `make doctest`) 运行文档测试。

我尝试的另一个解决方案是使用扩展名`*.py`而不是`*.pyx`（并使用`ext_modules = [Extension('foo', ['foo.py'])]`in `setup.py`）。在这种情况下，文档构建正确，但我认为 doctests 现在绕过 Cython。

我无法在网上找到有关一起使用 Sphinx 和 Cython 的任何信息。我查看了一些同时使用两者的项目的源代码，但它们似乎没有使用文件中的文档字符串`*.pyx`。我知道 Sage 有，但那个项目太复杂了，我无法分清。

Sphinx 是否支持 Cython 文件中的文档字符串？如果是这样，我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T14:39:58.127

你在这里看起来有点困惑。Sphinx 并不是真正的句法分析器。您的 Python 代码必须可运行才能使 Sphinx 能够捕获文档字符串。这就是为什么将扩展文件重命名为“.py”没有帮助。

好吧，我最近一直在使用 Sphinx 和 Cython，并想分享我的经验......这是从 docstrings 为给定的已编译 Cython 扩展自动生成 html 文档的完整详细过程：

[注意：我使用了 Sphinx 1.1.3 和 Cython 0.17.4]

首先，在 Cython 代码中使用 Python 的“文档字符串”（具有它可能具有的所有限制 - 例如，您无法描述构造函数。请参阅文档字符串规范）[：](http://www.python.org/dev/peps/pep-0257/)

```
cdef class PyLabNode:
    """
    This is a LabNode !!!
    """
    cdef LabNode* thisptr
    cdef PyLabNetwork network

    def __cinit__(self):
       self.thisptr = new LabNode()

    def __dealloc__(self):
       if self.thisptr:
           del self.thisptr

    def SetNetwork(self, PyLabNetwork net):
        """
        Set the network !!!
        """
        self.network = net 
```

并重新编译“yourextension.so”。

然后运行“sphinx-quickstart”并回答问题。当被问及“autodoc”时，不要忘记说是。这将生成“Makefile”、“index.rst”文件和“conf.py”文件。

必须编辑最后一个“conf.py”以告诉 Sphinx 找到您的模块：

```
# If extensions (or modules to document with autodoc) are in another directory,
# add these directories to sys.path here. If the directory is relative to the
# documentation root, use os.path.abspath to make it absolute, like shown here.
#sys.path.insert(0, os.path.abspath('.'))
sys.path.insert(0, os.path.abspath('../../parent/dir/of/yourextension/')) 
```

还必须编辑“index.rst”文件以告知可以分析哪个模块：

```
Contents:

.. toctree::
   :maxdepth: 2

.. automodule:: yourextension
   :members:
   :undoc-members:
   :show-inheritance: 
```

最后通过以下方式构建文档：

```
$ make html 
```

这对我来说已经足够了（我在“.../_build/html/”目录中得到了一组 html 文件）。自从提出上一个问题以来，Sphinx 和 Cython 可能已经进化，但我没有要处理的“签名”问题。没有要使用的特定 Cython 指令，也没有适用于 Sphinx 的任何修复...

希望这可以帮助。

编辑：好吧，我想收回我的话。我在使用 Epydoc 时遇到了“Dan”提到的关于“embedsignature”问题的问题（所以我认为这也是 Sphinx 的问题）。激活此编译器指令无论如何都不会发送符合 python 的签名：

```
PyLabNode.SetNetwork(self, PyLabNetwork net) 
```

这有两个缺点：类前缀和类型参数的虚线表示法。

最后，我能想出发送正确的唯一方法是在文档字符串的第一行写一个兼容的签名，如下所示：

```
def SetNetwork(self, PyLabNetwork net):
    """
    SetNetwork(self, net)
    Set the net !!!
    @param self: Handler to this.
    @type self: L{PyLabNode}
    @param net: The network this node belongs to.
    @type net: L{PyLabNetwork}
    """
    self.network = net 
```

希望这可以帮助 Sphinx 和 Epydoc 用户......

* * *

**编辑：**关于`__cinit__`，我能够通过加倍描述成功地生成文档`Epidoc`（没有尝试使用 Sphinx），如下所示：

```
# For Epydoc only (only used for docstring)
def __init__(self, sim):
    """
    __init__(self, sim)
    Constructor.
    @param sim: The simulator this binding is attached to.
    @type sim: L{PyLabSimulatorBase} 
    """ 

# Real Cython init
def __cinit__(self, PyLabSimulatorBase sim):
   self.thisptr = new LabNetBinding()
   self.sites = []
   simulator = sim 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-08T03:15:45.640

随时留下更好的答案，但这是我找到的修复方法。

该`dipy`项目手动从`doc/conf.py`. 这要求首先安装该模块，但它修复了导入错误（并且 doctests 将在 Cythonized 文件上运行）。

但是，`error while formatting arguments`问题仍然存在。首先，您需要指示 Cython 将方法/函数签名嵌入到`*.so`文件中。通过设置`embedsignature`Cython 指令来做到这一点。该`dipy`项目在每个`*.pyx`文件中设置它，但也可以在其中设置它`setup.py`（有关如何执行此操作，请参阅 Cython 文档）。不过，这仍然没有将方法签名放入 Sphinx 文档中！[这里](https://bitbucket.org/birkenfeld/sphinx/issue/564)有针对方法签名问题的错误报告和补丁。截至目前（1.1.3），它仍未包含在最新的 Sphinx 版本中，但如果您从开发存储库安装 Sphinx，它将起作用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-09T14:17:13.467

`.so`正如 Golgauth 解释的那样，Sphinx 的 autodoc 模块从`.pyx`. 在对 Python 模块进行 cythonizing 时，无需对 Sphinx 配置进行任何更改即可生成文档的最简单方法是在生成文档之前简单地构建扩展*模块*：

```
python setup.py build_ext --inplace 
```

这样，autodoc 将在常规 Python 模块旁边找到扩展模块，并能够按照您的预期生成文档。

为了不冒忘记这一步的风险，您可以在运行之前编辑`Makefile`生成的`sphinx-quickstart`以构建扩展模块`sphinx-build`：

```
html:
  @cd /path/to/setup.py; python setup.py build_ext --inplace
  ... 
```

# php - 使用 PHP+MySQL 创建发票

> ID：10057480
> 
> 赞同：2
> 
> 时间：2012-04-07T19:09:27.900
> 
> 标签：php

我想按照[这里](http://css-tricks.com/html-invoice/)的这篇文章中的描述创建一张发票。

我可以在这里进行编辑甚至打印。但我需要一些建议将其存储到数据库中。我对 MySQL 很好，只是 PHP 的初学者，所以任何人都可以建议我如何进行多个插入。并将客户信息存储在customer表中，将订单信息存储在order表中，并将customer和Order之间的关系存储在另一个表中。参考上面的例子。

[演示](http://css-tricks.com/examples/EditableInvoice/)在这里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T21:51:07.680

它们是 INVOICE 系统中的 4 个部分，客户信息、发票信息、发票项目和项目总计

`Invoice Information`

```
$mysqli = new mysqli ( $dbHost, $dbUser, $dbPass, $dbName ); // Replace with
                                                             // relevant
                                                             // information
$result = $mysqli->query ( "SELECT * FROM invoiceInfo" );
$invoice = $result->fetch_assoc ();

<div id="page-wrap">
    <textarea id="header">INVOICE</textarea>
    <div id="identity">

        <textarea id="address">   
<?php echo $invoice['address']?>
</textarea>

        <div id="logo">

            <div id="logoctr">
                <a href="javascript:;" id="change-logo" title="Change logo">Change
                    Logo</a> <a href="javascript:;" id="save-logo" title="Save changes">Save</a>
                | <a href="javascript:;" id="delete-logo" title="Delete logo">Delete
                    Logo</a> <a href="javascript:;" id="cancel-logo"
                    title="Cancel changes">Cancel</a>
            </div>

            <div id="logohelp">
                <input id="imageloc" type="text" size="50" value="" /><br /> (max
                width: 540px, max height: 100px)
            </div>
            <img id="image" src="images/aviation/logo2.png" alt="logo" />

        </div>

    </div> 
```

`Customer Information`

```
$result = $mysqli->query ( "SELECT *  FROM clientTable WHERE clientID = '{$invoice['clientID']}' " );
$clientInfo = $result->fetch_assoc ();
$totalPayment = 0;

<div id="customer">

    <textarea id="customer-title"><?php echo $clientInfo['clientName']?>

Address:  <?php echo $clientInfo['clientAddress'] ?>  </textarea>

    <table id="meta">
        <tr>
            <td class="meta-head">Invoice #</td>
            <td><textarea>000123</textarea></td>
        </tr>
        <tr>

            <td class="meta-head">Date</td>
            <td><textarea id="date"><?php echo date("Y-m-d g:i:s",time())?></textarea></td>
        </tr>
        <tr style="display: none">
            <td class="meta-head">Total Payment</td>
            <!-- <td><div class="due">-N-<?php echo $totalPayment ?></div></td>  -->
            <td><div>-N-<?php echo $totalPayment ?></div></td>
        </tr>

    </table>

</div> 
```

`Invoice Items`

```
<?php
    $result = $mysqli->query ( "SELECT *  FROM itemTable WHERE clientID = '{$invoice['clientID']}' " );

    while ( $item = $result->fetch_assoc () ) {

        ?>
    <tr class="item-row">
        <td class="item-name"><div class="delete-wpr">
                <textarea><?php echo $item['name'] ?></textarea>
                <a class="delete" href="javascript:;" title="Remove row">X</a>
            </div></td>
        <td class="description"><textarea>
    <?php echo $item['description']?>
    </textarea></td>

        <td><textarea class="cost">-N-<?php echo $item['unit'] ?></textarea></td>
        <td><textarea class="qty"><?php echo $item['quantity'] ?></textarea></td>
        <td><span class="price">-N-<?php echo $item['prize'] ?></span></td>
    </tr>
    <?php
    }
?> 
```

`Item Total`这将自动完成

我希望这有帮助

谢谢 ：）

# opencv - 没有棋盘图像的 3D 校准？

> ID：10057481
> 
> 赞同：2
> 
> 时间：2012-04-07T19:09:36.170
> 
> 标签：opencv, camera-calibration, calibration

我需要很长时间才能让函数在 OpenCV 中运行，所以我想知道我的总体计划是否有意义，然后再深入研究如何实现它。（2.3.1，Windows 7，C++）我会很感激任何建议。

**问题：**

我在飞碟靶场工作，想了解粘土目标飞行的 3D 信息，直到它们被击中。

**数据：**

1.  两个摄像头（最终会有更多）相距几码，所以我无法制作足够大的棋盘让他们都看到。

2.  斜山目​​标区域每侧 50 到 100 码之间有几棵树，至少水平覆盖每个摄像机的视野。我已经测量了到每个特定点的距离（例如第一左肢与躯干的交界处）。

**计划**

1.  将树位置作为 Point3f 对象放入 objectPoints 向量中

2.  找到它们出现在每个相机图像上的点，并将这些 Point2f 对象放入每个相机的 imagePoints 向量中

3.  立体声校准

**问题**

1.  我的计划是否还算可行？

如果是

1.  使用距相机脚的棋盘自行校准每个相机然后将内在矩阵和 distCoeffs 矩阵传递给 stereoCalibrate 会更好吗？

2.  如果我在没有棋盘的情况下进行立体校准，我应该将什么作为大小传递给函数？

**谢谢你的任何建议。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:51:42.950

由于听起来您可以控制环境，因此您可以在范围周围设置校准“点”。对于额外的狡猾点，它们可能是红外 LED。

# php - 多次上传将图像名称放在同一数据库行中

> ID：10057483
> 
> 赞同：-1
> 
> 时间：2012-04-07T19:09:58.460
> 
> 标签：php

嗨，我有这个脚本很好用，但现在我试图让它在同一数据库行中将 3 个图像的名称添加到我的数据库中，如果您上传 3 个图像，$extension 将显示图像的 3 个名称，但我有不知道如何将 3 个名称放入 image1、images2、images3 下的同一数据库行中，有人知道如何做到这一点吗？我尝试了我所知道的一切，但没有运气谢谢。

```
`$connection = mysql_connect("localhost", "????", "????");
mysql_select_db("????", $connection);
$uploaddir = "upload/";
$MaxSize = "600000";
$number_of_files = count($_FILES['userfile']);
for($i=0;$i<=$number_of_files;$i++) {
$filename_format = uniqid(Img_);
if (!$_FILES['userfile']['size'][$i] == 0)
{
if ($_FILES['userfile']['size'][$i] > $MaxSize)
{
echo "ERROR: file too big";
exit;}
$tempfile = $_FILES['userfile']['tmp_name'][$i];
$uploadfile = $_FILES['userfile']['name'][$i];
$extension = $_FILES['userfile']['type'][$i];
if (strstr($extension,"jpeg"))
{
$extension=".jpg";
}
elseif (strstr($extension,"gif"))
{
$extension=".gif";
}
elseif (strstr($extension,"png"))
{
$extension=".png";
}
else
{
echo "ERROR: Only gif/jpeg/png allowed.";
exit;
}
if(copy($tempfile, $uploaddir.$uploadfile))
{
echo "Copy Successfull!";
}
else
{
echo "ERROR: something happened trying to copy the temp file to the folder";
}
if(rename($uploaddir.$uploadfile,$uploaddir.$filename_format.$extension))
{
}else{
$query = "INSERT INTO photos (image1, image2, image3) VALUES ('WHAT TO PUT      HERE?','HERE','AND HERE')";  
$result = mysql_query($query);
echo " and renamed to $filename_format$extension";
}
}
else
{
echo "ERROR: Problem renaming the file.. $uploadfile";
}
}`. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:42:47.277

您不应该在给定的行中放置可变数量的列（事实上，据我所知，大多数 SQL 风格是不可能的）。

例如，如果您有一个带有附件的论坛帖子，您应该执行以下操作：

```
+---------------------------------------------+
| Table `forum_posts`                         |
+-----------+--------------+--------+---------+
| post_name | post_content | etc... | post_id |
+-----------+--------------+--------+---------+
| "Example  | "Blah blah   | ...    |    5    |
|  post"    |  blah..."    |        |         |
+-----------+--------------+--------+---------+ 
```

其中 post_id 是一个自动递增的主键（这基本上意味着此表中的每一行都有一个唯一的 post_id），您应该将图像放在一个新表中，如下所示：

```
+----------------------------------------------+
| Table `forum_post_images`                    |
+------------+------------+---------+----------+
| image_url  | image_name | post_id | image_id |
+------------+------------+---------+----------+
| image1.png | "Lol!"     |   10    |     1    |
+------------+------------+---------+----------+
| image2.jpg | "asdf"     |   1     |     2    |
+------------+------------+---------+----------+
| image3.gif | "Example"  |   3     |     3    |
+------------+------------+---------+----------+ 
```

在这里，每张图片都有一个唯一的 ID（以防万一我们需要它），以及它所属的帖子的 ID。现在您可以执行两个单独的查询来加载论坛帖子及其附加图像：

```
SELECT * FROM `forum_posts` WHERE `post_id` = 5; 
```

和

```
SELECT * FROM `forum_post_images` WHERE `post_id` = 5; 
```

这将在两个查询中返回帖子信息和附加到它的图像。您可以使用相同的方法为您的特定应用程序修改这种设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:24:54.133

这不是一个真正好的数据库设计。如果有人上传了四张图片怎么办？如果他们上传十个呢？这种方法使代码复杂化，因为您必须为同一事物处理多个列，并且还对您可以存储的值数量施加了任意限制。

最好为每个上传的文件使用单独的数据库记录。如果要表明一组文件是“一起”上传的，请创建一个 photo_groups 表，其行代表一起上传的照片集，并让 photos 表中的每条记录都包含 photo_groups 表中记录的 ID。这样，您可以将多个照片记录与单个照片组关联。

# android - Android：菜单无法解析为类型

> ID：10057487
> 
> 赞同：0
> 
> 时间：2012-04-07T19:10:24.140
> 
> 标签：android

我就是这样做的：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.game_menu, menu);
    return true;
} 
```

游戏菜单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/new_game"
      android:title="@string/new_game"/>
<item android:id="@+id/help"
      android:title="@string/help" />
</menu> 
```

但是 Eclipse 一直告诉我菜单不是类型...我尝试导入 R，清理我的项目以及我在网上看到的其他一些东西。

我无法绕过这个问题：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(Menu.NONE, Menu.FIRST + 1, 5, "??").setIcon(
                android.R.drawable.ic_menu_delete);
        menu.add(Menu.NONE, Menu.FIRST + 2, 2, "??").setIcon(
                android.R.drawable.ic_menu_edit);
        return true; 
    } 
```

提前谢谢你，对不起我的拼写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:25:39.793

> xml 文件必须位于 res/menu 文件夹中。还要检查您是否使用正确的命名空间而不是 android.R 导入了 R 类

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-26T13:14:13.940

只需添加 import android.view.MenuItem;

# javascript - 如何在基于移动网络的应用程序中访问用户的电话簿？

> ID：10057488
> 
> 赞同：0
> 
> 时间：2012-04-07T19:10:28.977
> 
> 标签：javascript, mobile, jquery-mobile

是否有允许访问用户电话簿联系人的 Javascript 框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:15:30.800

没有开发这样的 API，但您可以使用[PhoneGap](http://docs.phonegap.com/en/1.0.0/phonegap_contacts_contacts.md.html#Contacts)。这可以帮助您获取电话联系人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T19:14:49.910

按照惯例，由于安全问题，浏览器无权使用本机设备 API。

要实现它，您必须使用Phonegap等中间平台。

[http://phonegap.com/](http://phonegap.com/)

# mysql - 哪个是首选，:includes 或 :joins？

> ID：10057490
> 
> 赞同：1
> 
> 时间：2012-04-07T19:11:12.673
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord

我有一个模型产品，它属于一个类别（产品表中的类别 ID）。我想编写一个查询，其中包含前 20 个产品及其类别名称。我有两种获取方式：

1.  使用`includes`，像这样：

    ```
    Product.includes(:category).
            order(:updated_at).
            limit(20) 
    ```

    并在视图中获取类别名称，如下所示：

    ```
    <%= product.category.name if product.category %> 
    ```

    这将创建如下查询：

    ```
    SELECT `products`.* from `products` ORDER BY `products`.updated_at LIMIT 20
    SELECT `categories`.* from `categories` WHERE `categories`.id IN (1,2,3,4,5..,25) 
    ```

2.  像这样使用`joins`：

    ```
    Product.joins("LEFT JOIN categories ON categories.id = products.category_id").
            select("products.*, categories.name as category_name").
            order(:updated_at).
            limit(20) 
    ```

    并在这样的视图中使用它：

    ```
    <%= product.category_name %> 
    ```

    这将生成如下查询：

    ```
    SELECT products.*, categories.name as category_name from `products` LEFT JOIN categories ON categories.id = products.category_id ORDER BY `products`.updated_at LIMIT 20 
    ```

方法 1 的优点是我们可以使用在 Category 模型上编写的模型级方法，并且代码更易于维护。但它的缺点是它使用单独的查询来查找使用 IN 子句的类别。

哪个是首选方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T04:17:31.987

它不仅仅是偏好，而是性能与可维护性的问题。我会首先为您的查询采用更易于维护的路线。如果某些查询的性能开始受到影响，请使用连接语法进行优化，或者从头开始编写普通的旧 sql。不要过早优化。优化您发现实际需求的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:23:31.710

对于您的示例，我可能会选择选项 1，因为它更简单、更易于阅读，而且您没有加载那么多对象，所以我认为性能影响不会太严重。

在您可能要加载更多数据的情况下（例如，如果您取下`limit(20)`零件），我会选择选项 2，因为当您只需要它们的名称时，它可以避免实例化 Category 对象。在较小的列表中，这种开销可能可以忽略不计，但随着列表变长，它会变得很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T01:47:01.040

**首选**方式是您个人喜欢的方式。

不过老实说，我不认为使用 an`includes`有什么大不了的。特别是在开发应用程序时，您在页面上放置的内容将会发生变化。

在我看来，只是`includes`在这种情况下使用大部分时间。除非您在行中存储了大量数据，`text`或者您开始​​生产并且该查询最终成为瓶颈，否则您可能应该花时间优化它。

# cakephp - 如何通过 Html 帮助程序（图像方法）获得到 img 标签中图像的完整链接？

> ID：10057491
> 
> 赞同：2
> 
> 时间：2012-04-07T19:11:27.553
> 
> 标签：cakephp, cakephp-2.1

我在电子邮件布局中有这个代码片段：

```
 <div>
    <?php echo $this->Html->image('Layouts/default/Logo.png', array(
      'alt' => 'Setin SRL',
      'url' => $this->Html->url(array('action' => 'index'), true)
    )); ?>
  </div> 
```

然而这并不好。我可以通过`url(array('action' => 'index'), true)`

但是我也找不到任何可以为图像设置为 true 的参数。关于如何执行此操作的任何建议或解决方法？

**编辑1：** 基本上，我需要这个链接：成为`Layouts/default/Logo.png`img *src*`http://www.something.com/Layouts/default/Logo.png`

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:26:24.867

我总是用

```
$this->Html->link($this->Html->image(...), $this->Html->url(array('action' => 'index'), true), array('escape'=>false)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T21:40:59.297

我想这就是你要找的。

```
<?
echo $this->Html->image(Router::url('/') . 'Layouts/default/Logo.png');
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-23T07:45:20.230

您正在寻找的可能是在方法实现中使用的[HtmlHelper::assetUrl](http://api.cakephp.org/2.1/class-Helper.html#_assetUrl)`image`函数：

```
public function image($path, $options = array()) {
    $path = $this->assetUrl($path, $options + array('pathPrefix' => Configure::read('App.imageBaseUrl')));
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T03:51:34.600

```
$img = '<img src="http://some-img-link" alt="some-img-alt"/>';

$src = preg_match('/<img src=\"(.*?)\">/', $img);

echo $src; 
```

我想`src`从 img 标签中获取值，也许是 alt 值*

# android - Android：Fusion drawable 创建位图

> ID：10057497
> 
> 赞同：0
> 
> 时间：2012-04-07T19:11:47.570
> 
> 标签：android, bitmap

我正在开发一个应用程序，用户可以在其中在 T 恤上添加不同的徽标（可绘制）（也可以绘制..）。

我想知道的是，因为 android 没有“快照”方法，除非被植根（或使用使用 3rd 方服务的快照库，我不希望这样）有没有办法融合我的可绘制对象来创建一个 .巴布亚新几内亚？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:43:07.790

这可能会有所帮助 [http://www.brighthub.com/mobile/google-android/articles/30676.aspx](http://www.brighthub.com/mobile/google-android/articles/30676.aspx)

你应该用那些关键词 android canvas to bitmap 做一些研究

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:46:33.310

一个非常简单的解决方案：

[http://code.neenbedankt.com/how-to-render-an-android-view-to-a-bitmap](http://code.neenbedankt.com/how-to-render-an-android-view-to-a-bitmap)

# c# - 库中的覆盖方法

> ID：10057499
> 
> 赞同：3
> 
> 时间：2012-04-07T19:12:17.027
> 
> 标签：c#, methods, overriding, virtual

我的 C# 项目引用的库中有一个虚拟方法。如何在我的应用程序的另一个类中覆盖此方法？

例子：

```
namespace TheLibary
{
   class SomeClass
   {
      public virtual void TheMethod()
      {
           //Do Stuff
      }
   }
} 
```

然后在我的项目中：

```
using theLibary;
namespace TheProject
{
   class SomeClass
   {
       public override <Help>
   }
} 
```

**编辑：**困惑并完全忘记了这个类不是从库类继承的，这把我搞砸了，已经很晚了:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T19:17:59.020

在开始任何严肃的编码之前，您应该学习一些关于 OOP（尤其是继承）的知识。为了快速参考，下面是一个如何覆盖方法的示例：

```
namespace TheDll
{
    public class SomeClass
    {
        public virtual void TheMethod()
        { }
    }
}

namespace TheProject
{
    public class DerivedClass : SomeClass
    {
        public override void TheMethod()
        { }
    }
} 
```

您应该注意到覆盖方法的签名（包括其名称）*必须*相同。另一方面，派生类可能（并且为了清楚起见通常应该）以不同的方式命名。

# php - 选择具有动态内容的 MySQL 表

> ID：10057504
> 
> 赞同：2
> 
> 时间：2012-04-07T19:13:11.840
> 
> 标签：php, mysql

我有一堆类似于 Client# 和 # 更改的表。有没有办法创建一个查询来根据您从登录时获得的客户编号查询该表？

给出想法的例子：

```
 $q2 = "SELECT * FROM users WHERE username = '".$_SESSION['username']."'";
        $result2 = mysql_query($q2,$conn);
        $row = mysql_fetch_assoc($result2);
        $_CLIENT_ID = $row['CLIENTID'];
        $q2 = "SELECT * FROM client+".$_CLIENT_ID.""; 
```

有一个更好的方法吗？

我试图让客户留在他们自己的桌子上，这样他们就不会变得庞大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:15:47.723

> *我试图让客户留在他们自己的桌子上，这样他们就不会变得庞大。*

这几乎总是错误的策略。表的大小并不像您如何为访问建立索引那么重要，如果有必要，以后可以对其进行[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)。处理此问题的正确方法只是在一个表中标识客户 ID 的列。

使用适当的客户端识别列，您可以查询为：

```
SELECT othertable.* 
FROM
  users 
  JOIN othertable ON users.CLIENTID = othertable.CLIENTID
WHERE users.username = '$_SESSION['username']' 
```

处理动态表名变得很麻烦，不仅因为它更难查询。例如，您不能在 PDO 和 MySQLi 等许多参数化查询 API 中使用占位符代替表名：

```
// Won't work with a PDO prepared statement.  :clienttable place holder isn't allowed
SELECT * FROM :clienttable WHERE value=:someval 
```

# android - 使用两个片段将页脚添加到布局

> ID：10057509
> 
> 赞同：0
> 
> 时间：2012-04-07T19:13:54.570
> 
> 标签：android, android-layout, android-fragments

我使用了两种带有片段的布局，一种用于纵向模式，一种用于横向。我需要为两种布局添加一个粘性页脚，并且我已经成功地将它添加到纵向布局中，但是当我对横向布局使用类似的代码时，它不起作用。如果我将`layout_width`片段的 设置为`0dp`，我看不到任何片段，如果我将 设置`layout_width`为`wrap_content`或`fill_parent`，片段彼此重叠。

这是我到目前为止所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
>
    <!-- Footer -->     
    <TextView 
            android:id="@+id/footer" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:layout_alignParentBottom="true"
     />
    <!-- Footer -->

    <fragment android:name="com.app.listing1"
            android:id="@+id/fragment1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_above="@id/footer"            
     />

    <fragment android:name="com.app.listing2"
            android:id="@+id/fragment2"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_above="@id/footer"            
     />

</RelativeLayout> 
```

编辑

我已经离我想要的更近了一点。如果我在 fragment1 上设置了一个宽度，那么我会得到我正在寻找的东西，但这显然并不理想。出于某种原因，在两个片段的布局以及每个片段中的布局上设置 layout_width="wrap_content" 会导致第一个片段占据整个屏幕：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
>
    <!-- Footer -->     
    <TextView 
            android:id="@+id/footer" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:layout_alignParentBottom="true"
     />
    <!-- Footer -->

    <fragment android:name="com.app.listing1"
            android:id="@+id/fragment1"
            android:layout_width="200dp"
            android:layout_height="fill_parent"
            android:layout_above="@id/footer"            
            android:layout_toLeftOf="@id/fragment2"
     />

    <fragment android:name="com.app.listing2"
            android:id="@+id/fragment2"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_above="@id/footer"            
            android:layout_toRightOf="@id/fragment1"
     />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:40:51.693

编辑：

片段彼此重叠，因为您没有在 RelativeLayout 中对齐它们。如果您希望它们水平排列，请使用`layout_toRightOf`或`layout_toLeftOf`

# javascript - Backbone Facade/Mediator 模式挑战

> ID：10057511
> 
> 赞同：2
> 
> 时间：2012-04-07T19:14:15.903
> 
> 标签：javascript, design-patterns, backbone.js, requirejs, facade

我正在玩弄在 Backbone.js 中实现*Facade*和*Mediator模式的光环（* [http://github.com/addyosmani/backbone-aura](http://github.com/addyosmani/backbone-aura)）示例。我希望有人熟悉这个概念。我正在尝试读取变量（例如，在此示例中，**我在外观的***renderComplete*部分中。我（如果可能的话）如何访问 Appview 的函数/变量？

 *****console.log(this.i); 返回一个未定义的，所以我猜我在某处失去了范围

```
define([
  'jquery',
  'underscore', 
  'backbone',
  'text!templates/master.html',
  '../aura/mediator',
  '../aura/facade',
  '../subscriptions'
], function($, _, Backbone, masterTemplate, Mediator, Facade){

var AppView = Backbone.View.extend({
  el: "body",
  i : 5,

  template: _.template(masterTemplate),

  facade: {
    routeChange: Facade.extend("masterViewChange", "routeChanged", function(route){
      console.log("Change view to " + this.i);
    }),
    renderComplete: Facade.extend("postMasterRender", "masterRendered", function(){
      console.log(this.i);  
    })
  },

  events: {},

  initialize: function() {
    this.render();
    Mediator.publish("masterRendered", this);
  },

  render: function() {
   $(this.el).html(this.template());
  }

});
  return AppView;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T02:37:14.607

当您发布“masterRendered”通知时，您正在传递对当前视图的引用作为第二个参数（this）。第二个参数被传递给您在 renderComplete 中定义的回调函数。所以你需要写这样的东西：

```
function (obj) { console.log(obj.i); } 
```

代替：

```
function () { console.log(this.i); } 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:35:15.157

您需要通过在 View 的初始化程序中执行以下操作来将外观方法绑定到您的 View 上下文：

```
initialize: function()
{
    _.bindAll(this, "facade.routeChange", "facade.renderComplete");
} 
```

尽管我质疑 _.bindAll 是否可以处理您要绑定的函数是另一个对象的属性的这种情况。*****

# ruby-on-rails - 不同帖子的不同背景图片 - Rails

> ID：10057520
> 
> 赞同：1
> 
> 时间：2012-04-07T19:15:06.650
> 
> 标签：ruby-on-rails, image

有没有办法让我为我的 Rails 应用程序上的特定帖子添加单独的背景图像？

在我的 Rails 应用程序中，我有不同的混音带，我想为某些混音带“显示”视图添加自定义背景图像（虽然不是每个混音带）。

我会自己上传图片。

是否有宝石或教程向我展示如何完成此操作？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:31:55.897

有不同的方法可以做到这一点，最简单的一种（在我看来）是定义一个负责它的 CSS 选择器并从你的 Rails 应用程序中设置它。

类似于以下伪代码：

```
%div{:class => @post.bg_class} 
```

那么你的`application.css`文件应该包括如下内容：

```
div.img1 {
    background-image:url(img1.gif);
}
div.img2 {
    ...
} 
```

或者您可以直接使用必要的样式设置您的 div 样式（未测试此样式）：

```
%div{:style => "background-image: #{@post.bg_image};"} 
```

但困难的部分是为每个不同的帖子找到背景图片......

# linux - linux下监控和记录/dev/pts/1

> ID：10057521
> 
> 赞同：3
> 
> 时间：2012-04-07T19:15:16.790
> 
> 标签：linux, terminal, pty, pts

我想监视和记录一个伪终端设备 /dev/pts/12 （用于调试目的），即我想查看写入终端的内容，并且我不希望使用终端的任何进程注意到。

显而易见的解决方案

```
 cat /dev/pts/1 
     cat </dev/pts/1 
```

不起作用：充其量，它似乎只捕获击键。

换句话说，我想要一些类似于 script -t file.timings typescript 的输出；但我也需要击键。Reptyr -l $PID 是另一个可能有帮助的程序：它将进程 $PID 的输出重定向到另一个 /dev/pts 或管道。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-10T12:14:55.023

对于普通的 tty，你有 screendump 甚至 cat vcs 文件，但是 afaik 没有办法在伪终端上做到这一点，至少是简单的方法，也许你应该看看这个：

[间谍](http://ace-host.stuart.id.au/russell/files/conspy/)

希望这可以帮助

# linux - 如何访问 virtualbox 中的共享文件夹。主机 Win7，来宾 Fedora 16？

> ID：10057522
> 
> 赞同：26
> 
> 时间：2012-04-07T19:15:22.807
> 
> 标签：linux, virtualbox, windows-xp, fedora

我是linux的新手。我在 Window 7 的 virtualbox 中将 Fedora 16 操作系统作为访客安装。现在，我想从 Fedora 访问共享文件夹。这是我做的事情：

*   安装访客添加 [OK]
*   将共享文件夹链接到 virtualbox [OK]。Window 7 中的共享文件夹路径：`D:\share_folder_vm`
*   在 fedora 的终端程序中，我只运行一些命令：

    ```
    [hoangphi@localhost ~]$ su
    Password: 
    [root@localhost hoangphi]# cd Desktop/
    [root@localhost Desktop]# mkdir share_folder
    [root@localhost Desktop]# sudo mount -t vboxsf D:\share_folder_vm \share_folder
    /sbin/mount.vboxsf: mounting failed with the error: Protocol error
    [root@localhost Desktop]# 
    ```

我收到了这条消息：`/sbin/mount.vboxsf: mounting failed with the error: Protocol error`

`share_folder_vm`是 Win7 Host`share_folder`中的文件夹，是 Fedora Guest 中的文件夹。

我的问题：我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-07T16:56:47.040

安装 Oracle 来宾添加：

`[host-hotkey (usually right Ctrl)] + [d]`,

然后：

```
sudo /media/VBOXADDITIONS_4.*/VBoxLinuxAdditions.run 
```

您现在可以享受：

*   可以以本机屏幕分辨率运行的来宾
*   能够在主机和来宾之间共享文件
*   共享剪贴板（允许您在主机和访客之间复制和粘贴）。

要共享文件夹，请将它们设置为共享。考虑权限。请注意，主机文件权限是暂时的。IOW 如果您无法写入主机上的文件，则客人也不能。

设置要共享的文件后，如果没有，请创建一个目标： mkdir -p ~/destination

现在以您配置它的名称安装它：

```
sudo mount -t vboxsf myFileName ~/destination 
```

作为一个额外的提示，您可以真正利用此功能执行以下操作： - 使用来宾颠覆客户端创建存储库到挂载目录（您不会有完整的 svn 客户端，但该存储库可以在主机上的 IDE 中使用）。- 我个人使用我的来宾下载和解压缩像 Tomcat 这样的二进制文件到目标挂载。是的，您可以使用 Linux 在 Windows 上安装东西！

要卸载所有共享：

```
sudo umount -f -a -t vboxsf 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-06T15:31:33.193

这个线程有一些很棒的提示。然而....

@GirishB 的回答不正确 - 抱歉。Jartender的最好。

此外，这里的每一篇文章似乎都假设您以 root 身份登录 Linux 来宾，@tomoguisuru 除外。呸！不要使用 root，在需要 root 权限时使用单独的用户帐户和“sudo”。那么这个用户（或任何其他需要共享文件夹的用户）应该是 vboxsf 组的成员，@tomoguisuru 的命令是完美的，甚至比我使用的更简洁。

忘记自己运行 mount 。将共享文件夹设置为自动挂载，您会找到共享文件夹 - 它位于我的 OEL 中的 /media 下（RH 和 Centos 可能相同）。如果它不存在，只需运行不带参数的“mount”并查找类型为 vboxsf 的已安装目录。

![终端显示“挂载”以及在哪里可以找到挂载的共享文件夹](../Images/199351733465115d728b971f789ae9cb.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-08T10:29:07.870

要访问共享文件夹，您必须安装“Oracle VM 扩展包”。

查看此链接的底部，您可以从那里下载。

[http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html](http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-18T13:23:33.687

我只是想。您需要先使用 VirtualBox 添加一个共享文件夹，然后才能使用来宾访问它。

点击菜单栏中的“设备”--->共享文件--->添加目录并命名

然后在访客终端中，使用：

```
sudo mount -t vboxsf myFileName ~/destination 
```

不要直接引用主机目录

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-25T21:01:55.500

我在运行 Linux Mint 时发现了一种更简单的方法。

1.  确保从命令行安装 Guest Additions，并且在机器设置的“共享文件夹”选项卡中选择了与“自动挂载”和“永久设置”设置共享的文件夹
2.  从 Mint 菜单中的应用程序/设置/系统设置/菜单选择（需要 sudo）启动用户管理应用程序
3.  在“权限和组”选项卡中，选中“vboxsf”组旁边的框，然后应用并确定退出。

vboxsf 组中的任何用户在每次启动时都可以完全访问任何共享文件夹，无需手动安装或卸载

除了上述之外，我通常还会执行以下操作，以便快速访问

1.  打开 Dolphin 文件管理器并导航到 /media/
2.  右键单击共享文件夹，然后单击“添加到位置”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-16T22:05:35.057

您可能需要从以下位置更改您的安装命令：

```
[root@localhost Desktop]# sudo mount -t vboxsf D:\share_folder_vm \share_folder 
```

至：

```
[root@localhost Desktop]# sudo mount -t vboxsf share_name \share_folder 
```

其中 share_name 是 VirtualBox -> Shared Folders -> Folder List 列表框中共享的“名称”。您拥有的参数（“D:\share_folder_vm”）是主机上共享的“路径”，而不是“名称”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T16:14:53.053

可能这可以帮助其他人：我有同样的问题，在用谷歌查找后，我发现这可能是因为文件夹的权限......所以，你需要先添加权限......

```
$ chmod 777 share_folder 
```

然后再次运行

```
$ sudo mount -t vboxsf D:\share_folder_vm \share_folder 
```

在此处查看答案：[在 Ubuntu 客户机中安装 VirtualBox 共享文件夹时出错](https://askubuntu.com/questions/30396/error-mounting-virtualbox-shared-folders-in-an-ubuntu-guest)...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-11T09:46:06.633

VirtualBox版本与Linux版本有很多不兼容的地方，所以使用“Guest Addition CD image”很难安装。对于 linux 发行版，它经常有一个很好的配套 Guest Addition 软件包（相当于 CD 映像的功能），可以通过以下方式安装：

```
sudo apt-get install virtualbox-guest-dkms 
```

之后，在Guest的窗口菜单中，进入Devices->Shared Folders Settings->Shared Folders并在Machine Folders中添加一个主机窗口文件夹（标记自动挂载选项）然后你可以在Files的文件中看到共享文件夹来宾 Linux。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-03-28T13:14:55.867

[这里有一个非常简单的教程： http](http://my-wd-local.wikidot.com/otherapp:configure-virtualbox-shared-folders-in-a-windows-ho) ://my-wd-local.wikidot.com/otherapp:configure-virtualbox-shared-folders-in-a-windows-ho

告诉做：

sudo mkdir /mnt/vbox_share
sudo mount.vboxsf nameAddesAsShared /mnt/vbox_share

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-05-09T05:40:27.560

这些是将文件夹从 Windows 共享到 Linux Virtual Box 的步骤

**第 1 步**：从此[链接安装 Virtual Box Extension Pack](http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html#extpack)

**第 2 步**：安装 Oracle 来宾添加：

通过按 ->`Right Ctrl`和`d`一起

运行命令 `sudo /media/VBOXADDITIONS_4.*/VBoxLinuxAdditions.run`

**第 3 步**：单击“然后共享文件夹”中的“设置”->“+”创建共享文件夹，`Vbox` 并为文件夹命名（例如 VB_Share） 在 Windows 上选择共享文件夹路径（例如 D:\VBox_Share）

**第 4 步**：创建一个名为`VB_share`in `home\user-name`（例如 home\satish\VB_share）的文件夹并共享 `mkdir VB_Share` `chmod 777 VB_share`

**第 5 步**：运行以下命令 `sudo mount –t vboxsf vBox_Share VB_Share`

# mongodb - 使用 MongoDB shell 获取嵌套字段

> ID：10057523
> 
> 赞同：4
> 
> 时间：2012-04-07T19:15:23.767
> 
> 标签：mongodb, mongodb-query, database, nosql

我有一个带有“关注列表”字段的“用户”集合，其中也有许多内部字段，其中之一是“arrangeable_values”（“关注列表”中的第二个字段）。

我需要为“用户”集合中的每个用户找到“关注列表”中的每个“arrangeable_values”。

我怎么能用 mongodb shell 做到这一点？

这是数据模型的示例：

```
> db.users.findOne({'nickname': 'superj'})
{
    "_id" : ObjectId("4f6c42f6018a590001000001"),
    "nickname" : "superj",
    "provider" : "github",
    "user_hash" : null,
    "watchlists" : [
        {
            "_id" : ObjectId("4f6c42f7018a590001000002"),
            "arrangeable_values" : {
                "description" : "My introduction presentation to node.js along with sample code at various stages of building a simple RESTful web service with journey, cradle, winston, optimist, and http-console.",
                "tag" : "",
                "html_url" : "https://github.com/indexzero/nodejs-intro"
            },
            "avatar_url" : "https://secure.gravatar.com/avatar/d43e8ea63b61e7669ded5b9d3c2e980f?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png",
            "created_at" : ISODate("2011-02-01T10:20:29Z"),
            "description" : "My introduction presentation to node.js along with sample code at various stages of building a simple RESTful web service with journey, cradle, winston, optimist, and http-console.",
            "fork_" : false,
            "forks" : 13,
            "html_url" : "https://github.com/indexzero/nodejs-intro",
            "pushed_at" : ISODate("2011-09-12T17:54:58Z"),
            "searchable_values" : [
                "description:my",
                "description:introduction",
                "description:presentation",
                "html_url:indexzero",
                "html_url:nodejs",
                "html_url:intro"
            ],
            "tags_array" : [ ],
            "watchers" : 75
        },
    {
        "_id" : ObjectId("4f6c42f7018a590001000003"),
        "arrangeable_values" : {
            "description" : "A Backbone alternative idea",
            "tag" : "",
            "html_url" : "https://github.com/maccman/spine.todos"
        },
        "avatar_url" : "https://secure.gravatar.com/avatar/baf018e2cc4616e4776d323215c7136c?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png",
        "created_at" : ISODate("2011-03-18T11:03:42Z"),
        "description" : "A Backbone alternative idea",
        "fork_" : false,
        "forks" : 31,
        "html_url" : "https://github.com/maccman/spine.todos",
        "pushed_at" : ISODate("2011-11-20T22:59:45Z"),
        "searchable_values" : [
            "description:a",
            "description:backbone",
            "description:alternative",
            "description:idea",
            "html_url:https",
            "html_url:github",
            "html_url:com",
            "html_url:maccman",
            "html_url:spine",
            "html_url:todos"
        ],
        "tags_array" : [ ],
        "watchers" : 139
    }
    ]
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T12:57:50.463

对于上面的文档，以下 find() 查询将提取文档的“昵称”及其关联的“arrangeable_values”（文档在用户集合中的位置）：

```
db.users.find({}, { "nickname" : 1,  "watchlists.arrangeable_values" : 1 }) 
```

您为单个文档示例获得的结果将是：

```
{ "_id" : ObjectId("4f6c42f6018a590001000001"), "nickname" : "superj", 
"watchlists" : [    
     {  "arrangeable_values" : {    "description" : "My introduction presentation to node.js along with sample code at various stages of building a simple RESTful web service with journey, cradle, winston, optimist, and http-console.",     "tag" : "",     "html_url" : "https://github.com/indexzero/nodejs-intro" } },   
     {  "arrangeable_values" : {    "description" : "A Backbone alternative idea",  "tag" : "",     "html_url" : "https://github.com/maccman/spine.todos" } } 
] } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:24:20.707

MongoDB 查询返回整个文档。您正在文档内部的数组中寻找一个字段，这将破坏`find()`.

这里的问题是任何基本`find()`查询都会返回所有匹配的文档。`find()` *确实*可以选择仅返回特定字段。但这不适用于您的子对象数组。你可以退货`watchlists`，但不能`watchlist entries that match`。

就目前而言，您有两种选择：

1.  编写一些遍历文档并进行过滤的客户端代码。请记住，shell 实际上是一个 javascript 驱动程序，因此您可以在其中编写代码。
2.  使用新的[聚合框架](http://www.mongodb.org/display/DOCS/Aggregation+Framework)。这将有一个学习曲线，但它可以有效地提取您正在寻找的子项目。

# terminology - “语言结构”是什么意思？

> ID：10057524
> 
> 赞同：34
> 
> 时间：2012-04-07T19:15:25.407
> 
> 标签：terminology, language-construct

我正在从[Stephen Kochan 的“Programming in C”中](http://www.goodreads.com/book/show/26436.Programming_in_C)学习C。

虽然作者从一开始就很小心，只是不让学生用行话来混淆视听，但偶尔他会使用一些术语而不解释它们的含义。在互联网的帮助下，我已经弄清楚了许多此类术语的含义。

但是，我无法理解“语言结构”这个短语的确切含义，不幸的是，网络没有提供很好的解释。

考虑到我是初学者，“语言结构”是什么意思？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-07T20:04:58.043

First, you need to understand what a [constructed language](http://en.wikipedia.org/wiki/Constructed_language) is. All programming languages are constructed languages (read the reference). You may then read a little bit about [compiler construction](http://en.wikibooks.org/wiki/Compiler_Construction/Introduction), including this [reference](http://www.personal.kent.edu/%7Ermuhamma/Compilers/compiler.html) as well.

Going back to your question, consider this: The English language (a natural language) has tokens **'A-Z/0-9/,;"...'** which we use to build **"words"** and we use **languages rules** to build sentences out of words. So, in the English language, a construct is what we build out of tokens.

Consider this brick-and-mortar example: Imagine if you set out to build a house, the basic materials you might use are: sand, iron, wood, cement, water (just five for simplicity). Anything you build out of these 4 or 5+ items would be a "construct", which in turn helps you build your house.

I have intentionally omitted details to further simplify the answer; hope this is helpful.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-07T19:22:11.797

语言结构是一段语言语法。例如，以下是 C 中的一种语言结构，可让您控制程序的流程：

```
if ( condition ) {
  /* when condition is true */
} else {
  /* when condition is false */
} 
```

它们通常使用术语**语言结构**，因为它们是大多数编程语言的一部分，但可能会因语言而异。例如，*bourne shell*中类似的语言结构是：

```
if COMMAND; then
  # when command returns 0
else
  # when command returns anything else
fi 
```

这个结构的功能是相同的，但是它的编写方式有点不同。

Hope this helps. If you need more detail, you may want to do a bit more research. As one of the comments suggests, Wikipedia may be helpful.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-07T19:24:55.843

They are the base units from which the language is built up. They can't be used as a function rollback. They are directly called by the parser. It includes all the syntax, semantics and coding styles of a language. For more clarification you may refer to [this question](https://stackoverflow.com/questions/1180184/what-is-the-difference-between-a-language-construct-and-a-built-in-function-in).

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-07T19:25:56.533

[Wikipedia](http://en.wikipedia.org/wiki/Language_construct) definition:

> A language construct is a syntactically allowable part of a program that may be formed from one or more lexical tokens in accordance with the rules of a programming language. The term Language Constructs is often used as a synonym for control structure, and should not be confused with a function.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-07T19:21:57.997

在没有看到使用该短语的上下文的情况下，我无法确定，但通常“语言结构”这个短语仅表示关键字、语法和编码语言结构的组合。基本上，如何格式化/编写/构造一段代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-25T16:26:06.817

Let say you want to create a class containing methods and properties, so:

> Construct is an architecture of a class you are about to create. The architecture of the class consists of methods and properties created by you by using predefined utilities (such as: 'if', 'else', 'switch', 'break', etc)

That's my take on construct.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-20T10:12:42.860

In reference to a programming language

```
 Language Constructs mean the basic constructs of a programming languge e.g
1\. Conditions (if, else, switch)
2\. Loops (For, While, Do-while) etc 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-20T10:25:39.667

C is a structural language so while compiling your code everything thing goes statement by statement. Thus it becomes necessary to place your statement properly. This placing i.e. putting your statement correctly is your language construct else there may be syntax error or logical error.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-04T15:18:35.183

Language constructs according to the GCSE book are basic building block of a programming language. that are

```
1\. Sequential,     
2\. Selection, if, if/else    
3\. Iteration, while, for 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-03T12:56:04.237

**Language construct** is a piece of language **syntax**.

Example:

A declaration of a variable is a language construct:

```
{
int a; // declaration of a variable "a"
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-16T03:16:09.440

A language construct is a piece of syntax that the compiler has intimate knowledge about, usually because it needs to handle it specially. Typical examples of language constructs are the short-circuiting operators found in many imperative languages. Because these operators require lazy evaluation in an otherwise eager language, they must be handled specially by the compiler.

So, a stricter definition of a language construct may be: a syntactical form that is handled specially by the compiler, having functionality that cannot be implemented by a user.

# php - 可以从命令行使用 Gii 功能吗？

> ID：10057525
> 
> 赞同：0
> 
> 时间：2012-04-07T19:15:30.573
> 
> 标签：php, command-line, yii

我是 Yii 新手（来自 Django、Rails 等世界），想知道是否可以从命令行为控制器、模型、视图等使用 Gii 脚手架功能。

我有兴趣从头开始创建一个站点，而不是构建与框架一起打包的站点。

解决此问题的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:22:46.067

您可以使用 YIIC 的 shell 从命令行创建控制器和模型

```
%YiiRoot/framework/yiic shell

>> controller message helloWorld
generate MessageController.php
mkdir /Webroot/demo/protected/views/message
generate helloworld.php
generate index.php
Controller 'message' has been created in the following file:
/Webroot/demo/protected/controllers/MessageController.php
You may access it in the browser using the following URL:
http://hostname/path/to/index.php?r=message
>> 
```

~使用 Yii 1.1 和 PHP5 开发敏捷 Web 应用程序 {book}

希望这可以帮助

# android - 单击时从 ListView 中的项目获取字符串名称。安卓

> ID：10057536
> 
> 赞同：0
> 
> 时间：2012-04-07T19:16:22.330
> 
> 标签：android, listview, getstring

出于某种原因，无论我单击哪个项目，它都只会返回列表中第一个项目的名称。我不确定为什么它没有返回正确的名称。基本上我只想找到这个名字，这样我就可以在列表中搜索那个名字，这样我就可以在数组中找到它的位置。

```
 myTask.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // When clicked, show a toast with the TextView text
            String name = ((TextView)view).getText().toString();
            for (int i = 0; i < ToDoActivity.myUser.taskCount; i++){
                if(name == ToDoActivity.myUser.tasks[i].getTaskName())
                    clickTask = i;
            }
            Intent myIntent = new Intent(view.getContext(), TaskEdit.class);
            view.getContext().startActivity(myIntent);
        } 
```

谢谢大龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:21:08.247

如果我了解您要做什么，您可以简单地使用以下`position`参数`onItemClick`：

```
clickTask = position; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:22:40.490

使用传递给您的“位置”值。它告诉您按下了哪个索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:24:27.363

替换这一行：

```
if(name == ToDoActivity.myUser.tasks[i].getTaskName()) 
```

用这条线：

```
if(name.equals(ToDoActivity.myUser.tasks[i].getTaskName())) 
```

# python - 词表的字典排序

> ID：10057537
> 
> 赞同：-1
> 
> 时间：2012-04-07T19:16:35.153
> 
> 标签：python, algorithm, sorting

我需要按字典顺序合并和排序 100,000 多个单词的列表。我目前使用稍微修改的冒泡排序来做到这一点，但在 O(n^2) 时需要相当长的时间。有没有更快的算法来排序单词列表？我正在使用 Python，但如果有一种语言可以更好地处理这个问题，我愿意接受建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-07T19:20:11.400

使用内置`sort()`列表方法：

```
>>> words = [ 'baloney', 'aardvark' ]
>>> words.sort()
>>> print words
['aardvark', 'baloney'] 
```

它使用`O(n lg(n))`排序¹，即[Timsort](http://en.wikipedia.org/wiki/Timsort)（我相信这是一种修改过的合并排序。它针对速度进行了高度调整。）。

* * *

¹正如评论中所指出的，这是指元素比较的次数，而不是低级操作的次数。由于这种情况下的元素是字符串，并且比较两个字符串需要进行`min{|S1|, |S2|}`字符比较，所以总复杂度是`O(n lg(n) * |S|)`被`|S|`排序的最长字符串的长度。然而，所有比较排序都是如此——真正的操作数取决于被排序元素类型的元素比较函数的成本。由于所有比较排序都使用相同的比较函数，因此在比较这些排序的算法复杂度时，您可以忽略这种微妙之处。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-07T19:20:15.867

任何`O(nlogn)` [排序算法](http://en.wikipedia.org/wiki/Sorting_algorithm#Comparison_of_algorithms)都可能比冒泡排序做得更好，但它们会`O(nlogn * |S|)`

[但是，可以使用trie](http://en.wikipedia.org/wiki/Trie)和简单的[DFS](http://en.wikipedia.org/wiki/Depth-first_search)对字符串进行排序，`O(n*|S|)`其中`|S|`是平均字符串的长度。

高级伪代码：

```
1\. create a trie from your collection.
2\. do a DFS on the trie generated, and add each string 
   to the list when you reach terminal node. 
```

# php - 在非对象上调用成员函数 test1()

> ID：10057542
> 
> 赞同：0
> 
> 时间：2012-04-07T19:17:23.773
> 
> 标签：php, class, member-functions

我对 php 还是很陌生，但我一直在尝试查找（如果可能的话）从子类调用执行不同子函数的父函数。我读过子类彼此不知道，但我认为父类可能是。

我确实已经搜索了几个小时，但我还没有找到我认为会有所帮助的东西。

以下将输出：

```
::dad Class initiated::
::daughter Class initiated::
::son Class initiated::

Call to a member function test1() on a non-object in ....  on line 15 
```

代码：

```
class dad {  

    function dad() 
    { 
        echo '::'.get_class($this).' Class initiated::<br>';
        $this -> daughter = new daughter();
        $this -> son = new son();
    }

    public function afunction($string) {

        return $this->son->test1($string);

    }

}

class daughter extends dad {

    function daughter() {
    echo '::'.get_class($this).' Class initiated::<br>';

    }

    public function test() {

        parent::afunction("test");

    }

}

class son extends dad {

    function son() {
    echo '::'.get_class($this).' Class initiated::<br>';

    }

    public function test1($string) {

        echo $string;

    }

}

$dad = new dad(); 
$dad->daughter->test(); 
```

任何/所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:20:35.127

这应该可以帮助您：[PHP：如何从父类调用子类的函数](https://stackoverflow.com/questions/1944827/php-how-to-call-function-of-a-child-class-from-parent-class)

通常，以您尝试的方式调用子类方法是不正确的。子类旨在扩展现有的（在大多数情况下功能齐全）类，它不应该依赖于现有的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:21:52.647

不要使用诸如 dad() 或类似的用户魔术函数 __construct() 之类的构造函数。我很确定你在爸爸班上没有可见的外地女儿。你必须定义它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:37:27.763

长话短说：`dad`和`daughter`是`son`单独的对象，调用函数形式`parent`仅在一个对象内起作用。在您的示例`daughter`中不知道绑定到`dad`对象，仅它从它继承属性和方法。为了让它工作，你应该将父对象传递给孩子，让他们知道他们的父母，并在这个父对象上调用函数：

```
class dad {  
    function dad(){ 
        echo '::'.get_class($this).' Class initiated::<br>';
        $this -> daughter = new daughter($this);
        $this -> son = new son($this);
    }

    public function afunction($string){
       return $this->son->test1($string);
    }
}

class daughter extends dad {
    function daughter($father) {
        $this->father = $father;
        echo '::'.get_class($this).' Class initiated::<br>';
    }

    public function test() {
        $this->father->afunction("test");
    }
}

class son extends dad {
    function son($father) {
        $this->father = $father;
        echo '::'.get_class($this).' Class initiated::<br>';
    }

    public function test1($string) {
        echo $string;
    }
}

$dad = new dad(); 
$dad->daughter->test(); 
```

# asp.net-mvc - Telerik MVC 网格在排序时丢失呈现的 html

> ID：10057547
> 
> 赞同：2
> 
> 时间：2012-04-07T19:17:58.833
> 
> 标签：asp.net-mvc, telerik, telerik-grid

我的 ASP MVC 项目中有一个 Telerik 网格。大多数列都绑定到数据库中的数据，但一列需要包含依赖于列记录值的图像图标。为此，我使用包含 IF ELSE 的列模板。IF ELSE 根据列记录的值写入带有特定图像引用（带有背景图像的 css 类）的 html。这在负载上工作得很好。但是，一旦我在网格上执行排序，在模板列中呈现的所有 html 都会丢失。代码如下。有没有办法做到这一点，还是我必须重新考虑如何进行排序？

```
<div id="gridArea" >

    @{Html.Telerik().Grid(@Model)
        .Name("Grid")
        .Columns(columns =>
             { columns.Template(
                 @<text>
                     @if (@item.Q1 == "On Plan")
                     {<div class="scorecardSymbol onPlanSymbol"></div>}
                     else if (@item.Q1 == "Off Plan")
                     {<div class="scorecardSymbol offPlanSymbol"></div>}
                     else if (@item.Q1 == "Serious Constraints")
                     {<div class="scorecardSymbol seriousConstraintsSymbol"></div>}
                     else if (@item.Q1 == "Not Started")
                     {<div class="scorecardSymbol notStartedSymbol"></div>}
                     else
                     {<span>NA</span> }
                 </text>)

                .HeaderTemplate(
                     @<text> 
                        <span style="color:red">Quarter Status</span>
                     </text>)
                .Width(175);
             columns.Bound("Off_Plan").Width(100).Title("Off Plan");
           })
       .DataBinding(dataBinding =>
         {
            dataBinding.Server().Select("Index", "Home", new { ajax = true });
            dataBinding.Ajax().Select("_FirstLook", "Home").Enabled(true);
          })
       .Render();
    }
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:39:08.320

服务器端模板在 ajax 绑定模式下不起作用。在这种情况下，您需要使用客户端模板。您可以在此帮助主题中找到更多信息：[http ://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-troubleshooting.html#ClientTemplates](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-troubleshooting.html#ClientTemplates)

# .htaccess - 名称字段的 mod_rewrite

> ID：10057549
> 
> 赞同：0
> 
> 时间：2012-04-07T19:18:20.087
> 
> 标签：.htaccess, mod-rewrite

我是完全的新手`mod_rewrite`，我一直在浏览一些网站，阅读如何处理这个问题，我所能找到的只是当 get 变量是数字而与字符串无关时，结果却超出了我的想象。

我想做的是重写`display.php?name=blahblah123`为`display/blahblah123`

连同答案，我希望有一些网站可以让我对`mod_rewrite`自己有所了解。

谢谢

编辑：

随着更多的搜索，我想出了这个

```
RewriteEngine On
RewriteBase /

RewriteRule ^display/([a-z]+)$ display.php?name=$1 [L] 
```

上面的代码有效，但由于某种原因，我得到的页面没有 CSS。我看到的 CSS 显示了 Hostgator 的 404 页面 CSS。但是 HTML 看起来不错，内容和其他一切也不错。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:52:25.273

尝试在 css 文件名前加一个“/”。

```
<link rel=".." href="/style.css". 
```

代替

```
<link rel=".." href="style.css". 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:04:16.687

需要明确的是，mod_rewrite 是 apache 内部发生的事情。我发现有时人们不明白它做什么和不做什么。它不会采用您输出的 url 并将其更改为

```
display.php?name=blahblah123 
```

显示/blahblah123

但是，它将允许某人从您的站点发出对 display/blahblah123 的请求并将其转换为 display.php?name=blahblah123，以便您的 display.php 脚本可以对其进行操作。

重写规则需要理解正则表达式。您对正则表达式了解得越多，mod_rewrite 对您来说就越容易。

作为初学者，这篇文章应该会有所帮助： [http ://www.sitepoint.com/guide-url-rewriting/](http://www.sitepoint.com/guide-url-rewriting/)

对于您的具体问题，我可能会使用：

```
RewriteRule ^display/([a-zA-Z0-9]+)$ /display.php?name=$1 
```

# asp.net - 我什么时候在 SQL 中使用 TransactionScope 和 Transaction

> ID：10057551
> 
> 赞同：0
> 
> 时间：2012-04-07T19:18:28.413
> 
> 标签：asp.net

dot net中的TransactionScope和SQL中的Transaction有什么区别

```
protected void Page_Load(object sender, EventArgs e)
        {            
            int i = 0;
            using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required))
            {
                i = 1;                
            }
            Response.Write(i.ToString());
        } 
```

我得到 Response.Write() 显示的值 1。为什么？scope.Complete 没有被执行。因此 i 值应该回滚到 0；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:23:36.907

基本上是一样的；TransactionScope 是较新的 .NET 版本，如果您在 ASPNET 2.0 及更高版本上进行编码，则推荐使用该版本。

[TransactionScope 类](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

```
using (TransactionScope scope = new TransactionScope())
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        SqlHelper.ExecuteNonQuery(connectionString, CommandType.StoredProcedure,
            "Update1");

        SqlHelper.ExecuteNonQuery(connectionString, CommandType.StoredProcedure,
            "Update2");
    }
    scope.Complete();
} 
```

# ruby-on-rails - 模型代码到模块：参数数量错误，类/实例方法？

> ID：10057556
> 
> 赞同：3
> 
> 时间：2012-04-07T19:19:40.683
> 
> 标签：ruby-on-rails, ruby, module

我正在尝试将一些模型代码移动到模块中。

原始模型方法：

我正在尝试将一些模型代码移动到模块中。

原始模型方法：

```
class Book < ActiveRecord::Base
  def book_royalty(period='enddate', basis="Net receipts")
    #stuff
  end
end 
```

所以我添加

```
include Calculation 
```

并将方法移动到模块：

```
module Calculation
  def book_royalty(period='enddate', basis="Net receipts")
    #stuff
  end
end 
```

但现在我得到

> 参数数量错误（2 代表 0）

如果我将 book.rb 模型中的方法设为类方法（即，如果我将方法名称设为方法名称），这也是我得到的错误`self.book_royalty(args)`。

我是否无意中将方法移至模块类方法？我`include`在 book.rb 中使用，而不是`extend`. 如何让父模型成功包含模块的方法？

## 编辑

`book_royalty`在版税声明模型中被调用。

书.rb：

```
attr_accessor :book_royalty 
```

版税声明.rb：

```
def initialize_arrays
  @royalty  = []
  ...
end

def sum_at_book_level(contract)
  contract.books.where(:exclude_from_royalty_calc => false).each do |book| 
    book.book_royalty("enddate", basis)
    @royalty.push(book.book_royalty("enddate", basis))
    # etc
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T19:40:20.353

解释：

您的模块定义了一个带有`book_royalty`两个参数的方法。然后，在包含该模块后的几行中，您使用`attr_accessor`定义两个方法的类宏，

```
def book_royalty
  @book_royalty
end

def book_royalty= val
  @book_royalty = val
end 
```

这有效地**覆盖**了你`book_royalty`的模块。现在它不接受任何参数。因此错误

> 参数数量错误（2 代表 0）

尝试执行行时

```
book.book_royalty("enddate", basis) 
```

您**不需要** `attr_accessor`或其他任何东西来使用包含模块中的方法。它会自动变为可用。

# actionscript-3 - AS3 创建对象数组

> ID：10057558
> 
> 赞同：3
> 
> 时间：2012-04-07T19:19:41.890
> 
> 标签：actionscript-3, flash, object

我想在舞台上添加一堆汽车，并将它们作为对象存储在数组中。问题是我讨厌使用外部 AS 文件，并希望使其尽可能简单。

我试着做：

```
var car:Object = {carcolor:String,carscale:Number,carpower:Number};
var test:Array = new Array()
for (var i:Number=0; i<10; i++) {
    test.push(car)
} 
```

问题是如果我尝试设置一个对象的值 `test[1].carscale = 5`

数组中的每个对象都将其属性 carscale 设置为 5。

有什么方法可以在不使用外部类文件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T06:28:13.507

虽然您应该使用外部 AS 文件（这是一个很好的做法），但这就是您遇到问题的原因，我将逐行解释

```
var car:Object = {carcolor:String,carscale:Number,carpower:Number};
//This creates an object called car. Suppose it saves it in memory at "location" 0x12345

var test:Array = new Array();
//This creates an empty array

for (var i:Number=0; i<10; i++) {
    test.push(car);
    //This adds the object "car" to the array
    //Since Object is a reference type, its memory location is actually added to the array
    //This means you added 0x12345 to the array (10 times over the loop)
}

//The array now contains 
[0x12345, 0x12345, 0x12345, .......];

//So now
test[1]; //returns the object at 0x12345

test[1].carscale=5;  //sets the carscale property of the object at 0x12345 
```

由于数组中的所有对象都指向相同的位置，因此获取其中任何一个实际上都会返回相同的对象。这意味着它们都将显示`carscale`为 5

对此的解决方案是：

```
var test:Array = new Array();
for (var i:Number=0; i<10; i++) {
    var car:Object = {carcolor:String,carscale:Number,carpower:Number};
    test.push(car);
} 
```

一个更好的、**真正**的面向对象的解决方案是创建一个名为 Car 的类，而不是这样做

```
var car:Object = {carcolor:String,carscale:Number,carpower:Number}; 
```

你用

```
var car:Car = new Car(); 
```

课程将`Car.as`是这样的：

```
public class Car {
    public function Car() {
        //this is the constructor, initialize the object here
        //Suppose the default values of the car are as follows:
        carcolor="red";
        carscale=5;
        carpower=1000;
    }

    public var carcolor:String;
    public var carscale:Number, carpower:Number;
} 
```

事实上，您甚至可以使用另一个根据参数自动设置属性的构造函数：

```
 public function Car(_color:String, _scale:Number, _power:Number) {
        carcolor=_color;
        carscale=_scale;
        carpower=_power;
    } 
```

并将其称为

```
var car:Car=new Car("red", 5, 1000); 
```

事实上，`car`before`carcolor`和`carscale`甚至`carpower`没有必要，因为当你把它们放在一个名为 的类中时很明显`Car`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T19:55:52.637

就像 TheDarkIn1978 所说的那样，您正在将`car`实例的引用推送到数组中。当您更改一个实例的属性值时，每个引用都会发生同样的情况。

简单的答案是在 for 循环的每次交互时创建一个新对象，如下所示：

```
var test:Array = [];

for (var i:Number = 0; i < 10; i++) 
{
    var car:Object = {carcolor:String, carscale:Number, carpower:Number};    
    test.push(car);

}// end for 
```

**[更新]**

我知道您说过您不想使用“外部类”，但是与对象相比，使用自定义类对象来存储值是有好处的`Object`。这是一个例子：

```
package 
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class Main extends Sprite 
    {
        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);

        }// end function

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            var cars:Vector.<Car> = new Vector.<Car>();

            cars.push(new Car("red", 1, 1));
            cars.push(new Car("blue", 2, 2));
            cars.push(new Car("green", 3, 3));

            trace(cars[2].color); // output: green

        }// end function

    }// class

}// end package

internal class Car
{
    private var _color:String;
    private var _scale:Number;
    private var _power:Number;

    public function get color():String { return color; }
    public function get scale():String { return scale; }
    public function get power():String { return power; }

    public function Car(color:String, scale:Number, power:Number)
    {
        _color = color;
        _scale = scale;
        _power = power;

    }// end function

}// end class 
```

这是创建对象的一个​​很好的示例，其唯一目的是存储永远不会更改的值，方法是只允许在启动时设置对象的属性并使用 getter 方法使值只读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T05:41:05.150

我觉得很愚蠢，我在这里找到了答案：http: //board.flashkit.com/board/showthread.php?t= [792345](http://board.flashkit.com/board/showthread.php?t=792345)

您每次都将 Object 引用推送到数组，而不是唯一的 Object。您必须执行以下操作：

```
for(var temp=0;temp<100;temp++){
    var roomData:Object=new Object;
    roomData.first_time=true;
    rooms.push(roomData);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T19:43:16.807

您多次将相同的对象添加到数组中。您需要创建汽车对象的新实例。

编辑：

尽管创建自己的“汽车”类并创建它的新实例是最佳实践，即使它只是一个具有 3 个属性的小对象，这里有一个快速示例，应该可以帮助您入门。

```
package 
{
    //Imports
    import flash.display.Sprite;

    //Class
    public class Main extends Sprite 
    {
        //Constants
        private static const DEFAULT_CAR_COLOR:Number = 0x000000;
        private static const DEFAULT_CAR_SCALE:Number = 1.0;
        private static const DEFAULT_CAR_POWER:int = 50;

        //Properties
        private var carsArray:Array;

        //Constructor
        public function Main():void 
        {
            init();

            outputCarColors();
        }

        //Initialize
        private function init():void
        {
            carsArray = new Array();

            for (var i:int = 0; i < 10; i++)
            {
                carsArray.push(CreateCar(Math.random() * 0xFFFFFF));
            }
        }

        //Output Car Colors
        private function outputCarColors():void
        {
            for (var i:int = 0; i < carsArray.length; i++)
            {
                trace("Color of car " + i + " : " + carsArray[i].carColor);
            }
        }

        //Create Car Object
        private function CreateCar(carColor:Number = DEFAULT_CAR_COLOR, carScale:Number = DEFAULT_CAR_SCALE, carPower:int = DEFAULT_CAR_POWER):Object
        {
            var result:Object = new Object();
            result.carColor = carColor;
            result.carScale = carScale;
            result.carPower = carPower;

            return result;
        }
    }
} 
```

# virtual - 围绕选择创建虚拟编辑块

> ID：10057562
> 
> 赞同：0
> 
> 时间：2012-04-07T19:20:11.053
> 
> 标签：virtual, block, vim

我正在尝试创建一个脚本，允许我选择几行并在其周围创建一个 virtualedit 块；最长行之后的 1 列。

这是我的代码

```
function! VirtualEdit()
  let EndLine = line("'>")

  set virtualedit = all

  let maxlength = max(map(range(line("'<"), line("'>")), "virtcol([v:val, '$'])"))-1
  call cursor(1,maxlength+1)  
  normal "^Q".EndLine."jc<space><ESC>"

  set virtualedit = ''
endfunction 
```

它必须做的是
1) 控制我的选择中最长的线 (maxlength)。
2）将光标放在选择中的第一行最长行+1列的列。
3）比激活可视块选择（在我的windows pc上，命令是CQ）
4）将可视块扩展到选择的最后一行（我的pc上用于向下移动的命令=“j”）。
5）然后使用“c”键插入一个“空格”字符并使用ESC退出插入模式，以便用空格填充虚拟块列。

但是我不知道如何在普通命令中使用变量（Endline）。
我还注意到，在我上面的示例中，密钥作为并且不起作用。
我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:49:26.440

你这里有很多错误：

1.  `:set`不让你周围有空间`=`
2.  `:set`不接受表达式，因此`set ve=''`is `let &ve="''"`，而不是`let &ve=''`which is `:set ve=`。
3.  `:normal`command 也不接受表达式，它接受刚刚执行的字符串。因此`:normal "^`尝试使用 register `^`，失败（没有这样的寄存器）并停止处理该行的其余部分。用于`:execute`将表达式传递给`:normal`.
4.  `:normal`命令不接受`<Key>`语法。viml 表达式也没有，`"\<Key>"`而是有（注意：只有双引号和反斜杠）。`^Q`语法不被任何人接受，并且`^Q`在文本文件中包含原始控制代码（由 vim 显示为）不是最好的主意。
5.  不要在没有`:normal`爆炸的情况下使用。大多数时候你不需要它（在这种情况下你需要替换`^Q`为`\<C-v>`，因为它是一个映射）。
6.  不要硬编码`virtualedit`值。代替

    ```
    set ve=all
    <...>
    set ve= 
    ```

    采用

    ```
    let savedve=&ve
    set ve=all
    try
        <...>
    finally
        let &ve=savedve
    endtry 
    ```

7.  `{N}j`表示“向下 N 行”，而不是“转到第 N 行”。“转到第 N 行”是`{N}gg`或`{N}G`。
8.  您拥有`let maxlen=<...>-1`并且唯一`maxlen`使用您的线路`maxlen+1`。它很奇怪。

如果你解决了这个问题，你可以继续，但你根本不需要调整 virtualedit 和使用`:normal`：

```
function AddSpaces()
    let [lstart, lend]=[line("'<"), line("'>")]
    if lstart>lend
        let [lstart, lend]=[lend, lstart]
    endif
    let maxcol=max(map(range(lstart, lend), "virtcol([v:val, '$'])"))
    let newlines=map(range(lstart, lend), 'printf("%-'.maxcol.'s", getline(v:val))')
    call setline(lstart, newlines)
endfunction 
```

# javascript - JavaScript 模型中的 MVC3 EditorFor() 更改值无法识别更改

> ID：10057565
> 
> 赞同：2
> 
> 时间：2012-04-07T19:20:18.677
> 
> 标签：javascript, asp.net-mvc-3

编辑：在看了我这样做的方式之后，我决定改变我的整个视图模型，所以这个问题不再有效。我不介意知道我做错了什么，但我真的不需要我的项目的答案。

谢谢！

当下拉列表的值更改时，我使用 Javascript 更改文本框的值。发布页面时，Javascript 中更改的值始终为零。

Javascript 似乎工作正常，但该值并没有返回到服务器。

这是我的视图模型：

```
...
[Required(ErrorMessage = "\"{0}\" is required")]
    [Display(Name = "Mileage Out")]
    public decimal MileageOut { get; set; }

[Required(ErrorMessage = "Vehicle is required.")]
    public Guid VehicleID { get; set; }

    [Display(Name = "Vehicle")]
    public List<SelectListItem> Vehicles { get; set; }
.... 
```

这是我的看法：

```
....
<div class="editor-label">
        @Html.LabelFor(model => model.Vehicles, "Vehicle")
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.VehicleID, new SelectList(Model.Vehicles, "Value", "Text"), "Vehicle is required . . .", new {@onchange="GetLastMileage(this.value);"})
        @Html.ValidationMessageFor(model => model.Vehicles)
    </div> 

    <div class="editor-label">
        @Html.LabelFor(model => model.MileageOut)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.MileageOut, null, "txtMileageOut")
        @Html.ValidationMessageFor(model => model.MileageOut)
    </div>
...
<script type="text/javascript">

function GetLastMileage(vehicleID) {
    switch (String(vehicleID))
    {

        @{
            foreach (KeyValuePair<string, decimal> item in Model.VehiclesLastMileage)
            {
                @Html.Raw("case '" + item.Key + "': document.getElementById('txtMileageOut').value = '" + ((decimal)item.Value).ToString() + "';break;")
            }
        }
        default: return 0;
    }
}

</script> 
```

我发现如果我改变这个：

```
@Html.EditorFor(model => model.MileageOut, null, "txtMileageOut") 
```

对此：

```
@Html.EditorFor(model => model.MileageOut) 
```

日期可以很好地返回服务器，但 JavaScript 不起作用（文本框上没有 id）。显然，我使用错误的方法来更改客户端的值，但我不知道正确的方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:24:57.530

更改 javascript。

```
document.getElementById('txtMileageOut').value 
```

至

```
document.getElementById('MileageOut').value 
```

此外，您应该使用 jQuery 并将 javascript 移出到它自己的外部文件中。它还将大大简化 JS 代码。您可以使用分类作为选择器而不是 ID，并用更少的代码做更多的事情。

# prolog - 如何在 Prolog 中添加当前和上一个？初学者序言

> ID：10057572
> 
> 赞同：0
> 
> 时间：2012-04-07T19:21:33.647
> 
> 标签：prolog

```
calcHeu([],K) :- nl.
calcHeu([X|Rest],K) :-
findMin(X,Y),write(Y),
calcHeu(Rest,Y). 
```

如果我通过 [[1,2,3],[5,4,9],[7,8,9]] 它将打印 1 4 7 这是我想添加这些值并返回它们的每个列表的最小值。在列表中或作为单个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:39:07.510

我想这就是你想要的。每次都将 Y 添加到列表中。

```
calcHeu([],K,List) :- nl.
calcHeu([X|Rest],K,[Y|Tail]) :-
findMin(X,Y),write(Y),
calcHeu(Rest,Y,Tail). 
```

你真的需要K变量吗？好像没多大作用。

# android-ndk - “没有在命令行上指定类”错误运行 javah

> ID：10057583
> 
> 赞同：0
> 
> 时间：2012-04-07T19:22:20.477
> 
> 标签：android-ndk, cygwin

我在 Windows 7 上，在 Cygwin 1.7.13 中使用 javah。我目前正在尝试为我的 Android 项目生成原生 C++ 文件的头文件。

在项目的根目录下运行，我正在执行的命令是：

```
walb@nought /cygdrive/c/Users/walb/stuff/work/workspace/SoundBites
$ javah -verbose -d jni/ -classpath bin/classes uk.co.biogen.SoundBites.activity.SoundBitesActivity 
```

结果是：

```
error: cannot access uk.co.biogen.SoundBites.activity.SoundBitesActivity
class file for uk.co.biogen.SoundBites.activity.SoundBitesActivity not found
javadoc: error - Class uk.co.biogen.SoundBites.activity.SoundBitesActivity not found.
[ Search Path: C:\Program Files\Java\jdk1.6.0_22\jre\lib\resources.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\rt.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\sun
rsasign.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\jce.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\charsets.j
ar;C:\Program Files\Java\jdk1.6.0_22\jre\classes\bin/classes ]
Error: No classes were specified on the command line.  Try -help. 
```

我[读过](https://stackoverflow.com/questions/986262/javah-error-while-using-it-in-jni)的[大多数](https://stackoverflow.com/questions/4179744/javah-help-no-classes-were-specified-on-the-command-line)[主题都](https://stackoverflow.com/questions/9985336/javah-cant-find-class-android-ndk)[表明](https://stackoverflow.com/questions/9313197/android-ndk-eclipse-parameter-and-javah)我的论点是正确的。错误消息中有趣的一点是： `-classpath`

```
[ Search Path: C:\Program Files\Java\jdk1.6.0_22\jre\lib\resources.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\rt.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\sun
rsasign.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\jce.jar;C:\Program Files\Java\jdk1.6.0_22\jre\lib\charsets.j
ar;C:\Program Files\Java\jdk1.6.0_22\jre\classes\bin/classes ] 
```

该列表中的最后一个路径是`C:\Program Files\Java\jdk1.6.0_22\jre\classes\bin/classes`，这表明 javah 对参数的解释完全错误。我能想到的唯一可能有帮助的是调用 javah 的另一种方法，但是将其目录添加到 PATH 是我能想到的唯一方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:00:12.277

刚刚在原生 Android 中实现了我想要的。以牺牲速度和实际做我想做的事情为代价，更容易集成和理解正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:02:34.223

这是否有效（在 -classpath 参数的路径之前添加分号）：

```
javah -verbose -d jni/ -classpath ;bin/classes   uk.co.biogen.SoundBites.activity.SoundBitesActivity 
```

# c# - XmlSerialize 一个类并将其从客户端发送到服务器

> ID：10057590
> 
> 赞同：0
> 
> 时间：2012-04-07T19:23:00.357
> 
> 标签：c#, xml-serialization, client-server

我有两个课程：

```
 public class products
{
    public string category;
    public string name;
    public double price;
    public string desc;
    public string version;
    public string logoURL;
    public string imgURL;
    public string prod;

    public string Category
    {
        set { categorie = value; }
        get { return category; }
    } 
```

和：

```
 [Serializable()]
public  class groupProducts
{
    public products[] produse;
} 
```

我想对 groupProducts 类进行 XmlSerialize 并通过 TCP 连接将数据从服务器发送到客户端！我试过类似的东西：

```
 groupProducts gp = new groupProducts();
XmlSerializer xmlSel = new XmlSerializer(typeof(groupProducts));
TextWriter txtStream = new StreamWriter("xmlStreamFile.xml");    
xmlSel.Serialize(txtStream, gp); 
txtStream.Close();
try
{
Stream inputStream = File.OpenRead("xmlStreamFile.xml");
// declaring the size of the byte array to the length of the xmlfile
msg = new byte[inputStream.Length];
//storing the xml file in the byte array
inputStream.Read(msg, 0, (int)inputStream.Length);
//reading the byte array 
communicator[i].Send(msg);
} 
```

但是当我在客户端反序列化它时 - XML 文件中有一些奇怪的数据！

你知道它会是什么吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:30:31.887

1-为了安全起见，我会在打开时使用编码`StreamWriter`

2- In `inputStream.Read(msg, 0, (int)inputStream.Length);`Read 不保证您会`inputStream.Length`从流中获取字节。您必须检查返回的值。

3-您不需要临时文件。采用`MemoryStream`

```
XmlSerializer xmlSel = new XmlSerializer(typeof(groupProducts));
MemoryStream m = new MemoryStream();
xmlSel.Serialize(m);
communicator[i].Send(m.ToArray()); 
```

# ios - 保持两个 AVPlayer 同步

> ID：10057591
> 
> 赞同：6
> 
> 时间：2012-04-07T19:23:11.257
> 
> 标签：ios, synchronization, avfoundation, avplayer

我有一个客户对需要两个 AVPlayer 同步的应用程序有一个非常具体的请求。一个视频是针对某些内容的，另一个是针对演讲者谈论内容的。使用 AVMutableComposition 将它们组合成一个视频不是一种选择，因为演示者视频必须能够响应用户生成的事件（例如，他们希望具有显示/隐藏演示者的功能）并且我不相信有一种对特定 AVMutableCompositionTrack 进行控制的方法。

所以，我要弄清楚如何确保两个 AVPlayer 保持同步，我想知道是否有人有这方面的经验或建议其他工具来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-22T18:18:59.267

**以下方法是使用的方法**

```
- (void)setRate:(float)rate 
           time:(CMTime)itemTime 
     atHostTime:(CMTime)hostClockTime;

- (void)prerollAtRate:(float)rate 
    completionHandler:(void (^)(BOOL finished))completionHandler; 
```

**注意事项**

> 重要 HTTP Live Streaming 当前不支持此方法，或者当 automaticallyWaitsToMinimizeStalling 为 YES 时不支持此方法。对于链接到 iOS 10.0 及更高版本或 macOS 10.12 及更高版本的客户端，当 automaticWaitsToMinimizeStalling 为 YES 时调用此方法将引发 NSInvalidArgument 异常。

这是一种预期的行为，因为“实时”是“存在的”并且不能向前搜索并将速率设置为小于 1.0，这将导致额外缓冲流（第二点是猜测）。

**文档**

[https://developer.apple.com/documentation/avfoundation/avplayer/1386591-setrate?language=objc](https://developer.apple.com/documentation/avfoundation/avplayer/1386591-setrate?language=objc)

[https://developer.apple.com/documentation/avfoundation/avplayer/1389712-prerollat​​rate?language=objc](https://developer.apple.com/documentation/avfoundation/avplayer/1389712-prerollatrate?language=objc)

*作为旁注，考虑到 HLS 流不是真正的实时流，“当前时刻”在使用流的客户端之间可能会发生几秒钟的变化，这与 WebRTC 相反，例如，发布者和消费者之间的延迟是有保证的最多 1 秒.*

# android - 使用 putSerializable 将对象传递给活动

> ID：10057592
> 
> 赞同：0
> 
> 时间：2012-04-07T19:23:30.547
> 
> 标签：android, bundle, android-activity

我正在尝试使用此代码将我的 dbhelper 实例从一个活动传递到另一个活动

```
 private void onCategoriesClick() {
        private DbAdapter db;
        db = new DbAdapter(this); 
        Intent i = new Intent(this, CategoriesActivity.class);
        Bundle b = i.getExtras();
        b.putSerializable("db", db); //geting NullPointerException here
        startActivityForResult(i, 0); 
```

DbAdapter 类实现`Serializable`

我很困惑，有人能指出我的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:32:54.523

在将使用它的活动中创建 dbhelper。如果你真的必须在活动之间传递它，将它存储在静态变量中会更简单（在你的应用程序类中以便于访问）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T19:30:44.623

getExtras() 返回 null，因为您在调用 Intent 之前没有将任何额外内容放入 Intent。这意味着 b == null，因此是 NPE。只需将可序列化直接放入意图中即可。

```
i.putExtra("db", (Serializable) db); 
```

不过，一般来说，如果您能提供帮助，请避免将可序列化对象传递给意图。

# php - php解析jQuery表单序列化错误的方式

> ID：10057596
> 
> 赞同：0
> 
> 时间：2012-04-07T19:24:07.500
> 
> 标签：php, jquery, ajax, serialization, xhtml

我有一个问题...

这些是我的一些 html 表单元素的名称：name="password" name="meta[naziv_firme]"

这是我的 jQuery

```
var data = {action: 'edit', form: $('input', 'form#edit-klijent-form').serialize()}

console.log(data);

$.get('/index.php/admin-ajax', data, 
 function(response){
  // Success
  $('div#edit-klijent-div,.tipsy').hide();
  $('div#klijent-edit-success').show();
 }); 
```

Console.log 给了我结果：

```
action  edit
form    userID=12&password=&password-match=&email=test15%5Bmeta%5Bnaziv_firme%5D=test15&meta%5Bkontakt_osoba%5D=test156&meta%5Bkontakt_telefon%5D=test157&meta%5Bkontakt_email%5D=test158 
```

所以一切看起来都很好！

现在在 PHP 我有 var_dump($_GET); 结果是：

```
string(165) "userID=12&password;=&password;-match=&email=test15&meta;[naziv_firme]=test15&meta;[kontakt_osoba]=test156&meta;[kontakt_telefon]=test157&meta;[kontakt_email]=test158" 
```

为什么 PHP 放 ; 密码后，在 &meta;[... ??

和想法？我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:38:38.223

在您的 HTML 表单元素中，添加：

```
<input type="hidden" name="action" value="edit"> 
```

并更改此行：

```
var data = {action: 'edit', form: $('input', 'form#edit-klijent-form').serialize()} 
```

进入这个：

```
var data = $('input', 'form#edit-klijent-form').serialize(); 
```

由于我没有您的 HTML 或服务器配置，因此无法真正对其进行测试，但我认为它应该可以工作。

**更新：**

为了澄清@AnthonyGrist 上面的评论，让我们观察一下 serialize 的作用：

```
<form>
  <input type="text" name="input1" value="foo">
  <input type="text" name="input2" value="bar">
</form>

<script>
  var data = $('form input').serialize();
  // data is now: 'input1=foo&input2=bar'
</script> 
```

如果您将上面返回的值分配给查询参数（PHP 使用 $_GET 访问该参数），您基本上是在告诉 PHP $_GET['form'] 等于上面的字符串，这不是您想要的。PHP 不会解析 $_GET['form'] 的内容来给你 $_GET['input1']... serialize() 返回的值应该直接用作 $.get() 的第二个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:54:43.120

更改您的代码：

```
var data = {action: 'edit', form: $('input', 'form#edit-klijent-form').serialize()} 
```

至：

```
var data = "action=edit&" + $('input', 'form#edit-klijent-form').serialize(); 
```

我认为这是你想要达到的目标。

# algorithm - 最有效的反象棋算法？

> ID：10057598
> 
> 赞同：1
> 
> 时间：2012-04-07T19:24:30.030
> 
> 标签：algorithm, chess

我一直在互联网上搜索下棋的通用算法，但找不到任何东西。有人对如何在反象棋中获胜有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:40:26.000

所有的游戏算法基本上都是[http://en.wikipedia.org/wiki/Minimax](http://en.wikipedia.org/wiki/Minimax)和[http://en.wikipedia.org/wiki/Alpha-beta_pruning](http://en.wikipedia.org/wiki/Alpha-beta_pruning)具有不同的棋盘评分功能。

你可以用谷歌搜索antichess board-scoring 功能。

同样根据[http://en.wikipedia.org/wiki/Antichess](http://en.wikipedia.org/wiki/Antichess)你不应该做任何 1.d4, 1.e4, 1.d3, 1.Nc3, 1.Nf3, 1.f4 的开始动作、1.h4、1.b4 或 1.h3；他们让你输了比赛。

# javafx-2 - 在 Y 轴上设置十进制数

> ID：10057599
> 
> 赞同：2
> 
> 时间：2012-04-07T19:24:53.447
> 
> 标签：javafx-2

我有一个包含 5 位小数的数据系列，例如 0,58861；现在我用 XYChart 作为 LineChart 进行绘图，但我只看到绘制了 3 个数字，即 0,58 或 .584。

我也尝试过更改字体大小 `yAxis.setTickLabelFont(Font.font("Arial", 5));`

没有结果，我总是绘制 3 个数字。

下面是两张图片来展示这种行为。

如何在 Y 轴上设置更多小数？

![在此处输入图像描述](../Images/7a0d0b048df4752b9f65cfc4dc887664.png) ![在此处输入图像描述](../Images/43f2ab8e5558f512cdf3219eef2d72c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:05:52.627

那么这个 y 轴绘制的数字有什么问题呢？您可以将 0.58 视为 0.58000 等。这些只是主要的刻度，而不是数据系列的点（数字）。如果您想查看更多刻度并因此获得更精确的测量值，请更改 tickUnit 参数：

```
NumberAxis(double lowerBound, double upperBound, double tickUnit) 
```

但是这一次，如果您的数据范围（`upperBound`- `lowerBound`）根据`tickUnit`您的图表的形状和形式而变大。为了克服这个问题，请使用`lowerBound`和`upperBound`值来仅显示数据系列的一部分，就像它们已被放大一样。
要更改刻度标签字体和大小，请尝试：

```
yAxis.setTickLabelFont(Font.font("Arial", FontWeight.MEDIUM, 18)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:46:14.123

更改字体大小将无济于事。您必须使用该[`setTickLabelFormatter`](http://docs.oracle.com/javafx/2.0/api/javafx/scene/chart/ValueAxis.html#setTickLabelFormatter(javafx.util.StringConverter))功能更改刻度标签格式化程序。

# c# - 稍后再调用代表。委托队列

> ID：10057604
> 
> 赞同：0
> 
> 时间：2012-04-07T19:24:58.260
> 
> 标签：c#, delegates, dynamic-invoke, multicastdelegate

所以我对 c# 很陌生，我已经解决了这个问题：我有一些调用不同委托的方法（可能具有不同的参数类型）。但是，不应立即调用这些代表。如果主线程正在运行一个委托，它们应该在之后运行，有点像排队委托并稍后运行它。
现在我可能可以使用 DynamicInvoke 但我不知道它是否会使队列减慢太多，除了我知道委托类型是什么以及它应该寻找什么样的参数，所以它并不是真正依赖于运行时。如果可以的话请帮助我，我真的需要一个答案。

谢谢大家（谁回复）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:34:15.317

其中一种方法是使用`Tasks`（从 开始`.NET 4.0`）

可以看看

[异步方法、C# 迭代器和任务](http://blogs.msdn.com/b/pfxteam/archive/2009/06/30/9809774.aspx)

在您的情况下，如何创建调度任务似乎。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T19:37:33.800

如果不是直接添加您的委托，而是将它们*包装*成新的`Action`委托，这些委托只是调用它们，传递它们的所有参数，它会起作用吗？例如：

```
List<Action> pending = new List<Action>();
pending.Add(() => MethodThatTakesNoParameters());
pending.Add(() => MethodThatTakesOneParameter(param));
pending.Add(() => MethodThatTakesThreeParameters(param1, param2, param3)); 
```

# c# - 如何在非表单应用程序中生成击键

> ID：10057608
> 
> 赞同：2
> 
> 时间：2012-04-07T19:25:40.327
> 
> 标签：c#, multithreading, automation, sendkeys

所以我有一个庞大的程序，并决定让其中一种方法在单独的线程中运行。所以我将该方法放在一个单独的类中，并在我的表单上激活它。它似乎就像我想要的那样工作，直到它出现在它给我这个错误的地方：

> SendKeys 无法在此应用程序中运行，因为该应用程序未处理 Windows 消息。更改应用程序以处理消息，或使用 SendKeys.SendWait 方法。

我试着在网上寻找答案。我想我看到了一些关于 SendKeys 如何只在表单或其他东西中工作的东西。

谁能告诉我一种不使用 SendKeys 来模拟击键的方法，或者让 SendKeys 在不同的非表单线程中工作的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T19:33:20.387

您的控制台应用程序需要一个消息循环。这是通过[Application](http://msdn.microsoft.com/en-us/library/6y6135ed.aspx)类完成的。您将需要调用[Application.Run(ApplicationContext)](http://msdn.microsoft.com/en-us/library/ms157901.aspx)。

```
class MyApplicationContext : ApplicationContext 
{
    [STAThread]
    static void Main(string[] args) 
    {
        // Create the MyApplicationContext, that derives from ApplicationContext,
        // that manages when the application should exit.
        MyApplicationContext context = new MyApplicationContext();

        // Run the application with the specific context. It will exit when
        // the task completes and calls Exit().
        Application.Run(context);
    }

    Task backgroundTask;

    // This is the constructor of the ApplicationContext, we do not want to 
    // block here.
    private MyApplicationContext() 
    {
        backgroundTask = Task.Factory.StartNew(BackgroundTask);
        backgroundTask.ContinueWith(TaskComplete);
    }

    // This will allow the Application.Run(context) in the main function to 
    // unblock.
    private void TaskComplete(Task src)
    {
        this.ExitThread();
    }

    //Perform your actual work here.
    private void BackgroundTask()
    {
        //Stuff
        SendKeys.Send("{RIGHT}");
        //More stuff here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T15:58:35.873

我知道这不是答案，但这是我过去使用 ActiveX 和脚本的方式

```
Set ws = CreateObject("WScript.Shell")

str = "Hi there... ~ Dont click your mouse while i am typing." & _
" ~~This is a send key example, using which you can send your keystrokes"
ws.Run("notepad.exe")
WScript.Sleep(1000)

For c=1 To Len(str)
WScript.Sleep(100) 'Increase the value for longer delay
ws.SendKeys Mid(str,c,1)
Next 
```

将此代码另存为`file.vbs`并双击以在Windows机器中执行。

# c# - 如何将 XDocument 的 XML 内容保存为 .xml 文件？

> ID：10057609
> 
> 赞同：5
> 
> 时间：2012-04-07T19:25:51.363
> 
> 标签：c#, xml, io, linq-to-xml

我有一个 XDocument 类，其中包含已经制作的 XML 内容。我基本上想打开一个 SaveFileDialog，让用户选择一个文件夹（不是文件），在其中将内容保存为 .xml 文件。

我这样做有一些困难：

a) 如何使用 SaveFileDialog 提示用户选择文件夹？我只能用它来让用户选择一个文件。

b) 如何从 SaveFileDialog 中提取所选路径？

c) 有了路径后，如何保存 XDocument 的内容？有一种称为 Save 的方法需要 Stream - 如何使用路径构建流？（这可能是个基本问题，我几乎没有IO经验）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T19:31:29.437

a) 您不想选择文件夹，而是选择文件名 (Save* *File* *Dialog)

b) SaveFileDialog.FileName

c) 查看不同的重载：您有 XDocument.Save(string fileName)。不需要流，你可以有一个文件名（哦，你在 SaveFileDialog 中得到它）

**编辑**：您的意思是用户不能更改文件名？然后

a) 文件夹浏览器对话框

b) FolderBrowserDialog.SelectedPath

c) XDocument.Save(FolderBrowserDialog.SelectedPath + "/" + THENAMEOFYOURFILETHATUSERCANTCHANGE)

（**编辑 2**：Path.Combine 在 c) 中更优雅）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T19:31:48.590

A & B（来自重复问题的示例代码）：

*   [C# 保存对话框](https://stackoverflow.com/questions/180330/c-sharp-save-dialog-box)

C（要保存的最少代码`XDocument`）：

```
XDocument document = new XDocument();
document.Add(new XElement("my_root"));
// Save(): there are 6 overloads; the 2nd one takes a path
document.Save(filePathFromSaveDialog); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:33:13.177

确保您将 SaveFileDialog 添加到表单并签署了 FileOk 事件（可以通过 SaveFileDialog 的属性完成），然后以下代码应该适用于您：

```
private void button1_Click(object sender, EventArgs e)
{
    // When user clicks button, show the dialog.
    saveFileDialog1.ShowDialog();
}

private void saveFileDialog1_FileOk(object sender, CancelEventArgs e)
{
    // Get file name.
    string name = saveFileDialog1.FileName;
    // Write to the file name selected.
    xDocumentYouHave.Save(name);
} 
```

# c# - Programmatically load User Control in code-behind registered in web.config

> ID：10057612
> 
> 赞同：2
> 
> 时间：2012-04-07T19:26:02.460
> 
> 标签：c#, asp.net, web-config

Is it possible to load a User Control that was registered in the web.config file, rather than in the aspx file?

Here is an example of what I would do. In my aspx:

**index.aspx**

```
<%@ Register TagPrefix="module" TagName="ModExample" Src="~/controls/example.ascx" %> 
```

**index.cs**

```
protected void Page_Load(object sender, EventArgs e)
{
    controls_example exmp = LoadContent("controls/example.ascx") as controls_example;
    myContentPanel.Controls.Add(exmp);
} 
```

I had to register my user control in the page, or else ASP would not know what "controls_example" was. However, I know you can change your web.config to look like this:

```
<configuration>
    <system.web>
        <pages>
            <controls>
                <add tagPrefix="module" tagName="ModExample" src="~/controls/contentModule.ascx"/>
                <add assembly="Subtext.Web.Controls" namespace="Subtext.Web.Controls" tagPrefix="module"/>
            </controls>
        </pages>
    </system.web>
</configuration> 
```

So, here is the problem. How do I create a variable of type "controls_example" when it has been registered in the web.config file?

Do I need to:

*   add a "using namespace"?
*   change/add something in my web.config?
*   not define what the datatype of the variable is? (I would love to avoid this)
*   something else?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T19:41:34.680

Your `web.config` looks fine. In the page you need to add a `using` with the namespace of your control. Then you can use the page's `LoadControl` method to get an instance of your control that you can then add as a child control to some container (I usually choose a `asp:Placeholder` to ensure its position is where I want it)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T20:14:21.803

@Adrian, here is my response to your question. I have to say it here, because I will run far over my char limit.

Ok, the first problem I had was that I was using a ASP.NET **Website**, not a ASP.NET **Application**. I chaged this so I was using the latter. This made it so that all pages created from then on had a namespace by default (being the name of the folder they were in). I do not know if you can register controls using a namespace in a website, maybe because websites don't have namespaces by default.

So let's say I made a Web User Control called `myControl.ascx`, and saved it as `~/controls/myControl.ascx`. Looking at the ascx file, the top line should read: `<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="myControl.ascx.cs" Inherits="myApplication.controls.myControl" %>`. `myApplication` is the name of your website, and you can seed it added `controls` to the namespace because that is the folder it is in. Also, if you look at the code behind, the namespace will match.

Now, from here you have 2 options on how to register and use the control. The slow way is to register each control you want to use on each page you have, which is good if you only have a few of each. To do this, write the following line in the page you want to call the control from (like the index page, for example):

```
<%@ Register TagPrefix="myC" TagName="myCoolControl" Src="~/control/myControl.ascx" %> 
```

That is the slow way, but it works (unless I typed something wrong).

Here is what I was trying to do: make it so I don't have to type this a thousand times, and only do it once in the `web.config` file.

Configure your `web.config` file to look like this:

```
<configuration>
    <system.web>
        <pages>
            <controls>
                <add tagPrefix="myCont" namespace="myApplication.controls" assembly="myApplication" />
            </controls>
        </pages>
    </system.web>
</configuration> 
```

This will automaticly register any control made in the "myApplication.controls" namespace, which, if you set things up correctly, is any control made in the "controls" folder. Just remember, you don't have to call the folder "controls" for this to work, you may have any namespace listed here and it should work just fine.

Now open up a page you want to load a control from programmatic (like index). You are **NOT** going to write anything in the aspx file, including anything about registering the page. The control is already registered, so all we have to do is load it in the code-behind:

```
myControl myCont = LoadControl("~/controls/myControl.ascx") as myControl;
//feel free to use the variable, or add it to the page with a panel or something 
```

I really hope this answered your question. It did take some digging around on my end to get it to work, so I'm glad to help others out with this problem. Thanks again to CyberDude, who got me going in the right direction.

# c++ - 如何在 Win32 上读取 wchar_t 缓冲区中的整个文件？

> ID：10057616
> 
> 赞同：1
> 
> 时间：2012-04-07T19:26:39.610
> 
> 标签：c++, visual-studio, file, buffer

我无法将 UTF8 编码的文件读入`wchar_t`缓冲区，因为我事先不知道文件大小。

有谁知道我如何读取缓冲区中的整个文件？

我想我必须保留一个`wchar_t *`（指针）并在阅读时调整它的大小。然而，这听起来很可怕，因为我以前从未调整过指针的大小。

我正在使用 Microsoft Visual Studio 进行 Windows C++ 编程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:38:37.107

您是否考虑过使用矢量？

```
#include <vector>
#include <fstream>
#include <iterator>

:::

std::wifstream in(file_name);

//Will automatically reallocate to the require size
std::vector<wchar_t> store {
    std::istream_iterator<wchar_t, wchar_t>(in),
    std::istream_iterator<wchar_t, wchar_t>()};

//to access wchar_t* you can call data();
my_func(store.data()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:39:09.190

如果要分配文件大小的缓冲区，首先需要找到文件大小。为此，您使用适当的参数调用 stat() 函数，它会填充包含文件大小的字段。

假设您将该大小存储在变量中`filesize`。

那么你就可以

```
wchar_t *buffer = reinterpret_cast< wchar_t * >new char [ filesize ]; 
```

然后在调用 open() 以获取文件描述符之后使用 read() 将整个文件读入该缓冲区，或者在调用 fopen() 以获取 FILE * 之后使用 fread() 将整个文件读入该缓冲区。

# google-maps - 谷歌地图中的半透明 MarkerImage

> ID：10057617
> 
> 赞同：1
> 
> 时间：2012-04-07T19:26:54.930
> 
> 标签：google-maps

我有一张带有自定义标记图像的地图。我使用的图像是半透明的。当我在地图中显示它时，只有一个小三角形显示在图标所在位置的右下角。

半透明图像可以用作谷歌地图中的图像标记吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:49:38.163

是的，透明图像可以用作自定义标记图像。在创建图像对象时指定图像的大小是一种很好的做法，例如

```
 var customMarkerImage = new google.maps.MarkerImage('image.png', new google.maps.Size(20, 20), null, new google.maps.Point(10, 10)); 
```

这也可以解决图像部分显示的问题。

# c# - C#通用方法，不能隐式转换

> ID：10057620
> 
> 赞同：10
> 
> 时间：2012-04-07T19:27:21.590
> 
> 标签：c#, generics, methods

我有以下代码：

```
public static T GetCar<T>() where T : ICar
{
    T objCar = default(T);

    if (typeof(T) == typeof(SmallCar)) {
        objCar = new SmallCar("");
    } else if (typeof(T) == typeof(MediumCar)) {
        objCar = new MediumCar("");
    } else if (typeof(T) == typeof(BigCar)) {
        objCar = new BigCar("");
    }

    return objCar;
} 
```

这是我得到的错误：`Cannot implicitly convert type 'Test.Cars' to 'T'`

我在这里想念什么？所有汽车类型都实现了 ICar 接口。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T19:30:23.180

您无法转换为，`T`因为 T 在编译时未知。如果您想让您的代码工作，您可以将返回类型更改为`ICar`并删除通用`T`返回类型。

您也可以投射到`T`. 这也行。如果您只使用默认构造函数，您还可以包含`new()`并使用`new T()`来让您的代码正常工作。

### 样品

```
public ICar GetCar<T>()
    where T : ICar
{
    ICar objCar = null;

    if (typeof(T) == typeof(SmallCar)) {
        objCar = new SmallCar();
    } else if (typeof(T) == typeof(MediumCar)) {
        objCar = new MediumCar();
    } else if (typeof(T) == typeof(BigCar)) {
        objCar = new BigCar();
    }

    return objCar;
} 
```

投掷：

```
public T GetCar<T>()
    where T : ICar
{
    Object objCar = null;

    if (typeof(T) == typeof(SmallCar)) {
        objCar = new SmallCar();
    } else if (typeof(T) == typeof(MediumCar)) {
        objCar = new MediumCar();
    } else if (typeof(T) == typeof(BigCar)) {
        objCar = new BigCar();
    }

    return (T)objCar;
} 
```

新约束：

```
public T GetCar<T>()
    where T : ICar, new()
{
    return new T();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-07T19:31:20.450

您的代码是非法的，因为虽然您可能正在测试并知道您给定的 T 是 BigCar 或其他类似类型，但编译器无法提前知道这一点，因此代码是非法的。根据您给定的用法，您可以

```
public static T GetCar<T>() where T : ICar, new()
{
    return new T();
} 
```

`new()`约束允许您调用类型的默认（无参数）构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T19:34:05.330

您可以简化代码

```
public static T GetCar<T>()
    where T : ICar, new()
{
    return new T();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-28T06:55:01.010

泛型是一个运行时概念。通用数据类型中使用的类型的信息，无论它是值还是引用类型，都可以在运行时使用反射获得。

当带有 T 的代码编译成 MSIL 时，它只会将其标识为具有类型参数。因此泛型类型参数 T 在编译时是未知的。

```
class Program
{
    static void Main(string[] args)
    {
        ICar smallCar = Helper.GetCar<SmallCar>("car 1");
        ICar mediumCar = Helper.GetCar<MediumCar>("car 2");

        Console.ReadLine();
    }
}

static class Helper
{
    public static T GetCar<T>(string carName) where T : ICar
    {
        ICar objCar = default(T);

        if (typeof(T) == typeof(SmallCar))
        {
            objCar = new SmallCar { CarName = carName };
        }
        else if (typeof(T) == typeof(MediumCar))
        {
            objCar = new MediumCar { CarName = carName };
        }

        return (T)objCar;
    }

}

interface ICar
{
    string CarName { get; set; }
}

class SmallCar : ICar
{
    public string CarName { get; set ; }
}

class MediumCar : ICar
{
    public string CarName { get; set; }
} 
```

# java - Java - 添加所有奇数奇怪的行为

> ID：10057628
> 
> 赞同：2
> 
> 时间：2012-04-07T19:28:39.617
> 
> 标签：java, for-loop

我正在为项目 euler 进行数学挑战，并且在运行程序时遇到了一个奇怪的问题。结果应该是不超过 10,000,000 的所有奇数的总和，但我得到一个负数，我做错了什么？

```
package program;

import java.util.*;

public class MainClass {

/**
 * @param args
 */
public static void main(String[] args) {

    int total = 0;

    for (int counter = 1; counter < 10000000; counter++) {
        if (!((counter % 2) == 0)) {
            total+=counter;
        }

    }
    System.out.println(total);

} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T19:30:04.467

使用 a`long`而不是`int`. 由于整数溢出，您得到一个负数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T19:40:03.917

该`int`变量无法容纳总计，因为总计太大。在循环中的某个时刻，您会遇到[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)，并且它正在“翻转”为负数：

你需要一个`long`.

关于风格和效率的问题，我会更改代码以进行迭代，`2`这样您就不需要进行奇怪的测试：

```
public static void main(String[] args) {
    long total = 0;
    for (int counter = 1; counter < 10000000; counter += 2) { // iterate by 2
        total += counter;
    }
    System.out.println(total);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T19:40:11.560

您应该在 java 中使用`long total = 0;`而不是*4 个字节*，范围从 -2,147,483,648 到 2,147,483,647。`int total = 0;` `int`

 *所以`2,147,483,647 + 1 = -2,147,483,648`

这个`total`循环的结果是 25,000,000,000,000 可以容纳`long`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T19:56:28.573

只是为这个问题提供更聪明的解决方案（数学！耶）。

你可以更容易地解决这个问题，你只需要知道 1..2n-1 的奇数之和等于 n 的平方。对于那些想尝试的人来说，很容易通过归纳来证明这一点。

无论如何，这意味着 1..X 的总和等于：`((X + 1) / 2)**2`*

# internet-explorer - 如何在 IE 和 Firefox 中以最少的用户交互以编程方式保存当前网页的“快照”

> ID：10057629
> 
> 赞同：1
> 
> 时间：2012-04-07T19:28:44.680
> 
> 标签：internet-explorer, firefox, pdf-generation

我试图了解如何以编程方式在 IE 和 Firefox 中保存网页的“快照”？网页 URL 本质上是动态的，因此需要在触发“拍摄快照”按钮时捕获网页快照。尝试通过服务器端选项捕获站点将不起作用，因为 URL 是动态的，并且无法使用该 URL 再次访问原始页面。

理想情况下，我希望实现一个用户可以单击的书签。在点击时，当前网页被捕获并保存（即整个网页，包括网页中未显示的任何部分），而无需来自用户的任何额外交互。

然后，用户可以访问我的网站以查看网页的“静态”副本（作为 pdf 或图像——还有其他格式吗？）

如果我在我的问题中遗漏了任何其他必需的信息，我深表歉意，但我可以根据需要做出澄清。

谢谢斯里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:32:19.017

To get the html from a page with a bookmarklet use document.documentElement.outerHTML and send the code back to the server via XHR (ajax) or via a form post.

You can show that saved HTML back to user from your site, but some links and images in the saved HTML may be broken if the URLs were relative paths. To fix that, before capturing HTML, the bookmarklet should update all URLs in the page to use full paths. Even then, images will be broken in some cases when the other server blocks hot linking of images through referrer checking or through password protection. Simple referrer checking can be fixed by having your server download all images found in the saved HTML to your local server and then rewrite the paths in the saved HTML to point to the images on your local server. You would probably also want to remove any script from the page first. There is also the problem of any frames or iframes. Frames from the same domain could be captured recursively, but frames from 3rd party sites would be unreachable by the bookmarklet.

How to automatically create a PDF or image from the saved HTML page is a separate question.

In general, when saving the HTML, there is no perfect solution. The only perfect solution would be to create an add-on, extension, or program that captures a pixel perfect image of exactly what the user is seeing. This can not be done with a bookmarklet. There are probably add-ons around that do that, and to see how they do it, you can start by digging into their source.

# c# - MVC3 搜索框验证

> ID：10057632
> 
> 赞同：0
> 
> 时间：2012-04-07T19:29:19.067
> 
> 标签：c#, jquery, visual-studio-2010, asp.net-mvc-3, razor

我是编程新手，我创建了一个搜索框，可以根据标题搜索和返回新闻文章。

我不知道该怎么做是在搜索中找不到结果时向页面中的用户返回一条消息。我想显示“抱歉，未找到结果”之类的消息。

我正在使用带有 MVC3 Razor 和 C# 的 Visual Studio 2010 ASP.NET。

我四处寻找答案但没有成功，实现这一目标的最佳方法是什么，是使用 JQuery 还是修改控制器？

提前感谢您的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:33:18.747

您可以使用包含`IEnumerable<T>`表示搜索结果的属性的视图模型：

```
public class MyViewModel
{
    public IEnumerable<NewsViewModel> News { get; set; }
} 
```

现在在您看来，您可以测试该`News`属性是否包含任何元素：

```
@model MyViewModel
...
@if (Model.News != null && Model.News.Any())
{
    ... show the results using the Model.News property
}
else
{
    <div>Sorry, No results found</div>
} 
```

当然，负责执行搜索的控制器操作将填充此视图模型并将其传递给视图。

# android - 显示支持的最大多点触控指针数

> ID：10057633
> 
> 赞同：1
> 
> 时间：2012-04-07T19:29:27.687
> 
> 标签：android

我已经搜索过，但无法找到这个问题的答案。我有一个应用程序，它需要知道设备的多点触控最多可以支持的手指数量。有什么方法可以显示用户设备可以支持的手指数量。例如 HTC Desire - 2、HTC Desire HD - 4 等。

# git - Cherrypick 提交订单

> ID：10057634
> 
> 赞同：9
> 
> 时间：2012-04-07T19:29:27.910
> 
> 标签：git, merge-conflict-resolution, git-cherry-pick

这可能是一个幼稚的 git 问题，但它是：

在进行拉取请求之前，我通常从上游的最新提交创建一个新分支，并从我的开发分支中挑选重要的提交。然后从我的新分支向远程存储库发出拉取请求。

但是我讨厌合并冲突（尽管 git mergetool 在它们发生时有很大帮助）。我怀疑其中一些冲突是由樱桃挑选的顺序引起的。我通常会从最旧到最新的提交中挑选一组提交。这是正确的方法吗。还是提交顺序对git无关紧要？

是否有任何其他技巧可以最大限度地减少樱桃采摘期间的合并冲突？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-07T19:42:57.617

您绝对应该按顺序挑选提交。如果你不这样做，它们可能不适用——想象一个提交添加了 foo.c，而下一个提交修改了它。显然，它们不会出现故障。一般来说，即使不是那么明显，也有一些合乎逻辑的开发流程，你不想搞砸它。也就是说，我不确定您为什么要手动创建分支并挑选樱桃；它相当于（只要你不跳过提交）到`git pull --rebase`.

如果您在挑选时遇到合并冲突，则更多地表明您的开发过程并不理想。这意味着您在开发分支中所做的事情也在上游发生了变化。您可以通过不使用其他人正在处理的相同代码来帮助自己，或者`pull --rebase`在开发过程中更频繁地从上游拉取（可能再次），而不是等到最后。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T19:43:42.940

当然，提交顺序很重要。如果提交 B 修改了提交 A 中首次引入的内容，那么在应用提交 A 之前，您不能应用提交 B。

你的工作流程很奇怪。您应该`git rebase`在上游分支的内容之上重建您的分支，或者只是`git merge`将上游分支重建到您的分支中。这避免了挑选工作，实际上让 git 有更好的机会自动解决冲突。

# jquery - 如何在 Nivo Slider 插件的缩略图中添加滑块？

> ID：10057636
> 
> 赞同：0
> 
> 时间：2012-04-07T19:30:07.463
> 
> 标签：jquery, slider, thumbnails, nivo-slider

我已经搜索了很长时间，并尝试将两个不同的插件放在一起来完成这项工作，但似乎没有任何效果。

你们知道有什么好的链接可以在 nivo 滑块的缩略图中添加一个滑块，这样您一次只能查看 5 个缩略图，当您单击或离开缩略图区域时，它会滑动以显示接下来的 5 个缩略图？

我尝试了 JSCarousel 和 ThumbnailScroller 到 .nivo-controlNav 标签，但其中任何一个都没有运气。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:44:54.857

似乎您可能需要设计一个自定义解决方案。我建议再次尝试使用 JSCarousel，我过去曾将它用于同样的解决方案并且成功了。否则，我不会为您编写代码，但伪代码将如下所示：

1.  在一个 div 标签内列出所有缩略图，该标签是缩略图的高度（带有边距和填充）和自动宽度。用固定宽度围绕它包裹一个 div。例如，如果您有 90 像素的方形缩略图，并且您希望每个缩略图周围有 10 像素的填充，那么您的容器 div 高度为 110 像素，如果您想显示 5 个缩略图，那么您的宽度为 550 像素。最重要的是您的溢出必须设置为隐藏，这样就不会显示其他缩略图。
2.  在两侧创建按钮。
3.  单击一个按钮，将您的缩略图的左侧位置移动 550 像素（或您拥有的任何宽度）。
4.  有条件语句来检查左侧位置是大于宽度（达到右限）还是小于 0（达到左限）。

希望这将为您指明正确的方向！

# android - HttpPost 无法执行其功能

> ID：10057642
> 
> 赞同：0
> 
> 时间：2012-04-07T19:31:11.543
> 
> 标签：android, http, post, try-catch, progressdialog

我正在尝试使用 HttpPost 发送带有一些参数的 URL，但没有成功。我正在使用这段代码：

```
public void Exchange()
{
    final ProgressDialog pd = ProgressDialog.show(this, null, ResourceBundle.getBundle("lang").getString("doTheAction"), true, false);
        new Thread(){
                public void run() {

                    HttpClient httpclient = new DefaultHttpClient();
                    try {
                        httpclient.execute(new HttpPost(URL));
                        Merchant.this.runOnUiThread(new Runnable(){
                            @Override
                                public void run(){
                                    Again();
                                } 
                           });

                    } catch (IOException e) { e.printStackTrace(); }
                    finally { httpclient.getConnectionManager().shutdown(); }
                    pd.dismiss();
                }
        }.start();
} 
```

它不做任何事情，但它必须更改 MySQL 数据库上的一些值。有人能帮我吗？似乎这一切都是正确的。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:38:32.300

您可以使用此功能通过 API 将数据发布到服务器，然后更改 MySQL 数据库上的某些值是服务器端任务

```
 public static String post(String to, List <NameValuePair> params) {
        try {
            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(to);
            UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params,HTTP.UTF_8);
            post.setEntity(ent);
            HttpResponse responsePost = client.execute(post);  
            HttpEntity resEntityPost = responsePost.getEntity();  
            if (resEntityPost != null) return EntityUtils.toString(resEntityPost);
        } catch (Exception e) {
            Log.e("POST", e.toString());
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:36:22.163

您可能需要检查`HttpResponse`返回的`httpClient.execute()`. 您可能想检查`response.getStatusLine().getStatusCode()`它是否不是 200。您可能还想检查您的服务器日志它是否收到任何内容？还有你确定`IOException`不是扔的吗？

# android - 删除项目（文件）时动态更新网格视图

> ID：10057645
> 
> 赞同：6
> 
> 时间：2012-04-07T19:31:22.200
> 
> 标签：android, gridview

我正在尝试删除网格视图中的项目/文件。这些文件位于`/data/my-image-folder/`. 文件会立即删除，但 UI 不会立即更新。这是我的代码：

```
 imageFilePath = /data/<my-image-folder>/"file.jpg";
   File file = new File(imageFilePath);
    if (file.exists()) {
    boolean deleted = file.delete();
    sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,Uri.parse(imageFilePath+ Environment.getExternalStorageDirectory()))); 
```

获取查看代码：

```
View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View gridView;

            if (convertView == null) {

                gridView = new View(context);

                // get layout from gridlayout.xml
                gridView = inflater.inflate(R.layout.gridlayout, null);

                // set value into textview
                TextView textView = (TextView) gridView
                        .findViewById(R.id.grid_item_label);
                textView.setText(fileList[position]);
                System.out.println("value of fileList[position]" + fileList[0]);
                // set image
                ImageView imageThumbnail = (ImageView) gridView
                        .findViewById(R.id.grid_item_image);

                byte[] imageData = null;
                try {

                    final int THUMBNAIL_SIZE = 64;

                    FileInputStream fis = new FileInputStream(FILE_PATH
                            + fileList[position]);
                    Bitmap imageBitmap = BitmapFactory.decodeStream(fis);

                    Float width = new Float(imageBitmap.getWidth());
                    Float height = new Float(imageBitmap.getHeight());
                    Float ratio = width / height;
                    imageBitmap = Bitmap.createScaledBitmap(imageBitmap,
                            (int) (THUMBNAIL_SIZE * ratio), THUMBNAIL_SIZE,
                            false);

                    ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
                    imageData = baos.toByteArray();
                    imageThumbnail.setImageBitmap(imageBitmap);
                } catch (Exception ex) {

                }

            } else {
                gridView = (View) convertView;
            }

            return gridView;
        } 
```

这是我的网格视图适配器代码：

```
 ImageAdapter adapter = null; //ImageAdapter extends BaseAdapter
            if (fileList != null) {
                 adapter = new ImageAdapter(this, fileList);
                gridView.setAdapter(i);
            } 
```

如果我这样做，则在删除后：

```
adapter.notifyDataChanged();
grid.invalidateViews(); 
```

编译器抱怨将适配器设为“最终”，但如果我将其设为“最终”，它会抱怨我无法使适配器成为最终的，因为它不允许以下行发生：

```
adapter = new ImageAdapter(this, fileList); 
```

此外，我找不到实现**notifyDataChanged**。有**notifyDataSetChanged**、**notify**、**notifyAll**和**notifyDataSetInvalidated**但没有**notifyDataChanged**。

我认为 Intent.ACTION_MEDIA_MOUNTED 适用于位于外部 sd 卡上的所有图像/文件，而不适用于手机文件系统。这是正确的。

我怎样才能实现它。请建议。

Rgds，软软的

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T19:36:29.060

你应该看看：

```
adapter.notifyDataSetChanged();
grid.invalidateViews(); 
```

它会通知适配器发生了一些变化，并重新绘制网格。

关于，**ACTION_MEDIA_MOUNTED**文档说： *外部媒体存在并安装在其安装点。已移除媒体的安装点路径包含在 Intent.mData 字段中。Intent 包含一个名为“只读”的额外内容和布尔值，以指示媒体是否以只读方式安装。*

[http://developer.android.com/reference/android/content/Intent.html#ACTION_MEDIA_MOUNTED](http://developer.android.com/reference/android/content/Intent.html#ACTION_MEDIA_MOUNTED)

所以我想你是对的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:09:59.623

好的，我找到了解决方案：我在像这样删除之后再次更新 fileList

```
File imageFiles = new File(PATH_TO_IMAGES); 

    if (imageFiles.isDirectory())
     {
       fileList = imageFiles.list();
     } 
```

然后使用适配器实例和像这样的文件列表再次更新gridview - >

```
gridView.setAdapter(new ImageAdapter( ImageGallary.this, fileList)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T06:28:11.917

您不需要重新创建适配器。就这样做，

```
File imageFiles = new File(PATH_TO_IMAGES); 

if(imageFiles.isDirectory()){
   fileList.clear()
   fileList.addAll(imageFiles.list());
   adapter.notifyDataSetChanged();
} 
```

有关更多信息，请参阅[Android：notifyDataSetChanged(); 不工作](https://stackoverflow.com/questions/16165728/android-notifydatasetchanged-not-working/20479071#20479071)

# c# - 反序列化 protobuf-net 类列表 物业/会员

> ID：10057646
> 
> 赞同：1
> 
> 时间：2012-04-07T19:31:26.660
> 
> 标签：c#, protobuf-net

我正在编写一些自然语言处理代码，并希望有一个二进制格式的字典来查找单词的含义。我最初使用标准的序列化和二进制格式化机制，但对生成的文件有多大以及充满（冗余）类型信息的程度感到震惊。我一直试图让 protobuf-net 库为我工作，但有以下问题：

当我将字典写入文件时，我还将记录开始的偏移量放入索引文件中，我认为序列化工作正常，但是当我查找条目时，我得到正确的偏移量，但 DictionaryEntry 的 Definitions 属性包含所有DictionaryDefinitions 从那时起（数千个）。列表中的第一个 DictionaryDefinition 是搜索词的正确定义。

我曾尝试将其作为属性和公共成员来实现，但没有成功。我还尝试了 ProtoContract 属性中的 SkipConstructor = true 和 ProtoMember 属性中的 OverwriteList = true。

```
[ProtoContract] 
public class DictionaryEntry
{
    [ProtoMember(1)]
    public string EntryKey { get; set; }
    [ProtoMember(2)]
    public List<DictionaryDefinition> Definitions{ get; set; }
}

[ProtoContract]
public class DictionaryDefinition
{
    [ProtoMember(1)]
    public string PartOfSpeech { get; set; }
    [ProtoMember(2)]
    public string Definition { get; set; }
} 
```

我认为我在其余代码中没有做任何特别愚蠢的事情，但是如果有人可以为这部分提出任何建议，我想排除这一点。

谢谢，

米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:39:48.840

原始 protobuf 格式既没有长度前缀也没有终止符 - 它被设计为 append === 合并。

如果您需要识别单个流中的单个对象，请使用 *WithLengthPrefix 方法进行序列化/反序列化。这将允许您从流中可靠地选择单个元素。

# java - pagerank：如何解决 java.lang.StackOverflowError？

> ID：10057650
> 
> 赞同：2
> 
> 时间：2012-04-07T19:31:49.140
> 
> 标签：java, recursion, stack-overflow, pagerank

我正在尝试实现一个以 100 万个节点作为输入的 pagerank 算法。

但是，我有这个错误。我很确定这是因为来自 generateParamList() 的开放递归调用问题。

我试图以一种不同的方式使这种方法不使用递归，但一次又一次地失败。如果您让我知道如何修改“generateParamList()”，我将不胜感激！！！

```
Exception in thread "main" java.lang.StackOverflowError
    at Ranking.getInboundLinks(Ranking.java:200)
    at Ranking.generateParamList(Ranking.java:172)

    import Jama.Matrix;

    public class Ranking {

    private final double DAMPING_FACTOR = 0.85;

    private List params = new ArrayList();
    private static Map<String, String[]> outlinkMap =   new HashMap();
    private static Map<String, String[]> inlinkMap  =   new HashMap();

    public static void main(String[] args) throws IOException {

        Ranking ranking = new Ranking();

        FileInputStream in = new FileInputStream("linkgraph_test.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(in));

        String strLine;
        String[] tempStringArray = null;

        int iTemp = 0;

        while ((strLine = br.readLine()) != null) {

            tempStringArray = strLine.split(" ");

            String[] tempValueArray = new String[tempStringArray.length-1];

            for(iTemp=1;iTemp<tempStringArray.length;iTemp++){
                tempValueArray[iTemp-1] = tempStringArray[iTemp];
            }

            outlinkMap.put(tempStringArray[0], tempValueArray);
        }
        in.close();

        setInboundLinks();

        for(int j=1;j<=outlinkMap.size();j++){
            String keytoString = Integer.toString(j);
            System.out.println(keytoString+" "+ranking.rank(keytoString));
        }
    }

    /*
     * 
     * Solve the equation of ax=b, which : a is the generated matrix based on the parameter constants. x is the page ranks matrix. b is a n*1 matrix which all the values are equal to the damping factor.
     * 
     */

    public double rank(String pageId) {

        generateParamList(pageId);
        Matrix a = new Matrix(generateMatrix());
        double[][] arrB = new double[params.size()][1];
        for (int i = 0; i < params.size(); i++) {
            arrB[i][0] = 1 - DAMPING_FACTOR;
        }
        Matrix b = new Matrix(arrB);

        // Solve the equation and get the page ranks
        Matrix x = a.solve(b);
        int ind = 0;
        int cnt = 0;
        for (Iterator it = params.iterator(); it.hasNext();) {
            String curPage = (String) it.next();
            if (curPage.equals(pageId))
                ind = cnt;
            cnt++;
        }
        return x.getArray()[ind][0];
    }

    /*
     * 
     * This method generates the matrix of the linear equations. The generated
     * 
     * matrix is a n*n matrix where n is number of the related pages.
     * 
     */
    private double[][] generateMatrix() {
        double[][] arr = new double[params.size()][params.size()];
        for (int i = 0; i < params.size(); i++) {
            for (int j = 0; j < params.size(); j++) {
                arr[i][j] = getMultiFactor((String) params.get(i),(String) params.get(j));

            }

        }

        return arr;

    }

    /*
     * 
     * This method returns the constant of the given variable in the linear equation.
     * 
     */

    private double getMultiFactor(String sourceId, String linkId) {
        if (sourceId.equals(linkId))
            return 1;
        if(!sourceId.equals(linkId) && getInboundLinks(sourceId)!=null ) {
            //System.out.println("source"+sourceId+"\tlinkInd"+linkId);
            String[] inc = getInboundLinks(sourceId);
            for (int i = 0; i < inc.length; i++) {
                if (inc[i].equals(linkId)) {
                    return -1*(DAMPING_FACTOR / getOutboundLinks(linkId).length);
                }
            }
        }

        return 0;

    }

    /*
     * 
     * This method returns list of the related pages. This list is also the parameters in the linear equation.
     * 
     */

    private void generateParamList(String pageId) {

        System.out.println("start"+pageId);
        if(getInboundLinks(pageId)!=null){
        // Add the starting page.
        if (!params.contains(pageId))   params.add(pageId);

        // Get list of the inbound pages

            String[] inc = getInboundLinks(pageId);
        // Add the inbound links to the params list and do same for inbound links

            for (int i = 0; i < inc.length; i++) {

                if (!params.contains(inc[i])){
                    generateParamList(inc[i]);

                }

            }
        }

    }

    /*
     * 
     * Return list of the inbound links to a given page.
     * 
     */

    private String[] getInboundLinks(String pageId) {

        return (String[]) inlinkMap.get(pageId);

    }

private static void setInboundLinks(){

        int valueLength;
        String keytoString;
        String[] outlinkValueArray, inlinkValueArrayTemp, tempCopyArray, resultArray;

        for(int i=1; i<=outlinkMap.size();i++){

            keytoString = Integer.toString(i);
            outlinkValueArray= outlinkMap.get(keytoString);
            if(outlinkValueArray!=null){
                valueLength = outlinkValueArray.length;         
                for(int j=0; j<valueLength;j++){
                    String[] tempValueArray = new String[1];
                    if(!inlinkMap.containsKey(outlinkValueArray[j])){

                        tempValueArray[0] = keytoString;
                        inlinkMap.put(outlinkValueArray[j],tempValueArray);

                    }
                    else{

                        tempCopyArray = inlinkMap.get(outlinkValueArray[j]);
                        tempValueArray[0] = keytoString;

                        resultArray = mergeArray(tempCopyArray, tempValueArray);
                        inlinkMap.put(outlinkValueArray[j],resultArray);
                    }
                }
            }
        }

    }

    public static String[] mergeArray(String[] ar1, String[] ar2){
        String[] ar3 = Arrays.copyOf(ar1, ar1.length+ar2.length);
        System.arraycopy(ar2, 0, ar3, ar1.length, ar2.length);
        return ar3;
    }
    /*
     * 
     * Returns list of the outbound links from a page.
     * 
     */

    private String[] getOutboundLinks(String pageId) {

        // This simulates a simple page collection
        return (String[]) outlinkMap.get(pageId);

    }
} 
```

输入格式：1 126645 320349 144068 635538​​ 37354 141327 53842 121180 4786 31658 285466 526963 93938 9097 32341 ...... 2 ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:10:27.667

为此更改您的函数**generateParamList**，它是一个非递归版本。我认为它做同样的工作，请测试。我放了一些评论来帮助你理解这个概念。

```
private void generateParamList(String pageId) {
    // Don't process duplicates
    if (params.contains(pageId)) return;

    // Store links not processed
    Stack<String> links = new Stack<String>();

    // Store current pageId to be processed
    links.push(pageId);

    // Loop, processed the Stack link, not a recursive call
    while (!links.empty()) {
        pageId = links.pop();

        // Link already processed
        if (params.contains(pageId)) continue;

        params.add(pageId);

        // Get list of the inbound pages
        String[] inc = getInboundLinks(pageId);

        for (int i = 0; i < inc.length; i++) {
            // Store link to be processed by the loop
            links.push(inc[i]);
        }
    }
} 
```

# java - 如何检查 MongoDB 中是否存在字段？

> ID：10057651
> 
> 赞同：20
> 
> 时间：2012-04-07T19:31:49.480
> 
> 标签：java, mongodb

我已经创建了一些文档并设法进行了一些简单的查询，但是我无法创建一个查询来查找仅存在字段的文档。

例如假设这是一个文档：

```
{  "profile_sidebar_border_color" : "D9B17E" , 
   "name" : "???? ???????" , "default_profile" : false , 
   "show_all_inline_media" : true , "otherInfo":["text":"sometext", "value":123]} 
```

现在我想要一个查询，它将把所有文档中的文本都`otherInfo`包含在其中。

如果没有文本，那么`otherInfo`将是这样的：`"otherInfo":[]`

所以我想检查`text`.`otherInfo`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-07T20:10:47.967

您可以将`$exists`运算符与`.`表示法结合使用。mongo-shell 中的裸查询应如下所示：

```
db.yourcollection.find({ 'otherInfo.text' : { '$exists' : true }}) 
```

Java 中的测试用例可能如下所示：

```
 BasicDBObject dbo = new BasicDBObject();
    dbo.put("name", "first");
    collection.insert(dbo);

    dbo.put("_id", null);
    dbo.put("name", "second");
    dbo.put("otherInfo", new BasicDBObject("text", "sometext"));
    collection.insert(dbo);

    DBObject query = new BasicDBObject("otherInfo.text", new BasicDBObject("$exists", true));
    DBCursor result = collection.find(query);
    System.out.println(result.size());
    System.out.println(result.iterator().next()); 
```

输出：

```
1
{ "_id" : { "$oid" : "4f809e72764d280cf6ee6099"} , "name" : "second" , "otherInfo" : { "text" : "sometext"}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-06T19:15:11.420

或者您可以使用：

```
import static com.mongodb.client.model.Filters.exists;

Document doc = (Document) mongoCollection.find(exists("otherInfo")).first(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-29T06:06:23.603

您可以使用`com.mongodb.QueryBuilder`该类来构建马特回答中提供的查询：

```
QueryBuilder queryBuilder = QueryBuilder.start("otherInfo.text").exists(true);
DBObject query = queryBuilder.get();
DBCursor dbCursor = collection.find(query); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T19:59:57.493

in 查询不会过滤掉所有带有文本值的元素，如下所示。

```
db.things.find({otherInfo:{$in: [text]}});

BasicDBObject query = new BasicDBObject();
query.put("otherInfo", new BasicDBObject("$in", "[text]"));
var result = db.find(query); 
```

# asp.net - LINQ to XML & 绑定到 Gridview

> ID：10057656
> 
> 赞同：0
> 
> 时间：2012-04-07T19:32:35.723
> 
> 标签：asp.net, linq, data-binding, gridview, linq-to-xml

我正在从 XML 中读取数据，如下所示：（Contacts.xml）

```
 <?xml version="1.0" encoding="utf-8" standalone="yes"?>
    <!--LINQ to XML Contacts XML Example-->
    <?MyApp 123-44-4444?>
    <contacts>
      <contact>
        <name>Patrick Hines</name>
        <phone type="home">206-555-0144</phone>
        <phone type="work">425-555-0145</phone>
        <address>
          <street1>123 Main St</street1>
          <city>Mercer Island</city>
          <state>WA</state>
          <postal>68042</postal>
        </address>
      </contact>
      <contact>
        <name>Gretchen Rivas</name>
        <phone type="mobile">206-555-0163</phone>
        <address>
          <street1>123 Main St</street1>
          <city>Mercer Island</city>
          <state>WA</state>
          <postal>68042</postal>
        </address>
      </contact>
    </contacts> 
```

我从 XML 文件中获取数据的代码：（contacts.cs）

```
public class Contact
    {
//static members
public static string fLocation;

//private members
private string name;
private List<PhoneNumber> pNumber;
private Adress cAdress;

//public members
public Adress CAdress
{
    get { return cAdress; }
}
public List<PhoneNumber> PNumber
{
    get { return pNumber; }
}
public string Name
{
    get { return name; }
}

//Constructor
public Contact(string _name, List<PhoneNumber> _pNumber,Adress _cAdress)
{
    name = _name;
    pNumber = _pNumber;
    cAdress = _cAdress;
}

public static List<Contact> Get()
{
    List<Contact> output = new List<Contact>();

    XDocument data = XDocument.Load(fLocation);

    var query = from c in data.Descendants("contact")
                orderby c.Element("name").Value
                select c;

    foreach (var item in query)
    {
        List<PhoneNumber> pNumber = new List<PhoneNumber>();

        foreach (var PhoneNumbers in item.Elements("phone"))
        {
            pNumber.Add(new PhoneNumber(PhoneNumbers.Value,PhoneNumbers.Attribute("type").Value));
        }

        Adress cAdress = new Adress(item.Element("address").Element("street1").Value,
            item.Element("address").Element("city").Value,
            item.Element("address").Element("state").Value,
            item.Element("address").Element("postal").Value);

        output.Add(new Contact(item.Element("name").Value,pNumber,cAdress));
    }

    return output;
}

//subclasses
public class Adress
{
    private string street;
    private string city;
    private string state;
    private string postal;

    public string Postal
    {
        get { return postal; }
    }          
    public string State
    {
        get { return state; }
    }
    public string City
    {
        get { return city; }
    }
    public string Street
    {
        get { return street; }
    }

    public Adress(string _street,string _city, string _state, string _postal)
    {
        street = _street;
        city = _city;
        state = _state;
        postal = _postal;
    }
}

public class PhoneNumber
{
    private string number;
    private string numberType;

    public string NumberType
    {
        get { return numberType; }
    }
    public string Number
    {
        get { return number; }
    }

    public PhoneNumber(string _number, string _phoneNumberType)
    {
        number = _number;
        numberType = _phoneNumberType;
    }
} 
```

}

我想以某种方式绑定到 Gridview：（default.aspx）

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataSourceID="ObjectDataSource1">
        <Columns>
            <asp:BoundField DataField="Name" HeaderText="Name" ReadOnly="True" 
                SortExpression="Name" />
            <asp:DynamicField DataField="CAdress" HeaderText="CAdress" />
            <asp:DynamicField DataField="PNumber" HeaderText="PNumber" />
        </Columns>
    </asp:GridView>
    <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="Get" 
        TypeName="LINQtoXML_WebForms.Contact"></asp:ObjectDataSource> 
```

任何想法如何绑定例如 Contact.PhoneNumber.number + "-" Contact.PhoneNumber.numberType 到列？

IE：`774-6655-252 - mobile`

谢谢。

当我运行它时，它向我显示一个错误：

> 无法确定 MetaTable。无法为数据源“ObjectDataSource1”确定 MetaTable，并且无法从请求 URL 中推断出 MetaTable。确保表映射到数据源，或者数据源配置了有效的上下文类型和表名，或者请求是注册的 DynamicDataRoute 的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T00:03:36.817

我认为您要么必须将元信息添加到您的类中，要么使用我使用的方法 - 自己编写一个方法而不是使用 objectdatasource 对象。

例如 Linq 到 XML

```
public List<Contact> GetContacts()
{ 
    XDocument doc = XDocument.Load("path_to_some_file.xml");

    var contacts = from o in doc.Descendants("contact")
                   select new Contact()
                   {
                      Name = (string)o.Element("Name"),
                      Phone = (string)o.Element("Phone")
                   };

     return contacts.ToList();
} 
```

然后只需将其在代码隐藏中绑定到您的控件：

```
GridView1.DataSource = GetContacts();
GridView1.DataBind(); 
```

希望你能明白。

# owl - owlim 库使用配置文件

> ID：10057657
> 
> 赞同：1
> 
> 时间：2012-04-07T19:32:52.913
> 
> 标签：owl, sesame

我正在尝试使用[owlim 库](http://www.ontotext.com/owlim)来编辑 owl 本体文件。我从 owl 库中包含的“入门”示例代码开始。当我将这个库与这个示例代码一起使用时，一切都很完美。它使用 de owlim.ttl 文件来配置存储库，其中也包含此存储库的路径：

(owlim.ttl:)

```
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix rep: <http://www.openrdf.org/config/repository#>.
@prefix sr: <http://www.openrdf.org/config/repository/sail#>.
@prefix sail: <http://www.openrdf.org/config/sail#>.
@prefix owlim: <http://www.ontotext.com/trree/owlim#>.

[] a rep:Repository ;
   rep:repositoryID "owlim" ;
   rdfs:label "OWLIM Getting Started" ;
   rep:repositoryImpl [
     rep:repositoryType "openrdf:SailRepository" ;
     sr:sailImpl [
       owlim:ruleset "owl-horst-optimized" ;
       owlim:entity-index-size "5000000" ;
       owlim:cache-memory "180m" ; 
       sail:sailType "swiftowlim:Sail" ; 
       owlim:noPersist "false" ;
       owlim:storage-folder "storage" ;
       owlim:base-URL "http://example.org/owlim#" ;
       owlim:repository-type "in-memory-repository" ;
       owlim:imports "./sesame/example.rdfs" ;
       owlim:defaultNS "http://example.org/owlim#" ;
      ]
   ]. 
```

在[文档站点上](http://owlim.ontotext.com/display/OWLIMv40/OWLIM-Lite+Configuration)，他们明确表示：

`'With the example set up, OWLIM-Lite loads two ontologies at start up as specified by the imports parameter in the repository configuration file, i.e. owlim.ttl'`,

但是当我将该路径更改为另一个文件时，我仍然得到与以前相同的输出。即使我尝试更改此 example.rdfs 存储库中的某些内容，查询的结果也不会改变。有谁知道问题可能是什么？路径是否在其他地方指定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:21:47.347

导入配置参数仅用于一次使用只读模式初始化存储库。一旦创建，这些语句就无法更改，因此当您稍后修改此参数并使用旧存储库重新启动时，您将看不到任何差异。

为了使用不同的导入模式，您必须创建一个新的存储库。

# haskell - 模式匹配变量的范围

> ID：10057659
> 
> 赞同：2
> 
> 时间：2012-04-07T19:32:55.797
> 
> 标签：haskell, pattern-matching, scope

有一些类型`Record`：

```
type Day         = Integer
type Description = String
type Name        = String
type PhoneNumber = String
type Year        = Integer

data Month = January | February | March | April | May | June | July
           | August | September | October | November | December
           deriving (Eq, Ord, Enum, Show)
data Birthday = Birthday Month Day
  deriving (Eq, Show)
data DatingDate = DatingDate Year Month Day
  deriving (Eq, Show)

data Record = BirthdayRecord Name Birthday
            | PhoneRecord Name PhoneNumber
            | DatingRecord DatingDate Description
            deriving (Eq, Show) 
```

以及按日期过滤这些记录的函数：

```
getAssignment :: (Year, Month, Day) -> [Record] -> [Record]
getAssignment (year, month, day) = filter matchDate
  where matchDate (BirthdayRecord _ (Birthday month day)) = True
        matchDate (DatingRecord (DatingDate year month day) _) = True
        matchDate _ = False 
```

由于错误，此定义`getAssignment`不正确：

```
warning: Defined but not used: `year' 
```

实际上，令我惊讶的是`year`，模式匹配部分`getAssignment`和`year`模式匹配部分`matchDate`并不相同。

那么，`year`变量的范围界限在哪里开始和结束呢？它发生是因为`where`部分？

顺便说一句，这个错误可以通过一些冗余的大量使用`(year, month, day)`变量来避免。

```
getAssignment' :: (Year, Month, Day) -> [Record] -> [Record]
getAssignment' date = filter (matchDate date)
  where matchDate (_, m, d) (BirthdayRecord _ (Birthday month day)) =
          month == m && day == d
        matchDate (y, m, d) (DatingRecord (DatingDate year month day) _) =
          year == y && month == m && day == d
        matchDate _ _ = False 
```

怎么可能改写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:53:00.690

范围是整个表达式（包括 where 子句中的定义），除了模式中的变量总是定义一个新的变量绑定。

您应该在内部绑定中使用不同的变量名，而不是重用相同的名称。

```
getAssignment :: (Year, Month, Day) -> [Record] -> [Record]
getAssignment (year, month, day) = filter matchDate
  where matchDate (BirthdayRecord _ (Birthday month' day'))
           = month == month' && day == day'
        matchDate (DatingRecord (DatingDate year' month' day') _)
           = year == year' && month == month' && day == day'
        matchDate _ = False 
```

重用变量名称以便它隐藏外部范围的变量称为*遮蔽*。`-Wall`如果您使用（或`-fwarn-name-shadowing`仅启用此警告），GHC 应该在您执行此操作时警告您。

**编辑：**对于您的特定功能，这可能是一种更清晰的编写方式：

```
getAssignment :: (Year, Month, Day) -> [Record] -> [Record]
getAssignment (year, month, day) = filter matchDate
  where matchDate (BirthdayRecord _ birthday) = birthday == Birthday month day
        matchDate (DatingRecord date _)       = date == DatingDate year month day
        matchDate _                           = False 
```

但是如果你想使用它，你不能避免给模式的一部分命名，即使只是为了将它与其他东西进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:21:09.630

模式匹配具有以下形式：构造函数 binding1 binding2 ... 其中绑定仅（并且仅！）允许命名值的一部分以供使用是右手边。这就是你在左侧计算数值时所能做的。在您的第一个示例中，您似乎希望通过在绑定中引入绑定名称来限制匹配，但这不会起作用。看守卫你想要什么。

# css - 如何使用 Modernizr 类？

> ID：10057660
> 
> 赞同：3
> 
> 时间：2012-04-07T19:33:02.447
> 
> 标签：css, cross-browser, modernizr

我是modernizr的新手。我阅读了一些关于modernizr 的文档，我想设置`border: none`浏览器是否不支持 CSS3 `box-sizing: border-box`。我试过了：

```
li { border-right: 1px solid #eee }
.css-boxsizing li { border: none } 
```

但它没有成功。任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:41:28.253

在 Modernizr 中，支持的特性作为类名添加到根元素中。在[http://modernizr.github.com/Modernizr/test/](http://modernizr.github.com/Modernizr/test/)检查类列表后，我发现正确的类名是**`boxsizing`**：

```
.boxsizing li { border: none } 
```

在[默认构建](https://github.com/Modernizr/Modernizr/blob/master/modernizr.js)中，`boxsizing`似乎没有添加该类。这可以使用手动[添加](https://raw.github.com/Modernizr/Modernizr/master/feature-detects/css-boxsizing.js)[`Modernizr.addTest`](http://modernizr.com/docs/#addtest)：

```
// The first argument is the class name
Modernizr.addTest("boxsizing", function() {
    return Modernizr.testAllProps("boxSizing") && (document.documentMode === undefined || document.documentMode > 7);
});​​​​​​ 
```

## 演示：http: [//jsfiddle.net/eGjwZ/](http://jsfiddle.net/eGjwZ/)

# c# - 需要将 varchar 转换为数字并获取 datagridview 当前单元格值

> ID：10057661
> 
> 赞同：0
> 
> 时间：2012-04-07T19:33:12.087
> 
> 标签：c#

我有个问题。我的数据库中有表'USER'（ID[varchar] and PK NOT AI, name[varchar], surname[varchar]）在我的c#代码中我有一个datagridview。我显示我的表“用户”中的所有数据。

例如：

```
1234 - John - Smith
1347 - Jack - Russel 
```

在我需要单击网格单元格后，所选数据必须显示在文本框中。例如，我单击 1234 单元格，然后在 textBox1 中显示“姓名”，在 textBox2 -“姓氏”中。它通过ID制作。

我的代码是：

```
connecClass connStr = new connectClass();
DataGridViewRow currentrow = dataGridView1.CurrentRow;
string currStr = currentrow .Cells[0].Value.ToString();
DataTable tableData = connStr.query("SELECT * FROM USER WHERE ID=" +
                                    currentrow); 
```

我得到一个错误：将类型数据varchar转换为数字时出错我尝试了另一种方法后，将.Cells [0]替换为.Cells [“ID”]，但得到一个错误：找不到列ID。

也许你可以帮助我或其他一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:17:08.947

你说列 ID 是 type `varchar`。也许尝试以下方法：

```
DataTable tableData = connStr.query("SELECT * FROM USER WHERE ID='" +
                                    currStr + "'"); 
```

换句话说，将参数放在`currStr`单引号 (') 之间。

# java - 来自 Java Bean 字段的对象数组

> ID：10057666
> 
> 赞同：1
> 
> 时间：2012-04-07T19:33:38.860
> 
> 标签：java, hibernate, javabeans, tablemodel

有没有办法获取 Java Bean 字段的 Object 数组？我有一些代表数据库表（休眠）的bean类，我需要从中检索jtable模型的对象数组，但似乎唯一的方法是为每个类的每个字段调用getXXX方法 - 很多要做的工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T20:03:38.747

如果您想要一种从 bean 中提取值的通用方法，您应该查看自省（包“java.lang.reflect”）。

这是一个基本示例：

```
Field[] fields = ABeanClass.getDeclaredFields();

Object[] values = new Object[fields.length];

int i = 0;

for (Field field : fields) {
    values[i] = field.get(beanInstance);
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:24:54.447

我这样做的方法是使用“控制器”类来处理模型和数据库之间的所有通信。

您制作“对象”列表，例如 private List myList = null; 现在，在控制器类中编写一个通用方法。说 getList ，它返回列表。您将相关类传递给该方法，它使用休眠会话返回您的列表。在你的 bean 中，这样做

```
myList = myController.getList(YourBean.class); 
```

这应该是您的 getlist 方法。

```
public List getList(Class c) throws BaseExceptionHandler {
        Session session = null;
        Transaction tx = null;
        String query = null;
        List list = null;
        try {
            query = getStringQuery(c);
            if (query != null) {
                session = sessFactory.openSession();
                tx = session.beginTransaction();
                list = (List) session.createQuery(query).list();
                tx.commit();
            }
        } finally {
            if (session != null) {
                session.close();
            }

        }
        return list;
    } 
```

干杯:)

# sql - 如果存在行则返回 id，否则为 INSERT

> ID：10057668
> 
> 赞同：11
> 
> 时间：2012-04-07T19:33:52.863
> 
> 标签：sql, node.js, postgresql, sql-insert

我正在 node.js 中编写一个函数来查询 PostgreSQL 表。
如果该行存在，我想从该行返回 id 列。
如果它不存在，我想插入它并返回 id ( `insert into ... returning id`)。

我一直在尝试`case`和`if else`声明的变体，但似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T20:53:00.773

单个 SQL 语句中的解决方案。不过需要 PostgreSQL **8.4**或更高版本。
考虑以下演示：

测试设置：

```
CREATE TEMP TABLE tbl (
  id  serial PRIMARY KEY
 ,txt text   UNIQUE   -- obviously there is unique column (or set of columns)
);

INSERT INTO tbl(txt) VALUES ('one'), ('two'); 
```

插入/选择命令：

```
WITH v AS (SELECT 'three'::text AS txt)
    ,s AS (SELECT id FROM tbl JOIN v USING (txt))
    ,i AS (
       INSERT INTO tbl (txt)
       SELECT txt
       FROM   v
       WHERE  NOT EXISTS (SELECT * FROM s)
       RETURNING id
       )
SELECT id, 'i'::text AS src FROM i
UNION  ALL
SELECT id, 's' FROM s; 
```

*   第一个**CTE v**不是绝对必要的，但可以实现您只需输入一次**值**。

*   如果“行”存在，则第二个**CTE 选择**`id`来自。`tbl`

*   第三个 **CTE i 将**“行”插入`tbl`当（且仅当）它不存在时，返回`id`。

*   最终`SELECT`返回`id`. 我添加了一个`src`指示“源”的列 - “行”是否预先存在并且`id`来自 SELECT，或者“行”是新的，`id`.

*   此版本应该尽可能快，因为它不需要额外的 SELECT from`tbl`并使用 CTE。

为了确保在多用户环境中避免可能出现的竞争条件：对于在 Postgres **9.5**或更高版本
中使用新的 UPSERT 的更新技术：

 ***   [函数中的 SELECT 或 INSERT 是否容易出现竞争条件？](https://stackoverflow.com/questions/15939902/is-select-or-insert-in-a-function-prone-to-race-conditions/15950324#15950324)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-07T20:28:05.360

我建议在数据库端进行检查，然后将 id 返回给 nodejs。

例子：

```
CREATE OR REPLACE FUNCTION foo(p_param1 tableFoo.attr1%TYPE, p_param2 tableFoo.attr1%TYPE) RETURNS tableFoo.id%TYPE AS $$
  DECLARE
  v_id tableFoo.pk%TYPE;
  BEGIN
    SELECT id
    INTO v_id
    FROM tableFoo
    WHERE attr1 = p_param1
    AND attr2 = p_param2;

    IF v_id IS NULL THEN
      INSERT INTO tableFoo(id, attr1, attr2) VALUES (DEFAULT, p_param1, p_param2)
      RETURNING id INTO v_id;
    END IF;

    RETURN v_id:

  END;
$$ LANGUAGE plpgsql; 
```

而不是在 Node.js 端（我在这个例子中使用 node-postgres）：

```
var pg = require('pg');
pg.connect('someConnectionString', function(connErr, client){

  //do some errorchecking here

  client.query('SELECT id FROM foo($1, $2);', ['foo', 'bar'], function(queryErr, result){

    //errorchecking

    var id = result.rows[0].id;      

  };

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T21:31:12.117

Something like this, if you are on PostgreSQL 9.1

```
with test_insert as (
   insert into foo (id, col1, col2)
   select 42, 'Foo', 'Bar'
   where not exists (select * from foo where id = 42)
   returning foo.id, foo.col1, foo.col2
)
select id, col1, col2
from test_insert
union 
select id, col1, col2
from foo
where id = 42; 
```

It's a bit longish and you need to repeat the id to test for several times, but I can't think of a different solution that involves a single SQL statement.

If a row with `id=42` exists, the writeable CTE will not insert anything and thus the existing row will be returned by the second union part.

When testing this I actually thought the new row would be returned twice (therefor a `union` not a `union all`) but it turns out that the result of the second select statement is actually evaluated before the whole statement is run and it does not see the newly inserted row. So in case a new row is inserted, it will be taken from the "returning" part.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T20:29:46.287

```
create table t (
    id serial primary key,
    a integer
)
;

insert into t (a)
select 2
from (
    select count(*) as s
    from t
    where a = 2
    ) s
where s.s = 0
;
select id
from t
where a = 2
; 
```**

# php - 在 Ubuntu 上启动简单的 php 守护进程

> ID：10057669
> 
> 赞同：1
> 
> 时间：2012-04-07T19:33:56.183
> 
> 标签：php, ubuntu, daemon

我想在没有 fork 的 Ubuntu 上启动简单的 php 守护进程。

源 f.php：

```
#!/usr/bin/php
<?php
file_put_contents('/var/www/3.txt',date("H:i:s", time()) . "\n", FILE_APPEND);
while (true) {
    file_put_contents('/var/www/3.txt',date("H:i:s", time()) . "\n", FILE_APPEND);
    sleep(1);
} 
```

发射：

```
root@ubuntu:/var/www# ./f.php &
[3] 10323 
```

在 FreeBSD 上，这在 Ubuntu 文件 3.txt 上运行良好，没有更新 :( 权限正常 (777)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:47:56.663

你能检查你指向的 PHP 二进制文件的路径是否正确，我的意思是 PHP 确实安装在 /usr/bin/php 中，你可以使用以下命令检查

```
which php 
```

您也可以尝试手动运行它，而不是通过以下命令将其作为可执行文件运行

```
php -f f.php & 
```

并检查您的 php 文件是否在 apache 日志中出现任何错误，您可以在 apache 日志中找到`/var/log/apache2/error.log`

并确保`php5-cli`通过执行以下命令安装包

```
apt-get install php5-cli 
```

**更新：**

根据[http://www.freelance-it-consultant.com/blog/php-cli-script-running-background-ubuntu](http://www.freelance-it-consultant.com/blog/php-cli-script-running-background-ubuntu)，当 php 通过 CLI 运行时，ubuntu 中存在一些错误，它需要用户的一些输入，所以如果对你有用，你可以试试这个方法吗？

```
php -q f.php < /dev/null & 
```

# php - PHP“foreach”实际上是如何工作的？

> ID：10057671
> 
> 赞同：2186
> 
> 时间：2012-04-07T19:33:57.893
> 
> 标签：php, loops, foreach, iteration, php-internals

让我先说我知道`foreach`它是什么、做什么以及如何使用它。这个问题涉及它在引擎盖下是如何工作的，我不想要任何关于“这就是你如何循环数组`foreach`”的答案。

* * *

很长一段时间以来，我都认为这适用`foreach`于数组本身。*然后我发现了很多关于它与数组的副本*一起工作的事实，并且我认为这就是故事的结尾。但我最近开始讨论这个问题，经过一些实验后发现这实际上并不是 100% 正确的。

让我表明我的意思。对于以下测试用例，我们将使用以下数组：

```
$array = array(1, 2, 3, 4, 5); 
```

[测试用例 1](http://codepad.org/7DIeObk9)：

```
foreach ($array as $item) {
  echo "$item\n";
  $array[] = $item;
}
print_r($array);

/* Output in loop:    1 2 3 4 5
   $array after loop: 1 2 3 4 5 1 2 3 4 5 */ 
```

这清楚地表明我们没有直接使用源数组 - 否则循环将永远继续，因为我们在循环期间不断地将项目推入数组。但只是为了确保是这种情况：

[测试用例 2](http://codepad.org/nirz6Ufh)：

```
foreach ($array as $key => $item) {
  $array[$key + 1] = $item + 2;
  echo "$item\n";
}

print_r($array);

/* Output in loop:    1 2 3 4 5
   $array after loop: 1 3 4 5 6 7 */ 
```

这支持了我们最初的结论，我们在循环期间使用源数组的副本，否则我们将在循环期间看到修改后的值。*但...*

如果我们查看[手册](http://php.net/manual/en/control-structures.foreach.php)，我们会发现以下语句：

> 当 foreach 首次开始执行时，内部数组指针会自动重置为数组的第一个元素。

对...这似乎表明`foreach`依赖于源数组的数组指针。但是我们刚刚证明了我们*没有使用源数组*，对吗？好吧，不完全是。

[测试用例 3](http://codepad.org/6n20ooMy)：

```
// Move the array pointer on one to make sure it doesn't affect the loop
var_dump(each($array));

foreach ($array as $item) {
  echo "$item\n";
}

var_dump(each($array));

/* Output
  array(4) {
    [1]=>
    int(1)
    ["value"]=>
    int(1)
    [0]=>
    int(0)
    ["key"]=>
    int(0)
  }
  1
  2
  3
  4
  5
  bool(false)
*/ 
```

因此，尽管我们不直接使用源数组，但我们直接使用源数组指针 - 指针位于循环末尾的数组末尾这一事实表明了这一点。除非这不可能是真的——如果是这样，那么[测试用例 1](http://codepad.org/7DIeObk9)将永远循环。

PHP手册还指出：

> 由于 foreach 依赖于内部数组指针，因此在循环内更改它可能会导致意外行为。

好吧，让我们找出“意外行为”是什么（从技术上讲，任何行为都是意外的，因为我不再知道会发生什么）。

[测试用例 4](http://codepad.org/JJp79xSd)：

```
foreach ($array as $key => $item) {
  echo "$item\n";
  each($array);
}

/* Output: 1 2 3 4 5 */ 
```

[测试用例 5](http://codepad.org/IfwJyTCL)：

```
foreach ($array as $key => $item) {
  echo "$item\n";
  reset($array);
}

/* Output: 1 2 3 4 5 */ 
```

...没有什么出乎意料的，实际上它似乎支持“源副本”理论。

* * *

**问题**

这里发生了什么？我的 C-fu 不足以让我仅仅通过查看 PHP 源代码就能得出正确的结论，如果有人能为我翻译成英文，我将不胜感激。

在我看来，它`foreach`适用于数组的*副本*，但在循环之后将源数组的数组指针设置为数组的末尾。

*   这是正确的吗？
*   如果不是，它到底在做什么？
*   在任何情况下使用在 a 期间调整数组指针（等）的函数`each()`可能`reset()`会`foreach`影响循环的结果？

* * *

## 回答 #1

> 赞同：1773
> 
> 时间：2013-02-13T13:21:40.760

`foreach`支持对三种不同值的迭代：

*   数组
*   普通物体
*   [`Traversable`](http://php.net/Traversable)对象

在下文中，我将尝试准确解释迭代在不同情况下的工作原理。到目前为止，最简单的情况是`Traversable`对象，因为这些`foreach`基本上只是这些代码的语法糖：

```
foreach ($it as $k => $v) { /* ... */ }

/* translates to: */

if ($it instanceof IteratorAggregate) {
    $it = $it->getIterator();
}
for ($it->rewind(); $it->valid(); $it->next()) {
    $v = $it->current();
    $k = $it->key();
    /* ... */
} 
```

`Iterator`对于内部类，通过使用基本上只是在 C 级别上镜像接口的内部 API 来避免实际的方法调用。

数组和普通对象的迭代要复杂得多。首先，应该注意的是，在 PHP 中，“数组”实际上是有序字典，它们将按照这个顺序进行遍历（只要你不使用类似的东西，它就匹配插入顺序`sort`）。这与按键的自然顺序（其他语言中的列表通常如何工作）或根本没有定义的顺序（其他语言中的字典通常如何工作）进行迭代相反。

这同样适用于对象，因为对象属性可以看作是另一个（有序）字典，将属性名称映射到它们的值，以及一些可见性处理。在大多数情况下，对象属性实际上并没有以这种相当低效的方式存储。但是，如果您开始迭代一个对象，通常使用的打包表示将被转换为一个真正的字典。在这一点上，普通对象的迭代变得非常类似于数组的迭代（这就是为什么我在这里不多讨论普通对象迭代的原因）。

到现在为止还挺好。遍历字典不会太难，对吧？当您意识到数组/对象可以在迭代期间发生变化时，问题就开始了。发生这种情况的方式有多种：

*   如果您通过引用进行迭代，则使用`foreach ($arr as &$v)`then`$arr`将变为引用，您可以在迭代期间更改它。
*   在 PHP 5 中，即使按值进行迭代也是如此，但该数组事先是一个引用：`$ref =& $arr; foreach ($ref as $v)`
*   对象具有通过句柄传递的语义，这对于大多数实际目的而言意味着它们的行为类似于引用。所以对象总是可以在迭代过程中改变。

在迭代期间允许修改的问题是您当前所在的元素被删除的情况。假设您使用指针来跟踪您当前所在的数组元素。如果这个元素现在被释放，你会留下一个悬空指针（通常会导致段错误）。

有不同的方法来解决这个问题。PHP 5 和 PHP 7 在这方面有很大的不同，我将在下面描述这两种行为。总结是 PHP 5 的方法相当愚蠢并导致各种奇怪的边缘情况问题，而 PHP 7 更多涉及的方法导致更可预测和一致的行为。

作为最后的准备，应该注意 PHP 使用引用计数和写时复制来管理内存。这意味着如果你“复制”一个值，你实际上只是重用旧值并增加它的引用计数（refcount）。只有在您执行某种修改后，才会完成真正的副本（称为“复制”）。有关此主题的更广泛介绍，请参阅[您被骗了。](http://blog.golemon.com/2007/01/youre-being-lied-to.html)

## PHP 5

### 内部数组指针和HashPointer

PHP 5 中的数组有一个专用的“内部数组指针”（IAP），它正确地支持修改：每当删除一个元素时，都会检查 IAP 是否指向该元素。如果是，则改为前进到下一个元素。

虽然`foreach`确实使用了 IAP，但还有一个复杂的问题：只有一个 IAP，但一个数组可以是多个`foreach`循环的一部分：

```
// Using by-ref iteration here to make sure that it's really
// the same array in both loops and not a copy
foreach ($arr as &$v1) {
    foreach ($arr as &$v) {
        // ...
    }
} 
```

要支持只有一个内部数组指针的两个同时循环，`foreach`请执行以下恶作剧：在执行循环体之前，`foreach`将一个指向当前元素的指针及其哈希备份到 per-foreach`HashPointer`中。循环体运行后，如果该元素仍然存在，IAP 将被设置回该元素。但是，如果该元素已被删除，我们将只使用 IAP 当前所在的任何位置。这个方案主要是有点效果，但是你可以摆脱很多奇怪的行为，我将在下面展示其中的一些。

### 数组复制

IAP 是数组的一个可见特征（通过`current`函数族公开），因为对 IAP 的更改算作写时复制语义下的修改。不幸的是，这意味着`foreach`在许多情况下被迫复制它正在迭代的数组。具体条件如下：

1.  该数组不是参考 (is_ref=0)。如果它是一个引用，那么对它的更改*应该*传播，所以它不应该被复制。
2.  数组的 refcount>1。如果`refcount`为 1，则数组不共享，我们可以直接修改它。

如果数组不重复（is_ref=0, refcount=1），那么只有它`refcount`会增加（*）。此外，如果`foreach`使用引用，则（可能重复的）数组将被转换为引用。

将此代码视为发生重复的示例：

```
function iterate($arr) {
    foreach ($arr as $v) {}
}

$outerArr = [0, 1, 2, 3, 4];
iterate($outerArr); 
```

在这里，`$arr`将被复制以防止 IAP 更改`$arr`泄漏到`$outerArr`. 根据上述条件，数组不是引用（is_ref=0），在两个地方使用（refcount=2）。这个要求是不幸的，并且是次优实现的产物（这里不需要在迭代期间进行修改，所以我们一开始就不需要使用 IAP）。

(*) 增加`refcount`here 听起来无害，但违反了写时复制 (COW) 语义：这意味着我们要修改 refcount=2 数组的 IAP，而 COW 规定只能在 refcount= 上执行修改1 值。这种违规会导致用户可见的行为更改（而 COW 通常是透明的），因为迭代数组上的 IAP 更改将是可观察的——但仅在数组上的第一次非 IAP 修改之前。相反，三个“有效”选项将是 a) 始终重复，b) 不递增`refcount`，因此允许在循环中任意修改迭代数组或 c) 根本不使用 IAP（PHP 7 解决方案）。

### 职位晋升顺序

为了正确理解下面的代码示例，您必须了解最后一个实现细节。循环遍历某些数据结构的“正常”方式在伪代码中看起来像这样：

```
reset(arr);
while (get_current_data(arr, &data) == SUCCESS) {
    code();
    move_forward(arr);
} 
```

然而`foreach`，作为一个相当特殊的雪花，选择做的事情略有不同：

```
reset(arr);
while (get_current_data(arr, &data) == SUCCESS) {
    move_forward(arr);
    code();
} 
```

即，数组指针在循环体运行*之前*已经向前移动。这意味着当循环体在 element 上工作时`$i`，IAP 已经在 element 上`$i+1`。这就是为什么在迭代期间显示修改的代码示例将始终`unset`是*下一个*元素，而不是当前元素。

### 示例：您的测试用例

上面描述的三个方面应该让您对实现的特性有一个大致完整的印象，`foreach`我们可以继续讨论一些示例。

此时，您的测试用例的行为很容易解释：

*   在测试用例 1 和 2`$array`中以 refcount=1 开始，因此它不会被 复制`foreach`：只有`refcount`增加。当循环体随后修改数组（此时 refcount=2）时，将在该点发生重复。Foreach 将继续处理未修改的`$array`.

*   在测试用例 3 中，数组再次没有重复，因此`foreach`将修改`$array`变量的 IAP。在迭代结束时，IAP 为 NULL（表示迭代已完成），`each`通过返回 表示`false`。

*   在测试用例 4 和 5 中，`each`和`reset`都是引用函数。当它被传递给他们时，它有`$array`一个`refcount=2`，所以它必须被复制。因此`foreach`将再次在一个单独的阵列上工作。

### 示例：`current`in foreach的效果

显示各种重复行为的一个好方法是观察 循环`current()`内函数的行为。`foreach`考虑这个例子：

```
foreach ($array as $val) {
    var_dump(current($array));
}
/* Output: 2 2 2 2 2 */ 
```

在这里你应该知道这`current()`是一个 by-ref 函数（实际上是：prefer-ref），即使它不修改数组。它必须是为了与所有其他功能（例如`next`都是 by-ref）配合得很好。引用传递意味着数组必须分开，因此`$array`会`foreach-array`有所不同。上面也提到了你得到`2`而不是的原因：在运行用户代码*之前*推进数组指针，而不是之后。因此，即使代码位于第一个元素，也已经将指针推进到第二个元素。`1``foreach`*`foreach`*

 *现在让我们尝试一个小的修改：

```
$ref = &$array;
foreach ($array as $val) {
    var_dump(current($array));
}
/* Output: 2 3 4 5 false */ 
```

这里我们有 is_ref=1 的情况，所以数组没有被复制（就像上面一样）。`current()`但是现在它是一个引用，当传递给 by-ref函数时，不再需要复制数组。因此`current()`并`foreach`在同一个数组上工作。但是，由于`foreach`指针前进的方式，您仍然会看到非一行为。

在进行 by-ref 迭代时，您会得到相同的行为：

```
foreach ($array as &$val) {
    var_dump(current($array));
}
/* Output: 2 3 4 5 false */ 
```

这里重要的部分是foreach`$array`在引用迭代的时候会做一个is_ref=1，所以基本上你的情况和上面一样。

另一个小的变化，这次我们将数组分配给另一个变量：

```
$foo = $array;
foreach ($array as $val) {
    var_dump(current($array));
}
/* Output: 1 1 1 1 1 */ 
```

当循环开始时，这里的 refcount`$array`为 2，因此我们实际上必须预先进行复制。因此`$array`，foreach 使用的数组将从一开始就完全分开。这就是为什么您可以在循环之前的任何位置获得 IAP 的位置（在本例中，它位于第一个位置）。

### 示例：迭代期间的修改

尝试考虑迭代期间的修改是我们所有 foreach 问题的根源，因此它可以考虑这种情况下的一些示例。

考虑在同一个数组上的这些嵌套循环（其中使用 by-ref 迭代来确保它确实是同一个）：

```
foreach ($array as &$v1) {
    foreach ($array as &$v2) {
        if ($v1 == 1 && $v2 == 1) {
            unset($array[1]);
        }
        echo "($v1, $v2)\n";
    }
}

// Output: (1, 1) (1, 3) (1, 4) (1, 5) 
```

这里的预期部分是`(1, 2)`输出中缺少的部分，因为元素`1`已被删除。可能出乎意料的是外循环在第一个元素之后停止。这是为什么？

这背后的原因是上面描述的嵌套循环黑客：在循环体运行之前，当前 IAP 位置和哈希被备份到一个`HashPointer`. 在循环体之后，它将被恢复，但前提是元素仍然存在，否则将使用当前 IAP 位置（无论它可能是什么）。在上面的示例中，情况正是如此：外循环的当前元素已被删除，因此它将使用已被内循环标记为已完成的 IAP！

备份+恢复机制的另一个后果`HashPointer`是通过`reset()`etc. 对 IAP 的更改通常不会影响`foreach`. 例如，以下代码的执行就像`reset()`根本不存在一样：

```
$array = [1, 2, 3, 4, 5];
foreach ($array as &$value) {
    var_dump($value);
    reset($array);
}
// output: 1, 2, 3, 4, 5 
```

原因是，虽然`reset()`临时修改了IAP，但是会在循环体之后恢复到当前的foreach元素。要强制`reset()`对循环产生影响，您必须另外删除当前元素，以便备份/恢复机制失败：

```
$array = [1, 2, 3, 4, 5];
$ref =& $array;
foreach ($array as $value) {
    var_dump($value);
    unset($array[1]);
    reset($array);
}
// output: 1, 1, 3, 4, 5 
```

但是，这些例子仍然是理智的。如果您记得`HashPointer`恢复使用指向元素的指针及其哈希来确定它是否仍然存在，那么真正的乐趣就开始了。但是：哈希有冲突，指针可以重用！这意味着，通过仔细选择数组键，我们可以`foreach`相信已删除的元素仍然存在，因此它将直接跳转到它。一个例子：

```
$array = ['EzEz' => 1, 'EzFY' => 2, 'FYEz' => 3];
$ref =& $array;
foreach ($array as $value) {
    unset($array['EzFY']);
    $array['FYFY'] = 4;
    reset($array);
    var_dump($value);
}
// output: 1, 4 
```

在这里，我们通常应该`1, 1, 3, 4`根据前面的规则期望输出。发生的情况是它`'FYFY'`与删除的元素具有相同的哈希值`'EzFY'`，而分配器恰好重用相同的内存位置来存储元素。所以 foreach 最终直接跳转到新插入的元素，从而缩短了循环。

### 在循环期间替换被迭代的实体

我想提到的最后一个奇怪的情况是，PHP 允许您在循环期间替换迭代实体。因此，您可以开始迭代一个数组，然后在中途将其替换为另一个数组。或者开始迭代一个数组，然后用一个对象替换它：

```
$arr = [1, 2, 3, 4, 5];
$obj = (object) [6, 7, 8, 9, 10];

$ref =& $arr;
foreach ($ref as $val) {
    echo "$val\n";
    if ($val == 3) {
        $ref = $obj;
    }
}
/* Output: 1 2 3 6 7 8 9 10 */ 
```

正如您在这种情况下所看到的那样，一旦发生替换，PHP 就会从头开始迭代另一个实体。

## PHP 7

### 哈希表迭代器

如果您还记得，数组迭代的主要问题是如何处理迭代中元素的删除。PHP 5 为此目的使用了一个内部数组指针 (IAP)，这在某种程度上不是最理想的，因为必须拉伸一个数组指针以支持多个同时的 foreach 循环*以及*与之交互`reset()`等。

PHP 7 使用了不同的方法，即它支持创建任意数量的外部安全哈希表迭代器。这些迭代器必须在数组中注册，从那时起它们具有与 IAP 相同的语义：如果删除了数组元素，则指向该元素的所有哈希表迭代器将前进到下一个元素。

这意味着`foreach`将不再使用IAP **。**`foreach`循环绝对不会影响 etc. 的结果，并且`current()`它自己的行为永远不会受到 `reset()`etc 等函数的影响。

### 数组复制

PHP 5 和 PHP 7 之间的另一个重要变化与数组重复有关。现在不再使用 IAP，`refcount`在所有情况下，按值数组迭代只会进行增量（而不是复制数组）。如果在`foreach`循环期间修改了数组，则此时将发生重复（根据写时复制）`foreach`并将继续在旧数组上工作。

在大多数情况下，这种变化是透明的，除了更好的性能没有其他效果。但是，有一种情况会导致不同的行为，即数组是预先引用的情况：

```
$array = [1, 2, 3, 4, 5];
$ref = &$array;
foreach ($array as $val) {
    var_dump($val);
    $array[2] = 0;
}
/* Old output: 1, 2, 0, 4, 5 */
/* New output: 1, 2, 3, 4, 5 */ 
```

以前引用数组的按值迭代是特殊情况。在这种情况下，没有重复发生，因此迭代期间对数组的所有修改都将反映在循环中。在 PHP 7 中，这种特殊情况消失了：数组的按值迭代将**始终**对原始元素进行处理，而忽略循环期间的任何修改。

当然，这不适用于按引用迭代。如果您通过引用进行迭代，所有修改都将反映在循环中。有趣的是，普通对象的按值迭代也是如此：

```
$obj = new stdClass;
$obj->foo = 1;
$obj->bar = 2;
foreach ($obj as $val) {
    var_dump($val);
    $obj->bar = 42;
}
/* Old and new output: 1, 42 */ 
```

这反映了对象的按句柄语义（即，即使在按值上下文中，它们的行为也类似于引用）。

### 例子

让我们考虑几个示例，从您的测试用例开始：

*   测试用例 1 和 2 保留相同的输出：按值数组迭代始终对原始元素进行处理。（在这种情况下，PHP 5 和 PHP 7 之间的偶数`refcounting`和重复行为完全相同）。

*   测试用例 3 更改：`Foreach`不再使用 IAP，因此`each()`不受循环影响。它将在之前和之后具有相同的输出。

*   测试用例 4 和 5 保持不变：`each()`将`reset()`在更改 IAP 之前复制数组，同时`foreach`仍使用原始数组。（即使阵列是共享的，IAP 的变化也并不重要。）

第二组示例与`current()`不同`reference/refcounting`配置下的行为有关。这不再有意义，因为`current()`它完全不受循环的影响，因此它的返回值始终保持不变。

但是，在考虑迭代期间的修改时，我们会得到一些有趣的变化。我希望你会发现新的行为更理智。第一个例子：

```
$array = [1, 2, 3, 4, 5];
foreach ($array as &$v1) {
    foreach ($array as &$v2) {
        if ($v1 == 1 && $v2 == 1) {
            unset($array[1]);
        }
        echo "($v1, $v2)\n";
    }
}

// Old output: (1, 1) (1, 3) (1, 4) (1, 5)
// New output: (1, 1) (1, 3) (1, 4) (1, 5)
//             (3, 1) (3, 3) (3, 4) (3, 5)
//             (4, 1) (4, 3) (4, 4) (4, 5)
//             (5, 1) (5, 3) (5, 4) (5, 5) 
```

如您所见，外循环在第一次迭代后不再中止。原因是两个循环现在都有完全独立的哈希表迭代器，两个循环不再通过共享 IAP 交叉污染。

现在修复的另一个奇怪的边缘情况是当您删除和添加碰巧具有相同哈希的元素时得到的奇怪效果：

```
$array = ['EzEz' => 1, 'EzFY' => 2, 'FYEz' => 3];
foreach ($array as &$value) {
    unset($array['EzFY']);
    $array['FYFY'] = 4;
    var_dump($value);
}
// Old output: 1, 4
// New output: 1, 3, 4 
```

以前 HashPointer 恢复机制会直接跳转到新元素，因为它“看起来”与被移除的元素相同（由于哈希和指针的冲突）。由于我们不再依赖元素哈希来处理任何事情，这不再是一个问题。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2012-04-07T20:43:49.463

在示例 3 中，您不修改数组。在所有其他示例中，您修改内容或内部数组指针。[由于赋值运算符的语义，这对于PHP](http://en.wikipedia.org/wiki/PHP)数组很重要。

PHP 中数组的赋值运算符更像是一个惰性克隆。与大多数语言不同，将一个变量分配给另一个包含数组的变量将克隆该数组。但是，除非需要，否则不会进行实际克隆。这意味着只有在修改任何一个变量时才会进行克隆（写时复制）。

这是一个例子：

```
$a = array(1,2,3);
$b = $a;  // This is lazy cloning of $a. For the time
          // being $a and $b point to the same internal
          // data structure.

$a[] = 3; // Here $a changes, which triggers the actual
          // cloning. From now on, $a and $b are two
          // different data structures. The same would
          // happen if there were a change in $b. 
```

回到你的测试用例，你可以很容易地想象它`foreach`创建了某种带有数组引用的迭代器。`$b`此引用的工作方式与我的示例中的变量完全相同。但是，迭代器和引用仅在循环期间有效，然后它们都被丢弃。现在您可以看到，在除 3 之外的所有情况下，数组都在循环期间被修改，而这个额外的引用仍然存在。这会触发一个克隆，这就解释了这里发生了什么！

这是一篇关于这种写时复制行为的另一个副作用的优秀文章：[PHP 三元运算符：快还是不快？](http://fabien.potencier.org/article/48/the-php-ternary-operator-fast-or-not)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2012-04-07T21:03:00.483

使用时需要注意的几点`foreach()`：

a)在原始数组`foreach`的**预期副本上工作。**这意味着`foreach()`将拥有 SHARED 数据存储，直到或除非没有为[每个 Notes/User comments](http://php.net/manual/en/control-structures.foreach.php)`prospected copy`创建一个。

b) 什么触发了**预期副本**？根据 的策略创建预期副本`copy-on-write`，即，每当传递给的数组`foreach()`发生更改时，都会创建原始数组的克隆。

c) 原始数组和`foreach()`迭代器将有`DISTINCT SENTINEL VARIABLES`，即一个用于原始数组，另一个用于`foreach`；请参阅下面的测试代码。[SPL](http://php.net/manual/en/book.spl.php)、[迭代器](http://www.php.net/manual/en/spl.iterators.php)和[数组迭代器](http://www.php.net/manual/en/class.arrayiterator.php)。

堆栈溢出问题*[如何确保在 PHP 的“foreach”循环中重置该值？](https://stackoverflow.com/questions/2728709)*解决您问题的案例（3,4,5）。

以下示例显示 each() 和 reset() 不会影响迭代器的`SENTINEL`变量 。`(for example, the current index variable)``foreach()`

```
$array = array(1, 2, 3, 4, 5);

list($key2, $val2) = each($array);
echo "each() Original (outside): $key2 => $val2<br/>";

foreach($array as $key => $val){
    echo "foreach: $key => $val<br/>";

    list($key2,$val2) = each($array);
    echo "each() Original(inside): $key2 => $val2<br/>";

    echo "--------Iteration--------<br/>";
    if ($key == 3){
        echo "Resetting original array pointer<br/>";
        reset($array);
    }
}

list($key2, $val2) = each($array);
echo "each() Original (outside): $key2 => $val2<br/>"; 
```

**输出：**

```
each() Original (outside): 0 => 1
foreach: 0 => 1
each() Original(inside): 1 => 2
--------Iteration--------
foreach: 1 => 2
each() Original(inside): 2 => 3
--------Iteration--------
foreach: 2 => 3
each() Original(inside): 3 => 4
--------Iteration--------
foreach: 3 => 4
each() Original(inside): 4 => 5
--------Iteration--------
Resetting original array pointer
foreach: 4 => 5
each() Original(inside): 0=>1
--------Iteration--------
each() Original (outside): 1 => 2 
```

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2014-04-15T08:46:20.153

**PHP 7 的注意事项**

要更新这个答案，因为它已经获得了一些人气：这个答案从 PHP 7 起不再适用。如“[向后不兼容的更改](https://secure.php.net/manual/en/migration70.incompatible.php)”中所述，在 PHP 7 foreach 中适用于数组的副本，因此数组本身的任何更改不会反映在 foreach 循环中。更多详情见链接。

**[解释（来自php.net](http://www.php.net/manual/en/control-structures.foreach.php)的引用）：**

> 第一种形式循环遍历由 array_expression 给出的数组。在每次迭代中，当前元素的值被分配给 $value 并且内部数组指针前移一个（因此在下一次迭代中，您将查看下一个元素）。

因此，在您的第一个示例中，数组中只有一个元素，并且当指针移动时，下一个元素不存在，因此在添加新元素后 foreach 结束，因为它已经“决定”将其作为最后一个元素。

在您的第二个示例中，您从两个元素开始，并且 foreach 循环不在最后一个元素处，因此它在下一次迭代时评估数组，从而意识到数组中有新元素。

我相信这是文档中解释的**每次迭代**部分的全部结果，这可能意味着`foreach`在调用`{}`.

**测试用例**

如果你运行这个：

```
<?
    $array = Array(
        'foo' => 1,
        'bar' => 2
    );
    foreach($array as $k=>&$v) {
        $array['baz']=3;
        echo $v." ";
    }
    print_r($array);
?> 
```

你会得到这个输出：

```
1 2 3 Array
(
    [foo] => 1
    [bar] => 2
    [baz] => 3
) 
```

这意味着它接受了修改并通过了它，因为它是“及时”修改的。但如果你这样做：

```
<?
    $array = Array(
        'foo' => 1,
        'bar' => 2
    );
    foreach($array as $k=>&$v) {
        if ($k=='bar') {
            $array['baz']=3;
        }
        echo $v." ";
    }
    print_r($array);
?> 
```

你会得到：

```
1 2 Array
(
    [foo] => 1
    [bar] => 2
    [baz] => 3
) 
```

这意味着该数组已被修改，但是由于我们`foreach`在数组的最后一个元素处已对其进行了修改，因此它“决定”不再循环，即使我们添加了新元素，我们也“为时已晚”添加了它没有循环通过。

详细解释可以阅读[PHP 'foreach' 是如何工作的？](https://stackoverflow.com/questions/10057671/how-foreach-actually-works)这解释了这种行为背后的内部机制。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-04-15T09:32:39.960

根据 PHP 手册提供的文档。

> 在每次迭代中，当前元素的值被分配给 $v 并且内部
> 数组指针前移一个（因此在下一次迭代中，您将查看下一个元素）。

因此，根据您的第一个示例：

```
$array = ['foo'=>1];
foreach($array as $k=>&$v)
{
   $array['bar']=2;
   echo($v);
} 
```

`$array`只有单个元素，因此根据 foreach 执行，分配 1`$v`并且它没有任何其他元素可以移动指针

但在你的第二个例子中：

```
$array = ['foo'=>1, 'bar'=>2];
foreach($array as $k=>&$v)
{
   $array['baz']=3;
   echo($v);
} 
```

`$array`有两个元素，所以现在 $array 评估零索引并将指针移动一。对于循环的第一次迭代，`$array['baz']=3;`作为引用传递添加。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-04-21T08:44:53.417

很好的问题，因为许多开发人员，甚至是经验丰富的开发人员，都对 PHP 在 foreach 循环中处理数组的方式感到困惑。在标准的 foreach 循环中，PHP 制作循环中使用的数组的副本。循环结束后立即丢弃副本。这在简单的 foreach 循环的操作中是透明的。例如：

```
$set = array("apple", "banana", "coconut");
foreach ( $set AS $item ) {
    echo "{$item}\n";
} 
```

这输出：

```
apple
banana
coconut 
```

因此创建了副本，但开发人员没有注意到，因为原始数组没有在循环内或循环完成后被引用。但是，当您尝试在循环中修改项目时，您会发现它们在完成时未修改：

```
$set = array("apple", "banana", "coconut");
foreach ( $set AS $item ) {
    $item = strrev ($item);
}

print_r($set); 
```

这输出：

```
Array
(
    [0] => apple
    [1] => banana
    [2] => coconut
) 
```

与原始版本的任何更改都不会引起注意，实际上与原始版本没有任何更改，即使您明确为 $item 分配了一个值。这是因为您正在对 $item 进行操作，因为它出现在正在处理的 $set 的副本中。您可以通过引用获取 $item 来覆盖它，如下所示：

```
$set = array("apple", "banana", "coconut");
foreach ( $set AS &$item ) {
    $item = strrev($item);
}
print_r($set); 
```

这输出：

```
Array
(
    [0] => elppa
    [1] => ananab
    [2] => tunococ
) 
```

所以很明显并且可以观察到，当对 $item 进行按引用操作时，对 $item 所做的更改是针对原始 $set 的成员进行的。通过引用使用 $item 还可以防止 PHP 创建数组副本。为了测试这一点，首先我们将展示一个演示副本的快速脚本：

```
$set = array("apple", "banana", "coconut");
foreach ( $set AS $item ) {
    $set[] = ucfirst($item);
}
print_r($set); 
```

这输出：

```
Array
(
    [0] => apple
    [1] => banana
    [2] => coconut
    [3] => Apple
    [4] => Banana
    [5] => Coconut
) 
```

如示例所示，PHP 复制了 $set 并使用它来循环，但是当在循环中使用 $set 时，PHP 将变量添加到原始数组中，而不是复制的数组中。基本上，PHP 只使用复制的数组来执行循环和 $item 的赋值。正因为如此，上面的循环只执行了 3 次，每次它都会在原始 $set 的末尾追加一个值，使原始 $set 保留 6 个元素，但永远不会进入无限循环。

但是，如果我们像之前提到的那样通过引用使用 $item 会怎样？添加到上述测试的单个字符：

```
$set = array("apple", "banana", "coconut");
foreach ( $set AS &$item ) {
    $set[] = ucfirst($item);
}
print_r($set); 
```

导致无限循环。请注意，这实际上是一个无限循环，您必须自己杀死脚本或等待操作系统内存不足。我在脚本中添加了以下行，这样 PHP 会很快耗尽内存，如果您要运行这些无限循环测试，我建议您也这样做：

```
ini_set("memory_limit","1M"); 
```

因此，在前面的无限循环示例中，我们看到了编写 PHP 以创建要循环的数组副本的原因。当副本仅由循环构造本身的结构创建和使用时，数组在整个循环执行期间保持静态，因此您永远不会遇到问题。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-11-13T14:08:45.000

PHP foreach 循环可以与`Indexed arrays`,`Associative arrays`和`Object public variables`.

在 foreach 循环中，php 所做的第一件事是创建要迭代的数组的副本。PHP 然后迭代这个新`copy`的数组而不是原来的数组。这在以下示例中得到了证明：

```
<?php
$numbers = [1,2,3,4,5,6,7,8,9]; # initial values for our array
echo '<pre>', print_r($numbers, true), '</pre>', '<hr />';
foreach($numbers as $index => $number){
    $numbers[$index] = $number + 1; # this is making changes to the origial array
    echo 'Inside of the array = ', $index, ': ', $number, '<br />'; # showing data from the copied array
}
echo '<hr />', '<pre>', print_r($numbers, true), '</pre>'; # shows the original values (also includes the newly added values). 
```

除此之外，php 也允许使用`iterated values as a reference to the original array value`。如下所示：

```
<?php
$numbers = [1,2,3,4,5,6,7,8,9];
echo '<pre>', print_r($numbers, true), '</pre>';
foreach($numbers as $index => &$number){
    ++$number; # we are incrementing the original value
    echo 'Inside of the array = ', $index, ': ', $number, '<br />'; # this is showing the original value
}
echo '<hr />';
echo '<pre>', print_r($numbers, true), '</pre>'; # we are again showing the original value 
```

**注意：**它不允许`original array indexes`用作`references`.

来源：[http ://dwellupper.io/post/47/understanding-php-foreach-loop-with-examples](http://dwellupper.io/post/47/understanding-php-foreach-loop-with-examples)*

# python - 实现自定义弹出 tkinter 对话框的正确方法

> ID：10057672
> 
> 赞同：26
> 
> 时间：2012-04-07T19:34:05.000
> 
> 标签：python, tkinter, dialog, tkmessagebox

我刚开始学习如何创建自定义弹出对话框；事实证明，它`tkinter messagebox`真的很容易使用，但它也没有做太多。这是我尝试创建一个对话框，该对话框将接受输入，然后将其存储在用户名中。

我的问题是推荐的实现方式是什么？正如 Bryan Oakley 在[此评论](https://stackoverflow.com/questions/10052410/tkinter-button-does-not-appear-on-toplevel#comment12867705_10052410)中所建议的那样。

> 我建议不要使用全局变量。与其让对话框自行销毁，不如让它只销毁实际的小部件，但让对象保持活动状态。然后，从你的主要逻辑中调用类似`inputDialog.get_string()`then的东西。`del inputDialog`

也许使用全局变量来返回我的字符串不是最好的主意，但为什么呢？建议的方法是什么？我很困惑，因为我不知道如何在窗口被销毁后触发 getstring，并且......关于销毁实际小部件的行，我不确定他是否指的是`TopLevel`.

我问的原因是因为我希望按下提交按钮后弹出框被销毁；因为毕竟我希望它恢复到主程序，更新一些东西等等。`send`在这种情况下按钮方法应该做什么？因为这个特定示例中的想法是允许用户一遍又一遍地执行此操作，如果他愿意的话。

```
import tkinter as tk

class MyDialog:
    def __init__(self, parent):
        top = self.top = tk.Toplevel(parent)
        self.myLabel = tk.Label(top, text='Enter your username below')
        self.myLabel.pack()

        self.myEntryBox = tk.Entry(top)
        self.myEntryBox.pack()

        self.mySubmitButton = tk.Button(top, text='Submit', command=self.send)
        self.mySubmitButton.pack()

    def send(self):
        global username
        username = self.myEntryBox.get()
        self.top.destroy()

def onClick():
    inputDialog = MyDialog(root)
    root.wait_window(inputDialog.top)
    print('Username: ', username)

username = 'Empty'
root = tk.Tk()
mainLabel = tk.Label(root, text='Example for pop up input box')
mainLabel.pack()

mainButton = tk.Button(root, text='Click me', command=onClick)
mainButton.pack()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-08T18:40:35.750

在想到的两种情况下， 使用[global 语句是不必要的。](http://docs.python.org/2/reference/simple_stmts.html#the-global-statement)

1.  您想编写一个可以导入以**与**主 GUI一起使用的对话框
2.  **你想编写一个可以在没有**主 GUI 的情况下导入使用的对话框

* * *

# 编写一个对话框，可以导入以**与**主 GUI一起使用

* * *

在创建对话框实例时，可以通过传递字典和键来避免全局语句。然后可以使用[lambda](https://docs.python.org/3.3/tutorial/controlflow.html?highlight=lambda#lambda-expressions)将字典 & 键与按钮的命令相关联。这将创建一个匿名函数，该函数将在按下按钮时执行您的函数调用（使用 args）。

通过将父级绑定到类属性（本示例中为根），您可以避免每次创建对话框实例时都需要传递父级。

您可以将以下内容保存在与主 GUI 文件相同的文件夹`mbox.py`中或文件夹中。`your_python_folder\Lib\site-packages`

```
import tkinter

class Mbox(object):

    root = None

    def __init__(self, msg, dict_key=None):
        """
        msg = <str> the message to be displayed
        dict_key = <sequence> (dictionary, key) to associate with user input
        (providing a sequence for dict_key creates an entry for user input)
        """
        tki = tkinter
        self.top = tki.Toplevel(Mbox.root)

        frm = tki.Frame(self.top, borderwidth=4, relief='ridge')
        frm.pack(fill='both', expand=True)

        label = tki.Label(frm, text=msg)
        label.pack(padx=4, pady=4)

        caller_wants_an_entry = dict_key is not None

        if caller_wants_an_entry:
            self.entry = tki.Entry(frm)
            self.entry.pack(pady=4)

            b_submit = tki.Button(frm, text='Submit')
            b_submit['command'] = lambda: self.entry_to_dict(dict_key)
            b_submit.pack()

        b_cancel = tki.Button(frm, text='Cancel')
        b_cancel['command'] = self.top.destroy
        b_cancel.pack(padx=4, pady=4)

    def entry_to_dict(self, dict_key):
        data = self.entry.get()
        if data:
            d, key = dict_key
            d[key] = data
            self.top.destroy() 
```

您可以在 effbot 看到 TopLevel 和 tkSimpleDialog（py3 中的 tkinter.simpledialog）子类的[示例](http://effbot.org/tkinterbook/tkinter-dialog-windows.htm)。

值得注意的是[ttk 小部件可以与本示例中的 tkinter 小部件](https://stackoverflow.com/a/15081982/1217270)互换。

要使对话框准确居中，请阅读 → [this](https://stackoverflow.com/a/10018670/1217270)。

使用示例：

```
import tkinter
import mbox

root = tkinter.Tk()

Mbox = mbox.Mbox
Mbox.root = root

D = {'user':'Bob'}

b_login = tkinter.Button(root, text='Log in')
b_login['command'] = lambda: Mbox('Name?', (D, 'user'))
b_login.pack()

b_loggedin = tkinter.Button(root, text='Current User')
b_loggedin['command'] = lambda: Mbox(D['user'])
b_loggedin.pack()

root.mainloop() 
```

* * *

# *编写一个可以在没有*主 GUI 的情况下导入使用的对话框

* * *

创建一个包含对话框类的模块（此处为 MessageBox）。此外，包括一个创建该类实例的函数，并最终返回按下的按钮的值（或来自 Entry 小部件的数据）。

这是一个完整的模块，您可以借助以下参考资料对其进行自定义：[NMTech](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/index.html)和[Effbot](http://effbot.org/tkinterbook/tkinter-index.htm)。
将以下代码另存`mbox.py`为`your_python_folder\Lib\site-packages`

```
import tkinter

class MessageBox(object):

    def __init__(self, msg, b1, b2, frame, t, entry):

        root = self.root = tkinter.Tk()
        root.title('Message')
        self.msg = str(msg)
        # ctrl+c to copy self.msg
        root.bind('<Control-c>', func=self.to_clip)
        # remove the outer frame if frame=False
        if not frame: root.overrideredirect(True)
        # default values for the buttons to return
        self.b1_return = True
        self.b2_return = False
        # if b1 or b2 is a tuple unpack into the button text & return value
        if isinstance(b1, tuple): b1, self.b1_return = b1
        if isinstance(b2, tuple): b2, self.b2_return = b2
        # main frame
        frm_1 = tkinter.Frame(root)
        frm_1.pack(ipadx=2, ipady=2)
        # the message
        message = tkinter.Label(frm_1, text=self.msg)
        message.pack(padx=8, pady=8)
        # if entry=True create and set focus
        if entry:
            self.entry = tkinter.Entry(frm_1)
            self.entry.pack()
            self.entry.focus_set()
        # button frame
        frm_2 = tkinter.Frame(frm_1)
        frm_2.pack(padx=4, pady=4)
        # buttons
        btn_1 = tkinter.Button(frm_2, width=8, text=b1)
        btn_1['command'] = self.b1_action
        btn_1.pack(side='left')
        if not entry: btn_1.focus_set()
        btn_2 = tkinter.Button(frm_2, width=8, text=b2)
        btn_2['command'] = self.b2_action
        btn_2.pack(side='left')
        # the enter button will trigger the focused button's action
        btn_1.bind('<KeyPress-Return>', func=self.b1_action)
        btn_2.bind('<KeyPress-Return>', func=self.b2_action)
        # roughly center the box on screen
        # for accuracy see: https://stackoverflow.com/a/10018670/1217270
        root.update_idletasks()
        xp = (root.winfo_screenwidth() // 2) - (root.winfo_width() // 2)
        yp = (root.winfo_screenheight() // 2) - (root.winfo_height() // 2)
        geom = (root.winfo_width(), root.winfo_height(), xp, yp)
        root.geometry('{0}x{1}+{2}+{3}'.format(*geom))
        # call self.close_mod when the close button is pressed
        root.protocol("WM_DELETE_WINDOW", self.close_mod)
        # a trick to activate the window (on windows 7)
        root.deiconify()
        # if t is specified: call time_out after t seconds
        if t: root.after(int(t*1000), func=self.time_out)

    def b1_action(self, event=None):
        try: x = self.entry.get()
        except AttributeError:
            self.returning = self.b1_return
            self.root.quit()
        else:
            if x:
                self.returning = x
                self.root.quit()

    def b2_action(self, event=None):
        self.returning = self.b2_return
        self.root.quit()

    # remove this function and the call to protocol
    # then the close button will act normally
    def close_mod(self):
        pass

    def time_out(self):
        try: x = self.entry.get()
        except AttributeError: self.returning = None
        else: self.returning = x
        finally: self.root.quit()

    def to_clip(self, event=None):
        self.root.clipboard_clear()
        self.root.clipboard_append(self.msg) 
```

和：

```
def mbox(msg, b1='OK', b2='Cancel', frame=True, t=False, entry=False):
    """Create an instance of MessageBox, and get data back from the user.
    msg = string to be displayed
    b1 = text for left button, or a tuple (<text for button>, <to return on press>)
    b2 = text for right button, or a tuple (<text for button>, <to return on press>)
    frame = include a standard outerframe: True or False
    t = time in seconds (int or float) until the msgbox automatically closes
    entry = include an entry widget that will have its contents returned: True or False
    """
    msgbox = MessageBox(msg, b1, b2, frame, t, entry)
    msgbox.root.mainloop()
    # the function pauses here until the mainloop is quit
    msgbox.root.destroy()
    return msgbox.returning 
```

在*mbox*创建*MessageBox*的一个实例后，它会启动主循环，
这会有效地停止该函数，直到通过 退出主循环`root.quit()`。
然后*mbox*函数可以访问`msgbox.returning`并返回其值。

例子：

```
user = {}
mbox('starting in 1 second...', t=1)
user['name'] = mbox('name?', entry=True)
if user['name']:
    user['sex'] = mbox('male or female?', ('male', 'm'), ('female', 'f'))
    mbox(user, frame=False) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-30T22:44:22.677

由于对象 inputDialog 没有被破坏，我能够访问对象属性。我将返回字符串添加为属性：

```
import tkinter as tk

class MyDialog:

    def __init__(self, parent):
        top = self.top = tk.Toplevel(parent)
        self.myLabel = tk.Label(top, text='Enter your username below')
        self.myLabel.pack()
        self.myEntryBox = tk.Entry(top)
        self.myEntryBox.pack()
        self.mySubmitButton = tk.Button(top, text='Submit', command=self.send)
        self.mySubmitButton.pack()

    def send(self):
        self.username = self.myEntryBox.get()
        self.top.destroy()

def onClick():
    inputDialog = MyDialog(root)
    root.wait_window(inputDialog.top)
    print('Username: ', inputDialog.username)

root = tk.Tk()
mainLabel = tk.Label(root, text='Example for pop up input box')
mainLabel.pack()

mainButton = tk.Button(root, text='Click me', command=onClick)
mainButton.pack()

root.mainloop() 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-05-15T02:27:59.527

您可以使用 simpledialog，而不是使用消息框。它也是 tkinter 的一部分。它就像一个模板，而不是完全定义你自己的类。simpledialog 解决了必须自己添加“确定”和“取消”按钮的问题。我自己也遇到过这个问题，java2s 有一个很好的例子来说明如何使用简单的对话框来制作自定义对话框。这是他们的两个文本字段和两个标签对话框的示例。它是 Python 2，所以你需要改变它。希望这可以帮助 ：）

```
from Tkinter import *
import tkSimpleDialog

class MyDialog(tkSimpleDialog.Dialog):

    def body(self, master):

        Label(master, text="First:").grid(row=0)
        Label(master, text="Second:").grid(row=1)

        self.e1 = Entry(master)
        self.e2 = Entry(master)

        self.e1.grid(row=0, column=1)
        self.e2.grid(row=1, column=1)
        return self.e1 # initial focus

    def apply(self):
        first = self.e1.get()
        second = self.e2.get()
        print first, second 

root = Tk()
d = MyDialog(root)
print d.result 
```

来源：[http ://www.java2s.com/Code/Python/GUI-Tk/Asimpledialogwithtwolabelsandtwotextfields.htm](http://www.java2s.com/Code/Python/GUI-Tk/Asimpledialogwithtwolabelsandtwotextfields.htm)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-09-11T08:55:21.043

我使用[了 Honest Abe 的第二部分代码，](https://stackoverflow.com/a/10065345/1135684)标题为：

> 编写一个可以在没有主 GUI 的情况下导入使用的对话框

作为模板并进行了一些修改。我需要一个组合框而不是条目，所以我也实现了它。如果你需要别的东西，它应该很容易修改。

**以下是变化**

*   像孩子一样行动
*   模态到父级
*   居中于父级之上
*   不可调整大小
*   组合框而不是条目
*   单击十字 (X) 以关闭对话框

**已移除**

*   框架，计时器，剪贴板

将以下内容另存为与主 GUI 文件相同的文件夹`mbox.py`中或文件夹中。`your_python_folder\Lib\site-packages`

```
import tkinter
import tkinter.ttk as ttk

class MessageBox(object):

    def __init__(self, msg, b1, b2, parent, cbo, cboList):

        root = self.root = tkinter.Toplevel(parent)

        root.title('Choose')
        root.geometry('100x100')
        root.resizable(False, False)
        root.grab_set() # modal

        self.msg = str(msg)
        self.b1_return = True
        self.b2_return = False
        # if b1 or b2 is a tuple unpack into the button text & return value
        if isinstance(b1, tuple): b1, self.b1_return = b1
        if isinstance(b2, tuple): b2, self.b2_return = b2
        # main frame
        frm_1 = tkinter.Frame(root)
        frm_1.pack(ipadx=2, ipady=2)
        # the message
        message = tkinter.Label(frm_1, text=self.msg)
        if cbo: message.pack(padx=8, pady=8)
        else: message.pack(padx=8, pady=20)
        # if entry=True create and set focus
        if cbo:
            self.cbo = ttk.Combobox(frm_1, state="readonly", justify="center", values= cboList)
            self.cbo.pack()
            self.cbo.focus_set()
            self.cbo.current(0)
        # button frame
        frm_2 = tkinter.Frame(frm_1)
        frm_2.pack(padx=4, pady=4)
        # buttons
        btn_1 = tkinter.Button(frm_2, width=8, text=b1)
        btn_1['command'] = self.b1_action
        if cbo: btn_1.pack(side='left', padx=5)
        else: btn_1.pack(side='left', padx=10)
        if not cbo: btn_1.focus_set()
        btn_2 = tkinter.Button(frm_2, width=8, text=b2)
        btn_2['command'] = self.b2_action
        if cbo: btn_2.pack(side='left', padx=5)
        else: btn_2.pack(side='left', padx=10)
        # the enter button will trigger the focused button's action
        btn_1.bind('<KeyPress-Return>', func=self.b1_action)
        btn_2.bind('<KeyPress-Return>', func=self.b2_action)
        # roughly center the box on screen
        # for accuracy see: https://stackoverflow.com/a/10018670/1217270
        root.update_idletasks()
        root.geometry("210x110+%d+%d" % (parent.winfo_rootx()+7,
                                         parent.winfo_rooty()+70))

        root.protocol("WM_DELETE_WINDOW", self.close_mod)

        # a trick to activate the window (on windows 7)
        root.deiconify()

    def b1_action(self, event=None):
        try: x = self.cbo.get()
        except AttributeError:
            self.returning = self.b1_return
            self.root.quit()
        else:
            if x:
                self.returning = x
                self.root.quit()

    def b2_action(self, event=None):
        self.returning = self.b2_return
        self.root.quit()

    def close_mod(self):
        # top right corner cross click: return value ;`x`;
        # we need to send it a value, otherwise there will be an exception when closing parent window
        self.returning = ";`x`;"
        self.root.quit() 
```

它应该快速且易于使用。这是一个例子：

```
from mbox import MessageBox
from tkinter import *

root = Tk()

def mbox(msg, b1, b2, parent, cbo=False, cboList=[]):
    msgbox = MessageBox(msg, b1, b2, parent, cbo, cboList)
    msgbox.root.mainloop()
    msgbox.root.destroy()
    return msgbox.returning

prompt = {}

# it will only show 2 buttons & 1 label if (cbo and cboList) aren't provided
# click on 'x' will return ;`x`;
prompt['answer'] = mbox('Do you want to go?', ('Go', 'go'), ('Cancel', 'cancel'), root)
ans = prompt['answer']
print(ans)
if ans == 'go':
    # do stuff
    pass
else:
    # do stuff
    pass

allowedItems = ['phone','laptop','battery']
prompt['answer'] = mbox('Select product to take', ('Take', 'take'), ('Cancel', 'cancel'), root, cbo=True, cboList=allowedItems)
ans = prompt['answer']
print(ans)
if (ans == 'phone'):
    # do stuff
    pass
elif (ans == 'laptop'):
    # do stuff
    pass
else:
    # do stuff
    pass 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-15T03:28:52.997

```
import tkinter
import tkinter.ttk as ttk

class MessageBox(object):

    def __init__(self, msg, b1, b2, parent, cbo, cboList):

        root = self.root = tkinter.Toplevel(parent)

        root.title('Choose')
        root.geometry('100x100')
        root.resizable(False, False)
        root.grab_set() # modal

        self.msg = str(msg)
        self.b1_return = True
        self.b2_return = False
        # if b1 or b2 is a tuple unpack into the button text & return value
        if isinstance(b1, tuple): b1, self.b1_return = b1
        if isinstance(b2, tuple): b2, self.b2_return = b2
        # main frame
        frm_1 = tkinter.Frame(root)
        frm_1.pack(ipadx=2, ipady=2)
        # the message
        message = tkinter.Label(frm_1, text=self.msg)
        if cbo: message.pack(padx=8, pady=8)
        else: message.pack(padx=8, pady=20)
        # if entry=True create and set focus
        if cbo:
            self.cbo = ttk.Combobox(frm_1, state="readonly", justify="center", values= cboList)
            self.cbo.pack()
            self.cbo.focus_set()
            self.cbo.current(0)
        # button frame
        frm_2 = tkinter.Frame(frm_1)
        frm_2.pack(padx=4, pady=4)
        # buttons
        btn_1 = tkinter.Button(frm_2, width=8, text=b1)
        btn_1['command'] = self.b1_action
        if cbo: btn_1.pack(side='left', padx=5)
        else: btn_1.pack(side='left', padx=10)
        if not cbo: btn_1.focus_set()
        btn_2 = tkinter.Button(frm_2, width=8, text=b2)
        btn_2['command'] = self.b2_action
        if cbo: btn_2.pack(side='left', padx=5)
        else: btn_2.pack(side='left', padx=10)
        # the enter button will trigger the focused button's action
        btn_1.bind('<KeyPress-Return>', func=self.b1_action)
        btn_2.bind('<KeyPress-Return>', func=self.b2_action)
        # roughly center the box on screen
        # for accuracy see: https://stackoverflow.com/a/10018670/1217270
        root.update_idletasks()
        root.geometry("210x110+%d+%d" % (parent.winfo_rootx()+7,
                                         parent.winfo_rooty()+70))

        root.protocol("WM_DELETE_WINDOW", self.close_mod)

        # a trick to activate the window (on windows 7)
        root.deiconify()

    def b1_action(self, event=None):
        try: x = self.cbo.get()
        except AttributeError:
            self.returning = self.b1_return
            self.root.quit()
        else:
            if x:
                self.returning = x
                self.root.quit()

    def b2_action(self, event=None):
        self.returning = self.b2_return
        self.root.quit()

    def close_mod(self):
        # top right corner cross click: return value ;`x`;
        # we need to send it a value, otherwise there will be an exception when closing parent window
        self.returning = ";`x`;"
        self.root.quit() 
```

# objective-c - 从实例方法调用类方法

> ID：10057676
> 
> 赞同：2
> 
> 时间：2012-04-07T19:34:26.557
> 
> 标签：objective-c

我想从一个实例方法调用一个类方法来使用它的返回值。

这是我的课堂方法

```
+(double) minFMFrequency {

    return 88.3;
} 
```

这是我的实例方法

```
-(void) chackFrequency {

    switch (band) {
        case 'F':
            if (self.frequency > Value obtained from class method )
                frequency=107.9;
            break;

        default:
            break;
    }

} 
```

`band`并且`frequency`是实例变量。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T19:40:55.157

```
+(void)classMethod
{
    [self anotherClassMethod]; // in a class method, self refers to the class
}

-(void)instanceMethod
{
    [self anotherInstanceMethod]; //in an instance method self refers to the object, or instance 

    [[self class] classMethod]; //to call a class method from an instance send the instance the class message

} 
```

所以在你的情况下：`[[self class] minFMFrequency];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:40:43.730

欺骗。检查[这个](https://stackoverflow.com/questions/429841/how-do-i-call-a-method-from-an-instance-of-a-class)。

你需要做：`[[self class] ClassProperties]`

所以......对你来说：`chackFrequency`你可以打电话给`[[self class] minFMFrequency]`.

# c++ - 支持实时和非实时模式的程序

> ID：10057677
> 
> 赞同：0
> 
> 时间：2012-04-07T19:34:38.950
> 
> 标签：c++, c++11

我正在尝试将现有程序从（本地）现有时间类转换为使用 C++11 中的新时间设施。对于实时处理，如何将 C++11 功能映射到本地时间类中是很清楚的。尚不清楚如何使用 C++11 计时工具来支持非实时模式（例如，“尽可能快地运行批处理模式”、“以四分之一速度运行演示模式”等.) 本土类支持。这是否通过定义`clock`将挂墙时间正确映射到“播放”速度的特殊 s 来实现？任何帮助表示赞赏，一个例子会很棒。

例如，我将转换的代码具有以下结构

```
MessageQueue::poll( Seconds( 1 ) ); 
```

或者

```
sleep( Minutes( 2 ) ); 
```

`Seconds`or对象知道`Minutes`程序运行的速度，以避免必须在各处使用乘法器或转换函数，例如

```
MessageQueue::poll( PlaybackSpeed * Seconds( 1 ) ); 
```

或者

```
MessageQueue::poll( PlaybackSpeed( Seconds( 1 ) ) ); 
```

我希望有可能的是`std::chrono::duration`通过`std::chrono::time_point`提供一个自定义的`clock`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:50:41.043

制作自己的时钟是否足够取决于您如何使用您创建的持续时间。例如，如果您想以半速运行，但在某处调用：

```
std::this_thread::sleep_for(std::chrono::minutes(2)); 
```

持续时间不会调整。相反，您需要使用 sleep_until 并提供一个使用“慢”时钟的时间点。但是制作一个运行缓慢的时钟非常容易：

```
template<typename Clock,int slowness>
struct slow_clock {
    using rep = typename Clock::rep;
    using period = typename Clock::period;
    using duration = typename Clock::duration;
    using time_point = std::chrono::time_point<slow_clock>;

    constexpr static bool is_steady = Clock::is_steady;

    static time_point now() {
        return time_point(start_time.time_since_epoch() + ((Clock::now() - start_time)/slowness));
    }

    static const typename Clock::time_point start_time;
};

template<typename Clock,int slowness>
const typename Clock::time_point
slow_clock<Clock,slowness>::start_time = Clock::now(); 
```

从 now() 返回的 time_points 似乎会以相对于您给它的时钟较慢的速度前进。例如，这是一个程序，因此您可以通过以下方式缓慢观察纳秒：

```
int main() {
    using Clock = slow_clock<std::chrono::high_resolution_clock,500000000>;
    for(int i=0;i<10;++i) {
        std::this_thread::sleep_until(Clock::now()
                                      + std::chrono::nanoseconds(1));
        std::cout << "tick\n";
    }
} 
```

您实现的所有功能，例如`MessageQueue::poll()`，可能都需要根据全局时钟 typedef 来实现。

当然，这一切都与程序实际运行的速度无关，除非您根据它们减慢程序的速度。超时的函数会花费更长的时间，sleep_until 会花费更长的时间，但不等待未来某个时间点的操作只会显得更快。

```
// appears to run a million times faster than normal according to (finish-start)
auto start = slow_clock<steady_clock,1000000>::now();
do_slow_operation();
auto finish = slow_clock<steady_clock,1000000>::now(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T23:56:05.923

对于这种情况：

```
MessageQueue::poll( Seconds( 1 ) ); 
```

如果您只是让您的 MessageQueue 了解它应该以什么“速度”运行，您可以轻松地使用标准时间类。`MessageQueue::setPlaybackSpeed(0.5)`如果您想以半速运行，只需调用类似的东西，然后让队列从那时起在有人给它一定时间时使用该因素。

至于这个：

```
sleep( Minutes( 2 ) ); 
```

你的旧代码在做什么？我猜想创建的任何对象 Minutes() 都有一个隐式转换运算符到返回秒数的 int？这对我来说似乎太神奇了——最好在 MessageQueue 或其他类上创建一个 sleep() 方法，然后你可以使用与上面相同的解决方案。

# java - 错误的数组值

> ID：10057678
> 
> 赞同：0
> 
> 时间：2012-04-07T19:34:48.387
> 
> 标签：java, android, arrays

我有二维数组，但如果我改变 x 坐标，每次我得到错误的结果。

```
 int[][] arr = {{0, 2, 0, 0, 1},{0, 2, 0, 0, 1},{0, 2, 0, 0, 1},{0, 2, 0, 0, 1},{0, 2, 0, 0, 1}};
int now, previous;

   for (int i = 1; i < 5; i++) {
    for (int j = 0; j < 5; j++) {
        now = arr[i][j];
        previous = arr[i-1][j];
        }
   } 
```

现在变量的结果是 0, 2, 0, 0, 1... 为什么我只想有 2, 0, 0, 1 如果我更改变量的 i 坐标，例如 i = 1，输出仍然是 0, 2 , 0, 0, 1... 你知道问题出在哪里吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:39:24.807

您需要输入 j = 1 而不是 j = 0。

i 变量遍历组成数组的向量，而 j 变量遍历这些向量之一的每个元素。您想跳过每个向量的第一个元素，因此您应该将 j 更改为从 1 而不是 0 开始。

在任何情况下，您都在循环内重复归因，并且只会保留分配给变量的最后一个值。因此，假设这是您使用的原始代码，您应该删除“for”循环并直接进行归因，假设您的 arr 数组不会更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:40:04.993

因为 i 对应于您示例中的外部数组。你所拥有的将打印 `0, 2, 0, 0, 1`四次。我收集到你想要展示`2, 0, 0, 1`五次......因为你应该这样做

```
for (int i = 0; i < 5; i++) {
 for (int j = 1; j < 5; j++) {
     now = arr[i][j];
     previous = arr[i-1][j];
     }
} 
```

# android - 尝试加载下载的网页和图片

> ID：10057682
> 
> 赞同：1
> 
> 时间：2012-04-07T19:35:41.490
> 
> 标签：android, webview, textview

我已经下载了一个网页 html 和里面的图片。现在，我正在尝试向用户展示它们。我尝试了两种不同的方法，但不确定哪种方法最好。两者都有自己的问题。

首先，我尝试了一个带有以下代码的文本视图：

```
TextView content = (TextView)findViewById(R.id.article_content);

MyImageGetter mig = new MyImageGetter(this, urlId);
Spanned span = Html.fromHtml(contents, mig, null);
content.setText(span); 
```

我真的很喜欢它的工作原理，除了两个问题。第一个也是最困难的是当一篇文章有​​很多图像时，我会得到 OutOfMemory fc's。MyImageGetter 代码如下

```
public class MyImageGetter implements Html.ImageGetter{

String urlId = null;
Context c = null;

public MyImageGetter(ArticleViewer articleViewer, String urlId2) {
    c = articleViewer;
    urlId = urlId2;
}

public Drawable getDrawable(String source) {
    String[] brokenUrl = source.split("/");
    String imgName = brokenUrl[brokenUrl.length-1];

    File image = new File("/data/data/com.that1dev.RibbonReader/Offline/" + urlId + "/" + imgName);
    Log.w("MyApp", image.getAbsolutePath());
    Bitmap bm = BitmapFactory.decodeFile(image.getAbsolutePath());

    Drawable d = new BitmapDrawable(c.getResources(), bm);

    d.setBounds(0,0, d.getIntrinsicWidth(),d.getIntrinsicHeight());

    return d;
}

} 
```

另一个问题是 textview 根据用户选择和设备方向具有不同的宽度。如果视图中的图像大于 textview 的宽度，它们就会被裁剪。但是，我相信我可以自己解决这个问题而没有太大的困难。自从我尝试先解决内存问题以来，我还没有太努力。但是，非常感谢您提供任何帮助。

我尝试过的另一种方法是 webview。

```
WebView webContent = (WebView)findViewById(R.id.web_content);

webContent.loadDataWithBaseURL("", contents[1], "text/html", "utf-8", "");
webContent.setBackgroundColor(Color.TRANSPARENT); 
```

不幸的是，无论我尝试什么，背景都是白色的，而且非常难看。我似乎找不到适用于 3.0 和 4.0 的解决方法。

如果我有选择，我真的很喜欢 TextView 方法，因为我更喜欢它的外观而不是 WebView 呈现事物的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:57:04.160

从根本上说，您在这里尝试做的是改变 Web 内容的呈现方式 - 更换网站作者（可能是您，我不知道）所写的背景。无论如何，HTML 并不真正支持 Web 内容的透明背景，所以我唯一能想到的你可能会尝试的是通过 JavaScript 实际编辑 Web 内容：

```
myWebView.loadUrl("javascript:document.body.style.backgroundImage=\'\');
   document.body.style.backgroundColor=\"#00FF00\");"); 
```

（将上面的颜色替换为您选择的颜色）在 WebView 加载后调用它会清除 HTML 上的任何背景，但是当涉及到任何不在正文上的嵌套样式时，您仍然会遇到问题。

As for your image problem, you're opening all of the images at their default size and keeping them in memory. One of the things that the WebView does for you is to keep decimated (as in shrunk) renderings of the webpage images. If you want to fix your memory footprint, your best bet is to temporarily save the images to disk, and only open them when the user has scrolled to where the image needs to be - which is not going to be easy, by any means, but that's the only way to ensure that you aren't going to overflow your allocated heap space.

# c++ - 我们如何知道真字体的代码点是否高于 0xFFFF？

> ID：10057686
> 
> 赞同：4
> 
> 时间：2012-04-07T19:36:10.400
> 
> 标签：c++, windows, unicode, truetype

我们如何知道真字体的代码点是否高于 0xFFFF ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:10:14.523

有一个 API (GetFontUnicodeRanges/GetGlyphIndices)，但我怀疑你知道它不会超过 0xFFFF。

有两种明显的以编程方式查找的方法：

1.  解析`.ttf`文件（[规范](https://developer.apple.com/fonts/TTRefMan/RM06/Chap6.html)是开放式的）
2.  尝试测量您感兴趣的字符的输出，并将测量结果与已知的替换字符进行比较

这个答案有一个 .NET/C# 解决方案：[Get supported characters of a font - in C#](https://stackoverflow.com/questions/1439551/get-supported-characters-of-a-font-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T04:10:55.840

如果运行 Windows 7+，您可以调用 DirectWrite[`IDWriteFontFace::GetGlyphIndices`](https://msdn.microsoft.com/en-us/library/windows/desktop/dd370998(v=vs.85).aspx)从给定代码点的 cmap 或（Win 8+ 或 Windows 7 的平台更新）中获取名义字形 id，[`IDWriteFontFace1::GetUnicodeRanges`](https://msdn.microsoft.com/en-us/library/windows/desktop/hh780417(v=vs.85).aspx)如果您只想知道所有范围。GDI[`GetGlyphIndices`](https://msdn.microsoft.com/en-us/library/windows/desktop/dd144890(v=vs.85).aspx)和 Uniscribe[`ScriptGetCmap`](https://msdn.microsoft.com/en-us/library/windows/desktop/dd319122(v=vs.85).aspx)仅支持基本的多语言平面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-24T17:28:54.503

`ScriptShape` API to the rescue. Windows 7 and higher. Unlike `ScriptGetCMap`, it supports UTF-16 surrogate pairs. For unsupported by the font characters, it returns a zero glyph index.

The sample below assumes a one glyph string. The buffers are all static. See the API docs for buffer size requirements.

```
wchar_t ws[] = L""; // Known astral plane character

SelectObject(hDC, hFont); // Font to analyze - construct your own

SCRIPT_CACHE ScCache = nullptr; //One of those per font, per size.
HRESULT hr;
SCRIPT_ITEM si[3]; // Static buffers here :(
int ci;
WORD Glyphs[10], Clust[10];
SCRIPT_VISATTR sva[10];
hr = ScriptItemize(ws, wcslen(ws), 2, nullptr, nullptr, si, &ci);

int ng;
hr = ScriptShape(hDC, &ScCache, s, s[1] ? 2 : 1, _countof(Glyphs), &si[0].a, Glyphs, Clust, sva, &ng);

// For the win!
bool FontSupportsThisGlyph = (ng == 1 && Glyphs[0] != 0); 
```

# c++ - 在注入的DLL中调用函数

> ID：10057687
> 
> 赞同：5
> 
> 时间：2012-04-07T19:36:12.857
> 
> 标签：c++, dll-injection

我想在我制作的注入 DLL 的远程进程中调用一个函数。

我已成功注入我的 DLL：

```
CreateRemoteThread(pHandle, NULL, 0, (LPTHREAD_START_ROUTINE)GetProcAddress(GetModuleHandle("kernel32"), "LoadLibraryA"), pLibRemote, 0, NULL); 
```

DllMain 被执行并且 DLL 在待机模式下运行。我想做的是以某种方式调用远程加载的 DLL 来做一些工作。

我试过像这样导出函数：

```
extern "C" __declspec(dllexport) void MyFunc(void) 
```

然后像这样执行函数：

```
CreateRemoteThread(pHandle, NULL, 0, (LPTHREAD_START_ROUTINE)GetProcAddress(GetModuleHandle("mydll"), "MyFunc"), NULL, 0, NULL); 
```

但这会导致崩溃。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T21:40:21.340

按照您的方式调用`GetModuleHandle`将获得 DLL 的基础，因为它被映射到您的进程中（如果有的话）。所以你需要做的是首先确保在DLL中导出函数。您可以照常做或创建一个文件，如此[处](http://msdn.microsoft.com/en-us/library/d91k01sh%28v=vs.80%29.aspx)`.def`所示。此后：

**理论上**

1.  将 DLL 注入目标进程并获取加载它的基地址
2.  将 DLL 注入当前进程。用于`GetProcAddress`查找导出的函数与 DLL 的基础之间的偏移量。
3.  将此偏移量添加到从步骤 1.`CreateRemoteThread`在此位置获得的基地址。

* * *

**在实践中**

在进行 DLL 注入时，您可以获得将 DLL 加载到目标中的基础。

```
HMODULE hInjected;

hThread = CreateRemoteThread( hProcess, NULL, 0,
      (LPTHREAD_START_ROUTINE)( GetProcAddress( hMod,
      "LoadLibraryW" ) ), lpAddress, 0, NULL );

// Locate address our payload was loaded
if( hThread != 0 ) {
  WaitForSingleObject( hThread, INFINITE );
  GetExitCodeThread( hThread, ( LPDWORD )&hInjected );
  CloseHandle( hThread );
} 
```

`hInjected`将是注入的 DLL 的基础。然后我有另一个功能：

```
void* GetPayloadExportAddr( LPCWSTR lpPath, HMODULE hPayloadBase, LPCSTR lpFunctionName ) {
  // Load payload in our own virtual address space
  HMODULE hLoaded = LoadLibrary( lpPath );

  if( hLoaded == NULL ) {
    return NULL;
  } else {
    void* lpFunc   = GetProcAddress( hLoaded, lpFunctionName );
    DWORD dwOffset = (char*)lpFunc - (char*)hLoaded;

    FreeLibrary( hLoaded );
    return (DWORD)hPayloadBase + dwOffset;
  }
} 
```

这样做是首先将有效负载加载到我们自己的虚拟地址空间中。之后，我们可以使用`GetProcAddress`来获取导出函数的地址。由此，我们可以得到函数相对于 DLL 基础的偏移量。将此偏移量添加到`hInjected`我们之前获得的值中将告诉我们`CreateRemoteThread`应该在哪里进行调用。所以你可以这样打电话：

```
BOOL InitPayload( HANDLE hProcess, LPCWSTR lpPath, HMODULE hPayloadBase, HWND hwndDlg ) {
  void* lpInit = GetPayloadExportAddr( lpPath, hPayloadBase, "Init" );
  if( lpInit == NULL ) {
    return FALSE;
  } else {
    HANDLE hThread = CreateRemoteThread( hProcess, NULL, 0,
        lpInit, hwndDlg, 0, NULL );

    if( hThread == NULL ) {
      return FALSE;
    } else {
      CloseHandle( hThread );
    }
  }

  return TRUE;
} 
```

这是从[我拥有的旧项目](http://code.google.com/p/mpi-client/source/browse/trunk/MPI%20Client/MPI.c)中提取的所有代码。欢迎您使用代码并做任何您想做的事情，但我知道如果我现在要重写代码，我会做很多不同的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-14T06:27:24.800

如果您将 32 位 DLL 注入 32 位进程，则迈克的回答有效。

如果要将 64 位 DLL 注入 64 位进程，则无法从中获取 DLL 的基地址，`GetExitCodeThread`因为它只会为您提供 64 位地址的低 32 位。

在这种情况下，要获得正确的地址，您必须在调用的进程中写入一段代码`LoadLibrary`（将结果存储在进程内存中的特定位置），执行这段代码（使用`CreateRemoteThread`），然后从该位置使用`ReadProcessMemory`.

您可以在此处找到更多详细信息（包括 PowerShell 和 ASM 代码）：http: [//clymb3r.wordpress.com/2013/05/26/implementing-remote-loadlibrary-and-remote-getprocaddress-using-powershell-and -部件/](http://clymb3r.wordpress.com/2013/05/26/implementing-remote-loadlibrary-and-remote-getprocaddress-using-powershell-and-assembly/)

然后，您可以按照 Mike 描述的相同方式计算导出函数的偏移量，但请注意将差异存储在 64 位值中，而不是存储在 DWORD（即 32 位）中。

# variables - 批处理文件 FOR 命令

> ID：10057696
> 
> 赞同：0
> 
> 时间：2012-04-07T19:37:33.783
> 
> 标签：variables, for-loop, batch-file

我需要了解批处理脚本中 for 命令的一些基本信息。我想知道的一件事是为什么它的 %%variable 而不是 %variable%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:43:08.053

`%A`仅用于命令行。

`%%A`在批处理文件中使用时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T19:46:50.033

来自[ss64.com](http://ss64.com/nt/for.html)：

> 如果您在命令行而不是批处理程序中使用 FOR 命令，请指定 %parameter 而不是 %%parameter

所以 %%param 用于批处理脚本， %param 用于实时命令。Greg 是对的，%param% 是一种不同的变量。FOR 命令中的“变量”仅存在于该范围内，而环境 %variables% 则存在于更广泛的范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:48:07.773

单百分比`%a`语法表示批处理文件中的局部变量。

百分号括号`%foo%`表示名为 的环境变量的值`foo`。

# vb.net - 从 VB 在 Access 上运行查询，将变量或函数作为查询参数传递

> ID：10057699
> 
> 赞同：2
> 
> 时间：2012-04-07T19:38:02.830
> 
> 标签：vb.net, ms-access, ado.net, parameters

我正在尝试从 VB 运行一个 Access db 查询。我要运行的一般查询是

```
 SELECT * FROM Patient WHERE Patient.PatientID = ?
or  SELECT * FROM Patient WHERE Patient.PatientLname = ? 
```

我尝试使用捕获用户输入并将该变量传递给查询的输入框，但失败了。

然后我阅读了关于编写一个函数并使用它的信息，但是，我不断收到一个错误，上面写着 Function not defined，但是在单步执行代码时，它似乎可以工作。

这是我的功能：

```
Module Module1
    Public Function LookUpNow(ByVal userInput As String) As String
        LookUpNow = userInput
        Return userInput
        Exit Function
    End Function
End Module 
```

这也是目前的查询

```
SELECT * FROM Patient WHERE (((Patient.PatientLName)=LookUpNow())) 
```

我正在使用 VisualStudio。我是否必须使用 OleDBConnection 手动编写连接字符串，还是 VisualStudio 会自动完成？

```
Private Sub FillBy3ToolStripButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles FillBy3ToolStripButton.Click
    Dim Input As String
    Input = InputBox("What patientID do you want to lookup?", "PatientID entry Form", "Enter PatientID here")
    Call LookUpNow(Input)

    Try
        Me.PatientTableAdapter.FillBy3(Me.PatientRecordsDataSet.Patient)
    Catch ex As System.Exception
        System.Windows.Forms.MessageBox.Show(ex.Message)
    End Try

End Sub 
```

我很困惑和沮丧。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:33:20.093

**您不能远程（例如 OLE DB、ODBC 等）运行包含内部定义函数 (vba) 的 Access 查询。你得到的错误是完全合法的。**

您可以使用 OLE DB Provider 来执行查询。我确定您知道如何执行此操作，但以防万一，这里有一些有用的信息：http: [//msdn.microsoft.com/en-us/library/6d9ew87b (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/6d9ew87b(v=vs.90).aspx)

这里有一些例子：http: [//msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter(v=vs.90).aspx)

# android - 在设备之间同步信息的推荐方式

> ID：10057700
> 
> 赞同：1
> 
> 时间：2012-04-07T19:38:10.617
> 
> 标签：android, synchronization, cloud, preferences

我目前正在开发，我提出了以下问题：我如何/应该存储基本信息，例如设备之间的解锁项目和级别。当然，我将它们存储在首选项文件中。

但是如果用户购买了一部新手机并想继续在那里玩呢？（共享-）首选项不会重复。

因此，有没有（来自谷歌）推荐的方式（云？）来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:43:05.383

我不是专家，但我这样做的方法是使用在线 SQL 数据库。让设备连接到它，并保存/加载您需要的任何数据。我知道这不适用于文件，仅适用于基于文本的信息。我也使用 Flash 执行此操作。如果这是您的路线，我可以分享一些代码。

好的，所以如果你在 Flash 中执行此操作，你需要 3 样东西：Flash (duh)、PHP 文件和 SQL 服务器（我有一个 MYSQL 服务器）。

它的工作原理是 flash 会加载 php，php 会做它的事情（比如对数据库进行更改）并将结果返回到 flash。

假设我们想从数据库中获取所有用户名。

**数据库**

表名称为“Players”，其中有一列称为“u_id”

**闪光**

```
var loader:URLLoader; //makes a loader that will "load" the php page

public function DoIt()
{
    loader = new URLLoader();
    loader.addEventListener(Event.COMPLETE, loaderComplete);
    loader.load(new URLRequest("http://yourDomain.com/thePHPFile.php?arg=42"));
}

public function loaderComplete(e:Event):void
{
    var returnXML:XML; //we are assuming the return values are in xml format, trust me, this might be easier

    for each (var ListItem:XML in returnXML..Users) //you might need to change this "users" to be the root of the xml file
    {
        var userName:String = ListItem.u_id.toString();
        //you can do what you want with the data here
    }
} 
```

**PHP**

现在可能不需要它，但我尝试确保 PHP 文件和数据库位于同一主机上，以便我可以将“localhost”作为主机名

```
<?php

    $argumentVar = $_GET["arg"]; //not using this, just showing it's possible
    $connect = mysql_connect("localhost", "db_username", "db_password");

    if(!$connect)
    {
        die("error connecting to DB" . mysql_error());
    }

    $db_selected = mysql_select_db("the_name_of_the_db", $connect);

    if(!$db_selected)
    {
        die("error selecting db" . mysql_error());
    }

    $table_name = "Players" //this is the name of your database
    $sql = "SELECT * FROM $table_name;"; //not sure if you need ending ';'

    $dbresult = mysql_query($sql, $connect); //this is where all your data comes into

    //and now to save all the information to a xml file
    $doc = new DOMDocument('1.0');
$root = $doc->createElement('root');
$root = $doc->appendChild($root);

    while($row = mysql_fetch_assoc($dbresult)) 
{
    $occ = $doc->createElement($table_name);
    $occ = $root->appendChild($occ);

    foreach ($row as $fieldname => $fieldvalue)
    {
        $child = $doc->createElement($fieldname);
        $child = $occ->appendChild($child);

        $value = $doc->createTextNode($fieldvalue);
        $value = $child->appendChild($value);
    }
}

$xml_string = $doc->saveXML();
echo $xml_string;
?> 
```

好吧，去玩吧，它应该会让你走上正确的道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T19:52:13.023

我认为最好的方法是维护一个在线数据库，该数据库会定期更新每个注册用户的最新信息。因此，与其将所有内容存储在本地，不如将其存储在远程服务器上，并在需要时发送给用户。所以只要用户拥有自己为应用创建的账户，就不会丢失任何数据。

# java - 来自页面的意外结果

> ID：10057701
> 
> 赞同：0
> 
> 时间：2012-04-07T19:38:13.177
> 
> 标签：java, html-parsing

我正在尝试从 HTML 表中获取数据，但是当我连接到网站时，它没有返回它在浏览器中显示的内容。

这是我通过查看 html 结果期望得到的：

```
<div id="ResultsContainer">
    <div id="Pagination"><div class="left">displaying: 601 - 633 of 633</div><div class="right">
... 
```

这就是我得到的：

```
 <div id=ResultsContainer>
        <p class=RedBold10pt>Search returned no matches</p>
 </div> 
```

这是我的 Java 代码

```
HttpClient client = new DefaultHttpClient();

HttpGet request = new HttpGet();
request.setHeader("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.15 Safari/536.5");
request.setURI(new URI("http://results.active.com/pages/searchform.jsp?posted_p=t&numPerPage=50&page=0&rsID=10505&queryType=division#VIEW"));
HttpResponse response = client.execute(request);

BufferedReader in = null;
in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
StringBuffer sb = new StringBuffer("");
String line = "";
String NL = System.getProperty("line.separator");

while ((line = in.readLine()) != null) {
    sb.append(line + NL);
}
in.close();
String page = sb.toString();
System.out.println(page); 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:30:01.897

问题出在 Google AppEngine 上。我不得不从 1.6.4 降级到 1.6.3

# algorithm - 最优算法

> ID：10057705
> 
> 赞同：1
> 
> 时间：2012-04-07T19:38:52.147
> 
> 标签：algorithm

我得到一个输入“N”，我必须找到长度为 N 的列表的数量，它以 1 开头，这样要添加的下一个数字最多比迄今为止添加的最大数量多 1。例如，

N = 3, possible lists => (111, 112, 121, 122, 123), [113, or 131 是不可能的，因此我们只能添加 1 或 2]。

N = 4，列表1213是可能的，同时添加3，列表中的最大数量是'2'，因此可以添加3。

问题是计算给定输入“N”可能的此类列表的数量。

我的代码是：-

```
public static void Main(string[] args)
        {
            var noOfTestCases = Convert.ToInt32(Console.ReadLine());
            var listOfOutput = new List<long>();
            for (int i = 0; i < noOfTestCases; i++)
            {
                var requiredSize = Convert.ToInt64(Console.ReadLine());
                long result;
                const long listCount = 1;
                const long listMaxTillNow = 1;
                if (requiredSize < 3)
                    result = requiredSize;
                else
                {
                    SeqCount.Add(requiredSize, 0);
                    AddElementToList(requiredSize, listCount, listMaxTillNow);
                    result = SeqCount[requiredSize];
                }
                listOfOutput.Add(result);
            }
            foreach (var i in listOfOutput)
            {
                Console.WriteLine(i);
            }
        }

        private static Dictionary<long, long> SeqCount = new Dictionary<long, long>();

        private static void AddElementToList(long requiredSize, long listCount, long listMaxTillNow)
        {
            if (listCount == requiredSize)
            {
                SeqCount[requiredSize] = SeqCount[requiredSize] + 1;
                return;
            }
            var listMaxTillNowNew = listMaxTillNow + 1;
            for(var i = listMaxTillNowNew; i > 0; i--)
            {
                AddElementToList(requiredSize, listCount + 1,
                    i == listMaxTillNowNew ? listMaxTillNowNew : listMaxTillNow);
            }
            return;
        } 
```

这是蛮力方法。我想知道解决这个问题的最佳算法是什么？PS：我只想知道此类列表的数量，因此我确信不需要创建所有列表。（我在代码中的做法）我在算法方面一点也不擅长，所以请原谅这个冗长的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:56:59.697

这个问题是动态规划问题的一个经典例子：

如果您将函数 dp(k, m) 定义为长度为 k 且最大数量为 m 的列表的数量，那么您有一个递归关系：

```
dp(1, 1) = 1
dp(1, m) = 0, for m > 1
dp(k, m) = dp(k-1, m) * m + dp(k-1, m-1) 
```

实际上，只有一个长度为 1 的列表，其最大元素为 1。当您构建长度为 k 且最大元素为 m 的列表时，您可以获取任何 (k-1) 列表，其中 max = m 并附加1 或 2 或 .... 或 m。或者你可以使用一个最大元素为 m-1 的 (k-1)-list 并附加 m。如果您采用最大元素小于 m-1 的 (k-1)-list，那么根据您的规则，您不能通过仅附加一个元素来获得最大 m。

您可以使用动态编程计算所有 k = 1,...,N 和 m = 1,...,N+1 的 dp(k,m) ，`O(N^2)`然后您的问题的答案是

```
dp(N,1) + dp(N,2) + ... + dp(N,N+1) 
```

因此算法是`O(N^2)`。

* * *

C#中dp计算的实现见下文：

```
 int[] arr = new int[N + 2];
        for (int m = 1; m < N + 2; m++)
            arr[m] = 0;
        arr[1] = 1;

        int[] newArr = new int[N + 2];
        int[] tmp;
        for (int k = 1; k < N; k++)
        {
            for (int m = 1; m < N + 2; m++)
                newArr[m] = arr[m] * m + arr[m - 1];
            tmp = arr;
            arr = newArr;
            newArr = tmp;
        }

        int answer = 0;strong text
        for (int m = 1; m < N + 2; m++)
            answer += arr[m];

        Console.WriteLine("The answer for " + N + " is " + answer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T21:26:34.350

好吧，今天下午我被一场大火打断了（真的！）但是 FWIW，这是我的贡献：

```
 /*
     * Counts the number of possible integer list on langth N, with the
     * property that no integer in a list(starting with one) may be more
     * than one greater than the greatest integer preceeding it in the list.
     * 
     * I am calling this "Semi-Factorial" since it  is somewhat similar to
     * the factorial function and its constituent integer combinations.
     */
    public int SemiFactorial(int N)
    {
        int sumCounts = 0;

        // get a list of the counts of all valid lists of length N,
        //whose maximum integer is listCounts[maxInt].
        List<int> listCounts = SemiFactorialCounts(N);

        for (int maxInt = 1; maxInt <= N; maxInt++)
        {
            // Get the number of lists, of length N-1 whose maximum integer
            //is (maxInt):
            int maxIntCnt = listCounts[maxInt];

            // just sum them up
            sumCounts += maxIntCnt;
        }

        return sumCounts;
    }

    // Returns a list of the counts of all valid lists of length N, and
    //whose maximum integer is [i], where [i] is also its index in this
    //returned list. (0 is not used).
    public List<int> SemiFactorialCounts(int N)
    {
        List<int> cnts;
        if (N == 0)
        {
            // no valid lists, 
            cnts = new List<int>();
            // (zero isn't used)
            cnts.Add(0);
        }
        else if (N == 1)
            {
                // the only valid list is {1}, 
                cnts = new List<int>();
                // (zero isn't used)
                cnts.Add(0);
                //so that's one list of length 1
                cnts.Add(1);
            }
            else
            {
            // start with the maxInt counts of lists whose length is N-1:
            cnts = SemiFactorialCounts(N - 1);

            // add an entry for (N)
            cnts.Add(0);

            // (reverse order because we overwrite the list using values
            // from the next lower index.)
            for (int K = N; K > 0; K--) 
            {
                // The number of lists of length N and maxInt K { SF(N,K) }
                // Equals K times # of lists one shorter, but same maxInt,
                // Plus, the number of lists one shorter with maxInt-1.
                cnts[K] = K * cnts[K] + cnts[K - 1];
            }
        }

        return cnts;
    } 
```

与其他人非常相似。尽管我不会将其称为“经典动态编程”，而只是称为“经典递归”。

# r - 在 R 中自定义图形

> ID：10057710
> 
> 赞同：3
> 
> 时间：2012-04-07T19:39:42.270
> 
> 标签：r, graph, charts

1.  我有以下图表代码： `barplot(as.vector(t(mat1[1,3:ncol(mat1)])),las=2)` 我想更改，以便*x*轴被*y* = 2 行替换；有效地将*x*轴向上移动 2 个单位，如下图所示。 ![在此处输入图像描述](../Images/e4c46ee27d20fa81503ded6e5f8353a2.png)

    我需要酒吧从 2 开始，以便：

    *   值为 3 的条形图从 y=2 线开始并**上升**到 y=3 处结束。
    *   值为 0 的条形图从 y=2 线开始，**下降**到 y=0 结束
2.  如何使`mat1`我的*x*轴类别的列名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T22:16:16.733

Barplot 总是从 0 开始它的条形图。从每个 y 值中减去 2（或我做的 5）。将 ylim 设置为范围（y 值 - 5）。您将需要禁止使用 yaxt="n" 绘制 y 轴。轴的 xpd 参数允许标签范围扩展到实际值范围以下。

```
 set.seed(231)
 tN <- table(Ni <- stats::rpois(100, lambda=5))
 tNshift <- tN-5
 barplot(tNshift, space = 1.5, yaxt="n", xaxt="n", ylim=range(tNshift))
 abline(0,0)
 axis(2, at= c(-5, pretty(tNshift)), labels=c(0, pretty(tNshift)+5), xpd=TRUE) 
```

![在此处输入图像描述](../Images/9566d8c7a43497cc12de5f1fafe0ebf2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:42:32.967

这是第一个示例`?barplot`，稍作修改，`abline(x,y)`添加了

```
require(grDevices) # for colours
tN <- table(Ni <- stats::rpois(100, lambda=5))

barplot(tN, space = 1.5, axisnames=FALSE)
abline(5,0) 
```

![在此处输入图像描述](../Images/b753dadefdb09fbd813bc986d6154e86.png)

抱歉，如果这没有回答您的具体问题，但我没有任何示例数据可供使用，所以我举了这个`?barplot`例子。

# ruby-on-rails - Rails 中的社交图谱框架

> ID：10057713
> 
> 赞同：1
> 
> 时间：2012-04-07T19:39:47.200
> 
> 标签：ruby-on-rails, nosql, social-networking, social-graph

我想在我的 Rails 应用程序中有一个社交图数据库。希望该应用程序最终将拥有数十万用户，以及他们的 Facebook 和 LinkedIn 连接。现在，我正在使用 MySQL，但我知道它在处理社交图谱方面效率不高。

我应该如何解决这个问题，以及哪些框架/宝石等与 Rails 一起工作并且已经过良好测试？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:07:52.753

你可能会调查

[http://neo4j.org](http://neo4j.org)

...这是一个图形数据库，旨在处理图形数据中的存储、排序和查找关系。很好的介绍：

[http://markorodriguez.com/2012/03/07/exploring-wikipedia-with-gremlin-graph-traversals/](http://markorodriguez.com/2012/03/07/exploring-wikipedia-with-gremlin-graph-traversals/)

红宝石绑定：

[https://github.com/andreasronge/neo4j](https://github.com/andreasronge/neo4j)

# ruby-on-rails - 找出可以由多个用户编辑的文档模型的关系

> ID：10057716
> 
> 赞同：0
> 
> 时间：2012-04-07T19:39:52.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我正在尝试弄清楚如何为我的 rails 项目的 Document 模型设置关系/关联。我有一个用户模型，用户可以互相交朋友（友谊模型）。

现在我希望用户能够邀请（授予访问权限）某些朋友修改和编辑这些文档，类似于 Google Docs。

这是我目前解决这个问题的方法：

创建一个称为“组”的新关系模型，本质上是朋友的子集。文档属于一个用户，文档属于一个组。然后，用户可以邀请他们的朋友加入这些组关系，并且可以通过这些组访问/修改文档。

因此，用户有很多组，组属于很多用户。

我的问题：

1.  有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T04:36:06.063

您可能会考虑使用“Membership”连接表。所以：

```
Group >- Membership -< User 
```

...因为您的要求是某些用户将具有其他人不会（编辑）的能力。那里有各种各样的选择，例如 STI，它会给你：

```
class Membership < ActiveRecord::Base
  ...general membership functions
end

class Editor < Membership
   ...editor specific code...
end

class Reviewer < Membership
   ...reviewer specific code...
end 
```

还有一个控制器类，比如

```
class MembershipController
  def create invitation
    if invitation.for_editor?
      # assuming invitation has one group, and group_memberships method that returns group.memberships
      invitation.group_memberships.create! user: current_user
    else
      invitation.group_memberships.create! user: current_user
    end
  end
end 
```

例如，取决于您对 STI 的看法。

[https://github.com/scambra/devise_invitable](https://github.com/scambra/devise_invitable)

可能有更多的想法。

# c# - 如果前一个线程仍在运行，如何强制系统等待创建新线程？

> ID：10057741
> 
> 赞同：2
> 
> 时间：2012-04-07T19:43:05.670
> 
> 标签：c#, multithreading, join, timer

我`System.Timers`在我的程序中使用。

正如我们所知，每个间隔都会创建新线程来处理`OnTimedEvent`.

如果前一个线程仍在运行，我正在寻找强制系统等待创建新线程的方法。

我`OnTimedEvent`执行一些方法，我想等到方法完成

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:05:02.017

`Elapsed`在触发事件时不会创建新线程的意义上，您是错误的。该事件将在 .NET 线程池上引发，因此任意线程将对其进行处理。

做你想做的事情的一种方法是`Stop`在你的事件处理程序开始时使用计时器，并在`Start`它完成后再次使用它。像这样：

```
var timer = new System.Timers.Timer(1000);
timer.Elapsed += HandleTimerElapsed;
timer.Start();

...

private void HandleTimerElapsed(object s, ElapsedEventArgs e)
{
    var t = (System.Timers.Timer)s;
    t.Stop();

    try {
        ... do some processing
    }
    finally { // make sure to enable timer again
        t.Start();
    } 
} 
```

另一个选项是将`AutoReset`计时器的属性设置为 false。这样计时器只会被提升一次。然后，您可以`Start`在希望它重新开始时调用。因此，上面的代码将更改为`timer.AutoReset = false;`在开头包含 a ，然后您无需`Stop`在处理程序内部调用。这更安全一点，因为上述方法可能存在竞争条件，即如果系统处于负载状态，您的处理程序可能无法保证在计时器再次结束之前执行。

# c# - 使用 BinaryWriter 将一位写入二进制文件

> ID：10057747
> 
> 赞同：2
> 
> 时间：2012-04-07T19:43:18.910
> 
> 标签：c#, byte, bit, writer, binarywriter

我想将一位写入二进制文件。

```
using (FileStream fileStream = new FileStream(@"myfile.bin", FileMode.Create))
using (BinaryWriter binaryWriter = new BinaryWriter(fileStream))
{
    binaryWriter.Write((bool)10);
} 
```

像`binaryWriter.Write((bit)1);`
当我使用`binaryWriter.Write((bool)1)`文件时有一个字节，但我想写一位。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T19:44:48.113

不，不可能写一个位。你必须至少写一个完整的字节。如果您处于*想要*写入单个位的情况，您可以等到准备好写入 8 位（即将它们在内存中排队），然后写出一个完整的字节（即使用位移等来组合这些位到一个字节）。

也来自[维基百科](http://en.wikipedia.org/wiki/Byte)：

> 从历史上看，字节是计算机中用于对单个文本字符进行编码的位数，因此它是许多计算机体系结构中的基本可寻址元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T19:46:05.223

您不能在文件中仅存储 1 位。几乎所有现代文件系统和硬件都以 8 位（即字节或八位字节）段存储数据。

如果要在文件中存储位值，请将 1 或 0 存储为字节（00000001 或 00000000）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:47:49.037

如果只写入位，则可以将 8 位混合为一个字节。但是不可能写一个位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T19:49:26.600

您可能可以通过读/修改/写来做到这一点。你为什么要做这样的事情？不管它是什么，找到另一种方法，将位打包成字节，读/写布尔字节并将它们转换回位，使用 ASCII '0' 和 '1' - 除了一次读取和写入一个位之外的几乎任何东西。

# php - HTML 表单 POST 到 PHP 页面

> ID：10057752
> 
> 赞同：6
> 
> 时间：2012-04-07T19:44:05.840
> 
> 标签：php, html, forms

好的...我创建了一个 form.html 页面。它要求用户输入 6 个文本字段。表单 POST 到名为 myform.php 的单独页面。myform.php 页面只返回用户输入的值。但是，当我单击提交时，我只会在屏幕上弹出 myform.php 源代码。

```
<div class="content">
        <form action="myform.php" method="post">
            Name: <input name="name" type="text" size="25" />
            Course: <input name="course" type="text" size="25" />
            Book: <input name="book" type="text" size="255" />
            Price: <input name="price" type="text" size="7" />
            Email: <input name="email" type="text" size="255" />
            Phone #: <input name="phone" type="text" size="12" />

            <input name="mySubmit" type="submit" value="submit" />
        </form>
    </div>

<?php
$name = $_POST["name"];
$course = $_POST["course"];
$book = $_POST["book"];
$price = $_POST["price"];
$email = $_POST["email"];
$phone = $_POST["phone"];

?>
</head>

<body>
<?php
    echo $name;
    ?>
</body> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T19:53:00.017

马克托勒是正确的。您需要首先解析带有 PHP 扩展名的页面，以便解析 PHP 代码。但我实际上建议您将表单页面和表单处理分开。我建议如下：

myform.php：

```
<!DOCTYPE html>
<html>
<head></head>
<body>   
<div class="content">
    <form action="formprocessor.php" method="POST">
        <label>Name: </label>
        <input name="name" type="text" size="25" />

        <label>Course: </label>
        <input name="course" type="text" size="25" />

        <label>Book: </label>
        <input name="book" type="text" size="255" />

        <label>Price: </label>
        <input name="price" type="text" size="7" />

        <label>Email: </label>
        <input name="email" type="text" size="255" />

        <label>Phone #: </label>
        <input name="phone" type="text" size="12" />

        <input name="mySubmit" type="submit" value="Submit!" />
    </form>
</div>
</body>
</html> 
```

表单处理器.php：

```
<?php
$name = $_POST["name"];
$course = $_POST["course"];
$book = $_POST["book"];
$price = $_POST["price"];
$email = $_POST["email"];
$phone = $_POST["phone"];

echo $name;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T19:48:10.173

你的大问题是在你的第一句话

> 好的...我创建了一个 form.html 页面

要在您的服务器上运行 PHP 代码，您需要重命名文件 form.php，除非您在代码示例中合并了这两个文件......

# linux - 在 linux 内核构建期间删除 uneccesary 驱动程序

> ID：10057754
> 
> 赞同：0
> 
> 时间：2012-04-07T19:44:29.443
> 
> 标签：linux, ubuntu, makefile, kernel, device-driver

我想知道是否有人知道在 VB 上的 Ubuntu 10.4 中构建 2.6.32 内核时防止构建不需要的设备驱动程序的方法？我问的原因是我们必须为我的操作系统类做一个项目，其中涉及向内核添加一些系统调用，并且说明说在添加调用后，您需要重建内核（这需要大约 3 小时）和我知道它是因为 Ubuntu 不知道我需要哪些设备驱动程序，所以它会构建它们，所以我想知道是否有办法让它只构建我需要的驱动程序？如果是这样怎么办？或者如果有人知道一种能够在不重建整个内核的情况下测试添加的系统调用的方法（因为这确实是问题所在）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:05:48.110

您可以使用相当友好的菜单手动更改内核配置。只需键入`make nconfig`（或 menuconfig，或用于 gui 的 xconfig）。并删除您不需要的驱动程序。以下是一些可能对您有所帮助的链接：

1.  [http://www.linuxtopia.org/online_books/linux_kernel/kernel_configuration/ch05.html](http://www.linuxtopia.org/online_books/linux_kernel/kernel_configuration/ch05.html)
2.  [http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=1&chap=7](http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=1&chap=7)
3.  [http://kernel.xc.net/](http://kernel.xc.net/)

另外，你有多核处理器吗？如果是这样，你会像[这里](https://help.ubuntu.com/community/Kernel/Compile#Build_the_kernel_.28when_source_is_from_git_repository.2C_or_from_apt-get_source.29)一样使用它的优势吗？

**更新：**我记得一个更快的方法。您可以在模块中包装一个新的系统调用，从而避免重新编译整个内核。看看[这里](http://kerneltrap.org/node/4835)[那里](http://www.linuxtopia.org/online_books/Linux_Kernel_Module_Programming_Guide/x958.html)。_

不过，您可以在 Google 的帮助下轻松找到这里的所有内容。

# model-view-controller - ExtJS MVC 结构

> ID：10057755
> 
> 赞同：0
> 
> 时间：2012-04-07T19:44:30.250
> 
> 标签：model-view-controller, extjs, extjs-mvc

我不确定这对于 Stackoverflow 来说是一个可接受的问题，但我很难理解 ExtJS 的 MVC 结构所以我决定发布一个问题，主要是因为这部分来自官方 ExtJS 4.0 教程“每个应用程序的工作方式都一样，所以你只需要学习一次”，这就是我真正想要和打算做的——花更多的精力去理解 ExtJS 的工作原理，然后我很确定编写代码会变得更容易。我从 CodeIgniter 学到了 MVC moslty，理解“M”、“V”和“C”背后的逻辑相当简单。然而，在 ExtJS 中，情况并非如此，主要是因为我们有商店，这是最让我困惑的话题。在 MVC 模型中商店的逻辑是什么，它不应该是“M”的一部分吗？

谢谢

勒龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:31:04.453

我同意@Molecule Man 的评论以及 Sencha 线程中表达的意见。

不用担心命名。将商店视为 MVC 中模型的一部分。如果您有自定义通信层（和标准 JSON，AJAX 存储是不够的），则只有当您需要向存储类添加特殊逻辑时。商店并不是你的应用程序业务逻辑的一部分，所以它们不需要成为控制器的一部分。

# php - php domdocument 或 domxpath：如何提取 TR 并保存 html

> ID：10057756
> 
> 赞同：1
> 
> 时间：2012-04-07T19:44:36.013
> 
> 标签：php, domdocument, domxpath

我整天都在为此苦苦挣扎。

我在字符串中有一个 html 表。

```
<TABLE>
  <TBODY>
    <TR CLASS=dna1>
      <TD></TD><TD></TD><TD></TD><TD></TD>
    </TR>
    <TR CLASS=dna2>
      <TD></TD><TD></TD><TD></TD><TD></TD>
    </TR>
    repeat... 
```

里面`<TD>`有一些`<DIV`> 和`<SPAN>`我需要使用的。

我需要提取每个`<TR>`（两个类）并将*html*保存在一个数组中，其中每个`<TR>`都是一个数组元素。

创建节点列表数组很容易，但我如何获得实际的 html？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:53:19.333

如果必须将 HTML 保存为字符串，则有[DOMDocument::saveHTML](http://www.php.net/manual/en/domdocument.savehtml.php)

```
$elems = $xpath->query('//tr');

foreach ($elems as $elem) {
  $array[] = $doc->saveHTML($elem);
} 
```

*（请注意，参数 for`saveHTML`自 PHP 5.3.6 起可用。）*

不过，我建议自己保存节点，并在输出它们之前不久将它们转换为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T09:13:24.120

或者`DOMDocument`仅使用：

```
$dom = new DOMDocument();   
@$dom->loadHTML($html);

if($table=$dom->getElementsByTagName('table')->item(0)){

    //traverse the table and output every rows

    $rows=array();
    foreach ($table->childNodes as $row){

        $rows[]=$dom->saveHTML($row);

    }
} 
```

# prolog - Prolog - 递归列表构建

> ID：10057760
> 
> 赞同：5
> 
> 时间：2012-04-07T19:45:29.630
> 
> 标签：prolog

对于我正在编写的程序，我需要制作一个列表列表，其中成对的数字代表一个产品和两个给定数字的总和。

现在我有一个函数，我可以指定将列表添加到列表中的次数，稍后将使用完整的功能对其进行扩展。

这是我所拥有的：

```
s1(0, X).
s1(Q, X) :-
    N is Q - 1,
    multiply(2, 3, Y),
    A = Y ,
    add(2, 3, Z),
    B = Z,
    addToEnd([A], [B], X),
    s1(N,X).

multiply(A, B, C):-
    C is A * B.

add(A, B, C) :-
    C is A + B.

addToEnd([], L, L).
addToEnd([H|T], L2, [H|L3]) :-
    addToEnd(T, L2, L3). 
```

但是，`s1(2,X)`例如，当我运行时，我得到了`[6,5]`返回，然后没有别的，它只是挂起。当我跑步时`s1(0,X)`，我得到`true`，然后`false`当我击球时`;`

谁能帮我这个？我看不出我做错了什么，我觉得它应该工作！

为了澄清我觉得这应该如何工作：我打电话`s1(2,X).` `N = 1`，`[6,5]`添加到列表中`X([[6,5]])` `s1(1,X).` `N=0`，`[6,5]`添加到列表中`X ([[6,5],[6,5]])` `s1(0,X).` `X = [[6,5],[6,5]]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T23:55:33.843

所以，这里有很多话要说。首先，与大多数声明性语言一样，变量不能真正改变值。

这意味着`X = 1.`它将统一`1`为`X`您所期望的，但是如果您`X = 2.`在查询 () 中添加之后`X = 1, X = 2.`，Prolog 会说`false`. 背后的原因是你无法统一`1`，`2`而那`X`已经真正成为`1`，因此`X`无法统一`2`。

不过，这与 Haskell、Ocaml 等不同，您可以部分绑定变量，如`X = h(Y).`. 然后，您将能够进一步统一它`X = h(a(Z)).`，而您不能在前面提到的语言中（其中变量实际上只是值的别名）。

为什么他告诉我你想知道的一切？嗯，这是你的主要问题。您首先绑定`X`到`[6, 5]`，然后期望将其进一步绑定到其他一些东西。一旦一个变量被接地（即它本身不包含任何自由变量），你就不能再改变它的值了。

所以在这里你的递归不会做任何事情，但最终证明是`X`错误的。然而，这里并没有，因为您最终`addToEnd/3`每次都使用相同的参数调用（`[6]`和`[5]`）`[6, 5]`。

话虽如此，让我们看看我们如何改进您的代码。

首先，备注：

```
multiply(2, 3, Y),
A = Y ,
add(2, 3, Z),
B = Z,
addToEnd([A], [B], X), 
```

可以写

```
multiply(2, 3, Y),
add(2, 3, Z),
addToEnd([Y], [Z], X), 
```

没有任何信息丢失，因为您不使用`A`和`B`再次。

现在，让我们暂时忘记`addToEnd/3`，想想你想要什么。

如果你进入`s1(0, Q)`，你真的想`Q`保持自由吗？因为这就是你现在所说的。`Q`在这种情况下绑定到更有意义`[]`。另外，您很快就会看到，这将成为一个很好的递归基本案例。

```
s1(0, []). 
```

是说的捷径

```
s1(0, Q) :- Q = []. 
```

因为 Prolog 在子句头（之前的部分`:-`）中进行了统一。

然后，我会作弊一点，但只是为了保持清醒。你可以说，当你从`s1(4, Q)`到时，`s1(5, Q)`你期望 Q 持有一些微积分的多一个值。

在这里，我们可以声明如下：

```
s1(N, [SomeCalculus|Q]) :-
    PreviousN is N - 1,
    s1(PreviousN, Q). 
```

现在，我们只需要给一个值`SomeCalculus`：

```
s1(N, [SomeCalculus|Q]) :-
    PreviousN is N - 1,
    X is 2 * 3,
    Y is 2 + 3,
    SomeCalculus = [X, Y],
    s1(PreviousN, Q). 
```

或者，如果你正确地遵循，我们可以直接写：

```
s1(N, [[X, Y]|Q]) :-
    PreviousN is N - 1,
    X is 2 * 3,
    Y is 2 + 3,
    s1(PreviousN, Q). 
```

所以完整的程序是：

```
s1(0, []).
s1(N, [[X, Y]|Q]) :-
    PreviousN is N - 1,
    X is 2 * 3,
    Y is 2 + 3,
    s1(PreviousN, Q). 
```

现在，如果您对此进行测试，您可能会注意到当您按下`;`键时程序会像您的一样循环。那是因为 Prolog 认为第二个子句也可以适用`0` 。

所以让我们再次编辑程序：

```
s1(0, []).
s1(N, [[X, Y]|Q]) :-
    N > 0,
    PreviousN is N - 1,
    X is 2 * 3,
    Y is 2 + 3,
    s1(PreviousN, Q). 
```

现在一切都很好。

我希望这将帮助您更好地了解如何通过递归构建适当的谓词。我没有花太多时间纠正您的`addToEnd/3`谓词，因为我对变量的漫无边际应该已经告诉您很多关于它的错误之处。

# java - Android应用的静态分析

> ID：10057762
> 
> 赞同：2
> 
> 时间：2012-04-07T19:45:53.500
> 
> 标签：java, android, static-analysis

如果我想为 Android 应用程序开发静态分析，我应该使用哪些入口点？我有两个选择：

1.  使用`ActivityThread.main()`from `./frameworks/base/core/java/android/app/ActivityThread.java`（或`Looper.loop()`from `./frameworks/base/core/java/android/os/Looper.java`）作为条目
2.  使用`main()`仅包含调用`onCreate()`、`onPause()`、`onResume()`等的代码的组合。

有有效的选择吗？还有其他你认为更合适的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:03:53.383

第二种方法似乎更合理，但仍然不完整。如何对事件处理程序（通常`onXXX()`）建模是一个难题。应该提供一种形式来描述 GUI、事件驱动的程序。收集更多详细信息后，将更新答案。

# c# - 将边框添加为 ContentTemplate 的第一个子项

> ID：10057764
> 
> 赞同：0
> 
> 时间：2012-04-07T19:45:58.943
> 
> 标签：c#, wpf, xaml

我想知道是否可以在运行时将 Border 元素添加到 ControlTemplate 并使所有其他现有元素成为该边框的子元素。我知道如何创建一个新的 ControlTemplate 并向它的可视化树添加边框：

```
ControlTemplate dtemplate = column.DisplayTemplate;
ControlTemplate newTemplate = new ControlTemplate();
FrameworkElementFactory borderFactory = new FrameworkElementFactory(typeof(Border));
borderFactory.SetValue(CellContentPresenter.BorderThicknessProperty, new Thickness(2));
borderFactory.SetValue(CellContentPresenter.BorderBrushProperty, System.Windows.Media.Brushes.Black);
newTemplate.VisualTree = borderFactory;
column.DisplayTemplate = newTemplate; 
```

但是，我在这里特别想做的是将边框添加到现有模板的现有可视化树中，并使现有控件（如果有）成为边框的子项。例如，如果现有模板显示一个 TextBlock，我想添加一个边框并使 TextBlock 成为边框的子级。关于如何做到这一点的任何想法？

# ruby-on-rails - 使用 HTTParty 登录到 RESTful Rails 应用程序

> ID：10057770
> 
> 赞同：1
> 
> 时间：2012-04-07T19:46:35.107
> 
> 标签：ruby-on-rails, session, devise, signing, httparty

我有一个基于**Rails 3.2**、**Ruby 1.9**和**Devise 2**的带有干净 RESTful JSON API 的 Web 应用程序。

我想编写一个基于**HTTParty** Web 客户端的小脚本，以便经常执行一些操作（使用 crontab）。但是我们如何**登录**并保持会话打开（使用 HTTP HEADER 传递的会话 id，并且可能存储在 cookie 中）。

我真的没有这方面的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:59:01.837

根据截至 1 月份的邮件列表评论，可能不可能：

[https://groups.google.com/forum/#!searchin/httparty-gem/cookie/httparty-gem/H2me9zB1mEI/RNy3pdSzWnsJ](https://groups.google.com/forum/#!searchin/httparty-gem/cookie/httparty-gem/H2me9zB1mEI/RNy3pdSzWnsJ)

我个人用 HTTParty 开始了一个项目，然后转移到 RestClient，因为行为似乎更直接恕我直言。查看以下的“cookies”部分：

[https://github.com/archiloque/rest-client](https://github.com/archiloque/rest-client)

...可以满足您的需求。

贾斯汀

# restkit - RestKit：多个 RKClients / 更改 baseURL

> ID：10057773
> 
> 赞同：0
> 
> 时间：2012-04-07T19:47:08.190
> 
> 标签：restkit, base-url

我在 applicationDidFinishLaunching 的应用程序委托中初始化了 RKClient 的 sharedClient，它运行良好。我在大多数应用程序中使用此客户端目标 URL，但是在 1 点，在 1 个类（播放器）中，我需要从 gravatar.com 加载用户的头像。所以，我让 Player 类定义了它自己的 RKClient 并符合 RKRequestDelegate 协议。然后它通过这个新的 RKClient 实例发出请求，并将请求的委托设置为 self。问题是我从来没有收到回复；那是

```
- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response 
```

永远不会被调用。这是整个代码示例：

```
//  Player.m

#import "Player.h"

@implementation Player

# pragma mark - Accessor Synthesizers

@synthesize identifier = _identifier;
@synthesize name = _name;
@synthesize story = _story;
@synthesize emailHash = _emailHash;
@synthesize pointPercentage = _pointPercentage;
@synthesize hitPercentage = _hitPercentage;
@synthesize lastCups = _lastCups;
@synthesize shotCount = _shotCount;
@synthesize hitCount = _hitCount;
@synthesize wins = _wins;
@synthesize losses = _losses;
@synthesize gravatar = _gravatar;

# pragma mark - Instance Methods

- (void)getGravatar {
    RKClient *gClient = [RKClient clientWithBaseURL:[NSURL URLWithString:@"http://gravatar.com"]];
    NSString *path = [self gravatarLink];
    NSLog(@"Getting Gravatar With Link: http://gravatar.com%@", path);
    [gClient get:path delegate:self];
}

- (NSString *)description {
    return [NSString stringWithFormat:@"{Season: [id=%i, name=%@, story=%@ ]}", _identifier, _name, _story];
}

# pragma mark - RKRequest Delegate Methods

- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response {
    NSLog(@"Gravatar Back: %@", response.bodyAsString);
    self.gravatar = response.body;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"GravatarLoaded" object:self];
}

# pragma mark - Private Methods

- (NSString *)gravatarLink {
    NSString  *path;
    path = [NSString stringWithFormat:@"/avatar/%@?d=monsterid&r=x", _emailHash];
    if([[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale]==2)
        return [path stringByAppendingString:@"&s=200"];
    else
        return [path stringByAppendingString:@"&s=100"];
}

@end 
```

另外，我尝试更改 sharedClient 的基本 URL，并仅将 sharedClient 用于 gravatar 请求。但是每当我尝试更改 RKClient sharedClient 的 baseURL 属性时，都可以通过以下任何一种方式：

```
[[RKClient sharedClient] setBaseURL:[NSURL URLWithString:@"http://gravatar.com"]]; 
```

或者

```
[RKClient sharedClient].baseURL: [NSURL URLWithString:@"http://gravatar.com"]; 
```

我收到运行时错误：

```
2012-04-07 15:37:23.565 MLP[34403:fb03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSURL URLByAppendingResourcePath:queryParameters:]: unrecognized selector sent to instance 0x8bcdd50'
*** First throw call stack:
(0x1b7c022 0x1f58cd6 0x1b7dcbd 0x1ae2ed0 0x1ae2cb2 0x23eb5 0x24032 0x6ddb 0xdda2 0xc465c5 0xc467fa 0x14db85d 0x1b50936 0x1b503d7 0x1ab3790 0x1ab2d84 0x1ab2c9b 0x20407d8 0x204088a 0xbb5626 0x27cd 0x2735)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:28:33.313

我用了：

```
[[RKClient sharedClient] setBaseURL:[RKURL URLWithString:@"http://gravatar.com"]]; 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:57:19.587

你只需要去 Targets-> build Settings -> other Linker Flags

正如在 RestKit 教程中指定的那样，我们添加了一个名为“-ObjC-all_load”的标志，现在将其编辑为只显示“-ObjC”</p>

这一定适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:53:06.737

该`clientWithBaseURL:`方法需要一个`NSString`，而不是一个`NSURL`。尝试使用

```
[[RKClient sharedClient] setBaseURL:@"http://gravatar.com"]; 
```

# perl - 如何修改 Perl 脚本以根据版本移动不同目录中的包？

> ID：10057774
> 
> 赞同：-1
> 
> 时间：2012-04-07T19:15:44.853
> 
> 标签：perl

我有这个 Perl 脚本，它用于根据包版本对包进行排序：

```
#!/usr/bin/perl -w
#
# Compare versions of all *.rpm files against the
# latest packages installed (if installed)
#
# Usage:
# rpmver.pl
# This script looks for all *.rpm files.
#
use strict;
use RPM2;
my $rpm_db = RPM2->open_rpm_db();
for my $filename (<*.rpm>) {
    my $h = RPM2->open_package( $filename );
    # Ensure we compare against the newest
    # package of the given name.
    my ($installed) =
      sort { $b <=> $a } $rpm_db->find_by_name($h->name);
    if (not $installed) {
        printf "Package %s not installed.\n", $h->as_nvre;
    } else {
        my ($result) = ($h <=> $installed);
        if ($result < 0) {
            printf "Installed package %s newer than file %s\n",
            $installed->as_nvre,
            $h->as_nvre;
        } else {
            printf "File %s newer than installed package %s\n",
            $h->as_nvre,
            $installed->as_nvre;
        }
    }
 } 
```

我有一个带有 SRPM 的 Linux 存储库。我想将最新的软件包移动到不同的目录中；例如`latest_packages`。必须如何修改脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:35:25.330

首先，将所有最新的包名称存储在名为`%latest_package`;的哈希中。然后在检查所有包之后遍历散列的键并移动那些最新的包。

```
} else {
    printf "File %s newer than installed package %s\n", ...
    $latest_package{$h->name} = $installed->as_nvre;
    ...
} 
```

使用`File::Copy`模块的`move()`方法来移动文件。不要忘记将其视为任何其他 IO 系统调用（`die`如果它出错，包括`$!`错误文本变量的内容；或使用`autodie`）。

```
foreach my $name (sort keys %latest_package) {
    File::Copy::move($latest_package{$name}, $LATEST_PACKAGE_DIR) 
        || die "Could not move $latest_package{$name} to $LATEST_PACKAGE_DIR: $!);
} 
```

如果需要，使用`mkdir()`函数创建目录。

# list - 尝试使用 Applescript 获取列表并将其作为 CSV 写入文件

> ID：10057775
> 
> 赞同：0
> 
> 时间：2012-04-07T19:47:18.647
> 
> 标签：list, applescript, export-to-csv

***找到更新解决方案如果感兴趣，请参阅帖子底部***似乎很简单，并且对于大多数列表它都有效，但在某些时候它会搞砸。列表的数据来自 InDesign 中的资产，但这是我的最终结果，可以替换为测试 AS 中定义的列表。

```
tell application "Adobe InDesign CS5.5"
 set myagents to (name of properties of every asset of library "Agents.indl" as list)
end tell

set agentlist to ""
repeat with currentagent in myagents
 set agentlist to agentlist & currentagent & ","
end repeat

set x to count agentlist
set agentlist to characters 1 thru (x - 1) of agentlist as string
my write_agents(agentlist)

on write_agents(this_list)
set the agent_log to ("/Volumes/Agents/agents.txt" as POSIX file)
try
    set eof of agent_log to 0
    open for access file the agent_log with write permission
    write (this_list) to file the agent_log starting at eof

    --set read_data to (read the_file as list) as text
    close access file the agent_log
on error
    try
        close access file the agent_log
    end try
end try
end write_agents 
```

而不是我们可以使用顶部的 Indesign 指令进行测试，结果是相同的

```
set myagents to {"Lois Chase Johnson", "Tammy Newton", "Team Schmidt", "Tanya Kerr", "Terry Peterson", "Brenda Clark", "Deb Kahle", "Carol Dana", "Sheryl Burley & Cathy Reed", "Linda Ulin", "Dianna Erickson", "Dave Sharman", "Lori Tracey & Chuck Murphy", "Carolyn & Robert Dodds", "Jean Ryker", "Bryan Diehl", "Lois Scheck", "Nancy Rathke", "Patrick French", "Laura Halady", "Jennifer Felton", "Clarice Arakawa", "Holly Coburn", "Quint Boe", "Michaelle Barnard", "Paul Beck", "Kelly Johnson", "Doc Reiss", "Helga Filler", "Harriet Reyenga", "Thelma Durham", "Brooke Nelson", "Dick Pilling", "David Ramey", "Rebecca Jackson", "Tim Riley", "Pili Meyer", "Marc Thomsen", "Kathy Brown", "Jean Irvine", "Kathy Love", "Kimi Robertson", "Ed Sumpter", "Jo Cummins", "Kim Bower", "Mike Fuller", "Cathy Reed", "Joyce Underwood", "Daphne Eshom", "Kathy Brown", "Dave Ramey", "Mark DeRousie", "Tom Blore", "Paul Beck", "Kelly Johnson", "Alan Burwell", "Sheryl Burley", "Vivian Landvik", "Mark HcHugh", "Jim Newton", "Chuck Turner"} 
```

文本文件中有什么？

```
 Lois Chase Johnson,Tammy Newton,Team Schmidt,Tanya Kerr,Terry Peterson,Brenda Clark,Deb Kahle,Carol Dana,Sheryl Burley & Cathy Reed,Linda Ulin,Dianna Erickson,Dave Sharman,Lori Tracey & Chuck Murphy,Carolyn & Robert Dodds,Jean Ryker,Bryan Diehl,Lois Scheck,Nancy Rathke,Patrick French,Laura Halady,Jennifer Felton,Clarice Arakawa,Holly Coburn,Quint Boe,Michaelle Barnard,Paul Beck,Kelly Johnson,Doc Reiss,Helga Filler,Harriet Reyenga,Thelma Durham,Brooke Nelson,Dick Pilling,David Ramey,Rebecca Jackson,Tim Riley,Pili Meyer,Marc Thomsen,Kathy Brown,Jean Irvine,Kathy Love,Kimi Robertson,Ed Sumpter,Jo Cummins,Kim Bower,Mike Fuller,Cathy Reed,Joyce Underwood,Daphne Eshom,Kathy Brown,Dave Ramey,Mark DeRousie,Tom Blore,Paul Beck,Kelly Johnson,Alan Burwell,Sheryl Burley,Vivian Landvik,Mark HcHugh,Jim Newton,Chuck Turner �C�o�b�u�r�nutxt����Q�u�i�n�t� �B�o�eutxt���"�M�i�c�h�a�e�l�l�e� �B�a�r�n�a�r�dutxt����P�a�u�l� �B�e�c�kutxt����K�e�l�l�y� �J�o�h�n�s�o�nutxt����D�o�c� �R�e�i�s�sutxt����H�e�l�g�a� �F�i�l�l�e�rutxt����H�a�r�r�i�e�t� �R�e�y�e�n�g�autxt����T�h�e�l�m�a� �D�u�r�h�a�mutxt����B�r�o�o�k�e� �N�e�l�s�o�nutxt����D�i�c�k� �P�i�l�l�i�n�gutxt����D�a�v�i�d� �R�a�m�e�yutxt����R�e�b�e�c�c�a� �J�a�c�k�s�o�nutxt����T�i�m� �R�i�l�e�yutxt����P�i�l�i� �M�e�y�e�rutxt����M�a�r�c� �T�h�o�m�s�e�nutxt����K�a�t�h�y� �B�r�o�w�nutxt����J�e�a�n� �I�r�v�i�n�eutxt����K�a�t�h�y� �L�o�v�eutxt����K�i�m�i� �R�o�b�e�r�t�s�o�nutxt����E�d� �S�u�m�p�t�e�rutxt����J�o� �C�u�m�m�i�n�sutxt����K�i�m� �B�o�w�e�rutxt����M�i�k�e� �F�u�l�l�e�rutxt����C�a�t�h�y� �R�e�e�dutxt����J�o�y�c�e� �U�n�d�e�r�w�o�o�dutxt����D�a�p�h�n�e� �E�s�h�o�mutxt����K�a�t�h�y� �B�r�o�w�nutxt����D�a�v�e� �R�a�m�e�yutxt����M�a�r�k� �D�e�R�o�u�s�i�eutxt����T�o�m� �B�l�o�r�eutxt����P�a�u�l� �B�e�c�kutxt����K�e�l�l�y� �J�o�h�n�s�o�nutxt����A�l�a�n� �B�u�r�w�e�l�lutxt����S�h�e�r�y�l� �B�u�r�l�e�yutxt����V�i�v�i�a�n� �L�a�n�d�v�i�kutxt����M�a�r�k� �H�c�H�u�g�hutxt����J�i�m� �N�e�w�t�o�nutxt����C�h�u�c�k� �T�u�r�n�e�rutxt���� 
```

所以它运行了一段时间，但最后没有逗号，而是无法使用的 gobblygook。我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:29:57.870

不知道我到底改变了什么，但它现在可以工作......

```
tell application "Adobe InDesign CS5.5"
set myagents to (name of properties of every asset of library "Agents.indl" as list)
end tell

set agentlist to ""
set myagents to my simple_sort(myagents)
repeat with currentagent in myagents
set agentlist to agentlist & (currentagent) & ","
end repeat
set x to count agentlist
set agentlist to characters 1 thru (x - 1) of agentlist as string
my write_agents(agentlist)

on write_agents(this_list)
    set the agent_log to ("/Volumes/RealEstate/agents.txt" as POSIX file)
    try
        set eof of agent_log to 0
        open for access file the agent_log with write permission
    write (this_list) to file the agent_log starting at eof
    close access file the agent_log
on error
    try
        close access file the agent_log
    end try
end try
end write_agents

on simple_sort(my_list)
    set the index_list to {}
set the sorted_list to {}
repeat (the number of items in my_list) times
    set the low_item to ""
    repeat with i from 1 to (number of items in my_list)
        if i is not in the index_list then
            set this_item to item i of my_list as text
            if the low_item is "" then
                set the low_item to this_item
                set the low_item_index to i
            else if this_item comes before the low_item then
                set the low_item to this_item
                set the low_item_index to i
            end if
        end if
    end repeat
    set the end of sorted_list to the low_item
    set the end of the index_list to the low_item_index
end repeat
return the sorted_list
end simple_sort 
```

# math - 从偏航、俯仰和向上矢量计算滚动

> ID：10057776
> 
> 赞同：0
> 
> 时间：2012-04-07T19:47:23.653
> 
> 标签：math, opengl, vector, 3d

如果我有相机的偏航、俯仰和向上矢量（在我的情况下总是 [0,1,0]），那么计算相应滚动的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:14:38.080

当相机的向上矢量为 (0,1,0) 时，效果是将其偏航锁定为 0 度。

# java - 更改 LookAndFeel 的 JButton 的颜色

> ID：10057778
> 
> 赞同：0
> 
> 时间：2012-04-07T19:47:46.913
> 
> 标签：java, swing, look-and-feel

我正在开发一个 Java 应用程序，并且正在设置 LookAndFeel。除了 JButtons 的默认背景颜色之外，我喜欢 LAF 的所有内容。在我设置外观和感觉之后设置它（和其他属性）的最佳方法是什么？我不想创建自己的外观和感觉来扩展它......希望能够在我设置 LAF 的线路之后改变它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:51:54.163

不久之后自己找到了它。

```
UIManager.getDefaults().put("Button.background",new Color(0xFFFFFF)); 
```

# php - 选择所有值并同时汇总来自不同表的字段值

> ID：10057783
> 
> 赞同：0
> 
> 时间：2012-04-07T19:48:09.507
> 
> 标签：php, mysql

我有以下查询，没有`,SUM(amount) AS total`它可以正常工作。现在的问题是我想从我的表中选择所有值，`vouchers`同时想`amount`从我的另一个表中获取字段的总和值`details`。

```
SELECT *,SUM(amount) AS total FROM vouchers 
LEFT JOIN details on vouchers.voucher_no = details.voucher_no 
 LEFT JOIN   accounts on accounts.code = vouchers.account_code 
 WHERE (voucher_type='1' AND t_code=$code) 
```

我尝试了上面的查询，但它显示了以下错误。（请检查链接）

[http://i44.tinypic.com/bdaq.png](http://i44.tinypic.com/bdaq.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:52:45.647

将`details`总和放入子查询中，您可以针对该子查询`LEFT JOIN`. 您的原件缺少汇总的任何`GROUP BY`条款。`SUM()`

```
SELECT
  vouchers.*,
  /* from the subquery... */
  detailssum.total
FROM
  vouchers
  LEFT JOIN (
    /* Subquery gets total per voucher_no to join against vouchers */
    SELECT voucher_no, t_code, SUM(amount) as total FROM details GROUP BY voucher_no
  ) detailssum ON vouchers.voucher_no = detailssum.voucher_no
  LEFT JOIN accounts on accounts.code = vouchers.account_code 
WHERE (voucher_type='1' AND t_code=$code) 
```

（*我们假设`$code`已经包含一个经过清理和边界检查的值*）

# objective-c - 从 CoreData 检索 integer16 时值不正确

> ID：10057785
> 
> 赞同：1
> 
> 时间：2012-04-07T19:48:13.483
> 
> 标签：objective-c, cocoa-touch, core-data, integer

`phoneNo`我的核心数据模型中有一个名为 an 的属性，`integer16`我当然需要保存和加载该值。

所以我尝试将用户输入的数字保存到文本字段中：

```
[myObject setValue:[NSNumber numberWithInteger:[textField.text integerValue]] forKey:@"mobileNo"]; 
```

然后我尝试像这样显示值：

```
label.text = [myObject.mobileNo stringValue]; 
```

假设我输入`123456789`; 它没有显示，而是显示`-13035`. 我不确定我是否保存或加载错误，或两者兼而有之。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:59:56.903

在您的数据模型（yourapp.xcdatamodeld）中，您的属性 phoneNo 的类型不应该是 16 的整数（从 -32.768 到 +32.768），这还不够，它应该是 integer32（-2.147.483.647 到 +2.147.483.647）或integer64 如果该人键入国家标识符，如 (+33) 1 23456789。

# c# - 如何通过以下方式制作 Resharper 格式的换行三元运算符

> ID：10057786
> 
> 赞同：9
> 
> 时间：2012-04-07T19:48:22.263
> 
> 标签：c#, resharper, ternary-operator

我真的希望 Resharper 以这种方式格式化我的换行三元组

```
return
    navigator.IsTerminating ?
    navigator.Context :
    navigator.Context.GetSimulatableRelative(new Navigator(navigator)); 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T20:22:33.373

我不认为有一个开箱即用的方式来做到这一点。我知道影响 R# 格式代码的唯一方法是通过以下设置：

Resharper --> 选项... --> 语言 --> C# --> 格式化样式

![Resharper 选项截图](../Images/0e6dccea774d779ee4be307ab516be81.png)

但是，这不允许您编写自己的自定义格式规则。

如果您觉得有挑战，那么您可以编写一个插件。有一些文档和 SDK：

*   [开发者文档](http://confluence.jetbrains.net/display/ReSharper/ReSharper+6+Plugin+Development)
*   [SDK](http://www.jetbrains.com/resharper/download/)
*   [一个视频教程](http://blogs.jetbrains.com/dotnet/2012/01/introducing-resharper-61-sdk/)

# objective-c - 从浮点数中获取小数部分

> ID：10057788
> 
> 赞同：19
> 
> 时间：2012-04-07T19:48:36.367
> 
> 标签：objective-c, xcode, floating-point

我需要从浮点数中取出小数部分，例如：

浮动 x = 18.30；

我需要一种在另一个浮点数中获得“.30”的方法。所以我将有一个等于 18.30 的浮点数，另一个等于 0.30

有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-07T19:53:59.047

我不确定是否有一个功能完全符合您的要求，但您可以使用它：

```
x - floor(x) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-11T14:25:31.597

上面接受的答案 (x - floor(x)) 适用于正数，但不适用于负数。改用 trunc() ：

```
x - trunc(x) 
```

但是如果你问我，fmod() 解决方案是可以使用的：

```
fmod(x, 1) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-07T20:05:39.870

该[`modf()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/modf.3.html)函数比 更直接地执行此操作`fmodf()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T20:05:21.967

有一系列 fmod 函数，例如 fmod(18.30, 1.0)、fmodf(18.30, 1.0) 等

```
#include <stdio.h>
#include <math.h>

int main (int argc, const char * argv[]) {
    // insert code here...
    printf("%f\n", fmod(18.30, 1.0));
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-15T06:48:36.397

我发现使用 Objective-C 变量类型的最佳方法如下：

```
CGFloat floatingPointNumber = 18.30;
NSInteger integerNumber = floatingPointNumber;
CGFloat floatingPointNumberWithoutTheInteger = floatingPointNumber - integerNumber; 
```

以下是执行时的结果：

[![在此处输入图像描述](../Images/232bb136ba43b25b817238ef71e1d183.png)](https://i.stack.imgur.com/t0NLh.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-07T21:08:33.993

注意：按照其他答案中的建议使用 modf 或 fmod 。

但是不要期望与 atof("0.30") 具有完全相同的数字 - 正如您的 equals 请求所建议的那样。

事实上，atof("18.30") 是最接近 atof("18.0") + atof("0.30") 的浮点数，但是这个操作并不精确，它有一个舍入误差，任何 atof( "0.30") 整数 > 0。

所以当你减去整数部分时，没有理由找到 atof("0.30") 回来，你只会找到 atof("0.30") 附近的东西。

以 Squeak/Pharo Smalltalk 表示（此处使用双精度）

```
(1 to: 100) count: [:i | 0.3 + i = (3/10+i) asFloat]. 
```

给

```
-> 100 
```

但：

```
(1 to: 100) count: [:i | (3/10+i) asFloat - i = 0.3]. 
```

给

```
-> 0 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-22T07:56:13.647

x=3.5

y=parseInt(3.5)

分数部分 =( xy );

# mysql - 计算查询中的分钟数

> ID：10057789
> 
> 赞同：3
> 
> 时间：2012-04-07T19:48:50.660
> 
> 标签：mysql, sql, count, sum

我正在寻找一种方法来计算我团队中每个球员（或这里只有一个球员）的上场时间。简化的数据库表如下：

```
matchid    action    minute    player
-------------------------------------
1          subbedin  30        Pele 
2          starter             Pele
2          subbedout 50        Pele
3          subbedin  70        Pele
3          red       80        Pele
4          starter             Pele 
```

我现在对其他统计数据的查询：

```
$query = mysql_query("SELECT *,
  SUM(CASE WHEN action = 'starter' OR action = 'subbedin' THEN 1 ELSE 0 END) AS games,
  SUM(CASE WHEN action = 'goal' OR action = 'pengoal' THEN 1 ELSE 0 END) AS goals,
  SUM(CASE WHEN action = 'yellow' THEN 1 ELSE 0 END) AS yellows,
  SUM(CASE WHEN action = 'red' THEN 1 ELSE 0 END) AS reds,
  // MINS GOES HERE
FROM league2012
GROUP BY player"); 
```

对于每个 matchid，基本计算是

```
( 90 OR subbedout OR red ) - ( starter OR subbedin ) 
```

例如在比赛 2

```
subbedout (50) - starter (0) = 50 
```

最后，表格应如下所示：

```
player    minutes    goals, cards, etc.
---------------------------------------
Pele      210        ... 
```

在过去的一个小时里，我一直在阅读教程，似乎无法弄清楚如何去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T20:17:42.783

```
 sum
    (
      case action
        when 'subbedin'  then 90 - minute
        when 'starter'   then 90
        when 'subbedout' then minute - 90
        when 'red'       then minute - 90
      end
    ) as minutes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:16:01.677

我会首先计算每名球员在每场比赛中的出场时间，然后将它们相加得到每名球员的总数。要将获得的结果与您正在计算的其他统计数据结合起来，我认为没有其他方法只能以相同的方式进行其他统计数据，即首先是每个球员和比赛，然后是每个球员。这就是我的意思：

```
SELECT
  player,
  SUM(games) AS games,
  SUM(goals) AS goals,
  SUM(yellows) AS yellows,
  SUM(reds) AS reds,
  SUM(minutesplayed) AS minutesplayed
FROM (
  SELECT
    player,
    matchid,
    SUM(CASE WHEN action IN ('starter', 'subbedin') THEN 1 ELSE 0 END) AS games,
    SUM(CASE WHEN action IN ('goal', 'pengoal') THEN 1 ELSE 0 END) AS goals,
    SUM(CASE WHEN action = 'yellow' THEN 1 ELSE 0 END) AS yellows,
    SUM(CASE WHEN action = 'red' THEN 1 ELSE 0 END) AS reds,
    IFNULL(SUM(CASE WHEN action IN ('subbedout', 'red') THEN minute END), 90)
    - IFNULL(SUM(CASE WHEN action = ('subbedin') THEN minute END), 0) AS minutesplayed
  FROM league2012
  GROUP BY
    player,
    matchid
) s
GROUP BY
  player 
```

# java - 完成操作后关闭一个摆动对话框

> ID：10057791
> 
> 赞同：0
> 
> 时间：2012-04-07T19:49:02.733
> 
> 标签：java, swing

我有一个 jdialog 并希望在确认后关闭它存储文本框的数据......现在我没有问题存储框中的数据但是，

操作后如何关闭此对话框？？？

看起来很简单，但我还没有找到解决方案。

```
public class test extends JDialog {

    private final JPanel contentPanel = new JPanel();

    public test() {
        setBounds(100, 100, 450, 300);
        getContentPane().setLayout(new BorderLayout());
        contentPanel.setLayout(new FlowLayout());
        contentPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
        getContentPane().add(contentPanel, BorderLayout.CENTER);
        {
            JPanel buttonPane = new JPanel();
            buttonPane.setLayout(new FlowLayout(FlowLayout.RIGHT));
            getContentPane().add(buttonPane, BorderLayout.SOUTH);
            {
                JButton okButton = new JButton("OK");
                okButton.setActionCommand("OK");
                buttonPane.add(okButton);
                getRootPane().setDefaultButton(okButton);
                             okButton.addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(java.awt.event.ActionEvent e) {
                        try{

                            int x=Integer.parseInt(textField.getText());
                            saver.saveN(x);

                        }catch(Exception ecc){
                            JOptionPane.showMessageDialog(Test.this,"error");
                        }
                    }
                });
            }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:51:22.637

使用[`Window#dispose`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#dispose%28%29)或[`Window#setVisible(false)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setVisible%28boolean%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:02:27.220

*   如果您只使用一次此对话框，则可以使用相同`dispose()`的`setVisible(false)`

*   如果您多次调用此方法，则可以使用`HIDE_ON_CLOSE` or `setVisible(false)`，[最好是 re_use this JDialog](https://stackoverflow.com/questions/6309407/remove-top-level-container-on-runtime)

编辑

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.Timer;
import javax.swing.border.EmptyBorder;
public class Test {

    private static final long serialVersionUID = 1L;
    private JDialog dialog = new JDialog();
    private final JPanel contentPanel = new JPanel();
    private Timer timer1;
    private JButton killkButton = new JButton("Kill JDialog");

    public Test() {
        contentPanel.setLayout(new FlowLayout());
        contentPanel.setBorder(new EmptyBorder(5, 5, 5, 5));

        JPanel buttonPane = new JPanel();
        JButton okButton = new JButton("OK");
        okButton.setActionCommand("OK");
        buttonPane.add(okButton);

        killkButton.setActionCommand("Kill JDialog");
        buttonPane.add(killkButton);

        dialog.setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
        dialog.addWindowListener(new WindowListener() {

            public void windowOpened(WindowEvent e) {
            }

            public void windowClosing(WindowEvent e) {
                startTimer();
            }

            public void windowClosed(WindowEvent e) {
            }

            public void windowIconified(WindowEvent e) {
            }

            public void windowDeiconified(WindowEvent e) {
            }

            public void windowActivated(WindowEvent e) {
            }

            public void windowDeactivated(WindowEvent e) {
            }
        });
        dialog.setLayout(new BorderLayout());
        dialog.getRootPane().setDefaultButton(okButton);
        dialog.add(buttonPane, BorderLayout.SOUTH);
        dialog.add(contentPanel, BorderLayout.CENTER);
        dialog.pack();
        dialog.setLocation(100, 100);
        dialog.setVisible(true);
        setKeyBindings();
    }

    private void setKeyBindings() {
        killkButton.getInputMap(
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(
                KeyStroke.getKeyStroke("ENTER"), "clickENTER");
        killkButton.getActionMap().put("clickENTER", new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
    }

    private void startTimer() {
        timer1 = new Timer(1000, new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        dialog.setVisible(true);
                    }
                });
            }
        });
        timer1.setDelay(500);
        timer1.setRepeats(false);
        timer1.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Test test = new Test();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:59:56.147

如果您打算再次使用 jDialog，并且在关闭它时所有字段值和组件状态保持不变，请使用 setVisible(false)。

在任何其他情况下，调用 dispose()，以避免 jDialog 在不再需要时保留在内存中。

# dynamics-crm - CRM 2011 汇总查询：如何使用运算符得出百分比？

> ID：10057792
> 
> 赞同：1
> 
> 时间：2012-04-07T19:49:07.797
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在尝试理清如何使用汇总查询和目标。我想要做的是有一个产生百分比的汇总查询：

（状态代码为 X 的服务活动的数量）/（服务活动的总数量）

然后我希望“目标”跟踪这个百分比。对这个目标来说，重要的不是总数或总和，而是比例。

这是可能的，还是只能将汇总查询和目标与原始计数和聚合一起使用（例如状态 X 的约会数，或时间段 X 的收入总和）？

# android - 在其他计算机中导入现有项目给我错误

> ID：10057793
> 
> 赞同：0
> 
> 时间：2012-04-07T19:49:13.623
> 
> 标签：android, eclipse, import

我用了这个方法。

File->Import->General->Existing Projects into Workspace，下一步选择根目录：/path/to/project Projects->全选取消选中“Copy projects into workspace”和“Add project to working sets”完成

我在所有课程中都遇到了错误。在`onCreate`方法中，`setContentView(R.layout.main);`
错误是：

> R 无法解析为变量，并且 main 无法解析或不是字段。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:00:16.137

尝试项目 -> 清理

也许它可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:38:59.863

SDK可能尚未生成R类。当您打开任何布局（xml 文件）时，更改它（添加空格就足够了；））并保存它，R 类将使用布局中所有元素的 id 重新生成。在移动项目或从 svn 签出时，这是常见的问题。当您更改布局文件时，将强制重新生成 /gen 文件夹中的文件。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:11:53.443

好吧，我让它工作。如果有人遇到此问题，请使用记事本打开您的项目并复制它。然后在 Eclipse 中创建一个新项目并过去所有信息。

不知道为什么，但这是它唯一的工作方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T04:21:06.507

1.  如果需要，更新 SDK 位置。有时，当您将项目从一台计算机转移到另一台计算机时，您需要更新 SDK 位置。打开项目属性->“Java 构建路径”并搜索错误，尤其是在库选项卡中。确保所有资源都存在。
2.  清理项目+重建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T04:53:26.980

右键单击项目，然后选择“android 工具”，“修复项目属性”。

然后清理项目。如果尚未恢复，请通过重新排序来配置构建路径来重复这些步骤。

希望这可以帮助你..！:)

# javascript - 如何通过jquery在所有链接中添加功能？

> ID：10057794
> 
> 赞同：0
> 
> 时间：2012-04-07T19:49:16.660
> 
> 标签：javascript, jquery, xmlhttprequest

我正在使用以下功能来加载页面。我有很多链接，无法添加到所有链接。

```
function LoadPage(url) {
  $("#canvas").load(url);
} 
```

我想要一个函数，它将获取所有`<a>`标签`href`值并将此函数添加到所有链接，如下所示：

```
var oP  = document.getElementsByTagName("a"),
    ctr = 0
;

while(ctr < oP.length) {
  var oldHref = document.getElementsByTagName("a")[ctr].href;

  document.getElementsByTagName("a")[ctr].href = "javascript:loadPage('" + oldHref + "');";
  ctr++;
} 
```

我想添加到所有链接，但不添加到“INDEX.HTML”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:52:45.627

像这样的东西：

```
// select all links
$('a')
  // check that the pathname component of href doesn't end with "/index.html"
  .filter(function() {
    return !this.href.pathname.match( /\/index\.html$/ );
    // // or you may want to filter out "/index.html" AND "/", e.g.:
    // return !this.href.pathname.match( /\/(index\.html)?$/i )
  }) 
  // add a click event handler that calls LoadPage and prevents following the link
  .click(function(e) {
    e.preventDefault();
    LoadPage(this.href);
  }); 
```

由于您正在动态加载页面的各个部分，因此您需要设置事件委托。具体如何执行此操作取决于您使用的 jQuery 版本，但您将使用[`.on()`](http://api.jquery.com/on/)(jQuery 1.7+) 或[`.delegate()`](http://api.jquery.com/delegate/)(jQuery 1.7 之前的) 函数。该`.on()`示例如下所示：

```
$('body').on('click', 'a', function(e) {
    if(!this.href.pathname.match( /\/index\.html$/ )) {
        e.preventDefault();
        LoadPage(this.href);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:18:47.827

在回答您关于在新加载页面上转换链接的问题时，为回调函数[`$.load()`获取第二个参数](http://api.jquery.com/load/#callback-function)，您可以使用该回调函数将@AnthonyGrist 之类的函数应用于新内容，例如：

```
function loadPage( url ) {
  // add a callback to $.load() to be executed for the next content
  $("#canvas").load( url, function() { convertLinks( this ); } );
}

function convertLinks( context ) {
  // select all links in the given context
  $( 'a', context )
    // check that the pathname component of href doesn't end with "/index.html"
    .filter(function() {
      return !this.href.pathname.match( /\/index\.html$/ );
      // // or you may want to filter out "/index.html" AND "/", e.g.:
      // return !this.href.pathname.match( /\/(index\.html)?$/i )
    }) 
    // add a click event handler that calls LoadPage and prevents following the link
    .click(function(e) {
      e.preventDefault();
      loadPage( this.href );
    })
  ;
}

// call convertLinks on the whole document on initial page load
$( function() { convertLinks( document ); } ); 
```

使用`.on()`也是一个合理的解决方案。

# c# - 如何在 C# 中从 USB 闪存驱动器获取 VID/PID？

> ID：10057800
> 
> 赞同：7
> 
> 时间：2012-04-07T19:49:52.153
> 
> 标签：c#, usb, pid, usb-flash-drive

我需要检查所有驱动器，看看是否有任何 VID/PID 与特定的匹配，如果匹配，我需要获取该闪存驱动器的驱动器号。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:33:21.413

WMI should be able to handle this...

You will have to add a Reference to the System.Management dll and you will need to have the: "using System.Management;" line... See Link At Bottom for Screenshots, more thorough explanation...

```
using System.Management;
// Get all the disk drives

ManagementObjectSearcher mosDisks = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");

// Loop through each object (disk) retrieved by WMI

foreach (ManagementObject moDisk in mosDisks.Get())

{

    // Add the HDD to the list (use the Model field as the item's caption)

    cmbHdd.Items.Add(moDisk["Model"].ToString());

}

private void cmbHdd_SelectedIndexChanged(object sender, EventArgs e)

{

// Get all the disk drives from WMI that match the Model name selected in the ComboBox

ManagementObjectSearcher mosDisks = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive WHERE Model = '" + cmbHdd.SelectedItem + "'");

// Loop through the drives retrieved, although it should normally be only one loop going on here

foreach (ManagementObject moDisk in mosDisks.Get())

{

    // Set all the fields to the appropriate values

    lblType.Text = "Type: " + moDisk["MediaType"].ToString();

    lblModel.Text = "Model: " + moDisk["Model"].ToString();

    lblSerial.Text = "Serial: " + moDisk["SerialNumber"].ToString();

    lblInterface.Text = "Interface: " + moDisk["InterfaceType"].ToString();

    // The capacity in gigabytes is easily calculated 

    lblCapacity.Text = "Capacity: " + moDisk["Size"].ToString() + " bytes (" + Math.Round(((((double)Convert.ToDouble(moDisk["Size"]) / 1024) / 1024) / 1024), 2) + " GB)";

    lblPartitions.Text = "Partitions: " + moDisk["Partitions"].ToString();

    lblSignature.Text = "Signature: " + moDisk["Signature"].ToString();

    lblFirmware.Text = "Firmware: " + moDisk["FirmwareRevision"].ToString();

    lblCylinders.Text = "Cylinders: " + moDisk["TotalCylinders"].ToString();

    lblSectors.Text = "Sectors: " + moDisk["TotalSectors"].ToString();

    lblHeads.Text = "Heads: " + moDisk["TotalHeads"].ToString();

    lblTracks.Text = "Tracks: " + moDisk["TotalTracks"].ToString();

    lblBytesPerSect.Text = "Bytes per Sector: " + moDisk["BytesPerSector"].ToString();

    lblSectorsPerTrack.Text = "Sectors per Track: " + moDisk["SectorsPerTrack"].ToString();

    lblTracksPerCyl.Text = "Tracks per Cylinder: " + moDisk["TracksPerCylinder"].ToString();

    }

} 
```

From [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132%28v=vs.85%29.aspx) the win32 Class for CIM_DiskDrive has the following parameters:

*It looks as if "DeviceID" is what you want...

```
class Win32_DiskDrive : CIM_DiskDrive
{
  uint16   Availability;
  uint32   BytesPerSector;
  uint16   Capabilities[];
  string   CapabilityDescriptions[];
  string   Caption;
  string   CompressionMethod;
  uint32   ConfigManagerErrorCode;
  boolean  ConfigManagerUserConfig;
  string   CreationClassName;
  uint64   DefaultBlockSize;
  string   Description;
  string   DeviceID;
  boolean  ErrorCleared;
  string   ErrorDescription;
  string   ErrorMethodology;
  string   FirmwareRevision;
  uint32   Index;
  datetime InstallDate;
  string   InterfaceType;
  uint32   LastErrorCode;
  string   Manufacturer;
  uint64   MaxBlockSize;
  uint64   MaxMediaSize;
  boolean  MediaLoaded;
  string   MediaType;
  uint64   MinBlockSize;
  string   Model;
  string   Name;
  boolean  NeedsCleaning;
  uint32   NumberOfMediaSupported;
  uint32   Partitions;
  string   PNPDeviceID;
  uint16   PowerManagementCapabilities[];
  boolean  PowerManagementSupported;
  uint32   SCSIBus;
  uint16   SCSILogicalUnit;
  uint16   SCSIPort;
  uint16   SCSITargetId;
  uint32   SectorsPerTrack;
  string   SerialNumber;
  uint32   Signature;
  uint64   Size;
  string   Status;
  uint16   StatusInfo;
  string   SystemCreationClassName;
  string   SystemName;
  uint64   TotalCylinders;
  uint32   TotalHeads;
  uint64   TotalSectors;
  uint64   TotalTracks;
  uint32   TracksPerCylinder;
}; 
```

Top Portion oF Code Taken From:

[http://www.geekpedia.com/tutorial233_Getting-Disk-Drive-Information-using-WMI-and-Csharp.html](http://www.geekpedia.com/tutorial233_Getting-Disk-Drive-Information-using-WMI-and-Csharp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:58:23.093

```
public static bool GetDriveVidPid(string szDriveName, ref ushort wVID, ref ushort wPID)
{
   bool bResult = false;
   string szSerialNumberDevice = null;

   ManagementObject oLogicalDisk = new ManagementObject("Win32_LogicalDisk.DeviceID='" + szDriveName.TrimEnd('\\') + "'");
   foreach(ManagementObject oDiskPartition in oLogicalDisk.GetRelated("Win32_DiskPartition"))
   {
      foreach(ManagementObject oDiskDrive in oDiskPartition.GetRelated("Win32_DiskDrive"))
      {
         string szPNPDeviceID = oDiskDrive["PNPDeviceID"].ToString();
         if(!szPNPDeviceID.StartsWith("USBSTOR"))
            throw new Exception(szDriveName + " ist kein USB-Laufwerk.");

         string[] aszToken = szPNPDeviceID.Split(new char[] { '\\', '&' });
         szSerialNumberDevice = aszToken[aszToken.Length - 2];
      }
   }

   if(null != szSerialNumberDevice)
   {
      ManagementObjectSearcher oSearcher = new ManagementObjectSearcher(@"root\CIMV2", "Select * from Win32_USBHub");
      foreach(ManagementObject oResult in oSearcher.Get())
      {
         object oValue = oResult["DeviceID"];
         if(oValue == null)
            continue;

         string szDeviceID = oValue.ToString();
         string[] aszToken = szDeviceID.Split(new char[] { '\\' });
         if(szSerialNumberDevice != aszToken[aszToken.Length - 1])
            continue;

         int nTemp = szDeviceID.IndexOf(@"VID_");
         if(0 > nTemp)
            continue;

         nTemp += 4;
         wVID = ushort.Parse(szDeviceID.Substring(nTemp, 4), System.Globalization.NumberStyles.AllowHexSpecifier);

         nTemp += 4;
         nTemp = szDeviceID.IndexOf(@"PID_", nTemp);
         if(0 > nTemp)
            continue;

         nTemp += 4;
         wPID = ushort.Parse(szDeviceID.Substring(nTemp, 4), System.Globalization.NumberStyles.AllowHexSpecifier);

         bResult = true;
         break;
      }
   }

   return bResult;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T21:41:26.057

如果您只需要检查设备何时连接，则问题要简单得多。您需要检查[`DBT_DEVICEARRIVAL`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363205%28v=vs.85%29.aspx)事件。如果您正在创建一个 Windows 窗体应用程序，这可以通过实现[`IMessageFilter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.aspx)接口并将其传递给[`AddMessageFiler`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.addmessagefilter.aspx). `Application`如果您不使用 Forms 应用程序，则需要从[`NativeWindow`](http://msdn.microsoft.com/en-us/library/system.windows.forms.nativewindow.aspx)WndProc 派生一个类并覆盖它。请记住调用[CreateHandle](http://msdn.microsoft.com/en-us/library/system.windows.forms.nativewindow.createhandle.aspx)，以便将其添加到 Windows 消息队列中。

一旦你有了接收的方式，`DBT_DEVICEARRIVAL`你就需要把它解析出来。（以下不是在IDE中编写的，所以没有经过测试）

```
// Constants from from Dbt.h
const int WM_DEVICECHANGE = 0x219;
const int DBT_DEVICEARRIVAL = 0x8000; 
const uint DBT_DEVTYP_DEVICEINTERFACE = 0x05;
const Guid GUID_DEVINTERFACE_USB_DEVICE = new Guid("A5DCBF10-6530-11D2-901F-00C04FB951ED");

bool PreFilterMessage(ref Message m)
{
    if(m.Msg == case WM_DEVICECHANGE && m.WParam == DBT_DEVICEARRIVAL)
        var broadcast = (DEV_BROADCAST_HDR)Marshal.PtrToStructure(pnt, typeof(DEV_BROADCAST_HDR));
        if(broadcast.dbch_DeviceType == DBT_DEVTYP_DEVICEINTERFACE)
        {
            var devInterface = (DEV_BROADCAST_DEVICEINTERFACE)Marshal.PtrToStructure(pnt, typeof(DEV_BROADCAST_DEVICEINTERFACE));
            if(devInterface.dbcc_classguid = GUID_DEVINTERFACE_USB_DEVICE)
            {
                // devInterface.dbcc_name will contain the VID and PID for example:
                // \\?\USB#Vid_067b&Pid_2517#6&12115ad4&2&1#{GUID}
                DoSomthingSpecial(devInterface.dbcc_name);
            }
        }
    }
    return false;
}

[StructLayout(LayoutKind.Sequential)]
struct DEV_BROADCAST_HDR {
   public uint dbch_Size;
   public uint dbch_DeviceType;
   public uint dbch_Reserved;
}

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
public struct DEV_BROADCAST_DEVICEINTERFACE
{
        public int dbcc_size;
        public int dbcc_devicetype;
        public int dbcc_reserved;
        public Guid dbcc_classguid;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst=255)]
        public string dbcc_name;
} 
```

如果您需要枚举所有已连接的设备，我只推荐使用[WMI 方法](https://stackoverflow.com/a/10058571/80274)。如果您想了解如何在没有 WMI 的情况下执行此操作，请查看[Windows 驱动程序开发工具包中](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=11800)[USBView](https://code.msdn.microsoft.com/windowshardware/USBView-sample-application-e3241039)的代码，它可能会帮助您入门。

# c# - 将字符串数据绑定到文本框

> ID：10057801
> 
> 赞同：2
> 
> 时间：2012-04-07T19:50:38.647
> 
> 标签：c#, string, data-binding, textbox

我正在尝试将一个简单的单行字符串绑定到文本框的“文本”属性，但它似乎不起作用。我究竟做错了什么？

```
string loadedFilename;

textBoxFileName.DataBindings.Add("Current File", loadedFilename, "Text"); 
```

我只想使用文本框向用户显示他们当前正在处理的文件。我正在使用文本框，以便他们可以在 winforms 中复制此字符串。（标签不会那样做）

我不能使用对象包装器，因为这会在我的代码中导致一连串的复杂性。必须有一个简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:19:41.547

由于您关于不封装加载文件名的最新评论，我会说：不要使用数据绑定。而是用老式的方式来做

```
textBoxFileName.Text = loadedFilename; 
```

根据流程，您可以将其作为表单代码中的内部属性，如下所示

```
internal string Filename {
get { return this.loadedFilename;}
set {
    this.loadedFilename = value;
    textBoxFileName.Text = value;
    }
} 
```

或者在 Form_Load 事件中设置它。

每次都有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-23T06:43:48.407

```
string loadedFilename;

textBoxFileName.DataBindings.Add("Text", loadedFilename, ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T14:12:39.710

```
class Form1:System.Windows.Form, INotifyPropertyChanged{
 public event PropertyChangedEventHandler PropertyChanged;
 private loadFileName;
 public LoadFileName{
   get{
       return loadFileName;
   }
   set{
       if(this.loadFileName == value ) return;
       this.loadFileName = value;
       NotifyPropertyChanged("LoadFileName");
   }
 }

 public Form1(){
   Initalize();
   this.textbox1.DataBindings.Add("Text",this,"LoadFileName");
 }
 public NotifyPropertyChanged(string propertyName){

   if (PropertyChanged != null)
   {
       PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
   }
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T19:56:40.650

我会看看这个另一个问题 - [TextBox 的数据绑定](https://stackoverflow.com/questions/1616003/winforms-data-binding-for-textbox)

Joepro 建议为您的班级使用 INotifyPropertyChanged，然后绑定文本框。

# ruby-on-rails - 强制rails自动加载类

> ID：10057802
> 
> 赞同：3
> 
> 时间：2012-04-07T19:50:42.373
> 
> 标签：ruby-on-rails, ruby, autoload

我在 /app/models 的单个文件中有几个小类，类似于：

```
# /app/models/little_class.rb
class LittleClass; ...do stuff; end;
class AnotherLittleClass; ...do stuff; end; 
```

Rails 似乎只适合在反映类名的文件中自动加载类。因此，在文件之外引用 AnotherLittleClass 会引发“未初始化常量”错误，如下所示，直到引用 LittleClass：

```
irb(main):001:0> AnotherLittleClass 
NameError: uninitialized constant AnotherLittleClass
irb(main):02:0> LittleClass
=> LittleClass
irb(main):03:0> AnotherLittleClass
=> LittleClass2 
```

将它们拆分为单独的文件将是一件痛苦和混乱的事情。有没有办法自动加载这些类，所以在没有 LittleClass 的情况下引用 AnotherLittleClass 不会引发错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T20:10:04.777

您可以将它们放入一个模块并在此命名空间中使用它们`SomeLittleClasses::LittleClass.do_something`

```
# /app/models/some_little_classes.rb
module SomeLittleClasses

  class LittleClass
    def self.do_something
      "Hello World!"
    end
  end

  class AnotherLittleClass
    def self.do_something
      "Hello World!"
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:35:58.937

在我看来，这些是您的选择：

1.  将您的文件拆分为每个类一个文件，将它们放在根据 rails 约定 ( `SomeClass`=> `some_class.rb`) 命名的目录和启动文件中（例如，在 中创建一个文件`config/initializers`），调用：

    ```
    autoload_paths Rails.application.config.root + "/path/to/lib" 
    ```

2.  将这样的内容添加到启动文件中：

    ```
    %W[
        Class1 Class2
        Class3 Class4 Class4
    ].map(&:to_sym).each dp |klass|
        autoload klass,Rails.application.config.root + "/path/to/lib/file"
    end 
    ```

    当然，每次将新类添加到文件时都必须更新它。

3.  将所有类移动到模块/类命名空间中并调用`autoload`添加它，如上

4.  只需将整个文件预先加载到带有`require`. 问问你自己：额外的努力是否需要延迟这个文件的加载？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T20:04:21.730

试试这个技巧：

```
1.9.2p312 :001 > AnotherLittleClass.new
# => NameError: uninitialized constant AnotherLittleClass
1.9.2p312 :002 > autoload :AnotherLittleClass, File.dirname(__FILE__) + "/app/models/little_class.rb"
# => nil 
1.9.2p312 :003 > AnotherLittleClass.new
# => #<AnotherLittleClass:0xa687d24> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T14:19:57.767

给出以下文件`app/models/statistic.rb`：

```
class Statistic
  # some model code here
end

class UsersStatistic < Statistic; end
class CommentsStatistic < Statistic; end
class ConnectionsStatistic < Statistic; end 
```

创建一个文件`config/initializers/autoload_classes.rb`并添加以下代码：

```
# Autoloading subclasses that are in the same file

# This is the normal way to load single classes
#
# autoload :UsersStatistic, 'statistic'
# autoload :CommentsStatistic, 'statistic'
# autoload :ConnectionsStatistic, 'statistic'

# This is the most dynamic way for production and development environment.
Statistic.subclasses.each do |klass|
  autoload klass.to_s.to_sym, 'statistic'
end

# This does the same but loads all subclasses automatically. 
# Useful only in production environment because every file-change 
# needs a restart of the rails server.
# 
# Statistic.subclasses 
```

# php - 我如何添加 mysql_real_escape_string(): 到这个？

> ID：10057804
> 
> 赞同：0
> 
> 时间：2012-04-07T19:50:58.130
> 
> 标签：php, security

这是代码：

```
 //check if the starting row variable was passed in the URL or not
  if (!isset($_GET['pg']) or !is_numeric($_GET['pg'])) {
 //we give the value of the starting row to 0 because nothing was found in URL
  $startrow = 0;
//otherwise we take the value from the URL
} else {
$startrow = (int)mysql_real_escape_string($_GET['pg']);
} 
```

每当我尝试添加 mysql_real_escape_string(); 到！isset 中的 $_GET['pg')，代码不执行，我没有收到错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:55:53.260

不要将 pg 值转换为 int。相反，验证它是否包含整数值，或者不执行查询。如果您不打算执行查询（我们看不到），那么`mysql_real_escape_string()`完全是错误的工具，因为它需要连接。

适当的做法是验证 的内容`$_GET['pg']`是一个整数，而不是转义它。

由于`is_numeric()`将对非整数实数返回 TRUE，因此我倾向于使用它[`ctype_digit()`](http://us3.php.net/manual/en/function.ctype-digit.php)来验证正整数。如果您还需要负整数的可能性，您可以使用`ctype_digit(abs($_GET['pg']))`

```
if (!isset($_GET['pg']) or !ctype_digit($_GET['pg'])) {
   // it wasn't an integer
   // initialize to your default value
}
else {
  // $_GET['pg'] *has to be a valid int* or we wouldn't have entered the else block
  // no need to escape or further process it - it's safe to use
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:27:59.920

您希望有一个 0 或更大的整数值；如果输入无效，则为 0：

```
$startrow = max(0, isset($_GET['pg']) ? $_GET['pg'] : 0); 
```

整`mysql_real_escape_string()`数值不需要 。根据您的编码风格，这在 PHP 中也是可能的：

```
$startrow = max(0, @$_GET['pg']); 
```

如果您使用的是 PHP 5.4，它的性能甚至非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T20:00:29.303

mysql_real_escape_string 需要与数据库的连接（第二个参数），如果未提供，将使用最后打开的连接 - 请参阅：

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

可能是在您的代码的这一点上没有创建与数据库的连接？在这种情况下，您应该看到一个警告（检查您的 php 配置是否允许显示警告）

# vba - 在excel vba中将范围从一个工作簿复制到另一个工作簿

> ID：10057806
> 
> 赞同：1
> 
> 时间：2012-04-07T19:51:17.640
> 
> 标签：vba, excel

我有工作簿，我必须将一个工作簿中的范围复制到活动工作簿中的范围变量。当我执行以下操作时出现错误。有没有其他方法可以做到这一点。

```
Dim NTwbk As Workbook
Dim AppExcel As Excel.Application
Dim NewRng As Range
Dim res As Range
Sub OpenWBK()
Set AppExcel = New Excel.Application
Set NTwbk = AppExcel.Workbooks.Open(Sheet1.Range("SecondWorkbookPath"))
NewRng= NTwbk.Sheets("Sheet1").Range("B3")

AppExcel.Quit

End Sub 
```

我也试过这个：

```
NewRng.Value = NTwbk.Sheets("Sheet1").Range("B3").Value 
```

也没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:23:27.633

您的脚本的主要问题是，一旦您关闭第二个工作簿（通过 AppExcel.Quit 或 NTwbk.close 作为其他答案列表），您引用的范围对象不再在内存中，并且您的变量不再可用。此外，在将对象分配给变量时，您必须使用 set：

```
Set NewRng = Ntwbk.Sheets("Sheet1").Range("B3") 
```

这不会失败，但也不会有用，因为您随后关闭了 Ntwbk。

任何需要对工作簿中的范围执行的操作都必须在关闭该工作簿之前执行。

如果你想要的只是范围的值，这是一个可能的变化：

```
Dim NTwbk As Workbook
Dim AppExcel As Excel.Application
Dim NewRng As Range
Dim res As String 'Note the change from Range to String
Sub OpenWBK()
Set AppExcel = New Excel.Application
Set NTwbk = AppExcel.Workbooks.Open(Sheet1.Range("SecondWorkbookPath"))
NewRng = NTwbk.Sheets("Sheet1").Range("B3").Value

AppExcel.Quit

End Sub 
```

然后，您可以自由地将 NewRng 用作其他工作簿中特定范围的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:14:55.450

您已经打开了 Excel，因此您不需要打开第二个副本，因此请丢弃：

```
Dim AppExcel As Excel.Application
Set AppExcel = New Excel.Application
AppExcel.Quit 
```

将打开更改为：

```
Set NTwbk = Workbooks.Open(Sheet1.Range("SecondWorkbookPath")) 
```

但是“SecondWorkbookPath”不是有效范围。如果工作表“Sheet1”的单元格 A1 包含有效的路径和文件名，则可以执行以下操作：

```
Set NTwbk = Workbooks.Open(Worksheets("Sheet1").Range("A1").Value)
Set NewRng = NTwbk.Sheets("Sheet1").Range("B3")
NTwbk.Close SaveChanges := False 
```

进行上述更改，然后重试。

# php - jQuery 或 AJAX 可以监听从另一个页面传递过来的变量吗？

> ID：10057810
> 
> 赞同：0
> 
> 时间：2012-04-07T19:51:40.577
> 
> 标签：php, javascript, jquery, html, ajax

所以我有一个登录和注册页面。您单击其中一个并出现一个弹出窗口，但是如果他们登录并且一切正确，我需要刷新父页面（不使用正文 onunload，因为我有几个页面可以采用的方向）。那么jQuery（或者也许是AJAX）可以不断地监听一个变量或者一些要传递的东西，这样我就可以做一个window.location？

感谢阅读 =-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T07:45:16.273

在 $.ajax() 中使用成功设置来接收一个 json 编码的字符串或简单的字符串结果并从那里处理

喜欢：

```
$.ajax({  
        type: "POST",  
        url: "./API_PAGE.cgi",  
        data: dataObject,
        success: function(dataout) {
            //dataout should be string, json or single value;
        }
}); 
```

在 php 中确保你打印你的结果..这将把数据发回，不要使用 return

```
<? 
...
   print $something;
?> 
```

# c# - 如何在 c# 中实现来自 sapi 5.1 的 ISpeechPhraseElement？

> ID：10057811
> 
> 赞同：0
> 
> 时间：2012-04-07T19:51:40.683
> 
> 标签：c#, text-to-speech

我需要实现 ISpeechPhraseElement 以便我可以使用 AusioStreamOffset

[http://msdn.microsoft.com/en-us/library/ee125345(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ee125345(v=vs.85).aspx)

在c#中，这样我就可以获得当前的偏移量，但我不知道我该怎么做，因为网上的所有例子都是用vb制作的。如果有人能把我引向正确的方向，我将不胜感激。我需要这个用于 Web 应用程序中的文本到语音。10倍很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:27:06.860

您只能找到 VB 示例，因为您只会使用来自脚本语言（如 VBScript）的 SAPI。在 C# 中，您使用 System.Speech.Recognition 命名空间中的类。它包含围绕 SAPI 接口的托管类包装器。ISpeechPhraseElement 的等价物是 RecognizedUnitWord 类。您从 RecognitionResult.Words 属性中获得的实例。

查看[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognizer.aspx)中包含的示例代码以开始使用。

# assembly - 通过 char X86 MASM 比较两个缓冲区

> ID：10057815
> 
> 赞同：1
> 
> 时间：2012-04-07T19:51:56.117
> 
> 标签：assembly, x86, masm, masm32

我正在使用 X86 程序集，需要按字符比较两个缓冲区并在第三个缓冲区中反映它们是否匹配

伪代码：

```
Compare(ESI=msg_buffer_ptr, EDI=recover_buffer_ptr, EBX=err_buffer_ptr)

;Compare a character in ESI && EDI
;if ESI == 0 then we are at the end of the string and just return after adding add a 0 to EBX
;if they equal; " " -> EBX
;if it's a 0dh or 0ah, then transpose them into EBX
;else if they don't equal; "X" -> EBX
;Loop to next character 
```

我无法弄清楚如何按每个字符访问 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T00:26:13.343

我相信这样的事情应该可以帮助你。请记住，这是 NASM 而不是 MASM，但这两者在基本语法方面应该几乎相同。我不知道您所说的“转置”是什么意思，所以我只是将原始数组中的值复制到“err”数组中。

基本上，每个字符的循环是通过拥有一个索引寄存器（在本例中为 ecx）并通过字节指令访问数组来完成的。在这种情况下，指令的大小由操作数隐含地给出，例如`mov al, [esi+ecx]`或`cmp al, [edi+ecx]`- 我们只使用一个字节寄存器。

无论如何，代码是作为函数编写的。我假设被调用者不需要保存任何寄存器。

```
compare:
    xor ecx, ecx

.loop:
    mov al, [esi+ecx]
    test al, al
    jz .end

    cmp al, [edi+ecx]
    je .equal

    cmp al, 0xa
    je .endloop

    cmp al, 0xd
    je .endloop

    mov al, 'X'
    jmp .endloop

.equal:
    mov al, ' '

.endloop:
    mov [ebx+ecx], al
    add ecx, 1
    jmp .loop

.end:
    mov [ebx+ecx], byte 0
    ret 
```

# php - PHP语法验证器？

> ID：10057816
> 
> 赞同：0
> 
> 时间：2012-04-07T19:52:01.127
> 
> 标签：php

我只是想知道是否有人可以推荐推荐的语法验证器？

遇到大问题，想不通...

```
 <?php 
    session_start();
       if (isset ($_SESSION['id'])) {header("location: home.php");} 
       if (array_key_exists("login", $_GET)){$oauth_provider = $_GET['oauth_provider'];
       if ($oauth_provider == 'twitter')
       {
           header("Location: login-twitter.php");
       }  
       else if ($oauth_provider == 'facebook'){
           header("Location: login-facebook.php");
       }
       }
    ?>

 <a href="?login&oauth_provider=twitter">Twitter_Login</a>
 <a href="?login&oauth_provider=facebook">Facebook_Login</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:53:47.687

`php -l`在命令行上将进行语法检查

[codepad.org](http://codepad.org)是一种在线测试代码的简单方法。

您的示例代码不包含语法错误：[http ://codepad.org/0diycu9o](http://codepad.org/0diycu9o)

# .net - Automapper 仅映射某些属性

> ID：10057818
> 
> 赞同：1
> 
> 时间：2012-04-07T19:52:04.073
> 
> 标签：.net, vb.net, automapper

使用自动映射器我将我的 ViewModel 映射到我的业务对象，但是我想映射到现有的对象实例并且只映射我的视图模型上的属性。例如

ProductModel 有 id,name,code ProductBusiness 有 id,name,code,date added

```
Function Add(ByVal model As ProducModel) As ActionResult
    dim _ProductBusiness = (Load ProductBusiness from db)

    dim newProductBusiness = AutoMapper.Mapper.Map(Of Business.User)(model)
End Function 
```

我想以某种方式传入现有的业务对象实例，并且只映射两个对象上的 3 个属性，添加的日期应该与数据库中的相同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:18:30.363

创建映射时，您可以忽略属性。

不知道您是否正在寻找更复杂的东西。

在c#中

```
Mapper.CreateMap<ProductModel, ProductBusiness>()
.ForMember(target => target.dateadded, opt => opt.Ignore()); 
```

如果您不想要更通用的东西，这是可能的，但欢迎提供更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:23:28.173

你可以这样做：

```
 Public Sub MapIt(input As ProductModel, output As ProductBusiness)
        AutoMapper.Mapper.CreateMap(Of ProductModel, ProductBusiness)()
        AutoMapper.Mapper.Map(input, output)
    End Sub 
```

但请记住，**您不需要`CreateMap`每次都**打电话。**AutoMapper 将忽略`dateadded`**. （***没有测试过，但我相信它会这样做***）。

或者，您也可以这样做：

```
 Public Sub MapIt(input As c1, output As c2)
        AutoMapper.Mapper.DynamicMap(input, output)
    End Sub 
```

第二个代码**与第一个相同**。`DynamicMap`会打电话`CreateMap`给你。

# javascript - 如何预加载文本而不是加载图像？

> ID：10057819
> 
> 赞同：0
> 
> 时间：2012-04-07T19:52:07.460
> 
> 标签：javascript, html, load

我创建了一个网站，我希望首先加载文本和表单，而不是图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:00:19.840

您可以在此处再次阅读有关浏览器加载顺序的信息：

[http://ejohn.org/blog/browser-page-load-performance/](http://ejohn.org/blog/browser-page-load-performance/)

为了确保在文档内容之后加载图像，您可以使用一些 javascript 库进行图像延迟加载：

例如： http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

# javascript - 任何像 arbor 这样的 jquery 插件来绘制图集？

> ID：10057822
> 
> 赞同：1
> 
> 时间：2012-04-07T19:52:31.170
> 
> 标签：javascript, jquery, ajax, spring

我想使用[http://arborjs.org/atlas/](http://arborjs.org/atlas/)插件，但该插件在 IE 中不起作用。任何人都知道任何 jquery 插件，例如 arbor，它可以在大多数浏览器中运行并且易于使用。我有一个可以像图集或图表一样显示的数据。我想要一个可以轻松为我完成这项工作的 jquery 插件。我已经下载了 arborjs 代码，但是 zip 文件中提供的演示在 IE 和 firefox 中都不起作用。所以我想为我的工作放弃这个插件。请让我知道任何可以轻松为我绘制图表的插件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:56:25.977

它在 IE 中不起作用，因为它使用的是 canvas 元素。 [这是 IE 和 Canvas 的解决方案。](http://code.google.com/p/explorercanvas/)

您首先需要下载位于上面链接上的库，然后将 excanvas.js 文件上传到您的服务器。使用此代码链接到它：

```
<!--[if IE]><script type="text/javascript" src="excanvas.js"></script><![endif]--> 
```

您会看到上面的条件注释（也称为 cond-com），它们只能由 Internet Explorer 读取。他们检查是否存在 Internet Explorer 作为正在使用的浏览器，然后在其间包含代码。在这种情况下，我们链接到刚刚下载的脚本 (excanvas.js) 并将其包含在网站中。请记住，如果浏览器是 Internet Explorer，这将只包括脚本，这是完美的，因为我们不希望用户在不需要时下载脚本（如果他们的浏览器已经支持）。

[为了解决您的错误“无法加载脚本：/arbor.js (nsresult = 0x805303f4)”的问题，我也在我自己的系统上复制了](https://github.com/samizdatco/arbor/issues/5)该错误：问题似乎是因为您正在加载一个 Worker javascript 对象。此特定对象要求相关文件托管在本地服务器（通过 localhost）或实时 Web 服务器上。尝试加载的 javascript 库当前正在通过您计算机上的文件结构加载，但 ArborJS 中的代码要求这些文件以某种性质托管，而不仅仅是存在于您的系统目录中。尝试将所有内容都放在 Internet 上（同样，通过本地托管的服务器或公开可用的服务器），您应该会有更好的运气。尝试从计算机上的文件运行此脚本将不起作用。

# android - 安卓内存泄漏检测

> ID：10057827
> 
> 赞同：0
> 
> 时间：2012-04-07T19:52:47.787
> 
> 标签：android, eclipse, memory-leaks

ADT eclipse 插件将在我运行 android 应用程序时报告内存泄漏（当它有泄漏时）。VM（或插件）如何在运行时检测内存泄漏？这背后的检测算法是什么？另外，是否在生产环境中启用了检测？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:44:28.370

没有检测到系统处理的内存泄漏。解释在问题的评论中

# facebook - 在我的网站上集成 Facebook 登录

> ID：10057828
> 
> 赞同：0
> 
> 时间：2012-04-07T19:52:53.480
> 
> 标签：facebook

我试图在我的网站上集成 fb 登录，但无法正常工作。我提到了其他帖子和教程，但我仍然无法让它工作。

```
<html>
    <head>
      <title>My Facebook Login Page2</title>
    </head>
    <body>
<div id="fb-root"></div>
    <script type="text/javascript">
        window.fbAsyncInit = function() {
            FB.init({appId: '317329008329948', status: true, cookie: true, xfbml: true});

            FB.Event.subscribe('auth.login', function(response) {
                login();
            });m
            FB.Event.subscribe('auth.logout', function(response) {
                logout();
            });

            FB.getLoginStatus(function(response) {
                if (response.session) {
                    greet();
                }
            });
        };
        (function() {
            var e = document.createElement('script');
            e.type = 'text/javascript';
            e.src = document.location.protocol +
                '//connect.facebook.net/en_US/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
        }());

        function login(){
            FB.api('/me', function(response) {
                alert('You have successfully logged in, '+response.name+"!");
            });
        }
        function logout(){
            alert('You have successfully logged out!');
        }
        function greet(){
            FB.api('/me', function(response) {
                alert('Welcome, '+response.name+"!");
            });
        }

    </script>
<fb:login-button autologoutlink='true' perms='email,user_birthday,status_update,publish_stream'></fb:login-button>

</body>
 </html> 
```

我不断收到此错误：“发生错误，请稍后再试”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:32:25.240

请不要盲目地使用 Facebook 在他们的示例中显示的回调并忽略响应值。即使确实没有执行该操作，Facebook 也会调用这些事件。这就是为什么他们给你“响应”变量。

在决定做什么之前，您应该查看响应变量的属性值。

我给了markzzz同样的建议，这对他有用

[为什么在 auth.login 之后调用 auth.logout？](https://stackoverflow.com/questions/9785737/why-auth-logout-is-called-after-auth-login/9794068#9794068)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:39:14.580

根据我的经验，当我将我的 fb 代码放在应用程序设置中未指定的网站上时，我会收到此错误。

因此，我建议您`Site URL`在应用程序设置中指定的相同 url 上运行代码。

# linux - 更改 linux 网络连接类型

> ID：10057829
> 
> 赞同：0
> 
> 时间：2012-04-07T19:52:53.727
> 
> 标签：linux, powershell, winrm

我`Set-WSManQuickConfig`在 Powershell 中尝试过命令，但它无法配置防火墙：

```
Set-WSManQuickConfig : WinRM firewall exception will not work since one of the network connection types on this machine is set to Public. Change the network connection type to either Domain or Private and try again. 
```

问题出在远程（虚拟机）Linux 操作系统上。如何更改 linux 中的网络连接类型？我想它是默认的公共。是否像在 Windows 中那样明显：将连接类型更改为工作？但在 Linux 中，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:54:01.770

正如您在 Windows 中所知道的那样，Linux 没有任何“网络类型”的概念。

我假设网络类型基本上是一种防火墙预配置。您可以使用 iptables 配置防火墙。

[这](https://help.ubuntu.com/community/IptablesHowTo)是对 iptables 的众多介绍之一。要记住的最重要的事情是，与典型的 Windows 防火墙不同，iptables 不过滤应用程序，而是过滤端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:47:13.693

首先 -> 小心更改为 domain 或 private ：

![七 网络配置](../Images/5764c3b8ce45bd075dea09e4acda3a6e.png)

第二 -> 在 7 或 W2K8 上，小心使用真正的管理员用户，而不是在安装时创建的伪用户。

# objective-c - 如何在单点触控中更改 UIbutton 文本的大小？

> ID：10057834
> 
> 赞同：6
> 
> 时间：2012-04-07T19:53:42.437
> 
> 标签：objective-c, ios, uikit, xamarin.ios

我试过代码

```
UIbutton *bt = new UIbutton;
bt.Font = UIFont.SystemFontSize(35); 
```

但我不断收到编译错误“由于保护级别，字体大小无法访问。” 任何解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T17:59:46.773

错误消息远非理想，而是`SystemFontSize`返回浮点数的属性，而不是返回 a 的方法`UIFont`。

为此，您想要：

```
UIButton button = UIButton.FromType (UIButtonType.RoundedRect);
bt.Font = UIFont.SystemFontOfSize (35) 
```

# vxml - 数据库中的日期值

> ID：10057839
> 
> 赞同：1
> 
> 时间：2012-04-07T19:54:01.420
> 
> 标签：vxml, voicexml

我有一个接受用户输入的 php 数据库。它接受内置的语法类型，即日期，以这种格式 20101030 将日期存储到数据库中。我希望能够检查数据库以在语法中使用，但它不会再次将此值识别为日期. 无论如何我可以做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:43:03.800

尝试这个

```
$datear=array();
        $temp=strtotime($row['Your_date_column']);
        $datear=getdate($temp);
        echo substr($datear["month"],0,3).'-'.$datear["mday"].'-'.$datear["year"]; 
```

1.  ($row['Your_date_column']) 这将为您在上面写的 201010 提供 unix 时间戳... getdate() 函数将转换为日期数组，该数组将存储相关信息，例如

    [seconds] - 秒 [minutes] - 分钟 [hours] - 小时 [mday] - 月份中的某天 [wday] - 星期几 [year] - 年份 [yday] - 一年中的某一天 [weekday] - 名称工作日 [月] - 月份的名称

一旦你得到这个信息，试着在你的数据库中格式化你需要的日期..

# javascript - 使用 jQuery 提交没有页面刷新的表单

> ID：10057840
> 
> 赞同：1
> 
> 时间：2012-04-07T19:54:04.510
> 
> 标签：javascript, jquery

我想使用 jQuery 提交一个不刷新页面的表单。我在网上找到了一些示例，例如： http: [//net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

但问题是他们有硬编码的表单字段：

```
 <div id="contact_form">
  <form name="contact" action="">
    <fieldset>
      <label for="name" id="name_label">Name</label>
      <input type="text" name="name" id="name" size="30" value="" class="text-input" />
      <label class="error" for="name" id="name_error">This field is required.</label>

      <label for="email" id="email_label">Return Email</label>
      <input type="text" name="email" id="email" size="30" value="" class="text-input" />
      <label class="error" for="email" id="email_error">This field is required.</label>

      <label for="phone" id="phone_label">Return Phone</label>
      <input type="text" name="phone" id="phone" size="30" value="" class="text-input" />
      <label class="error" for="phone" id="phone_error">This field is required.</label>

        <br />
      <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />
    </fieldset>
  </form>
  </div> 
```

和javascript：

```
 var dataString = 'name='+ name + '&email=' + email + '&phone=' + phone;
  //alert (dataString);return false;
  $.ajax({
    type: "POST",
    url: "bin/process.php",
    data: dataString,
    success: function() {
      $('#contact_form').html("<div id='message'></div>");
      $('#message').html("<h2>Contact Form Submitted!</h2>")
      .append("<p>We will be in touch soon.</p>")
      .hide()
      .fadeIn(1500, function() {
        $('#message').append("<img id='checkmark' src='images/check.png' />");
      });
    }
  });
  return false; 
```

因此，在上面的示例中，它`dataString`是从硬编码的表单字段创建的。我的表单是动态的，所以我不知道它具有的输入字段的名称。

**注意：**虽然表单字段是动态的，但表单名称是硬编码的，所以我想一种选择是遍历子节点并解析值。但我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T19:56:11.053

`data: $("#contact_form form").serializeArray()`应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:01:11.463

Caner，我担心你的表格是动态的，没有更简单的方法。您需要使用如下代码浏览表单：

```
var message = "";
$("#formID input").each(function() {
    message += $(this).attr("name");
}); 
```

这样的代码将获取表单中每个输入的名称，并将其连接到一个名为 message 的字符串。在这种情况下，您可以比我更具体，但您应该了解基本概念并使用此代码来满足您的需求。

# java - gwt-exporter 不生成代码（Java 到 Javascript）

> ID：10057844
> 
> 赞同：2
> 
> 时间：2012-04-07T19:55:12.513
> 
> 标签：java, javascript, gwt, code-generation

我想从现有的 Java 项目中生成 Javascript 代码（[这里的原始问题](https://stackoverflow.com/questions/10029656/how-to-expose-class-functionality-in-gwt/10029797)）。

我将 GWT 与 gwt-exporter 结合使用。在我 GWT 编译之后，我的类型都没有出现在任何生成的代码中。

我有

**游戏入口点.java**

```
package game.client;

import org.timepedia.exporter.client.ExporterUtil;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.JavaScriptObject;

public class GameEntryPoint implements EntryPoint {

    @Override
    public void onModuleLoad() {
        ExporterUtil.exportAll();
    }

} 
```

**RoadServer.java**

```
package game.client;

import org.timepedia.exporter.client.Exportable;

public class RoadServer implements Exportable {
    int _index;
    int _id;
    public RoadServer(int index,int id){
        this._id=id;
        this._index=index;
    }
} 
```

`RoadServer`我的`war/`目录中没有任何引用（`grep -Ri RoadServer war/*`仅匹配`.class`文件）。另外，为了确定，我`war/GameEntryPoint.html`在浏览器 (Firefox) 中打开了该文件，而 Firebug 只看到`game_GameEntryPoint`以`game`.

知道为什么这不起作用吗？

PS我也尝试指定`@Export`and `@Export("RoadServer")`with `@ExportPackage("game")`。没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T20:48:56.990

啊哈，所以看起来它是`ExporterUtil.exportAll()`. 如果类具有非空构造函数或没有任何方法，则不会导出。但是，如果您向导出的类添加一个空构造函数，并使用注释对非空构造函数进行`@Export`注释，它就会开始工作

您也可以手动导出一个类：

```
public class GameEntryPoint implements EntryPoint {

    @Override
    public void onModuleLoad() {
        ExporterUtil.exportAll();
        GWT.create(RoadServer.class); //forcing to export road server
    }

} 
```

但请注意，这种方式有时会导出一个有错误的类

# ios - Omnigraffle 未打开 xcodeproj 文件

> ID：10057846
> 
> 赞同：2
> 
> 时间：2012-04-07T19:55:24.283
> 
> 标签：ios, xcode, uml

我正在尝试生成我刚刚继承的当前项目的 uml 图。我已经看到几个地方引用了omnigraffle 作为最好的工具，因为据说我可以将我的.xcodeproject 文件拖到图标上。但是，我收到以下弹出消息：

“无法打开“tangott.xcodeproj”文档。此框架或项目不包含任何 Objective-C 接口。OmniGraffle 仅在 Objective-C 中绘制类层次结构图。”

这还有可能吗？我有 OS 10.7.3 和最新版本的 Omnigraffle。如果没有，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-10T02:55:44.063

我认为您应该检查“文件->打开->选择您的Xcode**文件夹**”而不是“文件->打开->选择您的XcodeProject文件”。这意味着：将其 (.xcodeproj)**包含的文件夹**拖到 OmniGraffle 应用程序图标上

祝你好运，

# php - OOP/MVC 中的会话安全

> ID：10057853
> 
> 赞同：1
> 
> 时间：2012-04-07T19:56:16.763
> 
> 标签：php, security, model-view-controller, oop, codeigniter

这个问题专门关于如何在基于函数/OOP/MVC 的环境中正确实现会话安全。

我熟悉程序文件中的会话安全性 - 如果我有一个按程序编写的 control_panel.php 文件，我可以简单地检查页面顶部的会话安全性，或者只要逻辑指示它将首先加载。

但是，我是 OOP/MVC 的新手，我的页面现在只是一堆函数！

希望我不需要检查每个功能中的会话安全性..？

请注意，我使用的是 CodeIgniter2。

这是我的代码示例：

```
<?php

class Main_controller extends CI_Controller {

public function __construct() {
        parent::__construct(); 
}

public function index() {
   //$this->load->view(my_view);
   //run some code
}

public function function1() {
   //$this->load->model(my_model);
   // run some code
}

private function function2() {
   //$this->load->view(my_view2);
   //run some code
}
?> 
```

在一个程序化的 php 页面中，它看起来像这样：

```
<?php

// check user login
if (isset($_SESSION["user"]) && !empty($_SESSION["user"])) {

// all of the code on the page

}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:05:13.273

将基本控制器扩展为`MY_Controller`- 并将检查放在那里。

```
class MY_Controller extends CI_Controller
{
    public function __construct() 
    {
        parent::__construct();

        if ( ! isset($_SESSION["user"]) OR (empty($_SESSION["user"]))
        {
            // User not logged in - so send them to the home page
            redirect ("/");
        }
    }
} 
```

然后`MY_Controller`为您想要“安全”的每个控制器扩展，除非用户登录，否则将无法访问它们中的任何一个

```
class Main_controller extends MY_Controller
{
    public function __construct() 
    {
        parent::__construct(); 
    }

    public function index()
    {
        //$this->load->view(my_view);
        //run some code
    }

    public function function1()
    {
        //$this->load->model(my_model);
        // run some code
    }
} 
```

有关更多信息，请参见此处：http: [//codeigniter.com/user_guide/general/core_classes.html](http://codeigniter.com/user_guide/general/core_classes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:01:33.337

Codeigniter 中有本地[会话库](http://codeigniter.com/user_guide/libraries/sessions.html)。还有几个扩展库。如果您搜索 CI 社区，则有很多类型和示例。制作会话库自动加载表单`config/autoload.php`并检查主控制器内的会话验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:02:20.197

在我看来，上述解决方案适用于简单的登录验证。如果您想根据登录的用户类型和其他情况来控制页面，会发生什么。根据我的经验，扩展基类始终是一个挑战，基类应该用于通用和横切关注点。我建议实现一个单独的类来处理您的验证需求，然后在需要时调用这些类，例如

```
public function function1()
{
    if(SessionManager::CheckRights("IsMember"))
    {
        //$this->load->model(my_model);
        // run some code
    }
    else
        ......
 } 
```

# python - python中Tan的逆（tan-1）

> ID：10057854
> 
> 赞同：38
> 
> 时间：2012-04-07T19:56:22.370
> 
> 标签：python, math, trigonometry

我试图在 python 中计算 tan 的倒数，但它没有给我正确的值，例如，如果我要做 1.18 的倒数，`math.atan(1.18)`

```
>>>math.atan(1.18)
0.8677 
```

但是，正确答案是 49.720136931。正确的做法是什么？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-04-07T19:57:51.450

[`math.atan(x)`](http://docs.python.org/library/math.html#math.atan)以弧度返回，如果需要度数，请使用[`math.degrees(x)`](http://docs.python.org/library/math.html#math.degrees)

```
Converts angle x from radians to degrees.

>>> import math
>>> math.degrees(math.atan(1.18))
49.720136931043555 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-10-10T18:53:43.637

您可以简单地将弧度乘以 180/pi。无需导入 ;)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-26T09:17:16.537

```
>>>from math import *
>>>degrees(atan(1.18))
>>>49.720136931043555 
```

# javascript - 我不断收到未终止的字符串文字错误

> ID：10057857
> 
> 赞同：0
> 
> 时间：2012-04-07T19:56:27.170
> 
> 标签：javascript

它一直在下面给我一个未终止的字符串文字错误，但我看不到问题。如何在下面修复它：

```
 var $fileImage = $("<form action='upload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startUpload();' >
    <p class='f1_upload_process'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='f1_upload_form'><br/><label>
    File: <input name='fileImage' type='file' class='fileImage' /></label><label><input type='submit' name='submitBtn' class='sbtn' value='Upload' /></label>
    </p> <iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px solid #fff;'></iframe></form>");

$image.append($fileImage); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T20:01:56.980

JavaScript 不是 PHP。字符串中不允许换行。

`\`在每行的末尾添加，或使用 . 连接字符串`" + "`。

```
// Using \, scroll to the right to see how to use it
var $fileImage = $("<form action='upload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startUpload();' >\
    <p class='f1_upload_process'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='f1_upload_form'><br/><label>\
    File: <input name='fileImage' type='file' class='fileImage' /></label><label><input type='submit' name='submitBtn' class='sbtn' value='Upload' /></label>\
    </p> <iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px solid #fff;'></iframe></form>");

// Using string concatenation
var $fileImage = $("<form action='upload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startUpload();' >" + 
    "<p class='f1_upload_process'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='f1_upload_form'><br/><label>" + 
    "File: <input name='fileImage' type='file' class='fileImage' /></label><label><input type='submit' name='submitBtn' class='sbtn' value='Upload' /></label>" +
    "</p> <iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px solid #fff;'></iframe></form>"); 
```

由于您使用的是**jQuery**，我建议使用 jQuery 创建可读且可维护的代码：

```
var $form = $('<form>', {
    action: 'upload.php',
    method: 'post',
    enctype: 'multipart/form-data',
    target: 'upload_target'
}).submit(startUpload);
// Et cetera. 
```

# android - android Theme.Holo.Dialog 将蓝线变为橙色

> ID：10057859
> 
> 赞同：31
> 
> 时间：2012-04-07T19:56:35.477
> 
> 标签：android, colors, styles, themes

Android 主题 Theme.Holo.Dialog 上线条的默认颜色为蓝色。我想知道如何将其更改为任何其他颜色。在我的情况下是橙色的。

我可以更改文本或背景等。用自定义 style.xml 覆盖主题

```
 <style name="Theme.MyTheme" parent="@android:style/Theme.Holo.Dialog" >
        <item name="android:textColor">@color/coloroscuro</item>
        <item name="android:textColorHint">@color/coloroscuro</item>
   </style> 
```

但我不知道哪个属性管理线条的颜色。

我的意思是主题默认具有的蓝线，就像其他问题中显示的那样：

[如何为 Android Holo Theme 样式的对话框按钮](https://stackoverflow.com/questions/9804181/how-to-android-holo-theme-style-dialog-box-buttons)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-07T20:38:39.490

只需为您挖掘源代码 - 不幸的是，对话框布局中的 Divider 行是一个具有硬编码颜色背景的视图，不引用任何主题：

```
<View android:id="@+id/titleDividerTop"
  android:layout_width="match_parent"
  android:layout_height="2dip"
  android:visibility="gone"
  android:background="@android:color/holo_blue_light" /> 
```

因此，如果您想更改颜色，您必须布局自己的自定义对话框。为了使它更容易，从 android 源代码库中复制并根据您的需要对其进行自定义不会有什么坏处，但您可能会得到比您需要的更多的东西。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-12T07:45:48.197

有一个库可以完全满足您的需求 - Holo 主题中对话框的简单样式：

[https://github.com/inmite/android-styled-dialogs](https://github.com/inmite/android-styled-dialogs)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-28T05:20:38.997

一个技巧是使用没有标题栏的对话框，因此android不画线，然后在对话框的布局xml文件中自己添加标题和线！例如：

```
<style name="myDialogStyle" parent="android:style/Theme.Holo.Dialog">
    <item name="android:windowNoTitle">true</item>
</style> 
```

在清单使用中：

```
 <activity
        android:name=".Activity.Mydialog"
        android:theme="@style/myDialogStyle" >
    </activity> 
```

并在您的 Mydialog 布局中定义标题并使用您想要的颜色和样式为自己划线！

干杯！

# ruby-on-rails - 如果 ID 和 Type 相同，不创建多态关联？

> ID：10057865
> 
> 赞同：1
> 
> 时间：2012-04-07T19:57:20.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我无法让我的验证正确执行。

由于我的`validate`方法，我不断收到错误：

```
NoMethodError in ProductsController#subscribe_product

undefined method `subscriptions' for #<Class:0x6da5890> 
```

* * *

```
class Subscription < ActiveRecord::Base
  belongs_to :subscriber, :class_name => "User"
  belongs_to :subscribable, :polymorphic => true

  validates :subscriber_id, :presence => true
  validates :subscribable_id, :presence => true
  validates :subscribable_type, :presence => true

  validate do |s|
    if s.subscribable_type.constantize.subscriptions.find_by_subscribable_id_and_subscribable_type(s.subscribable_id, s.subscribable_type)
      s.errors.add_to_base "You're already susbcribed to this Product."
    end
  end
end 
```

* * *

然后我有一个链接，您可以单击以订阅控制器中的产品：

```
def subscribe_product
 @product = Product.find(params[:id])
 subscription = Subscription.new
 subscription.subscriber = current_user
 @product.subscriptions << subscription
 @product.save
 redirect_to :back
end 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T20:32:41.340

添加到订阅模型：

```
validates_uniqueness_of :subscribable_id, :scope => [:subscriber_id, subscribable_type] 
```

并确保您在 product.rb 中定义了 has_many :subscriptions

# php - 为什么我的 Code Igniter 控制器中出现意外的 T_VARIABLE 错误？

> ID：10057867
> 
> 赞同：0
> 
> 时间：2012-04-07T19:58:00.297
> 
> 标签：php, codeigniter

我在 Code Igniter 中有这个控制器，它以

```
class MyController extends CI_Controller {
    private $data = array(
        'importantValueToPassToViews' => $this->Animal->getPrey(),
    );
    ... 
```

我在以`'importantValueToPassToViews'`（第三行）开头的行出现错误。

```
Parse error: syntax error, unexpected T_VARIABLE 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T20:00:39.697

因为您不能在类属性定义中调用函数。您可以将其设置为常量或常量数组。

您需要在构造函数中执行此操作：

```
<?php
class MyController extends CI_Controller {

    private $data = array();

    public function __construct()
    {
        parent::__construct();

        $this->data['importantValueToPassToViews'] = $this->Animal->getPrey();
    }
    // ...
 } 
```

# c++ - 输入验证执行 true 无论如何？

> ID：10057868
> 
> 赞同：0
> 
> 时间：2012-04-07T19:58:12.823
> 
> 标签：c++

好的，这是一个提示用户输入篮球运动员的程序。在用户收到提示输入播放器名称后，我验证输入以确保它实际上是一个字符串。好吧，验证总是执行 true 并终止程序。我的其他输入验证不会发生这种情况，只是字符串。关于为什么它总是执行真实的任何想法，因此终止程序？谢谢你。

这是我的代码：

```
#include <iostream>
#include <string>
#include <iomanip>
#include <cstdlib>
using namespace std;

//struct of Basketball Player info
struct BasketballPlayerInfo
{
    string name; //player name

    int playerNum, //player number
        pointsScored; //points scored

};

int main()
{
    int index, //loop count
        total = 0; //hold total points
    const int numPlayers = 5; //nuymber of players
    BasketballPlayerInfo players[numPlayers]; //Array of players

    //ask user for Basketball Player Info
    cout << "Enter the name, number, and points scored for each of the 5 players.\n";

    for (index = 0; index < numPlayers; index++)
    {
        //collect player name
        cout << " " << endl;
        cout << "Enter the name of player # " << (index + 1);
        cout << ": ";

        //input validation
        if((!(getline(cin, players[index].name))));  <----validation goes wrong!
        {
            cout << "Player Name must be alphabetical characters only!\n";
            cout << "Program terminating please start over." << endl;
            system("pause");
            exit(0);
        }

        getline(cin, players[index].name);

        //collect players number
        cout << "Enter the number of player # " << (index + 1);
        cout << ": ";

        //input validation
        if(!(cin >> players[index].playerNum))
        {
            cout << "Player Name must be numeric characters only!\n";
            cout << "Program terminating please start over." << endl;
            system("pause");
            exit(0);
        }
        //collect points scored
        cout << "Enter points scored for player # " << (index + 1);
        cout << ": ";

        //input validation
        if(!(cin >> players[index].pointsScored))
        {
            cout << "Player Name must be numeric characters only!\n";
            cout << "Program terminating please start over." << endl;
            system("pause");
            exit(0);
        }

        cin.ignore();
    }

    //display
    cout << "\n";
    cout << "Here is the information for each player: \n";
    cout << fixed << showpoint << setprecision(2) << setw(5);
    cout << "\n";
    cout << "          \tName\tNumber\tPoints\n";
    cout << "------------------------------------------------" << endl;

    for(index = 0; index < numPlayers; index++)
    {
        cout << "Player # " << (index + 1);
        cout << ": \t" << players[index].name << "\t" << players[index].playerNum << "\t" << players[index].pointsScored << endl;
        cout << "------------------------------------------------" << endl;

    }

    //display total points scored by all players
    for(index = 0; index < numPlayers; index++)
    {
        //hold total
        total += players[index].pointsScored;
    }

    cout << "Total Points scored are: " << total << endl;

 system("pause");
return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T19:59:11.950

你`;`在该行的末尾有一个。

# javascript - 为什么这个javascript无限循环？

> ID：10057871
> 
> 赞同：0
> 
> 时间：2012-04-07T19:58:45.490
> 
> 标签：javascript, loops, infinite-loop

该方法`constructBuilder()`不应无限执行，因为它设置为仅循环 10 次，并且 data.length 的值永远不会改变。

这个循环和方法实际上工作得很好，直到我在循环中调用另一个方法。

`getOptions(type)`当我在这个循环中调用方法时，值的`i`变化非常奇怪，并且总是遵循这种模式：

```
1st run: i=0
2nd run: i=1
3rd run: i=3
4th run: i=5
5th run: i=6
6th run: i=4
7th run: i=4
8th run: i=4
nth run: i=4 
```

的值`i`被卡在 4，不会增加并且循环无限运行！

为什么会这样？？

这是代码：

```
var data = [["Text Array", "Some more text", "btnText", "btn2text"],
            ["Text2", "2: more text", "btnText2", "btn2text2"],
            ...
           ];

var products, order;

function initialise() {
    products = loadProducts();
    order = new Order();
    constructBuilder();
}

function constructBuilder() {
    var qb_boxes_innerHTML = "";
    for (i=0; i<data.length; i++) {
      alert("i="+i + "; data length="+data.length);
      var box_innerHTML = "<table width=100% height=100% cellpadding=0; cellspacing=0; border=0>";
      box_innerHTML += "<tr><td width=100% height=\"50px\">" + data[i][0] + "</td></tr>";
      box_innerHTML += "<tr><td width=100% class=\"scroll\" valign=\"top\">" + data[i][1] + getOptions(i) + "</td></tr>";
      box_innerHTML += "<tr><td width=100% height=\"50px\" align=\"right\" valign=\"middle\"><form action=\"javascript:next();\"><input type=\"button\" value=\""
                    + data[i][2] + "\" onClick=\"prev();\"/><input id=\"continueBtn\" type=\"submit\" value=\""
                    + data[i][3] + "\" disabled/></form></td></tr>";
      box_innerHTML += "</table>";
      qb_boxes_innerHTML += "<div id=\"qb_box" + i + "\" class=\"qb_box\" style=\"visibility: hidden;\">" + box_innerHTML + "</div>";
    }
    document.getElementById("qb_boxes").innerHTML = qb_boxes_innerHTML;
    document.getElementById("qb_box0").style.visibility = "";
}
function getOptions(type) {
    var optionsList = getProducts(products, type);
    var options_html = "";
    for (i=0; i<optionsList.length; i++) {
      options_html += "<input id=\"check"+type+"_"+i+"\" type=\"checkbox\"/>" + optionsList[i].name + "<BR/>";
    }
    return options_html;
}

function getProducts(productList, type) {
      var productsOfType = new Array();
      for (i=0; i<productList.length; i++) {
        if (productList[i].type == type)
            productsOfType.push(productList[i]);
      }
      return productsOfType;
} 
```

如果您需要更多信息，请发表评论。

感谢您的关注。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T20:00:24.223

通过`i`不使用，`var`您实际上是在使用全局变量`window.i`。改变你的函数，以便`i`被声明为局部变量：

```
function constructBuilder() {
    var qb_boxes_innerHTML = "";
    var i;
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T20:00:39.680

您的`i`变量是全局变量，因此每个函数内的循环共享相同的计数器。在循环声明 ( ) 中使用`var`关键字来声明局部变量。`for``for(var i = 0; ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T20:04:33.100

问题是在constructBuilder() 中调用getOptions(i)。当您在全球范围内声明“i”时，在您的情况下，i 的值不断变回 4

# java - Java 字符串 循环 数组 Null

> ID：10057873
> 
> 赞同：0
> 
> 时间：2012-04-07T19:59:08.650
> 
> 标签：java, arrays, string, null, duplicates

所以我收到了一组电子邮件，我应该阅读它们，将它们存储在一个数组中，删除重复项，然后打印“剩菜”。我几乎可以做到这一点，但是在删除重复项后，当我打印剩菜时，它会打印一个额外的`null`.

这是我的代码。有人可以指出我修复它的方向吗？

```
public class Duplicate {
    public static void main(String [] args){
        Scanner keyboard = new Scanner(System.in);
        System.out.println("Enter file name: ");
        String fileName = keyboard.nextLine();
        if(fileName.equals("")){
            System.out.println("Error: User did not specify a file name.");
        }
        else{Scanner inputStream = null;

        try{inputStream = new Scanner(new File(fileName));
        }
        catch(FileNotFoundException e){
            System.out.println("Error: "+ fileName + " does not exist.");
            System.exit(0);
        }

        String [] address = new String[100];

        for(int i=0;inputStream.hasNextLine();i++){
            String email = inputStream.nextLine();
            address[i]=email.toLowerCase();
            //System.out.println(address[i]);
        }

        Set<String> mail = new HashSet<String>(Arrays.asList(address));

        for(String email:mail){
            System.out.println(email);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T20:02:27.487

我假设您阅读的地址少于 100 个。数组地址中的其余元素为空。这就是空值的原因。

将固定大小的数组替换为`ArrayList<String>`：

```
List<String> address = new ArrayList<String>();
//...
    address.add(email.toLowerCase());
    // ... 
```

您还必须替换集合的构造：

```
Set<String> mail = new HashSet<String>(address); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T20:03:06.223

您正在尝试从文件中读取固定数量的 [100] 个元素。

如果有更多的电子邮件，你会错过一些，如果有更少 - 你会`null`留下一些[`Set`将折叠成一个单一的`null`]。

尝试使用 a[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)而不是数组，或者[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)从一开始就使用 a ..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T20:06:37.530

```
String [] address = new String[100]; 
```

改变

```
SortedSet<String> address = new TreeSet<String>(); 
```

和

```
address[i]=email.toLowerCase(); 
```

改变

```
address.add(email.toLowerCase()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T20:21:38.210

您的代码有几个问题。

*   您使用扫描仪从文件中读取，这是我很少见过的，我自己也从来没有做过。FileInputStream 类为此目的进行了更多优化。

*   您使用固定大小的数组来存储未知数量的字符串

*   您将 for 循环用于未知数量的循环迭代。这没有错，但是while循环更合适。

*   您从一个数组创建一个新的 HashSet。同样没有错，但是为什么您没有在循环中使用 HashSet 呢？您本来可以避免一起使用索引。

我假设您是一个刚开始编写一些代码以自动化您不想手动执行的操作的初级程序员。这当然没有错，在这种情况下，只需使用 ArrayList，因为无论如何，在您的情况下，所有 String 对象都保证是唯一的：

```
public class Duplicate {
 public static void main(String [] args){

Scanner keyboard = new Scanner(System.in);
System.out.println("Enter file name: ");
String fileName = keyboard.nextLine();
if(fileName.equals("")){
    System.out.println("Error: User did not specify a file name.");
}
  else{Scanner inputStream = null;

try{inputStream = new Scanner(new File(fileName));
}
catch(FileNotFoundException e){
    System.out.println("Error: "+ fileName + " does not exist.");
    System.exit(0);
}

ArrayList<String> addresses = new ArrayList<String>();

for(int i=0;inputStream.hasNextLine();i++){
    String email = inputStream.nextLine();
    address.add(email.toLowerCase());
    //System.out.println(email);
}

for(String email:addresses){
    System.out.println(email);
} 
```

有适当的进口。注意：这是最小的变化，还有一些可以改进的地方，见上文。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T20:08:38.473

只需这样做：

```
Set<String> addresses = new HashSet<String>(); // use a Set

while (inputStream.hasNextLine()) {
    addresses.add(inputStream.nextLine().toLowerCase()); // in-line unused variable
}

for (String email : mail) {
    System.out.println(email);
} 
```

# twitter-bootstrap - 将 Twitter Bootstrap 与 Rails 2.3 应用程序一起使用

> ID：10057879
> 
> 赞同：0
> 
> 时间：2012-04-07T20:00:11.887
> 
> 标签：twitter-bootstrap, sass, compass-sass, ruby-on-rails-2, jammit

我们有一个带有 SASS 的 Rails 2.3 应用程序，并且想使用 Twitter Bootstrap。我们使用 Jammit 来打包我们的 JavaScript 和 CSS（在 Compass 生成之后）。

是否有一种简单的方法（或说明）可以将 Twitter Bootstrap（和 LESS）与我们这样的应用程序集成？我似乎只能找到 Rails 3.x 资产管道的例子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:52:02.130

我找到了一种方法来做到这一点......

首先，我下载了[sass-twitter-bootstrap](https://github.com/jlong/sass-twitter-bootstrap)的源代码来获取 Sass 转换后的 Less 文件。

接下来，我将所有 Sass 放入 app/stylesheets/bootstrap 目录，并将主引导和响应文件放入 app/stylesheets。

然后，我将所有 JavaScript 文件放入 public/javascripts/bootstrap 目录。

最后，我在 assets.yml 文件中为 Jammit 创建了一个新的样式表和 JavaScript 包。

因为我打算一次慢慢地将我的应用程序转换为 Twitter 引导几个控制器，所以我创建了一个新的 app/views/layouts/bootstrap.html.erb 布局。

# jquery - MVC.NET 自定义验证器不工作

> ID：10057885
> 
> 赞同：2
> 
> 时间：2012-04-07T20:00:29.357
> 
> 标签：jquery, asp.net-mvc, jquery-ui, validation, jquery-validate

我想为 MVC.NET 框架编写一个自定义验证器，检查输入的日期是否在未来。为此，我编写了以下类：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
    public sealed class InTheFutureAttribute : ValidationAttribute, IClientValidatable
    {
        private const string DefaultErrorMessage = "{0} should be date in the future";

        public InTheFutureAttribute()
            : base(DefaultErrorMessage)
        {
        }

        public override string FormatErrorMessage(string name)
        {
            return string.Format(ErrorMessageString, name);
        }

        public override bool IsValid(object value)
        {
            DateTime time = (DateTime)value;

            if (time < DateTime.Now)
            {
                return false;
            }

            return true;
        }

        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
        {
            var clientValidationRule = new ModelClientValidationRule()
            {
                ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
                ValidationType = "wrongvalue"
            };

            return new[] { clientValidationRule }; 
        }
    } 
```

并将属性添加到我要检查的字段。

在查看页面上，我通过以下方式创建输入字段：

```
<div class="editor-label-search">
            @Html.LabelFor(model => model.checkIn)
        </div>
        <div class="editor-field-search-date">
            @Html.EditorFor(model => model.checkIn)

             <script type="text/javascript">
                $(document).ready(function ()
                { $('#checkIn').datepicker({ showOn: 'button', buttonImage: '/Content/images/calendar.gif', duration: 0, dateFormat: 'dd/mm/yy' }); });
            </script>  
            @Html.ValidationMessageFor(model => model.checkIn)
        </div> 
```

当我为需要在我的验证器中检查属性代码的模型的控制器提交表单时，它会返回 false，但它不会显示错误，而是调用我的控制器的操作并向其发送无效模型。

难道我做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T20:07:52.330

您是否添加了客户端验证逻辑：自定义验证器和不显眼的适配器。如果没有，这是客户端逻辑：

//添加客户端验证器：

```
jQuery.validator.addMethod("wrongvalue",
 function (value, element, param) {

    var dateValue = $.datepicker.parseDate('dd/mm/yy', value); //use any date parser, if UI/Datepicker is not used

    var now = new Date();
    var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

    var isValid = dateValue >= today;
    return isValid;
}); 
```

//添加一个不显眼的适配器：

```
jQuery.validator.unobtrusive.adapters.add("wrongvalue", [], function (options) {

    options.rules["wrongvalue"] = true;
    options.messages["wrongvalue"] = options.message;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T21:09:32.583

你有：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

在您的 web.config 中？

您是否在页面或主/布局中包含 jquery、jquery.validate 和 jquery.validate.unobtrusve javascript？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T23:23:11.743

我有同样的问题。MVC4 的默认项目模板包括 jquery.validate.min.js 和 jquery.validate.js 文件。它包括 jquery.validate.unobtrusive.js 和 jquery.validate.unobtrusive.min.js 文件。

我删除了 jquery.validate.min.js 和 jquery.validate.unobtrusive.min.js 并且我的自定义日期验证器似乎工作正常。

# regex - 全局匹配的名称值对，它们之间没有分隔符

> ID：10057894
> 
> 赞同：1
> 
> 时间：2012-04-07T20:01:18.837
> 
> 标签：regex, perl, key-value

我有以下格式化的示例字符串：

```
== header == information about things ==headeragain== info can have characters like.*?{= 
```

等仅在一行上。

我想将其解析为哈希，使得键是“==.+?==”，值是键之后的信息。我尝试了几个正则表达式来全局匹配这些对：

```
%hash = $string =~ /(==.+?==)(.+)/g 
```

和

```
%hash = $string =~ /(==.+?==)(.+?)/g 
```

将匹配第一个键，然后将其他所有内容作为其值，并分别仅匹配键。

```
%hash = $string =~ /(==.+?==)(.+(?===.+?==))/g 
```

应该向前看下一个键，但不是我理解的“吃掉它”。但是，它只会匹配第一对而不会进一步。

我认为这个问题来自对全局修饰符如何起作用的误解。我需要在我的一种表达方式中进行一些调整吗？还是我需要做一些完全不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:33:57.683

即使您使用的是非贪婪修饰符，第二个示例中的第二个子组也没有限制。

添加积极的前瞻性：`(?=$|==)`价值之后。这`(?=`是前瞻块的声明，`$`或者`==`是您正在搜索的子字符串。

即解决方案是：`/(==.+?==)(.+?)(?=$|==)/g`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:42:22.647

```
while ($line =~ /
   == \s*
   ( .+? )
   \s* == \s*
   ( .*? )
   (?= \s* (?: == | \z ) )
/xg) {
   my $key = $1;
   my $val = $2;
   ...
} 
```

但我不喜欢使用“ `?`”量词修饰符。当给出错误或意外的输入时，它实际上并不能防止匹配错误的东西。所以我会使用：

```
while ($line =~ /
   == \s*
   ( \S (?: (?! \s* == ). )* )
   \s* == \s*
   ( (?: (?! \s* == ). )* )
/xg) {
   my $key = $1;
   my $val = $2;
   ...
} 
```

# android - 标签视图中标签下方底部的Android admob广告

> ID：10057895
> 
> 赞同：1
> 
> 时间：2012-04-07T20:01:23.470
> 
> 标签：android, android-layout, admob

我有一个这样的标签布局：

## ------------------

## ------------------

{1}----[2]-----[3]

代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:layout_weight="1"/>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:layout_marginBottom="-4dp"/>

    </LinearLayout>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/topLayout"
    android:layout_gravity="bottom"
>           
    <!-- Ad Placeholder -->
    <com.google.ads.AdView      
        android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adUnitId="MYID"
        ads:adSize="BANNER"
        ads:loadAdOnCreate="true"
        android:layout_gravity="top"
        android:layout_alignParentBottom="true"
        android:gravity="center_horizontal"
    />
</RelativeLayout>
    </TabHost> 
```

我的 3 个标签在底部。但是我的广告与它们重叠，有没有办法将广告放在标签下方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:32:11.077

从 AdMob 的广告目录示例应用程序中查看此[示例。](http://code.google.com/p/google-mobile-dev/source/browse/adcatalog/res/layout/tabviewexample.xml?repo=ad-catalog-android)它涉及将 TabHost 和广告包裹在 RelativeLayout 周围，将广告与底部对齐，并将 TabHost 置于广告上方。

您可能想更深入地了解示例应用程序 - 它还有其他有关如何在各种布局中使用 AdMob 的工作示例。

# php - 如何在表单处理中使用 Jquery UI DatePicker

> ID：10057898
> 
> 赞同：0
> 
> 时间：2012-04-07T20:01:39.103
> 
> 标签：php, forms, jquery-ui, jquery, datepicker

我已使用 Jquery UI DatePicker 作为表单中的选项来选择生日。

但是，jquery 在`<div id="datepicker"></div>`标签中提供了一个日期选择器，

现在我在我的表单中使用它，我怎样才能获得它的价值以使其适用于我的表单处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:07:29.217

改为使用 `input`字段。

```
<input type="text" id="datepicker" name="mydate"></p> 
```

您还可以使用用户`dateFormat`选项来格式化日期：

```
$( "#datepicker" ).datepicker({
  dateFormat: 'yy-mm-dd'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:08:56.153

如果您尝试将 id 设置为输入而不是 div，

```
<input id="datepicker" /> 
```

那对你有用吗？

# c# - 获取本月的所有订单

> ID：10057907
> 
> 赞同：0
> 
> 时间：2012-04-07T20:03:48.617
> 
> 标签：c#, datetime, iqueryable, date-range

这是我当前的月份：

```
model.SalesForMonth = orders.Where(o => o.DateOfPayment.Value.Month == DateTime.Now.Month)
                            .Select(o => o.Total)
                            .Sum(); 
```

这没有按预期工作，因为它还在获取去年同月发生的订单。

当然我可以比较年份*和*月份，但必须有一个我不熟悉的更具表现力的解决方案。

如何使用 Linq 干净地做到这一点？（*不确定是否相关，但`orders`它是来自实体框架的 IQueryable*）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T20:07:35.123

最简单的方法是创建起点和终点：

```
// TODO: Consider what time zone you want to consider the current date in
var today = DateTime.Today;
var start = new DateTime(today.Year, today.Month, 1);
var end = start.AddMonths(1); // Exclusive end-point

var query = orders.Where(o => o.DateOfPayment.Value >= start &&
                              o.DateOfPayment.Value < end)
                        .Sum(o => o.Total) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:07:48.450

我不确定你想要什么。您也必须比较年份以确保订单来自今年。我认为您可以使用 linq 这样做：

```
 model.SalesForMonth = orders.Where(o => (o.DateOfPayment.Value.Month == DateTime.Now.Month
 && o.DateOfPayment.Value.Year == DateTime.Now.Year))
                                .Select(o => o.Total)
                                .Sum(); 
```

# java - 在基于 Swing 的应用程序中使用 JSlider 实现寻找媒体文件

> ID：10057914
> 
> 赞同：2
> 
> 时间：2012-04-07T20:04:46.470
> 
> 标签：java, swing, jslider

我正在使用 jlGUI 和 jAudiotagger 库创建一个简单的媒体播放器。

随着播放的进行，我使用 JSlider 实现了一个自动移动的指示器。

现在，我必须通过注册该滑块来生成事件来实现通过拖动来查找文件。

所以问题是，当注册搜索器时，滑块的自动搜索（在播放时）也会导致一个ChangeEvent，所以它一次又一次地寻找到自己的位置。

我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T21:27:34.557

如何创建一个`ChangeListener`允许您通过方法调用打开和关闭它的方法？

因此，当您处于*动画模式*时，它会忽略`stateChanged()`事件。

当用户单击`JSlider`（用 识别`MouseListener`）时，停止动画并调用`MyChangeListener.setAnimationMode(false)`，以便您的侦听器对用户交互做出反应。

```
public class MyChangeListener implements ChangeListener
{
  boolean animationMode = true;

  public void setAnimationMode( boolean mode )
  {
    this.mode = true;
  }

  @Override
  public void stateChanged(ChangeEvent arg0)
  {
    if ( !animationMode )
    {
      // do stuff
    }
  }
} 
```

# portable-executable - 查看 Codeview 符号

> ID：10057915
> 
> 赞同：1
> 
> 时间：2012-04-07T20:04:53.460
> 
> 标签：portable-executable

我有一个带有大量调试符号的旧游戏可执行文件，显然是 Codeview 格式。如何以人类可读的格式查看本节的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:12:45.467

当前的 Windows 编译器不会将调试符号的内容放入映像文件本身，它们仅将对外部符号文件的引用放入映像中。他们将调试数据放入带有 PDB（程序数据库）扩展名的单独符号文件中。正如您所提到的，这种格式也称为 CodeView。在您的情况下，看起来（因为调试部分很大）您可能会遇到一种非常旧的符号格式。

[本文](http://www.microsoft.com/msj/0399/hood/hood0399.aspx)解释了不同的符号格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T22:39:41.780

好的，鉴于这是针对 32 位 Windows 的，我相信普通的 Windows[符号处理程序 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680684.aspx)应该能够读取数据。从那里开始，几乎就是决定你想要什么数据，以及你希望它如何格式化的问题。

# jpa-2.0 - Play 框架中的 JPA 2.0 和 @Type 注释

> ID：10057919
> 
> 赞同：3
> 
> 时间：2012-04-07T20:05:10.870
> 
> 标签：jpa-2.0, jodatime, playframework-2.0

我想用 Play Framework 2.0 试用 Joda Time。所以我有这个类叫做**Release**：

```
@Entity
public class CommunicationLog extends Model {

private static final long serialVersionUID = 7846963755390952329L;

@Id
public int pk;

public Task taskRef;

public String comment;

@Type(type = "org.joda.time.contrib.hibernate.PersistentDateTime")
public DateTime createdDate;

public Person personRef;

} 
```

在这篇文章（[Persist Joda-time's DateTime via Hibernate](https://stackoverflow.com/questions/6284098/persist-joda-times-datetime-via-jpa)）中，我读过使用**joda-time-hibernate**。所以我使用 SBT 将它添加到我的依赖项中，它会下载 jar 文件并将其添加到我的类路径中：

```
"joda-time" % "joda-time-hibernate" % "1.3" 
```

但问题仍然是无法解决**@Type 。**我还需要将 org.hibernate.annotations 和 hibernate 核心添加到我的类路径中吗？为什么这不是 JPA 2.0 的一部分？还是我错过了项目中的其他内容？

**编辑 2012-05-07：已解决**

当我添加以下依赖项时它可以工作：

```
"org.hibernate" % "hibernate-core" % "3.5.6-Final",
"org.hibernate" % "hibernate-annotations" % "3.5.6-Final",
"joda-time" % "joda-time-hibernate" % "1.3" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T20:34:11.997

是的，您必须将**org.hibernate.annotations**添加到您的类路径中。
`@Type`是 Hibernate 逻辑（自定义 UserType）的一部分，它不是 JPA 的逻辑。
因此，您必须将 JPA 注释与 Hibernate 注释混合使用

# spring - JBOSS 7.1.1 javax.persistence.PersistenceException PersistenceProvider in 'org.apache.openjpa.persistence.PersistenceProviderImpl not found

> ID：10057921
> 
> 赞同：2
> 
> 时间：2012-04-07T20:05:16.923
> 
> 标签：spring, jpa, jboss7.x, persistence.xml

我是 JBOSS 的新手，我停留在 JBOSS 7.1.1 中应用程序的基本部署中

我创建了一个带有 persistent.xml 的 webapp

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="mydummy-jpa" transaction-type="RESOURCE_LOCAL">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <jta-data-source>java:jboss/datasources/mydummyexample</jta-data-source>  
        <class>com.nsn.caobusiness.selfcare.entity.DummyTable</class>
        <properties>
            <property name="jboss.as.jpa.providerModule" value="org.jboss.as.jpa.openjpa" />
            <property name="openjpa.Log" value="DefaultLevel=WARN,SQL=TRACE" />
            <property name="openjpa.jdbc.DBDictionary" value="mysql(UseClobs=true)"/>           
        </properties>
    </persistence-unit>
</persistence> 
```

我的standalone.xml 中的数据源如下所示：

```
<datasource jndi-name="java:jboss/datasources/mydummyexample" pool-name="mydummyexample" enabled="true" use-java-context="true" use-ccm="true" jta="true">
                    <connection-url>jdbc:mysql://localhost:3306/worldonstreet</connection-url>
                    <driver>mysql</driver>
                    <security>
                        <user-name>root</user-name>
                        <password></password>
                    </security>
                    <statement>
                        <prepared-statement-cache-size>100</prepared-statement-cache-size>
                        <share-prepared-statements/>
                    </statement>
                </datasource> 
```

当我部署应用程序时，出现以下异常：

```
23:48:06,656 INFO  [org.jboss.as.jpa] (MSC service thread 1-5) JBAS011401: Read persistence.xml for mydummy-jpa
23:48:08,000 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.unit."SpringDatabaseTransaction.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.unit."SpringDatabaseTransaction.war".INSTALL: Failed to process phase INSTALL of deployment "SpringDatabaseTransaction.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_26]
 **Caused by: javax.persistence.PersistenceException: JBAS011466:
 PersistenceProvider
 'org.apache.openjpa.persistence.PersistenceProviderImpl' not found**

    at org.jboss.as.jpa.processor.PersistenceUnitDeploymentProcessor.lookupProvider(PersistenceUnitDeploymentProcessor.java:555)
    at org.jboss.as.jpa.processor.PersistenceUnitDeploymentProcessor.deployPersistenceUnit(PersistenceUnitDeploymentProcessor.java:295)
    at org.jboss.as.jpa.processor.PersistenceUnitDeploymentProcessor.addPuService(PersistenceUnitDeploymentProcessor.java:258)
    at org.jboss.as.jpa.processor.PersistenceUnitDeploymentProcessor.handleWarDeployment(PersistenceUnitDeploymentProcessor.java:194)
    at org.jboss.as.jpa.processor.PersistenceUnitDeploymentProcessor.deploy(PersistenceUnitDeploymentProcessor.java:118)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final] 
```

我整天都被困在这上面。非常感谢这个论坛的任何帮助。

问候，莱戈拉斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T07:33:19.127

我下载了[Apache Openjpa](http://www.apache.org/dyn/closer.cgi/openjpa/2.2.0/apache-openjpa-2.2.0-binary.zip)，提取了 jars，在 jboss 中的 \JBOSS_HOME>\modules\org\apache\openjpa 下创建了一个模块，并将我在 persistent.xml 中的属性更改为

```
 <property name="jboss.as.jpa.providerModule" value="org.apache.openjpa" /> 
```

module.xml 看起来像：

```
<module xmlns="urn:jboss:module:1.1" name="org.apache.openjpa"> 
    <resources> 
        <resource-root path="openjpa-2.2.0.jar"/> 
        <resource-root path="serp-1.13.1.jar"/> 
    </resources> 
        <dependencies> 
            <module name="javax.persistence.api"/> 
            <module name="javax.transaction.api"/> 
            <module name="javax.validation.api"/> 
            <module name="org.apache.commons.lang"/> 
            <module name="org.apache.commons.collections"/> 
            <module name="org.apache.log4j"/> 
        </dependencies> 
</module> 
```

它终于奏效了。:) 感谢@lurscher 的评论。它激励我继续前进。

# c# - 大型项目中 WinForms 应用程序之间的通信

> ID：10057925
> 
> 赞同：0
> 
> 时间：2012-04-07T20:05:40.447
> 
> 标签：c#, winforms, file, inter-process-communicat

我正在做一个大型项目（团队分开工作），现在大多数应用程序都已完成，我们需要将所有内容集成在一起。许多应用程序/表单需要与其他应用程序/表单进行信息交流或向其他应用程序/表单索取信息；我想知道是否有标准的方法来做到这一点。我们计划这样做的方式是通过使用共享文件（例如，一个应用程序将信息写入文件，而另一个应用程序读取它）。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:27:22.853

是的，正如@Uwe Keim 在评论中所说，您绝对应该为所有事情使用数据库。不过，SO 答案并不是开始教您有关关系数据库以及如何从 C# 应用程序中正确使用它们的地方。你应该告诉管理团队的人这是要走的路，并让他们找出雇用谁来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:26:14.353

关于您的问题，我认为使用文件共享解决方案有一个明显的缺点，那就是由于 IO 操作导致您的操作延迟。

此外，还有其他选择，请参见下文：

为了完全实现您的要求，您应该将应用程序之间的通信与应用程序内部表单之间的通信分开。

为了实现应用程序之间的通信，我建议您使用 WCF 的订阅者/发布者模式。实施非常简单。你可以谷歌一下。一个例子是[here](http://www.codeproject.com/Articles/22796/WCF-Implementation-of-the-Publisher-Subscriber-Mod)。通过这样做，您可以准确控制何时发生某些事情，并且其他应用程序应该按照您的预期重新运行。

要在应用程序中实现表单之间的通信，最好使用 Pub/Sub 模式创建一个事件聚合器，然后将其注入到您的应用程序中。你可以看看它是如何在[SCSF](http://smartclient.codeplex.com/)中实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T09:06:32.220

另一种解决方案是实现消息协议以使应用程序相互通信。为了避免瓶颈，`message queue`服务可以管理消息交换。

参考：

*   [维基百科](http://en.wikipedia.org/wiki/Microsoft_Message_Queuing)
*   [微软](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)

# mercurial - 汞更新-C 没有按预期工作

> ID：10057927
> 
> 赞同：2
> 
> 时间：2012-04-07T20:06:04.263
> 
> 标签：mercurial, branch, switch-statement

所以我已经从几个来源验证了 hg`update -C <branch>`是在 Mercurial 中切换分支的批准方式。但是，它似乎并没有为我做这项工作：

```
Firefly:templatedoc Ken$ hg branches
IntCursor                      7:1aec742eb390
default                        6:bf3fba585a57 (inactive)
Firefly:templatedoc Ken$ hg update -C default
0 files updated, 0 files merged, 0 files removed, 0 files unresolved
Firefly:templatedoc Ken$ hg branches
IntCursor                      7:1aec742eb390
default                        6:bf3fba585a57 (inactive) 
```

谢谢你！肯

# oauth - 带有 Google Analytics API v3 的 OAuth 2.0

> ID：10057928
> 
> 赞同：28
> 
> 时间：2012-04-07T20:06:12.023
> 
> 标签：oauth, google-api, oauth-2.0, google-analytics-api, garb-gem

我曾经能够使用我的帐户登录名和密码查询 Google Analytics API。Google 现在正在使用 OAuth 进行身份验证，这非常棒……唯一的问题是我只需要一个访问令牌。我不想让其他用户获取他们的分析数据。

我只想能够获取我的数据。有没有办法只为我的应用程序或我的分析帐户生成访问令牌？

我知道存在这样的解决方案......例如，Twitter 为不需要特定用户登录的应用程序提供了他们所谓的“单用户 oauth”。

再一次，我在这里想要完成的只是通过 API 获取 MY OWN 分析数据。

有没有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-15T09:20:34.957

我正在添加一个 PHP 答案 - 您可以调整或将其转换为 garb / ruby​​ 代码。

您现在应该可以通过服务帐号使用 Google Analytics（分析）了。您确实必须使用私钥而不是访问令牌。

**在 API 控制台中创建应用程序**
基本上，您转到 Google API 控制台并创建一个应用程序。
在服务选项卡中启用 Google Analytics。
在 API Access 选项卡中，创建一个新的 OAuth ID（创建另一个客户端 ID... 按钮），选择**服务帐户**并下载您的私钥（生成新密钥... 链接）。稍后您必须将密钥上传到您的网络服务器。

在 API 访问页面的服务帐户部分，复制电子邮件地址 (@developer.gserviceaccount.com) 并将具有此电子邮件地址的新用户添加到您的 Google Analytics 个人资料中。**如果你不这样做，你会得到一些很好的错误**

**代码**
从 SVN 下载最新的 Google PHP 客户端（从命令行`svn checkout http://google-api-php-client.googlecode.com/svn/trunk/ google-api-php-client-read-only`）。

您现在可以在代码中访问 Analytics API：

```
require_once 'Google_Client.php';              
require_once 'contrib/Google_AnalyticsService.php';

$keyfile = 'dsdfdss0sdfsdsdfsdf44923dfs9023-privatekey.p12';

// Initialise the Google Client object
$client = new Google_Client();
$client->setApplicationName('Your product name');

$client->setAssertionCredentials(
    new Google_AssertionCredentials(
        '11122233344@developer.gserviceaccount.com',
        array('https://www.googleapis.com/auth/analytics.readonly'),
        file_get_contents($keyfile)
    )
);

// Get this from the Google Console, API Access page
$client->setClientId('11122233344.apps.googleusercontent.com');
$client->setAccessType('offline_access');
$analytics = new Google_AnalyticsService($client);

// We have finished setting up the connection,
// now get some data and output the number of visits this week.

// Your analytics profile id. (Admin -> Profile Settings -> Profile ID)
$analytics_id   = 'ga:1234';
$lastWeek       = date('Y-m-d', strtotime('-1 week'));
$today          = date('Y-m-d');

try {
    $results = $analytics->data_ga->get($analytics_id,
                        $lastWeek,
                        $today,'ga:visits');
    echo '<b>Number of visits this week:</b> ';
    echo $results['totalsForAllResults']['ga:visits'];
} catch(Exception $e) {
    echo 'There was an error : - ' . $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-04T17:07:42.747

[Terry Seidler](https://stackoverflow.com/a/12892625/1391050)为 php 很好地回答了这个问题。我想添加一个**java**代码示例。

## API 控制台设置

正如 Terry 解释的那样，首先在 google api 控制台中执行所需的步骤：

> 基本上，您转到 Google API 控制台并创建一个应用程序。在服务选项卡中启用 Google Analytics。在 API Access 选项卡中，创建一个新的 OAuth ID（创建另一个客户端 ID... 按钮），选择服务帐户并下载您的私钥（生成新密钥... 链接）。稍后您必须将密钥上传到您的网络服务器。在 API 访问页面的服务帐户部分，复制电子邮件地址 (@developer.gserviceaccount.com) 并将具有此电子邮件地址的新用户添加到您的 Google Analytics 个人资料中。如果你不这样做，你会得到一些很好的错误

## 获取必要的库

从以下网址下载 Google Analytics Java 客户端： [https ://developers.google.com/api-client-library/java/apis/analytics/v3](https://developers.google.com/api-client-library/java/apis/analytics/v3)

或者添加以下 maven 依赖项：

```
 <dependency>
        <groupId>com.google.apis</groupId>
        <artifactId>google-api-services-analytics</artifactId>
        <version>v3-rev94-1.18.0-rc</version>
    </dependency>
    <dependency>
        <groupId>com.google.http-client</groupId>
        <artifactId>google-http-client-jackson</artifactId>
        <version>1.18.0-rc</version>
    </dependency> 
```

## 现在看代码：

```
public class HellowAnalyticsV3Api {

private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
private static final JsonFactory JSON_FACTORY = new JacksonFactory();

public void analyticsExample() {

    // This is the .p12 file you got from the google api console by clicking generate new key
    File analyticsKeyFile = new File(<p12FilePath>);

    // This is the service account email address that you can find in the api console
    String apiEmail = <something@developer.gserviceaccount.com>;

    GoogleCredential credential = new GoogleCredential.Builder()
        .setTransport(HTTP_TRANSPORT)
        .setJsonFactory(JSON_FACTORY)
        .setServiceAccountId(apiEmail)
        .setServiceAccountScopes(Arrays.asList(AnalyticsScopes.ANALYTICS_READONLY))
        .setServiceAccountPrivateKeyFromP12File(analyticsPrivateKeyFile).build();

    Analytics analyticsService = new Analytics.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
        .setApplicationName(<your application name>)
        .build();

    String startDate = "2014-01-03";
    String endDate = "2014-03-03";
    String mertrics = "ga:sessions,ga:timeOnPage";

    // Use the analytics object build a query
    Get get = analyticsService.data().ga().get(tableId, startDate, endDate, mertrics);
    get.setDimensions("ga:city");
    get.setFilters("ga:country==Canada");
    get.setSort("-ga:sessions");

    // Run the query
    GaData data = get.execute();

    // Do something with the data
    if (data.getRows() != null) {
        for (List<String> row : data.getRows()) {
            System.out.println(row);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T20:39:38.520

您可以使用刷新令牌。将刷新令牌存储在数据库或安全配置文件中，然后使用它来显示统计信息。

[使用 OAuth 2.0 刷新令牌的 Google API 离线访问](http://www.jensbits.com/2012/01/09/google-api-offline-access-using-oauth-2-0-refresh-token/)将使您了解如何捕获然后存储您的刷新令牌。

另请参阅[将 OAuth 2.0 用于 Web 服务器应用程序 - 离线访问](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-19T11:03:11.953

您好，我找到了解决方案，它对我有用

你必须改变这个

```
immediate: true 
```

至

```
immediate: false 
```

它看起来像

```
function checkAuth() {
  gapi.auth.authorize({
    client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T20:43:28.457

Google 有“服务帐户”（代表您的应用程序而不是最终用户调用 Google API），但它的工作方式有点不同，因为它不会使用访问令牌而是使用私钥。

[您可以在https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)找到更多详细信息

# c# - 类似于 ObjectListView 的 WPF 控件

> ID：10057929
> 
> 赞同：1
> 
> 时间：2012-04-07T20:06:14.697
> 
> 标签：c#, wpf, xaml, expression-blend

我正在使用 WPF 编写一个应用程序，我需要做一些看起来像这样的东西（见图）：

![对象列表视图](../Images/d76a62d58e70d618d4da92dcc5115004.png)

我应该为此使用什么控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:19:38.540

~~如果您不需要分组（“聘请厨师”和“寻求晚餐邀请”标题），那么~~ [`DataGrid`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.aspx)应该让您接近。您可以将其绑定`ItemsSource`到您的项目集合，并定义绑定到项目属性的自定义列。

例如，您可以将 a[`DataGridTextColumn`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtextcolumn.aspx)用于“职业”、[`DataGridCheckBoxColumn`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcheckboxcolumn.aspx)“讲笑话？”以及[`DataGridTemplateColumn`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtemplatecolumn.aspx)需要自定义`DataTemplate`可视化的更复杂的属性，例如主“人员”列或“烹饪技能”。

**Edi** : 看起来`DataGrid`确实[支持分组](http://wpftutorial.net/DataGrid.html#grouping)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:26:18.187

你应该去 ListView

[http://msdn.microsoft.com/en-us/library/ms754027(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms754027%28v=vs.90%29.aspx)

# javascript - 如何用自定义函数替换 javascript 原型

> ID：10057931
> 
> 赞同：7
> 
> 时间：2012-04-07T20:06:25.713
> 
> 标签：javascript, prototype

```
// I am trying to make a clone of String's replace function
// and then re-define the replace function (with a mind to
// call the original from the new one with some mods)
String.prototype.replaceOriginal = String.prototype.replace
String.prototype.replace = {} 
```

下一行现在坏了 - 我该如何修复？

```
"lorem ipsum".replaceOriginal(/(orem |um)/g,'') 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-07T20:13:21.210

唯一可能的问题是您的代码执行了两次，这会导致问题：真正的原始代码`.replace`将消失。

为避免此类问题，我强烈建议使用以下通用方法替换内置方法：

```
(function(replace) {                         // Cache the original method
    String.prototype.replace = function() {  // Redefine the method
        // Extra function logic here
        var one_plus_one = 3;
        // Now, call the original method
        return replace.apply(this, arguments);
    };
})(String.prototype.replace); 
```

*   **这允许在不**破坏现有功能的情况下进行多种方法修改
*   上下文由以下方式保存[`.apply()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)：通常，[`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)对象对于（原型）方法至关重要。

# python - 尝试对用户的（django-haystack）执行索引搜索

> ID：10057938
> 
> 赞同：1
> 
> 时间：2012-04-07T20:07:52.893
> 
> 标签：python, django, django-haystack

我正在使用`django-haystack`. 我编写了小代码，可以从中搜索州和国家/地区`UserProfile`。如果我搜索州/国家，那么它就像魅力一样。但是如果我搜索`user`然后它不会显示任何结果。我错过了什么吗？谢谢

```
class UserProfileIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    author = indexes.CharField(model_attr='user', faceted=True)
    state = indexes.CharField(model_attr='state') 
    country = indexes.CharField(model_attr='country', null=True) 

def get_model(self):
    return UserProfile

def index_queryset(self):
    return self.get_model().objects.all()

def prepare_author(self, obj):
    return "%s <%s>" % (obj.user.get_full_name(), obj.user.email) 
```

这里网址

```
sqs = SearchQuerySet().facet('author')      
urlpatterns += patterns('haystack.views',
    url(r'^search/', FacetedSearchView(form_class=FacetedSearchForm, searchqueryset=sqs), name='haystack_search'),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T09:43:47.457

what is content of your data template have you included something like

```
{{object.user}} 
```

in data template (UserProfile_text file ) . What ever is defined in data template is searched from the index.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:19:54.887

你怎么`UserProfile`定义的？

另请注意，`repare_author(self, obj)`一旦您的用户名称中包含非 ASCII 符号，您将中断。而是返回一个`u"..."`字符串。

# c# - 单行 if 语句的格式更清晰

> ID：10057939
> 
> 赞同：2
> 
> 时间：2012-04-07T20:07:54.893
> 
> 标签：c#, resharper

ReSharper 中是否有设置自动格式化单语句 IF 语句，大括号块位于一行？这是在 ReSharper 6.1 上。

```
//What I want
if(tired)
{ Sleep(); }
else
{ Party(); }

//what I get 
if(tired)
{
    Sleep();
}
else
{
    Party();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T20:23:31.657

即使是这样，*我*个人还是建议不要使用它，因为它*不可读*。

我*个人*可以接受

```
if(tired)
    Sleep();
else
    Party() 
```

但不是您正在寻找的东西。

祝你好运

# facebook - 用户离线时 Facebook Api 贴墙

> ID：10057941
> 
> 赞同：0
> 
> 时间：2012-04-07T20:08:20.540
> 
> 标签：facebook, post

我在 myfacebook (publish_stream) 上获得了应用程序的用户设置页面的权限。即使允许的用户已经注销，我如何发送东西到墙（如 Formspring）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:30:46.770

根据[http://developers.facebook.com/docs/authentication/permissions/](http://developers.facebook.com/docs/authentication/permissions/)，在用户退出您的应用程序/网站后，您需要做的就是用户将“**应用程序访问令牌**”发布到该用户的墙上只要您仍然对该用户具有 publish_stream 权限。

> **发布流**
> 
> 使您的应用能够向用户的信息流和用户朋友的信息流发布内容、评论和点赞。有了此权限，您可以随时将内容发布到用户的供稿。但是，请注意 Facebook 推荐用户发起的共享模式。请阅读平台政策以确保您了解如何正确使用此权限。

# java - 带有 URLConnection 和 getInputStream 的 IOException

> ID：10057942
> 
> 赞同：1
> 
> 时间：2012-04-07T20:08:29.417
> 
> 标签：java, android, inputstream, httpurlconnection

我正在尝试从带有 android 应用程序的网站获取数据。

这是我的代码：

```
URL url = new URL("http://www.google.com/ig/api?weather=Schriesheim,Germany");
URLConnection uCon = url.openConnection();
iStream = uCon.getInputStream(); 
```

getInputStream() 方法返回一个 IOException，我已经尝试了很多在 Internet 上找到的东西，但没有任何效果。顺便说一句，我在 Java 应用程序中尝试了这段代码并且它有效，所以我认为问题出在我的 Android 设置中。

我已经在 Manifest.xml 中添加了这些行：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

我正在使用 Eclipse 并运行 Archlinux x64。任何想法 ？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:13:33.953

您可以尝试使用此功能从互联网获取数据

```
 public static String get(String from) {
            try {
                HttpClient client = new DefaultHttpClient();  
                HttpGet get = new HttpGet(from);
                HttpResponse responseGet = client.execute(get);  
                HttpEntity resEntityGet = responseGet.getEntity();  
                if (resEntityGet != null) return EntityUtils.toString(resEntityGet);
                } catch (Exception e) {
                    Log.e("GET", e.toString());
                }
            return null;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:04:43.720

尝试

```
uCon.setDoInput(true); 
```

前

```
uCon.getInputStream(); 
```

# html - 如何根据您所在的页面更改导航栏中超链接的颜色？

> ID：10057945
> 
> 赞同：0
> 
> 时间：2012-04-07T20:09:34.983
> 
> 标签：html, css, hyperlink

对于这个例子，让我们假设一个导航栏包含以下元素：

```
cats - dogs - sheep - cows 
```

我想这样做，所以如果你在`cats`页面上，`cats`文本是红色的，但其余的保持白色，如果你在`dogs`页面上然后`dogs`变成蓝色等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:17:15.887

创建一个类（比如`.active`）并将其分配给每个页面上的活动标签（猫标签将获得猫页面上的活动类）。您的代码如下所示：

**HTML**

```
<a class="active">cats</a>
<a href="dogs.html">dogs</a>
<a href="sheep.html">sheep</a>
<a href="cows.html">cows</a> 
```

**CSS**

```
a {
    color: white;
}

a.active {
    color: red;
} 
```

**编辑**：如果您希望每个活动页面都有不同的颜色，您也可以使用我们的内联 CSS。

```
<a style="color:red">cats</a>
<a href="dogs.html">dogs</a>
<a href="sheep.html">sheep</a>
<a href="cows.html">cows</a> 
```

# javascript - 在页面加载时启动 FancyBox

> ID：10057947
> 
> 赞同：0
> 
> 时间：2012-04-07T20:09:43.463
> 
> 标签：javascript, jquery, fancybox, onload

我正在使用[fancyapps.com](http://www.fancyapps.com/)的 FancyBox，我想知道如何在页面加载时调用 fancybox.ajax。

这是我所拥有的：

```
$(document).ready(function(){
    $("#what").fancybox();
});

<a href="what.html" id="what" class="fancybox fancybox.ajax"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:11:18.777

调用文档准备好的方法

HTML

```
<a id="myFancybox" href="http://mydomain.com/mine.jpg" /> 
```

和脚本是

```
$(function(){

    $("#myFancybox").fancybox();

}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

`document.ready`指定当 DOM 完全加载时要执行的函数。

# asp.net - 为什么我的嵌套母版页会丢失 CSS 格式？

> ID：10057949
> 
> 赞同：2
> 
> 时间：2012-04-07T20:10:04.800
> 
> 标签：asp.net, css, visual-studio, visual-studio-2010, master-pages

我的网站结构如下

```
/Style.css
/MasterPage.Master
/Default.aspx

/Member/
  member.master
  member.aspx 
```

/MasterPage.Master 指向 style.css 如下

```
<link rel="stylesheet" href="style.css" type="text/css" media="screen" /> 
```

它就像一个魅力。

添加`member.master`作为嵌套母版页后，`MasterPage.Master`我注意到 VS2010 和呈现的网页都无法在子级应用格式`member.master`

经过一番谷歌搜索后，我发现我可以使用以下代码

```
<link rel="stylesheet" href="<%= ResolveUrl("style.css") %>" type="text/css" media="all"/> 
```

网页现在已正确呈现，但我如何在 Visual Studio 的设计模式下获得相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:17:56.337

正如我所看到的，所有路径都应该作为相对路径。

如果您的样式表为

```
<link href="~/Style.css" rel="stylesheet" type="text/css" /> 
```

页面应该运行良好。同时，您需要将母版页称为：

在你的`member.master`：

```
MasterPageFile="~/Site.master" 
```

在`member.aspx`：

```
MasterPageFile="~/Member/member.master" 
```

希望这会帮助你。

# sql-server-2008 - TSQL 按时间分组，包括开始日期和结束日期

> ID：10057951
> 
> 赞同：2
> 
> 时间：2012-04-07T20:10:10.667
> 
> 标签：sql-server-2008, tsql, time, aggregation

我一直在努力制作一组报告，以 15 分钟的增量为“团队”和“用户”提供燃烧的卡路里总和。

我使用的表如下：

```
IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('Teams') AND  OBJECTPROPERTY(id, 'IsTable') = 1)
DROP TABLE Teams;

CREATE TABLE Teams
(
Team_ID int NOT NULL PRIMARY KEY IDENTITY (1,1),
Team_Name varchar(100),
Team_Description varchar(200)
);

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('Users') AND  OBJECTPROPERTY(id, 'IsTable') = 1)
DROP TABLE Users;

CREATE TABLE Users
(
User_ID int NOT NULL PRIMARY KEY IDENTITY (1,1),
User_Name varchar(100)
);

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('Team_User') AND  OBJECTPROPERTY(id, 'IsTable') = 1)
DROP TABLE Team_User;

CREATE TABLE Team_User
(
Team_ID int,
User_ID int
);

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('Workouts') AND  OBJECTPROPERTY(id, 'IsTable') = 1)
DROP TABLE Workouts;

CREATE TABLE Workouts
(
Workout_ID int NOT NULL PRIMARY KEY IDENTITY (1,1),
User_ID int,
Workout_Type int,
Start_Time datetime,
End_Time datetime,
Calories float
);

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('LK_Workout_Type') AND  OBJECTPROPERTY(id, 'IsTable') = 1)
DROP TABLE LK_Workout_Type;

CREATE TABLE LK_Workout_Type
(
WT_ID int NOT NULL PRIMARY KEY IDENTITY (1,1),
Workout_Name varchar (80),
Workout_Description varchar(200)
);

INSERT INTO Teams (Team_Name, Team_Description) VALUES ('A Team', 'We are not vets.');
INSERT INTO Teams (Team_Name, Team_Description) VALUES ('Team Solo', 'One man. One team.');

INSERT INTO Users (User_Name) VALUES ('Frank Appleton');
INSERT INTO Users (User_Name) VALUES ('Tim Murdock');
INSERT INTO Users (User_Name) VALUES ('Tim Smith');

INSERT INTO Team_User (Team_ID, User_ID) Values (1,1);
INSERT INTO Team_User (Team_ID, User_ID) Values (1,2);
INSERT INTO Team_User (Team_ID, User_ID) Values (2,3);

INSERT INTO LK_Workout_Type (Workout_Name, Workout_Description) VALUES ('Bike - Mountain','Trail riding.');
INSERT INTO LK_Workout_Type (Workout_Name, Workout_Description) VALUES ('Bike - Road','Road riding.');
INSERT INTO LK_Workout_Type (Workout_Name, Workout_Description) VALUES ('Elliptical','Standard elliptical');
INSERT INTO LK_Workout_Type (Workout_Name, Workout_Description) VALUES ('Running','Typical running');
INSERT INTO LK_Workout_Type (Workout_Name, Workout_Description) VALUES ('Treadmill','Treadmill running');
INSERT INTO LK_Workout_Type (Workout_Name, Workout_Description) VALUES ('Weights','Weightroom');

INSERT INTO Workouts (User_ID, Workout_Type, Start_Time, End_Time, Calories) VALUES (1,1,'3/10/2012 08:00:00 AM','3/10/2012 09:30:00 AM', 860);
INSERT INTO Workouts (User_ID, Workout_Type, Start_Time, End_Time, Calories) VALUES (2,1,'3/10/2012 08:30:00 AM','3/10/2012 10:45:00 AM', 950);
INSERT INTO Workouts (User_ID, Workout_Type, Start_Time, End_Time, Calories) VALUES (3,5,'3/10/2012 10:05:00 AM','3/10/2012 12:27:00 PM', 1917);
INSERT INTO Workouts (User_ID, Workout_Type, Start_Time, End_Time, Calories) VALUES (1,5,'3/10/2012 02:38:00 PM','3/10/2012 03:17:00 PM', 536); 
```

我要生成的报告之一以特定的增量和时间范围显示给定团队燃烧的卡路里。因此，如果我想以 15 分钟的增量显示 A-Team 从上午 8 点到下午 6 点燃烧的卡路里，报告应如下所示：
TheDt Team Calories
08:00:00 AM A-Team 860
08： 15:00 AM A-Team 860
08:30:00 AM A-Team 1810 08:45:00 AM A-
Team 1810
09:00:00 AM A-Team 1810
09:15:00 AM A-Team 1810
09:上午 30:00 上午 A 队 1810
上午 9:45:00 上午 A 队 950
上午 10:00:00 上午 A 队 950
上午 10:15:00 上午 A 队 950
上午 10:30:00 上午 A 队 950
10:45:00 AM A-Team 950
11:00:00 AM A-Team 0
....
02:30:00 PM A-Team 0
02:45:00 PM A-Team 536
03:00:00 PM A-Team 536
03:15:00 PM A-Team 536
03:30:00 PM A-Team 0
...
06:00:00 PM A-Team 0

在我的研究中，我发现使用表格来支持增量（15 分钟）并将其加入我的锻炼表格应该会有所帮助。所以，我创建了下表：

```
IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('Tally') AND  OBJECTPROPERTY(id, 'IsTable') = 1)
DROP TABLE Tally;

CREATE TABLE Tally 
    (N INT, 
    CONSTRAINT PK_Tally_N PRIMARY KEY CLUSTERED (N))

-----------Create and preset a loop counter
DECLARE @Counter INT
    SET @Counter = 0

-----------Populate the table with 15 minute intervals between 2012 and 2017
  WHILE @Counter <= 175299
  BEGIN
         INSERT INTO Tally (N) VALUES (@Counter) SET @Counter = @Counter + 1
    END

-----------Build the CalendarDT Table
IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CalendarDT') AND  OBJECTPROPERTY(id, 'IsTable') = 1)
DROP TABLE CalendarDT;

DECLARE @StartDT DATETIME;

SELECT @StartDT = '2012-01-01T00:00:00';

SELECT  DATEADD(mi,v.N*15,@StartDT) AS TheDT INTO CalendarDT FROM Tally v WHERE v.N BETWEEN 0 AND 175299;

-----------Creating a clustered index for performance
IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('IDXC_CalendarDT_TheDT') AND  OBJECTPROPERTY(id, 'IsIndex') = 1)
DROP INDEX CalendarDT.IDXC_CalendarDT_TheDT;

CREATE CLUSTERED INDEX IDXC_CalendarDT_TheDT ON CalendarDT (TheDT)
GO

-----------Drop the Tally table
IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('Tally') AND  OBJECTPROPERTY(id, 'IsTable') = 1)
DROP TABLE Tally; 
```

然后，我尝试使用以下内容加入我的锻炼表：

```
SELECT  CalendarDT.TheDT AS [Date], COALESCE(SUM(Workouts.Calories),0) AS CalorieCnt, Workouts.User_ID
FROM    CalendarDT
        LEFT OUTER JOIN Workouts ON Workouts.Start_Time >= '03/10/2012 08:00:00 AM' AND Workouts.End_Time < '03/10/2012 06:00:00 PM'
        AND CalendarDT.TheDT >= '03/10/2012 08:00:00 AM' AND CalendarDT.TheDT <= '03/10/2012 06:00:00 PM'
WHERE   Workouts.User_ID IN (SELECT User_ID FROM Team_User WHERE Team_ID = 1)
GROUP BY CalendarDT.TheDT, Workouts.User_ID
ORDER BY CalendarDT.TheDT; 
```

这与我能够得出的解决方案一样接近。但是，我有几个问题：

1) 我还没有弄清楚如何从 JOIN 语句中加入 Team_Name。

2) CalorieCnt，即使它是由 Team_Name 而不是 User_ID 聚合的，在每个时间段显示相同的值。它没有正确汇总每个给定时间的总数，包括那些应该为 0 的时间。

我认为其中一个问题是我无法比较上午 08:45:00 燃烧了多少卡路里，因为当时没有开始/结束的锻炼。我已经看了一段时间了，我很困惑。任何帮助使这些报告适用于个人用户和团队将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:26:16.003

```
WITH    ranges (st) AS
        (
        SELECT  CAST('2012-03-10 08:00:00' AS DATETIME)
        UNION ALL
        SELECT  DATEADD(minute, 15, st)
        FROM    ranges
        WHERE   DATEADD(minute, 15, st) < CAST('2012-03-10 18:00:00' AS DATETIME)
        )
SELECT  st, team_name, calories
FROM    (
        SELECT  st, team_id, COALESCE(SUM(calories), 0) AS calories
        FROM    ranges r
        LEFT JOIN
                workouts w
        ON      start_time < DATEADD(minute, 15, st)
                AND end_time > st
        LEFT JOIN
                team_user tu
        ON      tu.user_id = w.user_id
        GROUP BY
                st, team_id
        ) c
LEFT JOIN
        teams t
ON      t.team_id = c.team_id
ORDER BY
        c.st, c.team_id
OPTION (MAXRECURSION 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:46:57.783

试试这个。我从上面的示例中修改了 CTE，以获取所有范围内的所有团队，即使卡路里为 0。

```
WITH    ranges_CTE (st) AS
(
   SELECT  CAST('2012-03-10 08:00:00' AS DATETIME)
    UNION ALL
   SELECT  DATEADD(minute, 15, st)
     FROM    ranges_CTE
    WHERE   DATEADD(minute, 15, st) < CAST('2012-03-10 18:00:00' AS DATETIME)
),
team_CTE (team_name, team_id) AS
(
SELECT team_name, team_id 
  FROM teams
),
ranges_team_CTE (st, team_name, team_id) AS
(
   SELECT r.st, t.team_name, t.team_id
 FROM ranges_CTE as r
CROSS JOIN team_CTE as t
)
select t.st, t.team_name, isnull(c.calories, '')
  from ranges_team_cte t
  LEFT JOIN (
    SELECT  st, team_id, COALESCE(SUM(calories), 0) AS calories
    FROM    ranges_CTE r
    LEFT JOIN
            workouts w
    ON      start_time < DATEADD(minute, 15, st)
            AND end_time > st
    LEFT JOIN    team_user tu
    ON      tu.user_id = w.user_id
    GROUP BY
            st, team_id
    ) c ON t.team_id = c.team_id AND t.st = c.st
ORDER BY
    t.st, t.team_id
OPTION (MAXRECURSION 0) 
```

产生这些输出。如果我了解您在寻找什么，我认为这可以满足您的需求。

```
st                      team_name            calories
----------------------- -------------------- ----------------------
2012-03-10 08:00:00.000 A Team               860
2012-03-10 08:00:00.000 Team Solo            0
2012-03-10 08:15:00.000 A Team               860
2012-03-10 08:15:00.000 Team Solo            0
2012-03-10 08:30:00.000 A Team               1810
2012-03-10 08:30:00.000 Team Solo            0
2012-03-10 08:45:00.000 A Team               1810
2012-03-10 08:45:00.000 Team Solo            0
2012-03-10 09:00:00.000 A Team               1810
2012-03-10 09:00:00.000 Team Solo            0
2012-03-10 09:15:00.000 A Team               1810
2012-03-10 09:15:00.000 Team Solo            0
2012-03-10 09:30:00.000 A Team               950
2012-03-10 09:30:00.000 Team Solo            0
2012-03-10 09:45:00.000 A Team               950
2012-03-10 09:45:00.000 Team Solo            0
2012-03-10 10:00:00.000 A Team               950
2012-03-10 10:00:00.000 Team Solo            1917
2012-03-10 10:15:00.000 A Team               950
2012-03-10 10:15:00.000 Team Solo            1917
2012-03-10 10:30:00.000 A Team               950
2012-03-10 10:30:00.000 Team Solo            1917
2012-03-10 10:45:00.000 A Team               0
2012-03-10 10:45:00.000 Team Solo            1917
2012-03-10 11:00:00.000 A Team               0
2012-03-10 11:00:00.000 Team Solo            1917
2012-03-10 11:15:00.000 A Team               0
2012-03-10 11:15:00.000 Team Solo            1917
2012-03-10 11:30:00.000 A Team               0
2012-03-10 11:30:00.000 Team Solo            1917
2012-03-10 11:45:00.000 A Team               0
2012-03-10 11:45:00.000 Team Solo            1917
2012-03-10 12:00:00.000 A Team               0
2012-03-10 12:00:00.000 Team Solo            1917
2012-03-10 12:15:00.000 A Team               0
2012-03-10 12:15:00.000 Team Solo            1917
2012-03-10 12:30:00.000 A Team               0
2012-03-10 12:30:00.000 Team Solo            0
2012-03-10 12:45:00.000 A Team               0
2012-03-10 12:45:00.000 Team Solo            0
2012-03-10 13:00:00.000 A Team               0
2012-03-10 13:00:00.000 Team Solo            0
2012-03-10 13:15:00.000 A Team               0
2012-03-10 13:15:00.000 Team Solo            0
2012-03-10 13:30:00.000 A Team               0
2012-03-10 13:30:00.000 Team Solo            0
2012-03-10 13:45:00.000 A Team               0
2012-03-10 13:45:00.000 Team Solo            0
2012-03-10 14:00:00.000 A Team               0
2012-03-10 14:00:00.000 Team Solo            0
2012-03-10 14:15:00.000 A Team               0
2012-03-10 14:15:00.000 Team Solo            0
2012-03-10 14:30:00.000 A Team               536
2012-03-10 14:30:00.000 Team Solo            0
2012-03-10 14:45:00.000 A Team               536
2012-03-10 14:45:00.000 Team Solo            0
2012-03-10 15:00:00.000 A Team               536
2012-03-10 15:00:00.000 Team Solo            0
2012-03-10 15:15:00.000 A Team               536
2012-03-10 15:15:00.000 Team Solo            0
2012-03-10 15:30:00.000 A Team               0
2012-03-10 15:30:00.000 Team Solo            0
2012-03-10 15:45:00.000 A Team               0
2012-03-10 15:45:00.000 Team Solo            0
2012-03-10 16:00:00.000 A Team               0
2012-03-10 16:00:00.000 Team Solo            0
2012-03-10 16:15:00.000 A Team               0
2012-03-10 16:15:00.000 Team Solo            0
2012-03-10 16:30:00.000 A Team               0
2012-03-10 16:30:00.000 Team Solo            0
2012-03-10 16:45:00.000 A Team               0
2012-03-10 16:45:00.000 Team Solo            0
2012-03-10 17:00:00.000 A Team               0
2012-03-10 17:00:00.000 Team Solo            0
2012-03-10 17:15:00.000 A Team               0
2012-03-10 17:15:00.000 Team Solo            0
2012-03-10 17:30:00.000 A Team               0
2012-03-10 17:30:00.000 Team Solo            0
2012-03-10 17:45:00.000 A Team               0
2012-03-10 17:45:00.000 Team Solo            0
(80 row(s) affected) 
```

这是你想要的？

# java - 在 Java 中从麦克风中捕获小的音频样本

> ID：10057956
> 
> 赞同：2
> 
> 时间：2012-04-07T20:10:53.470
> 
> 标签：java, send, microphone, javasound

我想捕获小的音频样本（实际上是通过互联网实时发送）。样本要小，越小越好。我读过一些关于音频例程的文章，但保存音频需要一些时间，而且我需要它非常快。也许有更简单的方法来传输输入并实时发送？

# wordpress - 在 Wordpress 样式下拉列表中重命名块字段

> ID：10057957
> 
> 赞同：0
> 
> 时间：2012-04-07T20:10:55.520
> 
> 标签：wordpress, themes

在 wp 编辑器（p、h1、h2 等）中选择块样式时，是否可以更改下拉列表中的文本？就像不显示*Heading 2*一样，它将显示*Subhead*。我认为这对那些不懂 HTML 的人来说更友好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:10:49.877

不是 100% 确定你的意思 - 我看到的是“标题 2”而不是 H2，我很确定我使用的是标准安装：

![WordPress 样式](../Images/e3a37311861507d1528575a5aa34c419.png)

如果是您要更改的那些名称，我不知道在不更改核心文件的情况下更改它们的方法：（`wp-includes/js/tinymce/langs/wp-langs-en.js`例如）；这是块开始`tinyMCE.addI18n("en.advanced"`

# c# - 在 Main() 中保持模块化？

> ID：10057958
> 
> 赞同：3
> 
> 时间：2012-04-07T20:11:09.057
> 
> 标签：c#, oop, module, program-structure

我正在为家庭作业编写简单的纸牌游戏“战争”，现在游戏可以运行了，我正在尝试使其更加模块化和有条理。下面是`Main()`包含大部分程序的部分。我应该提一下，该课程是用 C# 教授的，但它不是 C# 课程。相反，我们正在学习基本逻辑和 OOP 概念，因此我可能不会利用某些 C# 功能。

```
bool sameCard = true;

while (sameCard)
{
    sameCard = false;
    card1.setVal(random.Next(1,14));        // set card value
    val1 = determineFace(card1.getVal());   // assign 'face' cards accordingly
    suit = suitArr[random.Next(0,4)];       // choose suit string from array
    card1.setSuit(suit);                    // set card suit
    card2.setVal(random.Next(1,14));        // rinse, repeat for card2...
    val2 = determineFace(card2.getVal());    
    suit = suitArr[random.Next(0,4)];        
    card2.setSuit(suit);  

    // check if same card is drawn twice:

    catchDuplicate(ref card1, ref card2, ref sameCard); 
}
Console.WriteLine ("Player: {0} of {1}", val1, card1.getSuit());
Console.WriteLine ("Computer: {0} of {1}", val2, card2.getSuit());

// compare card values, display winner:

determineWinner(card1, card2); 
```

所以这是我的问题：

*   我可以在 Main() 中使用循环并仍然认为它是模块化的吗？
*   抽卡过程是否写得好/包含正确？
*   在方法中打印消息是否被认为是不好的做法（即：）`determineWinner()`？

我只编程了两个学期，我想在这个阶段养成良好的习惯。任何输入/建议将不胜感激。

**编辑：**

catchDuplicate() 现在是一个布尔方法，调用如下所示：

`sameCard = catchDuplicate(card1, card2);`

感谢@Douglas。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T20:19:45.027

如果您的家庭作业的主要问题是创建模块化应用程序，则必须将所有逻辑封装在专门的类中。每个班级只能做一项工作。使用卡片的函数必须属于卡片类。抽卡的功能，应该是另一个类。

我认为这是你作业的目标，祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T20:39:27.697

> 我可以在 Main() 中使用循环并仍然认为它是模块化的吗？

是的你可以。然而，`Main`在 OOP 程序中，通常只包含少数启动核心功能的方法调用，然后将其存储在其他类中。

> 抽卡过程是否写得好/包含正确？

部分。如果我正确理解了您的代码（您只显示`Main`），那么您会采取一些行动，当以错误的顺序或错误的值完成时，可能不会很好地结束。可以这样想：如果您出售您的类库（*不是*整个产品，而只是您的类），那么对于没有经验的用户来说，使用您的类库最清晰的方法是什么？

即，考虑一个`Deck`包含一副纸牌的类。在创建时，它会创建所有卡片并将其洗牌。`Shuffle`当你的类的用户需要洗牌并添加`DrawCard`处理发牌等方法时，给它一个洗牌的方法。

进一步：您有不包含在自己的类中的方法，但具有在类中更好的功能。即，`determineFace`更适合作为类上的方法`Card`（假设`card2`是 type `Card`）。

> 在方法中打印消息是否被认为是不好的做法（即：defineWinner()）？

是和不是。如果您只想在测试期间显示消息，请使用`Debug.WriteLine`. 在生产版本中，这些将是无操作的。但是，当您在生产版本中编写消息时，请确保从方法名称中可以清楚地看到这一点。即，`WriteWinnerToConsole`什么的。

*不*这样做更常见，因为：您将打印什么格式的信息？应该附带什么文字？您如何处理本地化？但是，当您编写程序时，显然它必须包含将内容写入屏幕（或表单或网页）的方法。为此，它们通常包含在特定的类中。例如，这可能是类`CardGameX`。

**总体思路**
想想“一个方法/函数应该只有一个任务，只有一个任务，不应该有副作用（比如计算平方*和*打印，那么打印就是副作用）”的原则。

类的原则是非常高级的：一个类包含逻辑上属于一起并在同一组属性/字段上操作的方法。一个相反的例子：`Shuffle`不应该是 class 中的方法`Card`。但是，它在逻辑上属于 class `Deck`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T20:36:05.263

对“最佳实践”的所有建议持保留态度。永远为自己着想。

那说：

*   我可以在 Main() 中使用循环并仍然认为它是模块化的吗？

这两个概念是独立的。如果您的 Main() 只执行高级逻辑（即调用其他方法），那么它是否在循环中这样做并不重要，毕竟算法需要一个循环。（你不会不必要地添加一个循环，不是吗？）

根据经验，如果可能/可行，请让您的程序自我记录。让它“可读”，这样，如果一个新人（甚至几个月后的你）看到它，他们可以在任何层面上理解它。

*   抽卡过程是否写得好/包含正确？

不。首先，一张牌永远不应该被选中两次。对于更“模块化”的方法，我会有这样的东西：

```
while ( Deck.NumCards >= 2 )
{
   Card card1 = Deck.GetACard();
   Card card2 = Deck.GetACard();
   PrintSomeStuffAboutACard( GetWinner( card1, card2 ) );
} 
```

*   在方法中打印消息是否被认为是不好的做法（即：defineWinner()）？

是`determineWinner`打印消息的目的吗？如果答案是“否”，那么这不是“坏习惯”的问题，你的功能是完全错误的。

也就是说，存在“调试”构建和“发布”构建之类的东西。为了帮助您调试应用程序并确定哪些有效，哪些无效，添加日志消息是一个好主意。

确保它们是相关的并且它们没有在“发布”构建中执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T20:23:58.287

**问：我可以在 Main() 中使用循环并仍然认为它是模块化的吗？**

答：是的，您可以使用循环，这对模块化没有真正的影响。

**问：抽卡过程写得好/包含正确吗？**

A：如果你想更模块化，把 DrawCard 变成一个函数/方法。也许只写 DrawCards 而不是 DrawCard，但是那里有一个优化与模块化的问题。

**问：在方法中打印消息是否被认为是不好的做法（即：determineWinner()）？**

答：我不会说在方法中打印消息是不好的做法，它只取决于上下文。理想情况下，游戏本身只处理游戏逻辑。程序可以有某种游戏对象，它可以从游戏对象中读取状态。这样，您可以在技术上将游戏从基于文本的游戏更改为图形游戏。我的意思是，这对于模块化来说是理想的，但考虑到最后期限，它可能并不实用。您总是必须决定何时必须牺牲最佳实践，因为没有足够的时间。可悲的是，这种情况经常发生。

将游戏逻辑与其呈现分开。对于像这样的简单游戏，这是不必要的依赖。

# ruby-on-rails - Rails 服务器无法启动？

> ID：10057961
> 
> 赞同：7
> 
> 时间：2012-04-07T20:11:21.803
> 
> 标签：ruby-on-rails, sqlite, server-error

当我发出命令“rails s”时，出现以下错误，请帮助我！我仍然在rails项目中，然后给出这个命令

```
root@ubuntu:~# cd mon
root@ubuntu:~/mon# rails s
/usr/lib/ruby/gems/1.8/gems/execjs-1.3.0/lib/execjs/runtimes.rb:50:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
    from /usr/lib/ruby/gems/1.8/gems/execjs-1.3.0/lib/execjs.rb:5
    from /usr/lib/ruby/gems/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
    from /usr/lib/ruby/gems/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1
    from /usr/lib/ruby/gems/1.8/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
    from /usr/lib/ruby/gems/1.8/gems/coffee-script-2.2.0/lib/coffee-script.rb:1
    from /usr/lib/ruby/gems/1.8/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
    from /usr/lib/ruby/gems/1.8/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `require'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
    from /root/mon/config/application.rb:7
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:53:in `require'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:53
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50
    from script/rails:6:in `require'
    from script/rails:6 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-07T21:33:57.503

添加

```
gem 'therubyracer' 
```

给你`Gemfile`跑

```
bundle 
```

命令

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T20:18:49.443

您需要安装一个 javascript 运行时，例如：

`gem install therubyracer`

或者

[http://nodejs.org/](http://nodejs.org/)

Rails 3 中的资产管道使用它来编译咖啡脚本。

# c++ - 提升共享内存类型

> ID：10057964
> 
> 赞同：2
> 
> 时间：2012-04-07T20:12:24.713
> 
> 标签：c++, boost, types, boost-interprocess

我尝试做以下事情：

使用 boost::interprocess 库在共享内存中创建一个“大”数组（1 000 000 + 对象）

我的代码包含以下内容：

```
managed_shared_memory testarray(create_only, "Test", 45000000);

typedef std::pair<SingleField, uint32_t> TestType;
TestType * test = testarray.construct<TestType>("TestArray")[45000000]; 
```

**我的问题是：如何确定这个 boost 函数的返回类型是什么？**

如果我对以下内容执行相同的操作： SingleField 而不是 "::pair 它似乎不起作用，但我不需要第二个容器，我只需要一个但有一个它不起作用！

eclipse 的输出对我来说太神秘了。自从我使用 boost 工作以来，由于这些问题我已经停止了几次，有没有一种简单的方法可以确定函数会返回什么“类型”？（我来自 Java，所以我习惯于有一些“简单”定义，上面写着 Object x ）如果我能弄清楚一个特定函数返回的类型，我会很高兴，我为自己编写的所有函数都是很简单，但是有了这个库，我似乎遇到了问题。

**第二个问题：为什么这些示例总是带有“类型”对，它是库的前提条件吗？**

-> 我尝试过使用 #include ，Eclipse 告诉我它的 std::pair 问题是为什么它是 T* ？这是起始段地址吗？

感谢您的时间和答案。

日食输出：

```
Multiple markers at this line
- unused variable test
- cannot convert const 
 boost::interprocess::detail::named_proxy<boost::interprocess::segment_manager<char, 
 boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, 
 boost::interprocess::offset_ptr<void>, 0ul>, boost::interprocess::iset_index>, Field, false> to 
 SharedMemoryInitializer::Create()::TestType* in initialization 
```

我已多次阅读 boost Library 手册，也许我查看了错误的站点或页面，如果您提供我错过的信息，我会很高兴。

[http://www.boost.org/doc/libs/1_42_0/doc/html/interprocess/quick_guide.html#interprocess.quick_guide.qg_interprocess_container](http://www.boost.org/doc/libs/1_42_0/doc/html/interprocess/quick_guide.html#interprocess.quick_guide.qg_interprocess_container)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:26:58.130

从我的角度来看，您的代码有两个主要问题：

*   您似乎分配了 45000000 个类型的对象，`TestType`这可能不是您想要的（除非`TestType`每个实例只需要一个字节）：

    `TestType * test = testarray.construct<TestType>("TestArray")[45000000];`

*   根据文档（*），您必须为构造函数调用提供括号（您使用的是第二个版本）： `TestType * test = testarray.construct<TestType>("TestArray")[45000000]`**`()`**`;`

    我假设它`TestType`有一个无参数的构造函数。

(*) [http://www.boost.org/doc/libs/1_46_1/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_memory_segment_features.allocation_types](http://www.boost.org/doc/libs/1_46_1/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_memory_segment_features.allocation_types)

# jquery - jQuery IE 8 显示/隐藏不起作用

> ID：10057967
> 
> 赞同：-1
> 
> 时间：2012-04-07T20:12:47.917
> 
> 标签：jquery, internet-explorer-8, hide, show, collapse

我有一个问题，为什么这在 IE 8 中有效

```
$(function() {
    $('.title .hide').showContent();
});

$.fn.showContent = function() {
    return this.each(function() {
        var box = $(this);
        var content = $(this).parent().next('.content');

        box.toggle(function() {
            content.slideUp(500);
            $(this).css('background-position', 'right bottom');
        }, function() {
            content.slideDown(500);
            $(this).css('background-position', 'right top');
        });

    });
}; 
```

这不起作用？

```
$(function() {
    $('.title .hide.show').hideContent();
});

$.fn.hideContent = function() {
    return this.each(function() {
        var box = $(this);
        var content = $(this).parent().next('.content');

        box.toggle(function() {
            content.slideDown(500);
            $(this).css('background-position', 'right top');
        }, function() {
            content.slideUp(500);
            $(this).css('background-position', 'right bottom');
        });

    });
}; 
```

我希望这两个选项起作用，但我不知道为什么第二个在 IE 8 中不起作用，我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:42:23.370

Jquery 内置了 hide() 和 show() 等函数。
试试看。
例如：`$('input#id').hide();`
使用类选择器也不是一个好主意，因为性能会受到影响。
尝试使用 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T07:30:11.953

如果您使用的是 jquery，那么使用下面的 javascript，它可能对您有用

```
jQuery(this).hide();
jQuery(this).show(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T20:16:30.040

看起来您只是为一个具有 show 类的元素调用 hideContent() ，该类在 hide 类中，该类在 title 类中。.hide.show 是两个不同的嵌套类。

.title .hide .show

jQuery 正在寻找一个带有 .show in a .hide in a .title 的元素

如果您要切换，则将 hideContent() 的第二行替换为：

```
$('.title .show').hideContent();
$('.title .hide').hideContent(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-13T08:49:46.280

我猜这是 IE8/jQ 中的一个错误。尝试：

```
$(id_to_hide).css("display", "none");
$(id_to_show).css("display", "inline-block"); 
```

# asp.net-ajax - 模态弹出扩展器不起作用

> ID：10057972
> 
> 赞同：0
> 
> 时间：2012-04-07T20:14:41.850
> 
> 标签：asp.net-ajax

我正在尝试开发每次单击图像时打开的页面不止弹出窗口。当我单击此图像时，会出现一个弹出菜单，其中 gridview 根据页面中的某些文本框填充了数据。问题是，当我第一次写页面时它起作用了，但后来却没有。

后面的代码是

```
ImageButton lb = sender as ImageButton;
    string shipto = ddlShipto.SelectedValue.ToString();
    TMWWS.BusinessLogic.ProfileII objPlants = new                 TMWWS.BusinessLogic.ProfileII(shipto);
    DataTable dt = objPlants.getPlantsPerShipto();
    gvPlant.DataSource = dt;
    gvPlant.DataBind();
    this.upPlant.Update();
    //pnlPlant.Visible = true;
    pnlPlant_ModalPopupExtender.Show();

  <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

    <legend>Order Header</legend>
    <span class="failureNotification" style="color:green">
       <asp:Literal ID="lblMessage" runat="server"></asp:Literal>
    </span>

    <p>
        <asp:Label ID="TransactionLabel" runat="server" 
            AssociatedControlID="txtTransaction" Height="22px" Width="248px">Transaction Number</asp:Label>
        <asp:TextBox ID="txtTransaction" runat="server" CssClass="textEntry" 
            Enabled="False"></asp:TextBox>
    </p>

    <p>
        <asp:Label ID="ShipToLabel" runat="server" 
            AssociatedControlID="txtTransaction" Height="22px" Width="248px">ShipTo</asp:Label>
        <asp:DropDownList ID="ddlShipto" runat="server" CssClass="textEntry" 
            ></asp:DropDownList>
    </p>

    <p>
        <asp:Label ID="FeedCodeLabel" runat="server" AssociatedControlID="txtFeedCode" 
            Height="21px" Width="320px">Feed Code</asp:Label>
        <asp:TextBox ID="txtFeedCode" runat="server" CssClass="textEntry">888</asp:TextBox>
        <asp:RequiredFieldValidator ID="FeedCodeRequired" runat="server" ControlToValidate="txtFeedCode" 
                CssClass="failureNotification" ErrorMessage="Feed Code is required." ToolTip="Feed Code is required." 
                ValidationGroup="OrderValidationGroup">*</asp:RequiredFieldValidator>
    </p>

    <p>
        <asp:Label ID="PlantLabel" runat="server" AssociatedControlID="txtPlant" 
            Height="21px" Width="320px">Plant</asp:Label>

        <asp:TextBox ID="txtPlant" runat="server"></asp:TextBox>
        <asp:ImageButton ID="ImgBtnPlant" runat="server" 
                onclick="ImageButton1_Click" ImageUrl="~/Icons/Plant.png" />
     </p>

    <asp:UpdatePanel ID="upPlant" runat="server" UpdateMode="Conditional">
     <ContentTemplate>
      <asp:Panel runat="server" Visible="false" BorderColor="Black" ID="pnlPlant">
        <asp:Button ID="BtnShowDialog" Style="display:none" runat="server" Width="120" Text="Filter" />
        <asp:Label ID="LblPopupHeader" runat="server" Text="Plant-Filter"></asp:Label>
        <asp:GridView ID="gvPlant" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="Plant" onrowcommand="gvPlant_RowCommand">
            <Columns>
                <asp:BoundField DataField="Plant" HeaderText="Plant" SortExpression="Plant" />
                <asp:BoundField DataField="PlantName" HeaderText="PlantName" 
                    SortExpression="PlantName" />
                <asp:ButtonField Text="Button" />
            </Columns>
        </asp:GridView>
      </asp:Panel>
         <ajaxToolkit:ModalPopupExtender ID="pnlPlant_ModalPopupExtender" runat="server" 
             DynamicServicePath="" Enabled="True" TargetControlID="pnlPlant" PopupControlID="BtnShowDialog">
         </ajaxToolkit:ModalPopupExtender>
     </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:46:39.237

此外，您可以从 Ajax 工具包下载最新版本。我已经下载了它并将它添加到我的VS中的工具箱中。现在它工作正常这里是下载链接：

[最新的 ajax 工具包版本](http://ajaxcontroltoolkit.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:35:32.437

您可以尝试改用 Popup 扩展程序。这是一件棘手的事情，我遇到了同样的问题，我正在尝试使用弹出扩展器。这是一些代码片段。

```
<asp:LinkButton ID="LnkOrder" runat="server" BehaviorID="pop" CssClass="PopupMenu" CommandName="LnkOrder">Order</asp:LinkButton>
                     <asp:PopupControlExtender ID="LnkOrder_PopupControlExtender" 
                   runat="server" DynamicServicePath="" Enabled="True" ExtenderControlID="" 
                   PopupControlID="PopupMove" TargetControlID="LnkOrder">
               </asp:PopupControlExtender> 
```

另外我 fyou 需要隐藏弹出窗口尝试使用这个 javascript。不要忘记更改 BehaviorID。这是javascript

```
$find('pop').hide(); 
```

# php - 多个查询一个 PHP 脚本

> ID：10057975
> 
> 赞同：0
> 
> 时间：2012-04-07T20:15:46.513
> 
> 标签：php, mysql

我有一个名为 profile.php 的页面，我需要来自同一数据库中多个表的信息。

多个查询是处理这个问题的方法吗，像这样：

```
//connect

//query1
//query2
//query3
//query4

Mysqli_Query(connect, query1)
Mysqli_Query(connect, query2)
Mysqli_Query(connect, query3)
Mysqli_Query(connect, query4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:20:52.000

当然，没有什么可以阻止您进行多个查询，但是根据您的操作，JOIN 可能更合适。

这里要涵盖的内容超出了 StackOverflow 答案的合理范围，因此请尝试教程： [http ://www.tizag.com/mysqlTutorial/mysqljoins.php](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:22:13.950

除非您正在从中收集数据`query1`并在其中使用数据等，否则您可以使用[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)或[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)`query2`将多个查询优化为单个查询。这就是我可以提供的所有内容，而无需查看任何实际代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T20:24:52.543

我从你的问题中得到的是，有很多表，你只需要它们的信息，在这种情况下，只要表以某种方式相关，最好在多个查询中使用 UNION 或 JOIN。

# css - 如何从 CSS 设置表格单元格填充？

> ID：10057978
> 
> 赞同：4
> 
> 时间：2012-04-07T20:15:59.013
> 
> 标签：css, html-table, cellpadding

我正在努力解决给定 HTML 表（由 Drupal 生成）中的单元格填充问题。

表格如下：

![在此处输入图像描述](../Images/9164f1c4891f981d37ed9037033c8cbc.png)

我尝试了以下方法：

```
.view-thumbnails-of-tips-and-tricks {
    padding: 10px 10px 10px 10px;  
} 
```

我想在单元格内容周围添加填充，如下所示：

![在此处输入图像描述](../Images/48bb8b6d81e4ee75b8ead2558121430a.png)

不幸的是，填充围绕表格，而不是单元格的内容。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T20:18:25.037

```
.view-thumbnails-of-tips-and-tricks tr td {
    padding: 10px;  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T20:18:33.937

`td`在你的课后指定：

```
.view-thumbnails-of-tips-and-tricks td {
    padding: 10px;  
} 
```

此外，确保`cellpadding`在 HTML 中设置为零，以防用户代理样式表提供自己的值。此值可能会覆盖或添加到 CSS 值。

```
<table cellpadding="0"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T20:20:27.477

您应该将 css 设置为该单元格，而不是支架。

因此，您可以为该单元设置类名并自定义 css。

例如：`.view-thumbnails-of-tips-and-tricks td { padding: 10px; }`

希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T20:22:54.257

尝试像这样定义你的风格：

```
.view-thumbnails-of-tips-and-tricks td {
    padding: 10px 10px 10px 10px;
} 
```

这意味着您正在为以下内容定义样式：

1.  顶部 div（标识符“.view-thumbnails-of-tips-and-tricks”）
2.  该 div 内的表（“td”）

# core-data - 在 iOS 5 中使用 UIManagedDocument 和父/子上下文导入核心数据背景

> ID：10057984
> 
> 赞同：1
> 
> 时间：2012-04-07T20:16:47.960
> 
> 标签：core-data, ios5, nsmanagedobject, nsmanagedobjectcontext, uimanageddocument

我在 iOS 5 中有一个目录应用程序，它从 XML 下载数据并`UITableView`使用带有`NSFetchedResultsController`. 数据存储在 Core Data 中`UIManagedDocument`。因为我不想在下载和导入数据时阻塞主队列，所以我创建了一个用于下载数据的后台队列和一个新的子队列，`NSManagedObjectContext`用于作为父`NSPrivateQueueConcurrencyType`级导入数据。`document.managedObjectContext`当我完成导入数据时，我`-save:`在子上下文中进行了更改，并且更改会传播到父上下文。浏览目录时，我会在需要时导入其他数据。一切正常，直到`UIManagedDocument`自动保存。

我已打开核心数据 SQL 调试，`-com.apple.CoreData.SQLDebug 1`以查看文档何时自动保存。

在创建具有重复 ID 的文档的自动保存对象之后`document.managedObjectContext`（我所有的实体 id 数据库都有唯一的 id 参数）。

我究竟做错了什么？

* * *

我创建了一个简单的示例代码来重现该问题。
这是代码：[http](http://dl.dropbox.com/u/20987346/ViewController.m)
://dl.dropbox.com/u/20987346/ViewController.m 这是完整的 Xcode 项目：[http ://dl.dropbox.com/u/20987346/CoreDataTest.zip](http://dl.dropbox.com/u/20987346/CoreDataTest.zip)

下面是在后台进行导入的方法。

```
- (void)backgroundImport
{
    static int counter;

    NSManagedObjectContext *backgroundContext;
    backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    backgroundContext.parentContext = self.document.managedObjectContext;

    [backgroundContext performBlock:^{
        NSManagedObject *entity;

        for (int i = 0; i < 2; i++) {
            entity = [self entityWithID:[NSNumber numberWithInt:arc4random() % 20 + 1]
                 inManagedObjectContext:backgroundContext];
            [entity setValue:[NSString stringWithFormat:@"A Name %d", ++counter] forKey:@"name"];
        }

        [self dumpEntitiesInManagedObjectContext:backgroundContext];

        NSError *error;
        [backgroundContext save:&error];
        if (error) NSLog(@"%@ (%@)", [error localizedDescription], [error localizedFailureReason]);

        [backgroundContext.parentContext performBlock:^{
            [self dumpEntitiesInManagedObjectContext:backgroundContext.parentContext];
        }];
    }];
} 
```

该方法导入两个实体。获取具有指定 ID 属性的`-entityWithID:`实体，如果它不存在，则使用`NSEntityDescription -insertNewObjectForEntityForName:`. 转储所有实体以`-dumpEntitiesInManagedObjectContext:`记录（一次在导入上下文中，一次在文档上下文中）。

问题是当文档被自动保存并完成一些额外的导入时，我在日志中得到以下内容：

```
[1140b] Entities: 10             [fb03] Entities: 11
[1140b]   2: A Name 1            [fb03]   2: A Name 1
[1140b]   3: A Name 4            [fb03]   3: A Name 4
[1140b]   4: A Name 8            [fb03]   4: A Name 8
[1140b]   5: A Name 12           [fb03]   5: A Name 12
[1140b]   6: A Name 10           [fb03]   6: A Name 10
[1140b]   8: A Name 6            [fb03]   8: A Name 6
[1140b] **12: A Name 11**        [fb03] **12: A Name 11**
[1140b]   13: A Name 9           [fb03] **12: A Name 5**
[1140b]   17: A Name 3           [fb03]   13: A Name 9
[1140b]   18: A Name 2           [fb03]   17: A Name 3
                                 [fb03]   18: A Name 2 
```

导入上下文有 10 个实体，但主上下文有 11 个实体，ID 为 12 的实体是重复的。似乎旧对象没有在父上下文中修改，而是添加了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:23:30.183

我仍然在处理所有这类事情（Core Data & UIManagedDocument 一起工作），但我认为这个问题可能会解决你的情况：[Core Data managed object does not see related objects until restart Simulator](https://stackoverflow.com/questions/9437159/core-data-managed-object-does-not-see-related-objects-until-restart-simulator)

它涉及在“正常”流程之前使用以下命令强制临时 ID 永久存在： `[context obtainPermanentIDsForObjects:[inserts allObjects] error:&error]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:04:59.393

我遇到了这个问题并做了一个小分类`NSEntityDescription`来解决这个问题：

```
@implementation NSEntityDescription (PermanentID)
+ (id)insertNewPermanentObjectForEntityForName:(NSString *)entityName
                        inManagedObjectContext:(NSManagedObjectContext *)context
{
    id object = [self insertNewObjectForEntityForName:entityName inManagedObjectContext:context];
    NSError *error;
    if (![context obtainPermanentIDsForObjects:[NSArray arrayWithObject:object] error:&error]) {
        NSLog(@"Permanent ID not given");
    }
    if (error) {
        NSLog(@"%@", error);
    }
    return object;
} 
```

[在我的网站上](http://number23.org/2012/08/making-uimanageddocument-a-little-safer/)有更多关于它的信息，但我已经在此处复制了该类别，因此您不必点击。

# git - 合并两个 GitHub Git 存储库

> ID：10057988
> 
> 赞同：0
> 
> 时间：2012-04-07T20:17:16.540
> 
> 标签：git, github, git-merge

我对 Git 很陌生。我在 GitHub 中有两个 Git 存储库，A 和 B。

“A”是主干，我创建了一个名为“B”的分支并完成了我的开发。现在我想将（'B'）中的所有更改都更改为'A'。

我做了以下

```
git clone https://sameera207@github.com/A.git
cd A
git merge ../B (please note 'B' is in the same level as 'A') 
```

但我收到以下错误

```
fatal: '../B' does not point to a commit 
```

我在这里错过了什么，或者这不是正确的方法？

# java - 如何更改 JavaFX 2.0 中的插入符号颜色？

> ID：10057989
> 
> 赞同：2
> 
> 时间：2012-04-07T20:17:33.873
> 
> 标签：java, swing, javafx, javafx-2

我们希望将一个项目从 Swing 迁移到 JavaFX 作为新的 UI 技术。作为我们公司设计的一部分，我们将 Swing 中的插入符号颜色更改为浅绿色。

我们如何改变 JavaFX 2.0 中插入符号的颜色（或者可能还有其他关于外观的东西）？我找不到任何有用的信息。我看到它在早期版本的 JavaFX 中是可能的，所以我想在 2.0 中也有办法。

亲切的问候，

大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:45:31.383

在 TextField 中，插入符号的颜色与文本相同。您可以通过以下方式更改它们：

```
 TextField tf = new TextField("Text");
    tf.setStyle("  -fx-text-fill: green"); 
```

或全局在 css 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T10:25:54.693

谢尔盖的回答应该可以正常工作。但是它不适用于 texarea，因为它是一个错误。你可以下载 java fx 2.1 开发人员预览版以使其与 textarea 一起使用