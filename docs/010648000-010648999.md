# StackOverflow 问答 10648000-10648999

# c - 无法从标准输出读取

> ID：10648001
> 
> 赞同：2
> 
> 时间：2012-05-18T06:51:11.343
> 
> 标签：c, stdout

我正在尝试`stdout`将我自己的程序读入 2 个这样的数组

```
#include<stdio.h>

int main ()
{
    char arr[100]={0};
    char arr2[100]={0};

    printf("Hello world\n"); // This writes to stdout

    fgets( arr, 80, stdout );

    fseek ( stdout, 0, SEEK_SET );

    fgets ( arr2, 80, stdout );
    printf ("First array is %s\n", arr );
    printf ("Second array is %s\n", arr2 );

    return 0;

} 
```

输出不是我所期望的。那是两个数组都是空的，而不是`Hello World`我预期的包含。

我浏览了[这篇文章](https://stackoverflow.com/questions/2228219/read-the-stdout-from-the-same-c-program)，它建议处理管道来完成我想要的，但**没有告诉我**为什么上面的代码不起作用？

**编辑：**虽然很高兴知道使上述工作正常进行的替代方案，但我对阅读`stdout`同一程序所涉及的问题更加好奇

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T06:53:56.167

并非每个文件都是可查找、可读或可写的。Stdout 通常是一种无法回读的类型。

最有可能`stdout`的是管道。在这种情况下，您的程序拥有可写端，而其他人拥有可读端。管道实现只是传输数据而不保留它；一旦它在另一端被读取，就无法取回它。

如果您想要一个可以回读的文件，请创建一个常规临时文件或您自己的管道，并使用`fprintf`/`fscanf`代替`printf`/ `scanf`。或者，`freopen`在 stdout 上执行以将其重新分配给另一个文件/管道，然后`printf`对该新文件进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:01:15.690

这是正确的代码：

```
#include<stdio.h>

int main ()
{
char arr[100]={0};
char arr2[100]={0};
int i,j;

printf("Hello world\n"); // This writes to stdout

fgets( arr, 80, stdin );

fgets ( arr2, 80, stdin );
printf("\n");
for(i=0; i<80; i++){
    printf ("%c", arr[i]);
}
for(j=0; j<80; j++){
    printf ("%c", arr2[j]);
}

return 0;
} 
```

1) fgets 必须从 stdin 读取，而不是从 stdout :)
2) 你不能用 打印所有数组`printf array`，你**必须**用`for`cicle迭代它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T17:03:55.970

我建议您使用 gotoxy，它是一个非常简单的命令，您可以在其中放置标准输出位置的坐标。

```
COORD coord={0,0};
void gotoxy(int x,int y){
   coord.X=x;coord.Y=y;
   SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE),coord);
} 
```

# ant - how to extract the value of a parameter within a parameter and then print in ant

> ID：10648006
> 
> 赞同：0
> 
> 时间：2012-05-18T06:51:32.373
> 
> 标签：ant

I want to write a code in such a way that I will remove platform from first 3 lines and then take only the platform name and I will suffix that with `installer-zip.${platform_name}`.

```
platform.win-x86=true
platform.win-x64=true
platform.unix=false
installer-zip.win-x86=E:\abc.jar
installer-zip.win-x64=E:\def.jar 
```

Now if the selected item is win-x86 then printing `installer-zip.${platform_name}` should give me `E:\abc.jar`. I tried `${installer-zip.${platform_name}}` and many other things but they are not working

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:13:46.053

您无法使用常规 ant 执行此操作，但您可以使用[ant-contrib](http://ant-contrib.sourceforge.net/)执行此操作。

特别是，有一个 contrib 任务[property-regex](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)。

所以像：

```
<propertyregex property="$newProperty" 
               input="$oldProperty" 
               regexp="^platform\.(,*)$"
               select="\1"
               casesensitive="false" /> 
```

编辑：然后...

```
<property name=desiredProperty value="installer-zip.${newProperty}" /> 
```

这应该足以让您找出您正在寻找的确切解决方案......

# java - 用现有的 java 类编译 Groovy 类？

> ID：10648007
> 
> 赞同：0
> 
> 时间：2012-05-18T06:51:35.557
> 
> 标签：java, eclipse, groovy

我有现有的 java web 应用程序。现在我写了一个 groovy hello world 类。我应该如何用现有的 java 类编译它？从[http://groovy.codehaus.org/](http://groovy.codehaus.org/)看起来我需要一个不同的编译器，因为命令是 groovy -e "println 'Hello ' + args[0]" World 而不是使用 javac。

我想从命令提示符和 eclipse 编译命令，以便使用现有的 java 类编译 groovy 类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T07:31:31.680

您需要在 Groovy 中使用联合编译，附加 javac 编译器来编译 .java 文件。

使用`-j`带有 groovyc 编译器的选项：

```
groovyc *.groovy *.java -j 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:28:02.663

如果您使用 Eclipse 构建，我猜您需要安装 Groovy 插件并确保它将您的项目视为 groovy 项目。

我不知道该怎么做，就像 Arturo 一样，我只使用 Sublime Text 和命令行。

对于从命令行进行编译，您应该使用 Ant（[可以在此处找到](http://groovy.codehaus.org/The+groovyc+Ant+Task)有关 groovyc 任务和使用 Java 交叉编译的[文档](http://gradle.org/docs/current/userguide/groovy_plugin.html)）或 Gradle（有关 Groovy 插件的文档）之类的东西

# android - Debugging using a virtual machine like VMWare/VirtualBox?

> ID：10648009
> 
> 赞同：20
> 
> 时间：2012-05-18T06:51:45.830
> 
> 标签：android, debugging, android-emulator, virtual-machine, virtualbox

I am developing an Android application but fed-up of performance of `My emulator` I do have a `Android PC version` installed in both VM-ware and `Virtual Box`

Can I use it as emulator? If so, how? How can I connect **ADB** to a virtual machine running PC Android?

I saw in some forum to use this but my **VMs** android having no specific IP.

How to i connect it??

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-14T19:24:34.100

# 解决方案：

### 我强烈建议使用 Android x86 因为它比使用 Android x86 4.2 的 Android 模拟器快很多倍，您可以安装和使用任何应用程序，并像使用平板电脑一样使用“Google play”与您的帐户同步

使用最新的 Android X86 4.2 Jelly Bean 和 Virtual Box

我发现了不同的方式来连接 Internet 和 adb

# 步骤： 1 适配器的选择

## 案例 1：仅 Internet {NAT 适配器}

最简单的解决方案是使用 NAT 适配器，如果主机连接到互联网，它将直接将您连接到互联网，但您不会通过此设置获得 adb 连接在这里您将获得公共 ip，因此您无法连接到主机计算机

![NAT 适配器](../Images/dd9e95c623ee70babd5320e213cb679c.png)

## 案例 2：仅 adb {Host Only Adapter}

最简单的解决方案就是使用 Host Only Adapter

![仅主机适配器设置](../Images/a3d60d7caf801d03a15363442e8e65e6.png)

**注意：**由于 DHCP 服务器设置创建新的`HostOnlyAdapter`或`DHCP server`为现有的 Adapter()运行，默认的 Host Only 适配器可能无法工作

## 案例 3：对于 adb 和 Internet {Bridge Adapter}

在这种情况下，您必须小心。

如果您使用 LAN 进行 Internet 连接，则应将 Bridge Adapter 与您的以太网卡一起使用，它将为您提供本地 IP，并且虚拟机将使用主机连接到 Internet

或者，如果您使用 Wifi，只需选择 Wifi 适配器即可

对于其他类型的连接，您应采用相同的方式

![桥接适配器](../Images/ff66abd64b8bbcb6d11e83bb705889cc.png)

# 步骤：2 与 adb 连接

检查 ip 地址只需按`Alt+F1`{for console Window} [切换回图形视图按`Alt+F7`]

您将看到控制台窗口类型**netcfg**

它会显示IP地址

现在转到您的主机运行命令提示符移动到 adb 目录类型

```
 adb connect {your ip address} 
```

### 例子

> 亚行连接 192.168.1.51

### 注意：如果 adb 没有运行或没有响应，您可以执行以下操作

```
adb kill-server

adb start-server 
```

您可以检查连接到 adb 的设备

```
adb devices 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-11T11:16:44.193

根据您编辑的问题，如果要将其连接到 ADB，您需要检查 VM 的 IP 是什么：假设您使用 VMWare 的播放器；

`ALT-F1`在虚拟机中点击并使用`ifconfig`命令来了解分配给您的网络设备的 IP 地址（通常是`eth0`）。然后，您可以点击`ALT-F7`返回 Android UI。

然后，在您的主机 PC 中，执行`adb connect [ANDROID_X86_IP]`将 SDK 调试器连接到您的 Android x86 VM；例如：`adb connect 192.168.1.100:5555`。

然后，您应该会看到连接的设备列表，然后将启用它以用于调试。

ADB 通常位于您计算机上用户文件夹的子文件夹中：`~/Android/Sdk/platform-tools`. 建议将其添加到您的路径中，以便您可以在任何地方使用终端访问它。我个人在`~/.bash_profile`：

```
#add Android platform-tools directory
PATH=~/android-sdks/platform-tools:$PATH
export PATH 
```

如果 ADB 第一次失败，您可以尝试`adb kill-server ; adb start-server`重置 ADB。

如果您想进一步阅读，请查看 [Android-x86 网站](http://www.android-x86.org/documents/debug-howto)。它还有很多可供[下载](http://www.android-x86.org/download)的光盘映像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T21:09:21.587

这不是您问题的直接答案，但是您是否看到了提高模拟器性能的技巧（阅读[为什么 Android 模拟器这么慢？我们如何加快 Android 模拟器的速度？](https://stackoverflow.com/questions/1554099/slow-android-emulator)）

a) 使用 Intel Atom x86 而不是 ARM

b) 使用 hw.gpu.enabled

我想说这使得模拟器在性能上与真实设备相当。

**更新 1**

一般来说，想法是将Android PC配置为使用tcp/ip进行adb连接。您可能需要在 VMWare 或 VirtualBox 上使用网络设置。

有用的链接（试图完成你想要的

[没有网络连接 - VMWare Fusion 上的 Android-x86](https://stackoverflow.com/questions/9042404/no-network-connection-android-x86-on-vmware-fusion) [http://lkubaski.wordpress.com/2012/08/15/running-android-on-vmware-player-with-networking-enabled/](http://lkubaski.wordpress.com/2012/08/15/running-android-on-vmware-player-with-networking-enabled/) [http://www.transdroid。 org/2011/01/26/techpost-debugging-against-a-virtual-machine-android/](http://www.transdroid.org/2011/01/26/techpost-debugging-against-a-virtual-machine-android/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-03T19:56:53.477

1.  在 vmware 上安装 android x86

2.  运行 android 终端写入命令“ifconfig eth0”

3.  windows 用户制作环境 C:\Users\user-name\AppData\Local\Android\sdk\platform-tools

4.  “adb connect IP address of the VM”：5555 现在在 vmware 上运行应用程序

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-04-02T20:28:39.670

为了节省一些时间： [http](http://aztcs.org/meeting_notes/winhardsig/Android-vm/Android-VMwarePlayer-Win.pdf) : //aztcs.org/meeting_notes/winhardsig/Android-vm/Android-VMwarePlayer-Win.pdf VMWARE 入门的好链接

在你安装的情况下在以下目录 /opt/android-sdk-linux 设置路径变量

```
export ANDROID_HOME=/opt/android-sdk-linux

export PATH=${PATH}:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools 
```

执行路径后，如果您在控制台中输入“android”看到应用程序，则您的路径设置良好。

[创建一个 hello world 应用程序](https://developer.android.com/training/basics/firstapp/creating-project.html)（如果您有问题，请在此处正确安装 sdk）

运行 hello world 应用程序

在 VM 中按 ALT-F1 并使用 netcfg 命令了解分配给 eth0 设备的 IP 地址。然后，您可以按 ALT-F7 返回 Android UI。然后，在您的主机 PC 中，执行 adb connect [ANDROID_X86_IP] 以将 SDK 调试器连接到您的 Android x86 VM；例如：亚行连接 192.168.1.100:5555。如果问题反弹服务 adb kill-server ；adb 启动服务器

在控制台将目录更改为 /android-sdks/platform-tools 然后键入

./adb connect 192.168.1.100 （注意 192.168.1.100 是必需的，默认为端口 5555）

我必须使用 ./adb 前缀，然后配置 VMWARE 实例。

我觉得避免 XAML 不太油腻 :-)

# java - How to limit JVM creation?

> ID：10648010
> 
> 赞同：4
> 
> 时间：2012-05-18T06:52:11.343
> 
> 标签：java, jvm, heap-memory

I have created following class and ran on 15 terminals with command "java -Xms500m Class1".

I was expecting it to not allow me after 4 or 5 separate executions. I was expecting something like cannot create more JVMs but all programs are running. If each JVM creation requires 500Mb of initial heap memory (my RAM is 2GB) then the maximum limit of JVM creation should be four.

```
public class Class1
{
public static void main(String[] args)
{
  int i=0;
  while(true)
   {
    try
   {
    Thread.currentThread().sleep(100);
    System.out.println("hi-"+i);
   }
   catch (InterruptedException e)
   {
   }
   i++;
   if(i == 1000000)
   {
    break;
   }
 }
} 
```

Thanks, Amaresh

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T06:55:24.483

`-Xmx` is the *maximum* heap size, `-Xms` is the *initial* heap size. See [here](http://javahowto.blogspot.de/2006/06/6-common-errors-in-setting-java-heap.html) for more information about setting the heap size correctly.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:15:25.430

由于虚拟内存，您可以创建累积堆大小大于物理内存的 JVM。

在 Unix 和 Windows 中，由于硬盘驱动器用作内存，您可以创建 4GB + sizeof（分配用作内存的硬盘驱动器空间）JVM。因此，如果您有 4GB 的 RAM 并分配了 2G 的硬盘驱动器用作内存，则可以使用 java -Xmx500 -Xms500 创建 12 个 JVM。

在 Linux 中，交换空间用作内存。在 Windows 中，用作内存的磁盘数量可以配置为`System Properties->Advanced->Performance->Settings`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T06:56:43.953

尝试使用`-Xms500m`。这将设置初始内存。

您正在设置“最大”内存 - 但您的代码根本不使用太多内存。

你的操作系统可能也有虚拟内存，所以它会超过 2GB。

另外，请记住`500m`是堆大小。实际的 JVM 将比单独的堆占用更多的内存。

# jquery - How to get the child div in jquery

> ID：10648015
> 
> 赞同：1
> 
> 时间：2012-05-18T06:52:32.523
> 
> 标签：jquery, html, parent-child

I want to get the child div of main div

```
<div class="test">
<div id="dog"></div>
<div id="cat"></div>
<div id="drig"></div>
</div> 
```

​</p>

```
var a= $("div.test #dog");

alert (a);

var b= $("div.test #abc");

alert (b); 
```

The problem is both `a` and `b` are returning the `[object object]`. where as there is no child id `abc`

JS Fiddle [http://jsfiddle.net/8yJNS/](http://jsfiddle.net/8yJNS/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T06:57:31.067

`[Object object]`即使没有找到任何元素，jQuery 也会从您的代码中返回一个空的 jQuery 对象。

如果要检查选择器是否找到任何东西，请使用`length`：

```
var a = $("div.test #dog");
alert(a.length); // 1 element found

var b = $("div.test #abc");
alert(b.length); // 0 elements found 
```

[**示例小提琴**](http://jsfiddle.net/8yJNS/31/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T06:57:05.820

您可以通过以下方式获取 id...

```
var a= $("div.test #dog"); 
 alert (a.id); 
```

或者

```
 $(a).attr('id'); 
```

# jquery - Jquery validation ' require ' is not working with html editor

> ID：10648016
> 
> 赞同：0
> 
> 时间：2012-05-18T06:52:35.300
> 
> 标签：jquery, validation, jquery-validate, html-editor

```
<script src="/Scripts/jquery-1.4.4.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<link href="/CSS/jquery.wysiwyg.css" rel="stylesheet" type="text/css" />
<script src="/JS/jquery.wysiwyg.js" type="text/javascript"></script>
<script type="text/javascript" >
    $(document).ready(function () {
        $('#wysiwyg').wysiwyg()
    });   
</script>

<form id="form" action="example/foo" method="post">
    <textarea id="wysiwyg" name="question" class="required" rows="5" cols="10"> </textarea>
</form> 
```

This is my code in which I am using an HTML editor. I put require validation and it works fine, but if I put only some spaces and submit my form jQuery assumes it is valid. On the other hand in the rest of my project jQuery is behaving normally.

How can I solve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:03:44.100

如果我的问题正确，您正在尝试验证所需属性的文本框，请尝试添加规则，例如

```
$("#wysiwyg").rules("add", { required: true,
messages: {
required: "This feild is required",
}); 
```

并尝试使用以下方法进行验证：

```
$("#commentForm").validate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:14:27.710

尝试这个

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" > </script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"></script>
    <script>
    $(document).ready(function(){
            $('#form').validate();
    })
</script>
        <form id="form" action="example/foo" method="post">
    <textarea id="wysiwyg" name="question" class="required" rows="5" cols="10"></textarea>
    <input type="submit" value="sub"> 
```

# perl - Parallel test execution in Perl

> ID：10648020
> 
> 赞同：1
> 
> 时间：2012-05-18T06:52:57.460
> 
> 标签：perl, selenium, parallel-processing, automation

Does anyone have any idea about parallel execution of test cases in perl using selenium.

Is there any perl module similar to ParallelComputer in JUnit.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:02:17.870

[在您的测试文件中：](http://p3rl.org/Test%3a%3aWWW%3a%3aSelenium)

```
use Test::WWW::Selenium;
⋮ 
```

[调用线束：](http://p3rl.org/prove)

```
prove --jobs 10 
```

# java - Why the Class cannot be seen in its source file Java

> ID：10648026
> 
> 赞同：2
> 
> 时间：2012-05-18T06:53:34.643
> 
> 标签：java, classnotfoundexception

Whatever I do I cannot create new instance of class Serwer. Please help, somehow constructor is invisible. I don't understand why is it so. The constructor is public and everything is coded in one file.

I just get this:

```
java.rmi.StubNotFoundException: Stub class not found: Serwer_Stub; nested exception is: 
java.lang.ClassNotFoundException: Serwer_Stub
at sun.rmi.server.Util.createStub(Unknown Source)
at sun.rmi.server.Util.createProxy(Unknown Source)
at sun.rmi.server.UnicastServerRef.exportObject(Unknown Source)
at java.rmi.server.UnicastRemoteObject.exportObject(Unknown Source)
at java.rmi.server.UnicastRemoteObject.exportObject(Unknown Source)
at com.sun.corba.se.impl.javax.rmi.PortableRemoteObject.exportObject(Unknown Source)
at javax.rmi.PortableRemoteObject.exportObject(Unknown Source)
at javax.rmi.PortableRemoteObject.<init>(Unknown Source)
at Serwer.<init>(Serwer.java:13)
at Serwer.main(Serwer.java:35)
Caused by: java.lang.ClassNotFoundException: Serwer_Stub
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
... 10 more 
```

CLASS

```
import java.rmi.RemoteException;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.Name;
import javax.rmi.PortableRemoteObject;

public class Serwer extends PortableRemoteObject implements MyInterface {

public Serwer() throws RemoteException {
    super();
    try{
        Serwer ref =
                new Serwer();
        Context ctx = new InitialContext();
        ctx.rebind("myinterfaceimplementacja", ref);

    }catch(Exception e){e.printStackTrace();}
}

@Override
public String echo(String napis) throws RemoteException {
    return "echo" + napis;
}

@Override
public int dodaj(int wrt1, int wrt2) throws RemoteException {
    return wrt1 + wrt2;
}

public static void main(String[] args){
    try {
        new Serwer();
    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:42:11.647

您的代码中有两个错误。第一个是`Serwer`构造函数中明显的无限递归，在这里你一次又一次地调用构造函数。这可以通过从构造函数中删除该行并替换`ref`为`this`以下行来解决：

```
public class Serwer extends PortableRemoteObject implements MyInterface {

    public Serwer() throws RemoteException {
        super();
    }

    @Override
    public String echo(String napis) throws RemoteException {
        return "echo" + napis;
    }

    @Override
    public int dodaj(int wrt1, int wrt2) throws RemoteException {
        return wrt1 + wrt2;
    }

    public static void main(String[] args){
        try {
            Serwer ref = new Serwer();
            // Context ctx = new InitialContext();
            // ctx.rebind("myinterfaceimplementacja", ref);
        } catch (RemoteException e) {
            e.printStackTrace();
        }
    }
} 
```

`ClassNotFoundException`但是，这个错误与你得到的无关。导致异常的原因是您将`PortableRemoteObject`其用作远程实现的基类。通常在 Java RMI 中，`Serwer_Stub`当您导出（实例化）远程对象时会自动生成存根类 ( )。但这`PortableRemoteObject`是本案的一个例外。您可以通过两种方式解决此问题：

1.  正如 Kumar 建议的那样，将 替换`javax.rmi.PortableRemoteObject`为`java.rmi.server.UnicastRemoteObject`. 这样stub对象就自动创建了，上面的代码就可以愉快的运行了，我测试了一下。

    ```
    public class Serwer extends UnicastRemoteObject implements MyInterface { 
    ```

2.  如果出于某种原因必须使用`PortableRemoteObject`，则应使用`rmic`JDK 附带的 RMI 编译器 ( ) 工具手动生成存根类。

    首先，编译`Serwer`类：

    ```
    javac Serwer.java 
    ```

    这将生成`Serwer.class`文件。然后调用 RMIC 工具生成存根类：

    ```
    rmic Serwer 
    ```

    这将生成`Serwer_Stub.class`文件。现在你可以运行你的服务器了：

    ```
    java Serwer 
    ```

    我也对此进行了测试，它开始时没有任何例外。

请注意，您的代码中存在另一个使用 Java 命名的错误，导致另一个异常 ( `NoInitialContextException`)，但这也与问题无关，这就是我在上面的代码中将其注释掉的原因。由于我不是这方面的专家`javax.naming`，这取决于其他人来帮助您。

也许您打算使用 RMI 注册表而不是错误地使用命名。RMI 注册表是在 Java RMI 中绑定和查找远程对象的本机方式。在这种情况下，您应该更换

```
Context ctx = new InitialContext();
ctx.rebind("myinterfaceimplementacja", ref); 
```

带有相应 RMI 注册表代码的行：

```
Registry reg = LocateRegistry.createRegistry(1099);
reg.rebind("myinterfaceimplementacja", ref); 
```

这将在标准端口 (1099) 上为您创建 RMI 注册表。如果您运行您的程序，将创建注册表，并且您的远程对象将被导出并以给定名称注册。

另一种方法是写

```
Registry reg = LocateRegistry.getRegistry(); 
```

这使您的程序可以找到已经在运行的现有注册表。您必须在运行程序之前启动 RMI 注册表，方法是调用该`remiregistry`工具，该工具也是 JDK 的一部分：

```
rmiregistry 
```

现在您可以编译并启动您的程序：

```
javac Serwer.java
java Serwer 
```

它将启动并在注册表中注册您的远程对象实现，使其可供客户端查找。

# sql - How to get elasticsearch to perform similar to SQL 'LIKE'

> ID：10648030
> 
> 赞同：7
> 
> 时间：2012-05-18T06:53:49.423
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql, elasticsearch

If using a SQL 'Like' statement to query data it will return data even if its only partially matched. For instance, if I'm searching for food and there's an item in my db called "raisins" when using SQL the query would return "raisins" even if my search only contained "rai". In elasticsearch, the query won't return a record unless the entire name (in this case "raisins") is specified. How can I get elasticsearch to behave similar to the SQL statement. I'm using Rails 3.1.1 and PostgreSQL. Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T07:10:43.453

While creating index of model for elasticsearch use tokenizer on index which will fulfil your requirement. For. e.g.

```
tokenizer: {
              :name_tokenizer => {type: "edgeNGram", max_gram: 100, min_gram: 3, side: "front"}
           } 
```

this will create tokens of size from 3 to 100 of your fields and as side is given as front it will check from the starting. You can get more details from here [http://www.slideshare.net/clintongormley/terms-of-endearment-the-elasticsearch-query-dsl-explained](http://www.slideshare.net/clintongormley/terms-of-endearment-the-elasticsearch-query-dsl-explained)

# php - 如何排除 MySql 中的某些记录

> ID：10648039
> 
> 赞同：0
> 
> 时间：2012-05-18T06:54:31.263
> 
> 标签：php, mysql, database

这是我的问题...对不起，如果对某些用户来说太简单了，我是新手。

我有三个数据库表，**People** (idPerson)、**Question** (idQuestion,Answer)、**AskedQuestions** (idPerson,idQuestion)。当我向用户提问时，我会在 AskedQuestions 中添加一行，这样我就可以获得注册表。

我遇到的问题是我必须选择一个**随机**问题，以前没有向指定用户询问过这个问题。

我已经阅读了几个小时以了解选择随机行的最佳方法，以及如何进行查询以仅选择被询问的行，但还没有想出如何混合它们。

任何人都知道我该怎么做，在**PHP 和 MySql**中？我会非常感谢它。提前感谢社区，对不起我的英语，我的英语技能不是最好的！

问候

**编辑**

我试图投票给你们所有人，但是直到我有rep15，啊哈哈......我忘了提到一件事，因为我正在阅读，使用 RAND() 对表格进行全面扫描，这在我的案例是不可接受的，因为表格是关于 500000 条记录的相当大的问题，而 AskedQuestions 是关于 1500000 甚至更多的问题......所以执行 RAND 的时间太慢了......

我需要类似...加入问题和提出的问题，并排除 idUser 等于会话用户和 idQuestion == idAskedQuestion 的问题...并从那里随机选择一个？

有没有办法做到这一点，在这种情况下，它会非常慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T06:58:41.870

```
$res=mysql_query("select count(*) as number from question where idquestion not 
in(select idquestion from askedquestion where idperson='".$_session['id']."')");
$row=mysql_fetch_assoc($res);
$num=$row['number'];
//$num has no. of rows

$final_query="select * from question where idquestion 
not in(select idquestion from askedquestion 
where idperson='".$_session['id']."') limit ".rand(0,$num).",1"; 
```

它将选择不同的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T06:57:42.273

选择随机问题：

```
select * from question order by rand() limit 1 
```

选择以前没有问过的问题：

```
select * from question where idQuestion not in (select idQuestion from AskedQuestions) 
```

结合：

```
select * from question 
where idQuestion not in (select idQuestion from AskedQuestions)
order by rand() 
limit 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T06:59:02.937

您是否已经尝试过`ORDER BY RAND()`选择随机行并`NOT IN`仅匹配未提出的问题？就像是：

```
选择 q.idQuestion
来自问题 q
WHERE q.idQuestion 不在（从 AskedQuestions aq 中选择 aq.idQuestion，其中 aq.idPerson = 1）
兰德订购（）

```

显然，将 1 替换为适当的值（可能是 PHP 变量）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T07:01:18.043

尝试：

```
SELECT * FROM Question, AskedQuestions WHERE AskedQuestions.idQuestion != Question.idQuestion AND AskedQuestions.idPerson = 'PERSON_ID' LIMIT 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T07:04:58.153

尝试下面给出的查询

```
SELECT * FROM `Question` AS qs WHERE qs.idQuestion not in(SELECT aq.idQuestion FROM  
   AskedQuestions` AS aq WHERE aq.idPerson = loggedinUserID) ORDER BY RAND() LIMIT 0,1 
```

如果您不想在查询中使用 rand() ，那么有一种方法..

```
 /*Select max and min id*/
   $range_result = mysql_query( " SELECT MAX(`idQuestion `) AS max_id , MIN(`idQuestion `) AS 
   min_id FROM `Question` ");

    $range_row = mysql_fetch_object( $range_result );

    $random = mt_rand( $range_row->min_id , $range_row->max_id );

   $result = mysql_query( " SELECT * FROM `Question` AS qs  WHERE qs.`idQuestion` >= $random  
    AND qs.idQuestion not in (SELECT aq.idQuestion From ASkedQuestions AS aq where  
    aq.idPerson   = loggedInUSerID) LIMIT 0,1 "); 
```

我希望它对你有帮助。

谢谢

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T07:06:17.003

到目前为止你做了什么？

你可以试试这个：

```
SELECT * Question q LEFT JOIN AskedQuestions a ON a.idQuestion = q.idQuestion WHERE a.idQuestion is null AND a.id AND a.idperson = 2 ORDER BY RAND() LIMIT 1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-05T20:13:34.560

我对如何*有效*地选择随机行进行了调查。结果在[*这里*](https://mariadb.com/kb/en/mariadb/techniques-on-efficiently-finding-a-random-row/)。

对于您的情况，您有`AUTO_INCREMENT`? 如果是这样，那么看看“Case: AUTO_INCREMENT with gaps, 1 row returned”是否能满足您的需求。请注意，`WHERE`过滤掉不需要的问题的子句会导致“空白”。

如果不是，则考虑 FLOAT 或 UUID 方法。两者都应该做得很好，但可能需要一个用于此“随机”目的的列。

# android - Android create layers in canvas

> ID：10648043
> 
> 赞同：14
> 
> 时间：2012-05-18T06:54:42.163
> 
> 标签：android, paint, android-canvas, layer

I want to learn how can I create layers (like in photoshop) in my android application. I want to achieve one basic thing: when I add an image in my canvas, which will be some figure for example, I want to be able to paint the canvas, but the painting must not effect the lines of figure. And then I need to save that image on my Sd card.

Any suggestions/advice/examples? What can I use to achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:10:25.013

你如何绘画的顺序构成了图层。创建一些您绘制的对象堆栈，然后修改单个对象（在图层中绘制）或在此堆栈中移动它们（更改图层）。使用相同的顺序创建要保存的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-07T00:31:52.883

画布中的图层。

```
 Bitmap bitmap=Bitmap.createBitmap(500,500, Bitmap.Config.ARGB_8888);
    Canvas canvas=new Canvas(bitmap);
    Paint paint_outer=new Paint();
    paint_outer.setColor(Color.parseColor("#DEB887"));
    paint_outer.setStrokeWidth(140);
    paint_outer.setStyle(Paint.Style.STROKE);
    canvas.drawCircle(250,250,150,paint_outer);

    Paint paint_inner=new Paint();
    ComposePathEffect pathEffect=new ComposePathEffect(new CornerPathEffect(40),new DiscretePathEffect(60f,25f));
    paint_inner.setPathEffect(pathEffect);
    paint_inner.setColor(Color.parseColor("#8B4513"));
    paint_inner.setStrokeWidth(90);
    paint_inner.setStyle(Paint.Style.STROKE);
    canvas.drawCircle(250,250,150,paint_inner);
    iv.setImageBitmap(bitmap); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T23:16:29.107

您可以在 FrameLayout 中组合图层。您可能需要一些技巧来确保将触摸事件传递到正确的层。

一旦你让 android 以你喜欢的方式组合你的视图，你可以 mFrameLayout.onDraw(Canvas c) 将整个东西绘制到画布上。

这篇文章有一些关于如何将你的视图组变成一个 jpeg [画布上的图像到 JPEG 文件的信息](https://stackoverflow.com/questions/2174875/android-canvas-to-jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T20:35:39.563

`Xfermode`查看可以应用于的各种s `Paint`。 `PorterDuff.Mode`提供一些选项，就像您在 Photoshop 中获得的一样，例如，加网和乘法、变亮和变暗。然而，这`AvoidXferMode`可能更适合您的需求。

# tumblr - 添加无限滚动代码时，Tumblr 音频/视频播放器无法正常工作

> ID：10648051
> 
> 赞同：0
> 
> 时间：2012-05-18T06:56:13.423
> 
> 标签：tumblr, infinite-scroll

> **可能重复：**
> [tumblr 音频/视频播放器 + 无限滚动的 Masonry](https://stackoverflow.com/questions/10165501/tumblr-audio-video-players-masonry-with-infinite-scroll)

我使用的不是无限滚动的[tumblr 主题，名为](http://www.tumblr.com/theme/6177). 所以我搜索并找到了这本[手册](http://tumblring.net/making-your-tumblr-an-endless-scrolling-page/)。

我按照说明进行操作，直到方法 3。除了视频和音频播放器外，一切正常，它们不会加载到第二页等等，而是显示此消息“需要 Flash 9 才能收听音频。”。我到处都在研究，甚至给制作主题的人和我上面给出的网站发信息，但没有回复。所以现在我正在尝试这个网站。我是新手，绝对不是程序员。但我可以遵循详细的说明。

希望可以有人帮帮我。我真的希望我的 tumblr 可以无限滚动，所以我可以添加 Steampad 作为背景音乐，这样我的所有音乐帖子都会播放。

虽然我可以在没有无限滚动的情况下添加蒸汽垫，但它不会奏效，因为当你翻页时，播放器会刷新，音乐会重新开始。

但同时我也希望我的视频和音频在人们浏览我的 tumblr 时能够正常工作。无论如何，他们可以随时停止蒸汽垫。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:28:18.517

这个[问答](https://stackoverflow.com/questions/10165501/tumblr-audio-video-players-masonry-with-infinite-scroll)（不关注砌体）会对你有所帮助。我认为这个问题中包含的建议应该会有所帮助。

您需要在[自定义页面](http://www.tumblr.com/customize)上添加脚本并编辑主题的 html 模板。

# android - android中两个的单击监听器

> ID：10648053
> 
> 赞同：0
> 
> 时间：2012-05-18T06:56:25.957
> 
> 标签：android, onclick

在下面的代码中，我分别为两个表创建了一个点击监听器。如何为两者进行单击事件以比较它们的行 ID。因为在比较行之后，我必须在它们之间画一条线。

```
for (i = 0; i < data.getItem().size(); i++) {

        final TableRow tr = new TableRow(this);
        final TableRow tr1 = new TableRow(this);
        tr.setPadding(2, 2, 2, 2);

        TableLayout.LayoutParams tableRowParams=
              new TableLayout.LayoutParams
              (TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.FILL_PARENT);

        int leftMargin=0;
        int topMargin=2;
        int rightMargin=0;
        int bottomMargin=1;

        tableRowParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);

        tr.setLayoutParams(tableRowParams);
        tr1.setLayoutParams(tableRowParams);

        match1[i]= new TextView(this);
        match1[i].setId(i);
        System.out.println(match1[i].getId());
        match1[i].setText(data.getItem().get(i));
        System.out.println(match1[i].getText().toString());
        match1[i].setTextColor(Color.WHITE);
        match1[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        match1[i].setTextSize(12);
        match1[i].setPadding(10,0,0,0);
        tr.addView(match1[i]);
        Log.e("TAG", "ID: "+match1[i].getId());
        final View row=t1.getChildAt(i);
        row.setOnClickListener(new OnClickListener(){
           public void onClick(View v){
            int row_id=t1.indexOfChild(row);
            Log.e("TAG ID for Table 1", "ID: "+row_id);
            //Toast.makeText(getBaseContext(), row_id, Toast.LENGTH_SHORT).show();
           }
        });
        t1.addView(tr, tableRowParams);

        match2[i]= new TextView(this);
        match2[i].setId(i);
        match2[i].setText(data.getTarget().get(i));
        System.out.println(match2[i].getText().toString());
        match2[i].setTextColor(Color.WHITE);
        match2[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        match2[i].setTextSize(12);
        //match2[i].setPadding(10,0,0,0);
        tr.addView(match2[i]);
        Log.e("TAG ID For Tabel 2", "ID: "+match1[i].getId());
        final View row1=t2.getChildAt(i);
        row1.setOnClickListener(new OnClickListener(){
           public void onClick(View v){
            int row_id=t2.indexOfChild(row1);
            Log.e("TAG", "ID: "+row_id);
            //Toast.makeText(getBaseContext(), row_id, Toast.LENGTH_SHORT).show();
           }
        });
        t2.addView(tr1, tableRowParams);

        /*if(match1[i].getId() == match2[i].getId()){
            //draw.onDraw(canvas);
            Toast.makeText(this, "Yipee", Toast.LENGTH_SHORT).show();
        }else
            Toast.makeText(this, ":(((((", Toast.LENGTH_SHORT).show();*/

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:01:05.490

```
private class MyOnClickListener implements OnClickListener {

   ViewGroup group;

   private MyOnClickListener(ViewGroup group) {
       this.group = group;
   }

   @Override
   public void onClick(View view) {
       int row_id = group.indexOfChild(row1); // or whatever
       Log.e("TAG", "ID: "+row_id);
   }
} 
```

////////

```
MyOnClickListener listener = new MyOnClickListener(t1);
row.setOnClickListener(listener);
...

MyOnClickListener listener = new MyOnClickListener(t2);
anotherRow.setOnClickListener(listener); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:02:38.750

你可以这样做：

```
OnClickListener listener = new OnClickListener()
{
    @Override
    public void onClick(View v)
    {
        // whatever you want
    }
};

// ...

row.setOnClickListener(listener);
row1.setOnClickListener(listener); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:05:53.083

两种选择：让您的类实现`OnClickListener`并在内部实现它，如下所示：

```
class Custom implements OnClickListener{
    public void onClick(View v){
        switch(v.getId()){
        case ROW1_ID:
            ....
            break;
        case ROW2_ID:
            ....
            break;
        }
    }

} 
```

像这样使用它：

```
row1.setOnClickListener(this)
row.setOnClickListener(this) 
```

或使用这样的简单变量：

```
private OnClickListener myListener = new OnClickListener(){
    public void onClick(View v){
        switch(v.getId()){
        case ROW1_ID:
            ....
            break;
        case ROW2_ID:
            ....
            break;
        }
} 
```

像这样使用它：

```
row1.setOnClickListener(myListener);
row.setOnClickListener(this) 
```

# ruby-on-rails - Rails：Act_as_taggable_on 与 Rocket_tag

> ID：10648058
> 
> 赞同：6
> 
> 时间：2012-05-18T06:57:02.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, tags, ruby-on-rails-plugins, acts-as-taggable-on

看起来[Act_as_taggable_on](https://github.com/mbleigh/acts-as-taggable-on#finding-tagged-objects)是更成熟的宝石，但[Rocket_tag](https://github.com/bradphelan/rocket_tag)是更新和更热门的宝石。

你会推荐哪一个，为什么？

我发现大多数比较 Rails 标记的帖子都已经过时了，我想知道是否有人知道 Rocket_tag （关于它的信息不多）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:03:41.780

我是rocket_tag的作者，所以我有点偏见。我编写rocket_tag 的原因是我发现其他可标记gem 的代码混乱且不可读，因此难以扩展和使用。我通常使用 Ernie Millers excelent [Squeel](http://erniemiller.org/projects/squeel/) GEM 来编写和编写数据库查询。Squeel 是一个超级干净和强大的 ruby​​ DSL，用于组合 SQL。

如果您需要一些自定义标记查询，那么我建议您看看 Rocket_tag 是如何组合在一起的，并尝试推出您自己的标记分析方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T13:39:25.160

我两个都用过。

我对 act_as_taggable 非常满意，但是对于 Rails 3.1，我切换到了 rocket_tag。

在 Rails <3.1 act_as_taggable 中的每个项目上。

对不起，我没有任何在线资源，只是我个人的看法。

# ios - UIStepper 在 ios 4.1 中不起作用

> ID：10648059
> 
> 赞同：0
> 
> 时间：2012-05-18T06:57:03.567
> 
> 标签：ios, ios5, ios4

我在使用最新工具（5.1）生成的代码中获得了 UIStepper。现在我想让这个应用程序可用于 4.3 版本。当我将部署目标指定为 4.3 并在 4.3 模拟器中运行应用程序时，它会在为步进器设置值的部分崩溃。

step.value = [[array objectAtIndex:Indexpath.row] doubleValue];

此值未设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:24:21.087

您正在使用早期版本的 iOS 中不可用的功能。

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIStepper_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIStepper_Class/Reference/Reference.html)

引用文档：

> UIStepper 类参考
> 
> 从 UIControl 继承： UIView ： UIResponder ： NSObject
> 
> 符合
> NSCoding (UIView) UIAppearance (UIView) UIAppearanceContainer (UIView) NSObject (NSObject)
> 
> 框架 /System/Library/Frameworks/UIKit.framework
> 
> 可用性
> 适用于 iOS 5.0 及更高版本。在 UIStepper.h 中声明

# c# - VB 代码函数 Randomize() 和更多 c# 中的函数

> ID：10648061
> 
> 赞同：-1
> 
> 时间：2012-05-18T06:57:25.123
> 
> 标签：c#, vb.net, vb.net-to-c#

让我知道如何在 c# 中编写这三个函数：Randomize, Int, Ran()

**随机化（）；**

```
 //  This is my VB Code
    for (  ; (KeyOK(sKey) == false); )
    {
        for ( ; (PartOK(sPart2) == false);  )
        {
            sPart2 = "";
            for (lCount = 1; (lCount <= PART_LENGTH); lCount++) {
                sPart2 = (sPart2 +  Int((10 *  Rnd())).ToString());
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:04:00.553

使用类`Random`获取随机数。

```
 Random rnd = new Random(); 
```

然后使用该方法的其中一个重载方法调用`Next()`来获取一个随机数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:04:36.420

那不是VB代码，那是一些奇怪的组合...

首先创建一个`Random`对象（循环外）：

```
Random rnd = new Random(); 
```

使用`Next`方法从中获取随机数：

```
sPart2 += rnd.Next(0, 10).ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:11:21.253

此外，请注意，大多数 VB 内置函数和常量都可以在[`Microsoft.VisualBasic`](http://msdn.microsoft.com/en-us/library/c157t28f%28v=vs.80%29.aspx)命名空间中找到（包括`MsgBox`，这在 C# 中看起来有点奇怪，但我发现它有时很实用），可以通过 C# 访问。

现在，`Random`已经解释过了。`Int`可以用不同的方式翻译。主要是转换为`int`，但对于特殊行为，请查看`Math.Round`,`Math.Floor`和`Math.Ceiling`。

# java - JFreeChart 温度计绘制多个 CRITICAL 子范围

> ID：10648063
> 
> 赞同：0
> 
> 时间：2012-05-18T06:57:35.163
> 
> 标签：java, jfreechart

我正在使用 JFreeChart 作为我的 java 应用程序的库，并且我正在尝试设置多个 CRITICAL 子范围。

```
 // create a dataset...
    final DefaultValueDataset dataset = new DefaultValueDataset(new Double(10));

    // create the chart...
    final ThermometerPlot plot = new ThermometerPlot(dataset);
    final JFreeChart chart = new JFreeChart("Test", JFreeChart.DEFAULT_TITLE_FONT, plot, false);   

    plot.setRange(-20, 100);

    plot.setSubrange(ThermometerPlot.CRITICAL, -20.0, 0.0);
    plot.setSubrange(ThermometerPlot.NORMAL, 0.0, 40.0);
    plot.setSubrange(ThermometerPlot.WARNING, 40.0, 70.0);
    plot.setSubrange(ThermometerPlot.CRITICAL, 70.0, 100.0);

    plot.setThermometerPaint(Color.lightGray);
    final ChartPanel chartPanel = new ChartPanel(chart);
    getContentPane().add(chartPanel); 
```

它不起作用:(我的错误是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:22:58.533

您好，您可以将默认 MercuryPaint 设置为红色并选择一个临界范围并定义正常和警告，然后删除此行：

```
 plot.setSubrange(ThermometerPlot.CRITICAL, 70.0, 100.0); 
```

就是这样。我做了我自己的例子，正常范围为 20-24，并且低于和高于该值。这是我的代码：

```
package com.tesis.ejemplo;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JTextArea;
import javax.swing.JTextField;

import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.ThermometerPlot;
import org.jfree.data.general.DefaultValueDataset;
import org.jfree.ui.ApplicationFrame;

/**
 * A simple demonstration application showing how to create a thermometer.
 */

public class ThermometerDemo2 extends ApplicationFrame {

    /**
     * Creates a new demo.
     *
     * @param title  the frame title.
     */

    private JTextField txtField = new JTextField();
    private  DefaultValueDataset dataset;

    public ThermometerDemo2(final String title) {

        super(title);

        // create a dataset...
        dataset = new DefaultValueDataset(new Double(24.0));

        // create the chart...
        final ThermometerPlot plot = new ThermometerPlot(dataset);
        final JFreeChart chart = new JFreeChart("Thermometer Demo 2",  // chart title
                                          JFreeChart.DEFAULT_TITLE_FONT,
                                          plot,                 // plot
                                          false);               // include legend

        plot.setThermometerStroke(new BasicStroke(2.0f));
        plot.setThermometerPaint(Color.lightGray);
        plot.setRange(-10.0, 70.0);
        plot.setSubrangeInfo(1, 19.0, 22.0, -10.0, 22.0);
        plot.setSubrangeInfo(0, 22.0, 24.0, 10.0, 26.0);
        plot.setMercuryPaint(Color.red);
        plot.setSubrangePaint(1, Color.green);

        // add the chart to a panel...
        final ChartPanel chartPanel = new ChartPanel(chart);
        setContentPane(chartPanel);
        chartPanel.add( txtField  );

        txtField.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                dataset.setValue(  Integer.getInteger( txtField.getText() ) );

            }
        });

    }

    public static void main(final String[] args) {

        final ThermometerDemo2 demo = new ThermometerDemo2("Thermometer Demo 2");
        demo.pack();
        demo.setVisible(true);

    }

} 
```

# c# - JavaScriptDeseializer：无法序列化数组

> ID：10648069
> 
> 赞同：1
> 
> 时间：2012-05-18T06:57:59.210
> 
> 标签：c#, asp.net, json, asp.net-ajax

我的应用程序是asp.net。我必须将一些值发送回服务器。为此，我创建了一个对象序列化它并将其发送到服务器。在服务器我尝试反序列化它以下是我的代码

```
 [Serializable]
    public class PassData
    {
        public PassData()
        {  
        }

        public List<testWh> SelectedId { get; set; }

        public string SelectedControlClientId { get; set; }

        public string GroupTypeId { get; set; }

        public string SectionTypeId { get; set; }

  }

    [Serializable]
    public class testWh
    {
        public testWh()

        {
        }
        public string Id { get; set; }
    }

JavaScriptSerializer serializer = new JavaScriptSerializer();
//this can not serialize the SelectedId and the count remains 0
PassData data = serializer.Deserialize<PassData>(jsonString);
//this serialize in an anonymous object with key value pair
var data2 = serializer.DeserializeObject(textHiddenArguments.Text); 
```

以下是我的 Json 序列化字符串

```
{
   "SelectedId":{"0":"ABCD","1":"JKLM"},
   "SelectedControlClientId":"YTUTOOO",
   "GroupTypeId":3,
   "SectionTypeId":"1"
} 
```

引号转义字符串

```
"{\"SelectedId\":{\"0\":\"ABCD\",\"1\":\"JKLM\"},\"SelectedControlClientId\":\"YTUTOOO\",\"GroupTypeId\":3,\"SectionTypeId\":\"1\"}" 
```

我的问题是选定的 Id 是 testWH 对象的数组。但是当我尝试反序列化它时，作为列表的 PassData 的 SelectedId 属性不会被序列化并且计数保持为零。

我尝试使用数组而不是列表，这给出了一个异常“无参数少构造函数......”

谁能解释我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:10:36.367

这里的关键问题是 JSON 与您构建的对象不匹配。您可以通过编写所需的数据并序列化来看到这一点：

```
var obj = new PassData
{
    SelectedId = new List<testWh>
    {
        new testWh { Id = "ABCD"},
        new testWh { Id = "JKLM"}
    },
    GroupTypeId = "3",
    SectionTypeId = "1",
    SelectedControlClientId = "YTUTOOO"
};
string jsonString = serializer.Serialize(obj); 
```

这给了JSON像：

```
{"SelectedId":[{"Id":"ABCD"},{"Id":"JKLM"}],
 "SelectedControlClientId":"YTUTOOO","GroupTypeId":"3","SectionTypeId":"1"} 
```

因此，现在您需要决定要更改哪个；JSON 或类。以下替代类适用于您的原始 JSON，例如：

```
public class PassData
{
    public Dictionary<string,string> SelectedId { get; set; }
    public string SelectedControlClientId { get; set; }
    public string GroupTypeId { get; set; }
    public string SectionTypeId { get; set; }
} 
```

# android - 如何在android中更新自定义listview文本视图位置

> ID：10648072
> 
> 赞同：0
> 
> 时间：2012-05-18T06:58:03.767
> 
> 标签：android

我已经实现了自定义列表视图。我在第四行有年份（Textview）。如果用户单击年份，我必须显示日期选择器并更新年份（Textview）中的日期选择器值。谁能告诉我该怎么做？android 上是否有任何 iphone 风格的日期选择器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:08:07.847

onlist item click 你可以写这行

```
 showDialog(DATE_DIALOG_ID); 
```

在这种方法中，您可以编写此代码

```
@Override
    public Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                    mDay); 
```

日期时间选择器代码

```
private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;

            updateFromDateDisplay(false);

        }
    };

    private void updateFromDateDisplay(boolean flag) {
        String mTempDay = "", mTempMonth = "";
        if (mDay < 10) {
            mTempDay = returnProperDateMonth(mDay);
        } else {
            mTempDay = Integer.toString(mDay);
        }

        if (mMonth < 10) {
            mTempMonth = returnProperDateMonth(mMonth + 1);
        } else {
            mTempMonth = Integer.toString(mMonth + 1);
        }
        if(flag){
            startsOn.setText(new StringBuilder().append(mTempDay).append("/")
                    .append(mTempMonth).append("/").append(mYear).append(""));
        }else{

            if (mWhichDatePicker == 3) {
                startsOn.setText(new StringBuilder().append(mTempDay).append("/")
                        .append(mTempMonth).append("/").append(mYear).append(""));
                startsOn.setSelection((new StringBuilder().append(mTempDay)
                        .append("/").append(mTempMonth).append("/").append(mYear)
                        .append("")).length());
            } else if (mWhichDatePicker == 4) {
                endsOn.setText(new StringBuilder().append(mTempDay).append("/")
                        .append(mTempMonth).append("/").append(mYear).append(""));
                endsOn.setSelection((new StringBuilder().append(mTempDay)
                        .append("/").append(mTempMonth).append("/").append(mYear)
                        .append("")).length());

                Calendar cal = Calendar.getInstance();
                cal.set(mYear, mMonth, mDay);
                endDate = cal.getTime();
            }
        }

    } 
```

和列表视图的自定义文本视图中的日期。希望它对你有用。谢谢

# c - 在 ARM Cortex-R4 上运行无 MMU Linux

> ID：10648073
> 
> 赞同：8
> 
> 时间：2012-05-18T06:58:12.033
> 
> 标签：c, memory, memory-management, filesystems, embedded-linux

我正在为我的系统使用 ARM Cortex-R4。它有一个内存保护单元而不是一个内存管理单元。实际上，这意味着内存保护有专用硬件，但物理地址和虚拟地址之间存在一对一的映射。我对我应该选择哪个 Linux 有点困惑——禁用 MMU 的标准 Linux 内核或 uCLinux。

在 ARM 的评估板上，我运行了禁用 MMU 编译的标准内核。我使用了 ARM 官方网站上提供的 cramfs 文件系统。内核启动后，我在 shell 中，但我无法做太多实验，因为我发现大多数时候，shell 停止响应（特别是当我按“tab”自动完成时）。

所以我仍然不确定如果我使用正确的文件系统，无 MMU 内核是否应该顺利运行。另外，我应该为无 VM Linux 使用哪个发行版（buildroot？）？

欢迎任何想法或建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-09T10:06:02.810

我问这个问题已经2年多了。现在是我应该写下我为自己找到的东西的时候了。

ucLinux 是很久以前从 Linux 内核派生出来的一个项目，旨在为无 MMU 的系统开发内核。但是，过了一段时间，它被合并到了父 Linux 分支。所以，今天不存在任何活跃的 ucLinux 发行版。

因此，如果您从主线内核配置中禁用 MMU，您将获得一个无 MMU 的版本。事实上，现在内核本身提供了配置选项，用户可以指定内存布局和访问权限。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T10:45:28.827

uClinux 是一个 Linux 发行版，它使用“关闭”了 MMU 的 Linux 内核，并在其上添加了一些应用程序和库。你不会选择一个或一个，因为它们是最好的一个。

如果你已经运行了一个 shell，你已经成功地在你的板上启动了没有 MMU 的 Linux，但遇到了一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T09:56:28.870

我相信 ucLinux 就是为这样的东西而构建的 [mmu less systems] [http://www.uclinux.org/description/](http://www.uclinux.org/description/)

# php - 域名可用性

> ID：10648075
> 
> 赞同：0
> 
> 时间：2012-05-18T06:58:13.837
> 
> 标签：php, html

我有一个检查域名可用性的脚本。该脚本不适用于 .gr，我不知道为什么。这是脚本：

```
<?php
set_time_limit(0);
ob_start();

$extensions = array(
    '.com'      => array('whois.crsnic.net','No match for'),
    '.gr'       => array('whois.ripe.net','No entries found'),  
    '.net'      => array('whois.crsnic.net','No match for'),
    '.co.uk'    => array('whois.nic.uk','No match'),
    '.edu'      => array('whois.internic.net', 'No match for'),
);
if(isset($_GET['domain']))
{
    $domain = str_replace(array('www.', 'http://'), NULL, $_GET['domain']);

    if(strlen($domain) > 0)
    {
        foreach($extensions as $extension => $who)
        {
            $buffer = NULL;

            $sock = fsockopen($who[0], 43) or die('Σφάλμα σύνδεσης με τον διακομιστή:' . $server);
            fputs($sock, $domain.$extension . "\r\n");

                while( !feof($sock) )
                {
                    $buffer .= fgets($sock,128);
                }

            fclose($sock);

            if(eregi($who[1], $buffer))
            {
                echo '<h4 class="available"><span>Διαθέσιμo</span>' . $domain. '<b>' . $extension .'</b> είναι διαθέσιμο</h4>';
            }
            else
            {
                echo '<h4 class="taken"><span>Μη Διαθέσιμo</span>' . $domain . '<b>' .$extension .'</b> δεν είναι διαθέσιμο</h4>';
            }
            echo '<br />';  

            ob_flush();
            flush();
            sleep(0.3);

        }
    }
    else
    {
        echo 'Παρακαλώ εισάγετε ένα Domain Name';
    }
}
?> 
```

和HTML：

```
<html>
<head>
<script type="text/javascript" src="jquery-1.2.6.min.js"></script>
<script language="javascript">
$(document).ready(function() {

    var loading;
    var results;

    form = document.getElementById('form');
    loading = document.getElementById('loading');
    results = document.getElementById('results');

    $('#Submit').click( function() {

        if($('#Search').val() == "")
        {alert('Παρακαλώ Εισάγετε Ένα Όνομα');return false;}

        results.style.display = 'none';
        $('#results').html('');
        loading.style.display = 'inline';

        $.post('process.php?domain=' + escape($('#Search').val()),{
        }, function(response){

            results.style.display = 'block';
            $('#results').html(unescape(response)); 
            loading.style.display = 'none';
        });

        return false;
    });

});
</script>
</head>
<body>
<center>
    <div id="Heading">Ευρεση Domain</div>
        <form method="post" action="./" id="form"> 
            <input type="text" autocomplete="on" id="Search" name="domain"> 
            <input type="submit" id="Submit" value="Submit">
        </form>
        <div id="loading">
            <img src="load.gif"></img>
        </div>
            <div id="results" style="width:400px;" align="center"></div>
</center>           
 </body>
</html> 
```

在 .gr 中，我认为“未找到条目”不起作用。有什么线索吗？感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:21:12.250

它实际上似乎与您的代码有关，或者至少使用我的测试。

我换了

```
if(eregi($who[1], $buffer)) 
```

和

```
if(strpos($buffer, $who[1]) !== false) 
```

我的服务器抱怨说，eregi 已贬值，但用 strpos 替换它时，它工作正常。

```
Not available stackoverflow.com
Available stackoverflow.gr
Not available stackoverflow.net
Not available stackoverflow.co.uk
Available stackoverflow.edu 
```

使用

```
<?php
    set_time_limit(0);
    ob_start();

    $extensions = array(
        '.com'      => array('whois.crsnic.net','No match for'),
        '.gr'       => array('whois.ripe.net','No entries found'),  
        '.net'      => array('whois.crsnic.net','No match for'),
        '.co.uk'    => array('whois.nic.uk','No match'),
        '.edu'      => array('whois.internic.net', 'No match for'),
    );
    if(isset($_GET['domain']))
    {
        $domain = str_replace(array('www.', 'http://'), NULL, $_GET['domain']);

        if(strlen($domain) > 0)
        {
            foreach($extensions as $extension => $who)
            {
                $buffer = NULL;

                $sock = fsockopen($who[0], 43) or die('Σφάλμα σύνδεσης με τον διακομιστή:' . $server);
                fputs($sock, $domain.$extension . "\r\n");

                    while( !feof($sock) )
                    {
                        $buffer .= fgets($sock,128);
                    }

                fclose($sock);

                if(strpos($buffer, $who[1]) !== false)
                {
                    echo '<h4 class="available"><span>Available </span>' . $domain. '<b>' . $extension .'</b></h4>';
                }
                else
                {
                    echo '<h4 class="taken"><span>Not available </span>' . $domain . '<b>' .$extension .'</b></h4>';
                }
                echo '<br />';  

                ob_flush();
                flush();
                sleep(0.3);

            }
        }
        else
        {
            echo 'Παρακαλώ εισάγετε ένα Domain Name';
        }
    }
?> 
```

# android - 通过慢速网络播放远程视频

> ID：10648077
> 
> 赞同：1
> 
> 时间：2012-05-18T06:58:22.053
> 
> 标签：android, android-videoview

```
Uri uri = Uri.parse(URLPath);

vv.setVideoURI(uri);
vv.setOnCompletionListener(new OnCompletionListener() {
@Override
public void onCompletion(MediaPlayer mp) {
//play next one
}
});

vv.setOnErrorListener(new OnErrorListener() {
@Override
public boolean onError(MediaPlayer mp, int what, int extra) {
return false;
}
}); 
```

以上代码用于使用 VideoView(vv) 播放远程视频。
它在高速网络上工作。
但是如果使用3G等低速网络，播放会经常失败，并且超出活动范围。t 似乎流比用户播放慢。错误代码为 (1,-1004)。
我该怎么做才能用暂停替换外部活动并等待流式传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T21:32:05.390

您可以使用 Surface View 进行视频流式传输……这可行……

此链接可能对您有所帮助[点击这里](http://androidcodezs.blogspot.com/2013/10/android-network-video.html?view=classic)

# cakephp - 如何重定向到同一页面

> ID：10648081
> 
> 赞同：2
> 
> 时间：2012-05-18T06:58:41.977
> 
> 标签：cakephp

在我的患者“查看”页面中，我使用 ajax 将 div 替换为“医生/添加”。现在我可以在患者视图页面中添加医生。但是，如果发生任何验证错误，它会直接从我的患者视图页面进行。到显示验证消息的“医生/添加”页面。
我希望它停留在当前页面上，在“添加”的输入字段上适当地显示验证消息。

```
function add() {
    if (!empty($this->data)) {
        $this->Doctors->create();
        if ($this->Doctors->save($this->data)) {
            $this->Session->setFlash(__('The Doctor has been saved', true));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The Doctor could not be saved. Please, try again.', true));
        }
    }

} 
```

这是由于 add() 中的 $this->Session->setFlash 造成的吗？谢谢...！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-06T16:08:22.527

尝试这个

```
$this->redirect($this->here); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:14:03.353

你能试试这个吗？

```
function add() {
if (!empty($this->data)) {
    $this->Doctors->create();
    if ($this->Doctors->save($this->data)) {
        $this->Session->setFlash(__('The Doctor has been saved', true));
        $this->redirect(array('action' => 'index'));
    } else {
        $this->Session->setFlash(__('The Doctor could not be saved. Please, try again.', true));

        $this->redirect(array('controller'=>'patient_controller_name', 'action' => 'view'));
    }
}

} 
```

# html - 在 IE 中查看时页眉中的 Wordpress 页脚

> ID：10648083
> 
> 赞同：0
> 
> 时间：2012-05-18T06:58:55.257
> 
> 标签：html, css, wordpress, internet-explorer

好吧，我无法弄清楚这一点，它在 Firefox、Chrome、Safari 等中看起来不错......但是当在 Internet Explorer 9 和更早版本中查看时，页脚会在我[网站](http://www.digitalcables.co.nz)的页眉中自行显示。

我已经完成并修复了一些 W3C 验证错误，弄乱了 html 的结构，在我所知道的范围内玩弄了 css，并阅读了我能找到的所有相关问题。但我所做的只是在 Firefox 中破坏它，而它仍保留在 IE 的标题中。

我还注意到并非中栏和内容的所有角落都正确舍入，这可能是相关的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:15:19.377

你的标签里面有内容，你的标题`<header>`有一个 CSS 。`height``80px`

尝试：获取外部的内容`<header>`

改变

```
<header>...</header>
<footer>...</footer> 
```

到

```
<header>...</header>
<div class="content">...</div>
<footer>...</footer> 
```

并且
不要设置标题的高度

# c# - 使用适用于 .NET 的 AWS 开发工具包或 REST API 从 Amazon S3 检索带有图像和样式表的 HTML 文件

> ID：10648084
> 
> 赞同：4
> 
> 时间：2012-05-18T06:58:56.130
> 
> 标签：c#, .net, amazon-s3

我正在尝试使用适用于 .NET 的 AWS 开发工具包从 Amazon s3 检索一些 HTML 文件。我能够获取 HTML 文件，但链接到网页的图像没有显示，也没有应用相关的样式表。现在，我明白为什么会这样了。因为每个图像和样式表在 Amazon s3 中都是一个单独的对象，而我的代码只是为 HTML 文件创建预签名 URL：

```
 private void GetWebUrl()
{
        var request =
                new GetPreSignedUrlRequest().WithBucketName(bucketName)
                  .WithKey("test/content.htm");
            request.WithExpires(DateTime.Now.Add(new TimeSpan(0, 0, 0, 50)));
            var url = S3.GetPreSignedURL(request);
            Iframe2.Attributes.Add("src", url);
} 
```

访问与此 HTML 文件相关的图像和样式表的最佳方式是什么？我可以查找所有图像，然后使用上述方法生成预签名的 URL 请求，但这不是一种有效的方法，我无法将图像和样式表公开。有没有其他人遇到过类似的问题？此外，如果我使用 Rest API 对用户进行身份验证（使用身份验证标头）会更好，这样浏览器将在标头中包含身份验证信息，而我不必为每个对象创建预签名的 URL。一小段 REST API 代码会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:09:56.710

实现此目的的最佳方法是使用通用处理程序 (.ASHX)。诀窍是将网页和相关对象的来源更改为您的处理程序：

```
src:"StreamFile.ashx?file="ObjKey" 
```

现在，要更改源，您可以更新旧的 HTML 文件并使用指向 (StreamFile.ashx)Generic Handler 的源创建新文件，或者使用 URL 重写将旧 URL 写入新 URL。这可以在 IIS 或 web.config 中完成。如果您在 IIS 中执行此操作，它将自动在您的 web.config 中添加代码。

```
<system.webServer>
    <rewrite>
      <rules>
        <rule name="Content">
          <match url="DevelopmentContent/Course/([a-zA-Z0-9]+)" />
          <action type="Rewrite" url="StreamFile.ashx/?file=course{R:1}" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer> 
```

上面的代码将在 Src 字符串中查找“DevelopmentContent/Course/”，如果找到，会将 URL 重写为 StreamFile.ashx/?file=course{R:1}。R:1 将其余的 URL 粗体部分（DevelopmentContent/Course/ **xyz/xsd/x/sd/ds.htm**）映射到您在亚马逊 S3 中的对象键。现在 StreamHandler.ashx 将接收来自的请求具有指定 URL 的服务器。然后，您可以从查询字符串（context.Request.QueryString["file"]) 中获取对象键，然后创建一个函数来获取所需的对象。

```
public void ProcessRequest(HttpContext context)
        {           
            var response = Gets3Response(context.Request.QueryString["file"]);
            if (response != null)
            {
                using (response)
                {
                    var mimEtype = response.ContentType;
                    context.Response.ContentType = mimEtype;
                    using (var responseStream = response.ResponseStream)
                    {
                        var buffer = new byte[8000];
                        var bytesRead = -1;
                        while ((bytesRead = responseStream.Read(buffer, 0, buffer.Length)) > 0)
                        {
                            context.Response.OutputStream.Write(buffer, 0, bytesRead);
                        }
                    }
                    context.Response.Flush();
                    context.Response.End();
                }
            }
            else
            {

                context.Response.Write("Unable to retrieve content!");

            }
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
    private static GetObjectResponse Gets3Response(string fileName)
        {
            GetObjectResponse response;
            if (fileName.Trim().Length == 0)
            {
                return null;
            }
            try
            {
                var request = new GetObjectRequest();
                request.WithBucketName(BucketName).WithKey(fileName);
                response = AmazonS3ClientProvider.CreateS3Client().GetObject(request);
            }
            catch (AmazonS3Exception amazonS3Exception)
            {
                if (amazonS3Exception.ErrorCode != null &&      (amazonS3Exception.ErrorCode.Equals("InvalidAccessKeyId") || amazonS3Exception.ErrorCode.Equals("InvalidSecurity")))
                {
                }
                return null;
            }
            catch (Exception ex)
            {
                return null;
            }

            return response;
        } 
```

所以现在所有的 HTTP 请求都将使用您的服务器作为代理进行。

# php - android httppost 为什么在 PHP/MySQL 中使用 $_REQUEST 而不是 $_POST？

> ID：10648086
> 
> 赞同：0
> 
> 时间：2012-05-18T06:59:11.647
> 
> 标签：php, android, mysql, httpclient, http-post

我一直在阅读教程并阅读有关如何将 android 数据发布到 MySQL 的内容，并且我只看到人们在传递变量时使用 $_REQUEST['something'] 。为什么只有 $_REQUEST？而不是 $_POST？是一样的吗？我仍在学习 android 开发和 php 之间的所有优点，

如果有人能解释一下，那就太棒了，

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:07:28.180

正如@Krishna 在上面的评论中几乎回答了它：

> 通过使用`$_POST`我们只能获取 POST 变量，`$_GET`我们只能获取 GET 变量。当我们使用`$_REQUEST`GET & POST 时可以获取变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:59:39.483

我永远不会那样做。由于某种原因，使用`_REQUEST`很受欢迎，但您的请求应该始终`_GET`用于检索或`_POST`存储（也许还有其他方法 - 这取决于）。您永远不需要说“此值可能来自 post 或 get 请求，并且在这两种情况下都有效，因此我们需要使用`_REQUEST`.” 如果是这样的话，那就有问题了。

人们也倾向于忘记`_REQUEST`包括在内`_COOKIE`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T12:12:17.117

如果您将使用 post 方法发送数据，那么您必须使用 $_POST 变量来获取发布的数据，反之亦然如果您使用 get 方法发送数据，您必须使用 $_GET 变量来获取发布的数据

$_REQUEST 用于在两种情况下获取发布的数据，无论是发布还是让您用于发布数据。使用 $_REQUEST 获取数据是有益的

# ruby - 如何在ruby中拆分从“Time.now”获得的字符串

> ID：10648087
> 
> 赞同：0
> 
> 时间：2012-05-18T06:59:17.330
> 
> 标签：ruby

```
A=Time.now 
```

给出以下输出：

```
2012:05:18 12:20:50 +0530 
```

我想形成一个像`"May 18 , 2012"`. 我尝试更改`A`为不可能的字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T07:06:22.397

```
Time.now.strftime('%b %e , %Y') 
```

[更多信息](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T07:11:24.120

您可以查看`Time`Class 和 method `strftime`。它根据给定格式字符串中的指令格式化时间。

[http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)

对于您当前的问题：

`Time.now.strftime("%b %d, %Y")`

# php - php foreach 生成垃圾

> ID：10648095
> 
> 赞同：1
> 
> 时间：2012-05-18T07:00:15.457
> 
> 标签：php, foreach

我在这里有一个非常复杂的循环，我想修改它，而实际上并没有像我预期的那样工作。问题是：我的 if 语句 else 条件正在产生垃圾，我真的不知道问题出在哪里

![在此处输入图像描述](../Images/d60472f321c5d283c7f6e7f9b59e82e5.png)

```
<div id="container">
    <?php include 'header.php';
    foreach ($vars as $item):

    if (is_array($item['productItems'])):?>

    <div class="product_box">
        <h4>
            <?php echo $item['title']?>
        </h4>

        <?php foreach($item['productItems'] as $products):?>

        <?php foreach($products as $key=>$product):?>

        <div class="product">

            <div class="image_holder">

                <a href="<?php echo $product['image']['medium'];?>" class="preview">
                    <img src="<?php echo $product['image']['small'];?>"
                    alt="gallery thumbnail" title="" />
                </a>

                <?php foreach($product['trackingLinks'] as $key=>$trackinglink): ?>
                <a href="<?php echo $trackinglink[0]['ppc']?>"> <span><?php echo $product['name'];?>
                </span>
                </a>
            </div>

            <h5>
                <?php echo 'Preise:&nbsp;'. $product['price'].' &nbsp;'.$product['currency'];?>
            </h5>
            <span><?php echo 'Versand Kosten:&nbsp;'.$product['shippingCosts'].'&nbsp;EUR';?>
            </span>
            <p>
                <?php echo (substr($product['descriptionLong'], 0,150 )).'<a href="'.$trackinglink[0]['ppc'].'">...mehr</a>';?>
            </p>
            <a class="shopping_button"
                href="<?php echo $trackinglink[0]['ppc']?>">zum Shop</a>

        </div>
<?php endforeach ?>
        <?php endforeach ?>
                <?php endforeach ?>

        <div class="ajax_bar">

            <select id="ajax_call" size="1" name="Weitere Produkte">
                <option value='50'>Weitere Produkte</option>
                <option value='100'>weitere 100</option>
                <option value='150'>weitere 150</option>
            </select>

        </div>

    </div>

    <?php else: ?>

    <div class="text_box">
        <h2>
            <?php echo $item['title'];?>
        </h2>
        <p>
            <?php echo $item['text'];?>
        </p>

    </div>
        <?php endif; ?>
            <?php endforeach; ?>

<?php include 'footer.php';?>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:04:29.090

我将在这里做一个疯狂的猜测，并说这是因为你没有使用[`htmlspecialchars`](http://www.php.net/htmlspecialchars)or来逃避你的输出[`htmlentities`](http://www.php.net/htmlentities)。

如果您不确定 for 循环中的内容，请使用这个漂亮的构造在页面上进行调试：

```
echo '<pre>', htmlspecialchars(print_r($vars, true)), '</pre>'; 
```

它还有助于查看页面源代码；这通常会为您的页面布局为何如此混乱提供重要线索。

**更新**

好，知道了！正因为如此：

```
<?php else: ?>
<div class="text_box">
    <h2>
        <?php echo $item['title'];?>
    </h2>
    <p>
        <?php echo $item['text'];?>
    </p> 
```

这里`$item`是一个字符串，`$item['title']`PHP 将其理解为:)`$item[0]`的第一个字符`$item`

# go - 以后会去支持mips

> ID：10648096
> 
> 赞同：0
> 
> 时间：2012-05-18T07:00:18.807
> 
> 标签：go

go 1.0 不支持 mips。

以后会去支持吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:04:43.600

GCC 4.7 有一个*Go*前端（使用*gccgo*命令），并且可以作为交叉编译器构建用于 MIPS 目标。

# java - 访问全局变量时获取垃圾值

> ID：10648107
> 
> 赞同：1
> 
> 时间：2012-05-18T07:01:19.807
> 
> 标签：java, c, java-native-interface, global-variables

我试图`NewGlobalRef function`通过以下代码实现的功能。以下代码中的函数由 Java 代码以 3 秒的间隔调用。当函数被调用时，它会显示它被调用了多少次。我确实得到了第一个输出，但剩余的输出是一些垃圾值。我不知道这是什么原因。遵循以下代码后的输出。

```
#include <stdio.h>
#include "Package_UsingGlobalVariable.h"

void Java_Package_UsingGlobalVariable_evaluator
  (JNIEnv *env, jobject obj) {
jclass cls = (*env)->GetObjectClass(env,obj);
jfieldID fid = (*env)->GetFieldID(env,cls,"count","I");
jint count = (*env)->GetIntField(env,obj,fid);
jclass intGlbRef;
if(count == 0) {
    printf("Number of times this function has been accessed : %d\n",++count);
    (*env)->SetIntField(env,obj,fid,-1); // count changed to -1 : function has been accessed atleast once
    jclass intLclRef = (*env)->FindClass(env,"java/lang/Integer");
      if(intLclRef == NULL) {
        return NULL;
      }
    intGlbRef = (*env)->NewGlobalRef(env,intLclRef);
    intGlbRef = count;
} else {
    jint c;
    c = (jint)intGlbRef;
    printf("Number of times this function has been accessed : %d\n",++c);
    intGlbRef = (jint)c;
    if( c == 3) {
        (*env)->DeleteGlobalRef(env,intGlbRef);
    }
}
} 
```

*输出 ：*

```
Number of times this function has been accessed : 1
Number of times this function has been accessed : 25666561
Number of times this function has been accessed : 25666561 
```

*Java代码：*

```
public class UsingGlobalVariable {
private native void evaluator();
private int count;

public UsingGlobalVariable() {
    count = 0;
}

public static void main(String... args) {
    UsingGlobalVariable o = new UsingGlobalVariable();
    try {
        int i = 0;
        while(i<3) {
            o.evaluator();
            Thread.sleep(3000);
            i++;
        }
    }catch(Exception exc) {
        exc.printStackTrace();
    }
}

static {
    System.loadLibrary("UsingGlobalVariable");
} 
```

}

*C*代码有什么问题？

*C*编译器的警告：

```
W:\elita\jnitesters\workspace\c\UsingGlobalVariable\UsingGlobalVariable.c|11|warning: format '%d' expects type 'int', but argument 2 has type 'jint'|
W:\elita\jnitesters\workspace\c\UsingGlobalVariable\UsingGlobalVariable.c|15|warning: 'return' with a value, in function returning void|
W:\elita\jnitesters\workspace\c\UsingGlobalVariable\UsingGlobalVariable.c|18|warning: assignment makes pointer from integer without a cast|
W:\elita\jnitesters\workspace\c\UsingGlobalVariable\UsingGlobalVariable.c|22|warning: format '%d' expects type 'int', but argument 2 has type 'jint'|
W:\elita\jnitesters\workspace\c\UsingGlobalVariable\UsingGlobalVariable.c|23|warning: assignment makes pointer from integer without a cast|
W:\elita\jnitesters\workspace\c\UsingGlobalVariable\UsingGlobalVariable.c|21|warning: 'intGlbRef' may be used uninitialized in this function|
||=== Build finished: 0 errors, 6 warnings ===| 
```

`intglbRef`最后一个警告可以帮助解决问题，但除了在 if-else 块之外声明之外，我想不出任何其他方法。我应该如何声明它才能得到`1,2,3`结果？

# c# - 实体模型的更新语句

> ID：10648112
> 
> 赞同：0
> 
> 时间：2012-05-18T07:02:14.663
> 
> 标签：c#, asp.net, sql-update, ado.net-entity-data-model

伙计们，我有一个名为**mapsModel的实体模型，它有一个名为****“BodyChartNew”**的实体类型

 **对于插入记录，我使用了一个名为**InsertMap**的处理程序，在此处理程序中，我使用如下代码：

```
using System;
using System.Web;

public class InsertMap : IHttpHandler
{

    private mapsModel.mapsEntities _dataContext = new mapsModel.mapsEntities();

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";

        // Extract form fields
        var title = context.Request["title"];
        var note = context.Request["remarks"];
        var referenceID = context.Request["patient_id"];
        var diagnosisID = context.Request["diagnosis_id"];

        // Create Chart to insert
        var mapsToInsert = new mapsModel.BodyChart { MapCode = title, Remarks = note, PatientID = Convert.ToInt32(referenceID), DiagnosisID = Convert.ToInt32(diagnosisID) };

        // Save new movie to DB
        try
        {
            _dataContext.AddToBodyChart(mapsToInsert);
            _dataContext.SaveChanges();
            // Return success
            context.Response.Write("success");
        }
        catch
        {
            context.Response.Write("fail");
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

我从我的 JQuery 代码中调用这个处理程序，这对我来说很适合**INSERT**，我需要的是**UPDATE**代码。根据**referenceID**和**diagnosticID**更新记录的 UPDATE 语句是什么？

请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T04:45:21.470

您需要从数据库中删除实体（例如

```
var entity = _dataContext.BodyChart.Single(e => e.PatientID = context.Request["patient_id"]); 
```

修改要修改和调用的属性

```
_dataContext.SaveChanges() 
```**

# android - 如何为android进行跨应用自动化测试

> ID：10648115
> 
> 赞同：0
> 
> 时间：2012-05-18T07:02:31.257
> 
> 标签：android, testing, automation

许多应用程序现在需要与其他应用程序交互。我会举一些例子：

调用系统摄像头拍照

在浏览器中打开像[http://www.shihuangzhilu.com](http://www.shihuangzhilu.com)这样的url

android 仪器每次只能测试一个应用程序。我们可以在这里进行自动化测试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:58:25.250

你不能明确不使用当前的android测试框架。你可以做的是使用robotium，然后检查你是否已经取回了值，并且你不再在你的应用程序/活动中，这是我能想到的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:42:04.643

是的，您可以跨应用程序进行测试，请参阅monkeyrunner：http: [//developer.android.com/guide/developing/tools/monkeyrunner_concepts.html](http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html)

（不要与另一个 android 工具 Monkey 混淆）

# c# - 如何通过我的 C# 应用程序关闭文件后立即重新打开文件

> ID：10648117
> 
> 赞同：0
> 
> 时间：2012-05-18T07:02:36.567
> 
> 标签：c#, vb.net, windows-7, .net-4.0

我的想法用完了，找不到任何关于它的参考，所以我开始了......我需要保留一个与我的 c# 项目无关的辅助应用程序始终在后台运行。因此，如果此辅助应用程序崩溃或其他人手动关闭它，它将通过我的 c# 应用程序自动重新启动。

我不知道如何完成这个，我的意思是检查这个应用程序是否被我的 c# 应用程序外部的东西关闭。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:53:35.210

下面的代码在 C# 中，它在 WinForm 中。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Process p = Process.GetProcessesByName("Notepad")[0];
        p.EnableRaisingEvents = true;
        p.Exited += new EventHandler(p_Exited);
    }

    void p_Exited(object sender, EventArgs e)
    {
        MessageBox.Show("Exit");
    } 
```

It looks for a Process with Name Notepad & retrieved the first instance of it. It sets EnableRaisingEvents to true on it and hooks to the Exited event. Whenever notepad is closed it would display an alert.

Based on this logic, you can build your app.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:12:46.200

作为一种解决方案，您可以使用调用您始终运行的应用程序的 Windows 服务。
您可以使该服务从应用程序捕获错误返回代码并根据错误重新启动它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:19:42.877

您可以继续检查进程是否正在运行或未使用 vb.net 中的进程类

For Each p As Process In Process.GetProcessesByName("communicator") ShowWindow(p.MainWindowHandle, SHOW_WINDOW.SW_NORMAL) Next p

如果您想要的进程不在列表中，您可以再次启动它。阿什·库马尔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T07:49:48.347

最简单的方法是运行计时器并在滴答事件中使用 -

```
if (Process.GetProcessesByName("communicator").Count() == 0)
{
   Process.Start("communicator.exe");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T07:05:16.857

您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)来监视其他应用程序修改的文件。

FileSystemWatcher 具有 Changed、Created、Renamed、Deleted 等事件，可以订阅这些事件以跟踪文件更改。

# python - How to execute a Javascript submit form function in scrapy function

> ID：10648120
> 
> 赞同：0
> 
> 时间：2012-05-18T07:03:15.300
> 
> 标签：python, scrapy

I am very new to "scrapy", i am scrapping a website and in that i had some anchor tags which consists of href attributes with java script SubmitForm functions. When i clicked that javascript function a page is opening from which i need to fetch data.I used Xpath and found href for particular anchor tags but unable to execute that href attribute that contains javascript function. Can anyone tell me how to execute javascript Submit functions of anchor tags in scrapy python.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:09:12.680

Scrapy can not excute javascript. Selenium can: [http://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html)

# java - 用户按一次主页后如何从应用程序的最后一个屏幕恢复？

> ID：10648126
> 
> 赞同：2
> 
> 时间：2012-05-18T07:03:45.817
> 
> 标签：java, android, android-homebutton

在我的应用程序中，我有一个要求，如果在应用程序工作期间按下主页按钮，并且如果用户从主屏幕上的图标启动应用程序，则它必须从上一个活动恢复。

如何保存最后的屏幕历史记录并从同一屏幕恢复？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T07:07:08.413

[`AlwaysRetainTaskState`](http://developer.android.com/guide/topics/manifest/activity-element.html#always)可能是您正在寻找的。

在您的`AndroidManifest`, 在活动标签中，只需添加

```
android:alwaysRetainTaskState="true" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:07:41.390

查看以下帖子：

*   [Android - 恢复上次查看的活动](https://stackoverflow.com/questions/1450019/android-restore-last-viewed-activity)，

*   [使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)。

# iphone - SKPaymentQueue restoreCompletedTransactions 多次恢复同一个交易

> ID：10648128
> 
> 赞同：3
> 
> 时间：2012-05-18T07:03:50.217
> 
> 标签：iphone, ios, storekit, in-app-purchase

我在通过 iTunes Connect 购买时设置了 6 个月的自动续订订阅。我创建了一个测试用户并购买了该订阅，现在当我尝试恢复我的购买时，它在交易数组中多次返回相同的交易

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 
```

我使用以下代码来恢复我的购买。

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

请告知我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:44:56.987

确保调用finishTransaction。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T10:48:11.687

我为非消耗品开发了[storekit](https://github.com/idzDeveloper/IDZStoreKit)。看看你是否可以使用它，或者你可以建议我做任何改变。:)
享受！

# wildcard - 如何在 Kloxo 中为 wordpress 多站点的 DNS 添加通配符？

> ID：10648131
> 
> 赞同：0
> 
> 时间：2012-05-18T07:04:08.763
> 
> 标签：wildcard, wordpress, wildcard-subdomain

我想在我的 VPS 中将通配符添加到 DNS（用于设置 Wordpress3.3.2 多站点）。我有 Kloxo，当我想从管理 DNS（在 Domain Adm 中）添加它时，我遇到了这个错误。

```
Alert: invalid_subdomain 
```

我也删除了：

```
// Validates subdomain
if (!preg_match("/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$/", $param['hostname'])) {
throw new lxexception('invalid_subdomain', 'hostname');
} 
```

来自 /usr/local/lxlabs/kloxo/httpdocs/htmllib/lib/dns/dnsbaselib.php，但现在子域显示我的 IP 地址。我想为这个域设置它：310blog.com，我的 ip 服务器是 178.162.231.63。（例如，当我创建一个子域时：[http](http://saman.310blog.com/) : //saman.310blog.com/，它显示 Kloxo 默认页面）

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:48:01.213

我解决了！如果您想在 Kloxo 管理员中添加通配符。您应该按照以下步骤操作：

1.  在您的管理面板中：Domain Adm->Manage DNS->Add A，在 Hostname 字段中您应该输入：

> *

在值字段中：

> YOU_IP_ADDRESS

当您按添加时，您可能会遇到 invalid_subdomain 错误。如果发生这种情况，您应该从您的服务器编辑 /usr/local/lxlabs/kloxo/httpdocs/htmllib/lib/dns/dnsbaselib.php 中的“dnsbaselib.php”，并从第 104 行删除此条件，

```
// Validates subdomain
if (!preg_match("/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$/", $param['hostname'])) {
throw new lxexception('invalid_subdomain', 'hostname');
} 
```

之后重试第一步。

1.  在第一步之后，您需要在此路径中编辑 httpd.conf：/etc/httpd/conf/httpd.conf，并添加以下内容：

> ```
> <VirtualHost YOUR_IP_ADDRESS:80>
> ServerName YOUR_DOMAIN.com
> ServerAlias *.YOUR_RDOMAIN.com
> DocumentRoot /home/DOMAIN_DIR/YOUR_DOMAIN.com/
> DirectoryIndex index.php index.html index.shtml index.htm default.htm Default.aspx Default.asp index.pl
> ScriptAlias /awstats/ /home/kloxo/httpd/awstats/wwwroot/cgi-bin/
> SuexecUserGroup USERNAME USERNAME </VirtualHost> 
> ```

您必须使用您的 IP 地址而不是 YOUR_IP_ADDRESS、您的域名而不是 YOUR_DOMAIN.com、您的域文件夹而不是 DOMAIN_DIR 和您的用户名而不是 USERNAME。3\. 之后重新启动您的 httpd 服务。

```
/etc/init.d/httpd restart 
```

# ios4 - UIImage 调整大小。在模拟器上可以，在设备上不行

> ID：10648132
> 
> 赞同：0
> 
> 时间：2012-05-18T07:04:09.433
> 
> 标签：ios4, uiimage, ios-simulator, device

在一个 iPhone 应用程序中，我编写了一些代码来调整从相册中获取的图像的大小，以便将其用作应用程序的背景。该代码的灵感来自我在网上找到的内容。即在这里： http: [//forrst.com/posts/UIImage_simple_resize_and_crop_image-sUG#comment-land](http://forrst.com/posts/UIImage_simple_resize_and_crop_image-sUG#comment-land) 它在模拟器上运行良好。但看起来设备上根本没有调整大小。这是为什么？任何的想法？

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:20:43.453

> 嗨，米歇尔。
> 
> 我不知道更多关于你的代码，但我正在使用这个代码，你可以试试这个，你会找到你的解决方案。
> 
> 在这里，您需要在此函数中传递图像以及该图像所需的宽度和高度，您将获得另一个具有该新尺寸的图像。

```
 -(UIImage *)resizeImage:(UIImage *)image3 width:(int)width height:(int)height {

        CGImageRef imageRef = [image3 CGImage];
        CGImageAlphaInfo alphaInfo = CGImageGetAlphaInfo(imageRef);

        //if (alphaInfo == kCGImageAlphaNone)
        alphaInfo = kCGImageAlphaNoneSkipLast;

        CGContextRef bitmap = CGBitmapContextCreate(NULL, width, height, CGImageGetBitsPerComponent(imageRef), 4 * width, CGImageGetColorSpace(imageRef), alphaInfo);
        CGContextDrawImage(bitmap, CGRectMake(0, 0, width, height), imageRef);
        CGImageRef ref = CGBitmapContextCreateImage(bitmap);
        UIImage *result = [UIImage imageWithCGImage:ref];

        CGContextRelease(bitmap);
        CGImageRelease(ref);

        return result;  

    } 
```

# silverlight - 使用 ElementName 路径的绑定验证错误

> ID：10648133
> 
> 赞同：0
> 
> 时间：2012-05-18T07:04:17.853
> 
> 标签：silverlight

文本框1：

```
<TextBox x:Name="TextBox1" Text="{Binding IdNumber, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" /> 
```

文本框2：

```
<TextBox x:Name="TextBox2" Text="{Binding Text,ElementName=TextBox1, Mode=TwoWay}" /> 
```

目前：使用上面的代码文本绑定工作正常，但错误验证不起作用。期望：如果假设，TextBox1 中发生的任何验证错误都应该反映在 TextBox2 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:46:22.690

验证状态是根据属性触发的，而不是值。对于 TextBox2，您的 IdNumber 属性中存在错误无关紧要，因为 TextBox1 的 Text 属性没有任何错误。

在 TextBox2 中显示 IdNumber 错误的唯一方法是绑定到 IdNumber 属性。绑定到 IdNumber 属性也会导致 TextBox1 和 TextBox2 显示相同的文本

# android - 我是否需要警报或服务来执行重复性任务？

> ID：10648134
> 
> 赞同：0
> 
> 时间：2012-05-18T07:04:20.967
> 
> 标签：android

我正在为 Android 开发一个 gps 跟踪我希望我的应用程序在手机启动时启动并在 10 分钟内从 10 发送 gps 坐标。

我是否需要使用服务或 AlarmManager 广播接收器才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:06:19.367

您可以在手机启动时启动服务并监听坐标变化。看这篇文章

[开机启动服务](http://www.androidcompetencycenter.com/2009/06/start-service-at-boot/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:15:44.167

如果您获取地理坐标的频率要少得多，比如在几分钟内找到 1 个位置，则首选 AlarmManager 而不是服务...

否则，如果您的频率要高得多，请说每 20/30 秒，然后更喜欢服务，因为 AlarmManager 在几秒钟内提醒的情况下非常繁重......

# android - 在FrameLayout的WebView的中心设置Progressbar

> ID：10648135
> 
> 赞同：3
> 
> 时间：2012-05-18T07:04:21.850
> 
> 标签：android, android-layout, android-framelayout

我想在 Web 视图的中心设置这个进度条：

```
<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity = "center_vertical|center_horizontal">

    <WebView
        android:id="@+id/webView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </WebView>

    <ProgressBar
        android:id="@+id/progressBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal" />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T07:15:18.677

//这对我来说很好

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical|center_horizontal"
    android:gravity="center_vertical|center_horizontal" >

    <WebView
        android:id="@+id/webView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </WebView>

    <ProgressBar
        android:id="@+id/progressBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal" />

</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:12:27.727

应该是这样的：

```
 <ProgressBar
    android:id="@+id/progressBar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" /> 
```

# google-maps - 对于谷歌地图查询字符串，如何正确定位用中文（或其他亚洲语言）书写的地址？

> ID：10648138
> 
> 赞同：0
> 
> 时间：2012-05-18T07:04:30.727
> 
> 标签：google-maps, utf-8

使用中文或其他亚洲语言字符编写用于谷歌地图地址查询的查询字符串的正确方法是什么？这是我到目前为止所拥有的

[http://maps.google.com/maps?q](http://maps.google.com/maps?q) =登别市登别温泉镇65番地&hl=zh-CN&ie=UTF8

这只是带来了一张美国地图。

但是，如果我将地址复制并粘贴到谷歌地图搜索框中，它就可以很好地找到它。

我也尝试过使用 PHP 的 urlencoded 版本。当我将 URL 粘贴到 Web 浏览器中时，它会将其转换回字符，并且输出与上述相同。

我错过了什么？

谢谢！

# java - Android PopupWindow showAtLocation() vs showAsDropDown() - 第一个对我有用，第二个不是

> ID：10648139
> 
> 赞同：2
> 
> 时间：2012-05-18T07:04:33.443
> 
> 标签：java, android, mobile

我使用以下代码在 android 中显示 PopupWindow，我想将弹出窗口固定到 Button，

```
 btnShowPopup = (Button)findViewById(R.id.btnShowPopup);
    btnShowPopup.setOnClickListener(this);

@Override
public void onClick(View v) {
    if(v == btnShowPopup){
        View popupViw = getLayoutInflater().inflate(R.layout.popup_demo, null);
        PopupWindow popup = new PopupWindow(this);
        popup.setContentView(popupViw);
        popup.showAsDropDown(btnShowPopup,10,10);
        //popup.showAtLocation(popupViw, Gravity.BOTTOM, 10, 10);

    }
} 
```

在这种情况下`popup.showAtLocation()`运行良好，但`popup.showAsDropDown()`没有为我显示任何弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:11:24.703

它可能正在工作，但在可见窗口下方显示弹出窗口，因为它附加到 btnShowPopup 视图的左下角。

# c# - 使用 LINQ 在两个数组中获取不同的和常见的项目

> ID：10648141
> 
> 赞同：21
> 
> 时间：2012-05-18T07:04:34.783
> 
> 标签：c#, linq

例如，我有两个数组：

```
var list1 = string[] {"1", "2", "3", "4", "5", "6"};
var list2 = string[] {"2", "3", "4"}; 
```

我想做的是——

1.  `list1`从and获取常用项目`list2`（例如 {"2", "3", "4"}）
2.  获取不同的项目`list1`和`list2`（例如。{“1”，“5”，“6”}）

所以我尝试过使用 LINQ 并且 -

```
var listDiff = list1.Except(list2); //This gets the desire result for different items 
```

但，

```
var listCommon = list1.Intersect(list2); //This doesn't give me desire result. Comes out as {"1", "5", "6", "2", "3", "4"}; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-18T07:14:04.480

不知何故，你从其他地方得到了这个结果。（也许您正在写出`listDIff`first 的内容，并认为它来自`listCommon`。）该`Intersect`方法*确实*为您提供了两个列表中存在的项目：

```
var list1 = new string[] {"1", "2", "3", "4", "5", "6"};
var list2 = new string[] {"2", "3", "4"};
var listCommon = list1.Intersect(list2);
foreach (string s in listCommon) Console.WriteLine(s); 
```

输出：

```
2
3
4 
```

# sql - 第二次执行相同的criteriaQuery生成错误的sql

> ID：10648142
> 
> 赞同：2
> 
> 时间：2012-05-18T07:04:36.233
> 
> 标签：sql, jpa, criteria-api

我不是 JPA 持久性标准 API 专家，有时我使用它会感到非常头疼。

昨天我注意到一个新的非常奇怪的行为。我将发布的代码是对现有功能代码的改编，因此不要关注琐碎的错误。我正在使用 glassfish 3.1.1 和相应的 eclipse 持久性插件和 Mysql DB。

我写了一个criteriaQuery，它过滤来自不同表的数据。如果第二次执行此条件查询两次，则会生成错误的 SQL 查询。我不知道为什么。

```
public CriteriaQuery createQuery4Count(EntityManager em) {
    Calendar lastDate4Search = GregorianCalendar.getInstance();
    javax.persistence.criteria.CriteriaBuilder cb = em.getCriteriaBuilder();
    javax.persistence.criteria.CriteriaQuery cq = cb.createQuery();
    javax.persistence.criteria.Root<Permessimercepath> checkPointRt = cq.from(Permessimercepath.class);
    javax.persistence.criteria.Path<Permessimerce> permessimerceClass = checkPointRt.get(Permessimercepath_.permessimerce);
    Predicate checkPointDatePredicate = cb.isNull(checkPointRt.get(Permessimercepath_.dataTransito));
    Predicate checkPointAreaPredicate = cb.equal(checkPointRt.get(Permessimercepath_.iDArea), area);
    Predicate datePredicate = cb.greaterThanOrEqualTo(permessimerceClass.get(Permessimerce_.datafine), lastDate4Search.getTime());
    Predicate isValidPredicate = cb.lt(permessimerceClass.get(Permessimerce_.statopermesso), Permessimerce.COMPLETED);
    cq.where(cb.and(checkPointAreaPredicate, checkPointDatePredicate, datePredicate, isValidPredicate));
    cq.select(cb.countDistinct(checkPointRt));
    return cq;
}

 CriteriaQuery myCriteriaQuery = createQuery4Count(getEntityManager())
 javax.persistence.Query q = getEntityManager().createQuery(myCriteriaQuery );
 Long Result = ((Long) q.getSingleResult()).intValue();

 // second query created with the same criteriaQuery 
 q = getEntityManager().createQuery(myCriteriaQuery );
 Long Result2 = ((Long) q.getSingleResult()).intValue(); 
```

生成的sql是

```
// First and correct one
SELECT COUNT(t0.ID_permesso) FROM permessimercepath t0 WHERE EXISTS (SELECT t1.ID_permesso FROM permessimerce t2, permessimercepath t1 WHERE ((((t0.ID_permesso = t1.ID_permesso) AND (t0.CheckPointIndex = t1.CheckPointIndex)) AND ((((t1.ID_Area = ?) AND (t1.DataTransito IS NULL)) AND (t2.Data_fine >= ?)) AND (t2.Stato_permesso < ?))) AND (t2.ID_permesso = t1.ID_permesso))) 
bind => [3 parameters bound]

// Second and wrong one
 SELECT COUNT(t0.ID_permesso) FROM permessimercepath t0, permessimerce t2, permessimercepath t1 WHERE (((((t1.ID_Area = ?) AND (t1.DataTransito IS NULL)) AND (t2.Data_fine >= ?)) AND (t2.Stato_permesso < ?)) AND (t2.ID_permesso = t1.ID_permesso)) 
```

如果没有人知道它为什么会发生，我可以尝试以更简单的方式重现它。

谢谢菲利波

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:44:15.073

问题似乎与`EntityManager.createQuery(CriteriaQuery)`方法有关。我检查了文档，但没有提及此方法是否修改 CriteriaQuery。通常人们希望此方法不会修改传递的参数。但是，您得到的结果表明该`EntityManager.createQuery(CriteriaQuery)`方法修改了传递的参数。

如果是这种情况，您需要在每次调用代码`getEntityManager()`之前调用 createQuery4Count() `EntityManager.createQuery(CriteriaQuery)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:43:50.567

看起来您很可能在实现中发现了错误。稍微相似（或者可以说更复杂但不同）的情况适用于 Hibernate。此外，[JPA 规范中的“](http://download.oracle.com/otn-pub/jcp/persistence-2.0-fr-eval-oth-JSpec/persistence-2_0-final-spec.pdf) *6.8 查询修改*”部分鼓励重用：`CriteriaQuery`

> CriteriaQuery 对象可以在创建并执行 TypedQuery 对象之前或之后进行修改。例如，这种修改可能需要替换 where 谓词或选择列表。因此，修改可能会导致相同的 CriteriaQuery “基础”被重新用于多个查询实例。

# mysql - 如何在 mysql ORDER BY user_id DESC AND created_date ASE 中获取记录

> ID：10648149
> 
> 赞同：0
> 
> 时间：2012-05-18T07:05:03.520
> 
> 标签：mysql

我是 Mysql 的新手，有人可以帮我吗？

我需要获取 Mysql 记录 ORDER BY User_ID DESC 和 ORDER BY Created_date ASC

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:06:09.893

`ORDER BY`接受逗号分隔的列列表。所以，简单地说`ORDER BY User_ID DESC, Created_date ASC`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:08:33.853

是的，您可以像这样运行查询`SELECT ------ ORDER BY User_ID DESC, CREATED DATE ASC`

# mysql - mysql datetime 映射到 JPA Temporal.Type TIMESTAMP。在 JSON 响应中只获取日期，没有时间

> ID：10648154
> 
> 赞同：2
> 
> 时间：2012-05-18T07:05:25.443
> 
> 标签：mysql, json, datetime, jpa, resteasy

这是场景。

我有一个带有该字段的 JPA 实体类

> `@Temporal(TemporalType.TIMESTAMP)`
> `@Column(name = "CREATED_DATE", length = 19)`
> `private Date createdDate = null;`

并且该字段映射到表中类型为`datetime`（我正在使用 mysql）的列 CREATED_DATE。
当我`select`查看表的行时，CREATED_DATE 列同时显示日期和时间。当我使用获取行数据`query.getSingleResult` 并将返回的对象类型转换为 Entity 类时，实体类的`createdDate`字段也同时具有 Date 和 Time ：

```
request = (MyEntityClass) query.getSingleResult();<br>
System.out.println(request.getCreatedDate()); 
```

`2012-05-18 06:32:57.0`在 catalina.out 日志中打印。

现在我将此实体类对象作为 Json 对象发送到特定的客户端请求。客户端收到的 Json 响应在打印时不显示日期时间，它只显示日期：

```
ClientResponse<String> response = clientRequest.get(String.class);
System.out.println("Response getResource ::"+response.getStatus()+"::"+response.getEntity()); 
```

控制台输出：
`Response getResource ::200::[{ ....... ,"createdDate":"18-05-2012", ......}]`
我在服务器端使用 RestEasy Json api。

我在 SO 中看到了类似的问题（[类似的 SO 帖子](https://stackoverflow.com/questions/6347532/jpa-entity-get-the-hours-minutes-and-sec-from-oracle-date-column)），但那里讨论的答案似乎对我不起作用。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:43:45.723

问题与对象序列化为 JSON 的方式有关。您可能以一种或另一种方式配置它（注释、默认实现、配置文件），以便以这种方式序列化日期。

# literate-programming - noweb 的块参数

> ID：10648156
> 
> 赞同：1
> 
> 时间：2012-05-18T07:05:51.253
> 
> 标签：literate-programming, noweb

在 nuweb，我可以做这样的事情

```
@d Define the chunk with argument
echo "Hello, @1"; 
```

然后我可以通过传递参数在其他块中使用它：

```
@d Second chunk
@<Define the chunk with argument@(John@)@> 
```

它将生成以下行：

```
echo "Hello, John"; 
```

我知道，在这种特殊情况下，我可以在块中使用另一种方法（变量），但是将参数传递给块对于各种代码声明非常有用，那么您需要使用几乎相同的代码位，但不完全（例如，调用具有各种名称的函数）。这是一个有用的功能。它在 nuweb 中运行良好。

现在我切换到 noweb，但我没有看到任何将参数传递给块的方法。有没有办法像在 nuweb 中那样在 noweb 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:28:11.443

为了避免这种奇怪的神秘语法，请尝试使用 NanoLP 进行文学编程（它支持命名参数、变量字典等）

# php - 无法使用 gmail smtp 从本地主机发送电子邮件？

> ID：10648167
> 
> 赞同：1
> 
> 时间：2012-05-18T07:06:31.773
> 
> 标签：php, email, cakephp, smtp, gmail

我第一次研究 cakephp 电子邮件组件。我从本地主机发送这样的电子邮件：

```
 $this->Email->smtpOptions = array(  'port'=>'465',
                                        'timeout'=>'30',
                                        'host'=>'smtp.gmail.com',
                                        'username'=>'mygmail@gmail.com',
                                        'password'=>'mygmailpassword'
                                     );

    $this->Email->delivery = 'smtp';
    $this->Email->from = "mygmail@gmail.com";
    $this->Email->to = "yourgmail@gmail.com";
    $this->Email->subject = "Subject";
    $this->Email->sendAs = 'html';
    $this->Email->lineLength = 255;
    $body = "<h1>This is body</h1>";
    $this->Email->send( $body ); 
```

它没有发送任何电子邮件，甚至没有显示任何错误。

有什么遗漏吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:13:37.493

如果我没记错的话，Gmail 的 SMTP 服务器需要 SSL。

尝试

```
$this->Email->smtpOptions = array(
    'port'=>'465', 
    'timeout'=>'30',
    'host' => 'ssl://smtp.gmail.com',
    'username'=>'your_username@gmail.com',
    'password'=>'your_gmail_password',
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:14:30.813

主机应该是：`ssl://smtp.gmail.com`

# javascript - 查找json字符串的长度

> ID：10648172
> 
> 赞同：0
> 
> 时间：2012-05-18T07:06:35.753
> 
> 标签：javascript, json

我有以下 Jsonstring

```
 var j = { "name": "John" };
            alert(j.length); 
```

它警告：未定义，我如何找到 json Array 对象的长度？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T07:14:05.193

让我们从 json 字符串开始：

```
var jsonString = '{"name":"John"}'; 
```

您可以轻松确定其长度：

```
alert("The string has "+jsonString.length+" characters"); // will alert 15 
```

然后将其解析为一个对象：

```
var jsonObject = JSON.parse(jsonString); 
```

JavaScript[不是](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)，也没有长度。如果你想知道它有多少属性，你需要计算它们：[`Object`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object) [`Array`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array)

```
var propertyNames = Object.keys(jsonObject);
alert("There are "+propertyNames.length+" properties in the object"); // will alert 1 
```

如果在您的环境（旧版浏览器等）中无法使用从 中获取（自己的）属性名称`Object.keys`的函数，则需要手动计数：`Array``Object`

```
var props = 0;
for (var key in jsonObject) {
    // if (j.hasOwnProperty(k))
    /* is only needed when your object would inherit other enumerable
       properties from a prototype object */
        props++;
}
alert("Iterated over "+props+" properties"); // will alert 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T07:21:09.957

另一种方法是使用后`JSON.stringify`一种方法，该方法将为您提供一个对象（一个字符串），您可以在该对象上使用该`length`属性：

```
var x = JSON.stringify({ "name" : "John" });

alert(x.length); 
```

[工作示例](http://jsfiddle.net/4yf5R/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T07:11:11.350

```
function getObjectSize(o) {
  var c = 0;
  for (var k in o) 
    if (o.hasOwnProperty(k)) ++c;
  return c;
}  
var j = { "name": "John" };

alert(getObjectSize(j)); // 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T07:13:27.917

javascrit 中没有 json Array 对象。`j`只是javascript中的一个对象。

如果您指的是对象具有的属性数量（不包括原型的），您可以通过以下方式计算它：

```
 var length = 0;
  for (var k in j) {
    if (j.hasOwnProperty(k)) {
      length++;
    }
  }
  alert(length); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T07:16:53.633

Jquery 中的替代方法：

```
 var myObject = {"jsonObj" : [    
        {
            "content" : [
                {"name" : "John"},
            ]
        }
        ]
       }
        $.each(myObject.jsonObj, function() {
           alert(this.content.length);
        }); 
```

[演示](http://jsfiddle.net/9D5Eu/41/)

# java - 'int kk = 2 | 是什么？3;' 意思是？

> ID：10648173
> 
> 赞同：3
> 
> 时间：2012-05-18T07:06:37.293
> 
> 标签：java, syntax, operators

用java编程有一段时间了，没遇到过奇怪的表达方式

```
int kk = 2 | 3; 
```

'|' 是什么意思 在这个表达式中是什么意思？谷歌似乎很难。

我在源码中遇到了

```
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK); 
```

为什么我们需要使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T07:08:21.130

它是[按位或](http://www.leepoint.net/notes-java/data/expressions/bitops.html)- 如果一个或两个输入在该位置设置了一个位，则将设置每个结果位。2 是二进制的 10，3 是 11，所以结果也是 3。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T07:08:22.660

是[“ `bitwise inclusive or operator`”](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T07:10:48.230

| 是[位运算符](http://www.roseindia.net/java/master-java/java-bitwise-or.shtml)。在您的情况下， 2|3 将产生 3 因为 2 是 10 而 3 是 11\. `10 | 11 = 11`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T07:54:14.460

你可以看看[http://vipan.com/htdocs/bitwisehelp.html](http://vipan.com/htdocs/bitwisehelp.html) 我认为它们是关于移位运算符的非常好的教程

# iphone - 在触发引用现在释放的 ViewController 的后台线程后，如何处理被释放的 ViewController？

> ID：10648175
> 
> 赞同：1
> 
> 时间：2012-05-18T07:06:38.920
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, sigabrt

我有一个 ViewController 被推送到 NavigationController 堆栈上。一旦它被推入堆栈，它就开始通过下载器对象下载一些图像，该对象负责在后台线程中下载图像。即使通过 WiFi 下载图像也可能需要几秒钟的时间。当图像下载完成后，下载器对象指示 ViewController 布局其图像，将新下载的图像放在分页 UIScrollView 的后面。然而，在此期间，用户可能按下了返回按钮，而 ViewController 现在可能已被释放/解除分配，因此下载器对象将导致 SIGABRT 错误消息并且应用程序将崩溃。

我应该如何处理这种情况？有什么方法可以检查释放/解除分配的实例吗？或者某种方式来捕获错误并记录，然后忽略，它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:27:57.760

您最好的选择是使用归零弱参考。当然，对于 iOS 5.0，这只是一个“弱”的参考。但是，如果您的目标是低于 iOS 5.0，那么您需要一个自定义解决方案。[Mike Ash 在本文](http://www.mikeash.com/pyblog/friday-qa-2010-07-16-zeroing-weak-references-in-objective-c.html)中有一个很好的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:54:09.863

也许您可以通过使用通知来避免这个问题？它不是您的下载器对象引用 viewController，而是发布一个通知， viewController（如果已加载）会响应该通知。

在您的数据加载对象中：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"allDataLoaded" object:nil]; 
```

在您的视图控制器 viewDidLoad 中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refreshMyLayout) name:@"allDataLoaded" object:nil]; 
```

在您的视图控制器 dealloc 中：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

您甚至可以在 viewDidUnload 中放置来自 viewController 的反向通知，告诉数据下载器取消下载（如果需要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:27:44.127

最好是在不再需要结果后取消下载。这可以防止不必要的数据流量和内存消耗。

如果你不能这样做，下载器对象应该有某种委托（可能是你的视图控制器），`nil`当你不再对结果感兴趣时（例如在你的视图控制器的`dealloc`方法中）你可以设置它。归零弱引用也是一种选择，如果你的目标是 iOS 5，但同样，取消下载会更好`NSURLConnection`。

# javascript - 使用 GET METHOD 从 javascript 传递和检索 cakephp 中的变量

> ID：10648178
> 
> 赞同：0
> 
> 时间：2012-05-18T07:06:50.680
> 
> 标签：javascript, cakephp, post, get

我知道如何在 javascript 中构造 url 参数，如果我要将它传递给 php 文件，我知道如何提取它。

但是，这里是场景，我要将变量从 javascript 传递给函数。我有 2 个文本框，我已经可以获取这些文本框的值并将其存储到 javascript 变量中：

```
var fname;
name = document.getElementById('fname');
var lname;
lname=document.getElementById('name'); 
```

现在我坚持我将如何以 cakephp post 方法能够理解它的方式构建它。与下面的代码一样，它与 php 相同吗？

```
var vars = "fname="+fname+"&lname="+lname; 
```

这是我的代码：

```
if(window.XMLHttpRequest){
            xmlVariable = new XMLHttpRequest();
        }
        else{
            xmlVariable = new ActiveXObject("Microsoft","XMLHTTP");
        }

xmlVariable.open("POST","save",true);
xmlVariable.send(vars); 
```

“save”实际上是我 cakephp 中的一个函数，我想在其中处理“fname”和“lname”变量的保存。

我需要在 cakephp 中完成。会有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:18:36.353

尝试使用**参数**或**数据**

Params 变量用于提供对有关当前请求的信息的访问。

```
public function save()
    {
        this->params['form']['lname'];
        this->params['form']['fname'];
    } 
```

**或者**

用于处理从 FormHelper 表单发送到控制器的 POST 数据。

```
 public function save()
        {
            this->data['lname'];
            this->data['fname'];
        } 
```

# vbscript - Visio 自动化：获取进程 ID

> ID：10648180
> 
> 赞同：2
> 
> 时间：2012-05-18T07:06:56.677
> 
> 标签：vbscript, automation, ole, visio

我正在使用自动化运行 Visio，但无法获取 Visio 进程的进程 ID 以检查其何时完成。这是我的VB脚本：

```
Set visio = CreateObject("Visio.InvisibleApp")
Wscript.Echo visio.ProcessID    
Set document = visio.Documents.OpenEx("somefile.vsd", &H88)
document.ExportAsFixedFormat 1, "somefile.pdf", 1, 0
visio.Quit 
```

并运行它`cscript // nologo`。

问题是`visio.ProcessID`返回的数字不是实际的 Windows 进程 ID（例如，当实际进程 ID 为 8146 时为 6613）。cscript 主机似乎在 Visio 进程退出之前完成，导致清理临时文件出现问题。

以下是 Visio 参考说明：

*   [进程ID](http://msdn.microsoft.com/en-us/library/ms426216%28v=office.12%29.aspx)
*   [退出](http://msdn.microsoft.com/en-us/library/ms196022%28v=office.12%29)

所以问题是：如何获取 Visio 进程 ID 或检测它何时正确退出？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-12T09:41:09.913

刚刚在 Visio.Application.ProcessID 的帮助中注意到这一点：

“ProcessID 返回的值与当前 Visio 实例的 Windows 进程 ID 不同。”

所以我猜这些只是为了让您可以区分多个 Visio 实例。

还有 Visio.Application.WindowHandle32 和 Visio.Application.WindowHandle，它们可能会有所帮助，尽管对于不可见的应用程序实例可能没有那么多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T22:14:52.587

看不出这个 id 对你有什么帮助。我怀疑你在 visio 中遇到错误。你试过吗

```
on error resume next 
```

并在每行可能给出错误之后

```
if err.number <> 0 then
  wscript.echo err.description
  err.clear
end if 
```

如果省略参数似乎会出现问题，因此请全部使用它们。有关值，请参见[http://msdn.microsoft.com/en-us/library/office/ms409271(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/ms409271(v=office.12).aspx)。在退出使用之前`document.saved = true`，您可以先检查结果文件是否存在。

编辑：检查进程是否正在运行，是否必须调整服务名称（检查您的 téaskmanager）

```
set service = GetObject ("winmgmts:")

for each Process in Service.InstancesOf ("Win32_Process")
  If lcase(Process.Name) = "visio.exe" then
    wscript.echo "visio still running"
    wscript.quit
  End If
next
wscript.echo "visio no longer running" 
```

EDIT2：获取活动 visio 应用程序的 processid（如果运行多个 Visio 实例，则 GetObject 返回活动实例。当程序作为加载项运行或通过双击形状时，活动实例是运行程序的那个。否则，它是最近运行的实例或被带到前面的实例。如果没有 Visio 实例正在运行，GetObject 会导致错误）cfr [http://webmail.vh.com.tw/微软/开发中%20Microsoft%20Visio%20Solutions/27.htm](http://webmail.vh.com.tw/Microsoft/Developing%20Microsoft%20Visio%20Solutions/27.htm)

```
set appObj = GetObject(, "visio.application")
if appObj Is Nothing Then
  wscript.echo "There is no active Visio."
else
  wscript.echo "ProcessID: " & appObj.ProcessID
end if 
```

# iphone - 解析Json解析的代码如何？

> ID：10648181
> 
> 赞同：0
> 
> 时间：2012-05-18T07:06:56.910
> 
> 标签：iphone, json, ios5

嗨，我已经实现了用于解析以下响应的代码，但它无法正常工作：

```
 NSString *req = [NSString stringWithFormat: @" My URL"];   
 NSDictionary *googleResponse = [[NSString stringWithContentsOfURL: [NSURL URLWithString: req] encoding: NSUTF8StringEncoding error: NULL] JSONValue];        
 NSDictionary *resultsDict = [googleResponse valueForKey:  @"eventtitle"]; 
```

解析以下响应的代码是什么？请给我解决方案。

```
{
  "AlansHarleyEvents": [
    {
      "id": "3",
      "eventtitle": "22nd Annual Pig Roast",
      "eventdate": "April 22nd 8am-5pm"
    },
    {
      "id": "4",
      "eventtitle": "Poker Run",
      "eventdate": "April 28th 8am at Shooters"
    },
    {
      "id": "5",
      "eventtitle": "Kickstands for kids",
      "eventdate": "May 12th 8am-5pm"
    },
    {
      "id": "6",
      "eventtitle": "Ride for the Cure",
      "eventdate": "May28th 8am Free Drinks!"
    },
    {
      "id": "7",
      "eventtitle": "Veterans Ride",
      "eventdate": "June 10th 9am @City Hall"
    },
    {
      "id": "8",
      "eventtitle": "Biker Beach Bash",
      "eventdate": "June 28th 8-5pm @ The Pier"
    },
    {
      "id": "10",
      "eventtitle": "22nd Annual Pig Roast",
      "eventdate": "April 22nd 8am-5pm"
    },
    {
      "id": "11",
      "eventtitle": "Poker Run",
      "eventdate": "April 28th 8am at Shooters Lounge"
    },
    {
      "id": "12",
      "eventtitle": "22nd Annual Pig Roast",
      "eventdate": "April 22nd 8am-5pm"
    },
    {
      "id": "13",
      "eventtitle": "Swamp Run",
      "eventdate": "April 22nd 8am-5pm"
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:16:01.483

NSJSONSerialization 类是仅适用于 iOS 5 及更高版本的本地类 [http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

对于任何 iPhone 操作系统版本意味着您可以使用 JSONKit： [https ://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:16:03.087

如果您`resultsDict`包含上述 JSON 响应，那么您可以将其解析为：

```
NSString *req = [NSString stringWithFormat: @" My URL"];
NSDictionary *googleResponse = [[NSString stringWithContentsOfURL: [NSURL URLWithString: req] encoding: NSUTF8StringEncoding error: NULL] JSONValue];
NSDictionary *resultsDict = [googleResponse valueForKey: @"eventtitle"];

NSMutableArray *resultArray = [resultsDict valueForKey:@"AlansHarleyEvents"]; 

for(int i = 0; i<[resultArray count]; i++)
{
    NSLog(@"%@",[[resultArray objectAtIndex:i] valueForKey:@"id"]) ;
    NSLog(@"%@",[[resultArray objectAtIndex:i] valueForKey:@"eventtitle"]) ;
    NSLog(@"%@",[[resultArray objectAtIndex:i] valueForKey:@"eventdate"]) ; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:23:02.433

Yu 可以在 IOS 5 中使用 NSJSONSerialization 对象

```
 NSDictionnary *jsonObject = [NSJSONSerialization JSONObjectWithData:resultsDict options:NSJSONReadingMutableContainers error:&error]; 
```

# javascript - 为什么这个 on() 会立即触发而不是绑定？

> ID：10648182
> 
> 赞同：1
> 
> 时间：2012-05-18T07:06:57.293
> 
> 标签：javascript, jquery

我有一些问题`.on()`以及如何使用它而不是`.bind()`在这种情况下。我在这里尝试做的是我单击一个链接，这应该绑定另一个单击事件，但它会立即触发该事件。我查看了文档/jquery.js 文件，这就是我想这样做的方式。

**演示：http:** [//jsfiddle.net/bNaFV/](http://jsfiddle.net/bNaFV/)

```
$('#click_me').on('click', function(){    
    $('#show_me').addClass('remain');

    //this is only suppose to bind that next time i click anywhere on the document it should hide
    // not right away
    $(document).on('click', 'html', function(){
      $('#show_me').hide();        
    });
});

$("#click_me").hover(
  function () {
    $('#show_me').show();
  }, 
  function () {
      if ($('#show_me').hasClass('remain')){
           return;   
      } else {
          $('#show_me').hide();   
      }
  }
);

<a href="#" id="click_me">click me</a><br /><br />

<div id="show_me"></div>​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T07:09:35.543

您需要停止事件的传播：

```
$('#click_me').on('click', function(e){    
    e.stopPropagation(); //Stop the event from bubbling further
    $('#show_me').addClass('remain');
    $(document).on('click', 'html', function(){
        $('#show_me').hide();        
    });
}); 
```

这是因为事件已在`#click_me`元素处捕获。然后，您在 DOM 树的更高位置为相同的事件类型绑定一个事件处理程序。然后事件继续冒泡到树上并到达`document`，在那里它触发新的事件处理程序。

这是一个[工作示例](http://jsfiddle.net/bNaFV/5/)。

**更新**（见评论）

正如@zerkms 在评论中指出的那样，我认为您可能只想将事件处理程序绑定`document`一次。您可以使用该[`one`](http://api.jquery.com/one/)方法来执行此操作，该方法在事件处理程序执行一次后解除绑定：

```
$(document).one('click', 'html', function(){
    $('#show_me').hide();        
}); 
```

# google-maps - 从地理坐标列表计算形状

> ID：10648187
> 
> 赞同：1
> 
> 时间：2012-05-18T07:07:39.547
> 
> 标签：google-maps, geolocation, geometry, shape, area

我有一个应用程序，它使用地理坐标（纬度/经度）在谷歌地图上显示数千个 Pin 注释。在某些情况下，我想将 Pin 注释替换为覆盖我的数千个 Pin 所覆盖的地理区域的形状。

我正在寻找一种算法，其中输入是我的 Pin 注释的地理坐标列表，输出将是地理坐标的有序列表，我将使用它在谷歌地图上创建叠加层。如果存在的话，最好的肯定是 java/objective-C 代码:-)

我在互联网上查找了与格雷厄姆凸包算法相关的文章，但它似乎不太容易使用，我不知道它是否真的适用于经纬度？

任何帮助将不胜感激。问候，

塞巴斯蒂安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:14:17.793

我相信这就是您正在寻找的：

[http://en.wikipedia.org/wiki/Gift_wrapping_algorithm](http://en.wikipedia.org/wiki/Gift_wrapping_algorithm)

# javascript - 如何更改浮动侧边栏 js 代码以使其与 ajax 分页一起使用？

> ID：10648190
> 
> 赞同：0
> 
> 时间：2012-05-18T07:07:43.933
> 
> 标签：javascript, jquery

我的网站上有一个浮动侧边栏

```
www.rayshaft.com
```

而且我也有ajax分页，所以侧边栏应该是浮动的，直到它到达页面的页脚，但问题是它只适用于第一页，当第二页通过ajax加载时，侧边栏不浮动。有人建议我更改我的 js 代码，以便每次在 ajax 页面加载后我都需要再次调用滚动函数，或者我需要重新计算 maxY 和 footTop ech 时间滚动发生。我不知道任何js编程，所以请你帮助我。如何修改此代码以获得我想要的？

```
$(window).load(function(){
$(function() {
    var top = $('#sidebar').offset().top - parseFloat($('#sidebar').css('marginTop').replace(/auto/, 0));
    var footTop = $('#footer').offset().top - parseFloat($('#footer').css('marginTop').replace(/auto/, 0));

    var maxY = footTop - $('#sidebar').outerHeight();

    $(window).scroll(function(evt) {
        var y = $(this).scrollTop();
        if (y > top) {
            if (y < maxY) {
                $('#sidebar').addClass('fixed').removeAttr('style');
            } else {
                $('#sidebar').removeClass('fixed').css({
                    position: 'absolute',
                    top: (maxY - top) + 'px'
                });
            }
        } else {
            $('#sidebar').removeClass('fixed');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:21:31.127

使滚动条的函数成为一个独立的函数，然后在 ajax 脚本完成时调用它。

```
function ScrollBar()
{
$(function() {
var top = $('#sidebar').offset().top - parseFloat($('#sidebar').css('marginTop').replace(/auto/, 0));
var footTop = $('#footer').offset().top - parseFloat($('#footer').css('marginTop').replace(/auto/, 0));

var maxY = footTop - $('#sidebar').outerHeight();

$(window).scroll(function(evt) {
    var y = $(this).scrollTop();
    if (y > top) {
        if (y < maxY) {
            $('#sidebar').addClass('fixed').removeAttr('style');
        } else {
            $('#sidebar').removeClass('fixed').css({
                position: 'absolute',
                top: (maxY - top) + 'px'
            });
        }
    } else {
        $('#sidebar').removeClass('fixed');
    }});
}
}

$(window).load(function(){
    ScrollBar();
}); 
```

现在一旦 ajax 分页完成，调用这个函数：ScrollBar() 来重新定位滚动条。

# symfony - Symfony2 表单集合

> ID：10648191
> 
> 赞同：2
> 
> 时间：2012-05-18T07:07:44.150
> 
> 标签：symfony

我有这个实体（Registro）：

```
<?php

namespace Gitek\RegistroBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Gitek\RegistroBundle\Entity\Registro
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Gitek\RegistroBundle\Entity\RegistroRepository"))
 */
class Registro
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var datetime $fecha
     *
     * @ORM\Column(name="fecha", type="datetime")
     */
    private $fecha;

    /**
     * @var smallint $comenzado
     *
     * @ORM\Column(name="comenzado", type="smallint", nullable=true)
     */
    private $comenzado;

    /**
     * @var smallint $completado
     *
     * @ORM\Column(name="completado", type="smallint", nullable=true)
     */
    private $completado;

   /**
     * @var datetime $created_at
     *
     * @ORM\Column(name="created_at", type="datetime")
     */
    private $created_at;

    /**
     * @var datetime $updated_at
     *
     * @ORM\Column(name="updated_at", type="datetime")
     */
    private $updated_at;

    /** @ORM\ManyToOne(targetEntity="Gitek\UsuarioBundle\Entity\Usuario") */
    protected $usuario;

    /** @ORM\ManyToOne(targetEntity="Gitek\HotelBundle\Entity\Tipotarea") */
    protected $tipotarea;

    /** @ORM\ManyToOne(targetEntity="Gitek\HotelBundle\Entity\Habitacion") */
    protected $habitacion;

    /** @ORM\ManyToOne(targetEntity="Gitek\RegistroBundle\Entity\Master") */
    protected $master;

    /**
     * @ORM\ManyToMany(targetEntity="Gitek\HotelBundle\Entity\Incidencia", inversedBy="registros")
     * @ORM\JoinTable(name="incidencia_registro",
     *      joinColumns={@ORM\JoinColumn(name="registro_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="incidencia_id", referencedColumnName="id")}
     * )
     */
    protected $incidencias;

    public function __construct()
    {
        $this->created_at = new \DateTime();
        $this->updated_at = new \DateTime();
    }

    // public function __toString()
    // {
    //     return $this->getNombre();
    // }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set fecha
     *
     * @param datetime $fecha
     */
    public function setFecha($fecha)
    {
        $this->fecha = $fecha;
    }

    /**
     * Get fecha
     *
     * @return datetime 
     */
    public function getFecha()
    {
        return $this->fecha;
    }

    /**
     * Set comenzado
     *
     * @param smallint $comenzado
     */
    public function setComenzado($comenzado)
    {
        $this->comenzado = $comenzado;
    }

    /**
     * Get comenzado
     *
     * @return smallint 
     */
    public function getComenzado()
    {
        return $this->comenzado;
    }

    /**
     * Set completado
     *
     * @param smallint $completado
     */
    public function setCompletado($completado)
    {
        $this->completado = $completado;
    }

    /**
     * Get completado
     *
     * @return smallint 
     */
    public function getCompletado()
    {
        return $this->completado;
    }

    /**
     * Set created_at
     *
     * @param datetime $createdAt
     */
    public function setCreatedAt($createdAt)
    {
        $this->created_at = $createdAt;
    }

    /**
     * Get created_at
     *
     * @return datetime 
     */
    public function getCreatedAt()
    {
        return $this->created_at;
    }

    /**
     * Set updated_at
     *
     * @param datetime $updatedAt
     */
    public function setUpdatedAt($updatedAt)
    {
        $this->updated_at = $updatedAt;
    }

    /**
     * Get updated_at
     *
     * @return datetime 
     */
    public function getUpdatedAt()
    {
        return $this->updated_at;
    }

    /**
     * Set usuario
     *
     * @param Gitek\UsuarioBundle\Entity\Usuario $usuario
     */
    public function setUsuario(\Gitek\UsuarioBundle\Entity\Usuario $usuario)
    {
        $this->usuario = $usuario;
    }

    /**
     * Get usuario
     *
     * @return Gitek\UsuarioBundle\Entity\Usuario 
     */
    public function getUsuario()
    {
        return $this->usuario;
    }

    /**
     * Set tipotarea
     *
     * @param Gitek\HotelBundle\Entity\Tipotarea $tipotarea
     */
    public function setTipotarea(\Gitek\HotelBundle\Entity\Tipotarea $tipotarea)
    {
        $this->tipotarea = $tipotarea;
    }

    /**
     * Get tipotarea
     *
     * @return Gitek\HotelBundle\Entity\Tipotarea 
     */
    public function getTipotarea()
    {
        return $this->tipotarea;
    }

    /**
     * Set habitacion
     *
     * @param Gitek\HotelBundle\Entity\Habitacion $habitacion
     */
    public function setHabitacion(\Gitek\HotelBundle\Entity\Habitacion $habitacion)
    {
        $this->habitacion = $habitacion;
    }

    /**
     * Get habitacion
     *
     * @return Gitek\HotelBundle\Entity\Habitacion 
     */
    public function getHabitacion()
    {
        return $this->habitacion;
    }

    /**
     * Add incidencias
     *
     * @param Gitek\HotelBundle\Entity\Incidencia $incidencias
     */
    public function addIncidencia(\Gitek\HotelBundle\Entity\Incidencia $incidencias)
    {
        $this->incidencias[] = $incidencias;
    }

    /**
     * Get incidencias
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getIncidencias()
    {
        return $this->incidencias;
    }
} 
```

我想在一行中保存多个数据，所以我创建了一个只有这样一个数组属性的新实体（主）：

```
<?php

namespace Gitek\RegistroBundle\Entity;
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;

class Master
{

    /** @ORM\OneToMany(targetEntity="Gitek\HotelBundle\Entity\Habitacion", mappedBy="master") */
    protected $registros;

    public function __construct()
    {
        $this->registros = new ArrayCollection();
    }

    public function getRegistros()
    {
        return $this->registros;
    }

    public function setRegistros(ArrayCollection $registros)
    {
        $this->registros = $registros;
    }
} 
```

我这样创建了我的 MasterType：

```
<?php

namespace Gitek\RegistroBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Doctrine\ORM\EntityRepository;

class MasterType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {

        $builder
        ->add('registros', 'collection', array(
                'type' => new RegistroType(),
                'allow_add' => true,
                'by_reference' => true,
            ));
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Gitek\RegistroBundle\Entity\Master'
        );
    }

    public function getName()
    {
        return 'master';
    }
} 
```

这是我的控制器：

```
public function asignarAction()
{
    $master = new Master();
    $request = $this->getRequest();
    $form   = $this->createForm(new MasterType(), $master);

    if ('POST' === $request->getMethod()) {
        $form->bindRequest($request);

        if ($form->isValid()) {

            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($master);
            $em->flush();

            return $this->redirect($this->generateUrl('recepcion_asignar'));
        }else {
            print_r("ezez");
            print_r($form->getErrors());
        }
    } else {

    }
    return $this->render('RegistroBundle:Recepcion:asignar.html.twig', array(
        'registro'  => $master,
        'form'      => $form->createView()
    ));
} 
```

表单工作正常，我看到数据已正确提交，但没有持久化，我一直收到此错误：

```
Class Gitek\RegistroBundle\Entity\Master is not a valid entity or mapped super class. 
```

我认为问题出在 de Master 实体内。

任何帮助或线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:01:12.747

您错过了 Master 类上的 @Entity 注释，您还需要数据库上的主表才能正常工作。

如果不想创建master表，那么可以跳过@Entity注解，但是不能persist master。相反，您必须遍历集合并仅保留数组中的实体。

# javascript - 如何使用 perl 或 javascript 解析行业基础类 (IFC) 文件？

> ID：10648192
> 
> 赞同：3
> 
> 时间：2012-05-18T07:07:46.670
> 
> 标签：javascript, perl, step, ifc

我已经看到使用 JAVA 进行解析，但我需要使用 javascript 或 perl 解析相同的 IFC 扩展文件，这些文件由面向对象的框架和实体表示的块组成。一个基本的想法会很有帮助。

> ***示例 IFC 文件：***

```
ISO-10303-21;
HEADER;
FILE_DESCRIPTION(('ViewDefinition [CoordinationView]'),'2;1');

FILE_NAME(
/* name */ 'C:\\sample.ifc',
/* time_stamp */ '2012-05-18T13:15:15',
/* authorization */ 'None');

FILE_SCHEMA (('IFC2X3'));
ENDSEC;

DATA;

#1= IFCAPPLICATION(#2,'0.5.29.0','ssiRhinoIFC - Geometry Gym Plug-in for Rhino3d','ssiRhinoIFC');
#2= IFCORGANIZATION($,'Geometry Gym Pty Ltd',$,$,$);
#3= IFCPERSONANDORGANIZATION(#4,#5,$);
#4= IFCPERSON($,'Jon',$,$,$,$,$,$);
#5= IFCORGANIZATION($,'UNKNOWN',$,$,$);
#6= IFCOWNERHISTORY(#3,#1,$,.ADDED.,1337346830,$,$,1337346830);
#7= IFCCARTESIANPOINT((0.0,0.0,0.0));
#8= IFCDIRECTION((1.0,0.0,0.0));

ENDSEC;

END-ISO-10303-21; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:19:52.287

正在使用哪种文件格式？如果是 IFC-XML，您可以考虑使用 Perl-XML 模块。

[http://perl-xml.sourceforge.net/faq/](http://perl-xml.sourceforge.net/faq/)

# sql - 给定日期如何使用经典 asp 获取该月的第一个和最后一个日期

> ID：10648198
> 
> 赞同：3
> 
> 时间：2012-05-18T07:08:17.723
> 
> 标签：sql, asp-classic, vbscript, sql-server-2000, recordset

我在数据库中有一个日期字段，它以 mm/dd/yyy 格式存储值。使用它如何获取给定日期的第一天和最后一天。我正在使用以下代码显示数据库中的记录

```
<%
sql="select * from order_details where emp_name='"&session("emp")&"' order by 1,2,3,4,5,6,7"
        rs.open sql,con,1,2
        do while not rs.eof
        session("wk")=weekdayname(weekday((rs("date"))))
    %>
<tr>

    <td align="center"><%=rs("emp_name")%></td>
    <td align="center"><%=rs("food_had")%></td>
    <td align="center"><%=rs("quantity")%></td>
    <td align="center"><%=session("wk")%></td>
    <td align="center"><%=day(rs("date"))&"/"&month(rs("date"))&"/"&year(rs("date"))%></td>
    <td align="center"><%=rs("grand_total")%></td>

</tr>
<%
        rs.movenext
        loop
        rs.close
%> 
```

session("wk") 给了我工作日的名称。

现在我有了代码，我编辑了查询，这样我就可以使用 firstdayofthemonth 和 lastdatofthemonth 来显示记录，但它不起作用这是我使用的

```
<%
sql="select * from order_details where emp_name='"&session("emp")&"' and date BETWEEN '"&session("firstDayOfMonth")&"' AND '"&session("firstDayOfMonth")&"'"
        rs.open sql,con,1,2
        do while not rs.eof
        session("m")=monthname(month((rs("date"))))
        session("firstDayOfMonth") = rs("date") + 1 - day(rs("date"))
        session("lastDayOfMonth") = dateadd("m", 1, session("firstDayOfMonth") ) - 1
    %>   
<tr>   

    <td align="center"><%=rs("emp_name")%></td>   
    <td align="center"><%=rs("food_had")%></td>   
    <td align="center"><%=rs("quantity")%></td>   
    <td align="center"><%=session("wk")%></td>   
    <td align="center"><%=day(rs("date"))&"/"&month(rs("date"))&"/"&year(rs("date"))%></td>   
    <td align="center"><%=rs("grand_total")%></td> 
    <td align="center"><%=session("firstDayOfMonth")%></td>   
    <td align="center"><%=session("lastDayOfMonth")%></td> 

</tr>
<%
        rs.movenext
        loop
        rs.close
    %> 
```

如果我从查询中删除**"and date BETWEEN '"&session("firstDayOfMonth")&"' AND '"&session("firstDayOfMonth")&"'"**会显示第一个和最后一个日期...但我想显示记录使用 firstdate 和 lastdate ...我是否在顶部的查询中遗漏了某些内容..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:25:10.987

您可以通过从 rs("date") 变量中减去天数来轻松计算 firstDayOfMonth。

然后，要获得该月的最后一天，请使用 dateadd() 函数添加 1 个月，然后减去一天：

```
 firstDayOfMonth = rs("date") + 1 - day(rs("date"))
        lastDayOfMonth = dateadd("m", 1, firstDayOfMonth ) - 1 
```

我已在您的代码中进行了设置，例如：

```
<%   
sql="select * from order_details where emp_name='"&session("emp")&"' order by 1,2,3,4,5,6,7"   
        rs.open sql,con,1,2   
        do while not rs.eof   
        session("wk")=weekdayname(weekday((rs("date"))))   
        firstDayOfMonth = rs("date") + 1 - day(rs("date"))
        lastDayOfMonth = dateadd("m", 1, firstDayOfMonth ) - 1
    %>   
<tr>   

    <td align="center"><%=rs("emp_name")%></td>   
    <td align="center"><%=rs("food_had")%></td>   
    <td align="center"><%=rs("quantity")%></td>   
    <td align="center"><%=session("wk")%></td>   
    <td align="center"><%=day(rs("date"))&"/"&month(rs("date"))&"/"&year(rs("date"))%></td>   
    <td align="center"><%=rs("grand_total")%></td> 
    <td align="center"><%=fdate(firstDayOfMonth) ></td>   
    <td align="center"><%=fdate(lastDayOfMonth) ></td> 

</tr>   
<%   
        rs.movenext   
        loop   
        rs.close   
%> 
```

**编辑：** 如果要过滤当前月份的数据，可以更改 sql 语句以添加`WHERE date >= firstDayOfMonth AND date <= lastDayOfMonth`如下子句：

```
 sql="select * from order_details where emp_name='" & session("emp") & "' " & _ 
     "WHERE date >= DATEADD(DAY, 0, DATEDIFF(DAY, 0, GETDATE())) + 1 - DAY(DATEADD(DAY, 0, DATEDIFF(DAY, 0, GETDATE()))) " &_
     "AND date <= DATEADD(MONTH, 1, DATEADD(DAY, 0, DATEDIFF(DAY, 0, GETDATE())) + 1 - DAY(DATEADD(DAY, 0, DATEDIFF(DAY, 0, GETDATE())))) - 1 " &_
     "order by 1,2,3,4,5,6,7" 
```

（我敢肯定有人可以重写那个查询，以免一团糟）

# pthreads - 需要互斥锁来保护条件变量

> ID：10648204
> 
> 赞同：3
> 
> 时间：2012-05-18T07:08:57.730
> 
> 标签：pthreads, mutex, condition-variable

据说需要互斥锁来保护条件变量。

这里是对声明为`pthread_cond_t`
OR的实际条件变量的引用
一个正常的共享变量`count`，其值决定信号和等待。
?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T17:52:10.483

> 这里是对声明为 pthread_cond_t 的实际条件变量的引用还是一个正常的共享变量计数，其值决定信号和等待？

两者皆有参考。

互斥锁使得`count`可以检查共享变量（在您的问题中），并且如果该变量的值不满足所需条件，则内部执行的等待`pthread_cond_wait()`将相对于该检查以原子方式发生。

互斥锁解决的问题是您有两个需要原子的独立操作：

1.  检查条件`count`
2.  `pthread_cond_wait()`如果条件尚未满足，请在里面等待。

A`pthread_cond_signal()`不会“持续” - 如果没有线程在等待`pthread_cond_t`对象，则信号什么也不做。因此，如果没有互斥体使上面列出的两个操作彼此原子化，您可能会发现自己处于以下情况：

*   线程 A 想要做某事一次`count`非零
*   线程 B 将在其递增时发出信号`count`（将设置`count`为非零值）

    1.  线程“A”检查`count`并发现它为零
    2.  在“A”开始调用之前`pthread_cond_wait()`，线程“B”出现并递增`count`到 1 并调用`pthread_cond_signal()`。该调用实际上没有任何影响，因为“A”还没有等待`pthread_cond_t`对象。
    3.  "A" 调用`pthread_cond_wait()`，但由于不记住条件变量信号，它会在此时阻塞并等待已经到来和消失的信号。

互斥锁（只要所有线程都遵循规则）使得项目#2 不会出现在项目 1 和项目 3 之间。线程“B”有机会增加的唯一方法`count`是在 A 查看之前`count`或之后“A”已经在等待信号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T07:12:54.920

条件变量必须始终与互斥体相关联，以避免线程准备等待条件变量而另一个线程在第一个线程实际等待它之前发出条件信号的竞争条件。

更多信息[在这里](http://sourceware.org/pthreads-win32/manual/pthread_cond_init.html)

一些样本：

线程 1（等待条件）

```
pthread_mutex_lock(cond_mutex);
while(i<5)
{
 pthread_cond_wait(cond, cond_mutex);
}
pthread_mutex_unlock(cond_mutex); 
```

线程 2（表示条件）

```
pthread_mutex_lock(cond_mutex);
 i++;
if(i>=5)
{
  pthread_cond_signal(cond);
}
pthread_mutex_unlock(cond_mutex); 
```

正如您在上面所看到的，互斥锁保护了变量“i”，这是导致该条件的原因。当我们看到条件不满足时，我们进入条件等待，这会隐式释放互斥锁，从而允许执行信号的线程获取互斥锁并在“i”上工作并避免竞争条件。

现在，根据您的问题，如果信号线程首先发出信号，它应该在这样做之前获取互斥锁，否则第一个线程可能只是检查条件并看到它没有被满足，并且可能会等待条件等待，因为第二个线程已经发出信号，之后没有人会发出信号，第一个线程将永远等待。所以，从这个意义上说，互斥锁同时适用于条件和条件变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-25T14:53:40.070

根据 pthreads 文档，互斥锁未分离的原因是通过组合它们可以显着提高性能，并且他们希望由于常见的竞争条件，如果您不使用互斥锁，无论如何它几乎总是会完成。

[https://linux.die.net/man/3/pthread_cond_wait](https://linux.die.net/man/3/pthread_cond_wait) ​</p>

> # 互斥锁和条件变量的特点
> 
> 有人建议将互斥锁的获取和释放与条件等待分离。这被拒绝了，因为实际上是操作的组合性质促进了实时实施。这些实现可以以对调用者透明的方式在条件变量和互斥锁之间自动移动高优先级线程。这可以防止额外的上下文切换，并在等待线程发出信号时提供对互斥锁的更具确定性的获取。因此，调度规则可以直接处理公平性和优先级问题。此外，当前条件等待操作符合现有实践。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T14:38:53.133

我认为更好的用例可能有助于更好地解释条件变量及其关联的互斥锁。

我使用 posix 条件变量来实现所谓的[Barrier Sync](http://en.wikipedia.org/wiki/Barrier_%28computer_science%29)。基本上，我在一个应用程序中使用它，我有 15 个（数据平面）线程都做同样的事情，我希望它们都等到所有数据平面完成初始化。一旦他们都完成了他们的（内部）数据平面初始化，他们就可以开始处理数据了。

这是代码。请注意，我从 Boost 复制了算法，因为我不能在这个特定的应用程序中使用模板：

```
void LinuxPlatformManager::barrierSync()
{
  // Algorithm taken from boost::barrier

  // In the class constructor, the variables are initialized as follows:
  //   barrierGeneration_ = 0;
  //   barrierCounter_ = numCores_; // numCores_ is 15
  //   barrierThreshold_ = numCores_;

  // Locking the mutex here synchronizes all condVar logic manipulation
  // from this point until the point where either pthread_cond_wait() or 
  // pthread_cond_broadcast() is called below
  pthread_mutex_lock(&barrierMutex_);

  int gen = barrierGeneration_;

  if(--barrierCounter_ == 0)
  {
    // The last thread to call barrierSync() enters here,
    // meaning they have all called barrierSync()
    barrierGeneration_++;
    barrierCounter_ = barrierThreshold_;

    // broadcast is the same as signal, but it signals ALL waiting threads
    pthread_cond_broadcast(&barrierCond_);
  }

  while(gen == barrierGeneration_)
  {
    // All but the last thread to call this method enter here
    // This call is blocking, not on the mutex, but on the condVar
    // this call actually releases the mutex
    pthread_cond_wait(&barrierCond_, &barrierMutex_);
  }

  pthread_mutex_unlock(&barrierMutex_);
} 
```

请注意，进入该`barrierSync()`方法的每个线程都会锁定互斥体，这使得互斥体锁定和对任一`pthread_cond_wait()`或原子的调用之间的所有内容都变为`pthread_mutex_unlock()`原子。另请注意，如此处所述，互斥锁[已](http://linux.die.net/man/3/pthread_cond_wait)释放/***解锁***。在此链接中，它还提到如果您在没有先锁定互斥锁的情况下调用，则行为*未定义。*`pthread_cond_wait()`*`pthread_cond_wait()`*

 *如果`pthread_cond_wait()`没有释放互斥锁，那么所有线程都会`pthread_mutex_lock()`在方法开始时阻塞调用 to `barrierSync()`，并且不可能以`barrierCounter_`原子方式（也不以线程安全的方式）减少变量（也不操作相关的变量）来知道调用了多少线程`barrierSync()`

所以总而言之，与条件变量关联的互斥锁*不是*用于保护条件变量本身，而是用于使与条件（`barrierCounter_`等）关联的逻辑具有原子性和线程安全性。当线程阻塞等待条件变为真时，它们实际上是阻塞在条件变量上，***而不是***在关联的互斥体上。并且调用`pthread_cond_broadcast/signal()`将取消阻止它们。

[这](http://linux.die.net/man/3/pthread_cond_broadcast)是另一个相关的资源`pthread_cond_broadcast()`并`pthread_cond_signal()`提供额外的参考。*

# ios - 区域监控iOS中的区域形状

> ID：10648208
> 
> 赞同：1
> 
> 时间：2012-05-18T07:09:20.017
> 
> 标签：ios, geolocation, cllocationmanager

是否可以`startRegionMonitoring`用于多边形区域。这个方法的输入是一个`CLRegion`并且`CLRegion`只有一个初始化方法来定义一个圆形区域`initCircularRegionWithCenter`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:37:04.600

CLRegion 只能定义为一个圆。所以不可能atm。

# java - 加密和解密pdf文件android的方法

> ID：10648210
> 
> 赞同：1
> 
> 时间：2012-05-18T07:09:25.543
> 
> 标签：java, android, encryption

您好，我正在搜索免费的 api 或一些简单的代码来加密和解密 pdf 文件。从流中下载文件时应进行加密：

```
 while ((bufferLength = inputStream.read(buffer)) > 0) {

                /*
                 * Writes bufferLength characters starting at 0 in buffer to the target
                 * 
                 * buffer the non-null character array to write. 0 the index
                 * of the first character in buffer to write. bufferLength the maximum
                 * number of characters to write.
                 */
                fileOutput.write(buffer, 0, bufferLength);

            } 
```

并在需要用pdf阅读器打开时解密。也许有一些信息、代码或免费 Api ？有人做过这样的事情吗？

我发现自己有一些代码和 api。不过暂时没什么好说的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:15:59.930

您可以使用 CipherOutputStream 和 CipherInputStream 进行这样的尝试：

```
byte[] buf = new byte[1024]; 
```

加密：

```
public void encrypt(InputStream in, OutputStream out) {
    try {
        // Bytes written to out will be encrypted
        out = new CipherOutputStream(out, ecipher);

        // Read in the cleartext bytes and write to out to encrypt
        int numRead = 0;
        while ((numRead = in.read(buf)) >= 0) {
            out.write(buf, 0, numRead);
        }
        out.close();
    } catch (java.io.IOException e) {
    }
} 
```

解密：

```
public void decrypt(InputStream in, OutputStream out) {
    try {
        // Bytes read from in will be decrypted
        in = new CipherInputStream(in, dcipher);

        // Read in the decrypted bytes and write the cleartext to out
        int numRead = 0;
        while ((numRead = in.read(buf)) >= 0) {
            out.write(buf, 0, numRead);
        }
        out.close();
    } catch (java.io.IOException e) {
    }
} 
```

# windows-phone-7 - Windows Phone 7 页面导航和数据检索

> ID：10648213
> 
> 赞同：0
> 
> 时间：2012-05-18T07:09:44.237
> 
> 标签：windows-phone-7

我对此很陌生，不确定代码应该是什么样子。我想做以下事情：

我想编写一个应用程序，该应用程序将导航到 Windows Phone 设备的“设置页面”，然后“读取”/检索“主题页面”下显示的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:12:26.587

我尝试使用 MSDN 站点来做同样的事情，但发现它有点缺乏。

基本上，您要使用的是 IsolatedStorageSettings 对象。它本质上是一个可以在任何页面中访问的字典。

这是我发现最有用的博客（它有简单的例子，没有多余的东西）：

[http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/](http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/)

# java - 如何使用 tomcat 5.5 上传 excel 文件？

> ID：10648218
> 
> 赞同：0
> 
> 时间：2012-05-18T07:10:14.337
> 
> 标签：java, jsp, tomcat, servlets, file-upload

如何将文件更新到 tomcat 5.5。

我尝试使用以下代码，但代码无法使用 tomcat5.5 运行并显示

```
Tomcat version 5.5 only supports J2EE 1.2, 1.3, and 1.4 Web module 
```

代码是：

```
package org.slingemp.fileupload;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.slingemp.bean.setNotification;
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Iterator;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.io.FilenameUtils;

import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFCell;

import java.io.FileInputStream;
import java.io.IOException;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.ArrayList;
import java.util.Map;

/**
 * Servlet implementation class Fileupload
 */
@WebServlet("/Fileupload")
public class Fileupload extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public Fileupload() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
          System.out.println("file upload started....");
        // TODO Auto-generated method stub
        List fileItemsList = null;
        float filesize = 0;
        String _fileLink;
        String _fileName = null;
        String _uploadDir = getServletContext().getRealPath("/accesscarddata/");
        System.out.println("_uploadDir :"+_uploadDir);
        // Change upload with your directory
        HttpSession session = request.getSession(true);
        try {
            if (ServletFileUpload.isMultipartContent(request)) {
                ServletFileUpload servletFileUpload = new ServletFileUpload(
                        new DiskFileItemFactory());
                try {
                    fileItemsList = servletFileUpload.parseRequest(request);
                } catch (FileUploadException ex) {
                    Logger.getLogger(Fileupload.class.getName()).log(Level.SEVERE, null, ex);
                    // Change above line replace FileUploadExample with your
                    // file name
                }
                String optionalFileName = "";
                FileItem fileItem = null;

                Iterator it = fileItemsList.iterator();
                while (it.hasNext()) {
                    FileItem fileItemTemp = (FileItem) it.next();
                    if (fileItemTemp.isFormField()) {
                        if (fileItemTemp.getFieldName().equals("filename")) {
                            optionalFileName = fileItemTemp.getString();
                            System.out.println("optionalFileName : "+optionalFileName);
                        }
                        /*
                         * If you want to pass some other data from JSP page.
                         * You can access then in this way. For each field you
                         * have do create if like below. if
                         * (fileItemTemp.getFieldName
                         * ().equals("Name of other field like:Firstname")) {
                         * String Firstname = fileItemTemp.getString(); }
                         */
                    } else {
                        fileItem = fileItemTemp;
                    }
                }
                if (fileItem != null) {
                    long size_long = fileItem.getSize();
                    filesize = size_long / 1024;
                    filesize = filesize / 1000;
                    // If you want to limit the file size. Here 30MB file size
                    // is allowed you can change it
                    //if (filesize > 30.0) {
                        // Pass error message in session.
                        //setNotification _sN = new setNotification();
                        //_sN.setError("File size can't be more than 30MB");
                        //session.setAttribute("error", _sN);
                    //} else {
                        _fileName = fileItem.getName();
                        if (fileItem.getSize() > 0) {
                            if (optionalFileName.trim().equals("")) {
                                _fileName = FilenameUtils.getName(_fileName);
                            } else {
                                _fileName = optionalFileName;
                            }
                                _fileLink = "../accesscarddata/" + _fileName;
                            try {
                                File file = new File(new File(_uploadDir + "/"),fileItem.getName());
                                fileItem.write(file);
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                            setNotification _sN = new setNotification();
                            _sN.setError("File Uploaded to : " + _fileLink + "");
                            session.setAttribute("accesscardDatafileNname", _fileName);
                            session.setAttribute("error", _sN);

                        }
                    //}
                }
                //SELECT * FROM leave_application WHERE from_date >= '2004-01-01' AND to_date <'2004-01-30' and emp_id=128
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally{

        }
        System.out.println("before calling readFile");
        readFile(request,response);
        System.out.println("after calling readFile");

        response.sendRedirect("index.jsp");

    }
    protected void readFile(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {
        System.out.println("readFile is called..");
        Map employeeMap = null;

        String fileName = "",employeeAttendanceFilePath="";
        String _uploadDir = getServletContext().getRealPath("/accesscarddata/");
        HttpSession session = request.getSession(true);
        if(session.getAttribute("accesscardDatafileNname") != null)
            fileName = (String) session.getAttribute("accesscardDatafileNname");

        employeeAttendanceFilePath = _uploadDir+fileName;
        System.out.println("File Path : "+employeeAttendanceFilePath);
        List sheetData = new ArrayList();
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(employeeAttendanceFilePath);
            // Create an excel workbook from the file system.
            HSSFWorkbook workbook = new HSSFWorkbook(fis);
            HSSFSheet sheet = workbook.getSheetAt(0);// gets the first sheet on workbook
            Iterator rows = sheet.rowIterator();
            while (rows.hasNext()) {
                HSSFRow row = (HSSFRow) rows.next();
                Iterator cells = row.cellIterator();
                //count=count+1;
                List data = new ArrayList();
                while (cells.hasNext()) {
                    HSSFCell cell = (HSSFCell) cells.next();
                    data.add(cell);
                }
                sheetData.add(data);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fis != null) {
                fis.close();
            }
        }
        session.setAttribute("sheetData", sheetData);
        processEmployeeAttendance(request,response);
        System.out.println("employeeMap : "+employeeMap);

        if(session.getAttribute("employeeMap")!=null)
            employeeMap = (LinkedHashMap) session.getAttribute("sheetData");

        Iterator<Map.Entry> entries = employeeMap.entrySet().iterator();
        while (entries.hasNext()) {
            Map.Entry entry = entries.next();
            System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());
        }
    }
    protected void processEmployeeAttendance(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {

        System.out.println("processEmployeeAttendance is called...");
        String tempEmpid="",strdepartment="";
        int j=1;
        List sheetData =null;
        HttpSession session = request.getSession(true);
        if(session.getAttribute("sheetData")!=null)
            sheetData = (ArrayList) session.getAttribute("sheetData");

        Map employeeMap = new LinkedHashMap();
        Map tempEmployeeMap = new LinkedHashMap();

        for (int i = 0; i < sheetData.size(); i++) {
            List list = (List) sheetData.get(i);
                HSSFCell employeeid = (HSSFCell) list.get(0);
                HSSFCell department = (HSSFCell) list.get(3);
                HSSFCell date = (HSSFCell) list.get(5);

                strdepartment = department.getRichStringCellValue().getString();
               if(!tempEmpid.equals("")){
                       if(tempEmpid.equals(employeeid.getRichStringCellValue().getString()) && !(employeeid.getRichStringCellValue().getString().equals("EmpID") || date.getRichStringCellValue().getString().equals("Date") || department.getRichStringCellValue().getString().equals("Department"))){
                           if(!(strdepartment.equals("Temporary Card") || strdepartment.equals("Contractor"))){
                               employeeMap.put(employeeid.getRichStringCellValue().getString()+"_"+j,date.getRichStringCellValue().getString());
                            //      System.out.println("j value : "+j+":"+employeeid.getRichStringCellValue().getString()+"_"+j+","+date.getRichStringCellValue().getString());
                                    j++;
                            }
                       }else{
                            tempEmpid =  employeeid.getRichStringCellValue().getString();
                            j=0;
                       }
               }else{
                   tempEmpid =  employeeid.getRichStringCellValue().getString();
               }
              // System.out.println("");
        }
        session.setAttribute("employeeMap", employeeMap);
    }
} 
```

当我在 tomcat 7 中运行此代码时，它在上传文件时显示此错误：

```
java.io.FileNotFoundException: D:\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\Fileupload\accesscarddata\C:\Users\anthony.savarimut\Desktop\Map Iterate\SampleData.xls (The filename, directory name, or volume label syntax is incorrect) 
```

请保存我的表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:24:24.347

您正在工作区中运行 tomcat。请将位置更改为安装 tomcat 的位置。我假设您正在使用 eclipse 运行，单击服务器并设置位置。

# ruby-on-rails-3 - gemspec有什么问题？

> ID：10648223
> 
> 赞同：5
> 
> 时间：2012-05-18T07:10:33.383
> 
> 标签：ruby-on-rails-3

我几乎做了[这条指令](http://rubyonrails.org/download)告诉我要做的所有事情，但我遇到了一系列错误。这是日志：

```
stanley@ubuntu:~$ mkdir railstest
stanley@ubuntu:~$ rails new railstest
Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mail-2.4.4.gemspec]: invalid date format in specification: "2012-03-14 00:00:00.000000000Z"
       exist  
      create  README.rdoc
      create  Rakefile
      create  config.ru
      create  .gitignore
      create  Gemfile
      create  app
      create  app/assets/images/rails.png
      create  app/assets/javascripts/application.js
      create  app/assets/stylesheets/application.css
      create  app/controllers/application_controller.rb
      create  app/helpers/application_helper.rb
      create  app/mailers
      create  app/models
      create  app/views/layouts/application.html.erb
      create  app/mailers/.gitkeep
      create  app/models/.gitkeep
      create  config
      create  config/routes.rb
      create  config/application.rb
      create  config/environment.rb
      create  config/environments
      create  config/environments/development.rb
      create  config/environments/production.rb
      create  config/environments/test.rb
      create  config/initializers
      create  config/initializers/backtrace_silencers.rb
      create  config/initializers/inflections.rb
      create  config/initializers/mime_types.rb
      create  config/initializers/secret_token.rb
      create  config/initializers/session_store.rb
      create  config/initializers/wrap_parameters.rb
      create  config/locales
      create  config/locales/en.yml
      create  config/boot.rb
      create  config/database.yml
      create  db
      create  db/seeds.rb
      create  doc
      create  doc/README_FOR_APP
      create  lib
      create  lib/tasks
      create  lib/tasks/.gitkeep
      create  lib/assets
      create  lib/assets/.gitkeep
      create  log
      create  log/.gitkeep
      create  public
      create  public/404.html
      create  public/422.html
      create  public/500.html
      create  public/favicon.ico
      create  public/index.html
      create  public/robots.txt
      create  script
      create  script/rails
      create  test/fixtures
      create  test/fixtures/.gitkeep
      create  test/functional
      create  test/functional/.gitkeep
      create  test/integration
      create  test/integration/.gitkeep
      create  test/unit
      create  test/unit/.gitkeep
      create  test/performance/browsing_test.rb
      create  test/test_helper.rb
      create  tmp/cache
      create  tmp/cache/assets
      create  vendor/assets/javascripts
      create  vendor/assets/javascripts/.gitkeep
      create  vendor/assets/stylesheets
      create  vendor/assets/stylesheets/.gitkeep
      create  vendor/plugins
      create  vendor/plugins/.gitkeep
         run  bundle install
Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mail-2.4.4.gemspec]: invalid date format in specification: "2012-03-14 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mail-2.4.4.gemspec]: invalid date format in specification: "2012-03-14 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mail-2.4.4.gemspec]: invalid date format in specification: "2012-03-14 00:00:00.000000000Z"
Enter your password to install the bundled RubyGems to your system: 
Fetching gem metadata from https://rubygems.org/.........
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.3.5) 
Using activesupport (3.2.3) 
Using builder (3.0.0) 
Using activemodel (3.2.3) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Installing tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.3) 
Installing mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Installing mail (2.4.4) 
Using actionmailer (3.2.3) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.3) 
Using activeresource (3.2.3) 
Using bundler (1.1.3) 
Installing coffee-script-source (1.3.3) 
Installing execjs (1.3.2) 
Installing coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.3) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.3) 
Installing coffee-rails (3.2.2) 
Installing jquery-rails (2.0.2) 
Using rails (3.2.3) 
Installing sass (3.1.18) 
Installing sass-rails (3.2.5) 
Installing sqlite3 (1.3.6) with native extensions 
Installing uglifier (1.2.4) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

您对导致 gemspec 出现此问题的问题有何印象？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T07:21:47.773

由于无效的日期格式，gem 似乎认为尚未安装倾斜。修复它运行：

```
sudo sed -i 's/ 00:00:00.000000000Z//' /var/lib/gems/1.8/specifications/* 
```

有用的[链接](http://npenkov.com/2011/11/08/get-ruby-on-rails-working-on-ubuntu-11-10/)

# java - 在java中获取mysql过程的registerout参数

> ID：10648227
> 
> 赞同：0
> 
> 时间：2012-05-18T07:10:45.903
> 
> 标签：java, mysql

我在**mysql**中有一个带有签名的程序

```
"coursePK bigint(20), groupName varchar(1000), userPK bigint(20), newClassPK bigint(20), assignmentFlag varchar(1), rosterFlag varchar(1), gradebookFlag varchar(1), isHavingMasterClass varchar(1), OUT newBookPK bigint(20)" 
```

该过程的末尾有`Start transaction`和语句。`Commit`提交后，我正在设置 OUT 参数的值。

现在，我的 java 代码使用 Callable 语句来调用过程，当我使用`callableStatement.getString(index)`or获取 out 参数`callableStatement.getInt(index)`时，我总是分别得到 null 和 0。

但是当我从 mysql 查询浏览器执行该过程并`SELECT newBookPK`在末尾添加该行时，我得到了正确的输出参数。

所以请帮助我从 Java 代码中获得正确的值。

我在从 JAVA 获取输出参数时出错的地方。

这是java代码：

```
callableStatement = conn.prepareCall("{call copy_custombook_details(?,?,?,?,?,?,?,?,?)}"); //coursePK bigint(20), groupName varchar(1000), userPK bigint(20), newClassPK bigint(20), assignmentFlag varchar(1), rosterFlag varchar(1), gradebookFlag varchar(1), isHavingMasterClass varchar(1), OUT newBookPK bigint(20)
count=1;
callableStatement.setString(count++, coursePK);
callableStatement.setString(count++, groupName);
callableStatement.setString(count++, userPK);
callableStatement.setString(count++, newClassPK);
callableStatement.setString(count++, "N");
callableStatement.setString(count++, "N");
callableStatement.setString(count++, "N");
callableStatement.setString(count++, isHavingMasterClass);
callableStatement.registerOutParameter(count++, Types.VARCHAR);
callableStatement.execute();
newBookPK = callableStatement.getString(9); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T12:57:52.220

问题的路由原因在 mysql 过程签名中。如果程序中有 OUT 参数，**则应在 IN 参数之前定义**。

在您的情况下，程序签名需要更改为

`OUT newBookPK bigint(20), coursePK bigint(20), groupName varchar(1000), userPK bigint(20), newClassPK bigint(20), assignmentFlag varchar(1), rosterFlag varchar(1), gradebookFlag varchar(1), isHavingMasterClass varchar(1)`

并且java代码需要根据该顺序进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:11:50.237

*`When I am executing the procedure from mysql query browser ...`*
而且，在您的 java 代码中，您在哪里调用来执行该语句？

介于两者之间

```
callableStatement.registerOutParameter(count++, Types.VARCHAR);
newBookPK = callableStatement.getString(9); 
```

包括

```
callableStatement.execute(); 
```

然后`getString( 9 )`应该返回所需的东西。

# box2d - AndEngine 中的固定动态块

> ID：10648232
> 
> 赞同：0
> 
> 时间：2012-05-18T07:10:58.720
> 
> 标签：box2d, andengine, collision

我正在尝试创建这样的东西：[http ://s14.postimage.org/8i013r9a9/movable.png](http://s14.postimage.org/8i013r9a9/movable.png)

如果我用 BodyType.DynamicBody 创建 BoxBody，它会从其他对象反弹并飞走，但我可以上下移动（setVelocity），如果我用 BodyType.StaticBody 创建 BoxBody，它会保持原位，但我不能让它移动。

[http://s15.postimage.org/pfvvlbpor/movable2.png](http://s15.postimage.org/pfvvlbpor/movable2.png) - 该块必须向上/向下移动

如何创建可移动的障碍物？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:26:10.550

您需要在 Box2D 扩展中使用关节，请参阅手册： http: [//www.box2d.org/manual.html](http://www.box2d.org/manual.html) 您可能正在寻找棱柱关节。

还要看看运动学物体，我认为您可以像动态物体一样移动它们，但它们不会响应与其他物体的碰撞，因此它们可能适合您的需求。

# ios - 如何根据要插入的图像大小调整 UITableViewCell 的大小？

> ID：10648233
> 
> 赞同：0
> 
> 时间：2012-05-18T07:11:07.677
> 
> 标签：ios, uitableview

在我的表格视图中，我有一个部分，并且在该部分中有两行。
第一行包含图像的名称，第二行包含实际图像。插入图像时，我想根据该图像的大小调整单元格的大小。我尝试了单元格框架和大小，但它不起作用。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:23:02.950

单元格由 布局`UITableView`，您不能直接调整单元格的大小。

你必须`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`在你的[`UITableViewDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForRowAtIndexPath%3a)

# javascript - 数组值在 2 个函数之间传输

> ID：10648241
> 
> 赞同：2
> 
> 时间：2012-05-18T07:11:44.250
> 
> 标签：javascript

我尝试使用一个函数读取一个数组并在另一个函数中使用它，但是第二个函数似乎没有读取它。我做错了什么？

```
 function calcDet () {   
            var A = [];     //generates the array
                for (var i = 0; i < k; i++) {
                    A[i] = [];
                    for (var j = 0; j < k; j++) {   
                        var id = "A" + (i + 1) + (j + 1);                   
                        A[i][j] =  parseFloat(document.getElementById(id).value);               
                    }
                }   
                alert (A);
            return (A); 
        }
        function calcRec() {            
                var s;
                var det;
                alert (A)
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:15:24.483

首先，您的数组未在函数外部声明。它的范围仅限于函数体。但是当您的函数返回数组时，请尝试使用它来初始化其他数组中的局部变量。这也行。或尝试在函数之外声明它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:13:47.860

这是因为 JavaScript 具有“功能范围”。这意味着函数内部声明的任何内容都不能被外部看到，但外部的内容可以从内部看到。

在您的情况下，您必须在函数之外声明数组。

```
var A = []

function calcDet(){...}

function calcRec(){
    alert(A);
} 
```

或调用函数并返回`A`

```
function calcDet(){
    var A = [];
    ...
    return A;
}

function calcRec(){
    var A = calcDet(); //get A from calcDet
    alert(A);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:14:35.290

你不能因为你在`A`本地声明`calcDet`

一种方法是`A`在函数外部声明，或者简单地将其输入`calcRec`：

```
var A
function calcDet() {
   // code
}

function calcRec() {
   // code
} 
```

或更好）

```
function calcRec() {            
   var s;
   var det;
   alert (calcDet())
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T07:14:57.247

第一种方法是

```
function function1()
{
  var valriable1=12;
  function2(val);
}

function function2(val)
{
  var variableoffunction1 = val;
} 
```

第二种方式是

```
var globalvarialbe;
function function1()
{
  globalvarialbe=12;
  function2();
}

function function2()
{
  var local = globalvarialbe;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T07:14:59.867

**[请参阅有关范围的此链接](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope)**。

在函数内部声明的 A 变量仅作用于该函数。它会在函数死亡后死亡。您需要将其作为参数传递：

```
function calcRec(data) {            
        var s;
        var det;
        alert (data)
}
A = calcDet();
calcRec(A); 
```

# knockout.js - 从数据源获取时仅更新 observableArray 中更改的项目

> ID：10648249
> 
> 赞同：1
> 
> 时间：2012-05-18T07:12:13.480
> 
> 标签：knockout.js, polling, knockout-2.0

**我在做什么**：每 30 秒轮询远程日期源以获取数据。然后我做`self.MyCollection(newData);`。

**我的问题**：因为我可能已经过滤了数组或扩展了 UI 中的特定数组项，所以我不希望它每 30 秒重置一次。

我只想在项目实际更改时更新并重新渲染我的 observableArray。

任何人都知道如何避免在底层 observableArray 更改时重置 ui - 或者 - 如何避免在仅 1 个或更少的底层项目更改时整个 observableArray 发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:43:58.093

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T13:33:18.877

I solved this by simple iterating the items in the observableArray and changed the values (which were observables themselves). This updated just the `<li>` in the list, and not the whole `<ul>`.

# python - 上传 Python 第三方库

> ID：10648256
> 
> 赞同：4
> 
> 时间：2012-05-18T07:12:59.067
> 
> 标签：python, google-app-engine

Google App 引擎文档指出，如果第三方库是用纯 Python 编写的，则可以上传和使用它们。

我需要采取哪些步骤来执行此操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T10:33:21.203

我所做的是在我的根目录中创建了一个名为 fix_path.py 的文件，如下所示：

```
import os
import sys
import jinja2   
# path to lib direcotory
sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'lib')) 
```

然后我创建了一个 lib 目录，并将模块放在那里。

例如，我使用 WTForms。我的文件结构如下所示。

*   库
    *   wtforms
*   fix_path.py
*   一些文件.py

当我准备从我的 somefile 脚本中调用它时

```
import fix_path # has to be first.
import wtforms 
```

[这](https://github.com/buslinks/myblog)是我的 github 源代码中的这个例子。结帐 fix_path.py 用于设置和 views.py 用于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T12:31:39.740

好吧，我尝试了以下步骤。

1.  用初始化文件创建了一个目录（lib），即`lib/__init__.py`在我的项目根目录中。
2.  创建了我的模块（`mymodule.py`），并定义了一个函数，即

    ```
    def myfunc():
        return "mycustomfunction" 
    ```

3.  在我的导入 mymodule`main.py`

    ```
    from lib import mymodule 
    ```

我可以使用返回的值`myfunc()`并将其作为模板值传递给我的 jinja2 模板

同样，如果我们遵循@rjz 在第一个答案中也指出的内容，如果第 3 方库只是一个模块，那么我们可以将其保存在带有**init**文件的库中，并且可以使用 import 语句导入（第 3 点）。如果第 3 方库是一个包，那么我们可以将它保存在项目根目录中，然后使用以下 import 语句再次导入它`main.py`：

```
from thirdpartypackage import * 
```

# dynamics-crm-2011 - 如何在 jscript 设置的 crm 2011 选项中添加新项目

> ID：10648261
> 
> 赞同：2
> 
> 时间：2012-05-18T07:13:36.293
> 
> 标签：dynamics-crm-2011

我想在页面加载中动态地向选项集添加一个新选项。选项集的选项不在设计时输入，它只会在运行时填充。使用 Jscript 可以吗？例如：我有一个名为：颜色的选项集。它有 4 个值，例如：黑色、蓝色、红色、绿色。现在我想将白色作为第 5 个选项添加到该选项集中。如何使用 Java 脚本将白色添加到颜色选项集中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:22:38.113

*编辑：这个答案来自对要求的误解。可能对某些人有帮助，但不能解决问题*

[关于 Xrm.Page 的 MSDN 条目提供了`addOption`完成此操作的方法](http://msdn.microsoft.com/en-us/library/51828fe3-f6ff-4f97-80ed-b06b3a354955#BKMK_addOption) 这是一个**经过测试、确认的工作**示例

```
//Create a new "option" object
var myNewOption = document.createElement("option");
// Option value
myNewOption.value = OPTION_VALUE_HERE;  //example: 4
// Option text
myNewOption.text = 'OPTION_TEXT_HERE';  //example: 'White'
//Add the new option
Xrm.Page.getControl('FIELD_NAME_HERE').addOption(myNewOption); //example: new_color 
```

# .net - 用于定点的新 Z3 .NET API

> ID：10648272
> 
> 赞同：1
> 
> 时间：2012-05-18T07:14:06.197
> 
> 标签：.net, z3

自从 Z3 发布了新的 .NET API，在我看来，定点的 API 已经改变了。

但是我找不到有关如何使用新 API 的详细信息。

有没有人可以给我一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:03:33.360

非常感谢您的兴趣。我正在尝试为定点设施一起获得更体面的教程。它将在下周提供。该发行版附带了一个使用遗留 C API 中的定点工具的示例。

最好的问候，尼古拉

# android - java中的“存根”和“AIDL”是什么？

> ID：10648280
> 
> 赞同：34
> 
> 时间：2012-05-18T07:14:47.130
> 
> 标签：android, service, stub, aidl

问题一：

我正在研究Android服务，经常看到这样的代码：

```
private ISampleService.Stub sampleServiceIf = new ISampleService.Stub(){} 
```

是什么`.Stub`？

问题2：

我检查了“ [AIDL](http://developer.android.com/guide/components/aidl.html) ”，但我想知道为什么我们必须使用它而不是 Java 接口文件？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-18T07:30:37.277

“存根”是一个实现远程接口的类，您可以像使用本地接口一样使用它。它处理数据编组/解组以及向/从远程服务发送/接收。术语“存根”通常用于描述其他 RPC 方法（COM、Java 远程处理等）中的此功能，但它的含义可能略有不同。

IDL（接口定义语言）通常与语言无关，理论上您可以从中生成 C++ 或 Python 存根代码。Android 是基于 Java 的，所以区别很微妙。一个区别是您在 .aidl 文件中只能有一个接口，而 Java 允许每个 .java 文件有多个类/接口。对于支持的类型也有一些规则，因此它与 Java 接口并不完全相同，并且不能使用一个来代替 AIDL。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-30T21:13:36.203

在 AIDL 文件中，可以使用远程服务的方法签名来定义接口。AIDL 解析器从接口生成一个 Java 类，可用于两种不同的目的。

1.  它生成一个`Proxy`类来让客户端访问服务，
2.  它生成一个`abstract` `Stub`类，服务实现可以使用该类将其扩展为具有远程方法实现的匿名类。

    [![在此处输入图像描述](../Images/0a113301315ee710aedf7ab19f882d76.png)](https://i.stack.imgur.com/sG1wP.png)

换句话说，

*   当 AIDL android 项目编译完成后，`ISampleSevice.java`需要为`ISampleSevice.aidl`文件生成 java 类。

*   它将有抽象的 Stub 类和一个 Proxy 类。

*   远程服务必须创建一个 Stub 类对象，并且在客户端调用 bindService() 时必须将其返回给客户端。

*   `onBind()`远程服务应返回一个 Stub 类对象。

*   在客户端`onServiceConnected()`，用户可以获取远程服务中定义的存根的代理对象（`ISampleService.Stub.asInterface()`返回代理类）。

*   代理对象可用于在服务进程调用 Stub 类实现的远程方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:04:27.143

嘿，请检查这个[http://developer.android.com/guide/components/aidl.html](http://developer.android.com/guide/components/aidl.html)。它将帮助您了解存根和 AIDL。

# php - 如何清理 register_shutdown_function

> ID：10648283
> 
> 赞同：1
> 
> 时间：2012-05-18T07:14:52.403
> 
> 标签：php

在 test.php 中

```
function close() {
echo "end";
}
register_shutdown_function("close");
exit(); 
```

当我调用方法“exit()”结束时。我希望什么也看不到。如何清理寄存器功能或跳过这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:21:15.257

这应该可以解决问题

```
register_shutdown_function(function() {}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:20:57.210

文档的第一行`\register_shutdown_function`说它将在`exit()`.

[http://php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)

你在使用什么关闭函数，你不想触发一个 exit() 调用？

# java - 山密码加密中的 CBC

> ID：10648289
> 
> 赞同：1
> 
> 时间：2012-05-18T07:15:11.390
> 
> 标签：java, encryption

我正在根据[维基百科的解释实施希尔密码](http://en.wikipedia.org/wiki/Hill_cipher)

但是我想使用CBC模式来实现它，它说每个块必须`XORed`与前一个块一起，那么第一个块呢，它会如何？BS 每个块是一个 3 元素块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:06:19.743

在[CBC 模式下](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)，您需要一个额外的初始化向量，以便您可以对第一个块进行 XOR。只需生成 n 个随机字节作为您的 IV（其中 n 是您的块大小）。这个 IV 不需要保密，可以公开传输给接收者，然后接收者将再次使用它来解密消息。

# iphone - 如何更改 iPhone 导航栏的默认高度

> ID：10648293
> 
> 赞同：0
> 
> 时间：2012-05-18T07:15:21.533
> 
> 标签：iphone, ios, ios4, uinavigationbar

我有一个问题：当我尝试更改导航栏的默认高度时，我无法更改它。如何改变这个高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:17:30.473

您无法更改导航栏的高度，但您可以使用视图和图像制作自定义导航栏，使其看起来与导航栏相同。

# sql-server-2005 - SQL Server - 使用默认值

> ID：10648295
> 
> 赞同：-1
> 
> 时间：2012-05-18T07:15:27.010
> 
> 标签：sql-server-2005

在我的表中，为 3 列设置了默认值。我在该表上使用存储过程进行创建修改和删除。

在创建时将创建一个设置了所有默认值的新行，但是当我修改该行时，我的 3 列的默认值更改为 null。

如果有人知道如何解决它会怎样，请尽早回复我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:18:21.860

> 当我要进行修改时，我那 3 个列默认值更改为 null

值不会在没有充分理由的情况下更改为 NULL。我猜这是因为您在进行“修改”时明确将它们设置为 NULL 。默认值仅适用于插入新行。

如果您可以发布更多详细信息，我可以给出更具体的答案。

# java - 带有java的HTML解析器

> ID：10648304
> 
> 赞同：-6
> 
> 时间：2012-05-18T07:16:22.663
> 
> 标签：java, html, parsing

我有一个简单的问题：假设我有下一个跨度：

```
<span class="data" id="random">
Here the piece of string i need
</span> 
```

我怎样才能得到跨度里面的东西？

谢谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:19:52.877

HTML Parser 是 Java 的 HTML 解析器。

[http://htmlparser.sourceforge.net/](http://htmlparser.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:22:33.490

试试这个：[JSoup](http://jsoup.org/)，是 Java 的 HTML 解析器。

```
Document doc = Jsoup.connect("LINK_TO_YOUR_PAGE").get();
Elements random = doc.select("#random");
System.out.println(random.html()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-18T07:19:54.940

如果您只想使用核心类而不是 HTML 解析器，则可以使用[正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/index.html)来捕获跨度的内容。

这个问题的“相关”部分显示了很多人[提出类似的解析问题](https://stackoverflow.com/questions/2129375/html-xml-parser-for-java)。

# c - 平均计算器 - 为什么没有“var += var;” 嵌套在一个while循环工作？

> ID：10648306
> 
> 赞同：0
> 
> 时间：2012-05-18T07:16:30.600
> 
> 标签：c, variables, average

我对 Stack Overflow 和 C 编程相当陌生，希望我不会惹恼任何缺乏知识的人。

我正在为 Kickstarter 项目创建一个平均计算器，我想知道为什么下面的方法不起作用。不是平均水平，但是如果您要输入 1 个支持者并每天承诺 10 美元，为什么支持者和资金会翻倍，

```
 #include <stdio.h>
    #include <conio.h>

    int main(void){

    int loopcount = 0;
    int backers = 0;
    int money = 0;
    int average = 0;

    int tbackers = 0;
    int tmoney = 0;

    while(loopcount<5){

       //Ask for # of backers and total money pledged.
       printf("Please Enter the number of backers today, then the total money pledged                                today:\n");
       scanf("%d\n%d", &backers, &money);

       //
       backers += backers;
       money += money;

       loopcount++;
        }
       //average = tmoney / tbackers;
       printf("There were %d backers and the total collected was $%d.\nSo the average amount pledged was  $%d", backers, money, average);

       getch();

} 
```

但以下工作正常

```
#include <stdio.h>
#include <conio.h>

int main(void){

    int loopcount = 0;
    int backers = 0;
    int money = 0;
    int average = 0;

    int tbackers = 0;
    int tmoney = 0;

    while(loopcount<5){

       //Ask for # of backers and total money pledged.
       printf("Please Enter the number of backers today, then the total money pledged today:\n");
       scanf("%d\n%d", &backers, &money);

       //
       tbackers += backers;
       tmoney += money;

       loopcount++;
    }
       //average = tmoney / tbackers;
       printf("There were %d backers and the total collected was $%d.\nSo the average amount pledged was  $%d", tbackers, tmoney, average);

       getch();

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T07:18:30.083

在第一种情况下，每次计算后，当您获得新的用户输入时，您会覆盖该值：

```
scanf("%d\n%d", &backers, &money); 
```

例如：

```
line                  | backers    | money
----------------------+------------+------
user input 5 3        | 5          | 3
backers += backers    | 10         | 3
money += money        | 10         | 6
user input 8 6        | 8          | 6
backers += backers    | 16         | 6
money += money        | 16         | 12 
```

现在，在第二个示例中，您不覆盖这些值，而是将它们添加到总和中：

```
line                  | backers    | money    | tbackers   | tmoney    
----------------------+------------+----------+------------+---------
user input 5 3        | 5          | 3        | 0          | 0
tbackers += backers   | 5          | 3        | 5          | 0
tmoney += money       | 5          | 3        | 5          | 3
user input 8 6        | 8          | 6        | 5          | 3
tbackers += backers   | 8          | 6        | 13         | 3
tmoney += money       | 8          | 6        | 13         | 9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:18:57.330

“不起作用”到底是什么意思？我无法想象它不起作用。

`money += money`将 的值添加`money`到 variable 的内容中`money`，有效地使其值加倍。

如果您想实现其他目标，则必须表达其他内容，就像您在第二个示例中所做的那样：为总和设置一个变量，为用户输入设置一个变量。如果你把它们混合起来，你最终会得到破坏（覆盖）的数据。

如果您使用的是 C99 或者您的编译器允许，您可以将变量声明在靠近您需要它们的位置：

[...]

```
while(loopcount<5){
   int money = 0;
   int average = 0;

   //Ask for # of backers and total money pledged.
   printf("Please Enter the number of backers today, then the total money pledged today:\n");
   scanf("%d\n%d", &backers, &money);

   //
   tbackers += backers;
   tmoney += money;

   loopcount++;
}
[...] 
```

这将使用`backers`和限制在循环`money`的范围内`while`，因此它们不能泄漏。

# scala - 需要层次结构时如何使用案例类？

> ID：10648313
> 
> 赞同：18
> 
> 时间：2012-05-18T07:17:25.910
> 
> 标签：scala, case-class

我知道你不允许从案例类继承，但是当你真的需要时你会怎么做？我们在一个层次结构中有两个类，它们都包含许多字段，我们需要能够创建两者的实例。这是我的选择：

*   如果我将超类设为普通类而不是案例类 - 我将失去所有案例类的优点，例如 toString、equals、hashCode 方法等。
*   如果我把它作为一个案例类，我会打破不从案例类继承的规则。
*   如果我在子类中使用组合 - 我必须编写很多方法并将它们重定向到另一个类 - 这将意味着大量工作并且会感觉非 Scalaish。

我该怎么办？这不是很普遍的问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T07:30:28.033

是的，这是一个经常出现的问题，我建议创建一个具有所有父属性的特征，创建一个仅实现它的案例类，然后创建另一个继承它的具有更多属性的案例类。

```
sealed trait Parent {
  /* implement all common properties */
}

case class A extends Parent

case class B extends Parent {
  /*add all stuff you want*/
} 
```

看它的一个好方法是一棵树，特征是节点，案例类是叶子。

您可以根据对父级的需要使用特征或抽象类。但是，请避免使用类，因为您将能够创建它的实例，这并不优雅。

**编辑：**正如评论中所建议的，如果不是所有案例类都包含在模式匹配中，您可以密封特征以便在编译时出现异常。例如，在“Scala 编程”的第 15.5 章中对此进行了说明

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T05:44:55.440

用委托代替继承怎么样？

如果层次结构中的两个类有很多*共享*字段，那么委托可以减少样板代码的数量吗？像这样：

```
case class Something(aa: A, bb: B, cc: C, payload: Payload)

sealed abstract class Payload

case class PayloadX(xx: X) extends Payload
case class PayloadY(yy: Y) extends Payload 
```

然后你会`Something`像这样创建实例：

```
val sth1 = Something('aa', 'bb', 'cc', PayloadX('xx'))
val sth2 = Something('aa', 'bb', 'cc', PayloadY('yy')) 
```

你可以做模式匹配：

```
sth1 match {
  case Something(_, _, _, PayloadX(_)) => ...
  case Something(_, _, _, PayloadY(_)) => ...
} 
```

好处： （？）

*   当您声明*PayloadX*和*PayloadY*时，您不必重复*Something*中的所有字段。

*   当您创建 的实例时`Something(... Payload(..))`，您可以重用创建的代码`Something`，无论是在创建`Something(... PayloadX(..))`和时`...PayloadY`。

缺点： （？）

*   也许`PayloadX`和`Y`在你的情况下实际上是真正的子类`Something`，我的意思是，在你的情况下，也许委托在语义上是错误的？

*   你将不得不写`something.payload.whatever`而不是简单地写`something.whatever`（我想这可能是好是坏取决于你的具体情况？）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T07:30:03.720

我也探讨了这个问题，AFAIK，你会得到的最好的是：

> 让每个案例类从定义每个案例类必须实现的抽象属性的公共特征扩展

它不会删除样板（根本），但定义了您的案例类必须遵守的合同，同时不会丢失案例类功能集......

# ruby-on-rails - 无法将表单中的 customer_id 值传递给部分作为 ruby on rails 中的隐藏字段值

> ID：10648315
> 
> 赞同：1
> 
> 时间：2012-05-18T07:17:31.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, partials

我有这个主要形式

```
 <%= simple_nested_form_for @customer_bill do |f| %>

        <%= f.label :customer_id %>
        <%= f.collection_select :customer_id, Customer.all,:id,:name, {:prompt => "Select Customer"}, :style => 'width:205px;' %><br />

        <%= f.link_to_add "Add", :customer_bill_line_items,  :locals => {:text_1 => :customer_id} %>
    /* rest of code */
    <%end%> 
```

我的 customer_bill_line_items 部分有这个

```
<%= f.hidden_field :customer_id, :value => :text_1 %>
/*rest of code*/ 
```

但我无法在部分中捕获选定的客户 ID。隐藏字段的值是 0。任何关于我如何解决这个问题的指导都会很棒。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:28:20.510

```
<%= f.hidden_field :customer_id, :value => :text_1 %> 
```

我猜 customer_id 在一个整数字段中，并且您将 :value 设置为 text_1 这是一个字符串。

如果 text_1 的值为整数，则 text_1.to_i

# asp.net-web-api - 如何从 XML 正文反序列化数组？

> ID：10648323
> 
> 赞同：1
> 
> 时间：2012-05-18T07:18:34.193
> 
> 标签：asp.net-web-api

我遇到了 ASP.NET WebApi 的问题，我不知道我是否做错了什么。

每当客户端发出内容类型为 XML 的请求时，就会出现此问题。它与 JSON 完美配合。

（XmlSerializer 和 DataContractSerializer 都会出现这个问题）

我在一个干净的 WebApi 项目上重现了这个问题。这是测试控制器：

```
public class ValuesController : ApiController
{
    private readonly Repository _repository = new Repository();

    // GET /api/values
    public IQueryable<Model> Get()
    {
        return _repository.Items;
    }

    // GET /api/values/5
    public Model Get(int id)
    {
        return  _repository.Items.FirstOrDefault(m => m.Id == id);
    }

    // POST /api/values
    public HttpResponseMessage Post(Model model)
    {
        return new HttpResponseMessage<Model>(model, HttpStatusCode.OK);
    }
}

public class Repository
{
    public Repository()
    {
        _models = new List<Model>();
        _models.Add(new Model { Id = 1, Name = "A", Values = new[]{"Foo", "Bar"} });
    }

    private readonly List<Model> _models;

    public IQueryable<Model> Items
    {
        get { return _models.AsQueryable(); }
    }
}

public class Model
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string[] Values { get; set; }
} 
```

如您所见， Post 方法只是返回接收到的数据的回显。数据取自 Get(int) 方法的输出。

**获取输出**：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfModel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<Model>
<Id>1</Id>
<Name>A</Name>
<Values>
<string>Foo</string>
<string>Bar</string>
</Values>
</Model>
</ArrayOfModel> 
```

**发帖请求**：

```
POST http://localhost:50798/api/values HTTP/1.1
User-Agent: Fiddler
Host: localhost:50798
Accept: application/xml
Content-Type: application/xml
Content-Length: 110

<Model>
<Id>1</Id>
<Name>A</Name>
<Values>
<string>Foo</string>
<string>Bar</string>
</Values>
</Model> 
```

**回复正文**：

```
<?xml version="1.0" encoding="utf-8"?>
<Model xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<Id>1</Id>
<Name>A</Name>
<Values/>
</Model> 
```

如前所述，一切都适用于 JSON 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:18:02.427

您可能对空值有疑问，所以请尝试更改

```
[serialize(IsNullable=true)]
public class Model 
```

# java - Android流畅的游戏循环

> ID：10648325
> 
> 赞同：20
> 
> 时间：2012-05-18T07:18:34.670
> 
> 标签：java, android, opengl-es, opengl-es-2.0

我在 OpenGL 中平滑滚动时遇到问题（在 SGS2 和 ACE 上进行测试）
我创建了简单的应用程序 - 只有固定速度的图像水平滚动，或者只有一个图像（播放器）通过加速器移动，但它的移动并不平滑 :-(
我试过了许多不同的代码，但不满意......

首先我尝试使用**GLSurfaceView.RENDERMODE_CONTINUOUSLY**并将所有代码放入 onDrawFrame：

```
 public void onDrawFrame(GL10 gl) 
    {
      updateGame(gl, 0.017f);
      drawGame(gl); 
    } 
```

这是最简单最流畅的！！- 但它取决于硬件速度（= 无用）

```
 public void onDrawFrame(GL10 gl) 
    { 
      frameTime = SystemClock.elapsedRealtime();        
      elapsedTime = (frameTime - lastTime) / 1000; 
      updateGame(gl, elapsedTime);
      drawGame(gl); 
      lastTime = frameTime; 
    } 
```

这是最好的，但它不像以前那样流畅，有时轻弹

第二我尝试**GLSurfaceView.RENDERMODE_WHEN_DIRTY**，在 onDrawFrame 我只有绘图对象，并且这段代码在单独的线程中：

```
 while (true) 
   {
     updateGame(renderer, 0.017f);
     mGLSurfaceView.requestRender();
     next_game_tick += SKIP_TICKS;
     sleep_time = next_game_tick - System.currentTimeMillis();
     if (sleep_time >= 0) 
     {
       try 
       {
          Thread.sleep(sleep_time);
       } 
       catch (Exception e) {}
       }
       else 
       {
         Log.d("running behind: ", String.valueOf(sleep_time));
       }
     } 
```

这并不顺利，“落后”也没有问题

我的目标是像上面的第一个代码示例一样平滑图像移动。

可能的错误在其他地方，然后我在寻找。请问，有人可以帮我解决这个问题吗？
最好使用 RENDERMODE_WHEN_DIRTY 还是 RENDERMODE_CONTINUOUSLY？

谢谢你。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-24T02:18:55.133

几天来，我一直在与完全相同的问题作斗争。在没有任何 Android 时间参考的情况下，循环看起来很流畅，但一旦包含任何类型的“时间同步”，Android 开发控制之外的外部因素就会对最终结果造成严重的不连续性。

基本上，这些因素是：

*   eglSwapInterval 在 Android 中没有实现，所以很难知道硬件在屏幕中暴露最终绘制的时刻（硬件屏幕同步）
*   Thread.sleep 不精确。线程可能比请求的睡眠时间更多或更少。
*   SystemClock.uptimeMillis()System.nanoTime()、System.currentTimeMillis() 和其他与时间相关的测量不准确（其精确）。

该问题与绘图技术（绘图、openGL 1.0/1.1 和 2.0）和游戏循环方法（固定时间步长、插值、可变时间步长）无关。和你一样，我在尝试 Thread.sleep、疯狂的插值、计时器等。不管你会做什么，我们无法控制这些因素。

根据本网站上的许多问答，产生流畅连续动画的基本规则是：

*   通过删除所有动态内存请求，至少减少 GC。
*   以硬件可以处理它们的速度渲染帧（在大多数安卓设备中，40 到 60fps 是可以的）。
*   使用带有插值的固定时间步长或可变时间步长。
*   优化更新物理和绘制例程以在相对恒定的时间内执行而没有高峰值方差。

可以肯定的是，在发布这个问题之前，您通过优化 updateGame() 和 drawGame()（没有明显的 GC 和相对恒定的执行时间）做了很多先前的工作，以便在您的主循环中获得平滑的动画，正如您提到的：“简单而绝对流畅”。

您具有可变 stepTime 的特殊情况，并且没有特殊要求与实时事件（如音乐）完美同步，解决方案很简单：“平滑 step Time 变量”。
该解决方案适用于其他游戏循环方案（具有可变渲染的固定时间步长）并且易于移植该概念（平滑由 updateGame 产生的位移量和跨几帧的实时时钟。）

```
 // avoid GC in your threads. declare nonprimitive variables out of onDraw
    float smoothedDeltaRealTime_ms=17.5f; // initial value, Optionally you can save the new computed value (will change with each hardware) in Preferences to optimize the first drawing frames 
    float movAverageDeltaTime_ms=smoothedDeltaRealTime_ms; // mov Average start with default value
    long lastRealTimeMeasurement_ms; // temporal storage for last time measurement

    // smooth constant elements to play with
    static final float movAveragePeriod=40; // #frames involved in average calc (suggested values 5-100)
    static final float smoothFactor=0.1f; // adjusting ratio (suggested values 0.01-0.5)

    // sample with opengl. Works with canvas drawing: public void OnDraw(Canvas c)   
    public void onDrawFrame(GL10 gl){       
        updateGame(gl, smoothedDeltaRealTime_ms); // divide 1000 if your UpdateGame routine is waiting seconds instead mili-seconds.
        drawGame(gl);  

        // Moving average calc
        long currTimePick_ms=SystemClock.uptimeMillis();
        float realTimeElapsed_ms;
        if (lastRealTimeMeasurement_ms>0){
        realTimeElapsed_ms=(currTimePick_ms - lastRealTimeMeasurement_ms);
        } else {
                 realTimeElapsed_ms=smoothedDeltaRealTime_ms; // just the first time
        }
        movAverageDeltaTime_ms=(realTimeElapsed_ms + movAverageDeltaTime_ms*(movAveragePeriod-1))/movAveragePeriod;

         // Calc a better aproximation for smooth stepTime
        smoothedDeltaRealTime_ms=smoothedDeltaRealTime_ms +(movAverageDeltaTime_ms - smoothedDeltaRealTime_ms)* smoothFactor;

        lastRealTimeMeasurement_ms=currTimePick_ms;
    }

    // Optional: check if the smoothedDeltaRealTIme_ms is too different from original and save it in Permanent preferences for further use. 
```

对于固定时间步长方案，可以实现中间 updateGame 来改善结果：

```
float totalVirtualRealTime_ms=0;
float speedAdjustments_ms=0; // to introduce a virtual Time for the animation (reduce or increase animation speed)
float totalAnimationTime_ms=0;
float fixedStepAnimation_ms=20; // 20ms for a 50FPS descriptive animation
int currVirtualAnimationFrame=0; // useful if the updateGameFixedStep routine ask for a frame number

private void updateGame(){
    totalVirtualRealTime_ms+=smoothedDeltaRealTime_ms + speedAdjustments_ms;

    while (totalVirtualRealTime_ms> totalAnimationTime_ms){
        totalAnimationTime_ms+=fixedStepAnimation_ms;
        currVirtualAnimationFrame++;
        // original updateGame with fixed step                
        updateGameFixedStep(currVirtualAnimationFrame);
    }

    float interpolationRatio=(totalAnimationTime_ms-totalVirtualRealTime_ms)/fixedStepAnimation_ms;
    Interpolation(interpolationRatio);
} 
```

使用以下设备使用画布和 openGlES10 绘图进行测试：SG SII (57 FPS)、SG Note(57 FPS)、SG tab(60 FPS)、在 Windows XP (8 FPS) 上运行的无品牌 Android 2.3 (43 FPS) 慢速模拟器。测试平台绘制了大约 45 个对象 + 1 个巨大的背景（来自 70MP 源图像的纹理）沿着真实物理参数（km/h 和 G's）指定的路径移动，多个设备之间没有尖峰或轻弹（模拟器上的 8 FPS看起来不太好，但它按预期以恒定速度流动）

检查图表以了解 android 如何报告时间。有时 Android 报告一个很大的增量时间，只是下一个循环它比平均值小，这意味着读取 realTime 值的偏移量。

![在此处输入图像描述](../Images/3e1859c46f744919f7de26d2a3e6bd7c.png)

更详细： ![在此处输入图像描述](../Images/717f8d8a5ce7f47e90faaf148985b84d.png)

[使用 Android 的 GLSurfaceView.RENDERMODE_CONTINUOUSLY 时如何限制帧率？](https://stackoverflow.com/questions/4772693/how-to-limit-framerate-when-using-androids-glsurfaceview-rendermode-continuousl)

[System.currentTimeMillis vs System.nanoTime](https://stackoverflow.com/questions/351565/system-currenttimemillis-vs-system-nanotime)

[System.currentTimeMillis() 方法真的返回当前时间吗？](https://stackoverflow.com/questions/1902368/does-the-method-system-currenttimemillis-really-return-the-current-time)

# python - 随机交错多个可迭代对象，同时在 python 中保留它们的顺序

> ID：10648331
> 
> 赞同：9
> 
> 时间：2012-05-18T07:19:26.580
> 
> 标签：python

受[这个较早的堆栈溢出问题](https://stackoverflow.com/questions/10644925/randomly-interleave-2-arrays-in-python)的启发，我一直在考虑如何在 python 中随机交错可迭代对象，同时保留每个可迭代对象中元素的顺序。例如：

```
>>> def interleave(*iterables):
...     "Return the source iterables randomly interleaved"
...     <insert magic here>
>>> interleave(xrange(1, 5), xrange(5, 10), xrange(10, 15))
[1, 5, 10, 11, 2, 6, 3, 12, 4, 13, 7, 14, 8, 9] 
```

最初的问题要求随机交错两个列表 a 和 b，并且接受的解决方案是：

```
>>> c = [x.pop(0) for x in random.sample([a]*len(a) + [b]*len(b), len(a)+len(b))] 
```

但是，此解决方案仅适用于两个列表（尽管可以轻松扩展），并且依赖于 a 和 b 是列表的事实，因此`pop()`可以`len()`在它们上调用，这意味着它不能与可迭代对象一起使用。它还具有清空源列表 a 和 b 的不幸副作用。

为原始问题给出的替代答案会复制源列表以避免修改它们，但这让我觉得效率低下，尤其是在源列表很大的情况下。替代答案也使用，`len()`因此不能仅用于可迭代对象。

我编写了自己的解决方案，适用于任意数量的输入列表并且不修改它们：

```
def interleave(*args):
    iters = [i for i, b in ((iter(a), a) for a in args) for _ in xrange(len(b))]
    random.shuffle(iters)
    return map(next, iters) 
```

但是此解决方案还依赖于作为列表的源参数，以便`len()`可以在它们上使用。

那么，有没有一种有效的方法可以在 python 中随机交错迭代，保留元素的原始顺序，这不需要提前知道迭代的长度并且不需要复制迭代？

**编辑：**请注意，与原始问题一样，我不需要随机化是公平的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T07:27:36.597

这是使用生成器的一种方法：

```
import random

def interleave(*args):
  iters = map(iter, args)
  while iters:
    it = random.choice(iters)
    try:
      yield next(it)
    except StopIteration:
      iters.remove(it)

print list(interleave(xrange(1, 5), xrange(5, 10), xrange(10, 15))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T07:23:29.990

如果您想要“公平”，则不是。

想象一下，您有一个包含一百万个项目的列表，另一个仅包含两个项目。“公平”随机化将使短列表中的第一个元素出现在大约索引 300000 左右。

```
a,a,a,a,a,a,a,...,a,a,a,b,a,a,a,....
                        ^ 
```

但是在您知道列表的长度之前，无法提前知道。

如果您只是以 50% (1/n) 的概率从每个列表中取出，那么可以在不知道列表长度的情况下完成，但您会得到更多类似这样的结果：

```
a,a,b,a,b,a,a,a,a,a,a,a,a,a,a,a,...
    ^   ^ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T03:23:46.997

我很满意aix提供的解决方案满足问题的要求。然而，在阅读了[Mark Byers 的评论](https://stackoverflow.com/a/10648380/631586)后，我想看看这个解决方案是多么“不公平”。

此外，在我写完这个问题后的某个时候，堆栈溢出用户 EOL 发布了[另一个解决](https://stackoverflow.com/a/10649247/631586)[原始问题](https://stackoverflow.com/q/10644925/631586)的解决方案，它产生了一个“公平”的结果。EOL的解决方案是：

```
>>> a.reverse()
>>> b.reverse()
>>> [(a if random.randrange(0, len(a)+len(b)) < len(a) else b).pop()
...     for _ in xrange(len(a)+len(b))] 
```

我还进一步增强了我自己的解决方案，使其不依赖于支持的论点 `len()`，而是复制源可迭代对象：

```
def interleave(*args):
    iters = sum(([iter(list_arg)]*len(list_arg) for list_arg in map(list, args)), [])
    random.shuffle(iters)
    return map(next, iters) 
```

或者，写得不同：

```
def interleave(*args):
    iters = [i for i, j in ((iter(k), k) for k in map(list, args)) for _ in j]
    random.shuffle(iters)
    return map(next, iters) 
```

然后，我测试了由 FJ 编写并在我上面的问题中复制的原始问题的公认解决方案，以及 aix、EOL 和我自己的解决方案。该测试涉及将 30000 个元素的列表与单个元素列表（哨兵）交错。我重复了测试 1000 次，下表显示了每种算法在交织后哨兵的最小值、最大值和平均索引，以及所用的总时间。我们期望一个“公平”的算法产生一个大约的平均值。15,000：

```
algo    min             max             mean            total_seconds
----    ---             ---             ----            -------------
F.J:    5               29952           14626.3         152.1
aix:    0               8               0.9             27.5
EOL:    45              29972           15091.0         61.2
srgerg: 23              29978           14961.6         18.6 
```

从结果可以看出，FJ、EOL 和 srgerg 的每个算法都产生了表面上“公平”的结果（至少在给定的测试条件下）。然而，aix 的算法始终将标记放在结果的前 10 个元素中。我重复了几次实验，结果相似。

所以马克拜尔斯被证明是正确的。如果需要真正的随机交织，则需要提前知道源迭代的长度，或者需要制作副本以便确定长度。

# android - 如何从用户输入的地址中找到地图上的位置？

> ID：10648333
> 
> 赞同：1
> 
> 时间：2012-05-18T07:19:46.507
> 
> 标签：android, android-emulator, google-maps-mobile

我想在使用虚拟设备（模拟器 Android）时在地图上找到位置，因为我没有实际设备。感谢收看！

这是我的代码：

```
enter code herepublic class GoogleMapExample3Activity extends MapActivity {
/** Called when the activity is first created. */
MapView mapView;
TextView txtView;
LinearLayout zoomControl;
GeoPoint geoPoint;
MapController mapController;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mapView=(MapView) findViewById(R.id.mapView);
    zoomControl=(LinearLayout) findViewById(R.id.zoomControl);
    View view= mapView.getZoomControls();
    zoomControl.addView(view,new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    mapView.displayZoomControls(true);
    mapView.setSatellite(true);
    String address="New York";
    Geocoder geoCoder=new Geocoder(this);
    List<Address> list;
    try {
        list = geoCoder.getFromLocationName(address, 1);
        Address a=list.get(0);
        Double latitude=a.getLatitude();
        Double longitude=a.getLongitude();
        geoPoint=new GeoPoint( (int)(latitude*1E6),(int)(longitude*1E6));
        mapController=mapView.getController();
        mapController.animateTo(geoPoint);
        mapController.setZoom(18);

    } catch (Exception e) {
        e.printStackTrace();
    }
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    MapController mapController=mapView.getController();
    switch (keyCode) {
    case KeyEvent.KEYCODE_I:
        mapController.zoomIn();
        break;
    case KeyEvent.KEYCODE_O:
        mapController.zoomOut();
        break;
    default:
        break;
    }
    return super.onKeyDown(keyCode, event);
} 
```

}

我尝试了但无法从用户输入的地址中获取位置！我需要你帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:25:21.390

```
How to find a location on Map from a address which was be input by user? 
```

使用 Android **Geocoder**类，

```
Geocoder geoCoder = new Geocoder(this);
List<Address> listAddress;
GeoPoint geoPoint;
try {
    listAddress = geoCoder.getFromLocationName(userAddress,1);
    if (listAddress == null) {
        return null;
    }
    Address location = listAddress.get(0);
    geoPoint = new GeoPoint((int) (location.getLatitude() * 1E6),
                      (int) (location.getLongitude() * 1E6)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:27:54.233

希望对你有帮助

[http://eagle.phys.utk.edu/guidry/android/mappingDemo.html](http://eagle.phys.utk.edu/guidry/android/mappingDemo.html)

# c - 在 C 中返回 va_list 是否安全？

> ID：10648337
> 
> 赞同：16
> 
> 时间：2012-05-18T07:19:55.690
> 
> 标签：c, c99, c89, variadic-functions

我想编写一个返回类型为 va_list 的函数。

例子：`va_list MyFunc(va_list args);`

这个安全便携吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T07:45:26.140

`va_list` *可能*（但不保证）是数组类型，因此您不能按值传递或返回它。看起来好像是的代码可能只是传递/返回指向第一个元素的指针，因此您可以在被调用者中使用参数，但您可能正在对原始元素进行操作。

形式上你可能会说这`va_list`是一个实体类型，而不是一个值类型。您使用 复制它`va_copy`，而不是使用赋值或通过函数参数/返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:31:29.753

虽然您绝对可以`return`使用这样的值，但我不确定返回值是否可以以有用的方式使用。

由于`va_list`s 的处理需要特殊处理（`va_end()`需要在`va_start()`and之后`va_copy()`），并且甚至允许包含`va_start/copy`and宏来强制执行这种配对，因此您不能在没有另一个的情况下调用一个。`va_end``{ }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T11:40:21.193

无论语言标准怎么说，这在实践中都不太可能奏效。A`va_list`很可能是指向调用者为了被调用者的利益而放置在堆栈上的调用记录的指针。一旦被调用者返回，堆栈上的内存就可以重用了。

返回类型`va_list`不太可能将列表的内容实际复制回调用者。尽管这将是 C 的有效实现，但如果标准要求这样做，那将是规范中的缺陷。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-18T08:30:04.213

> 但是，将指针传递给另一个函数与返回该指针完全不同。许多/大多数实现将实际变量参数存储在堆栈帧中，该堆栈帧在 vararg 函数返回时被销毁。（即返回一个 va_list 或指向一个的指针，将为您留下指向被破坏的局部变量的指针）。– 没有
> 
> 好吧，在我的情况下，我会返回 va_list 但感谢您的警告 – Hayri Uğur Koltuk

如果将指向 a 的指针传递给`va_list`function `MyFunc(va_list *args)`，则无需将修改后的 (by `va_arg(*args, type)`) 参数列表传回，因为`MyFunc`会修改原始列表。

# java - tomcat在哪里存储web应用程序使用的txt文件

> ID：10648349
> 
> 赞同：0
> 
> 时间：2012-05-18T07:21:00.733
> 
> 标签：java, eclipse, tomcat

我在“C:\Program Files\apache-tomcat-7.0.27”安装了 tomcat
我在“C:\Program Files\eclipse”安装了 eclipse
我的工作区位于“C:\workspace”

我正在使用“Java 透视图”，创建了一个“Java 项目”，默认输出文件夹为“helloWorld/web/WEB-INF/classes”。项目的结构是这样的：

```
-helloWorld
---src
-----servlets
-------hello.java
-------world.java
---web
-----WEB-INF
-------jsp
---------hello.jsp
---------world.jsp
-------lib
-------web.xml
---helloWorld.xml
---record.txt 
```

hello.java 中的 doPost() 生成一个随机数，并将其写入文本文件“record.txt”。
world.java 中的 doPost() 打开文本文件“record.txt”并读取一个数字。

系统正在工作，但我最初放入 eclipse 项目的 record.txt 文件中的内容从未改变，而且我确信从文件中读取的 world.java 正是 hello.java 生成的内容。
我检查了“C:\Program Files\apache-tomcat-7.0.27\work\Catalina\localhost\helloWorld”，那里只有jsp文件。
然后我尝试重新启动tomcat并重新加载，甚至取消部署并再次部署，但之前生成的数字仍然存在。我没有尝试重新启动计算机。

我的问题是 record.txt 文件在哪里？它绝对不是eclipse项目中的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:57:10.903

如果您在 Java 代码中使用相对文件路径，那么它将与您的 webapp 无关，而是与运行 Tomcat 的进程的启动位置相关。因此，您可能会在 Tomcat bin 目录或类似的地方找到您的文件。

如果你想创建一个相对于你的 webapp 的文件，那么你需要获取你的 webapp 的路径，你可以通过在你的 Servlet 中调用 getServletContext().getRealPath("") 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:46:52.860

Check your webapps folder for a folder with the same name as your project.

```
C:\Program Files\apache-tomcat-7.0.27\webapps 
```

Here you will find the exact folder structure and your `record.txt` file as well.

Hope this helps!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:35:35.967

Eclipse 部署的项目在 temp 文件夹中运行。路径看起来像这样...... tmp0/conf/catalina/localhost/projectname.....context.xml 服务器可能会帮助你......

我建议你应该走一条绝对路径……我在使用 eclipse 时遇到了同样的问题……那时我什至不得不向用户提供链接……

# c# - 每次点击时都必须更改隐藏字段

> ID：10648350
> 
> 赞同：0
> 
> 时间：2012-05-18T07:21:02.867
> 
> 标签：c#, javascript, asp.net

我是 asp.net，c# 的新手。我有动态框（每个公司），它将在运行时创建。现在，在每次单击框时，我的隐藏字段都应提供受尊重的 id。如果单击该框，我可以从数据库中获取公司 id，现在如果公司 id 是 5 我的隐藏字段应该是 5，如果是 7 我的隐藏字段应该是 7。我使用 asp.net 控制隐藏字段（必须在 sql 数据源中使用）。我只能在 c# 中控制 asp.net 的隐藏字段值. 如何在每次点击时使用 javascript 更改 c# 中的隐藏字段值

如何使用 c# 和 javascript 编码来实现这一点？请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:25:26.533

如果我正确理解您的问题：

当您将文本框动态添加到页面时，添加一个 onclick 事件处理程序。

```
int id = 1; // You'd have access to this.
TextBox tb = new TextBox();
tb.Attributes.Add("onClick", string.Format("javascript:someFunction({0})", id));
// add other stuff.
form1.Controls.Add(tb); 
```

然后有一个javascript函数来设置隐藏字段的值：

```
function someFunction(id) {
    var hiddenField = document.getElementById("hdnField");
    hiddenField.value = id;
} 
```

请注意，我将隐藏字段的 clientIdMode 设置为 Static，并将 id 设置为“hdnField”。如果您没有设置 clientIdMode 的选项（.Net 4 之前），您将不得不 <%= hdnField.ClientID %> （在我的脑海中）。您可能还想检查您肯定传入数字的 javascript。

# php - 如果文件上传被取消，如何不插入数据库行

> ID：10648357
> 
> 赞同：0
> 
> 时间：2012-05-18T07:21:45.180
> 
> 标签：php

我在下面的表单中有一个取消按钮，如果用户正在上传文件，他们可以单击“取消”按钮取消上传，如果他们愿意的话。但是我遇到的问题是，无论文件是否处于上传过程中，它总是在包含文件名的数据库中插入一行。我想要的是，如果将现有文件或新文件上传到服务器中的“ImageFiles”文件夹中，然后插入包含文件名的数据库行，否则如果上传被取消，则不要插入数据库行，这可能吗？

以下是当前的表单代码：

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return startImageUpload(this);' class='imageuploadform' >" + 
  "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
  "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" +     
  "</p><p class='imagef1_cancel' align='center'></p>" +
  "<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
```

下面是 imageupload.php 脚本，它在其中上传文件并在其中插入数据库行：

```
<?php

session_start();

...//Connect to DB

$result = 0;

if( is_file("ImageFiles/".$_FILES['fileImage']['name'])) {
    $parts = explode(".",$_FILES['fileImage']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( is_file("ImageFiles/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileImage"]["tmp_name"],
    "ImageFiles/" . $_FILES["fileImage"]["name"]);
    $result = 1;

    $imagesql = "INSERT INTO Image (ImageFile) 
    VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

    mysql_query($imagesql);

}
    else
      {
      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

        $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

mysql_query($imagesql);

      }

      mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:00:13.307

根据评论中的要求，这里是 Key 方法。

```
<?
    if(!empty($_FILES) && !isset($_POST['Cancel'])) // only process if we haven't clicked Cancel
    {
        foreach($_FILES as $Key => $File) // loop through the files as we don't know the input file name.
        {
            if($File['size'] > 0) // check it has a size
            {
                // do insert, making sure you store $Key with the image
                mysql_query("insert into Image (ImageFile, Key) values ('{$File['name']}', '$Key'");
            }
        }
    }
    if(isset($_POST['Cancel']) && !empty($_POST['Cancel'])) // if we have clicked cancel
    {
        $Key = array_shift($_POST['Cancel']); // get the unique key from the post.
        mysql_query("delete from Image where Key = '$Key'"); // delete the file from the database.
    }
?> 
```

以上是您处理上传和取消的 PHP 代码。

```
<form action="" method="post" enctype="multipart/form-data">
    <? $Key = md5(); ?> <!-- Create the unique key -->
    <input type="file" name="<?= $Key; ?>" /> <!-- Set the File input name to the unique key to be accessed via the server. -->
    <input type="submit" value="Upload" />
    <input type="submit" name="Cancel[<?= $Key; ?>]" value="Cancel" /> <!-- Set the Cancel submit name to include the unique key to be accessed when clicking Cancel -->
</form> 
```

以上是表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:27:15.430

在插入语句之后，获取插入的 id：`mysql_insert_id();`

按下取消按钮时，您可以删除插入 id 的行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:39:50.860

从[这篇](https://stackoverflow.com/questions/3654174/how-to-cancel-a-file-upload)文章中，单击取消按钮更改您的 iframe src 应该重置发布的数据，即使表单提交`$_FILES['fileImage']['error']`也应该设置如果带有文件上传的表单提交被重置（只是一个猜测），我自己没有尝试过但是我想这是一个值得尝试的选择。

否则，如果整个表单只有文件上传字段，您可以制作取消按钮，`input type="reset"`这应该会通过文件上传中断表单提交，从而阻止插入操作。

# iphone - 从 iphone 的核心数据中删除对象时应用程序崩溃

> ID：10648366
> 
> 赞同：1
> 
> 时间：2012-05-18T07:22:35.143
> 
> 标签：iphone, ios, xcode, core-data

我已经用服务器中的一些数据填充了一个表视图并将其保存到核心数据中。现在，当用户单击表视图中的删除选项时，我必须从核心数据中删除对象。我试过的是这样的：`

```
-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath   
{
    NSError *error; 
    [[Server serverInfo].context deleteObject:[self.couponList objectAtIndex:indexPath.row]];
    if(![ [Server serverInfo].context  save:&error]) {
        // Handle error
        NSLog(@"Unresolved error series %@, %@", error, [error userInfo]);
    }
    [self.couponList removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                     withRowAnimation:UITableViewRowAnimationFade];
    if ([self.couponList count]==0) {
        [self.table setEditing:NO animated:YES];
        [self.editBt setStyle:UIBarButtonItemStyleBordered];
    }

} 
```

` 但它给出了一个异常并崩溃。这是我在日志中得到的：“由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'NSManagedObjectContext 无法删除其他上下文中的对象”。'任何人都可以解决这个问题吗？谢谢进步

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:25:36.660

您必须创建一些管理对象上下文、获取请求，然后使用某些谓词删除对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:01:12.920

显然您正在使用多个托管对象上下文。这由您的错误消息指示。确保您只使用一个托管对象上下文，即没有使用不同的后台任务。

您将表格视图的数据保存在单独的数组中。这可能是另一个问题。处理核心数据和表视图的正确方法是使用`NSFetchedResultsController`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:21:41.477

同意蒙迪。

最重要的是，如果您需要许多 managedObjectContext 实例，请不要创建那么多，而是使用 NSManagedObjectContext 的锁定和解锁功能来启用多线程，而不会出现对象故障和无效问题。

***编辑***

也许您可以尝试在 AppDelegate 中仅创建一个 NSManagedObjectContext 并从您需要使用它们的控制器中调用相同的 managedObjectContext 。这与锁定和解锁方法一起解决了我的多线程和对象失效问题。

希望这可以帮助。

# javascript - JavaScript中的数字是不可变的吗？

> ID：10648367
> 
> 赞同：7
> 
> 时间：2012-05-18T07:22:36.417
> 
> 标签：javascript

> **可能重复：**
> [javascript 数字 - 不可变](https://stackoverflow.com/questions/8248568/javascript-numbers-immutable)

我阅读了 Douglas Crockford 的书 JavaScript: the Good Parts。它说 JavaScript 中的数字是不可变的。但是 JavaScript 中的数字是按值复制的，我们可以使用运算符 ++ 来更改值。那么为什么说它是不可变的呢？此外，如果它是不可变的，为什么数字是按值复制的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T07:25:43.690

它们是不可变的，因为它们是按值复制的。

当你这样做

```
var x = 4;
x += 1; 
```

你没有把 number`4`改成 number `5`。您已将存储在变量中的值`x`从`4`更改为`5`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:28:19.430

当你修改一个对象的成员时，你修改了它的内容。变量（即引用）的值保持不变。这是可变的，

当您声明一个字符串时，它有一个值，但是当您更改该值时，实际上会创建一个新字符串。这意味着它是不可变的。

数字也是如此。您不能将 3 更改为 4。A 3 始终是 3，而不是其他任何东西。因此，当您将变量分配给另一个数字时，您是在内存中创建一个新数字，而不是将某个变量指向的某些内存的内容分配给不同的值。

# linux - “ulimit”命令的输出和文件“/etc/security/limits.conf”的内容有什么区别？

> ID：10648371
> 
> 赞同：1
> 
> 时间：2012-05-18T07:22:41.373
> 
> 标签：linux, shell

我完全被 Linux 中打开文件描述符的限制弄糊涂了。

他们哪个值是正确的？

`ulimit -n`======> 65535

但 `vim /etc/security/limits.conf`

*   软文件 50000
*   硬文件 90000

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:50:03.683

The limits applied in `/etc/security/limits.conf` are applied by the limits authentication module at login if it's part of the PAM configuration. Then the shell gets invoked which can apply it's own limits to the shell.

If you're asking which one is in effect, then it's the result from the `ulimit` call. if it's not invoked with the `-H` option, then it displays the soft limit.

The idea behind the `limits.conf` settings is to have a global place to apply limits for, for example, remote logins

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:49:50.557

Limits for things like file descriptors can be set at the user level, or on a system wide level. `/etc/security/limits.conf` is where you can set user level limits, which might be different limits for each user, or just defaults that apply to all users. The example you show has a **soft** (~warning) level limit of 50000, but a **hard** (absolute maximum) limit of 90000.

However, a system limit of 65535 might be in place, which would take precedence over the user limit. I think system limits are set in `/etc/sysctl.conf`, if my memory serves correctly. You might check there to see if you're being limited by the system.

Also, the `ulimit` command can take switches to specifically show the soft (-Sn) and hard (-Hn) limits for file descriptors.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:29:50.040

我认为这个conf被系统中的所有应用程序使用。如果您确实想更改一个特定的应用程序，您可以尝试 setrlimit() 或 getrlimt()。man doc 剂量解释了一切。

# javascript - 让它成为 100%

> ID：10648374
> 
> 赞同：0
> 
> 时间：2012-05-18T07:22:49.173
> 
> 标签：javascript, jquery, arrays

我有 3 个下拉框，其中有 10 到 100 的值。我希望用户从所有下拉框中选择 100 的累积值。这意味着，如果我从第一个下拉框中选择 20，则下一个 2 下拉列表应该留下选择总计 100 的选项

到目前为止我所做的是在这里：在这里[检查（JS FIDDLE）](http://jsfiddle.net/rzBej/26/)

**HTML**

```
<select id="foreign" class="me">
    <option value="">Foreign Policy</option>
    <option value="10">10%</option>
    <option value="20">20%</option>
    <option value="30">30%</option>
    <option value="40">40%</option>
    <option value="50">50%</option>
    <option value="60">60%</option>
    <option value="70">70%</option>
    <option value="80">80%</option>
    <option value="90">90%</option>
    <option value="100">100%</option>
</select>
<select id="economy" class="me">
    <option value="">Economy Policy</option>
    <option value="10">10%</option>
    <option value="20">20%</option>
    <option value="30">30%</option>
    <option value="40">40%</option>
    <option value="50">50%</option>
    <option value="60">60%</option>
    <option value="70">70%</option>
    <option value="80">80%</option>
    <option value="90">90%</option>
    <option value="100">100%</option>
</select>
<select id="social" class="me">
    <option value="">Social Policy</option>
    <option value="10">10%</option>
    <option value="20">20%</option>
    <option value="30">30%</option>
    <option value="40">40%</option>
    <option value="50">50%</option>
    <option value="60">60%</option>
    <option value="70">70%</option>
    <option value="80">80%</option>
    <option value="90">90%</option>
    <option value="100">100%</option>
</select>
<br />

<span id="message"></span> 
```

**JavaScript**

```
/*var total = new Array();
$('#foreign option').each(function() {
    total.push($(this).val());
});

console.log(total);*/

var total = 100;
var ids = ['foreign', 'social', 'economy'];
var current_selected;

$('.me').change(function() {
    current_selected = $(this).attr('id');
    var socval = $('#' + current_selected + ' option:selected').val();
    total = total - socval;

    if ($.inArray($(this).attr('id'), ids) > -1) {
        ids.splice($.inArray($(this).attr('id'), ids), 1);

    }

    for (var i = 0; i < ids.length; i++) {

        $('#' + ids[i] + ' option').each(function() {

            if ($(this).val() >= total) {

                    $(this).attr('disabled', true);

            } else {
                $(this).attr('disabled', false);
            }

        });

    }

    if (total <= 0) {
        total = 100;
    }
    console.log(total);

    ids.push(current_selected);

}); 
```

它几乎可以正常工作，但有一些小故障。

**更新** 我想我解决了。

[解决了小提琴](http://jsfiddle.net/rzBej/61/)

谢谢谁帮忙。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:28:05.770

改变：

`if ($(this).val() >= total) {`

至

`if ($(this).val() > total) {`

解决了最多只能选择90%的问题

[工作样本](http://jsfiddle.net/rzBej/27/)

**更新**

关于更改值，我可能会采取前瞻性的方法并重置前向选择的值。就像是：

```
var selectIds = ['first', 'second', 'third']

$('select').change(function(){
var currentIndex = $.inArray($(this).attr('id'), selectIds);

for(var i = currentIndex + 1; i < selectIds.length; i++)
{
    $('#' + selectIds[i]).val("0");
}

}); 
```

这基本上会重置链中比当前使用的选择框更靠前的选择项的值。

[工作示例](http://jsfiddle.net/SQefz/)

在进行禁用时，您还需要向前看。您应该只禁用选择列表中的项目，从当前选择开始在链的下方。第一个选择列表应该始终能够选择任何值，以下选择基于该值进行过滤。这与上述方法非常吻合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:58:24.930

我做了另一个版本的代码，并修复了错误

[http://jsfiddle.net/rzBej/62/](http://jsfiddle.net/rzBej/62/)

```
$('.me').change(function() {
    var totalSoFar = 0;
    $('.me').each(function() {
        totalSoFar += +$(this).val();
    });

    var tmp = 100 - totalSoFar;
    $('.me').each(function() {
        var $this = $(this);
        $this.find('option').each(function() {
            $this.prop('disabled', $this.attr('value') > tmp);
        });
    })
});​ 
```

# spring - spring jersey jackson - StdDeserializer 类未找到异常

> ID：10648375
> 
> 赞同：0
> 
> 时间：2012-05-18T07:23:01.060
> 
> 标签：spring, jersey, jackson

我正在尝试使我的 spring-hibernate 项目也可用于我的球衣休息服务。但是，即使我不确定是否值得一提，我认为我使用 maven 进行的依赖管理发生了以下异常。在这种情况下，奇怪的是我只在第一次请求我的休息服务时才得到这个例外。第二个和进一步的请求只是我预期的响应。

最后一件事，我在球衣之外添加了杰克逊，因为利用杰克逊以保持一致性（当响应包括列表，并且列表有1个元素时，只有球衣会导致一些不一致，但杰克逊没问题）

如果您需要我分享我的 pom，请告诉我。谢谢。

```
java.lang.ClassNotFoundException: org.codehaus.jackson.map.deser.std.StdDeserializer
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2836)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1160)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1668)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
at java.lang.Class.getConstructor0(Class.java:2699)
at java.lang.Class.newInstance0(Class.java:326)
at java.lang.Class.newInstance(Class.java:308)
at org.codehaus.jackson.jaxrs.MapperConfigurator._resolveIntrospector(MapperConfigurator.java:173)
at org.codehaus.jackson.jaxrs.MapperConfigurator._resolveIntrospectors(MapperConfigurator.java:146)
at org.codehaus.jackson.jaxrs.MapperConfigurator._setAnnotations(MapperConfigurator.java:133)
at org.codehaus.jackson.jaxrs.MapperConfigurator.getDefaultMapper(MapperConfigurator.java:70)
at org.codehaus.jackson.jaxrs.JacksonJsonProvider.locateMapper(JacksonJsonProvider.java:648)
at org.codehaus.jackson.jaxrs.JacksonJsonProvider.writeTo(JacksonJsonProvider.java:500)
at com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.writeTo(JacksonProviderProxy.java:160)
at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:699)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:55:36.043

为了解决这个问题，我在我的 spring 项目中添加了以下类。

```
@Provider
@Component
public class JSONProvider extends JacksonJsonProvider 
{
private ObjectMapper mapper = new ObjectMapper();

public JSONProvider() {
    /** without setting this, StdDeserializer not found exception occurs */
    AnnotationIntrospector primary = new JaxbAnnotationIntrospector();
    AnnotationIntrospector secondary = new JacksonAnnotationIntrospector();
    AnnotationIntrospector pair = new AnnotationIntrospector.Pair(primary, secondary);
    mapper.setAnnotationIntrospector(pair);
    mapper.configure(Feature.INDENT_OUTPUT, true);
    setMapper(mapper);
} 
```

}

# iphone - 如何拖放 UIButton

> ID：10648378
> 
> 赞同：1
> 
> 时间：2012-05-18T07:23:26.097
> 
> 标签：iphone, ipad, drag-and-drop, uibutton

`UIbutton`我想像iPhone 主屏幕图标一样拖放到我的应用程序中。

我可以这样做，但是在单击按钮时它应该执行一个操作。但是在拖动按钮时也会调用此操作。我正在使用`UIControlEventTouchDown`触摸动作和`UIControlEventTouchDragInside`拖动按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:37:11.387

也许你可以使用 UIControlEventTouchUpInside 来代替这个动作。在 UIControlEventTouchDragInside 中，您可以将名为“dragPerformed”的共享变量更改为 YES，然后，如果为 NO，则在 UIControlEventTouchUpInside 中执行单击按钮操作，如果是 - 不执行任何操作（即拖动）并将其变为 NO

# iphone - 将 UIView 的引用传递给下一个 UIViewController

> ID：10648381
> 
> 赞同：0
> 
> 时间：2012-05-18T07:23:30.547
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiviewcontroller

我有一个应用程序，我试图在导航转换期间将一个`UIScrollView`从一个传递到下一个。`UIViewController`我试图弄清楚我应该用哪些方法从它中删除`UIScrollView`它`superview`，然后将它附加到新的`UIViewController`.

我在第一个`NSLog`的`viewDiDisappear`/方法和第二个的/方法中做了一个，这是我得到的顺序：`viewWillDisappear``UIViewController``viewDidAppear``viewWillAppear``UIViewController`

```
viewWillDisappear
viewWillAppear
viewDidDisappear
viewDidAppear 
```

我的问题是，我是否可以期望这对于所有转换都保持一致，或者这些转换是否在不同的线程上运行并基于某些事物的加载时间，它们会有所不同吗？

编辑：撞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:36:32.113

好吧，要问自己的正确问题是：您的 viewController 何时可见/显示？

UIViewController A

UIViewController B

UIScrollView C

1：A:viewWillDisappear -> A可见，B不可见（C必须在A中）

2：B:viewWillAppear -> A可见，B不可见（C必须在A中）

2 到 3 过渡：A 和 B 都可见

3：A:viewDidDisappear -> A不可见，B可见（C必须在A中）

4：B:viewDidAppear -> A不可见，B可见（C必须在B中）

正如您所看到的，当两个视图控制器视图都可见时，您在过渡期间有一段时间，因此您不能只将 C 从 a 移动到 b，您可能会想到一种解决方法...

也许您可以对 A 进行屏幕截图并将其添加到所有对象的 A 中，然后将 C 移动到 B 并进行过渡

或者你可以在A中淡出C，进行过渡，然后在B中淡入C......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:31:29.437

实际上，当您尝试将视图添加为子视图并且它已经有一个超级视图时，它将在添加到新的超级视图之前从其原始超级视图中删除（根据文档：http: [//developer.apple.com /library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html) )...所以甚至不必像我想的那样担心这一点。

# javascript - 更改事件不起作用

> ID：10648383
> 
> 赞同：0
> 
> 时间：2012-05-18T07:23:54.633
> 
> 标签：javascript, jquery, html

由于 javascript 日历，to[0] 的值正在动态变化。在这段代码中，更改事件不起作用，我不知道......为什么会这样？？？jQuery代码是：

```
$(document).ready(function() {

  $("input[name='to[0]']").change( function() {
    var b1 = $("input[name='to[0]']").val();
    alert(b1);
  });
}); 
```

该字段的 HTML 为：

```
<td >
            <input type="text" size="12" name="to[0]" value="To" readonly="readonly" />
              <a class="datepicker" href="#"><img alt="Pick a date" src="js/date.gif" border="0" width="17" height="16" /></a>
</td> 
```

这是日历的 date.js 文件

```
 var datePickerDivID = "datepicker";
                        var iFrameDivID = "datepickeriframe";

                        var dayArrayShort = new Array('Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa');
                        var dayArrayMed = new Array('Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');
                        var dayArrayLong = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
                        var monthArrayShort = new Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');
                        var monthArrayMed = new Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');
                        var monthArrayLong = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December');

                        // these variables define the date formatting we're expecting and outputting.
                        // If you want to use a different format by default, change the defaultDateSeparator
                        // and defaultDateFormat variables either here or on your HTML page.
                        var defaultDateSeparator = "/";        // common values would be "/" or "."
                        var defaultDateFormat = "dMy"    // valid values are "mdy", "dmy", and "ymd"
                        var dateSeparator = defaultDateSeparator;
                        var dateFormat = defaultDateFormat;
                        function displayDatePicker(dateFieldName, displayBelowThisObject, dtFormat, dtSep)
                        {
                            var targetDateField = document.getElementsByName(dateFieldName).item(0);

                            // if we weren't told what node to display the datepicker beneath, just display it
                            // beneath the date field we're updating
                            if (!displayBelowThisObject)
                                displayBelowThisObject = targetDateField;

                            // if a date separator character was given, update the dateSeparator variable
                            if (dtSep)
                                dateSeparator = dtSep;
                            else
                                dateSeparator = defaultDateSeparator;

                            // if a date format was given, update the dateFormat variable
                            if (dtFormat)
                                dateFormat = dtFormat;
                            else
                                dateFormat = defaultDateFormat;

                            var x = displayBelowThisObject.offsetLeft;
                            var y = displayBelowThisObject.offsetTop + displayBelowThisObject.offsetHeight ;

                            // deal with elements inside tables and such
                            var parent = displayBelowThisObject;
                            while (parent.offsetParent) {
                                parent = parent.offsetParent;
                                x += parent.offsetLeft;
                                y += parent.offsetTop ;
                            }

                            drawDatePicker(targetDateField, x, y);
                        }

                        /**
                        Draw the datepicker object (which is just a table with calendar elements) at the
                        specified x and y coordinates, using the targetDateField object as the input tag
                        that will ultimately be populated with a date.

                        This function will normally be called by the displayDatePicker function.
                        */
                        function drawDatePicker(targetDateField, x, y)
                        {
                            var dt = getFieldDate(targetDateField.value );
                            // the datepicker table will be drawn inside of a <div> with an ID defined by the
                            // global datePickerDivID variable. If such a div doesn't yet exist on the HTML
                            // document we're working with, add one.
                            if (!document.getElementById(datePickerDivID)) {
                                // don't use innerHTML to update the body, because it can cause global variables
                                // that are currently pointing to objects on the page to have bad references
                                //document.body.innerHTML += "<div id='" + datePickerDivID + "' class='dpDiv'></div>";
                                var newNode = document.createElement("div");
                                newNode.setAttribute("id", datePickerDivID);
                                newNode.setAttribute("class", "dpDiv");
                                newNode.setAttribute("style", "visibility: hidden;");
                                document.body.appendChild(newNode);
                            }

                            // move the datepicker div to the proper x,y coordinate and toggle the visiblity
                            var pickerDiv = document.getElementById(datePickerDivID);
                            pickerDiv.style.position = "absolute";
                            pickerDiv.style.left = x + "px";
                            pickerDiv.style.top = y + "px";
                            pickerDiv.style.visibility = (pickerDiv.style.visibility == "visible" ? "hidden" : "visible");
                            pickerDiv.style.display = (pickerDiv.style.display == "block" ? "none" : "block");
                            pickerDiv.style.zIndex = 10000;

                            // draw the datepicker table
                            refreshDatePicker(targetDateField.name, dt.getFullYear(), dt.getMonth(), dt.getDate());
                        }

                        /**
                        This is the function that actually draws the datepicker calendar.
                        */
                        function refreshDatePicker(dateFieldName, year, month, day)
                        {
                            // if no arguments are passed, use today's date; otherwise, month and year
                            // are required (if a day is passed, it will be highlighted later)
                            var thisDay = new Date();

                            if ((month >= 0) && (year > 0)) {
                                thisDay = new Date(year, month, 1);
                            } else {
                                day = thisDay.getDate();
                                thisDay.setDate(1);
                            }

                            // the calendar will be drawn as a table
                            // you can customize the table elements with a global CSS style sheet,
                            // or by hardcoding style and formatting elements below
                            var crlf = "\r\n";
                            var TABLE = "<table cols=7 class='dpTable'>" + crlf;
                            var xTABLE = "</table>" + crlf;
                            var TR = "<tr class='dpTR'>";
                            var TR_title = "<tr class='dpTitleTR'>";
                            var TR_days = "<tr class='dpDayTR'>";
                            var TR_todaybutton = "<tr class='dpTodayButtonTR'>";
                            var xTR = "</tr>" + crlf;
                            var TD = "<td class='dpTD' onMouseOut='this.className=\"dpTD\";' onMouseOver=' this.className=\"dpTDHover\";' ";    // leave this tag open, because we'll be adding an onClick event
                            var TD_title = "<td colspan=5 class='dpTitleTD'>";
                            var TD_buttons = "<td class='dpButtonTD'>";
                            var TD_todaybutton = "<td colspan=7 class='dpTodayButtonTD'>";
                            var TD_days = "<td class='dpDayTD'>";
                            var TD_selected = "<td class='dpDayHighlightTD' onMouseOut='this.className=\"dpDayHighlightTD\";' onMouseOver='this.className=\"dpTDHover\";' ";    // leave this tag open, because we'll be adding an onClick event
                            var xTD = "</td>" + crlf;
                            var DIV_title = "<div class='dpTitleText'>";
                            var DIV_selected = "<div class='dpDayHighlight'>";
                            var xDIV = "</div>";

                            // start generating the code for the calendar table
                            var html = TABLE;

                            // this is the title bar, which displays the month and the buttons to
                            // go back to a previous month or forward to the next month
                            html += TR_title;
                            html += TD_buttons + getButtonCode(dateFieldName, thisDay, -1, "&lt;") + xTD;
                            html += TD_title + DIV_title + monthArrayLong[ thisDay.getMonth()] + " " + thisDay.getFullYear() + xDIV + xTD;
                            html += TD_buttons + getButtonCode(dateFieldName, thisDay, 1, "&gt;") + xTD;
                            html += xTR;

                            // this is the row that indicates which day of the week we're on
                            html += TR_days;
                            for(i = 0; i < dayArrayShort.length; i++)
                                html += TD_days + dayArrayShort[i] + xTD;
                            html += xTR;

                            // now we'll start populating the table with days of the month
                            html += TR;

                            // first, the leading blanks
                            for (i = 0; i < thisDay.getDay(); i++)
                                html += TD + "&nbsp;" + xTD;

                            // now, the days of the month
                            do {
                                dayNum = thisDay.getDate();
                                TD_onclick = " onclick=\"updateDateField('" + dateFieldName + "', '" + getDateString(thisDay) + "');\">";

                                if (dayNum == day)
                                    html += TD_selected + TD_onclick + DIV_selected + dayNum + xDIV + xTD;
                                else
                                    html += TD + TD_onclick + dayNum + xTD;

                                // if this is a Saturday, start a new row
                                if (thisDay.getDay() == 6)
                                    html += xTR + TR;

                                // increment the day
                                thisDay.setDate(thisDay.getDate() + 1);
                            } while (thisDay.getDate() > 1)

                            // fill in any trailing blanks
                            if (thisDay.getDay() > 0) {
                                for (i = 6; i > thisDay.getDay(); i--)
                                    html += TD + "&nbsp;" + xTD;
                            }
                            html += xTR;

                            // add a button to allow the user to easily return to today, or close the calendar
                            var today = new Date();
                            var todayString = "Today is " + dayArrayMed[today.getDay()] + ", " + monthArrayMed[ today.getMonth()] + " " + today.getDate();
                            html += TR_todaybutton + TD_todaybutton;
                            html += "<button class='dpTodayButton' onClick='refreshDatePicker(\"" + dateFieldName + "\");'>this month</button> ";
                        //  html += "<button class='dpTodayButton' onClick='updateDateField(\"" + dateFieldName + "\");'>close</button>";
                            html += xTD + xTR;

                            // and finally, close the table
                            html += xTABLE;

                            document.getElementById(datePickerDivID).innerHTML = html;
                            // add an "iFrame shim" to allow the datepicker to display above selection lists
                            adjustiFrame();
                        }

                        /**
                        Convenience function for writing the code for the buttons that bring us back or forward
                        a month.
                        */
                        function getButtonCode(dateFieldName, dateVal, adjust, label)
                        {
                            var newMonth = (dateVal.getMonth () + adjust) % 12;
                            var newYear = dateVal.getFullYear() + parseInt((dateVal.getMonth() + adjust) / 12);
                            if (newMonth < 0) {
                                newMonth += 12;
                                newYear += -1;
                            }

                            return "<button class='dpButton' onClick='refreshDatePicker(\"" + dateFieldName + "\", " + newYear + ", " + newMonth + ");'>" + label + "</button>";
                        }

                        /**
                        Convert a JavaScript Date object to a string, based on the dateFormat and dateSeparator
                        variables at the beginning of this script library.
                        */
                        function getDateString(dateVal)
                        {//alert(dateVal );
                            var dayString = "00" + dateVal.getDate();
                            var monthString = "00" + (dateVal.getMonth()+1);
                            dayString = dayString.substring(dayString.length - 2);
                            monthString = monthString.substring(monthString.length - 2);

                            switch (dateFormat) {
                                case "dmy" :
                                    return dayString + dateSeparator + monthString + dateSeparator + dateVal.getFullYear();
                                case "ymd" :
                                    return dateVal.getFullYear() + dateSeparator + monthString + dateSeparator + dayString;
                                case "mdy" :
                             return dateVal.getFullYear() + dateSeparator + monthString + dateSeparator + dayString;
                                default :
                                    return monthString + dateSeparator + dayString + dateSeparator + dateVal.getFullYear();
                            }
                        }

                        /**
                        Convert a string to a JavaScript Date object.
                        */
                        function getFieldDate(dateString)
                        {
                            var dateVal;
                            var dArray;
                            var d, m, y;

                            try {
                                dArray = splitDateString(dateString);
                                if (dArray) {
                                    switch (dateFormat) {
                                        case "dmy" :
                                            d = parseInt(dArray[0], 10);
                                            m = parseInt(dArray[1], 10) - 1;
                                            y = parseInt(dArray[2], 10);
                                            break;
                                        case "ymd" :
                                            d = parseInt(dArray[2], 10);
                                            m = parseInt(dArray[1], 10) - 1;
                                            y = parseInt(dArray[0], 10);
                                            break;
                                        case "mdy" :
                                        default :
                                            d = parseInt(dArray[1], 10);
                                            m = parseInt(dArray[0], 10) - 1;
                                            y = parseInt(dArray[2], 10);
                                            break;
                                    }
                                    dateVal = new Date(y, m, d);
                                } else if (dateString) {
                                    dateVal = new Date(dateString);
                                } else {
                                    dateVal = new Date();
                                }
                            } catch(e) {
                                dateVal = new Date();
                            }

                            return dateVal;
                        }

                        /**
                        Try to split a date string into an array of elements, using common date separators.
                        If the date is split, an array is returned; otherwise, we just return false.
                        */
                        function splitDateString(dateString)
                        {
                            var dArray;
                            if (dateString.indexOf("/") >= 0)
                                dArray = dateString.split("/");
                            else if (dateString.indexOf(".") >= 0)
                                dArray = dateString.split(".");
                            else if (dateString.indexOf("-") >= 0)
                                dArray = dateString.split("-");
                            else if (dateString.indexOf("\\") >= 0)
                                dArray = dateString.split("\\");
                            else
                                dArray = false;

                            return dArray;
                        }

                        /**
                        Update the field with the given dateFieldName with the dateString that has been passed,
                        and hide the datepicker. If no dateString is passed, just close the datepicker without
                        changing the field value.

                        Also, if the page developer has defined a function called datePickerClosed anywhere on
                        the page or in an imported library, we will attempt to run that function with the updated
                        field as a parameter. This can be used for such things as date validation, setting default
                        values for related fields, etc. For example, you might have a function like this to validate
                        a start date field:
                        */
                        function datePickerClosed(dateField)
                        {
                            var dateObj = getFieldDate(dateField.value);
                            var today = new Date();
                            today = new Date(today.getFullYear(), today.getMonth(), today.getDate());

                            if (dateField.name == "StartDate") {
                                if (dateObj < today) {
                                    // if the date is before today, alert the user and display the datepicker again
                                    alert("Please enter a date that is today or later");
                                    dateField.value = "";
                                    document.getElementById(datePickerDivID).style.visibility = "visible";
                                    adjustiFrame();
                                } else {
                                    // if the date is okay, set the EndDate field to 7 days after the StartDate
                                    dateObj.setTime(dateObj.getTime() + (7 * 24 * 60 * 60 * 1000));
                                    var endDateField = document.getElementsByName ("EndDate").item(0);
                                    endDateField.value = getDateString(dateObj);
                                }
                            }
                        }

                        function updateDateField(dateFieldName, dateString)
                        {//alert('hi');
                            var x=dateString.split('-');
                            var month;
                            if(x[1]==01)
                            {
                             month=monthArrayMed[0]; 
                            }
                            else if(x[1]==02)
                            {
                             month=monthArrayMed[1]; 
                            }
                                else if(x[1]==03)
                            {
                             month=monthArrayMed[2]; 
                            }
                                else if(x[1]==04)
                            {
                             month=monthArrayMed[3]; 
                            }
                                else if(x[1]==05)
                            {
                             month=monthArrayMed[4]; 
                            }
                                else if(x[1]==06)
                            {
                             month=monthArrayMed[5]; 
                            }
                                else if(x[1]==07)
                            {
                             month=monthArrayMed[6]; 
                            }
                                else if(x[1]==08)
                            {
                             month=monthArrayMed[7]; 
                            }
                                else if(x[1]==09)
                            {
                             month=monthArrayMed[8]; 
                            }
                                else if(x[1]==10)
                            {
                             month=monthArrayMed[9]; 
                            }
                                else if(x[1]==11)
                            {
                             month=monthArrayMed[10]; 
                            }
                                else if(x[1]==12)
                            {
                             month=monthArrayMed[11]; 
                            }
                            dateString=x[0]+'-'+month+'-'+x[2];
                            var targetDateField = document.getElementsByName (dateFieldName).item(0);
                            if (dateString)
                                targetDateField.value = dateString;

                            var pickerDiv = document.getElementById(datePickerDivID);
                            pickerDiv.style.visibility = "hidden";
                            pickerDiv.style.display = "none";

                            adjustiFrame();
                            targetDateField.focus();
                            // after the datepicker has closed, optionally run a user-defined function called
                            // datePickerClosed, passing the field that was just updated as a parameter
                            // (note that this will only run if the user actually selected a date from the datepicker)
                         if ((dateString) && (typeof(datePickerClosed) == "function"))
                         {
                                datePickerClosed(targetDateField);
                            //alert(typeof(datePickerClosed));
                         }
                            //alert(typeof(datePickerClosed));
                        }

                        function adjustiFrame(pickerDiv, iFrameDiv)
                        {
                            // we know that Opera doesn't like something about this, so if we
                            // think we're using Opera, don't even try
                            var is_opera = (navigator.userAgent.toLowerCase().indexOf("opera") != -1);
                            if (is_opera)
                                return;

                            // put a try/catch block around the whole thing, just in case
                            try {
                                if (!document.getElementById(iFrameDivID)) {
                                    // don't use innerHTML to update the body, because it can cause global variables
                                    // that are currently pointing to objects on the page to have bad references
                                    //document.body.innerHTML += "<iframe id='" + iFrameDivID + "' src='javascript:false;' scrolling='no' frameborder='0'>";
                                    var newNode = document.createElement("iFrame");
                                    newNode.setAttribute("id", iFrameDivID);
                                    newNode.setAttribute("src", "javascript:false;");
                                    newNode.setAttribute("scrolling", "no");
                                    newNode.setAttribute ("frameborder", "0");
                                    document.body.appendChild(newNode);
                                }

                                if (!pickerDiv)
                                    pickerDiv = document.getElementById(datePickerDivID);
                                if (!iFrameDiv)
                                    iFrameDiv = document.getElementById(iFrameDivID);

                                try {
                                    iFrameDiv.style.position = "absolute";
                                    iFrameDiv.style.width = pickerDiv.offsetWidth;
                                    iFrameDiv.style.height = pickerDiv.offsetHeight ;
                                    iFrameDiv.style.top = pickerDiv.style.top;
                                    iFrameDiv.style.left = pickerDiv.style.left;
                                    iFrameDiv.style.zIndex = pickerDiv.style.zIndex - 1;
                                    iFrameDiv.style.visibility = pickerDiv.style.visibility ;
                                    iFrameDiv.style.display = pickerDiv.style.display;
                                } catch(e) {
                                }

                            } catch (ee) {
                            }

                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:33:55.580

使用此代码而不是您的代码：

```
$("input:text[name=to[0]]").blur( function() {
    var b1 = $(this).val();
    alert(b1);
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:37:05.087

如[http://jsfiddle.net/RxsL8/1/](http://jsfiddle.net/RxsL8/1/) `change`所示，如果输入的值被动态更改（而不是通过显式用户操作），则永远不会为输入触发事件

因此您可能需要使用 datepicker 插件提供的一些内部函数/回调，或者添加一些代码以在选择日期时运行

* * *

编辑后：

您的输入已更新`updateDateField`功能，就在这里

```
if (dateString)
     targetDateField.value = dateString; 
```

所以在这里添加一个回调函数

# objective-c - UIPopOver 正在不必要地消失

> ID：10648384
> 
> 赞同：1
> 
> 时间：2012-05-18T07:24:13.420
> 
> 标签：objective-c, uipopovercontroller

我已经在课堂上实现了 UIPopOver 来显示某些选项，在模拟器中它工作正常，但在设备中它正在消失，即使我没有点击任何其他区域。有谁知道为什么 popover 在设备中表现得很奇怪？我怎么能克服这个？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:14:28.497

请提供您用于显示控制器的代码。一个疯狂的猜测是您的控制器没有正确保留，可能会被释放，或者它的父控制器正在被释放。

您还应该检查您的模拟器运行的 ios 版本是否与您的设备相同。

如果没有更多细节，就无法提供更多帮助。

# macos - 如何在没有 Lion Server 的客户端 Mac 上永久设置托管首选项？

> ID：10648386
> 
> 赞同：2
> 
> 时间：2012-05-18T07:24:16.940
> 
> 标签：macos, google-chrome, incognito-mode

我希望将以下 plist 放入我的 Managed Preferences 文件夹中：/Library/Managed Preferences/accountname/com.google.Chrome.plist

内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
   <key>IncognitoModeAvailability</key>
   <integer>1</integer>
</dict>
</plist> 
```

我有 sudo 权限来执行此操作。

但是当我注销时，托管首选项中的文件夹被删除。

有没有人如何使这个永久？

我想这样做以禁用 Chrome 中的隐身模式。

有没有人在Mac上试过这个？

# ios - iOS应用程序应用程序WillEnterForeground，它卡了一段时间

> ID：10648388
> 
> 赞同：9
> 
> 时间：2012-05-18T07:24:20.187
> 
> 标签：ios, uiapplicationdelegate, background-foreground

我添加此功能以在应用程序进入前台时发布通知：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [[NSNotificationCenter defaultCenter] postNotificationName: @"UIApplicationWillEnterForegroundNotification" object: nil];
} 
```

在我自己的课上：

```
- (void) handleEnterForeground: (NSNotification*) sender
{
    [self reloadTableData];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(handleEnterForeground:)
                                             name: @"UIApplicationWillEnterForegroundNotification"
                                           object: nil];
} 
```

但是 handleEnterForeground: 函数会调用两次，我不知道为什么。reloadTableData: 函数会调用远程 webService ，所以当应用进入前台时，会卡住一段时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T07:33:21.130

系统将自动调用该事件。它触发两次的原因是因为您再次手动触发它。

PS 最好使用变量名 UIApplicationWillEnterForeground，而不是 NSString 文字。

编辑：我现在意识到混乱来自这样一个事实，即您不知道这个偶数名称已经被使用了。作为对遇到此类问题的其他人的说明，最好在事件名称前加上项目前缀（即 XYZEventNotification）以避免冲突。

# sql-server - 需要帮助才能获得这样的 sql 查询输出

> ID：10648390
> 
> 赞同：-1
> 
> 时间：2012-05-18T07:24:21.600
> 
> 标签：sql-server

这是我的查询

```
select 
    dtfromdate, dttodate,
    (SELECT DATEDIFF(day, dtfromdate, dtTodate)) AS NumberOfDays,
    fltspl 
from dbo.tblHR_SpecialLeaveTransaction 
where
    nvrempcode = 'MCL1218' and nvrstatus = 1 
order by 
    dtfromdate 
```

结果 ：

```
dtfromdate              dttodate                NumberOfDays fltspl
----------------------- ----------------------- ------------ ----------------------
2012-05-01 00:00:00     2012-05-31 00:00:00     30           30 
```

另一个查询

```
select 
    dtfromdate, dtTodate,
    (SELECT DATEDIFF(day, dtfromdate, dtTodate) ) AS NumberOfDays,
    fltcl, fltsl, fltpl, fltcompoff, fltod, fltlop, 
    isnull(fltflexiL, 0) as fltflexiL  
from 
    tblhr_leavetransaction 
where 
    nvrempcode = 'MCL1218' and nvrstatus = 1 
order by 
    dtfromdate 
```

结果：

```
dtfromdate              dtTodate                NumberOfDays fltcl                  fltsl                  fltpl                  fltcompoff             fltod                  fltlop                 fltflexiL
----------------------- ----------------------- ------------ ---------------------- ---------------------- ---------------------- ---------------------- ---------------------- ---------------------- ----------------------
2011-01-14 00:00:00     2011-01-14 00:00:00     0            1                      0                      0                      0                      0                      0                      0
2011-01-17 00:00:00     2011-01-17 00:00:00     0            1                      0                      0                      0                      0                      0                      0
2011-01-25 00:00:00     2011-01-25 00:00:00     0            0                      0                      0                      0                      1                      0                      0
2011-04-01 00:00:00     2011-04-02 00:00:00     1            0                      0                      0                      0                      2                      0                      0
2011-05-14 00:00:00     2011-05-14 00:00:00     0            0                      0                      0                      0                      1                      0                      0
2011-05-16 00:00:00     2011-05-16 00:00:00     0            0                      0                      0                      1                      0                      0                      0
2011-05-18 00:00:00     2011-05-18 00:00:00     0            1                      0                      0                      0                      0                      0                      0
2011-05-19 00:00:00     2011-05-20 00:00:00     1            0                      2                      0                      0                      0                      0                      0
2011-05-21 00:00:00     2011-05-21 00:00:00     0            1                      0                      0                      0                      0                      0                      0
2011-05-23 00:00:00     2011-05-23 00:00:00     0            0                      0                      0                      1                      0                      0                      0 
```

我需要这样的输出，

```
dtfromdate              dtTodate                NumberOfDays fltcl                  fltsl                  fltpl                  fltcompoff             fltod                  fltlop                 fltflexiL                fltspl
----------------------- ----------------------- ------------ ---------------------- ---------------------- ---------------------- ---------------------- ---------------------- ---------------------- ----------------------  ----------
2011-01-14 00:00:00     2011-01-14 00:00:00     0            1                      0                      0                      0                      0                      0                      0                          0
2011-01-17 00:00:00     2011-01-17 00:00:00     0            1                      0                      0                      0                      0                      0                      0                          0
2011-01-25 00:00:00     2011-01-25 00:00:00     0            0                      0                      0                      0                      1                      0                      0                          0
2011-04-01 00:00:00     2011-04-02 00:00:00     1            0                      0                      0                      0                      2                      0                      0                          0
2011-05-14 00:00:00     2011-05-14 00:00:00     0            0                      0                      0                      0                      1                      0                      0                          0
2011-05-16 00:00:00     2011-05-16 00:00:00     0            0                      0                      0                      1                      0                      0                      0                          0
2011-05-18 00:00:00     2011-05-18 00:00:00     0            1                      0                      0                      0                      0                      0                      0                          0
2011-05-19 00:00:00     2011-05-20 00:00:00     1            0                      2                      0                      0                      0                      0                      0                          0
2011-05-21 00:00:00     2011-05-21 00:00:00     0            1                      0                      0                      0                      0                      0                      0                          0
2011-05-23 00:00:00     2011-05-23 00:00:00     0            0                      0                      0                      1                      0                      0                      0                          0
2012-05-01 00:00:00     2012-05-31 00:00:00     30           0                      0                      0                      0                      0                      0                      0                          30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:38:22.187

看起来您只想将`union`两个查询放在一起。为此，两个查询都必须包含所有列，只需根据需要将它们设置为空/零。另一个小困难是你不能`order by`在联合时使用，除非你选择整个东西。

没有`order by`：

```
select 
    dtfromdate, dttodate,
    (SELECT DATEDIFF(day, dtfromdate, dtTodate)) AS NumberOfDays,
    0 as fltcl,
    0 as fltsl,
    0 as fltpl,
    0 as fltcompoff,
    0 as fltod,
    0 as fltlop,
    0 as fltflexiL,
    fltspl 
from dbo.tblHR_SpecialLeaveTransaction 
where
    nvrempcode = 'MCL1218' and nvrstatus = 1 
union
select 
    dtfromdate, dtTodate,
    (SELECT DATEDIFF(day, dtfromdate, dtTodate) ) AS NumberOfDays,
    fltcl, fltsl, fltpl, fltcompoff, fltod, fltlop, 
    isnull(fltflexiL, 0) as fltflexiL  ,
    0 as fltspl 
from 
    tblhr_leavetransaction 
where 
    nvrempcode = 'MCL1218' and nvrstatus = 1 
```

如果您需要特定订单：

```
SELECT * FROM
(
    select 
        dtfromdate, dttodate,
        (SELECT DATEDIFF(day, dtfromdate, dtTodate)) AS NumberOfDays,
        0 as fltcl,
        0 as fltsl,
        0 as fltpl,
        0 as fltcompoff,
        0 as fltod,
        0 as fltlop,
        0 as fltflexiL,
        fltspl 
    from dbo.tblHR_SpecialLeaveTransaction 
    where
        nvrempcode = 'MCL1218' and nvrstatus = 1 
    union
    select 
        dtfromdate, dtTodate,
        (SELECT DATEDIFF(day, dtfromdate, dtTodate) ) AS NumberOfDays,
        fltcl, fltsl, fltpl, fltcompoff, fltod, fltlop, 
        isnull(fltflexiL, 0) as fltflexiL  ,
        0 as fltspl 
    from 
        tblhr_leavetransaction 
    where 
        nvrempcode = 'MCL1218' and nvrstatus = 1 
) src
order by dtfromdate 
```

# android - 如何安排电话活动？

> ID：10648393
> 
> 赞同：1
> 
> 时间：2012-05-18T07:24:29.080
> 
> 标签：android, android-layout

我想在一个安卓应用程序上安排一个电话。

我目前有一个用于拨打电话的按钮的 onClick 事件，我也有时间和日期选择器，并且希望能够使用它们来安排拨打电话的时间。

任何帮助，将不胜感激。

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <TextView android:id="@+id/textView1" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="Enter MSISDN Below" android:textAppearance="?android:attr/textAppearanceLarge"/>
    <EditText android:id="@+id/msisdn" android:layout_width="fill_parent" android:layout_height="wrap_content" android:ems="10" android:inputType="phone">
        <requestFocus />
    </EditText>
    <TextView android:id="@+id/textView2" android:layout_width="344dp" android:layout_height="wrap_content" android:text="Enter Schedule Time Below" android:textAppearance="?android:attr/textAppearanceLarge"/>
    <TimePicker android:id="@+id/timePicker1" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
    <Button android:id="@+id/button1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Set Call" android:onClick="makeCall"/>

</LinearLayout> 
```

****** *** ** *** ******班级******* *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ********

 *****```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;

public class CallAppActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void makeCall(View view) {
          Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel: 123456789"));
            startActivity(callIntent);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:30:33.890

别担心，我想通了。如果有人感兴趣，我使用 Handler 来延迟意图操作调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-03T13:40:55.470

```
public class myAlarm extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    Intent myIntent=new Intent(Intent.ACTION_CALL);
    String place = intent.getExtras().getString("place");
    myIntent.setData(Uri.parse("tel:"+place));
    myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(myIntent);

} 
```

}*****

# android - Android 蓝牙设备定位器

> ID：10648395
> 
> 赞同：2
> 
> 时间：2012-05-18T07:24:35.407
> 
> 标签：android, map, bluetooth

如何定位使用我的应用程序的其他蓝牙设备并在地图上显示它们，包括范围、确切位置，如雷达地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:47:40.087

Possible design idea :

You want to implement this with the help of a webservice.

Make your app **report** its being used(may be you want to report at regular intervals and shutdown of app) along with location information (probably you want to use GPS, have a look at this : [Obtaining User Location](http://developer.android.com/guide/topics/location/obtaining-user-location.html)).

Make you *radar app* to read those information and prepare the map.

Cons :

1.  Availability of GPS will affect your application
2.  Accuracy is limited.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:33:21.547

您可能这样做的唯一方法是，如果您的蓝牙从设备能够单独跟踪和报告其位置（例如 GPS）。

否则根本不可能。Android 设备中的蓝牙无线电和天线将没有测向功能。

# opencv - 如何建立一个条件来检查两个框架在openCV中有巨大的差异？

> ID：10648396
> 
> 赞同：0
> 
> 时间：2012-05-18T07:24:39.900
> 
> 标签：opencv

我是openCV的新手。我目前正在开发一个应用程序来使用 openCV 进行视频处理。当两帧有巨大差异时，我需要一个触发器来启用我的其他工作。我知道有一个名为**cvAbsDiff**的函数，但它只创建一个差异图像。但我需要的是这样的条件`|frame_{i}-frame_{i-1}| > TH`。我怎样才能用**openCV做到这一点？**非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:03:19.897

如果您获得两个不同帧的差异图像，则可以计算像素值的总和并应用您的阈值。

# magento - 扩展Model取信用卡验证码值为Null

> ID：10648397
> 
> 赞同：1
> 
> 时间：2012-05-18T07:24:46.483
> 
> 标签：magento

我在扩展和发展现金流期间 获取信用卡表格的信息时出现问题，但读取不到信用卡验证号（CVN）

例如，类

```
class Xxx_Yzz_Model_Method_Zcc extends Mage_Payment_Model_Method_Abstract
{
    public function setParams ()
    {
        ....
        $ CcCid = $ this-> getInfoInstance () -> getCcCid ();
        ....
    }
} 
```

我在assignData覆盖内引用了Mage_Payment_Model_Method_Cc，但徒劳无功

```
public function assignData ($ data)
{
    if (! ($ data instanceof Varien_Object)) {
        $ data = new Varien_Object ($ data);
    }
    $ info = $ this-> getInfoInstance ();
    $ info-> setCcType ($ data-> getCcType ())
        -> setCcOwner ($ data-> getCcOwner ())
        -> setCcLast4 (substr ($ data-> getCcNumber (), -4))
        -> setCcNumber ($ data-> getCcNumber ())
        -> setCcCid ($ data-> getCcCid ())
        -> setCcExpMonth ($ data-> getCcExpMonth ())
        -> setCcExpYear ($ data-> getCcExpYear ())
        -> setCcSsIssue ($ data-> getCcSsIssue ())
        -> setCcSsStartMonth ($ data-> getCcSsStartMonth ())
        -> setCcSsStartYear ($ data-> getCcSsStartYear ())
    ;
    return $ this;
} 
```

另外我也参考了Mage_Payment_Model_Method_Cc，prepareSave覆盖，只能获取信用卡号，但没有获取验证码

```
public function prepareSave ()
{
    $ info = $ this-> getInfoInstance ();
    if ($ this-> _canSaveCc) {
        $ info-> setCcNumberEnc ($ info-> encrypt ($ info-> getCcNumber ()));
    }
    // $ info-> setCcCidEnc ($ info-> encrypt ($ info-> getCcCid ())); 
    // These three lines seems useless
    $ info-> setCcNumber (null) 
        // These three lines seems useless
        -> setCcCid (null); 
        // These three lines seem useless
    return $ this;
} 
```

希望你能帮助我，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:03:42.283

为了保存 CVV 代码（验证码），prepareSave() 方法应该如下所示：

```
public function prepareSave ()
{
    $info = $this->getInfoInstance();
    if ($this->_canSaveCc) {
        $info->setCcNumberEnc($info->encrypt($info->getCcNumber()));
    }

    // Uncommented this line
    $info->setCcCidEnc($info->encrypt($info->getCcCid()));

    $info->setCcNumber(null)->setCcCid(null); 

    return $this;
} 
```

除非此保存/检索功能在其他地方也被禁用，否则应该让 Magento 保存 CVV 代码。我相信被注释掉的那一行是用来设置要保存在数据库中的 CVV 代码的。

您可能需要为管理员编辑模板文件，使其也显示在订单管理页面上。虽然我并不积极。

Magento 出于某种原因停止存储 CVV 代码，因为它违反了信用卡公司的服务条款。我不建议重新引入此功能，但你去吧。让我知道这是否有效（除非您已经找到了解决方案）。

# jquery-mobile - data-role="page" height 属性如何在三星 Galaxy 10.1 选项卡上工作？

> ID：10648402
> 
> 赞同：1
> 
> 时间：2012-05-18T07:24:55.803
> 
> 标签：jquery-mobile

嗨伙计们，我是 Jquery mobile 的新手，我正在使用 Jquery Mobile 框架开发 Phone gap 应用程序。页面主题不适用于三星 Galaxy 10.1 选项卡中的总设备高度。请帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:29:24.677

如果您在开发中使用 Adob​​e Dreamweaver CS5.5，您可以检查您的项目在不同手机和平板电脑上的外观，因为它们具有内置模拟器。CS5.5 中还内置了电话间隙支持。有关更多详细信息，请参见[此处](http://www.adobe.com/devnet/dreamweaver/dreamweaver-mobile.html)。

# iphone - 我应该如何处理 iphone/ipad 中的来电

> ID：10648403
> 
> 赞同：0
> 
> 时间：2012-05-18T07:24:58.913
> 
> 标签：iphone, ios, ipad, object, avplayer

我确信这是一个重复的问题，但我没有找到任何有效的解决方案。我正在使用 AVPlayer 而不是 AVAudioPlayer，并在 iphone 上流式传输音频文件。当调用中断我的应用程序（在后台或活动中运行）时，它会进入暂停状态。但是通话结束时无法播放。我应该怎么办？任何帮助表示赞赏。提前致谢。

哈立德·乌斯曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:44:35.873

[您可以按照此 SO answer](https://stackoverflow.com/a/5845372/184245)中的建议设置提醒用户的本地通知。

# xaml - 更改视图状态时未显示 FlipView SelectedItem？

> ID：10648414
> 
> 赞同：1
> 
> 时间：2012-05-18T07:25:50.443
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我正在使用 FlipView 来显示项目（从代码中添加翻转视图项目）并使用 VirtualizingStackpanel。当我更改视图（snapView 和全模式）时，将使用 FlipView.Item.Clear() 清除翻转视图项目并进行一些大小计算，然后再次在翻转视图中添加项目。问题是在此之后我无法看到该项目，如果我点击另一个项目并返回我能够看到该项目。知道是什么导致了这个问题吗？

```
 <FlipView x:Name="fp" Margin="120,0,100,0"  Visibility="Visible" SelectionChanged="onSelectionChanged">
                <FlipView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel  x:Name="FlipView2ItemsPanel" Background="Transparent" Orientation="Horizontal" >
                       </VirtualizingStackPanel>
                    </ItemsPanelTemplate>
                </FlipView.ItemsPanel>
        </FlipView> 
```

# facebook - 如何获得长期访问令牌

> ID：10648419
> 
> 赞同：1
> 
> 时间：2012-05-18T07:26:00.097
> 
> 标签：facebook, access-token, facebook-access-token

Sience Facebook取消了offline_access范围，我获得的访问令牌只能使用2天。我阅读了他们的博客，并尝试每小时刷新一次令牌。但是每次我得到的令牌都和我发送的一样。它过期了.

奇怪的是 IM Plus(http://plus.im/) 从来不需要刷新令牌（只要我注册并添加 Facebook 连接到它，大约一个月）我想知道他们是怎么做到的。我发现他们是仍在使用“offline_access”范围。这是他们获取访问令牌的 URL

[https://www.facebook.com/dialog/oauth?api_key=119600778096160&app_id=119600778096160&client_id=119600778096160&display=touch&domain=plus.im&locale=en_US&origin=2&redirect_uri=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect% 2Fxd_arbiter.php%3Fversion%3D6%23cb%3Df3d1b1d90c%26origin%3Dhttps%253A%252F%252Fplus.im%252Ff232f2ca44%26domain%3Dplus.im%26relation%3Dopener%26frame%3Df336857b2c&response_stream_type=token%2C%20pubse_stream_type=token%2C 2C%20xmpp_login%2C%20read_mailbox%2C%20offline_access&sdk=joey](https://www.facebook.com/dialog/oauth?api_key=119600778096160&app_id=119600778096160&client_id=119600778096160&display=touch&domain=plus.im&locale=en_US&origin=2&redirect_uri=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D6%23cb%3Df3d1b1d90c%26origin%3Dhttps%253A%252F%252Fplus.im%252Ff232f2ca44%26domain%3Dplus.im%26relation%3Dopener%26frame%3Df336857b2c&response_type=token%2Csigned_request&scope=read_stream%2C%20publish_stream%2C%20xmpp_login%2C%20read_mailbox%2C%20offline_access&sdk=joey)

那么，如何像他们一样获得长期访问令牌呢？

谢谢。

# android - 适用于超大图像的 android 图像缩放方法；

> ID：10648423
> 
> 赞同：1
> 
> 时间：2012-05-18T07:26:13.027
> 
> 标签：android, android-image

我在尺寸为 1000x800 的服务器上有图像。我使用以下方法下载它：

1.  下载完整图像，将像素值放入数组中，从中解码位图并进行缩放。

2.  下载部分图像，将它们放在画布上并缩放画布。

哪种方法更好地解决内存问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:22:25.477

最好的方法是：

3）下采样/缩放图像而不解码

```
public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
    int reqWidth, int reqHeight) {

  // First decode with inJustDecodeBounds=true to check dimensions
  final BitmapFactory.Options options = new BitmapFactory.Options();
  options.inJustDecodeBounds = true;
  BitmapFactory.decodeResource(res, resId, options);

  // Calculate inSampleSize
  options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

  // Decode bitmap with inSampleSize set
  options.inJustDecodeBounds = false;
  return BitmapFactory.decodeResource(res, resId, options);
} 
```

它在[这里](https://developer.android.com/training/displaying-bitmaps/load-bitmap.html)解释。示例代码也来自那里。

# java - 在圆形路径中移动标签

> ID：10648425
> 
> 赞同：-1
> 
> 时间：2012-05-18T07:26:18.160
> 
> 标签：java, trigonometry

我想以圆形路径在 GUI 中移动标签。我希望使用线程来保持速度。谁能告诉我如何做圆周运动？我们应该使用什么逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:28:44.763

您可以使用周长公式：x^2 + y^2 = 半径^2

知道那个公式，如果你知道你想要的半径（常数），你可以做这样的事情（伪代码，我希望你明白）：

```
for (x from initial_x to end_x) {
   y = Math.sqrt(radius^2 - x^2)
   draw the label at position (x, y)
} 
```

# http - 通过http访问服务器上的内容？

> ID：10648426
> 
> 赞同：0
> 
> 时间：2012-05-18T07:26:18.633
> 
> 标签：http

我有一些文件夹和文件需要复制到远程服务器，以便可以通过 http 访问，例如：`http://myhost/data`

一种方法是将它放在 tomcat/webapps 文件夹中，但是当我重新安装/更新 tomcat 时它会消失。我的文件在服务器上是否有其他位置仍可通过 http 访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:31:57.110

您可以将文件保存在主目录中，并在 webapps 中为它们创建软链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:24:28.973

使用带有虚拟主机的 apache2 Web 服务器可以解决问题

# java - 使用 JAX-RS 的 JAXB 实例可空性/有效性

> ID：10648427
> 
> 赞同：3
> 
> 时间：2012-05-18T07:26:20.523
> 
> 标签：java, jaxb, jax-rs

使用 JAX-RS，我是否必须检查 JAXB 元素？

可以（应该）容器检查内容的有效性吗？

`Item`可以（应该）容器在调用 REST 方法之前在解组时自动响应 BAD_REQUEST吗？

当客户端发送不可编组（或空）内容时，容器可以（可能）响应 INTERNAL_SERVER_ERROR 吗？

```
@XmlRootElement
class Item {
}

@PUT
@Path("/items/{item_id: \\d+}")
@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
public Response updateItem(@PathParam("item_id") final Long itemId,
                       final Item item) {

    assert itemId != null; // '\\d+'

    assert item != null; // is this make any sense?

    // is it ok to assert item is never null?
} 
```

还有一个问题，怎么`byte[]`办？

```
@Consumes({MediaType.APPLICATION_OCTET_STREAM})
@PUT
@Path("/players/{player_id: \\d+}/picture");
public Response updatePicture(..., final byte[] bytes) {

    assert bytes != null;

   // is it ok to assert bytes won't be null even for an empty request body?

} 
```

哎呀，我想我找到了答案。

[http://jsr311.java.net/nonav/releases/1.1/spec/spec3.html#x3-460004.2.4](http://jsr311.java.net/nonav/releases/1.1/spec/spec3.html#x3-460004.2.4)

> 当读取零长度请求实体时，所有实现提供的 MessageBodyReader 实现，**除了与 JAXB 相关的**实现，必须创建一个表示**零长度数据**的相应 Java 对象；他们**不得返回 null**。对于零长度请求实体，实现提供的**JAXB** MessageBodyReader 实现必须抛出 带有客户端错误响应 ( **HTTP 400 )****的 WebApplicationException 。**

# html - HTML5 画布文本与具有 CSS3 样式的普通文本？

> ID：10648428
> 
> 赞同：0
> 
> 时间：2012-05-18T07:26:21.583
> 
> 标签：html, css, text

我在一些网站上看到使用`<canvas>`带有 javascript 的标签来绘制文本和添加文本样式。`<canvas>`与使用 CSS3 样式的普通文本相比，在标签中生成文本有哪些实际优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:46:22.050

用例应该决定您的选择。不过，我将尝试就这个相当笼统的问题发表我的想法：

1.  如果您只需要编写一些文本，那么使用画布将是一个非常糟糕的主意，因为它会比 CSS 慢得多，并且您的文本将无法访问（目前）。
2.  如果您必须将文本非常准确地放置在某些绘图上，或者文本包含在动画中，则可以选择画布（取决于绘图/动画的复杂性）。但是在这种情况下你也应该考虑 SVG。

# jquery - 如果 Jquery 中的语句依赖于选中的复选框？

> ID：10648429
> 
> 赞同：-2
> 
> 时间：2012-05-18T07:26:22.223
> 
> 标签：jquery, if-statement

我想添加一个 if 语句来包围一些代码。我需要我的 if 语句（但在**jquery**中）：

```
If (chkSurety.checked = true){
SuretyFullName: { required: true }, // This is validation plugin and must stay like this.
SuretyIDNumber: { required: true}, 
SuretyPhysicalAddress: { required: true }, 
SuretyHomeTel: { required: true}, 
SuretyPlace: { required: true}, 
SuretyDay: { required: true }, 
SuretyMonth: { required: true } 
}
Else
{
SuretyFullName: { required: false },
SuretyIDNumber: { required: true}, 
SuretyPhysicalAddress: { required: true }, 
SuretyHomeTel: { required: true}, 
SuretyPlace: { required: true}, 
SuretyDay: { required: true }, 
SuretyMonth: { required: true } 
} 
```

这个 if 语句是 C# 我需要它是 jquery。这已经在一个事件中，所以不希望 checkbox.checked 成为事件，只需要 jquery 中的上述代码即可。

在此先感谢，如果您需要更多信息，请询问:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:28:04.853

假设您的复选框的 ID 为`chkSurety`，并且您要做的就是`SuretyFullName`根据问题中给出的代码更新对象的状态：

```
SuretyFullName.required = $('#chkSurety').is(':checked'); 
```

或者（更有效地）没有 jQuery：

```
SuretyFullName.required = document.getElementById('chkSurety').checked; 
```

您*似乎*正在尝试为 jQuery 验证插件创建一些规则，因此：

```
// set the default rules
var rules = {
    SuretyFullName: { required: false },
    SuretyIDNumber: { required: true}, 
    SuretyPhysicalAddress: { required: true }, 
    SuretyHomeTel: { required: true}, 
    SuretyPlace: { required: true}, 
    SuretyDay: { required: true }, 
    SuretyMonth: { required: true } 
 };

 // override the full name rule, based on the checkbox
 rules.SuretyFullName.required = $('#chkSurety').is(':checked');

 $('#fmrMain').validate({
      rules: rules,
      ...
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:30:29.227

简单地说：

```
var yourObject = {SuretyFullName: { required: chkSurety.checked }};

```

如果您`if`出于某种原因确实需要 -syntax：

```
var yourObject = {};
如果（chkSurety.checked）{
    yourObject.SuretyFullName = true;
} 别的 {
    yourObject.SuretyFullName = false;
}

```

注意：`if (chkSurety.checked == true)`是多余的，`if (chkSurety.checked)`更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:27:59.540

试试这个：

```
if ($("#chkSurety").is(":checked")) {
    // rest of code...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T07:34:39.290

*如果您可以帮助它，请不要包含整个 JQuery 库，如果它同样易于使用纯 JavaScript*

但是，因为它是使用 JQuery 的要求:-)

```
if ($('#chkSurety').is(":checked")) {
    // checked
} else {
    // not checked
} 
```

[​​​http://jsfiddle.net/XXHrE/3/](http://jsfiddle.net/XXHrE/3/) - 测试它...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T13:26:36.367

这完美地工作。

```
SuretyFullName: { required: function (element) { if ($('#chkSuretyShip').is(':checked')) { return true } else { return false} } } 
```

# php - 获取变量数据中的第一个数组（多个数组）

> ID：10648433
> 
> 赞同：0
> 
> 时间：2012-05-18T07:27:14.017
> 
> 标签：php, arrays, object

我得到的对象的输出是：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 1        
        )
)

    [1] => stdClass Object
        (
            [id] => 7        
        )
)

Array
(
    [0] => stdClass Object
        (
            [id] => 1        
        )
)

    [1] => stdClass Object
        (
            [id] => 7        
        )
)

... and so on repeated. 
```

我只想要这些所有数组中的第一个数组。请注意，这不是多维数组。.

我只想要输出中的第一个数组：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 1        
        )
)

    [1] => stdClass Object
        (
            [id] => 7        
        )
) 
```

# sql - jpa setMaxResults 额外查询

> ID：10648436
> 
> 赞同：1
> 
> 时间：2012-05-18T07:27:17.433
> 
> 标签：sql, jpa, eclipselink

我正在使用带有 OracleDriver 的 eclipse persistence jpa，但我不明白为什么它会在日志中显示一些额外的查询。例子：

```
Query q = em.createQuery("SELECT v FROM Vehicle v")
                .setFirstResult(0)
                .setMaxResults(1);

List<Vehicle> list = q.getResultList(); 
```

我在 eclipselink 日志中看到的是：

```
Execute query ReadAllQuery(referenceClass=Vehicle sql="SELECT ID, ... FROM VEHICLE")

[EL Fine]: 2012-05-18 11:03:28.076--ServerSession(763807850)--Connection(340360448)--Thread(Thread[main,5,main])

    --SELECT * FROM (SELECT /*+ FIRST_ROWS */ a.*, ROWNUM rnum  FROM (SELECT ID AS a1,  .... FROM VEHICLE) a WHERE ROWNUM <= ?) WHERE rnum > ?
                bind => [1, 0] 
```

所以，第一个查询真的让我害怕。即使我使用 setMaxResults，它真的会查询表中的所有记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:42:00.493

不，它不会读取所有记录。发送到 db 连接器的查询是第二个。

# 3d - 如何在 3D 空间中通过鼠标单击来识别平行六面体的边缘或角？

> ID：10648440
> 
> 赞同：1
> 
> 时间：2012-05-18T07:27:41.817
> 
> 标签：3d, click, geometry, point

你可以说我的问题就像这个人的[How to get object in WebGL 3d space from a mouse click coordinate](https://stackoverflow.com/questions/7364693/how-to-get-object-in-webgl-3d-space-from-a-mouse-click-coordinate)一样，但是有一些差异阻止我应用这些解决方案。

假设我有一个`java.awt.Canvas`包含多个 3D 平行六面体 (??) 对象。我想实施`control points`. 这意味着当我在边缘或角落（在对象、角落或边缘选择模式的内部或外部）附近单击时，考虑到容差水平，绘制一个点并保留其坐标。

我对选择第一个对象不感兴趣（所以我会使用射线/三角形交点），我想选择最接近鼠标点击位置的边/角。

![我点击对象内部还是外部都没有关系，控制点应该位于边缘](../Images/04af5b915c026dad1d905f1117120948.png)

# sql-server-2005 - SQL Server 触发到其他 SQL Server（均为 2005）

> ID：10648441
> 
> 赞同：0
> 
> 时间：2012-05-18T07:27:42.213
> 
> 标签：sql-server-2005, triggers

是否可以触发另一个 SQL Server？

说数据插入`[server1].[database].[tablename]`，我希望它也插入`[server2].[database].[tablename]`。那可能吗？

我该如何设置它？我特别需要了解授予用户权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:49:07.213

You can add [server2] to sys.servers table on [server1]. Then you'll able to query from one server to another

# excel - ssis中的日期格式问题

> ID：10648442
> 
> 赞同：1
> 
> 时间：2012-05-18T07:27:51.987
> 
> 标签：excel, ssis

我必须将数据从 Excel 文件导入到 SSIS，但我在日期列中遇到问题，在 Excel 表日期格式中`yyyy/mm/dd`，当它上传到数据库中时，它会更改为`yyyy/dd/mmm`格式。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:36:40.817

导入日期时在派生列中使用 SUBSTRING 函数，

```
(LEN(TRIM(SUBSTRING(ReceivedDateTime,1,8))) > 0 ? (DT_DBDATE)(SUBSTRING(ReceivedDateTime,1,4) + "-" + SUBSTRING(ReceivedDateTime,5,2) + "-" + SUBSTRING(ReceivedDateTime,7,2)) : (DT_DBDATE)NULL(DT_WSTR,5)) 
```

如果数据在那里，则使用 Substring 函数提取在数据库中设置的确切日期，或者如果日期不存在，则在数据库中插入 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:17:49.737

我看到两个选项：

1.  [数据转换转换](http://msdn.microsoft.com/en-us/library/ms141706.aspx)为适当格式的文本字符串。使用 SSIS 数据类型。
2.  添加转换数据类型的脚本任务。使用 VB 数据类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:34:53.187

首先使用以下命令在您的数据库中创建表

```
 CREATE TABLE [dbo].[Manual] (
   [Name] nvarchar(255),
   [Location] nvarchar(255),
   [Date] datetime
   )
   SET DATEFORMAT YDM 
```

通过使用**DATEFORMAT YDM**，日期将以 YYYY/DD/MM 格式导入。在运行包之前修改包并在列映射时选中复选框“删除目标表中的行”。

然后执行包。它会起作用的。

# sql-server - 我需要行级锁定

> ID：10648448
> 
> 赞同：3
> 
> 时间：2012-05-18T07:28:00.770
> 
> 标签：sql-server, rowlocking

这是对是否可以在 SQL Server 中强制行级锁定的扩展[？](https://stackoverflow.com/questions/3114826/is-it-possible-to-force-row-level-locking-in-sql-server/3114834#comment13806769_3114834). 这是用例

我有一个包含帐号、余额等的帐户表。该表被许多应用程序使用。很有可能，当我修改一个帐户时，其他人正在修改另一个帐户。所以预期的行为是我将锁定我的帐户（ROW），而其他用途将锁定他的（另一个 ROW）。

但是 SQL Server 2008 R2 将此锁定升级到页面/表，并且第二个用户得到超时异常。我已经尝试了引用问题中提到的所有解决方案，但没有任何效果。

如何强制 SQL Server 仅锁定行级锁，或者如何修改此模型以使其与页/表锁定一起使用？

**编辑** 该更新通过其 PK 以单个记录为目标，并且已编入索引，因此只有 ONE ROW 被更新/锁定，并且该过程不超过一分钟

**编辑** 现在看起来有些奇怪的事情正在发生。我正在为 DAL 使用一个 ORM 库，它打开了多个连接，我已经向他们的支持提出了这个问题。但是，出于测试目的，我在查询工具上打开了两个会话并做了以下操作

```
Session # 1
begin tran
UPDATE myTable SET COL_1 = COL_1 WHERE COL_1 = 101;

Session # 2
SELECT COL_1 FROM myTable WHERE COL_1 = 101; 
```

Session # 2 中的查询超时！！！对其他值的查询`COL_1`工作正常。现在，如果同一记录在另一个会话中处于编辑模式，则看起来 SELECT 被阻止了一个会话。

尽管 Oracle 确实支持在其他会话修改行时选择行（使用默认参数/无关键字），但 SQL Server 不支持（使用默认参数/无关键字），因此问题似乎出在库上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T07:30:46.407

默认情况下，SQL Server 始终使用行级锁定....那么您到底需要什么？

如果您锁定超过一定数量的行（大约 5000 行），那么 SQL Server 将执行[**锁定升级**](http://blogs.msdn.com/b/sqlserverstorageengine/archive/2006/05/17/lock-escalation.aspx)（锁定表而不是单独锁定超过 5000 行）以优化性能并优化资源使用 - 但这是一件好事！:-)

有一些方法可以完全关闭它 - 但**不推荐使用这些方法！**因为你搞乱了 SQL Server 存储引擎中的一个非常基本的机制。

看：

*   [关于锁升级的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms184286%28v=sql.105%29.aspx)
*   [关于锁升级的 Adam Machanic 博客](http://sqlblog.com/blogs/adam_machanic/archive/2009/10/30/sql-server-2008-lock-escalation-inserts-and-a-potential-bug.aspx)
*   [SQL Server 中的锁定简介](http://www.sqlteam.com/article/introduction-to-locking-in-sql-server)- 还具有可视化哪个进程正在锁定什么的脚本（行、页、表、锁定类型等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:05:17.547

将您的系统想象成客户端-服务器应用程序，其中客户端和服务器通过非常慢的线路（例如蜗牛邮件）连接，并且用户正在很长时间（例如一周）修改他们的记录。然后想一想，何时需要锁定行/数据以及何时允许更改行/数据等等 - 显然将 SQL Server 内部锁定数天似乎不再是一个好主意。

如果您没有遇到两个用户需要更改同一条记录的情况，那么您在更改数据时根本不需要锁定。您只需要在很短的时间内锁定，当数据库中的记录发生更改时 - 换句话说，当用户提交更改时。（这是乐观锁定场景。）当然，如果两个用户更改相同的数据，那么最新的更改将覆盖之前的更改。

如果您绝对要求两个用户永远不要修改相同的数据（悲观锁定），那么可能最通用的方法是使用一些应用程序定义的锁表或数据表中的特定字段。当一个用户签出一些记录（开始编辑或类似时）时，您需要检查该记录是否已在使用（锁定），如果没有，则将此记录标记为锁定。当然，您需要一些功能来删除过时的锁。

或者针对这种情况使用 SQL Server 内部特定功能。看这里：[MSDN 中的 sp_getapplock 函数](http://msdn.microsoft.com/en-us/library/ms189823.aspx)；这样您就不必担心记录被永久锁定等。

# android - 如何将 EditText 设置为仅输入十六进制数字？

> ID：10648449
> 
> 赞同：17
> 
> 时间：2012-05-18T07:28:01.263
> 
> 标签：android, android-layout, android-intent

我将在此代码中放入 EditText 上的控件，以便它只接受十六进制数字。我该怎么做呢？

```
bin = (EditText)findViewById(R.id.editText02);
hex = (EditText)findViewById(R.id.editText3);
dec = (EditText)findViewById(R.id.editText1);
oct = (EditText)findViewById(R.id.editText04); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-06-27T23:42:38.287

在您的 android 布局 XML 文件中，将以下属性添加到 EditText：

```
<EditText
android:digits="0123456789ABCDEF"
android:inputType="textCapCharacters"
/> 
```

第一个属性只允许输入这些数字。任何其他输入都将被拒绝且不显示。第二个属性将字符大写。

归功于这篇博文：http: [//mobile.antonio081014.com/2012/04/how-to-let-input-of-edittext-only-be.html](http://mobile.antonio081014.com/2012/04/how-to-let-input-of-edittext-only-be.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-06T22:28:43.323

有两种选择，一种是 Muhammad Annaqeeb 使用属性描述的：

```
<EditText
        android:id="@+id/myTextView"
        android:digits="0123456789ABCDEF"
        android:inputType="textCapCharacters"/> 
```

其他选项将使用[InputFilter](https://developer.android.com/reference/android/text/InputFilter)和 REGEX 只允许十六进制字符：

```
EditText myTextField = (EditText) findViewById(R.id.myTextView);

InputFilter inputFilterText = new InputFilter() {

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {

        Pattern patern = Pattern.compile("^\\p{XDigit}+$");

        StringBuilder sb = new StringBuilder();

        for (int i = start; i < end; i++) {

            if (!Character.isLetterOrDigit(source.charAt(i)) && !Character.isSpaceChar(source.charAt(i))                            ) {
                //is not(Letter or Digit or space);
                return "";
            }

            //Only allow characters "0123456789ABCDEF";
            Matcher matcher = patern.matcher(String.valueOf(source.charAt(i)));
            if (!matcher.matches()) {
                return "";
            }

            //Add character to Strinbuilder
            sb.append(source.charAt(i));

            /*counterForSpace++;
            if(counterForSpace>1){
                //Restar counter contador
                counterForSpace = 0;
                //Add space!
                sb.append(" ");
            }*/

        }
        //Return text in UpperCase.
        return  sb.toString().toUpperCase();
    }
};

myTextField.setFilters(new InputFilter[] { inputFilterText });
myTextField.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

结果，这两个选项都有：

[![在此处输入图像描述](../Images/61c9b536afdee0a9c26e8fc33e66f7b4.png)](https://i.stack.imgur.com/uPLfT.gif)

也检查这个相关的答案：

[https://es.stackoverflow.com/a/211240/95](https://es.stackoverflow.com/a/211240/95)

[![水图像介绍](../Images/ed6b6cdaa4e8d7b0b7762ac04c51a8ba.png)](https://i.stack.imgur.com/fzN6h.gif)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T08:18:52.127

TextWatcher 也是不错的选择，但我更喜欢使用自定义过滤器。因此，更简单的方法是使用 InputFilter 并即时控制每个字符，请参见下面的示例，希望这会有所帮助

```
 import android.text.InputFilter;
    import android.text.InputType;

    EditText input_moodMsg; 
    // initialize this edittext etc etc
    //....
    // here comes the filter to control input on that component
    InputFilter inputFilter_moodMsg = new InputFilter() {
                @Override
                public CharSequence filter(CharSequence source, int start, int end,Spanned dest, int dstart, int dend) {

                    if (source.length()>44) return "";// max 44chars

// Here you can add more controls, e.g. allow only hex chars etc

                    for (int i = start; i < end; i++) { 
                         if (!Character.isLetterOrDigit(source.charAt(i)) && !Character.isSpaceChar(source.charAt(i))
                                 && source.charAt(i)!='-'
                                 && source.charAt(i)!='.'
                                 && source.charAt(i)!='!'
                                 ) { 
                             return "";     
                         }     
                    }
                    return null;   
                }
            };
            input_moodMsg.setFilters(new InputFilter[] { inputFilter_moodMsg });
            input_moodMsg.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

# c# - jqgrid gridComplete setRowData onclick函数未定义

> ID：10648454
> 
> 赞同：0
> 
> 时间：2012-05-18T07:28:17.177
> 
> 标签：c#, javascript, jqgrid

我现在正在使用 JQGrid。
首先，我想创建具有编辑和删除按钮的列表网格。
由于此网格具有编辑和删除按钮，当用户单击这些按钮时，我希望用户根据单击的行 ID 重定向到下一页。

```
<script type="text/javascript">
jQuery(document).ready(function () {

    var test = function () {
        alert("****");
    };

    var grid = $("#list");

    grid.jqGrid({
        url: '/Supplier/Select_SupplierByX/',
        datatype: 'json',
        mtype: 'POST',
        postData: {
            SupplierName: function () { return $("#txtSupplierName").val(); },
            Address: function () { return $("#txtAddress").val(); },
            Phone: function () { return $("#txtPhone").val(); }
        },
        colNames: ['Actions', 'SupplierID', 'SupplierName', 'Address', 'Phone'],
        colModel: [
                      { name: 'act', index: 'act', width: 25, sortable: false },
                      { name: 'SupplierID', index: 'SupplierID', width: 40, align: 'left', editable: false, searchtype: "integer" },
                      { name: 'SupplierName', index: 'SupplierName', width: 40, align: 'left', editable: false },
                      { name: 'Address', index: 'Address', width: 40, align: 'left', editable: false },
                      { name: 'Phone', index: 'Phone', width: 40, align: 'left', editable: false }
                  ],
        loadtext: 'Loading Supplier Information...',
        pager: jQuery('#pager'),
        rowNum: 10,
        sortname: 'SupplierName',
        sortorder: "asc",
        rownumbers: true,
        sortable: true,
        viewrecords: true,
        autowidth: true,
        height: 300,
        caption: 'Supplier List',
        gridComplete: function () {
            test();
            var ids = grid.jqGrid('getDataIDs');
            for (var i = 0; i < ids.length; i++) {
                var cl = ids[i];
                //be = "<input style='width:60px;' type='button' value='Edit' onclick=\"gridRowButtonClick('" + cl + "', 'true');\" />";
                //se = "<input style='width:60px;' type='button' value='Delete' onclick=\"gridRowButtonClick('" + cl + "', 'false');\" />"; 
                be = "<input style='width:60px;' type='button' value='Edit' onclick=\"javascript:alert('Testing');\" />";
                se = "<input style='width:60px;' type='button' value='Delete' onclick=\"test();\" />";
                grid.jqGrid('setRowData', ids[i], { act: be + se });
            }
        }
        /*,gridRowButtonClick: function (id, isEdit) {
        alert("This is gridRowButtonClick.\n"+ id +" : "+ isEdit);
        }*/
    }).navGrid('#pager', { search: false, del: false, add: false, edit: false },
                        {}, // default settings for edit
                        {}, // default settings for add
                        {}, // delete instead that del:false we need this
                        {}, // search options
                        {} // view parameters
        );

    $('#butSearch').click(function () {
        grid.trigger("reloadGrid");
    });

}); 
```

根据上层 JavaScript，gridComplete 事件被触发并显示“ *** *”消息。但是当我单击删除按钮时，萤火虫说“未定义测试”。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:32:47.100

您`test`在`jQuery(document).ready(function () {/*here*/});`事件处理程序中定义了函数。您应该将其移到*外部*以使其全局化。调用 from 的函数`onclick`必须在全局级别上定义。

再说一句。您当前添加按钮的实现非常缓慢。如果您尝试使用数百或数千行的代码，您会发现差异很明显。问题是`setRowData` *修改*页面上的元素。问题是页面上的每一次更改都会重新计算页面上*每个*现有元素的位置。至少需要进行[回流。](https://developers.google.com/speed/articles/reflow)[所以使用自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)、 cellattr 和[rowattr](https://stackoverflow.com/a/10531680/315935)会更有效。您还应该**始终**使用`gridview: true`jqGrid 选项。在方式上，完整的 jqGrid 主体将首先准备为文本，然后作为**一个**操作放置在页面上（将 HTML 片段设置为`innetHTML`相应元素的属性）。它多次提高了 jqGrid 的性能。

例如，您可以将`'act'`列定义为

```
{ name: 'act', index: 'act', width: 25, sortable: false,
    formatter: function (cellvalue, options, rowObject) {
        return "<input style='width:60px;' type='button' value='Edit' " +
            "onclick=\"javascript:alert('Testing');\" />" +
            "<input style='width:60px;' type='button' value='Delete' " +
            "onclick=\"test(" +  options.rowId + ");\" />";
    }} 
```

并且不要忘记包含`gridview: true`在您使用的选项列表中。

# internet-explorer - 修复IE等网站

> ID：10648457
> 
> 赞同：0
> 
> 时间：2012-05-18T07:28:42.683
> 
> 标签：internet-explorer, browser, css, cross-browser

我开发了一个[网站](http://backwardsbearandbabycurl.com/)。该网站在 Chrome 上运行良好，`19.0.1084.46 m`但在所有其他浏览器（Mozilla 除外）上，侧边栏移动到容器下方。它是我的第一个网页设计之一，所以我对浏览器的修复一无所知。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:39:20.033

要正确对齐，请从to中删除`margin-left`您在容器 div 中添加的属性，这会因屏幕而异。`%``px``%`

这是一个解释布局的网站：[检查一下](http://www.maxdesign.com.au/articles/liquid/)

希望能帮助到你 ：）

# android - HTML5 vs Native App：选择哪个？

> ID：10648459
> 
> 赞同：14
> 
> 时间：2012-05-18T07:28:57.457
> 
> 标签：android, iphone, html, windows-phone-7, mobile

这个问题非常流行，并且已经有很多与之相关的问题。但是其中一些是旧的（比如 6 个月前），并且对于当前日期 - 2012 年 5 月......如果你能输入现在哪个更好，那就太棒了！

我现在正在开发一些应用程序，跨平台功能在这里很重要。我想知道我是否可以将 HTML5 用于以下功能。

1.  **在我的应用程序中创建音乐播放器**（需要阅读所有播放列表并播放它们） - HTML5（或）原生？

2.  **加速度计使用**- HTML5（或）本机？

3.  **相机使用**- HTML5（或）本机？

4.  使用**手势**（swype 等）- HTML5（或）本机？

5.  **多点触控功能**和手势 - HTML5（或）原生？

6.  **使用物理开发 3D 游戏**（或）2.5D - HTML5（或）Native ？（原生可能是最好的选择，但我很想知道 HTML5 在多平台游戏开发中的表现）

如果您可以用正确的答案对选项进行编号，并说明为什么我必须使用本机/html5，那就太棒了:)

* * *

另外，你对`Phone-Gap`原生支持有什么看法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-18T07:37:50.203

**在我的应用程序中创建音乐播放器**- 两者。HTML5 可能很乏味。

**加速度计使用**- 本机。html5 不支持

**相机使用**- 本机。html5 不支持

**使用手势**- 本机。Html5 可以支持它，但您必须使用外部库

**多点触控功能和手势**- 为了便于开发，我会说是原生的

**使用物理开发 3D 游戏（或）2.5D** - 两者都有，现在两个系统都可以使用一些很棒的库。然而，目前在 HTML5 中做你想做的事情可能并不容易。

更一般地说，HTML5 让您可以为每个系统编写一次代码，然后想知道它是否会在任何地方以相同的方式工作。原生应用程序需要针对每个平台进行特定的开发，以及维护许多处于不同成熟阶段的软件的成本和问题。

但是，如果您不需要特定功能，请选择 HTML5。到目前为止，在上面编写代码仍然有点乏味，但是可用库的质量和数量每天都在增加。使用[CoffeeScript](http://coffeescript.org/)，它会让你头疼。

如果您的应用程序在设计时考虑到了[响应式设计](http://designmodo.com/responsive-design-examples/)，那么您还可以在一个应用程序中支持计算机、平板电脑和智能手机。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-18T09:28:09.700

除非您的应用程序非常简单，否则请避免所谓的跨平台解决方案并为每个平台构建原生。如果你这样做，你会很高兴。

如果您不这样做，那么当您在某些设备上出现问题而在其他设备上出现问题时，或者当您收到添加某些设备不支持的某些功能的请求时，您将感到非常抱歉。

根据我的经验，基本上使用跨平台解决方案是最低公分母/仅适用于简单的应用程序/虚假经济。

只是我基于 12 年以上的商业软件开发和我自己尝试这两种方法的经验的拙见。

# php - 如何改进函数以在 PHP 脚本中使用

> ID：10648467
> 
> 赞同：-1
> 
> 时间：2012-05-18T07:29:30.770
> 
> 标签：php, mysql, function, sql-injection

，我正在尝试防止 SQL 注入，当我使用 MySQL 时，我的功能是否足够？我该如何改进它？

感谢您的时间和耐心。

```
 <?php
    function sanitize($data) {
        if (is_array($data)) {
            foreach($data as $var=>$val) {
                $output[$var] = sanitize($val);
            }
         }
         else {
             if (get_magic_quotes_gpc()) {
                 $data = stripslashes($data);
             }
             $data = htmlspecialchars($data);
             $output = mysql_real_escape_string($data);
         }
         return $output;
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:32:32.807

这是您永远不应该在代码中使用的完美示例。规则非常简单：

a）使用准备好的语句（我强烈推荐这个解决方案）

或（如果由于某种原因您不能使用 PDO 或 mysqli）

b.1）**每个**（甚至是您从“受信任”来源获得的，**没有任何例外**）作为值的字符串应该被`mysql_real_escape_string`编辑
b.2）每个整数都应该被`(int)`编辑
b.3）每个不是整数的数字都应该检查是否符合预期
b.4) 永远不要使用用户的输入作为列/表名称的替代，始终使用白名单

就像 1-2-3 一样简单

因此，您仅在需要时才应用消毒功能 - 您永远不会将某些“通用”功能应用于您拥有的所有变量

> 我该如何改进它？

改进它的唯一方法是删除它

**更新**：

什么是白名单 - 假设您接受用户输入以用作列名。例如用于分拣设施。

所以你需要创建`array('col1', 'col2')`并检查用户的输入是否出现在这个数组中（所谓的白名单）。如果是这样 - 你可以使用它，否则 - 你不会那样做

# php - wordpress 将家庭名称更改为博客

> ID：10648470
> 
> 赞同：-2
> 
> 时间：2012-05-18T07:29:47.220
> 
> 标签：php, wordpress, web

你能帮我在word-press中将“主页”按钮名称更改为“博客”吗？

稍后我可以使用“主页”名称创建一个新页面。它是否与 word-press 已经提供的默认“主页”冲突？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:48:30.550

转到您的 wp-include 文件夹并打开 post-template.php 文件。在此文件下搜索以下代码

```
 if ( ! empty($args['show_home']) ) {
    if ( true === $args['show_home'] || '1' === $args['show_home'] || 1 === $args['show_home'] )
        $text = __('Home'); 
```

现在将 $text 从 Home 更改为您想要的。

# c# - 如何在网络浏览器中播放音频和视频文件？

> ID：10648471
> 
> 赞同：2
> 
> 时间：2012-05-18T07:29:48.633
> 
> 标签：c#, asp.net, sql

```
protected void Button2_Click(object sender, EventArgs e)
{
    UploadLogic bl = new UploadLogic();
    input = ListBox1.SelectedIndex >= 0 ? ListBox1.SelectedItem.ToString() : "";
    DataSet ds = new DataSet();
    ds = bl.Content_details(input);

    if (ds.Tables[0].Rows.Count > 0)
    {
        Byte[] bytes = (Byte[])ds.Tables[0].Rows[0].ItemArray.GetValue(3);
        Response.Buffer = true;

        Response.Charset = "utf-16";

        Response.Cache.SetCacheability(HttpCacheability.NoCache);

        Response.ContentEncoding = System.Text.Encoding.GetEncoding("windows-1250");

        Response.ContentType = ds.Tables[0].Rows[0].ItemArray.GetValue(2).ToString();

        Response.AddHeader("content-disposition", string.Format("File_Path; filename={0}", input));

        Response.OutputStream.Write(bytes, 0, input.Length);
        Response.BinaryWrite(bytes);

        Response.Flush();

        Response.End();
    }
    else
    {
        Label1.Text = "No File Found..!";
    }
} 
```

我写了这段代码，但它只从数据库下载文件。如果我想播放音频和视频，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:47:44.693

首先，在您的代码中，您只是获取并发送文件（视频或音频），并且您认为浏览器知道如何处理。另一方的浏览器将在两种想法中做出决定，一种是在整页中显示/播放您发送的内容，或者只是要求下载。因为是找到File_Path，所以决定要用户下载。

现在如何实际播放音频或视频到网页。到目前为止，大多数浏览器都不支持直接播放音频/视频，解决方案是使用 adobe flash 播放器。使用在 adobe 上制作的播放器，您可以将视频/音频文件（以正确的格式）发送给它，他可以播放它。[Microsoft silverlight](http://www.microsoft.com/silverlight/)也可以做到这一点。

现在有了新的浏览器和html 5，你可以直接在一个页面上播放音频和视频。

因此，由您决定采用哪种方式，flash、silverlight、html5。

一些例子：

## 使用html5直接播放音频/视频

[http://www.w3schools.com/html/html_videos.asp](http://www.w3schools.com/html/html_videos.asp)

[http://www.w3schools.com/html/tryit.asp?filename=tryhtml_video_html5_4](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_video_html5_4)

[http://www.web-video-player.com/](http://www.web-video-player.com/)

[http://jplayer.org/latest/demos/](http://jplayer.org/latest/demos/)

## 使用“Flash Player”播放音频/视频

[http://flowplayer.org/](http://flowplayer.org/)

[http://applian.com/flvplayer/](http://applian.com/flvplayer/)

## 使用 Silverlight 播放音频/视频

[http://slvideoplayer.codeplex.com/](http://slvideoplayer.codeplex.com/)

[http://openvideoplayer.sourceforge.net/](http://openvideoplayer.sourceforge.net/)

[http://www.longtailvideo.com/players/jw-wmv-player/](http://www.longtailvideo.com/players/jw-wmv-player/)

## 如何在播放器上发送视频

让我们看看这部分代码：

```
<embed width="320" height="240" src="movie.swf"> 
```

在这段代码中，`movie.swf`是您喜欢播放的文件。要直接从数据库中获取它，您必须做的是将其更改为处理程序，然后从该处理程序发送此文件。

```
<embed width="320" height="240" src="loadmovie.ashx?movie.swf"> 
```

现在在里面`loadmovie.ashx`运行你的代码，从数据库中读取电影/音频，然后将其发送到播放器，参数来自 url 行。

## 如何在页面中打开它

我看到您尝试在单击按钮时显示视频。更好的方法是使用打开包含视频的新页面的链接，或者在页面内打开一个 javascript 窗口并显示它，或者只是在页面内显示一个 div 块并显示它。查看“YouTube w/fade effect”上的示例[http://highslide.com/#examples](http://highslide.com/#examples) ，了解如何在同一页面中打开它并播放它。

相对：[如何在 ASP.NET 中处理视频？](https://stackoverflow.com/questions/3992346/how-to-work-with-videos-in-asp-net)

[如何使用 vb.net 在 asp.net 中播放声音？](https://stackoverflow.com/questions/9356517/how-to-play-sounds-in-asp-net-using-vb-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T13:33:47.393

只需将此标签添加到您的网页。

> scrolling="no" frameborder="0" marginheight="0" marginwidth="0">
> 音乐名称

# javascript - 循环浏览网站上的链接并点击链接 javascript/jquery

> ID：10648473
> 
> 赞同：5
> 
> 时间：2012-05-18T07:29:51.503
> 
> 标签：javascript, jquery, loops, click, hyperlink

我正在尝试遍历网站上的所有链接并自动单击一些链接以便投票，这是我到目前为止所拥有的：

```
 function x(){
        for(var e in document.getElementsByTagName("a")){ 
            alert(e.getAttribute("href"))
            e.click;
        }
    } 
```

这目前不起作用，我认为这可能与大括号 / 之类的简单事情有关；关键，我是 javascript 的绝对初学者，所以请多多包涵。我假设您对我想做的事情有所了解，我已经用另一种语言完成了这项任务，但仍未获得注册投票，我相信这可能与使用 jquery 的网站有关？我的问题是，我怎样才能让这个简单的脚本开始工作，以及 2）我可以使用 Jquery 的不同点击方法而不是我在那里的方法 3）我如何检查 6 个特定的 URL 并只点击这些。我还需要使用 javascript:xxx_code_here 从浏览器执行此操作

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:32:54.850

像使用 jquery

```
$("a").each(function ()
{
   $(this).trigger('click');//for clicking element
   var href = $(this).attr("href");
}); 
```

您可以使用[触发器](http://api.jquery.com/trigger/)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:34:49.510

使用 JQuery，您可以使用它：

```
$("a").each(function(){
    alert($(this).attr('href'));
    $(this).trigger('click');
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:33:54.810

你可以用纯javascript做到这一点

```
function x() { // 请找一个更好的名字！
    for(var a in document.getElementsByTagName("a")) {
        警报（a.href）；
        a.点击（）；// 小心，仅限 IE，见注释
    }
}

```

使用 jQuery，您的代码更短：

```
函数 x() {
    $("a").each(函数 (i, a) {
        警报（a.href）；
        a.点击（）；
    });
}

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T07:35:23.000

```
$("a").each(function ()
{
    window.location.href = $(this).attr('href');
    // $(this).trigger('click');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T08:54:47.487

```
javascript: var validUrls = ["http://targetsite.com/votefraud1","http://targetsite.com/votefraud2","http://targetsite.com/votefraud3"];

function x() { 
 for(var a in document.getElementsByTagName("a")) {
   if(validUrls.indexOf(a.href) != -1){
      window.open(a.href,'');
    }
  }
}

x(); 
```

如果这不起作用，我们可能需要更多信息，了解点击事件在您尝试在其上玩投票系统的任何网站上究竟应该做什么

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-29T08:53:52.197

这对我有用

每个链接都在新标签中打开

```
$("a").each(function ()
{
    window.open($(this).attr('href'),"_blank");
}); 
```

如果第一次没有打开链接，那么您必须在网页上启用弹出窗口。

# wpf - 在 ListView 中按类别对项目进行分组

> ID：10648474
> 
> 赞同：0
> 
> 时间：2012-05-18T07:29:54.913
> 
> 标签：wpf, listview, collections

我有一个项目集合。`ObservableCollection<Channel> Channels;`

每个都`Channel`包含**名称**和**类别**属性。我想在`ListView`. 另外，我想单击**类别**扩展器，然后显示带有频道名称的频道列表。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:41:20.373

为单个通道制作一个 DataTemplate：

```
<DataTemplate x:Key="ChannelTemplate">
    <Expander Header="{Binding Name}">
        <ListBox ItemsSource="{Binding CategoryProperties}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding prop1}"/>
                        <TextBlock Text="{Binding prop2}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox>
        </ListBox>
    </Expander>
</DataTemplate> 
```

然后在 ListBox/View 中使用它：

```
<ListBox ItemsSource="{Binding Channels}" ItemTemplate="{StaticResource ChannelTemplate}" /> 
```

这假定您将 Window/UserControl 的 DataContext 属性设置为包含名为 Channels 的属性的对象。

**编辑**

您可能还想[查看 CollectionViewSource 以使用内置分组](http://www.wpftutorial.net/dataviews.html#grouping)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:34:01.087

您可以尝试查看此示例： http: [//msdn.microsoft.com/en-us/library/ms771309](http://msdn.microsoft.com/en-us/library/ms771309(v=VS.90).aspx) (v=VS.90).aspx ，我认为这应该让您清楚地了解如何继续。

# tsql - 需要启动代理工作并等待完成并获得成功或失败

> ID：10648475
> 
> 赞同：10
> 
> 时间：2012-05-18T07:29:55.697
> 
> 标签：tsql, sql-server-2005, sql-agent-job

我一直在尝试使用 SQL Server 2005 查找示例代码，我需要启动一个代理作业并等到它完成过程然后获得成功或失败。

我知道我可以使用

```
EXEC MSDB.dbo.sp_start_job @Job_Name = 'JobName' 
```

开始工作，但我找不到任何示例代码来轮询`msdb.dbo.sp_help_job`以了解它何时完成，然后找出它是成功还是失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T15:14:25.650

```
-- =============================================
-- Description: Starts a SQLAgent Job and waits for it to finish or until a specified wait period elapsed
-- @result: 1 -> OK
--          0 -> still running after maxwaitmins
-- =============================================
CREATE procedure [dbo].[StartAgentJobAndWait](@job nvarchar(128), @maxwaitmins int = 5) --, @result int output)
AS
BEGIN

set NOCOUNT ON;
set XACT_ABORT ON;

    BEGIN TRY

    declare @running as int
    declare @seccount as int
    declare @maxseccount as int
    declare @start_job as bigint
    declare @run_status as int

    set @start_job = cast(convert(varchar, getdate(), 112) as bigint) * 1000000 + datepart(hour, getdate()) * 10000 + datepart(minute, getdate()) * 100 + datepart(second, getdate())

    set @maxseccount = 60*@maxwaitmins
    set @seccount = 0
    set @running = 0

    declare @job_owner sysname
    declare @job_id UNIQUEIDENTIFIER

    set @job_owner = SUSER_SNAME()

    -- get job id
    select @job_id=job_id
    from msdb.dbo.sysjobs sj
    where sj.name=@job

    -- invalid job name then exit with an error
    if @job_id is null
        RAISERROR (N'Unknown job: %s.', 16, 1, @job)

    -- output from stored procedure xp_sqlagent_enum_jobs is captured in the following table
    declare @xp_results TABLE ( job_id                UNIQUEIDENTIFIER NOT NULL,
                                last_run_date         INT              NOT NULL,
                                last_run_time         INT              NOT NULL,
                                next_run_date         INT              NOT NULL,
                                next_run_time         INT              NOT NULL,
                                next_run_schedule_id  INT              NOT NULL,
                                requested_to_run      INT              NOT NULL, -- BOOL
                                request_source        INT              NOT NULL,
                                request_source_id     sysname          COLLATE database_default NULL,
                                running               INT              NOT NULL, -- BOOL
                                current_step          INT              NOT NULL,
                                current_retry_attempt INT              NOT NULL,
                                job_state             INT              NOT NULL)

    -- start the job
    declare @r as int
    exec @r = msdb..sp_start_job @job

    -- quit if unable to start
    if @r<>0
        RAISERROR (N'Could not start job: %s.', 16, 2, @job)

    -- start with an initial delay to allow the job to appear in the job list (maybe I am missing something ?)
    WAITFOR DELAY '0:0:01';
    set @seccount = 1

    -- check job run state
    insert into @xp_results
    execute master.dbo.xp_sqlagent_enum_jobs 1, @job_owner, @job_id

    set @running= (SELECT top 1 running from @xp_results)

    while @running<>0 and @seccount < @maxseccount
    begin
        WAITFOR DELAY '0:0:01';
        set @seccount = @seccount + 1

        delete from @xp_results

        insert into @xp_results
        execute master.dbo.xp_sqlagent_enum_jobs 1, @job_owner, @job_id

        set @running= (SELECT top 1 running from @xp_results)
    end

    -- result: not ok (=1) if still running

    if @running <> 0 begin
        -- still running
        return 0
    end
    else begin

        -- did it finish ok ?
        set @run_status = 0

        select @run_status=run_status
        from msdb.dbo.sysjobhistory
        where job_id=@job_id
          and cast(run_date as bigint) * 1000000 + run_time >= @start_job

        if @run_status=1
            return 1  --finished ok
        else  --error
            RAISERROR (N'job %s did not finish successfully.', 16, 2, @job)

    end

    END TRY
    BEGIN CATCH

    DECLARE
        @ErrorMessage    NVARCHAR(4000),
        @ErrorNumber     INT,
        @ErrorSeverity   INT,
        @ErrorState      INT,
        @ErrorLine       INT,
        @ErrorProcedure  NVARCHAR(200);

    SELECT
        @ErrorNumber = ERROR_NUMBER(),
        @ErrorSeverity = ERROR_SEVERITY(),
        @ErrorState = ERROR_STATE(),
        @ErrorLine = ERROR_LINE(),
        @ErrorProcedure = ISNULL(ERROR_PROCEDURE(), '-');

    SELECT @ErrorMessage =
        N'Error %d, Level %d, State %d, Procedure %s, Line %d, ' +
            'Message: '+ ERROR_MESSAGE();

    RAISERROR
        (
        @ErrorMessage,
        @ErrorSeverity,
        1,
        @ErrorNumber,    -- original error number.
        @ErrorSeverity,  -- original error severity.
        @ErrorState,     -- original error state.
        @ErrorProcedure, -- original error procedure name.
        @ErrorLine       -- original error line number.
        );

    END CATCH
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:17:41.907

您可以查阅 sysjobhistory 表中的[run_status](http://msdn.microsoft.com/en-us/library/ms174997.aspx)列。0 表示失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:00:22.613

Here is code that I wrote for this purpose. One caveat is that it does not handle the case where the job is already running when this procedure is executed.

```
CREATE PROCEDURE [admin].[StartAgentJobAndWaitForCompletion]
    @JobName    SYSNAME,
    @TimeLimit  INT         = 60,   --     Stop waiting after this number of minutes
    @Debug      BIT         = 0
AS
SET NOCOUNT ON;

DECLARE @JobId          UNIQUEIDENTIFIER,
        @Current        DATETIME,
        @Message        NVARCHAR(MAX),
        @SessionId      INT;

SELECT  @JobId = job_id
  FROM  msdb.dbo.sysjobs
 WHERE  name = @JobName;

IF @JobId IS NULL BEGIN
    RAISERROR ('No job named "%s"', 16, 1, @JobName) WITH NOWAIT;
    RETURN 1;
END;

EXEC msdb.dbo.sp_start_job @job_id = @JobId;

IF @Debug =1 BEGIN
    SET @Message = CONVERT(VARCHAR(19), CURRENT_TIMESTAMP, 120) + ' ' + @JobName     + ' started';
    RAISERROR (@Message, 0, 1) WITH NOWAIT;
END;

SET @Current = CURRENT_TIMESTAMP;
WAITFOR DELAY '00:00:02';   -- Allow time for the system views to be populated

WHILE DATEADD(mi, @TimeLimit, @Current) > CURRENT_TIMESTAMP BEGIN
    SET @SessionId = NULL;

    SELECT  TOP(1) @SessionId = session_id
      FROM  msdb.dbo.sysjobactivity sja
     WHERE  sja.job_id = @JobId
       AND  sja.start_execution_date IS NOT NULL
       AND  sja.stop_execution_date IS NULL
     ORDER  BY sja.start_execution_date DESC;

    IF @SessionId IS NULL
        BREAK;

    IF @Debug =1 BEGIN
            SET @Message = CONVERT(VARCHAR(19), CURRENT_TIMESTAMP, 120) + ' ' + @JobName     + ', Session: ' + CONVERT(VARCHAR(38), @SessionId);
        RAISERROR (@Message, 0, 1) WITH NOWAIT;
    END;

    WAITFOR DELAY '00:00:05';
                                                                                           END;

IF @Debug = 1 BEGIN
    SET @Message = CONVERT(VARCHAR(19), CURRENT_TIMESTAMP, 120) + ' ' + @JobName     + ' completed';
    RAISERROR (@Message, 0, 1) WITH NOWAIT;
END;

WAITFOR DELAY '00:00:02';   -- Allow time for the system views to be populated

RETURN 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:32:35.640

也许不是一个非常可靠的方法，但我可能会尝试让作业在进程开始和结束时写入某个表，并在我的客户端应用程序中轮询该表（或使用 ADO 事件来触发相应的事件处理程序）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T09:19:03.013

```
CREATE PROCEDURE dbo.usp_RunJobWithOutcome
@JobName sysname
, @RunTimeout int
, @RunStatus int output
AS
SET NOCOUNT ON

--Verify that this job exists
IF NOT EXISTS (SELECT 1 FROM msdb.dbo.sysjobs WHERE [name] = @JobName)
BEGIN
    SET @RunStatus = 5 --Unknown
    RAISERROR('Invalid job name ''%s''', 16, 245, @JobName);
    RETURN 1
END;

--Start the job
DECLARE @retval int;
exec @retval = msdb.dbo.sp_start_job @job_name=@JobName;

--If start succeeded, poll for completion
IF @retval = 0 
BEGIN
    PRINT N'Job started successfully';
    WAITFOR DELAY '00:00:05';

    DECLARE @JobRunTime int;
    SET @JobRunTime = 0;
    SET @RunStatus = 5; --Unknown -> default return

    WHILE @JobRunTime < @RunTimeout
    BEGIN
        WAITFOR DELAY '00:00:05';

        --SELECT statement below give the same result as 'sp_help_jobactivity' sys-proc
        SELECT @JobRunTime = CASE WHEN stop_execution_date IS NULL THEN DATEDIFF(SECOND, start_execution_date, GETDATE()) ELSE @RunTimeout END 
        FROM ( 
            SELECT ja.session_id, ja.job_id, j.[name] job_name, ja.run_requested_date, ja.run_requested_source, ja.queued_date, ja.start_execution_date
                , ja.last_executed_step_id, ja.last_executed_step_date, ja.stop_execution_date, ja.next_scheduled_run_date, ja.job_history_id
                , jh.[message], jh.run_status, jh.operator_id_emailed, jh.operator_id_netsent, jh.operator_id_paged
            FROM msdb.dbo.sysjobactivity ja
            JOIN msdb.dbo.sysjobs j ON ja.job_id = j.job_id
            LEFT JOIN msdb.dbo.sysjobhistory jh ON ja.job_history_id = jh.instance_id
            WHERE ja.session_id = (SELECT MAX(session_id) FROM msdb.dbo.sysjobactivity ja1 WHERE ja1.job_id = ja.job_id AND ja1.run_requested_date IS NOT NULL)
                AND j.[name] = @JobName
        ) JobActivity;
    END;

    --Get the final stats
    SELECT @RunStatus=run_status, @JobRunTime=DATEDIFF(SECOND, start_execution_date, stop_execution_date)
    FROM (
        SELECT ja.session_id, ja.job_id, j.[name] job_name, ja.run_requested_date, ja.run_requested_source, ja.queued_date, ja.start_execution_date
            , ja.last_executed_step_id, ja.last_executed_step_date, ja.stop_execution_date, ja.next_scheduled_run_date, ja.job_history_id
            , jh.[message], jh.run_status, jh.operator_id_emailed, jh.operator_id_netsent, jh.operator_id_paged
        FROM msdb.dbo.sysjobactivity ja
        JOIN msdb.dbo.sysjobs j ON ja.job_id = j.job_id
        LEFT JOIN msdb.dbo.sysjobhistory jh ON ja.job_history_id = jh.instance_id
        WHERE ja.session_id = (SELECT MAX(session_id) FROM msdb.dbo.sysjobactivity ja1 WHERE ja1.job_id = ja.job_id AND ja1.run_requested_date IS NOT NULL)
            AND j.[name] = @JobName
    ) JobActivity;

    PRINT N'Job completed in ' + CONVERT(nvarchar, @JobRunTime) + ' seconds.'
    IF @RunStatus = 1 RETURN 0; --Success
    ELSE RETURN 1; --Failed
END;
ELSE
BEGIN
    PRINT N'Job could not start';
    SET @RunStatus = 5 --Unknown
    RETURN 1; --failed
END;

GO
DECLARE @RunStatus int, @retval int
--Run for max 60 minutes
exec @retval=dbo.usp_RunJobWithOutcome @JobName='*<your job name here>*', @RunTimeout=3600, @RunStatus=@RunStatus output

SELECT @retval, @RunStatus
GO 
```

# http-headers - http 标头中的电子标签

> ID：10648478
> 
> 赞同：2
> 
> 时间：2012-05-18T07:30:13.763
> 
> 标签：http-headers

当我向文件发出 HEAD 请求时，我得到了 ETAG 标头，如下所示：

ETag：“49a81-3f-4c049ee89a31b”

在这第一部分是 Inode 其他字段是什么

谁能告诉我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:06:40.217

据我所知，ETag 只是任何字符串。

如果您的浏览器与服务器上的匹配，您将收到一条 304 消息，未更改，如果不是，您将收到 200 以及新版本。

实际上，不同的实现可能会添加 Inode 或日期或任何东西。

我个人使用版本号来强制在我们更新应用程序时加载新的 js 脚本版本。

ETag 上的其他帖子：
[HTTP：](https://stackoverflow.com/questions/4533/http-generating-etag-header)
[为 ETag 生成 ETag 标头语法？](https://stackoverflow.com/questions/6719214/what-constitutes-a-valid-etag)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:43:24.417

从维基百科我得到了这个信息：

ETag 是由 Web 服务器分配给在 URL 中找到的特定版本资源的不透明标识符。如果该 URL 上的资源内容发生变化，则会分配一个新的不同的 ETag。以这种方式使用 ETag 类似于指纹，可以快速比较它们以确定资源的两个版本是否相同。

比较 ETag 仅对一个 URL 有意义——从不同 URL 获得的资源的 ETag 可能相等，也可能不相等。因此，从它们的比较中无法推断出任何意义。

据我所知，etag 用于检查文件自下载后是否已被修改。

在您的 Etag 中，这些部分可能表示：可以使用 inode-file_size-last_modified_time。我不确定。

而且大卫的帖子有更多的信息。也跟着那个。这些信息真的很好而且很有用。

# exception - 在 asp 中将数据类型 nvarchar 转换为位时出错

> ID：10648483
> 
> 赞同：1
> 
> 时间：2012-05-18T07:30:36.173
> 
> 标签：exception, asp-classic, commandparameter

我有一个asp应用程序。

我正在使用以下代码：

```
Comm.Parameters.Append Comm.CreateParameter("@IsSecure", adBoolean, adParamInput, , True) 
```

我使用了参数并且数据类型设置为`Boolean`. 但是每当我执行它时，我都会收到错误

> 将数据类型 nvarchar 转换为位时出错

我做错什么了吗？

谁能帮我解决这个问题。

# clojure - 注释掉导致 clojure 运行时错误的代码

> ID：10648485
> 
> 赞同：2
> 
> 时间：2012-05-18T07:30:40.770
> 
> 标签：clojure, comments, geoip

上下文：我正在编写要在 Amazon EMR 中运行的 Cascalog 作业。Cascalog 是一个基于 clojure 的运行 MapReduce 的库。当作业由于一些奇怪的类加载异常而失败时。

在工作中，我使用了一个名为 geocoder 的库，它是一个基于 clojure 的 geoip 查找库。特别是我使用了查看 maxmind GeoLiteCity.dat 文件的库部分。我发现导致作业失败的代码部分是使用地理编码器库的部分。**

最奇怪的是，虽然删除这部分代码会导致工作成功，但注释掉不会......只是想知道是否有人知道发生了什么？

** 我像这样使用地理编码器库的方式

(ns utils.geoip (:use [geocoder.core]))

然后我的工作将需要以上

(ns myjob (:require [utils.geoip :as geoip]))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:01:57.340

您的问题的答案可能取决于您使用哪种技术来注释掉有问题的代码？即您使用`;`的是多行宏还是多行`(comment foo)`宏？

我问的原因是，虽然注释掉的代码`;`被完全忽略了，但`comment`宏需要一个语法正确的 S 表达式作为主体；因此，一个简单的语法错误可能会导致您认为被忽略的代码中出现意外错误。

换句话说：注释宏不允许任意文本。

# python - 从字符串中删除单词的第一次出现？

> ID：10648490
> 
> 赞同：24
> 
> 时间：2012-05-18T07:31:09.113
> 
> 标签：python, regex

我不熟悉正则表达式，如果有人使用正则表达式提供解决方案可以解释他们的语法，这样我就可以将它应用于未来的情况，那就太好了。

我有一个字符串（即。`'Description: Mary had a little lamb'`），我想删除`'Description: '`这样的字符串，`'Mary had a little lamb,'`但只读取第一个实例，这样如果字符串是`'Description: Description'`，新字符串将是`'Description.'`

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-18T07:35:52.737

Python 的[str.replace](http://docs.python.org/library/string.html#string.replace)有一个最大替换参数。因此，在您的情况下，请执行以下操作：

```
>>>mystring = "Description: Mary had a little lamb Description: "
>>>print mystring.replace("Description: ","",1)

"Mary had a little lamb Description: " 
```

使用正则表达式基本上是一样的。首先，获取您的正则表达式：

```
"Description: " 
```

由于 Python 对正则表达式非常好，因此在这种情况下，它只是您要删除的字符串。有了它，你想在 re.sub 中使用它，它也有一个 count 变量：

```
>>>import re
>>>re.sub("Description: ","",mystring,count=1)
'Mary had a little lamb Description: ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:21:10.890

此正则表达式适用于任何“单词”，而不仅仅是“描述：”

```
>>> import re
>>> s = 'Blah: words words more words'
>>> print re.sub(r'^\S*\s', '', s)
words words more words
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:34:54.927

使用`regex`仅指定计数参数，如`1`. `re.sub`尽管在这种情况下似乎`regex`不需要。

```
>>> import re
>>> text = 'Description: Mary had a little lamb'
>>> re.sub('Description: ','',text,1)
'Mary had a little lamb' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-25T13:35:14.850

您可以不使用正则表达式，通过将`count`arg 设置为 1 来使用替换功能：

```
>>> string = 'Description: Mary had a little lamb Description'
>>> string.replace('Description', '', 1)
'Mary had a little lamb Description' 
```

# testing - 就 vuser 而言，Jmeter vs LoadRunner

> ID：10648491
> 
> 赞同：4
> 
> 时间：2012-05-18T07:31:12.913
> 
> 标签：testing, jmeter, performance-testing, loadrunner

我发现了相互矛盾的信息，一个说 JMeter 可以产生比 LR 更多的负载，另一个说相反。据我所知（如果我们不考虑许可），每个 LoadGenerator 仅受硬件限制。但JMeter也是如此。文档对我帮助不大。有没有人有这两个方面的经验，所以他可以比较？我说的是大约 2 000-4000 个用户。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T08:10:44.807

众所周知，LoadRunner 可以很好地运行非常大容量的测试，开箱即用。

JMeter 通常会在以下场景中遇到高吞吐量、高线程测试的问题：

1.  使用一台机器，有很多侦听器，在 GUI 模式下运行 - 这会占用内存。
2.  在版本 < 2.9 的默认配置中使用分布式模式，在 Load Generator 上运行测试没有问题，但向主计算机发送结果存在瓶颈。据报道，此问题已在 2.9 中解决，并且据称在 2.10 中吞吐​​量更高。

问题是，解决 JMeter 的问题并不难。这只是最佳实践的问题。

1.  从命令行运行，不要使用大量的侦听器。精益和平均模式。
2.  在分布式执行中，使用批处理模式来减少在版本 < 2.9 中写入一个文件的样本量，或使用 >= 2.9 的默认配置。
3.  确保将测试分布在足够多的硬件上。顺便说一下，LoadRunner 也是如此。

您应该阅读这 2 个文档以了解其他最佳实践：

*   [http://www.ubik-ingenierie.com/blog/jmeter_performance_tuning_tips/](http://www.ubik-ingenierie.com/blog/jmeter_performance_tuning_tips/)
*   [http://jmeter.apache.org/usermanual/best-practices.html](http://jmeter.apache.org/usermanual/best-practices.html)

LoadRunner 在高负载时也存在问题 - 分析和数据整理阶段可能需要数小时（字面意思），而您无法解决这个问题。如果您有太多数据需要分析，您也可能会遇到内存问题。Jmeter 在结果分析方面并不全面，但速度更快。

如果您真的需要大量测试，那么我编写了一个[脚本](https://github.com/oliverlloyd/jmeter-ec2)，该脚本有效地为您提供了 JMeter 的无限可扩展性——我已经测试了多达 20000 个用户，在 50 台服务器上运行时每秒点击 8000 次。它是“无限的”，因为它通过运行大量孤立的测试来工作，这些测试在测试结束之前不会相互通信，这样编译结果就不会出现瓶颈。但总有另一个瓶颈在某个地方......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T14:37:58.207

这两种工具都有你注意到的级别的跟踪记录，2-4K 用户。橡胶与道路相遇的地方在于以质量 Y 交付测试 X 所需的劳动力，包括详细分析。如果您正在研究这两种工具，那么您应该考虑在您的应用程序上使用 POC。

独立于任一工具记录您的脚本和所需的分析级别，然后聘请这两个方面的专家根据您的要求运行 POC。为所有任务计时，甚至要求人们在文档中输入任务开始时间和任务结束时间。比较 POC 结束时的时间和输出。

您应该意识到，当您去市场寻找任一工具的专家时，性能测试市场中的技能完全欺诈水平约为 97%（或更高）。您想雇用具有最强和最长记录的人，并且正在考虑使用具有许多参考的工具，否则您可能会对一个或两个工具的功能和效率有一个可怕的扭曲看法，这可能会导致一个糟糕的决定工具选择。

期望为这两种工具雇用您内部可能没有的技能。许多人认为，性能测试工具代表了性能测试工作所需技能的 85-90%。反之亦然，工具技能运行在成功所需技能（关键技能）的 10-15% 之间。

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2014-01-16T17:32:41.630

Jmeter 是为穷人准备的。Jmeter 只能测试特定种类的 Java 应用程序。它不支持 ERP 应用程序或 web 2.0。您可以将 Jmeter 连接到 ERP 应用程序并尝试记录它。6 周后 Jmeter 仍然无法工作。

# java - 在 ArrayList Java 中操作字符串

> ID：10648497
> 
> 赞同：0
> 
> 时间：2012-05-18T07:31:40.903
> 
> 标签：java

我有很多字符串，我把它放在一个列表中。所有字符串都有这种形式：

\n 阿贾克斯\n

\n JavaScript\n

我刚刚从服务器中检索并输入了一个列表：

```
takedata.add(result.getBody().getTitle()); 
```

我怎样才能在两边剪掉 \n ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:36:25.250

```
List<String> list = new ArrayList<String>();
list.add("\n Ajax\n");
list.add("\n JavaScript\n");

for(int i = 0; i < list.size(); i++)
{
    String s = list.get(i).trim();
    list.set(i, s);
} 
```

* * *

**编辑：**

> 我刚刚从服务器中检索并放入了一个列表：

```
takedata.add(result.getBody().getTitle()); 
```

> 我怎样才能在两边剪掉 \n ？

简单地说，使用`trim()`：

```
takedata.add(result.getBody().getTitle().trim()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:40:06.967

标题说ArrayList，所以

如果你有`ArrayList<String> list`，你可以使用该方法`replaceAll(String what, String withWhat)`

并且应该调用该方法`list.get(someIndex)`

IE>`list.get(1).replaceAll("\\n","")` 请记住，您需要插入 \ \ 以便 java 读取您要替换的 \

# html - IE 兼容性问题。图像溢出到下一行

> ID：10648498
> 
> 赞同：0
> 
> 时间：2012-05-18T07:31:48.987
> 
> 标签：html, css, internet-explorer, dreamweaver, compatibility

我对 Dreamweaver 很陌生。我有问题。我有一个在 Firefox、Chrome 和 Safari 中运行良好的网站，但问题出在 IE 上。出于某种原因，我的“div logos”部分中的最后一张图片溢出到下面的行，尽管我在样式表中将它设置得足够宽以适应这张图片和更多图片。

访问此处查看：www.innexdesign.co.uk/dev

我也会粘贴下面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta name="keywords" content=" Innex Design, design, designers warrington, interior design warrington, cheshire, northwest, manchester, liverpool, pub designers,bar designers, architect, architects, carbon neutral, design manchester, designer in warrington, architect warrington" />
    <meta name="description" content=" From a house extension or housing estate, to commercial warehouses’, leisure centres and bars, Innex Design can help develop any idea into a practical, ethical, sustainable reality." />
    <meta name="robots" content="index,follow" />
<!-- #BeginEditable "doctitle" -->
<title>Innex Design</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <link rel="stylesheet" type="text/css" href="./fancybox/jquery.fancybox-1.3.4.css" media="screen" />    
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="./fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
    <script type="text/javascript" src="./fancybox/jquery.fancybox-1.3.4.pack.js"></script>
    <script type="text/javascript">
$(document).ready(function() {

            $(".various1").fancybox({
                'titlePosition'     : 'inside',
                'transitionIn'      : 'none',
                'transitionOut'     : 'none'
            });
        });
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
    </script>   
<style type="text/css">
body {
    background-repeat: repeat-x;
}
</style>
</head>

<body onload="MM_preloadImages('images/architectureBLACK.png','images/interior-designBLACK.png','images/project-managementBLACK.png','images/cost-managementBLACK.png','images/PlanningBLACK.png','images/SurveyingBLACK.png','images/energy-assessmentsBLACK.png','images/landscape-architectureBLACK.png','images/Design-&amp;-BuildBLACK.png')">
<div id="header">
            <div id="headerimgs">
                <div id="headerimg1" class="headerimg"></div>
                <div id="headerimg2" class="headerimg"></div>

  </div>
    <div id="logo"> 
    <a href="index.html" target="_self"><img src="images/innexdesign_logo.jpg" width="143" height="206" alt="Innex Design Logo" /></a>
    </div>
    <div id="social">
        <a href="http://twitter.com/#!/InnexDesign" target="_new"><img src="images/twitter.png" width="41" height="40" alt="Innex Design on Twitter" /></a>
        <a href="http://www.facebook.com/innexdesignltd" target="_new"><img src="images/facebook.png" width="41" height="40" alt="Innex Design on Facebook" /></a>
         <a href="contactform.html" title="Request a Callback" target="_new"><img src="images/callback.png" alt="" width="77" height="40" /></a>
        <a href="contactform.html" title="Leave Your Details and Sign up to our News Letter" target="_new"><img src="images/Newsletter Image.png" alt="" width="77" height="40" /></a></div>
    </div><!-- end header -->

<div id="content">

    <div id="homeleft">
    <ul class="menu">
    <li class="first"><a href="index.html">HOME</a></li>
    <li><a href="profile.html">PROFILE</a></li>
    <li><a href="services.html">DESIGNS</a></li>
    <li><a href="testimonials.html">TESTIMONIALS</a></li>    
    <li class="last"><a href="contact.html">CONTACT</a></li>
    </ul>

    <p style="text-align:center; font-weight:bold;">CELEBRATING<br /><span style="font-size:22px">21</span><br />YEARS<br />1991-2012</p>

    </div>

  <div id="homeright">

<a class="various1" href="#architecture" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Architecture','','images/architectureBLACK.png',1)"><img src="images/architecture.png" alt="Architecture" width="195" height="31" id="Architecture" style="padding:0px 20px;float:left;"/></a>
 <a class="various1" href="#idesign" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('interiordesign','','images/interior-designBLACK.png',1)"><img src="images/interior-design.png" alt="Interior Design" width="195" height="31" id="interiordesign" style="padding:0px 0px 5px 20px; float:right;"/></a>
   <a class="various1" href="#pmanage" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Projman','','images/project-managementBLACK.png',1)"><img src="images/project-management.png" alt="Project Managment" width="195" height="31" id="Projman" style="padding:20px 42px 5px 20px;float:left;"/></a>
<a class="various1" href="#planning" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Planning','','images/PlanningBLACK.png',1)"><img src="images/Planning.png" alt="Planning" width="195" height="31" id="Planning" style="padding:10px 12px 5px 0px;float:right;"/></a>

  <a class="various1" href="#energy" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Energy Assessment','','images/energy-assessmentsBLACK.png',1)"><img src="images/energy-assessments.png" alt="Energy Assessments" width="195" height="31" id="EnergyAssessment" style="padding:0px 42px 0px 20px;float:right;"/></a>
  <a class="various1" href="#surveying" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Surveying','','images/SurveyingBLACK.png',1)"><img src="images/Surveying.png" alt="Surveying" width="195" height="31" id="Surveying" style="padding:10px;float:left;" /></a>
  <a class="various1" href="#cost" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('CostManagement','','images/cost-managementBLACK.png',1)"><img src="images/cost-management.png" alt="Cost Management" width="195" height="31" id="CostManagement" style="padding:0px 12px 0px 20px; float:left;"/></a>
  <a class="various1" href="#land" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('landscape','','images/landscape-architectureBLACK.png',1)"><img src="images/Landscape-Architecture.png" alt="Landscape Architecture" width="195" height="31" id="landscape" style="padding:20px 0px 0px 20px; float:right;" /></a>
    <div id="various1"> <a href="http://www.innexdevelopments.co.uk" target="_blank"  onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('DesignBuild','','images/Design-&amp;-BuildBLACK.png',1)"><img src="images/Design-&amp;-Build.png" alt="Design &amp; Build" width="195" height="31" id="DesignBuild" style="padding:10px 0 0 0px;float:left;"/></a>
    </div>

<div style="display:none"><div id="architecture">
        <img src="images/architecture.png" width="195" height="31" alt="Architecture" />
        <p style="padding:0px 0px 5px 0px; width:500px;">From a house extension or housing estate, to commercial warehouses’, leisure centres and bars, Innex Design can help develop any idea into a practical, ethical, sustainable reality.</p>  
    </div></div>

        <div style="display:none"><div id="idesign">
        <img src="images/interior-design.png" width="195" height="31" alt="Interior Design" />
        <p style="padding:0px 0px 5px 0px; width:500px;">Innex Design’s Interior and brand development designers are experts in spatial design, brand development and awareness, signage and menu design all of which is complimented with the interior design package delivered.</p>   
        </div></div>

        <div style="display:none"><div id="pmanage">
        <img src="images/project-management.png" width="195" height="31" alt="Project Management" />
        <p style="padding:0px 0px 5px 0px; width:500px;">Many of our architectural and interior design developments are project managed ensuring the brief and end aim is delivered on time and on budget. Only with project management can we ensure our clients that the specification and quality is to the highest standard.</p>
        </div></div>

        <div style="display:none"><div id="planning">
        <img src="images/Planning.png" width="195" height="31" alt="Planning" />
        <p style="padding:0px 0px 5px 0px; width:500px;">Innex Design undertake all planning application submissions from residential, commercial, listed and conservation area consents, national park along with Display of Advertisement applications. We also work with planning consultants to add value for developers and lenders by assessing land and building use potential.</p>
        </div></div>

         <div style="display:none"><div id="surveying">
        <img src="images/Surveying.png" width="195" height="31" alt="Surveying" />
        <p style="padding:0px 0px 5px 0px; width:500px;">Innex Design can provide a wide variety of surveys from measured & condition surveys of buildings, Topographical surveys, Structural surveys, Party Wall surveys, and provide assistance with Asbestos surveys, Land/Probate surveys, certification and many more.</p>
        </div></div>

        <div style="display:none"><div id="energy">
        <img src="images/energy-assessments.png" width="195" height="31" alt="Energy Assessments" />
        <p style="padding:0px 0px 5px 0px; width:500px;">Innex Design can assist with providing full building services design & energy consultancy, and through one of our partners BREEAM assessment, Commercial EPC, Domestic EPC, Display energy certificates, New Build SAP or SBEM reports & Sustainability statements.</p>
        </div></div>

         <div style="display:none"><div id="cost">
        <img src="images/cost-management.png" width="195" height="31" alt="Cost Management" />
        <p style="padding:0px 0px 5px 0px; width:500px;">Innex Design offer all clients a comprehensive service that removes the burden of day to day costs-related issues.</p>
        </div></div>

        <div style="display:none"><div id="land">
        <img src="images/Landscape-Architecture.png" width="195" height="31" alt="Landscape Architecture" />
        <p style="padding:0px 0px 5px 0px; width:500px;">We undertake all aspects of landscape architecture, from landscape master planning, conceptual design through to detailed planting schemes. We adopt a fresh approach to the design of each project where a high degree of design flair and innovation comes as standard. </p>
        </div></div>

         <div style="display:none"><div id="build">
        <img src="images/Design-&amp;-Build.png" width="195" height="31" alt="Design &amp; Build" />
        <p style="padding:0px 0px 5px 0px; width:500px;">In today’s industry and marketplace some clients prefer a one point of contact approach to projects, with this in mind we have developed a nationwide network of partnering contractors to enable clients to have the one point contact, whilst ensuring delivery of excellent quality and standards of workmanship.</p>
        </div></div>        

  </div>
</div><!-- end content -->
</div><!-- end wrapper -->

        <div id="logosother">
           <div class="logos">
        <a href="http://www.altiusva.com/ " target="_blank"><img src="images/altius-logo.jpg" width="107" height="50" alt="Altius Logo" /> </a> 
        <a href="http://www.chas.gov.uk " target="_blank"><img src="images/chas-logo.jpg" width="43" height="50" alt="Chas Logo" /></a>
         <a href="http://www.constructionline.co.uk/static/" target="_blank"><img src="images/Construction line.jpg" width="43" height="50" alt="Construction Line" longdesc="http://www.constructionline.co.uk/static/" /></a>   
         <a href="http://www.eurosafeuk.co.uk/ " target="_blank"><img src="images/Eurosafe.jpg" width="43" height="50" alt="Eurosafe" longdesc="http://www.eurosafeuk.co.uk/ " /></a> 
          <a href="http://committedtoequality.co.uk" target="_blank"><img src="images/commitedtoequality.jpg" width="43" height="50" alt="Commited To Equality" longdesc="http://committedtoequality.co.uk" /></a>
         <a href="http://bii.bii.org/home" target="_blank"><img src="images/BII.jpg" alt="BII" width="43" height="50" longdesc="http://bii.bii.org/home" /></a></div>

        <div class="carbon"><a href="images/Carbon Managment Plan.pdf" target="_new"><img src="images/carbon-logo.jpg" width="149" height="85" alt="Carbon Neutral Logo" /></a></div>
</div>
<div id="footer">
    <p style="float:left">Copyright &copy; 2012 - Innex Design           </p>
    <p style="float: left">Privacy Policy</p>
    <p style="float: left"><a href="images/Sustainability Policy.pdf" target="_new">Sustainability Policy</a></p>
    <p style="float: left"><a href="images/Equal Ops Policy.pdf" target="_new">Equal Opportunities Policy</a></p>
<p style="float:right">Designed by <a href="http://www.swan-solutions.com" target="_blank" title="Swan Solutions"><img src="images/swan-solutions.jpg" alt="Swan Solutions" width="100" height="20" align="middle" /></a></p>
</div>
<script type="text/javascript">

  var _gaq = _gaq || [];

  _gaq.push(['_setAccount', 'UA-25186334-1']);

  _gaq.push(['_trackPageview']);

  (function() {

    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;

    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

  })();

</script>
</body>
</html>

@font-face {
   font-family: shruti;
   src: url(‘shruti.ttf’);
}

html, body, div, ul {
    margin: 0;
    padding: 0;
}

body {
    background-color : #040404;
    background-image : url(images/bk.jpg);
    background-position : top;
    background-repeat : repeat-x;
    margin : 0;
    padding : 0;
    font-family : shruti, Arial, Geneva;
    font-size : 90%;
    line-height:100%;
}
p {
    font-family : shruti, Arial, Geneva;
    font-weight:bold;
    font-size : 100%;
    line-height:normal;
    padding: 5px;
}
h1 {
    font-size : 24px;
    padding-bottom:10px;    
}

h2 {
    padding-bottom:10px;
}
ul {
    list-style : none;
    padding : 0;
    margin : 0;
}
a:link {
    color : #000;
    text-decoration : none;
    color : #000;
}
a:active {
    font-style : italic;
    color : #000;
}
a:visited {
    font-style : italic;
    color : #00C;
}
a {
    outline: none;
}

a img {
    vertical-align: top;

}

a img.last {
    margin-right: 0;    
}

img {
    border : none;
}
#wrapper {
    width : 994px;
    margin : 0 auto;
    background-color : #e3d9b9;
}
#header {
    width : 994px;
    height : 483px;
    margin : 0 auto;
}
#page {
    width : 994px;
    position : relative;
    background-image : url(images/page_bk.jpg);
    background-repeat : no-repeat;
    background-position : top;
    background-color : #b08f40;
}
#pageheader {
    width : 100%;
    height : 220px;
    position : relative;
    background-image : url(images/header_bk.png);
    background-repeat : no-repeat;
    background-position : top;
}
#logo {
width : 143px;
height : 206px;
position : relative;
padding : 10px 10px 0 10px;
float : left;
}
#social {
float : left;
padding : 10px 10px 0 10px;
}
#content {
    width : 994px;
    min-height:200px;
    margin : 0 auto;
    padding : 0;
    background-image : url(images/homepage_bk.jpg);
    background-position : top;
    background-repeat : no-repeat;
    background-color : #b08f40;
    overflow:auto;
}
#logosother {
    height: 160px;
    width: 994px;
    margin: 0 auto;
    background-color: #e3d9b9;
    background-image: url(images/top_footer.jpg);
    background-position: top;
    background-repeat: no-repeat;
    clear:both;

}
.logos {
    height:52px;
    width: 400px;
    padding: 10px;
    float:left;
    margin-top:82px;
    background-color : #e3d9b9;
}
.carbon {
    height:90px;
    width: 159px;
    padding: 10px;
    float:right;
    margin-top:42px;
    background-color : #e3d9b9;
}
.googleplus {
    width:50px;
    height:32px;
    padding: 10px;
    margin-top:98px;
    margin-left:130px;  
    float:left;
}
.homelogos {
    height:52px;
    width: 974px;   
    padding: 10px;
    float:left;
    margin-top:52px;
    background-color : #e3d9b9; 
}
#pagecontent {
    width : 100%;
    padding : 0;
    overflow : auto;
}
#left {
    width : 200px;
    float : left;
}
#homeleft {
    width : 200px;
    float : left;
}
.menu {
    margin-left : 10px;
    margin-top : 20px;
    margin-bottom : 10px;
}
.menu li {
    border-bottom : 1px solid #f9f5e7;
    border-top : 1px solid #a79c78;
    padding-bottom : 5px;
    padding-top : 5px;
    padding-left : 10px;
}
.menu li a {
    font-size : 18px;
    color : #000;
    font-weight:bold;
}
.menu li a:hover {
    font-weight : bold;
    font-style : italic;
    color : #000;
}
.menu li a:active {
    font-weight : bold;
    font-style : italic;
    color : #000;
}
.menu li a:visited {
    font-weight : bold;
    font-style : italic;
    color : #000;
}
.menu .first {
    border-top : none;
}
.menu .last {
    border-bottom : none;
}
#homeright {
    width : 700px;
    margin-left : 20px;
    float : left;
    padding-top : 20px;
    overflow:auto;

}
#right {
    width : 700px;
    margin-left : 20px;
    float : left;
    font-size : 14px;
    font-weight : normal;
    line-height : normal;
    padding-top : 20px;
}
#newright {
width : 730px;
min-height:300px;
float : left;
font-size : 14px;
font-weight : bold;
line-height : 135%;
margin-left : 30px;
padding-top : 20px;
}
.service_menu {
width : 190px;
float:left;
}
.service_menu li {
padding : 8px 0;
width:180px;
border-bottom:1px solid #000;
}
.service_menu li a {
font-size : 14px;
color : #000;
}
.service_menu li a:hover {
font-weight : bold;
font-style : italic;
color : #000;
}
.service_menu li a:active {
font-weight : bold;
font-style : italic;
color : #000;
}
.service_menu li a:visited {
color : #000;
}
.service_menu .first {
border-top : none;
}
.service_menu .last {
border-bottom : none;
}
.serv {
    min-height:300px;
}
.des3 {
float : left;
width : 300px;
margin-left:20px;
}
.desimg3 {
float : left;
width : 340px;
}
#footer {
    width : 984px;
    height : 40px;
    margin : 0 auto;
    font-size : 12px;
    padding : 5px;
    clear : both;
    background-image : url(images/footer_bk.jpg);
    background-repeat : repeat-x;
    color: #000;
}

.msg_list {
margin : 0;
padding : 0;
width : 670px;
float : left;
}
.msg_head {
cursor : pointer;
position : relative;
background-image : url(images/expand_bk.png);
background-repeat : repeat-x;
height : 29px;
line-height : 29px;
color : #000;
margin : 1px;
font-size : 12px;
padding-left : 10px;
}
.msg_head :hover {
padding : 5px 10px;
cursor : pointer;
position : relative;
background-color : #fff;
color : #fff;
margin : 1px;
font-size : 16px;
}
.msg_body {
overflow : auto;
padding : 10px 10px;
}
.msg_body p {
font-size : 12px;
line-height : 150%;
font-weight : normal;
}
.des {
float : left;
width : 300px;
padding-right:10px;
}
.desimg {
float : left;
width : 340px;
}

.msg_list1 {
margin : 0;
padding : 0;
width : 300px;
float : left;
}
.msg_head1 {
cursor : pointer;
position : relative;
height : 31px;
}
.msg_head1 :hover {
cursor : pointer;
position : relative;
}
.msg_body1 {
overflow : auto;
padding : 0 10px;
}
.msg_body1 p {
font-size : 12px;
line-height : 150%;
font-weight : normal;
}
.des1 {
float : left;
width : 300px;
margin-right : 10px;
margin-bottom:10px;
margin-top:10px;
}

.desimg1 {
float : left;
width : 340px;
}

.newdes {
float : left;
width : 340px;
margin-right : 10px;
}
.msg_list2 {
margin : 0;
padding : 0;
width : 360px;
float : left;
}
.msg_head2 {
cursor : pointer;
position : relative;
background-image : url(images/expand_bk.png);
background-repeat : repeat-x;
height : 31px;
line-height : 31px;
color : #000;
margin : 1px;
font-size : 12px;
padding-left : 10px;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
-khtml-border-radius: 5px; /* for old Konqueror browsers */
}
.msg_head2 :hover {
cursor : pointer;
position : relative;
margin : 1px;
}
.msg_body2 {
overflow : auto;
padding : 0 10px;
margin-bottom:10px;
}
.msg_body2 p {
font-size : 12px;
line-height : 150%;
font-weight : normal;
padding:0px;
}
.newdes2 {
float : left;
width : 340px;
margin-bottom:10px;
}
.desimg2 {
float : left;
width : 340px;
}

.servintro {
margin : 0;
padding : 0;
width : 700px;
overflow : auto;
}
.servintrotext {
float : left;
width : 270px;
padding : 0 10px 10px 10px;
}
.servintroimg {
float : left;
width : 340px;
}
#slider {
width : 994px;
height : 483px;
margin-bottom : 10px;
margin-left : auto;
margin-right : auto;
}
#slider ul, #slider li {
margin : 0;
padding : 0;
list-style : none;
}
#slider li {
width : 994px;
height : 483px;
overflow : hidden;
}
.headerimg {
background-position : center top;
background-repeat : no-repeat;
width : 994px;
height : 483px;
position : absolute;
}
.testimonial {
border : 1px solid #000;
padding : 10px;
margin-bottom : 10px;
margin-top : 10px;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-khtml-border-radius: 10px; /* for old Konqueror browsers */
}
.office {
border : 1px solid #000;
padding : 10px;
margin-bottom : 10px;
margin-top : 10px;
width:100%;
height:265px;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-khtml-border-radius: 10px; /* for old Konqueror browsers */
}
* {
padding : 0;
}
#TB_window {
font : 12px Arial, Helvetica, sans-serif;
color : #333333;
}
#TB_secondLine {
font : 10px Arial, Helvetica, sans-serif;
color : #666666;
}
#TB_window a:link {
color : #666666;
}
#TB_window a:visited {
color : #666666;
}
#TB_window a:hover {
color : #000;
}
#TB_window a:active {
color : #666666;
}
#TB_window a:focus {
color : #666666;
}
#TB_overlay {
position : fixed;
z-index : 100;
top : 0;
left : 0;
height : 100%;
width : 100%;
}
.TB_overlayMacFFBGHack {
background : url(macFFBgHack.png) repeat;
}
.TB_overlayBG {
background-color : #000;
}
* html #TB_overlay {
position : absolute;
}
#TB_window {
position : fixed;
background : #ffffff;
z-index : 102;
color : #000000;
display : none;
border : 4px solid #525252;
text-align : left;
top : 50%;
left : 50%;
}
* html #TB_window {
position : absolute;
}
#TB_window img#TB_Image {
display : block;
margin : 15px 0 0 15px;
border-right : 1px solid #ccc;
border-bottom : 1px solid #ccc;
border-top : 1px solid #666;
border-left : 1px solid #666;
}
#TB_caption {
height : 25px;
padding : 7px 30px 10px 25px;
float : left;
}
#TB_closeWindow {
height : 25px;
padding : 11px 25px 10px 0;
float : right;
}
#TB_closeAjaxWindow {
padding : 7px 10px 5px 0;
margin-bottom : 1px;
text-align : right;
float : right;
}
#TB_ajaxWindowTitle {
float : left;
padding : 7px 0 5px 10px;
margin-bottom : 1px;
}
#TB_title {
background-color : #e8e8e8;
height : 27px;
}
#TB_ajaxContent {
clear : both;
padding : 2px 15px 15px 15px;
overflow : auto;
text-align : left;
line-height : 1.4em;
}
#TB_ajaxContent.TB_modal {
padding : 15px;
}
#TB_ajaxContent p {
padding : 5px 0 5px 0;
}
#TB_load {
position : fixed;
display : none;
height : 13px;
width : 208px;
z-index : 103;
top : 50%;
left : 50%;
margin : -6px 0 0 -104px;
}
* html #TB_load {
position : absolute;
}
#TB_HideSelect {
z-index : 99;
position : fixed;
top : 0;
left : 0;
background-color : #fff;
border : none;
height : 100%;
width : 100%;
}
* html #TB_HideSelect {
position : absolute;
}
#TB_iframeContent {
clear : both;
border : none;
margin-bottom : -1px;
margin-top : 1px;
}
hr {
    border: none;
    height: 1px; line-height: 1px;
    background: #E5E5E5;
    margin-bottom: 20px;
    padding: 0;
}

.designimage {
    width:500px;
    height:300px;
    margin-bottom:10px;
    float:left;
    border:solid 2px #000;  
}
.designlogo {
    width:500px;
    height:100px;
    margin-bottom:10px;
    float:left; 
}
.mapleft {
    float:left;
    width:220px;
}
.mapcenter {
    float:left;
    width:260px;
    margin-bottom:10px;
}
.mapright {
    float:left;
    width:220px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:15:04.583

您有一个名为 all-ie-only.css 的 css 文件。

```
.logo { width: 350px; } // change it to 400px
.logo { width: 400px; } // it is the same width in style.css line 131 
```

如果你这样做，你不需要在 all-ie-only.css 中更改它。只需删除宽度。

# actionscript-3 - 如何在 Flash AIR 中录制本地声音？

> ID：10648500
> 
> 赞同：0
> 
> 时间：2012-05-18T07:31:54.393
> 
> 标签：actionscript-3

我想在 Flash 中制作一个自定义的 mp3 播放器，它可以一次播放 2 首歌曲，我想将这两首歌曲录制在一起以制作一个新的 mp3 文件。

我制作了一个可以一次播放 2 首歌曲的 mp3 播放器，但我不知道如何录制它们。

如果有人对此有任何信息，请帮助我。

维普尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:53:14.770

答案并不简单。由于缺乏富有表现力的 API，在 as3 和 air 中处理声音仍然不是一件容易的事。

我更建议你的是，这确实是我过去在类似情况下所做的，就是使用 NativeProcesses 作为低级语言的桥梁来处理这样的复杂任务。

我会用[Lame](http://lame.sourceforge.net/)作为一个好的 mp3 编码器，用[echoNest](http://code.google.com/p/echo-nest-remix/)来处理声音。本机进程所做的只是在空气箱外启动一个进程，然后等待响应。您应该做的只是创建一个 python 脚本，给定两个 mp3（以前通过空气保存在临时目录中）将其与 echonest-remix-api 混合，保存为 wav 并使用 lame 编码为 mp3。

# c# - 多个 SPGridView 过滤问题

> ID：10648503
> 
> 赞同：3
> 
> 时间：2012-05-18T07:32:19.183
> 
> 标签：c#, sharepoint-2010, spgridview

我创建了两个具有启用过滤功能的 SPGridView 的可视化 Web 部件。两个 SPGridView 都使用 ObjectDataSource（不是同一个实例，每个 SPGridView 都有自己的 ObjectDataSource）。

只要页面中只有一个 Web 部件，过滤就可以正常工作。但是在我添加第二个 webpart 之后，SPGridView 的 clear-filter 仅适用于第一个添加的 webpart。

我该如何解决这个问题？

谢谢， 帕诺斯

# objective-c - 为什么在删除对象时不触发 NSFetchedResultsChangeDelete？

> ID：10648507
> 
> 赞同：1
> 
> 时间：2012-05-18T07:32:42.293
> 
> 标签：objective-c, ios, xcode, uitableview, nsfetchedresultscontroller

Insert ( `NSFetchedResultsChangeInsert`) 在我的后台线程中工作，来自同一个线程，使用相同的 managedObjectContext 保存合并通知，因此得到正确保存，delete 不起作用（tableviews 中可见的删除动画因此不起作用）。

**更新了，现在显示我所有有问题的 SchedulesViewController.m 的代码：**

```
#import "SchedulesViewController.h"
#import "CustomScheduleTableViewCell.h"
#import <QuartzCore/QuartzCore.h>
#import "ViewScheduleViewController.h"

@implementation SchedulesViewController {
    NSIndexPath *deleteActionIndexPath;
}

@synthesize fetchedResultsController, managedObjectContext;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    if (managedObjectContext == nil) { 
        managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
    }

    self.title = @"Schema's";

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    NSError *error = nil;
    if (![[self fetchedResultsController] performFetch:&error]) {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    //storedReminderSchedules = nil;
    //context = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    NSLog(@"Schedules viewWillAppear");
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

#pragma mark - Table view data source
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[fetchedResultsController sections] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    // check if we really have any sections in the managed object:
    //if (!fetchedResultsController.sections.count) return @"Persoonlijk";

    id <NSFetchedResultsSectionInfo> sectionInfo = [[fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo name];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // check if we really have any sections in the managed object:
    //if (!fetchedResultsController.sections.count) return 0;

    id <NSFetchedResultsSectionInfo> sectionInfo = [[fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ScheduleCell";
    CustomScheduleTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    [self configureCell:cell atIndexPath:indexPath];
    return cell;
}

// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)configureCell:(CustomScheduleTableViewCell*)cell atIndexPath:(NSIndexPath*)indexPath {
    // Configure the cell.
    ReminderSchedule *reminderSchedule = [fetchedResultsController objectAtIndexPath:indexPath];
    cell.name.text = reminderSchedule.name;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[[[fetchedResultsController sections] objectAtIndex:indexPath.section] name] hasPrefix:@"Dr."]) {
        ViewScheduleViewController *controller = [[ViewScheduleViewController alloc]init];
        controller.reminderSchedule = [self.fetchedResultsController objectAtIndexPath:[self.tableView indexPathForSelectedRow]];
        controller.context = [fetchedResultsController managedObjectContext];
        [self.navigationController pushViewController:controller animated:YES];
    }
    else {
        [self performSegueWithIdentifier:@"EditSchedule" sender:self];
    }
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    return UITableViewCellEditingStyleDelete;
}

#pragma mark - ModifyScheduleViewControllerDelegate
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"AddSchedule"])
    {
        [TestFlight passCheckpoint:@"Add Schedule"];
        // Get reference to the destination view controller
        UINavigationController *navigationController = segue.destinationViewController;
        ModifyScheduleViewController *controller = [[navigationController viewControllers] objectAtIndex:0];
        controller.delegate = self;
        controller.fetchedResultsController = self.fetchedResultsController;
        [controller.navigationItem.rightBarButtonItem setEnabled:NO];
    }
    else if ([segue.identifier isEqualToString:@"EditSchedule"]) {
        [TestFlight passCheckpoint:@"Edit Schedule"];
        // Get reference to the destination view controller
        UINavigationController *navigationController = segue.destinationViewController;
        ModifyScheduleViewController *controller = [[navigationController viewControllers] objectAtIndex:0];
        controller.delegate = self;
        controller.fetchedResultsController = self.fetchedResultsController;
        controller.reminderSchedule = [self.fetchedResultsController objectAtIndexPath:[self.tableView indexPathForSelectedRow]];
    } 
}

#pragma mark -
#pragma mark Fetched results controller

- (NSFetchedResultsController *)fetchedResultsController {

    if (fetchedResultsController != nil) {
        return fetchedResultsController;
    }

    /*
     Set up the fetched results controller.
     */
    // Create the fetch request for the entity.
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"ReminderSchedule" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptorName = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:NO];
    NSSortDescriptor *sortDescriptorSection = [[NSSortDescriptor alloc] initWithKey:@"sectionName" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptorSection,sortDescriptorName, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext sectionNameKeyPath:@"sectionName" cacheName:@"Root"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    return fetchedResultsController;
}    

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {
    NSLog(@"didChangeSection");
    switch(type) {
        case NSFetchedResultsChangeUpdate: 
            [self.tableView reloadData]; 
            break;
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

// Notifies the delegate that section and object changes are about to be processed and notifications will be sent. 
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject 
       atIndexPath:(NSIndexPath *)indexPath 
     forChangeType:(NSFetchedResultsChangeType)type 
      newIndexPath:(NSIndexPath *)newIndexPath {

    switch (type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView  insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                                   withRowAnimation:UITableViewRowAnimationFade]; 
            break;
        case NSFetchedResultsChangeUpdate:
            [self configureCell:(CustomScheduleTableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath]
                    atIndexPath:indexPath];
            break;
        case NSFetchedResultsChangeDelete:
            [self.tableView  deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] 
                                   withRowAnimation:UITableViewRowAnimationFade]; 
            break;
        case NSFetchedResultsChangeMove:
            [self.tableView  deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] 
                                   withRowAnimation:UITableViewRowAnimationFade]; 
            [self.tableView  insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] 
                                   withRowAnimation:UITableViewRowAnimationFade]; 
            break;      
        default:
            break;
    }   
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];
} 

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration {
    [self.tableView reloadData];
}

@end 
```

**更新** 额外信息：

对象的插入和删除发生在同一个线程中，它们使用相同的 managedObjectContext 并使用相同的保存存储。事实上，第一个对象被插入，然后其他对象被删除，然后有一个保存。

我正在使用触发 AppDelegate 中的保存合并的 NSManagedObjectContextDidSaveNotification 进行保存。

**更新** 更多代码：

**AppDelegate.m**

```
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            // Replace this implementation with code to handle the error appropriately.
            // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
}

-(void)mergeChanges:(NSNotification *)saveNotification {
    NSLog(@"Merging and saving");
    if ([NSThread isMainThread])
        [self.managedObjectContext mergeChangesFromContextDidSaveNotification:saveNotification];
    else
        [self performSelectorOnMainThread:@selector(mergeChanges:) withObject:saveNotification waitUntilDone:NO];
} 
```

**BacgroundThread.m**

```
AppDelegate *theDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSNotificationCenter *notify = [NSNotificationCenter defaultCenter];

NSManagedObjectContext *newMoc = [[NSManagedObjectContext alloc] init];
[newMoc setPersistentStoreCoordinator:[theDelegate persistentStoreCoordinator]]; 
```

//为了说明而缩短了插入部分（插入效果很好）

```
ReminderSchedule *reminderSchedule = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:newMoc]; 
```

//实际删除部分代码

```
if ([jsonDict objectForKey:@"deletedSchedules"] != nil) {
    NSArray *deletedSchedules = [jsonDict objectForKey:@"deletedSchedules"];

    for (int i = 0; i < [deletedSchedules count]; i++) {
        NSInteger externalScheduleID = [[deletedSchedules objectAtIndex:i] intValue];

        NSLog(@"Removing schedule %d", externalScheduleID);

        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"ReminderSchedule" inManagedObjectContext:newMoc];
        [fetchRequest setEntity:entity];

        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"externalScheduleID == %d", externalScheduleID];
        [fetchRequest setPredicate:predicate];

        NSError *error = nil;
        NSArray *result = [newMoc executeFetchRequest:fetchRequest error:&error];

        for (NSManagedObject *managedObject in result) {
            [newMoc deleteObject:managedObject];
        }
    }
} 
```

//插入删除后保存

```
NSError *saveError = nil;
if (![newMoc save:&saveError]) {
    NSLog(@"Whoops, couldn't save: %@", [saveError localizedDescription]);
} 

[[NSNotificationCenter defaultCenter] removeObserver:theDelegate]; 
```

**更新** 执行插入和删除然后保存工作。自己做插入是有效的。自己删除是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:00:42.373

确保它`self.fetchResultsController.delegate = self;`在你的`viewDidLoad`方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:38:07.437

确保 NSNotificationCenter 总是注册到 NSManagedObjectContextDidSaveNotification，而不仅仅是在有东西要插入的时候。

# chef-infra - Chef - 无法配置服务资源以在修改模板资源时重新加载

> ID：10648508
> 
> 赞同：0
> 
> 时间：2012-05-18T07:32:50.980
> 
> 标签：chef-infra

我完全不了解安装未安装 init.d 文件的服务的工作流程。以下是我安装主管的秘诀。同样在boostrap的错误下方。我有 init.d 和配置文件作为模板。那么，我该如何调整逻辑让厨师工作呢？

```
ec2-175-41-185-174.ap-southeast-1.compute.amazonaws.com [Thu, 17 May
2012 22:18:02 +0000] ERROR: Running exception handlers
ec2-175-41-185-174.ap-southeast-1.compute.amazonaws.com [Thu, 17 May
2012 22:18:02 +0000] FATAL: Saving node information to
/var/chef/cache/failed-run-data.json
ec2-175-41-185-174.ap-southeast-1.compute.amazonaws.com [Thu, 17 May
2012 22:18:02 +0000] ERROR: Exception handlers complete
ec2-175-41-185-174.ap-southeast-1.compute.amazonaws.com [Thu, 17 May
2012 22:18:02 +0000] FATAL: Stacktrace dumped to
/var/chef/cache/chef-stacktrace.out
ec2-175-41-185-174.ap-southeast-1.compute.amazonaws.com [Thu, 17 May
2012 22:18:02 +0000] FATAL: Errno::ENOENT: service[supervisord]
(supervisor::default line 23) had an error: Errno::ENOENT: No such
file or directory - /etc/init.d/supervisord restart

easy_install_package "supervisor" do
 action :install
end

template "/etc/supervisord.conf" do
 path "/etc/supervisord.conf"
 source "supervisord.conf.erb"
 owner "root"
 group "root"
 mode "0600"
end

template "/etc/init.d/supervisord" do
 path "/etc/init.d/supervisord"
 source "supervisord.erb"
 owner "root"
 group "root"
 mode "0755"
 #notifies :start, "service[supervisord]", :immediately
end

service "supervisord" do
 supports :restart => true, :start => true, :stop => true, :reload => true
 action [ :enable]
 subscribes :start, resources(:template =>
"/etc/init.d/supervisord"), :immediately
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:25:58.790

我相信您的问题是由于您在*通知*和*订阅*属性中使用*:immediately所致。*

 **当您使用*:immediately*时，通知会立即运行，这在某些情况下是有意义的，但在这种情况下，由于 Chef 执行执行的方式，您正在通知或订阅的资源可能还不存在。

默认情况下，[通知是](http://docs.opscode.com/chef/resources.html#notifications): *delayed*的，这意味着它们排队等待触发并在 Chef 运行结束时执行。然后可以将它们传递到您要通知的[服务和其他资源。](http://docs.opscode.com/chef/resources.html#service)

对于上面的示例，我将修改如下：

```
template "/etc/supervisord.conf" do
 path "/etc/supervisord.conf"
 source "supervisord.conf.erb"
 owner "root"
 group "root"
 mode "0600"
 notifies :reload, "service[supervisord]", :delayed
end

template "/etc/init.d/supervisord" do
 path "/etc/init.d/supervisord"
 source "supervisord.erb"
 owner "root"
 group "root"
 mode "0755"
 notifies :reload, "service[supervisord]", :delayed
end

service "supervisord" do
 supports :restart => true, :start => true, :stop => true, :reload => true
 action :enable
end 
```

上面的代码执行以下操作：

*   创建 supervisord 配置文件，然后在 Chef 运行结束时通知 supervisord 重新加载
*   创建 supervisord init.d 脚本，然后在 Chef 运行结束时通知 supervisord 重新加载
*   声明 supervisord 服务资源，支持重启、启动、停止和重新加载，并在其中任何一个运行后启用它

有关 Chef如何执行运行列表和运行列表中的食谱的更多信息，请参阅[The Chef Run](http://docs.opscode.com/essentials_nodes_chef_run.html)或更早版本，但在某些方面仍然更清楚[Chef Run 的剖析。](http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run)**

# php - 计数结果返回时 preg_match 在 php 中不起作用

> ID：10648511
> 
> 赞同：0
> 
> 时间：2012-05-18T07:33:00.940
> 
> 标签：php

我有一个示例文本：

```
$text = "ác, def ác ghi ác xyz ác, jkl";
$search = "ác";
$_x_word = '/(\s)'.$search.'(\s)/i';
preg_match($_x_word, $text, $match_words);
echo count($match_words); 
```

当我回显计数（$match_words）是结果返回为空

如何修复它输出是2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:49:45.603

Use:

```
preg_match_all($_x_word, $text, $match_words, PREG_SET_ORDER); 
```

instead of your `preg_match`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:00:33.993

您必须使用`preg_match_all`with `/u`modified 来结束 unicode 匹配，并更改括号以获得真正的匹配。

```
<?php
    $text = "ác, def ác ghi ác xyz ác, jkl";
    $search = "ác";
    $_x_word = '/\s('.$search.')\s/ui';
    preg_match_all($_x_word, $text, $match_words);

    //full matches (with spaces)
    var_dump($match_words[0]);
    //only  ác matches.
    var_dump($match_words[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:36:20.943

这样的事情可能会做到这一点：

`echo \preg_match_all('/\sác\s/i', "ác, def ác ghi ác xyz ác, jkl");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T07:37:27.350

首先，当你这样做时，总是使用[`preg_quote`](http://php.net/preg_quote)around`$search`来转义你的正则表达式分隔符。

然后，您的代码非常好（即使没有`preg_quote`）。它为我输出 3。由于字符串中的非 ASCII 字符，您可能遇到文件编码问题。您是否尝试过使用 UTF8？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T07:40:15.330

将其更改为：

```
$text = "ghi ác xyz ác, jkl";
$search = "ác";
$_x_word = '/\s(' . preg_quote($search) . ')\s/i';
preg_match_all($_x_word, $text, $match_words);
var_dump($match_words); 
```

[http://ideone.com/hZD3X](http://ideone.com/hZD3X)

我所做的更改：

1.  删除了周围的括号`\s`- 您不需要空格匹配
2.  `$search`为（括号周围）添加了匹配组
3.  添加`preg_quote`
4.  介绍`var_dump`
5.  改为`preg_match`_`preg_match_all`

PS：可能`\b`会`\s`更好地使用

# java - 在 spring-data 项目中使用 @Version

> ID：10648515
> 
> 赞同：46
> 
> 时间：2012-05-18T07:33:13.440
> 
> 标签：java, hibernate, spring-data, spring-data-jpa, spring-data-rest

我一直在使用 spring-data 开发 RESTful Web 服务。前几天[发布](http://www.springsource.org/node/3553)了一个特殊的 spring-data jpa REST framework 。

现在我注意到在这个框架中使用@Version 的能力。这个版本是自己生成的还是需要手动生成？

是否可以单独使用@Version？（这样我就不必对现有的存储库/域等进行任何更改。）

我是否需要做一些额外的配置才能使用@Version？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-05-23T07:19:23.937

自从我发布这个问题以来已经有一段时间了，但我已经弄清楚了。我将解释我所做的，以便对其他人有所帮助。

注释`@Version`是一个 javax.persistence 接口，而不是我之前提到的 spring-data rest jpa 框架。

如果你想使用@Version，你需要在你的域对象中创建一个版本字段，如下所示：

```
@Version
@Column(name = "VERSION")
private long version; 
```

如果您使用的是休眠，它将自动获取注释，并将在您的（在我的情况下为 MySql）表中创建一个“版本”列。每次更新记录时，hibernate 都会将计数器加 1。

现在为什么这是你想要的东西？那么您可能想要使用它的原因是因为它减少了您的客户使用[陈旧数据](http://whatis.techtarget.com/definition/stale-data)的机会。每当客户从您那里检索信息时，都会提供带有他请求的数据的版本。例如

```
{                       <-- School entity -->
    "id": 1,
    "version": 0,                 
    "name": "De regenboog",
    "street": "Plantaanstraat",
    "number": "2",
    "zipCode": "1234AS",
    "city": "Amsterdam"
} 
```

现在，如果客户端想要更改有关此特定记录的某些信息，它会发送新信息以及版本值。在这种情况下，让我们更改学校的名称。

```
 {                       <-- School entity -->
    "id": 1,
    "version": 0,                 
    "name": "Stackoverflow",
    "street": "Plantaanstraat",
    "number": "2",
    "zipCode": "1234AS",
    "city": "Amsterdam"
 } 
```

Hibernate 会根据您的信息提出一个查询，并添加一个额外的“where”子句来检查版本。`update .... where id = 1 and version = 0`. 现在，如果该行已更新，则意味着您提供了正确的版本，并且在您请求信息、更改信息并将其发回之间，没有其他人更改过该特定信息。不错吧？

现在如果行没有更新怎么办？这意味着在您请求信息后，当您快速上厕所时，其他人更新了该行。这意味着您的版本已过时！现在需要发生的事情实际上是特定于用例的，所以我不会详细说明

希望有人可以使用这条信息！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-17T06:43:24.513

确保导入 import javax.persistence.Version

而不是春天的。

# xml - Marklogic 中的 cts:and-query 问题

> ID：10648519
> 
> 赞同：0
> 
> 时间：2012-05-18T07:33:24.003
> 
> 标签：xml, xquery, marklogic

我有一些 xml 文档。文件的结构是这样的：-

```
<?xml version="1.0" encoding="UTF-8"?>
<patent-assignment>
  <assignment-record>
    <correspondent>
      <name>NORTH AMERICA INTERNATIONAL PATENT OFFIC</name>
      <address-1>P.O. BOX 506</address-1>
      <address-2>MERRIFIELD, VA 22116</address-2>
    </correspondent>
  </assignment-record>
  <patent-assignors>
    <patent-assignor>
      <assignor-name>TSAI, YU-WEN</name>
      <execution-date>
        <date>20050331</date>
      </execution-date>
    </patent-assignor>
    <patent-assignor>
      <assignor-name>HUANG, CHENG-I</name>
      <execution-date>
        <date>20050331</date>
      </execution-date>
    </patent-assignor>
  </patent-assignors>
  <patent-assignees>
    <patent-assignee>
      <assignee-name>FARADAY TECHNOLOGY CORP.</name>
      <address-1>NO.10-2, LI-HSIN ROAD 1, SCIENCE-BASED INDUSTRIAL PARK</address-1>
      <city>HSIN-CHU CITY</city>
      <country-name>TAIWAN</country-name>
    </patent-assignee>
  </patent-assignees>
</patent-assignment> 
```

我在`assignor-name`和上创建了字段`assignee-name`。现在我正在运行这样的`cts:search`查询：-

```
let $query:=cts:and-query((

    cts:element-query(xs:QName("assignor-name"), 
      cts:field-word-query("Assignor Name", "apple")),
    cts:element-query(xs:QName("assignee-name"), 
      cts:field-word-query("Assignee Name", "salix"))
  ))

for $x in cts:search(fn:doc(), $query)
return $x 
```

其中转让人姓名和受让人姓名是我创建的字段的名称。这些字段分别具有`assignor-name`和`assignee-name`作为它们的本地名称。但是当我运行这个查询时，它给了我空序列。我还检查了我的 xml 文档，并且文档中有`assignor-name`“apple”和`assignee-name`“salix”的数据，但我仍然没有得到结果。当我仅针对转让人姓名或受让人姓名运行此查询时，我会得到结果，但是当我将它们组合成 an 时`and-query`，我没有得到任何结果。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:38:45.480

除了 Dave 指出的命名空间问题之外，`element-query`和的组合`field-query`是不寻常的，并且可能不会导致令人满意的结果。

对于此查询，您可以放弃两者以支持`cts:element-word-query`元素上的简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T08:17:46.340

是的，您可以通过`cts:element-word-query`以下方式使用该功能：

```
cts:and-query((cts:element-word-query(xs:QName("pa:assignor-name"),
                                      "apple",
                                      "case-insensitive"
                                      ),
              cts:element-word-query(xs:QName("pa:assignee-name"),
                                     "salix",
                                      "case-insensitive")
              )) 
```

# windows - Windows Azure Node.js SDK

> ID：10648520
> 
> 赞同：2
> 
> 时间：2012-05-18T07:33:26.583
> 
> 标签：windows, node.js, azure

我想知道如何使用 Windows Azure Node.js SDK 获取延续令牌？例如，我现在使用 SDK 从表中检索数据：

```
var tableService = azure.createTableService();

tableService.getTable('UsersUserFacebookActions', function (error) {
    if (error === null) {
        var query = azure.TableQuery
            .select()
            .from('UsersUserFacebookActions')
            .where('PartitionKey eq ?', userID)
            .and('Kind eq ?', 'User')
            .and('Deleted eq ?', 'false');

        tableService.queryEntities(query, function (error, userEntities) {
            if (error === null && userEntities.length > 0) {
                // check to see if access token needs extending
                extendAccessToken(userEntities[0], function (user) {
                    callback({
                        PartitionKey: user.PartitionKey,
                        RowKey: user.RowKey,
                        Kind: user.Kind,
                        EmailAddress: user.EmailAddress,
                        AccessToken: user.AccessToken,
                        TokenExpiration: user.TokenExpiration,
                        JoinDate: user.JoinDate,
                        ChannelCount: user.ChannelCount,
                        FollowCount: user.FollowCount,
                        ChannelCountString: accounting.formatNumber(user.ChannelCount),
                        FollowCountString: accounting.formatNumber(user.FollowCount),
                        Deleted: user.Deleted,
                        DeleteDate: user.DeleteDate
                    }); 
                });
            }
            else callback();
        });
    }
    else callback();
}); 
```

但是，我已经搜索了包括此站点在内的示例和文档：

[https://www.windowsazure.com/en-us/develop/nodejs/](https://www.windowsazure.com/en-us/develop/nodejs/)

但没有遇到任何提到延续令牌的东西。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:01:20.113

根据来源（第 481 行），如果存在延续令牌，则“queryEntitiesResultContinuation”属性将添加到您的结果中：

[https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/table/tableservice.js](https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/table/tableservice.js)

这有一个名为“getNextPage”的函数，它接受一个回调：

[https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/table/models/queryentitiesresultcontinuation.js](https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/table/models/queryentitiesresultcontinuation.js)

您可能应该创建一个单独的函数来处理查询结果。此函数将遍历实体，然后检查是否设置了“queryEntitiesResultContinuation”。如果是这样，请调用该函数，将您的新函数作为回调传递。

我实际上没有尝试过，也找不到任何代码示例！

## 更新

以下是使用节点处理延续令牌的代码示例：

```
var tableService = require("azure").createTableService();

function queryWithContinuation(query, cb) {
    tableService.queryEntities(query, function(error, entities, continuationToken){
        if (continuationToken.nextPartitionKey) { 
            nextPage(entities, continuationToken, cb);
        } else {
            cb(entities);                    
        }
    });
}

// used to recursively retrieve the results
function nextPage(entities, continuationToken, cb){
    continuationToken.getNextPage(function(error, results, newContinuationToken){
        entities = entities.concat(results);
        if (newContinuationToken.nextPartitionKey){
            nextPage(entities, newContinuationToken, cb);
        } else {
            cb(entities);
        }
    });
}

// example usage
var query = azure.TableQuery.select().from('really-big-table');
queryWithContinuation(query, function(results){
    console.log(results);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:27:05.923

我不熟悉 node.js。但是即使客户端库不支持延续令牌，我们仍然可以手动发出 HTTP 请求。[http://nodejs.org/api/https.html#https_https_get_options_callback](http://nodejs.org/api/https.html#https_https_get_options_callback)上的文档告诉我们如何从 node.js 发出 HTTP 请求，以及[http://msdn.microsoft.com/en-us/library/上的文档windowsazure/dd135718](http://msdn.microsoft.com/en-us/library/windowsazure/dd135718)告诉我们如何使用 HTTP 请求使用延续令牌。将它们结合起来，场景将起作用。Richard 可能会提供有关如何使用 Windows Azure node.js 客户端库的更多信息，这可能会使该过程更容易。

最好的祝福，

明旭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T07:25:23.283

如果有人使用我已经编写了一个帮助模块来遍历延续令牌。

请参阅[https://github.com/freakyfriday/azure-storage-extension](https://github.com/freakyfriday/azure-storage-extension)

```
//Usage

//create azure table service 
var tableService = azure.createTableService("AZURE_STORAGE_ACCOUNT","AZURE_STORAGE_ACCESS_KEY");

//query 
var myQuery = new azure.TableQuery().where(whereClause);

//get data automatically retrieving data where there is a continuation token 
tableService.queryEntitiesContinuation('Table', myQuery, null, function (error, result) { 
var allResults = result.entries; });

//module (place in separate file)
var azure = require('azure-storage');

azure.TableService.prototype.queryEntitiesContinuation = function (tableName, query, maxContinuationCount, callback) {

var tableService = this;
var data = new Array();
var countinuationCount = 0;
var operation = function (tableName, query, continuationToken) {
    tableService.queryEntities(tableName, query, continuationToken, function (error, result) {

        if (!error) {
            if (result.continuationToken) {

                result.entries.forEach(function (entry) {
                    data.push(entry);
                });

                if (maxContinuationCount === null || countinuationCount < maxContinuationCount) {
                    ++countinuationCount;
                    //update top
                    if (query._top !== null) {
                        query._top = query._top - data.length;
                        if (query._top !== 0) {
                            operation(tableName, query, result.continuationToken);
                        } else {
                            callback(error, result);
                        }
                    } else {
                        operation(tableName, query, result.continuationToken);
                    }
                } else {
                    callback(error, result);
                }

            } else {

                data.forEach(function (entry) {
                    result.entries.push(entry)
                });

                callback(error, result);
            }
        } else {

            result.entries.push(data);
            callback(error, result);
        }
    });
};

operation(tableName, query, null);
};

module.exports = azure;
```

# java - CSV 行拆分为数组

> ID：10648521
> 
> 赞同：1
> 
> 时间：2012-05-18T07:33:36.630
> 
> 标签：java, csv, split

我有一个包含一行的 CSV 文件：

```
SHIELA,ABIJAY,,,shiela@abijay.com,Shiela123,,43 123 STREET,,MEDFORD,MA ,2155,,,,617-874-4248,0,0,0,,,,,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20847, INAC,8101969,,,,,,,` 
```

使用拆分将值拆分为数组

```
def fields = line.split(",") 
```

我正进入（状态

```
[SHIELA, ABIJAY, , , shiela@abijay.com, Shiela123, , 43 BOWER STREET, , MEDFORD, MA , 2155, , , , 617-874-4248, 0, 0, 0, , , , , 0, 0, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 20847,  INAC, 8101969] 
```

但是在 8101969 之后我还有几个逗号。我如何在那个数组中也得到那个逗号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:37:20.070

要解决此特定问题，请执行

```
def fields = line.split(",", -1) 
```

不过总的来说，我同意@npinti；考虑使用诸如[OpenCSV 之](http://opencsv.sourceforge.net/)类的 CSV 库可能是个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:37:28.247

如果您需要处理 CSV 文件，我建议您使用更强大的（不仅仅是`.split`），例如[OpenCSV](http://opencsv.sourceforge.net/#what-is-opencsv)：

> opencsv 是一个非常简单的 Java csv（逗号分隔值）解析器库。

[此处](http://opencsv.sourceforge.net/#how-to-read)提供了一个非常简短的教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:41:00.853

请参阅[JavaDoc 以了解 split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)。如果只有一个参数，则丢弃空的尾随字符串。如果有一个非正的第二个参数，

> 那么该模式将被应用尽可能多的次数，并且该数组可以具有任意长度。

因此，您的问题将通过以下方式解决：

```
def fields = line.split(",", -1) 
```

# php - 新手的 Simplexml 和 php RSS 提要

> ID：10648522
> 
> 赞同：3
> 
> 时间：2012-05-18T07:33:43.507
> 
> 标签：php, rss, simplexml

我一直在关注我之前的一篇文章（[通过 php 在 Intranet 上显示 RSS 提要项目](https://stackoverflow.com/questions/10620048/display-rss-feed-item-on-intranet-via-php)）的回复，并尝试训练自己。

我现在正在检索数据，但是如何获得“完整的帖子/故事”，我似乎只能获得标题和描述：

```
<?php
$a = curl_init("http://newsrss.bbc.co.uk/rss/on_this_day/front_page/rss.xml");
curl_setopt($a, CURLOPT_RETURNTRANSFER,1);
$b = curl_exec($a);
$xml = simplexml_load_string($b);
//var_dump($xml);
print "<pre>";
    print_r($xml);
    print "</pre>";
?> 
```

**这是我的输出：**

```
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [version] => 2.0
        )

    [channel] => SimpleXMLElement Object
        (
            [title] => BBC On This Day | Front Page
            [link] => http://news.bbc.co.uk/go/rss/-/onthisday/default.stm
            [description] => SimpleXMLElement Object
                (
                )

            [language] => en-gb
            [lastBuildDate] => Mon, 25 Oct 2010 00:15:09 GMT
            [copyright] => Copyright: (C) British Broadcasting Corporation, http://news.bbc.co.uk/2/shared/bsp/hi/services/copyright/html/default.stm
            [docs] => http://www.bbc.co.uk/syndication/
            [ttl] => 15
            [image] => SimpleXMLElement Object
                (
                    [title] => BBC On This Day
                    [url] => http://news.bbc.co.uk/nol/shared/img/bbc_news_120x60.gif
                    [link] => http://news.bbc.co.uk/go/rss/-/onthisday/default.stm
                )

            [item] => Array
                (
                    [0] => SimpleXMLElement Object
                        (
                            [title] => 1983: US troops invade Grenada
                            [description] => American forces seize control of the Caribbean island of Grenada less than a week after a left-wing coup in which the prime minister, Maurice Bishop, was killed.
                            [link] => http://news.bbc.co.uk/go/rss/-/onthisday/hi/dates/stories/october/25/newsid_3207000/3207509.stm
                            [guid] => http://news.bbc.co.uk/onthisday/hi/dates/stories/october/25/newsid_3207000/3207509.stm
                            [pubDate] => Fri, 24 Oct 2003 08:35:04 GMT
                            [category] => 25
                        )

                    [1] => SimpleXMLElement Object
                        (
                            [title] => 1964: President Kaunda takes power in Zambia
                            [description] => Zambia is the ninth African state to gain independence from the British crown.
                            [link] => http://news.bbc.co.uk/go/rss/-/onthisday/hi/dates/stories/october/25/newsid_2658000/2658325.stm
                            [guid] => http://news.bbc.co.uk/onthisday/hi/dates/stories/october/25/newsid_2658000/2658325.stm
                            [pubDate] => Thu, 06 Feb 2003 16:40:25 GMT
                            [category] => 25
                        )

                    [2] => SimpleXMLElement Object
                        (
                            [title] => 1984: Europe grants emergency aid for Ethiopia
                            [description] => The EEC is donating £1.8 million to help combat the famine in Ethiopia.
                            [link] => http://news.bbc.co.uk/go/rss/-/onthisday/hi/dates/stories/october/25/newsid_2478000/2478431.stm
                            [guid] => http://news.bbc.co.uk/onthisday/hi/dates/stories/october/25/newsid_2478000/2478431.stm
                            [pubDate] => Thu, 14 Nov 2002 17:55:28 GMT
                            [category] => 25
                        )

                    [3] => SimpleXMLElement Object
                        (
                            [title] => 1976: Queen opens National Theatre in London
                            [description] => The Queen has officially opened the National Theatre on the South Bank in London after years of delays.
                            [link] => http://news.bbc.co.uk/go/rss/-/onthisday/hi/dates/stories/october/25/newsid_2478000/2478397.stm
                            [guid] => http://news.bbc.co.uk/onthisday/hi/dates/stories/october/25/newsid_2478000/2478397.stm
                            [pubDate] => Thu, 14 Nov 2002 17:45:57 GMT
                            [category] => 25
                        )

                    [4] => SimpleXMLElement Object
                        (
                            [title] => 2001: Crime rates lowest for 20 years
                            [description] => British Crime Survey reveals the chances of being a victim of crime are lowest for 20 years.
                            [link] => http://news.bbc.co.uk/go/rss/-/onthisday/hi/dates/stories/october/25/newsid_2478000/2478379.stm
                            [guid] => http://news.bbc.co.uk/onthisday/hi/dates/stories/october/25/newsid_2478000/2478379.stm
                            [pubDate] => Thu, 14 Nov 2002 17:42:23 GMT
                            [category] => 25
                        )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T06:44:18.597

试试这个代码：

```
<?php
require_once 'simple_html_dom.php';

$a = curl_init("http://newsrss.bbc.co.uk/rss/on_this_day/front_page/rss.xml");
curl_setopt($a, CURLOPT_RETURNTRANSFER,1);
$b = curl_exec($a);
$xml = simplexml_load_string($b);
$items = $xml->xpath('//channel/item');

foreach ($items as $item) {
    var_dump((string)$item->guid);
    $a = curl_init((string)$item->guid);
    curl_setopt($a, CURLOPT_RETURNTRANSFER,1);
    $body = curl_exec($a);
    $html = str_get_html($body);
    $newsContent = $html->find('div[class=bodytext]');
    $newsContent = $newsContent[0];
    print "<pre>";
    print_r($newsContent->innertext);
    print "</pre>";
} 
```

你也需要[这个库](http://simplehtmldom.sourceforge.net/index.htm)来存放 php 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:45:40.173

您可以尝试像下面这样的 Domdocument 来阅读 rss 提要标签

```
$xmlDoc = new DOMDocument();

$xmlDoc->load($a);

$x=$xmlDoc->getElementsByTagName('entry'); 
```

# objective-c - 通过 @selector 将数据传递给 textField

> ID：10648524
> 
> 赞同：1
> 
> 时间：2012-05-18T07:33:46.313
> 
> 标签：objective-c

我有这个代码：

```
UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:textField action:@selector(setText:)]; 
```

如何使用 setText 操作发送一条信息。例如

```
setText:@"This is text" 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:42:55.027

试试这个：

```
[self performSelector: @selector(setText:) withObject:@"This is text" afterDelay:0.0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:47:42.843

配置为操作`setText:`将被调用，`(id)sender`其中`sender`将是您的`UIButton`. 如果您使用的是自定义 UIButton，您可以给它一个属性来保存您想要传递的文本，然后在您的操作方法中访问它。因为你正在使用`UIBarButtonSystemItemDone`你不能。

让我猜猜你想做什么：让用户输入一些文本并在他们单击完成时将其传递回父视图控制器。

如果是这样，试试这个：

1.  为您的视图控制器提供文本字段的属性（和 IBOutlet）。
2.  访问那个`setText:`

所以...

```
- (void)setText:(id)sender
{
    NSString *theText = self.textField.text;

    // now do what you wanted...
} 
```

我希望这会有所帮助。

# ruby - Heroku 控制台没有在 /lib 中加载文件？

> ID：10648525
> 
> 赞同：0
> 
> 时间：2012-05-18T07:33:47.690
> 
> 标签：ruby, ruby-on-rails-3, heroku

我无法`/lib`在 Heroku 控制台下要求文件。知道为什么吗？

这是在我的本地机器上

```
ruby-1.9.2-p290 :001 > require "folder/file.rb"
 => true 
```

这是在 Heroku 控制台（Cedar）上

```
irb(main):057:0> require "folder/file.rb"
=> false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:06:56.363

正如我在问题评论中所建议的那样，它与`require './folder/file.rb'`.
注意`./`文件路径之前的。

# objective-c - 这两种说法有什么区别？

> ID：10648526
> 
> 赞同：-2
> 
> 时间：2012-05-18T07:33:49.000
> 
> 标签：objective-c, ios, cocoa-touch

> **可能重复：**
> [[NSMutableArray array] 与 [[NSMutableArray alloc] init] 之间的区别](https://stackoverflow.com/questions/5423211/difference-between-nsmutablearray-array-vs-nsmutablearray-alloc-init)

```
NSMutableArray* test = [NSMutableArray array];
NSMutableArray* test1 =[[NSMutableArray alloc]init]; 
```

有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:35:49.060

您不需要释放`test`（因为您没有分配它），但您确实需要释放`test1`（因为您分配它）（假设不涉及 ARC）。

该方法`[NSMutableArray array]`已经返回一个`autorelease`ed 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:38:12.817

`test`是自动释放的。这意味着它已被添加到当前的自动释放池中，并且当池耗尽时（通常是当前运行循环结束时），它将发送一条释放消息。如果没有其他人发送它保留，则可以在那时释放内存。

`test1`不是，并且有效保留计数为 +1。释放你的责任，否则你会泄漏内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:41:27.743

第一个是`NSMUtableArray`类的静态方法，它返回一个初始化和自动关联的数组。在第二个语句中，您手动分配和初始化它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T07:42:41.927

两个语句之间的关系：

```
[NSMutableArray array] equivalent to  [[[NSMutableArray alloc] init] autorelease]; 
```

# sphinx - 如何使更接近的单词在狮身人面像中具有更高的权重

> ID：10648531
> 
> 赞同：0
> 
> 时间：2012-05-18T07:33:57.207
> 
> 标签：sphinx, thinking-sphinx

全部

我有一个问题，我正在使用 sphinx 作为搜索引擎。

例如，我有这些数据：

```
 aaa bbb ddd cdd
 aaa ddd bbb cdd
 aaa ddd 
```

现在，我正在搜索 aaa ddd 我希望这些 ese 都匹配，并显示如下顺序：

```
 aaa ddd            #total matched. so shows first
  aaa ddd bbb cdd    #there is no word in aaa and ddd, so it can have high weight
  aaa bbb ddd cdd    #as there is word in aaa and ddd, so lower weight 
```

总之，我想让字符串中我键入的关键字更接近具有更高的权重。有什么办法吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:04:20.327

也许，您应该更改为 EXTENDED 匹配模式以启用 MATCHANY 以外的排名。看起来`SPH_RANK_SPH04`是一个很好的起点。请参阅[文档](http://sphinxsearch.com/docs/current.html)。

# ruby-on-rails - Ruby on Rails 安装后出现 403

> ID：10648532
> 
> 赞同：0
> 
> 时间：2012-05-18T07:34:00.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, http-status-code-403

Ruby 和 Rails 已经设置好了，但是我在访问“localhost”时总是得到 403 在设置新的 rails proect 时没有错误。这是我的“捆绑安装”有什么遗漏吗？应该有欢迎登机网站，但我得到了 403。当我浏览到 localhost/public 时，我得到了欢迎登机网站。

```
 Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.3.5) 
Using activesupport (3.2.3) 
Using builder (3.0.0) 
Using activemodel (3.2.3) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.3) 
Using mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.3) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.3) 
Using activeresource (3.2.3) 
Using bundler (1.1.3) 
Using coffee-script-source (1.3.3) 
Using execjs (1.3.2) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.3) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.3) 
Using coffee-rails (3.2.2) 
Using jquery-rails (2.0.2) 
Using rails (3.2.3) 
Using sass (3.1.18) 
Using sass-rails (3.2.5) 
Using sqlite3 (1.3.6) 
Using uglifier (1.2.4) 
```

我尝试创建新的视图和控制器，`$ rails generate controller home index` 并将我的 routes.rb 更改为 home#index。我也得到一个403。

有任何想法吗？

编辑：

```
rails server -p 3001 -e test
=> Booting WEBrick
=> Rails 3.2.3 application starting in test on http://0.0.0.0:3001
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-05-18 10:50:16] INFO  WEBrick 1.3.1
[2012-05-18 10:50:16] INFO  ruby 1.9.3 (2011-10-30) [x86_64-linux]
[2012-05-18 10:50:16] INFO  WEBrick::HTTPServer#start: pid=26471 port=3001 
```

在浏览该网站时没有任何反应。只得到一个 apache 403 禁止错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:29:02.090

你在跑步吗...

```
rails server 
```

在您的根应用程序目录中？

听起来网络服务器没有运行？

# c# - 当没有当前项目时，如何禁用绑定到当前项目的 ICommand 的按钮？

> ID：10648538
> 
> 赞同：9
> 
> 时间：2012-05-18T07:34:32.240
> 
> 标签：c#, .net, wpf, binding, mvvm

假设您有一个按钮，其`command`属性绑定到`ICommand`某个集合的某些当前项。

当集合为`null`时，该按钮保持启用状态，单击它似乎是无操作的。我希望按钮保持禁用状态。我想出了以下方法，以便在集合为空时禁用按钮。*然而，对于可以用更自然、更*简单和更像 MVVM 的方式来完成的事情来说，这似乎有点太复杂了。

因此，问题是：有没有更简单的方法来禁用该按钮，理想情况下不使用代码隐藏？

**.xaml：**

```
<Button Content="Do something" >
    <Button.Command>
        <PriorityBinding>
            <Binding Path="Items/DoSomethingCmd"  />
            <Binding Path="DisabledCmd" />
        </PriorityBinding>
    </Button.Command>
</Button> 
```

**。CS：**

```
public class ViewModel : NotificationObject
{
    ObservableCollection<Foo> _items;

    public DelegateCommand DisabledCmd { get; private set; }

    public ObservableCollection<Foo> Items { 
        get { return _items; } 
        set { _items = value; RaisePropertyChanged("Items"); } 
    }

    public ViewModel()
    {
        DisabledCmd = new DelegateCommand(DoNothing, CantDoAnything);
    }

    void DoNothing() { }
    bool CantDoAnything()
    {
        return false;
    }
} 
```

**编辑**：

几点注意事项：

1.  我*知道*我可以使用 lambda 表达式，但在这个示例代码中我没有。
2.  我*知道*谓词是什么。
3.  我看不出做某事有`DoSomethingCmd.CanExecute`什么帮助，因为在`DoSomethingCmd`没有当前项目的情况下无法访问。
4.  因此，我将重新提出我的问题：如何避免使用`DisabledCmd`? 我对向上移动不感兴趣，`DoSomethingCmd`因为它不是我想要的。否则我不会问这个问题。

**另一个编辑：**

所以我基本上采用了这个答案作为解决方案：[WPF/MVVM: Disable a Button's state when the ViewModel behind the UserControl is not yet Initialized?](https://stackoverflow.com/questions/4423746/wpf-mvvm-disable-a-buttons-state-when-the-viewmodel-behind-the-usercontrol-is#4424241)

我相信，这正是 hbarck 的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T22:52:51.150

我会像 akjoshi 那样做，只是我会使用普通触发器而不是 DataTrigger，并且我会检查 Button.Command 是否为空。由于禁用没有命令的按钮总是有意义的（尤其是在没有点击事件处理程序的 MVVM 中），将这个触发器包含在按钮的默认样式中也是一个好主意，以便有这种行为在应用程序中的所有按钮上......我看不出使用虚拟命令的理由。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T13:55:26.530

您可以创建一个`Trigger`来检查 Item （按钮的数据上下文）是否为空，并将 Button 的（或者可能是 Anton 提到的父容器的）`IsEnabled`属性设置为`false`，如下所示 -

```
<DataTrigger
    Binding="{Binding Path=Item}"
    Value="{x:Null}">
    <Setter Property="Control.IsEnabled" Value="False" />
</DataTrigger> 
```

我现在无法对其进行测试，但我认为这应该可行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T09:18:40.307

查看 PresentationFramework.dll 中的代码，我没有看到任何直接的方法（请参阅 参考资料`ButtonBase.UpdateCanExecute`）。您可能会很幸运地从元数据中派生出一个类`Button`并覆盖元数据，`CommandProperty`以便自己处理更改。但是你可以很容易地避免在你的视图模型中包含那个什么都不做的命令代码：创建一个特殊的转换器，它将一个`null`命令转换为一个共享的始终禁用的后备`ICommand`。如果您有很多需要这种行为的按钮，则可能需要附加属性和样式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T07:40:51.973

如果你看一下委托命令，第二个参数是一个函数，它使你能够做到这一点，我不太确定，你为什么让它这么复杂。例如，如果您这样做：

```
DoSomethingCommand = new DelegateCommand(() => SampleAction, () => Items != null); 
```

当您简单地将其 Command 属性绑定到此命令时，该按钮将被禁用，如下所示：

```
<Button Command={Binding DoSomethingCommand} /> 
```

当委托命令中的条件变为假时，该按钮将自动禁用。您还应该`DoSomethingCommand.RaiseCanExecuteChanged()`在条件的结果可能发生变化时调用，而不是按钮的 IsEnabled 更新以反映当前状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T07:46:44.373

我使用了 RelayCommands，它有一个构造函数，您可以在其中创建一个 canExecute 谓词，然后如果它返回 false，则绑定按钮将被自动禁用。

在委托命令上，您应该重写 CantDoAnything() 方法来表示您的启用和禁用逻辑。您应该简单地绑定到命令的绑定。

[MSDN 上的 DelegateCommand 构造函数](http://msdn.microsoft.com/en-us/library/ff654427)

[DelegateCommand 可以执行 BugFix](https://stackoverflow.com/questions/7350845/canexecute-logic-for-delegatecommand)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-21T12:27:55.697

您可以简单地将按钮的 IsEnabled 属性绑定到当前项目并使用转换器。

这是一个完整的演示：

```
<Page.Resources>
    <Converters:NullToBoolConverter x:Key="NullToBoolConverter" 
                                    IsNullValue="False" IsNotNullValue="True" />
</Page.Resources>

<Page.DataContext>
    <Samples:NoCurrentItemViewModel/>
</Page.DataContext>

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <ListBox 
        IsSynchronizedWithCurrentItem="True" Grid.Row="0" 
        ItemsSource="{Binding Items}" 
        DisplayMemberPath="Name"/>

    <Button 
        Grid.Row="1" 
        Content="Do something" 
        IsEnabled="{Binding Items/, Converter={StaticResource NullToBoolConverter}}"
        Command="{Binding Items/DoSomethingCommand}"/>

    <Button Grid.Row="2" Content="Clear" Command="{Binding ClearCommand}"/>
</Grid> 
```

查看模型 - 来自 MVVM Light 的 RelayCommand

```
public class NoCurrentItemViewModel
{
    public NoCurrentItemViewModel()
    {
        _items = new ObservableCollection<NoCurrentItemDetail>
                    {
                        new NoCurrentItemDetail{Name = "one"},
                        new NoCurrentItemDetail{Name = "two"},
                    };

        ClearCommand = new RelayCommand(Clear);
    }

    public ICommand ClearCommand { get; private set; }

    private void Clear()
    {
        _items.Clear();
    }

    private readonly ObservableCollection<NoCurrentItemDetail> _items;

    public IEnumerable<NoCurrentItemDetail> Items
    {
        get { return _items; }
    }
}

public class NoCurrentItemDetail
{
    public NoCurrentItemDetail()
    {
        DoSomethingCommand = new RelayCommand(DoSomething);
    }

    private void DoSomething()
    {
        Debug.WriteLine("Do something: " + Name);
    }

    public ICommand DoSomethingCommand { get; private set; }

    public string Name { get; set; }
} 
```

转换器

```
public class NullToBoolConverter : IValueConverter
{
    public NullToBoolConverter()
    {
        IsNullValue = true;
        IsNotNullValue = false;
    }

    public bool IsNullValue { get; set; }
    public bool IsNotNullValue { get; set; }

    #region Implementation of IValueConverter

    public object Convert(object value, 
        Type targetType, object parameter, CultureInfo culture)
    {
        return value == null ? IsNullValue : IsNotNullValue;
    }

    public object ConvertBack(object value, 
        Type targetType, object parameter, CultureInfo culture)
    {
        return Binding.DoNothing;
    }

    #endregion
} 
```

# jquery - jQuery mobile 中的标题

> ID：10648540
> 
> 赞同：0
> 
> 时间：2012-05-18T07:34:37.883
> 
> 标签：jquery, header

如何将标题放在一行中？

我的问题在[这个页面上](http://app.liturgia.pt/menu12/011AdvHinos.html)。我在脚本文件中有一组按钮，但将其放在标题中，它会移动到底线。

我的代码如下所示：

```
<div data-role="header">
    <h1>HYMNS: Advent</h1>
    <a href="index.html" class="ui-btn-right">
        <script language="JavaScript" src="botoes_comuns.js"></script>
    </a>
</div> <!-- /header --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:47:39.710

这是我在不修改您的 html 结构的情况下最接近的。

首先将您的标题内容包装在`<center>`标签中，并给标签一个类，如`some_class`：

```
<center class="some_class"><h1 class="ui-title" tabindex="0" role="heading" aria-level="1">Advento</h1></center> 
```

然后使用以下css，根据需要进行更改：

```
center.some_class {
    margin: 5px 15% -28px 0 !important;
} 
```

# cocoa - 是否可以以编程方式在 Cocoa 中打印 IKImageBrowserView？

> ID：10648544
> 
> 赞同：2
> 
> 时间：2012-05-18T07:35:00.290
> 
> 标签：cocoa, nsview, ikimagebrowserview, nsprintoperation

我想用（内容）图像打印 IKImageBrowserView 。我尝试了以下代码

```
if (code == NSOKButton) {
        NSPrintInfo *printInfo;
        NSPrintInfo *sharedInfo;
        NSPrintOperation *printOp;
        NSMutableDictionary *printInfoDict;
        NSMutableDictionary *sharedDict;

        sharedInfo = [NSPrintInfo sharedPrintInfo];
        sharedDict = [sharedInfo dictionary];
        printInfoDict = [NSMutableDictionary dictionaryWithDictionary: sharedDict];

        [printInfoDict setObject:NSPrintSaveJob
                          forKey:NSPrintJobDisposition];

        [printInfoDict setObject:[sheet filename] forKey:NSPrintSavePath];

        printInfo = [[NSPrintInfo alloc] initWithDictionary:printInfoDict];
        [printInfo setHorizontalPagination: NSAutoPagination];
        [printInfo setVerticalPagination: NSAutoPagination];
        [printInfo setVerticallyCentered:NO];

        printOp = [NSPrintOperation printOperationWithView:imageBrowser
                                                 printInfo:printInfo];

        [printOp setShowsProgressPanel:NO];
        [printOp runOperation];
    } 
```

因为`IKImageBrowserView`是继承自，`NSView`但打印预览显示空图像。请帮我解决这个问题。提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:28:42.613

```
/*
    1) allocate a c buffer at the size of the  visible rect of the image
    browser
     */
    NSRect vRect = [imageBrowser visibleRect];
    NSSize size = vRect.size;
    NSLog(@"Size W = %f and H = %f", size.width, size.height);
    void *buffer = malloc(size.width * size.height * 4);

//2) read the pixels using openGL
[imageBrowser lockFocus];
glReadPixels(0,
             0,
             size.width,
             size.height,
             GL_RGBA,
             GL_UNSIGNED_BYTE,
             buffer);
[imageBrowser unlockFocus];

//3) create a bitmap with those pixels
unsigned char *planes[2];
planes[0] = (unsigned char *) (buffer);

NSBitmapImageRep *imageRep = [[NSBitmapImageRep alloc]
                              initWithBitmapDataPlanes:planes pixelsWide:size.width
                              pixelsHigh:size.height bitsPerSample:8 samplesPerPixel:4 hasAlpha:YES
                              isPlanar:NO colorSpaceName:NSDeviceRGBColorSpace bitmapFormat:0
                              bytesPerRow:size.width*4 bitsPerPixel:32];
/*
4) create a temporary image with this bitmap and set it flipped
(because openGL and the AppKit don't have the same pixels coordinate
 system)
 */
NSImage *img = [[NSImage alloc] initWithSize:size];
[img addRepresentation:imageRep];
[img setFlipped:YES];
[imageRep release];
/*
5) draw this temporary image into another image so that we get an
image without any reference to our "buffer" buffer so that we can
release it after that
 */
NSImage *finalImage = [[NSImage alloc] initWithSize:size];
[finalImage lockFocus];
[img drawAtPoint:NSZeroPoint
        fromRect:NSMakeRect(0,0,size.width,size.height)
       operation:NSCompositeCopy fraction:1.0];
[finalImage unlockFocus];

//[NSString stringWithFormat:@"/tmp/%@.tiff", marker]
NSData *imageData = [finalImage TIFFRepresentation];
NSString *writeToFileName = [NSString stringWithFormat:@"/Users/Desktop/%@.png", [NSDate date]];
[imageData writeToFile:writeToFileName atomically:NO];

//6) release intermediate objects
[img release];
free(buffer); 
```

在此之后，我发送 imageData 进行打印，这对我来说非常有用。

# http - 主机中的浏览器看不到 vagrant 框，portforward 不起作用

> ID：10648549
> 
> 赞同：2
> 
> 时间：2012-05-18T07:35:27.217
> 
> 标签：http, portforwarding, vagrant

我已经在我的 Window XP 中安装了 Vagrant，在我的 Vagrantfile 中我有：

```
Vagrant::Config.run do |config|
  # Setup the box
  config.vm.box = "lucid32"
  config.vm.forward_port 80, 8080
  config.vm.network :hostonly, "192.168.10.200"
end 
```

但是当我在浏览器中输入“ [http://192.168.10.200:8080](http://192.168.10.200:8080) ”时，我看不到我的流浪框的迹象。

虚拟盒子的 IP 地址是正确的，因为在 vbox 中，我有：

```
vagrant@lucid32:~$ ifconfig
....
eth1      Link encap:Ethernet  HWaddr 08:00:27:79:c5:4b
          inet addr:192.168.10.200  Bcast:192.168.10.255  Mask:255.255.255.0 
```

似乎没有防火墙问题，因为如果我输入

```
vagrant@lucid32:~$ curl 'http://google.com' 
```

它工作正常。

我已阅读[Vagrant 的端口转发不起作用](https://stackoverflow.com/questions/5984217/vagrants-port-forwarding-not-working) 并尝试过：

```
vagrant@lucid32:~$ curl 'http://localhost:80'
curl: (7) couldn't connect to host 
```

并且

```
vagrant@lucid32:~$ curl 'http://localhost:8080'
curl: (7) couldn't connect to host 
```

所以，看起来端口转发不起作用......

如果你知道我能做什么，我可以从主机浏览器访问我的 vbox，你能帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T17:55:03.550

如果你只是用这个启动了一个 Vagrant 盒子`Vagrantfile`，那只不过是**一个空的 Ubuntu Lucid，它还没有运行任何服务**。所以端口上没有任何服务`80`，这就是为什么从端口上的盒子内部`80`或主机上都看不到任何东西的原因`8080`。

为了让您的 Vagrant 机器提供一些服务（例如端口上的 Web 服务器`80`），您必须进行一些配置。您可以手动完成，也可以使用与 Vagrant`up`进程挂钩的 Chef 或 Puppet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T12:47:27.940

我有一个类似的问题。有时对低于 2000 的端口使用端口转发是一个问题。对我有用的是选择高于 2000 的端口。所以我的 vagrantfile 现在看起来像：

```
config.vm.network :forwarded_port, host: 4500, guest: 9000 
```

在我的主机上键入 localhost:4500 现在可以正常工作了。看来您使用的 vagrant 版本比我的版本旧，因此您可以将 vagrant 文件编辑为类似

```
config.vm.forward_port 9000, 4500 
```

现在在您的主机上键入 localhost:4500 应该可以正常工作。

祝你好运，

# jquery - 如何提交类似推特的微博并在不重新加载页面的情况下显示帖子？

> ID：10648560
> 
> 赞同：1
> 
> 时间：2012-05-18T07:36:26.280
> 
> 标签：jquery, ruby-on-rails, ruby, ajax

我正在尝试提交一个微博并让它显示在页面顶部而不需要重新加载页面，但是我在让它工作时遇到了很多麻烦。任何解释和解决方案将不胜感激。

我有一个用户有很多微博

**解决方案**

```
https://github.com/sunwooz/fasttwitter/pull/1

Here is a working implementation let me go thru the changes really quick

fasttwitter/app/views/layouts/application.html.erb
Since rails 3.1 you should use "application" instead of "defaults" apparently this was the main       problem, because it generated an error stopped the remote => true from working
fasttwitter/app/views/microposts/create.js.coffee
There is no need for this file. rails is going to check for a .erb file not a .coffee
fasttwitter/app/views/microposts/create.js.erb
I had some problems with the partial rendering, but it is working with the html you posted on     Stackoverflow 
```

这是**show.html.erb(user)**

```
<h1><%= @user.email %></h1>

<%= form_for [@user, @micropost], :remote => true do |f| %>
<h1>What are you thinking?</h1><br/>
<%= f.text_field :content, :class => 'micropostfield', :placeholder => 'Press ENTER to submit' %><br/>
<%= f.submit %>
<% end %>

<div id="microposts">
<%= render @user.microposts.reverse %>
</div> 
```

**_micropost.html.erb 部分**

```
<%= div_for micropost do %>
<h3><%= micropost.user.email %></h2> <h4>Posted <%= time_ago_in_words(micropost.created_at) %> ago</h3>
<p>
    <%= micropost.content %>
</p>
<p>
    <%= link_to "Edit", edit_user_micropost_path(micropost) %>
    <%= link_to "Destroy", user_micropost_path(micropost), :method => :delete, :class => :destroy %>
</p> 
```

**微博.js**

```
$(document).ready(function() { 
$('#new_micropost').submit(function(evt){
    var text = $('#micropost_content').val();
    var url = $('#new_micropost').attr('action');
    $.ajax({
        url: url,
        type: 'POST',
        data: { micropost: { content: text }},
        dataType: "JSON",
        success: function(data){
            $('#microposts').prepend('<div class="micropost"><h3>' + data.@user.email + '</h3><h4>Posted On: ' + data.created_at + '</h4><p>' + data.content + '</p></div>');
        };
    });
    evt.preventDefault();
});
}); 
```

微博创建动作

```
def create
@user = User.find(params[:user_id])
@micropost = @user.microposts.build(params[:micropost])
respond_to do |format|
  if @micropost.save
    format.html { redirect_to(@user) }
    format.xml { render :xml => @user, :status => :created, :location => @user }
    format.js
  else
    format.html { redirect_to(@user) }
    format.xml { render :xml => @micropost.errors }
    format.js { render :json => @micropost.errors }
  end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:33:28.360

我建议您添加以下内容

对您的控制器操作的 javascript 响应`create`，以防您没有它。它可以很简单

```
respond_to { |format| format.js } 
```

还要确保保留`:remote => true`在您的表格上。

通过添加一个 respond_to`js`您的控制器将尝试查找位于`app/views/model_plural/create.js.erb`.

`js.erb`文件是一样的，`html.erb`但您可以将 Ruby 嵌入到 JS 中，而不是将 Ruby 嵌入到 HTML 中。

现在您可以创建类似这样的 js 视图。

app/views/microposts/create.js.erb

```
<% if @micropost.errors.any? %>
  alert('errors');
<% else %>
    $('#microposts').prepend('<div class="micropost"><h3>' +  "<%= j @micropost.user.email%>" + '</h3><h4>Posted On: ' + "<%= j @micropost.created_at %>" + '</h4><p>' +  "<%= j @micropost.content %>" + '</p></div>');
<% end %> 
```

希望能帮助到你 ：）

# ios - iOS 开发 - 手动添加情节提要

> ID：10648562
> 
> 赞同：0
> 
> 时间：2012-05-18T07:36:31.120
> 
> 标签：ios, storyboard

我已经为 iPhone 创建了一个 iOS 应用程序，它已经发布并且可以运行了。我现在重新审视它以支持原生 iPad 格式。我已将项目类型更改为通用并添加了一个新的 iPad 故事板，加上一个 Objective-C 类（.h、.m）来配合它，但我似乎无法链接该类和故事板。

例如，我不能 Ctrl - 将项目从情节提要拖到新类中以在对象上使用它们。您如何将新的故事板和与它们一起使用的类添加到 iOS 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:54:30.317

除非您将情节提要中的视图控制器对象设置为与您创建的新视图控制器类（在身份检查器中）具有相同的类，否则您将无法通过控制拖动来创建出口或动作。

另外，我不知道您的具体要求，但通常最好为 iPad 和 iPhone 使用相同的视图控制器类，然后在需要的地方进行分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:29:54.930

Storyboard 只是您的场景（视图控制器、导航控制器、TabBar 控制器等）的容器。您将类与场景（VC、NC、TBC 等）相关联。您要做的是根据您所需的应用程序流程添加视图控制器或 NV、TBC 等。然后，您将把它与您创建的父类相关联。

然后，您所要做的就是确保您正在使用以下方式检查设备类型：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
     // iPad 
}
else
{
     // iPhone or iPod touch.
} 
```

并在 Application Summary 中设置适用于 iPad 的 Storyboard

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:33:48.170

最好为 iPhone 做一个类，例如： ITViewController 和另一个名为 ITViewControllerHD 的类，他们将从 ITViewController 继承并重载每个必要的类以避免重复此代码：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
 // iPad 
}
else
{
 // iPhone or iPod touch.
} 
```

我认为它更清洁：/

# php - 销毁 PHP 会话

> ID：10648565
> 
> 赞同：1
> 
> 时间：2012-05-18T07:36:45.290
> 
> 标签：php, security, session, destroy

stackoverflow 上有很多关于 destorying session 的页面。相信我，我一直在阅读它们并且我遇到了这个问题：[为什么我的会话仍然存在？](https://stackoverflow.com/questions/4921231/why-does-my-session-remain)

我的问题很简单，我真的需要执行以下所有操作才能正确销毁会话吗？

```
$tmp = session_id();
session_destroy();
session_id($tmp);
unset($tmp); 
```

这是唯一提出这种极端措施的页面。大多数页面只是建议`session_destroy();`。

只是为了澄清，因为似乎有些混乱，我正在寻找最有效的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:24:30.143

新的答案已经停止出现，所以我根据所有答案输入我学到的东西。这是各种答案的汇总。希望它会帮助其他人。下面列出了销毁会话 100% 有效的最有效方法：

```
if (ini_get("session.use_cookies")) 
{
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
        );
}

$_SESSION = array();
$tmp = session_id();
session_id($tmp);
unset($tmp);
session_unset();
session_destroy();
session_write_close();
session_regenerate_id(True); // true indicates the need to delete the old session 
```

感谢大家的帮助，向我展示了如何做到这一点。这不是一个人的努力。我要特别感谢@Kerrek SB，@Uday @Dhruvisha。如果您有更多建议，请随时添加评论，我将编辑我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:37:40.557

session_destroy() 销毁与当前会话关联的所有数据。它不会取消设置与会话关联的任何全局变量，也不会取消设置会话 cookie。要再次使用会话变量，必须调用 session_start()。

为了完全终止会话，例如注销用户，还必须取消设置会话 ID。如果使用 cookie 传播会话 id（默认行为），则必须删除会话 cookie。setcookie() 可以用于此。

**示例**使用 $_SESSION 销毁会话

```
// Unset all of the session variables.
$_SESSION = array();

// If it's desired to kill the session, also delete the session cookie.
// Note: This will destroy the session, and not just the session data!
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

// Finally, destroy the session.
session_destroy();
?> 
```

请参阅[此处](http://php.net/manual/en/function.session-destroy.php)了解更多详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:46:19.250

```
<?php
session_start();
$s_id = session_id();
echo $s_id;

session_destroy();
session_unset();

session_start();
session_regenerate_id(true);
$s_id = session_id();

?> 
```

试试这个 。它会起作用的。

# php - php<5.3 中的 mail.log 等效项

> ID：10648567
> 
> 赞同：2
> 
> 时间：2012-05-18T07:37:03.720
> 
> 标签：php, email

我想知道是否有任何可用的脚本或工具可以完成与 [mail.log](http://www.php.net/manual/en/mail.configuration.php#ini.mail.log)在 php5.3 中所做的相同的任务 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:07:36.737

我不知道有什么工具可以[与 PHP 中的功能](http://lxr.php.net/opengrok/xref/PHP_TRUNK/ext/standard/mail.c#204)[等效`mail.log`](http://lxr.php.net/opengrok/xref/PHP_TRUNK/ext/standard/mail.c#204)。您最好的两个 IMO 是[Xdebug](http://xdebug.org/docs/execution_trace)和[strace](http://linux.die.net/man/1/strace)。两者都比您正在寻找的要多得多。

另一种方法是将调用包装`mail()`在您自己的函数中，然后在您的应用程序中使用它而不是本机函数，如果您刚刚拥有邮件日志，这可能是最明智的解决方案。

另一种选择是使用[runkit](http://php.net/manual/en/ref.runkit.php)[重命名函数](http://www.php.net/manual/en/function.runkit-function-rename.php)，然后[重新定义](http://www.php.net/manual/en/function.runkit-function-redefine.php)以调用重命名的函数。但是runkit 就是runkit，例如，您不希望在生产代码中使用它。[`mail()`](http://www.php.net/manual/en/function.runkit-function-redefine.php)

# android - 如何从 url 链接获取流视频（m3u8 格式）分辨率，android2.3.3？

> ID：10648571
> 
> 赞同：2
> 
> 时间：2012-05-18T07:37:06.637
> 
> 标签：android, url, video-streaming, resolution, m3u

我尝试了很多方法来从 url 中检索视频元数据，例如 (http://xxx.xxx.xxx.xxx/streams/xxxx/playlist.m3u8)，该项目使用的是 android 2.3.3 SDK。

1.  据我所知，MediaMetadataRetriver 可以使用 capture_mode 解决它，但它需要 14 之后的 android vesion 级别，但 android 2.3.3 是 10 级。（它在项目中不起作用）。

    MediaMetadataRetriever retr = new MediaMetadataRetriever(); retr.setDataSource(mContext , video.getUriWithDrmCheck());
    retr.setMode(MediaMetadataRetriever.MODE_CAPTURE_FRAME_ONLY); 位图 bm = retr.captureFrame(); int wVideo = bm.getWidth(); int hVideo = bm.getHeight();

2.  我一直在使用 vetamio 来检索视频分辨率，但系统崩溃了。io.vov.vitamio.MediaPlayer m= 新 io.vov.vitamio.MediaPlayer(this); m.prepareAsyc(); m.setDataSource(url); m.getVideoAspectRatio(); m.release();

3.  android中默认的android.media.mediaplayer无法获取url视频信息。我从中得到的视频高度为0。

4.  我尝试了缩略图方法来检索视频信息，但是缩略图方法似乎只能相位 localPath，而不是 url 链接路径。位图 bMap = ThumbnailUtils.createVideoThumbnail(url, MediaStore.Video.Thumbnails.MICRO_KIND);

那么有人知道如何从android中的url链接检索流视频（m3u8格式）分辨率吗？非常感谢您。

# html - event.DataTransfer 在 Jetty 中运行时不传输拖动对象的 ID

> ID：10648583
> 
> 赞同：1
> 
> 时间：2012-05-18T07:37:50.683
> 
> 标签：html, jsp, maven, drag-and-drop, jetty

我有一个使用 JavaScript 的带有 JSP 的 Maven Jetty 项目。我希望能够突出显示与拖动图像的大小相对应的画布部分。

当我通过简单地在浏览器中打开它来查看我的 JSP 时，一切都按预期工作，但是当我以目标 jetty:run 启动 Jetty 服务器时，未设置或无法从事件的 transferData 中检索拖动对象的 ID .

相关代码：所有可拖动的图像都有一个唯一的 ID。在拖动开始时，我在事件的 transferData 上设置拖动图像的 ID，如下所示：

```
function dragShipFromTable(event) {
    event.dataTransfer.setData("id",event.target.id);
} 
```

当图像被拖到画布上时，我调用以下函数

```
function allowDrop(event) {
    event.preventDefault();
    var id = event.dataTransfer.getData("id");
    var img = document.getElementById(id);
    // Do the highlighting stuff
    ....
} 
```

问题是，当服务器启动并且我执行上述操作时，在 allowDrop(event) 中，未从 transferData 检索拖动图像的 ID。它是未定义的，因此突出显示失败。当简单地将 JSP 作为文件打开时，情况并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:20:44.240

好吧，我找到了自己问题的答案。首先，dataTransfer 对象的 setData 方法只允许某些格式作为第一个参数。我将其解释为关联数组，但事实并非如此。所以应该是

```
event.dataTransfer.setData("text/plain", id);
event.dataTransfer.getData("text/plain"); 
```

正确设置和检索 id。

但最终由于 chrome 导致一切都失败了，因为 Chrome 中存在一个错误，它阻止我按预期使用 dataTransfer （请参阅[如何从 Chrome 中的 dragstart 事件中获取所选项目？dataTransfer.getData 是否损坏？](https://stackoverflow.com/questions/7830249/how-do-you-get-the-selected-items-from-a-dragstart-event-in-chrome-is-datatrans)）。

我现在使用全局变量来存储我需要的信息。而且我仍然想知道为什么当页面显示为文件而不是作为来自网络服务器的响应时一切正常。

# c# - 序列化前缀树

> ID：10648585
> 
> 赞同：7
> 
> 时间：2012-05-18T07:38:00.837
> 
> 标签：c#, tree, protobuf-net

当像这样序列化树结构时，我得到一个`ProtoException`("Possible recursion detected (offset: 4 level(s)): o EOW")：

```
var tree = new PrefixTree();
        tree.Add("racket".ToCharArray());
        tree.Add("rambo".ToCharArray());
        using (var stream = File.Open("test.prefix", FileMode.Create))
        {
            Serializer.Serialize(stream, tree);
        } 
```

树实现：

```
[ProtoContract]
public class PrefixTree
{
    public PrefixTree()
    {
        _nodes = new Dictionary<char, PrefixTree>();
    }

    public PrefixTree(char[] chars, PrefixTree parent)
    {
        if (chars == null) throw new ArgumentNullException("chars");
        if (parent == null) throw new ArgumentNullException("parent");
        if (chars.Length == 0) throw new ArgumentException();

        _parent = parent;
        _nodes = new Dictionary<char, PrefixTree>();
        _value = chars[0];

        var overflow = chars.SubSet(1);
        if (!overflow.Any()) _endOfWord = true;
        else Add(overflow.ToArray());
    }

    [ProtoMember(1)]
    private readonly char _value;
    [ProtoMember(2)]
    private readonly bool _endOfWord;
    [ProtoMember(3)]
    private readonly IDictionary<char, PrefixTree> _nodes;
    [ProtoMember(4, AsReference = true)]
    private readonly PrefixTree _parent;

    public void Add(char[] word)
    {
        if (word == null) throw new ArgumentNullException("word");
        if (word.Length == 0) return;

        var character = word[0];
        PrefixTree node;
        if (_nodes.TryGetValue(character, out node))
        {
            node.Add(word.SubSet(1));
        }
        else
        {
            node = new PrefixTree(word, this);
            _nodes.Add(character, node);
        }
    }

    public override string ToString()
    {
        return _endOfWord ? _value + " EOW" : _value.ToString();
    }
}

public static class ListHelper
{
    public static char[] SubSet(this char[] source, int start)
    {
        return source.SubSet(start, source.Length - start);
    }

    public static char[] SubSet(this char[] source, int start, int length)
    {
        if (start < 0) throw new ArgumentOutOfRangeException();
        if (start > source.Length) throw new ArgumentOutOfRangeException();
        if (length < 0) throw new ArgumentOutOfRangeException();

        var result = new char[length];
        Array.Copy(source, start, result, 0, length);
        return result;
    }
} 
```

我是用错误的属性装饰还是我只是设计了一个不可序列化的树？

编辑：试过这个无济于事：

```
var typeModel = RuntimeTypeModel.Default;
        var type = typeModel.Add(typeof(PrefixTree), false);
        type.AsReferenceDefault = true;
        type.Add("_value", "_endOfWord", "_nodes", "_parent");

        var tree = new PrefixTree();
        tree.Add("racket".ToCharArray());
        tree.Add("rambo".ToCharArray());
        using (var stream = File.Open("test.prefix", FileMode.Create))
        {
            typeModel.Serialize(stream, tree);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T02:33:49.653

_nodes 的 _parent 和 Value 都指向相同的类型（ PrefixTree ），但只有 _parent 被标记为“AsReference”。

如果您遍历序列化堆栈，您将看到 Dictionary 值的 Value 是独立于 _parent 项进行序列化的，并且不会检查重复实例。

当它遍历树时，内部序列化深度检查为 25，它开始检测重复实例。如果这个值更大，它不会抛出异常，如果它更小，它会抛出树上更高的节点。

我也不认为这将是可反序列化的，当然如果这样做，每个子节点的 _parent 字段的值将与 _nodes 容器的实例不同。

您需要创建自己的字典类型（子类 Dictionary<,> 或实现 IDictionary<,> ），以便您可以添加 [ProtoContract] 属性并控制字典项目的序列化。

IE

```
[ProtoContract]
public class NodeItem
{
    [ProtoMember(1)]
    public char Key { get; set; }
    [ProtoMember(2, AsReference = true)]
    public PrefixTree Value { get; set; }
}

[ProtoContract]
public class Nodes : IDictionary<char, PrefixTree>
{
    private readonly IDictionary<char, PrefixTree> inner;

    [ProtoMember(1)]
    public NodeItem[] Items
    {
        get
        {
            return this.inner.Select(item => new NodeItem() {Key = item.Key, Value = item.Value}).ToArray();
        }
        set
        {
            foreach( NodeItem item in value)
            {
                this.inner.Add(item.Key, item.Value);
            }
        }
    }
    ... // Omitted IDictionary members for clarity 
```

这里的关键是获取附加到节点 PrefixTree 的 AsReference 元数据。另请注意，Items 正在返回一个数组，如果您希望它作为一个列表，那么您需要使用设置 OverwriteList 属性成员。

我还需要删除 PrefixTree 类型中每个字段的只读关键字。这个单元测试通过了我。

```
 [TestMethod]
    public void TestMethod1()
    {
        var tree = new PrefixTree();
        tree.Add("racket".ToCharArray());
        tree.Add("rambo".ToCharArray());

        PrefixTree tree2 = null;

        using (var stream = new MemoryStream())
        {
            Serializer.Serialize(stream, tree);
            stream.Position = 0;
            tree2 = Serializer.Deserialize<PrefixTree>(stream);
        }

        Assert.IsNotNull(tree2);
        Assert.AreEqual(tree._nodes.Count, tree2._nodes.Count);
        Assert.AreEqual(2, tree2._nodes['r']._nodes['a']._nodes.Count);      // 'c' and 'm'
        Assert.AreEqual('c', tree2._nodes['r']._nodes['a']._nodes.Values.First().Value);
        Assert.AreEqual('m', tree2._nodes['r']._nodes['a']._nodes.Values.Last().Value);
    } 
```

# svn - 将目录附加到 SVN 中的忽略列表

> ID：10648586
> 
> 赞同：4
> 
> 时间：2012-05-18T07:38:07.220
> 
> 标签：svn

我有一个涉及许多子目录的大目录树。在许多目录中，我使用了`svn propedit svn:ignore .`, 并忽略了给定目录中的文件和/或目录。现在，我想忽略*所有*子目录中名为`foo`. 在[这个答案](https://stackoverflow.com/a/9211176/671013)中，建议调用：

```
svn propset --recursive svn:ignore foo . 
```

从树的根。问题是，一旦调用它，它就会覆盖各个子目录中所有预定义的忽略 - 这是不希望的。本质上，我想在树中每个目录的忽略列表中附加一行，其中包含条目`foo`。**SVN 支持这种动作吗？**如果不是，那么我正在考虑编写此任务的脚本，并在每个（树的根在哪里）所需的行中添加到文件`dir-prop-base`（似乎包含忽略列表） 。**这样做安全吗？**，即手动弄乱内容？`./sub/directory/.svn``.`**`.svn`**

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T08:59:28.640

我建议为此任务使用 bash 脚本。但是不要直接操作文件，而是使用*svn 命令工具*。该解决方案简单且安全。`find -type d ! -path "*/.svn*" -exec /tmp/add_svn_ignore.sh {} +`如果从工作目录执行，则以下脚本可能会完成这项工作：

```
#! /bin/bash
ignore="foo"
for pathname in "$@"; do
    lines="$( svn propget svn:ignore "$pathname" )"
    grep -F -x -q "$ignore" - <<< "$lines" ||
    svn propset svn:ignore "$lines"$'\n'"$ignore" "$pathname"
done 
```**

# iphone - 在 UITableCell 显示之前未设置 UIFont 大小 - 如何干净地计算高度

> ID：10648588
> 
> 赞同：0
> 
> 时间：2012-05-18T07:38:14.860
> 
> 标签：iphone, ios, ipad, uitableview

次要任务 - 寻找一种干净的方式以合理通用的方式动态设置表格的大小（下面的片段来自[http://pastebin.com/E2pUFRg4](http://pastebin.com/E2pUFRg4)）。

现在我想像

```
-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
NSString *text = [items objectAtIndex:[indexPath row]];

CGSize constraint = CGSizeMake(self.view.bounds.size.width-24.f, CGFLOAT_MAX);

UITableViewCell * cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];

CGSize size = [text sizeWithFont:cell.textLabel.font 
               constrainedToSize:constraint 
                   lineBreakMode:UILineBreakModeWordWrap];

CGFloat height = MAX(size.height + 12.f, tableView.rowHeight);

return height;
} 
```

会很好地削减它。但不幸的是，在第一次调用 tableView:heightForRowAtIndexPath 时：textlabel 上的字体大小设置为 0（否则设置字体本身）。它只会在第一次抽签后被填充到一些合理的东西上。

所以我发现自己不得不将其更改为：

```
....
UIFont * font = cell.textLabel.font;

if (font.pointSize == 0)
    font = [UIFont systemFontOfSize:20];

CGSize size = [text sizeWithFont:font
               constrainedToSize:constraint 
                   lineBreakMode:UILineBreakModeWordWrap];
..... 
```

这可以解决问题。但是现在我们突然有一个硬编码的字体大小假设为 20。这很糟糕。

所以我现在的问题是

*   有什么办法可以防止这种情况？即硬编码这么多？

我还猜测 X 和 Y 边界/插图为 2x6 垂直和 2x12 水平。

*   有什么方法可以动态地或从常量中学习（以使其接近 iPhone 和 iPad-UIPopover 视图上的正确默认值）？

最后：

*   建议以更清洁的方式执行此操作 - 这也允许考虑 detailLabel 或类似的额外字段。

[在http://pastebin.com/E2pUFRg4](http://pastebin.com/E2pUFRg4)上完成示例。

谢谢，

德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:26:14.397

我认为无论如何你都需要或多或少地“硬编码”你的字体大小。如果您从界面生成器或中央常量文件中获取它 - 甚至在代码中 - 它总是以某种方式硬编码。

如果您需要区分设备类型（iPhone、iPad）等，您仍然可以根据 UI 要求使用不同的值。

我通常为这样的值设置一个中央配置文件。在那里，您还可以“硬编码”您的标准边距值，以及其他单元格标签的字体大小。通常的做法是动态计算尽可能多的值以减少常量的数量，但仍然使用常量来“锚定”这些值。

# c# - Web 客户端 - 在此上下文中不允许异步操作

> ID：10648589
> 
> 赞同：2
> 
> 时间：2012-05-18T07:38:19.210
> 
> 标签：c#, .net, asynchronous, webclient, class-library

它是一个类库，它被从网页中调用

```
try
  {
    System.Net.WebClient wc = WebAccess.GetWebClient();
    wc.UploadStringCompleted += new System.Net.UploadStringCompletedEventHandler(wc_UploadStringCompleted);
    wc.UploadStringAsync(new Uri("http://" + MobileWLCUrl + urlCreateCacheAPI), GetJSONforGetMenuDetails(Id, MenuIds));                    
  }
catch (Exception ex) { EngineException.HandleException(ex); }

void wc_UploadStringCompleted(object sender, System.Net.UploadStringCompletedEventArgs e)
    {
        string result = e.Result;
        EngineException.CreateLog("Cache Created (for Menus: " + MenuIds + ") in API for LocationId: " + LocId);
    } 
```

嗨，伙计们，我试图异步点击这个 url，它给了我这个错误，任何帮助都会得到帮助。

```
Asynchronous operations are not allowed in this context. 
Page starting an asynchronous operation has to have the Async attribute set to true 
and an asynchronous operation can only be started on a page prior to PreRenderComplete event. 

at System.Web.AspNetSynchronizationContext.OperationStarted()
at System.Net.WebClient.UploadStringAsync(Uri address, String method, String data, Object userToken)
at System.Net.WebClient.UploadStringAsync(Uri address, String data) 
```

谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T07:43:21.610

将`Async="true"`参数添加到@Page 指令。

```
<%@ Page Async="true" ... %> 
```

西瓦尼，

`"http://" + MobileWLCUrl + urlCreateCacheAPI`您需要在以下代码中调用的页面（存储在）中应用此更改：

```
wc.UploadStringAsync(new Uri("http://" + MobileWLCUrl + urlCreateCacheAPI), GetJSONforGetMenuDetails(Id, MenuIds)); 
```

# javascript - Mediaelement.js setCurrentTime 在 Firefox 和使用 flash 时错误地设置时间

> ID：10648592
> 
> 赞同：3
> 
> 时间：2012-05-18T07:38:44.743
> 
> 标签：javascript, jquery, flash, video, mediaelement.js

我使用**mediaelement.js**组件仅显示部分视频。
我已经在***timeupdate***事件上设置了一个监听器，并且每次视频正在播放一个片段时，我都希望使用***setCurrentTime()***跳过它跳到下一个片段。但是，下次调用***timeupdate***事件时，时间与设置的时间不同（在设置时间前几秒钟）。这是我的代码：

```
var curr = t.media.getCurrentTime();
if (curr < segments[i][0]) {
  console.debug(curr.toFixed(1)+' jumping to '+segments[i][0]+' in segment '+i+'      ['+segments[i][0]+','+segments[i][1]+']');
  t.media.setCurrentTime(segments[i][0]);
  return;
} 
```

当我在执行代码后记录当前时间时，它显示当前时间已正确更新（例如到 19）但是当下次调用事件时当前时间错误（15.3）。
它只发生在 firefox 上，当回到 flash 时，在 chrome 中它似乎可以工作。
有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T06:59:55.640

问题在于闪存回退。显然，flash 的 h.264 格式存在问题并跳到特定时间。Flash 只能跳转到 H.264 格式视频中的关键帧，因此当媒体元素跳转到某个帧时，Flash 播放器会跳转到最近的关键帧。
可以通过每隔几帧设置一个关键帧（例如通过使用 ffmpeg -g 标志）来解决该问题，但更好的解决方案是将视频保持为另一种格式以用于 Flash 后备。

# android - Android AsyncTask 进程（logcat）不输出消息（在模拟器上）

> ID：10648593
> 
> 赞同：1
> 
> 时间：2012-05-18T07:38:53.850
> 
> 标签：android, android-emulator, logcat

logcat 进程启动，我没有收到任何错误或强制关闭。它似乎根本没有产生任何输出。

```
 String commandLine = "logcat -v time -b main *:V";
    String line;

    try {
        process = Runtime.getRuntime().exec(commandLine);
        bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream()));

        while(!mStop && (line = bufferedReader.readLine()) != null && newMessages.size() < maxMessages) {
            // It does not reach this point
            // Debugger shows 
            // mStop == false
            // newMessages.size == 0
            // maxMessages == 5000
            // line == null 
```

怀疑是 logcat 退出而没有打印任何内容。我在命令行中尝试了这个，它确实输出了 logcat 消息。

我替换`logcat`为`ls`然后 bufferedReader 填充`line`。

检查`bufferedReader`显示成员`in`(InputStreamReader)，它本身有一个成员，在 readLine() 之前`endOfInput`为**假**，在它之后变为**真**。

**最新消息：** 我在模拟器本身中打开了终端模拟器，然后运行它：

```
$ logcat -v time -b main *:V
Unable to open log device '/dev/log/main': Permission denied
$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:23:52.783

在寻找类似的帖子之后，这似乎与以下内容完全**重复**：

[Android 无法从应用程序运行 logcat](https://stackoverflow.com/questions/6219345/android-unable-to-run-logcat-from-application)

简而言之，问题是：读取日志需要用户权限，所以我添加了：

```
<uses-permission android:name="android.permission.READ_LOGS" /> 
```

到清单，它现在工作正常。

# android - 如何调整 ScrollView 的大小以适应屏幕底部的 60%？

> ID：10648594
> 
> 赞同：3
> 
> 时间：2012-05-18T07:38:57.537
> 
> 标签：android, android-layout

我正在尝试创建一个 ScrollView，它从底部开始占据大约 60% 的屏幕。屏幕处于横向模式，滚动视图是此活动中唯一的视图元素。我可以通过强制布局边距（参见下面的 XML 代码）让它在 800x480 模拟器屏幕上工作，但是当我切换到更高分辨率的屏幕时，滚动视图将占据屏幕的 60% 以上，因此它覆盖了一些背景图像上的信息。有人可以建议如何将视图保持在屏幕尺寸的 60% 左右，并且最好能够处理不同的屏幕尺寸？

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/safety_base"
    android:orientation="vertical"
    android:padding="0dp" >

    <ScrollView
        android:id="@+id/scrollSafety"
        android:layout_width="435dp"
        android:layout_marginBottom="10dp" 
        android:layout_marginTop="120dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:scrollbars="none" >

        <RelativeLayout
            android:id="@+id/layoutSafety"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">

            <ImageView
                android:id="@+id/imgSafety"
                android:contentDescription="@string/imgSafety_desc"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:src="@drawable/safety_info" />

        </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:51:21.577

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"

android:orientation="vertical"
android:padding="0dp" >

<ScrollView
    android:id="@+id/scrollSafety"
    android:layout_width="fill_parent"
    android:layout_height="0px"
    android:layout_weight="3"
    android:background="@android:color/background_light"
    android:scrollbars="none" >

    <RelativeLayout
        android:id="@+id/layoutSafety"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imgSafety"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:contentDescription="Blah blah"
            android:src="@drawable/icon" />
    </RelativeLayout>
</ScrollView>

<FrameLayout 
    android:layout_width="fill_parent"
    android:layout_height="0px"
    android:layout_weight="2"
    android:visibility="invisible"
    />
</LinearLayout> 
```

# iphone - 在 UILabel 中附加字符串？

> ID：10648596
> 
> 赞同：0
> 
> 时间：2012-05-18T07:39:29.477
> 
> 标签：iphone, objective-c, ios, nsstring, uilabel

我有 10 个 UIButtons 和单个 UILabel。所有这些 UIButtons 都有一些文本作为标题。现在我想要当我单击一些 UIButton 时，它的标题分配给 UILabel，当我们单击第二个 UIButton 时，它的标题也分配给 UIlabel 并附加它的文本它已经拥有的 UILabel。这是我的代码。

```
 - (void)aMethod:(id)sender {

    UIButton *button = (UIButton *)sender;
    NSString    *get = (NSString *)[[button titleLabel] text];
    NSLog(@"my uibutton test= %@",get);
    mainlabel.text=get;

 } 
```

请任何人指导我如何在单个 UILabel 中附加所有这些 UIButtons 标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:41:41.150

您需要通过附加它们来创建一个新字符串：

```
// ..
NSString origText = mainlabel.text;
mainlabel.text = [origText stringByAppendingString:get]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:43:31.740

您需要使字符串可修改。尝试类似：

```
NSMutableString * newLabel = [NSMutableString stringWithString:mainlabel.text];

[newLabel appendString:@" "];
[newlabel appendString:get];

mainLabel.text = newLabel; 
```

或类似的规定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:46:17.267

尝试这个：

```
 mainLabel.text = [mainLabel.text stringByAppendingFormat:@" %@",get]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T07:43:23.067

NVM：Binyamin Sharet 的代码很完美

这个怎么样？

```
- (void)aMethod:(id)sender {

UIButton *button = (UIButton *)sender;
NSString    *get = [sender currentTitle];
NSLog(@"my uibutton test= %@",get);
mainlabel.text=get;

 } 
```

但是一个非常简单的方法是将 id 类型转换为 UIButton 所以

```
- (void)aMethod:(UIButton *)sender {
mainLabel.text = [sender currentTitle];
} 
```

# assembly - Shellcode 搜索字节字符串：0C330408Bh

> ID：10648599
> 
> 赞同：0
> 
> 时间：2012-05-18T07:39:41.773
> 
> 标签：assembly, reverse-engineering, malware, shellcode, malware-detection

我正在学习恶意软件（Blackhole Exploit）的工作原理，我从恶意代码中提取了 shellcode。除了搜索字节字符串之外，我想通了一切。谁可以帮我这个事？为什么这个 shellcode（大多数恶意 shellcode）会搜索这个特定的字符串？搜索代码如下：

```
mov   eax, 0C330408BH;
inc   esi
cmp   dword ptr [esi], eax
jne   //back to top// 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:26:56.537

作为 Igor 回答的补充，我建议您阅读这篇文章[http://skypher.com/index.php/2010/11/17/bypassing-eaf/](http://skypher.com/index.php/2010/11/17/bypassing-eaf/)。该代码在系统 DLL 中查找特定指令，以使用它们从内存中的任意位置读取或写入数据。因此，要使用此代码，只需将 (address-0x30) 放入 eax，然后调用上面的序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:18:34.267

If you take the magic bytes, convert them to little-endian format and disassemble, you get the following:

```
8B 40 30    mov     eax, [eax+30h]
C3          retn 
```

So, the shellcode is searching for this sequence of instructions. I'm not 100% sure but I think it's used to find kernel32 image in memory (since this sequence usually occurs there).

# php - 从 php 网站检索数据到 Android 应用程序

> ID：10648600
> 
> 赞同：2
> 
> 时间：2012-05-18T07:39:46.210
> 
> 标签：php, android, xml, parsing

大家好，我几乎是 Android 的初学者。这是这种情况。我正在尝试编写一个应用程序，它基本上从网站获取数据并将其显示在应用程序中，来自网站的数据是 PHP，我很困惑如何去做，我听说过 json，并在 xml 中解析但是我只是不知道该怎么做。我应该用什么来解析数据？以及如何？，有人告诉我有关 AMF 的信息，但我不知道那是什么，所以有人可以帮助我解决这个问题，一个“初学者友好”的例子将不胜感激。多谢你们！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:09:34.793

首先让我们考虑一下，您的组合（Android + PHP）应用程序的流程是什么？

1.  Android 应用程序将通过 REST 调用您的站点（您将所需的参数放入 HTTP/GET 请求中）：[http ://mySite.org/fetchData.php?neededId=12345](http://mySite.org/fetchData.php?neededId=12345)
2.  PHP 脚本 fetchData.php 将需要理解您的请求： PHP 脚本：“啊！-我知道如果我得到 requiredId 作为参数，我应该提供一个二维数组 XYZ。”
3.  然后您的 PHP 脚本将收集所需的数据并将其准备为 JSON。JSON 是一个不错的选择，因为它很紧凑，不像 XML，并且有很容易的方法来操作它（就像使用 XML 一样）。如果您有一个相当简单的数据结构 - 我肯定会使用 JSON。
4.  然后，您的脚本将以 JSON 形式将数据的响应作为流发送。
5.  您的 Android 应用程序将收到响应，将其保存为字符串/文件，然后您可以对其进行解析。

我会推荐使用谷歌：拿我写的要点，问谷歌关于如何完成每一个要点的问题。

搜索引擎关键词：

1.  如何检索数据 + PHP + REST（我假设您知道如何在 PHP 中执行此操作），如何在 Android 中使用 REST（尽管这是一个 Java 问题 - 如何调用 URI）
2.  PHP mySQL 检索数据。（我假设您知道如何在 PHP 中执行此操作）
3.  使用 PHP 创建 JSON
4.  ...
5.  在 Java + Android 中解析 JSON。这是一个例子：[http ://answers.oreilly.com/topic/257-how-to-parse-json-in-java/](http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/)

当你面临一个大问题（也在现实生活中）时，总是尝试：

1.  把它分解成更小的问题（这会让它们看起来不那么可怕）
2.  想想你已经知道如何解决的问题。
3.  想想什么对你来说是新的，你将不得不学习。
4.  从最简单的东西开始——这有助于在早期阶段向前推进并防止挫败感。
5.  保持冷静——问题（尤其是在编程领域）总是可以解决的。这只是你想要多少的问题。5.

好吧-所以我没有给您问题的答案，但我相信我向您展示了解决方案的可能途径。

PS - stackoverflow 是许多专业人士的家（不算我自己......）。他们在自己的问题上投入了大量的时间和精力，并且非常乐于帮助他人。始终向他们表明您愿意为解决自己的问题付出努力-否则您可能会过快地阻止他们:-)

好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:03:24.957

你需要澄清你的问题。该网站由 PHP 提供支持这一事实无关紧要，除非您正在编写它。您的数据有一个 HTTP 接口。您需要使用 HTTP 将内容提取到您的 Android 客户端。这是您需要的第一个示例。

```
 URL url = null;
    HttpURLConnection urlConnection = null;

    try {
        // Fetch URL
        url = formatQuery( "this part is up to you" );
        while (url != null) {
            urlConnection = (HttpURLConnection) url.openConnection();
            InputStream is = urlConnection.getInputStream();
            InputStreamReader isr = new InputStreamReader(is);

            parseResult( isr );
            url = null;
        }
    } catch (MalformedURLException e) {
    } catch (IOException e) {
    } finally {
        urlConnection.disconnect();
    } 
```

下一个问题是，PHP 应用程序返回的数据是什么格式的？是 JSON 还是 XML？你的问题没有涉及到，所以我建议你弄清楚它是什么，并追求适当的路径。如果您需要问第二个问题，请这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T07:50:23.657

阅读这篇文章。您可以了解从 php/mysql 检索数据： [http ://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/) [http://www.androidhive.info/ 2011/11/android-xml-parsing-tutorial/](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

# azure - 仅使用 ssl 在 asp.net azure 中重置连接/文件上传

> ID：10648605
> 
> 赞同：0
> 
> 时间：2012-05-18T07:39:58.167
> 
> 标签：azure, blob, azure-blob-storage

我正在尝试将文件上传到 asp.net azure 中的 blob。如果页面没有 ssl，我会成功。但是如果我使用 https 页面上传，那么我会收到连接被重置错误。

```
 And also I mentioned the maxrequestlength in web.config. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:11:20.777

这不是 Azure 特定的错误，而是 ASP.NET 特定的问题。我做了一些测试，如果我能解决问题，但没有运气..

我确定问题是通过添加 maxrequestlength 并可能具有请求过滤来引入的。您必须在 webserver 特定设置中设置超时设置和长度并支持脚本运行时。

您还可以选择 RDP 到您的实例并启用 IIS 调试以了解可能出现的问题： [http ://www.microsoft.com/en-us/download/details.aspx?id=26798](http://www.microsoft.com/en-us/download/details.aspx?id=26798)

运行调试诊断工具 v1.2 后，请分享您的日志，我会寻找根本原因。

**要 RDP 访问 Windows Azure 应用程序，[请在此处访问我的博客](http://blogs.msdn.com/b/avkashchauhan/archive/2011/04/03/setting-rdp-access-in-windows-azure-application-with-windows-azure-sdk-1-3-1-4.aspx)**

# mysql - 基本数据库设计和复杂性

> ID：10648606
> 
> 赞同：3
> 
> 时间：2012-05-18T07:40:01.213
> 
> 标签：mysql, database-design

我正在设计一个系统，该系统具有用于存储用户和与用户相关的信息的数据库。更具体地说，表中的每个用户都只有很少的信息。诸如*名称、密码、uid 之*类的东西。

然后每个用户都有零个或多个容器，我最初这样做的方式是在数据库中创建第二个表，其中包含容器并有一个引用拥有它的用户的字段。所以像*containerName, content, owner*。

因此，对来自容器的数据的查询看起来像：

```
SELECT content
  FROM containers
 WHERE (containerName='someContainer' AND owner='someOwner'); 
```

我的问题是这是否是一个好方法，我认为可扩展性说我们有成千上万的用户，每个用户说......每个 5 个容器（但是每个用户可以有不同数量的容器，但 5 个可能是典型案例） . 我担心的是，当我在一个查询中可能想要的 5*1000 个条目中有 5 个条目时，搜索数据库会变得很慢。（我们通常可能只需要查询中特定容器的内容，并且我们正在使用基本上 4995 个条目的开销来查看数据库，对吗？如果我订阅了一百万用户会发生什么，它会变成一个巨大的表直觉上觉得是个坏主意。

我的第二个想法是每个用户都有表，但这也不是一个很好的解决方案，因为这会在数据库中给我 1000 个表，这（也是直觉）似乎是一个不好的方法做。

任何有助于理解如何设计它都将不胜感激，我希望一切都清晰易懂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:44:57.573

`INDEX`处理此问题的公认方法是在`owner`现场创建一个。这样，MySQL 优化了`owner = 'some value'`条件查询。

另见：[http ://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

你说得对，1000 个表是不可扩展的。一旦你开始达到几百万条记录，你可能想要考虑进行分片（根据用户属性将记录分成几个位置）......但到那时你已经非常成功了，我认为 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:46:34.170

如果是RBMS（如Oracle/MySQL）数据库，可以对经常查询的列创建索引，优化表的遍历和查询。为 PRIMARY 和（可选） FOREIGN 键自动创建索引。

# java - 将Java Long值转换为php中的值

> ID：10648613
> 
> 赞同：2
> 
> 时间：2012-05-18T07:40:28.697
> 
> 标签：java, php

此 Java 代码将时间戳转换为 Long 值：

```
Long.toString(new Timestamp(System.currentTimeMillis()).getTime(), 36) 
```

结果，我得到`h0zgkwm7`了编码时间戳的价值。

如何使用 PHP 将其解码为时间戳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:42:39.073

看起来你已经用 base 36 对其进行了编码。

你可以像这样解码它......

```
$decNumber = base_convert($str, 36, 10); 
```

# python - 在 PyYaml 中转储为 utf-8

> ID：10648614
> 
> 赞同：32
> 
> 时间：2012-05-18T07:40:30.047
> 
> 标签：python, utf-8, pyyaml

我正在尝试加载一堆 utf-8 编码的字符串并用 PyYaml 再次转储它们。这是加载/转储的代码：

```
lang_yml = yaml.load(codecs.open(lang + ".yml.old", "r", "utf-8"))
test_file_path = lang + '.yml'
stream = file(test_file_path, 'w')
yaml.dump(lang_yml, stream,  default_flow_style=False, encoding=('utf-8')) 
```

但是以“En arrière”开头的字符串最终会保存为“En arri\xE8re”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-18T16:22:30.930

自己找到了答案。我只好把它和论点一起扔掉

```
allow_unicode=True 
```

来源：[http ://dpinte.wordpress.com/2008/10/31/pyaml-dump-option/](http://dpinte.wordpress.com/2008/10/31/pyaml-dump-option/)

# matlab - 用给定直径的最小圆数覆盖多边形

> ID：10648621
> 
> 赞同：4
> 
> 时间：2012-05-18T07:40:55.300
> 
> 标签：matlab, geometry

**以下问题：** 给定是一个任意多边形。应以给定半径的最小圆数覆盖 100%。

**注意：** 1）自然圆圈必须重叠。2）我尝试解决任意多边形的问题。但也赞赏 CONVEX 多边形的解决方案。3）据我所知，这个问题是 NP-hard（[一种为 Set-cover 问题找到最小尺寸集覆盖的算法](https://stackoverflow.com/questions/4282003/an-algorithm-to-find-the-minimum-size-set-cover-for-the-set-cover-problem)）选择：U = 多边形和 S1...Sk = 具有任意中心的圆。

**我的解决方案：** 我已经阅读了一些论文并自己尝试了一些事情。我想出的最有前途的想法实际上已经在[Covering an absolute area with circles of equal radius 中](https://stackoverflow.com/questions/1404944/covering-an-arbitrary-area-with-circles-of-equal-radius)指出过。

所以我想我最好尽快尝试描述我自己的想法，然后完善我的问题。

这张照片已经让你对我的工作有了一个很好的了解

![在此处输入图像描述](../Images/db2726f60e6efc051517fb7e9b3e5d24.png)

**IDEA 和问题公式** 1\. 我用它们对应的六边形来近似圆，并对整个 R2 进行细分，即一个足够大的区域；关键字六边形最接近的包装。（青色...镶嵌，红色虚线，青色六边形的中心） 2\. 我把多边形放在这个镶嵌区域中间的某个地方，并计算覆盖多边形所需的六边形的数量。

在下文中，我试图通过逐步移动多边形来最小化 N，这是覆盖多边形所需的六边形数量，在每一步“计数”N 之后。

**解决问题：** 这就是困难的时候（对我来说）。我不知道有任何优化器可以正确解决这个问题，因为它们都会在稍微移动多边形并且没有观察到任何变化后终止。

**我的解决方案如下：** 首先注意这是一个周期性问题： 1\. 多边形可以在水平方向 x 上移动，周期为六边形的 3*r（边长 = 半径 r）。2.多边形可以在垂直方向y上移动，周期为六边形的r^2+r^2-2*r *r* cos(2/3*pi)。3\. 多边形可以以 2/3*pi 的周期旋转 phi。

这意味着，必须搜索可能解决方案的有限区域才能找到最佳解决方案。所以我所做的是，我为 (x,y,phi) 选择一个步长，然后简单地蛮力计算所有可能的解决方案，选出最优的。

**细化我的问题** 1) 问题的表述是否明智？现在我正在研究一种只对非常小的区域进行细分的算法，因此必须计算尽可能少的六边形。2）有没有更智能的优化器来解决这个问题？3）最后：我也很难找到合适的文献，因为我不知道我不知道要寻找的正确关键字。所以如果有人能给我提供文学作品，那也将不胜感激。

实际上，我可以继续讨论我尝试过的其他事情，但我认为你们中没有人愿意花整个下午来阅读我的问题。

提前感谢所有花时间思考的人。

垫

PS我在matlab中实现我的算法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-11T03:15:12.600

我喜欢你的方法！当你提到你的优化时，我认为一个好的方法是旋转六边形网格并平移它，直到你找到覆盖该区域的圆圈数量最少。您不需要旋转 360，因为图案是对称的，所以只需 360/6。

我研究这个问题已经有一段时间了，刚刚发表了一篇论文，其中包含解决这个问题的代码！它使用遗传算法和BFGS优化。您可以在此处找到该论文的链接：[https ://arxiv.org/abs/2003.04839](https://arxiv.org/abs/2003.04839)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:14:55.360

**编辑：**重写答案（没有限制，圆圈不能超出多边形）。

您可能对[Covering a simple polygon with circles](https://cstheory.stackexchange.com/questions/8799/covering-a-simple-polygon-with-circles)感兴趣。我认为该算法有效或可扩展到复杂的多边形。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-05T07:51:29.177

1.在最小尺寸的矩形中内接给定的多边形 2.用圆圈最佳地覆盖矩形（可用算法）

# javascript - Javascript 表单字段不可点击

> ID：10648624
> 
> 赞同：0
> 
> 时间：2012-05-18T07:41:07.147
> 
> 标签：javascript, focus, drag

我有这个代码[http://jsfiddle.net/xNHKP/6/](http://jsfiddle.net/xNHKP/6/)（由于某种我不明白的原因不能在小提琴中工作，但它可以在我的网站上工作 - [http://bit.ly/JV5I0Z](http://bit.ly/JV5I0Z)）

我想要的是可以拖动联系表单（单击最后一个菜单项以使其显示），但是当有人拖动或单击文本字段时，它们不会获得焦点，因此您无法输入它们。具有讽刺意味的是，它适用于 Internet Explorer。

那么如何在单击时使字段获得焦点？我不介意让它们不可拖动。

谢谢

编辑：下面的代码（尽量保持简单，只包括相关的东西）

```
dragDrop = {
initialMouseX: undefined,
initialMouseY: undefined,
startX: undefined,
startY: undefined,
draggedObject: undefined,

initElement: function (element) {
    if (typeof element == 'string')
        element = document.getElementById(element);
    element.onmousedown = dragDrop.startDragMouse;
}}

<form id="contactForm" onSubmit="return sendMail();">
  <textarea id="message" rows="8"></textarea>
</form>

<script type="text/javascript">
  dragDrop.initElement(document.getElementById('contactForm'));
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:03:37.697

好的，这是一个答案：您只需检查它是被拖动的表单，而不是它的任何其他内部元素，所以只需像这样编辑您的代码：

```
dragDrop.startDragMouse = function(e) {
    dragDrop.startDrag(this);
    var evt = e || window.event;

    // Now check it's the correct element we're dealing with
    if(evt.target.id==="contactForm") {
        dragDrop.initialMouseX = evt.clientX;
        dragDrop.initialMouseY = evt.clientY;
        addEventSimple(document,'mousemove',dragDrop.dragMouse);
        addEventSimple(document,'mouseup',dragDrop.releaseElement);
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:56:05.687

好的，看来您正在为此苦苦挣扎，考虑到您想要什么，我会这样做：

*   将Eventlistener 添加到您的表单中，使其不会冒泡，因此如果您单击内部元素，它不会触发。
*   让每个内在元素像往常一样生活，不要试图在它们上面添加混乱的事件。

If you *really want/need* the user to be able to drag the form by dragging on a label or something you should explicitely filter what are the draggable elements. Then you can go back to a bubbling event and filter out what's not draggable. If it's not draggable, don't do anything else than a return so you don't have trouble with text selection.

[Here's a fiddle](http://jsfiddle.net/yyFq6/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:50:05.580

在 Firebug 中，我可以看到，只要您单击表单元素，它就会为表单分配一个“拖动”类，并且当释放鼠标按钮时，该类被删除。**当按下鼠标按钮并**移动鼠标时，您需要分配“拖动”类。

# asp.net - 如何隐藏xml文件？

> ID：10648627
> 
> 赞同：-1
> 
> 时间：2012-05-18T07:41:16.557
> 
> 标签：asp.net, xml, seo, file-security

如何隐藏xml文件？我不想在谷歌搜索结果中显示该文件。我如何拒绝用户访问此文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:30:34.487

> 我不想在谷歌搜索结果中显示该文件。

创建一个[robots.txt](http://www.robotstxt.org/)文件以指示搜索引擎不要将其编入索引。

> 我如何拒绝用户访问此文件？

添加一些身份验证+授权层。最好与您网站的其他部分使用的相同。

# opengl - 使用 GLSL 渲染矩形纹理

> ID：10648628
> 
> 赞同：9
> 
> 时间：2012-05-18T07:41:17.233
> 
> 标签：opengl, glsl, vertex-shader

我创建了一个将视频帧（在 Mac 上）渲染到自定义帧缓冲区对象的类。作为输入，我有一个 YUV 纹理，并且我成功创建了一个片段着色器，它将 3 个矩形纹理作为输入（每个用于 Y、U 和 V 平面，其数据由 glTexSubImage2D 使用 GL_TEXTURE_RECTANGLE_ARB、GL_LUMINANCE 和 GL_UNSIGNED_BYTE 上传） ，在渲染之前，我将活动纹理设置为三个不同的纹理单元（0、1 和 2）并为每个纹理绑定一个纹理，出于性能原因，我使用了 GL_APPLE_client_storage 和 GL_APPLE_texture_range。然后我使用 glUseProgram(myProg)、glBegin(GL_QUADS) ... glEnd() 渲染它。

效果很好，我得到了预期的结果（除了闪烁效果，我猜这与我在两个不同的线程上使用了两个不同的 GL 上下文有关，我想它们在某些时候会互相影响[这是稍后另一个问题的主题]）。无论如何，我决定通过添加顶点着色器来进一步改进我的代码，这样我就可以跳过 glBegin/glEnd - 我读到的已经过时了，无论如何都应该避免。

因此，下一步我创建了两个缓冲区对象，一个用于顶点，一个用于纹理坐标：

```
 const GLsizeiptr posSize = 4 * 4 * sizeof(GLfloat);
      const GLfloat posData[] =
      {
            -1.0f, -1.0f, -1.0f, 1.0f,
             1.0f, -1.0f, -1.0f, 1.0f,
             1.0f,  1.0f, -1.0f, 1.0f,
            -1.0f,  1.0f, -1.0f, 1.0f
        };

        const GLsizeiptr texCoordSize = 4 * 2 * sizeof(GLfloat);
        const GLfloat texCoordData[] =
        {
            0.0, 0.0,
            1.0, 0.0,
            1.0, 1.0,
            0.0, 1.0
        };

    glGenBuffers(1, &m_vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, m_vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, posSize, posData, GL_STATIC_DRAW);

    glGenBuffers(1, &m_texCoordBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, m_texCoordBuffer);
    glBufferData(GL_ARRAY_BUFFER, texCoordSize, texCoordData, GL_STATIC_DRAW); 
```

然后在加载着色器后，我尝试检索顶点着色器中属性的位置：

```
 m_attributeTexCoord = glGetAttribLocation( m_shaderProgram, "texCoord");
        m_attributePos = glGetAttribLocation( m_shaderProgram, "position"); 
```

这给了我 0 的 texCoord 和 1 的位置，这似乎很好。

得到属性后我也调用

```
 glEnableVertexAttribArray(m_attributePos);
        glEnableVertexAttribArray(m_attributeTexCoord); 
```

（我只做一次，还是必须在每个 glVertexAttribPointer 和 glDrawArrays 之前完成？是否需要每个纹理单元完成？或者当我的着色器被 glProgram 激活时？或者我可以在任何地方做吗？）

之后我更改了渲染代码以替换 glBegin/glEnd：

```
 glActiveTexture(GL_TEXTURE0);
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, texID_Y);

        glActiveTexture(GL_TEXTURE1);
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, texID_U);

        glActiveTexture(GL_TEXTURE2);
        glBindTexture(GL_TEXTURE_RECTANGLE_ARB, texID_V);

        glUseProgram(myShaderProgID);

        // new method with shaders and buffers
        glBindBuffer(GL_ARRAY_BUFFER, m_vertexBuffer);
        glVertexAttribPointer(m_attributePos, 4, GL_FLOAT, GL_FALSE, 0, NULL);
        glBindBuffer(GL_ARRAY_BUFFER, m_texCoordBuffer);
        glVertexAttribPointer(m_attributeTexCoord, 2, GL_FLOAT, GL_FALSE, 0, NULL);
        glDrawArrays(GL_QUADS, 0, 4);

        glUseProgram(0); 
```

但是自从将代码更改为此，我总是只会得到黑屏。所以我想我错过了一些简单的步骤，也许是一些 glEnable/glDisable 或正确设置一些东西 - 但就像我说我是新手，所以我真的不知道。供您参考，这里是顶点着色器：

```
#version 110
attribute vec2 texCoord;
attribute vec4 position;

// the tex coords for the fragment shader
varying vec2 texCoordY;
varying vec2 texCoordUV;

//the shader entry point is the main method
void main()
{   
    texCoordY = texCoord;
    texCoordUV = texCoordY * 0.5; // U and V are only half the size of Y texture
    gl_Position = gl_ModelViewProjectionMatrix * position;
} 
```

我的猜测是我在这里遗漏了一些明显的东西，或者只是对这里正在进行的过程还没有足够深入的了解。我也尝试使用 OpenGLShaderBuilder，它帮助我获得了正确的片段着色器的原始代码（这就是我没有在这里发布它的原因），但是由于添加了顶点着色器，它也没有给我任何输出（想知道如果它不知道 position/texCoord 属性，它怎么知道如何产生输出？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:45:00.070

我没有仔细研究每一行，但我认为你的逻辑大多是正确的。我看到缺少的是[`glEnableVertexAttribArray`](http://www.opengl.org/wiki/GLAPI/glEnableVertexAttribArray). 您需要在 glDrawArrays 调用之前启用两个顶点属性。

# iphone - 如果 UITextField 为空，则显示 UIAlert

> ID：10648634
> 
> 赞同：0
> 
> 时间：2012-05-18T07:41:42.253
> 
> 标签：iphone, ios, ios5

我想做的就是，如果没有任何内容`UITextField`，应用程序将显示警报。我不明白我在做什么错。这是我的代码：

```
- (IBAction)Calculate:(id)sender {
    /*If there is nothing on textfield, it will show an alert*/

    if ([addtake.text length] && [Subtake.text length] == 0) 
    {

            UIAlertView *myAlert = [[UIAlertView  alloc]initWithTitle:@"Alert"message:@"Empty   TextField not allowed" delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles: nil];    
            [myAlert show];
    }

    else{

            NSString *Adding =[addtake text];
            NSInteger number = [Adding intValue]; /*Converting String to int*/
            NSInteger new = 5 + number;
            NSString *newString = [NSString stringWithFormat:@"%d",new];
            [myAdd setText:newString];
            /*Subtruct*/
            NSString *Subtruct =[Subtake text];
            NSInteger SubNumber = [Subtruct intValue];
            NSInteger newSub = 10 - SubNumber;
            NSString *newSubString = [NSString stringWithFormat:@"%d",newSub];
            [mySub setText:newSubString];

            [addtake resignFirstResponder]; 
            [Subtake resignFirstResponder];        
      }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:58:04.673

尝试使 if 语句中的每个子句都明确 - 如果只是为了可读性...

我会在你的测试中使用逻辑 OR，而不是逻辑 AND。因此，如果任一文本字段为空，则警报将显示

```
 if ((![addtake.text length]) || (![Subtake.text length])) 
    {

            UIAlertView *myAlert = [[UIAlertView  alloc]initWithTitle:@"Alert"message:@"Empty   TextField not allowed" delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles: nil];    
            [myAlert show];
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:46:09.097

```
if ([addtake.text length] == 0 && [Subtake.text length] == 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:45:53.867

我假设 addText 是你的 tesxField 所以你需要设置条件 [addtake.text length] == 0 。

# iphone - 在 linphone for iPhone 中启用 G729 编解码器

> ID：10648635
> 
> 赞同：7
> 
> 时间：2012-05-18T07:41:49.167
> 
> 标签：iphone, ios

我特此启用 G729 编解码器的问题。

目前我正在使用 linphone 库从 iPhone 拨打 sip 电话。我需要使用 g729 编解码器。

谁能知道我该怎么做？请分享您对此的宝贵知识。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T23:15:15.090

假设您能够编译 SDK 和 linphone XCode 项目，您需要执行以下操作：

1.  在 Audio.plist 文件中包含 G729_preference。您可以自己键入所有信息，也可以简单地复制 G722 行并将 722 替换为 729。确保将默认值设置为 YES
2.  在项目 -> 目标 -> 构建设置中找到“预处理器宏”并包括 HAVE_G729
3.  运行项目。SDP 现在应该在邀请或 200 OK 中包含 G729。

请注意，G729 有版税（又名专利许可），因此请注意。如果您计划进行商业部署，则需要与 Sipro 签订协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-07T09:05:26.473

您可以在项目中包含的 readme.md 中找到说明。

您需要使用以下命令启用 G729 编解码器：

```
./prepare.py -DENABLE_NON_FREE_CODECS=ON -DENABLE_G729=ON 
```

# multidimensional-array - 如何从 NumPy / PyTables 中的几个二维数组形成多维数组？

> ID：10648637
> 
> 赞同：0
> 
> 时间：2012-05-18T07:41:59.050
> 
> 标签：multidimensional-array, numpy, hdf5, pytables

我在 hdf5 文件下有几个二维数组，如何将它们合并到 PyTables 中的一个多维数组中？即，文件现在是数组 A、数组 yB、数组 C，我希望它们是数组 X第 1 维 A、第 2 维 B、第 3 维 C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:41:56.907

我想你正在寻找`numpy.dstack()`.

从[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dstack.html)：

```
Stack arrays in sequence depth wise (along third axis).
Takes a sequence of arrays and stack them along the third axis to make a single array.
All of them must have the same shape along all but the third axis. 
```

希望这可以帮助。爱 Numpy！

# python - 在python中使用scrapy执行Javascript提交表单函数

> ID：10648644
> 
> 赞同：6
> 
> 时间：2012-05-18T07:42:20.227
> 
> 标签：python, scrapy

我正在使用 scrapy 框架报废一个网站，并且在单击 javascript 链接以打开另一个页面时遇到问题。

我可以将页面上的代码标识为：

```
<a class="Page" alt="Click to view job description" title="Click to view job description" href="javascript:sysSubmitForm('frmSR1');">Accountant&nbsp;</a> 
```

任何人都可以建议我如何在 scaroy 中执行该 javascript 并通过我可以从该页面获取数据来获取另一个页面。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T10:49:31.853

查看下面关于如何将scrapy与硒一起使用的片段。爬网速度会变慢，因为您不仅要下载 html，而且还可以完全访问 DOM。

注意：我已复制粘贴此代码段，因为之前提供的链接不再有效。

```
# Snippet imported from snippets.scrapy.org (which no longer works)

from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Request

from selenium import selenium

class SeleniumSpider(CrawlSpider):
    name = "SeleniumSpider"
    start_urls = ["http://www.domain.com"]

    rules = (
        Rule(SgmlLinkExtractor(allow=('\.html', )),
        callback='parse_page',follow=True),
    )

    def __init__(self):
        CrawlSpider.__init__(self)
        self.verificationErrors = []
        self.selenium = selenium("localhost", 4444, "*chrome", "http://www.domain.com")
        self.selenium.start()

    def __del__(self):
        self.selenium.stop()
        print self.verificationErrors
        CrawlSpider.__del__(self)

    def parse_page(self, response):
        item = Item()

        hxs = HtmlXPathSelector(response)
        #Do some XPath selection with Scrapy
        hxs.select('//div').extract()

        sel = self.selenium
        sel.open(response.url)

        #Wait for javscript to load in Selenium
        time.sleep(2.5)

        #Do some crawling of javascript created content with Selenium
        sel.get_text("//div")
        yield item 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-08T03:36:26.520

如果你想查看一个相当庞大的功能代码库，它使用了 scrapy 和 selenium，请查看[https://github.com/nicodjimenez/bus_catchers](https://github.com/nicodjimenez/bus_catchers)。这是一个更简单的例子。

```
# stripped down BoltBus script 
from selenium import webdriver
from selenium.common.exceptions import TimeoutException
from selenium.webdriver.support.ui import WebDriverWait 
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.keys import Keys
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Response 
from scrapy.http import TextResponse 
import time

# set dates, origin, destination 
cityOrigin="Baltimore"
cityDeparture="New York"
day_array=[0]
browser = webdriver.Firefox()

# we are going the day of the days of the month from 15,16,...,25
# there is a discrepancy between the index of the calendar days and the day itself: for example day[10] may correspond to Feb 7th
for day in day_array:

    # Create a new instance of the Firefox driver
    browser.get("http://www.boltbus.com")

    # click on "region" tab
    elem_0=browser.find_element_by_id("ctl00_cphM_forwardRouteUC_lstRegion_textBox")
    elem_0.click()
    time.sleep(5) 

    # select Northeast
    elem_1=browser.find_element_by_partial_link_text("Northeast")
    elem_1.click()
    time.sleep(5)

    # click on origin city
    elem_2=browser.find_element_by_id("ctl00_cphM_forwardRouteUC_lstOrigin_textBox")
    elem_2.click()
    time.sleep(5)

    # select origin city
    elem_3=browser.find_element_by_partial_link_text(cityOrigin)
    elem_3.click()
    time.sleep(5)

    # click on destination city 
    elem_4=browser.find_element_by_id("ctl00_cphM_forwardRouteUC_lstDestination_textBox")
    elem_4.click()
    time.sleep(5)

    # select destination city 
    elem_5=browser.find_element_by_partial_link_text(cityDeparture)
    elem_5.click()
    time.sleep(5)

    # click on travel date
    travel_date_elem=browser.find_element_by_id("ctl00_cphM_forwardRouteUC_imageE")
    travel_date_elem.click()    

    # gets day rows of table
    date_rows=browser.find_elements_by_class_name("daysrow") 

    # select actual day (use variable day)
    # NOTE: you must make sure these day elements are "clickable"
    days=date_rows[0].find_elements_by_xpath("..//td")
    days[day].click()
    time.sleep(3) 

    # retrieve actual departure date from browser
    depart_date_elem=browser.find_element_by_id("ctl00_cphM_forwardRouteUC_txtDepartureDate")
    depart_date=str(depart_date_elem.get_attribute("value"))

    # PARSE TABLE

    # convert html to "nice format"
    text_html=browser.page_source.encode('utf-8')
    html_str=str(text_html)

    # this is a hack that initiates a "TextResponse" object (taken from the Scrapy module)
    resp_for_scrapy=TextResponse('none',200,{},html_str,[],None)

    # takes a "TextResponse" object and feeds it to a scrapy function which will convert the raw HTML to a XPath document tree
    hxs=HtmlXPathSelector(resp_for_scrapy)

    # the | sign means "or"
    table_rows=hxs.select('//tr[@class="fareviewrow"] | //tr[@class="fareviewaltrow"]')
    row_ct=len(table_rows)

    for x in xrange(row_ct):

        cur_node_elements=table_rows[x]
        travel_price=cur_node_elements.select('.//td[@class="faresColumn0"]/text()').re("\d{1,3}\.\d\d")

        # I use a mixture of xpath selectors to get me to the right location in the document, and regular expressions to get the exact data

        # actual digits of time 
        depart_time_num=cur_node_elements.select('.//td[@class="faresColumn1"]/text()').re("\d{1,2}\:\d\d")

        # AM or PM (time signature)
        depart_time_sig=cur_node_elements.select('.//td[@class="faresColumn1"]/text()').re("[AP][M]")

        # actual digits of time 
        arrive_time_num=cur_node_elements.select('.//td[@class="faresColumn2"]/text()').re("\d{1,2}\:\d\d")

        # AM or PM (time signature)
        arrive_time_sig=cur_node_elements.select('.//td[@class="faresColumn2"]/text()').re("[AP][M]")

        print "Depart date: " + depart_date
        print "Depart time: " + depart_time_num[0] + " " + depart_time_sig[0]   
        print "Arrive time: " + arrive_time_num[0] + " " + arrive_time_sig[0]
        print "Cost: " + "$" + travel_price[0] 
        print "\n" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T08:05:33.957

据我所知，通过 urrlib2 和 urllib 实现的 scrappy 爬虫显然不适用于 js。例如，对于使用 js，您可以使用 qt webkit 或 selenium。或者您可以在页面上找到所有 ajax 链接，并查看如何实现与服务器的数据交换并间接向服务器 api 发送响应。

# python - 用嵌套循环测试回文

> ID：10648647
> 
> 赞同：0
> 
> 时间：2012-05-18T07:42:28.903
> 
> 标签：python, palindrome

我知道这是最简单和最简单的检查方法：

```
if val == val[::-1]:
    print "yes"
else:
    print "no" 
```

但只是为了练习，我想用嵌套的 for 循环来测试它（使用这个`reversed()`函数——我花了几个小时，但不太清楚在哪里做正确的事`continue`：`break`

```
for i in val:
    for j in reversed(val):
        if i == j:
            break
    break 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:46:07.663

这应该这样做：

```
for i, j in zip(val, reversed(val)):
    if i != j:
        print 'no'
        break
else:
    print 'yes' 
```

**编辑：**非常感谢@jamylak 指出循环`else`子句。`for`我一直忘记这一点！

但是，我可能会这样做：

```
print 'yes' if list(val) == list(reversed(val)) else 'no' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:46:29.530

```
for i in range(len(val)/2):
    if val[i] != val[-i-1]:
        return False
return True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:16:49.933

这不是嵌套循环的用例。当您想将某事物的每个元素与其他事物的每个元素进行比较时，嵌套循环很有用。在您的情况下，您只想将第一个位置与最后一个位置进行比较，将第二个位置与倒数第二个位置进行比较，依此类推。你需要这样做：

```
for i in range(len(val)/2):
    if val[i] != val[-i-1]:
        continue
    else:
        break 
```

# java - 使用 SAX 进行解析时如何保留未绑定到对象的 XML 节点

> ID：10648651
> 
> 赞同：6
> 
> 时间：2012-05-18T07:42:31.100
> 
> 标签：java, android, xml, sax

我正在开发一个与蓝牙相机接口的安卓应用程序。对于存储在相机上的每个剪辑，我们将一些关于剪辑的字段（其中一些用户可以更改）存储在 XML 文件中。

目前，此应用程序是唯一将此 xml 数据写入设备的应用程序，但未来桌面应用程序或 iphone 应用程序也可能在此处写入数据。我不想假设另一个应用程序也不能有额外的字段（特别是如果他们有一个更新版本的应用程序添加了这个版本还不支持的新字段）。

所以我要防止出现这样一种情况：我们在另一个应用程序中向这个 XML 文件添加新字段，然后用户去使用 android 应用程序，它会清除其他字段，因为它不知道它们。

所以让我们举个假设的例子：

```
<data>
  <title>My Title</title>
  <date>12/24/2012</date>
  <category>Blah</category>
</data> 
```

当从设备读取时，这将被转换为一个看起来像这样的 Clip 对象（为简洁起见）

```
public class Clip {
  public String title, category;
  public Date date;
} 
```

所以我使用 SAX 来解析数据并将其存储到剪辑中。我只是将字符存储在 StringBuilder 中，并在到达标题、类别和日期的结尾元素时将它们写出来。

我意识到，当我将这些数据写回设备时，如果原始文档中有任何其他标签，它们将不会被写入，因为我只写出我知道的字段。

这让我觉得也许 SAX 是错误的选择，也许我应该使用 DOM 或其他东西，这样我可以更容易地写出最初存在的任何其他元素。

或者我在想也许我的 Clip 类包含一些通用 XML 类型（可能是 DOM）的 ArrayList，并且在 startTag 我检查元素是否不是预定义的标签之一，如果是，直到我到达那个标签的末尾存储整个结构（但在什么？）..然后在写回时，我将浏览所有附加标签并将它们写到 xml 文件中（当然还有我知道的字段）

这是一个众所周知的解决方案的常见问题吗？

-- 2012 年 5 月 22 日更新 --

我没有提到在实际的 xml 中根节点（实际上称为注释），我们使用已设置为 1 的版本号。我短期内要做的是要求我的应用程序的版本号支持是 >= xml 数据的版本号。如果 xml 是一个更大的数字，我将尝试解析以读回，但会拒绝对模型进行任何保存。尽管如何做到这一点，我仍然对任何类型的工作示例感兴趣。

顺便说一句，我想到了另一个应该很容易的解决方案。我想我可以使用 XPATH 来查找我知道的节点，并在数据更新时替换这些节点的内容。但是，我运行了一些基准测试，当将 xml 解析到内存中时，解析 xml 的开销是荒谬的。只是没有进行任何查找的解析操作导致性能比 SAX 差 20 倍。使用 xpath 进行解析通常要慢 30-50 倍，考虑到我在列表视图中解析这些，这真的很糟糕。所以我的想法是让 SAX 将节点解析为剪辑，但将整个 XML 存储在 Clip 类的变量中（请记住，这个 xml 很短，小于 2kb）。然后，当我将数据写回时，我可以使用 XPATH 替换我在原始 XML 中知道的节点。

不过，仍然对任何其他解决方案感兴趣。除非它包含一些代码示例，否则我可能不会接受解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:13:12.213

您说得对，如果您想保留未“使用”的节点，SAX 可能不是最佳选择。您仍然可以使用某种“sax 存储”来保留 SAX 事件并重放它们（周围有一些这样的实现），但是基于对象模型的 API 会更容易使用：你d 轻松保持完整的对象模型，只需更新“您的”节点。

当然，您可以使用标准 DOM **，**但您可能还需要考虑替代方案，这些替代方案可以更轻松地访问您将在任意数据模型中使用的特定节点。其中，JDOM ( [http://www.jdom.org/](http://www.jdom.org/) ) 和 XOM ( [http://www.xom.nu/](http://www.xom.nu/) ) 是有趣的候选者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T21:25:58.363

以下是使用[SAX 过滤器](http://www.cafeconleche.org/books/xmljava/chapters/ch08.html)的方法：

1.  当您使用 SAX 阅读文档时，您会**记录**所有事件。您记录它们并将它们进一步提升到 SAX 阅读器的下一级。您基本上将两层 SAX 阅读器（使用[XMLFilter](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/XMLFilter.html)）堆叠在一起 - 一层将记录和中继，另一层是您当前创建对象的 SAX 处理程序。
2.  当您准备好将您的修改写回磁盘时，您会启动记录的 SAX 事件，这些事件与您的编写器分层，这将覆盖您已更改的那些值/节点。

我花了一些时间在这个想法上，它奏效了。它基本上归结为`XMLFilter`s 的正确链接。这是[单元测试](https://github.com/pveller/SAXDVR/blob/master/src/test/java/org/playground/saxdvr/TestCanHandlePartialUpdate.java)的样子，你的代码会做类似的事情：

```
final SAXParserFactory factory = SAXParserFactory.newInstance();
final SAXParser parser = factory.newSAXParser();

final RecorderProxy recorder = new RecorderProxy(parser.getXMLReader());
final ClipHolder clipHolder = new ClipHolder(recorder);

clipHolder.parse(new InputSource(new StringReader(srcXml)));

assertTrue(recorder.hasRecordingToReplay());

final Clip clip = clipHolder.getClip();
assertNotNull(clip);
assertEquals(clip.title, "My Title");
assertEquals(clip.category, "Blah!");
assertEquals(clip.date, Clip.DATE_FORMAT.parse("12/24/2012"));

clip.title = "My Title Updated";
clip.category = "Something else";

final ClipSerializer serializer = new ClipSerializer(recorder);
serializer.setClip(clip);

final TransformerFactory xsltFactory = TransformerFactory.newInstance();
final Transformer t = xsltFactory.newTransformer();
final StringWriter outXmlBuffer = new StringWriter();

t.transform(new SAXSource(serializer, 
            new InputSource()), new StreamResult(outXmlBuffer));

assertEquals(targetXml, outXmlBuffer.getBuffer().toString()); 
```

重要的几行是：

*   您的[SAX 事件记录器](https://github.com/pveller/SAXDVR/blob/master/src/main/java/org/playground/saxdvr/RecorderProxy.java)包裹在 SAX 解析器周围
*   您的`Clip`解析器 ( [`ClipHolder`](https://github.com/pveller/SAXDVR/blob/master/src/test/java/org/playground/saxdvr/clip/ClipHolder.java)) 包裹在录音机周围
*   解析 XML 时，记录器将记录所有内容，您`ClipHolder`只会查看它知道的内容
*   [然后你对](https://github.com/pveller/SAXDVR/blob/master/src/test/java/org/playground/saxdvr/clip/Clip.java)[对象](https://github.com/pveller/SAXDVR/blob/master/src/test/java/org/playground/saxdvr/clip/Clip.java)做任何你需要做的事情[`clip`](https://github.com/pveller/SAXDVR/blob/master/src/test/java/org/playground/saxdvr/clip/Clip.java)
*   然后将[序列化](https://github.com/pveller/SAXDVR/blob/master/src/test/java/org/playground/saxdvr/clip/ClipSerializer.java)器包裹在记录器周围（基本上将其重新映射到自身）
*   然后，您使用序列化程序，它将负责提供记录的事件（委托给父级并注册`self`为 a `ContentHandler`），并覆盖它对`clip`对象的说明。

**[请在 github 上](https://github.com/pveller/SAXDVR)**找到 DVR 代码和`Clip`测试。我希望它有所帮助。

ps 这不是一个通用的解决方案，整个记录->重播+覆盖的概念在提供的实现中是非常基本的。基本上是一个插图。如果您的 XML 更复杂并且变得“毛茸茸”（例如，不同级别的相同元素名称等），则需要增强逻辑。这个概念将保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:01:27.400

如果您未绑定到特定的 xml 架构，则应考虑执行以下操作：

```
<data>
    <element id="title">
        myTitle
    </element>
    <element id="date">
         18/05/2012
    </element>
    ...
</data> 
```

然后将所有这些元素存储在一个 ArrayList 中。这样您就不会丢失信息，并且您仍然可以选择要显示-编辑-等的元素...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-22T06:36:12.293

您对 XPath 比 SAX 解析慢 20 倍的假设是有缺陷的...... SAX 解析只是一个低级标记器，您的​​处理逻辑将在其上构建......您的处理逻辑需要额外的解析...... XPath 的性能有很多与实现... 据我所知，vtd-xml 的 XPath 通常比 DOM 至少快一个数量级，并且更适合重型 XML 处理... 下面是一些指向更多参考...

[http://sdiwc.us/digitlib/journal_paper.php?paper=00000582.pdf](http://sdiwc.us/digitlib/journal_paper.php?paper=00000582.pdf)

[Android - XPath 评估非常慢](https://stackoverflow.com/questions/17704235/android-xpath-evaluate-very-slow/17722485#17722485)

# android - 我是否需要了解 Web 应用程序开发才能制作移动应用程序？

> ID：10648653
> 
> 赞同：0
> 
> 时间：2012-05-18T07:42:34.690
> 
> 标签：android, iphone, web-applications, mobile-application

所以我希望同时学习 Web 应用程序开发和移动应用程序开发，我想知道两者之间是否存在重叠。更具体地说，在构建移动应用程序时，开发 Web 应用程序的知识是否必不可少甚至有帮助？我的印象是，在能够开发使用互联网的移动应用程序之前，必须先了解基本的 Web 应用程序开发（至少是服务器端编程）（因为我认为移动应用程序只是一个不同的客户端，最终会拥有与某处服务器上的 Web 应用程序对话）。然而，谷歌搜索这引发了关于移动网络应用程序与原生移动应用程序的讨论，这让我感到困惑（例如，Shazaam 是原生应用程序还是网络应用程序？）。请帮我理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:46:24.153

本机应用程序是在您的移动设备上执行的应用程序。网络应用程序是在您的移动应用程序中打开网页并像经典网络浏览器一样运行的应用程序。

做移动端开发不一定要懂网络开发，但它会有所帮助，每个平台的编程都是一样的，每次更改时你只需要了解新的语言，但原则是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:21:46.127

您可以在没有任何 Web/企业应用程序开发知识的情况下开始学习移动应用程序开发。

但是，如果你有这些知识，肯定会让你的工作更轻松。您需要了解基本知识`RESTServices`（因为这主要是您如何从移动应用程序与服务器交互），知道如何`HTTP POST, GET, DELETE`工作等。还可以体验`MySQL`或`SQL`帮助您使用`SQLite`（这基本上是您在移动应用程序上的数据库）。此外，如果您有一些关于`ORMs`的知识`Hibernate`，也可以在您的移动应用程序中为您提供`ORMLite`帮助）。

毫无疑问，所有这些都会对您有很大帮助，任何其他有关编程标准/设计模式/Java/Objective-C 的经验都将使您的工作更轻松，并且您开发的产品更可靠/稳定。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:48:26.243

Knowledge of developing web application isn't necessary for developing mobile application. But, It will help you a lot. You can also build mobile app with HTML5,CSS & JavaScript.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T08:02:04.227

这取决于。

您可以开发根本不需要任何 Web 组件的移动应用程序。

我看到至少有两个大问题使 Web 开发对移动应用程序非常有用

*   您可以开发基于 Web 技术的非本地移动应用程序。使用 jQuery mobile 或 GWT（或其他框架）将支持您的应用程序的平台独立性。缺点是此应用程序无法使用移动设备的所有功能（例如相机），并且它们通常具有较低的性能和电池/电源效率。

*   我发现将云技术与移动设备结合使用非常自然。您可以使用网络来保存和共享数据。这允许您构建由移动和桌面驱动的应用程序（桌面在数据输入方面效率更高）

我也建议看看网络技术。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T08:03:51.160

迟早，您的移动应用程序需要与服务器通信才能做一些有用的事情——手机就是瘦客户端（相对而言）。所以是的，通常情况下，您会使用服务器端语言（如 PHP 或 RoR）为您的移动应用程序构建某种 API，以便与之交谈并发挥作用。

例如，由于您购买了 Shazaam（这是一个本机应用程序）：Shazaam 会录制几秒钟的音乐，然后上传到一个网络服务，该服务会完成所有繁重的工作，对录制的音乐进行采样并在 (我想象的）巨大的音乐数据库，用于该音乐的“签名”，并将识别的歌曲发送回手机，以便将其呈现给用户。一路走来，有服务器端代码可以做到这一点。

我曾在移动应用程序开发刚刚起步（2008-09）的公司工作，那里有些人只为 Android/Blackberry 编写 Java 或为 iOS 编写 Objective-C 并且不知道杰克在后端。为此，他们与编写 JSP 或 python 的服务器端人员进行了交谈，以构建他们的本机代码将与之交谈的 API。

有服务[Parse](https://parse.com/)可以让您为您的移动应用程序构建一个“后端”，而无需担心获得自己的服务器或编写服务器端代码。对于某些类别的应用程序很有用。

我希望一切都说得通。Web 开发（如服务器端）和移动开发（移动端的本机代码）之间肯定存在重叠。两者都学，必要时专攻其中一个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T09:08:19.560

Web 应用程序是一个网站（有时但不总是针对移动设备）使用与原生应用程序开发（obj c、c++、java）不同的技术/语言（php/perl/.net/xhtml/ccs 等）集.

是的，对两者都有一些了解很有用，但如果我是你，我会专注于一条路径（一次做一件事）服务器/后端/web-app/网站构建或移动开发。在决定转向移动应用程序开发之前，我在 Web 软件开发环境中工作了 10 多年。现在我不做 Web 编码，我使用现有的 Web 服务或与做 Web 服务方面的其他人一起工作。

它还取决于您要构建的应用程序类型。如果您想为移动设备编写游戏，那么您无需学习任何网络知识。使用 Apple 的 Game Center 进行排行榜等。

即使您想编写与 Web 服务通信的移动应用程序，我建议先编写一些使用现有 Web 服务的应用程序，这样您就可以专注于构建有效的东西，而无需尝试同时学习一种以上的编程语言。有很多网站提供 Web 服务，您可以使用它来创建自己的应用程序。

使用 Web 技术（phoneGap、Titan 等）编写应用程序有很多选择，但我个人会避免使用它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-18T07:49:14.340

Well, basic knowledge on web applications is very useful. After all, as you said, a mobile app is just another type of client. Knowing the principles of web communications is essential. The server side of an application is quite the same. As far as the client side is concerned, transferring your code from java to android is quite easy...!

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-18T08:06:03.643

我认为这取决于您要如何构建移动应用程序。如果您的应用程序可以在本地执行某些操作，则无需了解 Web 编程。但是如果你的应用想要与服务器通信，或者想要使用 web 的东西（比如渲染 HTML5 和 javascript），那么你最好了解 web 编程。本机和网络应用程序都可以做到这一点，但优缺点不同。还有一些平台可以帮助您使用 html 和 js 开发移动应用程序，然后将其转换为原生代码，例如钛。

恕我直言，移动应用程序的处理应尽可能在服务器上完成。这样，应用程序可以做得更多，效率更高。因此，了解 Web 应用程序开发将是一大优势。

# html - 粘性页脚 一个非常小的问题

> ID：10648658
> 
> 赞同：0
> 
> 时间：2012-05-18T07:42:53.287
> 
> 标签：html, css

以下是我的粘性页脚代码，它工作正常，但我不知道为什么我的粘性页脚没有显示在中心对齐位置请让我知道如何修改它以完成我的问题......或者还有其他好的方法制作粘性页脚。谢谢，

```
<table width="900" height="42" border="1" align="center" style="border-style:none; position: absolute;width: 900px;vertical-align: middle;text-align: center;z-index:999999999 !important;

    bottom: 0px;

" cellpadding="0" cellspacing="0" bordercolor="#AEAEAE" bgcolor="#0C4549">
  <tr>
    <td align="center" bgcolor="#0C4549" >2012 &copy; of DND CLUB. Developed by Radiations3.
        </div></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:47:11.767

Take a look at this. Much better solution.

[http://css-tricks.com/snippets/css/sticky-footer/](http://css-tricks.com/snippets/css/sticky-footer/)

Also try to steer away from using tables for anything other than displaying tabular data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:46:58.083

Remove `</div>` in `td`

```
<table width="900" height="42" border="1" align="center" style="border-style:none; position: absolute;width: 900px;vertical-align: middle;text-align: center;z-index:999999999 !important; bottom: 0px;" cellpadding="0" cellspacing="0" bordercolor="#AEAEAE" bgcolor="#0C4549">
    <tr>
        <td align="center" bgcolor="#0C4549" >2012 &copy; of DND CLUB. Developed by Radiations3.</td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:28:22.757

嗨，检查一下，我希望这会起作用：-

```
<table width="100%" height="42" border="1" align="center" style="
position:absolute;
left:0;
right:0;
vertical-align:middle;
text-align:center;
bottom: 0px;
background:#0C4549;"
cellpadding="0" cellspacing="0">
  <tr>
    <td align="center">2012 &copy; of DND CLUB. Developed by Radiations3.
        </td>
  </tr>
</table> 
```

演示：- [http://jsfiddle.net/yFqPb/6/](http://jsfiddle.net/yFqPb/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T10:14:45.570

这是另一种久经考验的粘性页脚解决方案。它使用起来非常简单，我经常使用它。

[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

# installshield-2011 - 在 installshield 的次要版本升级期间更改开始菜单名称

> ID：10648661
> 
> 赞同：0
> 
> 时间：2012-05-18T07:42:58.793
> 
> 标签：installshield-2011

目前，在程序开始菜单中，我有以下程序菜单 - [XXX] - 产品名称

现在，我想更改为程序菜单 - [YYY] - 产品名称

如何在 installshield 的次要版本升级期间更改开始菜单名称？在小升级期间可以这样做吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:53:48.713

根据运行时决定的属性，我已经实现了类似的设置快捷方式文件夹的名称。我不知道如何更改现有文件夹的名称，尽管我认为您希望将文件夹从“Product v10”重命名为“Product v11”

添加 [XXX] 目录名称时，给定一个名称，例如 ShortcutCompanyName。

然后添加一个更改集合的“设置目录”自定义操作（类型 35）：

```
 Directory Name : ShortcutCompanyName
    Directory Value: [ProgramMenuFolder]\[MyShortCutFolder]
    Install UI Sequence: After CostFinalize
    Install Exec Sequence: After CostFinalize
    Admin UI Sequence: After CostFinalize
    Admin Exec Sequence: After CostFinalize 
```

其中 [MyShortCutFolder] 是我设置为我想要的文件夹名称的属性，即在您的情况下为 XXX 或 YYY。

# mysql - 获取每天插入一行的用户

> ID：10648674
> 
> 赞同：0
> 
> 时间：2012-05-18T07:44:31.273
> 
> 标签：mysql

自 20 天以来，我需要检查哪些用户每天添加**一个项目（** **“to_date”**显示当天）。

* * *

```
**Table Structer**
# id         (int pk)
# user_id    (int fk)
# item_id    (int fk)   
# to_date    (datetime) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:54:45.090

这应该有效：

```
SELECT    user_id, COUNT(DISTINCT to_date) AS n
FROM      mytable
WHERE     to_date > DATE_SUB(CURRENT_DATE(), INTERVAL 20 DAY) 
GROUP BY  user_id
HAVING    n = 20 
```

您可能需要调整`DATE_SUB`条款以符合您的确切要求。

# ios - 使用 XMPPFramework 进行文件传输

> ID：10648678
> 
> 赞同：3
> 
> 时间：2012-05-18T07:44:57.970
> 
> 标签：ios, xmpp, xmppframework

我正在为我的 iPhone 聊天应用程序使用 xmpp 框架。我可以通过 xmpp 框架进行文本聊天。

```
- (void)viewDidLoad {

    TURNSocket *turnSocket = [[TURNSocket alloc] initWithStream:[self xmppStream] toJID:jid];

    [turnSockets addObject:turnSocket];

    [turnSocket startWithDelegate:self delegateQueue:dispatch_get_main_queue()];

    [turnSocket release];

}

- (void)turnSocket:(TURNSocket *)sender didSucceed:(GCDAsyncSocket *)socket {

    NSLog(@"TURN Connection succeeded!");
    NSLog(@"You now have a socket that you can use to send/receive data to/from the other person.");

    [turnSockets removeObject:sender];
}

- (void)turnSocketDidFail:(TURNSocket *)sender {

    NSLog(@"TURN Connection failed!");
    [turnSockets removeObject:sender];

} 
```

但是想在openfire服务器上通过xmpp框架传输文件，建立TurnSocketConnection失败。

# logging - 如何在 log4j 中启用包级别日志记录

> ID：10648681
> 
> 赞同：12
> 
> 时间：2012-05-18T07:45:00.053
> 
> 标签：logging, log4j, package

谁能告诉我，什么是 log4j 中的包级别日志记录？以及如何启用此功能，今天我的面试问题无法回答:-(

即使我在 Google 中也没有找到好的解决方案。

太感谢了。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-18T07:48:29.423

包级日志是 log4j 的标准日志。使用 log4j 配置，您可以指定包和关联的级别。

在[介绍示例](http://logging.apache.org/log4j/1.2/manual.html)中，“com.foo”有包级别的日志记录。

```
# Print only messages of level WARN or above in the package com.foo.
log4j.logger.com.foo=WARN 
```

# java - 在 JAVA 中通过注册表获取 Windows ProductID

> ID：10648685
> 
> 赞同：-1
> 
> 时间：2012-05-18T07:45:15.787
> 
> 标签：java

如何通过 Java 中的注册表获取 Windows ProductID？我尝试的唯一方法是通过：

```
 Process p = Runtime.getRuntime().exec("reg query \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\" /v ProductId"); 
```

它返回 null 或错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:28:20.220

我使用相同的方法来获取 Windows ProductID。它在 jdk_1.6.0.26 (x64) 上对我有用，但在 jdk_1.6.0.06 (x86) 上却没有，因为我已经安装了 Win7x64。

[PD：我使用Java 从读/写到 Windows 注册表](https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java)的 WinRegistry 实现，如果您考虑上述评论，它就可以工作。

# powershell - Powershell 和 Lotus Notes - 如何提取带有员工编号的用户名？

> ID：10648686
> 
> 赞同：1
> 
> 时间：2012-05-18T07:45:18.883
> 
> 标签：powershell, powershell-2.0, lotus-notes

我有具体问题。我需要从活动目录中提取域名并将它们与 Lotus Notes 中的员工编号结合起来。我使用 Get-QADUser（来自 quest.com 的快照）获取域名，这没问题，但是如何获取员工编号并将它们组合起来？谢谢

编辑（18.5\. 11:56）：现在我正在使用这个脚本（由 Christian 发布）并且我想出了如何获取 LN 数据库的名称 - 右键单击​​ Lotus notes 工作区中的 DB，然后单击应用程序/属性。

```
# Create LN Object
$DomSession = New-Object -ComObject Lotus.NotesSession

# Initialize LN Object
# You'll be asking for LN password to your id
$DomSession.Initialize()

# Connect to Server, select db and display the name
$DomDatabase = $DomSession.GetDatabase("LN007","IT\HW.nsf")
Write-Host "Database open : " $DomDatabase.Title

# Open specific View (By Serial Number)
$DomView = $DomDatabase.GetView('Serial Number')
Write-Host "View read : " $DomView.Name

# Show number of documents
$DomNumOfDocs = $DomView.AllEntries.Count
Write-Host "Num of Docs : " $DomNumOfDocs

# Get First Document in the View
$DomDoc = $DomView.GetFirstDocument() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:59:05.213

如果您有权访问数据库和 Notes 客户端，则可以在 Notes Designer 中打开数据库并查看可用的视图。然后，您应该能够找到或创建一个包含您需要的数据的数据。

如果您无权访问 Lotus Notes，那么您已经足够接近您的 powershell 脚本，您可以使用 com API 来获取信息。NotesDatabase 对象（即$DomDatabase）有一个Views 属性，它将返回NotesView 对象。您可以遍历这些并打印出名称作为开始。同样，一旦您找到了您想要的视图，您就可以使用 NotesView 的 Columns 属性访问该视图中的列。

您需要在此处查看 COM api 文档以获得更多帮助： [http](http://blagoevgrad.court-bg.org/help/help85_designer.nsf/Main?OpenFrameSet) ://blagoevgrad.court-bg.org/help/help85_designer.nsf/Main?OpenFrameSet （参见 LotusScript/COM/OLE 类部分）

根据您对 Powershell 与 com api 的舒适程度，您可能可以通过几种方式来处理这个问题，或者通过提取视图中的所有文档并获取数据，或者使用内置的 NotesView.GetDocumentByKey 方法来执行作为脚本中的查找。使用按您查询的键排序的视图（并设置为视图的第一列），您可以调用该方法并使用该键取回文档。然后使用该 NotesDocument 对象检索其中的任何值（即员工姓名或编号或其他）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:57:25.797

您可以使用`com object`.

推荐链接：

[http://davidmoravec.blogspot.it/2008/08/retrieve-data-from-lotus-notes-with.html](http://davidmoravec.blogspot.it/2008/08/retrieve-data-from-lotus-notes-with.html)

[Lotus Notes 对象](http://www-12.lotus.com/ldd/doc/domino_notes/6.5.1/help65_designer.nsf/b3266a3c17f9bb7085256b870069c0a9/6e6328fcef0425cf85256e00004a5312?OpenDocument)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T14:25:40.193

您打开的数据库是否被称为“names.nsf”？如果是这样，那就是标准的 Domino 目录数据库，您应该使用“人员”视图，并且您要查找的项目名称应该是“员工 ID”——除非客户使用他们自己的字段名称自定义了数据库。

如果它是您正在使用的自定义数据库，那么除了使用 Notes 客户端和 Domino Designer 之外，还需要为自己获取一份 NotesPeek。免费。 [在这里下载](http://www-01.ibm.com/support/docview.wss?uid=swg24005686)

它为您提供数据库的树形视图。它向您显示存储在数据库中的所有内容——但它仅显示存储的内容，因此您可以在 Notes 客户端中看到但无法通过 Notes 类访问的计算字段不会让您感到困惑。（Notes 客户端中的文档属性对话框也不会显示计算值，如果您在视图中选择了文档时使用它，但如果您在实际打开文档时使用它，它将显示给您。）

# php - php 超链接到 uncpath IE

> ID：10648687
> 
> 赞同：0
> 
> 时间：2012-05-18T07:45:20.077
> 
> 标签：php, hyperlink, unc

我试图在局域网上的服务器上获取一个文件，以便客户端电脑通过超链接打开。现在我只需要这个在 IE 上工作。

假设文件名存储在变量 $sPath 中，因此 file_exists($sPath) 返回 true，服务器名称为 server_name。超链接会是什么样子？这是我使用过的许多组合中的一些......

```
<a href="file:///intocloud$sPath">here</a> 
<a href="file://intocloud$sPath">here</a> 
<a href="file://///intocloud$sPath">here</a> 
<a href="/////intocloud$sPath">here</a> 
```

这些都不起作用，我也尝试了其他一些方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:50:49.917

IE 会接受这个

```
<a href="file://\\server\shared\test.txt" >test me</a> 
```

[编辑]

事实上这也有效

```
<a href="file:////server/shared/test.txt" >test 2</a> 
```

确保您有正确的 UNC 路径开始在 Windows 中工作。开始 > 运行应该可以打开它。IE 对于您可以在 URL 地址栏中输入的内容非常宽松，即使严格来说它对所有浏览器都无效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:49:36.363

我以为我尝试了所有组合，但问题是我在路径中添加了太多细节：

该`$sPath`变量是一个绝对路径，它看起来像`/var/blah/blah/blah/stuff.docx`。我想要的只是`blah/blah/blah/stuff.docx`。

所以使用 corerct `$sPath`：

```
<a href="file:////server/$sPath">here</a> 
```

# asp.net-mvc - SAAS 客户的 Cname 记录

> ID：10648688
> 
> 赞同：0
> 
> 时间：2012-05-18T07:45:23.173
> 
> 标签：asp.net-mvc, saas, cname

我正在开发 SAAS 产品。它托管在 Windows Azure 上。

我需要让我们的客户选择拥有 CName 记录。

我们的应用 URL 如下所示：login.appname.com

创建客户时，他们会为他们创建自己的地址，如下所示：login.appname.com/CustomerCompanyName

我想要做的是让我们的客户 URL 看起来像：login.CustomerCompanyName.com/

解决此问题的最佳方法是什么。它是一个基于 ASP.NET 4/MVC4 构建的 Web 应用程序，托管在 Microsoft Azure 上。

任何提示将非常感谢。

谢谢，诺埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:26:05.323

您需要了解您的要求的技术限制。

1.  您的应用程序正在 login.appname.com 上运行
2.  客户已创建，您提供特定站点为 login.appname.com/customercompanyname

注意：此时 customercompanyname.com 甚至不是注册域，或者如果已注册，它可能属于其他人。（还是先注册 customercompanyname.com 域，然后在 Azure App 中创建新客户？

你想做的事情很难实现。这并非不可能，但是每次您这样做时，您都必须修改您的 Azure 应用程序以处理主机标头。我个人认为是一部非常丑陋的作品。

因此，如果您想知道需要什么，这就是我的想法（其他人可能会有所不同或更好的解决方案）：

1.  为您的客户注册一个域名 (customerAcompanyB.com)
2.  在开发期间在您的 Windows Azure 应用程序中创建一个自定义文件夹
3.  修改您的 Azure 应用程序以处理 customerAcompanyB.com 主机头，以便您可以将请求路由到 appname.com/folder_name
4.  在您的 customerAcompanyB.com 域注册商设置 CNAME 以路由您的 appname.com

# svg - 如何判断 SVG 何时完成渲染

> ID：10648693
> 
> 赞同：2
> 
> 时间：2012-05-18T07:45:50.560
> 
> 标签：svg

我有一个 SVG，加载时间很短（大约 2-3 秒）。在那段时间里，它看起来有点滑稽。无论如何，是否可以告诉 SVG 何时完成渲染，以便我可以放置一个微调器或隐藏它或其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:05:52.373

你说不出来。限制是为了保障用户的安全。请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=608030](https://bugzilla.mozilla.org/show_bug.cgi?id=608030)了解有关 Firefox 何时考虑使用此功能的更详细说明，但其他 UA 会得出相同的结论，因此您不太可能做到这一点在任何 UA 中。

从引用的错误...

> 有条件地根据链接的可访问性做任何事情似乎很危险。我还没有尝试过，但假设攻击者想知道用户是否访问过 example.com。攻击者可以将超链接的 href 设置为 example.com，然后在隐藏的 iframe 中导航到 example.com。如果在超链接所在的文档上触发 MozAfterPaint 事件，您就会知道用户尚未访问 www.example.com。否则，他们有。

# iphone - iPhone刷新tabcontroller和内容

> ID：10648696
> 
> 赞同：1
> 
> 时间：2012-05-18T07:45:58.637
> 
> 标签：iphone, xcode, uitabbarcontroller

我有两个要解决的问题，一个是刷新选项卡控制器本身，另一个是刷新选项卡控制器的内容。

我希望刷新选项卡控制器本身的原因是我的应用程序有一个 Web 调用，它返回一个 JSON，它设置选项卡的顺序并设置每个选项卡的内容。我已经知道了，这样当您退出应用程序并重新进入应用程序时，选项卡控制器会通过放置来刷新

```
exit(0) 
```

在 AppDelegates ApplicationDidEnterBackground 中，这样当用户退出并再次进入时，控制器将被刷新。在 applicationDidFinishLaunchingWithOptions 中，我设置了一个 Web 调用，该调用调用 JSON，然后用于设置 Tab 键顺序。我知道这不是这样做的好方法，但就目前而言，这是我能想到的唯一解决方案。我还能如何刷新 TabController？

至于选项卡内容，使用此代码刷新

```
 becomeActiveObserver = [[NSNotificationCenter defaultCenter] 
                         addObserverForName:UIApplicationDidBecomeActiveNotification
                         object:nil 
                         queue: nil 
                         usingBlock:^(NSNotification *note){ 

                          [self refresh];
                          [self viewDidUnload];
                         }]; 
```

我已经为 5 个选项卡中的每一个设置了这种类型的代码。这很好用，但问题是只有在退出并再次访问应用程序时才会刷新内容。网络呼叫将是定期的，我希望在进行网络呼叫时内容会自行刷新，而无需我退出并再次进入应用程序。

出于测试目的，我在我的设置屏幕中设置了一个按钮（设置屏幕只是我的一个选项卡中的另一个视图），当点击读取 JSON 时，它存储在 iPhone 目录中，这与从网络调用中检索到的 JSON 不同（让我不必去服务器并在那里不断更改 JSON）。单击此按钮时，它应该读取这个新的 JSON，更新内容，然后刷新视图。我已经对此进行了测试，并且正在读取 JSON 并且正在更新数据（我在每个屏幕上设置了一个按钮，该按钮将读出它用来确认这一点的 JSON），但是在我退出并输入之前，视图不会刷新再次申请。

我在设置屏幕中设置的用于读取存储在设备上的 JSON 的临时代码是

```
-(IBAction)RefreshApp:(id)sender{     

NSFileManager *fileManager = [NSFileManager defaultManager];

     NSString *filePath = [[NSBundle mainBundle] pathForResource:@"widgjson" ofType:@"json"];  
     NSData *myData = [NSData dataWithContentsOfFile:filePath];  
     NSString *responseString = [[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding];   

 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docDir = [paths objectAtIndex: 0];
        NSString *docFile = [docDir stringByAppendingPathComponent: @"json.txt"];
        [fileManager removeItemAtPath:docFile error:NULL];
        [responseString writeToFile:docFile atomically:NO encoding:NSUTF8StringEncoding

DashboardVC *db = [[DashboardVC alloc] init];
    [db refresh];
    [db viewDidUnload];

} 
```

在底部，您可以看到我尝试从其中一个选项卡调用 refresh 以刷新其中一个视图，看看是否有效，但没有运气。刷新代码似乎仅在您从类本身内部调用它时才起作用，从另一个类访问它时我似乎无法刷新它。

进行网络呼叫时，我希望立即刷新每个选项卡。关于我将如何做到这一点的任何想法？

如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:55:08.720

UITabBarController 的[`setViewControllers: animated:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/occ/instm/UITabBarController/setViewControllers%3aanimated%3a)方法就是你要在这里使用的。

当您收到要重新排序选项卡的通知时，使用该函数以数组的形式传递选项卡栏中拥有（和引用）的各种视图控制器，该数组按照您希望选项卡的顺序排列出现。

# jquery-mobile - 使用 jQueryMobile 在 BlackBerry 中捕获退格键按下

> ID：10648700
> 
> 赞同：8
> 
> 时间：2012-05-18T07:46:16.253
> 
> 标签：jquery-mobile, blackberry, keyevent, blackberry-simulator, jquery-events

`input[type="text"]`有没有办法在黑莓中捕获退格键按下？我已经尝试过`$('input[type="text"]').bind('keydown', function(event) { ... });`，它捕获了除退格键（del）之外的所有按键事件。按下此键不会触发任何键事件。

有谁知道捕捉事件的方法？

我正在为 OS 6.0 开发并使用 BlackBerry 模拟器 9800 进行测试。

已编辑 - 我正在测试的代码

```
<div id="myPage" data-role="page" data-theme="b">

  <div data-role="content">  
    <input type="text"  id="ddd" />
  </div>

  <script type="text/javascript">
    $('input[type="text"]').bind('keydown', function(e){
      if(e.keyCode == 8)
        alert('backspace trapped')
    });
  </script>

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:22:18.453

我刚刚遇到了这种烦恼，并在寻找答案时发现了这个问题，所以这里是我的调查和解决方案的详细信息（嗯，解决方法）。

当按下退格键时，不会在黑莓浏览器中的or元素上触发`keyup`and事件。但是，它将*在*事件处理程序绑定到时触发：`keydown``input``textarea`*`document`*

 *```
$("#myInput").keydown(someFn); //Will not fire for backspace
$(document).keyup(someFn); //Will fire for backspace 
```

为什么会这样，我完全不知道。该`keyup`事件应该冒泡，确实如此，但由于按下退格键时它甚至不会触发，所以没有多大用处。

但是，我们还有另一个活动可供使用。黑莓浏览器支持该`input`事件，并在元素值发生变化时正确触发（包括，幸运的是，当该变化是由于按下退格键时）。

因此，我们可以通过将事件处理程序绑定到`keydown`和来解决问题`input`。该`keydown`事件将在 之前触发`input`，除非按下退格键，在这种情况下`keydown`不会触发。所以我们可以很容易地跟踪它：

```
function handler(e) {
    if (e.keyCode === 8) {
        alert("Backspace!"); //Backspace was pressed :)
    }
}

var elem = document.getElementById("example");
elem.addEventListener("keydown", function (e) { //Bind to keydown event
    this.keydownFired = true; //Remember that keydown fired in expando property
    handler.call(this, e); //Call the event handler
}, false)
elem.addEventListener("input", function (e) { //Bind to input event
    if (!this.keydownFired) { //Keydown didn't fire, must have pressed backspace
        e.keyCode = 8; //Fix the event object
        handler.call(this, e); //Call the event handler
    }
    delete this.keydownFired; //Clean up so we can handle next key press
}, false); 
```

一些注意事项：

*   据我所知，这只是黑莓 6 浏览器中的一个问题。我已经测试了黑莓 5（物理设备和模拟器）和 7（模拟器），两者都会触发退格键的`keydown`和`keyup`事件。

*   这个“修复”几乎适用于我测试过的每一个浏览器（所以你可以使用它来正确支持 Blackberry 6 而不会破坏其他浏览器）除了 Opera Mobile（在版本 12 中测试），它出于某种原因喜欢触发`input`事件有时两次。

*   这仅允许您在输入中有要删除的文本时检测退格键（否则`input`事件不会触发）。这可能是剧本最大的败笔。

*   [您可以在此处](http://jsfiddle.net/jamesallardice/cHXpF/)找到一个工作示例，但对于移动设备测试，加载[嵌入式版本](http://jsfiddle.net/jamesallardice/cHXpF/embedded/result/)会更快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T07:54:39.207

以下代码，工作正常。你可以在[jsfiddle](http://jsfiddle.net/LbSb9/)上看到它。在 chrome 上测试它

```
$(document).ready(function() { 
$('input[type="text"]').bind('keydown', function(e){
    if(e.keyCode == 8)
        alert('backspace trapped')
     });
   });​ 
```

黑莓使用

```
function captureBackButton() {
            blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK,
            function() {
             alert('Backspace Pressed')
            });
        } 
```

[查看详情](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Menu-key-and-back-key-not-working-on-the-simulator/td-p/1321397)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T15:08:15.047

您可以使用此[http://jsbin.com/ezucen/13/](http://jsbin.com/ezucen/13/)查看您返回*的*键码。在 BlackBerry 9900 7.1 上，我得到了 keyCode 8。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T23:24:03.510

**在一般浏览器中没有办法做到这一点。**

> 使用 JavaScript 跟踪返回键事件的唯一方法是使用使用`[**KEY_BACK**](https://developer.blackberry.com/html5/api/blackberry.system.event.html)`API 的 Widget/WebWorks 应用程序。*

# c# - 创建自定义文化，然后使用 Windows 中的“区域和语言”对话框修改它们

> ID：10648705
> 
> 赞同：1
> 
> 时间：2012-05-18T07:46:26.190
> 
> 标签：c#, globalization, cultureinfo

我刚刚按照 MSDN 文章中描述的步骤创建并注册了一种新文化：[如何：创建自定义文化](http://msdn.microsoft.com/en-us/library/ms172469.aspx)。

```
var cib = new CultureAndRegionInfoBuilder(CultureName, CultureAndRegionModifiers.None);
cib.LoadDataFromCultureInfo(new CultureInfo("cs-CZ"));
cib.LoadDataFromRegionInfo(new RegionInfo("CZ"));
cib.CultureNativeName = CultureNativeName;
cib.CultureEnglishName = CultureNativeName;
cib.NumberFormat.NumberDecimalSeparator = separator
cib.Register(); 
```

一切看起来都很好。我可以在 Windows 的“区域和语言”对话框中看到我的新文化。我什至可以将文化加载回我的应用程序。

当我直接在控制面板的“区域和语言”对话框中更改某些内容时（假设 NumberDecimalSeparator 应该是点“。”而不是逗号“，”），然后尝试检索文化：

```
var ci = CultureInfo.GetCultureInfo(CultureName);
ci.ClearCachedData();
ci = CultureInfo.GetCultureInfo(CultureName); 
```

我仍然有我注册的相同文化信息。检索到的 CultureInfo 对象中不会投射手动更改。

这是正确的行为还是我做错了什么？

**编辑：**

如果我再想一想，这显然是我在 IIS 中以不同的用户帐户运行应用程序的问题，而不是在控制面板中更改文化信息的用户，因为它是我注意到的**UserCustomCulture 。**

**正确的问题是，我如何注册一种对所有用户（或至少对于 IIS 用户和某些管理员用户）通用的文化？**

我想这样做的原因：

1.  我希望能够自定义应用程序中使用的格式。
2.  我不想在我的 Web 应用程序中创建与控制面板中的 GUI 等效的 GUI。
3.  管理员可以简单地在控制面板中为应用程序设置格式。

# c# - ExecuteNonQuery 要求命令在我的代码中有事务错误

> ID：10648718
> 
> 赞同：67
> 
> 时间：2012-05-18T07:47:25.510
> 
> 标签：c#, ado.net, c#-2.0

我收到以下错误`cmd.ExecuteNonQuery`。

> “当分配给命令的连接处于挂起的本地事务中时，ExecuteNonQuery 要求命令具有事务。命令的事务属性尚未初始化。”

这是我的代码：

```
 //if (hdRefresh.Value.Length > done.Value.Length || done.Value == "1")
    //{
    //    //Write Your Add Customer Code here > Response.Write("true") 
    //    done.Value = hdRefresh.Value;
    //}
    //else
    //{
    //    Response.Redirect("~/Cashier/BTBill.aspx");
    //    return;
    //}

    if (IsClosedToDay())
    {
        ScriptManager.RegisterClientScriptBlock(Page, typeof(Page), "Warning", "<script>alert('Day Closing has been Performed ')</script>", false);
        return;
    }

    DateTime dateFeomDB = getdate();
    // by atizaz
    if (HDD.Value == "" || HDD.Value == null)
    {
        ScriptManager.RegisterClientScriptBlock(Page, typeof(Page), "Warning", "<script>alert('No Transaction Found')</script>", false);
        return;
    }
    //
    SqlConnection scon = new SqlConnection(ConfigurationManager.ConnectionStrings["SQLCONN"].ToString());
    Common.BillTransaction bill1 = new Common.BillTransaction();
    ProcessUpdateBalandUnAuthBal insertBalance = new ProcessUpdateBalandUnAuthBal();
    Common.Currency currencyy = new Common.Currency();
    ProcessAuthorizeTokenByBillNo authorize = new ProcessAuthorizeTokenByBillNo();
    BillTransaction bill = new BillTransaction();
    scon.Open();
    SqlTransaction sqlTrans = scon.BeginTransaction();
    try
    {
        string strforxml = HDD.Value;
        XmlDocument docXml = new XmlDocument();

        #region Read In To Sender Controlls

        #region Common Information
        Contact con = new Contact();
        con.Title = ddlTitle.SelectedItem.Text;
        con.FirstName = TextBox1.Text.Trim();
        con.LastName = TextBox9.Text.Trim();
        con.ConTactNo = txtCell.Text == "" ? SqlString.Null : txtCell.Text;
        con.Country = ddlCountry.SelectedItem.Text;
        con.CustomerType = ddlCustomerType.SelectedItem.Text;
        con.CustTypeID = int.Parse(ddlCustomerType.SelectedValue);
        con.CountryID = Int32.Parse(ddlCountry.SelectedValue);
        con.sqlTransaction = sqlTrans;
        if (Scitytxt.Value != "")
        {
            try
            {
                con.City = Scitytxt.Value;
                con.CityID = Int32.Parse(Scityval.Value);
            }
            catch (Exception)
            { }
        }
        else
        {
            con.City = SqlString.Null;// Scitytxt.Value;
            con.CityID = SqlInt32.Null;// Int32.Parse(Scityval.Value);
            con.Address = "";
        }
        //con.City = ddlCity.SelectedItem.Text;
        //con.CityID = int.Parse(ddlCity.SelectedValue);
        con.Address = TextBox10.Text;
        #endregion

        #region Check For NIC and Passport

        if (txtNIC.Text != "" || txtPassport.Text != "")
        {
            SqlDataReader rdrsender;

            if (txtNIC.Text != "")
            {
                con.NIC = txtNIC.Text;
            }
            else
            {
                con.NIC = SqlString.Null;
            }
            if (txtPassport.Text != "")
            {
                con.Passport = txtPassport.Text;
            }
            else
            {
                con.Passport = SqlString.Null;
            }
            ProcessSearchContactInContactInfo srchSender = new ProcessSearchContactInContactInfo();
            srchSender.Contact = con;
            srchSender.Invokewith5parameters();
            rdrsender = srchSender.ResultSet;

            #region If record Doesnot Exist In response of NIC Passport
            if (!rdrsender.Read())
            {
                rdrsender.Close();
                rdrsender.Dispose();
                //  con.sqlTransaction = sqlTrans;
                ProcessAddContact InsertnewSenderInfo = new ProcessAddContact();
                // InsertnewSenderInfo.sqlTransaction = sqlTrans;
                InsertnewSenderInfo.Contact = con;
                InsertnewSenderInfo.Invoke();

                //  sender1 = InsertnewSenderInfo.ResultSet;
                //  Sender_ID.Value = sender1[13].ToString();
            }
            #endregion
            #region If Record Exists
            else
            {
                con.CustomerID = Int32.Parse(rdrsender["Customer_ID"].ToString());
                rdrsender.Close();
                rdrsender.Dispose();
            }
            #endregion
        }
        #endregion

        #region If Customer Donot Have NIC And/OR Passport
        else// this executes when both Pasport and NIC are Null
        {
            con.NIC = SqlString.Null;
            con.Passport = SqlString.Null;
            ProcessAddContact InsertnewSenderInfo = new ProcessAddContact();
            InsertnewSenderInfo.Contact = con;
            InsertnewSenderInfo.Invoke();

            DataSet ds = new DataSet();
            int a = con.CustomerID;
            StringReader inforeader = new StringReader("<CusTable><CusInfo><Relation_Type></Relation_Type><HusbandFather_Name></HusbandFather_Name><Address_Present></Address_Present><Address_Other></Address_Other><Phone_No_Office></Phone_No_Office><Cell_No></Cell_No><Fax_No></Fax_No><Date_Of_Birth></Date_Of_Birth><NTN_No></NTN_No><Nationality></Nationality><Occupation></Occupation><Relation_With_Financial_Institution></Relation_With_Financial_Institution><Other_Relation_With_Financial_Institution></Other_Relation_With_Financial_Institution><Business_Relation></Business_Relation></CusInfo></CusTable>");
            ds.ReadXml(inforeader);
            ds.GetXml();
            SqlCommand cmd = new SqlCommand("update Contact_Info set CustInfo=" + ds.GetXml() + " WHERE Customer_ID=" + a + "", scon);
            cmd.ExecuteNonQuery();

            //  sender1 = InsertnewSenderInfo.ResultSet;
            //  Sender_ID.Value = sender1[13].ToString();
        } 
```

告诉我我的代码有什么问题以及如何解决它。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-05-18T08:10:30.297

您需要更改此行

```
SqlCommand cmd = new SqlCommand("update Contact_Info set CustInfo=" + ds.GetXml() + 
                                " WHERE Customer_ID=" + a + "", scon); 
```

这样

```
SqlCommand cmd = new SqlCommand("update Contact_Info set CustInfo=" + ds.GetXml() + 
                  " WHERE Customer_ID=" + a + "", scon, sqlTrans); 
```

错误消息准确地说明了问题。在代码到达该行之前，您已经打开了一个事务，并且它在错误点仍然处于打开状态

```
.....
scon.Open();       
SqlTransaction sqlTrans = scon.BeginTransaction();
..... 
```

现在，当连接有一个打开的事务时执行的每个 SqlCommand 都需要被告知这一点。框架不会自动设置事务。

如上所述，您可以使用 SqlCommand 构造函数，也可以`cmd.Transaction`在执行命令之前设置属性。

## 警告 1

即使您直接从连接本身创建 SqlCommand，也需要为当前命令设置事务。

```
 SqlCommand cmd = scon.CreateCommand();
   cmd.Transaction = sqlTrans; // Required when inside a transaction 
```

## 警告 2

**在使用查询文本更新/插入/删除/选择数据库时，不惜一切代价避免**使用字符串连接。**使用参数。**这将消除奇怪或无效字符的问题，最重要的是，将防止[SqlInjection 攻击](http://en.wikipedia.org/wiki/SQL_injection)

```
string sqlText = "update Contact_Info set CustInfo=@info WHERE Customer_ID=@id";
SqlCommand cmd = new SqlCommand(sqlText, scon, sqlTrans);  
cmd.Parameters.AddWithValue("@info", ds.GetXml());
cmd.Parameters.AddWithValue("@id",a);
cmd.ExecuteNonQuery(); 
```

另外，另一个建议是不要使用 AddWithValue，虽然很方便，但这种方法有很多问题，正如[我在此处的回答中所解释的那样](https://stackoverflow.com/questions/13276602/c-sharp-using-parameters-addwithvalue-in-sqldataadapter/13276651#13276651)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-18T07:52:50.407

您已经启动了一个在您调用之前未提交的事务`cmd.ExecuteNonQuery()`。

`cmd.Transaction = sqlTrans;`就在之前写下`cmd.ExecuteNonQuery();`

它将确保 Now`ExecuteNonQuery()`将在同一个事务中执行，并且还将能够看到在同一个事务中对数据库所做的所有修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-12T01:13:26.560

如果您有此代码：

```
SqlTransaction sqlTrans = scon.BeginTransaction(); 
```

那么你也应该有这个：

```
cmd.Transaction = sqlTrans; 
```

他们一起工作。

# java - 如何在java中将字符串转换为文件对象？

> ID：10648720
> 
> 赞同：3
> 
> 时间：2012-05-18T07:47:34.813
> 
> 标签：java, groovy

我在一个java字符串变量中有文件内容，我想将它转换成一个`File`对象，这可能吗？

```
public void setCfgfile(File cfgfile)
{
    this.cfgfile = cfgfile
}

public void setCfgfile(String cfgfile)
{
    println "ok overloaded function"
    this.cfgfile = new File(getStreamFromString(cfgfile))
}
private def getStreamFromString(String str)
{
    // convert String into InputStream
    InputStream is = new ByteArrayInputStream(str.getBytes())
    is
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T08:08:58.253

由于这是 Groovy，您可以通过以下方式简化其他两个答案：

```
File writeToFile( String filename, String content ) {
  new File( filename ).with { f ->
    f.withWriter( 'UTF-8' ) { w ->
      w.write( content )
    }
    f
  }
} 
```

这将返回一个文件句柄到它刚刚写入的`content`文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:16:35.310

尝试使用[apache commons io](http://commons.apache.org/io) lib

```
org.apache.commons.io.FileUtils.writeStringToFile(File file, String data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:57:32.730

您始终可以使用构造函数`File`从 a 创建对象。注意 File 对象只代表一个抽象的路径名；不是磁盘上的文件。`String``File(String)`

如果您尝试在磁盘上创建包含字符串保存的文本的实际文件，则可以使用几个类，例如：

```
try {
    Writer f = new FileWriter(nameOfFile);
    f.write(stringToWrite);
    f.close();
} catch (IOException e) {
    // unable to write file, maybe the disk is full?
    // you should log the exception but printStackTrace is better than nothing
    e.printStackTrace();
} 
```

`FileWriter`将字符串的字符转换为可写入磁盘的字节时，将使用平台默认编码。如果这是一个问题，您可以通过`FileOutputStream`将`OutputStreamWriter`. 例如：

```
String encoding = "UTF-8";
Writer f = new OutputStreamWriter(new FileOutputStream(nameOfFile), encoding); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T07:58:39.383

要将 a 写入`String`文件，通常应该使用[BufferedWriter](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html)：

```
private writeToFile(String content) {
    BufferedWriter bw;
    try {
        bw = new BufferedWriter(new FileWriter(this.cfgfile));
        bw.write(content);
     }
    catch(IOException e) {
       // Handle the exception
    }
    finally {   
        if(bw != null) {
            bw.close();
        }
    }
} 
```

此外，它`new File(filename)`只是简单地用名称实例化一个新`File`对象`filename`（它实际上并不在您的磁盘上创建文件）。因此，您声明：

```
this.cfgfile = new File(getStreamFromString(cfgfile)) 
```

将使用方法返回`File`的名称简单地实例化一个新的。`String``this.cfgfile = new File(getStreamFromString`

# google-chrome - chrome 无法设置 -webkit-animation-name

> ID：10648726
> 
> 赞同：1
> 
> 时间：2012-05-18T07:47:50.260
> 
> 标签：google-chrome, css

我的 chrome 自动更新到 V19.0.1084.46 m；我遇到了一个可怕的问题！

```
1.zetop('#id').css({'-webkit-animation-name':'pop'}); does not working!
2.el.style['-webkit-animation-name'] = 'pop';not working!
3.el.style.cssText +='-webkit-animation-name:pop'; not working! 
```

我打开开发者工具，我看到'-webkit-animation-name' 变成了'-webkit-animation'！

唯一的办法是：

```
.pop{
-webkit-animation-name: pop;
}
el.classList.add('pop'); 
```

新 chrome 有什么问题？这是 CSS3 的某种新标准还是什么？？显然，使用新方法，如果我想更改动画名称，我必须删除旧样式类，但如果我不知道保存动画名称的样式类的名称？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:25:17.717

终于！我把它拿下来了！只需在动画结束时删除该属性。

```
el.style.removeProperty('-webkit-animation-name'); 
```

# python - Mongo: avoid duplicate files in gridfs

> ID：10648729
> 
> 赞同：5
> 
> 时间：2012-05-18T07:48:00.893
> 
> 标签：python, mongodb, gridfs

There is a way to avoid duplicate files in mongo gridfs? Or I have to do that via application code (I am using pymongo)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:43:15.440

MD5 和已经是 Mongo 的 gridfs 元数据的一部分，因此您可以简单地在该列上设置唯一索引，服务器将拒绝存储该文件。无需在客户端进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:50:19.017

您可以在保存文件之前使用 md5 哈希并将新哈希与存在进行比较。

# javascript - 访问 Jquery 对象 [] 并得到错误

> ID：10648732
> 
> 赞同：1
> 
> 时间：2012-05-18T07:48:16.633
> 
> 标签：javascript, jquery

我是 Jquery 的新手，我无法访问 Jquery 对象中的元素。

```
var iconNumber=$('#tblFeedControlBar').find('td').length;    // 8 
var iconNumber=$('#tblFeedControlBar').find('td')[0].width(); // error
$('#tblFeedControlBar').find('td').get(0).after(iconArrow);  // error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:50:51.253

当您索引到一个 jQuery 对象时，您会在该位置获得*原始*DOM 元素，而不是它的 jQuery 包装器。`get`函数也是如此。（事实上​​，除非你使用负索引，否则`get`真的只是转身`[]`为你做；使用负索引它会做更多的工作。）

如果你想要第一个元素的*宽度*（我假设`with`是`width`），默认情况下，如果你在集合上调用它，你会得到：

```
var iconNumber=$('#tblFeedControlBar').find('td').width(); 
```

尽管该集合中可能有多个元素，但通常 jQuery 的“get”操作作用于集合中的*第一个*元素。（API 是不对称的；“set”操作作用于整个集合。）

如果你想要*第二个*元素的宽度：

```
var iconNumber=$($('#tblFeedControlBar').find('td')[1]).width(); 
```

或者使步骤更清晰：

```
var rawSecondElement = $('#tblFeedControlBar').find('td')[1];
var wrapperForIt = $(rawSecondElement);
var getItsWidth: wrapperForIt.width(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:49:56.823

对 DOM 元素的引用不应该有`with()`方法，这应该会导致...

> `undefined`不是函数。

...错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:50:45.487

```
var iconNumber=$('#tblFeedControlBar').find('td')[0].with(); 
```

jQuery中没有`with()`方法，也许你的意思是`width()`

```
$('#tblFeedControlBar').find('td').get(0).after(iconArrow); 
```

在`.get(0)`你得到 dom 节点（不是 jQuery 对象）之后，你不能链接另一个 jQuery ( `after()`) 方法

# asp.net - Ajax Control Toolkit HtmlEditorExtender: Xss Attacks

> ID：10648733
> 
> 赞同：2
> 
> 时间：2012-05-18T07:48:23.397
> 
> 标签：asp.net, ajaxcontroltoolkit, xss

I'm using Ajax Control Toolkit in my ASP.NET project and I have a problem with *HtmlEditorExtender* which name is **ContentHtmlEditor**. *HtmlEditorExtender* attached to *TextBox* which name is **ContentBox**.

I tried to make an XSS Atack. I edited html code with Chrome and inserted the following string:

```
<a href='javascript:alert()'>bla-bla-bla</a> 
```

After post back **ContentBox.Text** equals to **<a href="javascript:alert()">bla-bla-bla</a>**.

As you can see **javascript:alert()** hasn't been removed but as I know Ajax Control Toolkit HtmlEditorExtender is using AntiXss Sanitizer.

When I call

```
ContentHtmlEditor.SanitizerProvider.GetSafeHtmlFragment("<a href='javascript:alert()'>bla-bla-bla</a>") 
```

it returns:

```
<a>bla-bla-bla</a> 
```

But there is a problem when I call

```
ContentHtmlEditor.SanitizerProvider.GetSafeHtmlFragment("<a href='http://somesite.com'>bla-bla-bla</a>") 
```

because then it returns the same string:

```
<a>bla-bla-bla</a> 
```

but I need to know the reference if the link.

What is the problem? And how can I prevent Xss Attacks on my site?

# javascript - retrieving latest post from Tumblr via jquery

> ID：10648741
> 
> 赞同：3
> 
> 时间：2012-05-18T07:49:10.460
> 
> 标签：javascript, jquery, tumblr

I'm trying to integrate a Tumblr blog into a website. Specifically I want to display the latest text post.

I have taken a look of Tumblr API and everything looks quite easy but I cannot make it work.

According to the documentation for Tumblr API v2 ([http://www.tumblr.com/docs/en/api/v2](http://www.tumblr.com/docs/en/api/v2)) this is the call I need:

[http://api.tumblr.com/v2/blog/blog.tumblr.com/posts/text?api_key=KEY&limit=1](http://api.tumblr.com/v2/blog/blog.tumblr.com/posts/text?api_key=KEY&limit=1) and if I put it in my browser I get what I want.

However if I try to retrieve the post'title to it using jquery 1.7.1 as specified below

```
$.getJSON('http://api.tumblr.com/v2/blog/blog.tumblr.com/posts/text?api_key=<KEY>&limit=1', function(data) {
  console.log("data.posts[0].title");
}); 
```

I get an empty response.

Am I missing something?

Thanks for your help.

SIG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:16:16.763

从[Same-Origin-Policy](http://www.w3.org/Security/wiki/Same_Origin_Policy)开始，您必须使用[JSONP](http://en.wikipedia.org/wiki/JSONP)

如何做到这一点，您可以在*响应格式*部分的[文档](http://www.tumblr.com/docs/en/api/v2)中阅读。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T03:12:22.420

Andreas 给出的解决方案对我有用。我将带有 $.ajax 的代码和数据类型更改为 JSONP。现在我可以从 tumblr 获取数据。

```
$.ajax({
    type: "GET",
    url: "http://api.tumblr.com/v2/blog/blog.tumblr.com/posts/text?api_key=<KEY>&limit=1",               
    dataType: "JSONP",
    success: SuccessCallbackFunction,
    error: ErrorCallbackFunction,
}); 
```*

# php - how can i use preg_match and get value?

> ID：10648743
> 
> 赞同：0
> 
> 时间：2012-05-18T07:49:13.903
> 
> 标签：php

i am using this code and its getting No ending delimiter '/' found

```
if (preg_match("/", $desp))
{
    $dp = explode("/",$desp);

    $dp1 = $dp[0];
    $dp2 = $dp[1];
} 
```

in `$desp` i have value like `abc/xyz` then it should be like

```
$dp1 = abc
$dp2 = xyz 
```

so what is the right code thnx.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:52:41.307

您应该改用 strpos 。无论如何，您收到该错误的原因是该模式没有分隔符。

带分隔符的模式示例：

```
if (preg_match("~/~", $desp)) 
```

但是，您应该做什么：

```
if (strpos($desp, '/') !== false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:52:25.007

那样做

```
$str = "abc/xyz";
$pattern = '/\//';
if(preg_match($pattern, $str))
    echo "foo"; 
```

你必须用反斜杠转义你的斜杠才能让它工作

# android - Custom Dropdown List for Spinner

> ID：10648750
> 
> 赞同：0
> 
> 时间：2012-05-18T07:49:45.620
> 
> 标签：android, android-layout

![enter image description here](../Images/e623b211ddb87e3d29d7c6fa25e4b646.png)

In the picture above (tablet landscape mode), any way I can minimize the Dropdown width of a Spinner? Or create a Custom Dropdown perhaps? Thanks.

Edit: I'm just using this android's own layout. spinner.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);

XML Added:

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="horizontal"
        android:layout_margin="5dp"
        android:weightSum="3">
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Font Size"
            android:textSize="15sp"
            />
        <Spinner
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:09:24.957

我认为问题是，您的线性布局的宽度设置为填充父级。尝试替换它以包装内容。它可能会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:46:32.643

将此代码用于自定义微调器样式..

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
     <TextView
         android:id="@+id/spinnerTarget"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:textSize="8pt"        
         android:textColor="#000000"         
         android:gravity="center"/>
     <TextView
         android:layout_marginLeft="5dip"
         android:id="@+id/subText"              
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"/>
</LinearLayout> 
```

这对于您的主要布局中的微调器...

```
 <Spinner
             android:id="@+id/spinner1"
             android:layout_width="250dp"
             android:layout_height="40dp"
             android:layout_marginLeft="15dp"
             android:layout_marginRight="15dp" 
             android:prompt="@string/prompt"/> 
```

# php - CodeIgniter：无法加载请求的文件：

> ID：10648752
> 
> 赞同：10
> 
> 时间：2012-05-18T07:49:49.543
> 
> 标签：php, codeigniter, web-hosting

嗨，我只是 codeigniter 的新手。我的网站在本地工作，但是当我上传它时，我收到了这个错误：

遇到错误无法加载请求的文件：home\home_view.php

这是我的控制器：

```
<?php
class home extends CI_Controller{

function index(){

  $data=array();
  if($query=$this->home_model->get_dynamic_main_menu())
  {
  $data[‘main_menu’] = $query;
  }

  $this->load->view(‘home\home_view’,$data);
}

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-18T08:03:50.613

尝试

```
$this->load->view('home/home_view',$data); 
```

（并注意您使用的“'”而不是“'”）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-26T11:57:52.243

文件名区分大小写 - 请检查您的文件名。在视图文件夹中应该是相同的情况

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-10T16:22:32.753

我错了。当您尝试访问不在director 中的文件时。仔细检查视图中的路径

```
 $this->load->view('path'); 
```

视图函数的默认根路径是**application/view**。

我有同样的错误。我试图访问这样的文件

```
 $this->load->view('pages/view/file.php'); 
```

实际上我有类 Pages 和函数。我用一个参数构建了该函数，以调用director **application/view/pages**中的任何文件。我被放错了路。当您尝试访问控制器时，可以使用上述路径**pages/view/files 。**不是为了风景。MVC 给了很多混乱。我有这个问题。我只是解决它。谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-17T11:15:04.153

> “无法加载请求的文件”

也可能是linux下的访问权限导致的，请确保为目录“views/home”设置了正确的读取权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-17T01:01:13.157

我在 PyroCMS 中遇到了这个错误。

您可以改进库代码中的 Loader.php 文件中的错误消息。

打开 Loader.php 文件并找到对`show_error`. 我用以下内容替换了我的：

`show_error(sprintf("Unable to load the requested file: \"%s\" with instance title of \"%s\"", $_ci_file, $_ci_data['_ci_vars']['options']['instance_title']));`

然后我能够看到哪个文件导致了我的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-01T09:00:37.317

> 遇到错误无法加载请求的文件：

有时我们会遇到此错误，因为该目录中不存在请求的文件。

假设我们`home`在`views`目录中有一个文件夹并尝试将`home_view.php`文件加载为：

```
$this->load->view('home/home_view', $data);// $data is array 
```

如果`home_view.php`目录中不存在文件`views/home`，则会引发错误。

> 遇到错误无法加载请求的文件：home\home_view.php

那么如何修复这个错误去`views/home`检查`home_view.php`文件是否存在，如果不存在然后创建它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-21T10:24:02.057

尝试 `$this->load->view('home/home_view',$data);`

而不是这个：

`$this->load->view(‘home\home_view’,$data);`

# perl - 我如何在机械化中模拟这个特定的帖子请求

> ID：10648754
> 
> 赞同：1
> 
> 时间：2012-05-18T07:49:55.233
> 
> 标签：perl

post请求如下。

```
 $bot->add_header(
'Host'=>'www.amazon.com',
'User-Agent'=>'application/json, text/javascript, */*',
'Accept'=>'application/json, text/javascript, */*',
'Accept Language'=>'en-us,en;q=0.5',
'Accept Encoding'=>'gzip, deflate',
'DNT'=>'1',
'Connection'=>'keep-alive',
'Content type'=>'application/x-www-form-urlencoded; charset=UTF-8',
'X-Requested with'=>'XMLHttpRequest',
'Referer'=>'https://www.amazon.com/gp/digital/fiona/manage?ie=UTF8&ref_=gno_yam_myk',
'Content length'=>'44',
'Cookie'=>'how do i put the cookie value');

Post parameters in my request :
sid-how do i get the session id.
new email-mailhost@mail.com 
```

我的登录代码：

```
use WWW::Mechanize;
use HTTP::Cookies;
use HTML::Form;
use WWW::Mechanize::Link;
my $bot = WWW::Mechanize->new();
 $bot->agent_alias( 'Linux Mozilla' );
 # Create a cookie jar for the login credentials
 $bot->cookie_jar(         HTTP::Cookies->new(             file           => "cookies.txt",
                                              autosave       => 1,
                                              ignore_discard => 1,     ) );
 # Connect to the login page
 my $response = $bot->get( 'https://www.amazon.com/gp/css/homepage.html/' );
 # Get the login form. You might need to change the number.
 $bot->form_number(3);
 # Enter the login credentials.
 $bot->field( email => '' );
 $bot->field( password => '' );
 $response = $bot->click();
 #print $response->decoded_content;
 $bot->get( 'https://www.amazon.com/gp/yourstore/home?ie=UTF8&ref_=topnav_ys' );
 print $bot->content();

 $bot->post('https://www.amazon.com/gp/digital/fiona/du/add-whitelist.html/ref=kinw_myk_wl_add', [sid => 'id', email=> 'v2@d.com']); 
```

捕获的数据：

```
Host=www.amazon.com
User-Agent=Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
Accept=application/json, text/javascript, */*
Accept-Language=en-us,en;q=0.5
Accept-Encoding=gzip, deflate
DNT=1
Connection=keep-alive
Content-Type=application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With=XMLHttpRequest
Referer=https://www.amazon.com/gp/digital/fiona/manage?ie=UTF8&ref_=gno_yam_myk
Content-Length=39
Cookie=session-id-time=2082787201l; session-id
Pragma=no-cache
Cache-Control=no-cache
POSTDATA=sid=id&email=v%40d.com 
```

错误信息-

```
Error POSTing https://www.amazon.com/gp/digital/fiona/du/add-whitelist.html/ref=
kinw_myk_wl_add: InternalServerError at logon.pl line 81 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:15:38.767

见[`post`中`WWW::Mechanize`](http://p3rl.org/WWW%3a%3aMechanize#mech-post-)。

```
$bot->post($url, [sid => 'id', email => 'v@d.com']); 
```

# tomcat - 严重：空组件 Catalina:type=JspMonitor,name=jsp,WebModule=//localhost/myproject,J2EEApplication=none,J2EEServer=none

> ID：10648758
> 
> 赞同：2
> 
> 时间：2012-05-18T07:50:11.977
> 
> 标签：tomcat, java, jdk1.6

我有以下问题。我使用**jdk1.6.0_23**用 eclipse 编译我的项目。但在服务器环境中，tomcat 使用**jre1.6.0_31**运行。

可能是什么原因`SEVERE: Null component Catalina:type=JspMonitor,name=jsp,WebModule=//localhost/myproject,J2EEApplication=none,J2EEServer=none`

```
May 18, 2012 3:40:41 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent
INFO: The Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/jre1.6.0_31/lib/amd64/server:/usr/java/jre1.6.0_31/lib/amd64:/usr/java/jre1.6.0_31/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
May 18, 2012 3:40:41 PM org.apache.coyote.http11.Http11BaseProtocol init
INFO: Initializing Coyote HTTP/1.1 on http-8084
May 18, 2012 3:40:41 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 436 ms
May 18, 2012 3:40:41 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
May 18, 2012 3:40:41 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/5.5.27
May 18, 2012 3:40:41 PM org.apache.catalina.core.StandardHost start
INFO: XML validation disabled
May 18, 2012 3:40:41 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/home/vas/servers/twit_tomcat/webapps/snp/WEB-INF/lib/jetty-jsp-api-2.1.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/jsp/JspPage.class
May 18, 2012 3:40:41 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/home/vas/servers/twit_tomcat/webapps/snp/WEB-INF/lib/jsp-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/jsp/JspPage.class
May 18, 2012 3:40:41 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/home/vas/servers/twit_tomcat/webapps/snp/WEB-INF/lib/servlet-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
May 18, 2012 3:40:41 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/home/vas/servers/twit_tomcat/webapps/snp/WEB-INF/lib/servlet.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
May 18, 2012 3:40:43 PM org.apache.commons.modeler.Registry registerComponent
SEVERE: Null component Catalina:type=JspMonitor,name=jsp,WebModule=//localhost/myproject,J2EEApplication=none,J2EEServer=none
May 18, 2012 3:40:43 PM org.apache.coyote.http11.Http11BaseProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8084
May 18, 2012 3:40:43 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8012
May 18, 2012 3:40:43 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/18  config=null
May 18, 2012 3:40:43 PM org.apache.catalina.storeconfig.StoreLoader load
INFO: Find registry server-registry.xml at classpath resource
May 18, 2012 3:40:43 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2116 ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:02:55.870

这可能是 jar 文件冲突的问题。当我从 WEBINF/lib 文件夹中删除 jetty jar 和两个 servlet jar 时，就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T06:40:19.587

更新tomcat实例的服务器jre环境

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-09T18:30:10.923

当我的项目使用 JRE 8 而不是 JDK 8 时，我得到了这个。

# php - 将选择框中的值插入数据库

> ID：10648763
> 
> 赞同：1
> 
> 时间：2012-05-18T07:50:35.417
> 
> 标签：php, html, database

我在[http://www.youngcreatitivy.se上有一个帖子文本网站](http://www.youngcreatitivy.se)

您在[http://www.youngcreativity.se/post.php](http://www.youngcreativity.se/post.php)上看到我有一个 post 方法。在页面底部，我有一个选项来选择您的文本所在的类别。我创建了这段代码，用于将选择框中的值插入我的数据库。这里是：

```
<?php

//insert category to database
if(isset($_POST['qty'])) {
// Fetch and clean the <select> value.
// The (int) makes sure the value is really a integer.
$qty = (int)$_POST['qty'];

// Create the INSERT query.
$sql = "INSERT INTO `table`(`quantity`)
        VALUES ({$qty})";

// Connect to a database and execute the query.
$dbLink = mysql_connect('server', 'username', 'password') or     die(mysql_error());
          mysql_select_db('database_name', $dbLink) or die(mysql_errno());

$result = mysql_query($sql);

// Check the results and print the appropriate message.
if($result) {
    echo "Record successfully inserted!";
}
else {
    echo "Record not inserted! (". mysql_error() .")";
}
}
?> 
```

那是PHP代码。

这是html代码：

```
 Qty: <select name="category">
        <option value="1">Quote</option>
        <option value="1">Poem</option>
        <option value="1">Novel</option>
    </select>
    <br>
    <input type="submit">
    </select> 
```

我了解代码，但我应该如何在 phpMyAdmin 中创建数据库？如果我在选择类别后单击提交并输入我的文本，它会发布文本并写下我在数据库中选择的类别，我怎样才能做到这一点？请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:51:43.307

我猜你的第一语言不是英语——“数量”是“数量”的常见缩写，所以你重复使用的代码更多的是关于数字。

您需要将原件更改为`<select>`-

```
<select name="category">
    <option value="Quote">Quote</option>
    <option value="Poem">Poem</option>
    <option value="Novel">Novel</option>
</select> 
```

正如您的代码一样，选择只会返回 1。

此外，您需要在将返回的值存储到数据库之前对其进行转义。`mysql_real_escape_string`在这种情况下是你的朋友 - [http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php) - 否则你可以接受sql注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:57:25.147

如果您在本地主机中。然后你必须去

```
http://localhost/phpmyadmin 
```

在那里，您可以轻松找到创建数据库和表的方法。但是如果你有控制面板，你会在服务器中看到带有徽标的 phpmyadmin。在那里你点击你的 phpmyadmin 将被打开。与 localhost 相同。希望这对您有所帮助。拉姆赛

# facebook - 无需服务器 web 异步加载 SDK

> ID：10648764
> 
> 赞同：0
> 
> 时间：2012-05-18T07:50:37.723
> 
> 标签：facebook

我需要知道是否可以在没有服务器网络的情况下加载 javascript SDK：

```
(function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); 
     js.id = id; 
     js.async = true;
     js.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
     ref.parentNode.insertBefore(js, ref);
     console.log("1");
   }(document)); 
```

我的问题是 js.src = document.location.protocol + '//connect.facebook.net/en_US/all.js'; 无法正确加载，因为调用了 url：

```
GET file://connect.facebook.net/en_US/all.js 
```

并且未找到响应。如果有人知道我可以做些什么来异步加载没有服务器网络的 Facebook javascript SDK，我将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:05:34.140

复制/保存 app 目录中的 all.js 文件并更改行：

```
js.src = document.location.protocol + '//connect.facebook.net/en_US/all.js'; 
```

至

```
js.src = 'your_app/js/all.js'; 
```

但请记住，这不是用于生产目的的好方法，因为您将无法关注 Facebook 的任何更新。

# binary - 将整个 ELF 二进制文件转储到可读的标题和节中

> ID：10648765
> 
> 赞同：3
> 
> 时间：2012-05-18T07:50:44.863
> 
> 标签：binary, analysis, dump, elf

是否可以将 ELF-ARM 文件的整个二进制结构转储为可读格式。想法是分析每个部分并将其保存回二进制文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T21:02:35.270

有几种工具可以检查 elf 文件的内部结构，最常见的是 readelf、objdump 和 elfsh（来自 ERESI 框架）。这取决于您对二进制文件的哪个部分感兴趣，但是，例如，您可以使用以下命令转储节头表：

```
arm-elf-objdump -h elffile 
```

如果要将 elf 文件中的某个部分复制到原始二进制文件中，请使用 objcopy：

```
arm-elf-objcopy -j .data -O binary elffile binfile 
```

# javascript - 如何检查触发事件的元素？

> ID：10648768
> 
> 赞同：1
> 
> 时间：2012-05-18T07:50:47.430
> 
> 标签：javascript, html

```
addLBEvent : function()
    {
        var amount = this.imageList.length;
        for(var i = 0;i < amount;i++)
        {
            if(this.imageList[i].addEventListener)
            {
                this.imageList[i].addEventListener("click",this.startLB,false);
            }
            /* 
                IE<9-part
            */
        }
    },

startLB : function(src)
    {

    } 
```

我想知道哪个元素触发了该事件。如果我在 HTML 代码中这样做，我会写一些类似`onlick="startLB(this.src)"`的东西。我怎么能做这样的事情`addEventListener`呢？我已经尝试过 `addEventListener("click","myobjectname.startLB(this.src)" 但它没有用。

对不起我的英语不好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:53:27.300

事件`object`作为第一个参数传入任何事件处理程序。

事件对象作为`target`标识事件应用到的元素的属性。

```
addLBEvent : function(event) {
    console.log(event.target);
} 
```

[https://developer.mozilla.org/en/DOM/event.target](https://developer.mozilla.org/en/DOM/event.target)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:53:15.637

您可以访问对触发事件的元素的引用...

```
var elementThatTriggeredEvent = e.target || e.srcElement; 
```

...假设这`e`是对事件的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:56:35.697

如果您想知道*单击*了哪个元素，请使用`event.target`.

如果您想知道处理程序在哪个元素上，请使用`event.currentTarget`或在大多数情况下使用`this`. `addEventListener`将调用您的处理程序，并将其`this`设置为您调用的元素`addEventListener`。

注意区别。例如，如果你有这个标记：

```
<div id="foo"><span id="bar">Hi there</span></div> 
```

...和这段代码：

```
document.getElementById("foo").addEventListener('click', function(event) {
    alert(this.id);
    alert(event.target.id)
}, false); 
```

...然后如果用户单击文本“您好”，`this`将是`div`但`event.target`将是`span`.

[实例](http://jsbin.com/acuwuj)| [来源](http://jsbin.com/acuwuj/edit)

看看`this`你钩住事件`event.target`的元素是如何触发的（然后它会冒泡到`div`）。

* * *

请注意，`addEventListener`旧版本的 IE 上不可用；你必须`attachEvent`改用。`attachEvent` *不能*确保将`this`其设置为您挂钩它的元素，因此请注意 API 之间的差异。为了使这样的事情顺利进行，您可能会寻找任何体面的库，如[jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[其他几个](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)库中的任何一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T07:58:18.020

我认为最好像这样绑定它：

```
var that = this;
this.imageList[i].addEventListener("click",function() {
    that.startLB(this.src);
},false); 
```

`this`将成为事件目标，因此我们必须以某种方式访问​​该对象，我将其命名为`that`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T08:00:05.317

用这个：

```
startLB : function(src)
    {
       var element = src.target.tagName;
       alert("element >> "+element);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T08:01:06.187

试试这个...

```
addLBEvent : function(e)
{
    if (!e) e = event;
    e = e.srcElement || e.target;
    .......
} 
```

# delphi - 加载表单时出错

> ID：10648772
> 
> 赞同：3
> 
> 时间：2012-05-18T07:50:53.187
> 
> 标签：delphi, delphi-7

我是一名 .Net 程序员，我目前正在调试一个 Delphi 应用程序，在进行过程中我遇到了以下错误：

![错误信息](../Images/710ae273ff76fd81812cd698f3bf7940.png)

你能向我解释一下这个错误是什么，我该如何解决？

我是使用 Delphi 的新手。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T09:45:19.747

**错误说明**

呈现给您的错误是告诉您该表单上的组件未在 IDE 中注册，在本例中是来自 AlphaControls 库的 TsStatusBar：[http ://www.alphaskins.com/](http://www.alphaskins.com/)

表单将在某个时候保存，并在表单上放置 TsStatusBar。当任何组件添加到表单上时，它们会在表单源文件 (*.pas) 和表单 dfm 中留下对该组件的引用。这就是您收到此错误的原因，因为找不到该组件，但链接到它的引用仍然存在。

**选项 1 - 安装 AlphaControls 软件包**

最好的选择是安装缺少的组件，这将解决您的错误问题，如您的问题所示。

**选项 2 - 转换项目**

AlphaControls 提供了一个将项目从标准 VCL 转换为 AlphaControls 的工具，反之亦然，这可能是一个比安装 AlphaControls 包或手动编辑源文件更简单的选择，转换工具是免费的。如果出现任何问题，请记住在转换之前进行备份。

**选项 3 - 手动编辑源文件**

您可以自己手动删除这些引用。但是请注意，如果您删除引用，那么 Delphi 将不再知道 TsStatusBar 曾经存在过，并且毫无疑问会有代码与该组件交互，这将产生编译器错误。

作为删除引用的替代方法，您可以将它们从 重命名`TsStatusBar`为`TStatusBar`，这是 VCL 中的标准状态栏。在最坏的情况下，可能会出现一些需要纠正的小语法错误。如果您确实决定编辑表单源文件和 dfm 文件，那么我建议您在将表单加载到 IDE 之前执行此操作。

**选项 4 - GExperts**

您还可以安装 IDE Expert，例如 GExperts，它可以自动执行重命名/转换组件引用的过程。

但是，我建议不要在这种情况下删除或重命名引用，因为该项目似乎依赖于 AlphaControls 包。

**概括**

我可以看到使用了 AlphaControls 包中的更多组件，因此手动修复 TsStatusBar 错误只会解决部分问题。

如果项目必须保持其当前状态，那么安装 AlphaControls 包是要走的路，如果你能够编辑它，那么我还建议项目转换选项，这样你甚至不需要 AlphaControls 包。

如果你确实选择了安装包，重要的是要意识到一旦你安装了包，Delphi 就知道源文件在哪里可以编译。安装软件包后，从 IDE 转到 Menu > Tools > Options，然后您需要转到 Library 并将 AlphaControls 源的文件夹添加到库路径。源文件夹将是包含最多 .pas 文件的文件夹，但如果您不确定，可以添加所有文件夹。如果您不添加到库路径，那么 Delphi 在使用新组件时将无法编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:54:09.797

您的 IDE 没有安装包含 TsStatusBar 的包。找到那个包，构建它，然后安装它。

设计时组件需要将其代码集成到 IDE 中。这是使用所谓的包来完成的。包项目的扩展名为 .dpk。你应该在你的版本控制系统中找到这个包项目。在 Delphi 中加载 .dpk 文件，从包管理器中单击 Build，最后在构建后单击 Install。现在 IDE 已经知道包含您的组件的包，您的表单将被加载。在您的组织中维护此代码的任何人都将能够帮助处理所有细节。

# ruby-on-rails - 使用 rspec 测试链接？

> ID：10648773
> 
> 赞同：15
> 
> 时间：2012-05-18T07:51:03.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

如果我`<%= link_to "Help", help_path %>`在视图文件中有类似的内容，如何使用 rspec 测试以下内容？

1.  它去`help_path`。
2.  内容为“帮助”。

我目前正在使用水豚。

* * *

编辑

虽然下面的答案可以工作，但我想我找到了一种更简单的方法。

```
describe "some link on whatever page" do
  subject { page }
  before { visit whatever_path }
  it { should have_link('Help', href: help_path) }
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T08:04:27.877

如果您使用的是水豚，那么

```
my_link = find(:css, "a:contains('Help')")
my_link.click

and get page status, should be 200 or simply check

my_link.href 
```

但您也可以简单地将路由规范添加到 rspec 中的集成规范中。像这样总是确保这条路线存在

```
describe HelpController do

  it "should have proper routes" do
    {:get => "/halp/772/parser/18/edit" }.should be_routable
    {:post => "/halp/772/parser" }.should be_routable
    {:delete => "/halp/772/parser/18" }.should be_routable          
  end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:01:24.203

您的文件可能如下所示：

```
require 'spec_helper'

feature "Help" do
  scenario "creation" do
    visit help_path                         # access your help path
    page.should have_content("Help")        # verify content
  end
end 
```

如果你需要一些关于 Capybara 测试的帮助，你可以在这里找到一些帮助： [Railscasts #257 Request Specs and Capybara](http://railscasts.com/episodes/257-request-specs-and-capybara) or [Capybara repo at Github](https://github.com/jnicklas/capybara)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T08:03:36.980

使用`have_tag`匹配器。[这](http://cheat.errtheblog.com/s/have_tag/)是一个备忘单。

```
response.should have_tag("a[href$=#{help_path}]", :text => "Help") 
```

PS你读过[rails guides](http://guides.rubyonrails.org/testing.html#testing-views)吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T17:50:14.353

`click_link "Help"`

水豚备忘单要点：[https ://gist.github.com/zhengjia/428105](https://gist.github.com/zhengjia/428105)

# ruby-on-rails - 如何在 Heroku 上使用 postgres 扩展？以及如何处理他们的迁移？

> ID：10648774
> 
> 赞同：6
> 
> 时间：2012-05-18T07:51:10.363
> 
> 标签：ruby-on-rails, heroku, pg-search

我有一个包含 pg_search 和 queue_classic gem 的 Rails 应用程序。这两个都使用 PostgreSQL 扩展，例如 unaccent、pg_trgm 和 ps-something-something（对不起，不是我的开发机器，不记得了）。

我正在部署到 Heroku，但无法运行执行这些扩展的迁移

例如，

```
def up
  execute "create extension unaccent"
  execute "create extension pg_trgm"
end 
```

我从这里得到的印象是 Heroku 支持这些[https://devcenter.heroku.com/articles/full-text-search以及 Heroku 使用 queue_classic](https://devcenter.heroku.com/articles/full-text-search) [https://github.com/ryandotsmith/queue_classic](https://github.com/ryandotsmith/queue_classic)的事实。

我一直找不到任何信息来解释如何在 Heroku 上使用这些 postgres 扩展。或者即使它们可用于共享数据库或仅专用。

所以我的问题：

1.  如何在 Heroku 上为我的应用提供这些扩展？
2.  我如何处理迁移，以便这些扩展可用于开发和测试环境，但如果 Heroku 限制此类执行，请不要破坏暂存或生产或环境的迁移。

非常感谢任何想法，尤其是那些附有相关信息/说明的想法。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:37:13.173

如果您使用的是旧的标准共享数据库计划，那么这些计划可能不起作用，因此您需要考虑升级到[新的共享计划](https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/)或[生产计划](https://addons.heroku.com/heroku-postgresql)。

# winforms - winforms C# Visual Studio 中的拆分容器面板问题

> ID：10648778
> 
> 赞同：1
> 
> 时间：2012-05-18T07:51:39.953
> 
> 标签：winforms, visual-studio-2010, c#-4.0

我得到了 Panel 1 并在 Windows 窗体中`Panel 2`使用。`splitContainer`我想保持原来的大小`Panel 1`。`Panel 2`当我在界面中最大化表单时，我只想最大化原始起点的大小。

我试图更改`splitContainer`属性中的设置，`dock`但我无法成功....

我怎样才能最大化`Panel 2`单独？？？？

![原来的](../Images/3de5fe03725596a80c3c5672ac0b27b3.png)

![我希望 panel2 是这样的](../Images/7e67ab8e134db36dadc737b087b330c4.png)

当我检查此链接时，我的问题没有解决方案。[http://support.microsoft.com/kb/953934](http://support.microsoft.com/kb/953934)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:03:46.510

将**SplitContainer.FixedPanel**属性设置为要保持固定的任何面板，或使用简单的面板并将它们正确锚定到您的需要。

![使用面板的示例](../Images/7ed843aea2414955654b3263b3d7187b.png)

# facebook - Facebook 连接到 Facebook iframe

> ID：10648780
> 
> 赞同：0
> 
> 时间：2012-05-18T07:52:08.220
> 
> 标签：facebook, iframe, connect

我实际上试图找到解决方案，但什么也没有，我希望我能在这里找到解决方案！

我在我的网站中使用 facebook connect，当我登录 facebook 时一切正常，我通过 facebook connect 自动登录到我的网站，反之亦然。

现在我试图使它成为一个 facebook 应用程序，但我遇到了以下问题：我尝试在 facebook iframe 中运行，但不幸的是我没有自动登录。有时它可以工作，有时什么也没发生，有时我会收到这条消息：（**可以没有获得 Facebook 会话。您的服务器可能无法安全地 Facebook 连接到用户以检索信息。）**

我正在使用一些代码：

```
include 'includes/facebook.php';

$facebook = new Facebook(array(
  'appId'  => $setting['facebook_appid'],
  'secret' => $setting['facebook_secret'],
  'cookie' => true, // enable optional cookie support
));

if ($facebook->getUser()) {
$facebook_session = 1;

try {
  $fb_user = $facebook->api('/me');
} catch (FacebookApiException $e) {
  error_log($e);
}

function get_facebook_cookie($app_id, $application_secret) {
  $args = array();
  parse_str(trim($_COOKIE['fbs_' . $app_id], '\\"'), $args);
  ksort($args);
  $payload = '';
  foreach ($args as $key => $value) {
    if ($key != 'sig') {
      $payload .= $key . '=' . $value;
    }
  }
  if (md5($payload . $application_secret) != $args['sig']) {
    return null;
  }
  return $args;
}

$cookie = get_facebook_cookie($setting['facebook_appid'], $setting['facebook_secret']);

$open = @file_get_contents('https://graph.facebook.com/me?access_token='.$cookie['access_token']);

if ($open != FALSE) {
    $fbdata = json_decode($open);
    $fb_user = array();

    foreach($fbdata as $key => $fbdata2) {
        $fb_user[$key] = $fbdata2;
    }
}

}
else {
    $facebook_session = 0;
} 
```

ps：我当然使用的是安全画布 URL

请帮忙 ！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:25:38.900

首先，您使用的是 Firefox、Chrome 还是 Internet Explorer？我在 IE 中使用 FB-connect 时遇到了一些问题。要解决它，您需要添加以下内容：

```
header('P3P: CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

到您的标题，因此 Internet Explorer 可以使用 IFrame 中的会话。

# .net - 如何将 Delphi 空字符串传递给 com 可见的 .net 程序集

> ID：10648783
> 
> 赞同：2
> 
> 时间：2012-05-18T07:52:16.633
> 
> 标签：.net, string, delphi, comvisible

我有一个 C# 程序集，其中包含一个 ComVisible 类，其方法采用 2 个字符串参数。我已经注册了程序集并使用 Delphi XE2 的“导入组件”命令将其导入。

C# 界面如下所示：

```
[ComVisible(true),
 Guid("132D7742-D86A-49E4-81FD-D804E6872475"),
 InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IResourceManager
{        
    int AddResource(string guid, string address);
} 
```

导入的Delphi界面是这样的：

```
IResourceManager= dispinterface
['{132D7742-D86A-49E4-81FD-D804E6872475}']
function AddResource(const Guid: WideString; const address: WideString): Integer; dispid 1610743809;
end; 
```

下面是如何从 Delphi 调用代码的示例：

```
procedure TResourceManager.AddResource(const Guid, Address: String);
var
  ResourceManager: IResourceManager;
begin
  ResourceManager := CoResourceManager.Create;
  ResourceManager.AddResource(Guid, Address);
end; 
```

只要我不将空字符串从我的 Delphi 应用程序传递给方法，一切都会 100% 工作。当我这样做时，我在 .Net 端收到以下错误：

*检测到 InvalidVariant 消息：在从非托管 VARIANT 转换为托管对象期间检测到无效 VARIANT。将无效的 VARIANT 传递给 CLR 可能会导致意外异常、损坏或数据丢失。*

理想情况下，我希望能够使用空字符串 '' 从 Delphi 端调用该方法，并在 .Net 端执行*string.IsNullOrEmpty(guid)*来检查这种情况。到目前为止，我所能做的就是将*#0*传递给方法，而不是从 Delphi 传递 '' 但在 .Net 端，值变为*“\0”*，它既不是 null 也不是空的。

处理这个问题的正确方法是什么？

谢谢。

# php - 来自具有相同名称的文本框的 PHP 请求名称

> ID：10648789
> 
> 赞同：2
> 
> 时间：2012-05-18T07:52:47.457
> 
> 标签：php, html

我有多个同名的文本框，例如：

```
<input type = "text" name = "addCart"/> 
<input type = "text" name = "addCart"/>
<input type = "text" name = "addCart"/>
<input type = "text" name = "addCart"/> 
```

如果我从 php 执行 $_Request 并且我想仅从第一个和第四个文本框输入值，我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:54:35.250

你不能。最后一个输入框的值将覆盖所有其他输入框的值，因为它们具有相同的名称。

你可以考虑做的是使用`name="addCart[]"`

然后， $_REQUEST['addCart'] 将是一个数组。

像：

```
<input type="text" name="addCart[]" value="a">
<input type="text" name="addCart[]" value="b"> 
```

然后 $_REQUEST['addCart'] （或 $_POST 或 $_GET 无论您使用什么）将包含两个字符串 'a' 和 'b' 的数组。

编辑：为了完整起见，我应该注意这个数组是一个普通数组。因此 $_REQUEST['addCart'][x] 其中 x 是某个整数索引，只要 count($_REQUEST['addCart']) > x 就有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:55:21.807

```
<input type = "text" name = "addCart[]"/> 
<input type = "text" name = "addCart[]"/>
<input type = "text" name = "addCart[]"/>
<input type = "text" name = "addCart[]"/> 
```

访问使用：

```
$_REQUEST['addCart'][0]
...
$_REQUEST['addCart'][3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:55:52.980

试试这个，这将发布 addCart 的数组。使用 $_REQUEST，您可以通过 addCart id 访问第一个和第四个 texhbox

```
<input type = "text" name = "addCart[]"/> 
<input type = "text" name = "addCart[]"/>
<input type = "text" name = "addCart[]"/>
<input type = "text" name = "addCart[]"/>

<?php
echo $_REQUEST['addCart'][0];
echo $_REQUEST['addCart'][3];

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T07:59:55.217

如果您想在使用 PHP 时使用该样式的名称，那么您必须绕过`$_POST`or `$_GET`，获取原始数据并自行解析。

对于 GET 请求，则意味着查看`$_SERVER['REQUEST_URI']`和 POST 在`file_get_contents('php://input');`

如果重命名字段以使名称以结尾，`[]`则它们将显示为数组。

IE

```
<input type = "text" name = "addCart[]"/> 
```

将呈现为

```
$_GET['addCart'][] or $_POST['addCart'][] 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-18T07:55:39.330

我不相信这是可能的。尝试使用稍微不同的名称，例如 name1、name2 等

# asp.net - 部署已发布的代码？

> ID：10648791
> 
> 赞同：4
> 
> 时间：2012-05-18T07:52:56.643
> 
> 标签：asp.net, visual-studio, deployment

我使用**Visual Studio 2010**发布了代码，然后将发布的代码部署在生产服务器上。

一切正常。

假设我是否需要对文件后面的代码（.cs 文件）进行一些更改。我是否需要从 Visual Studio 2010 一次又一次地发布代码？或者我可以只需要替换生产服务器上的 bin 文件夹吗？

当前，每次更改代码隐藏文件中的代码并替换生产服务器上的发布代码时，我都会发布代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:00:07.317

您的 bin 目录将包含您编译的代码，因此如果您只更改这些，您只能部署 bin 文件夹。

但是当您更改其他文件时，例如您的 web.config、aspx、css 或 javascript 文件，这些更改不会显示在您的 bin 目录中。需要部署这些物理文件。

由于部署可能是一个乏味且重复的过程，因此最好将其自动化。如果为[WebDeploy](http://www.iis.net/download/webdeploy)设置网络服务器，则可以从 Visual Studio 自动部署到服务器。WebDeploy 将跟踪所有更改并确保已部署它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:55:09.673

如果您只更改 .cs 文件，则可以替换 dll 文件。

当您发布时：

如果您选择替换匹配文件，它只复制更改的文件

它等同于替换上面的 dll，而且它是比手动执行更好的选择。

有时我们可能会更改 css 或 javascripts 但忘记添加它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:50:24.850

如果您尝试修改代码背后的代码，则不必重新发布整个项目，只需覆盖生产文件即可。因为它是aspx页面的部分类，是在运行时编译的。

但最好使用一些工具自动完成。它可以避免人为错误并运行您的测试以确保您的更改不会破坏任何功能。

# c++ - 如何在 Windows 7 的 Program File 目录中创建和保存文件？

> ID：10648798
> 
> 赞同：1
> 
> 时间：2012-05-18T07:53:29.597
> 
> 标签：c++, windows, rights

我有启动时显示注册窗口的程序。当我设置登录名和密码时，程序必须在 Program File/SomeProgram 目录中创建一些文件。我需要此程序的管理员权限。

如果程序未注册，如何以管理员权限运行程序？所以我在创建文件时需要设置管理员权限。我需要一些示例代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T07:58:36.080

您可能会考虑写入 CommonAppData 特殊文件夹，而不是 Program Files。

# jpa - jpa 左加入 eclipse-link

> ID：10648802
> 
> 赞同：0
> 
> 时间：2012-05-18T07:53:54.460
> 
> 标签：jpa, join, eclipselink

我正在使用 eclipse-link 2 并且有 3 个实体：Parent、Child 和 ChildInfo。Parent 对 Child 有 onetomany。Child 与 ChildInfo 有 1to1。

1.  我想在一次调用中获得一个包含所有子对象的父对象“从父对象左侧选择 P 加入获取 P.children 其中 P.id =：id”这只会在 P 至少有 1 个孩子时给出结果（我认为这是一个左外连接）

2.  我还想通过 1 个电话获得所有儿童和财物 childinfos，因为 jpa 不支持导航 p.children.childinfo，有什么方法可以实现吗？使用提示（QueryHints.FETCH，“P.children.info”）不是一个好的选择，因为如果我有超过 1000 个孩子，就会触发超过 1000 个 sql 查询来获取孩子的信息。我也不想给 Child.childinfo eager-fetch 选项，而只是在查询级别。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:04:36.663

第一个查询（一旦修复）肯定应该返回父级及其子级，即使它没有：

```
select p from Parent p left join fetch p.children where p.id = :id 
```

要获取 childInfos，您需要为孩子分配一个别名：

```
select p from Parent p 
left join fetch p.children child
left join fetch child.childInfo
where p.id = :id 
```

我对 EclipseLink 没有具体经验，但这样的查询在 Hibernate 中肯定有效，并且是，AFAIK，有效的 JPQL。所以它应该在 EclipseLink 中工作。

# java - 优化 PIG 中的过滤器功能

> ID：10648806
> 
> 赞同：0
> 
> 时间：2012-05-18T07:54:16.643
> 
> 标签：java, optimization, hadoop, apache-pig, user-defined-functions

我为我的猪脚本编写了一个过滤函数，但我的工作花费了太多时间。在 5 节点集群上，正在处理的数据量为 15 GB。

任何人都可以建议如何优化我的代码：

```
 package org.apache.pig.builtin;
    import java.util.*;
    import java.io.IOException;
    import java.util.Map;
    import org.apache.pig.FilterFunc;
    import org.apache.pig.backend.executionengine.ExecException;
    import org.apache.pig.data.DataBag;
    import org.apache.pig.data.Tuple;
    import org.apache.pig.data.DataType;
    import org.apache.pig.impl.util.WrappedIOException;

   public class filterIP extends FilterFunc {
     ArrayList<String> Ar1=new ArrayList<String>(){
    {
add("151.193.220.28");
....
//Around 2000 IP's to be filtered
add("129.22.63.207");
    }
    };
       public Boolean exec(Tuple input) throws IOException {
           if (input == null || input.size() == 0)
               return true;
           try {
               Object values = input.get(0);
               if (values instanceof DataBag)
                   return ((DataBag)values).size() == 0;
               else if (values instanceof Map)
                   return ((Map)values).size() == 0;
           else if (values instanceof String){

            for(String s:Ar1){
            if(((String)values).matches(".*"+s+".*"))
            return false;
            }
            return true;
            //return !((String)values).matches(".*"+Ar1.get(1)+".*");
            }
               else{
            return false;
                  // throw new IOException("Cannot test a " + DataType.findTypeName(values) + " for required match.");
               }
           } catch (ExecException ee) {
               throw WrappedIOException.wrap("Caught exception processing input row ", ee);
           }
       }
   }* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:41:31.077

使用 HashSet 而不是 ArrayList - 这`for (String s:Ar1)`是您的瓶颈。

您是否尝试通过一组 IP 地址过滤字段？，您可以用 set.contains(values) 替换 match() 调用吗？但是，这仅在您的值仅包含 IP 地址且没有前/后修复字符时才有效 - 但我确信您可以编写一个正则表达式来首先找到 IP 地址字符串，提取它，然后根据哈希检查成员资格放。

# mysql - 计算表中 BLOB 列的总数据大小

> ID：10648809
> 
> 赞同：36
> 
> 时间：2012-05-18T07:54:31.667
> 
> 标签：mysql, blob

我有一个列中有大量 BLOB 数据的表。我正在编写一个实用程序来将数据转储到文件系统。但是在转储之前，我需要检查磁盘上是否有必要的空间来导出整个表中的所有 blob 字段。

请建议一种有效的方法来获取表中所有 blob 字段的大小。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-18T07:58:42.273

您可以使用 MySQL 功能`OCTET_LENGTH(your_column_name)`。有关更多详细信息，请参见[此处](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_octet-length)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-18T07:58:30.343

```
select sum(length(blob_column)) as total_size 
from your_table 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-08T09:53:57.207

```
select sum(length(blob_column_name)) from desired_tablename; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-14T07:56:56.887

可悲的是，这充其量是特定于数据库的。

要获取 Oracle 中带有 blob 的表的总大小，我使用以下命令： [https ://blog.voina.org/?p=374](https://blog.voina.org/?p=374)

遗憾的是，这在 DB2 中不起作用，我仍然需要寻找替代方案。

简单的

```
select sum(length(blob_column)) as total_size 
from your_table 
```

不是正确的查询，因为不会根据对存储在 blob 列中的 blob 的引用正确估计 blob 大小。您必须从 blob 存储库中获取 blob 在磁盘上的实际分配大小。

# ftp - 修改FTP添加会话恢复

> ID：10648815
> 
> 赞同：0
> 
> 时间：2012-05-18T07:54:59.110
> 
> 标签：ftp

我想修改 FTP，以便它在文件传输期间从上次会话中恢复，并且在下次它应该从连接丢失的点开始。

是否有可能做到这一点 ？从哪里开始实现这一目标？它已经在 FTP 中实现了？或我可以参考的任何其他类似协议？如果它已经实现，源代码会很好。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:11:33.310

你可以自己做，

C#： http: [//www.codeguru.com/csharp/csharp/cs_network/sockets/article.php/c7409/AC-FTP-Server.htm](http://www.codeguru.com/csharp/csharp/cs_network/sockets/article.php/c7409/A-C-FTP-Server.htm)

C/C++： http: [//www.codeproject.com/Articles/2558/A-Complete-FTP-Server](http://www.codeproject.com/Articles/2558/A-Complete-FTP-Server)

Python：[http ://twistedmatrix.com/documents/current/core/examples/#auto8](http://twistedmatrix.com/documents/current/core/examples/#auto8)

**编辑**

你有`REST`可以指定从哪里开始的命令

# facebook - Facebook 页面 - 通过 Graph API 更改属性和设置

> ID：10648818
> 
> 赞同：1
> 
> 时间：2012-05-18T07:55:05.760
> 
> 标签：facebook, facebook-graph-api, facebook-page

我可以通过向页面发送 POST 来更改哪些**页面属性？**到目前为止，我只在[facebook 开发者页面上找到了以下内容](http://developers.facebook.com/docs/reference/api/page/)

1.  关于
2.  描述
3.  基本信息
4.  网站
5.  电话

以及设置封面照片和设置页面/设置意味着 4 个权限：USERS_CAN_POST、USERS_CAN_POST_PHOTOS、USERS_CAN_TAG_PHOTOS、WALL_COMBINED_POSTS

还有更多吗？我可以通过 Facebook 图形界面更改的所有详细的“一般信息”设置，例如地址、个人信息等？

# java - Java 图像处理

> ID：10648822
> 
> 赞同：0
> 
> 时间：2012-05-18T07:55:10.493
> 
> 标签：java, netbeans, poker

我正在尝试做一个扑克手模拟器。我正在使用 Netbeans，并通过它的 GUI 编辑器创建了一个 JFrame，在其中添加了扑克桌的 JPG。这样做之后，是否可以根据玩家在牌桌JPG上的手牌动态添加JPG？是否可以在另一个上添加 JPG？如果是这样，我如何在 NetBeans 中实现这一点？

我打算做的是显示牌桌上的所有玩家，连同他们的筹码和姓名，并显示他们的行动。所有这些都将在卡片面朝上的情况下完成。模拟器将计算一些赔率，并以 pdf 格式输出一些手牌细节。

我想提一下，这是一个家庭作业项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:03:59.390

你所追求的应该是可能的。我建议你看看 Swing 框架提供的[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，一旦你找到了你需要的东西，你可以看看[这里](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)，看看如何实现你选择的布局。

编辑：如果您对应用程序的布局感到满意，您应该查看[ImageIO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html)以了解如何动态加载 JPG 图像并将它们添加到您的 JPanel 中。通常会使用[`JLabel(Icon image)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#JLabel%28javax.swing.Icon%29)构造函数将图像添加到 JPanel，但还有其他方法。

# android - 如何在用户验证之前检查 EditTextPreference 值？

> ID：10648824
> 
> 赞同：0
> 
> 时间：2012-05-18T07:55:33.353
> 
> 标签：android, edittextpreference

我目前在我的应用程序中有一个首选项，提示用户输入 2 到 10 个数值。

由于此功能仅适用于高级用户和 beta 测试人员，而不是公开发布，我决定让他们输入 CSV 值。

因此，在我的 EditTextPreference 中，一些用户将输入：“1;20;30”，其他一些用户将输入“1;10;10;10;10;10;10;10”等...

之后，在我的代码中，我只是拆分这些值来构建一个数组并执行我的代码。我不得不承认这不是很专业，但这确实有效！

```
String[] patternString = PreferenceManager.getDefaultSharedPreferences(getBaseContext()).getString("vibPattern", "0;500;500;500;500;500;500;500").split(";"); 
```

主要问题是我想在用户编写字符串时检查它的有效性！

你们中的一些人知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:00:45.950

为什么不只是以编程方式添加希望框的数量，（例如）有一个微调器（下拉菜单），您可以从中选择数量，然后仅添加带有数字的编辑文本数量？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:07:34.930

您需要使用“ [addTextChangedListener](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29) ”并根据已更改的文本行事...

如果您愿意，可以使用正则表达式来检查有效性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:48:27.557

在布局的 EditText 条目中添加以下内容：

android:inputType="数字" android:digits="0123456789,"

然后在 addTextChangeListener 实现中，您只需检查用户是否刚刚输入了一堆逗号。

# java - Google App Engine Java 无法运行应用程序 HTTP 500

> ID：10648826
> 
> 赞同：1
> 
> 时间：2012-05-18T07:55:44.720
> 
> 标签：java, eclipse, google-app-engine, http-error

我有一个简单的 servlet，如下所示。Ite 使用 Google 的用户服务。当我不使用它时，我不会收到任何错误。我还得到了一个完整的错误列表，如下所示。我发现这是一个 Eclipse 已知问题，但我找不到解决方案。

```
import java.io.IOException;
import javax.servlet.http.*;
import com.google.appengine.api.users.User;
import com.google.appengine.api.users.UserService;
import com.google.appengine.api.users.UserServiceFactory;

@SuppressWarnings("serial")
public class GuestbookServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
              throws IOException {
        UserService userService = UserServiceFactory.getUserService();
        User user = userService.getCurrentUser();

        if (user != null) {
            resp.setContentType("text/plain");
            resp.getWriter().println("Hello, " + user.getNickname());
        } else {
            resp.sendRedirect(userService.createLoginURL(req.getRequestURI()));
        }
    }
} 
```

这些是第一个错误：

```
HTTP ERROR 500

Problem accessing /guestbook. Reason: 
    Expecting a stackmap frame at branch target 117 in method guestbook.GuestbookServlet.doGet(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V at offset 34

Caused by:
java.lang.VerifyError: Expecting a stackmap frame at branch target 117 in method guestbook.GuestbookServlet.doGet(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V at offset 34
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487) 
```

是Java版本的问题吗？我正在运行 Eclipse Indigo 和 Java 7。我应该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:04:23.600

这似乎是 JDK7 的一个已知 Eclipse 问题。请检查[此链接](http://java.dzone.com/articles/javalangverifyerror-expecting)以获取解决方法/解决方案。

# c# - 当鼠标在点上时查看图表点的值

> ID：10648828
> 
> 赞同：20
> 
> 时间：2012-05-18T07:55:52.600
> 
> 标签：c#, winforms, mschart

我有一个图表，我希望用户在指针位于点上时看到这些值。通过在页面中使用 digEmAll 的帮助来[查找图表中点的值](https://stackoverflow.com/questions/9647666/finding-the-value-of-the-points-in-a-chart)，我可以编写以下代码：

```
Point? prevPosition = null; 
ToolTip tooltip = new ToolTip();  

void chart1_MouseMove(object sender, MouseEventArgs e) 
{     
    var pos = e.Location;     
    if (prevPosition.HasValue && pos == prevPosition.Value)         
        return;     
    tooltip.RemoveAll();     
    prevPosition = pos;     
    var results = chart1.HitTest(pos.X, pos.Y, false, ChartElementType.PlottingArea);     
    foreach (var result in results)     
    {         
        if (result.ChartElementType == ChartElementType.PlottingArea)         
        {            
            chart1.Series[0].ToolTip = "X=#VALX, Y=#VALY";          
        }    
    } 
} 
```

通过上面的代码，当指针**靠近**一系列时，用户可以看到值。但是现在我怎样才能让用户只有在指针**在**点上时才能看到值？我换了

```
int k = result.PointIndex;
if (k >= 0)
{
    chart1.Series[0].Points[k].ToolTip = "X=#VALX, Y=#VALY";
} 
```

代替

```
chart1.Series[0].ToolTip = "X=#VALX, Y=#VALY"; 
```

解决我的问题。但这没有用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-18T09:17:12.627

您应该以这种方式修改代码：

```
Point? prevPosition = null;
ToolTip tooltip = new ToolTip();

void chart1_MouseMove(object sender, MouseEventArgs e)
{
    var pos = e.Location;
    if (prevPosition.HasValue && pos == prevPosition.Value)
        return;
    tooltip.RemoveAll();
    prevPosition = pos;
    var results = chart1.HitTest(pos.X, pos.Y, false,
                                    ChartElementType.DataPoint);
    foreach (var result in results)
    {
        if (result.ChartElementType == ChartElementType.DataPoint)
        {
            var prop = result.Object as DataPoint;
            if (prop != null)
            {
                var pointXPixel = result.ChartArea.AxisX.ValueToPixelPosition(prop.XValue);
                var pointYPixel = result.ChartArea.AxisY.ValueToPixelPosition(prop.YValues[0]);

                // check if the cursor is really close to the point (2 pixels around the point)
                if (Math.Abs(pos.X - pointXPixel) < 2 &&
                    Math.Abs(pos.Y - pointYPixel) < 2)
                {
                    tooltip.Show("X=" + prop.XValue + ", Y=" + prop.YValues[0], this.chart1,
                                    pos.X, pos.Y - 15);
                }
            }
        }
    }
} 
```

这个想法是检查鼠标是否非常靠近点，例如`2`它周围的像素（因为不太可能**完全**在点上）并在这种情况下显示工具提示。

[这是一个完整的工作示例。](http://pastebin.com/PzhHtfMu)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-22T09:55:46.477

我会采取这个解决方案：

添加自定义工具提示事件处理程序：

```
 this.chart1.GetToolTipText += this.chart1_GetToolTipText; 
```

实现事件处理程序：

```
 private void chart1_GetToolTipText(object sender, ToolTipEventArgs e)
  {
     // Check selected chart element and set tooltip text for it
     switch (e.HitTestResult.ChartElementType)
     {
        case ChartElementType.DataPoint:
           var dataPoint = e.HitTestResult.Series.Points[e.HitTestResult.PointIndex];
           e.Text = string.Format("X:\t{0}\nY:\t{1}", dataPoint.XValue, dataPoint.YValues[0]);
           break;
     }
  } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-24T01:50:25.457

考虑以下可能比工具提示更好的选项...使用图表控件的标签功能。

```
DataPoint _prevPoint;
void chart1_MouseMove(object sender, MouseEventArgs e)
{
    // this if statement clears the values from the previously activated point.
    if (_prevPoint) {
        _prevPoint.MarkerStyle = MarkerStyle.None;
        _prevPoint.IsValueShownAsLabel = false;
    }

    var result = chart1.HitTest(e.X, e.Y, ChartElementType.DataPoint);
    if (result.ChartElementType == ChartElementType.DataPoint)
    {
        var prop = result.Object as DataPoint;
        if (prop != null)
        {
            prop.IsValueShownAsLabel = true;
            prop.MarkerStyle = MarkerStyle.Star4;
        }
    }
} 
```

我已经对此进行了测试，并且目前正在使用它。它在有很多点的图表上非常好，因为它也在图表上显示了标记。

# c++ - c++动态访问成员变量

> ID：10648829
> 
> 赞同：2
> 
> 时间：2012-05-18T07:55:52.963
> 
> 标签：c++

现在我有一个 switch 语句，它接受输入并选择以下操作之一：

**选项1**

```
for(; i < queue_size; ++i)
{
   prepared->setString(i+1, queue.at(i).model);
} 
```

**选项 2**

```
for(; i < queue_size; ++i)
{
   prepared->setString(i+1, queue.at(i).manufacturer);
} 
```

**选项 3**

```
for(; i < queue_size; ++i)
{
   prepared->setString(i+1, queue.at(i).name);
} 
```

在 PHP 中，您可以执行以下操作：

```
$queue[i][$member]; 
```

然后可以将 $member 设置为“名称”、“制造商”等。

有没有办法在 C++ 中做类似或更强大的事情？

提前感谢您的任何帮助/建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:03:27.160

如果您没有 C++11，请使用 C++11 [std::function](http://en.cppreference.com/w/cpp/utility/functional/function)或[boost::function ：](http://www.boost.org/doc/libs/1_49_0/doc/html/function.html)

```
std::map<YourSwitchType, std::function<void(void)> functionMap; 
```

然后定义函数，例如

```
void manufacturString() {
  for(; i < queue_size; ++i) {
    prepared->setString(i+1, queue.at(i).manufacturer);
  }
} 
```

对于每种情况，并用这些填充地图。

```
functionMap[someSwitchValue] = std::bind(&ThisType::manufactureString, this); 
```

然后你可以打电话给他们：

```
functionMap[someSwitchValue](); 
```

这种方法的一个优点是它不会限制您使用成员函数。您可以将非成员函数、函子、静态成员和非成员函数放在同一个映射中。唯一的限制是绑定后，它们返回 void 并且不接受任何参数（这是特定于本示例的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T08:07:16.523

您可以使用`map`从属性名称到指向成员的指针来执行此操作。但这需要一些工作（您需要自己创建该映射），并且语法有点复杂。（并且您要以这种方式称呼的所有成员都必须属于同一类型。）

演示：

```
#include <iostream>
#include <map>

struct Foo {
    std::string name;
    std::string address;
};

typedef std::string Foo::* FooMemPtr;
typedef std::map<std::string, FooMemPtr> propmap;

int main()
{
    propmap props;
    props["name"] = &Foo::name;
    props["address"] = &Foo::address;

    /* ... */

    Foo myfoo;
    myfoo.*(props["name"]) = "myname";
    myfoo.*(props["address"]) = "myaddress";
    std::cout << myfoo.*(props["address"]) << std::endl;
    std::cout << myfoo.*(props["name"]) << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:05:57.227

如果您可以使用枚举而不是字符串，那么您可以访问从枚举值索引的名称、制造商等。这取决于你需要多动态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T08:14:58.197

一种选择是将提取器函子传递给函数：

```
#include <string>
#include <vector>
#include <boost/bind.hpp>

struct Some {
    std::string model, manufacturer, name;
};

struct Prepared {
    void setString(size_t, std::string const&);
};

template<class Extractor>
void foo(Extractor extract) {
    Prepared* prepared = 0;
    std::vector<Some> queue;
    size_t i, queue_size = queue.size();
    for(; i < queue_size; ++i) {
        prepared->setString(i+1, extract(queue.at(i)));
    }
}

int main() {
    // C++03
    foo(boost::bind(&Some::model, _1));
    foo(boost::bind(&Some::manufacturer, _1));
    foo(boost::bind(&Some::name, _1));

    // C++11
    foo([](Some const& some){ return some.model; });
    foo([](Some const& some){ return some.manufacturer; });
    foo([](Some const& some){ return some.name; });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T07:59:32.447

使用[STL 映射](http://www.cplusplus.com/reference/stl/map/)来执行此操作。它就像你在 PHP 中所做的那样工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T11:51:48.327

您可以使用成员变量点（也有成员函数指针）来做这种事情。boost 绑定函数更通用，但这最终是它们在下面所做的（至少在这种情况下）。

```
#include <iostream>
#include <string>

struct item
{
    std::string a, b;
};

//the really ugly syntax for a pointer-to-member-variable
typedef std::string item::*mem_str;

//show each member variable from the list
void show_test( item * objs, size_t len, mem_str var )
{
    for( size_t i=0; i < len; ++i )
        std::cout << objs[i].*var << std::endl;
}

int main()
{
    //create some test data
    item test[2];
    test[0].a = "A-Zero";
    test[0].b = "B-Zero";

    test[1].a = "A-One";
    test[1].b = "B-One";

    //show variables
    show_test( test, 2, &item::a );
    show_test( test, 2, &item::b );

    return 0;
} 
```

# combinatorics - 如何从 n 个不同的集合中生成所有可能的值组合？

> ID：10648832
> 
> 赞同：0
> 
> 时间：2012-05-18T07:56:12.087
> 
> 标签：combinatorics

我有 n 个集合，每个集合都有 n1,n2,n3...nN 个不同的成员。如何从中生成 n1*n2*n3...*nN 可能的组合

例如

```
[6] [4 5] [1 2 3 4]
will give
6 4 1 
6 4 2
6 4 3 
6 4 4
6 5 1 
6 5 2
6 5 3
6 5 4 
```

我想在matlab中做这个，但是一个普通的算法也可以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:02:32.267

一个简单的解决方案是模拟 sum ！

从索引列表 0 0 0 开始，对应于您的值的索引。在您的示例中，这将导致您获得值 6 4 1。然后加 1。你现在有索引 001，所以 642 等等。

在 004，你溢出，所以你的索引变成 010，有 6 5 1

继续这样做，并保留访问过的可能性的计数器。有 1 * 2 * 4 种可能性，所以很容易知道何时完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:59:55.007

我认为您正在寻找集合的笛卡尔积：

这应该有助于：

```
cartprod(N1,N2,N3, ...) 
```

[http://www.mathworks.com/matlabcentral/fileexchange/5475-cartprod-cartesian-product-of-multiple-sets](http://www.mathworks.com/matlabcentral/fileexchange/5475-cartprod-cartesian-product-of-multiple-sets)

[这里](http://www.mathworks.com/matlabcentral/fileexchange/10064)还有一个

```
set = {n1, n2, n3, ...}
allcomb(set{:}) 
```

# java - 将 try-catch 包含在公共方法中，并在需要时调用

> ID：10648840
> 
> 赞同：-2
> 
> 时间：2012-05-18T07:56:37.067
> 
> 标签：java, try-catch

如何将 try-catch 包含在公共方法中并在需要时调用。

我在一个屏幕代码中尝试捕获。我想通过调用一个公开的方法（对整个应用程序）从另一个屏幕调用它。

可能吗 ？如果有怎么办。

请指导。

![在此处输入图像描述](../Images/22195b39fbb1b48464768958b36c2493.png)

重新编辑：

如以下代码所示，第二个选项卡窗格实现已显示，请忽略与本机 java 的语法差异（这已为 Blackberry JDE 实现）。实现结构保持不变，因此请忽略差异并为所面临的问题提出合乎逻辑的解决方案。

```
 // setup the second tab  
  vfm = new VerticalFieldManager( 
      Field.USE_ALL_HEIGHT | Field.USE_ALL_WIDTH |
      Manager.VERTICAL_SCROLL | Manager.NO_HORIZONTAL_SCROLL );

 //Initialize grid for publishing results
  grid.add(new LabelField("Name")
    {
       public void paint(Graphics graphics)
       {
         graphics.setColor(Color.CYAN);
         super.paint(graphics);
       }
     });
    grid.add(new LabelField("Total")
    {
       public void paint(Graphics graphics)
       {
         graphics.setColor(Color.CYAN);
         super.paint(graphics);
       }
     });

    grid.setColumnPadding(100);
    grid.setRowPadding(20);

   //TRY CATCH STARTS HERE

   try
                  {
                  //Open or create the database
                    Database db = DatabaseFactory.openOrCreate("database1.db"); 

                    Statement statementG55 = db.createStatement("CREATE TABLE IF NOT EXISTS GTemp4(gname TEXT,gbal INTEGER)");
                    statementG55.prepare();
                    statementG55.execute();       
                    statementG55.close();

                    Statement statementG56 = db.createStatement("SELECT gname,gbal FROM GTemp4 ORDER BY ROWID DESC");
                    statementG56.prepare();
                    statementG56.execute();

                            Cursor c = statementG56.getCursor();

                            //Get to the row of grid
                             for (int i =1; i < grid.getRowCount(); i++)
                             {
                                    System.out.println("Inside for first loops");
                                    //Get to the column of grid
                                for (int j = 0; j < grid.getColumnCount() ; j++)
                                {
                                   System.out.println("Inside for second loops");
                                   //Get to the row of temp4 table
                                   while(c.next()) 
                                   {

                                      System.out.println("Inside while"); 
                                        Row r;
                                        r = c.getRow();

                                        for (int k = 1; k >=0; k--)
                                        {

                                            System.out.println("Inside for loops");

                                            if(k==0)
                                            {
                                                System.out.println("Retrieving Names");
                                                grid.insert(new LabelField(r.getString(k))
                                                {
                                                    public void paint(Graphics graphics)
                                                    {
                                                    graphics.setColor(Color.GOLD);
                                                    super.paint(graphics);
                                                    }
                                                 },i,j);

                                            }  
                                            else
                                            {   

                                                System.out.println("Retrieving other values"); 
                                                String p = "" + r.getObject(k);

                                                grid.insert(new LabelField(p)
                                                {
                                                    public void paint(Graphics graphics)
                                                    {
                                                    graphics.setColor(Color.GOLD);
                                                    super.paint(graphics);
                                                    }
                                                 },i,j); 

                                            }   
                                           grid.setBackground(BackgroundFactory.createLinearGradientBackground(Color.MIDNIGHTBLUE,Color.STEELBLUE,Color.MIDNIGHTBLUE,Color.STEELBLUE));

                                        } 
                                         System.out.println("Exiting while");                        
                                      }

                                      System.out.println("Exiting sec for");
                                      break;
                                  }
                                System.out.println("Exiting first for");
                                break;
                               } 
                               statementG56.close(); 
                               db.close();
                  } 
                  catch(Exception e) 
                  {         
                        System.out.println( e.getMessage() );
                        e.printStackTrace();     
                  }  

    vfm.add(grid);

  nullFld = new NullField( Field.FOCUSABLE );
  hfm = new HorizontalFieldManager();
  hfm.add( nullFld );
  hfm.add( myLbl );

  pane = new Pane( hfm, vfm );
  model.addPane( pane ); 
```

非常感谢下面所有提出建议的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:15:50.087

你的问题仍然很神秘。我假设您有一些代码可以进行一些搜索，然后将结果发布到一些名为`pane2`. 您想要的是，一旦`Search`按下按钮，您就会调用代码。

你可以有这样的方法：

```
public void doSomeSearching(...) throws Exception //This will allow you to remove the try/catch block from within the method and be able to catch any exceptions in the layer above.
{
     //Do the searching
     //Update panel2
} 
```

然后，您需要做的是为您的按钮添加一个动作侦听器。这将允许在单击按钮后执行代码。`ActionListeners` [（您可以在此处](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)找到更多信息）。

```
JButton btnSearch = new JButton("Search");
button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                try
                {
                     doSomeSearching();
                }
                catch (Exception e)
                {
                     //Do something when exception is raised.
                }
            }
        }); 
```

这应该允许您在单击按钮时触发搜索功能并处理应该出现的任何异常。

编辑：

> 另一个包含在pane2中的try-catch来发布（它从一开始就一直运行，即不等待搜索按钮的动作监听器被执行）`

无限期地循环是最好避免的事情，因为这会消耗 CPU 周期，而基本上什么都不做。这通常会增加您的应用程序消耗的资源，并且还可能导致您的 GUI 挂起。如果我在你那里我会有一些更新的方法，`panel2`而不是在你完成搜索后调用。

话虽如此，您可能有一些中间变量，例如包含您需要打印的任何内容的字符串，并且您的搜索方法会不断更新此中间变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:10:26.897

不推荐这种方法。

与其在您的方法周围放置一个通用的 try-catch 块，不如考虑将“throws”子句添加到您想要以这种方式处理的每个方法的声明中，然后在更高层处理所有这些异常。

# jquery - 如何将属性设置为 jquery 选项卡

> ID：10648841
> 
> 赞同：0
> 
> 时间：2012-05-18T07:56:40.030
> 
> 标签：jquery, jquery-ui, jquery-tabs

我正在动态制作 jquery 选项卡，我想将属性分配`onclick`给每个选项卡。

```
$(function() {
var index = 0;
$("#addTab").live('click', function() {
    index++;
    var title = 'Tab.....  ' + index;
    var url = '#fragment-' + index;

   $('#tabs').tabs("add", url, title, [index]);
   $('li.ui-state-default').attr("onclick","a();"); // this line

}); 
```

但这不起作用..

JS 小提琴[http://jsfiddle.net/ranasaani/gP3YZ/18/](http://jsfiddle.net/ranasaani/gP3YZ/18/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:00:31.680

为什么要直接将其添加到选项卡？您正在使用 JQuery，您可以像这样处理点击事件：

```
$('yourtabselector').click(function(){}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:08:11.487

您还可以使用选项卡的内置选择事件：http: [//jqueryui.com/demos/tabs/#event-select](http://jqueryui.com/demos/tabs/#event-select)

```
$("#tabs").tabs({
    select: function() {
        // your code;
    }
}); 
```

工作示例：http: [//jsfiddle.net/cCN6H/](http://jsfiddle.net/cCN6H/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:02:44.780

```
$('#addTab li.ui-state-default').live('click', function(){

    a();//do something

}); 
```

# php - 是否可以在 PHP 中制作类似 c 的二进制数据（结构）

> ID：10648842
> 
> 赞同：2
> 
> 时间：2012-05-18T07:57:09.063
> 
> 标签：php

这是 C 代码。

```
#pragma pack(push,1)
typedef struct _DATA_PKT_D1
{
    char    length[2];
    char    command[2];
    char    src[64];
    char    lordId;
    char    user_id[20];
    int     level;
    char    isFine;
    char    company_code;
}DATA_PKT_D1;
#pragma pack(pop)

DATA_PKT_D1 *pkt = malloc(sizeof(DATA_PKT_D1);

//send pkt through TCP socket. 
```

数据包为 95 字节。我知道 php 也有 tcp socket 功能。但是，是否可以在 php 中使数据包完全相同？（我的意思是 95 字节）并通过 tcp 发送数据？

我怀疑php具有二进制级别的结构功能......

任何提示lz~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:00:40.630

是的，用 PHP 构建二进制数据是完全可能的，虽然有点，不，很多，不如 C 优雅。你需要 pack/unpack 函数，它可以让你从 php 变量中编写二进制缓冲区。见[http://php.net/manual/en/function.pack.php](http://php.net/manual/en/function.pack.php)

过去，我已经为二进制协议（甚至加密）实现了 UDP 服务器和客户端，它很丑，但它可以工作。您唯一应该注意的是字节序。

# javascript - 在javascript中清除对象内存

> ID：10648845
> 
> 赞同：1
> 
> 时间：2012-05-18T07:57:21.870
> 
> 标签：javascript, tibco-gi

我在我的 Web 应用程序中使用通用接口，并且我有 javascript 类和方法来为我的类创建对象。我想在不使用对象时清除内存。我的问题是如何清除对象的内存。

我试过'obj = null;' 和'删除 obj;'。两者都没有按预期工作。

有没有办法在 JavaScript 或通用接口中清除对象和对象内存。

-斯里达尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:03:38.887

尝试设置为`null`.

```
var a = new className();
alert(a);

a = null;
alert(a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:17:48.880

您可以使用[自调用函数](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)

```
Self-invoking functions are functions who execute immediately, and create their own closure. Take a look at this:

(function () {
    var dog = "German Shepherd";
    alert(dog);
})();
alert(dog); // Returns undefined

so the dog variable was only available within that context 
```

**编辑**
如果内存泄漏与 DOM 有关，[这里](http://javascript.info/tutorial/memory-leaks)写了如何管理它。所以，我试图这样解决：

```
var obj = {};//your big js object
//do something with it

function clear() {
    var that = this;
    for (var i in that) {
        clear.call(that[i]);
        that[i] = null;
    }
}

clear.call(obj);//clear it's all properties
obj = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:26:37.237

你不能。只要确实删除了每个引用（例如，设置`null`为建议的数量），就完全取决于 GC 何时运行以及何时收集它们。

# c - cudaHostRegister 是否等同于 mlock() 系统调用？

> ID：10648849
> 
> 赞同：3
> 
> 时间：2012-05-18T07:57:34.853
> 
> 标签：c, linux, memory, cuda

与非锁定内存相比，固定或页面锁定内存传输到 GPU 的速度更快。CUDA 提供`cudaHostAlloc`和`cudaHostRegister`调用来分配或注册页面锁定内存。然后，Nvidia 驱动程序检查内存传输是否已锁定主机内存并根据复制代码路径发出。

是否有可能通过系统调用`mlock()`实现与 完全相同的效果（关于传输速度）对内存进行页面锁定`cudaHostRegister`？还是相应的 CUDA 调用会更新驱动程序查询的内部数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:17:23.763

我认为 NVIDIA 驱动程序维护自己的页面锁定内存，可通过`cudaHostAlloc`etc 访问。系统调用`mlock`使用内核锁定，这在技术上等同于驱动程序所做的，但内核页面锁定*非常*受资源限制`RLIMIT_MEMLOCK`，非常小。因此 NVIDIA 驱动程序使用它自己的页面锁定机制。他们警告过度使用，因为它窃取了内核其余部分可访问的大量内存。

因此，在它对内存进行页面锁定的意义上`cudaHostRegister`是等价`mlock()`的，而不是在它受资源限制的意义上。而不是从某种意义上说，这`cudaMemcpy`是加速的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T23:41:34.927

它们不是等价的。cuMemHostRegister() 页面锁定内存，但也将其映射到 GPU（或者，如果是可移植的，GPU）的页表中，以便 GPU 可以直接访问它。如果您在不为 GPU 映射的情况下对内存进行页面锁定，那么它在 GPU 中的外观就像任何其他内存一样。

# c++ - cout 中的 + 运算符有什么作用？

> ID：10648854
> 
> 赞同：4
> 
> 时间：2012-05-18T07:58:08.080
> 
> 标签：c++, iostream

在下面的代码中，我感到困惑并添加了一个 + 应该是 <<

```
#include <iostream>
#include "Ship.h"

using namespace std;

int main()
{
    cout << "Hello world!" << endl;
    char someLetter = aLetter(true);
    cout <<"Still good"<<endl;
    cout << "someLetter: " + someLetter << endl;
    return 0;
} 
```

应该

```
cout << "someLetter: " << someLetter << endl; 
```

输出的错误代码：

> 你好世界！
> 还是不错的
> os::clear

我不明白的是为什么编译器没有捕获任何错误以及 os::clear 是什么意思？还有为什么行首没有“someLetter:”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T08:05:45.397

这里，`"someLetter: "`是一个字符串文字，即一个`const char *`指针，通常指向存储所有字符串文字的内存的只读区域。

`someLetter`是 a `char`，因此`"someLetter: " + someLetter`执行指针运算并将 的值添加`someLetter`到存储在指针中的地址。最终结果是一个指针，它指向您要打印的字符串文字之外的某个位置。

在您的情况下，指针似乎最终出现在符号表中并指向`ios::clear`方法名称的第二个字符。这完全是任意的，指针可能最终指向另一个（可能无法访问）位置，具体取决于`someLetter`字符串文字存储区域的值和内容。总之，这种行为是未定义的，你不能依赖它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T08:13:30.163

与`+`运营商无关`cout`。

[如此](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)表所示，优先`+`级高于`<<`，因此有问题的代码行被解析如下：

```
(cout << ("someLetter: " + someLetter)) << endl; 
```

换句话说，`+`应用于一个char指针和一个char。char 是一种整数数据类型，因此您实际上是在执行指针算术运算，将右侧 char 的整数值与左侧指针相加，生成一个新的 char 指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T08:08:11.220

+ 在 上进行指针算术运算`"someLetter: "`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T08:05:36.297

我认为 C 字符串`"someLetter: "`正在使用`char someLetter`作为索引，因此指向内存的某些部分。因此行为。

在 C++ 中，如果你做一些愚蠢的事情，你会得到奇怪的行为。该语言为您提供了很多可以吊死自己的绳索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T08:06:16.323

您必须记住，文字字符串只是指向某个内存区域的指针。所做的是`"someLetter: " + someLetter`向该指针添加一个值，然后尝试打印它。

# c# - 查询 3 个单独的数据集还是 1 个连接集？

> ID：10648858
> 
> 赞同：0
> 
> 时间：2012-05-18T07:58:27.700
> 
> 标签：c#, sql, performance

这个问题实际上可以应用于任何语言。它与[此](https://stackoverflow.com/questions/4306074/using-a-single-joined-query-instead-of-multiple-queries-for-performance)相似，但不完全相同。

我有一个网站应用程序，它将显示数据库中的数据。三个数据库表：

```
tblProfessor(Id,FirstName,LastName)
tblStudent(Id,FirstName,LastName)
tblProfessorStudent(Id,StudentId,ProfessorId) 
```

所以我们有学生和教授。学生可以由多个教授教授，教授可以教授多个学生。

查询数据的两种方式：

1.  返回所有三个表的连接，在这种情况下，我们传输一些重复数据。
2.  为每个表返回三组。我知道可以从我的 Web 应用程序一次调用中返回多组数据。我不清楚该调用的机制，但我认为它只是与数据库的一个连接（与上面提到的类似问题相反）。

第一种情况下的查询：

```
select
    ProfessoirId = p.Id
   ,ProfessorFirstName = p.FirstName
   ,ProfessorLastName = p.LastName
   ,StudentId = s.Id
   ,StudentFirstName = s.FirstName
   ,StudentLastName = s.LastName
from tblProfessorStudent ps
inner join tblProfessor p
   on p.id = ps.ProfessorId
inner join tblStudent s
   on s.id = ps.StudentId 
```

我所说的重复是每行返回学生和教授的名字和姓氏 - “学生由教授教”和“教授教学生”的组合。重复导致需要从 DB 传输到应用程序的额外 kb 量。

第二种情况的查询将像这样简单：

```
select <columns> from tblProfessor
select <columns> from tblStudent
select <columns> from tblProfessorStudent 
```

**我应该如何从性能角度**为我的应用程序查询数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:09:36.153

从纯粹的性能角度来看，没有什么比 SQL Server 在 T-SQL 中连接数据集的能力更好的了。尤其是当我们谈论大型数据集时。
它在生活中的唯一目的是管理数据和数据集，并且它在数据源所在的地方执行此操作。
在客户端上“通过网络”连接将引入大量（网络）开销、冗余数据流量，并且花哨的客户端算法没有或几乎没有办法克服这一点。

当然，和往常一样：YMMV，“这取决于”总是适用于我的陈述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:23:41.423

我认为在这种情况下最重要的是您如何使用数据。如果您实现了正确的索引，SQL Server 将很好地连接表，不用担心。我很确定它会比运行 3 次选择更快。你说你担心重复数据，但是什么样的重复呢？如果您加入这 3 个表，您将获得真实数据，我的意思是，教授 X 个学生的老师和由 X 个老师教授的学生。没有重复！同样，这取决于您如何使用结果集。您是否只是显示学生列表和教师列表？在这种情况下，请使用选项 2。如果您需要显示教师 A 有以下学生，请使用选项 1 的连接，因为如果您选择选项 2，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:19:28.870

如果您担心性能，则不应返回表中的所有行。一旦数据库增长，这将导致应用程序变慢。您应该过滤数据以仅获取需要向用户显示的行。也可以考虑实现分页，这样就不会一次显示很多行。

# java - 如何在不定义主键字段的情况下使用实体管理器插入记录？

> ID：10648864
> 
> 赞同：4
> 
> 时间：2012-05-18T07:58:42.510
> 
> 标签：java, persistence, java-ee-6, entitymanager

我试图使用实体类和实体管理器将记录插入数据库（MySQL）。但是其中一个字段是自动递增的主键，所以除非我手动提供一个值，否则插入是不成功的。

```
public boolean newContributor(String name, String email, String country, Integer contactable, String address) {
        Contributors contributor = new Contributors(); //entity class
        contributor.setId(??????); //this is Primary Key field and is of int datatype
        contributor.setName(name);
        contributor.setEmail(email);
        contributor.setCountry(country);    
        contributor.setContactable(contactable);
        contributor.setAddress(address);

        em.persist(contributor);
        return true;
    } 
```

如何解决这样的问题？有没有办法告诉实体管理器在没有 ID 字段的情况下尝试插入并使用`NULL`value 代替。

***更新：***这是定义实体类的一部分`id`

```
...
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@NotNull
@Column(name = "id")
private Integer id;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 50)
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:23:40.473

> 有没有办法告诉实体管理器在没有 ID 字段的情况下尝试插入并改用 NULL 值？

当然。您需要删除定义中字段的`@NotNull`注释，并删除该行：`id``@Entity`

```
contributor.setId(??????); 
```

从方法`newContributor()`。原因是`@NotNull`注释在 JPA 堆栈中强制执行验证检查。这并不意味着该字段在数据库级别上不是 NULL。请参阅[此处](https://hibernate.onjira.com/browse/BVAL-234)有关此问题的讨论。

其余的代码看起来不错。

# ruby-on-rails - “工头开始”卡住了

> ID：10648867
> 
> 赞同：3
> 
> 时间：2012-05-18T07:59:09.343
> 
> 标签：ruby-on-rails, ruby, facebook, heroku

我有一个本地开发的 Rails 应用程序。它非常简单，没有数据库，只有一个控制器，可以访问 Facebook 数据并将它们呈现在视图中。顺便说一下，使用了gem **RestGraph**。

在我将此应用程序推送到 heroku 之前，我使用 foreman start 对其进行了测试。由于我在需要安装“瘦”gem 并创建一个 Procfile 之前使用的是 WEBrick，其内容如下：

```
web: bundle exec thin start -R config.ru -e $RACK_ENV -p $PORT 
```

似乎还需要一个“.env”文件，内容如下：

```
RACK_ENV=development
PORT=3000 
```

'config.ru' 文件由 rails 生成，内容如下：

```
require ::File.expand_path('../config/environment',  __FILE__)
run Myapp::Application 
```

现在我输入了“工头开始”，但我得到的只是一行：

```
15:33:18 web.1     | started with pid 27143 
```

服务器不会启动。如果我强制终止它，错误是：

```
/usr/local/foreman/lib/foreman/engine.rb:141: [BUG] rb_sys_fail() - errno == 0 
```

这不是很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:15:54.167

可能是您的日志没有被“卡住”，而是被缓冲：[工头只显示带有“started wit pid #”的行，没有别的](https://stackoverflow.com/questions/8717198/foreman-only-shows-line-with-started-wit-pid-and-nothing-else)

我通过添加解决了这个问题

```
$stdout.sync = true 
```

到 config.ru

然后你可能会从工头那里得到更多有用的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:33:19.323

This seems a little over complex. From looking at a couple of apps I have I have the following in my procfile:

```
bundle exec rails server thin -p $PORT 
```

I also don't have a `.env` file in these instances.

One thing worth noting is that Foreman will ignore the port you pass in most of the time, it likes to sit in a port range higher than 5000

# c++ - 如果将数据移动到不同的块，c++ realloc 函数是否对旧数据块应用删除操作？

> ID：10648870
> 
> 赞同：0
> 
> 时间：2012-05-18T07:59:25.430
> 
> 标签：c++, memory-management, dynamic-memory-allocation, realloc

该函数可以将内存块移动到新位置，在这种情况下，将返回新位置。
例如，我有一个指向数组的指针：

```
int *arr; // somewhere next it initialized, filled with elements and etc 
```

我需要的地方：

```
void* location = realloc(arr, NEW_SIZE); 
```

旧的内存块位置会发生什么？

如果 realloc 将不是数学的指针返回给 arr，我应该使用下一个代码吗？：

```
delete arr;
arr = (int*)location; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T08:03:36.943

该函数`realloc`继承自良好的旧 C。它不运行析构函数或执行任何其他 C++ 魔法。它也只能应用于使用`malloc`（和朋友）分配的块——它*不能用于使用 'new' 分配的块*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T08:06:08.250

规则 #1：不要将 new/delete 与 malloc/free 混用。

如果您`malloc()`首先分配 with 并且需要更大的堆空间，那么您需要调用`realloc()`which 将返回一个新指针，该指针可能不会映射到相同的内存区域，`arr`因此您不应该使用它。

免费 malloc'ed/realloc'ed 空间`free`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T08:09:20.013

[realloc(void *ptr, size_t new_size)](http://en.cppreference.com/w/c/memory/realloc)需要给定的内存区域，该区域`ptr`指向*之前由 malloc()、calloc() 或 realloc() 分配并且尚未使用 free() 释放，否则，结果未定义。*

仅将**realloc**与**malloc**、**calloc**或其他**realloc一起使用，并使用****free**清理它。
在 C++ 中，始终将**new**与**delete**和**new[]**与**delete[]**一起使用。

# iphone - 无需登录即可从 Facebook 页面获取帖子

> ID：10648874
> 
> 赞同：0
> 
> 时间：2012-05-18T07:59:47.990
> 
> 标签：iphone, ios, ipad, facebook-graph-api

我正在尝试获取 Facebook Page throw iOS API 的帖子，并且之前没有登录（没有访问令牌）我无法做到这一点。有什么解决方案可以做到这一点吗？有人知道吗？

该应用程序向我报告以下错误：

```
An access token is required to request this resource. 
```

**更新**

我用这个结构生成一个访问令牌：APPID|APPSECRET 并给它一个到期日期。有了这个，我可以访问我的页面的公共数据:)

谢谢，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:11:30.813

图形 API 文档 seys：

```
posts [..] any valid access_token or user access_token 
```

您可以在此处找到更多信息[http://developers.facebook.com/docs/reference/api/page/](http://developers.facebook.com/docs/reference/api/page/)

这是现场示例[http://developers.facebook.com/tools/explorer/?method=GET&path=19292868552%2Fposts](http://developers.facebook.com/tools/explorer/?method=GET&path=19292868552%2Fposts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:30:43.253

+1 好吧...... facebook 数据都是关于“用户”的，因此你总是需要**有效的 access_token**

但也有少数例外，
例如，您可以在没有令牌的情况下显示用户个人资料图片，
请参见示例； [https://graph.facebook.com/100001789213579/picture?type=large](https://graph.facebook.com/100001789213579/picture?type=large)

# sql - 使用当前财政年度不存在的可用 SQL 天数

> ID：10648878
> 
> 赞同：1
> 
> 时间：2012-05-18T08:00:02.997
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个名为“假期表”的表格，它基本上包含员工不上班的所有日期（例如银行假期等）

下面的查询基本上是查看当前财政年度并计算出每月有多少天可用，然后累计使用工会，（例如四月至五月，四月至六月）虽然我不需要一个四月可以为此使用非累积。

见查询：

```
DECLARE @StartDate DATETIME, 
        @EndDate   DATETIME 

        --available days            
--current – start of this financial year
SELECT @StartDate = (select
case when month(getdate()) >= 4 then
convert(datetime, cast(year(getdate()) as varchar) + '-4-1')
else
convert(datetime, cast(year(getdate())-1 as varchar) + '-4-1')
end), 

--current – end of this financial year
       @EndDate = (select
case when month(getdate()) < 4 then
convert(datetime, cast(year(getdate()) as varchar) + '-3-31')
else
convert(datetime, cast(year(getdate())+1 as varchar) + '-3-31')
end) 

CREATE TABLE #data 
  ( 
     firstday    DATETIME NOT NULL PRIMARY KEY, 
     workingdays INT NOT NULL 
  ); 

WITH dayscte ([Date]) 
     AS (SELECT @StartDate 
         UNION ALL 
         SELECT Dateadd(DAY, 1, [Date]) 
         FROM   dayscte 
         WHERE  [Date] <= @Enddate) 
INSERT INTO #data 
SELECT MIN([Date]), 
       COUNT(*) [Day] 

FROM   dayscte 
       LEFT JOIN dbo.Holiday_Table
         ON [Date] BETWEEN dbo.Holiday_Table.sch_cal_d AND dbo.Holiday_Table.sch_cal_ed 

where
NOT EXISTS (
    SELECT sch_id,sch_cal_d,sch_cal_ed FROM dbo.Holiday_Table WHERE 
    sch_id ='66291100Ks'
    AND
    [date] <= sch_cal_d  
    AND
    [date] >= sch_cal_ed  
    )
       AND Datename(weekday, [Date]) NOT IN ( 'Saturday', 'Sunday' ) 
GROUP  BY Datepart(MONTH, [Date]), 
          Datepart(YEAR, [Date]) 
OPTION (MAXRECURSION 366) 

DECLARE @Date DATETIME 

SET @Date = (SELECT MIN(firstday) 
             FROM   #data) 

SELECT Period, 
       workingdays [Days_Available_Minus_Holidays] ,

       year (firstday) AS [Year]

FROM   (SELECT Datename(MONTH, firstday) [Period], 
               workingdays, 
               0                         [SortField], 
               firstday 
        FROM   #data 

       UNION 
        SELECT Datename(MONTH, @Date) + '-' + Datename(MONTH, firstday), 
               (SELECT SUM(workingdays) 
                FROM   #data b 
                WHERE  b.firstday <= a.firstday ) [WorkingDays], 
               1                                 [SortField], 
               firstday 
        FROM   #data a 
        WHERE  

        firstday > @Date) data 

ORDER  BY sortfield, 
          firstday 

DROP TABLE #data  

GO 
```

结果如下：

```
Period  Days_Available_Minus_Holidays   Year
April                     19    2012
May                   22    2012
June                      19    2012
July                      22    2012
August           22 2012
September            20 2012
October          23 2012
November             22 2012
December             19 2012
January          23 2013
February             20 2013
March                     21    2013
April                      1    2013
April-May            41 2012
April-June           60 2012
April-July           82 2012
April-August             104    2012
April-September 124 2012
April-October            147    2012
April-November  169 2012
April-December  188 2012
April-January            211    2013
April-February           231    2013
April-March          252    2013
April-April          253    2013 
```

我的问题是当我达到累积值时，它会执行另一个“四月”，然后在底部执行“四月至四月”我不需要四月的累积，因为它只有一个月，基本上我不想要第一个或最后一个累积值，因为 4 月被非累积值覆盖，或者如果第二个“四月”必须保留，那么它不应该读为“1”作为可用天数，与非累积值相同，即 19 为这是实际可用的天数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:36:34.260

尝试删除 WITH 子句中的等号

更改`WHERE [Date] <= @Enddate`为`WHERE [Date] < @Enddate`

似乎您在 WHERE 子句之前的日期上增加了一天，因此它超过了一天。

# php - 检查多维数组中的值？

> ID：10648880
> 
> 赞同：0
> 
> 时间：2012-05-18T08:00:06.637
> 
> 标签：php, arrays

我的数组是这样的：

```
Array
(
    [0] => Array
        (
            [id] => 6
            [name] => Name1
        )
    [1] => Array
        (
            [id] => 7
            [name] => Name2
        )
) 
```

如何检查此多维数组中是否存在任何特定的 name 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:02:21.390

```
function checkName($haystack, $needle) {
   foreach($haystack as $hay) {
      if($hay['name'] == $needle) {
         return true;
      }
   }
   return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:02:25.927

迭代。

```
function multi_in_array($name, $array) {
    foreach ($array as $sub_array) {
        if (in_array($name, $array)) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:02:16.950

也许您正在寻找[in_array](http://php.net/manual/en/function.in-array.php)函数？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T08:02:46.060

使用这种结构，您唯一的选择本质上是线性搜索：

```
$found = null;
foreach ($arr as $idx => $elem) {
    if ($elem['name'] == $searchName) {
        $found = $idx;
    }
}
if ($found !== null) {
    echo "Found $searchName at $idx.";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T08:05:20.137

这个功能可以帮助你，

```
<?php

    function multi_dim_array_search($array,$col,$val)
    {
        foreach($array as $elem)
            if($elem[$col] == $val)
                return true;

            return false;
    }

    $array = array(
        array('id' => 1,'name' => 'Name1'),
        array('id' => 2,'name' => 'Name2')
    );

    //usage
    var_dump(multi_dim_array_search($array,'name','Name1')); //true
    var_dump(multi_dim_array_search($array,'name','Name2')); //true
    var_dump(multi_dim_array_search($array,'name','Name3')); //false

?> 
```

# c# - 亚马逊广告 API——EditorialReviews 有时会返回 null，即使它不应该针对给定的 ISBN

> ID：10648884
> 
> 赞同：0
> 
> 时间：2012-05-18T08:00:14.447
> 
> 标签：c#, api, amazon, isbn

我正在使用亚马逊产品广告 API 根据给定的 ISBN 编号获取有关书籍的数据。它工作得很好，我得到了大部分信息，但对于一些书，我对编辑评论有疑问。看起来这些信息可以在亚马逊网站上找到，但我的查询没有得到它。有谁知道为什么？下面是我的代码示例。示例 ISBN 可能是 9780752809069。感谢您的任何建议。

```
 AWSECommerceServicePortTypeClient amazonClient;

        amazonClient = new AWSECommerceServicePortTypeClient(
        new BasicHttpBinding(BasicHttpSecurityMode.Transport), new EndpointAddress("https://ecs.amazonaws.co.uk/onca/soap?Service=AWSECommerceService"));       //Amazon UK working

        amazonClient.ChannelFactory.Endpoint.Behaviors.Add(new AmazonSigningEndpointBehavior("AAAAAAAAAAAAAAAAA", "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"));

        ItemLookup itemLookup = new ItemLookup();
        ItemLookupRequest request_isbn = new ItemLookupRequest();
        request_isbn.ResponseGroup = new string[] {"EditorialReview", "Large" };
        request_isbn.SearchIndex = "Books";

        request_isbn.ItemId = new string[] { "9780752809069" }; 

        request_isbn.IncludeReviewsSummary = "True";
        request_isbn.IdType = ItemLookupRequestIdType.ISBN;
        request_isbn.IdTypeSpecified = true;

        itemLookup.Request = new ItemLookupRequest[] { request_isbn };
        itemLookup.AssociateTag = "my astag";

        ItemLookupResponse response_isbn = new ItemLookupResponse();

            response_isbn = amazonClient.ItemLookup(itemLookup);

        string _Description = "";  
        foreach (var revitem in response_isbn.Items[0].Item)
          {

              if (revitem.EditorialReviews != null) _Description = revitem.EditorialReviews.Last().Content.ToString(); //Sometimes is null even if there is Product Description avaliable on the Amazon Web

          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-17T10:03:37.210

ItemLookup 不返回一些编辑评论。ItemLookup 仅返回由 Amazon.com 撰写的编辑评论 其他网站记录的编辑评论不能包含在 ItemLookup 返回的评论中。

[https://aws.amazon.com/releasenotes/Product-Advertising-API/2666](https://aws.amazon.com/releasenotes/Product-Advertising-API/2666)

# java - 如何使用 Spring 创建 bean 验证框架

> ID：10648891
> 
> 赞同：0
> 
> 时间：2012-05-18T08:00:38.813
> 
> 标签：java, spring, validation, frameworks

我有 bean AddressBean，它具有一些属性，如 addressLine1、city 等。在使用 AddressBeanService 将其持久化到 DB 之前，我正在对其进行预验证，并在保存后，使用 ValidateAddressService 中的 preValidate 和 postValidate 函数对其进行验证。而这一切都是我从 AddressBeanHelper 类触发的。

```
class AddressBeanHelper{

    AddressBean bean =null;
    AddressBeanHelper(AddressBean bean){
        this.bean=bean;
    }

ValidationService validate=new ValidateAddressService();
    function doStuff(){
        validate.preValidateAddressBean (bean);
        //business logic for AddressBean
        validate.preValidateAddressBean (bean);
    }
}

class ValidateAddressService implements ValidationService <AddressBean>{
    preValidateAddressBean (AddressBean bean){
        //here is the issue
    }
    preValidateAddressBean (AddressBean bean){
        //here is the issue
    }
} 
```

我想在 spring 中使用一些框架或技巧，我只需要在验证函数中编写通用代码并将我的验证规则外部化到代码本身之外。就像一个规则引擎，它可以自动验证 bean 的每一个属性。目前我的应用程序基础设施是服务器端的spring/hibernate，客户端的jsp/jquery和部署服务器在heroku上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:39:34.520

看看这个：

[http://hillert.blogspot.com/2011/12/method-validation-with-hibernate.html](http://hillert.blogspot.com/2011/12/method-validation-with-hibernate.html)

它支持 JSR-303，因此它是一个标准。它非常容易实现，并且支持自定义和一些预定义的即用型验证器。

您还可以在此处找到一些参考资料：

[http://java.dzone.com/articles/method-validation-spring-31](http://java.dzone.com/articles/method-validation-spring-31)

# blackberry - 创建自定义加载屏幕

> ID：10648896
> 
> 赞同：0
> 
> 时间：2012-05-18T08:00:50.523
> 
> 标签：blackberry, load, loading, illegalstateexception

我想创建一个自定义加载屏幕我创建了一个可以这样做但它不起作用的类

我创建了 LoadingScreen 类，它传递一组图像字符串以在加载时加载图像

```
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.decor.BackgroundFactory;

public class LoadingScreen extends MainScreen {
    VerticalFieldManager vfm_Progress;
    String progressImgStr[]={"progress0000.png","progress0001.png","progress0002.png","progress0003.png","progress0004.png","progress0005.png","progress0006.png","progress0007.png"};

    public LoadingScreen() {
    this.getMainManager().setBackground(BackgroundFactory.createSolidTransparentBackground(Color.BLACK, 200));
    vfm_Progress=new VerticalFieldManager();
    LoadThread spin=new LoadThread(progressImgStr,this);
    spin.startLoading();
    spin.start();

    }       

} 
```

然后这个类调用一个线程类，它加载图像并附加到 LoadingScreen 的 VerticalFieldManager 但是......它不起作用，所以我得到一个名为 IIlegalStateException 的错误

Thread类如下

```
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.component.BitmapField;

public class LoadThread extends Thread{
    private String[] mProgressImgStr;
    private boolean isLoading=false;
    LoadingScreen loadScreen;
    public LoadThread(String[] progressImgStr,LoadingScreen loadScreen) {
        this.mProgressImgStr=progressImgStr;
        this.loadScreen=loadScreen;
    }

    public void run() {
        if(isLoading)
        {
            for (int i = 0; i < mProgressImgStr.length; i++) {
                Bitmap img=Bitmap.getBitmapResource(mProgressImgStr[i]);
                BitmapField progressImgFld=new BitmapField(img);
                loadScreen.vfm_Progress.add(progressImgFld);
                loadScreen.add(loadScreen.vfm_Progress);
                try {
                    this.sleep(250);
                    loadScreen.vfm_Progress.delete(progressImgFld);
                    loadScreen.delete(loadScreen.vfm_Progress);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                if(i==mProgressImgStr.length-1)
                {
                    i=0;
                }
            }
        }

        //super.run();
    }

    public void stopLoading()
    {
        isLoading=false;
    }

    public void startLoading()
    {
        isLoading=true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:52:01.373

LoaderScreen.java

```
import java.util.Timer;
import java.util.TimerTask;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.container.PopupScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;

public class LoaderScreen extends PopupScreen
{
    Timer loadingTimer = new Timer();
    TimerTask loadingTask;
    int imageIndex = 0;
    Bitmap loader1 = Bitmap.getBitmapResource("loader001.png");
    Bitmap loader2 = Bitmap.getBitmapResource("loader002.png");
    Bitmap loader3 = Bitmap.getBitmapResource("loader003.png");
    Bitmap loader4 = Bitmap.getBitmapResource("loader004.png");
    Bitmap loader5 = Bitmap.getBitmapResource("loader005.png");
    Bitmap loader6 = Bitmap.getBitmapResource("loader006.png");
    Bitmap loader7 = Bitmap.getBitmapResource("loader007.png");
    Bitmap loader8 = Bitmap.getBitmapResource("loader008.png");
    Bitmap loader9 = Bitmap.getBitmapResource("loader009.png");
    Bitmap loader10 = Bitmap.getBitmapResource("loader010.png");
    Bitmap loader11 = Bitmap.getBitmapResource("loader011.png");
    Bitmap loader12 = Bitmap.getBitmapResource("loader012.png");
    boolean showLoader = true;
    int screenWidth = Display.getWidth();
    int screenHeight = Display.getHeight();
    int xAnchor = 0; // (screenWidth-200)/2;
    int yAnchor = 0; // (screenHeight-40)/2;
    String loaderText = "Please wait...";

    public LoaderScreen() 
    {
        super(new VerticalFieldManager(), USE_ALL_HEIGHT | USE_ALL_WIDTH | DEFAULT_CLOSE);
        loadingTask = new TimerTask() {
            public void run() {
                invalidate();
                imageIndex++;
                if(imageIndex == 11){
                    imageIndex = 0;
                }
            }
        };
        loadingTimer.scheduleAtFixedRate(loadingTask, 0, 100);
    }

    public void setShowLoader(boolean showLoader) {
        this.showLoader = showLoader;
    }

    public boolean isShowing(){
        return showLoader;
    }

    protected void paint(Graphics graphics) {
        super.paint(graphics);
        if (showLoader) {
            //draw background:
            graphics.setColor(0x363636);
            graphics.fillRect(xAnchor, yAnchor, 200, 40);

            //draw animation frame:
            switch (imageIndex) {
                case 0:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader1, 0, 0);
                    break;
                case 1:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader2, 0, 0);
                    break;
                case 2:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader3, 0, 0);
                    break;
                case 3:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader4, 0, 0);
                    break;
                case 4:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader5, 0, 0);
                    break;
                case 5:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader6, 0, 0);
                    break;
                case 6:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader7, 0, 0);
                    break;
                case 7:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader8, 0, 0);
                    break;
                case 8:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader9, 0, 0);
                    break;
                case 9:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader10, 0, 0);
                    break;
                case 10:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader11, 0, 0);
                    break;
                case 11:
                    graphics.drawBitmap(xAnchor + 4, yAnchor + 4, 32, 32, loader12, 0, 0);
                    break;
            }

            //draw text:
            graphics.setColor(0xefefef);
            graphics.drawText(loaderText, xAnchor + 44, yAnchor + 6);

            //draw border:
            graphics.setColor(0xcccccc);
            graphics.drawRect(xAnchor, yAnchor, 200, 40);
        }
    }

    protected void sublayout(int maxWidth, int maxHeight) {
        maxWidth = 200;
        maxHeight = 40;
        super.sublayout(maxWidth, maxHeight);
        setExtent(maxWidth, maxHeight);
        int x = (Display.getWidth() >> 1) - (maxWidth >> 1) - 15;
        int y = (Display.getHeight() >> 1) - (maxHeight >> 1) - 30 ;
        setPosition(x, y);
    }

    public void close() 
    {
        try
        {
            loadingTimer.cancel();
            loadingTask.cancel();
        }catch (Exception e) {  }
        super.close();
    }

} 
```

在这里，您可以将此类与以下代码一起使用。

```
LoaderScreen loaderScreen = new LoaderScreen();
UiApplication.getUiApplication().invokeLater(new Runnable() {
    public void run() {
        UiApplication.getUiApplication().pushModalScreen(
                loaderScreen);
    }
});

Thread thread = new Thread() {
    public void run() {
        //Do Something 
        UiApplication.getUiApplication().invokeLater(
            new Runnable() {
                public void run() {
                    try {
                            loaderScreen.close();
                        } catch (Exception e) {
                    }
                }
        });
    }
};
thread.start(); 
```

您需要自己查找图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:59:55.280

更改 UI 更新代码如下：

```
synchronized (UiApplication.getEventLock()) {
    loadScreen.vfm_Progress.add(progressImgFld);
    loadScreen.add(loadScreen.vfm_Progress);
    try {
        this.sleep(250);
        loadScreen.vfm_Progress.delete(progressImgFld);
        loadScreen.delete(loadScreen.vfm_Progress);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

任何涉及设备用户界面的操作都必须使用锁定[UiApplication.getEventLock()](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/system/Application.html#getEventLock%28%29)来完成。

# jquery - 如何向微小的轮播脚本添加淡入淡出动画

> ID：10648899
> 
> 赞同：0
> 
> 时间：2012-05-18T08:01:05.843
> 
> 标签：jquery, html, css, carousel

我正在尝试向名为[Tiny Carousel](http://baijs.nl/tinycarousel/)的滑块插件添加淡入淡出过渡。我已经采取了示例演示并[在此处重新设置了样式](http://designobvio.us/bottom/bottom.php)（抱歉使用了 2 个相同的占位符图像）。不幸的是，唯一可用的过渡是幻灯片动画。其中，看起来有点奇怪。我的 jQuery 技能很弱但是..

*“有人知道如何操纵[tinycarousel.js](http://designobvio.us/bottom/asset/js/libs/jquery.tinycarousel.min.js)以允许幻灯片之间的淡入淡出过渡吗？”*

[JS-](http://designobvio.us/bottom/asset/js/libs/jquery.tinycarousel.min.js) _

```
(function ($) {
$.tiny = $.tiny || {};
$.tiny.carousel = {
    options: {
        start: 1,
        display: 1,
        axis: 'x',
        controls: true,
        pager: false,
        interval: false,
        intervaltime: 3000,
        rewind: false,
        animation: false,
        duration: 1000,
        callback: null
    }
};
$.fn.tinycarousel = function (options) {
    var options = $.extend({}, $.tiny.carousel.options, options);
    this.each(function () {
        $(this).data('tcl', new Carousel($(this), options));
    });
    return this;
};
$.fn.tinycarousel_start = function () {
    $(this).data('tcl').start();
};
$.fn.tinycarousel_stop = function () {
    $(this).data('tcl').stop();
};
$.fn.tinycarousel_move = function (iNum) {
    $(this).data('tcl').move(iNum - 1, true);
};

function Carousel(root, options) {
    var oSelf = this;
    var oViewport = $('.viewport:first', root);
    var oContent = $('.overview:first', root);
    var oPages = oContent.children();
    var oBtnNext = $('.next:first', root);
    var oBtnPrev = $('.prev:first', root);
    var oPager = $('.pager:first', root);
    var iPageSize, iSteps, iCurrent, oTimer, bPause, bForward = true,
        bAxis = options.axis == 'x';

    function initialize() {
        iPageSize = bAxis ? $(oPages[0]).outerWidth(true) : $(oPages[0]).outerHeight(true);
        var iLeftover = Math.ceil(((bAxis ? oViewport.outerWidth() : oViewport.outerHeight()) / (iPageSize * options.display)) - 1);
        iSteps = Math.max(1, Math.ceil(oPages.length / options.display) - iLeftover);
        iCurrent = Math.min(iSteps, Math.max(1, options.start)) - 2;
        oContent.css(bAxis ? 'width' : 'height', (iPageSize * oPages.length));
        oSelf.move(1);
        setEvents();
    }

    function setEvents() {
        if (options.controls && oBtnPrev.length > 0 && oBtnNext.length > 0) {
            oBtnPrev.click(function () {
                oSelf.move(-1);
                return false;
            });
            oBtnNext.click(function () {
                oSelf.move(1);
                return false;
            });
        }
        if (options.interval) {
            root.hover(oSelf.stop, oSelf.start);
        }
        if (options.pager && oPager.length > 0) {
            $('a', oPager).click(setPager);
        }
    };

    function setButtons() {
        if (options.controls) {
            oBtnPrev.toggleClass('disable', !(iCurrent > 0));
            oBtnNext.toggleClass('disable', !(iCurrent + 1 < iSteps));
        }
        if (options.pager) {
            var oNumbers = $('.pagenum', oPager);
            oNumbers.removeClass('active');
            $(oNumbers[iCurrent]).addClass('active');
        }
    };

    function setPager(oEvent) {
        if ($(this).hasClass('pagenum')) {
            oSelf.move(parseInt(this.rel), true);
        }
        return false;
    };

    function setTimer() {
        if (options.interval && !bPause) {
            clearTimeout(oTimer);
            oTimer = setTimeout(function () {
                iCurrent = iCurrent + 1 == iSteps ? -1 : iCurrent;
                bForward = iCurrent + 1 == iSteps ? false : iCurrent == 0 ? true : bForward;
                oSelf.move(bForward ? 1 : -1);
            }, options.intervaltime);
        }
    };
    this.stop = function () {
        clearTimeout(oTimer);
        bPause = true;
    };
    this.start = function () {
        bPause = false;
        setTimer();
    };
    this.move = function (iDirection, bPublic) {
        iCurrent = bPublic ? iDirection : iCurrent += iDirection;
        if (iCurrent > -1 && iCurrent < iSteps) {
            var oPosition = {};
            oPosition[bAxis ? 'left' : 'top'] = -(iCurrent * (iPageSize * options.display));
            oContent.animate(oPosition, {
                queue: false,
                duration: options.animation ? options.duration : 0,
                complete: function () {
                    if (typeof options.callback == 'function') options.callback.call(this, oPages[iCurrent], iCurrent);
                }
            });
            setButtons();
            setTimer();
        }
    };
    return initialize();
};
 })(jQuery); 
```

[html](http://designobvio.us/bottom/bottom.php) -

```
 <div class="viewport">
              <a class="buttons prev" href="#">left</a>
            <ul class="overview">
                <form method="post" action="" class="jcart">
                    <fieldset>

                        <input type="hidden" name="my-item-id" value="ABC-123" />
                        <input type="hidden" name="my-item-name" value="Soccer Ball" />
                        <input type="hidden" name="my-item-price" value="25.00" />
                        <input type="hidden" name="my-item-url" value="" />
                        <li class="captions">
                            <h1 class="price">PRICE: $33.25</h1>
                            <img src="asset/img/picture1.png" />
                             <h1>SNACKS<span>armband</span></h1>
                            <h2>buddy what you nibblin on?</h2>
                            <p>Snackin snack armband for amazing snackin wrist support. When you carryin
                                this whole state on yo back, you’ll need all the support you can get. word.</p>
                            <label>Qty:
                                <input type="text" name="my-item-qty" value="1" size="3" />
                            </label>
                            <input type="submit" name="my-add-button" value="add to cart" class="button"
                            />
                        </li>
                    </fieldset>
                </form>
                                                    <form method="post" action="" class="jcart">
                    <fieldset>

                        <input type="hidden" name="my-item-id" value="ABC-123" />
                        <input type="hidden" name="my-item-name" value="Soccer Ball" />
                        <input type="hidden" name="my-item-price" value="25.00" />
                        <input type="hidden" name="my-item-url" value="" />
                        <li class="captions">
                            <h1 class="price">PRICE: $33.25</h1>
                            <img src="asset/img/picture1.png" />
                             <h1>SNACKS<span>armband</span></h1>
                            <h2>buddy what you nibblin on?</h2>
                            <p>Snackin snack armband for amazing snackin wrist support. When you carryin
                                this whole state on yo back, you’ll need all the support you can get. word.</p>
                            <label>Qty:
                                <input type="text" name="my-item-qty" value="1" size="3" />
                            </label>
                            <input type="submit" name="my-add-button" value="add to cart" class="button"
                            />
                        </li>
                    </fieldset>
                </form>

            </ul>
              <a class="buttons next" href="#">right</a>
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:27:18.450

我的建议是使用原生支持淡入/淡出的循环脚本。

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

它通常很简单，默认为淡入淡出： `$('#slideshowcontainer').cycle();`

# android - 光标出现在 EditBox 的中心

> ID：10648901
> 
> 赞同：0
> 
> 时间：2012-05-18T08:01:08.110
> 
> 标签：android, android-edittext

我有一个`EditBox`我将输入类型设置为`textMultiLine`. 问题是光标`EditBox`总是出现在的中心`EditBox`，但我希望它显示在我的编辑框的左上角。

那么为什么会发生这种情况呢？

**编辑框代码**

```
<EditText
    android:id="@+id/notes_edit_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:background="@drawable/img_add_notes_textbox"
    android:inputType="textMultiLine"
    android:maxHeight="30dp"
    android:paddingLeft="15dp"
    android:scrollbars="vertical"
    android:textColor="#121212" >
</EditText> 
```

**截图**

![在此处输入图像描述](../Images/9a76435c35d7c4f60dc0232e26e165eb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:02:46.933

因为，默认情况下，重力`EditText`是`center`所以只需将其设置为`top`

```
android:gravity="top" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:03:53.017

您需要设置`android:gravity="top|left"`为您的 EditText

# ios - 如何在 IOS 中获取可用内存？

> ID：10648902
> 
> 赞同：-2
> 
> 时间：2012-05-18T08:01:11.840
> 
> 标签：ios, memory

> **可能重复：**
> [如何在 App Store 批准的应用程序中获取有关可用内存和正在运行的进程的信息？（是的，有一个！）](https://stackoverflow.com/questions/8275578/how-to-get-information-about-free-memory-and-running-processes-in-an-app-store-a)

如何在 IOS 中获取可用内存？我不知道..

我用谷歌搜索，然后我知道如何在 VM 中获取物理内存、用户内存和使用的内存，释放内存。

但。内存大小不同，设置->常规->关于->可用。

我想知道设置中的“可用”。

祝你今天过得愉快 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:46:49.443

几个月前在这里发现的，不记得最初是谁发的。这是你想要的？

```
- (uint64_t)freeDiskspace
{
uint64_t totalSpace = 0;
uint64_t totalFreeSpace = 0;

__autoreleasing NSError *error = nil;  
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:[paths lastObject] error: &error];  

if (dictionary) {  
    NSNumber *fileSystemSizeInBytes = [dictionary objectForKey: NSFileSystemSize];  
    NSNumber *freeFileSystemSizeInBytes = [dictionary objectForKey:NSFileSystemFreeSize];
    totalSpace = [fileSystemSizeInBytes unsignedLongLongValue];
    totalFreeSpace = [freeFileSystemSizeInBytes unsignedLongLongValue];
    NSLog(@"Memory Capacity of %llu MiB with %llu MiB Free memory available.", ((totalSpace/1024ll)/1024ll), ((totalFreeSpace/1024ll)/1024ll));
   } else {  
    NSLog(@"Error Obtaining System Memory Info: Domain = %@, Code = %@", [error domain], [error code]);  
}  

return totalFreeSpace;
} 
```

# java - 如何从 Java 中的单个流中连续解析多个 JSON 数据？

> ID：10648904
> 
> 赞同：0
> 
> 时间：2012-05-18T08:01:22.620
> 
> 标签：java, json, parsing

我有一个 InputStreamReader（连接到一个套接字），它将接收多个 JSON 文档数据。例如，它将有

```
{ "name" : "foo" } 
```

并且，一段时间后（没有关闭连接），流将有另一个 JSON 数据，

```
{ "name" : "bar" } 
```

.

我想在我的处理循环中使用 json-simple 或 json-smart 来解析它。有没有办法做到这一点？

我喜欢有一个 JSON 解析器（来自流的输入数据），如果它没有从流中接收到数据，解析器可以阻止更多数据，如果它接收到完整的 JSON 数据（可能使用某种方法），它可以不断解析下一个 JSON 数据。

显然，我尝试了 json-simple 和 json-smart 但没有成功。

任何帮助或建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:39:00.107

如果我正确理解了这个问题，那么问题是`JSON`从一批对象中解析一个完整的`JSON`对象（不断地通过输入流）。

因此，如果可以检测到`JSON`已接收到完整的对象，我们就可以解析该对象。

要检测接收到的`JSON`对象 ( `String`) 是否完整且有效，我们可以维护 a `Stack`of`{`和`}` ¹。对于`{`我们收到的每一个，我们都可以推送它`Stack`，对于每一个`}`，我们都可以删除一个`{`from `Stack`。如果我们`Stack`有空的（不是第一次），我们可以得出结论，有一个完整的`JSON`对象。然后我们可以继续解析。

**1** - 不确定括号结构（平衡吗？）`JSON`，没有`JSON`更早地探索形成:(。

# android - 在另一个 imageView 上添加 imageView 会导致底部的调整大小。如何防止？

> ID：10648907
> 
> 赞同：0
> 
> 时间：2012-05-18T08:01:46.160
> 
> 标签：android, layout, imageview

我有以下问题：在我的布局 xml 中，我有一个相对布局，其中放置了一个 ImageView（可从 app / res 文件夹中绘制，已绘制）。

我需要在与初始图像完全相同的位置以编程方式添加另一个 ImageView（以及来自应用程序资源的另一个可绘制对象）并在其上执行动画。

我几乎成功了，使用新的可绘制对象和从初始 ImageView 获取的布局参数添加新的 ImageView，并在其上执行动画，但初始的 ImageView（在新添加的下方）变得越来越小 - 无缘无故地调整自身大小（其他孩子都可以）。

如何防止这种情况？两个图像的宽度和高度完全相同，我需要保持不变......提前致谢。

PS更新问题。

```
> <RelativeLayout> .... ... ... <ImageView deck1 > centerverticaly and
> leftof(other UI component) - this is the initial imageview and
> represents deck full of cards.... ... <ImageView deck2>
> centerverticaly and rightof(other UI component) - this is the second
> deck where the cards should be opened.... ... </RelativeLayout> 
```

现在我需要从deck1 中取出一张卡片并使用动画将它放在deck2 上。所以我执行以下操作：

```
if(animatingView==null){
ImageView animatingview = new ImageView(this.context);
animatingView.setImageBitmap(R.drawable.backofthecard);
animatinView.setLayoutParams(deck1.getLayoutParams);
RelativeLayout.add(animatingView);
}else{
animatingView.setVisible(visible);
}
animatingView.startAnimation(deckTranslateAnimation);

.
.
..
OnAnimationEnd{animatingView.setVisible(invisible)} 
```

所有的可绘制对象都是相等的（宽度和高度），所以我希望不会有任何问题，但是当将动画视图添加到布局时 - 甲板1变小，调整自身大小，它仍然可以点击并显示但更小（并且因为它变小了所有其他依赖它的孩子，所以改变他们的位置......）

对不起，我没有使用真正的代码和xml，但现在我不在他们面前......

编辑：已解决。这是代码：

```
if(animatingView==null){
                animatingView = new ImageView(context);
                animatingView.setImageResource(R.drawable.back);
                RelativeLayout.LayoutParams params = new LayoutParams(animatingView.getDrawable().getMinimumWidth(), animatingView.getDrawable().getMinimumHeight());
                params.addRule(RelativeLayout.ALIGN_LEFT, this.getDeckView().getCardView().getId());
                params.addRule(RelativeLayout.ALIGN_TOP, this.getDeckView().getCardView().getId());
                animatingView.setLayoutParams(params); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:13:07.433

Can you show the code you are using? Anyway, i think it is better to use FrameLayout to show views that may overlapped to each other. My first thought without seeing the code is to wrap the existing ImageView with FrameLayout. Then when you want to programmatically add new ImageView, you can do it by adding it as FrameLayout's child. FrameLayout renders view in different layer, so the old one should not be affected when you do something with the newly added view.

[updated]

I just tried to implement placing imageview over another imageview. Anyway, I don't seem to get the problem on the size of the overlapped image. Here are my implementation. Please try this and see if it worked or not. You may have to change some variables though.

.java

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.RelativeLayout;

public class ImageStackActivity extends Activity {

    Context context;
    RelativeLayout relativeLayout;
    ImageView deck1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        context = this.getApplicationContext();
        deck1 = (ImageView)findViewById(R.id.deck1);
        Button button = (Button)findViewById(R.id.button);
        Button button2 = (Button)findViewById(R.id.button2);
        relativeLayout = (RelativeLayout)findViewById(R.id.relative_layout);

        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                ImageView img = new ImageView(context);
                img.setBackgroundResource(R.drawable.photo3);
                img.setLayoutParams(deck1.getLayoutParams());
                relativeLayout.addView(img);
                Animation anim = AnimationUtils.loadAnimation(context, android.R.anim.fade_in);
                img.startAnimation(anim);
            }
        });
        button2.setOnClickListener(new OnClickListener() {          
            @Override
            public void onClick(View v) {
                if(relativeLayout.getChildCount()>2){
                    relativeLayout.removeViewAt(2);
                }
            }
        });
    }
} 
```

main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/relative_layout"
    >
    <ImageView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content" 
      android:id="@+id/deck1"
      android:src="@drawable/photo2"
    />
    <ImageView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content" 
      android:id="@+id/deck2"
      android:src="@drawable/photo3"
      android:layout_toRightOf="@id/deck1"
    />
</RelativeLayout>
<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:id="@+id/button"
    android:text="add image"
    />
<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:id="@+id/button2"
    android:text="clear"
    />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:11:52.997

我遇到了同样的问题，我通过缩放另一张图片解决了这个问题，这将对你有所帮助，告诉我你是否在这段代码中发现了任何好处:)

```
public Bitmap decodeFile(String path, Integer size){
        File f = new File(path);
     try {
         //Decode image size
         BitmapFactory.Options o = new BitmapFactory.Options();
         o.inJustDecodeBounds = true;
         BitmapFactory.decodeStream(new FileInputStream(f),null,o);

         //The new size we want to scale to
         if(size == 0)
          size = 70;

         //Find the correct scale value. It should be the power of 2.
         int scale=1;
         while(o.outWidth/scale/2>=size && o.outHeight/scale/2>=size)
             scale*=2;

         //Decode with inSampleSize
         BitmapFactory.Options o2 = new BitmapFactory.Options();
         o2.inSampleSize=scale;
         return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
     } catch (FileNotFoundException e) {}
     return null;
       } 
```

# assembly - MS-DOS 下汇编器中的堆栈

> ID：10648919
> 
> 赞同：0
> 
> 时间：2012-05-18T08:02:21.387
> 
> 标签：assembly, x86, stack, nasm

我正在尝试学习一些汇编代码；特别是如何使用堆栈以及它是如何工作的等等。但是，当我使用下面的代码时，我遇到了一个错误：

```
entry:
    push 0x42
    call teststack
    jmp hang

hang:
    jmp hang

teststack:
    mov ah, 0x0e
    pop al
    mov bh, 0x00
    mov bl, 0x04
    mov cx, 0x01
    int 10h
    ret 
```

我要做的是将数字 42（生命，宇宙，一切：D）传递到我的测试堆栈程序中，它将打印 Ascii 0x42（我认为是大写 B）。我的问题是编译器错误，对于读取**pop al**的行：

```
**error: invalid combination of opcode and operands** 
```

我在 Windows 98 虚拟机中使用 NASM。对我的错误的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:47:01.530

从来没有使用过 NASM，但我认为您处于 16 位模式，并且 pop 默认使用 16 位寄存器，所以您不能使用啊。当您将 0x42 推入堆栈时，这是一个 16 位值 (0x0042)。使用 pop ax 然后设置 ah 是安全的：

```
entry:
    push 0x42
    call teststack
    jmp hang

hang:
    jmp hang

teststack:
    pop ax           ; ax = 0x0042
    mov ah, 0x0e     ; ax = 0x0e42
    mov bh, 0x00
    mov bl, 0x04
    mov cx, 0x01
    int 10h
ret 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:15:55.920

如果您将某个值压入堆栈（即 0x42 值），您的堆栈将包含一个值 [0x42]。接下来，您使用将返回地址存储在堆栈上的调用指令，因此堆栈现在包含 [ret_addr, 0x42]。

第一条子程序指令弹出值（出乎意料的是它是 ret-addr 而不是 0x42），然后执行其他操作并跳转（ret 指令）到从堆栈弹出的地址（0x42 ...）。

您可以使用 BP 寄存器中的堆栈指针副本来读取存储在堆栈中的值并使用 RET N 指令从子程序返回（高级语言使用类似的 sheme）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:06:45.283

用 push 你必须像这样指定大小

```
push dword 0x42 
```

# php - PHP - 通过字符串加密将加密字符串传递到另一个页面的困难

> ID：10648924
> 
> 赞同：0
> 
> 时间：2012-05-18T08:02:35.263
> 
> 标签：php, encryption

机智关于[使用 PHP 加密和解密密码的最佳方法？](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)

我在将加密字符串传递到另一个页面时遇到了问题。

就我而言，我想向用户发送一个注册链接，例如

**www.xyz.com/reg.php?x=xxxxxxxxxxx**

其中 xxxxxxx 在加密的序列化数组中包含电子邮件地址和用户的全名信息作为字符串。

但是，当用户单击链接时，解密后的字符串与加密前的原始字符串不同。

有时，如果部分解密了信息，其余的都是垃圾。

任何人都可以解释为什么会这样？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:05:41.937

您正在使用 URL 不安全字符，例如`+`（来自 base64）。你需要`urlencode()`/`urldecode()`你的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:11:59.747

个人信息根本不应该在url中传递，有hash函数等方法更安全。您描述的这种情况是错误的，请尝试寻求有关如何正确传递 url 参数的安全标准。

还有很多与传递 url 参数有关的漏洞，比如参数污染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:56:54.903

我认为您在数据库中创建了一个字段，例如 act_key .. 当您在此处生成类似 (www.xyz.com/reg.php?x=xxxxxxxxxxx) 的 URL 时，您可以生成带有数字的随机字符串，并将其存储在 act_key 字段中。 。 好的

当用户首先单击激活链接时，您检查并匹配此 act_key .. 如果匹配或找到，则您将获得电子邮件 ID 或其他详细信息...并处理下一步

# asp.net-mvc - iis如何区分mvc请求和asp.netpage请求

> ID：10648926
> 
> 赞同：0
> 
> 时间：2012-05-18T08:02:44.010
> 
> 标签：asp.net-mvc, iis, request

IIS 如何区分 asp.net mvc 请求或普通 asp.net 页面请求，以及它如何处理这两个不同的请求？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:27:57.767

路由（通常在 global.asax 中配置）将 URL 配置为由控制器/操作而不是实际的 aspx 页面处理。

如果 url 与路由不匹配，它将尝试查找实际文件而不是操作。

# c# - 如何将对象列表绑定到 DataGrid？

> ID：10648947
> 
> 赞同：1
> 
> 时间：2012-05-18T08:04:08.823
> 
> 标签：c#, wpf, xaml, binding, datagrid

**背景**

我正在尝试将我的对象绑定到`DataGrid`

我有一个`PhoneVM`对象列表。列表中的每个项目都包含一个列表`StringBindingData`。我需要每个项目`StringBindingData`对应于 DataGrid 行中的不同单元格

列表中的每个项目对应于用户配置的不同值，包括`Description`和`Value`。

`PhoneVM`定义为：

```
public class PhoneVM 
{
    public List<StringBindingData> StringBindingData { get; private set; }

    public PhoneVM()
    {

    }
} 
```

并`StringBindingData`定义为：

```
public class StringBindingData : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public string Description { get; set; }

    private string _value;
    public string Value
    {
        get { return _value; }
        set
        {
            OnPropertyChanged("Value");
        }

    }

    public StringBindingData(string data, string description)
    {
        Value = data;
        Description = description;
    }

    internal void OnPropertyChanged(string prop)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(prop));
        }
    }
} 
```

列表中第一项的 Description 属性`StringBindingData`可能包含“名称”，而 Value 属性将包含实际名称。列表中第二项的 Description 属性可能包含“电话号码”，而 Value 属性将包含实际号码。

**问题**

我想让这些绑定到`DataGrid`. 我怎样才能做到这一点？

到目前为止，我尝试将第一列绑定到名称

```
<DataGrid Name="phoneGrid" AutoGenerateColumns="False" Height="150" Width="Auto" 
            SelectionMode="Single" SelectionUnit="FullRow" Margin="10,10,0,0" 
            HorizontalAlignment="Left" VerticalAlignment="Top" SelectionChanged="phoneGrid_SelectionChanged">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Name"
            x:Name="columnPhoneNumber" 
            Binding="{Binding Path=Value}"
            IsReadOnly="True">
        </DataGridTextColumn>
    </DataGrid.Columns>
</DataGrid> 
```

在后面的代码中：

```
public Phone(List<PhoneVM> phoneVm)
{
    InitializeComponent();

    phoneGrid.DataContext = phoneVm;
} 
```

但即使查看代码，它也显然是错误的。我不知道如何指定`DataContext`我希望它从中获取`StringBindingData`对象`phoneVm`并从中获取数据。

有什么我需要添加到 XAML 以使其正常工作吗？还有什么我可以添加到代码中的吗？我需要更改我的数据模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:24:24.610

正如您所说，您缺少与`StringBindingData`视图模型中属性的绑定。尝试添加`ItemsSource="{Binding StringBindingData}"`到您的 DataGrid。

# javascript - 将按钮的操作与其 div 的操作隔离开来

> ID：10648948
> 
> 赞同：0
> 
> 时间：2012-05-18T08:04:19.637
> 
> 标签：javascript, jquery, html, css, web

我的项目中有一个 div，在这个 div 上有一个按钮，它有一个向下滑动 div 的动作，但 div 本身有一个动作 onclick 可以向上滑动

这里的问题是，当我单击按钮时，按钮的动作完成，div 向下滑动，但 div 的动作被触发并再次向上滑动，因为按钮是它的一部分

我希望我给你点这里是一些代码

```
<div id='container' onclick='slideup()'>
    <button onclick='slidedown()'>click</button>
</div> 
```

其中slideup和slidedown是我在javascript中添加的功能

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T08:06:16.383

添加`return false`到`function slidedown`

```
<div id='container' onclick='slideup()'>
    <button onclick='slidedown()'>click</button>
</div>

function slidedown(){
    ...
    ...
    return false;
} 
```

* * *

既然你标记了你的问题`jQuery`，为什么不使用这个很棒的库呢？

```
$('#container button').click(function(){ // or use $('#button-id')...
    slidedown();
    return false;
});

$('#container button').click(slideup); 
```

**更新的 HTML**

```
<div id='container'>
    <button >click</button> <!-- better give that button an id-->
</div> 
```

# c# - 从使用每个项目的部分视图呈现的列表中选择一个项目

> ID：10648954
> 
> 赞同：0
> 
> 时间：2012-05-18T08:04:40.997
> 
> 标签：c#, asp.net-mvc-2, partial-views

我有一个带有项目列表的视图模型。这些项目使用 for 循环中的局部视图呈现。

我希望能够单击局部视图中的某些文本并将我单击的项目**和所有属性发回控制器。**

我不能简单地传递一个 Id，因为一旦我将项目传递给视图，我就无法再次查找它。

我有什么选择可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:09:26.887

现在我明白了。我会以另一种方式实现这一点。第一个控制器 - 列出项目，第二个控制器 - 为 UI 操作项目 jQuery。客户端选择，编辑 - 在 jQuery 上，保存按钮转到第二个控制器。这在内部可能会导致列表刷新。刷新项目到第 1 个。还有一些 Ajax 使客户端工作更方便。这似乎是完美的匹配。

# macos - 如何以编程方式获取Apple“命令按钮”键代码？

> ID：10648957
> 
> 赞同：1
> 
> 时间：2012-05-18T08:05:14.693
> 
> 标签：macos, shortcut, keycode

我需要知道mac键盘中Command按钮的键码，有人知道如何以编程方式获取它吗？

如果用户点击按钮 Command + X（剪切快捷方式），我可以获得密钥代码吗？感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:12:28.267

我在这里假设您正在处理由 AppKit 框架生成的 NSEvents。

在 NSEvent 的文档中，看一下[`modifierFlags`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/modifierFlags)方法。

您正在寻找的标志就是[`NSCommandKeyMask`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSCommandKeyMask).

现在，为了得到它，如果你有一个 NSView 视图焦点......它继承自 NSResponder。NSResponder 中的一种方法是[`keyDown`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/keyDown%3a). `keyDown`因此，向您的子类视图添加一个方法，它采用的参数是`NSEvent`. 这就是您获得命令按钮键的方式。

***顺便说一句，仅供参考***，如果您只想自己获取命令键（这是我怀疑的），这是一个更大的技巧，我不确定 AppKit 是否可行。因为命令键和控制键和 shift 键一样，都是*修饰*键，这意味着当事件生成时，NSEvent 期望同时按下两个键（例如，Command + Q 表示退出，Control + C 表示中断，Shift + A 表示大写 A)。

# iphone - AVPlayer 缓冲、暂停通知和海报帧

> ID：10648963
> 
> 赞同：16
> 
> 时间：2012-05-18T08:05:29.690
> 
> 标签：iphone, ios, avfoundation, avplayer

我有一些相关的问题`AVPlayer`是：

1.  当我们暂停`AVPlayer`通过时`[player pause]`，是`AVPlayer`继续缓冲来自网络的视频还是只是停止？我在苹果的文档中找不到任何与此相关的信息。此外，是否可以强制 AVPlayer 在暂停时保持缓冲，这样如果我们暂停的视频正在等待第一个视频结束，那么我们不会在视频之间找到任何间隙？

2.  在暂停`AVPlayer`我们可以有任何事件`[player pause]`。

3.  我们可以显示`AVPlayer`几秒钟的静止图像吗？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-18T11:28:41.493

1）`AVPlayer`将在几种情况下缓冲视频，没有明确记录。我会说您可以在初始化视频和替换当前项目时进行缓冲。您可以观察`currentItem.loadedTimeRanges`以了解发生了什么。该属性将告诉您已加载哪些视频时间范围。

此外，还有一些其他`currentItem`属性可能对您有所帮助`playbackLikelyToKeepUp`：`playbackBufferFull`和`playbackBufferEmpty`.

实现完美的无间隙播放并非易事。

```
/* player is an instance of AVPlayer */
[player addObserver:self 
         forKeyPath:@"currentItem.loadedTimeRanges" 
            options:NSKeyValueObservingOptionNew 
            context:kTimeRangesKVO]; 
```

在`observeValueForKeyPath:ofObject:change:context:`：

```
if (kTimeRangesKVO == context) {
   NSArray *timeRanges = (NSArray *)[change objectForKey:NSKeyValueChangeNewKey];
   if (timeRanges && [timeRanges count]) {
       CMTimeRange timerange = [[timeRanges objectAtIndex:0] CMTimeRangeValue];
       NSLog(@" . . . %.5f -> %.5f", CMTimeGetSeconds(timerange.start), CMTimeGetSeconds(CMTimeAdd(timerange.start, timerange.duration)));
   }
} 
```

2）只要留意`player.rate`。

```
[player addObserver:self 
         forKeyPath:@"rate" 
            options:NSKeyValueObservingOptionNew 
            context:kRateDidChangeKVO]; 
```

然后在你的`observeValueForKeyPath:ofObject:change:context:`：

```
 if (kRateDidChangeKVO == context) {
        NSLog(@"Player playback rate changed: %.5f", player.rate);
        if (player.rate == 0.0) {
            NSLog(@" . . . PAUSED (or just started)");
        }
    } 
```

3）您可以[使用静止图像构建给定长度的电影，](https://stackoverflow.com/search?q=movie%20images%20avfoundation%20answers:1%20isquestion:1&submit=search)`UIImageView`但在播放器顶部使用常规更容易。需要时隐藏/显示它。

**示例项目**：随意使用[我为支持我的答案而编写的代码](https://github.com/djromero/AVFoundationQuestions/tree/10648963)。

# django - 如何使用 IIS 和 Helicon Zoo 在生产 Windows 服务器上设置 virtualenv？

> ID：10648975
> 
> 赞同：1
> 
> 时间：2012-05-18T08:06:07.360
> 
> 标签：django, iis-7, virtualenv, helicontech

我们目前正在使用 Windows 2008 网络服务器和 IIS7 的实时服务器上测试 Django。为了在 IIS 上运行 Django 项目，我们使用 Helicon Zoo（带有 Django 的 Python 托管包）。
该计划是在该网络服务器上托管多个客户端，我们希望使用 virtualenv，因此我们可以为特定客户端升级 python 包，而不会影响其他客户端。

具体问题是；当我们在服务器上有多个虚拟环境时，我们如何在 IIS 下设置不同的 Django 站点以使用特定的虚拟环境？

提前感谢您的时间和答案，

埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:44:12.177

我不太清楚您是否需要在应用程序中使用不同版本的 Python 或不同版本的模块。

要拥有不同的 python 版本，您可以手动安装另一个 python，然后转到 applicationHost.config 文件，找到 . 引擎声明将在此处列出。创建“python.2.7.wsgi”的副本并编辑副本，将其命名为“python.2.5.wsgi”并更改可执行文件名称路径。这就是您可以声明更多具有不同版本和设置的引擎的方式。在这里您可以找到更多信息：[Helicon Zoo 模块文档](http://www.helicontech.com/zoo/module.htm)

对于 Python 模块，假设模块本地安装在客户端网站的 \python_modules\ 目录中。当您使用 Helicon Zoo 创建新的 Django 应用程序时，它默认配置为使用隔离环境，您只需要了解如何正确使用它并告诉您的客户遵循指南即可。您可以在本文中找到信息：[在 Windows 上运行 Django（带有性能测试）](http://www.helicontech.com/articles/running-django-on-windows-with-performance-tests/)

# gwt - GWT (eclipse) - 仅在欢迎页面中看到静态 html

> ID：10648978
> 
> 赞同：0
> 
> 时间：2012-05-18T08:06:13.763
> 
> 标签：gwt

当然非常基础，但我是服务器端/纯 Java 开发人员，刚开始使用 GWT ......

我的新 GWT 项目运行良好，直到它停止 - 现在提供了欢迎页面，但我只看到它上面的静态 html，没有别的。我在任何地方都没有看到任何错误，我可以看到 js 文件是从 html 构建和引用的，在 eclipse 的新项目中创建的示例 Web 应用程序也是如此 - 它是 Web 应用程序启动项目 - 我看到“输入你名称：”在浏览器上，仅此而已。

有人会拯救我的理智吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:45:49.913

当生成的文件中出现错误时，我遇到过几次（确实很少）。GWT 项目仅靠典型的“Project > Clean...”是不够的。这是我用来解决此问题的完整过程：

1.  备份您的文件。
2.  删除以下目录（通过 Eclipse 中的“Navigator”视图，或使用外部文件浏览器）
    *   gwt-unitCache
    *   战争/*我的模块名*
    *   战争/WEB-INF/类
    *   战争/WEB-INF/部署
3.  刷新项目（右键单击它，选择刷新）
4.  最后使用 Project > Clean...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:13:19.013

如果您真的没事并且没有抛出任何异常或错误，请尝试等待更长的时间。静态 HTML 会立即显示，但编译 Java 代码需要一些时间。

# sql - 创建一个触发器，它将在更新另一个表时在一个表中插入记录

> ID：10648983
> 
> 赞同：2
> 
> 时间：2012-05-18T08:06:27.273
> 
> 标签：sql, sql-server-2008, triggers

假设我有表 T1 和 T2

```
Columns of T1 -->Value
Columns of T2 -->OldValue NewValue 
```

我需要的是一个触发器，它会在更新 T1 时在 T2 中插入一条记录，我还需要知道旧值和新值，我以前从未使用过触发器，所以任何人都可以帮助我，我该怎么做创建此触发器。是否可能，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T08:40:25.323

好吧，您开始编写触发器`CREATE TRIGGER`：

```
CREATE TRIGGER **NameOfTheTriggerPlease**
… 
```

应该触发附加操作的表是`T1`这样的触发器应该定义`ON`为该表：

```
CREATE TRIGGER T1OnUpdate  /* that's just an example,
                              you can use a different name */
**ON T1**
… 
```

应该调用触发器的操作是`UPDATE`，时间是`AFTER`更新，所以……</p>

```
CREATE TRIGGER T1OnUpdate
ON T1
**AFTER UPDATE**
… 
```

现在是时候介绍触发器的*主体*了，即应该由触发器实际执行的语句。您使用关键字引入正文，`AS`然后是语句本身。

在您的情况下，只有一个声明`INSERT`，这是显而易见的。不太明显的是我们将如何访问旧值和新值。现在，SQL Server 为您提供了两个虚拟表`INSERTED`和`DELETED`，您可以很容易地猜到前者包含所有新值，而后者包含旧值。

这些表与分配给触发器的表具有相同的结构，即`T1`. 它们仅包含受`UPDATE`调用触发器的特定语句影响的行，这意味着可能不止一个。反过来，这意味着您需要在表中有一些主键或唯一列（或一组列）`T1`，您可以在触发器中使用它们来匹配已删除和插入的行。（实际上，您可能还需要您的`T2`表有一个引用`T1`的主键的列，以便您以后可以确定哪一行`T1`具有存储在 中的值`T2`。）

出于此答案的目的，我将假设`PK`在`T2`. 然后该`INSERT`语句可能如下所示：

```
CREATE TRIGGER T1OnUpdate
ON T1
AFTER UPDATE
AS
**INSERT INTO T2 (PK, OldValue, NewValue)
SELECT i.PK, i.Value, d.Value
FROM INSERTED i INNER JOIN DELETED d ON i.PK = d.PK** 
```

最后一件（但并非最不重要）的事情要记住：整个`CREATE TRIGGER`语句应该是批处理中唯一的一个，即`CREATE TRIGGER`关键字之前不应该有任何语句（但您可以在其中放置注释），同样，`AS`关键字之后的所有内容都被考虑触发器主体的一部分（`GO`例如，如果您在 SQL Server Management Studio 中运行脚本，则可以放置分隔符以指示语句的结尾）。

有用的阅读：

*   [创建触发器 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:49:42.503

我不会为你构建整个东西（没有乐趣，对吧？）但我可以为你指出正确的方向

```
create trigger logUpdate
on T1
After update
as
begin
  insert into T2...
  --here is just an example
  select * from deleted --the DELETED table contains the OLD values
  select * from inserted  --the INSERTED table contains the NEW values
end 
```

请记住，DELETED 和 INSERTED 是包含旧值和新值的内部表。在更新触发器上，它们都存在。在插入触发器上，DELETED 将为空，因为没有任何内容被删除。删除触发器上的相同逻辑，INSERTED 将为空

编辑：

回答您的问题：无论您更新多少字段，您的 DELETED 和 INSERTED 表都会影响所有行的所有列。当然，如果您只更新一列，则所有其他列在 DELETED 和 INSERTED 上的值都相同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:31:25.553

```
create trigger T_UPD_T1
on T1 FOR  update
as
insert into T2 select deleted.value, inserted.value from inserted, deleted 
```

# php - 已经开始的 PHP 会话

> ID：10648984
> 
> 赞同：89
> 
> 时间：2012-05-18T08:06:31.923
> 
> 标签：php, session

在我的 PHP 代码中，如果一个会话已经开始，并且我尝试开始一个新的会话，我会收到以下通知：

> 注意：会话已经开始 - 忽略 session_start()

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2012-05-18T08:09:20.783

尝试

```
<?php
    if(!isset($_SESSION)) 
    { 
        session_start(); 
    } 
?> 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-18T08:09:54.627

如果你想要一个新的，那么`session_destroy()`在开始之前做。要在启动之前检查它是否设置，请调用[`session_status()`](http://www.php.net/manual/en/function.session-status.php)：

```
$status = session_status();
if($status == PHP_SESSION_NONE){
    //There is no active session
    session_start();
}else
if($status == PHP_SESSION_DISABLED){
    //Sessions are not available
}else
if($status == PHP_SESSION_ACTIVE){
    //Destroy current and start new one
    session_destroy();
    session_start();
} 
```

我会避免检查全局`$_SESSION`而不是**~~调用~~** 该`session_status()`方法，因为 PHP 将此函数显式实现为：

> 通过新函数 session_status 公开会话状态 这是针对 (PHP >=5.4.0)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T08:52:23.313

**仅当您想销毁以前的会话时：**

```
<?php
    if(!isset($_SESSION)) 
    { 
        session_start(); 
    }
    else
    {
        session_destroy();
        session_start(); 
    }
?> 
```

**或者你可以使用**

```
unset($_SESSION['variable_session _data']) 
```

**销毁特定的会话变量。**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-02T18:27:57.267

```
session_status() === PHP_SESSION_ACTIVE ?: session_start(); 
```

封闭游戏

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-18T23:32:36.640

是的，您可以通过检查来检测会话是否已经在运行`isset($_SESSION)`。然而，最好的答案就是不要`session_start()`多次打电话。

它应该在你的脚本中很早就被调用，甚至可能是第一行，然后不再调用。

如果您在代码中的多个位置有它，那么您要求获得这种错误。把它剪下来，让它只在一个地方，并且只能被调用一次。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T08:09:54.323

您必须已经调用了会话开始，可能会通过包含再次调用？

```
if( ! $_SESSION)
{
    session_start();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-07T04:40:02.323

我在尝试修复 $_SESSION 的阻塞行为时遇到了这个问题。

[http://konrness.com/php5/how-to-prevent-blocking-php-requests/](http://konrness.com/php5/how-to-prevent-blocking-php-requests/)

> 会话文件保持锁定状态，直到脚本完成或手动关闭会话。

因此，默认情况下，页面应该以只读模式打开会话。但是一旦它以只读方式打开，就必须关闭并重新打开才能使其进入写入模式。

```
const SESSION_DEFAULT_COOKIE_LIFETIME = 86400;

/**
 * Open _SESSION read-only
 */
function OpenSessionReadOnly() {
    session_start([
                      'cookie_lifetime' => SESSION_DEFAULT_COOKIE_LIFETIME,
                      'read_and_close'  => true,    // READ ACCESS FAST
                  ]);
    // $_SESSION is now defined. Call WriteSessionValues() to write out values
}

/**
 * _SESSION is read-only by default. Call this function to save a new value
 * call this function like `WriteSessionValues(["username"=>$login_user]);`
 * to set $_SESSION["username"]
 *
 * @param array $values_assoc_array
 */
function WriteSessionValues($values_assoc_array) {
    // this is required to close the read-only session and 
    // not get a warning on the next line.
    session_abort();

    // now open the session with write access
    session_start([ 'cookie_lifetime' => SESSION_DEFAULT_COOKIE_LIFETIME ]);

    foreach ($values_assoc_array as $key => $value) {
        $_SESSION[ $key ] = $value;
    }
    session_write_close();  // Write session data and end session

    OpenSessionReadOnly(); // now reopen the session in read-only mode.
}

OpenSessionReadOnly();  // start the session for this page 
```

然后当你去写一些值时：

```
WriteSessionValues(["username"=>$login_user]); 
```

该函数采用一个 key=>value 对数组，以使其更加高效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-17T14:45:22.953

只需使用 if 语句

```
 if(!isset($_SESSION)) 
     { 
         session_start(); 
     } 
```

**或者**

使用返回当前会话状态的 session_status 检查会话状态，如果当前会话已经在工作，则如果会话不工作，则不返回任何内容启动会话

```
 session_status() === PHP_SESSION_ACTIVE ?: session_start(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-18T08:12:39.970

```
<?php
if ( session_id() != "" ) {
    session_start();
} 
```

基本上，您需要在创建另一个会话之前检查一个会话是否已启动；[*...更多阅读*。](https://php.net/manual/en/function.session-id.php)

另一方面，您选择在使用[`session_destroy()`](https://www.php.net/manual/en/function.session-destroy.php).

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-25T09:10:03.170

试试这个

```
if(!isset($_SESSION)){ 
    session_start();
} 
```

我建议你使用 ob_start(); 在开始任何 sesson 变量之前，这应该命令您浏览器缓冲区。

编辑：在 $_SESSION 之后添加了一个额外的 )

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-16T08:37:04.623

以上都不适合，如果没有在所有依赖于 $Session 变量的 php 文件中调用 session_start() ，它们将不会被包含在内。通知太烦人了，很快就填满了Error_log。我能找到的唯一可行的解​​决方案是这个......

```
 error_reporting(E_ALL ^ E_NOTICE);
    session_start(); 
```

一个不好的修复，但它的工作原理。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-23T22:48:47.510

它会更有效：

```
@session_start(); 
```

避免屏幕中的错误处理程序

最好的，

# abstract-class - 抽象类的 Java API 示例。无法正确理解这个概念，所以重新发布

> ID：10648988
> 
> 赞同：0
> 
> 时间：2012-05-18T08:06:53.097
> 
> 标签：abstract-class, java

我只是想让自己对 java api 感到满意。但我无法做到。不知道何时使用抽象类的目的。

考虑 java 库集合

```
 Collections

            List                                Set 
```

所有 3 都是接口，但最重要的是，尽管它们具有常见的功能，即 add、addAll、contains、containsAll 等。 List 以自己的方式实现，而 set 以另一种方式实现（讲述重复）。设置不允许重复列表允许重复。

所以我想说的是，当子实体和超实体没有共同特征时，我们必须去接口

更清楚地说，如果假设我们将 Collection 设置为抽象类，我们需要正确定义一些方法，而不仅仅是声明，但是 list 和 set 的功能是不同的（没有共同的定义），因此他们只是将其声明为接口并制定了强制规则 list 和 set 都应该实现这一点。

但是，如果有一些共同的功能，那么两者都将其保留为抽象类。

因此，从 Java 本身获取一个示例。让我们考虑一下抽象的 Number 类。让我们看看为什么现在不能使用界面完成！

```
**public abstract class Number
extends Object
methods are** 
```

**`byte byteValue()`** 以字节形式返回指定数字的值。

**`abstract double doubleValue()`** 以双精度形式返回指定数字的值。

**`abstract float floatValue()`** 以浮点数形式返回指定数字的值。

**`abstract int intValue()`** 以 int 形式返回指定数字的值。

**`abstract long longValue()`** 以 long 形式返回指定数字的值。

**`short shortValue()`** 以短整数形式返回指定数字的值。

现在这里的 byteValue 是一个非抽象方法，而其他方法 XXXValue 是抽象的。我们会看到Y？？？

字节值（）

```
// taken from Number class java doc api

public byte byteValue() 
```

以字节形式返回指定数字的值。这可能涉及舍入或截断。

```
And this byteValue() method is being overriden by all the other classes like Integer,Double,Float etc. 
```

相反，他们可以保持 byteValue() 也抽象！但他们力不从心。想知道他们为什么这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:49:01.747

`byteValue()`在所有 Number 子类中都没有**被覆盖。**例如，它不在 BigInteger、AtomicInteger、AtomicLong、BigDecimal 中。所有这些类都受益于 Number 类中的默认实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:52:03.460

接口无法为`byteValue()`和提供默认功能`shortValue()`。在这种情况下，默认行为是调用这些方法中的每一个`intValue()`与使用正确的强制转换调用相同。

此外，考虑`Number`is not `final`，其他人可以在他们自己的代码库中扩展它，并有效地继承这些方法的行为。

简单地说（非常），如果您只想指定方法签名（即所有方法都是`abstract`），您可以（并且可能应该）定义一个接口。

# php - mysql_num_rows() 在我的查询中抛出错误

> ID：10648989
> 
> 赞同：0
> 
> 时间：2012-05-18T08:06:58.083
> 
> 标签：php, mysql

我的查询不断给出

> 警告：mysql_num_rows() 期望参数 1 是资源，给定的布尔值

这 2 行的错误：

```
$num_pgs = mysql_num_rows($camp_pgs);
            $num_cid = mysql_num_rows($camp_id); 
```

在本声明中：

```
$userID=PageDB::getInstance()->get_user_id_by_name($_SESSION['user']);
            $result_pg=mysql_query("SELECT * FROM pages where campaign=" . $campaignID); 
            $result_cid=mysql_query("SELECT * FROM campaign where id=" . $campaignID); 
            $camp_pgs = mysql_query($result_pg);
            $camp_id = mysql_query($result_cid);
            $num_pgs = mysql_num_rows($camp_pgs);
            $num_cid = mysql_num_rows($camp_id);
            $i=0;
                        if ($num_pgs > 0){
                while ($row = mysqli_fetch_array($camp_pgs)):
                 $style = "";
                    if($i%2==0) 
```

我在这里想要实现的是匹配来自 2 个单独表的 2 列，如果 table.column 1 = table.column 2 然后在动态表中列出结果。查询的表是“pages”和“campaigns”，我试图分别将“campaignid”列与“id”列匹配。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:16:05.697

代替

```
 $num_pgs = mysql_num_rows($camp_pgs);
 $num_cid = mysql_num_rows($camp_id); 
```

和

```
$num_pgs = mysql_num_rows( $result_pg);
$num_cid = mysql_num_rows($result_cid); 
```

消除：

```
 $camp_pgs = mysql_query($result_pg);
 $camp_id = mysql_query($result_cid); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T08:14:37.927

```
$query = "SELECT * FROM pages, campaign WHERE campaign='".$campaignID."' AND campaign=id;";

// guess you have column "id" in both tables - then use this line
$query = "SELECT * FROM pages AS p, campaign AS c WHERE c.campaign='".$campaignID."' AND c.campaign=p.id;"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-18T08:16:25.357

试试下面的代码，

```
$userID=PageDB::getInstance()->get_user_id_by_name($_SESSION['user']);
        $result_pg=("SELECT * FROM pages where campaign=" . $campaignID); 
        $result_cid=("SELECT * FROM campaign where id=" . $campaignID); 
        $camp_pgs = mysql_query($result_pg);
        $camp_id = mysql_query($result_cid);
        $num_pgs = mysql_num_rows($camp_pgs);
        $num_cid = mysql_num_rows($camp_id);
        $i=0;
                    if ($num_pgs > 0){
            while ($row = mysqli_fetch_array($camp_pgs)):
             $style = "";
                if($i%2==0) 
```

# backbone.js - 如何从车把模板访问主干模型的计算字段？

> ID：10648990
> 
> 赞同：13
> 
> 时间：2012-05-18T08:07:04.763
> 
> 标签：backbone.js, handlebars.js

我想从模板访问我在模型（backbone.js）中实现的计算字段。我是否总是需要定义一个助手来做到这一点？

我认为问题与我将模型传递给模板的方式有关。如果我通过 this.model.toJSON() 我可以访问属性，但不能访问我在其中定义的函数。如果我直接传递 this.model，我可以访问该函数，但不能访问主干模型的属性。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T13:22:48.957

始终传递`this.model.toJSON()`给您的模板。

要获得计算值，您需要做的是`toJSON`在模型上覆盖您的方法。

```
 MyModel = Backbone.Model.extend({

  myValue: function(){
    return "this is a calculated value";
  },

  toJSON: function(){
    // get the standard json for the object
    var json = Backbone.Model.prototype.toJSON.apply(this, arguments);

    // get the calculated value
    json.myValue = this.myValue();

    // send it all back
    return json;
  }

}) 
```

现在您可以访问`myValue`由 返回的 JSON `toJSON`，这意味着您可以在视图中访问它。

正如您所提到的，另一个选项是构建辅助方法并将它们注册到 Handlebars。除非您有一些功能会根据模板的呈现方式和/或传递给模板的数据而发生变化，否则我不会为此烦恼。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-17T22:33:29.937

这是另一种可能性：（来自模型初始化）

```
initialize: function() {
        this.on("change", function () {
            this.set({ calculatedColumn: this.get("otherColumn") }, { silent: true });
        });
    }, 
```

[Backbone 中的计算属性](https://stackoverflow.com/questions/9642439/computed-properties-in-backbone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T15:54:17.030

我有同样的问题。@DerickBailey 是对的，当然，覆盖 toJSON 可以完成这项工作。但它也会泄漏到与服务器的通信中（参见 muu 对他的回答的评论）。

因此，最终，我构建了一个 Backbone 插件来专门处理将数据导出到模板，并以最少的麻烦做到这一点：[Backbone.Marionette.Export](https://github.com/hashchange/backbone.marionette.export)。它还处理嵌套结构，处理循环引用等。请参阅[文档](https://github.com/hashchange/backbone.marionette.export#readme)。

这是它的工作原理。将插件文件包含到您的项目中并声明

```
MyModel = Backbone.Model.extend({

  foo: function () {
      return "I am a calculated value";
  },

  exportable: "foo"    // <-- this is the one line you have to add

}); 
```

如果您是 Marionette 用户，那么此时您已经完成了。`foo`显示在您的模板中，就好像它是模型属性一样。

在普通的 Backbone 视图中，只需在渲染时调用`myModel.export()`或`myCollection.export()`代替它们的 toJSON 对应项。

对于接受参数的方法，有一个`onExport`处理程序。同样，示例在[docs](https://github.com/hashchange/backbone.marionette.export#readme)中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-17T22:15:11.440

最好的方法是将其添加到您的模型中：

```
function initialize() {
    this.set("calculatedColumn", function () { return this.otherColumn; });
} 
```

主干模型通常在“model.attributes”内部存储实际数据值。这就是为什么当您将模型直接传递给模板时，它只有直接添加到模型的函数而不是任何数据。如果你使用 model.toJSON() 它通常在主干中实现为 _.clone(model.attributes) （参见主干.js）。所以你有数据而不是直接添加到模型中的函数。这就是上述工作的原因 - 您在 model.attributes 上设置函数，而不是在模型对象本身上。不要直接引用model.attributes，使用model.get("calculatedColumn") 和model.set("calculatedColumn", ...)。

所以 model.get("calculatedColumn") 返回一个函数。如果您在车把中使用 {{calculatedColumn}}（假设您正在使用车把），它会显示函数返回的值。但是calculatedColumn 不会被发送到服务器，因为backbone 会同步（在backbone.js 中）对model.toJSON 执行JSON.stringify，而JSON.stringify 会忽略函数。如果您希望 JSON.stringify 不忽略该函数（因此，只要在模型上运行 toJSON 时，该函数就会转换为数据值 - 在视图渲染和模型同步期间），就像 @Derick Bailey 描述的那样覆盖 model.toJSON 。

此外，如果需要，您可以从 Backbone.Model 派生自己的 BaseModel 并覆盖 .toJSON 并从 BaseModel 派生所有模型。然后，您需要一个通用版本的 .toJSON 可以应用于任何模型。

# facebook - 如何使用 JS SDK 进行 FQL 查询？

> ID：10648993
> 
> 赞同：2
> 
> 时间：2012-05-18T08:07:19.503
> 
> 标签：facebook, facebook-javascript-sdk, facebook-fql

这是我的代码，但不起作用：

```
FB.api(
        {
            method: 'fql.query',
            query: 'SELECT uid, first_name, last_name FROM user WHERE uid=100002306311953'
        },
        function(data) {
            alert(data.uid);
        }
);
                }); 
```

我在警报中得到“未定义”。为什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T08:31:32.583

欢迎来到 SO！

您可以通过传递 fql.query 方法和查询来使用 FB.api 函数，

返回当前用户名称的简单查询：

```
FB.api({
    method: 'fql.query',
    query: 'SELECT uid, name FROM user WHERE uid = me()'
}, function(data) {
    console.log(data);
    var res = data[0].name;
    alert(res);
    }
); 
```

FB 文档：[https ://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

# mysql - MySQL从一张表中选择记录，其他表中不存在

> ID：10648995
> 
> 赞同：0
> 
> 时间：2012-05-18T08:07:26.313
> 
> 标签：mysql, select, not-exists

我有 2 张桌子：

```
TABLE customer_service_provider
==================================
id   | customer | service_provider
==================================
1    | 1        | 1
2    | 1        | 2
3    | 1        | 3
4    | 2        | 1
5    | 2        | 2
6    | 3        | 1
7    | 4        | 1
8    | 4        | 2
9    | 4        | 3
===================================

TABLE service_provider
======================
id     | Name
======================
1      | Company1
2      | Company2
3      | Company3
====================== 
```

我需要从表`customer_service_provider`（字段`customer`和`service_provider`）中获取`service_provider`不存在于表`customer_service_provider`中但存在于`service_provider`表中的信息。

结果应如下所示：

```
customer   |  service_provider
==============================
2          | 3
3          | 2
3          | 3
============================== 
```

# 解决了：

```
选择
    不同的 sp.id，
    csp.customer
从
    service_provider sp,
    customer_service_provider csp
在哪里
    sp.id 不在（选择 csp2.service_provider
                  FROM customer_service_provider csp2
                  其中 csp2.customer = csp.customer)
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:19:53.767

试试这个：

```
SELECT c.customer, s.id
FROM customer_service_provider c, service_provider s
WHERE NOT EXISTS (
    SELECT * FROM customer_service_provider c2
    WHERE c2.customer = c.customer AND c2.service_provider = s.id
) 
```

或者，更有效：

```
SELECT c.customer, s.id
FROM customer_service_provider c, service_provider s
LEFT OUTER JOIN customer_service_provider c2 ON c2.customer = c.customer AND c2.service_provider = s.id
WHERE c2.id IS NULL 
```

我没有测试过，告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:24:30.720

我想你也有一张桌子和顾客在一起。在这种情况下，请使用以下内容：

```
select customer.id, service_provider.id 
from customer, service_provider 
left join customer_service_provider on customer.id=customer_service_provider.customer and service_provider.id=customer_service_provider.service_provider
where customer_service_provider.id IS NULL; 
```

基本上，返回客户和服务提供商的所有组合。`LEFT JOIN`在 customer_service_provider 表上执行此操作；并且只保留没有匹配记录的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:20:29.253

```
选择
    不同的 sp.id，
    csp.customer
从
    service_provider sp,
    customer_service_provider csp
在哪里
    sp.id 不在（选择 csp2.service_provider
                  FROM customer_service_provider csp2
                  其中 csp2.customer = csp.customer)

```

# multithreading - 从创建 UI 的同一线程更新 VCL。为什么？

> ID：10648996
> 
> 赞同：8
> 
> 时间：2012-05-18T08:07:28.550
> 
> 标签：multithreading, delphi, thread-safety

我知道我必须调用 Synchronize 从没有创建控件或向窗口发送消息的线程更新 vcl。

我经常听到“线程不安全”这个词，但我找不到关于正在发生的事情的实际解释。

我知道应用程序可能会因访问冲突而崩溃，但我还是不知道为什么？

请阐明这个话题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T15:16:44.477

VCL UI 控件中线程不安全的最大原因之一是`TWinControl.Handle`属性 getter。它不仅仅是控件的简单只读访问器`HWND`。`HWND`如果它还不存在，它也会创建。如果工作线程`Handle`在不存在的情况下读取该属性`HWND`，它会在工作线程上下文中创建一个新`HWND`的，这很糟糕，因为`HWND`s 与创建线程上下文相关联，这将导致拥有控制在最好的情况下几乎无法操作，因为 Windows 消息控件将不再通过主消息循环。但更糟糕的是，如果主线程在`Handle`工作线程读取相同属性的同时（例如，如果主线程动态地重新创建`Handle``HWND`出于多种原因），在线程上下文创建被分配为 new的线程之间存在竞争条件，并且如果两个线程最终都创建 new s 但只能保留一个`Handle`线程，则可能存在潜在的句柄泄漏`HWND`被泄露。

线程不安全的另一个问题是 VCL 的`MakeObjectInstance()`函数，VCL 内部使用该函数将`TWinControl.WndProc()`非静态类方法分配为`TWinControl.Handle`窗口的消息过程，以及将任何`TWndMethod`类型的对象方法分配为由`HWND`创建的消息过程`AllocateHWnd()`功能（`TTimer`例如使用）。 `MakeObjectInstance()`对那些不受多线程并发访问保护的内存内容进行了相当多的内存分配/缓存和旋转。

*如果*您可以确保`Handle`提前分配控件，并且*如果*您可以确保主线程`Handle`在工作线程运行时永远不会重新创建它，那么*可以*安全地从工作线程向该控件发送消息，而无需使用`Synchronize()`. 但这是不可取的，工作线程必须考虑的因素太多了。这就是为什么最好只在主线程中完成**所有UI 访问。**这就是 VCL UI 系统的用途。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-18T12:19:12.077

关于 Windows 中的 GDI 线程安全，[请参阅此参考文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684256(v=vs.85).aspx)。

它明确指出您可以从多个线程**安全地访问**句柄，*但*不应同时进行。您需要保护对 GDI 句柄的访问，例如使用临界区。

请记住，与大多数 Windows 句柄一样，GDI 句柄是映射到（在较新的 Windows 下，为了 64 位兼容性）的内部结构的*指针。*就像在多线程计算中一样，同时访问相同的内容可能是问题的根源，这些问题很难识别和修复。`integer``NativeUInt`

VCL 本身的 UI 部分从一开始就不是线程安全的，因为它依赖于非线程安全的 Windows API。例如，如果您在一个线程中释放一个 GDI 对象，而另一个线程仍需要该对象，您将面临潜在的 GPF。

Embarcadero（此时）本可以使 VCL 线程安全，通过关键部分序列化所有 UI 访问，但它可能增加了复杂性，并降低了整体性能。请注意，即使是 Microsoft .Net 平台（在*WinForms*和*WPF*中）也需要用于 UI 访问的专用线程 AFAIK。

因此，要从多个线程刷新 UI，您有几种模式：

1.  使用`Synchronize`来自线程的调用；
2.  从后台线程发送 GDI 自定义消息（请参阅 参考资料`WM_USER`）以通知 UI 线程需要刷新；
3.  采用*无状态*方法：UI 会不时地从逻辑层刷新其内容（使用计时器或当您按下一些可能会更改数据的按钮时）。

从我的角度来看，对于大多数 UI，我更喜欢选项 2，而对于远程客户端-服务器访问，我更喜欢选项 3（可以与选项 2 混合使用）。因此，您不必希望从服务器端触发 UI 的某些更新事件。在 HTTP/AJAX [RESTful](https://stackoverflow.com/questions/3959851/using-rest-with-delphi)世界中，这确实是有意义的。选项 1 有点慢，恕我直言。在所有情况下，选项 2 和 3 期望一个清晰的[n 层分层架构](http://en.wikipedia.org/wiki/Multitier_architecture)，其中逻辑和 UI 没有混合：但无论如何，对于任何严肃的开发来说，这是一个很好的模式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T09:17:07.827

带有句柄的 Windows 控件不是线程安全的（即它们不能被两个不同的线程同时安全地访问），Delphi 封装了 Windows 控件以提供 VCL 控件。由于控件是由主 GUI 线程访问的，因此如果您正在执行另一个线程，则需要不理会它们。

# c# - 触发器中的只读附加属性 (WPF)

> ID：10648997
> 
> 赞同：6
> 
> 时间：2012-05-18T08:07:31.203
> 
> 标签：c#, wpf, triggers, readonly, attached-properties

我对只读附加属性有疑问。我是这样定义的：

```
public class AttachedPropertyHelper : DependencyObject
{

    public static readonly DependencyPropertyKey SomethingPropertyKey = DependencyProperty.RegisterAttachedReadOnly("Something", typeof(int), typeof(AttachedPropertyHelper), new PropertyMetadata(0));

    public static readonly DependencyProperty SomethingProperty = SomethingPropertyKey.DependencyProperty;

} 
```

我想在 XAML 中使用它：

```
<Trigger Property="m:AttachedPropertyHelper.Something" Value="0">
                        <Setter Property="FontSize" Value="20"/>
                    </Trigger> 
```

但是编译器不想使用它。结果，我有2个错误：

> 在“ReadonlyAttachedProperty.AttachedPropertyHelper”类型上找不到样式属性“Something”。第 11 行位置 16。
> 
> 在类型 'TextBlock' 中找不到属性 'Something'。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T14:15:34.110

我不知道您的*只读附加属性*是否有什么特别之处，但是如果您以默认方式声明它，它会起作用：

```
public class AttachedPropertyHelper : DependencyObject
{
    public static int GetSomething(DependencyObject obj)
    {
        return (int)obj.GetValue(SomethingProperty);
    }

    public static void SetSomething(DependencyObject obj, int value)
    {
        obj.SetValue(SomethingProperty, value);
    }

    // Using a DependencyProperty as the backing store for Something. This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SomethingProperty =
        DependencyProperty.RegisterAttached("Something", typeof(int), typeof(AttachedPropertyHelper), new UIPropertyMetadata(0));
} 
```

**编辑**

如果您想要与只读附加属性相同，请将其更改为：

```
public class AttachedPropertyHelper : DependencyObject
{
    public static int GetSomething(DependencyObject obj)
    {
        return (int)obj.GetValue(SomethingProperty);
    }

    internal static void SetSomething(DependencyObject obj, int value)
    {
       obj.SetValue(SomethingPropertyKey, value);
    }

    private static readonly DependencyPropertyKey SomethingPropertyKey =
        DependencyProperty.RegisterAttachedReadOnly("Something", typeof(int), typeof(AttachedPropertyHelper), new UIPropertyMetadata(0));

    public static readonly DependencyProperty SomethingProperty = SomethingPropertyKey.DependencyProperty;
} 
```