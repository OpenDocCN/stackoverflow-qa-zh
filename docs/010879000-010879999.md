# StackOverflow 问答 10879000-10879999

# asp.net - 外键在动态数据的下拉列表中显示错误的字段

> ID：10879000
> 
> 赞同：0
> 
> 时间：2012-06-04T09:21:42.957
> 
> 标签：asp.net, asp.net-dynamic-data

动态数据中的外键字段显示下拉列表中子表的下一个字符字段。我怎么能告诉它显示另一个字段？

假设这些表： Personnel(PKPersonnelID, PersonnelName, FKDepartmentID) Department(PKDepartmentID, Description, Department)

Personnel 表中的 FKDepartmentID 是 Department 表的外键。当我想向 Personnel 插入新记录时，动态数据会向我显示 FKDepartmentID 的 DropDownList。在此 DropDownList 中，显示了 Description 字段中的值（据我所知，它显示了主键之后的第一个 char 字段）。但我想显示部门字段值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:03:56.773

您将数据与下拉列表绑定的代码，您能否在这里显示它，假设您的下拉列表 ID 是drpDepartment，而不是让您的绑定如下：

```
drpDepartment.DataTextField = "Department";
drpDepartment.DataValueField = "PKDepartmentID";
drpDepartment.DataSource = YOURCOLLECTION OR DATASOURCE;
drpDepartment.DataBind(); 
```

# google-chrome - CSS框模型问题：box-sizing + 100% height + border + inline-block

> ID：10879003
> 
> 赞同：3
> 
> 时间：2012-06-04T09:21:54.810
> 
> 标签：google-chrome, css

看看这个小提琴：http: [//jsfiddle.net/WTcgt/](http://jsfiddle.net/WTcgt/)

为什么BOX1被BOX2的边框量下推？这是一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:35:10.117

Internet Explorer、Opera 和 Chrome 支持 box-sizing 属性。

Firefox 支持另一种选择，即`-moz-box-sizing`属性。

Safari 支持另一种选择，即`-webkit-box-sizing`属性。

这是工作示例[http://jsfiddle.net/WTcgt/2/](http://jsfiddle.net/WTcgt/2/)

这是**inline-block**的行为：

> 内联块被内联放置（即与相邻内容在同一行），但它的行为类似于块。

用来`vertical-align:top`避免这个问题。如果我们不使用 vertical-align 属性，那么元素会根据相邻元素在同一行中对齐。欲了解更多信息，请阅读[http://www.impressivewebs.com/inline-block/](http://www.impressivewebs.com/inline-block/)和[http://www.brunildo.org/test/inline-block.html](http://www.brunildo.org/test/inline-block.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:24:27.670

您的框是*内联块*框，而不仅仅是常规*内联*框，因此它们的边框在这方面充当“填充”。

需要明确的是，由于 BOX2 上有一个顶部边框，它会将 BOX2 的内容区域向下推（尽管 ! 可能暗示了什么，但它*不会*渗入内容区域`box-sizing: border-box`）。这会导致同一行上所有其他内联块框的内容区域跟随，如[规范](http://www.w3.org/TR/CSS21/visudet.html)中所述（强调我的）：

> **内联非替换框的垂直内边距、边框和边距从内容区域的顶部和底部开始，与**['line-height'](http://www.w3.org/TR/CSS21/visudet.html#propdef-line-height)无关。但在计算行框高度时只使用[“行高” 。](http://www.w3.org/TR/CSS21/visudet.html#propdef-line-height)

# tfs - 将签入与任务关联时出现 TFS 错误

> ID：10879004
> 
> 赞同：1
> 
> 时间：2012-06-04T09:22:04.530
> 
> 标签：tfs, team-explorer-everywhere

我使用 TFS Eclipse 插件来管理 Java 源代码，每次尝试签入文件时都会遇到问题。

我们有一个策略，现在每次我尝试将更改集与任务相关联然后签入时，每次检查都必须与任务相关联，我收到以下错误：![在此处输入图像描述](../Images/03e663822887f0f8a3a26f1514a6ff29.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:00:28.433

如果您使用的是安装了 Project Server Integration 的 TFS 服务器，则需要使用[Team Explorer Everywhere 10.0 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=25125)（或更高版本）。

# orm - osv_memory 中的相关字段不起作用

> ID：10879008
> 
> 赞同：0
> 
> 时间：2012-06-04T09:22:41.037
> 
> 标签：orm, relationship, wizard, openerp

我正在 OpenERP 5 中构建一个**osv_memory**向导。

但是，我似乎无法将**相关**字段添加到向导中。

```
'current_invoice_id': fields.many2one(
                          'account.invoice', 
                          'Invoice'
                      ),
'current_amount_total': fields.related(
                            'current_invoice_id',
                            'amount_total',
                            type='float',
                            store=False,
                            string='Amount'
                        ), 
```

难道我做错了什么？还是 OpenERP 5 不支持它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:53:30.833

我们最终放弃了`osv_memory`我们的 OpenERP 5.0 模块。`fields.many2one()`从`osv_memory`桌子到普通桌子，我们肯定遇到了问题，所以你可能会遇到同样的问题。

好消息是这`osv_memory`似乎在我们对 OpenERP 6.0 的测试中运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:03:11.020

尝试使用*fields.one2many*而不是*fields.related*。查看[关系类型](http://doc.openerp.com/v5.0/developer/2_5_Objects_Fields_Methods/field_type.html#relational-types)

# android - 从android上的Web服务获取请求的正确方法

> ID：10879010
> 
> 赞同：3
> 
> 时间：2012-06-04T09:22:52.600
> 
> 标签：android, service, web, android-asynctask, asynctaskloader

我只是想知道哪种方法是使用 HTTP 请求从 Web 服务中获取数据的最佳方式。使用 AsyncTask 或 AsyncTaskLoader

我在 Activity 上使用 LoaderManager 使用 AsyncTaskLoader，但是在配置更改尤其是方向更改时遇到问题。它阻止加载程序调用 OnFinish()。

我还尝试过更灵活和独立的 AsyncTask，它在我之前仍在 2.2 上的项目上运行良好？由于在 3.0---4.0 中更推荐使用 AsyncTaskLoader，我会很感激您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:12:57.487

对于 AsyncTask 在下面写下你想从哪里开始任务
`new asnktask(youractivity.this).execute();` 并写这个类

```
private class asnktask extends AsyncTask<Void, Void, Integer> {

    private Context context;    
    private ProgressDialog mProgressDialog;

    public asnktask(Context _context) {
        context =_context;
    }

    @Override
    protected void onPreExecute() {
        mProgressDialog = new ProgressDialog(this.context);
        mProgressDialog.setMessage("Loading wait.....");
        mProgressDialog.setIndeterminate(true);
        mProgressDialog.setCancelable(true);
        mProgressDialog.show();
    }

    @Override
    protected Integer doInBackground(Void... params) {
//Do stuff of getting web service response
        return 1;
    }

    @Override
    protected void onPostExecute(Integer result) {
        mProgressDialog.dismiss();
}
    } 
```

//完毕！！！！！！！！

# jquery - 如何使单击事件在多个选择器上起作用？

> ID：10879011
> 
> 赞同：2
> 
> 时间：2012-06-04T09:22:55.453
> 
> 标签：jquery

我有这个代码：

```
 $("#menu").on('click', 'a', function (event) {

            javascript code
            ...
        });

        $("#home").on('click', 'a', function (event) {

            javascript code
            ...
        }); 
```

有什么方法可以将这两者结合起来，因为两者的 javascript 代码是相同的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T09:23:57.217

```
 $("#menu, #home").on('click', 'a', function() {
    //  javascript code
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:24:44.770

是的，像这样

```
$("#menu, #home").on('click', 'a', function (event) {

            javascript code
            ...
        }); 
```

# ruby - 从文本文件中搜索字符串并删除该行 RUBY

> ID：10879014
> 
> 赞同：3
> 
> 时间：2012-06-04T09:23:06.487
> 
> 标签：ruby

我有一个包含一些数字的文本文件，我想搜索一个特定的数字然后删除该行。这是文件的内容

```
 83087
    308877
    214965
    262896
    527530 
```

因此，如果我想删除 262896，我将打开文件，搜索字符串并删除该行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:10:56.530

您需要打开一个临时文件来写入要保留的行。类似这样的事情应该这样做：

```
require 'fileutils'
require 'tempfile'

# Open temporary file
tmp = Tempfile.new("extract")

# Write good lines to temporary file
open('sourcefile.txt', 'r').each { |l| tmp << l unless l.chomp == '262896' }

# Close tmp, or troubles ahead
tmp.close

# Move temp file to origin
FileUtils.mv(tmp.path, 'sourcefile.txt') 
```

这将运行为：

```
$ cat sourcefile.txt
83087
308877
214965
262896
527530
$ ruby ./extract.rb 
$ cat sourcefile.txt
83087
308877
214965
527530
$ 
```

您也可以仅在内存中执行此操作，而无需临时文件。但是根据您的文件大小，内存占用量可能很大。上述解决方案一次只在内存中加载一行，因此它应该可以在大文件上正常工作。

- 希望能帮助到你 -

# regex - 匹配的正则表达式没有找到一个词，然后找到另一个

> ID：10879016
> 
> 赞同：0
> 
> 时间：2012-06-04T09:23:10.043
> 
> 标签：regex

我似乎无法弄清楚什么是注册。表达式。符号符合我的需要：

我在 DEBUG() 宏中包装了一些调试代码......

例如，要在日志级别 1 中打印一些调试输出，我使用以下代码位：

```
DEBUG_LVL_1(printf("some text");) 
```

不过，情况并非总是如此——有时我的 printf 语句没有宏包装器。我想对这些情况进行搜索和替换......即没有 DEBUG_LVL_ 宏，但存在 printf 语句......

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:32:33.043

如果您选择的语言/工具支持前瞻，您可以使用

```
^(?!.*DEBUG_LVL_1).*printf 
```

`(?!^.*DEBUG_LVL_1)`是一个[否定的前瞻断言](http://www.regular-expressions.info/lookaround.html)`DEBUG_LVL_1`，如果在字符串中的某处找到，这将失败。

所以这个正则表达式将匹配`printf`，但`DEBUG_LVL_1`前提是同一行中没有某处。

[在 Regexr 上](http://regexr.com?315dr)查看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:34:21.770

给你`^((?!DEBUG_LVL_1)printf.*)$`顺便说一句，使用这个网站[http://rubular.com](http://rubular.com)来检查你的正则表达式

# java - WEKA 中的集群评估是什么？

> ID：10879018
> 
> 赞同：7
> 
> 时间：2012-06-04T09:23:22.760
> 
> 标签：java, machine-learning, data-mining, weka

当我们说我们正在评估 WEKA frmework 中的集群时，我们的意思是什么？聚类是一种对对象进行分组的无监督方法。当我们说我们想要评估结果时，我们的意思是什么？此外，除此之外，当我们说我们在训练数据本身之上评估集群时，这是什么意思？

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T10:40:35.337

如[本页](http://www.cs.ccsu.edu/~markov/ccsu_courses/DataMining-Ex3.html)所述：

**评估** Weka 评估集群的方式取决于您选择的集群模式。有四种不同的集群模式可用（作为集群模式面板中的按钮）：

1.  `Use training set`（默认）。生成聚类后，Weka 根据聚类表示将训练实例分类为聚类，并计算每个聚类中实例的百分比。例如，上述由 k-means 生成的聚类显示集群 0 中的 43%（6 个实例）和集群 1 中的 57%（8 个实例）。
2.  如果集群表示是概率性的（例如对于 EM），In`Supplied test set`或Weka 可以在单独的测试数据上评估集群。`Percentage split`
3.  `Classes to clusters evaluation`. 在这种模式下，Weka 首先忽略类属性并生成聚类。然后在测试阶段，它根据每个集群中类属性的多数值将类分配给集群。然后它根据这个分配计算分类错误，并显示相应的混淆矩阵。k-means 的一个例子如下所示。

# r - 绘制 R，曲线平滑

> ID：10879025
> 
> 赞同：-1
> 
> 时间：2012-06-04T09:24:02.087
> 
> 标签：r, plot, smooth, curve

在带有点的图中，我也有一些曲线。我使用该`curve`函数来获得指数函数：

```
curve (fishA$parameterB * (x ^ fishA$parameterAlpha), 
       from = 50, to = 80, n = 100, add = TRUE) 
```

曲线不平滑。我该如何改进它？也许平滑不是正确的词，但曲线并不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:09:59.540

您没有提供参数值，因此我无法重现您的输出。我的猜测是你需要在曲线函数调用中增加 n 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:35:48.113

我有一些类似的问题。我只是使用 excel 来平滑数据并将平滑线添加到 R 中的数据帧中。无论如何，panel.tskernelm （额外的格子）可能会对您有所帮助。

# python - Python中的直方图

> ID：10879026
> 
> 赞同：0
> 
> 时间：2012-06-04T09:24:02.557
> 
> 标签：python, numpy, matplotlib

我有一个数字列表。列表就像 [0,0,1,0,1 .... ] 。目前它只有二进制数字，但后来它也可以有十进制数字。我想在列表中绘制这个序列的直方图。当我使用 matplotlib 库的标准 hist 函数时，我只得到两个条。它计算全零和全一，并向我显示带有两个条的直方图。但我想以不同的方式进行绘图。我想要一个条数 = 列表的长度和每个条的高度 = 列表中的值（位置 = bar#）。

这是代码：

```
 def plot_histogram(self,li_input,):
     binseq = numpy.arange(len(li_input))
     tupl = matplotlib.pyplot.hist(li_input,bins=binseq)
     matplotlib.pyplot.show() 
```

li_input 是上面讨论的列表。

我可以用一种讨厌的方式来做，比如：

```
li_input_mod = []
   for x in range(len(li_input)):
   li_input_mod += [x]*li_input[x] 
```

然后绘制它，但我想要更好的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:49:48.940

您描述的行为是直方图的工作方式；它显示了值的分布。听起来你想创建一个[条形图](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.bar)：

```
import matplotlib.pyplot as plt

x = [0,0,1,0,1,1,0,1,1,0,0,0,1]
plt.bar(range(len(x)), x, align='center') 
```

这将产生：

![条形图](../Images/5df915bb44fb8e98983af51dd2227001.png)

# css - css不显示图像，除非 我有一些用于评级系统的 CSS 精灵：http: //i.imgur.com/qeb2b.png 加载拇指时 < 问问题 问问题 2012-06-04T09:24:08.373 35 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一些用于评级系统的 CSS 精灵：http: //i.imgur.com/qeb2b.png 加载拇指时 .thumb-down { background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -13px; width: 15px; height: 16px; } .thumb-up { background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -33px; width: 15px; height: 16px; } 我可以让拇指出现的唯一方法是如果我这样做： Was this review helpful? [     ](#) | [     ](#) 如果我删除所有， 那么拇指就会消失。如果我只留下一个 ，那么它会显示精灵的部分视图。 如何在不需要的情况下显示精灵 ? peewee是一个用 Python 编写的小型 ORM。它提供了一个基于 SQL 的轻量级查询接口，并在查询时使用 SQL 概念，如连接和 where 子句。它支持 sqlite、mysql 和 postgresql。 css 4 4 回答 4 This answer is useful 1 通过使用float:left： .thumb-down { background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -13px; width: 15px; height: 16px; float: left; /* OR float:right, depending on what you need */ } .thumb-up { background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -33px; width: 15px; height: 16px; float: left; } 于 2012-06-04T09:26:01.430 回答 This answer is useful 1 由于链接是内联元素，您无法为它们指定宽度和高度。它们仅从内容中获取大小，这就是空格赋予它们大小的原因。 我认为您使用的最佳选择是使链接内联块元素。这样它们是块元素，因此它们可以具有特定的宽度和高度，但它们仍然是文本流中的内联元素，因此您不必更改标记。 .thumb-down { background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -13px; display: inline-block; width: 15px; height: 16px; } .thumb-up { background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -33px; display: inline-block; width: 15px; height: 16px; } 于 2012-06-04T09:30:28.800 回答 This answer is useful 0 图像是背景。但是要使背景可见，元素必须具有一定的高度和宽度。在您的情况下，空标签没有高度和宽度。你应该让它显示：块 于 2012-06-04T09:26:12.203 回答 This answer is useful 0 只需display: inline-block;在您的两个 CSS 类中使用。 于 2012-06-04T09:30:11.040 回答 Related 1 c# - IE9 访问时，Webforms 应用程序在 IFrame 中失败 1 php - 如何让用户的系统时钟时间显示在 Web 应用程序中？ 2 xcode - ARC：新文档是否需要有一个强有力的指针？ 2 svn - 如何使用 Cygwin 从 Windows 下载 Google 代码项目？ 1 java - 更改 ftp 上传位置 1 c++ - 替换 .txt 文件中的文本 (C++) 1 path-finding - 是否可以创建具有零成本路径值的 A* 可接受启发式？ 4 spring - 在 Spring 中设置 Hibernate+C3P0 1 c++ - 为一个键声明一个具有四个值的多重映射 1 android - 从 Android 调用时，Google 方向 API 返回 REQUEST_DENIED Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10879027
> 
> 赞同：0
> 
> 时间：
> 
> 标签：css

我有一些用于评级系统的 CSS 精灵：http: [//i.imgur.com/qeb2b.png](http://i.imgur.com/qeb2b.png)

加载拇指时

```
 .thumb-down {
    background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -13px;
    width: 15px;
    height: 16px;
 }

 .thumb-up {
    background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -33px;
    width: 15px;
    height: 16px;
 } 
```

我可以让拇指出现的唯一方法是如果我这样做：

`Was this review helpful? <a href="#" class="thumb-up rating">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a> | <a href="#" class="thumb-down rating">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>`

如果我删除所有，`&nbsp;`那么拇指就会消失。如果我只留下一个`&nbsp;`，那么它会显示精灵的部分视图。

如何在不需要的情况下显示精灵`&nbsp;?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:26:01.430

通过使用`float:left`：

```
 .thumb-down {
    background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -13px;
    width: 15px;
    height: 16px;
    float: left;  /* OR float:right, depending on what you need */
 }

 .thumb-up {
    background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -33px;
    width: 15px;
    height: 16px;
    float: left;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:30:28.800

由于链接是内联元素，您无法为它们指定宽度和高度。它们仅从内容中获取大小，这就是空格赋予它们大小的原因。

我认为您使用的最佳选择是使链接内联块元素。这样它们是块元素，因此它们可以具有特定的宽度和高度，但它们仍然是文本流中的内联元素，因此您不必更改标记。

```
 .thumb-down {
    background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -13px;
    display: inline-block;
    width: 15px;
    height: 16px;
 }

 .thumb-up {
    background: url('http://i.imgur.com/qeb2b.png') no-repeat -126px -33px;
    display: inline-block;
    width: 15px;
    height: 16px;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:26:12.203

图像是背景。但是要使背景可见，元素必须具有一定的高度和宽度。在您的情况下，空标签没有高度和宽度。你应该让它显示：块

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:30:11.040

只需`display: inline-block;`在您的两个 CSS 类中使用。

# jquery - Jquery（ajax 请求）到 WCF。WCF 获取未初始化的数据参数

> ID：10879028
> 
> 赞同：1
> 
> 时间：2012-06-04T09:24:08.730
> 
> 标签：jquery, asp.net, wcf

嗨，我有下一个 WCF 服务。

```
[OperationContract]     
[WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
//[WebInvoke(UriTemplate = "GetStores?dataViewID={dataViewID}&filter={filter}&extent={extent}", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json,)]
string GetStores(int dataViewID, string filter, MapExtent extent);

[DataContract]
public class MapExtent
{
    [DataMember]
    public double XMax { get; set; }

    [DataMember]
    public double XMin { get; set; }

    [DataMember]
    public double YMax { get; set; }

    [DataMember]
    public double YMin { get; set; }
} 
```

接下来是 jQuery 部分

```
//var mapextend = { XMax: 1.0, XMin: 1.0, YMax: 10.5, YMin: 4.5 };
var paramData = {"dataViewID":12, "filter":"", extent : {"XMax": 1.0, "XMin": 1.0, "YMax": 10.5, "YMin": 4.5} };
$.ajax({
    url: serviceurl + 'GetStores',
    type: 'GET',
    contentType: 'application/json',
    data: paramData,
    success: function (result) {
        alert(result);                    
        },
    error: function (xhr) {
        alert(xhr);
        }
    }); 
```

配置看起来像

```
<system.serviceModel>

    <bindings>
      <webHttpBinding>
         <binding name="webBinding"></binding>
      </webHttpBinding>           
    </bindings>

    <behaviors>

      <endpointBehaviors>
        <behavior name="jsonBehavior">
          <enableWebScript/>
        </behavior>
      </endpointBehaviors>

      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
      </serviceBehaviors>

    </behaviors>

    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>

    <services>           
      <service behaviorConfiguration="ServiceBehavior" name="MyService">
        <endpoint address="" binding="webHttpBinding"  bindingConfiguration="webBinding" contract="IMyService" behaviorConfiguration="jsonBehavior" />        
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
  </system.serviceModel> 
```

当 ajax 调用此服务时，它会调用但所有参数都没有得到任何值。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:34:41.947

尝试这个：

**jQuery部分：**

```
//var mapextend = { XMax: 1.0, XMin: 1.0, YMax: 10.5, YMin: 4.5 };
        var paramData = {"dataViewID":12, "filter":"", extent : {"XMax": 1.0, "XMin": 1.0, "YMax": 10.5, "YMin": 4.5} };
        $.ajax({
            url: serviceurl + 'GetStores',
            type: 'POST',
            contentType: "application/json",
            dataType: "json",
            data: JSON.stringify(paramData),
            success: function (result) {
                alert(result);                    
            },
            error: function (xhr) {
                alert(xhr);
            }
        }); 
```

# sql-server-2005 - nhibernate，sql server日期时间比较失败

> ID：10879031
> 
> 赞同：2
> 
> 时间：2012-06-04T09:24:18.717
> 
> 标签：sql-server-2005, nhibernate, nhibernate-criteria

在休眠中，我使用以下来比较日期

```
Restrictions.Eq(Projections.Property("SubmittedDate"), request.Data.SubmittedDateTime.Value) 
```

在当地环境中它的工作。但在其他环境中它不返回结果。

```
SubmittedDateTime? is nullable 
```

我是否需要在映射文件中的某处提及可为空。

为此我需要对代码进行任何更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:20:54.820

斯蒂芬，

您的问题可能是（或曾经是）您的生产服务器启用了 ANSI 空值 [1]：http: [//msdn.microsoft.com/en-us/library/ms188048.aspx](http://msdn.microsoft.com/en-us/library/ms188048.aspx)。在这种情况下，一个 NULL 值与另一个不同。例如

```
DECLARE @a INT,
        @b INT

SELECT @a = null, @b=null

IF(@a=@b)
BEGIN
    SELECT 'Equal'
ELSE
    SELECT 'NOT Equal'
END 
```

如果您在 ANSI NULLS ON 的环境中运行以下代码，您会看到“不等于”

也可能是您的日期设置了时间组件；

2012-09-26 22:16:00.000 <> 2012-09-26

为此，您需要使用 DATEDIFF(D, Date1, Date2)=0。

NHibernate 不支持此功能，因此您需要创建（或查找）自定义 Icriterion

# java - 无法将 UDP 数据包中的数据转换为使用 Java 发送的初始数据

> ID：10879035
> 
> 赞同：0
> 
> 时间：2012-06-04T09:24:43.693
> 
> 标签：java, udp, long-integer

我正在编写一个 UDP 客户端来将文件传输到 UDP 服务器。首先，我尝试测量文件的长度，除以 UDP 数据包中要发送的缓冲区长度，得到需要发送的数据包数。我首先将此号码发送到服务器以确认它。但是在服务器端，从接收数据包的字节数组到初始数字的转换失败了。谁能帮我解决这个问题？这是我在客户端的代码：

```
 DatagramSocket socket=new DatagramSocket(); 
    File f = new File(filename);
long fileSize = f.length();
    byte[] buffer = new byte[16384]; 
    long packetNumber = (fileSize/(buffer.length))+1;
    DatagramPacket sendPacket=new DatagramPacket(buffer,buffer.length,addr,srvPort);
    String str=Long.toString(packetNumber);
    buffer = str.getBytes();
    socket.send(sendPacket); 
```

这是服务器端的代码：

```
 DatagramSocket socket=new DatagramSocket(port);     
byte[] buffer=new byte[16384];
    DatagramPacket receivePacket=new DatagramPacket(buffer, buffer.length);
    while(true)
        {
        socket.receive(receivePacket);
        if (receivePacket.getData().toString().trim()!=null)            
        {

        String str=receivePacket.getData().toString();
        System.out.println(str);
        long pcount=Long.parseLong(str);
                    System.out.println(pcount+" packets to be received.");
                    break;
                    }
                    } 
```

但是在服务器端，变量 pcount 总是无法解析，当我尝试打印 str 时，它会写出一些“[B@60991f”或……，很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:31:18.637

你收到一个`byte array`，使用 toString() 不会给你任何东西。您应该使用从字节数组重建字符串`new String`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:42:02.377

这段代码没有任何意义。

大多数网络不允许您可靠地发送超过 534 字节的数据报。

目前您正在发送 16384 个字节的零值，因为您没有将任何内容放入缓冲区：而是在创建 DatagramPacket*后创建一个新缓冲区。*所以你还没有发送任何东西。

你也没有收到任何东西。String.trim() 的结果不能为空。您必须在每次 receive() 之前重置 DatagramPacket 中的字节数组，因为它会缩小到实际接收到的数据包的大小，所以除非您重置它，否则它会越来越小。toString() 对字节数组的结果不包括其内容，因此解析它是徒劳的。

您需要学习几个基本的 Java 编程概念：太多了，无法在这里回答。

# jsp - 如何用双击图标启动Tomcat？

> ID：10879037
> 
> 赞同：0
> 
> 时间：2012-06-04T09:24:47.663
> 
> 标签：jsp, tomcat

我有一个包含 jsp 页面的 Web 应用程序。我已经创建了war文件并部署了它。但是现在我想创建一个图标，如果我双击它应该启动tomcat并从第一个jsp页面开始执行。无需显式启动 tomcat。我在 Eclipse 中创建了 Web 应用程序。有可能做这样的事情吗？

我可以准备一个可以启动tomcat的exe吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:05:30.873

startup.bat 不是你点击的东西，它是你从命令行调用的东西。如果您当然可以执行“双击启动 Tomcat”操作，那么您的问题让我认为您不熟悉命令行编程，因此可能不具备创建它的技能。

我的建议是应该花一些时间学习如何处理命令行工具，然后一切都应该清楚（在 Mac 上，启动“终端”应用程序以进入命令行，在 Windows 上，我不记得了）

# android - android中的电池使用情况分析

> ID：10879039
> 
> 赞同：3
> 
> 时间：2012-06-04T09:24:48.953
> 
> 标签：android, power-management

嗨，我想知道我的 Android 设备中的每个组件都使用了多少电池，我们该怎么做。

例如，假设媒体播放器正在使用一定量的电池，并确定电话同时使用了多少电池

如何以编程方式完成？

我已经检查过[这对私有 API 的说明](https://stackoverflow.com/questions/5152447/android-battery-usage-profiling)

但是，它对我不起作用。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:52:05.700

> 我想知道我的 Android 设备中的每个组件使用了多少电池，我们该如何做到这一点。

购买 Qualcomm MDP 并使用 Trepn 测量应用程序的功耗。

除此之外，没有办法做到这一点，对不起。

# objective-c - 像 Zinio 这样的杂志应用应该使用哪种 IAP 类型？

> ID：10879043
> 
> 赞同：2
> 
> 时间：2012-06-04T09:25:15.940
> 
> 标签：objective-c, ipad, in-app-purchase

我们创建了一个类似于 Zinio 的发布平台，我们有一个网站，我们可以在其中上传杂志，并将它们发布到我们在 iPad 上的移动应用程序

Apple 拒绝该应用程序的原因如下：

使用 IAP 购买商品的应用必须分配正确的可购买性类型我们发现您的一个或多个应用内购买产品的可购买性类型设置不当，这不符合 App Store 审核指南。

您的应用内购买设置为消耗品。

但是，根据产品功能，使用 Non-Consumable In App Purchase 类型会更合适。非消耗性产品仅由用户购买一次，并且始终在与该用户的 iTunes 帐户关联的所有设备上可用。

我们已多次回复并解释如下：

我们正在使用消耗型应用内产品，因为我们有很多且经常发布不同价格的杂志，因此我们无法将购买定义为非消耗型。

我们将定价等级设置为 0.99 美元到 54.99 美元，以便将每本杂志适当分类并分配到某个等级。

我们的系统有很多杂志，每个杂志都有很多发行版本。杂志问题在报价内出售。

我们有“单期优惠”（仅包含一期杂志的优惠）和“多期优惠”（包含多期的优惠，例如：以 19.99 美元购买 3 期杂志 x 的数字版）。

我们使用从 1 到 55 的层级来为我们的报价分配价格。请注意，应用内购买是消耗品，但我们的系统不会让用户再次购买已经购买的物品。

每次用户尝试购买优惠时，应用程序都会联系我们的服务器。

如果优惠已被购买，则应用程序将不会继续进行应用内购买，并且会向用户显示他已经购买了该优惠。

有人有解决这个问题的答案吗？

由于苹果坚持我们不应该使用消耗品而使用不合逻辑的非消耗品，因为我们需要在每次将杂志添加到系统时提交应用程序。

非常感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:01:56.293

对于杂志，您不太可能从 Apple 获得消耗品应用内购买功能。他们过去曾明确表示，对此类媒体、级别和内容的期望预计将出现在所有用户设备上。

但是，根据您对您正在尝试做的事情的描述，我不确定这是一个问题。请记住，消耗品与订阅不同，订阅可以让您访问可能不止一个问题，而消耗品只是意味着您购买后可能无法使用的东西，即它可能会被消耗掉。

听起来这里真正的问题是目录问题。对于诸如杂志之类的情节内容，您不想对应用内购买进行硬编码，而是查看基于服务器的模型，如下所述：http: [//developer.apple.com/library/mac/ ipad/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html](http://developer.apple.com/library/mac/ipad/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html)

使用此模型，您的服务器可以返回满足特定条件的产品标识符列表，因此您不必不断更新应用程序。

# vhdl - Altera Qsys 和具有 std_logic_vector 数组的顶级实体

> ID：10879044
> 
> 赞同：3
> 
> 时间：2012-06-04T09:25:19.863
> 
> 标签：vhdl, intel-fpga, qsys

我一直在尝试在单独的“mytypes.vhd”文件中声明我的类型，如下所示：

```
library ieee;
use ieee.std_logic_1164.all;

package mytypes is 
   type my_bus_array_type is array (0 to 3) of std_logic_vector(7 downto 0);
end package mytypes; 
```

然后定义一个实体如下：

```
library ieee;
use ieee.std_logic_1164.all;

library work;
use work.mytypes.all; 

entity my_entity is
   port(
      bus_array : in my_bus_array_type;
      ...
   );
end my_entity; 
```

好吧，这行不通。当我尝试使用 Altera Qsys 工具将组件添加到我的库时，我收到以下错误：

```
Error: Verilog HDL or VHDL XML Interface error at my_entity.vhd(41): port "bus_array" has an unsupported type File: /home/project/my_entity.vhd Line: 41 
```

请注意，问题在于我试图在实体内部定义一个标准逻辑向量数组，即多维数组。如果我改为定义一个 std_logic 数组，则此代码可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:34:35.573

您提到您正在使用 Quartus，它可能对使用 std_logic_vectors 作为其他项目的基本类型很挑剔。

我使用子类型做我认为你在 Quartus 中追求的事情：

mytypes.vhd 文件：

```
library ieee;
use ieee.std_logic_1164.all;

package mytypes is 
  subtype BYTE_T            is std_logic_vector(7 downto 0);
  type    BYTE_A            is array (natural range <>) of BYTE_T;
  type    my_bus_array_type is array (0 to 3) of BYTE_T;
end package mytypes; 
```

my_entity.vhd 文件：

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

use work.mytypes.all

entity my_entity is
port ( 
  my_bus_array1 : in BYTE_A(0 to 3);
  my_bus_array2 : in my_bus_array_type;
  ... 
```

是否要在实体（可能使用泛型）或包中定义数组范围取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:19:37.983

您必须告诉编译器使用您在 mytypes 包中创建的类型：

```
use work.mytypes.all

entity my_entity is
port ( my_bus_array : in my_bus_array_type;
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:33:19.360

我不是 VHDL 专家，但我认为您必须像这样编写代码：

我编辑：试试这个：

```
 package mytypes is 
     type my_bus_array_type is array (0 to 3) of std_logic_vector(7 downto 0);  
end package mytypes;

    entity my_entity is
    port ( my_bus_array : in my_bus_array_type; 
    ...);
    end my_entity 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-26T08:13:52.253

我遇到过类似的问题，这与处理 VHDL 库有关。Qsys 中的所有 HDL 组件都将分配一个 VHDL 库，库名称设置为 Qsys 项目的名称。必须使用库显式访问包（`work.`在您的情况下），这可能会使事情变得混乱。话虽如此，通常在 Qsys 组件*中*使用包对我来说效果很好（包括使用 访问它们`work.`）。

要查看 Quartus 如何分配和编译到库中，请查看 Quartus 中的“Design units”选项卡。它列出了库文件夹中的单元。但是，由于某种原因，我看到这里*不会列出这些软件包。*还`.qip`可以查看 Qsys 项目的文件，您可以在其中准确了解 Quartus 如何将您的 HDL 文件分配到库中。

事实上，当您在 Quartus 项目中直接实例化您的代码而不是作为 Qsys 组件时，您的问题不会出现，库问题的提示就是对此的解释。

我只找到了关于 Qsys 库处理的两个参考： [http ://www.alteraforum.com/forum/showthread.php?t=33605](http://www.alteraforum.com/forum/showthread.php?t=33605) [http://www.alterawiki.com/wiki/New_Qsys_Issues](http://www.alterawiki.com/wiki/New_Qsys_Issues)（参见“不可避免的”部分设计单元冲突")

（附带说明，我经常`std_logic_vector`在 Qsys 组件中使用数组，但从未遇到过问题。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-27T18:30:12.490

您要真正定义的是作为端口的二维数组。不幸的是，QSYS 不支持二维数组。没有标准 Qsys 接口只支持一维端口阵列。因此，您必须在顶级实体中将阵列分开，将各个端口导出为导管，然后在更高级别将它们重新组装回阵列。这很不幸，但却是事实。

# css - 如何在父 div 中设置不透明度而不影响子 div？

> ID：10879045
> 
> 赞同：101
> 
> 时间：2012-06-04T09:25:24.263
> 
> 标签：css, parent-child, opacity

嘿，我正在谷歌搜索，但我无法找到任何完美的答案

我想在父 DIV 中不透明度，但不是子 DIV

例子

**HTML**

```
<div class="parent">
<div class="child">
Hello I am child 
</div>
</div> 
```

**CSS**

```
.parent{
background:url('../images/madu.jpg') no-repeat 0 0;
}
.child{
Color:black;
} 
```

**注意：--**我想**背景图像**`Parent Div`不是颜色

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-25T16:04:12.647

我知道这是旧的，但以防万一它会帮助别人。

```
<div style="background-color: rgba(255, 0, 0, 0.5)">child</div> 
```

其中`rgba`是：红色、绿色、蓝色，并且`a`是透明度。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-06-04T10:07:50.703

如果您在伪类中定义**背景图像可能会很好。**`:after`像这样写：

```
.parent{
    width:300px;
    height:300px;
    position:relative;
    border:1px solid red;
}
.parent:after{
    content:'';
    background:url('http://www.dummyimage.com/300x300/000/fff&text=parent+image');
    width:300px;
    height:300px;
    position:absolute;
    top:0;
    left:0;
    opacity:0.5;
}
.child{
    background:yellow;
    position:relative;
    z-index:1;
} 
```

检查这个[小提琴](http://jsfiddle.net/hzSG8/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-04T09:55:58.070

您**可以**使用伪元素来做到这一点：（[dabblet.com 上](http://dabblet.com/gist/2867543)的演示） ![在此处输入图像描述](../Images/b9483aa19721aad1272216b613dd5d3c.png)

**你的标记：**

```
<div class="parent">
    <div class="child"> Hello I am child </div>
</div> 
```

**CSS：**

```
.parent{
    position: relative;
}

.parent:before {
    z-index: -1;
    content: '';
    position: absolute;

    opacity: 0.2;
    width: 400px;
    height: 200px;
    background: url('http://img42.imageshack.us/img42/1893/96c75664f7e94f9198ad113.png') no-repeat 0 0; 
}

.child{
    Color:black;
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-09-05T18:38:19.143

正如汤姆所说，`background-color: rgba(229,229,229, 0.85)`可以做到这一点。将其放在父元素的样式上，子元素不会受到影响。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-04T09:29:00.200

你不能。今天的 CSS 根本不允许这样做。

逻辑渲染模型是这样的：

> 如果对象是一个容器元素，那么效果就好像容器元素的内容使用掩码与当前背景混合，其中掩码的每个像素的值为 。

参考：[css透明度](http://www.w3.org/TR/css3-color/#transparency)

解决方案是使用不同的元素组合，通常对今天定义为子元素的元素使用固定或计算的位置：它可能在逻辑上和视觉上对用户作为子元素出现，但元素不需要是真正的子元素你的代码。

使用 css 的解决方案：[小提琴](http://jsfiddle.net/dystroy/RVppt/)

```
.parent {
    width:500px;
    height:200px;    
    background-image:url('http://canop.org/blog/wp-content/uploads/2011/11/cropped-bandeau-cr%C3%AAte-011.jpg');
    opacity: 0.2;
}
.child {
    position: fixed;
    top:0;
} 
```

javascript的另一个解决方案：[小提琴](http://jsfiddle.net/dystroy/WnQJ9/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-06T09:33:49.250

我遇到了同样的问题，我通过将透明 png 图像设置为父标签的背景来修复。

[这是我用 60% 的黑色背景不透明度创建的 1px x 1px PNG 图像](http://i.stack.imgur.com/2eS18.png)！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-04T09:43:30.707

你不能这样做，除非你把孩子从父母身边带走并通过定位放置。

我知道并且它确实有效的唯一方法是**使用半透明图像**（具有透明度的.png）作为父母的背景。唯一的缺点是你不能通过 CSS 控制不透明度，除了它可以工作！

# maven - pig-0.9.0.pom 不包含其所有运行时依赖项，例如 pig-0.8.1-cdh3u1.pom

> ID：10879051
> 
> 赞同：2
> 
> 时间：2012-06-04T09:25:46.190
> 
> 标签：maven, apache-pig

maven noob，请耐心等待...我正在从 cdh3u1 升级到 apache hadoop 0.20.203.0 和 pig 0.9.0。我曾经有：

```
 <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>0.20.2-cdh3u1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.pig</groupId>
        <artifactId>pig</artifactId>
        <version>0.8.1-cdh3u1</version>
    </dependency> 
```

并从 Eclipse 内部运行它们，使用 junit 运行配置效果很好。我现在有：

```
 <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>0.20.203.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.pig</groupId>
        <artifactId>pig</artifactId>
        <version>0.9.0</version>
    </dependency> 
```

我得到了 NoClassDefFoundError: jline/ConsoleReaderInputStream 在运行时。我最终手动添加了所有这些依赖项，直到它起作用：

```
 <dependency>
        <groupId>jline</groupId>
        <artifactId>jline</artifactId>
        <version>0.9.94</version>
    </dependency>   
    <dependency>
        <groupId>org.antlr</groupId>
        <artifactId>antlr-runtime</artifactId>
        <version> 3.2 </version> <- this is 3.0.1 in cdh3u1, but probably changed in pig 0.9.0
    </dependency>      
    <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>r06</version>
    </dependency> 
```

是什么赋予了？为什么 Maven 不自动拉出我的依赖项并将它们放在类路径中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:11:54.573

Maven 有一个名为[Transitive dependencies](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies)的特性，因此您不必指定您自己的依赖项所需的库。

ConsoleReaderInputStream 在 Jline JAR 中。当您使用 Pig.0.8.1-cdh3u1 时，您不必添加 Jline 依赖项，因为它是在[Pig.0.8.1-cdh3u1.pom](https://repository.cloudera.com/artifactory/public/org/apache/pig/pig/0.8.1-cdh3u1/pig-0.8.1-cdh3u1.pom)中声明的。[Pig 0.9.0.pom](http://search.maven.org/remotecontent?filepath=org/apache/pig/pig/0.9.0/pig-0.9.0.pom)不再声明 Jline 依赖项，这就是您必须自己添加它的原因。至于从 Pig 中删除 JLine 的原因，您必须询问该项目的开发人员。

# php - 加载 javascript 函数，并在其加载时在指定的秒数内再次加载它

> ID：10879059
> 
> 赞同：0
> 
> 时间：2012-06-04T09:26:17.080
> 
> 标签：php, javascript, jquery, reload

各位，

也许你可以帮助我，当页面加载一个函数时我需要一个代码（下）

```
 function update() {
     $('#animation').load('/Stream/readLevel');
 } 
```

需要执行，当这个动作完成时（所以页面/Stream/readLevel的内容已经完全加载，必须在几秒（2秒）内再次加载该函数。

我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:28:58.850

由于您只想在内容完全加载后重新加载，因此您必须在函数的`success`回调中设置计时器，[`$.load`](http://api.jquery.com/load/)如下所示，否则它将每两秒向服务器发送一次请求，无论之前的 ajax 请求是否已完成。

```
function update() {
     $('#animation').load('/Stream/readLevel',function(){
        var timer = setTimeout(update,2000);
     });
 } 
$(function(){
   update();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:27:57.547

你可以这样做。

```
$(function(){    
   update();
});

function update() {
   $('#animation').load('/Stream/readLevel', function(){
       alert("after two seconds of load");
       setTimeout('update()', 2000);
  }); 
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:12:02.040

变量 c = 2; function update() { $('#animation').load('/Stream/readLevel'); } 函数 startTimer(){

```
if(c< 0){
c=2;
}
if(c==2){
update();
}
timer = setTimeout('startTimer()',1000);
c=c-1;
}
$(document).ready(function(){
startTimer();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:28:34.947

尝试

```
function update(){ 
    $('#animation').load('/Stream/readLevel',function(){
    setTimeout(update,2000); });

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T09:28:56.710

```
<script>
function update() {
    $("#animation").load('/Stream/readLevel',"",function(){
        setTimeout(update,2000);
    });
}
</script>

<body onload="update()">
  // HTML CODE
</body> 
```

# jquery - jQuery动画通过div调整大小保持自动定位

> ID：10879060
> 
> 赞同：0
> 
> 时间：2012-06-04T09:26:30.410
> 
> 标签：jquery, position, jquery-animate, margin

我有一个可以在单击时显示和隐藏的左侧菜单 div。右边的内容 div 对齐 margin:0 auto; 当我调整窗口大小时，它完全对齐在窗口的中间。但是，我想要的是，当左侧菜单 div 动画到它的全宽时，内容 div 应该动画到右边大小的剩余空间的中心。与屏幕分辨率无关。

有人知道如何做到这一点？我的猜测是计算如下：

document.viewport - leftmenu.width，然后将剩余空间一半对齐到内容 div 的中心。

啊，停电了。任何人？

这里有一个小提琴：http: [//jsfiddle.net/5A3qA/48/](http://jsfiddle.net/5A3qA/48/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:03:47.543

```
$('#content').css('position','absolute');
var nwpos =  ( $(window).width() - $('#content').width() ) / 2;        
nwpos= nwpos+ (tcontainer.width()/2);
$('#content').css("left", nwpos + "px"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:32:43.603

是的，您必须计算当前窗口的宽度并减去左侧菜单的宽度。然后从剩余的宽度中，得到中心，即 width/2 并从中减去内容宽度的一半。

w = 屏幕宽度 - 左侧菜单的宽度 left = w/2 - contentdivWidth /2 contentwidth.left = left

# c# - 枚举拒绝转换为字符串

> ID：10879062
> 
> 赞同：-1
> 
> 时间：2012-06-04T09:26:32.833
> 
> 标签：c#, logging, enums, c#-3.0

奇怪的是，我有两个枚举集：

```
public enum ComponentActionTypes {
    Add = 0,
    Move = 1,
    Delete = 2,
    Edit = 3,
    Enable = 4,
    Disable = 5
}
public enum ComponentNames {
    Component = 0,
    Logo = 1,
    Main_menu = 2,
    Search_box = 3,
    Highlighter = 4,
    RSS = 5,
    Twitter = 6,
    YouTube = 7
} 
```

当我尝试打印以下文本时，

```
ActionText =
string.Format("{0}ed a {1}", action.ComponentActionType, action.ComponentName); 
```

将产生：

`184ed a Logo`代替`Added a Logo`

`action.ComponentActionType`被转换为数字（`ToString`没有帮助），也是一个

奇怪`184`的数字（比如，不是枚举数本身）

知道如何解决这个问题吗？

**更新：**

```
namespace BrandToolbar.Common.ActionLog.Model
{
    public class ActionItem
    {
        public Guid UserId { get; set; }
        public Int64 PublicId { get; set; }
        public ComponentActionTypes ComponentActionType { get; set; }
        public DateTime Date { get; set; }
        public ComponentNames ComponentName { get; set; }
        public string UiJsonPreview { get; set; }
    }
}

public static ActionItemUI ConvertModelToUiObj(ActionItem action)
{
    return new ActionItemUI()
    {
        ActionText = string.Format(
            "{0}ed a {1}",
            action.ComponentActionType,
            action.ComponentName
        ).Replace("_", " "),
        TooltipText = string.Format(
            "{0}ed on {1}",
            action.ComponentActionType,
            action.Date.ToString(StringFormatter.DateFormat)
        ),
        ImageUrl = string.Empty,
        ConponentText = string.Empty
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:37:33.797

`ComponentActionTypes.Add`具有值 == 0。`action.ComponentActionType`来自代码示例具有值 == 184。就枚举变量允许存储不在枚举定义中的值而言，您已经得到了这样的结果。

你需要检查一下，为什么`action.ComponentActionType`等于184。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:36:27.197

你能检查一下 ComponentActionType 字段是如何填充的吗？枚举值可以包含未列出的其他值。例如：这是完全有效的：

```
 enum foo {A = 1,B = 2,C = 3};
    var b = (foo)7; 
```

（如果默认情况下不允许，则无法使用枚举进行屏蔽）。在这种情况下，b 的字符串表示为 7，因为它无法与枚举中的项目匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:33:54.423

尝试

```
Enum.GetName(typeof(ComponentActionTypes), action.ComponentAction); 
```

不确定“184”通过。

# python - 将单词列表解析成树

> ID：10879063
> 
> 赞同：5
> 
> 时间：2012-06-04T09:26:41.167
> 
> 标签：python, parsing, data-structures, tree

我有一个单词列表。例如：

```
reel
road
root
curd 
```

我想以反映以下结构的方式存储这些数据：

```
Start -> r -> e -> reel
           -> o -> a -> road
                   o -> root
         c -> curd 
```

对我来说很明显我需要实现一棵树。从这棵树中，我必须能够很容易地得到一个节点的高度、一个节点的后代数量、搜索一个节点等统计信息。**添加节点应该“自动”将其添加到树中的正确位置，因为该位置是唯一的。**

它还希望能够以实际图形树的形式可视化数据。由于树会**很大**，我需要在可视化上进行缩放/平移控件。当然，漂亮的可视化总是比丑陋的要好。

有谁知道可以让我简单地实现这一切的 Python 包？自己编写代码需要相当长的时间。你认为[http://packages.python.org/ete2/](http://packages.python.org/ete2/)适合这个任务吗？

我在 Python 2.x 上，顺便说一句。

* * *

我发现 NLTK 有一个 trie 类 - nltk.containers.trie。这对我来说很方便，因为我已经使用了 NLTK。有谁知道如何使用这个类？我在任何地方都找不到任何例子！例如，如何向树中添加单词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:44:21.587

[ETE2](http://pypi.python.org/pypi/ete2/) is an environment for tree exploration, in principle made for browsing, building and exploring phylogenetic trees, and i've used it long time ago for these purposes. But its possible that if you set your data properly, you could get it done.

You just have to place paretheses wherever you need to split your tree and create a branch. See the following example, taken from ETE doc. If you change these "(A,B,(C,D));" for your words/letters it should be done.

```
from ete2 import Tree
unrooted_tree = Tree( "(A,B,(C,D));" )
print unrooted_tree 
```

output:

```
 /-A
    |
----|--B
    |
    |     /-C
     \---|
          \-D 
```

...and this package will let u do most of the operations you want, giving u the chance to select every branch individually, and operating with it in an easy way. I recommend u to give a look to the tutorial anyway, not pretty difficult :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T11:05:47.270

[我认为以下示例使用ETE](http://ete.cgenomics.org)工具包几乎可以满足您的需求。

```
from ete2 import Tree

words = [ "reel", "road", "root", "curd", "curl", "whatever","whenever", "wherever"]

#Creates a empty tree
tree = Tree()
tree.name = ""
# Lets keep tree structure indexed
name2node = {}
# Make sure there are no duplicates
words = set(words)
# Populate tree
for wd in words:
    # If no similar words exist, add it to the base of tree
    target = tree

    # Find relatives in the tree
    for pos in xrange(len(wd), -1, -1):
        root = wd[:pos]
        if root in name2node:
            target = name2node[root]
            break

    # Add new nodes as necessary
    fullname = root 
    for letter in wd[pos:]:
        fullname += letter 
        new_node = target.add_child(name=letter, dist=1.0)
        name2node[fullname] = new_node

        target = new_node

# Print structure
print tree.get_ascii()
# You can also use all the visualization machinery from ETE
# (http://packages.python.org/ete2/tutorial/tutorial_drawing.html)
# tree.show()

# You can find, isolate and operate with a specific node using the index
wh_node = name2node["whe"]
print wh_node.get_ascii()

# You can rebuild words under a given node
def recontruct_fullname(node):
    name = []
    while node.up:
        name.append(node.name)
        node = node.up
    name = ''.join(reversed(name))
    return name

for leaf in wh_node.iter_leaves():
    print recontruct_fullname(leaf)

                    /n-- /e-- /v-- /e-- /-r
               /e--|
     /w-- /h--|     \r-- /e-- /v-- /e-- /-r
    |         |
    |          \a-- /t-- /e-- /v-- /e-- /-r
    |
    |     /e-- /e-- /-l
----|-r--|
    |    |     /o-- /-t
    |     \o--|
    |          \a-- /-d
    |
    |               /-d
     \c-- /u-- /r--|
                    \-l 
```

# python - 如何绘制 1000 像素的绘图？

> ID：10879064
> 
> 赞同：2
> 
> 时间：2012-06-04T09:26:42.117
> 
> 标签：python, matplotlib

我想将 1600 个点绘制到 1000**像素**宽的图形（仅图形，不计算轴和空格）上。这种设置英寸和每英寸像素 (DPI) 的方法是最佳方法吗？有没有更好的办法？

```
self.figure, (self.picture, self.intensity) = \
        plt.subplots(nrows=2, figsize=(10, 5))
    self.figure.set_dpi(100) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:17:55.903

对于 1600 像素宽和 1000 像素高的图形，您可以执行以下操作：

```
import matplotlib.pyplot as plt
plt.figure(figsize=(16, 10), dpi=100)
# ... your code
plt.savefig(filename) 
```

# c# - 在共享主机上定期在 ASP.NET 中运行耗时脚本的最佳方法是什么？

> ID：10879065
> 
> 赞同：0
> 
> 时间：2012-06-04T09:26:44.467
> 
> 标签：c#, asp.net

我想定期运行一个耗时的脚本（从第 3 方 API 更新数据库）。我想知道最好的做法是什么：

1.  “脚本”应该是什么 - 一个 ASP.NET 服务？请记住我在共享主机上，这可能是不可能的（但我想知道）。
2.  如何安排脚本定期/在设定的时间自动运行？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:52:09.047

您无法保证某些东西在正常的 IIS 设置中每晚都会运行。因此，批处理作业很难处理。IIS 的唯一执行“模式”是请求。如果您的应用程序没有请求，则它根本不会运行，因此 IIS 不会花费任何资源来执行应用程序中的代码，即它可以完全卸载它。

如果您有自己的主机，您通常会创建一个 Windows 服务来运行您的后台任务。我相信在 Azure 中也是如此。但是对于标准的共享 IIS 主机，您基本上无法设置计划的后台任务。

最简单的黑客攻击之一是设置一个受保护的服务，该服务在收到请求时执行作业。然后，您可以确保*外部*调用者以所需的时间间隔调用您的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:35:57.403

一些选项：

*   使用一个始终运行的单独线程 - 并按时更新（然后休眠）。
*   使用计时器并触发更新事件。
*   使用缓存过期触发器，但对其进行测试，使其在没有用户访问站点的情况下继续运行。

我建议查看[http://www.beansoftware.com/ASP.NET-Tutorials/Scheduled-Tasks.aspx](http://www.beansoftware.com/ASP.NET-Tutorials/Scheduled-Tasks.aspx)以了解有关这些方法的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:35:02.630

您可以做的是在 Global.asax 中添加一个 System.Timers.Timer。

```
System.Threading.Timer timer = new System.Threading.Timer(new TimerCallback(TimerElapsed), null, new Timespan(0), new Timespan(24, 0, 0));

// This will run every 24 hours.
private void TimerElapsed(object o)
{
    // Do stuff.
} 
```

在 IISManager 中，为您的应用程序启用 HTTP-Keep Alives。

在 IIS 管理器中，选择 Http Response Headers Module，将其打开，然后在 Actions 窗格中，选择 Set Common Headers，然后在其中选择 Enable Http Keep Alives。

此外，检查您的应用程序池的设置 -

选择您的应用程序的应用程序池，从右侧的操作选项卡中选择高级设置。

那里有一个名为 - 空闲超时（分钟）的设置

默认为 20 分钟。将其设置为 60 分钟或将其增加更多并检查。

# android - 如何在 tabwidget 中显示 webview？

> ID：10879067
> 
> 赞同：0
> 
> 时间：2012-06-04T09:27:01.713
> 
> 标签：android, android-layout, tabs, webview

如何在 tabwidget 中显示 webview？当我打开选项卡时，webview 在其他新页面中打开，而不在选项卡内容中打开。哪里有问题？

代码activity.class：

> 公共类 layout1i2 扩展 Activity{
> 按钮 button1, button2; WebView webview1、webview2；
> 
> ```
>  @Override
> public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);  
>     setContentView(R.layout.layout1);
> 
>           //declarar webvies i botó de tirar enrere       webview1 = (WebView) findViewById(R.id.webview1);       button1 = (Button) 
> ```
> 
> findViewById(R.id.button1); button2 = (Button) findViewById(R.id.button2);
> webview1.loadUrl("http://www.facebook.com"); webview1.setWebChromeClient(new WebChromeClient());
> 
> ```
>  button1.setOnClickListener(new OnClickListener()        {           @Override           public void onClick(View arg0)              {
>           setContentView(R.layout.layout2);
>           webview2 = (WebView) findViewById(R.id.webview2);
>           button2 = (Button) findViewById(R.id.button2);
>           button2.setOnClickListener(new OnClickListener() 
>           {
>               @Override
>               public void onClick(View arg0) 
>               {
>                   setContentView(R.layout.layout1);
>                   webview1 = (WebView) findViewById(R.id.webview1);       
>               }
>           });             } 
> ```

```
}); 
```

}

布局2.xml

> ```
>  <RelativeLayout
>           android:id="@+id/Layout2"
>           android:layout_width="fill_parent"
>           android:layout_height="fill_parent" >
> 
>           <WebView
>               android:id="@+id/webview2"
>               android:layout_width="fill_parent"
>               android:layout_height="fill_parent"
>               android:autoLink="web"
>               android:scrollbars="none"
>               android:textColor="@android:color/black" />
> 
>           <Button
>               android:id="@+id/button2"
>               style="?android:attr/buttonStyleSmall"
>               android:layout_width="60dp"
>               android:layout_height="25dp"
>               android:layout_below="@+id/webview2"
>               android:layout_alignParentRight="true"
>               android:layout_alignParentTop="true"
>               android:layout_marginRight="35dp"
>               android:layout_marginTop="19dp"
>               android:text="Button2"
>               android:textSize="14px" />
> 
>       </RelativeLayout> 
> ```

布局1.xml

> ```
>  <RelativeLayout
>           android:id="@+id/Layout1"
>           android:layout_width="fill_parent"
>           android:layout_height="fill_parent" >
> 
>           <WebView
>               android:id="@+id/webview1"
>               android:layout_width="fill_parent"
>               android:layout_height="fill_parent"
>               android:autoLink="web"
>               android:scrollbars="none"
>               android:textColor="@android:color/black" />
> 
>           <Button
>               android:id="@+id/button1"
>               style="?android:attr/buttonStyleSmall"
>               android:layout_width="60dp"
>               android:layout_height="25dp"
>               android:layout_below="@+id/webview2"
>               android:layout_alignParentRight="true"
>               android:layout_alignParentTop="true"
>               android:layout_marginRight="35dp"
>               android:layout_marginTop="19dp"
>               android:text="Button1"
>               android:textSize="14px" />
> 
>       </RelativeLayout> 
> ```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:34:25.600

使用这一行：

```
web.setWebViewClient(new WebViewClient()); 
```

# python - Python将多个变量声明为列表

> ID：10879069
> 
> 赞同：0
> 
> 时间：2012-06-04T09:27:09.107
> 
> 标签：python

下面的声明是错误的吗？`b`虽然它没有给出任何语法错误，但有时我看到`a`值追加操作在列表的情况下不起作用。

```
a=b=c=[]
 or 
a=b=c={}

a=b=c=1 //works 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:30:40.923

```
a=b=c=[] 
```

工作，但不做你想做的事。它创建*一个*列表对象并将三个不同的名称与之关联：

```
a.append(1)
print b # [1] 
```

你想要的可能是：

```
a, b, c = [], [], [] 
```

现在 a、b 和 c 是三个独立的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T09:29:12.243

你试过了吗？

这取决于您所说的“错误”是什么意思。这不是语法错误，但它确实意味着`a`,`b`并`c`引用*同一个*列表。因此，如果您随后将某些内容附加到`a`，您也会在`b`和`c`中看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:32:55.150

Python 列表和字典是可变的。阅读下面链接中的讨论。它可以让您很好地了解要尝试的内容

[http://docs.python.org/release/2.5.2/lib/typesseq-mutable.html](http://docs.python.org/release/2.5.2/lib/typesseq-mutable.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:40:25.637

其他几个答案正确地说`a=b=c=[]`使所有三个名称都引用同一个列表对象。然而，还有一点：在 Python 中，你不需要*声明*任何东西。仅当您想附加到它们时，您才需要将名称 和 放入空`a`列表中`b`。`c`否则，您可以将它们设置为您想要的任何内容。

# extjs - 如何增加在 extjs 中创建的标签面板的高度和宽度？

> ID：10879070
> 
> 赞同：-1
> 
> 时间：2012-06-04T09:27:11.010
> 
> 标签：extjs, extjs3, extjs-mvc

我有一个 TabPanel，其中 TabPanel 包含两部分，一部分包含有关图像的详细信息，而下部分包含使用 Panel 创建的图像。现在图像在 IE8 中不可读（尺寸较小），所以我想增加 Tabpanel 中 Imagepanel 的大小。我怎样才能做到这一点？

谢谢，

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:19:37.497

```
 var tabs = new Ext.TabPanel({
    activeTab : 0,
    autoScroll: true,
    width:200,
    height: 200,
        items:[]      
    }); 
```

# asp.net - 错误：allowDefinition='MachineToApplication' 超出应用程序级别。在 IIS 中运行

> ID：10879073
> 
> 赞同：1
> 
> 时间：2012-06-04T09:27:48.733
> 
> 标签：asp.net, iis

我已经构建了一个通过 Visual Studio 运行良好的 Web 应用程序，但现在我让它在 IIS 中测试它并收到以下错误。

> 处理服务此请求所需的配置文件期间发生错误
> 
> 在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由于虚拟目录未在 IIS 中配置为应用程序所致

我应该在 web.config 或其他地方进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:06:43.183

这个错误可能意味着两个想法

1.  您的 Web 应用程序的子目录中有一个 web.config，其中包含不允许用于子目录的定义
2.  您尝试在 Web 应用程序的子目录中运行您的站点，而无需先使其可运行应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T09:32:41.440

在我的情况下，删除 obj 文件夹解决了问题

# spring-mvc - Spring+SiteMesh 2.0 汉字支持

> ID：10879078
> 
> 赞同：0
> 
> 时间：2012-06-04T09:28:14.177
> 
> 标签：spring-mvc, encoding, sitemesh

我使用spring3.0和sitemesh2.0。问题是无法在我的jsp页面中显示中文字符。

我做了以下

web.xml

```
<filter>     
        <filter-name>charsetFilter</filter-name>     
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>     
        <init-param>         
            <param-name>encoding</param-name>         
            <param-value>UTF-8</param-value>     
        </init-param> 
        <init-param>             
            <param-name>forceEncoding</param-name>             
            <param-value>true</param-value>         
        </init-param> 
    </filter>  
    <filter-mapping>     
        <filter-name>charsetFilter</filter-name>     
        <url-pattern>*.do</url-pattern> 
    </filter-mapping> 
    <filter> 
```

在我的jsp中：

```
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

在站点网格模板中：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

站点网格.xml：

```
<sitemesh>
    <property name="decorators-file" value="/WEB-INF/decorators.xml" />
    <excludes file="${decorators-file}" />

    <page-parsers>
        <parser content-type="text/html"
            class="com.opensymphony.module.sitemesh.parser.HTMLPageParser" />
        <parser content-type="text/html;charset=UTF-8"
            class="com.opensymphony.module.sitemesh.parser.HTMLPageParser" />
    </page-parsers>

    <decorator-mappers>
        <mapper class="com.opensymphony.module.sitemesh.mapper.ConfigDecoratorMapper">
            <param name="config" value="${decorators-file}" />
        </mapper>
    </decorator-mappers>
</sitemesh> 
```

但是汉字仍然是这样显示的：å®å¾½çä½³å®ç©å·(éå¢)æéå¬å¸

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:25:25.360

你的过滤器和jsp看起来都很好。也许也检查数据库设置。还请记住，当您连接到数据库时，您需要指定`characterEncoding`：

```
jdbc:mysql://localhost:3306/yourdb?characterEncoding=UTF-8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T18:51:35.730

回复有点晚了，但我希望其他人可以从我浪费的时间中受益。Spring的过滤器对我也不起作用。我自己编写并手动设置了 servletResponse 的 contentType。我现在没有问题。

```
public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain)
        throws ServletException, IOException {
    resp.setContentType("text/html; charset=UTF-8");
    chain.doFilter(req, resp);
}

<filter>
    <filter-name>EncodingFilter</filter-name>
    <filter-class>com.muratdozen.mvc.filters.EncodingFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>EncodingFilter</filter-name>
    <url-pattern>/ui/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping>
<filter-mapping>
    <filter-name>EncodingFilter</filter-name>
    <url-pattern>/WEB-INF/views/*</url-pattern>
    <dispatcher>ERROR</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

# php - 为什么这个 php array_multisort 不能按预期工作？

> ID：10879084
> 
> 赞同：0
> 
> 时间：2012-06-04T09:28:43.217
> 
> 标签：php, arrays, multidimensional-array

这些都不起作用......（没有排序）

我从 PHP 文档站点上的一个示例中改编了这些内容。

```
class ProductHelper {

    function sortProductsByPrice($products, $sort = SORT_ASC) {
        foreach ($products as $key => $row) {
            $name[$key]  = $row['name'];
            $rrp[$key] = $row['rrp'];
        }       
        array_multisort($rrp, $sort, $name, SORT_ASC, $products);
    }

    function sortProductsByName($products, $sort = SORT_ASC) {
        foreach ($products as $key => $row) {
            $name[$key] = $row['name'];
        }
        array_multisort($name, $sort, $products);
    }

} 
```

这就是我使用它的方式：

```
 $products = $cur_prod_cat["products"]; // copy an array of products
        $PRODUCT_HELPER->sortProductsByName($products); //sort it 
```

如果您需要查看， products 数组看起来像这样：

```
Array (
    [0] => Array (
        [id] => 0
        [name] => product name
        [description] => product description
        [price] => product price
        [etc] => other attributes
    )
    [1] => Array (
        [id] => 1
        [name] => product name
        [description] => product description
        [price] => product price
        [etc] => other attributes
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:30:41.657

`return $rrp`在您`return $name`致电`array_multisort`.

这是因为该函数正在对变量`$rrp`和进行排序`$name`，而不是您最初传递给函数的变量。

编辑：如果你只是想`$products`按它的`name`数组值排序，一个更好的方法完全如下：

```
function sort_name($a,$b) {
    return strcmp($a['name'],$b['name']);
}

$products = $cur_prod_cat["products"];
usort($products,'sort_name'); 
```

这使用该函数`sort_name`来确定首先放置数组中的哪个元素。

然后，您可以根据需要创建更多`sort_{value}`函数，只需更改它包含的字段值。

# ruby-on-rails-3 - Rails current_page 在部署到 Heroku 时导致 500 错误

> ID：10879096
> 
> 赞同：2
> 
> 时间：2012-06-04T09:29:16.563
> 
> 标签：ruby-on-rails-3, heroku, internal-server-error, current-page

我有一个导航菜单，如果链接或其任何子项处于活动状态，我想突出显示链接。

我的菜单包含以下代码：

```
<ul>
            <li class="first <%= current_page?(controller: 'posts', action: params[:action]) ? 'current' : '' %>"><%= link_to "Blog", blog_path %></li>
            <li class="<%= current_page?(controller: 'organisations', action: params[:action]) ? 'current' : '' %>"><%= link_to "Organisations", organisations_path %></li>
            <li class="<%= current_page?(controller: 'events', action: params[:action]) ? 'current' : '' %>"><%= link_to "Events", events_path %></li>
            <li class="<%= current_page?(controller: 'pages', action: 'about') ? 'current' : '' %>"><%= link_to "About",    about_path %></li>
            <li class="<%= current_page?(controller: 'pages', action: 'contact') ? 'current' : '' %>"><%= link_to "Contact",    contact_path %></li>
            <% if user_signed_in? %>
                <li class="last <%= current_page?(controller: 'users', action: params[:action]) ? 'current' : '' %>">
                    <a href="#"><%= current_user.username %></a>
                    <ul>
                        <li class="first"><%= link_to "Your Account", users_control_panel_path %></li>
                        <li class="last"><%= link_to "Log out", destroy_user_session_path, method: "delete" %></li>
                    </il>
                </li>
            <% else %>
                <li class="last <%= current_page?(controller: 'devise/sessions', action: 'new') ? 'current' : '' %>"><%= link_to "Log in", new_user_session_path %></li>
            <% end %>
        </ul> 
```

这在开发环境中运行没有问题。但是，当我推送到 Heroku 时，页面无法加载并出现内部服务器错误。从日志中：

```
2012-06-04T09:17:10+00:00 app[web.1]: Started GET "/organisations" for 2.124.94.147 at 2012-06-04 09:17:10 +0000
2012-06-04T09:17:10+00:00 app[web.1]: Processing by OrganisationsController#index as HTML
2012-06-04T09:17:11+00:00 app[web.1]:   Rendered organisations/index.html.erb within layouts/application (103.1ms)
2012-06-04T09:17:11+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.2ms)
2012-06-04T09:17:11+00:00 app[web.1]:   Rendered layouts/_head.html.erb (1.9ms)
2012-06-04T09:17:11+00:00 app[web.1]:   Rendered layouts/_header.html.erb (100.2ms)
2012-06-04T09:17:11+00:00 app[web.1]: Completed 500 Internal Server Error in 294ms
2012-06-04T09:17:11+00:00 app[web.1]: 
2012-06-04T09:17:11+00:00 app[web.1]: ActionController::RoutingError (No route matches {:controller=>"users"}):
2012-06-04T09:17:11+00:00 app[web.1]:   app/views/layouts/_header.html.erb:16:in `_app_views_layouts__header_html_erb___3404956210772716386_32718660'
2012-06-04T09:17:11+00:00 app[web.1]:   app/views/layouts/application.html.erb:10:in `_app_views_layouts_application_html_erb__4043808991853607868_39058420' 
```

我最近在 Heroku 和本地都从 WEBrick 更改为 Thin。使用WEBrick时没有问题，本地也不存在问题。有什么问题或有更好的方法来实现这一目标？

# session - offline_access 将被弃用，它会影响 session_key，rest api 的秘密吗？

> ID：10879099
> 
> 赞同：-1
> 
> 时间：2012-06-04T09:29:27.437
> 
> 标签：session, facebook-rest-api

`offline_access`将被弃用，它是否会影响 REST API 的 session_key、secret？如果我存储 REST 身份验证信息，它可以使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:37:23.697

这对与 API 查询或身份验证流程相关的任何事情都没有影响，除了您不会获得永久权限并且`access_token`需要`access_token`从用户那里获得活动并手动扩展它（如果需要）之外。

顺便说一句，REST API 也不应该积极使用，因为它会被弃用

> **我们正在弃用[REST API](https://developers.facebook.com/docs/reference/rest/)**。如果您正在构建新的 Facebook 应用，请使用 Graph API。虽然我们还没有移植一些功能，但[Graph API](https://developers.facebook.com/docs/reference/api/)是 Facebook 平台向前发展的中心，所有新功能都将在这里找到。

# sql-server - 复制是我的方案的最佳方法吗？

> ID：10879103
> 
> 赞同：0
> 
> 时间：2012-06-04T09:29:50.987
> 
> 标签：sql-server

我有一个 WinForms 业务应用程序，它连接到业务网络内服务器上的 SQL Server。最近我们添加了一个 ASP.NET 网站，因此可以从 Internet 访问系统中的一些信息。它与 SQL Server 托管在同一台服务器上。

由于来自 Internet 的业务网络可用的带宽，我们希望通过提供商托管网站，但它需要访问 SQL Server 数据库。

95% 的数据更改是由企业使用 WinForms 应用程序进行的。该网站本质上是数据的只读视图，但可以将一些数据添加到系统中，占其他 5%。

复制是实现预期结果的最佳方式吗？例如，业务网络中的 SQL Server 仍然是主数据库，因为大多数更改都是对此进行的，然后将其复制到异地服务器？如果是这样，哪种类型的复制最合适，这是否支持将从 ASP.NET 网站输入的少量数据复制回主服务器？

SQL Server 目前是 2005，但可以根据任何复制要求进行升级。这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:52:40.093

是的，因为 Web 应用程序导致了 5%（最大）的事务；你可以把它分开。

我的意思是，您可以拥有一个不同的数据库，它是主数据库的副本，并让 Web 应用程序指向该数据库。

您可以设置双向事务复制。这样，对主数据库进行的事务将被复制，对辅助数据库进行的事务也将被复制。

无需升级；因为 SQL Server 2005 支持复制。

有关详细信息，请在此处查看有关复制的 MSDN：[双向事务复制](http://msdn.microsoft.com/en-us/library/ms151855(v=sql.90).aspx)

简而言之，以下是您将执行的步骤：

1.  对主数据库进行完整备份
2.  将数据库恢复到新创建的数据库服务器
3.  配置它们之间的反式复制。

为了获得更好的性能，您还可以将主数据库镜像到其他数据库服务器上。

# mysql - 如何在 MYSQL 表的子集内自增

> ID：10879104
> 
> 赞同：3
> 
> 时间：2012-06-04T09:29:51.337
> 
> 标签：mysql, auto-increment

为了说明我的问题，我将使用作者和书籍的类比。

我有 2 个表“作者”和“书籍”。作者是唯一的，书籍使用外键约束与特定作者绑定。

我想知道是否有可能在“books”表中有一个名为“booknum”的列，该列在单个作者的子集中自动递增。因此，如果表格有 100 行并且我插入作者的第四本书，它会将 4 放入“booknum”列。

![数据库映像](../Images/361399b22ec7faea9f22963dafb94ed3.png)

例如，如果 books 表有 6 行：

```
id | authors_id | booknum | name

1  | 1          | 1       | "hello"

2  | 1          | 2       | "goodbye"

3  | 2          | 1       | "booktitle"

4  | 3          | 1       | "more title"

5  | 1          | 3       | "nametwo"

6  | 2          | 2       | "nameone" 
```

这在 mysql 中是否可能，还是我需要去检查最后创建的书并在添加书时手动增加？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T13:07:05.430

您可以使用触发器：

```
CREATE TRIGGER biBooks 
  BEFORE INSERT ON books 
  FOR EACH ROW SET NEW.booknum = (
    SELECT COALESCE(MAX(booknum), 0) + 1 
      FROM books 
      WHERE authors_id = NEW.authors_id
  )
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T04:49:29.757

单表语法：

```
UPDATE [LOW_PRIORITY] [IGNORE] table_reference
SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
[WHERE where_condition]
[ORDER BY ...]
[LIMIT row_count] 
```

多表语法：

```
UPDATE [LOW_PRIORITY] [IGNORE] table_references
SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
[WHERE where_condition] 
```

对于单表语法，**UPDATE**语句用新值更新命名表中现有行的列。**SET**子句指示要修改的列以及应给定的值。每个值都可以作为表达式给出，也可以使用关键字**DEFAULT**将列显式设置为其默认值。**WHERE**子句（如果给定）指定标识要更新哪些行的条件。如果**没有 WHERE**子句，所有行都会更新。如果指定了**ORDER BY**子句，则按指定的顺序更新行。**LIMIT**子句对可以更新的行数进行了限制。

对于多表语法，**UPDATE**更新 table_references 中命名的每个表中满足条件的行。每个匹配的行都会更新一次，即使它多次匹配条件。对于多表语法，不能使用**ORDER BY**和**LIMIT 。**

# twitter-bootstrap - 无法在 twitter 引导程序中调用未定义错误的方法“charAt”

> ID：10879107
> 
> 赞同：5
> 
> 时间：2012-06-04T09:29:59.293
> 
> 标签：twitter-bootstrap, less, ruby-on-rails-3.2

我正在创建第一个 twitter 引导应用程序，但在 rails 3.2.3 和 ruby​​ 1.8.7 中出现以下错误

```
 ActionView::Template::Error (Cannot call method 'charAt' of undefined
  (in /home/likewise-open/RADIXLOCAL/urjit.rajgor/workspace/twitter_bootstrap/app/assets/stylesheets/bootstrap_and_overrides.css.less)):
    11:       <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    12:     <![endif]-->
    13: 
    14:     <%= stylesheet_link_tag "application"  %>
    15: 
    16:     <link href="images/favicon.ico" rel="shortcut icon">
    17:     <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
   app/views/layouts/application.html.erb:14:in `_app_views_layouts_application_html_erb__1043627680__634423168'
   app/controllers/posts_controller.rb:7:in `index' 
```

我的宝石文件

* * *

```
 source 'https://rubygems.org'

 gem 'rails', '3.2.3'
 # Bundle edge Rails instead:
 # gem 'rails', :git => 'git://github.com/rails/rails.git'

 gem 'mysql2'
 gem "execjs"
 gem 'json'
 # Gems used only for assets and not required
 # in production environments by default.
gem "twitter-bootstrap-rails", :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'less-rails'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platform => :ruby
  gem 'uglifier', '>= 1.0.3'

end
gem 'jquery-rails' 
```

应用程序.css

* * *

```
 /*
 * This is a manifest file that'll automatically include all the stylesheets available  in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and  they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 *= require_self
 *= require bootstrap_and_overrides
 *= require_tree
 */ 
```

bootstrap_and_overrides.css.less

* * *

```
 @import "twitter/bootstrap/bootstrap";
 body { padding-top: 60px; }

 @import "twitter/bootstrap/responsive";

// Set the correct sprite paths
 @iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png');
 @iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white.png');

 // Set the Font Awesome (Font Awesome is default. You can disable by commenting below lines)
 @fontAwesomeEotPath: asset-path('fontawesome-webfont.eot');
 @fontAwesomeWoffPath: asset-path('fontawesome-webfont.woff');
 @fontAwesomeTtfPath: asset-path('fontawesome-webfont.ttf');
 @fontAwesomeSvgzPath: asset-path('fontawesome-webfont.svgz');
 @fontAwesomeSvgPath: asset-path('fontawesome-webfont.svg');

// Font Awesome
@import "fontawesome"; 
```

帮我。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:06:28.257

更新到 Ruby 1.9.3 修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T18:27:46.720

确保您没有任何无效的 LESS 语法。就我而言，我有几个文件在结束大括号后带有额外的分号：`selector { color:white; };`

我注意到 Sublime Text 2 LESS 语法荧光笔偶尔会为你插入这些小宝石；）

# graphviz - Graphviz：更改整个图形的字体？

> ID：10879115
> 
> 赞同：88
> 
> 时间：2012-06-04T09:30:31.717
> 
> 标签：graphviz

我想知道是否可以为整个图形定义替代字体。

```
...
digraph script_concept {
graph [layout="dot",fontname="helvetica"];
... 
```

根据this [1](http://webcache.googleusercontent.com/search?q=cache%3acUK902XMrrsJ%3ahttps://mailman.research.att.com/pipermail/graphviz-interest/2008q3/005489.html/) old post fontname属性只能单独定义：

> 节点和边不继承图形的字体，需要单独指定

有没有其他方法，如何全局定义字体？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-06-04T11:36:31.167

不，没有别的办法。

与您链接的论坛帖子一样，您必须在 graphviz 文件的开头单独定义默认值（如其他属性）：

```
digraph g {
 graph [fontname = "helvetica"];
 node [fontname = "helvetica"];
 edge [fontname = "helvetica"];
 ...
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-03-23T10:47:16.227

不确定这是否是最近的更新，但您可以使用`-G`,`-E`和`-N`属性标志在命令行级别更改这些。也就是说，以下对我有用：

```
$ dot -Tpng -Nfontname=Roboto -Nfontsize=10 \
    -Efontname=Roboto -Efontsize=10 \
    tree.dot > tree.png 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-28T14:28:18.203

但是，如果您要导出 svg，有一个简单的技巧：

`sed 's/Times,serif/Helvetica/g' thegraph.svg > thegraph_helvetica.svg`

将它与 Make 结合起来，所有的恐怖都将被隐藏 :) 这是一个 Makefile 示例：

```
all: helvetica

svg:
    cat thegraph.dot | dot -Tsvg > thegraph.svg
helvetica: svg
    sed 's/Times,serif/Helvetica/g' thegraph.svg > thegraph_helvetica.svg 
```

# c# - 用于在 C# .net 中保存可配置值的配置文件与注册表

> ID：10879116
> 
> 赞同：4
> 
> 时间：2012-06-04T09:30:34.130
> 
> 标签：c#, registry, configuration-files

我正在开发一个包含多个组件的项目，例如 Windows 服务、Web 服务和 Web 界面。我对所有这些组件都有一些共同的配置值。我还必须定期更改值。由于我必须更改所有应用程序中的值，我正在考虑将常用值保存在注册表中。在注册表中保存值有什么缺点吗？谁能告诉我这样做的利弊。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:42:49.190

There are lots of disadvantages to registry config. You can't easily port your configuration to a new environment, you need to implement some sort of UI to allow user edits, registry access requires permissions your end user may not have on their machine.

Use a configuration file (e.g; xml) for local configuration, or a database if you need centralised configuration.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:46:20.440

使用注册表设置会使您的部署变得困难。您必须在设置和卸载过程中处理它。

最好在客户端机器上占用较小的空间。

# android - 获取 FQL 实时更新

> ID：10879123
> 
> 赞同：1
> 
> 时间：2012-06-04T09:30:58.147
> 
> 标签：android, facebook, facebook-graph-api, facebook-fql

我正在使用 FQL 进行查询。我想每 15 分钟重复一次查询，看看是否发生任何变化。所以理想情况下我想做一个 FQL 查询，等待 15 分钟再做一次相同的查询等等......

有什么办法可以使用推送通知来做到这一点？我阅读了有关实时 facebook api 的信息，但我不确定它是否可以用 FQL 来实现。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:44:52.360

不，[实时更新](http://developers.facebook.com/docs/reference/api/realtime/)仅适用于图形对象，并且根据文档仅适用于用户、权限和页面对象（而不是所有字段或连接）。

由于 FQL 只是另一个从 facebook 获取数据的 api，因此来自它的数据和来自 graph api 的数据是相同的。
您应该能够注册实时更新（如果它支持您需要的内容），当它到达时，您可以发出 FQL 请求，以您想要/需要/习惯的方式获取数据，这样您没有变化时不会“浪费”FQL 请求。

* * *

# 编辑

这`online_presence`是有问题的，因为您无法从图形 api 访问它，因此您别无选择，只能定期发送该 fql 请求。

但是请记住，即使使用该解决方案，您也不应该*总是*期望得到正确的答案，正如您在此错误报告中看到的那样：[online_presence 返回 null](https://developers.facebook.com/bugs/263442327069657)（设置为已修复，但请查看评论，也来自我自己的经验我可以说返回的数据非常不一致）。

不仅如此，`online_presence`在 fb 聊天中在线而不是在 facebook 上在线的方式：

> 用户的 Facebook 聊天状态。返回一个字符串，其中之一是活动、空闲、离线或错误（当 Facebook 无法确定服务器端的存在信息时）。当出于隐私原因限制该信息时，查询不会返回用户的 Facebook 聊天状态。

If that's what you're looking for then you might want to consider using the [Chat API](https://developers.facebook.com/docs/chat/) which let's you log in as the user to the facebook chat servers using xmpp.
With this solution you won't have to make requests to fb asking if someone is online, the presence messages will be pushed to your client.

# iphone - 如何在不丢失精度的情况下将 NSDecimalNumber 转换为 CLLocationDegrees？

> ID：10879125
> 
> 赞同：0
> 
> 时间：2012-06-04T09:31:14.053
> 
> 标签：iphone, objective-c, ios, ipad

我需要将***NSDecimalNumber转换为需要转换为******CLLocationDegrees***的纬度/经度值。我使用***了 -[NSDecimalNumber doubleValue]***方法。但是该值失去了精度。我希望值相同。以下是我正在谈论的内容（我希望每个人都已经意识到这个问题）。

```
NSString *coordStr = @"-33.890934125621094";
NSDecimalNumber *lat = [NSDecimalNumber decimalNumberWithString:coordStr];
NSLog(@"%@", lat); // -33.890934125621094
NSLog(@"%lf", [lat doubleValue]); // -33.890934 
```

有什么方法可以代替上述方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:38:22.290

尝试使用`doubleValue`方法转换字符串

```
NSString *coordStr = @"-33.890934125621094";

NSLog(@"%.17g",coordStr.doubleValue); //-33.890934125621094 
```

查看这篇文章：[如何在 iOS 上以全精度打印双精度？](https://stackoverflow.com/questions/5729004/how-to-print-a-double-with-full-precision-on-ios)

**编辑：** 文档说： `typedef double CLLocationDegrees;`所以你只能`double test = coordStr.doubleValue;`解决问题，`NSLog`它不会打印完整的值。但是 double var 会保存完整的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:13:45.780

CLLocationDegree 是双精度的。所以最大精度只能等于双精度数据类型。

# json - 合并 Firefox 书签

> ID：10879126
> 
> 赞同：1
> 
> 时间：2012-06-04T09:31:15.773
> 
> 标签：json, firefox, bookmarks

我有两台独立的计算机，在这些计算机上我在 Firefox 中有一组单独的书签。

我想将两者合并，以便一次访问所有链接。

有什么实用程序可以帮助我解决这个问题。

我可以获取两个书签文件（`.json`-preferred, `.html`）并尝试通过解析它们来创建单个书签文件。但是，我想确保没有错误，并且我还想从结果文件中删除重复项。

任何指针将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-16T15:06:16.797

在 HTML 中导出书签然后导入`bookmarks-date.html`是合并给定书签集的最简单和最快的方法。特别是 Firefox 从版本 43 开始支持导出/导入*标签*和*注释*。这允许导出/导入您想要保留的任何书签文件夹，而不是替换整个文件夹，最后 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:45:14.263

看看[Firefox 同步](http://support.mozilla.org/en-US/kb/firefox-sync-take-your-bookmarks-and-tabs-with-you)。这是一种让您的书签、历史记录、首选项、密码等在多个设备之间保持同步的方法。此外，它是 Firefox 的标准配置；您甚至无需安装附加组件即可使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:20:33.703

您可以[导出](https://support.mozilla.org/en-US/kb/export-firefox-bookmarks-to-backup-or-transfer)书签或在您的[个人资料文件夹](https://support.mozilla.org/en-US/kb/Backing%20up%20your%20information)中查找它们。

我认为合并两个书签文件的最简单方法是将一个配置文件导入另一个 Firefox（并最终再次导出合并的书签）。它不需要任何（手动）解析，也不应该产生任何错误。

# emacs - 突出显示 emacs 缓冲区中缺少哪些文件名

> ID：10879133
> 
> 赞同：4
> 
> 时间：2012-06-04T09:31:56.453
> 
> 标签：emacs, overlay, elisp, highlighting

在 GNU Emacs 中，我可以使用类似假设的“flyexist.el”之类的东西——我有一个缓冲区，其中包含绝对（Unix）文件名（加上一些额外的文本）。这些文件中的大多数都存在，但有些文件丢失了。我想运行一个函数来突出显示丢失的文件（可能带有红色覆盖）。此函数需要确定缓冲区中的哪些文本看起来像文件名（一些误报是可以的），然后使用 file-exists-p 处理它。

例如，假设我的缓冲区包含

```
Some random text mentioning /file/that/does/exist.txt, 
some more random text, and a /file/that/does/not-exist.txt 
```

我想突出显示第二个文件。

这样的东西已经存在了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T22:16:38.027

我是 emacs 黑客的新手……这是我的“次要模式”版本。

```
(defvar filehi-path-re "\\([/$][[:alnum:]$-_.]+\\)+"
  "Regexp used for path matching.")

(defface filehi-file-existing
  '((t (:foreground "White" :background "Green")))
  "Face for existing files.")

(defface filehi-file-missing
  '((t (:foreground "Yellow" :background "Red")))
  "Face for missing files.")

(defun filehi-check-and-highlight (start end)
  "Check if substring is existing file path and highlight it."
    (remove-overlays start end 'name 'filehi-highlight)
    (let ((overlay (make-overlay start end)))
      (overlay-put overlay 'name 'filehi-highlight)
      (overlay-put overlay 'face (if (file-exists-p (substitute-in-file-name
                                                     (buffer-substring start end)))
                                     'filehi-file-existing
                                   'filehi-file-missing))))

(defun filehi-highlight-file-paths (&optional start end _ignore)
   "Run through the buffer and highliht file paths."
    (save-excursion
      (save-match-data ; fixes problem with dabbrev (and may be more...)
        (remove-overlays (point-min) end 'name 'filehi-highlight)
        (let ((prev-end (point-min)))
          (goto-char (point-min)) ; FIXME use something like greedy
                                        ; search-backward
          (while (and (<= (point) end)
                      (re-search-forward filehi-path-re nil t))
            (filehi-check-and-highlight (match-beginning 0) (match-end 0)))))))

(define-minor-mode filehi-mode
  "Minor mode for highlighting existing file paths.
May conflict with other modes..."
  nil " Filehi" nil
  (if filehi-mode
      (progn ; enable mode
        (make-local-hook 'after-change-functions)
        (filehi-highlight-file-paths (point-min) (point-max))
        (add-hook 'after-change-functions 'filehi-highlight-file-paths nil t))
    ; disable mode
    (remove-hook 'after-change-functions 'filehi-highlight-file-paths t)
    (remove-overlays (point-min) (point-max) 'name 'filehi-highlight))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T22:08:08.820

试试这个（你必须手动触发它，或者将它合并到其他一些定期例程中）：

```
(defun x-mark-missing-files ()
  (interactive)
  (save-excursion
   (while (search-forward-regexp "~?/[A-Za-z./-]+")
     (when (not (file-exists-p (match-string 0)))
       (overlay-put
        (make-overlay (match-beginning 0) (match-end 0))
        'face '(:background "red")))))) 
```

使用文件名正则表达式进行一些操作，以使其正确无误。

# c# - 用对象填充数组 (dateTime)

> ID：10879136
> 
> 赞同：-1
> 
> 时间：2012-06-04T09:32:00.807
> 
> 标签：c#

我的错误在我的 for 语句中，语法错误是说我的构造函数没有接受三个参数。

```
 string[] first = new string[20] { "Scott", "Ramona", "Todd", "Melissa", "Naomi", "Leland", "Conor", "Julie", "Armondo", "Leah",
                                          "Frank", "Peter", "Ila", "Mandy", "Sammy", "Gareth", "Garth", "Wayne", "Freddy", "Mark" };

        string[] last = new string[20] { "Kennedy", "Kennedy", "Kennedy", "Kennedy", "Kennedy", "Kennedy", "Carrel", "MaloyTheBeautiful", "Johnson", "Smith", 
                                         "Sinatra", "Clemens", "Eels", "Johnson", "Eels", "Thompson", "Brooks", "World", "Crugar", "Thomas" };
        DateTime[] birth = new DateTime[20];
        birth[0] = new DateTime(1987, 22, 7);
        birth[1] = new DateTime(1962, 15, 9);
        birth[2] = new DateTime(1984, 21, 4);
        birth[3] = new DateTime(1977, 24, 1);
        birth[4] = new DateTime(1983, 12, 8);
        birth[5] = new DateTime(1979, 14, 1);
        birth[6] = new DateTime(1965, 19, 9);
        birth[7] = new DateTime(1968, 21, 2);
        birth[8] = new DateTime(1980, 22, 7);
        birth[9] = new DateTime(1982, 20, 7);
        birth[10] = new DateTime(1984, 19, 4);
        birth[11] = new DateTime(1968, 11, 9);
        birth[12] = new DateTime(1968, 21, 8);
        birth[13] = new DateTime(1975, 5, 2);
        birth[14] = new DateTime(1945, 15, 3);
        birth[15] = new DateTime(1969, 14, 6);
        birth[16] = new DateTime(1987, 141, 4);
        birth[17] = new DateTime(1976, 23, 5);
        birth[18] = new DateTime(1989, 28, 6);
        birth[19] = new DateTime(1988, 23, 9);

        // Populate Array Person[] People = new Person[20];     

        for (int i = 0; i < People.Length; i++)
        {
            People[i]= new Person(first[i], last[i], birth[i]);
        } 
```

我的班级看起来像这样

```
public class Person
{
    private string _firstname;
    private string _lastname;
    private DateTime _birthDate;

    public void Personn(string firstname, string lastname, DateTime birthDate)
    {
        _firstname = firstname;
        _lastname = lastname;
        _birthDate = birthDate;
    }

    public string Firstname
    { get { return _firstname; } }

    public string Lastname
    { get { return _lastname; } }

    public DateTime Birthdate
    { get { return _birthDate; } }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:34:02.137

代替

```
 public void Personn(string firstname, string lastname, DateTime birthDate) 
```

利用

```
 public Person(string firstname, string lastname, DateTime birthDate) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:34:32.950

您认为构造函数只是一种方法。您拼错了班级名称。

改变这个：

```
 public void Personn(string firstname, string lastname, DateTime birthDate) 
```

至：

```
 public Person(string firstname, string lastname, DateTime birthDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:38:34.297

构造函数没有任何返回类型。`void`从您的构造函数中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:34:54.890

检查您的构造函数，它不应该有返回类型，并且应该与类同名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T09:37:00.327

我认为你应该使用而不是这一行：

```
 public void Personn(string firstname, string lastname, DateTime birthDate) 
```

这个：

```
 public Person(string firstname, string lastname, DateTime birthDate) 
```

因为目前它是一个 void 方法而不是构造函数，但是在这种情况下你有一个没有参数的默认构造函数。这可能是您的问题的原因！

安德鲁

# python - How can I memoize a class instantiation in Python?

> ID：10879137
> 
> 赞同：25
> 
> 时间：2012-06-04T09:32:08.483
> 
> 标签：python, caching, singleton, unique, memoization

Ok, here is the real world scenario: I'm writing an application, and I have a class that represents a certain type of files (in my case this is photographs but that detail is irrelevant to the problem). Each instance of the Photograph class should be unique to the photo's filename.

The problem is, when a user tells my application to load a file, I need to be able to identify when files are already loaded, and use the existing instance for that filename, rather than create duplicate instances on the same filename.

To me this seems like a good situation to use memoization, and there's a lot of examples of that out there, but in this case I'm not just memoizing an ordinary function, I need to be memoizing `__init__()`. This poses a problem, because by the time `__init__()` gets called it's already too late as there's a new instance created already.

In my research I found Python's `__new__()` method, and I was actually able to write a working trivial example, but it fell apart when I tried to use it on my real-world objects, and I'm not sure why (the only thing I can think of is that my real world objects were subclasses of other objects that I can't really control, and so there were some incompatibilities with this approach). This is what I had:

```
class Flub(object):
    instances = {}

    def __new__(cls, flubid):
        try:
            self = Flub.instances[flubid]
        except KeyError:
            self = Flub.instances[flubid] = super(Flub, cls).__new__(cls)
            print 'making a new one!'
            self.flubid = flubid
        print id(self)
        return self

    @staticmethod
    def destroy_all():
        for flub in Flub.instances.values():
            print 'killing', flub

a = Flub('foo')
b = Flub('foo')
c = Flub('bar')

print a
print b
print c
print a is b, b is c

Flub.destroy_all() 
```

Which output this:

```
making a new one!
139958663753808
139958663753808
making a new one!
139958663753872
<__main__.Flub object at 0x7f4aaa6fb050>
<__main__.Flub object at 0x7f4aaa6fb050>
<__main__.Flub object at 0x7f4aaa6fb090>
True False
killing <__main__.Flub object at 0x7f4aaa6fb050>
killing <__main__.Flub object at 0x7f4aaa6fb090> 
```

It's perfect! Only two instances were made for the two unique id's given, and Flub.instances clearly only has two listed.

But when I tried to take this approach with the objects I was using, I got all kinds of nonsensical errors about how `__init__()` took only 0 arguments, not 2\. So I'd change some things around and then it would tell me that `__init__()` needed an argument. Totally bizarre.

After a while of fighting with it, I basically just gave up and moved all the `__new__()` black magic into a staticmethod called `get`, such that I could call `Photograph.get(filename)` and it would only call `Photograph(filename)` if filename wasn't already in `Photograph.instances`.

Does anybody know where I went wrong here? Is there some better way to do this?

Another way of thinking about it is that it's similar to a singleton, except it's not globally singleton, just singleton-per-filename.

[Here's my real-world code using the staticmethod get](https://github.com/robru/gottengeography/blob/908a1842116dc26ca57e3e4db6802fa563bc2008/gg/photos.py#L74) if you want to see it all together.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-04T13:22:36.867

Let us see two points about your question.

# Using memoize

You can use memoization, but you should decorate the *class*, not the `__init__` method. Suppose we have this memoizator:

```
def get_id_tuple(f, args, kwargs, mark=object()):
    """ 
    Some quick'n'dirty way to generate a unique key for an specific call.
    """
    l = [id(f)]
    for arg in args:
        l.append(id(arg))
    l.append(id(mark))
    for k, v in kwargs:
        l.append(k)
        l.append(id(v))
    return tuple(l)

_memoized = {}
def memoize(f):
    """ 
    Some basic memoizer
    """
    def memoized(*args, **kwargs):
        key = get_id_tuple(f, args, kwargs)
        if key not in _memoized:
            _memoized[key] = f(*args, **kwargs)
        return _memoized[key]
    return memoized 
```

Now you just need to decorate the class:

```
@memoize
class Test(object):
    def __init__(self, somevalue):
        self.somevalue = somevalue 
```

Let us see a test?

```
tests = [Test(1), Test(2), Test(3), Test(2), Test(4)]
for test in tests:
    print test.somevalue, id(test) 
```

The output is below. Note that the same parameters yield the same id of the returned object:

```
1 3072319660
2 3072319692
3 3072319724
2 3072319692
4 3072319756 
```

Anyway, I would prefer to create a function to generate the objects and memoize it. Seems cleaner to me, but it may be some irrelevant pet peeve:

```
class Test(object):
    def __init__(self, somevalue):
        self.somevalue = somevalue

@memoize
def get_test_from_value(somevalue):
    return Test(somevalue) 
```

# Using `__new__`:

Or, of course, you can override `__new__`. Some days ago I posted [an answer about the ins, outs and best practices of overriding `__new__`](https://stackoverflow.com/a/10789315/287976) that can be helpful. Basically, it says to always pass `*args, **kwargs` to your `__new__` method.

I, for one, would prefer to memoize a function which creates the objects, or even write a specific function which would take care of never recreating a object to the same parameter. Of course, however, this is mostly a opinion of mine, not a rule.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-06T08:06:28.370

The solution that I ended up using is this:

```
class memoize(object):
    def __init__(self, cls):
        self.cls = cls
        self.__dict__.update(cls.__dict__)

        # This bit allows staticmethods to work as you would expect.
        for attr, val in cls.__dict__.items():
            if type(val) is staticmethod:
                self.__dict__[attr] = val.__func__

    def __call__(self, *args):
        key = '//'.join(map(str, args))
        if key not in self.cls.instances:
            self.cls.instances[key] = self.cls(*args)
        return self.cls.instances[key] 
```

And then you decorate the *class* with this, not `__init__`. Although brandizzi provided me with that key piece of information, his example decorator didn't function as desired.

I found this concept quite subtle, but basically when you're using decorators in Python, you need to understand that the thing that gets decorated (whether it's a method or a class) is actually *replaced by* the decorator itself. So for example when I'd try to access `Photograph.instances` or `Camera.generate_id()` (a staticmethod), I couldn't actually access them because `Photograph` doesn't actually refer to the original Photograph class, it refers to the `memoized` *function* (from brandizzi's example).

To get around this, I had to create a decorator class that actually took all the attributes and static methods from the decorated class and exposed them as it's own. Almost like a subclass, except that the decorator class doesn't know ahead of time what classes it will be decorating, so it has to copy the attributes over after the fact.

The end result is that any instance of the `memoize` class becomes an almost transparent wrapper around the actual class that it has decorated, with the exception that attempting to instantiate it (but really calling it) will provide you with cached copies when they're available.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T10:33:03.210

The parameters to `__new__` also get passed to `__init__`, so:

```
def __init__(self, flubid):
    ... 
```

You need to accept the `flubid` argument there, even if you don't use it in `__init__`

Here is the relevant comment taken from [typeobject.c in Python2.7.3](http://hg.python.org/cpython/file/70274d53c1dd/Objects/typeobject.c#l2795)

```
/* You may wonder why object.__new__() only complains about arguments
   when object.__init__() is not overridden, and vice versa.

   Consider the use cases:

   1\. When neither is overridden, we want to hear complaints about
      excess (i.e., any) arguments, since their presence could
      indicate there's a bug.

   2\. When defining an Immutable type, we are likely to override only
      __new__(), since __init__() is called too late to initialize an
      Immutable object.  Since __new__() defines the signature for the
      type, it would be a pain to have to override __init__() just to
      stop it from complaining about excess arguments.

   3\. When defining a Mutable type, we are likely to override only
      __init__().  So here the converse reasoning applies: we don't
      want to have to override __new__() just to stop it from
      complaining.

   4\. When __init__() is overridden, and the subclass __init__() calls
      object.__init__(), the latter should complain about excess
      arguments; ditto for __new__().

   Use cases 2 and 3 make it unattractive to unconditionally check for
   excess arguments.  The best solution that addresses all four use
   cases is as follows: __init__() complains about excess arguments
   unless __new__() is overridden and __init__() is not overridden
   (IOW, if __init__() is overridden or __new__() is not overridden);
   symmetrically, __new__() complains about excess arguments unless
   __init__() is overridden and __new__() is not overridden
   (IOW, if __new__() is overridden or __init__() is not overridden).

   However, for backwards compatibility, this breaks too much code.
   Therefore, in 2.6, we'll *warn* about excess arguments when both
   methods are overridden; for all other cases we'll use the above
   rules.

*/ 
```

# javascript - 移动 div 不会停止 onclick 事件

> ID：10879141
> 
> 赞同：-1
> 
> 时间：2012-06-04T09:32:25.860
> 
> 标签：javascript, html, css

我想制作 2 个 div 的动画，但我没有成功:(。

我希望 DIV Tablou 向左移动，并显示 DIV Frame1、Frame2 等……但每次我点击我的链接时，Tablou DIV 都会向左移动。到目前为止，我成功地出现了框架并且 DIV Tablou 向左移动。

问题是：我怎样才能让 DIV Tablou 向左移动并停留在那里，当我点击关闭按钮时，它会向右移动到他的原始位置？非常感谢

**的HTML：**

```
<div id="tablou"  onclick="move_left()">
  <div id="logo"></div>
    <div id="menu">
     <ul>
      <li><a href="javascript:show('frame1');" class="categories">Main</a></li>
      <li><a href="javascript:show('frame2');" class="categories">About Us</a></li>
     </ul>
    </div> 
```

```
<div name="frames" id="frame1"> Frame 1 </div>

<div name="frames" id="frame2"> Frame 2 </div> 
```

**我正在使用的脚本：**

```
function show(currentframe) {
     $('div[name|="frames"]').each(function(index) {
          if ($(this).attr("id") == currentframe) {
               $(this).show(200);      
          }
          else {
               $(this).hide(600);
          }
     });
}
function move_left() {
    $('#tablou').animate({
        'marginLeft' : "-=250px"
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:46:07.687

在函数`show`中，您必须阻止事件冒泡，但是只要您附加这样的事件侦听器，您就不能这样做。使用更现代的东西，因为我看到你正在使用 jQuery 尝试这样的事情：

HTML 代码：

```
<div id="menu">
  <ul>
    <li><a href="#" id="main" class="categories">Main</a></li>
    <li><a href="#" id="aboutus" class="categories">About Us</a></li>
  </ul>
</div> 
```

Javascript：

```
$("#main").click(function(e) {
    // This prevents that the event bubbles up to #tablou
    e.stopPropagation();
    // This prevents that clicking on the link adds # to the url
    e.preventDefault();
    show("frame1");
});
$("#aboutus").click(function(e) {
    e.stopPropagation();
    e.preventDefault();
    show("frame2");
}); 
```

# sql-server - 如何在 SQL Server 数据库中设计用户/角色架构？

> ID：10879143
> 
> 赞同：8
> 
> 时间：2012-06-04T09:32:28.327
> 
> 标签：sql-server

我想设计一个用户/角色系统：

用户有一个名称和密码，然后用户可以拥有多个角色，例如`Admin`.

为此，我创建了一个这样的模式：

**用户：**

```
CREATE TABLE [dbo].[Users]
(
    [id] [int] NOT NULL,
    [name] [nvarchar](50) NULL,
    [password] [nvarchar](50) NULL,

    CONSTRAINT [PK_Users] PRIMARY KEY CLUSTERED ([id] ASC)
) 
```

**角色：**

```
CREATE TABLE [dbo].[Roles]
(
    [id] [int] NOT NULL,
    [name] [nvarchar](50) NULL,

    CONSTRAINT [PK_Roles] PRIMARY KEY CLUSTERED ([id] ASC)
) 
```

**用户角色：**

```
CREATE TABLE [dbo].[User_Roles]
(
    [id] [int] NOT NULL,
    [User_id] [int] NOT NULL,
    [Role_id] [int] NOT NULL,

    CONSTRAINT [PK_User_Roles] PRIMARY KEY CLUSTERED ([id] ASC)
) 
```

我的问题是：我应该使用外键吗`User_Roles.User_id -> User.Id`

如果是，为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T09:41:48.560

不太清楚你的意思，但是...

*   `User_Roles`应该只有 2 列`User_id`，`Role_id`
    这两列都构成主键
*   您不需要额外的 id 列`User_Roles`
*   `User_id`是一个外键`Users.id`
*   `Role_id`是一个外键`Roles.id`

编辑：现在我明白了。是的，[总是使用外键](https://stackoverflow.com/a/9076742/27535)

还...

*   如果`password`是`nvarchar(50)`，这意味着纯文本。[这很*糟糕*。](https://stackoverflow.com/q/2283937/27535)
*   如果你有重复`name`的值`Users`，你怎么知道哪个用户是哪个？
    特别是如果他们有相同的密码（这会发生，因为我们肉袋是愚蠢的）

创建主键后评论后编辑...

```
CREATE TABLE [dbo].[User_Roles]
(
    [User_id] [int] NOT NULL,
    [Role_id] [int] NOT NULL,

    CONSTRAINT [PK_User_Roles] PRIMARY KEY CLUSTERED ([User_id], [Role_id]),
    CONSTRAINT [UQ_ReversePK] UNIQUE ([Role_id], [User_id])
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-18T20:00:15.383

Spring Security 提出[以下](http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#user-schema)建议：

```
create table users(
    username varchar_ignorecase(50) not null primary key,
    password varchar_ignorecase(50) not null,
    enabled boolean not null
);

create table authorities (
    username varchar_ignorecase(50) not null,
    authority varchar_ignorecase(50) not null,
    constraint fk_authorities_users foreign key(username) references users(username)
);
create unique index ix_auth_username on authorities (username,authority); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:34:50.480

当数据建模关系时，始终使用外键。在您的示例中，如果您不创建外键，则没有什么可以阻止您（或有权访问数据库的其他人）错误地（或故意）删除当前使用的角色。

假设您有很多用户和几个角色。其中一个角色称为“管理员”，在您的应用程序中需要它才能执行某些任务。如果您没有设置外键，则数据库中没有任何内容可以阻止某人删除管理员角色，从而导致您的应用程序：

*   可能会崩溃，因为它会寻找一个不再在数据库中的角色
*   如果不是上述情况，那么至少没有用户将拥有“管理员”角色，关闭需要它的应用程序部分

另一方面，如果您已经设置了外键，如果您尝试删除当前分配给某个用户的角色（通​​过 User_Roles 表），您将收到来自数据库的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-25T07:34:22.390

与@GBN 略有不同的最佳方法之一是：

我希望这可以帮助你或其他人

```
CREATE TABLE [dbo].[UserRoles](
    [roleId] [int] NOT NULL,
    [userId] [int] NOT NULL,
    [CreateDate] [datetime] NULL,
    [CreateUser] [nvarchar](30) NULL,
    [ModifyDate] [datetime] NULL,
    [ModifyUser] [nvarchar](30) NULL,
 CONSTRAINT [PK_User_Roles] PRIMARY KEY CLUSTERED 
(
    [roleId] ASC,
    [userId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY],
 CONSTRAINT [UQ_ReversePK] UNIQUE NONCLUSTERED 
(
    [roleId] ASC,
    [userId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[UserRoles] ADD  CONSTRAINT [DF_UserRoles_ModifyDate]  DEFAULT (getdate()) FOR [ModifyDate]
GO

ALTER TABLE [dbo].[UserRoles]  WITH CHECK ADD  CONSTRAINT [FK_UserRoles_roleId] FOREIGN KEY([roleId])
REFERENCES [dbo].[Roles] ([roleId])
GO

ALTER TABLE [dbo].[UserRoles] CHECK CONSTRAINT [FK_UserRoles_roleId]
GO

ALTER TABLE [dbo].[UserRoles]  WITH CHECK ADD  CONSTRAINT [FK_UserRoles_userId] FOREIGN KEY([userId])
REFERENCES [dbo].[Users] ([uId])
GO

ALTER TABLE [dbo].[UserRoles] CHECK CONSTRAINT [FK_UserRoles_userId]
GO 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-14T09:13:47.460

users_roles 表应包含每个用户及其角色之间的映射。每个用户可以有多个角色，每个角色可以有多个用户：

```
TABLE users
  id INTEGER NOT NULL PRIMARY KEY,
  userName VARCHAR(50) NOT NULL

TABLE roles
  id INTEGER NOT NULL PRIMARY KEY,
  role VARCHAR(20) NOT NULL

CREATE TABLE users_roles (
  userId INTEGER NOT NULL,
  roleId INTEGER NOT NULL,
  primary key (userId, roleId),
  foreign key (userId) references users(id),
  foreign key (roleId) references roles(id)
); 
```

# php - 用图像更新语句

> ID：10879147
> 
> 赞同：0
> 
> 时间：2012-06-04T09:32:47.763
> 
> 标签：php, mysql

我有一个带有用于更新记录和图像的表单的 php 页面 我不知道更新语句有什么问题 ,, 字段的值被采用了，我可以通过 GET 方法在 url 上看到它们......但是当我运行页面并且更新记录信息没有改变，页面上什么也没有出现，，因为没有字段r进行更新我认为我的更新语句有问题，，，这里是代码：

```
<?php

    // Connect to the database
    require("includes/conn.php");
    // Script Variables

    $target_dir = 'images/';

    $file_given = false;
    $inputs_given = false;
    $id_given = false;

    if(isset($_POST['serialid']) && $_POST['serialid'] != "")
    {
        $serialid = $_POST['serialid'];
        $id_given = true;
    }

        // You only need to catch input from a create or modify action, so start by checking for ALL the REQUIRED inputs
        if(isset($_POST['name']) && $_POST['name'] != "" && isset($_POST['description']) && $_POST['description'] != "" && isset($_POST['price']) && $_POST['price'] != "")
        {
            $name = $_POST['name'];
            $paragraph = $_POST['description'];
            $price = $_POST['price'];

            if(isset($_POST['picture']) && $_POST['picture'] != "")
            {
                $picture = basename($_FILES['picture']['name']);
                $file_given = true; 
            } 

            // Just some verification (not really much, but you can write your own functions and slot them in
            $name_safe = true;
            $description_safe = true;
            $price_safe = true;
            $picture_safe = false;

            if($_FILES["picture"]["type"] == "image/gif" || $_FILES["picture"]["type"] == "image/jpg" || $_FILES["picture"]["type"] == "image/png" || $_FILES["picture"]["type"] == "image/bmp")
                $picture_safe = true;

            if($name_safe && $description_safe && $price_safe && $picture_safe)
                $inputs_given = true;
        }

        if($id_given && $inputs_given)
        {
            // Search for the record and see if it exists
            $get_record = mysql_query("SELECT serial, picture FROM products WHERE serial='$serialid'");
            $record_exists = mysql_num_rows($get_record);

            if($record_exists == 1)
            {
                if($file_given)
                {
                    $update_image = ", picture='$picture'";

                    // Now we need to remove the old image from the file system and upload our new one in it's place

                    $previous_image = mysql_result($get_record,'0','picture');
                    unlink($target_dir . $previous_image);

                    //Now that the previous image has been removed, we need to upload our new image
                    $new_image = $target_dir . $picture ;
                    move_uploaded_file($_FILES['picture']['tmp_name'], $new_image);
                }
                else
                    $update_image = "";

                if(mysql_query("UPDATE products SET name='$name', description='$description', price='$price', " . $update_image . " WHERE serial='$serialid'"))
                    $action_output = "Record successfully modified.";
                else
                    $action_output = "Record modification unsuccessful.";
            }
            else
                $action_output = "The record id you specified does not exist.";
        }

?>
<html>
    <head>
        <title>Manage Records</title>
    </head>

    <body>
        <?php echo $action_output; ?>
    </body>
</html>
<?php
    // Disconnect from the database
?> 
```

这是我点击修改时的网址

```
http://localhost/Shopping/update.php?name=View+Sonic+LCD&description=LCD&price=250&picture=C%3A%5CDocuments+and+Settings%5Ce2565%5CMy+Documents%5CTwasul%5Ctlogo%5Cicon%5Cpic1.jpg&serialid=1 
```

我的修改表格是这个

```
<?php

    // Connect to the database
    require("includes/conn.php");
    $id_given = false;
    if(isset($_POST['serialid']) && $_POST['serialid'] != "")
    {
        $serialid = $_POST['serialid'];
        $id_given = true;
    }

    if($id_given)
    {
        $get_record = mysql_query("SELECT * FROM products WHERE serial='$serialid'");
        $record = mysql_fetch_array($get_record);

        $output = '<form method="POST" enctype="multipart/form-data" action="update.php?serialid=' . $record['serialid'] . '&action=modify">

                    <table>
                    <tr>
                    <td>Name:</td>
                    <td><input name="name" type="text"  value="' . $record['name'] . '"/></td>
                    </tr>
                    <tr>
                    <td>Description :</td>
                    <td><textarea name="description" cols="45" rows="5">' . $record['description'] . '</textarea></td>
                    </tr>
                    <tr>
                    <td>Price:</td>
                    <td><input name="price" type="text"  value="' . $record['price'] . '"/></td>
                    </tr>
                    <td colspan="2"><img height="50" width="50" src="../images/' . $record['picture'] . '"/><br/>' . $record['picture'] . '</td>
                    </tr> 
                    <tr>
                    <td>Modify Image:</td>
                    <td><input name="picture" type="file" value="" /></td>
                    </tr>
                    <tr>
                    <td colspan="2"><input type="submit" value="Modify Record"/>
                    </td>
                    </tr>
                    </table>

</form>';

    }
    else
        $output = 'No record id was specified.';
?>
<html>
    <head>
        <title>Modify Record</title>
    </head>

    <body>
        <?php echo $output; ?>
    </body>
</html>
<?php
    // Disconnect from the database
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:41:51.463

First, you have an extra comma in this line, before the `WHERE` :

```
if(mysql_query("UPDATE products SET name='$name', description='$description', price='$price', " . $update_image . " WHERE serial='$serialid'")) 
```

The correct syntax is :

```
if(mysql_query("UPDATE products SET name='$name', description='$description', price='$price' " . $update_image . " WHERE serial='$serialid'")) 
```

Then, you said

> I can see them on url through the GET method

But in your script you are using `$_POST` variable to get values, use `$_GET` instead or change the method of your form to `post`.
If you want to upload a picture you have to use `post` method, the file will be available in the `$_FILES` variable.
In your example, you pass parameters by URL so, with the `get` method, and the "picture" is just the path to the picture in your PC, and it's not uploaded on the server.

**EDIT :**
Add `"<input type='hidden' name='serialid' value='".$record['serialid']."' />"` AND `"<input type='hidden' name='action' value='modify' />"` in your form instead of add this parameters to the action url of it, and it should work

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:46:48.690

您已经添加了逗号 in `$update_image = ", picture='$picture'";`以及 in

if(mysql_query("UPDATE products SET name='$name', description='$description', price='$price' `,`" .$update_image ." WHERE serial='$serialid'"))

删除逗号`$update_image = " picture='$picture'";`或删除此

`if(mysql_query("UPDATE products SET name='$name', description='$description', price='$price' " . $update_image . " WHERE serial='$serialid'"))'`

# jquery - 禁用/启用（切换）两个单选按钮上的日期选择器（范围）

> ID：10879148
> 
> 赞同：0
> 
> 时间：2012-06-04T09:32:52.817
> 
> 标签：jquery, html, jquery-ui, datepicker

我有一个带有两个日期选择器的日期范围，比如这个演示：

[ui 日期选择器演示](http://jqueryui.com/demos/datepicker/#date-range)

但在两个日期字段上都有图标触发器。

现在我想用两个单选按钮禁用/启用这个日期范围：“开”和“关”（不是复选框！）。该图标也必须禁用/启用（灰色或非灰色）。

我为此找到了很多东西，但不是一个完整的解决方案。

这些是我的单选按钮：

```
<input class="radiobutton" type="radio" id="flex_ja" value="noch" name="flex" /><label for="flex">Yes</label>
<input class="radiobutton" type="radio" id="flex_nein" value="nicht mehr" name="flex"/><label for="flex">No</label> 
```

这些是我的日期选择器范围输入：

```
<input id="min_anreise" name="min_anreise" placeholder="Frühestes Anreisedatum"/>
<input id="max_abreise" name="max_abreise" placeholder="Spätestes Abreisedatum"/> 
```

这是来自 ui 演示站点的 javascript 代码

```
 $(function() {
    var dates = $( "#min_anreise, #max_abreise" ).datepicker({
        onSelect: function( selectedDate ) {

        $('#Form').validate().element('#max_abreise');
        $('#Form').validate().element('#min_anreise');

            var option = this.id == "min_anreise" ? "minDate" : "maxDate",
                instance = $( this ).data( "datepicker" ),
                date = $.datepicker.parseDate(
                    instance.settings.dateFormat ||
                    $.datepicker._defaults.dateFormat,
                    selectedDate, instance.settings );
            dates.not( this ).datepicker( "option", option, date );
            }
            });
        }); 
```

我如何结合它来切换日期与单选框？

使用图标禁用日期输入的唯一方法是：

```
$( ".selector" ).datepicker({ disabled: true }); 
```

最后一件事：

当日期被启用并且任何人填写它，并且这个 gfioes 被禁用时，当输入被清除时是否很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:03:41.423

将事件绑定`onclick`到您的单选按钮。

在`onclick`事件处理程序中，检查单选按钮的状态（'on' 或 'off'）

如果“开”：

启用您的日期选择器

如果“关闭”：

禁用您的日期选择器

可以使用您发布的代码来启用和禁用日期选择器：

```
$( ".selector" ).datepicker({ disabled: true }); 
```

# ruby-on-rails-3 - 隔离引擎（门卫） - 使用 main_app 中的辅助方法

> ID：10879150
> 
> 赞同：4
> 
> 时间：2012-06-04T09:32:55.703
> 
> 标签：ruby-on-rails-3, gem

我希望我的门卫视图使用应用程序布局：

[https://github.com/applicake/doorkeeper/wiki/Customizing-views](https://github.com/applicake/doorkeeper/wiki/Customizing-views)

这包含来自主应用程序的路由和辅助方法。

对于路由，我可以将 main_app 前缀到路径，但对于辅助方法，我收到以下错误：

```
undefined method `is_active?' for #<ActionDispatch::Routing::RoutesProxy:0xade808c>

<li class="<%= main_app.is_active?("high_voltage/pages", "api") %>"><%= link_to t('developers'), page_path('api') %></li> 
```

为什么是这样？帮手在`app/helpers/application_helper.rb`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T13:07:07.807

如果您生成了视图并将它们放置在其中，`app/views/doorkeeper/**`那么引擎仍然使用门卫控制器。

要解决此问题，您必须将您的助手包含在引擎的`ApplicationController`. 假设你有这样的事情：

### app/helpers/application_helper.rb

```
module ApplicationHelper
  def my_helper
    "hello"
  end
end 
```

### app/views/doorkeeper/applications/index.html.erb

```
<p>
  <%= my_helper %>
</p> 
```

除非您将应用程序助手包含到门卫控制器中，否则这将不起作用。所以在`config/application.rb`：

```
class YourApp::Application < Rails::Application
  config.to_prepare do
    # include only the ApplicationHelper module
    Doorkeeper::ApplicationController.helper ApplicationHelper

    # include all helpers from your application
    Doorkeeper::ApplicationController.helper YourApp::Application.helpers
  end
end 
```

当您想要自定义布局时，这是类似的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:30:46.713

application_helper.rb 中的辅助方法不是 main_app 的方法。

main_app 变量是一个具有 ActionDispatch::Routing::RoutesProxy 类/模块的对象。

main_app 是一个帮助程序，可让您访问应用程序路由。main_app.page_path('api')，例如。

我假设，使用门卫，您需要访问您想要的路径；main_app.highvoltage_page_path('api').some_doorkeeper_active_method

至少，这应该有望使您朝着正确的方向前进，另请参见：

[http://edgeapi.rubyonrails.org/classes/Rails/Engine.html#label-Using+Engine%27s+routes+outside+Engine](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html#label-Using+Engine%27s+routes+outside+Engine)

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T19:27:20.620

好吧，这个问题很老了，但我遇到了完全相同的问题，我有一个解决方案。对菲利普埃利亚斯菲利普的回答要求的人。

你需要做一点“覆盖”。将门卫的引擎 application_controller.rb 文件复制到您的应用程序到 app/doorkeeper/。然后只需改变

```
module Doorkeeper 
  class ApplicationController < ActionController::Base 
```

到

```
module Doorkeeper 
  class ApplicationController < ::ApplicationController 
```

现在让门卫使用您的 ApplicationController，它可能拥有您需要的所有方法。与[https://github.com/doorkeeper-gem/doorkeeper/wiki/Customizing-views](https://github.com/doorkeeper-gem/doorkeeper/wiki/Customizing-views)一起，一切都很出色。

# csv - CSV 文件打开错误为“已超出最大行数”

> ID：10879152
> 
> 赞同：0
> 
> 时间：2012-06-04T09:33:01.780
> 
> 标签：csv, scrapy

我正在研究 Scrapy，我从网页中获取数据并尝试将它们存储在 csv 文件中。

实际上我有`2560`几行数据要写入 csv 文件。

当我尝试在 OpenOffice 中打开文件时，出现以下错误：

```
The maximum number of rows has been exceeded. Excess rows were not imported. 
```

我可以打开文件，但我只得到`600`行，其余行被删除。

如何让 Scrapy 将所有 2560 行下载到一个 csv 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:05:52.457

看来您的问题只是 OpenOffice（或 LibreOffice）拒绝加载如此长的 .csv。数据本身应该没问题 - 剩余的行根本没有导入。

`vi`如果您在纯文本编辑器（类似或）中打开文件`nano`，您应该会看到您的所有内容都在那里。

或者，您可以尝试以下方法：

```
$ wc -l file.csv 
```

结果应该是 2560（表示文件中有 2560 行）。

# ruby - Ruby：已格式化字符串的前导零

> ID：10879154
> 
> 赞同：0
> 
> 时间：2012-06-04T09:33:14.687
> 
> 标签：ruby

我不明白为什么会这样：

```
s = "000301"
"%06d" % s             ====> "000193"
sprintf("%06d", s)     ====> "000193" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T09:36:02.807

因为它被解释为八进制数。

在 irb 中尝试：

```
> 0301
=> 193 
```

但是当你写：

```
> 301
=> 301 
```

如果您想让它工作，请尝试将其转换为整数[`String#to_i`](http://ruby-doc.org/core-1.9.3/String.html#method-i-to_i)：

```
"%06d" % s.to_i
sprintf("%06d", s.to_i) 
```

# php - 如何使用梨包将电子邮件从表单发送到我的 gmail

> ID：10879155
> 
> 赞同：0
> 
> 时间：2012-06-04T09:33:14.900
> 
> 标签：php, smtp

我一直在努力使用下面的代码从表单向我的 gmail 发送电子邮件。但我放弃了。请看下面的代码：

```
 require_once('../php/Mail.php');
                            require_once('../php/Mail/RFC822.php');
                            //function to send email
                            function send_email($to,$from,$subject,$body,$is_body_html=false) {
                                if(! valid_email($to))
                                {
                                    throw new Exception('This email address in invalid: '.htmlspecialchars($to));
                                }
                                if(! valid_email($from))
                                {
                                    throw new Exception('This email address in invalid: '.htmlspecialchars($from));
                                }
                                //set up an array which can hold the SMTP server detail
                                $smtp=array();
                                $smtp['host']='ssl://smtp.gmail.com';
                                $smtp['port']=465;
                                $smtp['auth']=true;
                                $smtp['username']='my_username@gmail.com';
                                $smtp['password']='my_pass';

                                //create the mailer object using which can connect to your SMTP server
                                $mailer=Mail::factory('smtp',$smtp);
                                //check the returned value when creating the mailer object
                                if(PEAR::isError($mailer))
                                    {
                                    throw new Exception('Could not create the mailer object.');
                                    }
                                //as the send method of the mailer object accepts the reciepients and headers as an array, create 
                                //and set up the arrays

                                $recipients=array();
                                $recipients['to']=$to;

                                $headers=array();
                                $headers['from']=$from;
                                $headers['to']=$to;
                                $headers['subject']=$subject;
                                //check if the content is set to be html
                                if($is_body_html)
                                    {
                                    $headers['Content-type']='text/html';
                                    }
                               //send the email
                               $result=$mailer->send($recipients,$headers,$body);
                               //check the returned value when sending the email
                                if(PEAR::isError($result))
                                    {
                                    throw new Exception('There was an error while trying to send the email: '.htmlspecialchars($result));
                                    }
                            } //end of send_email function 
```

我得到的错误信息如下

> 错误：异常“异常”，消息“尝试发送电子邮件时出错：无法连接到 ssl://smtp.gmail.com:465 [SMTP：无法连接套接字：连接超时（代码：- 1，响应：)]' in /home/biwucr/public_html/functions/mailer_function.php:49 堆栈跟踪：#0 /home/biwucr/public_html/send-quote.php(62): send_email('yibeltalisme@gm. ..', 'Yibeltal 酸...', false) #1 {main}

我不明白为什么。

我必须联系我的寄宿公司吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:45:52.933

Gmail 的 SMTP 服务器地址是**SMTP.GOOGLEMAIL.COM**而不是 SMTP.GMAIL.COM。

因此您的设置应该是：

```
// ...
$smtp=array();
$smtp['host']='ssl://smtp.googlemail.com';
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T05:38:23.283

您可能想尝试从 php.ini 文件中取消注释这一行：

```
extension=php_openssl.dll 
```

# c# - 从生成 xsd 类更改 ElementName

> ID：10879156
> 
> 赞同：0
> 
> 时间：2012-06-04T09:33:15.033
> 
> 标签：c#, xsd

使用 xsd.exe 工具，从 xsd 文件生成类。我想更改根元素的名称，因为 XmlRootElementAttribute 不能重复，所以我不能。所以理想情况下，我希望 xsd 工具生成一个像这样的部分类：

```
...
[System.Xml.Serialization.XmlRootAttribute(ElementName="Request", IsNullable=false)]
public partial class SendMessage  { ... } 
```

但我不知道如何更改 ElementName 属性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:10:03.037

我认为您的 XSD 定义了一个元素***SendMessage***，并且您希望注释是其他东西，在您的情况下是***Request***。

简短的回答是否定的，不能单独使用 XSD.exe 来完成；该工具不允许使用可以自定义生成类名称的语法。

这带来了答案的长版本……注释总是反映 XML 是什么。如果更改 ElementName 值，则生成的 XML 将有所不同。如果您希望 XML 有所不同，那么您应该更改架构文件。

这是一个需要大量解释的问题，**为什么**人们想要这个......为了得到一个肯定的答案，就像“是的，这就是如何实现***为什么***”。

# python - 使用 python ssh 运行本地 shell 脚本到远程

> ID：10879173
> 
> 赞同：0
> 
> 时间：2012-06-04T09:34:52.713
> 
> 标签：python, ssh, paramiko

我很抱歉我的英语不好。有一天我为我的问题搜索解决方案，但没有找到。

这是我的问题：我在服务器 A 中有一些管理器 shell 脚本。我用

```
ssh username@other_server_ip < shell_script.sh 
```

运行正常。

我想在 python 中做到这一点。我正在测试这个：

```
1\paramiko, 'exec_command (str)' is only run ONE command.and i use stdin to invoke_shell,not ok
2\pexect,sendline() is only ONE command. 
```

**请帮帮我，谢谢！**

（有些 AIX 不支持 sft，所以我不想在其他服务器上使用 sftp 脚本。）

像这样的shell脚本：

```
#!/bin/sh
if [ $# -lt 1 ]
os=`uname`
if [ "$os" = "linux" ] || [ "$os" = "Linux" ]
then
  temp=`df -P $diskname| tail -1`
  if [ "$temp" = "" ]
  then
    echo "error!t=$diskname not found"
    exit 0
  fi
  # diskutil=`echo $temp|awk '{printf("%s",$5)}'|awk '{gsub("%",""); print $0}'`
  disk_size=`echo $temp | awk '{print $2}'`
  disk_size_mb=`expr $disk_size / 1024`
  disk_size=`echo | awk '{ printf("%.2f",(c1/1024.0)) }' c1=$disk_size_mb`
  disk_size="${disk_size}"

elif [ "$os" = "SunOS" ]
then
  temp=`df -k $diskname | tail -1`
  ....

elif [ "$os" = "AIX" ] || [ "$os" = "aix" ]
then
  temp=`df -k $diskname |tail -1|sed -e "s/%//g"`
  ....
else 
  echo "error!!=Unsupported platform: $os"
  exit
fi

echo "Total Size=$disk_size_mb" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:47:12.383

如果仅从 Python 触发脚本就足够了，`subprocess.call`请从标准库中使用。通过查看您的脚本，我猜它正在许多远程主机上运行，​​可能是并行运行的。您可能想看看优秀的[结构](http://fabfile.org)模块。它是一个包装器`paramiko`，极大地促进了本地和远程运行命令以及上下传输文件。

# mercurial - 在 Mercurial 中合并时排除文件

> ID：10879180
> 
> 赞同：3
> 
> 时间：2012-06-04T09:35:18.813
> 
> 标签：mercurial, merge, tortoisehg

我将 Mercurial 与 TortoiseHg 一起使用。我有两个分支（`A`和`B`）和两个文件（`toto.cs`和`titi.cs`）。

有没有办法，当我想合并`B`时`A`，排除`titi.cs`合并，只合并`toto.cs`？如果可能，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T14:51:44.333

当然。不合并titi.cs 实际上只是完全按照它存在于A 或B（您的选择）中的方式使用titi.cs。您可以像这样*手动*执行此操作：

```
hg update A
hg merge B
hg revert --rev A titi.cs 
```

（交换A和B去另一个方向）。
或者，您可以在[合并工具配置中](https://www.mercurial-scm.org/wiki/MergeToolConfiguration)*自动*执行此操作，并在.`.hgrc`

```
[merge-patterns]
titi.cs = internal:local 
```

这告诉 Mercurial 始终对匹配该模式的文件使用“这个不是那个”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T15:53:01.113

如果您正在谈论您希望免于合并的某个文件，请参阅[@Ry4chan 的答案](https://stackoverflow.com/a/10883348/67988)。这是完全有效的：一些文件，比如与构建相关的配置，可以自动生成，并且对它们的冲突解决是无用的。或者，您可能实际上想要删除在源文件中所做的更改。

另一方面，如果您试图模仿类似 SVN 的系统的文件或目录限制合并，请小心。`revert`诀窍并不意味着您合并了一些文件而没有合并其他文件：您合并了所有文件，revert 只是一种合并。

If you want to move some changes from one branch to another (say, backport a fix in a certain subsystem to an old stable branch), you don't merge the files with the fix; instead, you merge the *changesets* containing the fix; [`hg graft`](http://selenic.com/hg/help/graft) will help you do so.

# z3 - Z3 4.0 推入式求解器

> ID：10879181
> 
> 赞同：3
> 
> 时间：2012-06-04T09:35:21.043
> 
> 标签：z3

我想使用求解器针对 2 个不同的约束来验证我的问题。我为此编写了一个示例程序，其中我有一个变量 x ，我想检查它并获得一个模型`x = 0`和`x = 1`。

我正在尝试在求解器中使用 Push 和 Pop。但是我不确定如何准确地做到这一点。我已经编写了以下代码。当我尝试推送上下文并将其弹出时，我遇到了崩溃。我不明白崩溃的原因，但它是一个 Seg Fault。即使我如下注释掉推送和弹出指令，我仍然会崩溃。

有人可以提供一些解决问题的指示。

```
Z3_config cfg;
Z3_context ctx;
Z3_solver solver;
Z3_ast x, zero, one, x_eq_zero, x_eq_one;

cfg                = Z3_mk_config();
ctx                = Z3_mk_context(cfg);
Z3_del_config(cfg);
solver = Z3_mk_solver((Z3_context)ctx);

x           = mk_int_var(ctx, "x");
zero        = mk_int(ctx, 0);
one         = mk_int(ctx, 1);
x_eq_zero     = Z3_mk_eq(ctx, x, zero);
x_eq_one     = Z3_mk_eq(ctx, x, one);

//Z3_solver_push (ctx,  solver);

Z3_solver_assert(ctx, solver, x_eq_zero);
printf("Scopes : %d\n", Z3_solver_get_num_scopes((Z3_context) ctx, (Z3_solver) solver));

printf("%s \n", Z3_ast_to_string(ctx, x_eq_zero));

int result = Z3_solver_check ((Z3_context) ctx, (Z3_solver) solver);
printf("Sat Result : %d\n", result);
printf("Model : %s\n", Z3_model_to_string ((Z3_context) ctx,  Z3_solver_get_model ((Z3_context) ctx,  (Z3_solver) solver)));

// Z3_solver_pop (ctx, solver, 1);
// printf("Scopes : %d\n", Z3_solver_get_num_scopes((Z3_context) ctx, (Z3_solver) solver));
Z3_solver_assert(ctx, solver, x_eq_one);
result = Z3_solver_check ((Z3_context) ctx, (Z3_solver) solver);
printf("Sat Result : %d\n", result);
printf("Model : %s\n", Z3_model_to_string ((Z3_context) ctx,  Z3_solver_get_model ((Z3_context) ctx,  (Z3_solver) solver)));
return 0; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T14:59:42.947

Z3 4.0 中的新 API 具有许多新功能。例如，它引入了几个新对象：Solvers、Goals、Tactics、Probes 等。此外，我们还为以前 API 中存在的 AST 和模型等对象引入了新的内存管理策略。新的内存管理策略基于引用计数。每个对象都有形式的 API`Z3_<object>_inc_ref`和`Z3_<object>_dec_ref`. 我们仍然支持 AST 和模型的旧内存管理策略。如果`Z3_context`是使用 创建`Z3_mk_context`的，则为 AST 启用旧的内存管理策略。如果它是使用创建的`Z3_mk_context_rc`，那么`Z3_inc_ref`和`Z3_dec_ref`必须用于管理引用计数器。但是，新对象（Solvers、Goals、Tactics 等）仅支持引用计数。我们强烈鼓励所有用户迁移到新的引用计数内存管理策略。因此，所有新对象仅支持此策略。此外，所有托管 API（.Net、Python 和 OCaml）都基于引用计数策略。请注意，我们在 C API 之上提供了一个薄 C++ 层。它使用“智能指针”“隐藏”所有引用计数调用。C++ 层的源代码包含在 Z3 发行版中。

话虽如此，您的程序崩溃是因为您没有增加 object 的引用计数器`Z3_solver`。这是您的程序的更正版本。我基本上将丢失的调用添加到`Z3_solver_inc_ref`and `Z3_solver_dec_ref`。后者是避免内存泄漏所必需的。之后，我还使用 C++ API 包含了相同的程序。它要简单得多。`include\z3++.h`Z3 发行版的文件中提供了 C++ API 。示例包括在`examples\c++`。

```
Z3_config cfg;
Z3_context ctx;
Z3_solver solver;
Z3_ast x, zero, one, x_eq_zero, x_eq_one;

cfg                = Z3_mk_config();
ctx                = Z3_mk_context(cfg);
Z3_del_config(cfg);
solver = Z3_mk_solver((Z3_context)ctx);
Z3_solver_inc_ref(ctx, solver);

x           = mk_int_var(ctx, "x");
zero        = mk_int(ctx, 0);
one         = mk_int(ctx, 1);
x_eq_zero     = Z3_mk_eq(ctx, x, zero);
x_eq_one     = Z3_mk_eq(ctx, x, one);

//Z3_solver_push (ctx,  solver);

Z3_solver_assert(ctx, solver, x_eq_zero);
printf("Scopes : %d\n", Z3_solver_get_num_scopes((Z3_context) ctx, (Z3_solver) solver));

printf("%s \n", Z3_ast_to_string(ctx, x_eq_zero));

int result = Z3_solver_check ((Z3_context) ctx, (Z3_solver) solver);
printf("Sat Result : %d\n", result);
printf("Model : %s\n", Z3_model_to_string ((Z3_context) ctx,  Z3_solver_get_model ((Z3_context) ctx,  (Z3_solver) solver)));

// Z3_solver_pop (ctx, solver, 1);
// printf("Scopes : %d\n", Z3_solver_get_num_scopes((Z3_context) ctx, (Z3_solver) solver));
Z3_solver_assert(ctx, solver, x_eq_one);
result = Z3_solver_check ((Z3_context) ctx, (Z3_solver) solver);
printf("Sat Result : %d\n", result);
// printf("Model : %s\n", Z3_model_to_string ((Z3_context) ctx,  Z3_solver_get_model ((Z3_context) ctx,  (Z3_solver) solver)));
Z3_solver_dec_ref(ctx, solver);
return 0; 
```

C++ 版本

```
context c;
solver  s(c);
expr x = c.int_const("x");
expr x_eq_zero = x == 0;
expr x_eq_one  = x == 1;

s.add(x_eq_zero);
std::cout << "Scopes : " << Z3_solver_get_num_scopes(c, s) << "\n";
std::cout << x_eq_zero << "\n";
std::cout << s.check() << "\n";
std::cout << s.get_model() << "\n";

s.add(x_eq_one);
std::cout << s.check() << "\n";
return 0; 
```

# performance - 具有 7 个后台缓冲区的 DirectX 11 交换链

> ID：10879183
> 
> 赞同：5
> 
> 时间：2012-06-04T09:35:30.077
> 
> 标签：performance, windows-8, directx, directx-11, dxva

我有一个以桌面模式在 Windows 8 上运行的专有媒体播放器。运行时 DirectX 版本是 11，但原生图形驱动程序支持 DirectX 9。
在一些具有完全相同设置的计算机上，我看到实际交换链的后台缓冲区计数为 2，性能非常好，而在其他一些计算机上则相反缓冲区计数为 7，并且有丢帧。
我没有该播放器的源代码，想知道在运行时确定不同的后台缓冲区计数的原因可能是什么。
有人可以解释为什么这样的后缓冲计数会导致性能发生这种变化吗？或者只是将我指向解释后缓冲区编号含义的相关文档？

（更多调试信息：使用 GPUView 我看到当后备缓冲区计数为 2 时，硬件以同步模式工作，即每秒 VSync 中硬件队列中的一个数据包（剪辑帧速率为 30fps），当 7 个后备缓冲区的工作是一起完成 5-7 帧，然后是一些空的 VSync，然后再次 5-7 帧，依此类推）。

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T10:15:30.427

我真的没有看到使用超过 4 个缓冲区（四缓冲区，用于[立体镜](http://en.wikipedia.org/wiki/Quad_buffering)）。大多数应用程序使用 2 个缓冲区（双缓冲），以便应用程序可以在第一个（前）缓冲区呈现给监视器时开始将下一帧绘制到第二个（后）缓冲区，否则，应用程序将不得不等到前端缓冲区在开始绘制下一帧之前完成了对屏幕的绘制。三重缓冲只是扩展了这个想法，因此有两个后台缓冲区。这样，如果应用程序能够以比前端缓冲区呈现到屏幕的速度更快的速度完成整个缓冲区的绘制，那么它可以开始将下一帧绘制到第三个缓冲区，而不是等待前端缓冲区完成呈现。

我不确定这是否真的回答了您关于使用 7 个缓冲区的其他应用程序的问题，但我再次认为没有必要，因为显示器通常仅以 60 到 75Hz 的速率刷新。

如果您的应用程序运行速度如此之快，以至于它能够在第一个缓冲区完成呈现之前绘制 2 个缓冲区，那么只需让应用程序进入睡眠状态，直到前端缓冲区完成，以便让其他程序有机会使用 cpu，或者花费那个额外的时间为您的应用程序进行一些其他处理。如果它是一个媒体播放器，您可以花费额外的时间做一些更昂贵的操作来提高媒体播放的质量。

这是一个描述缓冲的链接，但他们不会谈论超过 4 个缓冲区，可能是因为没有必要。

[http://en.wikipedia.org/wiki/Multiple_buffering](http://en.wikipedia.org/wiki/Multiple_buffering)

PS也许应用程序在使用类似7个缓冲区时可能会丢失一些帧速率的原因是因为应用程序可能无法在需要将它们呈现到屏幕之前继续写入所有缓冲区。如果使用了多线程，这可能不会是这种情况，因为在应用程序完成绘制到所有其他后台缓冲区之前，下一个缓冲区可能会呈现到屏幕上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T10:05:06.787

好吧，我得到了微软的答复。这是为了在使用 DC（电池）时节省电量 - 这样处理器可以唤醒以处理所有可用的缓冲区，将它们发送到 GPU 以继续工作，并在更长时间内进入更深的省电模式。

# mysql - 一些使用日期格式的选择查询

> ID：10879184
> 
> 赞同：1
> 
> 时间：2012-06-04T09:35:32.310
> 
> 标签：mysql

所以..要根据日期类型返回年龄真的很容易：SELECT YEAR(CURDATE()) - YEAR(DateofBirth) 我们得到一个包含该人年龄的结果集

> 但是，如果我需要根据他们的生日日期以 d/m/y 格式（例如：2005-04-11）在表中搜索年龄范围为 60-70 的人怎么办。我认为这有点困难，因为如果你只有出生日期而不是通过一个你已经将他们的年龄计算为正常年龄（50、60 等）的列来搜索，那么搜索某个年龄是另一回事

另一个与上述问题无关的问题：

> 假设我有一张医生桌子，上面有他们的名字、姓氏和专长。我们有17个专业：reumatologie、orl、chirurgie等和108名医生

如何根据此格式获取该范围内的医学专业和医生列表：

例如：reumatologie - 4、orl - 5、chirurgie - 10 等

> 示例中的 4 和 5 是医务人员的数量。我已经尝试过连接和各种查询，但它们都没有正常工作。也许可以处理一个案例？如果是的话怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:48:57.893

对于问题 1，您可以这样做（虽然在性能方面不是很好）：

```
SELECT YEAR(CURDATE()) - YEAR(DateofBirth) AS age
FROM tableX
WHERE (YEAR(CURDATE()) - YEAR(DateofBirth)) BETWEEN 60 AND 70 ; 
```

如果你想要性能，你可以添加一个索引`DateofBirth`并使用这个版本：

```
SELECT YEAR(CURDATE()) - YEAR(DateofBirth) AS age
FROM tableX
WHERE DateofBirth >= MAKEDATE(YEAR(CURDATE())-70, 1) 
  AND DateofBirth < MAKEDATE(YEAR(CURDATE())-60+1, 1) ; 
```

# ios - 直接调用音频单元而不是回调 iOS

> ID：10879187
> 
> 赞同：2
> 
> 时间：2012-06-04T09:35:45.413
> 
> 标签：ios, callback, core-audio, audiounit, remoteio

是否有对音频单元的直接调用，这样我就不必依赖系统回调输入和渲染回调（我可以用计时器来模仿）。例如，像有 AudioUnitRender 可以从音频单元中提取数据，是否还有另一个 API 可以将数据推送到音频单元？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:39:16.190

虽然我不知道 CoreAudio API 中有特定的类似推送的调用，但您可以通过在单独的 C 函数中进行 DSP 处理来轻松完成此操作，该函数将浮点缓冲区传递给它。这样，渲染回调就可以在那里完成艰苦的工作，如果您需要进行基于推送的处理，您也可以手动调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:16:38.407

音频单元的行为是拉模型。要播放的输出请求数据，如果有，则播放。

开始录制的常用方法是在输出回调中调用 Render。渲染器将​​从记录器中获取可以播放的数据，或者只是将记录的数据保存到其他地方并将播放器设置为静音。

# objective-c - 如何实现 UITextView.hidden

> ID：10879189
> 
> 赞同：2
> 
> 时间：2012-06-04T09:35:57.917
> 
> 标签：objective-c, ios, uitextview

我正在开发一个 iOS 5 应用程序。我不明白为什么

```
myTextView.hidden = YES; 
```

或者

```
myTextView.hidden = NO; 
```

不管用？

我也尝试过使用`[myTextView setHidden:( ! [myTextView isHidden])];` 我在 xib 中通过 IB 将 myTextView 默认设置为隐藏。任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:40:15.023

你试一试：`[myTextView setHidden:YES];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:40:02.237

Xib 文件上的`IBOutlet`和之间的连接是否建立？`UITextView`这是我对为什么不起作用的最佳猜测。

**编辑：**我假设您已经`UITextView`在 Xib 而不是代码上创建了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:42:09.770

在.h

```
UITextView *myTextView;

@property(nonatomic, assign) UITextView *myTextView; 
```

米

```
[myTextView setHidden:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-04T09:16:04.823

使此操作更流畅的一种方法是使用与加载图像相同的图像覆盖整个视图。将其标记为

[self.OverlayView setHidden:false];

以便它覆盖您的开始屏幕。如果您随后需要显示开始屏幕，则只需设置

[self.OverlayView setHidden:true];

这将使您无缝过渡到登录屏幕（有点杂乱，但效果很好！）

# actionscript-3 - 无休止的重复滚动背景

> ID：10879197
> 
> 赞同：0
> 
> 时间：2012-06-04T09:37:08.503
> 
> 标签：actionscript-3, mobile, actionscript, air

我遇到了 AS3 和 AIR 的问题。我正在为带有飞机的智能手机开发横向滚动游戏，我使用不同的背景作为图层。

最重要的是：我使用 GPU 并且只使用位图，质量设置为低。所以性能设置都是为智能手机使用而设置的。

我使用绘图 API 将它们放入一个矩形中，并使用矩阵移动背景：

```
protected var scrollingBitmap:BitmapData;
protected var canvas:Graphics;
protected var matrix:Matrix;

public function move(dx:Number, dy:Number):void {
    matrix.translate(dx, dy);
    if(dx != 0) matrix.tx %= scrollingBitmap.width;
    if(dy != 0) matrix.ty %= scrollingBitmap.height;
    drawCanvas();
}

protected function drawCanvas():void {
    canvas.clear();
    canvas.beginBitmapFill(scrollingBitmap, matrix, true, true);
    canvas.drawRect(0, -scrollingBitmap.height, 1404, scrollingBitmap.height);
} 
```

**更新2（**

看看这个： http: [//plasticsturgeon.com/2010/06/infinite-scrolling-bitmap-backgrounds-in-as3/](http://plasticsturgeon.com/2010/06/infinite-scrolling-bitmap-backgrounds-in-as3/)

我用它来创建我的背景。

有了这个，我可以模拟我的飞机在不移动整个背景的情况下向右飞行，我可以使用一个每次重复的小图形（对于前景层）。

对于背景层，我也使用这种方法，但图形要大得多，而且我只以较低的飞机速度移动它来模拟远处的背景。

我的移动方法是在一个 enterframe 事件上。所以我可以用我的飞机的“运动”来更新每一帧的背景。

**)**

平面可以超过位图的高度。每次位图回到窗口/屏幕时，都会发生真正的长时间滞后。当飞机飞得很快时，游戏也开始滞后。

我的第一种方法是使用 .PNG 文件（但它们非常大：1-3MB 大小）。我的下一个方法是使用 .GIF 文件（大小要小得多）。

两者都是一样的。所以不可能是这样。

我阅读了有关 draw() 和 copyPixels() 的信息，但我不知道如何使用它们来重复图像。

**更新1：**

```
protected var scrollingBitmap:BitmapData;
protected var canvas:Bitmap;

protected function init(e:Event):void {
    removeEventListener(Event.ADDED_TO_STAGE, init);
    canvas = new Bitmap(new BitmapData(1404, scrollingBitmap.height, true), "auto", true);
    this.addChild(canvas);
    drawCanvas();
}

public function move(dx:Number, dy:Number):void {
    if(dx != 0) dx %= scrollingBitmap.width;
    if(dy != 0) dy %= scrollingBitmap.height;
    drawCanvas(dx, dy);
}

protected function drawCanvas(xPos:Number = 0, yPos:Number =  0):void {
    canvas.bitmapData.copyPixels(scrollingBitmap, new Rectangle(0, 0, 1404, scrollingBitmap.height), new Point(xPos, yPos), scrollingBitmap);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:29:41.640

我认为您最好使用位图而不是使用带有填充的图形对象。copyPixels 非常快。所以你要做的只是在之前的任何东西的顶部复制像素，假设一切都是不透明的。如果一切都不是不透明的，你需要使用你的源位图作为它自己的 alpha 数据，这样以前绘制的像素就不会显示出来。

让我们重新构建您的画布，使其成为位图而不是 MC。您的新代码将如下所示：

```
protected function drawCanvas():void {
   canvas.bitmapData.copyPixels(scrollingBitmap, new Rectangle(0, 0, scrollingBitmap.width, scrollingBitmap.height), new Point(0,0), scrollingBitmap);
} 
```

哦，看看那个！这段代码不仅更快，而且只有一行代码！

**编辑：添加了工作代码**

```
package  {
    import flash.display.MovieClip;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.events.Event;
    import flash.geom.Rectangle;
    import flash.geom.Point;

    public class EndlessBG extends MovieClip{
        //this one stays stationary, we're getting the pixels for the right side of the pic from here
        private var _source:BitmapData;
        //this is the one moving to the left (the pixels for the right side are not visible except for once a cycle);
        private var _movingPixels:BitmapData;
        private var _canvas:Bitmap;
        private var _xOffset:int = 0;
        private var _rect:Rectangle = new Rectangle();;
        private var _point:Point = new Point();

        public function EndlessBG() {
            super();
            _source = new BathroomStillLife();
            _canvas = new Bitmap(new BitmapData(_source.width, _source.height));
            _canvas.bitmapData.draw(_source);
            _canvas.x = stage.stageWidth/2 - _canvas.width/2;
            _canvas.y = 5;
            addChild(_canvas);
            addEventListener(Event.ENTER_FRAME, gameLoop);
            setGeometryDefaults();
            _movingPixels = new BitmapData(_source.width, _source.height);
            _movingPixels.copyPixels(_source, _rect, _point);
            //turn this on to watch red pixels be drawn where the source pixels are coming in
            //_source = new BitmapData(_source.width, _source.height, false, 0xFF0000);
        }

        private function gameLoop(e:Event):void {
            _xOffset--;//where the background is moving to
            if (_xOffset < -_source.width) {
                _xOffset = 0;
                //this doesn't seem to work correctly:
                //_movingPixels.scroll(_source.width, 0);
                _movingPixels = new BitmapData(_source.width, _source.height);
                _movingPixels.copyPixels(_source, _rect, _point);
            }
            trace(_xOffset);
            setGeometryDefaults();
            _movingPixels.scroll(-1, 0);
            //draw the moved part of the canvas
            _canvas.bitmapData.copyPixels(_movingPixels, _rect, _point);
            //If we stop here, we get a smear to the right
            //so, get the remaining pixels directly from the source
            //1) reset our rect and point to be to the right side
            _rect.x = 0;
            _rect.width = -_xOffset;
            _point.x = _source.width + _xOffset;
            //2) copy from the source
            _canvas.bitmapData.copyPixels(_source, _rect, _point);
        }
        private function setGeometryDefaults():void {
            _rect.x=0;
            _rect.y=0;
            _rect.width = _source.width;
            _rect.height = _source.height;
            _point.x = 0;
            _point.y = 0;
        }

    }

} 
```

不理想，也不够完善，不足以写一篇博文，但应该能让你开始。

**编辑：** 最终我确实写了[那篇博文](http://flexdiary.blogspot.com/2012/06/endless-scrolling-bathroom.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:46:52.593

[http://www.greensock.com/blitmask](http://www.greensock.com/blitmask)

这可能会有所帮助，但不是免费的

# jquery - 淘汰赛映射jQuery

> ID：10879199
> 
> 赞同：0
> 
> 时间：2012-06-04T09:37:25.023
> 
> 标签：jquery, json, knockout.js, knockout-mapping-plugin

在我的脚本中，我有这个：

```
$('#divForm').load('../Reservation/Edit #EditReservation', function () {
    $('#divForm').slideDown(500), function () { };
    var viewModel = {};
    var id = JSON.stringify(rowid);
    $.post("/Reservation/JsonEdit", { jsonId: id }, function (data) {
        var trueData = JSON.stringify(data);
        alert(trueData);
        viewModel.model = ko.mapping.fromJSON(trueData);
        alert("chkpt1");
        ko.applyBindings(viewModel);
        alert("chkpt2");
    });
}); 
```

这个脚本一直运行到“chkpt1”并且它不执行：ko.applyBindings(viewModel); 警报（“chkpt2”）；

我在这个cshtml中使用这个脚本：

```
<div id="EditReservation" >
<div data-bind="foreach: model.Room">
    <div style="margin-right: 160px; float:left">
        <div>
            EMPLOYEE NUMBER:
            <div>
                <input type="text" data-bind="text: EmpNumber" /></div>
        </div>
        <div>
            ROOM:
            <div>
                <input type="text" data-bind="text: Room" /></div>
        </div>
        <div>
            DATE:
            <div>
                <input type="text" data-bind="text: Date" /></div>
        </div>
    </div>
    <div style="margin-top: 40px;">
        <div>
            START TIME:
            <div>
                <input type="text" data-bind="text: StartTime" /></div>
        </div>
        <div>
            END TIME:
            <div>
                <input type="text" data-bind="text: EndTime" /></div>
        </div>
        <div>
            NOTES:
            <div>
                <input type="text" data-bind="text: Notes" /></div>
        </div>
    </div>
</div> 
```

div EditReservation 将显示，但字段为空。

我确信每个字段的数据绑定都是正确的，因为它在正确映射时匹配返回的 json 数据，

问题是，ko.applyBindings 没有执行，这就是为什么我认为加载时字段为空的原因......

可能是什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:14:14.617

输入字段应使用“值”绑定而不是“文本”绑定。如果无法映射属性，您会在浏览器控制台中看到敲除引发的异常。

# silverlight - SilverLight：system.servicemodel.domainservices.client.domainoperationexception

> ID：10879202
> 
> 赞同：0
> 
> 时间：2012-06-04T09:37:34.560
> 
> 标签：silverlight

我目前在运行**Silverlight 项目时遇到问题。**

我从[这个链接](http://www.c-sharpcorner.com/uploadfile/3cf852/authentication-against-custom-table-in-silverlight-4-using-ria-service/)下载的。

但是当我运行该项目时，它会显示以下对话框

应该是什么问题......请建议我......请帮助我的朋友......我用谷歌搜索了很多，但它不能帮助我......

非常感谢各位朋友...

![在此处输入图像描述](../Images/28f888dddcfa08fef345eb77fe1f48e0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:41:48.423

请更改连接字符串以使用自己的 SQL Server，如下所示：

```
<connectionStrings><add name="StatsOfIndiaEntities" connectionString="metadata=res://*/DataModel_SOI.csdl|res://*/DataModel_SOI.ssdl|res://*/DataModel_SOI.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\StatsOfIndia.mdf;Integrated Security=True;User Instance=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /></connectionStrings> 
```

我在我的工作机器上使用 SQLExpress。

# internet-explorer - IE 中显示的背景颜色。帮我删除该颜色？

> ID：10879204
> 
> 赞同：0
> 
> 时间：2012-06-04T09:37:45.520
> 
> 标签：internet-explorer, background

在我的网站中，我有一个滚动反馈框（在页面右侧）。一切正常，除了在 IE 中，该反馈框显示白色背景。我也尝试将“背景颜色”设置为透明。但问题仍然存在。

链接：[http ://www.akashbc.com](http://www.akashbc.com)

请帮助我找到导致此问题的确切原因。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:02:14.140

哪个版本的IE？你如何让它变得透明？

在您的 ViewSource 中，背景被注释掉：

```
<div id ="fbcont" style="width: 235px;

margin-left: 33px;

padding-top: 64px;

font-family: calibri;

font-size: 15px;

color: white;/*background-color: transparent;*/"> 
```

一去，最麻烦的方式恕我直言，是使用RGBA

```
background: rgb(200, 54, 54); /* The Fallback */
background: rgba(200, 54, 54, 0); 
```

请注意不兼容浏览器的后备颜色（即 IE8 和后面、FF2 和后面、Safari 2 和后面以及任何 Netscape）。对于 IE 7/8，你可以试试这个

```
<!--[if IE]>

   <style type="text/css">

   .color-block {
       background:transparent;
       filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000,endColorstr=#99000000);
       zoom: 1;
    } 

    </style>

<![endif]--> 
```

另一种方法是使用透明的 PNG（但 IE7 很糟糕并且呈现 png 的）。

或者使用不透明度（IE 过滤器），然后使用第二个 div 分层，以便可以看到内容（不透明度会影响整体，而不仅仅是背景）。

# java - 如何使用 Java 在 Selenium WebDriver 中的帧之间切换

> ID：10879206
> 
> 赞同：37
> 
> 时间：2012-06-04T09:38:18.737
> 
> 标签：java, selenium-webdriver

我正在使用带有 WebDriver 的 java。我必须在两个帧之间切换。我已经在 selenium IDE 中记录了测试用例，并且我得到的值是 selectFrame relative=top select Frame=middle Frame

但是有一个问题是它无法识别 relative=top 和 middleFrame。如何使用 Java 在 Selenium WebDriver 中解决这个问题？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-04T19:23:29.523

WebDriver 的[`driver.switchTo().frame()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.TargetLocator.html)方法采用三个可能的参数之一：

*   [一个号码。](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.TargetLocator.html#frame%28int%29)

    > 按其（从零开始的）索引选择一个框架。也就是说，如果一个页面有三帧，第一帧在 index `0`，第二帧在 index ，`1` 第三帧在 index `2`。一旦选择了框架，WebDriver 接口上的所有后续调用都将针对该框架进行。

*   [名称或 ID。](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.TargetLocator.html#frame%28java.lang.String%29)

    > 按名称或 ID 选择框架。通过匹配名称属性定位的帧总是优先于那些通过 ID 匹配的帧。

*   [以前发现的一个`WebElement`。](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.TargetLocator.html#frame%28org.openqa.selenium.WebElement%29)

    > 使用之前定位的 WebElement 选择一个框架。

通过它的 id/name 获取框架或通过它找到它[`driver.findElement()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html#findElement%28org.openqa.selenium.By%29)，你会很好的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-16T05:32:00.063

切换到框架：

```
driver.switchTo.frame("Frame_ID"); 
```

再次切换到默认值。

```
driver.switchTo().defaultContent(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-09T07:15:02.647

首先，您必须找到框架 id 并将其定义在`WebElement`

例如：-`WebElement fr = driver.findElementById("id");`

然后使用以下代码切换到框架：-`driver.switchTo().frame("Frame_ID");`

一个示例脚本：-

```
WebElement fr = driver.findElementById("theIframe");

driver.switchTo().frame(fr);

Then to move out of frame use:- driver.switchTo().defaultContent(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-26T19:40:35.467

需要确保一旦切换到一个框架，需要切换回默认内容以访问另一个框架中的 web 元素。由于 Webdriver 倾向于在当前框架内找到新框架。

```
driver.switchTo().defaultContent() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-26T08:50:49.097

您还可以使用：

```
driver.switch_to.frame(0) 
```

`(0)`是 html 上的第一个 iframe。

切换回默认内容：

```
driver.switch_to.default_content() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-10T15:21:45.450

也可以将 WebDriverWait 与 ExpectedConditions 一起使用（以确保 Frame 可用）。

1.  以字符串为参数

    ```
    (new WebDriverWait(driver, 5)).until(ExpectedConditions.frameToBeAvailableAndSwitchToIt("frame-name")); 
    ```

2.  以定位器为参数

    ```
    (new WebDriverWait(driver, 5)).until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.id("frame-id"))); 
    ```

更多信息可以在[这里找到](https://seleniumhq.github.io/selenium/docs/api/dotnet/html/Overload_OpenQA_Selenium_Support_UI_ExpectedConditions_FrameToBeAvailableAndSwitchToIt.htm)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-04T22:53:04.640

这段代码是 groovy 的，所以很可能你需要做一些返工。第一个参数是 url，第二个是限制尝试次数的计数器。

```
public boolean selectWindow(window, maxTries) {
    def handles
    int tries = 0
    while (true) {
        try {
            handles = driver.getWindowHandles().toArray()
            for (int a = handles.size() - 1; a >= 0 ; a--) { // Backwards is faster with FF since it requires two windows
                try {
                    Log.logger.info("Attempting to select window: " + window)
                    driver.switchTo().window(handles[a]);
                    if (driver.getCurrentUrl().equals(window))
                        return true;
                    else {
                        Thread.sleep(2000)
                        tries++
                    }
                    if (tries > maxTries) {
                        Log.logger.warn("Cannot select page")
                        return false
                    }
                } catch (Exception ex) {
                    Thread.sleep(2000)
                    tries++
                }
            }
        } catch (Exception ex2) {
            Thread.sleep(2000)
            tries++
        }
    }
    return false;
} 
```

# javascript - 如何为 Django 生成动态搜索表单？

> ID：10879207
> 
> 赞同：0
> 
> 时间：2012-06-04T09:38:19.093
> 
> 标签：javascript, django

我写了一个基于 Django 的 ORM 的 REST API。这是我的 REST API 的一些示例

```
curl "http://example.com/api/pcserver?last_update__lt=2012-06-01 00:00:00&hostname__startswith=xen" 
```

在服务器端，我使用一个`queryset.filter()`函数来处理所有`GET`参数，并将结果`queryset`转换为 a `json`，然后返回给用户。

现在我无法将此 API 转换为基于 Web 的搜索表单。

我想对这个神奇的搜索表单有什么：

1.  使用javascript动态添加/删除查询参数，使用它们加入`AND`（我不需要`OR`在这些参数之间）
2.  提供下拉菜单以根据模型选择要搜索的字段
3.  支持选择运算符，例如`__lt`, `__gt`,`__regex`

那里有没有轮子，所以我不必重新发明它？谢谢：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:21:34.727

@yegle

我建议使用这种媒体类型：[http](http://code.ge/media-types/collection-next-json/) ://code.ge/media-types/collection-next-json/它是以下内容的扩展：[http](http://amundsen.com/media-types/collection/format/) ://amundsen.com/media-types/collection/format/媒体类型，您可以毫无问题地实现您的目标。

看这个文件：

```
{"collection": {
  "version": 1.0,

  "queries": [
    {
      "href":    "http://service.com/my-resource", 
      "rel":     "search", 
      "prompt":  "Enter search string", 
      "data" : [
        {
          "name": "query",
          "prompt": "Search query",
          "required": true
        }, {
          "name":   "gender",
          "prompt": "Gender",
          "list":   {
            "default": "female",
            "options": [
              {"value": "female", "prompt": "Female"},
              {"value": "male",   "prompt": "Male"}
            ]
          }
        }
      ]
    }
  ]  

}} 
```

使用“查询”数组，您可以描述几个可以轻松转换为 HTML 表单的搜索模板。在每个查询对象中，您可以定义：

*   搜索 URI
*   “表格”的标题（即提示）；和
*   具有不同要求的任意数量的查询参数。

从上面的示例中可以看到，有两个查询参数——“query”和“gender”，其中“query”参数可以转换为 HTML.input，“gender”参数可以转换为 HTML.select。

我希望我正确理解了您的问题和目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:09:11.583

我不确定 django 工具。但是，您可以使用 MYSQL 的全文布尔搜索来实现上述大部分要求。请参考以下链接并回复您的评论！

[http://dev.mysql.com/doc/refman//5.5/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman//5.5/en/fulltext-boolean.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:42:54.943

看看[django-filter](https://github.com/alex/django-filter)

或者，以某种黑客方式，使用 Django Admin。您可以`ModelAdmin`为目标模型自定义 a 并使用`ChangeList`查询字符串处理。以内置`User`为例：

```
from django.contrib.admin.options.IncorrectLookupParameters
from django.contrib.admin.views.main import ChangeList
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.models import User
self = UserAdmin(User, None) # or taken from admin.site._registry if the model admin is registered
cl = ChangeList(request, User, self.list_display,
             self.list_display_links, self.list_filter, self.date_hierarchy,
             self.search_fields, self.list_select_related,
             self.list_per_page, self.list_max_show_all, self.list_editable,
             self)
# then cl.get_query_set would process querystring and generate the queryset
try:
    cl.get_query_set(request)
except IncorrectLookupParameters:
    'encounter an invalid lookup' 
```

# php - 如何删除 php 代码中的所有空格？

> ID：10879209
> 
> 赞同：-2
> 
> 时间：2012-06-04T09:38:26.870
> 
> 标签：php

我有一个用 PHP 代码构建和运行的应用程序。以及我在开发过程中编写的数百个**空格**（例如制表符空格、多个空格和换行符），我想在生产中发布它。是否有可用的**工具**或**应用程序**可以修剪我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:45:39.970

您可以使用 Jack 在评论中建议的任何在线 PHP 格式化程序，即；[http://beta.phpformatter.com/](http://beta.phpformatter.com/)

或者使用任何提供此类功能的 IDE，我使用 PHPStorm，它为此提供了自动格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:12:45.340

使用在线工具压缩您的代码

# java - 在 Swing 中使用双缓冲区时出现 NullPointerException

> ID：10879210
> 
> 赞同：3
> 
> 时间：2012-06-04T09:38:28.650
> 
> 标签：java, image, swing, doublebuffered

在下面的代码中，我使用 doubleBuffer 来避免图像闪烁，正如我的[这个问题中所建议的那样](https://stackoverflow.com/questions/10869548/image-flickers-on-repaint)

```
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class TestProgram extends JFrame implements KeyListener {
    private Image doubleBuffer;
    private Graphics myGraphics;
    private BufferedImage TestImage;
    private int cordX = 100;
    private int cordY = 100;

    public TestProgram() {
        setTitle("Testing....");
        setSize(500,500);
        imageLoader();
        setVisible(true);
    }

    public static void main(String[] args) {
        new TestProgram();
    }

    public void imageLoader() {
        try {
            String testPath = "test.png";
            TestImage = ImageIO.read(getClass().getResourceAsStream(testPath));

        } catch (IOException ex) {
            ex.printStackTrace();
        }

        addKeyListener(this);

        doubleBuffer = createImage(getWidth(), getHeight());
        myGraphics = doubleBuffer.getGraphics();
        drawImages();
    }

    @Override
    public void update(Graphics g) {
        drawImages();
        g.drawImage(doubleBuffer, 0, 0, this);        
    }

    public void drawImages() {
        myGraphics.drawImage(TestImage, cordX, cordY, this);
    }

    public void keyPressed(KeyEvent ke) {
        switch (ke.getKeyCode()) {
            case KeyEvent.VK_RIGHT: {
                cordX+=5;
            }
            break;
            case KeyEvent.VK_LEFT: {
                cordX-=5;
            }
            break;
            case KeyEvent.VK_DOWN: {
                cordY+=5;
            }
            break;
            case KeyEvent.VK_UP: {
                cordY-=3;
            }
            break;
        }
        repaint();
    }

    public void keyTyped(KeyEvent ke) {}

    public void keyReleased(KeyEvent ke) {}
} 
```

问题是我在这一行得到了一个 nullPointerException

```
myGraphics = doubleBuffer.getGraphics(); 
```

我这样做的方法是否正确？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T09:50:41.660

1.  不要`JFrame`直接画到，放在那里`JPanel`或`JComponent`

2.  Swing GUI 应该从[初始线程开始](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

3.  什么`TestImage`和路径`Image`？？？，

4.  [KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)不是为[Swing JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)指定的，而是使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

5.  坐标改变后你必须打电话`repaint()`

6.  把它放在一起

.

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.*;
import java.util.HashMap;
import java.util.Map;
import javax.imageio.ImageIO;
import javax.swing.*;

public class MoveIcon extends JPanel {

    private static final long serialVersionUID = 1L;
    private static final String IMAGE_PATH = "http://duke.kenai.com/misc/Bullfight.jpg";
    private static final String IMAGE_PATH_PLAYER = "http://duke.kenai.com/iconSized/duke4.gif";
    public static final int STEP = 3;
    private static final int TIMER_DELAY = STEP * 8;
    private BufferedImage bkgrndImage = null;
    private BufferedImage playerImage = null;
    private Map<Direction, Boolean> directionMap = new HashMap<Direction, Boolean>();
    private int playerX = 0;
    private int playerY = 0;

    enum Direction {

        UP(KeyEvent.VK_UP, 0, -1), DOWN(KeyEvent.VK_DOWN, 0, 1),
        LEFT(KeyEvent.VK_LEFT, -1, 0), RIGHT(KeyEvent.VK_RIGHT, 1, 0);
        private int keyCode;
        private int xDirection;
        private int yDirection;

        private Direction(int keyCode, int xDirection, int yDirection) {
            this.keyCode = keyCode;
            this.xDirection = xDirection;
            this.yDirection = yDirection;
        }

        public int getKeyCode() {
            return keyCode;
        }

        public int getXDirection() {
            return xDirection;
        }

        public int getYDirection() {
            return yDirection;
        }
    }

    public MoveIcon() {
        try {
            URL bkgrdImageURL = new URL(IMAGE_PATH);
            URL playerImageURL = new URL(IMAGE_PATH_PLAYER);
            bkgrndImage = ImageIO.read(bkgrdImageURL);
            playerImage = ImageIO.read(playerImageURL);
            setPreferredSize(new Dimension(bkgrndImage.getWidth(), bkgrndImage.getHeight()));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        for (Direction direction : Direction.values()) {
            directionMap.put(direction, false);
        }
        setKeyBindings();
        Timer timer = new Timer(TIMER_DELAY, new TimerListener());
        timer.start();
    }

    private void setKeyBindings() {
        InputMap inMap = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        ActionMap actMap = getActionMap();
        for (final Direction direction : Direction.values()) {
            KeyStroke pressed = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, false);
            KeyStroke released = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, true);
            inMap.put(pressed, direction.toString() + "pressed");
            inMap.put(released, direction.toString() + "released");
            actMap.put(direction.toString() + "pressed", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, true);
                }
            });
            actMap.put(direction.toString() + "released", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, false);
                }
            });
        }

    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (bkgrndImage != null) {
            g.drawImage(bkgrndImage, 0, 0, null);
        }
        if (playerImage != null) {
            g.drawImage(playerImage, playerX, playerY, null);
        }
    }

    private class TimerListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            boolean moved = false;
            for (Direction direction : Direction.values()) {
                if (directionMap.get(direction)) {
                    playerX += STEP * direction.getXDirection();
                    playerY += STEP * direction.getYDirection();
                    moved = true;
                }
            }
            if (moved) {
                int x = playerX - 2 * STEP;
                int y = playerY - 2 * STEP;
                int w = playerImage.getWidth() + 4 * STEP;
                int h = playerImage.getHeight() + 4 * STEP;
                MoveIcon.this.repaint(x, y, w, h); // !! repaint just the player
            }
        }
    }

    private static void createAndShowUI() {
        JFrame frame = new JFrame("MoveIcon");
        frame.getContentPane().add(new MoveIcon());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

# ios - 动态改变图形资源颜色的策略

> ID：10879213
> 
> 赞同：2
> 
> 时间：2012-06-04T09:38:40.857
> 
> 标签：ios, image, uicolor, core-image

我正在为 iOS 设计一个头像制作应用程序，我们需要的一件事是让用户能够选择各种风格的眼睛，并且每只眼睛的虹膜可以是不同的颜色。

这是一个例子：

![眼睛换色器](../Images/8f745be1628f7abaa5080fff16c73380.png)

在不必为每个组合生成 PNG 的情况下实现此功能的好策略是什么？有任何想法吗？我不熟悉技术方面，但我能想到的一个想法是让每只眼睛的虹膜成为一个单独的图像，然后对其进行颜色转换。

你会推荐什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T10:10:20.990

我建议在代码中使用图像遮罩。

您可以设置两层，一层用于眼睛图像，一层用于虹膜颜色，并在用户点击选择时生成每种颜色。

这是一个快速的掩码代码，应该可以在 UIImage 上使用

```
- (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage {

    CGImageRef maskRef = maskImage.CGImage; 

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
        CGImageGetHeight(maskRef),
        CGImageGetBitsPerComponent(maskRef),
        CGImageGetBitsPerPixel(maskRef),
        CGImageGetBytesPerRow(maskRef),
        CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);
    return [UIImage imageWithCGImage:masked];

} 
```

（取自[http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html](http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html)）

您每次都必须运行代码，但由于图像相当小，这无关紧要。如果您想提高性能，您可以编写一个很好的助手来缓存结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:23:54.217

我测试了它并且它有效。对这篇文章更加全面，这里是我的实验结果：

基础图片：

![基本图像](../Images/5a1327760a2395acaa86425512007218.png)

* * *

面具图像：

![蒙版图像](../Images/846b859b0559363f73fe3f598122234c.png)

* * *

结果图像：

![结果图像](../Images/c774a91b047d3e07550d1158d543360d.png)

（在检查器背景之上，以显示透明度）

# python - PySide 中的 QStandardItemEditorCreator

> ID：10879221
> 
> 赞同：2
> 
> 时间：2012-06-04T09:39:30.280
> 
> 标签：python, qt, pyside

我正在尝试在 PySide 中实现 Qt 的颜色编辑器工厂示例（http://doc-snapshot.qt-project.org/4.8/itemviews-coloreditorfactory.html）。

我面临的问题是 QStandardItemEditorCreator 类不在 PySide 中，或者我在搜索文档很长时间后无法找到它。PySide 文档中对它的唯一引用可以在以下页面 (http://www.pyside.org/docs/pyside/PySide/QtGui/QItemEditorCreatorBase.html) 中找到，相关部分如下：

> QStandardItemEditorCreator 是一个方便的模板类，可用于注册小部件，而无需继承 PySide.QtGui.QItemEditorCreatorBase 。

没有到 QStandardItemEditorCreator 的任何链接。

简而言之，如何在 PySide 中获得 QStandardItemEditorCreator 的功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:14:12.867

我最终在 python 中实现了 QStandardItemEditorCreator。这是我的实现：

```
class QStandardItemEditorCreator(QItemEditorCreatorBase):
    def __init__(self, cls):
        super(QStandardItemEditorCreator, self).__init__()
        self.propertyName = cls.staticMetaObject.userProperty().name()
        self.cls = cls

    def createWidget(self, parent):
        return self.cls(parent)

    def valuePropertyName(self):
        return self.propertyName 
```

如果有人有更好的答案，我很乐意选择你的而不是我的。

# jquery - 如何在滚动 div 时禁用页面滚动

> ID：10879222
> 
> 赞同：1
> 
> 时间：2012-06-04T09:39:31.090
> 
> 标签：jquery, scrollbar, jscrollpane

![滚动条](../Images/1a23e4aff1614128f5f32b180b2bff5a.png)

大家好，

当用户滚动 div（黑色方形滚动条）时，我在禁用页面滚动时遇到问题。当用户的鼠标在滚动 div 内（里面有图像）时，我需要禁用页面滚动。

我试过设置溢出：隐藏；到正文，但效果不佳（因为页面滚动条变为灰色/禁用）。

我将 jScrollPane 用于块中的自定义滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-02T09:21:07.610

我不知道这是否是您的解决方案（无论如何，您的问题现在已经过时了），但您可以试试这个：页面滚动发生在达到 div 的最大滚动时。我的解决方案是强制 div 永远不会达到这个最大滚动。

```
$(".scrollable").scroll(function(){
    var maxScrollTop = $(this)[0].scrollHeight - $(this).outerHeight();
    if($(this).scrollTop() == maxScrollTop){
        $(this).scrollTop(maxScrollTop - 1);
    }
}); 
```

这个技巧对我来说很好。

# asp.net-mvc-4 - ASP.NET MVC 4.0 RC 和 Newsoft.Json

> ID：10879236
> 
> 赞同：4
> 
> 时间：2012-06-04T09:40:50.253
> 
> 标签：asp.net-mvc-4, json.net

我刚刚在 Visual Studio 2010 SP1 之上安装了 ASP.NET MVC 4.0 RC 版本。我的项目用于编译和使用 ASP.NET MVC 4.0 的 beta 版本，当我访问该站点时出现错误，提示找不到**Newtonsoft.Json 程序集版本 4.5。**

由于我在当前项目中没有使用此第三方库，因此我配置了 Fusion Log 以尝试隔离依赖 Newtonsoft.Json 程序集的程序集。

有罪的程序集是引用 Newtonsoft.Json 4.5 版的**System.Net.Http.Formatting.dll 。**

![在此处输入图像描述](../Images/ab6bc755144a253028a1c066b82168a7.png)

Beta 版本引用**了 System.Json.dll**而不是 Newtonsoft 程序集。

我很难相信微软开始依赖外部程序集，即使他们以开源方式发布了越来越多的代码。有人对发生的事情有解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T09:48:22.967

他们实际上依赖于第三方软件（就像他们使用 JQuery 和 knockout.js 发布 MVC 一样）。Scott Guthrie 宣布 MVC 4 将与 JSON.NET (Newtonsoft) 一起发布。见下文：

> Json.NET：我们计划在 ASP.NET Web API 的默认 JSON 格式化程序中使用社区开发的 Json.NET 序列化堆栈。Json.NET 提供现代 Web 框架所需的灵活性和性能。

[http://aspnet.codeplex.com/wikipage?title=ASP.NET%20MVC%204%20RoadMap](http://aspnet.codeplex.com/wikipage?title=ASP.NET%20MVC%204%20RoadMap)

顺便说一句，您可以保留 System.Json.dll，我两者都有。如果您对 JSON.NET 有任何问题，只需重新安装即可 :)

# database - 如何执行存储在数据库中的代码？

> ID：10879238
> 
> 赞同：5
> 
> 时间：2012-06-04T09:41:04.153
> 
> 标签：database, delphi, delphi-xe2

例如，如何将方法的主体存储在数据库中并稍后运行它？（我正在使用 Delphi XE2；也许 RTTI 会有所帮助。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T12:32:48.490

RTTI 不是一个完整的语言解释器。Delphi 是一种编译语言。您编写、编译并仅分发您的二进制文件。除非您是 Embarcadero，否则您无权分发 DCC32（命令行编译器）。

然而，[JVCL](http://jvcl.delphi-jedi.org/)包含一个类似于 delphi 的语言子集，封装在一个非常易于使用的组件中，称为“JvInterpreter”。您可以编写一些代码（如帕斯卡）并将其放入数据库中。然后，您可以从数据库中“运行该代码”（解释，而不是编译）。通常，这些应该是调用代码中方法的过程。您必须编写一些“包装器”来公开您希望向解释器公开的已编译 API（提供对实时数据、数据库连接对象或表/查询对象的访问）。你认为这听起来很完美，对吧？嗯，这是一个陷阱。

当心称为“[配置复杂性时钟](http://mikehadlow.blogspot.co.uk/2012/05/configuration-complexity-clock.html)”的东西。你刚到 9 点钟，那是许多痛苦和折磨的开始。就像当您遇到问题时，您使用正则表达式解决它，“现在您有两个问题”，将脚本和 DSL 添加到您的应用程序可以解决一个问题并创建多个其他问题。

虽然我认为“将 DLL 存储在数据库 blob 字段中”的想法是邪恶且荒谬的，但我认为在应用程序中肆意添加脚本和特定领域的语言也会带来很多痛苦。首先问问自己其他更简单的解决方案是否可行。然后应用 YAGNI 原则（You Ain't Gonna Need It）和 KISS（keep-it-simple-smartguy）。

在您实施任何类似于您在问题中要求做的事情之前，请三思而后行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T11:39:16.900

恕我直言，您最好的选择是使用脚本引擎并将脚本存储在数据库中。

或者，您可以将代码放入 dll 中，然后将该 dll 放入数据库中。有用于将 dll 从资源加载到 ram 并对其进行处理的代码，以便可以像使用 LoadLibrary 加载一样使用它，例如[在 dzlib 中](http://sourceforge.net/p/dzlib/code/125/tree/dzlib/trunk/src/u_dzResourceDllLoader.pas)。我真的不知道是否适用于任何 dll 以及在哪些版本的 Windows 中，但它适用于我尝试过的那些。

# plugins - Emacs 中的 Slime 似乎与自动配对有冲突

> ID：10879239
> 
> 赞同：2
> 
> 时间：2012-06-04T09:41:08.173
> 
> 标签：plugins, emacs, slime

我刚刚在 emacs 中安装了 slime。在删除所有其他插件进行调试后，我发现 slime 似乎与[autopair](https://code.google.com/p/autopair/)冲突。（或 autopair 的错误？）。在 slime 中，当我输入 Cc Cc 时，迷你缓冲区显示如下错误：

```
error in process filter: define-key: Wrong type argument: characterp, nil
error in process filter: Wrong type argument: characterp, nil
error in process filter: define-key: Wrong type argument: characterp, nil
error in process filter: Wrong type argument: characterp, nil 
```

更重要的是，在我杀死了粘液缓冲区后，错误消息仍然会发出警报。

如果我还删除了自动配对插件，粘液就可以了。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:36:30.063

添加

```
(add-hook 'slime-repl-mode-hook
          #'(lambda () 
              (setq autopair-dont-activate t))) 
```

到 .emacs 是正确的答案。:)

来自：[这里](https://code.google.com/p/autopair/issues/detail?id=32)

# javascript - How to get the ASCII value in JavaScript for the characters

> ID：10879244
> 
> 赞同：51
> 
> 时间：2012-06-04T09:41:20.560
> 
> 标签：javascript, char, ascii

> **Possible Duplicate:**
> [Convert character to ASCII code in Javascript](https://stackoverflow.com/questions/94037/convert-character-to-ascii-code-in-javascript)

my requirement is to get the ASCII value of the alphabet letters... Can anyone suggest how to do this in JavaScript?

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-04T09:42:45.353

Here is the example:

```
var charCode = "a".charCodeAt(0);
console.log(charCode);
```

Or if you have longer strings:

```
var string = "Some string";

for (var i = 0; i < string.length; i++) {
  console.log(string.charCodeAt(i));
}
```

`String.charCodeAt(x)` method will return ASCII character code at a given position.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:43:48.443

you can try

```
"str".charCodeAt(0) 
```

# android - How can I store an image in my SQL database?

> ID：10879245
> 
> 赞同：2
> 
> 时间：2012-06-04T09:41:26.940
> 
> 标签：android, sql, image, blob

in my app I have set an image from the gallery in an image view. Now I want to store that image in my SQL database.

1.  What do I have to change in my SQL database? (BLOB??)
2.  What is the best way to retrieve the image from the image view and store it in the SQL Database?

Here is my SQL Database:

```
private static final String DATABASE_CREATE =
        "create table " + DATABASE_TABLE + " ("
                + KEY_ROWID + " integer primary key autoincrement, "
                + KEY_TITLE + " text not null, " 
                + KEY_BODY + " text not null, " 
                + KEY_DATE_TIME + " text not null);"; 
```

Here I get the path of the image in the gallery and then set the image in the image view

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == PICK_FROM_FILE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);

            Log.v("IMAGE PATH====>>>> ",selectedImagePath);

         // Decode, scale and set the image.
            Bitmap myBitmap = BitmapFactory.decodeFile(selectedImagePath);
            Bitmap scaledBitmap = Bitmap.createScaledBitmap(myBitmap, NEW_WIDTH, NEW_HEIGHT, true);
            myBitmap.recycle();
            myBitmap = null;

            mImageView.setImageBitmap(scaledBitmap);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:59:43.750

首先创建这样的表 db.execSQL("如果不存在则创建表 tablename(....,images BLOB,.....);");

然后像这样做你的java代码，

```
 ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
  Bitmap bit = BitmapFactory.decodeFile("your image path here");
  bit.compress(CompressFormat.PNG, 0, outputStream);

  SQLiteDatabase db = dbh.getWritableDatabase();
  ContentValues cv = new ContentValues();
  ..
 cv.put("images", outputStream.toByteArray());
 ..
 ..
db.insert("tablename", null, cv);
db.close(); 
```

这会将您的图像存储到数据库，并且，

```
byte []temp = c.getBlob(3);
Bitmap image = BitmapFactory.decodeByteArray(temp, 0, temp.length);
BitmapDrawable dd = new BitmapDrawable(image.getImage());
imgView.setBackgroundDrawable(dd); 
```

这将从数据库中检索图像..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T10:11:12.317

不是一个好主意..您应该将图像保存在磁盘上以减少 sql 操作并提高应用程序性能.. 将图像保存在数据库中会使数据库在各种意义上都变得沉重.. 只需将图像存储在磁盘上所需的位置并保存路径以及图像名称作为数据库表中的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T09:55:48.163

或者，您将图像保存在手机内存（SD 卡上）或应用程序缓存等中，然后将检索图像文件的路径存储在 SQL 数据库中。

# python - How does the python difflib.get_close_matches() function work?

> ID：10879247
> 
> 赞同：8
> 
> 时间：2012-06-04T09:41:29.983
> 
> 标签：python, string, ip, difflib

The following are two arrays:

```
import difflib
import scipy
import numpy

a1=numpy.array(['198.129.254.73','134.55.221.58','134.55.219.121','134.55.41.41','198.124.252.101'], dtype='|S15')
b1=numpy.array(['198.124.252.102','134.55.41.41','134.55.219.121','134.55.219.137','134.55.220.45', '198.124.252.130'],dtype='|S15')

difflib.get_close_matches(a1[-1],b1,2) 
```

output:

```
['198.124.252.130', '198.124.252.102'] 
```

shouldnt `'198.124.252.102'` be the closest match for `'198.124.252.101'`?

I looked at the documentation where they have specified about some floating type weights but no information on algorithm use.

I am in need to find if the absolute difference between the last two octet is 1 (provided the first three octets are same).

So I am finding the closest string first and then checking that closest string for the above condition.

Is there any other function or way to achieve this? Also how does `get_close_matches()` behave?

`ipaddr` doesnt seem to have such a manipulation for ips.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T09:55:59.427

[好吧，文档](http://docs.python.org/library/difflib.html#difflib.SequenceMatcher)中有这一部分解释了您的问题：

> 这不会产生最少的编辑序列，但会产生对人们“看起来正确”的匹配。

为了获得您期望的结果，您可以使用[Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)。

但是对于比较 IP，我建议使用整数比较：

```
>>> parts = [int(s) for s in '198.124.252.130'.split('.')]
>>> parts2 = [int(s) for s in '198.124.252.101'.split('.')]
>>> from operator import sub
>>> diff = sum(d * 10**(3-pos) for pos,d in enumerate(map(sub, parts, parts2)))
>>> diff
29 
```

您可以使用此样式创建比较函数：

```
from functools import partial
from operator import sub

def compare_ips(base, ip1, ip2):
    base = [int(s) for s in base.split('.')]
    parts1 = (int(s) for s in ip1.split('.'))
    parts2 = (int(s) for s in ip2.split('.'))
    test1 = sum(abs(d * 10**(3-pos)) for pos,d in enumerate(map(sub, base, parts1)))
    test2 = sum(abs(d * 10**(3-pos)) for pos,d in enumerate(map(sub, base, parts2)))
    return cmp(test1, test2)

base = '198.124.252.101'
test_list = ['198.124.252.102','134.55.41.41','134.55.219.121',
             '134.55.219.137','134.55.220.45', '198.124.252.130']
sorted(test_list, cmp=partial(compare_ips, base))
# yields:
# ['198.124.252.102', '198.124.252.130', '134.55.219.121', '134.55.219.137', 
#  '134.55.220.45', '134.55.41.41'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:59:16.057

来自 difflib 的一些提示：

> SequenceMatcher 是一个灵活的类，用于比较任何类型的序列对，只要序列元素是可散列的。基本算法早于 Ratcliff 和 Obershelp 在 1980 年代后期以双曲线名称“格式塔模式匹配”发布的算法，并且比它更高级一些。基本思想是找到不包含“垃圾”元素的最长连续匹配子序列（RO 不处理垃圾）。然后将相同的想法递归地应用于匹配子序列左侧和右侧的序列片段。这不会产生最小的编辑序列，但会产生对人们“看起来正确”的匹配。

关于您根据自定义逻辑比较 IP 的要求。您应该首先验证字符串是否是正确的 ip。然后使用简单的整数算术编写比较逻辑应该是满足您要求的简单任务。根本不需要图书馆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-08T18:54:47.740

`difflib`提到：

> 基本算法早于 Ratcliff 和 Obershelp 在 1980 年代后期以双曲线名称“格式塔模式匹配”发布的算法，并且比它更高级一些。

就这可能意味着什么而言，“格式塔模式匹配”维基百科页面可以提供一些答案。此外，在 Wikipedia 页面中`difflib`，在“应用程序”部分中提到了一些关于 Python 库及其实现的内容。

[https://en.wikipedia.org/wiki/Gestalt_Pattern_Matching](https://en.wikipedia.org/wiki/Gestalt_Pattern_Matching)

# c# - ASP.NET Caching and AJAX Calls

> ID：10879250
> 
> 赞同：-1
> 
> 时间：2012-06-04T09:41:54.263
> 
> 标签：c#, asp.net, jquery, azure, azure-sql-database

I am working on an ASP.NET MVC3 project, i am using Ajax jquery to communicate with my controllers. i use asp.net caching to store the results before updating the database (SQL Azure).

```
 function SaveCustomersList() {

        $.ajax({
            type: "POST",
            url: '/Customers/SaveCustomersList/',
            data: "",
            cache: false,
            dataType: "text",
            success: function (data) {

                return true;
            }
        });
    } 
```

The application work fine but not for all users !!

When some users try to update the database the content passed to my DAL objects is null.

this is just happening with the users working on a network.

i have no explanation for that.

thanks for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:05:08.090

以下是您需要回答以获得适当帮助的问题列表：

1.  您的应用程序有多少个实例正在运行？
2.  此应用程序在哪里运行和本地网络或托管在外部？
3.  当您说“在网络上工作的用户”时，您是什么意思？这是否意味着您的网络内或网络外的用户可以访问此应用程序？
4.  如果此应用程序在您的网络中运行，并且 Ajax 调用和控制器之间的通信是通过代理传递的，那么只有代理可能是一个因素。

当您使用 InProc 缓存问题时，了解您是否有此应用程序的多个实例至关重要。您需要了解 Ajax 和控制器之间的通信是特定于实例的，并且如果您有本地缓存​​来处理它，那么它将仅适用于一个实例。但是，如果您有同一个应用程序的多个实例并且使用本地缓存将无法正常工作，因为无法保证实例 #1 提供的连接 X 将始终是实例 #1 的服务器。

如果您决定在多个实例上运行应用程序，则使用分布式缓存（即在您的实例外部）是您与内部（即在您的实例 ASP.NET inproc 内部）缓存相比的唯一选择。

[添加] 这是一个使用 Windows Azure 缓存的 .net 示例应用程序： [https ://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)

如果您希望使用 MemCache，您可以使用@smarx 解决方案，如下所述：http: [//blog.smarx.com/posts/memcached-in-windows-azure](http://blog.smarx.com/posts/memcached-in-windows-azure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:33:27.357

您需要做的是设置一个分布式缓存，允许您在多个实例之间缓存数据。您可以为此使用 Azure 缓存（但它很昂贵！）。

设置缓存相当容易，只需按照以下指南操作：[https ://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)

# ios - Error in compare array elements with a predefined value?

> ID：10879255
> 
> 赞同：0
> 
> 时间：2012-06-04T09:42:30.620
> 
> 标签：ios, xcode, arrays

This is something wired happening in my program, hope you can help me I m trying to compare array elements inside a if condition, This works when comparing value is zero.

```
if((y[5]<0) && (y[4]>0)){
//do something
} 
```

But when i try to compare the value with 20, it fails, if condition is not working!

```
if((y[5]<20) && (y[4]>20)){
    //do something
    } 
```

Since my array contains floating numbers, i tried this too, but it too fails,if condition is not working!

```
if((y[5]<20.00f) && (y[4]>20.00f)){
        //do something
        } 
```

Any idea why this happens? It drives me crazy! :( :( :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:47:56.710

你应该试试 ：

```
 if(([[y objectAtIndex:5] intValue]<20) && ([[y objectAtIndex:5] intValue]>20))
  {
    //do something
  } 
```

# java - Java 和 JSF 2.0 是嵌入式使用的可行替代方案吗？

> ID：10879260
> 
> 赞同：0
> 
> 时间：2012-06-04T09:42:48.700
> 
> 标签：java, jsf-2, embedded

在收集了一些越来越大的 JSF 实现的经验后，我决定*这*是我们开发 Web 应用程序的方式——这不是关于任何“xyz 糟透了”的讨论。它只是关于可行性和重用我们迄今为止拥有的资产与平台足迹。

问题出现在当前项目中，最终产品将存在于具有未指定内存和 CPU 的硬件盒中 - 出于成本原因，它将与任何现代路由器或接入盒相媲美。有没有人有实施经验

*   一个（简单）基于**Java**的 Web 应用程序
*   使用 JSF（与一些“低调”框架相比）
*   使用持久性框架、原生 H2、原生 SQLite、基于文件的持久性

在这样的设备上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:40:40.330

这种情况下的限制将针对您的 Web 容器 + JVM + 持久性框架。与所考虑的其他元素相比，JSF 或任何其他 Web 框架带来的开销不会很大。Tomcat 在内存有限的设备中运行良好。

问题：您是否有一些真实世界的数据（例如“访问简单 sqlite 数据的网页在 500 毫秒内为 5 个并发用户在不到 32 MB 的时间内工作”）？

最好的信息是我几周前写的这篇文章：

[了解 JSF 2 和 Wicket：性能比较](http://lu4242.blogspot.com/2012/05/understandingjsf-2-and-wicket.html)。在详细文档（内存部分）中，有一个测试运行 32 MB 的 tomcat 和一个内存中的 hsql 数据库和 40 个并发线程，服务器端（内存中）状态保存。我认为诀窍是注意您在会话范围内放置的内容，仅此而已。

# android - 如何配置声纳日食插件？

> ID：10879264
> 
> 赞同：0
> 
> 时间：2012-06-04T09:43:08.737
> 
> 标签：android, eclipse, sonarqube

我使用这个 [指南] [1] 为 eclipse 安装了声纳插件。

我将我的 android 项目配置为与服务器**http://localhost:9000**关联的声纳。然后我单击`find on server`（选择项目以添加声纳功能。）。

我选择了我的项目并单击在服务器上查找。但是当我点击完成时，它显示一个错误

`empty GroupId for project 'Personal Certificates'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:19:30.510

跟着这些步骤：

1.检查`groupId`你的`main.xml`.

2.检查`artifactId`和eclipse项目名称是否相同。

3.检查您是否在与声纳对话窗口中键入`groupId`并关联。 然后点击在服务器上查找。`artifactId`

4.还要确保在你的 Eclipse 上设置了声纳插件（通过转到 Windows->Preferences->Sonar）。

# android - How to get accelerometer data within a Service class in android?

> ID：10879265
> 
> 赞同：-2
> 
> 时间：2012-06-04T09:43:11.420
> 
> 标签：android, service, accelerometer

I have an activity that gets accelerometer data. Then I convert it into a Service class. But it is not working. Can any one say, what is the wrong with this

Service class

`

```
 package com.test.testgforce;

   import java.security.PublicKey;
   import java.text.DecimalFormat;
   import java.util.Timer;
   import java.util.TimerTask;

  import android.app.Service;
  import android.content.Context;
  import android.content.Intent;
  import android.hardware.Sensor;
  import android.hardware.SensorEvent;
  import android.hardware.SensorEventListener;
  import android.hardware.SensorManager;
  import android.os.IBinder;

  public class GforceService extends Service implements SensorEventListener {

SensorManager sensorManager;
Sensor accelerometer;

private double currentAccel= 0.0f;
    private static DecimalFormat REAL_FORMATTER = new DecimalFormat("0.####");
    double calibration = SensorManager.STANDARD_GRAVITY;

@Override
public IBinder onBind(Intent intent1) {

    return null;
}

@Override
public void onCreate() {

    super.onCreate();
    sensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
    accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    sensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_FASTEST);

}

@Override
public void onSensorChanged(SensorEvent event) {
     double x = event.values[0];
     double y = event.values[1];
     double z = event.values[2];

     double a = Math.round(Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2) + Math.pow(z, 2)));
     currentAccel = ((float)(a-calibration));
     double currentG = currentAccel / SensorManager.STANDARD_GRAVITY ;
     WebServiceCaller obj=new WebServiceCaller();
     String acl=Double.toString((Double)currentG);
     String result=obj.sendAccelerationData(acl);

}

@Override
public void onDestroy() {

    sensorManager.unregisterListener(this);
    super.onDestroy();

}

@Override
public void onStart(Intent intent, int startId) {

    sensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
    accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    sensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_FASTEST);
    super.onStart(intent, startId);
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

} 
```

} `

This is my Activity class

`

```
 package com.test.testgforce;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;

    public class TestGforceActivity extends Activity {
     /** Called when the activity is first created. */
Button gobtn;
    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    gobtn=(Button)findViewById(R.id.go);

            gobtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    Intent myIntent = new Intent();
                      myIntent.setAction("com.test.testgforce.GforceService");
                        startService(myIntent);

                }
            });

                          }
                      } 
```

`

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:44:09.020

至少您应该更改设置意图的方式，例如：

```
public void onClick(View arg0) {
   Intent myIntent = new Intent();
   myIntent.setClass(this, GfosrceService.clas);
   startService(myIntent);
} 
```

# c# - 在 wpf 中显示层次结构，具有无限数量的级别

> ID：10879270
> 
> 赞同：1
> 
> 时间：2012-06-04T09:43:26.290
> 
> 标签：c#, wpf, hierarchy

我有一组联系人存储为具有无限数量级别的层次结构。更具体地说，每个`ContactItem`都有一个`List<ContactItem>`. 我有几个原因：

1）联系人组也`ContactItems`允许更大的灵活性。

2) 一个家庭、公司等可能有一个电话号码，然后每个人都有一个电话号码。

例如“学校 -> 教师 -> 佩里先生”或“史密斯 -> 鲍勃，艾伦”

无论如何，我想知道是否有一种简单的方法可以在 WPF 中轻松地显示具有无限数量级别的层次结构。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:03:49.027

您需要搜索 HierarchicalDataTemplate 这里有一些示例

[http://www.codeproject.com/Articles/36451/Organizing-Heterogeneous-Data-on-a-WPF-TreeView](http://www.codeproject.com/Articles/36451/Organizing-Heterogeneous-Data-on-a-WPF-TreeView)

[WPF TreeView HierarchicalDataTemplate - 绑定到具有多个子集合的对象](https://stackoverflow.com/questions/1912481/wpf-treeview-hierarchicaldatatemplate-binding-to-object-with-multiple-child-co)

[http://complexdatatemplates.codeplex.com/](http://complexdatatemplates.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:47:47.983

您可能想在此处查看此控件：[http](http://www.hardcodet.net/2008/01/wpf-treeview) ://www.hardcodet.net/2008/01/wpf-treeview 。

我认为它可以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:06:29.347

你能停止添加新对象并开始指向它们吗

```
public class Contact
{
   public static List<Contact> Library = new List<Contact>();

   public List<Contact> Contacts = new List<Contact>();
   protected string Name;

   public contact ( string Name )
   {
      this.Name = Name;
      Library.Add ( this );
   }

} 
```

然后

```
Contact Ahmed = new Contact("Ahmed");
Contact Ghoneim = new Contact("Ghoneim");

Ahmed . Contacts . Add ( Contact . Library . First ( C => C . Name == "Ghoneim" ) ); 
```

# sockets - 什么是 node.js？

> ID：10879273
> 
> 赞同：-3
> 
> 时间：2012-06-04T09:43:36.660
> 
> 标签：sockets, node.js, web, websocket

我是网络套接字和节点的新手。我对 node.js 使用的不同术语感到困惑。很少有人提到它是一个工具，很少有人提到它是一个 JavaScript 程序/任何平台，或者有时它是一个服务器端的 sdk。请告诉我这个 ode.js 到底是什么？

我如何在 Windows 机器（服务器端）中使用 websockets.io 为使用 Web 套接字编写的客户端应用程序编写程序。或者有没有比 websockets.io 更好的实现来产生更快的响应..或高速？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:46:51.930

[http://nodejs.org/](http://nodejs.org/)是有关该主题的最佳信息来源。这是[概要](http://nodejs.org/api/synopsis.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:10:58.143

首先，您需要安装“exress”模块才能使用 socket.io [为简单起见，您应该使用“express”。否则你也可以通过其他方式实现socket.io。]

在终端中安装 express write

```
npm install express 
```

然后安装 socket.io 模块，你应该在终端中编写

```
npm install socket.io 
```

制作文件 app.js 编写代码如下

```
 var express = require('express')
  , stylus = require('stylus')
  , nib = require('nib')
  , sio = require('socket.io');

app.listen(3001);
var io = sio.listen(app);

app.get('/', function (req, res) {
   res.redirect('/views/index.html');
});

io.sockets.on('connection', function (socket) {
      socket.emit('hi',{"This is first Message from socket.io"});
}); 
```

然后在views文件夹中创建文件index.html

在里面写

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.1.min.js" > </script>
<script type="text/javascript" src="/socket.io/socket.io.js" ></script>

    <script>
         $(function(){
          var socket = io.connect();
              socket.on('hi',function(Message){
                   alert(Message); // Will alert "This is first Message from socket.io"
              });
         });
    </script> 
```

# jquery - 查找元素的索引

> ID：10879277
> 
> 赞同：3
> 
> 时间：2012-06-04T09:43:56.890
> 
> 标签：jquery

我有一些这样的 HTML：

```
<div class="TopClass">

  <div class="ContentClass">
    <div class="ActionClass">action</div>
  </div> 

  <div class="ContentClass">
    <div class="ActionClass">action</div>
  </div> 

  <div class="ContentClass">
    <div class="ActionClass">action</div>
  </div> 

</div> 
```

我正在寻找相对于 TopClass 的动作类的索引；如果用户点击第二个 Action 类，它应该返回 2。

```
$('.ActionClass').click(function () {
    alert($(this).parent().parent().index());  // not working    
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T09:45:26.033

像这样使用[`.index`](http://api.jquery.com/index/) 它总是会给你索引，`.ActionClass`即使结构发生变化。但是作为`.index`返回`0-based`索引，我将其添加`1`到它的输出中：

```
$('.ActionClass').click(function () {
   alert($(this).closest('.TopClass').find('.ActionClass').index(this) + 1);
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/g5mVx/3/)

`.TopClass`另一种更短的方法可以是这样，到目前为止它只适用于一个父容器，但如果你有不同的结构，请谨慎使用。上一个更安全，适用于一般情况

```
$('.ActionClass').click(function () {
   alert($('.ActionClass').index(this) + 1);
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/g5mVx/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:47:15.367

您的代码几乎是正确的，只需从父节点获取索引：

```
$('.ActionClass').click(function () {
    alert($(this).parent().index());
}); 
```

​<strong>免责声明

当除了 之外还有其他兄弟姐妹时，这不起作用`.ContentClass`。为此，您应该参考乔伊的[回答](https://stackoverflow.com/a/10879295/1338292)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T09:48:37.810

你的 parent().parent() 在结构中把你带得太高了：

```
$('.ActionClass').click(function () {
    alert($(this).parent().index());  // not working    
});​ 
```

会起作用，但它是基于零的，因此您将获得 0、1 和 2 三个 div 点击。

[http://jsfiddle.net/amelvin/AhReg/](http://jsfiddle.net/amelvin/AhReg/)

**编辑**

根据您的修改，您可以在 index() 方法上使用可选的选择器变量。

```
<div class="TopClass">

  <div class="ContentClass">
    <div class="ActionClass">action</div>
  </div> 

  <div class="ContentClass">
    <div class="ActionClass">action</div>
  </div> 

  <div class="test"></div>
  <div class="test"></div>  
  <div class="test"></div>
  <div class="test"></div>  
  <div class="test"></div>
  <div class="test"></div>  

  <div class="ContentClass">
    <div class="ActionClass">action</div>
  </div> 

</div>​

$('.ActionClass').click(function () {
    alert($(this).parent().index(".ContentClass"));  // not working    
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T00:33:26.910

```
$index = jQuery.inArray($(this)[0], $('.ActionClass')) + 1 
```

无论 HTML 结构如何，此解决方案都将起作用。它在包含所有匹配的“.ActionClass”元素的数组中找到单击的“.ActionClass”元素的数组索引。

# blackberry - LabelField 不在 os6 和 os7 设备上显示（仅在 os5 上）

> ID：10879279
> 
> 赞同：0
> 
> 时间：2012-06-04T09:43:59.703
> 
> 标签：blackberry, blackberry-simulator

我有以下标签字段，我希望它可以点击并捕获/处理其焦点/取消焦点事件。

```
titleField = new LabelField(title,FOCUSABLE|USE_ALL_WIDTH){
            public void paint(Graphics graphics)
            {
                graphics.setColor(Color.BLUE);
                graphics.drawText(_title, 30,0);
                super.paint(graphics);
            }

             protected boolean navigationClick(int status,int time)
                {
                    if(panel != null) panel.takeAction();
                    return true;
                }

                protected void onFocus(int dir)
                {
                    super.onFocus(dir);
                    panel.setSelectedIndex(_index); 
                }

                protected void onUnfocus()
                {
                    if(!_collapse){
                    _prevIndex = _index;
                    panel.setPreviousSelectedIndex(_prevIndex);
                    }
                }
        }; 
```

到目前为止，代码在我的 os5 模拟器上按预期工作，但在 os6/7 模拟器上，标签字段只是显示为空白（我什至尝试删除 super.paint(graphics); 调用但仍然得到相同的结果）。任何想法发生了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:12:55.597

我建议您每次更改字段时删除`drawText`并调用标签。`setText``_title`

我还看到您不会将`super.onUnfocus()`其称为导致重绘问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T02:31:35.170

我想通了...实际上在我的布局（水平）中，我有一个复选框字段，然后是一个标签字段..出于某种奇怪的原因，即使我没有指定 USE_ALL_WIDTH，复选框字段也占用了 os6/7 模拟器上的所有水平空间。通过覆盖布局并指定复选框字段的尺寸，布局现在可以正常运行。感谢您的提示:)

# wpf - dynamic datatemplate binding in WPF datagridcolumn

> ID：10879282
> 
> 赞同：1
> 
> 时间：2012-06-04T09:44:23.260
> 
> 标签：wpf, dynamic, datagrid, datatemplate

i have a datagrid having a column of status. by default it'll display a textblock and the text property is binded with the viwemodel's status property.

when the status get changed from status1 to status2 the textblock should be converted to a hyperlink.

how to implement dynamic datatemplate binding to resolve the purpose described above?

# java - java bean 互相干扰

> ID：10879283
> 
> 赞同：0
> 
> 时间：2012-06-04T09:44:24.010
> 
> 标签：java, jsf, web, javabeans

我有一个渲染一些图表的 bean 类，它工作得很好，但是如果我同时对同一个 bean 发出 2 个请求，bean 类的私有属性将被第二个覆盖，导致我的行为正常。

```
public class SomeGraphBean extends BaseChartGraphBean{

private String name;

    public ComplianceGraphBean(){
        super();
        name = request.getparameter("name");
    }
......
} 
```

因此，如果我同时调用，则第 1 次和第 2 次调用的名称将呈现相同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:44:03.920

将 bean 放在请求或视图范围内，而不是在会话或应用程序范围内。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:50:45.487

```
<h:panelGrid columns="1" style="width:100%">
    <jvcf:chartView
       **id="${id}"**
       height="#{chartHeight}"
       width="#{chartWidth}"
       ...../>
</h:panelGrid> 
```

应该为每个视图生成一个唯一的 id

# c++ - How to dynamically build and link boost::regex with hidden inlines?

> ID：10879284
> 
> 赞同：1
> 
> 时间：2012-06-04T09:44:27.703
> 
> 标签：c++, macos, shared-libraries, inline, clang

As part of my (OSX) project, I am building boost::regex as a dynamic library. When I build and link without -fvisibility-***inlines***-hidden, everything works as expected.

To work around a bug in another external dependency, I need to turn this compiler switch on, however. Doing so results in lots of linker errors like this one

```
Undefined symbols for architecture x86_64:
  "boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, 
  std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<
  char const*, std::string> > >, boost::regex_traits<char, 
  boost::cpp_regex_traits<char> > >::find()", referenced from:
      bool boost::regex_search<__gnu_cxx::__normal_iterator<char const*, 
  std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<
  char const*, std::string> > >, char, boost::regex_traits<char, 
  boost::cpp_regex_traits<char> > >(__gnu_cxx::__normal_iterator<char const*, 
  std::string>, __gnu_cxx::__normal_iterator<char const*, std::string>, 
  boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::string>, 
  std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, 
  std::string> > > >&, boost::basic_regex<char, boost::regex_traits<char, 
  boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags,
  __gnu_cxx::__normal_iterator<char const*, std::string>) in Regex.o 
```

when I try to link boost to my project (the file "Regex.o" is part of the boost dylib). As I understand [Apple's documentation](https://developer.apple.com/library/mac/#documentation/developertools/Conceptual/CppRuntimeEnv/Articles/SymbolVisibility.html#//apple_ref/doc/uid/TP40001670-98807), limiting inline visibility should just cause every dynamic lib to get its own instance of the inlined function, but should never cause linker errors.

It seems there is a related [compiler bug for virtual methods](http://llvm.org/bugs/show_bug.cgi?id=12255), but neither `perl_matcher::find()` nor `regex_search()` are virtual methods.

Any suggestions/ideas?

```
$ clang --version
Apple clang version 3.1 (tags/Apple/clang-318.0.58) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:34:02.983

事实证明，这是 clang 3.1 中的编译器错误。Boost 将模板内联成员函数`perl_matcher<...>::find()`（和其他）声明为`external`; 只有链接到 boost dylib 的实例未被标记为外部。因为它是内联的，所以 clang 3.1 将这个实例从 dylib 的导出表中隐藏了`-fvisibility-inlines-hidden`.

似乎这个 bug 已在当前的 clang (3.2.x) 主干中修复。在那之前，围绕这个错误定义`BOOST_REGEX_NO_EXTERNAL_TEMPLATES`工作（如果在你的二进制文件中可能有这些内联函数的多个实例是可以接受的）。`boost/regex/v4/instances.hpp`否则，修补 boost::regex 以显式导出using `__attribute__ ((visibility("default")))`when is defined中定义的符号`BOOST_REGEX_INSTANTIATE`也应该可以完成这项工作（参见`#define template`顶部的 hack `instances.hpp`）。

# ruby - How i can validate attr in Ruby

> ID：10879285
> 
> 赞同：1
> 
> 时间：2012-06-04T09:44:28.703
> 
> 标签：ruby

How I can validate attr in Ruby?

My file airplane.rb

```
class Airplane

include Validatable

attr_reader   :aircraft_type, :weight
attr_accessor :speed, :altitude, :course

def initialize(aircraft_type, options={})
    @aircraft_type  = aircraft_type.to_s 
    @course                 = options[:course]     || random_course  
    @weight         = options[:weight]     || rand(1...1000)
    @speed          = options[:speed]      || rand(1...500)
    @apltitude      = options[:apltitude]    || rand(50...3000)
    @position_x         =   options[:position_x] || rand(1...3000)
  @position_y           = options[:position_y] || rand(1...3000)
  check_course
end 

def position
 @position = [@position_x, @position_y]
end

def check_course
if @course < 1
    @course = 1
    puts "Invalid course. Set min"
elsif @course > 360
    @course = 360
    puts "Invalid course. Set max"
else
    @course = @course
    end
end

def random_course
@course = rand(1..360)
end 
```

end

My file validatable.rb where all values ​​must be checked

```
module Validatable

@@validations={}
# I need receive = {presence: [:weight, :length], aircraft_type: [:length]}

def self.validates_presence_of(*attrs)
    @@validations[:presence] = attrs
end

def validate 
    @@validations.each do |v, fields| 
        fields.each {|field_name| self.send("validate_#{v}_of", field_name)}
    end
end

private 

    def validate_presence_of(field_name)
    end 
```

end

My file init.rb with airplanes attr

```
airplane1 = Airplane.new("Boeing 74", course: 600, speed: 300, apltitude: 300)
airplane2 = Airplane.new("Boeing 700", course: 250, speed: 300, apltitude: 300)
airplane3 = BigAirplane.new("Boeing 707", weight: 50, speed: 300, apltitude: 400) 
```

How I can finish validatable.rb to validate each value in each airplane?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:24:57.213

使用 ActiveModel::Validations 而不是重新发明轮子。

参考：

```
http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/ 
```

和

```
http://www.rubyinside.com/rails-3-0s-activemodel-how-to-give-ruby-classes-some-activerecord-magic-2937.html 
```

和

```
http://asciicasts.com/episodes/211-validations-in-rails-3 
```

祝你好运。

# layout - HBOX布局extjs 4中的元素对齐

> ID：10879286
> 
> 赞同：1
> 
> 时间：2012-06-04T09:44:29.607
> 
> 标签：layout, extjs, extjs4, hbox

我需要在页面中心放置 3 个元素。这不是 HBOX 的问题。但是我的元素有不同的宽度：两个元素宽度为 350，一个元素宽度为 1000。这是示例：

```
 Ext.create('Ext.Viewport', {
            layout: {
                type: "hbox",
                pack: "center",
                align: "middle"
            },
            items: {
                xtype: 'container',
                items:[{
                    xtype: 'image',
                    height: 350,
                    width: 350,
                    src: '/images/logo.jpg'
                },{
                    xtype: 'image',
                    height: 350,
                    width: 350,
                    src: '/images/logo2.jpg'
                },{
                    xtype: 'panel',
                    width: 1000,
                    margin: '0px 0px 0px -325px',
                    frame: true,
                    autoscroll: true,
                    title: 'panel title',
                    html: 'some panel with some rows with<br /> some text'
                }]
            },
            renderTo: Ext.getBody()
    }); 
```

主要问题是元素的水平对齐。第二个问题是：如果屏幕分辨率很小并且面板中有大文本，则没有滚动条。

好的，另一个例子：

```
Ext.create('Ext.Viewport', {
                layout: {
                    type: "hbox",
                    pack: "center",
                    align: "middle"
                },
                items: {
                    xtype: 'container',
                    items:[{
                        xtype: 'form',
                        width: 350,
                        title: 'Form Panel',
                        items: [{
                            xtype: 'textfield',
                            fieldLabel: 'Name'
                        }]
                    },{
                        xtype: 'panel',
                        width: 1000,
                        frame: true,
                        autoscroll: true,
                        title: 'panel title',
                        html: 'some panel with some rows with<br /> some text'
                    }]
                },
                renderTo: Ext.getBody()
}); 
```

该面板将恰好位于屏幕中间，但表单不会。PS我试图将布局移动到容器 - 它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-10T15:05:10.633

```
Ext.create('Ext.Viewport', {
    layout : 'fit',
    autoScroll : true,
    items: {
        xtype: 'container',
        autoScroll : true,
        minHeight : 1000,
        layout: {
            type: "vbox",
            pack: "center",
            align: "center"
        },
        items:[{
            xtype: 'image',
            height: 350,
            width: 350,
            src: '/images/logo.jpg'
        },{
            xtype: 'image',
            height: 350,
            width: 350,
            src: '/images/logo.jpg'
        },{
            xtype: 'panel',
            width: 1000,
            margin: '0px 0px 0px -325px',
            frame: true,
            title: 'panel title',
            html: 'some panel with some rows with<br /> some text'
        }]
    },
    renderTo: Ext.getBody()
}); 
```

我认为也许您应该为容器定义一个`minHeight`，并将布局`'fit'`包含到容器中以获得自动滚动面板。

并将`vbox`布局包含在 contianer 的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:03:46.180

首先将您的布局定义移动到容器内。它与视口无关。第二个是你的布局，我认为你应该使用

```
type: 'vbox',
align: 'center', 
pack: 'center', 
```

我还认为 ExtJs 布局图像的方式可能有些问题 - 因为当我在 jsfiddle 中尝试你的示例时 - 图像仍然不会在 vbox 中布局，但其他组件 - （框或按钮）会布局 jsut 很好

# javascript - GoogleMaps V3 KML PlaceMark StyleURL 更改

> ID：10879287
> 
> 赞同：0
> 
> 时间：2012-06-04T09:44:40.283
> 
> 标签：javascript, google-maps

我目前正在使用 GoogleMaps V3 API。我正在加载以下 KML：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document><Style id="red">
  <LineStyle>
    <color>e2001aFF</color>
    <width>1</width>
  </LineStyle>
  <PolyStyle>
    <color>e2001acc</color>
    <fill>1</fill>
  </PolyStyle>
  <BalloonStyle>
    <bgColor>ffffffff</bgColor>
    <text>
                            &lt;font font size='3' color="#aa0000"&gt;&lt;b&gt;$[name]&lt;/b&gt;&lt;/font&gt;
                            &lt;table border='1' padding='1'&gt;$[description]&lt;/table&gt;                  
                       </text>
  </BalloonStyle>
</Style><Style id="gray">
  <LineStyle>
    <color>666666FF</color>
    <width>1</width>
  </LineStyle>
  <PolyStyle>
    <color>cccccccc</color>
    <fill>1</fill>
  </PolyStyle>
  <BalloonStyle>
    <bgColor>ffffffff</bgColor>
    <text>
                            &lt;font font size='3' color="#aa0000"&gt;&lt;b&gt;$[name]&lt;/b&gt;&lt;/font&gt;
                            &lt;table border='1' padding='1'&gt;$[description]&lt;/table&gt;                  
                       </text>
  </BalloonStyle>
</Style><name>KML</name><Placemark id="5473">
  <Snippet maxLines="0"></Snippet>
  <name></name>
  <description></description>
  <visibility>1</visibility>
  <open>0</open>
  <Polygon>
    <extrude>1</extrude>
    <tessellate>1</tessellate>
    <altitudeMode>clampedToGround</altitudeMode>
    <outerBoundaryIs>
      <LinearRing>
        <coordinates>5.54377026975101,51.6529393188121,0 5.54235383140039,51.6401639644859,0 5.53873941603147,51.6354393533086,0 5.53313983380098,51.6352371598686,0 5.53109711126943,51.6324409224198,0 5.52737786126051,51.6324813956187,0 5.52260612519502,51.6307520918321,0 5.51872075256068,51.6322363340599,0 5.51736992027453,51.6316246096909,0 5.51484051209933,51.6325529212478,0 5.51142301311675,51.6346650281583,0 5.51056937640636,51.6341534949811,0 5.50849516823445,51.634713720177,0 5.50639250193852,51.6343571115019,0 5.50606525074908,51.6362594682684,0 5.49722704729733,51.6265043908797,0 5.46737140246617,51.6425173978967,0 5.42182366459901,51.6543409225039,0 5.42437999474141,51.6560175383335,0 5.42661087246537,51.6554954605812,0 5.43004089768112,51.6592736942533,0 5.43163811861903,51.6609457181974,0 5.43165069241378,51.6634400858201,0 5.43400899528993,51.6642654325698,0 5.43709542035706,51.6646638722533,0 5.44492487842012,51.6642912329926,0 5.44573674258826,51.6661636919472,0 5.4489840685884,51.6698962431202,0 5.45900781447863,51.6917003092576,0 5.4607098223104,51.6897436062354,0 5.46973551245956,51.6895883044489,0 5.46923994357604,51.6914530469315,0 5.4707388732589,51.691761698608,0 5.47831558751497,51.7015861823258,0 5.48458009605862,51.7018910935235,0 5.49211917579361,51.7059403621055,0 5.50347583796229,51.6934008340147,0 5.50205171042708,51.6901914509596,0 5.49762079494402,51.6850245556145,0 5.49108009295296,51.6774498385961,0 5.48603420879267,51.6715509606335,0 5.50117534805849,51.6655353570913,0 5.50085686840637,51.6595932268782,0 5.51334569323478,51.6586174823159,0 5.52070245822274,51.6631783875663,0 5.52147513937071,51.6732045469624,0 5.53323861625654,51.66639133756,0 5.54377026975101,51.6529393188121,0 </coordinates>
      </LinearRing>
    </outerBoundaryIs>
  </Polygon>
  <styleUrl>#red</styleUrl>
</Placemark></Document></kml> 
```

我不想实现的是在单击地标时将 PlaceMarker 的颜色更改为灰色。

我能够捕捉到点击事件，但我找不到加载后如何更改样式：

```
google.maps.event.addListener(_kml_layer, "click", function(obj) { 
        alert(obj.featureData.id);
    }); 
```

_kml_layer 由以下函数定义：

```
_kml_layer = new google.maps.KmlLayer(
                    'http://www.mydomain.com/mykml.kml', 
                    {
                        suppressInfoWindows : true,
                        map : _map
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:33:51.600

使用 KmlLayer，您无法在加载后更改样式（使用当前记录的 API）。您要么需要使用新样式创建第二个 KmlLayer 并加载它，要么使用第三方 kml 解析器（如 geoxml3 或 geoxml_v3）将 kml 转换为您可以更改的本机 google maps api 对象。

geoxml3： [http ://code.google.com/p/geoxml3/](http://code.google.com/p/geoxml3/)

这是一个使用 geoxml3 的示例，它在鼠标悬停时更改三个地标图标中的两个： http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_stylemap_marker.html?filename=http: [//www.geocodezip.com/geoxml3_test/rollover_kml.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_stylemap_marker.html?filename=http://www.geocodezip.com/geoxml3_test/rollover_kml.xml)

geoxml_v3： [http ://code.google.com/p/geoxml-v3/](http://code.google.com/p/geoxml-v3/)

另一种选择是使用 FusionTablesLayer，它可以动态设置样式并且可以从 kml 填充

# ios - 尝试在 iOS 上更改日期格式

> ID：10879289
> 
> 赞同：0
> 
> 时间：2012-06-04T09:44:50.967
> 
> 标签：ios, date, format

我从 xml 文件中解析日期并将其存储在一个字符串变量中，如下所示：

```
NSString *dateTex = [[stories objectAtIndex: storyIndex] objectForKey: @"date"]; 
```

当我尝试在控制台上打印此变量时，我得到：

对象值为：Fri, 01 Jun 2012 15:52:00 GMT

我正在尝试更改上述日期的格式，以再次存储在字符串变量中，但如下所示：dd/mm/yy。我试过这段代码：

```
//changing dates format
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"EEE, d MMM YYYY HH:mm:ss Z"];

NSDate *date = [dateFormatter dateFromString:dateTex];
[dateFormatter release];

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
[dateFormatter2 setDateFormat:@"dd/mm/yyyy"];
NSString *dateText = [dateFormatter2 stringFromDate:date];
[dateFormatter2 release];
NSLog(@"the object value is:%@",dateText); 
```

但是当我在控制台上打印 dateText 变量时，我得到：

对象值为：(null)

我在做什么错并且日期从未存储在变量中？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:51:01.283

可能你解析格式是错误的。检查 NSDate* 日期是否正确填写。

也许你需要另一个 d，因为你得到了前导零的一天。
试试：`EEE, dd MMM YYYY HH:mm:ss Z`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:54:48.633

您的第一个 dateformatter 的日期格式是错误的。应该是 [dateFormatter setDateFormat:@"EEE, dd MMM YYYY HH:mm:ss Z"];

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:21:37.537

试试这个，（`setDateFormat`换行）。

```
 //changing dates format
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
    [dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"]; // changed line in your code

    NSDate *date = [dateFormatter dateFromString:dateTex];
    [dateFormatter release];

    NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
    [dateFormatter2 setDateFormat:@"dd/MM/yyyy"]; // changed line in your code
    NSString *dateText = [dateFormatter2 stringFromDate:date];
    [dateFormatter2 release];
    NSLog(@"the object value is:%@",dateText); 
```

日历年使用：'yyyy'，月份使用：'MM'

# php - 即时搜索网站

> ID：10879291
> 
> 赞同：1
> 
> 时间：2012-06-04T09:44:56.130
> 
> 标签：php, search, instant

我需要为我的网站安排即时搜索（如谷歌即时）。当用户键入时，脚本应该建议结果。据我了解，我需要 php+html+javascript。有什么建议、链接或有用的东西吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:48:01.477

这通常使用 AJAX 来完成。[http://www.w3schools.com/php/php_ajax_livesearch.asp](http://www.w3schools.com/php/php_ajax_livesearch.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:54:09.317

为了做到这一点，您需要大量的索引。您需要索引几乎每个关键字并存储每个关键字的搜索结果。您无法如此快速地对数据库进行实时搜索。一旦你有好的索引，你可以使用 JQuery 的 .keypress 函数来检测用户是否正在输入一些东西，一旦用户输入了一些东西，你就可以将搜索查询发送到服务器并使用 javascript 获取结果并显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:49:48.587

您应该为每篇文章设置标签，或者前。在您网站上的每个类别中搜索。

前端示例代码：

```
 // index.html

        // ajax
        <script type="text/javascript">  
            function loadXML(query) {
                $.ajax({  
                    type: "POST",  
                    data: ({ajaxSearch : query.value}),  
                    url: 'search.php',
                    success: function(data) {  
                        $('#searchcontainer').html(data);  
                    }  
                }); 
        </script>

        // html
        <input type="text" id="ajaxSearch" onkeyup="loadXML(this);" />
        <div id="searchcontainer"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:51:01.680

尝试使用 jQuery UI 自动完成。它很容易设置并且相当容易实现你所追求的：

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

搜索的数据将在一个字符串数组中，例如

```
[ "tag1", "tag2", "tag3" ... ] 
```

所以你需要做一个数据库查询（或设置手动搜索词）并根据它填充你的数组。

# safari - 如何在 Safari（Windows 7）中禁用同源策略？

> ID：10879292
> 
> 赞同：0
> 
> 时间：2012-06-04T09:45:00.230
> 
> 标签：safari, same-origin-policy

我正在尝试在 W7 站的 Safari（5.1.7.）中禁用同源策略。

我正在做 phonegap 应用程序 + jquery mobile + 使用休息服务（drupal services 3.x 模块）。我现在无法访问 OSX，需要在没有“Iphone 模拟器”的情况下对其进行测试。

1.  是否可以使用禁用同源策略的 W7 / Safari 进行测试？
2.  我是否需要使用 file:// 协议来使用 Safari 进行测试？

谢谢和问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:00:12.603

你应该能够做到：

```
C:\<path to installation>\Safari\Safari.exe --disable-web-security 
```

但我现在在 Mac 上，所以我无法确定。

# jquery - Jquery 1.7 复选框并选中

> ID：10879293
> 
> 赞同：1
> 
> 时间：2012-06-04T09:45:02.937
> 
> 标签：jquery, jquery-ui, checkbox

虽然我使用这个

```
 jQuery($("select[id='Input"+id+"OdbcParamsId']")).toggle(); 
```

我切换选择框。如果真的选中了复选框，我也会在加载页面后尝试检查：一个选项：

```
 if($( "checkbox[id='Input_" + id+"Isquery_'").attr('checked', 'checked')){....} 
```

第二种选择：

```
if $( "checkbox[id='Input_" + id+"Isquery_'").is(':checked')) {....} 
```

但是，两者都不起作用。尽管我输入的方式是来自谷歌的研究员。那么我的工作选择是：

```
$( "#Input_" + id+"Isquery").is(":checked") {...} 
```

现在最奇怪的是，它并不总是正确地触发事件，我的以下最终代码：

```
alert($( "#Input_" + id+"Isquery").is(":checked"));
if (!$( "#Input_" + id+"Isquery").is(":checked")){
    jQuery($("select[id='Input"+id+"OdbcParamsId']")).toggle();
} 
```

正如您所看到的，当事件切换真正起作用时，选择器没有。我是 JQuery 的新手，我不明白为什么。我们是否必须为不同的事件和方法使用不同的选择器？请有人解释一下。谢谢你。 **[编辑]：** ** [HTML 代码] **

```
<td><div class="input checkbox"><input type="hidden" name="data[Input_41][isquery]" id="Input_41Isquery_" value="0"/><input type="checkbox" name="data[Input_41][isquery]"  class="chks" onclick="jqOnOffInputFormDbToggle(41)" options="True False (choose one)" value="1" id="Input_41Isquery"/><label for="Input_41Isquery"></label></div></td>
<td><select name="data[Input][41][odbc_params_id]" id="Input41OdbcParamsId">
<option value="">(choose)</option>
<option value="52">PGSQL1</option>
</select></div></td> 
```

我不得不说用显示/隐藏替换切换（）确实有效。但是选择器的事情对我来说有点尴尬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:56:01.863

最大的问题是以“checkbox”开头的选择器无效，没有tagName“checkbox”。有一个 jQuery 选择器 ":checkbox"，但是你的第一个 "if" 使用 attr('checked','checked') 也没有正确设置。

无论如何，最后一种解决方案是最有效的，因为使用 ID 选择器是最有效的处理方式，而不是 $('tagName[attribute="value"]') 并且更容易阅读

编辑：写完后添加了更多代码

按照我的“最好的 ID 选择器”，更改：

```
 jQuery($("select[id='Input"+id+"OdbcParamsId']")).toggle(); 
```

至：

```
 jQuery('#Input'+id+'OdbcParamsId').toggle(); 
```

使用“jQuery”或“$”，但将它们混合起来会导致您感到困惑，它们是同一回事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:08:39.767

首先，您似乎误解了 jQuery 选择器的工作原理，我强烈建议您立即阅读**jQuery**[教程](http://docs.jquery.com/How_jQuery_Works) 。

 **其次，你的用途`toggle`不是它应该被用来做什么；也许它有效但它不是这样做的方式，实际上`toggle`是一个[事件绑定函数](http://api.jquery.com/toggle-event/)。

现在，我假设您至少使用 jQuery 1.6，如果不是，则以下代码可能不起作用。

* * *

要获取复选框的值（布尔值`true`）`false`：

```
$("#input_id").prop("checked"); 
```

要修改复选框（标记为选中，将值更改`false`为取消选中它）：

```
$("#input_id").prop("checked", true); 
```

获取一个 select 的值（即被选选项的值）：

```
$("#select_id").find("option:selected").value(); 
```

要修改选择的值：

```
$("#select_id").val("option_value"); 
```

这里有一个[带有一些示例的 JsFiddle](http://jsfiddle.net/pm4MS/4/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:49:50.030

拨动开关说：

```
select[id=Input+id+"OdbcParamsId']"] 
```

选择器说：

```
select["#Input_"+id+"Isquery"] 
```

那么，是**Input**还是**Input_**？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T12:54:39.380

```
if $("#Input_" + id+"Isquery").is(":checked"){
   $("#Input" + id + "OdbcParamsId").toggle();
} 
```**

# actor - 如何确定在 akka 中生成的演员数量？

> ID：10879296
> 
> 赞同：3
> 
> 时间：2012-06-04T09:45:35.837
> 
> 标签：actor, akka

我最近开始研究 Akka 2.0 框架，并且能够运行一些代码，生成执行简单的 oracle 数据库调用的参与者，执行简单的计算等等，但是在生产中什么都没有。

我想知道的是，是否有一般的经验法则或最佳实践来确定为某些类型的任务产生多少演员？例如，我有一个包含 200 个 jdbc 连接的连接池，我是否创建一个参与者来表示每个连接？我是否创建了一些并使用循环方法？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T12:26:01.947

请注意 numberOf(actors) != numberOf(threads)。

您应该为每个实体创建一个参与者，否则这些实体将在线程之间共享可变状态。Actor 模型的全部内容是它应该隔离可变状态，以便仅在 Actor 之间交换不可变的消息。结果是您不再需要任何锁，并且您可以轻松推断程序的线程安全性，因为所有可变状态都在参与者中隔离，并且您可以依赖框架在需要时正确通过内存屏障，例如当将参与者从一个线程切换到另一个线程。

线程的数量是一个不同的主题：这取决于内核的数量和每个线程的阻塞系数，即它花费在等待其他线程或 I/O 子系统上的时间百分比。例如，如果您的演员正在执行 CPU 密集型计算（例如计算 Pi），那么阻塞系数将接近 0%。但是，如果您的演员主要做 I/O，您可以轻松假设阻塞系数为 90% 或更高。

最后，线程数可以这样计算：

```
int threads = Runtime.getRuntime().availableProcessors() * 100 / (100 - blockingCoefficient) 
```

其中blockingCoefficient表示0到99之间的整数百分比。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T11:50:51.083

您可以创建任意数量的演员，但是，每个父母的人数限制在 20 亿左右，也不要忘记在他们完成后阻止他们。此外，不要将您的演员创建​​为顶级演员，除非他们实际上是顶级演员。（即使用 context.actorOf 而不是 system.actorOf 在演员内部创建演员）

# jquery - 如果我在 jQuery 中使用“on”，是否需要将此函数包含在准备好的文档中？

> ID：10879298
> 
> 赞同：3
> 
> 时间：2012-06-04T09:45:46.163
> 
> 标签：jquery

我有以下内容：

```
$("#menu, #home").on('click', 'a', function() {
    //  javascript code
 }); 
```

但是里面的文件还没准备好？即使#menu 或#home 还不是DOM 的一部分，它还能正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:54:36.353

是的，只要您使用 jQuery 1.7+，这将起作用（如果您将调整选择器），而无需等待 DOM 准备好，因为这种形式的事件绑定是使用`live`或`delegate`在以前的 jQuery 版本中实现的：

请参阅[文档`live`](http://api.jquery.com/live/)

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

```
$(document).on('click', '#menu a, #home a', function() {
  //  javascript code
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T09:59:06.557

不，它不起作用（见这里：http: [//jsfiddle.net/BkxqY/](http://jsfiddle.net/BkxqY/)）。您附加的处理程序需要存在的元素。但是，您始终可以委托给执行脚本时确实存在的 DOM 中更高的元素。F.ex，这不起作用：

```
<script>
    $('#menu').on('click', function(e) {
      console.log(e);
    });
</script>
<a id="menu" href="#">click</a>​ 
```

但这将：

```
<div id="menu">
    <script>
    $('#menu').on('click', 'a', function(e) {
      console.log(e);
    });
    </script>
    <a href="#">click</a>
</div>​​​​​​​​​​​​​​ 
```

`document`无论何时附加处理程序，您都可以随时委托给，因为`document`应该始终可用，f.ex：

```
<script>
$(document).on('click', '#menu a', function(e) {
  console.log(e);
});
</script>
<div id="menu">
    <a href="#">click</a>
</div>​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T09:57:14.857

与其他答案状态相反，除非所选元素已经存在于dom中，否则它将不起作用。如果它们还没有任何锚元素并且这些元素是在点击事件之前添加的，它将起作用

你可以很容易地尝试一下。在 chrome 中打开开发控制台并输入

```
$(".hopscoth").on("click","div",function(){alert("I've been clicked");});
$("body").prepend("<div class='hopscoth'><div> text </div></div>"); 
```

`text`然后点击页面顶部新插入的

然后再次执行第一行并再次单击`text`。警报第二次触发，但不是第一次触发

换句话说，第一个选择器必须存在。在您的情况下，必须存在`#menu`and元素。`#home`在触发事件之前，辅助选择器不必匹配任何内容。因此，您可以在使用 .on 附加事件处理程序之后添加锚元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:53:51.287

不，不需要。如果您希望在页面加载结束时执行脚本，则需要它。

[您可以在此处](http://api.jquery.com/on/)查看此函数的示例，该示例未在 上`$(document).ready(function()`执行。

在您的脚本中，有`#menu, #home`. 如果您希望脚本按您想要的方式执行，则需要存在具有这些 ID 的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T11:12:28.037

如果代码放在元素之后`#menu`而`#home`不是之前没有准备好的事件块，则将起作用

带有 2 个点击处理程序的演示，一个在 DOM 中放置的元素之前，一个在 [http://jsfiddle.net/hhkKE/之后](http://jsfiddle.net/hhkKE/)

# php - 如何使继承成为可选

> ID：10879300
> 
> 赞同：2
> 
> 时间：2012-06-04T09:45:48.817
> 
> 标签：php, oop, inheritance

我目前正在帮助构建一个我希望 3rd 方开发人员使用的 API。此 API 与云中的服务挂钩。这项服务不断变化，目前不是很可靠。因此，我想在我的 SDK 中提供真实客户端和假客户端。每当服务关闭时，开发人员可以简单地使用假客户端而不是真实客户端并继续编码。

我查看了各种设计模式，其中一些很好地解决了我的问题。不过，这里有一个问题。我想让代码尽可能简单：假设我的服务名为 Experia。我希望人们能够做这样的事情：

```
class Experia extends Exp

...

$ex = new Experia(/*initialization parameters*/);  //init prameters like user name, password etc
$ex->story()->create($storyArgs); 
```

目前，Experia 是一个扩展另一个类 Exp 的类，其中包含这些资源的列表以及它们可用的文件。它还扩展了一个名为 Client 的通用类，它定义了基本的 get() 和 post() 方法等，并且基本上设置了客户端远程 URL 等等（它围绕[害虫库](https://github.com/educoder/pest)）

所以 Exp 是这样的：

```
class Exp extends Client
{     
    public function story() {
         include_once('classes/User.php');
    }

    //other resource methods

} 
```

我想创建另一个包含我所有假资源的类.. 像这样：

```
class ExpFake extends Client
{     
    public function story() {
         include_once('classesFake/User.php');
    }

    //other resource methods

} 
```

这是我面临的问题。我希望 Experia 能够根据其声明扩展 Exp 或 ExpFake，而没有任何丑陋。我所说的丑陋是指使用我的 API 的开发人员必须使用的任何额外代码。因此，例如，我尝试做的一件事是将客户端与 Exp 分离，并且基本上这样做

```
$ex = new Experia(/*... */);
$ex->client = new fakeClient();   //I could also do $ex-> client = new realClient(); 
```

但问题是每次我想使用调用资源时..我必须指定客户端：

```
$this->client->story()->create($args) 
```

客户端部分是我无法包含在我的 api 中的额外代码。

长话短说..什么是设计模式（或直接方式，如果可能的话..在php中）与选择性地从一个类或另一个类继承相同的结果是什么

就像可以选择这样做：

Experia 类扩展（Exp 或 ExpFake 取决于 Experia 的初始化参数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:00:31.533

一个好方法是适配器模式。您的主要客户端是`Exp`类，开发人员使用它与您的服务交互。不过，此类依赖于适配器来连接到您的服务。实例化时需要注入这个适配器类，是必要时`Exp`可以模拟的部分。

```
class Exp {

    protected $adapter;

    public function __construct(ExpAdapter $adapter) {
        $this->adapter = $adapter;
    }

    public function foo() {
        return $this->adapter->doFoo();
    }

}

abstract class ExpAdapter {

    abstract public function doFoo();

} 
```

然后，您可以创建一个真实的`ExpAdapter`和模拟的：

```
class LiveExpAdapter extends ExpAdapter {

    public function doFoo() {
        // contact the actual service
    }

}

class MockExpAdapter extends ExpAdapter {

    public function doFoo() {
        return true;
    }

} 
```

除了扩展`abstract`类，您还可以使用`interface`规范。

对于开发人员来说，这看起来像：

```
$exp = new Exp(new LiveExpAdapter);
// if service is down, use instead:
// $exp = new Exp(new MockExpAdapter);

$exp->foo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:06:17.053

取决于您的 php 版本，但在这种情况下，我会使用特征

```
trait Exp {

}
trait ExpFake {

}    
class Experia {
    use Exp;
} 
```

驱动程序的替代方案也很好，例如定义接口和单独的驱动程序或实现（与 db 一样，当您有不同的驱动程序类时，例如 mysql、psql 等）

# java - Java中的HashMap实现。桶索引计算是如何工作的？

> ID：10879302
> 
> 赞同：54
> 
> 时间：2012-06-04T09:45:55.970
> 
> 标签：java, hashmap

我正在查看`HashMap`Java 中的实现，并且一直停留在某一点上。
函数是如何`indexFor`计算的？

```
static int indexFor(int h, int length) {
   return h & (length-1);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-06-04T09:58:52.907

哈希本身是由`hashCode()`您尝试存储的对象的方法计算的。

您在这里看到的是根据 hash 计算存储对象的“桶” `h`。理想情况下，为了避免碰撞，您将拥有与最大可实现值相同数量的存储桶`h`- 但这可能对内存要求太高。因此，您通常拥有较少数量的具有碰撞危险的存储桶。

如果`h`是 1000，但您的底层数组中只有 512 个桶，您需要知道将对象放在哪里。通常，一个`mod`操作就`h`足够了，但这太慢了。鉴于`HashMap`底层数组的桶数*总是*等于的内部属性`2^n`，Sun 的工程师可以使用 的想法`h & (length-1)`，它对由所有 's 组成的数字进行[按位与](http://en.wikipedia.org/wiki/Bitwise_operation#AND)`1`，实际上只读取`n`哈希的最低位 (这和做的一样`h mod 2^n`，只是*要*快得多）。

例子：

```
 hash h: 11 1110 1000  -- (1000 in decimal)
   length l: 10 0000 0000  -- ( 512 in decimal)
      (l-1): 01 1111 1111  -- ( 511 in decimal - it will always be all ONEs)
h AND (l-1): 01 1110 1000  -- ( 488 in decimal which is a result of 1000 mod 512) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-06-04T09:47:46.623

它不是在计算*hash*，而是在计算*bucket*。

该表达式对using 进行`h & (length-1)`按位操作，这就像一个位掩码，仅返回 的低位，从而形成 的超快变体。`AND``h``length-1``h``h % length`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-31T13:04:38.963

上面的答案很好，但我想更多地解释为什么Java可以`indexFor`用于创建索引

例如，我有一个`HashMap`这样的（这个测试是在Java7上的，我看到Java8改变了HashMap很多但是我觉得这个逻辑还是很好的）

```
// Default length of "budget" (table.length) after create is 16 (HashMap#DEFAULT_INITIAL_CAPACITY)
HashMap<String, Integer> hashMap = new HashMap<>();
hashMap.put("A",1); // hash("A")=69, indexFor(hash,table.length)=69&(16-1) = 5
hashMap.put("B",2); // hash("B")=70, indexFor(hash,table.length)=70&(16-1) = 6
hashMap.put("P",3); // hash("P")=85, indexFor(hash,table.length)=85&(16-1) = 5
hashMap.put("A",4); // hash("A")=69, indexFor(hash,table.length)=69&(16-1) = 5
hashMap.put("r", 4);// hash("r")=117, indexFor(hash,table.length)=117&(16-1) = 5 
```

您可以看到带有键的条目索引和带有键的`"A"`对象和带有键的`"P"`对象`"r"`具有相同的索引（**= 5**）。这是我执行上面的代码后的调试结果

[![在此处输入图像描述](../Images/66965e0ce18c2a00afd4187e581ba145.png)](https://i.stack.imgur.com/zhGYZ.png)

图片中的表格在这里

```
public class HashMap<K, V> extends AbstractMap<K, V> implements Map<K, V>, Cloneable, Serializable {
    transient HashMap.Entry<K, V>[] table;
    ...
} 
```

=>我看到
如果索引**不同**，新条目将添加到表中
如果索引**相同**且**相同**`hash`，则新值将更新 如果索引**相同**且**不同**，则新条目将指向旧条目（如 a ）。然后你知道为什么有字段 ****`hash`**`LinkedList``Map.Entry``next`******

 ******```
static class Entry<K, V> implements java.util.Map.Entry<K, V> {
        ...
        HashMap.Entry<K, V> next;
} 
```

您可以通过阅读 中的代码再次验证它`HashMap`。

与现在一样，您可以认为`HashMap`永远**不需要更改**大小（16），因为`indexFor()`总是返回值 <= 15 但它**不**正确。
如果你看`HashMap`代码

```
 if (this.size >= this.threshold ...) {
      this.resize(2 * this.table.length); 
```

`HashMap``size`当>=时将调整表格大小（双倍表格长度）`threadhold`

是什么`threadhold`？`threadhold`计算如下

```
static final int DEFAULT_INITIAL_CAPACITY = 16;
static final float DEFAULT_LOAD_FACTOR = 0.75F;
...
this.threshold = (int)Math.min((float)capacity * this.loadFactor, 1.07374182E9F); // if capacity(table.length) = 16 => threadhold = 12 
```

是什么`size`？`size`计算如下。
当然，`size`这里**不是** `table.length`。
每当您将新条目放入`HashMap`并`HashMap`需要创建新条目时（请注意，`HashMap`当键相同时不要创建新条目，它只会覆盖现有条目的新值）然后`size++`

```
void createEntry(int hash, K key, V value, int bucketIndex) {
    ...
    ++this.size;
} 
```

希望有帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T09:48:30.080

它正在计算将存储条目（键值对）的哈希映射的存储桶。存储桶 ID 为`hashvalue/buckets length`.

哈希图由桶组成；对象将根据存储桶 id 放置在这些存储桶中。

`hash code / buckets length`任何数量的对象实际上都可以根据它们的值落入同一个桶中。这被称为“碰撞”。

如果许多对象落入同一个桶中，则在搜索它们的 equals() 方法时将被调用以消除歧义。

碰撞次数与桶的长度成间接比例。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2018-11-05T02:50:03.353

bucket_index = (i.hashCode() && 0x7FFFFFFFF) % hashmap_size 可以解决问题******

# winforms - 在 DatagridCombobox selectedindexchanged 事件中更改数据网格列值

> ID：10879306
> 
> 赞同：0
> 
> 时间：2012-06-04T09:46:11.070
> 
> 标签：winforms

我有一个数据网格，其中 DatagridComboboxcolumn 作为 winforms 中的列之一。组合框包含两个项目 Y，N。如果用户选择 Y，我需要更改同一行的两列的值。当用户选择“N”时也会发生同样的事情。

我试图注册 ComboBox_SelectedIndexChanged 如下。

但无法获取所选行的行索引或列索引并更改相同行列的值。

请尽快帮助我。

```
 private void gridTesr_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            ComboBox combo = e.Control as ComboBox;           
            if(combo != null)
            {
                // Remove an existing event-handler, if present, to avoid 

                // adding multiple handlers when the editing control is reused.

                combo.SelectedIndexChanged -=new EventHandler(ComboBox_SelectedIndexChanged);

                // Add the event handler. 

                combo.SelectedIndexChanged +=new EventHandler(ComboBox_SelectedIndexChanged);
            }
        }

        private void ComboBox_SelectedIndexChanged(object sender, EventArgs e)
        {

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:33:22.263

尝试声明自己的方法来处理`ComboBox.SelectedIndexChanged`事件。

```
private void gridTesr_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    ComboBox combo = e.Control as ComboBox;           
    if(combo != null)
    {
          // Remove an existing event-handler, if present
          combo.SelectedIndexChanged -= this.MyComboEventHandler;

          // Add the event handler
          combo.SelectedIndexChanged += this.MyComboEventHandler;
    }
}

private void MyComboEventHandler(object sender, EventArgs e)
{
    string myValue = ((ComboBox)sender).SelectedItem.ToString();
    DataGridViewCell cell = gridTesr.CurrentCell;

    MessageBox.Show(string.Format("The current ComboBox resides in the Row {0} and Column {1} and it currently has the {3} value.",
          cell.RowIndex, cell.ColumnIndex, myValue));
} 
```

# java - 如何自定义 JAXB 生成的 java 注解？

> ID：10879316
> 
> 赞同：1
> 
> 时间：2012-06-04T09:47:03.350
> 
> 标签：java, annotations, jaxb

JAXB 为每个属性生成@XmlAttribute 注释。例如，属性

```
 <xsd:attribute name="agent_id" use="required" type="xsd:unsignedInt">
    <xsd:annotation><xsd:documentation xml:lang="en">Foreign key reference to Agent.agent_id, Included in composite primary key</xsd:documentation></xsd:annotation>
    </xsd:attribute> 
```

被翻译成注解的java对象属性

```
@XmlAttribute(name = "agent_id", required = true)
@XmlSchemaType(name = "unsignedInt")
protected long agentId; 
```

但是，如果属性名称中没有下划线，则@XmlAttribute 中的名称字段将丢失（因此##default）。我想自定义 JAXB 绑定，以便生成不带下划线的名称的注释。有什么建议可以如何工作吗？

谢谢！约翰内斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:12:17.430

您可以编写一个 XJC 插件来添加此行为：

*   [http://weblogs.java.net/blog/kohsuke/archive/2005/06/writing_a_plugi.html](http://weblogs.java.net/blog/kohsuke/archive/2005/06/writing_a_plugi.html)

就 JAXB (JSR-222) 实现而言，结果 XML 将是相同的。

# php - PHP：未找到 Mongo 类

> ID：10879321
> 
> 赞同：0
> 
> 时间：2012-06-04T09:47:35.393
> 
> 标签：php, mongodb

我正在尝试使用 PHP 运行 MongoDB。我的机器上安装了 XAMPP 1.7.7（Windows XP - 32 位）。

PHP 版本是 5.3.8，Apache 版本是 2.2.21。我按照他们的说明页面上的说明安装了 PHP MongoDB 驱动程序。我有这个 zip 中的 php_mongo.dll - mongo-1.1.4-php5.3vc9ts（因为我看到线程安全已启用）。

但是，我总是不断收到消息 - 此代码片段的“致命错误：未找到类 'Mongo'”-

```
$mongo = new Mongo();
$db = $mongo->database_name; 
```

有谁知道解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:56:26.187

请参阅此链接-[在 Max OS Lion 上使用 XAMPP 安装 MongoDb PHP 驱动程序时出错](https://stackoverflow.com/questions/10725577/error-installing-mongodb-php-driver-with-xampp-on-max-os-lion/10726050#10726050)-我认为这可能是相同的问题，尽管它是在 Mac OS 上而您在 Windows 上。

我相信你可能需要安装 xampp“开发包”，需要构建额外的 php 扩展。

“开发者包”可以在这里找到：http: [//www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:57:23.377

问题解决了 ！！我所做的是重新安装 Apache 并应用更改。它奏效了，虽然我不知道首先出了什么问题！谢谢你们每一个人的帮助 ！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T09:33:02.570

这是因为你原谅了一些事情.. Mongo 不懂一个未知的类，所以你必须这样做：

```
$mongo = new MongoClient();
$db = $mongo->database_name; 
```

# php - 通过 getJSON 将变量发送到数据库查询的最佳方法是什么？

> ID：10879325
> 
> 赞同：0
> 
> 时间：2012-06-04T09:47:44.690
> 
> 标签：php, mysql, database, json

我有以下代码......我正在尝试传入一个参数以用一个值替换“id = 0”。有没有办法做到这一点，或者更好的方法来做到这一点？

数据库调用

```
include 'db.php';
$con = mysql_connect($host,$user,$pass);
$dbs = mysql_select_db($databaseName, $con);

$result = mysql_query("SELECT * FROM myTable where id = 0;"); 
```

JSON 调用：

```
$(function(){
    var items="";
    $.getJSON("mypage.php",function(data){
        $.each(data,function(index,item) {
        items+="<option value='"+item.id+"'>"+item.title+"</option>";
        });
        // .... some stuff
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:05:07.303

你可以解析变量抛出你的 getJSON 请求。

请执行下列操作：

```
$.getJSON("mypage.php", {id : 2}, function(data){
    // .... some stuff
}); 
```

PHP 通过 GET 接收变量：

```
include 'db.php';
$con = mysql_connect($host,$user,$pass);
$dbs = mysql_select_db($databaseName, $con);

$id = $_GET["id"]; 

$result = mysql_query("SELECT * FROM myTable where id = ".mysql_real_escape_string($id).";"); 
```

确保使用 mysql_real_escape_string() 来防止 mysql 注入...

# git - 如何检查两个分支的冲突，但不需要合并它们？

> ID：10879331
> 
> 赞同：67
> 
> 时间：2012-06-04T09:48:05.027
> 
> 标签：git

由于我们项目的发布步骤，我无法合并两个分支，但我想知道两个分支是否存在冲突。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-04T09:50:51.950

假设您在`master`分支上，并且您想测试该`dev`分支是否可以在没有冲突的情况下合并到`master`.

```
# In the master branch
git merge dev --no-ff --no-commit 
```

之后，您将能够知道是否存在冲突。

要在正常情况下返回，只需中止合并：

`git merge --abort`

根据 git 文档：

> **`--ff`**
> 如果合并解析为快进，则不生成合并提交，仅更新分支指针。这是默认行为。
> 
> **`-no-ff`**
> 即使合并解析为快进，也会生成合并提交。
> 
> **`--commit`**
> 执行合并并提交结果。此选项可用于覆盖 --no-commit。
> 
> **`--no-commit`**
> 使用 --no-commit 执行合并，但假装合并失败并且不自动提交，让用户有机会在提交之前检查并进一步调整合并结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-13T07:44:18.370

根据用例提供答案 - 您在功能分支上 - 正在进行更改。与此同时，另一位同事对共享文件进行了更改并合并到主干中。现在您已准备好合并。此时您将遇到合并冲突的问题。

确保您拥有最新版本的主干分支

```
git fetch
git checkout trunk
git pull 
```

切换回功能分支

```
git checkout feature 
```

在功能分支中，模拟合并到主干分支作为快进（--no-ff）。--no-commit 将阻止自动提交

```
git merge trunk --no-ff --no-commit 
```

检查文件。

*   [<<<<<<< HEAD] 和 [=======] 之间的行是功能分支中的行
*   [=======] 和 [>>>>>>> trunk] 之间的行是主干分支中的行

要中止模拟合并并返回原始状态，请运行

```
git merge --abort 
```

# ruby-on-rails - 在 Rails3 中的多个语言环境之间共享翻译

> ID：10879332
> 
> 赞同：0
> 
> 时间：2012-06-04T09:48:07.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization

我有以 en-GB、en-US、de-DE、de-AT、de-CH 等形式出现的语言环境。

现在的问题是 de-DE、de-AT、de-CH 都共享相同的翻译。所以必须多次定义它们很烦人，而且不是很干。

在有人建议只使用 :de 作为语言环境之前，我不能。这就是我之前的做法，由于某些业务逻辑，我无法更改新的 en-GB 格式，这迫使我被迫接受。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:53:00.737

如果您使用 YAML 进行本地化，那么您已经有了必要的工具。YAML 允许你编写类似 mixins 的东西：

```
en: &english
   hello: Hello, %{username}!

en-GB:
  <<: *english

en-US:
  <<: *english 
```

我希望你在这里有干燥的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:22:54.697

仍然干燥，但更重要的是，您的翻译不会在内存中重复：

创建一个包含 fallbacks 的 i18n 初始化器：

```
require "i18n/backend/fallbacks" 
I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks) 
```

并将您的翻译移动到`de:`和`en:`语言环境中。

像这样的电话

```
I18n.t :foo, :locale => 'de-AT' 
```

将首先寻找`de-AT.foo`并且如果没有匹配，将寻找`de.foo`.

有关[i18n wiki](https://github.com/svenfuchs/i18n/wiki/Fallbacks)的更多信息。

# java - iText - 获取文本段的字体大小和系列

> ID：10879336
> 
> 赞同：4
> 
> 时间：2012-06-04T09:48:23.323
> 
> 标签：java, pdf, itext, text-extraction, pdf-extraction

我目前正在尝试从 PDF 文件中自动提取重要的关键字。我能够从 PDF 文档中获取文本信息。但现在我需要知道，这些关键字有哪些字体大小和字体系列。

我已经拥有以下代码：

**主要的**

```
public static void main(String[] args) throws IOException {
    String src = "SEM_081145.pdf";

    PdfReader reader = new PdfReader(src);

    SemTextExtractionStrategy semTextExtractionStrategy = new SemTextExtractionStrategy();

    PrintWriter out = new PrintWriter(new FileOutputStream(src + ".txt"));
    Rectangle rect = new Rectangle(70, 80, 490, 580);
    RenderFilter filter = new RegionTextRenderFilter(rect);

    for (int i = 1; i <= reader.getNumberOfPages(); i++) {
        // strategy = new FilteredTextRenderListener(new LocationTextExtractionStrategy(), filter);
        out.println(PdfTextExtractor.getTextFromPage(reader, i, semTextExtractionStrategy));
    }
    out.flush();
    out.close();
} 
```

我已经实现了 TextExtraction Strategy `SemTextExtractionStrategy`，如下所示：

```
public class SemTextExtractionStrategy implements TextExtractionStrategy {

private String text;

@Override
public void beginTextBlock() {
}

@Override
public void renderText(TextRenderInfo renderInfo) {
    text = renderInfo.getText();

    System.out.println(renderInfo.getFont().getFontType());

    System.out.print(text);
}

@Override
public void endTextBlock() {
}

@Override
public void renderImage(ImageRenderInfo renderInfo) {
}

@Override
public String getResultantText() {
    return text;
}
} 
```

我可以获取 FontType，但没有获取字体大小的方法。还有其他方法或如何获取当前文本段的字体大小？

Or are there any other libraries which can fetch out the font size from TextSegments? I already had a look into PDFBox, and PDFTextStream. The PDF Shareware Library from Aspose would perfectly do the job. But it's very expensive and I need to use an open source project.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T15:51:25.183

Thanks to Alexis I could convert his C# solution into Java code:

```
text = renderInfo.getText();

Vector curBaseline = renderInfo.getBaseline().getStartPoint();
Vector topRight = renderInfo.getAscentLine().getEndPoint();

Rectangle rect = new Rectangle(curBaseline.get(0), curBaseline.get(1), topRight.get(0), topRight.get(1));
float curFontSize = rect.getHeight(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T12:41:13.713

I had some trouble using Alexis' and Prine's solution, since it doesn't deal with rotated text correctly. So this is what I do (sorry, in Scala):

```
val x0 = info.getAscentLine.getEndPoint
val x1 = info.getBaseline.getStartPoint
val x2 = info.getBaseline.getEndPoint
val length1 = (x2.subtract(x1)).cross((x1.subtract(x0))).lengthSquared
val length2 = x2.subtract(x1).lengthSquared
(length1, length2) match {
  case (0, 0) => 0
  case _ => length1 / length2
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T11:26:34.073

You can adapt the code provided in [this answer](https://stackoverflow.com/a/6884297/1065525), in particular this code snippet:

```
Vector curBaseline = renderInfo.GetBaseline().GetStartPoint();
Vector topRight = renderInfo.GetAscentLine().GetEndPoint();
iTextSharp.text.Rectangle rect = new iTextSharp.text.Rectangle(curBaseline[Vector.I1], curBaseline[Vector.I2], topRight[Vector.I1], topRight[Vector.I2]);
Single curFontSize = rect.Height; 
```

This answer is in C#, but the API is so similar that the conversion to Java should be straightforward.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-03T23:21:15.233

If you want the exact fontsize, use the following code in your renderText:

```
float fontsize = renderInfo.getAscentLine().getStartPoint().get(1)
     - renderInfo.getDescentLine().getStartPoint().get(1); 
```

Modify this as indicated in the other answers for rorated text.

# c - 是否有任何工具可以在运行时检测竞争条件并重写代码以在将来避免它们

> ID：10879342
> 
> 赞同：0
> 
> 时间：2012-06-04T09:48:57.473
> 
> 标签：c, linux, race-condition

我见过可以确定性地运行多线程程序的工具，即使在存在竞争条件的情况下也是如此。现在我想知道是否有任何工具可以实际检测比赛并重写代码（在运行时）以在将来不检测到比赛。

这种工具存在吗？还是创建一个太难了？我认为可以使用对代码进行动态二进制转换的工具来创建它，例如 PIN 或 valgrind。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:17:36.347

[竞争条件](http://en.wikipedia.org/wiki/Race_condition)意味着您的计算结果取决于事件发生的时间（中断、调度程序等）。开发人员通常的*意思*（我假设你也是这个意思）是程序大部分时间都是“正确的”，只是有时会失败——一个由竞争条件触发的错误，这种情况很少发生。

一些自动检测算法应该如何知道期望的结果是什么，什么不是？即使它可以做到这一点：知道它发生并弄清楚如何然后修复它通常要困难得多。我相信您可以将此问题简化为[停机问题](http://en.wikipedia.org/wiki/Halting_problem)。

在工作中，我们使用了一些框架，这些框架允许创建单元测试来检测竞争条件（当我回到工作岗位时，我可以看看它的名称），但它基于枚举所有可能的线程调度。作为一个简单的测试，我们让它在并发队列实现上运行，具有 1 个消费者和 1 个生产者且队列容量为 1 的测试用例需要几秒钟才能运行。只需将队列容量增加到 2 就可以运行几天。可能是该工具不太好，但它显示了可能组合的数量非常快地爆炸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T06:59:12.167

虽然以确定性方式运行程序要求太多，但检测一些（如果不是全部）竞争条件并不困难。

目前该领域正在进行大量研究。你走在正确的轨道上

PIN -------> Intel Parallel Studio Valgrind --> Cachegrind 和 ThreadSanitizer 1.0

有许多开源和商业工具。我以前工作过 1

此类工具的工作方式是它们跟踪每次内存访问的锁定和其他信息，并维护先前访问的历史记录。每次访问都会与以前的访问历史进行比较。还有更多。

# rdf - 如何从文本中识别名称、地点、对象、事件以生成 RDF 数据？

> ID：10879344
> 
> 赞同：3
> 
> 时间：2012-06-04T09:49:03.020
> 
> 标签：rdf

输入将是文章，输出应该是 FOAF 中的 rdf 数据（如果有其他 ..pls 建议）。我的疑问是：

1) 我如何训练系统识别人、地点等并生成 rdf 结构？2）识别后是否应该将其存储在数据库中，然后检索并生成rdf结构？还有其他方法吗？

3) 我如何使用和应用 OWL？（网络本体语言）请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T06:50:02.710

1.  命名实体识别 (NER) - [http://en.wikipedia.org/wiki/Named-entity_recognition](http://en.wikipedia.org/wiki/Named-entity_recognition)（识别人和公司是人们经常做的事情，所以你应该没问题，并在周围找到大量示例）。OpenNLP、LingPipe 和 GATE 只是可用于执行 NER 的一些工具等等。

2.  如果您想使用 OWL 对您的 RDF 数据进行一些推断，我建议您将您的 RDF 存储在三重存储中（有很多免费和开源的三重存储）。

3.  这取决于您选择的三重存储，有些为您提供 OWL 推理，或者您可以在将数据添加到存储时使用推理引擎并使用没有推理的三重存储（即完全实现）。但是，同样，这可能会也可能不会，这取决于您实际需要的推理量。

# asp.net - Mysql中int(10)的最大大小是多少

> ID：10879345
> 
> 赞同：49
> 
> 时间：2012-06-04T09:49:04.867
> 
> 标签：asp.net, mysql

在我的数据库中，我声明了一个 datatype 的变量`Int(10)`。如果我在网页的文本框中键入一个数字，该数字将存储在一个变量中，其最大值可以`Int(10)`在 Mysql 中。如果我在文本框中输入一个非常大的数字，它会给出`IndexOutofRangeException`.

所以我打算使用`maximumlength`文本框的属性。`Int(10)`mysql中类型变量可以存储的最大数量是多少？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-06-04T09:52:12.823

`INT(10)`意味着您可能将其定义为`INT UNSIGNED`.

所以，你可以存储从`0`最多到`4294967295`的数字（注意最大值有10位，所以MySQL自动`(10)`在列定义中添加了（10）只是一个格式提示，仅此而已。它对你有多大的数字没有影响可以存储）。

`BIGINT UNSIGNED`如果要存储更大的值，可以使用。请参阅 MySQL 文档：[整数类型（精确值）](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-04T09:59:18.227

> unsigned int 的最大值为 4294967295，无论是 INT(1) 还是 int(10)，都将使用 4 个字节的数据。

[如此处](http://www.bajb.net/2008/10/mysql-int1-or-int10/)所述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-01T16:54:50.503

只需在 Mysql 中使用 BigInt 而不是 Int ，如果您想简要解释一下，请转到

[MySQL 数据类型](https://www.w3resource.com/mysql/mysql-data-types.php)

# java - Java重定向jar中类的sysout

> ID：10879347
> 
> 赞同：1
> 
> 时间：2012-06-04T09:49:08.747
> 
> 标签：java, redirect, jar, system.out

我想重定向/隐藏以下代码生成的系统输出：

```
Tools tool = new ToolsImpl();
HashCode hash = tool.computeHashCodes(dir); 
```

困难的部分是：**computeHashCodes 方法存储在一个 jar 中**。

我试过以下代码：

```
PrintStream printStreamOriginal=System.out;
System.out.println("sysout deactivated");

System.setOut(new PrintStream(new OutputStream() {
   public void write(int b) {}
}));

System.out.println("Text to delete");

Tools tool = new ToolsImpl();
HashCode hash = tool.computeHashCodes(dir);

System.setOut(printStreamOriginal);
System.out.println("sysout reactivated"); 
```

“*要删除的文本*”确实被删除了，但“ *.computeHashCodes* ”生成的系统输出没有。有人知道如何隐藏这个 sysout 吗？

提前谢谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:01:32.253

代码可能正在写入 System.err。

尝试相同的练习，但使用 System.err 而不是 System.out。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:57:35.503

您的解决方案在使用时工作正常`System.out`，所以我猜测您想要“阻止”的代码不会`System.out`用于输出。尝试找出输出是如何完成的，以便您可以“阻止”它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T10:09:52.490

看这里：

[写到罐子里](http://www.java2s.com/Code/Java/File-Input-Output/CreateJarfile.htm)

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.jar.JarEntry;
import java.util.jar.JarOutputStream;
import java.util.jar.Manifest;

public class CreateJarFile {
  public static int BUFFER_SIZE = 10240;
  protected void createJarArchive(File archiveFile, File[] tobeJared) {
    try {
      byte buffer[] = new byte[BUFFER_SIZE];
      // Open archive file
      FileOutputStream stream = new FileOutputStream(archiveFile);
      JarOutputStream out = new JarOutputStream(stream, new Manifest());

      for (int i = 0; i < tobeJared.length; i++) {
        if (tobeJared[i] == null || !tobeJared[i].exists()
            || tobeJared[i].isDirectory())
          continue; // Just in case...
        System.out.println("Adding " + tobeJared[i].getName());

        // Add archive entry
        JarEntry jarAdd = new JarEntry(tobeJared[i].getName());
        jarAdd.setTime(tobeJared[i].lastModified());
        out.putNextEntry(jarAdd);

        // Write file to archive
        FileInputStream in = new FileInputStream(tobeJared[i]);
        while (true) {
          int nRead = in.read(buffer, 0, buffer.length);
          if (nRead <= 0)
            break;
          out.write(buffer, 0, nRead);
        }
        in.close();
      }

      out.close();
      stream.close();
      System.out.println("Adding completed OK");
    } catch (Exception ex) {
      ex.printStackTrace();
      System.out.println("Error: " + ex.getMessage());
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T12:09:52.947

谢谢大家，我终于设法避免显示系统输出。

当*Magodiez*建议我找出输出是如何完成的时，我认为我不能这样做，因为我无法访问源代码；但后来我意识到我只需要反编译代码。

所以我用[Java Decompiler](http://java.decompiler.free.fr/?q=jdgui)对其进行了反编译，然后我看到了输出是如何完成的：

```
LOGGER.log(Level.INFO, str2); 
```

然后我使用以下行解决了我的问题：

```
java.util.logging.Logger.getLogger("log.tools").setLevel(Level.SEVERE); 
```

这实际上是我真正想要的，现在只有 SEVERE 消息会打印在 sysout 上。

再次感谢 ！

# blackberry - 黑莓中的后退按钮处理

> ID：10879348
> 
> 赞同：2
> 
> 时间：2012-06-04T09:49:09.033
> 
> 标签：blackberry

从我的黑莓应用程序中单击后退按钮时，我想回到主屏幕。我在谷歌和stackoverflow中搜索过这个，但我没有得到任何解决方案。任何人都可以为此提供帮助。

在我的**开始屏幕**中，我为后退按钮写了这样的内容。

```
protected boolean keyDown(int keycode, int time)
    {
        if (Keypad.key(keycode) ==  Keypad.KEY_ESCAPE)
        {
            close();
            return true;
        }

        else
        {
            return super.keyDown(keycode, time);
        } 
    } 
```

在我的**HomeScreen**中，我是这样写的。

```
protected boolean keyDown(int keycode, int time)
    {
        if (Keypad.key(keycode) ==  Keypad.KEY_ESCAPE)
        {
            UiApplication.getUiApplication().pushScreen(new StartingScreen());
            return true;
        }

        else
        {
            return super.keyDown(keycode, time);
        } 
    } 
```

从我的应用程序 HomeScreen 我可以进入我的应用程序的起始屏幕。之后，当我从开始屏幕单击后退按钮时，我需要转到黑莓主屏幕，这意味着我需要退出应用程序并退出该应用程序。我写了 close(); 来到黑莓主屏幕。但它不工作。它再次出现在我的应用程序主屏幕上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:42:39.160

覆盖 MainScreen 子类中的 keyDown 方法。

```
protected boolean keyDown(int keycode, int time) {  
    int key = Keypad.key(keycode);
        if(key==Characters.ESCAPE){
            // do something here
            return true;
        }       
        return super.keyDown(keycode, time);
    } 
```

**来到主屏幕**

```
while(!(UiApplication.getUiApplication().getActiveScreen() instanceof HomeScreen)){
                UiApplication.getUiApplication().popScreen(UiApplication.getUiApplication().getActiveScreen());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T06:08:50.880

我得到了解决方案...我写过这样的。

```
public boolean onClose() 
    {
        int choose=Dialog.ask(Dialog.D_YES_NO, "Are you sure Want to Exit?");
        if(choose==Dialog.YES)
        {
            System.exit(0);

        }
        return true;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T11:42:19.927

试试这个 -

```
public class yourclass extends MainScreen{
      public yourclass(){

   }
   }
public boolean onClose() {
       Application.getApplication().invokeLater(new Runnable() {
            public void run() {

                             //close this screen and push your home screen  

            }
        });
        return true;
    } 
```

# python - supervisord 环境变量设置应用程序

> ID：10879350
> 
> 赞同：7
> 
> 时间：2012-06-04T09:49:22.850
> 
> 标签：python, tornado, supervisord

我正在从 supervisord 运行一个应用程序，我必须为它设置一个环境。大约有 30 个环境变量需要设置。我试过把所有东西都放在一个大

环境=

行，这似乎不起作用。我也尝试了多个 enviroment= 行，但这似乎也不起作用。我也尝试过在 env 值附近使用和不使用 ' 。

设置我的环境以使其在监督控制下保持完整的最佳方法是什么？我是否应该从预先加载了环境的 shell 脚本调用我的实际程序（龙卷风、fwiw）？理想情况下，我想将所有环境变量放入一个包含文件中并使用主管加载它们，但我愿意以另一种方式来做。

更新：

这是我在 conf 文件中使用的内容：

```
environment=
    PYTHONPATH=/srv/obsf/current/:$PYTHONPATH,
    PYTHON_EGG_CACHE=/srv/obfs/current/.python-eggs,
    OBFS_API_ENVIRONMENT_STAGE=test, 
```

这持续了大约 30 行，其中包含很多环境变量。当我执行程序时，它立即崩溃并抱怨未设置环境变量 OBFS_API_ENVRIONMENT_STAGE。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T10:21:14.660

[`relevant documentation section`](http://supervisord.org/configuration.html#supervisord-section-values)说明您需要将变量列为逗号分隔的键/值对：

> 环境
> 
> KEY=val,KEY2=val2 形式的键/值对列表，将放置在 supervisord 进程的环境中（并因此放置在其所有子进程的环境中）。此选项可以包含值 %(here)s，它扩展为找到 supervisord 配置文件的目录。请注意，子进程将继承用于启动 supervisord 的 shell 的环境变量，除了这里和程序的环境配置节中被覆盖的那些。

也使用[`example for this section`](http://supervisord.org/configuration.html#supervisord-section-example)逗号：

```
environment = KEY1=value1,KEY2=value2 
```

在内部这是[`parsed into a dict`](https://github.com/Supervisor/supervisor/blob/0b05ee3db077bf9e8e2fbe64d283ae91fb72a864/supervisor/datatypes.py#L69)使用 python [`shlex`lexer](http://docs.python.org/library/shlex.html)，所以它会正确处理引用。它还会去除空格，因此为了使内容更具可读性，您可以将内容分成多行：

```
environment =
    KEY1="Some longer value containing whitespace",
    KEY2=value2-on-a-new-line, 
```

请注意，尾随逗号是可选的；它不会对输出产生影响。

然而，在 KEY1 之后缺少一个逗号可能会导致奇怪的值（上面的例子，减去逗号之后`whitespace"`会给你`{'KEY1': 'Some longer value containing whitespace', '=': ','}`作为环境字典），因为等号要求没有经过严格检查。我已经[提交了一个拉取请求](https://github.com/Supervisor/supervisor/pull/125)来解决这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T04:23:42.210

事实证明，尾随逗号是一个问题。我引用了所有 env 字符串并删除了尾随逗号。现在一切正常。

# iphone - 无法在 jquerymobile 的网格布局的 ui 块中将数据主题和属性设置为按钮

> ID：10879357
> 
> 赞同：1
> 
> 时间：2012-06-04T09:49:57.180
> 
> 标签：iphone, jquery-mobile

```
 {
    <div  class = "ui-grid-d" >
        <div class = "ui-block-a" >
            <div class = "ui-grid-a">
                 <div class = "ui-block-a">
                     <a id = "button-prop"  data-role="button" data-theme = "b" ><h3 id="text-pos">0</h3></a>
                  </div>  //end of block-a
                  <div class = "ui-block-b"> 
```

## 1

```
 </div>  //end of block-b
              </div>  //end of grid-a
          </div> //end of block-a of grid-d
          <div data-role = "ui-block-b">
                      ----
          </div>
          <div data-role = "ui-block-c">
                      ----
          </div>
          <div data-role = "ui-block-d">
                      ----
          </div>
          <div data-role = "ui-block-e">
                      ----
          </div>
    </div> //end of grid-d 
```

在 CSS 中： { div.ui-btn{ 按钮样式 } div.ui-btn ui-btn-inner{ 按钮内容样式 } }

我正在使用 Phonegap 和 jquerymobile 开发一个 iPhone 应用程序。在此，我创建了一个网格布局，并在网格布局块中创建了按钮。但我无法为该按钮设置属性和主题。请告诉我解决方案

但是这些样式无法影响按钮

# ios - 从一个目标创建两个应用程序

> ID：10879358
> 
> 赞同：2
> 
> 时间：2012-06-04T09:50:00.617
> 
> 标签：ios, xcode

有没有办法从 XCode 中的一个目标和项目创建两个 iOS 应用程序？我已经搜索了它并没有得到明确的答案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:51:45.547

**是**的，每个目标都是不同的应用程序。只需制作额外的目标，它们就会有单独的构建设置和 plist。

您可以使用编译器标志来分隔它们，类似于调试标志，使用#if 和#endif 段。

# r - 三元图和填充轮廓

> ID：10879361
> 
> 赞同：12
> 
> 时间：2012-06-04T09:50:22.583
> 
> 标签：r, plot, ternary, interpolation

用户，我想对三元图（“vcd”）有一些提示。

我有这个数据框：

```
a <- c(0.1, 0.5, 0.5, 0.6, 0.2, 0, 0, 0.004166667, 0.45) 
b <- c(0.75,0.5,0,0.1,0.2,0.951612903,0.918103448,0.7875,0.45)
c <- c(0.15,0,0.5,0.3,0.6,0.048387097,0.081896552,0.208333333,0.1) 
d <- c(500,2324.90,2551.44,1244.50, 551.22,-644.20,-377.17,-100, 2493.04) 
df <- data.frame(a, b, c, d) 
```

我正在构建一个三元图：

```
ternaryplot(df[,1:3], df$d) 
```

如何映射连续变量`d`，获得与此类似的结果？

![在此处输入图像描述](../Images/ff6c4a1c89c0e1d4483a89103089b3fe.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-16T04:18:14.770

我需要解决一个类似的问题，这部分是编写一个包作为 ggplot2 的扩展的催化剂，用于三元图。该软件包可在[CRAN](http://cran.r-project.org/web/packages/ggtern/index.html)上获得。

**此问题的输出：** ![在此处输入图像描述](../Images/2005ae937eb8fe7f50aea1ef46ff66b3.png)

**构建上述代码的代码**

```
#Orignal Data as per Question
a <- c(0.1, 0.5,0.5, 0.6, 0.2, 0          , 0         , 0.004166667, 0.45) 
b <- c(0.75,0.5,0  , 0.1, 0.2, 0.951612903,0.918103448, 0.7875     , 0.45)
c <- c(0.15,0  ,0.5, 0.3, 0.6, 0.048387097,0.081896552, 0.208333333, 0.10) 
d <- c(500,2324.90,2551.44,1244.50, 551.22,-644.20,-377.17,-100, 2493.04) 
df <- data.frame(a, b, c, d)

#For labelling each point.
df$id <- 1:nrow(df)

#Build Plot
ggtern(data=df,aes(x=c,y=a,z=b),aes(x,y,z)) + 
  stat_density2d(geom="polygon",
                 n=400,
                 aes(fill=..level..,
                 weight=d,
                 alpha=abs(..level..)),
                 binwidth=100) + 
  geom_density2d(aes(weight=d,color=..level..),
                 n=400,
                 binwidth=100) +
  geom_point(aes(fill=d),color="black",size=5,shape=21) + 
  geom_text(aes(label=id),size=3) + 
  scale_fill_gradient(low="yellow",high="red") + 
  scale_color_gradient(low="yellow",high="red") + 
  theme_tern_rgbw() + 
  theme(legend.justification=c(0,1), legend.position=c(0,1)) + 
  guides(fill = guide_colorbar(order=1),
         alpha= guide_legend(order=2),
         color="none") + 
  labs(  title= "Ternary Plot and Filled Contour",
         fill = "Value, V",alpha="|V - 0|")

#Save Plot
ggsave("TernFilled.png") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T15:39:49.053

这可能不是最优雅的方法，但它可以工作（从头开始，但不使用`ternaryplot`：我不知道该怎么做）。

```
a<- c (0.1, 0.5, 0.5, 0.6, 0.2, 0, 0, 0.004166667, 0.45) 
b<- c (0.75,0.5,0,0.1,0.2,0.951612903,0.918103448,0.7875,0.45)
c<- c (0.15,0,0.5,0.3,0.6,0.048387097,0.081896552,0.208333333,0.1) 
d<- c (500,2324.90,2551.44,1244.50, 551.22,-644.20,-377.17,-100, 2493.04) 
df<- data.frame (a, b, c)

# First create the limit of the ternary plot:
plot(NA,NA,xlim=c(0,1),ylim=c(0,sqrt(3)/2),asp=1,bty="n",axes=F,xlab="",ylab="")
segments(0,0,0.5,sqrt(3)/2)
segments(0.5,sqrt(3)/2,1,0)
segments(1,0,0,0)
text(0.5,(sqrt(3)/2),"c", pos=3)
text(0,0,"a", pos=1)
text(1,0,"b", pos=1)

# The biggest difficulty in the making of a ternary plot is to transform triangular coordinates into cartesian coordinates, here is a small function to do so:
tern2cart <- function(coord){
    coord[1]->x
    coord[2]->y
    coord[3]->z
    x+y+z -> tot
    x/tot -> x  # First normalize the values of x, y and z
    y/tot -> y
    z/tot -> z
    (2*y + z)/(2*(x+y+z)) -> x1 # Then transform into cartesian coordinates
    sqrt(3)*z/(2*(x+y+z)) -> y1
    return(c(x1,y1))
    }

# Apply this equation to each set of coordinates
t(apply(df,1,tern2cart)) -> tern

# Intrapolate the value to create the contour plot
resolution <- 0.001
require(akima)
interp(tern[,1],tern[,2],z=d, xo=seq(0,1,by=resolution), yo=seq(0,1,by=resolution)) -> tern.grid

# And then plot:
image(tern.grid,breaks=c(-1000,0,500,1000,1500,2000,3000),col=rev(heat.colors(6)),add=T)
contour(tern.grid,levels=c(-1000,0,500,1000,1500,2000,3000),add=T)
points(tern,pch=19) 
```

![在此处输入图像描述](../Images/7f16018383743990f765f0aec9c1f97b.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-05T23:56:18.757

我之前的回答使用了密度估计。这是一个使用线性回归的方法。

```
df <- data.frame(a, b, c, d)
ggtern(df,aes(a,c,b)) + 
  geom_interpolate_tern(aes(value=d,fill=..level..),
                        binwidth=500,
                        colour="white") +
  geom_point(aes(fill=d),color="black",shape=21,size=3) + 
  scale_fill_gradient(low="yellow",high="red") +
  theme(legend.position=c(0,1),legend.justification=c(0,1)) + 
  labs(fill="Value, d") 
```

[![在此处输入图像描述](../Images/b8b8e6aa43f15b62ef763befad2a9981.png)](https://i.stack.imgur.com/Ipl7f.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T14:10:50.103

非常感谢您的提示，这是我的最终结果：

```
#Rename header
names(SI) [6] <- "WATER%"
names(SI) [7] <- "VEGETATION%"
names(SI) [8] <- "SOIL%"

#pdf(file="prova_ternary12.pdf", width = 5, height =5)
##++++++++++++++++++++++++++++++
install.packages("colourschemes", repos="http://R-Forge.R-project.org")
library(colourschemes)
rs = rampInterpolate ( limits =c(-0.8 , 0.8),
                       ramp = c("red4", "red", "orangered", "orange", "darkgoldenrod1", "white", 
                                "cyan2", "blue", "darkblue", "blueviolet", "purple3") )
rs(-0.8)
rs(-0.6000)
rs(-0.4)
rs(-0.2)
rs(0)
rs(0.2)
rs(0.4)
rs(0.6000)
rs(0.8000)

#++++++++++++++++++++++++++++++

#TERNARYPLOT (vcd)
library(vcd)
png(file="ternary.png", width=800, height=800)
 ternaryplot(
  SI[,6:8],
  bg = "lightgray",
  grid_color = "black",
  labels_color = "black",   
  dimnames_position = c("corner"),
  #dimnames = 10,
  newpage = T,
  #dimnames_color = "green",
  border = "black",
  pop=T,
  #SI$MEAN_b2b6.tm,
  col=rs(SI$MEAN_b2b6.TM_V2),
  #col = ifelse(SI$MEAN_b1b6.tm > 0, "blue", "#cd000020"), 
  pch=13, cex=.4, prop_size = F,
  labels = c("outside"),
  #size=SI$MEAN_b1b6.tm,
  main="b4b6  -TM data-") 
```

![通过 ternaryplot() 和 rampInterpulate() 绘制 3 个变量](../Images/d06e39ab13bb3bf792b65c26ab0745d2.png)

# python - 如何在 Python 程序中实现设置文件

> ID：10879363
> 
> 赞同：2
> 
> 时间：2012-06-04T09:50:25.093
> 
> 标签：python, settings, ini

“设置文件”是定义了“背景颜色”、“执行速度”、“x 的数量”等内容的文件。目前，我将它实现为一个`setting.py`文件，我在一开始就导入了该文件。有人告诉我我应该把它变成一个`settings.ini`文件，但我不明白为什么！请澄清一下，最佳选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T10:00:20.213

没有最优解；这是一个偏好问题。*

通常，设置不需要用图灵完备的语言来表达：它们通常只是一堆标志和选项，有时是字符串和数字等。拥有`settings.py`文件的一个论点（尽管非常不正统）是如果最终用户被期望编写代码来生成非常深奥的配置（例如游戏的地图）。这将与 shell script`.bashrc`样式文件非常相似。

但同样，在 99.9% 的程序中，设置通常只是一堆标志和选项，有时是字符串和数字等。可以将它们存储为 JSON 或 XML。它还可以轻松地对您的设置执行反射：例如，以树状方式自动列出它们，或根据描述自动创建 GUI。

（如果您允许人们通过修改设置文件来注入代码，这也可能是一个（不太可能？）安全问题。）

**编辑：没有双关语......*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T10:05:25.983

将配置文件从主代码库中分离出来是个好主意有几个原因。当然，这取决于您的用例，您应该根据您的用例进行评估。

1.  配置可由不懂编程语言的最终用户管理。将配置分解并使用一个简单的文件更有意义，该`ini`文件使用简单的键值对作为配置参数。

2.  配置因安装环境而异。您的代码在多个环境中运行，它们都使用不同的配置。通过在这些环境中安装单独的配置文件和相同的源代码，很容易维护这种情况。

3.  有些包管理器知道什么是配置文件，什么是源文件。它们很聪明，不会在版本升级等时覆盖任何更改的配置。因此您不必担心在软件包版本升级后重置配置参数。例如，您使用默认配置文件发布您的产品。用户微调了一些参数。您运送了另一个版本的软件包。用户不应期望在版本升级后重置配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T10:00:55.790

将设置文件设置为 Python 模块的一个问题是它可以包含在导入时将执行的代码。这可能允许将恶意代码插入您的程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T12:21:03.510

对于 Python 使用库存库：

YAML 样式配置文件：

[http://www.yaml.org/start.html](http://www.yaml.org/start.html)

[http://pypi.python.org/pypi/PyYAML/](http://pypi.python.org/pypi/PyYAML/)

（例如使用 Google App Engine）

INI：[http ://docs.python.org/library/configparser.html](http://docs.python.org/library/configparser.html)

不要将 XML 用于手动编辑的配置文件。

# ssl - 浏览器不接受 StartSSL 1 类证书 (Weblogic 10.0.1)

> ID：10879370
> 
> 赞同：7
> 
> 时间：2012-06-04T09:50:53.247
> 
> 标签：ssl, weblogic, ssl-certificate, weblogic-10.x, keytool

我已向 StartSSL 申请了 1 类证书并将其安装在 Weblogic 10.0.1 中（参见屏幕截图）。

![WLS 密钥库配置](../Images/0a98258baac8452da918a92147a85cff.png) ![WLS SSL 配置](../Images/6ea75c15790b1e062d3428f1d27c8e64.png)

浏览器（Windows 7 上的 Chrome 和 IE9，XPSP3 上的 IE8）仍然给出证书错误（见截图）。

![证书错误 1](../Images/f605780eb253ea9fc3ef2b66a304f467.png) ![证书错误 2](../Images/c7023709661c33f313724a2f4467363f.png)

我认为 StartSSL 根证书可在多个浏览器中使用（请参阅[此处](https://forum.startcom.org/viewtopic.php?f=15&t=1802)）。请指教。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-04T21:05:53.240

StartSSL Class 1 证书由中间 CA 签名，中间 CA 由 StartCom 根 CA 签名。为了让您的浏览器信任这个证书，它需要知道直到它已经知道的根 CA 的信任链。

您的服务器需要将完整的信任链发送到浏览器（减去根 CA），以便您的浏览器可以验证您的证书是否受信任。

有关详细信息，请参阅[StartSSL 常见问题解答](http://www.startssl.com/?app=25#31)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:38:16.720

发现了问题。我在我们的密钥库中错误地导入了 StartSSL 证书。另外，我在 Weblogic 控制台中将“weblogic”指定为别名，它不是证书，而是公钥/私钥对。我正在使用[Portecle](http://portecle.sourceforge.net/)来编辑密钥库。

当我注意到我可能使用了错误的别名时，我已将其更改为证书的别名。这导致了 Weblogic 错误：

```
Inconsistent security configuration, weblogic.management.configuration.ConfigurationException: No identity key/certificate entry was found under alias startssl-hostname in keystore keystore_StartSSL on server servername 
```

最后，我按照这些步骤将证书和私钥打包到一个 PKCS#12 密钥库中。然后我使用 Portecle 将该密钥库导入到我们的 java 密钥库中：

1.  使用 Portecle 作为 PKCS#12 密钥库导出“weblogic”公钥/私钥。
2.  使用 openssl 从此密钥库中提取私钥：

    openssl pkcs12 -in weblogic.p12 -nocerts -out privatekey.pem

3.  `cert.p12`使用 openssl将证书和私钥打包为 PKCS#12 密钥库 ( )：

    openssl pkcs12 -export -in cert.cer -inkey privatekey.pem -out cert.p12 -name cert -CAfile ca.pem -caname root

4.  `cert.p12`使用“cert”作为别名，使用 Portecle 将文件导入我们的 java 密钥库。

5.  更改了 Weblogic 配置以使用具有正确密码的“cert”别名。

它奏效了！

PS：自从 Portecle 曾经抱怨过这一点以来，我一直在添加[JCE 无限强度政策。](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-plat-419418.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T20:56:52.660

通常信任库和密钥库是分开的，但不会导致上述错误。

如果您的浏览器不信任 CA，那么您将收到上述错误。您需要将根 CA 添加到浏览器。您可以检查您的浏览器支持的证书。例如对于 IE -> 工具 -> Internet 选项 -> 内容 -> 证书 -> 受信任的根 CA

假设您需要将其导入一两个浏览器，这没什么大不了的。但是，如果您需要在整个企业（意味着 100 或 1000 个浏览器）中执行此操作，您将需要桌面支持团队的帮助！

# c++ - 提取具有不同语言环境的年、月和日

> ID：10879373
> 
> 赞同：1
> 
> 时间：2012-06-04T09:51:02.993
> 
> 标签：c++, mfc, internationalization, locale

我有一个应用程序，允许用户根据日期查询一些数据。该应用程序支持不同的西方语言，并且允许用户以他们的格式输入查询。

各种格式包括

```
15.10.2012
15/10/2012
10/15/2012
15-Oct-2012
15-Okt-2012 
```

最后一个是另一种语言，查找表不适合这个，因为我需要将查找表定义为我支持的 N 种语言。

我相信可能有一些解决方案 MFC/C++ 库/Windows 平台本身可以提取各种有效格式的日期信息。如果有一些库/API 之类的，请提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:39:56.437

在大多数现代 GUI 中，用户不需要通过键入来输入日期/时间。通常有一些日历控件可以帮助用户输入日期时间。您不能使用其中一些控件（例如： http: [//msdn.microsoft.com/en-us/library/hhdec0z1](http://msdn.microsoft.com/en-us/library/hhdec0z1(v=vs.80).aspx) (v=vs.80).aspx ）来限制用户输入吗？并且您始终可以使用 microsoft 函数 strftime() 在当前语言环境中向用户显示日期/时间。

# c# - 启动服务时出错（本地计算机上的服务，然后自动停止）

> ID：10879374
> 
> 赞同：0
> 
> 时间：2012-06-04T09:51:10.360
> 
> 标签：c#, windows-services

我安装了一个 Windows 服务，它必须通过以下方法从 App.Config 文件中获取一些字符串`OnStart`-`ConfigurationManager.AppSettings["stringName"];`
在 App.Config 中，我还`source`为用于写入日志文件的日志文件定义了一个。

但是，当我成功安装我的服务并尝试从`Serivce Control Explorer`内部启动它时`My Computer -> Manage - > Device Manager`，我收到一条消息说

`The service on the local computer and then stopped. Some services stop automatically if not used by toher applications`

在 Windows 事件查看器中，我收到以下错误详细信息（可能在启动服务时引发了异常）

这是相同的错误详细信息：

```
Service cannot be started. System.Configuration.ConfigurationErrorsException: Configuration system failed to initialize ---> System.Configuration.ConfigurationErrorsException: Unrecognized configuration section add. (C:\Program Files (x86)\Default Company Name\ServiceSetup\ServiceChecker.exe.Config line 3)
   at System.Configuration.ConfigurationSchemaErrors.ThrowIfErrors(Boolean ignoreLocal)
   at System.Configuration.BaseConfigurationRecord.ThrowIfParseErrors(ConfigurationSchemaErrors schemaErrors)
   at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey)
   --- End of inner exception stack trace ---
   at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey)
   at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName)
   at System.Configuration.ConfigurationManager.GetSection(String sectionName)
   at System.Configuration.PrivilegedConfigurationManager.GetSection(String sectionName)
   at System.Dia... 
```

以上详细信息显示了与服务文件相关的错误详细信息`.exe.config`。我已尝试卸载并重新安装该服务，并且该服务的安装帐户设置为`Local system`具有广泛的系统权限。

我在项目中的 App.Config：

```
 <?xml version="1.0" encoding="utf-8" ?>
    <configuration>
<appSettings>
      <add key="UtilName" value="sample.exe"/>
      <add key="App1" value="MyApp"/>
      <add key="App1E" value="MyApp.exe"/>
      <add key="App2" value="MyApp2"/>
      <add key="App2E" value="MyApp2.exe" />
      <add key="AppDirectory" value="Company\MyProject" />
      <add key="CMDArgs" value="\start"/>
</appSettings>    
      <system.diagnostics>
        <sources>
          <source name="ServiceTrace" switchName="ServiceTraceSwitch" switchType="System.Diagnostics.SourceSwitch">
            <listeners>
              <add name="ServiceLog" type="System.Diagnostics.TextWriterTraceListener" initializeData="servicetrace.log"/>
            </listeners>
          </source>
        </sources>
        <switches>
          <add name="ServiceTraceSwitch" value="Information" />
        </switches>
        <trace autoflush="true" indentsize="4"></trace>
      </system.diagnostics>

    </configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:59:07.557

似乎您的 app.config（或 .exe.config）包含无法识别的部分。错误消息通常会说类似

> 无法识别的配置部分“部分名称”

所以我假设您只是添加了配置值而没有所需的父元素。该元素必须作为该部分的子元素添加。确保它看起来像这样：

```
<configuration>
   <appSettings>
     <add key="MyKey" value="MyValue" />
   </appSettings>
   ...some more configuration...
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:59:59.973

根据错误，您的 .config 文件中有语法错误：

```
Unrecognized configuration section add. 
```

这表明您可能错过了配置文件中的外部部分。应该看起来像：

```
<section>
    <add ... >
</section> 
```

# java - 可以使用带有用户名和密码的 Java FileReader（或类似的东西）吗？

> ID：10879375
> 
> 赞同：0
> 
> 时间：2012-06-04T09:51:20.063
> 
> 标签：java, passwords, filereader

我已经搜索了很长时间，但一无所获。

我想从特定的 UNC 文件名 (\\\) 读取带有 Java 的文件，并且必须输入用户和密码。我不想在 ssh 上使用 ftp 或其他东西（或者最好不能）。

像这样的东西（伪代码）：

```
public static void readFile(File filename, URL fileURL, User userName, Password password){

    FileReader fr = new FileReader(filename, fileURL, userName, password);

   ... do something with the file .... 
```

}

有没有办法用Java做到这一点？谢谢你的帮助。

[编辑] 我想从其他域中的用户访问文件夹。所以我必须提交这个域用户的用户名和密码。

另一种情况是在unix系统中访问外国用户的文件夹。例如。我的用户位于 /home/me 中，我想访问 /home/you 的文件夹，所以我需要提交用户“you”的密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:15:50.677

在 UNC 路径的情况下，您可以提供 JCIFS。(http://jcifs.samba.org/) 试一试。它是 Windows 网络协议的纯 Java 实现（例如 Windows 文件共享/映射网络驱动器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:59:13.910

一种出路是：

1.  在一些http服务器上托管一个文件，比如tomcat。
2.  使用[Basic-Authentication](http://oreilly.com/java/archive/tomcat-tips.html)项目文件访问。

# iphone - 从表格视图中删除多个单元格

> ID：10879377
> 
> 赞同：0
> 
> 时间：2012-06-04T09:51:30.313
> 
> 标签：iphone, ios, uitableview

我有从具有自定义单元格的数据库加载的表格视图。On button checkBox 应该出现在 table view 的每个单元格上。在此之后，我只想从表格视图中删除选中的项目。怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:11:56.217

我猜你有一个要填充的数组。

所以你必须从数组中删除元素并像这样创建一个 reloadData

```
[yourTableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:17:35.970

```
Here recording data array is a array of dictionary in which there is a key which keep track of which button is checked or which is unchecked. on clicking Delete button you can use below mentioned concept for deleting more than open array at a go :

USE THIS CONCEPT : 

    - (IBAction)deleteClicked:(id)sender 
    {
        for(int index = 0 ; index < [recordingDataArray count] ; index++)
        {
            NSMutableDictionary *item = [recordingDataArray objectAtIndex:index];
            BOOL checked = [[item objectForKey:@"checkStatus"] boolValue];
            if(checked)
            {
                [recordingDataArray removeObjectAtIndex:index];
                index--;
            }
        }
        [self.recordingTblView reloadData];
    }

THANKS & REGARDS,
GAUTAM TIWARI 
```

# sharepoint - 如何向现有选择字段添加更多选择

> ID：10879386
> 
> 赞同：3
> 
> 时间：2012-06-04T09:52:13.653
> 
> 标签：sharepoint, sharepoint-2010

这是我的设置：

我有一个包含此字段的列表（从 vs2010 创建）：

```
ID="{854D15F6-C70F-4C79-AB59-40C8786EF825}"
 Name="fooSelector"
 Type="Choice"
 Sealed="TRUE"
 Required="TRUE"
 DisplayName="Fruits">
  <CHOICES>
   <CHOICE>Apple</CHOICE>
   <CHOICE>Cherry</CHOICE>
   <CHOICE>Both</CHOICE>
  </CHOICES>
</Field> 
```

我想为这个字段添加更多选择。我尝试使用 powershell 在网上找到两个示例... A)

```
$spWeb = Get-SPWeb http://intranet/foo

$spList = $spWeb.Lists["Dynamics-Nav List"]
$choices =  New-Object System.Collections.Specialized.StringCollection
 "Fish",
 "Melon"  | ForEach-Object { $choices.Add($_) | Out-Null }

$spList.Fields.Add("Fruits",
 [Microsoft.SharePoint.SPFieldType]::Choice,
 $false,
 $false,
 $choices) 
$spList.Fields[“Fruits”].Update() 
```

二）

```
$w = Get-SPWeb http://intranet/foo
$l = $w.Lists["Dynamics-Nav List"]
$uf = $l.Fields["Fruits"]
$uf.Choices
$uf.Choices.Add("Fish");
$uf.update()
$l.update(); 
```

两者都运行良好，没有错误，之后 $uf.Choices 显示刚刚添加的“Fish”选项，但没有保存任何更改。

我究竟做错了什么？

最良好的祝愿，阿明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T19:07:50.657

尝试使用 powershell

```
$suryafield = "<Field Type='Choice' DisplayName='Surya' Required='TRUE' Format='Dropdown' Group='Custom Columns'
      FillInChoice='FALSE' StaticName='Surya' Name='Surya'>
            <CHOICES>
                <CHOICE>YES</CHOICE>
                <CHOICE>NO</CHOICE>
            </CHOICES>
           </Field>"
      $web.Fields.AddFieldAsXml($suryafield) 
```

欲了解更多信息，请参阅这篇文章 [http://suryapulipati.blogspot.com/2013/08/create-sharepoint-choice-field-site.html](http://suryapulipati.blogspot.com/2013/08/create-sharepoint-choice-field-site.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:01:23.880

**Try This Code From Code Behind :**

```
string newField = string.Concat("<Field Type='Choice' DisplayName='",
                    "FieldName", "' Name='", "FieldName", "' ",
                    "Format='Dropdown' Required='TRUE' Indexed='TRUE'><CHOICES>",
                    "<CHOICE>1</CHOICE>",
                    "<CHOICE>2</CHOICE>",
                    "<CHOICE>3</CHOICE>",
                    "</CHOICES><Default>1</Default>",
                    "<Description> Status.",
                    "</Description></Field>");

    list.Fields.AddFieldAsXml(newField, true,SPAddFieldOptions.AddFieldToDefaultView);
    Web.Update(); 
```

# java - 卡片布局抽奖

> ID：10879390
> 
> 赞同：3
> 
> 时间：2012-06-04T09:52:18.533
> 
> 标签：java, image, swing, paintcomponent, cardlayout

我之前发表过一篇文章，解释了我在卡片布局中绘制图像时遇到的问题。我得到了有限的帮助，并没有解决问题。所以我再次发布这篇文章来解释它，希望能得到一些有效的帮助。

我正在尝试为我的 java 游戏制作标题屏幕。我制作了两个java文件。第一个文件加载卡片布局，下一个加载标题屏幕。但不知何故，在第二个文件中我无法让它绘制我的背景图像。我没有收到任何错误消息。它根本不画任何东西。

第一个文件：

```
import javax.swing.*;
import java.awt.*;

public class MainScreen extends JFrame{

    public static CardLayout cardLayout = new CardLayout();//set a new cardlayout

    // *** JPanel to hold the "cards" and to use the CardLayout:
    static JPanel cardContainer = new JPanel(cardLayout);//some variable for the cardlayout
    public static JComboBox cardCombo = new JComboBox();//some variable for the cardlayout
    public static JPanel comboPanel = new JPanel();;//some variable for the cardlayout
    Image background = Toolkit.getDefaultToolkit().createImage("data/images/title.png");//loads the background image

    public MainScreen() {

        JFrame frame = new JFrame();
        frame.setTitle("Project");//Title of the screen
        frame.setSize(800,600);//Size of the window
        frame.setResizable(false);//Is the window resizable?
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//Exit the frame when the default red cross is clicked
        frame.setVisible(true);//is the frame visible?
        frame.getContentPane().add(cardContainer, BorderLayout.CENTER);//add the cardcontainer to flip panels
        frame.setLocationRelativeTo(null);
    }

    public static void debug(){//makes an extra card, this is a debug card and is not used for anything but debugging

        JPanel debugPanel = new JPanel(new BorderLayout());//Debug panel, not used for anything, script does not work if not here
        debugPanel.setBackground(Color.BLACK);//set the background color to black
        String debug = "Debug Panel";//name the card or something like that
        cardContainer.add(debugPanel, debug);//add the card to the panel
        cardCombo.addItem(debug);//add the item??
    }

    public static void main(String[] args){//this runs when the script opens

        new MainScreen();//run the main screen class, that loads the window and card layout
        debug();//run the next class that initializes the mainmenu
        new MainMenu(null);//load the main menu
    }
} 
```

第二个文件：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.MediaTracker;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class MainMenu extends JPanel{

    Image background = Toolkit.getDefaultToolkit().createImage("data/images/title.png");//loads the background image

    public MainMenu(MainScreen frame){
        JPanel menuPanel = new JPanel();//This is the menu panel, where the main menu is loaded
        menuPanel.setBackground(Color.BLACK);//set the background color to black
        String menu = "Menu Panel";//name the card or something
        MainScreen.cardContainer.add(menuPanel, menu);//add the card to the panel
        MainScreen.cardCombo.addItem(menu);//add the item??
        MainScreen.cardLayout.show(MainScreen.cardContainer, menu);//choose what card to show. For this instance show the mainmenu
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.drawImage(background, 0, 0, null);
        repaint();
    }

} 
```

## 编辑

> 您能否将存在图像显示问题的代码的确切部分提取到 SSCCE 中？并附上使用图像的链接 - 它可能已损坏，在这种情况下，问题不在代码内部。

干得好

```
import javax.swing.*;
import java.awt.*;

public class MainScreen extends JFrame{

    public static CardLayout cardLayout = new CardLayout();//set a new cardlayout

    // *** JPanel to hold the "cards" and to use the CardLayout:
    static JPanel cardContainer = new JPanel(cardLayout);//some variable for the cardlayout
    public static JComboBox cardCombo = new JComboBox();//some variable for the cardlayout
    public static JPanel comboPanel = new JPanel();;//some variable for the cardlayout
    Image background = Toolkit.getDefaultToolkit().createImage("data/images/title.png");//loads the background image

    public MainScreen() {

        JFrame frame = new JFrame();
        frame.setTitle("Project");//Title of the screen
        frame.setSize(800,600);//Size of the window
        frame.setResizable(false);//Is the window resizable?
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//Exit the frame when the default red cross is clicked
        frame.setVisible(true);//is the frame visible?
        frame.getContentPane().add(cardContainer, BorderLayout.CENTER);//add the cardcontainer to flip panels
        frame.setLocationRelativeTo(null);
    }

    public static void debug(){//makes an extra card, this is a debug card and is not used for anything but debugging

        JPanel debugPanel = new JPanel(new BorderLayout());//Debug panel, not used for anything, script does not work if not here
        debugPanel.setBackground(Color.BLACK);//set the background color to black
        String debug = "Debug Panel";//name the card or something like that
        cardContainer.add(debugPanel, debug);//add the card to the panel
        cardCombo.addItem(debug);//add the item??

        JPanel titlePanel = new JPanel(new BorderLayout());//Debug panel, not used for anything, script does not work if not here
        titlePanel.setBackground(Color.BLACK);//set the background color to black
        String title = "Title Panel";//name the card or something like that
        cardContainer.add(titlePanel, title);//add the card to the panel
        cardCombo.addItem(title);//add the item??

        cardLayout.show(cardContainer, title);//choose what card to show. For this instance show the mainmenu
    }

    public static void main(String[] args){//this runs when the script opens

        new MainScreen();//run the main screen class, that loads the window and card layout
        debug();//run the next class that initializes the mainmenu
    }

    //Here the i try to paint the image. No error messages show.
    public void paintComponent(Graphics g){//<-------------HERE
        g.drawImage(background, 0, 0, null);//<-------------HERE
        repaint();//<-------------HERE
    }
} 
```

对于图片：http: [//i.stack.imgur.com/F3nHF.png](http://i.stack.imgur.com/F3nHF.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T12:29:02.867

好吧，您的代码中有很多问题...

**首先**-看@您的 MainScreen 类-“MainScreen extends JFrame”-您不将其用作主框架。您可以在其构造函数中创建新的单独 JFrame：

```
public MainScreen() {

    JFrame frame = new JFrame();
    frame.setTitle("Project");//Title of the screen
    frame.setSize(800,600);//Size of the window
    frame.setResizable(false);//Is the window resizable?
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//Exit the frame when the default red cross is clicked
    frame.setVisible(true);//is the frame visible?
    frame.getContentPane().add(cardContainer, BorderLayout.CENTER);//add the cardcontainer to flip panels
    frame.setLocationRelativeTo(null);
} 
```

改为这样做：

```
public MainScreen ()
{
    super();
    setTitle ( "Project" );//Title of the screen
    setSize ( 800, 600 );//Size of the window
    setResizable ( false );//Is the window resizable?
    setDefaultCloseOperation (
            JFrame.EXIT_ON_CLOSE );//Exit the frame when the default red cross is clicked
    setVisible ( true );//is the frame visible?
    getContentPane ()
            .add ( cardContainer, BorderLayout.CENTER );//add the cardcontainer to flip panels
    setLocationRelativeTo ( null );
    repaint (  );
} 
```

如果您覆盖它，您的“paint()”方法（不是paintComponent()）将起作用。

**下一个问题**- 永远不要在 paint* 方法中使用 repaint() 方法......永远不要！它可能会导致接口死锁/卡住。如果您需要调用 repaint - 请在绘制方法之外执行此操作。

我在谈论那部分代码：

```
//Here the i try to paint the image. No error messages show.
public void paintComponent(Graphics g){//<-------------HERE
    g.drawImage(background, 0, 0, null);//<-------------HERE
    repaint();//<-------------HERE
} 
```

只需在绘画方法中绘制您需要的任何内容，而不是更多。所有重绘逻辑都应该移到它们之外。想想看 - 你正在从油漆中调用重绘方法 - 这将导致再次绘画而不是再次重绘等

**还有一个**- 你的“paintComponent”方法不会在 JFrame 上工作，因为 JFrame 不扩展 JComponent。所以这个方法根本没有用。有一种绘画方法，但你也不应该使用它。要设置背景图像 - 使用一些框架范围的面板并在其上绘制背景。之后，您可以将任何内容放在该面板上（请看最后的示例）。

**还有更多**——你在 cardContainer 上有黑色背景的 debugPanel——它会隐藏你在容器或框架上绘制的任何东西（我再说一遍——不要在框架本身上绘画，这是一个坏习惯）。因此，您必须通过将 opaque (setOpaque) 设置为 false 来禁用位于背景上的组件中的任何背景。您可以将 cardContainer 背景设置为 BLACK 并在其上绘制图像。

**最后一个**- 确保“data/images/title.png”路径是相对于您的应用程序工作目录的。我总是使用另一种加载图像的方式：

```
Toolkit.getDefaultToolkit ()
        .createImage ( MainScreen.class.getResource ( "some/path/image.png" ) ); 
```

此代码将加载相对于包内的类位置放置的图像。这样您就可以在最终的应用程序 jar 中拥有任何图像而不会出现任何问题。但这只是一个建议。

**以及在框架内绘制背景的最终代码：**

```
public class MainScreen extends JFrame
{
    public JPanel comboPanel;
    public JComboBox cardCombo;

    public CardLayout cardLayout;
    public JPanel cardContainer;

    public static ImageIcon background =
            new ImageIcon ( MainScreen.class.getResource ( "icons/title.png" ) );

    public MainScreen ()
    {
        super ();
        setTitle ( "Project" );

        comboPanel = new JPanel ();
        cardCombo = new JComboBox ();

        cardLayout = new CardLayout ();
        cardContainer = new BackgroundPanel ( cardLayout );
        cardContainer.setOpaque ( true );
        cardContainer.setBackground ( Color.BLACK );
        getContentPane ().add ( cardContainer, BorderLayout.CENTER );

        initializeGUI ();

        setSize ( 800, 600 );
        setResizable ( false );
        setLocationRelativeTo ( null );
        setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
        setVisible ( true );
    }

    public void initializeGUI ()
    {
        JPanel debugPanel = new JPanel ( new BorderLayout () );
        debugPanel.setOpaque ( false );
        String debug = "Debug Panel";
        cardContainer.add ( debugPanel, debug );
        cardCombo.addItem ( debug );

        JPanel titlePanel = new JPanel ( new BorderLayout () );
        titlePanel.setOpaque ( false );
        String title = "Title Panel";
        cardContainer.add ( titlePanel, title );
        cardCombo.addItem ( title );

        cardLayout.show ( cardContainer, title );
    }

    private class BackgroundPanel extends JPanel
    {
        public BackgroundPanel ( LayoutManager layout )
        {
            super ( layout );
        }

        protected void paintComponent ( Graphics g )
        {
            super.paintComponent ( g );
            g.drawImage ( background.getImage (), 0, 0, BackgroundPanel.this );
        }
    }

    public static void main ( String[] args )
    {
        new MainScreen ();
    }
} 
```

我还使用 ImageIcon 而不是 Image 来确保在显示框架之前加载图像。否则，您必须手动检查图像加载状态并在加载时更新背景。

PS 不要用注释重载你的代码 - 如果代码足够干净，它们就不需要了:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T15:20:25.443

看看这个，在我看来，你好像画错了。在我看来，您的代码的编写方式非常错误，没有任何意义。每当您覆盖您`paintComponent(...)`的. 此外，您的 CardLayout 的整个实现是任性的，看来您需要再次浏览[CardLayout 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)`JPanel/JComponent``getPreferredSize()``JFrame`

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;
import javax.swing.*;

public class DrawingImage
{
    private void displayGUI()
    {
        JFrame frame = new JFrame("Drawing Image Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        CustomPanel contentPane = new CustomPanel();
        frame.getContentPane().add(contentPane);

        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new DrawingImage().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private BufferedImage background;

    public CustomPanel()
    {
        try
        {
            background = ImageIO.read(new java.net.URL("http://i.stack.imgur.com/F3nHF.png"));
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    @Override       
    public Dimension getPreferredSize()
    {
        return (new Dimension(800, 600));
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawImage(background, 0, 0, this);
    }
} 
```

# hibernate - Hibernate 中的 EhCache 线程

> ID：10879393
> 
> 赞同：1
> 
> 时间：2012-06-04T09:52:28.117
> 
> 标签：hibernate, ehcache

在一个使用 EhCache 只有一个 pojo 的简单独立休眠应用程序中，我看到以下线程：

```
Daemon Thread: net.sf.ehcache.CacheManager
Non Daemon Thread: com.ehcachedemo.pojos.MyPojo 
```

如果有什么东西会产生线程，我想知道。那么，这些线程是什么？我找不到更多关于他们的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T23:10:35.160

通常在 Java 中创建线程时，默认情况下它是非守护线程。* 在 HEcache 中，每个缓存都是一个守护线程。

为什么是线程？？

*   由于年龄，缓存中的条目可能会过期。有一个后台线程正在运行，删除过期元素；如果您尝试访问它们，它们也会被删除。

*   您的应用程序中的每个缓存都将有一个非线程关联，这是因为缓存具有与上述类似的操作（由于年龄而过期）等。

本页向您展示如何[关闭 Ehcache](http://ehcache.org/documentation/operations/shutdown)

* * *

# android - Android+Admob：错误：不允许使用字符串类型（在 'configChanges' 处带有值（等...）

> ID：10879396
> 
> 赞同：4
> 
> 时间：2012-06-04T09:52:36.270
> 
> 标签：android, titanium, admob, appcelerator

**我之前的问题被版主关闭了，所以请阅读：其他线程没有解决问题。我已经阅读并尝试了一切。**

我正在尝试让 AdMob 在我的 Android 应用中运行。我提出了一个新问题，因为我已经遵循了以前线程的建议。

*   我正在使用 Appcelerator Titanium。

*   Android API 在 Titanium 内的运行配置中设置为 4.0.3。

*   我已经设置`<uses-sdk android:maxSdkVersion="15" android:minSdkVersion="15" android:targetSdkVersion="15" />`

*   `<android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>`

*   我已经对我的项目进行了清理

*   我已经设置`target=android-15`了`default.properties``project.properties`

收到此错误：

`[ERROR] /Users/Path/build/android/AndroidManifest.xml:13: error: Error: String types not allowed (at 'configChanges' with value 'keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize').`

我做错了什么/是什么原因造成的？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:19:19.540

我遇到了完全相同的问题，并且能够通过从谷歌下载最新的 Admob SDK 来解决：[https ://developers.google.com/mobile-ads-sdk/download](https://developers.google.com/mobile-ads-sdk/download)

下载后，导航到您的项目文件夹 > 模块 > ti.admob >（版本号）> lib。删除当前的 .jar 文件并将其替换为最新的 admob SDK 中的那个。

# sharepoint-2010 - 根据列表字段项创建 KPI

> ID：10879399
> 
> 赞同：0
> 
> 时间：2012-06-04T09:52:54.653
> 
> 标签：sharepoint-2010

我有一个包含某些字段的列表（例如：销售）。我想根据列表的特定字段为销售列表创建一个 kpi。

例如，我在该列表中有一个名为 value 的字段。如果该值等于 100，我想显示绿色，在 80 到 100 之间，我需要显示黄色和小于 80 的红色。

我无法根据列表字段值创建 kpi，我可以根据列表项总数创建。

我怎样才能做到这一点....

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:06:01.120

据我了解，它是关于如何将列表中的某些值直观地表示为 KPI。

最简单的方法是使用完整的控件，例如它可以是 DevExpress 控件或 Telerik 或任何其他

来自 DevExpress 控件的示例：http: [//demos.devexpress.com/ASPxPivotGridDemos/Templates/CellTemplates.aspx](http://demos.devexpress.com/ASPxGridViewDemos/DataBinding/Live.aspx) [http://demos.devexpress.com/ASPxGridViewDemos/DataBinding/Live.aspx](http://demos.devexpress.com/ASPxPivotGridDemos/Templates/CellTemplates.aspx)

来自 Telerik：

[http://sharepoint.telerik.com/reporting/Pages/default.aspx](http://sharepoint.telerik.com/reporting/Pages/default.aspx)

另一种方法是使用报告引擎生成带有图形和图表的报告。还有许多报告引擎。例如，在谈到 Microsoft 堆栈时，比 MS SQL 服务 + 报告服务，也许还有多维数据集和 MS 分析服务。

所以有关于 KPI、报告服务和 KPI 颜色指示的 MSDN 文章 [http://technet.microsoft.com/en-us/library/dd283116.aspx](http://technet.microsoft.com/en-us/library/dd283116.aspx)

这里没有列出很多方法，甚至使用 Silverlight 构建自定义网格控件。一切都取决于需求。

# asp.net-mvc-3 - RedirectToAction("Index", "User") 被自定义RouteHandler捕获，但RedirectPermanent("/user/index/") 正常运行

> ID：10879401
> 
> 赞同：0
> 
> 时间：2012-06-04T09:53:12.847
> 
> 标签：asp.net-mvc-3

自定义RouteHandler捕获的RedirectToAction("Index", "User")，但是RedirectPermanent("/user/index/")没问题

在一个动作中，这样的代码

```
 public ActionResult AddSimpleDescription(TSimpleDescription entity2, string url, string which)
        {
 //my colds

return RedirectToAction("Index", "User");
} 
```

在全局文件中，我注册了一个自定义 RouteHandler，如下所示

```
public static void RegisterHandler(RouteCollection routes)
        {

            routes.Add("upload_file",
            new Route("upfile/bkup/nsksjskjs/", new HHT.Utility.Components.CompressRoutHandler()));

        } 
```

当 mycode 在操作 AddSimpleDescription 中运行完成时，然后执行 RedirectToAction("Index", "User") 并且页面转到 url "http://localhost:59000/upfile/bkup/nsksjskjs?action=Index&controller=User" 为什么？我该如何解决这个问题？

索引操作代码

public ActionResult Index(string param, string id) { try { getUserName();

```
 //ViewBag.RCount = remindbll.GetCount(int.Parse(User.Identity.Name));
            return View();
        }
        catch (Exception ex)
        {
            return Render(3, ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:57:08.073

好的，这是因为您正在使用自定义路由，我不知道“upload_file”是否是您的唯一路由......但是当您使用自定义路由时必须指定您要使用的路由，否则它将使用默认路由

您有以下注册路线...

```
public static void RegisterHandler(RouteCollection routes)
    {

        routes.Add("default_route", new Route("{controller}/{action}/{id}", new {controller = "controller", action = "action", id = UrlParameter.optional})

        routes.Add("upload_file",
        new Route("upfile/bkup/nsksjskjs/", new HHT.Utility.Components.CompressRoutHandler()));

    } 
```

所以你必须告诉应该使用哪条路线

```
return RedirectToRoute("default_route"); 
```

# javascript - Android：调用 JavaScript 函数的问题

> ID：10879402
> 
> 赞同：1
> 
> 时间：2012-06-04T09:53:15.497
> 
> 标签：javascript, android, html, webview

JavaScript 函数

```
 <!DOCTYPE html>
   <html>
   <head>
  <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width; user-scalable=0;" />
    <title>My HTML</title>
   </head>
     <body>
        <h1>MyHTML</h1>
       <p id="mytext">Hello!</p>

        function callFromActivity(msg){
           alert("Hello! I am an alert box!");
          document.getElementById("mytext").innerHTML = msg;
       }

   </script>

  </body>
  </html> 
```

安卓代码

```
myWebView.loadUrl("file:///android_asset/mypage.html");
String msgToSend = "message";
myWebView.loadUrl("javascript:callFromActivity(\"" + msgToSend
            + "\")"); 
```

on Button Clicked 事件 java 脚本函数调用正确。但我无法在不单击按钮的情况下调用 java 脚本函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:55:11.570

您的 javascript 格式错误。你应该把它放在这样的标签中

```
<script type="text/javascript">
    //your JS
</script> 
```

所以，你的代码看起来像这样

```
 <script type="text/javascript">
 function callFromActivity(msg){
    alert("Hello! I am an alert box!");
   document.getElementById("mytext").innerHTML = msg;
 }
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:30:24.880

试试这个 ，

```
 String msgToSend = "message";
     String js = "msg = "+msgToSend+";"
                 +"function callFromActivity(msg){"
                 +"alert('Hello! I am an alert box!');"
                 +"document.getElementById('mytext').innerHTML = msg;";

      view.loadUrl("javascript:(function(){" + js + "})()"); 
```

# selenium - 重新运行失败的 Selenium Nunit 测试

> ID：10879405
> 
> 赞同：4
> 
> 时间：2012-06-04T09:53:31.747
> 
> 标签：selenium, nunit

在我们的测试环境中，有些测试在某些情况下会不规律地失败。

所以我的问题是，可以做些什么来重新运行失败的 Nunit 测试。

我的想法是在 Nunit TearDown 中实施一些步骤以重新运行失败的测试，如下所示

```
[TearDown] 
public void TearDownTest() 
{ 
  TestStatus state = TestContext.Status; 
  if (state == TestStatus.Failed) 
  { 

  // if so, is it possible to rerun the test  ??

  } 

} 
```

我的要求是 - 如果第一次和第二次失败，我想尝试至少运行三次失败的测试

任何人都可以建议您对此的想法

提前致谢

阿尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:14:44.250

而不是使用拆解，我宁愿使用 xml 报告，使用一些 xslt 来找出失败的夹具并将它们重新提供给运行测试的构建步骤。

# android - 从 android 发送电子邮件时的密码安全性

> ID：10879408
> 
> 赞同：1
> 
> 时间：2012-06-04T09:53:37.540
> 
> 标签：android, email

[通过这项](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)技术从 android 发送电子邮件没有问题。但是有一件事：密码的安全性。我假设我们可以以某种方式加密应用程序内部的密码以使逆向工程更加困难，但最好的方法是什么？如何保证邮箱的安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:56:13.157

Gmail 服务器[支持 SMTP 和 IMAP 的 OAuth](https://developers.google.com/google-apps/gmail/oauth_overview)身份验证，因此您应该能够使用令牌进行身份验证，而无需实际密码：[https ://developers.google.com/google-apps/gmail/oauth_overview](https://developers.google.com/google-apps/gmail/oauth_overview)

如果您尝试以应用程序用户以外的其他人身份发送电子邮件，则必须混淆应用程序中嵌入的密码。另一个想法是使用某种 HTTP 电子邮件网关，您可以使用他们的 Google 帐户对用户进行身份验证，但使用您自己的服务帐户发送邮件。

# exchange-server - EWS 调用能否在不减慢速度的情况下并行进行？

> ID：10879409
> 
> 赞同：0
> 
> 时间：2012-06-04T09:53:38.207
> 
> 标签：exchange-server, exchangewebservices, throttling, policies

我想从 Exchange 服务器（2010 通过 EWS API）检索信息。具体来说，我想构建一个 Windows 服务来遍历所有交换用户并使用非个性化索引他们的私人邮箱。效果很好，但是当我一个接一个地执行此操作时（取决于邮箱量和用户数量），它的速度非常慢。索引速度现在约为每分钟 500 个项目。

在我的测试系统上，以下调用大约需要 250 毫秒：

```
PropertySet myPropertySet = new PropertySet(BasePropertySet.FirstClassProperties,    ItemSchema.ParentFolderId);
myPropertySet.RequestedBodyType = BodyType.Text;
myPropertySet.Add(entryIdExtendedProperty);
Item item = Item.Bind(es, itemKey, myPropertySet); 
```

所以我的想法是做一个并行化。到目前为止，我尝试了 3 种方法：

1.  后台工作线程：每个用户一个工作线程。结果：没有效果。似乎这样做会减慢通话速度。总之，整体速度保持不变。

2.  单独的 EXE 进程：每个用户一个 EXE。我创建了一个“Worker”-Exe 并以用户为参数调用它们：IndexWorker.exe -user1
    结果：相同的结果！每个exe的调用都变慢了！

3.  单独的 Windows 服务：每个用户一项服务。结果：突然，请求并没有变慢，这意味着我可以将整体速度提高到每分钟 500 个项目的倍数（我最多尝试 3 个进程，即每分钟 1500 个项目）。不错，但我让我一个人回答这个问题：

为什么 EWS 呼叫在 1) 和 2) 中变慢，但在 3) 中没有？线程对我来说是最优雅的方式，我可以使用任何选项或设置吗？

我阅读了一些关于节流策略和 EWSFindCountLimit 的内容。这是正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:24:28.007

您的问题是限制策略。您需要为不限制 EWS 或 RPC 活动的服务帐户创建限制策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:24:11.173

您是否了解为什么单独的服务可以使您的性能如此提升？限制是在服务帐户级别应用的，因此您从哪里拨打电话应该无关紧要。

# objective-c - Objective-C 方法引用

> ID：10879410
> 
> 赞同：2
> 
> 时间：2012-06-04T09:53:40.770
> 
> 标签：objective-c, documentation, selector, method-names

我知道如何在 Objective-C 中编写选择器名称`mergeThis:withThat:`，但有人可以告诉我，我如何引用（例如在文档、文本或提交消息中）一个方法属于一个类并且是实例方法或类方法?

在 Ruby 中，我会`String#reverse`为实例方法或`File::exists?(file_name)`类方法编写。看到[这个问题](https://stackoverflow.com/questions/736120/why-are-methods-in-ruby-documentation-preceded-by-a-hash-sign)。

在 Objective-C 中是否有标准化的方式或约定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:57:20.177

在 Objective-C 中，你会为实例方法编写类似的东西：

```
-[MyClass myMethodWithArg:andAnotherArg:] 
```

这对于类方法：

```
+[MyClass staticMethodWithArg:andAnotherArg:] 
```

**更新评论**

我正在使用提供这种输出`NSLog`的`__PRETTY_FUNCTION__`输出格式（根据[Zarra Studio 的编码指南](http://www.cimgf.com/zds-code-style-guide/)）。Apple 的文档提供了以下格式，但它依赖于类上下文：

![在此处输入图像描述](../Images/1537b9119c1f7f52cf137acb314f1717.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:56:59.660

当您在类的 .h 中声明方法时，您会在每个方法前面给出一个符号。

`-`负号表示它是一个实例方法

`+`正号表示它是一个类方法

你可以调用这样的类方法......

```
[ClassName yourMethod]; 
```

编辑：

我不确定你在问什么，因为我对 Ruby 一无所知，但我认为这个答案应该对你有所帮助（我猜你正在寻找一个类是否包含某种方法）[https://stackoverflow.com/a/1135522/919545](https://stackoverflow.com/a/1135522/919545)

# c# - 块的 Monotouch 绑定语法

> ID：10879411
> 
> 赞同：4
> 
> 时间：2012-06-04T09:53:44.820
> 
> 标签：c#, binding, xamarin.ios, objective-c-blocks

再会，

我正在尝试在 Monotouch 中为此添加绑定：

```
- (void)capturePhotoAsImageProcessedUpToFilter:(GPUImageOutput<GPUImageInput> *)finalFilterInChain withCompletionHandler:(void (^)(UIImage *processedImage, NSError *error))block; 
```

我已经走到这一步了：

```
[BaseType (typeof(GPUImageVideoCamera))]
interface GPUImageStillCamera{
    delegate void [**What should i put here?**](NSData processedJpeg, NSError error);

    [Export ("capturePhotoAsJPEGProcessedUpToFilter:")]
    void CapturePhotoAsJPEGProcessedUpToFilter(GPUImageOutput finalFilterInChain);
} 
```

我已经阅读了作者放置 NSSetEnumerator 的文档，但我无法理解他/她从哪里得到它。

请帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T02:09:15.773

你用这个：

```
 delegate void CaptureCallback (UIImage processedImage, NSError);

  [BaseType (typeof (GPUImageVideoCamera))]
  interface GPUImageStillCamera {
       [Export ("capturePhotoAsJPEGProcessedUpToFilter:withCompletionHandler:")]
       void CapturePhotoAsJpeg (GPUImageoutput finalFilter, 
                                CaptureCallback completionCallback);
  } 
```

# ios - 使用缓存异步加载本地 UIImage

> ID：10879412
> 
> 赞同：1
> 
> 时间：2012-06-04T09:53:45.117
> 
> 标签：ios, xcode, caching, asynchronous, uiimage

UIScrollViewController

|-----UIImageView1, 2, 3, 4, 5...

我有一个`UIScrollViewController`有几个子视图。每个子视图都包含一个`UIImageview`，当滚动时`UIImageView`，当前页面两侧的页面将使用

```
imageView = [[UIImageView alloc] initWithContentsOfFile:fileName]; 
```

但是当本地图像文件变得非常大（> 2MB）时，滚动变得非常流畅，并且卡住了。

有没有办法避免这种情况？例如使用缓存还是异步执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:11:38.813

您可以在另一个线程中异步加载图像，或者如果您仅支持高于 4 的 iOS，则使用块执行它非常容易。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, NULL), ^{
    UIImageView* imageView = [[[UIImageView alloc] initWithContentsOfFile:fileName]autorelease];       
    dispatch_async(dispatch_get_main_queue(), ^{
        //Maybe correct the frame too
        [self.view addSubview:imageView];
    });
}); 
```

如果你不能使用块，你可以在不同的线程中执行，但它有点复杂。

无论如何，我建议：

*   最好使用“虚拟”或“微调器”创建添加到滚动视图的 UIImageView，然后当用户交互停止（通过委托方法检测）时，您可以重新加载可见的图像视图。

*   当用户滚动时，最好为您想要的图像加载和缓存 UIImage 对象（例如将它们存储在数组或字典中）。

*   缩放 UIImage 内容以适合 ScrollView 内的 UIImageView 框架。这样，在渲染期间， UIImage 不会“自动缩放”提供的图像，因此它会更快。

# jquery - Javascript：如何通过 id 获取元素？

> ID：10879413
> 
> 赞同：0
> 
> 时间：2012-06-04T09:53:47.847
> 
> 标签：jquery, parent

我需要从它的 id 中获取一个元素，类似于以下内容：

```
 $(this).parent().hasId('foo') 
```

如何使用 jQuery 完成此任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:55:37.807

`$("#idofelemnt")`- 起诉将解决问题的 id 选择器...

```
if($("#idofelemnt").length == 0)
 alert('element not exists');
else 
 alert('element exists'); 
```

或者在你的情况下

```
 $(this).parent("#idofelemnt").length 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T10:01:04.900

**JS**

```
document.getElementById('ID').parentNode.id 
```

**jQuery**

```
$('#ID').parent().attr('id'); 
```

见这里：[JSFiddle](http://jsfiddle.net/B5phB/2/)

**编辑**：

不知道你问的是..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:56:34.147

您可以在中获取父 Div 的 ID

**Javascript**为：

```
this.parentNode.id 
```

和**jQuery**：

```
 $(this).parent("#foo") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:58:44.450

我希望你想从他的 id 中获取元素对象。只需`$('#elementId')`用于获取该元素对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T09:58:45.190

像这样的东西？

```
if($(this).parent().attr("id")=='foo'){
    //do your stuff;
} 
```

# c - Using of shared variable by 10 pthreads

> ID：10879420
> 
> 赞同：5
> 
> 时间：2012-06-04T09:54:18.400
> 
> 标签：c, linux, pthreads, mutex

The problem is in following:

I want to write a short program that creates 10 threads and each prints a tread "id" that is passed to thread function by pointer.

Full code of the program is below:

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

struct params {
        pthread_mutex_t mutex;
        int id;
};

typedef struct params params_t;

void* hello(void* arg){
    int id;
    pthread_mutex_lock(&(*(params_t*)(arg)).mutex);
    id = (*(params_t*)(arg)).id;
    pthread_mutex_unlock(&(*(params_t*)(arg)).mutex);
    printf("Hello from %d\n", id);
}

int main() {
    pthread_t threads[10];
    params_t params;
    pthread_mutex_init (&params.mutex , NULL);

    int i;
    for(i = 0; i < 10; i++) {
            params.id = i;
            if(pthread_create(&threads[i], NULL, hello, &params));
    }

    for(i = 0; i < 10; i++) {
            pthread_join(threads[i], NULL);
    }

    return 0;
} 
```

The supposed output is (not necessary in this order):

```
Hello from 0
....
Hello from 9 
```

Actual result is:

```
Hello from 2
Hello from 3
Hello from 3
Hello from 4
Hello from 5
Hello from 6
Hello from 8
Hello from 9
Hello from 9
Hello from 9 
```

I tried to place mutex in different places in `hello()` function, but it didn't help.

How should I implement thread sync?

**EDIT:** Supposed result is not necessary 0...9 it can be any combination of these numbers, but each one should appear only one time.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T10:00:15.393

The problem lies in the below code:

```
for(i = 0; i < 10; i++) 
{             
  params.id = i;             
 if(pthread_create(&threads[i], NULL, hello, &params));     
} 
```

Your params.id value keeps getting updated in the main thread, whereas you are passing the same pointer to all the threads.

Please create seperate memory for params by dynamically allocating it and pass it to different threads to solve the problem.

**EDIT1:** Your usage of mutex to protect is also an incorrect idea. Though your mutex if used in main while setting the id also, may make the updation mutually exclusive, but you may not get your desired output. Instead of getting values from 0 .. 9 in different threads, you may get all 9s or still multiple threads may print same values.

So, using thread synchronization is not such a good idea for the output which you are expecting. If you still need to use one param variable between all threads and get output as 0 to 9 from each of the threads, better move the pthread_join into the first loop. This will ensure that each thread gets created, prints the value and then returns before the main spawns the next thread. In this case, you don't need the mutex also.

**EDIT2:** As for the updated question, where it is asked that it is not necessary to print the numbers 0..9 in a sequence, the printing can be random, but only once, the problem still remains the same more or less.

Now, let's say, the value of params.id is first 0 and thread 0 got created, now, thread 0 must print it before it is updated in the main thread, else, when thread 0 accessess it, the value of params.id would have become 1 and you will never get your unique set of values. So, how to ensure that thread 0 prints it before it is updated in main, Two ways for it:

*   Ensure thread 0 completes execution and printing before main updates the value
*   Use condition variables & signalling to ensure that main thread waits for thread 0 to complete printing before it updates the value (Refer to Arjun's answer below for more details)

In my honest opinion, you have selected the wrong problem for learning synchronization & shared memory. You can try this with some good problems like "Producer-Consumer", where you really need synchronization for things to work.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T10:17:55.417

There are two problems:

A. You're using a `lock` but `main` is unaware of this lock.

B. A `lock` is not enough in this case. What you would want is for threads to cooperate by signalling each other (because you want `main` to *not* increment the variable until a thread says that it is done printing it). You can use a `pthread_cond_t` to achieve this ([Look here](http://www.cs.nmsu.edu/~jcook/Tools/pthreads/pthread_cond.html) to learn more about this). This boils down to the following code (basically, I added an appropriate usage of `pthread_cond_t` to your code, and a bunch of comments explaining what is going on):

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

struct params {
        pthread_mutex_t mutex;
        pthread_cond_t done;
        int id;
};

typedef struct params params_t;

void* hello(void* arg){

    int id;
    /* Lock.  */
    pthread_mutex_lock(&(*(params_t*)(arg)).mutex);

    /* Work.  */
    id = (*(params_t*)(arg)).id;
    printf("Hello from %d\n", id);

    /* Unlock and signal completion.  */
    pthread_mutex_unlock(&(*(params_t*)(arg)).mutex);
    pthread_cond_signal (&(*(params_t*)(arg)).done);

    /* After signalling `main`, the thread could actually
    go on to do more work in parallel.  */
}

int main() {

    pthread_t threads[10];
    params_t params;
    pthread_mutex_init (&params.mutex , NULL);
    pthread_cond_init (&params.done, NULL);

    /* Obtain a lock on the parameter.  */
    pthread_mutex_lock (&params.mutex);

    int i;
    for(i = 0; i < 10; i++) {

            /* Change the parameter (I own it).  */    
            params.id = i;

            /* Spawn a thread.  */
            pthread_create(&threads[i], NULL, hello, &params);

            /* Give up the lock, wait till thread is 'done',
            then reacquire the lock.  */
            pthread_cond_wait (&params.done, &params.mutex);
    }

    for(i = 0; i < 10; i++) {
            pthread_join(threads[i], NULL);
    }

    /* Destroy all synchronization primitives.  */    
    pthread_mutex_destroy (&params.mutex);
    pthread_cond_destroy (&params.done);

    return 0;
} 
```

I see that the example you are trying is a toy program to probably learn about the POSIX thread library. In the real world, as we all know this can be done much faster without even using threads. But you already know this.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T09:58:32.217

The problem is that you are modifying the params.id "unprotected" in main. This modification in main also needs to be mutex protected. You could protect this access by localizing this by creating getId() and setId() functions that would lock the mutex and protect access to the id, as follows. This will most likely still give the problem reported, since depending on when the thread calls getData() it will have one value or another. So to solve this, you could add an incrementId() function and call it from the hello() function.

```
struct params {
        pthread_mutex_t mutex;
        int id;
};

typedef struct params params_t;

int getId(params_t *p)
{
    int id;
    pthread_mutex_lock(&(p->mutex));
    id = p->id;
    pthread_mutex_unlock(&(p->mutex));

    return id;

}

void setId(params_t *p, int val)
{
    pthread_mutex_lock(&(p->mutex));
    p->id = val;
    pthread_mutex_unlock(&(p->mutex));
}

void incrementId(params_t *p)
{
    pthread_mutex_lock(&(p->mutex));
    p->id++;
    pthread_mutex_unlock(&(p->mutex));
}

void* hello(void* arg){
    params_t *p = (params_t*)(arg);
    incrementId(p);
    int id = getId(p);

    // This could possibly be quite messy since it
    // could print the data for multiple threads at once
    printf("Hello from %d\n", id);
}

int main() {
    pthread_t threads[10];
    params_t params;
    params.id = 0;
    pthread_mutex_init (&params.mutex , NULL);

    int i;
    for(i = 0; i < 10; i++) {
            if(pthread_create(&threads[i], NULL, hello, &params));
    }

    for(i = 0; i < 10; i++) {
            pthread_join(threads[i], NULL);
    }

    return 0;
} 
```

A better way to get a unique thread id would be to define the hello method as follows:

```
void* hello(void* arg){
    pthread_t threadId = pthread_self();
    printf("Hello from %d\n", threadId);
} 
```

And to avoid the problem with all threads trying to print at once, you could do the following:

```
void* hello(void* arg){
    params_t *p = (params_t*)(arg);
    pthread_mutex_lock(&(p->mutex));

    p->id++;
    int id = p->id;
    printf("Hello from %d\n", id);

    pthread_mutex_unlock(&(p->mutex));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T10:50:37.477

Easiest way to get the desired output would be to modify your `main` function as follows:

```
int main() {
    pthread_t threads[10];
    params_t params;
    pthread_mutex_init (&params.mutex , NULL);

    int i;
    for(i = 0; i < 10; i++) {
            params.id = i;
            if(pthread_create(&threads[i], NULL, hello, &params));
            pthread_join(threads[i], NULL); //wait for thread to finish
    }

    /*for(i = 0; i < 10; i++) {
            pthread_join(threads[i], NULL);
    }*/

    return 0;
} 
```

Output would be:

```
Hello from 0
...
Hello from 9 
```

EDIT: Here's the synchronization for the corrected question:

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

struct params {
    pthread_mutex_t* mutex;
    int id;
};

typedef struct params params_t;

void* hello(void* arg){
    int id = 0;
    params_t* params = (params_t*)arg;
    if(params != 0)
    {
        id = params->id;
        delete params;
        params = 0;
    }
    printf("Hello from %d\n", id);
}

int main() {
    pthread_t threads[10];
    params_t* params = 0;
    pthread_mutex_t main_mutex;
    pthread_mutex_init (&main_mutex , NULL);

    int i;
    for(i = 0; i < 10; i++) {
        params = new params_t(); //create copy of the id to pass to each thread -> each thread will have it's own copy of the id
        params->id = i;
        params->mutex = &main_mutex;
        if(pthread_create(&threads[i], NULL, hello, params));
    }

    for(i = 0; i < 10; i++) {
        pthread_join(threads[i], NULL);
    }

    return 0;
} 
```

Each thread must have it's own copy of the id so that the other threads do not modify the id before it is printed.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-06T01:35:12.707

I'm just putting this one here to provide another solution to this problem - this one does not involve mutexes - no synchronization - no conditionals, etc. The main dfference is that we are using `pthread_detach` to automatically release the thread's resources upon completion.

```
#include <pthread.h> 
#include <stdio.h>
#include <stdlib.h>   
#include <unistd.h> 

#define NUMTHREADS 10        

typedef struct params {    
    int id;     
} params_t;                                                                     

void* hello(void *arg)  
{ 
    params_t *p = (params_t*)arg;     
    int status; 
    status = pthread_detach(pthread_self());      
    if (status !=0 )     
    {       
        printf("detaching thread\n");     
        abort();      
     }                                                                           

     printf("Hello from %d\n", p->id);   
     free(p);    
     return NULL;  
 }                     

int main()   
{ 
    pthread_t thread;    
    params_t *par;     
    int i, status;                                                              
    for (i=0; i<NUMTHREADS; i++)    
    {     
        par = (params_t*)malloc(sizeof(params_t));       
        if (par == NULL)    
        {       
            printf("allocating params_t");   
            abort();     
         }                                                                       

        par->id = i;  
        status = pthread_create(&thread, NULL, hello, par);   
        if (status != 0)    
            exit(1);     
    }      
    /* DO some more work ...*/                                                       
    sleep(3);                                                                         
    exit(0);  
} 
```

# c# - CQRS 架构中的域验证

> ID：10879421
> 
> 赞同：49
> 
> 时间：2012-06-04T09:54:20.210
> 
> 标签：c#, validation, architecture, domain-driven-design, cqrs

*危险......危险史密斯博士......前面的哲学帖子*

这篇文章的目的是确定将验证逻辑放在我的域实体之外（实际上是聚合根）是否实际上赋予了我更多的灵活性，或者它是*神风敢死队代码*

基本上我想知道是否有更好的方法来验证我的域实体。这就是我打算这样做的方式，但我想听听你的意见

我考虑的第一种方法是：

```
class Customer : EntityBase<Customer>
{
   public void ChangeEmail(string email)
   {
      if(string.IsNullOrWhitespace(email))   throw new DomainException(“...”);
      if(!email.IsEmail())  throw new DomainException();
      if(email.Contains(“@mailinator.com”))  throw new DomainException();
   }
} 
```

我实际上不喜欢这种验证，因为即使我将验证逻辑封装在正确的实体中，这也违反了 Open/Close 原则（Open for extension but Close for modify），我发现违反这个原则，代码维护就变成了当应用程序变得复杂时，这是一个真正的痛苦。为什么？因为域规则的变化比我们想承认的要频繁，如果规则被**隐藏并嵌入**到这样的实体中，它们很难测试、难以阅读、难以维护，但我不喜欢这样的真正原因方法是：如果验证规则发生变化，我必须来编辑我的域实体。这是一个非常简单的例子，但在 RL 中，验证可能更复杂

所以遵循 Udi Dahan 的哲学，**明确角色**，以及蓝皮书中 Eric Evans 的建议，接下来的尝试是实现规范模式，像这样

```
class EmailDomainIsAllowedSpecification : IDomainSpecification<Customer>
{
   private INotAllowedEmailDomainsResolver invalidEmailDomainsResolver;
   public bool IsSatisfiedBy(Customer customer)
   {
      return !this.invalidEmailDomainsResolver.GetInvalidEmailDomains().Contains(customer.Email);
   }
} 
```

但后来我意识到，为了遵循这种方法，我必须首先改变我的实体以传递*被验证的值*，在这种情况下是电子邮件，但改变它们会导致我的域事件被触发，我不想这样做在新电子邮件有效之前发生

**所以在考虑了这些方法之后，我提出了这个，因为我要实现一个 CQRS 架构：**

```
class EmailDomainIsAllowedValidator : IDomainInvariantValidator<Customer, ChangeEmailCommand>
{
   public void IsValid(Customer entity, ChangeEmailCommand command)
   {
      if(!command.Email.HasValidDomain())  throw new DomainException(“...”);
   }
} 
```

这就是主要思想，实体被传递给验证器，以防我们需要来自实体的一些值来执行验证，命令包含来自用户的数据，并且由于验证器被认为是**可注入**对象，它们可以注入外部依赖项如果验证需要它。

**现在的困境**，我对这样的设计很满意，因为我的验证被封装在单个对象中，这带来了许多优点：易于单元测试，易于维护，域不变量使用通用语言显式表达，易于扩展，验证逻辑是集中式和验证器可以一起使用来执行复杂的域规则。即使我知道我正在将我的实体的验证放在它们之外（你可能会争论代码味道 - 贫血域），但我认为权衡是可以接受的

但是有一件事我还没有弄清楚如何以一种干净的方式实现它。*我应该如何使用这些组件...*

由于它们将被注入，它们不会自然地适合我的域实体，所以基本上我看到了两个选项：

1.  将验证器传递给我的实体的每个方法

2.  在外部验证我的对象（从命令处理程序）

我对选项 1 不满意，所以我将解释如何使用选项 2

```
class ChangeEmailCommandHandler : ICommandHandler<ChangeEmailCommand>
{
   // here I would get the validators required for this command injected
   private IEnumerable<IDomainInvariantValidator> validators;
   public void Execute(ChangeEmailCommand command)
   {
      using (var t = this.unitOfWork.BeginTransaction())
      {
         var customer = this.unitOfWork.Get<Customer>(command.CustomerId);
         // here I would validate them, something like this
         this.validators.ForEach(x =. x.IsValid(customer, command));
         // here I know the command is valid
         // the call to ChangeEmail will fire domain events as needed
         customer.ChangeEmail(command.Email);
         t.Commit();
      }
   }
} 
```

好吧，就是这样。你能告诉我你对此的看法或分享你在域实体验证方面的经验吗

**编辑**

我认为我的问题并不清楚，但真正的问题是：隐藏域规则对应用程序的未来可维护性有严重影响，并且域规则在应用程序的生命周期中经常发生变化。因此，考虑到这一点来实现它们将使我们能够轻松地扩展它们。现在想象将来实现一个规则引擎，如果规则被封装在领域实体之外，这种改变会更容易实现

我知道将验证放在我的实体之外会破坏封装，正如@jgauffin 在他的回答中提到的那样，但我认为将验证放在单个对象中的好处比仅仅保持实体的封装要大得多。现在我认为封装在传统的 n 层架构中更有意义，因为实体在域层的多个地方使用，但在 CQRS 架构中，当命令到达时，将有一个命令处理程序访问聚合根和对聚合根执行操作只会创建一个完美的窗口来放置验证。

我想对将验证放置在实体中与将其放置在单个对象中的优点进行一个小的比较

*   单个对象中的验证

    *   临。容易写
    *   临。易于测试
    *   临。明确表达了
    *   临。它成为领域设计的一部分，用当前的通用语言表达
    *   临。由于它现在是设计的一部分，因此可以使用 UML 图对其进行建模
    *   临。极易维护
    *   临。使我的实体和验证逻辑松散耦合
    *   临。易于扩展
    *   临。遵循 SRP
    *   临。遵循打开/关闭原则
    *   临。不违反得墨忒耳定律（嗯）？
    *   临。我是集中的
    *   临。它可以重复使用
    *   临。如果需要，可以轻松注入外部依赖项
    *   临。如果使用插件模型，只需删除新程序集即可添加新验证器，而无需重新编译整个应用程序
    *   临。实现规则引擎会更容易
    *   骗局。打破封装
    *   骗局。如果封装是强制性的，我们必须将单个验证器传递给实体（聚合）方法
*   封装在实体内部的验证

    *   临。封装？
    *   临。可重复使用的？

我很想看看你对此的看法

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T13:31:01.233

我同意其他回复中提出的一些概念，但我将它们放在我的代码中。

首先，我同意将值对象用于包含行为的值是封装常见业务规则的好方法，并且电子邮件地址是一个完美的候选者。但是，我倾向于将其限制为恒定且不会经常更改的规则。我确定您正在寻找一种更通用的方法，而电子邮件只是一个示例，因此我不会专注于那个用例。

我的方法的关键是认识到验证在应用程序的不同位置服务于不同的目的。简而言之，仅验证确保当前操作可以执行而不会出现意外/意外结果所需的内容。这就引出了一个问题，应该在哪里进行什么验证？

在您的示例中，我会问自己，域实体是否真的关心电子邮件地址是否符合某些模式和其他规则，或者我们是否只关心调用 ChangeEmail 时“电子邮件”不能为空或空白？如果是后者，那么在 ChangeEmail 方法中只需要一个简单的检查来确保值存在。

在 CQRS 中，所有修改应用程序状态的更改都作为命令发生，并在命令处理程序中实现（如您所示）。我通常会将任何“挂钩”放入业务规则等中，以验证操作可以在命令处理程序中执行。我实际上遵循您将验证器注入命令处理程序的方法，这允许我扩展/替换规则集而不更改处理程序。这些“动态”规则允许我在更改实体状态之前定义业务规则，例如构成有效电子邮件地址的内容 - 进一步确保它不会进入无效状态。但是在这种情况下，“无效”是由业务逻辑定义的，正如您所指出的，它是高度易变的。

在通过 CSLA 排名后，我发现这种更改很难采用，因为它似乎确实打破了封装。但是，我认为，如果您退后一步并询问模型中真正的角色验证是什么，那么封装并没有被破坏。

我发现这些细微差别对于让我在这个主题上保持清醒非常重要。有验证来防止属于方法本身的错误数据（例如，缺少参数、空值、空字符串等），并且有验证来确保执行业务规则。在前者的情况下，如果客户必须有一个电子邮件地址，那么我需要关注以防止我的域对象变为无效的唯一规则是确保已向客户提供了一个电子邮件地址更改电子邮件方法。其他规则是关于值本身有效性的更高级别的关注，实际上对域实体本身的有效性没有影响。

这一直是与其他开发人员进行大量“讨论”的来源，但是当大多数人采取更广泛的观点并调查角色验证真正发挥作用时，他们往往会看到曙光。

最后，还有一个用于 UI 验证的地方（我所说的 UI 是指作为应用程序接口的任何东西，无论是屏幕、服务端点还是其他任何东西）。我发现在 UI 中复制一些逻辑来为用户提供更好的交互性是完全合理的。但正是因为这种验证服务于单一目的，所以我允许这样的重复。但是，使用注入的验证器/规范对象可以以这种方式促进重用，而不会在多个位置定义这些规则的负面影响。

不确定这是否有帮助...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-06T06:08:37.573

我不建议将大量代码放入您的域中进行验证。我们消除了大部分尴尬的验证，将它们视为我们领域中缺失概念的味道。在您编写的示例代码中，我看到了对电子邮件地址的验证。客户与电子邮件验证没有任何关系。

为什么不在构造时进行`ValueObject`此`Email`验证？

我的经验是，尴尬的验证是对您领域中遗漏概念的暗示。您可以在 Validator 对象中捕获它们，但我更喜欢值对象，因为您将相关概念作为域的一部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-12T15:05:28.943

我正处于一个项目的开始阶段，我将在我的域实体之外实现我的验证。我的域实体将包含保护任何不变量的逻辑（例如缺少参数、空值、空字符串、集合等）。但实际的业务规则将存在于验证器类中。我是@SonOfPirate 的心态......

我正在使用[FluentValidation](http://fluentvalidation.codeplex.com/)，它本质上会给我一堆作用于我的域实体的验证器：也就是规范模式。此外，根据 Eric 的蓝皮书中描述的模式，我可以使用执行验证所需的任何数据（来自数据库或其他存储库或服务）构建验证器。我也可以选择在这里注入任何依赖项。我还可以编写和重用这些验证器（例如，地址验证器可以在员工验证器和公司验证器中重用）。我有一个充当“服务定位器”的验证器工厂：

```
public class ParticipantService : IParticipantService
{
    public void Save(Participant participant)
    {
        IValidator<Participant> validator = _validatorFactory.GetValidator<Participant>();
        var results = validator.Validate(participant);
            //if the participant is valid, register the participant with the unit of work
            if (results.IsValid)
            {
                if (participant.IsNew)
                {
                    _unitOfWork.RegisterNew<Participant>(participant);
                }
                else if (participant.HasChanged)
                {
                    _unitOfWork.RegisterDirty<Participant>(participant);
                }
            }
            else
            {
                _unitOfWork.RollBack();
                //do some thing here to indicate the errors:generate an exception (or fault) that contains the validation errors. Or return the results
            }
    }

} 
```

验证器将包含代码，如下所示：

```
 public class ParticipantValidator : AbstractValidator<Participant>
    {
        public ParticipantValidator(DateTime today, int ageLimit, List<string> validCompanyCodes, /*any other stuff you need*/)
        {...}

    public void BuildRules()
    {
             RuleFor(participant => participant.DateOfBirth)
                    .NotNull()
                    .LessThan(m_today.AddYears(m_ageLimit*-1))
                    .WithMessage(string.Format("Participant must be older than {0} years of age.", m_ageLimit));

            RuleFor(participant => participant.Address)
                .NotNull()
                .SetValidator(new AddressValidator());

            RuleFor(participant => participant.Email)
                .NotEmpty()
                .EmailAddress();
            ...
}

    } 
```

我们必须支持不止一种类型的演示：网站、winforms 和通过服务批量加载数据。固定所有这些是一组服务，它们以单一且一致的方式公开系统的功能。我们不使用实体框架或 ORM 的原因我不会让您感到厌烦。

这就是我喜欢这种方法的原因：

*   验证器中包含的业务规则是完全可单元测试的。
*   我可以从更简单的规则组成更复杂的规则
*   我可以在我的系统中的多个位置使用验证器（我们支持网站和 Winform，以及公开功能的服务），因此，如果服务中的用例需要与网站不同的用例略有不同的规则，那么我可以处理。
*   所有验证都在一个位置表示，我可以选择如何/在哪里注入和组合它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-06T19:44:10.303

你把验证放在错误的地方。

您应该将 ValueObjects 用于此类事情。观看此演示[http://www.infoq.com/presentations/Value-Objects-Dan-Bergh-Johnsson](http://www.infoq.com/presentations/Value-Objects-Dan-Bergh-Johnsson) 它还将教您有关数据作为重心的知识。

还有一个如何重用数据验证的示例，例如使用静态验证方法 ala Email.IsValid(string)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T10:16:58.233

我不会调用从`EntityBase`我的域模型继承的类，因为它将它耦合到您的持久层。但那只是我的个人意见。

我不会将电子邮件验证逻辑从 移动`Customer`到其他任何东西以遵循打开/关闭原则。对我来说，遵循打开/关闭意味着您具有以下层次结构：

```
public class User
{
    // some basic validation
    public virtual void ChangeEmail(string email);
}

public class Employee : User
{
    // validates internal email
    public override void ChangeEmail(string email);
}

public class Customer : User
{
    // validate external email addresses.
    public override void ChangeEmail(string email);
} 
```

您的建议将控件从域模型移动到任意类，从而破坏了封装。我宁愿重构我的类 ( `Customer`) 以符合新的业务规则，而不是这样做。

使用领域事件来触发系统的其他部分以获得更松耦合的架构，但不要使用命令/事件来违反封装。

**例外**

我刚刚注意到你扔了`DomainException`. 这是通用异常的一种方式。你为什么不使用参数异常或`FormatException`？他们更好地描述了错误。并且不要忘记包含上下文信息，以帮助您防止将来出现异常。

**更新**

将逻辑放在课堂之外是自找麻烦恕我直言。您如何控制使用哪个验证规则？验证时可能会使用一部分代码`SomeVeryOldRule`，而另一部分使用`NewAndVeryStrictRule`. 它可能不是故意的，但是当代码库增长时它可以并且将会发生。

听起来您已经决定忽略 OOP 基础之一（封装）。继续使用通用/外部验证框架，但不要说我没有警告你；）

**更新2**

> 感谢您的耐心和您的回答，这就是我发布这个问题的原因，我觉得一个实体应该有责任保证它处于有效状态（我在以前的项目中已经做到了）但是放置它的好处在单个对象中是巨大的，就像我发布的那样，甚至有一种方法可以使用单个对象并保持封装，但我个人对设计不太满意，但另一方面它也不是不在表中，考虑这个 ChangeEmail(IEnumerable> 验证器, string email) 我没有详细想过imple。尽管

这允许程序员指定任何规则，它可能是也可能不是当前正确的业务规则。开发人员可以写

```
customer.ChangeEmail(new IValidator<Customer>[] { new NonValidatingRule<Customer>() }, "notAnEmail") 
```

它接受一切。`ChangeEmail`并且必须在每个被调用的地方指定规则。

如果要使用规则引擎，请创建单例代理：

```
public class Validator
{
    IValidatorEngine _engine;

    public static void Assign(IValidatorEngine engine)
    {
        _engine = engine;
    }

    public static IValidatorEngine Current { get { return _engine; } }
} 
```

..并从域模型方法中使用它，例如

```
public class Customer
{
    public void ChangeEmail(string email)
    {
        var rules = Validator.GetRulesFor<Customer>("ChangeEmail");
        rules.Validate(email);

        // valid
    }

} 
```

该解决方案的问题在于，由于隐藏了规则依赖关系，它将成为维护的噩梦。除非您测试每个域模型方法和每个方法的每个规则场景，否则您永远无法判断是否所有规则都已指定并有效。

该解决方案更灵活，但恕我直言，实施比重构业务规则已更改的方法需要更多时间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-04T13:42:13.970

我不能说我所做的事情是完美的，因为我自己仍在努力解决这个问题，并且一次打一场。但到目前为止，我一直在做以下事情：

我有封装验证的基本类：

```
public interface ISpecification<TEntity> where TEntity : class, IAggregate
    {
        bool IsSatisfiedBy(TEntity entity);
    }

internal class AndSpecification<TEntity> : ISpecification<TEntity> where TEntity: class, IAggregate
    {
        private ISpecification<TEntity> Spec1;
        private ISpecification<TEntity> Spec2;

        internal AndSpecification(ISpecification<TEntity> s1, ISpecification<TEntity> s2)
        {
            Spec1 = s1;
            Spec2 = s2;
        }

        public bool IsSatisfiedBy(TEntity candidate)
        {
            return Spec1.IsSatisfiedBy(candidate) && Spec2.IsSatisfiedBy(candidate);
        }

    }

    internal class OrSpecification<TEntity> : ISpecification<TEntity> where TEntity : class, IAggregate
    {
        private ISpecification<TEntity> Spec1;
        private ISpecification<TEntity> Spec2;

        internal OrSpecification(ISpecification<TEntity> s1, ISpecification<TEntity> s2)
        {
            Spec1 = s1;
            Spec2 = s2;
        }

        public bool IsSatisfiedBy(TEntity candidate)
        {
            return Spec1.IsSatisfiedBy(candidate) || Spec2.IsSatisfiedBy(candidate);
        }
    }

    internal class NotSpecification<TEntity> : ISpecification<TEntity> where TEntity : class, IAggregate
    {
        private ISpecification<TEntity> Wrapped;

        internal NotSpecification(ISpecification<TEntity> x)
        {
            Wrapped = x;
        }

        public bool IsSatisfiedBy(TEntity candidate)
        {
            return !Wrapped.IsSatisfiedBy(candidate);
        }
    }

    public static class SpecsExtensionMethods
    {
        public static ISpecification<TEntity> And<TEntity>(this ISpecification<TEntity> s1, ISpecification<TEntity> s2) where TEntity : class, IAggregate
        {
            return new AndSpecification<TEntity>(s1, s2);
        }

        public static ISpecification<TEntity> Or<TEntity>(this ISpecification<TEntity> s1, ISpecification<TEntity> s2) where TEntity : class, IAggregate
        {
            return new OrSpecification<TEntity>(s1, s2);
        }

        public static ISpecification<TEntity> Not<TEntity>(this ISpecification<TEntity> s) where TEntity : class, IAggregate
        {
            return new NotSpecification<TEntity>(s);
        }
    } 
```

并使用它，我执行以下操作：

命令处理程序：

```
 public class MyCommandHandler :  CommandHandler<MyCommand>
{
  public override CommandValidation Execute(MyCommand cmd)
        {
            Contract.Requires<ArgumentNullException>(cmd != null);

           var existingAR= Repository.GetById<MyAggregate>(cmd.Id);

            if (existingIntervento.IsNull())
                throw new HandlerForDomainEventNotFoundException();

            existingIntervento.DoStuff(cmd.Id
                                , cmd.Date
                                ...
                                );

            Repository.Save(existingIntervento, cmd.GetCommitId());

            return existingIntervento.CommandValidationMessages;
        } 
```

聚合：

```
 public void DoStuff(Guid id, DateTime dateX,DateTime start, DateTime end, ...)
        {
            var is_date_valid = new Is_dateX_valid(dateX);
            var has_start_date_greater_than_end_date = new Has_start_date_greater_than_end_date(start, end);

        ISpecification<MyAggregate> specs = is_date_valid .And(has_start_date_greater_than_end_date );

        if (specs.IsSatisfiedBy(this))
        {
            var evt = new AgregateStuffed()
            {
                Id = id
                , DateX = dateX

                , End = end        
                , Start = start
                , ...
            };
            RaiseEvent(evt);
        }
    } 
```

该规范现在嵌入在这两个类中：

```
public class Is_dateX_valid : ISpecification<MyAggregate>
    {
        private readonly DateTime _dateX;

        public Is_data_consuntivazione_valid(DateTime dateX)
        {
            Contract.Requires<ArgumentNullException>(dateX== DateTime.MinValue);

            _dateX= dateX;
        }

        public bool IsSatisfiedBy(MyAggregate i)
        {
            if (_dateX> DateTime.Now)
            {
                i.CommandValidationMessages.Add(new ValidationMessage("datex greater than now"));
                return false;
            }

            return true;
        }
    }

    public class Has_start_date_greater_than_end_date : ISpecification<MyAggregate>
    {
        private readonly DateTime _start;
        private readonly DateTime _end;

        public Has_start_date_greater_than_end_date(DateTime start, DateTime end)
        {
            Contract.Requires<ArgumentNullException>(start == DateTime.MinValue);
            Contract.Requires<ArgumentNullException>(start == DateTime.MinValue);

            _start = start;
            _end = end;
        }

        public bool IsSatisfiedBy(MyAggregate i)
        {
            if (_start > _end)
            {
                i.CommandValidationMessages.Add(new ValidationMessage(start date greater then end date"));
                return false;
            }

            return true;
        }
    } 
```

这允许我为不同的聚合重用一些验证，并且很容易测试。如果您看到其中有任何流动。我真的很乐意讨论它。

你的，

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-25T03:02:07.970

根据我的 OO 经验（我不是 DDD 专家），将代码从实体移动到更高的抽象级别（进入命令处理程序）会导致代码重复。这是因为每次命令处理程序获取电子邮件地址时，它都必须实例化电子邮件验证规则。这种代码过一会就会腐烂，而且闻起来很臭。在当前示例中，如果您没有另一个更改电子邮件地址的命令，它可能不会，但在其他情况下，它肯定会......

如果您不想将规则移回较低的抽象级别，例如实体或电子邮件值对象，那么我强烈建议您通过对规则进行分组来减轻痛苦。因此，在您的电子邮件示例中，以下 3 条规则：

```
 if(string.IsNullOrWhitespace(email))   throw new DomainException(“...”);
  if(!email.IsEmail())  throw new DomainException();
  if(email.Contains(“@mailinator.com”))  throw new DomainException(); 
```

可以是`EmailValidationRule`您可以更轻松地重复使用的组的一部分。

从我的角度来看，对于将验证逻辑放在哪里的问题没有明确的答案。它可以是每个对象的一部分，具体取决于抽象级别。在您当前的情况下，电子邮件地址的正式检查可以是一个的一部分，`EmailValueObject`并且该`mailinator`规则可以是更高抽象级别概念的一部分，其中您声明您的用户不能拥有指向该域的电子邮件地址。例如，如果有人想在没有注册的情况下与您的用户联系，那么您可以根据正式验证检查她的电子邮件，但您不必根据`mailinator`规则检查她的电子邮件。等等...

所以我完全同意@pjvds 的观点，他声称这种尴尬的放置验证是糟糕设计的标志。我认为打破封装不会有任何好处，但这是你的选择，也是你的痛苦。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-20T04:46:22.827

您示例中的验证是验证值对象，而不是实体（或聚合根）。

我会将验证分为不同的区域。

1.  在内部验证`Email`值对象的内部特征。

我遵守聚合永远不应处于无效状态的规则。我将此原则扩展到可行的值对象。

用于`createNew()`从用户输入实例化电子邮件。这会强制它根据您当前的规则（例如“user@email.com”格式）有效。

用于`createExisting()`实例化来自持久存储的电子邮件。这不执行验证，这很重要 - 您不希望为昨天有效但今天无效的存储电子邮件引发异常。

```
class Email
{
    private String value_;

    // Error codes
    const Error E_LENGTH = "An email address must be at least 3 characters long.";
    const Error E_FORMAT = "An email address must be in the 'user@email.com' format.";

    // Private constructor, forcing the use of factory functions
    private Email(String value)
    {
        this.value_ = value;
    }

    // Factory functions
    static public Email createNew(String value)
    {
        validateLength(value, E_LENGTH);
        validateFormat(value, E_FORMAT);
    }

    static public Email createExisting(String value)
    {
        return new Email(value);
    }

    // Static validation methods
    static public void validateLength(String value, Error error = E_LENGTH)
    {
        if (value.length() < 3)
        {
            throw new DomainException(error);
        }
    }

    static public void validateFormat(String value, Error error = E_FORMAT)
    {
        if (/* regular expression fails */)
        {
            throw new DomainException(error);
        }
    }

} 
```

2.  在外部验证值对象的“外部”特征`Email`，例如在服务中。

    ```
    class EmailDnsValidator implements IEmailValidator
    {
        const E_MX_MISSING = "The domain of your email address does not have an MX record.";

        private DnsProvider dnsProvider_;

        EmailDnsValidator(DnsProvider dnsProvider)
        {
            dnsProvider_ = dnsProvider;
        }

        public void validate(String value, Error error = E_MX_MISSING)
        {
            if (!dnsProvider_.hasMxRecord(/* domain part of email address */))
            {
                throw new DomainException(error);
            }
        }
    }

    class EmailDomainBlacklistValidator implements IEmailValidator
    {
        const Error E_DOMAIN_FORBIDDEN = "The domain of your email address is blacklisted.";

        public void validate(String value, Error error = E_DOMAIN_FORBIDDEN)
        {
            if (/* domain of value is on the blacklist */))
            {
                throw new DomainException(error);
            }
        }
    } 
    ```

优点：

*   使用`createNew()`和`createExisting()`工厂函数允许控制内部验证。

*   可以直接使用验证方法“选择退出”某些验证例程，例如跳过长度检查。

*   也可以“退出”外部验证（DNS MX 记录和域黑名单）。例如，我参与的一个项目最初验证了域的 MX 记录的存在，但由于使用“动态 IP”类型解决方案的客户数量众多，最终将其删除。

*   很容易查询您的持久存储中不符合当前验证规则的电子邮件地址，但运行一个简单的查询并将每封电子邮件视为“新”而不是“现有” - 如果抛出异常，就会出现问题。例如，您可以从那里发出`FlagCustomerAsHavingABadEmail`命令，使用异常错误消息作为用户看到消息时的指导。

*   允许程序员提供错误代码提供了灵活性。例如，发送`UpdateEmailAddress`命令时，“您的电子邮件地址必须至少为 3 个字符长”的错误是不言自明的。但是，当更新多个电子邮件地址（家庭和工作）时，上述错误消息并不表示哪个电子邮件是错误的。提供错误代码/消息可以让您向最终用户提供更丰富的反馈。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-17T09:56:09.113

不久前我写了一篇关于这个主题的博客文章。这篇文章的前提是有不同类型的验证。我称它们为表面验证和基于域的命令验证。

这个简单的版本是这样的。验证“是不是一个数字”或“电子邮件地址”之类的东西往往不仅仅是肤浅的。这些可以在命令到达域实体之前完成。

但是，如果验证与域更相关，那么它的正确位置就在域中。例如，您可能对某辆卡车可以装载的货物的重量和类型有一些规定。这听起来更像是领域逻辑。

然后你有混合类型。诸如基于集合的验证之类的事情。这些需要在命令发出或注入域之前发生（尽可能避免这种情况 - 限制依赖关系是一件好事）。

无论如何，您可以在此处阅读完整的帖子：[如何在 CQRS 应用程序中验证命令](http://danielwhittaker.me/2016/04/20/how-to-validate-commands-in-a-cqrs-application/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-02T12:37:53.887

我仍在尝试这个概念，但你可以尝试装饰器。如果您使用 SimpleInjector，您可以轻松地注入您自己的在命令处理程序之前运行的验证类。然后该命令可以假设它到达那么远是有效的。但是，这意味着所有验证都应该在命令而不是实体上完成。实体不会进入无效状态。但是每个命令都必须完全实现自己的验证，因此类似的命令可能具有重复的规则，但您可以抽象通用规则以共享或将不同的命令视为真正独立的。

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2012-06-04T10:06:25.657

您可以将基于消息的解决方案与域事件一起使用，如此[处](http://www.udidahan.com/2009/06/14/domain-events-salvation)所述。

异常并不是所有验证错误的正确方法，并不是说无效实体是异常情况。

如果验证不重要，验证聚合的逻辑可以直接在*服务器*上执行，当您尝试设置新输入时，您可以引发域事件来告诉*用户*（或使用您的域的应用程序）为什么输入不正确。

# c++ - 变换在路径和矩形中的工作方式不同

> ID：10879422
> 
> 赞同：0
> 
> 时间：2012-06-04T09:54:28.273
> 
> 标签：c++, gdi+

我正在自定义控件上使用 GDI+ 和 C++ 绘制一个矩形和一个路径。这是我的代码...

```
Gdiplus::RectF myRectF(50.0f, 50.0f, 50.0f, 50.0f);
Gdiplus::Matrix myMatrix(0.0f, 1.0f, 0.0f, 0.0f, 30.0f, 30.0f);
Gdiplus::Graphics gdiGraphics(hDC); // hdC is my Device Context

Gdiplus::Pen* myPen = new Gdiplus::Pen(Gdiplus::Color::White);
myPen->SetWidth(2);

gdiGraphics.TranslateTransform(100.0f, 100.0f, Gdiplus::MatrixOrderAppend);
gdiGraphics.SetTransform(&myMatrix);
gdiGraphics.DrawRectangle(myPen, myRectF);

Gdiplus::GraphicsPath *myPath = new Gdiplus::GraphicsPath();
myPath->AddRectangle(myRectF);
myPath->Transform(&myMatrix);
gdiGraphics.FillPath(new SolidBrush(Color.Green), myPath); 
```

但是矩形是在与路径不同的地方绘制的。

如果我不从两者（矩形和路径）进行转换部分，那么这两个是在相同的坐标上绘制的，所以我只是想知道这两个转换的工作方式是否不同，或者我使用了一些错误的 API。

并且在路径中绘制的矩形是它应该在的正确位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:38:12.987

矩形和路径绘制在不同的位置，因为您对路径应用了两次变换。首先，当您将其设置为图形对象世界变换时：

```
gdiGraphics.SetTransform(&myMatrix); 
```

然后你也改变了路径：

```
myPath->Transform(&myMatrix); 
```

绘制对象时，Rectangle 仅受 Graphics 对象的平移影响，但 Path 受 Graphics 对象的平移及其自身平移的影响。

如果您想在同一个位置绘制两个形状，只需将转换应用于 Graphics 对象。

此外，当您使用 SetTransform() 设置图形对象的转换矩阵时，您会覆盖之前的 TranslateTransform() 操作。

# javascript - 如何通过另一个div调整文本区域的大小

> ID：10879425
> 
> 赞同：2
> 
> 时间：2012-06-04T09:54:51.347
> 
> 标签：javascript, jquery, css

我有一个文本区域和一个 div，我希望当我单击并向上或向下移动 div 时，文本区域也会重新调整大小，即 textarea 下面的 div 应该作为 textarea 的垂直调整大小手柄。

![在此处输入图像描述](../Images/bdda2ed6904c0548d8cd95f96677a5ca.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T10:26:54.210

使用 Jquery UI，您可以使底部 div 可拖动并使用它来调整 textarea 的大小，我为您制作了一个小 jsfiddle，它演示了这一点：）

[http://jsfiddle.net/GspjK/](http://jsfiddle.net/GspjK/)

# node.js - 如何重新连接redis连接？

> ID：10879426
> 
> 赞同：7
> 
> 时间：2012-06-04T09:54:56.583
> 
> 标签：node.js

我有一个简单的例子：

```
var redis = require('redis'),
client = redis.createClient();

var test = function() {
    client.brpop('log', 0, function(err, reply) {
        if (err != null ) {
            console.log(err);
        }    else {
            .... parse log string ....
        }
        test();
    });
}

test(); 
```

重启redis服务器后如何重新连接redis连接？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T11:01:11.533

Redis 客户端会自动重新连接。只要确保您处理`"error"`来自客户端的事件。根据[示例](https://github.com/NodeRedis/node_redis#usage-example)：

```
var redis = require('redis');
client = redis.createClient();
client.on('error', function(err){ 
  console.error('Redis error:', err); 
}); 
```

否则，[此代码](https://github.com/mranney/node_redis/blob/master/index.js#L140-143)就是流程开始的地方。

```
this.emit("error", new Error(message));
// "error" events get turned into exceptions if they aren't listened for.  If the user handled this error
// then we should try to reconnect.
this.connection_gone("error"); 
```

接下来，[.connection_gone()](https://github.com/mranney/node_redis/blob/master/index.js#L365)方法在客户端上运行。

请注意，您还可以`"reconnecting"`在发生这种情况时收听要通知的事件。

# iphone - UIMenuController 没有按预期工作，canPerformAction 没有被解雇

> ID：10879429
> 
> 赞同：3
> 
> 时间：2012-06-04T09:55:05.240
> 
> 标签：iphone, ios5, ad-hoc-distribution, testflight, uitapgesturerecognizer

我最近遇到了一个问题。UITapgesture 在模拟器上完美运行，甚至直接在设备上调试（iPhone 4，iOS 5.0.1），但是当我打包应用程序（Dep_Target iOS4.0m Base_SDK iOS5.1（最新））进行临时分发并将其发送给客户端时手势不起作用。然后我通过测试飞行在我用于调试的同一设备上安装了构建，手势在它上面不起作用。我重新检查了所有内容，我使用相同的版本进行分发。任何帮助都感激不尽。谢谢

编辑：
经过一番调试，结果发现 UITapgesture 不是罪魁祸首。手势方法被触发，但我在手势中使用了 UIMenuController。菜单控制器被实例化，所有但未显示在视图上。除了方法：

```
- (BOOL) canPerformAction:(SEL)selector withSender:(id) sender 
```

也不会被解雇。请记住这一切都发生在通过试飞分发的构建中，否则一切运行完美。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T02:48:32.470

我在我的一个应用程序中遇到了这个问题，并
`[self becomeFirstResponder]`
在函数的第一行（即行之前`[[UIMenuController alloc] init]`）编写解决了我的问题。

# c# - 我可以将已创建的页面添加到选项卡控件吗？

> ID：10879434
> 
> 赞同：-2
> 
> 时间：2012-06-04T09:55:38.583
> 
> 标签：c#, tabcontrol

我在 Windows 应用程序中有一个带有选项卡的选项卡控件。我已经创建了一些页面。我可以让这些页面显示在选项卡控件的选项卡上吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:59:54.743

编辑：

要将表单添加到 TabControl，您首先需要在 TabControl 的页面内设置一个面板。然后，在带有 TabControl 的表单的构造函数中执行以下操作：

```
FormToLoad formToLoad = new FormToLoad();
formToLoad.TopLevel = false;
panelInTabPage.Controls.Add(formToLoad);
formToLoad.Show(); 
```

您可能还想单独设置表单样式，以便它们不显示窗口镶边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:07:55.343

制作页面的用户控件并将它们添加为 TabPages

# ios - 从键盘隐藏/删除按钮

> ID：10879445
> 
> 赞同：0
> 
> 时间：2012-06-04T09:56:17.570
> 
> 标签：ios, button, keyboard, hide

**是否可以从iPad**上的键盘访问/删除按钮？

我希望用户只能访问数字键盘，而不能在其他类型的键盘之间切换。为此，我需要隐藏/禁用“开关按钮”（带有标签“ABC”的按钮）。

![键盘](../Images/5c07a9eee18b3ed8e8814d3d9f4c2027.png)

要访问我使用的键盘：

```
UIWindow * tempWindow = [[[UIApplication sharedApplication] windows] objectAtIndex:1];
UIView* keyboard;

for(int i = 0; i < [tempWindow.subviews count]; i++)
{
    keyboard = [tempWindow.subviews objectAtIndex:i];
    if([[keyboard description] hasPrefix:@"<UIKeyboard"] == YES)
    {
          // access elements of keyboard
    }
 } 
```

另外，问题是`[keyboard.subviews count] = 0`，虽然找到了键盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:01:22.280

每个都`UITextField`符合`UITextInputTraits`声明属性的文本输入协议`keyboardType`。您可以在界面构建器中定义键盘或`setKeyboardType:`在文本字段上调用方法。键盘类型在文档中定义。在您的特定情况下，您应该使用`UIKeyboardTypeDecimalPad`数字输入。

# iphone - 如何释放它？

> ID：10879446
> 
> 赞同：0
> 
> 时间：2012-06-04T09:56:20.427
> 
> 标签：iphone

我是 iPhone 开发的新手。

```
+ (id<GMGridViewLayoutStrategy>)strategyFromType:(GMGridViewLayoutStrategyType)type
{
    id<GMGridViewLayoutStrategy> strategy = nil;

    switch (type) {
        case GMGridViewLayoutVertical:
            strategy = [[GMGridViewLayoutVerticalStrategy alloc] init];
            break;
        case GMGridViewLayoutHorizontal:
            strategy = [[GMGridViewLayoutHorizontalStrategy alloc] init];
            break;
        case GMGridViewLayoutHorizontalPagedLTR:
            strategy = [[GMGridViewLayoutHorizontalPagedLTRStrategy alloc] init];
            break;
        case GMGridViewLayoutHorizontalPagedTTB:
            strategy = [[GMGridViewLayoutHorizontalPagedTTBStrategy alloc] init];
            break;
    }

    return strategy;
} 
```

我在这里调用该方法：

```
gmGridView = [[GMGridView alloc] init];
gmGridView.layoutStrategy = [GMGridViewLayoutStrategyFactory strategyFromType:GMGridViewLayoutHorizontalPagedLTR];
[self.view addSubview:gmGridView]; 
```

现在我的问题是如何释放 strategyFromType 方法的策略对象？它给了我潜在的泄漏。如果我要释放/自动释放，我的应用程序正在崩溃。请帮帮我谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:58:10.107

```
return [strategy autorelease]; 
```

**更新：**
关于返回自动释放对象的答案是正确的，问题是根据[项目站点](https://github.com/gmoledina/GMGridView)`GMGridView`中的描述使用。`ARC`

> 要求：
> 
> iOS 4 及更高版本
> Xcode 4.2（GMGridView 使用 ARC）
> 框架：Foundation、UIKit、CoreGraphics 和 QuartzCore

所以我想你需要将它作为子模块添加到项目中，但你可以搜索一些关于说明的信息......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:00:46.640

如果您正在使用，`ARC`那么您的代码很好，但没有`ARC`您应该返回一个自动释放的对象：

```
+ (id)strategyFromType:(GMGridViewLayoutStrategyType)type { 
    id strategy = nil;

   switch (type) {
         case GMGridViewLayoutVertical:
                strategy = [[GMGridViewLayoutVerticalStrategy alloc] init];
         break;
         case GMGridViewLayoutHorizontal:
             strategy = [[GMGridViewLayoutHorizontalStrategy alloc] init];
        break;
        case GMGridViewLayoutHorizontalPagedLTR:
            strategy = [[GMGridViewLayoutHorizontalPagedLTRStrategy alloc] init];
        break;
        case GMGridViewLayoutHorizontalPagedTTB:
          strategy = [[GMGridViewLayoutHorizontalPagedTTBStrategy alloc] init];
        break;
   }

   return [strategy autorelease];
} 
```

方法返回的所有对象都应该是`autorelease`，除了 if`alloc`和`new`任何`copy`方法。

我真的建议阅读[Advanced Memory Management Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:59:54.217

当您返回对象时，您需要自动释放对象

```
return [strategy autorelease]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T10:34:50.580

返回[策略自动释放]；还有[gmGridView 发布]；

在函数结束时

# android - Android 逐项叠加！在地图上放置和删除标记

> ID：10879447
> 
> 赞同：0
> 
> 时间：2012-06-04T09:56:30.247
> 
> 标签：android, google-maps, map, overlay, itemizedoverlay

我试图显示用户的当前位置并允许用户在地图上放置一个标记。当用户点击他放置的标记时，标记将消失，他可以再次在地图上放置另一个标记。

以下代码可以很好地显示用户的当前位置并在地图上放置一个标记。它还能够移除标记。但是一旦我试图在删除它后在地图上重新放置一个标记。程序崩溃了！谁能告诉我原因？

```
class InterestingLocations extends ItemizedOverlay {
    private ArrayList<OverlayItem> locations = new ArrayList<OverlayItem>();
    private GeoPoint center = null;
    private Context mContext ;
    private boolean placed=false;

    public InterestingLocations(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
        // create locations of interest
        GeoPoint me = new 
            GeoPoint((int)(lat*1000000),(int)(lng*1000000));

        locations.add(new OverlayItem(me, 
               "Me!", "Me! Me! Me!"));
        center=me;
        populate();
      }

    public InterestingLocations(Drawable marker, Context context)
    {
        super(marker);
        mContext= context;
        // create locations of interest
        GeoPoint me = new 
            GeoPoint((int)(lat*1000000),(int)(lng*1000000));

        locations.add(new OverlayItem(me, 
               "Me!", "Me!"));
        center=me;

        populate();
    }

    //  We added this method to find the middle point of the cluster
    //  Start each edge on its opposite side and move across with each point.
    //  The top of the world is +90, the bottom -90,
    //  the west edge is -180, the east +180

    @Override
    public void draw(Canvas canvas, MapView mapview, boolean shadow) {
        // Here is where we can eliminate shadows by setting to false
        super.draw(canvas, mapview, shadow);
    }

    @Override
    protected OverlayItem createItem(int i) {
        return locations.get(i);
    }

    @Override
    public int size() {
        return locations.size();
    }

    public boolean onTap (final GeoPoint p, final MapView mapView){
        boolean tapped = super.onTap(p, mapView);
        Log.i("onTap", "onTap 1");

        if (tapped){            
            Log.i("Hit item!!", "Hited");
            //do what you want to do when you hit an item       
            if(p!=me2){
                Log.i("Hit item!!", "Hited and p!=me2");
                removeOverlay();
                placed=false;
            }
        }           
        else{
            if(placed==false&&placeAble==true){
                Log.i("placed=="+placed, "placed==false");

                addOverlay(new OverlayItem(p, "Dest", "Destination"));
                destLat = (float)p.getLatitudeE6() / 1000000f;
                destLng = (float)p.getLongitudeE6() / 1000000f;
                placed=true;
            }   
            else{
                Log.i("placed=="+placed, "here is else");
            }
            //do what you want to do when you DONT hit an item
            }                   
        return true;
    }

    //You must have this method, even if it doesn't visibly do anything
    @Override
    protected boolean onTap(int index) {

        Log.i("Hit item!!", "Hited"+ index);
        return true;
    }

    public void addOverlay(OverlayItem overlay) {
        locations.add(overlay);
        populate();
    }

    public void removeOverlay() {
        locations.clear();
        GeoPoint me = new GeoPoint((int)(lat*1000000),(int)(lng*1000000));
        locations.add(new OverlayItem(me, "Me!", "Me! Me! Me!"));
        populate();
    }

} 
```

来自日食的错误：

```
06-04 18:03:03.859: E/global(29049): Deprecated Thread methods are not supported.
06-04 18:03:03.859: E/global(29049): java.lang.UnsupportedOperationException
06-04 18:03:03.859: E/global(29049):    at java.lang.VMThread.stop(VMThread.java:85)
06-04 18:03:03.859: E/global(29049):    at java.lang.Thread.stop(Thread.java:1280)
06-04 18:03:03.859: E/global(29049):    at java.lang.Thread.stop(Thread.java:1247)
06-04 18:03:03.859: E/global(29049):    at com.knowithk.kpass.KPassActivity$1.run(KPassActivity.java:46)
06-04 18:03:17.429: E/MapActivity(29049): Couldn't get connection factory client
06-04 18:03:32.773: E/AndroidRuntime(29049): FATAL EXCEPTION: main
06-04 18:03:32.773: E/AndroidRuntime(29049): java.lang.ArrayIndexOutOfBoundsException
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.google.android.maps.ItemizedOverlay.maskHelper(ItemizedOverlay.java:562)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.google.android.maps.ItemizedOverlay.setFocus(ItemizedOverlay.java:365)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.google.android.maps.ItemizedOverlay.focus(ItemizedOverlay.java:539)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:455)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.knowithk.kpass.taxifare.MyMap$InterestingLocations.onTap(MyMap.java:333)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:356)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:533)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.google.android.maps.MapView.onTouchEvent(MapView.java:683)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.view.View.dispatchTouchEvent(View.java:3938)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1733)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1151)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1717)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2215)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1886)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.os.Looper.loop(Looper.java:130)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at android.app.ActivityThread.main(ActivityThread.java:3687)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at java.lang.reflect.Method.invokeNative(Native Method)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at java.lang.reflect.Method.invoke(Method.java:507)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
06-04 18:03:32.773: E/AndroidRuntime(29049):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:44:27.440

通过将其添加到受保护的 boolean onTap(int index) 来更改删除被点击项目的方式：

```
 mOverlays.remove(index);
                setLastFocusedIndex(-1);
                map.invalidate(); 
```

它会解决你的问题。

顺便说一句，我是唯一一个认为 ItemizedOverlay 和 OverlayItem 类设计不佳的人吗？

# ipad - Monotouch 的 GridView

> ID：10879450
> 
> 赞同：0
> 
> 时间：2012-06-04T09:56:46.667
> 
> 标签：ipad, xcode4, xamarin.ios, aqgridview

我正在尝试为 Monotouch 开发获取类似 Visual Studio 的 gridview 控件。我看了一下 AQGridView。AQGridView 是否适用于 Monotouch？是否有 AQGridView 库可以添加到我的 monotouch 项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:48:24.463

你应该可以使用任何带有 MonoTouch 的 Objective-C 库。

您只需设置一个 MonoTouch 绑定项目即可使用它。

这是我的另一个答案的链接：[OpenFeint with MonoTouch](https://stackoverflow.com/questions/9869664/openfeint-with-monotouch/9871615#9871615)

另请阅读 Xamarin 文档：[http ://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types)

另一个要查看的 UI 库是[Three20](http://three20.info/)。它被用于许多应用程序中，例如 Facebook 和 Dropbox 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T13:31:39.363

我已经为 AQGridView 创建了应满足您需求的 MonoTouch 绑定。

[https://github.com/theonlylawislove/MonoTouch.AQGridView](https://github.com/theonlylawislove/MonoTouch.AQGridView)

只需在您的解决方案中包含 .csproj 并添加对它的引用。

# uitableview - iOS5 - 限制allowsMultipleSelection

> ID：10879452
> 
> 赞同：0
> 
> 时间：2012-06-04T09:57:05.410
> 
> 标签：uitableview, selection, allowmultiple

我需要限制表视图中多项选择的数量，但我不知道从哪里开始。

谢谢并恭祝安康！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-19T06:59:12.450

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView.indexPathsForSelectedRows.count > 5)
        return nil;
    else
        return indexPath;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:02:12.860

创建一个 NSMutableArray。每当有人选择一个单元格时，检查数组中已有的项目数。如果它小于您的限制，请将对该单元格的支持数据的引用放入您的数组中。如果它已达到其限制，请忽略该选择或替换之前的选择...无论哪个对您的应用有意义。

# flash - Away3D Broomstick（4），如何淡出模型

> ID：10879454
> 
> 赞同：2
> 
> 时间：2012-06-04T09:57:08.400
> 
> 标签：flash, air, away3d, stage3d

我有一个由不同网格和不同材料组成的复杂模型。随着时间的推移淡出（慢慢变得透明）整个模型的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:38:55.683

我正在处理同样的问题。似乎没有通用的方法（从 ObjectContainer3D 中删除了 alpha）我目前的解决方案是为所有子对象调用一个 fadeOut 方法并让它们调用它们的子对象，并让每种类型的网格/材料实现自己的淡入淡出方式出去。这需要您扩展所有使用自己的类的网格和材质的类，并且需要为每个不同的网格/材质使用不同的补间，但目前看来这是唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:39:26.253

只需将所有面材料的 alpha 属性设置为零值:)

# php - 为什么分页链接不显示？

> ID：10879458
> 
> 赞同：0
> 
> 时间：2012-06-04T09:57:23.180
> 
> 标签：php, codeigniter, pagination

我是 PHP Codeigniter 的新手。我正在尝试在我的网页中应用分页，因为我使用了以下代码

```
$config['base_url'] = base_url().'index.php/admin/pages/index/';
        $config['total_rows'] = $this->pages_model->count_pages();
        $config['per_page'] = '1';
        $config['full_tag_open'] = '<p>';
        $config['full_tag_close'] = '</p>';

        $this->pagination->initialize($config);

        $pageData['records']=$this->pages_model->get_pages($config['per_page'],$this->uri->segment(3)); 
```

在控制器中。在视图中我使用了以下代码`$this->pagination->create_links()` 但它没有显示分页链接。主要问题是无法分配 Pagignation 类 $total_rows 和 $per_page 中的类变量。它的值保持默认值，这是在 Pagingnation.php 文件中硬编码的。我现在不知道是什么问题。有没有办法克服这个问题？

```
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:01:51.070

尝试在 index.php 文件中设置错误报告：

```
error_reporting(E_ALL);
display_errors(1); 
```

也许你会得到一些错误，让你知道什么是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:01:56.017

你是否包含了分页库`$this->load->library('pagination');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:15:05.893

如果你只有一个记录，它不会显示分页。你的价值是`total_rows`多少？

如果您希望分页以其他方式运行，您要么必须扩展库并重新制作，`create_links()`要么在 Web 上找到更适合您需求的已创建扩展。

[解决您的问题的示例](http://codeigniter.com/forums/viewthread/154919/#749876)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T08:29:24.467

```
$config = array();
        $config["base_url"] = "///your url";
        $config["total_rows"] = $this->user->record_count();
        $config["per_page"] = 1;//may vary
        $config["uri_segment"] = 3;//may vary based on url segments
        $this->pagination->initialize($config);
        $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
        $this->session->set_userdata('page',$page);
        $this->session->set_userdata('per_page',$config["per_page"]);
        $data["sposts"] = $this->user->post($config["per_page"], $page);
        $data["links"] = $this->pagination->create_links();
        $this->load->view('post_view',$data); 
```

这是加载分页库后在控制器中创建分页的代码。分页库可以在构造函数中加载，也可以在函数中加载为`$this->load->library("pagination");`.

现在在视图文件中写这个来创建链接

```
echo $links; 
```

# css - 是否可以为背景大小：包含和背景大小：封面之间的过渡设置动画？

> ID：10879459
> 
> 赞同：4
> 
> 时间：2012-06-04T09:57:26.933
> 
> 标签：css, css-transitions

我知道可以在`background-size`使用 css3 使用像素或百分比值时为之间的过渡设置动画，但我无法让它在`contain`和之间设置动画`cover`。（我正在使用 webkit - chrome 和 safari）

我在这里做了一个小提琴：http: [//jsfiddle.net/59Bhb/3/](http://jsfiddle.net/59Bhb/3/)这表明它适用于百分比值，但不包含/覆盖。

只是不支持吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T11:18:52.283

它只是不受支持 -[您可以动画的属性列表](http://www.w3.org/TR/css3-transitions/#animatable-properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T08:27:58.403

你可以在 jQuery 中像这样为它制作动画

$('myElement').animate({'background-size':'无论大小'}, 1000);

但是无论定位如何，都很难获得所需的结果，因为它将线性左上角调整为右下角。我试过把它放在一个 cms 模板中，但它没有给我想要的效果。希望我有所帮助

# eclipse - 插件安装错误

> ID：10879462
> 
> 赞同：1
> 
> 时间：2012-06-04T09:57:53.850
> 
> 标签：eclipse, gwt, plugins, eclipse-plugin

我刚刚下载了 eclipse 版本版本：3.7.0。现在我正在为这个 eclipse 安装 gwt 插件。插件链接是：[gwt plugin](http://dl.google.com/eclipse/plugin/3.7) (http://dl.google.com/eclipse/plugin/3.7) 现在安装时我检查了以下项目：

1.  日食的谷歌插件
2.  适用于 java sdk 1.6.6 的谷歌应用引擎
3.  谷歌网络工具包 SDK 2.4

所有其他复选框均未选中。现在在安装时单击下一步，它会给我如下错误：`Cannot complete the install because one or more required items could not be found. Software being installed: Google Plugin for Eclipse 3.7 2.6.1.v201205091048-rel-r37 (com.google.gdt.eclipse.suite.e37.feature.feature.group 2.6.1.v201205091048-rel-r37) Missing requirement: Google Plugin for Eclipse 3.7 2.6.1.v201205091048-rel-r37 (com.google.gdt.eclipse.suite.e37.feature.feature.group 2.6.1.v201205091048-rel-r37) requires 'org.eclipse.wst.server.core 0.0.0' but it could not be found`

我不明白是什么问题。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T11:47:25.960

WST 是 Eclipse Google 插件的要求。要确保已安装此要求，请确保将 indigo 更新站点 (http://download.eclipse.org/releases/indigo) 添加到可用软件站点列表中。此外，在开始安装 GPE 之前，请确保选中“安装期间联系所有更新站点以查找所需软件”复选框。

这是已在 Google 群组中报告的老[问题。](https://groups.google.com/forum/?fromgroups#!topic/google-web-toolkit/wu8GFnIo4SM)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:23:23.553

`Contact all update sites during install to find required software`应选中该选项。在这种情况下，所有丢失的依赖项都将自动安装

# eclipse - Spring MVC 3.1 服务静态资源

> ID：10879463
> 
> 赞同：0
> 
> 时间：2012-06-04T09:57:54.153
> 
> 标签：eclipse, spring-mvc, tomcat7

我正在尝试解决一个常见的问题，即尝试从我的 Java Web App 提供静态资源，例如图像、样式表和脚本。我尝试了很多其他线程中提供的解决方案，但一无所获，我得到的只是资源调用上的 404 错误。

我唯一能想到的另一件事是我在 Tomcat 7 上运行，但如果我尝试将 6 放在上面，我会得到“服务器不支持 J2EE Web 模块规范的 3.0 版”。错误，所以看起来不行。有没有人有任何想法我可能会出错？

我的项目结构如下：

```
WebContent

    META-INF

    Resources

        CSS

        Images

            close.jpg

        Scripts 

    WEB-INF

        Lib

        Views

            index.jsp 
```

Web.xml

```
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

spring-servlet

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/context
                    http://www.springframework.org/schema/context/spring-context-3.0.xsd
                    http://www.springframework.org/schema/mvc
                    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<context:component-scan base-package="uk.ac.ncl.controllers" />

<mvc:resources mapping="/resources/**" location="/resources" />

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
<bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" />

<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

我的控制器

```
@RequestMapping(value="/", method = RequestMethod.GET)
public String index()
{
    return "index";
} 
```

我的观点

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<html>
    <head>
        <title>Spring 3.0 MVC Series: Index - ViralPatel.net</title>
    </head>
    <body>
        <h1>Page with image</h1>
        <!-- use c:url to get the correct absolute path -->
        <img src="<c:url value="/resources/images/close.png" />" />
        <img src="http://localhost:8080${pageContext.request.contextPath}/resources/images/close.png" />
    <a href="map">View Map</a>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:18:13.653

这可能是区分大小写的问题吗？你的 html 说`/resources/image`s 但你的树看起来像`/Resources/Images`

# ms-access - Access 2007：onclick 事件不起作用？

> ID：10879466
> 
> 赞同：0
> 
> 时间：2012-06-04T09:58:14.933
> 
> 标签：ms-access, vba, ms-access-2007

我在 from 中有一个按钮，我为事件 onclick 包含以下代码

```
Dim strSQL As String

strSQL = "INSERT INTO BusObjectiveUpdate (BusinessObjectDesc,BusinessReqID,BusObjectiveDate,PersonID) VALUES ('" & Me!BusinessObjectDesc & "'," & Me!BusinessReqID & "," & Me!BusObjectiveDate & "," & Me!PersonID & ");"
DoCmd.RunSQL strSQL

Me.Requery 
```

每当我单击按钮时，我都会检查表 BusObjectiveUpdate，但我发现那里没有数据？！有什么帮助吗？！！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:00:39.247

您是否将数据库位置设置为受信任的位置？在 2007 年，您需要这样做才能使代码正常工作。

# sql-server - SQL Server 2012 LocalDB：如何检索 Binn 的路径？

> ID：10879469
> 
> 赞同：1
> 
> 时间：2012-06-04T09:58:39.757
> 
> 标签：sql-server, smo

我在我的 c# 应用程序中使用 SMO 对象来获取它。即我使用Microsoft.SqlServer.Management.Smo.Server.Information 类并使用RootDirectory 和MasterDBPath。它工作正常。但是对于 LocalDB 没有这些属性。我需要它有可能安装扩展的存储过程。

如何为 LocalDB 获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:38:44.880

LocalDB 二进制文件总是安装到`%ProgramFiles%\Microsoft SQL Server\110\LocalDB\Binn`. 请注意，此文件夹中的二进制文件在所有用户的所有 LocalDB 实例之间共享。小心嘲笑它:-)

# c - 如何使用共享内存和信号量实现管道？

> ID：10879470
> 
> 赞同：4
> 
> 时间：2012-06-04T09:58:42.467
> 
> 标签：c, linux, pipe, shared-memory

我目前的任务是关于实现`pipe()`in `Linux`using **shared memory**。

因为这是我第一次使用信号量和共享内存（`mutex`也），所以我对它的经验为零。

有人可以解释一下它的实施吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:39:19.650

从下面的手册页开始：

**共享内存**

```
ftok
shmget
shmat
shmctl
shmdt 
```

**信号量**

```
sem_init
sem_wait
sem_post 
```

这个想法是，两个不同的应用程序将使用您的管道来交换数据。这可以通过共享内存来完成。还应该进行一些同步（这里是信号量），以确保进程读取的数据是一致的。例如，您必须阻止进程 A 写入管道，直到进程 B 从管道中读取先前写入的数据。

# mysql - 忘记了mysql的root密码

> ID：10879476
> 
> 赞同：0
> 
> 时间：2012-06-04T09:58:58.047
> 
> 标签：mysql

我忘记了mysql的root密码。我怎样才能再次得到它？我正在尝试使用`mysql -u root`命令，但出现此错误`ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)`

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T10:00:42.820

尝试`-p`选项；然后它会提示您输入密码。在您的情况下，它是说您无法使用没有密码的用户 root 访问。

```
mysql -u root -h localhost -p 
```

万一，您真的忘记了密码，请在此处查看如何重置密码

[如何重置 Root 密码](https://dev.mysql.com/doc/refman/5.7/en/resetting-permissions.html)（适用于 5.7 版本）

# jquery-ui - 带有图标的jquery ui动态按钮

> ID：10879481
> 
> 赞同：0
> 
> 时间：2012-06-04T09:59:09.700
> 
> 标签：jquery-ui, button, dynamic

我无法在没有文本和图标的情况下动态创建 jquery ui 按钮。

```
var $ctrl = $('<input/>')
    .attr({ type: 'button', name:'btn'})
    .val('Action')
    .button({icons: { primary: "ui-icon-close"},text: false}); 
```

此代码创建带有文本的 ui 按钮。我怎样才能获得带有图标且没有文字的动态按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:57:53.070

我尝试了上述选项，但没有奏效。

经过大量调查后，我找到了以下解决方案并且它有效

```
var $ctrl = $('').button({icons: { primary: "ui-icon-help"},text: false}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:47:10.177

对于“按钮”类型的输入，“值”属性是按钮上可见的文本。所以这条线

```
.val('Action') 
```

是什么让文本出现在按钮上。

如果删除此行，您将拥有一个只有一个图标的按钮。

```
var $ctrl = $('<input/>')
    .attr({ type: 'button', name:'btn'})
    .button({icons: { primary: "ui-icon-close"},text: false}); 
```

上面提到的那行有特殊用途还是只是复制/粘贴错误？

# sql - 在 Oracle 表中查找特定数据

> ID：10879483
> 
> 赞同：0
> 
> 时间：2012-06-04T09:59:14.077
> 
> 标签：sql, oracle, plsql

我需要在我的 oracle 数据库中找到一个列的值，但我不知道它存储在哪个表或列中

我如何`or like %%`像在

```
select * from SYS.dba_source 
```

有没有这样的桌子

```
Column Name ID  Data Type             Null?         Comments

OWNER   1   VARCHAR2 (30 Byte)       Y  
NAME    2   VARCHAR2 (30 Byte)       Y    Name of the object
TYPE    3   VARCHAR2 (12 Byte)       Y    

Type of the object:
"TYPE", "TYPE BODY", "PROCEDURE", "FUNCTION",
"PACKAGE", "PACKAGE BODY" or "JAVA SOURCE"

LINE    4   NUMBER                  Y    Line number of this line of source
TEXT    5   VARCHAR2 (4000 Byte)    Y    Source text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:59:14.247

[链接：**pl/sq 在模式中查找任何数据**](http://www.adp-gmbh.ch/ora/misc/find_in_tables.html)

**想象一下**，您的架构中有几个表，您想在这些表中的所有列中查找特定值。理想情况下，会有一个类似的 sql 函数

```
select * from * where any(column) = 'value'; 
```

不幸的是，没有这样的功能。但是，**`PL/SQL`**可以编写一个函数来执行此操作。以下函数遍历当前模式的所有表中的所有字符列，并尝试在其中找到 val。

```
 create or replace function find_in_schema(val varchar2) 
    return varchar2 is
      v_old_table user_tab_columns.table_name%type;
      v_where     Varchar2(4000);
      v_first_col boolean := true;
      type rc     is ref cursor;
      c           rc;
      v_rowid     varchar2(20);

    begin
      for r in (
        select
          t.*
        from
          user_tab_cols t, user_all_tables a
        where t.table_name = a.table_name
          and t.data_type like '%CHAR%'
        order by t.table_name) loop

        if v_old_table is null then
          v_old_table := r.table_name;
        end if;

        if v_old_table <> r.table_name then
          v_first_col := true;

          -- dbms_output.put_line('searching ' || v_old_table);

          open c for 'select rowid from "' || v_old_table || '" ' || v_where;

          fetch c into v_rowid;
          loop
            exit when c%notfound;
            dbms_output.put_line('  rowid: ' || v_rowid || ' in ' || v_old_table);
            fetch c into v_rowid;
          end loop;

          v_old_table := r.table_name;
        end if;

        if v_first_col then
          v_where := ' where ' || r.column_name || ' like ''%' || val || '%''';
          v_first_col := false;
        else
          v_where := v_where || ' or ' || r.column_name || ' like ''%' || val || '%''';
        end if;

      end loop;
      return 'Success';
    end; 
```

# php - 在 PHP Web 服务 (SOAP) 上获取文件

> ID：10879493
> 
> 赞同：2
> 
> 时间：2012-06-04T09:59:59.817
> 
> 标签：php, .net, web-services, soap

我有发送文件的.Net 客户端。

我如何使用**PHP Web 服务**来获取这些文件并在一些更改后将它们返回给客户端？

我没有找到获取这些文件的代码，也许有人有代码示例......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:33:30.107

[您可以将Base64](http://en.wikipedia.org/wiki/Base64)编码的文件数据从客户端发送到您的 PHP Web 服务，并使用 $_FILES 超全局处理它们。这里有一个类似的主题：[PHP SOAP Transfering Files](https://stackoverflow.com/questions/2913106/php-soap-transfering-files)

# compression - 用于隐写术的 dct 图像的量化

> ID：10879496
> 
> 赞同：-1
> 
> 时间：2012-06-04T10:00:06.387
> 
> 标签：compression, jpeg, steganography, dct, quantization

我有一个灰度图像。我做了 8x8 块并计算了它们的每个 DCT。我想量化 DCT 系数，然后用我的秘密消息位替换它们的 LSB。我究竟如何量化系数？我应该使用JPEG使用的量化矩阵吗？如何确定这样一个量化矩阵的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:25:58.080

您可能希望将质量级别设置为最高（量化矩阵中的最小值），以便每个系数的修改后的 LSB 对图像数据的干扰最小。

**对于编码：**
您需要在量化之后和熵编码之前访问 DCT 值。在那里您可以修改 LSB。您可能应该只修改非零系数值，否则您将使压缩图像文件更大且更失真。这样，您可能能够对每个 DCT 块编码 20-30 位。

**对于解码：**
您需要在熵解码之后和去量化步骤之前立即执行相反的操作并访问 DCT 值。

要计算您的消息可用的总位数，请使用以下示例：

对于 VGA 大小的图像 (640x480)，编码为 4:2:0（两个维度上的二次采样颜色），您将拥有 40 x 30 = 1200 个 MCU。每个 MCU 有 6 个 DCT 块（4Y、1Cr、1Cb）。总共有 7200 个 DCT 块。如果每个块平均编码 25 个系数（合理的质量水平），那么您的消息总共可以是 7200x25 = 180000 位。

# c# - 如何使 Visual Studio 格式字典初始化？

> ID：10879503
> 
> 赞同：9
> 
> 时间：2012-06-04T10:00:44.270
> 
> 标签：c#, visual-studio-2010, visual-studio, c#-4.0, autoformatting

所有 Visual Studios（2012 也是）不格式化以下内容：

```
_messageProcessor = new Dictionary<ServerDataTypes, MessageProcessor>()
{
    {ServerDataTypes.FrameData,       ProcessFrameData  }   ,
    {    ServerDataTypes.ServerStatusResult,ProcessServerStatusResult     },
    {   ServerDataTypes.PlayerMessage,    ProcessPlayerMessage},
    ....
}; 
```

如何让我的 Visual Studio 2010（或 2012）自动格式化？我需要以下结果：

```
_messageProcessor = new Dictionary<ServerDataTypes, MessageProcessor>()
{
    { ServerDataTypes.FrameData, ProcessFrameData },
    { ServerDataTypes.ServerStatusResult, ProcessServerStatusResult },
    { ServerDataTypes.PlayerMessage, ProcessPlayerMessage },
     ...
}; 
```

就像在新创建的对象的自动属性中一样。该格式正在为此工作。但不是为了这个。那么，如何解决呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T21:59:00.560

简短的回答：你不能用 VS 开箱即用。Resharper 接近了，但它的重新格式化也不太适合这种风格。我实际上已经提交了这样做的请求。

您可能会寻找其他一些扩展或开发某种宏。

# c#-2.0 - MAC地址的唯一性

> ID：10879506
> 
> 赞同：0
> 
> 时间：2012-06-04T10:01:03.530
> 
> 标签：c#-2.0

看着[这个相关的 SO question](https://stackoverflow.com/questions/7244336/get-something-unique-about-a-computer-in-order-to-create-a-free-trial)，我不禁想知道 MAC 地址的唯一性。

**MAC地址有多独特？**

我正在使用它们来**半唯一地识别用户。**我有一个网站，几乎任何设备（PC、Mac、iPhone、Android 手机等）和任何操作系统的用户都可以通过 HTTP 请求访问。我使用 IP 地址和 MAC 地址的组合来识别唯一用户。

我假设可能存在以下情况：

*   设备没有 MAC 地址（不太可能，当然，但无论如何）
*   设备具有唯一的 MAC 地址
*   一个设备有多个唯一的 MAC 地址
*   两个或更多设备具有相同的 MAC 地址

前三种情况是唯一的（第三种是因为我只需要一个唯一的 MAC 地址）。对于第四种情况，这种可能性有多大？

也就是说：给定 100 个随机用户（可能是任何 Windows 操作系统的 Windows 用户），我可以期望其中有多少人拥有相同的 MAC 地址？仅仅是因为MAC地址的长度有限吗？还是依赖于某种有目的的配置更改（MAC 地址欺骗）？

我可以接受 MAC 地址是半唯一的，我只是想弄清楚如何解释数据。

（我在针对 .NET 2.0 的链接问题中使用针对 .NET 2.0 的 C# 代码。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T01:37:40.323

这仅适用于同一网络。

MAC 地址使用 ARP 在本地解析，以在硬件级别路由本地数据包。ARP 不是可路由协议，不能跨子网解析。

如果您的网络服务器位于具有端口映射的路由器后面，并且所有传入的流量都来自该路由器，那么每个连接似乎都来自路由器的 MAC 地址，您不会“看到”路由器的 MAC 地址原始机器，除非你能以某种方式通过网页来获取它（我不是网络天才，所以不要问我那个，但我猜你需要在 Java 客户端进行一些繁重的工作，或其他类型的主动组件来询问本地机器，更容易使用 cookie）

您可以找到进行传出 NAT 的远程计算机的公共 IP 地址，但再一次，可能有多个设备从路由器后面连接，这将限制此方法的实用性，这意味着需要查看 IP数据包，我不知道您如何从 Web 服务器执行此操作（可能不能？）。

无论如何，这就是 cookie 的用途，一种在远程机器上留下标识符的方式，这样您就可以看到流量来自哪里。如果人们不接受 cookie，除非您开始变得非常有创意，否则您将无法唯一识别它们。

（顺便说一句，Mac 地址总是唯一的（好吧，你偶尔可以找到一个重复使用的 MAC，但它非常罕见，或者至少需要网络才能工作！），这就是它们的目的，在这种情况下它没有多大帮助如果您不在同一个网络上）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:07:18.863

> 100 个随机用户（可能是任何 Windows 操作系统的 Windows 用户），我可以期望其中有多少具有相同的 MAC 地址？

零。当它们在同一个网络中时，它们无法与相同的 MAC 地址进行通信，因为以太网使用它们来查找计算机。它们**非常**独特。网卡生产商获得他们可能分配给其产品的地址范围。

但是：有一些方法可以操纵您的 MAC 地址，并且在某些情况下人们会这样做！例如，当您想进入一个仅限于某些 MAC 地址的网络时，您可以自己操作以匹配其中一个（如果您发现，哪些在白名单上）。由于我不知道您的 szenario 是什么（您要完成什么），所以我无法告诉您这是否与您有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T20:04:35.337

您只需要了解 MAC 地址（可以更改）和硬件标识符 [确切地说是您的网络接口控制器]（由其制造商永久分配）之间的区别。

MAC 地址是您的设备连接到互联网时的名称（通过 rooter 或交换机）。您可以更改您的 MAC 地址，但**默认情况下**，此 ID 使用网络接口控制器 (NIC) 制造商分配的标识符（例如您的 Wifi 天线）

Exemple: I've changed my MAC address for my two computers using the same MAC Address: 00:01:02:03:04:06\. My computers seems to be the same when connected to the same router but the identifier of their wifi antena remain unchanged and different.

# objective-c - 从 Xcode 编译和运行命令行项目

> ID：10879508
> 
> 赞同：0
> 
> 时间：2012-06-04T10:01:10.703
> 
> 标签：objective-c, xcode, command-line

我正在开发一个使用以下命令编译的软件`Terminal`：

```
gcc -framework Foundation -framework AudioToolbox Main.m Buffer.m WavFileReader.m WavFileCreator.m LowPassFilter.m Snippet.m Blender.m EffectsFilter.m -o /Users/ericbrotto/Desktop/audio 
```

然后我也通过`Terminal`.

如何使用`Run`构建和运行应用程序的按钮从 Xcode 项目中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:46:10.003

最简单的方法是首先创建一个带有命令行目标的项目。然后，一旦你这样做了，删除它默认添加到项目中的文件，然后将你的文件添加到项目中，确保在这样做时检查目标。

您将需要考虑一下文件的位置，以便它们对您有意义并且与 Xcode 通常放置它们的位置相差不远。

您可能会或可能不会发现运行阶段的执行令人满意，但我发现它对于小型测试程序和无需用户输入即可运行的东西很好。否则，您可能希望在终端中运行以获得更好的 I/O。

# android - 旋转的editText未正确显示

> ID：10879511
> 
> 赞同：1
> 
> 时间：2012-06-04T10:01:15.673
> 
> 标签：android, surfaceview, android-edittext

我使用 编写了用于旋转文本的代码`SurfaceView`，这没关系。现在我想编辑`SurfaceView`我之前所做的文本。将出现一个`editText`并且可以编辑，但是当我旋转文本时，`textView`它不会随文本一起旋转。

我用于添加和旋转的代码`editText`如下：

```
if(editText!= null)
    relativeLayout.removeView(editText);

else {
    editText = new EditText(MainActivity.this);
    editText.setText(rectF.getText());
    RelativeLayout.LayoutParams params = 
                      new RelativeLayout.LayoutParams((int) rectF.getBounds().width(), 
                                                      (int) rectF.getBounds().height());
    params.leftMargin = (int) rectF.getBounds().left; 
    params.topMargin = (int) rectF.getBounds().top;
    editText.setLayoutParams(params);

    Animation an = new RotateAnimation(0,rectF.getAngle());
    an.setDuration(0);             
    an.setRepeatCount(0);  
    an.setZAdjustment(Animation.ZORDER_TOP);
    an.setFillAfter(true);  
    editText.setAnimation(an);
    relativeLayout.addView(editText);
    editText.requestFocus();

    InputMethodManager imm = (InputMethodManager) getSystemService (Context.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
    editText.setOnKeyListener( new OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            switch (keyCode) {
            case KeyEvent.KEYCODE_DPAD_CENTER:
            case KeyEvent.KEYCODE_ENTER:
                saveEditText();
                return true;
            }

            return true;
        }

        private void saveEditText() {
            txt2.setText(editText.getText().toString());
            InputMethodManager imm = (InputMethodManager) getSystemService(
                            INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
            relativeLayout.removeView(editText);
        }
    });
} 
```

# gwt - 使用带有 JsonRpc 方言的 ValueProxy 参数时，RF 'Unfrozen bean with null RequestContext'

> ID：10879512
> 
> 赞同：0
> 
> 时间：2012-06-04T10:01:22.123
> 
> 标签：gwt, requestfactory, autobean

当我尝试发送使用 ValueProxy 参数的请求时，我得到了这个“Unforzen bean”异常。我不知道这个异常是否是因为使用 JsonDialect 的 RF 存在错误，或者我做错了什么...... ¿ 一些帮助？

```
java.lang.AssertionError: Unfrozen bean with null RequestContext
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.checkStreamsNotCrossed(AbstractRequestContext.java:981)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.editProxy(AbstractRequestContext.java:509)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.edit(AbstractRequestContext.java:502)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.retainArg(AbstractRequestContext.java:1230)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.access$2(AbstractRequestContext.java:1223)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$JsonRpcPayloadDialect.addInvocation(AbstractRequestContext.java:202)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.addInvocation(AbstractRequestContext.java:661)
at es.xxxx.taller.client.Taller_SomeRequestContextImpl.SomeCall(Taller_SomeRequestContextImpl.java:29)
at es.xxxx.taller.client.Taller.onModuleLoad(Taller.java:417)

public class SomeEntryPoint implements EntryPoint {

@JsonRpcProxy
public interface SomeProxy extends ValueProxy {
    String getSomeProperty();
    void setSomeProperty(String value);
}

@JsonRpcProxy
public interface VoidProxy extends ValueProxy {
}

public interface SomeAutoBeanFactory extends AutoBeanFactory {
    SomeAutoBeanFactory INSTANCE = GWT.create(SomeAutoBeanFactory.class);

    AutoBean<SomeProxy> someProxy();
}

public interface SomeRequestFactory extends RequestFactory {
    SomeRequestFactory INSTANCE = GWT.create(SomeRequestFactory.class);

    SomeRequestContext context();
}

@JsonRpcService
public interface SomeRequestContext extends RequestContext {

    SomeCall SomeCall(SomeProxy proxy);

    @JsonRpcWireName(value = "SomeCall")
    public interface SomeCall extends Request<VoidProxy> {
    }
}

public void onModuleLoad() {

    SomeProxy someProxy = SomeAutoBeanFactory.INSTANCE.someProxy().as();

    someProxy.setSomeProperty("someValue");

    SomeRequestFactory.INSTANCE.context().SomeCall(someProxy).fire();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:12:42.773

代理应该由一个创建`RequestContext`，而不是一个`AutoBeanFactory`！使用 JsonRpc 方言不会改变您使用 RequestFactory 的方式。

```
public void onModuleLoad() {
   SomeRequestContext ctx = SomeRequestFactory.INSTANCE.context();
   SomeProxy someProxy = ctx.create(SomeProxy.class);
   someProxy.setSomeProperty("someValue");
   ctx.SomeCall(someProxy).fire();
} 
```

# c++ - 未解析的外部符号，带有自制的代表

> ID：10879518
> 
> 赞同：1
> 
> 时间：2012-06-04T10:01:42.993
> 
> 标签：c++, delegates, member-function-pointers

我有一个`Foo`以 2 参数函数作为参数的函数：

```
void Foo(void (*fcn)(int, int*)); 
```

但是，我要传入 ( `func`) 的函数类型只需要 1 个参数^*。

```
typedef void (__stdcall *FuncCallBack)(int a);

void Caller(FuncCallBack func) {
   Foo(????);
} 
```

在 C# 中，我会执行以下操作：

```
Foo((a,b) -> func(a)); 
```

我正在尝试对委托类做类似的事情（发现我不能有一个指向绑定成员函数的指针，我已经切换到静态）：

```
class Delegate {
private:
 static FuncCallBack _Callback;
public
 Delegate(FuncCallBack);
 static void Callback(int, int*);
}

Delegate::Delegate(FuncCallback callback) { _Callback = callback; }

void Delegate::Callback(int a, int *b) { _Callback(a); } 
```

我这样使用：

```
void Caller(FuncCallBack func) {
   Delegate d = Delegate(func);
   Foo(&(d.Callback));
} 
```

这目前给了我一个链接器错误：`unresolved external symbol "private: static void (__stdcall* Delegate::_Callback)(int)" (?_Callback@Delegate@@0P6GXHHPAN0@ZA)`

*   问题 1：什么可能导致此链接器错误？
*   问题2：有没有更好的方法来做到这一点？

^(*函数 typedef 包括`__stdcall`因为它是从（并将回调）C# 传入的）)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:04:58.713

您需要只定义`static`一次类的成员（例如在 Delegate.cpp 中）：

```
FuncCallBack Delegate::_Callback; 
```

在发布的代码中只有一个`_Callback`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T10:41:18.843

正如我在评论中指出的那样，使用一个类看起来好像你已经将回调函数包装在一个类实例中，但由于回调函数是一个原始函数指针，它无法从它所在的类实例中访问任何状态从...获取。它只能访问静态成员变量，这意味着每当构造新实例时*所有实例的行为。* `Delegate``Delegate`

如果您必须支持调用不同的方法`func`，我会使用一个更简单的接口，这使得只有回调函数在某个时间处于活动状态这一事实从接口中更加明显。

例如：

`callbackwrapper.h`：

```
void CallbackWrapper(int, int*);
void SetWrappedCallback(void (__stdcall *toWrap)(int)); 
```

`callbackwrapper.cpp`：

```
namespace {
    void (__stdcall *wrappedCallback)(int);
}

void CallbackWrapper(int a, int*)
{
    wrappedCallback(a);
}

void SetWrappedCallback(void (__stdcall *toWrap)(int))
{
    wrappedCallback = toWrap;
} 
```

# database - 如何在键入时提高搜索的性能？

> ID：10879526
> 
> 赞同：2
> 
> 时间：2012-06-04T10:02:50.987
> 
> 标签：database, performance, windows-phone-7, search, windows-phone-7.1

我正在尝试在您键入功能时实现搜索（例如默认电子邮件应用程序中的搜索功能）-我有一个包含 50 个项目的列表框-每个项目都绑定到具有字符串字段的类对象...我希望在其中一个字符串字段中搜索和显示在搜索框中包含文本的项目 - 这就像用户在文本框中键入的键...尝试了几种方法 -->

1 >> 使用 CollectionViewSource
- 将 CollectionViewSource 绑定到数据库中的所有项目
- 将列表框绑定到 CollectionViewSource
- 设置 CollectionViewSource 的过滤器属性 - 其函数在项目的搜索框中搜索文本和设置 e.Accepted - 在每个 keyup 事件上
- 过滤工作正常，但 50 个项目的速度很慢 :( - 猜测过滤器的 cos 获取每个项目并检查是否将 e.Accepted 属性设置为 true
.... 加载时调用一个 DB但似乎需要大量处理来决定 CollectionViewSource 在文件管理器中显示哪个元素

2 >> Filter @ DB level
- on keyup - 将搜索框中的文本发送到 ViewModel，其中函数返回具有搜索字符串的对象的 ObservableCollection
- ObservableCollection 绑定到列表框
.... 没有太多处理@顶层，但每个按键上都有多个数据库调用 - 仍然很慢，但比方法一快一点

您还有其他推荐的方法吗？或者有什么建议可以进一步优化上述方法？- 有什么调整可以让搜索顺利运行吗？

第一次进入移动开发:) ...提前感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T00:07:24.087

您可以通过将搜索操作延迟 x 毫秒来进一步优化搜索过程，以允许用户继续编写搜索条件。这样，每个新键入的字符都会将搜索操作延迟 xxx 毫秒，直到触发该操作的最后一个字符，您只需使用一次调用而不是说 10 次调用即可获得更好的性能。从技术上讲，您可以通过使用 Timer 类来实现这一点。在这里，您将找到一个示例源代码示例，该示例向您展示了如何实现这一点。

```
 private void txtSearchCriteria_TextChanged(object sender, TextChangedEventArgs e)
    {
        if (txtSearchCriteria.Text == "Search ...")
            return;

        if (this.deferredAction == null)
        {
            this.deferredAction = DeferredAction.Create(() => ApplySearchCriteria());
        }

        // Defer applying search criteria until time has elapsed.
        this.deferredAction.Defer(TimeSpan.FromMilliseconds(250));
    }

    private DeferredAction deferredAction;

    private class DeferredAction
    {
        public static DeferredAction Create(Action action)
        {
            if (action == null)
            {
                throw new ArgumentNullException("action");
            }

            return new DeferredAction(action);
        }

        private Timer timer;

        private DeferredAction(Action action)
        {
            this.timer = new Timer(new TimerCallback(delegate
            {
                Deployment.Current.Dispatcher.BeginInvoke(action);
            }));
        }

        public void Defer(TimeSpan delay)
        {
            // Fire action when time elapses (with no subsequent calls).
            this.timer.Change(delay, TimeSpan.FromMilliseconds(-1));
        }
    }

    public void ApplySearchCriteria()
    {
        ICollectionView dataView = this.ViewSource.View;

        string criteria = this.txtSearchCriteria.Text;
        string lowerCriteria = criteria.ToLower();
        using (dataView.DeferRefresh())
        {
            Func<object, bool> filter = word =>
            {
                bool result = word.ToString().ToLower().StartsWith(lowerCriteria);
                return result;
            };

            dataView.Filter = l => { return filter.Invoke(l); };
        }

        this.lstWords.ItemsSource = dataView;                       
        if (this.lstWords.Items.Count != 0)
        {
            this.lblError.Visibility = Visibility.Collapsed;
        }
        else
        {
            this.lblError.Visibility = Visibility.Visible;
        }
    } 
```

# image-processing - 黑莓图像处理（素描效果和炭笔效果）

> ID：10879529
> 
> 赞同：0
> 
> 时间：2012-06-04T10:03:15.130
> 
> 标签：image-processing, blackberry-eclipse-plugin

我是黑莓新手。我正在尝试将普通图像转换为草图效果。我在**ANDROID 中有代码可以做到这一点。** 我试图在黑莓中实现它，但无法得到输出。这是 android 代码和我的黑莓代码。

这是安卓代码-

```
public class ConvolutionMatrix
{
    public static final int SIZE = 3;

    public double[][] Matrix;
    public double Factor = 1;
    public double Offset = 1;

    public ConvolutionMatrix(int size) {
        Matrix = new double[size][size];
    }

    public void setAll(double value) {
        for (int x = 0; x < SIZE; ++x) {
            for (int y = 0; y < SIZE; ++y) {
                Matrix[x][y] = value;
            }
        }
    }

    public void applyConfig(double[][] config) {
        for(int x = 0; x < SIZE; ++x) {
            for(int y = 0; y < SIZE; ++y) {
                Matrix[x][y] = config[x][y];
            }
        }
    }

    public static Bitmap computeConvolution3x3(Bitmap src, ConvolutionMatrix matrix) {
        int width = src.getWidth();
        int height = src.getHeight();
        Bitmap result = Bitmap.createBitmap(width, height, src.getConfig());

        int A, R, G, B;
        int sumR, sumG, sumB;
        int[][] pixels = new int[SIZE][SIZE];

        for(int y = 0; y < height - 2; ++y) {
            for(int x = 0; x < width - 2; ++x) {

                // get pixel matrix
                for(int i = 0; i < SIZE; ++i) {
                    for(int j = 0; j < SIZE; ++j) {
                        pixels[i][j] = src.getPixel(x + i, y + j);
                    }
                }

                // get alpha of center pixel
                A = Color.alpha(pixels[1][1]);

                // init color sum
                sumR = sumG = sumB = 0;

                // get sum of RGB on matrix
                for(int i = 0; i < SIZE; ++i) {
                    for(int j = 0; j < SIZE; ++j) {
                        sumR += (Color.red(pixels[i][j]) * matrix.Matrix[i][j]);
                        sumG += (Color.green(pixels[i][j]) * matrix.Matrix[i][j]);
                        sumB += (Color.blue(pixels[i][j]) * matrix.Matrix[i][j]);
                    }
                }

                // get final Red
                R = (int)(sumR / matrix.Factor + matrix.Offset);
                if(R < 0) { R = 0; }
                else if(R > 255) { R = 255; }

                // get final Green
                G = (int)(sumG / matrix.Factor + matrix.Offset);
                if(G < 0) { G = 0; }
                else if(G > 255) { G = 255; }

                // get final Blue
                B = (int)(sumB / matrix.Factor + matrix.Offset);
                if(B < 0) { B = 0; }
                else if(B > 255) { B = 255; }

                // apply new pixel
                result.setPixel(x + 1, y + 1, Color.argb(A, R, G, B));
            }
        }

        // final image
        return result;
    }
} 
```

以下是我尝试过的黑莓代码-

```
public ConvolutionMatrix(int size) {
        Matrix = new double[size][size];
    }

    public void setAll(double value) {
        for (int x = 0; x < SIZE; ++x) {
            for (int y = 0; y < SIZE; ++y) {
                Matrix[x][y] = value;
            }
        }
    }

    public void applyConfig(double[][] config) {
        for(int x = 0; x < SIZE; ++x) {
            for(int y = 0; y < SIZE; ++y) {
                Matrix[x][y] = config[x][y];
            }
        }
    }

    public static Bitmap computeConvolution3x3(Bitmap src, ConvolutionMatrix matrix) {

        int width = src.getWidth();
        int height = src.getHeight();

        int A, R, G, B;
        int sumR, sumG, sumB;
        int[] argb= new int[width*height];
        int[][]newargb=new int[width][height];
        src.getARGB(argb, 0, width, 0, 0, width, height);
        for(int y=0;y<=height;y++)
        {
            for (int x=0;x<=width;x++)
            {
                System.out.println(""+x);
                System.out.println(""+y);
                newargb[y][x]=argb[width*y+x];
            }
        }

        int[][] pixels = new int[SIZE][SIZE];

        for(int y = 0; y < height - 2; ++y) {

            for(int x = 0; x < width - 2; ++x) {
                // get pixel matrix

                for(int i = 0; i < SIZE; ++i) {

                    for(int j = 0; j < SIZE; ++j) {

                        pixels[i][j] = newargb[x + i][ y + j];
                    }
                }

                A=pixels[1][1];
                sumR = sumG = sumB = 0;
                for(int i = 0; i < SIZE; ++i) {
                    for(int j = 0; j < SIZE; ++j) {
                        A =pixels[i][j] >> 24;
                        R =pixels[i][j]>> 16 & 0xFF;
                        G =pixels[i][j] >> 8 & 0xFF;
                        B =pixels[i][j] & 0xFF;

                        sumR += (R * matrix.Matrix[i][j]);
                        sumG += (G * matrix.Matrix[i][j]);
                        sumB += (B * matrix.Matrix[i][j]);
                    }
                }
                // get final Red
                R = (int)(sumR / matrix.Factor + matrix.Offset);
                if(R < 0) { R = 0; }
                else if(R > 255) { R = 255; }

                // get final Green
                G = (int)(sumG / matrix.Factor + matrix.Offset);
                if(G < 0) { G = 0; }
                else if(G > 255) { G = 255; }

                // get final Blue
                B = (int)(sumB / matrix.Factor + matrix.Offset);
                if(B < 0) { B = 0; }
                else if(B > 255) { B = 255; }

                for(int i = 0; i < SIZE; ++i) {

                    for(int j = 0; j < SIZE; ++j) {

                        pixels[i][j]=(A << 24) | (R << 16) | (G << 8) | B;
                        newargb[x ][ y]=pixels[i][j];
                    }
                }

            }
        }

        for(int y=0;y<=height;y++)
        {
            for (int x=0;x<=width;x++)
            {
                argb[width*y+x]=newargb[y][x];
            }
        }

        src.setARGB(argb, 0, width, 0, 0, width, height);
        return src;
    }
} 
```

安卓和黑莓的通用代码-

```
public Bitmap EmbossImage(Bitmap src) {
        System.out.println("In Emboss Effect Image method");

        double[][] SharpConfig = new double[][] {
                { 0 , -1, 0  },
                { -1, 5, -1 },
                { 0 , -1, 0  }
        };
        ConvolutionMatrix convMatrix = new ConvolutionMatrix(3);
        convMatrix.setAll(0);
        convMatrix.applyConfig(SharpConfig);
        convMatrix.Factor = 1;
            convMatrix.offset=130;
        return ConvolutionMatrix.computeConvolution3x3(src, convMatrix);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:13:36.680

我找到了我自己的问题的答案。我从这个网站找到了卷积相关的代码： [android image processing](http://xjaphx.wordpress.com/learning/tutorials/)。
**请参阅此链接页面的评论部分。**

这是 android 代码。只需通过更改 Color 类方法使其与黑莓兼容。

# wcf - OData WCF 服务突然开始在 .Net 4.0 上返回 404

> ID：10879531
> 
> 赞同：4
> 
> 时间：2012-06-04T10:03:15.817
> 
> 标签：wcf, wcf-data-services, odata

我们在一些客户服务器上运行 OData WCF 服务。在 .Net 3.5 上一切运行良好，但在将我们的解决方案升级到 .Net4 后，WCF 服务突然开始在随机时间间隔（通常是几天）后为所有请求返回 404。

该网站的其余部分运行正常。404 似乎是在网站重新启动后发生的。

为了让它再次工作，我们对 web.config 进行了更改。调用 HttpRuntime.UnloadAppDomain(); 无法解决问题。

我们正在尝试在本地重现该错误，但由于有时需要几天才能发生，因此重现该问题是一个困难的问题。

有什么建议么？

**编辑：**

这是来自服务器事件日志的错误消息：

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
<System>
    <Provider Name="System.ServiceModel 4.0.0.0" />
    <EventID Qualifiers="49154">3</EventID>
    <Level>2</Level>
    <Task>5</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2012-06-02T11:15:32.000000000Z" />
    <EventRecordID>28236</EventRecordID>
    <Channel>Application</Channel>
    <Computer>xxxx-ST-001</Computer>
    <Security UserID="S-1-5-82-3945269471-185734930-3707521103-2442450153-1755958218" />
</System>
- <EventData>
    <Data>System.ServiceModel.Activation.HostedHttpRequestAsyncResult/65092316</Data>
    <Data>System.Web.HttpException (0x80004005): There was no channel actively listening at 'http://11.11.11.11/waf/services/OData.svc'. This is often caused by an incorrect address URI. Ensure that the address to which the message is sent matches an address on which a service is listening. ---> System.ServiceModel.EndpointNotFoundException: There was no channel actively listening at 'http://11.11.11.11/waf/Services/OData.svc'. This is often caused by an incorrect address URI. Ensure that the address to which the message is sent matches an address on which a service is listening. at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result) at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest() at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest() at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result) at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result)</Data>
    <Data>w3wp</Data>
    <Data>1852</Data>
</EventData> 
```

**2012 年 12 月 18 日更新：** 我们能够通过确保在重新启动后对 WCF OData 服务发出的第一个站点请求来在本地重现错误。错误信息：

```
Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

An unhandled exception was generated during the execution of the current web request.    Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   System.Web.Compilation.DiskBuildResultCache.CacheBuildResult(String cacheKey,   BuildResult result, Int64 hashCode, DateTime utcStart) +9508708
   System.Web.Compilation.BuildManager.CacheBuildResultInternal(String cacheKey, BuildResult result, Int64 hashCode, DateTime utcStart) +70
   System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) +9929866
   System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +299
   System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +103
   System.Web.Compilation.BuildManager.GetVPathBuildResult(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean ensureIsUpToDate) +82
   System.Web.Compilation.BuildManager.GetCompiledCustomString(String virtualPath) +29
   System.ServiceModel.HostingManager.GetCompiledCustomString(String normalizedVirtualPath) +164
   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +206
   System.ServiceModel.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity) +52
   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +598

[ServiceActivationException: The service '/ecoodata' cannot be activated due to an exception during compilation.  The exception message is: Object reference not set to an instance of an object..]
   System.Runtime.AsyncResult.End(IAsyncResult result) +495736
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +178
   System.ServiceModel.Activation.ServiceHttpModule.EndProcessRequest(IAsyncResult ar) +348782
   System.Web.AsyncEventExecutionStep.OnAsyncEventCompletion(IAsyncResult ar) +9663393 
```

有人知道这可能是什么吗？

# css - 创建带有对角对齐选项卡的菜单

> ID：10879532
> 
> 赞同：0
> 
> 时间：2012-06-04T10:03:18.540
> 
> 标签：css, menu, tabs

我必须制作一个带有对角对齐标签的菜单。这就是我想要获得的：

![在此处输入图像描述](../Images/3041e9d0f4bed8afc183baea3596fa40.png)

问题是，出于兼容性原因，我不能使用 CSS3。我找到了一个仅使用图像的简单解决方案（使用 jQuery-rotate），但它引发了可访问性问题，所以我想避免它。

使用 CSS 和一点 JS 来做到这一点的最有效方法是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:14:48.957

使用 html `<map>`。它得到广泛支持且易于使用。有关详细信息，请参阅[http://w3schools.com/tags/tag_map.asp](http://w3schools.com/tags/tag_map.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:22:51.817

嘿，现在你可以使用**css3** **变换：旋转**这个导航

像这样

**CSS**

```
 .navi{
    list-style:none;
        margin-top:40px;
    }

    .navi li{
    float:left;
        margin-left:-10px;
    }

    .navi li a{
    background:#000;
        padding:0px 40px;
        line-height:40px;
        display:block;
        color:#fff;
        -moz-transform: rotate(-60deg);
-webkit-transform: rotate(-60deg);
transform: rotate(-60deg);
    } 
```

**HTML**

```
<ul class="navi">
        <li><a href="#">home</a></li>
        <li><a href="#">home</a></li>
        <li><a href="#">home</a></li>
        <li><a href="#">home</a></li>
        <li><a href="#">home</a></li>
        <li><a href="#">home</a></li>
</ul> 
```

现场演示[http://jsfiddle.net/fAkAe/2/](http://jsfiddle.net/fAkAe/2/)

更新演示[http://jsfiddle.net/fAkAe/3/](http://jsfiddle.net/fAkAe/3/)

送给`li margin-left:-xxxx`

# objective-c - UIBarbuttonItem 消失

> ID：10879533
> 
> 赞同：0
> 
> 时间：2012-06-04T10:03:19.343
> 
> 标签：objective-c, ios

我有以下功能，它显示我的应用程序的顶部栏。它由一个图像和一个 UIBarButton 组成。我从 viewWillAppear 中调用它。当我按下当前控制器并移至下一个控制器然后移回主控制器时，右侧的条形按钮消失。请帮忙。

```
-(void)setTopBar
{
    self.navigationController.navigationBar.tintColor =  [UIColor colorWithRed:0.6367 green:0.6367 blue:0.6367 alpha:1.0];
    UIImage *titleImage = [UIImage imageNamed: MAIN_TOPBAR];
    if([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
        //iOS 5 new UINavigationBar custom background
        [self.navigationController.navigationBar setBackgroundImage:titleImage forBarMetrics: UIBarMetricsDefault];
   //     NSLog(@"loading nav items");
        UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"More Apps" style:UIBarButtonItemStylePlain target:self action:@selector(loadFAADAds)];
        rightButton.tag = 11111;
        self.navigationItem.rightBarButtonItem = rightButton;
        [rightButton release];

    } 
    else
    {
        CGRect titleFrame = self.navigationController.navigationBar.frame;
        UIImageView *titleImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, titleFrame.size.width,titleFrame.size.height)];
        [titleImageView setImage:titleImage];
        [titleImageView setTag:TOPBAR_TAG];

       // [self.navigationController.navigationBar sendSubviewToBack:titleImageView];
       // self.navigationItem.titleView = titleImageView;
        UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"More Apps" style:UIBarButtonItemStylePlain target:self action:@selector(loadFAADAds)];

        self.navigationItem.rightBarButtonItem = rightButton;

        //self.navigationController.navigationItem.rightBarButtonItem = rightButton;
        [self.navigationController.navigationBar insertSubview:titleImageView atIndex:0];
        [self.navigationController.navigationBar sendSubviewToBack:self.navigationController.navigationBar];
        [rightButton release];
    }
    [titleImage release];

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T10:09:05.327

```
-(void)setTopBar
{
    self.navigationController.navigationBar.tintColor =  [UIColor colorWithRed:0.6367 green:0.6367 blue:0.6367 alpha:1.0];
    UIImage *titleImage = [UIImage imageNamed: MAIN_TOPBAR];
    if([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
        //iOS 5 new UINavigationBar custom background
        [self.navigationController.navigationBar setBackgroundImage:titleImage forBarMetrics: UIBarMetricsDefault];
   //     NSLog(@"loading nav items");
        UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"More Apps" style:UIBarButtonItemStylePlain target:self action:@selector(loadFAADAds)];
        rightButton.tag = 11111;
        self.navigationItem.rightBarButtonItem = rightButton;
       // [rightButton release];

    } 
    else
    {
        CGRect titleFrame = self.navigationController.navigationBar.frame;
        UIImageView *titleImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, titleFrame.size.width,titleFrame.size.height)];
        [titleImageView setImage:titleImage];
        [titleImageView setTag:TOPBAR_TAG];

       // [self.navigationController.navigationBar sendSubviewToBack:titleImageView];
       // self.navigationItem.titleView = titleImageView;
        UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"More Apps" style:UIBarButtonItemStylePlain target:self action:@selector(loadFAADAds)];

        self.navigationItem.rightBarButtonItem = rightButton;

        //self.navigationController.navigationItem.rightBarButtonItem = rightButton;
        [self.navigationController.navigationBar insertSubview:titleImageView atIndex:0];
        [self.navigationController.navigationBar sendSubviewToBack:self.navigationController.navigationBar];
        //[rightButton release];
    }
//    [titleImage release];

} 
```

# xpages - PostSaveDocument 异步调用代理

> ID：10879535
> 
> 赞同：0
> 
> 时间：2012-06-04T10:03:33.153
> 
> 标签：xpages, asynchronous, xpages-ssjs

我有一个带有单个 Notes 文档数据源的 Xpage 页面。

保存文档后，我想（有条件地）触发代理。代理需要一些时间来处理，我们不希望用户必须等待结果，所以它应该异步执行。

我已经设法通过使用 XHR 到代理 URL 来使其从客户端 JS 工作，但我想在服务器端进行，以便更好地控制“下一页”。使用时`.run()`或`.runonserver()`客户端等待代理完成。

知道如何在没有客户端等待结果的情况下触发 PostSaveDocument 上的代理（来自 SSJS）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:21:53.443

尝试查看 OpenNTF.org 上的 Thread and Jobs 应用程序。在后台运行任务有很好的演示，在[这里查看](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&documentId=8D8FAE13B2660B81862579C6002976F3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:41:49.183

正如 Martin 建议的那样，我在 OpenNtf 上使用了 JobScheduler 示例并对其进行了修改以满足我的需要。生成的代码可以在下面找到。欢迎任何意见或改进。

```
import java.security.AccessController;
import java.security.PrivilegedAction;

import lotus.domino.Agent;
import lotus.domino.Database;

import lotus.domino.NotesException;
import lotus.domino.Session;

import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.core.runtime.IStatus;
import org.eclipse.core.runtime.Status;
import org.eclipse.core.runtime.jobs.IJobChangeEvent;
import org.eclipse.core.runtime.jobs.Job;
import org.eclipse.core.runtime.jobs.JobChangeAdapter;

import com.ibm.domino.xsp.module.nsf.ThreadSessionExecutor;

public class JobRunner {

public static void start(String dbPath, String agentName, String paramDocId) {

    synchronized (JobRunner.class) {

        runningJob = new ISPJob(dbPath, agentName, paramDocId);
        runningJob.addJobChangeListener(new JobChangeAdapter() {
            public void done(IJobChangeEvent event) {
                System.out.println("Done event");
                runningJob = null;
            }
        });
        AccessController.doPrivileged(new PrivilegedAction<Object>() {
            public Object run() {
                runningJob.schedule();
                return null;
            }
        });

    }
}

private static ISPJob runningJob;

private static final class ISPJob extends Job {

    private ThreadSessionExecutor<IStatus> executor;

    private String docId;
    private String dbPath;
    private String agentName;

    public ISPJob(String paramDbPath, String paramAgentName, String paramDocId) {
        super(paramDocId);

        this.docId = paramDocId;
        this.dbPath = paramDbPath;
        this.agentName = paramAgentName;

        this.executor = new ThreadSessionExecutor<IStatus>() {
            @Override
            protected IStatus run(Session session) throws NotesException {

                System.out.println("Job started" + docId);
                System.out.println("   >> Session created: "
                        + session.getUserName() + ", Effective User:"
                        + session.getEffectiveUserName());

                    Database db = session.getDatabase(null,dbPath);

                    if (db != null) {
                        try {
                            if (!db.isOpen()) db.open();
                            if (db.isOpen()) {
                                System.out.println("   >> Database opened: "
                                        + db.getTitle());
                                Agent agent = db.getAgent(agentName);
                                try {
                                    System.out.println("   >> Agent Started: " + agent.getName());
                                    agent.run(docId);
                                    System.out.println("   >> Agent Ran: " + agent.getName());
                                } finally {
                                    agent.recycle();
                                }

                            }
                        } finally {
                            db.recycle();                           
                        }

                }
                System.out.println("Job completed");

                return Status.OK_STATUS;
            }
        };

    }

    protected IStatus run(IProgressMonitor monitor) {
        try {
            return executor.run();
        } catch (Exception ex) {
            return Status.CANCEL_STATUS;
        }
    }
};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:51:21.260

您可以使用启动 Java 线程的会话 bean（因此它不会被破坏）。或者您可以在代码中发出服务器控制台命令。或者你实现一个 DOTS 监听器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T02:35:23.857

这可能/可能不是一个选项，具体取决于您的应用程序要求，但我在 onClientLoad 事件中成功调用函数，这基本上在 XPage 完全加载后启动了该过程。

# kernel - 用户到内核的转换和 XMM 寄存器状态

> ID：10879546
> 
> 赞同：4
> 
> 时间：2012-06-04T10:04:19.713
> 
> 标签：kernel, cpu-registers, windows-kernel, sse

我在内核代码中使用[AES-NI 。](https://software.intel.com/en-us/articles/introduction-to-intel-aes-ni-and-intel-secure-key-instructions#intel-aes-ni)AES 新指令使用 XMM 寄存器，我想确保从用户模式到内核模式的转换以及回到用户模式的转换将保留 XMM 寄存器的状态。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545910(v=vs.85).aspx)如下：

> 在 64 位版本的 Windows 中，操作系统跨线程（和进程）切换保留 SSE 寄存器。结果是 64 位驱动程序代码可以在任何 IRQL 上安全地使用浮点运算。

它是否确认我在调用内核代码时不必保存寄存器状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-11-10T06:02:09.103

它说它保留 SSE 寄存器，但不保留 AVX。

就在链接下面说

> 要在内核模式下使用 AVX 寄存器，驱动程序（x86 和 x64）必须显式保存和恢复 AVX 寄存器。

因此，如果您使用 AES 内在函数，则依赖自动保留的寄存器是安全的`__m128i`，但不是`__m256i`and `__m512i`。

# jquery - Fancybox iframe 并不总是有效。:(

> ID：10879547
> 
> 赞同：0
> 
> 时间：2012-06-04T10:04:24.580
> 
> 标签：jquery, html, iframe, fancybox

我是fancybox (1) 来显示带有 iframe 的弹出式覆盖。它在我单击锚点的地方起作用，而不是进入页面，fancybox 脚本会覆盖命令并强制 iframe 弹出。

```
<a href="iframe.html" class="fancybox.iframe">click here</a> 
```

偶尔会发生的情况是用户会点击链接，但浏览器会转到 iframed 链接并且没有弹出窗口。

有没有办法让元素成为 div 而不是锚点，并给它一个 fancybox 识别的 URL 属性，这样就不会访问 iframed 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:32:22.847

对于 fancybox v1.3.x，您不应在自定义脚本中使用`class="fancybox.iframe"`but`class="iframe"`或 set选项，例如：`"type":"iframe"`

```
$(".iframe").fancybox({
 "type":"iframe",
 "width": 620, //or whatever value you prefer
 "height": 320
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:40:46.130

Fancybox v.2.0.6 怎么样？

这是我的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<link rel="stylesheet" href="css/fancybox/jquery.fancybox.css?v=2.0.6" type="text/css" />
<script type="text/javascript" src="css/fancybox/jquery.fancybox.js?v=2.0.6"></script>

<a class="fancybox fancybox.iframe" href="http://www.....etc></a>

...
<script>
$(document).ready(function() {

    $(".fancybox").fancybox();

});
</script>

</body> 
```

谢谢你！

# android - 带有适配器的 Android GridView

> ID：10879548
> 
> 赞同：0
> 
> 时间：2012-06-04T10:04:31.053
> 
> 标签：android, android-gridview, android-adapter, android-cursor

我试图避免有 5 个带有单独适配器的列表视图，所以我的想法是让 GridView 有 5 列，代表周计划，并将我的 CursorAdapter 附加到它。db 中的每一行都有代表星期几的 dayId。

我担心的是在适配器中填充 GridView。

是否有机会根据游标行中提供的 dayId 将元素设置为特定列，或者我应该在转到适配器之前为对游标行进行排序制定完整的逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:43:28.273

终于设法解决了这个覆盖[CursorAdapter](http://developer.android.com/reference/android/widget/CursorAdapter.html)的 getCount() 和 getView() 方法。

1.  适配器具有游标字段，该字段是在构造函数中提供的游标上获取引用

2.  覆盖 getCount() 以便它可以传递我的逻辑从光标确定的值，而不仅仅是光标大小。

3.  覆盖 getView() 以便它创建空元素并检查该位置是否与光标字段中的一个匹配。如果是，则用数据填充元素，否则将其留空。

# ios - 内存管理 iOS 开发应用程序在一些细节项目后不起作用

> ID：10879550
> 
> 赞同：1
> 
> 时间：2012-06-04T10:04:33.160
> 
> 标签：ios, memory, memory-management, uitableview, core-motion

我正在开发一个带有 tableView 控制器的项目，详细视图包含 CMMotionManager。当我打开 5 或 6 个 detailViews 时一切顺利，但过了一段时间应用程序变慢并最终崩溃。

在仪器上，唯一的泄漏是在 main.m 上，而且我必须说我正在使用 ARC，我无法解除或重新分配实例。

这是代码：首先是表格视图：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    self.title = @"Movement";//Master View Controller title bar
    UIImage *image = [UIImage imageNamed:@"jg_navibar.png"];
    [self.navigationController.navigationBar setBackgroundImage:image      forBarMetrics:UIBarMetricsDefault];

    //Init the array with data
    bodypartsMutableArray = [NSMutableArray arrayWithCapacity:26];

BodypartData *part1 = [[BodypartData alloc] init];
part1.bodypartname = @"Shoulder";
    part1.movementname = @"Flexion";
    part1.fullimageStartingPosition=[UIImage imageNamed:@"2_shoulder_flexion_end_position.jpg"];
    part1.fullimageEndedPosition=[UIImage imageNamed:@"2_shoulder_flexion_end_position.jpg"];
    part1.thumbimage=[UIImage imageNamed:@"1_shoulder_flexion_landmarks_thumb.jpg"];
[bodypartsMutableArray addObject:part1];

.........
} 
```

然后是单元格：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyBasicCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    else {
    BodypartData *part = [self.bodypartsMutableArray objectAtIndex:indexPath.row];
    cell.textLabel.text =[NSString stringWithFormat:part.movementname];
    cell.detailTextLabel.text =[NSString stringWithFormat:part.bodypartname];
    cell.imageView.image =part.thumbimage;
    }
    return cell;
} 
```

和 detailViewdid 加载：

我没有收到错误或警告，什么都没有。就在我加载 6,7 个详细视图时，motionManagers 似乎停止工作.. 只是这个......我可以回到主视图并一次又一次地加载详细项目但运动管理器不起作用。这是我的详细视图的代码

```
@synthesize liveCounterLabel = _liveCounterLabel;
@synthesize resultLabel = _resultLabel;

@synthesize detailItem = _detailItem;
@synthesize imageView = _imageView;
@synthesize calculateButton = _calculateButton;
@synthesize motionManager =_motionManager;
@synthesize selectedImage=_selectedImage;
@synthesize unselectedImage=_unselectedImage;

@synthesize m11started=_m11started;
@synthesize m12started=_m12started;
@synthesize m13started=_m13started;
@synthesize m11ended=_m11ended;
@synthesize m12ended=_m12ended;
@synthesize m13ended=_m13ended;
@synthesize m11=_m11;
@synthesize m12=_m12;
@synthesize m13=_m13;
@synthesize queue=_queue;

@synthesize buttonCounter=_buttonCounter;

#pragma mark - Managing the detail item

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];

    }
}

- (void)configureView
{
    // Update the user interface for the detail item.
    if (self.detailItem) {
        self.imageView.image = [self.detailItem fullimageStartingPosition];
        NSString* longString = [[self.detailItem bodypartname ] stringByAppendingString:    [@" " stringByAppendingString:[self.detailItem movementname]]];
        self.navigationItem.title = [NSString stringWithFormat:longString];
        //Backround Image code
        [[self view] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage     imageNamed:@"background.jpg"]]];
    }
}
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    // Init motionManager object and set the Update Interval
    _buttonCounter=0;

    _motionManager = [[CMMotionManager alloc]init];
    _motionManager.deviceMotionUpdateInterval=1/60; //60 Hz
    [_motionManager startGyroUpdates];

    if (!_queue){
        _queue = [NSOperationQueue mainQueue];
    }

    if (_motionManager.gyroAvailable) {
        _motionManager.gyroUpdateInterval = 1.0/60.0;
        //[_motionManager startDeviceMotionUpdatesToQueue:[NSOperationQueue currentQueue]
         //                                  withHandler: ^(CMDeviceMotion *motion,    NSError *error)
        [_motionManager startDeviceMotionUpdatesToQueue:_queue
                                            withHandler: ^(CMDeviceMotion *motion, NSError *error)

         {
             CMAttitude *attitude = [[CMAttitude alloc] init];
             attitude=motion.attitude;

             //Calculation with rotationMatrix
             _m11 = [NSString stringWithFormat:@"%.02f", attitude.rotationMatrix.m11];
             _m12 = [NSString stringWithFormat:@"%.02f", attitude.rotationMatrix.m12];
             _m13 = [NSString stringWithFormat:@"%.02f", attitude.rotationMatrix.m13];

     }]; 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:10:12.293

您应该检查`dequeueReusableCellWithIdentifier`. 如果它为 nil，则您可能在您不拥有的内存部分中设置属性。

请参考此[文档](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW10)（`dequeueReusableCellWithIdentifier`如果您想跳过章节，请搜索）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:10:15.920

您需要重复使用单元格。

以下是您应该如何正确执行此操作：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyBasicCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    BodypartData *part = [self.bodypartsMutableArray objectAtIndex:indexPath.row];
    cell.textLabel.text =[NSString stringWithFormat:part.movementname];
    cell.detailTextLabel.text =[NSString stringWithFormat:part.bodypartname];
    cell.imageView.image =part.thumbimage;

    return cell;
} 
```

看看我们如何初始化单元格？我们要求 tableview 为我们提供一个在初始化之前已经可用的单元格（这样我们就可以重用同一个单元格并且不会浪费内存来分配新的单元格）。

如果 tableView 没有可用的单元格（它是第一次加载），它将返回 nil，因此如果没有可用的 resubale 单元格，我们将初始化一个新单元格。

# r - R中两列的频率计数

> ID：10879551
> 
> 赞同：30
> 
> 时间：2012-06-04T10:04:34.390
> 
> 标签：r

我在数据框中有两列

```
2010  1
2010  1
2010  2
2010  2
2010  3
2011  1
2011  2 
```

我想计算两列的频率并以这种格式获得结果

```
 y    m Freq
 2010  1 2
 2010  2 2
 2010  3 1
 2011  1 1
 2011  2 1 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-04T10:40:28.637

如果您的数据是`df`带有列的数据框，`y`并且`m`

```
library(plyr)
counts <- ddply(df, .(df$y, df$m), nrow)
names(counts) <- c("y", "m", "Freq") 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-04-19T00:09:20.837

我还没有看到*dplyr*的答案。代码相当简单。

```
library(dplyr)
rename(count(df, y, m), Freq = n)
# Source: local data frame [5 x 3]
# Groups: V1 [?]
#
#       y     m  Freq
#   (int) (int) (int)
# 1  2010     1     2
# 2  2010     2     2
# 3  2010     3     1
# 4  2011     1     1
# 5  2011     2     1 
```

**数据：**

```
df <- structure(list(y = c(2010L, 2010L, 2010L, 2010L, 2010L, 2011L, 
2011L), m = c(1L, 1L, 2L, 2L, 3L, 1L, 2L)), .Names = c("y", "m"
), class = "data.frame", row.names = c(NA, -7L)) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-25T13:40:02.873

@ugh 答案的更惯用的 data.table 版本是：

```
library(data.table) # load package
df <- data.frame(y = c(rep(2010, 5), rep(2011,2)), m = c(1,1,2,2,3,1,2)) # setup data
dt <- data.table(df) # transpose to data.table
dt[, list(Freq =.N), by=list(y,m)] # use list to name var directly 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-04T10:11:51.643

使用`sqldf`：

```
sqldf("SELECT y, m, COUNT(*) as Freq
       FROM table1
       GROUP BY y, m") 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-04T14:23:47.110

如果您有一个包含许多列的非常大的数据框，或者事先不知道列名，那么这样的事情可能会很有用：

```
library(reshape2)
df_counts <- melt(table(df))
names(df_counts) <- names(df)
colnames(df_counts)[ncol(df_counts)] <- "count"
df_counts    

  y    m     count
1 2010 1     2
2 2011 1     1
3 2010 2     2
4 2011 2     1
5 2010 3     1
6 2011 3     0 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-03-05T15:53:27.283

这是一个简单的基本`R`解决方案，使用`table()`and`as.data.frame()`

```
df2 <- as.data.frame(table(df1))
# df2 
     y m Freq
1 2010 1    2
2 2011 1    1
3 2010 2    2
4 2011 2    1
5 2010 3    1
6 2011 3    0

df2[df2$Freq != 0, ]
# output
     y m Freq
1 2010 1    2
2 2011 1    1
3 2010 2    2
4 2011 2    1
5 2010 3    1 
```

**数据**

```
df1 <- structure(list(y = c(2010L, 2010L, 2010L, 2010L, 2010L, 2011L, 
                           2011L), m = c(1L, 1L, 2L, 2L, 3L, 1L, 2L)), .Names = c("y", "m"
                           ), class = "data.frame", row.names = c(NA, -7L)) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-04T23:12:11.557

```
library(data.table)

oldformat <- data.table(oldformat)  ## your orignal data frame
newformat <- oldformat[,list(Freq=length(m)), by=list(y,m)] 
```

# wpf - 仅扩展一个节点

> ID：10879552
> 
> 赞同：0
> 
> 时间：2012-06-04T10:04:56.700
> 
> 标签：wpf, xaml

我正在使用按类别分组的扩展器，并且希望默认仅扩展某些类别。也就是说，我想在向用户呈现窗口之前扩展一些类别。我只找到了如何默认折叠/展开所有类别。

关于如何做到这一点的任何建议？

编辑：

xaml 文件的代码片段：

```
<Expander IsExpanded="False">
 <Expander.Header>
  <DockPanel>
   <TextBlock Grid.Column="2" Text="{Binding Path=Name}" />
  </DockPanel> 
 </Expander.Header>
</Expander> 
```

DockPanel 可能不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:46:25.543

您可以选择使用[Loaded](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded)事件扩展某些类别。如果这是您的扩展器：

```
<Expander Loaded="OnLoad">
   <Expander.Header>
      <TextBlock Text="RightCategory" />
   </Expander.Header>
</Expander> 
```

使用`OnLoad`方法来选择你想要展开的扩展器，例如，[IsExpanded](http://msdn.microsoft.com/en-us/library/system.windows.controls.expander.isexpanded)属性和用于控件的[Header ：](http://msdn.microsoft.com/en-us/library/system.windows.controls.headeredcontentcontrol.header)

```
void OnLoad(object sender, RoutedEventArgs e)
{
    TextBlock tblock = (sender as Expander).Header as TextBlock;

    if (tblock.Text == "RightCategory")
        (sender as Expander).IsExpanded = true;
} 
```

事实上，`Loaded`通常是元素初始化序列中引发的最后一个事件。它总是会在之后提出`Initialized`；当元素布局、渲染并准备好交互时发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:35:56.747

[假设您有一些数据（在数据上下文中），您可以根据这些数据决定是展开还是折叠]

您可以为此使用样式：

```
<Expander ...>
    <Expander.Style>
        <Style TargetType="{x:Type Expander}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ShouldExpand}" Value="True">
                    <Setter Property="IsExpanded" Value="True"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Expander.Style>
</Expander> 
```

# javascript - RadioButtonList 更改表格的可见性

> ID：10879553
> 
> 赞同：0
> 
> 时间：2012-06-04T10:04:57.600
> 
> 标签：javascript, asp.net

我有一个单选按钮列表。

```
<asp:RadioButtonList ID="ChangeVisibilityRadioButtonList" runat="server"
 TextAlign="Right" RepeatDirection="Horizontal" CssClass="cb">
</asp:RadioButtonList> 
```

在代码部分，

```
 ChangeVisibilityRadioButtonList.Items.Add(new ListItem("Visible", "visible"));
        ChangeVisibilityRadioButtonList.Items.Add(new ListItem("Hidden", "hidden"));
        ChangeVisibilityRadioButtonList.SelectedIndex = 0; 
```

这是我的桌子，

```
<table align="center" runat="server" id="OdemeTable" visible="false">
     <tr>
          <td>
              Hello world!
          </td>
     </tr>
</table> 
```

如果我从 RadioButtonList 中选择可见选项，我希望 OdemeTable 动态显示，但如果从 RadioButtonList 中隐藏选择，则 OdemeTable 应该消失。如何使用 javascript 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:40:48.613

你可以使用 jQuery：

```
<head runat="server">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>

<form id="form1" runat="server">
     <script type="text/javascript">
        $(document).ready(function () {
            $('#ChangeVisibilityRadioButtonList').click(function () {
                if ($("#ChangeVisibilityRadioButtonList input:radio:checked").val() == 'hidden') {
                    document.getElementById('OdemeTable').style.display = "none";
                }
                else {
                    document.getElementById('OdemeTable').style.display = "";
                }
            });
        }); 
    </script>

    <asp:RadioButtonList ID="ChangeVisibilityRadioButtonList" runat="server"
        TextAlign="Right" RepeatDirection="Horizontal" CssClass="cb">
        <asp:ListItem Text="Visible" Value="visible"></asp:ListItem>
        <asp:ListItem Text="Hidden" Value="hidden"></asp:ListItem>
    </asp:RadioButtonList>
    <table align="center" id="OdemeTable" style="display:none" >
     <tr>
          <td>
              Hello world!
          </td>
     </tr>
    </table>    
</form> 
```

请注意，您不应该`Visible=false`默认在服务器端制作表格，因为这意味着它根本不会在客户端呈现。因此，您将无法使其可见。因此我使用了`style="display:none"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:59:19.920

这是代码

Javascript

```
function HideTable() {
            var RB1 = document.getElementById("<%=ChangeVisibilityRadioButtonList.ClientID%>");
            var radio = RB1.getElementsByTagName("input");

            var tbl = document.getElementById("<%=OdemeTable.ClientID%>");

            var selval;

            for (var i = 0; i < radio.length; i++) {
                if (radio[i].checked) {
                    selval = radio[i].value; 
                }
            }

            if (selval == 'Visible') {
                document.getElementById("<%=OdemeTable.ClientID%>").style.display = '';
            }
            else {
                document.getElementById("<%=OdemeTable.ClientID%>").style.display = 'none';
            }

        } 
```

ASPX

```
<asp:RadioButtonList ID="ChangeVisibilityRadioButtonList" runat="server" onchange="HideTable();" TextAlign="Right"
                    RepeatDirection="Horizontal" >
                    <asp:ListItem Value="Visible" Text="Visible"></asp:ListItem>
                    <asp:ListItem Value="Hidden" Text="Hidden"></asp:ListItem>
                </asp:RadioButtonList>
                <table align="center" runat="server" id="OdemeTable">
                    <tr>
                        <td>
                            <b>Hello world!</b>
                        </td>
                    </tr>
                </table> 
```

# windows-phone-7.1 - 如何在 windows phone 中后台进程的不同执行之间保持值？

> ID：10879555
> 
> 赞同：0
> 
> 时间：2012-06-04T10:05:00.110
> 
> 标签：windows-phone-7.1, background-process

我有一个每隔一小时运行一次的定期任务。这个任务第一次运行时，它会产生一些值。当任务下次运行时，我需要访问这个值。我怎样才能做到这一点，最好的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:20:12.577

实现此目的的一种方法是将数据保存在[独立存储中](http://msdn.microsoft.com/en-us/library/ff402541%28v=VS.92%29.aspx)

这是一个[快速入门指南](http://create.msdn.com/en-US/education/quickstarts/Isolated_Storage)，可助您一臂之力。

储蓄的基本原则：

```
IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;
// txtInput is a TextBox defined in XAML.
if (!settings.Contains("userData"))
{
settings.Add("userData", txtInput.Text);
}
else
{
settings["userData"] = txtInput.Text;
}
settings.Save(); 
```

并检索：

```
if (IsolatedStorageSettings.ApplicationSettings.Contains("userData"))
{
txtDisplay.Text +=
IsolatedStorageSettings.ApplicationSettings["userData"] as string;
} 
```

# android - 通过与 Android 服务通信。两个不同的来电者

> ID：10879558
> 
> 赞同：0
> 
> 时间：2012-06-04T10:05:19.923
> 
> 标签：android, service

我有一个长期运行的服务，它由应用程序的主要活动启动和停止，但是我也可以通过警报更新该服务。

我相信我在某处读到过，您在任何时候都只能运行一个服务实例，那么我可以从活动和警报恢复器*启动服务吗？*如果是这样，GC 是否会处理服务的旧实例，或者在第二次调用*启动*同一个实例时它们没有*旧实例？*

 *谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:22:45.330

我假设您使用的是启动服务而不是绑定服务。当您第一次调用`startService()`时，服务被“创建”（即，`onCreate()`）被调用。之后，任何时候调用`startService()`，`onStartCommand()`都会调用 。

所以是的 - 服务的单个实例随时运行。您可以只`startService()`从 the`Activity`和 the调用，`AlarmReceiver`并且 Intent 将被传递到`Service`如果它已经创建；否则`Service`创建，然后`Intent`交付给它。*

# java - java-如何不断等待事件发生

> ID：10879562
> 
> 赞同：5
> 
> 时间：2012-06-04T10:05:38.910
> 
> 标签：java

我正在创建一个应用程序，其中有多个阶段 - 对于每个阶段，一条消息都会发送到我在 Amazon 简单工作流 (SWF) 中的队列......该应用程序应该为收到的每条消息启动一个新线程。

如何实现等待部分 - 以便应用程序不断扫描队列中的新消息并在收到消息时采取行动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:25:06.503

您所问的称为生产者-消费者模型，您可以[在此处阅读有关它的信息](http://en.wikipedia.org/wiki/Producer-consumer_problem)

基本思想：站点是生产者，而您作为客户是消费者。

你 wait() 直到监听器收到一条消息，然后 notifAll()

```
 class WaitForAmazon{
    private boolean available = false;
    private int contents;

    public synchronized int consumer() {
        while (available == false) {
            try {
                wait();
            } catch (InterruptedException e) { }
        }
        available = false;
        notifyAll();
        return contents;
    }

    public synchronized void producer(int value) {
        while (available == true) {
            try {
                wait();
            } catch (InterruptedException e) { }
        }
        contents = value;
        available = true;
        notifyAll();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T10:50:06.057

`BlockingQueue`它的实现`LinkedBlockingQueue`在这里很有用。

何时`Thread`需要`take`通过调用从队列中获取某些内容

```
queue.take() 
```

并且队列将为空，这样的线程将等待直到其他线程通过调用将某些内容放入队列

```
queue.put(something). 
```

此外，如果队列已满，`queue.put()`将使线程等待，直到队列中有空间容纳新元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:08:05.023

您可以做的一种方法是`poll`直到`queue`您在`while loop`机制中收到新消息。一旦您收到新消息，您就可以调用自己的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T10:08:39.773

使用服务器套接字：

[服务器套接字](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html)

特别是， .accept() 方法等待某人要求连接。然后，您可以实例化一个新线程，传递维护连接所需的参数（地址、端口等）。

# php - 无限父子节点列表

> ID：10879568
> 
> 赞同：0
> 
> 时间：2012-06-04T10:06:05.790
> 
> 标签：php, mysql

我不知道该给它贴上什么标签，所以我们开始吧。

我有一个表格，其中包含用户发送的消息。发送的第一条消息是父消息，之后的每条消息都是回复。然而，回复可以有回复，回复回复也可以有回复......等等。表结构为：

```
message_id   message   reply_messages_id
1            abc       0 (this means its the parent)
2            def       1 (reply to message_id 1)
3            ghi       2 (reply to message_id 2)
4            jkl       1 (another reply to message_id 1)
5            mno       3 (reply to message_id 3)
6            pqr       0 (another parent)
7            stu       6 (reply to message_id 6) 
```

我正在努力解决的问题是我试图将输出显示为：

```
abc
- def
  - ghi
    - mno
- jkl
pqr
- stu 
```

另一件事是我不知道回复可以深入多少层，因为用户可以继续回复回复。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:40:17.050

大约一周前，我几乎只回答了一个与此类似的问题……它将输出生成为包含缩进的存储过程……原理几乎相同，只是数据的列名略有变化。

[发布了其他答案](https://stackoverflow.com/questions/10688608/mysql-output-in-tree-format-or-adding-level-parent-child/10774455#10774455)

# ios - 用户移动时如何计算用户位置到注释的距离

> ID：10879579
> 
> 赞同：7
> 
> 时间：2012-06-04T10:07:03.993
> 
> 标签：ios, xcode, annotations, distance

我有一个用户位置（蓝点）和注释`mapView`。选择注释时，我将文本设置为`distLabel`- “到点的距离 %4.0f m.”。用户移动时如何更新该文本标签？

didSelectAnnotationView：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{

    CLLocation *pinLocation = 
      [[CLLocation alloc] initWithLatitude:
                        [(MyAnnotation*)[view annotation] coordinate].latitude 
                                 longitude:
                        [(MyAnnotation*)[view annotation] coordinate].longitude];
    CLLocation *userLocation = 
      [[CLLocation alloc] initWithLatitude:
                          self.mapView.userLocation.coordinate.latitude             
                                 longitude:
                                 self.mapView.userLocation.coordinate.longitude];        
    CLLocationDistance distance = [pinLocation distanceFromLocation:userLocation];

    [distLabel setText: [NSString stringWithFormat:@"Distance to point %4.0f m.",    
                                                     distance]];
} 
```

我知道有一个功能`didUpdateToLocation`，但我该如何使用它`didSelectAnnotationView`呢？

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
  //Did update to location
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T12:55:24.263

地图视图有一个`selectedAnnotations`属性，您可以在`didUpdateToLocation`方法中使用该属性来告诉从哪个注释获取距离。

（顺便说一句，如果您使用的是地图视图`userLocation`，您可能希望使用地图视图的`didUpdateUserLocation`委托方法，而不是`didUpdateToLocation`委托`CLLocationManager`方法。）

在委托方法中，您可以检查当前是否有任何选定的注释，如果有，则显示到该注释的距离（否则说“未选择注释”）。

您可能希望编写一个可以从两者调用的通用方法`didSelectAnnotationView`并`didUpdateUserLocation`减少代码重复。

例如：

```
-(void)updateDistanceToAnnotation:(id<MKAnnotation>)annotation
{
    if (annotation == nil) 
    {
        distLabel.text = @"No annotation selected";
        return;
    }

    if (mapView.userLocation.location == nil) 
    {
        distLabel.text = @"User location is unknown";
        return;
    }

    CLLocation *pinLocation = [[CLLocation alloc] 
        initWithLatitude:annotation.coordinate.latitude
               longitude:annotation.coordinate.longitude];

    CLLocation *userLocation = [[CLLocation alloc] 
        initWithLatitude:mapView.userLocation.coordinate.latitude 
               longitude:mapView.userLocation.coordinate.longitude];

    CLLocationDistance distance = [pinLocation distanceFromLocation:userLocation];

    [distLabel setText: [NSString stringWithFormat:@"Distance to point %4.0f m.", distance]];
}

-(void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    if (mapView.selectedAnnotations.count == 0)
        //no annotation is currently selected
        [self updateDistanceToAnnotation:nil];
    else
        //first object in array is currently selected annotation
        [self updateDistanceToAnnotation:[mapView.selectedAnnotations objectAtIndex:0]];
}

- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{    
    [self updateDistanceToAnnotation:view.annotation];
} 
```

# android - 如何在 4.0.3 中支持不同的分辨率？

> ID：10879580
> 
> 赞同：0
> 
> 时间：2012-06-04T10:07:08.790
> 
> 标签：android, android-layout

我在 4.0.3 中准备了一份申请。我的应用程序支持所有分辨率，为此我准备了不同的布局，例如，

```
 layout-hdpi
  layout-land-hdpi
  layout-large-port
  layout-large-land
  layout-xlarge-port
  layout-xlarge-land 
```

当我在 1024x600 中以 240 密度运行我的应用程序时，它正在使用 layout-hdpi 文件，当我在 1280x800 中以 160 密度运行应用程序时，它正在使用 layout-large 文件。请告诉我如何解决这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:20:52.103

您可以使用[平板电脑的修饰符](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)。这允许使用诸如“layout-sw600dp”或“layout-w1024dp”之类的文件夹。使用这种格式创建文件夹并将您的资源放在相应的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:29:54.327

[使用您的说明符，您可以使用 ldpi、mdpi、hdpi、xhdpi 或按文档](http://developer.android.com/guide/practices/screens_support.html#range)中指定的实际屏幕尺寸（小、大、xlarge）按设备密度（即：每英寸像素）过滤设备。正如最近所说，您还可以通过最小分辨率（又名最小宽度：sw600dp）限定符来提供资源。

根据 [the documentation]，如果您给出多个限定符，则必须按特定顺序给出它们。

最后，当您请求资源时，Android 会尝试找到[最佳匹配](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)，首先通过消除不适用于当前设备的资源，按照之前定义的顺序依次评估一个限定符。

# c# - 将形状添加到全局区域，而不是果园的本地区域

> ID：10879582
> 
> 赞同：3
> 
> 时间：2012-06-04T10:07:15.740
> 
> 标签：c#, orchardcms

**简而言之问题：**

我创建了一个新的内容部分，并希望在另一个区域 LeftPanel 中显示它，该区域位于主内容区域之外。这不起作用，因为看起来我只能将内容部分添加到内容区域内的本地区域。如何将内容部分添加到页面上的不同区域？

**更长的解释：**

我们的团队创建了一个新的 Orchard 网站并为其创建了布局。有几个可用的区域，其中大部分在所有页面上都可见。这些是主题中可用的所有区域：

`Zones: Header, Navigation, Content, LeftPanel, RightPanel, Toolbar, Messages, Address, Footer, Copy`

我创建了一个新的内容部分并将其附加到内容类型页面。使用此内容部分，可以将横幅添加到页面。实现相当简单，当我将它们放在内容区域时，一切似乎都正常工作。

我放在Driver中的相关代码如下：

```
protected override DriverResult Display(BannerPart part, string displayType, dynamic shapeHelper)
{
return ContentShape("Parts_Banner", 
                        () => shapeHelper.Parts_Banner(
                                    FirstImageTitle: part.FirstImageTitle,
                                    FirstImageLocation: part.FirstImageLocation,
                                    FirstImageNavigationUrl: part.FirstImageNavigationUrl,
                                    SecondImageTitle: part.SecondImageTitle,
                                    SecondImageLocation: part.SecondImageLocation,
                                    SecondImageNavigationUrl: part.SecondImageNavigationUrl,
                                    ThirdImageTitle: part.ThirdImageTitle,
                                    ThirdImageLocation: part.ThirdImageLocation,
                                    ThirdImageNavigationUrl: part.ThirdImageNavigationUrl
                                    ));
} 
```

在placement.info 文件中有以下文本：

```
<Placement>
    <Place Parts_Banner="Content:before"/>
    <Place Parts_Banner_Edit="Content:7"/>
</Placement> 
```

这会将（内容部分的）横幅放在内容之前。

但是，我希望在`LeftPanel`区域中呈现内容部分。将placement.info 更改为以下内容：

```
<Placement>
    <Place Parts_Banner="LeftPanel:1"/>
    <Place Parts_Banner_Edit="Content:7"/>
</Placement> 
```

似乎没有任何效果，它不再呈现在页面上。

在对这个问题进行了一些研究之后，我偶然发现了[Bertrand Le Roy 的博客文章，它与亚马逊的“立即购买”部分做了类似的事情](http://weblogs.asp.net/bleroy/archive/2011/03/26/dispatching-orchard-shapes-to-arbitrary-zones.aspx)。

我玩过`IWorkContextAccessor`，但没有成功将 contentpart 放置在`LeftPanel`区域中。以下代码不起作用：

```
protected override DriverResult Display(BannerPart part, string displayType, dynamic shapeHelper)
{
    var shape = shapeHelper.Parts_Banner(
        FirstImageTitle: part.FirstImageTitle,
        FirstImageLocation: part.FirstImageLocation,
        FirstImageNavigationUrl: part.FirstImageNavigationUrl,
        SecondImageTitle: part.SecondImageTitle,
        SecondImageLocation: part.SecondImageLocation,
        SecondImageNavigationUrl: part.SecondImageNavigationUrl,
        ThirdImageTitle: part.ThirdImageTitle,
        ThirdImageLocation: part.ThirdImageLocation,
        ThirdImageNavigationUrl: part.ThirdImageNavigationUrl
        );

    _workContextAccessor.GetContext().Layout["LeftPanel"].Add(shape, 10);

    return new DriverResult();
} 
```

似乎 Clay 正在创建一个具有空属性的新（区域？）对象。不知何故，果园找不到这个区域。我怀疑它与**global zone**和**local zone**有关，但我当然可能是错的。

枚举区域也不起作用，因为它没有 GetEnumerator() 方法，这将创建一个异常。

```
foreach (var zone in _workContextAccessor.GetContext().Layout.Zones)
{
    _workContextAccessor.GetContext()
                        .Layout.Zones[zone]
                        .Add(shape, 1);
} 
```

我可能从 Bertrand 的帖子中遗漏了一些东西。我看到他正在创建一个具有 Zones 属性并使用它的模型，但我无法弄清楚它应该如何工作（即使在查看了他在博客文章中提供的解决方案之后）

内容模板如下所示：

```
<article class="content-item @contentTypeClassName">
    <header>
        @Display(Model.Header)
        @*@if (Model.Meta != null) {
        <div class="metadata">
            @Display(Model.Meta)
        </div>
        }*@
    </header>
    @Display(Model.Content)
    @if(Model.Footer != null) {
    <footer>
        @Display(Model.Footer)
    </footer>
    }
</article> 
```

我发现当我修改`placement.info`以使用`Content`or`Footer`区域时，它似乎正在工作。然而，这不是很正确。当我使用该`Footer:before`符号时，它将横幅`<footer>`放在`Content`区域之前，而不是在实际`Footer`区域之前，它位于`Content`区域之外。

关于如何解决此问题的任何建议或解决方案，以便我可以将此内容部分放置到页面上的不同区域？

# mysql - 提供带有选择查询的列表

> ID：10879585
> 
> 赞同：0
> 
> 时间：2012-06-04T10:07:41.200
> 
> 标签：mysql

所以我有一个名为 Medics 的表，其中包含姓名、姓氏和专业。专科总数17个，医生108个。

> 专长：reumatologie、orl、chirurgie、neurolog 等

我需要提供一个查询来给我这种格式的列表：

> reumatologie - 5, orl - 4, chirugie - 10

其中 5、4 和 10 是表中的医生人数。这更像是在专业 reumatologie 中说，我们有 5 名医生对应于那种专业。

我已经尝试过这种连接，以及更多其他选择，但它们都没有正常工作。我在想也许它会与一个案例一起工作？如果是，如何？

最终有效的选择查询是：

> 选择 Speciality, Count(distinct m_id) as NRofMedics from Medics group by Speciality;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:19:19.457

试试这个：

```
select Speciality || '-' || count(distinct name) as 'Med with Speciality' 
from Medics group by speciality 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:20:16.500

@lanzz 是对的。但是，请尝试以下操作 -

```
select Speciality, Count(distinct name) 
from Medics 
group by Speciality 
```

希望这可以帮助。

# ruby-on-rails - bundle exec rake assets:precompile - 数据库配置未指定适配器

> ID：10879587
> 
> 赞同：10
> 
> 时间：2012-06-04T10:07:52.347
> 
> 标签：ruby-on-rails, postgresql

经过 24 小时试图找到我的应用程序的问题。我终于找到了问题所在。

我跑了

```
rake assets:precompile RAILS_ENV=production 
```

我不断收到这个错误。

```
/Users/vezu/.rvm/rubies/ruby-1.9.3-p194/bin/ruby /Users/vezu/.rvm/gems/ruby-1.9.3-p194@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
database configuration does not specify adapter

Tasks: TOP => environment
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/Users/vezu/.rvm/rubies/ruby-1.9.3-p194/bi...] 
```

我的 database.yml 文件看起来像这样

```
development:
  adapter: postgresql
  host: localhost
  encoding: unicode
  database: ndoda_development
  pool: 5
  username:
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: ndoda_test
  pool: 5 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-04T10:07:52.613

简单的解决方案是在我的 application.rb 中添加一个简单的行

```
config.assets.initialize_on_precompile = false 
```

一切正常。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-30T04:09:25.493

这应该有效：rake assets:precompile RAILS_ENV=development

当您的 database.yml 不包含它时，它会尝试加载您的生产环境。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-16T20:30:44.573

做这个：

```
development:
  adapter: postgresql
  host: localhost
  encoding: unicode
  database: ndoda_development
  pool: 5
  username:
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: ndoda_test
  pool: 5

# Add the below...

production:
  adapter: postgresql
  host: localhost
  encoding: unicode
  database: ndoda_production
  pool: 5
  username:
  password: 
```

Heroku 会用它自己的版本覆盖你的 database.yml，不管你在里面放了什么。**但是**，在生产环境中运行的 rake 任务需要一个变量，所以给它一个虚拟变量。

如上所述，您还可以将“config.assets.initialize_on_precompile = false”添加到您的 production.rb。如果设置，Heroku 要求将其设置为“假”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-18T23:59:51.517

该解决方案停止使用 rails 4，这是更新后的解决方案：只需传递本文中提到的虚拟数据库：

[https://iprog.com/posting/2013/07/errors-when-precompiling-assets-in-rails-4-0](https://iprog.com/posting/2013/07/errors-when-precompiling-assets-in-rails-4-0)

命令是： bundle exec rake RAILS_ENV=production DATABASE_URL=postgresql://user:pass@127.0.0.1/dbname assets:precompile

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-29T16:44:49.000

对我有用的是：

`rake assets:precompile RAILS_ENV=production`

通过 ssh 访问您的服务器并输入该命令，它应该可以解决问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-18T12:19:35.460

确保您的本地文件中有一些**虚拟** `production`条目`config/database.yml`

```
production:
  <<: *default
  database: your_local_database_name 
```

我在 2016 年使用 Rails 4.2.6 和 Capistrano 3.4 遇到了同样的错误。在将资产与代码一起上传之前，我们在部署脚本期间对资产进行了预编译，但是 rake assets:precompile 需要一些生产条目，即使它只是一个虚拟条目。来源：[https ://github.com/TalkingQuickly/capistrano-3-rails-template/issues/12](https://github.com/TalkingQuickly/capistrano-3-rails-template/issues/12)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-10-17T17:14:04.650

称呼`rake assets:precompile:all`

# certificate - 重新创建 vmware esxi 服务器的自签名证书

> ID：10879590
> 
> 赞同：-1
> 
> 时间：2012-06-04T10:07:55.583
> 
> 标签：certificate, vmware-workstation, esxi

我已经在我机器上的 vmware 工作站中安装了 vmware esxi 服务器。

一般dhcp配置需要一个ip地址。有服务器认证。也就是说调用服务器`https://10.100.13.36`是我们应该使用的格式。

我们可以重新创建该服务器的证书吗？（因为每个 vmware 服务器都使用相同的证书..我猜）我的机器 IP 地址是 10.100.13.113 我们可以从我的机器重新创建证书（即从 10.100.13.113）（java 程序或使用任何其他工具）

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:31:16.410

在 vmware 社区建议的帮助下，我自己得到了这个解决方案。
一般来说，如果我们想更改证书，我们有很多方法可以做。
但简单的方法是`/sbin/generate-certificates.sh`执行。

一旦我们这样做了，证书的再生就会发生。要使更改生效，请使用以下命令重新启动机器`reboot`

要更改私钥的密钥长度，

```
chmod 777 generate-certicates.sh
vi generate-certificates.sh 
```

键入`i`并转到提到密钥长度的行。更改为 1024。
要设置密码，请更改`encrypt key :no`为`encrypt key: yes`

`esc`

要关闭 vi 并保存更改，请键入`:x`

然后转到初始根目录并通过键入`/sbin/generate-certificates.sh` Then执行`reboot`

# android - 如何从 JSON 数组将数据加载到自定义 Listview

> ID：10879592
> 
> 赞同：2
> 
> 时间：2012-06-04T10:07:59.103
> 
> 标签：android, android-intent

我已经像这样从 JSON 数组将数据加载到普通列表视图

```
 JSONArray jArray = new JSONArray(result);       
 final String[] array_spinner = new String[jArray.length()];
 for(int i=0;i<jArray.length();i++){
     JSONObject json_data = jArray.getJSONObject(i);
     String jj=json_data.getString("f_name");
     array_spinner[i] = jj;
 }
 ArrayAdapter<String> adapter = new ArrayAdapter<String> (this,  android.R.layout.simple_list_item_1,array_spinner); adapter.setDropDownViewResource(android.R.layout.simple_list_item_1);
 //adapter.setDropDownViewResource(R.layout.spinner_layout);
 list.setAdapter(adapter); 
```

我想将数据加载到自定义列表视图。我的自定义列表视图的 XML 文件是这个 receiver.xml

如何从 JSON 将数据加载到自定义列表视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T10:12:34.827

*   创建一个扩展 BaseAdpter 或 ArrayAdpter 的自定义适配器，并在构造函数中传递数组或 ArrayList
*   在（行的）布局中创建视图
*   在自定义Adapter的getView函数中膨胀这个xml并设置数据

如在

[http://www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/](http://www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/)

[从 JSON 填充 Listview](https://stackoverflow.com/questions/6277154/populate-listview-from-json)

为了你，我混合了两者让你明白......

活动 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >
<ListView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/lstText"
    />
</LinearLayout> 
```

列表行 XML（在布局 row.xml 中）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

        <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/txtAlertText" />

    </LinearLayout>
</LinearLayout> 
```

你适配器类

```
class JSONAdapter extends BaseAdapter implements ListAdapter {

    private final Activity activity;
    private final JSONArray jsonArray;
    private JSONAdapter (Activity activity, JSONArray jsonArray) {
        assert activity != null;
        assert jsonArray != null;

        this.jsonArray = jsonArray;
        this.activity = activity;
    }

    @Override public int getCount() {
        if(null==jsonArray) 
         return 0;
        else
        return jsonArray.length();
    }

    @Override public JSONObject getItem(int position) {
         if(null==jsonArray) return null;
         else
           return jsonArray.optJSONObject(position);
    }

    @Override public long getItemId(int position) {
        JSONObject jsonObject = getItem(position);

        return jsonObject.optLong("id");
    }

    @Override public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null)
            convertView = activity.getLayoutInflater().inflate(R.layout.row, null);

        TextView text =(TextView)convertView.findViewById(R.id.txtAlertText);

                    JSONObject json_data = getItem(position);  
                    if(null!=json_data ){
                    String jj=json_data.getString("f_name");
                    text.setText(jj); 
                   }

         return convertView;
    }
} 
```

你的活动

```
public class main extends Activity {
    /** Called when the activity is first created. */

    ListView lstTest;
    //Array Adapter that will hold our ArrayList and display the items on the ListView
    JSONAdapter jSONAdapter ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //Initialize ListView
        lstTest= (ListView)findViewById(R.id.lstText);

        jSONAdapter = new JSONAdapter (main.this,jArray);//jArray is your json array 

        //Set the above adapter as the adapter of choice for our list
        lstTest.setAdapter(jSONAdapter );

} 
```

# javascript - IE 不会在输入和选项卡上选择时触发更改事件

> ID：10879594
> 
> 赞同：2
> 
> 时间：2012-06-04T10:08:08.550
> 
> 标签：javascript, html, internet-explorer, internet-explorer-8, internet-explorer-6

我有一个代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready( function() {
            $("#my_select").change(function(e){alert(e);})
            $("#my_select").focus();
        });
    </script>   
  </head>
  <body>
    <select id="my_select">
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
    <input />
  </body>
  </html> 
```

在 IE 中打开，选择将成为焦点，使用向上/向下/字母键盘按钮选择任何数字，然后按 enter/tab 键不会触发警报。为什么？？？？

PS：是的，jquery 版本很旧，我知道，但我现在无法切换到新版本。
PS2：IE8 和 IE6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:49:24.917

它可能不会在模糊（输入/选项卡）上触发，因为它已经在向上或向下箭头上触发了——在 IE9 中尝试它时它就是这样做的。

IE（也是 Opera）在处理元素`change`事件方面一直是“错误的” ： [http ://www.quirksmode.org/dom/events/change.html#t05](http://www.quirksmode.org/dom/events/change.html#t05)`<select>`

另请注意，jQuery 1.4.2 和旧版本 IE 之间的问题可能会导致此问题，因为报告了 1.4.2 的一些错误并在 1.4.3 中修复：[#6374](http://bugs.jquery.com/ticket/6374)和[#6956](http://bugs.jquery.com/ticket/6956)。

# html - 如何从 iOS 上的已解析文本中删除 html 标签？

> ID：10879608
> 
> 赞同：0
> 
> 时间：2012-06-04T10:09:34.830
> 
> 标签：html, ios, parsing, tags

我正在解析文本并将其存储在 NSString 变量中。但是，当我尝试在屏幕上显示 NSString 时，我可以在文本中看到 html 标签，例如：`<br>`。如何从我的文本中删除此标签并将其替换为空格或其他内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T10:16:08.513

```
NSString *str = @"This is<br>a string";

str = [str stringByReplacingOccurrencesOfString:@"<br>" withString:@""]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:13:25.450

```
-(NSString *) stringByStrippingHTML {
    NSRange myRange;
    NSString *myString = [[self copy] autorelease];
    while ((myRange = [myString rangeOfString:@"<br>" options:NSRegularExpressionSearch]).location != NSNotFound)
    myString = [s stringByReplacingCharactersInRange:myRange withString:@""];
    return myString; 
} 
```

# hadoop - DynamoDB 或 Hive 用于数据转储处理

> ID：10879612
> 
> 赞同：2
> 
> 时间：2012-06-04T10:09:52.427
> 
> 标签：hadoop, amazon-web-services, hive

我有大数据转储。计划使用批量插入上传 AWS DynamoDB。哪种流量选项具有成本效益：

1.  大数据 (GiB) -> 批量插入到 DynamoDB -> 查询分析
2.  大数据 (GiB) -> AWS S3 -> 创建 Hive 表映射 -> EMR Hive 查询以进行分析 [不使用 Dynamo DB]

在 DynamoDB 中，如果从 EMR 或 EC2 访问，是否有任何吞吐量限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T13:54:16.363

这在很大程度上取决于您在 Hive 中尝试优化的内容（如果有的话）。如果您想使用 ORC 文件，那么您可能需要稍微了解一下 DynamoDB。ORC 文件要求您双重加载数据。首先，您必须将数据加载到临时表中。然后您必须从该阶段进行选择并插入到 ORC 文件表中。这有效地使您携带数据两次。

如果您不打算优化数据加载，那么您可能需要更多地查看@seedhead 的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:56:20.860

无需为此使用 DynamoDB。选择选项 2 并将您的数据上传到 S3，然后进行 Hive 查询。

EMR 将使用多少 DynamoDB 读取容量存在可配置限制。

# ios - 在滚动视图中添加按钮 --> 启动时不会加载视图

> ID：10879618
> 
> 赞同：2
> 
> 时间：2012-06-04T10:10:33.603
> 
> 标签：ios, uiscrollview, uibutton

我是 Iphone 开发的新手，我有一个非常基本的问题，我还找不到任何答案：

我的目标是在 TabbarApplication 中有一个 ScrollView，并在滚动视图的页面上有几个具有不同功能的按钮。我在 TabBar 中下载了一些 ScrollView 的示例代码，但是我在视图中添加了一个按钮，该按钮应该显示为 Scroll Views 第一页（除了有标签和那个按钮之外它是空的）它的内容不会出现了，直到第一次单击/滚动尝试。

我想发布一些代码..但除了 IB 自动生成的东西之外，基本上没有。我所做的只是通过 IB 在 .xib 中添加一个 Button 并将其连接到 IBAction 和瞧：东西不会显示；）

提前感谢您的帮助，

阿恩

**编辑**：为了澄清事情，按钮和标签本身工作正常，但仅在第一次滚动尝试*后显示。*在我向项目添加按钮之前（只是一个带有标签的页面），标签从应用程序的开始就显示出来了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:54:22.723

我推荐以下内容：

*   将滚动视图背景更改为一种颜色（即[UIColor redColor]）
*   通过以下方式仔细检查代码是否具有按钮的 IBOutlet：

.h 文件

```
@property (nonatomic, retain) UIButton* myButton; 
```

.m 文件

```
@synthesize myButton; 
```

*   仔细检查 XIB 文件中的按钮是否已添加到滚动视图中，以及 IBOutlet 是否已连接到代码。

*   要调试它，请在 viewController 的 viewWillAppear 方法中放置一个断点，并检查您的“myButton”是否不为零。

那应该使按钮出现。

# php - 如何使用 zend_search_lucene 构建像 google 一样的搜索功能？

> ID：10879621
> 
> 赞同：0
> 
> 时间：2012-06-04T10:10:57.563
> 
> 标签：php, lucene, full-text-search, search-engine, zend-search-lucene

我正在使用 zend_search_lucene 在文档中搜索关键字。在其中一份文件中有短语`This taught me a valuable lesson in time management as I still had to attend lectures and tutorials during the day. I enjoyed improving my telephone manner and learning to deal with different reactions to my requests for donations.`

现在，如果搜索“关于时间管理的宝贵课程”，它会一无所获。我正在使用下面的代码来搜索它。

```
Zend_Search_Lucene_Analysis_Analyzer::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive());

$index = new Zend_Search_Lucene('/home/project/mgh/data/search_file/lucene.customer.index');

 Zend_Search_Lucene::getDefaultSearchField('contents');

    $results = $index->find('contents:"valuable lesson on cost management" ');

    $this->count=count($results); 
```

在上面的例子中，只有不匹配是，代替'in'有'on'，但剩余的单词正在匹配。如果匹配的单词很少（即使很少的单词不匹配），如何获得结果计数？

感谢您的建议。

参考： http: [//framework.zend.com/manual/en/zend.search.lucene.query-language.html](http://framework.zend.com/manual/en/zend.search.lucene.query-language.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:19:57.513

问题不在于 zend_search_lucene，而在于 Lucene 如何索引您的数据。我建议您阅读Solr 文档中的[Analyzers、Tokenizers 和 Token Filters](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)以了解其工作原理。如果您发布您的 schema.xml 信息（您定义哪些信息应该被索引以及以何种方式），这也会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:10:02.663

这里的关键可能是停用词。如果您将“in”和“on”定义为停用词（Lucene 将忽略这些词，因为它们太常见了），那么您的查询“时间管理有价值的课程”将匹配文档文本的“时间管理的宝贵课程”部分.

# html - 父 div 没有根据其子级身高计算身高。

> ID：10879625
> 
> 赞同：4
> 
> 时间：2012-06-04T10:11:35.553
> 
> 标签：html, css

这是我的代码：

**HTML**

```
<div id="body">
    <div id="left">a</div>
    <div id="main">b</div>
    <div id="right">c</div>
</div> 
```

**CSS：**

```
#body {    width: 520px;    border:solid 10px #d2d2d2;}
#left { float:left;width:170px;height:200px}
#main { float:left;width:170px;height:400px}
#right { float:left;width:170px;height:200px} 
```

为什么#body 不包围 div#left,#div#main, div#right

如果我设置 display : table 就可以了

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-04T10:14:43.133

添加溢出：隐藏到#body css。

```
#body {    width: 520px;    border:solid 10px #d2d2d2; overflow:hidden;} 
```

**或者**

在父元素上使用任何类（例如 clearfix）。请参阅 CSS Trick 文章以供参考： [https ://css-tricks.com/snippets/css/clear-fix/](https://css-tricks.com/snippets/css/clear-fix/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-04T10:14:51.323

该`float`属性旨在允许内容从包含它的块的底部掉落，因为它旨在用于诸如多个段落应该环绕的图像之类的东西。

有关更多详细信息和示例，请参阅[包含浮点数](http://www.complexspiral.com/publications/containing-floats/)。

设置`overflow: hidden`为`#body`使容器扩展以包含其中的所有浮动元素。或者看看[其他一些技巧](http://www.ejeliot.com/blog/59)。

另一种方法是`display: inline-block`使用`float`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T10:16:54.940

```
 #body { 
    overflow:hidden;
 } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T10:14:02.260

尝试这个：

```
<div id="body">
    <div id="left">a</div>
    <div id="main">b</div>
    <div id="right">c</div>
    <div style="clear:both;"></div>
</div> 
```

# javascript - 更改 jQuery 日历日期

> ID：10879627
> 
> 赞同：0
> 
> 时间：2012-06-04T10:11:42.010
> 
> 标签：javascript, jquery

是否可以在日历中更改所选日期（今天的日期）？

**示例** 在此[演示](http://jsfiddle.net/gvAbv/8/)中，当我单击 ...（三个点）时，会出现一个日历，并且选择的日期是今天的日期。当我选择另一个日期（如 6）时，我第二次单击文本框，日历出现，但两个日期有黄色阴影：今天和我选择的那个（第 6 天）。这就是我要更改的内容：选择一个日期时，下一次仅应为该日期进行阴影。我希望你明白我想说什么。

提前致谢。

这是我的脚本

```
 <script type="text/javascript">

$(function() {
   $("#fullDate").datepicker({

        showOn: "button",
        buttonImage: "images/calender.jpg",
        buttonImageOnly: true, 

        onClose: function(dateText, inst) {
        $('#year').val(dateText.split('/')[2]);
        $('#month').val(dateText.split('/')[0]);
        $('#day').val(dateText.split('/')[1]);
    }
    });
 });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:29:01.287

您可以使用默认日期。这是一个例子：

```
$('.datepicker').datePicker({ defaultDate: $.datepicker.parseDate("d m y", "31 8 2009") }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:30:38.617

试试这个例子

```
//Set DatePicker to October 3, 2008
$('#datepicker').datepicker("setDate", new Date(2008,9,03) ); 
```

如果 setDate 不起作用，则使用 defaultDate 而不是 setDate

链接[参考](http://docs.jquery.com/UI/Datepicker#method-setDate) [类似问题](https://stackoverflow.com/questions/2516199/jquery-datepicker-change-today-date)

# python - 在 OS X 上运行的 Python 中读取/写入另一个进程内存

> ID：10879631
> 
> 赞同：3
> 
> 时间：2012-06-04T10:12:02.777
> 
> 标签：python, macos, process

在 Mac OS X Lion 上运行时，是否可以使用 Python 读取/写入另一个进程内存（不是 Python 进程，并且不使用共享内存或任何东西）？

例如，我想启动 Safari 并监控 Safari 使用的几个内存地址。

在 Windows 中我找到了很多解决方案，但可以在 Mac OS X 上完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T21:07:12.977

是的，它可以。

当然不是直接的——但是你可以从 Python 调用任何你想要的 C API，或者通过在 C（或 Pyrex 等）中构建一个 Python 扩展模块，或者通过在 Python 中使用 ctypes。

您要调用的特定 C API 是 task_for_pid 和 mach_vm 方法。这些方法的联机帮助页在现代 OS X 中不存在，但标头有很好的文档记录（因此，源代码是现成的），您可以在线找到其他基于 Mach 的系统的联机帮助页，并且有大量的第三方文档。

有关概念的快速证明，请参阅[https://github.com/abarnert/pymach](https://github.com/abarnert/pymach)。您应该能够使用“python setup.py build_ext --inplace”或“sudo python setup.py install”来构建它，然后查看 test.py 以了解如何使用它的简单示例。

请记住，在现代 OS X 中，除非您是 root，否则您只能访问子进程。解决此问题的最简单方法是让您的脚本实际启动 Safari。或者，如果你不能这样做，只需 sudo 你的脚本。或者，您可以花哨并使用 ptrace 附加到正在运行的进程，但这留给读者作为练习。

# android - 通过 editText 启动活动

> ID：10879633
> 
> 赞同：0
> 
> 时间：2012-06-04T10:12:07.197
> 
> 标签：android, android-edittext

我想通过editText的文本开始一个活动。

例如：当我输入任何字符串时，例如“字符串”，它应该会自动启动一个活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:15:56.500

您应该使用 textwatcher 事件来实现它。因为每次用户在edittext中输入任何内容时都会调用它。

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:16:12.220

我认为使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)你可以开始活动。你只需检查方法中的字符串`afterTextChanged`......

```
if(s.toString().equals("string")){
 //startActivity here
} 
```

像，

```
edittext.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                if(s.toString().equals("string")){
                            //startActivity here
                        }
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:16:02.563

你可以使用一个`OnkeyListener`

```
myEditTextField.setOnKeyListener(new OnKeyListener() {
     @Override
public boolean onKey(View v, int keyCode, KeyEvent event) {
    if (event.getAction() == KeyEvent.ACTION_UP) {
        if (myEditTextField.getText().toString().trim().equals("your string")) {
                    // start your activity
                }
            }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T10:21:27.910

用这种方式

```
 final EditText et = (EditText) findViewById(R.id.editText1);

et.addTextChangedListener(new TextWatcher()
     {
    public void afterTextChanged(Editable s){

        }
    }
    public void beforeTextChanged(CharSequence s,int start,int count, int after){} 
    public void onTextChanged(CharSequence s, int start, int before, int count) {
            if(s.length() > 0) {
             if(et.getText().toString().equals("string"){
                      Intent i=new Intent(YourActivity.this,SecondActivity.class);
                      startActivity(i);
            }
     }
   }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-04T11:14:08.780

这是 NextActivity.java

```
public class NextActivity extends Activity {

//Your member variable declaration here

// Called when the activity is first created.
@Override
public void onCreate(Bundle savedInstanceState) {
//Your code here
}
} 
```

创建新的 Activity 后，我们必须在文件“AndroidManifest.xml”中注册它。为了注册，我们必须在“AndroidManifest.xml”中创建一个条目作为

```
**<activity android:name=".NextActivity" android:label="@string/app_name"/>** 
```

# android - 两个活动之间的动画

> ID：10879635
> 
> 赞同：0
> 
> 时间：2012-06-04T10:12:33.990
> 
> 标签：android, animation, transition, slide

我正在开发一款游戏，我现在被卡住了。这里的目标是在两个也是活动的菜单之间创建动画。但这并不像现在听起来那么简单。如果用户按下按钮，左右两扇门应滑入并覆盖菜单。触摸中心后，它们应该滑出并显示新菜单。这就是为什么我不能使用标准的过渡动画。帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:51:04.680

对于**从右到左的**动画，请使用此动画。您的菜单将因此被隐藏：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" 
    android:interpolator="@android:anim/accelerate_interpolator">
    <translate android:fromXDelta="50%p"
         android:toXDelta="0"
         android:interpolator="@android:anim/anticipate_overshoot_interpolator"
          android:duration="500" />
</set> 
```

只需复制此行并在 anim 文件夹中另存为 xml 文件。

对于**从左到右，** 使用以下行：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" 
    android:interpolator="@android:anim/accelerate_interpolator">
    <translate android:fromXDelta="-50%p"
         android:toXDelta="0"
         android:interpolator="@android:anim/anticipate_overshoot_interpolator"
          android:duration="500" />
</set> 
```

复制并在动画文件夹中使用另一个名称保存。

# java-me - 如何在 j2me 中生成 DTMF 音调

> ID：10879638
> 
> 赞同：0
> 
> 时间：2012-06-04T10:12:44.117
> 
> 标签：java-me, dtmf, mmapi

我想知道是否有人遇到过在 J2ME 中生成 DTMF 音调的方法。我正在尝试在 J2ME 中生成 DTMF 音调，但似乎找不到任何实质性的东西。如果有人知道我会在哪里寻找这样的东西，我将不胜感激。

# c# - 使用任何东西将项目逐步添加到列表框？（不是一次全部，而是一步一步）

> ID：10879640
> 
> 赞同：0
> 
> 时间：2012-06-04T10:12:47.090
> 
> 标签：c#, asp.net, ajax, updatepanel

任何正文都可以给我一个例子，如何将项目一个接一个（不是一次全部）添加到列表框中，即在页面加载事件完成后，此代码应逐步将 0 到 4 添加到列表框不是一下子就走，现在就是这样。

```
 for (int i = 0; i<5,i++)
{
listbox1.items.add(i.Tostring());
} 
```

这段代码的作用是，当页面加载完成时，它会同时显示 0,1,2,3,4。我希望它显示 0，然后是 1，然后是 2，依此类推。（我的问题与此类似，因此解决此问题对我有很大帮助）。

编辑：没有必要将元素添加到列表框中，它可以是任何文本框字段等（我听说无法从列表框调用 ajax，所以只是以防万一）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:15:46.340

```
 for (int i = 0; i<5,i++)
{
listbox1.items.add(i.Tostring());
System.Threading.Thread.Sleep(5000);
} 
```

像这样的东西？

编辑：5000 等于 5 秒，因此可以根据需要进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:53:06.557

在您的情况下，您将不得不异步或通过客户端添加项目，因为您正在同步添加它们，因此从服务器端添加它们并且在呈现页面时它们都在页面中。

事实上，您应该采用客户端方法来带来这种效果，而从服务器端您将无法做到这一点。

# debugging - 为什么 GDB 一直要求我升级到 LLDB？

> ID：10879645
> 
> 赞同：2
> 
> 时间：2012-06-04T10:13:26.813
> 
> 标签：debugging, xcode4.3, lldb

![在此处输入图像描述](../Images/f1dc77a5766b3d70ddada5075dd28455.png)

是的，我单击执行更改。我认为显然最终它会正常工作。

该问题一次又一次地显示为警告。我同意了。所以它应该已经改变了，所有的问题都应该得到解决，对吧？2 或 3 下一次再次编译，我再次看到相同的警告并再次被问到同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:47:39.900

我在 Xcode 4.3.3 中遇到了这个问题。我通过使用文本编辑器手动编辑适当的文件来解决此问题。

1.  关闭 Xcode。
2.  使用 Finder 打开 MyProject.xcodeproj（右键单击并选择“显示包内容”）。
3.  在 Finder 中向下导航到 xcuserdata/[用户名].xcuserdatad/xcschemes
4.  在文本编辑器中打开 MyProject.app.xcscheme（右键单击并选择“打开方式”）
5.  找到以下内容的行：

    ```
    selectedDebuggerIdentifier = "Xcode.DebuggerFoundation.Debugger.GDB" 
    ```

并更改为

```
 selectedDebuggerIdentifier = "Xcode.DebuggerFoundation.Debugger.LLDB" 
```

保存、关闭、打开 XCode。该消息现在应该消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:29:41.137

当您从 xcode 4.2 切换到 4.3 时，这伴随着 LLVM 工具集。我不确定您的情况发生了什么，但您可以使用以下步骤抑制这些警告。

product->edit scheme：调试器的调试方案中的 GDB。

# asp.net-mvc-3 - Autofac - 混合 InstancePerHttpRequest 和异步范围

> ID：10879648
> 
> 赞同：3
> 
> 时间：2012-06-04T10:13:32.290
> 
> 标签：asp.net-mvc-3, scope, autofac

我正在构建一个以 MVC3 作为主要前端的四层系统，但包含由服务层异步运行并报告进度的长时间运行的任务，MVV 将使用 Ajax 显示这些任务。我使用 Autofac 进行依赖注入 (DI) 主要是因为界面和文档很好，而且速度很快（请参阅Philip Mateescu关于[DI 速度的出色研究）。](http://philipm.at/2011/0808/)

我的问题是关于如何设置 Autofac 来处理注入项目的两个范围，即 MVC3 依赖项必须是 PerHttpRequest 但异步任务依赖项需要是 InstancePerLifetimeScope。

显然，服务层需要使用单独的 DI 来解决长时间运行的任务的依赖关系。最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T09:12:09.217

# 更新 - 2014 年 6 月

我已经更新了这个答案，因为使用 AutoFac 的最佳实践已经继续，加上 MVC 的变化。变化在于，AutoFac 中的最佳实践现在是通过使用 .InstancePerLifetimeScope() 后缀来定义需要在访问的整个生命周期内持续的任何实例，在 MVC 的 HttpRequest 的情况下。请参阅下面的示例：

```
builder.RegisterType<MyDbContext>().As<IMyDbContext>().InstancePerLifetimeScope(); 
```

完成此操作后，您不再需要指定您在任务中创建的新生命周期范围的名称（请参阅下面已更新的原始答案）。

以下是有关 MVC 中任务分配的其他一些说明，您可能会发现它们很有用：

*   如果您使用的是新的 async/await，则不需要新的生命周期范围。Aysnc/await 保留当前上下文并简单地释放线程以提高 Web 在负载下的性能。
*   如果您确实想在后台运行某些东西，那么请注意 - 存在一些问题。我建议您阅读异步专家 Stephen Cleary 的这篇[有用的博客文章。](http://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html)
*   一个真正有用的组合是将 SignalR 与 MVC 结合使用来报告进度并允许用户取消。这对我来说效果很好。

* * *

**原始帖子，但已更新（注意：您必须如上所示注册生命周期范围实例）**

我已经通过 Google Autofac 组找到了如何处理具有依赖关系的异步任务。事实证明，您可以访问 MVC 级别的容器，然后创建解析的新生命周期范围。有很多方法可以做到这一点，但Alex Meyer-Gleaves（专家）的这个答案提供了答案[。](https://groups.google.com/forum/?fromgroups#!topic/autofac/gJYDDls981A)Alex 建议使用以下代码来运行具有不同范围的任务。

```
public void Run<T>(Action<T> action)
{
  Task.Factory.StartNew(delegate
  {
    using (var container = AutofacDependencyResolver.Current
                           .ApplicationContainer.BeginLifetimeScope())
    {
        var service = container.Resolve<T>();
        action(service);
    }
  });
} 
```

在 Alex 的帖子中有一个关于该主题的更详细博客帖子的链接，[这](http://aboutcode.net/2010/11/01/start-background-tasks-from-mvc-actions-using-autofac.html)也非常有用。

# spring-mvc - Spring MVC 中@PathVariable 中的问号？

> ID：10879656
> 
> 赞同：1
> 
> 时间：2012-06-04T10:14:01.830
> 
> 标签：spring-mvc, path-variables

在`@Controller`搜索引擎中：

```
@RequestMapping(value = "/search/{query}", method = RequestMethod.GET)
public String search(@PathVariable String query) {} 
```

如果用户想要搜索`/search/w?rld`（应该匹配 world、warld、whrld 等），则变量`query`等于`w`，因为问号表示 GET 变量。

我试过了`"/search/{query:.+}"`，但还是不行。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:36:52.293

问题不在 Spring 配置中。它在网址中。问号是表示查询字符串开始的符号。如果它是 URL 的一部分，则必须对其进行编码：

```
/search/w%3Frld 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T19:08:44.020

如果它只是一种方法：

[Spring MVC - 如何在 Spring 控制器的地图中获取所有请求参数？](https://stackoverflow.com/questions/7312436/spring-mvc-how-to-get-all-request-params-in-a-map-in-spring-controller)

将 WebRequest req 添加到您的签名方法，然后 Map parameters = req.getParameterMap();

# java - NIST SP 800-56A 级联/单步密钥导出函数的现有实现？

> ID：10879658
> 
> 赞同：13
> 
> 时间：2012-06-04T10:14:04.317
> 
> 标签：java, c++, security, cryptography, cryptoapi

有谁知道 NIST SP 800-56A 级联密钥派生函数/CONCAT KDF（最好是 Java）的任何现有实现？

密钥推导函数记录在 NIST 出版物的第 5.8.1 节：使用离散对数加密的成对密钥建立方案的建议

链接在这里：[http ://csrc.nist.gov/publications/nistpubs/800-56A/SP800-56A_Revision1_Mar08-2007.pdf](http://csrc.nist.gov/publications/nistpubs/800-56A/SP800-56A_Revision1_Mar08-2007.pdf)

微软的 CNG 在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375393%28v=vs.85%29.aspx)有一个实现，但是如果你比较微软实现的功能，与 NIST SP 800-56A 中记录的参数相比，它们不相符，微软的实现是不可用的。我也尝试在 C++ 中实现一个示例程序，但我无法匹配参数。

任何人都可以尝试实现它或知道任何现有的实现吗？

我正在寻找一种能够证明为什么它符合 NIST 规范的实现。我已经看到了一些实现，我觉得它们不符合 NIST 规范（缺少参数、无效的逻辑流程等）。

如果您可以自己实现它，我总是很高兴分享我自己的源代码以供辩论。谢谢！这将是对开源社区的一个很好的贡献！

编辑：

感谢@Rasmus Faber，我终于可以结束这个问题，并希望能回答其他人和我一样的问题。

这是我根据@Rasmus Faber 和我的原始代码编辑的代码：

**ConcatKeyDerivationFunction.java**

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

/**
 * 
 * Implementation of Concatenation Key Derivation Function<br/>
 * http://csrc.nist.gov/publications/nistpubs/800-56A/SP800-56A_Revision1_Mar08-2007.pdf
 *
 */

public class ConcatKeyDerivationFunction {

    private static final long MAX_HASH_INPUTLEN = Long.MAX_VALUE;
    private static final long UNSIGNED_INT_MAX_VALUE = 4294967295L;
    private static MessageDigest md;

    public ConcatKeyDerivationFunction(String hashAlg) throws NoSuchAlgorithmException {
        md = MessageDigest.getInstance(hashAlg);
    }

    public byte[] concatKDF(byte[] z, int keyDataLen, byte[] algorithmID, byte[] partyUInfo, byte[] partyVInfo, byte[] suppPubInfo, byte[] suppPrivInfo) {
        int hashLen = md.getDigestLength() * 8;

        if (keyDataLen % 8 != 0) {
            throw new IllegalArgumentException("keydatalen should be a multiple of 8");
        }

        if (keyDataLen > (long) hashLen * UNSIGNED_INT_MAX_VALUE) {
            throw new IllegalArgumentException("keydatalen is too large");
        }

        if (algorithmID == null || partyUInfo == null || partyVInfo == null) {
            throw new NullPointerException("Required parameter is null");
        }

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        try {
            baos.write(algorithmID);
            baos.write(partyUInfo);
            baos.write(partyVInfo);
            if (suppPubInfo != null) {
                baos.write(suppPubInfo);
            }
            if (suppPrivInfo != null) {
                baos.write(suppPrivInfo);
            }
        } catch (IOException e) {
            throw new RuntimeException(e);
        }

        byte[] otherInfo = baos.toByteArray();
        return concatKDF(z, keyDataLen, otherInfo);
    }

    private byte[] concatKDF(byte[] z, int keyDataLen, byte[] otherInfo) {
        keyDataLen = keyDataLen / 8;
        byte[] key = new byte[keyDataLen];

        int hashLen = md.getDigestLength();
        int reps = keyDataLen / hashLen;

        if (reps > UNSIGNED_INT_MAX_VALUE) {
            throw new IllegalArgumentException("Key derivation failed");
        }

        int counter = 1;
        byte[] counterInBytes = intToFourBytes(counter);

        if ((counterInBytes.length + z.length + otherInfo.length) * 8 > MAX_HASH_INPUTLEN) {
            throw new IllegalArgumentException("Key derivation failed");
        }

        for (int i = 0; i <= reps; i++) {
            md.reset();
            md.update(intToFourBytes(i + 1));
            md.update(z);
            md.update(otherInfo);

            byte[] hash = md.digest();
            if (i < reps) {
                System.arraycopy(hash, 0, key, hashLen * i, hashLen);
            } else {
                System.arraycopy(hash, 0, key, hashLen * i, keyDataLen % hashLen);
            }
        }
        return key;
    }

    private byte[] intToFourBytes(int i) {
        byte[] res = new byte[4];
        res[0] = (byte) (i >>> 24);
        res[1] = (byte) ((i >>> 16) & 0xFF);
        res[2] = (byte) ((i >>> 8) & 0xFF);
        res[3] = (byte) (i & 0xFF);
        return res;
    }
} 
```

@Rasmus Faber：感谢您的努力。我完全相信上面的代码。我对上面的代码所做的是添加代码以按照 NIST 规范的要求执行验证。

此外，我修复了一个错误，其中传入的 keyDataLen 旨在指定以位为单位的长度，但它被视为以字节为单位的长度。因此，生成的密钥最终大了 8 倍。

`keyDataLen = keyDataLen/8;`通过在第二种方法的第一行中添加一行来解决此问题。

感谢大家的支持，希望这段代码能对开源社区大有帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T18:47:33.423

这是一个快速而肮脏的实现：

```
 public byte[] concatKDF(String hashAlg, byte[] z, int keyDataLen, byte[] algorithmID, byte[] partyUInfo, byte[] partyVInfo, byte[] suppPubInfo, byte[] suppPrivInfo) throws NoSuchAlgorithmException
{
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try {
        baos.write(algorithmID);
        baos.write(partyUInfo);
        baos.write(partyVInfo);
        baos.write(suppPubInfo);
        baos.write(suppPrivInfo);
    } catch (IOException e) {
        throw new RuntimeException(e);
    }

    byte[] otherInfo = baos.toByteArray();
    return concatKDF(hashAlg, z, keyDataLen, otherInfo);
}

public byte[] concatKDF(String hashAlg, byte[] z, int keyDataLen, byte[] otherInfo) throws NoSuchAlgorithmException
{
    byte[] key = new byte[keyDataLen];
    MessageDigest md = MessageDigest.getInstance(hashAlg);
    int hashLen = md.getDigestLength(); 
    int reps = keyDataLen / hashLen;
    for(int i=1;i<=reps;i++){
        md.reset();
        md.update(intToFourBytes(i));
        md.update(z);
        md.update(otherInfo);
        byte[] hash = md.digest();
        if(i<reps){
            System.arraycopy(hash, 0, key, hashLen*(i-1), hashLen);
        }else{
            if(keyDataLen % hashLen == 0){
                System.arraycopy(hash, 0, key, hashLen*(i-1), hashLen);
            }else{
                System.arraycopy(hash, 0, key, hashLen*(i-1), keyDataLen % hashLen);
            }
        }
    }
    return key;
}

public byte[] intToFourBytes(int i){
    byte[] res = new byte[4];
    res[0] = (byte) (i >>> 24);
    res[1] = (byte) ((i >>> 16) & 0xFF);
    res[2] = (byte) ((i >>> 8) & 0xFF);
    res[3] = (byte) (i & 0xFF);
    return res;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T15:10:31.657

不要认为你能找到它们，然后在 http://csrc.nist.gov/groups/STM/cavp/documents/components/componentval.html 的列表中测试`Validated Component Implementations`所有[内容](http://csrc.nist.gov/groups/STM/cavp/documents/components/componentval.html)。

只有一家供应商使用 Java 编写它们 - Entrust [http://www.entrust.com](http://www.entrust.com)。

所有这些都在没有 KDF 的情况下进行了验证:)。其余的工作由您决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-23T09:24:26.713

较新的[NIST SP](https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-56Cr1.pdf) 800-56C rev1 将关键协议协议的 KDF 定义从 NIST SP 800-56A 移出，定义了 2 种不同的 KDF：

## 单步 KDF

非正式地也称为“concat-kdf”。这是 NIST SP 800-56C rev1 中描述的单步 kdf 的独立测试实现：[https ://github.com/patrickfav/singlestep-kdf](https://github.com/patrickfav/singlestep-kdf)

```
// a shared secret provided by your protocol
byte[] sharedSecret = ...
// a salt; if you don't have access to a salt, use salt-less SingleStepKdf.fromSha256() or similar
byte[] salt = ...
// other info to bind the key to the context, see the NIST spec for more detail
byte[] otherInfo = "macKey".getBytes();
byte[] keyMaterial = SingleStepKdf.fromHmacSha256().derive(sharedSecret, 32, salt, otherInfo);
SecretKey secretKey = new SecretKeySpec(keyMaterial, "AES"); 
```

### 其他信息与固定信息

与旧的 800-56A 版本相比，该`otherInfo`参数已重命名为`fixedInfo`. 它可用于促进 SP 中描述的各种密钥协商方案的支持消息格式。

### 测试向量

我找不到任何[官方测试向量](https://crypto.stackexchange.com/questions/64140/where-can-i-find-official-test-vectors-for-nist-sp-800-56c-r1-single-step-kdf/64277#64277)，所以我在这里发布了一些：[https ://github.com/patrickfav/singlestep-kdf/wiki/NIST-SP-800-56C-Rev1:-Non-Official-Test-Vectors](https://github.com/patrickfav/singlestep-kdf/wiki/NIST-SP-800-56C-Rev1:-Non-Official-Test-Vectors)

这里有些例子：

#### SHA-256

```
(z: afc4e154498d4770aa8365f6903dc83b, L: 16, fixedInfo: 662af20379b29d5ef813e655) = f0b80d6ae4c1e19e2105a37024e35dc6
(z: a3ce8d61d699ad150e196a7ab6736a63, L: 16, fixedInfo: ce5cd95a44ee83a8fb83f34c) = 5db3455a22b65edfcfde3da3e8d724cd
(z: a9723e56045f0847fdd9c1c78781c8b7, L: 16, fixedInfo: e69b6005b78f7d42d0a8ed2a) = ac3878b8cf357976f7fd8266923e1882
(z: a07a5e8df7ee1b2ce2a3d1348edfa8ab, L: 16, fixedInfo: e22a8ee34296dd39b56b31fb) = 70927d218b6d119268381e9930a4f256

(z: 3f892bd8b84dae64a782a35f6eaa8f00, L: 02, fixedInfo: ec3f1cd873d28858a58cc39e) = a7c0
(z: 3f892bd8b84dae64a782a35f6eaa8f00, L: 36, fixedInfo: ec3f1cd873d28858a58cc39e) = a7c0665298252531e0db37737a374651b368275f2048284d16a166c6d8a90a91a491c16f
(z: 3f892bd8b84dae64a782a35f6eaa8f00, L: 68, fixedInfo: ec3f1cd873d28858a58cc39e) = a7c0665298252531e0db37737a374651b368275f2048284d16a166c6d8a90a91a491c16f49641b9f516a03d9d6d0f4fe7b81ffdf1c816f40ecd74aed8eda2b8a3c714fa0

(z: 9ce5457e4a0eecc1c8709f7ef37a32e9, L: 16, fixedInfo: ) = 7d81e7d61acc06b90984ec4145469608 
```

#### HMAC-SHA256

```
(z: 6ee6c00d70a6cd14bd5a4e8fcfec8386, L: 16, salt: 532f5131e0a2fecc722f87e5aa2062cb, fixedInfo: 861aa2886798231259bd0314) = 13479e9a91dd20fdd757d68ffe8869fb
(z: cb09b565de1ac27a50289b3704b93afd, L: 16, salt: d504c1c41a499481ce88695d18ae2e8f, fixedInfo: 5ed3768c2c7835943a789324) = f081c0255b0cae16edc6ce1d6c9d12bc
(z: 98f50345fd970639a1b7935f501e1d7c, L: 16, salt: 3691939461247e9f74382ae4ef629b17, fixedInfo: 6ddbdb1314663152c3ccc192) = 56f42183ed3e287298dbbecf143f51ac

(z: 02b40d33e3f685aeae677ac344eeaf77, L: 02, salt: 0ad52c9357c85e4781296a36ca72039c, fixedInfo: c67c389580128f18f6cf8592) = be32
(z: 02b40d33e3f685aeae677ac344eeaf77, L: 36, salt: 0ad52c9357c85e4781296a36ca72039c, fixedInfo: c67c389580128f18f6cf8592) = be32e7d306d891028be088f213f9f947c50420d9b5a12ca69818dd9995dedd8e6137c710
(z: 02b40d33e3f685aeae677ac344eeaf77, L: 68, salt: 0ad52c9357c85e4781296a36ca72039c, fixedInfo: c67c389580128f18f6cf8592) = be32e7d306d891028be088f213f9f947c50420d9b5a12ca69818dd9995dedd8e6137c7104d67f2ca90915dda0ab68af2f355b904f9eb0388b5b7fe193c9546d45849133d

(z: 2c2438b6321fed7a9eac200b91b3ac30, L: 56, salt: 6199187690823def2037e0632577c6b1, fixedInfo: ) = b402fda16e1c2719263be82158972c9080a7bafcbe0a3a6ede3504a3d5c8c0c0e00fe7e5f6bb3afdfa4d661b8fbe4bd7b950cfe0b2443bbd
(z: 0ffa4c40a822f6e3d86053aefe738eac, L: 64, salt: 6199187690823def2037e0632577c6b1, fixedInfo: ) = 0486d589aa71a603c09120fb76eeab3293eee2dc36a91b23eb954d6703ade8a7b660d920c5a6f7bf3898d0e81fbad3a680b74b33680e0cc6a16aa616d078b256
(z: a801d997ed539ae9aa05d17871eb7fab, L: 08, fixedInfo: 03697296e42a6fdbdb24b3ec) = 1a5efa3aca87c1f4
(z: e9624e112f9e90e7bf8a749cf37d920c, L: 16, fixedInfo: 03697296e42a6fdbdb24b3ec) = ee93ca3986cc43516ae4e29fd7a90ef1 
```

## 两步 KDF

两步 kdf 最突出的实现可能是[HKDF (RFC5869)](https://www.rfc-editor.org/rfc/rfc5869)。可以在此处找到经过测试的独立 Java 实现：[https ://github.com/patrickfav/hkdf](https://github.com/patrickfav/hkdf)

^(免责声明：我是这两个库的开发者。)

# html - CSS sprite - 导航的移动背景（悬停，活动等）+元素之间的空格

> ID：10879661
> 
> 赞同：0
> 
> 时间：2012-06-04T10:14:16.353
> 
> 标签：html, css, css-sprites

我正在使用 CSS sprite 做一个导航菜单，而不是上传大量图像，而是将它们合并在一起，并且可以通过移动背景位置看到悬停、活动效果，即[http://www.threestyles.com/tutorials/coding -apples-navigation-bar-using-css-sprites/](http://www.threestyles.com/tutorials/coding-apples-navigation-bar-using-css-sprites/)

**我的导航的不同**之处在于导航元素之间有*空格*，我找不到如何移动背景以使其正常工作的方式。

如果我更改属性，元素要么弹出太靠近彼此（即在元素之间悬停时没有留下空间），要么背景移动太少/太多。

(http://s17.postimage.org/ska9gj065/navprrrob.jpg)

这是我的导航和尺寸：

“Priser”按钮 - 宽度：100px；
“Priser”和“Reservere”之间的空间 - 15px。
“保留” - 宽度：120px；
“Reservere”和“Klub”之间的空间 - 14px。
“俱乐部” - 宽度：100px；

很抱歉没有把它全部放在图像上。

**这是我的 HTML：**

```
<div class="nav">
  <ul id="nav">
    <li id="list1"><a href="#"><span>Priser</span></a></li>
    <li id="list2"><a href="#"><span>Reservere</span></a></li>
    <li id="list3"><a href="#"><span>Klub</span></a></li> 
  </ul>
</div> 
```

**还有我的 CSS：**

```
#nav span {
  display: none;
}

#nav li {
  list-style-type: none;
  float: left;
}

#nav a {
  height: 45px;
  display: block;
}

#list1 { width: 100px; }
#list2 { width: 130px; }
#list3 { width: 100px; }

#list1 a:hover {
  background: url(images/nav.png) 0px -45px no-repeat;
}

#list2 a:hover {
  background: url(images/nav.png) -115px -45px no-repeat;   
}

#list3 a:hover {
  background: url(images/nav.png) -260px -45px no-repeat;   
} 
```

在您对其进行测试之前，它可能不太容易理解，但目前我没有在哪里托管它。

## 所以，问题：

1.  当元素之间有*未使用的空间时，是否可以使用此 CSS 精灵？*
2.  如果是，这种情况下的参数应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:20:42.193

您应该为具有背景图像的容器提供宽度和高度并使其显示：块与图像宽度高度相同（例如：priser 宽度应为 100）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:21:38.410

当然你可以做到。首先，您必须为您的`<li>`-s 提供与背景按钮完全相同的宽度。然后用于`margin`获得所需的间距，即：

```
#list2 { width: 120px; margin-right: 15px; } 
```

# ruby-on-rails - 如何使用 Rails/Cucumber 测试重定向到 Soundcloud

> ID：10879664
> 
> 赞同：2
> 
> 时间：2012-06-04T10:14:24.863
> 
> 标签：ruby-on-rails, ruby, cucumber, capybara, soundcloud

我有一个重定向到 Soundcloud 的 Rails 应用程序，以便用户可以连接到他的帐户。我正在用 Cucumber 测试这个过程，但我有几个错误。

*   如果没有另一个 gem 来处理重定向，我会超时

*   我尝试使用 Capybara-mechanize。

    ```
     When /^I successfully connect to Soundcloud$/ do 
        Capybara.app_host = "https://soundcloud.com"
        steps %Q{
            When I follow "sc_connect"
            And I fill in the following:
            | username     |    myusername              |   
            | password     |    mypassword              |
            And I press "Connect"
        }
    end 
    ```

我实际上可以看到重定向工作，但我在“/注销”页面上，所以 Capybara 无法选择和填写字段，我得到一个错误。只有这样黄瓜才能到达登录页面并停止。

我收到此错误：

**Capybara::NotSupportedByDriverError (Capybara::NotSupportedByDriverError)**

我想找到一种使用 Cucumber 正确测试这些重定向的方法。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T10:27:59.323

我相信您将需要使用 selenium 来测试应用程序范围之外的黄瓜。为此，请`@selenium`在您的场景中添加一个标签。

或者，如果您只想测试重定向，最好在控制器测试中执行此操作。

# jsp - 战争文件中的数据库连接

> ID：10879672
> 
> 赞同：0
> 
> 时间：2012-06-04T10:14:58.937
> 
> 标签：jsp, tomcat

我在 jsp 中完成了一个 Web 应用程序项目。为此，我创建了一个war文件并将其部署在eclipse中的另一台机器上。我还恢复了该机器上的数据库。当我给出第一个jsp页面的路径时，它在浏览器上运行。但现在问题是在我的jsp页面用户名中并且连接数据库的密码不同。因此尝试在不同的机器上运行时会出错。那么需要进行哪些更改才能在不同的机器上运行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:18:37.130

您必须解压缩 war 文件并更改 XML 中的用户名和密码。

# ios - Klazuka/Kal 合并问题

> ID：10879673
> 
> 赞同：1
> 
> 时间：2012-06-04T10:15:01.477
> 
> 标签：ios

我有一个小问题。我正在尝试将 Klazuka/Kal 项目合并到我的项目中。我做了以下事情：

1.  我将 Kal.xcodeproj 和所有文件添加到我的项目中
2.  在 Build Phases 下，我将 Kal 添加到“Target Dependencies”
3.  在 Build Phases 下，我在“Link Binary With Libraries”下添加了 libKal.a
4.  在 Build Phases 下，我将 Kal.bundle 添加到“Copy Bundle Resources”
5.  在 Build Settings 下，我为“Header Search Paths”和“User Header Search Paths”添加了“$(BUILT_PRODUCTS_DIR)”（或“$(BUILT_PRODUCTS_DIR)/static_library_name”）。
6.  在 Build Settings 下，我在“Library Search Paths”下添加了 Kal 的路径
7.  在 Build Settings 下，我在“Other Linker Flags”下添加了 -ObjC、-all_load 和 -force_load
8.  我编辑了我的构建方案并在我的主要应用程序目标之前列出了 Kal 目标，并选中了分析、测试、运行、配置文件和存档。

我试图按照 Stack Overflow 上的步骤进行操作：[iphone: Kal calendar not running in xcode 4.2](https://stackoverflow.com/questions/8321285/iphone-kal-calendar-not-running-in-xcode-4-2)

在这里： [尝试将在 iOS5 之前为 iOS 版本构建的日历库集成到我在 XCode 4 中使用 iOS5 的新项目中 - 如何移植？](https://stackoverflow.com/questions/8746303/trying-to-integrate-a-calendar-library-that-was-built-for-versions-of-ios-before/8746395#8746395)

在这里： [我在工作区中添加了我的项目和 Kal Calendar 的项目，但在 Xcode 4 中仍然无法使用](https://stackoverflow.com/questions/7223682/i-added-my-project-and-kal-calendars-project-in-a-workspace-still-wont-work-i)

也在这个网站上：http: [//blog.carbonfive.com/2011/04/04/using-open-source-static-libraries-in-xcode-4/#configuring_the_projects_scheme](http://blog.carbonfive.com/2011/04/04/using-open-source-static-libraries-in-xcode-4/#configuring_the_projects_scheme)

我尝试导入“Kal.h”文件，但在尝试构建时收到 File Not Found 错误。我显然错过了一些东西，只是不确定是什么。有人可以帮忙吗？感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:36:28.300

没关系......显然我的第 5 步有问题。我将用户标题搜索路径更改为 Klazuka 文件的实际路径，它构建得很好。

# android - Android executeSQL 不工作（INSERT INTO TABLE2 SELECT * FROM TABLE1）

> ID：10879675
> 
> 赞同：1
> 
> 时间：2012-06-04T10:15:06.633
> 
> 标签：android, sqlite

我必须将数据移动到一个表到另一个表。新表将与旧表一样，但没有约束（冲突替换），因此列是相同的。

这是我要做的查询：`INSERT INTO TABLE2 SELECT * FROM TABLE1`

我遇到了一个大问题，因为我认为我无法执行这种查询：

```
db.execSQL("INSERT INTO " + Tables.TRACKS + "_2  SELECT * FROM " + Tables.TRACKS ); 
```

execSQL 失败并出现此错误（ db onUpgrade ）：

```
06-04 12:25:50.000: D/SqliteDatabaseCpp(17817): Registering sqlite logging func: /data/data/com.musixmatch.android.lyrify/databases/library.db
06-04 12:25:50.000: D/SqliteDatabaseCpp(17817): DB info: open db, path = /data/data/com.musixmatch.android.lyrify/databases , key = lafvYvq, flag = 6, file size = 101376
06-04 12:25:50.000: D/SqliteDatabaseCpp(17817): DB info: path = /data/data/com.musixmatch.android.lyrify/databases , key = lafvYvq, handle: 0x1bd8bd8, type: w, r/w: (0,1), mode: delete, disk free size: 1243 M

06-04 12:25:50.010: D/SqliteDatabaseCpp(17817): DB info: close db, path = /data/data/com.musixmatch.android.lyrify/databases , key = lafvYvq, handle = 0x1bd8bd8, type = w, r/w = (0, 0)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817): Couldn't open library.db for writing (will try read-only):
06-04 12:25:50.030: E/SQLiteOpenHelper(17817): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:95)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:2008)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1948)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at com.designfuture.music.provider.MusicDatabase.alterTrackFragmentForFileIDSupport(MusicDatabase.java:316)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at com.designfuture.music.provider.MusicDatabase.onUpgrade(MusicDatabase.java:242)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:188)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:249)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at com.designfuture.music.provider.MusicProvider.query(MusicProvider.java:199)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.content.ContentProvider$Transport.query(ContentProvider.java:189)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.content.ContentResolver.query(ContentResolver.java:315)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.content.AsyncQueryHandler$WorkerHandler.handleMessage(AsyncQueryHandler.java:94)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.os.Looper.loop(Looper.java:156)
06-04 12:25:50.030: E/SQLiteOpenHelper(17817):  at android.os.HandlerThread.run(HandlerThread.java:60)
06-04 12:25:50.030: D/SqliteDatabaseCpp(17817): DB info: open db, path = /data/data/com.musixmatch.android.lyrify/databases , key = lafvYvq, flag = 1, file size = 101376
06-04 12:25:50.030: D/SqliteDatabaseCpp(17817): DB info: path = /data/data/com.musixmatch.android.lyrify/databases , key = lafvYvq, handle: 0x1bec760, type: r, r/w: (1,0), mode: delete, disk free size: 1243 M
06-04 12:25:50.030: D/SqliteDatabaseCpp(17817): DB info: close db, path = /data/data/com.musixmatch.android.lyrify/databases , key = lafvYvq, handle = 0x1bec760, type = r, r/w = (0, 0)
06-04 12:25:50.040: W/AsyncQuery(17817): Exception thrown during handling EVENT_ARG_QUERY
06-04 12:25:50.040: W/AsyncQuery(17817): android.database.sqlite.SQLiteException: Can't upgrade read-only database from version 7 to 9: /data/data/com.musixmatch.android.lyrify/databases/library.db
06-04 12:25:50.040: W/AsyncQuery(17817):    at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:262)
06-04 12:25:50.040: W/AsyncQuery(17817):    at com.designfuture.music.provider.MusicProvider.query(MusicProvider.java:199)
06-04 12:25:50.040: W/AsyncQuery(17817):    at android.content.ContentProvider$Transport.query(ContentProvider.java:189)
06-04 12:25:50.040: W/AsyncQuery(17817):    at android.content.ContentResolver.query(ContentResolver.java:315)
06-04 12:25:50.040: W/AsyncQuery(17817):    at android.content.AsyncQueryHandler$WorkerHandler.handleMessage(AsyncQueryHandler.java:94)
06-04 12:25:50.040: W/AsyncQuery(17817):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 12:25:50.040: W/AsyncQuery(17817):    at android.os.Looper.loop(Looper.java:156)
06-04 12:25:50.040: W/AsyncQuery(17817):    at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我认为这是因为我在查询中有一个 SELECT。这是来自 Android 文档：http: [//developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang。字符串%29](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)

> 执行不是 SELECT 的单个 SQL 语句或任何其他返回数据的 SQL 语句。

如果我使用

```
db.rawQuery( "INSERT INTO " + Tables.TRACKS + "_2  SELECT * FROM " + Tables.TRACKS, null  ); 
```

它执行没有错误，但它没有做任何事情。我认为这是因为 rawQuery 用于执行 SELECT 查询并且不会写入数据库。

**更新**：如果我使用普通查询选择所有记录，然后通过循环将它们插入新表中，一切正常，但这不是优化的方式，我不想让应用程序升级缓慢

**更新2**：

这些是这两个表之间的唯一区别：

新表有 3 个新的字符串列，它们可以为空 新表不会有旧表具有的唯一（ ON CONFLICT REPLACE ）约束

两个表都有这个字段：`BaseColumns._ID + " INTEGER PRIMARY KEY AUTOINCREMENT"`. 我必须从插入中排除该字段吗？还要记住第二个平板电脑在升级时是空的（我在升级时创建它）

那么我该怎么做才能执行一个需要和我同时读写的查询呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:01:21.210

由于您没有发布表格布局，因此让我们从以下内容开始：

```
CREATE TABLE TABLE1 (
   _id INTEGER PRIMARY KEY,
   value1 TEXT,
   value2 TEXT
);

CREATE TABLE TABLE2 (
   _id INTEGER PRIMARY KEY,
   value2 TEXT,
   value1 TEXT,
   value3 TEXT,
   value4 TEXT,
   value5 TEXT
); 
```

要正确插入值，`TABLE1`您`TABLE2`必须考虑顺序和列数很**重要**并且必须匹配（如果您有主键，从插入和选择语句中省略它们总是一个好主意 - 不要到处复制这样的东西）。

```
INSERT INTO TABLE2 (value1, value2) SELECT value1, value2 FROM TABLE1 
```

# java - Java-Eclipse-Spring 3.1——熟悉这一套的最快方法

> ID：10879676
> 
> 赞同：2
> 
> 时间：2012-06-04T10:15:09.287
> 
> 标签：java, eclipse, spring

我，几乎认识你们所有人，作为一名程序员，在你生命中的某个时刻，你会（或多或少地）了解不同的技术/语言/IDE，有时你想把东西放在一起并开始使用它们- 更高效，其次 - 更接近于现实生活中的情况，实际上仅仅了解 Java 或一些 Eclipse 经验并不意味着没有任何意义，让你成为一名有价值的程序员的是能够使用 2 或更多组合。

考虑到这一点是我的问题——您认为进入 Java+Eclipse+Spring3.1 世界的最佳方式是什么。我读过，而且我读过很多。我开始编写真正的代码，但几乎每一步都是一次又一次地发现轮子，想知道如何做一些你知道有些琐碎的事情，但是你错过了一篇讨论这个主题的文章等等。我不介意为一个好的教程付费，例如，经过一些研究后，我决定与其浪费大量时间将不同的部分放在一起，我宁愿为视频付费`http://knpuniversity.com/screencast/starting-in-symfony2-tutorial`并为自己节省很多时间（我希望）并尽可能快地编写真正的代码，而不是想知道做什么等等。

但我发现找到这样的信息来源要困难得多，尤其是当你想要像我这样更具体的东西时，这就是问这个问题的原因。我知道你们中的很多人都经历了艰难的道路，如果我必须这样做，我不会放弃，但老实说，我真的希望能发布关于该主题的优秀教程（无论是否付费），因为在我的情况时间就是金钱。

谢谢

勒隆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:36:42.027

1.  从 Spring 制造商处获取 SpringSource Toolssuite，一个基于 Eclipse 的 IDE：[http ://www.springsource.org/downloads/sts](http://www.springsource.org/downloads/sts)

2.  熟悉 Maven，您将需要它来构建和测试项目（它也具有 Eclipse 集成）。

3.  在 GitHub 上，你可以找到很多由 SpringSource 制作的有用“示例”项目，下载它们并从代码中学习——它干净简洁。这里有一些有趣的：

4.  a) [https://github.com/SpringSource/spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)（使用[Spring MVC](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)）

    b) [https://github.com/SpringSource/spring-mobile-samples](https://github.com/SpringSource/spring-mobile-samples)（使用 [Spring Mobile](http://www.springsource.org/spring-mobile)）

    c) [https://github.com/SpringSource/spring-social-samples](https://github.com/SpringSource/spring-social-samples)（使用 [Spring Social](http://www.springsource.org/spring-social)）

    d) [https://github.com/SpringSource/spring-data-jpa-examples](https://github.com/SpringSource/spring-data-jpa-examples)（使用 [Spring Data JPA](http://www.springsource.org/spring-data/jpa)）

和更多...

如您所见，这些示例项目展示了 Spring 提供的不同可能性，它们是使用不同的 Spring 模块实现/实现的（有很多，请查看 Spring 官方页面）。它们都使用 Spring Core 模块。

你只需要根据你的需要选择首先学习什么，然后从那里开始。一个很好的例子是 Spring MVC，然后是 Spring Data JPA。有了这些内容，您就可以制作一个相当不错的 Web 应用程序。

如果您想要一本书，Manning Spring in Action（最新版）非常适合 Spring 初学者，并且有很多有用的信息。

PS 如果您没有使用过 Maven，以下是在 STS 中导入 SpringSource 示例项目之一的方法：下载项目，如果您下载了存档，请解压缩，进入 STS in Project -> Import 并选择 Existing Maven project 并浏览到解压后的项目中 pom.xml 文件所在的位置。在几乎每个示例项目中，您都可以看到一个 README.md 文件，其中包含有关如何运行它的说明。

最后但同样重要的是，关注[官方 Spring 博客](http://blog.springsource.org/)。他们发布新版本 Spring 及其子模块项目的公告，并发布示例。

更新：

值得一提的是 5 部分教程系列“[使用 Spring 构建 RESTful Web 服务](http://www.baeldung.com/2011/10/25/building-a-restful-web-service-with-spring-3-1-and-java-based-configuration-part-2/)”，这是 6 部分[Spring Data 教程](http://blog.codecentric.de/en/2012/01/spring-data-jpa/)系列中的一个，涵盖了从 JPA 到图形数据库 (Neo4J) 和文档存储 (MongoDB) 的几乎所有内容，以及键值存储（Redis）。

# asp.net - 未评估的表达式

> ID：10879677
> 
> 赞同：1
> 
> 时间：2012-06-04T10:15:15.830
> 
> 标签：asp.net, user-controls

我将以下代码放入用户控件中

`<td class="column <%# GetCssClass(SomeAttributes) %>" >`

它工作正常，从 GetCssClass 方法输出正确的 CSS 类。但是我还有该表的其他一些单元格，其中包含以下代码

`<td class="column <%# GetCssClass(SomeAttributes) %>" runat="server" Visible="<%# ShowColumn %>"`

有一些问题，GetCssClass 方法没有被评估，而是直接发送到输出。

有什么帮助吗？（我是一个新的 asp.net 开发人员）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:38:31.093

当我们尝试将参数/对象传递给`runat="server"`一行时，我们使用`<%# ..%>`

您可以使用`Visible="<%# ShowColumn %>`where`ShowColumn`是一个布尔值。

但是在这种情况下`class="column <%# GetCssClass(SomeAttributes) %>"`，您不是尝试传递参数而是传递字符串，因此将其`<%# GetCssClass(SomeAttributes) %>`视为字符串。

这`class="column <%# GetCssClass(SomeAttributes) %>"`是转换为字符串，并呈现为字符串。呈现GetCssClass返回的字符串的另一种方法是使用`<%= %>`转换为字符串值并将其放在html上（不传递给控件）

这`class="<%# GetCssClass(SomeAttributes) %>"`是 GetCssClass 返回的类的地方

这个`Visible="<%# ShowColumn %>"`地方放在Visible 变量上的ShowColumn 值。

# jquery - 如何通过 jquery 获取响应头位置

> ID：10879679
> 
> 赞同：3
> 
> 时间：2012-06-04T10:15:24.160
> 
> 标签：jquery

![在此处输入图像描述](../Images/023a409717f72780aedfff2d1eead15d.png)

如何使用 jquery ajax“get”获取响应头位置？

这是我的示例代码

```
$.ajax({
    type: 'GET',
    url: 'http://www.url.com',
    data: {},
    dataType: "json",
    success: function(res) { },
    error: function(jqXHR) { }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T09:25:03.107

为了访问非简单标头（有关简单标头的更多详细信息，请参见[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)），服务器必须在“Access-Control-Expose-”中包含您要访问的标头名称标头”CORS 标头。

因此，除了“Access-Control-Allow-Origin”、“Access-Control-Allow-Headers”标头之外，您进行呼叫的服务器必须包括：

访问控制公开标头：位置

我在 Windows 7（Chrome 23、Safari 5.1.7、Firefox 17 和 Opera 12.11）上对此进行了测试。似乎只有 Chrome 和 Opera 能够通过 getResponseHeader('Location') 方法访问 Location 标头，并且只有在服务器响应中包含 Access-Control-Expose-Headers 标头时才会这样做

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T10:23:08.027

您也可以在成功回调中接收一个 jqXhr 对象，它有一个`.getResponseHeader()`可以像这样使用的方法

```
$.ajax({
   type: 'GET',
   url: 'http://www.url.com',
   data: {},
   dataType: "json",
   success: function(res,status,XHR) { 
       var location = XHR..getResponseHeader('Location');
   },
   error: function(jqXHR) { }
}); 
```

在这里阅读更多[$.ajax](http://api.jquery.com/jQuery.ajax/)，在页面中搜索`.getResponseHeader`字符串。

[工作小提琴](http://jsfiddle.net/joycse06/yExUe/)

或者试试[这个](http://jsfiddle.net/joycse06/yExUe/1/)来检查所有`response headers`。

# api - 在 Sencha Touch 2 中创建 CRUD 模型

> ID：10879680
> 
> 赞同：0
> 
> 时间：2012-06-04T10:15:28.437
> 
> 标签：api, extjs, local-storage, sencha-touch-2, crud

我最近开始使用 sencha touch 2。我正在研究一个 CRUD 模型，并且我已经完成了整个脚本。该表单运行良好，但仅适用于“本地存储”。代码如下

```
 App.models.User = Ext.regModel('User', {
 fields: [
    {
        name: 'active',
        type: 'string'
    }, {
        name: 'id',
        type: 'int'
    }, {
        name: 'name',
        type: 'string'
    }, {
        name: 'resource_type',
        type: 'string'
    } ],

validations: [
    {
        type: 'presence',
        name: 'name'
    } ],proxy: {
    type: 'localstorage',
    id: 'sencha-users'}}); 
```

但我想使用某个 api 创建/读取/更新/删除数据，因此必须使用 rest/ajax 代理。但是，当我使用 ajax 代理时，更改不会反映在 api 的 url 中。如果有人愿意提供帮助，我可以分享更多细节。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:09:29.707

最简单的方法是当……说你的提交按钮被按下，然后触发了一个对你的 API 的 POST 请求：

```
Ext.Ajax.request({
        url: API_URL,
        params: {your_params_here},

        success: function(result) {
          // successfully saved on the server
        },

        failure: function(){
          // failed
        }   
    }); 
```

这意味着您的后端服务器必须具有用于保存数据的 API，例如：

> yourdomain?api=save_data¶m1=abc¶m2=xyz

# html - 显示表格的底部边框 - 在 Chrome 中不稳定

> ID：10879681
> 
> 赞同：3
> 
> 时间：2012-06-04T10:15:28.553
> 
> 标签：html, html-table

我遇到了一个表格底部边框的问题，有时无法在 Chrome 中显示。至少，我认为这只是 Chrome：作为一个不稳定的问题，有点难以确定。

[有问题的表格是http://www.littlehotelsofspain.co.uk](http://www.littlehotelsofspain.co.uk)底部的“Little Hotels Featured Hotel”、“Review of the Week”、“Subscribe to Our Newsletter”和“Find Us on Facebook”框。

代码是：

```
<table width="364" border="1" bordercolor="#999999" style="border-collapse:collapse">
<tr>
<td height="32" bgcolor="#EDEFF4" style="padding-left:10px">
<font face="Tahoma, Geneva, sans-serif" color="#333"><strong>Little Hotels Featured Hotel</strong></font>
</td>
</tr>
<tr>
<td style="padding-left:10px">
<br>
<?php dadedadeda ?>
</td>
</tr>
</table> 
```

通常，当我打开页面时，没有显示一两个底部边框。上下移动滚动滑块，使问题区域消失并重新出现，有时可以纠正或更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T20:54:02.250

因此，在遇到同样的问题之后，这似乎`border-collapse:collapse`是 webkit 浏览器中的问题。对我来说似乎对其进行排序的修复方法是将其更改为`border-collapse:separate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:41:36.267

我最近在 Chrome 中渲染表格边框时遇到了麻烦。一个帮助我的快速解决方法是将 tr 定义为 display:block。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:07:27.230

对我来说也很好......一个选择（如果你想麻烦的话）是将表格包装在一个带有 2px 填充的 div 中。

iMac 上的 Chrome 20 看起来不错。

# android - 地图标记放置在距离相应坐标较远的地方

> ID：10879684
> 
> 赞同：0
> 
> 时间：2012-06-04T10:15:55.317
> 
> 标签：android, android-mapview, android-maps, android-location

我正在使用谷歌地图应用程序，问题是当我放置纬度和经度标记（我手动输入 gps 坐标）时，标记显示了一些正确的位置，但不是确切的位置，它被放置了一些很远的距离到那个对应的坐标。当我在谷歌地图中检查这些坐标时![谷歌地图](../Images/acad417618a838f985ccffde86cf8d66.png)，它显示了一些带有两个标记（绿色和红色）的路边位置，但在 andorid mapview 中，标记与绿色引脚匹配，但我需要将标记放在红色引脚中。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:38:53.670

[http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

此链接提供了使用地图的详细教程。在那里，您可以找到一个简单的计算方法，将销钉放在确切的位置。

# jquery - jquery mobile data-transition="slide" 在使用 document.location.href = "" 时不起作用；插入 href=""

> ID：10879687
> 
> 赞同：2
> 
> 时间：2012-06-04T10:16:04.613
> 
> 标签：jquery, android, jquery-mobile

我目前正在尝试使用 jquery mobile 开发一个移动网站。而不是`href=""`我使用`onclick="document.location= ""`链接..

```
[example
<a onclick="document.location ='index.html';" title="back" data-transition="slide">Back</a>] 
```

但是数据转换不适用于这个`document.location.href=""`..有没有解决方案，这样我在使用时可以获得相同的转换效果`onclick="document.location= ""`..

而且`position:fixed`属性在android中也不起作用..是否有任何解决方案可以在相同的情况下工作..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:39:18.900

这是因为 Jquery Mobile 会拦截您的常规链接，然后通过 AJAX 加载页面。只有这样才有可能，因为所有的过渡效果（包括幻灯片）**都需要两个页面在 DOM 中**。

这是[JQM 导航模型的链接](http://jquerymobile.com/test/docs/pages/page-navmodel.html)

如您所见，JQM 劫持了一个链接，对新页面进行 AJAX 调用并加载*该页面上 div.data-role="page"*中的内容。新页面附加到 DOM，因此您的文档中有 2 个页面。

然后根据您的转换设置新的页面位置（例如在视口外的屏幕左上角）。然后发生转换，它在旧页面上方的新页面中滑动。完成后，旧页面被隐藏。

但是，如果您正在执行**document.location**，JQM 将不会拦截并仅加载您所说的页面，而无需任何 Ajax，因此无需任何转换。这与在链接上指定 rel="external" 相同。那么它也将是一个没有转换的“正常”链接。

长话短说： **如果您使用的是 document.location ，那么您就没有使用 Ajax 并且不会有任何转换**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:36:41.610

理想情况下，第一点不应在锚标签中使用 onclik。使用这样的东西

`<a href="javascript:loadPage('admin-list-notification.html?');" data-role="button" data-theme="a">Notification</a>`

# java - 如何使用 jGrowl 创建 JSF 消息

> ID：10879688
> 
> 赞同：1
> 
> 时间：2012-06-04T10:16:07.057
> 
> 标签：java, jquery, jsf, jsf-2, jgrowl

我需要像这样使用[jGrowl](http://stanlemon.net/pages/jgrowl)显示消息：

![在此处输入图像描述](../Images/de4a54f793ce870355a0e2e1a4ef04f0.png)

我需要使用 . 将消息存储到托管 bean 中`Map`。棘手的部分是我想在`Map`插入消息后将它们显示在右侧。我想的解决方案是让 Ajax 从浏览器无限调用服务器。我怎样才能在 JSF 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:15:24.027

如果您可以使用素面，那真的很容易

在 xhtml 中

```
<p:panel header="Map">  
    <h:panelGrid columns="3">  
        <h:outputText value="Map Info: " />   
        <p:inputText value="#{myBean.key}" label="Name"/>  
        <p:inputText value="#{myBean.value}" label="Name"/> 
    </h:panelGrid>  

    <p:commandButton value="Save" actionListener="#{myBean.save}" update="growl"/>  
</p:panel> 
```

在java中

公共类 MyBean {

```
private String key;  
private String value;  

public String getKey() {  
    return text;  
}  
public void setKey(String key) {  
    this.key = key;  
}

public String getValue() {  
    return value;  
}  
public void setValue(String value) {  
    this.value = value;  
}   

public void save(ActionEvent actionEvent) {  
    FacesContext context = FacesContext.getCurrentInstance();  

    context.addMessage(null, new FacesMessage("Successful", "Key : " + key + " Value : " + value));    
} 
```

}

有关更多详细信息，请使用此链接[http://www.primefaces.org/showcase-labs/ui/growl.jsf](http://www.primefaces.org/showcase-labs/ui/growl.jsf)

# php - 我们如何在网页上运行的视频上展示图片广告？

> ID：10879689
> 
> 赞同：-1
> 
> 时间：2012-06-04T10:16:07.280
> 
> 标签：php, html, video-streaming

我需要在管理面板上提供一个工具来将幻灯片/图像/广告插入到网页中运行的视频中。

管理员用户会将幻灯片推送到正在运行的视频，然后我们需要保存时间和幻灯片，以便稍后在运行此视频时，我们会在视频中获得相同的广告/幻灯片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:54:35.083

[来自 Mozilla 的PopCorn.JS](http://popcornjs.org/)将是理想的选择。

它允许您根据视频的时间显示和删除 HTML 片段。

# java - Spring DSL 编辑和保存代码 - 有可能吗？

> ID：10879691
> 
> 赞同：0
> 
> 时间：2012-06-04T10:16:12.100
> 
> 标签：java, spring, grails, dsl

我需要在 grails 中动态配置 spring bean 并将配置保存在项目中，以便在服务器重新启动后更改的配置不会丢失。

是否可以通过使用spring DSL或其他方式来做到这一点？Spring XML 不适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:30:49.413

我假设您想在应用程序启动后将 bean 动态注册到 applicationContext。

你可以用这样的代码来做到这一点：

```
def grailsApplication 
... 
def beanDef = new GenericBeanDefinition(beanClass: MyBean, 
  autowireMode:AbstractBeanDefinition.AUTOWIRE_BY_NAME) 

String beanName = '...' 

grailsApplication.mainContext.registerBeanDefinition beanName, beanDef 
```

您还可以在注册之前指定 bean 范围（例如，如果它是原型 bean）并在 GenericBeanDefinition 中设置其他属性。

来源[http://grails.1312388.n4.nabble.com/Apache-Commons-IO-2-0-1-td3307531.html#a3307950](http://grails.1312388.n4.nabble.com/Apache-Commons-IO-2-0-1-td3307531.html#a3307950)

# webapp2 - Werkzeug 和 WebApp2 - 调试显示和控制台不工作

> ID：10879702
> 
> 赞同：3
> 
> 时间：2012-06-04T10:17:11.680
> 
> 标签：webapp2, werkzeug

我想将 Werkzeug 用作本地开发服务器，但无法让 DebugApplication 中间件按文档说明工作 - [Werkzeug Debugging](http://werkzeug.pocoo.org/docs/debug/)。这里有什么问题？

```
import webapp2 
from system import config 
from werkzeug.debug import DebuggedApplication 
from werkzeug.serving import run_simple

application = webapp2.WSGIApplication(routes=config.routes, debug=False, config=config.options)  
debugged_application = DebuggedApplication(application)

def main():
    run_simple('localhost', 4000, debugged_application, use_reloader=True, use_debugger=True, threaded=True)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T08:20:41.933

我认为 DebuggedApplication 中间件试图达到与 相同的效果`use_debugger=True`，因此无需同时使用两者。问题是`webapp2.WSGIApplication`它在通过调试器中间件之前添加了自己的错误处理，因此禁止 werkzeug 调试器查看实际异常。

我对此的解决方案是扩展 webapp2 提供的基本 WSGIApplication 以重新引发原始异常。`True`它适用于 python 2.7，并且当且仅当在 Application 构造函数中设置了调试标志时才会传递异常。

```
class Application(webapp2.WSGIApplication):
    def _internal_error(self, exception):
        if self.debug:
            raise
        return super(Application, self)._internal_error(exception) 
```

不确定这是最干净的方法，但它对我有用。

# mediacontroller - 向 MediaController 添加一个按钮

> ID：10879703
> 
> 赞同：7
> 
> 时间：2012-06-04T10:17:15.580
> 
> 标签：mediacontroller

我想向 MediaController 添加一个按钮。所以我扩展了 MediaController 类，创建了一个按钮并将其添加到框架布局中。但是新添加的按钮在运行时没有反映。

请在下面找到代码

```
 public class VideoController extends MediaController {

private Button searchButton;
public VideoController(Context context) {
    super(context);

    searchButton = new Button(context);
    searchButton.setText("Search");
    FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.gravity = Gravity.RIGHT;
    System.out.println("Adding a button");

    addView(searchButton, params);
    //updateViewLayout(this, params);
}

@Override
public void hide() {
}
} 
```

我在这里做错了什么。任何建议都会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T19:19:53.703

你必须`setAnchorView`在你的`VideoController`类中覆盖：

```
 @Override 
 public void setAnchorView(View view) {
     super.setAnchorView(view);

     Button searchButton = new Button(context);
     searchButton.setText("Search");
     FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
     params.gravity = Gravity.RIGHT;
     addView(searchButton, params);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T14:38:44.473

实际上这是因为媒体控制器的视图是稍后构造的（在**makeControllerView**方法中）。所以你需要覆盖它并在那里添加按钮。

不幸的是，它目前是隐藏的。覆盖 setAnchorView 似乎是最好的解决方案。

# php - 针对我们特定应用程序的 MongoDB 索引与数组实现

> ID：10879709
> 
> 赞同：0
> 
> 时间：2012-06-04T10:18:10.260
> 
> 标签：php, mongodb

这是问题所在。我们正在使用 MongoDB-PHP。

在我们的应用程序中，我们有许多用户组，用户可以在其中发帖。目前，我们正在以数组格式在该组的文档中维护这些组的帖子 ID。因此，当我们需要抓取前 10 个帖子时，我们可以使用切片操作从数组中抓取它们。

例如：**案例 1**

collection posts: //这个集合存储了各个组的所有帖子

```
{  
     {"_id":"1","post_text":"....",...}  
     {"_id":"2","post_text":"....",...}  
}  ` 
```

集合组：//此集合包含每个组的文档

```
{  
    {  
        "_id":"1"  
        "name":"Group ABC",  
        "post_ids":{"1","2"...."100"}      
        //1,2..100 represents MongoIDs of corresponding posts of this group  
        //so i can slice first 10 posts of this group when someone visits this page
    }  
} 
```

`
**与将这些帖子 ID 存储在组的文档中相反**，**如果我们**对组 ID 使用索引并将其存储在帖子集合中。
例如：**案例 2**

收藏帖

```
{  
    {"_id":"1","group_id":"1","post_text":"....",...}  
    {"_id":"2","group_id":"2","post_text":"....",...}  
} 
```

另请注意，在案例 1 中，我们不必应用任何排序操作，因为数组元素是按顺序推送的，而在案例 2 中，我们必须在查找操作之后应用排序（按时间戳标准），这将从内存中读取所有文档并然后对它们应用排序。

考虑到索引将存储在 RAM 中，谁的性能会更好？

如果这个问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:42:51.353

做一个查询（案例#2）会比做两个查询更快。此外，使文档更大（例如，将新帖子附加到 #1 中的 post_ids）是一个相当缓慢的操作。

# asp.net - 以编程方式渲染 Dundas 图表抛出异常

> ID：10879711
> 
> 赞同：1
> 
> 时间：2012-06-04T10:18:15.847
> 
> 标签：asp.net, charts, code-behind, dundas

我正在制作一个应用程序，该应用程序在加载 ASP.NET 页面时要呈现非常重的图表（从数据的意义上来说），由于这个原因，页面需要很长时间才能加载并显示白屏。我正在为我的图表使用[Dundas](http://www.dundas.com)图表 API。

作为一种解决方法，我试图在 Ajax 调用中加载图表。在这种方法中，我一次呈现整个页面，一旦呈现，我向服务器发送 Ajax 调用以进行图表控制。

要呈现图表控件，我使用以下代码

```
private string GetSummaryGraph()
    {
        Chart chart_analysis = new Chart();
        chart_analysis.ID = "chart_analysis_1";
        chart_analysis.BackColor = Color.Black;
        chart_analysis.EnableViewState = true;
        chart_analysis.Height = 217;
        chart_analysis.ImageStorageMode = ImageStorageMode.UseImageUrl;
        chart_analysis.ImageUrl = "~/MyApp/ChartImages/MyChart_#SEQ(1000,720)";
        chart_analysis.ImageType = ChartImageType.Png;
        chart_analysis.Palette = ChartColorPalette.Dundas;
        chart_analysis.ViewStateContent = SerializationContent.All;
        chart_analysis.Width = 996;

        // Set all styling here, like ChartAreas, Series.

        string chartImgURL = chart_analysis.GetCurrentImageUrl(); // this line throws exception "Object reference not set to instance of object"

        string html_chart = "";
        StringWriter sw = new StringWriter();
        HtmlTextWriter htw = new HtmlTextWriter(sw);
        chart_analysis.RenderControl(htw);

        html_chart = sw.ToString();
        return html_chart;
} 
```

出于某种原因，当我调用该函数时`chart_analysis.GetCurrentImageUrl();`，它会通过以下堆栈跟踪引发异常

```
Object reference not set to an instance of an object.
at Dundas.Charting.WebControl.Chart.a(String )
   at Dundas.Charting.WebControl.Chart.GetCurrentImageUrl()
   at GetSummary.GetSummaryGraph() in D:\Projects\MyApp\GetSummary.aspx.cs:line 4492 
```

但是，如果我将图表控件放在`.aspx`页面而不是`.aspx.cs`文件中，则此功能可以正常工作。

**编辑**

我也尝试在调用之前渲染控制`GetCurrentImageURL()`，在这种情况下我也得到了以下异常。

```
Object reference not set to an instance of an object.
   at Dundas.Charting.WebControl.Chart.a(String )
   at Dundas.Charting.WebControl.Chart.GetCurrentImageUrl()
   at Dundas.Charting.WebControl.Chart.Render(HtmlTextWriter output)
   at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
   at System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
   at GetSummary.GetSummaryGraph() in D:\Projects\MyApp\GetSummary.aspx:line 4494
   at GetSummary.LoadChartData() in D:\Projects\MyApp\GetSummary.aspx:line 4378 
```

看起来我缺少一些在将图表放入`.aspx`文件时自动完成的初始化。但我无法找到这到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:27:08.523

您收到此错误是因为当时您要求它，图表控件尚未运行。

此外，您将图表控件运行到字符串中，而不是直接在页面上。

考虑两个想法。

**在渲染控件后**，以太会尝试获取当前图像 url ，而你不需要它，因为控件会自动运行到内存中，并且你会获得必须放置在页面上的某个点的 html。

在任何情况下，您都需要运行控制步骤以使其参数可用。

# asp.net-mvc-4 - asp.net mvc4 RC 解析 data-* 属性中的 url

> ID：10879712
> 
> 赞同：2
> 
> 时间：2012-06-04T10:18:19.637
> 
> 标签：asp.net-mvc-4

由于我已经安装了 mvc4 RC，所以由应用程序根目录替换的 razor autoresolve url在 html 5属性`~`中不起作用。`data-*`IE：

在 ASP.NET MVC4 测试版中：

```
<table id="userTable" class="dataTable" data-table-source="~/api/user/Users">
    <tr>
        <td data-field="OperatorCode">
           @user.Code
        </td>
        <td>
            <a href="~/user/edit">edit</a>
        </td>
</table> 
```

被转化为

```
<table id="userTable" class="dataTable" data-table-source="/api/user/Users">
    <tr>
        <td data-field="OperatorCode">
           operatorCode 1
        </td>
        <td>
            <a href="/user/edit">edit</a>
        </td>
</table> 
```

但在 RC 中，它被转换为：

```
<table id="userTable" class="dataTable" data-table-source="~/api/user/Users">
    <tr>
        <td data-field="OperatorCode">
           operatorCode 1
        </td>
        <td>
            <a href="/user/edit">edit</a>
        </td>
</table> 
```

正如您在此版本中看到的那样，`~`仍然存在。是设计使然吗？如果是，是否有任何配置参数需要更改以重新激活 html5`data-*`属性中的分辨率？我在发行说明中没有找到解释。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:40:01.477

这也发生在 MVC4 final 中。这是有道理的，这是为了避免您不想为某些数据参数解析“~”的情况。

简单的解决方法是将它们再次包装在 @Url.Content 中，虽然不是很好，但它可以工作。

```
<html data-root="@Url.Content("~/")"> 
```

PS。我检查了 MVC4 源代码。没有启用解析“data-”属性的选项。“data-”属性被简单地视为文字。

# javascript - 自定义对象中的变量范围

> ID：10879713
> 
> 赞同：1
> 
> 时间：2012-06-04T10:18:27.787
> 
> 标签：javascript, jquery, object, scope

我需要`buttons`从函数访问属性，`enableNav`但我的问题是我不能因为`this`引用指向`enableNav`函数而不是对象本身，我该如何正确获取`buttons`？

```
(function() {

var MyCustomObject = {

    init: function(config) {
        this.myvar = config.myvar;
        this.buttons = config.buttons;
        this.enableNav();
    },

    enableNav: function() {
       // need to use buttons here!!
    }

};

MyCustomObject.init({
    myVar: 3,
    buttons: $('button')
});
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:21:00.243

> `this``enableNav`函数的引用点

不，它没有。

你在这里称呼它：

```
this.enableNav(); 
```

所以 inside `enableNav`,`this`将是`this`那条线上的任何值。

（因为，假设`new`没有被使用，当你调用`foo.bar.baz()`然后`baz`获取`bar`它的 vale 时`this`）。

所以：

```
enableNav: function() {
   this.buttons.append(foo); // or whatever
} 
```

# c# - Fizzler 和 QuerySelectorAll

> ID：10879720
> 
> 赞同：5
> 
> 时间：2012-06-04T10:19:47.070
> 
> 标签：c#, html-agility-pack

我发现[Fizzler](http://code.google.com/p/fizzler/)作为 html parser 和 jQuery like selector 。但似乎视觉工作室无法解决`QuerySelectorAll`方法。

这是我的代码：

```
using HtmlAgilityPack;
HtmlAgilityPack.HtmlWeb web = new HtmlWeb();
HtmlAgilityPack.HtmlDocument document = web.Load(url);
var c = document.QuerySelectorAll('div'); 
```

我错过了任何参考资料吗？

**编辑：** 经过一番搜索，我找到了使用 Fizzler 的代码

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(html);
const string search = "td";
SelectorGenerator<HtmlNode> selectorGenerator1 = new SelectorGenerator<HtmlNode>(new HtmlNodeOps());
HumanReadableSelectorGenerator selectorGenerator2 = new HumanReadableSelectorGenerator();
Parser.Parse(search, new SelectorGeneratorTee(selectorGenerator1, selectorGenerator2));
var c =  selectorGenerator1.Selector(Enumerable.Repeat(doc.DocumentNode, 1)).ToList(); 
```

我仍在为我的问题寻找好的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T18:25:00.313

大概是这样的：

```
using Fizzler.Systems.HtmlAgilityPack; 
```

也给 CsQuery 一个镜头，我的 C# jQuery 端口：[https ://github.com/jamietre/CsQuery](https://github.com/jamietre/CsQuery)

```
var dom = CQ.CreateFromUrl(url);
var c = dom["div"]; 
```

.. 加上你从 jQuery 中习惯的一切。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-18T14:53:44.927

老问题，但这有效：

```
using HtmlAgilityPack;
using Fizzler.Systems.HtmlAgilityPack;

var web = new HtmlWeb();
var document = web.Load("some-url");
var c = document.DocumentNode.QuerySelectorAll("div"); 
```

`QuerySelectorAll`是该`HtmlNode`类型的扩展方法，但您试图在`HtmlDocument`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-02T07:39:41.060

您很可能缺少对`Fizzler.Systems.HtmlAgilityPack`

我建议添加这个 nuget 包。[菲兹勒](https://www.nuget.org/packages/Fizzler.Systems.HtmlAgilityPack/1.0.0)

```
using Fizzler.Systems.HtmlAgilityPack;
using HtmlAgilityPack;    
using HtmlDoc = HtmlAgilityPack.HtmlDocument; 
```

然后你可以像这样使用它

```
var html = new HtmlDoc();
html.LoadHtml(HtmlText);

// Fizzler for HtmlAgilityPack is implemented as the 
// QuerySelectorAll extension method on HtmlNode

var document = html.DocumentNode;

// yields: [<p class="content">Fizzler</p>]
document.QuerySelectorAll(".content"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T14:42:54.430

如果使用 QuerySelectorAll 你应该创建一个数组来检查 div 是否不为空，然后你可以使用 queryselector

```
 HtmlNode[] test= html.DocumentNode.QuerySelectorAll("div.hlogo").ToArray();
      for (int rowcounter = 0; rowcounter < test.Count(); rowcounter++)
       {
      var logoname = test[rowcounter].QuerySelector("a").InnerText;    
       } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-14T11:00:32.613

我有同样的问题并解决了。也许你犯了我同样的错误。我在一些配置文件中定义了程序集。当我删除所有并重新安装软件包时，一直运行良好。

*   卸载 `Fizzler`，`Fizzler.Systems.HtmlAgilityPack`在 nuget 管理器中。
*   从 bin 和 debug 文件夹中删除所有这些 dll。
*   删除appconfig和webconfig中关于这些dll的所有依赖程序集
*   在管理 nuget 包中安装最新版本的`Fizzler`和`Fizzler.Systems.HtmlAgilityPack`包。

    之后，您可以`QuerySelectorAll`在任何地方使用其他方法而不会出错。

不要单独安装 HtmlAgilityPack。当你安装 Fizzler 时，HtmlAgilityPack 会自动安装。

# c# - 访问数据库创建问题

> ID：10879722
> 
> 赞同：0
> 
> 时间：2012-06-04T10:20:06.383
> 
> 标签：c#

我创建了一个可以访问其后端的 Windows 应用程序。问题是，当我安装它时，当我尝试插入或更新操作时，它显示操作必须使用可更新查询....之后我更改了访问数据库所在文件夹的权限。现在它工作正常。现在问题在于我安装它的每台计算机都需要更改程序文件中数据库文件夹的写权限。是否有任何解决方案可以在设置创建时为我的文件夹设置权限。或您知道的任何其他解决方案.....提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:25:01.247

不要将数据库放在程序文件夹中。
在 Win7 或 Vista 等最新操作系统中，出于安全原因，此文件夹是只读的。

最好的位置是 enum 标识的文件夹`SpecialFolder.ApplicationData`。
您可以通过以下方式获得物理路径：

```
string commonAppData = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData); 
```

在此路径中，您应该为您的应用程序提供一个专用路径。

```
string myDataPath = Path.Combine(commonAppData, "MyApplicationDataFolder"); 
```

仅当应用程序的使用人数不超过安装该软件的用户时，这种情况才适用。如果您需要多用户访问您的数据库，那么您自己在本地磁盘或网络共享中创建一个文件夹，每个用户都可以访问该数据库。

通常将数据库后端放置在用户机器上或网络共享中的工作由安装工具保留。市场上有许多免费和付费的工具。我不知道您使用哪种工具，也无法推荐其中一种。但是，当您选择/使用一个时，您应该检查这些基本功能是否存在：

*   能够引用 Windows 环境中存在的特殊文件夹。（MyDocuments、ApplicationData 等...）
*   能够在这些特殊文件夹中创建子文件夹 (MyApplicationData)
*   能够创建网络共享或使用已经存在的网络共享
*   能够更新存储连接字符串的配置文件（字符串替换）

如果部署工具按预期工作，您不需要在应用程序内执行任何操作，您可以从配置文件中读取连接字符串并打开数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:29:15.427

在下面创建一个内容完全相同的文本文件，并保存扩展名为“.reg”的文件。

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Access\Security\Trusted Locations\Location2]
"Path"="C:\\Program Files\\Microsoft Office\\Office12\\ACCWIZ1\\"
"Description"="Access default location: Wizard Databases" 
```

双击这个来测试这个注册表文件。它将在注册表中创建一个新条目。

使用安装程序保存 reg 文件并使用安装程序运行它。您也可以从 c# 代码执行此文件。

[registry_hacks_reg](http://www.computerperformance.co.uk/Registry/registry_hacks_reg.htm)

# javascript - 想要使用 jQuery .nextUntill 但排除中间的 div

> ID：10879726
> 
> 赞同：5
> 
> 时间：2012-06-04T10:20:30.463
> 
> 标签：javascript, jquery, css

我是 jQuery 新手，所以请原谅！

我有一个 PHP 函数，它从 MySQL 数据库返回一个博客；它返回标题、副标题和内容。

```
$result = getData();  
            while($row = mysqli_fetch_array($result))
            {
                extract($row);
                ?>
                    <div class="headline"><?php echo $headline ?></div>
                    <div class="subtitle"><?php echo $subTitle ?></div>
                    <div class="content"><?php echo $content ?></div>
                    <?php
            } 
```

到目前为止显示了三个条目。我有一个 jQuery，它隐藏内容并在使用 nextUntill 方法和内容上的 .slideToggle 单击标题时展开它。

```
 $(".content").hide();

$(".headline").click(function(){
    $(this).nextUntil(".headline").slideToggle(500);  
}); 
```

我的问题是在每个 div 上执行 slideToggle 直到下一个标题，其中包括副标题。因此，当单击标题时，会显示内容，但标题会消失。

我不能只选择要滑动的内容，因为它会滑动所有三个内容 div 然后显示。

有没有办法在标题和内容之间排除副标题？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:23:40.447

假设我对您的理解正确，您想隐藏下一个`.content`元素。如果这是正确的，您可以从以下同级集合中获取与该选择器匹配的第一个元素：

```
$(this).nextAll(".content").eq(0).slideToggle(500); 
```

或者，按照您的建议进行操作，您可以使用`not`：

```
$(this).nextUntil(".headline").not(".subtitle").slideToggle(500); 
```

这是第一个版本的[工作示例](http://jsfiddle.net/BspqF/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:23:50.093

我猜测，因为我以这种方式理解问题，所以你可以尝试`not`Selector [.not()](http://api.jquery.com/not/)

```
$(this).nextUntil(".headline").not(".subtitle").slideToggle(500); 
```

# c - 从 c prog 中查找后台进程的 pid

> ID：10879727
> 
> 赞同：0
> 
> 时间：2012-06-04T10:20:33.543
> 
> 标签：c, unix

我正在编写一个用于创建 shell 的程序，它处理基本功能，例如执行基本命令、管道、重定向、执行后台进程。但是我无法杀死后台进程，我需要知道后台的 pid()进程，以便我可以与 pid 一起发送终止调用。知道如何从 ac pogram 获取后台进程的 pid() 吗？为了运行命令，我从命令行获取输入到一个数组中，解析它并将命令放入 arr[0] 和后续索引中的后续参数，我将系统的 PATH 放入另一个数组并将它们存储为字符串通过使用 strtok 和 delim 选项作为:，在此之后我将路径与命令连接起来，然后执行 execv()。

我被这部分困住了，我必须杀死一个后台进程。任何建议都会非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:50:27.133

你应该这样做：

```
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>

int main()
{
    pid_t pID = fork();
    if (pID == 0) {
        execl("/bin/ls", "/bin/ls", "-r", "-t", "-l", (char *) 0);
    } else {
        waitpid(pID, NULL, 0); // wait for child process
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:50:54.400

`fork`返回父进程中子进程的PID，将其存储在某个地方，然后用它来杀死？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:32:46.997

可以调用[getpid()](http://linux.die.net/man/2/getpid)（在 childprosses 中），或者调用[fork()时将 child 的 pid 返回给 parent](http://linux.die.net/man/2/fork)

# html - CSS拼图：表格标题的绝对位置

> ID：10879728
> 
> 赞同：3
> 
> 时间：2012-06-04T10:20:38.347
> 
> 标签：html, css

## HTML结构

我有以下 html 结构：**这是一个我无法编辑的固定结构**

```
<div class="separator"></div>

<table class="myClass">
    <thead>
        <tr>
            <th>title1</th>
            <th>title2</th>
        </tr>
    </thead>
    ...
</table>

<div class="separator"></div> 
```

* * *

## CSS

第一个和最后一个 div 是分隔符，其 css 为：

```
.separator {
   height: 20px;
   background-color: gray;
} 
```

**请注意，分隔符是复杂的小部件，而不仅仅是设计（我有意简化了示例）**

* * *

## 问题

我想将表格标题放在第一个分隔符**之前**，但表格主体必须保留在两个分隔符之间。

* * *

## 我试过的

1.  这是用于测试的初始 jsfiddle：http: [//jsfiddle.net/prhgW/1/](http://jsfiddle.net/prhgW/1/)

2.  我试图定位绝对的 thead 标签并使用负的顶部值，但是这样做时，thead 的宽度小于表格的 100%，因此列标题与列值有关。小提琴：http: [//jsfiddle.net/prhgW/2/](http://jsfiddle.net/prhgW/2/)

3.  我也尝试将宽度设置为 100%，但 tr 标签不遵循该规则：http: [//jsfiddle.net/prhgW/3/](http://jsfiddle.net/prhgW/3/)

* * *

## 附加规则

*   我想避免表格或任何元素的固定宽度/高度（因此，绝对定位一切都是不可接受的解决方案）
*   我想要跨浏览器兼容性
*   避免 javascript 修复（纯 css 会更好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:03:25.427

这适用于您的问题吗？

[http://jsfiddle.net/prhgW/16/](http://jsfiddle.net/prhgW/16/)

我在下方添加了一些空间`<th>`并将第一个分隔符向下移动。如果您知道分隔符的高度和`<th>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T12:21:43.170

我一直在用纯 CSS 玩弄这个，这是我的[分叉小提琴](http://jsfiddle.net/MattiasBuelens/RVkgD/)。

基本上，我使用直接兄弟组合`.separator + .myClass`器来定位分隔符后面的表。然后我将整个表格向上移动，使标题在分隔符上方对齐。这一举动得到了相同的补偿，`margin-bottom`因此表格下方的内容整齐地跟随表格。最后，我在标题单元格上放置了一些填充，`thead`以将其推`tbody`到分隔符下方。

可能的警告：

*   分隔符高度需要固定且已知。这可能不是太大的问题。
*   标题的高度需要固定且已知。我`1em`默认使用。
*   如果分隔符正上方有内容，则可能会被表格重叠。这是问题所固有的：您不能有条件地对分隔符应用更多填充。您*可以*定位分隔符后面的表格，但*不能*定位后面跟着表格的分隔符。兄弟组合器仅适用于前一个兄弟之后的元素，反之则不行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:24:33.407

如果您想要的只是表格标题下方和最后一行下方的灰线，则可以使用 css 边框属性设置样式，如下所示

[http://jsfiddle.net/vzGtF/](http://jsfiddle.net/vzGtF/)

我已经使用这些类删除了分隔符类和 div。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T11:51:46.580

我使用了一点 jquery 在表格标题下方附加了一行。

```
<script>
$(document).ready(function(){
$('.myClass thead').append('<tr><td class="separator" colspan=2></td><tr>');
});
</script> 
```

# opencv - 面部表情检测

> ID：10879731
> 
> 赞同：4
> 
> 时间：2012-06-04T10:20:48.080
> 
> 标签：opencv, computer-vision, face-recognition

我目前正在做一个项目，我必须提取用户（一次只有一个用户）的面部表情，比如悲伤或快乐。

有很多程序/API 可以进行人脸检测，但我没有找到任何可以进行自动表情识别的程序/API。

到目前为止我发现的最好的可能性：

[- 使用Luxand FaceSDK](http://www.luxand.com/facesdk)，它可以让我访问面部内的 66 个不同点，所以我仍然需要手动将它们映射到表情。

我之前使用 OpenCV 进行人脸检测，效果很好，所以如果有人对如何使用 OpenCV 进行操作有一些提示，那就太好了！

欢迎任何编程语言（首选Java）。

[OpenCV 板上](http://opencv-users.1802565.n2.nabble.com/Facial-expression-recognition-td3981566.html)的一些用户建议寻找 AAM（主动 apereance 模型）和 ASM（主动形状模型），但我发现的只是论文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T10:31:47.737

您正在寻找机器学习解决方案。FaceSDK 看起来像一个很好的特征提取器。我认为不会有可用的库来解决您的特定问题。你最好的选择是：

*   选择带有 java 实现的机器学习框架（SVM、PCA）
*   拍摄一系列照片并用目标表情（快乐或悲伤）自己标记它们
*   计算你的模型并测试它

这涉及到一些关于机器学习的知识。

# r - 直接从加载中存储变量

> ID：10879732
> 
> 赞同：2
> 
> 时间：2012-06-04T10:20:50.337
> 
> 标签：r, variables, load

我有一个 RData "EgRData" 我使用加载函数将它加载到 R 控制台中。

```
load("E.g.RData") 
```

它有一个变量，例如在 RData 中。我正在这样做-

```
e <- load("E.g.RData") 
```

然后 e 将字符向量作为“eg”，但我希望将 eg 的内容放入 e。

有没有办法在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:26:48.650

这可以使用以下方法完成：

```
y <- get(load("path/E.g.RData")) 
```

y 将包含 eg 变量的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T10:28:11.893

是的，问题是 Eg 在保存对象期间保持其名称。您可以尝试将新名称“e”分配给 Eg 对象，然后删除 Eg 对象：

```
E.g <- runif(100)
save(E.g, file="E.g.Rdata")
load("E.g.Rdata")
assign("e", E.g)
rm(E.g) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:58:04.840

与其使用该`load`函数及其默认值（它会覆盖全局工作区中的任何同名内容），您可能更喜欢使用`attach`附加工作区，然后仅使用所需名称复制感兴趣的对象，然后分离工作区。

# ios - UINavigationcontroller popViewcontroller 在第二次尝试时不起作用

> ID：10879738
> 
> 赞同：1
> 
> 时间：2012-06-04T10:21:18.870
> 
> 标签：ios, uinavigationcontroller, popviewcontrolleranimated

我的应用程序遇到了一个小问题。这是一个简单的问题，但我无法找出崩溃的原因。

我有一个简单的视图控制器，只有一个 web 视图（在情节提要中创建和链接）（启用了 ARC）：

```
@implementation BPActivateController
@synthesize mainWebView;

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {

    }
    return self;
}

- (void)viewDidLoad
{
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/test.php?code=%@", BASE_URL, [[NSUserDefaults standardUserDefaults] objectForKey:@"uniqueIdentifier"]]]; 
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [mainWebView loadRequest:requestObj];

    [super viewDidLoad];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSString *html = [webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"];
    if ([html rangeOfString:@"<h1>Not Found</h1>"].location != NSNotFound)
    {
        [self.navigationController popViewControllerAnimated:YES];
        NSLog(@"pop the view controller");
    }
}

- (void)viewDidUnload
{
    [self setMainWebView:nil];
    [super viewDidUnload];
} 
```

视图第一次打开时调用 popViewControllerAnimated 并将用户重定向回最后一个视图控制器。但是当视图再次打开时，在调用 popViewControllerAnimated 后给了我一个 EXEC_BAD_ACCESS。当我启用僵尸代码给我以下跟踪：

```
2012-06-04 11:51:12.717 actusmedicus[410:707] pop the view controller
2012-06-04 11:51:12.720 actusmedicus[410:707] *** -[BPActivateController respondsToSelector:]: message sent to deallocated instance 0xc6d95b0 
```

我已经尝试了几件事，但仍然不清楚正在调用什么选择器。我怀疑webview仍然很忙..

任何人都有让我重回正轨的想法？

* * *

**[编辑]**

EXEC_BAD_ACCESS 通过将 webview 的委托设置为 nil 来修复。但真正的问题仍然存在，第一次将视图推送到 UINavigation 堆栈时，Web 视图确实加载，并且在 404 之后 popViewControllerAnimated 成功执行。但是第二次我们将相同的视图推送到 UINavigation 堆栈上（与我们第一次做的方式相同）popViewControllerAnimated 没有做任何事情。我检查了它是否为零，但这似乎不是问题..

我的第一个想法是它在另一个线程中运行并且 UINavigationcontroller 不存在那里。我在 performSelectorOnMainThread 的帮助下排除了这种可能性。

最后我添加了一个按钮来手动调用 popViewControllerAnimated 并且每次都有效，那么为什么当我以编程方式调用它时它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:51:28.313

> > 我怀疑webview仍然很忙..

如果是这样，那么在您的 dealloc 中调用 stopLoading 方法。

您还应该在 dealloc 中将委托设置为 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T13:36:34.750

确保您没有对目标视图控制器进行两次搜索。就我而言，我的代码两次触发了 segue。所以我不得不点击返回按钮两次才能回到我的主控制器。

# javascript - 如何在 .ajax 中调用函数？

> ID：10879741
> 
> 赞同：0
> 
> 时间：2012-06-04T10:21:30.773
> 
> 标签：javascript, jquery

我有以下代码，我想在这里调用初始化函数；google.maps.event.addDomListener(window, 'load', 初始化);

但是我收到了这个错误；错误：未定义初始化。

这里有什么问题？

```
$(function CheckinMap() {
        $.ajax({
            type: "GET",
            url: "content/home/index.cs.asp?Process=ViewCheckinMap",
            success:     function initialize(data) {
                var center = new google.maps.LatLng(48.404840395764175, 2.6845264434814453);

                var map = new google.maps.Map(document.getElementById('map'), {
                  zoom: 2,
                  center: center,
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  maxZoom: 4
                });

                var markers = [];
                for (var i = 0; i < data.users.length; i++) {
                  var location = data.users[i];
                  var latLng = new google.maps.LatLng(location.latitude,
                      location.longitude);
                  var marker = new google.maps.Marker({
                    position: latLng
                  });
                  markers.push(marker);
                }
                var markerCluster = new MarkerClusterer(map, markers);
            },
            error: function (data) {
                $("#checkinmap").append(data);
            }
        });
    });
google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:25:42.317

如果你想为jQuery方法和*第三*个参数使用一个函数，那么你必须在定义它时将它存储在某个地方，而不是直接将它传递给.`success``addDomListener``success`

某个地方也必须在您调用 to`ajax`和 to的范围内`addDomLister`。

移动`function initialize(data)`，使其出现在您当前的第 1 行之前。

然后说`success: initialize`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:26:33.600

您正在定义`intialize`内部`CheckinMap`范围，然后尝试在代码的最后一行中在该范围之外使用它。如果您确实需要在两个地方都有它，请在外部定义它，然后在`success`属性值中引用。

```
function initialize(data) {
    var center = new google.maps.LatLng(48.404840395764175, 2.6845264434814453);

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 2,
      center: center,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      maxZoom: 4
    });

    var markers = [];
    for (var i = 0; i < data.users.length; i++) {
      var location = data.users[i];
      var latLng = new google.maps.LatLng(location.latitude,
          location.longitude);
      var marker = new google.maps.Marker({
        position: latLng
      });
      markers.push(marker);
    }
    var markerCluster = new MarkerClusterer(map, markers);
}

$(function CheckinMap() {
        $.ajax({
            type: "GET",
            url: "content/home/index.cs.asp?Process=ViewCheckinMap",
            success: initialize,
            error: function (data) {
                $("#checkinmap").append(data);
            }
        });
    });
google.maps.event.addDomListener(window, 'load', initialize); 
```

# javascript - 使用 Knockout JS 部分映射到现有对象

> ID：10879742
> 
> 赞同：3
> 
> 时间：2012-06-04T10:21:34.133
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我有一个复杂的模型，其中包含大量 ko.observable、ko.observableArray 和嵌套对象，其中包含更多这些 observables。

现在，最初我必须在每个模型中创建方法，这些模型组成了更大的模型来获取 Json 数据，然后填充它的 observables。现在我尝试了 ko.mapping 插件，但是当我使用它时：

```
ko.mapping.fromJS(jsonData, {}, existingModel); 
```

这似乎适用于大多数对象，但是我注意到，当我这样做时，它似乎完全覆盖了对象，并且当我使用淘汰赛 js 验证时，即：

```
this.Name = ko.observable().extend({ required: true });
this.Age = ko.observable().extend({ required: true, digits: true }); 
```

问题是在使用映射模块时这些验证属性似乎被删除了，所以有没有办法让映射插件只更新值，而不是篡改对象模式......

如果有更好的方法将 Json 数据应用于模型，我很乐意使用除 ko.mapping 之外的不同机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:34:21.010

我最终不得不坚持我的方法，尽管我确实通过编写下面的简单插件来减少为填充现有字段而编写的大量代码：

[https://github.com/grofit/knockout.mapping.merge](https://github.com/grofit/knockout.mapping.merge)

它非常简单，除了将具有相同名称的对象与其现有字段匹配之外并没有做太多事情。我希望管理子对象的创建，因此它可以填充整个对象树，但可惜我没时间了。

希望它至少会展示一个可能的解决方案，而无需编写大量冗长的代码来更新模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:17:11.670

来自[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)（**高级用法**部分）

> 有时可能需要对映射的执行方式进行更多控制。这是使用映射选项完成的。它们可以在 ko.mapping.fromJS 调用期间指定。在随后的调用中，您无需再次指定它们。

因此，例如，您可以尝试这样的事情：

```
var self = this;
var mapping = {
    update: function(arg) {
        var data = arg.data;

        return {
            Name: data.Name && self.Name(data.Name),
            Age: data.Age && self.Age(data.Age)
        }
    }
};
ko.mapping.fromJS(data, mapping); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T17:09:44.923

如果你的需求不大，你可以用一个简单的 vanilla JS for 循环来做到这一点。此示例假设您有一个名为“myViewModel”的现有模型，以及一个名为“jsonData”的部分刷新数据：

```
for (var prop in jsonData) {
    if (myViewModel.hasOwnProperty(prop)) {
        myViewModel[prop](jsonData[prop]);
     }
} 
```

由于它只是更新值，因此您附加到可观察对象的任何其他属性都应保留在原处。

# c# - 即使在验证模式后，正则表达式模式检查也不起作用

> ID：10879748
> 
> 赞同：0
> 
> 时间：2012-06-04T10:21:46.610
> 
> 标签：c#, regex, textbox, passwords, pattern-matching

我有一个密码框，我要对照正则表达式模式进行检查。我已经有了另外两个相同类型的函数，它们可以在非密码文本框上正常工作。

这是我的功能：

```
public bool CheckPassword(string password)
{
    string patternStrict = @"/^(?=.*[a-zA-Z])(?=.*\d)\S{6,15}$/";
    Regex reStrict = new Regex(patternStrict);
    bool isStrictMatch = reStrict.IsMatch(password);
    return isStrictMatch;
} 
```

我正在输入一个测试，如下所示：

```
Problem.Text = CheckPassword(passwordbox.Text); 
```

该[站点](http://refiddle.com/1yj)已验证正则表达式正确

我正在使用的文本框（密码框）使用 * 作为密码字符进行过滤，并且有效，但我想知道这是否是函数失败的原因？

我觉得这很明显我错过了。响应应该返回为真，但返回为假。请参阅上面提供的链接的第 5 行作为测试行，看看它是否有效，这是我用来检查它是否有效的测试行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:30:36.727

.NET 不需要正则表达式分隔符，因此只需删除前导和尾随斜杠：

```
string patternStrict = @"^(?=.*[a-zA-Z])(?=.*\d)\S{6,15}$"; 
```

# vba - Excel VBA - 调整颜色线和 X 轴间隔

> ID：10879750
> 
> 赞同：1
> 
> 时间：2012-06-04T10:21:51.670
> 
> 标签：vba, excel, charts

我使用 Excel VBA 创建了一个图表，我想调整线条颜色和 x 轴间隔。

下面是代码：

```
Sub add_cpu_chart(server_hostname, site)
    On Error Resume Next

    Dim rpt_site As String
    rpt_site = site

    Set tbl = ThisWorkbook.Sheets(server_hostname).ListObjects(1)
    strTableName = tbl.Name
    strTableRange = tbl.Range.Address

    Dim m_s_name, m_e_name As Date

    m_s_name = CDate(fromDateStr)
    m_e_name = CDate(toDateStr)

    'Create new embedded chart
    Set shp = ThisWorkbook.Sheets(server_hostname).Shapes.AddChart

    'Position Shape over range

    shp.Top = 100
    shp.Left = 200

    With shp
        With .Chart
            'Specify source data and orientation
            '.SetSourceData Source:=ActiveSheets.Range(Table1 & "[#All]"), _
            'PlotBy:=xlRows
            .SetSourceData Source:=ThisWorkbook.Sheets(server_hostname).Range(strTableName & "[#All]")
            .ChartType = xlLineMarkers
            .SetElement (msoElementChartTitleAboveChart)
            .HasTitle = True
            .ChartTitle.Text = "CPU Utilization of " & server_hostname & " in " & _
            rpt_site & " (" & Format(m_s_name, "dd-Mmm") & " to " & Format(m_e_name, "dd-Mmm yyyy") & ")"
            .ChartTitle.Font.Size = 14
            '.ChartArea.Font.Size = 14
            .Legend.Delete

            .SetElement (msoElementPrimaryValueAxisTitleRotated)
            .Axes(xlValue, xlPrimary).AxisTitle.Text = "CPU Utlization (%)"
            .Axes(xlValue, xlPrimary).AxisTitle.Font.Size = 10
            .Axes(xlValue).MinimumScale = 0
            .Axes(xlValue).MinorUnit = 2
            .Axes(xlValue).MaximumScale = 100
            .Axes(xlValue).MajorUnit = 20
            .Axes(xlValue).TickLabels.NumberFormat = "General"

            .SetElement (msoElementPrimaryCategoryAxisTitleAdjacentToAxis)
            .Axes(xlCategory, xlPrimary).AxisTitle.Text = "Date of the Month"
            .Axes(xlCategory, xlPrimary).AxisTitle.Font.Size = 10
            '.Axes(xlCategory).MajorUnit = 1
            .Axes(xlCategory).TickLabels.NumberFormat = "d"
            With .PlotArea.Format.Fill
                .Visible = msoTrue
                .ForeColor.ObjectThemeColor = msoThemeColorBackground1
                .ForeColor.TintAndShade = 0
                .ForeColor.Brightness = -0.150000006
                .Transparency = 0
                .Solid
            End With
        End With
    End With
End Sub 
```

我想将线条颜色更改为红色 - 就像在 excel 2003 中一样 - 以及以 2 天的间隔更改数据。目前，数据的形式是`1,2,3,4...`我想在表单中显示数据`1,3 ,5...`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T11:41:33.050

在折线图中，X 轴的最小刻度、最大刻度、主要单位和次要单位是没有意义的。X 值只是类别，即使标签显示数字，也没有解释的数值。

您可能应该更改为 XY 图表，这将允许使用最小刻度、最大刻度、主要单位和次要单位完全控制轴刻度。当然，XY 图表允许使用与折线图中相同的系列标记和线条格式，但令人困惑的术语将永远存在。

如果出于某种原因您决定坚持使用折线图，您可以使用

```
ActiveChart.Axes(xlCategory).TickLabelSpacing = 2 
```

# javascript - 通过地址或密码制作多个标记谷歌地图

> ID：10879753
> 
> 赞同：-1
> 
> 时间：2012-06-04T10:22:14.430
> 
> 标签：javascript, jquery, html, google-maps

我想通过地址或密码制作多个标记谷歌地图

我只是在数组中添加地址或密码，我将制作多个标记谷歌地图

例如

```
 var address = new Array('Canada','Newyourk')

          or may be pincode

     var address = new Array('123456','654321') 
```

我的基本是`html`和`javascript`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:37:41.527

这是使用 API 的地理编码服务完成的。更多关于这个主题的信息在这里：[https](https://developers.google.com/maps/documentation/javascript/geocoding) ://developers.google.com/maps/documentation/javascript/geocoding和这里：[https](https://developers.google.com/maps/faq#geocoder_exists) ://developers.google.com/maps/faq#geocoder_exists 。

我还建议您阅读整个 API 文档。它是最好的 API 文档之一，其中包含许多有用的示例和指南。

# jquery - 通过 jquery 在 GUI 上显示元数据

> ID：10879754
> 
> 赞同：0
> 
> 时间：2012-06-04T10:22:19.580
> 
> 标签：jquery, css, user-interface, struts2

目前我正在用struts2、jquery、css（对于GUI）开发我的应用程序。现在在gui中我必须显示来自数据库的元数据信息。我已经从数据库中检索到元数据信息，现在我想以最好的方式在 GUI 上显示它。（最好的方式意味着好看。）谁能指导我在网上链接以在 GUI 上显示元数据信息（有 4-5 个字段元数据信息），最好使用 jquery。

# java - vba shell java调用错误

> ID：10879757
> 
> 赞同：1
> 
> 时间：2012-06-04T10:22:25.587
> 
> 标签：java, ms-access, vba, windows-shell

在 MS Access 公共函数中，我使用 shell 调用运行 java xslt 模块：

```
Set shell = CreateObject("WScript.Shell")
cmd = "java -jar D:\saxon9he.jar -s:D:\input.xml -xsl:D:\transf.xslt -o:D:\output.xml"
Set objExecObject = shell.Exec(cmd) 
```

我发现了以下错误：

![VBA java调用错误](../Images/a0ff4e14c56e5f123a2c647702b797c5.png)

由于在另一个 MS Access 实例中完全相同，我假设我必须在某处引用环境变量（其中一个`JAVA_HOME`已设置为`C:\Program Files\Java\jdk1.5.0_16\bin`）。
但是我可以在 MS Access 的哪个位置设置该引用？
还是这个错误是由其他原因引起的？
例如，MS Access / VBA 访问和/或`PATH`中的环境变量可能会出现问题吗？在我的设置中，保存 java.exe 位置信息的是用户环境参数。`USER``SYSTEM``PATH`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:25:04.710

我在要执行的命令中添加了如下内容：

```
Set shell = CreateObject("WScript.Shell")
Dim JavaHome As String
JavaHome = shell.Environment("USER")("JAVA_HOME") & "\"
cmd = JavaHome & "java -jar D:\saxon9he.jar -s:D:\input.xml -xsl:D:\transf.xslt -o:D:\output.xml"
Set objExecObject = shell.Exec(cmd) 
```

这很好用，因为我现在自己提供了 java.exe 的路径。

但我仍然想知道，为什么突然 MSA/VBA 不能再应用`PATH`来自用户环境（包括 ;%JAVA_HOME%;）的参数了......

我将为该问题创建另一个线程...

# google-drive-api - 使用java上传文件时出错

> ID：10879759
> 
> 赞同：2
> 
> 时间：2012-06-04T10:22:43.847
> 
> 标签：google-drive-api

我正在使用 Google Drive api 上传新文件....这样做时，我收到以下错误

> 您不能将内容上传到 application/vnd.google-apps.drive-sdk 类型的文件。

当我将 mimeType 设置为 null 时，我可以上传文件...如果我将 mimeType 设置为 application/octet-stream，我会收到上述错误 谁能告诉我可以设置的 mimeType 是什么？还有那个错误实际上意味着什么？

TIA，维杰拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:41:27.780

我怀疑您收到此错误是因为您没有在[Google API 控制台](https://code.google.com/apis/console/?pli=1)项目中将 MIME 类型注册`application/octet-stream`为应用程序的 MIME 类型。如果您使用正确的 MIME 类型和扩展名更新这些设置，这应该可以正常工作。您评论中的代码似乎是正确的。

# java - LINQ 是否有 Java 等价物？

> ID：10879761
> 
> 赞同：10
> 
> 时间：2012-06-04T10:22:46.220
> 
> 标签：java, linq

> **可能重复：**
> [LINQ 的 Java 等效项是什么？](https://stackoverflow.com/questions/1217228/what-is-the-java-equivalent-for-linq)

有许多问题询问是否有 LINQ 的 Java 等价物。但他们中的大多数都错误地指出什么都没有。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-04T10:24:42.383

该库提供了完整的 LINQ API：[https ://github.com/nicholas22/jpropel-light](https://github.com/nicholas22/jpropel-light)

它使用函数式结构来实现这一点，并且还使用延迟执行。

```
// select names starting with j, using LINQ-style statements
new String[] { "james", "john", "john", "eddie" }.where(startsWith("j")).distinct().all(println()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T10:26:09.983

我自己尝试过的另一个是 jaque：[http ://code.google.com/p/jaque/](http://code.google.com/p/jaque/)

# jquery - jQuery：隐藏图像直到调整大小完成

> ID：10879764
> 
> 赞同：2
> 
> 时间：2012-06-04T10:22:53.753
> 
> 标签：jquery, image, load, resize, hide

我网站上图像的大小和填充是根据浏览器窗口的大小计算的。它们在加载后会淡入，但有时是在调整大小之前。我怎样才能让它们在加载和调整大小后才淡入淡出？

```
// Fade in images once loaded
$('img').hide().not(function() {
    return this.complete && $(this).fadeIn();
}).bind('load', function () { $(this).fadeIn();
});

$(window).bind("load", function () {

// Responsive gallery image width
var max600 = window.matchMedia('screen and (max-width:600px)');
if (max600.matches) {
    var widthPercent = (((($(window).width()) * 0.78) / ($('.gallery ul').width())) * 100) + '%';
    $('.image').css('width', '').css('width', widthPercent);
}
var max800 = window.matchMedia('screen and (min-width: 601px) and (max-width:800px)');
if (max800.matches) {
    var widthPercent = (((($(window).width()) * 0.65) / ($('.gallery ul').width())) * 100) + '%';
    $('.image').css('width', '').css('width', widthPercent);
}
var min801 = window.matchMedia('screen and (min-width: 801px)');
if (min801.matches) {
    var widthPercent = (((($(window).width()) * 0.5) / ($('.gallery ul').width())) * 100) + '%';
    $('.image').css('width', '').css('width', widthPercent);
}

// Responsive gallery image margins
var newPadding = (((($(window).width()) * 0.11) / ($('.gallery ul').width())) * 100) + '%';
$('.image').css('padding-left', '').css('padding-left', newPadding);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:30:21.767

调整大小后可能会触发自定义事件

```
.trigger('resized') 
```

然后绑定到那个

```
.bind('resized', function() {... 
```

# android - Sony SmartWatch - 注册设置未更新

> ID：10879766
> 
> 赞同：2
> 
> 时间：2012-06-04T10:23:01.480
> 
> 标签：android, sony-smartwatch

我有一个仅支持 v1 的 SmartWatch 小部件的应用程序（getRequiredWidgetApiVersion() 返回 1）。在 v2 中，我添加了支持控制的代码，并将代码更改为 getRequiredControlApiVersion() 的返回 1。

安装 v2 后，我发现在 LiveManager > SmartWatch > 排序应用程序列表中找不到我的应用程序。

可以通过重新安装我的应用程序或点击 SmartWatch 应用程序的“清除数据”来手动解决该问题，但这不是一个好的解决方案。

您可以通过修改 SampleWidgetExtension 示例代码的代码轻松重现该错误。

1.  将 SampleWidgetExtension 安装到手机
2.  LiveManager > SmartWatch > 排序应用程序 <= 没有示例小部件，这是正确的。
3.  更改 SampleRegistrationInformation.java，为 getRequiredControlApiVersion() 返回 1 并添加 isDisplaySizeSupported(...) 函数并为其返回 true
4.  将 SampleWidgetExtension 安装到手机
5.  LiveManager > SmartWatch > 排序应用程序 <= 仍然没有示例小部件，这是不正确的。
6.  重新安装 SampleWidgetExtension
7.  LiveManager > SmartWatch > 排序应用程序 <= 您可以从列表中看到示例小部件

似乎是 SmartWatch (v1.2.33) 应用程序的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:03:01.967

谢谢山姆，你确实发现了一个错误。但是，该错误不在 SmartWatch 应用程序或 Liveware Manager 中，而是在 SDK 中。

所以 - 我们将努力尽快解决此问题，并在 sonymobile.com/developer 上发布 SDK 更新。完成后，我一定会更新此线程！

谢谢！

**更新**

修复程序现已推出，可从此处下载：http: [//developer.sonymobile.com/wportal/devworld/technology/smart-extras/smart-extension-sdk](http://developer.sonymobile.com/wportal/devworld/technology/smart-extras/smart-extension-sdk)

# javascript - 从 javascript 接收长数字时，Django 表单返回“NaN”

> ID：10879767
> 
> 赞同：2
> 
> 时间：2012-06-04T10:23:05.610
> 
> 标签：javascript, python, django, forms, numbers

在 Django 项目中，我有一个 javascript，它将图像的一些坐标发送到 Django 表单。然后用户提交表单，并在应用一些逻辑后将坐标保存到数据库中。大多数时候它运行良好，但有时 javascript（我的访问权限有限）会发送这种数字：55.46353234234234e-14 并且在表单数据中我得到这种变量：u'middle_img_center_y': [u'NaN '] 而不是我通常得到的数字。然后我当然会得到这种类型的值错误：无法将浮点 NaN 转换为整数。我不知道我是否可以捕获该数字并对其进行修改以适应表单的预期，或者我是否可以以不同的方式设置表单以接受这些数字（现在它是一个 forms.FloatField）。谢谢你的帮助。

一些代码：

风景：

```
if request.method == 'GET':
    form = ImageForm()
else:
    form = ImageForm(request.POST)
    ... doing some cropping here then save 
```

表格：

```
class ImageForm(forms.ModelForm):

class Meta:
    model = Image

top_img_left = forms.FloatField(widget=forms.HiddenInput)
... then more of the same line but with middle, bottom, center, right... 
```

这是一个字符串。

js代码：

```
var topZoomData = $('#img-top-remix').smoothZoom('getZoomData');
$('input[name="top_img_left"]').val(topZoomData.scaledX); 
```

更新：

我现在正在尝试使用 toFixed 函数来避免如此大的数字： [http ://www.w3schools.com/jsref/jsref_tofixed.asp](http://www.w3schools.com/jsref/jsref_tofixed.asp)

```
var topZoomData = $('#img-top-remix').smoothZoom('getZoomData');
$('input[name="top_img_left"]').val(topZoomData.scaledX).toFixed(3); 
```

# asp.net-mvc - 如何在 mvc 3 和 iis 6 中像 stackoverflow 一样处理这个问题？

> ID：10879768
> 
> 赞同：1
> 
> 时间：2012-06-04T10:23:06.450
> 
> 标签：asp.net-mvc, iis-6, bad-request

如何处理 400 错误请求，如 mvc 3、iis 6 中的 stackoverflow？

例如：www.stackoverflow.com/a<

返回 404 not found page ，而不是 YSOD 页面

更新：为什么这不起作用？

```
 <httpErrors errorMode="Detailed">
     <remove statusCode="404" subStatusCode="-1" />
     <error statusCode="404" subStatusCode="-1" path="/notfound" responseMode="ExecuteURL" />
     <error statusCode="400" subStatusCode="-1" path="/Error" responseMode="ExecuteURL" />
  </httpErrors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:57:00.600

使用 web.config 的 customErrors 标签：

```
<customErrors mode="On" defaultRedirect="UrlToRedirect" >
  <error statusCode="400" redirect="UrlToRedirect"/>
</customErrors> 
```

例如。：

```
<customErrors mode="On" defaultRedirect="~/Error/Index">
  <error statusCode="400" redirect="~/Error/Index"/>
</customErrors> 
```

if UrlToRedirect = "~/Error/Index", 这里，在这个 url 中，"Error" 是控制器的名称，"Index" 是返回错误视图页面的 Action 方法的名称。

```
public class ErrorController : Controller
    {
        public ActionResult Index()
        {
            return View("Error");
        }
    } 
```

在您的应用程序的“\Views\Shared 文件夹”中，您有“Error.cshtml”视图页面。

# mysql - 创建触发器时出现sql错误

> ID：10879770
> 
> 赞同：0
> 
> 时间：2012-06-04T10:23:08.467
> 
> 标签：mysql, triggers, sql-delete

我在mysql中输入了这段代码，它给出了一个错误：

```
 CREATE TRIGGER delete_vote_topic BEFORE DELETE ON vote_topic
  FOR EACH ROW BEGIN
    DELETE FROM vote_option WHERE vote_topic_id = OLD.id;
    DELETE FROM vote_option_votes WHERE vote_topic_id = OLD.id;
  END; 
```

错误是：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:26:19.780

尝试使用分隔符

```
delimiter |

CREATE TRIGGER delete_vote_topic BEFORE DELETE ON vote_topic 
FOR EACH ROW 
BEGIN 
     DELETE FROM vote_option 
     WHERE vote_topic_id = OLD.id; 
     DELETE FROM vote_option_votes 
     WHERE vote_topic_id = OLD.id; 
END;

| 
```

# c# - 使用 WIX 注册 C# DLL

> ID：10879771
> 
> 赞同：0
> 
> 时间：2012-06-04T10:23:10.163
> 
> 标签：c#, wix, wix3.5

我有一个 C# dll，它必须使用 WIX 代码/msi 进入注册表，运行 msi 后，我应该能够在 Visual Studio 的“添加引用”对话框中访问注册的 dll。如何使用 WIX 3.5 完成此操作? 我正在使用 Visual Studio 2010

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:29:04.507

您可以使用自定义操作来实现此目的。

[这](http://wix.sourceforge.net/manual-wix3/qtexec.htm)解释了如何创建在安静模式下执行的自定义操作。添加类似于以下内容的内容：

```
gacutil /i yourdll.dll 
```

在 Property 标签的 Value 属性中。

# c# - 从对象获取自定义属性

> ID：10879773
> 
> 赞同：4
> 
> 时间：2012-06-04T10:23:19.467
> 
> 标签：c#, reflection, attributes, custom-attributes

当我尝试从`object`函数返回自定义属性时`null`。为什么？

```
class Person
{
    [ColumnName("first_name")]
    string FirstName { get; set; }

    Person()
    {
        FirstName = "not important";
        var attrs = AttributeReader.Read(FirstName);
    }
}

static class AttributeReader
{
    static object[] Read(object column)
    {
        return column.GetType().GetCustomAttributes(typeof(ColumnNameAttribute), false);
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T10:26:29.000

您正在将`string`,传递`"not important"`给该方法。因此`Type`是`typeof(string)`。哪个**不具备那些属性**。此外，甚至`Person`没有那个属性：只有`MemberInfo`( `FirstName`) 有它们。

有通过传递一个方法来做到这一点`Expression`：

```
public static ColumnNameAttribute[] Read<T>(Expression<Func<T>> func)
{
    var member = func.Body as MemberExpression;
    if(member == null) throw new ArgumentException(
         "Lambda must resolve to a member");
    return (ColumnNameAttribute[])Attribute.GetCustomAttributes(
         member.Member, typeof(ColumnNameAttribute), false);
} 
```

和

```
var attrs = AttributeReader.Read(() => FirstName); 
```

然而！我应该建议我不确定`Person`构造函数是否适合此。可能需要缓存。

如果您不想使用 lambda，则传递 a`Type`和成员名称也可以，即

```
var attrs = AttributeReader.Read(typeof(Person), "FirstName"); 
```

（并从那里进行反思） - 或与泛型混合（没有真正的原因）：

```
var attrs = Attribute.Read<Person>("FirstName"); 
```

# facebook - Facebook 聊天、XMPP、设置状态？

> ID：10879777
> 
> 赞同：0
> 
> 时间：2012-06-04T10:23:43.160
> 
> 标签：facebook, xmpp, facebook-chat

在 Facebook Chat 中更改浏览器中的状态（离线/在线）时，聊天系统会以以下形式发送 XMPP 消息：

```
<presence to="-myidhere@chat.facebook.com/adfskjfskjdfh" from="-otheridhere@chat.facebook.com" type="unavailable"> 
```

当我使用完全相同的语法将我自己的存在从非浏览器端（xmpp 客户端）发送到浏览器端时，它似乎没有效果。我在这里想念什么？

非常感谢，-米卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:33:30.967

正如他们在文档中所写的那样，您似乎无法使用 facebook xmpp 实现来做到这一点：

> Facebook Chat 应该与每个 XMPP 客户端兼容，但不是完整的 XMPP 服务器。它应该被认为是 www.facebook.com 上 Facebook Chat 世界的代理。因此，它的一些行为与您对传统 XMPP 服务的期望略有不同

关于这件事有一个开放的错误：[XMPP: can't change availability](http://developers.facebook.com/bugs/370966862930215)，而且这个线程也谈到了它：[Xmpp chat invisible presence](https://stackoverflow.com/questions/10141155/xmpp-chat-invisible-presence)。

此外，不要期望 fb api 具有与使用 fb 网页相同的功能。
他们显然不会向api开放他们拥有的一切。

# android - AutocompleteTextView 文本不可见

> ID：10879778
> 
> 赞同：4
> 
> 时间：2012-06-04T10:23:48.373
> 
> 标签：android, autocompletetextview

在我从建议列表中选择一个项目后，在我的 AutoCompleteTextView 中文本不可见。我试过 setTextColor(android.R.color.black) 但它不起作用。我在清单中使用 Theme.Light。有人知道我能做什么吗？

提前致谢

蒂齐亚诺

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:32:39.090

请试试

```
Resources res = getResources(); 
int color = res.getColor(android.R.color.black);
setTextColor(color ) 
```

[http://sree.cc/google/android/defining-custom-colors-using-xml-in-android](http://sree.cc/google/android/defining-custom-colors-using-xml-in-android)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T12:16:45.773

使用 android.R.layout.select_dialog_item 而不是 android.R.layout.simple_dropdown_item_1line，它会正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-26T12:44:18.117

创建自定义布局 my_dropdown_item.xml：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@android:id/text1"
      style="?android:attr/spinnerDropDownItemStyle"
      android:singleLine="true"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:minHeight="40dip"
      android:ellipsize="marquee"
      android:textColor="#000000"/> 
```

然后使用它：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.my_dropdown_item, YOURARRAY); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-04T15:02:38.440

它会正常工作：

```
adapter = new ArrayAdapter<String>(getApplicationContext(),
            android.R.layout.simple_dropdown_item_1line, string_resource);
    Resources res = getResources();
    int color = res.getColor(android.R.color.black);
    autoCompleteTextView.setTextColor(color);

    autoCompleteTextView.setAdapter(adapter); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-03T13:33:18.787

由 didldum 回答[https://code.google.com/p/android/issues/detail?id=5237](https://code.google.com/p/android/issues/detail?id=5237)

通过扩展主题并覆盖键入文本和建议文本的 2 种样式的解决方法：

在清单中使用扩展主题： ... ...

创建使用固定样式的新主题 (res/values/themes.xml)： ... @style/AutoCompleteTextViewLight @style/Widget.DropDownItemLight ...

创建固定颜色的样式（res/values/styles.xml）： ... @android:color/primary_text_light @android:color/primary_text_light

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-18T07:39:28.030

一种更简单的方法，只需将 AutoCompleteTextView 的背景颜色设置为白色。像这样：`android:background="@android:color/white"`

# xamarin.ios - ShareKit 与 MonoTouch 如何？

> ID：10879781
> 
> 赞同：7
> 
> 时间：2012-06-04T10:24:06.433
> 
> 标签：xamarin.ios, sharekit

如何将 ShareKit 与 MonoTouch 一起使用？

GitHub 上的[MonoTouch Bindings 项目](https://github.com/mono/monotouch-bindings)似乎有[ShareKit](https://github.com/mono/monotouch-bindings/tree/master/ShareKit)的绑定，但我无法让它们工作。我目前在 MonoDevelop 中使用 MonoTouch 开发了一个 iPhone 应用程序，但我不知道如何将 ShareKit 实际应用到我的应用程序中。

我已经下载了 MonoTouch Bindings 项目，但是当我`make`在 ShareKit 目录中时，它似乎需要 ShareKit 本身。然后我下载了 ShareKit，但我不确定是否应该按照安装说明将 ShareKit 集成到 XCode 项目中，甚至是否应该构建 ShareKit。我已经尝试使用 ShareKit“构建”一个空的 iPhone 应用程序项目，但是对于最新的 XCode，部分说明不是最新的，看来我陷入了这个过程。我正在努力让这个工作，但到目前为止我对 XCode 的体验仅限于 MonoTouch 开发所需的少量内容。

或者是否有可以与 MonoTouch 一起使用的“预编译”ShareKit iOS 二进制文件？

**有人可以验证 ShareKit 确实可以与 MonoTouch 一起使用，并指导我完成使其工作所需的步骤吗？**

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T15:43:00.953

大多数时候，在 MonoTouch 中使用绑定时，您必须下载实际库的绑定（或 SDK）。例如，使用 TestFlight 绑定，您需要下载 SDK 并将其放在与 makefile 相同的目录中。我没有亲自体验过 ShareKit，但我想它会以同样的方式工作（事实上，我知道 MT 绑定 GitHub 项目中的大多数绑定（如果不是全部的话）都是这样工作的）。您根本不必处理 Xcode。只需下载 SDK，将其放在正确的目录中，然后运行 ​​makefile。这应该会吐出一个 DLL 供您参考，以便与 MonoTouch 一起使用。

使用 ShareKit 绑定的限制之一是，据我所知，UI 调整必须在 Objective-C 中完成，然后才能尝试使用链接器。如果您对开箱即用的 UI 感到满意，那么我会选择它。否则，还有很多其他开源库可用于创建简单的共享对话框（现在 Twitter 已内置到 iOS 中，这更容易了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:31:56.400

首先，您是从 getsharekit.com 下载还是使用 ShareKit 2.0？如果您使用的是 getsharekit 的 DL，那么我强烈建议您先升级。其次，这里有一些基本的安装说明，用于让 ShareKit 与 MonoTouch 一起使用：

***脚步***

1) 下载代码

2) 在 Xcode 中打开，如果它是一个 App，则创建一个 iOS 库类型的新 Xcode 项目

3) 编译库并记下所需的框架 - 这些将在以后在 monotouch 中链接时帮助您

3) 编译 lib 的 i386 Sim 版本并重命名为 libXYZLib_Sim.a - 将其复制到项目中的 /Lib 并将其构建操作设置为 None。您可以在 /ProjectLib/build/Debug-iphonesimulator/ 下找到它

4) 使用正确的版本编译 arm6 版本并将其复制到项目中的 /Lib 并将其构建操作设置为无。您可以在 /ProjectLib/build/Debug-iphoneos/ 下找到它

5) 像这样对包含 .h 文件的库目录运行 NovellHeaderParser

@@ 单声道“/Users/XX/Projects/NovellHeaderParser/NovellHeaderParser/bin/Debug/NovellHeaderParser.exe”/Users/XX/Documents/ShareKitLib/ShareKit/Core @@

这应该会生成一个 MonoMac.cs 文件，您可以将其导入系统

6) 对其他目录重复步骤 5。注意您实际上只需要针对具有入口点的 .h 文件运行解析器，例如 API 直接调用的顶级类。子类、实用程序、辅助方法不需要解析。

7) 将所有 MonoMac.cs 文件合并到一个新的 MyLib.cs 文件中，并将其添加到 /Lib 下的项目中 - 将其构建选项设置为 None

8) 将任何引用从 MonoMac 更改为 MonoTouch

10) 解析器*可能会*为每个解析的目录创建一个 enum.cs 文件，但如果没有创建您自己的名为 MyLibEnum.cs 的文件，其中包含 API 所需的任何结构或枚举 - 将其添加到 /Lib 并将构​​建选项设置为 None

11) 打开终端窗口并导航到项目的 /Lib 目录

12) 运行以下 btouch 命令行 - 这将从 MyLib.cs @@ /Developer/MonoTouch/usr/bin/btouch -v MyLib.cs -s MyLibEnum.cs @@ 中定义的接口创建一个 wrapper.dll

13) 将任何缺少的枚举或结构添加到 MyLibEnum.cs 并重复步骤 12

14）通过重命名选择器的任何多个声明来修复它们 - 这可能会导致以后出现问题（见注1）

15) 修复任何缺失的引用，例如 NSMutableArray 在 monotouch 中似乎不存在，所以我将它们更改为 NSArrays（我认为这些在 monotouch 下是可变的？？？）

16）回到12）并重复，直到生成一个dll。

17）在项目中添加对dll的引用

18) 将以下内容添加到 iPhone Build> Additional mtouch options TO THE SIMULATOR DEBUG/RELEASE BUILD：@@ -gcc_flags "-L${ProjectDir}/Lib -lMyLib_Sim -framework QuartzCore -framework CoreGraphics -framework MessageUI -framework Security -framework UIKit -framework CFNetwork -force_load ${ProjectDir}/Lib/libMyLib_Sim.a -ObjC" @@

'''注意'''

-L${ProjectDir}/Lib 上没有尾随 /

-lShareKitLib_Sim 不需要起始 lib 前缀或 .a 后缀

为创建 lib 时使用的每个框架添加一个框架 - 上面不是详尽的列表

19) 将以下内容添加到 iPhone Build> Additional mtouch options TO THE IPHONE DEBUG/RELEASE BUILD：@@ -gcc_flags "-L${ProjectDir}/Lib -lMyLib -framework QuartzCore -framework CoreGraphics -framework MessageUI -framework Security -framework UIKit -framework CFNetwork -force_load ${ProjectDir}/Lib/libMyLib.a -ObjC" @@

20) 测试它！

# c# - 如何暂停线程更改数据并在 C# 中恢复？

> ID：10879782
> 
> 赞同：1
> 
> 时间：2012-06-04T10:24:11.977
> 
> 标签：c#, multithreading

我现在正在研究一个交通模拟项目。但是我在暂停模拟时遇到问题。每辆车都被视为我的应用程序中的一个线程。当模拟运行时（网格上的*汽车*移动）我想暂停它。

`Thread.suspend()`方法不起作用，因为我必须阻止线程更改数据。

假设路上有*一辆车，我点击暂停按钮，**汽车*应该停在那里，当我点击开始按钮时，它应该能够恢复。我不能让线程直接休眠，因为它会阻塞`UI`。

有任何想法吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:29:40.177

您不会暂停线程。如果您认为每辆车都应该在自己的线程中，请给每辆车一个“暂停”方法，以阻止它移动（但继续响应其他事情）。

不过，我认为您不希望每辆车有一个线程。为什么不让多个 Car 对象全部移动以响应计时器？

# git - git 不会忽略 2 个特别命名的文件

> ID：10879783
> 
> 赞同：80
> 
> 时间：2012-06-04T10:24:16.677
> 
> 标签：git, gitignore

我想从提交中自动排除 2 个文件，它们是 git 存储库的一部分，但有一些更改，不应该是 github 存储库的一部分，因为它们有一些更改只对我的本地系统有意义，而不是其他开发商。

我将它们添加到`.git/info/exclude`希望 git 明白他不应该对它们进行更改：

```
# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
a.conf
b.conf
# *~ 
```

但`git status`仍将它们列为已提交：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   modified:   build/conf/a.conf
#   modified:   build/conf/b.conf
# 
```

我不想在每次提交时定期取消它们（有一次我可能会忘记），我该怎么做？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-06-04T12:30:20.937

您想要的是忽略跟踪文件的更改。这无法正确实现（正如[查尔斯贝利](https://stackoverflow.com/users/19563/charles-bailey) [所说](https://stackoverflow.com/questions/10879783/git-doesnt-ignore-2-specifically-named-files/10881296#comment14178464_10879783)），无论是 with`.gitignore`还是 with `.git/info/exclude`。

您需要使用[`git update-index`](http://linux.die.net/man/1/git-update-index)：

```
git update-index --assume-unchanged build/conf/a.conf
git update-index --assume-unchanged build/conf/b.conf 
```

将实现您想要的：文件始终假定不变。

如果您想再次跟踪这些文件中的更改，请使用`--no-assume-unchanged`.

最后，如果你想知道当前有哪些文件处于该`--assume-unchanged`模式，请向 git 询问

```
git ls-files -v | grep -e "^[hsmrck]" 
```

# ajax - Jquery Ajax 调用 servlet

> ID：10879785
> 
> 赞同：2
> 
> 时间：2012-06-04T10:24:44.193
> 
> 标签：ajax, jsp, servlets

我正在尝试使用 JQuery 对返回 JSON 对象的 servlet 进行 Ajax 调用。在JSP页面中我有一个表单，起初我不知道如何从表单中获取数据，然后我找到了.serialize。

我有以下 JavaScript：

```
$(document).ready(function() {
    $("#submit").click(function blabla() {
        var formData = $('form').serialize();
        $.ajax({
            type: "POST",
            url: "/ArchiveSearch/Search",
            dataType: "json",
            data: formData,
        });
    });
}); 
```

信息来自以下表格：

```
<form method= post">
            <div class="searchCiteria">
                <div id="searchValueBlock1">
                        <div><span class="label">Case ID:</span><input type="text" name="messagecaseid"  size="25"/></div>
                        <div><span class="label">Onderwerp:</span><input type="text" name="messagesubject" size="25" /></div>
                        <div><span class="label">Afzender:</span><input type="text" name="messagesender"  size="25"/></div>
                        <div><span class="label">Ontvanger:</span><input type="text" name="messagereceiver"  size="25"/></div>
                </div>

                <div id= "searchValueBlock2">
                    <div><span class="label">Datum:</span><input type="text" name="date1"  size="25"/></div>
                    <div><span class="label"></span><input type="text" name="date2"  size="25"/></div>

                    <div class="submit">
                        <input type="submit" value="Search"> 
                    </div>
                </div>
            </div>
            </form> 
```

当我在表单中使用 action 参数时，servlet 会像它应该的那样响应。但我似乎无法让 Ajax 调用正常工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:31:35.767

您必须将成功参数添加到 ajax 函数

```
$.ajax({
            type: "POST",
            url: "/ArchiveSearch/Search",
            dataType: "json",
            data: formData,
 success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
});
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:35:36.287

提交按钮的默认行为是`POST`表单，它将用户重定向到`action`表单属性的 URL。当你没有（你应该......）有一个动作属性时，它将重新加载页面。为了防止页面重新加载，您需要通过在函数`false`结束时返回来防止默认行为。`$("#submit").click`

# c++ - 大量奇怪的未定义引用编译带有挡泥板的 boost 程序

> ID：10879787
> 
> 赞同：1
> 
> 时间：2012-06-04T10:24:44.630
> 
> 标签：c++, boost, compilation

我正在使用 Boost 库在 Linux 上用 C++ 编写程序。我有一个疯狂的内存读取导致问题，所以我想使用 mudflap 库进行编译。但是，在链接阶段，我得到了数百个未定义的引用：诸如

```
mpl_::int_<3>::value
__gnu_cxx::__numeric_traits_floating<long double>::__max_exponent10
vtable for boost::gregorian::bad_weekday
typeinfo for boost::detail::sp_counted_impl_p<boost::detail::future_object<void> > 
```

我错过了什么？

boost 的版本是 1.49，gcc 的版本是 4.7.0 (CVS 20120505)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:52:21.300

如果您的 C++ 文件在预处理器运行后减少到某些定义，则添加一些公共变量可能会有所帮助。至少它对我有帮助。

# java - 如何使用 ColorMatrixFilter 将位图中的橙色更改为绿色

> ID：10879788
> 
> 赞同：-1
> 
> 时间：2012-06-04T10:24:46.897
> 
> 标签：java, image, colormatrixfilter

如何使用 colorMatirxFilter 将位图上的橙色变为绿色。代码示例会有所帮助。请添加`ColorMatrixFilter`矩阵的解释。

我想根据用户的选择更改主题颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:36:59.487

正如我们所知，橙色不像红色、绿色或蓝色那样纯色。这意味着橙色具有三个分量`R`，`G`和`B`分量。因此，请尝试以下操作：
1) 使用 ; 将橙色（三个值）转换为灰色（一个值）
`Gray = 0.3*RED + 0.59*GREEN+0.11*Blue`；

2）然后，使用`ColorMatrixFilter`（请参阅 Torious 的链接）将您要更改的像素的像素值设置为：

将`ZERO`（0 值）设置为红色和蓝色分量（作为像素值）。将灰度值（我们刚刚计算）设置为绿色分量（作为像素值）。

然后，你得到你的结果。

# gwt - 托管模式的 GWT user.agent？

> ID：10879793
> 
> 赞同：1
> 
> 时间：2012-06-04T10:25:20.060
> 
> 标签：gwt, maven, gxt

据我所知，Google Web Toolkit .gwt.xml 文件中的“user.agent”属性指定了 Java 到 Java 脚本转换的目标。因为托管模式仍然运行 Java 而不是 Javascript，所以我不明白为什么 google chrome 会抱怨“user.agent”值设置不正确。更奇怪的是，即使我在其中添加“safari”，它也会一直抱怨`<set-property name="user.agent" value="gecko1_8,safari" />`。

我可以在这里做什么？

我使用 GWT 2.3.0 版和 GXT 2.2.5 版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:40:58.457

DevMode 不会编译为 JavaScript，但仍然必须遵守延迟绑定规则，并且其中许多是基于`user.agent`属性的，因此必须正确设置。

`user.agent`属性值由在所谓的*选择脚本*（文件）中生成的一些脚本片段确定，该`*.nocache.js`脚本的内容可以取决于`set-property`您在 GWT 模块中拥有的 s。

例如，如果您使用 编译 GWT 模块`<set-property name="user.agent" value="gecko1_8" />`，则该`user.agent`属性将被硬编码`gecko1_8`为`*.nocache.js`.
如果您稍后运行 DevMode，除非它认为必须覆盖现有的`*.nocache.js`，否则它将使用它；`*.nocache.js`因此，仅在生成时使用 Chrome 运行应用程序`gecko1_8`将导致类似于以下内容的错误：

```
com.google.gwt.core.client.JavaScriptException: (TypeError): Property 'user.agent' of object  is not a function 
```

如果您为多个浏览器编译，但随后只使用一个模块运行 DevMode *，*那么`gecko1_8`DevMode 将使用在一个从模块确定（这里硬编码到），然后会警告您它们不匹配（因此您的应用程序可能会出现功能障碍：例如，代码将使用，而应该在 Chrome 中使用）。`*.nocache.js`*`safari``gecko1_8``DOMImplMozilla``DOMImplSafari`*

 ** * *

因此，要解决此问题，要么删除`*.nocache.js`文件，以便 DevMode 必须生成一个新文件，要么使用其`user.agent`值与您将在 DevMode 中使用的浏览器匹配的模块重新编译您的应用程序。*

# actionscript-3 - ActionScript 3 滚动问题

> ID：10879795
> 
> 赞同：1
> 
> 时间：2012-06-04T10:25:22.833
> 
> 标签：actionscript-3, flash, actionscript

我正在尝试为设计项目制作谷歌地图样式界面。我有拖放和缩放功能，但我也想让它对触控板（macbook）上的手势做出反应。我认为“监听” MouseEvent 的 event.delta 可以解决问题，但不知何故它不起作用。那么我的代码有什么问题？

```
stage.addEventListener(MouseEvent.MOUSE_WHEEL, onMouseWheelEvent);
function onMouseWheelEvent(event:MouseEvent):void {
    tafelOrigineel_mc.y += event.delta;
} 
```

我已经在文档前面加载了 flash MouseEvents，所以这不应该是问题。完成这项工作后，我也会尝试在 x 轴上使用它。MOUSE_WHEEL 事件监听器可以做到这一点吗？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:42:06.903

关于 MacOS 上的 flash 播放器，这是一个长期存在的问题。

MOUSE_WHEEL 事件不会在 MacOS 上发送。虽然有一些解决方法涉及使用 JavaScript 来检测轮子的使用（在整个 Flash 内容中），但如果这不是问题，请尝试检查其中之一。

这篇博文中有一个列表：

[http://www.impossibilities.com/v4/2009/03/06/flash-mousewheel-implementations-for-mac-os-x/](http://www.impossibilities.com/v4/2009/03/06/flash-mousewheel-implementations-for-mac-os-x/)

# c++ - wglDeleteContext 访问冲突

> ID：10879796
> 
> 赞同：1
> 
> 时间：2012-06-04T10:25:29.290
> 
> 标签：c++, mfc, openglcontext

我在使用 MFC 的 Visual C++ 中使用大型解决方案。在更改之前一切都运行良好。当我刚刚修改了一个对话框并添加了一个新对话框时。程序在以下第一行开始引发异常：

```
 if (!wglDeleteContext(m_hRc))
    {
        throw;
    }
    m_hRc = NULL;
    return; 
```

在文件 RenderDevice.cpp 中。

我正在使用 TortoiseSVN，因此我恢复了所有更改并重新编译了解决方案中的项目。但问题依然存在。

谁能告诉我可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:28:56.590

如果我是你，我会安装Microsoft 的[Application Verifier](http://www.microsoft.com/en-us/download/details.aspx?id=20028)并为你的应用程序打开堆/内存检测，然后在调试器中运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:07:02.113

1.  尝试删除您的用户设置文件。
2.  尝试调试并观察应用程序调用堆栈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T07:58:17.403

我遇到了类似的问题，这是因为您没有释放 OpenGL 纹理、顶点数组对象、VBO、FBO 等可能分配的任何空间，至少在 OpenGL 的情况下。

如果你没有使用 OpenGL，那么看看你是否正在释放你在程序中使用过的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:19:26.267

将[GetLastError](http://msdn.microsoft.com/en-us/library/ms679360%28v=vs.85%29)放在 wglDeleteContext 之后：

```
if (!wglDeleteContext(m_hRc))
{
    DWORD dwError = GetLastError();
    throw;
}
m_hRc = NULL;
return; 
```

将调试器与

```
DWORD dwError = GetLastError(); 
```

您将获得 wglDeleteContext 失败的根本原因以及引发异常的原因。

# php - 使用 sscanf() 或 Simple XML 扫描目录中的页面

> ID：10879797
> 
> 赞同：-1
> 
> 时间：2012-06-04T10:25:38.340
> 
> 标签：php, jquery, simplexml, scanf

我想扫描位于我网站目录中的 .php 文件的内容，然后对其中的文本执行一些其他操作。我也见过用 jquery 完成的类似的事情`.html()`

我将如何使用`sscanf()`或简单 XML 来做到这一点？或者那是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:59:46.490

我建议您查看 SimpleXML 来解析您的 html，这肯定不是 sscanf 或更糟的工作：正则表达式。

# java - 请求乘法参数

> ID：10879801
> 
> 赞同：-1
> 
> 时间：2012-06-04T10:26:12.417
> 
> 标签：java, spring, httprequest

我遇到了关于 request.getParameterMap() 的问题

在我的 jspx 文件中，当用户从表中选择项目时，会添加乘法参数。现在我想用 request.getParameterMap() 将它们放入我的控制器中；它不适用于 Firefox、Safari，但它适用于 chrome

有人知道为什么会这样吗？

* * *

感谢回复.. 带有请求参数的 html 表单是在运行时使用 javascript 动态构建的，这似乎会导致基于 widged 的​​浏览器（如 safari、firefox 和最有可能的 IE）出现问题。

我将使用 ajax 让它工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:43:05.577

问题不在于您从地图中获取参数值的方式。它不可能是。问题必须出在 HTML / Javascript / 在客户端（浏览器）端创建请求的任何内容中。

您很可能正在做一些不完全符合 HTML（或其他）的事情。一些浏览器以一种方式对待它，而另一些浏览器则以另一种方式对待它。我建议您首先在页面上运行 HTML 验证器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:39:49.017

浏览器不知道 request.getParameterMap() 或 servlet api 中的任何方法。

在您的用例中：您有一个数据表，用户可以从中选择一些行，并且您需要在服务器端使用这些数据对这些行进行一些操作。

例如：在 GMAIL 中标记为已读

在 gmail 中选择一行或多行并单击，标记为已读将向谷歌服务器发送一些请求，并获取那些被用户标记为已读的行。

您可以这样做，您需要将行的主键发送到具有相同参数名称的服务器端，例如：/delete?delId=1&delId=3&delId=7

并在服务器端使用 request.getParameterValues() 来检索要删除的 id 列表。

# php - PHP 安全风险 - 将图像传递到 GET 并将其作为结果输出

> ID：10879802
> 
> 赞同：0
> 
> 时间：2012-06-04T10:26:12.730
> 
> 标签：php, curl

我目前面临一个问题，正在尝试探索以下场景中涉及的安全风险。

网站 A 的代码如下：

```
<img src="http://www.websiteb.com/loadimage.php?path=http://www.websitea.com/images/logo.png" /> 
```

网站 B：以下注释是 loadimage.php 中将发生的情况的示例（我不需要此页面的代码）

```
/* Use CURL to load image from $_GET['path'] and output it to page. 
```

您是否认为网站 B 以某种方式被利用会带来任何安全风险？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:24:22.123

它可用于代理对另一个站点的攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:24:51.843

是的 - 你正在为滥用而敞开心扉（假设你正在编写 CURL 函数）。其他人可以创建虚假链接并使用您的代码向其他人请求页面，或进行攻击或尝试分发恶意内容（例如，他们携带病毒，将您网站的脚本用于传播该病毒，而您的网站获得了坏名声）。

但是您可以通过以下方式缓解它（根据您的情况进行选择）：

1.  如果可能，从路径中删除域名；如果您知道所有图像都来自域，则将其删除并添加到 PHP 中。这限制了人们滥用它，因为它纯粹限制在您的域中。

2.  如果您有选择的域，那么请验证 URL 中的域是否与您期望的匹配 - 再次限制下载内容的自由支配。

3.  如果您可以从图像 URL 中删除所有参数（如果您知道永远不需要它们），那么也可以删除参数。或者，如果您可以匹配特定模式的参数，则剥离所有其他参数。这有点限制了潜力。

4.  将其拉入后验证它是图像。

5.  跟踪来自特定 IP 地址的下载。如果它们超过预期数量，则停止提供更多。您需要知道预期金额是多少。

6.  如果您同时提供 HTML 和图像下载，则只能将您希望提供给该页面的文件提供给该页面。基本上，如果您收到交付 HTML 页面的请求，那么您就知道随后还会请求哪些图像。根据请求 IP 和请求代理记录它们，并允许交付 60 分钟。如果您没有收到请求（即与 IP/代理不匹配），请不要交付。（注意：通常你不能依赖 IP 或代理来获取东西，因为它们都可以被伪造，但出于这些目的，这很好）。

7.  通过 cookie 跟踪。与上述类似，但使用 cookie 来缩小浏览器范围，而不是通过 IP 和代理进行跟踪。

8.  同样与上面类似，您可以为每个文件创建一个唯一的 id（例如“？path=avnd73q4nsdfyq347dfh”，然后将您将为该unique_id 提供的图像存储在数据库中。Unique_id 会在一段时间后过期。

9.  最后的措施，定期更改脚本的名称 - 覆盖一下，然后淘汰旧脚本。.

我希望这可以让您了解您可以做什么。尽量选择。

# python - 如何拦截不存在的方法调用？

> ID：10879806
> 
> 赞同：15
> 
> 时间：2012-06-04T10:26:29.890
> 
> 标签：python

我想创建一个不提供`Attribute Error`任何可能存在或不存在的方法的 on call 类：

**我的课：**

```
class magic_class:
    ...
    # How to over-ride method calls
    ... 
```

**预期输出：**

```
ob = magic_class()
ob.unknown_method()
# Prints 'unknown_method' was called

ob.unknown_method2()
# Prints 'unknown_method2' was called 
```

现在，`unknown_method`并且`unknown_method2`实际上并不存在于类中，但是我们如何拦截 python 中的方法调用？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-04T10:31:23.157

覆盖`__getattr__()`魔法方法：

```
class MagicClass(object):
    def __getattr__(self, name):
        def wrapper(*args, **kwargs):
            print "'%s' was called" % name
        return wrapper

ob = MagicClass()
ob.unknown_method()
ob.unknown_method2() 
```

印刷

```
'unknown_method' was called
'unknown_method2' was called 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-06-10T12:47:24.160

以防万一有人试图**将未知方法委托给对象**，代码如下：

```
class MagicClass():
    def __init__(self, obj):
        self.an_obj = obj

    def __getattr__(self, method_name):
        def method(*args, **kwargs):
            print("Handling unknown method: '{}'".format(method_name))
            if kwargs:
                print("It had the following key word arguments: " + str(kwargs))
            if args:
                print("It had the following positional arguments: " + str(args))
            return getattr(self.an_obj, method_name)(*args, **kwargs)
        return method 
```

[当您需要应用代理模式](https://en.wikipedia.org/wiki/Proxy_pattern)时，这非常有用。

此外，考虑到*args 和 kwargs*，允许您生成一个完全用户友好的界面，因为使用 MagicClass 的界面将其视为真实对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T10:29:37.830

覆盖`__getattr__`；见[http://docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)

# barcode-scanner - 编程时 HID 设备如何工作？

> ID：10879808
> 
> 赞同：2
> 
> 时间：2012-06-04T10:26:39.023
> 
> 标签：barcode-scanner, hid

我有一个条形码扫描仪用作 HID 设备。每次扫描条码时，它都会直接进入 Windows 键盘，例如，如果我打开记事本，我可以看到在那里输入的条码。

据我所知，以编程方式可以从您的 HID 设备中读取 HID 数据。

但是如果用户已经在一个带有文本编辑控件的表单上会发生什么呢？扫描的代码将进入文本框。

您可以阻止传入的文本并进行仅后台处理吗？

你能解释一下这个理论吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T06:44:15.590

您可以将扫描仪设置为使用 USB-HID(POS) 设置。您的扫描仪设备的条形码设置数据表应该有它。我使用这个项目来测试我的扫描仪。[http://www.codeproject.com/Articles/18099/A-USB-HID-Component-for-C](http://www.codeproject.com/Articles/18099/A-USB-HID-Component-for-C)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:41:01.800

看看您的条码扫描器是否可以模拟串行端口，只需将数据直接从串行端口读取到您的应用程序中。

这比全局键盘挂钩更清洁、更便宜。当我不久前研究这个时，我发现大多数 USB 条形码扫描仪*都可以*模拟串行端口，用大多数编程语言读取串行端口数据很容易。我碰巧用Java做我的，我实际上发布了一个例子来回答[这个问题。](https://stackoverflow.com/a/8621266/1062992)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:28:51.410

当然，只需在控件处理按键之前捕获按键并抑制事件的正常处理。例如，在 VB.NET 中，您可能会覆盖`OnKeyPress`表单中的方法并将其设置`KeyPreview`为`true`。

# php - mySQL 中的默认日期时间格式

> ID：10879809
> 
> 赞同：0
> 
> 时间：2012-06-04T10:26:46.317
> 
> 标签：php, mysql, datetime-format

我正在编码通过 compare 搜索数据`dateTime`。在 Web 表单中，用户输入值`2012-06-04`存储在`$_REQUEST['dateSearch']`. 我从中创建`dateTime`对象：

```
$dateObj = date_create_from_format("Y-m-d",$_REQUEST['dateSearch']);
$dateParam = $dateObj->format("Y-m"); 
```

然后我`$dateParam`在sql查询中使用来查找数据

```
$sql = "
    SELECT *
    FROM `temp` as `t`
    WHERE `t`.`date` LIKE '$dateParam%'
"; 
```

一切都很好，但我不确定 MySQL 是否总是只使用一种`dateTime`格式`Y-m-d H:i:s`。在这里，`$dateParam = $dateObj->format("Y-m");`我设置默认格式为“Ym”。默认格式永远不会改变吗？我不想要`Y-m-d H:i:s`代码中的硬设置格式，而不是，我认为从系统获取格式字符串以使用更好。如何`dateTime`从 mySQL 获取默认格式字符串？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T10:37:36.443

您误解了，`Y-m-d H:i:s`
是**日期**时间数据类型的**唯一**格式。

 **```
Y-m-d = date
H:i:s = time 
```

这就是为什么被命名为`datetime`

要更改 mysql 中 datetime 的返回格式，
可以使用mysql 中的[date_format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数

如，

```
date_format('%Y-%m') = 2012-06 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:45:49.923

下面更好用！

```
select * from users where month(`t`.`date`)='12' and year(`t`.`date`)='2010' 
```

REF：[月份年份的 MySQL 查询](https://stackoverflow.com/questions/4406124/mysql-query-for-month-year)**

# javascript - 在 Node / Express 中获取客户端主机名

> ID：10879816
> 
> 赞同：1
> 
> 时间：2012-06-04T10:27:36.597
> 
> 标签：javascript, node.js, express, hostname

是否可以在 Node / Express 中获取客户端的主机名？

类似的东西`req.connection.remoteAddress`用于获取客户端的IP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T12:28:42.883

这是一个例子：

```
var http = require('http'),
    dns  = require('dns');

http.createServer(function (req, res) {
  var ip = req.connection.remoteAddress;

  res.writeHead(200, {'Content-Type': 'text/html'});
  dns.reverse(ip, function(err, hostnames) {
    res.write("Ip: " + ip + "<br />");
    res.end("Your hostname(s) are " + hostnames.join("; "));
  });
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

在官方 Node.js 文档网站上阅读更多信息： [http ://nodejs.org/docs/v0.6.18/api/dns.html#dns_dns_reverse_ip_callback](http://nodejs.org/docs/v0.6.18/api/dns.html#dns_dns_reverse_ip_callback)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-06-04T10:31:40.120

您是否尝试过搜索[Node.js 文档](http://nodejs.org/api/dns.html)？

# android - Android TabActivity 传递可跨标签打包

> ID：10879817
> 
> 赞同：0
> 
> 时间：2012-06-04T10:27:38.530
> 
> 标签：android, android-intent, parcelable, android-tabactivity

我正在尝试基于 MainContainerActivity 中的 TabActivity 将数据从选项卡 n 传递到选项卡 n+1 活动，使用 parcelables 但无法成功，因为我无法在选项卡 n+1 意图上应用“getExtras”方法。

如果我使用`startActivity(nextactivity)`而不是使用带有`tab.setCurrentTab(tab_n+1)`.

我应该如何管理活动意图，以便我可以成功传递那些可打包的对象，仍然在 MainContainer 类中实现 TabActivity 并在选项卡中实现 Activity ？

或者有没有办法在使用时强制在清单中启动活动`tab.setCurrentTab(tab_n+1)`？

我阅读了十几个线程并且一直在尝试许多杂项测试但没有成功，所以请详细说明答案，就像一个真正的菜鸟一样:-)

编辑：希望从 API8 开始工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:31:59.517

如此处所述：

[在 TabActivity 的单个选项卡中重新启动活动？](https://stackoverflow.com/questions/2429609/restarting-an-activity-in-a-single-tab-in-a-tabactivity)

您想要的是通过在意图中传递新的 Parcelable “参数”来销毁活动并重新启动它。建议的方法可能会起作用，但是我强烈建议您考虑改用[Fragments](http://developer.android.com/guide/topics/fundamentals/fragments.html)。如果要支持 Android 3 之前的版本，则需要[支持包](http://developer.android.com/sdk/compatibility-library.html)。此线程中列出的示例：[https](https://stackoverflow.com/questions/5710573/need-a-fragments-example) ://stackoverflow.com/questions/5710573/need-a-fragments-example应该让您开始使用 Fragments。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:00:07.637

我想我的简单 3 个选项卡应用程序的简单答案是使用[此处](https://stackoverflow.com/a/708317/461212)描述的**全局对象**，这也允许保留我现有的源代码。

# assembly - 在 AVR 程序集中添加数字

> ID：10879819
> 
> 赞同：1
> 
> 时间：2012-06-04T10:27:53.843
> 
> 标签：assembly, avr

我怎样才能在 AVR 组装中做到这一点？

我在不同的 reg 中有 2 个数字（小端序）。

```
# Number 1
LDI R16 0x…
LDI R17 0x…
LDI R18 0x…
LDI R19 0x…
# Number 2
LDI R20 0x…
LDI R21 0x…
LDI R22 0x…
LDI R23 0x… 
```

我想将它们加在一起并将结果保存到 R20 - R23。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T09:22:04.783

关于它背后的“数学”：它与十进制系统相同：

添加两个个位数时，必须考虑两种情况。两者之和是一个新的个位数 (5+4 = 9)，或者发生“溢出”并且需要另一个数字 (5+6 = 11)。请注意，对于数字长度的任何两个数字（以任何基数，无论是 10、2、256 还是其他数字），`n`两者的总和将*始终*小于最小`n+1`数字长度的两倍；设`i`和`j`为例如长度为 1 的数字（以 10 为底），也就是说，两者都在`0`和之间`9`，包括 和 。由于`10`是最小的长度数`n+1 = 2`，它们的总和总是低于`2 x 10`。

将两个数相加时，可能没有溢出，也可能正好溢出 1。进位位存储上次算术运算的溢出；它是 0 或 1。

因此，当添加两个 4x 8 位的数字（可以看作是 4 个“数字”基数 256）时，第一次加法不会考虑溢出，因此只有`ADD`; `ADD`可以看作是对 的一种操作`x = x + y + 0`。然而，在第一次添加之后，可能会出现需要考虑的溢出，这是通过使用`ADDC`;完成的。`ADDC`表示 的运算`x = x + y + carry`，其中`carry`只能为 0 或 1，如上所述。在添加了所有数字之后，最后一次添加可能再次导致溢出，这将反映在之后的进位位中，并且可以评估为可能对数字范围的溢出做出反应，例如：

```
x = x + y;

if ( carry == 1 ) {
  error "The sum is too big for the datatype of x";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T03:03:09.470

相当简单的操作。使用 add 进行第一次操作，并使用 add-with-carry 进行后续添加

```
# Number 1
LDI R16 0x…
LDI R17 0x…
LDI R18 0x…
LDI R19 0x…
# Number 2
LDI R20 0x…
LDI R21 0x…
LDI R22 0x…
LDI R23 0x…
# Add LSB of 1 and 2, result will be in R20
ADD R20,R16
# Add remaining bytes using the add-with-carry operation
ADC R21,R17
ADC R22,R18
ADC R23,R19 # MSB 
```

结果将覆盖 R20:R23 中的值。

我知道您只是将常量加载到寄存器中作为示例，但不要忘记您可以使用 subi 和 sbci 操作码添加常量。例如，要将 5 添加到 R18:R19：

```
SUBI R18,-5
SBCI R19,-1 # This isn't intuitive, but needs to be -1, not zero 
```

从 R18:R19 中减去 5：

```
SUBI R18,5
SBCI R19,0 
```

# objective-c - 如何从 ALAssetRepresentation 中获取正确旋转的 UIImage？

> ID：10879820
> 
> 赞同：4
> 
> 时间：2012-06-04T10:27:59.607
> 
> 标签：objective-c, ios, alassetslibrary, alasset

我正在尝试使用该方法正确旋转`UIImage`。我有几张以各种设备方向拍摄的测试照片；照片在照片应用程序中正确显示。的文档说：`ALAssetRepresentation``fullScreenImage``fullScreenImage`

> 在 iOS 5 及更高版本中，此方法返回完全裁剪、旋转和调整的图像——与用户在照片或图像选择器中看到的完全一样。
> 
> 要从 中创建正确旋转的`UIImage`对象`CGImage`，请使用 `imageWithCGImage:scale:orientation:`or `initWithCGImage:scale:orientation:`，并传递`orientation` and的值`scale`。

给定文档，我的代码如下所示：

```
ALAssetRepresentation *rep = [asset defaultRepresentation];
UIImage *img = [UIImage
    imageWithCGImage:[rep fullScreenImage]
    scale:[rep scale]
    orientation:[rep orientation]]; 
```

但由此产生`UIImage`的 ' 旋转是错误的。当我替换`[rep orientation]`为 时`UIImageOrientationUp`，该图像适用于所有测试照片。显然，我在犹豫是否坚持使用这个“解决方案”，因为它感觉就像是一个 hack。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T08:07:07.207

```
ALAssetRepresentation *rep = [asset defaultRepresentation];
UIImage *img = [UIImage
    imageWithCGImage:[rep fullScreenImage]
    scale:[rep scale]
    orientation:UIImageOrientationUp]; 
```

是正确的，因为在 iOS 5 下全屏图像已经旋转（所以它总是“向上”）。在 iOS 4 下，行为是不同的。请参阅[ALAsset](https://stackoverflow.com/questions/8832547/orientation-does-not-behave-correctly-with-photo-in-alasset/9447468#9447468)中照片的方向不正确，以获得更深入的解释。

# c# - 什么更好以及为什么使用 List 作为线程安全：BlockingCollection 或 ReaderWriterLockSlim 或锁定？

> ID：10879823
> 
> 赞同：2
> 
> 时间：2012-06-04T10:28:19.093
> 
> 标签：c#, .net, multithreading, locking, blockingcollection

我有`System.Collections.Generic.List _myList`很多线程可以从中读取或同时向其中添加项目。从我读过的内容来看，我应该使用“BlockingCollection”，这样就可以了。我还阅读了`ReaderWriterLockSlim`and `lock`，但我不知道如何使用它们而不是`BlockingCollection`，所以我的问题是我可以这样做：

1.  ReaderWriterLockSlim
2.  锁

而不是使用“BlockingCollection”。`BlockingCollection`如果是，您能否提供简单的示例以及使用, `ReaderWriterLockSlim`,的优缺点`lock`？

**更新** 的读者将不仅仅是作家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:39:46.263

`ReaderWriterLockSlim`：

*   针对用例进行了优化，当从资源中读取比写入更频繁时；
*   可以使用任何类型的资源（不仅是集合），因为它只是一个混合同步结构。

`lock`：

*   是一种通用的、相当简单的混合同步结构，没有任何优化；因此，会使性能变差；
*   是类的 C# 包装器`Monitor`；
*   可以使用任何类型的资源；

`BlockingCollection`：

*   是一种特定类型的集合（具体类型的资源），旨在解决“生产者-消费者”任务；
*   支持超时和取消机制（通过取消令牌），这使得更容易集成到使用 TPL 的代码中。

我认为，你的选择是`BlockingCollection`（如果你真的有很多读者和作家）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T10:36:58.293

如果您经常*更改*列表，那么`ReaderWriterLockSlim`可能对您没有帮助，因为它只允许单次写入访问，并且`lock`开销较小。就个人而言，我只会`lock`（在某些锁定对象上）在每次访问期间。

a 的问题`BlockingCollection`在于它只保证单个操作是原子的 - 但是，我们经常需要将*多个*操作作为一个单元执行（不仅仅是`TryAdd`等）。所以为了避免发疯，a`lock`比较简单。

另一个优点是使用`lock`非常简单：

```
lock(syncLock) {
   // do stuff with the list
} 
```

（它也有内置的信号通过`Monitor.Wait`and `Monitor.Pulse*`，这很好）

# ajax - HTML5 缓存清单：不成功的 ajax 调用获得回退

> ID：10879825
> 
> 赞同：11
> 
> 时间：2012-06-04T10:28:30.293
> 
> 标签：ajax, html, jquery, cache-manifest, application-cache

我有一个 HTML5 应用程序，它使用缓存清单来提供离线功能。此应用程序在联机时进行 ajax 调用，其中一些调用可以获得 403 未授权响应。

这是我的 cache.manifest 文件的底部：

```
NETWORK:
*

FALLBACK:
/ /offline 
```

如果我删除回退部分，所有接收 403 响应的 ajax 调用都会按预期工作，我可以使用 jQuery 错误处理程序检测到这一点并将用户重定向到登录表单。

但是如果存在回退部分，相同的调用会得到 200 OK 响应，回退 HTML 的内容作为正文，即使服务器回复了 403，所以我无法知道用户没有经过身份验证，必须发送到登录页面。

我在这里错过了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:35:46.510

将随机数作为查询参数添加到您要查找的 jQuery-AJAX 页面将解决该问题；IE

```
$.ajax({
  url: "/data.html?"+ Math.random(),
  // other properties here...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T18:16:43.097

来自[http://alistapart.com/article/application-cache-is-a-douchebag#latest](http://alistapart.com/article/application-cache-is-a-douchebag#latest)

这是一个参考，由于将状态码报告为 0，因此可能会发生错误，这被解释为失败：

```
$.ajax( url ).always( function(response) {
 // Exit if this request was deliberately aborted
 if (response.statusText === 'abort') { return; } // Does this smell like an error?
 if (response.responseText !== undefined) {
  if (response.responseText && response.status < 400) {
   // Not a real error, recover the content    resp
  }
  else {
   // This is a proper error, deal with it
   return;
  }
 } // do something with 'response'
}); 
```

# php - 使用 php 或 MySql 将时间戳转换为 DateTime

> ID：10879829
> 
> 赞同：0
> 
> 时间：2012-06-04T10:28:41.777
> 
> 标签：php, mysql, datetime

我一直在寻找超过 40 分钟，但我无法完成它。

我得到了这个查询：

```
$query = "SELECT id, title, timestamp FROM adafruit_articles ORDER BY timestamp ASC"; 
```

如果我在 php 中回显时间戳，那么我得到：

```
[timestamp] => 2012-04-30 19:14:59 
```

我想用前导零得到它的月份。我可以将时间戳转换为整数，但不能转换为`DateTime`.

如果我是正确的，最后一步将是：

```
date_format($date, "m") 
```

但我怎样才能得到`DateTime`它？

如果 MySQL 只能返回月份，我还需要在某个地方使用整个日期，所以只从 MySQL 返回月份不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:32:31.097

我认为这就是你想要的：

```
$unix_timestamp = strtotime($row['timestamp']);
$date = date('m', $unix_timestamp); 
```

* * *

> **m**：月份的数字表示，前导零

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:32:59.610

您也可以从 MySQL 查询中获取所需的日期格式：

```
SELECT DATE_FORMAT(my_timestamp, '%d %M, %Y') AS my_timestamp FROM mytable WHERE... etc 
```

或者您可以像这样在 PHP 中执行此操作：

```
$my_date = strftime('%d %M, %y', $row['my_timestamp']);
echo $my_date; 
```

# mercurial - hg拒绝合并

> ID：10879836
> 
> 赞同：-2
> 
> 时间：2012-06-04T10:29:01.487
> 
> 标签：mercurial

这是我的问题：

```
(oneclickcosvirt)[marcintustin@web316 oneclickcos]$ hg merge
abort: outstanding uncommitted changes
(use 'hg status' to list changes)
(oneclickcosvirt)[marcintustin@web316 oneclickcos]$ hg ci -umarcintustin
nothing changed (4 missing files, see 'hg status') 
```

Hg 不会因为未完成的更改而合并，但没有未完成的更改。该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T11:08:34.073

错误消息说有 4 个丢失的文件。所以很可能这棵树被认为处于不一致的状态，以至于它不能按原样合并。如果您`hg status`按照它的建议执行操作，您可能会看到一系列标记为这样的文件：

```
! foo.txt
! baz.txt
! bar.txt
! quux.txt 
```

这些文件的状态需要在合并之前通过删除它们（`hg rm -A`如果您真的不再需要它们）或将它们恢复到最后一次提交（`hg revert`）来解决。

解决后，您应该能够正常合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:05:35.487

除了@gavinb的回答，也可以通过`--force`选项：

```
hg merge --force 
```

这也将执行通常的合并操作。

# haskell - 如何找到最优的加工顺序？

> ID：10879838
> 
> 赞同：12
> 
> 时间：2012-06-04T10:29:18.767
> 
> 标签：haskell, logic, lambda-calculus, logic-programming

我有一个有趣的问题，但我不确定如何表达它......

考虑 lambda 演算。对于给定的 lambda 表达式，有几种可能的归约顺序。但其中一些不会终止，而另一些会终止。

在 lambda 演算中，事实证明存在一个特定的归约顺序，如果确实存在一个不可约解，则它*保证总是以不可约解结束。*它被称为正常订单。

我写了一个简单的逻辑求解器。但问题是，它处理约束的顺序似乎对它是否找到任何解决方案有巨大的影响。基本上，我想知道我的逻辑编程语言是否存在类似正常顺序的东西。（或者仅仅是一台机器不可能确定性地解决这个问题。）

* * *

所以这就是我所追求的。据推测，答案主要取决于“简单逻辑求解器”究竟是什么。因此，我将尝试*简要*描述它。

我的程序非常基于*The Fun of Programming* (Jeremy Gibbons & Oege de Moor) 第 9 章中的组合器系统。该语言具有以下结构：

*   求解器的输入是单个*谓词*。谓词可能涉及变量。求解器的输出是零个或多个*解*。解决方案是一组使谓词变为真的变量赋值。

*   变量包含*表达式*。表达式是整数、变量名或子表达式的元组。

*   有一个相等谓词，它比较表达式（不是谓词）是否相等。如果用它的值替换每个（绑定的）变量使两个表达式相同，则满足。（特别是，每个变量都等于它自己，无论是否绑定。）这个谓词是使用统一来解决的。

*   还有用于 AND 和 OR 的运算符，它们以明显的方式工作。没有 NOT 运算符。

*   有一个“存在”运算符，它本质上是创建局部变量。

*   定义*命名谓词*的工具支持递归循环。

关于逻辑编程的“有趣的事情”之一是，一旦你编写了一个命名谓词，它通常会向前*和向后*工作（有时甚至是*横向*工作）。典型示例：连接两个列表的谓词也可用于将列表拆分为所有可能的对。

但有时向后运行谓词会导致无限搜索，除非您重新排列术语的顺序。（例如，交换 AND 或 OR somehwere 的 LHS 和 RHS。）我想知道是否有一些自动方法来检测运行谓词的最佳顺序，以确保在解决方案集完全正确的所有情况下立即终止有限。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:02:04.587

相关论文，我认为：[http ://www.cs.technion.ac.il/~shaulm/papers/abstracts/Ledeniov-1998-DCS.html](http://www.cs.technion.ac.il/~shaulm/papers/abstracts/Ledeniov-1998-DCS.html)

也看看这个：[http ://en.wikipedia.org/wiki/Constraint_logic_programming#Bottom-up_evaluation](http://en.wikipedia.org/wiki/Constraint_logic_programming#Bottom-up_evaluation)

# java - 我如何从数组中的mysql检索结果？

> ID：10879839
> 
> 赞同：-2
> 
> 时间：2012-06-04T10:29:25.230
> 
> 标签：java, android, mysql, arrays, json

我想从数据库中获取结果作为数组。我有一张“commande”桌子，里面有存货。我想以数组的形式获取库存。像这样的东西：`array[0],array[],array[2]` 这是我的表命令的结构`(idfichecmd idproduit idclt qte datecmd)`

这是我的代码：

```
String response = null;
String res = "";
//the year data to send
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("",));   
try {
    Log.i("","<<<<<<<<<<<<<<<<<<<<TRY");      
    response = CustomHttpClient.executeHttpPost("http://0.0.0.0/GetCmdDetails.php",nameValuePairs); 
    res=response.toString();
    // res = res.trim();
    //res= res.replaceAll("\\s+","");
    //error.setText(res);

} catch (Exception e) {
    Log.i("","<<<<<<<<<<<<<<<<<<<<Catch");
}

//parse json data
try{
    JSONArray jArray = new JSONArray(res);
    //-----------------------------------------
    //nom= new String[jArray.length()];
    //prenom= new String[jArray.length()];
    //----------------------------------------
    for (int i=0;i<jArray.length();i++) {
        JSONObject json_data = jArray.getJSONObject(i) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:54:21.987

首先，测试您的查询是否给出了正确的结果。

我使用这个解决方案来获取 jsonarray：

使用 HttpClient 调用 web 服务。

```
private List<NameValuePair> parameters;

    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(//yoururl);
    int statusCode = -1;
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(this.parameters));
        HttpResponse response = httpClient.execute(httpPost);
        statusCode = response.getStatusLine().getStatusCode();

 //Get your inputstream here and convert it to json after

    BufferedReader in = new BufferedReader
                        (new InputStreamReader(response.getEntity().getContent())); 
```

# php - 使用 XMLHttpRequest 上传文件

> ID：10879841
> 
> 赞同：3
> 
> 时间：2012-06-04T10:29:25.653
> 
> 标签：php, ajax, file-upload, xmlhttprequest

我正在尝试使用 javascript 中的[拖放插件](http://pascalprecht.github.com/DnD.js/)来使用 ajax 上传文件。

```
<script>
DnD.on('#drop-area', {

'drop': function (files, el) {
   el.firstChild.nodeValue = 'Drag some files here.';
   var names = [];
   [].forEach.call(files, function (file, i) {
      names.push(file.name + ' (' + file.size + ' bytes)');

   var xhr = new XMLHttpRequest();
   xhr.open('POST','upload.php');
   xhr.setRequestHeader("Content-type", "multipart/form-data"); 
   xhr.send(file);
   console.log(xhr.responseText);
});
document.querySelector('#dropped-files p i').firstChild.nodeValue = names.join(', ');
}
});
</script> 
```

这是upload.php：

```
<?php
print_r($_POST);
?> 
```

基本上我还没有编写脚本来上传文件，因为我仍在弄清楚如何才能访问通过 JavaScript 发送的数据。你能指导我下一步该怎么做吗？如何从upload.php 访问文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T10:35:41.297

尝试使用`FormData`而不是`xhr`：

```
var formData = new FormData();
formData.append("thefile", file);
xhr.send(formData); 
```

您可以通过以下方式访问您的文件`array`：

```
<?php var_dump($_FILES["thefile"]); ?> 
```

查看更多：[http ://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

# c# - 正则表达式“或”表达式

> ID：10879851
> 
> 赞同：0
> 
> 时间：2012-06-04T10:30:10.857
> 
> 标签：c#, .net, regex

这可能是一个非常基本的问题，但我找不到任何答案。我需要通过两个或多个空格或等号来匹配字符串。

当我拆分这个字符串时：`9 x 13 = (8.9 x 13.4) (89 x 134)` 我`( +)`得到：

```
part 0: 9 x 13 = (8.9 x 13.4)
part 1: (89 x 134) 
```

当我将其拆分时，`(=)`我得到：

```
part 0: 9 x 13 
part 1:  (8.9 x 13.4)          (89 x 134) 
```

怎么能被BOTH分开？就像是：`(=)OR( +)`

编辑： **这不起作用**`(=)|( +)`，我期待：

```
part 0: 9 x 13 
part 1: (8.9 x 13.4)
part 2: (89 x 134) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:51:24.613

您的正则表达式应该可以工作，除了它会留下 . 之前和之后的空格`=`。这是假设您确实在该`( +)`部分中使用了两个空格（通过 SO 的格式将其标准化为一个空格）。这会产生你说你想要的确切结果：

```
@" {2,}|\s*=\s*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:34:13.730

简单地，

```
Pattern = "\s*=\s*|(?!\))\s+?(?=\()" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:33:46.937

```
(=)|( +) 
```

这对你有好处吗？

解释和示例： http: [//msdn.microsoft.com/en-us/library/ze12yx1d.aspx](http://msdn.microsoft.com/en-us/library/ze12yx1d.aspx)，向下滚动到第三条评论...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T10:55:29.337

您可以使用这样的正则表达式：`[= ]+`

```
var regex = new Regex("[= ]+");
var parts = regex.Split("this is=a test");

// parts = [ "this", "is", "a", "test" ] 
```

如果要保持分隔符将正则表达式括在括号中：`([= ]+)`

# jquery - Facebox beforeClose 确认

> ID：10879858
> 
> 赞同：1
> 
> 时间：2012-06-04T10:31:07.603
> 
> 标签：jquery

我在一个项目中使用 jQuery Facebox，并且在 facebox 中有一个 textarea。

如果用户在触发 beforeClose.facebox 的确认框上单击取消，我将无法保持 Facebox 打开。

我有 beforeClose.facebox 工作，但如果我单击确认框上的取消按钮，它仍然会关闭 facebox。如果我单击取消，我希望 Facebox 保持打开状态。

提前致谢。

# javascript - 需要帮助来解决与 Safari 的滑块 javascript 冲突

> ID：10879861
> 
> 赞同：1
> 
> 时间：2012-06-04T10:31:30.147
> 
> 标签：javascript, slider

我在网站上使用的滑块遇到问题。( [www.cloosedesign.com](http://www.cloosedesign.com) ) 该网站是我为朋友制作的作品集。所以有几个作品要展示。每件作品都被列为一个链接，当您单击该链接时，它会向您显示带有滑块的相应图片。（我已经放了一些 PHP 从数据库 Mysql 中获取正确的图片）。

它工作正常，除了在 SAFARI 上。实际上，有时当我单击链接时，页脚的文本（黑框上的白色文本）会消失并重新出现，就像页面正在刷新一样。此 pb 有时会在第三次点击后出现，有时会在多次点击后出现。

这是我的代码：

在`<head>`：我正在调用 jquery：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

我正在调用滑块的 javascript 文件：

```
<script type="text/javascript" src="js/slides.min.jquery.js"></script> 
```

然后在portfolio_english 页面中，我正在检查与所选作品相对应的图像（= $contenu）：

```
<?
        $images_sql = "SELECT * FROM `a_fichier`
                WHERE id_fiche=".$contenu."
                    ORDER BY tri";
        $images = mysql_query($images_sql);

        echo'<div id="slides">';
        echo '<div class="slides_container">';

        while ($image=mysql_fetch_array($images))
            {
            echo "<img src='Images/PorteDoc2/".$image['nom']."' width='540' height='600' alt='".$image['titre']."' />"; 
            }
        echo '</div>';
        echo '</div>'; ?> 
```

就在 php 代码之后，我编写了以下 javascript ：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#slides').slides({
        preload: true,
        preloadImage:'Images/img/loading.gif',
        pagination: true,
        fadeSpeed: 0,
        slideSpeed: 0,
        effect: 'slide, slide',
    });
});
</script> 
```

然后我调用 footer.php 文件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:02:57.387

好的，在进行任何真正的调查之前，让我们先解决一些问题。

1.  将 jQuery 更新到最新版本 (http://jquery.com/)，然后你就不需要缓动插件了，因为它现在是内置的。

2.  不要绑定到 window.onload，而是使用正确的语法来使用 jQuery：

```
$(document).ready(function() {
    $('#slides').slides({
        preload: true,
        preloadImage:'Images/img/loading.gif',
        pagination: true,
        fadeSpeed: 0,
        slideSpeed: 0,
        effect: 'slide, slide',
    });
}); 
```

如果这不好，请制作一个非常小的测试页面，其中只有您与滑块一起使用的代码，并检查它是否仍然存在问题。

老实说，我真的不知道为什么人们使用这些庞大的滑块插件，制作滑块是一项简单的小工作，只需要不到 10 行 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:39:12.457

这个[http://jsfiddle.net/NNSqw/](http://jsfiddle.net/NNSqw/)是执行我的意思的代码，它使用 jquery 和 ajax，现在，解释 html 位非常简单，div`id="content"`将是您的内容将被加载到的位置.

现在到 JS/JQuery，每次用户按下链接时，div 的内容`id="content"`都会发生变化，您必须创建一个名为 get_images.php 的页面，并使用 php 代码`$_GET['realisation'];`获取点击的链接的数量和从那里它将像您当前的页面一样工作:)。

抱歉，我不擅长解释，但是，如果您希望我尝试澄清更多，请说:)

**编辑：**

在您的**portfolio_english.php**文件中应该存在以下代码（我使用的是您网站的英文版）：

```
<span class="link" onClick="javascript: show_image('1')">Entreprise internationale    1</span><br>
<span class="link" onClick="javascript: show_image('2')">Entreprise internationale 2</span><br>
<span class="link" onClick="javascript: show_image('3')">Entreprise internationale 3</span><br>
<span class="link" onClick="javascript: show_image('4')">Entreprise internationale 4</span> 
```

你应该有你的链接，它有一个 onClick 事件将它们引导到应该在页面头部的 javascript 函数：

```
<html>
     <head>
     <script src="http://code.jquery.com/jquery-latest.js"></script>
     <script type="text/javascript">
         show_image(no){
             $.ajax({
                 url: 'get_images.php?realisation='+no,
             success: function(data) {
                 $('#content').html(data);
            }
          });
         }
     </script>
    [... rest of header ...]
    </head> 
```

同样在该文件中，您应该具有当前显示图像的 div

```
<div id="content">

</div>​ 
```

**获取图像.php**

在您的 get_image.php 中，您需要拥有当前用于获取图像的内容，因此要将数字（例如 41）输入您正在使用的 php 代码中，请使用：

```
<?php
$number = $_GET['realisation'];
[... Rest of php code to retrieve images ...]
?> 
```

另外，如果你仍然不明白我要去哪里尝试阅读 jquery 文档，看看你是否更了解它：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# opengl - glsl 中的提取 mat3(a mat4 matrix) 语句是做什么的？

> ID：10879864
> 
> 赞同：16
> 
> 时间：2012-06-04T10:31:40.620
> 
> 标签：opengl, glsl

我正在做每个片段照明，并且在校正正常矢量时，我得到了这个代码：`vec3 f_normal = mat3(MVI) * normal;`MVI 在哪里：`mat4 MVI = transpose(inverse(ModelViewMatrix));`。那么什么是return after `mat3(MVI)`statement呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-04T22:28:54.037

```
mat3(MVI) * normal 
```

从 4x4 矩阵返回上面的 3x3 矩阵，并将法线乘以该矩阵。该矩阵称为“正常矩阵”。你用它把你的法线从世界空间带到眼睛空间。矩阵的上 3x3 部分对于缩放和旋转很重要，而其余部分仅用于平移（法线从不平移）

要将法线从世界空间带到眼睛空间，您只需要模型视图矩阵的 3x3 **逆转置**。除非您的矩阵在正常情况下（没有非均匀比例），否则在这种情况下，原始矩阵与其逆转置相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T10:38:37.533

来自[GLSL 类型](http://www.opengl.org/wiki/GLSL_Types#Matrix_constructors)：*“从另一个矩阵构造矩阵时对大小没有限制。因此您可以从 2x4 矩阵构造一个 4x2 矩阵；只复制相应的元素。”* . 因此，您会得到 MVI 的左上角 3x3 子矩阵。

# codeigniter - Codeigniter：数据库配置

> ID：10879865
> 
> 赞同：0
> 
> 时间：2012-06-04T10:31:42.920
> 
> 标签：codeigniter

我是CI的初学者，所以没有很好的知识。

我的问题是：

我没有使用任何数据库。所有记录都是从 JSON 中获取的。因此我认为我不需要配置数据库...</p>

正如 CI 所说，它不一定要求数据库。

所以我的 database.php 配置是：

```
$active_group = ‘default’;
$active_record = FALSE;

$db[‘default’][‘hostname’] = ‘’;
$db[‘default’][‘username’] = ‘’;
$db[‘default’][‘password’] = ‘’;
$db[‘default’][‘database’] = ‘’;
$db[‘default’][‘dbdriver’] = ‘mysql’;
$db[‘default’][‘dbprefix’] = ‘’;
$db[‘default’][‘pconnect’] = TRUE;
$db[‘default’][‘db_debug’] = TRUE;
$db[‘default’][‘cache_on’] = FALSE;
$db[‘default’][‘cachedir’] = ‘’;
$db[‘default’][‘char_set’] = ‘utf8’;
$db[‘default’][‘dbcollat’] = ‘utf8_general_ci’;
$db[‘default’][‘swap_pre’] = ‘’;
$db[‘default’][‘autoinit’] = TRUE;
$db[‘default’][‘stricton’] = FALSE; 
```

它适用于我的本地系统，但不适用于实时服务器。吓死宝宝了。

然后我提供了主机名、用户名、密码和 dbdriver，它可以工作。

我的问题是，如果我不使用数据库，是否有必要提供所有详细信息？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:37:42.350

只是不要调用数据库类不要把它放在 autoload.php CI 不要强迫你使用数据库

# python - 对对象列表的属性求和/平均

> ID：10879867
> 
> 赞同：99
> 
> 时间：2012-06-04T10:31:57.643
> 
> 标签：python, list, attributes, sum

可以说我有`C`具有属性的类`a`。

从Python`a`列表中获取总和的最佳方法是什么？`C`

* * *

我尝试了以下代码，但我知道这不是正确的方法：

```
for c in c_list:
    total += c.a 
```

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2012-06-04T10:33:15.267

使用[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)：

```
sum(c.a for c in c_list) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-13T08:43:55.367

如果您正在寻找除总和之外的其他度量，例如均值/标准差，您可以使用 NumPy 并执行以下操作：

```
mean = np.mean([c.a for c in c_list])
sd = np.std([c.a for c in c_list]) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-24T15:46:35.893

我有一个类似的任务，但我的任务是将持续时间相加作为你的属性`c.a`。[将此与此处](https://stackoverflow.com/questions/5006258/need-the-average-from-a-list-of-timedelta-objects)提出的另一个问题结合起来，我想出了

```
sum((c.a for c in cList), timedelta()) 
```

因为，如链接中所述，`sum`需要一个起始值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-24T19:27:27.860

使用内置`statistics`模块：

```
import statistics

statistics.mean((o.val for o in my_objs)) 
```

# asp.net - 如何从 Internet 的 default.aspx 回到 Intranet 的 default.aspx

> ID：10879868
> 
> 赞同：0
> 
> 时间：2012-06-04T10:31:57.757
> 
> 标签：asp.net, intranet

首先明确我的场景：我有一个位于城市（比如城市 A）的公共 ip IIS 网站，另一个在本地运行的 IIS 位于城市 B。

现在，我的网站在城市 B 的 IIS 上运行，从本地服务器获取数据工作正常。另一方面，A 市的 IIS 网站正在工作并从其本地数据库服务器获取数据。

在城市 B 服务器上，我创建了一个 default.aspx 页面，其中有两个链接按钮，点击此按钮查看城市 B 数据，然后单击此按钮查看城市 A 数据。

因此，当用户点击城市 B 链接按钮时，网页在其本地运行，但是当用户点击城市 A 链接按钮时，城市 B 的人们可以通过互联网查看城市 A 的数据。

到目前为止一切都很好，但是在网页上，它们的按钮名为 go to Main，因此当城市 B 访问城市 A 的网页并单击 Main 按钮时，它会显示城市 A 的 default.aspx 页面。

所以，我的问题是，有没有一种方法可以让我的网站从页面重定向的位置进行纠正，并且当主按钮单击任一侧时，它必须看到并显示他们自己的 default.aspx 页面。

我希望我能够表达我的情景。如果没有，那么请您查看图表，这可能会清楚您的要求。

```
http://202.61.43.37/html/Doc1.html 
```

期待您早日和善的回应

问候

MABamboat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:51:56.687

如果用户在城市 B 站点并单击链接按钮转到城市 A 站点，则在查询字符串中传递一个参数以告诉站点 A 它来自站点 B。

如果站点 A 是单页站点，则您可以检查查询字符串并且如果值存在，则单击 Main 将用户发送到站点 B Main 其他明智的站点 A Main。

如果有多个页面而不是保持会话中的用户来自其他站点，并且您必须将他发送回该站点，我希望您理解我想说的话。

# actionscript-3 - flex 4中带有事件监听器的递归函数

> ID：10879870
> 
> 赞同：0
> 
> 时间：2012-06-04T10:32:26.667
> 
> 标签：actionscript-3, apache-flex, flex4

我写了一个递归调用的函数。我维护了一个数组，其中的值是通过事件的侦听器推送的。但问题是函数在没有数组增量的情况下首先返回，并且稍后执行侦听器。

```
public function getAllChilds(seltem:XML, allChilds:Array): Array 
{ 
     if(//the childs of selected item if need to retrive from server)                               
     var   viewChildrenJobsService : HTTPService = new HTTPService(); 
     viewChildrenJobsService.url = // here is my url ; 

 viewChildrenJobsService .addEventListener(ResultEvent.RESULT, function(event:ResultEvent):void { 
    // now on this result event i got all childs of selected item.
    for each(var childJob :XML in seltem.children())    
    {
         allChilds.push(childJob); 
          if (//the childs of childJob need to retrive from server) 
            allChilds = getAllHierarchicalChilds(childJob, allChilds); 
    }
 }); 

 return allChilds; 
} 
```

有什么办法可以解决这个问题，让函数在事件完成后返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:03:57.847

好的，您在 Result Event 之前返回 allchilds。你删除了原来的问题；），所以我不记得你的问题是不是这个。尝试拆分函数：首先请求，然后获取 allChild 的值。

是的......更好地编写（和粘贴）格式良好的代码：它更容易理解。

# lotus-notes - Lotus notes Document 同时出现在 Inbox 和 SentItem 中

> ID：10879875
> 
> 赞同：0
> 
> 时间：2012-06-04T10:32:55.260
> 
> 标签：lotus-notes

我创建了一个 CPP COM dll 来读取 EML 文件并将其添加到 Lotus notes NSF 文件中。使用 MIMEContent 创建邮件，但问题是当我将文档添加到文件夹视图 $Inbox 时，相同的邮件被复制 $Sent Item 文件夹。下面是代码

```
 newdoc.Save();
           Folder.FolderAddDocument(newdoc);

    // Color the background
    Folder.SetBackgroundColor(LNCOLOR_LIGHT_GRAY);

    // Change the heading display
    Folder.SetHeadingDisplay(LNVFHEADINGDISPLAY_BEVELED);

    Folder.Save();
    //cout<<"ReadViews4"<<endl;
    Folder.Close();
    //cout<<"ReadViews5"<<endl;
    newdoc.Close(); 
```

谢谢和问候， 哈西娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:57:37.527

这是 8.5.x 邮件模板的已发送视图的选择公式：

> SELECT DeliveredDate = "" & PostedDate != "" & !(@IsMember("S"; ExcludeFromView))

如果导入的邮件文档应显示为传入邮件，则它必须具有带日期的 DeliveredDate 字段（这意味着它不会出现在已发送视图中）。

我看不到您如何设置邮件文档的属性，因为您的代码示例仅包含`newdoc.Save()`and `newdoc.Close()`。

因此，请查看您导入的邮件的属性，并查看设置邮件文档属性的 CPP 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:35:42.770

就像其他人说的：创建字段“DilveredDate”。将其值替换为例如 Today。

```
DateTime timenow = session.createDateTime("Today");
timenow.setNow();
newdoc.replaceItemValue("DeliveredDate", timeNow); 
```

您的文档不会显示在 sendTo-View 中。

# hadoop - 错误。无法启动 Hadoop 数据节点守护程序

> ID：10879876
> 
> 赞同：0
> 
> 时间：2012-06-04T10:32:56.987
> 
> 标签：hadoop

Java 运行时环境检测到一个致命错误：

SIGSEGV (0xb) at pc=0xb6e2a766, pid=2084, tid=3027630960 JRE 版本：6.0_21-b06 Java VM：Java HotSpot(TM) 客户端 VM（17.0-b16 混合模式，共享 linux-x86）有问题的框架：v [ libjvm.so+0x1a9766]

错误。无法启动 Hadoop 数据节点守护程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:48:29.357

通常当磁盘上的空间为零时会发生这种情况。内存不足也可能导致它，但磁盘更频繁地导致恕我直言。

# c# - 具有自动更新功能 vs2010 的安装项目

> ID：10879878
> 
> 赞同：0
> 
> 时间：2012-06-04T10:33:00.307
> 
> 标签：c#, setup-project, setup-deployment

我在 Visual Studio 中创建了一个安装项目。它工作正常，现在当我进行一些更改时，创建新的安装文件然后尝试执行它。它给了我这个错误。

![在此处输入图像描述](../Images/79ccda2d6dfd7dcf89f3fac494b81ae7.png)

我不希望用户打扰这一步。我希望它先更新应用程序或卸载它，然后再安装新版本。

我怎么能这样做。

请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:37:56.270

如果您增加包[ProductVersion](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370859%28v=vs.85%29.aspx)并更改[ProductCode](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370854%28v=vs.85%29.aspx) ，Windows Installer 会自动卸载旧版本。这可以在项目属性窗格中完成。

如果您不这样做，则需要使用控制面板小程序手动卸载旧软件包。

# .net - 接口或抽象驻留在哪个程序集中？

> ID：10879884
> 
> 赞同：2
> 
> 时间：2012-06-04T10:33:25.580
> 
> 标签：.net, dependency-injection

在依赖注入中，假设我在 AssemblyA 中有一个Consumer **，****在**AssemblyB 中**有**一个**依赖实现**。我正在使用**构造函数注入**，以便将依赖项的抽象作为构造函数参数传递给消费者。抽象驻留在哪个程序集中？AssemblyA 或 AssemblyB 或其他一些程序集（**AssemblyC**）以便 AssemblyA 和 AssemblyB 可以引用来自 AssemblyC 的抽象？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:39:29.623

据我了解，你有；

```
class AssemblyA.ClassA
{
    public ClassA(ClassB arg) { ... }
}

abstract class AssemblyB.ClassB
{ }

class AssemblyC.ClassC : AssemblyB.ClassB // some concrete implementation of ClassB
{  } 
```

然后;

*   ClassB 可以属于 AssemblyA 或 AssemblyB - 在这种情况下，AssemblyA 引用 AssemblyB
*   ClassC 可以属于 AssemblyA、AssemblyB 或 AssemblyC - 在这种情况下，AssemblyA 引用AssemblyB**和**AssemblyC，而 AssemblyC 引用 AssemblyB

这是您的问题的琐碎化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:53:55.523

您要问的是所谓的依赖倒置，是 SOLID 原则之一。依赖倒置说你应该依赖抽象而不是实现。它还指出，较低层不应该知道较高层。

考虑到这一点，一切都很清楚=）

```
IUserService // abstraction, where should this be placed?
DbUserService //implementation, placed in YourApp.Core
UserController(IUserService) // usage, placed in YourApp.UI 
```

好。由于较低层（核心）不应该知道较高层（UI），我们不能将界面放置在 UI 项目中。

所以我们有两个选择：第三个程序集或核心程序集。

还有另一个称为“[分离接口](http://martinfowler.com/eaaCatalog/separatedInterface.html)”的原则，它指出接口应该放在另一个包/程序集中。

我通常将接口与实现放在同一个包中以保持简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-03T16:37:43.160

## 简答

抽象（包括接口）属于调用者

## 更长的答案

查看 DI 维基百科文章的[实现部分](https://en.wikipedia.org/wiki/Interface_segregation_principle)。

这显示了两种实现：

*   抽象属于更高级别的组件
*   抽象在它们自己的包中

要理解这一点，重要的是要理解抽象在依赖倒置中试图做什么。目标是让更高级别的流程根据自己的术语定义依赖关系，但让其他人稍后提供实现。这允许高层流程在低层实现发生变化时避免变化，并灵活​​地交换不同的实现。

如果接口与实现耦合，那么我们就达不到这个目标，因为接口[不是抽象的](https://blog.ploeh.dk/2010/12/02/Interfacesarenotabstractions/)。接口会随着实现而改变，并且更高级别的流程不会与变化隔离。

还要考虑包依赖结构。如果接口属于实现，则高级流程必须引用任何用例的低级包。但是，如果抽象属于高层流，那么我们可以根据不同的用例引用不同的实现。这是基础架构，如[Ports and Adapters](https://en.wikipedia.org/wiki/Hexagonal_architecture_(software))和[Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)。我认为马克西曼[描述得很好](https://blog.ploeh.dk/2013/12/03/layers-onions-ports-adapters-its-all-the-same/)******

# javascript - jQuery 和 Yahoo Weather API 调用失败

> ID：10879885
> 
> 赞同：0
> 
> 时间：2012-06-04T10:33:35.300
> 
> 标签：javascript, jquery, api, yahoo, weather

我想获取天气信息。我正在尝试使用 jQuery 来实现。所以这是我的代码：

```
$(document).ready(function(){
var weatherURL = 'http://weather.yahooapis.com/forecastjson?w=20066287&u=c&callback=?';
$.getJSON(weatherURL, function(data){
    //console.log('done');
}); }); 
```

看来这行得通。但它输出我

> Uncaught SyntaxError: Unexpected token :

我认为这是一个 JSON 验证问题。但是所有在线 JSON 验证工具都通过了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:51:12.530

似乎 API 返回的是 JSON，而不是 JSONP 数据；getJSON 会自动尝试将其解析为 JSONP，如果 URL 中有回调查询：

> 如果 URL 包含字符串“callback=?” （或类似的，由服务器端 API 定义），请求被视为 JSONP。

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

尝试这个：

```
$(document).ready(function(){
    var weatherURL = 'http://weather.yahooapis.com/forecastjson?w=20066287&u=c';
    $.ajax({
      url: weatherURL,
      dataType: 'json',
      success: function(data) {
        //console.log('done');
      }
    });
}); 
```

# spring - 应用请求后的 RequestScope-Bean 初始化

> ID：10879890
> 
> 赞同：1
> 
> 时间：2012-06-04T10:34:35.443
> 
> 标签：spring, jsf, lifecycle

我有一个 Requestscoped Bean，它在 @postconstruct 方法中读取对话范围 bean 的状态。但是它是在请求应用到会话作用域 bean 之前创建的，因此数据是一个请求后面。我以后如何初始化请求范围的bean？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:29:42.213

利用`<f:event type="preRenderView">`. 把它放在视图顶部的某个地方（确切的位置实际上是无关紧要的，但是在视图顶部的某个地方是最自我记录的）：

```
<f:event type="preRenderView" listener="#{bean.init}" /> 
```

该方法可以看起来像这样，不要忘记删除`@PostConstruct`.

```
public void init() {
    // ...
} 
```

# apple-push-notifications - iPhone 推送通知错误 错误域 = NSCocoaErrorDomain 代码 = 3000 “没有为应用程序找到有效的 'aps-environment' 权利字符串”

> ID：10879892
> 
> 赞同：3
> 
> 时间：2012-06-04T10:34:45.050
> 
> 标签：apple-push-notifications

根据要求进行所有设置。

ApplePushNotification[7822:707] 错误：错误域 = NSCocoaErrorDomain 代码 = 3000“找不到应用程序的有效 'aps-environment' 权利字符串” UserInfo=0x1922f0 {NSLocalizedDescription=找不到应用程序的有效 'aps-environment' 权利字符串}

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T03:31:21.887

我遇到了这个问题，其可能的原因按顺序如下：

1.  “产生企业社会责任”
2.  《下载开发生产证书》
3.  “配置开发和生产SSL”
4.  “下载供应证书”

# android - Android：压缩图像（PNG-JPG）而不完全加载它们

> ID：10879894
> 
> 赞同：1
> 
> 时间：2012-06-04T10:34:53.350
> 
> 标签：android, image, compression

我正在寻找一个允许我压缩图像文件的库。

我尝试使用 Bitmap 类，它工作正常。但我认为这不是一个真正有效的选择。

如果你能帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T11:04:05.920

您可以通过应用这样的选项来压缩图像

```
 Options options = new Options();
    options.inSampleSize = 2;
    options.inPurgeable = true;
    options.inScaled= true;

    Bitmap dummyBitmap = BitmapFactory.decodeFile(imageBitmapFilePath.get(position).getAbsolutePath(), options);

    imageView.setImageBitmap(dummyBitmap); 
```

# quaternions - 四元数反转向量

> ID：10879896
> 
> 赞同：1
> 
> 时间：2012-06-04T10:35:03.973
> 
> 标签：quaternions, glm

我正在使用 glm::quaternions 围绕某个轴旋转矢量。但是向量在每次调用时都会反转轴。

这是我围绕侧轴旋转对象的代码：

```
void PlayerController::rotateForward(float angle) {
    angle = (angle*M_PI) / 180.0f;
    fquat rot = fquat(angle, playerObject->getVecSide());
    normalize(rot);
    vec4 newUpVec = rot * vec4(playerObject->getVecUp(), 1.0f);
    normalize(newUpVec);
    vec3 upVec3 = normalize(vec3(newUpVec.x ,newUpVec.y, newUpVec.z));

    playerObject->setVecUp(upVec3);
    playerObject->setVecForward(-normalize(cross(playerObject->getVecUp(), playerObject->getVecSide())));
    vec3 newPlayerPos = currentPlanet->getPosition() + (playerObject->getVecUp() * radius);
    playerObject->setPosition(newPlayerPos);
} 
```

每次调用此方法时，我的向上向量都会绕轴旋转，但也会反转。我可以通过使用来解决这个问题：

```
 vec4 newUpVec = rot * -vec4(playerObject->getVecUp(), 1.0f); 
```

但这更像是治标不治本。也许这里有人可以帮助我理解四元数在这里的作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T00:35:50.527

那么这里就是答案，四元数初始化是错误的......

这些行不见了：

```
rotateAround = rotateAround * sinf(angle/2.0f);
angle = cosf(angle/2.0f); 
```

因此该方法的正确版本如下所示：

```
vec3 GameObjectRotator::rotateVector(float angle, vec3 toRotate, vec3 rotateAround) {
    angle = (angle*M_PI) / 180.0f;

    rotateAround = rotateAround * sinf(angle/2.0f);
    angle = cosf(angle/2.0f);

    fquat rot = fquat(angle, rotateAround);
    normalize(rot);
    vec4 rotated =  rot * vec4(toRotate, 1.0f);
    normalize(rotated);
    return normalize(vec3(rotated));
} 
```

（自第一个版本以来，该类经历了相当多的重构，但无论如何这个想法应该很清楚）

# html - 网站在 ie78 中不工作

> ID：10879905
> 
> 赞同：0
> 
> 时间：2012-06-04T10:35:59.657
> 
> 标签：html, css, internet-explorer-8, internet-explorer-7

如果您查看[http://nicky.dis-play.dk](http://nicky.dis-play.dk)，该站点在 Chrome、FF、Safari 和 IE9 中运行良好，但是在 IE7 和 IE8 中该站点无法运行，我似乎无法理解问题出在哪里...... :(关于哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:39:10.623

嗨，你可以用这个

```
<link rel="stylesheet" href="/static/css/style.css" type="text/css"> // all css link
<script src="/static/js/libs/modernizr.custom.js" type="javascript/text"> // all script link 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:19:44.793

您忘记在 Modernizr 自定义构建中包含 HTML5 Shiv。

没有它，IE7 和 IE8 无法设置本网站上使用的新 HTML5 元素的样式 ( `<header>`, `<nav>`)

（看评论）

# java - RMI 属性 ignoreStubClasses 真的需要吗？

> ID：10879906
> 
> 赞同：0
> 
> 时间：2012-06-04T10:36:05.430
> 
> 标签：java, rmi

我正在重构一些遗留代码，并且遇到了一个无法解释的属性设置`java.rmi.server.ignoreStubClasses`为`true`. 但经过一番谷歌搜索后，我仍然不确定我是否完全理解它的用途。

据我了解，此属性控制您是否应该使用由生成的存根类`rmic`。如果这是正确的，那么删除它应该是安全的，因为这段代码是用 Java 1.7 编写的并且从未使用过`rmic`.

这个对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:15:00.463

如果它没有它也能工作，你就不需要它。它解决的情况是当您引用端口号导出时，这足以不需要存根，但存根仍然存在，在这种情况下，它们将在导出时使用。这还需要存根存在于客户端，并且如果您绑定对象，则可用于注册表。从构建中删除存根及其生成更简单。

# mysql - MySQL 中什么速度更快？WHERE 子请求 = 0 或 IN 列表

> ID：10879909
> 
> 赞同：0
> 
> 时间：2012-06-04T10:36:24.680
> 
> 标签：mysql, sql, database, pdo

我想知道MySQL中有什么更好的。我有一个 SELECT 查询，它排除了与被禁止的用户 ID 关联的每个条目。

目前我在 WHERE 语句中有一个子查询子句，就像

```
AND (SELECT COUNT(*) 
     FROM TheBlackListTable 
     WHERE userID = userList.ID 
       AND blackListedID = :userID2 ) = 0 
```

它将接受每个`userID`不存在的`TheBlackListTable`

在上一个请求中首先检索所有被禁止的 ID 并将上一个子句替换为是否会更快

```
AND creatorID NOT IN listOfBannedID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:46:16.660

`LEFT JOIN / IS NULL`并且`NOT IN`最快：

```
SELECT  *
FROM    mytable
WHERE   id NOT IN
        (
        SELECT  userId
        FROM    blacklist
        WHERE   blackListedID = :userID2
        ) 
```

或者

```
SELECT  m.*
FROM    mytable m
LEFT JOIN
        blacklist b
ON      b.userId = m.id
        AND b.blackListedID = :userID2
WHERE   b.userId IS NULL 
```

`NOT EXISTS`产生相同的计划，但由于实施缺陷，效率略低：

```
SELECT  *
FROM    mytable
WHERE   NOT EXISTS
        (
        SELECT  NULL
        FROM    blacklist b
        WHERE   b.userId = m.id
                AND b.blacklistedId = :userID2
        ) 
```

所有这些查询在第一次匹配时停止`blacklist`（因此执行 a `semi-join`）

该`COUNT(*)`解决方案效率最低，因为`MySQL`将计算实际`COUNT(*)`而不是在第一次匹配时停止。

但是，如果您在`UNIQUE`上有一个索引`(userId, blacklistedId)`，这不是什么大问题，因为无论如何不能有多个匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:43:51.147

使用`EXISTS`子句检查不在黑名单中的用户。

示例查询

```
Select * from userList
where not exists( Select 1 from TheBlackListTable  where userID = userList.ID) 
```

`IN`当存在固定值或值计数低时使用子句。

# java - 查询资源数组的高效同步

> ID：10879913
> 
> 赞同：2
> 
> 时间：2012-06-04T10:36:37.840
> 
> 标签：java, synchronization

有N个资源的列表，每个资源一次最多可以被一个线程查询。

有几个线程需要在大致相同的时间做同样的事情：查询每个资源（每个线程有不同的查询），以任意顺序，并收集响应。

如果每个线程以相同的顺序循环资源，从 0 到 N-1，那么它们可能不得不相互等待，这样效率不高。

我想过让线程以随机排列的方式循环资源，但这似乎太复杂而且效率也不高，例如，对于 2 个资源和 2 个线程，在一半的情况下它们会选择相同的顺序并等待每个其他。

有没有一种简单有效的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:04:30.633

也许你应该反过来想。关键是防止资源匮乏，即尽可能减少资源不处理请求的时间。通常队列在这里很有用。

鉴于您最多有 8 个不同的资源，我会给每个资源一个自己的线程和一个队列。查询线程将首先将其所有请求放入这些队列中，然后等待，同时从该队列中消耗资源。这样，资源将被请求饱和并最小化饥饿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:51:37.163

不知何故，我对此的回答是没有。您无法控制线程以及它们访问资源的顺序，而且最重要的是（这是同步的全部要点）您不知道它们将如何安排执行。即使试图让他们访问免费资源也会产生不可预知的结果，因为可以先调度创建的最后一个线程。

我唯一想到的就是分区。也就是说，将要访问/被访问的资源和/或线程分成几部分。请注意，这不是一个简单的问题：正如您所说，拥有更少的线程和更少的资源会增加线程尝试访问已锁定资源的机会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T14:39:55.627

只需在使用时从列表中删除资源，因此每个线程都会：

*   从列表中删除资源
*   处理它
*   放回去

显然列表访问需要同步。这样，您将永远不会有 2 个线程尝试使用相同的资源。

# delphi - 如何从 TRttiMethod 获取/创建匿名方法？

> ID：10879916
> 
> 赞同：3
> 
> 时间：2012-06-04T10:36:54.300
> 
> 标签：delphi, delphi-xe, rtti

我想处理**`TRttiMethod`**匿名**方法**。我怎么能这样做？

这是我希望事情如何工作的简化示例：

界面：

```
TMyClass = class
public
  // this method will be acquired via Rtti
  procedure Foo;

  // this method shall return above Foo as anonymous method
  function GetMethodAsAnonymous: TProc;
end; 
```

执行：

```
function TMyClass.GetMethodAsAnonymous: TProc;
var
  Ctx: TRttiContext;
  RttiType: TRttiType;
  RttiMethod: TRttiMethod;
begin
  Ctx := TRttiContext.Create;
  try
    RttiType := Ctx.GetType(Self.ClassType);
    RttiMethod := RttiType.GetMethod('Foo');

    Result := ??????; // <-- I want to put RttiMethod here - but how?
  finally
    Ctx.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:08:02.517

如果你真的想要一个匿名方法，那就做一个匿名方法：

```
Result := procedure
          begin
            RttiMethod.Invoke(Self, []);
          end; 
```

您还可以构造一个简单的方法指针：

```
var
  Method: procedure of object;

TMethod(Method).Code := RttiMethod.CodeAddress;
TMethod(Method).Data := Self;
Result := Method; 
```

最直接的方法当然是根本不使用 RTTI：

```
Result := Foo; 
```

# objective-c - NSURLConnection sendSynchronousRequest 不阻塞

> ID：10879917
> 
> 赞同：0
> 
> 时间：2012-06-04T10:36:55.593
> 
> 标签：objective-c, ios, nsurlconnection, nsoperation

我正在调用`NSURLConnection`-`sendSynchronousRequest`在 NSOperation 中，但该方法立即返回。我希望它会阻止操作，直到收到所有数据。这是我的误解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:44:22.007

将 NSURLConnection 对象的委托设置为 self

```
`NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];`
```

`然后实现connectionDidFinishLoading方法e ````
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
//your code
}
`````

# delphi - 使用 RTTI 加载 FireMonkey 样式资源

> ID：10879919
> 
> 赞同：6
> 
> 时间：2012-06-04T10:37:02.757
> 
> 标签：delphi, rtti, firemonkey

我正在尝试编写从 FMX TStyledControl 继承的类。当样式更新时，它会将样式资源对象加载到缓存中。

我为带有自定义控件的包创建了项目组，并按照 Delphi 帮助中的描述测试了 FMX HD 项目。安装包并将 TsgSlideHost 放在测试表单上后，我运行测试应用程序。它运行良好，但是当我关闭它并尝试重建包时，RAD Studio 显示“rtl160.bpl 中的错误”或“无效指针操作”。

TsgStyledControl 的 LoadToCacheIfNeeded 过程似乎有什么问题，但我不明白为什么。将 RTTI 与 FMX 样式或任何东西一起使用是否有任何限制？

TsgStyledControl 来源：

```
unit SlideGUI.TsgStyledControl;

interface

uses
  System.SysUtils, System.Classes, System.Types, FMX.Types, FMX.Layouts, FMX.Objects,
  FMX.Effects, System.UITypes, FMX.Ani, System.Rtti, System.TypInfo;

type
  TCachedAttribute = class(TCustomAttribute)
  private
    fStyleName: string;
  public
    constructor Create(const aStyleName: string);
    property StyleName: string read fStyleName;
  end;

  TsgStyledControl = class(TStyledControl)
  private
    procedure CacheStyleObjects;
    procedure LoadToCacheIfNeeded(aField: TRttiField);
  protected
    function FindStyleResourceAs<T: class>(const AStyleLookup: string): T;
    function GetStyleName: string; virtual; abstract;
    function GetStyleObject: TControl; override;
  public
    procedure ApplyStyle; override;
  published
    { Published declarations }
  end;

implementation

{ TsgStyledControl }

procedure TsgStyledControl.ApplyStyle;
begin
  inherited;
  CacheStyleObjects;
end;

procedure TsgStyledControl.CacheStyleObjects;
var
  ctx: TRttiContext;
  typ: TRttiType;
  fld: TRttiField;
begin
  ctx := TRttiContext.Create;
  try
    typ := ctx.GetType(Self.ClassType);
    for fld in typ.GetFields do
      LoadFromCacheIfNeeded(fld);
  finally
    ctx.Free
  end;
end;

function TsgStyledControl.FindStyleResourceAs<T>(const AStyleLookup: string): T;
var
  fmxObj: TFmxObject;
begin
  fmxObj := FindStyleResource(AStyleLookup);
  if Assigned(fmxObj) and (fmxObj is T) then
    Result := fmxObj as T
  else
    Result := nil;
end;

function TsgStyledControl.GetStyleObject: TControl;
var
  S: TResourceStream;
begin
  if (FStyleLookup = '') then
  begin
    if FindRCData(HInstance, GetStyleName) then
    begin
      S := TResourceStream.Create(HInstance, GetStyleName, RT_RCDATA);
      try
        Result := TControl(CreateObjectFromStream(nil, S));
        Exit;
      finally
        S.Free;
      end;
    end;
  end;
  Result := inherited GetStyleObject;
end;

procedure TsgStyledControl.LoadToCacheIfNeeded(aField: TRttiField);
var
  attr: TCustomAttribute;
  styleName: string;
  styleObj: TFmxObject;
  val: TValue;
begin
  for attr in aField.GetAttributes do
  begin
    if attr is TCachedAttribute then
    begin
      styleName := TCachedAttribute(attr).StyleName;
      if styleName <> '' then
      begin
        styleObj := FindStyleResource(styleName);
        val := TValue.From<TFmxObject>(styleObj);
        aField.SetValue(Self, val);
      end;
    end;
  end;
end;

{ TCachedAttribute }

constructor TCachedAttribute.Create(const aStyleName: string);
begin
  fStyleName := aStyleName;
end;

end. 
```

使用 TsgStyledControl：

```
type
  TsgSlideHost = class(TsgStyledControl)
  private
    [TCached('SlideHost')]
    fSlideHost: TLayout;
    [TCached('SideMenu')]
    fSideMenuLyt: TLayout;
    [TCached('SlideContainer')]
    fSlideContainer: TLayout;
    fSideMenu: IsgSideMenu;
    procedure ReapplyProps;
    procedure SetSideMenu(const Value: IsgSideMenu);
  protected
    function GetStyleName: string; override;
    function GetStyleObject: TControl; override;
    procedure UpdateSideMenuLyt;
  public
    constructor Create(AOwner: TComponent); override;
    procedure ApplyStyle; override;
  published
    property SideMenu: IsgSideMenu read fSideMenu write SetSideMenu;
  end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:32:12.490

使用 TRttiField.GetAttributes 会导致设计时出错。这是 Delphi XE2 中的一个错误。见[质量控制报告](http://qc.embarcadero.com/wc/qcmain.aspx?d=106586)。

# c#-4.0 - 分配数据源后DataGridView中的ColumnCount保持为0

> ID：10879920
> 
> 赞同：0
> 
> 时间：2012-06-04T10:37:06.960
> 
> 标签：c#-4.0, datagridview

我在使用以下简单代码时遇到问题

```
BindingList<Car> tempList = new BindingList<Car>();
BindingSource bindingSource = new BindingSource();
bindingSource.DataSource = tempList;
dgTempView.DataSource = bindingSource; 
```

这里，dgTempView 是一个数据网格视图执行上述行后，datagrid view 中的列数保持为 0。当我尝试在 tempList 中添加 Car 实例时，我收到错误消息，提示“无法将行添加到 datagridview没有列的控件。我无法理解我在这里缺少什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:51:28.047

发现我的错误。Car 类的成员是公共实例变量而不是属性。当我将它们更改为自动属性时，它就起作用了:)

# javascript - 如何在 jquery 或 js 中创建动态二维数组

> ID：10879921
> 
> 赞同：0
> 
> 时间：2012-06-04T10:37:33.700
> 
> 标签：javascript, jquery, html, arrays, multidimensional-array

我需要在 jquery 或 javascript 中创建全局二维数组

我的功能是这样的

```
<script>

var globalArray[0] = new Array();

function createArray(){

    alert(globalArray[0]);         
}

</script>

<div><input type='button' value='save' onclick='createArray();'> </div> 
```

单击该按钮时，我收到此错误`"globalArray[0] is undefined"`

如何创建全局动态多维数组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T10:39:46.543

```
if (!globalArray[index]) 
    globalArray[index] = []; // init the array.

globalArray[index].push(name); 
```

你有一个点的错字：

```
$.("#uname").val(); 
```

改成：

```
$("#uname").val(); 
```

你想用这段代码做什么？

* * *

**更新：（**问题已完全编辑。）

你的代码：

```
var globalArray[0] = new Array(); 
```

`globalArray[0]`是无效的变量名，你需要先声明数组：

```
var globalArray = []; // Array literal.
globalArray[0] =  [] // The element at position 0 is new an array. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:42:33.390

而不是

```
if(loop == 0){
 globalArray[index][0] = uname;
}else{
  globalArray[index][loop++] = uname;
} 
```

用这个

```
if(loop > 0){
    globalArray[index][loop++] = uname;     
}else{
    globalArray[index][0] = uname;      
} 
```

# networking - 如何将文件从服务器复制到其他IP

> ID：10879926
> 
> 赞同：0
> 
> 时间：2012-06-04T10:38:01.527
> 
> 标签：networking, copy, ip, windows-server-2008-r2

我需要将一些文件从服务器复制到我只知道 IP 地址的其他计算机上。我知道源文件和目标文件。我正在使用 Windows 2008 R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:54:46.843

你有几个选择，比如

1.  与微软同步玩具一起去
2.  FTP
3.  开发负责读取/写入文件的客户端/服务器应用程序。
4.  wincp

# mysql - 多个数据库中表之间的关系

> ID：10879927
> 
> 赞同：3
> 
> 时间：2012-06-04T10:38:02.480
> 
> 标签：mysql, database, foreign-keys, relationship, multiple-databases

我正在构建一个复杂的平台，我想为它的每个“模块”建立一个专用数据库。但我需要有一个“主”数据库，其中包含一些常见的表，如用户表。我需要能够在多个数据库中的表之间拥有外键。（如 user_id）

我知道如果数据库与它们现在在同一台服务器中，我可以有跨数据库关系，但我不想受此限制，因为如果应用程序增长很多，我可能需要将数据库分成多个服务器。

所以，在做出决定之前，我正在寻找所有的选择。

你对此有何难处？

我正在使用mysql。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T10:48:19.270

您可以使用[FEDERATED 存储引擎](https://dev.mysql.com/doc/refman/5.5/en/federated-storage-engine.html)来执行此操作。您所做的是使用 FEDERATED 引擎创建一个本地表，该引擎又将连接到远程系统以解决查询。不过，我不知道它的性能。

* * *

更好的方法可能是重新考虑应用程序数据模型。我可以理解您为什么要为复杂系统中的每个模块拥有单独的数据库，但是当您想要共享一些表数据时会变得很困难。如果您对一个模块中强制执行的数据而不是另一个模块中强制执行的数据引入一些限制，那么维护将更加困难。

我认为解决方案是分离对数据的关注。让每个模块都有自己的数据库，但不要让模块查询其他数据！如果一个模块需要关于用户的数据，让它通过`user`模块获取它。

# java - java应用中汉字的使用

> ID：10879932
> 
> 赞同：1
> 
> 时间：2012-06-04T10:39:05.150
> 
> 标签：java

我正在尝试在我的应用程序中显示 unicode 字符（中文）。jsp 部分工作正常，通过将字符集设置为 UTF-8 没有问题。但是在 Java 代码中，不显示 Unicode 字符。我尝试通过设置请求 utf-8

```
request.setCharacterEncoding("UTF-8"); 
```

最后我将得到相同的结果并插入到表中。数据库已经配置为支持 unicode。

我做错了什么。请就解决方案提出建议，或者有更好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:45:25.623

尝试在您的应用程序中实现过滤器以进行字符编码：

```
public class CharacterEncodingFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig)
            throws ServletException {

    }

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)
            throws IOException, ServletException {
        servletRequest.setCharacterEncoding("UTF-8");
        servletResponse.setContentType("text/html; charset=UTF-8");
        filterChain.doFilter(servletRequest, servletResponse);
    }

    @Override
    public void destroy() {

    }
} 
```

如果您使用的是 tomcat，请确保您的连接器元素具有值为 UTF-8 的 URIEncoding 属性。

```
<Connector port="8080" 
           protocol="HTTP/1.1"
           connectionTimeout="20000"
           URIEncoding="UTF-8"
           redirectPort="8443"/> 
```

还要确保在每个 JSP 页面中都指定了这一点：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> 
```

希望这可以帮助。

# drupal - views_post_execute 由 $view 输出的白屏

> ID：10879935
> 
> 赞同：3
> 
> 时间：2012-06-04T10:39:22.597
> 
> 标签：drupal, views

当我尝试将 $view 变量写入每个 var_dump、每个开发模块等的输出时出现白屏。如果我用 dvm('test'); 运行测试 一切都按预期工作。

```
function feeds_node_processor_global_views_post_execute(&$view) {
  dvm($view->name);
  if($view->name == 'liveticker_start2'){
    //dvm($view->total_rows);
    //dvm("test");
    //var_dump($view);
  }
  if ($view->total_rows > 100) {
   drupal_set_message(t('You have more than 100 hits.'));
  }
} 
```

在看门狗中没有任何错误，我无权访问 apache 日志（目前）。还有其他线索吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:55:20.620

请参阅[http://drupal.org/node/158043](http://drupal.org/node/158043)关于白屏死机。

我过去遇到过类似的问题，我认为这是因为我在尝试输出`$view`对象时用完了 php 内存。如果您可以访问它，您的服务器的日志可能有助于验证这一点，但由于您不能，`memory_limit`如果可以，请尝试增加您的 PHP。

# linux - zenity 抛出 glibc 错误

> ID：10879942
> 
> 赞同：0
> 
> 时间：2012-06-04T10:39:58.947
> 
> 标签：linux, ubuntu-11.10, zenity

我一直在尝试在 shell 脚本中使用 zenity 和标准重定向，比如

**对于我在 $(seq 1 10); 回声 $i; 完成 | zenity --list --column =“数字”**

但在命令行上这可行，但会引发以下警告：

(zenity:3328): GLib-WARNING **: 无效的文件描述符。

这似乎只有在数据通过管道重定向到 Zenity 命令时才会发生。

谁能告诉我这个警告意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:26:01.727

这个错误是通过尝试关闭标准输入两次触发的——一次是在从序列中读取所有数据之后，第二次是因为它即将退出——这是在 zenity 源中。这纯粹是装饰性的，可以安全地忽略 - zenity 代码除了在此时退出之外什么都不做。

在处理程序`zenity_tree_handle_stdin`中，在例程结束时它关闭了相同的通道（由于在函数中和全局范围内使用相同的命名变量而导致变量隐藏）：

```
if ((condition != G_IO_IN) && (condition != G_IO_IN + G_IO_HUP)) {
  g_io_channel_shutdown (channel, TRUE, NULL);
  return FALSE;
} 
```

在`tree.c`程序即将退出的第 648 行中：

```
 if (channel != NULL)
    g_io_channel_shutdown (channel, TRUE, NULL); 
```

这两个代码路径都将尝试关闭同一个通道，从而导致警告。因为在第 648 行之后要做的下一件事是发出 a `gtk_main_quit`，所以我认为可以安全地忽略该警告。

# winforms - 无法在 VC++ winforms 中将数据写入其他控件

> ID：10879943
> 
> 赞同：0
> 
> 时间：2012-06-04T10:40:09.670
> 
> 标签：winforms, visual-c++, picturebox

我正在尝试在第一个表单的第二个表单的图片框上显示图像。但是我看不到任何输出....

我的 Form1.cpp 代码是这样的

```
#include "SecondForm.h"

SecondForm^ obj=gcnew SecondForm();
System::Drawing::Bitmap ^bmp = gcnew System::Drawing::Bitmap(grf->width,grf->height,grf->widthStep,System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr)grf->imageData);
obj->pictureBox1->Image=obj->pictureBox1->Image->FromHbitmap(bmp->GetHbitmap()); 
```

我不知道是什么问题......

谁能帮我解决这个问题...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:41:08.057

您是否尝试过这个简单的代码 -

```
obj.pictureBox1.Image = bmp; // [You may write the C++ equivalent] 
```

而不是这个 -

> obj->pictureBox1->Image=obj->pictureBox1->Image->FromHbitmap(bmp->GetHbitmap());

# svn - 在 TortoiseSVN 中撤消签出子文件夹

> ID：10879944
> 
> 赞同：21
> 
> 时间：2012-06-04T10:40:13.247
> 
> 标签：svn, tortoisesvn

* * *

*如何使用 TortoiseSVN “取消签出”**子文件夹？***

* * *

我尝试了什么：

*   [删除整个子文件夹](http://tortoisesvn.tigris.org/ds/viewMessage.do?dsForumId=4061&dsMessageId=964069)
*   [就地](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-export.html)导出，即在自身之上导出文件夹
*   搜索诸如[undo+svn+checkout 之类的东西](https://stackoverflow.com/search?q=SVN+undo+checkout)
*   查看隐藏`.svn`文件夹，看看我是否可以手动编辑内容

前两个选项一开始似乎有效，但是当我在顶级文件夹上点击*Check for modified时，它会告诉我***子文件夹及其内容是 "missing"**。这当然不是我想要的。

为了让事情更清楚，我的文件夹结构的相关位类似于：

```
//Repository/trunk/...
//Repository/branches
                     /some-feature-branch1/...
                     /some-feature-branch2/...
                     /some-feature-branch3/...
                     /some-feature-branch4/...
                     etc. 
```

在过去，我做了以下事情：

*   `//Repository/branches`在本地签出文件夹，无需递归抓取内容。
*   对某些（但不是全部）功能分支子文件夹进行了单独签出

我试图`some-feature-branch3`从我的本地磁盘中删除 -say- ，但这总是导致在检查“分支”文件夹进行修改时，子文件夹的状态“丢失”。

请注意，我更喜欢使用*TortoiseSVN*解决此问题的方法，但如果不可能，则命令行修复将是可接受的替代方案。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-04T10:49:11.743

在 SVN 1.7 中你可以做到`svn up --set-depth exclude some-feature-branch3`（不确定你是否可以在 SVN 1.6 中做到）。

在 Tortoise 中，您可以右键单击`some-feature-branch3`-> 'Update to Revision' -> 'Update Depth: Exclude' -> 'Make Depth Sticky'。

如果你不能在 1.6 中做到这一点，你可以只用 depth 做同样的把戏`empty`。它将离开目录本身，但它将是空的，这对于大多数实际目的来说已经足够了。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-04T10:51:08.093

右键单击该文件夹并转到“更新到修订版...”。在弹出的对话框中，将更新深度设置为“排除”。（注意，这似乎只适用于文件夹。）这将从您的工作副本中删除它，但不会影响存储库。Tortoise 只会知道在更新期间不要尝试更新它。

为了撤消它，您可以右键单击父文件夹（或其父文件夹等）并选择“Repo Browser”。找到排除的文件夹，右键单击并选择“将项目更新到修订版”。你会得到同样的对话框；这一次，只要确保它显示“工作副本”即可。

# django - 将值保存到 django 中的外键时出现 IntegrityError 错误

> ID：10879948
> 
> 赞同：0
> 
> 时间：2012-06-04T10:40:24.010
> 
> 标签：django, django-models, django-forms, django-views

嘿伙计们，我在保存我的观点时遇到了完整性错误。请告诉我我做错了什么

这是我的 Django 模型

```
class Ruleinfo(models.Model):
    rule = models.IntegerField(null=False)
    From = models.IPAddressField(null=True)
    to = models.IPAddressField(null=True)
    priority = models.ForeignKey('Priority',related_name='pri_no')
    cisp =models.ForeignKey('Priority',related_name = 'CISP_no')
    def __unicode__(self):
        return u'%s' %(self.rule)

class Priority(models.Model):  
    pri =  models.IntegerField(null = True)
    Ruleno = models.ForeignKey('Ruleinfo',related_name = 'ruleno_no')
    CISP = models.IntegerField(null = True)
    def __unicode__(self):
        return u'%s ' % (self.priority) 
```

我的模型形式看起来像。

```
class RuleInfoForm(ModelForm):
      class Meta:
        model = Ruleinfo
        fields = ("rule","From","to") 
```

这是我的意见.py

```
def multiwanrule_info(request):
    data = {}
    no_of_isp = MultiWAN.objects.all()
    try:
        form = RuleInfoForm(request.POST)
    except:
        pass
    print "----------------------------printing form"
    print form
    if form.is_valid():
        rl_frm = form.save(commit=False)
        get_priorities = request.POST.getlist('priority')
        get_cisp_info = request.POST.getlist('cisp')
        rule_object = Ruleinfo()
        for get_pri,get_ci in zip(get_priorities,get_cisp_info,):
            pri_object =  Priority.objects.get_or_create(Ruleno = rule_object)
            pri_object.pri = get_pri
            pri_object.CISP = get_ci

        rl_frm.save()

    else:
        form = RuleInfoForm() 
        data['form'] = form  
        data['number_of_isp'] = no_of_isp
    return render_to_response('networking.html',data) 
```

我收到了上述错误

```
networking_priority.Ruleno_id may not be NULL 
```

帮帮我，让我回到正轨。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:31:17.787

```
rule_object = Ruleinfo() 
```

这只是实例化一个新的模型对象。它没有保存或分配值。因为它没有被保存，所以它没有`id`价值。

分配您的 rule_object 值：rule、from、to、priority 和 cisp 值，应该可以解决您的问题。

# php - 如何在ios中使用php文件将图像上传到mysql？

> ID：10879950
> 
> 赞同：-1
> 
> 时间：2012-06-04T10:40:26.200
> 
> 标签：php, iphone, mysql, html

这是我使用 php 在 Mysql 中上传图像的 xcode 代码。NSString *urlString = @"http://www.mysullurpeta.com/iphone/upload.php";

```
 NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:@"world1.jpeg"],90);
    NSLog(@"imageView in data %@/n>>>>%d kb",imageData,imageData.length);

    NSMutableURLRequest *request= [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
 NSLog(@"post data is %@", contentType);
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    [request setHTTPBody:imageData];
 NSLog(@"post data is %@",request);

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    NSString *str = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
        NSLog(@"Data ---- %@", str); 
```

------这是我的php脚本

```
<?php
echo "file from client: " . $_FILES["filename"]["name"]; 

if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 200000))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],"upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

我正在尝试将图像移动到“上传/”文件中。它显示错误无效文件。我在哪里做错了，我不明白。请...帮助我...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:51:31.547

使用此功能，它会在服务器中的文件夹上而不是在数据库中上传 uiimage

```
``+(NSString *)uploadImage:(UIImage *)img :(NSString *)path :(NSString *)name {`` ````
NSLog(@"-----------------------image uploadImage uploadImage uploadImage -------------------------");

 /*
 turning the image into a NSData object
 getting the image back out of the UIImageView
 setting the quality to 90
 */
NSData *imageData = UIImageJPEGRepresentation(img, 90);

// setting up the URL to post to

NSString *urlString=WSURL;

// setting up the request object now
NSMutableURLRequest *_request = [[[NSMutableURLRequest alloc] init] autorelease];
[_request setURL:[NSURL URLWithString:urlString]];
[_request setHTTPMethod:@"POST"];

 /*
 add some header info now
 we always need a boundary when we post a file
 also we need to set the content type
 You might want to generate a random boundary.. this is just the same
 as my output from wireshark on a valid html post
 */

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[_request addValue:contentType forHTTPHeaderField: @"Content-Type"];

 /*
 now lets create the body of the post
 */

NSString *name1= [NSString stringWithFormat:@"%@%@",path,name];
NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n",name1] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
//[body appendData:[NSData i:@"path=%@",path]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// setting the body of the post to the reqeust
[_request setHTTPBody:body];
// now lets make the connection to the web
NSData *returnData = [NSURLConnection sendSynchronousRequest:_request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

return(returnString); 
```

}` 

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2012-06-04T11:18:30.387

使用以下我已经使用此代码成功上传了mysql数据库中的记录它对我来说很好

iPhone 代码     

```
 NSString *post =[[NSString alloc] initWithFormat:@"ProviderNPI=%@&PatientID=%@&FileURL=%@&FileTYPE=%@&DataSynID=%@&AppointmentListingsID=%@",providerNPI,patientID,FILEURL,FILETYPE,dataSynID,appointmentListingID];

    NSURL *url=[NSURL URLWithString:@"http://www.yourserver.com/Sync.php?"];

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",data); 
```

用于插入数据库的 PHP 代码

```
 <?php

 $con = mysql_connect("emriphone.db.6420177.hostedresource.com","emriphone","Light12-");

 if (!$con)

   {

 die('Could not connect: ' . mysql_error());

  }

mysql_select_db("emriphone", $con);

$providernpi=$_POST['ProviderNPI'];
$patientid=$_POST['PatientID'];
$fileurl=$_POST['FileURL'];
$filetype=$_POST['FileTYPE'];
$datasynid=$_POST['DataSynID'];
$appointmentlistingsid=$_POST['AppointmentListingsID'];

  $query=("INSERT INTO AppointmentDataSync   (ProviderNPI,PatientID,FileURL,FileType,DataSyncID,AppointmentListingsID)
VALUES ('$providernpi', '$patientid','$fileurl','$filetype','$datasynid','$appointmentlistingsid')");

mysql_query($query,$con);
printf("Records inserted: %d\n", mysql_affected_rows());

 echo($appointmentlistingsid)

  ?> 
``` 
```

# php - 电商网站查询慢（选择商品）

> ID：10879953
> 
> 赞同：0
> 
> 时间：2012-06-04T10:40:30.593
> 
> 标签：php, mysql, e-commerce

```
SELECT products.* 
FROM products 
LEFT JOIN product_category 
    ON products.id_product = product_category.id_produs 
LEFT JOIN categories 
    ON product_category.id_category = categories.id_category
INNER JOIN options 
    ON products.id_product = options.id_product 
WHERE categories.id_category = '472' 
AND product_category.id_category = categories.id_category
LIMIT 0, 20 
```

您好，我正在为一个编程竞赛的电子商务网站工作，我在分类页面上遇到了一些问题，产品将在该页面上列出。

MySQL中有4个表：products、categories、product_category（包含category和products的关系）和options。选项表包含您可以选择购买的产品的各种属性（如重量、高度、颜色）。我需要在分类页面上调用这些，因为有一个产品过滤器，当我选择颜色：红色时，它将显示所有具有属性颜色的产品：红色。

如果我在 products 表中有 10 000 行，并且每个产品有 5 个选项，那么选项表将有 50 000 行，问题是查询会很慢，并且显示产品需要 30 多秒. 我确定问题出在查询上，但我不知道如何做到。为了在 5 秒内获得页面上的产品，我应该在查询中写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:54:11.877

确保您在这些表的 id_category 和 id_product 上有索引，然后贴`EXPLAIN`在它前面，然后发布输出，老实说，如果您没有索引，那无论如何都可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:55:51.773

一些事情：您指定了这种关系两次：

```
AND product_category.id_category = categories.id_category 
```

和

```
ON product_category.id_category = categories.id_category 
```

这可能会使您的数据库优化器感到困惑。

另一个潜在的优化是将您正在执行 WHERE 子句的列移动到表上。变成 `会减少加入的记录数`WHERE categories.id_category = '472'`。`product_category.id_category = '472'`

正如一些问题中提到的，`EXPLAIN`计划将向您显示查询的哪一部分速度较慢，并在缺少索引时为您提供指示。

# css - 如何将图像死点与引导程序对齐

> ID：10879955
> 
> 赞同：223
> 
> 时间：2012-06-04T10:40:33.190
> 
> 标签：css, twitter-bootstrap

我正在使用引导框架并试图使图像水平居中但没有成功..

我尝试了各种技术，例如将 12 个网格系统分成 3 个相等的块，例如

```
<div class="container">
    <div class="row">
      <div class="span4"></div>
      <div class="span4"><img src="logo.png" /></div>
      <div class="span4"></div>
    </div>
</div> 
```

使图像相对于页面居中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2013-12-13T07:55:37.573

Twitter Bootstrap v3.0.3 有一个类：center-block

> 中心内容块
> 
> 设置要显示的元素：通过边距阻止和居中。可作为 mixin 和 class 使用。

只需要`.center-block`在`img`标签中添加一个类，看起来像这样

```
<div class="container">
  <div class="row">
    <div class="span4"></div>
    <div class="span4"><img class="center-block" src="logo.png" /></div>
    <div class="span4"></div>
  </div>
</div> 
```

在 Bootstrap 中已经有 css 样式调用 .center-block

```
.center-block {
    display: block;
    margin-left: auto;
    margin-right: auto;
 } 
```

[你可以从这里](http://jsfiddle.net/vxad5/1/)看到一个样本

* * *

## 回答 #2

> 赞同：149
> 
> 时间：2013-03-15T15:04:05.517

这样做的正确方法是

```
<div class="row text-center">
  <img ...>
</div> 
```

* * *

## 回答 #3

> 赞同：127
> 
> 时间：2017-04-08T12:14:02.760

**2018 年更新**

**Bootstrap 4**`center-block`中不再存在该类。要在 Bootstrap 4 中居中图像，请使用...**`mx-auto d-block`**

 **```
<img src="..." class="mx-auto d-block"/> 
```

* * *

## 回答 #4

> 赞同：84
> 
> 时间：2014-01-10T22:34:24.400

将“中心块”作为类添加到图像 - 无需额外的 CSS

```
<img src="images/default.jpg" class="center-block img-responsive"/> 
```

* * *

## 回答 #5

> 赞同：53
> 
> 时间：2012-10-26T15:04:04.203

Twitter bootstrap 有一个以 .pagination-centered 为中心的类

它对我有用：

```
<div class="row-fluid">
   <div class="span12 pagination-centered"><img src="header.png" alt="header" /></div>
</div> 
```

该类的css是：

```
.pagination-centered {
  text-align: center;
} 
```

* * *

## 回答 #6

> 赞同：36
> 
> 时间：2016-08-14T05:51:53.453

您可以使用以下内容。它支持上面的 Bootstrap 3.x。

```
<img src="..." alt="..." class="img-responsive center-block" /> 
```

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2012-06-04T10:55:21.940

假设图像旁边没有其他东西，最好的方法是`text-align: center`在`img`父级中使用：

```
.row .span4 {
    text-align: center;
} 
```

**编辑**

如其他答案中所述，您可以将引导 CSS 类添加`.text-center`到父元素。这完全一样，在**v2.3.3**和**v3中都可用**

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2015-03-13T08:44:01.170

为我工作。尝试使用`center-block`

```
<div class="container row text-center">
    <div class="row">
      <div class="span4"></div>
      <div class="span4"><img class="center-block" src="logo.png" /></div>
      <div class="span4"></div>
    </div>
</div> 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-06-03T06:37:44.853

我需要同样的，在这里我找到了解决方案：

[https://stackoverflow.com/a/15084576/1140407](https://stackoverflow.com/a/15084576/1140407)

```
<div class="container">
  <div class="row">
    <div class="span9 centred">
      This div will be centred.
    </div>
  </div>
</div> 
```

和 CSS：

```
[class*="span"].centred {
  margin-left: auto;
  margin-right: auto;
  float: none;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-05T21:53:09.490

您可以将 margin 属性与 bootstrap img 类一起使用。

```
.name-of-class .img-responsive { margin: 0 auto; } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-24T09:37:18.107

如果浏览器版本没有问题，我们似乎可以使用新的 HTML5 功能：

在 HTML 文件中：

```
<div class="centerBloc">
  I will be in the center
</div> 
```

在 CSS 文件中，我们写：

```
body .centerBloc {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
} 
```

因此 div 可以完美地位于浏览器的中心。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-01-29T14:44:11.880

我正在使用`justify-content-center`类到容器内的一行。适用于 Bootstrap 4。

```
<div class="container-fluid">
  <div class="row justify-content-center">
   <img src="logo.png" />
  </div>
</div> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-02-21T13:58:09.320

你应该使用

```
<div class="row fluid-img">
  <img class="col-lg-12 col-xs-12" src="src.png">
</div>

.fluid-img {
    margin: 60px auto;
}

@media( min-width: 768px ){
        .fluid-img {
            max-width: 768px;
        }
}
@media screen and (min-width: 768px) {
        .fluid-img {
            padding-left: 0;
            padding-right: 0;
        }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-12T17:31:25.207

我创建了这个并添加到 Site.css。

```
.img-responsive-center {
    display: block;
    height: auto;
    max-width: 100%;
    margin-left:auto;
    margin-right:auto;
} 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2012-06-04T11:43:59.070

您可以更改先前解决方案的 CSS，如下所示：

```
.container, .row { text-align: center; } 
```

这也应该使父级中的所有元素居中`div`。**

# hibernate - 休眠多对一映射

> ID：10879956
> 
> 赞同：1
> 
> 时间：2012-06-04T10:40:33.680
> 
> 标签：hibernate, hibernate-mapping

我正在为一对多映射进行概念验证，但没有成功。我的架构如下：用户 -----> UserRole

```
import static javax.persistence.GenerationType.IDENTITY;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="UserRole")
public class UserRole {

    private int userRoleId;
    private String userRoleName;

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "UserRoleId", unique = true, nullable = false)
    public int getUserRoleId() {
        return userRoleId;
    }

    public void setUserRoleId(int userRoleId) {
        this.userRoleId = userRoleId;
    }

    @Column(name = "UserRoleName", unique = true, nullable = false)
    public String getUserRoleName() {
        return userRoleName;
    }

    public void setUserRoleName(String userRoleName) {
        this.userRoleName = userRoleName;
    }

} 
```

这里是 User 类的一部分

```
 @Entity
    @Table(name="Users")
    public class User {
    private int userId;
    private String firstName;
    private String lastName;
    private String userName;
    private String password;
    private String phone;
    private String email;
    private UserRole userRole;
    private List<Meeting> meetings;
    private List<MeetingInvitation> meetingInvitationsSend;
    private List<MeetingInvitation> meetingInvitationsReceived;

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "UserId", unique = true, nullable = false)
    public int getUserId() {
        return userId;
    }
         .... 

    @ManyToOne(targetEntity=UserRole.class)
    @JoinColumn (name="userRole")
    public UserRole getUserRole() {
        return userRole;
    }

    public void setUserRole(UserRole userRole) {
        this.userRole = userRole;
    }

} 
```

我收到此错误 Initial SessionFactory creation failed.org.hibernate.AnnotationException: @OneToOne or @ManyToOne on User.userRole references an unknown entity: UserRole

你可以看到我在用户角色类中添加了@Entity 注释

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:45:22.607

您可能只是忘记在您的休眠配置文件中声明该类：

```
<mapping class="com.foo.bar.UserRole"/> 
```

另外，请注意，这`targetEntity=UserRole.class`是不必要的，因为您的 getter 返回 a `UserRole`。Hibernate 会从 getter 的返回类型推导出目标实体。

# java - 使用 javax.tools.JavaCompiler 等

> ID：10879960
> 
> 赞同：1
> 
> 时间：2012-06-04T10:40:40.313
> 
> 标签：java, compiler-construction, javac, java-compiler-api

我正在寻找[Oracle 的 Java 编译器 API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)使用的工作示例。我想构建一些接近`javac`自定义/扩展错误日志记录功能的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:53:15.917

请参阅[STBC](http://pscode.org/stbc/)（SSCCE 基于文本的编译器）。源代码可在[`stbc.zip`](http://pscode.org/stbc/stbc.zip).

![编译失败](../Images/3f6c4114e4cfaf5641a8e509daeaddeb.png) ![编译好](../Images/5cccd87243a65e46f131ca06d93ac4ab.png)

# vb.net - 在 VB.NET 的 SplitContainer Panel2 中关闭打开的表单

> ID：10879961
> 
> 赞同：0
> 
> 时间：2012-06-04T10:40:40.537
> 
> 标签：vb.net

在 VB.NET 中需要一些帮助，不知道我在哪里做错了

**背景：**我有一个使用 SplitContainer 控件的主窗体。拆分的PANEL1携带MenuStrip，Panel2用于调用相关的外部表单![在此处输入图像描述](../Images/bc111ddc41abf801c6cb7065d94bfe65.png)

**代码（见下文）：**函数`ResetSplitContainerPanel2`清除 Panel2 并使用`SetFormAttributesToLoadInPanel2`

**问题：**虽然`SettingSplitContainer.Panel2.Controls.Clear()`清除了 Panel2 但表单仍保持可编辑模式。如果我再次调用相同的表单，我可以看到我之前输入的值

**预期输出：**在加载新表单时，PANEL2 中先前加载的表单应完全处理

```
Private Sub ResetSplitContainerPanel2()
    SettingSplitContainer.Panel2.Controls.Clear()
End Sub

Private Function SetFormAttributesToLoadInPanel2(ByVal formNameToChange As Form) As Boolean
        On Error GoTo errHandler

        formNameToChange.IsMdiContainer = False
        formNameToChange.ShowInTaskbar = False
        formNameToChange.FormBorderStyle = Windows.Forms.FormBorderStyle.None
        formNameToChange.ControlBox = False
        formNameToChange.TopLevel = False
        formNameToChange.Text = ""
        formNameToChange.Visible = True
        formNameToChange.Width = SettingSplitContainer.Panel2.Width
        formNameToChange.Height = SettingSplitContainer.Panel2.Height

        SetFormAttributesToLoadInPanel2 = False
        Exit Function

errHandler:
        MsgBox("Error Description: " & Err.Description, vbOKOnly, "Error")
        SetFormAttributesToLoadInPanel2 = True
        Exit Function
    End Function 
```

感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:05:21.087

我将尝试使用 dispose 方法而不是 Clear：

```
Dim f As Form = TryCast(SettingSplitContainer.Panel2.Controls(0), Form)
if f IsNot Nothing then
   f.Dispose()
Endif 
```

不确定您的表单是否已作为 Panel2.Controls 集合中的第一个控件添加到 SplitContainer。然而，这将只是检查。

可以在[此答案中找到此更改的根本原因](https://stackoverflow.com/questions/4194862/lifetime-of-objects-in-a-collection-in-vb-net/4195285#4195285)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:07:37.507

您还可以删除 Panel2 并将该区域留空以查看 Form1 并使 Form1 为 MdiContainer = True。

然后对于您要在其中打开的每个表单，请使用

```
form2.mdiparent = form1 
```

之后，您只需要使用一个简单的 form2.show()。

# c# - 优化 WCF NetTcp 打开时间

> ID：10879969
> 
> 赞同：0
> 
> 时间：2012-06-04T10:41:42.373
> 
> 标签：c#, wcf, nettcpbinding

我正在为 IPC 使用 WCF。

我有非常严格的性能需求，所以整个操作只需要几毫秒。（我会说被 3-4 毫秒阻塞......）但是，WCF 打开大约需要 10 毫秒。我查看了一些性能测试，发现我可以得到更好的结果，尽管我无法做到。我可以保存一个打开的连接，但我真的很想避免它。

我已经尝试在发行版中进行编译，并删除了安全性等（仅将其降低了一点点……）

这是我的配置（由代码定义）：

```
NetTcpBinding tcpBinding = new NetTcpBinding(SecurityMode.Message, false)
        {
            SendTimeout = TimeSpan.FromSeconds(1),
            ReceiveTimeout = TimeSpan.FromSeconds(1),
            OpenTimeout = TimeSpan.FromMilliseconds(500),// FromMinutes(1),
            TransactionFlow = false,
            TransferMode = TransferMode.Buffered,
            TransactionProtocol = TransactionProtocol.OleTransactions,
            HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,
            ListenBacklog = ushort.MaxValue,
            MaxBufferPoolSize = 20 * 1024 * 1024,
            MaxBufferSize = 20 * 1024 * 1024,
            MaxConnections = ushort.MaxValue,
            MaxReceivedMessageSize = 20 * 1024 * 1024,
        };

        // Windows authentication
        tcpBinding.Security.Transport.ClientCredentialType = TcpClientCredentialType.Windows;
        tcpBinding.Security.Transport.ProtectionLevel = System.Net.Security.ProtectionLevel.EncryptAndSign;

        return tcpBinding; 
```

任何人都可以建议改进此配置吗？谢谢。

# wcf - WCF 环境中的自定义请求队列

> ID：10879971
> 
> 赞同：1
> 
> 时间：2012-06-04T10:41:56.153
> 
> 标签：wcf, caching, synchronization, msmq

我有以下问题：

我需要同步对 WCF 服务操作访问的缓存对象的访问。调用客户端提供映射到将使用哪个缓存对象操作的参数。

简而言之，请求应该按参数排队，然后以同步的方式执行。

实现这一点的最佳方法是什么？我不想将队列暴露给客户端，并且如果在具有共享缓存的不同机器上运行多个服务实例，我希望解决方案可以轻松扩展。

# javascript - 让 Css3Pie 进行注入

> ID：10879977
> 
> 赞同：0
> 
> 时间：2012-06-04T10:42:17.817
> 
> 标签：javascript, code-injection, css3pie

我最近陷入了一个奇怪的境地。我必须通过 .net WebBrowser 运行网页。我正在运行的站点有圆角，但因为我是通过 IE 浏览器运行它，所以它不显示它们。我已经直接在页面中注入了一些东西***（一旦完成加载） - 请记住***. 我首先决定注入 CurvyCorners.js 以使其正确显示圆角边缘。然而，令我沮丧的是，CurvyCorners 很*糟糕*，而且有严重的故障。但是，为了让它首先工作，我必须进入源代码并强制它运行，因为它正在等待文件加载，它*有*，就在注入脚本之前。

我在网上读到 Css3Pie 工作得更好，所以我决定尝试让它工作。我已经全部注入（Css3Pie.js 文件注入良好，HTC 使用行为 css 值加载）。如果没有收到加载的事件，我似乎无法说服 HTC 文件运行。我尝试对 CurvyCorners 做同样的事情，但即使我将`init()`函数调用放在源代码的末尾，也没有任何运行。

有人知道我做错了什么吗？我似乎在 Css3Pie.js 主文件中找不到任何`onloaded`事件，我只在 .htc 文件中找到对它的引用。`ready`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:56:17.137

您要么使用 js 文件，要么使用 htc 文件。如果您使用的是 .htc 文件，请确保使用正确的 MIME 类型 ( `text/x-component`) 发送它。

htc 应该在没有任何 JS 的情况下运行来触发它。

# iphone - 如何在 iPhone 中不使用 UIPIckerviewcontroller 创建下拉列表？

> ID：10879979
> 
> 赞同：6
> 
> 时间：2012-06-04T10:42:27.600
> 
> 标签：iphone, ios, ios5

当我单击下拉按钮并使列表包含一些内容时，我想像 listview 一样下拉列表。然后我选择的任何内容都将是标签的文本，任何人都可以帮助我。谢谢很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:45:27.600

您可以使用pop-over 来显示列表。在pop-over 中您可以创建tableview 来显示项目列表，当用户选择任何选项时，didSelectRowAtIndexPath 将被调用，通过此方法您可以发送选择的值并显示在标签中。

mainviewcontroller 中的代码，您要在其中显示下拉菜单。

```
if (m_OptionController !=nil)
        {
            [m_OptionController release]; m_OptionController = nil;

        }
        m_OptionController=[[OptionViewController alloc]init];
        [m_OptionController setTarget:self andSelector:@selector(displaySelectedOption:)];

        if(m_pPopOverController)
        {   
            [m_pPopOverController dismissPopoverAnimated:YES];
            [m_pPopOverController release];
            m_pPopOverController=nil;
        }

        m_pPopOverController=[[UIPopoverController alloc]initWithContentViewController:m_OptionController];

        [m_pPopOverController setPopoverContentSize:CGSizeMake(thePopOverFrame.size.width, thePopOverFrame.size.height) animated:NO];
        [m_pPopOverController presentPopoverFromRect:CGRectMake(theButton.frame.origin.x,0,40,40) inView:self
                            permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

OptionViewController 是一个 UIViewController，它将包含 UITableView.Populate UITableView 与数据（选项列表）。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   if ([m_Target respondsToSelector:m_Selector]) {
                        [m_Target performSelector:m_Selector withObject:nil];
                    }
} 
```

不要忘记通过调用此方法设置目标，因此当用户选择任何选项时，mainviewcontroller 中的相应方法会在您想要选择的值的位置调用。

```
- (void)setTarget:(id)inTarget andSelector:(SEL)inSelector
{
    m_Target = inTarget;
    m_Selector = inSelector;
} 
```

# java - 打印小字母的ASCII码

> ID：10879980
> 
> 赞同：0
> 
> 时间：2012-06-04T10:42:28.197
> 
> 标签：java, ascii

如何打印大写字母和小写字母的 ascii 代码。? 例如，`q`从键盘按下时，`evt.getKeyCode()`给我 81，这是大写 Q 的 ASCII 码。如何打印小字母的 ascii 码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:46:11.293

与 ASCII A = 65 和 a = 97 一样，我们看到大写和小写之间存在 97-65 = 32 的偏移量。

如果你得到 Q = 81，你可以加 32 得到 113 = q。

```
char c = (char)(evt.getKeyCode() + 32); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:54:30.533

`KeyEvent.getKeyCode()`唯一用于基本字母和数字的返回 ASCII 码。`A`对于ASCII 码 65 和`a`ASCII 码 65+32​​，您会得到 65 。有了`!evt.isShiftDown()`你就可以说它是一个`a`.

键码是Java发明的，所以叫虚拟键。常数 VK_A 被随意选择为 A/a 的 ASCII 码。

# jquery - 如何在 ajax/jquery 界面中保持页面位置

> ID：10879985
> 
> 赞同：0
> 
> 时间：2012-06-04T10:43:02.737
> 
> 标签：jquery, onbeforeunload, onunload

我目前正在构建一个简单的 ajax 接口，用于在网络上进行预订和跟踪。

我遇到的问题是，如果用户点击后退按钮或刷新按钮，任何未保存的数据都会被删除，并且页面会返回到其正常的起始位置。

我已经实现了基本的 javascript onUnload 函数，如下所示：

```
function winClose()
{
    if (confirm("Are you sure you want to navigate away from this page?"))
    {
         window.close();
    }

    return false;
} 
```

加上：

```
<body onUnload="return winClose(); return false;"> 
```

这给出了没有人真正喜欢的相当笨拙的警报框，但它仍然将页面重置为其原始起始位置。

有谁知道一种方法来实现类似的东西，如果用户选择不离开页面，它不会重置页面并且只是忽略所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:47:53.333

随着您的进行，您可能希望在用户浏览器上存储您的位置（作为整数或作为 JSON 数组）和 cookie（或 cookie）中涉及的数据。你不能总是依赖`onbeforeunload`于此。

一个好的 jQuery cookie 插件是这样的：`https://github.com/carhartl/jquery-cookie`

# ios - 游戏中心沙盒：“无法创建游戏”问题

> ID：10879988
> 
> 赞同：4
> 
> 时间：2012-06-04T10:43:22.277
> 
> 标签：ios, cocos2d-iphone, game-center, gamekit

我目前正在使用 Game Center 开发一个基于回合的游戏来处理在线功能（用于匹配和回合处理）。

我正在使用两个沙盒帐户——一个在我的 3gs 上，一个在 ios Simulator 上。我一直在使用 GKTurnBasedMatchMakerViewController 测试我的应用程序来进行匹配一段时间，没有任何问题，但我现在遇到了一个问题：

每次我想邀请另一个玩家（与一个或另一个玩家一起）时，GKTurnBasedMatchMakerViewController 都会显示一个 UIAlertView 说明：

> 无法创建游戏 - 请删除现有游戏并重试。

问题是，我已经删除了每个玩家的所有比赛（他们的列表中没有任何比赛（甚至没有封闭的比赛）。所以目前没有任何用户参加任何比赛。

在我的 GKTurnBaseMatchMakerViewControllerDelegate中，没有调用*turnBasedMatchmakerViewController:didFailWithError:。*当我单击 UIAlertView 上的 OK 按钮时，委托中调用的唯一调用函数是*turnBasedMatchmakerViewControllerWasCancelled：*

我唯一能想到的是我的游戏实际上并没有从 GameCenter 中删除，但是当我使用 GKMatchMakerViewController UI 删除它们时，我几乎不这么认为。

* * *

从回合制比赛中退出时，我实现了*turnBasedMatchmakerViewController:playerQuitForMatch:*如下所示：

```
- (void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)viewController playerQuitForMatch:(GKTurnBasedMatch *)match
{
  if ( [self isLocalPlayerCurrentPlayerForMatch:match] ) {

    NSData* endData = match.matchData;

    for (GKTurnBasedParticipant* participant in match.participants) {
      participant.matchOutcome = GKTurnBasedMatchOutcomeWon;
    }
    match.currentParticipant.matchOutcome = GKTurnBasedMatchOutcomeLost;

    [match endMatchInTurnWithMatchData:endData 
                     completionHandler:^(NSError *error) {
                       if (error) {
                         NSLog(@"%@",error.description);
                       }
                     }];
  }  

} 
```

*（注意：我在游戏中只有两个玩家）*

其中 isLocalPlayerCurrentPlayerForMatch 是：

```
- (BOOL) isLocalPlayerCurrentPlayerForMatch:(GKTurnBasedMatch*)match
{
  return [[[GKLocalPlayer localPlayer] playerID] isEqualToString:match.currentParticipant.playerID];
} 
```

有没有人遇到并找到解决此问题的方法？我在这里做错了什么，还是很明显我看不到？

非常感谢您提供任何有助于我找到该问题根源的评论。

## 更新

感谢@kaan-dedeoglu，我设法知道两个用户都有一个空的匹配列​​表（与显示的状态一致）。

我还创建了第三个沙盒帐户。将前两个帐户命名为 A 和 B，将 C 命名为第三个帐户。

状态 1：

> 1.  A 和 B 未链接到任何匹配项。
> 2.  A 和 B 在创建任何游戏时都出现“无法创建游戏”错误（A 邀请 B，A||B 邀请其他玩家，A||B 创建新的自动匹配）。

状态 2：

> 1.  C（工作账号）可以邀请B，正常和B组队。
> 2.  C（工作）可以邀请B同时参加另一个聚会
> 3.  C（工作）邀请 A 玩。
> 4.  A 不能玩（不能访问当前比赛列表，GKTurnBasedMatchMakerViewController 直接去创建一个新游戏）。
> 5.  C 不工作了。
> 6.  A、B 和 C 现在卡在“无法创建游戏”错误中。

作为补充，这里是我如何初始化我的 GKTurnBasedMatchMakerViewController，但我不认为这是错误的。

```
- (void) displayMatchMakerVC
{

  if (! [[GKLocalPlayer localPlayer] isAuthenticated] ) return;

  GKMatchRequest* request = [[[GKMatchRequest alloc] init] autorelease];
  int nbPlayers = 2;
  request.minPlayers = nbPlayers;
  request.maxPlayers = nbPlayers;

  GKTurnBasedMatchmakerViewController*  matchMakerVC = [[[GKTurnBasedMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
  matchMakerVC.turnBasedMatchmakerDelegate = self;
  matchMakerVC.showExistingMatches = YES;

  [[CCDirector sharedDirector] presentModalViewController:matchMakerVC animated:YES];
} 
```

注意：我没有使用 ARC，这可能与内存问题有关吗？我并不是真正的内存管理大师，但我的理解*似乎是*正确的。

知道这如何与我的代码而不是游戏中心相关吗？非常感谢您提供任何可以帮助我走得更远的答案。

## 更新 2：turnbasedMatchmakerViewController:didFindMatchMethod:

这是我的 turnbasedMatchmakerViewController:didFindMatchMethod: 方法。

```
- (void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)viewController didFindMatch:(GKTurnBasedMatch *)match
{
  BLTheme* theme = [[[BLGameConfig sharedConfig] localPlayer] userTheme];
  GameSceneRemoteGCLoader* loader = [[GameSceneRemoteGCLoader alloc] initWithGKMatch:match andTheme:theme];
  [viewController dismissViewControllerAnimated:NO completion:^{}];
  [[CCDirector sharedDirector] replaceScene:loader];

} 
```

当我启动自动匹配时，它会启动完全相同的错误“无法创建游戏 - 请删除现有游戏并重试。”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:28:00.003

只是为了确保：在这两个设备中，将这些行添加到您的身份验证完成处理程序中并运行一次。（然后您可以将其注释掉）。

```
[GKTurnBasedMatch loadMatchesWithCompletionHandler:(^)(NSArray *matches, NSError *error) {

   for (GKTurnbasedMatch *match in matches) {

       [match removeWithCompletionHandler:NULL];

    }
}]; 
```

这将确保从您的 playerID 中删除所有游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T15:45:00.483

这可能是也可能不是您的问题的解决方案，但是我遇到了类似的问题并通过以下方式解决了它。

似乎默认情况下或不知何故，Game Center 将具有不同`CFBundleVersion`（内部版本号，不是版本号或`CFBundleShortVersionString`）值的应用程序视为彼此不兼容，因此不会显示具有递增内部版本号的应用程序之间的匹配。（通常，随着新的临时构建或稳定版本在开发过程中分发，开发人员会增加这个数字，所以这是非常不幸的）。

为了查找和删除“丢失”的游戏，我降低了我的`CFBundleVersion`价值（显示了游戏），然后删除了有问题的匹配项。

或者，调整 iTunes Connect 中的一些设置似乎已经消除了这种`CFBundleVersion`不兼容性。传播需要一段时间，但我认为它是在点击我的应用程序，点击查看详细信息，确保游戏中心开关设置为“启用”，并确保“多人游戏兼容性”中有一个项目桌子。您也可以在原始应用程序屏幕上的“管理游戏中心”按钮中玩各种可能性，但我认为“多人游戏兼容性”设置最终让我能够看到以前隐藏的所有“旧”比赛。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T02:13:20.010

太荒谬了。您不必删除现有匹配来创建新匹配。我正在开发这样的游戏，它确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-19T03:18:22.367

以下对我有用。首先，我在设备上为每个玩家运行应用程序，调用 quitAllMatches。然后我在每台设备上再次运行该应用程序，调用 removeAllMatches。

从长远来看，最好在进行过程中清理它们。但这解决了眼前的问题。

```
-(void) quitAllMatches {
    [GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray* matches, NSError* error)  {
        for (GKTurnBasedMatch* match in matches) {
            GKTurnBasedParticipant* participant = match.currentParticipant;
            NSString* playerID = participant.playerID;
            NSString* localPlayerID = [GKLocalPlayer localPlayer].playerID;
            if ([playerID isEqualToString: localPlayerID]) {
                NSArray* participants = match.participants;
                for (GKTurnBasedParticipant* participant in participants) {
                    participant.matchOutcome = GKTurnBasedMatchOutcomeTied;
                }
                NSData* data = [NSData data];
                [match endMatchInTurnWithMatchData: data completionHandler:^(NSError* error) {
                    if (error) {
                        WJLog(@"did not end -- error %@", [error localizedDescription]);
                    }
                    else {
                        WJLog(@"match ended!");
                    }
                }];
            }
        }
    }];
}

-(void) removeAllMatches {
    [GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray* matches, NSError* error)  {
        for (GKTurnBasedMatch* match in matches) {
            [match removeWithCompletionHandler:^(NSError* error) {
                if (error) {
                    WJLog(@"error: %@", [error localizedDescription]);
                }
                else {
                    WJLog(@"removed match");
                }
            }];
        }
    }];
} 
```

# jboss7.x - 在 JBoss 7 中使用 DatabaseServerLoginModule

> ID：10879989
> 
> 赞同：1
> 
> 时间：2012-06-04T10:43:24.130
> 
> 标签：jboss7.x

在验证我的应用程序的远程客户端时，如何配置 JBoss 7.1.1 服务器以使用 DatabaseServerLoginModule？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:14:12.943

创建一个包含 3 列的表：

```
rolename, username and password. (or with name you need) 
```

在您的服务器 xml 中声明您的数据源，然后放置：

```
 <security-domain name="mydomain">
                <authentication>
                    <login-module code="Database" flag="required">
                        <module-option name="dsJndiName" value="java:jboss/datasources/MyDS"/>
                        <module-option name="principalsQuery" value="select password from tab_credential where username=?"/>
                        <module-option name="rolesQuery" value="select rolename, 'Roles' from tab_credential where username=?"/>
                        <module-option name="unauthenticatedIdentity" value="guest"/>
                    </login-module>
                </authentication>
            </security-domain> 
```

# javascript - 在 IE 中为浮动和内联块元素触发 focusin 事件

> ID：10879990
> 
> 赞同：1
> 
> 时间：2012-06-04T10:43:28.460
> 
> 标签：javascript, internet-explorer, javascript-events

作为表单输入和链接标签一部分的**focusin**事件正在应用于**div**和**span**标签。它发生在浮动和内联块元素上。该问题在 IE（8 和 9）中被发现。

演示 ==> [http://jsfiddle.net/Agczq/](http://jsfiddle.net/Agczq/)

有没有办法阻止这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:55:07.973

不像你可能期望`focusin`的`focusout`那样冒泡，不像常规的那样`focus`事件。处理此问题的两种主要方法是：事件委托，或简单地阻止事件冒泡。

你的小提琴很难理解（即：不知道你在做什么）。想到的第一件事（在将您的 JS 代码移动到 jsfiddle 上的 JavaScript 字段之后）是您`focus`在良好的浏览器中捕获事件，并且`focusin`在糟糕的 IE 中冒泡。
这可能很烦人，特别是因为 IE 不支持实际事件捕获。不过，这是一个（简单但经过测试且有效）的建议：

```
function mycb(evt)
{
    evt = evt || window.event;//get event object
    var from = evt.target || evt.srcElement;//get source
    if (evt.stopPropagation)//stop event from bubbling
    {
        evt.stopPropagation();//shouldn't be necessary, but you never know
    }
    else
    {
        evt.cancelBubble = true;//stop propagation in IE-lingo
    }
    if (from.tagName === 'DIV' || from.tagName === 'SPAN')
    {//if source was a tag that souldn't fire event, return false;
        if (evt.preventDefault)
        {
            evt.preventDefault();
            return false;
        }
        evt.returnValue = false;
        return false;
    }
     alert("fired!!!");
}

var elem = document.getElementById("mybox");
if( elem.attachEvent )
{
    elem.attachEvent("onfocusin",  mycb);
}
else
{
    elem.addEventListener("focus", mycb, true);
} 
```

这段代码在 IE8 中测试过，fiddle 可以在[这里](http://jsfiddle.net/xdjf5/)找到。
碰巧我今天读到了这个事件，[在这里](http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html)。我认为，值得一提的来源。

希望这可以帮助

# ruby-on-rails - 依赖属性的动态索引（轮胎、导轨） - ElasticSearch

> ID：10879991
> 
> 赞同：0
> 
> 时间：2012-06-04T10:43:33.107
> 
> 标签：ruby-on-rails, elasticsearch, indexing, tire, proc

我有一些红宝石课

```
class MyClass
   include Tire::Model::Persistence
   attr_accessor :date

   mapping do
      index_name Proc.new{|o| "my_class_#{o.date_index}" }  # How to?
   end

   def initialize(d)
     @date = d
   end

   def date_index
      @date.strftime("%m%y")
   end
end 
```

初始化类后，如何动态设置 index_name？

红宝石 (1.9.3) 轨道 (3.2.3) 轮胎 (0.4.2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:44:14.960

对于许多边缘情况，这仍然是一个未解决的问题。在 elasticsearch 中查看索引的方法有很多种。

首先，完全可以像这样定义一个动态索引名称：

```
Article.index_name { "articles-#{Time.now.year}" } 
```

见[https://github.com/karmi/tire/blob/master/lib/tire/model/naming.rb#L10-35](https://github.com/karmi/tire/blob/master/lib/tire/model/naming.rb#L10-35)

其次，一种更灵活、更强大且面向未来的方法是在 elasticsearch 中使用[*别名*功能](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/indices-aliases.html#filtered)。

有关可能的灵感，请参阅[https://github.com/karmi/tire/blob/master/test/integration/index_aliases_test.rb#L66 。](https://github.com/karmi/tire/blob/master/test/integration/index_aliases_test.rb#L66)

然后，您创建`mydocs_current`索引别名（“虚拟索引”）之类的东西，并将其指向特定的物理索引，比如说`mydocs_2012_06`. 然后，您在 cron 作业等中轮换此索引。

搜索时，您可以使用`Tire.search`DSL 或将不同的索引/别名注入模型类。

# python - 如何使用 nltk.containers.Trie？

> ID：10879994
> 
> 赞同：2
> 
> 时间：2012-06-04T10:43:48.153
> 
> 标签：python, data-structures, nltk, trie

我想使用 nltk.containers.Trie 执行简单的操作，例如将单词插入 trie，检索具有给定前缀的所有单词，查找具有大多数后代（即最常见的前缀）的节点，以图形方式查看 trie 等等。我找不到任何有关使用此结构的文档。这是我到目前为止的所有内容：

```
from nltk.containers import Trie
t = Trie() 
```

我现在有一个需要添加到 trie 中的单词列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T12:43:40.603

这很神秘，不是吗。它基本上是一个字典，但您还可以检查字符串是否是已知键的*前缀：*

```
>>> t = Trie()
>>> t['they'] = 15
>>> 'the' in t
True
>>> print t['the']
None 
```

还有`find_prefix`，它将尽可能多地匹配它的参数，并返回它在那里找到的值（如果有的话）加上参数的其余部分：

```
>>> t.find_prefix("theirs")
(None, 'irs')                 # Prefix "the" has no value 
```

你可以看看源代码`nltk/containers.py`。神奇之处在于处理表单表达式的方法`__setitem__`和。`__getitem__``t[key]`

也很高兴知道：该`keys()`方法只会返回真正的条目，而不是前缀。您可以将它与该方法一起使用`subtrie`来检索以给定前缀开头的所有单词：

```
>>> t.subtrie('th').keys()
['ey'] 
```

PS。请注意，`containers.py`大约六个月前已从 NLTK 中删除！在您更新您的 nltk 发行版（您应该这样做）之前，请`nltk/containers.py`以不同的名称保存。更好的是，只需保存`Trie`课程。（文件的其余部分已过时）。

# c++ - extern 模板是 c++11 扩展是什么意思？

> ID：10879996
> 
> 赞同：0
> 
> 时间：2012-06-04T10:43:51.190
> 
> 标签：c++, xcode, c++11, warnings, clang

使用 XCode 4.2 编译 crypto++ 时，我收到多个警告，“extern templates are a c++11 extension”的所有实例。这是什么意思，这会影响输出可执行文件的兼容性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:38:05.423

声明一个模板“extern”意味着编译器不应该*在**这个*翻译单元中实例化一个给定的模板，因为它已经在另一个翻译单元中被实例化了。这样做是为了减少编译时间。

此功能已添加到 C++11，因此实际上并未指示在 C++11 模式下运行但意识到该问题的编译器可能会生成类似于您所看到的警告。

参考。[维基百科](https://en.wikipedia.org/wiki/C++11#Extern_template)。

# primefaces - 带有 Primefaces 编辑器的 Primefaces 数据导出器

> ID：10879997
> 
> 赞同：0
> 
> 时间：2012-06-04T10:44:03.773
> 
> 标签：primefaces

是否可以使用 primefaces 的数据导出器将编辑器数据导出为 pdf。

我尝试使用以下代码，但没有奏效。

```
 <p:editor value="#{mailBean.mail}" id="editor">

    </p:editor>

    <p:commandLink>
    <p:graphicImage value="/images/pdf.gif" /> 
<p:dataExporter type="pdf" target="editor" fileName="files" pageOnly="true"/> 
    </p:commandLink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T11:49:15.067

如果目标必须指向 PrimeFaces 数据表，那么下面的代码如何可能来自 primeface 站点。（[http://www.primefaces.org/showcase/ui/chartExport.jsf](http://www.primefaces.org/showcase/ui/chartExport.jsf)）

```
 <p:lineChart value="#{chartBean.linearModel}" legendPosition="e" zoom="true"  
                         title="Linear Chart" minY="0" maxY="10" style="width:500px;height:300px" widgetVar="chart"/>  

<p:commandButton type="button" value="Export" icon="ui-icon-extlink" onclick="exportChart()"/>  

<p:dialog widgetVar="dlg" showEffect="fade" modal="true" header="Chart as an Image">  
    <p:outputPanel id="output" layout="block" style="width:500px;height:300px"/>  
</p:dialog>  

function exportChart() {  
    //export image  
    $('#output').empty().append(PF('chart').exportAsImage());  

    //show the dialog  
    PF('dlg').show();  
} 
```

这里源文件是一个图表，使用函数 exportChart() 将导出的数据作为图像。这意味着我们可以导出任何数据，而不仅仅是 primeface 数据表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:14:32.493

数据导出器发布者按钮不得 ajax，目标值应参考数据表，还需要**itext 2.1.7 可选 DataExporter (PDF)** * *apache poi 3.7 可选 DataExporter* * 库 (Excel)..

即使它们没问题，数据导出器还不稳定，这取决于您的数据表。例如，当您将动态列与列组一起使用时，它无法导出数据。

我更喜欢使用**itext**库导出您自己的文档，它也更灵活。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:51:18.200

不，这不对

来自用户指南：

> DataExporter 可以方便地将使用 Primefaces 数据表列出的数据导出为各种格式，例如 excel、pdf、csv 和 xml。

更多来自用户指南

> 目标必须指向 PrimeFaces 数据表

**编辑**

您可以尝试的是：在您的项目中集成[TinyMCE](http://www.tinymce.com)编辑器并查看此线程[HTML 到 PDF 演示](http://www.tinymce.com/forum/viewtopic.php?id=25663)，这是一个直接链接[WYSIWYG 编辑器导出到 PDF](http://demo.itextsupport.com/xmlworker/)

# android - 不参考指令 strneh、lsreq、streqb

> ID：10879999
> 
> 赞同：2
> 
> 时间：2012-06-04T10:44:11.893
> 
> 标签：android, assembly, arm, android-source

我正在查看路径 libc/arch-arm/bionic 的 android 平台中的 strcpy.S 文件，在这个文件中有许多我无法理解的 arm 指令，我也指的是 ARM 系统开发人员指南。在这里，除了“tst”和“tstne”之外，我无法在任何书籍或 ARM 参考手册中为其他人找到任何参考。

```
tst r2, #0xff00
iteet   ne
strneh  r2, [ip], #2
lsreq   r2, r2, #8
    r2, [ip]
tstne   r2, #0xff 
```

不仅这些说明在不同的文件中还有许多其他说明。

有谁知道这些说明是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:34:23.610

第一条指令是来自 thumb 指令集的 it 指令。

```
iteet   ne 
```

该指令将接下来的三个指令标记为有条件可执行。指令的最后三个字符构成一个由 e (else) 或 t (then) 组成的模式。操作数 'ne' 指定要评估的条件。

其他三个指令是带有条件的普通 ARM 指令：

```
strneh  r2, [ip], #2  ; store halfword if not equal
lsreq   r2, r2, #8    ; logical shift right if equal
tstne   r2, #0xff     ; test if not equal 
```

这是受 it 指令影响的三个指令。它们也带有 ne/eq 条件标志。

如您所见，it 指令的条件与其他三个指令的条件相互冲突。这是代码中的一个错误。很可能以前没有发现它，因为代码片段来自 ARM-big-endian 代码，而且我知道没有在 big endian 中使用 ARM 的 android 手机。

顺便说一句，了解为什么在 it 指令和指令本身中给出条件是值得的。这是统一臂组件标准的一部分。在 ARM 上，您有两种操作模式：Thumb 模式（使用 It 指令，功能较弱）和 ARM 模式（功能更强大，在指令本身中使用条件标志）。

如果您将自己限制在 thumb 模式的功能上，则可以编写在 thumb 和 ARM 模式下编译的代码。这是在这里完成的。

如果为 Thumb 模式汇编，It 指令将用于控制下三个指令的条件，指令中的条件将被忽略。如果汇编为 ARM 指令集，It 指令将被忽略，指令本身的条件将变为活动状态。

只要 it 指令和 arm 指令中的条件匹配，这种方法就可以很好地工作。正如我之前所说，这里不是这种情况，所以它要么不能在拇指模式、手臂模式或两者中工作:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:37:15.250

*strneh*是一个带有一些条件执行/大小说明符后缀的存储命令。ARM 文档是一个很好的起点： http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/ [Chdehgih.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/Chdehgih.html)

如果您在 Google 上搜索“arm 条件执行”，您会发现许多可能也有帮助的博客/文章：http: [//blogs.arm.com/software-enablement/258-condition-codes-2-conditional-execution/](http://blogs.arm.com/software-enablement/258-condition-codes-2-conditional-execution/)

至于你的 *strneh" 指令：

*   str = 商店
*   ne = 如果不相等则执行（Z 标志清除）
*   h = 执行半字操作