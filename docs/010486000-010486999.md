# StackOverflow 问答 10486000-10486999

# c - 分段错误：C 代码中的 11

> ID：10486001
> 
> 赞同：9
> 
> 时间：2012-05-07T16:59:23.863
> 
> 标签：c, segmentation-fault

为什么这段代码会出现分段错误？

```
 /* solver.h header file */
 10 struct options{
 11     unsigned int one:1, two:1, three:1, four:1, five:1, six:1, seven:1, eight:1, nine:1;
 12 };
 13 
 14 
 15 /* structure to describe a cell */
 16 struct cell{
 17     short value;
 18     struct options open_options;
 19 }; 
```

求解器.c：

```
 5 #include <stdio.h>
  6 #include "solver.h"
  7 
  8 
  9 
 10 
 11 
 12 int main(){
 13         struct cell board [9][9];
 14         int i=0,j=0;
 15 
 16 
 17         for(i = 1; i<10; i++)
 18                 for(j = 1; j<10; j++)
 19                         (board[i][j]).value = j;
 20 
 21         for(i = 1; i<10; i++){
 22                 for(j = 1; j<10; j++)
 23                         printf(" %d",(board[i][j]).value);
 24                 printf("\n");
 25         }
 26         return 0;
 27 } 
```

输出：

> 1 2 3 4 5 6 7 8 9
> 1 2 3 4 5 6 7 8 9
> 1 2 3 4 5 6 7 8 9
> 1 2 3 4 5 6 7 8 9
> 1 2 3 4 5 6 7 8 9
> 1 2 3 4 5 6 7 8 9
> 1 2 3 4 5 6 7 8 9
> 1 2 3 4 5 6 7 8 9
> 1 2 3 4 5 6 7 8 9
> 
> 分段错误：11

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T17:02:18.740

数组从 0 开始索引，所以循环应该是`for(i = 0; i<9; i++)`而不是`for(i = 1; i<10; i++)`

在您的情况下，您可能会覆盖堆栈的一部分，但通常，超出边界会导致未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T17:02:43.113

`some_type array[9];`定义`array`为由 9 个元素组成的数组，下标从 0 到 8（含）。你不能使用`array[9]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T17:03:12.130

`board[9][9]`将包含索引在 0...8 范围内的元素，而不是 1...9。当您分配给 时`board[9][whatever]`，您实际上覆盖了不属于您的内存，这恰好导致程序在`return 0`将控制权交还给 C 运行时时爆炸，并且它开始遍历其结构以执行关闭。

# java - 如何在音频处理中模拟 Vinyl Scratch 效果？

> ID：10486002
> 
> 赞同：5
> 
> 时间：2012-05-07T16:59:25.370
> 
> 标签：java, android, signal-processing, audio-processing

我正在尝试制作一个简单的“虚拟刮刀”，但我不知道它背后的理论。由于我在谷歌上没有发现任何有用的东西，所以我在这里问它：

*   当我划伤（向前移动曲目）时会发生什么？我是否提高了样本的音高和/或速率？
*   如何使用音频处理算法模拟这种现象？

示例代码/教程将不胜感激:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T08:38:29.540

> 当我划伤（向前移动曲目）时会发生什么？我是否提高了样本的音高和/或速率？

想想实际发生了什么：一条记录​​包含音频数据。记录针从记录中读取音频数据。随着唱片旋转，播放位置发生变化。（这与在数字音频编辑器中观看播放头在音频文件中移动非常相似。）

当您在物理上更快地旋转记录时，您正在提高播放速率。音频更快，音高更高。将播放速率提高 2，音频将播放高八度。

当您以较慢的速度物理旋转记录时，您正在降低播放速率。音频既慢又低。将播放速率降低 2，音频将播放低八度。

记录只能通过加快或减慢物理记录来修改音频播放，这会同时影响音高和播放速率。一些音频软件可以独立改变音高和速率。电唱机不行。

（找个唱机，试听听它的声音。）

> 如何使用音频处理算法模拟这种现象？

要模拟 DJ 刮唱片，您需要能够在用户“刮”时调整音频的播放速率。

当用户加快录制速度时，加快播放速度。当用户放慢记录时，放慢播放速度。

当用户停止录制时，完全停止播放。

当用户反向旋转记录时，反向播放。

您无需更改音频的音高。更改播放速率将自动执行此操作。对音高的任何进一步调整听起来都是不正确的。

我对图书馆没有任何建议，但如果你花时间的话，这样的事情实施起来并不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:43:53.297

当你刮擦时，你只是在针下来回移动唱片。所以这相当于在音频文件的同一部分反复向前和向后循环。我猜想速度介于正弦波和三角波之间。您需要对样本进行线性插值。

对于移动应用程序，我首先将屏幕的一个轴映射到音频文件中的时间范围。保留一个包含最后一个`MotionEvent`. 当下一个`MotionEvent`到达时，根据`(X,Y)`坐标计算映射的开始和结束位置。然后，计算两者之间经过的时间`MotionEvents`。这为您提供了足够的信息，可以以正确的位置和速度从文件中播放，并随着每个运动事件不断更新。

您可能需要对数据进行某种平滑处理，但这是一个起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:59:37.387

A variable rate resampler might be appropriate. This will speed up the play rate and increase the pitch by the same ratio.

You would track ratio between the angular velocity of the "scratch" movement and the normal rate of platter rotation, and use that as the local resampling ratio.

There are a lot better (higher audio quality) DSP methods of doing rate resampling than linear interpolation, such as using a variable width Sinc interpolation kernel.

# javascript - 如何使用 jquery 获取完整的 HTML 代码 onClick

> ID：10486005
> 
> 赞同：2
> 
> 时间：2012-05-07T16:59:44.607
> 
> 标签：javascript, jquery, html, innerhtml, outerhtml

我有以下 HTML 代码

```
<a href="http://www.google.com">Google</a> 
```

当我点击链接时，我希望我的字符串包含下面的完整 HTML 代码

```
<a href="http://www.google.com">Google</a> 
```

我尝试使用这种方法，但我只能获取文本“Google”，无法获取锚代码。

```
$('#frame').contents().find('body').on("click", "a",  function () {
    var string = $(this).html();
    alert(string);
}); 
```

`Google`仅在需要时才发出字符串警报`<a href="http://www.google.com">Google</a>`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T17:04:05.690

使用[`this.outerHTML`](https://developer.mozilla.org/en/DOM/element.outerHTML)，或将元素包装在容器中，然后`.html()`在该容器上使用。

```
$('#frame').contents().find('body').on("click", "a",  function () {
    var string = this.outerHTML;
    alert(string);
}); 
```

我更喜欢`outerHTML`，但 Firefox 直到最近才添加了对它的支持。因此，考虑到这些浏览器，可能首选第二种方法。

# database - Servelt 数据库连接：JDBC、ODBC、连接池和

> ID：10486009
> 
> 赞同：0
> 
> 时间：2012-05-07T16:59:59.183
> 
> 标签：database, servlets, connection

对于一个考试问题，我正在研究 servlet 可以连接到数据库连接的各种方式。到目前为止我有

1.  JDBC
2.  ODBC
3.  数据库池

但问题要求 4，我似乎找不到第 4 种选择。它真的存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:02:28.997

我怀疑您可能想查看 Java Persistence API。去谷歌 JPA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:03:25.347

我会添加 JNDI 查找并直接使用`DriverManager`. 什么是*数据库池*？你的意思是*连接*池？

另一方面，如果他们询问高级技术：[jdbc](/questions/tagged/jdbc "显示标记为“jdbc”的问题") -> [mybatis](/questions/tagged/mybatis "显示标记为“mybatis”的问题") -> [hibernate](/questions/tagged/hibernate "显示标记为“休眠”的问题") -> [jpa](/questions/tagged/jpa "显示标记为“jpa”的问题")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:09:53.913

servlet 不能真正使用 ODBC，它可能能够通过 ODBC 驱动程序使用 JDBC，但 servlet 只能看到 ODBC。

类似地，连接池只是对 JDBC 连接进行池化。连接只是通过 JDBC 建立的。

由于预期的答案是 4，他们可能会要求[4 种类型的 JDBC 驱动程序](http://en.wikipedia.org/wiki/Java_Database_Connectivity#Types)

# javascript - jQuery更改 以编程方式文本

> ID：10486010
> 
> 赞同：57
> 
> 时间：2012-05-07T17:00:03.427
> 
> 标签：javascript, jquery, html, jquery-mobile

编辑：解决方案是将其添加到个人资料页面而不是性别页面。

```
$('#profile').live( 'pageinit',function(event){
$('p#pTest').text(localStorage.getItem('gender')); 
```

});

我在列表视图中有一段带有 som 文本的段落，我想在单击保存后以编程方式从另一个页面更改。

编辑：这是我在 profile.html 中的列表视图。当您单击该项目时，您会进入另一个页面，您可以在其中保存您的性别。我想将此列表视图中的段落更改为从其他页面更改的性别。

```
<ul data-role="listview"   >
    <li><a href="gender.html">
        <img src="images/gender2.jpg" />
        <h3>Gender</h3>
        <p id="pTest">Male</p>
    </a></li> </ul> 
```

性别 html 页面只是带有两个单选按钮和一个保存按钮的基本内容。这是我的 javascript 代码（在单独的文件中）：

```
$('#gender').live('pageinit', function(event) {

    var gender = localStorage.getItem('gender');
    var boolMale = true;
    if (gender == "female") boolMale = false;
    $('#radio-choice-male').attr("checked",boolMale).checkboxradio("refresh");
    $('#radio-choice-female').attr("checked",!boolMale).checkboxradio("refresh");

    $('#saveGenderButton').click(function() {
        if ($('#radio-choice-male').is(':checked'))
            localStorage.setItem('gender', "male");
        else localStorage.setItem('gender', "female");

        $('#pTest').html('test'); //does not work
         //$('p#pTest').text('test'); //does not work
         //$('#pTest').text('test'); //does not work
        $.mobile.changePage("profile.html");
    });
}); 
```

我用javascript试过这个：`$('p#pTest').text('test');`

然而文本没有改变。（我知道保存按钮有效）。这可能吗？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-05-07T17:02:42.460

试试下面，注意当用户刷新页面时，值又是“男性”，数据应该存储在数据库中。

```
$('button').click(function(){
     $('#pTest').text('test')
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js"></script>

<p id="pTest">Male</p>
<button>change</button>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:20:44.693

“保存”与使用 jquery 更改段落内容完全不同。

如果您需要保存更改，则必须以某种方式将它们写入您的服务器（可能是表单提交以及所需的所有安全性和输入清理）。如果您有保存在服务器上的信息，那么您将不再更改段落的内容，而是绘制具有动态内容的段落（来自数据库或服务器在您执行“保存”时更改的文件） .

从你的问题来看，这是一个你必须做更多研究的话题。

输入页面（input.html）：

```
<form action="/saveMyParagraph.php">
    <input name="pContent" type="text"></input>
</form> 
```

保存页面（saveMyParagraph.php）和输出页面（output.php）：

[使用 PHP 将数据插入 MySQL 数据库](http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php#.T6gDG-htbjs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:26:03.120

似乎您将单击事件包裹在自定义事件名称“pageinit”周围，您确定在单击按钮之前触发了该事件吗？

像这样的东西：

```
$("#gender").trigger("pageinit"); 
```

# sql - SQL Server 2008：批量插入需要永远

> ID：10486013
> 
> 赞同：0
> 
> 时间：2012-05-07T17:00:18.077
> 
> 标签：sql, sql-server, sql-server-2008

我有一个包含近 1200 条记录的 txt 文件（制表符分隔）。我正在执行批量插入操作以将数据从 .txt 文件中获取到表中——该表（结构）已经在数据库中创建。我不知道为什么批量插入需要永远。关于在哪里/什么/如何检查导致此操作永久执行的任何建议？谢谢。我以前也这样做过，它曾经工作得很好。有什么理由吗？

```
BULK INSERT DataFromatltemp
 FROM '\\abcd\Admin\temp\Copyatltemp07.txt'
 WITH
 (
  FIELDTERMINATOR = '\t',
  ROWTERMINATOR = '\n'
 )
GO 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T17:19:32.740

由于几乎所有与 RDBMS 和性能相关的东西，它都取决于一系列变量，但您可以先查看一些提示：

1.  数据库：确保您的数据库使用简单恢复模式；
2.  目标表：清除所有约束（包括检查、外键）；
3.  目标表：删除所有索引；
4.  目标表：保证没有被任何其他进程锁定；
5.  源文件：保证没有被任何其他进程锁定；

我希望这些提示会有所帮助。

# android - 短信应用的奇怪行为

> ID：10486017
> 
> 赞同：0
> 
> 时间：2012-05-07T17:00:46.720
> 
> 标签：android, sms

我正在开发一个发送和接收 SMS 消息的应用程序。基本思想是有一个活动来处理用户已发送消息的联系人列表，以及一个活动来查看与特定联系人的对话。所以第一个活动是一个联系人列表，当用户选择一个时，另一个活动开始，显示与所选用户的对话线程。

**如果对话不太长**，我所做的工作：在这种情况下，对话线程已成功显示。另一方面，如果对话包含大量消息，应用程序会加载一段时间，然后返回联系人列表，**将所选联系人的电话号码添加到联系人列表中**，或者只是**返回联系人列表联系方式**。

我不明白为什么会这样，我希望你能帮助我。这是代码：

## 联系人列表

```
import java.util.ArrayList;
import android.app.ListActivity;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract.PhoneLookup;
import android.database.Cursor;
import android.widget.ArrayAdapter;

public class myActivity extends ListActivity implements onClickListener {

ArrayList<ArrayList<String>> nameAndNumbers = new ArrayList<ArrayList<String>>();
ArrayList<String> listItems=new ArrayList<String>();
ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle icicle) {

super.onCreate(icicle);
setContentView(R.layout.main);

/* here I find the phone numbers of the contacts from the SMS content
provider and then I find their contact name as saved in the address book */

Uri messagesUri = Uri.parse("content://sms/");
Cursor cursor = getContentResolver().query(messagesUri,new String[] { "_id", "thread_id", "address", "person", "date", "body", "type" }, null, null, null);
startManagingCursor(cursor);
String[] columns = new String[] { "address", "person", "date", "body", "type" };
ArrayList<String> names = new ArrayList<String>();
if (cursor.getCount() > 0) {
    int counter = 0;
   while (cursor.moveToNext()){
       String address = cursor.getString(cursor.getColumnIndex(columns[0]));
       String contact=address;
       Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(address));  
       Cursor cs= getContentResolver().query(uri, new String[]{PhoneLookup.DISPLAY_NAME},PhoneLookup.NUMBER+"='"+address+"'",null,null);
       startManagingCursor(cs);
       if(cs!=null) {
           if(cs.getCount()>0)
           {
            cs.moveToFirst();
            contact=cs.getString(cs.getColumnIndex(PhoneLookup.DISPLAY_NAME));
           }

           if (!names.contains(contact)) {
               /* this part is needed to make it so that the app
does not create two separate threads if the phone number comes with or without
international prefix code
                */
               names.add(contact);
               if (contact.startsWith("+1")) {
                   names.add(contact.substring(2));
               } else {
                   names.add("+1" + contact);
               }
               nameAndNumbers.add(new ArrayList<String>());
               nameAndNumbers.get(counter).add(contact);
               nameAndNumbers.get(counter).add(address);
               listItems.add(contact);
               counter = counter + 1;
           }
       }
   }
}
adapter=new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_1,
    listItems);
setListAdapter(adapter);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
 // TODO Auto-generated method stub
    String number = nameAndNumbers.get(position).get(1);
    Intent i = new Intent(this, myThread.class);
    i.putExtra("key", number);
    startActivity(i);
}
} 
```

## 对话线程

```
import java.util.ArrayList;
import android.app.ListActivity;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract.PhoneLookup;
import android.widget.ArrayAdapter;
import android.widget.EditText;

public class myThread extends ListActivity {

EditText txtMessage;
String phoneNum;
ArrayList<String> listItems=new ArrayList<String>();
ArrayAdapter<String> adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.thread);

    txtMessage = (EditText) findViewById(R.id.txtMessage);

    ArrayList<String> list = new ArrayList<String>();

    String number = getIntent().getStringExtra("key");
    phoneNum = number;
    list.add(number);
    if (number.startsWith("+1")) {
        list.add(number.substring(2));
    } else {
        list.add("+1" + number);
    }
    String[] smsNo = new String[list.size()];
    list.toArray(smsNo);

    Uri messagesUri = Uri.parse("content://sms/");
    Cursor cursor = getContentResolver().query(messagesUri, null,"address=? or address=?", smsNo, null);
    startManagingCursor(cursor);
    String[] columns = new String[] { "thread_id", "address", "person", "date", "body", "type" };
    String sms = "";
    if (cursor.getCount() > 0) {
       while (cursor.moveToNext()){
           String address = cursor.getString(cursor.getColumnIndex(columns[1]));
           String contact=address;
           Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(address));  
           Cursor cs= getContentResolver().query(uri, new String[]{PhoneLookup.DISPLAY_NAME},PhoneLookup.NUMBER+"='"+address+"'",null,null);
           startManagingCursor(cs);
           if(cs!=null) {
               if(cs.getCount()>0)
               {
                cs.moveToFirst();
                contact=cs.getString(cs.getColumnIndex(PhoneLookup.DISPLAY_NAME));
               }
           }
           sms += contact + " ";
           String name = cursor.getString(cursor.getColumnIndex(columns[2]));
           sms += name + " ";
           String date = cursor.getString(cursor.getColumnIndex(columns[3]));
           sms += date + " ";
           String msg = cursor.getString(cursor.getColumnIndex(columns[4]));
           sms += msg + " ";
           String type = cursor.getString(cursor.getColumnIndex(columns[5]));
           sms += type;
           listItems.add(sms);
           sms = "";
       }
    }
    adapter=new ArrayAdapter<String>(this,
            R.layout.sms_list_item,
            listItems);
        setListAdapter(adapter);
}
} 
```

## 日志猫

我只粘贴错误消息。

```
05-08 10:25:52.955: E/Mms(268): [1] Tried to add duplicate Conversation to Cache
.
.
.
05-08 10:27:32.865: W/dalvikvm(175): Last 10 entries in JNI global reference table:
05-08 10:27:32.865: W/dalvikvm(175):  1991: 0x40719248 cls=Landroid/database/CursorToBulkCursorAdaptor; (44 bytes)
05-08 10:27:32.865: W/dalvikvm(175):  1992: 0x40719248 cls=Landroid/database/CursorToBulkCursorAdaptor; (44 bytes)
05-08 10:27:32.865: W/dalvikvm(175):  1993: 0x406f8b38 cls=Ljava/lang/ref/WeakReference; (28 bytes)
05-08 10:27:32.865: W/dalvikvm(175):  1994: 0x406f4d98 cls=Ljava/lang/ref/WeakReference; (28 bytes)
05-08 10:27:32.865: W/dalvikvm(175):  1995: 0x406bfd08 cls=Landroid/database/ContentObserver$Transport; (36 bytes)
05-08 10:27:32.865: W/dalvikvm(175):  1996: 0x406bc5a8 cls=Landroid/database/CursorToBulkCursorAdaptor; (44 bytes)
05-08 10:27:32.865: W/dalvikvm(175):  1997: 0x406bc5a8 cls=Landroid/database/CursorToBulkCursorAdaptor; (44 bytes)
05-08 10:27:32.865: W/dalvikvm(175):  1998: 0x406809b8 cls=Ljava/lang/ref/WeakReference; (28 bytes)
05-08 10:27:32.865: W/dalvikvm(175):  1999: 0x406809f8 cls=Ljava/lang/ref/WeakReference; (36 bytes)
05-08 10:27:32.865: W/dalvikvm(175):  2000: 0x40612b68 cls=Landroid/database/ContentObserver$Transport; (28 bytes)
05-08 10:27:32.885: W/dalvikvm(175): JNI global reference table summary (2001 entries):
05-08 10:27:32.885: W/dalvikvm(175):    36 of Ljava/lang/Class; 164B (29 unique)
05-08 10:27:32.885: W/dalvikvm(175):    44 of Ljava/lang/Class; 188B (15 unique)
05-08 10:27:32.885: W/dalvikvm(175):     6 of Ljava/lang/Class; 212B (6 unique)
05-08 10:27:32.885: W/dalvikvm(175):    10 of Ljava/lang/Class; 236B (5 unique)
05-08 10:27:32.885: W/dalvikvm(175):     1 of Ljava/lang/Class; 260B
05-08 10:27:32.895: W/dalvikvm(175):     4 of Ljava/lang/Class; 284B (2 unique)
05-08 10:27:32.895: W/dalvikvm(175):     6 of Ljava/lang/Class; 308B (5 unique)
05-08 10:27:32.895: W/dalvikvm(175):     3 of Ljava/lang/Class; 332B (2 unique)
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 356B
05-08 10:27:32.895: W/dalvikvm(175):     2 of Ljava/lang/Class; 380B (1 unique)
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 428B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 452B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 476B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 500B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 572B
05-08 10:27:32.895: W/dalvikvm(175):     2 of Ljava/lang/Class; 596B (2 unique)
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 692B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 1004B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 1172B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 1316B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/Class; 3452B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Ljava/lang/String; 28B
05-08 10:27:32.895: W/dalvikvm(175):     2 of Ldalvik/system/VMRuntime; 12B (1 unique)
05-08 10:27:32.895: W/dalvikvm(175):   724 of Ljava/lang/ref/WeakReference; 28B (724 unique)
05-08 10:27:32.895: W/dalvikvm(175):    28 of Ljava/lang/ref/WeakReference; 36B (28 unique)
05-08 10:27:32.895: W/dalvikvm(175):     1 of Landroid/app/ActivityThread$ProviderClientRecord; 28B
05-08 10:27:32.895: W/dalvikvm(175):     1 of Landroid/app/ActivityThread$ApplicationThread; 28B
05-08 10:27:32.905: W/dalvikvm(175):     5 of Landroid/content/ContentProvider$Transport; 28B (5 unique)
05-08 10:27:32.905: W/dalvikvm(175):     3 of Landroid/app/LoadedApk$ReceiverDispatcher$InnerReceiver; 28B (3 unique)
05-08 10:27:32.905: W/dalvikvm(175):     2 of Landroid/app/LoadedApk$ReceiverDispatcher$InnerReceiver; 36B (2 unique)
05-08 10:27:32.905: W/dalvikvm(175):   345 of Landroid/database/ContentObserver$Transport; 28B (345 unique)
05-08 10:27:32.905: W/dalvikvm(175):    23 of Landroid/database/ContentObserver$Transport; 36B (23 unique)
05-08 10:27:32.905: W/dalvikvm(175):     2 of Landroid/view/inputmethod/InputMethodManager$ControlledInputConnectionWrapper; 36B (2 unique)
05-08 10:27:32.905: W/dalvikvm(175):     2 of Landroid/view/ViewRoot$InputMethodCallback; 28B (2 unique)
05-08 10:27:32.905: W/dalvikvm(175):     1 of Landroid/view/ViewRoot$W; 28B
05-08 10:27:32.905: W/dalvikvm(175):     1 of Landroid/view/inputmethod/InputMethodManager$1; 28B
05-08 10:27:32.905: W/dalvikvm(175):     1 of Landroid/view/accessibility/AccessibilityManager$1; 28B
05-08 10:27:32.905: W/dalvikvm(175):   703 of Landroid/database/CursorToBulkCursorAdaptor; 44B (355 unique)
05-08 10:27:32.905: W/dalvikvm(175):    31 of Landroid/database/CursorToBulkCursorAdaptor; 52B (16 unique)
05-08 10:27:32.905: W/dalvikvm(175): Memory held directly by tracked refs is 73876 bytes
05-08 10:27:32.905: E/dalvikvm(175): Excessive JNI global references (2001)
05-08 10:27:32.905: E/dalvikvm(175): VM aborting
.
.
.
05-08 10:40:52.426: E/InputDispatcher(61): channel '407dd458 myApp/myApp.myActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
05-08 10:40:52.426: E/InputDispatcher(61): channel '407dd458 myApp/myApp.myActivityy (server)' ~ Channel is unrecoverably broken and will be disposed!
.
.
.
05-08 10:30:27.586: E/ContactsProvider(1309): Cannot determine the default account for contacts compatibility
05-08 10:30:27.586: E/ContactsProvider(1309): android.accounts.AuthenticatorException: bind failure
05-08 10:30:27.586: E/ContactsProvider(1309):   at android.accounts.AccountManager.convertErrorToException(AccountManager.java:1437)
05-08 10:30:27.586: E/ContactsProvider(1309):   at android.accounts.AccountManager.access$400(AccountManager.java:138)
05-08 10:30:27.586: E/ContactsProvider(1309):   at android.accounts.AccountManager$BaseFutureTask$Response.onError(AccountManager.java:1342)
05-08 10:30:27.586: E/ContactsProvider(1309):   at android.accounts.IAccountManagerResponse$Stub.onTransact(IAccountManagerResponse.java:69)
05-08 10:30:27.586: E/ContactsProvider(1309):   at android.os.Binder.execTransact(Binder.java:320)
05-08 10:30:27.586: E/ContactsProvider(1309):   at dalvik.system.NativeStart.run(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:13:47.520

如果您没有 JNI 代码（我猜没有），那么您遇到了 Android 限制，或者（1）您做错了，或者（2 - 更有可能）您需要实施一种解决方法，例如一次加载几条消息。

# symfony - symfony2：尝试在模板中呈现表单

> ID：10486020
> 
> 赞同：0
> 
> 时间：2012-05-07T17:00:58.077
> 
> 标签：symfony

我正在尝试呈现我刚刚从实体生成的表单，但我收到以下错误...

```
<?php

namespace Prueba\FrontendBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Prueba\FrontendBundle\Form\ItemType;

class DefaultController extends Controller
{
/**
* @Route("/hello")
* @Template()          
*/                      
public function indexAction($name)       
{                              
     $form = new ItemType();var_dump(get_class($form));                                 
                return $this->render('AcmeTaskBundle:Default:new.html.twig', array(             
                                        'form' => $form->createView(),
                                                 ));
    }                            
} 
```

> string(35) "Prueba\FrontendBundle\Form\ItemType" 致命错误：调用 /home/javier/programacion/sf2000/src/Prueba/FrontendBundle/Controller/ 中未定义的方法 Prueba\FrontendBundle\Form\ItemType::createView()第 20 行的 DefaultController.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:15:50.830

改变

```
$form = new ItemType(); 
```

至

```
$form = $this->createForm(new FormType()); 
```

如果您想将一个空实体附加到表单（更容易验证和表单处理）：

```
$item = new Item();
$form = $this->createForm(new FormType(), $item); 
```

# jquery - JQuery 和 ERP 等业务应用程序 - Kendo UI

> ID：10486022
> 
> 赞同：0
> 
> 时间：2012-05-07T17:01:09.143
> 
> 标签：jquery, silverlight, kendo-ui, erp

我正在寻找一些解决方案来制作一些模块化且易于更改设计布局的业务应用程序 (ERP)。

过去几个月我正在学习（在另一个商业小型项目中）使用 MVVM 模式的所有好处的 Silverlight。我非常喜欢它，验证，双向绑定等，所有这些都非常好。当 Silverlight 必须与其他技术（如 java 或 php）而不是 RIA 和 WCF 服务创建的 RESTfull 服务合作时，就会出现问题。我的意思是 silverlight 中的控件非常适合 RIA 服务。您一开始所做的一切都必须以其他方式完成，“RIA”功能开始打扰您。

另一个问题是 Silverlight 的未来是不确定的。新的大型 erp 应用程序必须存在很长时间，另外一些应用程序的小模块必须在某些移动设备上工作。我现在所有这些都可以在 HTML5 和 javascript 中完成，而无需为所有类型的设备制作大量小型原生应用程序。

我上周看到框架 Kendo UI -> [KENDOUI](http://www.kendoui.com/)

我想知道这是否不是问题的解决方案？具有美观的业务控制和 MVVM 的框架。我开始尝试做一些测试，看起来不错，但有一些小缺点，比如没有实现容易更改组件的语言，在 DataService 中与基于 WCF 的 Web 服务的通信过于僵化，但我可以接受。我唯一害怕在新项目中使用剑道的是产品的新颖性。似乎还需要做很多工作才能在严肃的项目中使用它。但也许我错了，所以我创建了那个线程。

是否有其他解决方案可以满足我的需求？另一个jquery小部件框架？Infragistic jquery 控件似乎很有趣，但我没有检查它们。

# css - 3 Div 在一个具有动态宽度居中 Div 的容器中

> ID：10486023
> 
> 赞同：0
> 
> 时间：2012-05-07T17:01:10.510
> 
> 标签：css, dynamic

```
<style type=text/css">

 #container {
height:30px;
width:100%;
}

.left.button {
float:left;
width:60px;
}

.right.button {
float:right;
width:60px;
}

.middle.indicators {
height:30px;
}

.middle div{
display: inline-block;
margin: 10px 2px;
}

.circle {
background: rgb(102,102,102);
border: 1px solid #FFF;
border-radius: 50% 50% 50% 50%;
height: 7px;
width: 7px;
}

</style> 
```

我在一个容器中有 3 个 div。我想将左按钮 div 向左推，右按钮 div 向右推，并将中间指示器 div 放在中间。问题是中间 div 需要是动态宽度，因为里面的圆形 div 的数量会根据其他变量动态变化。可能有 3 个圆圈或 5 个或 10 个圆圈。我需要中间 div 保持居中，并且还能够根据里面的圆圈 div 的数量进行扩展。

```
<div id="container">
   <div class="left button"></div>
      <div class="middle indicators">
         <div class="circle></div>
         <div class="circle></div>
         <div class="circle></div>
      </div>
   <div class="right button"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:17:58.903

我会稍微更改 CSS 以获得类似**[jsFiddle 示例](http://jsfiddle.net/j08691/55QHP/)**的内容（添加了 div 边框以使它们更容易可视化）。通过给中间的指示符 div 设置一个比左右按钮 div 的宽度略大的左右边距，您可以让它在两者之间浮动并尽可能多地占用空间。

CSS：

```
div {
    border: 1px solid #999;
}

#container {
    height: 30px;
    width: 100%;
}

.left.button {
    float: left;
    width: 60px;
}

.right.button {
    float: right;
    width: 60px;
}

.middle.indicators {
    height: 30px;
    text-align:center;
}

.middle {
    margin: 0 70px;
}

.circle {
    background: #666;
    border: 1px solid #FFF;
    border-radius: 50% 50% 50% 50%;
    height: 7px;
    width: 7px;
    display: inline-block;
} 
```

# spring - windows 和 linux 之间的 applicationContext xmls 自省的区别？

> ID：10486024
> 
> 赞同：0
> 
> 时间：2012-05-07T17:01:17.063
> 
> 标签：spring

我目前正在使用 spring 开发模块化应用程序。目前我们有一个带有 main 方法的核心，它使用以下行查找任何模块的应用程序上下文 xml 文件：

```
ClassPathXmlApplicationContext c = new ClassPathXmlApplicationContext("META-INF/spring/core.xml", "META-INF/spring/*-module.xml"); 
```

烦人的部分是服务器部署。在我们基于 Windows 的开发人员机器上，所有模块都在启动时找到，这意味着我们得到多行，例如：

```
o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from file [...\META-INF\spring\legacy-module.xml] 
```

在 linux (debian lenny) 上，只有核心上下文 xml 的条目。

我的猜测是我做错了什么，那么如何配置我的应用程序上下文以正确查找我的类路径中的所有 *-module.xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:37:32.360

我将模式更改为

```
classpath*:META-INF/**/*-module.xml 
```

现在它可以工作了。请注意：* */* -module.xml 不起作用。Spring 文档指出第一个文件夹是必需的，否则类加载器将找不到资源。

# mysql - 替代散列 SSN 作为 MySQL 中的键

> ID：10486025
> 
> 赞同：1
> 
> 时间：2012-05-07T17:01:18.123
> 
> 标签：mysql, encryption

我有一个类似于以下的问题：

一个人开始担任“A 公司”的顾问。他们的人力资源人员为他们设置了一个帐户。在“person”表和“person-company”表中为该人创建了一条记录。

此人还为“B 公司”工作（A 公司可能知道也可能不知道）。当 B 公司输入他们的信息时，他们不应该在“person”中创建记录，而应该在“person-company”中创建记录。

该人员需要为该州进行培训，因此如果他们在进行培训时登录到任一公司的站点，我们希望总小时数与该人员保持一致。

我可以为将他们加入每个公司的人员表设置一个 PK，但我认为我需要一些类似于人员 SSN 的哈希值以及一些额外的“xyz”以便能够进行查找。B公司将拥有该人的SSN，该SSN应该是通用的。

问题：

1) 有没有其他方法可以加入你们认为效果更好的方法？

2) 如果我确实采用了散列 SSN 方法，那么 MySQL/PHP 用于单向加密的最佳加密是什么？

我在其他地方读到，公钥/私钥解决方案可能是最好的，但由于该人最初没有设置自己的帐户，我不确定这将如何工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:58:31.810

For hashing to be secure, you really need a random salt in order to prevent rainbow attacks. However, a random salt would preclude the ability to use it as a lookup value.

Salting the hash with the person's last name would be better than nothing, and it would still allow you to perform the lookup.

PKI algorithms are generally weaker than a good symmetric algorithm using the same key length, so if you're thinking about using a reversible encryption algorithm, you wouldn't want to use PKI.

A randomly salted one way hashing algorithm would be ideal, and SHA1 and above should be fine, though PBKDF2 would be better.

SHA2 is supported in MySQL 5.5+, and both SHA1 and SHA2 return a hex encoded hash value, so it could be stored in an indexed fixed-length CHAR column.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T20:38:20.043

我认为[这篇文章](http://techatftc.wordpress.com/2012/04/22/does-hashing-make-data-anonymous/)可能与您正在做的事情非常相关。如果您出于安全原因和法律责任确实希望对 SSN 进行“匿名化”，那么仅对它们进行散列是不够的。

只是散列它们将是一个完全确定的过程，因此为了有效地“屏蔽”单个 SSN，该过程需要随机化。否则，您可以简单地通过所有可能的 SSN 组合进行暴力破解（这比尝试暴力破解哈希函数所需的工作要少得多）并寻找匹配的值。

看看为什么会这样，举一个最简单的例子，一个 SSN 可以只取两个值，0 和 1。不管散列函数的质量和强度如何，最终只会有两种可能的结果，很容易看出哪个是哪个。

这是为什么你不应该直接散列例如密码而不首先对其进行一些预处理的老游戏。基础数据只是不包含足够的熵，因此将成为在预先计算的表中查找的简单目标。

您的 SSN 变得私密和机密的那一刻（它们不在每个国家/地区，所以请原谅我在评论中提出的愚蠢问题 :)，同样用于密码存储的最佳实践也应该适用于您的特定情况，即缓慢自适应散列算法，可弥补初始熵的不足，例如 bcrypt、scrypt 和 PBKDF2（Marcus Adams 已经推荐过）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T17:17:22.273

PKI 对于您的用例来说过于复杂，并且可能会增加系统中安全漏洞的数量。使用散列的 SSN 将是快速且相当便携的 - 我会推荐 SHA-2。事实上，它被推荐为[联邦信息处理标准](http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf)的一部分。

# python - 从字符串中删除 html 图像标签和介于两者之间的所有内容

> ID：10486027
> 
> 赞同：9
> 
> 时间：2012-05-07T17:01:22.383
> 
> 标签：python, html, regex, beautifulsoup

我已经看到了许多关于从字符串中删除 HTML 标记的问题，但我仍然不清楚应该如何处理我的具体案例。

我看到许多帖子建议不要使用正则表达式来处理 HTML，但我怀疑我的案例可能需要明智地规避这条规则。

我正在尝试解析 PDF 文件，并且成功地将示例 PDF 文件中的每一页转换为一串 UTF-32 文本。当图像出现时，会插入一个 HTML 样式的标签，其中包含图像的名称和位置（保存在别处）。

在我的应用程序的一个单独部分中，我需要摆脱这些图像标签。因为我们*只*处理图像标签，我怀疑可能需要使用正则表达式。

我的问题是双重的：

1.  我应该使用正则表达式来删除这些标签，还是应该仍然使用 HTML 解析模块，例如 BeautifulSoup？
2.  我应该使用哪个正则表达式或 BeautifulSoup 构造？换句话说，我应该如何编码？

为清楚起见，标签的结构如下`<img src="/path/to/file"/>`

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T17:20:15.773

我会投票认为在你的情况下使用正则表达式是可以接受的。像这样的东西应该工作：

```
def remove_html_tags(data):
    p = re.compile(r'<.*?>')
    return p.sub('', data) 
```

我在这里找到了那个片段（http://love-python.blogspot.com/2008/07/strip-html-tags-using-python.html）

编辑：只会删除以下形式的版本`<img .... />`：

```
def remove_img_tags(data):
    p = re.compile(r'<img.*?/>')
    return p.sub('', data) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T17:53:59.063

由于此文本*仅*包含图像标签，因此使用正则表达式可能没问题。但是对于其他任何事情，您最好使用真正的 HTML 解析器。幸运的是 Python 提供了一个！这是非常简单的——要完全发挥作用，它必须处理更多的极端情况。（最值得注意的是，XHTML 样式的空标签（以斜杠结尾`<... />`）在这里没有得到正确处理。）

```
>>> from HTMLParser import HTMLParser
>>> 
>>> class TagDropper(HTMLParser):
...     def __init__(self, tags_to_drop, *args, **kwargs):
...         HTMLParser.__init__(self, *args, **kwargs)
...     self._text = []
...         self._tags_to_drop = set(tags_to_drop)
...     def clear_text(self):
...         self._text = []
...     def get_text(self):
...         return ''.join(self._text)
...     def handle_starttag(self, tag, attrs):
...         if tag not in self._tags_to_drop:
...             self._text.append(self.get_starttag_text())
...     def handle_endtag(self, tag):
...         self._text.append('</{0}>'.format(tag))
...     def handle_data(self, data):
...         self._text.append(data)
... 
>>> td = TagDropper([])
>>> td.feed('A line of text\nA line of text with an <img url="foo"> tag\nAnother line of text with a <br> tag\n')
>>> print td.get_text()
A line of text
A line of text with an <img url="foo"> tag
Another line of text with a <br> tag 
```

并删除`img`标签...

```
>>> td = TagDropper(['img'])
>>> td.feed('A line of text\nA line of text with an <img url="foo"> tag\nAnother line of text with a <br> tag\n')
>>> print td.get_text()
A line of text
A line of text with an  tag
Another line of text with a <br> tag 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-02T09:55:10.350

我的解决方案是：

```
def remove_HTML_tag(tag, string):
    string = re.sub(r"<\b(" + tag + r")\b[^>]*>", r"", string)
    return re.sub(r"<\/\b(" + tag + r")\b[^>]*>", r"", string) 
```

# windows-phone-7 - Twitter、OAuth、Hammock、TweetSharp 和 Windows Phone 7

> ID：10486030
> 
> 赞同：4
> 
> 时间：2012-05-07T17:01:24.507
> 
> 标签：windows-phone-7, twitter, oauth, tweetsharp, hammock

几天来，我一直在尝试让 OAuth 在我的 Windows Phone 应用程序中与 Twitter 一起使用，但我发现的所有信息都已过时或难以理解。当我找到这篇博客文章[http://samjarawan.blogspot.co.uk/2010/09/building-real-windows-phone-7-twitter_18.html](http://samjarawan.blogspot.co.uk/2010/09/building-real-windows-phone-7-twitter_18.html)时，我最终到达了某个地方，这让我一路获得了访问令牌，此时它失败了。

我的代码与博文中的代码几乎相同，几乎只是更改了消费者密钥和消费者密码。甚至他们的应用程序也不起作用。它很好地显示了 Twitter 登录屏幕，并成功通过了身份验证，但在 RequestAccessToken 函数中，此时它失败了：

```
if (String.IsNullOrEmpty(twitteruser.AccessToken) || String.IsNullOrEmpty(twitteruser.AccessTokenSecret))
{
    Dispatcher.BeginInvoke(() => MessageBox.Show(response.Content));
    return;
} 
```

真正烦人的是消息框只显示 Unicode 替换字符 (�)，没有其他内容。我还检查了 response.StatusCode 并且没问题，所以据我所知没有错误。

如果有人可以帮助我解决这个问题，那就太好了。我看过其他需要用户输入 PIN 的教程，但我也无法让其中任何一个工作。

编辑：我刚刚尝试让 TweetSharp 工作，但它再次无法获得访问令牌。这是我用于 TweetSharp 的代码：

```
public partial class TwitterAuthorisationPage : PhoneApplicationPage
{
    private const string consumerKey = "myKey";
    private const string consumerSecret = "mySecret"; // These are the correct values for my app
    private const string requestTokenUri = "https://api.twitter.com/oauth/request_token";
    private const string oAuthVersion = "1.0a";
    private const string authorizeUri = "https://api.twitter.com/oauth/authorize";
    private const string accessTokenUri = "https://api.twitter.com/oauth/access_token";
    private const string callbackUri = "http://bing.com";

    private TwitterService twitterService = new TwitterService(consumerKey, consumerSecret);
    private OAuthRequestToken _requestToken = null;

    public TwitterAuthorisationPage()
    {
        InitializeComponent();
    }

    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        twitterService.GetRequestToken((requestToken, response) =>
        {
            if (response.StatusCode == HttpStatusCode.OK)
            {
                _requestToken = requestToken;
                Dispatcher.BeginInvoke(() => BrowserControl.Navigate(twitterService.GetAuthorizationUri(requestToken)));
            }
            else
            {
                Dispatcher.BeginInvoke(() => MessageBox.Show("Failed to connect to Twitter. Please try again.\n" + response.StatusDescription));
            }
        });
    }

    private void ConfirmButton_Click(object sender, RoutedEventArgs e)
    {
        twitterService.GetAccessToken(_requestToken, PINEntry.Text, (accessToken, response) =>
        {
            if (response.StatusCode == HttpStatusCode.OK)
            {
                //These lines just print ?
                System.Diagnostics.Debug.WriteLine(accessToken.Token);
                System.Diagnostics.Debug.WriteLine(accessToken.TokenSecret);
                twitterService.AuthenticateWith(accessToken.Token, accessToken.TokenSecret);
                twitterService.VerifyCredentials((user, verifyResponse) =>
                {
                    if (verifyResponse.StatusCode == HttpStatusCode.OK)
                    {
                        Dispatcher.BeginInvoke(() => MessageBox.Show(user.Name));
                    }
                    else
                    {
                        // Fails here
                        Dispatcher.BeginInvoke(() => MessageBox.Show("Failed to connect to Twitter. Please try again.1\n" + verifyResponse.StatusDescription));
                    }
                });
            }
            else
            {
                Dispatcher.BeginInvoke(() => MessageBox.Show("Failed to connect to Twitter. Please try again.0\n" + response.StatusDescription));
            }
        });
    }
} 
```

编辑2：可能与此有关吗？[https://dev.twitter.com/blog/ssl-upgrade-for-twitterapi](https://dev.twitter.com/blog/ssl-upgrade-for-twitterapi)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:27:53.733

我解决了！事实证明 Twitter 正在返回 Gzipped 的访问令牌。使用博客文章中描述的方法，我必须将第二个 RestClient 更改为如下构造：

```
var client = new RestClient
{
    Authority = "https://api.twitter.com/oauth",
    Credentials = credentials,
    HasElevatedPermissions = true,
    SilverlightAcceptEncodingHeader = "gzip",
    DecompressionMethods = DecompressionMethods.GZip
}; 
```

现在它起作用了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:52:07.717

我有同样的问题，但我不明白你的解决方案，你能解释一下你在哪里改变了其余的客户端吗？

- - -编辑 - -

我终于能够让它与 TweetSharp 一起工作。我下载了源代码并将您提到的行添加到它使用的其余客户端配置中，并再次编译了项目。由于我无法将更改推送到该 github，因此我在此处上传了 dll。[TweetSharp 重新编译的 dll](https://skydrive.live.com/redir.aspx?cid=fc6cb202f7305a88&resid=FC6CB202F7305A88!324&parid=FC6CB202F7305A88!198)

这是我使用的代码

```
// Step 1 - Retrieve an OAuth Request Token
        Service.GetRequestToken((requestToken, response) =>
        {
            if (response.StatusCode == HttpStatusCode.OK)
            {
                Request = requestToken;
                Uri uri = Service.GetAuthorizationUri(requestToken);
                Dispatcher.BeginInvoke(() =>
                {
                    Browser.Navigate(uri);
                }
               );
            }
        });

//Step 2, get the pincode

string html = Browser.SaveToString(); //gets the DOM as a string
            Regex expression = new Regex(@"<code>(?<word>\w+)</code>"); 
            Match match = expression.Match(html);
            string pin = match.Groups["word"].Value;
            if (pin != "")
            {                    
                loginTwitter(pin); //we login with the pin extracted
            }

//step 3, get access tokens from twitter
 private void loginTwitter(string pin)
    {
        Service.GetAccessToken(Request, pin, processAccessToken);
    }

    public void processAccessToken(OAuthAccessToken access, TwitterResponse Response){
        if (Response.StatusCode == HttpStatusCode.OK)
        {
            if (access != null)
            {
                Access = access; // Store it for reuse
                Service.AuthenticateWith(access.Token, access.TokenSecret);
            }
        }
    } 
```

# css - 我如何让一个 div 留在原地，而它周围的文字变大或变短

> ID：10486031
> 
> 赞同：1
> 
> 时间：2012-05-07T17:01:37.643
> 
> 标签：css, text

我有一些文本，然后在最后，它有一个间隔 div，它提供了一个边距，因此它将它与下面的文本分开。

问题是; 无论发生什么，我如何让间隔 div 保持原位，而如果文本更短，它上面的文本的长度会变得更短或更长，而不会使间隔 div 与文本保持一致？

任何人都知道如何做到这一点的CSS？

例子：

```
loris ipsum, loris ipsum
loris ipsum, loris ipsum  
loris ipsum, loris ipsum
loris ipsum, loris ipsum
<span class="margin-space"></span>
loris ipsum, loris ipsum
loris ipsum, loris ipsum 
```

目前它在做什么：

例子：

```
loris ipsum, loris ipsum
loris ipsum, loris ipsum  
<span class="margin-space"></span>
loris ipsum, loris ipsum
loris ipsum, loris ipsum
*where text was*
*where text was* 
```

（当我想要它原来的位置时，将它下面的文本拉得更高）

我想要它，例如：

```
loris ipsum, loris ipsum
loris ipsum, loris ipsum

<span class="margin-space"></span>
loris ipsum, loris ipsum
loris ipsum, loris ipsum 
```

希望你明白我的意思，有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:08:20.350

**编辑：** 我想我知道你想要什么，但我不认为你会以你想要的方式实现它。即使上面的文本变短，您也希望将第二个文本块保持在某个高度。您需要将上面的文本块包装在一个元素中并为其设置一个`height`属性，这样如果该块中的文本比高度短，则底部的文本块就不会再高了。

```
<p style="height: 100px">Lorem ipsum dolor sit amet.</p>
<p>Cogito, ergo sum.</p>​ 
```

[http://jsfiddle.net/3PkYT/3/](http://jsfiddle.net/3PkYT/3/)

# c# - 如何使用 Telerik Rad Async Upload 将文件附加到邮件

> ID：10486032
> 
> 赞同：0
> 
> 时间：2012-05-07T17:01:37.670
> 
> 标签：c#, asp.net

请告诉我使用telerik rad upload在邮件中附加文件并发送邮件。我尝试了不同的方案将文件附加到邮件中，但没有附加。

这是场景：我使用目标文件夹将其保存在网络服务器上并从该位置附加文件。

```
if (rdtxtAdditionalEmail.Text != "")
            {
                char[] delimiterChars = { ';' };
                string text = rdtxtAdditionalEmail.Text;
                string[] words = text.Split(delimiterChars);
                foreach (string s in words)
                {
                   newEmail.To = dr["Email"].ToString();
                   newEmail.From = "sy@mydomain.com";
                   newEmail.Subject = rdtxtSubject.Text;
                   newEmail.BodyFormat = MailFormat.Html;
                   newEmail.Body = rdtxtSubject.Text;

                   List<EmailAttachment> attachments = new List<EmailAttachment>();
                   foreach (EmailAttachment attach in attachments)
                   {

                      System.Net.Mail.Attachment attachFile = new Attachment("C:/Inetpub  /wwwroot/DotNetNuke/Data/" + attach.fileName);
                    newEmail.Attachments.Add(attachFile);

                   }
                  for (int i = 0; i < rdauAttachments.UploadedFiles.Count; i++)
                  {
                    UploadedFile file = rdauAttachments.UploadedFiles[i];
                    EmailAttachment attachment = new EmailAttachment();
                    attachment.filePath = "C:/Inetpub/wwwroot/DotNetNuke/Data/" + rdauAttachments.UploadedFiles[i].GetName();
                    attachment.fileName = rdauAttachments.UploadedFiles[i].GetName();
                    newEmail.Attachments.Add(attachment);
                 }
                SmtpMail.Send(newEmail);
              }
            } 
```

我也尝试使用 Telerik 页面中的演示示例来执行此操作，但它没有锻炼。请帮我。

谢谢， 色拉万提

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:54:45.977

```
string filename = string.Empty;
string path = string.Empty;
MailMessage mailMsg = new MailMessage();
if (AsyncUpload1.UploadedFiles.Count > 0)
                {
                    foreach (UploadedFile file in AsyncUpload1.UploadedFiles)
                    {

                        filename = file.FileName;
                        path = System.IO.Path.GetFileName(filename);
                        string Withoutext = System.IO.Path.GetFileNameWithoutExtension(filename);
                        file.SaveAs(Server.MapPath("~/AttachMents/") + path);
                        FileStream fs = new FileStream(Server.MapPath("~/AttachMents/") + filename,
                                   FileMode.Open, FileAccess.Read);
                        System.Net.Mail.Attachment a = new System.Net.Mail.Attachment(fs, filename,
                                   MediaTypeNames.Application.Octet);
                        mailMsg.Attachments.Add(a);

                    }
                } 
```

# c++ - 使用循环链表遍历队列

> ID：10486033
> 
> 赞同：0
> 
> 时间：2012-05-07T17:01:42.360
> 
> 标签：c++, linked-list, queue

我必须使用只有一个迭代器的循环链表来实现一个队列。我的疑问是在性能方面哪个是更好的方法，维护第一项或最后一项的迭代器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:04:44.147

好吧，如果你有一个指向第一项的指针，那么列表末尾的操作将是 O(N)。使用指向列表末尾的指针，您可以在 O(1) 中对开头和结尾进行操作。一般来说，如果你有一个循环链表，那么你希望能够到达开头和结尾，所以答案是使用指向结尾的指针你的性能会更好。

# javascript - 我可以在 Node.js 的 javascript 中使用 catch(e if e instanceof SyntaxError) 吗？

> ID：10486043
> 
> 赞同：13
> 
> 时间：2012-05-07T17:02:20.843
> 
> 标签：javascript, node.js, try-catch, try-catch-finally

[我在MDN](https://developer.mozilla.org/en/JavaScript/Reference/Statements/try...catch)上阅读了有关 try catch(e if e instanceof ...) 块的信息，但是，在 Node.js 中尝试它时，我得到一个 SyntaxError: Unexpected token if。

如果这不起作用，是否有另一种方法来捕获特定异常，而不是可能发生的一切？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-07T18:15:10.333

要引用您链接到的 MDN 文档：

> 注意：此功能不是 ECMAScript 规范的一部分。

和

> JavaScript 1.5、NES 6.0：添加了多个 catch 子句（Netscape 扩展）。

所以：不，这在 Node.js 中是不可能的。当然，您可以使用以下语法作为解决方法：

```
try {
    try_statements
} catch (e) {
    if (e instanceof ...)
        catch_statements_1
    else if (e instanceof ...)
        catch_statements_2
    else
        throw e;
} [finally {
    finally_statements
}] 
```

# nosql - 存储用户信息的密钥

> ID：10486048
> 
> 赞同：-1
> 
> 时间：2012-05-07T17:02:41.927
> 
> 标签：nosql, md5, key-value

我的应用程序有授权模块。我使用 cassandra 作为 nosql 键值数据库。作为用户的密钥，我使用 MD5（用户名+密码）。是好方法吗？有什么优点和缺点？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:00:19.183

这与 Cassandra 无关，但简短的回答是：不要使用那个 md5 方案。蛮力攻击很容易。使用**bcrypt**（请参阅[http://codahale.com/how-to-safely-store-a-password/](http://codahale.com/how-to-safely-store-a-password/)以获得很好的解释）

# java - 从浮点读取字节（Javascript）

> ID：10486051
> 
> 赞同：0
> 
> 时间：2012-05-07T17:02:45.267
> 
> 标签：java, javascript, actionscript-3, apache-flex

我正在尝试从 AS 库中获取音频数据，从文档中该函数如下所示：

```
protected function audioData():String
        {
            var ret:String="";
            buffer.position = 0;                
            while (buffer.bytesAvailable > 0) 
            {
                ret += buffer.readFloat().toString() + ";";
            }
            return ret;
        } 
```

在我的代码和这个库之间是另一个具有此代码的 js：

```
 audioData: function(){
    return this.flashInterface().audioData().split(";");
  }, 
```

从我的代码中，我可以像这样访问：

```
 function getdata(){
    var data = Recorder.audioData();
    console.log("audioData: " + data);
  } 
```

但是，我尝试将返回的值输出到 Firebug，我得到了一个很长的逗号分隔的浮点值列表，我怎样才能取回 byte[] 缓冲区？我所说的缓冲区类似于 Java，因为我将通过[JSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)从 Java 访问缓冲区。

**这是示例日志输出（实际日志很长）：**

> -0.00030517578125,0.00006103515625,0.00115966796875,0.00146484375，-0.00091552734375，-0.000946044921875，-0.001983642578125，-0.003997802734375，-0.005126953125，-0.00360107421875，-0.0032958984375，-0.004119873046875，-0.00433349609375，-0.0023193359375，-0.0008544921875，-0.003448486328125，-0.00347900390625，-0.0054931640625 ,-0.0067138671875,-0.005279541015625,-0.006072998046875,

我无法重新编译创建输出的 AS，现在我可以做的是在 javascript 中连接到 SWF 组件并接受它的浮点并将其转换回字节数组。我在 FDT 5 IDE 中的 AS 项目中存在太多错误，我已经需要对我的应用程序进行模型化了。

我真的很想重新编译 AS 库以满足需要，但是现在我只想按原样使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:46:04.547

如果要查看字节数组中的实际字节数据，可以使用以下命令：

```
protected function audioData():String
{
   var ret:String="";
   buffer.position = 0;                
   while (buffer.bytesAvailable > 0) 
   {
      ret += buffer.readByte().toString();
   }
   return ret;
} 
```

AFAIK as3 中的 ByteArray 类已经是一个字节数组（顾名思义:)）您可以使用 [] 运算符访问它的数据，因为 byteArray[0] 将为您提供第一个字节。

您应该能够通过 post 请求将字节数组发送到服务器上的 url，如下所示：

```
var request:URLRequest = new URLRequest ("http://someurl");
var loader: URLLoader = new URLLoader();
request.contentType = "application/octet-stream";
request.method = URLRequestMethod.POST;
request.data = byteArray;
loader.load(_request); 
```

# r - googlVis MotionChart R的TimeVar日期

> ID：10486052
> 
> 赞同：3
> 
> 时间：2012-05-07T17:02:45.750
> 
> 标签：r, date, google-visualization

这是我的代码：

```
ages <- c("12", "13", "14", "15", "16", "17") #building a dataframe        
subjects <- rep(ages, 9)
date <- c("2008-05-01","2008-06-01", "2008-07-01", "2008-08-01", "2008-09-01", "2008-10-01", "2008-11-01", "2008-12-01", "2009-01-01")
date.class <- as.Date(rep(date, rep(6, length(date))))
val1 <- rnorm(54) 
val2 <- rnorm(54)
val3 <- rnorm(54)
val4 <- rnorm(54)
DF <- data.frame(Subject = subjects, 
                 Date = date.class, 
                 Val1 = val1, 
                 Val2 = val2, 
                 Val3 = val3, 
                 Val4 = val4)

library(googleVis) 
M <- gvisMotionChart(DF, idvar = "Subject", timevar = "Date")
plot(M) 
```

我希望图中的时间变量滑块仅显示`MONTHLY`我的`DF`. 例如，随着时间的推移，我只想看到“2008 年 5 月 1 日”、“2008 年 6 月 1 日”等。googleVis 出于某种原因想要为时间滑块创建更精细的网格，而是显示“ 5/1/2008”、“5/2/2008”、...“5/31/2008”、“6/1/2008”、“6/2/2008”等。我试过弄乱'gvisMotionChart' 函数中的 'date.format' 选项。

帮助（gvisMotionChart）

但我没有运气。有没有人有办法解决吗？

# ios - 当我独立运行我的应用程序时，为什么我的“当前目录”列为根目录（“/”）？

> ID：10486056
> 
> 赞同：1
> 
> 时间：2012-05-07T17:03:00.493
> 
> 标签：ios, path, file-manager

我有一个 NSLog 调用，它显示了我在程序中与 NSFileManager 一起使用的当前目录。

在 XCODE 中运行我的应用程序时，我的“当前目录”显示为：

```
/Users/gsteiner/Desktop/Program Code/Band Manager/build/Debug 
```

这是预期的，因为它是已编译应用程序的位置。但是，如果我然后转到查找器并双击位于上述路径中的已编译应用程序，则当前目录显示：

```
/ 
```

或者，根目录。

我原以为“当前目录”将是包含应用程序的目录，但显然情况并非如此。

谁能告诉我这是为什么？是某种类型的错误，还是应用程序启动时应该采用的方式。如果是这样，找到已编译应用程序所在目录的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:19:21.880

iOS 的安全机制和应用程序沙箱之一是将每个应用程序的工作目录设置为其根目录。这样，任何应用程序都无法访问另一个应用程序的目录/资源（当然也无法访问系统工具）。

查看[此文档](http://www.trailofbits.com/resources/ios4_security_evaluation_paper.pdf)以获取更多有关它的知识。

# javascript - 如何使用Javascript在html中显示前一天和第二天的日期

> ID：10486060
> 
> 赞同：1
> 
> 时间：2012-05-07T17:03:34.440
> 
> 标签：javascript

我正在开发一些简单的 Javascript 来显示当前日期以及上一个和下一个日期链接。

我的代码片段如下

```
<script type="text/javascript">
var currentTime = new Date();

var month = currentTime.getMonth()+1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();
var date = month + " " + day + " " + year;

function ShowSchedule() 
{
document.getElementById("today").innerHTML = date;
}

function ShowDay(isNextDay)
{
if(isNextDay)
{
var nextDay = new Date(year, month, day+1);
date = nextDay.getMonth() + " " + nextDay.getDate() + " " + nextDay.getFullYear();
ShowSchedule();
}
else{
var prevDay = new Date(year, month, day -1);
date= prevDay.getMonth() + " " + prevDay.getDate() + " " + prevDay.getFullYear();
ShowSchedule();
}
}

</script>
</head>
<body>
<table border="1">
    <tr>
        <th>
            <a id = "prev" href="#" onClick="ShowDay(false)">Prev</a>
        </th>
        <th id="today">
        </th>
        <th>
            <a id = "next" href="#" onClick="ShowDay(true)">Next</a>
        </th>
    </tr>
</table>
<script>ShowSchedule();</script>
</body>
</html> 
```

上面的代码也适用于当前、上一个和下一个日期，但问题是如果我点击第二天的链接，它只会增加一天，前一个链接也是如此。我的要求是我可以通过单击上一个和下一个链接导航来到达我想要的任何日期。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:17:05.823

```
new Date((new Date).valueOf() + 86350989) //That will always give you tomorrow (jump ahead 24 hours)

new Date((new Date).valueOf() - 86350989) //Will give you yesterday. 
```

这是正在发生的事情：

```
new Date(number) //You're specifying a DateTime object using the milliseconds from unix epoch (January 1, 1970)

(new Date).valueOf() //You're getting the milliseconds from unix epoch.

86350989 //Is the number of milliseconds in a day. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-24T07:32:47.197

最简单的解决方案是：

```
var d = new Date(); // today
d.setDate(d.getDate() - 1); // yesterday:
d.setDate(d.getDate() + 1); // tomorrow: 
```

# google-drive-api - Google Picker API drivepreopen 有什么作用？

> ID：10486062
> 
> 赞同：2
> 
> 时间：2012-05-07T17:03:44.907
> 
> 标签：google-drive-api, google-docs, google-picker

我注意到一些谷歌驱动器应用程序在选择器对话框中选择文件时向[https://docs.google.com/picker/drivepreopen?hostId=myhost发出 POST 请求。](https://docs.google.com/picker/drivepreopen?hostId=myhost)有人知道它的作用吗？我需要能够从我的谷歌驱动器应用程序访问我的谷歌文档文件，并且我知道驱动器应用程序只能访问它通过谷歌驱动器中的上下文菜单创建或打开的文件。正如名称“drivepreopen”所暗示的那样，也许它允许您以编程方式调用“open with”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:20:30.967

Picker 是您的应用程序应如何获得文件访问权限的方式，它可用于显示当前经过身份验证的用户的 Drive 文件列表，如[https://developers.google.com/drive/integrate-open#open_files_using_the_google_picker](https://developers.google.com/drive/integrate-open#open_files_using_the_google_picker)中所述.

# java - 为什么不推荐使用 Date.getTimezoneOffset？

> ID：10486064
> 
> 赞同：9
> 
> 时间：2012-05-07T17:03:49.720
> 
> 标签：java, date, timezone, utc

[Date.getTimezoneOffset](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getTimezoneOffset%28%29)的文档说：

> 已弃用。从 JDK 版本 1.1 开始，替换为 -(Calendar.get(Calendar.ZONE_OFFSET) + Calendar.get(Calendar.DST_OFFSET)) / (60 * 1000)。

为什么它被弃用了？是否有更短的方法（Apache Commons？）以小时/分钟获得UTC的偏移量？我有一个 Date 对象...我应该为此将它转换为 JodaDate 吗？

在你问我为什么想要 UTC 偏移量之前 - 它只是记录它，仅此而已。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T17:35:42.490

这里有2个问题。

1.  为什么不推荐使用 Date.getTimezoneOffset？

我认为这是因为他们实际上弃用了几乎所有 Date 方法并将其逻辑移至日历。我们应该使用泛型`set`，并`get`带有说明我们需要哪个特定字段的参数。这种方法有一些优点：方法数量较少，并且能够在每次传递不同字段的循环中运行设置器。我个人经常使用这种技术：它使代码更短且更易于维护。

2.  捷径？但是打电话有什么问题

`Calendar.get(Calendar.DST_OFFSET)` 比较 `Calendar.getTimeZoneOffset()`

据我所知，区别是6个字符。

Joda 是一个非常强大的库，如果你真的需要编写很多复杂的日期操作代码，请切换到它。我个人使用该标准`java.util.Calendar`并且看不到任何使用外部库的理由：好的旧日历对我来说已经足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T17:28:55.400

`Date`一旦 Java 实现者意识到对于不同类型的日历可能需要以不同方式实现（因此现在需要使用 a`GregorianCalendar`来检索此信息），所有日期操作逻辑都被移出。A`Date`现在只是一个 UTC 时间值的包装器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T09:30:33.313

在从该页面粘贴代码之前要小心。也许只有我，但我相信为了在几分钟内获得 tz 偏移量，你需要做

```
int tzOffsetMin = (cal.get(Calendar.ZONE_OFFSET) + cal.get(Calendar.DST_OFFSET))/(1000*60); 
```

而不是Javadoc所说的，即：

```
int tzOffsetMin = -(cal.get(Calendar.ZONE_OFFSET) + cal.get(Calendar.DST_OFFSET))/(1000*60); 
```

`Calendar.ZONE_OFFSET`为您提供与 UTC 的标准偏移量（以毫秒为单位）。这不会随着夏令时而改变。例如，对于美国东海岸时区，无论 DST 如何，该字段始终为 -6 小时。

`Calendar.DST_OFFSET`为您提供当前的 DST 偏移量（以毫秒为单位） - 如果有的话。例如，在使用 DST 的国家/地区的夏季，该字段的值可能为 +1 小时（1000*60*60 毫秒）。

# java - 裁剪一条 BufferedImage 的有效方法

> ID：10486069
> 
> 赞同：2
> 
> 时间：2012-05-07T17:04:13.660
> 
> 标签：java, bufferedimage, java-2d

我想通过将图像的顶部移动到底部来删除图像的一条（宽度方向）。目前我正在这样做，但我认为也许有一种更有效的方法可以在不创建新的 BufferedImage 的情况下实现这一目标。

片段代码：

```
BufferedImage myImage = ...;
...
BufferedImage imgPart_1 = myImage.getSubimage(0, 0, myImage.getWidth(), (myImage.getHeight()/2)-50);
BufferedImage imgPart_2 = myImage.getSubimage(0, myImage.getHeight()/2, myImage.getWidth(), myImage.getHeight()/2);
BufferedImage newImage = new BufferedImage(myImage.getWidth(), myImage.getHeight(), BufferedImage.TYPE_INT_ARGB);

Graphics g = newImage.createGraphics();
g.drawImage(imgPart_1, 0, 0, null);
g.drawImage(imgPart_2, 0, imgPart_1.getHeight(), null);

myImage = newImage;
... 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:31:11.220

对我来说看起来很有效：你真的确定这里有性能问题吗？

如果你真的想避免创建一个新的缓冲图像，你可以使用 myImage 作为目标，即：

```
Graphics g = myImage.createGraphics();
g.drawImage(imgPart_1, 0, 0, null);
g.drawImage(imgPart_2, 0, imgPart_1.getHeight(), null); 
```

我认为这在您的情况下可以正常工作，尽管您需要进行测试（当源和目标区域重叠时可能会出现一些奇怪的效果！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:23:55.290

您将必须创建一个新图像，但您不必自己绘制它。

您可以使用[CropImageFilter](http://docs.oracle.com/javase/6/docs/api/java/awt/image/CropImageFilter.html)来获取您的图像。

```
 Toolkit toolkit = Toolkit.getDefaultToolkit();
    CropImageFilter cropFilter = new CropImageFilter
            (x, y, imageWidth, imageHeight);
    Image croppedImage = toolkit.createImage(new FilteredImageSource
            (image.getSource(), cropFilter)); 
```

# javascript - 将图像压缩到窗口中，除非窗口大于图像

> ID：10486074
> 
> 赞同：0
> 
> 时间：2012-05-07T17:04:28.887
> 
> 标签：javascript, jquery, html, css

好的，所以我的网页正文中有一张图片。

如果用户的窗口高度小于 800px（图片的高度），图片应该被压入其中（这样用户可以看到图片的整个高度）。

另一方面，如果窗口高度大于 800 像素，则图像应垂直居中。

有小费吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:14:45.350

使用 jQuery，您可以执行以下操作：

```
var win = $(window);
win.load(function() {
  var image = $("#img");
  if (image.height() > win.height()) {
    image.height(win.height());
  } else {
    // assuming your image is positioned absolute
    // you should measure its dimensions and then position it
    // depends on the ways it should be centered... in the current window or the whole document?
  }
});

win.resize(function() { /* do something */ }); 
```

如果图像更大，则应该将图像大小调整为窗口的高度，当然选择器需要适应您的图像元素......

编辑：添加调整大小回调

# java - 如何在不使用 String.split() 的情况下将字符串拆分为 Java 中的单词？

> ID：10486076
> 
> 赞同：5
> 
> 时间：2012-05-07T17:04:33.753
> 
> 标签：java, string

我的老师特别要求我们将一个句子分成单词而不使用`String.split()`。我已经使用 a `Vector`（我们还没有学过）、- `while`loop 和子字符串来完成它。还有什么其他方法可以做到这一点？（最好不使用`Vectors`/ `ArrayLists`）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T17:13:29.653

我相信您的老师要求您自己处理字符串（不使用任何其他库为您完成）。检查是否是这种情况 - 如果可以使用它们，则有诸如 StringTokenizer、Pattern 和 Scanner 之类的东西来促进字符串处理。

除此以外...

您将需要一个单词分隔符列表（例如空格、制表符、句点等），然后遍历数组，一次构建一个字符串，直到您点击单词分隔符。找到一个完整的单词后（你遇到了一个单词分隔符），将它的变量保存到你的结构中（或任何需要的），重置你正在构建单词的变量并继续。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T17:09:10.333

逐个字符解析字符串，将每个字符复制到一个新字符串中，并在遇到空白字符时停止。然后开始一个新字符串并继续，直到到达原始字符串的末尾。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T17:14:37.377

您可以使用[**java.util.StringTokenizer**](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)使用所需的分隔符拆分文本。默认分隔符是 SPACE/TAB/NEW_LINE。

```
String myTextToBeSplit = "This is the text to be split into words.";  
StringTokenizer tokenizer = new StringTokenizer( myTextToBeSplit );  
while ( tokinizer.hasMoreTokens()) {  
    String word = tokinizer.nextToken();  
    System.out.println( word ); // word you are looking in  
} 
```

作为替代方案，您还可以使用[**java.util.Scanner**](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)

```
Scanner s = new Scanner(myTextToBeSplit).useDelimiter("\\s");  
while( s.hasNext() ) {  
System.out.println(s.next());  
}  
s.close(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T17:08:46.363

您可以使用 java.util.Scanner。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-09T16:36:28.780

```
import java.util.Arrays;
public class ReverseTheWords {

    public static void main(String[] args) {
        String s = "hello java how do you do";
        System.out.println(Arrays.toString(ReverseTheWords.split(s)));
    }

    public static String[] split(String s) {
        int count = 0;
        char[] c = s.toCharArray();

        for (int i = 0; i < c.length; i++) {
            if (c[i] == ' ') {
                count++;
            }
        }
        String temp = "";
        int k = 0;
        String[] rev = new String[count + 1];
        for (int i = 0; i < c.length; i++) {
            if (c[i] == ' ') {
                rev[k++] = temp;
                temp = "";
            } else
                temp = temp + c[i];
        }
        rev[k] = temp;
        return rev;
    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T17:07:07.890

你可以使用 StringTokenizer [http://www.java-samples.com/showtutorial.php?tutorialid=236](http://www.java-samples.com/showtutorial.php?tutorialid=236)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-07T17:09:07.290

或者使用 a `Pattern`（也称为正则表达式）来尝试匹配单词。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-07T17:13:27.523

*   使用带有 ctor 的扫描仪（字符串）
*   正则表达式和匹配
*   字符串标记器
*   逐个字符地迭代自己
*   递归迭代

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-07T21:39:06.607

不使用`Vector`/ `List`（并且不手动重新实现它们为您的函数重新调整大小的能力），您可以利用简单的观察，即长度的字符串`N`不能超过`(N+1)/2`单词（整数除法）。您可以声明一个该大小的字符串数组，以与填充相同的方式填充它`Vector`，然后将结果复制到您找到的单词数大小的数组中。

所以：

```
String[] mySplit( String in ){
    String[] bigArray = new String[ (in.length()+1)/2 ];

    int numWords = 0;
    // Populate bigArray with your while loop and keep
    // track of the number of words

    String[] result = new String[numWords];
    // Copy results from bigArray to result

    return result;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-15T17:56:40.427

```
public class MySplit {

public static String[] mySplit(String text,String delemeter){
    java.util.List<String> parts = new java.util.ArrayList<String>();
    text+=delemeter;        

    for (int i = text.indexOf(delemeter), j=0; i != -1;) {
        parts.add(text.substring(j,i));
        j=i+delemeter.length();
        i = text.indexOf(delemeter,j);
    }

    return parts.toArray(new String[0]);
}

public static void main(String[] args) {
    String str="012ab567ab0123ab";
    String delemeter="ab";
    String result[]=mySplit(str,delemeter);
    for(String s:result)
        System.out.println(s);
}

} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-10-14T07:04:47.083

```
public class sha1 {
public static void main(String[] args) {
    String s = "hello java how do you do";
    System.out.println(Arrays.toString(sha1.split(s)));
}
public static String[] split(String s) {
    int count = 0;
    char[] c = s.toCharArray();

    for (int i = 0; i < c.length; i++) {
        if (c[i] == ' ') {
            count++;
        }
    }
    String temp = "";
    int k = 0;
    String[] rev = new String[count + 1];
    for (int i = c.length-1; i >= 0; i--) {
        if (c[i] == ' ') {
            rev[k++] = temp;
            temp = "";
        } else
            temp = temp + c[i];
    }
    rev[k] = temp;
    return rev;
} 
```

}

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-04T02:11:22.867

简单的触摸。！如果您愿意，请改进。

包 com.asif.test；

公共类 SplitWithoutSplitMethod {

```
public static void main(String[] args) {

    split('@',"asif@is@handsome");
}

static void split(char delimeter, String line){

    String word = "";
    String wordsArr[] = new String[3];

    int k = 0;
    for(int i = 0; i <line.length(); i++){

        if(line.charAt(i) != delimeter){
            word+= line.charAt(i);
        }else{
            wordsArr[k] = word;
            word = "";
            k++;                    
        }
    }
    wordsArr[k] = word;
    for(int j = 0; j <wordsArr.length; j++)
    System.out.println(wordsArr[j]);

} 
```

}

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-07-20T12:09:19.240

请试试这个。

```
 public static String[] mysplit(String mystring) {

    String string=mystring+" ";               //append " " bcz java string does not hava any ending character
    int[] spacetracker=new int[string.length()];// to count no. of spaces in string
    char[] array=new char[string.length()];     //store all non space character
    String[] tokenArray=new String[string.length()];//to return token of words

    int spaceIndex=0;
    int parseIndex=0;
    int arrayIndex=0;
    int k=0;
    while(parseIndex<string.length())
    {
        if(string.charAt(parseIndex)==' '||string.charAt(parseIndex)==' ')
        {
            spacetracker[spaceIndex]=parseIndex;
            spaceIndex++;
            parseIndex++;
        }else
        {
        array[arrayIndex]=string.charAt(parseIndex);
        arrayIndex++;
        parseIndex++;
        }
    }

    for(int i=0;i<spacetracker.length;i++)
    {
        String token="";
        for(int j=k;j<(spacetracker[i])-i;j++)
        {
            token=token+array[j];
            k++;

        }
        tokenArray[i]=token;
        //System.out.println(token);
        token="";

    }
    return tokenArray;
} 
```

希望这可以帮助

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-03-23T06:20:02.257

```
import java.util.*;
class StringSplit {
    public static void main(String[] args) 
    {
        String s="splitting a string without using split()";
        ArrayList<Integer> al=new ArrayList<Integer>();     //Instead you can also use a String 
        ArrayList<String> splitResult=new ArrayList<String>();
        for(int i=0;i<s.length();i++)
            if(s.charAt(i)==' ')
                al.add(i);
        al.add(0, 0);
        al.add(al.size(),s.length());
        String[] words=new String[al.size()];
        for(int j=0;j<=words.length-2;j++)
                splitResult.add(s.substring(al.get(j),al.get(j+1)).trim());
        System.out.println(splitResult);
    }
} 
```

> 时间复杂度：O(n)

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2012-05-07T17:44:01.777

您也可以使用`String.substring`或`charAt[]`。

# javascript - InnerHTML 无法使用在 IE 中……在 Firefox 中很好。想法？所以，我希望创建一个复选框，单击该复选框会调用一个函数来将表单的一个部分的值填充到另一个表单中。这在为帐单或送货地址创建一个显示“使用我的主要地址”的按钮时很有用。Javascript 方面，我创建了这个： function fillBilling() { if (document.getElementById('useMain').checked) { document.getElementById('ccFN

> ID：10486083
> 
> 赞同：0
> 
> 时间：2012-05-07T17:05:13.443
> 
> 标签：javascript, html, internet-explorer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:10:53.977

如果它们相同，请尝试仅更新 selectedIndex

```
document.getElementById('ccState').selectedIndex =
    document.getElementById('state').selectedIndex; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:42:11.247

您可以在 IE 或任何其他浏览器中使用选项的 .text 属性更改选项的文本。

# javascript - 使用 HTML5 画布生成动画 GIF

> ID：10486084
> 
> 赞同：32
> 
> 时间：2012-05-07T17:05:18.253
> 
> 标签：javascript, html, canvas, html5-canvas

他们有图书馆可以这样做吗？

任何浏览器都不支持 AFAIK dataToURL('image/gif')

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-07T17:16:30.300

Canvas 无法生成（动画）GIF。您需要使用 JavaScript 库来执行此操作。

有 jsgif，一个用于生成动画 GIF 的 JS 库：http: [//github.com/antimatter15/jsgif](http://github.com/antimatter15/jsgif)

这篇博文解释了用法： [http ://antimatter15.com/wp/2010/07/javascript-to-animated-gif/](http://antimatter15.com/wp/2010/07/javascript-to-animated-gif/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-21T23:55:33.433

omggif 是 GIF 89a 编码器的 JavaScript 实现。

[https://github.com/deanm/omggif](https://github.com/deanm/omggif)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-23T14:32:10.470

[https://github.com/spite/ccapture.js/](https://github.com/spite/ccapture.js/)看起来是捕获 gif 或视频的更简单、更好的替代方案。

# jquery - Firefox 12 不使用 jquery post 更新

> ID：10486088
> 
> 赞同：2
> 
> 时间：2012-05-07T17:05:34.643
> 
> 标签：jquery, firefox, post

我已经阅读了很多关于 IE 和 jquery 帖子的帖子（问题），但从没想过我会问如何让它在 Firefox 中运行，因为它在 IE9（没有缓存的标题）和 Chrome 中运行良好。

```
$(document).ready(function(){
    setInterval(function(){
        $.post("dashBoardsql.php", {track : 2}, function(pendingReq){
            $("#myTable").html(pendingReq);
            }),
            "html" });
}, 27000); 
```

是我的 jquery 代码，就像我说的那样，它在 IE9 和 Chrome 中运行良好，但我必须在 FF12 中刷新页面才能看到pendingReq 传回的更新。我已经使用 Firebug 来观察带有 POST 数据的控制台，并且它会一直放置到 F5 页面。此外，没有报告错误，并且我的 no-cache 标头必须重新验证已到位：

```
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past 
```

有什么建议么？另外值得注意的是，正在我的本地机器上使用 WAMP 进行测试，因此没有跨域问题

解决了！问题“是”一个语法错误，但不是建议的方式，小提琴上的@KevinB 示例向我展示了，从上面的原始代码来看，它现在看起来像：

```
$(document).ready(function(){
    setInterval(function(){
        $.post("dashBoardsql.php?_=" + $.now(), {track : 2}, function(pendingReq){
            $("#myTable").html(pendingReq);
            }),
            "html"
}, 27000);
}); 
```

加上所有的标题信息，但我看到所有新的时间戳都出现了并且更新发生了。谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:34:03.893

尝试将反缓存字符串添加到 url。

```
$.post("dashBoardsql.php?_=" + $.now(), ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:29:03.973

```
$(document).ready(function(){
    setInterval(function(){
        $.post("dashBoardsql.php?_=" + $.now(), {track : 2}, function(pendingReq){
            $("#myTable").html(pendingReq);
            }),
            "html"
}, 27000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:35:51.820

我不知道您的代码是否是您网站中的代码，但它包含语法错误。

但最有趣的是，在区间函数中，$ 不再被识别。而且我不明白为什么=/...

所以改用这个：

```
$(document).ready(function(){
    setInterval(function(){
        jQuery.post("dashBoardsql.php", {track : 2}, function(pendingReq){
            jQuery("#myTable").html(pendingReq);
        },"html");
    }, 27000);
}); 
```

此外，即使在正常情况下，也建议使用 jQuery 变量而不是 $（因为将来可能与其他框架发生冲突等）。

编辑：我不知道这是否能解决你的问题，虽然......

# algorithm - 在二叉树中查找最大独立集的大小 - 为什么错误的“解决方案”不起作用？

> ID：10486089
> 
> 赞同：1
> 
> 时间：2012-05-07T17:05:35.687
> 
> 标签：algorithm, binary-tree

这是一个类似问题的链接，有一个很好的答案：[Java Algorithm for find the maximum set of independent nodes in a binary tree](https://stackoverflow.com/questions/1567532/java-algorithm-for-finding-the-largest-set-of-independent-nodes-in-a-binary-tree)。

我想出了一个不同的答案，但我的教授说它不起作用，我想知道为什么（他不回复电子邮件）。

问题：

> 给定一个包含 n 个整数的数组 A，它的索引从 0 开始（即 , `A[0]`, `A[1]`..., `A[n-1]`）。我们可以将 A 解释为一棵二叉树，其中的两个子节点`A[i]`是`A[2i+1]`和`A[2i+2]`，每个元素的值就是树的节点权重。在这棵树中，如果一组顶点不包含任何父子对，我们就说它是“独立的”。独立集的权重只是其元素所有权重的总和。开发一种算法来计算任何独立集的最大权重。

我提出的答案使用了以下两个关于二叉树中独立集的假设：

1.  同一级别的所有节点相互独立。
2.  交替级别上的所有节点彼此独立（没有父/子关系）

警告：我在考试期间想出了这个，它并不漂亮，但我只是想看看我是否可以争取至少部分学分。

那么，为什么不能只构建两个独立的集合（一个用于奇数级别，一个用于偶数级别）？

如果每个集合中的任何权重都是非负的，则将它们相加（丢弃负元素，因为这不会对最大的权重集做出贡献）以找到具有最大权重的独立集。

如果集合中的权重都是负数（或等于 0），则对其进行排序并返回最接近 0 的负数作为权重。

比较两组中最大独立集的权重，并将其作为最终解决方案返回。

我的教授声称它不起作用，但我不明白为什么。为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-07T19:12:06.847

Interjay 已注意到您的答案不正确的原因。这个问题可以用递归算法来解决`find-max-independent`，给定一棵二叉树，考虑两种情况：

1.  考虑到根节点包含在内，最大独立集是多少？
2.  考虑到不包括根节点，最大独立集是多少？

在情况 1 中，由于包含了根节点，因此它的任何一个子节点都不能。因此，我们将`find-max-independent`root 的孙子的值加上 root 的值（必须包括在内），然后返回。

在情况 2 中，我们返回子节点的最大值`find-max-independent`，如果有的话（我们只能选择一个）

该算法可能看起来像这样（在 python 中）：

```
def find_max_independent ( A ):
    N=len(A)

    def children ( i ):
        for n in (2*i+1, 2*i+2):
            if n<N: yield n

    def gchildren ( i ):
        for child in children(i):
            for gchild in children(child):
                yield gchild

    memo=[None]*N

    def rec ( root ):
        "finds max independent set in subtree tree rooted at root. memoizes results"

        assert(root<N)

        if memo[root] != None:
            return memo[root]

        # option 'root not included': find the child with the max independent subset value
        without_root = sum(rec(child) for child in children(root))

        # option 'root included': possibly pick the root
        # and the sum of the max value for the grandchildren
        with_root =  max(0, A[root]) + sum(rec(gchild) for gchild in gchildren(root))

        val=max(with_root, without_root)
        assert(val>=0)
        memo[root]=val

        return val

    return rec(0) if N>0 else 0 
```

一些测试用例说明：

```
tests=[
    [[1,2,3,4,5,6], 16], #1
    [[-100,2,3,4,5,6], 6], #2
    [[1,200,3,4,5,6], 200], #3
    [[1,2,3,-4,5,-6], 6], #4
    [[], 0],
    [[-1], 0],
]

for A, expected in tests:
    actual=find_max_independent(A)
    print("test: {}, expected: {}, actual: {} ({})".format(A, expected, actual, expected==actual)) 
```

样本输出：

```
test: [1, 2, 3, 4, 5, 6], expected: 16, actual: 16 (True)
test: [-100, 2, 3, 4, 5, 6], expected: 15, actual: 15 (True)
test: [1, 200, 3, 4, 5, 6], expected: 206, actual: 206 (True)
test: [1, 2, 3, -4, 5, -6], expected: 8, actual: 8 (True)
test: [], expected: 0, actual: 0 (True)
test: [-1], expected: 0, actual: 0 (True) 
```

**测试用例 1**

[![测试用例 1](../Images/4006e16410567f4cfdafead6ae5c786b.png)](https://i.stack.imgur.com/nQUzi.png)

**测试用例 2**

[![测试用例 2](../Images/b9d35be67ba404181407dac052f1c54e.png)](https://i.stack.imgur.com/pcTkI.png)

**测试用例 3**

[![测试用例 3](../Images/2a8e8e53b8cbd25e1fb1eddaa118c336.png)](https://i.stack.imgur.com/TQ2YW.png)

**测试用例 4**

[![测试用例 4](../Images/bccd4033d3fa25f918b254b2335aaeb7.png)](https://i.stack.imgur.com/xTs4n.png)

记忆算法的复杂度是`O(n)`，因为`rec(n)`每个节点调用一次。这是一个使用深度优先搜索的自上而下的动态规划解决方案。

（测试用例插图由 leetcode 的交互式二叉树编辑器提供）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:34:29.977

您的算法不起作用，因为它返回的节点集要么全部来自奇数级别，要么全部来自偶数级别。但是最佳解决方案可以同时具有来自两者的节点。

例如，考虑一棵树，除了两个权重为 1 的节点外，所有权重均为 0。其中一个节点位于级别 1，另一个位于级别 4。最佳解决方案将包含这两个节点且权重为 2。但是您的算法只会给出这些节点之一并且权重为 1。

# c# - WPF/Silverlight 的样式分析器

> ID：10486101
> 
> 赞同：4
> 
> 时间：2012-05-07T17:06:45.607
> 
> 标签：c#, wpf, silverlight

我正在寻找一个实用程序，它将遍历项目中的所有 XAML 文件并找到未在任何地方使用的已定义样式。

这样的工具存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:09:05.747

不，据我所知，没有这样的工具。

您可以使用简单的*Find* of`VisualStudio`或[Expression Blend](http://www.microsoft.com/expression/products/Blend_Overview.aspx)或[XamlPad](http://msdn.microsoft.com/it-it/library/ms742398%28v=vs.90%29.aspx)（免费）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:20:38.707

如果样式在同一个文件中，[ReSharper](http://www.jetbrains.com/resharper)在显示未使用的样式、转换器等方面做得很好……通过将它们变灰一点。提供 30 天试用版。

这就是它的外观：

![](../Images/56474017e72cd7c0e704487e2d3c9818.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-16T10:39:36.930

为此，我为 Silverlight 样式做了一个小型应用程序。它应该肯定适用于 WPF。源代码和二进制文件可以在这里找到：

[从 Silverlight 项目中删除未使用的样式](http://www.kopf.com.br/kaplof/removing-unused-styles-from-silverlight-projects)

Rgds,

布鲁诺

# iterator - LevelDB：实现迭代器以按键前缀枚举

> ID：10486102
> 
> 赞同：4
> 
> 时间：2012-05-07T17:06:50.670
> 
> 标签：iterator, c++-cli, leveldb

我正在寻找一种有效的方法来实现使用 leveldb 通过键前缀迭代的键枚举器。键是字节数组（数据库使用默认字节数组比较器，因此具有特定前缀的所有键都按顺序存储/检索），我希望我的迭代器能够采用键前缀并仅返回具有键的数据字首。

我是否必须使用或继承默认的数据库迭代器，寻找范围内的第一个键（当然我需要知道它是什么），然后验证并返回以前缀开头的每个切片（通过覆盖 movenext 或其他东西)? 还是有更有效的方法来实现这一点？

让我知道是否有人已经解决了这个问题并且可以分享代码或总体思路。我正在从 C++/CLI 尝试这个，但任何语言的实现都会有所帮助。

谢谢。-raj。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:50:41.780

比较器用于确定键是否不同，因此重载它无济于事，因为当您扫描数据库时 - 您必须能够比较完整的键（而不仅仅是前缀）。不需要重载迭代器：键在 leveldb 中排序，您会知道如果遇到具有不同前缀的键，它已经超出范围。你可以像往常一样使用迭代器，只要你的键被正确评估，你应该得到正确的结果：

```
void ScanRecordRange(const leveldb::Slice& startSlice, const leveldb::Slice& endSlice)
{
    // Get a database iterator
    shared_ptr<leveldb::Iterator> dbIter(_database->NewIterator(leveldb::ReadOptions()));

    // Possible optimization suggested by Google engineers 
    // for critical loops. Reduces memory thrash.
    for(dbIter->Seek(startSlice); dbIter->Valid() && _options.comparator->Compare(dbIter->key(), endSlice)<=0 ;dbIter->Next())
    {                
        // Read the record
        if( !dbIter->value().empty() )
        {
            leveldb::Slice keySlice(dbIter->key());
            leveldb::Slice dataSlice(dbIter->data());
            // TODO: process the key/data

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:39:05.293

[我的LevelDB 包装](https://github.com/ArtemGr/libglim/blob/master/ldb.hpp)器中有一个前缀迭代器。
在方法返回的范围内使用`startsWith`：

```
int count = 0;
for (auto& en: ldb.startsWith (std::string ("prefix"))) {++count;} 
```

# php - PHP避免使用静态类以避免依赖，但我需要在任何地方使用全局

> ID：10486107
> 
> 赞同：3
> 
> 时间：2012-05-07T17:07:20.983
> 
> 标签：php, static, global-variables, global, static-classes

很多时候我听说要**避免使用静态类**，因为[它们会插入使您的代码在其他项目中无法使用的依赖项，并且不允许对其进行单元测试](https://stackoverflow.com/a/5673247/260080)。

假设我们有一个典型`class DB`的访问数据库的类，如果这样的类是`static`我们可以在代码中的任何位置调用它：

```
DB::execQuery(...); 
```

但这会产生依赖关系，所以让我们让 DB 类不是静态的，在这种情况下，我们的代码中会有某处：

```
$db = new DB(); 
```

然后我们可以调用我们的代码

```
$db->execQuery(...); 
```

但是现在在使用`$db`inside a时`function`，我们每次都需要先这样声明它

`global $db;`

**有没有办法解决这个问题？**

一种方法是将`$db`对象注入到使用它的类中，但我必须将它注入到所有使用它的类中，这很荒谬，使用静态类会更快，编写的代码更少。我错过了什么吗？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T17:15:57.523

$db 可以在实例化时注入到属性中，然后您只需要访问此属性而不是将其传递给每个方法。

```
class MyClass {
  protected $_db; // DB Connection
  public function __construct($db) {
    $this->_db = $db;
  }

  public function foo() {
    $this->_db->query('...');
  }

} 
```

除此之外，您可以考虑拥有一个服务容器（也称为依赖注入容器），它尝试像全局变量一样工作，但可以解决一些测试问题。看看其中一些相关的问题

*   [如果单例不好，那么为什么服务容器是好的？](https://stackoverflow.com/questions/6034748/if-singletons-are-bad-then-why-is-a-service-container-good)
*   [让 DI 容器替换全局 $registry 对象是一种好习惯吗？](https://stackoverflow.com/questions/6122214/is-it-good-practice-to-have-di-container-replace-a-global-registry-object)

拥有一个 DI 容器可以让您在类中使用静态方法，例如`DI_Container::get('db')`. 它看起来很像`global`其他一些静态调用。但在这种情况下，它`DI_Container`包含允许在测试和其他情况下采取额外操作的特殊方法。消除全局的一些“邪恶”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T08:51:22.017

除了 Mike B 的回答之外，我还要指出您代码中的错误设计是：«我们可以在代码中的任何位置调用它»。

实际上，数据库应该只由您的模型使用，或者您的应用程序中必须了解数据库的一小部分。所以这些类应该知道有一个数据库，并将其用作依赖项（如 Mike B 所说，通过构造函数传递）。

但是你的应用程序的其余部分不应该关心数据库，它应该只关心模型。专注于重构和收集所有访问数据库的代码到模型类中。

这样，您的应用程序将拥有一个具有依赖关系的模型层：数据库对象/连接。并且您的应用程序的其余部分将使用模型，无论模型中发生什么，都与控制器/视图业务无关。

享受重构。

# jquery - 使用 jQuery 向表中添加行

> ID：10486108
> 
> 赞同：1
> 
> 时间：2012-05-07T17:07:21.027
> 
> 标签：jquery, html-table

我有一个包含 5 列的 HTML 表。在 HTML 表格上方，有一个名为“HowManyRows”的文本框，用户可以在其中输入他们想要添加到表格中的行数。这些行实际上是在“添加行！”时添加的。按钮被点击。

我认为创建此功能的最佳方法是使用 for 循环，但浏览互联网后，人们说使用 jQuery 方法`.each`。我已经尝试过了，但它没有按预期工作。无论“HowManyRows”中的数字如何，它都会在表格中添加一行。有人可以纠正我哪里出错了吗？

这是我的 HTML：

```
 <input type="text" id="HowManyRows"/>
    <table id="MainTable">
        <tr id="FirstRow">
            <td>
            <select>
              <option>Milk</option>
              <option>Coffee</option>
              <option>Tea</option>
            </select>
            </td>
             <td>
            <select>
              <option>1 sugar</option>
              <option>2 sugar</option>
              <option>3 sugar</option>
           </select>
            </td>
             <td>
                 <input type="text"/>           
            </td>   
               <td>
                 <input type="text"/>           
            </td>
               <td>
                 <input type="text"/>           
            </td>
        </tr>  
    </table>
<button type="button" id="btnAdd">Add Row!</button> 
```

这是我的 jQuery：

```
$(document).ready(function () {
    $('#btnAdd').click(function () {
        $('#HowManyRows').each(function(index) {
            $('#FirstRow').clone().appendTo('#MainTable');
        });
    });   
}); 
```

我在[这里](http://jsfiddle.net/Atkinson1988/puWwk/)创建了一个关于 JSFiddle 的演示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:10:35.047

[`.each()`](http://api.jquery.com/each/)在这里似乎没有用，因为它通常用于迭代一组 jQuery 选择的元素。一个[简单的循环就可以](http://jsfiddle.net/VRRvy/)了：

```
$('#btnAdd').click(function () {
    var n = parseInt($('#HowManyRows').val(), 10);
    var original = $('#FirstRow');
    for (var i = 0; i < n; i++) {
        original.clone().appendTo('#MainTable');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:24:37.840

根据 jQuery 文档，不建议在这种情况下使用其他人建议的 jQuery .clone() 方法：

> 使用 .clone() 具有产生具有重复 id 属性的元素的副作用，这些属性应该是唯一的。在可能的情况下，建议避免使用此属性克隆元素或使用类属性作为标识符。

更不用说循环 .appendTo() 调用的建议方法将导致客户端每次迭代都重新渲染。我建议如下：

创建一个常量作为您的行模板：

```
var row = ['<tr id="',
           '', // Insert id value here
           '"><td><select><option>Milk</option<option>Coffee</option<option>Tea</option></select></td><td><select><option>1 sugar</option><option>2 sugar</option><option>3 sugar</option></select></td><td><input type="text"/></td><td><input type="text"/></td><td><input type="text"/></td></tr>']; 
```

或者，您可以省略行变量中的 id，如果每行不需要唯一的 id，则只使用一个大字符串。然后您继续：

```
$('#btnAdd').click(function () {
    var i = parseInt($('#HowManyRows').val(), 10);
    var cnt = i;
    var rowCnt = $('#MainTable').children().length;
    var rows = [];
    while(i--) {
        row[1] = 'row' + (rowCnt + cnt - i);
        rows.push(row.join()); // or just row if not using the id
    }
    $('#MainTable').append(rows.join());
} 
```

这样我们就只有一次添加到 DOM 中，并且`row`变量中的空字符串元素被替换为唯一且可预测的 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T17:09:56.917

干得好：

```
 $(document).ready(function () {
     $('#btnAdd').click(function () {
            var count = parseInt($('#HowManyRows').val()), first_row = $('#FirstRow');
            while(count-- > 0)
                first_row.clone().appendTo('#MainTable');
     });   
 });​ 
```

小提琴：http: [//jsfiddle.net/iambriansreed/QWpdr/](http://jsfiddle.net/iambriansreed/QWpdr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T17:10:47.930

`each`遍历它调用的 jQuery 对象中的元素，所以：

```
$('#HowManyRows').each(...); 
```

只执行一次迭代，因为`$('#HowManyRows')`其中只有一个元素。

在您的情况下，循环是完全可以接受的。

```
var howMany = parseInt($('#HowManyRows').val(), 10);
while (howMany-- > 0) {
    // Add a row...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T17:15:59.513

```
$(document).ready(function () {
    var $howMany = $('#HowManyRows'),
        $firstRow = $('#FirstRow');
    $('#btnAdd').click(function () {
        var numRows = parseInt($howMany.val(), 10) || 1; //default to 1
        for (var i = 0; i < numRows; i++){
            $firstRow.clone().appendTo('#MainTable');
        }
    });   
}); 
```

# sql - 空间索引提示在 SQL Server 2008 中不起作用？

> ID：10486109
> 
> 赞同：3
> 
> 时间：2012-05-07T17:07:21.300
> 
> 标签：sql, sql-server-2008, spatial-index

![在此处输入图像描述](../Images/880f93ce0224bac359154e1978d0eb09.png)使用以下

```
SELECT * 
FROM dbo.GRSM_WETLAND_POLY    
CROSS APPLY (SELECT TOP 1 Name, shape     
             FROM GRSM.dbo.GRSM_Trails --WITH(index(S319_idx))    
             WHERE GRSM_Trails.Shape.STDistance(dbo.GRSM_WETLAND_POLY.Shape) IS NOT NULL     
            ORDER BY GRSM_Trails.Shape.STDistance(dbo.GRSM_WETLAND_POLY.Shape) ASC) fnc 
```

在 134 行（56 秒）上运行非常慢，但是，在未注释索引提示的情况下，它返回

> 消息 8635，级别 16，状态 4，第 3 行
> 查询处理器无法为带有空间索引提示的查询生成查询计划。原因：空间索引不支持谓词中提供的比较器。尝试删除索引提示或删除 SET FORCEPLAN。

执行计划显示过滤器成本为 98%，它查询另一个表中的 1400 行，因此总成本为 134 * 1400 次单独查找，这就是延迟所在。就其本身而言，每个表中的空间索引都表现出色，没有碎片，99% 的页面填充度，并且对所有 4 个网格级别使用中等，每个对象有 16 个单元格。更改任一表上的空间索引属性对性能没有影响。

文档表明空间索引提示只能在 SQL Server 2012 中的查询中使用，但肯定有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:28:41.800

主要问题是你为什么要强制提示？如果 SQL Server 没有在它生成的计划中选择索引，那么强制执行另一个计划几乎总是会导致性能下降。

您应该做的是分析生成的执行计划的每个节点，看看花费这么长时间的瓶颈在哪里。如果您发布打印屏幕，也许我们可以提供帮助

# r - R：“应用”语句取多列中非 NA 值的数量之和

> ID：10486110
> 
> 赞同：5
> 
> 时间：2012-05-07T17:07:23.413
> 
> 标签：r, function, rows, apply, any

我有大量的就诊记录数据框。每条记录（行）最多可以有 11 个诊断代码。我想知道每行有多少个非 NA 诊断代码。

以下是数据示例：

```
diag1 diag2 diag3 diag4 diag5 diag6 diag7 diag8 diag9 diag10 diag11
786   272   401   782    250  91912  530    NA    NA    NA     NA   
845   530   338   311    NA    NA    NA     NA    NA    NA     NA 
```

所以在这两行中，我想知道第 1 行有 7 个代码，第 2 行有 4 个代码。数据框是 31,596 行，因此循环花费的时间太长。我想使用“应用”语句来加快速度：

```
z = apply(y[,paste("diag", 1:11, sep="")], 1, function(x)sum({any(x[!is.na(x)])})) 
```

R 只返回一个 1 的向量，其长度与数据集中的行数相同。我认为使用“任何”有问题吗？有没有人有一个好方法来计算多列中非 NA 值的数量？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T17:14:50.463

只需使用`is.na`和`rowSums`：

```
z <- rowSums(!is.na(y[,paste("diag", 1:11, sep="")])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T17:42:33.547

您还可以使用：

```
apply(y, 1, function(x) length(na.omit(x))) 
```

但约书亚乌尔里希的回答要快得多。

# dll - 为什么 MSTest 不复制引用的项目库？

> ID：10486113
> 
> 赞同：15
> 
> 时间：2012-05-07T17:07:37.980
> 
> 标签：dll, reference, msbuild, mstest

我有一个带有 C# dll 项目的 Visual Studio 解决方案。该解决方案还有一个引用 C# dll 项目输出的测试项目。引用的项目 dll 已设置 Copy Local = true。

如果我从 Visual Studio 运行此测试，它工作正常。

但是如果我从 MSBuild 任务运行它，由于某种原因，MSTest 不会将引用的 C# dll 复制到 MSTest 工作文件夹，因此测试失败。奇怪的是，所有其他引用的库都被复制到 MSTest 工作文件夹中。如果我放一个

```
 [DeploymentItem(@"PleaseCopyThis.dll")] 
```

在我的测试方法之前，最后它被复制到 MSTest 工作文件夹，我的测试运行良好。

但是为什么Visual Studio只复制不属于解决方案的引用的dll，而不复制引用的项目dll？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T11:19:44.220

所以我找到了这篇文章：[https ://web-beta.archive.org/web/20140803214948/http://www.dotnetthoughts.net:80/mstest-exe-does-not-deploy-all-items/](https://web-beta.archive.org/web/20140803214948/http://www.dotnetthoughts.net:80/mstest-exe-does-not-deploy-all-items/)

似乎是一个 mstest 问题。

因为我刚刚遇到同样的问题，所以我想办法解决它。在我的情况下，引用的 dll 从未直接从测试项目中直接使用（尽管它们是通过使用反射来使用的）。为了解决它，我添加了一个带有以下代码的测试类：

```
[AssemblyInitialize]
    public static void InitializeReferencedAssemblies(TestContext context)
    {
        ObjectInAssemblyX dummy = new ObjectInAssemblyX();
        ObjectInAssemblyY dummy2 = new ObjectInAssemblyY();
    } 
```

现在它们被使用，因此它们将被复制

# logging - 如何摆脱日志每一行的 erlang 提示？

> ID：10486114
> 
> 赞同：1
> 
> 时间：2012-05-07T17:07:50.437
> 
> 标签：logging, console, erlang, prompt

当我的游戏运行时，我得到了所有正常的 io:format 输出，但令人愤怒的是，每个输出前面都有提示：

```
(server@gamehost.thisplace.net)1> log entry 1
(server@gamehost.thisplace.net)1> log entry 2
(server@gamehost.thisplace.net)1> log entry 3
(server@gamehost.thisplace.net)1> log entry 4
(server@gamehost.thisplace.net)1> log entry 5
(server@gamehost.thisplace.net)1> log entry 6
(server@gamehost.thisplace.net)1> log entry 7
(server@gamehost.thisplace.net)1> log entry 8
(server@gamehost.thisplace.net)1> log entry 9
(server@gamehost.thisplace.net)1> log entry 10 
```

期望的结果是：

```
log entry 1
log entry 2
log entry 3
.... 
```

我仍然在 R14A 上，但很快就会向上移动。如果在我当前的版本中没有快速简便的方法来做到这一点，那么在 R15 和公司中消除这种烦恼的快速方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:02:47.363

尝试在启动时将 -noshell 传递给 erl。这当然意味着您将没有外壳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:31:02.963

在 erlang shell 中，您不能删除行号。也许您可能希望将文件日志用于：

*   错误记录器：[http ://www.erlang.org/doc/man/error_logger.html](http://www.erlang.org/doc/man/error_logger.html)
*   你自己的 event_manager：[http ://www.erlang.org/doc/man/gen_event.html](http://www.erlang.org/doc/man/gen_event.html)
*   [磁盘日志： http](http://www.erlang.org/doc/man/disk_log.html) ://www.erlang.org/doc/man/disk_log.html
*   ejabberd_logger：http: [//github.com/sinnus/ejabberd_logger](http://github.com/sinnus/ejabberd_logger)

请注意，error_logger 也应该在 shell 中执行您所要求的操作，因为输出将类似于：

```
2> error_logger:warning_msg("Warnings tagged as: ~p~n", [warning]).
=ERROR REPORT==== 11-Aug-2005::13:45:49 ===
Serious error in my module
ok 
```

更多信息：[Erlang/OTP 的日志库](https://stackoverflow.com/questions/3718101/logging-libraries-for-erlang-otp)

# css - Google Chrome 和 Safari，我的网站在右侧提供了额外的空间

> ID：10486115
> 
> 赞同：1
> 
> 时间：2012-05-07T17:07:58.080
> 
> 标签：css, internet-explorer, firefox, google-chrome, safari

我有这个网站...

[http://willruppelglass.com/](http://willruppelglass.com/)

它在 IE9、8、7、Firefox 中看起来不错，但在 Google Chrome 和 Safari 中（如果你滚动到右侧）你会看到一个空白区域，为什么会这样，我该如何解决？

任何帮助将不胜感激，感谢提前，J

所以显然这个问题存在于所有浏览器中......这是我的身体CSS代码......

```
body{
    font-family: 'ArialNarrow';
    background-color:#ebebeb;
    padding:0;
    margin:0;
} 
```

有谁知道如何修理它？

我添加了一个关于我现在的问题的屏幕截图..

![在此处输入图像描述](../Images/7985982c6b84eb89b5d5f2caf515937f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T17:38:45.163

问题与你无关，`body`而在于你`.headerNav`

```
.headerNav {
    color: 
    black;
    margin: 0 auto;
    width: 1280px;
    padding-top: 140px;
    padding-left: 230px;
    } 
```

你给它一个 1280px 的宽度，然后你给它一个 230px 的 padding-left ，这使得实际宽度 = 1510px ，这将水平滚动条添加到站点。

我会推荐以下

```
.headerNav {
    color: 
    black;
    margin: 0 auto;
    width: 1050px; /* decrease the width of the div to compensate for the padding-left */
    padding-top: 140px;
    padding-left: 230px;
    } 
```

我希望这可以帮助你。

# c - 这个 GCC 错误“... relocation truncated to fit...”是什么意思？

> ID：10486116
> 
> 赞同：60
> 
> 时间：2012-05-07T17:08:03.313
> 
> 标签：c, eclipse, memory-management, gcc, embedded

我正在对主机加速器系统的主机端进行编程。主机在 Ubuntu Linux 下的 PC 上运行，并通过 USB 连接与嵌入式硬件进行通信。通信是通过将内存块复制到嵌入式硬件的内存来执行的。

在板的内存中有一个内存区域，我将其用作邮箱，我可以在其中写入和读取数据。邮箱被定义为一个结构，我使用相同的定义在我的主机空间中分配一个镜像邮箱。

我过去成功地使用了这种技术，所以现在我将宿主 Eclipse 项目复制到我当前项目的工作区，并进行了适当的名称更改。奇怪的是，在构建宿主项目时，我现在收到以下消息：

> 构建目标：fft2d_host
> 调用：GCC C Linker
> gcc -L/opt/adapteva/esdk/tools/host/x86_64/lib -o "fft2d_host" ./src/fft2d_host.o -le_host -lrt
> 
> ./src/fft2d_host.o：在函数“main”中：
> 
> **fft2d_host.c:(.text+0x280): relocation truncated to fit: R_X86_64_PC32 对 ./src/fft2d_host.o 中 COMMON 部分中定义的符号“邮箱”**

这个错误是什么意思，为什么它不会在当前项目上构建，而在旧项目上是可以的？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-07T17:16:26.260

您正在尝试以这样一种方式链接您的项目，即相对寻址方案的目标比所选相对寻址模式的 32 位位移所能支持的更远。这可能是因为当前项目较大，因为它以不同的顺序链接目标文件，或者因为有一个不必要的扩展映射方案在起作用。

这个问题是一个完美的例子，说明为什么对错误消息的通用部分进行网络搜索通常很有成效——你会发现这样的事情：

[http://www.technovelty.org/code/c/relocation-truncated.html](http://www.technovelty.org/code/c/relocation-truncated.html)

这提供了一些治疗建议。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-09-17T20:36:43.710

**产生错误的最小示例**

`main.S`将*地址*移入`%eax`（32 位）。

电源

```
_start:
    mov $_start, %eax 
```

链接器.ld

```
SECTIONS
{
    /* This says where `.text` will go in the executable. */
    . = 0x100000000;
    .text :
    {
        *(*)
    }
} 
```

在 x86-64 上编译：

```
as -o main.o main.S
ld -o main.out -T linker.ld main.o 
```

结果`ld`：

```
(.text+0x1): relocation truncated to fit: R_X86_64_32 against `.text' 
```

请记住：

*   `as``.text`如果没有指定其他部分，则将所有内容放在
*   `ld`将`.text`用作默认入口点 if `ENTRY`。因此`_start`是 的第一个字节`.text`。

如何修复它：改用它`linker.ld`，并从一开始减去 1：

```
SECTIONS
{
    . = 0xFFFFFFFF;
    .text :
    {
        *(*)
    }
} 
```

笔记：

*   `_start`在这个例子中，我们不能用全局化`.global _start`，否则它仍然会失败。我认为这是因为全局符号具有对齐约束（`0xFFFFFFF0`有效）。TODO 在 ELF 标准中记录在哪里？

*   该`.text`段也有一个对齐约束`p_align == 2M`。但是我们的链接器足够聪明，可以将段放置在 处`0xFFE00000`，用零填充直到`0xFFFFFFFF`并设置`e_entry == 0xFFFFFFFF`。这可行，但会生成一个过大的可执行文件。

在 Ubuntu 14.04 AMD64、Binutils 2.24 上测试。

**解释**

首先，您必须通过一个最小的示例了解什么是重定位：[https ://stackoverflow.com/a/30507725/895245](https://stackoverflow.com/a/30507725/895245)

接下来，看看`objdump -Sr main.o`：

```
0000000000000000 <_start>:
   0:   b8 00 00 00 00          mov    $0x0,%eax
                        1: R_X86_64_32  .text 
```

如果我们查看英特尔手册中指令的编码方式，我们会看到：

*   `b8`说这是`mov`一个`%eax`
*   `0`是要移动到 的立即值`%eax`。然后重定位将修改它以包含 的地址`_start`。

移动到 32 位寄存器时，立即数也必须是 32 位的。

但是在这里，重定位必须修改那些 32 位以`_start`在链接发生后将地址放入其中。

`0x100000000`不适合 32 位，但`0xFFFFFFFF`可以。因此错误。

此错误只会发生在产生截断的重定位上，例如`R_X86_64_32`（8 字节到 4 字节），但绝不会发生在`R_X86_64_64`.

并且有一些类型的重定位需要*符号*扩展而不是零扩展，如此处所示，例如`R_X86_64_32S`。另请参阅：[https ://stackoverflow.com/a/33289761/895245](https://stackoverflow.com/a/33289761/895245)

**R_AARCH64_PREL32**

提问：[创建 aarch64 裸机程序时如何防止“main.o:(.eh_frame+0x1c): relocation truncated to fit: R_AARCH64_PREL32 against `.text'”？](https://stackoverflow.com/questions/60817268/how-to-prevent-relocation-truncated-to-fit-r-aarch64-prel32-against-text-w)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-06-21T03:48:38.023

在 Cygwin`-mcmodel=medium`上已经是默认设置并且没有帮助。对我来说，添加`-Wl,--image-base -Wl,0x10000000`到 GCC 链接器确实修复了错误。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-12-30T16:45:28.343

请记住按顺序处理错误消息。在我的例子中，这个错误上面的错误是“未定义的引用”，我在视觉上跳过了它到更有趣的“重定位截断”错误。事实上，我的问题是一个导致“未定义引用”消息的旧库。一旦我解决了这个问题，“重定位被截断”也消失了。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-01-31T07:03:04.143

我在构建需要大量堆栈空间（超过 2 GiB）的程序时遇到了这个问题。解决方案是添加[`-mcmodel=medium`](https://stackoverflow.com/a/12957457)GCC 和 Intel 编译器都支持的标志。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-11-07T21:55:22.047

通常，此错误意味着*您的程序太大*，而且通常太大，因为它包含一个或多个非常大的数据对象。例如，

```
char large_array[1ul << 31];
int other_global;
int main(void) { return other_global; } 
```

如果在默认模式下编译并且没有优化，将在 x86-64/Linux 上产生“relocation truncated to fit”错误。（如果您打开优化，至少在理论上，它可以找出`large_array`未使用和/或`other_global`从未编写过的代码，从而生成不会触发问题的代码。）

发生的事情是，默认情况下，GCC 在此架构上使用其“小代码模型”，其中所有程序的代码和静态分配的数据必须适合最低 2GB 的地址空间。（精确的上限是 2GB - 2MB，因为任何程序地址空间的最低 2MB 是永久不可用的。如果您正在编译共享库或与位置无关的可执行文件，所有代码和数据必须仍然适合两个千兆字节，但它们不再固定在地址空间的底部。） `large_array`自己消耗所有空间，因此`other_global`分配了一个超出限制的地址，并且生成的代码`main`无法到达它。你从链接器得到一个神秘的错误，而不是一个有用的“`large_array`is too large" 来自编译器的错误，因为在更复杂的情况下，编译器无法知道这`other_global`将是遥不可及的，所以它甚至不会尝试简单的情况。

大多数时候，对出现此错误的正确响应是重构您的程序，以便它不需要巨大的静态数组和/或千兆字节的机器代码。但是，如果您出于某种原因确实必须拥有它们，您可以使用[“中型”或“大型”代码模型](https://gcc.gnu.org/onlinedocs/gcc-7.2.0/gcc/x86-Options.html#index-mcmodel_003dmedium-1)来提升限制，但代价是代码生成效率稍低。这些代码模型是特定于 x86-64 的；大多数其他架构也存在类似的情况，但确切的“模型”集和相关限制会有所不同。（例如，在 32 位架构上，您可能有一个“小型”模型，其中代码和数据的总量被限制在 2 ^(24)字节。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-03T10:17:34.943

我遇到了完全相同的问题。在没有`-fexceptions`构建标志的情况下编译后，文件编译没有问题

# c - libcurl c，超时和成功传输

> ID：10486119
> 
> 赞同：1
> 
> 时间：2012-05-07T17:08:18.487
> 
> 标签：c, timeout, libcurl

我必须在 c 中使用 FTP 协议和 libcurl 传输文件。它工作正常，但我有一些问题。

1）如果开始传输，但在某个时刻我断开了网络连接，我的程序仍然在 libcurl 函数中，速度变为 0，我不能做任何其他事情。我试图设置超时（CURLOPT_TIMEOUT），但这只是传输时间的超时。

2）我遇到的第二个问题，与第一个问题有关，我怎么知道转移是否成功完成？

我的转移代码是：

```
struct FtpFile {

  const char *filename;
  FILE *stream;
};
   long int size;

static size_t my_fwrite(void *buffer, size_t size, size_t nmemb, void *stream)
{
  struct FtpFile *out=(struct FtpFile *)stream;
  if(out && !out->stream) {
    /* open file for writing */
    out->stream=fopen(out->filename, "ab"); 
    if(!out->stream)
      return -1; /* failure, can't open file to write */
  }
  return fwrite(buffer, size, nmemb, out->stream);
}

int sz;

int main(void)
{
  CURL *curl;
  CURLcode res;
  char prova;

   struct stat statbuf;
   FILE *stream;

   /* apro il file per leggere la dimensione*/
   if ((stream = fopen("Pdf.pdf", "rb")) 
       == NULL)
   {
      fprintf(stderr, "Nessun file da aprire, il download partirà da zero.\n");
   }
   else
   {
   /* Ricevo informazioni sul file */
   fstat(fileno(stream), &statbuf);
   fclose(stream);
   size = statbuf.st_size;
   printf("Dimensione del file in byte: %ld\n", size);
   }

  struct FtpFile ftpfile={
    "Pdf.pdf", /* name to store the file as if succesful */
    NULL
  };

  curl_global_init(CURL_GLOBAL_DEFAULT);

  curl = curl_easy_init();
  if(curl) {

    curl_easy_setopt(curl, CURLOPT_URL, "ftp://....");
    /* Define our callback to get called when there's data to be written */
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, my_fwrite);
    /* Set a pointer to our struct to pass to the callback */
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &ftpfile);

    /* Switch on full protocol/debug output */
    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L); 

    /*Pass a long as parameter. It contains the offset in number of bytes that you want the transfer to start from.   
    Set this option to 0 to make the transfer start from the beginning (effectively disabling resume). For FTP, set  
    this option to -1 to make the transfer start from the end of the target file (useful to continue an interrupted 
    upload).

    When doing uploads with FTP, the resume position is where in the local/source file libcurl should try to resume 
    the upload from and it will then append the source file to the remote target file. */

    if(stream == NULL)
    {
        curl_easy_setopt(curl, CURLOPT_RESUME_FROM, 0);
    }
    else
    {
        curl_easy_setopt(curl, CURLOPT_RESUME_FROM, size);
    }

    /*Used to show file progress*/
    curl_easy_setopt(curl, CURLOPT_NOPROGRESS, 0);

    res = curl_easy_perform(curl);

    /* always cleanup */
    curl_easy_cleanup(curl);

    if(CURLE_OK != res) {
      /* we failed */
      fprintf(stderr, "curl told us %d\n", res);
    }
  }

  if(ftpfile.stream)
    fclose(ftpfile.stream); /* close the local file */

  curl_global_cleanup();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:35:34.340

我最近回答了一个[与此类似的问题](https://stackoverflow.com/questions/10448874/download-is-not-resuming-using-curl-c-api/10457986#comment13538027_10457986)。

1）这是设计使然。如果您想使连接超时，请尝试使用以下方法：

```
curl_easy_setopt(curl, CURLOPT_LOW_SPEED_LIMIT, dl_lowspeed_bytes);    
curl_easy_setopt(curl, CURLOPT_LOW_SPEED_TIME, dl_lowspeed_time); 
```

如果您的下载速率低于您想要的阈值，您可以检查连接并采取您认为合适的任何操作。

**注意**：在 7.25.0 中添加：`CURLOPT_TCP_KEEPALIVE, CURLOPT_TCP_KEEPIDLE`
所以这些可能是您的另一个合适的选择。

2）像这样：

```
curl_easy_getinfo(curl, CURLINFO_CONTENT_LENGTH_DOWNLOAD, &dl_bytes_remaining);
curl_easy_getinfo(curl, CURLINFO_SIZE_DOWNLOAD, &dl_bytes_received);
if (dl_bytes_remaining == dl_bytes_received)
    printf("our work here is done ;)\n"); 
```

# oracle11g - Oracle：注册 Oracle JDBC 诊断 MBean 时出错

> ID：10486123
> 
> 赞同：0
> 
> 时间：2012-05-07T17:08:31.583
> 
> 标签：oracle11g, mbeans, oracleclient, oracleexception

我正在尝试安装 OracleClient 11g，最初我遇到了关于 JDK 兼容性的问题。

**错误：**

![在此处输入图像描述](../Images/f1b5db1e6d9a75409eb5acf8eeb4cb3e.png)

所以我最终卸载了 JDK 7（64 位）并重新安装了 JDK 6（32 位）并为 SetJavaHome 编辑了 sqldeveloper.conf。

```
SetJavaHome C:\Program Files (x86)\Java\jdk1.6.0_31 
```

现在，一旦我单击 sqldeveloper.exe，它就会加载并抛出一个错误，如下所述

**错误（一）：**

![在此处输入图像描述](../Images/9d6287e5897fc87d9567f27f7c4ef5e2.png)

**错误（ii）：**

![在此处输入图像描述](../Images/870bec7e45f55027d04c7d1fff6b2521.png)

我在stackoverflow中尝试了类似的问题[线程](https://stackoverflow.com/questions/5191054/warning-error-while-registering-oracle-jdbc-diagnosability-mbean)，但没有太大帮助。因此，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:04:23.890

无法解决问题，但找到了另一种方法。

安装JDK1.6 (32bit) 安装Oracle Client (32bit)

**注意：**即使您有 64 位操作系统，请尝试安装 32 位 JDK 和 Oracle 客户端，您应该不会遇到此错误。

# javascript - javascript 模式，父子兄弟姐妹层

> ID：10486125
> 
> 赞同：1
> 
> 时间：2012-05-07T17:08:45.847
> 
> 标签：javascript, oop, design-patterns

我想创建一个函数来创建彼此之间具有分层关系的对象。因此，每个层对象都拥有自己的一组子层对象，并与其所有同级对象共享一个父对象。我不熟悉任何模式，但我想有一个可以涵盖这种情况。

```
//constructor
var Tier = function(parent){
    if(parent===undefined)Tier.prototype.Parent = null;
    else if(parent.constructor===Tier)Tier.prototype.Parent = parent;
    else return //an error code;
    //each tiered object should contain it's own set of children tiers
    this.Children = [];
    //...
    //...additional properties...
    //...
    this.addChild = function(){
        this.Children.Push(new Tier(this));
    };
}

Tier.prototype.Parent; //I want this to be shared with all other tier objects on the same tier BUT this will share it between all tier objects regaurdless of what tier the object is on :(
Tier.prototype.Siblings; //should point to the parents child array to save on memory 
```

是否可以创建这种对象，其中每个层对象都包含自己的子对象，并与其兄弟共享一个父对象，但不同的层共享正确的父对象。我相信，如果我在添加新孩子时使用上述类似的东西，它将使 Tier.prototype.Parent 成为该孩子的父母，但对于所有不是正确行为的对象。我不知道如何解决这个问题。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:26:03.770

我不知道我是否做对了，但试试这个：

```
// class Tier
function Tier(parentT) {
    var Parent;

    if((typeof parentT) == undefined) {
        Parent = null;
    } else if(parentT instanceof Tier) {
        Parent = parentT;

        parentT.addChildren(this);
    } else {
        Parent = null;
    }

    var Children = []; // private; if you want it public you can use this.Children

    this.addChildren = function(newChild) {
        Children.push(newChild);
    };
    this.getParent = function() {
        return Parent;
    };
    this.getChildren = function() {
        return Children;
    };
} 
```

我对你的问题有点困惑，所以我的回答可能有问题。

就像现在一样，可以有一个没有父级的层。（无参数）（`var newTier = new Tier();`）；

如果您使用参数创建一个新层，它将被添加到父节点 ( `var parentTier = new Tier(); var child = new Tier(parentTier);`) 中的子节点。

# ios - 无法加载 xcodeproj，因为它已从另一个项目或工作区打开

> ID：10486130
> 
> 赞同：-1
> 
> 时间：2012-05-07T17:09:01.247
> 
> 标签：ios, xcode, xcode4.3

我收到 **无法加载 CastNear.xcodeproj 因为它已经从另一个项目或工作区打开**

错误。我试图重新启动 Xcode 和整个 Mac，但我没有帮助。

请问有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:25:18.977

一段时间后它工作得很好。我关闭了 Xcode 中的所有项目并重新启动了 MAC。

但我不确定真正的原因是什么。无论如何，我现在工作正常。

# java - 本地主机的 Eclipse Tomcat https 配置

> ID：10486137
> 
> 赞同：2
> 
> 时间：2012-05-07T17:09:34.953
> 
> 标签：java, eclipse, tomcat, https, localhost

我正在实施 https 项目。所以我只是尝试与 tomcat 的 ssl 连接，我使用来自以下站点的以下命令创建了密钥和证书。

[http://mircwiki.rsna.org/index.php?title=Configuring_Tomcat_to_Support_SSL](http://mircwiki.rsna.org/index.php?title=Configuring_Tomcat_to_Support_SSL)

```
genrsa –des3 –out tomcatkey.pem 2048

req –new –x509 –key tomcatkey.pem –out tomcatcert.pem –days 1095 -config "c:/openssl/tomcatkey.pem" 
```

所以我从 openssl 命令中获得了证书和密钥。（我将密钥用作“pratap”）

我把这2个文件放在tomcat文件夹中。

我更改了连接器元素 8443

```
<Connector
           port="8443" maxThreads="200"
           scheme="https" secure="true" SSLEnabled="true"
           SSLCertificateFile="c:/tomcat7/tomcatcert.pem"
           SSLCertificateKeyFile="c:/tomcat7/tomcatkey.pem"
           clientAuth="optional" SSLProtocol="TLSv1" SSLPassword="pratap" /> 
```

当我运行`https://localhost:8443`它运行良好。

现在在eclipse中我创建了这个服务器并尝试从eclipse运行

但它显示以下错误。

```
java.io.IOException: Keystore was tampered with, or password was incorrect
    at sun.security.provider.JavaKeyStore.engineLoad(Unknown Source)
    at sun.security.provider.JavaKeyStore$JKS.engineLoad(Unknown Source)
    at java.security.KeyStore.load(Unknown Source) 
```

我没有在任何地方使用 keystore 命令。

任何人都可以对此有所了解..谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:32:09.963

您应该阅读[http://tomcat.apache.org/tomcat-5.5-doc/ssl-howto.html#Configuration](http://tomcat.apache.org/tomcat-5.5-doc/ssl-howto.html#Configuration)。

顺便说一句：“密钥库被篡改，或密码不正确” - 此错误表示您的密钥库已崩溃或您使用了错误的密码。如果您使用自签名证书记住来创建信任库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T15:22:14.720

您需要将密钥库密码传递到您的连接器配置中。这是一个例子：

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           keystorePass="qwerty"
            clientAuth="false" sslProtocol="TLS" /> 
```

如果要使用另一个密钥库，则需要创建一个：

```
keytool -genkey -alias tomcat -keyalg RSA -keystore /home/user/.keystore2 
```

并在您的配置中使用它：

```
<Connector 
       port="8443" maxThreads="200"
       scheme="https" secure="true" SSLEnabled="true"
       keystoreFile="${user.home}/.keystore2" keystorePass="qwerty"
       clientAuth="false" sslProtocol="TLS"/> 
```

# tastypie - 嵌套关系的美味排序

> ID：10486138
> 
> 赞同：0
> 
> 时间：2012-05-07T17:09:40.473
> 
> 标签：tastypie

我正在使用嵌套关系来返回分组消息，并且想知道如何对嵌套消息进行排序，以便它们按时间顺序排列。

```
class MessageGroupResource(ModelResource):
  messages = fields.ToManyField('lookup.api.MessageResource', 'message_set', full=True);
  class Meta:
    queryset = MessageGroup.objects.all();
    resource_name = 'message'
    authorization= UserAuthorization()
    ordering  = [
                 'sendTime',                    
                ]

class MessageResource(ModelResource):
  messageGroup = fields.ForeignKey(MessageGroupResource, 'messageGroup')
  class Meta:
    queryset = Message.objects.all()
    resource_name = 'submessage'
    authorization= UserAuthorization() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:20:00.137

这是一种方法；但是，我不知道是否有更好/更多的 API 标准方式来执行此操作。

```
class MessageGroupResource(ModelResource):

messages = fields.ToManyField(MessageResource,
    attribute=lambda bundle: bundle.obj.MessageResource.all().order_by("sendTime")) 
```

# eclipse - 创建后更改draw2d按钮的图像

> ID：10486140
> 
> 赞同：0
> 
> 时间：2012-05-07T17:09:52.573
> 
> 标签：eclipse, eclipse-plugin, draw2d

我正在使用 draw2d 编写一个 Eclipse 插件。我正在使用构造函数创建一个draw2d按钮：按钮（图像图​​像）。在某些时候，我想更改该按钮上的图像！我找不到这样做的方法。任何人都可以帮助我吗？

亲切的问候，基里亚科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:14:11.750

您可以执行以下操作：

```
Button button = ...
Image newImage = ...

((Label) button.getChildren().get(0)).setIcon(newImage); 
```

这当然不好，但它似乎是唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:38:22.077

做不到。在按钮上设置图像的功能是`Clickable.setContents`，即`protected`。文档中没有任何内容说明为什么要这样做......您可以尝试继承`Button`并添加一个新函数来实现它。

# django - 如何使用 GeoDjango/PostGIS 满足“enforce_srid_coordinate”约束？

> ID：10486149
> 
> 赞同：1
> 
> 时间：2012-05-07T17:10:41.487
> 
> 标签：django, postgresql, postgis, geodjango

我正在使用 GeoDjango 并有一个带有 PointField 的 Django 模型：

```
class ArchivrItem(models.Model):
    ...
    coordinate = models.PointField(srid=4326) 
```

当我尝试使用纬度和经度插入新的 ArchivrItem 时，我收到此错误：

```
ERROR:  new row for relation "archivr_archivritem" violates check constraint "enforce_srid_coordinate" 
```

我可以通过尝试这样做来避免 Django 并直接在 postgresql 中得到相同的错误：

```
INSERT INTO archivr_archivritem (coordinate) VALUES ('POINT(51.520667 -0.094833)'); 
```

我可能对 SRID 和点系统很天真和无知……我错过了什么？谢谢。

更新：我应该添加约束是什么。表上的约束是：

```
"enforce_dims_coordinate" CHECK (st_ndims(coordinate) = 2)
"enforce_geotype_coordinate" CHECK (geometrytype(coordinate) = 'POINT'::text OR coordinate IS NULL)
"enforce_srid_coordinate" CHECK (st_srid(coordinate) = 4326) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:21:41.183

听起来您正在尝试通过执行以下操作添加新的 ArchivrItem：

```
item = ArchivrItem(coordinate='POINT(51.520667 -0.094833)')
item.save() 
```

由于某种我不确定的原因，这并没有得到正确的默认 SRID。但是，明确指定它应该可以工作，例如：

```
from django.contrib.gis.geos import Point
item = ArchivrItem(coordinate=Point(-0.094833, 51.520667, srid=4326))
item.save() 
```

如果要匹配模型定义，我会说 srid 是可选的，但指定它并没有什么坏处，您可以查看是否只需使用对象方式即可修复它。[https://docs.djangoproject.com/en/dev/ref/contrib/gis/db-api/#creating-and-saving-geographic-models](https://docs.djangoproject.com/en/dev/ref/contrib/gis/db-api/#creating-and-saving-geographic-models)有更多示例。

[此外，请注意 POINT() 是 X 然后 Y，即 lon 然后 lat，而不是 lat/lon。如果使用“SRID=4326;POINT(-0.094833 51.520667)”扩展 WKT，您可以放入 SRID]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:57:22.520

在一位同事遇到同样的问题后，我们似乎已将此归结为安装的 GEOS 版本的问题。使用有这个问题的版本，如果 p 是 django.contrib.gis.geos.Point，p.wkb 和 p.ewkb 返回相同的数据 - EWKB 缺少 SRID 信息。由于 Django 使用 EWKB 构造 SQL 以导入 PostGIS，这就是它失败的原因，无论创建的构造如何。

我之前的评论是使用 Debian 的 3.2.0，它根本没有显示这个问题。3.2.3 是此处显示此问题的版本。升级到 3.3.6 解决了这个问题（并且还测试了 3.3.3 这很好）。当我有更多时间尝试进一步追踪它时，我将在今天晚些时候尝试其他版本。

您可以通过以下方式查看您的 GEOS 版本：

```
from django.contrib.gis.geos.libgeos import geos_version
geos_version() 
```

# jquery - Chrome将cssClass添加到HTML元素

> ID：10486154
> 
> 赞同：3
> 
> 时间：2012-05-07T17:10:55.707
> 
> 标签：jquery, html, css, google-chrome

我最近注意到在过去的几周里，谷歌浏览器似乎正在向我在 Chrome 中运行的所有页面和应用程序添加一个 CSS 类（和样式块），这与缩放页面有关。

这可能会导致一些看起来相当讨厌的变化，尤其是对于那些打算以 100% 宽度显示的页面。（它会在传统上出现滚动条的右侧和底部区域留下不必要的空白）

我试图通过创建一个简单的 jQuery 函数来解决这个问题，该函数将缩放设置为 1（以保持它们以前的样子），这很有效，但我正在寻找任何其他可能更清晰的想法。

**新增类：**

```
<html class='cssClass'> 
```

**添加样式块：**

```
<style type="text/css">
    .cssClass { -webkit-transform: scale(0.990625);  
    -webkit-transform-origin: 0 0; }
</style> 
```

**当前解决方案：**

```
if($.browser.webkit){
    setTimeout(function (){ 
        $('html').removeClass('cssClass').css('-webkit-transform', 'scale(1)'); 
    }, 1);
} 
```

这解决了问题 - 但是，我只是想看看其他人是否遇到过任何其他问题（或有任何其他希望更优雅的修复）。

**更新：**这是由扩展引起的。我会留下这个问题，以防其他人觉得他们像我一样徘徊在某个外星世界。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:13:04.163

转到工具 -> 设置 -> 扩展，然后禁用所有扩展，它将停止。然后，您可以一次启用它们，以找出实际上是哪一个在执行此操作。

# c# - 对不带小数和“%”符号的数字进行必填字段验证。

> ID：10486155
> 
> 赞同：0
> 
> 时间：2012-05-07T17:11:08.023
> 
> 标签：c#, forms, validation, .net

我需要验证没有小数点和百分号的数字的文本框，例如

1%、15%、78%、100%。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:13:30.410

使用字符串[Replace](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)函数删除百分号，然后使用[TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)转整数来查看是否有有效数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:17:07.000

试试看。

```
var value = "10%".Trim('%');
int no;
if(tryParse(value, out no))
{
// Your code here

} 
```

# android - 页面卷曲（上下卷曲）就像它发生在 i_phone

> ID：10486157
> 
> 赞同：1
> 
> 时间：2012-05-07T17:11:21.160
> 
> 标签：android

我们可以在活动之间进行页面卷曲吗，我经历了很多论坛，比如谷歌论坛 git-hub。但所有都是用于图像或视图之类的布局，但我没有发现可以在活动之间工作的任何人都可以帮助解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:21:30.017

这个人已经实现了它，并且也很乐意分享代码。仅观看视频并下载代码。并且不要忘记在代码中给予他信任。 [https://sites.google.com/site/hnimblog/bai-viet-2/android-hieu-ung-lat-trang-khong-dung-opengl](https://sites.google.com/site/hnimblog/bai-viet-2/android-hieu-ung-lat-trang-khong-dung-opengl)

# javascript - 带有 iframe 的 Jquery 对话框在 IE9 中不起作用

> ID：10486158
> 
> 赞同：0
> 
> 时间：2012-05-07T17:11:22.987
> 
> 标签：javascript, jquery, jquery-ui, internet-explorer, jquery-ui-dialog

带有 Iframe 的 Jquery 对话框在 IE9 中无法正常工作。

我的 parent.aspx 上有一个 HTML 按钮

```
<input type="button" id="btnMessageFilter" class="mainFont" value="Message Filter"/> 
```

单击“btnMessageFilter”时，我想在 Jquery 对话框中打开另一个 aspx 页面（child.aspx）；我这样做是这样的：

```
$(document).ready(function () {
    $("#btnMessageFilter").live('click', function () {
        var iframe = $("<iframe>").attr({
            "src": "MessageFilter.aspx?btn=btnRefresh",
            "height": "100%",
            "marginwidth": "0",
            "marginheight": "0",
            "scrolling": "auto",
            "frameborder": "0"
        });
        $("#dialog2").empty().append(iframe);
        $("#dialog2").dialog({
            modal: true,
            title: 'Message Filter',
            width: 400,
            height: 450
        });
        $("#dialog2").parent().appendTo('form');
        return false;
    });
}); 
```

除了 IE9，代码运行良好。有什么建议可以修复上述 cod 或在 Jquery 对话框中打开另一个 aspx 的替代方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:42:08.197

我不确定您的代码有什么问题。但我在我网站的某些页面上使用 iframes + jQuery-ui 对话框，如下所示：

```
var iframe = $('<iframe frameborder="0" marginwidth="0" marginheight="0" allowfullscreen></iframe>');
var dialog = $("<div></div>").append(iframe).appendTo("body").dialog({
    autoOpen: false, // autoopen is set to false (we'll create only one dialog and open it on-demand)
    modal: true,
    resizable: false,
    width: "auto",  // set width and
    height: "auto", // height to auto (we'll set width/height on the content)
    close: function() {
        iframe.attr("src", ""); // load blank document in iframe
                                // can be useful in situations, for example,
                                // when your frame is playing audio or video
    }
});
$('#btnMessageFilter').click(function() {
    iframe.attr("width", 400).attr("height", 200); // set width/height on the content
    dialog.dialog("option", "title", "Message Filter").dialog("open");
    iframe.attr("src", "http://example.com");
}); 
```

[**演示在这里**](http://jsfiddle.net/salman/bGRNj/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:18:23.210

我正在回复这个帖子，因为我还没有找到解决这个问题的正确方法。

要解决此问题，请确保您在操作结束时设置“iframe src”。

示例 - 在上述情况下 src 必须在 .dialog() 调用之后设置。

# python - Vim python#complete 不适用于“from .module import”语句

> ID：10486163
> 
> 赞同：1
> 
> 时间：2012-05-07T17:11:32.253
> 
> 标签：python, vim, autocomplete

当前的 python#complete 不支持任何带有以下 import 语句的 python 脚本：

```
from . import module
from .modulea import abc 
```

它将在 vim 中显示“来自：语法错误...”。

任何人有任何线索来解决它？

我今天花了一些时间通过 pythoncomplete 脚本自己解决这个问题。我能够通过 _parsedotname 函数的一些技巧来解决它。由于转换“。”的问题，我不确定我的黑客行为有多便携。进入绝对路径，但它适用于我的机器。以下是我的更改（是的，您会看到很多打印语句，我用它来理解代码流......）

```
def _parsedotname(self,pre=None):
    #returns (dottedname, nexttoken)
    name = []
    absolute_relative_path = False
    if pre is None:
        tokentype, token, indent = self.next()
        #print tokentype, token, indent
        if tokentype == 51 and token == '.':
            import os
            import sys
            #print os.path.abspath(os.curdir)
            fullpath = os.path.abspath(os.curdir)
            paths = fullpath.split(os.path.sep) 
            n_ = -1
            #print fullpath
            pyexeindex = sys.path.index(os.path.dirname(sys.executable))
            #print sys.path[pyexeindex:]
            while fullpath not in sys.path[pyexeindex:]:
                fullpath = os.path.sep.join(paths[:n_])
                #print fullpath
                n_ -= 1
            if fullpath == '':
                return ('', token)
            absolute_relative_path = True
            name = '.'.join(paths[n_+1:])
            #print name
        elif tokentype != NAME and token != '*':
            #print 'should not here'
            return ('', token)
    else: token = pre
    if '.' in name:
        name = name.split('.')
    else:
        name.append(token)

    while True:
        if not absolute_relative_path:
            tokentype, token, indent = self.next()
            if token != '.': break
        tokentype, token, indent = self.next()
        if not absolute_relative_path:
            if tokentype != NAME: break
        else:
            absolute_relative_path = False
            if tokentype == NAME and token == 'import':
                return (".".join(name), token)
        name.append(token)
    return (".".join(name), token) 
```

现在，它对两者都有效：

```
from . import module
from .moduleA import moduleB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:10:31.167

我想你正在使用 vim internal `pythoncomplete`。

正如我在这里写的：[Python docstring with vim pythoncomplete is not display newlines for my own class functions](https://stackoverflow.com/questions/9980442/python-docstring-with-vim-pythoncomplete-is-not-displaying-newlines-for-my-own-c/10038130#10038130)

`pythoncomplete`是一个非常简单的工具，它通过执行语句来完成大部分功能`import`（顺便说一句，这很危险）。解决它可能不是最好的主意，因为我目前正在尝试这样做（编写一个**好的**python 自动完成）。

但我不认为我的版本会在一两个月内准备好做你想做的事，但它已经很远了，我准备好了再告诉你。

# excel - VBA：IF 语句中的意外行为。

> ID：10486164
> 
> 赞同：1
> 
> 时间：2012-05-07T17:11:35.777
> 
> 标签：excel, vba, if-statement

我正在为 Microsoft Excel 2007 使用 VBA。我的代码如下：

```
 Sub First()

 End Sub

 Function Two() As Boolean

 End Function

 Sub Sun()
     If (Two()) Then
         First()
     End If
 End Sub 
```

这段代码有什么问题？为什么它不编译？

我不能在`IF`语句中使用 subs 吗？这是VBA的[魔法吗？](http://en.wikipedia.org/wiki/Magic_%28programming%29)我该如何或应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:21:33.300

尝试从对 的调用中删除括号`First`。

```
Sub First()

End Sub

Function Two() As Boolean

End Function

Sub Sun()
    If (Two()) Then
        First
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:21:05.937

这编译：

```
Sub First()

End Sub

Function Two() As Boolean

End Function

Sub Sun()
    If (Two()) Then
        First
    End If
End Sub 
```

您需要从`First`通话中删除括号。

# java - 关于车厢状况

> ID：10486170
> 
> 赞同：0
> 
> 时间：2012-05-07T17:12:09.943
> 
> 标签：java

我在下面开发了使用比较器的..

这是我的pojo..

```
 class Emp
{
      String name,job;
      int salary;
      public Emp(String n,String j,int sal)
      {
         name=n;
         job=j;
         salary=sal;
       }
      public void display()
      {
        System.out.println(name+"\t"+job+"\t"+salary);
       }
      public boolean equals(Object o)
      {
          Emp p=(Emp)o;
          return this.name.equals(p.name)&&this.job.equals(p.job)    &&this.salary==p.salary;
       }
       public int hashCode()
       {
          return name.hashCode()+job.hashCode()+salary;
       }  

} 
```

这是我的用户定义的集合类集合..

```
 ArrayList list=new ArrayList();
          list.add(new Emp("Ram","Trainer",34000));
          list.add(new Emp("Sachin","Programmer",24000));
          list.add(new Emp("Priyanka","Manager",54000));
          list.add(1,new Emp("Ravi","Administrator",44000));
          list.add(new Emp("Anupam","Programmer",34000));
          list.add(new Emp("Sachin","Team Leader",54000));
          System.out.println("There are "+list.size()+" elements in the list.");
          System.out.println("Content of list are : ");
         ListIterator itr=list.listIterator();
          System.out.println("Sort Object according to Salary");
         Collections.sort(list,new SalaryComparator());
         System.out.println("Content of list are : ");
          itr=list.listIterator();
          while(itr.hasNext())
          {
            Emp e=(Emp)itr.next();  
            e.display();
          }
      } 
```

最后是我的比较器类

```
class SalaryComparator
  implements Comparator
{
  public int compare(Object paramObject1, Object paramObject2)
  {
    Emp localEmp1 = (Emp)paramObject1;
    Emp localEmp2 = (Emp)paramObject2;
    return localEmp1.salary - localEmp2.salary;
  }
} 
```

现在仪式是根据薪水按递增顺序排序，但请建议我如何在比较器中实现逻辑，以便首先根据薪水排序，然后根据工作，即先薪水然后工作，请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:18:29.720

您始终可以在比较器函数中包含多重比较。在这种情况下：

```
class SalaryComparator
  implements Comparator
{
  public int compare(Object paramObject1, Object paramObject2)
  {
    Emp localEmp1 = (Emp)paramObject1;
    Emp localEmp2 = (Emp)paramObject2;
    int salaryDiff = localEmp1.salary - localEmp2.salary;
    if (salaryDiff != 0) {
      return salaryDiff;
    } else {
      if (localEmp1.job == null) {
        if (localEmp2.job == null) {
          return 0;
        } else {
          return 1;
        }
      } else {
        if (localEmp2.job == null) {
          return -1;
        } else {
          return localEmp1.job.compareTo(localEmp2.job);
        }
      }
    }
  }
} 
```

这种空值检查设置将没有作业值的 Emp 实例置于字母排序的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:41:40.087

您可以使用泛型使您的代码更安全：

```
import java.util.*;

class Emp
// as is

// use Comparator <Emp> 
class SalaryComparator implements Comparator <Emp>
{
    // 'Emp' as param type, no casting or isinstanceof inside
    public int compare (Emp emp1, Emp emp2)
    {
        int diff = emp1.salary - emp2.salary;
        if (diff != 0) return diff; 
        else return (emp1.job.compareTo (emp2.job));
    }
}

public class EmpTest 
{
    public static void main (final String args[])
    {
        // how to use collections generically should be known by now:
        ArrayList <Emp> list = new ArrayList <Emp> ();
        list.add (new Emp ("Ram","Trainer", 34000));
        // ...

        // position 3 - slightly more complicated here ...
        ListIterator <Emp> itr = list.listIterator ();
        // ...
        while (itr.hasNext ())
        {
                // but simpler here:
            Emp e= itr.next ();  
            e.display ();
        }
    // here you could use the simplified for-loop:
    for (Emp e : list)
    {
        e.display ();
    }
    }
} 
```

# java - Swing：创建一个 JScrollPane 显示其组件居中？

> ID：10486171
> 
> 赞同：11
> 
> 时间：2012-05-07T17:12:25.160
> 
> 标签：java, swing, jscrollpane

如果您创建的 JScrollPane 的视口大于 JScrollPane 的组件，它将在左上角显示该组件。

有什么办法可以改变这种行为，使它以组件为中心显示？

下面的示例程序。

* * *

**澄清**：

我有一个具有（宽度，高度）=（cw，ch）的组件。

我有一个带有（宽度，高度）=（vw，vh）的视口的JScrollPane。

组件可能会变大或变小。我想要一种使用滚动条相对于视口中心点定位组件中心点的方法，因此如果组件的一个或两个尺寸小于视口，则组件会显示在视口的中心。

默认滚动窗格行为相对于视口的左上角定位组件的左上角。

我要问的是如何更改参考点。我不确定使用默认的 JScrollPane 做到这一点有多容易，所以如果这并不容易，那么我将学习我能做的并想出一种不同的方法。

* * *

```
package com.example.test.gui;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.AffineTransform;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class SimpleScroller extends JFrame {
    static class Thingy extends JPanel
    {
        private double size = 20.0;

        @Override public Dimension getPreferredSize() {
            int isize = (int) this.size;
            return new Dimension(isize, isize);
        }
        @Override protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int[] x = {0, 100, 100, 0, 0, 75, 75, 25, 25, 50};
            int[] y = {0, 0, 100, 100, 25, 25, 75, 75, 50, 50};

            Graphics2D g2d = (Graphics2D) g;
            AffineTransform at0 = g2d.getTransform();
            g2d.scale(size/100, size/100);
            g.drawPolyline(x, y, x.length);
            g2d.setTransform(at0);
        }
        public void setThingySize(double size) { 
            this.size = size;
            revalidate();
            repaint();
        }
        public double getThingySize() { return this.size; }
    }

    public SimpleScroller(String title) { 
        super(title);
        final Thingy thingy = new Thingy();
        setLayout(new BorderLayout());      
        add(new JScrollPane(thingy), BorderLayout.CENTER);

        final SpinnerNumberModel spmodel = 
            new SpinnerNumberModel(thingy.getThingySize(),
                10.0, 2000.0, 10.0);
        spmodel.addChangeListener(new ChangeListener() {
            @Override public void stateChanged(ChangeEvent e) {
                thingy.setThingySize((Double) spmodel.getNumber());
            }           
        });
        add(new JSpinner(spmodel), BorderLayout.NORTH);
    }
    public static void main(String[] args) {
        new SimpleScroller("simple scroller").start();
    }
    private void start() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T17:35:54.830

1.  将 a`JPanel`放入滚动窗格
2.  将面板的布局设置为`GridBagLayout`.
3.  将一个组件无约束地放入面板中。它将居中。

这是[嵌套布局示例](https://stackoverflow.com/a/5630271/418556)中使用的技术，它将红色/橙色图像放置在父级的中心。

![](../Images/80b2f6a16f6e6ba76969e74e6c6f60ad.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T17:49:42.117

我只是`JPanel`在`JScrollPane`其中添加了`THINGY JPanel`. 希望这是你想要的：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.AffineTransform;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class SimpleScroller extends JFrame {
    static class Thingy extends JPanel
    {
        private double size = 20.0;

        @Override public Dimension getPreferredSize() {
            int isize = (int) this.size;
            return new Dimension(isize, isize);
        }
        @Override protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int[] x = {0, 100, 100, 0, 0, 75, 75, 25, 25, 50};
            int[] y = {0, 0, 100, 100, 25, 25, 75, 75, 50, 50};

            Graphics2D g2d = (Graphics2D) g;
            AffineTransform at0 = g2d.getTransform();
            g2d.scale(size/100, size/100);
            g.drawPolyline(x, y, x.length);
            g2d.setTransform(at0);
        }
        public void setThingySize(double size) { 
            this.size = size;
            revalidate();
            repaint();
        }
        public double getThingySize() { return this.size; }
    }

    public SimpleScroller(String title) { 
        super(title);
        final Thingy thingy = new Thingy();
        setLayout(new BorderLayout());  
        JPanel panel = new JPanel();
        panel.add(thingy);
        JScrollPane scroll = new JScrollPane();
        scroll.setViewportView(panel);  
        add(scroll, BorderLayout.CENTER);

        final SpinnerNumberModel spmodel = 
            new SpinnerNumberModel(thingy.getThingySize(),
                10.0, 2000.0, 10.0);
        spmodel.addChangeListener(new ChangeListener() {
            @Override public void stateChanged(ChangeEvent e) {
                thingy.setThingySize((Double) spmodel.getNumber());
            }           
        });
        add(new JSpinner(spmodel), BorderLayout.NORTH);
    }
    public static void main(String[] args) {
        new SimpleScroller("simple scroller").start();
    }
    private void start() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }
} 
```

这是输出：

![简单的滚动条](../Images/c31323d63ebfe5da4a17063535af6d53.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T17:50:10.423

接受你的两个评论，但是

> 是的...虽然我真的很想随意放置它

有

*   [提取或创建自己的 JViewport](https://stackoverflow.com/questions/8614972/passing-current-date)

避免在 JViewport 上闪烁或跳跃的重要方法

JViewport.setScrollMode(JViewport.BLIT_SCROLL_MODE); JViewport.setScrollMode(JViewport.BACKINGSTORE_SCROLL_MODE); JViewport.setScrollMode(JViewport.SIMPLE_SCROLL_MODE);

*   使用[GlassPane](https://stackoverflow.com/questions/8715807/layering-multiple-glasspanes-in-a-root-container)（设置位置到所需的点或/和维度非常简单）

和

> 我不想绘制到 JViewport，至少不是直接绘制——我的真实代码是从 JPanel 子类化的组件，如我的示例所示，但其中还包含其他 GUI 元素。

*   您可以直接使用 JXLayer (Java6) 或 JXLayer 中的部分方法实现到 JLayer (Java7)

*   可能太难了，但在所有情况下，您都可以使用 JLabel 覆盖任何内容

> 注意

我的所有建议都是默认使用 MouseEvent，J(X)Layer 和 JLabel 也带有 KeyEvents，但是从 ---> 到另一个 JComponent 的重新调度事件没有问题

> 编辑
> 
> 等等：不，我不想在 JScrollPane 的中心绘制螺旋线（你称之为“蛇”）；我想绘制我的组件并将我的组件显示在 JScrollPane 的中心。

*   默认情况下，您的 JPanel 可能比 JViewport 宽

a) JPanel 返回 Dimension

b) JViewport 返回维度

*   然后没有任何问题，闪烁或冻结

a) 您可以将尺寸从 JPanel (Point) 居中到 JViewport (Point) 的中心

b) 如果有 JComponent，您可以将 JViewport 移动到任何 getBounds() tha 从 JScrollPane 内的 JPanel 返回的 JComponent 或 Point

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-18T10:37:46.753

根据 Andrew 的建议，您不能让视图小于视口（并且仍然居中）。

最干净的方法是直接从布局管理器中进行，覆盖 ViewportLayout。源码中有一个实现：

[http://www.randelshofer.ch/multishow](http://www.randelshofer.ch/multishow)

寻找类 ZoomableViewportLayout，它完美地完成了这项工作。

# javascript - 可以使用带有覆盖 div 的 iscroll 捏合/缩放吗？

> ID：10486172
> 
> 赞同：3
> 
> 时间：2012-05-07T17:12:37.213
> 
> 标签：javascript, ios, cordova, iscroll4

我正在尝试将具有特定位置的 div （“childItem”）覆盖在具有背景图像的较大 div （“parentContainer”）之上。然后我使用 iscroll 允许在父 div 上进行捏合/缩放。这行得通。但是，在捏/缩放完成后，子 div 不会保持其相对于父 div 的更新缩放级别的位置。

所以基本上，背景图像被缩放，但子 div 的位置没有被缩放。关于如何在使用 iscroll 完成缩放后重新定位 childItem 的任何想法？例子：

```
<div id="parentContainer">
    <img src="map_background.png" />
    <div id="childItem" style="top:40px;left:40px;">
        <img src="map_icon.png" />
    </div>
</div>

<script type="text/javascript">
var myScroll = new iScroll('parentContainer', { zoom: true });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:51:38.803

答案比我想象的要简单得多。我需要做的就是将图像和子 div 包装在另一个 div 中，以使它们一起缩放。

```
<div id="parentContainer">
    <div>
        <img src="map_background.png" />
        <div id="childItem" style="top:40px;left:40px;">
            <img src="map_icon.png" />
        </div>
    </div>
</div> 
```

# symfony - Symfony2 在响应监听器中获取当前环境

> ID：10486173
> 
> 赞同：17
> 
> 时间：2012-05-07T17:12:50.840
> 
> 标签：symfony

我想知道我是否在侦听器中使用 app_dev.php（在 中设置为服务`config.yml`）。尽管这是我在控制器中使用的方法，但它在 getEnvironment() 处失败。

```
public function onKernelResponse(FilterResponseEvent $event) {
    $kernel = $event->getKernel();
    $this->isAppDev = ($kernel->getEnvironment() == "dev") ? true : false;
} 
```

编辑**解决方案**：在我的监听器类中：

```
use Symfony\Component\HttpFoundation\Response; 
use Symfony\Component\HttpKernel\Event\FilterResponseEvent;
use Symfony\Component\HttpKernel\Kernel;
private $kernel;
public function __construct(Kernel $kernel) {
    $this->kernel = $kernel
}
public function onKernelResponse(FilterResponseEvent $event) {
    $this->isAppDev = ($this->kernel->getEnvironment() == "dev") ? true : false;
} 
```

在 config.yml 的底部：

```
services:
   my.listener:
       class: Path\To\Listener
       tags:
           - { name: kernel.event_listener, event: kernel.response }
       arguments: [@kernel] 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T18:02:14.980

[$event->getKernel()](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Event/KernelEvent.php#L31)返回一个实现[HttpKernelInterface](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/HttpKernelInterface.php)的对象。而[Kernel](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Kernel.php)或`AppKernel`实现了具有方法的[KernelInterface 。](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/KernelInterface.php)`getEnvironment`您必须`@kernel`在侦听器中注入服务。

# oracle - insert or update columns according weekend

> ID：10486175
> 
> 赞同：0
> 
> 时间：2012-05-07T17:13:02.690
> 
> 标签：oracle, plsql

> ```
> declare
>   str varchar2(4000);
>   i int;
> begin
>   for i in 1 ..31 loop
> 
>     str:= str || 'col' || i || ' varchar2(2)';
>     if i < 31 then
>        str := str || ',';
>     end if;
>   end loop;
>   execute immediate 'create table t1  ('|| str ||')';
> end;
> / 
> ```

I'm newbie in pl/sql this procedure creates t1 table with 31 columns. 31 is day of month (say May). I can't create the procedure which have condition like this : if col(i) i in ('Sat','Sun') ... insert into t1 value ('r') for example, this procedure must insert 'r' into col5,col6,col12,col13 .. columns because 5th,6th,12th,13th of may in Sun or Sat

```
 BEGIN   
   FOR i IN 1..31 LOOP
     IF( to_char(sysdate-1+i,'DAY')  IN ('SAT', 'SUN') )
     THEN
       INSERT INTO t1 (col(i))
         VALUES ('r');
     END IF;   
   END LOOP;  
 END;  
 / 
```

I tried with this procedure but there are several errors where must I correct my mistakes thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T07:01:15.377

I agree [with Bob Jarvis](https://stackoverflow.com/a/10491544/146325) that you ought to have a better data model. But just for grins let's assume you have to work with what you've got.

This procedure takes a month and year as parameters, and generates a range of days from them. I have given the MON_T table two columns, MON and YR as a primary key, because I can't help myself.

```
create or replace procedure gen_month_rec 
     ( p_mon in mon_t.mon%type
       ,  p_yr in mon_t.yr%type )
is
    lrec mon_t%rowtype;
    empty_rec mon_t%rowtype;
    first_dt date;
    last_d pls_integer;
begin
    lrec := empty_rec;
    lrec.mon := p_mon;
    lrec.yr := p_yr;

    first_dt := to_date('01-'||p_mon||'-'||p_yr, 'dd-mon-yyyy');
    last_d := to_number(to_char(last_day(first_dt),'dd'));

    for i in 1 .. last_d 
    loop
        if to_char(first_dt-+ (i-1),'DAY') in ('SAT', 'SUN') 
        then
            execute immediate 'begin lrec.col'
                                   ||trim(to_char(i))
                                   ||' := ''r''; end;';
        end if;
    end loop;

    insert into mon_t values lrec;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T01:58:54.127

I suggest that you read up on the rules of [data normalization](http://en.wikipedia.org/wiki/Normalization_%28database%29). It appears that this table suffers from a major problem in that it has what are known as "repeating groups" - in this case, 31 fields for information about each day. You probably need a table with the full date you're interested in, and then the fields which describe that date. Perhaps something like the following:

```
CREATE TABLE CALENDAR_DAY
  (CAL_DATE         DATE PRIMARY KEY,
   COL              NUMBER,
   <definitions of other fields needed for each day>); 
```

Given the above your code becomes

```
 DECLARE
   dtMonth_of_interest  DATE := TRUNC(SYSDATE, 'MONTH');
 BEGIN   
   FOR i IN 0..30 LOOP
     IF( to_char(dtMonth_of_interest+i,'DAY')  IN ('SAT', 'SUN') )
     THEN
       INSERT INTO CALENDAR_DAY (CAL_DATE, COL)
         VALUES (dtMonth_of_interest + i, 'r');
     END IF;   
   END LOOP;  
 END; 
```

Hopefully this gives you some ideas.

Share and enjoy.

# c# - 合并多个 mp3 文件

> ID：10486177
> 
> 赞同：0
> 
> 时间：2012-05-07T17:13:09.350
> 
> 标签：c#, javascript, bash

我正在寻找一种方法来自动合并在 windows 的指定文件夹中找到的任何 mp3 文件。是否有任何脚本可以完成此任务？我正在使用一个语音记录程序，它将一个文件分成 5 分钟的片段，所以我并不真正关心保留的任何标签信息。我只希望有一个包含整个录音的大音频文件，而不是 5-6 个不同的块。请让我知道这是否可能

谢谢

编辑：另一个要求是包含 mp3 文件的文件夹是结构化的，因此有多个前缀为 009 的 mp3 文件一起出现。那么有多个前缀为 010 的 mp3 文件都应该形成一个文件。例如，我需要它智能地连接所有 009 组文件和所有 010 组文件

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T17:19:46.093

这是一个示例代码，如何将包括 mp3 在内的任何文件合并在一起，假设您有文件 a、b、c，并且您想将它们全部合并到 c 一个文件中。

```
 byte[] a = File.ReadAllBytes(txt_a_path.Text);
      byte[] b = File.ReadAllBytes(txt_b_path.Text);
      byte[] c = new byte[a.Length + b.Length];
      a.CopyTo(c, 0);
      b.CopyTo(c, a.Length);
      File.WriteAllBytes(txt_c_path.Text, c); 
```

# jquery - js文件中的jQuery ajax

> ID：10486178
> 
> 赞同：2
> 
> 时间：2012-05-07T17:13:20.027
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor

我正在使用`ASP.Net-MVC3`并且我在

**布局.cshtml**：

```
$(function() {
    $.ajax({
        url: '@Url.Action("EtiketGetir", "Etiket")',
        type: "POST",
        data: {
            data: data
        },
        success: function(msg) {},
        error: function(msg) {}
    });​ 
```

这适用于`layout.cshtml`，但我复制了该代码并粘贴到`test.js`文件中，但它停止了工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T17:14:57.313

那是因为只有 razor 处理`@`标志，但它不处理`js`文件。

```
url: '@Url.Action("EtiketGetir", "Etiket")', 
```

有关解决方案，请阅读这篇文章：
[**asp.net-mvc：js 文件中的剃刀“@”符号**](https://stackoverflow.com/questions/7902213/asp-net-mvc-razor-symbol-in-js-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:31:07.600

在这些情况下，我通常做的是在我的 javascript 文件中创建一个初始化函数并将这些数据传递给它：

```
// test.js
(function(test, $, undefined) {
    test.initialize = function(options) {
        this.someUrl = options.someUrl;
    }

    test.someFunctionThatUsesUrl = function() {
        $.ajax({
            url: this.someUrl
        });
    }
})(window.test = window.test || {}, jQuery); 
```

然后在使用 test.js 的页面中，我将调用初始化函数：

```
<script type="text/javascript" src="test.js"></script>
<script type="text/javascript">
    test.initialize({
        someUrl: '@Url.Action("Index", "Home")'
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T13:39:32.360

我解决了使用此代码的问题

```
$(function() {
    $.ajax({
        url: '/ControllerName/IndexName/',
        type: "POST",
        data: {
            data: data
        },
        success: function(msg) {},
        error: function(msg) {}
    });​ 
```

# android - Android 上的滚动条

> ID：10486182
> 
> 赞同：3
> 
> 时间：2012-05-07T17:13:25.223
> 
> 标签：android, css, scroll, scrollbar, overflow

我正在使用`-webkit-scrollbar`属性在 iOS 和 Android 上显示滚动条，但是当我在 Android 设备上滚动容器时，内容会根据滚动条宽度闪烁。

我该如何解决这个问题？

```
#container {
    width: 200px;
    height: 200px;
    overflow-y: auto;
}

::-webkit-scrollbar {
    width: 5px; 
}

::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.5);
}

::-webkit-scrollbar-thumb {
    margin-right: 5px;
    border-radius: 5px;
    background: rgba(255,255,255,0.5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T09:22:53.123

这可以用一点 Javascript 来完成。

```
<script>
    // Add a .touch or .no-touch class to <html> based on device capability
    document.documentElement.setAttribute('class',
        'ontouchend' in document ? 'touch' : 'no-touch');
</script> 
```

（确保这一行放在**CSS 之前**——否则桌面浏览器不会设置 CSS 样式。）

`::webkit-scrollbar-*`用一个类预先修复，`.no-touch`以确保只有非触摸设备才能获得滚动条样式，而 Android 不会。

```
.no-touch ::-webkit-scrollbar {
    width: 5px; 
}
.no-touch ::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.5);
}
/* ... etc */ 
```

现在，非触摸设备将看到一个样式化的滚动条。触摸设备不会。

# php - 如何在 PHP 中制作“智能 404”重定向脚本？

> ID：10486183
> 
> 赞同：0
> 
> 时间：2012-05-07T17:13:27.150
> 
> 标签：php, redirect, http-status-code-404

## 所需场景：

当访问者到达通常返回 404 错误的 URL 时，脚本将首先自动发现是否有任何现有页面可以为该页面提供相关内容并将访问者从 404 页面重定向到匹配的相关 URL（如基于其他 404'ing URL 中的文本的自动“我感觉很幸运”搜索）。

如果没有现有页面被认为是相关的，那么“智能 404”系统会将用户传送到 404 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:19:54.247

您可以使用此脚本：[http ://bobpeers.com/technical/404_redirection](http://bobpeers.com/technical/404_redirection)

```
<?php 
$request=$_SERVER['REQUEST_URI'];

$arrMoved=array("/path/oldname.php"=>"/path/newname.php",
            "/old_path/oldname.php"=>"/new_path/newname.php");

if(array_key_exists($request,$arrMoved))
    {
    $newplace="http://".$_SERVER['HTTP_HOST'].$arrMoved[$request];
    header("HTTP/1.0 301 Moved Permanently");
    header("Location: $newplace");
    header("Connection: close");
    exit();
    }
else
    {
    header("HTTP/1.0 404 Not Found");
    }

?>

<!-- 
Your normal HTML code goes here since if a match is found the visitor will have been redirected. Only genuine 404 errors will see the HTML below.
 -->

<html>
  <head>
    <title>404 Error page</title>
  </head>
  <body>
    <p>Sorry but this page isn't here.</p>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:22:34.220

我建议检查 MultiViews。Apache 的 MultiViews 允许您将 URL 作为参数处理——这就是 WordPress、Drupal 和其他框架处理传入 URL 的方式。

以下是 Apache 文档中的一些文本，可帮助您理解：

" *MultiViews 选项启用了 MultiViews 搜索。如果服务器收到对 /some/dir/foo 的请求并且 /some/dir/foo 不存在，则服务器读取目录以查找所有名为 foo 的文件，并且有效地伪造了一个类型映射，它为所有这些文件命名，为它们分配相同的媒体类型和内容编码，如果客户端按名称要求其中一个，它将具有相同的媒体类型和内容编码。然后它选择最符合客户端要求的匹配，并返回那个文件。*

这在其他框架中的工作方式是 /some/dir/foo/other/parameters 导致“foo.php”被处理。foo.php 可以包含您的自定义代码来处理所有传入请求 - 包括花哨的 404、更好的 SEO URL 等等。

# android - 使用 XMPP 的推送通知和 C2MD 路线图

> ID：10486185
> 
> 赞同：-2
> 
> 时间：2012-05-07T17:13:27.773
> 
> 标签：android, xmpp, push-notification, server-push

我正计划在 android 应用程序中实现推送通知，我看到了很多与此相关的线程，但我专注于使用 XMPP，因为我已经安装了 ejabber。

我遇到了 aSmack 库，但我不知道该库对于 **pubusb 架构**的前景和稳定性有多大，因为该模型可以提供推送通知。

我想知道的是

1）即使接收推送通知的接收者也必须不断与ejabbered服务器连接？

2) 我应该怎么做才能获得 C2MD 的优势，因为使用 XMPP 和 aSmack 我认为我无法获得 C2MD 的优势

我试过几个图书馆

```
1) xtify         (paid)
2) urbanairship  (paid)
3) Android Cloud to Device Messaging ( must require google account ) 
```

所以我想最好用 XMPP 创建你自己的，任何人都可以帮助我解决上述问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:33:26.530

如果你想使用推送系统，你不必经常连接到 ejabberd。如果您更喜欢自己以电池优化的方式处理连接/重新连接，那么您不需要实现推送，因为 ejabberd 用作推送的通道。

# java - Android - 在开发和生产 Web 服务之间切换

> ID：10486189
> 
> 赞同：3
> 
> 时间：2012-05-07T17:13:48.897
> 
> 标签：java, android

我想让我的应用程序在开发和生产 Web 服务之间切换，而不需要对代码进行太多更改（并且相对简单）。

现在，我将 Web 服务地址作为`static final String`类中的变量，使用`static final boolean`.

现在虽然`boolean`很方便，但我不能用它来更改 Web 服务地址，因为它们本身就是`static final`变量。解决这个问题的最佳做法是什么？

我发现一些关于 SO 的讨论指向使用 Android SDK 提供`debug`的变量，但是虽然它可以替换`boolean`，但它并没有解决其他问题。

注意：如果您想知道，我正在静态使用 Web 服务类，所以我没有可以检查`debug`变量和更改变量的构造函数，而且我还希望它们是`static final`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T20:01:28.263

**更新**

使用`gradle`构建系统，这现在变得非常容易。您可以放置​​一个文件，例如`Server.java`带有开发服务器凭据的文件`src/debug/java`和带有生产凭据的文件`src/release/java`（假设您使用的是默认的 gradle 项目配置，请针对自定义进行相应调整）。然后，构建系统使用基于您的`buildType`.

更好的是，我现在有`release`文件使用`static final`变量，而对于`debug`构建，我使用`static`在代码中以完全相同的方式使用的变量（例如`Server.url`，`Server.username`等），但可以从开发抽屉中更改。什么是开发抽屉？有关这方面的示例，请参阅 Jake Wharton 的[u2020](https://github.com/JakeWharton/u2020)项目和相关演讲。

* * *

**旧答案**

我最终使用静态方法来访问另一个`static final boolean`定义调试状态的地址。像这样：

```
public static String getWSAddress() {
    if(DEVELOPMENT_MODE) {
        return "http://dev.server.com";
    }

    return "http://prod.server.com";
} 
```

从我读过的内容来看，由于`boolean`is `static final`，编译器将进行优化，并且条件代码将被删除，因为无法访问。

这似乎是解决此问题的合适解决方案，但 Android 文献指出，方法调用通常比直接变量访问更昂贵，因此无法确定这是否比 Chuck 提供的解决方案更好。

**编辑：**为了记录。我已经转向@Blundell 的解决方案。这太棒了。因此，如果您想要快速完成，我建议您从这个开始，但将其放在您的路线图上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T12:22:26.880

我答应过我会这样做，它是：

*   [http://blog.blundellapps.com/switching-android-configurations-using-constants-and-ant/](http://blog.blundellapps.com/switching-android-configurations-using-constants-and-ant/)
*   [http://blog.blundellapps.com/running-an-ant-script-with-eclipse/](http://blog.blundellapps.com/running-an-ant-script-with-eclipse/)

也反映在 GitHub 上：[https ://github.com/blundell/BuildChoiceTut](https://github.com/blundell/BuildChoiceTut)

通过本教程，您可以使用 Ant 构建脚本切换配置。

您在这里设置了一个名为 /config/ 的目录，您可以在其中保存用于不同配置的所有常量。每个文件一次，即 live.props dev.props beta.props

然后，当 Ant 运行时，它将读取选定的文件，并在编译之前将它们“注入”到您的构建中。

享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-29T12:08:36.613

您可以为您的应用程序使用**产品风味**，即一种风味`dev`用于`production`. 为每种口味赋予独特`applicationId`的风味。

`BuildConfig.APPLICATION_ID`然后在您的代码中，通过检查值并相应地使用 url来检查您正在使用的产品风味。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T19:09:50.670

如果您确实需要将配置置于静态最终常量中，则解决方案会稍微复杂一些。此解决方案还取决于在您的清单中正确设置 debuggable，因此它并不完全是万无一失的。

我能想到的帮助您记住 debuggable 的唯一方法是使用后面提到的调试标志将初始屏幕的背景颜色更改为红色。有点傻，但会工作。

您可以将地址变量声明为 static final 并且不为其赋值：

```
public static final String webServiceAddress; 
```

您可以使用以下方法获取有关您的应用程序是否设置为可调试的信息：

```
getApplicationInfo().flags; 
```

这意味着当您发布应用程序并在清单中将 debuggable 设置为 false 时，您仍然需要拨动开关，但无论如何您都应该这样做以关闭您不希望用户看到的日志消息。

在您的默认活动的 onCreate 中，您可以使用它来分支并分配正确的地址。这是一个完整的例子。

```
//Store release configuration here, using final constants
public class ReleaseConfig {

    //Don't set webServiceAddress yet
    public static final String webSericeAddress;
    public static boolean configSet = false;

    static
    {
        //Set it as soon as this class is accessed
        //As long as this class is first accessed after the main activity's onCreate
        //  runs, we can set this info in a final constant
        webServiceAddress = MainActivity.configuredAddress;
    }
}

public class MainActivity extends Activity {

    public static String configuredAddress;

    //This should be one of the first methods called in the activity
    public void onCreate(Bundle savedInstanceState)
    {
        //Figure out if we are in debug mode or not
        boolean debuggable = (0 != (getApplicationInfo().flags & ApplicationInfo.FLAG_DEBUGGABLE));

        //Save off our debug configuration
        if (debuggable) configuredAddress = "the debuggable address";
        else configuredAddress = "the production address";

        //Access the static class, which will run it's static init block
        //By the time this runs, we'll have the info we need to set the final constant
        ReleaseConfig.configSet = true;
    } 
```

# cocoa - 使用 NSUserDefaults 存储图像坐标

> ID：10486190
> 
> 赞同：0
> 
> 时间：2012-05-07T17:13:50.723
> 
> 标签：cocoa, nsuserdefaults

我在我的应用程序中移动图像，效果很好。问题是当用户返回该视图时，我想将图像保留在适当的位置。目前，我正在使用一个字符串来保存图像中心：

```
NSString *centre = NSStringFromCGPoint(image.center); 
```

我有一个名为 theCentre 的 NSUserDefault 变量：

```
theCentre = [NSUserDefaults standardUserDefaults]; 
```

我尝试使用以下方法保存：

```
[theCentre setObject:centre forKey:@"centre"]; 
```

当我输出日志时，我得到以下信息：

```
{280, 320} 
```

这很棒。在 viewDidLoad 中，我尝试了完全相同的日志，它正在返回（null）。我认为这意味着它没有正确保存 theCentre。我是否在这里遗漏了一些基本的东西，因为我在我的应用程序的其他地方使用了 NSUserDefaults 并且它工作正常。提前谢谢了。
编辑：这是尝试帮助调试的整个代码:)

```
-(void)getBounds
{
lowerBoundX = 250;
upperBoundX = 310;
lowerBoundY = 290;
upperBoundY = 350;

}

#pragma mark -
#pragma mark UIPanGestureRecognizer selector

- (void) dragGesture:(UIPanGestureRecognizer *) panGesture
{
 [self getBounds];

CGPoint translation = [panGesture translationInView:self.view];

switch (panGesture.state) {
    case UIGestureRecognizerStateBegan:{
        originalCentre = dragImage.center;
    }
        break;
    case UIGestureRecognizerStateChanged:{
        dragImage.center = CGPointMake(dragImage.center.x + translation.x,
                                       dragImage.center.y + translation.y);

    }
        break;
    case UIGestureRecognizerStateEnded:{            
        if (((dragImage.center.x >= lowerBoundX) && (dragImage.center.y >= lowerBoundY) &&
            (dragImage.center.x <= upperBoundX) && (dragImage.center.y <= upperBoundY))) {

            dragImage.center = CGPointMake(280, 320);
            [dragImage setUserInteractionEnabled:NO];

            theCentre = [NSUserDefaults standardUserDefaults];

        NSString *centre = NSStringFromCGPoint(dragImage.center);

            [theCentre setObject:centre forKey:@"centre"];

            NSLog(@"%@", [theCentre objectForKey:@"centre"]);
            [theCentre synchronize];

            break;
        }
        [UIView animateWithDuration:0.5 
                         animations:^{
                             dragImage.center = originalCentre;
                         }
                         completion:^(BOOL finished){
                         }];
    }
        break;
    default:
        break;
}

[panGesture setTranslation:CGPointZero inView:self.view];
}

-(IBAction)clear{
[UIImageView animateWithDuration:0.5 animations:^{
dragImage.center = CGPointMake(100, 200);
}];

[dragImage setUserInteractionEnabled:YES];
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

NSLog(@"%@", [theCentre objectForKey:@"centre"]);

UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(dragGesture:)];

[dragImage addGestureRecognizer:panGesture];

[dragImage setUserInteractionEnabled:YES];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:32:34.147

保存在[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)中的数据首先被缓存，因此不能从 NSUserDefaults 的其他实例立即获得。数据在一些预定义的事件/时间间隔上定期保存。[但是，您可以通过调用synchronize](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/synchronize)来强制数据同步，如下所示：

```
NSString *theCenter = NSStringFromCGPoint(image.center);
theCenter = [NSUserDefaults standardUserDefaults];
[theCenter setObject:centre forKey:@"center"];
[theCenter synchronize]; 
```

# java - 硒，点击元素，挂起

> ID：10486192
> 
> 赞同：8
> 
> 时间：2012-05-07T17:13:58.007
> 
> 标签：java, selenium, webdriver

这是关于 java 中的 selenium webdriver 的。如果单击一个元素，通常它会很快运行，但有时当服务器很忙时，它会在浏览器顶部显示 Connecting... 并挂起。通常处理等待，代码是：`driver.manage().timeouts().implicitlyWait(4, TimeUnit.SECONDS);` 但是在这种情况下，当服务器挂在 click() 上时，这不会在时间限制后抛出异常，因为 webdriver 直到 click 完成连接到下一个网址。以前有没有人处理过这个问题，如何处理？

有没有办法定时完成`click()`and `submit()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-11T17:27:26.457

Selenium 文档指出 Click() 块。如果出于任何原因，Selenium 认为页面没有完全加载，那么您的 Click 将挂起您的测试。

我发现最简单的解决方法是完全跳过点击事件并使用：

`element.SendKeys(Keys.Enter);`

反而。你得到一个特别的二付一 - 它不会阻止并且你正在测试可访问性，因为许多受损用户只使用键盘进行导航。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T20:04:18.017

是的，这是一个已知问题，从 Selenium 2.21.0 开始，有一种解决方法。

问题是隐式等待旨在在您搜索某些元素时等待卸载的元素，但该`click()`方法只是等待浏览器声明页面已完全加载。

试试[`driver.manage().timeouts().pageLoadTimeout()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#pageLoadTimeout%28long,%20java.util.concurrent.TimeUnit%29)这是 2.21.0 中的一种新方法，应该可以完全解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-25T18:18:45.733

当 selenium 挂起时，将您的 Firefox 版本更新为与 selenium 一样更新

# mysql - 如何在本地导入mysqldump文件

> ID：10486194
> 
> 赞同：0
> 
> 时间：2012-05-07T17:13:58.850
> 
> 标签：mysql, mysqlimport

我想在不使用网络接口的情况下将我的数据库“dbname”中的 sqldump 文件导入到表“data”中。

当我通过导入文件时

```
mysql dbname -u databaseuser -pdatabasepass<data.sql 
```

这在我的 ubuntu 12.04 上**真的很**慢

但是当我改用它时：

```
mysqlimport -u databaseuser -pdatabasepass --local data.sql 
```

它和平常一样快。

我想，因为在我的机器上，它在使用“mysql”和“<”时分别解析每一行

有没有办法使用 mysqlimport 语法来导入带有 CREATE 和 DROP TABLE 东西的 sql 文件？

也许只是自动拆分sql-dump中的上部（使用drop table和create table语句），然后只将带有INPUT语句的文件的其余部分发送到mysqlinsert，这应该可以

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:55:10.420

您可以使用（或 -S）[指定 UNIX 套接字文件的路径](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_socket)`--socket=/path/to/...`，这可能会更快。您可以在服务器的 my.cnf 中找到套接字路径。因此，例如（我只是在这里编造路径）；

```
mysql dbname -u databaseuser -pdatabasepass -S /var/run/mysqld/mysqld.sock < data.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T16:10:32.590

您可以使用此脚本：[如何将 mysqldump 的输出拆分为较小的文件？](https://stackoverflow.com/a/16840625/1069083)

并对其进行修改，因此您只有一个文件中的创建语句和另一个文件中的数据语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:52:54.743

没有办法直接做到这一点。您需要做的是运行`mysqldump --tab`而不是正常的 mysqldump，这将创建一个包含表定义的 .sql 文件和一个包含可以使用 mysqlimport 导入的数据的 CSV 文件。

# ruby-on-rails - NilClass:Class 的未定义方法“model_name” - 错误在哪里？

> ID：10486199
> 
> 赞同：0
> 
> 时间：2012-05-07T17:14:31.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我一直在尝试解决这个问题，但我看不到错误。

当我去`jobs/new`. 而不是看到我在视图中指定的形式。我收到 -`undefined method model_name' for NilClass:Class`

这是我定义新动作的控制器。

```
class JobsController < ApplicationController

  respond_to :html, :json

  ...

  def new
    @jobs = Job.new
    respond_with @jobs
  end 
```

还有我的看法。

```
<%= form_for(@jobs) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :client %><br />
    <%= f.text_area :client, rows: 6%>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

还有我的模特。

```
class Job < ActiveRecord::Base
  belongs_to :client
end 
```

根据我浏览器中的错误消息，错误的来源是第 1 行。但我可以看到我要去哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:40:28.150

这会起作用，但没有意义:)

```
def new
  @jobs = Job.new
  @jobs.client= CLient.new
  respond_with @jobs
end 
```

你想在你的`client`文本区域里放什么？

# ios - iOS 创建自定义/复合动作。脚本？激活器插件？

> ID：10486202
> 
> 赞同：0
> 
> 时间：2012-05-07T17:14:38.920
> 
> 标签：ios, scripting, jailbreak, ios5

虽然我是一名程序员，但我从未为任何 Apple 设备编写过代码。因此，我对 iOS 的特定知识和对其 API 的熟悉程度几乎不存在，所以请多多包涵。

我想从锁定屏幕（滑动、双击时钟等）创建一个动作，该动作将解锁并立即打开 App Switcher（我对扩展 ala SwitcherPlus 等不感兴趣）。我想这意味着编写一个小脚本，并且我可以使用一些有关 API 和其他基础知识的帮助（核心功能，不应该需要任何附带的东西）。如果需要，我愿意深入了解细节，但我对其他解决方案持开放态度。即使是像将多个 Activator 响应链接在一起这样高级别的东西也可以。

我`Ruby`在 Cydia/Scripting (Telesphoreo) 下看到。虽然我更喜欢 Python 甚至 Bash，但我的目的是相当小的 Ruby 就可以了。我宁愿不使用Objective-C。虽然我最初的目标是上述行为，但我可以看到自己希望在未来做类似的事情，所以一些关于一般知识的技巧将不胜感激。

如果不清楚，这纯粹是个人项目。我完全不关心包装、共享、向后兼容性、商业吸引力等

PS - 到目前为止，我将我的 Cydia 查看设置为“hacker”而不是“dev”。这种努力是否表明我应该将它提升到开发？这个词似乎有点慷慨，但如果它打开了我需要的包......

* * *

编辑：我使用 iPhone 4S，iOS 5.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:59:09.180

I don't think that this is possible in any scripting language. For one reason: You'll need to do code injection to achieve these goals (MobileSubstrate).

1) If you want to detect user interaction, you'll have to add ways to detect it or hook implementations which are already there. Even if you just wanna use Activator, you'll still have to develop a binary to register itself with Activator -> objC

2) There is no known way (at least to me) to interact with SpringBoard via scripts the way you want. So you'll have to make a binary which would execute the opening of the switcher.

I hope someone will have a better answer for you, but I'm very very sure that you won't get around using C/objC

There is a tool called [http://www.cycript.org/](http://www.cycript.org/) which is a bridge between JavaScript and objC, but I have never seen it being used for more than investigating.

# php - reCAPTCHA 的 javascript 提示框

> ID：10486204
> 
> 赞同：2
> 
> 时间：2012-05-07T17:14:45.177
> 
> 标签：php, javascript, prompt

我正在尝试制作一个显示错误 reCAPTCHA 输入错误的自动提示框，目前我有一个函数'redirect_to'，它链接到一个相同的页面，我打算只以文本形式输入一个错误。如果有人可以帮助我，我将不胜感激，我对javascript没有太多经验。

```
 require_once($_SERVER['DOCUMENT_ROOT'] . '/recaptcha/recaptchalib.php');
        $privatekey ="*********";
        $resp = recaptcha_check_answer ($privatekey,
                            $_SERVER['REMOTE_ADDR'],
                            $_POST['recaptcha_challenge_field'],
                            $_POST['recaptcha_response_field']);
        $str_result = "";
        if (!$resp->is_valid) {

            redirect_to("login_recap.php");

             // What happens when the CAPTCHA was entered incorrectly
            $message = "The reCAPTCHA wasn't entered correctly. Go back and try it again. (reCAPTCHA   said: " . $resp->error . ")";
            echo $message;
            exit();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:41:16.310

您可以使用 GET 参数重定向回登录页面，例如：`login.php?captchaError=1`. 然后在您的登录页面上，只需添加：

```
<?php
if(isset($_GET['captchaError]))
{
echo("<script type='text/javascript'>
alert("Captcha entered incorrectly.");
</script>
");
}
?> 
```

这将检查是否有错误并输出一些 JS 来显示警报。

# perl - Perl 时间、日期转换错误

> ID：10486208
> 
> 赞同：2
> 
> 时间：2012-05-07T17:14:55.257
> 
> 标签：perl, date, format

这是一个 perl 脚本，用于从 10 月 1 日开始连续 100 天每天拉取 sql 数据，并且 SQL 在日期格式（yyyy-mm-dd）方面非常挑剔，所以我编写了如下脚本。但是，在特定日期，2011-11-06，时间到日期转换不正确，开始日期和结束日期相同。

```
$srt_date='2011-11-06'
$end_date='2011-11-06' 
```

我不知道这是perl错误还是其他什么。

```
use DBI;
use DBD::Oracle qw(:ora_types);
use Compress::Zlib;
use FileHandle;
use Date::Parse;
use Date::Format;

$st_day=str2time('2011-10-1');

@days=(0..100);

foreach $daynum (@days){
$dt1 = $st_day+3600*(24*$daynum);
$dt2 = $st_day+3600*(24*($daynum+1));
$srt_date = time2str("%d-%h-%Y", $dt1);
$end_date = time2str("%d-%h-%Y", $dt2);
print $srt_date, ',' ,$end_date, '\n';
my $sqlGetEid = "select x,y from z where DATETIME>='$srt_date' and DATETIME<'$end_date'";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:06:37.480

以下是[`DateTime`](https://metacpan.org/module/DateTime)正确处理 DST 转换的方法：

```
use strict; #ALWAYS!
use warnings; #ALWAYS!
use DateTime;

my $st_day = '2011-10-1';

my ($year, $month, $day) = split /-/, $st_day;

my $dt = DateTime->new(
    year => $year,
    month => $month,
    day => $day,
    time_zone => 'local',
);

my @days = 0..100;
foreach my $daynum (@days) {
    my $dt1 = $dt->ymd;
    my $dt2 = $dt->add(days => 1)->ymd;
    printf "%s,%s\n", $dt1, $dt2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:51:40.317

我不确定您到底想达到什么目标，但是当您可以摆脱以下情况时，为什么还要麻烦执行 100 条 SQL 语句：

```
SELECT trunc(datetime, 'DD') truncdate, x,y
FROM z WHERE datetime between '2011-10-01'
AND to_date('20111001', 'YYYYMMDD') + 99 
```

使用 as 键填充散列，如果您的日期是 ISO 8601，您将通过使用常规 ( ) 排序`truncdate`遍历散列来获得相同的排序。`cmp`

**编辑**：我会澄清你如何做到这一点：

```
my $sth = $mdbh->prepare("SELECT trunc(datetime, 'DD') truncdate, x,y
    FROM z WHERE datetime between '2011-10-01'
    AND to_date('20111001', 'YYYYMMDD') + 99
    ORDER BY truncdate");
$sth->execute();

my $lastdate = "";
my $fh;    

while (my $row = $sth->fetchrow_hashref()) {

    # If new date, create new file
    if ($row->{truncdate} ne $lastdate) {
        close($fh) if $fh;
        open($fh, ">", "$row->{truncdate}.csv") or die "Unable to create file '$row->{truncdate}.csv': $!\n";
    }

    print $fh "$row->{x},$row->{y}\n";
    $lastdate = $row->{truncdate};
}
close($fh) if $fh; 
```

# python - Mysql更新语法错误Python

> ID：10486211
> 
> 赞同：0
> 
> 时间：2012-05-07T17:14:57.517
> 
> 标签：python, sql-update, mysql-python

我一直在关注这个先前的答案，但是我仍然收到语法错误：

[堆栈溢出答案](https://stackoverflow.com/a/1307413/578582)

```
 cursor.execute ("""
   UPDATE tblTableName
   SET Year=%s, Month=%s, Day=%s, Hour=%s, Minute=%s
   WHERE Server=%s
   """, (Year, Month, Day, Hour, Minute, ServerID)) 
```

我的代码是：

```
def postToMySQL(data,fieldname,table,col):
if fieldname == "Year":
    sql = "INSERT INTO " + table + " ("+ fieldname + ") VALUES (%s)"
    c.execute(sql, data)
else:
    c.execute ("""
   UPDATE %s
   SET US=%s
   WHERE ID=%s
    """, (table, data, col)) 
```

然后该表如下所示：

![堆栈溢出答案](../Images/6b9c60b39fceb7224688a7a46c911649.png)

语法错误是：

> _mysql_exceptions.ProgrammingError: (1064..near ''OilProvedReservesHistory' SET US = '36.533' WHERE ID=1' at line 1'

你能发现错误吗？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:20:57.940

应该是这样的，没有引号

设置我们 = '36.533'

你可以试试这个：

```
UPDATE %s
   SET US=%s
   WHERE ID=%s 
```

# android - 通过单个对话框一次显示一个对象数组...而不是多个对话框

> ID：10486214
> 
> 赞同：1
> 
> 时间：2012-05-07T17:15:09.427
> 
> 标签：android, android-dialog

在我的应用程序中，我有一个存储在 ArrayList 中的问题列表，我想显示一个对话框，显示一个问题，然后在回答完问题后继续下一个问题。我目前正在这样做的方式（通过循环迭代）并没有奏效，因为它只是一次将所有对话框叠加在一起，这会导致许多其他问题。我正在寻找的是一种仍然遍历问题的方法，但每次只需更改对话框的布局，直到它完成列表中的每个问题。任何人都可以给我一个很好的指导如何让这件事发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:35:29.323

我假设您的意思是您只想更改 1 个单一布局（在 XML 即 main.xml 中创建）。为此，请确保您处理的类指向该布局。从那里（假设您在用户提交答案时使用事件侦听器）您可以通过以下方式更改您想要的操作：

```
TextView txt = (TextView) findViewById(R.id.textView); // references the txt XML element 
```

在您的事件侦听器中，如果答案正确，则更改（我是否是最初设置为 0 的全局变量）。

```
if(i<arrayList.size()){
     txt.setText(arrayList.get(++i));
}else{
     txt.setText("You Finished");
} 
```

从那里，在 else 语句中，您可以更改 arrayLists 并将 i 重置为 0；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:25:28.097

您可以创建一个函数，将标题和消息作为参数并显示一个对话框。

```
showDialog(String title, String message){ // Show dialog code here} 
```

在该对话框的应答按钮的侦听器中调用另一个函数 (showQuestion(currentQuestion)) 迭代 arrayList 直到它结束

```
int currentQuestion=0;
ArrayList<QuestionObject> questionList;

showQuestion(int i){
  if(i<questionList.size()){
  showDialog(questionList.get(i).getTitle,questionList.get(i).getMessage);
  currentQuestion++;
  }else{
   //quiz is over
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:28:28.600

如果您尝试使用正面、中性和负面按钮；那么您可能会遇到多个对话框的问题。尝试使用您自己的 TextView、ListView 和 Button 定义自定义布局。您可以像常规布局一样实现侦听器和其他所有内容。然后只需将您的自定义布局通过`AlertDialog.Builder.setView()`.

**PS**如果您包含您当前正在执行的操作的代码示例，我们可以提供不那么模糊的答案。

# apache-flex - 如何将工作 s:TextInput 添加到 as:Datagrid HeaderRenderer？

> ID：10486218
> 
> 赞同：2
> 
> 时间：2012-05-07T17:15:47.007
> 
> 标签：apache-flex, flex4, itemrenderer, flex-spark

我需要/想要在`s:TextInput`我的一些数据网格的标题中添加一个来为表格提供过滤功能（想法是：“在输入字段中键入文本，按 Enter，数据网格被过滤”）。现在我正在使用 HeaderRenderer 来开发`s:TextInput`，但也会有使用`s:CheckBoxes`and的渲染器`s:DropDownLists`。

我正在尝试使用自定义 RendererSkin 执行此操作，但遇到了几个问题：

1.  您不能输入`s:TextInput`（尽管鼠标悬停时光标变为 I-Beam 并且控件获得焦点边框）。
2.  在与标题交互几次后，`s:TextInputs`似乎“泄漏”了某种白色矩形（见截图）。
3.  `verticalAlign="bottom"`似乎不像我认为的那样工作。

* * *

到目前为止，我的 HeaderRenderer 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<s:DefaultGridHeaderRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx"
    mouseEnabledWhereTransparent="true">
    <fx:Script>
        <![CDATA[
            import spark.components.DataGrid;
            import spark.components.GridColumnHeaderGroup;
            import spark.components.TextInput;
            import spark.components.gridClasses.GridColumn;
            import spark.components.gridClasses.IGridVisualElement;
            import spark.primitives.supportClasses.GraphicElement;

            import mx.collections.ArrayCollection;
            import mx.core.IFactory;
            import mx.core.IVisualElement;
            import mx.events.FlexEvent;

            // chrome color constants and variables
            private static const DEFAULT_COLOR_VALUE:uint = 0xCC;

            private static const DEFAULT_COLOR:uint = 0xCCCCCC;

            private static const DEFAULT_SYMBOL_COLOR:uint = 0x000000;

            private static var colorTransform:ColorTransform = new ColorTransform();

            private function dispatchChangeEvent(type:String):void {
                if (hasEventListener(type))
                    dispatchEvent(new Event(type));
            }

            // ----------------------------------
            // maxDisplayedLines
            // ----------------------------------
            private var _maxDisplayedLines:int = 1;

            [Bindable("maxDisplayedLinesChanged")]
            [Inspectable(minValue="-1")]
            override public function get maxDisplayedLines():int {
                return _maxDisplayedLines;
            }

            /**
             *  @private
             */
            override public function set maxDisplayedLines(value:int):void {
                if (value == _maxDisplayedLines)
                    return;

                _maxDisplayedLines = value;
                if (labelDisplay)
                    labelDisplay.maxDisplayedLines = value;

                invalidateSize();
                invalidateDisplayList();

                dispatchChangeEvent("maxDisplayedLinesChanged");
            }

            // ----------------------------------
            // sortIndicator
            // ----------------------------------
            private var _sortIndicator:IFactory;

            private var sortIndicatorInstance:IVisualElement;

            [Bindable("sortIndicatorChanged")]
            override public function get sortIndicator():IFactory {
                return (_sortIndicator) ? _sortIndicator : defaultSortIndicator;
            }

            override public function set sortIndicator(value:IFactory):void {
                if (_sortIndicator == value)
                    return;

                _sortIndicator = value;
                if (sortIndicatorInstance) {
                    sortIndicatorGroup.includeInLayout = false;
                    sortIndicatorGroup.removeElement(sortIndicatorInstance);
                    sortIndicatorInstance = null;
                }

                invalidateDisplayList();
                dispatchChangeEvent("sortIndicatorChanged");
            }

            override public function prepare(hasBeenRecycled:Boolean):void {
                super.prepare(hasBeenRecycled);

                if (labelDisplay && labelDisplayGroup && (labelDisplay.parent != labelDisplayGroup)) {
                    labelDisplayGroup.removeAllElements();
                    labelDisplayGroup.addElement(labelDisplay);
                }

                if (labelDisplayGroup.numChildren < 2) {
                    var filter:TextInput = new TextInput();
                    filter.percentWidth = 100;
                    filter.addEventListener(FlexEvent.ENTER, filter_handleEnter);
                    filterDisplayGroup.addElement(filter);
                }

                const column:GridColumn = this.column;
                if (sortIndicator && column && column.grid && column.grid.dataGrid && column.grid.dataGrid.columnHeaderGroup) {
                    const dataGrid:DataGrid = column.grid.dataGrid;
                    const columnHeaderGroup:GridColumnHeaderGroup = dataGrid.columnHeaderGroup;

                    if (columnHeaderGroup.isSortIndicatorVisible(column.columnIndex)) {
                        if (!sortIndicatorInstance) {
                            sortIndicatorInstance = sortIndicator.newInstance();
                            sortIndicatorGroup.addElement(sortIndicatorInstance);
                            chromeColorChanged = true;
                            invalidateDisplayList();
                        }

                        // Initialize sortIndicator
                        sortIndicatorInstance.visible = true;
                        const gridVisualElement:IGridVisualElement = sortIndicatorInstance as IGridVisualElement;
                        if (gridVisualElement)
                            gridVisualElement.prepareGridVisualElement(column.grid, -1, column.columnIndex);

                        sortIndicatorGroup.includeInLayout = true;
                        sortIndicatorGroup.scaleY = (column.sortDescending) ? 1 : -1;
                    } else {
                        if (sortIndicatorInstance) {
                            sortIndicatorGroup.removeElement(sortIndicatorInstance);
                            sortIndicatorGroup.includeInLayout = false;
                            sortIndicatorInstance = null;
                        }
                    }
                }
            }

            private var chromeColorChanged:Boolean = false;

            private var colorized:Boolean = false;

            override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void {
                // Apply chrome color
                if (chromeColorChanged) {
                    var chromeColor:uint = getStyle("chromeColor");

                    if (chromeColor != DEFAULT_COLOR || colorized) {
                        colorTransform.redOffset = ((chromeColor & (0xFF << 16)) >> 16) - DEFAULT_COLOR_VALUE;
                        colorTransform.greenOffset = ((chromeColor & (0xFF << 8)) >> 8) - DEFAULT_COLOR_VALUE;
                        colorTransform.blueOffset = (chromeColor & 0xFF) - DEFAULT_COLOR_VALUE;
                        colorTransform.alphaMultiplier = alpha;

                        transform.colorTransform = colorTransform;

                        var exclusions:Array = [labelDisplay, sortIndicatorInstance];

                        // Apply inverse colorizing to exclusions
                        if (exclusions && exclusions.length > 0) {
                            colorTransform.redOffset = -colorTransform.redOffset;
                            colorTransform.greenOffset = -colorTransform.greenOffset;
                            colorTransform.blueOffset = -colorTransform.blueOffset;

                            for (var i:int = 0; i < exclusions.length; i++) {
                                var exclusionObject:Object = exclusions[i];

                                if (exclusionObject && (exclusionObject is DisplayObject || exclusionObject is GraphicElement)) {
                                    colorTransform.alphaMultiplier = exclusionObject.alpha;
                                    exclusionObject.transform.colorTransform = colorTransform;
                                }
                            }
                        }

                        colorized = true;
                    }

                    chromeColorChanged = false;
                }

                super.updateDisplayList(unscaledWidth, unscaledHeight);
            }

            override public function styleChanged(styleProp:String):void {
                var allStyles:Boolean = !styleProp || styleProp == "styleName";

                super.styleChanged(styleProp);

                if (allStyles || styleProp == "chromeColor") {
                    chromeColorChanged = true;
                    invalidateDisplayList();
                }
            }

            private function filter_handleEnter(event:FlexEvent):void {
                if (this.grid.dataProvider is ArrayCollection) {
                    (this.grid.dataProvider as ArrayCollection).refresh();
                }
            }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <fx:Component id="defaultSortIndicator">
            <s:Path data="M 3.5 7.0 L 0.0 0.0 L 7.0 0.0 L 3.5 7.0" implements="spark.components.gridClasses.IGridVisualElement">
                <fx:Script>
                    <![CDATA[
                        import spark.components.DataGrid;
                        import spark.components.Grid;

                        public function prepareGridVisualElement(grid:Grid, rowIndex:int, columnIndex:int):void {
                            const dataGrid:DataGrid = grid.dataGrid;
                            if (!dataGrid)
                                return;

                            const color:uint = dataGrid.getStyle("symbolColor");
                            arrowFill1.color = color;
                            arrowFill2.color = color;
                        }
                    ]]>
                </fx:Script>

                <s:fill>
                    <s:RadialGradient rotation="90" focalPointRatio="1">
                        <s:GradientEntry id="arrowFill1" color="0" alpha="0.6"/>

                        <s:GradientEntry id="arrowFill2" color="0" alpha="0.8"/>
                    </s:RadialGradient>
                </s:fill>
            </s:Path>
        </fx:Component>

        <s:Label id="labelDisplay" verticalCenter="1" left="0" right="0" top="0" bottom="0" textAlign="start"
            fontWeight="bold" verticalAlign="bottom" maxDisplayedLines="1" showTruncationTip="true"/>
    </fx:Declarations>

    <s:states>
        <s:State name="normal"/>
        <s:State name="hovered"/>
        <s:State name="down"/>
    </s:states>

    <!-- layer 1: shadow -->

    <s:Rect id="shadow" left="-1" right="-1" top="-1" bottom="-1" radiusX="2">
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0x000000" color.down="0xFFFFFF" alpha="0.01" alpha.down="0"/>

                <s:GradientEntry color="0x000000" color.down="0xFFFFFF" alpha="0.07" alpha.down="0.5"/>
            </s:LinearGradient>
        </s:fill>
    </s:Rect>

    <!-- layer 2: fill -->

    <s:Rect id="fill" left="0" right="0" top="0" bottom="0">
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0xFFFFFF" color.hovered="0xBBBDBD" color.down="0xAAAAAA" alpha="0.85"/>

                <s:GradientEntry color="0xD8D8D8" color.hovered="0x9FA0A1" color.down="0x929496" alpha="0.85"/>
            </s:LinearGradient>
        </s:fill>
    </s:Rect>

    <!-- layer 3: fill lowlight -->

    <s:Rect id="lowlight" left="0" right="0" top="0" bottom="0">
        <s:fill>
            <s:LinearGradient rotation="270">
                <s:GradientEntry color="0x000000" ratio="0.0" alpha="0.0627"/>

                <s:GradientEntry color="0x000000" ratio="0.48" alpha="0.0099"/>

                <s:GradientEntry color="0x000000" ratio="0.48001" alpha="0"/>
            </s:LinearGradient>
        </s:fill>
    </s:Rect>

    <!-- layer 4: fill highlight -->

    <s:Rect id="highlight" left="0" right="0" top="0" bottom="0">
        <s:fill>
            <s:LinearGradient rotation="90">
                <s:GradientEntry color="0xFFFFFF" ratio="0.0" alpha="0.33" alpha.hovered="0.22" alpha.down="0.12"/>

                <s:GradientEntry color="0xFFFFFF" ratio="0.48" alpha="0.33" alpha.hovered="0.22" alpha.down="0.12"/>

                <s:GradientEntry color="0xFFFFFF" ratio="0.48001" alpha="0"/>
            </s:LinearGradient>
        </s:fill>
    </s:Rect>

    <!-- layer 5: highlight stroke (all states except down) -->

    <s:Rect id="highlightStroke" left="0" right="0" top="0" bottom="0" excludeFrom="down">
        <s:stroke>
            <s:LinearGradientStroke rotation="90" weight="1">
                <s:GradientEntry color="0xFFFFFF" alpha.hovered="0.22"/>

                <s:GradientEntry color="0xD8D8D8" alpha.hovered="0.22"/>
            </s:LinearGradientStroke>
        </s:stroke>
    </s:Rect>

    <!-- layer 6: highlight stroke (down state only) -->

    <s:Rect id="hldownstroke1" left="0" right="0" top="0" bottom="0" includeIn="down">
        <s:stroke>
            <s:LinearGradientStroke rotation="90" weight="1">
                <s:GradientEntry color="0x000000" alpha="0.25" ratio="0.0"/>

                <s:GradientEntry color="0x000000" alpha="0.25" ratio="0.001"/>

                <s:GradientEntry color="0x000000" alpha="0.07" ratio="0.0011"/>

                <s:GradientEntry color="0x000000" alpha="0.07" ratio="0.965"/>

                <s:GradientEntry color="0x000000" alpha="0.00" ratio="0.9651"/>
            </s:LinearGradientStroke>
        </s:stroke>
    </s:Rect>

    <s:Rect id="hldownstroke2" left="1" right="1" top="1" bottom="1" includeIn="down">
        <s:stroke>
            <s:LinearGradientStroke rotation="90" weight="1">
                <s:GradientEntry color="0x000000" alpha="0.09" ratio="0.0"/>

                <s:GradientEntry color="0x000000" alpha="0.00" ratio="0.0001"/>
            </s:LinearGradientStroke>
        </s:stroke>
    </s:Rect>

    <s:VGroup bottom="5" left="7" right="7" top="5" gap="2" verticalAlign="bottom">
        <s:Group id="filterDisplayGroup" width="100%"/>

        <s:HGroup bottom="5" left="7" right="7" top="5" gap="2" verticalAlign="bottom">
            <s:Group id="labelDisplayGroup" width="100%" left="8" right="8"/>

            <s:Group id="sortIndicatorGroup" includeInLayout="false"/>
        </s:HGroup>
    </s:VGroup>
</s:DefaultGridHeaderRenderer> 
```

* * *

所以基本上，我想要的是这个（基本上是[这个 800 美元的数据网格组件](http://flexicious.com/Home/DemoFlex4)的更简单的形式）：

![在此处输入图像描述](../Images/61986fba769b2669b4e9549b38f549fd.png)

我目前拥有的是这个（有上述问题）：

![在此处输入图像描述](../Images/7460f7238c172bce6a628a87863da6ae.png) ![在此处输入图像描述](../Images/41e7eafbfe4f2254e7433f567242f044.png)

*   “Longname”列在鼠标悬停时显示白色“泄漏”
*   “ `s:TextInput`Shortname”列中的似乎有焦点，但您无法输入
*   “Id”列的标签仍然垂直居中，虽然它应该在底部

* * *

谁能给我一个提示我的渲染器出了什么问题（主要是为什么我不能在输入字段中输入的雀斑以及这个白色的东西是从哪里来的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:10:28.437

数据网格：

```
<mx:DataGrid id="myGrid" dataProvider="{initDG}" variableRowHeight="true"> 
    <mx:columns>
        <mx:DataGridColumn headerText="col1"/>
        <mx:DataGridColumn headerText="col2"/>
        <mx:DataGridColumn headerText="col3"/>
        <mx:DataGridColumn headerRenderer="col4DGheaderRenderer"/>
    </mx:columns>       
</mx:DataGrid> 
```

然后是 col4DGheaderRenderer 的完整代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:s="library://ns.adobe.com/flex/spark">
    <s:TextInput/>
    <mx:Label text="label text"/>
</mx:VBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:20:39.817

正如我们在评论中讨论的那样，您的代码中有很多东西可能是不当行为的来源。我碰巧有一个标题渲染器，它具有非常相似的功能，可以完美运行。因此，我将在这里转储代码，您就可以开始工作了。

一些注意事项：

*   此渲染器具有简化的图形：您可以将默认 Spark 渲染器的图形粘贴回去并替换我的`fill`组件）
*   它扩展了 GridItemRenderer 而不是 DefaultGridHeaderRenderer（如评论中所述）
*   它通过 mxml 添加 TextInput，而不是通过 ActionScript 动态添加，从而降低了复杂性

.

```
<s:GridItemRenderer minWidth="21" minHeight="21"
                xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:vmm="library://ns.vmm.be/flex/components">

<fx:Declarations>
    <fx:Component id="defaultSortIndicator">
        <s:Path data="M 3.5 7.0 L 0.0 0.0 L 7.0 0.0 L 3.5 7.0" implements="spark.components.gridClasses.IGridVisualElement">

            <s:fill>
                <s:RadialGradient rotation="90" focalPointRatio="1">    
                    <s:GradientEntry id="arrowFill1" color="0" alpha="0.6" />
                    <s:GradientEntry id="arrowFill2" color="0" alpha="0.8" />
                </s:RadialGradient>
            </s:fill>
        </s:Path>
    </fx:Component>

    <s:Label id="labelDisplay" verticalCenter="1" left="0" right="0" top="0" bottom="0"
             textAlign="start" verticalAlign="middle" maxDisplayedLines="1" showTruncationTip="true"
             color.normal="0x555555" color="0x90a938" fontWeight="bold" />
</fx:Declarations>

<fx:Script>
    <![CDATA[
        import spark.components.gridClasses.IGridVisualElement;
        import mx.core.IVisualElement;

        import spark.components.DataGrid;
        import spark.components.GridColumnHeaderGroup;
        import spark.components.gridClasses.GridColumn;
        import spark.primitives.supportClasses.GraphicElement;

        private function dispatchChangeEvent(type:String):void {
            if (hasEventListener(type)) dispatchEvent(new Event(type));
        }            

        //----------------------------------
        //  maxDisplayedLines
        //----------------------------------

        private var _maxDisplayedLines:int = 1;

        [Bindable("maxDisplayedLinesChanged")]
        [Inspectable(minValue="-1")]
        public function get maxDisplayedLines():int {
            return _maxDisplayedLines;
        }

        public function set maxDisplayedLines(value:int):void {
            if (value == _maxDisplayedLines) return;

            _maxDisplayedLines = value;
            if (labelDisplay) labelDisplay.maxDisplayedLines = value;

            invalidateSize();
            invalidateDisplayList();

            dispatchChangeEvent("maxDisplayedLinesChanged");
        }

        //----------------------------------
        //  sortIndicator
        //----------------------------------

        private var _sortIndicator:IFactory;
        private var sortIndicatorInstance:IVisualElement;

        [Bindable("sortIndicatorChanged")]
        public function get sortIndicator():IFactory {
            return (_sortIndicator) ? _sortIndicator : defaultSortIndicator;
        }

        public function set sortIndicator(value:IFactory):void {
            if (_sortIndicator == value) return;

            _sortIndicator = value;
            if (sortIndicatorInstance) {
                sortIndicatorGroup.includeInLayout = false;
                sortIndicatorGroup.removeElement(sortIndicatorInstance);
                sortIndicatorInstance = null;
            }

            invalidateDisplayList();
            dispatchChangeEvent("sortIndicatorChanged");
        }

        override public function prepare(hasBeenRecycled:Boolean):void {
            super.prepare(hasBeenRecycled);

            if (labelDisplay && labelDisplayGroup && (labelDisplay.parent != labelDisplayGroup)) {
                labelDisplayGroup.removeAllElements();
                labelDisplayGroup.addElement(labelDisplay);
            }

            const column:GridColumn = this.column;
            if (sortIndicator && column && column.grid && column.grid.dataGrid && column.grid.dataGrid.columnHeaderGroup) {
                const dataGrid:DataGrid = column.grid.dataGrid;
                const columnHeaderGroup:GridColumnHeaderGroup = dataGrid.columnHeaderGroup;

                if (columnHeaderGroup.isSortIndicatorVisible(column.columnIndex)) {
                    if (!sortIndicatorInstance) {
                        sortIndicatorInstance = sortIndicator.newInstance();
                        sortIndicatorGroup.addElement(sortIndicatorInstance);
                        invalidateDisplayList();
                    }

                    // Initialize sortIndicator
                    sortIndicatorInstance.visible = true;
                    const gridVisualElement:IGridVisualElement = sortIndicatorInstance as IGridVisualElement;
                    if (gridVisualElement)
                        gridVisualElement.prepareGridVisualElement(column.grid, -1, column.columnIndex);

                    sortIndicatorGroup.includeInLayout = true;
                    sortIndicatorGroup.scaleY = (column.sortDescending) ? 1 : -1;
                }
                else if (sortIndicatorInstance) {
                    sortIndicatorGroup.removeElement(sortIndicatorInstance);
                    sortIndicatorGroup.includeInLayout = false;
                    sortIndicatorInstance = null;
                }
            }
        }

        override public function styleChanged(styleProp:String):void {
            var allStyles:Boolean = !styleProp || styleProp == "styleName";
            super.styleChanged(styleProp);
            if (allStyles) invalidateDisplayList();
        }
    ]]>
</fx:Script>

<s:states>
    <s:State name="normal" />
    <s:State name="hovered" />
    <s:State name="down" />
</s:states>      

<s:Rect id="fill" left="0" right="0" top="0" bottom="0">
    <s:fill>
        <s:LinearGradient rotation="90">
            <s:GradientEntry color.normal="0xf9f9f9" color.hovered="0xfcfdfa" 
                             color.down="0xdceac2" alpha="0.85" />
            <s:GradientEntry color.normal="0xeaeaea" color.hovered="0xdceac2"
                             color.down="0xd2e1b5" alpha="0.85" />
        </s:LinearGradient>
    </s:fill>
</s:Rect>

<s:VGroup left="7" right="7" top="5" bottom="5" gap="6" verticalAlign="middle">
    <s:TextInput width="100%" />
    <s:HGroup width="100%">
        <s:Group id="labelDisplayGroup" width="100%" />
        <s:Group id="sortIndicatorGroup" includeInLayout="false" />
    </s:HGroup>
</s:VGroup>

</s:GridItemRenderer> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:19:45.420

下面的代码向您展示了如何使用 Header Renderer 将输入框放入 Header 中。我希望这能解决问题。

```
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        protected function button1_clickHandler(event:MouseEvent):void
        {
            Alert.show(s.headerText);

        }
    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<mx:DataGrid id="myGrid" x="-4" y="0" width="528" horizontalScrollPolicy="off"
             variableRowHeight="true" verticalScrollPolicy="off"> 
    <mx:columns>
        <mx:DataGridColumn headerText="col1"/>
        <mx:DataGridColumn headerText="col2"/>
        <mx:DataGridColumn headerText="col3"/>
        <mx:DataGridColumn  id="s">
        <mx:headerRenderer>
            <fx:Component>
                    <mx:VBox >
                        <s:TextInput width="{outerDocument.s.width}" id="p" change="{outerDocument.s.headerText=p.text}"/>
                        <s:Label text="col4"/>
                    </mx:VBox>  
            </fx:Component>
        </mx:headerRenderer>
        </mx:DataGridColumn>
    </mx:columns>       
</mx:DataGrid>
<s:Button x="10" y="150" label="click" click="button1_clickHandler(event)"/> 
```

# php - 在小于指定时间的表上选择值

> ID：10486220
> 
> 赞同：-2
> 
> 时间：2012-05-07T17:15:51.330
> 
> 标签：php, mysql

我有这些mysql表，

```
 -------------------------------------------------------------------
 |   products_id   |   date_added              |  date_modified    |
 | -----------------------------------------------------------------
 |    1            |   2012-03-31 15:36:01     |  2012-5-03 00:00  | 
 | -----------------------------------------------------------------
 |    2            |   2012-03-31 15:38:01     |  2012-5-04 00:00  | 
 | -----------------------------------------------------------------
 |    3            |   2012-03-31 15:40:01     |  NULL             | 
 ------------------------------------------------------------------- 
```

我想根据选定的时间显示值，其中值不为空。

如果 date_modified 具有日期值，则使用 date_modified 作为其日期。如果它为 NULL，则使用 date_added 作为其日期。

```
if($_get['duration'] =="0") {
  $duration = <select all regardless of date>;
} 
elseif ($_get['duration'] =="24") {
  $duration = <select all that less than 24 hours>;
} 
elseif ($_get['duration'] =="15") {
  $duration = <select all that less than 15 days>;
} 
```

这是我的mysql查询，

```
$catglobal_sql = "select blog_id, global_category_id, products_id, products_currency, products_type, products_name, products_description, products_quantity, products_model, products_image, products_price, products_date_added, products_last_modified, products_date_available, products_weight, products_status, products_tax_class_id, manufacturers_id, products_ordered, specials_new_products_price, specials_date_added, specials_last_modified, expires_date, date_status_change, status, display_product, case when (specials_new_products_price > 0 and expires_date > Now() and status != 0) then specials_new_products_price else products_price end price from " . TABLE_GLOBAL_PRODUCTS . " where products_name like '%" . $search_key . "%' and products_currency = '" . $currency_key . "' and display_product = '1' and products_status = '1' having price >= ".$pricefrom_key." and price <= ".$priceto_key." order by products_date_added DESC, products_name"; 
```

想不出解决办法。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:26:44.490

假设您要使用`expires_date`日期并且它的类型是`date`或`datetime`

```
$duration = "";
if ($_get['duration'] == "24") {
  $duration = " AND DATE_SUB(expires_date, INTERVAL 24 HOUR) > NOW() ";
} 
elseif ($_get['duration'] == "15") {
  $duration = " AND DATE_SUB(expires_date, INTERVAL 15 DAY) > NOW() ";
}

$catglobal_sql = "select 
    <your_fields>
    FROM " . TABLE_GLOBAL_PRODUCTS . " 
    WHERE 
        products_name like '%" . $search_key . "%' and 
        products_currency = '" . $currency_key . "' and 
        display_product = '1' and 
        products_status = '1' 
        $duration
        HAVING price >= ".$pricefrom_key." and price <= ".$priceto_key." 
    ORDER BY products_date_added DESC, products_name"; 
```

# python - 瓶静态文件

> ID：10486224
> 
> 赞同：25
> 
> 时间：2012-05-07T17:16:00.347
> 
> 标签：python, python-2.7, bottle

我已经尝试阅读 Bottle 的文档，但是，我仍然不确定静态文件服务是如何工作的。我有一个`index.tpl`文件，里面有一个 css 文件，它可以工作。但是，我读到 Bottle 不会自动提供 css 文件，如果页面加载正确，这是不可能的。

但是，我在请求页面时遇到了速度问题。是因为我没用`return static_file(params go here)`吗？如果有人能弄清楚它们是如何工作的，以及在加载页面时如何使用它们，那就太好了。

服务器代码：

```
from Bottle import route,run,template,request,static_file

@route('/')
def home():
    return template('Templates/index',name=request.environ.get('REMOTE_ADDR'))

run(host='Work-PC',port=9999,debug=True) 
```

指数：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
  <title>index</title>
  <link type="text/css"
 href="cssfiles/mainpagecss.css"
 rel="stylesheet">
</head>
<body>
<table
 style="width: 100%; text-align: left; margin-left: auto; margin-right: auto;"
 border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td>
      <h1><span class="headertext">
      <center>Network
Website</center>
      </span></h1>
      </td>
    </tr>
  </tbody>
</table>
%if name!='none':
    <p align="right">signed in as: {{name}}</p>
%else:
    pass
%end
<br>
<table style="text-align: left; width: 100%;" border="0" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td>
      <table style="text-align: left; width: 100%;" border="0"
 cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="width: 15%; vertical-align: top;">
            <table style="text-align: left; width: 100%;" border="1"
 cellpadding="2" cellspacing="2">
              <tbody>
                <tr>
                  <td>Home<br>
                  <span class="important">Teamspeak Download</span><br>
                  <span class="important">Teamspeak Information</span></td>
                </tr>
              </tbody>
            </table>
            </td>
            <td style="vertical-align: top;">
            <table style="text-align: left; width: 100%;" border="1"
 cellpadding="2" cellspacing="2">
              <tbody>
                <tr>
                  <td>
                  <h1><span style="font-weight: bold;">Network Website</span></h1>
To find all of the needed information relating to the network's social
capabilities, please refer to the links in the side bar.</td>
                </tr>
              </tbody>
            </table>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
  </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-06T20:34:28.963

要使用提供静态文件，`bottle`您需要使用提供的`static_file`函数并添加一些额外的路由。以下路由指导静态文件请求并确保仅访问具有正确文件扩展名的文件。

```
from bottle import get, static_file

# Static Routes
@get("/static/css/<filepath:re:.*\.css>")
def css(filepath):
    return static_file(filepath, root="static/css")

@get("/static/font/<filepath:re:.*\.(eot|otf|svg|ttf|woff|woff2?)>")
def font(filepath):
    return static_file(filepath, root="static/font")

@get("/static/img/<filepath:re:.*\.(jpg|png|gif|ico|svg)>")
def img(filepath):
    return static_file(filepath, root="static/img")

@get("/static/js/<filepath:re:.*\.js>")
def js(filepath):
    return static_file(filepath, root="static/js") 
```

现在在您的 html 中，您可以像这样引用一个文件：

```
<link type="text/css" href="/static/css/main.css" rel="stylesheet"> 
```

目录布局：

```
`--static
|  `--css
|  `--fonts
|  `--img
|  `--js 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-06-08T00:37:10.553

只是在这里提供一个答案，因为我的一些学生在作业中使用了这个代码，我对这个解决方案有点担心。

在 Bottle 中提供静态文件的标准方法在[文档](http://bottlepy.org/docs/dev/tutorial.html#routing-static-files)中：

```
from bottle import static_file
@route('/static/<filepath:path>')
def server_static(filepath):
    return static_file(filepath, root='/path/to/your/static/files') 
```

这样，静态文件夹下的所有文件都从以 /static 开头的 URL 提供。在您的 HTML 中，您需要引用资源的完整 URL 路径，例如：

`<link rel='stylesheet' type='text/css' href='/static/css/style.css'>`

Sanketh 的回答使得对 URL 空间中任何位置的图像、css 文件等的任何引用都是从静态文件夹内的给定文件夹提供的。所以 /foo/bar/baz/picture.jpg 和 /picture.jpg 都将从 static/images/picture.jpg 提供。这意味着您无需担心在 HTML 代码中获取正确的路径，并且您始终可以使用相对文件名（即，只需 src="picture.jpg"）。

当您尝试部署应用程序时，就会出现这种方法的问题。在生产环境中，您希望静态资源由像 nginx 这样的 Web 服务器提供服务，而不是由您的 Bottle 应用程序提供服务。为了实现这一点，它们都应该从 URL 空间的单个部分提供，例如。/静止的。如果您的代码中充斥着相关文件名，则它不会轻易转换为该模型。

因此，我建议使用 Bottle 教程中的三行解决方案，而不是本页列出的更复杂的解决方案。它是更简单的代码（因此不太可能出现错误），它允许您无缝迁移到生产环境而无需更改代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-07T18:44:34.767

如文档中所述，您应该使用***静态***函数提供静态文件，而 css 是静态文件。静态函数处理安全性和您可以从源代码中找到的其他一些函数。静态函数的*路径*参数应指向存储*css*文件的目录

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-28T03:06:29.787

我不想像 Sanketh 的回答那样使用正则表达式匹配来提供文件，而是不修改我的模板并明确提供静态文件的路径，如下所示：

```
<script src="{{ get_url('static', filename='js/bootstrap.min.js') }}"></script> 
```

您可以通过将`<filename>`静态路由装饰器中的 替换为其中一种类型来简单地做到这一点`:path`- 如下所示：

```
@app.route('/static/<filename:path>', name='static')
def serve_static(filename):
    return static_file(filename, root=config.STATIC_PATH) 
```

以非贪婪的`:path`方式匹配整个文件路径，因此您不必担心在切换到生产时更改模板 - 只需将所有内容保持在相同的相对文件夹结构中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-24T23:28:27.907

我过去曾使用过 Sanketh 的模板，但随着时间的推移，我将其浓缩为与扩展无关的功能。您只需在 ext_map 字典中添加扩展文件夹映射。如果未明确映射扩展名，则默认为 static/ 文件夹。

```
import os.path    

# Static Routes
@get('/<filename>')
def serve_static_file(filename):
    ext = os.path.splitext(filename)[1][1:]
    ext_map = {'image':['png','gif','jpg','ico'],'js':['js']}
    sub_folder = next((k for k, v in ext_map.items() if ext in v),'')
    return static_file(filename, root='static/'+sub_folder) 
```

# c# - 通过窗口（或句柄）共享鼠标单击和按键事件

> ID：10486226
> 
> 赞同：0
> 
> 时间：2012-05-07T17:16:11.183
> 
> 标签：c#, macros, transparent, handle

我有 3 个，有时甚至更多的可执行文件副本，我想做的是通过使用 C# 在所有应用程序中共享鼠标单击和按键事件来减少劳动力。

我能够获得可执行文件的句柄，因此想法可能基于获得的句柄。

我也做了一些工作来减轻我的工作，所有应用程序都排列在相同的坐标上，具有相同的窗口大小。因此，基本上透明的鼠标和键单击将与所有窗口（顶部窗口以及背景窗口）进行交互就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:23:08.923

您需要将 Windows 消息从一个应用程序发送到另一个应用程序，但这涉及到安全配置。

在这里你有如何做到这一点：

[通过 Windows 消息在应用程序之间进行通信](http://ryanfarley.com/blog/archive/2004/05/10/605.aspx)

在这里，您有关于安全问题的评论，以及替代解决方案的想法

[在 windows 应用程序之间发送、接收和处理 windows 消息](http://social.msdn.microsoft.com/Forums/en/winforms/thread/6a7915f1-42a4-4f82-a2c6-9c149c99d7f1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:25:22.720

不需要堆叠窗户。一旦您拥有了要与之交互的所有窗口的句柄，P/Invoke SendMessage API 以将您的点击发送到每个窗口的目标坐标。

如果我需要这样的东西，我会在表单上放一个图片框并捕获其中一个窗口的图像（这样我可以看到我正在点击的内容），然后处理 PictureBox.Click 事件以计算在 P/Invoke 调用中使用的坐标。

您可以使用其他一些技巧来让您的生活更轻松并让点击共享实用程序更好，但这会让您入门。

# objective-c - 使用未检测/定义的拖放跟踪区域时

> ID：10486229
> 
> 赞同：1
> 
> 时间：2012-05-07T17:16:25.480
> 
> 标签：objective-c, cocoa, drag-and-drop, nstrackingarea

我的问题是，当我在视图中拖动某些东西时，没有检测到我的跟踪区域。

我有一个文本，我已经定义了一些跟踪区域，这样如果我检查文本的特定部分，我就会改变他的背景。现在我的问题是当我在拖动某些东西时越过它们时没有检测到跟踪区域。

在使用拖放时，有什么理由要大声跟踪区域检测？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:19:21.273

IIRC 您需要将`NSTrackingEnabledDuringMouseDrag`选项传递给`initWithRect:options:owner:userInfo:`.

# javascript - 输入的最大值和最小值

> ID：10486233
> 
> 赞同：0
> 
> 时间：2012-05-07T17:16:31.150
> 
> 标签：javascript, forms

对于这个特定的现有表单，有一个接受电话号码的输入。它已经验证只接受数字并为 10 个字符添加了最大字符属性。

但是有人可以添加 1-9 位数字。所以我需要添加 javascript 来检查以确保该字段的字符数为 10。输入的 ID 为电话号码。

有人可以告诉我如何修改以下代码以使其正常工作吗？注意：“= 10 个字符”只是一个占位符，该部分需要用真实代码替换。

```
function checkEmail(theForm) {
    if (theForm.getElementById("phonenumber").value = 10 Characters )
    {
        alert('Your phone number is not 10 digits.');
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:17:47.973

我想你想要`.length`

```
if (theForm.getElementById("phonenumber").value.length == 10) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:34:53.747

您可能希望对您的用户温和，并允许电话号码中的常见约定，如空格或连字符。

只需检查 10 位数字。使用该值时，请删除所有非数字。

```
function checkphone(v){
    if(v.match(/\d/g).length==10) return true;
    throw 'Phone number must have 10 digits';
} 
```

**检查电话（'207 555-5555'）；**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:21:38.953

`if (theForm.getElementById("phonenumber").value.length != 10)`

*...因为如果长度不是*10 ，您希望发生一些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-24T04:56:33.877

**使用Javascript 验证验证**电话号码字段的最小和最大长度

 **```
function checkLimit() {
    var x, text;

    // Get the value of the input field with id="Phone"
    phone = document.getElementById("Phone").value;

    // If phone is Not a Number or less than 10 or greater than 10
    if (isNaN(phone) || phone.length < 10 || phone.length > 10) {
        text = "Input not valid";
    } else {
        text = "Input OK";
    }
    document.getElementById("resp").innerHTML = text;
}
```

```
 <input onkeypress="checkLimit()" id="Phone" name="Phone" type="number" class="form-control" placeholder="Phone Number" required="required"/>

    <p id="resp"></p>
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-07T17:20:22.247

试试这个：

```
function checkEmail(theForm) {
if (theForm.getElementById("phonenumber").value.length != 10 )
{
    alert('Your phone number is not 10 digits.');
    return false;
} else {
    return true;
} 
```

}**

# c++ - 如何将向量插入多维向量？

> ID：10486236
> 
> 赞同：0
> 
> 时间：2012-05-07T17:16:57.723
> 
> 标签：c++, vector

可以说我有向量的向量

```
vector< vector<int> > bigTable;

vector<int> data;
data.resize(2);
fingertable.resize(5,data); 
```

如何插入向量？

```
 vector<int> newData;
    newData.resize(2);
    newData.push_back(123);
    newData.push_back(456); 
```

当我执行以下操作时，bigTable 向量中的数据仍然为 0。

```
bigTable.push_back(newData);
    cout << bigTable[0][0]; // this will produce an output of 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:19:29.423

我想你误解了什么`resize`（也许你在想`reserve`？）。在您的第二个代码片段之后，`newData`将包含 4 个元素：`0`、`0`、`123`、`456`。

# matlab - 操作矩阵序列

> ID：10486240
> 
> 赞同：0
> 
> 时间：2012-05-07T17:17:16.537
> 
> 标签：matlab, matrix, sequence

我正在处理大量矩阵，只是在一个数字上有所不同（meanT0601、meanT0602、meanT0603、...等等）。**我知道如何使用for**循环和**%d**
来处理一系列文件， 但我无法对矩阵做类似的事情。 有什么想法吗？虽然这会浪费很多时间，但我正在考虑输入每个不同的矩阵名称来处理它们。 提前致谢

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:44:42.767

我不知道命令 importdata （可能我的 matlab 版本太旧了），但如果我使用 dlmread 和 dlmwrite 的组合，它工作正常。

```
 A = [1 2 3 4; 5 6 7 8];
 dlmwrite('file.txt',A);
 B{1} = dlmread('file.txt'); 
```

Dlmread 和 dkmwrite 以 csv 格式保存。最后一切都在单元格数组B中。如果您必须使用importdata函数，请提供源代码或文档****

# css - 是否允许在 CSS 关键帧动画中使用任何十进制值？

> ID：10486242
> 
> 赞同：17
> 
> 时间：2012-05-07T17:17:22.193
> 
> 标签：css, percentage, css-animations

我想知道是否可以使用这样的百分比值：

```
@keyframes myAnimation {
    0%    { height: 100px; }
    33.3% { height: 120px; }
    66.6% { height: 140px; }
    100%  { height: 200px; }
} 
```

它似乎有效，但我不确定浏览器是否可能只是“围绕”这个？那么像 33.3457% 这样的值呢？非常感谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-07T18:27:32.090

当涉及到 CSS 时，它会注意到小数点后 2 位的百分比，然后停止。因此，您将能够获得 33.34% 而不是 33.3457% 用于您的关键帧

我希望这有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-15T10:45:51.877

是的，您可以使用小数部分来定义更精确的关键帧百分比。但这种精度并[没有明确规定](http://www.w3.org/TR/css3-animations/#keyframes)。

所有支持 CSS 动画的浏览器都支持它。但不要使用过多的小数，可能会出现奇怪的行为（尤其是 5 位以上）。

我将它用于带有循环的复杂动画：

```
@keyframes{
    0%, 30%, 40%, 50%, 60%{
        top: 0px;
    }
    29.99999%, 39.99999%, 49.99999%, 59.99999%{
        top: 100px;
    }
    100%{
        top: 200px;
    }
}
/*
- 0px to 100px (30%)
- loop 3 times 0px to 100px (10% each, total 30%)
- 0px to 200px (40%)
*/ 
```

The SASS default precision is 3 digits and can be changed with `--precision` (cmd option) or `Sass::Script::Number.precision`

# ios - 在裁剪之前调整 UIImage 或 CIImage 的大小会拉伸图像吗？

> ID：10486244
> 
> 赞同：0
> 
> 时间：2012-05-07T17:17:23.717
> 
> 标签：ios, uiimage, resize, crop, core-image

好的，我已经尝试了我能找到的每一个例子，遗憾的是它们中的大多数都是从 2008 年到 2009 年，而 iOS5 似乎非常不同。我只是想调整大小和图像，以便短边是我指定的大小，并且保持成比例。

我正在使用 AVFoundation 从相机中获取图像，我通过 UIImage 将其转换为 CIImage 以便我可以应用过滤器并对其进行处理，然后再转换回 UIImage 进行保存。

```
- (void) startCamera {

session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetPhoto;

AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.frame = _cameraView.bounds;
[_cameraView.layer addSublayer:captureVideoPreviewLayer];
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
NSError *error = nil;

AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {
    //no cam, handle error - need to put up a nice happy note here
    NSLog(@"ERROR: %@", error);
}

[session addInput:input];

stillImage = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys:AVVideoCodecJPEG , AVVideoCodecKey, nil];
[stillImage setOutputSettings:outputSettings];

[session addOutput:stillImage];
[session startRunning];
}

- (IBAction) _cameraButtonPress:(id)sender {

AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in stillImage.connections)
{
    for (AVCaptureInputPort *port in [connection inputPorts])
    {
        if ([[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection) {
        break;
    }
}

[stillImage captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error) {

    NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
    UIImage *startImage = [[UIImage alloc] initWithData:imageData];

    //resizing of image to take place before anything else
    UIImage *image = [startImage imageScaledToFitSize:_exportSSize];  //resizes to the size given in the prefs

    //change the context to render using cpu, so on app exit renders get completed
    context = [CIContext contextWithOptions:
               [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES]
                                           forKey:kCIContextUseSoftwareRenderer]];

    //set up the saving library
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

    //create a new ciimage
    CIImage *greyImage = [[CIImage alloc] initWithCGImage:[image CGImage]];

    //create a CIMonochrome filter 
    desaturate = [CIFilter filterWithName:@"CIColorMonochrome" keysAndValues:kCIInputImageKey, greyImage, @"inputIntensity", [NSNumber numberWithFloat:0.00], nil];

    //[crop setValue:ciImage forKey:@"inputImage"];
    //[crop setValue:[CIVector vectorWithX:0.0f Y:0.0f Z:_exportSize W:_exportSize] forKey:@"inputRectangle"];

    CIImage *croppedColourImage = [desaturate valueForKey:@"outputImage"];
    //convert it to a cgimage for saving
    CGImageRef cropColourImage = [context createCGImage:croppedColourImage fromRect:[croppedColourImage extent]];

     //saving of the images         
     [library writeImageToSavedPhotosAlbum:cropColourImage metadata:[croppedColourImage properties] completionBlock:^(NSURL *assetURL, NSError *error){
     if (error) {
         NSLog(@"ERROR in image save: %@", error);
     } else
     {
         NSLog(@"SUCCESS in image save");
         //in here we'll put a nice animation or something
         CGImageRelease(cropColourImage);
     }

     }];
}];
} 
```

这段代码是测试代码，所以会有各种各样的尝试，为此道歉。

我最接近的是[在这里使用 Matt Gemmell 的代码](https://github.com/mattgemmell/MGImageUtilities "这里")

但是，无论我尝试什么，总是会拉伸图像。我想调整图像大小，然后将其裁剪为 512 像素正方形。如果我只是做一个 CICrop 过滤器，它会占用左上角的 512 像素，所以我会丢失很多图像（抓取高分辨率照片，因为稍后我还想导出 1800x1800 图像）。我的想法是先调整图像大小，然后裁剪。但无论我做什么，图像都会被拉伸。

所以我的问题是，在 iOS5+ 中是否有适当的建议可识别方法来调整大小和图像？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:03:24.153

我找到了一种方法：

```
UIGraphicsBeginImageContext( newSize );

[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

# text - 使用键盘删除 Emacs/XEmacs 中的特定文本列

> ID：10486248
> 
> 赞同：8
> 
> 时间：2012-05-07T17:17:33.683
> 
> 标签：text, emacs, gnu, xemacs

是否可以仅使用键盘删除 Emacs/XEmacs 中的特定文本列（即特定列号）？我知道可以使用鼠标（或箭头键）选择一个文本矩形，但是对于 100 万行的文本文件，这可能非常耗时。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T17:20:40.343

`delete-rectangle`您可以使用( `C-x r d`) 或`kill-rectangle`( )删除矩形`C-x r k`。任何一个都会杀死由点和标记定义的角的矩形。 `kill-rectangle`也将保存它以用于`yank-rectangle`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-07T17:59:08.577

如果您有`sed`或`awk`在您的系统上，您可以方便地使用`C-u M-|`.

从文档中：

> M-| 运行命令 shell-command-on-region [...]
> 
> 在以区域为输入的下层 shell 中执行字符串 COMMAND。*通常在临时缓冲区` Shell Command Output* '中显示输出（如果有）；前缀 arg 表示用它替换区域。返回 COMMAND 的退出代码。[...]

请注意有关前缀 arg ( `C-u`) 的部分。

提示：`C-x h`将区域设置为整个缓冲区。

# c# - 用非 GUI 选项替换 TreeView

> ID：10486249
> 
> 赞同：0
> 
> 时间：2012-05-07T17:17:39.717
> 
> 标签：c#, class, user-interface, tree, treeview

我正在开发一个大量使用 TreeView 和 TreeNodes 的项目。但是，我需要从现有程序中删除 GUI 并允许它在控制台中运行。我是 C# 新手，但在没有 GUI 的情况下找不到类似的类。推荐的课程是什么？据我了解，没有 Tree 基类，但我可以创建自己的基类吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:23:18.283

树只是`List<Node>`s，其中`Node`是包含 a`List<Node>`和任何其他重要数据的类。实现的难易程度取决于很多事情，但您应该不会遇到太多麻烦：

```
public class Node<T> {
    private List<Node<T>> nodes;        

    public T Item { get; private set; }

    public Node(T item) {
        nodes = new List<Node<T>>();
        Item = item;
    }

    public IEnumerable<Node<T>> {
        return nodes;
    }

    //Add other things like: `Find(T item)`, `Add(T item)`
} 
```

如果您愿意，您可以创建一个`Tree<T>`封装一些搜索/操作功能的类，但这应该会让您朝着正确的方向前进。

# groovy - 检查 Integer 在 groovy 中是 Null 还是数字？

> ID：10486252
> 
> 赞同：7
> 
> 时间：2012-05-07T17:18:00.390
> 
> 标签：groovy, numbers, integer

我有一个服务方法，如果方法参数为空/空白或不是数字，则必须抛出错误。

调用者正在发送一个整数值，但在被调用方法中如何检查它是数字还是空值。

前任：

```
def add(value1,value2){
 //have to check value1 is null/blank
 //check value1 is numeric

}

caller: class.add(10,20) 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T20:24:41.767

更具体的[是 Dan Cruz 的答案](https://stackoverflow.com/a/10486292/462015)，你可以使用[`String.isInteger()`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#isInteger%28%29)方法：

```
def isValidInteger(value) {
    value.toString().isInteger()
}

assert !isValidInteger(null)
assert !isValidInteger('')
assert !isValidInteger(1.7)
assert isValidInteger(10) 
```

但是，如果我们为我们的方法传递`String`看起来像 a的 a 会发生什么`Integer`：

```
assert !isValidInteger('10')  // FAILS 
```

我认为最简单的解决方案是使用`instanceof`运算符，所有断言都是有效的：

```
def isValidInteger(value) {
    value instanceof Integer
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T08:06:57.267

您始终可以定义参数的类型：

```
Number add( Number value1, Number value2 ) {
  value1?.plus( value2 ?: 0 ) ?: value2 ?: 0
}

int a = 3
Integer b = 4
assert add(    a, null ) == 3
assert add( null,    3 ) == 3
assert add( null, null ) == 0
assert add(    a,    b ) == 7
assert add(    a,    4 ) == 7
assert add(    0,    a ) == 3
assert add(    1,    1 ) == 2
assert add(    0,    0 ) == 0
assert add(   -1,    2 ) == 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T17:21:23.573

您可以尝试使用 Groovy 的[`String.isNumber()`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#isNumber%28%29)方法。

例如：

```
if (value1.isNumber()) ...
if (value2.isNumber()) ... 
```

# javascript - javascript / threejs - 检测何时释放键

> ID：10486254
> 
> 赞同：2
> 
> 时间：2012-05-07T17:18:22.157
> 
> 标签：javascript, events, event-handling, listener, three.js

我正在使用这个用于threejs的javascript键盘库，它似乎能够检测到何时释放键。我将如何将其纳入我的项目中？这是文档：

[http://learningthreejs.com/data/THREEx/docs/THREEx.KeyboardState.html](http://learningthreejs.com/data/THREEx/docs/THREEx.KeyboardState.html)

这是我目前检测按下哪个键的方式：

```
if (keyboard.pressed("left")){ 
//do stuff
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:24:18.067

在threejs的源代码中，有一行

```
document.addEventListener("keyup", this._onKeyUp, false); 
```

您正在添加一个处理程序，监听 keyup 事件。

addEventListener 的 MDC 文档： [https ://developer.mozilla.org/en/DOM/element.addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)

# c++ - 在 cpp 中使用 pthread_mutex_t

> ID：10486258
> 
> 赞同：0
> 
> 时间：2012-05-07T17:18:37.123
> 
> 标签：c++, locking, pthreads, mutex

在我的程序中，我有一个守护线程等待任务并将它们打印到文件中。它的功能是：

```
void * deamon(void *) {
    while(true) {
        pthread_mutex_lock(manager->getLock());
        while(!manager->isPending()) {
            if (manager->isClosing()) {
                pthread_exit(NULL);
            }
            pthread_cond_wait(manager->getCond(), manager->getLock());
            //check that condition if met - surprises may occur!
        }
                //WRITE TO FILE HERE
        pthread_mutex_unlock(manager->getLock());
    }
    return NULL;
} 
```

因此，您可以看到，当没有待处理任务时，守护进程会等待新任务。当我得到一个新的时，我将它推送到不同类的数据库（守护进程不在一个类中），然后发送如下信号：

```
void Manager::pushNewTask(Task * task) {
    pthread_mutex_lock(_lock);
    map<int,Task *>::iterator it = _tasks->end();
    _tasks->insert(it,make_pair(task->getId(),task));
    // At the first time a signal is sent with no need
    if (_tasks->size() == 1) {
        _pending = true;
        pthread_cond_signal(_cond); //SEND SIGNAL TO DAEMON THREAD
    }
    pthread_mutex_unlock(_lock);
} 
```

三个问题：

1.  从这里的代码中不清楚，但两者都`daemon()`使用`pushNewTask()`相同的`pthread_mutex_t`对象 - 这不是问题吗？当守护程序进入睡眠状态（等待）时，它不会解锁互斥锁。
2.  几个函数被同一个锁是什么意思`pthread_mutex_lock`？也许只有一个线程可以访问它们中的任何一个？我什么时候应该使用不同的`pthread_mutex_t objects`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:37:57.217

> 1：这里的代码不清楚，但 daemon() 和 pushNewTask() 都使用相同的 pthread_mutex_t 对象 - 这不是问题吗？

```
pthread_cond_wait(manager->getCond(), manager->getLock()); 
```

不，这不是问题。调用`pthread_cond_wait()`释放锁并挂起线程。当条件变量发出信号时。线程**重新获取锁**，然后从对 的调用返回`pthread_cond_wait()`。因此，当线程正在运行时，它将拥有锁，而当它处于睡眠状态时，锁将被释放（注意，如果另一个线程在 mutext 上持有锁，则线程无法退出`pthread_cond_wait()`）。

> 2：几个函数用同一个pthread_mutex_lock加锁是什么意思？也许只有一个线程可以访问它们中的任何一个？我什么时候应该使用不同的 pthread_mutex_t 对象？

不，您应该**始终**使用相同的互斥锁/条件变量对。此外，对对象（在本例中为`Manager`对象）的访问通常由单个锁控制。这意味着只有持有锁的线程才能执行管理器对象中的代码（因此一次只能执行一个线程）。在“条件变量”上挂起的线程会释放锁，以便其他线程在挂起时可以工作，但必须重新获取锁，然后才能在管理器中执行代码。

### 更好的用法：

```
pthread_cond_wait(manager->getCond(), manager->getLock()); 
```

这很容易受到竞争条件的影响。它应该这样写：

```
while(<No Tasks available>)
{
    pthread_cond_wait(manager->getCond(), manager->getLock());
} 
```

请参阅：[线程等待父级](https://stackoverflow.com/questions/5799924/thread-wait-for-parent/5799978#5799978)

### 错误：

```
 if (manager->isClosing()) {
            pthread_exit(NULL);
        } 
```

这是个问题。线程正在死亡，同时仍持有互斥锁。在线程死亡之前，它应该释放互斥锁。最好通过 RAII 控制互斥体，以便其使用是异常安全的，并且您可以通过从函数返回而不是调用 pthread_exit() 来退出线程。

使用 pthread_exit() 就像在普通应用程序中调用 exit() 一样。这不是一个好主意，因为堆栈上的自动对象没有正确销毁。这可能是 C++ 代码中的一个问题，因此不鼓励使用 pthread_exit()，相反，您应该让线程自然死亡，允许它从启动它的原始函数返回。（PS 不会抛出将线程堆栈展开到最后的异常。当线程由于异常而退出时 pthreads 会做什么是未定义的（我见过的大多数系统都会导致应用程序终止））。

# php - ayamaapp 发生错误。请稍后再试

> ID：10486259
> 
> 赞同：-1
> 
> 时间：2012-05-07T17:18:43.293
> 
> 标签：php, facebook

我是 facebook api 应用程序的 php 代码

我保留了相同的登录密钥和密钥。

但是当我运行代码时：

将出现一个弹出窗口，要求您登录 Facebook。如果您看不到弹出窗口，请允许从您的浏览器弹出，然后重新加载此页面

当弹出窗口打开时

ayamaapp 发生错误。请稍后再试。

当我更改存储的 api 密钥/秘密时

API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:00:58.530

你能发布你的php代码吗？在我看来，您并没有一直在 facebook 上设置您的应用程序……您必须确保将您的应用程序域保存在您的帐户 developer.facebook.com 上。Facebook 只会重定向到该域，

# c# - 从数据表中选择列的子集

> ID：10486261
> 
> 赞同：7
> 
> 时间：2012-05-07T17:18:49.547
> 
> 标签：c#

我有一个 15 列的数据集。我想生成一个只有 4 列该数据集的 excel 表。我们如何在数据表中选择列的子集？谢谢，罗希特

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-07T17:20:34.533

您可以`DefaultView.ToTable`为此使用：

```
var table = table.DefaultView.ToTable(false, "Column1", "Column2", "Column3"); 
```

这是文档：[DefaultView.ToTable 方法](http://msdn.microsoft.com/en-us/library/wec2b2e6.aspx)

# bash - bash 中的复合逻辑测试

> ID：10486263
> 
> 赞同：6
> 
> 时间：2012-05-07T17:18:56.490
> 
> 标签：bash, testing

关于 bash 的问题....

我写了一个小代码来检查一年是否是闰年。相关部分如下所示：

```
if [ $testnum4 -eq 0 -a $testnum100 -ne 0 ] || [ $testnum400 -eq 0 ]
then
  echo 0
fi 
```

好吧，这段代码确实有效。我的问题是我仍然不太确定自己在做什么。只是为了看看会发生什么，我尝试了几种变体：将整个测试表达式括在方括号中，使用`&&`where I have`-a`和`-o`where I have`||`等。除了我上面写的一个表达式之外，没有任何效果。我偶然发现了它，我很高兴我做到了，但是下次我必须做这样的事情时，我想知道我在做什么。

所以：任何人都可以快速解释复合测试在 bash 中的工作原理吗？或指向有关此主题的良好资源的指针？

谢谢。

这是一个失败的代码：

```
let testnum4=$1%4
let testnum100=$1%100
let testnum400=$1%400

if [ $testnum4 -eq 0 && $testnum100 -ne 0 ] -o [ $testnum400 -eq 0 ]
then
  echo 0
fi 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-07T21:44:59.280

小注意：方括号实际上是一个 Unix 命令。看看你的系统上`/bin/[`是否有一个文件被调用。`/usr/bin/[`事实上，试试这个：

```
$ ls i-il /bin[ /bin/test
571541 -r-xr-xr-x  2 root  wheel  43120 Aug 17  2011 /bin/[
571541 -r-xr-xr-x  2 root  wheel  43120 Aug 17  2011 /bin/test 
```

第一个数字是 i 节点编号。你看到了，`/bin/[`并且`/bin/test`彼此之间有着紧密的联系。他们是同一个程序。

稍后我会回到这个问题的重要性......

* * *

在 BASH 和其他 Bourne 类型的 shell 中，`if`命令仅运行命令，如果命令返回退出代码`0`，则执行`if`子句中的命令。如果该命令没有返回退出代码`0`，它会跳过子句中`if`的命令并执行子句中的命令（`else`如果存在）。

因此，这也是有效的：

```
if sleep 2
then
   echo "That was a good nap!"
fi 
```

您的计算机执行该`sleep 2`命令（如果存在 sleep 命令）将返回零退出代码并继续回*显 这是一个很好的午睡！*.

这就是`if`命令真正所做的一切。它运行给定的命令并检查退出代码。

* * *

现在，回到`[`...

您可能需要查看[测试](http://www.manpagez.com/man/1/test/)命令的联机帮助页。您可以看到该命令似乎有许多与 if 语句中`test`相同类型的测试。`[...]`事实上，在最初的 Bourne shell（BASH 派生自）中，这些命令结构是相同的：

```
if test -f $my_file
then
    echo "File $my_file exists"
else
    echo "There is no file $my_file"
fi

if [ -f $my_file ]
then
    echo "File $my_file exists"
else
    echo "There is no file $my_file"
fi 
```

事实上，在最初的 Bourne shell 中，您必须使用`test`命令而不是方括号。

* * *

所以，回到你原来的问题。`-a`和`-o`是测试命令的参数（参见手册`test`页。例如，您的`if`语句可以这样写：

```
if test $testnum4 -eq 0 -a $testnum100 -ne 0 || test $testnum400 -eq 0
then
   echo 0
fi 
```

但是`&&`和`||`不是测试命令参数，因此不能在测试命令中使用。

请注意，这`[`是 BASH 中的内置命令，因此 BASH 不会`/bin/[`像原来的 Bourne shell 那样执行。然而，它仍然是一个命令，很像`echo`BASH 中的内置命令，尽管`/bin/echo`仍然存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T19:44:23.277

在 Bash 中进行整数比较的正确方法是使用双括号：

```
if (( (testnum4 == 0 && testnum100 != 0) || testnum400 == 0 )) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:10:14.587

## 算法

检查闰年的算法是（在伪代码中）：

```
if (YEAR modulo 400):
    LEAP_YEAR = true
elseif (YEAR modulo 4) and not (YEAR modulo 100):
    LEAP_YEAR = true
else
    LEAP_YEAR = false
endif 
```

我建议不要使用过于聪明的解决方案，并坚持使用更具可读性的东西。有关使用嵌套 if 语句的闰年测试的工作示例，请参阅[Bash 初学者指南。](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_02.html#sect_07_02_03)它使用不推荐使用的`$[]`算术表达式，因此只需将算术表达式替换为`$(( ))`，您就可以看到它应该如何工作。

## OPs 代码是如何工作的

在 OPs 更新的代码示例中，这些值是从位置参数构建的单独变量。因此，在条件语句中评估变量之前，将对变量执行模运算。之后，if 语句说：

```
if (first_expression returns true) or (second_expression returns true):
    echo 0
endif 
```

单方括号只是一个 shell 内置函数，其执行与`test`命令相同，它计算表达式并返回退出状态，其中零为真。请参阅`help \[`或`man test`了解更多信息。

## 建造一个更好的捕鼠器

虽然我和其他发帖人已经解释了为什么 OPs 代码有效，但似乎 OPs 目标的一部分是将整个闰年测试放在一个条件中。这是一个 Bash shell 函数，它将执行此操作，并让您通过检查退出状态来测试结果。

```
# function returns exit status of arithmetic expression
leap_year () { 
    (( $1 % 400 == 0 || ($1 % 4 == 0 && $1 % 100 != 0) ))
} 
```

您可以在提示符下测试该功能：

```
$ leap_year 2011; echo $?
1
$ leap_year 2012; echo $?
0
$ leap_year 2013; echo $?
1 
```

有关`(( ))`算术表达式的更多信息，请参阅 Bash 参考手册的[条件构造](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T17:32:47.670

在 bash（实际上大多数 shell）中，如果最后一个命令返回 true（零退出代码），则`if`接受一个命令/一组命令并评估该`then`部分，否则它评估`elif`/`else`部分（`elif`以类似于 else 的方式处理）。

现在关于`[[`. 这类似于`test`命令，但具有更大的测试覆盖率。但是它有一个限制，它一次只能评估一个条件，所以它**不**接受**-o**或**-a**。您可能希望将其`[`视为`test`. 至于`||`和`&&`这些是控制运算符，如果上一个命令分别返回 false（非零退出代码）或 true（零退出代码），则评估下一个命令。这 2 个的用途是将命令链接在一起（尤其是`[[`）。

至于上面的if，它执行2个命令：

*   第一的：`[ $testnum4 -eq 0 -a $testnum100 -ne 0 ]`
*   第二：`[ $testnum400 -eq 0 ]`

如果第一个命令成功，则 if 执行该`then`部分。如果第一个命令失败，则执行第二个命令。如果第二个成功，则执行主体，否则`if`不执行任何操作。

至于一个好的 bash 资源，您可能想访问[The Bash Wiki](http://wiki.bash-hackers.org/doku.php)

# powershell - 使用 SCCM 2012 中的应用程序在 VM 或主机上安装 SW 的 Powershell 脚本 ..？

> ID：10486264
> 
> 赞同：0
> 
> 时间：2012-05-07T17:19:03.957
> 
> 标签：powershell, cloud, sccm

我正在使用 Orchestrator Runbook，其中有一个“.net 运行脚本”，它甚至可以运行 Powershell 脚本，我必须编写一个 Powershellscript 查询 SCCM 2012 的 SW（作为参数给出）并将其安装在 VM 上（给出为范围）。我已经在 SCCM 2012 的软件库中列出了作为应用程序的软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T16:23:34.127

如果您使用的是 Orchestrator，一个更简单的解决方案（更符合 Orchestrator）将是安装“System Center Integration Pack for System Center 2012 Configuration Manager”并使用其中定义的活动：

[http://technet.microsoft.com/en-us/library/hh967537.aspx](http://technet.microsoft.com/en-us/library/hh967537.aspx)
[http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=28725](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=28725)

您可以：

*   将机器添加到现有集合中，该集合已经为您要安装的软件启用了部署 - 使用“添加集合规则”活动将机器添加到正确的集合中：[http ://technet.microsoft.com/en-us/图书馆/hh967533](http://technet.microsoft.com/en-us/library/hh967533)

*   专门为机器创建一个新集合，并使用“创建集合”和“部署应用程序”活动将应用程序部署到该集合：[http](http://technet.microsoft.com/en-us/library/hh967526) ://technet.microsoft.com/en-us/library/hh967526和[http://technet .microsoft.com/en-us/library/hh967531](http://technet.microsoft.com/en-us/library/hh967531)

# asp.net - 用于自动化 ASP.NET 表单提交的 Bash 脚本？

> ID：10486269
> 
> 赞同：0
> 
> 时间：2012-05-07T17:19:25.423
> 
> 标签：asp.net, macos, bash, post, curl

**场景**：我有一个内部 ASP.NET 站点，允许我维护一组规则 (CRUD)。要添加新规则，我只需填写 HTML 表单并单击提交。我当前的问题是我现在需要添加几百条规则，并且我想使用脚本来自动执行此操作。

**初步计划**：

*   创建一个可以接受 X 个参数的脚本，并使用这些参数来伪造上述网页的表单提交
*   创建一个逗号分隔的文件（或类似文件），每条规则一行，每一列代表 HTML 表单中的输入标签之一
*   创建另一个脚本，该脚本可以使用逗号分隔文件为每一行执行一次表单提交脚本

我的尝试集中在**curl**上，并且针对[在线测试页面](http://www.cs.tut.fi/~jkorpela/forms/testing.html)效果很好。不幸的是，我无法让它对 ASP.NET 页面起作用，我猜这与 Postback 和/或 Viewstate 有关系。

**片段**：

```
curl -s -u "DOMAIN\user:password" --ntlm -d "key1=value1" -d "key2=value2" http://internal/page.aspx 
```

（像使用 GET 一样返回页面，没有错误消息）

**问题**：

如何欺骗我正在发送回发的 ASP*页面*？（也欢迎其他脚本建议）

**编辑**：

来自 ASP 页面的片段：

```
<asp:LinkButton ... runat="server" OnClick="lbAddRule_Click" PostBackUrl="~/Page.aspx" /> 
```

来自后面代码的片段：

```
protected void lbAddRule_Click(object sender, EventArgs e) {
  if (Page.IsValid == true) {
    AddRule(x,y,z); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T01:36:41.500

采用完全不同的方法，您是否考虑过编写浏览器本身的脚本？有一些非常强大的技术，包括 Selenium/WebDriver [1] 和 iMacros [2]，它们都允许这种脚本编写。

[1] [http://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html)

[2] [http://wiki.imacros.net/Browser_Automation](http://wiki.imacros.net/Browser_Automation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:37:29.337

如果这旨在作为 RESTful 服务（您正在访问它），您可能需要考虑将当前处理表单的页面重写为[**Web Service**](http://msdn.microsoft.com/en-us/library/t745kdsh.aspx)。然后，您可以使用 curl 访问您想要的所有内容，并重新连接您的表单，以便一切都像以前一样工作。

# c# - 从 webBrowser 控件读取 XML

> ID：10486271
> 
> 赞同：2
> 
> 时间：2012-05-07T17:19:29.777
> 
> 标签：c#, xml, browser

我正在尝试像这样加载 XML：

```
XmlDocument doc = new XmlDocument();

doc.LoadXml(webBrowser1.DocumentText.ToString()); 
```

我每次都会收到这个`XmlException`消息。`Reference to undeclared entity 'nbsp'. Line 73, position 18.`

有谁知道我做错了什么以及我可以做些什么来防止这种情况发生，每次使用 PHP 都会动态生成 XML 页面，并且它会读取用户登录时之前添加的 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:29:23.760

代替：

```
doc.LoadXml(webBrowser1.DocumentText.ToString()); 
```

和：

```
doc.LoadXml(webBrowser1.DocumentText.ToString().Replace("&nbsp;", " ")); 
```

# java - Servlet 3.0 中的 AsyncContext 无限浏览器加载

> ID：10486274
> 
> 赞同：1
> 
> 时间：2012-05-07T17:19:48.783
> 
> 标签：java, html, servlets

我要做流媒体。我有 .jsp 文件，在 .jsp 文件的末尾，我使用以下代码包含了我的 Async Servlet：

```
<jsp:include page = '/simple' flush = 'true' /> 
```

因此，我希望在加载整个页面时打开一个无限的异步请求，该请求将处理异步响应。

这是我的 Servlet 代码：

```
public class SimpleAsyncServlet extends HttpServlet {
    public static AsyncContext ctx;
    protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
        req.setAttribute("org.apache.catalina.ASYNC_SUPPORTED", true);
        ctx = req.startAsync();
        ctx.setTimeout(0);
    }
} 
```

从其他 java 类中，我使用静态 SimpleAsyncServlet.ctx.getResponse.getWriter() 将一些 javascript 代码打印到当前页面。它工作没有任何问题，但浏览器一直显示它正在加载。根据异步想法页面应该被加载并且这个异步请求应该在后台保持活动状态并且..就是这样，但是没有..浏览器一直加载页面直到永远（超时为0，因为我想要无限打开请求）

我在哪里错了，如何在不加载此浏览器的情况下发出此永久请求？

PS 我试图直接从 url (localhost.../simple) 访问我的 servlet，然后我在页面上看不到任何内容。它一直加载到永远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:22:43.573

你正在努力实现不可能。

浏览器将显示页面正在加载，直到它通过以下方法之一知道它已收到完整请求：

*   它已收到 Content-Length 标头中规定的字节数
*   连接关闭
*   它在使用分块编码时收到了一个结束块

由于您想要“无限”响应，因此上述三个选项都不会发生。

# wcf - WCF 服务代理在关闭时超时

> ID：10486277
> 
> 赞同：1
> 
> 时间：2012-05-07T17:20:09.947
> 
> 标签：wcf, .net-3.5, timeout

我有一个 WCF 客户端应用程序，它为每个调用创建一个新的代理实例。我在前一个实例上调用 Close() 以确保连接已关闭，但它总是在 1 分钟后超时，这是默认的关闭时间。在这种情况下，我之前调用了 Abort()，而不是 Close()，但后来我意识到我会超过 10 个并发连接的默认限制。我不确定是什么导致 Close() 调用超时。查看 WCF 跟踪日志，我看到一段日志显示以下内容，但我不清楚这是我调用 Close() 还是自动执行此操作的结果：

*   一条消息已关闭
*   一条消息已关闭
*   消息再次关闭

我的服务定义了以下行为：

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true, AutomaticSessionShutdown = false, InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)] 
```

以下是我的服务行为：

```
 <service behaviorConfiguration="AdminServiceBehavior" name="My.WebServices.AdminService">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="AdminUserNameBinding"
      name="wsHttpBindingWithAuthAdmin" contract="My.WebServices.IAdminService">
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" name="mexAdminBinding"
      contract="IMetadataExchange" /> 
```

我需要做什么才能优雅地关闭（）我的连接而不会超时？我已经阅读了有关何时调用 Close() 与 Abort() 的文章，以及是否应该处理/使用“使用”块，但 Close() 对我而言超时且 Abort() 无法释放的事实并发会话让我感到困惑。

这可能与[AutomataticSessionShutdown](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.automaticsessionshutdown.aspx)有关，但我不确定它为什么会导致 Close() 中止。老实说，我不知道为什么我将该属性设置为 false。

**更新**：将 AutomaticSessionShutdown 设置为 true（默认值）允许我调用 Close() 而不会超时。这似乎有效，但我不确定为什么。

# zend-framework - 如何访问zend模块中的控制器

> ID：10486288
> 
> 赞同：0
> 
> 时间：2012-05-07T17:21:07.287
> 
> 标签：zend-framework, module, routing

我的 zend 应用程序最初是这样设置的：

应用程序-控制器-模型-视图

现在我想将其设置为使用模块结构，所以我将其更改为：应用程序 - 模块 - 默认 - 控制器 - 模型 - 视图 - 测试 - 控制器 - 模型 - 视图 除了将所有文件移动到正确的结构之外，我只是将以下行添加到配置文件：resources.frontController.moduleDirectory = APPLICATION_PATH "/modules" resources.modules[] = "" 并为每个模块添加引导文件。

由于我将所有当前控制器移至默认模块，因此我可以正常运行应用程序。但是，我无法访问新测试模块中的任何新控制器。我错过了什么吗？我必须更改配置或引导程序中的任何内容吗？

例如，我在名为 TestController 的测试模块中创建了一个新控制器，当我转到 localhost/test/test 时，我收到错误：“EXCEPTION_NO_CONTROLLER”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:56:39.173

也许检查你的模块引导路线

```
 class Transfer_Bootstrap extends Zend_Application_Module_Bootstrap
    {

    public function _initModuleRoutes()
    {
        $this->bootstrap('FrontController');
        $frontController = $this->getResource('FrontController');
        $router = $frontController->getRouter();

        $route = new Zend_Controller_Router_Route(
            'modulename/:action/*',
            array(
                    'module' => 'modulename',
                    'controller' => 'modulecontroller',
                    'action' => 'index'
            )
        );
        $router->addRoute('routename', $route);

        return $router;
    } 
```

# javascript - facebook如何用javascript全屏？

> ID：10486290
> 
> 赞同：5
> 
> 时间：2012-05-07T17:21:16.490
> 
> 标签：javascript

相关的[onclick 去全屏](https://stackoverflow.com/questions/3900701/onclick-go-full-screen)和[如何在 javascript 中实现精确的全屏？](https://stackoverflow.com/questions/2020729/how-to-implement-exact-full-screen-in-javascript).

Facebook 最近添加了高分辨率图像查看功能：

![全屏按钮](../Images/fa4edea83a9dab469ce3403aa77c9870.png)

当我点击它时，我的浏览器进入全屏模式：

![全屏效果](../Images/66236bb6e25d3fa160b50baaa357181c.png)

这是类似于 F11 的原生浏览器全屏。

我想为仅在内部使用的本地 Web 应用程序实现此功能，因此不会让随机用户对全屏效果感到恼火。

有人知道怎么做这个吗？或者，我可以在哪里获得代码来实现这个，并解释它是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:23:20.047

这是 HTML5 提供的新 API，因此目前只有少数浏览器支持它...

您可以查看[MDN](https://developer.mozilla.org/en/DOM/Using_full-screen_mode)以获得一些基本解释和示例

编辑：值得一提 > Gecko 和 WebKit 之间的区别：Gecko 自动将 CSS 规则添加到元素以将其拉伸以填充屏幕：“宽度：100%；高度：100%”

编辑 2：支持的浏览器只有 Firefox（从 10 开始）和 Chrome（我认为很早就不太确定他们何时完全支持它）......因为它是实验性的，你需要供应商前缀......

编辑 3：链接到“生活”[规范](http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html)

编辑 4：关于 IE 支持：11/15/2011 IEBlog 的 Ted Johnson 说 IE10 团队尚未决定是否实施 FullScreen API。然而，他指出，“Windows 8 Metro 风格的 Internet Explorer 始终是全屏的……和以前一样，F11 在桌面版 IE 中进入全屏模式。”</p>

编辑 5：[我可以使用](http://caniuse.com/fullscreen)- 另一个不错的表格，显示在最新的 Safari 中也可用...... Opera 是否在版本 12 中支持它仍然未知

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T17:23:21.693

有一个新的 HTML5 全屏 API。

这是它的演示站点。

[http://html5-demos.appspot.com/static/fullscreen.html](http://html5-demos.appspot.com/static/fullscreen.html)

# php - php 将数组传递给 JSON

> ID：10486295
> 
> 赞同：3
> 
> 时间：2012-05-07T17:21:29.643
> 
> 标签：php, json, array-push

我有一个 PHP 文件，它使用 array_push 创建一个类数组，我需要将此数组转换为 JSON 格式。该数组创建得很完美，但是当我尝试编码为 JSON 时，返回的值是一个空元素数组。

php的代码：

```
$return = array();

if($_GET['action'] == 'loadImg'){
    $id = $_GET['idAct'];
    $class = $var->selectActById($id);
    $list = $class->getImatgesAct();
    for($i = 0; $i < sizeof($list);$i++){
        $class = $var->findimatge($list[$i]->getIdBibl());
        array_push($return, $class);
    }
}
echo json_encode($return,true); 
```

JSON返回的值为：

```
[{},{}] 
```

谢谢

已编辑

var_dump：

```
array
  0 => 
object(imatgeclass)[4]
  private 'idimatge' => string '1' (length=1)
  private 'nomimatge' => string 'hydra' (length=5)
  private 'urlimatge' => string 'biblioimg/2012-05-06-23-19-17.jpg' (length=33)
  1 => 
object(imatgeclass)[3]
  private 'idimatge' => string '2' (length=1)
  private 'nomimatge' => string 'pen' (length=3)
  private 'urlimatge' => string 'biblioimg/2012-05-06-23-19-36.jpg' (length=33) 
```

类定义：

```
class imatgeclass{

private $idimatge, $nomimatge, $urlimatge;

public function setData($idimatge,$nomimatge,$urlimatge){
    $this->idimatge = $idimatge;
    $this->nomimatge = $nomimatge;
    $this->urlimatge = $urlimatge;      
}
public function getIdImatge(){
    return $this->idimatge;
}
public function setIdImatge($idimatge){
    $this->idimatge = $idimatge;
}
public function getNomImatge(){
    return $this->nomimatge;
}
public function setNomImatge($nomimatge){
    $this->nomimatge = $nomimatge;
}
public function geturlimatge(){
    return $this->urlimatge;
}
public function setUrlImatge($urlimatge){
    $this->urlimatge = $urlimatge;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:40:03.820

您的对象属性都是私有的——它们必须是公共的才能被 json_encode 访问。或者您需要从对象方法中调用 json_encode。

# java - JAVA ODFDOM：如何从 ODF 表中获取整数值

> ID：10486302
> 
> 赞同：0
> 
> 时间：2012-05-07T17:22:01.850
> 
> 标签：java, odf, odfdom

我正在使用此代码从 ODF 中的工作表中获取最大行数

```
public int getRowCount(String sheetName) throws XPathExpressionException, Exception

{

//reset rowCount to zero

        rowCount=0;

//xpath to reach Nodes of cell in first row

        int parameterCount=getColumnCount(sheetName);
        //System.out.println("Debug:ParameterCount="+parameterCount);
        for (int i=1;i<=parameterCount;i++)
        {
            String xpathStr="//table:table[@table:name='"+sheetName+"']/table:table-row/table:table-cell["+i+"][@office:value-type='void']";
            DTMNodeList nodeList = (DTMNodeList) xpath.evaluate(xpathStr, spreadSheet.getContentDom(), XPathConstants.NODESET);
            //System.out.println("Debug:RowsFoundWithData="+nodeList.getLength());
            System.out.println(nodeList.getLength());
            for(int j=0 ; j<nodeList.getLength();j++)
            {
                System.out.println("Debug:RowValue="+nodeList.item(j).getTextContent());
            }
            if(nodeList.getLength()-1>rowCount)
            {
                rowCount=nodeList.getLength()-1;
            }

    }

return rowCount;

    } 
```

但是此代码仅返回非整数值计数，如果工作表中列的任何行包含整数值，则它会跳过它并且此函数返回的行计数无效

它只计算字母数字值行

有什么方法可以让我获得正确的行数

JAR 使用 odfdom-java-0.8.7-jar-with-dependencies

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:28:34.830

尽管我认为您自己已经找到了答案，但我一直在努力解决类似的问题。对于这个原本很棒的工具，很难找到像样的例子。这是您在电子表格中所期望的：

```
OdfSpreadsheetDocument ods = OdfSpreadsheetDocument.newSpreadsheetDocument();
OdfTable table = SpreadsheetHandling.setNewTable(ods, "names");
System.out.println("Number of rows: " + table.getRowCount()); 
```

不幸的是，情况要复杂一些。当您在电子表格中并浏览将行添加到工作表的代码时，此方法是否会返回确切的行数。但是，当它正在加载文档然后读取行数时，它将返回可能的最大行数，因此：1048576。

但是，可以使用表具有的类型 row 的节点数。

```
OdfSpreadsheetDocument ods = OdfSpreadsheetDocument.newSpreadsheetDocument();
OdfTable table = SpreadsheetHandling.setNewTable(ods, "rowCount");
TableTableElement tte = table.getOdfElement();
NodeList nl = tte.getElementsByTagName("table:table-row");
System.out.println("Number of nodeelements: " + nl.getLength()); 
```

亲切的问候，

洛克

# php - 变量返回 0 而不是实际值

> ID：10486305
> 
> 赞同：0
> 
> 时间：2012-05-07T17:22:11.240
> 
> 标签：php, mysql

请在我的脚本中帮助我解决这个问题。在 INSERT 查询时 $article_id 返回 0，而实际上它不是 0 (1, 2, 3)。

我试图`$article_id`在代码的各个点回显，它实际上回显了我想要的。但是一旦我试图在 `isset($_POST['submit'])`它没有回显任何东西之后回显它。

我还检查了我在 MySQL 表中声明的类型....int。但仍将 0 插入数据库。

请问问题可能出在哪里？

感谢您的时间和耐心。

```
$page_name = 'about'; 
$id = "";
if (isset($_GET['id'])) 
{
    $id = $_GET['id'];  
    $past1 = mysql_query("SELECT *
                          FROM about
                          WHERE about_id =  '".$id."' "); 
    $row = mysql_fetch_array($past1);

    echo "<p>" .$row['about_head']."</p>";      
    echo   $row['about_content'];  

    $article_id = $row['about_id'] ;  

    $query6 = mysql_query("SELECT c.comment_body, c.comment_date
                           FROM comment AS c
                           INNER JOIN about AS ac ON c.article_id = ac.about_id
                           WHERE   c.article_id =  '".$article_id."'
                           AND page_name = '".page_name."'");

   while ($comment = mysql_fetch_assoc($query6)) 
   {
       echo "<b>Comment:</b> " . $comment['comment_body'] . "<br/>" ;           
       echo "<b>Date of Comment:</b> " . $comment['comment_date'];
       echo "<br/>" ;      
       echo "</div>";  

    }   
}                                          

if (isset($_POST['submit'])) 
{      
    $comment_body = mysql_real_escape_string($_POST['comment_body']);
    if (($comment_body == "")  
    {
        echo "<div class=\"error\" >" ;  
        echo "One/More Empty Field"; 
        echo "</div>";   

    } 
    else 
    { 
        $query = "INSERT INTO comment (comment_id, article_id, username, page_name,
                                       comment_body, comment_date)              
                  VALUES (NULL, '".$article_id."', '".$_SESSION['logged_username']."',
                          '".$page_name."', '".$comment_body."', NOW())";
        mysql_query($query);          

    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:31:28.787

您看到的 0 实际上是一个 PHP NULL，用于在 SQL 中转换为字符串时表示为 0 的未初始化变量。

假设您`$_GET['id']`在第一次加载时检索，并在另一个页面加载时执行 POST，`$article_id`则仅在第一次初始化。`$_GET['id']`除非设置，否则它不会被填充。因此，`$_SESSION`在第一次加载时将其存储并在处理 POST 时从那里访问它。

```
 // Inside if (isset($_GET['id']))...
 // article_id is retrieved and populated from the first SELECT statement...
 $article_id = $row['about_id'] ;
 // Store it in $_SESSION  (assume session_start() was called somewhere we don't see)
 $_SESSION['article_id'] = $article_id; 
```

稍后在您的查询中，从以下位置获取`$_SESSION`：

```
 $query = "INSERT INTO comment (comment_id, article_id, username, page_name,
                                   comment_body, comment_date)              
              VALUES (NULL, '".$_SESSION['article_id']."', '".$_SESSION['logged_username']."',
                      '".$page_name."', '".$comment_body."', NOW())"; 
```

根据评论，您似乎已经意识到 SQL 注入漏洞。一定不要忽视这些。在你去的时候对它们进行编码是很重要的，而不是试图稍后返回并填写适当的转义和边界检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:32:28.700

看看代码现在是否有效，如果不能进一步帮助您，请发表评论：

```
<?php
$page_name = 'about';
$id = "";
if (isset($_GET['id']))
{
  $id = $_GET['id'];
  $past1 = mysql_query("SELECT *
          FROM about
          WHERE about_id =  '".$id."' ");
  $row = mysql_fetch_array($past1);

  echo "<p>" .$row['about_head']."</p>";
  echo   $row['about_content'];

  $article_id = $row['about_id'] ;
  /* next line is for debugging, check if you got
  your $article_id variable populates with a value */
  echo "<p>My article_id var value is:" .$article_id."</p>";

  $query6 = mysql_query("SELECT c.comment_body, c.comment_date
           FROM comment AS c
           INNER JOIN about AS ac ON c.article_id = ac.about_id
           WHERE   c.article_id =  '".$article_id."'
           AND page_name = '".page_name."'");

  while ($comment = mysql_fetch_assoc($query6)) {
    echo "<b>Comment:</b> " . $comment['comment_body'] . "<br/>" ;
    echo "<b>Date of Comment:</b> " . $comment['comment_date'];
    echo "<br/>" ;
    echo "</div>";
  }
  /* I've moved the if POST here since the insertion is based
  on the existance of $article_id */
  if (isset($_POST['submit'])) {
    $comment_body = mysql_real_escape_string($_POST['comment_body']);
    if ($comment_body == "") { // here you had a sintax error, one more (: if (($comment_body == "") {
    echo "<div class=\"error\" >" ;
    echo "One/More Empty Field";
    echo "</div>";

    } else {
      $query = "INSERT INTO comment (comment_id, article_id, username, page_name,
                             comment_body, comment_date)
        VALUES (NULL, '".$article_id."', '".$_SESSION['logged_username']."',
                '".$page_name."', '".$comment_body."', NOW())";
      mysql_query($query);

    }
  }
} 
```

# android - 出现错误：java.lang.Stackoverflowerror

> ID：10486306
> 
> 赞同：2
> 
> 时间：2012-05-07T17:22:23.570
> 
> 标签：android, jakarta-mail, stack-overflow

首先，我尝试了所有 java.lang.Stackoverflowerror 错误问题，但没有改变这个错误。为什么我收到此错误？

我的 ListeleActivity 课程是；

```
 package com.mobil.eposta;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import javax.mail.Message;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class ListeleActivity extends Activity
{
    static List<String> gelen;
    static ListView listView;
    static ArrayList<String> konulist;
    static ArrayList<String> kimdenlist;
    static ArrayList<String> govdelist;
    static ArrayAdapter<String> arrayAdapter;
    static ArrayList<String> dosyaIsmi;
    static Message[] messageslist;
    static int messagePosition;
    static int onClickPosition;
    static boolean messageEkBulunuyormu;

    ArrayList<String> eklist;
    int clickKonum;
    static boolean ekvar;

    ListView lv;
    Button btnSave, btnClear;
    HashMap<Integer, Boolean> mCartItems = new HashMap<Integer, Boolean>();

    Baglanti baglantiNesnesi = new Baglanti();
//  EkDurumu ekdurumuNesnesi = new EkDurumu();
//  GoruntuleActivity goruntuleNesnesi = new GoruntuleActivity();

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listalt);

        konulist = (ArrayList<String>) baglantiNesnesi.getKonu();
        kimdenlist = (ArrayList<String>) baglantiNesnesi.getKimden();
        govdelist = (ArrayList<String>) baglantiNesnesi.getGovde();
        messageslist = baglantiNesnesi.messages;

        lv = (ListView) findViewById(R.id.list);
        LayoutInflater mLInflater = getLayoutInflater();
        final ListViewAdapter adapter = new ListViewAdapter(getApplicationContext(),
                kimdenlist, konulist, mLInflater);
        lv.setAdapter(adapter);
        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
              @Override
              public void onItemClick( AdapterView<?> parent, View item, 
                                       int position, long id) 
              {
                    final Intent intent = new Intent(ListeleActivity.this, GoruntuleActivity.class);
                    startActivity(intent);
                    onClickPosition = position;
                    Toast.makeText(ListeleActivity.this, "Bastın", Toast.LENGTH_SHORT).show();
              }
            });
    }
} 
```

我的 GoruntuleActivity.class 是；

```
public class GoruntuleActivity extends Activity
{
    ListeleActivity listeleNesnesi = new ListeleActivity();

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.epostagoruntuleme);
         }
}

   05-07 17:24:32.796: E/AndroidRuntime(728): FATAL EXCEPTION: main
05-07 17:24:32.796: E/AndroidRuntime(728): java.lang.StackOverflowError
05-07 17:24:32.796: E/AndroidRuntime(728):  at java.lang.Thread.currentThread(Thread.java:588)
05-07 17:24:32.796: E/AndroidRuntime(728):  at java.lang.ThreadLocal.get(ThreadLocal.java:59)
05-07 17:24:32.796: E/AndroidRuntime(728):  at android.os.Looper.myLooper(Looper.java:137)
05-07 17:24:32.796: E/AndroidRuntime(728):  at android.os.Handler.<init>(Handler.java:119)
05-07 17:24:32.796: E/AndroidRuntime(728):  at android.app.Activity.<init>(Activity.java:679)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:23)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.java:25)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.ListeleActivity.<init>(ListeleActivity.java:48)
05-07 17:24:32.796: E/AndroidRuntime(728):  at com.mobil.eposta.GoruntuleActivity.<init>(GoruntuleActivity.ja
05-07 17:24:33.006: D/dalvikvm(728): GC_FOR_MALLOC freed 3074 objects / 569272 bytes in 124ms
05-07 17:29:33.127: I/Process(728): Sending signal. PID: 728 SIG: 9 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mobil.eposta"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MobilEpostaUygActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <activity android:name=".ListeleActivity"/>
         <activity android:name=".GoruntuleActivity"/>
    </application>
     <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:44:40.770

不要自己创建活动。这些行是不必要的（并导致您的堆栈溢出）：

```
ListeleActivity listeleNesnesi = new ListeleActivity();

GoruntuleActivity goruntuleNesnesi = new GoruntuleActivity(); 
```

您无需调用活动的构造函数，而是通过创建一个 new`Intent`并将其传递给[`startActivity`](http://developer.android.com/reference/android/content/Context.html#startActivity%28android.content.Intent%29). 阅读这篇关于[Android Fundamentals](http://developer.android.com/guide/topics/fundamentals.html)的文档以获得更多解释。

# plone - 仅为 paregistry XML 条目创建自定义控制面板

> ID：10486307
> 
> 赞同：0
> 
> 时间：2012-05-07T17:22:27.100
> 
> 标签：plone

如果仅将设置声明为 registry.xml，如何创建 Plone configlet？

[http://pypi.python.org/pypi/plone.app.registry](http://pypi.python.org/pypi/plone.app.registry)仅向您展示如何在使用模式定义的设置时执行此操作。

即如何将paz3cform Form 映射到registry.xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:12:48.117

这不可能。

你需要有 settings.py 文件。

这是一个例子：

[https://github.com/miohtama/silvuple/blob/master/silvuple/settings.py](https://github.com/miohtama/silvuple/blob/master/silvuple/settings.py)

# silverlight - Windows Phone 上的 F# 引用

> ID：10486311
> 
> 赞同：3
> 
> 时间：2012-05-07T17:22:33.210
> 
> 标签：silverlight, f#, windows-phone

我正在为 Windows 手机使用 Daniel Mohl 的 F# 模板，但捆绑的 FSharp.Core 似乎没有一些报价代码。我正在尝试从常规 .NET 移植此代码：

```
open System.ComponentModel
open Microsoft.FSharp.Quotations
open Microsoft.FSharp.Quotations.Patterns

[<AbstractClass>]
type ViewModelBase() =

    let propertyChanged = new Event<_, _>()

    let toPropName expr =
        match expr with
        | PropertyGet(a, b, list) -> b.Name
        | _ -> failwith "Unsupported: " + expr.ToString()

    interface INotifyPropertyChanged with
        [<CLIEvent>]
        member x.PropertyChanged = propertyChanged.Publish

    member x.NotityPropertyChanged expr =
        propertyChanged.Trigger(x, new PropertyChangedEventArgs(toPropName expr)) 
```

但是编译器抱怨 Microsoft.FSharp.Quotations.Patterns 和 PropertyGet。它似乎甚至不知道 Expr 类型。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:43:35.980

I replaced the FSharp.Core file that comes in the template by the one that comes in the [F# April 2011 CTP](http://www.microsoft.com/en-us/download/details.aspx?id=11100) in the WindowsPhone7\Silverlight\4.0\bin folder, and with this version it now compiles fine

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:57:59.083

我比较了您提到的模板中的 FSharp.Core.dll 和使用 .Net Reflector 创建 F# Silverlight 库时引用的那些，它们是不同的！:) 添加到模板的依赖项文件夹中的 Thouse 没有引号。

所以我的前两个想法是要么添加 F# SCL 并在那里创建你的视图模型，要么根本不使用这个模板。但我实际上喜欢这个模板或者它的外观至少......所以还是谢谢你提到它:)

# django - django.http.HttpResponse 不能正确处理 unicode

> ID：10486315
> 
> 赞同：0
> 
> 时间：2012-05-07T17:22:42.200
> 
> 标签：django, unicode, utf-8, django-views

在教程 3 之后，我编写了这个简单**的 views.py**：

```
# coding = UTF-8
from django.http import HttpResponse

def index(request):
    return HttpResponse( u"Seznam kontaktů" ) 
```

我还尝试了其他技巧，例如 using `django.utils.encoding.smart_unicode(...)`, the `u"%s" % ...`trick 等。

无论我尝试什么，我总是得到“*非 ASCII 字符*”错误：

```
SyntaxError at /kontakty/

Non-ASCII character '\xc5' in file C:\Users\JindrichVavruska\eclipse\workspace\ars\src\ars_site\party\views.py 
on line 5, but no encoding declared; 
see http://www.python.org/peps/pep-0263.html for details (views.py, line 5) 
```

更神秘的是，我在其他文件中使用了很多国家字符串，例如**models.py**，eg `text = models.CharField( u"Všechen text", max_length = 150)`，完全没有问题。

我发现此站点上的其他答案无关紧要，建议的更改对我的views.py没有影响

金德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:51:00.033

应该`# -*- coding: utf-8 -*-`不是`UTF-8`。有关详细信息，请参阅[PEP-263 。](http://www.python.org/dev/peps/pep-0263/)您还应该将文件另存为 UTF-8。检查编辑器的设置。

# text - 如何将文本输入 Unity？

> ID：10486316
> 
> 赞同：-2
> 
> 时间：2012-05-07T17:22:54.843
> 
> 标签：text, unity3d, unityscript

我有一个输出“hello world”的基本 Java 程序。我想做的是编写一个 Java 脚本来运行该程序并将其导入 Unity，以便我可以在 Unity 的程序中使用它。

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:09:03.820

您可以通过 OSC（打开声音控制）从 Java 应用程序与 Unity 进行通信，并将文本、命令触发器或将外部文件（xml 或类似文件）加载到 Unity 中。

Unity 和开放声音控制 [http://www.sundh.com/blog/2012/07/unity-processing-demo/](http://www.sundh.com/blog/2012/07/unity-processing-demo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:47:27.353

在统一时，您必须使用函数 OnGui() 来显示文本。在相关文档中，您有很多示例。

要在控制台中显示消息，只需在 javascript 中使用：

```
Debug.Log("Hello world"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T01:17:57.613

您还可以将文件放在统一项目的 /Resources 文件夹中，然后在运行时加载它们。这些几乎可以是任何东西。模型、预制件、材料……可以是文本文件（可能是您解析的逗号分隔的 txt 文件）或更典型的 .xml 文件，您可以轻松地从中访问和提取数据（文本）。

要加载任何资源文件，请使用 resources.load() [http://docs.unity3d.com/Documentation/ScriptReference/Resources.Load.html](http://docs.unity3d.com/Documentation/ScriptReference/Resources.Load.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-05T15:23:30.390

不要使用 OnGui，因为这对性能不利，而是使用 Canvas 来编辑您喜欢的文本并将其放置在您想要的（父）对象上或（父）对象中。

为了使这看起来更好，将字体大小调高，将宽度和高度调低。这将使它看起来更清晰。

[![位于这里](../Images/33fc9afdc265a5eac5b46f4b53ea4544.png)](https://i.stack.imgur.com/btZ55.png)

# c# - 缺少 Microsoft.Windows.Design.dll

> ID：10486319
> 
> 赞同：2
> 
> 时间：2012-05-07T17:23:11.130
> 
> 标签：c#, wpf

我下载了一个引用 Microsoft.Windows.Design.dll 的项目，但它不在我的系统上。我在哪里可以得到这个包裹？

```
using Microsoft.Windows.Design.PropertyEditing; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:30:57.897

该命名空间通常位于`Microsoft.Windows.Design.Interaction.dll`程序集中，而不是`Microsoft.Windows.Design.dll`.

例如，[`NewItemFactory`](http://msdn.microsoft.com/en-us/library/microsoft.windows.design.propertyediting.newitemfactory.aspx)类：

> 命名空间：Microsoft.Windows.Design.PropertyEditing
> 
> 程序集：Microsoft.Windows.Design.Interaction（在**Microsoft.Windows.Design.Interaction.dll**中）

# seo - 将超过 100K 的页面链接在一起而不会受到 SEO 的惩罚

> ID：10486321
> 
> 赞同：7
> 
> 时间：2012-05-07T17:23:17.403
> 
> 标签：seo, web, web-crawler

我正在制作一个网站，该网站将对互联网上数十万个其他网站的隐私政策进行审查。它的初始内容是基于我运行[CommonCrawl](http://commoncrawl.org/) 50 亿页网页转储并使用脚本[分析所有隐私政策](https://stackoverflow.com/questions/9709293/interesting-nlp-machine-learning-style-project-analyzing-privacy-policies)，以识别某些特征（例如“出售您的个人信息”）。

根据[SEO MOZ SEO 初学者指南](http://www.seomoz.org/beginners-guide-to-seo/basics-of-search-engine-friendly-design-and-development)：

> 搜索引擎往往只抓取任何给定页面上的大约 100 个链接。这种宽松的限制对于减少垃圾邮件和保持排名是必要的。

我想知道什么是创建导航网络的聪明方法，它不会留下孤立的页面，但仍然可以避免他们所说的这种 SEO 惩罚。我有几个想法：

*   创建按字母顺序排列的页面（或 Google Sitemap .xml），例如“以 Ado* 开头的站点”。例如，它将在那里链接“Adobe.com”。这或任何其他无意义的页面拆分似乎有点做作，我想知道谷歌是否会不喜欢它。
*   使用元关键字或描述进行分类
*   找到一些方法来应用更有趣的类别，例如基于地理或基于内容的类别。我在这里担心的是我不确定如何将这些类别全面应用于这么多网站。我想如果需要，我可以编写另一个分类器来尝试分析爬网中的页面内容。不过，这听起来像是一项艰巨的工作。
*   使用 DMOZ 项目来帮助对页面进行分类。

Wikipedia 和 StackOverflow 通过允许用户对所有页面进行分类或标记，显然很好地解决了这个问题。就我而言，我没有那么奢侈，但我想找到最好的选择。

这个问题的核心是谷歌如何响应不同的导航结构。它会惩罚那些以程序化/无意义的方式创建网页的人吗？或者只要一切都通过链接连接，它就不在乎了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:06:58.280

Google PageRank 不会因为您在一个页面上拥有超过 100 个链接而对您进行处罚。但是每个超过某个阈值的链接在 PageRank 算法中的价值/重要性都会降低。

引用 SEOMOZ 和 Matt Cutts 的话：

> **你会受到惩罚吗？**
> 
> 在我们深入挖掘之前，我想明确表示，100 个链接的限制从来都不是惩罚的情况。在 2007 年 8 月的一次采访中，兰德引用了马特·卡茨的话说：
> 
> > “将链接数量保持在 100 以下”在技术指南部分，而不是质量指南部分。这意味着如果页面上有 101 或 102 个链接，我们不会删除该页面。将此更多地视为经验法则。
> 
> 当时，Google 很可能在某个时间点之后开始忽略链接，但最坏的情况是，这使那些后 100 个链接无法通过 PageRank。该页面本身不会被取消索引或受到惩罚。

所以问题真的是如何让谷歌认真对待你的所有链接。您可以通过生成一个 XML 站点地图供 Google 抓取来完成此操作（您可以拥有一个静态的 sitemap.xml 文件，也可以动态生成其内容）。您需要阅读 Google Webmaster Tools 帮助文档的[About Sitemaps](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184)部分。

就像页面上有太多链接是一个问题一样，XML 站点地图文件中有太多链接也是一个问题。您需要做的是对您的 XML 站点地图进行分页。Jeff Atwood 谈到 StackOverflow 如何实现这一点：[站点地图的重要性](http://www.codinghorror.com/blog/2008/10/the-importance-of-sitemaps.html)。Jeff 还在[StackOverflow 播客 #24](https://blog.stackoverflow.com/2008/10/podcast-24/)上讨论了同样的问题。

此外，这个概念也适用于[必](http://www.bing.com/toolbox/webmaster/)应。

# c++ - 图可分性

> ID：10486325
> 
> 赞同：4
> 
> 时间：2012-05-07T17:23:24.610
> 
> 标签：c++, algorithm, graph, division

给定一个简单的无向图，其中包含 N 个顶点，编号为 1 到 N，每个顶点包含一个来自 {1,2,..7} 的数字。从带有空字符串 S 的顶点 1 开始，我们穿过一些顶点（没有限制）到达顶点 N。对于途中的每个顶点，我们将相应的数字添加到字符串 S 的右侧。最后我们得到S 作为十进制整数。要求你找到一个满足 S 可以被它的所有数字整除的方式，并且 S 的数字之和必须尽可能小。

输入

有几个测试用例（最多十五个），每个组成如下：

```
The first line contains a positive integer N (N ≤ 100).
The second line contains N digits (separated by spaces), the i-th digit is the value of the i-th vertex.
N last lines, each contains N values of {0, 1} (separated by spaces), the j-th value of the i-th line is equal to 1 if there is an edge connecting two vertices (i, j), otherwise 0. 
```

输入以 N = 0 结束。

输出

对于每个测试用例，在一行上输出找到的最小数字总和，如果没有解决方案，则输出 -1。

例子

输入：4

1 2 1 4

0 1 1 1

1 0 0 1

1 0 0 1

1 1 1 0

输出：7

请指导我

可能存在自循环和循环，因此可以访问节点 1 和节点 N 任意次数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:52:33.993

如果将给定图转换为不允许循环的其他图，则可以使用[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)解决此问题。

为此，让我们从字符串被 7 整除开始。看看这个序列：1、10、100，...（mod 7）。由于 7 是素数，由于[费马小定理，10](http://en.wikipedia.org/wiki/Fermat%27s_little_theorem) ^(7-1) = 1 (mod 7) 。这意味着 1, 10, 100, ... (mod 7) 序列是周期性的，周期为 6。这将用于转换图形，这也允许使用 S [n] [-1] ( mod 7): S [n] = S [n-1] + 10 ^(n%6) * n_th_digit (mod 7)。

有必要从节点 N 开始最短路径搜索，因为该路径可能在转换图的几个节点之一处结束。这也允许快速确定（使用路径的前 2 个节点）是否允许访问节点“5”、节点“4”和其他“偶数”节点。

算法的开放集（优先级队列）应该包含优先级本身（数字总和），只要 3 个附加位和 3 个余数：允许“4”、“3”访问、“7”访问`S % 3`、、、`S % 7`和`S.length % 6`。

图形应转换如下。每个顶点扩展为 3 个顶点，一个只允许用于`S%3==0`，其他 - 用于`S%3==1`和`S%3==2`。然后将每个顶点扩展为 7（对于`S%7`），然后将每个顶点扩展为 6（对于`S.length % 6`）。可以将所有这些扩展拟合到原始图：只需向每个节点添加一个 3D 数组（大小为 3*7*6）的反向指针。在搜索最短路径时，非空反向指针确定算法的闭集（它们不允许循环）。当找到最短路径时，反向指针允许重建该路径中的节点序列。找到最短路径的时刻是通过访问节点 1 来确定的`(node_3_not_visited || S%3==0) && (node_7_not_visited || S%7==0)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:00:17.203

首先在数学上找到集合中给定数字的 LCM。

让我解释一下场景....给定一组数字...找到LCM，然后以这样一种方式遍历vetices，使得它们的路径产生数字。由于它的LCM，它是总和为最小值的数字

对于集合 {0,1,2,3,4} LCM 是 12 所以从 1 遍历到 2 集合 {0,1,2,3,4,5,6,7} LCM 是 420 ..（我想我是的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:56:51.240

使用[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)搜索算法，其中“成本”是数字的总和，可除性决定了您可以遍历哪些边。

# wordpress - WordPress 下拉菜单

> ID：10486326
> 
> 赞同：0
> 
> 时间：2012-05-07T17:23:26.833
> 
> 标签：wordpress

我正在为非营利组织创建一个 Wordpress 主题，我希望能够为他们创建下拉菜单。但是由于某种原因，下拉菜单与父页面项目不对齐，即我将项目“资源”设置为父页面的“关于”，当您将鼠标悬停在“关于”上时，“资源”选项卡未在下方对齐关于。希望这是有道理的。

这是代码。

的HTML

```
<div id="nav">
<div class="menu">
<ul>
<li class="current_page_item"><a href="http://localhost/raf/" title="Home">Home</a></li>

<li class="page_item page-item-8"><a href="http://localhost/raf/?page_id=8">News</a>

<ul class='children'>
<li class="page_item page-item-75"><a href="http://localhost/raf/?page_id=75">And Yet Another</a></li></ul></li>

<li class="page_item page-item-12"><a href="http://localhost/raf/?page_id=12">About</a>
<ul class='children'><li class="page_item page-item-70"><a href="http://localhost/raf/?page_id=70">Dropdown Menu</a></li>
<li class="page_item page-item-73"><a href="http://localhost/raf/?page_id=73">Another Dropdown</a></li></ul></li>

</ul></div>
</div><!--End #nav--> 
```

和CSS...

```
#nav ul ul {
display: none;
position: absolute;
top: 38px;
left: 0;
height:20px;
float: left;
width: 190px;
z-index: 99999;         
}

#nav ul ul a {
color:#555;
font-size:12px;
border: 1px solid #ddd;
}

#nav ul ul li {
top:0;
min-width: 180px;
background-color:#333;
}

#nav ul ul ul {
left: 100%;
top: 0; 
}

#nav ul ul a {
font-size:12px;
background: #e5e5e5;
line-height: 1em;
padding: 15px;
width: 160px;
height: 10px;
} 
```

谢谢一堆！希望有人可以帮助解决这个问题。

JRW

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:27:58.817

这很可能是您需要进行的 CSS 更正。如果您要在网站前端工作，请熟悉 Firebug 或 Chrome 网络检查器。如果您有指向该网站的链接，我将能够告诉您要解决的问题。此外，您真的不应该在代码中使用绝对路径。这将使您的转移过程更容易。

代替：`<a href="http://localhost/raf/?page_id=8">News</a>`

和：`<a href="<?php echo get_option('home'); ?>/?page_id=8">News</a>`

如果您可以使用 Wordpress 动态菜单，那就更好了（http://codex.wordpress.org/WordPress_Menu_User_Guide）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:50:42.740

我发现我的问题是我需要添加位置：相对于父元素，即父 ul 中的列表项。感谢所有花时间尝试帮助我的人！

# c++ - Lua_hook 和 lua_Debug->event

> ID：10486328
> 
> 赞同：0
> 
> 时间：2012-05-07T17:23:36.567
> 
> 标签：c++, c, lua

我正在尝试学习lua并用c ++构建虚拟机，我想编写一个调试类，让我的生活更轻松。我实际上被阻止了，因为我不明白回调是如何完成的，这是我的代码：

```
 //Im here adding my fct to a global map.
 void Debugger::setFctHook(void)                
{                                              
  g_hookers[LUA_MASKCALL] = HookCall;          
  g_hookers[LUA_MASKRET] = HookRet;            
  g_hookers[LUA_HOOKTAILRET] = HookRet;        
  g_hookers[LUA_MASKLINE] = HookLine;          
  g_hookers[LUA_MASKCOUNT] = HookCount;                                         
} 
```

这是我的构造函数：

```
Debugger::Debugger(VirtualMachine &vm, uint count)         
  : VM_(vm), count_(count)                                 
 {                                                          
  setFctHook();                                            
  if (vm.isFonctionnal())                                  
   {                                                      
     vm.addDebugger(this);                                
     lua_sethook(vm.getLua(), HookEvents, 0, count_);     
   }                                                      
} 
```

和我的二传手：

```
 void    Debugger ::setHook(int hookMask) const                   
 {                                                               
   std::cout << hookMask << "SETHOOOOOOOOOK" << std::endl;       
    lua_sethook(VM_.getLua(), HookEvents, hookMask, count_);      
 } 
```

这是我的中央钩子：

```
static void HookEvents(lua_State *lua, lua_Debug *debug) 
{                                                        
  std::map<int, fctHook>::iterator it;  
  std::cout << debug->event << std::endl;
  it = g_hookers.find(debug->event);   
  if (it != g_hookers.end())    
  {    
    std::cout << "First: " << it->first << std::endl;
    it->second(lua);              
  }                     
} 
```

问题是我的 setter 中显示的值与我的中央函数挂钩中打印的值不同，我尝试了许多定义，但在不同的值中看不到任何逻辑。

```
 Result : 
 8 SETHOOOOOOOOOK // received on my setter.
 3 // received on my central hook 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:13:27.203

我解决了我的问题，问题是我的地图上有错误的值，钩子的正确定义是：

```
void Debugger::setFctHook(void)                
{                                              

 g_hookers[LUA_HOOKCALL] = HookCall;      
 g_hookers[LUA_HOOKRET] = HookRet;        
 g_hookers[LUA_HOOKTAILRET] = HookRet;    
 g_hookers[LUA_HOOKLINE] = HookLine;      
 g_hookers[LUA_HOOKCOUNT] = HookCount;
} 
```

# c# - 返回一个空的 mvc 部分视图的干净方法

> ID：10486329
> 
> 赞同：19
> 
> 时间：2012-05-07T17:23:46.443
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-partialview

在 cshtml 文件中，根据条件，返回空部分视图的最佳方法是什么？

现在我有：

```
@if(Model.Count() > 0)
{
  loooonng partial view block of markup code
} 
```

我怎样才能重新做它看起来更接近这个：

```
@if(Model.Count() == 0)
{
  render an empty partial view
}

  loooonng partial view block of markup code goes here   <- This will obviously get executed only if Model.Count() > 0 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T17:27:05.247

我一直在使用

```
return Content(""); 
```

并且工作正常。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-03T11:58:55.330

不确定您是否仍然需要答案，但我遇到了这个问题，这就是我在视图中所做的：

```
@if(Model.Count() == 0)
{
return; // a simple return will stop execution of the rest of the View
} 
```

在控制器级别，我创建了一个新类并在我的操作中返回它：

```
public class EmptyPartialViewResult : PartialViewResult
{
    public override void ExecuteResult(ControllerContext context)
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-05-23T09:33:32.680

如果您要返回一个`PartialViewResult`我发现在控制器中您可以使用

```
return default(PartialViewResult); 
```

或者

```
return null; 
```

没有任何问题。我能想到的唯一考虑是你是否使用

```
var partialView = Html.Action("Action", "Controller"); 
```

在您看来，那么您将需要检查是否为空。`Html.RenderAction`看来接受没问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-04T06:27:30.797

使用[EmptyResult](https://msdn.microsoft.com/en-us/library/system.web.mvc.emptyresult(v=vs.118).aspx)类：

```
return new EmptyResult(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-09T18:31:56.873

视图不应该决定它应该是空的还是包含某些东西。视图应该尽可能“愚蠢”，以“花哨”的方式简单地显示模型中的数据。由控制器决定输出是空的还是包含一些要显示的数据。换句话说，由控制器返回空视图或非空视图。

## 解决方案

在 Views/Shared 下创建一个空视图（空 *.cshtml 文件）：

> ```
> MVC_Project 
> ├── Views
>     ├── Shared
>         ├── _Empty.cshtml 
> ```

控制器代码：

```
public virtual PartialViewResult SomeAction()
{
    //some condition to determine if the view should be empty
    //maybe check if some properties of the model are null?
    if(returnEmptyView) 
        return PartialView("~/Views/Shared/_Empty.cshtml");

    return PartialView("~/Views/Something/NormalView.cshtml", model);
} 
```

# xcode - 如何卸载 xcode 4.3.2？

> ID：10486332
> 
> 赞同：0
> 
> 时间：2012-05-07T17:24:06.507
> 
> 标签：xcode, terminal, device

我需要帮助来卸载 xcode 4.3.2

我在终端试过

```
sudo Developer/Library/uninstall-devtools --mode=all 
```

但是错误，请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:38:12.503

从 Xcode4.3 开始，只需将应用拖到回收站即可卸载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:40:33.533

我相信从 Xcode 4.3 开始（它是最近的），Xcode 不再在 /Developer 中，但现在是 OS X 中的常规应用程序......所以要卸载它，只需删除 /Applications/Xcode 目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:31:26.363

从 Mac 卸载应用程序的最佳方法是使用[“清理我的 Mac”](http://macpaw.com/)

只需打开清理我的 Mac，转到卸载应用程序选项卡，然后将应用程序图标拖放到其中即可。您的应用程序将从您的 Mac 完全卸载。

![清洁我的 Mac，卸载应用程序选项卡](../Images/b263e1f1d837c75001772d82cbd1e615.png)

# ssas - 按度量值过滤

> ID：10486333
> 
> 赞同：3
> 
> 时间：2012-05-07T17:24:11.770
> 
> 标签：ssas, mdx

是否可以按度量值进行过滤？在我的场景中，我需要通过 [Measures].[Returned Widget Count] （即 1 或 0）将 Widget 数量限制为仅在 Measure = 1 的情况下。例如，如下所示：

```
 Select  {
            (
            [Dim Widget].[Build Site].[The Moon],
            [Dim Date].[Build Day].[2012-04-24],
            [Measures].[Widget Count]
            ),
            (
            [Dim Widget].[Build Site].[The Moon],
            [Dim Date].[Build Day].[2012-04-24],
            [Measures].[Returned Widget Count]
            )
            }   on 0
    from    (
            Select  [Dim Widget].[Build Site] on 0
            From    [Widgetizer]
            Where   Filter(
                    [Dim Widget].[Serial Number].Members,
                    [Measures].[Returned Widget Count].Value > 0
                    )
            ) 
```

查询执行，但它没有过滤我的人口。我知道这一点，因为它返回与以下相同的结果：

```
 Select  {
            (
            [Dim Widget].[Build Site].[The Moon],
            [Dim Date].[Build Day].[2012-04-24],
            [Measures].[Widget Count]
            ),
            (
            [Dim Widget].[Build Site].[The Moon],
            [Dim Date].[Build Day].[2012-04-24],
            [Measures].[Returned Widget Count]
            )
            }   on 0
    from    [Widgetizer] 
```

甚至还没有应用过滤器功能的地方。

我如何才能将人口减少到仅在度量是特定值的情况下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:29:44.727

我认为[过滤器](http://www.iccube.com/support/documentation/mdx/Filter.html)工作正常。问题可能出在层次结构的内容 (?) [Dim Widget].[Serial Number] - 如果您有 [All] 成员，那么以下过滤器也会选择它：

Filter( [Dim Widget].[Serial Number].Members, [Measures].[Returned Widget Count].Value > 0 )

意味着子选择什么都不做。怎么写：

Filter([Dim Widget].[Serial Number].Members, [Measures].[Returned Widget Count].Value = 1)

# crystal-reports - 有没有办法检测带有“可以增长”的字段标记何时截断了字段数据？

> ID：10486334
> 
> 赞同：1
> 
> 时间：2012-05-07T17:24:13.710
> 
> 标签：crystal-reports, crystal-reports-2008

我通常不使用水晶，但我花了将近 2 天的时间寻找一种方法来做到这一点。

问题是我需要在报告中显示多行文本，但需要在 8 行后截断并显示“更多”提示以通知用户他们需要查看其余部分详情在线。这最初是通过将数据存储为已经按大小换行的单独行并使用公式计算行数并有条件地显示单独的“更多”字段来处理的。他们已经在文本中添加了使用 html 的功能，但这使得当前的处理方式错误地换行并显示 html 标记。

我编写了一个数据库函数来将文本组合到一个字段中，并使用 HTML 文本解释在其他 7 个不限制文本长度的报告上正确显示它，并且最大行数非常适合限制文本大小，我只是无法弄清楚如何在需要时显示“更多”提示。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:12:42.437

理想情况下，DB 字段的属性将返回其显示的行数。不幸的是，没有这样的财产。

您可以尝试计算行结束字符的数量（例如回车、换行）。如果它们 > 7，则显示超链接。在 HTML 情况下，您必须计算结束元素（例如

）。您可以使用[RegEx UFL](https://stackoverflow.com/questions/439829/crystal-reports-is-there-a-way-to-regex-in-crystal-reports)来更轻松地识别元素。

可能最简单的方法是到数据库计算行数并将其作为另一个字段返回。使用此字段隐藏/显示超链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:17:35.270

脾气暴躁的极客，

如果您的数据库函数现在将文本组合到一个字段中，这是否意味着仍然存储带有分隔行的原始方式？如果是这样，为什么不添加另一个名为“行数”的计算字段来计算旧的基于行的数据？

所以你仍然有你的新组合 HTML 字段*和*这个新字段，当'line-count > x'时你可以使用它来显示'更多'按钮？

或者，另一种选择可能会起作用，但会有点棘手。也就是当字段长度超过x时，使显示更多按钮触发的公式。问题是没有显示 html 标记，并且大量使用它会扭曲显示“更多”按钮之前所需的文本量。换句话说，一个大量使用标记（和标签）的字段可能会比它应该更早地强制“更多”按钮。除非您可以以某种方式使您的“行数”计算字段排除标记或使长度计算相同。

如果 MSSQL 或 Crystal Reports 可以运行正则表达式来去除标记，这将是可能的。

如果以上都不起作用，我唯一能建议的另一件事是研究 UDF。Crystal 允许您加载您编写的外部库。这些将读取您编写的函数并将它们显示在 Crystal 内部的函数列表中。如果你这样做，那么你可以很容易地编写一个例程来剥离 HTML 并计算何时应该显示更多按钮。

祝你好运。

# sql-server-2008 - 递归 Linq 或 Sql 查询以获取自引用表中每个类别的最高父级

> ID：10486339
> 
> 赞同：1
> 
> 时间：2012-05-07T17:24:25.363
> 
> 标签：sql-server-2008, tsql, linq-to-sql, linq-to-entities

例如，如果我有如下表：-

```
 create table Categories(CategoryId int primary key,
 ParentCategoryId int foreign key references Categories(CategoryId)) 
```

例如，如果我的表中有以下数据：-

```
CategoryID  ParentCategoryId
1           2
2           3
3           4
4           NULL
5           6
6           7
7           NULL
8           9
9           NULL

Result:     

CategoryId  ParentCategoryId
1           4
2           4
3           4
4           NULL
5           7
6           7
7           NULL
8           9
9           NULL 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:42:54.103

在 SQL 中，您可以这样做：

```
DECLARE @childId int
SET @childId = 1

DECLARE @nextId int
DECLARE @currentId int

SET @nextId = @childId

WHILE (NOT (@nextId IS NULL))
BEGIN
    SET @currentId = @nextId

    SELECT @nextId = ParentCategoryId
    FROM Categories
    WHERE CategoryId = @currentId
END

SELECT @currentId AS RootCategoryId 
```

在 Linq 中，您正在查看以下内容：

```
public int GetRootCategoryId(int childId)
{
    int? nextId = childId
    int? currentID;

    while (nextID != null)
    {
        currentID = nextID;
        nextID = (from category in db.Categories
                 where category.CategoryId = currentID
                 select category.ParentCategoryId).First();
    }

    return currentID;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:54:51.867

```
CREATE TABLE #Parents (CategoryID INT PRIMARY KEY, ParentCategoryID INT)
INSERT #Parents
SELECT *
FROM Categories
WHILE @@ROWCOUNT != 0 BEGIN
    UPDATE p
    SET p.ParentCategoryID = c.ParentCategoryID
    FROM #Parents p
    JOIN Categories c ON p.ParentCategoryID = c.CategoryID
    WHERE c.ParentCategoryID IS NOT NULL
END
SELECT *
FROM #Parents
ORDER BY 1
DROP TABLE #Parents 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T19:26:55.160

这是递归 CTE 解决方案。可能更优雅和高效？

```
WITH TopLevelParents AS (
    SELECT CategoryID, ParentCategoryID
    FROM Categories
    WHERE ParentCategoryID IS NULL
    UNION ALL
    SELECT c.CategoryID, ISNULL(p.ParentCategoryID, p.CategoryID) ParentCategoryID
    FROM Categories c
    JOIN TopLevelParents p ON c.ParentCategoryID = p.CategoryID
)
SELECT *
FROM TopLevelParents
ORDER BY 1 
```

# nginx - Nginx 和 auth_basic 与 cgit

> ID：10486340
> 
> 赞同：0
> 
> 时间：2012-05-07T17:24:31.170
> 
> 标签：nginx, cgit

在运行 Nginx 的 Arch Linux 服务器上，我正确设置了 cgit。我想用一个基本的身份验证密码来保护 cgit，除了一个目录`/pub/`。如[文档](http://wiki.nginx.org/HttpAuthBasicModule#auth_basic)中所见，我考虑在上下文中添加身份验证，并在目录的上下文中`server`获取异常。我尝试[了此链接](http://nginxlibrary.com/password-protect-a-directory/)以正确获取路径。`location``/pub/`

这里是对应部分的nginx的配置文件。

```
server {
    listen       80;
    server_name  git.nicosphere.net;
    index cgit.cgi;
    gzip off;

    auth_basic "Restricted";
    auth_basic_user_file /srv/gitosis/.htpasswd;

    location / {
        root /usr/share/webapps/cgit/;
    }

    location ^~ /pub/  {
        auth_basic off;
    }

    if (!-f $request_filename) {
       rewrite ^/([^?/]+/[^?]*)?(?:\?(.*))?$ /cgit.cgi?url=$1&$2 last;
    }

    location ~ \.cgi$ {
        gzip off;
        include fastcgi_params;
        fastcgi_pass    127.0.0.1:9001;
        fastcgi_index   cgit.cgi;
        fastcgi_param   SCRIPT_FILENAME /usr/share/webapps/cgit/cgit.cgi;
        fastcgi_param   DOCUMENT_ROOT /usr/share/webapps/cgit/;
    }
} 
```

这要求我对任何 url 进行身份验证。对于一些更简单的测试，我尝试在没有身份验证的情况下离开 root，并且只`/pub/`进行身份验证。在这种情况下，它根本不要求输入密码。到目前为止，我设法保护了一切或什么都没有。

感谢您的帮助，并为我的近似英语道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:10:50.430

我想你想要这样的东西：

```
server {
    listen       80;
    server_name  git.nicosphere.net;
    index cgit.cgi;
    gzip off;

    root /usr/share/webapps/cgit;

    # $document_root is now set properly, and you don't need to override it
    include fastcgi_params;
    fastcgi_param   SCRIPT_FILENAME $document_root/cgit.cgi;

    location / {
        try_files $uri @cgit;
    }

    # Require auth for requests sent to cgit that originated in location /    
    location @cgit {
        auth_basic "Restricted";
        auth_basic_user_file /srv/gitosis/.htpasswd;

        gzip off;
        # rewrites in nginx don't match the query string
        rewrite ^/([^/]+/.*)?$ /cgit.cgi?url=$1 break;
        fastcgi_pass    127.0.0.1:9001;
    }

    location ^~ /pub/  {
        gzip off;
        rewrite ^/([^/]+/.*)?$ /cgit.cgi?url=$1 break;
        fastcgi_pass    127.0.0.1:9001;
    }
} 
```

# c# - 希望 Autofac 不注册任何具有多个实现的接口

> ID：10486342
> 
> 赞同：3
> 
> 时间：2012-05-07T17:24:36.847
> 
> 标签：c#, .net, dependency-injection, autofac

我目前正在为我们公司测试 Autofac。

我们希望有以下规则：

1.  如果一个接口只实现了一次，则使用 builder.RegisterAssemblyTypes 自动添加它（见下文）。

2.  否则，我们需要确保手动编写将决定哪个实现是“默认”实现的规则。

我有以下代码：

```
var builder = new ContainerBuilder();
builder.RegisterAssemblyTypes(Assembly
    .Load("Lunch.Service")).As(t => t.GetInterfaces()[0]);
builder.RegisterType<ConsoleLoggerService>()
    .As<ILoggerService>().SingleInstance();
builder.RegisterModule(new DestinationModule());
builder.RegisterType<TransportationService>()
    .As<ITransportationService>().PropertiesAutowired(); 
```

现在，它正在工作，但它决定了第一个实现是哪个，并将自动创建它。如果我们不手动创建“规则”，我们希望将其设为手动过程并引发错误。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:32:07.387

你可以这样做：

```
cb.RegisterAssemblyTypes(assembly).Where(type =>
{
    var implementations = type.GetInterfaces();

    if (implementations.Length > 0)
    {
        var iface = implementations[0];

        var implementers =
            from t in assembly.GetTypes()
            where t.GetInterfaces().Contains(iface)
            select t;

        return implementers.Count() == 1;
    }

    return false;
})
.As(t => t.GetInterfaces()[0]); 
```

这将注册只有一个实现者存在的所有实现，并忽略具有多个实现的接口，以便您可以手动注册它们。请注意，我并没有声称这以任何方式有效（例如，根据服务的数量，您可能希望查看缓存实现者）。

# android - Android - 如何获取用户按下的文本？

> ID：10486343
> 
> 赞同：0
> 
> 时间：2012-05-07T17:24:51.763
> 
> 标签：android

当用户长按它时，我想获取任何文本（来自任何应用程序），以便例如翻译它。那可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:28:42.500

在 android 开发人员 [http://developer.android.com/guide/topics/clipboard/copy-paste.html上完成整个过程](http://developer.android.com/guide/topics/clipboard/copy-paste.html)

# html - 浮动 div 的 CSS 填充

> ID：10486344
> 
> 赞同：0
> 
> 时间：2012-05-07T17:24:52.707
> 
> 标签：html, css, css-float

在用 CSS 解决了我的最后一个问题后，`position`出现了一个新问题。

[现场演示](http://adamlisik.co.uk/kantor2)

现在我无法在`<table>'s`class 和 div之间获得任何空间`hr`。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:30:11.823

您可以指定`border-bottom`而不是 top，指定 required ，并在“hr”div 中`height`添加一些内容（如）。`&nbsp;`

事实上，如果您从上到下更改边框，您会立即获得所需的间距，但使用其他选项会更清晰一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:30:52.563

A`div`是无量纲的，因此您需要向其添加一些“体积”以实现其上方内容的间距。您可以通过使用 CSS 向`hr`类添加一些高度来完成此操作。

这样做：

```
.hr {
  height: 20px; /* set this # to whatever you'd like */
  width: 100%;
 } 
```

# javascript - javascript中模块2内的新模块

> ID：10486346
> 
> 赞同：0
> 
> 时间：2012-05-07T17:24:56.747
> 
> 标签：javascript

这是我的模块：

```
MyModule = (function () {

    var myModule = function MyModule(strInput) {
        if (false === (this instanceof MyModule)) {
            return new MyModule();
        }

       var str = strInput;
       this.getStr = function () {
           return str;
       }

       this.test = function () {
           var testModule = new MyModule("testInside");
           return testModule;
       }

   }

    return myModule;    
}()); 
```

这是我测试模块的方法：

```
document.getElementById("Button").onclick = function () {
    var module = new MyModule("input");
    var module2 = module.test();

    console.log(module2.getStr());
    console.log(module.getStr());
} 
```

此代码返回：

```
testInside   
testInside 
```

到console.log，但我期望的是：

```
testInside    
input 
```

当我在同一个类中构建一个新类时，就像我在 c# 或 java 中所做的那样。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:34:49.840

我不知道我到底做了什么，只是侥幸得到它。但是，请不要因为两次使用 MyModule 而使读者感到困惑。无论如何，这就是我所做的一切：

```
MyModule = (function() {

    return function M(strInput) {
        if (false === (this instanceof M)) {
            return new M();
        }

        var str = strInput;
        this.getStr = function() {
            return str;
        }

        this.test = function() {
            var testModule = new M("testInside");
            return testModule;
        }

    }
}());
// while testing.
var module = new MyModule("input");
var module2 = module.test();

console.log(module2.getStr());
console.log(module.getStr()); 
```

**更新：** 有一个更简单的解决方案。我只是复制粘贴编辑了您的代码，因此没有太多变化。这是最简单的一个：

```
MyModule = function(strInput) {
    if (false === (this instanceof MyModule)) {
        return new MyModule();
    }

    var str = strInput;
    this.getStr = function() {
        return str;
    }

    this.test = function() {
        var testModule = new MyModule("testInside");
        return testModule;
    }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:30:27.327

问题是这一行`MyModule`：

```
var str = strInput; 
```

它应该是：

```
this.str = strInput; 
```

因为否则`str`将始终指向同一个变量并具有最后设置的值。

# html - 在滚动条上保持悬停

> ID：10486347
> 
> 赞同：0
> 
> 时间：2012-05-07T17:25:13.463
> 
> 标签：html, css, hover, scrollbar

我有这个菜单，当我将鼠标悬停在某些项目上时，它会下拉一个新项目列表。有时这个列表比浏览器窗口大，所以用户需要向下滚动页面才能看到整个列表。问题是当鼠标到达滚动条时，菜单自然会失去它的悬停功能。我需要尽快解决这个问题，有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:47:28.900

好吧，如果用户必须将鼠标移出菜单，它自然应该关闭。也许您应该尝试缩短菜单，或者尝试使菜单本身滚动？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:56:25.087

而不是在菜单项上悬停，也许你应该做一个 onclick 事件。这将允许菜单在单击时出现，然后当用户再次单击菜单时，它可以使子菜单隐藏。这将允许您向下滚动页面并仍然显示子菜单。

顺便说一句，这假设您不能将菜单分解为像 Nathan MacInnes 提到的子菜单。

# jquery - 带有单选按钮的 JQuery 表单控件

> ID：10486351
> 
> 赞同：-1
> 
> 时间：2012-05-07T17:25:33.540
> 
> 标签：jquery, html

我正在使用带有 2 个单选按钮的 JQuery 在显示和隐藏 2 个不同的 div 之间切换。我还希望能够检查页面加载（或重新加载）时的当前值，并根据当前选择的内容设置 div 的显示/隐藏状态。

换句话说，单击时执行此操作，如果不是单击，则执行当前设置的任何操作。我有这个似乎工作正常的代码

```
var type_option = $('input[name=Type]:checked', '#Form').val();
if (type_option == 'A') {
    $("#A").show();
    $("#B").hide();
} else {
    $("#A").hide();
    $("#B").show();         
}
$(".TypeSelect").click(function() {
    type_option = $('input[name=Type]:checked', '#Form').val();
    if (type_option == 'A') {
        $("#A").show();
        $("#B").hide();
    } else {
        $("#A").hide();
        $("#B").show();         
    }
});

<form>
<input type="radio" name="Type" value="A" class="TypeSelect">
<input type="radio" name="Type" value="B" class="TypeSelect">

<div id="A">A Div</div>
<div id="B">B Div</div>
</form> 
```

但这似乎并不正确或至少非常优化。我认为这可能有效

```
var type_option = $('input[name=Type]:checked', '#Form').val();
$(".TypeSelect").click(function() {
    type_option = $('input[name=Type]:checked', '#Form').val();
});
if (type_option == 'A') {
    $("#A").show();
    $("#B").hide();
} else {
    $("#A").hide();
    $("#B").show();         
} 
```

但它没有，我假设我必须在点击功能中设置这些 div？有没有更好的方法我应该这样做，或者我是否必须进行检查并在点击功能和点击功能之外设置 div 以执行我想要的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:04:34.357

我会将逻辑移动到一个函数中，然后在页面加载和点击事件中调用它。像这样的东西。

```
function toggle()
{
    var type_option = $('input[name=Type]:checked', '#Form').val();
    if (type_option == 'A') {
        $("#A").show();
        $("#B").hide();
    } else {
        $("#A").hide();
        $("#B").show();         
    }
}
toggle();
$(".TypeSelect").click(function() {
    toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:27:56.497

```
$(".TypeSelect").click(function() {
    if (this.value == 'A') {
        $("#A").show();
        $("#B").hide();
    } else {
        $("#A").hide();
        $("#B").show();         
    }
}); 
```

取决于页面的初始状态，它甚至可以简单得多：

```
$(".TypeSelect").click(function() {
    $('#A, #B').toggle(); // Hide visible element, Show hidden element.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:32:06.650

为什么隐藏一个以显示另一个为什么不只是将显示设置为无，然后这样做，两者都不会同时坐在那里

```
<div id="A" style="display: none;">A Div</div>
<div id="B" style="display: none;">B Div</div>

    $(".TypeSelect").click(function() {
        type_option = this.value;
        if (type_option == 'A') {
            $("#A").show();
$("#B").hide();
        } else {
$("#A").show();
            $("#B").show();         
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T17:59:11.383

```
function togglify(opt) {
  $('div#' + opt).show().siblings('div').hide();  
}
$(".TypeSelect").click(function() {
    type_option = $(this).val();
    togglify(type_option);
}).filter(function() {
    type_option = $(':checked').val();
    togglify(type_option);
}); 
```

***[演示](http://jsfiddle.net/pGjcT/2/)***

# html - 仅在 HTML 和 CSS 中与 joomla 类似的画廊

> ID：10486352
> 
> 赞同：0
> 
> 时间：2012-05-07T17:25:35.263
> 
> 标签：html, css, joomla

我需要与 joomla 类似的画廊 - [http://www.flashxml.net/list-gallery.html](http://www.flashxml.net/list-gallery.html)只有 CSS 和 HTML 代码不闪烁，因为我需要编辑画廊的布局。有没有可用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:31:21.063

我会推荐 JoomGallery、Phoca Gallery 或 Simple Image Gallery。您可以在[Joomla 扩展目录中找到很多](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T20:13:10.353

你应该看看 Yootheme Widgetkit Gallery

# javascript - Dynamically change Tweet Button "data-text" contents

> ID：10486354
> 
> 赞同：18
> 
> 时间：2012-05-07T17:25:38.567
> 
> 标签：javascript, jquery, attributes, twitter

This question comes very closely to what I'm after: [Replace an Attribute in the Tweet Button with Jquery](https://stackoverflow.com/questions/5571115/replace-an-attribute-in-the-tweet-button-with-jquery)

However, [the suggested solution](http://jsfiddle.net/45ddY/) works just once. That is, I cannot use it in my *switch* statement like this:

```
 switch(element.id)
    {
        case "t1":
            $(document).ready(function(){
                $('a[data-text]').each(function(){
                    $(this).attr('data-text', Text_Variant_1);
                });
                $.getScript('http://platform.twitter.com/widgets.js');
            });
            break;
        case "t2":
            $(document).ready(function(){
                $('a[data-text]').each(function(){
                    $(this).attr('data-text', Text_Variant_2);
                });
                $.getScript('http://platform.twitter.com/widgets.js');
            });
        ...
    } 
```

What happens is that the *data-text* attribute is set according to whichever case happens first and doesn't change afterwards.

How can I change *data-text* attribute of a Tweet Button as many times as I need?

**Update:** here's the page I'm working on: [http://zhilkin.com/socio/en/](http://zhilkin.com/socio/en/)

The *Traits* table can be safely ignored. What I want to do with the *Sociotypes* table is that when you click on a type, the *data-text* of the Tweet Button below the description on the right should be changed accordingly.

Right now it works like this: if I hover on or click "Don Quixote", then *data-text* is set to "... Don Quixote ...", and it stays the same if I click "Dumas" later. And vice versa: if I hover on or click "Dumas", then *data-text* is set to "... Dumas ..." and doesn't change if I click "Don Quixote". (Other types are empty at the moment.)

So, the Tweet Button is only changed the first time I run the script, but I need it to be updated as many times as the type changes.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-11T12:08:03.220

I struggled with this for a couple of hours this morning, but finally got it working! The problem is essentially that you can only include the twitter *widgets.js* script **once** in the page, and that script evaluates the `data-text` attribute on load. Therefore, in your example, you dynamically set the `data-text` attribute **before** loading the script, which will work as expected. However, you can then make no further updates as the script has already run.

I saw [**this article**](https://dev.twitter.com/discussions/2326) suggesting you can call `twttr.widgets.load()` again at runtime to re-evaluate and re-render the buttons, however that didn't work for me. This is because that function re-evaluates `<a>` tags, not `<iframe>` tags!

So the solution, as [**pointed out here**](https://dev.twitter.com/discussions/890), is to completely remove the rendered `<iframe>` from the DOM, then make a new `<a>` element with all the appropriate attributes before calling `twttr.widgets.load()` to finally re-evaluate it and turn it into an `<iframe>`.

Please see [**this fiddle**](http://jsfiddle.net/chris27/DQw5b/4/) for a working example!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-03T09:39:58.500

You can also use Twitter's [createShareButton](https://dev.twitter.com/web/tweet-button/javascript-create) API call:

```
function callAsRequired(){
  var nodeID = 'YourTwitterNodeID'

  //Remove existing share button, if it exists.
  var myNode = document.getElementById(nodeID);
  while (myNode.firstChild) {
    myNode.removeChild(myNode.firstChild);
  }

  //Create button and customise
  twttr.widgets.createShareButton(
    'http://your.custom.url.here/',
    document.getElementById(nodeID),
    {
      count: 'none',
      text: 'Your custom tweet here'
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:36:49.587

since you are using `each` loop you can use `if` statements instead:

```
 $(document).ready(function(){
       $('a[data-text]').each(function(){
          if (theCase == 1) {
             $(this).attr('data-text', Text_Variant_1);
          }
          else if (theCase == 2) { ... }
        })
 }); 
```

# seo - 网站未编入索引

> ID：10486360
> 
> 赞同：0
> 
> 时间：2012-05-07T17:26:24.523
> 
> 标签：seo, google-search-console

我已将站点地图提交给谷歌网站管理员工具，但它没有被编入索引。

从提交到现在已经快一个月了。网站管理员工具显示“无可用数据”。几乎每个部分。

据我所知，没有任何东西阻止谷歌编制索引，如您所见，robots.txt 没有阻止任何东西，也没有阻止抓取的元标记。

这是站点地图的网站管理员工具的屏幕截图： [http](http://www.2shared.com/photo/4HLbsOte/webmaster.html) ://www.2shared.com/photo/4HLbsOte/webmaster.html 我不知道为什么它说在我上个月早些时候提交时它显示为 2012 年 5 月 3 日处理。但是没有任何东西被索引，看起来也没有问题。

有任何想法吗？谢谢您的帮助。

**已解决编辑：**

**看起来我的 http 标头中有 X-Robots-Tag: noindex, nofollow。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:30:58.910

在网站管理员工具的站点地图部分，是否显示您提交的站点地图有任何错误？

另外，该站点地图中有多少页？如果页面很少，您可能会看到索引非常低，因为谷歌通常不会索引您的所有页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:53:33.203

在我的 http 标头中有 X-Robots-Tag: noindex, nofollow。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T06:29:26.527

当您将网站的站点地图提交给谷歌网站管理员工具时，可能会出现一些问题。您应该再次尝试添加站点地图。只需删除以前的站点地图并重新添加即可。我希望它现在可以工作。

# objective-c - 在 RubyMotion 中使用 @selector

> ID：10486367
> 
> 赞同：20
> 
> 时间：2012-05-07T17:27:25.557
> 
> 标签：objective-c, syntax, rubymotion

如何将以下方法调用从 ObjectiveC 转换为 RubyMotion 语法：

```
[self.faceView addGestureRecognizer:[
    [UIPinchGestureRecognizer alloc] initWithTarget:self.faceView
    action:@selector(pinch:)]]; 
```

我做到了这一点：

```
self.faceView.addGestureRecognizer(
  UIPinchGestureRecognizer.alloc.initWithTarget(
  self.faceView, action:???)) 
```

我理解这`@selector(pinch:)`表示对接收器对象`pinch`方法的委托，但我将如何在 RubyMotion 中执行此操作？也许使用块？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-07T17:34:27.187

您应该能够只使用一个字符串来指定选择器：

```
self.faceView.addGestureRecognizer(
  UIPinchGestureRecognizer.alloc.initWithTarget(
  self.faceView, action:'pinch')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-04T08:40:53.833

```
@gesture = UIPinchGestureRecognizer.alloc.initWithTarget(self.faceView,action:'pinch:')

self.faceView.addGestureRecognizer(@gesture)

def pinch(foo)

end 
```

如果您不希望方法处理程序接受参数，请`action:'pinch'`改用。然后它将寻找这样的方法：

```
def pinch

end 
```

在这里使用实例 var ( `@gesture = ...`) 是一个好主意，因为如果您不将手势 var 作为 UIViewController 的实例 var，有时手势识别器和 GC 不能很好地协同工作。（在我的经验中）

# apache - .htaccess 将 /dir/sub 重写为 /dir

> ID：10486368
> 
> 赞同：1
> 
> 时间：2012-05-07T17:27:32.667
> 
> 标签：apache, .htaccess, mod-rewrite

我在 /directory/subdirectory 中有文件，我希望它让用户看到他们在 /directory 中。

这是我目前在 .htaccess 文件中的内容（返回 500 错误）：

```
RewriteEngine on
RewriteRule ^directory/(.*) directory/subdirectory/$1 [NC,L] 
```

我知道如果我的文件位于根 www 目录中，rewritebase 可以完成此操作，但我无法为该项目执行此操作。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:30:57.547

您需要`[NC,L]`在重写行的末尾添加。NC 表示此规则不区分大小写，L 表示 Last，即引擎停止处理规则的位置。

欲了解更多信息，请访问[ModRewrite 备忘单](http://www.cheatography.com/davechild/cheat-sheets/mod-rewrite/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:37:48.050

使用此规则：

```
RewriteRule (?!^directory(/.*|)$)^(directory)/(.*)$ $1/subdirectory/$2 [NC,L] 
```

# objective-c - 强制将特定本地化用于目标

> ID：10486374
> 
> 赞同：9
> 
> 时间：2012-05-07T17:28:13.883
> 
> 标签：objective-c, ios, xcode, xcode4, localization

我正在开发一个应用程序，除其他外，它将播放一个大的音频文件（30MB）。

我想将应用程序提交到多个国家/地区的 App Store。每个目标国家的音频文件都不同，应用程序的其余部分保持不变（尽管已本地化）。

我为每个国家/地区创建了一个目标，一个 bash 脚本负责将正确的音频文件复制到基于目标的编译应用程序中，并且效果很好。

我还本地化了资源（图像和 Localized.strings）以使其易于维护。

假设我为瑞典构建了目标，我只想包含瑞典语本地化以强制应用程序始终显示瑞典语（与音频文件匹配）。

**这是实际的问题：***如何从目标中排除所有本地化或强制目标仅使用特定的本地化，而不管电话设置如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:55:18.910

如果我理解您的问题，您实际上并不需要本地化应用程序，或者至少不需要完全本地化的应用程序。如果是这种情况，我将使用运行脚本构建阶段，该阶段负责根据当前目标复制适当的非本地化但特定于目标的资源。例如，假设您的项目根目录中有一个 Audio 文件夹，其中包含不同语言的所有版本，您的脚本可能如下所示：

```
cp "$PROJECT_DIR/Audio/$TARGETNAME.mp3" "$TARGET_BUILD_DIR/$UNLOCALIZED_RESOURCES_FOLDER_PATH/audio.mp3" 
```

例如，将“Swedish.mp3”复制/重命名为“audio.mp3”，可直接从包中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:56:27.677

我认为您可以通过以下方式将其拉下来：

目标设置 => 信息 => 添加一个名为**Localizations**的新行=> 使用您想要的语言向该数组添加一个新元素（我认为默认值为英语）

我还没有测试过，如果它有效，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:45:53.237

根据您对 Lvsti 的回答（您说您这样做的原因是您的某些语言的翻译尚未完成，但您想发布您拥有的内容），也许可以作为删除所有相关的本地化文件或弄乱您的构建设置，您可以尝试编辑 XCode 项目中的语言列表？它不是针对每个目标，而是针对每个项目，但它可能允许您在构建中排除您不想要的语言。请参阅项目设置中的本地化（有一个小 - 图标可用于删除语言）。

![在此处输入图像描述](../Images/6316e3a59baaa310277343d5a2c1e1a8.png)

# java - 打印所有 JVM 标志

> ID：10486375
> 
> 赞同：108
> 
> 时间：2012-05-07T17:28:16.387
> 
> 标签：java, optimization, printing, jvm, flags

发现了一个有趣的 JVM 标志：

```
java -XX:+UnlockDiagnosticVMOptions -XX:+PrintFlagsFinal -version 
```

它打印了数百种不同的选项，我以前从未听说过。它还打印默认值，这有助于更好地诊断 JVM 行为。另一个有趣的标志是：

```
-XX:+UnlockExperimentalVMOptions 
```

有谁知道任何解释它们的文档？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-07T19:14:58.370

不要错过`-XX:+JVMCIPrintProperties`Graal JIT 选项。

在深入研究资源之前，您可以浏览以下摘录并更快地找到合适的选项：

[https://chriswhocodes.com/（OracleJDK](https://chriswhocodes.com/) 6/7/8/9/10/11/12、OpenJDK 8/9/10/11、Graal CE/EE、OpenJ9、Zing）

[http://jvm-options.tech.xebia.fr/](http://jvm-options.tech.xebia.fr/)

[http://www.pingtimeout.fr/2012/05/jvm-options-complete-reference.html](http://www.pingtimeout.fr/2012/05/jvm-options-complete-reference.html)

[http://stas-blogspot.blogspot.com/2011/07/most-complete-list-of-xx-options-for.html](http://stas-blogspot.blogspot.com/2011/07/most-complete-list-of-xx-options-for.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-07T18:14:03.587

我找到的最好的文档是[source](http://hg.openjdk.java.net/jdk7/jdk7)。

我已经使用[这个 SO Q&A](https://stackoverflow.com/questions/9048254/how-to-compile-an-openjdk-7-debug-build-on-ubuntu-11-10)来创建调试版本。使用此调试版本，您可以运行`java -XX:+AggressiveOpts -XX:+UnlockDiagnosticVMOptions -XX:+UnlockExperimentalVMOptions -XX:+PrintFlagsFinal -XX:+PrintFlagsWithComments -version`.

从包含源代码的目录中，您可以执行（假设您使用的是 Linux、Cygwin 等）：

```
grep -FR 'UnlockExperimentalVMOptions' hotspot/ 
```

或者，以下（仅查看`*.cpp`和`*.hpp`文件）：

```
find hotspot/ -name '*.[ch]pp' -exec grep -F 'UnlockExperimentalVMOptions' {} + 
```

然后查看源文件。没有一个文档描述所有选项的最好原因可能是，其中一些选项最好留给真正了解 JVM 的人，而最好的方法是熟悉源代码。

所以，用一位[大师](https://en.wikipedia.org/wiki/Yoda)的话（几乎）来说，`use the source`！

# php - Plupload：错误“代码”：100，“消息”：“无法打开临时目录

> ID：10486381
> 
> 赞同：2
> 
> 时间：2012-05-07T17:28:44.840
> 
> 标签：php, plupload

我正在使用 plupload ：关于我为什么会收到此错误的任何想法？下面是我的代码片段。如果该目录不存在，它应该创建它并将文件上传到新创建的文件夹。

```
$tempFolder = "uploadFolder";
$targetDir =  $_SERVER['DOCUMENT_ROOT'] .DIRECTORY_SEPARATOR . $tempFolder;
$cleanupTargetDir = true; // Remove old files
$maxFileAge = 5 * 3600; // Temp file age in seconds

// 5 minutes execution time
@set_time_limit(5 * 60);

// Uncomment this one to fake upload time
// usleep(5000);

// Get parameters
$chunk = isset($_REQUEST["chunk"]) ? intval($_REQUEST["chunk"]) : 0;
$chunks = isset($_REQUEST["chunks"]) ? intval($_REQUEST["chunks"]) : 0;
$fileName = isset($_REQUEST["name"]) ? $_REQUEST["name"] : '';

// Clean the fileName for security reasons
$fileName = preg_replace('/[^\w\._]+/', '_', $fileName);

// Make sure the fileName is unique but only if chunking is disabled
if ($chunks < 2 && file_exists($targetDir . DIRECTORY_SEPARATOR . $fileName)) {
    $ext = strrpos($fileName, '.');
    $fileName_a = substr($fileName, 0, $ext);
    $fileName_b = substr($fileName, $ext);

    $count = 1;
    while (file_exists($targetDir . DIRECTORY_SEPARATOR . $fileName_a . '_' . $count . $fileName_b))
        $count++;

    $fileName = $fileName_a . '_' . $count . $fileName_b;
}

$filePath = $targetDir . DIRECTORY_SEPARATOR . $fileName;

// Create target dir
if (!file_exists($targetDir)){
    echo $targetDir;
    @mkdir($targetDir);
    }   
else{
    die('{"jsonrpc" : "2.0", "error" : {"code": 99, "message": "Exist"}, "id" : "id"}');
}

// Remove old temp files    
if ($cleanupTargetDir && is_dir($targetDir) && ($dir = opendir($targetDir))) {
    while (($file = readdir($dir)) !== false) {
        $tmpfilePath = $targetDir . DIRECTORY_SEPARATOR . $file;

        // Remove temp file if it is older than the max age and is not the current file
        if (preg_match('/\.part$/', $file) && (filemtime($tmpfilePath) < time() - $maxFileAge) && ($tmpfilePath != "{$filePath}.part")) {
            @unlink($tmpfilePath);
        }
    }

    closedir($dir);
} else
    die('{"jsonrpc" : "2.0", "error" : {"code": 100, "message": "Failed to open temp directory."}, "id" : "id"}');

// Look for the content type header
if (isset($_SERVER["HTTP_CONTENT_TYPE"]))
    $contentType = $_SERVER["HTTP_CONTENT_TYPE"];

if (isset($_SERVER["CONTENT_TYPE"]))
    $contentType = $_SERVER["CONTENT_TYPE"];

// Handle non multipart uploads older WebKit versions didn't support multipart in HTML5
if (strpos($contentType, "multipart") !== false) {
    if (isset($_FILES['file']['tmp_name']) && is_uploaded_file($_FILES['file']['tmp_name'])) {
        // Open temp file
        $out = fopen("{$filePath}.part", $chunk == 0 ? "wb" : "ab");
        if ($out) {
            // Read binary input stream and append it to temp file
            $in = fopen($_FILES['file']['tmp_name'], "rb");

            if ($in) {
                while ($buff = fread($in, 4096))
                    fwrite($out, $buff);
            } else
                die('{"jsonrpc" : "2.0", "error" : {"code": 101, "message": "Failed to open input stream."}, "id" : "id"}');
            fclose($in);
            fclose($out);
            @unlink($_FILES['file']['tmp_name']);
        } else
            die('{"jsonrpc" : "2.0", "error" : {"code": 102, "message": "Failed to open output stream."}, "id" : "id"}');
    } else
        die('{"jsonrpc" : "2.0", "error" : {"code": 103, "message": "Failed to move uploaded file."}, "id" : "id"}');
} else {
    // Open temp file
    $out = fopen("{$filePath}.part", $chunk == 0 ? "wb" : "ab");
    if ($out) {
        // Read binary input stream and append it to temp file
        $in = fopen("php://input", "rb");

        if ($in) {
            while ($buff = fread($in, 4096))
                fwrite($out, $buff);
        } else
            die('{"jsonrpc" : "2.0", "error" : {"code": 101, "message": "Failed to open input stream."}, "id" : "id"}');

        fclose($in);
        fclose($out);
    } else
        die('{"jsonrpc" : "2.0", "error" : {"code": 102, "message": "Failed to open output stream "}, "id" : "id"}');
}

// Check if file has been uploaded
if (!$chunks || $chunk == $chunks - 1) {
    // Strip the temp .part suffix off 
    rename("{$filePath}.part", $filePath);
}

// Return JSON-RPC response
die('{"jsonrpc" : "2.0", "result" : null, "id" : "id"}'); 
```

# jquery - CSS3背景不打印

> ID：10486383
> 
> 赞同：0
> 
> 时间：2012-05-07T17:28:51.410
> 
> 标签：jquery, css, printing, charts

我正在尝试使用 CSS3 和 jquery 创建动画图表。这是我得到这个想法的网站......[链接](http://coding.smashingmagazine.com/2011/09/23/create-an-animated-bar-graph-with-html-css-and-jquery/)

我正在苦苦挣扎的是，如果有人想打印页面，条形图不显示条形。条形图是使用 CSS 背景创建的……不打印。有什么我可以做的，以便他们为每个点击页面的人打印...我不想进入浏览器中的任何打印机选项，我只想在有人要求时打印它。谢谢香农

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:41:15.047

打印背景图像或 css3 方式不能由您控制，而是由用户在浏览器中的首选项控制。

我只知道关于它的黑客攻击，但你如何适应你的问题是另一回事。例如，您有一个图像，例如您网站的徽标，它不会以正常方式打印，但如果您将其放入 ul li（无序列表）或将显示定义为列表项：

```
display: list-item;
list-style-image: url(pathToImagesFolder/logo.png); 
```

这将被打印出来。注意：CSS hack 不保证是跨浏览器。

# iphone - 如何使用 Xcode 4.3 配置 iPhone/iPad 文件关联？

> ID：10486386
> 
> 赞同：1
> 
> 时间：2012-05-07T17:29:05.383
> 
> 标签：iphone, ios, ipad, xcode4

任何人都可以提供指向使用 Xcode 4.3 在 iOS 上设置自定义文件关联的更新教程/示例的指针吗？

我已经看到了以下内容（*包括 Brad Larson 的出色回答*），但是 Xcode 4.3 中 Info.plist 的处理与我看到的任何描述都有很大不同：

*   [如何将文件类型与 iPhone 应用程序相关联？](https://stackoverflow.com/questions/2774343)
*   [在 iOS 上导入/导出文档](http://mobiforge.com/developing/story/importing-exporting-documents-ios?dm_switcher=true)
*   [如何注册应用程序以响应自定义 URL 方案打开请求？](https://stackoverflow.com/questions/8201463)

我尝试查看 Apple 的文档，但“ [iOS 文档交互编程主题](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010409-SW1)”已于 2010 年 11 月更新。

我找不到的示例都没有讨论以 Xcode 4.3 处理它们的方式配置它 - 其中包括目标/构建信息下的单独的“文档类型”、“导出的 UTI”、“导入的 UTI”和“URL 类型”部分，并包括不同的键名（例如“Description”与“UTTypeDescription”）

任何指针都是有帮助的，一个工作的 Xcode 4.3 示例会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:15:51.067

根据@samson 的建议，但我想为未来的搜索者捕获这个答案。

`info.plist`在项目导航器中找到。我的是在应用程序名称（例如）前面的“支持文件”组下`MyApp-Info.plist`。右键单击并“打开为 > 属性列表”。

然后通过输入以下描述的部分，我可以从 Mail 中获得一个 fileURL： ![文件类型](../Images/c3237de24afc45373409764fa285f00c.png)![出口型尿路感染](../Images/93b2389ecd87b298913c2530c25ceacb.png)

我应该记录几点：

*   我没有为我的文件类型放置文档图标，但**强烈**建议这样做。
*   属性编辑器将尝试自动完成属性名称，因此它确实为您提供了比表面上更多的指导。

# c# - 一个班级的鼠标事件，我如何在另一个班级收听它？

> ID：10486388
> 
> 赞同：1
> 
> 时间：2012-05-07T17:29:16.190
> 
> 标签：c#

我在表单上有一个用户控件，当我在那个用户控件上鼠标移动时，我想在表单中做一些事情。

我怎样才能让表单“收听”这个事件？

我正在使用 Visual C#、.Net 框架 3.5、winforms

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:33:24.723

我想您指的是使用控件或类似的东西。

您可以添加一个`public event`, 并在检测到内部类事件时在您的类中触发它。

然后您必须订阅第二类中的已发布事件。

这是一个示例，因此您可以看到 sintax：

```
 public class WithEvent
    {
        // this is the new published event
        public EventHandler<EventArgs> NewMouseEvent;

        // This handles the original mouse event of the inner class
        public void OriginalEventhandler(object sender, EventArgs e)
        {
            // this raises the published event (if susbcribedby any handler)
            if (NewMouseEvent != null)
            {
                NewMouseEvent(this, e);
            }
        }
    }

    public class Subscriber
    {
        public void Handler(object sender, EventArgs e)
        {
            // this is the second class handler
        }

        public void Subscribe()
        {
            WithEvent we = new WithEvent();
            // This is how you subscribe the handler of the second class
            we.NewMouseEvent += Handler;
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:32:28.200

如果您正在谈论`Windows Forms`（从问题中不清楚），您需要在接收鼠标事件的类中定义一个新事件。接收后它会引发一个新的自定义事件。另一个类订阅了那个（自定义事件）接收通知。

萌信息（不是几行就可以呈现的）可以看这里：

[如何将事件传播到 MainForm？](http://bytes.com/topic/c-sharp/answers/514379-how-propagate-event-up-mainform)

如果您在谈论`WPF`，事件有不同的概念：事件路由。如果您的类是实际接收鼠标事件的组件的 UI 树中存在的 UI 元素，它也会传播到您的类。所以不需要更多的编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T17:44:03.203

为了扩展 JotaBe 的答案，我可以看到您有两种情况：

a) A 类调用 B 类的方法，发生异常。在这种情况下，您不需要做任何事情：异常会遍历堆栈，直到找到一条 catch 语句。所以，真的，你需要做的就是不捕捉异常，或者如果你确实需要捕捉它（用于记录目的等），然后重新抛出它。

b）如果您需要在某些不相关的类中触发代码，由于异常，那么最好的方法是使用事件。在您的班级中声明：

```
public class ClassA
{
    public static event EventHandler<Exception> OnException;

    public void Notify(Exception ex)
    {
        if (OnException != null)
        {
            OnException(this, ex);
        }
    }
} 
```

然后，为了得到通知，你只需要

```
ClassA.OnException += (sender, exeption) => 
{
    ... some GetHashCode ..
}; 
```

...我猜 JotaBe 在我输入时已经添加了所有必要的示例代码

# java - 定位给定目录的命令

> ID：10486390
> 
> 赞同：2
> 
> 时间：2012-05-07T17:29:24.017
> 
> 标签：java, unix, directory, command

是否有任何（unix）命令可以找到给定目录？

例如，我有一个名为“MyDir”的目录，但我不知道它在磁盘上的绝对路径。是否有任何命令可以提供 MyDir 的路径？

更具体地说，我想在 Java 程序中执行此操作（通过系统调用）。

```
// return the full path to the specified directory
// if there's more than once directory with the given name
// just return the first one.
static String findPath (String dirName)
{
     // CODE here

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:32:43.187

如果它只是 Unix，您可以使用该[`locate`](http://en.wikipedia.org/wiki/Locate_%28Unix%29)命令。不过，不要忘记`updatedb`定期运行（最好是自动运行）。

要在 Java 中实际运行命令行命令，请查看[这篇文章](http://www.devdaily.com/java/edu/pj/pj010016)。基本命令是`Runtime#exec`，但您需要进行一些错误检查。文章中提供的片段是：

```
import java.io.*;

public class JavaRunCommand {

    public static void main(String args[]) {

        String s = null;

        try {

        // run the Unix "ps -ef" command
            // using the Runtime exec method:
            Process p = Runtime.getRuntime().exec("ps -ef");

            BufferedReader stdInput = new BufferedReader(new 
                 InputStreamReader(p.getInputStream()));

            BufferedReader stdError = new BufferedReader(new 
                 InputStreamReader(p.getErrorStream()));

            // read the output from the command
            System.out.println("Here is the standard output of the command:\n");
            while ((s = stdInput.readLine()) != null) {
                System.out.println(s);
            }

            // read any errors from the attempted command
            System.out.println("Here is the standard error of the command (if any):\n");
            while ((s = stdError.readLine()) != null) {
                System.out.println(s);
            }

            System.exit(0);
        }
        catch (IOException e) {
            System.out.println("exception happened - here's what I know: ");
            e.printStackTrace();
            System.exit(-1);
        }
    }
} 
```

否则，您可以[遍历文件树](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)（使用 NIO.2 的 Java 本机）。不过，这可能需要更长的时间，因为它没有被缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:32:46.687

该`locate`命令（如果可用）（某些系统可能未启用构建其索引）将针对系统上所有世界可读目录中的文件路径执行子字符串匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T19:03:59.000

作为定位命令的替代方法（例如，如果没有维护所需的数据库），您可以使用 ' [`find`](http://en.wikipedia.org/wiki/Find)' 命令：

```
find / -type d -name Foo 
```

此调用将在文件系统上的“/”下的任何位置找到任何名为 Foo 的目录。请注意，这可能非常非常慢 - 如果“定位”可用，它可能会执行得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T08:31:01.197

确切的定位命令是，

```
locate -r ~/".*"MyDir 
```

如果需要刷新数据库，

```
sudo updatedb 
```

# java - RMI 中的 UnsupportedOperationException

> ID：10486393
> 
> 赞同：0
> 
> 时间：2012-05-07T17:29:42.717
> 
> 标签：java, rmi, remoteexception

我工作了一个简单的程序但是当您在命令中运行客户端时出现此错误

```
 HelloClient exception:  java.lang.UnsupportedOperationException: Not supported yet. 
```

这是我的编码

接口类

```
 import java.rmi.*;

    public interface HelloInterface extends Remote { 

     public String say() throws RemoteException;

   } 
```

实现类

```
 import java.rmi.RemoteException;
           import java.rmi.server.UnicastRemoteObject;

         /** 
           *
           * @author x
           */
   public class HelloServerImpl extends UnicastRemoteObject implements HelloInterface {

   private String message; 

   public HelloServerImpl(String msg)throws RemoteException{
   message = msg;
   }

@Override
public String say() throws RemoteException {
    throw new UnsupportedOperationException("Not supported yet.");
}

 } 
```

服务器类

```
 import java.rmi.Naming;

       /**
        *
        * @author x
        */
       public class HelloServer {
        public static void main (String []args ){
          try {
        Naming.rebind("HELLOSERVER", new HelloServerImpl("Hello word"));
        System.out.println("Hello Server is ready.");
    } catch (Exception ex) {
        System.out.println("Hello server failed: "+ ex);
    }

    }
    } 
```

客户端类

```
 import java.rmi.Naming;

         /**
          *
          * @author x
          */
             public class HelloClient {
          public static void main(String[]args){

        HelloInterface hello;
        String url = "rmi://localhost/HELLOSERVER";

         try {
        hello = (HelloInterface)Naming.lookup(url);
        System.out.println(hello.say());
    } catch (Exception ex) {
       System.err.println("HelloClient exception:  " + ex);
    }

    }
   } 
```

我准备写步骤但仍然是同样的错误

为什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:32:01.050

好吧，你自己写了这个：

```
@Override
public String say() throws RemoteException {
    throw new UnsupportedOperationException("Not supported yet.");
} 
```

当然会抛出异常。尝试实际返回一个字符串：

```
@Override
public String say() throws RemoteException {
    return "hello";
} 
```

# xcode - UITableView 不会在 iPad 上滚动，但在 iPhone 上会滚动

> ID：10486397
> 
> 赞同：0
> 
> 时间：2012-05-07T17:29:52.877
> 
> 标签：xcode, uitableview

如果我将 iPad 转为横向，几行表格视图（和页脚）就在屏幕底部，尽管它适合纵向。

我的问题是，当我用手指向上“拉”视口以查看底部的材料时，当我将手指保持在原位时，我可以看到它，但是当我移开手指时，视口再次下降并且材料在底部消失。

相同的代码在 iPhone 上滚动良好（字体太大等等，但这是一个不同的问题）

我究竟做错了什么？

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:14:18.317

至于你到底做错了什么......我们看不到你的代码，所以我们不能告诉你。但对正在发生的事情有所了解。

A`UITableView`是 a `UIScrollView`，您可以滚动多远取决于视图的大小（想想`frame`）与`CGSize`的 content( `contentSize`)的 size( ) 相比`UIScrollView`。如果 'frame' 大于`contentSize`则不需要滚动，但如果内容较大，则可以滚动两者之间的差异。

简而言之，the `contentSize`of your`UITableView`是不正确的。这可能是由多种方式引起的，包括在设备旋转时自动调整大小、在不更新表格的情况下动态更改表格/页脚高度等。

# wcf - 如何使用 WCF 在 3 层 Web 应用程序中使用令牌

> ID：10486398
> 
> 赞同：2
> 
> 时间：2012-05-07T17:29:54.130
> 
> 标签：wcf, authentication, authorization, wcf-security, 3-tier

再会。我已经到处寻找如何做到这一点的例子，虽然我找到了关于如何实现它的各种有用信息，但整体解决方案仍然让我望而却步。

我有一个基于 Web 的 3 层应用程序（演示层是 Web 表单，业务/DAL 层是 WCF Web 服务，DB 是 Oracle），我想为其实现授权/身份验证机制。

我的想法是使用 Enterprise Library Securty 块在 WCF 服务中生成令牌（并将其缓存在那里），并将令牌 ID 发送回 Web 应用服务器。令牌 ID 将被发送回客户端浏览器（通过 cookie），然后所有后续请求返回 WCF 服务，我将在请求消息的标头中传递此令牌 ID。然后，我将使用一些 WCF 可扩展性接口通过在缓存中查找 id 来检查身份验证。我还将使用令牌缓存角色（我只是使用基于角色的简单访问），以便我可以在内存中访问用户的角色列表，并且我可以避免每次访问检查的数据库往返.

这部分对于正确的方式是否有意义？如果是这样，这是第二部分。

现在我的问题是如何从托管表示层的网络服务器管理角色访问和会话管理。我从业务层管理角色，但我还需要在表示层中访问它们，因为我还想通过 web.configs 使用基于角色的访问每个页面。我该怎么做呢？我也应该将角色传递回这一层吗？服务和 web 应用程序都必须存储此角色列表的版本，这有点令人讨厌。

任何帮助将不胜感激！

# xml - 使用 Ant 解析 XML 文档中的字符串

> ID：10486399
> 
> 赞同：3
> 
> 时间：2012-05-07T17:29:59.933
> 
> 标签：xml, string, ant, target

在以下文档中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="toc">section</string>
<string name="id">id17</string>
</resources> 
```

如何返回值：id17

当我在我的 Ant 文件中运行以下目标时：

```
 <target name="print"
    description="print the contents of the config.xml file in various ways" >

  <xmlproperty file="$config.xml" prefix="build"/>
  <echo message="name = ${build.resources.string}"/>
  </target> 
```

我得到 -

```
print:
        [echo] name = section,id17 
```

有没有办法指定我只想要资源“id”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T21:39:15.827

我有一个好消息和一个坏消息要告诉你。一个坏消息是没有开箱即用的解决方案。好消息是，由于将方法公开为受保护的，因此该`xmlproperty`任务非常可扩展。`processNode()`以下是您可以执行的操作：

1\. 在类路径上使用 ant.jar（您可以`lib`在您的 ant 发行版的子目录中找到或[从 Maven 获取](http://mvnrepository.com/artifact/org.apache.ant/ant/1.8.3)）创建并编译以下代码：

```
package pl.sobczyk.piotr;

import org.apache.tools.ant.taskdefs.XmlProperty;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.Node;

public class MyXmlProp extends XmlProperty{

@Override
public Object processNode(Node node, String prefix, Object container) {
    if(node.hasAttributes()){
        NamedNodeMap nodeAttributes = node.getAttributes();
        Node nameNode = nodeAttributes.getNamedItem("name");
        if(nameNode != null){
           String name = nameNode.getNodeValue();

           String value = node.getTextContent();
           if(!value.trim().isEmpty()){
               String propName = prefix + "[" + name + "]";
               getProject().setProperty(propName, value);
           }
       }
    }

    return super.processNode(node, prefix, container);
}

} 
```

2\. 现在你只需要让这个任务对 ant 可见。`task`最简单的方法：在您拥有 ant 脚本的目录中创建子目录 -> 将已编译的 MyXmlProp 类及其目录结构复制到`task`目录，因此您最终应该得到类似：`task/pl/sobczyk/peter/MyXmlProp.class`.

3\. 将任务导入到您的 ant 脚本中，您最终应该得到如下内容：

```
<target name="print">
  <taskdef name="myxmlproperty" classname="pl.sobczyk.piotr.MyXmlProp">
    <classpath>
      <pathelement location="task"/>
    </classpath>
  </taskdef>
  <myxmlproperty file="config.xml" prefix="build"/>
  <echo message="name = ${build.resources.string[id]}"/>
</target> 
```

4\. 运行 ant，ant voila，你应该看到：`[echo] name = id17`

我们在这里所做的是为您的特定情况定义一个特殊的花哨的方括号语法:-)。对于一些更通用的解决方案，任务扩展可能会稍微复杂一些，但一切皆有可能:)。祝你好运。

# ios - 我什么时候需要注册 Bitly 应用程序？

> ID：10486401
> 
> 赞同：0
> 
> 时间：2012-05-07T17:30:26.260
> 
> 标签：ios, twitter, oauth, url-shortener

我想在我的 iOS 应用程序中使用 Bitly 在发布到 Twitter 时代表用户缩短 URL。

Bitly 基本帐户提供了可用于此目的的 API 密钥。

但随后他们也提供注册一个 OAth 应用程序，看似出于相同目的。

那么，我什么时候需要为此目的注册应用程序，而不是仅使用“常规”Bitly 帐户中的 API 密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:12:14.053

如果您跳过 OAuth 2，您只能访问 API 的一个子集。

在他们的文档中，他们指定了哪些 API 需要 OAuth 2。例如：[用户指标](http://dev.bitly.com/user_metrics.html)和许多[链接指标](http://dev.bitly.com/link_metrics.html)API。

# cordova - 如何更改“警报”的默认标题

> ID：10486403
> 
> 赞同：17
> 
> 时间：2012-05-07T17:30:29.850
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我正在尝试使用该`alert`方法，因此会弹出像 alertView 这样的原生 iOS。一切正常，并显示警报。但是警报的标题始终是`index.html`。

如何编辑`alert`方法的标题

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-07T17:46:58.370

您将希望使用PhoneGap API 中的[navigator.notification.alert()](http://docs.phonegap.com/en/1.7.0/cordova_notification_notification.md.html#notification.alert)代替。它将允许您在警报框上设置标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-01T12:54:51.493

如果您不想重构代码，可以使用通知覆盖 alert() 方法：

```
window.alert = function (txt) {
   navigator.notification.alert(txt, null, "Alert", "Close");
} 
```

您可以自定义窗口标题：“警报”和关闭按钮：“关闭”

# asp.net-mvc-3 - 模型上的外键（代码优先）

> ID：10486406
> 
> 赞同：1
> 
> 时间：2012-05-07T17:30:49.023
> 
> 标签：asp.net-mvc-3, entity-framework

我有几个模型和一个数据库，但没有将任何东西链接在一起的外键。这似乎是我项目中的一个巨大弱点，所以我试图将外键插入我的模型中，然后可能会根据我的模型重新生成我的数据库。

我在理解外键如何工作时遇到了一些麻烦，尤其是在一对多的关系中。

对于这个例子，我有一个或多个产品，每个产品可能有多个评论：

我删除了一些注释和属性来压缩模型。

产品型号/实体：

```
public class Product
    {
        public int ProductId { get; set; }

        public int OwnerId {get; set; }

        public string Title { get; set; }

        public int Rating { get; set; }

        public decimal Price { get; set; }

        public int Quantity { get; set; }

        public string Description { get; set; }
    } 
```

审查模型/实体：

```
 public class Review
    {

        public int ReviewId { get; set; }

        public int ProductId { get; set; }

        public int WriterId { get; set; }

        public string Title { get; set; }

        public string Body { get; set; }
    } 
```

我想要对 ProductId 的 ProductId 到 Review 的 ProductId 的外键约束。我将如何进行这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:47:22.823

您至少需要一个导航属性来定义两个实体之间的关系，例如：

```
public class Review
{
    public int ReviewId { get; set; }

    [ForeignKey("Product")]
    public int ProductId { get; set; }
    public Product Product { get; set; }

    public int WriterId { get; set; }
    public string Title { get; set; }
    public string Body { get; set; }
} 
```

如果需要，您还可以添加集合属性`Product`：

```
public ICollection<Review> Reviews { get; set; } 
```

`[ForeignKey]`您可以使用 Fluent API 定义 FK，而不是使用属性：

```
modelBuilder.Entity<Review>()
    .HasRequired(r => r.Product)
    .WithMany()  // or .WithMany(p => p.Reviews)
    .HasForeignKey(r => r.ProductId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:47:16.697

外键的目的是将表链接在一起。例如，当有唯一的 ID 号时，外键很容易解释。productId 应该是唯一的 id，并且可能是您的产品表的主键。在审查表中，productId 是一个外键，因为它将允许连接表并查看两个表中所有类别的数据。

从 Product 中选择 ProductId、Title、Price、WriterId、Description 作为 P，Review 作为 R 其中 P.ProductId = R.ProductId；

当这个 select 语句对你的 db 运行时，你会从评论表中看到产品唯一 ID、标题、价格、作者 ID、描述。关键行是 P.ProductId = R.ProductId

还要确保外键不为空

# java - ConcurrentHashMap put vs putIfAbsent

> ID：10486413
> 
> 赞同：20
> 
> 时间：2012-05-07T17:31:05.643
> 
> 标签：java, caching, concurrency, hashmap

Java [Docs](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html#putIfAbsent%28K,%20V%29)说，`putIfAbsent`相当于

```
 if (!map.containsKey(key)) 
      return map.put(key, value);
   else
      return map.get(key); 
```

因此，如果该键存在于地图中，它不会更新其值。它是否正确？

如果我想根据某些标准更新键值怎么办？说到期时间等。

这会是添加和更新缓存的更好实现吗？

```
public void AddToCache(T key, V value)
{
   V local = _cache.putifabsent(key, value);

   if(local.equals(value) && local.IsExpired() == false){
     return;
   }
   // this is for updating the cache with a new value
   _cache.put(key, value);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T17:40:02.387

> 所以它不会更新键的值。它是否正确？

那是对的。它将返回地图中已经存在的当前值。

> 这会是添加和更新缓存的更好实现吗？

有几件事可以使您的实施更好。

**1.**你不应该使用 putIfAbsent 来测试它是否存在，你应该只在你想确保一个不存在时才使用它 then `putIfAbsent`。相反，您应该使用`map.get`它来测试它的存在（或 map.contains）。

```
 V local = _cache.get(key);
    if (local.equals(value) && !local.IsExpired()) {
        return;
    } 
```

**2.**而不是 put 您将要替换，这是因为可能会发生竞争条件，其中`if`两个或多个线程可以将其评估为假，其中两个（或多个）线程中的一个将覆盖另一个线程的 put。

你可以做的是[替换](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#replace%28K,%20V,%20V%29)

当一切都说完了，它可能看起来像这样

```
public void AddToCache(T key, V value) {
    for (;;) {

        V local = _cache.get(key);
        if(local == null){
            local = _cache.putIfAbsent(key, value);
            if(local == null)
                return;
        }
        if (local.equals(value) && !local.IsExpired()) {
            return;
        }

        if (_cache.replace(key, local, value))
            return;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T17:39:43.187

如果密钥以前不在地图中，您的代码将引发 NPE。

除此之外，虽然这是一个合理的想法，但它不会在“*并发*”环境中工作。添加该`putIfAbsent()`方法的原因是，映射可以使用它用来使操作线程安全的任何底层支持来管理操作的原子性。在您的实现中，两个不同的调用者可能会互相踩踏结束（第一个用新值替换过期值，第二个立即用第二个新值替换第一个新值）。

# regex - Powershell 模式匹配正则表达式

> ID：10486416
> 
> 赞同：2
> 
> 时间：2012-05-07T17:31:12.603
> 
> 标签：regex, powershell, match

在我们的服务器上，我们有类似于以下的文件：

```
C:\Documents and Settings\username\Application Data\Sun\Java\jre1.6.0_01\
C:\Documents and Settings\username\Application Data\Sun\Java\jre1.6.0_02\
C:\Documents and Settings\username\Application Data\Sun\Java\jre1.6.0_03\
etc 
```

我们不再需要这些文件，所以我正在尝试编写一个 powershell 脚本来删除它们。现在我将自己限制在一台特定的服务器上，并且我有以下脚本：

```
 $path = "\\server\c$\Documents and Settings\"
 Get-ChildItem $path -Recurse | Where {$_.PSIsContainer -and ($_ -match '^jre1.6.0_')} | Remove-Item -Recurse -WhatIf 
```

问题是我使用的模式似乎没有调用匹配，我不确定我做错了什么。我已经尝试了几种排列，但似乎都没有。那里的任何正则表达式大师都可以阐明我可能做错了什么吗？

谢谢布拉德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:25:17.307

试试这样：

```
Get-ChildItem $path -Recurse -Force | .... 
```

`-Force`还查找隐藏或系统文件/文件夹。

“应用程序数据”文件夹已隐藏！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:35:38.363

正则表达式没问题，我认为您应该尝试

```
$_.Name -match '^jre1.6.0_' 
```

而不仅仅是

```
$_ -match '^jre1.6.0_' 
```

# mongodb - 自动计算字段

> ID：10486419
> 
> 赞同：4
> 
> 时间：2012-05-07T17:31:31.017
> 
> 标签：mongodb, automation, mongoose

下面是我的应用程序的架构。在“元”下，我必须有一个名为“upvotes”和“downvotes”的字段，并且我想要一个用于显示总点数的字段（upvotes - downvotes）。至于现在我在客户端计算这个，但我也希望能够按点排序（点数最多的图像首先降序）。

有没有办法在猫鼬中自动计算一个字段，如果是这样，它是如何完成的？

```
var ImageSchema = new Schema({
    name : String,
    size : Number,
    title   : String,
    body : String,
    buf : Buffer,
    date: { type: Date, default: Date.now },
    comments : [CommentSchema],
    meta : {
        upvotes : Number,
        downvotes : Number,
        points : ? // <- upvotes - downvotes
        favs : Number,
        uniqueIPs : [String],
        tags : [String]
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T13:49:21.380

您应该使用[Mongoose 中间件](http://mongoosejs.com/docs/middleware.html)：

```
schema.pre('save', function (next) {
    // set points value based on positive and negatives 
}) 
```

这样，每次保存数据时，都会刷新积分值。不利的一面是，即使不赞成/反对票没有改变，它也会被刷新。

警告：如果多个应用程序使用同一个数据库，请格外小心，您希望在任何地方都应用相同的逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T18:02:41.620

我会将该字段设为普通的 Number 字段，并`points`在您递增时适当地递增（或递减）它（此处使用常规 JS shell 语法显示，但该技术也适用于 mongoose）：`upvotes``downvotes`

```
// when upvoting
db.image.update({/* criteria */}, {$inc: {upvotes: 1, points: 1}})

// when downvoting
db.image.update({/* criteria */}, {$inc: {downvotes: 1, points: -1}}) 
```

如果您有现有数据，则需要`points`从现有对象生成字段，但是一旦拥有它，由于 MongoDB 更新和操作符的原子性质，它将保持同步`$inc`。

# facebook - Facebook 可以使用具有不同 URL 的类似按钮计数器

> ID：10486420
> 
> 赞同：2
> 
> 时间：2012-05-07T17:31:43.147
> 
> 标签：facebook, twitter, linkedin, google-plus

我想分享 url: [http://example.com/2](http://example.com/2)，但需要总是在[http://example.com/1上点赞计数器](http://example.com/1)

例如现在在 Twitter 我使用 data-counturl 参数

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="<?php echo $twitter_url; ?>" data-counturl="<?php echo $share_url; ?>" data-count="vertical">Share</a> 
```

因此，您在代码示例中如何看到我使用一个 url 作为数据 url，而计数器在另一个 url 上。这对我来说是必需的，因为为帐户分配了缩短的 URL 以跟踪特定的用户和数据信息。

facebook（google+、linkedin）如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:37:49.853

据我所知，能够定位两个不同的 URL，一个用于计数，一个用于共享内容，这是 twitter 按钮所独有的。Facebook、Google+ 和 LinkedIn 都需要与共享内容相同的计数目标。

# xcode - Cocos2d：如何在每次创建时增加我的 sprite 的 position.x

> ID：10486427
> 
> 赞同：0
> 
> 时间：2012-05-07T17:32:25.247
> 
> 标签：xcode, animation, cocos2d-iphone, position, sprite

好吧，我每秒在同一位置创建一个精灵。我想创建精灵，但每次都使用 x + 10 。所以每秒都会创建精灵，但 x 位置会增长 10。对不起我的英语，我是法语：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:40:57.300

cpp cocos2d-x 的伪代码，请注意。

标题：

```
class Myclass extends CCScene{

    public int position = 0;
    ...
} 
```

我的类.cpp：

```
Myclass(){
    ...
    CCDirector::getSharedDirector()->schedule(step, 1/60);
}

void step() {
    ...
    if (oneSecond()){
        position += 10;
        createSprite(position);
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:41:16.693

只需使用每次创建精灵时递增的静态变量：

```
 static int x = 0;
 create_sprite(x, 0);
 x += 10; 
```

我不熟悉 cocoas2d 的实际语法，但这应该可以。

# c++ - 如何使用智能指针做到这一点？

> ID：10486433
> 
> 赞同：1
> 
> 时间：2012-05-07T17:32:43.513
> 
> 标签：c++, c++11, segmentation-fault, smart-pointers, weak-ptr

这是我想要实现的目标：

```
#include <iostream>
using std::cout;

#include <vector>
using std::vector;

int main()
{
    vector<int> a {3, 7};

    int *p = &a.at (0); //assign 3

    for (int i = 0; i < 10; ++i) //swap and print (3,7,3...)
    {
        p = (*p == a.at (0) ? &a.at (1) : &a.at (0));
        cout << *p << '\n';
    }
} 
```

我想使用智能指针而不是原始指针，看看它们如何更好，但无法真正弄清楚如何实现来回切换（这是用于在游戏中轮流使用；这是一个`Player *`）。

我尝试用两个单独的测试替换此处的指针，`std::unique_ptr`并`std::shared_ptr`在两个单独的测试中使用`reset`切换，并且在第一个测试之后都给出随机数，正如预期的那样。

接下来，我尝试了`std::weak_ptr`它看起来像我需要的东西，尽管界面并不是那么相似。从我所看到的，使用它的唯一方法是 through `lock()`，所以我尝试`lock().`在调用之前`reset`附加它并将其附加到取消引用，但是崩溃了。

我如何使用`std::weak_ptr`而不是原始指针，或者我可以以某种方式实际使用其他指针之一？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:36:15.057

我认为您应该研究 using `std::vector::iterator`，而不是使用原始指针进行这种类型的索引操作，请记住，任何插入 a 的操作`std::vector`都可能使迭代器无效。例如，您可以执行以下操作：

```
typedef std::vector<int>::iterator iter_t;

vector<int> a {3, 7};

iter_t p = iter_t(&a.at(0)); //assign 3

for (int i = 0; i < 10; ++i) //swap and print (3,7,3...)
{
    p = (*p == a.at(0) ? iter_t(&a.at(1)) : iter_t(&a.at(0)));
    cout << *p << '\n';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T17:37:13.953

根据定义，智能指针并不是“好得多”。它们仅在需要管理所指向的内存时才有用。

由于您的指针只是指向 a 中的元素`vector`，因此您根本不需要智能指针。大多数智能指针会在超出范围时尝试删除它们指向的内存，在这种情况下会导致鼻恶魔。

但是请注意，调整向量的大小可能会导致所有指针无效。确保在指针仍在范围内时不添加或删除元素。

在这种情况下，玩家轮流进行，我可能根本不会使用指针，而是像这样：

```
int main()
{
    vector<int> players {3, 7};

    int current_player = 0;

    while (!game_over())
    {
        cout << players[current_player] << '\n';
        current_player = (current_player + 1) % players.size();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:49:47.040

刚刚意识到您可能意味着您想要一个指向向量中*int*的智能指针，而不是将向量中的 int 更改为智能指针。我根本不会那样做。我会使用向量的迭代器：

```
for (int i = 0; i < 10; ++i) {
  auto it = it.begin() + (i % 2 ? 1:0);
  f(*it);
} 
```

使用 shared、unique 或任何其他指向向量内部的指针会导致坏的、坏的、坏的事情。也不保证使用原始指针，因为它们不指示任何关于它们所指向的内容。另一方面，向量的迭代器虽然可能实现为原始指针，但对于它们的使用有明确的、记录在案的规则，您可以通过使用它们在代码中记录这些规则。

不要忘记“智能指针”包括迭代器。

# html - CSS - 孙子仅从 IE 中的不同父级继承类

> ID：10486438
> 
> 赞同：0
> 
> 时间：2012-05-07T17:32:59.333
> 
> 标签：html, css, internet-explorer, inheritance

我在使用 Internet Explorer 时遇到问题。我很想举手说我不想支持它，但这不是一个选择。基本上，我写了一个用于导航的无序列表。然后在另一个部分，使用另一个父级，我使用了另一个无序列表，但它从另一个 ID 继承了属性。它在所有其他浏览器中都可以正常工作。我剥离了页面的基本部分并将它们发布在下面。此外，我检查了 w3c css 验证器，我收到的警告说“在两个上下文#container 和 #stripes ul a:link 中颜色和背景颜色的颜色相同”。

你会看到如果你点击项目符号列表，它们的样式会像导航一样。但是，当我尝试更改项目符号列表时，它会影响导航！我尝试在主要内容中设置所有 a 属性，但随后它关闭了所有内容。

有人可以检查一下并提供帮助吗？它让我发疯！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>2012 Summer Blood Challenge</title>
<style  type="text/css">

#stripes ul
{ font-size:13px;
list-style-type:none;
margin:0;
padding:0;
overflow:hidden;

}
#stripes li
{
float:left; 
}
#stripes ul a:link,a:visited
{
display:block;
width:128px;
font-weight:bold;
color:#FFFFFF; background-image:url(https://trigger.lwcdirect.com/LWC_00486/uploadImages/2012sbc/redbar.jpg);
 background-position: bottom;
text-align:center;
padding:4px;
text-decoration:none;
height:32px;
}
#stripes ul a:hover,a:active
{
background-image:url(https://trigger.lwcdirect.com/LWC_00486/uploadImages/2012sbc/darkredbar.jpg);
}

.roundside {
    background-image: url(https://trigger.lwcdirect.com/LWC_00486/uploadImages/2012sbc/goldboxes_02.jpg);
    background-repeat: repeat-y;
    width: 560px;
    text-align: left;
    padding: 0 30px 0 30px;
}

.roundside ul {list-style-type: none;
    margin: 0;
    padding: 0;}

.roundside li {background-image:url(https://trigger.lwcdirect.com/LWC_00486/uploadImages/2012sbc/drop.gif);

    background-repeat:no-repeat;
    padding:0 0 5px 16px; font-size:16px;}

.roundside ul a:link,a:visited,a:hover,a:active {color:#990000; font-weight:bold}

</style>
</head>
<body class="oneColFixCtrHdr">
<div id="largecontainer"><!--set centering-->
        <div id="container"><!--creates box-->
            <div id="stripes">

            <center>
            <ul>
                <li><a href="#">Promotional Materials</a></li>
                <li><a href="#" style="font-size:11px">Participating Employers and Results</a></li> 
                <li><a href="#">Newsletters</a></li>
                <li><a href="#">Give Blood</a></li>
                <li><a href="#">Become a Member</a></li>
            </ul>
            </center>

            </div><!--end stripes-->
            <div id="mainContent">
                    <div class="roundside">
                    <ul>
                        <li><a href="#">Official Rules and Point Structure</a></li>
                        <li><a href="#">Gage Flyer 8.5x11</a></li>
                        <li><a href="#">2012 SBC Hero Card</a></li>
                    </ul>
                 </div>
            </div> <!-- end #mainContent -->
            <div id="footer">&nbsp;
            </div><!-- end #footer -->
        </div><!--end container-->
    </div><!-- end #largecontainer -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T18:01:54.203

你的第二个从`ul`里面`.roundside`拿起css的`#stripes ul`原因是因为下面的css

```
#stripes ul a:link,a:visited 
```

你需要把它改成

```
#stripes ul a:link, #stripes ul a:visited 
```

否则它将应用在它之后声明的样式到`a:visited`站点上的每个，而不仅仅是在`#stripes ul`

这也是`#stripes ul a:hover,a:active`需要将其更改为的情况，`#stripes ul a:hover, #stripes ul a:hover a:active`否则您将遇到相同的问题。

希望这可以解决您的问题。

编辑： MrSlayer 在我错过的评论中提出了一个很好的观点。

你也最好改变

```
.roundside ul a:link,a:visited,a:hover,a:active {color:#990000; font-weight:bold} 
```

到

```
.roundside ul a:link, .roundside ul a:visited, .roundside ul a:hover, .roundside ul a:active {color:#990000; font-weight:bold} 
```

以避免`a`将来出现任何令人讨厌的相关意外。在 CSS 中，设置样式时需要尽可能具体

# c# - 显示部分视图取决于调用的 Action 和 Controller

> ID：10486447
> 
> 赞同：0
> 
> 时间：2012-05-07T17:33:54.450
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

每个人都知道，在 mvc3 中创建项目时默认有一个布局页面，并且默认情况下还有一个
部分视图，默认命名为`_LogOnPartial.cshtml`
登录和注销链接可用的位置，并呈现在布局页面上。
我希望当我调用从布局继承的主页时，
那些登录和注销链接不会显示在主页上
......
总之我不想`_LogOnPartial.cshtml`在调用主页时呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:41:57.363

```
@if (ViewContext.RouteData.Values["Controller"] != "Foo" &&  
     ViewContext.RouteData.Values["Action"] != "Bar")
{
    // call the partial you want here.
} 
```

# php - 为什么只有 2 个条目时我的 PHP 数据库查询返回 6 行？

> ID：10486453
> 
> 赞同：0
> 
> 时间：2012-05-07T17:34:34.230
> 
> 标签：php, mysql

我的数据库表中有 2 个条目，但是由于某种原因，我的 PHP/SQL 显示每个条目有 6 个副本。

```
<? 
mysql_select_db($database_database_connection, $database_connection);
$getdevices=("SELECT * FROM Device_tbl");
$getdevicesresult = mysql_query($getdevices, $database_connection) or die(mysql_error());
while($device=mysql_fetch_assoc($getdevicesresult))
{
foreach($device as $devicevalue) { ?>

        <div class="hold-cont">
        <div class="holder">
            <div class="image-hold" >
                <img class="image-icon" src="images/android.png"/>
</div>
        </div>
        <div class="device-name devicename-txt"><? print_r($device['Model']);  ?></div>
    </div>

<? }}
mysql_close();
?> 
```

那应该只返回 2 行，而不是每个条目的 6 行。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:37:39.620

您正在循环两次结果。摆脱不必要的`foreach()`调用（`while()`将遍历查询的所有结果）。

```
<?php
mysql_select_db($database_database_connection, $database_connection);
$getdevices=("SELECT * FROM Device_tbl");
$getdevicesresult = mysql_query($getdevices, $database_connection) or die(mysql_error());
while($device=mysql_fetch_assoc($getdevicesresult)){
?>
    <div class="hold-cont">
        <div class="holder">
            <div class="image-hold" >
                <img class="image-icon" src="images/android.png"/>
            </div>
        </div>
        <div class="device-name devicename-txt"><?php echo $device['Model'];  ?></div>
    </div>

<?php
}
mysql_close();
?> 
```

***注意：****我也已更改`print_r(...)`为`echo ...`as `$device['Model']`is not a array，并且我已将您的短开始标签 ( `<?`) 更改为普通标签 ( )，`<?php`因为并非所有服务器都支持`short tags`（请参阅[PHP 短标签是否可以使用？](https://stackoverflow.com/questions/200640/are-php-short-tags-acceptable-to-use)）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:37:02.950

请更正以下行

```
 <div class="device-name devicename-txt"><? print_r($device['Model']);  ?></div> 
```

和

```
 <div class="device-name devicename-txt"><? echo($devicevalue['Model']);  ?></div> 
```

# yui - YUI3 等效于 getQueryStringParameter 用于获取查询字符串参数

> ID：10486454
> 
> 赞同：2
> 
> 时间：2012-05-07T17:34:35.767
> 
> 标签：yui, yui3

有人可以告诉我什么等同于 YUI2 和 YUI3 已弃用

```
Y.History.getQueryStringParameter('paramName'); 
```

在最新的 YUI3 中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:36:29.283

`Y.QueryString.parse`应该做的伎俩。

（它没有记录，但它在源代码中：http: [//yuilibrary.com/yui/docs/api/files/querystring_js_querystring-parse-simple.js.html#l7](http://yuilibrary.com/yui/docs/api/files/querystring_js_querystring-parse-simple.js.html#l7)）

您只需将查询字符串传递给它（您可以从 window.location.search 中获取，不包括 '?' 字符），它会返回一个包含所有键值对的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T10:46:57.390

```
YUI().use('querystring-parse', function(Y)
        {query = Y.QueryString.parse(window.location.search.substr(1));
    }
);
var param = query.param; 
```

来源：http: [//yuilibrary.com/forum/viewtopic.php ?p=35000](http://yuilibrary.com/forum/viewtopic.php?p=35000)

# c++ - all_reduce 与布尔值

> ID：10486455
> 
> 赞同：2
> 
> 时间：2012-05-07T17:34:42.967
> 
> 标签：c++, boost, mpi, boost-mpi

我正在尝试使用 all_reduce 函数从每个处理器收集一个布尔值，如果任何布尔值为真（即“或”运算符），则将它们减少为真。但是我在为此找到正确的语法时遇到问题。我现在拥有的是

```
all_reduce(world,update,update_sum,or()); 
```

当我尝试运行它时，我得到以下编译器错误。

```
time_step_Gear_Verlet.cpp:94: error: expected primary-expression before '||' token
time_step_Gear_Verlet.cpp:94: error: expected primary-expression before ')' token 
```

我尝试只使用 ||() 而不是 or()，但这也不起作用。也许我错过了什么？还是我必须采取另一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:37:23.930

你应该使用`std::logical_or`. [教程页面](http://www.boost.org/doc/libs/1_49_0/doc/html/mpi/tutorial.html)包含从 C MPI 到 Boost.MPI 中相应操作的操作表。

# pdf - 使用 itextsharp 将字体嵌入 pdf

> ID：10486459
> 
> 赞同：3
> 
> 时间：2012-05-07T17:34:58.053
> 
> 标签：pdf, fonts, itextsharp, itext

我正在尝试使用 itextsharp 5.2.1.0 嵌入字体，但出现错误。字体是 KozGoPro-Light.otf，经过一番研究，它是一种日本字体。我尝试了以下...

```
 Dim tblx1 As PdfPTable = New PdfPTable(1)
        Dim tblrightcell_margin2 As PdfPCell
        Dim bfR As iTextSharp.text.pdf.BaseFont

        **bfR = iTextSharp.text.pdf.BaseFont.CreateFont("KozGoPro-Light.otf", iTextSharp.text.pdf.BaseFont.IDENTITY_H, iTextSharp.text.pdf.BaseFont.EMBEDDED)
        fntKozgoProExtra = New Font(bfR, 18)**

        tblrightcell_margin2 = New PdfPCell(New Phrase("testing....", fntKozgoProExtra))

        tblx1.AddCell(tblrightcell_margin2) 
```

当我尝试将字体添加到短语时，它会说对象引用未设置为对象的实例。如果我将 iTextSharp.text.pdf.BaseFont.IDENTITY_H 更改为 CP1252 或任何这些编码，它只会在 pdf 上显示不正确。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:35:07.760

当您`IDENTITY_H`用于编码时，iTextSharp 会自动打开字体子集。不幸的是，该代码中[似乎仍然存在错误](http://itext-general.2136553.n4.nabble.com/Font-subset-failure-td3574468.html)。现在的解决方案是关闭该字体的子集：

```
bfR = iTextSharp.text.pdf.BaseFont.CreateFont(FontFile, iTextSharp.text.pdf.BaseFont.IDENTITY_H, iTextSharp.text.pdf.BaseFont.EMBEDDED)
bfR.Subset = False 
```

# c# - MonoDevelop - csproj 文件中的通配符

> ID：10486461
> 
> 赞同：4
> 
> 时间：2012-05-07T17:35:11.413
> 
> 标签：c#, macos, xamarin.ios, monodevelop, xamarin.android

如链接所述，我在 Windows 中的一些 *.csproj 文件中连接了[通配符](http://blogs.msdn.com/b/shawnhar/archive/2007/06/06/wildcard-content-using-msbuild.aspx)。这对我们在 Windows 上的 Visual Studio 中非常有用。基本上，它提供了一种在项目文件夹中添加所有类型文件的方法。这样我们的设计师/动画师就可以直接放入文件并提交。

现在我需要它才能在 Mac 上的 MonoDevelop 中工作。

最初我尝试复制在 Visual Studio 中有效的内容，但这根本不起作用。我猜是因为它是 MSBuild 做的工作，这在 Mac 上不存在。

所以现在，我正在尝试在 OS X 上的 MonoDevelop 中做类似的事情，所以我正在尝试这样的事情：

```
 <ItemGroup>
    <Content Include="../../../Assets/images/iPhone/*.png">
      <Link>Content/*.png</Link>
    </Content>
  </ItemGroup> 
```

但是，我得到：

```
File '/MyPath/Assets/images/iPhone/*.png' is missing 
```

有没有办法在 MonoDevelop 中完成这项工作？这肯定会加快我单独添加图像的过程。我也需要链接才能工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T22:13:39.497

MonoDevelop 不支持项目文件中的通配符。通常，如果您启用实验性 xbuild 支持选项，则此类构造应该为某些项目类型正确*构建*，即使它们不会正确加载到解决方案树中（不确定链接元数据中的通配符）。但是，MonoTouch 和 MonoMac 还不支持 xbuild，所以这可能对您没有帮助。

[如果这对您很重要，请在 MonoDevelop错误跟踪器](https://bugzilla.xamarin.com)中提交增强错误。

# string - 使用查询字符串将 PHP 重定向到多个重定向

> ID：10486462
> 
> 赞同：-1
> 
> 时间：2012-05-07T17:35:18.007
> 
> 标签：string

我刚刚为客户建立了一个网站，他使用了一个外部表单插件。现在这个特定的表单有 8 个产品的下拉列表，并在选择任一产品并提交表单后发送查询字符串**（Url.com?Product+1、URL.com?Product+2 等） 。**现在利用这个查询字符串，我们需要将客户端重定向到 8 个不同的外部网站。

例如 - 客户走进并从下拉列表中选择“产品 1”，他需要重定向到 www.product1.com，如果他选择“产品 2”，他需要转到 www.product2.com

我可以使查询字符串转到 PHP 文件而不是主 URL - 所以如果或她在下拉列表中选择“产品 6” - 我可以让他发送到 URL.com/redirect.php?Product+6

但后来我希望它重定向到 Product6.com - 我该如何实现呢？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:46:04.507

这样做将他重定向到 URL.com/redirect.php?url=Product6

现在，

```
//redirect.php
if(isset($_GET["url"])){
    $uri = $_GET["url"];
    if ($uri == "product1"){
        header( 'Location: http://www.somewebsite.com') ;
    }
    if ($uri == "product2"){
        header( 'Location: http://www.differentwebsite.com') ;
    }
}
else{
    echo "No target URL provided" 
} 
```

URL.com/redirect.php?uri=product1 将转到 somewebsite.com URL.com/redirect.php?uri=product+name 将转到 differentwebsite.com

# c# - Metro App 全局变量 C#

> ID：10486465
> 
> 赞同：3
> 
> 时间：2012-05-07T17:35:27.740
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我正在为 Windows 8 创建我的第一个应用程序，我有一个问题。在 Windows Phone 7 中，我们可以在 App.xaml.cs 中定义所有全局变量并由 App.all_performers 访问，例如，这适用于默认数据类型，但如果我创建一个由我创建的对象的列表，例如 evento

```
public static List<evento> eventos_near = new List<evento>(); 
```

我有这个错误：

> 可访问性不一致：字段类型“System.Collections.Generic.List<UrbaneousTry2.evento>”比字段“UrbaneousTry2.App.eventos_near”更难访问

任何人都可以帮助我吗？我需要在我的应用程序的所有页面中使用列表和字典

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T17:41:40.747

您遇到的问题是它`evento`不是公共类型，但您已将其声明为在公共位置可用。如果这是合法的，它将允许声明为非公共的类型可以从任何有效地将其公开的引用程序集中访问。

您需要切换`evento`为公共类型或将声明设为内部

```
internal static List<evento> eventos_near = new List<evento>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:41:42.060

您必须`eventos`公开您的课程。

# logging - 如何限制 apache 日志的单个字段的大小？

> ID：10486469
> 
> 赞同：1
> 
> 时间：2012-05-07T17:35:35.323
> 
> 标签：logging, apache2

**历史/解释**：我在 Linux 服务器上使用 apache2。原木变得巨大（大约每小时 11 兆）。

**问题**：站点内的引用 URL 的大小可能高达 3kb 左右。（我知道这很糟糕......我没有制作它们。）很多参数都是通过 GET 方法传递的。

**需要**：有没有办法截断 apache 访问日志的引用字段？有没有办法只在 apache 访问日志中显示推荐人的 TLD？

我知道我可以创建一个自定义的“访问”日志，只是不包括引荐来源网址，但是我想跟踪传入流量的 TLD（顶级域）。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:46:15.823

如果它只是您感兴趣的推荐人的 TLD，您可以使用 ( [mod_setenvif](http://httpd.apache.org/docs/2.2/mod/mod_setenvif.html)将其挑选出来并将其放入环境变量中，然后您可以将其打印到您的日志文件中。

# android - Eclipse 没有为我的 android 项目构建 R 类

> ID：10486476
> 
> 赞同：1
> 
> 时间：2012-05-07T17:35:54.627
> 
> 标签：android, eclipse

我的系统崩溃了，我不得不重新安装我的所有软件。现在只喜欢......我一半的android项目会构建。似乎没有构建 R 类。我以前遇到过这个问题，但它似乎消失了一些。

我正在使用日食。

我尝试了一切，构建项目，清理它，然后构建它，似乎没有任何工作！

错误 setContentView(R.layout.factlist); R 无法解析为可验证的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:45:17.277

这有两个主要原因。您用于导入 R 的导入语句或 XML 文件中存在错误。如果您的班级位于顶部，请确保您执行以下操作：

```
import your.pacakge.R; //make sure its not import android.R; 
```

如果这不起作用，请检查您正在使用的 XML 文件。确保它没有错误（打开的标签、拼写错误的标签等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T17:45:31.647

这也发生在我身上，经常发生。通常，当`R.java`消失时，这意味着您的项目中某处存在错误（这会阻止生成此文件）。

仔细验证是否一切正常，尤其是在您的资源文件（XML 文件）中。Eclipse 可以帮助您确定`Problems`窗口中的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T17:49:05.150

R.java 会**自动**创建。

首先，您要解决项目中与**R.java**无关的其他错误。

当您解决所有其他错误时，您的 R.java 将自动创建。

如果您仍然无法删除错误。

只需**注释**除 R.java 以外的错误代码

然后一一删除评论并解决您的错误。

希望对你有帮助...

# c# - 框架中的页面和主窗口之间的 C# WPF 数据交换

> ID：10486480
> 
> 赞同：3
> 
> 时间：2012-05-07T17:36:19.987
> 
> 标签：c#, wpf, frame

在我的 MainWindow.xaml 我有以下代码：

```
<Frame Name="FrmView" Source="Overview.xaml" NavigationUIVisibility="Hidden" /> 
```

现在，在 Overview.xaml.cs 中，我想访问在 MainWindow.xaml.cs 中声明和初始化的 ObservableCollection。有什么方法可以从 Frame/Page 访问 MainWindow 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:07:02.270

您可以在页面中尝试 Window.GetWindow(this) 。这应该为您提供顶级窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:38:58.917

您需要像这样声明您的应用程序：

*   或`application resource`字典中存在的资源，因此可以由不同的窗口访问

*   或者像一个代码隐藏变量并通过代码而不是从 XAML 获取/设置它。

# javascript - 触发html文件上传文本字段？

> ID：10486483
> 
> 赞同：0
> 
> 时间：2012-05-07T17:36:27.800
> 
> 标签：javascript, javascript-events

我偶然发现了一些适用于 Firefox 但不适用于 Chrome 的代码。

似乎正在发生的事情是有一个在 CSS 中调整大小的文件上传文本字段。右侧还有一个上传按钮，用户可以单击以打开对话框以选择文件。文本字段长度为 60，我认为它用于覆盖“上传”按钮而不是调整字段大小。我在 Firebug 中减少了 60 到 50 并且它停止工作。

如何从“上传”按钮调用文件上传对话框？我想我需要向文本字段发送某种点击事件。

```
文件：__________________ 上传 | 单击字段或按钮打开文件对话框

```

我已经提取了 HTML：

```
<input name="fileField" id="fileField" type="file" size="60">
<span><input type="text" id="fileUploadField"><span></span></span>
<a href="javascript://" class="button" id="uploadButton"><span class="action">上传</span></a>

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:39:39.570

以下内容应该适合您：

```
document.getElementById('uploadButton').addEventListener('click', function(){
    document.getElementById('fileField').click();

    return false;
}, false); 
```

# iphone - 设备中的核心数据性能问题

> ID：10486484
> 
> 赞同：1
> 
> 时间：2012-05-07T17:36:31.977
> 
> 标签：iphone, performance, core-data, ios-simulator, device

我的应用程序需要使用 Web 服务并在 json 中获取一些数据。我需要解析 json 并在我的持久性存储中提供数据，一切都运行良好，直到我在实际设备中测试我的应用程序，应用程序看起来就像它一直持有它，直到我感到沮丧，然后最后它在我的脸上拉屎 x -(

这里我有一个 insertOrReplaceObjectForEntityForName 的方法

```
+(id) insertOrReplaceObjectForEntityForName:(NSString *)entityName inManagedObjectContext:_context WithPredicateString:(NSString *)predicateString, ...{

    NSManagedObject *object;

    va_list ap;
    va_start(ap, predicateString);

    NSFetchRequest *req = [[NSFetchRequest alloc] initWithEntityName:entityName];
    NSPredicate *pred = [NSPredicate predicateWithFormat:predicateString arguments:ap];
    [req setPredicate:pred];

    int count = [_context countForFetchRequest:req error:nil];

    if(count > 0){
        NSArray *arr = [_context executeFetchRequest:req error:nil];
        object = [arr objectAtIndex:0];
    }
    else{
        object = [NSEntityDescription insertNewObjectForEntityForName:entityName inManagedObjectContext:_context];
    }

    va_end(ap);

    return object;
} 
```

在这里，一条线的简单操作大约需要 0.004 秒，在解析数据时，我必须结合许多其他操作执行大约 1000 次此操作，这使得我的解析过程过于繁重。我的默认数据库中已经有很多药物，我必须检查药物是否存在，如果存在，我必须编辑它的值。

```
Drug *drug = [NSEntityDescription insertOrReplaceObjectForEntityForName:@"Drug" inManagedObjectContext:parsingContext WithPredicateString:[NSString stringWithFormat:@"drugId == '%@'",[drugDetails objectForKey:@"DrugId"]]]; 
```

我正在使用核心数据来保持应用程序中的历史记录，但现在我认为我需要远离核心数据并忘记保留历史记录，除非这里有人可以帮助我。我已经花了很多时间来制作我的应用程序，现在客户正在打我的腿，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:08:23.750

约格什，

您看到的延迟并不是特别来自 Core Data，而是来自 iOS 设备上闪存的缓慢速度。你如何减轻这种情况？

Flash 读取非常大的块（我被告知 128kB），然后必须在 DB scatter-gather 操作中将它们丢弃。因此，您希望从每次获取中获取尽可能多的数据。

您的代码对 json 中的每个项目进行提取。如果您使用 Instruments 的低级工具，就像我在我的应用程序中使用的那样，您很可能会看到您的应用程序大部分时间都处于空闲状态，等待闪存。

`in`您使用谓词运算符构建聚合提取。IOW，去收集你所有的`drugID`s 到一个集合或数组中。顺便说一句，根据您的 json，这通常可以通过使用`-valueForKey:`. 如这种谓词格式：

```
@"drugId in'%@'", [drugDetails valueForKey:@"DrugId"] 
```

where`drugDetails`是一个对象数组。此搜索让数据库聚合其所有页面获取。然后它会返回一个已经存在的记录数组。然后，您可以轻松地使用集合操作来根据需要选择更新或创建记录。然后，您可以将它们刷新为单个`-save:`.

安德鲁

# haskell - 我可以在 Get Monad 中使用 ST Monad（来自 Data.Binary）

> ID：10486486
> 
> 赞同：1
> 
> 时间：2012-05-07T17:36:41.803
> 
> 标签：haskell, monads

我正在尝试为向量编写二进制实例。

```
import qualified Data.Vector as V
import qualified Data.Vector.Mutable as MV
import Data.Binary

instance (Binary a) => Binary (V.Vector a) where
    put = vput
    get = vget 
```

实现方式是：先输出长度，再输出所有数据点

```
vput v = (put (V.length v)) >> (put `V.mapM_` v) 
```

问题出在`vget`. 我想使用`V.create`（我计划输出非常大的向量，语义看起来非常合适。

这是我的尝试：

```
vget :: (Binary a) => Get (V.Vector a)
vget = do
    size <- get
    vec <- liftM V.create $ do
        v <- (liftM MV.new) size
        forM_ [0..(size-1)] $ \i -> do
            val <- get
            (liftM3 MV.write) v i val
        return v -- This is line 22
    return vec 
```

错误是

```
SerializeVector.hs:22:16:
    Couldn't match expected type `forall s. ST s (MV.MVector s a0)'
            with actual type `Get a10' 
```

我一直试图通过推理并随机插入`liftM`s，但无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T18:44:42.753

不能`V.replicateM`用来填`Vector`吗？

```
vget :: (Binary a) => Get (V.Vector a)
vget = get >>= (`V.replicateM` get) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T17:47:51.770

这里的问题是您正在尝试编写两个 monad：`ST`和`Get`.

```
 vec <- liftM V.create $ do
        v <- (liftM MV.new) size
        forM_ [0..(size-1)] $ \i -> do
            val <- get                -- run an action in the `Get` monad
            (liftM3 MV.write) v i val -- write it in the `ST` monad 
```

这是不可能的。您需要一个`ST`转换器来允许您`get`从您的`ST`操作中运行调用。您可能可以使用`ST`transformer monad 包，或者将来自get monad 的一系列读取延迟流式传输到ST 构建器中。

# j - APL、J、K 的核心

> ID：10486493
> 
> 赞同：5
> 
> 时间：2012-05-07T17:37:26.010
> 
> 标签：j, apl, k

我试图理解 APL、J、K，这有点令人沮丧，因为：

*   大多数书籍都是关于 APL 的，但很少有 APL 实现，而且我没有奇怪的键盘。

*   K 似乎已被 Q 取代

*   J好像没有

我几乎觉得我在盯着 Common Lisp、Guile、Gambit、Chicken、SBCL ——当我真正想要的是看到一个方案评估器的两页时。

因此，我的问题是：是否有一个简短的（比如约 50 页）文档来讨论 APL/J/K 的核心，例如：

*   其评价模型

*   它的解析模型（因为左/右优先级似乎很重要）

*   它的语法

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T00:52:04.457

我认为您在“J 似乎没有……”上落后了，所以我不知道您是否已经找到了我将要链接到的所有内容并在上面将其忽略。

我的背景是非常广泛的语言范式和 APL/J/Q/K 集的粉丝，我选择将大部分时间花在使用 J 上。也就是说，鉴于 J 是由同样是 APL 成名的 Ken Iverson，事实证明，很多相同的想法都进入了它。我什至发现，在应用了非常简单的音译工作后，关于 APL 的旧论文似乎也适用于 J。

**低级引用**

最好的低级 J 参考（在解析、评估、语法甚至其内部数据结构原语的级别）是一组随 J 的开源分发提供的 HTML 文件。

您可以在线浏览：[这里](http://sblom.github.com/openj-core/ioj.htm)。

**更高级别的介绍内容**

[这篇博](http://www.antoarts.com/the-j-programming-language-an-introduction-and-tutorial/)文实际上是关于 J 思考事物方式的非常好的速成课程。

除此之外，我还发现[jsoftware.com](http://jsoftware.com)上特别有 2 本书很好地介绍了 J 编程：

1.  [学习 J](http://www.jsoftware.com/help/learning/contents.htm)（更短）
2.  [J for C Programmers](http://www.jsoftware.com/help/jforc/contents.htm)（更长）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T05:23:51.823

J 编程语言核心的“经典”语句是 Dictionary。我认为它是为该语言发布的最古老文档的一部分，但今天使用的版本已保持最新。

在网络上，可以在以下目录的第三列中找到该词典：http: [//www.jsoftware.com/help/dictionary/contents.htm](http://www.jsoftware.com/help/dictionary/contents.htm)

作为该语言的标准软件安装的一部分，安装了相同的文档。帮助系统将允许您访问该本地副本，或者您可以使用操作系统文件系统直接访问该文档。

没有什么可以取代这些信息。这是关于J的最权威的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-22T03:19:45.990

Ken Iverson[的《A Dictionary of APL](http://www.softwarepreservation.org/projects/apl/Books/ADICTIONARYOFAPL/view)》是一份出色的文档。虽然很短，但它不是一个很好的语言教程，但它*是*一个很好的参考。它是在 J 和 A 和 K 等后来的方言出现之前编写的，但它讨论了 APL2 不同版本中的一些常见变体。

由于其悠久的历史，APL 在风格和特性上经历了几次根本性的变化。

*   1950 年代后期：它是一种“黑板”语言，用于简洁地描述算法并在人类之间准确地传达含义。
*   1960 年代早期：它是一种算法设计语言。用于组合高级算法，然后需要将其“手动编译”成任何可用的机器语言。
*   1960 年代后期：计算机上的早期实现。
*   1970 年代初期：重新设计和重新实现为 APL2。
*   1970 年代后期：像 Nial 这样的相关语言，越来越多的“方言”。
*   1980 年代早期：前面提到*的 APL 词典，*它试图总结和解释 APL2 和方言中的完整概念网络。
*   1980 年代：J 和 K 等。

因此，不应该因为不符合 ASCII 而对 APL 太苛刻，因为它比 ascii 早了将近十年。它早于信息交换标准代码的想法。不同的机器是不同的。这是上世纪 50 年代。

上世纪 60 年代，艾弗森和工作人员受雇于 IBM，IBM 可以投入一些特殊的硬件和制造来实现所需的特殊字符（当时 IBM 本身还不是一个“ascii”城镇，而是使用了几种 EBCDIC 代码）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-29T16:14:09.337

APL 最初被称为“艾弗森表示法”。Ken Iverson 将其创建为一种工具，用于以计算机可以执行的形式表达代数语句。作为符号的第一个用途之一是 IBM 的 System\360 规范。

对于解析模型，考虑到大量的原始函数，APL 设计者决定严格从右到左的优先级以避免混淆。APL 开发时的其他编程语言具有算术层次结构，例如在不需要括号的加法之前发生乘法。对 APL 施加这样的层次结构会使其无法使用。从右到左的优先级有两个例外：数组索引和括号的使用。

APL 的语法是为了一致性而设计的。用户定义的函数以与原语相同的方式接受参数，并使用相同的从右到左的层次结构进行评估。

# amazon-s3 - 用于限制对存储桶的公共访问但允许引用域的 AWS 存储桶策略

> ID：10486495
> 
> 赞同：5
> 
> 时间：2012-05-07T17:37:28.043
> 
> 标签：amazon-s3, amazon-web-services, amazon-cloudfront

我有以下存储桶策略：

```
{
"Version": "2008-10-17",
"Id": "MyDomainpremiumflvfiles",
"Statement": [
    {
        "Sid": "Allow get requests to specific referrers",
        "Effect": "Allow",
        "Principal": {
            "AWS": "*"
        },
        "Action": "s3:GetObject",
        "Resource": "arn:aws:s3:::premiumflvfiles/*",
        "Condition": {
            "StringLike": {
                "aws:Referer": [
                    "http://mydomain.com/*",
                    "http://www.mydomain.com/*"
                ]
            }
        }
    },
    {
        "Sid": "Allow CloudFront get requests",
        "Effect": "Allow",
        "Principal": {
            "AWS": "arn:aws:iam::123456789:root"
        },
        "Action": "s3:GetObject",
        "Resource": "arn:aws:s3:::premiumflvfiles/*"
    }
]
} 
```

其中 123456789 已替换为我正确的客户 ID，并且 mydomain 已替换为正确的域。

我已经取消了公共访问权限，但是当我这样做时，我无权访问引用域中的文件。我确定我遗漏了一些明显的东西，但我无法弄清楚。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:21:09.503

这将帮助您生成有效的策略[AWS Policy Generator](http://awspolicygen.s3.amazonaws.com/policygen.html)

# iphone - UINavigation 控制器未在横向模式下打开

> ID：10486497
> 
> 赞同：0
> 
> 时间：2012-05-07T17:37:34.953
> 
> 标签：iphone, ios, uiview, uinavigationcontroller, cocos2d-iphone

我正在`UIViewController`通过以下方式加载：

```
-(void)logIn
{
    NewSignInView *viewController = [[[NewSignInView alloc] init] autorelease];

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController];
    [self presentModalViewController:navController animated:YES];
    [navController release];

    [UIView animateWithDuration:0.3
                          delay:0
                        options:UIViewAnimationCurveEaseOut
                     animations:^{ self.view.alpha = 0; }
                     completion:^(BOOL finished){ }];
} 
```

`NewSignView`是 a `UIViewController`，它创建 a`UITableView`以从用户那里获取输入。当我使用 a 加载它时，`UINavigationController`它拒绝以横向模式打开。但是，如果我将它直接加载到`CCDirector`以下方式，它会在横向中正确打开。

```
[[[CCDirector sharedDirector] openGLView] addSubview:viewController.view]; 
```

我在里面使用以下内容`NewSignInView`：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

所以有些东西阻止`UINavigationController`了以横向模式打开。任何人都可以以任何方式帮助我找出导致问题的原因吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:58:20.793

尝试在您的 shouldAutorotateToInterfaceOrientation: 方法中进行以下操作：

```
return UIInterfaceOrientationIsLandscape(interfaceOrientation); 
```

所以你的控制器支持两种旋转，而不仅仅是 LandscapeRight。确保带有 logIn-Method 的 ViewController 在 shouldAutorotateToInterfaceOrientation 中返回 YES。

希望这可以帮助。此外，我会提出一个建议：不要在没有 Controller 的情况下将 ViewController 命名为 NewSignInView 以避免混淆。如果这只是一个快速而简单的例子 - 没关系。

打招呼

# asp.net-mvc - 使用 LINQ 在 MVC 中创建报告

> ID：10486498
> 
> 赞同：0
> 
> 时间：2012-05-07T17:37:38.590
> 
> 标签：asp.net-mvc, linq

我需要一份显示每天唯一身份访问者数量的报告。这是查询：

```
SELECT User.Name
       ,Visit.VisitDate
       ,COUNT(Visit.Id) AS NumOfVists
FROM Visit JOIN User ON Visit.UserId = User.Id
GROUP BY User.Name, Visit.VisitDate 
```

我使用代码优先创建了 User(table) 模型和 Visit(table) 模型。我也有引用这两个模型（表）的 dbcontext 类。在我的控制器中，我需要将此查询的结果传递到视图中。

首先，我必须创建这个记录集的模型吗？如果是，我是否创建一个名为 say, REPORT 的模型，其中包含名为 Name、VisitDate 和 NumOfVisits 的 3 个成员？

如果是这样的话，这个查询的 LINQ 版本会是什么样子？以及如何将其传递给视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:46:11.770

如果不知道您的确切架构或您希望如何安排结果，很难说，但我认为 LINQ 版本将类似于：

```
from u in User
from v in u.Visit
group v by new { u.Name, v.VisitDate } into g
select new {g.Key.Name, g.Key.VisitDate, Count = g.Count()}; 
```

这将为您提供一个`IEnumerable<x>`结果，其中`x`是具有三个成员的匿名类型：字符串、DateTime 和 Int。您不需要为此创建 ViewModel，但如果您愿意，可以：

```
from u in User
from v in u.Visit
group v by new { u.Name, v.VisitDate } into g
select new MyViewModel
{
    Name = g.Key.Name, 
    VisitDate = g.Key.VisitDate, 
    Count = g.Count()
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:43:42.650

您可以将查询结果直接传递到视图中。你不需要为它创建任何额外的东西，但如果你愿意，可以。至于如何将其传递给视图使用

```
return View(your model); 
```

# wxpython - wxpython 定时器事件间隔

> ID：10486500
> 
> 赞同：4
> 
> 时间：2012-05-07T17:37:40.367
> 
> 标签：wxpython

我正在尝试用 wx python 编写一个 gui 应用程序，我需要控制计时器事件的间隔。这是我目前的代码：

```
self.timer = wx.Timer(self)
self.Bind(wx.EVT_TIMER, self.on_timer, self.timer)        
self.timer.Start(750) # start timer after a delay 
```

这是正确的框架，但我无法控制 EVT_TIMER 发生的间隔或频率。我一直试图弄清楚使用 wx TimerEvent 类，但没有任何运气。我觉得这应该是我需要的，但它不起作用：

```
self.timer = wx.Timer(self)
self.timerEvent = wx.TimerEvent(self.timer.GetId(),10)
self.Bind(wx.EVT_TIMER, self.on_timer, self.timer) 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T17:59:41.603

不久前我写了一个[关于计时器的教程](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)，可以帮助你解决这个问题。基本上你按照你在第一个代码片段中提到的那样做。您必须启动计时器并以毫秒为单位传递一个值。所以 1000 = 1 秒。wx.TimerEvent 不需要那个位。至少，我从来不需要那个。

无论如何，在您的示例中，计时器事件每 750 毫秒触发一次，或者不到一秒。我认为如果你机器的 CPU 被固定，它可以中断或延迟计时器事件，但除此之外它们非常可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T00:41:28.677

此外，如果要控制`EVT_TIMER`发生的频率，则必须设置第二个参数 boolean `oneShot`。默认情况下，它设置为`False`，但您可以指定类似`self.timer.Start(milliseconds = 750, oneShot = True)`的内容，并且计时器将继续拍摄，直到`self.timer.Stop()`出现该位。

祝一切顺利。

# matlab - 带有 sum() 函数的意外行为

> ID：10486502
> 
> 赞同：0
> 
> 时间：2012-05-07T17:38:03.763
> 
> 标签：matlab, octave

我正在尝试使用以下代码计算`47 x 3`归一化设计矩阵的列总和：`X`

```
sum(X) 
```

`X`内容如下：

```
X =

   1.0000e+00   1.3001e-01  -2.2368e-01
   1.0000e+00  -5.0419e-01  -2.2368e-01
   1.0000e+00   5.0248e-01  -2.2368e-01
   1.0000e+00  -7.3572e-01  -1.5378e+00
   1.0000e+00   1.2575e+00   1.0904e+00
   1.0000e+00  -1.9732e-02   1.0904e+00
   1.0000e+00  -5.8724e-01  -2.2368e-01
   1.0000e+00  -7.2188e-01  -2.2368e-01
   1.0000e+00  -7.8102e-01  -2.2368e-01
   1.0000e+00  -6.3757e-01  -2.2368e-01
   1.0000e+00  -7.6357e-02   1.0904e+00
   1.0000e+00  -8.5674e-04  -2.2368e-01
   1.0000e+00  -1.3927e-01  -2.2368e-01
   1.0000e+00   3.1173e+00   2.4045e+00
   1.0000e+00  -9.2196e-01  -2.2368e-01
   1.0000e+00   3.7664e-01   1.0904e+00
   1.0000e+00  -8.5652e-01  -1.5378e+00
   1.0000e+00  -9.6222e-01  -2.2368e-01
   1.0000e+00   7.6547e-01   1.0904e+00
   1.0000e+00   1.2965e+00   1.0904e+00
   1.0000e+00  -2.9405e-01  -2.2368e-01
   1.0000e+00  -1.4179e-01  -1.5378e+00
   1.0000e+00  -4.9916e-01  -2.2368e-01
   1.0000e+00  -4.8673e-02   1.0904e+00
   1.0000e+00   2.3774e+00  -2.2368e-01
   1.0000e+00  -1.1334e+00  -2.2368e-01
   1.0000e+00  -6.8287e-01  -2.2368e-01
   1.0000e+00   6.6103e-01  -2.2368e-01
   1.0000e+00   2.5081e-01  -2.2368e-01
   1.0000e+00   8.0070e-01  -2.2368e-01
   1.0000e+00  -2.0345e-01  -1.5378e+00
   1.0000e+00  -1.2592e+00  -2.8519e+00
   1.0000e+00   4.9477e-02   1.0904e+00
   1.0000e+00   1.4299e+00  -2.2368e-01
   1.0000e+00  -2.3868e-01   1.0904e+00
   1.0000e+00  -7.0930e-01  -2.2368e-01
   1.0000e+00  -9.5845e-01  -2.2368e-01
   1.0000e+00   1.6524e-01   1.0904e+00
   1.0000e+00   2.7864e+00   1.0904e+00
   1.0000e+00   2.0299e-01   1.0904e+00
   1.0000e+00  -4.2366e-01  -1.5378e+00
   1.0000e+00   2.9863e-01  -2.2368e-01
   1.0000e+00   7.1262e-01   1.0904e+00
   1.0000e+00  -1.0075e+00  -2.2368e-01
   1.0000e+00  -1.4454e+00  -1.5378e+00
   1.0000e+00  -1.8709e-01   1.0904e+00
   1.0000e+00  -1.0037e+00  -2.2368e-01 
```

和总和：

```
ans =

       4.7000e+01   1.0885e-15   1.2684e-14 
```

第 1 列的总和是正确的，但其他的则相差甚远。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:54:42.903

第 2 列和第 3 列看起来它们的总和大约为零。每个元素都是一个浮点值，有时在加减浮点数时会丢失一些精度。您看到的不是零，而是一个非常小的数字（10^-15！）。一个简单的解决方法是将低于某个阈值的所有数字设置为零：

```
mysum = sum(X);
mysum(mysum < 1e-12) = 0

ans = 

47.0000   0   0 
```

# ios - ios：为什么临时加载XIB，以获得帧高度，破坏内存？

> ID：10486504
> 
> 赞同：0
> 
> 时间：2012-05-07T17:38:10.170
> 
> 标签：ios, memory-management, memory-corruption, loadnibnamed

我正在尝试获取在他们自己的 XIB 中定义的几个 UITableCellView 的高度。我创建了一个在 UITableViewDelegate 的回调 heightForRowInPathIndex 中使用的高度列表。当我这样做时，应用程序就像内存损坏一样崩溃。

```
arrayOfTableCellView = [[NSBundle mainBundle] loadNibNamed:@"TableCellXyz" owner:self options:nil];

UITableViewCell *cellOfXyz = (UITableViewCell*) [arrayOfTableCellView objectAtIndex:0];

[arrayCellHeights insertObject:[NSNumber numberWithInt:cellOfAlerts.frame.size.height] atIndex:kIndexXyz];

[arrayOfTableCellView release]; 
```

我查看了retainCount，它符合预期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:48:02.843

答案很简单，来自文档：

> **返回值**
> 
> 包含 nib 文件中顶级对象的数组。该数组不包含对文件所有者或任何代理对象的引用；它仅包含在取消归档 nib 文件时实例化的那些对象。您应该手动保留返回的数组或其中包含的对象，以防止 nib 文件对象过早释放。

似乎您只是将返回值分配给`arrayOfTableCellView`. 如果您想保留返回值，并且`arrayOfTableCellView`实际上是 viewController 上的一个属性，那么您应该使用`self.arrayOfTableCellView`.

**如果您不保留它，则不必释放它，因为您不拥有它。**所以当你真正得到这样的数组时

```
NSArray *arrayOfTableCellView = [[NSBundle mainBundle] loadNibNamed:@"TableCellXyz" owner:self options:nil]; 
```

那么你不想拥有

```
[arrayOfTableCellView release]; 
```

在那里，因为你没有分配对象。

编辑：

只是为了向您说明这一点，我刚刚运行了您的代码，得到了预期的结果：

```
NSArray * arrayOfTableCellView = [[NSBundle mainBundle] loadNibNamed:@"JLUViewController" owner:self options:nil];

UITableViewCell *cellOfXyz = (UITableViewCell*) [arrayOfTableCellView objectAtIndex:0];

[arrayCellHeights insertObject:[NSNumber numberWithInt:cellOfAlerts.frame.size.height] atIndex:kIndexXyz]; 
```

上面的代码不会崩溃或导致泄漏。Instruments 不会报告泄漏，所以你会没事的。

如果你添加

```
[arrayOfTableCellView release]; 
```

虽然它会崩溃，报告 EXC_BAD_ACCESS，因为你试图释放一个你不拥有的对象。请注意我是如何使 NSArray 成为局部变量的？你应该做同样的事情，因为你不需要它是一个属性，因为你只是在函数的范围内使用它。另外请不要说如果`arrayCellHeights`是视图控制器中的属性，请始终使用`self.arrayCellHeights`它来访问它。

# java - 为什么迭代 List 比通过它索引更快？

> ID：10486507
> 
> 赞同：125
> 
> 时间：2012-05-07T17:38:16.557
> 
> 标签：java, list, iterator

阅读[ADT 列表的 Java 文档，](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)它说：

> List 接口提供了四种对列表元素进行位置（索引）访问的方法。列表（如 Java 数组）是从零开始的。请注意，对于某些实现（例如 LinkedList 类），这些操作的执行时间可能与索引值成正比。因此，如果调用者不知道实现，则迭代列表中的元素通常比通过它索引更可取。

这到底是什么意思？我不明白得出的结论。

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2012-05-07T17:44:35.490

在链表中，每个元素都有一个指向下一个元素的指针：

```
head -> item1 -> item2 -> item3 -> etc. 
```

要访问`item3`，你可以清楚地看到，你需要从头部穿过每个节点，直到你到达 item3，因为你不能直接跳转。

因此，如果我想打印每个元素的值，如果我这样写：

```
for(int i = 0; i < 4; i++) {
    System.out.println(list.get(i));
} 
```

发生的事情是这样的：

```
head -> print head
head -> item1 -> print item1
head -> item1 -> item2 -> print item2
head -> item1 -> item2 -> item3 print item3 
```

这是**非常低效**的，因为每次索引它都会从列表的开头重新开始并遍历每个项目。这意味着您的复杂性实际上`O(N^2)`只是遍历列表！

相反，如果我这样做：

```
for(String s: list) {
    System.out.println(s);
} 
```

那么会发生什么：

```
head -> print head -> item1 -> print item1 -> item2 -> print item2 etc. 
```

全部在一次遍历中，即`O(N)`.

现在，转到另一个实现，`List`它`ArrayList`由一个简单的数组支持。在那种情况下，上述两种遍历都是等价的，因为数组是连续的，所以它允许随机跳转到任意位置。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-07T17:41:16.113

答案隐含在这里：

> 请注意，对于某些实现（例如 LinkedList 类），这些操作的执行时间可能与索引值成正比

链表没有固有索引；调用`.get(x)`将要求列表实现找到第一个条目并调用`.next()`x-1 次（对于 O(n) 或线性时间访问），其中数组支持的列表只能`backingarray[x]`在 O(1) 或恒定时间内索引。

如果您查看[JavaDoc for`LinkedList`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)，您会看到注释

> 所有操作都按照双向链表的预期执行。索引到列表中的操作将从开头或结尾遍历列表，以更接近指定索引的为准。

而[JavaDoc for`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)有相应的

> List 接口的可调整大小的数组实现。实现所有可选列表操作，并允许所有元素，包括 null。除了实现 List 接口之外，该类还提供了一些方法来操作内部用于存储列表的数组的大小。（这个类大致相当于 Vector，只是它是不同步的。）
> 
> 、`size`、`isEmpty`、`get`、`set`和操作在恒定时间内运行`iterator`。`listIterator`添加操作在摊销常数时间内运行，即添加 n 个元素需要 O(n) 时间。所有其他操作都以线性时间运行（粗略地说）。与实现的常数因子相比，常数因子较低`LinkedList`。

[题为“Java Collections Framework 的 Big-O 摘要”](https://stackoverflow.com/questions/559839/big-o-summary-for-java-collections-framework-implementations)的相关问题有一个指向此资源[“Java Collections JDK6”](http://www.coderfriendly.com/wp-content/uploads/2009/05/java_collections_v2.pdf)的答案，您可能会发现它很有帮助。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-09T03:26:16.230

迭代具有查找偏移量的列表，例如`i`，类似于*Shlemiel thepainter's algorithm*。

> Shlemiel 找到了一份街头画家的工作，在路中间画出虚线。第一天，他把一罐油漆带到路上，完成了 300 码的路。“那还不错！” 他的老板说，“你是一个快速的工人！” 并付给他一个戈比。
> 
> 第二天，Shlemiel 只完成了 150 码。“嗯，那不如昨天好，但你仍然是一个快速的工人。150码是体面的，”并付给他一个戈比。
> 
> 第二天，Shlemiel 粉刷了 30 码的道路。“只有三十个！” 他的老板喊道。“这不可接受！第一天你做了十倍的工作！这是怎么回事？”
> 
> “我无能为力，”Shlemiel 说。“我每天都离油漆罐越来越远！”

[来源](http://www.joelonsoftware.com/articles/fog0000000319.html)。

这个小故事可能会让我们更容易理解内部发生的事情以及为什么它如此低效。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-08T18:54:50.533

虽然公认的答案肯定是正确的，但我可以指出一个小缺陷。引用都铎语：

> 现在，转到 List 的另一个实现，即 ArrayList，它由一个简单的数组支持。**在这种情况下，上述两种遍历都是等价的**，因为数组是连续的，所以它允许随机跳转到任意位置。

这并不完全正确。事实是，那

> 使用 ArrayList，手写的计数循环大约快 3 倍

[来源：Designing for Performance，Google 的 Android 文档](http://developer.android.com/guide/practices/design/performance.html#foreach)

请注意，手写循环是指索引迭代。我怀疑它是因为与增强的 for 循环一起使用的迭代器。它在由连续数组支持的结构中产生较小的惩罚性能。我也怀疑这可能适用于 Vector 类。

我的规则是，尽可能使用增强的 for 循环，如果您真的关心性能，请仅对 ArrayLists 或 Vectors 使用索引迭代。在大多数情况下，您甚至可以忽略这一点——编译器可能会在后台对此进行优化。

我只想指出，在Android开发的上下文中，ArrayLists的遍历**并不一定是等价**的。只是思考的食物。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-07T17:41:55.723

要找到实现的第 i 个元素，需要`LinkedList`遍历所有元素，直到第 i 个。

所以

```
for(int i = 0; i < list.length ; i++ ) {
    Object something = list.get(i); //Slow for LinkedList
} 
```

# jquery - jquery提示冻结

> ID：10486514
> 
> 赞同：0
> 
> 时间：2012-05-07T17:38:48.353
> 
> 标签：jquery, jquery-plugins

我正在使用 jquery inpromptu 4.0 版，但我遇到了一些旧版 jquery 没有的问题，当在某些情况下我必须提示两条消息时，第二个提示警报冻结，我可以' t 按确定既不关闭。

这是一个示例，如果您尝试一下，您就可以理解我在说什么：

```
 <html>
           <head>      
           <script type="text/javascript" src="jquery-inpromptu.4.0.min.js"language="javascript"></script>
    <script type="text/javascript" src="jquery.js" language="javascript"></script>
    <link href="example.css" rel="stylesheet" type="text/css" />
    <script>
  function test() {
      $.prompt("test1");
      $.prompt("test2");
  }
 </script>
 </head>
 <body>
<a href="##" onclick="test()">TEST</a>
</body>
</html> 
```

请注意，如果您使用旧版本，您将能够尽可能多地发出提示请我需要使用此 jquery，但要能够打开许多提示，不仅任何人都会知道这将是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:42:33.360

我认为`jquery-impromptu.4.0.min.js`是一个小车。

尝试使用**jquery-impromptu.3.1.js**，你可以在这里得到它：

[http://trentrichardson.com/Impromptu/scripts/jquery-impromptu.3.1.js](http://trentrichardson.com/Impromptu/scripts/jquery-impromptu.3.1.js)

我用那个版本测试了你的代码，效果很好。我还给你举了两个例子，看看这里：

**使用 3.1 版：**

[http://jsfiddle.net/oscarj24/8GWse/1/](http://jsfiddle.net/oscarj24/8GWse/1/)

**使用 4.0 版：**

你会遇到同样的问题，但我这样做只是为了看到不同之处。

[http://jsfiddle.net/oscarj24/4qH4n/](http://jsfiddle.net/oscarj24/4qH4n/)

希望这可以帮助 ：-）

# c++ - std::locale::final_cleanup 和 std::locale::__the_classic_locale 做了什么？

> ID：10486516
> 
> 赞同：0
> 
> 时间：2012-05-07T17:39:01.700
> 
> 标签：c++, std, mdbg

在我的应用程序中，当我运行作业时，它会完成并且不会在控制台上给出任何消息`core dump`。`segmentation fault`但是当我进入核心目录时，我可以看到`core dump file`它与所执行的工作相关。我试图用 mdb 调试它，我得到的是以下内容。

```
 ::stack
 0x538548(190c, c1cf0, bffd8, 1800, be6cc, c1b7c)
 __SUNW_fini_iostreams+0xc(fe1f15e0, 0, 0, ff, 0, 0)
 libCrun.so.1`__1cH__CimplKcplus_fini6F_v_+0x74(4ee1c, 0, fe1ed4c4, 1, bfa70, fe352a00)
 libCrun.so.1`_init+0x54(1, 1cc4, fcc35980, fcc37300, fe352a00, 1c00)
 libc.so.1`_exithandle+0x40(fcc37580, fcc35980, 1c00, 19f8b4, 19f8b4, 2137cf)
 libc.so.1`exit+4(32, ffbddc24, 19f848, bec00, 19f848, 0)
 _start+0x110(0, 0, 0, 0, 0, 0)
 > ::dem __1cH__CimplKcplus_fini6F_v_+0x74
 __1cH__CimplKcplus_fini6F_v_+0x74 == void __Cimpl::cplus_fini
> ::dem __SUNW_fini_iostreams+0xc
__SUNW_fini_iostreams+0xc == __SUNW_fini_iostreams+0xc 
```

当我尝试打印寄存器及其值时，我得到的是：-

> 美元？无进程 SIGILL：非法指令

```
%g5 = 0xfe744774 libcap_pdb.so.5`__1cRCAP_PDB_file_pathFcount_ %l5 = 0x00000fdc
%o1 = 0x00000001                 %i1 = 0x000c1cf0 
cna_adjust`__1cDstdIios_baseEInitJ__initcnt_
%o2 = 0x00038748                 %i2 = 0x000bffd8
%o3 = 0x00002c00                 %i3 = 0x00001800
%o4 = 0x000c1d58 jobtype`__1cDstdGlocaleU__the_classic_locale_ %i4 = 0x000be6cc
%o5 = 0x0000368c                 %i5 = 0x000c1b7c 
jobtype`__1cDstdQ__stderr_filebuf_+0x3c
%o6 = 0xffbdd978                 %i6 = 0xffbdd9d8
%o7 = 0x00055d50 __1cDstdGlocaleNfinal_cleanup6M_v_+0x64 %i7 = 0x0004ee28  
__SUNW_fini_iostreams+0xc

%psr = 0xfe001005 impl=0xf ver=0xe icc=nzvc
               ec=0 ef=4096 pil=0 s=0 ps=0 et=0 cwp=0x5
%y = 0x00000000
%pc = 0x00538548
%npc = 0x0053854c
%sp = 0xffbdd978
%fp = 0xffbdd9d8
%wim = 0x00000000
%tbr = 0x00000000
> ::dem __1cDstdGlocaleNfinal_cleanup6M_v_+0x64 %i7
__1cDstdGlocaleNfinal_cleanup6M_v_+0x64 == void std::locale::final_cleanup
%i7 == %i7
> ::dem __1cDstdGlocaleU__the_classic_locale_ %i4
__1cDstdGlocaleU__the_classic_locale_ == std::locale::__the_classic_locale
%i4 == %i4
> ::dem __1cFile_pathFcount_ %l5
__1cfile_pathFcount_ == file_path::count
%l5 == %l5 
```

我相信在我的应用程序上运行的作业已经成功完成，并且在清理我的应用程序退出时未在代码中释放的内存时出现错误。这是我根据我`std::locale::final_cleanup`从有限资源中读到的内容的假设。我知道任何人几乎不可能准确地指出这里发生了什么，但我想知道我的假设是否根据您的经验正确。此外，我们前段时间对编译器进行了更改，之后我们才面临这个问题。我最近看到了这个问题。也请让我知道的行为 `std::locale::final_cleanup`和`std::locale::__the_classic_locale`功能

# objective-c - 为什么我不能有一个短浮动？

> ID：10486517
> 
> 赞同：2
> 
> 时间：2012-05-07T17:39:11.330
> 
> 标签：objective-c

我在 Xcode (Objective-C) 中。

为什么我不能有一个`short float`？我得到错误`'short float' is invalid`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:45:33.253

您可以使用这样的位域实现一个短浮点数：

```
typedef struct shortFloat {
    char sign : 1;
    char exponent : 5;
    short significand : 10;
} shortFloat;

shortFloat shortFloat_add(shortFloat s1, shortFloat s2);
shortFloat shortFloat_sub(shortFloat s1, shortFloat s2);
shortFloat shortFloat_mul(shortFloat s1, shortFloat s2);
shortFloat shortFloat_div(shortFloat s1, shortFloat s2); 
```

但是你必须编写自己的浮点数学。

此外，在 ARM 目标（包括 iPhone）上，您可以获得半精度浮点值，请在此处阅读 GCC 文档：http: [//gcc.gnu.org/onlinedocs/gcc/Half_002dPrecision.html](http://gcc.gnu.org/onlinedocs/gcc/Half_002dPrecision.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T17:46:46.993

`short`和`long`是整数，等价的浮点数是`half`和`double`。`half`然而，在 Objective-C 中不可用（处理器没有任何处理半长浮点数的指令），但可以在一些 GPU 语言中找到，如 GLSL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:43:18.710

我从未见过 C 基础语言中的短浮点数。

`short int`存在，但`short float`像理查德指出的那样没有意义。

# objective-c - 将整数添加到 NSMutableArray

> ID：10486519
> 
> 赞同：15
> 
> 时间：2012-05-07T17:39:16.400
> 
> 标签：objective-c, arrays, object, nsnumber

我在任何地方都找不到这个，所以我只是要求确定一下。是的，我知道它的基本原理，但我想我宁愿在我犯错一百万次之前把它弄对：

如果我执行以下操作，它是否默认将“0”转换为 NSNumber（如果不是，它是什么对象类型），还是我必须执行第二个代码？

（或者对于我正在尝试做的事情，这两个都可能是错误的。如果是这样，请告诉我。它们都可以编译，所以我只是想知道哪个是“正确的”（或首选）以及为什么。）

代码 1：

```
NSMutableArray array = [[[NSMutableArray alloc] init]];
[array addObject: 0]; 
```

代码 2：

```
NSMutableArray array = [[NSMutableArray alloc] init];
[array addObject: [NSNumber numberWithInt: 0]]; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-07T17:40:43.737

`NSMutableArray` *不采用原始类型*。

> 第二个选项是正确的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-07T17:46:06.603

您不能将诸如 an 之类的原语`int`放入`NSArray`; 您必须构造一个`NSNumber`实例来保存它。

> 如果我执行以下操作，它是否默认将“0”转换为 NSNumber（如果不是，它是什么对象类型）

不进行铸造。不可能简单地将原语“转换”为对象，并且原语没有对象类型。对象必须通过发送消息来构造（除了：见下文），这发生在运行时；强制转换仅在编译期间有效。

这样做的唯一原因是您选择`0`添加到数组中。`nil`这与代表“无对象”的值相同。如果您选择了任何其他整数，那么当您运行代码时，您的手就会崩溃，因为该值将用作指向不包含有效对象的内存的指针。

不过有趣的是，从 Clang 3.1 或 Apple 的 LLVM 4.0* 开始，有[一些新的语法糖](http://clang.llvm.org/docs/ObjectiveCLiterals.html)可用于从代码中的文字创建对象。我们一直有文字`NSStrings`: `@"Lichtenstein"`。使用新的编译器，其他对象同样可以使用该`@`字符创建。

`NSNumber`在这种情况下，要从文字整数创建对象，您可以简单地编写：

```
[array addObject:@0]; 
```

* * *

* [（在公共 Xcode 中尚不可用）]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:18:35.923

正如前面的回复所述，您只能将对象（`id`类型）添加到容器类中，例如`NSArray`.

在这种情况下可能有用的一个类是`NSValue`，它用作 C 和 Objective-C 的非对象数据类型的容器。除了数值数据类型之外，它还可以包含结构和一些 Objective-C 原始数据类型，例如`NSRect`.

在此处查看更多详细信息： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsvalue_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsvalue_Class/Reference/Reference.html)

# c# - Outlook 2010 - 插入文本

> ID：10486521
> 
> 赞同：1
> 
> 时间：2012-05-07T17:39:24.750
> 
> 标签：c#, outlook-2010

在 Outlook 2010 中使用 C#。

如何从功能区按钮将文本添加到电子邮件正文的顶部？

这就是我的目标：用户单击新建电子邮件，然后单击自定义功能区按钮，该按钮将文本添加到正文字段的顶部

单击另一个按钮并删除相同的文本

有点像情绪邮票

有人可以指出我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:59:21.167

这是一个快速概述：

*   订阅功能区按钮的单击事件。
*   获取[`Application.ActiveInspector()`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._application.activeinspector.aspx)
*   得到它[`Inspector.CurrentItem`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._inspector.currentitem.aspx)
*   尝试将其投射到[`MailItem`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mailitem.aspx)
    *   如果转换失败，假设它是其他一些 Outlook 项目类型（例如联系人）并且您不应该对它做任何事情
*   阅读邮件项目的[`BodyFormat`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.bodyformat.aspx)
*   根据格式，您需要更改[`Body`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.body.aspx)、[`RTFBody`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.rtfbody.aspx)或[`HTMLBody`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.htmlbody.aspx)
    *   第一个代表纯文本正文，很简单；你只需在它前面加上你的文本：
        `mailItem.Body = "My text\r\n" + mailItem.Body;`
    *   另外两个将要求您处理格式化语法

# geolocation - 获取两个地理点之间的最高地形海拔

> ID：10486525
> 
> 赞同：0
> 
> 时间：2012-05-07T17:39:50.280
> 
> 标签：geolocation, elevation

有谁知道可用于获取两个地理点之间的最高地形海拔的在线服务/API？

我正在使用它来确定在一天中的特定时间从观察者的角度来看太阳是否被任何地形阻挡。

我可以很容易地确定观众的海拔，我可以使用谷歌海拔 API 之类的东西来沿着正确的方位走路径，使用距离间隔来创建海拔剖面，但从查询的角度来看，这似乎相当昂贵

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:57:55.693

我不知道有任何服务或API，但是......

您可以使用改进的搜索算法来减少确定最高海拔所需的查询数量。“爬山”算法（是的，这就是它的字面意思），将从沿路径的某个点开始，检查坡度或自身两侧的点以查看哪个方向是上坡，然后上坡寻找当地最大。可以进行进一步的优化，以改善您对起点的选择，并增加您找到绝对最大值而不仅仅是一座山顶的机会。

一些谷歌搜索“爬山”算法应该会找到一些有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T20:57:04.367

我知道这已经过时了，但是这个工具是存在的！我正在寻找完全相同的问题，并找到了这个问题，以及我的以下答案。

**[此海拔计算器](http://www.mapdevelopers.com/elevation_calculator.php)**允许您在 Google 地图上绘制一条直线路径（如果您愿意，可以使用多个点），并创建一个显示该路径海拔高度的图表。您可以在图表上看到沿您绘制的路径的最高点！

# java - 尝试在 glassfish 中动态加载类时出现 java.lang.ClassNotFoundException

> ID：10486530
> 
> 赞同：1
> 
> 时间：2012-05-07T17:40:01.880
> 
> 标签：java, jakarta-ee, reflection, glassfish, glassfish-3

我正在尝试动态加载 .jar 文件中包含的类。我知道整个类名，并且我确定该类实现了接口 AlgorithmClass。我的代码如下所示：

```
addURLToSystemClassLoader(dir.toURI().toURL());
Class cl = Class.forName(algorithm.getClassName());
AlgorithmClass algorithmClass = (AlgorithmClass)cl.newInstance(); 
```

其中*dir*是 .jar 文件的 File 对象，addURLToSystemClassLoader(URL) 如下所示：

```
private void addURLToSystemClassLoader(URL url) throws IntrospectionException {
        URLClassLoader systemClassLoader = (URLClassLoader) ClassLoader.getSystemClassLoader();
        Class<URLClassLoader> classLoaderClass = URLClassLoader.class; 
        try {
            Method method = classLoaderClass.getDeclaredMethod("addURL", new Class[]{URL.class});
            method.setAccessible(true);
            method.invoke(systemClassLoader, new Object[]{url});
        } catch (Throwable t) {
            t.printStackTrace();
            throw new IntrospectionException("Error when adding url to system ClassLoader ");
        }
    } 
```

我检查并正在将 URL 添加到类加载器中。

当我尝试获取 Class 对象时，出现错误：

**严重：javax.servlet.ServletException：java.lang.ClassNotFoundException：id3.Algorithm**

（id3.Algorithm 是我要加载的类的全名）

我尝试创建一个新的 ClassLoader，如下所示：

```
ClassLoader cload = new URLClassLoader(new URL[]{dir.toURI().toURL()}, ClassLoader.getSystemClassLoader());
Class cl = Class.forName(algorithm.getClassName(), false, cload);
AlgorithmClass algorithmClass = (AlgorithmClass)cl.newInstance(); 
```

但后来我得到了错误：

**java.lang.NoClassDefFoundError: lib/algorithm/AlgorithmClass**

我尝试使用系统类加载器具有的所有 URL 创建一个新的 URLClassLoader，但效果是一样的。

“最糟糕”的部分是这两种方法在我用来测试这部分代码的 jUnit 测试中都运行良好。

我使用 Glassfish 3.1.1 作为我的应用服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:20:02.240

dir 不应包含“lib”。试试这个：

```
 ClassLoader cload = new URLClassLoader(new URL[]{dir.toURI().toURL()}, Thread.currentThread().getContextClassLoader());
 Class cl = Class.forName(algorithm.getClassName(), true, cload);
 AlgorithmClass algorithmClass = (AlgorithmClass)cl.newInstance(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:15:45.473

你有类加载问题。你应该知道，你`addURLToSystemClassLoader()`实际上是见鬼......

将你的 jar 放到类路径中。使用`Class.forName()`成语。如果失败，则使用接收 ClassLoader 作为参数的版本

```
 public static Class<?> forName(String name, boolean initialize,
                               ClassLoader loader) 
```

和路径`Thread.currentThread().getContextClassLoader()`作为 ClassLoader 参数。

另请参阅下面我的另一个答案。

# regex - bash 正则表达式不匹配“至少 n 次但不超过 m”

> ID：10486535
> 
> 赞同：3
> 
> 时间：2012-05-07T17:40:06.277
> 
> 标签：regex, bash, shell

我正在尝试匹配字符串，例如：“+99”、“-82”、“5”、“auto”和“max”==auto 和 max 以及带或不带符号的数字（比如说整数）

我试过正则表达式

`var='^([+|-]{0,1}[0-9][0-9]*)|(auto)|(max)$'`

但它在“至少 n 次但不超过 m”的事情上失败了，在我的情况下 {0,1} 无论如何我测试了 var='ab{0,1}' 和 var='ab{2}' 而这些不也不行

我没有得到任何进一步的信息，但我认为下一个问题可能是这些：()

我正在使用 #!/bin/bash 版本 4.2.24(1)

提前致谢！

**edit1：** 我不知道如何将此正则表达式分组**？**按照 Karoly Horvath 的建议工作。我正在使用我在某处找到的这个检查功能。

```
#!/bin/bash

INTEGER_MAX='^([+-])?[0-9][0-9]*$'

function isNumeric() { 

    check=`echo $1 | sed "s/\($2\)//"`

    if [ -z ${check} ]; then
        return 0
    else
        return 1
    fi
}

isNumeric "$1" "$INTEGER_MAX" && echo "passed" 
```

**编辑2 - 已解决**

它正在使用

`RE='(^([+-])?[0-9]+$)|(^auto$)|(^max$)'`

测试

`[[ $string =~ $pattern ]] && echo "passed"`

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T17:52:17.787

选择`[+|-]`器接受一个字符，要么是`+` `|`要么`-`。您可能的意思是：`[+-]`.

`{0,1}`is`?`和`[0-9][0-9]*`is simple 的简写`[0-9]+`，但当然两者都应该工作。

> 无论如何，我测试了 var='ab{0,1}' 和 var='ab{2}' 并且这些都不起作用

`ab{0,1}`表示`a`or `ab`，量词作用于最后一个表达式，通常是一个字符或一个选择器，如果你想将量词应用于你必须对它进行分组的表达式。

如果您还有其他问题，请发布您如何使用正则表达式，因为我不确定您的问题是什么......

# c++ - Qt - 如何设置音频播放从缓冲区的开头开始？

> ID：10486540
> 
> 赞同：1
> 
> 时间：2012-05-07T17:40:29.063
> 
> 标签：c++, qt, audio

我有一个大小为 4096 的缓冲区，并将数据存储到其中，如果缓冲区已满，它将从缓冲区的开头开始。看起来这很好用。

但是我从缓冲区播放数据有问题。

```
QByteArray          m_buffer;
QBuffer             m_audioOutputIODevice;
QAudioOutput*       m_audioOutput;
m_audioOutputIODevice.close();
m_audioOutputIODevice.setBuffer(&m_buffer);
m_audioOutputIODevice.open(QIODevice::ReadOnly);
m_audioOutput->start(&m_audioOutputIODevice); 
```

现在我可以从缓冲区播放声音，但是当它到达缓冲区末尾时，播放停止。我怎么能改变代码，所以当它到达缓冲区的末尾时，它会从头开始？非常感谢你

更新代码：

```
connect(m_audioOutput,SIGNAL(stateChanged(QAudio::State)),SLOT(resetPlayBuffer(QAudio::State)));

    void bufferPlayback::resetPlayBuffer (QAudio::State state)
{
    if (state == QAudio::IdleState) {
        m_audioOutputIODevice.close();
        m_audioOutputIODevice.setBuffer(&m_buffer);
        m_audioOutputIODevice.open(QIODevice::ReadOnly);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:59:44.073

`void stateChanged ( QAudio::State state )`<~ 播放器更改时的信号。挂钩到您班级中的一个插槽，并在状态停止时重复播放过程。简单的。我喜欢 Qt 的原因之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:08:58.423

AFAICT QAudioOutput 没有对音频循环的任何内置支持，因此我认为您必须通过定期向 QAudioOutput 设备发送新的音频缓冲区来模拟音频循环，以便它永远不会用完音频字节来播放。

我认为最简单的方法是编写你自己的 QIODevice 子类，它伪装成一个非常长（无限？）的文件，但在查询时一遍又一遍地返回你的循环样本。然后将 QIODevice-subclass-obect 作为参数传递给 QAudioOutput::start()。

# javascript - 在 jQuery UI 中，如何防止连续调用时出现百万次运行的“脉动”效果？

> ID：10486542
> 
> 赞同：2
> 
> 时间：2012-05-07T17:40:38.063
> 
> 标签：javascript, jquery-ui, jquery-effects

我有以下代码（类似于此）：

```
$(Auditorium.CometService).on('bid.new', function(event, data){
    $('#feedback').text(data.msg).show('pulsate', {
        speed: 250
    });
}); 
```

问题是对于每个“bid.new”事件，#feedback 脉冲 X 次（默认为 5），有时在 2 秒内有 5 个投标，因此它将动画排队并脉冲 25 次。我需要忘记动画队列。如果在一秒钟内触发了许多 'bid.new' 事件，则应仅设置一次动画（仅脉动 5 次）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:47:22.720

使用[`stop`](http://api.jquery.com/stop/)方法。

```
$(Auditorium.CometService).on('bid.new', function(event, data){
    $('#feedback').text(data.msg).stop(true).show('pulsate', {
        speed: 250
    });
}); 
```

*更新：*将参数添加`true`到 stop() 方法，使其删除元素的排队动画（因此，按照问题的要求行事）。

# jquery - TinyMCE 自定义下拉设置文本

> ID：10486547
> 
> 赞同：0
> 
> 时间：2012-05-07T17:41:11.240
> 
> 标签：jquery, editor, tinymce

我在 TinyMCE 中添加了自定义选择下拉框，并希望在 tinymce 框中光标位置的该列表项上的 selectiong 上添加文本。

如何在该光标点上的 tinyMCE 中设置该文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:40:13.243

您需要在下拉选择中发出此代码

```
tinymce.activeEditor.execCommand('mceInsertContent', false, 'my_text'); 
```

# .htaccess - 当我在一个帐户下托管两个网站时，使用 htaccess 将用户重定向到移动网站？

> ID：10486548
> 
> 赞同：0
> 
> 时间：2012-05-07T17:41:12.330
> 
> 标签：.htaccess, redirect, mobile, sites

我有一个网站和一个移动网站（移动网站是文件位于子文件夹中的子域）。我使用了一个 htaccess 文件将移动用户重定向到移动站点，在那里他们也可以返回完整的站点。这很有效，直到我在子文件夹中添加了第二个网站，所以我只有一个托管帐户。因为我的 htaccess 文件位于主站点的根文件夹中，所以移动用户在到达第二个站点之前就被重定向到第一个站点的移动版本。有没有更好的方法来做到这一点，还是我只需要购买两个托管帐户？

我还没有第二个站点的移动版本，但将来想要一个。我使用 godaddy 来托管这些网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T21:32:31.363

我发现的解决方法是获取相同的 htaccess 文件并将其放在每个域根文件夹中，然后对其进行编辑以重定向到自身。这个对我有用。但我同意，我见过的所有 htaccess 重写都具有相同的效果......重定向到第一个移动站点。我希望有人能解决这个问题。

# mysql - 如何导入没有在 MyISAM 中指定的 ENGINE 的 mysqldump

> ID：10486560
> 
> 赞同：0
> 
> 时间：2012-05-07T17:41:49.850
> 
> 标签：mysql, myisam, mysqlimport

我所有的 sqldump 在 CREATE 语句中都没有“Engine=...”语法，所以也许我可以以某种方式将“ENGINE=MyISAM”添加到默认导入中？

因为在我的带有 mysql 5.5 的 ubuntu 12.04 服务器上导入一个大表非常慢，因为当我导入它时它使用的是标准的 InnoDB

或者我可以在 mysql 中设置一个设置标志，创建的新表默认为 MyIsam？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:50:10.830

要将默认引擎设置为 MyISAM，请使用以下配置选项`my.cnf`：

```
default-storage-engine=MyISAM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:51:30.993

根据[文档](http://dev.mysql.com/doc/refman/5.5/en/storage-engine-setting.html)，您可以：

1.  使用指定的默认存储引擎启动服务器：

    > 您可以使用 --default-storage-engine 服务器启动选项指定默认引擎，

2.  更改配置文件

    > 或者通过在 my.cnf 配置文件中设置 default-storage-engine 选项。

3.  逐个会话更改引擎

    > 您可以通过设置 default_storage_engine 变量来设置在当前会话期间使用的默认存储引擎

# wpf - 找不到转换器资源

> ID：10486564
> 
> 赞同：2
> 
> 时间：2012-05-07T17:42:03.383
> 
> 标签：wpf, staticresource, converters

我有一个包含 2 个项目的 WPF 解决方案，第一个（ResourcesLibrary）包含通用样式和通用资源。另一个是 WPF 应用程序。

**我在 ResourcesLibrary generic.xaml**文件中为 DataGridRows 创建了一个样式：

```
<Style x:Key="DGRowStyle" TargetType="{x:Type DataGridRow}">
    <Setter Property="ValidationErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <Image Source="/Resources/stop.png"
                       ToolTip = "{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGridRow}},
                       Path=(Validation.Errors),
                       Converter={StaticResource errorConverter]}}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter> 
```

我将 .cs 转换器文件添加到 ResourcesLibrary 项目：

```
namespace ResourceLibrary
{
    public class ErrorConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture) 
        { 
            var errors = value as ReadOnlyObservableCollection<ValidationError>; 
            if (errors == null) 
                return ""; 
            return errors.Count > 0 ? errors[0].ErrorContent : ""; 
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) 
        { 
            throw new NotImplementedException(); 
        }
    }
} 
```

并添加了引用和静态资源：

```
xmlns:my="clr-namespace:ResourceLibrary"

<!-- CONVERTERS -->
    <my:ErrorConverter x:Key="errorConverter" /> 
```

但是在运行时，在主项目中，我使用 ResourcesLibrary 中定义的 DataGridRow 样式时出现此错误：

**{"找不到名为 'errorConverter]' 的资源。资源名称区分大小写。"}**

我是否需要在我的解决方案中为我将使用的转换器添加另一个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:11:38.790

感谢@Clemens，我删除了表达式“={StaticResource errorConverter]}”中多余的字符']'，一切正常。

# ios - 定制的 UIPopoverController？

> ID：10486565
> 
> 赞同：5
> 
> 时间：2012-05-07T17:42:04.313
> 
> 标签：ios, ipad, ios5, customization, uipopovercontroller

如何创建一个`UIPopOverController`看起来像这样的：

![iPad UIPopoverController](../Images/2e4770943dd234208d0ff5afb64d512f.png)

它是一种习俗`UIView`，还是某种形式`UIPopOverController`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T17:58:47.423

在 iOS 5 中，现在可以继承[`UIPopoverBackgroundView`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPopoverBackgroundView_class/Reference/Reference.html#//apple_ref/occ/cl/UIPopoverBackgroundView)和覆盖`popoverBackgroundViewClass`你的`UIPopoverController`. 通过这种方式，您可以实现您在图片中看到的内容，而无需重新发明轮子来处理自定义视图并正确定位它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:46:19.020

据我所知，它只是一个自定义 UIView，带有一个背景图像、一个执行阴影的图层以及上面的一些子元素。实际上做起来并不难，所以去做吧。

# android - Android是否可以使用带有主题的菜单

> ID：10486568
> 
> 赞同：0
> 
> 时间：2012-05-07T17:42:10.653
> 
> 标签：android, menu, themes

在我的应用程序中，用户可以从 4 个不同的主题中进行选择。是时候为不同的主题创建不同的菜单图标了，但图标不会显示在菜单项中。有任何想法吗？

**菜单：**

```
<?xml version="1.0" encoding="utf-8"?>
<menu  xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/Menu1"
        android:orderInCategory="1"
        style="?menu_addtolist" /> 
```

**attrs.xml**

```
<attr name="menu_addtolist" format="reference" /> 
```

**主题.xml**

```
<item name="menu_addtolist">@style/menu_green_addtolist</item> 
```

**样式.xml**

```
<style name="menu_green_addtolist">
    <item name="android:src">@drawable/menu_addtolist_green</item>
</style> 
```

我所做的一切都是按照我对其他对象（按钮、布局、文本）所做的方式进行的。当我选择一个主题时，整个主题会发生变化，但没有菜单图标。

我将菜单项中的样式更改为我在应用程序中用作按钮样式的另一种样式，并且没有进行更改，而该样式确实有效。也许无法将样式应用于菜单项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:02:14.907

看起来答案是否定的。无法将主题与菜单一起使用。也许是因为菜单没有（可用的）布局

# eclipse-rcp - 具有自己交互的自定义 标记视图

> ID：10486570
> 
> 赞同：2
> 
> 时间：2012-05-07T17:42:12.143
> 
> 标签：eclipse-rcp, marker

我正在尝试创建自己的问题视图。
我找到了以下[教程](http://www.eclipse-tips.com/how-to-guides/14-creating-a-custom-marker-view)，一切正常。

但是有没有可能添加自己的*DoubleClickListener*或类似的东西？
我想对列表上执行的用户操作做出反应。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:12:28.003

这是我要做的：

通过覆盖`public void createPartControl(final Composite parent)`，您将拥有父复合材料。通过调用 parent.getChildren()，您可以遍历可用的控件。`ExtendedMarkersView`“默认”控件是 MarkersTreeViewer，它是一个 treeViewer，因此该控件将是一棵树。你有树，你可以添加任何你想要的监听器，这里是片段：

```
@Override
public void createPartControl(final Composite parent) {
    super.createPartControl(parent);

    for (final Control control : parent.getChildren()) {
        if (!(control instanceof Tree)) {
            continue;
        }

        tree = (Tree) control;

        final Listener[] listeners = tree.getListeners(SWT.DefaultSelection);
        if (listeners != null) {
            for (final Listener listener : listeners) {
                tree.removeListener(SWT.DefaultSelection, listener);
            }
        }
        tree.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseDoubleClick(final MouseEvent e) {
                if (e.widget instanceof Tree) {
                    final Tree tree = (Tree) e.widget;

                    // do whatever you want
                }
            }

        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:47:10.603

我找到了一个解决方案，不是最好的，而是一种可以接受的方式。
我在*ViewPart中使用**SelectionService*并注册一个新的*SelectionListener*。

 **我的解决方案只接受问题视图中的选择，也许有更好的方法来区分事件。

```
site.getWorkbenchWindow().getSelectionService().addSelectionListener(new ISelectionListener() {
    @Override
    public void selectionChanged(IWorkbenchPart part, ISelection selection) {
        IStructuredSelection s = (IStructuredSelection) selection;

        if (s.getFirstElement() instanceof MarkerItem) {
            MarkerItem marker = (MarkerItem) s.getFirstElement();
            if (marker != null && marker.getMarker() != null) {
                IMarker iMarker = marker.getMarker();

                // More Code here ...
            }
        }
    }
}); 
```**

# ipad - 如何在没有 iPad 地图应用劫持的情况下打开 Safari 窗口进入谷歌地图

> ID：10486572
> 
> 赞同：0
> 
> 时间：2012-05-07T17:42:15.693
> 
> 标签：ipad, google-maps

我的雇主让我写一个可以从 iPad 上的 Safari 访问的网页。此页面包含一个文本字段，您可以在其中键入字符串并单击提交。此表单将打开一个到 maps.Google.com 的窗口，并假设为您搜索 Google 地图。没有什么花哨。

我遇到的问题是 iPad 的地图应用劫持了这些请求。有没有办法阻止这种情况发生？iPad 是否需要安装 Google Maps 应用程序？

# regex - Bash：如何从字符串中获取数字？（可能是正则表达式）

> ID：10486575
> 
> 赞同：9
> 
> 时间：2012-05-07T17:42:42.173
> 
> 标签：regex, bash, grep

我想计算文件中的符号数。

```
wc -c f1.txt | grep [0-9] 
```

但是此代码返回 grep 找到数字的行。我只想重新运行**38**。如何？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T17:45:14.710

您可以使用 awk：

```
wc -c f1.txt | awk '{print $1}' 
```

或使用`grep -o`：

```
wc -c f1.txt | grep -o "[0-9]\+" 
```

或使用 bash 正则表达式功能：

```
re="^ *([0-9]+)" && [[ "$(wc -c f1.txt)" =~ $re ]] && echo "${BASH_REMATCH[1]}" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T17:56:03.197

将数据传递到`wc`标准输入而不是文件：`nchars=$(wc -c < f1.txt)`

# assembly - 对设置段寄存器感到困惑

> ID：10486577
> 
> 赞同：3
> 
> 时间：2012-05-07T17:42:51.887
> 
> 标签：assembly, x86, boot, bootloader, bios

我正在编写一个引导加载程序，我正在关注的教程提供了以下代码：

```
main:

 ;----------------------------------------------------
 ; code located at 0000:7C00, adjust segment registers
 ;----------------------------------------------------

      cli                       ; disable interrupts
      mov     ax, 0x07C0                ; setup registers to point to our segment
      mov     ds, ax
      mov     es, ax
      mov     fs, ax
      mov     gs, ax

 ;----------------------------------------------------
 ; create stack
 ;----------------------------------------------------

      mov     ax, 0x0000                ; set the stack
      mov     ss, ax
      mov     sp, 0xFFFF
      sti                       ; restore interrupts 
```

我可能误解了一些东西，但是如果 SS 寄存器包含 0x0000 是否意味着 ds、es、fs 和 gs 会与堆栈重叠？fs 和 gs 寄存器的功能是什么？另外，cs段是由BIOS自动设置的吗？因为它说代码位于 0000:7c00。此外，本教程从不讨论为什么禁用中断。我在某处读到通常禁用中断以避免死锁。这是什么意思，为什么会发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T18:22:02.873

至少在理论上，是的，堆栈和代码可以重叠。他们不这样做的原因很简单：引导加载程序非常小，通常不会使用太多堆栈空间，因此堆栈永远不会向下增长到足以覆盖引导加载程序代码的末尾。

就 fs 和 gs 而言，它们实际上并没有任何专门的用途。如果不查看相关引导加载程序的代码，则可以质疑它们是否被使用。如果它们被使用，那么它们的用途还有更多*疑问*。

磁盘 BIOS 将磁盘中的一个扇区加载到 07c00:0000h 中，并进行远跳转。远跳台`cs`。

您在设置堆栈时禁用中断，因为执行中断（尝试）将数据推入堆栈。如果您还没有设置堆栈（SS 和 SP），您通常甚至不知道数据（标志和返回地址）可能会在内存中的什么位置结束，或者它可能会覆盖哪些其他数据。这通常是不可取的，因此您至少在设置 SS 和 SP 之前禁用中断。

# flash - 移动和 Web 应用程序的共享代码库？

> ID：10486578
> 
> 赞同：5
> 
> 时间：2012-05-07T17:42:58.627
> 
> 标签：flash, mobile, adobe, shared-libraries, code-sharing

我一直在开发移动应用程序一段时间。它可以在 iOS 和 Android 上运行，也可以作为 AIR 应用程序在桌面上运行。这很棒，我对此感到非常兴奋。然而，上周有人问我为什么不能导出在网络浏览器中运行的应用程序版本。我说我认为我可以并且我会调查它。

*但是为什么要在桌面上运行移动代码呢？*

有几个原因：

*   **更多的代码重用**。这并非在所有情况下都有意义，但在许多情况下确实如此。（我不会详细说明，因为我认为这是不言而喻的。如果你不同意，我很乐意谈论它，但我不想用它来阻塞这个描述。）
*   **更快/更简单的客户端演示**。无需在移动设备上安装 apk 或 ipa，我只需发送一个 URL。

那么我发现了什么？好吧，从我到目前为止所尝试的......它......不起作用。或者更确切地说，我无法让它发挥作用。

我首先为所有共享代码创建了一个 Flex 库项目。然后我创建了 2 个引用它的应用程序项目——一个用于移动设备，一个用于 Web。移动项目工作正常，但网络项目不能。到目前为止，这是我尝试使其工作的方法：

*   我尝试[将 mobilecomponents.swc 和 mobile.swc 主题添加到我的 Web 项目](http://www.riagora.com/2011/08/flex-mobile-in-the-browser/)中，以便 Flash Builder 了解 MobileSkin（和其他仅限移动设备的类）。这使我的应用程序能够编译，但是当我启动它时，它会立即在 UIComponent: 内引发运行时错误`VerifyError: Error #1014: Class flash.text::StageText could not be found`。我[对这个错误几乎](https://www.google.com/search?ix=ieb&sourceid=chrome&ie=UTF-8&q=VerifyError:%20Error%20#1014:%20Class%20flash.text::StageText%20could%20not%20be%20found.)没有发现，而且我发现的一个提示（添加`--swf-version=13`编译器选项）不起作用。
*   我尝试使用条件编译来控制我的皮肤组件继承自哪个类：MobileSkin 或 SparkSkin。这只是一个快速实验，看看它是否有效。我知道这很恶心，而不是生产解决方案。不过我的想法是，如果 MobileSkin 真的只是 SparkSkin 的优化版本，我的皮肤应该可以继承其中任何一个。这并没有立即奏效——应用程序无法编译 b'c 某些方法丢失（例如 layoutContents），所以我放弃了它，因为一开始感觉很脏。
*   我尝试用 UIComponent 替换 MobileSkin 作为我所有皮肤的超类，我认为 MobileSkin 可能只是 UIComponent 的轻量级子类。这种方法一开始会导致一些编译器错误（例如，没有 layoutContents 方法、没有measuredDefaultWidth/measuredDefaultHeight 属性、addChild 与 addElement 等）。一旦这些问题得到解决，应用程序就会编译，但会在 UIComponent 的“getState”方法中出现运行时错误。（看起来 MobileSkin 重写了这个方法来防止 UIComponent 的默认行为。）

所以到目前为止，这些方法都没有对我有用……但是你们呢？你遇到过这个问题吗？您是否能够使其发挥作用，或者您能发现我在上面提到的方法中所犯的任何明显的疏忽吗？如果可以的话，请提前致谢。

* * *

## 更新：问题已解决

我已经能够在上面提到的第一条路线上取得进展：将 mobilecomponents.swc 和 mobile.swc 主题添加到我的 web 项目中

事实证明，Flash Builder 在这方面误导了我。使用“合并到代码”设置将移动 SWC 添加到您的库项目会导致编译器警告：swc '/Applications/Adobe Flash Builder

> 4.6/sdks/4.6.0/frameworks/themes/Mobile/mobile.swc' 具有默认样式并且位于库路径中，这意味着将在没有样式的情况下链接依赖项。这可能会导致使用输出 swc 的应用程序缺少皮肤。swc 应该放在外部库路径中。

第一次看到这个，我将链接类型更改为“外部”，警告消失了。然后在我的 Web 项目中，我还添加了移动 SWC，并将链接类型设置为“合并到代码中”。Flash Builder 似乎对这种方法很满意，但是在运行我的应用程序时，我遇到了奇怪的运行时错误（如上所述）。

事实证明，我的第一次尝试是正确的方法。将库项目上的链接类型设置为“合并到代码中”，然后不要从您的 Web 项目重新链接。Flash Builder 会警告您，但忽略该警告。现在大部分情况下事情似乎运作良好！我有一两个问题要研究（例如，列表组件不滚动），但总体上看起来很有希望！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:51:39.470

为带有移动皮肤的网页版找到了一个简洁的解决方案

**对于所有 TextInput 使用`skinClass="spark.skins.mobile.TextInputSkin"`** 这避免了 StageText

截至目前，FlashPlayer 中缺少 StageText 仅存在于 AIR 中

# c# - ConcurrentDictionary Pitfall - GetOrAdd 和 AddOrUpdate 的委托工厂是否同步？

> ID：10486579
> 
> 赞同：35
> 
> 时间：2012-05-07T17:43:05.420
> 
> 标签：c#, .net, multithreading, concurrency, thread-safety

的文档`ConcurrentDictionary`没有明确说明，所以我想我们不能指望委托*`valueFactory`*和*`updateValueFactory`*他们的执行同步（*分别来自 GetOrAdd() 和 AddOrUpdate() 操作*）。

`[MethodImpl(MethodImplOptions.Synchronized)]`因此，我认为如果不手动实现我们自己的并发控制（可能只是使用委托），我们就无法实现它们内部需要并发控制的资源的使用。

我对吗？还是线程安全的事实，`ConcurrentDictionary`我们可以期望对这些委托的调用会自动同步（也是线程安全的）？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-07T17:48:32.033

是的，你是对的，用户代表不同步`ConcurrentDictionary`。如果你需要那些同步的，那是你的责任。

MSDN 本身说：

> 此外，虽然 ConcurrentDictionary 的所有方法都是线程安全的，但并非所有方法都是原子的，特别是 GetOrAdd 和 AddOrUpdate。传递给这些方法的用户委托是在字典的内部锁之外调用的。（这样做是为了防止未知代码阻塞所有线程。）

[请参阅“如何：从 ConcurrentDictionary 添加和删除项目](http://msdn.microsoft.com/en-us/library/dd997369.aspx)

这是因为`ConcurrentDictionary`不知道您提供的委托将做什么或它的性能，所以如果它试图锁定它们，它可能会对性能产生负面影响并破坏 ConcurrentDictionary 的价值。

因此，如果有必要，用户有责任同步他们的委托。上面的 MSDN 链接实际上有一个很好的例子来说明它做和不做的保证。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-07T19:34:14.360

这些委托不仅不同步，甚至不能保证只发生一次。事实上，它们可以在每次调用`AddOrUpdate`.

例如，算法`AddOrUpdate`看起来像这样。

```
TValue value;
do
{
  if (!TryGetValue(...))
  {
    value = addValueFactory(key);
    if (!TryAddInternal(...))
    {
      continue;
    }
    return value;
  }
  value = updateValueFactory(key);
} 
while (!TryUpdate(...))
return value; 
```

这里注意两点。

*   没有努力同步代表的执行。
*   代表可能会被执行多次，因为它们是在循环*内调用的。*

所以你需要确保你做两件事。

*   为代表提供您自己的同步。
*   确保您的代理没有任何取决于执行次数的副作用。

# javascript - 如何标记链接，用javascript处理为已访问？

> ID：10486580
> 
> 赞同：1
> 
> 时间：2012-05-07T17:43:07.970
> 
> 标签：javascript, ajax, url, hyperlink, visited

我有这样的导航：

```
<div id="melement1" class="mlink" data-slink="kultur">
    <a href="#kultur">Kultur|Bildung</a>
</div> 
```

这很好用，通过这个链接，我打开了另一个子导航：

```
case "kultur": 
    document.getElementById('navi_kultur').style.visibility = 'visible';
    break; 
```

子导航如下所示：

```
<div id="kultur1" class="link" data-subsite="kultur/hoehenrausch">
    <a href="#kultur?hoehenrausch">Linz 09 - Höhenrausch, Linz</a>
</div> 
```

我通过 Ajax 处理它：

```
$('.link').click(function(){
    var subsite = $(this).data('subsite');
    $('#showProject').load('php/subsite.php?page='+subsite); 
```

所以我的问题是：

如何将子导航链接的状态设置为活动/已访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:45:25.940

只需添加`visited`类：

```
<style type="text/css">
    a { color: red; }
    a.visited { color: blue; }
</style>
<script type="text/javascript">
    $(".link a").click(function(){
        $(this).addClass("visited");
    });
</script> 
```

请参阅[此 jsFiddle](http://jsfiddle.net/9xzRZ/)进行演示。

# php - 产品 Feed 上的 Xml 类别

> ID：10486581
> 
> 赞同：2
> 
> 时间：2012-05-07T17:43:17.400
> 
> 标签：php, xml, xsd, amazon-web-services, amazon-mws

我想使用 mws 产品提要将产品发布到亚马逊的“SportsMemorabilia”类别。

我查看了文档，很难理解，我还下载了 xsd 以查看 xml 结构，但它仍然有效。

因为这个 xml 被发送（它只是类别部分，我还发送了产品 xml 的所有其他元素..）

```
<ProductData> 
<SportsMemorabilia> 
<ProductType>SportsMemorabilia</ProductType> 
</SportsMemorabilia> 
</ProductData> 
```

它给了我这个错误

```
<Result> 
<MessageID>0</MessageID> 
<ResultCode>Error</ResultCode> 
<ResultMessageCode>5000</ResultMessageCode> 
<ResultDescription>XML Parsing Error at Line 104, Column 26: cvc-complex-type.2.4.b: The content of element 'SportsMemorabilia' is not complete. One of '{AuthenticatedBy}' is expected.</ResultDescription> 
</Result> 
```

请写信给我xml应该是什么样子才能工作，

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:05:28.917

根据当前版本，这是应该通过已发布 XSD的**最小XML。**这并不意味着它会起作用，因为服务中内置的功能可能会进行额外的验证。

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<SportsMemorabilia>
    <ProductType>SportsMemorabilia</ProductType>
    <AuthenticatedBy>AuthenticatedBy1</AuthenticatedBy>
    <ConditionProvidedBy>ConditionProvidedBy1</ConditionProvidedBy>
    <ConditionRating>ConditionRating1</ConditionRating>
</SportsMemorabilia> 
```

要访问服务，您需要设置帐户；至少，您还必须填写其他两个元素。

我强烈建议您仔细阅读[此处发布的文档](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/XML_Documentation_Intl._V149158196_.pdf)...至少上面的最小值应该可以让您克服 XSD 验证错误。

# vmware - VMware ESXi：自动重启虚拟机

> ID：10486584
> 
> 赞同：0
> 
> 时间：2012-05-07T17:43:22.830
> 
> 标签：vmware, virtual-machine, esxi

在这里，我有一台装有 VMware ESXi 5 的机器。我的一个虚拟机在一段时间后关闭（我无法阻止这种情况）。但是，我希望 VM 在关闭时自动重新启动。但我在 vSphere 客户端中找不到执行此操作的选项。

那么有没有办法自动重启呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:22:04.540

ESXi 5 具有自动启动和停止 VM 的选项

转到 ESX 主机配置，左侧可以看到“虚拟机启动/关闭”

转到属性并选择“允许虚拟机随系统自动启动和停止”

在启动顺序中将您的VM机器移动到“自动启动部分”

# properties - 在 Hive 中设置属性变量

> ID：10486586
> 
> 赞同：0
> 
> 时间：2012-05-07T17:43:34.187
> 
> 标签：properties, hive

我在 oozie 中将 Hive 作为一个动作运行。有没有办法可以在 Hive 中使用属性变量？如果是，我该如何设置它们？例如：当我创建一个外部表时，我想将位置设置为一个属性。

```
CREATE EXTERNAL TABLE IF NOT EXISTS test(
id bigint, 
name string  
)
row format DELIMITED FIELDS TERMINATED BY "^"
location "/user/test/data"; 
```

那么是否可以将位置设置为

```
location ${input} 
```

我在我的属性文件中设置**$(input)的位置。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:10:57.223

您可以使用 设置一个`set input=/user/test/data`并使用 检索它`${hiveconf:input}`。可以在此处[使用变量找到对此的更详细描述](http://hive.apache.org/docs/r0.8.1/language_manual/var_substitution.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:33:46.517

按照上述问题的约定，您可以通过`${hiveconf:input}`在配置单元命令中使用来访问该属性。

为了定义一个名为*input*的属性，您必须修改 hive-site.xml 并添加一个片段，例如

```
<property>
  <name>input</name>
  <value>input_value</value>
</property> 
```

但是，如果*输入*是环境变量（例如，来自 bash），您可以使用`${env:input}`. 例如，`${env:HOME}`或`${env:PATH}`

# java - 在 Camel TestSupport 中更改 log4j 设置

> ID：10486587
> 
> 赞同：0
> 
> 时间：2012-05-07T17:43:34.377
> 
> 标签：java, junit, log4j, apache-camel

我正在调试一些使用 Camel TestSupport 接口的 jUnit 测试。这使我可以访问 log4j 日志，但我似乎无法弄清楚如何获得重新配置的版本。我希望能够更改日志级别，因为我的很多日志都是以跟踪级别编写的，而不仅仅是信息或调试。

重新配置此日志的控制台输出的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:35:10.947

您需要在使用测试的类路径中包含 log4j.xml 或 log4j.properties。

如果您使用的是 maven，这很简单，只需将其放入`src/test/resources`.

# c++ - Boost 程序选项添加选项语法

> ID：10486588
> 
> 赞同：25
> 
> 时间：2012-05-07T17:43:35.280
> 
> 标签：c++, boost, boost-program-options

我正在编写一个使用 Boost 程序选项库的程序，我注意到以下语法自从我看到它以来一直困扰着我：

```
desc.add_options()
        ("help","produce help message")
        ( /* other flag, value, description pairs here */)
; 
```

我看到在标题中， operator() 被覆盖，但我不确定这如何使它在语法上是正确的。

其次，与多次调用 add_options() 相比，这种语法有什么优势（除了炫耀你可以像这样操作语法之外）？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-07T17:57:07.347

`add_options`成员函数返回一个类型为 的对象`options_description_easy_init`。后者已`operator()`重载以返回对自身的引用。这使您可以像在代码段中显示的那样链接调用。

链接调用和`add_options`多次调用之间的区别在于，在前一种情况下，`options_description_easy_init`会创建一个单独的实例，并且每次调用`operator()`它时，它都会将选项添加到所有者 ( `options_description`)。如果您要`add_options`多次调用，则每次调用都会创建一个新的`options_description_easy_init`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-07T19:09:47.440

优势问题是主观的，但在这种情况下它很简洁。

与我的一个家庭项目进行比较：

```
("help,h", "Generate this help message")
("output-file,o", po::value<std::string>(), "Output filename. Required.")
("tangent,t", "Generate/load tangent-space basis.")
("collada-output,c", "Write a Collada file, rather than our mesh XML format.")
("arrays,a", "Write arrays instead of indexed verts. Cannot combine with Collada writing.")
("flip-tangent,f", "Change the tangent-space basis matrix's handedness. Negates bitangent.")
("map", po::value<std::string>(), "Map filename. Defaults to the ColladaConv directory's 'stdmap.txt' file.")
("vao", po::value<std::vector<std::string> >(), "Sequence of mappings, of the form:\n"
        "Name # # # #\n"
        "\n"
        "Each # is an attribute index to use for this VAO.\n"
        "Each VAO name must be unique; you cannot use the same VAO in the same place.") 
```

对此：

```
visible.add_options()("help,h", "Generate this help message")
visible.add_options()("output-file,o", po::value<std::string>(), "Output filename. Required.")
visible.add_options()("tangent,t", "Generate/load tangent-space basis.");
visible.add_options()("collada-output,c", "Write a Collada file, rather than our mesh XML format.");
visible.add_options()("arrays,a", "Write arrays instead of indexed verts. Cannot combine with Collada writing.");
visible.add_options()("flip-tangent,f", "Change the tangent-space basis matrix's handedness. Negates bitangent.");
visible.add_options()("map", po::value<std::string>(), "Map filename. Defaults to the ColladaConv directory's 'stdmap.txt' file.");
visible.add_options()("vao", po::value<std::vector<std::string> >(), "Sequence of mappings, of the form:\n"
        "Name # # # #\n"
        "\n"
        "Each # is an attribute index to use for this VAO.\n"
        "Each VAO name must be unique; you cannot use the same VAO in the same place."); 
```

行长很重要。并且不必`visible.add_options()`在所有内容之前都可以使其更易于阅读。

# css - 以特定尺寸打印 DIV

> ID：10486590
> 
> 赞同：0
> 
> 时间：2012-05-07T17:43:49.983
> 
> 标签：css, printing

我需要打印一些`<div>`特定尺寸的标签。在我的打印样式表中，我将宽度和高度指定为英寸。但是，打印结果稍大（两个维度上大约大 5-7 毫米）。

有什么办法可以得到一个非常具体的打印尺寸？

# mysql - 将 LINQ 与可以在生产中更改的 MySQL 数据库一起使用

> ID：10486592
> 
> 赞同：0
> 
> 时间：2012-05-07T17:43:56.103
> 
> 标签：mysql, database, linq

我正在为使用 MySQL 并且必须支持动态视图的 MVC3 应用程序编写数据库代码。

开发完成后，应用程序必须显示正确添加到数据库的新列。由于这种动态要求，我认为我不能使用实体框架。

我有一些使用常规字符串查询的东西，但我想知道是否有办法设置我的项目，以便我可以使用 LINQ（或 EF ...）来加速开发并简化调试。我还想创建这样的动态查询[，](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)因为我认为使用它们比进行大量字符串操作更干净。

有没有办法我可以做到这一点？似乎我可以为此使用 DbLinq，但我还没有找到足够的文档来证明它足够稳定，可以在生产中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:53:42.373

我想你正在某种数据网格中显示结果。如果是这种情况，您可以将 DataSet 或 DataTable 分配给网格作为数据源，类似这样（这里是 SQL Server 而不是 MySql）：

```
var table = new DataTable();
SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM MyView", connSring);
da.Fill(table);
grid.DataSource = table; 
```

我意识到，这与 LINQ 无关，但是由于您无法预先生成模式，因此在这里使用 LINQ 毫无意义。

# jquery - Colorbox onClosed 作用于父页面的函数

> ID：10486593
> 
> 赞同：0
> 
> 时间：2012-05-07T17:43:57.980
> 
> 标签：jquery, function, colorbox

我有一个使用颜色框在 iframe 中打开的页面。此页面有一个复选框。当颜色框关闭时，我想检查是否单击了该复选框，如果是，则运行一个函数。

这是我所拥有的：

```
$(".colorbox").colorbox({
        rel:'group1',
        iframe: true,
        width:100+"%",
        height:100+"%",
        onClosed:function(){ 
            var chosenMap = $("input:checkbox#modern");
            if (chosenMap.checked) {
                alert("checked");
                }else{
            alert("not checked");
                }
        }
        }); 
```

并且颜色框中的html是：

```
<form>
<label for="modern" class="check activeCheck"><input type="checkbox"  name="Style" id="modern" >Custom</label>
<input class="next button" type="button"  value="Back" onclick="parent.$.colorbox.close(); return false;" >
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:38:13.560

沿着这条路线走下去，事情会变得复杂，因为 1）在 iframe 被删除（并且数据被破坏）之后触发 onClosed 和 2）onClosed 没有在正确的 DOM 中被触发以能够找到 input#modern。input#modern 存在于 iframed 文档中，您必须以不同的方式进行查询。相反，你不能在调用 parent.$.colorbox.close() 之前做你需要做的事情吗？例子：

```
<script>
function chosen() {
            var chosenMap = $("input:checkbox#modern");
            if (chosenMap.checked) {
                alert("checked");
                }else{
            alert("not checked");
                }
            parent.$.colorbox.close();
 }
</script>
<input class="next button" type="button"  value="Back" onclick="chosen(); return false;" > 
```

# ios - 本地化取决于 iOS 市场

> ID：10486598
> 
> 赞同：0
> 
> 时间：2012-05-07T17:44:25.183
> 
> 标签：ios, localization, app-store

是否有机会根据在应用购买期间选择的市场获得固定的本地化列表。假设如果用户从德国市场下载它，只能使用德语本地化，如果是其他市场而不是英语本地化将使用。我需要在不检查 GPS 位置的情况下进行管理。可以使用 Localizable.strings 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:03:53.507

除非您发布两个单独的应用程序，否则这是不可能的。

此外，不建议这样做，因为德国的 iPhone 用户中有相当一部分是外国人，他们不一定会说流利的德语。如果您的应用程序的可用本地化与 App Store 所说的不符，他们会生气。

# xml - XML 模式选择和属性

> ID：10486600
> 
> 赞同：0
> 
> 时间：2012-05-07T17:44:34.583
> 
> 标签：xml, layout, xsd, choice

大家我有一个小问题我想要一个属性来充当member_id。

这是因为如果我将它作为另一个标签，我不能让它完全独一无二，我只能让它对所有 full_member 类型和 basic_member 类型都是唯一的。

所以我想我可以用一个属性和一个键来解决这个问题。

但我的问题是我不能拥有相邻的属性和选择，或者我只是不知道如何正确地做。

到目前为止，以下是我的架构。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">

    <xs:complexType name="memberinfo">
      <xs:sequence>
        <xs:element ref="member_id"/>
        <xs:element ref="first_name"/>
        <xs:element ref="last_name"/>
        <xs:element ref="address"/>
        <xs:element ref="contact_numbers"/>
        <xs:element ref="date_joined"/>
      </xs:sequence>
    </xs:complexType>

  <xs:element name="member_id" type="xs:integer"/>
  <xs:element name="first_name" type="xs:NCName"/>
  <xs:element name="last_name" type="xs:NCName"/>
  <xs:element name="address">
    <xs:complexType>
      <xs:sequence>
        <xs:choice>
        <xs:element ref="house_number"/>
        <xs:element ref="house_name"/>
        </xs:choice>
        <xs:element ref="street"/>
        <xs:element ref="town"/>
        <xs:element ref="city"/>
        <xs:element ref="county"/>
        <xs:element ref="postcode"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="house_number" type="xs:integer"/>
  <xs:element name="house_name" type="xs:string"/>
  <xs:element name="street" type="xs:string"/>
  <xs:element name="town" type="xs:NCName"/>
  <xs:element name="city" type="xs:NCName"/>
  <xs:element name="county" type="xs:NCName"/>
  <xs:element name="postcode" type="xs:NCName"/>
  <xs:element name="contact_numbers">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="3" ref="contact_number"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="contact_number" type="xs:integer"/>
  <xs:element name="date_joined" type="xs:date"/>

 <xs:complexType name="basic_member">
   <xs:complexContent>
     <xs:extension base="memberinfo">
       <xs:sequence>
         <xs:element name="activities">
           <xs:complexType>
             <xs:sequence>
               <xs:element name="activity_name" maxOccurs="3"/>
             </xs:sequence>
           </xs:complexType>
         </xs:element>
       </xs:sequence>
     </xs:extension>
   </xs:complexContent>
 </xs:complexType>

  <xs:complexType name="full_member">
    <xs:complexContent>
      <xs:extension base="memberinfo">
        <xs:sequence>
          <xs:element name="activities">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="activity_name" maxOccurs="unbounded"/>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:element name="members" >
    <xs:complexType>
      <xs:sequence>
  <xs:element name="member" maxOccurs="unbounded">
    <xs:complexType>
      <xs:attribute name="member_id"/>
    </xs:complexType>
  </xs:element>
      </xs:sequence>
    </xs:complexType>
    <xs:key name="PK_member">
      <xs:selector xpath=".//member" />
      <xs:field xpath="member_id" />
    </xs:key>
  </xs:element>

</xs:schema> 
```

输入示例

```
<member>
    <full_member>
        <member_id>1</member_id>
        <first_name>Simon</first_name>
        <last_name>Hughes</last_name>
        <address>
            <house_number>12</house_number>
            <street>Ashgrove Road</street>
            <town>Forest Town</town>
            <city>Mansfield</city>
            <county>Nottinghamshire</county>
            <postcode>NG385DX</postcode>
        </address>
        <contact_numbers>
            <contact_number>01623948594</contact_number>
            <contact_number>01623349596</contact_number>
            <contact_number>01623486599</contact_number>
        </contact_numbers>
        <date_joined>2012-05-21</date_joined>
        <activities>
            <activity_name>Treadmill</activity_name>
            <activity_name>Squash</activity_name>
            <activity_name>Table Tennis</activity_name>
            <activity_name>Weights</activity_name>
        </activities>
    </full_member>
    </member>

    <member>
    <full_member>
        <member_id>2</member_id>
        <first_name>Scott</first_name>
        <last_name>Calladine</last_name>
        <address>
            <house_name>Don House</house_name>
            <street>Simons Road</street>
            <town>Broadton</town>
            <city>Supper</city>
            <county>Nottinghamshire</county>
            <postcode>N496DX</postcode>
        </address>
        <contact_numbers>
            <contact_number>01623395865</contact_number>
            <contact_number>01623496959</contact_number>
            <contact_number>01623005604</contact_number>
        </contact_numbers>
        <date_joined>2007-08-16</date_joined>
        <activities>
            <activity_name>Static Cycle</activity_name>
            <activity_name>Badminton</activity_name>
            <activity_name>Table Tennis</activity_name>
        </activities>
    </full_member>
    </member>

<member>
    <full_member>
        <member_id>3</member_id>
        <first_name>Fransis</first_name>
        <last_name>Smith</last_name>
        <address>
            <house_name>Don House</house_name>
            <street>Lemington Close</street>
            <town>Bradford</town>
            <city>Bradfordcity>
            <county>West Yorkshire</county>
            <postcode>BD723DX</postcode>
        </address>
        <contact_numbers>
            <contact_number>01623497035</contact_number>
            <contact_number>01623389468</contact_number>
            <contact_number>01623439949</contact_number>
        </contact_numbers>
        <date_joined>2007-08-16</date_joined>
        <activities>
            <activity_name>Static Cycle</activity_name>
            <activity_name>Badminton</activity_name>
            <activity_name>Table Tennis</activity_name>
        </activities>
    </full_member>
    </member>

<member>
    <full_member>
        <member_id>4</member_id>
        <first_name>Hayley</first_name>
        <last_name>Cummingham</last_name>
        <address>
            <house_number>87</house_number>
            <street>Boreast Road</street>
            <town>Braranger</town>
            <city>Mansfield</city>
            <county>Nottinghamshire</county>
            <postcode>N454HX</postcode>
        </address>
        <contact_numbers>
            <contact_number>01623306031</contact_number>
            <contact_number>01623206940</contact_number>
            <contact_number>01623059680</contact_number>
        </contact_numbers>
        <date_joined>2012-05-21</date_joined>
        <activities>
            <activity_name>Treadmill</activity_name>
            <activity_name>Squash</activity_name>
            <activity_name>Table Tennis</activity_name>
            <activity_name>Weights</activity_name>
        </activities>
    </full_member>
    </member> 
```

但使用我当前的模式，id 会变为 1 ,1 ,2 ,2

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:35:36.950

我认为这会做到：

```
<xs:key name="PK_member"> 
  <xs:selector xpath=".//basic_member|.//full_member" /> 
  <xs:field xpath="member_id" /> 
</xs:key> 
```

但是您的架构中似乎有问题 - 或者至少，它与您的示例 XML 不匹配。在架构`members`中包含一个`member`只有一个属性的元素，并且有两个独立且不相关`full_member`的`basic_member`元素，而在您的 XML 文件中`basic_member`并`full_member`显示在`member`.

# jquery - codeigniter ajaxfileupload.js 脚本错误-您没有选择要上传的文件

> ID：10486607
> 
> 赞同：0
> 
> 时间：2012-05-07T17:45:17.200
> 
> 标签：jquery, codeigniter, image-uploading

这是我在 codeigniter 代码中使用 ajaxfileupload 和 Jquery 上传图像的代码。但是 codeigniter 代码在日志文件中给出错误。它的上传。但是当我在没有 jquery 和 ajaxfileupload 脚本的情况下测试相同的代码时。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="//localhost/AjaxFileUploader/ajaxfileupload.js"></script>    
<script type="text/javascript">        
    $(document).ready(function () {
        $("#form").change(function () {
            $("#upload").html('<img src="loader.gif"/>');
            $.ajaxFileUpload({
                url: 'http://localhost/ci/index.php/upload/do_upload',
                secureuri: false,
                fileElementId: 'userfile',
                dataType: 'json',
                success: function (data, status) {
                    if (typeof (data.error) != 'undefined') {
                        if (data.error != '') {
                            alert(data.error);
                        } else {
                            alert(data.msg);
                        }
                    }
                },
                error: function (data, status, e) {
                    alert(e);
                }
            });
        });
    });
</script></head>
<body>
    <form action="http://localhost/ci/index.php/upload/do_upload" method="post" accept-charset="utf-8" enctype="multipart/form-data">
        <input type="file" name="userfile" size="20" id="form" />
        <br /><br />
        <input type="submit" value="upload" id="submit" />
        <span id="upload"></span>
    </form></body>
</html> 
```

我的codeigniter代码是

```
function do_upload()
    {
        $config['upload_path'] = 'c:\upload';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';
         $config['encrypt_name'] = TRUE;

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

            $this->load->view('upload_form', $error);
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());

            $this->load->view('upload_success', $data);
        }
    } 
```

但是codeigniter没有上传文件。它在日志文件中出现错误，例如“您没有选择要上传的文件”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:04:50.237

我认为你需要改变这一行：

```
if (!$this->upload->do_upload('userfile'))
{
 ... 
```

# java - 异步http客户端（宁）创建更多线程？

> ID：10486613
> 
> 赞同：6
> 
> 时间：2012-05-07T17:45:36.223
> 
> 标签：java, http, asynchronous, ning

我正在使用[ning](http://sonatype.github.com/async-http-client/) async http 客户端来实现非阻塞特性。进行苹果与苹果测试（非阻塞与阻塞），我看到非阻塞版本正在提供更多请求样本，但是与阻塞对应的异步 http 客户端相比，它创建了更多线程。这是预期的还是我缺少的东西？

这是压力测试的数字

```
Async Http Client
jMeter - 2 threads, 120 seconds, 1 sec ramp up
Peak threads : 270
Heap usage: 600mb
Peak cpu usage: 30%
Total samples: 18228

Blocking version
jMeter - 2 threads, 120 seconds, 1 sec ramp up
Peak threads: 118
heap usage: 260mb
cpu usage: 18%
total samples: 1472 
```

我正在创建一个连接线程池（重用它们）

```
AsyncHttpClientConfig.Builder builder = new AsyncHttpClientConfig.Builder();
builder.setRequestTimeoutInMs(2000);
builder.setMaximumConnectionsPerHost(10);
builder.setMaximumConnectionsTotal(100);
client = new AsyncHttpClient(builder.build()); 
```

我在这里缺少什么吗？我尝试查看线程转储以查看创建线程的内容，但没有发现任何有用的东西。我敢打赌，每个生成的 http 连接都有一个线程，以在异步 http 客户端中的 I/O 完成时触发回调。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T17:57:02.707

**编辑 2015 年 11 月 16 日**

看起来回购移动了。请参阅[此行](https://github.com/AsyncHttpClient/async-http-client/blob/master/client/src/main/java/org/asynchttpclient/DefaultAsyncHttpClientConfig.java#L926)，您可以在其中更改使用的 ThreadFactory。如果未设置，它看起来像使用默认值。这是 ChannelManager[在这里](https://github.com/AsyncHttpClient/async-http-client/blob/master/client/src/main/java/org/asynchttpclient/netty/channel/ChannelManager.java#L176)使用的。

您也可以在简单客户端上设置它，如此[处所示](https://github.com/AsyncHttpClient/async-http-client/blob/master/extras/simple/src/main/java/org/asynchttpclient/extras/simple/SimpleAsyncHttpClient.java#L554)

**删除了死链接的原始文件**

快速浏览一下代码——看起来应用程序线程池使用了一个 Executor 服务，它是一个缓存线程池，它根据需要创建线程。您可以使用构建器上的设置器来设置客户端使用的执行器服务。

# vb.net - VB.Net DateTimePicker 编辑日历部分

> ID：10486616
> 
> 赞同：2
> 
> 时间：2012-05-07T17:45:49.507
> 
> 标签：vb.net, winforms, datetimepicker

我正在尝试使用日期时间选择器从用户那里获取月份和年份（没有日期）。我正确设置了控件的文本框部分，但我想知道是否有办法编辑日历控件，以便它只允许选择月份和年份，或者我是否可以一起删除该日历控件？我已经搜索了一段时间，但没有找到任何解决我的问题的方法，我发现的所有内容都是指控件的文本框部分。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:55:50.653

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.customformat.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.customformat.aspx)

CustomFormat 属性看起来您应该能够在控件中处理它。

# java - 使用来自 Freemarker 的参数调用 Java 方法

> ID：10486619
> 
> 赞同：5
> 
> 时间：2012-05-07T17:45:54.217
> 
> 标签：java, freemarker

以下 FTL 标记对我来说很好，并在我的服务器端 JiveActionSupport 对象中调用 getWidgets()：

```
<#list widgets! as widget>
  -- do something with widget.sku
</#list> 
```

但是，我真的需要一个依赖于小部件属性的内部列表，如下所示：

```
<#list widgets! as widget>
  <#list manufacturers(widget.sku)! as manufacturer>
  -- do something with manufacturer
  </#list>
</#list> 
```

我试图实现服务器端代码，例如：

```
public List<Manufacturer> getManufacturers(int sku);
public List<Manufacturer> getManufacturers(String sku); 
```

但两者都导致'表达式制造商在第 123 行未定义'。

如何将参数传递给当前 JiveActionSupport 对象的方法？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T15:33:17.820

在这里可能让您感到困惑的是，`getFoo()`可以称为 as `foo`，但`getFoo(param)`不能称为 as `foo(param)`，只能称为 as `getFoo(param)`。但这正是 JavaBeans 的工作方式；`getFoo()`定义了一个 JavaBean 属性，而`getFoo(params)`没有。

无论如何，如果`getManufacturers`是数据模型（根）对象的方法，那么（假设正确的对象包装）您应该能够将其称为`getManufacturers(param)`. 原则上你不需要开始`action.`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T15:01:53.757

通常，您似乎需要按如下方式执行此操作：

```
<#list action.getManufacturers("123")! as manufacturer>
  -- do something with manufacturer
</#list> 
```

特别是，虽然您可以使用FTL 中的*事物*来调用服务器端方法*getThings()*，但您需要使用*action.getThing("123")*来调用服务器端方法*getThing(String)*。

# sql-server - 从 VB.NET WinForms 保存到数据库

> ID：10486626
> 
> 赞同：-1
> 
> 时间：2012-05-07T17:46:20.667
> 
> 标签：sql-server, vb.net, winforms, .net-4.0

如何在 Visual Studio 2005 中将窗口形式的数据添加到 sql 数据库中？

我在保存时遇到问题。

```
Public Class Staff    
    Dim myconnection As SqlConnection
    Dim mycommand As SqlCommand
    Dim dr As SqlDataReader
    Dim dr1 As SqlDataReader
    Dim ra As Integer
    Private Sub cmdsave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdsave.Click
        myconnection = New SqlConnection("server=localhost;uid=sa;pwd=;database=medisam")
        myconnection.Open()
        mycommand = New SqlCommand("insert into staff([FirstName],[LastName],[Address],[DOB], [TelephoneNum], [DateJoinIn], [HighestQualifi], [AppointedAs], [Salary]) VALUES ('" & txtfname.Text & "','" & txtlname.Text & "','" & txtaddress.Text & "','" & txtdob.Text & "','" & txttelephone.Text & "','" & txthqualifi.Text & "','" & ComboBox1.SelectedValue & "','" & txtsalary.Text & "')", myconnection)
        mycommand.ExecuteNonQuery()
        myconnection.Close()

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:23:17.260

好吧，乍一看，我可以在您的查询文本中看到一个缺失值：
我可以计算 9 个字段并且只有 8 个值......但这可能只是一个打字错误。

更严重的是缺少参数使用。正如@slaks 在其评论中指出的那样，这种代码会导致[Sql Injection Attacks](http://en.wikipedia.org/wiki/SQL_injection)。此外，您将所有值作为字符串传递。我怀疑您的`[staff]`表格是否只包含文本字段（DOB、DateJoinIn、ApointedAs）。如果是这样，您的架构设计就被严重破坏了。这些参数还可以帮助避免这种错误。最后，与 sa 帐户连接将导致您的 dba 追捕您并将您击败到离您生命只有一步之遥的地方。

请以这种方式重写您的方法：

```
Private Sub cmdsave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdsave.Click 
    Using (myconnection as SqlConnection = New SqlConnection("server=localhost;uid=sa;pwd=;database=medisam"))
        myconnection.Open() 
        mycommand = New SqlCommand("insert into staff([FirstName],[LastName],[Address],[DOB], " & _
                                   "[TelephoneNum], [DateJoinIn], [HighestQualifi], [AppointedAs], [Salary]) " & _
                                   "VALUES (@first, @last, @address, @dob, @tel, @dateJ, @highQ, @appointed, @sal)", myconnection)

        mycommand.Parameters.AddWithValue("@first", txtfname.Text)
        mycommand.Parameters.AddWithValue("@last", txtlname.Text) 
        mycommand.Parameters.AddWithValue("@address", txtaddress.Text)
        mycommand.Parameters.AddWithValue("@dob",txtdob.Text) ' if this is a date, need to convert
        mycommand.Parameters.AddWithValue("@tel",txttelephone.Text)
        mycommand.Parameters.AddWithValue("@dateJ", txt??? Missing ????)
        mycommand.Parameters.AddWithValue("@highQ",txthqualifi.Text)
        mycommand.Parameters.AddWithValue("@appointed",ComboBox1.SelectedValue) ' need to convert ??? 
        mycommand.Parameters.AddWithValue("@sal",txtsalary.Text) ' need to convert ???
        mycommand.ExecuteNonQuery() 
    End Using

End Sub 
```

# google-app-engine - 如何在 Objectify 中对响应进行排序？

> ID：10486635
> 
> 赞同：13
> 
> 时间：2012-05-07T17:46:57.493
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

我目前正在使用 Objectify 3.1 构建一个用于部署到 GAE 的应用程序。尝试使用 order() 子句进行查询时，我得到了奇怪的结果。

我的域名：

```
 public class InvoiceLineItem
{
    private int units;

    private BigDecimal unitCost;
    private BigDecimal extendedCost;

    private String description;

    @Parent Key<Invoice> invoice;
} 
```

我正在尝试使用以下方法收集与给定 Invoice 关联的所有 InvoiceLineItems：

```
ofy ().query (InvoiceLineItem.class).ancestor (invoiceKey).list ( ); 
```

在我的测试用例中，这工作得很好，按预期返回 2 行。

但是，当我尝试向上述查询添加排序顺序时，如下所示：

```
ofy ().query (InvoiceLineItem.class).ancestor (invoiceKey).order ("+description").list (); 
```

我总是得到 0 个结果。我已经尝试更改订单方向，其排序依据的字段，查询中 order () 子句的位置，都没有效果。谁能看到我在这里做错了什么？

谢谢...

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-07T18:48:28.730

这里有几个潜在的问题：

*   描述字段必须被索引
*   The description field must be less than 500 chars, because over 500 chars gets converted to a `Text` which is not indexable
*   Get rid of the +. It's either .order("description") or .order("-description").

# iphone - 在 iOS SDK 中，我如何帮助我的用户从我的应用程序中发送混合了 SMS 的 MMS？

> ID：10486638
> 
> 赞同：0
> 
> 时间：2012-05-07T17:47:06.967
> 
> 标签：iphone, ios, sms, mms

我正在开发的应用程序依赖于帮助用户一次性将图像和文本混合发送给他们的朋友的能力。

我希望 MFMessageComposeViewController 能够提供某种方式来为用户提供消息正文中的图像，但显然我只能建议正文使用 NSString。

或者，我可以将文本渲染到图像中，然后也将其发送，但我仍然没有找到建议用户通过彩信发送图像的方法。

有没有办法做这两件事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T07:52:16.730

我在发送彩信时遇到了同样的麻烦。
我以这种方式解决了它：

```
[UIPasteboard generalPasteboard].image = yourImage;
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"sms:"]]; 
```

所以首先我将所需的图像复制到剪贴板，然后打开标准
`MFMessageComposeViewController`并从剪贴板粘贴此图像。
当然，您的手机上应该有适合 MMS 的设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T09:06:21.627

我想，你应该使用下面的代码。因为默认图像类型是 jpeg，因为当您尝试粘贴时，iMessage 中不会显示 png 图像。

```
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
NSData *data = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"aa1" ofType:@"png"]];
[pasteboard setData:data forPasteboardType:@"public.png"]; 
```

// 或者如果图像是 jpeg 那么下面的代码

```
[pasteboard setData:data forPasteboardType:@"public.jpeg"];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"sms:45263125"]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-19T20:33:46.303

我们无法通过 iOS 原生 SDK 发送彩信。

但是我们可以通过 iMessage 向联系人发送图片

该方法经过测试和验证。我在我的代码中使用了它。

> if (![MFMessageComposeViewController canSendText]) {
> 
> ```
>  UIAlertView *alertV = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Your device not support SMS \nOr you 
> ```
> 
> 没有登录你的 iMessage”委托：nil cancelButtonTitle:@“Ok” otherButtonTitles:nil, nil]; [alertV show]; return; }
> 
> ```
> MFMessageComposeViewController *mVC = [[MFMessageComposeViewController alloc] init];
> mVC.body = @"jjjj";
> mVC.recipients = @[@"00XXXXXXXXXX"];
> mVC.messageComposeDelegate = self;
> if ([MFMessageComposeViewController canSendAttachments]) {
>     NSLog(@"ok");
> }
> [mVC addAttachmentData: UIImageJPEGRepresentation([UIImage imageNamed:@"test.jpg"], 1.0) typeIdentifier:@"public.data" 
> ```
> 
> 文件名：@"image.jpeg"];

```
[self presentViewController:mVC animated:YES completion:nil]; 
```

您可以使用任何 jpeg jpg 和 png 格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T22:33:24.577

不可以，您不能使用 iOS SDK 发送彩信。

但是，您可以使用 . 通过电子邮件发送文本和图像[`MFMailComposeViewController`](https://developer.apple.com/documentation/messageui/mfmailcomposeviewcontroller)。

# ruby-on-rails - 如何更改标记在gmaps4rails中聚集的缩放比例

> ID：10486651
> 
> 赞同：2
> 
> 时间：2012-05-07T17:47:59.060
> 
> 标签：ruby-on-rails, google-maps, gmaps4rails, markerclusterer

我有这个测试应用程序，我在其中使用**gmaps4rails**很棒的 gem。我正在尝试对我的标记进行聚类，为此我这样做：

```
<%= gmaps("markers" => {"data" => @markers,"options" => {"custom_infowindow_class" => "yellow", "do_clustering" => true}}) %> 
```

我曾尝试使用该`clusterer_maxZoom`选项，但这无助于实现我想要的。

现在，您必须缩小很多才能使集群图像出现，我想知道如何在缩小特定 X 之前使该集群图片出现。您如何修改它？

你可以在这里看到我的意思：[Clusterer example](http://gentle-cloud-4082.herokuapp.com/maps)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T08:07:46.750

您可以尝试在 Javascript 中设置 的`maxZoom`和`gridSize`属性。`clusterer`

例如：

```
var handler = Gmaps.build('Google', { markers: { clusterer: { maxZoom: 16, gridSize: 40 }}}); 
```

# java - 天数有什么问题？

> ID：10486653
> 
> 赞同：-1
> 
> 时间：2012-05-07T17:48:23.980
> 
> 标签：java

```
import javax.swing.*;
import javax.swing.text.DateFormatter;
import java.awt.*;
import java.awt.event.*;
import java.text.SimpleDateFormat;
import java.util.GregorianCalendar;

 public class Calendar extends JFrame implements ActionListener {
private JButton Next, Previous;
private JLabel CurrDate,Time;
private JLabel Days[];
private JButton [] dayButtons;
private JPanel P1,P2,P3,P4,P5;
private int year , month , day ,ch;
String S1;
GregorianCalendar GC=new GregorianCalendar();;
int DayOfWeek=GC.get(GC.DAY_OF_WEEK);

Color c = new Color(169,97,182);
Color c2 = new Color(241,233,241);
String[] months =  {"January", "February", "March", "April", "May", "June", "July",    "August", "September", "October", "November", "December"};
Calendar()
{        
    super( "Calendar" );

    year = GC.get(GC.YEAR);
    month = GC.get(GC.MONTH);
    day = GC.get(GC.DATE);

    Previous = new JButton ("<<");
    Previous.setBackground(Color.LIGHT_GRAY);
    Previous.addActionListener(this);
    Next = new JButton (">>");
    Next.setBackground(Color.LIGHT_GRAY);
    Next.addActionListener(this);

    CurrDate = new JLabel ("                   "+ months[month]+"        "+year+"               ");
    CurrDate.setForeground(Color.WHITE);
    CurrDate.setFont(new Font ("Serif",Font.ITALIC+Font.BOLD,15));
    CurrDate.setAlignmentX(CENTER_ALIGNMENT);
    Days = new JLabel[7];
    Days[0] = new JLabel ("Sun         ");
    Days[1] = new JLabel ("Mon         ");
    Days[2] = new JLabel ("Tue         ");
    Days[3] = new JLabel ("Wed         ");
    Days[4] = new JLabel ("Thu         ");
    Days[5] = new JLabel ("Fri            ");
    Days[6] = new JLabel ("Sat         ");
    for(JLabel l : Days)
    {
        l. setForeground(Color.WHITE);
        l.setAlignmentX(LEFT_ALIGNMENT);
    }
    Time = new JLabel ();
    Time.setText(GC.get(GC.HOUR)+":"+GC.get(GC.MINUTE)+":"+GC.get(GC.SECOND));
    Time.setForeground(Color.WHITE);
    if( month ==0 || month ==2 || month == 4 || month ==6 || month==7 || month ==9 || month ==11)
    {
        ch = 1;
    }
    else
    {
        ch = 2;
    }

    P1 = new JPanel();
    P2 = new JPanel();
    P3 = new JPanel();
    P4 = new JPanel();
    P5 = new JPanel();
    P5.setLayout(new BorderLayout());
    P1.add(Previous); 
    P1.add(CurrDate);   
    DrawCalendar(DayOfWeek,year,month);
    P1.add(Next);
    P2.add(Days[0]);
    P2.add(Days[1]);
    P2.add(Days[2]);
    P2.add(Days[3]);
    P2.add(Days[4]);
    P2.add(Days[5]);
    P2.add(Days[6]);

    P4.add(Time);
    P1.setBackground(c);
    P2.setBackground(c);
    P4.setBackground(c);

    P5.add (P1, BorderLayout.NORTH);
    P5.add (P2, BorderLayout.CENTER);
    add (P5,BorderLayout.NORTH);
    add (P3, BorderLayout.CENTER);
    add (P4, BorderLayout.SOUTH);
    }

private void DrawCalendar(int DayOfWeek, int year, int month) {
    P3.setLayout( new GridLayout(7,7,3,3));
    dayButtons = new JButton [49];

    if(DayOfWeek == 1 && ch ==1)
    {
        for ( int i = 0; i < 31; i++ )
         { dayButtons[ i ] = new JButton(  i+1 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 31; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 2 && ch ==1)
    {
        for ( int i = 0; i < 1; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i = 1; i < 32; i++ )
         { dayButtons[ i ] = new JButton(  i +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 32; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 3 && ch ==1)
    {
        for ( int i = 0; i < 2; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =2; i < 33; i++ )
         { dayButtons[ i ] = new JButton(  i-1 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 33; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 4 && ch ==1)
    {
        for ( int i = 0; i < 3; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =3; i < 34; i++ )
         { dayButtons[ i ] = new JButton(  i-2 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 34; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 5 && ch ==1)
    {
        for ( int i = 0; i < 4; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =4; i < 35; i++ )
         { dayButtons[ i ] = new JButton(  i-3 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 35; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 6 && ch ==1)
    {
        for ( int i = 0; i < 5; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =5; i < 36; i++ )
         { dayButtons[ i ] = new JButton(  i-4 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 36; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 7 && ch ==1)
    {
        for ( int i = 0; i < 6; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =6; i < 37; i++ )
         { dayButtons[ i ] = new JButton(  i-5 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 37; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 1 && ch ==2)
    {
        for ( int i = 0; i < 30; i++ )
         { dayButtons[ i ] = new JButton( i+1+"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 30; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 

    }
    if(DayOfWeek == 2 && ch ==2)
    {
        for ( int i = 0; i < 1; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =1; i < 31; i++ )
         { dayButtons[ i ] = new JButton(  i +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 31; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 3 && ch ==2)
    {
        for ( int i = 0; i < 2; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =2; i < 32; i++ )
         { dayButtons[ i ] = new JButton(  i-1 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 32; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 4 && ch ==2)
    {
        for ( int i = 0; i < 3; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =3; i < 33; i++ )
         { dayButtons[ i ] = new JButton(  i-2 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 33; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 5 && ch ==2)
    {
        for ( int i = 0; i < 4; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =4; i < 35; i++ )
         { dayButtons[ i ] = new JButton(  i-3 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 35; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 6 && ch ==2)
    {
        for ( int i = 0; i < 5; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =5; i < 36; i++ )
         { dayButtons[ i ] = new JButton(  i-4 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 36; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    if(DayOfWeek == 7 && ch ==2)
    {
        for ( int i = 0; i < 6; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
        for ( int i =6; i < 37; i++ )
         { dayButtons[ i ] = new JButton(  i-5 +"" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(c2);
         } 
        for ( int i = 37; i < 49; i++ )
         { dayButtons[ i ] = new JButton( "" ); 
         P3.add( dayButtons[ i ] );
         dayButtons[i].addActionListener(this);
         dayButtons[i].setBackground(Color.LIGHT_GRAY);
         } 
    }
    for( int i = DayOfWeek-1; i<49 ; i++)
    {
        if( i- DayOfWeek+2 == GC.get(GC.DATE))
        {
            dayButtons[i].setBackground(c);
        }
    }

}

public void actionPerformed(ActionEvent arg0) {

    if(arg0.getSource()== Previous)
    {   clear();

        if(month !=0)
        {
            month --;

            if( month ==0 || month ==2 || month == 4 || month ==6 || month==7 || month ==9 || month ==11)
            {
                ch=1;
            }
            else
            {
                ch=2;
            }

        }
        else
        {
            year--;
            month=11;
            ch=1;
        }
        CurrDate.setText ("                   "+ months[month]+"        "+year+"               ");
        GregorianCalendar cal = new GregorianCalendar(year, month, 1);
        int d=cal.get(cal.DAY_OF_WEEK);
        DayOfWeek=d;
        DrawCalendar(d,year,month);

        P4.add(Time);
        P1.setBackground(c);
        P2.setBackground(c);
        P4.setBackground(c);
    }
    if(arg0.getSource()== Next)
    {
        clear();

        if(month !=11)
        {
            month ++;
            if( month ==0 || month ==2 || month == 4 || month ==6 || month==7 || month ==9 || month ==11)
            {
                ch=1;
            }
            else
            {
                ch=2;
            }
        }
        else
        {
            year++;
            month=0;
            ch=1;

        }
        CurrDate.setText ("                   "+ months[month]+"        "+year+"               ");
        GregorianCalendar cal = new GregorianCalendar(year, month, 1);
        int d=cal.get(cal.DAY_OF_WEEK);
        DayOfWeek=d;
        DrawCalendar(d,year,month);
        P4.add(Time);
        P1.setBackground(c);
        P2.setBackground(c);
        P4.setBackground(c);

    }   
    for( int i=DayOfWeek-1; i<30+DayOfWeek; i++)
    {
        if(arg0.getSource()==dayButtons[i])
        {
            S1 = JOptionPane.showInputDialog(this,"Insert your Note");

        }
    }

}

private void clear() {
    for(int i =0; i<6;i++)
    {
        for(int j=0;j<7;j++)
        {
            P3.removeAll();
        }
    }

}

public static void main(String [] args){
    Calendar C = new Calendar();
    C.setSize(400,315);

    C.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    C.setVisible(true);
    C.setResizable(false);
    }

} 
```

大家好，，， ：）

这个日历的问题是每个月的天数！我写的代码不能正常工作！我不知道问题出在哪里如果任何人都可以帮助，，thnx反正！

![在此处输入图像描述](../Images/a47a3f03bbae6da8e4b701eff9b6ca8f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:34:28.490

天数始终为 31 的原因是因为单击按钮时您没有重新计算“ch”。

您无法弄清楚这一点的原因是因为您的实现使用了大约 5-10 倍于实际需要的代码，并且因为它是一团糟。还因为您可能没有使用调试器来调试它。

使用来自 Checkstyle、FindBugs、PMD 等的默认规则来告诉你一些代码有问题的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:03:07.720

如果您参数化重复的代码调用，您可以大大减少代码：

```
private void tripleDraw (int n1, int n2, int d) 
{
    for (int i = 0; i < n1; i++)
    { 
        dayButtons [i] = new JButton (""); 
        P3.add (dayButtons [i]);
        dayButtons [i].setBackground (Color.LIGHT_GRAY);
    } 
    for (int i = n1; i < n2; i++)
    {
        dayButtons [i] = new JButton (i+d + ""); 
        P3.add (dayButtons [i]);
        dayButtons [i].setBackground (c2);
    } 
    for (int i = n2; i < 49; i++)
    { 
        dayButtons [i] = new JButton (""); 
        P3.add (dayButtons [i]);
        dayButtons [i].setBackground (Color.LIGHT_GRAY);
    } 
}

private void DrawCalendar (int DayOfWeek, int year, int month) 
{
    P3.setLayout (new GridLayout (7, 7, 3, 3));
    dayButtons = new JButton [49];

    if (DayOfWeek == 1 && ch == 1)  tripleDraw (0, 31, 1);
    if (DayOfWeek == 2 && ch == 1)  tripleDraw (1, 32, 0);
    if (DayOfWeek == 3 && ch == 1)  tripleDraw (2, 33, -1);
    if (DayOfWeek == 4 && ch == 1)  tripleDraw (3, 34, -2);
    if (DayOfWeek == 5 && ch == 1)  tripleDraw (4, 35, -3);
    if (DayOfWeek == 6 && ch == 1)  tripleDraw (5, 36, -4);
    if (DayOfWeek == 7 && ch == 1)  tripleDraw (6, 37, -5);  

    if (DayOfWeek == 1 && ch == 2)  tripleDraw (0, 30, 1);
    if (DayOfWeek == 2 && ch == 2)  tripleDraw (1, 31, 0);
    if (DayOfWeek == 3 && ch == 2)  tripleDraw (2, 32, -1);
    if (DayOfWeek == 4 && ch == 2)  tripleDraw (3, 33, -2);
    if (DayOfWeek == 5 && ch == 2)  tripleDraw (4, 35, -3);
    if (DayOfWeek == 6 && ch == 2)  tripleDraw (5, 36, -4);
    if (DayOfWeek == 7 && ch == 2)  tripleDraw (6, 37, -5); 
```

然后您在第二个块 (ch==2) 中看到，从 33 到 35 的跳跃 - 这是故意的吗？

下一步是将第一个块替换为：

```
 if (ch == 1)  tripleDraw (DayOfWeek - 1, DayOfWeek + 31, 2-DayOfWeek); 
```

等等。

# javascript - “不同的”视差滚动效果

> ID：10486655
> 
> 赞同：3
> 
> 时间：2012-05-07T17:48:34.230
> 
> 标签：javascript, jquery

我正在使用我的新作品集，我想在网站上做这样的效果：

[http://nizoapp.com/](http://nizoapp.com/)

当我们滚动时，iPhone 和部件从侧面出现的效果。这是一种视差滚动。

我试图搜索如何做，但我找不到。所以我“偷”了代码保存页面并调整代码，但似乎有很多不必要的东西。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:55:32.060

视差：由于观察者位置的变化，被观察物体的表观位移。

视差是一种特殊的滚动效果，[例如](http://www.ianlunn.co.uk/plugins/jquery-parallax/)通过相对滚动来模拟深度。

如果您对更普遍的滚动效果感兴趣，那么简单的搜索会产生许多插件和[综述](http://smashinghub.com/7-jquery-parallax-and-scrolling-effect-plugins.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T18:14:52.033

![我想出的主意。](../Images/30594068ed219b46a678e9f5dd7fda78.png)

**据我说**，这里的图片显示了这个想法是如何运作的。基本思想是所有移动的元素都与中心/非移动元素有一定的距离。当您滚动更多时，它们与该中心元素的距离会减小 - 成反比。在此处的图像中，元素用圆圈标记并为其命名（为简单起见，仅给出了一个移动元素，也可以添加其他元素）。详情如下。

这里的中心元素称为“A”，而移动的元素称为“C”。这里使用的变量：

D => 移动元素与 A k 的距离
=> 任何常数 > 1（实验以获得良好结果）
y => 滚动距离（document.body.scrollTop）
dy => A、C dx 之间的垂直距离
=> 水平距离赌注。A 和 C
theta => A、C 之间的（预定）角度

C 和 A 之间有一个角度取决于您 - 将其设置为任意数字（弧度是首选单位）。现在，随着 y 增加，D 减少。因此，D 由图中所示的关系/公式给出。每次向下/向上滚动时，都会重新计算 D。从中计算出 dy、dx 并将其设置为 C 的 css 的左上角属性（绝对定位）。如果您想知道如何找到 dy、dx，请按以下步骤操作。

dy = Math.sin(theta) * D
dx = Math.cos(theta) * D

我希望我已经给出了这个想法。我本可以给出完整的代码，但我希望你做点什么......如果你需要进一步的帮助，请在评论中提出......:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:56:08.877

基本上它使用`scroll`事件，然后在某些点上为盒子设置动画。

# macos - 2 Flash 重叠在 Firefox Macintosh 上没有交互

> ID：10486656
> 
> 赞同：1
> 
> 时间：2012-05-07T17:49:01.797
> 
> 标签：macos, flash, firefox

我有一个带有两个不同浮动 div（位置：绝对）的网页，并且都包含一个 flash 电影。两者是重叠的，下面的一个要大得多。问题是：在最新版本的 FIREFOX for MACINTOSH (snow leopard) 上的 flash 电影无法与之交互！

观看自己（等待全屏视频关闭）：[http ://clients.adrime.com/files/campaigns/3509758016/27221/IT_pourfemme.it_index.html](http://clients.adrime.com/files/campaigns/3509758016/27221/IT_pourfemme.it_index.html)

我怎样才能解决这个问题？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T16:57:04.323

我知道这是一个老问题，但我想我会提出一个我遇到的可能的解决方案。

如上所述，我有一个非常相似的问题。将两部 SWF 影片加载到一个页面中，彼此重叠。最上面的内容鼠标位置总是偏离一个不错的边距，使按钮几乎无法使用。

我的一部电影是 1000x650，另一部电影是 1200x650。两者中较大的一个具有相当于大约 -100px 的左侧定位，这似乎与在最顶部的电影中看到的偏移相同。

通过给两部电影相同的左侧定位，问题得到了解决。最烦人的是，这只发生在 Mac / OSX 上的 Firefox 上。

可以在此处的评论中找到有关此主题的其他一些讨论：http: [//snook.ca/archives/other/hit_bug_in_fire](http://snook.ca/archives/other/hit_bug_in_fire)

这似乎是一个一致的错误，我很惊讶它没有得到解决。

# java - Collections.emptyList() 和/或 Java 泛型方法的奇怪类型推断行为？

> ID：10486657
> 
> 赞同：5
> 
> 时间：2012-05-07T17:49:03.247
> 
> 标签：java, generics, collections

这是`jdk1.7.0_04`.

我试图使用`Collections.emptyList()`而不是`new`在条件中使用我自己的空列表：

```
List<String> list = (anArray != null) ? Arrays.asList(anArray) : Collections.emptyList(); 
```

但得到以下错误：

```
error: incompatible types
        List<String> list = (anArray != null) ? Arrays.asList(anArray) : Collections.emptyList();
                                              ^
  required: List<String>
  found:    List<CAP#1>
  where CAP#1 is a fresh type-variable:
    CAP#1 extends Object from capture of ? extends Object
1 error 
```

我能够确定我需要将事情更改为：

```
List<String> list = (anArray != null) ? Arrays.asList(anArray) : Collections.<String>emptyList(); 
```

但作为工作的一部分，我遇到了奇怪的（对我来说，无论如何）情况：

```
List<String> alwaysEmpty = Collections.emptyList(); 
```

编译得很好，但是：

```
List<String> alwaysEmpty = (List<String>) Collections.emptyList(); 
```

给出以下编译错误：

```
error: inconvertible types
        List<String> alwaysEmpty = (List<String>) Collections.emptyList();
                                                                       ^
  required: List<String>
  found:    List<Object> 
```

有没有搞错？？

现在我可以理解，可能出于某种奇怪的原因，条件运算符的使用会以某种方式阻止类型推断系统意识到`emptyList()`调用的类型参数应该是`String`，因此需要明确指定。但是为什么插入一个（公认是多余的）演员会把事情搞砸呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T17:51:45.673

> 但是为什么插入一个（公认是多余的）演员会把事情搞砸呢？

因为现在表达式`Collections.emptyList()`本身不是任何赋值的目标 - 那么应该选择什么类型的参数呢？最好只指定类型参数：

```
// Redundant here, but just as an example
List<String> alwaysEmpty = Collections.<String>emptyList(); 
```

条件运算符也一样：

```
public static void main(String[] args) {              
    List<String> list = (args != null)
        ? Arrays.asList(args) : Collections.<String>emptyList();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T17:59:14.007

我将接受乔恩的回答，但也想列出某人刚刚在 SO 之外传递给我的关于此问题的答案。它是提交给 Sun/Oracle 的关于这件事的[错误报告的链接。](http://bugs.sun.com/view_bug.do?bug_id=6721089)评估错误的人对正在发生的事情有一个有用的解释。摘录：

> 这里的提交者似乎假设条件表达式的类型是分配的 LHS 上的类型（`List<String>`在这种情况下）。这不是真的：如 JLS 所述，条件表达式的类型：
> 
> “条件表达式的类型是将捕获转换（第 5.1.10 节）应用到`lub(T1, T2)`（第 15.12.2.7 节）的结果。”
> 
> 重要的是要了解为什么需要使用 lub。考虑以下示例：

```
class A {}
class B extends A{}
class C extends A{}
class Foo<X> 
Foo<? extends A> l = b ? new Foo<B>() : new Foo<C>() 
```

> 在这种情况下，我们有 LHS 是类型`Foo<? extends A>`，而 RHS 是类型`lub(Foo<B>, Foo<C>)`，即`Foo<? extends B&C>`。

# php - PHP日期，国际月份名称？

> ID：10486658
> 
> 赞同：7
> 
> 时间：2012-05-07T17:49:03.480
> 
> 标签：php

> **可能重复：**
> [strtotime 使用不同的语言？](https://stackoverflow.com/questions/6988536/strtotime-with-different-languages)
> [获取本地化月份列表](https://stackoverflow.com/questions/7228887/get-list-of-localized-months)

我从数据库中获取日期时间并将其格式化如下：

```
$row['datetime'] = date('jS F Y',strtotime($row['datetime'])); 
```

这将采用以下格式：

```
28th March 2012 
```

我怎样才能本地化月份的名称，所以对于法国用户来说，它会显示 Mars 而不是 March？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T17:52:45.203

使用`setlocale`and`strftime`获取日期字符串的本地化版本。

PHP 文档中的示例 - [http://php.net/manual/en/function.setlocale.php](http://php.net/manual/en/function.setlocale.php)：

```
/* Set locale to Dutch */
setlocale(LC_ALL, 'nl_NL');

/* Output: vrijdag 22 december 1978 */
echo strftime("%A %e %B %Y", mktime(0, 0, 0, 12, 22, 1978));

/* try different possible locale names for german as of PHP 4.3.0 */
$loc_de = setlocale(LC_ALL, 'de_DE@euro', 'de_DE', 'de', 'ge');
echo "Preferred locale for german on this system is '$loc_de'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:51:49.493

简单，利用[strftime](http://php.net/strftime)和[setlocale](http://php.net/setlocale)。

```
setlocale(LC_ALL, 'fr_FR.utf-8'); // ou LC_TIME
echo strftime('%A');
"lundi" 
```

请注意使用 la version utf-8 si tu 参加 une sortie unicode, sinon, la version normale te donnera du iso-8859-1(5)。

社区其他人使用英语，`strftime`尊重语言环境集，并使用 glibc（在后台）。如果`date`将始终返回英语`strftime`将尊重`setlocale`并以您的语言为您提供预期的输出。

# c# - c# 移动时带有图片框的标签

> ID：10486660
> 
> 赞同：0
> 
> 时间：2012-05-07T17:49:13.550
> 
> 标签：c#, label, image

我有一个足球场，里面有正方形的图片框，以我的形式充当球员。我希望这样当我选择一个图片框并将某人分配到这个位置时，玩家的名字会出现在这个下方的标签中。

由于可以使用不同的编队，我不能有一个静态的标签，它必须随着图片框移动。如果可能的话，它也会在图片框下方居中，尽管这不是一个直接的问题。

目前，分配的玩家的名字存储在一个变量中。

任何帮助将不胜感激！

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:58:54.430

这听起来很像家庭作业。

我会将图片框+标签制作成用户控件。

# android - WebView 的 Android 默认文本选择行为

> ID：10486661
> 
> 赞同：1
> 
> 时间：2012-05-07T17:49:14.377
> 
> 标签：android, android-webview, textselection

我正在扩展以前编写的应用程序。该应用程序的主要组件是 webview。在应用程序的上一个迭代中，我们不想让用户选择文本。在扩展中，我们希望允许用户能够选择文本。我假设默认情况下在 webviews 上启用了文本选择，而编写该应用程序的开发人员禁用了人们选择文本的能力。在尝试启用此功能时，我一一注释掉了附加到我的 web 视图的所有触摸和单击侦听器，以查看它们在哪里禁用了文本选择，但即使每个触摸侦听器都注释掉了，我仍然无法选择文本。我的问题是，我最初的假设是否正确？默认情况下是否启用文本选择？我应该寻找一种方法来启用文本选择而不是禁用它吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:28:24.343

我发现 Android 2.2 - 2.3 默认情况下没有文本选择，但如果 Android 4.0+ 发生长触摸，它确实启用了复制/粘贴。然后我尝试禁用此功能，但不幸的是失败了。这里的所有答案（SO）也不起作用。

# python - 过度注释代码会减慢执行速度吗？

> ID：10486666
> 
> 赞同：10
> 
> 时间：2012-05-07T17:49:43.187
> 
> 标签：python, performance, comments, code-formatting, technical-debt

> **可能重复：**
> [注释会减慢解释语言的速度吗？](https://stackoverflow.com/questions/2731022/do-comments-slow-down-an-interpreted-language)

如果超过 75% 的代码行被正确注释，在执行大型 .py 文件时是否会出现明显的性能下降？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T17:50:58.800

不

当你运行 python 时，第一步是转换成字节码，也就是那些`.pyc`文件。评论已从这些中删除，因此无关紧要^*。

如果您使用`-O`or`-OO`选项运行，python 将生成“优化”`pyo`文件，即使速度更快，也可以忽略不计。主要区别在于：

*   带有`-O`断言被删除，
*   使用该`-OO`选项，`__doc__`字符串将被删除。鉴于有时需要这些，`-OO`因此不建议运行 with。

* * *

^*下面已经指出，`.pyc`文件只为模块保存。因此，顶层可执行文件每次运行时都必须重新编译。此步骤*可能会*减慢*大量*python 可执行文件的速度。在实践中，大部分代码应该驻留在模块中，这不是问题。

# opengl-es-2.0 - OpenGL ES 1.1 和 2.0 的主要原则是否不同？

> ID：10486671
> 
> 赞同：1
> 
> 时间：2012-05-07T17:49:57.220
> 
> 标签：opengl-es-2.0, opengl-es-1.1

和其他许多人一样，我一直在疯狂地寻找一个好的 OpenGL ES 2.0 教程。但我似乎已经尝到了任何可用的东西，但我仍然没有信心。我知道 1.1 有一个固定的管道，而 2.0 让一切都取决于程序员的口味。所以我想我可以从 1.1 教程中学习灯光、纹理和东西，然后在学习了这些概念之后，我可以使用着色器手动完成所有未作为现成函数提供的东西。你认为我走对了还是应该停下来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:20:44.257

你的问题有点主观，所以我的回答必然包含个人意见，但我认为从 1.1 开始学习 OpenGL ES 已经没有用了，人们应该从 2.0 开始。在 iOS 上，无法处理 2.0 的现场活动设备的数量估计不到 5%（[根据销售额](http://www.learn-cocos2d.com/2012/03/ios-sales-statistics-q1-2012-split-by-model-opengl-es-2-0-support/)，这个数字可能最高为 16%）。我不能谈论 Android 统计数据，因为由于可用硬件的多样性，我很难确定那里的数字，但这似乎也非常有利于 2.0。

谈到事物的技术方面，我认为首先学习 1.1 并没有什么收获，因为当迁移到 2.0 时，你最终会丢掉很多东西。当您必须在 2.0 中创建自己的着色器程序来执行此操作时，学习在 1.1 中设置灯光和材质属性的特定 API 调用没有多大意义。您并没有真正了解这些灯等如何在 1.1 的固定功能管道中工作，因为它就像一个黑匣子。当我需要迁移到 2.0 时，我发现我并没有真正理解 1.1 中为我计算的内容，因此我没有从使用旧 API 的经验中获得太多。

两者相同的东西也可以从 2.0 开始学习。

1.1 相对于 2.0 的一大优势是示例代码和教程材料的可用性。[然而，随着时间的推移，随着人们迁移到新的 API，这种情况正在变得更好，我在这个答案](https://stackoverflow.com/a/8495261/19679)中描述了我在这个主题上找到的一些最好的材料（重点是 iOS）。[正如我在那里指出的那样，我在 iTunes U 上](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewCourse?id=497193807&s=143441&ls=1)可以免费找到 1.1 和 2.0 的课程。该链接的课程说明指向我组装的几个简单的 2.0 示例，以演示如何复制 1.1 功能。我还在[这个答案](https://stackoverflow.com/a/5873071/19679)中讨论了如何将一些 1.1 代码转换为 2.0 （我链接到的 PowerVR 参考特别适合展示如何在 2.0 着色器中生成 1.1 效果）。

就个人而言，我对 OpenGL ES 2.0 的感觉比 1.1 更自如，这在很大程度上是因为我觉得 2.0 API 更简单。我不必记住以正确方式设置场景的所有命令，以及我可以使用 API 做什么和不能做什么。我只是编写简单的 GLSL 代码来做我想做的事。

# php - 如果变量存储为 varchar，是否可以将其识别为 int、float 或 time

> ID：10486672
> 
> 赞同：1
> 
> 时间：2012-05-07T17:50:02.157
> 
> 标签：php, mysql

我需要在 mysql 字段中存储分数，但这个分数可以是时间、整数或浮点数。我这样做的第一种方法是识别分数类型，然后将其输入三个字段之一，但如果需要添加新的分数类型，我不希望必须不断向数据库添加字段。我记得有人告诉我，如果您将某些内容存储为 varchar，那么将无法将其读取为整数、浮点数甚至日期。我的问题是，我可以将所有这三个都存储为一种特定类型，但是在从数据库中获取它并在我的 php 代码中使用它时以任何我需要的方式读取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:46:45.993

您可以使用[CAST 和 CONVERT](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html)函数将字符串数据类型转换为另一种 MySQL 数据类型，例如 INT、FLOAT、DECIMAL、DATE、DATETIME 等。

有几个问题。你怎么知道一行中存储了什么数据类型？MySQL 确实支持 RegExp，但我不建议在 WHERE 子句中使用它。将数据类型存储在另一列中。

此外，在查询的 where 子句中使用强制转换函数会使它们运行缓慢。如果您需要根据数据搜索/排序，您应该使用正确的数据类型。也许您应该为每种数据类型添加一列；并且对于每一行，仅填充相应的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:09:54.050

在我看来，您可以将该字段建模为 FLOAT，除非您绝对需要了解存储的变量类型。时间可以通过转换为时间戳转换为整数值。整数是实际设置的实数（浮点数）的子集，所以我想这样你就可以涵盖所有内容。浮点运算可能会导致精度和相等性测试出现一些问题，但要小心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:19:29.763

如果您对其执行数学运算，mysql 会很高兴地将文本转换为适当类型的数字。但是，它也会将非数字文本转换为零并对其执行相同的操作，因此您需要事先检查您是否仅拉取适当类型的字段。

[此论坛帖子](http://forums.mysql.com/read.php?60,1907,38488#msg-38488)展示了如何向您的查询添加正则表达式条件，以确保您只提取其中包含数字数据的字段。但是，我认为使用单独的列来指示每条记录的分数类型可能更明智，并使用它来检索适当的分数。

我不知道如何将文本转换为日期（通过`date()`它不起作用）。但是，请注意 mysql 日期格式 (2012-05-08 11:20:23) 的日期元素按重要性降序排列。如果您只想查找最高/最低日期，或按日期排序，则将它们视为字符串即可。

# ruby-on-rails - 测试两个 Rails 应用程序之间的集成

> ID：10486677
> 
> 赞同：2
> 
> 时间：2012-05-07T17:50:14.823
> 
> 标签：ruby-on-rails, web-services, system-testing

我正在开发一个由两个不同的 rails 应用程序（服务器和客户端）组成的系统，它们通过 rest web 服务进行通信。

我对每个应用程序分别进行了测试，但我想为两个平台之间的集成添加一些测试，以断言一个平台创建的请求与另一个平台的期望兼容。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:01:34.687

我有一个类似的架构，我们使用 VCR 来记录所有服务器端响应并避免总是发出请求。它可能会变得烦人，现在我正在寻找一种在每次请求后从服务器清除数据的方法

我认为[VCR](https://github.com/myronmarston/vcr/)可能是一个很好的起点，可以测试您的应用程序之间的集成。

您可以在此处找到文档 -> [Relish Docs](https://www.relishapp.com/myronmarston/vcr/docs/getting-started)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:14:51.870

我认为这里可能有几种方法，具体取决于您实施的内容。

1.  如果客户端 Rails 应用程序具有用户界面，请尝试编写[Selenium 测试](http://seleniumhq.org/)以在本地开发环境或已部署的暂存环境中执行集成测试。（如果界面仍然是原型，则不理想，经常更改......）

2.  也许客户端的一部分可以写成一个Ruby gem（例如通信rest api就是一个ruby gem）。当服务端应用在测试环境中时，服务端Rails应用可以使用Client gem来运行集成测试，即调用模块函数，客户端使用相同的函数。客户端 Rails 应用程序也可以使用 gem 向服务器发出请求。这是开始将一些可重用代码迁移到 ruby​​gem[的一个很好的指南。](https://github.com/radar/guides/blob/master/gem-development.md)

# html - 图像中心对齐 - 有效但不完美

> ID：10486679
> 
> 赞同：1
> 
> 时间：2012-05-07T17:50:32.547
> 
> 标签：html, css, vertical-alignment, alignment

这些 CSS 属性在任意大小的容器中将任意大小的图像居中：

```
display:table-cell;
text-align:center;
vertical-align:middle; 
```

这是一个完美的流体图像居中，但是，表格单元属性在底部给了我不需要的空白。如何避免？看到这个：

[http://jsfiddle.net/8DeLQ/1/](http://jsfiddle.net/8DeLQ/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:55:32.167

如果容器不包含文本内容，您可以添加`font-size: 0;`到容器的样式中。我认为不需要的空格与文本内容有关。

# php - php正则表达式匹配撇号内的所有文本

> ID：10486680
> 
> 赞同：1
> 
> 时间：2012-05-07T17:50:41.300
> 
> 标签：php, regex, preg-match, apostrophe

这是字符串：`WHERE CLASS = 'CARL-01' OR CLASS = 'CARL-03' OR CLASS = 'CARL-04' OR CLASS =''`

我需要一个正则表达式函数，它可能`preg_match`通过 php 与以下内容匹配：

```
CARL-01
CARL-03
CARL-04 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:54:09.603

```
preg_match_all('/\'([^\']+)\'/', $string, $matches);
$matches = $matches[1]; 
```

# java - Javascript 和 scriptlet：可以吗？

> ID：10486682
> 
> 赞同：0
> 
> 时间：2012-05-07T17:50:45.907
> 
> 标签：java, javascript, jsp, scriptlet

> **可能重复：**
> [如何在 javascript 中使用 scriptlet](https://stackoverflow.com/questions/5158400/how-to-use-scriptlet-inside-javascript)

```
<%
if(request.getAttribute("exception")!=null){%>

<script type="text/javascript" >
    alert("hi");

    parent.error.document.open();
    parent.error.document.write("bye");
    parent.error.document.write(<%=request.getAttribute("exception").toString()%>);
    parent.error.document.close();

</script>
</form>

<%}%> 
```

有可能有这种代码吗？有没有其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:20:55.853

您的代码应该可以工作。但我更喜欢 JSTL：

```
<c:if test="${not empty(exception)}">
    <script type="text/javascript">
        alert("hi");
        parent.error.document.open();
        parent.error.document.write("bye");
        parent.error.document.write(<%=request.getAttribute("exception").toString()%>);
        parent.error.document.close();

    </script>
</c:if> 
```

对于jsp看起来更自然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:03:14.943

您只是缺少一些引号来将值视为字符串，而不是变量。

```
parent.error.document.write("<%=request.getAttribute("exception").toString()%>"); 
```

打印到页面时会如下所示：

```
parent.error.document.write("myException"); 
```

# java - h:selectOneMenu 使用 p:ajax 更改事件

> ID：10486683
> 
> 赞同：1
> 
> 时间：2012-05-07T17:50:58.137
> 
> 标签：java, jsf-2, primefaces

我正在尝试使用 p:ajax 从 h:selectOneMenu 的变化中获取值。但是我总是得到空值，不知道下面的代码有什么问题。

```
<h:form>
<h:selectOneMenu id="selectMenu" value="#{userHomeController.gymsSelectType}">

<f:selectItem itemLabel="Close to me" itemValue="closest" />
<f:selectItem itemLabel="Visited by me" itemValue="visited" />
<p:ajax process="selectMenu" listener="#{userHomeController.selectMenuListener}" event="change" update=":home-form:panel"  />

</h:selectOneMenu>
</h:form> 
```

豆类是

```
 public void selectMenuListener() {
    System.out.println("-------- >> " + gymsSelectType); // here null coming
    if (gymsSelectType.equals("a")) {
        //
    } else {
       //
    }
} 
```

这是一个视图范围类。并且变量gymsSelectType的下面的设置器也打印为null

```
public void setGymsSelectType(String gymsSelectType) {
     System.out.println("------------ >> "+gymsSelectType);
    this.gymsSelectType = gymsSelectType;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T02:04:57.780

试试这个

```
<p:ajax process="@this" listener="#{userHomeController.selectMenuListener}" event="change" update=":home-form:panel"  /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-12T15:58:12.503

尝试这个

`<p:ajax partialSubmit="true" listener="#{userHomeController.selectMenuListener}" event="change" update=":home-form:panel" />`

# c#-4.0 - Automapper - 将对象数组映射到一个对象

> ID：10486686
> 
> 赞同：3
> 
> 时间：2012-05-07T17:51:11.367
> 
> 标签：c#-4.0, mapping, automapper

我想将对象数组映射到一个对象。

例如：

```
public class ArrayData
{
  //name of property in class MyObject in upper under score casing
  public string PropName{get;set;}

  //value of property in class MyObject
  public string PropValue{get;set;}
} 
```

源数据：

```
ArrayData [] sourceData = new ArrayData[]{new ArrayData{PropName="MY_ID",PropValue="1"}} 
```

目标对象：

```
public class MyObject
{
  public int MyId{get;set;}
} 
```

**我的目标是将 MyObject.MyId 设置为 1。**

约定是：

```
if(ArrayData.PropName == MyObject.Property.Name)
{
   MyObject.PropName = ArrayData.PropValue;
} 
```

**编辑：我试过这样：**

```
public class UpperUnderscoreNamingConvention : INamingConvention
{
    #region Implementation of INamingConvention

    public Regex SplittingExpression
    {
        get { throw new System.NotImplementedException(); }
    }

    public string SeparatorCharacter
    {
        get { return string.Format("_"); }
    }

    #endregion
}

public class TestProfile: Profile
{
    public override string ProfileName { get { return "TestProfile"; } }
    protected override void Configure()
    {
        SourceMemberNamingConvention = new UpperUnderscoreNamingConvention();
        DestinationMemberNamingConvention = new PascalCaseNamingConvention();

        CreateMap<ArrayData, MyObject>()
                           .ForMember(dest => dest.MyId, opt =>
                                            {
                                                opt.Condition(src => src.ColumnName == "MY_ID");
                                                opt.MapFrom(src => src.Value);
                                            });
    } 
} 
```

转换：

```
 Mapper.Initialize((obj) => obj.AddProfile(new TestProfile()));

        var myClass = Mapper.Map<ArrayData[], MyClass>(sourceData); 
```

它不起作用，我得到这个异常：

> AutoMapper.AutoMapperMappingException：缺少类型映射配置或不支持的映射。

另外我认为这不是很好的解决方案手动映射所有属性：

```
 .ForMember(dest => dest.MyId, opt => opt.Condition(src => src.ColumnName =="MY_ID")) 
```

# c# - 分隔格式

> ID：10486687
> 
> 赞同：0
> 
> 时间：2012-05-07T17:51:22.163
> 
> 标签：c#, text, delimiter

似乎在stackoverflow上的任何地方都找不到这个，所以就这样：

我有一个文件，我想知道它是用管道（|）还是逗号（，）分隔的。我还想知道文本限定符是引号（“）还是什么都没有。有人有任何 C# 函数可以做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:05:14.227

这不是我的想法，假设文件具有相同数量的列，并且您有一个可能是分隔符的字符列表。

```
char[] delims = { '|', ',', ... }; 
```

取行的子集，或者如果文件足够小，则取整个文件，并将它们存储在字符串数组中。

```
string[] lines = text.Split(new char[] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries); 
```

循环遍历分隔符，将使用该分隔符的拆分条目计数插入到整数数组中：

```
int[] counts = lines.Select(s => s.Split(currentDelimiter).Length).ToArray(); 
```

使用您自己的方法查看所有计数彼此相等并且都大于 1。您所在的分隔符就是要使用的分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:21:01.423

对于像这样的文本分隔文件，我发现[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)是一个非常有用的工具。（您可以导入 Visual Basic dll 以在 C# 应用程序中使用它）。

我将使用的一般策略，因为根据您的说法，每个文件有固定数量的列，将选择一个分隔符并继续解析/读取行，直到一行的列数与前一行不同。当发生这种情况时，切换到另一个分隔符（如果两者都无效，不确定你想做什么）。如果在第一行根本找不到分隔符，您可能还想丢弃分隔符。使用`TextFieldParser`HasFieldEnclosedInQuotes设置为 true，您可以正确处理在引号中转义的字段（如果不使用引号，它仍然可以正常工作）[。](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.hasfieldsenclosedinquotes.aspx)这比在使用常规字符串操作时尝试手动处理引号要容易得多*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:01:53.103

获取第一行（或第二行，如果第一行是带有文件名的标题）。

然后您可以使用正则表达式来检查可能的格式。IE

```
 Regex rePipesAndQualifier = ("[^|"]*"|); 
```

如果`rePipesAndQualifier.match(yourFileLine);`返回多个非空匹配项，则您知道它使用管道作为分隔符并具有分隔符。

制作更多正则表达式来检查逗号分隔以及有无限定符。

这取决于您期望获得的内容（全部分隔，仅分隔字符串）和您知道的内容（分隔符在开头和结尾或仅在中间，字段数等等）。这就是为什么我不能给你一个确切的解决方案。

# actionscript-3 - AS3 - 如果 X 已知，则查找旋转对象的 Y 位置

> ID：10486688
> 
> 赞同：1
> 
> 时间：2012-05-07T17:51:27.013
> 
> 标签：actionscript-3, flash

当只知道 X 位置时，我试图找出舞台上旋转对象的 Y 位置。我对如何做这件事并不十分熟悉，但我知道这将与边框对象的旋转有关。

我需要做的是知道，根据下面的 X 位置，在它碰到屏幕上的黑色边框之前，确切的最大 Y 位置可以是多少。我知道原始位置是 280，但我完全不确定如何计算出 Y 位置进一步向下。

我附上了找到 X 的代码（全部是它，它没有考虑任何旋转，因为在这个级别上不需要它），以及一个屏幕截图，这样你就可以清楚地理解。

感谢您的时间。

```
 private function init(e:Event = null):void{
        var maxX:int = stage.width
        var freeSpace:int = 300
        var startX:int = Math.ceil(Math.random() * (maxX - (freeSpace+this.width))) + freeSpace;    
        this.x = startX
    } 
```

![](../Images/fec4032d925224eea85ce7343e2d3686.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:25:59.697

我不确定我是否回答了正确的问题，因为正如你所说的那样，这是不可能解决的，或者你不得不接受 Y 可以是任何东西......（为了能够找到一个在 R^2 上的向量空间中点，您需要形式为 (x,y) 的两个向量的基，但在 R^1 中只有一个向量。

但看起来你想找到“屏幕上的黑线”的交点 - 即一条任意线和一条穿过你想要适合的“形状”最低点的垂直线。很难从这个问题中看出，你想适应什么形状，但如果它是一个没有旋转的矩形，那么它将是它的右下角或左下角。然后，您可以通过比较水平线与“黑线”以及水平线与矩形底部之间的角度来找到要选择的点。

接下来，您需要找到这两条线之间的交点，公式可以在这里找到：[http ://en.wikipedia.org/wiki/Line_intersection](http://en.wikipedia.org/wiki/Line_intersection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T22:43:37.590

我不完全确定您的问题，但希望这些建议会有所帮助：

*   您可以在显示对象上使用 localToGlobal() 函数将该显示容器内的旋转、平移和缩放的点返回到舞台。例如，$p:Point = myMovieClip.localToGlobal(new Point(10, 10));
*   矩阵[也是](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html)旋转点的好方法。例如，var $mtx:Matrix = new Matrix(); $mtx.tx = 10; $mtx.ty = 10; $mtx.rotate(); 现在 $mtx.tx 和 $mtx.ty 有旋转的结果

那些可能不会回答你的问题，但我想我会提到它们以防万一，在我进入更复杂的事情之前。就像 wvxvw 说的那样，如果没有其他变量，您将无法真正解决您要尝试的方程式。我写了一些代码来展示如何在将 X 与线段中的一个点进行比较时找到 Y：

```
import flash.display.Shape;
import flash.geom.Point;
import flash.display.Graphics;
import flash.events.MouseEvent;

var $s:Shape = new Shape();
addChild($s);

var borderStart:Point = new Point(stage.stageWidth/2, stage.stageHeight/2);
var borderRotation:Number = 45; 
var borderLength:Number = 800;

var borderRad:Number = borderRotation * (Math.PI/180);
var borderEnd:Point = new Point(borderStart.x + Math.cos(borderRad) * borderLength, borderStart.y + Math.sin(borderRad) * borderLength);

stage.addEventListener(MouseEvent.MOUSE_MOVE, update);

function update(e:MouseEvent):void{
    var $g:Graphics = $s.graphics;
    $g.clear();

    //Drawing the rotated border
    $g.lineStyle(3, 0xff0000, .5);
    $g.moveTo(borderStart.x, borderStart.y);
    $g.lineTo(borderEnd.x, borderEnd.y);

    //Finding if and where mouseX collides with our border
    if (stage.mouseX >= Math.min(borderStart.x, borderEnd.x) && stage.mouseX <= Math.max(borderStart.x, borderEnd.x)){
        var $x:Number = stage.mouseX;

        //SOLVING HERE : Solve collision with X
        var $percent:Number = ($x - borderStart.x)/(borderLength * Math.cos(borderRad));
        var $y:Number = borderStart.y + Math.sin(borderRad) * borderLength * $percent;

        //Drawing to our collision
        $g.lineStyle(1, 0xffff00, .6);
        $g.moveTo($x, 0);
        $g.lineTo($x, $y);
        $g.lineStyle(2, 0xffff00, 1);
        $g.drawCircle($x, $y, 3);

        trace("----\nCollision @\t" + "x: " + $x + "\ty:" + Math.round($y));
    }
} 
```

希望这将为如何解决您的特定问题提供一些见解。

# javascript - 文本框 onchange 验证事件阻止单击按钮

> ID：10486691
> 
> 赞同：0
> 
> 时间：2012-05-07T17:51:39.847
> 
> 标签：javascript, vb.net

我有一个带有多个文本框的表单。其中一个文本框有一个我制作的验证器。基本上，该验证器继承自 CustomValidator 类并使用 javascript 函数来验证文本框的内容。

javascript函数很简单

```
function myFunction(sender, args) {
    if (condition) {
        args.IsValid = true;
    }
    else {
        args.IsValid = false;
    }
} 
```

如果条件为假，则动态显示错误消息。

因此，当我在文本框中输入无效数据时会出现问题，因为数据无效，消息显示。目前一切都按预期工作。但是，当我返回文本框以更正数据时，当我单击提交按钮时，似乎它触发了验证器的 onchange 事件，从而隐藏了错误消息但没有单击按钮。

关于为什么会发生这种情况以及如何解决它的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:42:38.430

*用我在评论中所说的回答问题*

我解决了我的问题。问题是，由于我的错误消息是动态显示的，所以当错误消息显示/隐藏时，提交按钮会在我的页面上“移动”。所以，当我点击发送按钮时，错误消息会消失，将按钮“移动”到我点击的其他地方，这样我就不会真正点击按钮。

一些补充信息：似乎验证发生在 mouseDown 事件上，而按钮单击发生在 mouseUp 事件上。我通过单击按钮、按住鼠标按钮、指向按钮并释放鼠标按钮来测试它，然后 clic 工作。

# jquery - jQuery：使用 $.delegate 将附加功能附加到现有事件处理程序

> ID：10486692
> 
> 赞同：0
> 
> 时间：2012-05-07T17:51:45.040
> 
> 标签：jquery, delegates

我的组织有一个由多个应用程序共享的标准 jQuery/JavaScript 框架。在这个框架中，我们为 jQuery 的 datepicker 功能设置了一个基本标准，可以与动态加载的元素一起使用：

```
$(document).delegate("input.calendar", "click, focus", function() { 
    myAppDatepicker = $(this).datepicker({
        changeYear: true,
        dateFormat: "yy-mm-dd"
    });
}); 
```

我想做类似的事情：

```
$(document).delegate("input.calendar", "click, focus", function() { 
    myAppDatepicker.datepicker("option", "maxDate", 0);
}); 
```

向日期选择器添加其他选项。这个方法不起作用——我猜是因为第二个委托侦听器正在替换第一个侦听器中的处理程序，我想在其中附加其他选项。

目前，这会引发“myAppDatepicker is not defined”错误。

我可以通过 Firebug 中的 $.bind 来做到这一点，但它不适用于动态加载的元素。关于如何在加载时对 DOM 中不存在的元素进行这项工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:19:48.350

改变：

```
$(document).delegate("input.calendar", "click, focus", function() { 
    **myAppDatepicker**.datepicker("option", "maxDate", 0);
}); 
```

至

```
$(document).delegate("input.calendar", "click, focus", function() { 
    **$(this)**.datepicker("option", "maxDate", 0);
}); 
```

按预期附加附加选项。

# selenium - Selenium.click 等待操作完成超时

> ID：10486695
> 
> 赞同：0
> 
> 时间：2012-05-07T17:51:51.640
> 
> 标签：selenium, webdriver, selenium-rc

我在 Eclipse 中使用 Java 运行 selenium RC。我遇到的问题是 selenium.click 命令。我单击的链接会加载一个新页面。有时需要 5 秒，有时需要 2-3 分钟。每次我看到页面加载时，在我的测试失败后立即收到消息“等待操作完成超时”。

我尝试改用 selenium.isElementPresent 来检查正在加载的页面。但是，当我在调试模式下运行时，我注意到它永远不会超过 selenium.click 甚至到达检查元素的地步。据我了解， selenium.click 命令内置了等待。所以我的问题是，有谁知道如何忽略内置的等待，所以我可以改用 selenium.isElementPresent 吗？

```
selenium.click(Link);
for (int i = 0; i < 60 ; i++) {
    if (selenium.isElementPresent(Home)) {
       break;
    }
    Thread.sleep(1000);
} 
```

我还尝试使用 selenium.open 直接转到 URL 并完全跳过链接，然后使用 selenium.isElementPresent 验证页面是否已加载。我在那里遇到了同样的问题，在失败并出现相同的错误消息之前它从未真正进入 for 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:08:32.380

我遇到过同样的问题。我只是用 try/catch 包装了 click 命令，以便捕获错误，然后做了一个断言标题并检查页面上的预期文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T23:38:35.997

我建议您将此方法/功能合并到您的代码中。

```
 public static void WaitForPageToLoad(IWebDriver driver)
    {
        TimeSpan timeout = new TimeSpan(0, 0, 2400);
        WebDriverWait wait = new WebDriverWait(driver, timeout);

        IJavaScriptExecutor javascript = driver as IJavaScriptExecutor;
        if (javascript == null)
            throw new ArgumentException("driver", "Driver must support javascript execution");

        wait.Until((d) =>
        {
            try
            {
                string readyState = javascript.ExecuteScript("if (document.readyState) return document.readyState;").ToString();
                return readyState.ToLower() == "complete";
            }
            catch (InvalidOperationException e)
            {
                //Window is no longer available
                return e.Message.ToLower().Contains("unable to get browser");
            }
            catch (WebDriverException e)
            {
                //Browser is no longer available
                return e.Message.ToLower().Contains("unable to connect");
            }
            catch (Exception)
            {
                return false;
            }
        });
    } 
```

有时 selenium 的 .Click() 会等待一个自引用响应。为了超越这一点，并让您的测试继续进行，我将对您的代码执行以下操作。

```
 driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(30));

    try{ selenium.click(Link); }
    catch(WebDriverException) {}
    WaitForPageToLoad(driver); 
    //look for your element. 
```

将其与隐式等待结合起来，一旦 JavaScript 报告页面已完成加载，您就可以查找您的元素。我发现它比在 60 秒内找不到元素的机会硒更有活力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:36:12.063

解决方案取决于您正在测试的应用程序的性质。如果单击操作加载一个新页面，那么您可以使用 selenium 的 waitForPageToLoad 命令，如下所示：

```
selenium.click(Link);
selenium.waitForPageToLoad(60000); 
```

**注意：**该参数是以毫秒为单位的超时值。因此，这将等待页面加载最多 60 秒。

该点击和等待功能的最佳解决方法可能是使用 Selenium 的 waitForCondition 方法，如下所示：

```
selenium.waitForCondition("selenium.isElementPresent(\"Home\")", 60000); 
```

Selenium 连续运行 isElementPresent 方法，直到它返回 true 或达到作为第二个参数给出的超时值。此外，在继续执行脚本之前，`selenium.waitForCondition`可以运行以检查屏幕上是否存在文本。`selenium.isTextPresent`

# javascript - 悬停按钮的jQuery索引

> ID：10486696
> 
> 赞同：1
> 
> 时间：2012-05-07T17:51:51.413
> 
> 标签：javascript, jquery

我不知道为什么我不明白这一点......我一直这样做。一定有一个“星期一的时刻”。但是，基本上，这就是我所拥有的：

```
$('#nav ul li a').hover(hoverOn, hoverOff); 

function hoverOn (evt) {
    //how do I get the index of which button was hovered (from the jQuery group)?
} 
```

我的代码如下所示：

```
<div id="nav">
<ul>
<li><a href="#" id="index">Home</a></li>
<li><a href="#" id="about">About Us</a></li>
<li><a href="#" id="services">Services</a></li>
<li><a href="#" id="resources">Resources</a></li>    
<li><a href="#" id="contact">Contact</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:53:18.560

```
hoverOn (evt){
    var index = $(this).parent().index();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:55:08.800

如果您的元素是 an`<a>`那么您需要获取父`<li>`索引：

```
var idx = $(this).parent().index() 
```

# asp.net-mvc-3 - System.Linq.Expressions.InstanceMethodCallExpressionN

> ID：10486697
> 
> 赞同：0
> 
> 时间：2012-05-07T17:51:52.013
> 
> 标签：asp.net-mvc-3, linq, ravendb

我得到了这个异常，有什么想法可以解决吗？我知道它很愚蠢，但似乎无法弄清楚。

不支持表达式类型：

System.Linq.Expressions.InstanceMethodCallExpressionN

```
public static IQueryable<T> GetBy<T>(Expression<Func<T, bool>> predicate)
    {
        try
        {
            IDocumentSession RavenSession = MvcApplication.Store.OpenSession();
            var t = RavenSession.Query<T>().Where(predicate);
            RavenSession.Dispose();
            //return t.AsQueryable<T>();
            return t;
        }
        catch (Exception e)
        {
            throw e;
        }
    }

var r = DB.GetBy<Docs>(x => x.Id == Id).FirstOrDefault(); <-- this is where I get the exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:53:40.403

在使用查询之前不要释放会话。

# gcc - 链接器输入文件未使用，因为链接未完成 - gcc

> ID：10486698
> 
> 赞同：2
> 
> 时间：2012-05-07T17:51:59.667
> 
> 标签：gcc, linker, makefile

我是编写makefile的初学者。我有一个像这样的makefile：

```
PATH1 = /ref

CC=gcc
LINK = gcc

INCLUDES = .
INCLUDES += -I/PATH1/inc \
        -I/$(PATH1)/abc/inc/ \
        -I/$(PATH1)/def/inc/ 

all: src_file

run: src_file

src_file: 
    $(CC) $(INCLUDES) -MM  /ref/abcd.c -o $@ 

clean:
    rm -f *.o src_file 
```

如果我进行制作，我会收到错误消息：

```
linker input file unused because linking not done. 
```

我在 stackoverflow 中阅读了一些类似的帖子，但找不到解决方案。有人可以让我知道我的makefile有什么问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:11:12.550

罪魁祸首是预处理器选项`-MM`。从[gcc 预处理器选项](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options)，

> **-M**
> 
> 不是输出预处理的结果，而是输出一个适合make描述主源文件依赖关系的规则。预处理器输出一个 make 规则，其中包含该源文件的目标文件名、冒号和所有包含文件的名称，包括来自 -include 或 -imacros 命令行选项的文件。
> 
> **将 -M 传递给驱动程序意味着 -E，并使用隐式 -w 抑制警告。**
> 
> **-毫米**
> 
> 与 -M 类似，但不提及在系统头目录中找到的头文件，也不提及此类头文件中直接或间接包含的头文件。

所以有效地你**只是预处理**，因此没有编译，没有链接以及由此产生的错误。

# asp.net-mvc-3 - 操作无法完成，因为 DbContext 已被释放

> ID：10486700
> 
> 赞同：2
> 
> 时间：2012-05-07T17:52:02.817
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, ninject, httpmodule

我尝试使用错误模块（Application_Error）、HttpModuleMagic.MVC3、Ninject.MVC3、EF 4.1 进行自定义错误处理（http://perspectivespace.com/100497697）。不幸的是，当我想将错误记录到数据库中时，它会给出以下错误消息：“操作无法完成，因为 DbContext 已被释放。”

有人可以帮我吗？

```
public class ErrorHandlerHttpModule : IHttpModule
{
    private const string ErrorControllerRouteName = "Error";
    private IErrorRepository errorRepo;
    private IUserRepository userRepo;

  //  private IUserRepository UserRepository;

    public ErrorHandlerHttpModule(IErrorRepository er, IUserRepository ur)
    {
        errorRepo = er;
        userRepo = ur;
    }

    public void Dispose()
    {
    }

    public void Init(HttpApplication context)
    {
        context.Error += Application_Error;
    }

    private void Application_Error(object sender, EventArgs e)
    {
        // Get the last error.

        var exception = HttpContext.Current.Server.GetLastError();
    ...

    error.User = userRepo.GetUserByName(name);

    ... 
```

在 NinjectWebCommon.cs 中：

```
 private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IErrorRepository>().To<ErrorRepository>().InRequestScope();
        kernel.Bind<IUserRepository>().To<UserRepository>().InRequestScope();

        kernel.Bind<IDatabaseFactory>().To<DatabaseFactory>().InRequestScope();

        kernel.Bind<IDisposable>().To<Disposable>().InRequestScope();
        kernel.Bind<IHttpModule>().To<ErrorHandlerHttpModule>();
    } 
```

...和 ​​UserRepository 类：

```
public class UserRepository : RepositoryBase<User>, IUserRepository
{
    public UserRepository(IDatabaseFactory databaseFactory)
    : base(databaseFactory)
    {
    } 

    public User GetUserByName(string name)
    {
        User us = null;
        try
        {
            us = dataContext.Users.Where(u => u.UserName.Equals(name)).FirstOrDefault() as User;
        }
        catch (Exception ex)
        {

        }
        return us;
    }
} 
```

存储库库：

```
public abstract class RepositoryBase<T> where T : class
{
    protected TestContext dataContext;
    private readonly IDbSet<T> dbset;
    protected RepositoryBase(IDatabaseFactory databaseFactory)
    {
        DatabaseFactory = databaseFactory;
        dbset = DataContext.Set<T>();
    }

    protected IDatabaseFactory DatabaseFactory
    {
        get;
        private set;
    }

    protected TestContext DataContext
    {
        get { return dataContext ?? (dataContext = DatabaseFactory.Get()); }
    }
    ... 
```

和 DatabaseFactory 类：

```
public class DatabaseFactory : Disposable, IDatabaseFactory
{
    private TestContext dataContext;

    public TestContext Get()
    {
        return dataContext ?? (dataContext = new TestContext());
    }

    protected override void DisposeCore()
    {
        if (dataContext != null)
            dataContext.Dispose();
    }
} 
```

这一行潜入了错误：

```
dataContext.Users.Where(u => u.UserName.Equals(name)).FirstOrDefault() as User; 
```

我尝试关注这篇文章： [http ://weblogs.asp.net/shijuvarghese/archive/2011/01/06/developing-web-apps-using-asp-net-mvc-3-razor-and-ef-code -first-part-1.aspx](http://weblogs.asp.net/shijuvarghese/archive/2011/01/06/developing-web-apps-using-asp-net-mvc-3-razor-and-ef-code-first-part-1.aspx)

谢谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:00:14.947

```
protected override void DisposeCore()
{
   if (dataContext != null)
   {
      dataContext.Dispose();
      dataContext = null;
   }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-17T14:55:53.080

原因是您的 LINQ 查询被延迟，换句话说，它不在您的“UserRepository”中运行，而仅在调用代码中运行。所以DBContext在执行的时候就已经被处理掉了。您可以通过更改强制它立即执行

```
us = dataContext.Users.Where(u => u.UserName.Equals(name)).FirstOrDefault() as User 
```

至

```
us = dataContext.Users.Where(u => u.UserName.Equals(name)).ToList().FirstOrDefault() as User 
```

# prolog - 在 Prolog 中计算时差

> ID：10486701
> 
> 赞同：1
> 
> 时间：2012-05-07T17:52:05.103
> 
> 标签：prolog, operators, predicate

我在 Prolog 中编写一个相对简单的谓词时遇到了一些麻烦。这个谓词应该接收格式为 Hours:Minutes 的两个参数，计算两者之间的差异并检查该值是否大于或等于 40 分钟。

这是我到目前为止所拥有的：

```
time(Time1, Time2):- 
    X:Y =:= Time1, A:B =:= Time2, calculate_time(X, Y, A, B).

calculate_time(X, Y, A, B):-
    Y - X =:= 0,
    B - A >= 40, !.
calculate_time(X, Y, A, B):-
    Y - X > 0. 
```

正如您可以想象的那样，这给出了一个错误，即：

```
?- time(10:00, 10:55).
 ERROR at  clause 1 of user:time/2 !!
 INSTANTIATION ERROR- in arithmetic: expected bound value 
```

所以，据我所知，他认为他得到了四个论据。他为什么会有这样的反应？另外，在文件的开头，我有以下命令：

```
:-op(500,xfy,:).
:-op(600,xfy,/). 
```

该谓词应该是更大程序的一部分，因此这两行需要保留在文件中。我没有使用任何模块，我正在使用 YAP。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:18:52.780

你有两个问题。第一个是您正在使用`=:=/2`which 测试两个数字表达式的计算结果是否相同，但您使用的是结构而不是数字表达式。

似乎您的逻辑也不完全正确（最后一个条款没有意义，您是从第一次的小时数中减去分钟数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-20T10:21:09.503

如果时差大于或等于 40 分钟，则返回 true。

程序：

```
time(A:B,X:Y):- 
    HOURS is X - A,
    MINUTES is Y - B,
    LENGTH is HOURS*60 + MINUTES,
    LENGTH >= 40. 
```

测试1：

```
?- time(06:40,09:45).
true. 
```

测试2：

```
?- time2(09:40,09:45).
false. 
```

# ios - UItableView reloadData 没有正确设置单元格显示属性

> ID：10486702
> 
> 赞同：0
> 
> 时间：2012-05-07T17:52:07.130
> 
> 标签：ios, uitableview, reloaddata

我有一个表格视图，我正在动态重新加载其内容，为了重新加载表格内容，我使用以下代码：

```
[agendaTable reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade]; 
```

这工作正常，但问题是我以下列方式设置表格单元格的 alpha 属性：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

    if([cell isKindOfClass:[AgendaItemBlank class]])
        cell.backgroundColor = [UIColor clearColor];

    else if([cell isKindOfClass:[AgendaItem class]])
    {
        cell.backgroundColor = [UIColor whiteColor];

        [cell setAlpha:0.82];

        //set the corner radius so that there is a rounded effect
        [cell.layer setBorderWidth:0.5];
        [cell.layer setCornerRadius:9.0];
        [cell.layer setBorderColor:[UIColor redColor].CGColor];
        [cell.layer setMasksToBounds:YES];

        //set a different color for the selected background
        UIView *bgColorView = [[UIView alloc] init];
        [bgColorView setBackgroundColor:[UIColor redColor]];
        [bgColorView.layer setCornerRadius:9.0];
        [cell setSelectedBackgroundView:bgColorView];
        [bgColorView release];
    }
} 
```

这些因素的结合导致重新加载后，表格单元格最初变得不透明，所有属性都生效，但 alpha 属性不生效。

单元格在向上和向下滚动时（主要是在重绘时）恢复其 alpha 属性。

我也尝试在 内设置 alpha `- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`，但这没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:07:04.840

尝试

```
[cell setBackgroundColor:[UIColor colorWithRed:1 green:0 blue:0 alpha:0.82]];
[cell.textLabel setBackgroundColor:[UIColor clearColor]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:00:49.793

要设置单元格背景，请使用中间`UIView`对象：

```
UIView* cellBackView = [[UIView alloc] initWithFrame:CGRectZero];
cellBackView.backgroundColor = [UIColor redColor];
cellBackView.alpha = 0.82;
cell.backgroundView = cellBackView; 
```

# php - 如何显示从外部网站抓取的内容？

> ID：10486704
> 
> 赞同：1
> 
> 时间：2012-05-07T17:52:13.573
> 
> 标签：php, html, curl, feed, mamp

如何从外部网站抓取内容片段并将其显示在我的网站上？（类似于 RSS 提要或其他聚合器所做的事情）。

例如，假设我想显示另一个网站日历中的项目：

**其他网站：**

```
<h1>Here's our calendar:</h1>

<div class="calendar_item">
  <h2>Boston Marathon</h2>
  <p class="date">June 23, 2012</p>
  <p class="description">This marathon is 26.2 miles and lots of fun.</p>
</div>

<div class="calendar_item">    
  <h2>Irish Pub Crawl</h2>
  <p class="date">July 17, 2012</p>
  <p class="description">Shamrocks and green things are super-fun.</p>
</div>

<div class="calendar_item">
  <h2>Tim's Birthday</h2>
  <p class="date">August 25, 2012</p>
  <p class="description">It's Tim's birthday, yo.</p>
</div> 
```

**我的网站：**

```
<h1>Here's a feed of some calendar items from someone else's website:</h1>

<div class="event_title">Boston Marathon</div>
<div class="event_date">June 23, 2012</div>
<div class="event_description">This marathon is 26.2 miles and lots of fun.</div>

<div class="event_title">Irish Pub Crawl</div>
<div class="event_date">July 17, 2012</div>
<div class="event_description">Shamrocks and green things are super-fun.</div>

<div class="event_title">Tim's Birthday</div>
<div class="event_date">August 25, 2012</div>
<div class="event_description">It's Tim's birthday, yo.</div> 
```

这是我尝试过的（使用 MAMP）：

```
<?php

$url = "http://example.com";

$page = curl($url);

$pattern = '%
<h2>(.+?)</h2>
%i';

preg_match($pattern,$page,$matches);

print_r($matches);

?> 
```

...打印：

```
Array ( ) 
```

教程/等。我查看过包括“尝试 cURL”之类的模棱两可的答案。这看起来很简单，但我是一个难过的菜鸟。

提前谢谢各位:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:34:47.900

我不建议使用正则表达式来解析 HTML。PHP 5+ 带有一个解析器，您可以使用它，如下所示。

```
$content = file_get_contents('test.html');
$doc = 
<<<DOC
$content
DOC;
$dom = new DOMDocument();
$dom->loadHTML($doc);
$h2Tags = $dom->getElementsByTagName("h2");
$pTags = $dom->getElementsByTagName("p");
foreach($h2Tags as $h2 ) {
    //do something
}

foreach($pTags as $p ) {
if($p->getAttribute("class") == "date") {
    //do something
}

} 
```

$h2 是 DOMElement 类型。它继承了 DOMNode。因此，您可以使用 nodeValue 属性来访问这些值。在上面的示例中，您可以编写 $h2->nodeValue 来访问内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:00:27.797

你可以试试这个库[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

然后只是：

```
foreach($dom->find('p[class=date]' as $p) {
  $date = $p->innertext;
} 
```

这会给你的内容

或者你做的更全球化，用 stripos 深入研究

```
foreach($dom->find('p') as $p) {
  if(stripos($p->class, 'date') !== false) {
    //do something
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:58:10.073

这是使用 cURL 的示例：

[http://tr2.php.net/manual/en/curl.examples-basic.php](http://tr2.php.net/manual/en/curl.examples-basic.php)

并在申请前检查您是否正在获取数据`preg_match`。如果你得到了一些，那么正是正则表达式导致了你的问题。

# jquery - 计算某个类的空输入的数量

> ID：10486716
> 
> 赞同：7
> 
> 时间：2012-05-07T17:52:55.977
> 
> 标签：jquery, count

我从以前的问题中尝试了几个解决方案，但没有运气。希望有人可以帮助我。

我有一个表单的一部分，其中字段是使用某个类动态创建的：

```
 <td><input class="user_field" type="text" name="1[user_fname]"/></td>
 <td><input class="user_field" type="text" name="1[user_lname]"/></td>
 <td><input class="user_field phone" type="text" name="1[user_mobile]"/></td>
 <td><input class="user_field" type="text" name="1[user_email]"/></td>
 <td>&nbsp;</td> 
```

在模糊时，我需要检查是否有空并尝试过：

```
$('.user_field').blur(function(){

    //check all fields for complete

    alert ($('.user_field[value=""]').length)

}); 
```

并得到“0”

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-07T17:58:30.437

这将为您提供所有空输入：

```
$('.user_field').filter(function(){
    return !$(this).val();
}).length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:08:13.957

毫米只是使用发布我的版本`.not`

```
$('.user_field').blur(function() {
   var count = $('.user_field').not(function() {
        return this.value;
    }).length;

    alert(count);
}); 
```

**[演示](http://jsfiddle.net/jMEdx/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:06:41.487

```
$('.user_field').blur(function(){
    alert ($('.user_field').filter('[value=""]').length);
}); 
```

***[演示](http://jsfiddle.net/nD4U2/1/)***

# visual-studio-2010 - Unity 框架文件

> ID：10486717
> 
> 赞同：0
> 
> 时间：2012-05-07T17:52:58.143
> 
> 标签：visual-studio-2010, unity-container

可以enybody从Unity框架为.net框架4共享.dll文件。我不想从官方网站下载.msi，因为它要求安装VS2008。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T01:00:18.160

此[下载](http://www.microsoft.com/en-us/download/details.aspx?id=17866)只是二进制文件，没有 VS2008 要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:55:06.993

你应该习惯 NuGet，

[http://nuget.org/packages/Unity](http://nuget.org/packages/Unity)

# java - OpenGL渲染到纹理坐标

> ID：10486721
> 
> 赞同：4
> 
> 时间：2012-05-07T17:53:21.570
> 
> 标签：java, opengl, render-to-texture, projection-matrix

我希望能够渲染到纹理（用于着色器、字体），但我遇到了一个问题，即正确定位四边形（帧缓冲区本身做了它应该做的事情）。生成的（复制的）纹理在大多数情况下显示在左上角，其余部分被裁剪。这对于矩形纹理来说更糟，对方形纹理几乎没有影响（所以我碰巧几天都没有意识到这种行为）

示例代码：

```
 public Texture copy(final Texture tex) {
    final int tempTex = glGenTextures();
    Draw.bindTexture(tempTex);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, tex.getImageWidth(), tex.getImageHeight(), 0, GL_RGB, GL_UNSIGNED_BYTE, (ByteBuffer)null);

    // Adjust projection matrix
    glMatrixMode(GL_PROJECTION);
    glPushMatrix();
    glLoadIdentity();
    glViewport(0, 0, tex.getImageWidth(), tex.getImageHeight());

    // Change blendmode to ignore the transparent background
    Draw.blendingMode(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);

    // Prepare fbo, add the texture as backend and clear it
    final int fbo = glGenFramebuffers();
    glBindFramebuffer(GL_FRAMEBUFFER, fbo);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, tempTex, 0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // Finally draw
    Draw.bindTexture(tex.getId());
    glBegin(GL_QUADS);
    {
        glTexCoord2f(0, 0);
        glVertex2f(-1, -1);
        glTexCoord2f(1, 0);
        glVertex2f(1, -1);
        glTexCoord2f(1, 1);
        glVertex2f(1, 1);
        glTexCoord2f(0, 1);
        glVertex2f(-1, 1);
    }
    glEnd();

    // Unbind framebuffer
    glBindFramebuffer(GL_FRAMEBUFFER, 0);

    // Reset projection matrix
    glViewport(0, 0, 1920, 1080); // TODO Don't hardcode
    glPopMatrix();

    return new Texture(tempTex, tex.getImageWidth(), tex.getImageHeight());
} 
```

示例图片：

## ![在此处输入图像描述](../Images/3e77b99e4dcb384b3ccc91e1a985c22c.png)

上面是渲染的原始图像，在复制版本下面

我究竟做错了什么？

* * *

更新：现在看起来纹理被下采样了

![在此处输入图像描述](../Images/d583cbf2afc409c46c028c7e18dc7c2b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:00:48.887

您不应该将实际纹理宽度和高度传递给 texcoords。纹理坐标范围从 0（底部和左侧）到 1（顶部和右侧）。您不会将实际纹理尺寸硬编码到纹理坐标中。

尝试用“1”替换 texcoord 函数中的 getWidth/getHeight

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:20:55.713

最好的方法是使用大小与您的显示器（1920x1080）类似的正交投影矩阵。您的纹理必须是 2 pow 大小的纹理，因此您必须将其设为 2048x2048。如果您现在将结果渲染到纹理的矩形上（不适合整个纹理），那么您可以使用相同的矩阵将其渲染回屏幕上。（像素正确）

# php - 使用自己的自定义脚本将您自己的自定义页面添加到 Wordpress

> ID：10486723
> 
> 赞同：1
> 
> 时间：2012-05-07T17:53:45.757
> 
> 标签：php, wordpress, wordpress-theming

我希望向 wordpress 添加一个自定义页面，而不是以通常的方式。这个页面有我自己的自定义脚本和函数，开发插件超出了我的能力，所以我想知道这是否可能：

假设我要在我的文件夹中现有的 page.php 脚本上构建它，我的脚本看起来像这样：

```
<?php get_header(); ?>
                        <div id="left-area" class="clearfix">
                                <?php 

                                //My script would go here 

                                ?>

                                <div class="comments">
                                        <?php comments_template('',true); ?>
                                </div><!-- end of comments div -->             

                        </div><!-- end of left-area -->
                        <!-- LEFT AREA ENDS HERE -->

    <?php get_sidebar(); ?>

<?php get_footer(); ?> 
```

这甚至可能吗？我试过并得到一个找不到页面的错误。如果是这样，假设 WP 安装在根目录中，我该如何调用这个脚本？示例：www.mysite.com/myscript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:34:07.650

绝对地。重复的 page.php。将其重命名为 template_mine.php。打开编辑，在 get_header 标记之前，添加：

```
<?php 
//
// Template Name: My Custom template (choose something more descriptive, like contact page)
// 
?> 
```

转到页面的 Wordpress 仪表板，使用您的标题创建一个新页面，然后在右侧的页面属性中，在模板下，选择您的模板名称，更新，一切就绪。

参考：[http ://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)

# xml - 对 RCQ 文件执行多个请求

> ID：10486724
> 
> 赞同：0
> 
> 时间：2012-05-07T17:53:55.640
> 
> 标签：xml, api, rest, testing, rest-client

我正在尝试使用[Rest Client](http://code.google.com/p/rest-client/)测试 REST API ，我想知道是否可以在单个 rcq 文件中执行多个请求。

文档已过时:(

如果不可能，您知道一些好的测试框架或工具来测试 REST API 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:56:23.787

我想不通，所以我最终决定使用Apache 的[Jmeter](http://jmeter.apache.org/)，它有据可查（与 Rest Client 相比），我可以在互联网上找到很多示例。

一开始有点粗糙，但最终我设法在它上面构建了我的测试。

我推荐它。

# tridion - 可以使用 Data Extender 扩展收藏夹列表吗？

> ID：10486726
> 
> 赞同：11
> 
> 时间：2012-05-07T17:53:57.800
> 
> 标签：tridion

我们有一个数据扩展器，它在所有列表视图中显示每个项目的版本号。显然“收藏夹”是不同的，因为我们的数据扩展器在那里不起作用。

那么，我们可以为收藏夹列表做一个数据扩展器吗？如果没有，将版本号信息添加到项目以在列表中显示的替代方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T18:02:17.283

是的。收藏夹列表可以通过 DataExtender 进行扩展，类似于大多数其他数据结构的扩展方式。由于收藏夹是 Tridion Content Manager 数据模型中其他项目的快捷方式，因此它们具有相同的可用属性。

这是我的 Building Blocks 文件夹中的项目列表示例：

```
<tcm:ListItems Managed="10682" ID="tcm:1-1-2" 
               xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
    <tcm:Item ID="tcm:1-5-2" Title="Component Templates" Type="2" 
              Modified="2011-11-18T11:09:45" IsNew="false" Icon="T2L0P0" 
              IsPublished="false" Lock="0" IsShared="false" IsLocalized="false" 
              Trustee="tcm:0-0-0" Allow="269085696" Deny="96" Managed="10682" />
</tcm:ListItems> 
```

这是收藏夹列表的示例：

```
<tcm:ListFavoriteItems xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
    <tcm:Item xmlns:tcm="http://www.tridion.com/ContentManager/5.0" 
        ID="cme:0-41336414110293-shortcut" Title="Folder" RefID="tcm:1-57-2" 
        Path="\Content Management\Pub1\Building Blocks\Folder" Icon="T2" 
        Created="2012-5-7T14:8:30" HasChildren="false" Allow="24576" />
</tcm:ListFavoriteItems> 
```

因此，除了根元素名称之外，这看起来与您可以从 DataExtender 中的 Tridion 获取的其他列表非常相似。

# javafx - 如何在 JavaFX 2.1 中创建模态窗口

> ID：10486731
> 
> 赞同：41
> 
> 时间：2012-05-07T17:54:08.653
> 
> 标签：javafx, javafx-2

我不知道如何在 JavaFX 中创建模式窗口。基本上我有文件选择器，我想在用户选择文件时问他们一个问题。我需要这些信息来解析文件，所以执行需要等待答案。

我已经看到[了这个问题](https://stackoverflow.com/questions/10008377/javafx-2-modal-window)，但我无法找出如何实现这种行为。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-12T07:36:22.010

在我看来，这不是一个好的解决方案，因为父窗口一直处于活动状态。
例如，如果您希望在单击按钮后将窗口打开为模态...

```
private void clickShow(ActionEvent event) {
    Stage stage = new Stage();
    Parent root = FXMLLoader.load(
        YourClassController.class.getResource("YourClass.fxml"));
    stage.setScene(new Scene(root));
    stage.setTitle("My modal window");
    stage.initModality(Modality.WINDOW_MODAL);
    stage.initOwner(
        ((Node)event.getSource()).getScene().getWindow() );
    stage.show();
} 
```

现在您的新窗口是真正的模态 - 父级是块。你也可以使用

```
Modality.APPLICATION_MODAL 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-05-07T20:09:55.570

这是我之前在 JavaFX 2.1 中为模态对话框创建[的解决方案的链接](https://gist.github.com/1887631)该解决方案在当前阶段的顶部创建一个模态阶段，并通过对话框控件的事件处理程序对对话框结果执行操作。

# JavaFX 8+

先前的链接解决方案使用过时的事件处理程序方法在对话框被解除后采取行动。该方法对 JavaFX 2.2 之前的实现有效。对于 JavaFX 8+，不需要事件处理程序，而是使用新的 Stage[`showAndWait()`](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Stage.html#showAndWait--)方法。例如：

```
Stage dialog = new Stage();

// populate dialog with controls.
...

dialog.initOwner(parentStage);
dialog.initModality(Modality.APPLICATION_MODAL); 
dialog.showAndWait();

// process result of dialog operation. 
... 
```

请注意，为了使事情按预期工作，初始化 Stage 的所有者并将 Stage*的*模态初始化为[WINDOW_MODAL](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Modality.html#WINDOW_MODAL)或[APPLICATION_MODAL](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Modality.html#APPLICATION_MODAL)非常重要。

[JavaFX 8](http://code.makery.ch/blog/javafx-dialogs-official/)和[ControlsFX](http://fxexperience.com/controlsfx/)中有一些高质量的标准 UI 对话框，如果它们符合您的要求，我建议使用它们而不是自己开发。那些内置的 JavaFX [Dialog](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Dialog.html)和[Alert](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Alert.html)类也有[`initOwner`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Dialog.html#initOwner-javafx.stage.Window-)and[`initModality`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Dialog.html#initModality-javafx.stage.Modality-)和[`showAndWait`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Dialog.html#showAndWait--)方法，因此您可以根据需要为它们设置模态（注意，默认情况下，内置对话框是应用程序模态的）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-06T04:01:03.987

您可以像我的示例一样创建应用程序。这只是单个文件 JavaFX 应用程序。

```
public class JavaFXApplication1 extends Application {
    @Override
    public void start(Stage primaryStage) {
        Button btn = new Button();
        btn.setText("Say 'Hello World'");
        btn.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                Stage stage; 
                stage = new Stage();

                final SwingNode swingNode = new SwingNode();

                createSwingContent(swingNode);

                StackPane pane = new StackPane();
                pane.getChildren().add(swingNode);

                stage.initModality(Modality.APPLICATION_MODAL);
                stage.setTitle("Swing in JavaFX");
                stage.setScene(new Scene(pane, 250, 150));
                stage.show();
            }
        });

        StackPane root = new StackPane();
        root.getChildren().add(btn);

        Scene scene = new Scene(root, 300, 250);

        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    private void createSwingContent(final SwingNode swingNode) {
        SwingUtilities.invokeLater(() -> {
            try {
                Path currentRelativePath = Paths.get("");
                String s = currentRelativePath.toAbsolutePath().toString();
                JasperDesign jasperDesign = JRXmlLoader.load(s + "/src/reports/report1.jrxml");

                String query = "SELECT * FROM `accounttype`";
                JRDesignQuery jrquery = new JRDesignQuery();
                jrquery.setText(query);
                jasperDesign.setQuery(jrquery);

                JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
                JasperPrint JasperPrint = JasperFillManager.fillReport(jasperReport, null, c);
                //JRViewer viewer = new JRViewer(JasperPrint);

                swingNode.setContent(new JRViewer(JasperPrint));
            } catch (JRException ex) {
                Logger.getLogger(AccountTypeController.class.getName()).log(Level.SEVERE, null, ex);
            }
        });
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        launch(args);
    }
} 
```

# linux - 如何在 Linux 中使用 Bash 脚本对这些值进行排序？

> ID：10486736
> 
> 赞同：2
> 
> 时间：2012-05-07T17:54:40.000
> 
> 标签：linux, bash, sorting, duplicate-removal

```
-53 45
-54 43
-55 42
-56 41
-57 40
-59 37
-61 35
-61 36
-62 34
-64 33
-65 31
-65 32
-67 30
-68 29
-69 28
-72 25
-73 23
-73 24
-74 22
-76 20
-76 22
-78 20
-79 18
-80 17
-81 16 
```

在上面你会看到 -61 出现了两次，其他一些值也是如此。我只想创建一个没有任何重复的新文件。所以新文件应该有 -61 35 或 -61 36 ...

我怎么做？！我尝试使用 uniq 进行排序，但这没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:02:14.177

假设您的数据在一个名为 input 的文件中

```
cat input | sort -u -n 
```

当进行数字（-n）排序和唯一性（-u）时，可以实现重复检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T18:01:15.317

如果能保证第一个字段的长度，

```
sort | uniq --check-chars=4 
```

会成功的。

否则，请尝试 awk：

```
awk '{ if (FNR == 1 || last != $1) print; last = $1; }' 
```

# java - 用计算机启动 Java 应用程序并能够看到 system.out.println？

> ID：10486738
> 
> 赞同：-1
> 
> 时间：2012-05-07T17:54:45.040
> 
> 标签：java, jar

我写了一个简单的 Java 应用程序，我将它放在程序的启动文件夹中，它使程序在计算机启动时启动。让它打开命令行或我可以看到 System.out.println 结果而不只是在后台运行的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:00:30.900

您应该熟悉日志记录框架，例如[logback](/questions/tagged/logback "显示标记为“logback”的问题")和[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题")。而不是使用`System.out.println`您使用一些特殊的 API，并且日志库将所有消息重定向到预配置的附加程序，如控制台或文件。

在您的情况下，您可以将应用程序配置为在开发时登录控制台，并在将应用程序配置为从启动时运行时切换到文件。

这不会在启动时真正打开一个新的命令行窗口，而是将所有消息存储到磁盘上的某个预定义文件中——这实际上更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:03:25.153

您可以使用 Log4j API 记录带有预定义输出的详细信息。这比使用 SOP 好得多。因为它是轻量级的，并且使用您想要的输出格式配置其他文件中的日志也非常简单。 [http://logging.apache.org/log4j/1.2/](http://logging.apache.org/log4j/1.2/)转到此 URL，您可以在其中找到可用的 log4j api。

希望这对你有用

享受 ！！！

# actionscript-3 - 在 AS3 中从过去的帧调用函数

> ID：10486740
> 
> 赞同：-1
> 
> 时间：2012-05-07T17:55:02.707
> 
> 标签：actionscript-3, actionscript

我在使用以前帧中的函数时遇到问题。我知道我的编码很粗糙，但我不知道如何使用类和外部 AS 文件，所以如果有人可以在不使用类之类的情况下帮助我，我将不胜感激。

我遇到的问题是我的游戏在某个帧上有一个关卡，然后在另一个帧上有下一个关卡。问题是，在我的第二个级别上，当我从前一个级别和帧调用事件侦听器时，我可以左右移动，但我的跳跃不再起作用。

这是我的相关 1 级代码的链接：http: [//pastebin.com/Ftkj36Wc](http://pastebin.com/Ftkj36Wc)

这是我的 2 级代码： http: [//pastebin.com/NUSE3A02](http://pastebin.com/NUSE3A02)

正如我之前所说，我的左右运动都很好，所以我不太知道出了什么问题。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:00:12.087

如果您这样做，则在第 1 级结束时：

```
stage.removeEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);
stage.removeEventListener(KeyboardEvent.KEY_UP, keyUpHandler); 
```

键输入将不再在级别 2 中工作。

要么从 clearLevel 函数中删除这 2 个，要么在级别 2 中再次添加事件侦听器来处理键输入。

# entity-framework - LINQ to Entities - 获取每个（角色、功能组）的功能数量

> ID：10486741
> 
> 赞同：1
> 
> 时间：2012-05-07T17:55:05.257
> 
> 标签：entity-framework, linq-to-entities

我是 Linq to Entities 的新手，不知道如何进行查询。

我的模型是：

```
public class Role 
{
    public int Id { get; set; }   

    public string Name { get; set; }

    public ICollection<AppFunction> AppFunctions { get; set; }
}

public class AppFunction 
{
    public int Id { get; set; }

    public string Name { get; set; }

    public int? ParentId { get; private set; }

    public ICollection<Role> Roles { get; set; }
} 
```

所以我有角色和应用功能。每个角色可以关联很多应用功能，每个应用功能可以关联很多角色。因此，角色和应用程序功能之间只是多对多。

还有一个细微差别：如果`AppFunction.ParentId == null`- 我将其视为一个类别。

否则，它是一个具体的功能，属于其中一个类别。

我不确定这是否是一个很好的架构示例，但目前在我的应用程序中是如此。

我想进行这样的查询，它将返回下一个 ViewModel 的数据：

```
public class RoleCategoryViewModel
{
    public string RoleName { get; set; }

    public string CategoryName { get; set; }

    public int Count { get; set; }
} 
```

为了清楚起见：

```
 Role1    Role 2

Category 1    (3/7)    (0/7)    

Category 2    (1/2)    (2/2)

Category 3    (3/5)    (4/5) 
```

这是我想在页面上向用户展示的表格。它是角色和功能类别的矩阵。在角色 X 和类别 Y 的交汇处，有大量来自类别 Y 的与角色 X 相关联的应用功能。

例如，“角色 1”和“类别 1”的交点处的 (3/7) 表示“类别 1”总共包含 7 个“子功能”，并且“类别 1”中只有 3 个功能与“角色 1”相关联”。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:24:01.017

首先，我们需要对您的 ViewModel 进行一些更改，如下所示：

```
public class RoleCategoryViewModel
{
    public string RoleName { get; set; }
    public string CategoryName { get; set; }
    public int RoleCount { get; set; }
    public int TotalRolesCount { get; set; }
} 
```

那么这里是查询：

```
 var list = (from category in context.AppFunctions.Where(m => m.ParentId == null)
                   from role in category.Roles
                   select new RoleCategoryViewModel
                              {
                                      CategoryName = category.Name,
                                      RoleCount = role.AppFunctions.Count,
                                      TotalRolesCount = category.Roles.Count,
                                      RoleName = role.Name,
                              }).ToList(); 
```

# objective-c - NSArray 使用的排序算法是稳定排序吗？

> ID：10486744
> 
> 赞同：11
> 
> 时间：2012-05-07T17:55:14.360
> 
> 标签：objective-c, ios, sorting, nsarray

NSArray 中各种排序方法使用的排序算法是否[稳定](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)？（它们是“稳定排序”算法，其中具有相同排序键的项目保留其相对顺序。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-14T03:51:49.570

除非您使用`NSSortStable`. 从[NSSortOptions 的文档中](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/index.html#//apple_ref/c/tdef/NSSortOptions)：

> `NSSortStable`
> 
> 指定排序结果应返回具有相同值的比较项，其值与它们最初出现的顺序相同。
> 
> **如果未指定此选项，则相等的对象可能会或可能不会按其原始顺序返回。**

如果您需要保证稳定的排序，请尝试以下操作：

```
[array sortWithOptions:NSSortStable usingComparator:^NSComparisonResult(id obj1, id obj2) {
    return [obj1 compare:obj2];
}]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T18:27:09.633

我发现的唯一“官方”答案是[2002 年来自 Apple 的 Chris Kane 的邮件列表帖子](http://www.cocoabuilder.com/archive/cocoa/64628-more-on-stable-sorting.html#52304)：

> NSArray/NSMutableArray 的排序方法的稳定性是不确定的，所以你应该预料到它们是不稳定的。由于未定义，情况也可能因版本而异，尽管我（我自己）不认为这是可能的。当前实现使用快速排序，该算法的一个版本几乎与 BSD 的 qsort() 例程相同。一堆实验发现，很难比我们在测试中通过的一般数据类型做得更好。[当然，如果有关于被排序数据的附加信息，可以使用其他有助于该情况的算法或修改。]

我不知道这是否仍然正确，考虑到帖子的历史，但最好假设`NSArray`'s 的排序方法*不稳定*。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T18:10:39.150

在[doc](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)中，没有详细说明相同项目的最终顺序。

因此，我觉得对订单做出任何假设都是一个坏主意。即使您通过实验确定顺序是什么，这也可能会根据数组中的项目数或运行排序的 iOS 版本而改变。

对我来说，我会坚持文档提供的承诺。

# android - 是否可以将消息导入 Android 模拟器？

> ID：10486748
> 
> 赞同：7
> 
> 时间：2012-05-07T17:55:31.123
> 
> 标签：android, android-emulator

是否可以将 SMS 消息列表导入 Android 模拟器以进行测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T00:57:57.450

是的，有办法。就是这样：

1.  [从这里](http://handheld.softpedia.com/progDownload/SMS-Backup-Restore-Download-92446.html)下载“SMS Backup and Restore.apk”文件

2.  在手机上安装 apk，或使用 google play。

3.  将您的 SMS 消息导出到您的手机上并将 XML 备份文件共享到您的计算机，您可以自己通过电子邮件发送，或者如果您在备份之前将应用程序移动到您的 SD 卡，您可以通过将其复制到您的计算机来从 SD 卡中获取 XML 文件。

4.  将下载的 apk 文件复制或移动到您的 android-skd 文件夹中的 platform-tools 文件夹中。

5.  Windows：运行`cmd`并更改为`platform-tools`目录。

6.  键入`adb -s emulator_name install "SMS Backup and Restore.apk"`。

7.  现在在 Eclipse 中更改为 DDMS 模式并创建一个名为`SMSBackupRestore`under的文件夹，`mnt/sdcard`因此它最终将是`mnt/sdcard/SMSBackupRestore`.

8.  在模拟器中运行备份和恢复应用程序并导入 XML 文件...完成！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:00:50.670

我不确定将现有文件中的 SMS 消息导入模拟器。但是，我所知道的是您可以通过 DDMS 欺骗短信。你可以这样做，然后启动你的应用程序来做你想做的神奇的事情。[Android 开发 - 使用 DDMS](http://developer.android.com/guide/developing/debugging/ddms.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T20:18:28.107

您可以使用 SMS Backup and Restore 等应用程序，并将您自己的短信存档。它将它保存为 XML，因此您可以随时修改它。然后，只需将该应用程序安装到模拟器上（我假设您可以在模拟器上安装第 3 方应用程序，但我不确定），然后从该 XML 文件恢复。

# java - JAXB 将任意文本写入从流生成的 XML 文件的第一行

> ID：10486753
> 
> 赞同：0
> 
> 时间：2012-05-07T17:55:42.917
> 
> 标签：java, xml, jaxb, marshalling

我正在使用 JAXB 编组对象，并且当前我的控制台输出与我生成的 XML 文件不同：

安慰：

```
<!-- My awesome comment --> 
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Cat>
    <name>Toby</name>
</Cat> 
```

生成：

```
<Cat>
    <name>Toby</name>
</Cat> 
```

我希望控制台中的输出与其中生成的内容相匹配，`Cat.xml`但事实并非如此。我的问题是我生成“正确”的方法有什么不正确的`Cat.xml`？最低功能程序如下：

```
public class CatDriver{  
public static void main(String[] args) throws JAXBException, IOException,
            ParserConfigurationException, TransformerException {

        Cat cat = new Cat();
        cat.setName("Toby");
        JAXBContext context = JAXBContext.newInstance(Cat.class);

        Marshaller m = context.createMarshaller();
        m.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.TRUE);
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
        m.setProperty(
                "com.sun.xml.bind.xmlHeaders",
                "<!-- My awesome comment"
                        + " --> \n <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>");
        m.marshal(cat, System.out);
        Writer w = null;
        try {
            w = new FileWriter("C:/test/Cat.xml");
            m.marshal(cat, w);

        } finally {
            try {
                w.close();
            } catch (Exception e) {
            }
        }

    }
} 
```

* * *

```
@XmlRootElement(name = "Cat")
class Cat {
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:25:26.693

看看这篇文章：[http ://blog.bdoughan.com/2010/09/jaxb-xml-infoset-preservation.html](http://blog.bdoughan.com/2010/09/jaxb-xml-infoset-preservation.html)

这不完全是您所需要的，但可能是更好的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T17:59:37.923

```
Cat cat = new Cat();
cat.setName( "Toby" );
JAXBContext context = JAXBContext.newInstance( Cat.class );

Marshaller m = context.createMarshaller();
m.setProperty( Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE );
m.setProperty( Marshaller.JAXB_FRAGMENT, Boolean.FALSE );

m.marshal( cat, System.out );
Writer w = null;
try
{
  w = new FileWriter( "Cat.xml" );
  w.append( "<!-- My awesome comment -->" );
  w.flush();
  m.marshal( cat, w );

}
finally
{
  try
  {
    w.close();
  }
  catch ( Exception e )
  {
  }
} 
```

# monitoring - 在集群中运行和监控作业的工具

> ID：10486756
> 
> 赞同：0
> 
> 时间：2012-05-07T17:55:58.253
> 
> 标签：monitoring, cluster-computing, pbs

我们得到了这两个集群，每个集群有 8 个节点，我们正在寻找一个好的集群框架，它允许我们启动作业，有一个具有不同调度策略的内置调度程序和一个带有 Web 前端的监控系统。每个节点都在 Ubuntu 11.04 上运行。商业和开源都可以。

我看到的其中一些是 TORQUE 和 MAUI。（不确定它是否有用于监控的 Web 前端）SLURM 和 MAUI。GEXEC 和 GANGLIA。（没有调度程序）

您会推荐哪些产品？使用像 MOSIX 这样的集群操作系统而不是工具有什么优势吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:42:27.867

Maui 的付费版本称为 Moab（它通常使用 TORQUE 作为 RM）。它也可以与监控工具一起出售。我认为 Moab 是一个非常好的产品，但我对它有强烈的偏见（我在开发 TORQUE/Moab 的公司工作）。

# sql-server - SSAS 多维数据集字符未正确显示

> ID：10486768
> 
> 赞同：0
> 
> 时间：2012-05-07T17:56:55.583
> 
> 标签：sql-server, ssas, ssas-2008

我有一个 ssas 多维数据集，其客户维度显示特殊字符（中文..等）。当我在 Excel 中引入相关属性时，这些字符无法正确显示。在维度表中，信息类型存储为 char。我还更改了维度和属性的排序规则，但这并没有帮助。创建语言翻译也没有帮助。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:41:28.753

数据库中的 CHAR 不适用于 UNICODE 字符串。汉字通常涉及使用代码页的上端（多字节字符）。您需要 NCHAR/NVARCHAR。

# angularjs - 无法访问 $rootScope

> ID：10486769
> 
> 赞同：162
> 
> 时间：2012-05-07T17:56:59.860
> 
> 标签：angularjs

以下文件“有效”（即它不会引发任何错误）：

```
<!doctype html>
<html ng-app="modx">
    <script src="http://code.angularjs.org/angular-1.0.0rc7.js"></script> 
    <script>
        angular.module("modx", [], function($routeProvider) {
        });
    </script>
</html> 
```

但是这个

```
<!doctype html>
<html ng-app="modx">
    <script src="http://code.angularjs.org/angular-1.0.0rc7.js"></script>
    <script>
        angular.module("modx", [], function($routeProvider, $rootScope) {
        });
    </script>
</html> 
```

给出错误：

> 错误：未知提供者：来自 modx
> 源文件的 $rootScope： [http](http://code.angularjs.org/angular-1.0.0rc7.js)
> ://code.angularjs.org/angular-1.0.0rc7.js 行：2491

怎么回事？

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2012-05-07T21:50:47.693

例如，您不能在配置阶段询问 - 您只能询问提供者。

```
var app = angular.module('modx', []);

// configure stuff
app.config(function($routeProvider, $locationProvider) {
  // you can inject any provider here
});

// run blocks
app.run(function($rootScope) {
  // you can inject any instance here
}); 
```

有关更多信息，请参阅[http://docs.angularjs.org/guide/module](http://docs.angularjs.org/guide/module)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-08T20:51:42.377

我发现以下“模式”非常有用：

```
MainCtrl.$inject = ['$scope', '$rootScope', '$location', 'socket', ...];
function MainCtrl (scope, rootscope, location, thesocket, ...) { 
```

其中，MainCtrl 是一个控制器。我对依赖 Controller 函数的参数名称对实例进行一对一的模拟感到不舒服，因为我担心我可能会更改名称并将事情搞砸。我更喜欢为此目的明确使用 $inject 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-27T21:32:04.983

我**不建议**您像以前那样使用语法。AngularJs 让您可以根据需要拥有不同的功能（、、、、`run`等`config`）`service`，`factory`更专业。在这个功能中，您甚至不必像自己一样注入

```
MainCtrl.$inject = ['$scope', '$rootScope', '$location', 'socket', ...]; 
```

如您所知，您可以使用它。

# jstree - jstree移动，拖放

> ID：10486770
> 
> 赞同：13
> 
> 时间：2012-05-07T17:57:00.250
> 
> 标签：jstree

我想为 jstree 中的节点实现移动功能。是需要执行的移动还是拖放？此外，拥有将容器绑定到事件和事件代码的工作代码会很好。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T23:30:06.567

如果您不需要执行任何移动规则（不允许将某些节点移动到其他节点等），您只需要使用 dnd 插件。如果您需要执行移动规则，您可以添加 crrm 插件。

有关此示例，请参阅dnd pluign 文档的[仅重新排序演示](http://www.jstree.com/documentation/dnd)。文档很差，因此您必须使用浏览器上的开发人员工具来查看`check_move`回调参数的属性是什么。对于文档中的示例，`m.o`指的是您拖动的节点并`m.r`指的是您的目标节点。

当节点被移动时，您可能还需要收到通知，因此`move_node.jstree`在初始化树时绑定到事件：

```
$("#treeHost").jstree({
   // ...
}).bind("move_node.jstree", function (e, data) {
    // data.rslt.o is a list of objects that were moved
    // Inspect data using your fav dev tools to see what the properties are
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-25T04:43:22.107

```
$("#demo1").jstree({
....
.bind("move_node.jstree", function (e, data) {

    /*
    requires crrm plugin

    .o - the node being moved
    .r - the reference node in the move
    .ot - the origin tree instance
    .rt - the reference tree instance
    .p - the position to move to (may be a string - "last", "first", etc)
    .cp - the calculated position to move to (always a number)
    .np - the new parent
    .oc - the original node (if there was a copy)
    .cy - boolen indicating if the move was a copy
    .cr - same as np, but if a root node is created this is -1
    .op - the former parent
    .or - the node that was previously in the position of the moved node */

    var nodeType = $(data.rslt.o).attr("rel");
    var parentType = $(data.rslt.np).attr("rel");

    if (nodeType && parentType) {
        // TODO!
    }
})
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-03-05T21:03:57.473

上述方法不适用于最新版本的 jstree（截至今天为 3.3.7）。

[博金回答](https://stackoverflow.com/a/10490528/1676689)的第一行仍然成立。要实施规则，您可以使用[`core.check_callback`](https://www.jstree.com/api/#/?q=check_callback&f=$.jstree.defaults.core.check_callback)或可能使用`types`插件；该`crrm`插件不再存在。绑定以`move_node.jstree`在完成移动（放下）时执行某些操作。默认情况下，除了移动节点之外，dnd 插件还允许重新排序（在两个节点之间放置）和复制（Ctrl + 拖动）。下面的代码片段显示了如何禁用这些附加行为。

```
$('#treeElement').jstree({
    'core': {
        'check_callback': CheckOperation,
        ...
    },
    'plugins': ['dnd']
})
.bind("move_node.jstree", function(e, data) {
    //data.node was dragged and dropped on data.parent
});

function CheckOperation(operation, node, parent, position, more) {
    if (operation == "move_node") {
        if (more && more.dnd && more.pos !== "i") { // disallow re-ordering
            return false;
        }
        ... more rules if needed ...
        else {
            return true;
        }
    }
    else if (operation == "copy_node") {
        return false;
    }
    return true;
} 
```

# apache - 服务器 IP 被索引，重定向到 HTAccess 中的域 + 路径

> ID：10486773
> 
> 赞同：1
> 
> 时间：2012-05-07T17:57:06.957
> 
> 标签：apache, .htaccess, redirect

谷歌正在索引我的服务器 IP 地址，导致重复内容问题。我想将 IP 地址重定向到域，但保留 URL 路径。我已经尝试过了，但是它将所有带有 IP 地址的 URL 重定向到主页：

```
RewriteCond %{HTTP_HOST} ^[0-9]+(\.[0-9]+){3}$ [OR]
RewriteCond %{HTTP_HOST} !^www\.ridepros\.com$ [OR]
RewriteCond %{HTTP_HOST} ^ridepros.com$ [NC]
RewriteRule ^(.*)$ http://www.ridepros.com/$1 [L,R=301] 
```

我更愿意将用户重定向到正确的 URL，而不是主页。我已经尝试过了，但是当我将它粘贴到 HTaccess 文件中时出现服务器 500 错误：

```
RewriteCond %{HTTP_HOST} !208\.113\.243\.229\(?<silo>[a-zA-Z_0-9]+\W*\S*)
RewriteRule (.*) http://www.ridepros.com/$1 
```

对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T19:45:02.483

仅供参考，我在网站管理员世界线程中找到了这个，它解决了我的问题..

```
RewriteCond %{HTTP_HOST} ^[0-9]+(\.[0-9]+){3} [OR]
RewriteCond %{HTTP_HOST} ^example\.com
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 
```

[http://www.webmasterworld.com/google/3390524.htm](http://www.webmasterworld.com/google/3390524.htm)

# asp.net - 大型数据集的 Linq to 实体性能问题

> ID：10486780
> 
> 赞同：0
> 
> 时间：2012-05-07T17:57:54.040
> 
> 标签：asp.net, entity-framework-4, linq-to-entities

我目前正在使用 EF4，在我的一个场景中，我正在使用连接并想要检索数据，但由于结果数据太多，EF4 甚至无法生成查询计划。作为一种解决方法，我尝试加载简单通用列表中的数据（使用从两个表中选择所有数据），然后尝试加入这两个列表，但我仍然遇到内存不足异常，因为一个表包含大约 100k 条记录，第二个表包含 50k 条记录，我想加入它们查询...但仍然没有使用 EF...请建议我解决此问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:03:37.383

我想不出任何*需要*包含 100k+ 记录的结果集的情况。这可能不是您想要的答案，但提高性能的最佳方法是减少您正在处理的记录数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-26T08:46:15.360

我们所做的是我们编写了自定义 SQL 并使用 Context.Database.SqlQuery(sql, params) 执行它

# ios - 为什么 NSBundle mainBundle 可以工作，而不是documentsDirectory？

> ID：10486782
> 
> 赞同：0
> 
> 时间：2012-05-07T17:57:58.423
> 
> 标签：ios, sqlite

我正在尝试与数据库建立连接，我发现当我将路径转到 NSBundle 时它是成功的，但当我尝试将路径放在我的应用程序的文档目录中时却没有。这是我的代码：

```
-(IBAction)setInput:(id)sender
{
    NSString *strStoreNumber;
    NSString *strRegNumber;

    strStoreNumber = StoreNumber.text;
    strRegNumber = RegNumber.text;

    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* documentsDirectory = [paths lastObject];
    NSString* databasePath = [documentsDirectory stringByAppendingPathComponent:@"tblStore.sqlite"];
//    NSString* databasePath = [[NSBundle mainBundle] pathForResource:@"tblStore" ofType:@"sqlite"];

    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) 
    {
        NSLog(@"Opened sqlite database at %@", databasePath);
        sqlite3_exec(database, "CREATE TABLE IF NOT EXISTS tblStore (ID INTEGER PRIMARY KEY AUTOINCREMENT, Message TEXT)", NULL, NULL, NULL);
        //...stuff
    } 
    else 
    {
        NSLog(@"Failed to open database at %@ with error %s", databasePath, sqlite3_errmsg(database));
        sqlite3_close (database);
    }
//    
    NSString *querystring;

    // create your statement
    querystring = [NSString stringWithFormat:@"SELECT strStore, strReg FROM tblStore WHERE strStore = %@ AND strReg = %@;", strStoreNumber, strRegNumber];  

    const char *sql = [querystring UTF8String];

    NSString *szStore = nil;
    NSString *szReg = nil;

    sqlite3_stmt *statement = nil;
    if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL)!=SQLITE_OK) //queryString = Statement
    {
        NSLog(@"sql problem occured with: %s", sql);
        NSLog(@"%s", sqlite3_errmsg(database));
    }
    else
    {
        // you could handle multiple rows here
        while (sqlite3_step(statement) == SQLITE_ROW) 
        {            
            szStore = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 0)];
            szReg = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 1)];
        }        

    }

    sqlite3_finalize(statement);

    lblStoreNumber.text = szStore;
    lblRegNumber.text = szReg; 
//   
} 
```

我注释掉了这一行：

```
NSString* databasePath = [[NSBundle mainBundle] pathForResource:@"tblStore" ofType:@"sqlite"]; 
```

当这一行没有被注释掉，并且它上面的行被注释掉时：

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString* documentsDirectory = [paths lastObject];

NSString* databasePath = [documentsDirectory stringByAppendingPathComponent:@"tblStore.sqlite"]; 
```

然后它工作正常。但是，如果这三行没有被注释掉（如 setInput 方法中所示，那么我会收到以下错误：

```
2012-05-07 13:44:29.511 CCoDBTry[1981:f803] Opened sqlite database at    /Users/Matt****/Library/Application Support/iPhone Simulator/5.1/Applications/5DB7A218-A0F6-  485F-B366-91FD2F9BC062/Documents/tblStore.sqlite
2012-05-07 13:44:29.545 CCoDBTry[1981:f803] sql problem occured with: SELECT strStore, strReg FROM tblStore WHERE strStore = 8053 AND strReg = 4;
2012-05-07 13:44:29.546 CCoDBTry[1981:f803] no such column: strStore 
```

请记住，当我使用 NSBundle 逻辑时，可以访问同一个数据库表并且工作得很好。我承认我不完全理解 NSBundle 和documentsDirectory 之间的区别，但我想我希望我的表存在于我的应用程序的文档中。我将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:15:51.827

`NSBundle`用于访问应用程序本身内的资源：即 YourApp.app 内的所有内容。这`documentsDirectory`是您的应用程序之外的一个位置——它位于“主目录”中，它是您的应用程序沙箱的一部分，类似于您在 Mac 上的用户主目录。

这些是不同的位置，因此使用一个在另一个的相同子路径中查找文件是行不通的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:07:57.173

@rickster 的意思是：

1.  如果您在 Xcode 中将 sqlite 数据库添加到您的项目中，则该数据库的文件将添加到您的应用程序包中。
2.  如果您在代码中创建数据库，该文件将（很可能）在您的文档目录中创建（但**肯定**不会在您的包中）。
3.  这两个位置是***完全***分开的。您的包是在编译您的应用程序时创建的，以后**无法**更改。您的文档目录是“沙盒”，允许您访问它；你可以在这里读/写/删除文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-10T07:41:50.013

从 NSBUndle 复制到 NSDocumentDirectory

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask,
                                                     YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"culinary-Info.sqlite"];
NSFileManager *fileManager = [NSFileManager defaultManager];
if(![fileManager fileExistsAtPath:path])
{
    NSString *bundle = [[NSBundle mainBundle] pathForResource:@"culinary-Info" ofType:@"sqlite"];
    [fileManager copyItemAtPath:bundle toPath:path error:nil];
} 
```

# spotify - Spotify 找不到我的应用

> ID：10486783
> 
> 赞同：0
> 
> 时间：2012-05-07T17:57:58.440
> 
> 标签：spotify

我创建了我的第一个 Spotify 应用程序。我将 manifest.json、cafeplaylist.js 和 index.html 放在我的 Windows 机器上的 users/tati/documents/cafeplaylist 中。从 Spotify（它知道我是一名开发人员，我有一个开发选项卡这一事实证明了这一点），我输入了 spotify:app:cafeplaylist。它找不到我的应用程序！

我也在我的 Mac 上试过这个，用相同的文件创建 tatianabecker/Spotify/cafeplaylist。它也找不到我的应用程序！

这3个文件可以在[https://github.com/realoptimal/socialmix的主文件中找到](https://github.com/realoptimal/socialmix)

沮丧，因为如果找不到，我什至无法编写我的第一个应用程序。有人建议这是因为我没有高级版。是这样，还是别的什么？

谢谢，

塔蒂亚娜

PS我看到其他人也问过类似的问题，但是通过将文件放在正确的文件夹中来解决他们的问题......我的问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:34:36.750

您的 github 链接不起作用，但也许您应该检查一下这个问题：[Spotify App Dead](https://stackoverflow.com/questions/10443734/spotify-app-dead)

您可能没有将 BundleIdentifier 和 BundleVersion 添加到您的清单文件中。查看我的[Manifest.json](https://github.com/mickvandijk/Subscribey/blob/master/manifest.json)文件，以获得正确的视图！

希望这对您有所帮助；）

# java - 我如何从 Swing 应用程序调用 GWT 方法

> ID：10486789
> 
> 赞同：0
> 
> 时间：2012-05-07T17:58:53.867
> 
> 标签：java, swing, gwt

我是 gwt 的初学者，我需要初始化 gwt 类或从 swing 类调用 gwt 方法。有可能吗？否则有什么程序可以做这些事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T00:44:36.273

GWT 代码被翻译成 JavaScript 并在用户的浏览器中运行。除了浏览器允许的（如 cookie）之外，它绝对无法访问用户机器中的代码或功能。Swing 是一个完全不同的桌面应用程序框架（尽管它确实启发了 GWT 的设计），因此这两个框架并不打算一起工作。

# javascript - 打开js弹出窗口并在另一个页面上检查它的状态

> ID：10486791
> 
> 赞同：1
> 
> 时间：2012-05-07T17:58:57.283
> 
> 标签：javascript, html, popup

**在 html 页面上使用 window.open() 打开一个弹出窗口**

```
pop=window.open('pops.html','mypop'); 
```

当我转到新页面时，如何检测此弹出窗口是否仍使用 java 脚本打开或关闭。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:03:15.797

您可以使用`window.opener.methodYouWantToCall()`在打开新窗口的窗口中调用方法来与打开的窗口对话并告诉它“我仍然打开”之类的内容。[你可以在这里](http://w3schools.com/jsref/prop_win_opener.asp)阅读更多。不过，您必须确保该方法存在于窗口中。这是一些如何处理它的伪代码：

```
my_window = window.open(...);
my_window.opener.document.onUnload = function(){
my_window.opener.document.onload = function(){
my_window.opener.theWindow(a variable) = my_window;
}
};

(in new page):
function check(){
if(theWindow != null){
if(!theWindow.closed){
    // handle
}
} else {
setTimeout("check()", 1000);
}
} 
```

# ruby-on-rails - Rails 路由和 HTTP 动词

> ID：10486793
> 
> 赞同：0
> 
> 时间：2012-05-07T17:59:10.527
> 
> 标签：ruby-on-rails, rails-routing, httpverbs

我的应用程序是一个锻炼计划程序。

客户通常在一天中的三个时间段之一进行锻炼，因此我提供了一个快速添加功能来安排早上、中午或晚上的锻炼。

我有代码工作，但我不认为我这样做是正确的。

我的路线如下：

```
match 'workouts/quick_add/:date/:timeslot' => "workouts#quick_add",
  :as => 'workout_quick_add' 
```

我通过这样的方式使用它：

```
<%= link_to 'Morning Workout', workout_quick_add_path(:date => day, :timeslot => 'morning') %> 
```

现在，如果请求通过 GET 传入，这可行，但根据 HTTP 协议方法定义，这似乎不正确。似乎 POST 或 PUT 是正确的，但如果我添加`:via => :post`或`:put`到路由，整个事情都会因路由错误而出错。

这里什么是正确的，实现这种功能的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:27:15.167

怎么样：

```
resources :workouts do
  collection do
    post :quick_add
  end
end 
```

并在参数中传递日期和时间段。

# erlang - Erlang 语法错误

> ID：10486798
> 
> 赞同：3
> 
> 时间：2012-05-07T17:59:24.117
> 
> 标签：erlang

当我尝试编译我的 erlang 脚本时，我不断收到此错误：

```
(master@WN7-18TL6M1.amer.dell.com)15> c(distribute).
distribute.erl:55: syntax error before:
distribute.erl:42: function get_completed/3 undefined
error 
```

这是我的来源：

```
get_completed(Current, Index, Count) ->
    if
        length(Current) >= Index ->
            {Count, length(Current)};
        true ->
            if 
                lists:nth(Index, Current) == 'timeout' ->
                    get_completed(Current, Index+1, Count);
                true ->
                    get_completed(Current, Index+1, Count+1)
            end
    end 
```

第 55 行是最后一个`end`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:09:24.377

您需要在最后一个结束之后用句点结束函数。

# javascript - 在 JavaScript 中使用闭包

> ID：10486800
> 
> 赞同：0
> 
> 时间：2012-05-07T17:59:33.803
> 
> 标签：javascript, jquery, closures

我有这个功能

```
function createSlidingGallery(){
    gallery_position = parseInt(jQuery(".imageWrapper.default").attr("rel"));
    gallery_position_min = 0;
    gallery_position_max = parseInt(jQuery("#galleryEl .sig_thumb a").size() - 1);
    var galleryWrapper = document.createElement("div");
    galleryWrapper.className = "sGalleryWrapper";
    for (var i = 0; i < gallery_position_max; i++) {
        var slide = document.createElement("div");
        slide.className = "slide slide"+(i);
        slide.setAttribute('rel', i);
        galleryWrapper.appendChild(slide);
    };
    jQuery(".imageWrapper.top").append(galleryWrapper);

//HERE COMES THE PROBLEM PART

    for (var i = 0; i < gallery_position_max; i++) {
        var position = i;

//THE CALLBACK ACTUALLY USES THE SAME CONTEXT FOR ALL PARTICULAR CALLS SO THAT THE POSITION VALUE HOLDS THE MAXIMUM VALUE IN ALL INSTANCES

        loadImage(position, false, function(index){
            console.log(index);
            jQuery(".slide"+position).css({
                'background': 'url('+backgroundImages[index].src+')'
            });

        });
    };
    hideLoadingDC();

} 
```

它应该做的是将图像异步加载到动态创建的元素中。它实际上创建了所有元素，并且还加载了图像。但是有一个名为 loadImage 的函数，它旨在预加载图像，然后保存该图像已经加载并适当缓存的信息。我使用回调函数调用它，该函数处理加载的图像并将其设置为适当元素的背景。因此我需要保存有关元素的信息（如指针或索引/位置）。现在我试图将它的索引传播到函数，但是因为回调函数在一段时间后被调用，所以位置变量已经有其他值（for循环实际上通过并且在回调的所有调用中它被设置为最大值)

我知道我可以更改 loadImage 函数并将位置添加为另一个属性，但我更喜欢任何其他解决方案。我不想改变 loadImage 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:05:00.067

您可以使用辅助函数为`position`变量创建新范围：

```
function makeGalleryCallback(position) {
   return function(index){
         console.log(index);
         jQuery(".slide"+position).css({
                'background': 'url('+backgroundImages[index].src+')'
             });
      };
}

function createSlidingGallery(){
    ...
    for (var i = 0; i < gallery_position_max; i++) {
       loadImage(i, false, makeGalleryCallback(i));
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:49:35.423

问题是所有回调函数都引用相同的 i 值，而不是在迭代时实际跟踪该值。因此，您需要创建一个新范围（闭包），为 i 的每个不同值创建一个新引用。

可以在 JS 中使用函数创建新范围。您的代码需要用匿名函数包装，并为 i 的每个不同值执行该函数。

```
for (var i = 0; i < gallery_position_max; i++) {
    var position = i;
    loadImage(position, false, (function(index){
      return function(){
        console.log(index);
        jQuery(".slide"+position).css({
            'background': 'url('+backgroundImages[index].src+')'
        });
      };})(i));
}; 
```

# javascript - 为什么全局对象中没有函数？

> ID：10486808
> 
> 赞同：6
> 
> 时间：2012-05-07T18:00:13.477
> 
> 标签：javascript, node.js

该脚本具有不同的行为，具体取决于它是从 node js shell 运行还是存储在传递给 node.js 的脚本文件中。

脚本：

```
var a = 1;
function b(){return 1;}
for(var k in global) console.log(k); 
```

shell 中的输出（只有最后 4 行与 IMO 相关。3 行中的每一行都按顺序复制/粘贴到在 Mac OS X 上的终端中运行的节点 REPL 实例中）：

```
ArrayBuffer
Int8Array
Uint8Array
Int16Array
Uint16Array
Int32Array
Uint32Array
Float32Array
Float64Array
DataView
global
process
GLOBAL
root
Buffer
setTimeout
setInterval
clearTimeout
clearInterval
console
module
require
a
_
b
k 
```

作为保存脚本运行时的输出（`node myscript.js`在 Mac OS X 上从 bash 调用）：

```
ArrayBuffer
Int8Array
Uint8Array
Int16Array
Uint16Array
Int32Array
Uint32Array
Float32Array
Float64Array
DataView
global
process
GLOBAL
root
Buffer
setTimeout
setInterval
clearTimeout
clearInterval
console 
```

为什么它们不同，为什么我的脚本看不到`a`and `b`in `global`？

编辑：添加附加语句 c = 2 更改了输出。c 在运行脚本的两种方法中都是可见的。但是，这仍然不能解释从 shell 运行脚本时 a 和 b 的存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:30:59.437

基本上这是因为 Node 的 REPL 使用“全局”上下文，因为它是“this”（您可以使用 进行测试`global === this`）。

但是，常规模块在它们自己的单独闭包中运行。所以你可以想象它是*这样*的：

```
function (module, exports, global) {
  // your module code
} 
```

因此，当您在其中定义 a`var`并将其作为脚本执行时，您实际上只是在函数闭包中定义它。但在 REPL 中，您是在全局级别定义 var。

# ios - iOS - 关于 setAlpha 的导入与前向声明

> ID：10486810
> 
> 赞同：8
> 
> 时间：2012-05-07T18:00:16.503
> 
> 标签：ios, xcode, class, import, forward-declaration

我正在尝试对我通过 IB 设置的对象做一些动画。我正在向我的 .h 添加前向声明，如下所示：

```
@class MySpecialClass; 
```

然后像这样设置一个属性：

```
@property (nonatomic, retain) IBOutlet MySpecialClass *specialClass; 
```

我希望能够隐藏`specialClass`using `setAlpha`，但是在尝试编译时我从 xcode 收到以下错误。

```
Receiver type 'MySpecialClass' for instance message is a forward declaration. 
```

我需要导入我的类而不是前向声明吗？如果我不需要，我不想导入任何不必要的东西。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-07T18:09:03.910

前向声明只是告诉编译器，“嘿，我知道我在声明你不认识的东西，但是当我说@MyClass 时，我保证我会在实现中#import 它”。

您使用前向声明来防止诸如循环包含之类的东西（MyClass 导入 YourClass 导入 MyClass ......），但您使用代码做出的“承诺”是稍后将 #import

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T18:04:56.283

你需要导入它。前向声明只是为了让编译器知道这个类的存在，但它不知道它的成员、方法、属性、大小......

# java - Servlet java：cookie 和 session 之间的区别

> ID：10486814
> 
> 赞同：-3
> 
> 时间：2012-05-07T18:00:38.267
> 
> 标签：java, servlets

> **可能重复：**
> [cookie 和会话之间的差异？](https://stackoverflow.com/questions/359434/differences-between-cookies-and-sessions)

在 servlet 中使用 cookie 或 session 有什么区别？什么时候最好使用 cookie 或会话信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:14:30.210

Cookie 是一个特殊的 HTTP 标头，可以包含多个键/值对。cookie 的特殊功能是客户端（通常是浏览器）能够存储它们。Cookie 有过期时间。Cookie 和所有其他 HTTP 标头一样，随 servlet 可以访问的 HTTP 请求一起发送。

其中一个 cookie 可以包含会话 ID。

会话是一个由会话 ID 标识的实体，可以包含有关当前客户端/服务器协商序列的信息。例如属性。

我希望这有帮助。有关更多信息，请尝试阅读[http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)，然后继续阅读有关 Java servlet API的信息

# c# - EF 4：仅基于视图中存在的字段更新模型

> ID：10486815
> 
> 赞同：0
> 
> 时间：2012-05-07T18:00:45.130
> 
> 标签：c#, asp.net-mvc, entity-framework

假设我有一个模型：

```
public class HashTable {
   public string sKey { get;set; }
   public string sValue { get:set; }
} 
```

然后我在视图中渲染它：

```
<div>Please enter the key/value pair:</div>
@Html.LabelFor(h => h.sKey, "Key");
@Html.TextBoxFor(h => h.sKey);
@Html.LabelFor(h => h.sValue, "Value");
@Html.TextBoxFor(h => h.sValue); 
```

然后我将它保存在控制器中：

```
db.HashTable.Add(themodel); 
```

然后我在一个视图中回忆它，但我只想更改值：

```
<div>Please enter the value:</div>
Key: @Model.sKey
@Html.LabelFor(h => h.sValue, "Value");
@Html.TextBoxFor(h => h.sValue, Model.sValue); 
```

然后我将其提交给控制器。问题是如果我这样做：

```
db.Entry(oldmodel).CurrentValues.SetValues(themodel); 
```

它使“key”字段为空，因为视图上没有它的元素。

这是一个非常复杂的系统的非常简单的示例（代码可能并不完全准确），其中某些表单字段可能会或可能不会根据工单的状态显示在视图中。我真正需要的是一种方法，这样如果表单字段没有显示在视图中，它就不会在数据库中更新。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:03:57.513

在表格中也包括您的密钥。这样当回发时，它将在模型/视图模型中可用。您可以为此使用 Html.HiddenFor 辅助方法。

```
<div>Please enter the value:</div>
Key: @Model.sKey
@Html.LabelFor(h => h.sValue);
@Html.TextBoxFor(h => h.sValue);
@Html.HiddenFor(x=>x.sKey) 
```

**编辑**：如果您不想在视图中显示这么多字段，但仍想使用有效的现有数据保存，我将在我的视图中拥有该条目的 ID（例如：ProductId）并使用该 ID 来构建现有的 Product 对象并将新更改应用于该对象并保存回来。像这样的东西

```
<div>Please enter the value:</div>
Key: @Model.sKey
@Html.LabelFor(h => h.ProductPrice);
@Html.TextBoxFor(h => ProductPrice);
@Html.HiddenFor(x=>x.ProductId) 
```

动作方法看起来像

```
[HttpPost]
public ActionResult Edit (ProductViewModel newModel)
{
  var oldProduct=repositary.GetProduct(newModel.ProductID);
  oldProduct.ProductPrice=newModel.ProductPrice;

  //Now save the oldProdcut

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:04:55.433

首先，您需要将主键呈现为隐藏元素。

```
<div>Please enter the value:</div> 
Key: @Model.sKey 
@Html.HiddenFor(h => h.sKey) 
@Html.LabelFor(h => h.sValue); 
@Html.TextBoxFor(h => h.sValue); 
```

然后`UpdateModel()`在控制器的 Edit 操作中使用该方法。[此帮助函数将值从表单集合复制到模型](http://msdn.microsoft.com/en-us/library/ee264031.aspx)。无需弄清楚哪些字段是可编辑的，`UpdateModel`这对您来说也是如此。

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Edit(int id, FormCollection formValues)
{
    HashTable hash = repository.GetHashTable(id);
    UpdateModel(hash);
    repository.Save();
    return RedirectToAction("Details", new { id = hash.DinnerID });
} 
```

# vb.net - 使用 System.DirectoryServices.Protocols 按可分辨名称获取用户

> ID：10486819
> 
> 赞同：0
> 
> 时间：2012-05-07T18:00:54.333
> 
> 标签：vb.net, directoryservices, oid

我有一个相当广泛的应用程序，它被构建为通过 OID 为多个 Web 应用程序提供 SSO。问题是我们已经看到一些用户在其中一个应用程序的角色上变得“孤立”。我编写了一个方法，该方法返回所有有权访问该角色的用户的专有名称。为了执行清理，我试图确保在上一步中返回的用户确实存在于 OID 中。在搜索用户或角色时，我一直在使用 System.DirectoryServices.Protocols.SearchRequest 类，但它不适用于可分辨名称。下面是我的方法。它已经更改了几次以尝试不同的方式使其工作。

```
 Public Function GetUserByDN(UserDN As String) As SearchResultEntry
        Dim searchString As String = String.Format("baseDN={0}", UserDN)
        Dim containerDN As String = Nothing
        If _extranet Then
            containerDN = "cn=users," & ConfigurationManager.AppSettings("Directory_ExternalDomain")
        Else
            containerDN = "cn=users," & ConfigurationManager.AppSettings("Directory_InternalDomain")
        End If

        Dim attributes(14) As String
        attributes(0) = DIRECTORY_UNIQUE_ID
        attributes(1) = DIRECTORY_FIRST_NAME
        attributes(2) = DIRECTORY_LAST_NAME
        attributes(3) = DIRECTORY_EMAIL_ADDRESS
        attributes(4) = DIRECTORY_TELEPHONE
        attributes(5) = DIRECTORY_STREET
        attributes(6) = DIRECTORY_CITY
        attributes(7) = DIRECTORY_STATE
        attributes(8) = DIRECTORY_ZIP
        attributes(9) = DIRECTORY_CUSTOMER_NAME
        attributes(10) = DIRECTORY_ENABLED
        attributes(11) = DIRECTORY_GIVEN_NAME   ' this is the first name for a domain user
        attributes(12) = DIRECTORY_KBIT_INDICATOR
        attributes(13) = DIRECTORY_REQUESTING_BRANCH
        attributes(14) = DIRECTORY_PWD_MUST_CHANGE

        'Me.Connection.Bind()
        Me.Bind()

        Dim myRequest As New System.DirectoryServices.Protocols.SearchRequest(containerDN, UserDN, SearchScope.Base, attributes)
        Dim myResponse As SearchResponse = Me.Connection.SendRequest(myRequest)
        Dim results As SearchResultEntryCollection = myResponse.Entries

        If results.Count >= 1 Then
            Return results(0)
        Else
            Return Nothing
        End If
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:35:54.223

它进行了大量研究并提出其他问题，在哪里可以找到答案。事实证明，我不应该查看用户 OU 并搜索用户的 DN，而应该只查看用户的 DN 并执行一个简单的 LDAP 查询。这是我的最终解决方案。我希望这对社区有所帮助。

```
 Public Function GetUserByDN(UserDN As String) As SearchResultEntry
        Dim ldapFilter As String = "(objectClass=person)"

        Dim attributes(14) As String
        attributes(0) = DIRECTORY_UNIQUE_ID
        attributes(1) = DIRECTORY_FIRST_NAME
        attributes(2) = DIRECTORY_LAST_NAME
        attributes(3) = DIRECTORY_EMAIL_ADDRESS
        attributes(4) = DIRECTORY_TELEPHONE
        attributes(5) = DIRECTORY_STREET
        attributes(6) = DIRECTORY_CITY
        attributes(7) = DIRECTORY_STATE
        attributes(8) = DIRECTORY_ZIP
        attributes(9) = DIRECTORY_CUSTOMER_NAME
        attributes(10) = DIRECTORY_ENABLED
        attributes(11) = DIRECTORY_GIVEN_NAME
        attributes(12) = DIRECTORY_KBIT_INDICATOR
        attributes(13) = DIRECTORY_REQUESTING_BRANCH
        attributes(14) = DIRECTORY_PWD_MUST_CHANGE

        Me.Bind()

        Dim myRequest As New SearchRequest(UserDN, ldapFilter, SearchScope.Base, attributes)
        Dim myResponse As SearchResponse = Me.Connection.SendRequest(myRequest)

        If myResponse.Entries.Count >= 1 Then
            Return myResponse.Entries(0)
        Else
            Return Nothing
        End If
    End Function 
```

# c# - 使用适用于 .NET 的 AWS S3 开发工具包从 Amazon S3 并行下载批处理文件

> ID：10486822
> 
> 赞同：13
> 
> 时间：2012-05-07T18:01:00.323
> 
> 标签：c#, .net, c#-4.0, amazon-s3, amazon-web-services

**问题：**我想使用他们的 .NET SDK 从 AWS S3 并行下载 100 个文件。下载的内容应该存储在 100 个内存流中（文件足够小，我可以从那里获取）。我对 Task、IAsyncResult、Parallel.* 和 .NET 4.0 中的其他不同方法感到困惑。

**如果我尝试自己解决问题**，我会想到类似这样的伪代码：（编辑以向某些变量添加类型）

```
using Amazon;
using Amazon.S3;
using Amazon.S3.Model;

AmazonS3 _s3 = ...;
IEnumerable<GetObjectRequest> requestObjects = ...;

// Prepare to launch requests
var asyncRequests = from rq in requestObjects 
    select _s3.BeginGetObject(rq,null,null);

// Launch requests
var asyncRequestsLaunched = asyncRequests.ToList();

// Prepare to finish requests
var responses = from rq in asyncRequestsLaunched 
    select _s3.EndGetRequest(rq);

// Finish requests
var actualResponses = responses.ToList();

// Fetch data
var data = actualResponses.Select(rp => {
    var ms = new MemoryStream(); 
    rp.ResponseStream.CopyTo(ms); 
    return ms;
}); 
```

此代码并行启动 100 个请求，这很好。但是，有两个问题：

1.  最后一条语句将串行下载文件，而不是并行下载。流中似乎没有 BeginCopyTo()/EndCopyTo() 方法...
2.  在所有请求都响应之前，前面的语句不会放开。换句话说，在所有文件都开始之前，所有文件都不会开始下载。

所以在这里我开始认为我走错了路......

帮助？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-07T19:19:03.690

如果您将操作分解为一个异步处理*一个*请求然后调用它 100 次的方法，这可能会更容易。

首先，让我们确定您想要的最终结果。由于您将使用的是 a[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)这意味着您将希望[`Task<MemoryStream>`](http://msdn.microsoft.com/en-us/library/dd321424.aspx)从您的方法中返回 a 。签名将如下所示：

```
static Task<MemoryStream> GetMemoryStreamAsync(AmazonS3 s3, 
    GetObjectRequest request) 
```

因为您的`AmazonS3`对象实现了[异步设计模式](http://msdn.microsoft.com/en-us/library/ms228963.aspx)，所以您可以使用类上的[`FromAsync`方法](http://msdn.microsoft.com/en-us/library/dd321311.aspx)从实现异步设计模式的[`TaskFactory`类](http://msdn.microsoft.com/en-us/library/dd321401.aspx)中生成一个`Task<T>`，如下所示：

```
static Task<MemoryStream> GetMemoryStreamAsync(AmazonS3 s3, 
    GetObjectRequest request)
{
    Task<GetObjectResponse> response = 
        Task.Factory.FromAsync<GetObjectRequest,GetObjectResponse>(
            s3.BeginGetObject, s3.EndGetObject, request, null);

    // But what goes here? 
```

所以你已经在一个好地方，你有一个`Task<T>`你可以等待或在呼叫完成时得到回调的地方。但是，您需要以某种方式将`GetObjectResponse`调用返回的 to`Task<GetObjectResponse>`转换为`MemoryStream`.

为此，您希望在类上使用该[`ContinueWith`方法](http://msdn.microsoft.com/en-us/library/dd321326.aspx)`Task<T>`。将其视为[类上](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)[`Select`方法](http://msdn.microsoft.com/en-us/library/bb548891.aspx)的异步版本，它只是对另一个的投影，除了每次调用时，您都可能创建一个运行*该*部分代码的新任务。[`Enumerable`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)`Task<T>``ContinueWith`

 *这样，您的方法如下所示：

```
static Task<MemoryStream> GetMemoryStreamAsync(AmazonS3 s3, 
    GetObjectRequest request)
{
    // Start the task of downloading.
    Task<GetObjectResponse> response = 
        Task.Factory.FromAsync<GetObjectRequest,GetObjectResponse>(
            s3.BeginGetObject, s3.EndGetObject, request, null
        );

    // Translate.
    Task<MemoryStream> translation = response.ContinueWith(t => {
        using (Task<GetObjectResponse> resp = t ){
            var ms = new MemoryStream(); 
            t.Result.ResponseStream.CopyTo(ms); 
            return ms;
        } 
    });

    // Return the full task chain.
    return translation;
} 
```

请注意，在上面您可能会调用 pass 的重载[，`ContinueWith`](http://msdn.microsoft.com/en-us/library/dd321561.aspx)[`TaskContinuationOptions.ExecuteSynchronously`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcontinuationoptions.aspx)因为看起来您正在做最少的工作（我不知道，响应可能是*巨大的*）。如果您正在做的工作非常少，而为了完成工作而开始一项新任务是有害的，您应该通过`TaskContinuationOptions.ExecuteSynchronously`，这样您就不会浪费时间为最少的操作创建新任务。

现在您有了可以将*一个*请求转换为 的方法`Task<MemoryStream>`，创建一个可以处理*任意*数量的请求的包装器很简单：

```
static Task<MemoryStream>[] GetMemoryStreamsAsync(AmazonS3 s3,
    IEnumerable<GetObjectRequest> requests)
{
    // Just call Select on the requests, passing our translation into
    // a Task<MemoryStream>.
    // Also, materialize here, so that the tasks are "hot" when
    // returned.
    return requests.Select(r => GetMemoryStreamAsync(s3, r)).
        ToArray();
} 
```

在上面，您只需获取一系列`GetObjectRequest`实例，它将返回一个`Task<MemoryStream>`. 它返回一个物化序列这一事实很重要。如果您在返回之前未将其具体化，则在迭代序列之前不会创建任务。

当然，如果您想要这种行为，那么无论如何，只需删除对 的调用`.ToArray()`，让方法返回`IEnumerable<Task<MemoryStream>>`，然后在您遍历任务时发出请求。

从那里，您可以一次处理它们（使用循环中的[`Task.WaitAny`方法](http://msdn.microsoft.com/en-us/library/dd270672.aspx)）或等待所有它们完成（通过调用[`Task.WaitAll`方法](http://msdn.microsoft.com/en-us/library/dd270695.aspx)）。后者的一个例子是：

```
static IList<MemoryStream> GetMemoryStreams(AmazonS3 s3, 
    IEnumerable<GetObjectRequest> requests)
{
    Task<MemoryStream>[] tasks = GetMemoryStreamsAsync(s3, requests);
    Task.WaitAll(tasks);
    return tasks.Select(t => t.Result).ToList();
} 
```

另外，应该提到的是，这非常适合[Reactive Extensions 框架](http://msdn.microsoft.com/en-us/data/gg577609)，因为这*非常*适合[`IObservable<T>`](http://msdn.microsoft.com/en-us/library/dd990377.aspx)实现。*

# git - 过去的文件配置在哪里〜/ .ssh？

> ID：10486826
> 
> 赞同：0
> 
> 时间：2012-05-07T18:01:22.843
> 
> 标签：git, ssh, windows-xp, config

我需要配置 Git 以使用 SSH，但我在过去的 ~/.ssh 中找不到配置文件。我怎么能创建这个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:26:40.897

按照这样的教程：http:
[//mrsimonelliott.com/blog/setting-git-and-github-windows-xp](http://mrsimonelliott.com/blog/setting-git-and-github-windows-xp)

我怀疑您没有使用 GIT bash，因为`~/`它不是正常的 Windows 路径，您可能正试图从命令提示符处执行此操作。`~/`表示 POSIX 系统上的当前用户主目录。

# solr - Apache solr 转换为 xml

> ID：10486832
> 
> 赞同：0
> 
> 时间：2012-05-07T18:01:57.383
> 
> 标签：solr

我正在学习如何使用 solr，但我对如何将 .txt 格式的书上传到 solr 感到震惊在一步一步的过程中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:49:39.547

为了避免自己创建 xml 格式的输入文档，您可以使用 tika 请求处理程序（它从各种格式中提取文本，包括纯文本），请参见[此处](http://wiki.apache.org/solr/ExtractingRequestHandler)

# javascript - 使用自定义标志图标实现 Google 翻译

> ID：10486833
> 
> 赞同：24
> 
> 时间：2012-05-07T18:02:04.210
> 
> 标签：javascript, google-translate

目前，我使用的是简单的谷歌翻译下拉菜单：http: [//translate.google.com/translate_tools](http://translate.google.com/translate_tools)

我还希望能够单击我拥有的一些标志图标并触发由谷歌翻译小部件中基于文本的链接调用的相同 javascript 调用。

有人对如何实现这一点有想法吗？我不知道如何使点击标志启动与点击谷歌翻译文本链接相同的行为。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-19T14:34:31.943

为这个问题找到解决方案很有趣！

```
<!-- Use CSS to replace link text with flag icons -->
<ul class="translation-links">
  <li><a href="#" class="spanish" data-lang="Spanish">Spanish</a></li>
  <li><a href="#" class="german" data-lang="German">German</a></li>
</ul>

<!-- Code provided by Google -->
<div id="google_translate_element"></div>
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false}, 'google_translate_element');
  }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" type="text/javascript"></script>

<!-- Flag click handler -->
<script type="text/javascript">
    $('.translation-links a').click(function() {
      var lang = $(this).data('lang');
      var $frame = $('.goog-te-menu-frame:first');
      if (!$frame.size()) {
        alert("Error: Could not find Google translate frame.");
        return false;
      }
      $frame.contents().find('.goog-te-menu2-item span.text:contains('+lang+')').get(0).click();
      return false;
    });
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-21T15:38:52.967

@mogelbrod 代码并不总是有效，所以我稍微修改了一下。

如果用户登录 Google 帐户，Google 将检测它的语言并自动翻译语言文本，因此您将无法在所需元素上触发事件，因为 data-lang 属性将不正确！

未登录 Google 帐户的用户和美国/英国用户将拥有此功能。 ![zh](../Images/c1ab2966032cce00b1aa1bba29d7af0f.png)

例如；克罗地亚用户会有这个。

![小时](../Images/946a58d122ba41ffc9bc777e7db7bf15.png)

在这种情况下，最好映射语言顺序。例如从上面，那将是

> 0 - 英语
> 
> 1 - 法语
> 
> 2 - 德语
> 
> 3 - 意大利语

HTML：

注意 data-placement 属性（您可以更改元素顺序，但保留如上所示的位置）。

```
<div class="translation-icons" style="visibility:hidden">
    <a href="#" class="eng" data-placement="0">eng icon</a>
    <a href="#" class="fra" data-placement="1">fra icon</a>
    <a href="#" class="ger" data-placement="2">ger icon</a>
    <a href="#" class="ita" data-placement="3">ita icon</a>
</div> 
```

JS：我不得不更改查找选择器。请注意，当用户选择语言时，#google_translate_element div 中不再有“选择语言”元素，所以我也必须处理它。

在加载所有脚本（谷歌翻译）之前不要显示图标也很好。

```
$(window).load(function () {

    $('.translation-icons').css('visibility', 'visible');

        $('.translation-icons a').click(function(e) {
            e.preventDefault();
            var placement = $(this).data('placement');
            var lang_num = $('.translation-icons a').length;
            var $frame = $('.goog-te-menu-frame:first');

            if (!$frame.size()) {
                alert("Error: Could not find Google translate frame.");
                return false;
            }

            var langs = $('.goog-te-menu-frame:first').contents().find('a span.text');

            if(langs.length != lang_num) placement = placement+1;

            langs.eq(placement).click();
            return false;
        });
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T05:28:15.037

@mogelbrod，我在上面使用了您的代码，它在 Chrome 上运行良好，在 Firefox 和 Safari 上尝试过，但没有用。span.click 事件不会触发谷歌翻译的事件处理程序。

我想出了另一种方法，我只想通过使用 google select 而不是基于 iframe 的插件来分享。

```
<!-- Use CSS to replace link text with flag icons -->
<ul class="translation-links">
  <li><a href="#" class="spanish" data-lang="Spanish">Spanish</a></li>
  <li><a href="#" class="german" data-lang="German">German</a></li>
</ul>

<!-- Code provided by Google -->
<div id="google_translate_element"></div>
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en', autoDisplay: false}, 'google_translate_element'); //remove the layout
  }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" type="text/javascript"></script>

<script type="text/javascript">
    function triggerHtmlEvent(element, eventName) {
var event;
if(document.createEvent) {
    event = document.createEvent('HTMLEvents');
    event.initEvent(eventName, true, true);
    element.dispatchEvent(event);
} else {
    event = document.createEventObject();
    event.eventType = eventName;
    element.fireEvent('on' + event.eventType, event);
}
}
            <!-- Flag click handler -->
        $('.translation-links a').click(function(e) {
  e.preventDefault();
  var lang = $(this).data('lang');
  $('#google_translate_element select option').each(function(){
    if($(this).text().indexOf(lang) > -1) {
        $(this).parent().val($(this).val());
        var container = document.getElementById('google_translate_element');
        var select = container.getElementsByTagName('select')[0];
        triggerHtmlEvent(select, 'change');
    }
});
});

        </script> 
```

测试：Chrome (win & Mac), Safari(Win & Mac), FireFox (win) 和 IE8

顺便说一句，我在Firefox和Safari上遇到的span.click事件的问题可以通过使用上面的triggerHtmlEvent函数来解决，不过我还没有尝试过。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-11T21:34:09.280

*现在不需要编写脚本了！*

将标签添加`#googtrans(TO_LANG_CODE)`到您各自的标志链接到的地址。

这`TO_LANG_CODE`是您想要的语言的语言代码。这假设该页面在问题中使用谷歌网站翻译，并且可以自动识别您的原始语言。

识别原始语言有助于避免错误，为此请使用表格`#googtrans(FROM_LANG_CODE|TO_LANG_CODE)`。

示例： http://nykopingsguiden.se/#googtrans(se|
[es)](http://nykopingsguiden.se/#googtrans%28se|es%29)将瑞典语页面
[http://nykopingsguiden.se](http://nykopingsguiden.se)从瑞典语翻译成西班牙语。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-03T07:02:48.383

使用自定义标志图标实现谷歌翻译

参考[这个链接](http://web.archive.org/web/20200108040924/http://www.freshcodehub.com/Article/26/implementing-google-translate-with-custom-flag-icons)

![在此处输入图像描述](../Images/2c7dfd50a9dba6d15b605397523c7114.png)

这个自定义列表的好处是我们可以隐藏谷歌翻译小部件并使用所有语言来翻译网页。

```
<div id="google_translate_element" style="display: none">
    </div>
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({ pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false }, 'google_translate_element');
        }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
        type="text/javascript"></script>
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script>
        function translate(lang) {

            var $frame = $('.goog-te-menu-frame:first');
            if (!$frame.size()) {
                alert("Error: Could not find Google translate frame.");
                return false;
            }
            $frame.contents().find('.goog-te-menu2-item span.text:contains(' + lang + ')').get(0).click();
            return false;
        }
    </script>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-24T10:55:37.560

我认为这个 jsfiddle 会帮助你：[https ://jsfiddle.net/solodev/0stLrpqg/](https://jsfiddle.net/solodev/0stLrpqg/)

```
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.FloatPosition.TOP_LEFT}, 'google_translate_element');
}

function triggerHtmlEvent(element, eventName) {
  var event;
  if (document.createEvent) {
    event = document.createEvent('HTMLEvents');
    event.initEvent(eventName, true, true);
    element.dispatchEvent(event);
  } else {
    event = document.createEventObject();
    event.eventType = eventName;
    element.fireEvent('on' + event.eventType, event);
  }
}

jQuery('.lang-select').click(function() {
  var theLang = jQuery(this).attr('data-lang');
  jQuery('.goog-te-combo').val(theLang);

  //alert(jQuery(this).attr('href'));
  window.location = jQuery(this).attr('href');
  location.reload();

}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-20T12:00:16.033

使用以下代码排序的默认语言问题

```
if(lang!="English"){
        $frame.contents().find('.goog-te-menu2-item span.text:contains('+lang+')').get(0).click();
    }else{
        console.log($frame2.contents().find('.goog-te-banner .goog-te-button button').get(0));
        $frame2.contents().find('.goog-te-banner .goog-te-button button').get(1).click();
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-14T15:50:38.423

要实现一个完整的后端解决方案（在包含*translate.js*之前），您只需创建一个 php 文件，其中包含

```
<?php setcookie('googtrans', '/en'); header('location:index.html')?> 
```

如果您希望您的页面使用西班牙语，您只需添加其他 php 文件，例如：

```
<?php setcookie('googtrans', '/en/es'); header('location:index.html')?> 
```

最后将此文件链接到任何“a”标签

```
<a href="defaultLang.php"></a> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-15T05:53:19.920

这是对 Boris Samardžija 解决方案的修复，因为只要访问者语言中的语言名称导致它们的顺序不同，它就会失败。

首先，在图标的某些属性中具有正确的语言代码。例如 `<a href="#" data-lang="German" data-class="de">`。然后，确保您将有可用的谷歌翻译元素，例如：

```
<script type="text/javascript">
var tis;
function googleTranslateElementInit() {
    tis = new google.translate.TranslateElement({defaultLanguage: 'en', pageLanguage: 'en', includedLanguages: 'en,es,it,de,fr', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false}, 'google_translate_element');
}
</script> 
```

`sl`这允许您通过 google 元素的 property的属性找到要翻译成访问者语言的语言名称`C`，这是语言代码到名称的映射：

```
$(window).load(function () {    
    $('.translation-links a').click(function(e) {
        e.preventDefault();
        var $frame = $('.goog-te-menu-frame:first');

        if (!$frame.size()) {
            alert("Error: Could not find Google translate frame.");
            return false;
        }

        var codes_names = tis.C.sl;
        var selected_lang = codes_names[$(this).data('class')];

        $('.goog-te-menu-frame:first').contents().find('a span.text:contains(' + selected_lang + ')').click();

        return false;
    });
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-17T12:39:46.690

我也在努力解决这个问题 - 使标志可点击并隐藏 gtranslate 选择菜单。谷歌可能会不时改变事情，所以上面的代码对我不起作用......认为他们给我带来了好主意，最后是解决方案。

1.  映射语言。选择您需要的语言，并按照它们在 gtranslate 下拉菜单中显示的顺序显示良好 - 标志链接应该具有相同的顺序。这很重要！

2.  在函数证明 bu google 函数 googleTranslateElementInit() 中，添加 MultilanguagePage: true 参数。我还注释掉了默认语言和页面语言......出于某种原因，这有效......

    ```
     //load the script of google  
    <script src="http://translate.google.com/translate_a/element.js?    cb=googleTranslateElementInit" type="text/javascript"></script>
    <script>

    function googleTranslateElementInit() {
    new google.translate.TranslateElement({
    //defaultLanguage: 'en', 
    //pageLanguage: 'en', 
    includedLanguages: 'de,nl,en,es,it,fr', 
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE, 
    autoDisplay: false,
    multilanguagePage: true}, 'google_translate_element')
    };

    //this one I need because of the first menu with "select the language" item,              after the first click on the language it disappears 
    var clickCount = 0;

    $(window).load(function () {

        $('.translation-icons a').click(function(e) {
        e.preventDefault();

        var $frame = $('.goog-te-menu-frame:first');

        if (!$frame.size()) {
            alert("Error: Could not find Google translate frame.");
            return false;
            }

         //find the a links element inside the gtranlate first frame
        var langs = $('.goog-te-menu-frame:first').contents().find('.goog-te-menu2 a');

         //the number of the language in flag-elements
        var placement = $(this).data('placement');

     //this again I need to adjust the mapping numbers of the languages in the flag elements        
        if (clickCount == 0){
            placement = $(this).data('placement')+1;
            clickCount++;
            }
        //and finaly imitate click on the gtranslate element which is the same as the number of the language in flag link
        langs.eq(placement).find('span.text').click();
        return false;

    });
    }); 
    ```

最后是“标志元素”的 html。（现在它只是里面的文本，但如果你愿意，你可以放任何 img 那里）别忘了创建谷歌翻译元素！

```
 <!-- Code provided by Google -->
       <div id="google_translate_element"></div>

    <div class="translation-icons">
       <a href="#" class="nl" data-placement="0">nl</a>
       <a href="#" class="de" data-placement="1">de</a>
       <a href="#" class="en" data-placement="2">en</a>
      <a href="#" class="fr" data-placement="3">fr</a>
      <a href="#" class="it" data-placement="4">it</a>
      <a href="#" class="sp" data-placement="5">es</a>
   </div> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-02-10T18:05:38.270

我根据谷歌翻译的“选择”版本制作了自己的解决方案：

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'pl', includedLanguages: 'de,en,pl', autoDisplay: false}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

我在 PHP 上使用了 setcookie()：

```
if ($_GET['lang']) {
  setcookie("googtrans", "", time() - 3600);
  $domena = "." . $_SERVER['HTTP_HOST'];
  setcookie("googtrans", '/pl/' . $_GET['lang'], time()+(3600*24), '/' , $domena);
} 
```

我不知道为什么谷歌脚本会制作 2 个相同的 cookie，名称相同，但域不同：

[看看 EditThisCookie 的屏幕](http://i.stack.imgur.com/7O1rY.png)

（$_COOKIE[] 只看到一个 cookie）

所以这段代码需要用“。”来命名域。在开始时，首先删除“googtrans”cookie（不删除就不起作用；/）。

这是我的 html 图标：

```
wybierz język:
<a href="?lang=pl"><img src="imgcss/pl.png" alt="" /></a>
<a href="?lang=en"><img src="imgcss/en.png" alt="" /></a>
<a href="?lang=de"><img src="imgcss/de.png" alt="" /></a> 
```

并隐藏生成的默认谷歌选择列表，只需在 css 代码中添加一行：

```
#google_translate_element {display: none; } 
```

请记住在使用上面的代码之前更改页面语言值；）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-06-12T09:54:08.087

我有运行代码。您可以在其中使用您的标志或 HTML 创建自定义选择框。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Google Translation</title>
</head>
<body>
    <form id="form1" runat="server">
    <div id="google_translate_element" style="display: none">
    </div>
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({ pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false }, 'google_translate_element');
        }
    </script>
    <script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
        type="text/javascript"></script>
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script>
        function translateLanguage(lang) {
           console.log(lang);
           googleTranslateElementInit();
            var $frame = $('.goog-te-menu-frame:first');
            console.log($frame);
            if (!$frame.size()) {
                alert("Error: Could not find Google translate frame.");
                return false;
            }
            $frame.contents().find('.goog-te-menu2-item span.text:contains(' + lang + ')').get(0).click();
            return false;
        }
    </script>
       <select id="newdemo" onchange="translateLanguage(this.value);">
        <option><a href="javascript:;" val="German"><span>German </span>
            <img src="img/flags/germany_flag.jpg" alt="" /></a> </option>
        <option><a href="javascript:;" val="Italian"><span>Italian
        </span>
            <img src="img/flags/italy_flag.jpg" alt="" /></a> </option>
        <option><a href="javascript:;" val="Hindi"><span>Hindi </span>
            <img src="img/flags/india_flag.png" alt="" /></a> </option>
        <option><a href="javascript:;" val="French"><span>French </span>
            <img src="img/flags/french_flag.jpg" alt="" /></a> </option>
        <option><a href="javascript:;" val="Spanish"><span>Spanish
        </span>
            <img src="img/flags/spain_flag.jpg" alt="" /></a> </option>
        <option><a href="javascript:;" val="Russian"><span>Russian
        </span>
            <img src="img/flags/russia_flag.jpg" alt="" /></a> </option>
    </select>
    <div>
        In this article we explain how to translate the web page into different language
        using google translator. We create a custom country list with flag and call the
        google translator code using javascript custom code. The benifit of this custom
        list is than we can hide the google translator widget and use all the language to
        translate the web page.
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-04-05T16:48:30.860

我一直在研究很多，最后这对我来说是正确的：

```
<div id="google_translate_element"> </div>
<div class="menu-traslate-header">
<ul>
  <li><a href="#googtrans/es">Español</a></li>
  <li><a href="#googtrans/zh-CN">汉语</a></li>
  <li><a href="#googtrans/vi">Việt</a></li>
  <li><a href="#googtrans/ru">Русский</a></li>
  <li><a href="#googtrans/sq">SHQIP</a></li>
  <li><a href="#googtrans/km">ខ្មែរ&lt;/a></li>
  <li><a href="#googtrans/fr">Français</a></li>
  <li><a href="#googtrans/ar">عربي</a></li>
</ul>
</div>
 <script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en', 
    includedLanguages: 'ar,en,es,fr,km,ru,sq,vi,zh-CN', 
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE, 
    multilanguagePage: true, 
    gaTrack: true, 
  }, 'google_translate_element');
}
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
 <script type="text/javascript">
jQuery(document).ready(function($) {
  $('.menu-traslate-header ul li a').click(function(event) {
      window.location = $(this).attr('href');
      location.reload();
  });
});
</script> 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2018-12-26T12:18:46.537

```
<script type="text/javascript" src="jquery-1.8.2.min.js"></script>

 <li><a href="#googtrans(en|en)" class="lang-en lang-select" data-lang="en"><img src="English.png" alt="USA"></a></li>
 <li><a href="#googtrans(en|fr)" class="lang-es lang-select" data-lang="fr"><img src="/French.png" alt="FRANCE"></a></li>
<li><a href="#googtrans(en|de)" class="lang-es lang-select" data-lang="de"><img src="German.png" alt="Germany"></a></li>

<li><a href="#googtrans(en|it)" class="lang-es lang-select" data-lang="it"><img src="Italian.png" alt="Italy"></a></li>
<li><a href="#googtrans(en|ja)" class="lang-es lang-select" data-lang="ja"><img src="Japanese.png" alt="JAPAN"></a></li>
<div class="container">
    <h1>Use Google Translate with your Website</h1>
</div>

<script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.FloatPosition.TOP_LEFT}, 'google_translate_element');
    }

    function triggerHtmlEvent(element, eventName) {
      var event;
      if (document.createEvent) {
        event = document.createEvent('HTMLEvents');
        event.initEvent(eventName, true, true);
        element.dispatchEvent(event);
      } else {
        event = document.createEventObject();
        event.eventType = eventName;
        element.fireEvent('on' + event.eventType, event);
      }
    }

    jQuery('.lang-select').click(function() {
      var theLang = jQuery(this).attr('data-lang');
      jQuery('.goog-te-combo').val(theLang);

      //alert(jQuery(this).attr('href'));
      window.location = jQuery(this).attr('href');
      location.reload();

    });
</script>
<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

# c++ - 如何预留多维向量？

> ID：10486840
> 
> 赞同：3
> 
> 时间：2012-05-07T18:02:21.460
> 
> 标签：c++, vector

可以说我有向量的向量

```
vector< vector<int> > bigTable;

bigTable.reserve(5); 
```

澄清我对调整大小和保留的理解。

将 push_back 与向量一起使用时，每次使用时都必须分配内存。所以我的目标是在一边设置一组内存空间，这样它就会最便宜。

因此，储备是否有助于实现上述目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:06:03.590

您不必每次调用时都分配内存`push_back`。向量以给定的容量开始，并且仅在原始容量用完时才分配额外的容量，通常是通过将先前的容量增加一倍。仅当您确定需要额外容量时才应预订。您可以检查使用[容量](http://en.cppreference.com/w/cpp/container/vector/capacity)成员开始时的容量。所以，是的，致电`reserve`可以提供帮助，但前提是您从一开始就知道您确实需要额外的容量。但是您也可以相信向量在需要时增加其容量。

在我的特定平台上，当我用 5 个元素初始化一个向量时`Foo`，它的容量为 5。当我添加一个新元素时，容量跳到 10。这不是标准规定的，原始容量可能远远超过 5 .

```
struct Foo {
  long long n;
};

int main() {

  std::vector<Foo> f(5);
  std::cout << f.capacity() << "\n";
  f.push_back(Foo());
  std::cout << f.capacity() << "\n";

} 
```

# ruby-on-rails - 每个环境不同的 ENV['RAILS_RELATIVE_URL_ROOT']

> ID：10486843
> 
> 赞同：1
> 
> 时间：2012-05-07T18:02:44.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3, thin

举个简单的例子，假设我想将我的开发和测试环境部署到不同的子文件夹。例如[http://www.example.com/dev](http://www.example.com/dev)和[http://www.example.com/test](http://www.example.com/test)。

我正在使用 Thin，因此我可以通过以下方式轻松设置相对路径前缀：

```
thin start --prefix /dev -e development
thin start --prefix /test -e test 
```

但是，我的路径助手仍然会生成不包含路径前缀的路径。所以我最终得到了`/images/logo.jpg`两种环境类似的东西。我想以`/dev/images/logo.jpg`and结尾`/test/images/logo.jpg`。

我可以在我的`config/environment.rb`

```
ENV['RAILS_RELATIVE_URL_ROOT'] = "/dev" 
```

但这显然不会动态地将相对根与环境相关联。

# php - 上传多次调用 CodeIgniter 控制器

> ID：10486845
> 
> 赞同：0
> 
> 时间：2012-05-07T18:02:56.827
> 
> 标签：php, javascript, codeigniter, uploadify

第一次来这里，希望不是最后一次。

我目前正在开发基于 CodeIgniter 的应用程序。一切都很好，直到我意识到（通过使用 CI 日志记录）页面视图中使用的 Uploadify 脚本多次调用控制器。

为了更好地解释......

我的新闻控制器有一个包含此代码的编辑

```
public function edit(){
    $id = (int)$this->uri->segment(4);

    if (empty($id)){
        $this->session->set_flashdata('error', "ID can't be empty");
        redirect('admin/news');
    }

    //article data called here and stored in $data
    $data = $this->news_model->fetch_article($id);

    $data['title'] = "News";
    $data['news_links'] = $this->news_model->get_news_links();
    $data['form_url'] = "admin/edit";
    $data['available_pages'] = $this->news_model->get_article_pages();

    $data['css'] = "/css/extra/uploadify.css";
    $data['js'] = "/js/extra/jquery.uploadify-3.1.min.js";
    $data['edit'] = true;

    //set uploadify key
    $data['key'] = md5(time() . $this->session->userdata('session_id'));
    // a unique key is created, then stored in database
    // the key is then passed to the uploadify script
    // when the upload is being done it is checked with the one in the database
    // if the two match files are uploaded. This is a workaround for flash
    // session problem
    $this->news_model->set_key($data['key']);

    if($this->input->post('submit')){
        $this->save_article("update",$id);
    }

    $this->load->view("admin/news",$data);
} 
```

在我看来，我已经像这样调用 Uploadify

```
 $('#extra_data').uploadify({
    'swf'      : '<?php echo site_url(); ?>flash/uploadify.swf',
    'uploader' : '<?php echo site_url(); ?>admin/uploadify',
    'multi'     : true,
    'auto'      : false,
    'fileTypeExts'     : '*.jpg;*.jpeg;*.gif;*.png',
    'fileTypeDesc'    : 'Images',
    'formData'      : {'key' : '<?php echo $key; ?>'},
    'onQueueComplete': function(){
        ajax_images(); //calls a function that loads uploaded image thumbnails
    }
}); 
```

**编辑 - 添加 Uploadify 控制器**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Uploadify extends CI_Controller{

function __construct(){
    parent::__construct();

    // contains set_key / check_key / get_key / add_image functions
    $this->load->model('admin/news_model');
}

public function index(){
    if($this->news_model->check_key($this->input->post("key",true))){

        $this->upload_image();

    }else{
        log_message('error', "The hash key isn't correct! No upload has been done!");
    }
}

public function load_images(){
    $data = $this->news_model->get_images($this->uri->segment(4));

    foreach($data as $image){
        ?>
        <div style="background:url(<?php echo site_url(); ?>images/uploads/thumb_<?php echo $image->file; ?>) no-repeat"> 
            <a class="delete" href="javascript:void(0);" onclick="remove_pic('<?php echo site_url(); ?>admin/news/remove_picture/<?php echo $image->id; ?>')"></a>
        </div>
        <?php
    }
}

private function upload_image($case = "article"){
    $this->load->library("imaging");
    $this->imaging->upload($_FILES['Filedata']);

    $file_name = md5(time().$this->input->post("key"));
    $target_path = $_SERVER['DOCUMENT_ROOT'] . "/images/uploads/";

    if ($this->imaging->uploaded){

        $this->imaging->file_new_name_body   = $file_name;
        $this->imaging->file_auto_rename      = true;
        $this->imaging->image_resize         = false;
        $this->imaging->mime_check          = true;
        $this->imaging->allowed = array('image/*');
        $this->imaging->process($target_path);

        $this->imaging->file_name_body_pre = 'thumb_';
        $this->imaging->file_new_name_body   = $file_name;
        $this->imaging->image_resize          = true;
        $this->imaging->image_ratio_crop      = true;
        $this->imaging->image_y               = 148;
        $this->imaging->image_x               = 148;
        $this->imaging->process($target_path);

        if ($this->imaging->processed) {
            $this->news_model->add_image($this->input->post("key",true),$file_name . "." . $this->imaging->file_src_name_ext);
            $handle->clean();
        } else {
            log_message('error', $this->imaging->error);
        }
    }else{
        log_message('error', $this->imaging->error);
    }

} 
```

}

**编辑 No2 - 添加 get/set/check 键 f-ions**

```
function set_key($key)
{

    $data['key'] = $key;

    $this->db->where('id', 1);
    $this->db->update('uploadify_key', $data);

    log_message("debug", "Uploadify key set to " . $key);
}

function get_key($id)
{

    $this->db->select('key');
    $this->db->where('id', $id);
    $query = $this->db->get('uploadify_key');

    $row = $query->row();

    return $row->key;

}

function check_key($key,$id = 1)
{

    $db_key = $this->get_key($id);

    if($key == $db_key)
    {
        return TRUE;
    }
    else
    {
        return FALSE;
    }

}

function clear_key($id){
    $data['key'] = "";

    $this->db->where('id', $id);
    $this->db->update('uploadify_key', $data);
}

function add_image($hash, $file){
    $data['file'] = $file;
    $data['hash'] = $hash;

    $this->db->insert("images", $data);
}

function get_images($hash){
    $this->db->select("id, file");
    $return = $this->db->get_where("images",array("hash" => $hash));

    return $return->result();
} 
```

我的uploadify控制器有`$key`上面提到的检查和文件上传代码。

*请注意，有 2 个控制器 - News 和 Uploadify！*

问题是通过隔离代码的某些部分，我发现 Uploadify Javascript 再次调用 News 控制器。这是日志的链接 - [http://pastebin.com/JkHAy5cN](http://pastebin.com/JkHAy5cN)

发生这种情况的问题是密钥正在被重置，并且传递给 Javascript 的密钥与存储在数据库中的密钥不匹配。我被这个难住了。

任何建议、修复、评论都非常受欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:29:31.330

您不会同时使用 2 个控制器功能，只能使用一个。CI 不是这样工作的。因此，将您的 javascript 指向`news/edit`控制器功能。在此函数中，您需要包含执行实际上传的代码，因为我在上面没有看到它。但首先，纠正你的 JS。

所以而不是这个：

```
 'uploader' : '<?php echo site_url(); ?>admin/uploadify', 
```

做这个：

```
 'uploader' : '<?php echo site_url(); ?>news/edit', 
```

**并**从控制器功能添加到`news/edit`您的代码中。`admin/uploadify`

# ksh - KSH - 在退出前捕获脚本的返回码

> ID：10486846
> 
> 赞同：0
> 
> 时间：2012-05-07T18:03:02.490
> 
> 标签：ksh

在 KSH 中，我如何捕获 EXIT 信号并获取脚本的退出代码？

下面的测试输出“About to exit script with return code 0”。我想让它从 exit 命令的返回码中输出 4 。

```
#!/usr/bin/ksh

trapped_exit() {
 typeset rc=$1

 echo "(LOG SCRIPT EXECUTION & RETURN CODE)"

 echo "About to exit script with return code $rc."
}

trap 'APP_RC=$?; trapped_exit $APP_RC' EXIT

exit 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T22:14:51.840

我认为我可以将 exit 命令别名为我自己的函数。在这个函数中，我将通过与之前定义的全局变量进行比较来验证退出命令是从我的进程 ID 而非子进程调用的。如果它来自我的 PID，我将运行我的清理代码。最后用相同的参数调用真正的退出命令。

# c++ - 设计一个统一返回多个接口的类

> ID：10486848
> 
> 赞同：3
> 
> 时间：2012-05-07T18:03:11.197
> 
> 标签：c++, com

我有一个 C++ 类，它可以选择支持一些附加功能（由抽象接口定义）。在 Microsoft COM 中，有一种方法可以通过使用`QueryInterface(GUID, void**)`. 这需要将所有接口重新解释为 void*。我的问题是 - 有没有更安全的方法可以在不使用演员表的情况下达到同样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:10:20.827

COM 需要从对象支持的任何其他接口获取任何接口。你不必按照这个要求生活。只需将 getter 添加到您希望支持的每个接口即可。

```
struct IBase
{
    IMoreCapabilities * GetMoreCapabilities();
}; 
```

# asp.net - 如何设置 DataPager 控件的样式

> ID：10486851
> 
> 赞同：0
> 
> 时间：2012-05-07T18:03:16.373
> 
> 标签：asp.net, html, css, datapager

我有 ListView 控件和 DataPager 控件我如何可以像这个 html 一样设置 DataPager 控件的样式

**以及我如何添加标签等**

```
<div class="g-ftr">
<table width="20%" border="0" cellspacing="2" cellpadding="0" class="pager" align="left">
  <tr>
    <td><div>&laquo;</div></td>
    <td><div>&lsaquo;</div></td>
    <td><div>1</div></td>
    <td><a href="#"><div>2</div></a></td>
    <td><a href="#"><div>3</div></a></td>
    <td><a href="#"><div>&rsaquo;</div></a></td>
    <td><a href="#"><div>&raquo;</div></a></td>
  </tr>
</table>

</div> 
```

# anchor - html简单的锚链接在Opera中不起作用

> ID：10486854
> 
> 赞同：1
> 
> 时间：2012-05-07T18:03:32.837
> 
> 标签：anchor, opera

起初，如果已经问过与此类似的问题，我很抱歉，但这是我在这里的第一个问题，我没有找到任何可以帮助的东西。因为我不知道它是否重要，所以我的文档类型是：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org    /TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<div id="container"> /* container i which everything is nested */
<div id="header">
</div>
<div id="Navigation">
<a onmouseover="Bildwechsel('Galerie','HGalerie.png');"onmouseout="Bildwechsel('Galerie','Galerie.png');" href="Galerie.htm"><img alt="Navigation" src="Galerie.png" name="Galerie" /></a> //one of the links which is causing trouble
</div>
<div id="content"></div>
</div> 
```

这就是鼠标悬停功能（希望你不介意名字，我是德国人）：

```
function Bildwechsel(Bild, BildSource) {

    document.images[Bild].src = BildSource; /* function i use to change pictures on mouseover */
} 
```

在我的标题中，我还包含了两个版本的 jQuery（这是因为插件需要旧版本才能正常工作）和 lightbox v2。我已经用 实现了它们 `var something=jQuery.noConflict();`，还插入`true`了其中一个声明，因为否则它将无法工作，但由于一切正常，我认为应该没有问题。

我的问题是，当我单击`href="Galerie.htm"` 开头提到的每个浏览器的链接时，不包括歌剧（我使用的是 11.62 版）正在导航到`Galerie.htm`. 但在 Opera 中，它就像是浏览器只刷新站点，所以无论我点击什么链接，他总是停留在同一个页面上。也许很高兴知道：当我右键单击链接并在新选项卡中打开它时，一切正常。

第二个问题是：虽然我知道 doctypes 有什么好处，但我怎么知道哪一个最适合我的情况？我已经检查了我的 html 标记，得到了大约 50 个结果（？），错误如下：`link rel="stylesheet" type="text/css" src="something.css" >`[...] 和 > 之间缺少斜杠`.css"`，但是当我在 selfhtml 中查找它时，它是这样写的。我知道我是否需要斜线取决于文档类型，但我是否必须查看每一个斜线，或者它不是那么重要吗？如果是，我怎样才能实现一个有效的 0 错误的 html？

因为我一直认为（锚？）链接是最后一件事我会遇到问题我真的不知道这里发生了什么。任何帮助，将不胜感激 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:10:05.023

无需启动 Opera 并自己玩这一切.. 首先，在该链接中，您需要在 onmouseover 和 onmouseout 属性之间留一个空格。

例如

```
<a onmouseover="Bildwechsel('Galerie','HGalerie.png'); "onmouseout="Bildwechsel('Galerie','Galerie.png');" href="Galerie.htm"><img alt="Navigation" src="Galerie.png" name="Galerie" /></a> <!-- btw, "//" starts a javascript comment, but not so in HTML.  //one of the links which is causing trouble --> 
```

这有帮助吗？

# php - PHP Gettext - 没有翻译

> ID：10486857
> 
> 赞同：6
> 
> 时间：2012-05-07T18:04:00.433
> 
> 标签：php, windows, translation, gettext, poedit

我正在尝试使用 PHP gettext 扩展来翻译一些字符串。所有函数似乎都返回正确的值，但调用`gettext()`/`_()`仅返回原始字符串。PO/MO 文件似乎是正确的，我相信我已经正确设置了目录。我在 Windows 上使用 PHP 5.3.10 运行 WAMP 服务器（也尝试运行 5.3.4 和 5.3.8，因为我有安装）。

首先，请参阅`/new2/www/index.php`：

```
$locale = 'esn'; # returns Spanish_Spain.1252 in var dump

putenv("LC_ALL={$locale}"); // Returns TRUE
setlocale(LC_ALL, $locale); // Returns 'Spanish_Spain.1252'

$domain = 'messages';
bindtextdomain($domain, './locale'); // Returns C:\wamp\www\new2\www\locale
bind_textdomain_codeset($domain, 'UTF-8'); // Returns UTF-8
textdomain($domain); // Returns'messages'

print gettext("In the dashboard"); // Prints the original text, not the translation.
exit; 
```

我创建了以下文件结构：

```
www/new2/www/locale/Spanish_Spain.1252/LC_MESSAGES/messages.mo 
```

我也尝试过替换`Spanish_Spain.1252`为：`es_ES`, `esn`, `esp`, `Spanish`, 和`Spanish_Spain`.

用于生成 MO 的 PO 文件是这样的（仅给出相关条目）：

```
#: C:\wamp\www\new2/www/index.php:76
msgid "In the dashboard"
msgstr "TRANSLATED es_ES DASHBOARD" 
```

这是使用 PoEdit 生成的。添加任何新的 .MO 文件后，我已重新启动 Apache。另请注意，我之前将 Zend_Translate 与 Gettext 一起使用，并且翻译正确。不过，我希望依赖本机 gettext 扩展，部分原因是我正在尝试创建自己的轻量级框架。

任何帮助，将不胜感激。

*编辑*：修改目录结构。注意 - 将能够在 24 小时内尝试最近的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T23:24:17.230

我在我的 XAMPP 实例上设置了它并弄清楚了。

*   Flat out setlocale 在 Windows 上不起作用，因此它返回的内容无关紧要。
*   对于 Windows，您可以使用标准语言/国家代码设置区域设置（在这种情况下，es_ES 是在西班牙使用的西班牙语）
*   在您的语言环境目录下创建 es_ES/LC_MESSAGES/。这是您的 messages.mo 文件所在的位置。

    ```
    $locale = 'es_ES'; 

    putenv("LC_ALL={$locale}"); // Returns TRUE

    $domain = 'messages';
    bindtextdomain($domain, './locale'); 
    bind_textdomain_codeset($domain, 'UTF-8'); 
    textdomain($domain); // Returns'messages'

    print gettext("In the dashboard"); 
    exit; 
    ```

我不确定这是否有所不同，但我在创建 po 文件时做了两件事。在文件 - > 首选项下的 poEdit 中，我将*行尾格式*更改为 Windows。在我用 poEdit 创建了初始 po 之后，我在 Notepad++ 中打开了文件并将编码类型切换为 UTF-8，因为 poEdit 没有这样做。

我希望这至少可以为您指明正确的方向。

**参考**

[Windows 上的 PHP 本地化教程](http://phpmaster.com/localizing-php-applications-1/)

[国家代码](http://msdn.microsoft.com/en-us/library/dd796943.aspx)

[语言代码](http://www.science.co.il/language/locale-codes.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T03:26:46.820

您的代码将此作为返回值提及`bindtextdomain`：

```
C:\wamp\www\new2\www\locale 
```

使用`setlocale`of`Spanish_Spain.1252`和`textdomain`of `messages`，调用`gettext`将在这条路径中查找：

```
C:\wamp\www\new2\www\locale\Spanish_Spain.1252\LC_MESSAGES\messages.mo 
```

但是您创建了以下文件结构：

```
www/new2/locale/Spanish_Spain.1252/LC_MESSAGES/messages.mo
         ^^
         www/ missing here 
```

**编辑**

好的，所以这没有帮助。我在 Windows 上创建了一个测试脚本并像你一样使用 POEdit：

```
$locale = "Dutch_Netherlands.1252";
putenv("LC_ALL=$locale"); // 'true'
setlocale(LC_ALL, $locale); // 'Dutch_Netherlands.1252'
bindtextdomain("messages", "./locale"); // 'D:\work\so\l10n\locale'
textdomain("messages"); // 'messages'

echo _("Hello world"); // 'Hallo wereld' 
```

我的文件夹结构是这样的：

```
D:\work\so\l10n\
    \locale\Dutch_Netherlands.1252\LC_MESSAGES\messages.mo
    \locale\Dutch_Netherlands.1252\LC_MESSAGES\messages.po
    \test.php 
```

希望它有所帮助，尽管它看起来与您的几乎相同。我在网上找到的一些东西：

*   在 .po 文件中设置字符集很重要
*   本地化文件中的空格可能有 UTF8 替代，所以要小心键查找失败。可能首先要测试的最好的东西是完全没有空格的键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T11:36:33.243

一个建议：您可能需要 .mo 文件的完整语言环境。这可能是 Spanish_Spain.UTF8 或 esn_esn.UTF8 或 esn_esp.UTF8（不是 1252，因为您更改了代码库）。

要跟踪它要查找的目录，您可以安装进程监视器 (http://technet.microsoft.com/en-us/sysinternals/bb896645)。它会在信息上显示存储桶负载，但您应该能够找出正在查找的文件/目录。

（我的另一个想法是检查文件权限——但如果您在 Zend_Translate 中已经有类似的东西，那么可能不是原因，但无论如何都值得检查）。

对不起，如果不好 - 但可能会给你一个线索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T00:02:36.163

我从未尝试在 Windows 上使用 gettext，但每次我在 linux 系统上遇到 gettext 问题时，原因是没有安装适当的语言包。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T19:30:36.707

看[这里](https://stackoverflow.com/questions/10508305/gettext-works-sometime/10508713#10508713)。它在 Windows 和 linux 上也适用于我。数组中的最后一个值适用于 windows。可以在[此处](http://msdn.microsoft.com/en-us/library/39cwe7zf%28v=VS.71%29.aspx)找到语言名称列表。我的目录在

```
./locales/en/LC_MESSAGES/domain.mo
         /cs/LC_MESSAGES/domain.mo 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-12T09:37:14.003

问题也可能是当您更改 *.po 和 *.mo 文件时，您必须**重新启动 Apache Server**。这可能是个问题，因此您可以使用解决方法 - 始终将这些文件重命名为某个新名称，然后重新加载它们。

# c++ - qApp 未设置，我不知道为什么

> ID：10486862
> 
> 赞同：2
> 
> 时间：2012-05-07T18:04:42.617
> 
> 标签：c++, qt, visual-studio-2008, qt4

我的 Qt 应用程序遇到了一些问题。看起来我的 qApp 未初始化，我不明白为什么。下面是演示该问题的代码片段。

```
class F3DApp : public QEnsQtApp
{
    Q_OBJECT
.
.
}

class  QEnsQtApp : public QApplication
{
    Q_OBJECT
.
.
}

F3DApp::F3DApp(int& argc, char** argv)
:   QEnsQtApp(argc, argv),

QEnsQtApp::QEnsQtApp( int &argc, char **argv)
      :QApplication(argc, argv) 
```

基于这个结构，似乎我的 qApp（定义在 qapplication.h，static_cast(QCoreApplication::instance()) 应该在我构造 F3DApp 时设置。但是，它不是如下所示：

```
int main (int argc, char ** argv, char* envp[])
{ 
    F3DApp lapp(argc, argv);
    F3DApp* app = &lapp; 
    QApplication *a = dynamic_cast<QApplication *> (app); // Good
    QApplication *b = qApp;  // Nothing?
} 
```

这实际上在我的 QPixmap 内部造成了问题。我得到一个

> qFatal("QPixmap: 必须在 QPaintDevice 之前构造一个 QApplication");

我已经用谷歌搜索了 QPixmap 的这个问题（在它里面是 qt_pixmap_thread_test()），看起来我在我的 qApp 实际初始化之前静态构造一个，这似乎是常见的问题。这是我制作 SplashScreen 的方法：

```
SplashScreen::SplashScreen(QString guiVersion, QString guiVersionDate)
:   QSplashScreen(QPixmap(":/images/splash.png")),
    m_guiVersion(guiVersion),
    m_guiVersionDate(guiVersionDate)
{ 
} 
```

然后从主开始，在我制作了我的 F3DApp 之后：

```
SplashScreen* splash = new SplashScreen(F3DApp::getVersionInfo(), 
   F3DApp::getAppDate()); 
```

这在 F3DApp 类：公共 QApplication 时可以正常工作。我可能只是将所有 F3DApp 功能移动到 QEnsQtApp 作为解决方法，但我不喜欢在地毯下扫除问题，因为我无知。我宁愿不要无知。

# asp.net - IValidatableObject 在单独的程序集中

> ID：10486864
> 
> 赞同：3
> 
> 时间：2012-05-07T18:04:47.797
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, validation, ivalidatableobject

您好我正在尝试在 ASPNET MVC 4 项目上实现 IValidableObject 接口。我的模型在不同的程序集中，当框架执行我的验证方法时，它没有显示验证上下文并向我显示此错误：验证上下文无法通过嵌套类型访问外部类型“AS.Core.Model.Horario.Validate”的非静态成员'AS.Core.Model.Horario'

很明显，问题出在单独的程序集上，但我不知道该怎么做才能完成这项工作，有人可以帮助我吗？

这是我的代码：

```
public class Horario : IValidatableObject
{
    [Range(0, 6, ErrorMessage = "Dia inválido")]
    public byte Dia { get; set; }

    [DataType(DataType.Time, ErrorMessage = "Horário de início inválido")]
    public TimeSpan? HorarioInicio { get; set; }

    [DataType(DataType.Time, ErrorMessage = "Horário fim inválido")]
    public TimeSpan? HorarioFim { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (HorarioInicio != null && HorarioFim == null || HorarioFim != null && HorarioInicio == null)
        {
            yield return new ValidationResult("Horário inválido");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:49:53.343

您需要编写将是 IValidatableObject 的 ViewModel，并在验证后将数据从它移动到控制器中的业务模型。

# api - 更改 YouTube API 生成的链接的行为

> ID：10486872
> 
> 赞同：1
> 
> 时间：2012-05-07T18:05:19.800
> 
> 标签：api, search, youtube, hyperlink

我的目标是根据关键字搜索在我的网站上显示 YouTube 搜索结果（例如，通过 YouTube API 或使用 youtube.com 的 GoogleCustomSearch），但是当您点击链接时更改它 - 而不是将您重定向到 youtube 视频页面，它将获取链接的 URL 并将其作为变量传输到 PHP 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:09:15.877

您可以使用 CURL 命令读取结果页面，并使用正则表达式将链接 url 更改为指向您自己的链接的链接，包装目标 url。

像这样的东西：

```
http://www.youtube.com/watch?v=XJ87Lsx40PI 
```

把它变成：

```
http://yoursite.com/youtube.php?XJ87Lsx40PI 
```

# mysql - 从 mysql 获取 mm/dd/yy 格式的记录

> ID：10486877
> 
> 赞同：1
> 
> 时间：2012-05-07T18:06:13.560
> 
> 标签：mysql

我有一个 MySQL 列，它以 mm/dd/yy 格式保存到期日期。

如何获取从今天起 2 天内到期的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:11:19.523

尝试：

```
SELECT * FROM TABLE WHERE CAST(EXPIREDATE AS DATETIME)
    BETWEEN NOW() AND DATE_ADD(NOW(), INTERVAL 2 DAY); 
```

[http://www.roseindia.net/sql/sqldate/sql-date-add-days.shtml](http://www.roseindia.net/sql/sqldate/sql-date-add-days.shtml)

# wordpress - Wordpress 显示禁止来自另一台服务器

> ID：10486879
> 
> 赞同：0
> 
> 时间：2012-05-07T18:06:18.930
> 
> 标签：wordpress, iis-7, windows-server-2008

我在 IIS7 Windows Server 2008 共享托管服务上安装了 wordpress。

直到几天前它没有任何问题。

现在，当我在登录时编辑帖子或提交评论时，会出现此页面： ![在此处输入图像描述](../Images/58cf679872f437045bf9489b1dbbb576.png)

例如，如果我在网站上以管理员身份登录时发送评论，评论将发送，但我看到的是该页面而不是评论发送页面...

如您所见，它显示了一个 ((Apache CentOS , nginx)) 服务器，但我的服务器是 Windows (IIS) 服务器！！

我的网站被黑了吗？或者 ...？我的网站出了什么问题？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:13:58.900

问题出在`PubSubHubbub`插件上。（我认为来自其设置的无效网站）

我停用了它，现在一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:40:03.847

请注意，Wordpress 在 Apache、PHP5 和 MySQL 上运行得最好。我在您的屏幕截图中看不到错误，但这可能是因为您尝试在 IIS 上使用非默认永久链接结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T21:43:12.040

从屏幕截图中猜测，您可能列出了一个错误的更新服务，它与 IIS 相混淆。您可以在管理区域的“设置”>“写作”下更新当前发送到的服务。您应该尝试暂时删除所有更新服务，看看是否能解决问题。

这里有一个更通透的解释：

[http://codex.wordpress.org/Update_Services](http://codex.wordpress.org/Update_Services)

# c# - 在 .NET Hashtable（或其他结构）中获取最接近/下一个匹配项

> ID：10486881
> 
> 赞同：4
> 
> 时间：2012-05-07T18:06:22.367
> 
> 标签：c#, vb.net, hashtable

我有一个工作场景，我们有几个不同的数据表，格式类似于以下：

```
Table Name: HingeArms
Hght   Part #1       Part #2
33     S-HG-088-00   S-HG-089-00
41     S-HG-084-00   S-HG-085-00
49     S-HG-033-00   S-HG-036-00
57     S-HG-034-00   S-HG-037-00 
```

其中第一列（可能更多）包含按升序排序的数字数据，并表示确定要获取的正确数据记录的范围（例如，高度 <= 33 然后第 1 部分 = S-HG-088-00，高度 <= 41 然后第 1 部分 = S-HG-084-00 等）

我需要查找并选择给定指定值的最接近的匹配项。例如，给定高度 = 34.25，我需要在上面的集合中获得第二条记录：

```
41     S-HG-084-00   S-HG-085-00 
```

这些表当前存储在从 CSV 文件加载的数据的 VB.NET 哈希表“缓存”中，其中哈希表的键是表名和表中表示“键”的一个或多个列的组合。记录。例如，对于上表，第一条记录的 Hashtable Add 将是：

```
ht.Add("HingeArms,33","S-HG-088-00,S-HG-089-00") 
```

这似乎不是最佳的，如果需要，我可以灵活地更改结构（缓存包含来自其他可以直接查找的表的数据......这些“范围”表只是因为它“容易”而被转储）。我在 Hashtable/Dictionary 上寻找“Next”方法，以便为我提供该范围内最接近的匹配记录，但这显然不适用于 VB.NET 中的股票类。

关于使用 Hashtable 或不同结构来做我正在寻找的事情的任何想法？它需要高性能，因为查找将在不同的代码部分中经常被调用。任何想法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:20:24.497

哈希表不是一个好的数据结构，因为项目根据它们的哈希码而不是它们的值分散在内部数组周围。

使用排序[数组](http://msdn.microsoft.com/en-us/library/2cy9f6wb.aspx)或[List<T>](http://msdn.microsoft.com/en-us/library/w4e7fxsh.aspx)并执行二进制搜索，例如

*设置：*

```
var values = new List<HingeArm>
{
    new HingeArm(33, "S-HG-088-00", "S-HG-089-00"),
    new HingeArm(41, "S-HG-084-00", "S-HG-085-00"),
    new HingeArm(49, "S-HG-033-00", "S-HG-036-00"),
    new HingeArm(57, "S-HG-034-00", "S-HG-037-00"),
};

values.Sort((x, y) => x.Height.CompareTo(y.Height));

var keys = values.Select(x => x.Height).ToList(); 
```

*抬头：*

```
var index = keys.BinarySearch(34.25);
if (index < 0)
{
    index = ~index;
}

var result = values[index];
// result == { Height = 41, Part1 = "S-HG-084-00", Part2 = "S-HG-085-00" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:21:04.737

LINQ-to-Objects 怎么样（这绝不是一个高性能的解决方案，顺便说一句。）

```
 var ht = new Dictionary<string, string>();
    ht.Add("HingeArms,33", "S-HG-088-00,S-HG-089-00");
    decimal wantedHeight = 34.25m;

    var foundIt =
        ht.Select(x => new { Height = decimal.Parse(x.Key.Split(',')[1]), x.Key, x.Value }).Where(
            x => x.Height < wantedHeight).OrderBy(x => x.Height).SingleOrDefault();

    if (foundIt != null)
    {
        // Do Something with your item in foundIt
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:42:05.057

您可以将排序的 .NET 数组与 Array.BinarySearch() 结合使用。如果你得到一个非负值，这是完全匹配的索引。否则，如果结果为负数，则使用公式

```
int index = ~Array.BinarySearch(sortedArray, value) - 1 
```

获取先前“最近”匹配的索引。

最近的含义由您使用的比较器定义。它必须与您在对数组进行排序时使用的相同。看：

[http://gmamaladze.wordpress.com/2011/07/22/back-to-the-roots-net-binary-search-and-the-meaning-of-the-negative-number-of-the-array-二进制搜索返回值/](http://gmamaladze.wordpress.com/2011/07/22/back-to-the-roots-net-binary-search-and-the-meaning-of-the-negative-number-of-the-array-binarysearch-return-value/)

# python - python multiprocessing Pool：进程产生主应用程序的新副本

> ID：10486882
> 
> 赞同：1
> 
> 时间：2012-05-07T18:06:27.923
> 
> 标签：python, multiprocessing, python-2.6, pool

我正在开发一个更大的 Python 应用程序，它在数百个不同的问题场景中运行求解器。有一个 GUI 允许用户设置求解器配置。为了加快速度，我实现了一个多处理池来在应用程序中生成求解器模块的新实例。

最终发生的情况是，在创建池期间出现了四个新的 GUI 副本，这完全不是我希望发生的事情。我已经按照编程指南采取了我认为保护应用程序入口点的适当步骤，但也许我误解了关于多处理模块的一些基本内容。

在创建最小启动模块时，我已遵循[此线程中的指南。](https://stackoverflow.com/questions/5957727/preventing-pool-processes-from-importing-main-and-globals)

ScenarioSolver.solveOneScenario 创建求解器的一个新实例，scenario_to_solve 是一个参数列表。

```
process_pool = multiprocessing.Pool(4)
for _, result in enumerate(process_pool.imap_unordered(ScenarioSolver.solveOneScenario, scenarios_to_solve)):
  self.processResult(result) 
```

那么，基于这里有限的信息，我在使用 Pool 时可能会忽略什么？

编辑：这种行为仅在我使用 py2exe 将应用程序打包成可执行文件时发生。从 Eclipse 运行时，我得到了预期的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:42:52.197

[这与此](https://stackoverflow.com/questions/2073942/multiprocessing-problem-pyqt-py2exe)线程中解决的问题相同。

解决此问题`multiprocessing.freeze_support()`后立即添加。`if __name__ == '__main__'`

# java - GridBagLayout 按钮的固定宽度

> ID：10486883
> 
> 赞同：4
> 
> 时间：2012-05-07T18:06:28.667
> 
> 标签：java, swing, jbutton, gridbaglayout

是否可以为 GridBagLayout 中的按钮设置固定大小（宽度），以便它们始终具有相同的大小？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:17:46.550

是的，如评论中所述，使用 GridLayout。

要添加填充，只需使用 GridLayout 的最后两个参数（int rows, int cols, int hgap, int vgap）

# ruby-on-rails - 即使安装了 bundler-1.1.3，“bundle install”也会失败

> ID：10486884
> 
> 赞同：2
> 
> 时间：2012-05-07T18:06:30.723
> 
> 标签：ruby-on-rails, bundler

我正在尝试运行“捆绑安装”，即使我安装了 gem bundler，它似乎也无法找到合适的 gemfile。我不知道从这里做什么。当我运行“捆绑安装”时，我得到了这个：

```
C:\Users\User1\Sites\simple_cms>bundle install
Fetching gem metadata from http://rubygems.org/.........
Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    rails (= 3.0.0) x86-mingw32 depends on
      bundler (~> 1.0.0) x86-mingw32

  Current Bundler version:
    bundler (1.1.3)

This Gemfile requires a different version of Bundler.
Perhaps you need to update Bundler by running `gem install bundler`? 
```

然后我安装了看起来安装得很好的捆绑器 gem。

```
C:\Users\User1\Sites\simple_cms>gem install bundler
Successfully installed bundler-1.1.3
1 gem installed
Installing ri documentation for bundler-1.1.3...
Installing RDoc documentation for bundler-1.1.3... 
```

但即使捆绑器 gem 的安装成功“捆绑安装”仍然失败：

```
C:\Users\User1\Sites\simple_cms>bundle install
Fetching gem metadata from http://rubygems.org/.........
Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    rails (= 3.0.0) x86-mingw32 depends on
      bundler (~> 1.0.0) x86-mingw32

  Current Bundler version:
    bundler (1.1.3)

This Gemfile requires a different version of Bundler.
Perhaps you need to update Bundler by running `gem install bundler`? 
```

当我运行“gem list”时，捆绑器肯定在那里：

```
C:\Users\User1\Sites\simple_cms>gem list

*** LOCAL GEMS ***

actionmailer (3.2.3)
actionpack (3.2.3)
activemodel (3.2.3)
activerecord (3.2.3)
activeresource (3.2.3)
activesupport (3.2.3)
arel (3.0.2)
bigdecimal (1.1.0)
builder (3.0.0)
bundler (1.1.3)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.1)
erubis (2.7.0)
execjs (1.3.1)
hike (1.2.1)
i18n (0.6.0)
io-console (0.3)
journey (1.0.3)
jquery-rails (2.0.2)
json (1.7.0, 1.5.4)
mail (2.4.4)
mime-types (1.18)
minitest (2.5.1)
multi_json (1.3.4)
mysql2 (0.3.11 x86-mingw32)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.3)
railties (3.2.3)
rake (0.9.2.2)
rdoc (3.12, 3.9.4)
rubygems-update (1.8.24)
sass (3.1.16)
sass-rails (3.2.5)
sprockets (2.1.3)
sqlite3 (1.3.6 x86-mingw32)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
uglifier (1.2.4)

C:\Users\User1\Sites\simple_cms> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:40:42.717

尝试删除您的`Gemfile.lock`. 然后运行`bundle check`并查看输出。它可能会要求您`bundle install`再次运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:11:05.413

在我看来，您的 Rails (3.0.0) 版本需要 Bundler 1.0.0——您有更新的版本。

您可以通过 gem install 安装特定版本，如下所示：

```
gem install bundler -v 1.0.0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:50:56.713

I suggest you don't copy and paste whole projects.

First of all learn to use `rvm` or `rbenv` so you don't encounter conflicts with ruby versions and gems.

if your tutorial uses rails 3.0, you can put in something like

```
gem 'rails', '3.0.0' 
```

in your Gemfile.

I suggest you install the latest rails version though and learn that.

# ios - 将多个图像转换为具有多页的 pdf

> ID：10486888
> 
> 赞同：0
> 
> 时间：2012-05-07T18:07:01.580
> 
> 标签：ios, pdf-generation

在我的应用程序中有一个带有 HTML 内容的 WebView。内容是 WebView 中的 3 页。现在我想将 WebView 内容转换为 PDF。我从 WebView 内容创建了 3 个图像。现在我想使用这 3 个图像创建 pdf。每个图像应该是一页 PDF。但它导致单页图像。因此，当我进行打印时，内容会被切断。我正在使用这个，

```
CGSize pageSize = CGSizeMake(612, 2324);
NSString *fileName = @"Demo.pdf";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);

// Mark the beginning of a new page.
UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

double currentHeight = 0.0;

for (int index = 1; index <= imageName ; index++)
{
    NSString *pngPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.png", index]];
    UIImage *pngImage = [UIImage imageWithContentsOfFile:pngPath];

    [pngImage drawInRect:CGRectMake(0, currentHeight, pageSize.width, pngImage.size.height)];        
    currentHeight += pngImage.size.height;
}

UIGraphicsEndPDFContext(); 
```

我对这段代码做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-25T07:27:05.287

```
/*For call method*/

 [self createPdfWithName:@"sam" array:[NSArray arrayWithObjects:[UIImage imageNamed:@"01.png"],[UIImage imageNamed:@"02.png"], nil]];

/*Create New Pdf*/

- (NSString *)createPdfWithName: (NSString *)name array:(NSArray*)images
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docspath = [paths objectAtIndex:0];
    NSString *pdfFileName = [docspath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.pdf",name]];
    UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);
    for (int index = 0; index <[images count] ; index++)
    {
        UIImage *pngImage=[images objectAtIndex:index];;
        UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, (pngImage.size.width), (pngImage.size.height)), nil);
        [pngImage drawInRect:CGRectMake(0, 0, (pngImage.size.width), (pngImage.size.height))];
    }
    UIGraphicsEndPDFContext();
    return pdfFileName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-18T13:30:23.277

```
func createPDFS(arrImages: [UIImage]) -> NSData? {

        var pageHeight = 0.0
        var pageWidth = 0.0

        for img in arrImages
        {
            pageHeight =  pageHeight+Double(img.size.height)

            if Double(img.size.width) > pageWidth
            {
                pageWidth = Double(img.size.width)
            }
        }

        let pdfData = NSMutableData()
        let pdfConsumer = CGDataConsumer(data: pdfData as CFMutableData)!

       var mediaBox = CGRect.init(x: 0, y: 0, width: pageWidth, height: pageHeight)

       let pdfContext = CGContext(consumer: pdfConsumer, mediaBox: &mediaBox, nil)!

        for img in arrImages
        {
            var mediaBox2 = CGRect.init(x: 0, y: 0, width: img.size.width, height: img.size.height)

                   pdfContext.beginPage(mediaBox: &mediaBox2)
            pdfContext.draw(img.cgImage!, in: CGRect.init(x: 0.0, y: 0, width: pageWidth, height: Double(img.size.height)))

              pdfContext.endPage()
        }

        return pdfData
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T05:50:54.427

```
CGSize pageSize = CGSizeMake(612, 2324);
NSString *fileName = @"Demo.pdf";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);       

double currentHeight = 0.0;

for (int index = 1; index <= imageName ; index++)
{
    NSString *pngPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.png", index]];
    UIImage *pngImage = [UIImage imageWithContentsOfFile:pngPath];

// TODO: See Here
// Mark the beginning of a new page.
UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pngImage.size.height), nil);

    [pngImage drawInRect:CGRectMake(0, currentHeight, pageSize.width, pngImage.size.height)];        
    //currentHeight += pngImage.size.height;
}

UIGraphicsEndPDFContext(); 
```

# android - 应用上显示的小部件：https://play.google.com/store/apps/details?id=ds.cpuoverlay&hl=en

> ID：10486889
> 
> 赞同：1
> 
> 时间：2012-05-07T18:07:02.260
> 
> 标签：android

应用程序[Cool Tool - 系统统计](https://play.google.com/store/apps/details?id=ds.cpuoverlay&hl=en)信息将 cpu 信息显示为主屏幕顶部的叠加层。我已经验证面板不是定制的吐司。

我做了很多研究，但无法弄清楚它是什么类型的小部件。

有人可以帮我识别这里使用的小部件。

提前致谢。

# algorithm - Mergesort：合并操作的最后一步是怎么回事？

> ID：10486893
> 
> 赞同：1
> 
> 时间：2012-05-07T18:07:15.453
> 
> 标签：algorithm, sorting, mergesort

以下合并排序来自*数据结构和算法分析*(Weiss)。我想知道的是`for`合并步骤的最后一个循环。我知道我们必须复制`tmpArray`回`array`，但我不明白为什么我们这样做 from `rightend`，以及为什么我们没有`i`go from `0`to `tmpArray.size`。有人可以解释一下吗？

```
public static void mergeSort( Comparable [ ] a )
{
  Comparable [ ] tmpArray = new Comparable[ a.length ];
  mergesort( a, tmpArray, 0, a.length - 1 );
}

public static void mergesort( Comparable [ ] a, Comparable [ ] tmpArray,
int left, int right )
{
  if( left < right ) {
    int center = ( left + right ) / 2;
    mergesort( a, tmpArray, left, center );
    mergesort( a, tmpArray, center + 1, right );
    merge( a, tmpArray, left, center + 1, right );
  }
}

public static void merge( Comparable [ ] a, Comparable [ ] tmpArray,
int leftPos, int rightPos, int rightEnd )
{

  int leftEnd = rightPos - 1;
  int tmpPos = leftPos;
  int numElements = rightEnd - leftPos + 1;

  while( leftPos <= leftEnd && rightPos <= rightEnd )
    if( a[ leftPos ].compareTo( a[ rightPos ] ) <= 0 )
      tmpArray[ tmpPos++ ] = a[ leftPos++ ];
    else
      tmpArray[ tmpPos++ ] = a[ rightPos++ ];

  while( leftPos <= leftEnd ) // Copy rest of first half
    tmpArray[ tmpPos++ ] = a[ leftPos++ ];

  while( rightPos <= rightEnd ) // Copy rest of right half
    tmpArray[ tmpPos++ ] = a[ rightPos++ ];

  for( int i = 0; i < numElements; i++, rightEnd-- )
    a[ rightEnd ] = tmpArray[ rightEnd ]; // Copy tmpArray back
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:12:46.560

我认为这样做的主要原因是因为 的值`rightPos`，即子数组开始的位置，已被内部循环破坏性地修改（注意使用`rightPos++`。因此，为了正确写回该值，最后一个循环倒数到`rightPos`原来的位置。如果它只是开始`rightPos`并向前计数，它将写入错误的索引。

也就是说，我认为没有任何理由这样做。只声明新变量并修改这些值会更容易，而不是破坏输入并做额外的体操来恢复原始值。

希望这可以帮助！

# php - 基于页面 ID 的 Wordpress 条件侧边栏部分

> ID：10486895
> 
> 赞同：3
> 
> 时间：2012-05-07T18:07:28.217
> 
> 标签：php, wordpress, sidebar

目标 - 我的侧边栏有一部分是有条件的，具体取决于我所在的页面。所选页面的所有子页面也应显示条件部分。

至少有两种方法可以做到这一点 - 1) 将所有条件挂钩和生成的代码放在一个侧边栏文件中，2) 有多个 sidebar.php 文档并根据正在访问的页面调用它们。

到目前为止，我在这两种方式上都几乎失败了...... :( 我现在正在研究第二种方法，因为我认为它可能更灵活长期。无论如何，在我的 page.php 中我替换了：

```
<?php get_sidebar() ?> 
```

和

```
<?php
         if (is_page(1997) || $post->post_parent) {
 get_sidebar('sidebar-test-may12.php')
}
        else { get_sidebar()
        }   ?> 
```

带着测试方法的希望。我想要发生的是，如果页面是页面 id 1997 或其任何子页面，请显示 sidebar-test-may12.php。否则显示常规侧边栏。使用新代码，整个页面变为空白。对我有什么建议或解决方案吗？似乎是一个常见的问题，但我还没有弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T18:17:50.693

您的代码示例存在一些问题：

1) $post->post_parent 没有被检查任何其他东西，所以它只会在它是一个子页面时返回true（不一定是你想要定位的页面的子页面）

2) [get_sidebar()](http://codex.wordpress.org/Function_Reference/get_sidebar)被错误地调用。如果你想从你的主题文件夹中获取 'sidebar-test-may12.php'，你需要调用 get_sidebar('test-may12')

3）您的函数调用后缺少分号

所以你的代码应该是这样的：

```
<?php
    if(is_page(1997) || $post->post_parent == 1997) {
        get_sidebar('test-may12'); //get sidebar-test-may12.php
    }
    else{
        get_sidebar(); //get sidebar.php
    }
?> 
```

让我知道这是否有帮助。

**更新：**请记住， $post->post_parent 不会获得子页面的最顶层祖先 ID。如果您想获取顶级 ID 而不管深度如何，请考虑执行以下操作：

```
<?php
    $ancestors = get_ancestors(get_the_ID(), 'page');
    if(is_page(1997) || end($ancestors) == 1997)
        get_sidebar('test-may12'); //get sidebar-test-may12.php
    else
        get_sidebar(); //get sidebar.php
?> 
```

**可能的解决方案：**基于您的示例和我提出的祖先检查，您可以做的一件事是让您的模板检查基于父页面的 slug 在您的主题中是否存在特殊的侧边栏。这样，如果您决定一个特定的页面需要一个特殊的侧边栏，它及其所有的子/孙/曾孙/等。您只需将其添加到您的主题中，名称为“sidebar-{parent_slug}.php”。所以：

```
<?php
$id = get_the_ID();
$ancestors = get_ancestors($id, 'page');
$top_page = $ancestors ? get_page(end($ancestors)) : get_page($id);

if(locate_template('sidebar-'.$top_page->post_name.'.php'))
    get_sidebar($top_page->post_name);
else
    get_sidebar();
?> 
```

这样，您不需要大量的条件来决定在通用页面模板上加载哪个侧边栏文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:41:03.690

使用一些错误捕获来显示您的 php 发生了什么，或者在简单小部件的 .htaccess 中切换错误日志：[http ://wordpress.org/extend/plugins/error-log-dashboard-widget/](http://wordpress.org/extend/plugins/error-log-dashboard-widget/)

我已经硬编码了侧边栏的逻辑，但我也使用了[WordPress › Widget Logic « WordPress Plugins](http://wordpress.org/extend/plugins/widget-logic/)用于我自己的网站和客户网站。使用 WP 条件的简化版本很容易使用，例如`is_category`和`is_page ('101')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T19:05:29.780

对于解决同样问题的其他人 - 有一个新插件可以很好地解决这个问题。它甚至使创建侧边栏变得容易。你可以在这里查看：

[http://wordpress.org/extend/plugins/custom-sidebars/](http://wordpress.org/extend/plugins/custom-sidebars/)

# svg - 矩形内的 Svg 剪辑路径不起作用

> ID：10486896
> 
> 赞同：11
> 
> 时间：2012-05-07T18:07:37.123
> 
> 标签：svg, d3.js

我有一个带有 x 和 y 轴的简单图表。我不希望我在其中绘制的绘图区域与轴重叠。

我正在使用 d3 创建图表，但剪辑路径不起作用：

[http://jsfiddle.net/EqLBJ/](http://jsfiddle.net/EqLBJ/)

```
var margin = {top: 19.5, right: 19.5, bottom: 19.5, left: 39.5},
    width = 960 - margin.right,
    height = 500 - margin.top - margin.bottom;

var xScale = d3.scale.linear().
    domain([xMin, xMax]). // your data minimum and maximum
    range([0, width]); // the pixels to map to, e.g., the width of the diagram.

var yScale = d3.scale.linear().
    domain([yMax, yMin]). 
    range([0, height]); 

var xAxis = d3.svg.axis().orient("bottom").scale(xScale).ticks(10, d3.format(",d")),
    yAxis = d3.svg.axis().orient("left").scale(yScale);

var chart = d3.select("#chart").append("svg")
    .attr("class", "chart")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .attr("pointer-events", "all")
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(d3.behavior.zoom().scaleExtent([0.2, 5]).on("zoom", redraw));

var rect = chart.append('svg:rect')
    .attr('width', width)
    .attr('height', height)
    .attr('fill', 'white');

var line = d3.svg.line()
        .interpolate("basis")
        .x(function(d, i) { return xScale(d.time); })
        .y(function(d) { return yScale(d.value); });

var clip = chart.append("svg:clipPath")
    .attr("id", "clip");

clip.append("svg:rect")
    .attr("id", "clip-rect")
    .attr("width", width)
    .attr("height", height);
    // .attr("fill", "white");

var path = chart.append("svg:path")
    .attr("clip-path", "url(#clip-rect)")
    .data([data])
    .attr("class", "line")
    .attr("fill", "none")
    .attr("stroke", "maroon")
    .attr("stroke-width", 2)
    .attr("d", line);

// x-axis label
chart.append("text")
    .attr("class", "x label")
    .attr("text-anchor", "end")
    .attr("x", width)
    .attr("y", height - 6)
    .text("time");

// y-axis label
chart.append("text")
    .attr("class", "y label")
    .attr("text-anchor", "end")
    .attr("y", 6)
    .attr("dy", ".75em")
    .attr("transform", "rotate(-90)")
    .text("value");

// x-axis
var xaxis = chart.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

// y-axis
var yaxis = chart.append("g")
    .attr("class", "y axis")
    .call(yAxis);

function redraw() 
{
    console.log("here", d3.event.translate, d3.event.scale);

    path.transition()       
        .ease("linear")
        .attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");

} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T19:11:51.150

你想要这样的东西：

[http://jsfiddle.net/dsummersl/EqLBJ/1/](http://jsfiddle.net/dsummersl/EqLBJ/1/)

具体来说：

*   使用 'clip' 而不是 'clip-rect'
*   将您要剪辑的内容放在“g”元素中，并指定“clip-path”属性和“g”元素的变换。

# php - SessionHandler 问题

> ID：10486898
> 
> 赞同：0
> 
> 时间：2012-05-07T18:08:01.003
> 
> 标签：php, session

我的 SessionHandler 类有问题。它在每次刷新时插入一个空白会话，当您在会话中插入某些内容时，print_r 函数不会显示所有可用选项。什么会产生问题？

[SessionHandler 类](http://notey.it/n/aHo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:53:47.377

为什么不修改 SessionHandler::sessionWrite() 以将 debug_backtrace() 信息记录到临时日志文件中。然后您可以看到这个“空白”会话以及从哪里调用 sessionWrite 并意识到要修复什么？所以只是一些简单的事情，比如：

```
 public function sessionWrite($sessionId, $sessionData)
    {
        file_put_contents('test.txt',serialize(debug_backtrace()),FILE_APPEND);
        ......
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:15:26.927

你在文档顶部使用 session_start() 吗？

# adobe-premiere - Adobe Premiere CS5.5 或 CS6 可以使用佳能 XA10 相机进行剪辑吗？

> ID：10486901
> 
> 赞同：1
> 
> 时间：2012-05-07T18:08:43.493
> 
> 标签：adobe-premiere

我有 Adob​​e Production Premium CS5，我无法将本机导入到超过 12 分钟的首映剪辑中，我必须将 .MTS 文件带入首映并以这种方式进行编辑。问题是当 2、3 或 4 个 .MTS 文件背靠背时，文件连接处会出现小的声音和视频故障。当我进行采访时，这是一个问题，当出现故障时，他们处于句子中间。在 Finalcut Pro X 中，我可以进行剪辑跨越并将 45 分钟的剪辑作为 1 个片段，而无需处理 4 个单独的 .MTS 文件，并且剪辑连接在一起时不会出现故障。但是，我想与 Premiere 合作，以实现他们的 Encore 和 After Effects 集成。我尝试将导入的 Finalcut Pro X 剪辑作为 1 个实体剪辑放入 Premiere，但当我这样做时，Premiere 变得非常慢，所以这不是一个选择。

我的问题是，有谁知道 Adob​​e Premiere CS5.5 或 CS6 是否允许我将 Canon XA10 文件作为原生单片素材导入，而无需重建 .MTS 文件并避免随之而来的故障？我想升级到新的 CS6 套件，但是没有这个功能就毫无意义。

# c# - 如何在 WPF 中绘制平滑的曲线？

> ID：10486906
> 
> 赞同：10
> 
> 时间：2012-05-07T18:09:17.147
> 
> 标签：c#, .net, wpf, canvas

我有三个已知的职位，目前我正在驾驶两条这样的线路：

```
Line line = new Line
{
    StrokeThickness = 3,
    Stroke = lineColor,
    X1 = MyX,
    Y1 = MyY,
    X2 = MyX,
    Y2 = MiddleY
};

Graph.Children.Add(line);

line = new Line
{
    StrokeThickness = 3,
    Stroke = lineColor,
    X1 = MyX,
    Y1 = MiddleY,
    X2 = TargetX,
    Y2 = TargetY
};

Graph.Children.Add(line); 
```

结果如下：

![在此处输入图像描述](../Images/a69251fce528863fa03ff924c44f38bb.png)

所以，正如你所看到的，这几乎就是我想要的，只是我希望它更平滑，只是一点点。

现在我正在寻找可以设置三个点的任何方法，将一些平滑/弯曲的水平设置到中间点，然后在上面画一条纯色的线。就像我如何在 Photoshop 中做到这一点一样：

![在此处输入图像描述](../Images/a8934e002967e98b1125191c84e07fb4.png)

或者至少获得类似的平滑度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T19:07:10.760

我想你正在寻找样条

[http://msdn.microsoft.com/en-us/library/554h284b.aspx](http://msdn.microsoft.com/en-us/library/554h284b.aspx)

Gabe 是正确的，来自 Forms

在 WPF 下，您可以尝试 PolyBezierSegment，但它需要 4 分。可能你可以投入 3 点和 1 点来塑造它。

```
<Canvas>
    <Path Stroke="Black" StrokeThickness="10">
        <Path.Data>
            <PathGeometry>
                <PathGeometry.Figures>
                    <PathFigureCollection>    
                        <PathFigure StartPoint="100,80">
                            <PathFigure.Segments>
                                <PathSegmentCollection>
                                    <PolyBezierSegment Points="90,200 140,200 160,200 180,200 430,190 430,280" />
                                </PathSegmentCollection>
                            </PathFigure.Segments>
                        </PathFigure>
                    </PathFigureCollection>
                </PathGeometry.Figures>
            </PathGeometry>
        </Path.Data>
    </Path>
</Canvas> 
```

这导致以下曲线

![在此处输入图像描述](../Images/9e4d650951a97f064fdfb4b059112a08.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:23:09.007

您想使用[PathFigure](http://msdn.microsoft.com/en-us/library/ms747393.aspx#paths)，特别是使用一组[BezierSegments](http://msdn.microsoft.com/en-us/library/system.windows.media.beziersegment.aspx)。

# c++ - Erlang 和 C/C++ 集成的状态？

> ID：10486911
> 
> 赞同：7
> 
> 时间：2012-05-07T18:09:51.220
> 
> 标签：c++, c, erlang, erlang-ports

如果我们查看官方[文档](http://erlang.org/doc/tutorial/introduction.html)，我们可以找到各种连接 Erlang 和 C/C++ 的方法。[2009 年](https://stackoverflow.com/questions/1811516/integrating-erlang-with-c)在这里提出了一个类似的问题，我想知道从那时起事情发生了怎样的变化。

是否有任何成熟的稳定库可以完成在 Erlang 和 C 之间实现二进制协议的所有繁琐工作？是`ei`或它们之间有`erl_interface`什么[区别](http://somethingsimilar.com/2007/09/02/erl_interface-is-deprecated-and-i-hate-the-erlang-docs/)？

我的意思是这似乎是一个很常见的问题，我希望有人已经成功地解决了它，不再需要编写自己的 Erlang 端口驱动程序，因为大部分都是通用代码。

PS我也找到了这个库：[EPAPI](http://epapi.googlecode.com/svn/trunk/package/docs/html/index.html)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:48:40.523

自 2009 年以来没有发生重大变化，您链接的问题的最佳答案仍然正确。

NIF 从 R14 开始变得不那么实验性了，并且在一些项目中被积极使用，但它们仍然与 HiPE 编译器不兼容（编译的本机标志）。

# ruby-on-rails - 未定义的方法 ..._index_path Ruby on Rails

> ID：10486916
> 
> 赞同：7
> 
> 时间：2012-05-07T18:10:17.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试使基本表格起作用并且正在苦苦挣扎，因为我不断收到错误

```
 undefined method `profiles_index_path' for #<#<Class:0x4fe1ba8>:0x4fccda0> 
```

我已经检查过了，似乎无法弄清楚我哪里出错了。

在我看来（new.html.erb）我有：

```
 <%= form_for @profile do |f| %>

 <%= f.text_field :name %>
 <%= f.text_field :city %>
 <%= f.text_field :country %>
 <%= f.text_field :about %>

 <%= f.submit "Create Profile" %>

 <% end %> 
```

在我的个人资料控制器中，我有：

```
class ProfilesController < ApplicationController

def new
  @title = "New Profile"
  @profile = Profiles.new
end

def create
  @user = current_user
  @profile = @user.profiles.new(params[:profile])
  if @profile.save
    redirect_to profile_path, :notice => "Welcome to your new profile!"
  else
    render "profiles#new"
  end
end

def edit
  @user = current_user
  @profile = @user.profiles.find(params[:id])
end

def update
  @title = "Update Profile"

  @user = current_user
  @profile = @user.profiles.find(params[:id])

  if @profile.update_attributes(params[:profile])
    redirect_to profile_path
  else
    render action: "edit" 
  end
end

def index
  @user = current_user
  @profile = @user.profiles.all
  @title = "Profile"
end

end 
```

最后在我的个人资料模型中，我有

```
class Profiles < ActiveRecord::Base

belongs_to :user

end 
```

人们可以提供的任何帮助真的将不胜感激，因为我很难过。:)

抱歉忘记包含路线：

```
 controller :profiles do
   get "newprofile" => "profiles#new"
   get "updateprofile" => "profiles#update"
   get "profile" => "profiles#home"
  end

  resources :profiles, :controller => 'profiles' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T20:08:24.570

问题确实是您将模型名称复数的方式。不要那样做。它应该是一个`Profile`，而不是一个`Profiles`。我有一些工作可以让您使用复数模型名称，但答案是坚持 Rails 约定而不是与框架对抗。将您的模型重命名为`Profile`，`url_for`帮助程序将了解如何正确地将新的 Profile 对象转换为`/profiles`URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:14:25.663

如果您运行“rake routes”命令，“profiles_index”是否出现在您的路线中？通常对于模型的索引页面，工作“索引”被省略，因此路线是`profiles_path`

您的错误可能来自您使用过的视图，`profiles_index_path`而不是`profiles_path`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T19:42:35.557

我认为它失败了，因为您的模型名称没有遵循约定。

所以我认为你的问题主要在于你没有遵循模型名称的约定，这通常是单数的，因为每个实例都代表一个配置文件。我认为 form_for 助手正试图弄清楚如何处理它并因此失败。因此，您有两种选择可以尝试解决。将模型名称重构为单数（我不清楚这将是多么困难）或将 :url 参数传递给 form_for 以便它知道发布到哪里。

```
<% form_for @profile, :url => path_to_create_action do |f| %> 
```

更多信息在这里：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-20T04:44:14.400

我正在使用**Rails 5**，我遇到了同样的错误，它是使用这个词`Media`作为我的模型，而 RoR 用作`Medium`复数所以我在执行时得到了不同的路线`rake routes`。

我所做的修复它是：

1.  删除我刚刚创建的模型。

    ```
    rails d scaffold Media 
    ```

2.  编辑`config/initializers/inflections.rb`：

    ```
    ActiveSupport::Inflector.inflections(:en) do |inflect|
        # Here you can put the singular and plural form you expect
        inflect.irregular 'media', 'medias'
    end 
    ```

3.  现在再次执行脚手架：

    ```
    rails g scaffold Media 
    ```

现在你必须以你期望的方式拥有一切。因为您已经覆盖了Ruby on Rails 中的***Pluralizations***和***Singularizations*** ***（Inflections）***。

我希望它有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T18:14:58.040

您是否尝试用以下内容替换您的 form_for 标记？

```
<%= form_for @profile, :as => :post do |f| %> 
```

看起来它正试图将其视为对“/profile”的 GET 请求。而且，由于它没有找到索引操作，所以它会出错。我认为强迫它做一个 POST 将解决这个问题。

# java - 在 Android 中插入数据库失败

> ID：10486920
> 
> 赞同：0
> 
> 时间：2012-05-07T18:10:41.570
> 
> 标签：java, android, database, sqlite

所以我试图在一个有 2 列的表中插入值，一个用于问题 id，另一个用于问题文本。这是我插入它的方式：

```
ContentValues values = new ContentValues();
values.put(HealthyDroidQuizHelper.COLUMN_ID, 1);
values.put(HealthyDroidQuizHelper.COLUMN_QUESTION, "How are you feeling?");
database.insert(HealthyDroidQuizHelper.TABLE_QUESTION, null, values); 
```

该方法返回-1，因此失败。我还尝试使用 database.execSQL() 方法，将我的插入语句硬编码为字符串，但失败并最终导致应用程序崩溃。任何帮助，将不胜感激！

编辑：这是我创建表格的方式

```
private static String CREATE_TABLE_QUESTION = "create table "
        + TABLE_QUESTION + "( " + COLUMN_ID 
        + " integer primary key, " + COLUMN_QUESTION + " text not null);";

    public void onCreate(SQLiteDatabase db)
    {
        db.execSQL(CREATE_TABLE_QUESTION);
        //db.execSQL(CREATE_TABLE_ANSWER);
        //db.execSQL(CREATE_TABLE_ASSOCIATION);
    } 
```

这是更新的 Logcat 输出

```
05-07 18:53:37.762: W/KeyCharacterMap(213): No keyboard for id 0
05-07 18:53:37.772: W/KeyCharacterMap(213): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-07 18:53:38.902: E/Database(213): Error inserting question=What is your name? _id=2
05-07 18:53:38.902: E/Database(213): android.database.sqlite.SQLiteException: table question has no column named question: , while compiling: INSERT INTO question(question, _id) VALUES(?, ?);
05-07 18:53:38.902: E/Database(213):    at android.database.sqlite.SQLiteProgram.native_compile(Native Method)
05-07 18:53:38.902: E/Database(213):    at android.database.sqlite.SQLiteProgram.compile(SQLiteProgram.java:110)
05-07 18:53:38.902: E/Database(213):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:59)
05-07 18:53:38.902: E/Database(213):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
05-07 18:53:38.902: E/Database(213):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1027)
05-07 18:53:38.902: E/Database(213):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1413)
05-07 18:53:38.902: E/Database(213):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1286)
05-07 18:53:38.902: E/Database(213):    at ca.bcit.comp4900.QuestionDataSource.storeQuestion(QuestionDataSource.java:56)
05-07 18:53:38.902: E/Database(213):    at ca.bcit.comp4900.TestDatabaseActivity.changeText(TestDatabaseActivity.java:38)
05-07 18:53:38.902: E/Database(213):    at ca.bcit.comp4900.TestDatabaseActivity.onClick(TestDatabaseActivity.java:60)
05-07 18:53:38.902: E/Database(213):    at java.lang.reflect.Method.invokeNative(Native Method)
05-07 18:53:38.902: E/Database(213):    at java.lang.reflect.Method.invoke(Method.java:521)
05-07 18:53:38.902: E/Database(213):    at android.view.View$1.onClick(View.java:2026)
05-07 18:53:38.902: E/Database(213):    at android.view.View.performClick(View.java:2364)
05-07 18:53:38.902: E/Database(213):    at android.view.View.onTouchEvent(View.java:4179)
05-07 18:53:38.902: E/Database(213):    at android.widget.TextView.onTouchEvent(TextView.java:6541)
05-07 18:53:38.902: E/Database(213):    at android.view.View.dispatchTouchEvent(View.java:3709)
05-07 18:53:38.902: E/Database(213):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
05-07 18:53:38.902: E/Database(213):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
05-07 18:53:38.902: E/Database(213):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
05-07 18:53:38.902: E/Database(213):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
05-07 18:53:38.902: E/Database(213):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
05-07 18:53:38.902: E/Database(213):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
05-07 18:53:38.902: E/Database(213):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
05-07 18:53:38.902: E/Database(213):    at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
05-07 18:53:38.902: E/Database(213):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
05-07 18:53:38.902: E/Database(213):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
05-07 18:53:38.902: E/Database(213):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 18:53:38.902: E/Database(213):    at android.os.Looper.loop(Looper.java:123)
05-07 18:53:38.902: E/Database(213):    at android.app.ActivityThread.main(ActivityThread.java:4363)
05-07 18:53:38.902: E/Database(213):    at java.lang.reflect.Method.invokeNative(Native Method)
05-07 18:53:38.902: E/Database(213):    at java.lang.reflect.Method.invoke(Method.java:521)
05-07 18:53:38.902: E/Database(213):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-07 18:53:38.902: E/Database(213):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-07 18:53:38.902: E/Database(213):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:16:31.060

column_id 是自增字段吗？如果是这样，则将其值作为 null 传递。然后 sqlite 将为您分配下一个数字。如果它是自动增量并且您正在传递一个值，那么您可能会遇到重复键失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:18:05.053

您的数据库方案是什么样的？您是否将 ID 列指定为“自动生成”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:49:36.480

您的表创建语句使用文字“COLUMN_QUESTION”作为列名，而不是为其分配的值，这可能只是“问题”。从字符串文字中删除`COLUMN_QUESTION`以确保使用其值而不是文字字符串。

# haskell - Haskell 类型声明

> ID：10486921
> 
> 赞同：3
> 
> 时间：2012-05-07T18:10:41.890
> 
> 标签：haskell, types

在 Haskell 中，为什么会这样编译：

```
splice :: String -> String -> String
splice a b = a ++ b
main = print (splice "hi" "ya") 
```

但这不会：

```
splice :: (String a) => a -> a -> a
splice a b = a ++ b
main = print (splice "hi" "ya")

>> Type constructor `String' used as a class 
```

我会认为这些是同一件事。有没有办法使用第二种样式，避免重复类型名称 3 次？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T19:10:28.803

types 中的`=>`语法适用于[typeclasses](http://book.realworldhaskell.org/read/using-typeclasses.html)。

当您说 时`f :: (Something a) => a`，您并不是说那`a` *是*a `Something`，而是说它是“类型组中的”`Something`类型。

例如，`Num`是一个类型类，其中包括 和 等`Int`类型`Float`。不过，没有类型`Num`，所以我不能说

```
f :: Num -> Num
f x = x + 5 
```

但是，我可以说

```
f :: Int -> Int
f x = x + 5 
```

或者

```
f :: (Num a) => a -> a
f x = x + 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T19:28:47.737

其实是可以的：

```
Prelude> :set -XTypeFamilies
Prelude> let splice :: (a~String) => a->a->a; splice a b = a++b
Prelude> :t splice
splice :: String -> String -> String 
```

这使用了等式约束`~`。但我会避免这种情况，它并不比简单地编写短得多`String -> String -> String`，而是更难理解，编译器也更难解决。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T20:29:58.027

> 有没有办法使用第二种样式，避免重复类型名称 3 次？

为了简化类型签名，您可以使用类型同义词。例如你可以写

```
type S = String
splice :: S -> S -> S 
```

或类似的东西

```
type BinOp a = a -> a -> a
splice :: BinOp String 
```

但是，对于像 一样简单的东西`String -> String -> String`，我建议只输入它。类型同义词应该用于使类型签名更具可读性，而不是更少。

在这种特殊情况下，您还可以将类型签名概括为

```
splice :: [a] -> [a] -> [a] 
```

因为它根本不依赖于作为字符的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T18:17:44.827

嗯...`String`是一种类型，而您正试图将其用作一个类。

如果您想要`splice`函数的多态版本示例，请尝试：

```
import Data.Monoid

splice :: Monoid a=> a -> a -> a
splice = mappend 
```

*编辑*：所以这里的语法是出现在左边的大写单词`=>`是*类型类*约束出现在右边的变量`=>`。右边的所有大写单词都是*类型的名称*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T19:10:47.483

您可能会在[Learn You a Haskell](http://learnyouahaskell.com/types-and-typeclasses)章节中找到方便的解释。

# erlang - 让 DynamoDB 从 Erlang 工作

> ID：10486928
> 
> 赞同：0
> 
> 时间：2012-05-07T18:11:24.313
> 
> 标签：erlang, amazon-dynamodb

我正在尝试使用 Erlang ddb 模块与亚马逊的 DynamoDB 进行交互，但在尝试设置时遇到了一个奇怪的错误。我调用 ddb_iam:credentials() 并返回“ok”，但 ddb_iam:token() 函数崩溃并出现如下错误：（此示例直接取自手册页。

```
ddb_iam:credentials(AccessKey, SecretKey).
{ok, Key, Secret, Token} = ddb_iam:token(129600).
** exception error: bad argument
     in function  ets:lookup/2
        called as ets:lookup(ibrowse_lb,{"sts.amazonaws.com",443})
     in call from ibrowse:send_req/6 (src/ibrowse.erl, line 313)
     in call from ddb_aws:retry/4 (src/ddb_aws.erl, line 50)
     in call from ddb_iam:token/1 (src/ddb_iam.erl, line 63)
8> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:40:41.000

听起来 ibrowse 没有启动：

```
ibrowse:start(). 
```

# java - JTable 中的 JProgressBar 未更新

> ID：10486931
> 
> 赞同：1
> 
> 时间：2012-05-07T18:11:44.377
> 
> 标签：java, swing, scala, jtable, jprogressbar

为什么以下代码中的进度条不更新，我将如何让它们更新？

```
import java.awt.event.{ActionListener, ActionEvent}
import javax.swing.table.{TableCellRenderer, AbstractTableModel}
import javax.swing.{Timer, JTable, JProgressBar, JFrame}

object TestProgressBar {
  val frame = new JFrame()
  val model = new TestModel()
  val table = new JTable(model)

  class TestModel extends AbstractTableModel {
    def getColumnCount = 4

    def getRowCount = 4

    def getValueAt(y: Int, x: Int) = "%d,%d".format(x, y)

    override def setValueAt(value: Any, row: Int, col: Int) {
      if (col == 0) {
        model.fireTableCellUpdated(row, col);
      }
    }
  }

  class TestCellRenderer extends TableCellRenderer with ActionListener {
    val progressBar = new JProgressBar()
    val timer = new Timer(100, this)

    progressBar.setIndeterminate(true)
    timer.start()

    override def getTableCellRendererComponent(tbl: JTable, value: AnyRef,
                                               isSelected: Boolean,
                                               hasFocus: Boolean,
                                               row: Int, column: Int) = {
      progressBar
    }

    override def actionPerformed(e: ActionEvent) {
      val model = table.getModel
      for (row <- 0 to model.getRowCount) {
        model.setValueAt(0, row, 0)
      }
    }
  }

  def main(args: Array[String]) {
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)

    table.getColumnModel.getColumn(0).setCellRenderer(new TestCellRenderer())

    frame.add(table)

    frame.pack()
    frame.setVisible(true)
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:21:44.243

正如@Robin 所指出的，只有在模型更新时才会调用渲染器。您需要定期更改所需行中的值。此示例使用`javax.swing.Timer`.

```
private class TestCellRenderer implements TableCellRenderer, ActionListener {

    JProgressBar bar = new JProgressBar();

    Timer timer = new Timer(100, this);

    public TestCellRenderer() {
        bar.setIndeterminate(true);
        timer.start();
    }

    @Override
    public Component getTableCellRendererComponent(JTable table,
        Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        return bar;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        TableModel model = table.getModel();
        for (int row = 0; row < model.getRowCount(); row++) {
            table.getModel().setValueAt(0, row, 0);
        }
    }
} 
```

您可能还想实现`setValueAt()`，因为`AbstractTableModel`实现是空的：

```
@Override
public void setValueAt(Object aValue, int row, int col) {
    if (col == 1) {
        // update your internal model and notify listeners
        this.fireTableCellUpdated(row, col);
    }
} 
```

附录：作为参考，这里有一个对应的 Java 实现来补充 Scala。

![在此处输入图像描述](../Images/5a0c079d4cbd293eff641127af287e9d.png)

代码：

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.Timer;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableModel;

/**
* @see http://stackoverflow.com/a/10491290/230513
*/
public class TestProgressBar extends JPanel {

    private JTable table = new JTable(new TestModel());
    public TestProgressBar() {
        table.getColumnModel().getColumn(0).setCellRenderer(new TestCellRenderer());
        table.setPreferredScrollableViewportSize(new Dimension(320, 120));
        this.add(new JScrollPane(table));
    }

    private class TestModel extends AbstractTableModel {

        @Override
        public int getRowCount() {
            return 4;
        }

        @Override
        public int getColumnCount() {
            return 4;
        }

        @Override
        public Object getValueAt(int row, int col) {
            return String.valueOf(row) + ", " + String.valueOf(col);
        }

        @Override
        public void setValueAt(Object aValue, int row, int col) {
            // update internal model and notify listeners
            fireTableCellUpdated(row, col);
        }
    }

    private class TestCellRenderer implements TableCellRenderer, ActionListener {

        JProgressBar bar = new JProgressBar();
        Timer timer = new Timer(100, this);

        public TestCellRenderer() {
            bar.setIndeterminate(true);
            timer.start();
        }

        @Override
        public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            return bar;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            TableModel model = table.getModel();
            for (int row = 0; row < model.getRowCount(); row++) {
                table.getModel().setValueAt(0, row, 0);
            }
        }
    }

    private void display() {
        JFrame f = new JFrame("TestProgressBar");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestProgressBar().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:38:11.410

不确定 Scala，但在 Swing 中，返回的组件`TableRenderer`仅用于创建“印章”。所以实际的组件不包含在 中`JTable`，只是它的一个标记。这意味着如果您之后更新组件，这不会反映在 `JTable.

主要好处是您可以在渲染器中重用您的组件。例如，要渲染`String`s，您只需要一个`JLabel`实例来更新文本并让渲染器返回它。

[Swing table 教程中](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)的渲染器部分对此进行了更详细的解释

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:48:49.517

我似乎通过覆盖 JProgressBar 的 isDisplayable 和 repaint 方法解决了这个问题。

```
import javax.swing.table.{TableCellRenderer, AbstractTableModel}
import javax.swing.{JTable, JProgressBar, JFrame}

object TestProgressBar {
  val frame = new JFrame()
  val model = new TestModel()
  val table = new JTable(model)

  class TestModel extends AbstractTableModel {
    def getColumnCount = 4

    def getRowCount = 4

    def getValueAt(y: Int, x: Int) = "%d,%d".format(x, y)
  }

  class TestCellRenderer extends TableCellRenderer {
    val progressBar = new JProgressBar() {
      override def isDisplayable = true
      override def repaint() { table.repaint() }
    }

    progressBar.setIndeterminate(true)

    override def getTableCellRendererComponent(tbl: JTable, value: AnyRef,
                                               isSelected: Boolean,
                                               hasFocus: Boolean,
                                               row: Int, column: Int) = {
      progressBar
    }
  }

  def main(args: Array[String]) {
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)

    table.getColumnModel.getColumn(0).setCellRenderer(new TestCellRenderer())

    frame.add(table)

    frame.pack()
    frame.setVisible(true)
  }
} 
```

# php - 替换页面上的文本 php 类似 element.innerhtml

> ID：10486933
> 
> 赞同：-3
> 
> 时间：2012-05-07T18:11:52.957
> 
> 标签：php

您好，我一直在寻找一些类似于 javascript 中 element.innerHTML 的 php 代码，但我找不到。我需要一些代码，例如在 60 秒内从 1 到 60，但如果我使用 echo 这样做，它只会将所有内容放在一起，这不应该发生。我需要一些只是替换文本的东西。我也不想每秒都重新加载我的页面，而且我没有能力写入文件（我可以读取它们）。请不要告诉我我应该用javascript来做。那么有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:15:59.373

替换一些文本尝试 str_replace [http://de3.php.net/manual/de/function.str-replace.php](http://de3.php.net/manual/de/function.str-replace.php) 或不区分大小写的 str_ireplace

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:44:34.033

您可以使用 PHP 吐出执行替换的 javascript。由于 PHP 是服务器端的，并且无法访问客户端的页面呈现，因此不会有纯 PHP 解决方案。

假设您需要更改的文本位于`<div>`名为“replaceMe”的标签中。您将需要使用 PHP 中的 ob_flush() 函数在需要显示时强制退出 javascript。要初始化的 PHP 是

```
if (ob_get_level() == 0) ob_start(); 
```

然后，每次需要更新时，您的 PHP 代码中都会有类似的内容添加到页面正文中：

```
echo '<script type="text/javascript" language="javascript">';
echo "document.getElementById('replaceMe').innerHTML = 'Text for this iteration';";
echo '</script>';
flush(); ob_flush(); 
```

当然，如果你想让自己更容易，你可以创建一个 PHP 函数来打印所有这些，给定一个包含要替换的文本的参数。

然后最后你需要有

```
ob_end_flush(); 
```

# php - 将 PHP 脚本应用于具有多行的文件

> ID：10486934
> 
> 赞同：0
> 
> 时间：2012-05-07T18:11:54.250
> 
> 标签：php, file, command-line, stdin, lines

假设我必须遵循 php 脚本：

```
$str = "be43f751d380a70d13287006a5f7795a";
$arr = str_split($str, 2);
$strT = implode("", substr_replace($arr ,"",-1));
printf('%s:%s' . PHP_EOL, $str, $strT); 
```

输出：`be43f751d380a70d13287006a5f7795a:b4f5d8a01270af75`

这适用于单个字符串，但如果我想将其应用于多个字符串，一个包含多个字符串且行尾的文件：

```
cat strings.txt
dc7380f92396b65be0c9dc2fda593acc
e5a391e5b84ebcd51dc467de52f88558
4ec7814976d12b40638fbe311856f84f 
```

期望的输出：

```
dc7380f92396b65be0c9dc2fda593acc:d78f29b5ecd2d53c
e5a391e5b84ebcd51dc467de52f88558:ea9eb4bd1c6d5f85
4ec7814976d12b40638fbe311856f84f:4c847d2468b315f4 
```

如果我们可以在命令行中自行指定文件，那就太好了：

```
php script.php strings.txt > trimmed.txt 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:48:45.210

好吧，我还建议阅读 php 手册，但不是 foreach，而是 file() 函数。这可以这样做：

```
<?php
foreach(file($argv[0]) as $line)
{
    $arr = str_split($line, 2);
    $strT = implode("", substr_replace($arr ,"",-1));
    printf('%s:%s' . PHP_EOL, $str, $strT);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:51:33.913

对于命令行解决方案，请运行以下命令：

```
while read str; do php -f myfun.php $str; done < strings.txt 
```

其中 myfun.php 是以下 PHP 脚本：

```
$arr = str_split($argv[1], 2);
$strT = implode("", substr_replace($arr ,"",-1));
printf('%s:%s' . PHP_EOL, $argv[1], $strT); 
```

# jquery - JQuery - 仅显示每篇文章的第一段

> ID：10486939
> 
> 赞同：3
> 
> 时间：2012-05-07T18:12:10.937
> 
> 标签：jquery

我有一个用于显示新闻文章的页面。

```
<article>

<h4>News Article One</h4>
<h5>25th December 2012</h5>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis at purus at dui iaculis adipiscing. Maecenas viverra arcu nec libero accumsan commodo convallis purus sagittis. Etiam fermentum commodo libero sit amet tincidunt. Fusce eu dolor fermentum risus ornare imperdiet rhoncus eu ipsum. Etiam eleifend tempor lacus. Praesent blandit dui at nulla laoreet vehicula. In rhoncus ornare leo venenatis interdum. Vestibulum hendrerit aliquet lectus. Nam ullamcorper ullamcorper sem, a congue massa accumsan vitae.</p>

<p>Etiam ullamcorper mattis lectus, nec mollis odio condimentum vel. Nunc quam ligula, laoreet eu mollis posuere, ultrices varius diam. Ut sapien quam, mattis consequat adipiscing vel, posuere non lacus. Donec id mauris purus. Nam iaculis aliquam pellentesque. Vestibulum eleifend nulla eget lacus aliquam rutrum. Suspendisse adipiscing vestibulum lorem, mattis hendrerit odio faucibus vel.</p>

</article>

<article>

<h4>News Article Two</h4>
<h5>25th January 2012</h5>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis at purus at dui iaculis adipiscing. Maecenas viverra arcu nec libero accumsan commodo convallis purus sagittis. Etiam fermentum commodo libero sit amet tincidunt. Fusce eu dolor fermentum risus ornare imperdiet rhoncus eu ipsum. Etiam eleifend tempor lacus. Praesent blandit dui at nulla laoreet vehicula. In rhoncus ornare leo venenatis interdum. Vestibulum hendrerit aliquet lectus. Nam ullamcorper ullamcorper sem, a congue massa accumsan vitae.</p>

<p>Etiam ullamcorper mattis lectus, nec mollis odio condimentum vel. Nunc quam ligula, laoreet eu mollis posuere, ultrices varius diam. Ut sapien quam, mattis consequat adipiscing vel, posuere non lacus. Donec id mauris purus. Nam iaculis aliquam pellentesque. Vestibulum eleifend nulla eget lacus aliquam rutrum. Suspendisse adipiscing vestibulum lorem, mattis hendrerit odio faucibus vel.</p>

</article> 
```

我希望只显示每篇文章的第一段，并让其余段落（仅针对该文章）在单击“阅读更多”链接时可见。

目前我正在使用这个：

```
<script>
$(document).ready(function() {
 $('article p').eq(1).hide();
 $('a.more').click(function() {
  $('article p').eq(1).show();
  $(this).hide();
  return false;
 });
});
</script> 
```

然而，上述内容仅适用于第一篇文章，第一段，我希望它适用于所有文章，第一段。

感谢所有时间和帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:16:05.210

```
$('article').each(function(){ $(this).find('p:not(:first)').hide()}); 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/fdp5L/1/](http://jsfiddle.net/fdp5L/1/)

以下是每篇文章的“扩展链接”示例：http: [//jsfiddle.net/fdp5L/5/](http://jsfiddle.net/fdp5L/5/)

html:

```
<article>
    <p>first 1</p>
    <p>second 1</p>
    <p>third 1</p>
    <p>fourth 1</p>
    <div class="more">more...</div>
</article>
<article>
    <p>first 2</p>
    <p>second 2</p>
    <p>third 2</p>
    <p>fourth 2</p>
    <div class="more">more...</div>
</article> 
```

javascript:

```
$('article').each(function(){ $(this).find('p:not(:first)').hide()});
$('.more').on('click', function(){
    $(this).hide().closest('article').find('p').show();    
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:13:50.950

```
$('article').each(function() {
 $('p:eq(1)', this).hide();
}); 
```

或者

```
$('p:eq(1)', $('article')).hide(); 
```

或者

```
$('p:gt(0)', $('article')).hide(); 
```

或者

```
$('p:not(:first)', $('article')).hide(); 
```

并在`.more`点击时显示

```
$('a.more').click(function() {
  $('p:eq(1)', $('article')).show();
  $(this).hide();
  return false;
}); 
```

如果`a.more`是直接孩子，`article`那么您可以尝试：

```
$('a.more').click(function(e) {
  e.preventDefault();
  $('p:eq(1)', $(this).parent()).show();
  $(this).hide();
}); 
```

或者如果没有，请尝试：

```
 $('a.more').click(function(e) {
    e.preventDefault();  
    $(this).closest("article").find("p:eq(1)").show();
    item.hide();
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:17:41.457

一个简单的查询：

```
$(function() {

  $("article").each(function() {

    // hide all second paragraphs
    $(this).find("p:not(:first)").hide();
    // add read more links
    $(this).find("p:visible").append("<p><a href='#' class='read-more'>read more</a></p>"); 

  });

  $(".read-more").click(function() {

    // show the hided paragraph
    $(this).closest("article").find("p").fadeIn();
    // hide the read more link
    $(this).hide();

  });

}); 
```

[JsBin 中的实例](http://jsbin.com/ukudax/4/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T18:22:39.067

尝试，

```
$('p:eq(1)', $('article')).hide(); 
```

**完整代码：**

```
$(document).ready(function() {
    $('p:eq(1)', $('article')).hide();

    $('a.more').click(function() {
        $('p:eq(1)', $('article')).show();
        $(this).hide();
        return false;
    });
}); 
```

[**演示**](http://jsfiddle.net/dZMSD/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T18:28:14.260

我猜你想显示除第一个以外的所有 Para，并在单击更多按钮/链接时显示剩余的。这会做

```
$(document).ready(function() {
    $('article p').hide();
    var articles=$('article');
    $.each(articles,function(){
        $(this).find("p").first().show();
    });

 $('a.more').click(function(e) {
    e.preventDefault();  
    var item=$(this);
    item.closest("article").find("p").show();
    item.hide();
   return false;
 });
}); 
```

`more`假设您在文章元素中有一个带有类的标签。

工作演示[http://jsfiddle.net/jtQ5b/22/](http://jsfiddle.net/jtQ5b/22/)

# c# - C# 线程，如何使线程运行带有参数的方法？

> ID：10486940
> 
> 赞同：2
> 
> 时间：2012-05-07T18:12:18.447
> 
> 标签：c#, multithreading

使用全局变量作为参数是唯一的方法还是有更时尚的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:14:16.647

您可以使用[ParameterizedThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)来启动带参数的线程。

例子：

```
Thread newThread = new Thread(myObj.DoMethod);
newThread.Start(parameter); 
```

虽然，我通常最终使用 lambdas

```
Thread newThread = new Thread(() => myObj.DoMethod(param1, param2, param3));
newThread.Start(); 
```

这可能更方便，因为 ParameterizedThreadStart 将单个`object`作为参数。这很少是我想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:14:51.637

您可以使用一个简单的闭包`Action<T>`，然后使用参数调用您的方法：

```
var thread = new Thread(() =>
{
    CallSomeMethod(someParam);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:18:03.070

正如 root46 已经回答的那样，如果直接使用线程，则使用[ParameterizedThreadStart](http://msdn.microsoft.com/en-us/library/1h2f2459.aspx)。但是，如果您使用 .NET 4 或更高版本，还可以查看[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)和[Task Parallel Library 。](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T18:26:55.960

更与语言无关的方法是，当该方法只能接受一个参数并且您有多个数据时，请为您想要的每个参数创建一个具有属性的新类，然后只需传递一个那堂课。（这就是您看到的`EventArgs`与事件处理相关的对象所做的事情。）

话虽如此，正如其他人所说，使用 lambdas 的闭包是一种相当巧妙和简单的做事方式，在实践中往往更方便。

# android - 用于不常见 mime 类型的 Android 意图过滤器

> ID：10486947
> 
> 赞同：0
> 
> 时间：2012-05-07T18:12:55.890
> 
> 标签：android, android-manifest, mime-types, intentfilter

我正在尝试编写一个处理 sgf 文件（围棋游戏的游戏记录）的应用程序。

我希望能够从文件资源管理器、邮箱或互联网打开 sgf 文件。

我在清单中试过这个：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />

    <data android:mimeType="application/x-go-sgf" />
</intent-filter> 
```

不幸的是，它不起作用，尽管它正在使用“text/csv”。但是，以下代码显示“application/x-go-sgf”：

```
MimeTypeMap mime = MimeTypeMap.getSingleton();
String mt = mime.getMimeTypeFromExtension("sgf");
Log.d("mime", mt); // application/x-go-sgf 
```

Android 似乎知道 sgf 文件，那么为什么我无法使用文件资源管理器中的应用程序打开这些文件？

# xml - 将多个访问表导出到单个 XML

> ID：10486948
> 
> 赞同：6
> 
> 时间：2012-05-07T18:13:03.173
> 
> 标签：xml, ms-access, vba

我有多个要导出到单个 XML 文件中的 Microsoft Access 表。如何将表的顺序和层次结构操作为所需的 XML 结构？本质上，我希望能够逆向导入 XML 过程，该过程会自动将数据分解为多个表。我可以随意使用 VBA、SQL 和任何内置的导出功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-01T00:09:12.707

我使用附件在大约五分钟内生成了一个 300 万行的嵌套 xml。

有两个关键项目，

1）一个简单的VB，

```
Public Function Export_ListingData()

    Dim objOtherTbls As AdditionalData

    On Error GoTo ErrorHandle
    Set objOtherTbls = Application.CreateAdditionalData
    objOtherTbls.Add "ro_address"
    objOtherTbls.Add "ro_buildingDetails"
    objOtherTbls.Add "ro_businessDetails"
    objOtherTbls.Add "ro_businessExtras"
    objOtherTbls.Add "ro_businessExtrasAccounts"
    objOtherTbls.Add "ro_businessExtrasAccom"
    objOtherTbls.Add "ro_businessExtrasAccom2"

    Application.ExportXML ObjectType:=acExportTable, _
                DataSource:="ro_business", _
                DataTarget:="C:\Users\Steve\Documents\Conversions\ListData.xml", _
                AdditionalData:=objOtherTbls
Exit_Here:
        MsgBox "Export_ListingData completed"
        Exit Function
ErrorHandle:
        MsgBox Err.Number & ": " & Err.Description
        Resume Exit_Here
End Function 
```

2) 使用从主键到外键的连接来链接关系管理器中的表。

如果没有关系，代码将生成一个顺序的 xml 文件，如果主键之间存在关系，您将收到 31532 错误并且数据导出将失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T06:30:13.937

这是通过 VBA 的解决方案：http:
[//msdn.microsoft.com/en-us/library/ff193212.aspx](http://msdn.microsoft.com/en-us/library/ff193212.aspx)

创建一个 from 并在其上放置一个按钮。右键单击按钮并选择“构建事件”并通过以下代码：

```
Dim objOtherTbls As AdditionalData

Set objOtherTbls = Application.CreateAdditionalData

'Identify the tables or querys to export
objOtherTbls.Add "internet"
objOtherTbls.Add "mokaleme"

'Here is where the export takes place
Application.ExportXML ObjectType:=acExportTable, _
DataSource:="internet", _
DataTarget:="C:\myxml.xml", _
AdditionalData:=objOtherTbls

MsgBox "Export operation completed successfully." 
```

您必须在此处和引号之间键入表的名称：

```
 objOtherTbls.Add "internet"
    objOtherTbls.Add "mokaleme"

    DataSource:="internet" 
```

# mysql - 汇总 SQL 中的一列

> ID：10486950
> 
> 赞同：2
> 
> 时间：2012-05-07T18:13:16.507
> 
> 标签：mysql, sql, phpmyadmin

我正在尝试在 phpmyadmin 中运行一个 SQL 查询，该查询将总计多行并将该总计插入单元格中。

该文件按日期排序，然后是其他一些细节。

我只是很难找到它的语法。

基本上我有一列叫做“Points”，另一列叫做“Total_Points”

它需要看起来像这样：

```
+--------+--------------+
| Points | Total Points |
+--------+--------------+
|   10   |      10      |
|   10   |      20      |
|   10   |      30      |
|   10   |      40      |
+--------+--------------+ 
```

等等等等。
似乎必须有一些东西可以做到这一点，而我只是想念它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:37:27.483

对于运行总和，您可以使用这样的“窗口函数”：

```
create table tbl(ord int, points int);
insert into tbl values(1, 10),(2, 10), (3, 10), (4, 10);

select
    *,
    sum(points) over w total_points
from tbl
window w as (order by ord);

 ord | points | total_points 
-----+--------+--------------
   1 |     10 |           10
   2 |     10 |           20
   3 |     10 |           30
   4 |     10 |           40 
```

我将您的标准“汇总”`ORDER BY`为 column `ord`。你当然可以更换它。

除此之外：您没有指定具体的数据库供应商。我的示例在 PostgreSQL 上运行。其他 SQL 方言可能略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:18:27.103

关于 SQL 中的累积和有很多讨论。

你可能想看看[这篇文章](http://weblogs.sqlteam.com/mladenp/archive/2009/07/28/SQL-Server-2005-Fast-Running-Totals.aspx)。如果速度不是大问题，您也可以简单地使用：

```
select t1.id, t1.SomeNumt, SUM(t2.SomeNumt) as sum 
from @t t1 
inner join @t t2 
  on t1.id >= t2.id 
  group by t1.id, t1.SomeNumt 
  order by t1.id 
```

关键问题是 SQL 实际上并不按任何顺序存储行。“运行总计”的 eda 假定行有顺序，默认情况下，这不是真的。在 SQL Server 2012 中，有一个用于此的功能，但在人们使用它之前，这是我们能做的最好的。

# asp.net - 当我更新另一个 gridview 时 ASP.NET Boundfield 发生变化

> ID：10486951
> 
> 赞同：0
> 
> 时间：2012-05-07T18:13:19.330
> 
> 标签：asp.net, gridview

我在 gridview 中有一个boundfield，它以编程方式接收其中内容的超链接。它在下拉列表索引更改后获取一个新数据集。数据集的其中一列会将链接应用到包含数据的字段并跳过那些没有，您可以在下面看到我应用链接的逻辑：

```
if (e.Row.DataItem != null && int.TryParse(e.Row.Cells[4].Text, out incidents))
{
  HyperLink incidentsLink = new HyperLink();
  incidentsLink.ForeColor = System.Drawing.Color.Blue;
  incidentsLink.NavigateUrl = "~/somesite.aspx?no=" + stnNum + "&dt=" + date;
  incidentsLink.Text = e.Row.Cells[4].Text;
  e.Row.Cells[4].Controls.Add(incidentsLink);
} 
```

这适用于网格视图的 OnRowDataBound。然后我有另一个网格视图，它连接到另一个下拉列表。当任一下拉列表更改索引时，它会为相关的 gridview 抓取一个新数据集并使用更新面板触发 ajax 更新。

当第二个 gridview 更新它会删除第一个 gridview 中的链接时会发生什么。它不会删除保留的文本，但文本不再锚定到链接。以这种方式创建并放入网格视图的所有链接都将失去其链接属性，但是使用 asp:HyperLinkField 创建的字段保持不变。问题是 stnNum 和 date 不是为第一个 gridview 返回的数据集的一部分，所以我必须在 gridview 已经构建后将它们添加为链接。

我能想到的唯一解决方案是每次第二个 gridview 更新时重新触发将链接添加到 gridview 的函数。任何其他解决方案都会有所帮助，或者解释为什么我的链接被删除会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:18:27.437

仅在没有任何 POSTBACK 时尝试绑定 GridView/DropDowns。我相信 POST Back 事件会让您的 gridview & Controls 以某种方式丢失他们的数据。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
    // Bind your Grids & Dropdowns here on page load
    }
} 
```

# objective-c - 传递带有希伯来语值问题的 JSON 数据（UTF8？）

> ID：10486952
> 
> 赞同：1
> 
> 时间：2012-05-07T18:13:24.960
> 
> 标签：objective-c, json, utf-8, sbjson

我有这个方法-

```
NSArray *objects = [NSArray arrayWithObjects:appDelegate.UserID,itemName.text,@"1",@"1",itemDegem.text,itemDescription.text, nil];
NSArray *keys = [NSArray arrayWithObjects:@"userId",@"itemName",@"itemCategoryId",@"regionId",@"degemName",@"itemDescription", nil];

NSDictionary *registerDict = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
NSString *jsonRequest = [registerDict JSONRepresentation];    
NSLog(@"jsonRequest is %@", jsonRequest);

NSURL *url = [NSURL URLWithString:@"http://www.somedomain.com/method"];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: requestData];

NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];
if (connection) {
    self.responseData = [NSMutableData data];
} 
```

但是当我在我的对象中发送不是英语的字符串时，我从服务器收到错误。现在，我知道这是一个 UTF8 问题，但我确实将它设置为 UTF8。有人可以帮我弄清楚吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:36:08.293

我认为错误`strlen([jsonRequest UTF8String])`不等于`[jsonRequest length]`.

用于使用`NSData *requestData = [jsonRequest dataUsingEncoding:NSUTF8StringEncoding];`UTF8 编码将 NSString 转换为 NSData。

# c# - 读取句子中每个单词的 ASCII 总和

> ID：10486955
> 
> 赞同：-1
> 
> 时间：2012-05-07T18:14:02.010
> 
> 标签：c#, .net

我是 C# 的新手。我正在编写 ac# 函数来读取句子中每个单词的 ASCII 总和。

下面是我的代码。当我将每个字符转换为整数时会出现问题。

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    char[] chars = {' ','\r','\n'};
    string[] str = textBox1.Text.Split(chars, StringSplitOptions.RemoveEmptyEntries);
    int[] sum;
    for (int i = 0; i < str.Length; i++)
    {

        int[] asciiChar = Encoding.ASCII.GetChars(str[i]); // error occurs here.
        sum[i] = asciiChar.Sum();

    }
    label1.Text = sum.Length.ToString();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:19:32.920

`GetChars`期望收到一个`byte[]`. 但是你正在传递一个`string`. 你应该打电话[`GetBytes`](http://msdn.microsoft.com/en-us/library/ds4kkd55.aspx)。

```
byte[] asciiChar = Encoding.ASCII.GetBytes(str[i]); 
```

此外，您忘记分配数组`sum`。

# javascript - 使用 XHTML 中的嵌入式 SVG 从 Javascript 创建动画

> ID：10486964
> 
> 赞同：1
> 
> 时间：2012-05-07T18:14:23.430
> 
> 标签：javascript, dom, animation, xhtml, svg

我在 XHTML 中使用嵌入式 SVG 并想从 Javascript 创建动画，但它没有按预期工作

我正在使用 XPDL 对业务流程进行建模，并将模拟连接到我使用 javascript 制作动画的 SVG 图形。我在 Firefox 中执行此操作，模型和图形嵌入在 XHTML 中。现在的问题是我想使用 animateMotion-Tag 沿路径移动对象。两者都已经存在，所以我尝试将我的解决方案写入 SVG 文件，并且效果很好。它看起来像：

```
<animateMotion xlink:href="#id1" rotate="auto" dur="2s">
    <mpath xlink:href="#id2">
</animateMotion> 
```

当然，命名空间设置正确，因此可以按预期工作。我手动触发它，因此不需要开始时间。现在，我在现有的混合 XHTML/SVG-dom 中做同样事情的方法：

```
function moveAlongPath(elemId,pathId,rotate,duration)
{
  var svgNs = "http://www.w3.org/2000/svg";
  var xlinkNs = "http://www.w3.org/1999/xlink";
  var motionElem = document.createElementNS(svgNs,"animateMotion");
  motionElem.setAttributeNS(xlinkNs,"href","#" + elemId);
  motionElem.setAttributeNS(svgNs,"rotate",rotate);
  motionElem.setAttributeNS(svgNs,"dur",duration + "ms");
  var pathRef = document.createElementNS(svgNs,"mpath");
  pathRef.setAttributeNS(xlinkNs,"href","#" + pathId);
  motionElem.appendChild(pathRef);
  var animElem = svgRootNode.getElementById(elemId); // It is indeed the <svg>-Node
  animElem.appendChild(motionElem);
  // Setting x and y to 0 is important for the Element to be "on" the Path
  animElem.setAttribute("x",0);
  animElem.setAttribute("y",0);
  motionElem.beginElement();
} 
```

当我在firebug中检查dom时，这似乎产生了具有相同属性的相同节点结构，虽然href没有以xlink:为前缀，但是setAttributeNS应该这样做，对吧？这里的问题是我不能用 beginElement() 开始动画。这里什么也没有发生。

我希望那里有帮助，我现在真的很绝望。

编辑：我终于找到了。当我使用时问题消失了

```
setAttributeNS(null,"attr",value) 
```

代替

```
setAttributeNS(svgNs,"attr",value) 
```

如果我错了，请更正这一点，但我的第一种方法不是 XML 被认为的方式吗？不应该有无命名空间的属性吗？无论如何 - 解决了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:58:54.370

采用

```
setAttributeNS(null,"attr",value) 
```

代替

```
setAttributeNS(svgNs,"attr",value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T11:41:23.547

```
variableElementNS.href.baseVal = value; 
```

# jquery - jQuery 对话框“关闭”与 ASP.NET UpdatePanel 冲突

> ID：10486969
> 
> 赞同：5
> 
> 时间：2012-05-07T18:14:42.917
> 
> 标签：jquery, asp.net, updatepanel

我有一个带有以下内容的 ASP.NET UpdatePanel：

```
<asp:UpdatePanel ID="UpdatePanel3" runat="server" UpdateMode="Conditional">
<ContentTemplate>
    <%-- jQuery dialog - Suppliers --%>
    <div id="divSuppliers" style="display: none;">
        <asp:ListBox ID="lstSuppliers" runat="server" SelectionMode="Single" Rows="10" Width="100%"
            DataValueField="SupplierID" DataTextField="SupplierName">
        </asp:ListBox>
        <br /><br />
        <asp:Button ID="btnSelectSupplier" runat="server" Text="Select 2" OnClick="btnSelectSupplier_Click" />
    </div>

    <asp:GridView ID="gvSuppliers" runat="server" AutoGenerateColumns="false" SkinID="gvSkin"
        DataKeyNames="SupplierID" EmptyDataText="No Existing User Roles">
        <Columns>
            <asp:TemplateField HeaderText="Supplier Name">
                <ItemTemplate>
                    <asp:Label ID="lblSupplierName" runat="server" Text='<%# Eval("SupplierName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>

    <asp:Button ID="btnAddSupplier" runat="server" Text="Add Supplier" 
        Visible="false" OnClick="btnAddSupplier_Click" />

</ContentTemplate>
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="btnSelectSupplier" />
</Triggers>
</asp:UpdatePanel> 
```

很简单，真的。只不过是一个用于我的 jQuery 对话框弹出窗口的 div、一个带有单列的 ASP.NET GridView 控件和一个用于异步回发的 ASP.NET 按钮。

这是处理 btnSelectSupplier 的异步回发的 click 事件。

```
protected void btnSelectSupplier_Click(object sender, EventArgs e) {

    // +=+=+=+=+=+=+=+=+=+=+=+=+=+=    
    // WORKS JUST FINE
    List<SupplierItem> suppliers = new List<SupplierItem>();    

    foreach (int i in lstSuppliers.GetSelectedIndices()) {
        suppliers.Add(
            new SupplierItem { SupplierID = Convert.ToInt32(lstSuppliers.Items[i].Value), SupplierName = lstSuppliers.Items[i].Text });
        lstSuppliers.Items[i].Selected = false;
    }

    gvSuppliers.DataSource = suppliers;
    gvSuppliers.DataBind();

    // +=+=+=+=+=+=+=+=+=+=+=+=+=+=
    // DOES NOT WORK!!
    string jq = "$('#divSuppliers').dialog('close');";

    ScriptManager sm = ScriptManager.GetCurrent(this);
    if (sm != null && sm.IsInAsyncPostBack) {
        ScriptManager.RegisterClientScriptBlock(
            this, typeof(Page), Guid.NewGuid().ToString(),
            jq, true);
    }
} 
```

**问题：** GridView 将在异步回发期间正常更新（参见上面的点击事件）；但是，jQuery 对话框拒绝关闭（再次，请参阅上面的事件以及它说不工作的地方）。我正在页面上的 ScriptManager 中注册 javascript (jquery)，因此它应该正在执行并关闭对话框，但由于某种原因它没有。

**编辑：** 打开 jQuery 对话框并使其成为模态的代码。

```
protected void btnAddSupplier_Click(object sender, EventArgs e) {
    lstSuppliers.ClearSelection();
    lstSuppliers.DataSource = Suppliers.GetAllSuppliers();
    lstSuppliers.DataBind();

    string jq = "var dlg = $('#divSuppliers').dialog({ modal: true, draggable: true, title: 'Suppliers', width: 500 }); dlg.parent().appendTo($('form:first'));";

    ScriptManager sm = ScriptManager.GetCurrent(this);
    if (sm != null && sm.IsInAsyncPostBack) {
        ScriptManager.RegisterClientScriptBlock(
            this, typeof(Page), Guid.NewGuid().ToString(),
            jq, true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:40:44.310

用于 jQuery UI 对话框的 div 应该在 UpdatePanel 之外。

在`btnAddSupplier_Click`您创建对话框并将其移到 UpdatePanel 之外。
在`btnSelectSupplier_Click`您拥有 2 个具有 divSuppliers id 的 div 之后，移动的一个和[从服务器接收](http://msdn.microsoft.com/en-us/library/bb386454%28v=vs.90%29.aspx)的一个（UpdatePanel 机制允许通过使用从服务器返回的 html 重建整个 UpdatePanel DOM 来进行部分页面更新）。

我还建议使用[console.log](https://developer.mozilla.org/en/DOM/console.log)来帮助调试。
添加到关闭对话框js：`console.log($('#divSuppliers'))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:00:00.340

您是否考虑过采用更简单的路线并将事件绑定到按钮客户端以关闭对话框？

```
 $(function () {
    $('#btnSelectSupplier').click(function () {

        $('#divSuppliers').dialog('close');
    });
}); 
```

从用户的角度来看，流程仍然相同。他们单击按钮，对话框关闭。服务器端代码将在对话框关闭后运行，但由于似乎没有任何服务器端逻辑决定您是否要在单击后关闭对话框，这可能符合您的需要。

**编辑**我看到你的问题。您遇到了问题，因为您没有打开现有对话框，而是在单击时重新定义对话框：

```
 string jq = "var dlg = $('#divSuppliers').dialog({ modal: true, draggable: true, title: 'Suppliers', width: 500 }); dlg.parent().appendTo($('form:first'));"; 
```

相反，您想在 document.ready 函数中定义对话框。

```
 $(function () {
    //define the div as a dialog. By default, it will not open until you tell it to
$('#divSuppliers').dialog({ modal: true, draggable: true, title: 'Suppliers', width: 500 });

}); 
```

单击时，您应该像这样打开它

```
 $('#divSuppliers').dialog('open'); 
```

再次，您可能希望在客户端执行此操作，而不是尝试将脚本推送到服务器端事件的页面中，但这取决于您。

**最简单的完整解决方案：**

```
$(function () {

$('#divSuppliers').dialog({ modal: true, draggable: true, title: 'Suppliers', width: 500 });

$('#btnAddSupplier').click(function () {

    $('#divSuppliers').dialog('close');
});
$('#btnSelectSupplier').click(function () {

    $('#divSuppliers').dialog('open');
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:55:34.560

所以这里是解决方案：不要尝试将 ASP.NET UpdatePanel 与 jQuery Dialog 混合使用，因为它们不能很好地配合使用。

我之所以选择这个方向，是因为我认为通过使用 .NET 的 ScriptManager 和 UpdatePanel 控件而不是在 jQuery 中完成这一切，我将花费更少的时间来实现 AJAX。在这一点上，我似乎错了，因为我要回去撕掉 .NET 垃圾并将其全部替换为 jQuery。所以我认为我会节省的所有时间都像风一样消失了。

故事的寓意：如果没有必要，不要将两者混为一谈。

# xcode - 有没有办法在 Xcode 中列出所有文件及其目标？

> ID：10486970
> 
> 赞同：8
> 
> 时间：2012-05-07T18:14:49.523
> 
> 标签：xcode, shell, xcode4, applescript

我是一个有多个开发人员的项目的一部分。该项目包含多个目标。很多时候，文件被提交到 Xcode 项目存储库，其中一些目标未包含（粗心的程序员）。因此，每当我执行“svn up”并运行该应用程序时，我的程序就会崩溃。然后我必须查看所有这些文件，看看哪个文件丢失了目标，然后添加目标，并将文件重新提交到存储库（对于那个粗心的程序员）

是否有某种方法可以通过脚本自动将所有 .m 添加到特定目标？或者列出特定目标缺少的所有文件？

我已经查看了[从脚本中将文件添加到 XCode 项目以](https://stackoverflow.com/questions/1371351/add-files-to-an-xcode-project-from-a-script)供参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T00:22:49.267

我在另一个线程上的回答向您展示了如何查看不属于目标的所有文件：

[https://stackoverflow.com/a/12867723/591586](https://stackoverflow.com/a/12867723/591586)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-11T03:47:11.233

我按照 Paul 的建议做了，并编写了一个 python 脚本来检查 .pbxproj 并列出所有文件和它们包含的目标。您可以轻松修改该脚本，以便突出显示特定目标中未包含的文件。 [https://github.com/laurent74/XPFAT](https://github.com/laurent74/XPFAT)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:35:00.653

以前有人问[过](https://stackoverflow.com/questions/3616995/how-to-compare-2-xcode-targets)这个问题，但那个问题也没有得到答案。

据我所知，XCode 没有任何支持比较目标的构建。然而，该项目只不过是一组 XML 文件......虽然非常详细的 XML 文件......但仍然是 XML。你可以做的（虽然这不是我推荐的）是通过项目的 XML 文件阅读并尝试了解它们是如何构建的。

我知道这不是您正在寻找的答案，但它可能是一种解决方法。

**更新**
我读到`project.pbxproj`了一个有两个目标的测试项目，似乎该项目是建立在引用中的。这很聪明，因为如果您有很多目标，则不会有很大的文件。但是，这确实意味着它真的很难阅读。

# facebook - Facebook 访问令牌因未知原因过期

> ID：10486975
> 
> 赞同：8
> 
> 时间：2012-05-07T18:14:54.797
> 
> 标签：facebook, facebook-graph-api

**来自@avs099 的编辑：**我在这篇文章上开始赏金，因为我有完全相同的问题。我在这里总结一下问题，把帖子本身不做任何改动留在底部以供参考。

* * *

**我们所拥有的：** Facebook 页面访问令牌，如下所述获得：[作为页面进行身份验证，并且使用新的](https://developers.facebook.com/docs/authentication/pages/)[fb_exchange_token](https://developers.facebook.com/roadmap/offline-access-removal/)请求将其有效期延长至 60 天。

**问题是什么：**这个令牌可以工作一段时间 - 有时我可以在几天内将数百张照片发布到我的粉丝页面；有时它实际上是几张照片 - 然后我开始得到任何一张

> (OAuthException) 使访问令牌失效时出错：由于用户更改了密码，会话已失效。

或者

> (OAuthException) 使访问令牌无效的错误：会话与当前存储的会话不匹配。这可能是因为用户在创建会话后更改了密码，或者 Facebook 出于安全原因更改了会话。

Facebook 的例外——但我当然没有更改密码或取消对应用程序的授权。

**附加信息：**不确定这是否重要，但：

1.  有时我在从 Facebook 请求令牌几天后开始使用令牌
2.  令牌是从服务器请求的（由 C# 后端），该服务器位于与将照片发布到粉丝页面的桌面应用程序不同的地理区域。
3.  *有时会*发生几个不同的桌面应用程序从不同的 PC 发布照片（我猜是不同的 IP）

任何人都知道发生了什么以及如何解决这个问题？

谢谢你。

* * *

我有一个 facebook 应用程序有两个目的：

1) 允许用户通过 facebook 连接到我的网站 2) 允许我的网站发布到我的网站 facebook 粉丝页面墙

我关心的是第二种用法。我曾经能够在粉丝页面上设置应用程序的权限，只允许发布（通过 php sdk），而不用担心访问令牌。现在我创建了一些新的粉丝页面，并且该功能似乎已被删除。好的，所以我完成了为用户（始终是我或我的 facebook 粉丝页面的其他管理员）获取访问令牌（成功）的整个过程，并使用该令牌来获取我管理的粉丝页面的访问令牌（我有manage_pages 权限以及我要发布到的页面的其他管理员）。但是，由于引擎开始将内容发布到我的粉丝页面，令牌已过期并出现以下两条错误消息之一：

使访问令牌无效时出错：会话与当前存储的会话不匹配。这可能是因为用户在创建会话后更改了密码，或者 Facebook 出于安全原因更改了会话。

或者

OAuthException：使访问令牌无效时出错：由于用户更改了密码，会话已失效。

但这不是依赖于外部用户的访问令牌，只依赖于内部人员（我和另一个人现在）。我们不会更改密码或做任何事情。我什至在获得令牌后通过注销 Facebook 对其进行了测试，并且效果很好。过了一会儿，它们无缘无故过期，我无法确定。当我得到令牌时，我可以在调试工具上检查它们，它们应该持续 60 天（根据文档），尽管该工具说它们永不过期。

我已经设置了系统，因此当它无法发布到页面时，我会收到一封电子邮件，其中包含指向我的站点的链接以更新令牌。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:37:13.763

正如 Mikhail 指出的那样，如果您收到错误报告，表明令牌无效，因为用户更改了密码。当您已经有一个有效的令牌时，您很可能正在代码中隐藏的某个地方请求一个新令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:50:02.220

可能与这个错误有关？[https://developers.facebook.com/bugs/241373692605971?browse=search_4fb4832bcaf7b1549293950](https://developers.facebook.com/bugs/241373692605971?browse=search_4fb4832bcaf7b1549293950)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T14:15:15.423

我在我的应用程序中遇到了同样的问题 - 有时令牌会过期。

查找原因之一：有时我的应用程序在旧令牌有效时要求新令牌，而 FB 返回错误，或者由于某种原因我无法保存新令牌。在旧令牌过期后 - 对用户应用程序可能只有一个令牌有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:33:38.093

一个临时解决方案是要求用户从其配置文件中删除应用程序，然后再次允许它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T20:34:37.030

您可以获取未经授权的令牌，以便请求新令牌（或任何您喜欢的）。

我可以提供一个很好的解释，但你可以在这里阅读： [https ://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T12:45:58.557

我遇到了同样的问题并解决了“将应用程序重新安装到用户 facebook 应用程序”。如果没有任何问题的答案，它可能会对您有所帮助。

要做到这一点：

1.  面临问题的 facebook 用户转到其 facebook 页面
2.  他/她从他/她的应用程序列表中删除您的应用程序。
3.  重试通过 android 上的 facebook sdk 登录。

# c# - 在 IQueryable 结果中获取索引

> ID：10486976
> 
> 赞同：1
> 
> 时间：2012-05-07T18:14:56.630
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我有一个 LINQ 查询：

```
 var result = (from CC in hc.ClaimCodings
                              join CM in hc.ClaimCodingProcedureCodeModifierXrefs on CC.ClaimCodingID equals CM.ClaimCodingID
                              join PCM in hc.ProcedureCodeModifiers on CM.ProcedureCodeModifierID equals PCM.ProcedureCodeModifierID
                              where CC.CTCustomerSubID == custSub && CC.ClaimID == claimID
                              select new { PCM.ModifierCode }); 
```

*编辑*

可以返回 0 到 4 个项目。我想将每个修饰符代码的值设置为一个属性：

```
 public string ModCode1 { get; set; }

    public string ModCode2 { get; set; }

    public string ModCode3 { get; set; }

    public string ModCode4 { get; set; }

    Modcode1 = result.ModifierCode.getindex(0).firstordefault();

ModeCode2 = second result's ModifierCode;

etc 

etc 
```

除非我接近这个完全错误。我对 LINQ 还不是很好:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:31:20.030

这是你的想法吗？

```
var result = 
(
   from CC in hc.ClaimCodings
       join CM in hc.ClaimCodingProcedureCodeModifierXrefs 
           on CC.ClaimCodingID equals CM.ClaimCodingID
       join PCM in hc.ProcedureCodeModifiers 
           on CM.ProcedureCodeModifierID equals PCM.ProcedureCodeModifierID
   where CC.CTCustomerSubID == custSub && CC.ClaimID == claimID && 
         PCM.ModifierCode != null
   select PCM.ModifierCode
).ToList();

ModCode1 = result.Length > 0 ? result[0] : null;
ModCode2 = result.Length > 1 ? result[1] : null;
ModCode3 = result.Length > 2 ? result[2] : null;
ModCode4 = result.Length > 3 ? result[3] : null; 
```

主要变化：

*   `PCM.ModifierCode != null`在 LINQ 查询中添加了检查。
*   删除了多余的匿名类型构造。
*   将 LINQ 查询结果转换为`List<string>`通过`ToList()`.

但是，正如 BrokenGlass 所说，您最好存储一个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:32:27.097

您可以对结果调用 ToArray() 以立即执行查询并返回值数组。然后，您可以使用检查数组长度的一些三元运算符简写为属性分配值。

```
res = result.Take(4).ToArray();
Modcode1 = res.Length > 0 ? res[0] : null;
Modcode2 = res.Length > 1 ? res[1] : null;
Modcode3 = res.Length > 2 ? res[2] : null;
Modcode4 = res.Length > 3 ? res[3] : null; 
```

# php - php转换数据库中的所有密码

> ID：10486979
> 
> 赞同：0
> 
> 时间：2012-05-07T18:15:01.560
> 
> 标签：php, mysql, encryption, md5, salt

大家好，我最近开始使用

```
$salt = $uniqueSalt;

$cryptpassword = md5($salt.$password); 
```

我将如何用这个转换我的 mysql 数据库中的所有密码，这样它就不会影响用户？

我的数据库 atm 中的密码是纯文本的，我想用 salt 将所有纯文本密码转换为 md5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:19:26.400

我建议您阅读更多关于盐以及如何使用它们的信息。它们不应该是一个常量字符串，而是每个用户独有的东西。例如用户名。或者我个人最喜欢的：注册日期（当然精度为 1 秒）。

此外，如果您将密码作为 MD5 哈希值存储在数据库中，则无法转换密码。MD5 是一种散列方式，您无法获取原始密码以应用盐和重新散列。如果您绝对想应用此功能，那么您可以做到这一点的唯一方法是强制每个用户更改其密码并在他们这样做时应用新算法。这有两个问题：

*   大多数用户不会喜欢这个
*   您必须跟踪哪些用户进行了更改，哪些没有进行更改。这是为了防止登录时出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:19:27.123

就像这样，但是您必须更改登录名，因此您不检查他们的密码，而是检查 md5($salt.$password);

但正如我的前传者所说，它并不安全，如果密码在您的数据库中已经不是纯文本，如果它已经过哈希处理，您可能不会将其作为纯文本获取

# php - 是否可以使用多维数组插入记录？

> ID：10486982
> 
> 赞同：0
> 
> 时间：2012-05-07T18:15:17.940
> 
> 标签：php

场景是

我想插入这样的记录：

首先，我有一个我需要插入的数据字段的数组

```
 $field = Array ( [0] => Email [1] => Name ) 
```

其次，我有一系列邮件

```
$mail = Array ( [0] => a@a.com [1] => foodil@g.com ) 
```

最后，我有一个具有名称的多维数组，

```
$set = Array ( [1] => Array ( [1] => leo [4] => NULL ) ) 
```

**但是，它可以是多个字段，例如。它也可以有一个电话字段（还有地址，性别......无论如何），那么它将是：**

```
 $field = Array ( [0] => Email [1] => Name  [2] => Phone ) 

   $set = Array ( [1] => Array ( [1] => leo [4] => NULL )  [5] => Array ( [1] => 4343343 [4] => 3453343 )) 
```

问题是，如何在这样的场景中插入？: 查询应该是这样的

```
$query="INSERT INTO subscriber (Email,Name,Phone) VALUES ($mail[] , $set[][], $set[][])"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:43:39.900

您可以使用 serialize() 和 unserialize（相反）将多维数组存储到 mysql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:35:45.110

为什么你不简单地为每个订阅者插入一条记录？如果数据库上的字段不是空的，你可以插入默认值。但是，我会使用 json_encode() 而不是 serialized()，这将使用 json 解析器维护其他语言的数据可读性。

# c++ - 将多个参数传递给线程函数

> ID：10486987
> 
> 赞同：7
> 
> 时间：2012-05-07T18:15:37.867
> 
> 标签：c++, multithreading, visual-c++, c++11, visual-studio-2012

我有一个名为 workForThread 的函数，它接受两个参数并返回 void。我想使用类似的东西来线程这个函数：

```
thread(workForThread,a,b); 
```

哪里`a`和`b`是适当的类型。上面的代码无法编译，给出“too many arguments for call”错误（“error C2197: 'void (__cdecl *)(char *)' : too many arguments for call”）

我该如何解决这个问题？

**注意：**我已经查看了[这](https://stackoverflow.com/questions/1352749/multiple-arguments-to-function-called-by-pthread-create) [两个](https://stackoverflow.com/questions/3674104/how-to-pass-multiple-parameters-to-a-thread-function)问题，但在那里工作的解决方案似乎对我不起作用。此外，我觉得有一种方法可以在 c++11 中内置，这就是我正在寻找的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T18:31:54.827

在 C++11 中，这样做的方式或多或少是您尝试过的方式：

```
std::thread myThread(workForThread,a,b); 
```

提供的 workForThread 是一个（非成员）函数，它接受这两个参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T18:19:15.067

使用 C++11 时，您可以使用 lambda 函数，该函数可以使用上下文的（非形式）参数。“捕获”

就像是

```
void doIt (int a, int b) {  // do something, your workForThread
}

..
int a = 1;
int b = 2;

std:thread r ([=](){doIt (a, b); return 1;}); 
```

当仅调用单个函数时，juanchopanza 答案可能会更有效，因为不会创建新函数。

lambda 版本允许您配置更多。假设您正在启动线程，这些线程最终调用 3 个函数中的 2 个函数。 juanchopanza 方法需要为每个排列命名函数。

目前，我认为这两种方法的区别主要是品味问题。

当您想了解有关 lambda 函数的更多信息时

[什么是 C++11 中的 lambda 表达式？](https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11)

# asp.net-mvc - DotNetOpenAuth 简单演示、MVC 和 Razor

> ID：10486988
> 
> 赞同：5
> 
> 时间：2012-05-07T18:15:39.647
> 
> 标签：asp.net-mvc, openid, dotnetopenauth, membership

我一直在寻找一个非常简单的实现，使用 DotNetOpenAuth 允许用户使用他们的 Google 帐户、Yahoo 帐户或其他 OpenId 登录到我的应用程序。我已经在 DotNetOpenAuth 的网站上进行了一些挖掘和搜索，并查看了其他一些使用该服务的项目的源代码，但它们似乎都不是很直接。（包括来自 DotNetOpenAuth 网站的样本。）

有没有人有一个教程/演示/示例的链接，可以演示以下大部分内容？

1.  允许用户使用 Google、Yahoo、其他 OpenId 或“常规”ASP.NET 会员帐户登录。（非常类似于 NerdDinner 演示）
2.  在初始登录时，从外部来源（例如 Google）捕获诸如 FirstName、LastName、E-MailAddress 等信息。
3.  如果用户是第一次登录，请保存上面提到的成员信息（可能保存到 ASP.NET 成员表中）。
4.  在后续登录时，从 ASP.NET 成员表中检索该用户的记录。
5.  将 MVC 3 与 Razor 引擎一起使用。

您能提供的任何帮助将不胜感激。很有可能，我已经在其他一些演示中看到了我需要的信息。我只是没有关于代码正在做什么来完全理解功能的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T03:22:17.367

我不知道如何比[这](https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Creating-an-openid-relying-party-%28programatically%29#mvc)更清楚。如果您喜欢 NerdDinner 示例，它也可以作为开源提供，因此请查看它们的功能。

# xcode - 在 MacRuby 应用程序中运行 Sinatra

> ID：10486996
> 
> 赞同：1
> 
> 时间：2012-05-07T18:16:07.643
> 
> 标签：xcode, xcode4, sinatra, macruby

我是 Xcode 的 MacRuby 新手，但我认为（希望）是一个简单的问题。我有一个小型 Rub​​y Sinatra Web 应用程序，我想将其打包为 Mac OS 打包应用程序 (.app)。该应用程序（无论它是如何打包的）用于读取与 Mac OS X Server 不同的特定 plist 文件，并通过浏览器中的特定 Web 端口显示结果。我不知道 MacRuby 是否可行，但我只需要一个简单的 GUI 来启动和停止 Sinatra Web 应用程序，这样用户就不必对命令行大惊小怪了（希望不必安装 gems ， ETC）。我开始了解 MacRuby 和 Xcode 4 的一些基础知识，但我不确定将 Sinatra ruby​​ 文件放在 Xcode 项目中的哪个位置或如何启动它。

我确实知道如何运行 bash 命令在应用程序路径中启动 ruby​​ 服务器，但不确定这是否是最佳方式或实际放置 ruby​​ 文件的位置。

请原谅我缺乏桌面开发知识——我真的只在网络世界工作。如果我可以详细说明任何要点，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:50:02.587

控制塔可能是您的解决方案：

[https://github.com/MacRuby/ControlTower](https://github.com/MacRuby/ControlTower)

作为 macruby 项目的一部分，它基本上可以满足您的需求。它仍然很新，需要工作，但它确实起作用。我已经能够让它与 sinatra 一起用于一些测试应用程序，但我还没有尝试让我的任何实际应用程序通过它运行（因为我还在学习自己）

# php - 创建 sitemap.xml 的最佳方法是什么？

> ID：10486998
> 
> 赞同：-1
> 
> 时间：2012-05-07T18:16:12.837
> 
> 标签：php, mysql, sitemap

> **可能重复：**
> [如何使用 PHP 和 MySQL 创建站点地图](https://stackoverflow.com/questions/4018919/how-to-create-a-sitemap-using-php-mysql)

所以我有点卡在这里。我有一个网站，其中包含一个非常大的数据库，并且不断变化。现在我想通过提供一个 sitemap.xml 文件来帮助搜索引擎。通常我会使用一个可以做到这一点的网络服务，但在这种情况下这是不可能的。

老实说。**我不知道从哪里开始**。我该怎么做呢？对不起，如果这是一个太基本的问题，但谷歌无法帮助我。

编辑：更多信息。DB 目前是 1k 页。想涨到10k左右。我使用 Mysql 从我的数据库中回显它，然后使用 htaccess 重写 URL。（PHP 的获取 ID 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:22:49.737

您需要安装一个像网络服务一样执行此操作的爬虫。更简单的方法是自己编写一个 php 脚本并生成站点地图 XML 文件。

编写查询以从数据库中获取链接，然后对其进行迭代以创建站点地图。

参见这篇文章，例如 php 脚本[How to create a sitemap using PHP & MySQL](https://stackoverflow.com/questions/4018919/how-to-create-a-sitemap-using-php-mysql)