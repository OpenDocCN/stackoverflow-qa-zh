# StackOverflow 问答 10784000-10784999

# batch-file - 使用 cmd 将 .h 文件（仅）从主文件夹下的子文件夹复制到新文件夹

> ID：10784002
> 
> 赞同：-1
> 
> 时间：2012-05-28T11:33:49.837
> 
> 标签：batch-file, windows-shell

我想将可能位于子文件夹或主文件夹（源）下的所有 .txt 文件复制到目标主文件夹

即 E:\source\sub1\sub11 或 E:\source\sub2 或 E:\source\ 到 d:\test 文件夹。

在这里，我只想将没有子文件夹的 .txt 文件复制到目标文件夹。

我已经厌倦了这个论坛中建议的许多选项。我无法忽略子文件夹。

假设我在 E:\source\sub1\sub11 中有 .txt 文件，当厌倦将.txt 文件复制到目标文件夹时，目标文件夹中的层次结构将是 d:\test folder\sub1\sub11

在这里我想复制到主文件夹 d:\test 文件夹而不是 d:\test folder\sub1\sub11

请任何人都可以在这里帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:35:51.270

您可以使用该[`FOR`](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds.mspx?mfr=true)命令以递归方式分别复制每个文件：

```
for /r e:\source %a in (*.txt) do @copy "%a" "d:\test folder\" 
```

（如果命令在批处理文件中，您需要使用`%%a`而不是）。`%a`

# javascript - CSS表情插件和文本的实时更新

> ID：10784007
> 
> 赞同：0
> 
> 时间：2012-05-28T11:34:07.600
> 
> 标签：javascript, jquery

此代码读取存储在 php 文件中的 pms，并每 0.01 秒将它们打印在屏幕上以实时或动态工作，但我使用的是“CSS Emoticons 插件”，它可以工作并显示表情符号，但是我不能使用动画，或者我可以，但它不会完成，它将每 0.01 秒重新启动一次，除非我将其关闭。我想将它与动态文本一起使用，但我不知道如何。请帮帮我

```
function updateStats(stat) {
    var stat = ["MSG", "NAME"];
    var url = "POST.php";
    $.each(stat, function (i, key) {
        $.post(url, {
            stats: key
        }, function (data) {
            $("#" + key).html(data);
            $('div.icon').emoticonize({
                //delay: 800, 
                //animate: false
            });
        });
    });
}
setInterval(function () {
    updateStats("updateStats");
}, 10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:11:52.330

试试这个...

```
var to;
function updateStats(stat) {
    var stat = ["MSG", "NAME"];
    var url = "POST.php";
    clearTimeout(to);
    $.each(stat, function (i, key) {
       $.post(url, {
           stats: key
       }, function (data) {
           $("#" + key).html(data);
           $('div.icon').emoticonize({
              //delay: 800, 
              //animate: false
           });
           to = setInterval(function () {
              updateStats("updateStats");
           }, 10);    
       });
    });
}
to = setInterval(function () {
    updateStats("updateStats");
}, 10); 
```

# c# - 从集合中获取第一个元素时出错

> ID：10784009
> 
> 赞同：0
> 
> 时间：2012-05-28T11:34:20.463
> 
> 标签：c#, linq, nhibernate

我正在尝试从这样的集合中获取第一个元素

```
List<Entity> data = session.Query<Entity>()
                       .Fetch(x => x.Photos.First())
                       .ToList(); 
```

我收到了这个错误。 **一个获取请求必须是一个简单的成员访问表达式；'[100002]' 是一个 SubQueryExpression。参数名称：relatedObjectSelector。**

现在我正在使用 .Fetch(x => x.Photos.First()) 因为我知道第一个元素将始终被填充，而且确实如此。我只需要集合中的第一个元素来减少加载时间，所以这是我需要的确切解决方案，但我收到了这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:11:36.117

Fetch 将获取整个集合，您不能告诉它使用“fetch”仅获取第一个元素，但是您可以使用投影或类似的东西获得所需的效果：

```
 var subQ = QueryOver.Of<Entity>()
            .SelectList(x => x.SelectMin(y => y.Photos)); // sub query selecting min photo id from entity

        List<Photo> data = session.QueryOver<Photo>()                
                               .Fetch(x => x.Entity).Eager // eager load the entity
                               .WithSubquery.WhereProperty(x => x.Id).In(subQ) // restrict the photo to those that are the first ones for the entity
                               .List() // execute query from database
                               .ToList(); // convert to List 
```

虽然我不确定你为什么想要一个 List 而不是 IList .. 通常最好使用界面

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T12:06:24.990

```
List<Entity> data = session.Query<Entity>()
      .Fetch(x=>x.Photos.FirstOrDefualt())//here You need get only first element          
      .ToList(); 
```

# django - django admin 在某些字段中添加具有固定值的数据

> ID：10784011
> 
> 赞同：0
> 
> 时间：2012-05-28T11:34:22.117
> 
> 标签：django, admin

```
class Facilites(models.Model):
    id = models.CharField(max_length=32, primary_key=True)
    name = models.CharField(max_length=128)

class Objects(models.Model):
    name = models.CharField(max_length=64)
    facilityid = models.ForeignKey(Facilities)

class Admins(models.Model):
    user = models.OneToOneField(User)
    facilities = models.ManyToManyField(Facilities)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        Admins.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

我想要的是让用户（管理员）只能将对象中的“facilityid”添加或修改为在他们的 Admins.facilities 中指定的值。因此，如果某个用户名为 UserA 并且有设施 = ('FacA', 'FacB')，当他向 DB 添加一个新对象时，他应该无法添加类似 Object('Random object', 'FacC ')

此外，他不应该能够将现有对象修改为他不属于的设施。

我已经过滤了对象：

```
def queryset(self, request):
    qs = super(ObjectsAdmin, self).queryset(request)
    if request.user.is_superuser:
        return qs
    return qs.filter(facitityid__id__in = request.user.get_profile().facilities.all()) 
```

所以用户只能看到属于他们设施的对象。但我不知道如何防止他们从他们的设施中添加/编辑对象。

编辑：

在这里找到答案：[https ://stackoverflow.com/a/3048563/1421572](https://stackoverflow.com/a/3048563/1421572)

事实证明 ModelAdmin.formfield_for_foreignkey 在这种情况下是正确的答案：http: [//docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:21:40.917

我将使用预制的设施列表来执行此操作（即，您可以创建一个与 FACILITY_CHOICES 挂钩的整数字段供用户选择。）

如果只有管理员可以做到，那么权限听起来很可行。您还可以进行表单验证以检查数据库中的错误。根据您拥有的设施数量，您可能需要不同的方法。

您也可以使用 models.CharField 执行相同的技术。因此，也许为每个设施分配一个 3 个字母的设施代码，并要求条目与 3 个字母字符串之一匹配。您甚至可以在 .txt 文件中读取列表。真的有很多方法可以做到这一点。我将提供一个预制设施列表的示例，并从 api / 模板访问特定用户所属的设施：

```
NYC_FACILITY = 0
LA_FACILITY = 1
ATL_FACILITY = 2

FACILITY_CHOICES = (
    (NYC_FACILITY, 'NYC'),
    (LA_FACILITY, 'LA'),
    (ATL_FACILITY, 'ATL'),

class Facility(models.Model):
    name = models.IntegerField(choices=FACILITY_CHOICES, default="NYC")

    class Meta:
        order_by = ['name']
        verbose_name_plural = "facilities"
        verbose_name = "facility"
    def __unicode__(self):
        return self.name 
```

就查看特定用户所属的设施页面而言，对象之间将具有 m2m 一对一或 FK 关系。如果 FK 或 m2m 关系，那么您将可以访问该模型类型的其他方法。get_related 但是，我不会在我的示例中使用 get_related。一旦你在一个实例中，你就可以访问 entry_set。

```
# models.py
from django.auth import User
class Person(User):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    facility_loc = models.ForeignKey('Facility') # ForeignKey used assuming only one person can belong to a facility.
    slug = models.SlugField(unique=True)

def get_absolute_url(self):
    return "/%s/%s/" % self.facility_loc % self.slug

# views.py - TemplateView is automatically given a context variable called params which parses data from the URL. So, I'll leave the regex in the URLConf up to you.

class UserFacilityView(TemplateView):
    model = Facility
    template_name = "user_facility.html" 
```

现在在您的模板中，您应该能够从 User 实例访问 facility_set 或从设施实例访问 user_set。

# socket.io - 为什么 XHR 和 htmlfile 比 JSONP 更受欢迎？

> ID：10784012
> 
> 赞同：3
> 
> 时间：2012-05-28T11:34:29.947
> 
> 标签：socket.io

我正在使用带有 Node.js 的 socket.io。一切都适用于 websockets，但我必须支持像 IE6 和类似的旧客户端。我在使用 XHR（在 IE6 上根本不起作用）和 htmlfile（从服务器发送有效，但从客户端发送仅适用于第一条消息）时遇到了很多麻烦。绝望了，我改用 JSONP，一切都很好。

查看[socket.io 文档](https://github.com/LearnBoost/socket.io/wiki/Configuring-Socket.IO)，推荐的顺序是：

```
io.set('transports', [
    'websocket'
  , 'flashsocket'
  , 'htmlfile'
  , 'xhr-polling'
  , 'jsonp-polling'
]); 
```

当 JSONP 似乎比 htmlfile 和 xhr-polling 更可靠时，为什么建议这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:18:28.950

这是我发现的：

JSONP 在使用 Firefox 时会在屏幕上产生难看的闪烁，并且不适用于 Opera。因此，XHR 更适合旧版 Firefox 和 Opera。

最好的解决方案似乎是在检测到浏览器和版本后在客户端上配置传输。

# javascript - 使用带有javascript的firefox从区域设置中获取列表分隔符

> ID：10784014
> 
> 赞同：3
> 
> 时间：2012-05-28T11:34:33.300
> 
> 标签：javascript, firefox, regional-settings

我正在尝试获取在 Windows 区域设置中配置的列表分隔符属性。我发现下面的代码适用于 IE 和 Chrome，但不幸的是不能在 Firefox 中运行。

```
function getLocaleDelimeter(){

    var array = ['a', 'b'];
    var list_seperator = array.toLocaleString().substring(1, 2);
    var delimiter = ";";
    if (list_seperator != null && list_seperator != "")
    {
        delimiter = list_seperator;
    }

    return delimiter;

} 
```

谁能告诉我如何在 firefox 中获取列表分隔符？谢谢。

# javascript - 如何在基于 AJAX 的繁重网络应用程序中存储模板

> ID：10784017
> 
> 赞同：0
> 
> 时间：2012-05-28T11:34:39.213
> 
> 标签：javascript, ajax, templates

我目前正在研究基于 AJAX 的重型 Web 应用程序的概念。

客户端和服务器之间的通信应该基于 JSON，而不是纯 HTML。所以我想知道如何存储单独部分的模板以及如何通过 javascript 获取它们。

例如，我有一个多图像上传表单。用户提交并通过 JSON 响应，我得到专辑的标题和图像的 src 路径。我想显示来自该 JSON 的完整照片流。

我从来没有构建过我想知道的东西，所以我试图在实际编程出现之前做好准备。

有没有好的 JS 模板库？我可以在 AJAX 调用之后加载模板，还是需要在第一个页面加载时加载每个模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:42:01.783

*   按需加载模板。这可以节省带宽、内存空间以及 HTTP 请求。
*   您可以将它们加载为纯 HTML 或以 JSON 包装的一组模板。
*   缓存它们。如果模板存在，您应该有某种缓存逻辑来首先检查您的本地缓存（localStorage、页面上的 JS 对象等）。否则，从服务器请求它。

我建议使用[Mustache](http://mustache.github.com/)作为模板。至于存储，我建议使用[PersistJS](http://pablotron.org/software/persist-js/)。对于缓存逻辑，自己构建一个。

# javascript - 如何删除或替换 SVG 内容？

> ID：10784018
> 
> 赞同：220
> 
> 时间：2012-05-28T11:34:45.093
> 
> 标签：javascript, ajax, svg, d3.js

我有一段 JavaScript 代码创建（使用 D3.js）一个`svg`包含图表的元素。我想根据来自使用 AJAX 的 Web 服务的新数据更新图表，问题是每次单击更新按钮时，它都会生成一个新的`svg`，所以我想删除旧的或更新它的内容。

这是我创建的 JavaScript 函数的一个片段`svg`：

```
var svg = d3.select("body")
        .append("svg")
        .attr("width", w)
        .attr("height", h); 
```

如何删除旧`svg`元素或至少替换其内容？

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2012-06-06T09:30:10.150

这是解决方案：

```
d3.select("svg").remove(); 
```

这是`remove`D3.js 提供的功能。

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2014-06-16T18:43:15.757

如果你想摆脱所有的孩子，

```
svg.selectAll("*").remove(); 
```

将删除与 svg 关联的所有内容。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2014-03-31T12:40:30.933

在附加 svg 元素时设置 id 属性也可以让 d3 稍后通过 id 选择此元素上的 remove() ：

```
var svg = d3.select("theParentElement").append("svg")
.attr("id","the_SVG_ID")
.attr("width",...

...

d3.select("#the_SVG_ID").remove(); 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2014-05-05T22:44:17.173

我有两张图表。

```
<div id="barChart"></div>
<div id="bubbleChart"></div> 
```

这删除了所有图表。

```
d3.select("svg").remove(); 
```

这适用于删除现有的条形图，但之后我无法重新添加条形图

```
d3.select("#barChart").remove(); 
```

试过这个。它不仅让我删除了现有的条形图，还让我重新添加了一个新的条形图。

```
d3.select("#barChart").select("svg").remove();

var svg = d3.select('#barChart')
       .append('svg')
       .attr('width', width + margins.left + margins.right)
       .attr('height', height + margins.top + margins.bottom)
       .append('g')
       .attr('transform', 'translate(' + margins.left + ',' + margins.top + ')'); 
```

不确定这是否是删除的正确方法，并在 d3 中重新添加图表。它在 Chrome 中工作，但尚未在 IE 中测试。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-03-27T08:29:09.523

我正在使用 D3.js 使用 SVG，我遇到了同样的问题。

我使用此代码删除了以前的 svg，但 SVG 中的线性渐变没有出现在 IE 中

$("#container_div_id").html("");

然后我写了下面的代码来解决这个问题

```
$('container_div_id g').remove();
$('#container_div_id path').remove(); 
```

在这里，我将删除 SVG 中以前的 g 和路径，替换为新的。

将我的线性渐变保持在静态内容中的 SVG 标记内，然后调用上面的代码，这在 IE 中有效

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-12-30T18:52:12.847

您也可以只使用 jQuery 删除包含您的 svg 的 div 的内容。

```
$("#container_div_id").html(""); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-23T08:11:36.523

如果您使用的是 xhtml，您应该使用`append("svg:svg")`，而不是`append("svg")`让 D3 使元素具有正确的“命名空间”。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-07-30T10:41:48.470

我遵循[https://www.d3-graph-gallery.com/graph/line_basic.html](https://www.d3-graph-gallery.com/graph/line_basic.html)中的代码并拥有以下代码：

```
svg.append("path")
  .datum(filteredData)
  .attr("fill", "none")
  .attr("stroke", "blue")
  .attr("stroke-width", 1.5)
  .attr("d", d3.line()
    .x(function(k) { return x(k.date) })
    .y(function(k) { return y(k.value) })
   ) 
```

所以对我来说，事实证明我在新线的产生之前就打了这个耳光：

```
d3.selectAll("path").remove() 
```

# c# - 遵守新的 Cookie 法规

> ID：10784023
> 
> 赞同：0
> 
> 时间：2012-05-28T11:35:01.873
> 
> 标签：c#, asp.net-mvc-3, cookies

我需要查看我们最近从事的项目，找到我们使用 cookie 的地方，看看我们对 cookie 的使用是否合适。我如何搜索我的代码来执行此操作，我如何知道使用 cookie 是否合适？当我使用 Session 或 TempData 之类的东西时，我也应该担心吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:42:06.303

> 当我使用 Session 或 TempData 之类的东西时，我也应该担心吗？

是的，您应该担心未经您同意添加 cookie 的代码。但是，我没有关于新 cookie 法规的任何详细信息，无法为您提供法律建议。

你可以这样做：

1.  使用 curl 抓取您的网站，并为每个页面存储返回的 cookie。
2.  仔细检查每种不同类型的 cookie，并检查它是否符合新规定。

如果您有需要身份验证的页面，这可能会更加困难和复杂。但是使用 curl 仍然可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:44:35.293

有一个很棒的 Chrome 插件可以为您进行 cookie 审核...

[http://www.attacat.co.uk/resources/cookies](http://www.attacat.co.uk/resources/cookies)

我在所有客户网站上都使用过它。cookie 信息页面生成工具也很有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:47:13.467

好吧，英国的这项大型 Cookie 法规（我希望您谈论的是相同的法规）使我的生活陷入了 3 个月的困境。我们提出的解决方案是在将 Cookie 写入用户系统之前征得用户的事先同意。

如果您所说的法规与此不同，请忽略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T20:33:04.143

您可以使用此服务 - 它会捕获网站设置的所有 cookie，并将它们分类为第三方、永久和会话。CNN.com 的示例：

[https://webcookies.org/](https://webcookies.org/)

# c# - DES ECB C# 加密/解密

> ID：10784032
> 
> 赞同：1
> 
> 时间：2012-05-28T11:35:32.587
> 
> 标签：c#, encryption, des, ecb

我在解密之前加密的数据时遇到问题。我正在使用带有三个不同密钥的顺序加密解密加密来获得三重des效果。加密函数正常工作（返回 8 字节数组），但解密函数返回空数组。

```
 public static byte[] EncryptDES(byte[] clearData, byte[] key) 
    { 
        DES desEncrypt = new DESCryptoServiceProvider(); 
        desEncrypt.Mode = CipherMode.ECB; 
        desEncrypt.Key = key; 
        ICryptoTransform transForm = desEncrypt.CreateEncryptor(); 
        MemoryStream encryptedStream = new MemoryStream(); 
        CryptoStream cryptoStream = new CryptoStream(encryptedStream, transForm, CryptoStreamMode.Write); 
        cryptoStream.Write(clearData, 0, clearData.Length); 
        byte [] encryptedData = encryptedStream.ToArray(); 
        return encryptedData;
    }

    public static byte[] DecryptDES(byte[] clearData, byte[] key)
    {
        DES desDecrypt = new DESCryptoServiceProvider();
        desDecrypt.Mode = CipherMode.ECB;
        desDecrypt.Key = key;
        ICryptoTransform transForm = desDecrypt.CreateDecryptor();
        MemoryStream decryptedStream = new MemoryStream();
        CryptoStream cryptoStream = new CryptoStream(decryptedStream, transForm, CryptoStreamMode.Write);
        cryptoStream.Write(clearData, 0, clearData.Length);
        byte[] encryptedData = decryptedStream.ToArray();
        return encryptedData;
    }

    public static byte[] Encrypt3DES(byte[] clearData, byte[] key0, byte[] key1, byte[] key2) 
    {
        byte[] encryptedData1 = new byte[clearData.Length];
        byte[] encryptedData2 = new byte[clearData.Length];
        byte[] encryptedData3 = new byte[clearData.Length];
        encryptedData1 = DESCrypto.EncryptDES(clearData    , key0);
        encryptedData2 = DESCrypto.DecryptDES(encryptedData1, key1);
        encryptedData3 = DESCrypto.EncryptDES(encryptedData2, key2);
        return encryptedData3;
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:52:07.163

[TripleDES](http://msdn.microsoft.com/en-us/library/system.security.cryptography.tripledes.aspx)已经存在于框架中，但我想您想推出自己的实现以用于教育目的。

你让事情变得比必要的更复杂。既然您正在使用流，为什么不将它们全部链接起来：

```
public static byte[] TripleDESEncrypt(byte[] plainText, byte[] key1, byte[] key2, byte[] key3)
{
  var des = DES.Create();
  des.Mode = CipherMode.ECB;

  des.Padding = PaddingMode.None;
  des.Key = key3;
  var encryptor1 = des.CreateEncryptor();

  des.Key = key2;
  var decryptor = des.CreateDecryptor();

  des.Padding = PaddingMode.PKCS7;
  des.Key = key1;
  var encryptor2 = des.CreateEncryptor();

  byte[] result;
  using (var ms = new MemoryStream())
  {
    using (var cs1 = new CryptoStream(ms, encryptor1, CryptoStreamMode.Write))
    using (var cs2 = new CryptoStream(cs1, decryptor, CryptoStreamMode.Write))
    using (var cs3 = new CryptoStream(cs2, encryptor2, CryptoStreamMode.Write))
      cs3.Write(plainText, 0, plainText.Length);

    result = ms.ToArray();
  }

  return result;
} 
```

```
public static byte[] TripleDESDecrypt(byte[] cipherText, byte[] key1, byte[] key2, byte[] key3)
{
  var des = DES.Create();
  des.Mode = CipherMode.ECB;

  des.Padding = PaddingMode.PKCS7;
  des.Key = key1;
  var decryptor1 = des.CreateDecryptor();

  des.Padding = PaddingMode.None;
  des.Key = key2;
  var encryptor = des.CreateEncryptor();

  des.Key = key3;
  var decryptor2 = des.CreateDecryptor();

  byte[] result;
  using (var ms = new MemoryStream())
  {
    using (var cs1 = new CryptoStream(ms, decryptor1, CryptoStreamMode.Write))
    using (var cs2 = new CryptoStream(cs1, encryptor, CryptoStreamMode.Write))
    using (var cs3 = new CryptoStream(cs2, decryptor2, CryptoStreamMode.Write))
      cs3.Write(cipherText, 0, cipherText.Length);

    result = ms.ToArray();
  }

  return result;
} 
```

记下`using`块的使用以及如何将填充应用于不同的流。

[TripleDES](http://msdn.microsoft.com/en-us/library/system.security.cryptography.tripledes.aspx)框架比上面的代码快大约 2.5 倍。

```
public static byte[] TripleDESEncryptFramework(byte[] plainText, byte[] key)
{
  var tdes = TripleDES.Create();
  tdes.Mode = CipherMode.ECB;
  tdes.Padding = PaddingMode.PKCS7;
  tdes.Key = key;

  var encryptor = tdes.CreateEncryptor();

  byte[] result;
  using (var ms = new MemoryStream())
  {
    using (var cs = new CryptoStream(ms, encryptor, CryptoStreamMode.Write))
      cs.Write(plainText, 0, plainText.Length);

    result = ms.ToArray();
  }

  return result;
} 
```

如果您想比较两种不同加密方法的结果，那么您需要记住[TripleDES](http://msdn.microsoft.com/en-us/library/system.security.cryptography.tripledes.aspx)的 24 位密钥实际上是放在一个数组中的 3 个密钥：

```
[  key1  ][  key2  ][  key3  ]
==============================
[            key             ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-15T18:25:23.650

只需要cryptoStream.FlushFinalBlock()。它的代码效果很好：

```
 //ENCRYPT
   public static byte[] EncryptDES(byte[] clearData, byte[] key) 
   { 
       DES desEncrypt = new DESCryptoServiceProvider(); 
       desEncrypt.Mode = CipherMode.ECB; 
       desEncrypt.Key = key; 
       ICryptoTransform transForm = desEncrypt.CreateEncryptor(); 
       MemoryStream encryptedStream = new MemoryStream(); 
       CryptoStream cryptoStream = new CryptoStream(encryptedStream, transForm, CryptoStreamMode.Write); 
       cryptoStream.Write(clearData, 0, clearData.Length);
       cryptoStream.FlushFinalBlock();
       return encryptedStream.ToArray();
   }

   //DECRYPT
   public static byte[] DecryptDES(byte[] clearData, byte[] key)
   {
       DES desDecrypt = new DESCryptoServiceProvider();
       desDecrypt.Mode = CipherMode.ECB;
       desDecrypt.Key = key;
       ICryptoTransform transForm = desDecrypt.CreateDecryptor();
       MemoryStream decryptedStream = new MemoryStream();
       CryptoStream cryptoStream = new CryptoStream(decryptedStream, transForm, CryptoStreamMode.Write);
       cryptoStream.Write(clearData, 0, clearData.Length);
       cryptoStream.FlushFinalBlock();
       return decryptedStream.ToArray();
   } 
```

# java - 检索 XML 节点名称

> ID：10784036
> 
> 赞同：3
> 
> 时间：2012-05-28T11:36:02.553
> 
> 标签：java, xml

我正在尝试使用“node.getNodeName()”从 XML 文件中检索所有节点的名称。这样做时，每个节点名称的前面和后面都是“#text”。因此，我也没有得到确切的节点数。我希望在检索名称时消除“#text”。我怎么做？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T12:17:33.477

接着就，随即 ：

```
package com.hum;

import java.io.InputStreamReader;
import java.io.StringReader;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

/**
 *
 * @author herve
 */
public class PrintNameXML
{
  public static void main(String[] args) throws Exception
  {
    String xml = "<a><o><u>ok</u></o></a>";
    Document doc = 
     DocumentBuilderFactory
     .newInstance()
     .newDocumentBuilder()
     .parse(new InputSource(new StringReader(xml)));
    NodeList nl = doc.getElementsByTagName("*");
    for (int i = 0; i < nl.getLength(); i++)
    {
      System.out.println("name is : "+nl.item(i).getNodeName());
    }
  }
} 
```

我得到：

```
name is : a
name is : o
name is : u 
```

是你搜索的吗？

# php - 使用 mysql 和 php 计算多列

> ID：10784040
> 
> 赞同：0
> 
> 时间：2012-05-28T11:36:22.127
> 
> 标签：php, mysql, codeigniter-2

我有一个包含以下列的销售表

*   姓名
*   类型（学生、成人、工人）
*   销售额（A、B、C、D）
*   成本
*   位置 (1,2,3,4)

我想按名称获取与名称和组相关的类型、销售额和位置的计数，以便我可以将其显示在表格上 ![在此处输入图像描述](../Images/2a7027a375b6c060f274b195d4581b0f.png)

是否可以使用查询获取所有分组值>

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:42:54.257

使用`GROUP BY`然后`SUM(condition)`获取您的计数：

```
SELECT   name AS Name,
         SUM(type     = 'worker' ) AS Worker,
         SUM(type     = 'student') AS Student,
         SUM(type     = 'adult'  ) AS Adult,
         SUM(sales    = 'A'      ) AS A,
         SUM(sales    = 'B'      ) AS B,
         SUM(sales    = 'C'      ) AS C,
         SUM(sales    = 'D'      ) AS D,
         SUM(location = 1        ) AS Location1,
         SUM(location = 2        ) AS Location2,
         SUM(location = 3        ) AS Location3,
         SUM(location = 4        ) AS Location4
FROM     sales
GROUP BY Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T15:05:08.550

```
function getDistributorStat() // One Distributor
{

    $this ->db->select("count(*) ch1 ,
                        sum(c_privi_flag = 'Y') ch2, sum(c_happy1_flag = 'Y') ch3, sum(c_happy2_flag = 'Y') ch4,
                        sum(date(D_JOIN) = CURRENT_DATE) nch1,
                        sum(date(d_privi_activated) = CURRENT_DATE) nch2,
                        sum(date(d_happy1_activated) = CURRENT_DATE) nch3,
                        sum(date(d_happy2_activated) = CURRENT_DATE) nch4"
                        );
    $this->db->from('bc_master');
    $query = $this ->db->get()->row();
    $data['distributors']=$query->ch1;
    $data['privilaged']=$query->ch2;
    $data['happy1']=$query->ch3;
    $data['happy2']=$query->ch4;
    $data['new_distributors']=$query->nch1;
    $data['new_privilaged']=$query->nch1;
    $data['new_happy1']=$query->nch1;
    $data['new_happy2']=$query->nch1;

    return $data;

} 
```

# mysql - 使用时间戳从日志表中选择最近的行

> ID：10784045
> 
> 赞同：0
> 
> 时间：2012-05-28T11:36:46.763
> 
> 标签：mysql

我有一个用于记录 Facebook 应用程序用户操作的表。我想获取特定操作 ID 不超过 9 分钟的最新行。该表有很多其他统计信息列，因此我将仅显示代表问题的 2 行：

```
timestamp                  facebookID   producerID      eventID   actionID   numOfTickets
2012-05-28 13:16:38     100003286974944    9             1741        cpf      2
2012-05-28 13:16:13     100003286974944    9             1741        cpf      4 
```

我想要做的是获得最新的行 where `actionID = 'cpf'`.

我试过的是：

```
SELECT CONCAT_WS(' ', y.firstName, y.lastName) as fullName, x.facebookID, x.numOfTickets, MAX(x.timestamp) 
FROM E4S_ANALYTICS.e4s_analytic_data x INNER JOIN E4S_FB.e4s_user_details y ON x.facebookID = y.facebookID 
WHERE (x.actionID = 'CPF' AND x.numOfTickets > 0 AND x.producerID = 9 AND TIMEDIFF(NOW() , x.timestamp) < '00:09:00' 
AND x.facebookID IN (SELECT facebookID FROM  E4S_FB.e4s_session_data WHERE 
                     TIMEDIFF(NOW() , sessionStart) < '00:09:00' )) 
```

查询的结果是：

```
facebookID      numOfTickets    MAX(x.timestamp)
100003286974944  4              2012-05-28 13:16:38 
```

返回的时间戳是正确的，但它`numOfTickets`是 4 而不是 2。

请注意，内部查询：

```
SELECT facebookID FROM  E4S_FB.e4s_session_data 
WHERE TIMEDIFF(NOW() , sessionStart) < '00:09:00' )) 
```

用于查看谁仍然登录到应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:19:57.630

```
SELECT CONCAT_WS(' ', y.firstName, y.lastName) AS fullName,
       x.facebookID,
       x.numOfTickets,
       x.timestamp
FROM   (
         SELECT *
         FROM   E4S_ANALYTICS.e4s_analytic_data
         WHERE  actionID = 'cpf'
            AND numOfTickets > 0
            AND producerID = 9
            AND TIMEDIFF(NOW() , timestamp) < '00:09:00' 
            AND (facebookID, timestamp) IN (
                  SELECT   facebookID, MAX(timestamp)
                  FROM     E4S_ANALYTICS.e4s_analytic_data
                  WHERE    actionID = 'cpf'
                       AND numOfTickets > 0
                       AND producerID = 9
                       AND TIMEDIFF(NOW() , timestamp) < '00:09:00' 
                       AND facebookID IN (
                             SELECT facebookID
                             FROM   E4S_FB.e4s_session_data
                             WHERE  TIMEDIFF(NOW() , sessionStart) < '00:09:00'
                           )
                  GROUP BY facebookID
                )
       ) AS x
  INNER JOIN E4S_FB.e4s_user_details AS y USING (facebookID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:46:42.657

您是否尝试过不使用 MAX()？假设您已经检查了 JOIN 和 SUBQUERY 结果。

```
SELECT CONCAT_WS(' ', y.firstName, y.lastName) as fullName, x.facebookID, x.numOfTickets, MAX(x.timestamp) 
FROM E4S_ANALYTICS.e4s_analytic_data x 
INNER JOIN E4S_FB.e4s_user_details y ON x.facebookID = y.facebookID 
GROUP BY x.facebookID
WHERE (x.actionID = 'CPF' AND x.numOfTickets > 0 AND x.producerID = 9 AND TIMEDIFF(NOW() , x.timestamp) < '00:09:00' 
AND x.facebookID IN 
     (SELECT facebookID FROM  E4S_FB.e4s_session_data 
      WHERE TIMEDIFF(NOW() , sessionStart) < '00:09:00' ))
ORDER BY x.timestamp DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:49:19.647

您可以使用`order by timestamp desc`先根据最新对列进行排序，然后选择第一行。
或尝试使用`max`.

# sql - 如何在 Excel 中使用 VBA 和外键插入 2 个表 ProductOrder 和 ProductOrderLine

> ID：10784047
> 
> 赞同：0
> 
> 时间：2012-05-28T11:36:50.677
> 
> 标签：sql, sql-server, excel, vba, foreign-keys

我是一个使用 VBA/FK/SQL 服务器的新手。我正在 Excel 中创建简单的采购订单工作簿用户界面。

我创建了两个表：

```
CREATE TABLE [dbo].[PurchaseOrder](
[PKPurchaseOrderID] [bigint] IDENTITY(1,1) NOT NULL,
[PurchaseOrderNumber] [bigint] NULL,
[PurchaseOrderDate] [date] NULL,
[PurchaseOrderTime] [int] NULL,
[PurchaseOrderSupplierID] [nvarchar](50) NULL,
[ShipToA1] [nvarchar](50) NULL,
[ShipToA2] [nvarchar](50) NULL,
[ShipToA3] [nvarchar](50) NULL,
[ShipToA4] [nvarchar](50) NULL,
 CONSTRAINT [PK_PurchaseOrder] PRIMARY KEY CLUSTERED 
(
    [PKPurchaseOrderID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,     
ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

和

```
CREATE TABLE [dbo].[PurchaseOrderLines](
[PKPurchaseOrderLineID] [bigint] IDENTITY(1,1) NOT NULL,
[FKPurchaseOrderID] [bigint] NULL,
[Quantity] [smallint] NULL,
[Item] [nchar](25) NULL,
[Description] [nvarchar](50) NULL,
[siteID] [nchar](10) NULL,
[UnitPrice] [money] NULL,
[LineTotal] [money] NULL,

 CONSTRAINT [PK_PurchaseOrderLines] PRIMARY KEY CLUSTERED 

(

    [PKPurchaseOrderLineID] ASC

)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, 
ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]

) ON [PRIMARY]

ALTER TABLE [dbo].[PurchaseOrderLines]  WITH CHECK ADD  CONSTRAINT 
[FK_PurchaseOrderLines_PurchaseOrder] FOREIGN KEY([FKPurchaseOrderID])

REFERENCES [dbo].[PurchaseOrder] ([PKPurchaseOrderID])

ALTER TABLE [dbo].[PurchaseOrderLines] CHECK CONSTRAINT 
[FK_PurchaseOrderLines_PurchaseOrder]

GO 
```

当用户单击两个表都更新的按钮时，我想在后台实现这一点。

我不确定如何将 PurchaseOrder 表中创建的全新行与 PurchaseorderLine 表中的 FK 链接起来。

我打算为单用户界面做什么：

1.  插入新订单
2.  使用 Max(PKPurchaseOrderID) 作为新订单行表的 FK。

如果多个用户同时工作/提交订单，我如何确定当前插入的订单 ID(PKPurchaseOrderID)。如果我使用我的计划，恐怕订单行可能会分配给不同的订单。例如

请指教。

我使用 SQL Server 2008 和 Excel 2007/2010

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:42:32.953

我将创建一个存储过程，插入新行并返回 ID`SCOPE_IDENTITY()`

这是一篇关于 SQL Server 中不同“身份”方法的不错的文章。

[http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

# java - Swing 组件未按照布局对齐

> ID：10784050
> 
> 赞同：1
> 
> 时间：2012-05-28T11:36:57.537
> 
> 标签：java, swing

我对 Swing 应用程序感到震惊。这是一个简短的问题。我有一个框架，然后是一个面板。我将 JTabbedPane 添加到面板并在 JTabbedPane 上添加组件。我正在为 TabbedPane 设置网格布局，但它没有以正确的方式呈现组件。

它应该将组件呈现为 A 标签，然后在其旁边呈现文本字段。但它正在呈现一个标签，然后在该标签下方是一个文本字段。

下面是代码：

```
public static void main(String[] args) throws IOException {

     File file = new File("C:\\Documents and Settings\\rkumar\\Desktop\\IOSAutomationParameters.properties");

     if( file != null ){

         Properties property = new Properties();

         property.load(new FileInputStream(file));

          JFrame frame = new JFrame("IOSAutomationToolFourthPage");
          JPanel framePanel = new JPanel();
          framePanel.setSize(700,700);
           frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
          String numberOfClients = property.getProperty("numberOfClients");
          System.out.println("number of clients: "+numberOfClients);
          if (!numberOfClients.isEmpty()) {

               int numberOfClientNumb = Integer.parseInt(numberOfClients);

                  System.out.println("numberOfClientNumb ::" + numberOfClientNumb);

                   JTabbedPane tab = new JTabbedPane();

                  // JTabbedPane tab2 = new JTabbedPane();
                for( int i=1; i<=numberOfClientNumb; i++){

                   JPanel panel = new JPanel();
                  panel.setSize(400, 400);
                  panel.setLayout(new GridLayout(10,2,1,1));

                  //Remote IP 
                  JLabel remoteIPLbl = new JLabel("Remote IP : ");
                  String remoteIPVal = property.getProperty("remoteIP_"+i);
                  JTextField remoteIPField = new JTextField(remoteIPVal);
                  remoteIPLbl.setBounds(50, 100, 2, 2);
                  remoteIPField.setBounds(200, 100, 2, 2);
                  remoteIPField.setColumns(30);

                  //Remote User Name
                  JLabel userNameLbl = new JLabel("User Name : ");
                  String userNameVal = property.getProperty("remoteUserName_"+i);
                  JTextField userNameField = new JTextField(userNameVal);
                  userNameLbl.setBounds(50, 200, 2, 2);
                  userNameField.setBounds(200, 200, 2, 2);
                  userNameField.setColumns(20);

                  //Remote Password
                  JLabel remotePasswordLbl = new JLabel("Remote Password : ");
                  String remotePasswordVal = property.getProperty("remotePassword_"+i);
                  JTextField remotePasswordField = new JTextField(remotePasswordVal);
                  remotePasswordLbl.setBounds(50, 300, 2, 2);
                  remotePasswordField.setBounds(200, 300, 2, 2);
                  remotePasswordField.setColumns(20);

                  //Remote Path
                  JLabel remotePathLbl = new JLabel("Remote Path : ");
                  String remotePathVal = property.getProperty("remotePath_"+i);
                  JTextField remotePathField = new JTextField(remotePathVal);
                  remotePathLbl.setBounds(50, 400, 2, 2);
                  remotePathField.setBounds(200, 400, 2, 2);
                  remotePathField.setColumns(100);

                  //deviceOrSimulator
                  JLabel deviceOrSimulatorLbl = new JLabel("Device or Simulator : ");
                  String deviceOrSimulatorVal = property.getProperty("deviceOrSimulator_"+i);
                  JTextField deviceOrSimulatorField = new JTextField(deviceOrSimulatorVal);
                  deviceOrSimulatorLbl.setBounds(50, 500, 2, 2);
                  deviceOrSimulatorField.setBounds(200, 500, 2, 2);
                  deviceOrSimulatorField.setColumns(1);

                  panel.add(remoteIPLbl);
                  panel.add(remoteIPField);
                  panel.add(userNameLbl);
                  panel.add(userNameField);
                  panel.add(remotePasswordLbl);
                  panel.add(remotePasswordField); 
                  panel.add(remotePathLbl);
                  panel.add(remotePathField); 
                  panel.add(deviceOrSimulatorLbl);
                  panel.add(deviceOrSimulatorField); 

                  tab.add("Client "+i,panel);
                  System.out.println(""+i);                     
               }

                framePanel.add(tab);
                frame.add(framePanel);
               // frame.setLayout(new Lay);
          }

          frame.setSize(800, 800);
          frame.setVisible(true);

     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:42:12.030

将行数从 更改`10`为`5`（或`0`），例如：

```
panel.setLayout(new GridLayout(0,2,1,1)); 
```

你会没事的，但是，在这个问题中你会遇到一些麻烦，`GridLayout`因为两列的大小相同。因此，我建议您改用（和学习）`GridBagLayout`。

* * *

`GridLayout`和之间的区别`GridBagLayout`：

![网格布局](../Images/92bd476210ca1142844aa66437342af3.png)

![grigbag布局](../Images/b6290ff5c2d393a77add3f786c815518.png)

* * *

上面的示例使用`GridBagLayout`：

```
public static void main(String[] args) throws IOException {

    JFrame frame = new JFrame("Test");
    frame.setLayout(new GridBagLayout());

    GridBagConstraints gbc = new GridBagConstraints();
    gbc.insets = new Insets(1, 1, 1, 1);

    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 0;
    gbc.gridx = 0;

    frame.add(new JLabel("Remote IP : "), gbc);
    frame.add(new JLabel("User Name : "), gbc);
    frame.add(new JLabel("Remote Password : "), gbc);
    frame.add(new JLabel("Remote Path : "), gbc);
    frame.add(new JLabel("Device or Simulator : "), gbc);

    gbc.gridx = 1;
    gbc.weightx = 1;

    frame.add(new JTextField("Remote IP"), gbc);
    frame.add(new JTextField("User Name"), gbc);
    frame.add(new JTextField("Remote Password"), gbc);
    frame.add(new JTextField("Remote Path"), gbc);
    frame.add(new JTextField("Device or Simulator"), gbc);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

# objective-c - 如何将子视图添加到视图

> ID：10784051
> 
> 赞同：1
> 
> 时间：2012-05-28T11:36:58.273
> 
> 标签：objective-c, ios, xcode

我想了解有关 XCode 的更多信息，因此我创建了一个适用于一般台式机/笔记本电脑的应用程序，但不适用于 iPhone。

它在`#include "Foundation/Foundation.h"`我命名为 AppController.h、AppController.m 和由开发系统生成的 MainMenu.xib 文件的基础上构建并使用了 AppController。

现在我想添加一个子视图。当我解决这个问题时，我显然遗漏了一些东西，或者我错误地编码了一些东西。我可以找到许多教程，这些教程提供了适用于 iPhone 应用程序的步骤列表，但没有一个适合我的非 iPhone 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:40:31.547

[这是 Aaron Hillegass 书中的一章](http://www.informit.com/articles/article.aspx?p=1211756)，展示了如何进行自定义视图并解释了视图层次结构。

[Apple 的网站上](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40002978)还有一个“查看编程指南” 。

我非常推荐购买[实体书“Mac OS X 的 Cocoa 编程”](https://rads.stackoverflow.com/amzn/click/com/0321503619)，并阅读每一章并做每一个练习应用程序。你可能认为它很贵，但它绝对值得每一分钱。当我想成为一名铁杆 Cocoa 工程师时，它是我使用的那些资源之一。

# ruby-on-rails - Rails - 上帝 - LoadError

> ID：10784055
> 
> 赞同：1
> 
> 时间：2012-05-28T11:37:15.603
> 
> 标签：ruby-on-rails, macos, resque, permission-denied, god

我已经安装了 god 来监控和启动/停止/重新启动我的 resque 任务。我遇到的问题是我无法加载上帝的配置文件。

它给了我这个错误：

```
$god load config/resque.god
The server is not available (or you do not have permissions to access it) 
```

然后我尝试

```
$sudo god load config/resque.god
.../.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)... 
```

我在这里想念什么？我需要给神宝石某种许可吗？我在 OSX 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T05:57:08.387

尝试

```
rvmsudo god load config/resque.god 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:22:19.683

您是否正在尝试将 resque 动态加载到已经运行的上帝实例中？

如果没有，您可以使用**-c加载配置文件**

尝试运行

`$god -c config/resque.god`

**load**命令将尝试将配置文件动态加载到已经运行的 God 中。它告诉你上帝没有运行，所以你不能动态地将配置文件加载到其中。

有关加载命令的更多信息，请参阅[将配置文件动态加载到已经运行的上帝中。](http://godrb.com/#wiki-_dynamically_loading_config_files_into_an_already_running_god "动态加载配置文件到已经运行的上帝")

您可以检查哪些工作人员正在使用

```
god status 
```

如果上帝没有运行，它会给你同样的服务器不可用消息。

# jquery - jQuery淡入比淡出更快？

> ID：10784058
> 
> 赞同：2
> 
> 时间：2012-05-28T11:37:34.307
> 
> 标签：jquery, fadein, fadeout

我有一张我想淡入淡出的图像。

```
$("#img").animate({
    opacity: 0
}, 1000 );

$("#img").animate({
    opacity: 100
}, 1000 ); 
```

尽管两者的计时器都设置为 1000 毫秒，但淡入的速度要快得多。为什么会这样？

现场演示：http: [//jsfiddle.net/G3KtZ/](http://jsfiddle.net/G3KtZ/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T11:39:56.997

对于您的“淡入”动画功能，您将不透明度设置为 100。它应该简单地设置为 1。CSS 中的不透明度是从 0 到 1，因此它在 JavaScript 中是相同的（因为您使用 Javascript 来修改CSS）。

所以这就是发生的事情。jQuery 在 1000 毫秒的过程中将不透明度从 0 设置为 100。但是一旦不透明度达到 1（仅 10 毫秒后），不透明度就已满。

见这里：http: [//jsfiddle.net/G3KtZ/3/](http://jsfiddle.net/G3KtZ/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T11:40:03.113

不透明度在 0 和 1 之间测量，将代码的第二部分更改为：

```
$("#img").animate({
    opacity: 1
}, 1000 ); 
```

它是固定的！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T11:40:07.200

将不透明度设置为 1 而不是 100。高于 1 的值在 CSS 中有效，但没有任何意义。完全不透明度为 1，不可见表示 0。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T11:40:15.790

不透明度取值介于 0 和 1 之间，而不是 0 和 100。这会导致最大值 (1) 处于动画淡入淡出的 1%。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T11:40:19.977

它是

```
$("#img").animate({
    opacity: 1
}, 1000 ); 
```

不是100。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-28T11:41:16.630

或者，您可以使用`fadeIn()`and`fadeOut()`方法：

```
$("#img").fadeOut(1000).fadeIn(1000); 
```

[http://jsfiddle.net/G3KtZ/4/](http://jsfiddle.net/G3KtZ/4/)

# ajax - json 对象发布到 codeigniter

> ID：10784062
> 
> 赞同：0
> 
> 时间：2012-05-28T11:37:55.937
> 
> 标签：ajax, codeigniter, json

我犯了一个非常简单的错误，但无法找到它。我使用 AJAX 将 JSON 对象发布到 CodeIgniter 控制器，但无法在控制器函数中检索此值。我的代码是

AJAX 代码：

```
 $.ajax({
    type: "POST",
    contentType: "application/json",
    data: "{eventdata:" + JSON.stringify(eventToSave) + "}",
    url: "<?php echo $base?>/index.php/welcome/addEvent",
    dataType: "json",
    success: function (data) {      
        alert(data);        
        $('#calendar').fullCalendar('renderEvent', event, true);
        $('.qtip').remove();
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        debugger;
    }
}); 
```

在控制台中，JSON 对象以以下格式显示：

```
{
    eventdata: {
        "EventID": 170,
        "StartDate": "Thu May 10 2012 00:00:00 GMT+0530 (India Standard Time)",
        "EndDate": "Thu May 10 2012 00:00:00 GMT+0530 (India Standard Time)",
        "EventName": "sdsfddsf"
    }
} 
```

CodeIgniter addEvent 函数：

```
$json_output[]=(array)json_decode($this->input->post());        
print_r($json_output); 
```

我也尝试了各种其他选项，但无法从我需要存储在数据库中的 json 对象中获取值。请告诉我一些从 json 对象中检索该值然后将其存储在数据库中的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:41:28.263

试试这个，如果它工作。

```
$json = file_get_contents('php://input');
$json = stripslashes($json);
$json = json_decode($json);

convert the object array to array
$array =  (array) $json; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:24:04.117

这看起来不对。

```
 url: "<?php echo $base?>/index.php/welcome/addEvent", 
```

您确定您正在实际使用正确的控制器方法吗？你检查源代码了吗？

尝试做这样的事情（使用 URL Helper）：

```
url: "<?php echo site_url('welcome/addEvent'); ?>", 
```

# c - 在 Windows 上共享 Linux 中的内存性能（同步开销：信号量）

> ID：10784063
> 
> 赞同：1
> 
> 时间：2012-05-28T11:37:58.880
> 
> 标签：c, linux, performance, semaphore, shared-memory

这篇文章是关于在 Windows 上计算 Linux 中共享内存的性能。
我是 Linux 开发的新手。
我编写了客户端服务器应用程序，它计算在 1 秒内从客户端（进程 1）传输到服务器（进程 2）的共享内存中有多少数据包（大小为 2048 字节）。

在 Windows 中，我使用
CreateFileMapping
OpenFileMapping
MapViewOfFile
函数和共享内存同步我在客户端和服务器中使用命名事件（createevent），以便一次可以在共享内存块中执行读取或写入操作。
我也在结构内部使用循环缓冲区作为共享内存块，因此它将变成大小为 4096 的 512 个共享块

```
 struct block{
     BYTE Data[4096];
      long amount;
    }
    struct MemBuffer{
      block m_Blocks[512];
       ...
       ...
    } 
```

实现了某种逻辑，以便它以 FIFO 方式工作。

现在在 linux 的情况下，我使用 posix 共享内存 api
shm_open
ftruncate
mmap

共享内存块是相同的（如上面提到的 windows）用于同步信号量

现在的表现

windows 计数是每秒 700000 个数据包
linux 计数是每秒 500000 个数据包，使用命名信号量
linux 计数是每秒 600000 个数据包使用未命名信号量

根据我在整个应用程序中的观察开销是同步所以任何人都可以建议我更好的同步方法或如何提高 Linux 中共享内存的整体性能？

提前致谢

**更新：**

我正在使用带有 Windows 2003 服务器和 Red Hat Enterprise Linux 6.0 的双引导机器。机器配置如下 Intel Quad Core with 2.4 Ghz , 4GB RAM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:21:58.657

这两种方法都应该在硬件级别产生相同的内存映射（除非你真的很不幸并且遇到了缓存冲突）。所以是的，你看到的区别在于信号量的实现。但是不要相信我的话，在你生产和消费缓冲区的地方做实验，只是你从来没有真正读过或写过它们。看看你是否得到相同的行为。

有很多库具有高性能信号量。尝试其中之一，例如[boost](http://www.boost.org/doc/libs/1_37_0/doc/html/interprocess/synchronization_mechanisms.html)。

# python - 缓存不同类型的模型实例

> ID：10784064
> 
> 赞同：0
> 
> 时间：2012-05-28T11:38:02.520
> 
> 标签：python, django, memcached

可以在 django 中缓存具有不同类型对象的列表吗？当我尝试这样做时，django 总是返回 None 给我。

检查此代码：

```
foo = Foo.objects.all()[:10]
bar = Bar.objects.all()[:10]
foobar = list(foo) + list(bar)
cache.set('foobar', foobar)
cache.get('foobar') # None 
```

如果这是正常行为，是否有一些解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:50:06.870

Django可以缓存这样的列表，你需要检查

*   `cache.set('foo', 'bar')`然后`get`确保缓存正常工作
*   缓存后端的日志知道是否`set`成功
*   对于 memcached 后端，是否`foobar`太大而无法放入缓存

# vb.net - “No such host was known”和“The requested name is valid...”有什么区别？

> ID：10784066
> 
> 赞同：0
> 
> 时间：2012-05-28T11:38:11.343
> 
> 标签：vb.net, ping

我正在尝试使用以下代码行：

```
Dim lobjPingReply As Net.NetworkInformation.PingReply = 
lobjPingObject.Send(lobjMyURI.DnsSafeHost) 
```

当我的单元测试到达这一行并且主机无效时，我收到以下错误“没有这样的主机已知”

当我使用相同的参数实际调试代码时，我得到了这个错误

“请求的名称有效，但未找到请求类型的数据”

为什么相同参数的同一行会给出不同的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:54:24.707

错误 - WSANA_DATA
错误代码 - 11004

有效名称，没有请求类型的数据记录。请求的名称有效并且在数据库中找到，但它没有正确的关联数据正在解析。通常的示例是使用 DNS（域名服务器）的主机名到地址转换尝试（使用 gethostbyname 或 WSAAsyncGetHostByName）。返回一条 MX 记录，但没有 A 记录——表明主机本身存在，但不能直接访问。

错误 - WSAHOST_NOT_FOUND
错误代码 - 11001 找不到主机。没有这样的主机是已知的。该名称不是正式的主机名或别名，或者在被查询的数据库中找不到。协议和服务查询也可能返回此错误，这意味着在相关数据库中找不到指定的名称。

这两个错误相互重叠，因此您得到了套接字生成的最后一个错误。所以你得到不同的价值。

[请参阅此处以供参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)

# objective-c - 加载Detailview的问题

> ID：10784067
> 
> 赞同：0
> 
> 时间：2012-05-28T11:38:17.147
> 
> 标签：objective-c, detailview

我有这个代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    TabellenDetailViewController *detailViewController2 = [self.storyboard instantiateViewControllerWithIdentifier:@"TabellenDetailViewController"];
    Book2 *aBook2 = [books2 objectAtIndex:indexPath.row];
    detailViewController2.tea_names = [NSString stringWithFormat:@"%@", aBook2.tea_name];
    [self.navigationController pushViewController:detailViewController2 animated:YES];
} 
```

为了更好地理解，我有一个故事板：

导航控制器 -> MasterTableViewController -> DetailMasterTableViewController -> TabelleViewController -> DetailTabelleViewcontroller

它适用于 TabelleViewController，如果我在 TabelleViewController 中选择一个单元格，则程序会因该错误而停止：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([XMLAppDelegate class])); <--- Here with Thread1:Program received signal: "SIGABRT".
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:38:11.603

*   检查`tea_names`属性是否由`TabellenDetailViewController`实例保留
*   添加异常断点以查看确切的异常位置

> 单击 Navigator 窗格中的 Breakpoints 符号（右起第二个），单击窗格底部的 + 按钮，然后选择 Add Exception Breakpoint。从出现的气泡中，我从 Exception 选项中选择了 Objective-C（尽管我怀疑如果你愿意，你完全可以放心地离开它），我将 Break 选项留在 On Throw 中。单击完成后，列表中应该会有一个新的异常断点。（[阅读更多](http://www.dosomethinghere.com/2011/04/18/xcode-4-exception-breakpoint/)）

*   启用僵尸模式以跟踪内存问题（[Xcode 4 如何](https://stackoverflow.com/questions/2190227/how-do-i-setup-nszombieenabled-in-xcode-4)）

# r - fGarch R 包中的 garchSim 函数

> ID：10784075
> 
> 赞同：0
> 
> 时间：2012-05-28T11:39:35.247
> 
> 标签：r, time-series

我正在尝试从 GARCH 过程中进行模拟。我不明白 garchSim 函数给出的输出。这是我正在运行的代码：

```
library(fGarch)
set.seed(1)
model_a<-garchSpec(model=list(alpha=c(0.9,0.2, beta=0.5)), cond.dist="norm", rseed=0.9)
garch_sim_a<-garchSim(spec=model_a, n=500,n.start=0, extended=T) 
```

输出是具有 3x3 矩阵的时间序列对象。据我所知，第一列是实现，第二列是波动过程，第三列是“esp”。此代码为除第三列之外的所有列提供 NaN 值，我不知道为什么！我也不明白这些职位数字是什么以及为什么它们这么大！

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T19:55:46.143

garch(p,q) 是弱平稳的当且仅当参数`alpha`和`beta`小于 1 时。

因此，为了避免 NA，请尝试使用`alpha=c(0.9,0.2),beta=0.5)`像 `alpha=c(0.25,0.24),beta=0.5)`since 0.25 + 0.24 + 0.5 < 1 这样的东西。

# web-crawler - 如何让搜索爬虫正确索引无限滚动的页面？

> ID：10784080
> 
> 赞同：13
> 
> 时间：2012-05-28T11:39:54.323
> 
> 标签：web-crawler, infinite-scroll

我有一个实现无限滚动的网站：当用户到达页面末尾时，会进行 AJAX 调用并将新内容附加到页面底部。然而，这意味着搜索爬虫无法获取第一个“分页符”之后的所有内容。例如，我有一个页面列出了所有带有“信息图表”标签的项目。实际上有几十个这样的项目，但爬虫只能看到前 10 个，因为其他项目是根据内容相对于浏览器窗口的位置加载的。由于爬虫没有浏览器窗口，因此根本不会加载新项目。

那么，怎样才能让搜索爬虫在无限滚动的情况下访问网页的全部内容，同时又能让用户享受无限滚动和无分页的乐趣呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-09T06:17:09.480

沿着[优雅降级](http://en.wikipedia.org/wiki/Fault-tolerant_system)的思路，你不应该依赖 JavaScript 来完成像分页这样重要的事情。我可能会先实现一个正常的分页系统（搜索引擎可以索引），然后使用JS隐藏分页链接并实现无限滚动解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T14:22:27.007

## 制作查看全部页面

制作另一个页面，上面列出所有内容并链接到通常包含在无限滚动页面上的项目。然后放置一个名为的无限滚动页面的小链接（可能在最底部）`all whatever`。换句话说，如果您的页面列出产品链接应该说`Show All Products`或类似。如果页面是博客文章，那么链接应该类似于`All Articles`. 是的，人类可能不喜欢长负载，但对于谷歌来说，它的大小并不重要。它将下载它并正常访问其中的链接。

此外，如果您的分页遍历数以万计的项目，那么您可以将您的“查看所有页面”分解为类似于博客存档或产品目录的工作方式的部分。关键是您为没有 javascript 的人类和那些真正想查看所有内容的人提供了一种替代方法，同时也为 Google**甚至其他**搜索引擎提供了一种可以抓取您的页面清单的方法。

最后，作为辅助措施，添加一个`/sitemap.xml`文件，该文件具有每个文章/产品/库存或其他任何内容的索引。见[http://www.sitemaps.org/](http://www.sitemaps.org/)

[您可以观看标题为分页和 SEO](http://www.youtube.com/watch?v=njn8uXTWiGg)的官方 Google 网站管理员视频，了解查看所有概念、分页、规范 url 和 Google 的 rel=next 和 rel=prev 属性。

[http://www.youtube.com/watch?v=njn8uXTWiGg](http://www.youtube.com/watch?v=njn8uXTWiGg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T11:19:35.493

正确的方法是允许 no-js-pagination。通常大多数网站所做的是在提要的底部插入一个分页按钮。当用户向下滚动时，自动分页会从提要底部的按钮动作触发，在发生这种情况时可能会被隐藏。这意味着，文档中的 html 元素触发了自动分页，它不是纯 JavaScript。如果这个按钮是，比如说，一个锚标签，它也提供 html，那么网络爬虫将可以访问它。这里引入了@Victor Stanciu 提到的优雅降级的概念：始终在标准 JS 响应之上提供 HTML 后备响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:17:37.480

此外 - 您在给定页面上拥有的内容越多 - 爬虫对每个单词的权重就越少，因此您最终可能不会因为每个页面上的内容过多而没有命中。

因此，正如 exizt 所建议的那样，宁愿使用正常的分页和友好的 url。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T13:54:38.773

看看这个：[https](https://developers.google.com/webmasters/ajax-crawling/?hl=de) ://developers.google.com/webmasters/ajax-crawling/?hl=de 。这也是一个很好的解释：[http ://coding.smashingmagazine.com/2011/09/27/searchable-dynamic-content-with-ajax-crawling/](http://coding.smashingmagazine.com/2011/09/27/searchable-dynamic-content-with-ajax-crawling/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T14:13:40.417

虽然这听起来是个好主意，但我可以看到这会对您的页面排名产生负面影响。爬虫必须通过的信息量将导致内容中链接的排名下降，从而使原始点在其中给爬虫写信毫无用处。

您应该使用站点地图和元标记来完成很多您想要的事情。只要爬虫仍然可以通过单独的页面调用访问内容，你应该没问题。

# sed - 从文件中多次替换和同时删除行

> ID：10784084
> 
> 赞同：0
> 
> 时间：2012-05-28T11:40:03.910
> 
> 标签：sed, filtering

我有大量文件，我想从中删除包含一组特定字符串的行。

我知道`sed -i '/string1/d'`这样做是为了防止您只想删除包含一个特定字符串的行，但是我想知道这样做的选项是什么，以防我有一组字符串要跨行匹配并删除这些行。

这可能吗：`sed -i '/string1|string2/d' file.txt`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:56:31.177

你只需要逃避`|`：

```
sed -i '/string1\|string2/d' file.txt 
```

请注意，您还可以执行以下操作：

```
sed -i -e '/string1/d' -e '/string2/d' file.txt 
```

在这种特殊情况下，您可以执行以下操作：

```
sed -i '/string[12]/d' file.txt 
```

（最后一个示例旨在说明可能有多种方法可以操纵模式以满足您的要求。）

# perl - Perl OO 方法调用第一个参数值 (->)

> ID：10784085
> 
> 赞同：2
> 
> 时间：2012-05-28T11:40:04.820
> 
> 标签：perl

就 Perl OO 而言，究竟做了`->`什么？

例如，我打电话给 main：

```
$result = a::b->mymethod( ); 
```

在我定义的包中`mymethod()`，我使用以下内容：

```
 my( $class ) = @_; 
```

总的来说，我显然没有将任何参数传递给`mymethod()`，那么`$class`参数来自哪里？有没有人对此有一个很好的解释或解释这个的文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T12:05:15.860

perlobj 文档的[“方法调用”部分](http://perldoc.perl.org/perlobj.html#Method-Invocation)解释了这一点。增加的重点是我的。

> ## 方法调用
> 
> 由于各种历史原因和其他原因，Perl 提供了两种等效的方法来编写方法调用。更简单和更常见的方法是使用箭头符号：
> 
> ```
> my $fred = Critter->find("Fred");
> $fred->display("Height", "Weight"); 
> ```
> 
> 您应该已经熟悉`->`操作符与引用的用法。事实上，由于`$fred`上​​面是对对象的引用，您可以将方法调用视为另一种形式的取消引用。
> 
> **箭头左侧的任何内容，无论是引用还是类名，都将作为其第一个参数传递给方法子例程。**所以上面的代码大多等价于：
> 
> ```
> my $fred = Critter::find("Critter", "Fred");
> Critter::display($fred, "Height", "Weight"); 
> ```
> 
> Perl 如何知道子程序在哪个包中？通过查看箭头的左侧，它必须是包名称或对对象的引用，*即*，已经被包祝福的东西。无论哪种方式，这都是 Perl 开始寻找的包。如果那个包没有同名的子例程，Perl 开始在那个包的任何基类中寻找它，以此类推。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T11:51:48.470

声明：`$result = a:b->mymethod( );`由于使用了单个`:`.
正确的形式是：`$result = a::b->mymethod( );`

`->`称为*箭头运算符*。它意味着一个方法调用。对于方法调用，**对象作为第一个参数隐式传递，该参数**可通过`@_`（与任何其他参数一样）使用，除了它是第一个元素。

箭头运算符区分函数/子例程调用和方法调用。

例子：

```
Foo::Bar->method();    # Method call
Foo::Bar::function();  # Function/subroutine call 
```

对于函数/子例程调用，不传递隐式参数。

```
#!/usr/bin/env perl

use strict;
use warnings;

package Foo::Bar;

sub baz {
    print 'Arguments: ', scalar @_, "\n";
}

package main;

Foo::Bar::baz;
Foo::Bar->baz; 
```

相关文件：

*   [`perldoc perlobj`](http://perldoc.perl.org/perlobj.html)- Perl 对象
*   [`perldoc perlboot`](http://perldoc.perl.org/perlboot.html)- 初学者的面向对象教程
*   [`perldoc perltoot`](http://perldoc.perl.org/perltoot.html)- Tom 的 perl 面向对象教程

# java - 如何在 Eclipse 中运行 Play 项目

> ID：10784090
> 
> 赞同：6
> 
> 时间：2012-05-28T11:40:16.120
> 
> 标签：java, eclipse, playframework

你好我一直在尝试找到如何在 Eclipse 中运行 Java Play 项目，但我找不到简单的方法。这是我所做的

创建项目

```
play new testApp 
```

转到文件夹

```
cd testApp 
```

使项目黯然失色

```
play eclipsify 
```

打开 eclipse 并作为**现有项目**导入，但是我不知道如何从 eclipse 运行服务器

注意：我知道我也可以在控制台中运行它。问题是我已经使用 Eclipse 在构建路径中添加了一个 Eclispe 项目，所以如果我在控制台中运行它，我认为它不会工作，还是我错了？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-28T03:21:08.087

在较新版本的 play 中，命令已更改为

```
play eclipse 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-12T14:43:31.110

对于 Play 2.xy，Activator 是首选工具

```
activator eclipse 
```

或者

```
./activator eclipse 
```

使用项目本地激活器副本（如果存在）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T12:28:17.850

Play eclipsify 为您创建运行配置。

**运行 --> 运行配置 --> Java 应用程序 --> testApp**

如果您需要先调试，请按照指示运行应用程序，然后

**运行 --> 调试配置 --> 远程 Java 应用程序 --> 将 JPDA 连接到 testApp**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-20T15:52:22.647

编译 sbt play 项目并将其导入 eclipse IDE 可以按照以下步骤进行：

1.  转到您的项目文件夹并创建文本文件`plugins.sbt`并添加以下代码：

    ```
    addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "5.2.2") 
    ```

2.  要强制编译，请将以下代码添加到您的项目`build.sbt`文件中：

    ```
    EclipseKeys.preTasks := Seq(compile in Compile, compile in Test) 
    ```

3.  确保 Scala IDE 安装在 eclipse 中（从[scala-ide.org](http://scala-ide.org/)下载）

4.  在命令提示符下键入`sbt`编译 sbt play 项目。

5.  编译成功后，在 sbt 中使用命令 eclipse 创建 Eclipse 项目文件 > eclipse。检查 [信息] 为项目成功创建了 Eclipse 项目文件：

6.  转到eclipse IDE并使用导入向导将现有项目导入工作区

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T05:23:57.910

我正在尝试“播放 eclipsify”，但这不起作用，因为它已更改为“播放 eclipse”并且效果很好。

# c# - 是否可以在 MVC3 运行时添加路由？

> ID：10784100
> 
> 赞同：5
> 
> 时间：2012-05-28T11:40:55.673
> 
> 标签：c#, asp.net-mvc-3, routes

我正在 MVC3 和 C# 中为当地一所大学创建一个项目。要求是在浏览器中输入诸如 www.mysite.com/teachercode 之类的内容时显示教师资料。

我在我的教师控制器类中创建了一个 ShowTeacher 方法。我的计划是在申请开始时查找数据库，并为每位教师注册相同的路线，如下所示，这将进一步处理请求，这种方法是否正确？

```
foreach(Teacher tch in TeacherCollection)
routes.MapRoute(
            "Teacher route" + tch.Id,
            tch.TeacherCode,
            new { controller = "Teacher", action = "ShowTeacher" }
        ); 
```

其次，如果在数据库中添加了新教师，是否可以在保存教师后立即添加路线？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:46:56.227

您不需要在运行时添加路由，而是可以设置一个路由来捕获格式为*www.mysite.com/teachercode*的 URL ，只要您的任何*教师代码*都与您的任何控制器没有相同的名称.

在`RegisterRoutes`中，添加另一个路由（需要是*第*一个路由），它将查询路由到`ShowTeacher`您的 action 方法`TeacherController`，以及[路由约束](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)。

```
routes.MapRoute(
    "Teacher route", // route name
    "{teacherCode}", // url
    new { controller = "Teacher", action = "ShowTeacher" }, // defaults
    new { teacherCode = @"[A-Za-z]{1,10}" } // constraints
    ); 
```

此示例中的约束 - `@"[A-Za-z]{1,10}"`- 指定*教师代码*将仅包含大写或小写字母，并且长度在 1 到 10 个字符之间。您可以根据自己的需要进行调整。

# linux - 如何显示 wget 的对话框仪表？

> ID：10784101
> 
> 赞同：1
> 
> 时间：2012-05-28T11:40:56.027
> 
> 标签：linux, shell, dialog

我想显示`wget`使用对话框（`gauge`）的进度。

我[在这个网站上](http://www.dawoodfall.net/scripts/bash/wget-dialog-example)找到了一个解决方案，但它没有显示 100%。90% 后，对话框冻结/停止，代码退出。

有什么方法可以显示 wget 的对话框仪表吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T02:04:45.520

```
URL="http://upload.wikimedia.org/wikipedia/commons/4/4e/Pleiades_large.jpg"
wget "$URL" 2>&1 | \
 stdbuf -o0 awk '/[.] +[0-9][0-9]?[0-9]?%/ { print substr($0,63,3) }' | \
 dialog --gauge "Download Test" 10 100 
```

# sql-server - 在具有复合主键的表上插入选择

> ID：10784103
> 
> 赞同：0
> 
> 时间：2012-05-28T11:41:01.840
> 
> 标签：sql-server, tsql

如果您有一个包含两个主键的表：

```
CREATE TABLE [AttributeMap](
[intParentAttributeId] [bigint] NOT NULL,
[intChildAttributeId] [bigint] NOT NULL,
    [datCreatedDate] [datetime] NOT NULL
  CONSTRAINT [PK_AttributeMap] PRIMARY KEY CLUSTERED 
 ( 
   [intParentAttributeId] ASC,
    [intChildAttributeId] ASC
 ) 
```

如果要执行插入/选择语句以将数据添加到表中，如何限制数据以确保它不会违反两个键？

因此，如果将其插入上表：

```
INSERT INTO [AttributeMap] VALUES (1, 1, getdate())
INSERT INTO [AttributeMap] VALUES (1, 2, getdate())
INSERT INTO [AttributeMap] VALUES (1, 3, getdate())
INSERT INTO [AttributeMap] VALUES (2, 1, getdate()) 
```

您如何在不违反密钥的情况下运行此查询？

```
declare table @temp (intParent int, intChild int)
insert into @temp (1, 1)
insert into @temp (1, 2)
insert into @temp (4, 4)
insert into @temp (5, 5)

 insert into AttributeMap (intParentAttributeId, intChildAttributeId, datCreatedDate)
  select intParent, intChild, getDate()
 from @temp 
```

所以 AttributeMap 应该以两个新行结束，值 4, 4, "date" 和 5, 5 "date"。说得通？

干杯，马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:54:37.340

[`EXCEPT`](http://msdn.microsoft.com/en-us/library/ms188055.aspx)

> 返回操作数左侧查询中的任何不同值，这些值也不是从右侧查询返回的。

尝试这个：

```
insert into AttributeMap (intParentAttributeId, intChildAttributeId, datCreatedDate)
Select temp.intParent, temp.intChild, getDate()
FROM 
(select intParent, intChild
from @temp 
EXCEPT 
select intParentAttributeId, intChildAttributeId
from AttributeMap) as temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:48:05.217

您需要手动检查密钥是否已存在并仅在不存在时才插入：

```
 insert into AttributeMap (intParentAttributeId, intChildAttributeId, datCreatedDate)
 select intParent, intChild, getDate()
   from @temp t
  where not exists (select null
                      from AttributeMap
                     where AttributeMap.intParent = t.intParent
                       and AttributeMap.intChild = t.intChild
                   ) 
```

# java - 如何在摇摆中调整与面板相关的组件大小？

> ID：10784104
> 
> 赞同：1
> 
> 时间：2012-05-28T11:41:03.263
> 
> 标签：java, swing, resize

我想调整与其父（面板）相关的子组件的大小。

我正在使用以下方法：

```
@Override
public Dimension getPreferredSize() {
Dimension d = getParent().getSize();
int w = d.width * wid / 100;
int h = d.height * he / 100;
//System.out.println("x"+w+"h"+h);
return new Dimension(w,h);
} 
```

但这并不能解决我的问题。谁能告诉是否有另一种调整组件大小的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:58:11.603

*   使用正确[`LayoutManager`](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，没有理由提供

*   如果您想通过拒绝 LayoutManager 以编程方式调整大小，那么您必须实现 ComponentListener 或 HierarchyListener

*   在进行任何（上述）更改后，您必须调用 revalidate() 和 repaint()

*   如果要从任何侦听器调整大小，请通过 Swing Timer 延迟调整大小（400-500 毫秒）事件，如果调整大小继续 Timer#restart() 以避免闪烁或冻结，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:44:59.910

您可以只调用`setPreferredSize(Dimension d)`子组件上的 。如果您打包 JFrame，组件将尝试变为该大小。

* * *

编辑：正如评论所说，最好避免`setPreferredSize(Dimension d)`使用，但我已经使用了该方法。例如：一个带有 BorderLayout 的 JPanel，其中有 3 个 JPanel（自定义类）。如果 JPanel.WEST 和 SOUTH 面板（另一个是 CENTER），则其高度必须分别为 0.1 * 宽度或高度。我用了

```
setPreferredSize(new Dimension(getPreferredSize().height, getPreferredSize().width * 0.1)) 
```

效果很好。Borderlayout 采用该值，并使面板更宽一些（我必须这样做，因为在任何内部 JPanel 中都没有其他 JComponents）。

# c# - 当前上下文中不存在类

> ID：10784111
> 
> 赞同：2
> 
> 时间：2012-05-28T11:41:40.983
> 
> 标签：c#, visual-studio-2008

我有一个数据列表用户控件，我在其中插入了具有此属性的超链接：

> NavigateUrl='<%# MyLinkGen.ToFilm(Eval("fid").ToString()) %>'

MyLinkGen 是一个类，我在其中定义了“ToFilm”方法。根据此方法，例如 ToFilm("33") 应生成以下链接：

> /Catalog.aspx?FilmID=33。

当我运行该项目时，我收到此错误：

> 编译器错误消息：CS0103：当前上下文中不存在名称“MyLinkGen”

请问有什么想法吗？我应该改变什么？如何在上下文中包含课程？我相当确定该类已正确定义。谢谢十亿。安娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:48:26.493

您可能需要一个“导入”参考指令。

```
<%@ Import Namespace="MyAppNamespace" %> 
```

# c# - 如何使用文件中的变量而不是c#中的内存（如页面文件）

> ID：10784117
> 
> 赞同：2
> 
> 时间：2012-05-28T11:42:19.297
> 
> 标签：c#, virtual-memory, pagefile

我编写了一个程序，我必须在变量中保存大数据。如何使用文件而不是内存？像虚拟内存（页面文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:55:33.167

您可以为此利用[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)。在 .NET Framework 中，这个不错的功能从`4.0`.

请参阅非持久内存映射文件

> 非持久文件是与磁盘上的文件无关的内存映射文件。当最后一个进程完成对文件的处理时，数据会丢失，文件会被垃圾回收器回收。这些文件适用于为进程间通信 (IPC) 创建共享内存。

# iphone - 播放具有透明背景的电影

> ID：10784120
> 
> 赞同：0
> 
> 时间：2012-05-28T11:42:48.320
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller

我有一个应用程序，我通过单击按钮播放电影。我的电影是透明的。当我单击按钮时，我的电影可以正常播放，但问题是它的背景颜色仍然是白色。我希望电影的背景颜色是透明的。这是我播放电影的代码。

```
-(IBAction)ClickFunny:(id)sender
{
    NSString *url = [[NSBundle mainBundle]
                     pathForResource:@"Moviename"
                     ofType:@"mov"];
    MPMoviePlayerController *playerController =
    [[MPMoviePlayerController alloc]
     initWithContentURL:[NSURL fileURLWithPath:url]];
    playerController.controlStyle =MPMovieControlStyleNone;
    playerController.scalingMode = MPMovieScalingModeAspectFill;
    playerController.fullscreen = YES;

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:playerController];
    playerController.view.frame = CGRectMake(84, 250, 150, 10);
    [self.view addSubview:playerController.view];

    [playerController play];

}
- (void) movieFinishedCallback:(NSNotification*) aNotification {
    MPMoviePlayerController *player = [aNotification object];
    [[NSNotificationCenter defaultCenter]
     removeObserver:self
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:player];
    [player stop];
    [player.view removeFromSuperview];
    [player autorelease];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T20:41:27.320

You will not be able to get this working with built-in iOS logic because iOS movie playback supports only 24BPP pixels. See [playing-movies-with-an-alpha-channel-on-the-ipad](http://emilytoop.com/2012/05/16/playing-movies-with-an-alpha-channel-on-the-ipad/) for a real solution that makes use of videos with an alpha channel.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:46:54.137

您是否尝试过设置 PlayerController 的背景颜色？

```
playerController.view.backgroundColor = [UIColor clearColor]; 
```

# ruby-on-rails - Faye 工作延迟

> ID：10784121
> 
> 赞同：1
> 
> 时间：2012-05-28T11:42:52.093
> 
> 标签：ruby-on-rails, nginx, websocket, faye

我在本地机器上使用 rails 应用程序，它工作正常。但我不能让它在生产服务器上工作。

我使用瘦和 nginx，因为我知道 nginx 不支持 websockets。有时我在日志中看到错误：“[Faye::RackAdapter] 输入必须是字符串或 IO”。我在 faye 中阅读了论坛并禁用了 websockets 添加行“Faye.Transport.WebSocket.isUsable = function(_,c) { c(false) };" 在 faye-browser.js 的末尾。

我在萤火虫中看到了这个帖子请求：

> [{"id":"1","channel":"/meta/handshake","successful":true,"version":"1.0","supportedConnectionTypes":["long-polling","cross-origin -long-polling","callback-polling","websocket","eventsource","in-process"],"clientId":"3q84u8vsc0mtdehob5dweh5nw","advice":{"reconnect":"retry","interval ":0,"超时":45000}}]

还有这个：

> [{"id":"2","clientId":"3q84u8vsc0mtdehob5dweh5nw","channel":"/meta/subscribe","successful":true,"subscription":"/queue/chat"},{"id ":"3","clientId":"3q84u8vsc0mtdehob5dweh5nw","channel":"/meta/connect","successful":true,"advice":{"reconnect":"retry","interval":45000, “超时”：0}}]

现在 faye 确实有效，但需要大约 30-60 秒来获取请求并更新页面。有没有办法减少检查间隔？

我的 nginx conf：http://pastie.org/3982274[Faye::RackAdapter] 输入必须是字符串或 IO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:49:13.207

问题解决了。我必须安装 HAproxy 并将其放在 nginx 之前。

# haskell - GHC的非懒惰分支

> ID：10784124
> 
> 赞同：13
> 
> 时间：2012-05-28T11:43:08.883
> 
> 标签：haskell, ghc

我听说有一个 GHC 分支默认编译成严格的代码，而惰性可以通过注释来启用。（IIRC，他说一家金融公司开发分支并将其用于生产代码。）这是真的吗？我找不到它。

该人士还建议，严格评估比惰性评估（默认情况下）更实用的观点越来越得到认可。我在 Haskell 邮件列表中没有发现这一点，但也许那是因为那里的人不注重实践？

我在严格的 Haskell 上找到的只是明确的东西，比如`$!`and `rnf`。虽然我发现惰性求值非常优雅，但我想在 Haskell 中开发一个程序，我想在其中避免空间泄漏并希望获得可预测的性能。

免责声明：我不是在为严格辩护，我只是想看看严格的 Haskell 或类似的东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T14:29:14.330

你在找[门徒](http://disciple.ouroborus.net/)。

所以在 Haskell 中有两种懒惰需要区分。有惰性 I/O，这是一种可憎的东西，可以通过 iteratee 库解决（无耻插件：包括我的[管道](http://hackage.haskell.org/package/pipes-2.0.0)库）。然后是纯计算中的惰性，这仍然存在争议，但我将尝试总结惰性的主要优点，因为您已经熟悉缺点：

**懒惰更有效**

一个简单的例子是：

```
any = foldr (||) False 
```

`any`查找列表中的任何值是否为`True`. 这只会评估直到 first 的元素`True`，因此列表是否很长并不重要。

惰性只计算它必须的量，这意味着如果你将两个惰性计算链接在一起，它实际上可以提高结果计算的时间复杂度。 [这个 Stack Overflow 评论](https://stackoverflow.com/a/284180/1026598)给出了另一个很好的例子。

这实际上是 iteratee 库非常节省资源的原因。他们只做尽可能多的工作来生成结果，这导致非常有效的内存和磁盘使用以及非常易于使用的语义。

**懒惰本质上更具可组合性**

使用严格语言和函数式编程的人都知道这一点，但实际上我在开发库时无意中证明了这一点`pipes`，其中惰性版本是唯一允许`Category`实例的版本。管道实际上可以在任何 monad 中工作，包括纯`Identity`monad，所以我的证明也可以转化为纯代码。

这就是为什么我相信一般的惰性确实是编程的未来的真正原因，但是我仍然认为 Haskell 是否“正确”地实现了惰性是一个悬而未决的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T01:09:07.063

听起来您好像听说过 Robert Ennals关于GHC[投机性评估的博士论文。](http://www2.berkeley.intel-research.net/~rennals/pubs/thesis.pdf)他创建了 GHC 的一个分支，称为“spec_eval”分支，其中进行了推测评估。因为 Haskell 是非严格的，而不是显式的惰性，所以 spec_eval**严格**到它实际有所作为的程度。虽然它在所有情况下都更快，但它需要对 GHC 进行大量更改并且从未合并。

这个问题之前已经在这个网站上[回答过。](https://stackoverflow.com/questions/996052/is-there-a-haskell-compiler-or-preprocessor-that-uses-strict-evaluation)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T08:27:26.120

关于为什么你不应该回避 Haskell 的懒惰，已经说了一些好话，但我觉得最初的问题仍未得到解答。

> Haskell 中的函数应用是非严格的；也就是说，仅在需要时才评估函数参数。

~ [Haskell 报告 2010 > 预定义类型和类 # 严格评估](http://www.haskell.org/onlinereport/haskell2010/haskellch6.html#x13-1260006.2)

然而，这有点误导。实现*可以*在需要之前评估函数参数，但仅限于有限的范围。您必须保留非严格语义：因此，如果参数的表达式导致无限循环，并且未使用该参数，则使用该参数的函数调用不得无限循环。

因此，您*可以*以不完全“懒惰”的方式实现 Haskell，但它也不能是“严格”的。乍一看，这似乎是一个矛盾，但事实并非如此。您可能想要查看的一些相关主题：

*   [Eager Haskell](http://csg.csail.mit.edu/pubs/haskell.html)，Haskell 编程语言的一种实现，默认情况下使用渴望评估。我相信这就是您所想的（尽管它不是 GHC 的一个分支）。
*   [推测执行](http://en.wikipedia.org/wiki/Speculative_execution)和推测并行（参见例如[推测](http://hackage.haskell.org/package/speculation)包）。
*   [Optimistic Evaluation](http://research.microsoft.com/en-us/um/people/simonpj/papers/optimistic/)，SPJ 的一篇关于通过严格优化加速 GHC 的论文。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-08T21:08:07.830

> 我听说有一个 GHC 分支默认编译成严格的代码，而懒惰可以通过注释来启用

您可以尝试 GHC 8.0.2、8.2.2 或 8.4.1，也就是最后三个版本中的任何一个。他们有一个`{-# LANGUAGE Strict #-}`用于数字代码等的编译指示。

> 金融公司开发分支并将其用于生产代码。）这是真的吗？我找不到它。

渣打银行确实开发了自己的 Haskell 编译器。我不希望他们向公众提供它。我不确定默认情况下它是否严格。

> 该人士还提出了严格评估比懒惰评估更实用的观点

这没有意义，也没有证据支持。事实上，llvm-hs-pure 包通过选择使用 state monad 的严格版本而不是惰性版本引入了一个[错误。](https://purelyfunctional.org/posts/2018-03-04-monadfix-lazy-strict-state.html)此外，类似[parallel-io](https://hackage.haskell.org/package/parallel-io-0.3.3/docs/Control-Concurrent-ParallelIO-Global.html)包之类的东西也不起作用。

> 我想在 Haskell 中开发一个程序，我想避免空间泄漏并希望具有可预测的性能。

这两年我没有被懒惰导致的空间泄漏咬伤。我建议改为使用基准测试并分析您的应用程序。编写具有可预测性能的 Haskell 比添加严格注释并希望您的程序仍然可以编译更容易。理解你的程序、分析和学习函数式数据结构比盲目地添加编译器编译指示来提高程序的性能会更好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-28T17:34:48.720

如果我理解正确的话，严格的 Haskell 不可能有我们所知道的单子 I/O。Haskell 中的想法是所有 Haskell 代码都是纯代码（包括 IO 操作，其工作方式与 State monad 类似），并且“main”为运行时提供 IO () 类型的值，然后反复强制排序运算符 >>= .

对于 Tekmo 的帖子，您可以查看 Robert Harper 的博客，* [http://existentialtype.wordpress.com/2011/04/24/the-real-point-of-laziness/](http://existentialtype.wordpress.com/2011/04/24/the-real-point-of-laziness/) 和相关的。它是双向的。

以我的经验，一开始懒惰是很困难的，但你习惯了它就很好了。

懒惰的经典倡导文章是 Hughes 的论文“为什么函数式编程很重要”，您应该可以轻松找到它。

# c# - 将对象从父视图传递到 MVVM 中的子视图

> ID：10784127
> 
> 赞同：4
> 
> 时间：2012-05-28T11:43:26.597
> 
> 标签：c#, wpf, windows, mvvm, communication

我目前正在尝试使用 WPF 和 MVVM，但我最近遇到了一个我不知道如何解决的问题。我是新手，所以如果有什么不应该的，请告诉我。

我有一个 ParentView 和它的 ParentViewModel。ParentView 拥有两个视图 SubViewA 和 SubViewB，它们都有自己的 ViewModel。这是我的 ParentView.xaml：

```
<local:ViewBase.DataContext>
    <local:ParentViewModel x:Name="Model" />
</local:ViewBase.DataContext>

<Grid>
    <local:SubViewA Visibility="{Binding ElementName=Model, Path=SubViewAVisibility}" />
    <local:SubViewB Visibility="{Binding ElementName=Model, Path=SubViewBVisibility}" />
</Grid> 
```

我想要做什么：SubViewModelB 有一个绑定到 SubViewB 的属性。当 ParentViewModel 中发生某个事件时，我想更改该属性。我想这应该通过将 SubViewModelB 中的属性绑定到 ParentViewModel 中的属性来完成，但我不确定如何？我在 ParentView.xaml 中尝试了类似以下内容：

```
<local:SubViewB Visibility="{Binding ElementName=Model, Path=SubViewBVisibility}" SomeProperty="{Binding ElementName=Model, Path=WhatIWantThePropertyToBe}" /> 
```

但这让我无处可去。那么我该如何解决呢？我知道我可以通过 MVVM 轻型工具包中的消息传递来做到这一点，但这似乎不适合我正在尝试做的事情。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:57:16.703

[这听起来像是EventAggregator](http://martinfowler.com/eaaDev/EventAggregator.html)模式的一个很好的解决方案。那里有一些很棒的实现，例如[Microsoft Prism](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)或[TinyMessenger](http://www.grumpydev.com/2010/03/22/announcing-tinymessenger/)提供的（非常轻量级）

作为一个代码示例，你会做这样的事情（使用 Prism，未经测试的代码）

```
public class ParentViewModel
{
    private IEventAggregator eventAggregator;

    public ParentViewModel(IEventAggregator eventAggregator)
    {
       this.eventAggregator = eventAggregator;
    }

    public void PublishSomeEvent()
    {
        // When a condition occurs, publish an event any subscribers 
        // that may be listening
        this.eventAggregator.GetEvent<SomeEvent>()
            .Publish(new SomeEvent("Hello World!")));
    }
}

public class SubViewModel
{
    private IEventAggregator eventAggregator;

    public SubViewModel(IEventAggregator eventAggregator)
    {
       eventAggregator.GetEvent<SomeEvent>.SomeEvent(OnSomeEventOccurred);
    }

    public void OnSomeEventOccurred(SomeEvent arg)
    {
        // This method called when ParentViewModel publishes the event
        Console.WriteLine(arg.OptionalMessage);
    }
} 
```

您需要单独声明事件。例如，我用这个

```
public SomeEvent : CompositePresentationEvent<SomeEvent>
{
    public SomeEvent(string optionalMessage)
    {
        this.optionalMessage = optionalMessage;
    }

    public string OptionalMessage { get { return optionalMessage; } } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:16:43.967

你会`SubViewModel`在你的`ParentViewModel`权利的实例？如果你这样做了，那么你可以简单地捕获事件`ParentViewModel`并手动更改`SubViewModel`.

我不确定这是否是完美的方式，但这应该可以完成工作。

另一种方法是直接将 SubView 的属性与 ParentViewModel 中的属性绑定

尝试这样的事情

```
Binding="{Binding RelativeSource={RelativeSource FindAncestor, 
AncestorType={x:Type Window}}, Path=DataContext.ParentViewModelProperty}" 
```

# php - 如何将 php 进程作为单例运行

> ID：10784129
> 
> 赞同：3
> 
> 时间：2012-05-28T11:43:32.907
> 
> 标签：php, shell

我看到了一个 PHP 代码，它使用 shell 命令来确定这个进程现在是否正在运行，但我把它弄丢了。你能给我一个提示如何做到这一点吗？

**这个想法是创建一个 php 文件并使用php -f**将此文件作为 cron 作业运行。脚本的执行时间可能是 10 秒，也可能是 10 分钟。我需要让这个 cron 每分钟运行一次，如果前一分钟的 cron 仍在运行 - 停止新的 cron 并让另一个完成。

我在 shell 编程方面不是很好，所以我需要一些帮助。

**PS** *这个想法是创建一个守护进程，而不会将无休止的 PHP 进程置于后台。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:48:13.123

您应该尝试在锁定文件上获取独占非阻塞锁定。如果你成功了，你的进程是唯一正在运行的实例，你应该保持锁定直到你终止。如果你没有成功获取锁，那么已经有另一个正在运行的实例，你应该终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:30:50.617

出于许多目的，以下代码是可以的（可能存在竞争条件，但对于分钟的 cronjob，这可能非常罕见）：

```
if (file_exists($lockfilename)) {
   ... // lock is already taken
} else {
   if ( !file_put_contents($lockfilename, $lockstring)) {
      error("unable to write $lockfilename");
   }
   $lock_taken = true;
   ... // do what you have to do
   if ( !unlink($lockfilename)) {
      warning("unable to unlink $lockfilename");
   }
   $lock_taken = false;
} 
```

全局变量`$lock_taken`可能有助于确保在执行停止时删除锁定文件。可以是日期或 Unix 时间戳，如果它明显太旧（但可能就足够了），`$lockstring`它可能对移除锁很有用。`filemtime()`

如果你绝对不能冒竞争条件的风险，你必须做类似的事情

```
if ( !($lockfile = fopen($lockfilename, "x"))) {
   ... // lock is already taken
} else {
   $lock_taken = true;
   ... // write something to lockfile (optional)
   fclose($lockfile);
   ... // do what you have to do
   if ( !unlink($lockfilename)) {
      warning("unable to unlink $lockfilename");
   }
   $lock_taken = false;
} 
```

不过，这只适用于本地锁文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T05:39:49.737

独占文件锁定方法比“检查文件是否存在”方法更好，因为如果脚本在您删除文件之前崩溃，那么锁定仍然存在。

这是文件锁定的代码：

```
//Allow only one instance
$fileHandler = fopen('file_lock.lock', 'w');
$hasLock = flock($fileHandler, LOCK_EX | LOCK_NB);
if (!$hasLock)
    die("Another instance is already running");

//do work

//release lock
flock($fileHandler, LOCK_UN);
fclose($fileHandler); 
```

释放锁块是可选的，因为脚本执行后系统会自动释放锁。

# objective-c - 在 Cocos2d 中绘制后找不到任何模糊形状的方法

> ID：10784131
> 
> 赞同：0
> 
> 时间：2012-05-28T11:43:41.720
> 
> 标签：objective-c, opengl-es, cocos2d-iphone

我在 CCNode 中使用 openGL 命令绘制了一些形状。现在我想用它处理高斯模糊。但我找不到任何方法来做到这一点。有人推荐吗？

.

.major 解决代码：

```
 CCRenderTexture *renderTex = [[CCRenderTexture renderTextureWithWidth:480 height: 320] retain];
    renderTex.position = ccp(size.width/2, size.height/2);
    [renderTex begin];
    //here can put any draw code with opengl
    [curve visit];
    [renderTex end];
    CCTexture2DMutable *mutableTexture=[[[CCTexture2DMutable alloc]
                                        initWithImage:[renderTex getUIImageFromBuffer]]autorelease];

    CGRect rect = CGRectMake(0, 0, [mutableTexture contentSizeInPixels].width, [mutableTexture contentSizeInPixels].height);
    [AWTextureFilter blur:mutableTexture radius:8 rect:rect];
    CCSpriteFrame *frame = [CCSpriteFrame frameWithTexture:mutableTexture rect:rect];
    [[CCSpriteFrameCache sharedSpriteFrameCache]addSpriteFrame:frame name:@"1"];
    CCSprite *blur = [CCSprite spriteWithSpriteFrame:frame];
    [blur setPosition:ccp(size.width/2, size.height/2)];
    blur.opacity=200;
    [self addChild:blur]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:13:03.823

你必须：

*   将整个场景渲染到渲染目标（到纹理），可以使用 Framebuffer Objects
*   然后你绘制一个带有先前纹理（带有场景）的全屏四边形。
*   最后，您可以执行 gussian 模糊效果（或其他一些后处理效果）

一些信息：

*   [http://maniacdev.com/2011/07/tutorial-masking-sprites-in-cocos2d-with-ccrendertexture/](http://maniacdev.com/2011/07/tutorial-masking-sprites-in-cocos2d-with-ccrendertexture/)
*   [http://www.songho.ca/opengl/gl_fbo.html](http://www.songho.ca/opengl/gl_fbo.html)
*   [http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/](http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/)

# django - Django - 没有名为 _sqlite3 的模块

> ID：10784132
> 
> 赞同：21
> 
> 时间：2012-05-28T11:43:41.907
> 
> 标签：django, python-2.7, sqlite, django-models, django-admin

我的 rhel 5 上安装了 django 1.4。默认情况下，rhel 5 中包含 python 2.4，但要使用 django 1.4，我手动安装了 python 2.7.3 开发服务器运行良好，但是当我创建一个新项目并更改设置后。 py 文件为：

“引擎”：“django.db.backends.sqlite3”，“名称”：“/home/oracle/Desktop/test1/my.db”

现在，当我给出 python2.7 manage.py syncdb 命令时，我得到的错误是：

```
Traceback (most recent call last):
 File "manage.py", line 10, in <module>
   execute_from_command_line(sys.argv)
 File "/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py",
line 443, in execute_from_command_line
   utility.execute()
 File "/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py",
line 382, in execute
   self.fetch_command(subcommand).run_from_argv(self.argv)
 File "/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py",
line 261, in fetch_command
   klass = load_command_class(app_name, subcommand)
 File "/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py",
line 69, in load_command_class
   module = import_module('%s.management.commands.%s' % (app_name, name))
 File "/usr/local/lib/python2.7/site-packages/django/utils/importlib.py",
line 35, in import_module
   __import__(name)
 File "/usr/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py",
line 8, in <module>
   from django.core.management.sql import custom_sql_for_model,
emit_post_sync_signal
 File "/usr/local/lib/python2.7/site-packages/django/core/management/sql.py",
line 6, in <module>
   from django.db import models
 File "/usr/local/lib/python2.7/site-packages/django/db/__init__.py",
line 40, in <module>
   backend = load_backend(connection.settings_dict['ENGINE'])
 File "/usr/local/lib/python2.7/site-packages/django/db/__init__.py",
line 34, in __getattr__
   return getattr(connections[DEFAULT_DB_ALIAS], item)
 File "/usr/local/lib/python2.7/site-packages/django/db/utils.py",
line 92, in __getitem__
   backend = load_backend(db['ENGINE'])
 File "/usr/local/lib/python2.7/site-packages/django/db/utils.py",
line 24, in load_backend
   return import_module('.base', backend_name)
 File "/usr/local/lib/python2.7/site-packages/django/utils/importlib.py",
line 35, in import_module
   __import__(name)
 File "/usr/local/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py",
line 31, in <module>
   raise ImproperlyConfigured("Error loading either pysqlite2 or
sqlite3 modules (tried in that order): %s" % exc)
django.core.exceptions.ImproperlyConfigured: Error loading either
pysqlite2 or sqlite3 modules (tried in that order): No module named
_sqlite3 
```

请建议出路？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-01-08T15:56:19.473

你也可能在没有安装 sqlite 开发库的情况下手动编译了 python

所以，做

```
sudo apt-get install libsqlite3-dev libsqlite3 
```

然后，重新安装python

通过输入进行测试

```
python
>>> import sqlite3 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T10:06:00.803

在[django.db.backends.sqlite3](https://github.com/django/django/blob/1.5/django/db/backends/sqlite3/base.py#L27)，它试图

```
try:
    try:
        from pysqlite2 import dbapi2 as Database
    except ImportError:
        from sqlite3 import dbapi2 as Database
except ImportError as exc:
    from django.core.exceptions import ImproperlyConfigured
    raise ImproperlyConfigured("Error loading either pysqlite2 or sqlite3 modules (tried in that order): %s" % exc) 
```

因此未安装名为**[sqlite3](http://www.sqlite.org/)**或**[pysqlite2的模块之一。](http://pypi.python.org/pypi/pysqlite/)**尝试安装它们

```
$ pip install sqlite3 # or pysqlite2 
```

**更新**

`sqlite3`并且`pysqlite2`是 Python 的一部分，因此这两个包不再在[PyPi](https://pypi.python.org)中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-08T22:23:03.837

当我尝试运行 Django 开发服务器时，我收到了非常相似的错误消息：

```
ImproperlyConfigured: Error loading either pysqlite2 or sqlite3 modules (tried in that order): dlopen(/Users/Rubinous/Projects/Jiiri2/jiiri_venv/lib/python2.7/lib-dynload/_sqlite3.so, 2): Library not loaded: /usr/local/opt/sqlite/lib/libsqlite3.0.8.6.dylib
Referenced from: /Users/Rubinous/Projects/Jiiri2/jiiri_venv/lib/python2.7/lib-dynload/_sqlite3.so
Reason: image not found 
```

我通过安装`pysqlite`Python 模块解决了这个问题`pip install pysqlite`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-01T02:29:39.727

在 MacOSX 10.9 (Mavericks) 上，我必须运行以下命令：

```
CPPFLAGS=-I/usr/local/opt/sqlite/include; LDFLAGS=-L/usr/local/opt/sqlite/lib; pip install pysqlite 
```

我使用自制软件安装 sqlite3。

```
brew update; brew install sqlite 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-02T23:33:13.743

这就是我为了让它工作而做的。

我正在使用安装了 python 2.7.5 的 pythonbrew（使用 pip）。

我首先按照 Zubair（上图）所说的做了，然后运行了这个命令：

```
sudo apt-get install libsqlite3-dev 
```

然后我运行了这个命令：

```
pip install pysqlite 
```

这解决了数据库问题，我在运行时得到了确认：

```
python manager.py syncdb 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-28T12:14:58.467

[sqlite3](http://docs.python.org/library/sqlite3.html)是 Python 2.5 及以后版本的一部分。安装这个库：

```
sudo apt-get install libsqlite3-dev 
```

或者你也可以尝试安装 Python-dev 包。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-09T14:13:02.023

我在 Red Hat 上从源代码构建的 python 2.6.8 遇到了同样的问题（但这可能适用于其他操作系统上的其他版本）。

我的问题是通过在配置和构建 python**之前**`config.status --recheck`安装 sqlite-devel (Red Hat) 解决的（或者在你的构建目录中执行，然后是`make`and `make install`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-10T10:04:54.380

**FreeBSD10**：适用于**python3.5**

```
pkg install py35-sqlite3 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-22T12:46:42.520

MordicusEtCubitus 的回答是正确的。作为一个新手，还不能投票给你。

只是为了增加您的答案，在 fedora(23) 上运行以下命令来安装。

```
sudo dnf install libsqlite3x-devel libsqlite3x 
```

# .net - 如何获取dll的当前路径

> ID：10784133
> 
> 赞同：0
> 
> 时间：2012-05-28T11:43:49.367
> 
> 标签：.net, visual-c++

在我的 C# 应用程序中，我们使用的是 vc++ 中的 dll，我们想知道 vc++ 中该 dll 的当前路径，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:51:22.200

如果您尝试从 C# 获取位置，您可以使用反射和[GetAssembly(Type type) 方法](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getassembly.aspx#Y0)

在 C++ 中

```
Assembly^ SampleAssembly;
// Instantiate a target object. Int32 Integer1(0); Type^ Type1; 
// Set the Type instance to the target class type. 
Type1 = Integer1.GetType();
// Instantiate an Assembly class to the assembly housing the Integer type.
SampleAssembly = Assembly::GetAssembly( Integer1.GetType() );
// Gets the location of the assembly using file: protocol.
Console::WriteLine("CodeBase= {0}", SampleAssembly->CodeBase); 
```

或者从您调用的 C# 代码中，只需将 Integer1 替换为您的 VC++ 程序集中的类型。

# c# - C# - 从 TCP 连接读取时丢弃一些数据包

> ID：10784137
> 
> 赞同：4
> 
> 时间：2012-05-28T11:44:19.187
> 
> 标签：c#, .net, sockets, tcp

我正在使用 C# 通过 TCP 连接读取连续的数据流（ITCH 数据，即外汇价格），但在运行应用程序较长时间后，有时应用程序会丢弃数据包并且信息会丢失。

下面是我用来读取数据的代码片段：

```
private void ReaderThreadStarter()
    {
        StreamReader streamReader = new StreamReader(this._networkStream);
        while (!_stopping)
        {
            try
            {
                if (this._networkStream.DataAvailable)
                {
                    while ((line = streamReader.ReadLine()) != null)
                    {
                        lock (_queue.ConcurrentQueue)
                        {
                            byte[] data = System.Text.Encoding.ASCII.GetBytes(line);
                            Log.Info("Data Added in Queue: " + Encoding.ASCII.GetString(data, 0, data.Length));
                            _queue.WriteToQueue(data);
                        }
                    }
                }
            }
            catch (Exception exception)
            {
                Log.Error(exception);
            }
            finally
            {
                SetStopped();
            }
        }
    } 
```

上面这段代码所做的是，它从 TCP 连接中读取数据并将其写入并发队列，然后另一个线程使用队列中的数据进行处理。所以基本上是一个简单的生产者-消费者问题。

生产者-消费者部分似乎工作正常，因为我在队列中写入的内容被消费者使用。

一种选择是使用嗅探器并确认应用程序正在丢弃数据包，但我在无法使用嗅探器的环境中工作。我相信有丢包的原因是因为对于我的一些外汇订单我从来没有被取消并且我的价格下跌并且数据提供商告诉我定价在那里是正确的。

我还在记录保存在队列中之前从 TCP 端口读取的数据，因此从日志中我假设数据在从连接中读取时丢失了。

有人可以告诉我我在这里可能做错了什么或丢弃数据包的原因是什么。

以下是我的消费者代码的代码片段：

```
public void ReadQueue()
    {
        try
        {
            while (true)
            {
                {
                    byte[] data = _queue.ReadFromQueue();

                    Parse(data);
                }
            }
        }
        catch (Exception exception)
        {
            Log.Error(exception);
        }
    }

public byte[] ReadFromQueue()
    {
        try
        {
            byte[] data;
            lock (this) // Enter synchronization block
            {
                ConcurrentQueue.TryDequeue(out data);
            } 
            return data;
        }
        catch (Exception exception)
        {
            Log.Error(exception);
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T11:56:27.320

有两件事引起了我的注意；首先是您使用`DataAvailable`. 使用它***实际上从来都不***是正确的做法。这主要用于在同步和异步方法之间进行选择。例如，它***不会***告诉您是否有更多数据入站，并且可能会给出“误报”（因为您正在使用它并不意味着的东西）导致您的循环过早退出。`DataAvailable`仅告诉您数据当前是否在本地缓冲区中可用，*这就是它告诉您的全部内容*。

我感兴趣的第二件事`data`是二进制还是文本。您正在使用的事实`StreamReader`表明文本，但是......为什么要将它重新编码回`byte[]`？如果它*是*任意二进制文件，那么您不能将其作为文本处理——这*将不起作用*。当您通过`StreamReader`您获取它时，您*已经*损坏了内容。如果它是基于文本的协议，请不要重新编码：使用字符串队列（或类似的）。

在不相关的说明中......如果队列是真正的*并发*，您可能不需要同步访问。

# java - 片段和通知：从通知中定位不同的活动；取决于屏幕配置

> ID：10784142
> 
> 赞同：12
> 
> 时间：2012-05-28T11:44:49.337
> 
> 标签：java, android, android-fragments, android-notifications

## 问题：

如果目标可能取决于配置（屏幕尺寸、方向等），如何决定应该启动什么`Activity`；`Notification`就像人们使用`Fragment`s?

* * *

## 细节：

让我们考虑一下[NewsReader 示例](http://developer.android.com/training/multiscreen/index.html)，该示例演示了如何使用`Fragment`s 来生成一个在多种屏幕尺寸和方向上都能正常运行的应用程序。这个应用程序的结构如下：

*   一个`HeadlinesFragment`。
*   一个`ArticleFragment`。
*   “主要”活动 ( `NewsReaderActivity`)。在双窗格模式下，此活动包含两个片段。在单窗格模式下，它仅包含`HeadlinesFragment`.
*   一个`ArticleActivity`。此活动仅用于单窗格模式；它包含`ArticleFragment`.

现在，假设我要增强这个应用程序以添加一个背景`Service`，用于监听新闻更新并在有新新闻项目时通过状态栏通知通知用户。一个合理的需求列表可能是这样的：

1.  如果有多个新闻更新，单击通知应始终将用户带到头条新闻列表。
2.  如果只有一个更新，点击通知应该会打开全新的新闻文章。

请注意，这些要求会根据当前配置转化为不同的目标活动。尤其，

1.  任一模式下的要求 (1) = `NewsReaderActivity`。
2.  双窗格模式下的要求 (2) = `NewsReaderActivity`.
3.  单窗格模式下的要求 (2) = `ArticleActivity`.

实现上述 (2) 和 (3) 的优雅方法是什么？我认为可以安全地排除`Service`探测当前配置以决定使用`PendingIntent`.

我想到的一种解决方案是跳过（2）并始终执行（3）-即，`ArticleActivity`如果只有一个新闻更新，则始终启动。ArticleActivity 的这个片段看起来很有希望：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //...
    //...
    // If we are in two-pane layout mode, this activity is no longer necessary
    if (getResources().getBoolean(R.bool.has_two_panes)) {
        finish();
        return;
    }

    //...
    //...
} 
```

此代码确保如果一个人正在查看`ArticleActivity`，但切换到不再需要的配置（例如从纵向到横向）；然后活动简单关闭。

但是，这在我们的情况下不起作用，因为意图将`FLAG_ACTIVITY_NEW_TASK` 设置标志；我们将创建一个新任务，并且堆栈上没有“以前的”活动。因此，调用`finish()`只会清除整个堆栈。

那么，如果要启动的活动取决于屏幕配置，如何决定从通知中启动什么活动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T11:57:24.563

这是一个非常好的问题！

> 我认为可以安全地排除服务探测当前配置以决定使用 PendingIntent 定位哪些活动的可能性。

我同意将 UI 决策保留在 UI 层会更好，但让服务做出决策肯定是一个权宜之计。您可以在 UI 层类上使用静态方法，以在技术上将决策代码保留在服务之外（例如，服务用于构建它的静态`createArticlePendingIntent()`方法）。`NewsReaderActivity``Notification`

> 那么，如果要启动的活动取决于屏幕配置，如何决定从通知中启动什么活动？

在你的 中使用`getActivity()` `PendingIntent`for ，有足够的额外内容知道它在这个“展示文章”场景中。在它调用之前，让它确定是否是正确的答案。如果是这样，调用launch ，然后调用摆脱它自己（或者不调用，如果你想从文章中返回到）。`NewsReaderActivity``Notification``NewsReaderActivity``setContentView()``ArticleActivity``NewsReaderActivity``startActivity()``ArticleActivity``finish()``NewsReaderActivity`

或者，`getActivity()` `PendingIntent`在`ICanHazArticleActivity`你的`Notification`. `ICanHazArticleActivity`has `Theme.NoDisplay`，所以它不会有 UI。它决定是否启动`NewsReaderActivity`或`ArticleActivity`调用`startActivity()`正确的答案，然后调用`finish()`。与之前的解决方案相比的优势在于，`NewsReaderActivity`如果最终目的地是，则不会出现短暂的闪烁`ArticleActivity`。

或者，使用`createArticlePendingIntent()`我在答案第一段中提到的选项。

可能还有其他选择，但这些都是我想到的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T09:12:26.807

当我在我的应用程序中使用双窗格/单窗格方法时，我只使用一个活动。在这种情况下，这意味着摆脱 ArticleActivity。以下是您可以继续进行的方法：

首先，您可以通过对不同配置使用 XML 布局来控制片段的外观，例如：

单窗格（分辨率/布局）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

        <FrameLayout
                android:id="@+id/mainFragment"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />

</LinearLayout> 
```

双窗格（res/layout-xlarge-land）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

        <FrameLayout
                android:id="@+id/mainFragment"
                android:layout_weight="2"
                android:layout_width="0dp"
                android:layout_height="fill_parent" />

        <FrameLayout
                android:id="@+id/detailsFragment"
                android:layout_weight="1"
                android:layout_width="0dp"
                android:layout_height="fill_parent" />

</LinearLayout> 
```

在 NewsReaderActivity 中，您只需要检查布局中存在哪些片段：

```
boolean isMainFragment = (findViewById(R.id.mainFragment) != null);
if (isMainFragment) {
    mainFragment = new ListFragment();
}

boolean isDetailFragment = (findViewById(R.id.detailsFragment) != null);
if (isDetailFragment) {
    detailFragment = new DetailsFragment();
}

FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
if (isMainFragment ) {
    transaction.add(R.id.mainFragment, mainFragment);
}
if (isDetailFragment ) {
    transaction.add(R.id.detailFragment, detaislFragment);
}  
transaction.commit(); 
```

然后，当您处于单窗格模式（detailsFragment 不存在）并想要显示详细信息屏幕时，您只需再次启动相同的活动，但在意图中包含一个参数以告知需要哪些内容：

```
void onViewDetails() {
    Intent i = new Intent(this, NewsReaderActivity.class);
    i.putExtra("showDetails", true);
    startActivity(i);
} 
```

在您的活动的 onCreate() 中，您可以根据此参数选择片段：

```
boolean isDetailFragment = (findViewById(R.id.detailsFragment) != null);
if (!isDetailFragment) {
    boolean showDetails = getIntent().getBooleanExtra("showDetails", false);
    if (showDetails) {
       mainFragment = new DetailsFragment();
    }
    else {
       mainFragment = new ListFragment();
    }
} 
```

**现在，当您最终从通知启动活动时，您就不再关心当前的屏幕方向了！**

只需在您的意图中包含“showDetails”标志并根据需要进行设置，就像在`onViewDetails()`. 然后，当您处于双窗格模式时，您的活动将显示两个片段（如果“showDetails”为真，您仍然可以执行一些特殊行为），或者当您处于需要单痛苦模式的配置中时，您在中指定的片段显示“showDetails”标志。

我希望这会有所帮助，并使您对这种方法有一个很好的理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:55:13.010

[接受的答案](https://stackoverflow.com/a/10784293/570930)中提到的无 UI Activity 方法是我决定的。我尝试了另一种选择，但没有成功。我尝试的是这样的：

1.  在 中`Service`，构建一个`Intent`堆栈，其中`Intent`for`NewsReaderActivity`位于堆栈底部，for`ArticleActivity`位于堆栈顶部。
2.  使用`PendingIntent.getActivities()`并传入在步骤 1 中创建的堆栈以获得`PendingIntent`表示完整堆栈。
3.  在`ArticleActivity`中，我们有以下代码：

    ```
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //...
        //...
        // If we are in two-pane layout mode, this activity is no longer necessary
        if (getResources().getBoolean(R.bool.has_two_panes)) {
            finish();
            return;
        }

        //...
        //...
    } 
    ```

因此，您首先要瞄准`ArticleActivity`- 它会进行一种自我反省，以决定它在当前配置中是否有用。如果没有，它只是简单地移开`finish()`. 由于`NewsReaderActivity`已经存在`ArticleActivity`于后台堆栈中的“之前”，因此这会将您带到`NewsReaderActivity`.

这似乎是一个完美的解决方案 - 除了我忽略的一点：`PendingIntent.getActivities()`仅适用于 API 11 或更高版本。支持库中有一个粗略的等价物：[`TaskStackBuilder`](http://developer.android.com/reference/android/support/v4/app/TaskStackBuilder.html). 可以继续使用 将 Intent 添加到堆栈中`addNextIntent()`，最后调用`getPendingIntent()`以实现类似于`PendingIntent.getActivities()`（我假设）的东西。

但是，在 HC 之前的设备上，这将导致堆栈中**的最顶层** `Activity`在新任务中启动（强调我的）：

> 在运行 Android 3.0 或更高版本的设备上，调用 startActivities() 方法或发送由 getPendingIntent(int, int) 生成的 PendingIntent 将按照规定构建合成回栈。*在运行旧版本平台的设备上，这些相同的调用将调用所提供堆栈中最顶层的活动，忽略合成堆栈的其余部分并允许返回键导航回上一个任务*。

因此，在 HC 之前的设备上，从 ArticleActivity 按下返回仍会将您带回到我们之前运行的任务。这不是我们想要的。

我可能很快会分享我的项目。即使在进行应用内通知（例如，在我阅读文章时发出“新新闻文章”通知）时，我也担心开始新任务。我希望将其作为一个单独的问题发布。

# android - Android NFC 无法读取 Oberthur ID ONE（PIV 类型 A 大 D）

> ID：10784151
> 
> 赞同：1
> 
> 时间：2012-05-28T11:45:49.630
> 
> 标签：android, nfc

我可以使用 NFC 和 IsoDep 类读取任何卡（或 PIV 卡）——没问题。但是当我访问 Oberthur ID One 卡时，它总是在第一行代码尝试读取卡时立即失败。该线路正在进行收发呼叫，该呼叫始终与其他卡一起使用。

错误报告为“标签丢失”。有没有人遇到过类似的问题？有谁知道为什么这张卡与其他卡的负载不同？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T21:00:03.457

TagLostException 表示未收到任何答复。这可能意味着超时值在卡发送响应之前过期。[`setTimeout()`](http://developer.android.com/reference/android/nfc/tech/IsoDep.html#setTimeout%28int%29)您可以尝试通过在调用之前调用来增加超时`transceive()`。

# c++ - 这是使用宏的好方法吗？

> ID：10784155
> 
> 赞同：0
> 
> 时间：2012-05-28T11:46:14.280
> 
> 标签：c++, objective-c, language-agnostic, macros, styles

我知道宏的[陷阱](https://stackoverflow.com/questions/4100657/problem-with-my-clamp-macro)，并在我真正想要的是一个函数时避免它们。

不过，我发现它们的帮助在于存储诸如“神奇”数字、文件名、字体名称等内容。所以像：

```
ProjectHeader.h

#ifndef __PROJECT_HEADER__
#define __PROJECT_HEADER__

#define kXMLFileName "scoresAndSettings.xml"

#define AUDIO_DATA_TYPE_FORMAT SInt16
#define NUM_AUDIO_BUFFERS 3
#define AUDIO_SAMPLE_RATE 44100.
#define NUM_AUDIO_CHANNELS 2

#define kGameFont @"Helvetica-Bold"
#define kGameFontSizeNormal 18
#define kGameFontSizeSmall 16
#define kGameFontSizeTiny 11 
```

这些让我 (a) 将 UI 细节存储在一个我可以更改它们的地方，并且知道更改将在整个代码中传播，(b) 给它们一个名称来描述它们在代码中的功能，以及 (c) 使用代码自动完成来知道我实际上输入了正确的术语。

我相当有信心这不是一种糟糕的工作方式，但我想知道是否有人认为它是，如果是这样，如何做得更好。

这些可能有点狡猾，但我仍然觉得它们很有帮助：

```
#define __COPY_PROTECTION__
#define __SHOW_FPS__ NO
#define __SKIP_LAUNCH_SCREEN__ 0
#define __START_IN_GAMEPLAY__ 1
#define __START_IN_PREFS__ 0
#define __START_IN_WIN_SCENE__ 0
#define __AUTO_WIN_TESTING__ 0 
```

（然后，在代码中的各个方面：

```
AppDelegate.h
if (__START_IN_GAMEPLAY__) {
 [self show:MyGameplay];
 return;
}
[self show:MainScreen]; 
```

）。这使我可以直接通过仅操作文件`#define`中的宏 d 来测试我正在处理的项目的任何部分。`ProjectHeader.h`

这个好吗？坏的？下次有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:56:58.720

首先，在你的第一组宏中，没有任何东西不能更好地用`const`变量来完成，至少在 C++ 中是这样：

```
char const kXMLFileName[] = "socresAndSettings.xml";
typedef SInt16 audioDataTypeFormat;
int const numAudioBuffers = 3;
//  ... 
```

使用`const`而不是宏的好处是名称将服从范围；对于数值，还有一个优点是您可以更轻松地指定类型（如果不是`int`）。在误用的情况下，错误消息通常也更容易理解。

对于您的第二个块，很难说（但是您选择的名称会导致未定义的行为）。我的印象是这些将用于条件编译。如果是这样，那么它们必须是宏。但总的来说，条件编译是要避免的，除非你的目标是混淆。

这并不是说你永远不应该使用宏。例如，没有其他方法可以自动插入`__FILE__`和`__LINE__`记录原语。在与 Python 或其他定义 C API 的语言交互时，我也广泛使用它们：在 C API 中，“重载”是通过手动名称修改完成的，而在宏中粘贴令牌是唯一简单的实现方法这。

# android - Android OpenGL Es 2.0 动态壁纸纹理和位图

> ID：10784156
> 
> 赞同：0
> 
> 时间：2012-05-28T11:46:15.270
> 
> 标签：android, bitmap, textures, opengl-es-2.0, live-wallpaper

我正在使用opengl es 2.0开发动态壁纸，我想知道是否有办法在渲染器或位图的创建时保持纹理加载，因此它们不需要在每次屏幕方向更改或屏幕时重新创建熄灭。我已经使用缓冲区（索引等）完成了此操作，但纹理和位图正在回收。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:15:24.333

您遇到的行为是 Android 中 OpenGL 应用程序标准生命周期行为的一部分。

这在 30:29 的 Google I/O 视频中有很好的解释

[http://developer.android.com/videos/index.html#v=5yorhsSPFG4](http://developer.android.com/videos/index.html#v=5yorhsSPFG4)

无论如何，GPU中的内存需要重新初始化，并不意味着您需要从头开始重新加载。

通过执行以下操作，您可以获得相当不错的性能：

1.  在启动时将所有内容加载到内存中（VBO + 纹理 + 索引 + 等）

2.  每次从分配的系统内存（点 1）取回上下文到 GPU 时加载 GPU 内存并绑定

通过这种方式，您可以用一块石头取 2 只鸟，您可以保证您的资源始终可以很好地使用，并且您不会在每次“回到上下文”发生时增加加载时间。

# compiler-errors - 当我编译非常简单的 Lex/Yacc 文件时出现“不是结构或联合”错误

> ID：10784157
> 
> 赞同：0
> 
> 时间：2012-05-28T11:46:19.787
> 
> 标签：compiler-errors, bison, yacc, lex, flex-lexer

我一直在寻找我的问题的答案，但没有人能解决我的问题。

这是我非常简单的 Yacc 文件：

```
%{
#include <stdio.h>
#include "y.tab.h"

int clientesVodafone = 0;
int clientesMovistar = 0;
float sumaVodafone = 0.0;
float sumaMovistar = 0.0;
%}

%union {
    int t0;
    float cm;
};

%token NUMEROTELEFONO OPERADORA SERVICIO COSTEMENSAJE
%type <t0> OPERADORA
%type <cm> COSTEMENSAJE

%start fichero
%%

ServicioSMS: NUMEROTELEFONO OPERADORA SERVICIO COSTEMENSAJE {
                if ($2.t0 == 0) {
                    clientesMovistar++;
                    sumaMovistar += $4.cm;
                } else {
                    clientesVodafone++;
                    sumaVodafone += $4.cm;
                }
            }

fichero: ServicioSMS
fichero: fichero ServicioSMS

%%

int main(void) {
  yyparse();
  printf("%i clientes de VODAFONE con coste %f euros.", 
        clientesVodafone, sumaVodafone);
  printf("%i clientes de MOVISTAR con coste %f euros.",
        clientesMovistar, sumaMovistar);
} 
```

这是我的 Lex 文件：

```
%{
#include <stdio.h>
#include "y.tab.h"
%} 

%% 

6[0-9]{8}           {return NUMEROTELEFONO;}
MOVISTAR            {yylval.t0 = 0; return OPERADORA;}
VODAFONE            {yylval.t0 = 1; return OPERADORA;}
[0-9]+s             {return SERVICIO;}
[0-9]*\.[0-9]+      {yylval.cm = atof(yytext); return COSTEMENSAJE;}

%% 
```

编译时，我收到著名的错误消息：“错误：请求成员 't0' 在不是结构或联合的东西中”。我也收到与成员“cm”相同的错误。它们与 yyparse() 相关联，如下所示：

```
 if ($2.t0 == 0) {
     clientesMovistar++;
     sumaMovistar += $4.cm;
 } else {
     clientesVodafone++;
 sumaVodafone += $4.cm;
 } 
```

我使用 Bison 和 Flex 并编译：“bison -d -y example.y”、“flex example.l”和“gcc lex.yy.c y.tab.c -ll -lm”。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T18:53:26.450

为什么你有`$2.t0`and`$4.cm`而不是`$2`and `$4`？

该`%type <t0> OPERADORA`语句告诉 Bison 该`OPERADORA`值包含`t0`在联合成员中，因此 Bison`$2`在为操作定义生成的最终代码中用于替换的表达式`ServicioSMS`将自动引用该`t0`成员。因此，您的`$2.t0`遗嘱最终会`<union>.t0.t0`出现错误。`lex.yy.c`如果您检查Bison 生成的文件，您应该能够看到这一点。

同样对于`$4.cm`，这将最终为`<union>.cm.cm`，另一个错误。

因此，删除Bison 文件的操作定义中的那些无关紧要`.t0`和后缀，然后运行新的构建。`.cm``ServicioSMS`

# asp.net - 如何使用 asp.net 克隆/复制控件（带有子控件）？

> ID：10784159
> 
> 赞同：5
> 
> 时间：2012-05-28T11:46:36.180
> 
> 标签：asp.net, vb.net, clone, dynamic-controls

到目前为止，我已经尝试了在这里和网络上其他地方找到的一些不同的解决方案，但没有运气。也许你们中的一个知识渊博的人可以提供帮助......

我有一堆由用户动态创建的控件，我将它们存储为会话状态中的控件集合，因此我可以在每次回发时显示它们。

用户生成的每个控件都是一个 div，其中包含其他控件。

我在每个控件上都有一个按钮，允许用户删除控件或复制它。

当用户点击“复制”时，我正在调用处理事件的 web 方法。

当我的 web 方法发现要复制的控件时，我想制作该控件的副本并将其添加到页面（另一个函数处理将其保存到控件集合（在 page_Unload 上）

```
 Dim DupCtrl As Control = Nothing

        Dim int As Integer = myDynControls.Count
        For i = 0 To int - 1

            If myDynControls(i).ID.Contains(ctrlID) Then
                DupCtrl = Clone_Control(myDynControls(i))
                Exit For
            End If

        Next
End Function 
```

和 Clone_Control 功能：

```
Public Shared Function Clone_Control(OriginalControl As Object) As Object

    Dim type As Type = OriginalControl.[GetType]()
    Dim properties As Reflection.PropertyInfo() = type.GetProperties()
    Dim retObject As [Object] = type.InvokeMember("", System.Reflection.BindingFlags.CreateInstance, Nothing, OriginalControl, Nothing)
    For Each propertyInfo As Reflection.PropertyInfo In properties
        If propertyInfo.CanWrite Then
            propertyInfo.SetValue(retObject, propertyInfo.GetValue(OriginalControl, Nothing), Nothing)
        End If
    Next
    Return retObject
End Function 
```

很遗憾; 开始 PropertyInfo.SetValue.... 的行总是错误：

```
"Exception has been thrown by the target of an invocation." 
```

当我查看 InnerException 时：

```
"Cannot get inner content of dynDiv_FormCtrl_Wrapper_10432 because the contents are not literal." 
```

任何人都可以帮我指出正确的方向来完成这项工作吗？

谢谢阅读 ！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-28T12:18:38.583

我不清楚您的要求，但是如果您可以在客户端执行此操作，那么 jquery clone 方法将是一个不错的选择。

.clone() 方法执行匹配元素集的深层复制，这意味着它复制匹配的元素以及它们的所有后代元素和文本节点。

更多信息[Jquery .clone()](http://api.jquery.com/clone/)

# iphone - 在 iPhone 的电子邮件编辑器屏幕中隐藏字段

> ID：10784160
> 
> 赞同：0
> 
> 时间：2012-05-28T11:46:37.297
> 
> 标签：iphone, ios, email, mfmailcomposeviewcontroller

我正在使用 MFMailComposeViewController 从我的应用程序发送电子邮件，但我想从电子邮件编辑器屏幕中隐藏一些字段。就像我不想在“收件人”字段中显示电子邮件地址，如下图所示。

![在此处输入图像描述](../Images/19d49f4040ae97f0a0829d23ba91a2c5.png)

如何在电子邮件编辑器中隐藏此电子邮件地址，或者如果您对此问题有任何替代方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:55:02.673

MFMailComposeViewController 的 UI 不可自定义，但是您当然可以从代码中预填充字段。

# php - 在php中关闭网页时如何取消会话

> ID：10784163
> 
> 赞同：0
> 
> 时间：2012-05-28T11:46:49.887
> 
> 标签：php, javascript, session, browser

当我通过单击 [x]（不是 onunload）关闭页面时，如何取消设置 SESSION。我想在打开页面和关闭时插入，但我不想在刷新时插入。

```
if (!isset($_SESSION["visits"]))
    $_SESSION["visits"] = 0;
    $_SESSION["visits"] = $_SESSION["visits"] + 1;
if ($_SESSION["visits"] > 1){echo "You hit the refresh button!";}
else{
    mysql_query(
        "INSERT INTO najd_visit( visit_userId, visit_staticId, visit_page,
            visit_enterTime)VALUES ('$userId', '$Sid', '$title', '$date') ");
    echo "This is my site";
    //unset($_SESSION["visits"]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:01:50.977

在页面加载的 JS 事件和离开（`onbeforeunload`事件）之前对您的 php 进行 ajax 调用。

更好地依赖像 jQuery 这样的 JS 库，因为两个事件侦听器的直接 JS 跨浏览器实现对代码来说非常棘手。

**更新。**感谢@piers 评论，我看到我的解决方案不完整，因为它会在页面刷新时计数。如果我正确理解任务，目标是计算页面打开和离开，而不是计算刷新事件。

所以，也许没有真正需要在页面关闭时取消设置会话 - 让它在服务器超时时自行消失？

您可以使用 session_id 来确定页面/会话对是否唯一。例如，您可以将访问过的页面 URL 保留在会话中，以检查您是否已将其计入：

```
<?php
$uri = $_SERVER['REQUEST_URI'];
if( is_set( $_SESSION['seen']) {
    if( !in_array( $uri, $_SESSION['seen'])){
        countup( $uri);
    } else {
        // already counted that page
    }
} else { // session doesn't have the seen array yet
    countup( $uri);
}

function countup( $uri) {
    $_SESSION['seen'][] = $uri;
    mysql_query( "
        INSERT INTO najd_visit 
        ( visit_userId, visit_staticId, visit_page, visit_enterTime)
        VALUES ('$userId', '$Sid', '$title', '$date')
    ");
    echo "This is my site";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:13:22.737

```
session_set_cookie_params(0);
session_start() 
```

手册：[http ://www.php.net/manual/en/function.session-set-cookie-params.php](http://www.php.net/manual/en/function.session-set-cookie-params.php)

* * *

澄清：

当用户不再访问您的站点时，您想终止会话吗？但是，如果他们留在您的网站上（后退按钮、前进等），那么您希望保留会话。

要回答直接问题 - 您无法跟踪用户何时关闭浏览器 - 即当他们点击“x”时，正如评论中所要求的那样。

您不能使用“onunload”，因为它发生在用户可能正在浏览您网站上的页面时。

所以你有四个选择：

1) 使用 cookie 手动控制您的会话，并将 cookie 设置为在浏览器会话结束时过期。

2) Mofify session_set_cookie_params(0) [http://www.php.net/manual/en/function.session-set-cookie-params.php](http://www.php.net/manual/en/function.session-set-cookie-params.php) 所以当浏览器关闭时会话结束。

3) 将 php.ini session.cookie_lifetime 修改为 0（浏览器关闭时会话结束 - 与上面相同，但更全局）

4) 每 30 秒进行一次 ajax 回调，如果您在一分钟后没有收到回调，则假设浏览器已关闭，然后终止会话。（需要相当多的处理！）

# python - Python setuptools - 清洁不起作用

> ID：10784164
> 
> 赞同：1
> 
> 时间：2012-05-28T11:46:53.297
> 
> 标签：python, setuptools

我使用安装工具创建了一个 python 包，它安装得很好，但是当我尝试清理（使用详细模式）时，显示以下消息并且**没有清理任何内容（未删除 build 和 dist 目录）**：

```
running clean
'build/temp.linux-i686-2.7' does not exist -- can't clean it 
```

构建包的内容如下：

```
bdist.linux-i686  lib.linux-i686-2.7 
```

所以我的问题是，为什么这个 temp.linux-i686-2.7 文件夹不存在？应该是？为什么 clean 认为它应该在那里？

顺便说一句，我的 setup.py 文件非常简单，我只是复制了 supervisord 的文件（[https://github.com/Supervisor/supervisor/blob/master/setup.py](https://github.com/Supervisor/supervisor/blob/master/setup.py)）并只修改了名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:23:13.757

如果你这样做，'build/temp.linux-i686-2.7' 是 .py 和 .so 文件的正常存储位置之一：

```
python setup.py build 
```

这可能就是为什么它试图清理它，只是为了确定。如果没有详细说明，您将不会收到该警告。

# c# - 通过 API 获取 Zoho CRM PickList（主要来源、行业、货币等）值

> ID：10784169
> 
> 赞同：1
> 
> 时间：2012-05-28T11:47:03.750
> 
> 标签：c#, api, zoho

Zoho CRM 具有使用用户定义数据扩展自定义字段的内置功能。有什么方法可以通过 API 获取这些值？

根据 API[文档，](https://zohocrmapi.wiki.zoho.com/CRM-Entries.html)只有以下条目可用：

*   潜在客户
*   账户
*   联系人
*   潜力
*   活动
*   任务
*   活动
*   案例
*   解决方案
*   产品
*   价格
*   报价供应商购买销售
*   发票
*   笔记
*   来电

开发人员可以通过以下网址查询它们：

```
https://crm.zoho.com/crm/private/xml/[[EntryName]]/getRecords?newFormat=1&authtoken=[[AuthToken]]&scope=crmapi 
```

我正在构建一个允许创建新潜在客户的自定义应用程序，并且客户希望能够在我的应用程序中编辑潜在客户源。

**如何获取“主要来源”字段的现有值？**

ps：我知道我可以查询所有潜在客户，获取字段值，但这不是解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:10:23.513

答案是使用这个API方法

[https://zohocrmapi.wiki.zoho.com/getFields.html](https://zohocrmapi.wiki.zoho.com/getFields.html)

**目的**

您可以使用 getFields 方法获取特定模块中可用字段的详细信息。

**请求网址**

XML：[https ://crm.zoho.com/crm/private/xml/Tasks/getFields?authtoken=AuthToken&scope=crmapi](https://crm.zoho.com/crm/private/xml/Tasks/getFields?authtoken=AuthToken&scope=crmapi)

JSON：[https ://crm.zoho.com/crm/private/json/Tasks/getFields?authtoken=AuthToken&scope=crmapi](https://crm.zoho.com/crm/private/json/Tasks/getFields?authtoken=AuthToken&scope=crmapi)

**样本响应**

```
<Leads>
<section name="Lead Information" dv="Lead Information">
<FL req="false" type="Lookup" isreadonly="false" maxlength="120" label="Lead Owner" dv="Lead Owner" customfield="false" />
<FL req="true" type="Text" isreadonly="false" maxlength="100" label="Company" dv="Company" customfield="false" />
<FL req="false" type="Text" isreadonly="false" maxlength="40" label="First Name" dv="First Name" customfield="false" />
<FL req="true" type="Text" isreadonly="false" maxlength="80" label="Last Name" dv="Last Name" customfield="false" />
<FL req="false" type="Text" isreadonly="false" maxlength="100" label="Designation" dv="Title" customfield="false" />
<FL req="false" type="Email" isreadonly="false" maxlength="100" label="Email" dv="Email" customfield="false" />
<FL req="false" type="Phone" isreadonly="false" maxlength="30" label="Phone" dv="Phone" customfield="false" />
<FL req="false" type="Text" isreadonly="false" maxlength="30" label="Fax" dv="Fax" customfield="false" />
<FL req="false" type="Phone" isreadonly="false" maxlength="30" label="Mobile" dv="Mobile" customfield="false" />
<FL req="false" type="Website" isreadonly="false" maxlength="120" label="Website" dv="Website" customfield="false" />
...
<section name="Address Information" dv="Address Information">
<FL req="false" type="Text" isreadonly="false" maxlength="250" label="Street" dv="Street" customfield="false" />
<FL req="false" type="Text" isreadonly="false" maxlength="30" label="City" dv="City" customfield="false" />
<FL req="false" type="Text" isreadonly="false" maxlength="30" label="State" dv="State" customfield="false" />
<FL req="false" type="Text" isreadonly="false" maxlength="30" label="Zip Code" dv="Zip Code" customfield="false" />
<FL req="false" type="Text" isreadonly="false" maxlength="30" label="Country" dv="Country" customfield="false" />
</section>
<section name="Description Information" dv="Description Information">
<FL req="false" type="TextArea" isreadonly="false" maxlength="32000" label="Description" dv="Description" customfield="false" />
</section>
</Leads> 
```

和元素**FL[@label='Lead Source']**是我正在寻找的结果：

```
<FL req="false" type="Pick List" isreadonly="false" maxlength="120" label="Lead Source" dv="Lead Source" customfield="false">
<val>-None-</val>
<val default="true">Advertisement</val>
<val>Cold Call</val>
<val>Employee Referral</val>
<val>External Referral</val>
<val>OnlineStore</val>
<val>Partner</val>
<val>Public Relations</val>
<val>Sales Mail Alias</val>
<val>Seminar Partner</val>
<val>Seminar-Internal</val>
<val>Trade Show</val>
<val>Web Download</val>
<val>Web Research</val>
<val>4444</val>
</FL> 
```

**问题是我在没有 PickupList 字段的对象上测试了这个方法，我决定它只返回定义，但不返回可用值。**

# c# - 在属性中指定 T

> ID：10784170
> 
> 赞同：1
> 
> 时间：2012-05-28T11:47:04.590
> 
> 标签：c#, .net, generics

我目前有：

```
public HashSet<int> UniqueData { get; private set; } 
```

如果设置了另一个属性，我想创建它

```
public HashSet<string> UniqueData { get; private set; } 
```

所以在构造函数中它变成

```
if (MyProperty)
  UniqueData = new HashSet<string>();
else
  UniqueData = new HashSet<int>(); 
```

有没有办法将属性声明为：

```
 public HashSet<T> UniqueData { get; private set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T11:48:55.450

您不能声明两个仅类型不同的属性。如果您`HashSet<T>`使整个类在`T`.

```
class Example<T> {
    public HashSet<T> Unique {get;set;}
    public Example(HashSet<T> hs) {
        Unique = hs;
    }
}
public static void Main() {
    Example<int> a = new Example<int>(new HashSet<int>());
    Example<string> b = new Example<string>(new HashSet<string>());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:52:31.877

不幸的是，不，您无法做到这一点。必须在编译时声明属性数据类型。

创建一个类型为的类`T`并将其分配`T`给属性`T`

```
public class TClass<T>
{
    public HashSet<T> UniqueData { get; set; } 
} 
```

并称它为

```
public static void Main() 
{
    TClass<int> a = new TClass<int>(){ UniqueData = new HashSet<int>()};
    TClass<string> b = new TClass<string>(){ UniqueData = new HashSet<string>()};
} 
```

此外，如果它`private set`你只能从类内部设置它的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T11:52:53.377

您可能必须在类级别执行此操作才能获得返回类型`HashSet<T>`

```
public class MyClass<T>
{

  #region ctors
  public MyClass()
  {
    this.UniqueData = new HashSet<T>();
  }
  #endregion

  public HashSet<T> UniqueData { get; private set; } 
} 
```

用法：

```
MyClass cint = new MyClass<int>();
cint.UniqueData.Add(1);

MyClass cstr = new MyClass<string>();
cstr.UniqueData.Add("something unique"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T11:52:09.443

`public HashSet<object> UniqueData { get; private set; }`. 类型必须在编译时指定，所以不，在这种情况下强类型系统不是你的朋友。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T11:55:28.053

我想你的设计有错误。您希望在程序的其余部分中使用 HashSet 的哪些与存储在 Hash 集中的数据类型无关的功能？

然后公开 HashSet 的那些特性（例如通过适配器类或一组属性），而不是 HashSet 本身。

# model-view-controller - 在 PHP MVC 中将视图文件保存为 .html 或 .phtml 或 .php

> ID：10784172
> 
> 赞同：0
> 
> 时间：2012-05-28T11:47:13.950
> 
> 标签：model-view-controller, php

我可能听起来很傻......但请帮助澄清......我正在使用 netbeans IDE 使用 PHP（MVC）创建网页。视图文件使用扩展名 .phtml 或 .html 创建。控制器是用扩展名 .php 创建的

问题是，即使我们将所有文件也存储为 .php，它也可以正常工作。但是用不同的扩展存储有什么意义呢？

如果一切都一样，那么不同的扩展需要什么？？？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:51:42.417

如果您的视图目录位于文档根目录中，则可以直接使用浏览器访问您的视图。如果它们具有 .php 扩展名，它们将由 PHP 解释器执行，这可能是也可能不是问题。如果它们具有 .html 或 .phtml 扩展名，它们将直接显示在浏览器中，这又可能是也可能不是问题。

如果您的 views 目录不在文档根目录中，或者您有其他安全机制限制直接访问它们，那么文件扩展名只是一个偏好问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:51:33.417

这只是一个约定。它能够轻松识别其模板文件，而不是常规的 PHP 代码。

# android - Instrumentation.ActivityMonitor 不监控 Intent.ACTION_CALL

> ID：10784174
> 
> 赞同：5
> 
> 时间：2012-05-28T11:47:19.330
> 
> 标签：android, unit-testing, junit

我有一个简单的测试用例，用于测试是否在单击按钮时发起了拨出呼叫。

```
public void testCalling(){
    IntentFilter callFilter = new IntentFilter();
    callFilter.addAction(Intent.ACTION_CALL);
    callFilter.addCategory(Intent.CATEGORY_DEFAULT);
    callFilter.addDataScheme("tel:");
    ActivityMonitor mMonitor = new ActivityMonitor(callFilter, null, false);
    getInstrumentation().addMonitor(mMonitor);

    mSolo.clickOnText("CALL");

    assertTrue(0 < mMonitor.getHits());
    sendKeys(KeyEvent.KEYCODE_ENDCALL); 
} 
```

虽然 Intent 被调用（拨出电话），但我的 ActivityMonitor 无法注册它。堆栈跟踪是

```
05-28 17:11:09.183: I/ActivityManager(71): Starting activity: Intent { act=android.intent.action.CALL dat=tel:+xxxxxxx cmp=com.android.phone/.OutgoingCallBroadcaster } 
```

请帮忙

我能找到的唯一其他资源是[这个讨论，它在没有任何解决方案的情况下结束](https://groups.google.com/forum/?fromgroups#!topic/android-developers/5OLGwZRn3zk)了 android 开发者组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T11:57:52.983

我以为有同样的问题。后来我发现我的活动监视器不起作用，因为robotium注册了它自己的监视器，它总是命中，阻止了包括我在内的任何其他监视器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:17:09.643

在遇到同样的问题并玩了一会儿之后，我开始工作了。

去掉“tel”的冒号。然后你应该在你的显示器上点击一下。

```
 public void testMakeCall(){
        IntentFilter filter = new IntentFilter(Intent.ACTION_CALL);
        filter.addCategory(Intent.CATEGORY_DEFAULT);
        filter.addDataScheme("tel");

        ActivityMonitor activityMonitor = getInstrumentation().addMonitor(filter, null, false);

        makeCall();

        assertTrue(activityMonitor.getHits() == 1);
    } 
```

# html - Bootstrap 脚手架 @ 3600x1920

> ID：10784176
> 
> 赞同：0
> 
> 时间：2012-05-28T11:47:29.233
> 
> 标签：html, css, twitter-bootstrap

我正在开发一个具有某种“协调器”界面的 Web 应用程序。我希望能够支持我正在使用的 Eyefinity 设置（这是 3 个**3600x1920**或**3780x1920**的纵向显示器，带有边框校正）。

我正在使用 Twitter Bootstrap，我认为它的响应式设计功能满足了我的需求，但我不确定如何根据自己的需要对其进行自定义。

我基本上需要 3 列，每列约 1200 像素宽，但是当屏幕宽度小于 1920 像素宽时，我希望这些列分解为 3 行。

`responsive.less`这可以通过向文件集中添加另一类设备来完成吗？

这是我目前正在使用的代码：

```
<div class="row-fluid">
    <div class="span4"></div>
    <div class="span4"></div>
    <div class="span4"></div>
</div> 
```

下面是一些测试截图：

[太宽，无法舒适地放在标准屏幕上](http://i.imgur.com/cjANz.png)

[相同的数据，完美的 3600x1920](http://i.imgur.com/zNIgQ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T21:07:44.187

好吧，这比我预期的要容易。

我所要做的就是在我的顶级行中添加一个类（我称之为 row-eyefinity），然后将以下 CSS 添加到我的样式表中：

```
@media (max-width:3500px) {
    .row-eyefinity > [class*="span"] {
        float: none;
        display: block;
        width: auto;
        margin-left: 0;
    }
} 
```

# c# - Fluent Nhibernate 继承抛出索引超出范围异常

> ID：10784179
> 
> 赞同：2
> 
> 时间：2012-05-28T11:47:46.727
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate

我正在尝试在流利的 nhibernate 中实现继承，但即使是最简单的映射也会引发异常：此 SqlParameterCollection 的索引 1 无效，Count=1。

我传递的映射尽可能基本，仅映射 Id、源和数量，但传递给集合的唯一参数是数量，而不是源（我的鉴别器）和我正在抛出异常。我最初希望我的鉴别器是一个枚举，但由于我什么都做不了，为了简单起见，我把它变成了一个字符串。

虽然子类目前没有向对象添加任何其他功能，但其他人会，这是最基本的版本，所以我认为这将是最简单的......

阅读此错误，问题通常是由于在基类和子类中都映射了一个属性，但据我所知，情况并非如此。谁能指出我做错了什么，因为我有点茫然。

课程：

```
public class BasePayment
{
    public virtual int Id { get; set; }
    public virtual string Source { get; set; }
    public virtual decimal Amount { get; set; }
}

public class SubPayment : BasePayment
{
} 
```

映射：

```
public class BasePaymentMap : ClassMap<BasePayment>
{
    public BasePaymentMap()
    {
        DiscriminateSubClassesOnColumn("Source");
        Table("BasePayments")
        Id(m => m.Id);
        Map(m => m.Source);
        Map(m => m.Amount);
    }
}

public class SubPaymentMap : SubclassMap<SubPayment>
{
    public SubPaymentMap()
    {
        DiscriminatorValue("SourceX");
    }
} 
```

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:51:52.870

Gaaaaah，发布后不久就找到了答案。鉴别器列本身不需要映射，它是通过指定鉴别器来映射的。看不到树木只见树木，现在感觉很愚蠢......

# android - Android：将自签名证书添加到浏览器信任的 CA

> ID：10784185
> 
> 赞同：3
> 
> 时间：2012-05-28T11:48:22.747
> 
> 标签：android, ssl, ssl-certificate

我在我的 Android 2.3.4 上为我的服务器创建了一个自签名证书（当我浏览到我的 Web 应用程序时），错误`This certificate is not from a trusted authority.`

我可以[从](https://stackoverflow.com/questions/4461360/how-to-install-trusted-ca-certificate-on-android-device)几年前的 SO 帖子中读到这是一个已知问题，现在我想了解现在我的选择是什么。

输入：

*   我的设备没有root
*   我需要证书被浏览器接受，如果可能的话，也被应用程序接受。

我怎样才能从这里继续前进？

# doophp - 表单中的 DooPHP 相关数据

> ID：10784188
> 
> 赞同：1
> 
> 时间：2012-05-28T11:48:51.580
> 
> 标签：doophp

我想问是否有任何方法可以为相关数据呈现表单？

例如

假设我们有一个金融应用程序。我们可以有交易和类别（类别有很多交易）。

交易实体

id、数量、category_id

类别实体

身份证，姓名

到目前为止一切都很好，但是我想在表单中呈现一个元素（选择标签），因此用户可以选择类别表单类别模型。像这样的东西：

```
 <select name="demo"><option value="category_id">category_name</option> 
```

另外，按照 ORM 机制，我将映射设置为

```
 $dbmap['Category']['has_many']['Transaction'] = array('foreign_key'=>'category_id');

      $dbmap['Transaction']['belongs_to']['Category'] = array('foreign_key'=>'id'); 
```

我可以手动构建表单，我可以在类别模型中创建一个函数（例如 get_categories），然后在控制器中，加载模型并将类别发送到视图。这是正确的方法吗？还是有不同的，最合适的方式？

# ios - 从没有密码的推送通知进入 iOS 应用程序

> ID：10784199
> 
> 赞同：0
> 
> 时间：2012-05-28T11:49:29.080
> 
> 标签：ios

有没有办法在不输入密码的情况下从推送通知中打开您的 iOS 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:55:58.423

我不会这么认为。密码的目的是阻止某人进入您的手机，如果您收到推送通知，为什么会禁用它？

每当您收到来自应用程序或电子邮件等的推送通知时，这将使某人可以访问您的手机。那时没有任何意义

# javascript - 禁用 dojo dgrid 中的特定行

> ID：10784201
> 
> 赞同：1
> 
> 时间：2012-05-28T11:49:37.293
> 
> 标签：javascript, dojo, dgrid

是否可以禁用 dojo dgrid 中显示的特定行？我仍想显示它们，但不允许用户选择/编辑它们。

假设我的 dgrid 有 10 行，我想禁用 3。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T16:41:49.620

`canEdit`在指定的情况下，编辑器插件支持列定义对象上的功能`editOn`。该函数接收行的数据项和要呈现的值（例如，由列`field`或其`get`函数确定）。`false`从此返回应该导致该特定行的单元格不可编辑。

Selection mixin 支持`allowSelect`接收行对象（即由 生成`grid.row(...)`）的方法，并根据其返回值确定该行是否可选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:08:46.983

您必须将 col 的可编辑属性设置为 false。如果您以编程方式声明网格，则可以在其中指定它。如果是声明性的，则需要在布局中指定，然后使用 col 定义，您需要提供*editable: false*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:22:10.847

是的，这是可能的。如果`selection-mixin`&`editor-plugin`没有“混入”，则默认 dgrid 将具有所需的功能。如果您需要以编程方式而不是由用户或根据某些条件提供选择，您可以使用`dgrid/Selection`mixin 并拥有

```
selectionMode : 'none' 
```

同样你可以设置

```
editable: false 
```

如果您需要编辑器插件并且由于某种原因/条件想要禁用。

# javascript - ExtJS4：表单字段集监听器

> ID：10784203
> 
> 赞同：0
> 
> 时间：2012-05-28T11:50:11.783
> 
> 标签：javascript, extjs

我有 ExtJS4 表单和[FieldSet](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.FieldSet)。Fieldset 由 CHECKBOX 控制。我需要听那个复选框更改事件。

```
{
                    xtype:"fieldset",
                    width:440,
                    padding:5,
                    title:"1st break",
                    layout:"hbox",
                    name:"irest_first",
                    checkboxToggle:true,
                    items:[{
                        xtype:"timefield",
                        fieldLabel:"something",
                        margin:"0 5 0 0",
                        width:120,
                        labelWidth:30
                    },{
                        xtype:"timefield",
                        fieldLabel:"something",
                        margin:"0 5 0 0",
                        width:120,
                        labelWidth:30                            
                    }]
                } 
```

我需要使用什么监听器？尝试折叠和展开，不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:55:24.550

Sencha 从 ExtJs4 中删除了折叠/展开的事件。他们将它们放回 4.1。如果您使用的是 4.0.x，您将不得不自己重写 collapse 方法。

# actionscript - ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象

> ID：10784204
> 
> 赞同：0
> 
> 时间：2012-05-28T11:50:16.687
> 
> 标签：actionscript

我遇到了问题，每当我尝试从数组中删除一个元素时，它都会出现此错误 #2025。当我单击该对象时，该对象在舞台上不再可见，但它总是给出此错误。

```
//remove items  inventory 
    public function RemoveObject(mc:MovieClip)
    {
        var checkRemove:Number = curSlot - 1;
        trace("current slot " + (curSlot-1));
        trace("current pos array" + myIndex);

        for(var i:int = 0; i < itemS.length;i++)  {
            this.removeChild(itemS[checkRemove]);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:05:52.943

如果您想删除多个项目，请为每个循环使用，因为当您删除子容器时，它会重新索引它包含的其他子容器。

```
for each (var child:DisplayObject in this.getChildren()) {
    this.removeChild(child);
} 
```

如果您只想删除一项，则可以这样做

```
this.removeChild(this.getChildAt(childIndex)); 
```

[Container](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/Container.html#methodSummary)的以下方法也有助于获得欲望孩子

```
getChildByName(name:String):DisplayObject
getChildIndex(child:DisplayObject):int 
```

最好先检查您要移除的孩子是否在容器中

```
var child:DispalyObject = this.getChildAt(childIndex);

if(this.contains(child))
{
  this.removeChild(child);
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:55:15.210

不要`for`只使用：

```
this.removeChild(itemS[checkRemove]); 
```

# asp.net-mvc-3 - HTML.DropdownList - 让文本字段显示多列的值

> ID：10784206
> 
> 赞同：4
> 
> 时间：2012-05-28T11:50:18.003
> 
> 标签：asp.net-mvc-3

我有一个像这样的下拉列表：

```
@Html.DropDownList("DeliveryOptions",
(IEnumerable<SelectListItem>)ViewData["DeliveryOptions"]) 
```

这从控制器操作中获取数据，如下所示：

```
var options = context.DeliveryTypes.Where(x => x.EnquiryID == enqId);
ViewData["DeliveryOptions"] = new SelectList(options, "DeliveryTypeId", 
"CODE" + " - " + "DeliveryPrice"); 
```

我想让我的下拉列表`CODE + DeliveryPrice`在其文本字段中显示，例如：'TNTAM - 17.54' 但我收到以下错误：

```
DataBinding: 'MyApp.Models.DeliveryTypes' does not contain a property 
with the name 'CODE - DeliveryPrice'. 
```

我的 DeliveryType 模型如下所示：

```
[Key]
public int DeliveryTypeId { get; set; }
public string CODE { get; set; }
public decimal DeliveryPrice { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:26:34.193

您可以使用匿名类型：

```
var options = context.DeliveryTypes
    .Where(x => x.EnquiryID == enqId)
    .Select(x => new { Value = x.DeliveryTypeId, Text = x.CODE + " - " + x.DeliveryPrice });

ViewData["DeliveryOptions"] = new SelectList(options, "Value", "Text"); 
```

或者创建一个`CustomSelectListItem`您可以重用的特定类，其中包含您可以在这种情况下重用的属性`Value`。`Text`

# iphone - [UILabel copyWithZone:]：无法识别的选择器发送到实例

> ID：10784207
> 
> 赞同：60
> 
> 时间：2012-05-28T11:50:19.607
> 
> 标签：iphone, ios, copywithzone

我觉得我在这里用头撞墙（坦率地说，我已经准备好这样做了）。

我正在尝试为视图设置背景。我需要设置的背景是一个图像，我正在使用这个代码（它在其他两个 UIViewController 子类中工作得很好——这是一个复制/粘贴到新文件中）：

```
UIImage *img = [gameNode imageFromKey:@"background"];
UIColor *bg = [[UIColor alloc] initWithPatternImage:img];
self.view.backgroundColor = bg;
[bg release]; 
```

正如我所说，这在另外两个地方工作得很好，但是在这里，线`self.view.backgroundColor = bg`抛出

```
'NSInvalidArgumentException', reason: '-[UILabel copyWithZone:]: unrecognized selector sent to instance 0x9259840' 
```

没有更多的事情要做。我在 IB 中验证了顶级视图的引用出口设置为文件的所有者。我清理了项目并重新启动。我什至关闭了 Xcode 并重新启动它 - 不走运。我还缺少什么？

**编辑：** 正如我所提到的，没有太多的回溯堆栈跟踪，只是这个：

```
2012-05-28 13:13:56.997 OOKL[36012:17303] -[UILabel copyWithZone:]: unrecognized selector sent to instance 0x92b79a0
2012-05-28 13:13:56.997 OOKL[36012:17303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UILabel copyWithZone:]: unrecognized selector sent to instance 0x92b79a0'
*** First throw call stack:
(0x2933052 0x44c7d0a 0x2934ced 0x2899f00 0x2899ce2 0x2935bd9 0xaa92dd 0x6a4f40 0x6a4eeb 0x6bfd60 0xc0191a 0x2934e1a 0x289e821 0xc0046e 0xaa7e2c 0xaa83a9 0xaa85cb 0xb2b59 0xb1969 0x2934ec9 0x9e55c2 0x9e555a 0xa8ab76 0xa8b03f 0xa8a2fe 0xa0aa30 0xa0ac56 0x9f1384 0x9e4aa9 0x2ac6fa9 0x29071c5 0x286c022 0x286a90a 0x2869db4 0x2869ccb 0x2ac5879 0x2ac593e 0x9e2a9b 0x214d 0x20c5) 
```

没有别的——之前或之后。

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2012-05-28T12:42:19.963

我想这是 Xcode 的那些奇怪的错误之一，你无法每次都跟踪或重现。我将问题缩小到 IB 中的一个特定 UILabel。一旦我将它连接到`IBOutlet UILabel *`，我就会收到此错误。

经过进一步调查，事实证明是这个名字`title`导致了这个问题。我将标签声明为

```
IBOutlet UILabel *title; 
```

一旦我将名称更改为`gtitle`，一切都按预期工作。谁知道？..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:58:48.203

试试这个 ：

```
self.view.backgroundColor = [UIColor clearColor];
self.view.layer.backgroundColor = [[UIColor alloc] initWithPatternImage:img].CGColor; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:00:28.450

这绝对看起来像一个“过度发布”的问题。

在您的示例中很难说出原因（因为代码看起来非常好），但是您在 ( 而不是)`copyWithZone`的实例上发送选择器这一事实肯定会告诉我已经过度释放并且现在正在引用到一个。`UILabel``UIColor``bg``UILabel`

稍后在代码中检查您是否再次释放该对象`bg`。

希望这可以帮助

**在您第一次发表评论后进行编辑**

您收到 a 很奇怪`copyWithZone unrecognized selector sent to instance`，因为我相信如果您`self.view`的类型错误（不是 a `UIView`），那么您将收到 a`setBackgroundColor unrecognized selector sent to instance`而不是 a `copyWithZone`。

为了更好地分析这个问题，当引发异常时，我会在调试器中写入：

```
po [self view]
po [[self view] backgroundColor] 
```

看看一切是否顺利进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T20:42:08.480

这个问题昨晚发生在我身上，实际上我确实有一个名为标题的标签。将名称更改为其他名称不起作用时，我扯掉了一点头发。事实证明，我试图将 NIL 值从文本字段发送到 VC 中的标签。我有 4 个 VC，用户在文本字段中的 VC 1 处输入标题，并将其存储到 NSString 类型的对象中。该字符串被放入 VC 4 中的标签中。当用户没有在 VC 1 中输入标题时，这就是 NIL 出现的地方。当用户没有在 VC1 中输入标题时，我通过为字符串对象分配默认值来修复它。希望对某人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T11:48:42.137

我有一个类似的问题，我设法使用此处提供的答案解决了这个问题。

然而，就我而言，我有一个名为 UIDateLabel 的类（用于以格式化的方式呈现日期等）。编译运行导致上面提到的NSInvalidArgumentException。

我怀疑也许有一个这样的类，但是在 UIDateLabel 上搜索只显示了一些晦涩的点击（我可以看到没有一个与 Apple 相关联）。所以我认为暂时没有命名问题......直到我在这里阅读了答案并尝试了一下。

因此，我将名称替换为 UIDateLabelAbc，一切正常。重命名回 UIDateLabel 不起作用，因为 XCode 告诉我已经有一个具有该名称的类。所以我做了更多的谷歌搜索，发现了一些声称列出 UIKit.framework 继承层次结构的 wiki 页面，在该列表中我发现 UIDateLabel 列出了。但是，这就是我设法找到的关于该类的所有信息，即它存在。目前我还不知道它的作用、目的等。

**更新：** 在阅读了命名约定之后，我现在意识到在你的类前面加上 UI 并不是一个好的做法（至少可以这么说）。所以，不要在你的类前面加上 UI，这样你就可以避免这个问题，而且可能还有很多其他问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-04T18:17:50.453

当我声明一个 IBOutlet 变量并为其赋予与该视图控制器中的其他名称相同的名称时，我收到此错误。更明智地重命名我的变量和函数因此解决了这个问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-09T06:55:20.537

Swift 5 在我的案例中

```
YOURBUTTON.addTarget(self, action: #selector(funCross), for: .touchUpInside)

//MARK:- My Function 
@objc func funWithSearch(screen: String)
{

}

if you focus on #selector(funCross) i am calling a function without object 
```

当我使用它时它的工作正常

```
YOURBUTTON.addTarget(self, action: #selector(funTemp), for: .touchUpInside)

//MARK:- My Function 
@objc func funTemp()
{
    funWithSearch(screen: "etc your desire string")
}

//MARK:- My Function 
@objc func funWithSearch(screen: String)
{

} 
```

# android - 在具有浮雕效果的android中绘制圆边弧

> ID：10784208
> 
> 赞同：28
> 
> 时间：2012-05-28T11:50:23.463
> 
> 标签：android, android-canvas

我正在尝试开发一个自定义组件，即弧形滑块，我完成了弧形和拇指，但无法弄清楚如何绘制圆边弧以及其中的浮雕效果。目前滑块看起来像这样

![在此处输入图像描述](../Images/51854a72ae93f3a178e4257fc5c71bee.png)

绘制圆弧的代码是

```
private void drawSlider(Canvas canvas) {
    float sweepDegrees = (value * arcWidthInAngle)
            / (maximumValue - minimumValue);

    // the grey empty part of the circle
    drawArc(canvas, startAngle, arcWidthInAngle, mTrackColor);
    // the colored "filled" part of the circle
    drawArc(canvas, startAngle, sweepDegrees, mFillColor);

    // the thumb to drag.       
    int radius = ((diameter/2) - (mArcThickness/2));
    Point thumbPoint = calculatePointOnArc(centerX, centerY, radius, startAngle + sweepDegrees);

    thumbPoint.x = thumbPoint.x - (mThumbDiameter/2);
    thumbPoint.y = thumbPoint.y - (mThumbDiameter/2);

    Bitmap thumbBitmap = BitmapFactory.decodeResource(
            mContext.getResources(), R.drawable.circle25);

    thumbBitmap = getResizedBitmap(thumbBitmap, mThumbDiameter, mThumbDiameter);
    canvas.drawBitmap(thumbBitmap, thumbPoint.x, thumbPoint.y,
            null);  

}

private void drawArc(Canvas canvas, float startAngle, float sweepDegrees,
        Paint paint) {
    if (sweepDegrees <= 0 || sweepDegrees > arcWidthInAngle) {
        return;
    }
    path.reset();
    path.arcTo(outerCircle, startAngle, sweepDegrees);
    path.arcTo(innerCircle, startAngle + sweepDegrees, -sweepDegrees);
    // innerCircle.
    path.close();
    canvas.drawPath(path, paint);
} 
```

我的目标是这样的弧

![在此处输入图像描述](../Images/3891aee5449f2f849b5109646b60f9e3.png)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-07-20T04:41:32.577

对于圆形边缘，您可以使用 Paint.setStrokeCap() 方法。此外，默认的油漆帽是 BUTT。您应该改用 Paint.Cap.ROUND 帽。

例如：

```
Paint mFillColor = new Paint();
mFillColor.setStrokeCap(Paint.Cap.ROUND) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-29T10:09:05.877

我设法建立了一些如下所示的弧线

![在此处输入图像描述](../Images/57a4c11bc41ac8e8ebc020b2ab2b83ae.png)

我所做的是我计算了弧的起点和终点，并在那里绘制直径等于弧厚的圆。

代码是

```
private void drawSlider(Canvas canvas) {
    float sweepDegrees = (value * arcWidthInAngle)
            / (maximumValue - minimumValue);

    // the grey empty part of the arc       
    drawArc(canvas, startAngle, arcWidthInAngle, mTrackColor);

    // the colored "filled" part of the arc
    drawArc(canvas, startAngle, sweepDegrees, mFillColor);

    // the thumb to drag.       
    int radius = ((diameter/2) - (mArcThickness/2));
    Point thumbPoint = calculatePointOnArc(centerX, centerY, radius, startAngle + sweepDegrees);

    thumbPoint.x = thumbPoint.x - (mThumbDiameter/2);
    thumbPoint.y = thumbPoint.y - (mThumbDiameter/2);

    Bitmap thumbBitmap = BitmapFactory.decodeResource(
            mContext.getResources(), R.drawable.circle25);

    thumbBitmap = getResizedBitmap(thumbBitmap, mThumbDiameter, mThumbDiameter);
    canvas.drawBitmap(thumbBitmap, thumbPoint.x, thumbPoint.y,
            null);

    //drawArc(canvas, startAngle, startAngle + sweepDegrees, white);
}
private void drawArc(Canvas canvas, float startAngle, float sweepDegrees,
        Paint paint) {
    if (sweepDegrees <= 0 || sweepDegrees > arcWidthInAngle) {
        return;
    }
    path.reset();

    int radius = ((diameter/2) - (mArcThickness/2));
    Point startPoint = calculatePointOnArc(centerX, centerY, radius, startAngle);
    Point endPoint = calculatePointOnArc(centerX, centerY, radius, startAngle + sweepDegrees);

    path.arcTo(outerCircle, startAngle, sweepDegrees);
    path.arcTo(innerCircle, startAngle + sweepDegrees, -sweepDegrees);
    // drawing the circle at both the end point of the arc to git it rounded look.
    path.addCircle(startPoint.x, startPoint.y, mArcThickness/2, Path.Direction.CW);
    path.addCircle(endPoint.x, endPoint.y, mArcThickness/2, Path.Direction.CW);

    path.close();            

    canvas.drawPath(path, paint);
}
    // this is to calculate the end points of the arc
private Point calculatePointOnArc(int circleCeX, int circleCeY, int circleRadius, float endAngle) 
    {
    Point point = new Point();
    double endAngleRadian = endAngle * (Math.PI / 180);

    int pointX = (int) Math.round((circleCeX + circleRadius * Math.cos(endAngleRadian)));
    int pointY = (int) Math.round((circleCeY + circleRadius * Math.sin(endAngleRadian)));

    point.x = pointX;
    point.y = pointY;

    return point;
}
// for the emboss effect set maskfilter of the paint to EmbossMaskFilter 
    private Paint mTrackColor = new Paint();
    MaskFilter  mEmboss = new EmbossMaskFilter(new float[] { 0.0f, -1.0f, 0.5f},
            0.8f, 15, 1.0f);
    mTrackColor.setMaskFilter(mEmboss); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-30T16:54:22.857

使用 Paint.setStrokeCap() 方法。你需要 Paint.Cap.ROUND。默认值为 Paint.Cap.BUTT。有一个类似的 Path 属性称为路径连接。它确定如何绘制路径的组成部分连接的部分。要设置它，请使用 Path.setPathJoin()。您将来可能需要它。祝你好运。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-28T12:07:22.783

您正在使用路径来绘制弧线。用于[`CornerPathEffect`](http://developer.android.com/reference/android/graphics/CornerPathEffect.html)圆角。这里的例子[`CornerPathEffect example`](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/PathEffects.html)。

这是浮雕效果的示例。我不确定这是否是你想要的。 [`Embossed effect example`](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html)

# asp.net-mvc - 如何在没有某些字段的情况下更新模型？

> ID：10784209
> 
> 赞同：0
> 
> 时间：2012-05-28T11:50:30.427
> 
> 标签：asp.net-mvc

我的对象中有 ImageUrl。如果实体在没有参考图片的情况下进行编辑，则字段重置。如何正确更新对象？

```
 public ActionResult Index()
    {
        var items = db.Employes;
        return View(items);
    }

    public ActionResult Edit(int id = 0)
    {
        var item = (id != 0) ? db.Employes.Find(id) : new Employee();

        return View(item );
    }

    [HttpPost]
    [ValidateInput(false)]
    public ActionResult Edit(int id = 0, FormCollection formValues = null, Employee item = null)
    {
        if (id == 0)
            db.Employes.Add(item);
        else
        {
            item = db.Employes.Find(id);
            UpdateModel(item);
        }

    Helpers.FileSave("Image", item, formValues);

        db.SaveChanges();

        return RedirectToAction("Index");
    } 
```

更新1：

从 updateModel 中排除字段后，我无法添加新图像：

```
if (id == 0)
        db.Employes.Add(item);
    else
    {
        item = db.Employes.Find(id);
        if (formValues["Image"] != null)
        {
            UpdateModel(item);
            Helpers.FileSave("Image", item, formValues);
        }
        else
        {
            string[] excludeProperties = { "Image" };
            UpdateModel(item, null, null, excludeProperties);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:55:57.083

[调用UpdateModel](http://msdn.microsoft.com/en-us/library/dd470388.aspx#Y0)时应使用 excludeProperties 和 includeProperties 。

简而言之...

```
string[] includeProperties = { “Name”, “Description”, “Active” };
UpdateModel(myModelView, includeProperties); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:48:20.523

首先不要排除第二个属性，在更新代码的 else 部分添加以下行

```
item.Image =formValues["Image"] 
```

然后调用更新模型

# php - 如何获取打印屏幕数据

> ID：10784211
> 
> 赞同：2
> 
> 时间：2012-05-28T11:50:48.217
> 
> 标签：php, javascript

> **可能重复：**
> [使用 PHP 的网站屏幕截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)
> [剪贴板中的粘贴图像功能如何在 Gmail 和 Google Chrome 12+ 中工作？](https://stackoverflow.com/questions/6333814/how-does-the-paste-image-from-clipboard-functionality-work-in-gmail-and-google-c)

是否可以在 JavaScript 或 PHP 中获取打印屏幕数据？我之前在 Gmail 中看到过此功能，我只需按打印屏幕或将图像复制到剪贴板，当我按 ctrl + v 时，它会自动将图像粘贴到电子邮件正文中。

我现在正在尝试在 Gmail 上执行此操作，但无法使其正常工作（我想知道为什么，也许是我正在使用的浏览器）。

# vbscript - 简单的 vbscript - 未从电子表格返回的值

> ID：10784216
> 
> 赞同：0
> 
> 时间：2012-05-28T11:51:11.410
> 
> 标签：vbscript, macros

```
If ActiveSheet.Cells(myRow, 3).Value = "" Then
    APCtext = "" & APC = 2
ElseIf ActiveSheet.Cells(myRow, 3).Value = "?" Then
    APCtext = "Unknown" & APC = 3
Else
    APCtext = ActiveSheet.Cells(myRow, 3).Value & APC = 1
End If 
```

这应该得到的第一个值不是空白或问号，但是它不会在 else 部分中返回此值。谁能指出这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:55:22.543

尝试这个：

```
If ActiveSheet.Cells(myRow, 3).Value = "" Then
    APCtext = ""
    APC = 2
ElseIf ActiveSheet.Cells(myRow, 3).Value = "?" Then
    APCtext = "Unknown"
    APC = 3
Else
    APCtext = ActiveSheet.Cells(myRow, 3).Value
    APC = 1
End If 
```

# asp.net-mvc-4 - 自定义 MediaTypeFormatter，为什么是 IKeyValueModel 而不是我的模型类型？

> ID：10784217
> 
> 赞同：6
> 
> 时间：2012-05-28T11:51:11.743
> 
> 标签：asp.net-mvc-4, asp.net-web-api, mediatypeformatter

我正在尝试执行 a 的自定义实现`MediaTypeFormatter`，但`bool CanReadType(Type type)`始终使用类型`IKeyValueModel`而不是我的类型调用该方法`MyProduct`。

在我的 API 控制器中，我有：

```
[HttpPost]
public Task Save(MyProduct product) 
```

我看过一些例子（[例子1](http://code.msdn.microsoft.com/Using-JSONNET-with-ASPNET-b2423706/view/Discussions#content)，[例子2](http://www.west-wind.com/weblog/posts/2012/Mar/09/Using-an-alternate-JSON-Serializer-in-ASPNET-Web-API)），我也试过代码：

```
protected override bool CanReadType(Type type)
{
    if (type == typeof(IKeyValueModel))
        return false;
      return true;
} 
```

但后来我得到一个“MissingMethodException：没有为此对象定义无参数构造函数”，因为我的模型类型没有无参数构造函数。所以看起来因为`CanReadType`返回 false `IKeyValueModel`，框架使用了另一个媒体类型格式化程序。实际上，该方法`OnReadFromStreamAsync`永远不会被击中。

我希望能够控制我的模型如何反序列化，我想获得真正的类型而不是`IKeyValueModel`.

这已经在带有模型绑定器的 MVC 中运行良好。

干杯。

**2012 年 5 月 29 日更新：**

如果我删除默认的 json 格式化程序，它可以工作：

```
 public static void RegisterApis(HttpConfiguration config)
    {
        config.Formatters.Clear(); 
```

但是我想保留两者，我怎么能指出我想使用哪一个？

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:39:17.393

如果您需要控制序列化，最好使用 Json.NET 的灵活性特性（参见[此处](http://james.newtonking.com/projects/json/help/)、[此处](http://james.newtonking.com/projects/json/help/SerializationAttributes.html)和[此处](http://james.newtonking.com/projects/json/help/SerializationSettings.html)）来控制而不是为此编写媒体类型格式化程序。

Json.NET[现在](http://blogs.msdn.com/b/henrikn/archive/2012/05/03/asp-net-web-api-updates-may-3.aspx)是 ASP.NET Web API 中的默认格式化程序。

* * *

# 更新

> 我的对象没有无参数构造函数，并且属性是只读的。我也有继承自 DynamicObject 的对象，所以假设我的业务实体并非微不足道。

我可能会告诉你如何在脚上开枪。但我宁愿解释如何避免出现这些问题，因为我相信你遇到了这些问题，因为你的方法中有反模式。

首先，您要寻找的不是另一种媒体类型格式化程序。你需要一个不同的序列化器或者只需要配置你的序列化器。

但更重要的是，将您的业务实体直接序列化给客户端并不是一个好主意。我们需要在这里称为视图模型的 DTO。这样的类只是状态持有者，没有逻辑，没有魔法。序列化它们应该没有问题。

您可以使用 AutoMapper 等将您的实体映射到视图模型，而无需更多的开发成本。**始终建议从表示层抽象出您的域模型。**

# android - 我怎么知道通话何时结束？

> ID：10784223
> 
> 赞同：0
> 
> 时间：2012-05-28T11:51:40.507
> 
> 标签：android

> **可能重复：**
> [我的 android 应用程序如何检测掉线？](https://stackoverflow.com/questions/3153815/how-can-my-android-app-detect-a-dropped-call)
> [在android中检测拨出电话和通话挂断事件](https://stackoverflow.com/questions/5497061/detecting-outgoing-call-and-call-hangup-event-in-android)

我正在制作一个需要在通话结束时启动意图的应用程序，但我不知道该怎么做，我在 Call Reciver 中使用它来跟踪新通话：

```
 telephony.listen(imPhoneListener, PhoneStateListener.LISTEN_CALL_STATE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:55:04.040

只是当无线电状态回到空闲状态时。但是您无法检测到连接是否未建立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:57:21.037

使用**TelephonyManager**

```
public void onCallStateChanged(int state, String incomingNumber) {
                String stateString = "N/A";
                switch (state) {
                case TelephonyManager.CALL_STATE_IDLE:
                    stateString = "Idle";
                    break;
                case TelephonyManager.CALL_STATE_OFFHOOK:
                    stateString = "Off Hook";
                    break;
                case TelephonyManager.CALL_STATE_RINGING:
                    stateString = "Ringing";
                    break;
                }

                System.out.println("state-:: " + stateString);
            } 
```

# c# - 如何以编程方式在 C# 中创建数据集？

> ID：10784232
> 
> 赞同：3
> 
> 时间：2012-05-28T11:52:22.223
> 
> 标签：c#, dataset, report

我希望有一种方法可以在 Visual Studio 中动态创建数据集（我正在使用 C#）将数据放入从任何数据库、任何表和任何列收集的报告中

（我有一个程序可以连接任何mysql或sql数据库，并显示任何表和任何列。）

现在我需要将其放入报告中。但首先是一个数据集。

```
DataTable table1 = new DataTable("patients");
table1.Columns.Add("name");
table1.Columns.Add("id");
table1.Rows.Add("sam", 1);
table1.Rows.Add("mark", 2);

DataTable table2 = new DataTable("medications");
table2.Columns.Add("id");
table2.Columns.Add("medication");
table2.Rows.Add(1, "atenolol");
table2.Rows.Add(2, "amoxicillin");

// Create a DataSet and put both tables in it.
DataSet set = new DataSet("office");
set.Tables.Add(table1);
set.Tables.Add(table2);

// TODO: This line of code loads data into the 'SwimkidzDataSet.Branches' table. 
// You can move, or remove it, as needed.
this.BranchesTableAdapter.Fill(this.manuallyCreatedDataset.Branches); 
```

试过这个，但没有机会它会起作用

```
this.BranchesTableAdapter.Fill(set);
this.reportViewer1.RefreshReport(); 
```

# c# - ASP.NET MVC3 & LINQ 使用映射表选择

> ID：10784243
> 
> 赞同：0
> 
> 时间：2012-05-28T11:53:30.017
> 
> 标签：c#, asp.net-mvc-3, linq

在 SQL 上，我有 3 个表：**Organization(id, name)**、**Category(id, name)**、**Catalog(org_id, cat_id)** - 组织和类别之间的映射表。ADO.NET DbContext Generator 为我创建了 2 个类：

```
public partial class Organization
{
    public Organization()
    {            
        this.Category = new HashSet<Category>();
    }

    public int id { get; set; }
    public string name { get; set; }       

    public virtual ICollection<Category> Category { get; set; }
}

public partial class Category
{
    public Category()
    {
        this.Organization = new HashSet<Organization>();
    }

    public int id { get; set; }
    public string name { get; set; }       

    public virtual ICollection<Organization> Organization { get; set; }
} 
```

**如何使用 LINQ 选择映射到 cat_id = 1 的所有组织**？就像我使用 t-sql 一样：

```
SELECT * 
FROM Organization o
INNER JOIN Catalog ct ON o.id = ct.org_id
INNER JOIN Category cg ON ct.cat_id = cg.id
WHERE cg.id = 1 
```

我试过

```
var model = _db.Category
            .Where(c => c.id == 1)
            .Select(c => c.Organization); 
```

但是我在视图中定义的类型有问题，比如

```
@model IEnumerable<Project1.Models.Organization> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:34:59.557

从那里的代码中，我只能假设您没有从查询中创建 Enumerable 。你的代码：

```
var model = _db.Category.Where(c => c.id == 1).Select(c => c.Organization); 
```

不是可枚举的，因为您的模型已定义。尝试：

```
var model = _db.Category.Single(c => c.id == 1).Organizations.ToList(); 
```

它将查询转换为结果的枚举，然后满足您的模型的要求。

编辑第二次看，您的模型似乎不是 1:M 关系，这可能是您遇到的问题。

# jquery - 将图像从菜单拖放到页面

> ID：10784248
> 
> 赞同：1
> 
> 时间：2012-05-28T11:53:58.237
> 
> 标签：jquery, html, jquery-ui, drag-and-drop, draggable

我在查找有关如何执行以下操作的教程或示例时遇到了一些麻烦：

我有一个图像列表菜单，我想要实现的是，用户可以将图像的副本从列表菜单拖到网站的主体上，然后能够在页面上的任何位置移动图像。

我希望这是有道理的？！

我找到了一个实现这一目标的网站，但是我是 jquery 的新手，当我查看源代码以获得灵感时，并不太清楚他们是如何实现它的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:56:40.840

你看过 Jquery UI 吗？[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:25:30.243

您可以通过 jquery ui 插件轻松实现。

查看以下链接：

[http://jqueryui.com/demos/droppable](http://jqueryui.com/demos/droppable)

[http://www.ericbieller.com/2010/06/24/how-to-create-a-simple-drag-and-drop-with-jquery/](http://www.ericbieller.com/2010/06/24/how-to-create-a-simple-drag-and-drop-with-jquery/)

# css - Chrome（但不是 Firefox）的奇怪填充问题

> ID：10784251
> 
> 赞同：2
> 
> 时间：2012-05-28T11:54:11.107
> 
> 标签：css, firefox, google-chrome, cross-browser

该问题在首页可见。Chrome 在下部添加了一些填充，`#main-container`我似乎无法找到添加它的位置和原因。它是一个自定义页面模板，其他许多模板也是如此，但其他似乎都很好。页脚框的上边距为 20 像素，这是有意的 - 这应该是首页主要内容和页脚之间的唯一边距。

我在首页的#main-container 中添加了灰色背景，以使其更加突出。

我已经在该网站上玩了一会儿，但找不到合适的解决方案。我制作了一张展示该问题的小演示图片。你可以在这里看到图片：[http ://www.upload.ee/image/2380775/paddingissue.jpg](http://www.upload.ee/image/2380775/paddingissue.jpg)

谁能指出我为什么会发生以及如何解决它的正确方向？

```
You can see the site live at:
www.uber.fi
U: xxx
PW: xxx 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:08:15.813

Delete the whitespace at the end of the `#primary-container`. That is causing the issues.

![enter image description here](../Images/6514accf890bb2f5e406a77cc0e54e1d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:57:57.943

可能是[reset.css](http://meyerweb.com/eric/tools/css/reset/)可以帮助你吗？

# python - Tornado 的非阻塞 ORM？

> ID：10784254
> 
> 赞同：26
> 
> 时间：2012-05-28T11:54:25.827
> 
> 标签：python, database, orm, tornado

[除了Twistar](http://findingscience.com/twistar/)之外，还有其他异步 Python ORM吗？

我正在寻找构建在 tornado 之上的用于非阻塞 API 的轻量级 ORM。当然，我可以使用 momoko 编写原始 SQL 查询，但我想使用对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-30T21:22:37.683

是的！查看[peewee](https://github.com/coleifer/peewee)和[peewee-async](https://github.com/05bit/peewee-async)扩展。免责声明：扩展目前仅适用于 PostgreSQL，我是扩展的作者 :)

它不是专门为 Tornado 设计的，但 Tornado 可以在异步事件循环上运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-12T03:50:33.420

5年了，变化很大。我们将[GINO编写为基于](https://github.com/fantix/gino)[asyncpg](https://magicstack.github.io/asyncpg/current/)和[SQLAlchemy 核心](https://docs.sqlalchemy.org/en/rel_1_1/#sqlalchemy-core)的轻量级 ORM 。它仅适用于 asyncio 和 PostgreSQL。GINO 称为“GINO 不是 ORM”，因为它几乎没有应用任何常见的 ORM 模式，以便明确和简单。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-26T10:43:38.603

看看 Tortoise [ORM](https://github.com/tortoise/tortoise-orm)

它的目标是成为一个全功能的`ORM`灵感`Django syntax`，但仅限于 asycnio。由于`Tornado 5.0`在 asyncio 上运行，它应该可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T22:16:12.670

不存在。唯一可以考虑接近轻量级的 ORM 是[PeeWee](https://github.com/coleifer/peewee)，这不是异步的。ORM 很难写，更难**写好**。它需要有一个漂亮、干净的 API，暴露底层数据库的许多特性，*并且*高效。一项艰巨的任务！

Python 的 ORM 并不多，异步的甚至更少。对不起。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T18:52:19.650

如果使用 mongo，您可以查看 Asyncmongo（不是 orm，但让您访问您的数据异步） [https://github.com/bitly/asyncmongo](https://github.com/bitly/asyncmongo)

如果感兴趣，请参阅此网络研讨会的视频和幻灯片：“使用 Python 和 Tornado 的异步 MongoDB” [http://www.10gen.com/presentations/webinar/Asynchronous-MongoDB-with-Python-and-Tornado](http://www.10gen.com/presentations/webinar/Asynchronous-MongoDB-with-Python-and-Tornado)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-31T17:54:03.397

您可能想看看[Monguo](https://github.com/shiyanhui/monguo)，这是一个“功能齐全的异步 MongoDB ORM，带有用于 Tornado 应用程序的电机驱动程序”，正如它所描述的那样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-17T13:53:18.920

你可能想看看 umysqldb( [https://github.com/hongqn/umysqldb](https://github.com/hongqn/umysqldb) )，一个 MySQLdb 兼容的 Ultramysql 包装器。ultramysql 通过猴子补丁与 gevent 兼容。

# jquery - 如何在自定义 jQuery 插件的设置中更改“this”的范围

> ID：10784256
> 
> 赞同：0
> 
> 时间：2012-05-28T11:54:36.730
> 
> 标签：jquery, jquery-plugins, scope

使用很多 jQuery 函数，我可以编写如下代码：

```
$('.element').css({
    'width':    $(this).width() * 2
}); 
```

通过使用 $(this) 我可以找到 .element 的宽度。

我怎样才能让我自己发明的插件以同样的方式工作？

```
$('.element').myPlugin({
    'setting':    $(this).width() * 2
}); 
```

仅出于演示目的，这可能是我的插件代码的样子：

```
$.fn.myPlugin = function(settings){

    // Settings
    var defaults = {
        'setting':    'value'
    };

    var o = $.extend(defaults, settings);

    // For every instance
    return this.each(function(){

        // Do something

    });

}; 
```

希望这是有道理的，如果有人可以为这个问题提出一个更好的标题，请随意！当您不知道要使用什么术语时，很难搜索到一些东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:08:33.253

Can you prove that this:

```
$('.element').css({
    'width':    $(this).width() * 2
}); 
```

works as you describe??? I would very confused if it did.

# android - Andengine 中的 Box2d 身体运动

> ID：10784258
> 
> 赞同：1
> 
> 时间：2012-05-28T11:54:57.083
> 
> 标签：android, box2d, andengine

我做了一个赛车游戏。有汽车。它通过 onAnalogScreenContol 按钮移动。它的移动非常完美，我为它的身体设置了速度。但是当我添加 50 个矩形和身体形状的墙壁时，汽车移动得非常非常快。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:10:55.227

也许看看我的赛车游戏的代码会对你有所帮助： [http ://sebastiannilsson.com/en/k/projekt/sketchy-truck/](http://sebastiannilsson.com/en/k/projekt/sketchy-truck/)

源代码托管在 Github 上。它将为您提供如何在 Android 中进行赛车游戏的示例。我不知道它与你的游戏有多相似。

# graph - gnuplot条形图不起作用

> ID：10784259
> 
> 赞同：-1
> 
> 时间：2012-05-28T11:54:58.097
> 
> 标签：graph, plot, gnuplot

```
plot data_file using 1:2 with box fs solid title "" 
```

我正在使用上面的命令在 gnuplot 中绘制条形图。但是生成的图是一种连续的阶梯图，其中每个框的宽度非常高。

上面的说法有什么问题？？在 gnuplot 中绘制条形图的首选方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:59:03.883

按照这个[链接](http://www.dcs.bbk.ac.uk/~gzoum01/howtos/gnuplot_barcharts.html)
data.csv 是

```
"MCU", 1.8
"Radio Tx", 19.5
"Radio Rx", 21.8
"Flash READ", 4
"Flash WRITE", 20 
```

而脚本的内容应该是（gnuplot.script）

```
set boxwidth 1 relative
set style data histograms
set style fill solid 1.0 border -1
set datafile separator "," 
plot 'data.csv' using 2:xticlabels(1) notitle

set terminal png truecolor font small size 600,500
set output 'image1.png'
replot 
```

然后

`$ gnuplot gnuplot.script`

# ruby-on-rails - 如何在rails的mongoid查询中使用字段匹配

> ID：10784263
> 
> 赞同：0
> 
> 时间：2012-05-28T11:55:15.167
> 
> 标签：ruby-on-rails, mongodb, mongoid, nosql

我正在尝试基于名称建立搜索。我正在使用新手 mongoid 用户。我想要一个查询，如果我通过“A”，它将返回所有以“A”开头的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:17:02.957

做就是了：

```
User.where(:name => /^A/) 
```

# c++ - 在 C++ (Windows) 中选择录制设备

> ID：10784266
> 
> 赞同：0
> 
> 时间：2012-05-28T11:55:25.947
> 
> 标签：c++, windows, audio-recording

如何在 C++、Windows 中选择录音设备。我想从 PC 录制声音，并且我想要 C++ 中的一个可以选择设备的功能：线路、麦克风或立体声混音。我不知道该怎么做。请给我看例子或给我链接来学习这个。

我在 C++ 中发现了一些相关的东西，但效果不佳： http: [//forums.codeguru.com/showthread.php?t=449213](http://forums.codeguru.com/showthread.php?t=449213)

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:34:46.217

您可以尝试调用[waveInGetNumDevs](http://msdn.microsoft.com/en-us/library/ms713732%28VS.85%29.aspx)

> waveInGetNumDevs 函数返回系统中存在的波形音频输入设备的数量。

```
UINT waveInGetNumDevs(VOID); 
```

> 返回设备的数量。返回值为零表示不存在任何设备或发生错误。

这是一个例子：

```
#include <tchar.h>
#include <windows.h>
#include "mmsystem.h"

#pragma comment(lib, "winmm.lib")

int _tmain( int argc, wchar_t *argv[] )
{
    UINT deviceCount = waveInGetNumDevs();

    if ( deviceCount > 0 )
    {
        for ( int i = 0; i < deviceCount; i++ )
        {
            WAVEINCAPSW waveInCaps;    
            waveInGetDevCapsW( i, &waveInCaps, sizeof( WAVEINCAPS ) );

            //Your code here
        }
    }

    return 0;
} 
```

# iphone - 在新部分的表格视图中插入一行

> ID：10784268
> 
> 赞同：1
> 
> 时间：2012-05-28T11:55:28.833
> 
> 标签：iphone, objective-c, ios, uitableview

我从一个部分的表格视图开始，第一部分总是有三行。下载一些内容后，我想在第二部分显示一个新单元格，所以我这样做：

```
[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone]; 
```

但我得到一个 NSInternalConsistencyException：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：无效的节数。更新后表视图中包含的节数（2）必须等于更新前表视图中包含的节数（1），加上或减去插入或删除的节数（0插入，0已删除）。

为什么它不自动插入新部分，如果我插入一个部分，那么在插入不在新部分中的行时会出现问题。

为什么它不能自动添加新部分？当然 InsertRowAtIndexpath: 还包括在必要时插入一个部分，因为 NSIndexPath 还包括一个部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:04:57.250

```
[self.tableView insertSections:nsIndexSetToInsert withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

并且不要忘记相应地设置 numberOfSectionsInTavleView 和 numberOfRowsInSection。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    NSInteger numberOfSections;
    if (condition1) {
        numberOfSections = 2;
    } else if (condition2) {
        numberOfSections = 3;
    } else {
        numberOfSections = 4;
    }

    return numberOfSections;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section
    if(section == 1) return 3;
    else return numberOfRows;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:59:05.577

将其保存在 ViewDidLoad

```
childArray1 = [[NSMutableArray alloc] initWithObjects: @"Apple", @"Microsoft", @"HP", @"Cisco", nil];
childArray2 = [[NSMutableArray alloc] init];
parentArray = [[NSMutableArray alloc] initWithObjects:childArray1, nil];

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
     return [parentArray count];
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
      NSInteger rowCount ;
      if (section == 0)
      {
           rowCount = [childArray1 count];
      }
      else
      {
           rowCount = [childArray2 count];
      }
      return rowCount;
} 
```

从服务器下载您的内容后。

```
 if([childArray2 count] > 0)
     [parentArray addObject : childArray2];
 [tableView reloadData]; 
```

这应该适合你。

# c# - Binding.SourceUpdated 未触发

> ID：10784270
> 
> 赞同：8
> 
> 时间：2012-05-28T11:55:38.863
> 
> 标签：c#, wpf, data-binding, wpfdatagrid

我有一个有效的绑定。GUI 更新。

```
<DataGridTextColumn Binding="{Binding Path=Value, 
                              NotifyOnTargetUpdated=True, 
                              NotifyOnSourceUpdated=True, 
                              Mode=OneWay}"/> 
```

绑定源对象实现 INotifyPropertyChanged 并且绑定属性是一个普通的 clr 属性。

事件`Binding.TargetUpdated`会触发，但不会触发`Binding.SourceUpdated`。

例如，以下作品

```
<EventTrigger RoutedEvent="Binding.TargetUpdated"> ... 
```

但

```
<EventTrigger RoutedEvent="Binding.SourceUpdated"> ... 
```

才不是。

如果我在代码或 XAML 中创建绑定，`EventTrigger`在`Triggers`集合中使用或在`EventSetter`. 据我所知，事件只是没有触发。

有谁知道怎么`Binding.SourceUpdated`生火？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T12:33:26.657

是否会在源更改时触发“TargetUpdated”而在目标更改时触发“SourceUpdated”？

（@black-stallion 给了我一个暗示可能会发生什么，但我希望人们会评论/编辑，如果这是正确的或不正确的！）

# javascript - 使用 jQuery 的 ajax 或 getJSON 加载 .srj 文件

> ID：10784271
> 
> 赞同：2
> 
> 时间：2012-05-28T11:55:44.173
> 
> 标签：javascript, jquery, json, sesame

任何人都可以向我展示如何加载使用**jQuery 的 getJSON查询****Sesame SPARQL**端点产生的 .srj 文件的示例吗？我已经尝试设置 Accept 标头和其他技巧，但我仍然看到 200 代码并且显然没有错误，但是没有加载文件的内容。

 **```
$.getJSON("http://localhost:8090/openrdf-sesame/repositories/myrepo?queryLn=SPARQL&query=QUERY&limit=none&infer=true&Accept=application%2Fsparql-results%2Bjson",
{
},
function(data) {
   alert('data = ', data);
}); 
```

我已经尝试过类似的方法和无数其他变体，但它仍然不起作用。我不得不提到我测试了这两种情况：

1.  Tomcat 未安装在 Apache 中，在这种情况下我们有一个跨域请求 - 我尝试在浏览器中设置所需的所有内容；
2.  Tomcat 安装在 Apache 中 - 据我所知，它不需要任何其他工作，但仍然没有成功。

这是**请求标头**：

```
Accept:application/json, text/javascript, */*; q=0.01
Accept-Encoding:gzip, deflate
Accept-Language:en-us,en;q=0.5
Connection:keep-aliveHost:localhost:8090
Origin:http://localhost
Referer:http://localhost/d3v280/examples/ablodvis/localtest.html
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0 
```

这是**响应标头**：

```
Content-Disposition:attachment; filename=query-result.srj
Content-Language:en-US
Content-Type:application/sparql-results+json;charset=UTF-8
Date:Mon, 28 May 2012 14:06:06 GMT
Server:Apache-Coyote/1.1
Transfer-Encoding:chunked 
```

如您所见，我确实在 query-result.srj 文件中得到了结果，但我不知道如何访问它。我非常喜欢第一个版本的工作，但显然我错过了一些东西。所有类似的 getJSON 请求都有效。

这是几乎可行的请求：

```
 $.ajax({

        beforeSend: function(xhrObj){
                      xhrObj.setRequestHeader("Accept","application/sparql-results+json");
                },

        dataType: 'jsonp',
        url: queryUrl,
        success: function(data) {
          // callback code here
          console.log("source: " + data.length)
          alert('success!');
        }
      }); 
```

但是，它在 Firefox 中引发“无效标签错误”，而在 Chrome 中则不会引发任何错误，但正如我在*query-results.srj文件的**第二行*中看到的那样，它显示*Uncaught SyntaxError: Unexpected token :*。以下是响应的第一行的样子：

 **```
{
"head": {
    "vars": [ "s", "p", "o", "r" ]
}, 
"results": {
    "bindings": [ ... 
```

这次我能够看到请求成功完成并在我的浏览器中看到它（至少在 Chrome 和 Firefox 的调试模式下）。我应该明白 jsonp 技巧不适用于 Sesame 吗？如果我从 Sesame 得到答案，将其复制到一个文件中，将其重命名为*file.js*并使用 $.getJSON 加载它就可以了……我不想为这个应用程序提供任何服务器端代码，只是为了直接处理 SPARQL 查询的结果。我已经通过 $.getJSON 或 $.ajax 轻松设置了其他来源（WorldBank、DBPedia 等）。

此致！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:43:44.270

我刚刚编写了自己的简单 JQuery 脚本来测试它，它似乎都按预期工作。我花了一段时间才让它工作，但这主要是因为我的脚本没有与 Sesame 在同一台服务器上运行。

**更新**以回答您关于 jsonp 的问题：自 2.7.0 版以来，Sesame 确实支持 JSONP 回调（请参阅[SES-1019](https://openrdf.atlassian.net/browse/SES-1019)）。

但是如果 JQuery 脚本与芝麻服务器在同一主机上运行，​​则以下脚本会将查询结果输出为表格。我还没有完全弄清楚我在做什么与你不同，我并没有声称这是处理 reuslt 最有效的方法，但至少这是有效的，所以我希望这会有用。

脚本：

```
 $(document).ready(function() {
      $.ajax({
                url: 'http://localhost:8080/openrdf-sesame/repositories/test',
                dataType: 'json', 
                data: { 
                    queryLn: 'SPARQL',
                    query: "SELECT * WHERE { ?s ?p ?o }", 
                    limit: 'none',
                    infer: 'true',
                    Accept: 'application/sparql-results+json'
                },
                success: displayData, 
                error: displayError
        });
    });

    function displayError(xhr, textStatus, errorThrown) {
        alert(textStatus);
        alert(errorThrown);
    }

    function displayData(data) {
        var header = $('#result thead').append('<tr/>');
        $.each(data.head.vars, function(key,value) {
            header.append("<th>" + value + "</th>");
        });

        $.each(data.results.bindings, function(index, bs) {
        var row = $('<tr/>');
        $.each(data.head.vars, function(key, varname) {
            row.append("<td>" + bs[varname].value + "</td>"); 
            });
        $("#result tbody").after(row);
        });
    } 
```

HTML 正文包含一个空表：

```
 <table id="result" border=1>
  <thead/>
     <tbody/>
  </table> 
```****

# iphone - 如何在iphone中缓存图片

> ID：10784278
> 
> 赞同：0
> 
> 时间：2012-05-28T11:56:07.470
> 
> 标签：iphone, objective-c, ios, xcode, uiimage

我正在编写一个从服务器加载多个图像的应用程序，我需要缓存这些图像以供下次更快地加载这些图像。

我找到[了 HJCache](http://www.markj.net/hjcache-iphone-image-cache/)和[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)但都失败了。有谁知道任何其他将图像保存在缓存中的方法？

谢谢！

ps：对不起我的英语，我知道这很糟糕

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:37:02.827

我遇到过同样的问题，经过大量研发后我找到了解决方案。

解决方案是让我们使用`SDWebImage`图书馆。

您可以从[https://github.com/rs/SDWebImage找到它](https://github.com/rs/SDWebImage)

只需将其所有文件集成到您的项目中即可。

按照文档中给出的步骤（在上面的链接中指定）。

祝你好运。

# c++ - 不透明的参考而不是 PImpl。是否可以？

> ID：10784281
> 
> 赞同：2
> 
> 时间：2012-05-28T11:56:31.260
> 
> 标签：c++, design-patterns, idioms

> PIMPL Idiom 是一种实现隐藏技术，其中公共类包装了在公共类所属的库之外无法看到的结构或类。这对库的用户隐藏了内部实现细节和数据。

**但是是否有可能实现同样的利用参考？**

MCanvasFont.h

```
namespace Impl {
    class FontDelegate;
}

class MCanvasFont
{
public:
    MCanvasFont();
    virtual ~MCanvasFont();

protected:
    // Reference count
    long m_cRef;

    // agg font delegate
    const Impl::FontDelegate& m_font;
} 
```

MCanvasFont.cpp

```
// helpers
#include "ImplHelpers/FontDelegate.h"

MCanvasFont::MCanvasFont()
: m_cRef(1),
  m_font(Impl::FontDelegate() )
{
    // constructor's body
} 
```

PS 这段代码用 G++ 编译没有任何问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T12:07:50.097

你的程序有一个错误，它在构造函数的初始化列表中：

```
MCanvasFont::MCanvasFont()
: m_cRef(1),
  m_font(Impl::FontDelegate() ) // <--- BANG
{ 
```

问题`Impl::FontDelegate()`在于它构造了一个*临时*对象。这不会超过构造函数的寿命——实际上它在进入构造函数体之前就被销毁了，因为它的生命周期就是它出现的表达式的生命周期。因此，您的`m_font`参考立即无效。

虽然您可以*使用*手动分配的对象（`*new Impl::FontDelegate()`无论如何，您还必须使用`delete`析构函数中的对象。所以参考真的不会给你带来任何好处，它只会产生一些相当不自然的代码。我建议改用 const 指针：

```
const Impl::FontDelegate* const m_font; 
```

**编辑：**只是为了说明问题，举这个等效的例子：

```
#include <iostream>

struct B
{
    B() { std::cout << "B constructed\n"; }
    ~B() { std::cout << "B destroyed\n"; }
};

struct A
{
    const B& b;
    A() :
        b(B())
    {
        std::cout << "A constructed\n";
    }
    void Foo()
    {
        std::cout << "A::Foo()\n";
    }
    ~A()
    {
        std::cout << "A destroyed\n";
    }
};

int main()
{
    A a;
    a.Foo();
} 
```

如果你运行它，输出将是：

```
B constructed
B destroyed
A constructed
A::Foo()
A destroyed 
```

所以`b`几乎立即无效。

# customization - phpBB 3 - 如何根据注册字段将用户放入特定组？

> ID：10784287
> 
> 赞同：0
> 
> 时间：2012-05-28T11:56:55.390
> 
> 标签：customization, phpbb, phpbb3

这里的第一个问题，如果我犯了错误，请原谅我。

我的问题如下： 我的 phpBB3 论坛有 2 组由我定义的用户。我想根据我添加的自定义注册字段的值将用户放在其中一个组中。我不知道该怎么做。

也许我在那里遗漏了一些东西，欢迎任何帮助。谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T19:10:27.710

PHPBB3 不能开箱即用。但是，[注册组和自定义配置文件字段](http://www.phpbb.com/community/viewtopic.php?f=69&t=1880555)似乎可以满足您的需求。

# android - iImageview 的缩放

> ID：10784288
> 
> 赞同：1
> 
> 时间：2012-05-28T11:57:03.510
> 
> 标签：android

我有一个图像视图

我在上面设置了一个位图：

```
package com.integrated.mpr;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Environment;
import android.widget.ImageView;
import android.widget.TextView;

public class AlternativeShow extends Activity{

    ImageView altiva;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.alternativeshow);
        File fa = new File(folder,"bmp1.png");
        Bitmap bmpa = BitmapFactory.decodeFile(fa.getAbsolutePath());

        altiva.setImageBitmap(bmpa);
        }
    }
} 
```

我希望在图像视图上触摸屏幕时，图像应该被放大>>

我怎样才能使它成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:11:04.780

请改用 WebView。您可以像这样加载图像：

```
webview.loadUrl("file:///android_asset/image.jpg"); 
```

当然，您的资产文件夹中必须有您的 image.jpg。

如果您的 SD 卡中有它...

```
String imageName = "image.jpg";
webview.loadUrl("file://" + Environment.getExternalStorageDirectory() + "/newdir/" + imageName); 
```

WebView 已经实现了缩放，所以你真的不需要做任何事情;-)

希望它可以帮助你。

# c - 找到两个文本字符串之间的相似性..？

> ID：10784294
> 
> 赞同：0
> 
> 时间：2012-05-28T11:57:36.113
> 
> 标签：c, perl

假设我有一个输入两个字符串的界面，然后检查它们是否彼此相似。

喜欢。

字符串 1：

```
Manufacture & Exporter Of Sequins, Silk Taffeta, Cotton, Fabric, Woven Sequins, Woven Sequin Garments etc. 
```

字符串2：

```
Manufacture Silk Taffeta, Cotton, Fabric, Woven Sequins, Woven Sequin Garments , healthy soups etc. 
```

彼此相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:02:25.423

您应该搜索模糊字符串比较或[近似字符串匹配](http://en.wikipedia.org/wiki/Approximate_string_matching)。

# ios - 'NSInvalidArgumentException'，原因：'Receiver (**) has no segue with identifier '**''

> ID：10784302
> 
> 赞同：0
> 
> 时间：2012-05-28T11:58:20.977
> 
> 标签：ios, segue

我真的希望以前没有人问过这个问题。我在这个网站上花了很多时间寻找解决方案，但一直没有想出一个解决方案。我正在尝试从名为 callPerformSegue 的函数中调用 performSegueWithIdentifier。当单击 UITableView 中某个部分的页脚中的 UIImageView 时，将调用 callPerformSegue。callPerformSegue 函数如下：

```
- (void)callPerformSegue {
    [self performSegueWithIdentifier:@"bannerPressed" sender:self];
} 
```

我在情节提要中正确识别了bannerPressed segue，因为如果我将performSegueWithIdentifier 调用移动到didSelectRowAtIndexPath 中，则segue 会正确执行。但是，当从 callPerformSegue 调用时，我得到以下信息：

'NSInvalidArgumentException'，原因：'接收者（****）没有标识符'bannerPressed'的segue'

有任何想法吗？

## 更新：

我从我的 BannerView 类中调用函数 callPerformSegue，它是 UIImageView 的子类。此类处理有人单击横幅时的触摸事件，并确定收到触摸时显示的图像。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    //Get the time of the click
    NSDate *animationStart;
    NSDate *clickTime;
    clickTime = [NSDate date];

    NSMutableArray *bannerArrayFromDictionary = [self.bannerDictionary objectForKey:[NSNumber numberWithInt:self.currentSection]];

    //Calculate the time elapsed since animationStart and clickTime
    animationStart = [bannerArrayFromDictionary objectAtIndex:0];

    int secondsElapsed = [clickTime timeIntervalSinceDate:animationStart];

    //Determine the number of elements for the section
    int numberOfImagesForSection = [bannerArrayFromDictionary count] - 1;

    //Determine the index into the animationArrary
    int imageClickedIndex = (secondsElapsed / 5) % numberOfImagesForSection;

    //Add 1 to the index to compensate for the timestamp
    imageClickedIndex++;

    //Get the image name
    NSString *clickedImage = [bannerArrayFromDictionary objectAtIndex:imageClickedIndex];

    //Set the image name in CategoryViewController so that a segue to the Detail Page can be performed
    CategoryViewController *view = [[CategoryViewController alloc] init];
    view.currentImage = clickedImage;
    [view callPerformSegue];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:43:45.770

横幅视图.h

```
@property (strong,nonatomic) IBOutlet id  delegate; 
```

横幅视图.m

```
[self.delegate callPerformSegue]; 
```

类别视图控制器.m

```
bannerView.delegate = self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:21:50.200

您可能将 Segue 连接到 TableView 单元而不是 ViewController。我养成了始终将 Segues 连接到 VC 而不是 Buttons 或 TableView Cells 的习惯。要修复，删除您现在拥有的 Segue 并将其重新连接到 VC 而不是 TableView Cell。确保将其命名为相同。

# c# - C# 的类似 V8 的哈希表？

> ID：10784303
> 
> 赞同：6
> 
> 时间：2012-05-28T11:58:24.603
> 
> 标签：c#, javascript, node.js, dictionary, v8

我正在编写一个公寓和房屋租赁网站。由于出租的房产永远不会超过 10,000 个，因此将它们全部加载到内存中是没有问题的。现在，当用户想要搜索特定的一个时，他可以为价格、房间、自动扶梯等定义非常多的过滤器。

每个属性都有一组非常不同的属性。一个属性可能具有另一个属性没有的属性。因此，在 C# 中创建一个具有所有属性的类，而只使用其中的一些属性对我来说不是一个好主意。我决定改用字典。

一些基准测试之后，我发现，字典作为类访问属性的速度大约慢了 40 倍。我还为 node.js 做了一个基准测试，它只是将对象用作字典。这非常有趣，因为在 node.js 中完全相同的程序的性能甚至比带有原生类的 C# 示例还要好。

事实上，我得到了以下结果：

C# 字典：~820ms C# 类：~26ms Node.js 对象：~24ms

每个基准测试都使用相同的标准搜索 1'000'000 个对象。

我知道 Node.js 版本之所以这么快，是因为 Google 的 V8 引擎。你知道是否有一个 C# 类使用与 V8 引擎类似的技术并获得几乎相同的性能？

**C# 字典基准测试**

```
namespace Test {
    class Program {
        static void Main(string[] args) {

            PropertyList p = new PropertyList();
            long startTime = DateTime.Now.Ticks;
            for (int i = 0; i < 100; i++) {
                p.Search();
            }
            Console.WriteLine((DateTime.Now.Ticks - startTime) / 10000);
        }
    }

    class PropertyList {
        List<Property> properties = new List<Property>();
        public PropertyList() {
            for (int i = 0; i < 10000; i++) {
                Property p = new Property();
                p["Strasse"] = "Oberdorfstrasse";
                p["StrassenNr"] = 6;
                p["Plz"] = 6277;
                p["Ort"] = "Lieli";
                p["Preis"] = 600;
                p["Fläche"] = 70;
                p["Zimmer"] = 2;
                p["Lift"] = true;
                p["Verfügbarkeit"] = 7;
                p["Keller"] = false;
                p["Neubau"] = true;
                p["ÖV"] = false;

                properties.Add(p);
            }
        }
        public void Search() {
            int found = 0;

            for (int i = 0; i < properties.Count; i++) {
                Property p = properties[i];
                if ((string)p["Strasse"] == "Oberdorfstrasse" &&
                   (int)p["StrassenNr"] == 6 &&
                   (int)p["Plz"] == 6277 &&
                   (string)p["Ort"] == "Lieli" &&
                   (int)p["Preis"] >= 500 && (int)p["Preis"] <= 1000 &&
                   (int)p["Fläche"] >= 10 && (int)p["Fläche"] <= 200 &&
                   (int)p["Zimmer"] == 2 &&
                   (bool)p["Lift"] == true &&
                   (int)p["Verfügbarkeit"] >= 2 && (int)p["Verfügbarkeit"] <= 8 &&
                   (bool)p["Keller"] == false &&
                   (bool)p["Neubau"] == true &&
                   (bool)p["ÖV"] == true
                ) {
                    found++;
                }
            }
        }
    }

    class Property {
        private Dictionary<string, object> values = new Dictionary<string, object>();

        public object this[string key] {
            get {
                return values[key];
            }
            set {
                values[key] = value;
            }
        }
    }
} 
```

**C# 类基准测试**

```
namespace Test {
    class Program {
        static void Main(string[] args) {

            SpecificPropertyList p2 = new SpecificPropertyList();

            long startTime2 = DateTime.Now.Ticks;
            for (int i = 0; i < 100; i++) {
                p2.Search();
            }

            Console.WriteLine((DateTime.Now.Ticks - startTime2) / 10000);

        }
    }

    class SpecificPropertyList {
        List<SpecificProperty> properties = new List<SpecificProperty>();
        public SpecificPropertyList() {
            for (int i = 0; i < 10000; i++) {
                SpecificProperty p = new SpecificProperty();
                p.Strasse = "Oberdorfstrasse";
                p.StrassenNr = 6;
                p.Plz = 6277;
                p.Ort = "Lieli";
                p.Preis = 600;
                p.Fläche = 70;
                p.Zimmer = 2;
                p.Lift = true;
                p.Verfügbarkeit = 7;
                p.Keller = false;
                p.Neubau = true;
                p.ÖV = false;

                properties.Add(p);
            }
        }
        public void Search() {
            int found = 0;

            for (int i = 0; i < properties.Count; i++) {
                SpecificProperty p = properties[i];
                if (p.Strasse == "Oberdorfstrasse" &&
                   p.StrassenNr == 6 &&
                   p.Plz == 6277 &&
                   p.Ort == "Lieli" &&
                   p.Preis >= 500 && p.Preis <= 1000 &&
                   p.Fläche >= 10 && p.Fläche <= 200 &&
                   p.Zimmer == 2 &&
                   p.Lift == true &&
                   p.Verfügbarkeit >= 2 && p.Verfügbarkeit <= 8 &&
                   p.Keller == false &&
                   p.Neubau == true &&
                   p.ÖV == true
                ) {
                    found++;
                }
            }
        }
    }

    class SpecificProperty {
        public string Strasse;
        public int StrassenNr;
        public int Plz;
        public string Ort;
        public int Preis;
        public int Fläche;
        public int Zimmer;
        public bool Lift;
        public int Verfügbarkeit;
        public bool Keller;
        public bool Neubau;
        public bool ÖV;
    }
} 
```

**Node.js 基准测试**

```
var properties = [];

for(var i = 0; i < 10000; i++){
    var p = {
        Strasse:"Oberdorfstrasse",
        StrassenNr:6,
        Plz:6277,
        Ort:"Lieli",
        Preis:600,
        Fläche:70,
        Zimmer:2,
        Lift:true,
        Verfügbarkeit:7,
        Keller:false,
        Neubau:true,
        ÖV:false
    };
    properties.push(p);
}

function search(){
    var found = 0;
    for(var i = 0; i < properties.length; i++){
        var p = properties[i];
        if(p.Strasse == "Oberdorfstrasse" && p.StrassenNr == 6 && p.Plz == 6277 && p.Ort == "Lieli" &&
            p.Preis >= 500 && p.Preis <= 1000 &&
            p.Fläche>= 10 && p.Fläche <= 100 &&
            p.Zimmer == 2 &&
            p.Verfügbarkeit >= 2 && p.Verfügbarkeit <= 8 &&
            p.Keller == false && p.Neubau == true && p.ÖV == false
        ){
            found++;
        }
    }
}
var startTime = new Date().getTime();
for(var i = 0; i < 100; i++){
    search();
}
console.log(new Date().getTime()-startTime); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:17:30.707

好的，C# 变慢的原因是 V8 针对这种情况进行了优化（许多字典具有完全相同的成员）。

您在这里有点滥用 C#。而不是字典，只需使用具有自动属性的普通类。那时 C# 会快得多，甚至比 V8 还要快（因为你是在发挥它的优势而不是它的弱点）。

这就是为什么您的“特定对象”基准测试速度最快的原因。

# xslt - 通过 XSLT 基于源 XML 中特定元素的连续出现向 XML 添加属性

> ID：10784305
> 
> 赞同：2
> 
> 时间：2012-05-28T11:58:28.620
> 
> 标签：xslt, xpath, xslt-1.0

我正在研究 XSLT。

```
Depending upon the values in the table I have to write the  XML file. 
```

规则：

```
1.If the values in columns of I row are in strong(Enclosed in<strong> tags).
  Then I have to add attribute as "FirstRowIsStrong".

2.If all the values in the I column are in strong. 
   Then I have to add attribute as "FirstCoulmnIsStrong".

3.If the values in any row are in Strong, 
    then I have to add attribute as  "RowIsStrong". 
    If its the first row I need not add attribute.
    If the values in First row are in strong I should not add attribute.
    For the rows other than First row, I have to add the attribute. 
```

我有这样的源 XML。

```
 <table style="WIDTH: 100%" border="1" cellspacing="1" cellpadding="1">

        <tr>
        <td><strong xmlns="http://www.w3.org/1999/xhtml">A</strong></td>
        <td><strong xmlns="http://www.w3.org/1999/xhtml">B</strong></td>
        <td><strong xmlns="http://www.w3.org/1999/xhtml">C</strong></td>
        </tr>
        <tr>
        <td><strong xmlns="http://www.w3.org/1999/xhtml">D</strong></td>
        <td>E</td>
        <td>F</td>
        </tr>
        <tr>
        <td><strong xmlns="http://www.w3.org/1999/xhtml">G</strong></td>
        <td><strong xmlns="http://www.w3.org/1999/xhtml">H</strong></td>
        <td><strong xmlns="http://www.w3.org/1999/xhtml">I</strong></td>
        </tr>
        <tr>
        <td><strong xmlns="http://www.w3.org/1999/xhtml">J</strong></td>
        <td>K</td>
        <td>L</td>
        </tr>

        </table> 
```

我应该有输出

```
<tabledata FirstRowIsStrong="true" FirstCoulmnIsStrong="true">
    <row>
        <column>A</column>
        <column>B</column>
        <column>C</column>          
    </row>
    <row>
        <column>D</column>
        <column>E</column>
        <column>F</column>          
    </row>
    <row RowIsStrong="true">
        <column>G</column>
        <column>H</column>
        <column>I</column>          
    </row>
    <row>
        <column>J</column>
        <column>K</column>
        <column>L</column>          
    </row>
  </tabledata> 
```

我可以获取这些值，但我不确定如何根据要求添加属性。

任何人都可以帮助我如何完成它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:28:04.060

对于**FirstRowIsStrong**，您需要进行测试以检查第一行不包含没有**强**元素的**td元素**

 **```
<xsl:if test="tr[1][not(td[not(xhtml:strong)])]"> 
```

同样，对于**FirstColumnIsStrong**你需要一个测试来检查没有行首先第一个不包含**强**元素的单元格

```
<xsl:if test="not(tr[td[1][not(xhtml:strong)]])"> 
```

对于**RowIsStrong**，您可以使用模板匹配来检查非第一行不包含任何此类**td**元素

```
<xsl:template match="tr[position() != 1][not(td[not(xhtml:strong)])]"> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xhtml="http://www.w3.org/1999/xhtml" exclude-result-prefixes="xhtml">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="table">
      <tabledata>
         <xsl:if test="tr[1][not(td[not(xhtml:strong)])]">
            <xsl:attribute name="FirstRowIsStrong">true</xsl:attribute>
         </xsl:if>
         <xsl:if test="not(tr[td[1][not(xhtml:strong)]])">
            <xsl:attribute name="FirstColumnIsStrong">true</xsl:attribute>
         </xsl:if>
         <xsl:apply-templates select="@*|node()"/>
      </tabledata>
   </xsl:template>

   <xsl:template match="tr[position() != 1][not(td[not(xhtml:strong)])]">
      <row RowIsStrong="true">
         <xsl:apply-templates select="@*|node()"/>
      </row>
   </xsl:template>

   <xsl:template match="tr">
      <row>
         <xsl:apply-templates select="@*|node()"/>
      </row>
   </xsl:template>

   <xsl:template match="td">
      <column>
         <xsl:apply-templates select="@*|node()"/>
      </column>
   </xsl:template>

   <xsl:template match="xhtml:strong">
      <strong>
         <xsl:apply-templates select="@*|node()"/>
      </strong>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的输入 XML 时，将输出以下内容

```
<tabledata FirstRowIsStrong="true" FirstColumnIsStrong="true" style="WIDTH: 100%" border="1" cellspacing="1" cellpadding="1">
   <row>
      <column>
         <strong>A</strong>
      </column>
      <column>
         <strong>B</strong>
      </column>
      <column>
         <strong>C</strong>
      </column>
   </row>
   <row>
      <column>
         <strong>D</strong>
      </column>
      <column>E</column>
      <column>F</column>
   </row>
   <row RowIsStrong="true">
      <column>
         <strong>G</strong>
      </column>
      <column>
         <strong>H</strong>
      </column>
      <column>
         <strong>I</strong>
      </column>
   </row>
   <row>
      <column>
         <strong>J</strong>
      </column>
      <column>K</column>
      <column>L</column>
   </row>
</tabledata> 
```

请注意从**强**元素中删除命名空间的额外代码**

# php - 使用纬度和经度坐标制作谷歌地图

> ID：10784307
> 
> 赞同：1
> 
> 时间：2012-05-28T11:58:50.243
> 
> 标签：php, google-maps, google-maps-api-3

我环顾四周，发现了各种使用 Googles API 的地理编码示例，但现在我被卡住了。

我已经使用 Google API 将邮政编码转换为经度和纬度坐标，但现在我想要一个使用这些坐标和邮政编码来显示标记的 Google 地图，然后将地图放在我的网站上。与您可以从谷歌地图网站获得的 iframe 完全相同：

例如这个：

[谷歌地图](https://maps.google.co.uk/maps?q=CT2%200QF&hl=en&sll=53.800651,-4.064941&sspn=13.440126,37.836914&hnear=Canterbury%20CT2,%20United%20Kingdom&t=m&z=12)链接。

我的网站将从我的数据库中加载`lat`和 long `MySQL`，然后将它们放入链接中，但没有运气！

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:11:22.410

从数据库中获取`$postadress`,`lat`和`long`值，然后获取这些值，例如，

```
 <script  type="text/javascript">
     var locations = [['$postaddress ;','$lat;', ' $long;', '1'],];
 </script>

 <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

  <div id="map" class="googlemapimage"></div>

  <script type="text/javascript">

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom:15,  
      center: new google.maps.LatLng(<?php echo $lat;?>, <?php echo $long; ?>),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;
    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }

      })(marker, i));
      google.maps.event.addListener(marker, 'mouseout', (function(marker, i) {
        return function() {

          infowindow.close();
        }

      })(marker, i));
       google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
        infowindow.setContent(locations[i][0]);
           infowindow.open(map, marker);
        }

      })(marker, i));
    }
  </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:09:01.900

谷歌地图不是一个 iframe，它是一堆 div，不同的地图图块在这里和那里放置。

如果您使用的是 Google Maps API v3，只需查看[此 google 示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-simple)的源代码。它应该正是您所需要的。这很简单。

基本上，您在中央 lng/lat 上初始化地图。在该示例中，它将其居中并添加一个标记（这可能是您所追求的）。

或者，如果您只需要图片/标记，而没有交互性，您可以查看静态地图 API。这就像加载图像（您只需将 long/lat 传递给 img src 属性：[https ://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

# android - 使用图形加速运行 Android 模拟器

> ID：10784310
> 
> 赞同：3
> 
> 时间：2012-05-28T11:59:12.273
> 
> 标签：android, android-emulator

我正在尝试使用 -gpu 运行 android 模拟器（从命令行，因为我对平台进行了更改），但是模拟器无法启动（我也遇到了错误）。

我应该在我的 Ubuntu 上安装一些应用程序以便模拟器使用图形加速吗？

我得到的错误是：

```
destroyOpenGLSubwindow not implemented for separate renderer process !!!
createOpenGLSubwindow not implemented for separate renderer process !!!
repaintOpenGLDisplay not implemented for separate renderer process !!!
createOpenGLSubwindow not implemented for separate renderer process !!!
repaintOpenGLDisplay not implemented for separate renderer process !!!
In the logcat, I get this:
E/FramebufferNativeWindow( 1305): couldn't open framebuffer HAL (I/O error)
E/        ( 1305): Failed to connect to host (QemuPipeStream)!!! 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:28:46.447

[http://software.intel.com/en-us/blogs/2012/03/12/how-to-start-intel-hardware-assisted-virtualization-hypervisor-on-linux-to-speed-up-intel- android-x86-gingerbread-emulator/](http://software.intel.com/en-us/blogs/2012/03/12/how-to-start-intel-hardware-assisted-virtualization-hypervisor-on-linux-to-speed-up-intel-android-x86-gingerbread-emulator/)你是否按照英特尔的指南进行操作？（仅添加 -gpu on 并不能真正提高性能）

# jquery - 如果不大于一，则删除函数

> ID：10784311
> 
> 赞同：1
> 
> 时间：2012-05-28T11:59:26.087
> 
> 标签：jquery, function

我正在使用这个[vTicker 脚本](http://www.jugbit.com/jquery-vticker-vertical-news-ticker/)。它使用`li`来滚动项目，还有`Previous`和`Next`按钮。我想修改 jQuery 来说明是否只有一个`li`不滚动和隐藏按钮。

```
<div id="scroller">
    <ul id="list">
        <li>Test 1</li>
        <li>Test 2</li>
        <li>Test 3</li>
        <li>Test 4</li>
        <li>Test 5</li>
    </ul>
</div>
<a class="Prev" href="#">Prev</a>
<a class="Next" href="#">Next</a> 
```

查询：

```
$(function(){
    var $scroller = $("#jqscroller");
    $scroller.vTicker('init', {height: 20, showItems: 1});

    $(".next").click(function(){ 
        $scroller.vTicker('next');
    });

    $(".prev, .next").hover(function(){ 
        $scroller.vTicker('pause', true);
    }, function(){
        $scroller.vTicker('pause', false);
    });

    $(".prev").click(function(){ 
        $scroller.vTicker('prev');
    });
}); 
```

那么有没有办法只在`li`大于 1 时调用该函数并向按钮添加一个 css 类以便我可以使用`display:none`它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:03:02.860

```
$(function(){
    var $scroller = $("#jqscroller");

    if ( $('#list li').length > 1 ) {
         $scroller.vTicker('init', {height: 20, showItems: 1});
    } else {
      $('.Prev, .Next').hide();
    }

    $(".Next").click(function(){ 
        $scroller.vTicker('next');
    });

    $(".Prev, .Next").hover(function(){ 
        $scroller.vTicker('pause', true);
    }, function(){
        $scroller.vTicker('pause', false);
    });

    $(".Prev").click(function(){ 
        $scroller.vTicker('prev');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:03:32.260

你可以这样做：

```
if ($('#list li').length === 1) {
   $('.Prev, .Next').hide();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:04:11.150

试试这个：

```
if ($("#list li").length > 1) {
    $scroller.vTicker('init', {height: 20, showItems: 1});
}
else {
    $(".Prev, .Next").hide();
} 
```

# facebook-graph-api - 发布操作已批准出现在时间线中，但未显示在用户或朋友的新闻提要中

> ID：10784313
> 
> 赞同：0
> 
> 时间：2012-05-28T11:59:30.413
> 
> 标签：facebook-graph-api, publish

我已在 facebook 上将我的网站注册为应用程序，并且我已批准发布操作。我的问题是该操作正在 facebook 上进行活动，但聚合既不工作，也不显示在用户或用户朋友的新闻提要中。

请让我知道它的工作原理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:30:31.563

如果您转到以下位置，您是否看到已发布的操作： `http://www.facebook.com/{facebook_id}/app_{app_namespace}`？

如果您在上面的页面中看到操作，则表示操作正常工作，但 Facebook 只是在时间轴/朋友的新闻源上以不同的方式显示操作。这其实很正常。

大多数动作都发布到`Activity`墙的一部分。Facebook 自己随机发布一个动作或使用聚合在用户的墙上显示一些东西。但它并不总是一样的。

# ruby-on-rails - 在创建具有多对多关系的新模型时关联现有模型

> ID：10784314
> 
> 赞同：1
> 
> 时间：2012-05-28T11:59:40.340
> 
> 标签：ruby-on-rails, activerecord, many-to-many, has-many-through, model-associations

我有以下型号

```
# Database fields: id, name
Book < ActiveRecord::Base
    has_many :books_selections
    has_many :selections, :through => :books_selections

# Database fields: id, name
Selection < ActiveRecord::Base
    has_many :books_selections
    has_many :books, :through => :books_selections
    attr_accessible :books_attributes
    accepts_nested_attributes_for :books

# Database fields: book_id, selection_id
Books_Selection < ActiveRecord::Base
    belongs_to :book
    belongs_to :selection 
```

这里的选择是书籍的集合，但是因为书籍可以在多个选择中，所以我使用带有连接表的双 has_many 结构。请注意，连接表没有“id”属性，这是一个问题吗？

我尝试让我的“选择创建”操作直接将多本现有书籍与其关联。在视图中，我动态创建输入元素，例如以下最终 html：

```
<input type="hidden" name="selection[books_attributes][id]" value="5" />
<input type="hidden" name="selection[books_attributes][id]" value="9" /> 
```

Selection控制器的Create方法里面没有具体的代码，只是：

```
@selection = Selection.new(params[:selection]) 
```

当新视图被提交时，选择被创建（作为一个模型），但书籍与它没有关联。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:54:07.693

不确定如何填充隐藏字段，但其名称 selection[books_attributes][id] 不正确。 [http://guides.rubyonrails.org/form_helpers.html#understanding-parameter-naming-conventions](http://guides.rubyonrails.org/form_helpers.html#understanding-parameter-naming-conventions)

对于一个有很多关联，嵌套属性是一个哈希数组：

```
selection.books_attributes = [{ :id => 5}, { :id => 9 }] 
```

然后将发送`selection[books_attributes][][id]`.

嵌套属性适用于创建新关联或更新现有关联的情况。如果您只想将现有书籍分配给选择，您可以使用`selection[books_ids][]`.

# android - android更新项目-路径“找不到命令”

> ID：10784321
> 
> 赞同：7
> 
> 时间：2012-05-28T12:00:13.823
> 
> 标签：android, android-ndk

我正在尝试使用在 Android 上运行的 OCR 开发应用程序。我正在按照中的步骤

[http://gaut.am/making-an-ocr-android-app-using-tesseract/](http://gaut.am/making-an-ocr-android-app-using-tesseract/)

我已经通过了“ndk-build”步骤并进入了“android update project –path”。步 。但它显示“android：找不到命令错误”。我是android开发的新手。谁能告诉我如何设置路径变量。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-19T15:23:06.050

编辑 Festus 的回答：

***不要这样做：*** `export PATH=$ANDROID_HOME/tools`。这将改变整个 PATH 变量。

而是使用以下内容：

```
export PATH=$PATH:$ANDROID_HOME/tools

export PATH=$PATH:$ANDROID_HOME/platform-tools 
```

这应该将工具和平台工具的路径添加到现有 PATH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T10:09:17.853

如果您使用的是 mac 或 Linux 操作系统

假设您已将 ANDROID_HOME 设置为指向 sdk 安装：

```
export ANDROID_HOME=/Applications/android-sdks 
```

将工具添加到 PATH

```
export PATH=${PATH}:${ANDROID_HOME}/tools 
```

将平台工具添加到 PATH

```
export PATH=${PATH}:${ANDROID_HOME}/platform-tools 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-18T12:08:06.270

而不是使用这个命令---> android update project -p

使用这个命令

android.bat 更新项目 -p {项目路径}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-05T18:49:34.487

我在 Windows 中遇到了同样的问题。我是这样做的，它对我有用。

```
 $ $ANDROID_SDK/sdk/tools/android.bat update project -p .
 Updated local.properties
 Updated file C:\ndk\android-ndk-r9b\samples\hello-jni\proguard-project.txt
 It seems that there are sub-projects. If you want to update them
 please use the --subprojects parameter 
```

这里首先使用“cd”命令进入 ndk 项目目录，这是我使用“.”（点）作为路径（-p）的方式

$ANDROID_SDK/sdk/tools/android.bat 更新项目 -p 。

# cassandra - 如何用 Hector / Cassandra 设置计数器？

> ID：10784322
> 
> 赞同：4
> 
> 时间：2012-05-28T12:00:23.690
> 
> 标签：cassandra, hector

我应该想用一个带赫克托的柜台来装卡桑德拉。我从 hector的测试代码中复制/粘贴[这个测试用例：](https://github.com/rantav/hector/blob/master/core/src/test/java/me/prettyprint/cassandra/model/MutatorTest.java#L214)

```
 Mutator<String> m = createMutator(keyspace, se);
    MutationResult mr = m.insertCounter( // exception here.
     "k", "Counter1", createCounterColumn("name", 5)); 
    assertTrue("Execution time on single counter insert should be > 0", mr.getExecutionTimeMicro() > 0);
    assertTrue("Should have operated on a host", mr.getHostUsed() != null);
    CounterQuery<String, String> counter = new ThriftCounterColumnQuery<String,String>(keyspace, se, se);
    counter.setColumnFamily("Counter1").setKey("k").setName("name");
    assertEquals(new Long(5), counter.execute().get().getValue()); 
```

*但是我在insertCounter*行上得到了这个异常，因为 Counter1 未配置，他说：

```
me.prettyprint.hector.api.exceptions.HInvalidRequestException: InvalidRequestException(why:unconfigured columnfamily Counter1)
    at me.prettyprint.cassandra.service.ExceptionsTranslatorImpl.translate(ExceptionsTranslatorImpl.java:45) ~[hector-core-1.0-5.jar:na]
    at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:264) ~[hector-core-1.0-5.jar:na]
    at me.prettyprint.cassandra.model.ExecutingKeyspace.doExecuteOperation(ExecutingKeyspace.java:97) ~[hector-core-1.0-5.jar:na]
    at me.prettyprint.cassandra.model.MutatorImpl.execute(MutatorImpl.java:243) ~[hector-core-1.0-5.jar:na]
    at me.prettyprint.cassandra.model.MutatorImpl.insertCounter(MutatorImpl.java:285) ~[hector-core-1.0-5.jar:na] 
```

好的，但是测试用例没有配置 Counter1 ？我如何配置它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:05:30.450

您在 Cassandra 服务器上创建列族。一种常见的方法是使用 cqlsh 工具。

```
cqlsh

USE Keyspace1;
CREATE COLUMNFAMILY counter1 (example text PRIMARY KEY) 
  WITH comparator=text and default_validation=counter; 
```

在 Hector 中，您可以使用 ColumnFamilyDefinition 类——如下所示：

```
 ColumnFamilyDefinition cfDef = HFactory.createColumnFamilyDefinition(KEYSPACE, "counter1");
    cfDef.setKeyValidationClass(ComparatorType.UTF8TYPE.getClassName());
    cfDef.setComparatorType(ComparatorType.UTF8TYPE);
    cfDef.setDefaultValidationClass(ComparatorType.COUNTERTYPE.getClassName());
    cfDef.setColumnType(ColumnType.STANDARD);
    List<ColumnFamilyDefinition> columnFamilies = new ArrayList<ColumnFamilyDefinition>();
    columnFamilies.add(cfDef);
    KeyspaceDefinition ksdef = HFactory.createKeyspaceDefinition(KEYSPACE, "org.apache.cassandra.locator.SimpleStrategy", 1,
            columnFamilies);
    cluster.addKeyspace(ksdef); 
```

# javascript - ActiveX 冲突

> ID：10784325
> 
> 赞同：1
> 
> 时间：2012-05-28T12:00:44.307
> 
> 标签：javascript, activex

我知道如果没有看到完整的实际代码就很难回答这个问题，但无论如何我都会尝试。

我有一个用于两个不同 ActiveX 的 ActiveX 项目。每个“ActiveX”都被编译并包装在具有不同 ID (GUID) 和名称的 CAB 中。

当我只安装了一个 ActiveX 时，一切正常。例如，一旦我安装了第二个 ActiveX，我就开始面临奇怪的问题。

其中一种方法是：

```
STDMETHOD(SetOrientation)(/*[in]*/ BSTR configuration); 
```

它是从 HTML 页面中的 javascript 调用的。

当我在 javascript 和 C++ (ActiveX) 代码中设置断点时，我看到 javascript 传递了正确的配置字符串，但是一旦它到达 ActiveX c++ 代码，我就会得到一个“错误指针”。同样，当只安装了一个 ActiveX 时，一切正常。

任何想法？谢谢。

# facebook-graph-api - Facebook GraphAPI 无法点赞

> ID：10784327
> 
> 赞同：0
> 
> 时间：2012-05-28T12:01:04.287
> 
> 标签：facebook-graph-api

这是我的代码

[http://www.facebook.com/241748079209258/posts/352844854766246?UID=241748079209258_352844854766246&AuthorID=241748079209258&PageID=241748079209258&PostID=35284844](http://www.facebook.com/241748079209258/posts/352844854766246?UID=241748079209258_352844854766246&AuthorID=241748079209258&PageID=241748079209258&PostID=352844854766246)

如果我只是打开上面的链接，则会打开一个页面，然后在浏览器中输入以下链接，我得到了错误

[https://graph.facebook.com/352844854766246/likes](https://graph.facebook.com/352844854766246/likes)

但是如果我使用下面的链接

[http://www.facebook.com/241748079209258/posts/343416792375719?UID=241748079209258_343416792375719_4237166&AuthorID=100003329558664&PageID=241748079209258&PostID=343416792375719&CommentID=4237166](http://www.facebook.com/241748079209258/posts/343416792375719?UID=241748079209258_343416792375719_4237166&AuthorID=100003329558664&PageID=241748079209258&PostID=343416792375719&CommentID=4237166)

并输入以下网址

[https://graph.facebook.com/343416792375719/likes](https://graph.facebook.com/343416792375719/likes)

我得到了结果。

为什么我在第一种情况下会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:59:18.257

I'm not sure what you're trying to do here, but this might be what you're looking for: [https://graph.facebook.com/241748079209258_352844854766246/likes](https://graph.facebook.com/241748079209258_352844854766246/likes)

Your first link points to a photo, and the other to a status update. To get information about the photo you have to prefix it with the owner's page ID or user ID.

Please note that you only have READ access to likes. You can not make anyone like something without having them click a Like button.

# spring - Springsource工具套件跳过代码

> ID：10784329
> 
> 赞同：0
> 
> 时间：2012-05-28T12:01:12.963
> 
> 标签：spring, debugging, sts-springsourcetoolsuite

我有一个非常奇怪的问题。当我尝试调试代码时，sts 完全忽略了代码。下面是我非常简单的代码，我想知道为什么值没有改变，当我调试时，从`{`to的行`client.employmentKindOfWork ="asdasd"`没有执行。它跳过所有内容并直接跳转到 client.save()。

```
Client client = Client.FindById(caseInstance.clientIdClient);
if (client!=null) {
  client.clientMailAddr1="sdfsdfsf"
  client.isDelete = true
  client.employmentKindOfWork ="asdasd"
  client.save()
} 
```

我尝试了以下步骤：

1.  通过向导命令进行清理
2.  通过单击项目然后清理。
3.  构建项目几次。
4.  打开和关闭 STS。
5.  创建新工作区，然后再次导入项目。
6.  在首选项中添加这一行？Java>je 编辑和默认 vm -XX:+UseParallelGC
7.  通过右键单击并刷新来刷新项目
8.  通过命令向导重新编译

所有这些都不起作用！

请。建议任何我没有尝试过的东西，除了更新之外可能会解决这个问题，因为我所有的队友都有我拥有的相同版本并且他们没有这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:27:29.130

您很可能没有运行您认为的代码。添加一些 system.out.println 语句并查看它们是否被访问。我的猜测是他们不是。最有可能的是，您将类文件编译到一个位置，但从另一个位置运行它们的陈旧版本。

我假设这是一个 Maven 项目。确保在您的 java 构建路径（项目上的 Ctrl-I）中，输出文件夹设置为 target/classes 和 target/test-classes。

# jquery - JQuery 手机差距：使用 asyraf9 示例的拆分视图不起作用

> ID：10784334
> 
> 赞同：1
> 
> 时间：2012-05-28T12:01:48.603
> 
> 标签：jquery, android, iphone, jquery-mobile, cordova

我想在 iPad 中使用 jQuery Mobile 和 PhoneGap 实现拆分视图。很多网站推荐asyraf9的[https://github.com/asyraf9/jquery-mobile/](https://github.com/asyraf9/jquery-mobile/)

我已经下载了包含文件包的 zip 文件。在文件夹中`demos\experiments\`，我看到了一个“splitview”目录。我使用该目录的内容作为参考。

我已经添加了所有使用我文件夹中拆分视图文件夹中的文件的`www`文件。它仅显示如下所示的视图，但不显示拆分视图

当我们使用“ © CS8 ”时，index.htms 中的部分代码发生了如下变化

“© CS8”中的任何语法问题

![在此处输入图像描述](../Images/9610bf2c8450d18cd56809bebfb49a0a.png)

其中哪个文件将用作拆分视图的插件..？

当我使用它的拆分视图 index.html 文件时，它不显示拆分视图

它就像一个段与表视图而不是拆分视图

![在此处输入图像描述](../Images/96643648f81490af6ff1ddebcce5a0c4.png) 怎么了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:28:17.090

为了使它适用于 splitsview .. 在 Splitsview.js 文件中

```
$.support.splitview =($query || ($.mobile.browser.ie && $(this).width() >= 480)) 
                      && $.mobile.ajaxEnabled; 
```

as（评论右侧并执行 $.support.splitview = 1;）

```
$.support.splitview = 1;//($query || ($.mobile.browser.ie && $(this).width() >= 480)) 
                           && $.mobile.ajaxEnabled; 
```

然后 spliview 将适用于任何尺寸的手机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:12:43.743

你的意思是 'data-id="menu"' 吗？事实上，它在桌面上的网络浏览器中运行良好，只有当我使用 PhoneGap 构建它以在 Android 上拥有应用程序时才会出现问题。这是我的 index.html：

```
 <!DOCTYPE html>
 <html>
  <head>
        <title>Jquery Mobile Splitview</title>
        <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
        <link rel="stylesheet" href="css/jquery.mobile.css" />
        <link rel="stylesheet" href="css/jquery.mobile.splitview.css" />
    <link rel="stylesheet"  href="css/jquery.mobile.grids.collapsible.css" />
    <script type="text/javascript" src="js/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="js/jquery.mobile.splitview.js"></script>
    <script type="text/javascript" src="js/jquery.mobile.js"></script>
    <script type="text/javascript" src="js/iscroll-wrapper.js"></script>
    <script type="text/javascript" src="js/iscroll.js"></script>
    <!--script type="text/javascript" src="scrollability.js"></script-->        
</head>
<body>
    <div data-role="panel" data-id="menu" data-hash="crumbs" data-context="a#default">
        <!-- Start of main page -->
        <div data-role="page" id="main" data-hash="false">
            <div data-role="header">
                <h1>Left panel</h1>
            </div><!-- /header -->
            <div data-role="content">
                The left content
            </div><!-- /content -->
        </div><!-- /page -->
    </div><!-- panel menu -->

    <div data-role="panel" data-id="main">
        <!-- Start of about page -->
        <div data-role="page" id="about">
            <div data-role="header">
                <h1>Right panel</h1>
            </div><!-- /header -->
            <div data-role="content">
                The right content
            </div><!-- /content -->
        </div><!-- /page -->
    </div><!-- panel main -->
    </body>
 </html> 
```

看来PhoneGap 不支持这个插件。

还是非常感谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T12:41:31.890

在 index.html 中，检查您有两个 div，一个具有 data-role="menu" 和另一个 data-role="main"。所以，一旦你有了它，在纵向模式下你就会显示主页。在横向模式下，您将显示菜单和主页。

您能否通过删除 © 代码进行检查，以验证在没有相同的情况下，您是否能够获得拆分视图。

# xcode4 - Xcode：如何只允许 UITextView 中的某些字符？

> ID：10784338
> 
> 赞同：0
> 
> 时间：2012-05-28T12:02:01.150
> 
> 标签：xcode4, uitextview

如何只允许 UITextView 中的某些字符？

我只想允许英文字符、数字和阿拉伯字符。

我找到了很多解决方案，但 UITextField 不是 UITextView！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:26:10.927

您可以使用（[docs](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html#//apple_ref/occ/intfm/UITextViewDelegate/textView%3ashouldChangeTextInRange%3areplacementText%3a)）的`textView:shouldChangeTextInRange:replacementText:`方法：`UITextViewDelegate`

> 每当用户键入新字符或删除现有字符时，文本视图都会调用此方法。此方法的实现是可选的。您可以使用此方法在文本提交到文本视图存储之前替换文本。例如，拼写检查器可能会使用此方法将拼写错误的单词替换为正确的拼写。

您应该检查`replacementText`参数是否包含非法字符。在这种情况下，您可以返回`NO`以防止插入文本。当插入多个字符的文本并且并非所有字符都被允许时，这可能会出现问题：您会做什么，允许插入（包括非法字符）还是阻止插入（包括允许的字符）？

* * *

这意味着您需要`textViewDidChange:`方法（[docs](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html#//apple_ref/occ/intfm/UITextViewDelegate/textViewDidChange%3a)）：

> 文本视图调用此方法以响应用户对文本的更改。不会调用此方法以响应以编程方式启动的更改。

调用此方法时，您可以检查 的值`UITextView`并在之后删除非法字符。

* * *

我认为最好同时使用这两种方法。第一个在用户键入时提供最佳体验（字符根本不显示，而不是先显示然后删除）。例如，第二种方法确保在粘贴某些文本时会删除非法字符。

# javascript - Show movie then fade out div

> ID：10784343
> 
> 赞同：0
> 
> 时间：2012-05-28T12:02:21.960
> 
> 标签：javascript, jquery, html, delay, fade

I'm working on an custom map, I have the map from google and alert the style - it all works. But I would like to show a HTML5 movie in an overlapping `div` and then fade it out after it is finished. This is what I've got so far.

### jQuery

```
<script type="text/javascript">
    $('#soundlogo').delay(400).fadeOut(400);
</script> 
```

### CSS

```
#soundlogo {
    height:100%;
    width:100%;
    display:block;
    background-color:#FFF;
    position:fixed;
    z-index:100;
} 
```

### Body

```
<div id="soundlogo">
    <video width="100%" autoplay>
        <source src="video/soundlogo-web.mp4" type="video/mp4" />
        Your browser does not support the video tag.
    </video>
</div> 
```

The problem is that the fade never occurs.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:05:59.387

You need to wrap your jQuery code with the `ready` function:

```
$(document).ready(function(){
    $('#soundlogo').delay(400).fadeOut(400);
}); 
```

# internet-explorer-8 - 即使互联网连接良好，也无法显示任何网页

> ID：10784346
> 
> 赞同：-2
> 
> 时间：2012-05-28T12:02:47.200
> 
> 标签：internet-explorer-8, windows-server-2003

我有一个终端服务器，它不允许任何人通过租用线路或 ADSL 连接连接到互联网。两个互联网连接都已启动并正在运行，并且网络服务正在服务器上运行，因为我可以连接到其他服务器上的共享。

服务器有一个通过 DHCP 正确分配的 IP 地址，并且默认网关是正确的。有关修复的任何建议（最好不重新启动，这样我就不必要求所有人注销）？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:05:09.963

检查是否有两台机器使用相同的IP。

# javascript - 使用属性存储值

> ID：10784348
> 
> 赞同：1
> 
> 时间：2012-05-28T12:02:50.447
> 
> 标签：javascript, html

我更喜欢使用 lang、dir、id、class 等属性来存储一些引用这些对象的 javascript 函数的有用数据——我这样做是为了避免使用在每次操作或更改后可能必须更新的数组。问题是这是一种不好的做法，我不能总是使用我想要的属性，因为它们已经在使用中，或者在某些标签类型上不可用。有没有更好的办法？

请注意，我不喜欢使用分隔符拆分多个值，因为在处理大量对象时这很慢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T12:04:31.610

HTML5[`data-*`属性](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)是专门为此设计的。从规范：

> 自定义数据属性旨在存储页面或应用程序私有的自定义数据，没有更合​​适的属性或元素。

你可以像这样使用它们：

```
<div data-random="12345" data-name="James"></div> 
```

它们对所有元素都有效，并且每个元素都可以有任意数量的元素。

它们可以通过每个元素都应该具有的[`dataset`属性来访问。](https://developer.mozilla.org/en/DOM/element.dataset)如果您使用 jQuery，您可以使用该[`data`](http://api.jquery.com/data/)方法来帮助解决[旧浏览器（和 IE）的](http://caniuse.com/#search=dataset)问题。如果没有，您可能必须对`dataset`属性进行特征检测并退回到[`getAttribute`](https://developer.mozilla.org/en/DOM/element.getAttribute)不`dataset`支持的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:06:13.863

由于您标记了 jQuery 和 HTML5，我认为这正是您正在寻找的，以一种优雅和标准化的方式，而不会破坏验证。

[HTML5 数据-* 属性](http://api.jquery.com/data/#data-html5)

# c# - 使用 DataBinder.Eval 格式化数据

> ID：10784350
> 
> 赞同：1
> 
> 时间：2012-05-28T12:03:00.993
> 
> 标签：c#, asp.net, data-binding, formatting

我需要转换以下代码行：

```
<%# DataBinder.Eval(Container.DataItem, "Id") %> 
```

到

```
<%# DataBinder.Eval(Container.DataItem, "Id").ToString().PadLeft(3, '0') %> 
```

后者给出了格式错误的服务器标记的例外。如何将方法应用于 DataBinder 输出。请注意，我已经知道以下内容但不想使用它：

```
<%# DataBinder.Eval(Container.DataItem, "Id", "{FormatString}") %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-15T10:44:12.323

我遇到了同样的问题，这就是我所做的。

```
<%# DataBinder.Eval(Container.DataItem, "Id").ToString().PadLeft(3, Convert.ToChar("0")) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:56:35.143

导致问题的原因是填充 [padLeft(3,'0')] 函数中存在单引号，这是无论如何都需要的，并且在字符串的某些部分中存在双引号......你能移动格式吗代码隐藏 - 使用数据绑定事件？

# c# - 是否可以像 excelsheet 一样制作网页

> ID：10784352
> 
> 赞同：-3
> 
> 时间：2012-05-28T12:03:03.947
> 
> 标签：c#, asp.net, excel

我们有一种情况需要像 ExcelSheet 一样使用 Web 表单，是否有可能，有人可以建议我如何制作它们。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T12:06:44.410

是的，这是可能的。这正是 Google Docs 电子表格或 Office 365 所做的。您需要使用大量的 JavaScript 才能使用户体验类似于 Excel 电子表格。我将首先查看一些已经这样做的开源项目。像[TrimSpreadsheet](http://code.google.com/p/trimpath/wiki/TrimSpreadsheet)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T12:09:39.417

非常好的插件

[http://visop-dev.com/Project+jQuery.sheet](http://visop-dev.com/Project+jQuery.sheet)

# java - 两个窗口都关闭了？

> ID：10784360
> 
> 赞同：-1
> 
> 时间：2012-05-28T12:04:07.587
> 
> 标签：java, swing, jframe

我有一个带有 JButton 的主 JFrame 窗口。当我单击按钮时，会打开一个新窗口，但是当我想关闭第二个窗口时，两个窗口都关闭了！我希望第一个一直打开。有没有办法只关闭第二个窗口？一些帮助！谢谢！

编辑：我添加新代码来显示我的问题。类 GUI1 有一个主框架和一个打开第二个框架 GUI2 的按钮，它有一个关闭 GUI2 框架的按钮。这是我无法解决的 GUI2 的结束部分。代码很简单，仅用于测试。

图形用户界面1

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
public class GUI1 extends JFrame implements ActionListener{
JButton btn1;
Container contentPane;
public GUI1()
{
    setTitle("GUI 1");
    setResizable(false);
    setSize(600,300);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    contentPane = getContentPane();
    contentPane.setLayout(new FlowLayout());
    btn1 = new JButton("Open GUI 2 frame");
    contentPane.add(btn1);
    btn1.setFocusable(false);
    btn1.addActionListener(this);
}
public void actionPerformed(ActionEvent event){
    if(event.getSource() == btn1)
    {
        GUI2 frame2 = new GUI2();
        frame2.setVisible(true);
    }
}
public static void main(String[] args) {
    GUI1 frame = new GUI1();
    frame.setVisible(true);
}
} 
```

图形用户界面2

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
public class GUI2 extends JFrame implements ActionListener {
Container contentPane;
JButton btn2;
public GUI2()
{
    setTitle("GUI 2");
    setResizable(false);
    setSize(400,200);
    setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    contentPane = getContentPane();
    contentPane.setLayout(new FlowLayout());
    btn2 = new JButton("Close GUI 2 frame");
    contentPane.add(btn2);
    btn2.addActionListener(this);
}
public void actionPerformed(ActionEvent event){
    if(event.getSource() == btn2)
    {
        // Close GUI2 ??
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:07:56.780

第二次阅读后，我同意其他人的观点，他们说您不应该创建和丢弃 JFrame（或根本不应该使用多个 JFrame）。但如果你真的想走那条路，我建议：

*   创建一个 JFrame，并将对它的引用存储在按钮可以访问的地方；
*   按下“添加”按钮时[显示框架；](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Window.html#show%28%29)
*   使用[`JFrame.HIDE_ON_CLOSE`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)代替[`3`](http://docs.oracle.com/javase/1.4.2/docs/api/constant-values.html#javax.swing.WindowConstants.EXIT_ON_CLOSE)（关闭时退出）——不要使用幻数；
*   按下另一个按钮时[隐藏框架。](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Window.html#hide%28%29)

**更新：**将上述建议应用于您的架构的步骤是：

*   `GUI1`向您的类添加一个字段`private GUI2 frame`- 并且只创建一次（例如在 GUI1 的构造函数中）；
*   在你的`actionPerformed`，只使用`frame.setVisible(true)`- 因为框架已经创建；
*   如果您愿意，我相信您可以继续`DISPOSE_ON_CLOSE`使用 GUI2，但`HIDE_ON_CLOSE`更合适；
*   因为它是`GUI2`- JFrame - 谁正在实现动作侦听器，所以您已经有了对它的引用：`this`！使用`this.setVisible(false)`或干脆`setVisible(false)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:08:52.457

> 我有一个带有 JButton 的主 JFrame 窗口。当我单击按钮时，会打开一个新窗口，但是当我想关闭第二个窗口时，两个窗口都关闭了！

1.use`CardLayout`而不是在runtime上创建一堆`JFrames`，真的很糟糕的概念，这些Objects从未从UsedMemory中消失，也不会被GC'ed

2.使用`HIDE_ON_CLOSE`代替`DISPOSE_ON_CLOSE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:07:58.000

更改：`frame2.setDefaultCloseOperation(3);`到`frame2.setDefaultCloseOperation(DISPOSE_ON_CLOSE);`并且它应该可以工作

# android - 从 sencha touch 2.0 应用程序向服务器发送数据的最佳方式？

> ID：10784366
> 
> 赞同：2
> 
> 时间：2012-05-28T12:04:45.357
> 
> 标签：android, sencha-touch-2

我正在开发 sencha touch 2.0，我想向服务器发送一个存储所选项目 id 的商店实例，但我的问题是，我知道当调用`getData()`商店的方法时它只会给我`model object`。现在我知道了我不直接将模型对象发送到服务器。我被困在这里并且真的很困惑我可以将我的商店发送到服务器以接收数据对象并成功返回值。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:41:52.333

你想要你的整个商店数据到服务器吗？如果是，那么您必须遍历存储数据并创建一个可以发送到服务器的 JSON 字符串。

假设这是您的商店：

```
var store = Ext.getStore('MyStore'),
allData = [];

store.each(function(record){
    allData.push(record.getData());
});

var dataToBeSentToServer = Ext.JSON.encode(allData); 
```

现在将此“dataToBeSentToServer”作为参数发送到服务器并在服务器端解码数据。

# c++ - 无法在 64 位 Windows 上打开 boost 头文件

> ID：10784368
> 
> 赞同：0
> 
> 时间：2012-05-28T12:04:54.147
> 
> 标签：c++, boost, waf

我已经下载了 boost 库并运行了 bootstrap.bat 和 .\b2 。尝试在 64 位上运行它我得到了这些错误

```
C:\cygwin\home\vickey\tunebasket\p2p>python waf build --with-tests --boost-includes="c:\boost_1_48_0" --boost-libs=
"c:\Users\vickey\Downloads\lib64\" --boost-static --boost-mt 
```

有环境变量

```
Waf: Entering directory `C:\cygwin\home\vickey\tunebasket\p2p\build'
'AR' 'C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\LIB.exe'
'ARFLAGS' ['/NOLOGO']
'AR_TGT_F' '/OUT:'
'BINDIR' 'C:\\users\\vickey\\appdata\\local\\temp/bin'
'BOOST_VERSION' '1_48'
'CC' ['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\CL.exe']
'CCLNK_TGT_F' '/OUT:'
'CC_NAME' 'msvc'
'CC_SRC_F' ''
'CC_TGT_F' ['/FC', '/c', '/Fo']
'CFLAGS' ['/nologo']
'CFLAGS_CONSOLE' ['/SUBSYSTEM:CONSOLE']
'CFLAGS_CRT_MULTITHREADED' ['/MT']
'CFLAGS_CRT_MULTITHREADED_DBG' ['/MTd']
'CFLAGS_CRT_MULTITHREADED_DLL' ['/MD']
'CFLAGS_CRT_MULTITHREADED_DLL_DBG' ['/MDd']
'CFLAGS_NATIVE' ['/SUBSYSTEM:NATIVE']
'CFLAGS_POSIX' ['/SUBSYSTEM:POSIX']
'CFLAGS_WINDOWS' ['/SUBSYSTEM:WINDOWS']
'CFLAGS_WINDOWSCE' ['/SUBSYSTEM:WINDOWSCE']
'CFLAGS_cshlib' []
'CL' ''
'COMPILER_CC' 'msvc'
'COMPILER_CXX' 'msvc'
'CPPPATH_ST' '/I%s'
'CXX' ['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\CL.exe']
'CXXFLAGS' ['/nologo']
'CXXFLAGS_CONSOLE' ['/SUBSYSTEM:CONSOLE']
'CXXFLAGS_CRT_MULTITHREADED' ['/MT']
'CXXFLAGS_CRT_MULTITHREADED_DBG' ['/MTd']
'CXXFLAGS_CRT_MULTITHREADED_DLL' ['/MD']
'CXXFLAGS_CRT_MULTITHREADED_DLL_DBG' ['/MDd']
'CXXFLAGS_NATIVE' ['/SUBSYSTEM:NATIVE']
'CXXFLAGS_POSIX' ['/SUBSYSTEM:POSIX']
'CXXFLAGS_WINDOWS' ['/SUBSYSTEM:WINDOWS']
'CXXFLAGS_WINDOWSCE' ['/SUBSYSTEM:WINDOWSCE']
'CXXFLAGS_cxxshlib' []
'CXXLNK_TGT_F' '/OUT:'
'CXX_NAME' 'msvc'
'CXX_SRC_F' ''
'CXX_TGT_F' ['/FC', '/c', '/Fo']
'DEFINES' []
'DEFINES_ST' '/D%s'
'DEST_BINFMT' 'pe'
'DEST_OS' 'win32'
'IMPLIB_ST' '/IMPLIB:%s'
'INCLUDES' ['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\INCLUDE', 'C:\\Program Files (x86)\\Microso
ft SDKs\\Windows\\v7.0A\\include']
'INCLUDES_BOOST' 'c:\\boost_1_48_0'
'LIBDIR' 'C:\\users\\vickey\\appdata\\local\\temp/lib'
'LIBPATH' ['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\LIB', 'C:\\Program Files (x86)\\Microsoft SD
Ks\\Windows\\v7.0A\\lib']
'LIBPATH_ST' '/LIBPATH:%s'
'LIB_ST' '%s.lib'
'LINK' 'C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\LINK.exe'
'LINKFLAGS' ['/NOLOGO', '/MANIFEST']
'LINKFLAGS_cshlib' ['/DLL']
'LINKFLAGS_cstlib' []
'LINKFLAGS_cxxshlib' ['/DLL']
'LINK_CC' 'C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\LINK.exe'
'LINK_CXX' 'C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\LINK.exe'
'MSVC_COMPILER' 'msvc'
'MSVC_INSTALLED_VERSIONS' [('msvc 10.0Exp', [('x86', ('x86', (['C:\\Program Files (x86)\\Microsoft Visual Studio 10
.0\\Common7\\IDE\\', 'C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN', 'C:\\Program Files (x86)\\Mi
crosoft Visual Studio 10.0\\Common7\\Tools', 'C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319', 'C:\\Windows\\Mic
rosoft.NET\\Framework\\v3.5', 'C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\VCPackages', 'C:\\Program
 Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\bin\\NETFX 4.0 Tools', 'C:\\Program Files (x86)\\Microsoft SDKs\\Wind
ows\\v7.0A\\bin', 'c:\\Python27\\lib\\site-packages\\gtk-2.0\\runtime\\bin', 'C:\\Program Files (x86)\\Git\\bin', '
C:\\shortcuts', 'C:\\Program Files (x86)\\Vim\\vim73\\', 'C:\\OSSBuild\\GStreamer\\v0.10.7\\sdk\\bin', 'C:\\OSSBuil
d\\GStreamer\\v0.10.7\\bin', 'C:\\Windows\\system32', 'C:\\Windows', 'C:\\Windows\\System32\\Wbem', 'C:\\Windows\\S
ystem32\\WindowsPowerShell\\v1.0\\', 'C:\\Program Files (x86)\\OpenSSH\\bin', 'c:\\Python27\\', 'C:\\Program Files
(x86)\\GnuWin32\\bin', '', 'C:\\GTK2\\2.0\\bin', 'C:\\cygwin\\bin\\mintty.exe', 'C:\\libglade'], ['C:\\Program File
s (x86)\\Microsoft Visual Studio 10.0\\VC\\INCLUDE', 'C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\incl
ude'], ['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\LIB', 'C:\\Program Files (x86)\\Microsoft SDKs\
\Windows\\v7.0A\\lib'])))]), ('msvc 10.0', [('x86', ('x86', (['C:\\Program Files (x86)\\Microsoft Visual Studio 10.
0\\Common7\\IDE\\', 'C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN', 'C:\\Program Files (x86)\\Mic
rosoft Visual Studio 10.0\\Common7\\Tools', 'C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319', 'C:\\Windows\\Micr
osoft.NET\\Framework\\v3.5', 'C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\VCPackages', 'C:\\Program
Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\bin\\NETFX 4.0 Tools', 'C:\\Program Files (x86)\\Microsoft SDKs\\Windo
ws\\v7.0A\\bin', 'c:\\Python27\\lib\\site-packages\\gtk-2.0\\runtime\\bin', 'C:\\Program Files (x86)\\Git\\bin', 'C
:\\shortcuts', 'C:\\Program Files (x86)\\Vim\\vim73\\', 'C:\\OSSBuild\\GStreamer\\v0.10.7\\sdk\\bin', 'C:\\OSSBuild
\\GStreamer\\v0.10.7\\bin', 'C:\\Windows\\system32', 'C:\\Windows', 'C:\\Windows\\System32\\Wbem', 'C:\\Windows\\Sy
stem32\\WindowsPowerShell\\v1.0\\', 'C:\\Program Files (x86)\\OpenSSH\\bin', 'c:\\Python27\\', 'C:\\Program Files (
x86)\\GnuWin32\\bin', '', 'C:\\GTK2\\2.0\\bin', 'C:\\cygwin\\bin\\mintty.exe', 'C:\\libglade'], ['C:\\Program Files
 (x86)\\Microsoft Visual Studio 10.0\\VC\\INCLUDE', 'C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\inclu
de'], ['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\LIB', 'C:\\Program Files (x86)\\Microsoft SDKs\\
Windows\\v7.0A\\lib'])))])]
'MSVC_MANIFEST' True
'MSVC_VERSION' 10.0
'MT' 'C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\bin\\MT.exe'
'MTFLAGS' ['/NOLOGO']
'PATH' ['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\', 'C:\\Program Files (x86)\\Microsof
t Visual Studio 10.0\\VC\\BIN', 'C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\Tools', 'C:\\Windo
ws\\Microsoft.NET\\Framework\\v4.0.30319', 'C:\\Windows\\Microsoft.NET\\Framework\\v3.5', 'C:\\Program Files (x86)\
\Microsoft Visual Studio 10.0\\VC\\VCPackages', 'C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\bin\\NETF
X 4.0 Tools', 'C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\bin', 'c:\\Python27\\lib\\site-packages\\gt
k-2.0\\runtime\\bin', 'C:\\Program Files (x86)\\Git\\bin', 'C:\\shortcuts', 'C:\\Program Files (x86)\\Vim\\vim73\\'
, 'C:\\OSSBuild\\GStreamer\\v0.10.7\\sdk\\bin', 'C:\\OSSBuild\\GStreamer\\v0.10.7\\bin', 'C:\\Windows\\system32', '
C:\\Windows', 'C:\\Windows\\System32\\Wbem', 'C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\', 'C:\\Program Files
 (x86)\\OpenSSH\\bin', 'c:\\Python27\\', 'C:\\Program Files (x86)\\GnuWin32\\bin', '', 'C:\\GTK2\\2.0\\bin', 'C:\\c
ygwin\\bin\\mintty.exe', 'C:\\libglade']
'PREFIX' 'C:\\users\\vickey\\appdata\\local\\temp'
'STLIBPATH_BOOST' ['c:\\Users\\vickey\\Downloads\\lib64']
'STLIBPATH_ST' '/LIBPATH:%s'
'STLIB_BOOST' ['boost_unit_test_framework-vc100-mt-1_48']
'STLIB_ST' 'lib%s.lib'
'WINRC' 'C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\bin\\RC.exe'
'WINRCFLAGS' []
'WINRC_SRC_F' ''
'WINRC_TGT_F' '/fo'
'cfg_files' ['C:\\cygwin\\home\\vickey\\tunebasket\\p2p\\build\\config.h']
'commonCFlags' ['/EHsc', '/MD']
'commonCxxFlags' ['/EHsc', '/MD']
'commonLinkFlags' []
'cprogram_PATTERN' '%s.exe'
'cshlib_PATTERN' '%s.dll'
'cstlib_PATTERN' 'lib%s.lib'
'cxxprogram_PATTERN' '%s.exe'
'cxxshlib_PATTERN' '%s.dll'
'cxxstlib_PATTERN' 'lib%s.lib'
'define_key' []
'implib_PATTERN' '%s.lib'
'projectDir' 'C:\\\\cygwin\\\\home\\\\vickey\\\\tunebasket\\\\p2p' 
```

编译输出

```
dbPath C:\cygwin\home\vickey\tunebasket\p2p\src\Database
dbPath1 C:\cygwin\home\vickey\tunebasket\p2p\src\Database\util
[ 7/16] cxx: src\Repository\Song.cpp -> build\src\Repository\Song.cpp.1.o
[ 9/16] cxx: src\Repository\Songs.cpp -> build\src\Repository\Songs.cpp.2.o
Songs.cpp
c:\program files (x86)\microsoft visual studio 10.0\vc\include\xlocale(323) : warning C4530: C++ exception handler
used, but unwind semantics are not enabled. Specify /EHsc
c:\cygwin\home\vickey\tunebasket\p2p\src\database\vectoriterator.h(4) : fatal error C1083: Cannot open include file
: 'boost/iterator/iterator_facade.hpp': No such file or directory
Song.cpp
c:\program files (x86)\microsoft visual studio 10.0\vc\include\xlocale(323) : warning C4530: C++ exception handler
used, but unwind semantics are not enabled. Specify /EHsc
c:\cygwin\home\vickey\tunebasket\p2p\src\database\typedefs.h(4) : fatal error C1083: Cannot open include file: 'boo
st/shared_ptr.hpp': No such file or directory
Waf: Leaving directory `C:\cygwin\home\vickey\tunebasket\p2p\build'
Build failed
 -> task in 'Songs.o' failed (exit status 2):
        {task 40568720: cxx Songs.cpp -> Songs.cpp.2.o}
['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\CL.exe', '/nologo', '/IC:\\Program Files (x86)\\M
icrosoft Visual Studio 10.0\\VC\\INCLUDE', '/IC:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\include', ''
, '..\\src\\Repository\\Songs.cpp', '/FC', '/c', '/Fo', 'src\\Repository\\Songs.cpp.2.o']
 -> task in 'Song.o' failed (exit status 2):
        {task 40568368: cxx Song.cpp -> Song.cpp.1.o}
['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\CL.exe', '/nologo', '/IC:\\Program Files (x86)\\M
icrosoft Visual Studio 10.0\\VC\\INCLUDE', '/IC:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\include', ''
, '..\\src\\Repository\\Song.cpp', '/FC', '/c', '/Fo', 'src\\Repository\\Song.cpp.1.o'] 
```

但是这些头文件存在于 boost 主目录中。对于 64 位系统，boost 库是否必须进行不同的编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:16:39.260

查看环境变量后，我发现该`INCLUDES`变量没有 Boost 包含路径：

```
'INCLUDES' ['C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\INCLUDE', 'C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\include']
'INCLUDES_BOOST' 'c:\\boost_1_48_0' 
```

但`INCLUDES_BOOST`变量确实如此。我似乎记得应该是`BOOST_INCLUDES`。检查您是否正确初始化了 waf boost 工具。

如果这不起作用，请尝试在正常包含路径中设置 Boost 包含路径以查看是否找到它们。如果是这样，那么您就知道它是 waf boost 工具的问题，或者它是如何使用的。并尝试执行 waf 并设置详细程度以查看其传递给编译器的包含路径。

如果失败，则可能是前面评论中提到的路径分隔符问题。这是一个让我担心的例子，注意 '\' 和 '/' 都被使用了：

```
'LIBDIR' 'C:\\users\\vickey\\appdata\\local\\temp/lib' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:11:52.010

您似乎忘记在任务生成器声明中使用 use='BOOST'，这就是为什么没有将 boost 包含添加到编译行的原因。

# sql - 获取表格详细信息

> ID：10784369
> 
> 赞同：5
> 
> 时间：2012-05-28T12:04:56.407
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2008-r2

我想从特定数据库中获取该表中的所有表名和字段。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:06:57.157

尝试查看`sys.objects`和`sys.columns`表：

```
SELECT * FROM SYS.OBJECTS
WHERE TYPE = 'U' 
```

将为您提供该数据库中的所有表（U 型）

```
SELECT 'Table name : ' +  so.name, ' Column Name: ' + sc.name FROM SYS.OBJECTS so
INNER JOIN sys.columns sc ON sc.OBJECT_ID = so.OBJECT_ID
WHERE TYPE = 'U' 
```

将为您提供该数据库中的所有表和列名。您可以过滤这些查询并执行`WHERE so.name = 'Your Table'`

[http://msdn.microsoft.com/en-us/library/ms190324.aspx](http://msdn.microsoft.com/en-us/library/ms190324.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T05:47:49.747

使用语法：-sp_help 你的表名

像这样

**sp_help Payroll_Shift**

![在此处输入图像描述](../Images/e7b458ab259dc3d8f0a58629cad8719b.png)

# java - 如何使用 URI 创建 java.io.File 对象？

> ID：10784371
> 
> 赞同：0
> 
> 时间：2012-05-28T12:04:57.430
> 
> 标签：java, servlets, file-upload, java-io

用户可以在我的网站上上传图片。我的 servlet 需要将上传内容写入我的 webapp 的目录图像中。为了将它写入磁盘，我需要创建一个 File() 对象。

一种方法是我可以将完整路径硬编码到类似的东西

```
new File("/usr/tomcat/webapps/ROOT/images/file.jpg") 
```

有没有办法让我可以指定类似`new File("images/file.jpg")`.. 我可以使用 new File (URI uri ) 来完成它，这样我就不必对完整路径进行硬编码。我的 servlet 位于里面`/usr/tomcat/webapps/ROOT/WEB-INF/classes/`

images 文件夹不是目录。它实际上是一个符号链接，它指向 tomcat 之外的文件系统上的另一个目录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:10:50.927

不要将图像存储在您的 webapp 部署目录下：下次重新部署应用程序时，您将丢失所有图像。此外，webapp 并不总是有目录，因为它通常部署为 war 文件。

将您的图像存储在外部位置的绝对路径中，并配置 Tomcat 或其他 Web 服务器以提供来自该位置的图像，或者实现一个提供来自该位置的图像的 servlet。

有关其他指针，请参阅[JSP 中的图像上传和显示。](https://stackoverflow.com/questions/8552776/image-upload-and-display-in-jsp)

编辑：

如果您的问题是 Java 代码中的硬编码绝对路径，请使用您在启动 Tomcat 时设置的系统属性，或 web.xml 中的上下文参数，或使用属性文件来存储路径或您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:10:29.050

您可以从 ServletContext 对象获取 Web 应用程序路径。您从 HttpServletRequest 对象 ( [http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getServletContext%28%29](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getServletContext%28%29) ) 中获取 ServletContext。
请参阅[http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)
将“真实路径”连接到所需的图像文件路径并将其提供为File 构造函数的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:14:33.953

```
 try{    

String directory = //Store it in your Property file and pick it 

String filename= //Generate Dynamic name or any specific format 
   // Create file    
  FileWriter fstream = new FileWriter(directory+filename);   
  BufferedWriter out = new BufferedWriter(fstream);  
    out.write("your content"); }
catch (Exception e){   
  System.err.println("Error: " + e.getMessage()); }
finally {  
   //Close the output stream
     out.close();
 } 
```

如果不经常更改，您可以将目录路径保留在属性文件中。目录名称可以是绝对路径，也可以是硬盘路径，或者您也可以将其保存在您的 webapp 中，但始终建议任何输入文件将其保留在 webapp 之外。

如果您想保持相同的文件名，则文件命名始终取决于您，然后需要处理重复检查，否则指定一些动态格式并命名它。

# postgresql - 在 PostgreSQL 中为两个唯一字段设置约束

> ID：10784377
> 
> 赞同：3
> 
> 时间：2012-05-28T12:05:20.603
> 
> 标签：postgresql, constraints

我是postgres的新手。我想知道，PostgreSQL 为几个唯一值设置约束的方法是什么（这样每一对都是唯一的）。我应该创建一个`INDEX`for`bar`和`baz`字段吗？

```
CREATE UNIQUE INDEX foo ON table_name(bar, baz); 
```

如果不是，那么正确的方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:08:18.967

你可以做你已经想到的事情：**在两个字段上创建一个唯一的约束**。这样，将在幕后创建**唯一索引，您将获得所需的行为。**另外，如果有必要，可以获取该信息`information_schema`以进行一些元数据推断，因为两者都需要是唯一的。我会推荐这个选项。您也可以为此使用触发器，但是对于这个特定要求，**唯一的约束要好得多。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T04:49:55.823

如果每个字段都需要自己唯一，则在每个字段上创建唯一索引。如果它们只需要在组合中是唯一的，则在两个字段中创建一个唯一索引。

如果应该，不要忘记将每个字段设置为 NOT NULL。NULL 从来都不是唯一的，所以可能会发生这样的事情：

```
create table test (a int, b int);
create unique index test_a_b_unq on test (a,b);
insert into test values (NULL,1);
insert into test values (NULL,1); 
```

并且没有错误。因为这两个 NULL 不是唯一的。

# android - 使用 EditText 突出显示 Textview

> ID：10784382
> 
> 赞同：4
> 
> 时间：2012-05-28T12:05:44.850
> 
> 标签：android, textview, android-edittext, highlight

我目前正在制作一个类似 android 应用程序的搜索引擎，我想突出显示从 edittext 到 textview 的搜索词......这是我到目前为止，它只突出显示 textview 中的第一个词

```
TV.setText("Hello World", TextView.BufferType.SPANNABLE);
            Spannable WordtoSpan = (Spannable) TV.getText();
            WordtoSpan.setSpan(new BackgroundColorSpan(0xFFFFFF00), 0, notes.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            TV.setText(WordtoSpan); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T23:08:56.383

我认为您想突出显示用户在 EditText 中键入的 TextView 的特定单词。说**et** 是您的 EditText 并且**tv**是 TextView 对象。使用以下代码：

* * *

```
 String ett =et.getText().toString();
    String tvt =tv.getText().toString();

                int index = tvt.indexOf(ett);

                Spannable WordtoSpan = new SpannableString( tv.getText() );
                if(index != -1)
                {
                WordtoSpan.setSpan(new BackgroundColorSpan(0xFFFFFF00), index, index+ett.length(),Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                tv.setText(WordtoSpan, TextView.BufferType.SPANNABLE);
                }
                else
                tv.setText("The name of our country is Bangladesh"); 
```

* * *

结果如下：

![在此处输入图像描述](../Images/04fd655d53e1cc1832e3589ff05031c7.png)

* * *

这是完整的代码：

```
 public class MotivationalQuotesActivity extends Activity {
        /** Called when the activity is first created. */

   Button next;
   EditText et; 
   TextView tv;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
       et = (EditText) findViewById(R.id.et);
       tv = (TextView) findViewById(R.id.tv);
       tv.setText("The name of our country is Bangladesh");

       next = (Button) findViewById(R.id.button1);
        next.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    String ett =et.getText().toString();
                    String tvt =tv.getText().toString();

                    int index = tvt.indexOf(ett);

                    Spannable WordtoSpan = new SpannableString( tv.getText() );
                    if(index != -1)
                    {
                    WordtoSpan.setSpan(new BackgroundColorSpan(0xFFFFFF00), index, index+ett.length(),Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    tv.setText(WordtoSpan, TextView.BufferType.SPANNABLE);
                    }
                    else
                    tv.setText("The name of our country is Bangladesh");

                }
            });

        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-23T11:28:55.863

它可以帮助

```
 TextView tv = (TextView) findViewById(R.id.hello);
    SpannableString s = new SpannableString(getResources().getString(R.string.linkify));

    Pattern p = Pattern.compile("abc");

     Matcher m = p.matcher(s);

    while (m.find()) {
        int start = m.start();
        int end = m.end();
        s.setSpan(new ForegroundColorSpan(Color.RED), start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
    }
    tv.setText(s); 
```

# java - 如何将 overlayItem 对象添加到数组中？

> ID：10784383
> 
> 赞同：0
> 
> 时间：2012-05-28T12:05:48.227
> 
> 标签：java, android, arrays, list, itemizedoverlay

你能告诉我如何将一个overlayItem对象添加到一个数组中吗？我试过这样：

```
 GeoPoint point = new GeoPoint((int)(Double.parseDouble(arrCoordonate[1])),(int)(Double.parseDouble(arrCoordonate[0])));
    OverlayItem overlayItem = new OverlayItem(point, Double.parseDouble(arrCoordonate[1]) + "", Double.parseDouble(arrCoordonate[0]) +"");
    List<OverlayItem> arrItem[] = overlayItem; 
```

但我得到一个错误：

> 类型不匹配：无法从 OverlayItem 转换为 List[]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:08:08.577

You are mixing arrays and lists. If you don't have to use an array, using a list is easier, in which case you probably meant to write:

```
List<OverlayItem> itemList = new ArrayList<OverlayItem> (); // create an empty list
itemList.add(overlayItem); // add you item to the list 
```

If you want to use an array you would write it like this - but you need to manage the size of the array yourself (which is why using a list as above is easier):

```
OverlayItem[] itemArray = new OverlayItem[10]; //if you only need to insert 10 items
itemArray[0] = overlayItem; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:09:38.667

This is right because look at the decleartion: `OverlayItem overlayItem` and `List<OverlayItem> arrItem[]`.
So if you `arrItem[] = overlayItem` you implicit claim `List<OverlayItem> = OverlayItem`. :)
(I'm not sure but I think it's even "worse" with the `[]` at the end of variable's name. I think the brackets are reserved for arrays thus `List<OverlayItem> arrItem[]` results in an *Array* of *Lists* o.O)

You want to create a new List of OverlayItems and thenn add the item to this list. I'm not sure if you can instantiate `List` directly so I use `ArrayList`:

```
GeoPoint point = new GeoPoint((int)(Double.parseDouble(arrCoordonate[1])),(int)(Double.parseDouble(arrCoordonate[0])));
    OverlayItem overlayItem = new OverlayItem(point, Double.parseDouble(arrCoordonate[1]) + "", Double.parseDouble(arrCoordonate[0]) +"");
    ArrayList<OverlayItem> arrItem = new ArrayList<OverlayItem>();
    arrItem.add(overlayItem); 
```

# python - Python在一行中消除了具有不可散列元素的列表重复项

> ID：10784390
> 
> 赞同：12
> 
> 时间：2012-05-28T12:06:15.510
> 
> 标签：python, list-comprehension

> **可能重复：**
> [Python：从列表列表中删除重复项](https://stackoverflow.com/questions/2213923/python-removing-duplicates-from-a-list-of-lists)

说我有清单

```
a=[1,2,1,2,1,3] 
```

如果 a 中的所有元素都是可散列的（就像在那种情况下一样），这将完成这项工作：

```
list(set(a)) 
```

但是，如果

```
a=[[1,2],[1,2],[1,3]] 
```

?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T12:11:31.987

蟒蛇2

```
>>> from itertools import groupby
>>> a = [[1,2],[1,2],[1,3]]
>>> [k for k,v in groupby(sorted(a))]
[[1, 2], [1, 3]] 
```

也适用于 Python 3，但需要注意的是所有元素都必须是可排序的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:00:56.413

此集合推导适用于 List of Lists 以生成一组元组：

```
>>> {(tuple(e)) for e in a}
set([(1, 2), (1, 3)]) 
```

然后使用它再次将它变成一个列表列表，没有重复：

```
>>> [list(x) for x in {(tuple(e)) for e in a}]
[[1, 2], [1, 3]] 
```

# mongodb - 是否可以在 MongoDB 中对嵌入文档执行条件查询？

> ID：10784392
> 
> 赞同：1
> 
> 时间：2012-05-28T12:06:22.210
> 
> 标签：mongodb, mongoose

例如假设我有以下架构

```
var Comments = new Schema({
    title     : String
  , body      : String
  , date      : Date
});

var BlogPost = new Schema({
    author    : ObjectId
  , title     : String
  , body      : String
  , buf       : Buffer
  , date      : Date
  , comments  : [Comments]
  , meta      : {
      votes : Number
    , favs  : Number
  }
}); 
```

我知道如何通过评论属性查询 BlogPost。如何进行查询，例如获取最新的五条评论？即按 ObjectId 对所有评论进行反向排序，然后得到前五个结果。我是否需要将其分成自己的评论集合来执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T13:22:19.903

希望有一天我们会有[虚拟收藏](https://jira.mongodb.org/browse/SERVER-142)。但在此之前，您必须将评论移动到单独的集合中才能对它们执行完整的查询数组。

或者，您可以使用聚合框架。

# wordpress - 控制 WordPress 中帖子的图像大小

> ID：10784398
> 
> 赞同：2
> 
> 时间：2012-05-28T12:06:46.690
> 
> 标签：wordpress, image-size

我一直在玩 WordPress。作为一名程序员，媒体库对我来说似乎有点陌生——但我很想了解如何使用该框架实现我所需要的。提示 WordPress 爱好者...

我需要强制我的 WordPress 帖子图像具有一定的大小。我不是在谈论缩略图大小，我发现它可以在循环中轻松操作，而是在文字和其他媒体中实际*插入帖子中的图像。*我有一个固定的内容宽度，我希望图像能够反映该宽度（未裁剪）。

显然，我可以运行某种正则表达式来识别图像标签，并用新尺寸替换它们，但是真的没有其他方法可以在帖子中强制图像尺寸，同时在随附的格式化文字中保留位置?

到目前为止，我猜测 WordPress 在所有图像中都使用了一个 CSS 属性。在推动下，我愿意接受这个 - 无论它是什么（需要答案）。但我希望它们可能是一些更复杂的代码（也许我可以放入 functions.php 文件中），这实际上可以强制任何*插入*的帖子图像具有一定的宽度。

对此的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:08:44.747

如果这只是关于限制图像的最大宽度并防止图像溢出，您可以在主题中使用 $content_width 变量：

[https://wordpress.stackexchange.com/questions/6499/how-to-create-a-conditional-content-width-for-a-wordpress-theme](https://wordpress.stackexchange.com/questions/6499/how-to-create-a-conditional-content-width-for-a-wordpress-theme)

# android - 如何使片段在运行时可移动

> ID：10784402
> 
> 赞同：0
> 
> 时间：2012-05-28T12:07:14.160
> 
> 标签：android, xml, layout

嘿，伙计们，我试图让其中一个片段在运行时可移动，这样我就可以通过保留来处理其他片段。以下是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" > 
```

//这个片段需要是可移动的

```
 <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.95"
        android:orientation="vertical" >

        <fragment
            android:id="@+id/fragment2"
            android:name="com.harshal.fragments.Fragment2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="11.02" >

            <!-- Preview: layout=@layout/fragment2 -->
        </fragment>

        <fragment
            android:id="@+id/fragment3"
            android:name="com.harshal.fragments.Fragment3"
            android:layout_width="fill_parent"
            android:layout_height="373dp"
            android:layout_weight="1" >

            <!-- Preview: layout=@layout/mainchart -->
        </fragment>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:49:20.703

```
private void stackAFragmentPresc() {
            // TODO Auto-generated method stub
            Fragment f;
            f = new PrescribeFragment();
            FragmentTransaction ft = getFragmentManager().beginTransaction();
            ft.replace(R.id.main_details_fragment_container, f);
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
            ft.addToBackStack(null);
            ft.commit();
        } 
```

尝试使用此代码，这里 PrescribeFragment() 是您的 Fragmnet 类。和 (main_details_fragment_container) 这个是你在 xml 中的 id。希望这对你有用。谢谢

# c# - 三元“？：运算符”在C#中有错误吗？

> ID：10784405
> 
> 赞同：2
> 
> 时间：2012-05-28T12:07:38.357
> 
> 标签：c#, conditional-operator

为什么我不能运行以下代码？

```
 static int num = 0;
    static void Main(string[] args)
    {
        (num == 0) ? inc() : dec();
    }
    public static void inc()
    {
        num++; 
    }
    public static void dec()
    {
        num--;
    } 
```

为什么 C# 不允许我使用三元 "?:" 运算符来检查条件，然后相应地运行方法而不需要返回任何值？相当于这个：

```
 if (num == 0) inc();
            else dec(); 
```

我不确定相同的规则是否适用于其他语言，例如 Java、C++ 等...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-28T12:09:39.433

> 为什么我不能运行以下代码？

因为您试图违反语言规范。条件运算符的操作数（C# 4 规范中的第 7.14 节）必须是*表达式*- 并且调用返回类型为 的`void`方法明确“仅在语句表达式的上下文中有效”（参见第 7.1 节C# 4 规范）。

条件运算符的目的是提供一个表达式，该表达式是基于条件评估两个表达式之一的结果。*不是*根据条件执行两个*动作*之一。只需使用一个`if`语句。

同样，条件运算符本身也不会形成有效的语句，就像其他各种运算符一样：

```
a + b; // Invalid
x = a + b; // Valid, assignment expression can be an expression-statement 
```

明确来自规范的第 8.6 节：

> 并非所有表达式都允许作为语句。特别是，诸如`x + y`and之类`x == 1`的仅计算值（将被丢弃）的表达式不允许作为语句。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T12:47:43.307

Jon Skeet 的回答完美地记录了 C# 故意走与 C++ 不同的路线。很难说*为什么*，但我会尝试，因为我相信这个问题也值得回答。

C# 与 C++ 和 Java 共享许多语法。在这种情况下，选择了 Java 方式。这既涉及无法编写`2 + 2;`为独立语句，也涉及要求三元运算符返回值。

我相信这两个决定都与消除无法访问的代码有很大关系。`+`运算符 in可以被优化掉，因此`2 + 2`如果它在代码中用于任何目的，那么该目的是不可靠的！静态分析（编译错误或警告）理想情况下应该告诉您在这种情况下似乎存在语义问题，并迫使您删除或重写无法访问的代码。

因此，表达式不再总是语句，需要为 Java/C# 重新定义 C 语法，表达式总是返回值，语句从不返回值。

现在`?:`和`if`-`else`主要区别在于一个是表达式，一个是语句，至少在它们的典型用途上是这样。因此，重新定义的语法只是选择禁止 void 三元组并推荐`if`-`else`为此目的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T12:08:52.430

因为三元运算符基于布尔表达式赋值。它的基本 C# 规范。如果您的方法是 void 返回类型，那么最好使用 if - else 或 switch case。

```
int a = true ? 0 : 1; //Always works

true ? 0 : 1; //This will never work. 
```

或者您对示例进行了一些修改。

```
static int num = 0;

static void Main(string[] args)
{
    num = (num == 0) ? inc(num) : dec(num);
}

public static int inc(int lnum)
{
    return lnum + 1;
}

public static int dec(int lnum)
{
    return lnum - 1;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T12:10:32.020

条件运算符 (?:) 根据布尔表达式的值返回两个值之一。

它的行为方式与您在问题中描述的方式不同。这是关于三元运算符的更多字节

[http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-28T12:14:27.183

但是以这种方式使用它会起作用：

```
static int num = 0;
static void Main(string[] args)
{
    num = (num == 0) ? inc(num) : dec(num);
}
public static int inc(int number)
{
    return number + 1;
}
public static int dec(int number)
{
    return number - 1;
} 
```

# java - Condition for redirecting to different page?

> ID：10784406
> 
> 赞同：-3
> 
> 时间：2012-05-28T12:07:41.727
> 
> 标签：java, servlets

I wrote a servlet whose purpose is to login into the application only if the query executes...now what is the condition to be used for invalid username and id...I'm unable to write the condition..pls help me out...the servlet is...

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        try{
            Class.forName("oracle.jdbc.driver.OracleDriver");
            Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl ","scott","tiger");
            System.out.println("cnnection est");
        int Id = Integer.parseInt(request.getParameter("id"));
        String Name=request.getParameter("firstname");
        boolean b=true;

        //Connection con =JdbcConnectionUtil.getConnection();

        PreparedStatement pst = con.prepareStatement("select * from login where id=? and firstname=?");
        pst.setInt(1, Id);
        pst.setString(2, Name);

        ResultSet rs = pst.executeQuery();
        if(rs!=null && rs.next())
        {

        //while(rs.next()){
            PrintWriter pw = response.getWriter();
            System.out.println("here");
            pw.println("hello");
            pw.println(rs.getInt(1));
            pw.println(rs.getString(2));
            pw.println(rs.getString(3));

        }
        //}
        else
        {
            RequestDispatcher rd = request.getRequestDispatcher("/LoginFailed.html");

        }
//      

        }
        catch(Exception ex){

            ex.printStackTrace();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:39:49.340

首先检查正确的参数，然后执行逻辑。也不要忘记关闭语句和连接以避免内存泄漏。

这是重构的代码：

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    //get parameters from request
    try {
        String idParam = request.getParameter("id");
        String name = request.getParameter("firstname");

        //check if request contains such parameters
        if (idParam == null || name == null) {
            throw new IllegalArgumentException(
                    "Id and Name parameters must not be null.");
        }

        //try casting idParam to int
        Integer id = null;
        try {
            id = Integer.parseInt(idParam);
        } catch (NumberFormatException nfe) {
            throw nfe;
        }

        PreparedStatement pst = null;
        Connection con = null;
        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            con = DriverManager.getConnection(
                    "jdbc:oracle:thin:@localhost:1521:orcl ", "scott", "tiger");

            pst = con.prepareStatement(
                    "select * from login where id=? and firstname=?");
            pst.setInt(1, id);
            pst.setString(2, name);

            //check if result returned any data
            ResultSet rs = pst.executeQuery();
            if (!rs.next()) {
                throw new Exception(
                        "No such user for id: " + id + " and name: " + name);
            }

            PrintWriter pw = response.getWriter();
            pw.println("hello");
            pw.println(rs.getInt(1));
            pw.println(rs.getString(2));
            pw.println(rs.getString(3));

        } catch (Exception ex) {
            throw ex;
        } finally {
            try {
                if (pst != null) {
                    pst.close();
                }
                if (con != null) {
                    con.close();
                }
            } catch (SQLException sqle) {
                throw sqle;
            }
        }
    } catch (Exception ex) {
        ex.printStackTrace();
        RequestDispatcher rd = request.getRequestDispatcher("/LoginFailed.html");
        rd.forward(request, response);
    }
} 
```

我认为这样的事情是合适的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:16:08.290

使用`rd.forward`将解决我认为的问题。

[如何将请求从 Servlet 转发到 JSP](http://www.java-tips.org/java-ee-tips/javaserver-pages/how-to-forward-requests-from-servlet-t.html)

# swig - SWIG：生成附加（手动）Java 类

> ID：10784407
> 
> 赞同：1
> 
> 时间：2012-05-28T12:07:42.270
> 
> 标签：swig

我正在使用 SWIG 为我的 DLL 生成 Java JNI 包装器。

作为其中的一部分，我想生成一个自定义异常类，但我想自己为我的异常类提供完整的 Java 类实现。

我当然可以将我的 Java 类放在一个单独的文件中，但是是否可以将这样的手动 Java 类嵌入到 SWIG 脚本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:39:45.693

除非该类是某种内部类，否则您几乎可以将其编写为单独的文件，因为这是您编译 Java 时需要的。

我有点困惑，为什么您要编写自己的纯 Java 异常类 - 与 SWIG 相关的正常事情是派生自`std::exception`，即使它是通过`%inline`指令并将 C++ 异常层次结构与 Java 自然合并为自由。

如果您真的想要（尽管我个人永远不会这样做）从 SWIG 接口生成纯 Java 类，则可以使用一种解决方法：

```
%module test

%nodefaultctor MyException;
%typemap(javabody) MyException %{
  // Java stuff goes here (or in javacode typemap)
%}
%typemap(javafinalize) MyException ""
%typemap(javadestruct) MyException ""

struct MyException {}; 
```

生成：

```
public class MyException {
  // stuff goes here

} 
```

但由于这显然是一个丑陋的 hack，我强烈建议完全避免它，而只是在你的源代码分发中像往常一样编写类。

# php - select rows if the sum of a field in the table is less than X for each date in the table

> ID：10784409
> 
> 赞同：0
> 
> 时间：2012-05-28T12:07:47.950
> 
> 标签：php, mysql, sql

this is my first question so forgive me if I am doing this wrong. I have been trying to think up a query for the above described problem and I can't seem to get anywhere.

```
SELECT SUM(slots) AS totals,date 
  FROM 
     (
         SELECT start, end, date, slots 
           FROM 1000_appointments 
          WHERE date > NOW() AND HOUR(end) <= 12 AND employeeID='1000001'
     ) q 
 GROUP BY date HAVING totals < 6 
```

This gets me the days where the total of slots is less than 6 and that is great but I also need all rows for that date and, if at all possible, dates that have no entries in the table. I could possible do the sorting and listing in php but I figured there might be a more elegant way of doing this within mysql.

I hope this describes the problem well enough. The reasoning behind this is that I need to find dates where "slots" are still available ie dates that aren't booked out.

Thank you, for your help in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:29:17.753

包装将为您获取所有行：

```
SELECT start, end, a.date, slots, totals 
        FROM 1000_appointments a
        JOIN
        (SELECT SUM(slots) AS totals,date
            FROM 1000_appointments 
            WHERE date > NOW() AND HOUR(end) <= 12 AND employeeID='1000001'
            GROUP BY date HAVING totals < 6
        ) t 
        where a.date = t.date 
```

要得到不在表格中的日期并不容易。它可能需要使用游标。我建议在您的 php 代码中执行此操作。

# jquery - Bind gridview using Jquery

> ID：10784416
> 
> 赞同：0
> 
> 时间：2012-05-28T12:08:01.757
> 
> 标签：jquery, gridview, binding

I'm using two `gridviews`. The first one displays `student name` and `id`. Once the user clicks on the student `id`, a pop up appears which has the `Student_details` grid that contains all the details of that particular student. I would like to load the `Student_details` using jQuery. I do not want server side code. Is it possible?

Thanks for your recommendations.

# .htaccess - htaccess 和图像缓存

> ID：10784417
> 
> 赞同：0
> 
> 时间：2012-05-28T12:08:05.067
> 
> 标签：.htaccess, codeigniter, codeigniter-url

需要帮助，我想创建一个图像访问缓存，url 处的示例图像

> example.com/caching/m_images.jpg

如果该图像存在，则显示图像，但如果不存在，则可能使用 .htaccess 脚本在以下位置运行图像功能：

> example.com/recaching/m_images.jpg

在缓存文件夹中创建具有自定义大小的新图像，然后再次访问图像 url。如何做到这一点，或者有另一个更好的解决方案？谢谢。

ps 我已经有很少的脚本 htaccess 来删除 'index.php?' 来自 codeigniter 网址

```
重写引擎开启
RewriteCond $1 !^(index\.php|js|css|缓存)
重写规则 ^(.*)$ index.php/$1 [L]
```

所以函数的真正网址是：

> example.com/index.php?recaching/m_images.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:02:18.303

怎么样：

```
RewriteEngine on
RewriteRule ^images/(.*)$ index.php/recaching/$1 [L,QSA]
RewriteCond $1 !^(index\.php|js|css|caching)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

上面的“应该”（我没有测试过）重定向图像文件夹中的任何请求的文件（假设你有一个图像文件夹）并将路径传递给重新缓存的路径。

`file_exists`然后，您可以使用`readfile`并将`header`文件写入浏览器（如果它不存在）。

IE

```
function recaching($path)
{
    $tmpPath = FCPATH . 'images/' . $path;
    if(!file_exists($tmpPath))
    {
        // change $tmpPath to a file that exists, i.e. a 404 image
        // or if you are generating an image when one doesn't exist
        // create it here.
    }
    $info = getimagesize($tmpPath);
    if($info !== false)
    {
        header('content-type: ' . $info['mime']);
        readfile($tmpPath);
    }
    else
    {
        die('There was a problem rendering the image.');
    }
} 
```

# sql-server - Sql Server Query Date Issue

> ID：10784421
> 
> 赞同：0
> 
> 时间：2012-05-28T12:08:17.293
> 
> 标签：sql-server, smalldatetime

This executes correctly: (It is weird that I needed to use '' by the date for it to actually execute)

```
DECLARE 
@cols AS NVARCHAR(MAX),
@query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.statcolumnname) FROM [85137_PHY_Long_PG] c FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

set @query = 'SELECT statdate, ' + @cols + ' from 
        (
            select statdate, statcolumnname, statcolumnvalue
            from [85137_PHY_Long_PG]
       ) x
        pivot 
        (
             min(statcolumnvalue)
            for statcolumnname in (' + @cols + ')
        ) p WHERE statdate BETWEEN ''2012-04-01 12:15:00'' AND ''2012-04-01 12:45:00''      ORDER BY statdate'

execute(@query) 
```

Now I want to replace the dates with variables:

```
DECLARE 
@cols AS NVARCHAR(MAX),
@query  AS NVARCHAR(MAX),
@from  AS NVARCHAR(MAX),
@to  AS NVARCHAR(MAX);

set @from = '2012-04-01 12:15:00'
set @to = '2012-04-01 12:45:00'

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.statcolumnname) FROM [85137_PHY_Long_PG] c FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

set @query = 'SELECT statdate, ' + @cols + ' from 
        (
            select statdate, statcolumnname, statcolumnvalue
            from [85137_PHY_Long_PG]
       ) x
        pivot 
        (
             min(statcolumnvalue)
            for statcolumnname in (' + @cols + ')
        ) p WHERE statdate BETWEEN ''+@from+'' AND ''+@to+'' ORDER BY statdate'

execute(@query) 
```

I get the following error:**Conversion failed when converting character string to smalldatetime data type**

Changing the where statement to the following:

```
WHERE statdate BETWEEN ''+convert(smalldatetime,@from)+'' AND ''+convert(smalldatetime,@to)+'' ORDER BY statdate' 
```

Still gives me the same error, just can't seem to replace the dates as variables

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:36:07.013

'' 并不奇怪；它是一种在 varchars 中启用撇号的符号。

连接时，请确保您没有尝试连接 (n)varchars 和 (n)chars 以外的任何内容，因为 Sql Server 会尝试将它们转换为其他数据类型；在您的情况下，在 smalldatetime 中。您可以通过在连接之前/期间将参数日期显式转换为 nvarchars 来避免此麻烦，但更好的解决方案是使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)和参数。

如果您在查询中保留参数：

```
set @query = 'SELECT statdate, ' + @cols + ' from 
    (
        select statdate, statcolumnname, statcolumnvalue
        from [85137_PHY_Long_PG]
   ) x
    pivot 
    (
         min(statcolumnvalue)
        for statcolumnname in (' + @cols + ')
    ) p WHERE statdate BETWEEN @from AND @to ORDER BY statdate' 
```

您可以使用参数执行它：

```
exec sp_executesql @query, N'@from datetime, @to datetime', @from=@from_variable, @to=@to_variable 
```

其中@from_variable 和@to_variable 是前面批量定义的日期时间变量。

**更新：**

如果您的最终目标是将此代码包装在存储过程中，这里有一个模板：

```
create proc MyProc (@dateFrom smalldatetime, @dateTo smalldatetime)
as
DECLARE 
@cols AS NVARCHAR(MAX),
@query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.statcolumnname) 
  FROM [85137_PHY_Long_PG] c 
   FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')
set @query = 'SELECT statdate, ' + @cols + ' from 
    (
        select statdate, statcolumnname, statcolumnvalue
        from [85137_PHY_Long_PG]
   ) x
    pivot 
    (
         min(statcolumnvalue)
        for statcolumnname in (' + @cols + ')
    ) p WHERE statdate BETWEEN @from AND @to ORDER BY statdate'

exec sp_executesql @query, N'@from smalldatetime, @to smalldatetime', @from=@dateFrom, @to=@dateTo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:07:29.537

特此解决：

```
DECLARE 
@cols AS NVARCHAR(MAX),
@query  AS NVARCHAR(MAX),
@internal_fromdate  AS SMALLDATETIME,
@internal_todate  AS SMALLDATETIME;

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.statcolumnname) FROM [85137_PHY_Long_PG] c FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

set @internal_fromdate = '2012-04-01 12:15:00';
set @internal_todate = '2012-04-01 12:45:00';

set @query = 'SELECT statdate, ' + @cols + ' from 
        (
            select statdate, statcolumnname, statcolumnvalue
            from [85137_PHY_Long_PG]
       ) x
        pivot 
        (
             min(statcolumnvalue)
            for statcolumnname in (' + @cols + ')
        ) p  WHERE statdate BETWEEN @FromDate AND @ToDate ORDER BY statdate'

exec sp_executesql @query, N'@FromDate SMALLDATETIME, @ToDate SMALLDATETIME', @FromDate=@internal_fromdate, @ToDate=@internal_todate 
```

**更新**

好的，我尝试了以下变体：

```
create proc MyProc9 (@tableName varchar,@dateFrom smalldatetime, @dateTo smalldatetime)
AS
DECLARE 
@cols AS NVARCHAR(MAX),
@query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.statcolumnname) 
FROM [85137_PHY_Long_MP] c 
FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')
set @query = 'SELECT statdate, ' + @cols + ' from 
(
    SELECT statdate, statcolumnname, statcolumnvalue
    from @table
) x
pivot 
(
     min(statcolumnvalue)
    for statcolumnname in (' + @cols + ')
) p WHERE statdate BETWEEN @from AND @to ORDER BY statdate'

exec sp_executesql @query, N'@table varchar,@from smalldatetime, @to smalldatetime', @table=@tableName,@from=@dateFrom, @to=@dateTo 
```

错误：必须声明表变量“@table”。

在@query 字符串中尝试了“+@tableName+”：“8”附近的语法不正确。

在@query 字符串中尝试了“+QUOTENAME(@tableName)+”：无效的对象名称“8”。

在@query 字符串中尝试了 ['+@tableName+']：无效的对象名称“8”。

在@query 字符串中尝试了 QUOTENAME(@table)：无效的对象名称“8”。

在@query 字符串中尝试了 [85137_PHY_Long_MP]：工作正常，只是想替换它。

在 @query 字符串中尝试了 [@tableName]：无效的对象名称“@tableName”。

在@query 字符串中尝试了@tableName：必须声明表变量“@tableName”。

我不明白如何解决问题

# cxf - 接受 CXF 中的压缩请求

> ID：10784422
> 
> 赞同：1
> 
> 时间：2012-05-28T12:08:18.277
> 
> 标签：cxf

我正在使用 Apache CXF 开发 JAX-RS 服务。我的服务正在运行，但我想将其更改为接受压缩（gzipped）请求。

我做了一些谷歌搜索并将其添加到我的`beans.xml`文件中：

```
<bean id="GZIPInInterceptor" class="org.apache.cxf.transport.common.gzip.GZIPInInterceptor"/>
<bean id="compressGZIPFeature" class="org.apache.cxf.transport.http.gzip.GZIPFeature"/>
<cxf:bus>
    <cxf:inInterceptors>
        <ref bean="GZIPInInterceptor"/>
    </cxf:inInterceptors>
    <cxf:features>
        <ref bean="compressGZIPFeature"/>
        <cxf:logging/>
    </cxf:features>
</cxf:bus> 
```

但是当我使用压缩请求从客户端应用程序调用服务时，我在日志文件中收到错误**Invalid UTF-8 start byte 0x8b ：**

```
28-May-2012 12:59:42 org.apache.cxf.interceptor.AbstractLoggingInterceptor log
INFO: Inbound Message
----------------------------
ID: 5
Address: http://localhost:8080/ ... /
Encoding: ISO-8859-1
Http-Method: POST
Content-Type: application/xml
Headers: {Accept=[application/xml], connection=[Keep-Alive], content-encoding=[g
zip], Content-Length=[246], content-type=[application/xml], expect=[100-continue
], host=[localhost:8080]}
Payload: ?     ? ý¢`?I?%&/m-{¦J§JÎÓt?`?$Ï?@?ý-?-µ?ý?iG#)½*?-eVe]f?@¦Ý?+¸Ì{´¢¸Ì{´
¢¸¦;?N'¸¯ ?\fd?l÷+J++?!?¬+??~|??"? ?´?ez?ÎMQ-?¹hw+¾Q?/ºi¼X^|÷Ð¦=¯>°Þ¸8z|Íµ?ú4}|·
???¡-÷t+ÍÎgO?÷vv¸v÷w÷´¦ tg¦¸-/Õ+´Ý}¦¦w?¦+C¤/²®_·dþÚ¦²{;'??>³¶ßÚ+¦'¤?Ý|·õ¦±¦¦¦?O?
¯Ý>¥¦?·°.w
--------------------------------------
28-May-2012 12:59:43 org.apache.cxf.jaxrs.provider.AbstractJAXBProvider handleJA
XBException
WARNING: javax.xml.bind.UnmarshalException
 - with linked exception:
[com.ctc.wstx.exc.WstxIOException: Invalid UTF-8 start byte 0x8b (at char #2, by
te #-1)]
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStrea
mException(UnmarshallerImpl.java:426)

...

28-May-2012 12:59:43 org.apache.cxf.interceptor.AbstractLoggingInterceptor log
INFO: Outbound Message
---------------------------
ID: 5
Response-Code: 400
Content-Type: text/plain
Headers: {Content-Type=[text/plain], Date=[Mon, 28 May 2012 11:59:43 GMT]}
Payload: JAXBException occurred : Invalid UTF-8 start byte 0x8b (at char #2, byt
e #-1). Invalid UTF-8 start byte 0x8b (at char #2, byte #-1).
-------------------------------------- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:32:42.383

在 CXF 中，您可以使用

@GZIP

用于压缩消息的注释

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T15:00:34.880

答案是拦截器没有从 XML 文件中获取。我尝试在我的服务方法上方添加此注释并开始工作：

```
@org.apache.cxf.interceptor.InInterceptors (interceptors = {"org.apache.cxf.transport.common.gzip.GZIPInInterceptor" }) 
```

# html - 在不使用ajax的情况下刷新rails中的页面

> ID：10784428
> 
> 赞同：1
> 
> 时间：2012-05-28T12:08:36.623
> 
> 标签：html, ruby-on-rails, ajax, rendering

我一直在试图弄清楚如何在不刷新 application.html.erb 的情况下在 rails 中呈现页面。我只想刷新 <=% yeald %> 部分中的部分，而不是其他部分。我使用 ajax 进行了此操作，但我在我的页面（mathjax）上使用了乳胶代码，除非刷新页面，否则无法编译，因此 ajax 在我的情况下不起作用。

我已经搜索了教程，但还没有找到一个明确的方法来做到这一点。那么这是否可能，在不使用 ajax 的情况下将页面呈现为部分？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:17:55.980

如果您想重新加载网页的一部分，您只有两个选项 - 使用 Javascript (AJAX)，或使用`iframe`.

如果您使用 Javascript 更新页面的某些部分，您需要告诉 MathJax 在您更改页面后重新解析页面。

为此，请在此处查看相关问题：
[如何召回或重新启动 MathJax？](https://stackoverflow.com/questions/5200545/mathjax-js-how-to-recall-restart-it)

# java - Won't this just break out of the if statement?

> ID：10784430
> 
> 赞同：0
> 
> 时间：2012-05-28T12:08:43.753
> 
> 标签：java, if-statement, case, break

So basically given the below code.

When `action = 2;` and `mode = 1` Will `i` ever be set to 2?

I am working on a colleagues code, and it is written like this, but I thought that break would just skip the if and continue the rest of `case 2`. So basically the if statement is pointless.

```
switch(action){

   case 1: i = 1; break;

   case 2: if(mode == 1)
           {
              break;
           }

           i = 2;
           break;

   case 3: i = 3; break; 
```

Ive rewritten this as:

```
 case 2: if(mode != 1)
            i = 2;
         break; 
```

But it is not the only place, and some more complex. If im going to refactor it I need some info that I am correct.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T12:10:25.060

There's no such a thing as an "if loop." Break can never refer to an "if" statement.

See [Wasserman's answer](https://stackoverflow.com/a/10784493/52573) for a pointer to the language specification.

Also, assuming that 1 <= action <= 3, your code simplifies to:

```
if(! (action == 2 && mode == 1)) {
     i = action;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:13:00.863

[JLS 第 14.15 节](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#6842)：

> break 语句将控制权转移到封闭语句之外。
> 
> 断句：
> 
> ```
>  break Identifieropt ; 
> ```
> 
> 没有标签的 break 语句试图将控制转移到最里面的封闭方法或初始化程序块的*`switch`、`while`、`do`或`for`语句* （强调添加）；此语句称为中断目标，然后立即正常完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:13:43.783

如果这是您想知道的，那么您的重构是正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T12:13:54.120

if `action == 2`and `mode == 1`,`i = 2`不会被执行（为什么不测试呢？会比在这里问更快）。

但是您的改进无论如何都更清洁，我会使用它。

# java - How to make the jsp page not to show the previous value set in session?

> ID：10784431
> 
> 赞同：0
> 
> 时间：2012-05-28T12:08:44.703
> 
> 标签：java, jsp, servlets

Below is my jsp file, once I process some value and display the value in jsp page. The value comes from servlet, but next time when I just enter the url the values are displayed which were there previously, so please suggest how to go about doing this?

The jsp code is :

```
<%@ page contentType="text/html"%>
<%@ page pageEncoding="UTF-8"%>
<%@ page import="java.util.*"%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<%
       Map<String, String> reportMap = new LinkedHashMap<String, String>();
        if (session.getAttribute("leaveMap") != null) {
            reportMap = (Map<String,String>) session.getAttribute("leaveMap");
        }
        String classname="",employeeid="",employeename="";
        int style =0,sno=1;
%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Comparing access-card Data with leave manager Data</title>
<link href="css/sling.css" rel="stylesheet" type="text/css" />
<script language="JavaScript" src='script/cal.js'></script>
<!-- Below imports for Blanket purpose-->
<script src='script/blanket.js'></script>

<script>
    var _validFileExtensions = [".xls"];

    function Validate(oForm) {
        var arrInputs = oForm.getElementsByTagName("input");
        var filename = document.getElementById("myFile");
        if(filename.value.length ==0){
            alert("Please select the file to upload");
            return false;
        }else{
            for (var i = 0; i < arrInputs.length; i++) {
                var oInput = arrInputs[i];
                if (oInput.type == "file") {
                    var sFileName = oInput.value;
                    if (sFileName.length > 0) {
                        var blnValid = false;
                        for (var j = 0; j < _validFileExtensions.length; j++) {
                            var sCurExtension = _validFileExtensions[j];
                            if (sFileName.substr(sFileName.length - sCurExtension.length, sCurExtension.length).toLowerCase() == sCurExtension.toLowerCase()) {
                                blnValid = true;
                                break;
                            }
                        }

                        if (!blnValid) {
                            alert("Sorry, " + sFileName + " is invalid, allowed extensions are: " + _validFileExtensions.join(", "));

                            return false;
                        }
                    }
                }
            }
        }

        return true;
    }

        function isValidDate(element){
            var elementValue = element.value;
            var daysInMonth = DaysArray(12);
            var pos1=elementValue.indexOf(dtCh)
            var pos2=elementValue.indexOf(dtCh,pos1+1)
            var strDay=elementValue.substring(0,pos1)
            var strMonth=elementValue.substring(pos1+1,pos2)
            var strYear=elementValue.substring(pos2+1)
            strYr=strYear
            if (strDay.charAt(0)=="0" && strDay.length>1)
                strDay=strDay.substring(1)
            if (strMonth.charAt(0)=="0" && strMonth.length>1)
                strMonth=strMonth.substring(1)
            for (var i = 1; i <= 3; i++) {
                if (strYr.charAt(0)=="0" && strYr.length>1) strYr=strYr.substring(1)
            }
            month=parseInt(strMonth)
            day=parseInt(strDay)
            year=parseInt(strYr)
            if(elementValue!="") {
                if (pos1==-1 || pos2==-1){
                    return errorMessage("The date format should be : dd/mm/yyyy", element);
                }
                if (strMonth.length<1 || month<1 || month>12){
                    return errorMessage("Please enter a valid month", element);
                }
                if (strDay.length<1 || day<1 || day>31 || (month==2 && day>daysInFebruary(year)) || day > daysInMonth[month]){
                    return errorMessage("Please enter a valid day", element);
                }
                if (strYear.length != 4 || year==0 || year<minYear || year>maxYear){
                    return errorMessage("Please enter a valid 4 digit year between "+minYear+" and "+maxYear, element);
                }
                if (elementValue.indexOf(dtCh,pos2+1)!=-1 || isInteger(stripCharsInBag(elementValue, dtCh))==false){
                    return errorMessage("Please enter a valid date", element);
                }
            }
            return true;
        }
        function formatDate(textBoxObj) {
            var elementValue = textBoxObj.value;
            for (i=0; i<elementValue.length; i++){
                if(((i==2)||(i==5))){}
                else {
                    var c = elementValue.charAt(i);
                    if (((c < "0") || (c > "9"))){
                        alert("Only Numbers Are Allowed");
                        textBoxObj.value='';
                        return false;
                    }
                }
            }
            if((elementValue.length==2)||(elementValue.length==5)){
                textBoxObj.value=elementValue+'/';
            }
            return true;
        }
        function isValidDate(element){
            var elementValue = element.value;
            var daysInMonth = DaysArray(12);
            var pos1=elementValue.indexOf(dtCh)
            var pos2=elementValue.indexOf(dtCh,pos1+1)
            var strDay=elementValue.substring(0,pos1)
            var strMonth=elementValue.substring(pos1+1,pos2)
            var strYear=elementValue.substring(pos2+1)
            strYr=strYear
            if (strDay.charAt(0)=="0" && strDay.length>1)
                strDay=strDay.substring(1)
            if (strMonth.charAt(0)=="0" && strMonth.length>1)
                strMonth=strMonth.substring(1)
            for (var i = 1; i <= 3; i++) {
                if (strYr.charAt(0)=="0" && strYr.length>1) strYr=strYr.substring(1)
            }
            month=parseInt(strMonth)
            day=parseInt(strDay)
            year=parseInt(strYr)
            if(elementValue!="") {
                if (pos1==-1 || pos2==-1){
                    return errorMessage("The date format should be : dd/mm/yyyy", element);
                }
                if (strMonth.length<1 || month<1 || month>12){
                    return errorMessage("Please enter a valid month", element);
                }
                if (strDay.length<1 || day<1 || day>31 || (month==2 && day>daysInFebruary(year)) || day > daysInMonth[month]){
                    return errorMessage("Please enter a valid day", element);
                }
                if (strYear.length != 4 || year==0 || year<minYear || year>maxYear){
                    return errorMessage("Please enter a valid 4 digit year between "+minYear+" and "+maxYear, element);
                }
                if (elementValue.indexOf(dtCh,pos2+1)!=-1 || isInteger(stripCharsInBag(elementValue, dtCh))==false){
                    return errorMessage("Please enter a valid date", element);
                }
            }
            return true;
        }
        function DaysArray(n) {
            for (var i = 1; i <= n; i++) {
                this[i] = 31
                if (i==4 || i==6 || i==9 || i==11) {this[i] = 30}
                if (i==2) {this[i] = 29}
            }
            return this
        }
        <!-- Begin Script for progressbar
        var progressEnd = 15; // set to number of progress <span>'s.
        var progressColor = 'blue'; // set to progress bar color
        var progressInterval = 1000; // set to time between updates (milli-seconds)

        var progressAt = progressEnd;
        var progressTimer;

        function progress_clear() {
            for (var i = 1; i <= progressEnd; i++) document.getElementById('progress'+i).style.backgroundColor = 'transparent';
            progressAt = 0;
        }

        function progress_update() {
            document.getElementById("statusmessage").style.display ="";
            progressAt++;
            if (progressAt > progressEnd) progress_clear();
            else document.getElementById('progress'+progressAt).style.backgroundColor = progressColor;
            progressTimer = setTimeout('progress_update()',progressInterval);
        }

        function progress_stop() {
             document.getElementById("statusmessage").style.display ="none";
             clearTimeout(progressTimer);
             progress_clear();
        }
        // End for progressbar-->

         function submitform(){
                var oForm = document.getElementById('accesscarddata');

                var startdate = document.getElementById("startdate").value;
                var enddate = document.getElementById("enddate").value;
                if(startdate == ""){
                    alert("Please select Start Date.");
                    return false;
                }
                if(enddate == ""){
                    alert("Please select End Date.");
                    return false;
                }
                if(Validate(oForm)){
                    progress_update();
                    document.forms["accesscarddata"].submit();
                }
      }
    </script>
</head>

<body topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0"
    marginheight="0" marginwidth="0" bgcolor="#FFFFFF">
    <form name="accesscarddata" id="accesscarddata"
        action="LeaveReportServlet" method="post"
        enctype="multipart/form-data">

        <table border="0" width="100%" cellspacing="0" cellpadding="0"
            background="images/topbkg.gif">
            <tr>
                <td width="50%" valign="top"><img border="0"
                    src="images/logo.gif" width="145" height="66"></td>
                <td width="50%" valign="top">
                    <p align="right">
                        <img border="0" src="images/topright.gif" width="315" height="66">
                </td>
            </tr>
        </table>
        <table border="0" width="100%" cellspacing="0" cellpadding="0"
            background="img/blackline.gif">
            <tr>
                <td width="100%">
                    <p align="left">
                        <font color="#F0D8B8" face="Arial" size="2"><b>&nbsp;&nbsp;
                                slingemp&nbsp;&nbsp; |&nbsp;&nbsp; slingemp&nbsp;&nbsp;
                                |&nbsp;&nbsp; slingemp&nbsp;&nbsp; |&nbsp;&nbsp;
                                slingemp&nbsp;&nbsp; |&nbsp;&nbsp; slingemp&nbsp;&nbsp;
                                |&nbsp;&nbsp; slingemp&nbsp;&nbsp; |&nbsp;&nbsp; slingemp</b></font>
                </td>
            </tr>
        </table>
        <p align="center" style="margin-left: 20">
            <font face="Arial" color="#000000" size="4">Attendance Process</font>
        </p>
<div id="statusmessage" style="display:none">
        <table align="center" >
            <tr>
                <td>
                    <div style="font-size:8pt;padding:2px;border:solid black 1px">
                        <span id="progress1">&nbsp; &nbsp;</span>
                        <span id="progress2">&nbsp; &nbsp;</span>
                        <span id="progress3">&nbsp; &nbsp;</span>
                        <span id="progress4">&nbsp; &nbsp;</span>
                        <span id="progress5">&nbsp; &nbsp;</span>
                        <span id="progress6">&nbsp; &nbsp;</span>
                        <span id="progress7">&nbsp; &nbsp;</span>
                        <span id="progress8">&nbsp; &nbsp;</span>
                        <span id="progress9">&nbsp; &nbsp;</span>
                        <span id="progress10">&nbsp; &nbsp;</span>
                        <span id="progress11">&nbsp; &nbsp;</span>
                        <span id="progress12">&nbsp; &nbsp;</span>
                        <span id="progress13">&nbsp; &nbsp;</span>
                        <span id="progress14">&nbsp; &nbsp;</span>
                        <span id="progress15">&nbsp; &nbsp;</span>
                    </div>
                </td>
           </tr>
    </table>
</div>
        <p align="left" style="margin-left: 20">
            <font face="Arial" size="2" color="#000000">&nbsp;</font>
        </p>
        <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr>
                <td width="25%" align="left">&nbsp;</td>
                <td width="1%" align="left">&nbsp;</td>
                <td width="64%" align="left">
                    <table border="0" width="100%" cellspacing="0" cellpadding="0">
                        <tr class="darkrow">
                            <td width="2%" align="left">*</td>
                            <td width="20%" align="left">Start Date</td>
                            <td width="58%" align="left"><input type="text"
                                name="startdate" id="startdate" maxlength="10"
                                onkeyup="formatDate(this)" onblur="isValidDate(this)" /> <img
                                src="images/calpicker.png" name="image" id="startdate"
                                onclick="scwShow(document.forms[0].startdate,event,'');return false;">
                            </td>
                            <td width="20%" align="left">&nbsp;</td>
                        </tr>
                        <tr class="lightrow">
                            <td width="2%" align="left">*</td>
                            <td width="20%" align="left">End Date</td>
                            <td width="58%" align="left"><input type="text"
                                name="enddate" id="enddate" maxlength="10"
                                onkeyup="formatDate(this)" onblur="isValidDate(this)" /> <img
                                src="images/calpicker.png" name="image" id="startdate"
                                onclick="scwShow(document.forms[0].enddate,event,'');return false;">
                            </td>
                            <td width="20%" align="left">&nbsp;</td>
                        </tr>
                        <tr class="darkrow">
                            <td width="2%" align="left">*</td>
                            <td width="20%" align="left">Select file</td>
                            <td width="58%" align="left"><input type="file"
                                name="myFile" id="myFile" /></td>
                            <td width="20%" align="left">&nbsp;</td>
                        </tr>
                        <tr class="lightrow">
                            <td width="2%" align="left">&nbsp;</td>
                            <td width="20%" align="left">&nbsp;</td>
                            <td width="58%" align="left"><input type="button"
                                value="Process" onclick="submitform()" /></td>
                            <td width="20%" align="left">&nbsp;</td>
                        </tr>
                        <%
                           if(reportMap.size()>0){ %>
                           <script>
                             progress_stop();
                           </script>
                            <tr class="lightrow">
                                <td width="2%" class="title_sub" align="center">S.No</td>
                                <td width="20%" class="title_sub" align="center">EmployeeID</td>
                                <td width="58%" class="title_sub" align="left">EmployeeName</td>
                                <td width="20%" class="title_sub" align="left">Action</td>
                            </tr>
                            <%
                                        Iterator<Map.Entry<String, String>> entries = reportMap.entrySet().iterator();
                                        while (entries.hasNext()) {
                                            Map.Entry<String, String> entry = entries.next();
                                            if (style % 2 == 0) {
                                                 classname = "darkrow";
                                             } else {
                                                 classname = "lightrow";
                                             }
                                            employeeid = entry.getKey();
                                            employeename = entry.getValue();
                                        %>
                            <tr class='<%=classname %>'>
                                <td width="2%"  align="center"><%=sno %></td>
                                <td width="20%" align="center"><%=employeeid %></td>
                                <td width="58%" align="left"><%=employeename %></td>
                                <td width="20%" align="left"><a href="#" alt='<%=employeeid%>' title='<%=employeeid%>'>sendmail</a></td>
                            </tr>
                            <%
                                sno++;
                                style++;

                                        }

                                     }
                                     %>
                    </table>
                </td>
                <td width="10%" align="right">&nbsp;</td>
            </tr>

        </table>
        <p align="left" style="margin-left: 20">
            <font face="Arial" size="2" color="#000000">&nbsp;</font>
        </p>
        <p align="left" style="margin-left: 20">
            <font face="Arial" color="#000000" size="4">&nbsp;</font>
        </p>
        <p align="left" style="margin-left: 20">
            <font face="Arial" size="2" color="#000000">&nbsp;</font>
        </p>
        <p align="left" style="margin-left: 20">
            <font face="Arial" size="2" color="#000000">&nbsp;</font>
        </p>
        <p align="left" style="margin-left: 20">
            <font face="Arial" size="2" color="#000000">&nbsp;</font>
        </p>
        <p align="center" style="margin-left: 20">
            <font face="Arial" color="#000000" size="1">© COPYRIGHT 2012
                ALL RIGHTS RESERVED SLINGMEDIA.COM</font>
        </p>
        <table border="0" width="100%" cellspacing="0" cellpadding="0"
            background="images/botbkg.gif">
            <tr>
                <td width="100%"><img border="0" src="images/botbkg.gif"
                    width="48" height="12"></td>
            </tr>
        </table>
        <div
            style="text-align: center; font-family: Arial, Helvetica, Sans-Serif; font-size: 11px; color: #777;">
            <a style="text-decoration: none; color: #777;"
                href="#">Tutorials</a> | <a
                style="text-decoration: none; color: #777;"
                href="#">Codes</a> | <a
                style="text-decoration: none; color: #777;"
                href="#">Templates</a>
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:12:26.030

使用[HttpSession.removeAttribute(String name)](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#removeAttribute%28java.lang.String%29)。

> 从此会话中移除与指定名称绑定的对象。如果会话没有与指定名称绑定的对象，则此方法不执行任何操作。

```
if (session.getAttribute("leaveMap") != null) {
    reportMap = (Map<String,String>) session.getAttribute("leaveMap");
    session.removeAttribute("leaveMap");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:10:09.793

Put data it in `request` scope [request attribute], or override with blank map in Servlet when you make new request

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T05:35:28.267

如果您正在使用会话，那么每次迭代数据后，您都必须从会话中删除该对象。但是如果您使用的是请求，那么您不需要从请求中删除数据。每次你都会得到一个新的请求对象和新的数据集。

# ios - iOS NSUserDefaults 观察单个键值的变化

> ID：10784439
> 
> 赞同：17
> 
> 时间：2012-05-28T12:09:21.303
> 
> 标签：ios, nsuserdefaults

我有以下代码旨在捕获特定键的 NSUserDefaults 值更改的事件。

```
 [[NSUserDefaults standardUserDefaults] addObserver:self
                                    forKeyPath:SOME_NSSTRING_VARIABLE
                                       options:NSKeyValueObservingOptionNew
                                       context:NULL];

 - (void)observeValueForKeyPath:(NSString *) keyPath ofObject:(id) object change:(NSDictionary *) change context:(void *) context
{NSLog (@"Changed for key %@", keyPath); } 
```

但是observeValueForKeyPath 永远不会被调用。[我什至尝试用观察 NSUserDefaults 键的值更改](https://stackoverflow.com/questions/3633973/observing-value-changes-to-an-nsuserdefaults-key)中提到的字符串替换 SOME_NSSTRING_VARIABLE ，但它没有帮助。

更新：我正在从 tabview 更改 NSUserDefaults。上面监控更改的代码在同一个 tabviewcontroller 的不同选项卡中。在我监视更改的选项卡（存在上述代码的选项卡）中，如果我添加：

```
- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
//   NSLog(@"viewillappear");
NSUserDefaults *FUDefaults = [NSUserDefaults standardUserDefaults];
NSLog(@"The username obtained is: %@", [FUDefaults objectForKey:SOME_NSSTRING_VARIABLE]);
} 
```

正确获取更新的 NSUserDefaults 值，但从未调用过 observeValueForKeyPath。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-28T12:38:46.800

编辑：`viewDidUnload`现在已弃用，`dealloc`改为使用`removeObserver`

这应该可以完美运行，我刚刚在这里测试过。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSUserDefaults standardUserDefaults] addObserver:self
                                            forKeyPath:@"SomeKey"
                                               options:NSKeyValueObservingOptionNew
                                               context:NULL];
    // Testing...
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
    [defaults setObject:@"test" forKey:@"SomeKey"];
    [defaults synchronize];
}

- (void)viewDidUnload
{
    [super viewDidUnload];

    [[NSUserDefaults standardUserDefaults] removeObserver:self forKeyPath:@"SomeKey"];
}

- (void)observeValueForKeyPath:(NSString *) keyPath ofObject:(id) object change:(NSDictionary *) change context:(void *) context
{
    if([keyPath isEqual:@"SomeKey"])
    {
       NSLog(@"SomeKey change: %@", change);
    }
} 
```

你可以测试的东西。

*   在 viewDidUnload 中放置一个断点并确保视图不会消失在您身上（因为您正在`SomeKey`从另一个 viewController 更改）如果是这种情况，那么可能会将您的注册/取消注册代码移动到 init/dealloc 中，具体取决于您的 VC作品。

*   使用显式 KeyPath`@"SomeKey"`而不是替代`SOME_NSSTRING_VARIABLE`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-22T14:18:02.213

斯威夫特 3 版本：

```
override func viewDidLoad() {
    super.viewDidLoad()
    UserDefaults.standard.addObserver(self, forKeyPath: "keyPath", options: .new, context: nil)
}

override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
    if keyPath == "keyPath" {
        //Do something
    }
}

deinit {
    UserDefaults.standard.removeObserver(self, forKeyPath: "keyPath")
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-28T17:31:05.760

斯威夫特版本：

```
func setUserDefaultsListener(){
    NSUserDefaults.standardUserDefaults().addObserver(self, forKeyPath: "keyPath", options: NSKeyValueObservingOptions.New, context: nil)
}

override func observeValueForKeyPath(keyPath: String?, ofObject object: AnyObject?, change: [String : AnyObject]?, context: UnsafeMutablePointer<Void>) {
    if keyPath == "keyPath" {
        //Do something
    }
}

deinit {
    NSUserDefaults.standardUserDefaults().removeObserver(self, forKeyPath: "keyPath")
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-26T22:07:30.063

斯威夫特 5 版本：

```
extension UserDefaults {
    @objc dynamic var keyPath: Int {
        return integer(forKey: "keyPath")
    }
} 
```

提示：确保`var`与`keyPath`

以及您使用观察者的地方：

```
var observer: NSKeyValueObservation?

override func viewDidLoad() {
    super.viewDidLoad()
    observer = UserDefaults.standard.observe(\.keyPath, options: [.initial, .new], changeHandler: { (defaults, change) in
        //Do something
    })
}

deinit {
    observer?.invalidate()
} 
```

# c# - 为什么第三方库“ChilkatDotNet4x64”没有复制到输出文件夹？

> ID：10784440
> 
> 赞同：0
> 
> 时间：2012-05-28T12:09:22.537
> 
> 标签：c#, .net, chilkat, chilkat-email

我有引用第三方库的项目 A `ChilkatDotNet4.dll`。我的项目B引用了项目A。编译后B的输出文件夹包含`ChilkatDotNet4.dll`预期！但是，当我替换`ChilkatDotNet4.dll`为时`ChilkatDotNet4x64.dll`，后者不会复制到输出文件夹。为什么？

**Copy Local**设置为 True，解决方案编译为**Any CPU**

起初我认为它必须是**Copy Local的东西（**[在这里](https://stackoverflow.com/questions/7305953/referenced-library-isnt-copied)解释），但是嘿（！）它确实适用于`ChilkatDotNet4.dll`版本。那么有什么问题`ChilkatDotNet4x64.dll`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:47:15.520

如果您使用的是构建模板，请确保手动添加文件。如果您找不到构建模板是什么，解决方法是将文件重命名`ChilkatDotNet4x64.dll`为`ChilkatDotNet4.dll`

# c# - How to open chm file from a button in VS Lightswitch

> ID：10784442
> 
> 赞同：2
> 
> 时间：2012-05-28T12:09:23.643
> 
> 标签：c#, visual-studio-lightswitch

What sort of code do i need to put in a button's **can_execute() method** in order to open a .chm help file i made for my lightswitch application and how will i make sure that even after publishing the whole application... the .chm file is transferred into the user's computer automatically and it stays in the right directory? ..... Thanks!

```
 partial void Help_Execute()
    {
        // Write your code here.

        if (AutomationFactory.IsAvailable)
        {
            dynamic shell = AutomationFactory.CreateObject("Shell.Application");
            shell.ShellExecute("C:/Users/Thuto/Documents/Visual Studio 2010/Projects/ElectricalContructors/ElectricalContructors/Client/Resources/SparkHelpDocumentation.chm", "", "", "open", 1);
        }
        else
        {
            this.ShowMessageBox("Automation not available");
        }

    } 
```

After a hours of trying to find a better way i tried this and it worked but i want to know the proper way of doing it, thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:43:46.770

这是一篇关于在客户端制作图像嵌入资源的文章。我没有用 .chm 尝试过，但我不明白为什么它不应该工作。

[http://blogs.msdn.com/b/bethmassi/archive/2011/06/15/adding-static-images-and-text-on-a-lightswitch-screen.aspx](http://blogs.msdn.com/b/bethmassi/archive/2011/06/15/adding-static-images-and-text-on-a-lightswitch-screen.aspx)

# android - 类在android上找不到异常

> ID：10784443
> 
> 赞同：2
> 
> 时间：2012-05-28T12:09:34.193
> 
> 标签：android, adt

我从网上得到了一些酸味。并导入我的工作区。当我在模拟器上运行时，它会抛出，

```
 "05-28 17:30:47.895: E/AndroidRuntime(840): java.lang.RuntimeException: Unable to instantiate activity 
ComponentInfo{com.developmentmill.laserlogic/com.developmentmill.laserlogic.StageActivity}:
 java.lang.ClassNotFoundException: com.developmentmill.laserlogic.StageActivity in
 loader dalvik.system.PathClassLoader[/data/app/com.developmentmill.laserlogic-2.apk]" 
```

但是当我在我的朋友机器上运行相同的代码时，它的运行没有任何错误。

我的 eclipse ADT 版本是 17.0 我的朋友 eclipse ADT 版本是 16.0

我将 jar 文件从 lib 文件夹复制到 libs 目录。并将 java 构建路径从 lib 更改为 libs 文件夹。我也清理了这个项目。

再次，我运行项目，同样的错误被抛出。

有什么问题以及如何纠正它？y 它只发生在我的机器上。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:22:45.567

我也遇到过这个问题。

所以试试这个。

`Right click on project -> goto properties -> Java buid path -> libraries -> remove all External Jars from here -> press OK`

**还从libs**文件夹中删除所有 jar

**清理项目-> 重新启动 Eclipse。**

然后再次将所有需要的 jar 放入**libs**文件夹中。

我已经解决了我的问题

希望对你有帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:14:52.807

首先在您的项目中创建**libs**文件夹，然后将项目中使用的所有 jar 文件或库文件添加到 libs 文件夹中，然后运行您的项目。

它肯定会运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:45:37.637

对我有用的是：我已经有一个与我的 src & res 文件夹处于同一层次结构的 libs 文件夹。FlurryAgent.jar 文件保存在我的桌面上。我只是右键单击 FlurryAgent 文件，复制它。然后我将文件粘贴到 Eclipse 的 libs 文件夹中。Eclipse 也自动将 FlurryAgent.jar 文件复制到“Android Dependencies”文件夹中。

# c++ - BOOST 线程：cout 行为

> ID：10784448
> 
> 赞同：5
> 
> 时间：2012-05-28T12:09:39.463
> 
> 标签：c++, boost, boost-thread

我是 Boost 线程的新手，我对如何从多个线程执行输出感到困惑。我有一个简单的 boost::thread 从 9 倒数到 1；主线程等待然后打印“LiftOff..!!”

```
#include <iostream>
#include <boost/thread.hpp>
using namespace std;

struct callable {
    void operator() ();
};

void callable::operator() () {
    int i = 10;
    while(--i > 0) {
        cout << "#" << i << ", ";
        boost::this_thread::yield();
    }
    cout.flush();
}

int main() {
    callable x;
    boost::thread myThread(x);

    myThread.join();

    cout << "LiftOff..!!" << endl;

    return 0;
} 
```

问题是我必须在我的线程中使用明确的“cout.flush()”语句来显示输出。如果我不使用flush()，我只会得到“LiftOff！！” 作为输出。

有人可以告诉我为什么我需要明确使用 flush() 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T13:14:53.053

这与线程无关，因为 cout 通常会在每个线程的基础上进行缓冲，并且仅在实现决定时才输出 - 所以在线程中，输出只会出现在特定于实现的基本上 - 通过调用 flush 你强制缓冲区被冲洗。

这会因实现而异——通常是在一定数量的字符之后或发送新行时。

我发现多个线程也写入相同的流或文件大多是可以的 - 只要输出尽可能原子地执行。我不建议在生产环境中使用它，因为它太不可预测了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T12:59:37.103

这种行为似乎取决于操作系统特定的 cout 流实现。我猜在你的情况下，cout 上的写操作被缓冲到一些线程特定的内存中，并且 flush() 操作强制它们被打印在控制台上。我猜是这样，因为 endl 包括调用 flush() 操作，并且 main 函数中的 endl 即使在线程加入后也看不到您的更改。

顺便说一句，无论如何最好将输出同步到线程之间共享的 ostream，否则您可能会看到它们混合在一起。我们为使用后台线程将日志消息写入关联的 ostream 的日志记录类这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:00:20.933

鉴于您的消息长度很短，没有任何理由应该在没有刷新的情况下出现。（不要忘记这`std::endl`相当于`<< '\n' << std::flush`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:44:48.420

在有和没有冲洗（`gcc 4.3.2 boost 1.47 Linux RH5`）的情况下，我得到了询问的行为

我假设您的 cygwin 系统选择`std::cout`使用关联`std::streambuf`的 . 我认为这是特定于实现的。由于`flush`or endl 仅强制**其**缓冲区刷新到其操作系统控制的输出序列，因此线程的 cout 对象保持缓冲。

在线程之间共享引用`ostream`应该可以解决问题。

# jquery - 动画图像属性更改

> ID：10784449
> 
> 赞同：1
> 
> 时间：2012-05-28T12:09:47.083
> 
> 标签：jquery, hover, jquery-animate, mouseover, attr

```
 $(function() {
    $(".flexslider img")
        .mouseover(function() { 
            var src = $(this).attr("src").match(/[^\.]+/) + "-bw.png";
            $(this).attr("src", src);
        })
        .mouseout(function() {
            var src = $(this).attr("src").replace("-bw.png", ".png");
            $(this).attr("src", src);
        });
    }); 
```

我有一个轮播出现在 wordpress 主题的大多数页面上，当鼠标悬停时，我需要将任何轮播中的任何图像更改为新的属性，即旧的 src + -bw 或任何后缀。但这需要补间或动画。上面的代码改变了图像，但没有动画。还有很多人建议预加载要在悬停时显示的图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T15:23:01.377

你需要什么样的动画？衰退？

```
$(function() {
    $(".flexslider img")
        .mouseover(function() { 
            var src = $(this).attr("src").match(/[^\.]+/) + "-bw.png";
            $(this).fadeOut("fast").attr("src", src).fadeIn("fast");
        })
        .mouseout(function() {
            var src = $(this).attr("src").replace("-bw.png", ".png");                
            $(this).fadeOut("fast").attr("src", src).fadeIn("fast");
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:19:43.793

你需要做一个交叉淡入淡出，这里解释：

[http://jqueryfordesigners.com/image-cross-fade-transition/](http://jqueryfordesigners.com/image-cross-fade-transition/)

你可以这样做：

```
crossFade = function(element, to_src) {
   element = $(element); //maybe this isn't even needed.
   element.style = "display: block; position: absolute; top:0; left:0;"; //please replace this with four .css() calls ;) and double check the positioning
   parentElement = $(element.parentNode);
   newElement = $("<img/>", {
      src: to_src,
      style: "display: none; position: absolute; top:0; left:0;"
   }
   newElement.appendTo(parentElement);
   //please check in your dom if both images are in the carrousels-list-node, as I might have errored ;)
   newElement.fadeIn(5000, (function(el) {  return function() { el.remove(); }; })(element));
}; 
```

# c# - Determine if a website sets a cookie

> ID：10784450
> 
> 赞同：0
> 
> 时间：2012-05-28T12:09:47.853
> 
> 标签：c#, cookies, httpwebrequest

Using `HttpWebRequest`, how can we determine if the requested URL is attempting to set a cookie?

Also, how can we determine if any child elements (for example Google Analytics/third party iFrames) are attempting to set cookies?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:52:07.427

您可以通过查看[恰当命名的`Cookies`属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.cookies.aspx)来获取响应设置的 cookie 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:38:26.560

您想读取 HTTP 标头以检查 Set-Cookie 标头。请参阅[http://en.wikipedia.org/wiki/HTTP_cookie#Setting_a_cookie](http://en.wikipedia.org/wiki/HTTP_cookie#Setting_a_cookie)。

这不会拾取通过 JS 设置的任何 cookie 或在浏览器中执行的任何其他内容，但如果服务器正在设置 cookie，则应该拾取它。

# postgresql - 如何在 PostgreSQL 中创建会话级表？

> ID：10784451
> 
> 赞同：-1
> 
> 时间：2012-05-28T12:09:47.983
> 
> 标签：postgresql, hibernate

我正在开发一个使用 Spring、Hibernate 和 PostgreSQL 9.1 的应用程序。要求是用户可以从浏览器上传批量数据。

现在每个用户上传的数据非常粗糙，需要大量验证才能放入实际的事务表中。我希望在用户上传时创建一个临时表；数据成功转储到这个临时表后，我将调用一个过程来执行验证并将数据从临时表中取出到事务表的实际工作。如果遇到任何错误，我会将日志转储到任何其他表，以便用户可以从浏览器了解他们上传的状态。

在 PostgreSQL 中，我们有类似临时的会话级表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:32:04.677

从[9.1 手册](https://www.postgresql.org/docs/9.1/static/sql-createtable.html)：

```
CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] table_name ( [
  { column_name data_type [ COLLATE collation ] [ column_constraint [ ... ] ]
    | table_constraint
    | LIKE parent_table [ like_option ... ] }
    [, ... ]
] )
[ INHERITS ( parent_table [, ... ] ) ]
[ WITH ( storage_parameter [= value] [, ... ] ) | WITH OIDS | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE tablespace ] 
```

这里的关键词是 TEMPORARY，尽管表不一定是临时的。它可能是您在插入之前截断的永久表。整个操作（插入和验证）必须包含在事务中。

# facebook - 跟踪点击 Facebook 帖子的用户的转化率

> ID：10784452
> 
> 赞同：0
> 
> 时间：2012-05-28T12:09:52.113
> 
> 标签：facebook, google-analytics, kpi

我有一个发布在用户朋友墙上的应用程序。点击墙上的帖子将导致用户导航到网站。
我想通过点击 Facebook 帖子来跟踪有多少用户注册了该网站。有没有办法使用谷歌分析来做到这一点，如果有的话怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:27:49.380

您应该使用 Facebook Insights 来跟踪这样的统计数据。你可以在这里阅读更多关于它的信息： [https ://developers.facebook.com/docs/insights/](https://developers.facebook.com/docs/insights/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:27:31.323

当您将内容发布到用户的墙上时，请添加`ref`参数。当有人单击链接时，该`ref`参数将被发送回您的站点，因此您知道用户来自 facebook。然后由您来检测这一点并将其记录在 Google Analytics 中。

# c# - C# 中的 URL 编码

> ID：10784454
> 
> 赞同：2
> 
> 时间：2012-05-28T12:09:55.270
> 
> 标签：c#, urlencode

我无法找到在 C# 中对字符串进行 URL 编码的正确方法。我想要的是将字符串编码`some string`为`some%20code`. 使用`HttpUtility.URLEncode();`方法 encode 是为了`some+string`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T12:12:20.413

[`HttpUtility.UrlEncode`](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)在这里做正确的事。

> 对 URL 字符串进行编码。UrlEncode 方法可用于对整个 URL 进行编码，包括查询字符串值。

当涉及到 URL 上的空格时，a`+`或`%20`两者都是正确的。

另请参阅[URL 编码空格字符：+ 或 %20？](https://stackoverflow.com/q/1634271/1583).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:13:09.100

如果您希望将空格编码为`%20`而不是`+`，则必须自己进行编码。

在 URL 编码中，a`+`表示空格。您也可以使用`%20`，就像您可以对任何字符使用字符代码变体一样，但内置编码使用较短的变体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:17:23.983

该线程包括对 URI 的一些内置编码选项的讨论：

[如何在 C# 中用 %20 替换所有空格](https://stackoverflow.com/questions/1517586/how-do-i-replace-all-the-spaces-with-20-in-c-sharp)

# php - Remove submit button value from $_POST form data PHP

> ID：10784460
> 
> 赞同：1
> 
> 时间：2012-05-28T12:10:37.793
> 
> 标签：php, forms, post

I'm using this cycle to print all form $_POST data:

```
foreach($_POST as $name => $value) {
print "$name : $value<br>";
} 
```

And at the end of result is submit button value (submit : Edit) and this cause error for me, because with this foreac cycle I'm adding data to excel document `$name is cell, $value is cell value` so how to remove button value from the list?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T12:13:22.647

您可以在执行 foreach 之前取消设置：

```
unset($_POST['submit']); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T12:13:23.017

您的提交按钮不需要`name`在 HTML 中具有属性。如果它没有名称，则不会出现在 POST 数据中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-28T12:13:25.590

跳过它`continue;`

```
foreach($_POST as $name => $value) {
    if($name == "submit") continue;
    print "$name : $value<br>";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T12:13:29.307

关于什么

```
foreach($_POST as $name => $value) {
    if($name != "submit"){
        print "$name : $value<br>";
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-28T14:59:00.367

你在做什么不是好的做法。在这种情况下，将数据传递到 Excel 电子表格中，您不太可能遇到问题，但是，这是一个危险的习惯。

您已经设计了表单并为每个输入指定了名称，因此您可以提前知道 $_POST 数组将包含哪些索引。您应该仅显式引用 $_POST 数组中的那些值，并根据需要验证每个值。

不要忘记 $_POST 来自用户，因此是不可信的。额外的字段可以添加到 $_POST 数组中，就目前而言，您的代码将愉快地处理它们。

这可能是代码中的问题，也可能不是问题，但您至少应该考虑一下。

# asp.net - 为什么下载文件在模型弹出窗口中不起作用？

> ID：10784465
> 
> 赞同：2
> 
> 时间：2012-05-28T12:11:15.733
> 
> 标签：asp.net, ajaxcontroltoolkit

我正在打开一些具有这样的代码的面板

```
 <td rowspan="2">
                        <br />
                        <asp:UpdatePanel ID="updatePnl" runat="server">
                            <ContentTemplate>
                                <asp:LinkButton ID="lnkYurLevel" runat="server" ForeColor="#009999" Text="What are my next steps?"
                                    Font-Size="Medium" OnClick="lnkYurLevel_Click"></asp:LinkButton>
                            </ContentTemplate>
                        </asp:UpdatePanel>
                    </td>

 protected void lnkYurLevel_Click(object sender, EventArgs e)
    {
        if (lblFileName.Text != "")
        {
            string path = Server.MapPath(@"~\downloads\" + lblFileName.Text);
            System.IO.FileInfo file = new System.IO.FileInfo(path);
            if (file.Exists)
            {
                Response.Clear();
                Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name);
                Response.AddHeader("Content-Length", file.Length.ToString());
                Response.ContentType = "application/octet-stream";
                Response.WriteFile(file.FullName);
                Response.End();
            }
            else
            {
                Response.Write("This file does not exist.");
            }
        }

    } 
```

并单击按钮，我正在打开一个要下载的文件，但该下载不会出现，因为当它没有保存在要通过模型弹出窗口打开的面板中时它正在工作。现在，当它被放置在要通过模型弹出窗口打开的面板中时。它不起作用。是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:13:15.997

您使用的 UpdatePanel 期望来自回发的非常具体的数据（实际上是等待带有结果的结构），并且这些数据在 javascript 上用于更新他的内容。您所做的是完全破坏这些数据，并且您仍然希望工作。这不起作用，并且您从更新面板中的页面收到 javascript 错误。换句话说，更新面板会从您那里获取一些不知道如何处理它们的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:17:08.067

里面的一个动作`UpdatePanel`不会改变整体`Response`，只是页面的一部分。所以你不能指望`Response.Write`工作。另一种方法是使按钮强制完全`PostBack`

* * *

像这样`PostBackTrigger`添加 一个`asp:Button`

```
<Triggers>
    <asp:PostBackTrigger ControlID="lnkYurLevel" />
</Triggers> 
```

或者，如果您想在代码隐藏中执行此操作，请执行此操作。

```
ScriptManager.GetCurrent(Page).RegisterPostBackControl(lnkYurLevel); 
```

# sql-server-2005 - 使用 HH:MM:SS 进行 SQL 计算

> ID：10784466
> 
> 赞同：0
> 
> 时间：2012-05-28T12:11:16.563
> 
> 标签：sql-server-2005

我有一个列作为 进入我的 SQL 数据库`varchar(10)`，但看起来像 HH:MM:SS。列名是runTime。

我需要将该列转换为秒并用它和另一个名为 totalItems 的列进行一些计算。totalItems 是一种`int`数据类型。一种计算的示例是：

```
totalItems/runTime 
```

因此，似乎我需要将 runTime 转换为小数，然后在计算中使用它，但是当我不先将时间转换为秒就无法做到这一点时，或者我得到一个错误（由于“： ”）。

那么，我怎么可能先将 sessionRunTime 转换为秒，然后将这些秒转换为十进制数据类型，然后从那里进行计算？一个示例可能是 59222 totalItems 和 04:15:17 用于运行时间。

如果有更好的方法来处理这个问题，我当然也愿意接受。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:15:48.973

您可以强制转换`datetime`并使用[datediff](http://msdn.microsoft.com/en-us/library/ms189794.aspx)将您的字符串转换为秒。

```
select datediff(second, 0, cast('04:15:17' as datetime)) 
```

结果：

```
15317 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:17:12.963

只要小时部分不匹配或超过 24，您就可以[`convert`](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.90%29.aspx)使用日期时间并使用[内置函数](http://msdn.microsoft.com/en-US/library/ms189794%28v=sql.90%29)计算时间的秒数：

```
select DATEDIFF(second,'00:00:00',CONVERT(datetime,'04:15:17'))

15317 
```

如果您需要对此结果进行数学运算，并且另一个值是`int`，那么如果需要，则将其中的一个或多个值乘以`1.0`强制以`float`s 的形式进行数学运算。

# ios - Xcode ipa 在 iOS 5.1 上安装，但在 iOS 5.1.1 上失败

> ID：10784467
> 
> 赞同：0
> 
> 时间：2012-05-28T12:11:22.373
> 
> 标签：ios, xcode, ios5

我们使用 Xcode 4.3.1 创建了一个 ipa 文件，将 SDK 5.1 和部署目标保持为 iOS 4.0 。该应用程序安装在 iOS 5.1,4.0 的 iphone 上，但无法在 iOS 5.1.1 上安装

有谁知道解决办法告诉我们

问候， 瑞诗玛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:44:52.393

您的 5.1.1 设备 UDID 更有可能不包含在配置文件中，带有目标 SDK 5.1 的 .ipa（实际上带有任何受支持的 SDK，最低为 iOs 3.0）对于 5.1.1 设备应该没问题。否则，请提供更多安装过程的详细信息。

# android - 将日期格式更改为通过 Android 中的数据库检索到的系统当前格式

> ID：10784470
> 
> 赞同：0
> 
> 时间：2012-05-28T12:11:25.130
> 
> 标签：android, database, string, date

我已将日期存储在数据库中，首先获取当前日期，然后将其转换为字符串，然后将其存储到数据库中，它工作正常。

然后我想检索数据并将其显示给 ListView，为此我做了：

```
// get the string value of date

    String dateString = c.getString(c.getColumnIndex(CallHistoryDataBase.colDate));

// format according to system's current format

    java.text.DateFormat dateFormat =  android.text.format.DateFormat.getDateFormat(getApplicationContext());
    textViewDateTime.setText(dateFormat.format(new Date(dateString))); 
```

它工作正常，就像我以**“dd/MM/yyyy”**格式存储日期，后来我将系统的格式更改为**“yyyy/MM/dd”** ，在列表中以**“yyyy/MM/dd”**格式显示。

但有时它会显示**2014/04/14**日期**2012/04/14**。我已经检查过，在从数据库存储和检索数据时它很好。

我没有任何线索。没有硬编码，甚至没有 14 个数字。

任何建议......不同的解决方案也是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:43:09.163

```
public String getDate(final Context context, final long time) {
        long t = time;
        if (t < MIN_DATE) {
            t *= MILLIS;
        }
        final Calendar base = Calendar.getInstance();
        base.set(Calendar.HOUR_OF_DAY, 0);
        base.set(Calendar.MINUTE, 0);
        base.set(Calendar.SECOND, 0);
        if (t < base.getTimeInMillis()) {
            SimpleDateFormat df1 = new SimpleDateFormat("dd-MMM-yyyy");
            String formattedDate1 = df1.format(t);

            return formattedDate1;
            // return DateFormat.getDateFormat(context).format(t);
        } else {
            return DateFormat.getTimeFormat(context).format(t);
        }
    } 
```

通过使用此方法，您可以获得 dd-mm-yyyy 格式的日期。并将数据库中的数据以毫秒时间传递。希望它对你有用。

# iphone - 单击按钮时如何通过动画显示视图？

> ID：10784474
> 
> 赞同：3
> 
> 时间：2012-05-28T12:11:32.550
> 
> 标签：iphone, ios

我是编码新手。我正在制作一个应用程序，我需要在单击按钮时显示一个视图，并且该视图应该看起来好像它来自按钮本身。再次单击按钮时，视图应返回按钮（动画）。

我有翻转、卷曲等动画，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T12:17:17.360

这是一个简单的例子。设置`showView:`为按钮的动作。

```
- (IBAction)showView:(UIButton *)sender {
    // Create a view with the size and position of the tapped button
    UIView *view = [[UIView alloc] initWithFrame:sender.frame];
    // Set a color on the view
    view.backgroundColor = [UIColor redColor];
    // Add the new view to the main view. The new view will be displayed over any other views
    [self.view addSubview:view];
    // Animate the change of the new view's frame. We use the bounds of the main view.
    [UIView animateWithDuration:3.6 animations:^{
        view.frame = self.view.bounds;
    }];
} 
```

**完整的解决方案：**

首先为视图和按钮创建属性。如何初始化这些取决于您。

```
@property (strong, nonatomic) UIButton *button;
@property (strong, nonatomic) UIView *aView;
...
@synthesize button = _button;
@synthesize aView = _aView; 
```

然后创建一个方法，在两帧之间为视图设置动画，并在动画结束时将视图从其父视图中删除（如果需要）。

```
- (void)animateView:(UIView *)view 
           fromRect:(CGRect)from 
             toRect:(CGRect)to 
       inParentView:(UIView *)parent 
     removeWhenDone:(BOOL)remove 
{
    if (!remove) {
        [parent addSubview:view];
    }
    view.frame = from;
    [UIView animateWithDuration:3.6 animations:^{
        view.frame = to;
    } completion:^(BOOL finished) {
        if (remove) {
            [view removeFromSuperview];
        }
    }];
} 
```

然后创建一个布尔属性来指示是否显示视图，并为该属性实现一个自定义设置器。

```
@property (assign, nonatomic) BOOL viewShown;
...
@synthesize viewShown = _viewShown;

- (void)setViewShown:(BOOL)viewShown
{
    _viewShown = viewShown;
    if (_viewShown) {
        // Insert your own toRect
        [self animateView:self.aView fromRect:self.button.frame toRect:CGRectMake(0, 0, 100, 100) inParentView:self.view removeWhenDone:NO];
    } else {
        [self animateView:self.aView fromRect:self.aView.frame toRect:self.button.frame inParentView:self.view removeWhenDone:YES];
    }
} 
```

最后，在按钮的操作中翻转`viewShown`属性。

```
- (IBAction)showView:(UIButton *)sender {
    self.viewShown = !self.viewShown;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-29T11:26:36.800

//这里animationButton是按钮的名字 //这里aView是一个视图

aView.view.center=animationButton.center;

现在，将视图缩放到如图所示的小比例，以便在制作围兜时，它会显示为好像它来自按钮本身。

```
CGAffineTransform trans = CGAffineTransformScale(aView.view.transform, 0.01, 0.01);

aView.view.transform = trans;   // do it instantly, no animation

[self.view addSubview:aView.view];

// now return the view to normal dimension, animating this transformation 
```

//现在借助动画，在很大程度上通过动画缩放视图

```
[UIView animateWithDuration:2.0 delay:0.0 options:UIViewAnimationCurveEaseInOut
                 animations:^{
                                  aView.view.transform =   CGAffineTransformScale(aView.view.transform, 70.0, 70.0);
                 }
                 completion:nil]; 
```

# jquery - Phonegap，jQuery ajax 帖子不起作用

> ID：10784479
> 
> 赞同：2
> 
> 时间：2012-05-28T12:11:48.793
> 
> 标签：jquery, ajax, post, file-upload, cordova

我有以下客户端代码从手机上传图片

```
$("#placeorder").click(
 function() {
  if ($('#placeorderform').valid()) {
   var formData = $('#placeorderform').serialize();
   formData += "&uploaded="+ imgData;
   $.ajax({
    type : "POST",
    url : _host+ "/addorder.php",
    data : formData,
    dataType : 'jsonp',
    success : onSuccess,
    error : onError
    });
  }
 }); 
```

服务器端 PHP（不工作）

```
$encodedData = str_replace(' ','+',$_POST['uploaded']); 
```

服务器端 PHP（$_REQUEST 或 $_GET 有效；但适用于小图像）

```
$encodedData = str_replace(' ','+',$_REQUEST['uploaded']); 
```

我的客户端代码有什么问题。

# 其他意见：

我试图检查请求标头并发现令人惊讶的结果。当我在浏览器中执行以上 ajax 时，数据是在 POST 中接收的。但是在Phonegap 内部，即使在明确提及类型：“POST”之后，也会在GET 中接收数据。

有人可以对这些行为有所了解:(我的 Phonegap 配置有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:52:27.057

所以我得到了这个工作......令人惊讶的发现！

当我将 dataType: 'jsonp' 更改为 ('json' 或 'text') 时，formdata 在 $_POST 中通过。

仅当 dataType: 'jsonp' 由于某些未知原因导致表单数据通过 $_GET 或 $_REQUEST

不知道为什么一定会发生这种情况；但现在我的问题用'json'解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:50:37.327

据我所知，序列化表单不包括文件。如果您使用的是 PhoneGap，为什么不使用他们提供的 File API 来上传文件？

为了将表单变量与文件一起发送，只需添加一个带有选项的参数数组

```
var options = new FileUploadOptions();
options.fileKey="file";
options.fileName=fileURI.substr(fileURI.lastIndexOf('/')+1);
options.mimeType="text/plain";

var params = new Object();
params.value1 = "test";
params.value2 = "param";

options.params = params;
var ft = new FileTransfer();
ft.upload(fileURI, "http://some.server.com/upload.php", win, fail, options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T20:45:38.110

在期望 JSONP 作为响应的同时发送 POST 请求是不可能的。由于 JSONP 只是获取请求，它将脚本嵌入到您的 dom 中。

这就是 ajax 调用在 jquery 中的工作方式，这也解释了 *——'即使在明确提到类型之后：“POST”数据也是在 GET 中接收的'*

# php - 如何在 CodeIgniter 中刷新内存使用

> ID：10784496
> 
> 赞同：1
> 
> 时间：2012-05-28T12:13:15.543
> 
> 标签：php, codeigniter

我面临网站崩溃的问题。因为这是与照片相关的网站。它使用了服务器近 95% 的内存。当它达到 100% 时，该站点已关闭。我从探查器检查，并获得以下详细信息：

```
Loading Time: Base Classes   0.0404
Controller Execution Time ( Events / Get Series Images )  10.7655
Total Execution Time   10.8061

MEMORY USAGE : 3,948,864 bytes 
```

详情请看附件。

这里的数据是**使用 JSON 从 Progress 服务器**获取的。我很惊讶是什么让它如此。但在我心中有一件事是，为什么不在工作完成后释放内存呢？我去了 CI 的不同论坛，但无法得到答案。

我尝试使用**ob_end_flush(), ob_flush()** ,.. 但无法获得期望的结果。我也不知道如何在 CI 中使用。

我希望我能够解决我的问题。预先感谢您的支持。

我正在使用 HMVC。

代码

```
// controller
    public function get_event_images(){    
        // pagination
        $data['current_page'] = @$_GET['page']?@$_GET['page']:1;

        $data['event_id'] = $this->uri->segment(3);   
        $data['event_name'] = urldecode($this->uri->segment(4));  
        $url = JSON_URL."jsread.p?call=treeimg&user=&lang=en&tree=".$data['series_id']."&sort=last&max=".MAX_RECORD."&startpage=".$data['current_page']."&pagesize=".PAGE_SIZE;         
        $json_formated_data =  readJSONURL($url);  

        //extract array of images only
        $data['images'] = getData($json_formated_data);

        $image_stat = getImageStat($json_formated_data);
        $data['total_images']= $image_stat[6];  
        $data['total_rows'] = $image_stat[5];

        $data['main_content'] = 'eventimages';  
        $data['title'] = "Event Images";

        // store series details in session
        $newdata = array(
            'event_id'  =>$data['event_id'],
            'event_name'=> $data['event_name']
        );
        $this->session->set_userdata($newdata);

        $this->load->view('ktmevent/template_page', $data);         
    }

// view
    if(!empty($images)):
        foreach($images as $data):
            echo  "<li>";   
                echo  "<div class=\"image\">";  
                echo "<a href=\"".site_url('events/image_detail/'.$series_id."/".$data['Photono'])."\">";
                echo "<img src=\"http://www.mysite.com".$data['Thumburl']."\" />";
                echo "</a>";
                echo "</div>";
                echo "<div>";
                echo anchor('events/image_detail/'.$series_id.'/'.$data['Photono'], 'Detail');
                echo "</div>";
            echo "</li>";
        endforeach;
    endif; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:08:40.687

您可以从找出每个操作期间的内存使用情况开始。只需使用 PHP 函数 memory_get_usage() 输出内存：

[http://php.net/manual/en/function.memory-get-usage.php](http://php.net/manual/en/function.memory-get-usage.php)

然后您应该能够确定会导致您的应用程序填满内存缓冲区的操作。

# c# - 如何在 xslt 中使用 jquery 选择器？

> ID：10784498
> 
> 赞同：0
> 
> 时间：2012-05-28T12:13:20.373
> 
> 标签：c#, jquery-selectors

我想在使用 jquery 选择器的 xslt 模板中使用 javascript 函数，但它返回以下错误：“未声明变量 '$'”

我正在使用以下代码：

```
function myFunction(buttonId)
{
    var button = $('input[id$="buttonId"]');
    //do something
}

]]> 
```

那有可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:17:52.110

```
"Variable '$' has not been declared", 
```

当您未在应用程序中包含 jquery 库时会发生。

将此添加到页面的 head 元素中，然后尝试一下。

```
 <script src="yourJquerySourcePath" type="text/javascript"></script> 
```

否则，您可以使用 Jquery CDN。[jQuery CDN](http://docs.jquery.com/Downloading_jQuery)

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

# javascript - offsetHeight 在 chrome 中无法正常工作

> ID：10784499
> 
> 赞同：0
> 
> 时间：2012-05-28T12:13:21.550
> 
> 标签：javascript, google-chrome, height

我遇到了一个有趣的问题。我不知道可能是什么原因。我试图在互联网上搜索，但没有得到解决方案。问题是 offsetWidth 在 Chrome 中运行良好，但 offsetHeight 无法正常运行。有时它会返回值，但有时不会。请问有什么办法可以解决这个问题。

注意：我尝试过使用 id.height、id.clientHeight。但所有人都给我同样的问题。在我的项目中，我们也使用 Prototype 和 JQuery。

我也使用了原型 getHeight() .. 但不能在 Chrome 中工作。getWidth() 工作完美。但所有这些都在 Firefox 中运行良好...... :(

**这是代码块**

```
$('leftImage_<?php echo $iExtLoop; ?>').style.position="relative";
$('leftImage_<?php echo $iExtLoop; ?>').style.left= ($('leftImageDiv').offsetWidth - $('leftImage_<?php echo $iExtLoop; ?>').offsetWidth)/2 + "px";
$('leftImage_<?php echo $iExtLoop; ?>').style.top= ($('leftImageDiv').offsetHeight - $('leftImage_<?php echo $iExtLoop; ?>').offsetHeight)/2 + "px";

if($('stripLeft_<?php echo $iExtLoop; ?>')){
    $('stripLeft_<?php echo $iExtLoop; ?>').style.position="relative";
    $('stripLeft_<?php echo $iExtLoop; ?>').style.left= ($('leftImageDiv').offsetWidth - $('stripLeft_<?php echo $iExtLoop; ?>').offsetWidth) + "px";
    $('stripLeft_<?php echo $iExtLoop; ?>').style.top= ($('leftImageDiv').offsetHeight - $('stripLeft_<?php echo $iExtLoop; ?>').offsetHeight) + "px";                                      
} 
```

* * *

重构的代码，由 Šime Vidas 添加：

```
var img = $( 'leftImage_<?php echo $iExtLoop; ?>' );
var div = $( 'leftImageDiv' );
var strip = $( 'stripLeft_<?php echo $iExtLoop; ?>' );

img.style.position = "relative";
img.style.left = ( div.offsetWidth - img.offsetWidth ) / 2 + "px";
img.style.top = ( div.offsetHeight - img.offsetHeight ) / 2 + "px";

if ( strip ) {
    strip.style.position = "relative";
    strip.style.left = ( div.offsetWidth - strip.offsetWidth ) + "px";
    strip.style.top= ( div.offsetHeight - strip.offsetHeight ) + "px";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:47:41.553

由于至少有一个元素似乎是 IMG 元素，我猜测该元素在执行代码时尚未完成加载。

图像必须单独检索（由浏览器），因此您必须确保仅在它们完成加载后才读取它们的高度。

# android - android中的自定义对话框

> ID：10784504
> 
> 赞同：1
> 
> 时间：2012-05-28T12:13:27.157
> 
> 标签：android

我想自定义对话框以仅更改警报的正文。我想像这个屏幕截图一样输出：

![在此处输入图像描述](../Images/1628abf94cdfa7a92612269ebbccc9b7.png)

但我不知道这种类型的对话。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:27:30.533

是的，您可以根据需要更改对话框。您可以通过创建自定义对话框来做到这一点。Step1.在res中的String文件中创建样式

```
 <style name="myQuitDialog" parent="android:Theme.Dialog"> 
   <item name="android:gravity">center_horizontal</item>

    </style> 
```

第2步。在布局中创建 xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_quit"
              android:orientation="horizontal"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:background="@drawable/image which u want to show"
 > 
```

第三步。在src中编写自定义对话框的代码

```
 class Custom_Dialog extends Dialog {

        protected Custom_Dialog(Context context, int theme) {
            super(context, theme);
            // TODO Auto-generated constructor stub
        }

    }
private void show_alert() {
        final Custom_Dialog alertbox = new Custom_Dialog(this, R.style.myQuitDialog);
        Window window = alertbox.getWindow();
        window.setBackgroundDrawableResource(android.R.color.transparent);
        window.requestFeature(window.FEATURE_NO_TITLE);

        alertbox.show(); 
        alertbox.setCancelable(true);
        alertbox.setCanceledOnTouchOutside(true);

                 alertbox.dismiss();
            }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:56:47.217

请检查以下链接

[http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

[http://www.thiyagaraaj.com/articles/android-articles/customdialogboxpopupusinglayoutinandroid](http://www.thiyagaraaj.com/articles/android-articles/customdialogboxpopupusinglayoutinandroid)

[http://www.thecompboy.com/2011/11/android-tutorial-custom-dialog.html](http://www.thecompboy.com/2011/11/android-tutorial-custom-dialog.html)

[http://www.mysamplecode.com/2011/06/android-custom-dialog-box-sample-code.html](http://www.mysamplecode.com/2011/06/android-custom-dialog-box-sample-code.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:17:09.460

您可以在 AndroidManifest.xml 中创建自己的活动并`android:theme="@android:style/Theme.Dialog"`为其设置属性，因此它看起来像对话框窗口

# jquery - 在 jsfiddle 中工作，但不在我的网站上

> ID：10784509
> 
> 赞同：0
> 
> 时间：2012-05-28T12:13:46.137
> 
> 标签：jquery

这个问题令人困惑。在 jsfiddle 上它可以工作[http://jsfiddle.net/mdanz/aXjH5/16/](http://jsfiddle.net/mdanz/aXjH5/16/)。

当您按下数字时，`#bid-up`该数字应上升并在 mouseup/mouseleave 时停止。在我的网站上，mouseup/mouseleave 不起作用，firebug 中没有错误。此外，如果我`.live()`从 中删除`#bid-up`并且只是做按钮不起作用。关于什么是错的任何想法，这些问题可以联系起来吗？我无法发布指向该网站的链接，因为我仍在开发它。`$('#bid-up').mousedown(function() {``#bid-up`

HTML：

```
<div id='bid-child-container-2'><input type='text' style='color:#707070;font-size:26px;margin-right:5px;text-align:center;width:100px;font-family:arial;' id='bid-price' readonly value='5.1' />
</div>
<div id='bid-child-container-3'>
<div id='bid-up' style='color:#707070;font-size:14px;font-family:arial; cursor:pointer; margin-top:20px; border:1px solid #707070; width:100px; text-align:center;' data-on='1'>up</div>

</div>​ 
```

JavaScript：

```
$('#bid-up').live('mousedown', function() {

    var button = $(this);

    button.data('interval', setInterval(function() {

        var number = button.parent('div').siblings('#bid-child-container-2').find('#bid-price').val();
        var newnumber = number.split('.');
        var on = button.attr('data-on');

        button.siblings('#bid-down').attr('data-on', '1');

        if (newnumber[1] < 9) {
            var first = newnumber[0];
            var second = parseInt(newnumber[1]) + 1;
        }

        if (newnumber[1] == 9) {
            var first = parseInt(newnumber[0]) + 1;
            var second = 0;
        }

        var finalnumber = first + '.' + second;
        button.parent('div').siblings('#bid-child-container-2').find('#bid-price').val(finalnumber);

    }, 200));

}).bind('mouseup mouseleave', function() {
    clearInterval($(this).data('interval'));
});​ 
```

# c# - 有没有其他方法可以在没有任何第三方/库的情况下在 C# 中使用 WPF 处理 DICOM 图像？

> ID：10784512
> 
> 赞同：5
> 
> 时间：2012-05-28T12:14:09.243
> 
> 标签：c#, wpf, dicom

我开始在一个面临巨大挑战的新项目中工作。我在一个医疗项目中工作，我必须阅读 DICOM 图像并使用其属性处理图像。我收集了一些关于 DICOM 和 PACS 的基础知识。因为我在 WPF 工作了大约 2 年的职业生涯，所以我选择使用 C# 和 WPF 来做这个项目。我用谷歌搜索了很多，甚至我在 SO 和 codeproject 中浏览了很多文章，我发现他们在每个地方都使用了一些库/第三方工具，例如：

**gdcm** , **LEADTOOLS** , **ClearCanvas**

任何人都可以建议我在不使用任何第三方/库的情况下进行 DICOM 图像处理的任何替代方式，或者如果不使用库/第三方就不可能吗？

我已经浏览[了为 DICOM 图像处理选择最合适的库的链接](https://stackoverflow.com/questions/1287127/net-dicom-libraries)，但正在寻找解决此问题的替代方法。如果没有，请随时从上面的列表中建议哪个是最好和更灵活的库完成任务的替代方法。

任何想法、链接、建议或任何启动都将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T20:55:38.137

以某种方式，第三方库也是从头开始创建的，因此当然可以在不依赖任何第三方库的情况下创建 DICOM 图像处理解决方案。不过，使用整个或部分开源库肯定会在相当短的时间内将您带到功能性解决方案。

您所指的链接中提到的一个第三方库是[mdcm](https://github.com/rcd/mdcm)。这是一个相对轻量级的开源库，支持 WPF（和 Silverlight）。如果你愿意，我很确定你应该能够从这个库中提取与你的项目相关的那些部分。

另一个轻量级库是[Evil DICOM](http://evildicom.rexcardan.com/)。不过，我不完全确定这个库是否具有非常多的图像处理功能。

**5 月 31 日更新：讨论摘要**

[mdcm](https://github.com/rcd/mdcm)是 LGPL 许可下的开源库。SL.DicomToXml (Silverlight) 应用程序中给出了图像渲染用法的示例，同样适用于 WPF 应用程序。在[MainPage 方法的代码隐藏中](https://github.com/rcd/mdcm/blob/master/SL.DicomToXml/MainPage.xaml.cs)，`fileNameButton_Click`有演示 DICOM 图像文件加载和渲染的代码。

[目前没有最新的 mdcm 二进制分发可用，但从mdcm](https://github.com/rcd/mdcm)存储库中的解决方案构建所需的库应该相当容易。[可以使用Git](http://git-scm.com/)客户端获取源代码，也可以通过单击存储库主页上的**ZIP**按钮下载最新版本。

如果您需要更了解 DICOM 图像处理细节，最好先看看 DICOM 标准本身，然后解析 DICOM 图像文件以了解其中包含的信息。一个很好的起点是[官方 DICOM 主页](http://medical.nema.org/)。[此处](http://www.mccauslandcenter.sc.edu/mricro/dicom/index.html)提供了带有软件链接的快速介绍。这里还有一个通用的、更冗长的[教程](http://dicomiseasy.blogspot.se/)。

# c# - 有没有办法检测鼠标点击是否发生在控件或表单上？

> ID：10784513
> 
> 赞同：0
> 
> 时间：2012-05-28T12:14:18.250
> 
> 标签：c#, wpf

我正在研究战舰程序，并一直试图找到一种方法来检测我的鼠标点击是在表单上还是在使用 c# wpf 的图片框上。

```
if (click on form)
{
    do this 
}
else
{
    do this
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:16:37.153

如果您转到您正在使用的图片框的属性并选择事件选项卡，则应该有一个“鼠标点击”事件。

# google-chrome-extension - 使用内容脚本获取选项卡的 DOM

> ID：10784514
> 
> 赞同：1
> 
> 时间：2012-05-28T12:14:27.300
> 
> 标签：google-chrome-extension

我的 popup.html 中有一个脚本：

```
 </body>
 <script src="popup.js"></script>
 </html> 
```

我试图通过它获取特定选项卡的 DOM。更具体地说，我试图确定当前页面上特定选项卡中特定元素的存在，然后在 popup.js 中使用此信息。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:38:05.677

您无法从弹出窗口访问当前页面 DOM。为此，您需要一个内容脚本。首先设置这三个脚本：

*   弹出脚本
*   [背景页面脚本](http://code.google.com/chrome/extensions/background_pages.html)
*   [内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)

有了这些，您可以使用后台脚本作为代理在弹出脚本和内容脚本之间发送消息。[在此处](http://code.google.com/chrome/extensions/messaging.html)阅读有关消息传递的信息。

[您可以使用executeScript](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)而不是内容脚本稍微简化该过程。不过，您仍然需要在弹出脚本和背景页面之间进行通信。

# symfony - 使用“+”作为路线分隔符

> ID：10784518
> 
> 赞同：1
> 
> 时间：2012-05-28T12:14:51.847
> 
> 标签：symfony, routing

在 Sf2 的第一个版本（第一个 Beta 版）中，有一个选项可以声明您的路线分隔符，例如

```
options: { segment_separators: ['/'] } 
```

但是现在，它已经不再使用了，我正在寻找制作漂亮路线的方法，例如：

```
category:
pattern: /category+{cat}+page{page}
defaults: { _controller: MyPrettyBundle:Category:index } 
```

现在我得到这个错误：

找不到“GET /category firstcategory page1”的路由 404 Not Found - NotFoundHttpException 1 linked Exception: ResourceNotFoundException

如您所见，“+”只是从所需路线中删除。

有什么想法可以克服这个讨厌的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:39:41.587

[修复 url 解码问题](https://github.com/symfony/symfony/pull/3780)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:54:19.823

对于 URL 编码，该`+`字符用于对空格进行编码。URL 在解析之前被解码，因此要`+`在 URL 中使用实际字符，您必须将它们编码为`%2B`：

```
/category%2Bfirstcategory%2Bpage1 
```

这不漂亮，所以`+`用作分隔符不是一个好主意。

# git - 如何将更改合并到单个文件，而不是合并提交？

> ID：10784523
> 
> 赞同：457
> 
> 时间：2012-05-28T12:15:12.767
> 
> 标签：git, merge, git-branch

我有两个分支（A 和 B），我想将来自分支 A 的单个文件与来自分支 B 的相应单个文件合并。

* * *

## 回答 #1

> 赞同：754
> 
> 时间：2012-07-21T15:11:42.987

我遇到了同样的问题。准确地说，我有两个分支`A`，`B`文件相同，但某些文件中的编程接口不同。`f`现在，与两个分支的接口差异无关的file 方法在 branch 中进行`B`了更改，但更改对两个分支都很重要。因此，我需要将分支文件合并`f`到分支`B`文件`f`中`A`。

如果我假设所有更改都在两个分支中提交，那么一个简单的命令已经为我解决了这个`A`问题`B`：

```
git checkout A

git checkout --patch B f 
```

第一个命令切换到分支`A`，进入我想要合并`B`文件版本的位置`f`。第二个命令`f`用`f`of修补文件`HEAD`。`B`您甚至可以接受/丢弃补丁的单个部分。`B`您可以在此处指定任何提交，而不必是`HEAD`.

*社区编辑*：如果文件`f`上`B`尚不存在`A`，则省略该`--patch`选项。否则，您将得到“无变化”。信息。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-06-26T12:33:29.613

这使用了 git 的内部 difftool。也许有一点工作要做，但直截了当。

```
#First checkout the branch you want to merge into
git checkout <branch_to_merge_into>

#Then checkout the file from the branch you want to merge from
git checkout <branch_to_merge_from> -- <file> 

#Then you have to unstage that file to be able to use difftool
git reset HEAD <file> 

#Now use difftool to chose which lines to keep. Click on the mergebutton in difftool
git difftool

#Save the file in difftool and you should be done. 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-03T22:18:02.733

这是我在这些情况下所做的。这是一个杂物，但对我来说效果很好。

1.  根据您的工作分支创建另一个分支。
2.  git pull/git merge 包含您要复制的文件的修订版 (SHA1)。所以这将合并你所有的更改，但我们只使用这个分支来获取一个文件。
3.  修复任何冲突等。调查您的文件。
4.  检查你的工作分支
5.  签出从合并中提交的文件。
6.  提交它。

我尝试打补丁，但我的情况太丑陋了。所以简而言之，它看起来像这样：

工作分支：A 实验分支：B（包含 file.txt，其中包含我想要折叠的更改。）

```
git checkout A 
```

基于A创建新分支：

```
git checkout -b tempAB 
```

将 B 合并到 tempAB

```
git merge B 
```

复制合并的 sha1 哈希：

```
git log

commit 8dad944210dfb901695975886737dc35614fa94e
Merge: ea3aec1 0f76e61
Author: matthewe <matthewe@matthewe.com>
Date:   Wed Oct 3 15:13:24 2012 -0700

Merge branch 'B' into tempAB 
```

检查您的工作分支：

```
git checkout A 
```

签出您的固定文件：

```
git checkout 7e65b5a52e5f8b1979d75dffbbe4f7ee7dad5017 file.txt 
```

你应该有它。提交你的结果。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-03-28T16:58:58.183

我发现这种方法简单而有用：[How to "merge" specific files from another branch](https://jasonrudolph.com/blog/2009/02/25/git-tip-how-to-merge-specific-files-from-another-branch/)

> 事实证明，我们太努力了。我们的好朋友 git checkout 是完成这项工作的正确工具。
> 
> `git checkout source_branch <paths>...`
> 
> 我们可以简单地为 git checkout 提供功能分支 A 的名称以及我们要添加到主分支的特定文件的路径。

请阅读整篇文章以获得更多理解

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-07-03T18:49:33.943

你可以使用：

```
 git merge-file 
```

提示：[https ://www.kernel.org/pub/software/scm/git/docs/git-merge-file.html](https://www.kernel.org/pub/software/scm/git/docs/git-merge-file.html)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-02-23T09:13:16.687

以下命令将 (1) 比较正确分支的文件，以便掌握 (2) 交互式询问您要应用哪些修改。

git checkout --patch master

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-14T04:42:51.857

您可以签出要合并的文件的旧版本，将其保存为不同的名称，然后在这两个文件上运行您的合并工具。

例如。

`git show B:src/common/store.ts > /tmp/store.ts`（其中 B 是分支名称/提交/标签）

`meld src/common/store.ts /tmp/store.ts`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-21T02:50:19.503

*我的编辑被拒绝了，所以我在此处附上了如何处理来自远程分支的合并更改。*

如果您必须在错误合并后执行此操作，您可以执行以下操作：

```
# If you did a git pull and it broke something, do this first
# Find the one before the merge, copy the SHA1
git reflog
git reset --hard <sha1>

# Get remote updates but DONT auto merge it
git fetch github 

# Checkout to your mainline so your branch is correct.
git checkout develop 

# Make a new branch where you'll be applying matches
git checkout -b manual-merge-github-develop

# Apply your patches
git checkout --patch github/develop path/to/file
...

# Merge changes back in
git checkout develop
git merge manual-merge-github-develop # optionally add --no-ff

# You'll probably have to
git push -f # make sure you know what you're doing. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-22T15:29:57.497

假设 B 是当前分支：

```
$ git diff A <file-path> > patch.tmp
$ git apply patch.tmp -R 
```

请注意，这只会将更改应用于本地文件。之后你需要提交。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-12T16:35:45.913

我会这样做

`git format-patch branch_old..branch_new file`

这将为该文件生成一个补丁。

在目标 branch_old 应用补丁

`git am blahblah.patch`

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2020-12-09T05:29:42.857

```
git checkout <target_branch>
git checkout <source_branch> <file_path> 
```

# php - copyserviceimage 功能 ajax wordpress

> ID：10784525
> 
> 赞同：0
> 
> 时间：2012-05-28T12:15:34.980
> 
> 标签：php, javascript, ajax, wordpress

我的表单中有一个上传字段。

我的 form.php 中有这段代码

```
<form id="photoform" name="photoform" method="post" onSubmit="return false" enctype="multipart/form-data">
                  <div id="upphotosection"></div>
                   <label>Upload photo</label>
                   <input name="uploadphoto" id="uploadphoto" type="file" />
                   <div class="innerformclear"></div>
                   <input id="hidden" value="" name="hidden" type="hidden" />
                   <label>&nbsp;</label>
                   <input name="upphoto_submit" id="upphoto_submit" type="submit" value="Submit"/>
                    <div style="clear:both;">&nbsp;</div>
                   <label>&nbsp;</label>
                   <div id="result_upphoto_submit"></div>
                   </form> 
```

这是formaction.php中的代码

```
header('content-type: application/json; charset=utf-8');
header("access-control-allow-origin: *");

include("../../../wp-load.php");
session_start();

    $err = '';
    $success = '';
    global $wpdb, $PasswordHash, $current_user, $user_ID;

    if($upphoto = $_FILES['uploadphoto']["name"] != '' ){
    $path = 'images/profilephotos/';    
    $upphoto = copyServiceImage($path,$_FILES['uploadphoto']) ;}

    $postid = 52;

############### Check Duplication
$sel_photo = "SELECT * FROM `pro_table` WHERE `post_id` = '".$postid."'";
$sel_res = mysql_query($sel_photo) ;
if(mysql_num_rows($sel_res) == 0){
$ins_photo = "Insert into pro_table (post_id,photo_photo,int_status) values ('$postid','$upphoto','0')";
$ins_res = mysql_query($ins_photo);
}
else{
$upd_photo = "Update pro_table set photo_photo = '$upphoto' ,int_status='0' where  post_id = '$postid' ";
$upd_res = mysql_query($upd_photo);
}

echo $_GET['callback'] . '('.json_encode("success").')'; 
```

这是java脚本文件中的代码。

```
$(document).ready(function() {  
///////////// Submit action for upload photo        
    $("#upphoto_submit").click(function() {

        if(document.getElementById('uploadphoto').value == '' ){
            alert("Please upload Photo");
            document.getElementById('uploadphoto').focus();
            return false;
        }
        else {
            $('#result_upphoto_submit').html('<img src="http://www.test.com/test/uploads/2012/04/ajax-loader.gif" class="loader" align="absmiddle" />&nbsp;').fadeIn(); 
                var input_data = $('#photoform').serialize();
                $.ajax({
                type: "POST",
                url:  "http://www.test.com/test/themes/test/formaction.php",
                dataType: 'jsonp',
                data: input_data,
                success: function(msg){
                    $('#result_upphoto_submit').html('&nbsp;');
                    if(msg == 'success') {
                        msg = '<p class="success_custom">Photo successfully added.</p>';
                        $('<div>').html(msg).appendTo('div#upphotosection').hide().fadeIn('slow');
                    } else {

                        msg = ' Exists';
                        alert("Error in updation");

                    }

                }
                });
                return false;
        }       

        }); 
}); 
```

如果我浏览图像并单击提交，它会向我显示成功消息`Photo successfully added`。但是个人资料照片文件夹中没有图像，并且管理面板中没有存储数据。我无法追踪错误。我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:28:54.880

有错误吗？

```
$_FILES["uploadphoto"]["error"]; 
```

我也不知道 wordpress 如何处理图像，但我想念文件移动：

```
if ($_FILES["uploadphoto"]["error"] != UPLOAD_ERR_OK) {
   $tmp_name = $_FILES["uploadphoto"]["tmp_name"];
   $name = $_FILES["pictures"]["name"];
   $path = "images/profilephotos/".$name;
   move_uploaded_file($tmp_name,$path);
} 
```

或者我想它在这里被调用？

```
$upphoto = copyServiceImage($path,$_FILES['uploadphoto']) ;} 
```

# javascript - Jquery onClick页面加载缓慢？

> ID：10784530
> 
> 赞同：0
> 
> 时间：2012-05-28T12:16:06.607
> 
> 标签：javascript, jquery, onclick, typo3

我认为我的 jquery ajax 页面加载有点慢。当我使用 onClick 处理程序单击我的 href 时，有时它没有响应，我必须双击？我怎样才能避免这种情况？

```
 <a target="_blank" class="arrow" href="javascript:void();" 
            onclick="f(\"value",\"value\");return false;">
                <div class="teaser">
                  <h3></h3>
                  <p class="subheadline"></p>
                  <hr class="divider">
                  <p></p>
                </div>
                <img height="353" class="img" src="example.jpg" width="374">
      </a> 
```

也许是因为 empy h3 和 p 标签？感觉有点迟钝？？

我的函数 f 是：

```
function f (url, id)
{
  var btn = $(this);
  if (btn.data('running'))
     return;

   $j('#tx #singleview').empty();
   btn.data('running', true);

   url="http://"+url+"index.php?id="+id+"&eID=tx";
   url_stack.push(url);

   $j.getJSON(url, function(json) {

    $('#container').css({
      "z-index" : "-100",
      "margin-left" : "148",
      "top" : "-800"      
    })

   $('#container').animate({
      "opacity": "0.0",
      "top": '+=800'
    }, 900, function() {
      // Animation complete.
    });

   var singleview = $j('#tx #singleview');
   singleview.css({
     "position": "relative",
     "top": "-800px",
     "height": "800px"
   })
   singleview.append($j("#singleviewTemplate").tmpl(json).css({
     "visibility": "visible",
     "position": "relative"
     }));
   singleview.animate({
     opacity: 100.0,
     top: 0
   }, 900, function() {
     // Unset it here, this lets the button be clickable again
     btn.data('running', false);
   });      
 });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:52:36.970

经过数小时的实验，我能够加快速度：

1.  动画完成后，我稍后会触发我的 ajax getjson 加载。
2.  我已经将许多 Jquery animate css append 函数合并在一起

    ```
    function singleview (url, id)
    {
    var btn = $(this);
    if (btn.data('running'))
      return;

    var c = $('#container');
    var s = $j('#tx #singleview');

    s.empty();
    btn.data('running', true);

    url="http://"+url+"index.php?id="+id+"&eID=tx";

    if (url_stack.length == 0 && url_back.length > 0)
    {
      bak = url_back.pop();
      url_stack.push(bak);
      url_back.push(bak);
      url_stack.push(url);
    } else
    {
      url_stack.push(url);  
    }

    c.css({
      "z-index" : "-100",
      "position": "absolute",
      "left" : "140px",
      "top" : "0px"
    }).animate({
      "position": "relative",
      "opacity": "0.0",
      "top": "+=600px",
      "left" : "140px"
    }, 900, function() {
      // Animation complete.
      $j.getJSON(url, function(json)
      {
        s.css({
          "position": "absolute",
          "top": "-600px",
          "height": "600px",
          "left" : "140px"
        }).animate({
          "opacity": "100.0",
          "top": "10px",
          "left" : "140px"
        }, 900, function() {
          // Unset it here, this lets the button be clickable again
          btn.data('running', false);
        }).append($j("#singleviewTemplate").tmpl(json).css({
          "visibility": "visible",
          "position": "relative"
        }));
     });      
    }); 
    ```

    }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:59:13.403

您应该使用`FireBug`或其他东西来检查服务器的响应时间，但绝对应该从指定它的 TYPO3 开始您的问题。

在某些情况下， Bare`eID`可以消耗大约 700 毫秒来呈现最简单的输出（“bare”字的重音）。如果在您的扩展中，您有大量来自 DB 的数据 + 一些表格，`joins`则呈现非常简单的结果集可能会非常慢。它当然可以改进，但首先你必须确定问题出在哪里。

我们上次遇到这样的问题，即仅来自 5k 条记录的分页结果需要大约 30 秒来为 JS 网格呈现每页 50 个项目的排序项目（冲击），经过一些简单的调整后，我们完成了每个结果页面 500 毫秒。这绝对是关于我们在`TYPO3`扩展中的错误查询，而 AJAX 只能等待，我认为你应该在一开始就在那里搜索。

*编辑：*

为了确保在 TYPO3 方面有很长的时间，您还应该创建一个`static file`包含一些示例数据集（类似于 TYPO3 预期的数据集）并检查它的行为方式。

# python - 不能以非 root 用户身份使用 multiprocessing.Event

> ID：10784532
> 
> 赞同：0
> 
> 时间：2012-05-28T12:16:15.277
> 
> 标签：python, multiprocessing, root

只需两行即可重现它，如下所示：

```
from multiprocessing import Event

e=Event() 
```

给出：

```
Traceback (most recent call last): 
  File "<stdin>", line 1, in <module> 
  File "/home/work/python2.7/lib/python2.7/multiprocessing/__init__.py", line 206, in Event
    from multiprocessing.synchronize import Event 
  File "/home/work/python2.7/lib/python2.7/multiprocessing/synchronize.py", line 33, in <module>
    " function, see issue 3770.") 
ImportError: This platform lacks a functioning sem_open implementation, therefore, the required synchronization primitives needed will not function, see issue 3770. 
```

但是，错误消息不是真的。如果 Python 是由 root 安装的，并且我以 root 身份登录，它运行良好。

我猜普通用户缺乏运行 API 的权限，但我不知道是哪个。

如何在 linux2.6.9 上使用 Python 2.7.1 解决这个问题？

# java - 此 WSDL 是否缺少方法？

> ID：10784534
> 
> 赞同：0
> 
> 时间：2012-05-28T12:16:24.903
> 
> 标签：java, wcf, wsdl

```
 <wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:tns="http://tempuri.org/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" name="myWCF" targetNamespace="http://tempuri.org/">
<wsdl:import namespace="" location="http://ip_address/Test/myWCF.svc?wsdl=wsdl0"/>
<wsdl:types/>
<wsdl:service name="myWCF"/>
</wsdl:definitions> 
```

它是从 WCF 生成的。是不是缺少了什么？因为当我从 Java 生成它的客户端时，我没有得到方法，而且它们似乎不是我的 wsdl。

如果此 wsdl 缺少方法，或者服务器端有问题，有人可以确认我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:23:46.850

这取决于所包含的 WSDL 文档中包含的内容。请参阅第二行中的 WSDL：

```
<wsdl:import namespace="" location="http://ip_address/Test/myWCF.svc?wsdl=wsdl0"/> 
```

# asp.net-mvc - mvc3 最大长度输入

> ID：10784538
> 
> 赞同：18
> 
> 时间：2012-05-28T12:16:48.223
> 
> 标签：asp.net-mvc, asp.net-mvc-3, editorfor

这可能有点笼统，但我想限制编辑器字段中输入的字符数。

```
@html.EditorFor(m=>m.id,new {@maxlength="10"}) 
```

这似乎不起作用。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-29T06:44:18.713

尝试将其更改为

```
@Html.TextBoxFor(m=> m.id,  new { maxlength="10" }); 
```

EditorFor 使用模板，您可以自己覆盖这些模板。我认为他们没有像这样考虑您传入的属性。TextBoxFox<> 在代码中生成它，并且应该可以正常工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-21T15:52:33.573

我能够使用 EditorFor 并使用多个属性使其在 IE11 中工作。

```
@Html.EditorFor(model => model.CourseNumber, new { htmlAttributes = new { @style = "width:100px", @maxlength="10" } }) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-03T05:51:09.843

在 MVC3 中，这更好：

```
[StringLength(10, ErrorMessage = "Name cannot be longer than 10 characters.")]
public string Name { get; set; } 
```

指定数据字段中允许的最小和最大字符长度。就像在这个[https://stackoverflow.com/a/6802739/2127493](https://stackoverflow.com/a/6802739/2127493)

# apache - Apache、NodeJS 和 socket.io：使用 Apache 或 NodeJS 作为反向代理？

> ID：10784549
> 
> 赞同：1
> 
> 时间：2012-05-28T12:17:28.780
> 
> 标签：apache, node.js, proxy, socket.io, reverse

我有一个 Apache-Server 在端口 80 上运行我的 PHP-Application。PHP-Application 通过端口 3000 与 NodeJS-Server (socket.io) 通信。

由于防火墙限制，我应该只使用端口 80。因此，我需要指定一个类似 /nodejs/ 的 url，它在服务器内部反转为端口 3000（NodeJS）。

使用 Apache (mod_proxy) 作为反向代理将 NodeJS-Data 转发到 NodeJS 是否更好（就性能而言），还是在 NodeJS 上这样做更好（例如使用[https://github.com/nodejitsu/node- http-proxy](https://github.com/nodejitsu/node-http-proxy)），因此让 NodeJS 在端口 80 上运行并将所有非 NodeJS 数据在内部转发到 Apache（然后它将在另一个端口上运行）？

与普通的 HTTP 请求相比，我可能有更多的 socket.io 调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:40:50.333

如果你只需要代理，你应该使用专门为此设计的 HAProxy 之类的东西。

Apache 并不擅长代理，因为它必须为每个连接分叉或启动一个新线程（因此失去了 Node 的所有好处）。

除此之外，如果我需要优化一些东西，我根本不会使用 Apache，NGINX 作为服务器要好得多（例如，它甚至比 Node.js 更快地提供静态文件）。

如果您正在寻找 Node.js 代理解决方案 HTTP-Proxy 和 Bouncy 是最好的：

*   [https://github.com/nodejitsu/node-http-proxy](https://github.com/nodejitsu/node-http-proxy)
*   [http://substack.net/posts/5bd18d](http://substack.net/posts/5bd18d)

资源：

*   [http://haproxy.1wt.eu/](http://haproxy.1wt.eu/)
*   [http://arstechnica.com/business/2011/11/a-faster-web-server-ripping-out-apache-for-nginx/](http://arstechnica.com/business/2011/11/a-faster-web-server-ripping-out-apache-for-nginx/)

# android - 带有动画的android图像切换

> ID：10784555
> 
> 赞同：3
> 
> 时间：2012-05-28T12:17:55.963
> 
> 标签：android, android-layout, android-widget

我想制作一个画廊类型的视图，它看起来像一个同时具有 3 个图像的图像切换器。从这三个中，中间图像会更大，其他两个将是透明的，中间图像看起来像附图中所示的突出显示。我想做一些旋转木马之类的动画。

在当前场景中，我只是更改图像视图的来源而不做任何动画，所以我需要在其中做动画。希望你明白这个问题。

如果有任何问题，那么写我会尝试提供更多信息。所以请帮助我如何做到这一点。

我认为 imageswitcher 可以做到这一点，但我不知道如何获得这种类型的动画

当我按下左键“玩具总动员”时，您可以[在这里](http://i.stack.imgur.com/JkcI8.png)看到三个图像，它们是拉托维尔、史瑞克和玩具总动员，图像应该出现在中间，带有动画（缩放和平移）并改变透明度和隐藏图像（以防更多然后 3 个图像）应该代替“玩具总动员”，而“史莱克”图像将出现在拉托维尔（最左边）的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:16:46.550

使用标准图库[http://developer.android.com/resources/tutorials/views/hello-gallery.html](http://developer.android.com/resources/tutorials/views/hello-gallery.html) 可以自定义。

# php - 如何使用 phlanger 转换现有的 php 应用程序

> ID：10784558
> 
> 赞同：1
> 
> 时间：2012-05-28T12:18:23.103
> 
> 标签：php, .net, codeigniter, facebook-authentication, appharbor

PHP 应用程序使用 codeigniter 框架 2.2。我们如何转换它以便它可以托管在.net 云托管平台中，例如支持[Phalanger](http://phalanger.codeplex.com/)转换的 PHP 代码的[AppHarbor 。](https://appharbor.com/)

PHP 应用程序还使用 Facebook api 进行 facebook-authentication，但它不起作用。不确定这是不是问题？`$facebook->getUser()`返回 0。

我们不确定缺少哪个程序集引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:26:37.723

查看[启用 Phalanger 的 Wordpress 存储库](https://github.com/appharbor/Wordpress)，其中包含使 Wordpress 工作的所有必要步骤。对于您正在尝试做的事情，这应该是一个类似的过程。与基本 Wordpress 安装的差异[可在此处获得，](https://github.com/appharbor/Wordpress/compare/29b3dea12dac59fe56444c42c79bea08b0e1b3e9...master)并且可以更清楚地了解正在发生的事情。

该过程相对简单 - 您需要对所有必需的 Phalanger 程序集进行 bin 部署并在 web.config 中引用它们。在您开发/调试应用程序时，我建议您卸载 Phalanger 并获取二进制文件的副本，以便您可以根据需要快速将它们添加到您的项目中。这样，Phalanger 在 GAC 中将不可用，如果您在 IIS 7 中运行该应用程序，它将更类似于 AppHarbor 的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:07:50.027

Phalanger 不能“转换”PHP 应用程序，它只是在 .NET 之上执行 PHP 代码的运行时层。

# tomcat - 少量用户的 Tomcat 吞吐量限制

> ID：10784560
> 
> 赞同：0
> 
> 时间：2012-05-28T12:18:38.423
> 
> 标签：tomcat, throughput

我们有一个 webapp 服务于我们的一项服务的请求。我们让它在 Tomcat 7 服务器上运行。如下所述，不需要更多细节，因为我们可以创建的最基本的 Servlet 具有相似的结果。

我们使用 jmeter 运行负载测试，其中不同数量的并发线程向我们的服务发出请求一分钟。根据结果​​，我们生成了一些图表，其中包含平均响应时间与并发线程，以及每秒请求数与并发线程。

在我们的测试中大约有 10 个并发线程时，我们发现应用程序管理的吞吐量存在限制。从该线程数开始，平均响应时间会增加，并且每秒的请求数是稳定的。

我们已经测试了我们的应用程序的一些更改，甚至删除了所有应用程序逻辑并返回一个静态响应。并且还对一个什么都不做的基本 Servlet 运行相同的测试，我们得到了类似的结果：更好的平均响应时间和吞吐量值，但在测试中达到了大约 10 个并发线程的限制。

我们还使用 Apache Benchmark 运行了类似的测试，以消除测试工具的问题。

测试在 2 个服务器池中运行。在本地计算机上运行时，它们给出了类似的结果，但在大约 5 个并发线程时达到了吞吐量限制。

这是吞吐量图表。请注意，每一行的值并不重要（例如：一些删除了数据库访问，甚至大多数应用程序逻辑都需要更少的时间）。

[吞吐量图表](http://i46.tinypic.com/2cxstw2.png)

我们想要了解的是吞吐量限制来自哪里以及我们可以做些什么来改进它。

谢谢，豪尔赫

PS：我会添加图片而不仅仅是一个链接，但看起来我没有足够的声誉:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:32:18.570

在将 jvm 调整到最佳设置后，限制将取决于您正在运行的硬件。线程需要 cpu 才能运行，并且添加更多线程只有在其他线程被 IO 之类的东西阻止执行时才有帮助，即使容器线程会增加开销。当您达到该限制时，您将需要添加更多硬件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:25:27.677

tomcat 性能问题的主要原因之一是默认 jvm 设置，使用 -Xmx 参数增加分配给运行 tomcat 的 JVM 的内存量。

**-Xmx512m 将允许最大 512MB 分配给堆。**

此外，在进行更改之前，请从 tomcat 默认页面 > 状态检查分配给 tomcat 的内存

并在增加 jvm 堆大小后检查状态。

**还可以使用 -XX:PermSize 和 -XX:MaxPermSize 增加 perm gen 空间。**

有关更多信息，请查看此[页面](http://www.tomcatexpert.com/blog/2011/11/22/performance-tuning-jvm-running-tomcat)

# asp.net - 如何允许 ASP.NET 4.0 在 IIS 5.1 上查询 Sybase 数据库

> ID：10784562
> 
> 赞同：0
> 
> 时间：2012-05-28T12:18:56.107
> 
> 标签：asp.net, iis, .net-4.0, sybase, iis-5

如何允许 ASP.NET 4.0 在 IIS 5.1 上查询 Sybase 数据库？

我一直在调试模式下运行我的网站并且一切正常，当我发布网站并在 IIS 5.1 中添加一个虚拟目录时，查询没有运行。

我是否必须在我的网站或 IIS 中放置一些权限或任何类似的东西以允许数据库*查询*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:15:05.953

我发现异常是“找不到 DSN”，所以我必须在系统级别而不是用户级别定义 ODBC 服务器：

> 控制面板 -> 管理工具 -> ODBC ... -> 用户与系统

# jquery-ui - 更改 jquery 可排序列表中项目的颜色

> ID：10784566
> 
> 赞同：0
> 
> 时间：2012-05-28T12:19:45.580
> 
> 标签：jquery-ui, jquery-ui-sortable

我正在为孩子们使用可排序的 jQuery UI 制作一个简单的测验/游戏。我想让用户将列表排序为他们认为正确的顺序，然后按一个按钮检查他们的答案......然后将正确的项目涂成绿色，不正确的项目涂成红色。

所以，我的主要问题是如何检查列表并为项目着色。

我找不到动态为项目着色的方法；并且不确定jQuery中是否有一种简单的方法来检查订单。

注意：我不想检查服务器端，所以假设脚本中的某些内容标识了正确的顺序（我知道它可能允许作弊，但我并不担心！）。

我对 jQuery 很陌生！:)

**编辑 - 认为我有一个解决方案....**

我想我已经做到了。我的代码如下。我将此[代码用作基线](https://stackoverflow.com/questions/2442232/getting-the-position-of-the-element-in-a-list-when-its-drag-dropped-ui-sortabl/2443081#2443081)，然后使用 .addClass() 和 .removeClass() 添加颜色内容。这种方法好吗？（代码有点粗糙和准备好了；我不确定这是最好的方法）。

```
$(function() {
    $( "#button" ).click(function() {
        var result = $('#sortable').sortable('toArray');
        var correct = new Array("1","0","2","3","4","5","6");
        var myID;

        for (n=0;n<7;n++)
        {
            myID = "#" + n;
                $( String(myID) ).removeClass( "correct" );
                $( String(myID) ).removeClass( "wrong" );
        }

        for (i=0;i<result.length;i++)
        {

            if (result[i] == correct[i])
            {
                myID = "#" + result[i];
                $( String(myID) ).addClass( "correct" );
            }
            else
            {
                myID = "#" + result[i];
                $( String(myID) ).addClass( "wrong" );
            }

        }

        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:38:11.650

这更像是一个逻辑问题。

分别创建一个带有红色背景和绿色背景的 CSS 类“错误”和另一个“正确”类，如下所示。

```
.error {   background-color: red;}
.correct {   background-color: green;} 
```

伪代码考虑一般 MVC 模式 [HttpPost] 表示 HTTP POST FORM 请求我假设您的控制器名称是 QuizController 然后操作是：

```
public ActionResult RenderPuzzle(int id)
{
  return view(....);//modeled with list of options sorted with class set to "correct" for each sortable list element in view for the puzzle option.
}

{HttpPost]
public ActionResult RenderPuzzle(Option opts, int id)
{
    //check if model state is valid then check the ordering and set the class to error for wrong ordered list elements and also you can display the correct order adjacent to it. Form your view accordingly
    return view(...);
} 
```

您也可以通过 ajax 来做到这一点，这将需要您付出更多的努力。使用 ajax，您还需要在客户端应用部分业务逻辑，并使用 jquery 方法将类（错误和正确）应用于可排序元素。实际结果可以通过ajax请求拉取，然后与可排序的列表状态顺序进行比较。

# objective-c - ios中的二维数组

> ID：10784567
> 
> 赞同：9
> 
> 时间：2012-05-28T12:19:50.980
> 
> 标签：objective-c, ios, nsarray

我想在ios中使用二维数组，例如我想为`tableview`数据源准备一个数组，

`UITableViewCell array[sections][rows];`

像这样的东西，在这里我也不能预先声明尺寸。

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-28T12:21:51.047

```
NSMutableArray *dataArray = [[NSMutableArray alloc] initWithCapacity: 3];

[dataArray insertObject:[NSMutableArray arrayWithObjects:@"0",@"0",@"0",nil] atIndex:0];
[dataArray insertObject:[NSMutableArray arrayWithObjects:@"0",@"0",@"0",nil] atIndex:1];
[dataArray insertObject:[NSMutableArray arrayWithObjects:@"0",@"0",@"0",nil] atIndex:2]; 
```

这就是您从数组中选择值的方式

```
NSMutableArray *subArray = [dataArray objectAtIndex:2];
NSLog(@"data : %@",[subArray objectAtIndex:0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:38:09.737

设置一个`NSDictionary`并使用一个`NSIndexPath`作为每个单元格的键

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-26T03:31:57.713

语法糖方法。请注意，这种方法不会自动创建`NSMutableArray`给定大小的 a。初始数组大小将为 0, 0。

```
NSMutableArray *yourArray = [@[ [@[] mutableCopy]] mutableCopy];

// add an object to the end of your array
[yourArray[section][row] addObject:@(22)];

// set/change an NSNumber object at a particular location in the 2D array.
yourArray[section][row] = @(22);

// Retrieve a value, converting the NSNumber back to a NSInteger
NSInteger result = [yourArray[section][row] integerValue]; 
```

# jetty - Jetty 集群问题（jettySessions expiryTime 在某个时间后被设置为 0）

> ID：10784568
> 
> 赞同：-1
> 
> 时间：2012-05-28T12:19:54.833
> 
> 标签：jetty, cluster-computing

我们正在使用 Jetty 7.5.1。我们已将 JDBCSessionManager 配置为序列化 JSESSIONID，我们将 MaxInactiveTimeInterval 设置为 120。我们在负载均衡器上运行了两个节点，我们观察到，每当来自 node1 服务的会话的请求转到 node2 时，expiryTime 就会得到设置为零。

当我们尝试在反序列化的构造函数上调试 jetty-server src 时，AbstractSession 似乎没有序列化或设置 _maxIdleMs，而在另一个构造函数中它确实如此。

因此，Session 内部的访问方法是根据 Session 的 _maxIdleMs 设置 SessionData 的 expiryTime，该值为零。这使到期时间为零。这是一个错误/我们是否缺少 Jetty 中的一些配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:05:17.493

看起来 Jan 已经整理好了：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=380866](https://bugs.eclipse.org/bugs/show_bug.cgi?id=380866)

# ruby-on-rails - 如何在 rails 3.0.0 中安装虾插件

> ID：10784570
> 
> 赞同：-1
> 
> 时间：2012-05-28T12:19:58.093
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如何安装虾插件。现在我正在使用这个命令。“rails plugin install [https://github.com/prior/prawnto.git](https://github.com/prior/prawnto.git) ”。它在控制台中抛出以下错误。

```
Aptana Studio Workspace1/rails3/config/application.rb:1:in `<top (required)>': uninitialized constant Object::S (NameError)
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.0/lib/rails/commands.rb:15:in `require'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.0/lib/rails/commands.rb:15:in `<top (required)>'
    from script/rails:10:in `require'
    from script/rails:10:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:36:47.907

认为您的问题可能是“3 年前编写的”。我建议使用 gem [http://rubygems.org/gems/prawn](http://rubygems.org/gems/prawn)，它是最新的并且得到很好的支持。把它放在你的gemfile中

```
gem 'prawn' 
```

# sql - 使用 case 语句分配列名

> ID：10784574
> 
> 赞同：-1
> 
> 时间：2012-05-28T12:20:19.823
> 
> 标签：sql, case

我正在尝试将其重写为案例陈述：

```
 SELECT dateadd(day, -@Day, getdate()) AS Dt
    ,COUNT(pkey) AS 'BlockerOut'
  FROM tablename
  WHERE PROJECT='10270' AND RESOLUTION='1'
        AND CREATED>dateadd(day, -(30+@Day), getdate()) AND CREATED<dateadd(day, -@Day, getdate())
        AND PRIORITY='1' AND (DATEDIFF(hour, [CREATED], [RESOLUTIONDATE]))>4) t1
JOIN
(SELECT dateadd(day, -@Day, getdate()) AS Dt
    ,COUNT(pkey) AS 'BlockerIn'
FROM jobissue
WHERE PROJECT='10270' AND RESOLUTION='1'
        AND CREATED>dateadd(day, -(30+@Day), getdate()) AND CREATED<dateadd(day, -@Day, getdate())
        AND PRIORITY='1' AND (DATEDIFF(hour, [CREATED], [RESOLUTIONDATE]))<=4) t2
        ON t1.Dt = t2.Dt 
```

我已经走到了这一步，无法弄清楚如何比列更进一步

```
SELECT dateadd(day, -@Day, getdate()) AS Dt, 
CASE  
WHEN PRIORITY='1' AND (DATEDIFF(hour, [CREATED], [RESOLUTIONDATE]))<=4 then  (pkey)   end  'BlockerIn'
FROM [jobissue] 
WHERE PROJECT='10270' AND RESOLUTION='1'
AND CREATED>dateadd(day, -(30+@Day), getdate()) AND CREATED<dateadd(day, -@Day, getdate())
group by PRIORITY, CREATED, resolutiondate, pkey 
```

这行得通..但是对于两列我得到一个错误：

```
SELECT dateadd(day, -@Day, getdate()) AS Dt, 
CASE  
WHEN PRIORITY='1' AND (DATEDIFF(hour, [CREATED], [RESOLUTIONDATE]))<=4 then  (pkey)   'BlockerIn'
WHEN PRIORITY='2' AND (DATEDIFF(hour, [CREATED], [RESOLUTIONDATE]))>24 then  (pkey)   'CriticalOut'
end
FROM jobissue
WHERE PROJECT='10270' AND RESOLUTION='1'
AND CREATED>dateadd(day, -(30+@Day), getdate()) AND CREATED<dateadd(day, -@Day, getdate())
group by PRIORITY, CREATED, resolutiondate, pkey 
```

消息 102，级别 15，状态 1，第 18 行“BlockerIn”附近的语法不正确。

我无法计算出多个列名的语法。请帮帮我？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:21:33.433

这就是我的意思

```
CASE WHEN PRIORITY='1' then  (ID)   END as 'BlockerIn',
CASE WHEN PRIORITY='2' then  (ID)  END  as 'CriticalOut' 
```

这将创建两个包含值的列。

如果您想要一列具有多个值，您会这样做

```
CASE WHEN PRIORITY='1' then  'BlockerIn' 
WHEN PRIORITY='2' then  'CriticalOut' END  AS Priority 
```

# php - 在 php 中使用 SOAP 和 WSDL 将数据从表单传递到 Web 服务器

> ID：10784575
> 
> 赞同：0
> 
> 时间：2012-05-28T12:20:19.720
> 
> 标签：php, soap

我是 SOAP 和 WSDL 的新手。我必须从表单中获取数据并通过 SOAP 将其传递到 Web 服务器。我有 WSDL 地址：...我怎样才能做到这一点？我必须进行一些配置或安装一些东西吗？请帮助..我还有一个名为：的函数，它在输入中采用以下参数：

你能给一些建议或例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:36:23.083

您的服务网址不适合我，这是 php 中的肥皂网络方法调用。检查这个

```
 $client = new SoapClient("http://www.gerovital.local/extras/server.wsdl");
      $params = array (
            "telefon" => 742209305,
            "cod" => "a4urv6bs",
            "ip" => "192.168.55.78"
    );

    $response = $client->__soapCall('inscriereWeb',array($params)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:20:53.007

你需要使用

```
$response = $client->__soapCall('inscriereWeb',array($params)); 
```

代替

```
$response $client->__soapCall('inscriereWeb',array($params)); 
```

这会将您的 web 服务调用的返回分配给变量 $response。

然后，您可以使用`var_dump($response);`来检查 Web 服务响应。

# javascript - Create an alert on click of a button

> ID：10784581
> 
> 赞同：0
> 
> 时间：2012-05-28T12:21:02.460
> 
> 标签：javascript, jquery

I create a button:

```
var removeButton = document.createElement('button');
    $(removeButton).attr('class', 'removeProduct');
    $(removeButton).append(document.createTextNode('X'));
    $(removeButton).data('divId', 'productLine' + numProductsInCart); 
```

This works, the button appears.

However, when I try to produce an alert on that button being clicked it doesn't work. I click the button and it doesn't do anything.

Here is what I have got to so far:

```
$('.removeProduct').click(function() {
    alert("Hey");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:24:36.460

I am assuming you are attempting to bind the event handler before your add your button to the DOM. If that's the case, you need to delegate the event handler higher up the DOM tree:

```
$("#someAncestorElement").on("click", ".removeProduct", function() {
    alert("Hey");
}); 
```

This works because DOM events tend to bubble up the tree from the element at which they originate. You can capture the event at any ancestor element. The [`on` method](http://api.jquery.com/on/) will check whether the event target matches the selector, and run the event handler if so. Note that if you're using a version of jQuery below 1.7 you will need to use [`delegate`](http://api.jquery.com/delegate/) instead of `on`.

Alternatively, you could bind the event handler after you've created the element:

```
$(removeButton).on("click", function() {
    alert("Hey");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:23:38.767

Try this

```
$(document).ready(function(){
    $('.removeProduct').live("click", function() {
        alert("Hey");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:24:00.607

You might be trying to select the button (`$('.removeProduct')`) before you have added it to the document (I don't see in your sample code where you're adding it to the document). Can't you use your existing `removeButton` reference when you add the `onclick` handler?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T12:24:15.000

Make sure that the first bit of code has been run before the second. Otherwise, it has not updated the class of the button to be `removeProduct` and has nothing to bind to.

```
$(document).ready(function(){
  $('.removeProduct').click(function() {
    alert("Hey");
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T12:24:35.290

try `on` method:

```
$('<button>X</button>').addClass('removeProduct').attr('data-Id', 'productLine' + numProductsInCart).appendTo('div');

$('.removeProduct').on('click', function() {
    alert("Hey");
}); 
```

[http://jsfiddle.net/9gJPL/1/](http://jsfiddle.net/9gJPL/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T12:34:44.827

Are you trying to add the click handler before appending the button on screen? This code works for me:

```
// Append the button
​$("body").append(removeButton);​

// Now add the handler
$('.removeProduct').on("click", function() {
    alert("Hey");
}); 
```

Or you can add the handler on the button, before appending:

```
$(removeButton).on("click", function() {
    alert("Hey");
}); 
```

So now, let's refactor the code a little:

```
function clickHandler(e) {
    alert("Hey");
}

var removeButton = $("<button/>")
                    .html("X")
                    .addClass('removeProduct')
                    .data('divId', 'productLine' + numProductsInCart)                    
                    .on("click", clickHandler);

​$("body").append(removeButton);​ 
```

Hope it helps!

# windows - 如何将像素值数组放入 Image 对象（源自 GDIPlusBase）？

> ID：10784582
> 
> 赞同：0
> 
> 时间：2012-05-28T12:21:12.780
> 
> 标签：windows, image, mfc, gdi

我有一个 512*512 字节的图像，我将它的值存储在一个数组中。现在我想将这些值复制到 Image 类的对象中，该对象派生自 GDIPlusBase 类。构造函数仅将流或文件名作为参数。如何将值放入此对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:32:49.940

如果可能，请使用派生自 Image 的 Bitmap-Class。它得到了你想要的构造函数：http: [//msdn.microsoft.com/en-us/library/ms536315%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ms536315%28v=vs.85%29)

PS：如果您真的使用 GDI 而不是 GDI+，请澄清。

# windows-phone-7 - Windows Phone 7：如何将多个查询字符串参数传递给 WMAppManifest.xml 文件中的默认 NavigationPage？

> ID：10784583
> 
> 赞同：0
> 
> 时间：2012-05-28T12:21:21.367
> 
> 标签：windows-phone-7, windows-phone-7.1

我想使用 Windows Phone 7 的 NavigationPage 中的查询字符串将多个值传递给我的默认页面。我传递的方式与使用 NavigationService 传递查询字符串的方式相同，但是当我传递 WMAppManifest.xml 时这不起作用。

```
WMAppManifest.xml: 
 <Tasks>      
  <DefaultTask  Name ="_default" NavigationPage="Page.xaml?param1=val1&param2=val2"/>      
 </Tasks> 
```

请告诉我我在哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:49:33.193

因为您正在编辑一个 XML 文件，而与号是 XML 中的一个特殊字符，所以您需要对字符串进行转义才能使其正常工作。
像这样：

```
<DefaultTask  Name ="_default" NavigationPage="Page.xaml?param1=val1&amp;param2=val2"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:31:37.437

在代码中是这样的：

NavigationService.Navigate(new Uri("/WedstrijdUitslag.xaml?param1=" + value2+ "¶m2=" + value1, UriKind.Relative));

# emacs - 如何使用 align.el 和 `align-current` 轻松对齐 let 表单

> ID：10784588
> 
> 赞同：3
> 
> 时间：2012-05-28T12:21:42.293
> 
> 标签：emacs, elisp

我要对齐

```
(let ((blah  foo)
      (asdfasdf asdasdfafd))
  (message "foo")) 
```

成为

```
(let ((blah     foo)
      (asdfasdf asdasdfafd))
  (message "foo")) 
```

换句话说，让边界值应该正确对齐。

如果我选择前两行，则此功能有效：

```
(defun align-try-1 (beg end)
  (interactive "r")
  (align-regexp beg end "^\\s-*+\\(?:(let\\S-*\\|\\)\\s-*(+\\S-+\\(\\s-+\\)" 1 1 nil)) 
```

但是，我想通过连接到 align 机器来使 align-current 工作。即前两行中的任意点，正确对齐应该发生而不影响第三行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:22:31.363

您无法扫描正则表达式中的 sexps，因为它们是递归扫描的。

我在没有 align 的情况下编写了这个东西（我不确定是否可以使用 align 函数来完成，但只坚持 sexp 移动、goto 和插入对我来说更容易）。

```
(defun align-try-1 (beg end)
  (interactive "r")
  (goto-char beg)
  (let ((endmarker (move-marker (make-marker) end)))
    (catch :break
      (while t
        (catch :continue
          (let ((actual-begin (re-search-forward "(\\([[:space:]\n]*\\)let\\([[:space:]\n]*\\)(" endmarker t))
                 (max-column  0))
            (unless actual-begin (throw :break nil))
            (when (or (in-string-p)
                    (eq (get-char-property actual-begin 'face) 'font-lock-comment-face))
              (throw :continue nil))
            (while (and (< (point) endmarker) (ignore-errors (down-list) t) (ignore-errors (forward-sexp) t))
              (when (looking-at "[[:space:]\n]+") (delete-region (match-beginning 0) (match-end 0)))
              (insert " ")
              (when (< max-column (current-column))
                (setq max-column (current-column)))
              (backward-up-list)
              (forward-sexp))
            (goto-char actual-begin)
            (while (and (< (point) endmarker) (ignore-errors (down-list) t) (ignore-errors (forward-sexp) t))
              (when (looking-at "[[:space:]\n]+") (delete-region (match-beginning 0) (match-end 0)))
              (dotimes (i (- max-column (current-column))) (insert " "))
              (backward-up-list)
              (forward-sexp))
            (goto-char actual-begin)
            )))))) 
```

顺便问一下，你在哪里使用它？

**更新：**添加了在评论或字符串中的检查。

**更新：**删除了强制格式化的东西，因为它有问题并且在原始问题中不需要。

# android - 从数组中获取字符串

> ID：10784589
> 
> 赞同：1
> 
> 时间：2012-05-28T12:21:43.523
> 
> 标签：android, arrays, listview

我想从列表视图中返回选定的值，如果我使用默认列表视图，我可以做到，但现在我自定义列表视图，获得了图像视图、评分栏和一些文本视图。用户选择后如何在 toast 中返回 title 的值？下面是我的代码：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.appslist);

        list=(ListView)findViewById(R.id.lvApps);        

        SoapObject Request = new SoapObject (NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);

        AndroidHttpTransport aht = new AndroidHttpTransport(URL);

        try
        {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapObject resultString = (SoapObject) soapEnvelope.getResponse();          

            String[] strTitle = new String[resultString.getPropertyCount()];
            String[] strDeveloper = new String[resultString.getPropertyCount()];
            String[] strRating = new String[resultString.getPropertyCount()];
            String[] strLogo = new String[resultString.getPropertyCount()];         

            for(int i =0; i<resultString.getPropertyCount(); i++)
            {
                SoapObject array = (SoapObject) resultString .getProperty(i);
                strTitle[i] = array.getProperty(1).toString();  //get title  
                strDeveloper[i] = array.getProperty(3).toString(); //get developer
                strRating[i] = array.getProperty(4).toString(); //get rating
                strLogo[i] = array.getProperty(5).toString();   //get photo             
            }
            adapter=new AppsListAdapter(this, strTitle, strDeveloper, strRating, strLogo);
            list.setAdapter(adapter);

            list.setOnItemClickListener(new OnItemClickListener(){
                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                    Object GetLabel = list.getItemAtPosition(arg2);
                          //Toast here
                    Toast.makeText(getApplicationContext(), GetLabel.toString(), Toast.LENGTH_SHORT).show();                        

            });
        }

        catch(Exception e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:27:58.687

您应该在一个项目中创建所有数据的模型（bean）意味着将数据包装在对象中并创建该模型的数组并将该数组发送到适配器............

但是现在有几种方法可以让你完成任务：

1-您拥有所选项目的位置，该位置可用作 strTitle 中的索引以获取特定标题。

字符串标题 = strTitle[位置]; /// if think can put null and length check if 让它安全

2-您可以使用 findViewbyid 从该视图中查看回调 public void onItemClick(AdapterView arg0, View arg1, int arg2, long arg3) 中的列表视图，您可以获得具有标题的文本视图

String s =(String) ((TextView) view.findViewById(R.id.title)).getText(); //view 被选中的行视图

或者

TextView txt =(TextView)arg0.getChildAt(position-lv.firstVisiblePosition()).findViewById(R.id.mylistviewtextview); //arg0 是父视图 String keyword = txt.getText().toString();

3-

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:32:32.670

试试这个

```
lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position,
                    long arg3) {
                // TODO Auto-generated method stub
                HashMap<String, String> o = (HashMap<String, String>) mylist
                        .get(position);
                Log.v("o", o + "n");
                String d = o.get("the string value you want to retrieve");
                Log.v("Tapped ", d);

            }
        }); 
```

其中“lv”是您的列表视图，mylist 是您的数组列表

# c# - 如何在 C# 中更改 RowsAdded 事件的行颜色

> ID：10784595
> 
> 赞同：0
> 
> 时间：2012-05-28T12:22:29.807
> 
> 标签：c#, datagridview, colors

我有一个 dataGridview，它每 1 分钟刷新一次，并在其中添加新行（dataGridView）。现在我想根据某些条件更改那些新添加的行的前景色。请告诉我如何实现它？

问候祖海布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:52:10.443

为此，您可以从 DataGridView 的 _RowLeave() 事件中播放...同样对于 NewRow()，您可以检查单元格值是否为空白或 Not Exist()，然后它可以应用于 dataGridView 单元格样式.. 如下方式.. ..

```
Form_Load()
{
    DataGridViewCellStyle AStyle = new DataGridViewCellStyle();
    AStyle.BackColor = Color.BlueViolet;

    blah...blah...blah..
}

private void MyDataGrid1_RowLeave(Object Sender, DataGridViewCellEventArgs e)
{
    for (int I1 = 0; I1 < dataGrid1.Columns.Count - 1; I1++)
        {
            if (I1 == 3 || I1 == 5)
                {
                    dataGrid1.CurrentRow.Cells[I1].Style = AStyle;   
                }

    }

} 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T02:30:03.840

您可以在 RowsAdded 事件中更改单元格字体。我在 Visual Basic 中做，所以你可以将它翻译成 c#，这里的代码：

```
 Private Sub DatagridView_RowsAdded(sender As Object, e As DataGridViewRowsAddedEventArgs) Handles DatagridView.RowsAdded
    With DirectCast(sender, DataGridView)
        If .Item(yourColumnIndex, e.RowIndex).Value Is "yourValue" Then
            .Rows.Item(e.RowIndex).DefaultCellStyle.ForeColor = Color.White
            .Rows.Item(e.RowIndex).DefaultCellStyle.BackColor = Color.DarkRed
            .Rows.Item(e.RowIndex).DefaultCellStyle.Font = New Font("Verdana", 8, FontStyle.Strikeout Or FontStyle.Bold)
        End If
    End With
End Sub 
```

我希望这对你有用

# delphi - 编辑提示锁定程序

> ID：10784596
> 
> 赞同：1
> 
> 时间：2012-05-28T12:22:29.740
> 
> 标签：delphi

当用户在我的地图上滚动图像时，我想显示 Map(myclass) 提示。如果我做一些简单的事情，比如让提示说“这里有怪物”，它会起作用，但我要做的是在提示中显示所有怪物的细节。当我这样做时，提示永远不会出现并且程序锁定。也许它太多了？

程序是onmousemove

```
procedure TBaseGameForm.HexMap1MouseMove(Sender: TObject; Shift: TShiftState; X,
Y: Integer);
var
   position:TPoint;
   i : integer;
   totalplayers : integer;
   name : String;
   Life,movement,magical1,magical2,Attack1,Attack2,Crit,Def : String;
 begin
     position := hexmap1.convertcoords(point(x,y),ptXY);
     if FGamePlay.Locations.IndexOfName(inttostr(Position.x)+inttostr(Position.Y)) <> -1 then begin
        if FGamePlay.ShowHints = true then
          exit;
        FGamePlay.ShowHints := true;
        i:=1;
        while i <= FGamePlay.NumberOfHostPlayers do
            begin
              if (FMyPlayers.player[i].Values['posx'] = inttostr(Position.X)) AND (FMYPlayers.player[i].Values['posy'] = inttostr(Position.Y)) then
                 begin
                   With FMyPlayers.player[i] Do begin
                     name := values['name'];
                     life := values['life'];
                     movement := values['move'];
                     magical1 := values['magical1'];
                     Attack1 := 'Magical: '+Magical1+' '+Values['attack1']+'-p'+values['Power1']+'/r'+Values['Range1']+' '+Values['Ticks1']+' Ticks';
                     magical2 := values['magical2'];
                     Attack2 := 'Magical: '+Magical2+' '+Values['attack2']+'-p'+values['Power2']+'/r'+Values['Range2']+' '+Values['Ticks2']+' Ticks';
                     Crit := values['crit'];
                     Def := 'Magic def : '+values['defm']+' Normal def : '+values['defn'];
                   end;
                 end;
            end;
       hexmap1.ShowHint := true;
       hexmap1.Hint := 'Name: '+name+' Life: '+Life+' Move: '+Movement+ #13#10 +Attack1+ #13#10 +Attack2+ #13#10 +Def+ #13#10 +'Crit bonuse: '+crit;
     end
     else
       Hexmap1.ShowHint := false;
       FGamePlay.ShowHints := False;

 end; 
```

我会尽我所能解释它以及我想让它做什么。它首先将 x,y 转换为我的地图（位置）上的一个点。然后它检查一个名为locations 的字符串列表来获取位置值，如果它找到一个它说在那个位置有一个怪物。

我添加了这个额外的部分来看看它是否有帮助，如果我有 fgameplay.showhints = true 那么不需要打开提示或更改 var 因为地图上的区域是相同的，一旦区域发生了变化（鼠标移离怪物）然后fgameplay.showhints 是错误的，如果找到，现在需要新数据。（不确定这是否需要，但听起来不错..）

所以现在它开始寻找要添加到提示的数据。FMyPlayers.player[i] 每个都是一个字符串列表，用于保存不同项目的值。

希望我说清楚了，我已尽我所能。现在它还只是 FMyPlayers，但也会有一个 FTherePlayers，这将是另一个 while 循环，检查 i 与客户端玩家的数量。

有任何问题或不清楚的地方请询问。我的目标是弄清楚为什么它一直冻结，也许我应该做其他事情而不是 onmousemove？欢呼海啸

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T13:09:05.013

尝试在您的 while 循环中添加一个 inc(i) ，您不会增加该值，以便将其锁定在 while 内。

或者最好还是使用 for 循环，因为您已经知道迭代次数。

# java - I如何获取哈希码原始值的值

> ID：10784601
> 
> 赞同：3
> 
> 时间：2012-05-28T12:23:11.773
> 
> 标签：java, hashcode

我有一个字符串的哈希码，现在我想取回原始字符串。有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T12:24:06.363

不，没有这样的方法。哈希函数是有损的。

仔细想想，所有可能字符串的集合*远大于*所有可能整数的集合，因此不可能进行双向映射。

如果可以从其哈希码中恢复字符串，那将能够将任意数量的数据压缩成单个`int`，然后能够完美地重建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:27:44.783

基本上`string`to`hashcode`不是一个`bijection`. 虽然一个字符串只有一个哈希码（给定一个函数），但有无限数量的字符串具有一个哈希码值。

# html - 浮动 div，文本在下面

> ID：10784604
> 
> 赞同：1
> 
> 时间：2012-05-28T12:23:18.220
> 
> 标签：html, word-wrap

[http://www.masterrenny.com/armorsmiths/](http://www.masterrenny.com/armorsmiths/) << 如您所见，我在阻止文本在图像 div 下向右浮动时遇到问题

这是我使用的代码

```
<style>
.prof { width:970px; overflow:hidden; margin-top:20px; }
.prof .title { font-size:35px; float:left; text-transform:uppercase; width:970px; overflow:hidden; font-weight:bold; z-index:9998; border-bottom:solid 1px #CCC; margin-bottom:20px; position: relative; }
.prof .img {width:300px; height:300px; overflow:hidden; margin-bottom:5px; padding:5px; border: solid #CCC 1px; z-index:9999; position: absolute; left:818px; background:white;}
.prof .meta { }
.prof .content {overflow:hidden; position: relative; }
</style>

<!--Prof Start-->
<div class="prof">
<div class="title"><?php the_title(); ?></div>
<div class="meta"></div>
<?php if(has_post_thumbnail()): ?>
<?php $fullImage = wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), 'full'); ?>
<?php $image = wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), 'prof-feature'); ?>
<div class="img"></a> <img src="<?php echo $image[0]; ?>" alt="<?php the_title(); ?>" width='300' height='300' /></div>
    <?php endif; ?>
<?php the_content(); ?>
</div>
<!--Prof End--> 
```

我似乎无法弄清楚:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:39:16.643

将标题 div 移动到“wpslred”中。它将在那个红盒子里

# c# - 字段验证正则表达式

> ID：10784607
> 
> 赞同：0
> 
> 时间：2012-05-28T12:23:27.910
> 
> 标签：c#, asp.net, regex, validation

如果我想将文本框的输入限制为`"t-" + any 6 letters (no digits)`“ `t-jblogg`”

`t-[a-z]*`但多数民众赞成在`t-`任何`letter/combination`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:27:00.190

```
RegularExpressionValidator.ValidationExpression = "^t-[A-Za-z]{6}$" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:27:30.873

这应该工作：`^t-\p{L}{6}$`. 这应该接受任何以 , 开头的字符串`t`，后跟 a`-`和 6 个字母。`\p{L}`表示来自任何语言的任何字母（如此[处](http://www.regular-expressions.info/unicode.html)所述）。如果您只想将其限制为英文字母，则只需使用以下命令：`^t-[A-Za-z]{6}$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:29:40.733

试试这个：

```
RegularExpressionValidator.ValidationExpression = "^t-[a-z]{6}$"; 
```

# c# - Frame.Navigate 和垃圾收集

> ID：10784609
> 
> 赞同：0
> 
> 时间：2012-05-28T12:23:36.000
> 
> 标签：c#, wpf

在我的 WPF 应用程序中，我有一个`Frame`对象和 2 个超链接。单击时，每个超链接都会将框架导航到不同的`Page`对象。

框架使用 导航`Frame.Navigate(new Page1());`。

如果用户在这两个页面之间切换很多次，这些页面都保留在内存中，因此在查看 page1 10 次和 page2 也查看 10 次后，所有 20 个页面都将保留在内存中。

在 WPF 应用程序中导航的正确方法是什么，以便避免此类问题？

**编辑**

每次导航框架时，我也尝试过手动垃圾收集，我使用了以下代码：

```
void ContentFrame_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
{
    GC.Collect();
    Debug.WriteLine("Garbage Collected");
} 
```

这并没有解决问题。

# .net - 如何在 VB.NET 中重命名文件以具有唯一的后缀？

> ID：10784613
> 
> 赞同：5
> 
> 时间：2012-05-28T12:23:52.903
> 
> 标签：.net, vb.net

我了解如何在[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)中重命名文件，正如我在帖子末尾的代码中使用的那样。但是，我想知道是否可以重命名文件，如果文件存在，那么重命名它并将 +1 添加到文件名？

所以如果我运行代码。

'第一次运行

```
My.Computer.FileSystem.RenameFile("c:\test\test.txt", "c:\test\NewName.txt") 
```

'再次运行它，但它应该添加+1，因为文件已经存在，所以它应该是“c:\test\NewName1.txt”

```
My.Computer.FileSystem.RenameFile("c:\test\test.txt", "c:\test\NewName.txt") 
```

更新

我决定与其重命名和+1，不如只给它加上日期戳，所以对于任何像我一样挣扎的人：

```
My.Computer.FileSystem.RenameFile("c:\test\test.txt", "Test" & Format(Date.Now, "ddMMyy") & ".txt") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T12:26:12.270

您需要为此编写自己的逻辑。

该类[`File`](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)有许多处理文件的有用方法。

```
If File.Exists(filePath) Then
  ' Give a new name
Else
  ' Use existing name
End If 
```

该类[`Path`](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)有许多处理文件路径的方法。

```
Path.GetFileNameWithoutExtension(filePath) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T12:27:06.293

```
If System.IO.File.Exists("c:\test\NewName.txt") Then
   ' add +1 or loop exists with increment on the end until file doesn't exist
End If 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-23T08:57:29.673

您无需在`newFileName`参数中提及完整的文件路径，只需在此处提及新文件名，否则您将获得`ArgumentException`.

```
Dim filePath As String = "C:\fingerprint1"

If File.Exists(filePath) Then

    Dim strNewFileName As String = "Fingerprint221"

    My.Computer.FileSystem.RenameFile(filePath, strNewFileName)

 End If 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-02T07:39:42.997

重命名文件的另一种简单方法是使用 System.IO.File 的 Move() 方法。

例子：

```
System.IO.File.Move("C:\temp\file1.txt", "C:\temp\file1_renamed.txt") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-16T12:19:21.710

```
 Public Sub RenameFile(ByRef FileFind As String, ByRef NewReplaceFileName As String)
        Dim Ada As String = Path.GetFileNameWithoutExtension(FileFind)
        'VS2013 Dim Ada As String = File.Exists(FileFind)
        If Ada.Length > 0 Then
            My.Computer.FileSystem.RenameFile(FileFind, NewReplaceFileName)
            Exit Sub
        Else
            MsgBox("File doesn't exists")
        End If
    End Sub 
```

# javascript - Mootools 两种形式

> ID：10784615
> 
> 赞同：1
> 
> 时间：2012-05-28T12:24:01.850
> 
> 标签：javascript, ajax, request, mootools

我的问题是：

我有一张桌子：

```
<table>
  <tr>
    <td>
      <form name="intervalForm">
          <input type="text" name="interval" value="5"></input>
          <input type="submit" value="OK"></input>
      </form>
    </td>
  </tr><tr>
    <td>
      <form name="intervalForm">
          <input type="text" name="interval" value="5"></input>
          <input type="submit" value="OK"></input>
      </form>
   </td>
  </tr>
  ...
</table> 
```

我的 js(mootools) 代码：

```
$('intervalForm').addEvent('submit', function(e) {
        new Event(e).stop();
        var newRequest = new Request.JSON({
           url: 'ajax.php',
           onRequest: function() {},
           onSuccess: function(r){  
          if(r.status){
                 ...do action
              } else {
                 ...error here    
              }
           }
        }).send({data: this});
}); 
```

我的 js 代码仅适用于第一行。我应该怎么做才能使它适用于其他行？谢谢。

# javascript - 是否可以放大 OpenLayers 中的基础层？

> ID：10784620
> 
> 赞同：0
> 
> 时间：2012-05-28T12:24:18.120
> 
> 标签：javascript, mapping, openlayers, wms

我有一个 OpenLayers 地图，它使用[OpenSpace](http://www.ordnancesurvey.co.uk/oswebsite/web-services/os-openspace/api/index.html)作为基础层，并覆盖有我的系统提供的 WMS 层。我遇到的问题是我的 WMS 图层的细节非常精细，OpenLayers 的默认缩放级别不够接近，无法清晰地查看特征（对于背景，它在街道上的映射排水沟通常是对面）。

客户对保持基础层质量没有真正的兴趣，并且愿意以损失基础层质量为代价放大。我似乎无法在开放层中实现这一点。有谁知道如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:36:32.567

看看 OpenLayers 的 ClientZoom 功能：[http ://dev.openlayers.org/examples/clientzoom.html](http://dev.openlayers.org/examples/clientzoom.html)

# java - 如何退出循环？

> ID：10784627
> 
> 赞同：0
> 
> 时间：2012-05-28T12:24:55.417
> 
> 标签：java

我有以下代码。我写了一个 for 循环，里面有 switch 语句。开关有两种情况，如果`i==someOtherValue`为真，则整个循环应该退出。

```
for (//iterate over elements){
    int i = someValueTakenFromLoop;
    if(i==someOtherValue){

        switch(i){
            case 5:
                //some logic
                break;
            case 6:
                //some logic
                break;
         }
     }
 } 
```

在迭代 if`i==someOtherValue`为 true 时，它​​应该退出循环。我需要将 break 语句保留在侧开关之外吗？

```
 for(//iterate over elements){
        int i = someValueTakenFromLoop;
        if(i==someOtherValue){
            switch(i){
                case 5:
                    //some logic
                    break;
                case 6:
                    //some logic
                    break;
            }
            break;
         }
     } 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T12:27:20.870

```
mylabel:
for(...){
   switch(...){
      case x: break mylabel;
   }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T12:28:20.803

如果您只有 2 个案例，为什么不使用更简单的`if-else if`语句而不是`switch`?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:27:11.003

是的，

当你打破内部开关控制只是从开关而不是从外部循环中出来，所以你必须再次打破外部开关才能打破循环，或者使用标记循环，但如果你使用标记代码，请制作它们大写是为了更好的可读性，以便它们脱颖而出并且可以清楚地阅读，尽管 Java 约定建议使用驼峰式大小写。

1

```
for(...) {
      switch(...) {
         break; // this will break from switch
      }
      if(condition) {
         break; // this will break from for loop
      }
   } 
```

2

```
OUTERLOOP:
for(...){
   switch(...){
       break OUTERLOOP;       
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T12:28:40.573

你应该把 a`break`指定如下：

```
if  (i == someOtherValue ) {  
  break; // breaks for loop
} // for some other value
// switch( to continue here
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T12:32:48.877

前者`break`只是把它排除在`switch`陈述之外。以下一个将起作用。

```
for(/*iterate over elements*/){
    int i = someValueTakenFromLoop;
    if(i==someOtherValue){
        switch(i){
        case 5:
            //some logic
            break;
        case 6:
            //some logic
            break;
        }
        break;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T12:33:05.157

edalorzo 的解决方案是完美的，但我想再添加一件事（并且无法访问评论）：

你几乎总是可以使用方法来重构那种控制结构——

```
for ( /* ... */ ) {
    boolean finished = doSomething(i);
    if (finished) {
        break;
    }
}

//Later in the same class
private boolean doSomething(int val) {
    switch (val) {
        case 0:
            // do something;
            return true; // Break out of outer loop
        case 5:
            // do something absolutely terrifying
            break;
    }
    return false;
} 
```

编辑：刚刚注意到您打算独立于开关条件中断 - 相当简单：

```
for ( /* ... */ ) {
    if ( /* ... */ ) {
        switch ( /* ... */ ) { /* ... */ }
        break;
    }
} 
```

# c# - 图表中数据点上的 C# 鼠标单击事件

> ID：10784628
> 
> 赞同：1
> 
> 时间：2012-05-28T12:24:59.737
> 
> 标签：c#, visual-studio-2010, charts

我想创建一个图表，我正在使用 Visual Studio 2010 中工具箱中的图表。这是我第一次尝试这样做，到目前为止，我已经学习了图表的基础知识，例如如何创建数据点并添加它们到系列以获取图表。我想知道的是，如果可以使数据点对用户可见（如点图中的点），并且用户能够单击数据点并获得特定结果。我在想的是，既然我正在创建数据点，是否有一个选项可以让它“可点击”，或者我是否必须为每个数据点创建单独的鼠标点击事件。请原谅我的无知，但我对此并不陌生。我在哪里可以找到可以帮助我创建图表的指南。到目前为止，这是我的代码的一部分：

```
chart1.Series[0].IsVisibleInLegend = false;
chart1.Series[0].ChartType = SeriesChartType.FastLine;

DateTime sday = Convert.ToDateTime(earnings1.dataGridView1[0, 0].Value.ToString());
chart1.Series[0].XValueType = ChartValueType.String;
int i = 0;
        foreach (DataGridViewRow dgvr in earnings1.dataGridView1.Rows)
        {
            decimal testing = Convert.ToDecimal(earnings1.dataGridView1[1, i].Value);
            testing = decimal.Truncate(testing);

            var point = new DataPoint(i+1, Convert.ToDouble(testing));

            point.Label = testing.ToString();
            point.Font = new Font("Century Gothic", 8, FontStyle.Bold);
            chart1.Series[0].Points.Add(point);
            chart1.Series[0].Points[i].AxisLabel = sday.ToString("dd/MM/yyyy");
            sday = sday.AddDays(1);
            i++;
          } 
```

我正在做的是我有一个带有 2 列的 datagridview。一列带有日期，另一列带有十进制数。我创建了一个图表，其中 x 轴上的日期（自定义标记，因为日期来自 mysql 数据库，格式为 yyyy:mm:dd，我将其转换为 dd/MM/yyyy）和 y 轴上的值。我每天都用它的值创建一个数据点 a 并将它们绘制在图表上。我现在如何单击这些点，例如，当我单击 2012 年 5 月 24 日的值以执行诸如在该特定日期显示数据库中的一些其他信息之类的操作时。提前感谢您的支持，任何帮助将不胜感激。真诚的乔治乔治欧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:49:23.760

您不能在数据点上添加点击事件。您可以做的是在数据点上添加注释并在注释上使用 is selected 事件处理程序。非常好，因为您可以设置它们的属性，例如字体、大小、边框类型、颜色等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T23:02:50.543

代码从 Microsoft 站点复制并适用于 c# 2017

```
private void chtSales_MouseClick(object sender, MouseEventArgs e)
{
   var r = chtSales.HitTest(e.X, e.Y);
   if(r.ChartElementType == ChartElementType.DataPoint)
   {
       int index = r.PointIndex;
        MessageBox.Show(index.ToString());
    }

} 
```

index 返回一个介于 0 和数据点总数 - 1 之间的整数。

# sql-server - INSERT 语句与 CHECK 约束冲突

> ID：10784632
> 
> 赞同：0
> 
> 时间：2012-05-28T12:25:26.767
> 
> 标签：sql-server, sql-server-2008, c#-4.0

任何人都可以给出建议。为什么我会收到这个错误。

System.Data.SqlClient.SqlException：INSERT 语句与 CHECK 约束“CK_GL10000 *_TRXDATE__56701F76* ”冲突。冲突发生在数据库“TWO”、表“dbo.GL10000”、列“TRXDATE”中。

这是我的存储过程：

```
SqlCommand myCommand1 = new SqlCommand("taGLTransactionHeaderInsert", strcon);

  myCommand1.CommandType = CommandType.StoredProcedure;

  myCommand1.CommandText = "taGLTransactionHeaderInsert";

  myCommand1.Parameters.Add("@I_vBACHNUMB", SqlDbType.Char).Value = GLHdr.BACHNUMB;

  myCommand1.Parameters.Add("@I_vREFRENCE", SqlDbType.Char).Value = "ExcelImport";

  myCommand1.Parameters.Add("@I_vTRXDATE", SqlDbType.DateTime).Value = GLHdr.TRXDATE; 
```

表定义：

```
CREATE TABLE [dbo].[GL10000](

[PSTGSTUS] [smallint] NOT NULL,

[LASTUSER] [char](15) NOT NULL,

[LSTDTEDT] [datetime] NOT NULL,

[USWHPSTD] [char](15) NOT NULL,

[TRXTYPE] [smallint] NOT NULL

    /* More columns? not included in script that OP added */
)
GO

ALTER TABLE [dbo].[GL10000]  WITH CHECK ADD CHECK
  ((datepart(hour,[RVRSNGDT])=(0) AND datepart(minute,[RVRSNGDT])=(0)
  AND datepart(second,[RVRSNGDT])=(0) AND datepart(millisecond,[RVRSNGDT])=(0)))
GO

ALTER TABLE [dbo].[GL10000]  WITH CHECK ADD CHECK
  ((datepart(hour,[Tax_Date])=(0) AND datepart(minute,[Tax_Date])=(0)
  AND datepart(second,[Tax_Date])=(0) AND datepart(millisecond,[Tax_Date])=(0)))
GO

ALTER TABLE [dbo].[GL10000]  WITH CHECK ADD CHECK
  ((datepart(day,[TIME1])=(1) AND datepart(month,[TIME1])=(1)
  AND datepart(year,[TIME1])=(1900)))
GO

ALTER TABLE [dbo].[GL10000]  WITH CHECK ADD CHECK
  ((datepart(hour,[TRXDATE])=(0) AND datepart(minute,[TRXDATE])=(0)
  AND datepart(second,[TRXDATE])=(0) AND datepart(millisecond,[TRXDATE])=(0)))
GO

ALTER TABLE [dbo].[GL10000] ADD  CONSTRAINT
  [DF__GL10000__DEX_ROW__540C7B00]  DEFAULT (getutcdate()) FOR [DEX_ROW_TS]
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:46:20.867

在存储过程“taGLTransactionHeaderInsert”中，在插入之前的顶部附近添加以下行。

```
set @I_vTRXDATE = convert(varchar, @I_vTRXDATE, 101) 
```

在 SQL 2008 中，您还可以使用 DATE 数据类型。

```
create proc taGLTransactionHeaderInsert
{
    @I_vTRXDATE DATE
} 
```

并 CAST 为 DATE

```
DECLARE @I_vTRXDATE2 DATE
SET @I_vTRXDATE2 = CAST(@I_vTRXDATE as DATE) 
```

这将删除传入的任何日期时间值的时间部分。但是，如果传入的日期 + 时间不正确，则可能会出现错误，您应该更正传递给运行任何业务逻辑的存储过程的值满足要求的必要规则。

您还可以截断传入的值，即

```
GLHdr.TRXDATE.Date; 
```

另请注意，在 SQL 2008 中，引入了 DATE 数据类型。你可以在[这里](http://msdn.microsoft.com/en-us/library/bb630352.aspx)阅读。

就个人而言，我会删除约束。TRXDATE 听起来像是“交易日期”的代表。通常，人们会想知道交易发生的确切日期和时间。出于演示目的，如果您只想显示 DATE，则只需截断时间，但您的数据将完全不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:28:14.590

表上有一个 CHECK 约束，并且您传递给存储过程的值与检查约束不匹配，或者不是试图使其达到 GL10000 表中的 TRXDATE 列的值。您最简单的选择是使用 SSMS 来探索该表并找到 CHECK 约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T06:01:18.160

自从这个问题出现以来已经有一段时间了，我遇到了类似的错误，所以这样做是为了找出**CHECK**中的确切规则：从 SQL 服务器管理（我当前的版本 2012），单击导致错误，然后展开**Constraints**文件夹，
右键单击有问题的 Constraints 并选择“ **Modify** ”，这将显示约束的定义，您可以轻松找到定义中的**CHECK**部分，对于我的情况是检查我的列是否为只为我的列获取“C”或“O”字符，而在代码中，我试图插入一个“E”字符。

约束定义：

```
 CHECK  (([ColumnName]='C' OR [ColumnName]='O')) 
```

我的代码：

```
 switch (item.Type)
           {
            case myType.Elective:
                entityName.ColumnName = "E";
                .
                .
                .
            } 
```

基于此 CHECK 部分，您可以修改代码以完全填充检查条件，或者如果检查条件不正确，只需修改它。

# android - Android 播放音频文件的问题

> ID：10784634
> 
> 赞同：4
> 
> 时间：2012-05-28T12:25:28.717
> 
> 标签：android, audio, media-player

我已经从服务器下载了音频文件并使用

```
/data/data/packagename/sounds/filename.mp3 
```

然后，如果我使用播放该音频

```
.MediaPlayer mp= new MediaPlayer();
            try {
                mp.setDataSource(PATH+"/"+fileName);
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            mp.start(); 
```

但它显示一个错误

```
MediaPlayer:start called in state 2
MediaPlayer:Error(-38,0)
MediaPlayer:Error(-38,0) 
```

有什么问题我对此进行了很多搜索，但没有解决方案请提出任何解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:54:33.407

试试这个代码，

```
public void audioPlayer(String path, String fileName){
    //set up MediaPlayer    
    MediaPlayer mp = new MediaPlayer();

    try {
        mp.setDataSource(path+"/"+filename.mp3);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        mp.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    mp.start();
} 
```

# c# - 显示过滤记录，否则水晶报表中的所有记录

> ID：10784635
> 
> 赞同：0
> 
> 时间：2012-05-28T12:25:29.557
> 
> 标签：c#, asp.net, crystal-reports, report, ext.net

我希望在页面加载时报告应该显示所有记录。现在，当我想按日期（组字段）显示过滤器记录时，即显示所有不带过滤器的记录，否则显示带过滤器的记录。

当我想过滤数据时，我的代码如下

```
 protected void click(object sender, EventArgs e)
        {

            ReportDocument cryRpt = new ReportDocument();
            cryRpt.Load(Server.MapPath("report.rpt"));
            cryRpt.SetDatabaseLogon("userid", "password", "server", "database");
            ParameterFieldDefinitions crParameterFieldDefinitions;
            ParameterFieldDefinition crParameterFieldDefinition;
            ParameterValues crParameterValues = new ParameterValues();
            ParameterDiscreteValue crParameterDiscreteValue = new ParameterDiscreteValue();

            crParameterDiscreteValue.Value =Convert.ToDateTime( dtAppt.Text).ToShortDateString();
            crParameterFieldDefinitions = cryRpt.DataDefinition.ParameterFields;
            crParameterFieldDefinition = crParameterFieldDefinitions["stdate"];
            crParameterValues = crParameterFieldDefinition.CurrentValues;
            crParameterValues.Add(crParameterDiscreteValue);
            crParameterFieldDefinition.ApplyCurrentValues(crParameterValues);
            CrystalReportViewer1.ReportSource = cryRpt;
            Checkbox1.Checked = false;

        } 
```

![在此处输入图像描述](../Images/fc188ace5c3e138806786399864f98fd.png) 在 if 条件中写什么，以便我可以获得所有记录以及在下面这一行中传递什么？

```
crParameterDiscreteValue.Value =Convert.ToDateTime( dtAppt.Text).ToShortDateString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T06:08:51.070

当您想显示所有记录时添加特殊值，即 01/01/1900

```
crParameterDiscreteValue.Value ="19000101"; 
```

在公式中

```
{?stdate} = '19000101' or {appointment.startdate} = {?stdate} 
```

无需使用 if else 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:49:09.907

诀窍是将“特殊值”传递给您的参数或创建一个新参数以覆盖。

一个“特殊值”的例子是 01/01/1900：

然后在您的选择标准中：`{?stdate} = '19000101' or {appointment.startdate} = {?stdate}`

如果你走另一条路线，创建一个布尔参数来覆盖：

然后在您的选择标准中：`{?override} or {appointment.startdate} = {?stdate}`

# javascript - 用Javascript，Jquery中的字符串替换特定索引处的字符

> ID：10784637
> 
> 赞同：7
> 
> 时间：2012-05-28T12:25:40.813
> 
> 标签：javascript, jquery, actionscript

是否可以用字符串替换特定位置的字符

假设有一个字符串：`"I am a man"`

我想用字符串替换 7 处的字符`"wom"`（不管原始字符是什么）。

最终结果应该是：`"I am a woman"`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-28T12:28:30.780

字符串在 Javascript 中是*不可变*的——你不能“就地”修改它们。

您需要将原始字符串剪断，并返回一个由所有片段组成的新字符串：

```
// replace the 'n'th character of 's' with 't'
function replaceAt(s, n, t) {
    return s.substring(0, n) + t + s.substring(n + 1);
} 
```

注意：我没有添加这个，因为在某些浏览器上，如果你将函数添加到内置类型中，`String.prototype`性能会非常糟糕。`prototype`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:33:56.553

或者你可以这样做，使用数组函数。

```
var a='I am a man'.split('');
a.splice.apply(a,[7,1].concat('wom'.split('')));
console.log(a.join(''));//<-- I am a woman 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T12:28:49.290

`string.replace()`Javascript中 有一个方法： [https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)

PS
顺便说一句，在你的第一个例子中，你所说的“m”的索引是7。Javascript使用从0开始的索引。

# jquery - 我想隐藏一个DIV？

> ID：10784641
> 
> 赞同：0
> 
> 时间：2012-05-28T12:26:18.083
> 
> 标签：jquery, asp.net, html

我是 jQuery 使用 Div 作为对话框，但在调用对话框之前，Div 显示在我的屏幕底部。

我怎样才能隐藏这个div？

```
<div id = "PrintDialog" title="Warning">
        <p>Once you print, no changes may be made to this contract. Are you sure you want to print?</p>
        <input type="button" value="Print" id="btnDialogPrint" />
        <input type="button" value="Cancel" id="btnDialogCancel" />
        </div> 
```

我想仍然使用 Div，只是不显示它，除非它是对话框。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T12:27:22.223

添加`style="display: none;"`到`div`这样的：

```
<div id="PrintDialog" title="Warning" style="display: none;"> 
```

当页面加载时，这会阻止显示 div。jQuery 仍会在您需要时显示对话框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T12:30:38.827

使用 css : style="display:none"

```
<div id = "PrintDialog" title="Warning" style="display:none"> 
```

或使用以下 jquery 代码

```
$('#PrintDialog').hide() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T12:31:32.270

只需将“隐藏”类添加到您的并在您想将其显示为 dailog 时将其删除

`<div id = "PrintDialog" title="Warning" class="hidden">`

隐藏的 CSS：`.hidden { display: none; }`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T12:28:39.370

添加样式=“显示：无；” 或添加到您的 CSS 类下一个代码

```
#PrintDialog
{
display: none;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-28T12:34:33.503

1.  使用 css（如果你以后想要初始化对话框）： <style type="text/css">
    #PrintDialog{display:none;}
    </style>

2.  使用 jQuery UI，您只需要在页面加载后初始化对话框：
    <script type="text/javascript">
    $(function(){
    $("#PrintDialog").dialog({ <一些参数，如标题等> });
    });
    </脚本>

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-28T12:28:45.077

如果你想使用 jQuery，你只需添加`$("#PrintDialog").hide();`你的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-28T12:29:05.617

尝试使用内置的[.hide()](http://api.jquery.com/hide/)方法。

IE

```
$('#PrintDialog').hide(); 
```

# javascript - 如何通过 jquery 触发器触发超链接？

> ID：10784646
> 
> 赞同：2
> 
> 时间：2012-05-28T12:27:00.337
> 
> 标签：javascript, jquery, triggers

我想通过 javascript 触发超链接。它的链接必须在新标签中打开。

我们可以使用 window.open('url') 但我们知道浏览器会阻止弹出窗口。所以我需要替代解决方案。

我尝试过使用 trigger() 但它不起作用。

我的 HTML 代码是：

```
<input id="btn" type="button" value="Click to fire">
<a id="link" href="http://www.google.com" target="_blank">Link</a> 
```

我的脚本是：

```
$('#btn').click(function(){
        $('#link').trigger('click');
}); 
```

除了我使用 click() 之外，它也不起作用。

代码是：

```
$('#btn').click(function(){
        $('#link').click();
}); 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:28:05.807

这是您的解决方案 - [http://jsfiddle.net/svTWu/1/](http://jsfiddle.net/svTWu/1/)

这是代码

```
<input id="btn" type="button" value="Click to fire">
<a class="thelink" href="http://www.google.com" target="_blank">Link</a>

$(".thelink").click(function () {
  window.open($(this).attr("href"));console.log('hello');
});

$("#btn").click(function () {
  $(".thelink").trigger('click');
}); 
```

在这里您可以阅读有关触发器的所有信息 - [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

# vb.net - Window Service 根据数据库中的字段发送自动生成的邮件

> ID：10784649
> 
> 赞同：0
> 
> 时间：2012-05-28T12:27:07.537
> 
> 标签：vb.net, windows-services

我需要创建一个窗口服务来检查数据库中的日期字段，并根据该日期发送自动生成的邮件。我是窗口服务领域的新手。所以请通过提出一些好的例子来帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:26:25.230

*   [在 VB 中创建 Windows 服务](http://msdn.microsoft.com/en-us/library/zt39148a%28v=vs.100%29.aspx#Y300)。
*   [VB 中来自 Windows 服务的数据库连接（和电子邮件）](https://stackoverflow.com/questions/6540230/unable-to-execute-sql-command-in-windows-service)。
*   [从 VB 中的 Windows 服务发送电子邮件](http://msmvps.com/blogs/joacim/archive/2009/09/13/creating-a-windows-service-using-vb-net.aspx)。

# python - 使用 savefig 时生成较小文件大小的 PNG 选项

> ID：10784652
> 
> 赞同：7
> 
> 时间：2012-05-28T12:27:18.543
> 
> 标签：python, matplotlib

我正在使用 matplotlib 生成一个绘图，然后使用 matplotlib.pyplot.savefig 将其保存到 PNG 文件中。

一切正常，但文件大小非常大（大约 120Kb）。

之后我可以使用 ImageMagik（通过 shell）通过减少颜色数量和关闭抖动来将文件大小减小到 38Kb，而不会降低质量：

```
convert +dither -colors 256 orig.png new.png 
```

我的问题是：我可以在 matplotlib 中执行此操作吗？我已经搜索了文档，但找不到与设置保存时使用的颜色数量等有关的任何内容......

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-17T17:23:43.243

这就是我通过 PIL（现在是 Pillow）运行 matplotlib 图像的方法

```
import cStringIO
import matplotlib.pyplot as plt
from PIL import Image 
```

...

```
ram = cStringIO.StringIO()
plt.savefig(ram, format='png')
ram.seek(0)
im = Image.open(ram)
im2 = im.convert('RGB').convert('P', palette=Image.ADAPTIVE)
im2.save( filename , format='PNG') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:46:47.953

您可以将 kwarg 传递`dpi=`给 savefig() ，这可能会帮助您减小文件大小（取决于您之后想要对图表执行的操作）。如果做不到这一点，我认为 Python Imaging Library ( [http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/) ) 几乎肯定会做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:45:28.080

我不知道如何在 matplotlib 中执行此操作，但是一旦将文件写入磁盘，您始终可以使用[PythonMagick执行此操作。](http://wiki.python.org/moin/PythonMagick)

# android - Android - 将视图设置在使用画布绘制的项目之上

> ID：10784655
> 
> 赞同：7
> 
> 时间：2012-05-28T12:27:25.027
> 
> 标签：android, xml, android-layout, android-canvas, always-on-top

我有一个 android 应用程序，用户可以在其中绘制、移动和重塑照片上的一些对象。在此页面中，我的屏幕布局由加载的照片及其下方（纵向视图）一些按钮组成。我的视图与下面的 xml 完全一样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/linear" >

    <LinearLayout
        android:id="@+id/buttons"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center"
        android:layout_alignParentBottom="true">   

            <ImageView
                android:id="@+id/draw"
                android:layout_width="80dp"
                android:layout_height="50dp"
                android:clickable="true"
                android:src="@drawable/draw"/>

            <ImageView
                android:id="@+id/delete"
                android:layout_width="80dp"
                android:layout_height="50dp"
                android:clickable="true"
                android:layout_toRightOf="@+id/erase"
                android:src="@drawable/delete"/>

            <ImageView
                android:id="@+id/done"
                android:layout_width="80dp"
                android:clickable="true"
                android:layout_height="50dp"
                android:layout_toRightOf="@+id/delete"          
                android:src="@drawable/done"/>         

        </LinearLayout>     

    <ImageView
        android:id="@+id/photo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_above="@id/buttons"/>

</RelativeLayout> 
```

问题是我希望按钮始终位于绘制对象的顶部。现在，如果用户画了一条线，然后以一条边缘低于图像的方式移动它，那么这条线将在按钮上方。那时它将无法触及，因为画布设置为包含我的图像的位图，但它是可见的。如果部分线路超出屏幕，我希望它以消失的方式消失。

我该如何实施？是否有一些属性可以确保这些按钮始终位于绘制的对象之上？先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T08:38:02.410

如果您有`@Override` `onDraw`或`onLayout`方法，请尝试将

```
<LinearLayout
    android:id="@+id/buttons"> 
```

在前面使用`v.bringToFront()`where`v`将是您的 LinearLayout。

# c# - 如果将图像放入网格中，则 Grid.Bottom 下方的图像部分会丢失

> ID：10784662
> 
> 赞同：2
> 
> 时间：2012-05-28T12:27:38.460
> 
> 标签：c#, wpf, image, transform

我会尽量简短。因此，在 XAML 中：

```
<Grid Height="100" Width="100" ClipToBounds="True">
  <Image  Width="100" Height="200" Name="image" Stretch="None" Source="/Test;component image.png" SnapsToDevicePixels="True">
    <Image.RenderTransform>
      <TranslateTransform x:Name="transform" X="0" Y="0"/>
    </Image.RenderTransform>
  </Image>
</Grid> 
```

如果现在我们在代码中使用变换来改变图像位置：

```
transform.Y -= 50; 
```

，图像向上移动 50 像素，但被切割为 100 像素。

为什么我们看不到图像的整个部分（y 从 50 到 150）？

# java - 具有移位和运算符的唯一字符：不理解此代码

> ID：10784668
> 
> 赞同：4
> 
> 时间：2012-05-28T12:28:11.643
> 
> 标签：java, operators, bit-shift

我不明白循环中的行：我们取字符并减去`a`，所以“10”？（为什么？）
然后`1 << val`：我们将 1 移 val ？（为什么？）
而 checker 为 0，那么我们如何达到`> 0`这个条件呢？

```
 public static boolean isUniqueChars(String str) {
    int checker = 0;
    for (int i = 0; i < str.length(); i++) {
        int val = str.charAt(i) - 'a';
        if ((checker & (1 << val)) > 0) return false;
        checker |= (1 << val);
    }
    return true;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T12:38:38.437

代码假定它`str`由小写字母组成，如果没有重复字母，则返回 true。它是这样工作的：

`checker`用作位图，即该变量中的每一位用于跟踪一个字母。从字符中减去“a”，“a”为 0，“b”为 1，“c”为 2，依此类推。将 1 左移此数字为 1，“a”为 1，“b”为 2，“c”为 4 ' ETC。

通过 oring ( `|`) 这个值与`checker`代码保持跟踪以前遇到的字符。因此，如果我们遇到第二个“a”，例如，`checker`它的第一位设置（`&`在 if 语句中由测试），所以我们知道它`str`有重复。

简而言之，`checker`用作更快更紧凑的 bool 数组。这种和类似的技术称为[位操作](http://en.wikipedia.org/wiki/Bit_manipulation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:37:56.113

`str.charAt(i) - 'a'`或多或少地返回“字母表中的字母”：如果`str.charAt(i)`是`'a'`，这是`0`，如果是`'b'`，`val`是`1`，如果是`z`，`val`是`25`，等等。

剩下的就是使用位旋转技术：如果第`val`th 位`checker`是`1`，那么我们已经看到了`val`第 th 字符。`checker & (1 << val)`当且仅当设置 的`val`第 位时，非零也是如此`checker`，这意味着我们已经看到了该字符。否则，我们设置第`val`th 位`checker`并继续循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-02T06:01:43.480

这个问题很老了，但我认为我的回答是正确和清晰的。我们只在这种情况下处理小写字母。就像保罗问的那样，`(1 << val)`意味着 Shift 1 by 'val' 而不是 shift 'val' 。例如，'hello' 给出：

```
1st loop: val = 111 in binary, 7 in decimal
          1 << val = 10000000  <-- here one is shifted by 7
          checker = 10000000 
2nd loop: val = 100 in binary, 4 in decimal
          1 << val = 10000
          checker = 10010000
3rd loop: val = 1011 in binary, 11 in decimal
          1 << val = 100000000000
          checker = 100010010000
4th loop: val = 1011 in binary, 11 in decimal
          1 << val = 100000000000
         (checker & (1 << val)) gives 100000000000 which is greater than 0
The loop is over because 'l' is not unique after 'hel' in 'hello'. 
```

我希望这能解决问题。如果你想看看到底发生了什么，我有源代码。

```
public class one_one_one {

    public static void main(String[] args) {
    String chars = "hello"; 
    if (isUniqueChars(chars)) {
        System.out.println("Unique");
    } else {
        System.out.println("Not Unique");
    }
    }

    public static boolean isUniqueChars(String str) {
    int checker = 0;
    for (int i = 0; i < str.length(); i++) {
        int val = str.charAt(i) - 'a';
        System.out.println(Integer.toBinaryString(val)); //debug printout
        int temp = 1 << val;
        System.out.println(Integer.toBinaryString(temp)); //debug printout
        System.out.println(checker & (1 << val)); //debug printout
        if ((checker & (1 << val)) > 0) {
        return false;
        }
        checker |= (1 << val);
        System.out.println(Integer.toBinaryString(checker)); //debug printout
        System.out.println(' '); //debug printout
    }
    return true;
    }
} 
```

# jquery - 使用（？） appendchild 将脚本动态添加到 IE

> ID：10784673
> 
> 赞同：0
> 
> 时间：2012-05-28T12:28:22.407
> 
> 标签：jquery, internet-explorer, appendchild

我已经建立[了这个](http://www.s-maof.com/shorts/shorts_table.php)页面。

该页面包含一个表格，当您单击特定行时，该表格会加载绘制特定图形的脚本。

这意味着我需要附加多个脚本（而不是同时 - 取决于用户）。

我使用过 Jquery 的**appendchild**，但注意到它在 IE 中效果不佳（加载第一个然后卡住）。

我已经在这里查看了说明相同内容的帖子并尝试了它们..

我尝试使用：

```
var body = document.getElementsByTagName('body')[0];
var script = document.createElement('script');
script1.text = myscript;
body.appendChild(script); 
```

和

```
var head = document.getElementsByTagName('head')[0];
var script = document.createElement('script');
script.src = 'jQuery/head/dynamic_graph.js';
head.appendChild(script); 
```

乃至

```
$(script).appendTo($("#graphMain" + id)); 
```

仍然适用于除 IE 之外的所有浏览器...

有什么建议么？

编辑：

也试过

```
$.getScript("jQuery/head/dynamic_info.js", function(data, textStatus, jqxhr) {
    }); 
```

和 IE 未能执行..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:27:44.840

谢谢大家，但是经过 10 个小时的毛羽.. 我想通了.. 显然 - IE 阻止附加多个具有相同名称的脚本 - 所以我将每个脚本的名称更改为一个唯一的名称。

我用了

```
$.getScript("jQuery/head/dynamic_info"+id+".js", function(data, textStatus, jqxhr) {
}); 
```

其中 Id 是唯一编号（在这种情况下为行号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T02:51:18.597

如果您正在尝试加载外部脚本，并且您正在使用 jQuery，那么似乎最明智的解决方案是使用[`$.getScript`](http://api.jquery.com/jQuery.getScript/)加载文件，而不是尝试使用`.appendChild`或任何其他类似方法滚动您自己的解决方案。

# java - 如何将受保护的方法访问限制为仅子类

> ID：10784674
> 
> 赞同：7
> 
> 时间：2012-05-28T12:28:25.147
> 
> 标签：java

我们如何才能将任何受保护方法的访问限制为仅对任何包中的子类而不是对同一包中的类的访问。

如果任何不是子类并且在同一个包中的类也必须抛出像“受保护的方法”这样的异常。

编辑：有什么方法可以检查调用类名实例，然后我们可以使用**instanceof**进行验证。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T12:31:41.460

这不可能。您可以在`protected`修饰符（同一个包中的子类 + 类）和默认修饰符（同一个包中的类）之间进行选择。没有第三种选择。

此外，您无法在运行时轻松执行此操作，因为找到调用代码的类名和包并不容易。请参阅：[如何使用堆栈跟踪或反射找到方法的调用者？](https://stackoverflow.com/questions/421280)

一种选择是使用[aspectj](/questions/tagged/aspectj "显示标记为“aspectj”的问题")。它甚至可以在编译时拒绝尝试访问`protected`同一包中的方法而不是子类的代码（借助`declare warning`and`declare error`指令）。您可能希望包含一些编译时注释，例如`@SubclassesOnly`. 请参阅：[重新审视编译时架构实施：AspectJ、Maven 和 Eclipse](http://web.archive.org/web/20151125222114/http://www.theserverlabs.com/blog/2008/09/10/compile-time-architecture-enforcement-revisited-aspectj-maven-and-eclipse/)以及[使用 AspectJ 进行编译时检查](http://web.archive.org/web/20071113185448/https://out-println.blogspot.com/2007/08/compile-time-checks-with-aspectj.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T12:41:38.133

简单：从包中删除所有其他类，只留下你的基类。

这将意味着唯一可以访问您的类的类来自*另一个*包。

如果另一个库复制了您的包名称，您可以轻松检查调用者的包并断言它与您的不同：

```
if (getClass().getPackage().equals(MyBaseClass.class.getPackage())
    throw new IllegalAccessError(); // or similar 
```

仅供参考`getClass()`，为您提供 的类`this`，这将是子类的类。

### 编辑：

要查找调用者的类，请使用以下代码：

```
Class<?> callerClass = Class.forName(Thread.currentThread().getStackTrace()[2].getClassName()); 
```

# php - imap_open：无法打开流

> ID：10784676
> 
> 赞同：1
> 
> 时间：2012-05-28T12:28:35.923
> 
> 标签：php, imap, ssl, imap-open

我正在尝试将 imap_open() 用于我的 FatCow 电子邮件帐户。这是我的代码：

```
$mbox = imap_open("{imap.fatcow.com:143}", "account@domain.com", "password"); 
```

这是我收到的：

> 警告：imap_open() [function.imap-open]：无法在第 2 行的 /home/alfatcom/public_html/test.php 中打开流 {imap.fatcow.com:143}

也许原因是 FatCow 使用了 STARTTLS？无论如何，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T10:14:18.370

就我而言，它`{domain:110/pop3/novalidate-cert}INBOX`帮助我修复了已关闭的 IMAP 连接断开（服务器响应）和域的证书故障。

确认您的端口以及是否启用了 ssl

```
openssl s_client -crlf -connect your-domain-name:port-number 
```

# wpf - ItemSource 作为数据表

> ID：10784680
> 
> 赞同：0
> 
> 时间：2012-05-28T12:28:41.897
> 
> 标签：wpf

我有我的 DataGrid，我在 DataTable 中有所有结果。

```
DataTable dt = MakeTable();

<DataGrid Height="70" HorizontalAlignment="Left" Margin="3,1,0,0" Name="resultDataGrid" VerticalAlignment="Top" Width="475" ReadOnly="True"> 
```

我记得在 Windows 窗体中，我能够执行以下操作：

```
dt.ItemSource = dt; 
```

它工作正常，但在 WPF 中出现错误：无法将数据源 DataTable 转换为目标 IEnumerable。

列名总是**不同**的，我不能手动建表！

我将如何设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:08:11.127

数据表不支持 ienumrable。所以你需要将你的数据表转换为八大 ilist 或 enumrable 源。

尝试这个。

```
DataTable dt = new DataTable();
resultDataGrid.ItemsSource =  dt.DefaultView 
```

如果您没有提前设置列，还可以设置 AutoGenerateColumns=true。

# android - android 2.3平台如何添加Action bar？

> ID：10784681
> 
> 赞同：7
> 
> 时间：2012-05-28T12:28:44.813
> 
> 标签：android, android-layout

在我的应用程序中，我想创建一个操作栏，作为我的应用程序图标和视图控件。我参考了很多教程和示例来创建操作栏，但它们都有很多代码。我也阅读了 ActionBarSherlock 但这需要 minsdkversion 15 来编译库。因为我是 android 新手，所以我需要一步一步的教程来创建一个简单的操作栏。如果您知道使用 xml 创建操作栏的简单教程，请发布您的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T12:49:24.563

我已经使用这个库向 2.2+ 应用程序添加操作栏：

[https://github.com/johannilsson/android-actionbar](https://github.com/johannilsson/android-actionbar)

我发现它易于使用且具有视觉吸引力，尽管它的样式与 ICS 中的默认操作栏不完全匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-12T04:57:13.130

**从 Android 的官方网站阅读本教程。** ![操作栏 Android](../Images/3fe90deeb1bb9fe2e298ca09d20b9b7b.png) 您只需要从磁盘上的路径`android-support-v7-appcompat.jar`中将支持 jar 包含在您的项目中。`android-sdk-windows\extras\android\support\v7\appcompat\libs`然后你可以在Android中使用API​​ 11以下的ActionBar。

**官方 Android 教程在这里：** [Action Bar Android Official](http://developer.android.com/guide/topics/ui/actionbar.html) Sherlock bar 为我创造了问题，然后我得到了这个解决方案。

# java - 如何将列号从 Oracle 返回到 Java

> ID：10784684
> 
> 赞同：0
> 
> 时间：2012-05-28T12:28:54.723
> 
> 标签：java, oracle

我使用以下查询来获取列数。

```
select count(*) from all_tab_columns where owner='IULPROJECT' and table_name='SUPPLIERS'; 
```

这个查询在 Oracle 命令行中工作，我得到了数字 5，但是如何在 Java 中返回这个数字？

在 Java 中：

```
stmt=conn.createStatement();
query="select count(*) from all_tab_columns where owner='IULPROJECT' and table_name='SUPPLIERS' ";
rset=stmt.executeQuery(query);
System.out.println(stmt); //<-- what should I put here to get back my number "5" ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:31:55.630

您的数据已经`ResultSet`包含在其中`column`，因此您必须先调用`next()`，因为`ResultSet` `Cursor`type 隐式定位到 row before first。所以调用`next()`方法，然后`count = rset.getInt(1)`你会得到你的数据。

```
 rset=stmt.executeQuery(query);
    int count = 0;
    while (rset.next()) {

    count = rset.getInt(1); // numbering of columns starts from 1 not from 0

    }
    System.out.println(count); 
```

希望它可以帮助你。问候男人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:38:45.610

使用 rset.getInt(1)。它将返回第一列的值。

```
while(rset.next){ System.out.println(rset.getInt(1));} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:34:09.880

```
rset=stmt.executeQuery(query);
while (rset.next()) {
    System.out.println(rset.getInt(1));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T12:34:59.677

您的查询将返回一个包含一行和一列的表，因为**count(*)**是一个组函数。**所以得到ResultSet后，使用next()**去第一行，然后使用**getInt()获取值**

```
stmt=conn.createStatement();
query="select count(*) from all_tab_columns where owner='IULPROJECT' and table_name='SUPPLIERS' ";
rset=stmt.executeQuery(query);
rset.next();
System.out.println(rset.getInt(1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T14:19:22.843

就像背景信息一样，请注意

```
select count(*) from ... 
```

将始终准确返回大于或等于零且永远不会为空的一行（后者对所有人都适用：

```
count(*) 
```

来电）。

我最初将此作为评论，但 * = 斜体，我找不到逃避它的方法

# ruby-on-rails-3 - validates_inclusion_of 没有方法错误

> ID：10784687
> 
> 赞同：1
> 
> 时间：2012-05-28T12:29:08.683
> 
> 标签：ruby-on-rails-3, validation, activerecord

我有一个模特代表

```
class Representative< ActiveRecord::Base
  validates_inclusion_of :gender, :in => Representative.genders

  def self.genders
    %w(M F)
  end
end 
```

当我在性别函数定义之前编写验证行时，它不起作用，它给出了未定义的方法性别错误。当我在它起作用的函数下方编写验证时，为什么会发生这种情况？我习惯于调用和定义函数而不必担心顺序，我在这里真的出错了吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:54:57.437

Ruby 逐行执行代码，就像 shime 解释的那样。因此，在运行时`validates_inclusion_of`，它会尝试查找方法`genders`。它当时找不到该方法，因此会引发错误。最好将该方法向上移动或简单地定义常量。

最好检查错误中的回溯，并尝试理解它。

```
class Representative < ActiveRecord::Base
  def self.genders
    %w(M F)
  end

  validates_inclusion_of :gender, :in => Representative.genders
end 
```

这是您定义常量的方式，以便您以后可以通过调用来访问它`Representative::GENDERS`。

```
class Representative < ActiveRecord::Base
  GENDERS = %w(M F)

  validates_inclusion_of :gender, :in => GENDERS
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:47:31.193

您在这里将方法调用作为参数传递给另一个方法。

让我用这个例子来解释一下

```
class Printer
  def print(something)
    print something
  end

  print sheet

  def sheet
    "sheet!"
  end
end 
```

在这里你会得到一个`NameError`- 未定义的局部变量或方法`sheet`。

发生的事情是 ruby​​ 尝试评估您的表达式，并认为这`sheet`是一个方法调用。然后它调用该方法并抛出这种错误。

如果您将方法定义移到方法调用上方 - 它已定义。

```
class Printer
  def print(something)
    puts something
  end

  def sheet
    "sheet!"
  end

  print sheet
end 
```

# c# - 使用 DataSet 对数据库执行操作而不使用缓存

> ID：10784689
> 
> 赞同：0
> 
> 时间：2012-05-28T12:29:18.437
> 
> 标签：c#, database, oracle, dataset, odp.net

如果这将是一个糟糕的问题，我很抱歉。我做过很少的数据库编程。这可能是从头开始阅读它的时候了，我可能会在某个时候这样做，但我现在时间紧迫。

有没有一种方法可以在 Oracle 数据库上执行类似 DataSet 的操作，例如插入、删除等，而无需缓存一大块数据库？我正在寻找一些东西来避免为具有任意字段/列的对象输入笨拙的 SQL 查询。我可以定义一个 DataRow 并插入它（或根据某个键更新它）。我不知道如何通过缓存来做到这一点，因为我不可能缓存整个数据库。它相当大。

因为实体在很大程度上是任意的，我不想定义静态类来包装它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:41:56.230

我不确定我是否完全理解你的问题。您可以创建一个具有执行 Upsert 的方法的类。该方法将接收 DataRow，您可以在该方法中设置规则以根据数据行中的值插入或更新数据库。但是您必须编写自己的 SQL 查询来插入或检查数据库中是否存在记录，然后进行更新。

为什么不使用 ORM。实体框架，NHibernate 之类的东西

1.  [实体框架](http://download.oracle.com/oll/obe/EntityFrameworkOBE/EntityFrameworkOBE.htm)
2.  [休眠](http://nhbwithoracle.blogspot.com/)

您不需要编写任何 SQL 查询，并且可以自定义选项以启用[LazzyLoading](http://geekswithblogs.net/iupdateable/archive/2009/11/26/getting-started-with-entity-framework-4-ndash-lazy-loading.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:46:25.280

如果您使用 typed`DataSet`您可以为您的 Fill 方法提供参数。使它们仅填充`DataTable`必要的行。

如果您正在使用`DataReader`，您可以在查询字符串中提供任何类型的查询。

基本上，您只能“缓存”您想要更改的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:31:58.547

有点难以说出你真正需要什么......

但是您可以查询 Oracle 数据字典视图以获取元数据，然后根据这些结果动态构建您的 SQl 语句。

# javascript - setInterval 以按钮开始或单独开始

> ID：10784690
> 
> 赞同：0
> 
> 时间：2012-05-28T12:29:24.473
> 
> 标签：javascript, jquery

如何使用按钮激活/触发/触发 setInterval？如果未单击该按钮，如何使其在 3 秒后自动触发，但如果我单击该按钮，它将在 0.1 秒时触发并重新启动 evrything。请帮帮我

```
$('button').click(function(){
    setInterval(function(){
        updateStats("updateStats");
    }, 100);
});  

else 

setInterval(function(){
    updateStats("updateStats");
}, 3000); 
```

*编辑*

仅每次单击按钮 100 毫秒，如果未单击，则它最常在 3000 毫秒内自动执行，除非您单击它

部分 ：

```
function updateStats(stat)
{

    var stat = ["GAME","USERS"];

    var url = "NET.php";

   $.each(stat, function(i, key){
       $.post(url, {stats: key}, function(data) { // stats to stat

          $("#" + key).html(data);  

                    $('.s').emoticonize({
                        //delay: 800,
                        //animate: false
                    });

       });

    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:36:23.583

如果您单击按钮，它将在 3000 之后触发，它将在 100 之后触发

```
var x ;

// call timer after 3000
callTimer(3000);

// call timer after 100 if cicked
$('button').click(function(){
     clearInterval(x);
     callTimer(100);
 });  

 function callTimer(time){
   x = setInterval(function(){
        updateStats("updateStats");
        }, time);
  } 
```

**根据您的要求**更新****

 **```
var x ;
var y ;

// call timer after 3000
callTimer(3000);

// call timer after 100 if cicked
$('button').click(function(){
     y = setInterval(function(){
        updateStats("updateStats");
        clearInterval(y);
        }, 100);
    callTimer(3000);
});  

 function callTimer(time){
   clearInterval(x);
   x = setInterval(function(){
        updateStats("updateStats");
      }, time);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:38:10.330

```
var inter = setInterval(function(){
    updateStats("updateStats");
}, 3000);

$('button').mousedown(function() {
    clearInterval(inter);
    inter = setInterval(function(){
        updateStats("updateStats");
    }, 100);
});
$('button').mouseup(function() {
      clearInterval(inter);
      inter = setInterval(function(){
        updateStats("updateStats");
    }, 3000);

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:33:42.063

将其保存在全局变量中以清除单击时的超时引用：

```
var tid = setTimeout(function(){
    updateStats("updateStats");
}, 3000);

$('button').click(function(){
    clearTimeout(tid);
    setInterval(function(){
        updateStats("updateStats");
    }, 100);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T12:42:00.537

```
 var interval;
 $(document).ready(function(){
 interval = setInterval(function(){
updateStats("updateStats");
}, 3000);

}); 
```

`$('button').click(function(){` `clearInterval(interval);` `setInterval(function(){` `updateStats("updateStats");` `}, 100);});`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T12:34:23.877

在页面加载调用 setInterval 以在 3 秒后触发。

单击按钮时，在 100 毫秒内调用 setInterval，并清除默认间隔。

```
$('button').click(function(){    
setInterval(function(){
  updateStats("updateStats");    
  clearInterval(defaultTimer);
}, 100);    
});      
var defaultTimer = setInterval(function(){
  updateStats("updateStats");
}, 3000); 
```

如果您不想重复此操作，请使用 setTimeout 而不是 setInterval。**

# iphone - UIPickerView pickerView:viewForRow:forComponent:reusingView: iOS 5.0以下不影响

> ID：10784691
> 
> 赞同：0
> 
> 时间：2012-05-28T12:29:29.423
> 
> 标签：iphone, ios, cocoa-touch, uipickerview

`pickerView:viewForRow:forComponent:reusingView:`我的 UIPickerView 使用该方法检索它的数据。

出于某种原因，该方法对 iOS 4.3 及更低版本没有影响。

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{   
    UILabel* label = (UILabel*)view;

    if (view == nil) {
        label = [[[UILabel alloc] initWithFrame:CGRectZero] autorelease];
    }

    label.text = @"Text";

    return label;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:01:02.713

这个人举了一个例子，他说视图不应该被自动释放。[http://alisothegeek.com/2009/07/custom-uipickerview-text-formatting/](http://alisothegeek.com/2009/07/custom-uipickerview-text-formatting/)

# iphone - 在 iOS 中使用 node.js 访问数据库

> ID：10784697
> 
> 赞同：1
> 
> 时间：2012-05-28T12:29:45.707
> 
> 标签：iphone, ios, ipad, node.js

我想创建这样一个应用程序，其中我的 iPhone 将具有用于为员工输入数据的 UI。单击发布按钮后，数据应保存在 sqlite 数据库中，我还想从数据库中检索按钮单击时的数据。我想使用 node.js 在我的 iOS 应用程序和数据库之间进行通信。由于我以前从未使用过 node.js，请给我一些链接，我可以在其中学习示例应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:08:49.863

我不是 iOS 开发人员，但我会在 Node.js 中创建一个 REST 服务，它可以位于您的 Iphone 应用程序和数据库之间。您很可能希望对服务进行某种形式的身份验证。

它也必须是sqlite吗？有些数据库可以理解 HTTP。如果您使用 CouchDB（还有其他），您可以让您的应用程序直接与您的数据库对话。这意味着您可以完全省略 Node.js。您可以走得更远，使用为您提供后端的服务。像 parse.com（还有其他）这样的东西会为你做这件事。

# java - 如何将 jars 从 WEB-INF/lib 复制到 Maven 中战争中的另一个文件夹

> ID：10784698
> 
> 赞同：0
> 
> 时间：2012-05-28T12:29:57.820
> 
> 标签：java, maven-plugin, maven-3

我生成了一个 WAR 文件，它的 WEB-INF/lib 文件夹中有一个名为 xyz.jar 的 jar。此 jar 在构建期间作为依赖项生成。现在我需要将这个 jar 复制到一个文件夹中，比如战争中的 abc。我怎样才能做到这一点？我尝试使用 maven-resources-plugin 的复制资源，但它似乎不起作用，因为复制将在建立战争之前完成。但是这个 jar 仅在构建过程中生成。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:35:32.927

使用 maven-dependency-plugin 独立地将其放置在您想要的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:01:34.170

You might also be able to change when the plugin executes by binding the plugin execution to a different [lifecycle phase](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference). Here is a snippet to give you the idea.

```
 <plugin>
    <artifactId>maven-resource-plugin</artifactId>
    ...
    <executions>
      <execution>
        <id>copy</id>
        <phase>phaseName</phase>
      </execution>
    </executions>
  </plugin> 
```

# python - 我可以在调用函数之前延迟装饰器的发生吗？

> ID：10784699
> 
> 赞同：2
> 
> 时间：2012-05-28T12:30:10.523
> 
> 标签：python, decorator

首先，我了解了 Python 装饰器是什么以及它们是如何工作的。我希望它做这样的事情：

```
def age_over_18(go_enjoy_yourself):

    def go_home_and_rethink_your_life():

        return 'So you should go home and rethink your life.'

    return go_enjoy_yourself if age_stored_somewhere > 18 else go_home_and_rethink_your_life

@age_over_18
def some_porn_things():

    return '-Beep-' 
```

但是我发现装饰器是在 Python 首次读取函数时执行的，这意味着这个函数实际上什么都不做。

我知道我可以写如下内容：

```
def some_porn_things():

    if age_stored_somewhere > 18:
        ...
    else:
        ... 
```

但我只是觉得装饰器优雅易懂，所以问题是：

**我可以在调用函数之前延迟装饰器的发生吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T12:36:00.290

诀窍只是确保检查发生在您的内部功能中，而不是外部功能中。在你的情况下：

```
def age_over_18(go_enjoy_yourself):
    def are_you_over_18():
        if age > 18:
            return go_enjoy_yourself()
        else:
            return 'So you should go home and rethink your life.'

    return are_you_over_18 
```

# animation - 为什么这个 SVG 动画不起作用

> ID：10784717
> 
> 赞同：2
> 
> 时间：2012-05-28T12:31:40.707
> 
> 标签：animation, path, svg, smil

我有一个 L 形`<path>`元素，我尝试使用`<animate>`它的`d`属性使其顺利增长：http: [//jsfiddle.net/Mathiasa/be5HS](http://jsfiddle.net/Mathiasa/be5HS)

我以前用 S 形试过它，它可以工作：http: [//jsfiddle.net/Mathiasa/bq9dt/](http://jsfiddle.net/Mathiasa/bq9dt/)

为什么 L 形不像 S 形那样缩放 - 因为我使用相同的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T14:38:06.620

路径必须包含相同的段类型才能具有非离散动画。您的 to 路径以 L、L、z 路径段结尾，而其他路径以 V、L、z 结尾

我已经更正了您的示例，以便所有路径都以 L、V、z 结尾：http: [//jsfiddle.net/longsonr/4UaQj/](http://jsfiddle.net/longsonr/4UaQj/)

# iphone - 如何在 UIPickerView 上添加 UIToolbar？(iPhone/iPad)

> ID：10784720
> 
> 赞同：0
> 
> 时间：2012-05-28T12:31:57.313
> 
> 标签：iphone, ipad, uipickerview, uitoolbar

在我的应用程序中，我有一个按钮，按下该按钮时应在`UIPickerView`其`UIToolbar`顶部显示 a 。当用户在 中选择了值时，`UIPickerView`他们会按下 中的按钮，`UIToolbar`同时关闭`UIPickerView`和`UIToolbar`。

我遇到的问题是我无法找到`UIToolbar`将`UIPickerView`. 通常我会有一个设置，其中 a 中的值`UITextField`受`UIPickerView`. 这样我可以简单地将 设置`UIToolbar`为`inputAccessoryView`，但是，这一次我没有`UITextField`.

请有人建议如何`UIToolbar`在`UIPickerView`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:45:40.850

最好的解决方案是使用`UIActionSheet`.

只需创建全局`UIActionSheet`，将您的`UIToolbar`和 添加`UIPickerview`到`UIActionSheet`子视图。

最后添加`UIActionSheet`主视图的子视图。

希望对你有帮助。！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:59:57.563

您需要将工具栏添加到 UIPickerView 的父容器视图。因此，如果您知道该视图是什么，则可以将工具栏添加到该视图中。如果容器是 NavigationViewController，您可以将工具添加到它的工具栏。

如果你没有父视图，那么创建一个——例如，添加一个新的视图类——给它一个工具栏，并在同一个视图中添加它下面的 PickerView。

要在界面中同步事物，通常使用 NSNotifications 更容易：

在选择器视图中...

```
NSArray *keys = [NSArray arrayWithObjects:@"myParameterName", nil];
NSArray *objects = [NSArray arrayWithObjects: myObject, nil];
NSDictionary *myDictionaryOfParameters = [NSDictionary dictionaryWithObjects: objects forKeys: keys];

[[NSNotificationCenter defaultCenter] postNotificationName:@"myPickerViewChanged" object:nil userInfo: nil]; 
```

然后在工具栏中添加一个观察者...

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(refreshView) name:@"myPickerViewChanged" object: nil];

//   ...

- (void) myPickerViewChanged: (NSNotification *) note  {
    NSDictionary * myDictionaryOfParameters = note.userInfo;
// Enable toolbar buttons, etc.
} 
```

希望这可以帮助。

# java - 在休眠中删除/保存多对一关系时出现org.hibernate.TransientObjectException

> ID：10784721
> 
> 赞同：1
> 
> 时间：2012-05-28T12:31:57.877
> 
> 标签：java, hibernate, annotations, many-to-one, xdoclet

我有两个具有以下结构的表

```
@hibernate.class table = "Person"
class Person{

    private String name
    private Car car

    @hibernate.id column = "NAME" generator-class = "native"
    @hibernate.generator-param name = "sequence" value = "SEQ_1"
    public String getName(){return name;}

    public void setName(String name){this.name=name;}

    @hibernate.many-to-one column="MODEL_ID" class="CAR" cascade="all"
    public Car getCar(){return car;}

    public void setCar(Car car){this.car=car;}
}

@hibernate.class table = "CAR"
class Car{

    private String modelID; 
    private String carName;

    @hibernate.id column = "MODEL_ID" generator-class = "assigned"
    public String getModelID(){return modelID}

    etc.... 
} 
```

但是当我尝试删除或保存 Person 类时，它休眠会引发此异常

这是完整的异常代码： org.springframework.dao.InvalidDataAccessApiUsageException: object references an unsaved transient instance - save the transient

你能给我任何帮助吗？

# jquery - 将列表元素拉伸到整个容器宽度

> ID：10784726
> 
> 赞同：1
> 
> 时间：2012-05-28T12:32:23.033
> 
> 标签：jquery, html, css, jquery-selectors, html-lists

我想让无序列表（ul）元素（li）拉伸到它的容器宽度。列表是自动生成的。它可以是 3、4 或 10 个元素。我需要你可以在附图中看到：

![在此处输入图像描述](../Images/180a0ddde462b61a7bd1c9ed78a19ab2.png)

HTML 和 CSS 代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>Stretch list elements to full container width</title>
    <style type="text/css">
        #container{
            width:100%;
        }
        ul{
            height:20px;
            margin:0;
            padding:0;
            list-style:none;
            border:1px solid #000;
        }

        ul li{
            float:left;
        }

    </style>
</head>
<body>

    What I have:<br>

    <div id="container">
      <ul>
        <li style="background-color:red">element 1</li>
        <li style="background-color:green">element 2</li>
        <li style="background-color:blue">element 3</li>
      </ul>
    </div>

    <br><br>   
    What I need:
    <br>

     <div id="container">
      <table width="100%" cellpadding="0" cellspacing="0">
        <tr>
            <td style="background-color:red">element 1</td>
            <td style="background-color:green">element 2</td>
            <td style="background-color:blue">element 3</td>
        </tr>
      </table>
    </div>

</body>
</html> 
```

用表很容易实现这个任务。但是如何使用 unordered(ul) 列表呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:42:22.930

看到这个[http://jsfiddle.net/38F9V/1/](http://jsfiddle.net/38F9V/1/)

```
$(document).ready(function(){
   var num = $('li').length;
   var width_li = 100/num;
   $('li').css('width',width_li+'%');
}); 
```

计算 li 元素的数量，并将总宽度除以该长度，然后使用 jquery 设置每个 li 元素的宽度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:36:22.320

你可以试试：`ul li { float: left; width: 33.33%; }`

# c# - 从 Asterisk 获取通话记录

> ID：10784734
> 
> 赞同：1
> 
> 时间：2012-05-28T12:32:50.593
> 
> 标签：c#, asterisk, phone-call

我正在编写 ac# sip 电话应用程序，我需要获取通话记录。我使用 PortSip 作为客户端 sip 库。并且有一个问题：该库具有通话录音功能，但约 10% 的通话没有录音（不知道为什么，即使重新启动 StartRecording 也无济于事，它只是无法开始录制当前通话）。
所以我决定在星号服务器上记录通话，并在通话结束后将它们下载到我们的数据库中。Asterisk CDR 数据存储在 mysql 数据库中，我在那里看不到任何唯一的 callId。我想知道我们是否可以将表中的呼叫记录写入数据库，以通过与 cdr 相关的某些键来获取它们？
或者我看到的另一种选择是记录星号服务器上的所有呼叫，通过 ftp 将所需的呼叫下载到我们的计算机并将其保存到我们的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:21:11.557

我肯定会让星号记录呼叫而不是 sip 设备。您可以使用拨号方案中的[Monitor](http://www.voip-info.org/wiki/view/Asterisk+cmd+Monitor%20Monitor%20command)命令在星号中记录呼叫，例如：

```
exten => 555,1,Answer
exten => 555,2,Monitor(wav,filename)
... 
```

这将自动记录对 555 分机的所有呼叫（您可以使用[拨号方案模式](http://www.voip-info.org/wiki/view/Asterisk+Dialplan+Patterns%20dialplan%20pattern)自动记录对所有分机的所有呼叫，但这取决于您的特定设置）。如果您不想记录*所有*呼叫，您还可以运行 AGI 脚本来区分要记录哪些呼叫。

目标文件名可以由 ani-dnis-datetime 组成以使其唯一或与任何[其他星号变量](http://www.voip-info.org/wiki/view/Asterisk+Detailed+Variable+List%20Variables)组成。例如：${CALLERID(ani)}-${EXTEN}。您还可以使用唯一调用 ID 变量 ${UNIQUEID}，例如 ${CALLERID(ani)}-${EXTEN}-${UNIQUEID}。

[至于 CDR，您可以使用cdr_odbc](http://www.voip-info.org/wiki/view/Asterisk+cdr+odbc%20cdr_odbc)模块将其作为 csv、sqlite 文件或 mysql、postgresql 等关系数据库。

使呼叫独一无二的是**uniqueid**字段。因此，在您的 CDR 中，您将拥有来源、目的地、所涉及的频道、日期、应答时间、拨号状态等，以及这个唯一 ID 字段，因此您可以将给定呼叫与给定音频文件（录音呼叫）相关联并使用相关的 sip 设备。如果需要，可以定期下载和备份 wav 文件。

希望能帮助到你！

# javascript - ASP.NET 中的 Reportviewer 控件加载指示器

> ID：10784737
> 
> 赞同：3
> 
> 时间：2012-05-28T12:33:00.490
> 
> 标签：javascript, asp.net, css, reporting-services, reportviewer

我只是用新主题为我的网站换肤，是否可以更改 ReportViewer 控件的加载图像（具有绿色）？

我尝试了一些建议的解决方案，但它不起作用，有人可以指导我吗？ ![在此处输入图像描述](../Images/f9c879e36045532fc453b79c1fc4296d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T14:09:01.963

您始终可以使用 CSS 对其进行修改。

如果您调查从 ReportViewer 控件呈现的 HTML，应该有一个`<div>`名为`[ID_of_control]_AsyncWait_Wait`

在我的，我有 css；

```
<style>
    /* this will remove the spinner */
    div#ReportViewer1_AsyncWait_Wait img{ display: none; } 
    /* this allows you to modify the td that contains the spinner */
    div#ReportViewer1_AsyncWait_Wait table tbody tr td:first-child{ background: red; width: 100px; height: 100px; } 
</style> 
```

您需要做的就是将其设置为`background-image`打开`div#ReportViewer1_AsyncWait_Wait table tbody tr td:first-child`，以便拥有自己的自定义图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T00:51:30.743

以下解决方案使用 jQuery 和 CSS 实现了替换加载图像。环境是 Visual Studio 2013、ReportViewer 10.0、.NET 4.0。

该技术使用**window.setInterval**替换加载图像*并保持它被替换*。在某些情况下，例如选择级联参数，ReportViewer 会替换其大部分 DOM 内容，包括加载图像。因此，使用 CSS 背景图像或使用 jQuery 一次性替换加载图像的简单解决方案不起作用。

给定添加到 .ASCX 用户控件的 ReportViewer 控件：

```
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>

<%-- replace stock SSRS wait control ("green spinner") with our own; execute every 200 milliseconds --%>
<script type="text/javascript">
$(document).ready(function () {
    OurApp.timeoutID = window.setInterval(OurApp.reportViewerWaitControlSubstitute, 200);
});
</script>

<rsweb:ReportViewer ID="rvc0" runat="server" ... CssClass="ReportViewerControl" ... >
</rsweb:ReportViewer> 
```

JavaScript：

```
var OurApp= OurApp|| {};

OurApp.reportViewerWaitControlSubstitute = function () {
    var control = $('.ReportViewerControl div[id$="_AsyncWait_Wait"] img');
    var source = control.attr("src");
    var path = "/media/images/atom.gif";
    var style = "height:48px;width:48px;border-radius:10px;margin-right:10px";
    //don't replace if already our image, or it will not animate
    if (source && (source != path)) {
        control.attr("src", path);
        control.attr("style", style);
    }
} 
```

CSS（用于圆角和更均匀的图像和文本排列）：

```
.ReportViewerControl div[id$='_AsyncWait_Wait'] {
    border-radius:10px;
    padding:15px 15px 0 !important} 
```

结果：

![SQL Server Reporting Services ReportViewer 自定义加载图像](../Images/46a6ba7f9b2d3fda151abdd1577bb3b8.png)

特定的 .gif 是一个动画原子，在加载 ReportViewer 元素时看起来非常酷！

# msbuild - 检查 csproj 中的属性是否“开始/结束”

> ID：10784740
> 
> 赞同：27
> 
> 时间：2012-05-28T12:33:07.493
> 
> 标签：msbuild

我正在我的 csproj 文件中设置一些配置，这些配置将针对不同的框架版本。理想情况下，我想要“Debug - 3.5”、“Debug - 4.0”、“Release - 3.5”和“Release - 4.0”的配置。

在我的 csproj 文件中，我想做如下的事情：

```
<PropertyGroup Condition=" '${Configuration}' ends with '3.5' ">
    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
</PropertyGroup
<PropertyGroup Condition=" '${Configuration}' ends with '4.0' ">
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
</PropertyGroup
... check for "starts with Debug" to define Optimize etc. 
```

但是，我不知道如何检查是否`${Configuration}`以特定字符串开头/结尾。是否有捷径可寻？

**编辑**：下面标记的答案为我指明了正确的方向，这导致我选择：

```
<PropertyGroup Condition="$(Configuration.Contains('Debug'))">
    ... setup pdb, optimize etc.
</PropertyGroup>
<PropertyGroup Condition="$(Configuration.Contains('3.5'))">
    ... set target framework to 3.5
</PropertyGroup>
... and so on for Release and 4.0 variations 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-28T12:38:18.420

MSBuild 属性只是一个 .NET 字符串，并且具有可用的[属性函数](https://msdn.microsoft.com/en-us/library/dd633440.aspx#BKMK_String)。

```
Condition="$(Configuration.EndsWith('3.5'))" 
```

应该管用

# jquery - 验证多个文件输入

> ID：10784741
> 
> 赞同：0
> 
> 时间：2012-05-28T12:33:08.850
> 
> 标签：jquery, html, jquery-validate

我在验证多个文件输入时遇到问题。每当我提交时，只会验证第一个/第一个使用的字段。

**HTML：**

```
<html>
<head>
</head>
<body>
...
<tr>
<td>Photo1:</td>
<td> <input type="file" class="ipfile" name="pic[]" /> </td>
</tr>
<tr>
<td>Photo2:</td>
<td> <input type="file" class="ipfile" name="pic[]" /> </td>
</tr>
<tr>
<td>Photo3:</td>
<td> <input type="file" class="ipfile" name="pic[]" /> </td>
</tr>
...
</body>
</html> 
```

**JS：**

```
<script type="text/javascript">
  $(document).ready(function(){

    $("#fnpMain").validate(
    {
    rules:{
        Telefon:{required:true, exactlength:9, digits:true}
    }}
    );

    $("input.ipfile").each(function(){
       $(this).rules("add", {
           required:true,
           accept: "jpg|jpeg"
       });                   
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:49:06.690

我想，这就是你所期待的。

**[现场演示](http://jsfiddle.net/SivaCharan/7nSey/2/)**

我已经使用了来自这个**[bassistance.de](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)**站点的这个**[jquery-plugin-validation](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js)**文件。

## HTML：

```
<form id="fnpMain">
    <table>
        <tr> 
            <td>Photo1:</td> 
            <td> 
                <input type="file" class="ipfile" name="pic0" /> 
            </td> 
        </tr> 
        <tr> 
            <td>Photo2:</td> 
            <td> 
                <input type="file" class="ipfile" name="pic1" /> 
            </td> 
        </tr> 
        <tr> 
            <td>Photo3:</td> 
            <td> 
                <input type="file" class="ipfile" name="pic2" /> 
            </td> 
        </tr> 
    </table>
     <input type="submit" value="Submit"/>

</form> 
```

## JS：

```
$("#fnpMain").validate();

$("input.ipfile").each(function(){        
    $(this).rules("add", {            
        required:true,            
        accept: "jpg|jpeg"        
    });                        
}); 
```

# delphi - delphi 7，FastMM4 无法安装解决方法

> ID：10784743
> 
> 赞同：0
> 
> 时间：2012-05-28T12:33:20.617
> 
> 标签：delphi, delphi-7, fastmm

我正在开发一个使用`FastMM4`来自[sourceforge.net](http://sourceforge.net/projects/fastmm/files/)的应用程序。所以我`FastMM4.pas`在开头就添加了uses子句。在应用程序中，我需要像这样运行一个`batch`文件`FinalizeMemoryManager;``finalization``unit FastMM4;`

```
 initialization
        RunInitializationCode;

  finalization
        {$ifndef PatchBCBTerminate}
        FinalizeMemoryManager;
        RunTheBatFileAtTheEnd; //my code here..calling a procedure
       {$endif}

 end. 
```

那么我的**RunTheBatFileAtTheEnd**代码是：

```
 procedure RunTheBatFileAtTheEnd;
 begin
 //some code here....
  sFilePaTh:=SysUtils.ExtractFilePath(applicaTname)+sFileNameNoextension+'_log.nam';
 ShellExecute(applcatiOnHAndle,'open', pchar(sExeName),pchar(sFilePaTh), nil, SW_SHOWNORMAL) ;
 end; 
```

为此，我需要`SysUtils,shellapi`在 fastmm4 单元的使用条款中使用。**但是**使用它们这个消息来了 ![在此处输入图像描述](../Images/2ae8a2b0f498f27ba0cc11f60a4b519b.png)

但是，如果我`SysUtils,shellapi`从用途中删除它就可以了。我仍然需要安装 fastmm4 的所有功能，但是`SysUtils,shellapi`没有安装 fastmm4

我有一个自己的单元，但它的最终化是在 fastmm4 最终化之前执行的。

谁能告诉我如何解决这个问题？

**编辑- 1**

```
unit FastMM4;
//...
...
implementation

 uses
   {$ifndef Linux}Windows,{$ifdef FullDebugMode}{$ifdef Delphi4or5}ShlObj,{$else}
  SHFolder,{$endif}{$endif}{$else}Libc,{$endif}FastMM4Messages,SysUtils,shellapi; 
```

我的应用程序

```
 program memCheckTest;
   uses
      FastMM4, 
```

**编辑-2：**

（在@SertacAkyuz 回答之后），我删除`SysUtils`了它并且它工作了，但我仍然需要运行批处理文件来打开外部应用程序`RunTheBatFileAtTheEnd`。原因是..我希望外部应用程序仅在 FastMM4 退出`finalization`. 这`sExeName`是将运行文件`sFilePaTh`(.nam) 的应用程序。任何人都可以告诉如何做到这一点？没有`uninstalling FastMM4`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T13:35:43.127

`IsMemoryManagerSet`FastMM 通过调用“system.pas”中的函数来检查是否设置了默认内存管理器，然后再安装它自己的。如果设置了默认内存管理器，它会拒绝设置自己的内存管理器并显示问题中显示的消息。

该消息中关于*“fastmm4.pas”的说明应该是项目 .dpr 文件中的第一个单元，*假设“fastmm4.pas”本身没有被修改。

当你修改“fastmm4.pas”的uses子句时，如果uses子句中包含的任何单元都有一个`initialization`部分，那么该部分代码必须在“fastmm4.pas”的初始化部分之前运行。如果该代码需要通过 RTL 分配/使用内存，则设置默认内存管理器。

因此，您必须注意将“fastmm4.pas”更改为不在uses 子句中包含任何此类单元，例如“sysutils.pas”。

* * *

下面的示例代码（无错误检查、文件检查等）显示了如何在不分配任何内存的情况下使用记事本启动 FastMM 的日志文件（假设日志文件存在）：

```
var
  CmdLine: array [0..300] of Char; // increase as needed
  Len: Integer;
  SInfo: TStartupInfo;
  PInfo: TProcessInformation;

initialization
  ...  // fastmm code

finalization
{$ifndef PatchBCBTerminate}
  FinalizeMemoryManager;       // belongs to fastmm

  // Our application is named 'Notepad' and the path is defined in AppPaths
  CmdLine := 'Notepad "';  // 9 Chars (note the opening quote)
  Len := windows.GetModuleFileName(0, PChar(@CmdLine[9]), 260) + 8;

  // assumes the executable has an extension.
  while CmdLine[Len] <> '.' do
    Dec(Len);

  CmdLine[Len] := #0;
  lstrcat(CmdLine, '_MemoryManager_EventLog.txt"'#0); // note the closing quote

  ZeroMemory(@SInfo, SizeOf(SInfo));
  SInfo.cb := SizeOf(SInfo);
  CreateProcess(nil, CmdLine, nil, nil, False,
                NORMAL_PRIORITY_CLASS, nil, nil, sInfo, pInfo);

{$endif}

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:55:45.870

我同意 Sertac 的回答，但如果您坚持使用`SysUtils.pas`. 答案是不要使用它，并从中提取您需要的内容并将其放入您自己的副本中。下面是您需要的 - `ExtractFilePath`used `LastDeliminator`、 used`StrScan`和 2 个常量，因此我将它们复制到这个新单元中并命名为`MySysUtils.pas`。

这也被广泛用于那些不想编译一堆他们永远不会使用的额外代码的人（你必须绝对确定它不会在任何单元的任何地方使用）。

```
unit MySysUtils;

interface

const
  PathDelim = '\';
  DriveDelim = ':';

implementation

function StrScan(const Str: PWideChar; Chr: WideChar): PWideChar;
begin
  Result := Str;
  while Result^ <> #0 do begin
    if Result^ = Chr then
      Exit;
    Inc(Result);
  end;
  if Chr <> #0 then
    Result := nil;
end;

function LastDelimiter(const Delimiters, S: string): Integer;
var
  P: PChar;
begin
  Result := Length(S);
  P := PChar(Delimiters);
  while Result > 0 do begin
    if (S[Result] <> #0) and (StrScan(P, S[Result]) <> nil) then
      Exit;
    Dec(Result);
  end;
end;

function ExtractFilePath(const FileName: string): string;
var
  I: Integer;
begin
  I := LastDelimiter(PathDelim + DriveDelim, FileName);
  Result := Copy(FileName, 1, I);
end;

end. 
```

# iphone - 预期表达式中出现错误？

> ID：10784748
> 
> 赞同：4
> 
> 时间：2012-05-28T12:33:55.600
> 
> 标签：iphone, opengl-es

在这里，我尝试在 value 中插入一个值，`GLKVector2Add`但错误来自这一行中缺少的预期表达式。

```
GLKVector2 self.position = GLKVector2Add({-200.695, 271},{-803.695, 0});  //Error - Expected expression 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:44:39.697

尝试创建“ `GLKVector2`”变量，设置它们，然后将*它们*作为参数传递给“ `GLKVector2Add`”。可能编译器根本不知道如何处理“{-200.695,271}”（浮点数和整数的混合）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:12:36.400

您必须使用添加它们`GLKVector2Make`。

因此，您的代码将是：

```
GLKVector2 position = GLKVector2Add(
                      GLKVector2Make(-200.695, 271), 
                      GLKVector2Make(-803.695, 0)); 
```

# grails - 在 IntelliJ 中使用 Easyb 或 Spock 在 Grails 项目中“测试一点，编写一点代码”

> ID：10784749
> 
> 赞同：1
> 
> 时间：2012-05-28T12:34:02.257
> 
> 标签：grails, intellij-idea, bdd, spock, easyb

[这篇文章](http://blog.marktye.com/2009/03/running-grails-unit-tests-in-intellij.html)完美地描述了我的原始问题：我想遵循 TDD：

*   写一个小测试
*   看它失败
*   编写足够的代码以使其成功
*   看它成功
*   重复

我正在 IntelliJ 中从事 Grails 项目。如果我只想编写普通的 JUnit 测试，上面的帖子可以解决所有问题：

*   前往 /test/unit
*   将一些测试代码放在“class Xyz extends GroovyTestCase”类中
*   按 Shift F10
*   JUnit 报告在一两秒内弹出

问题是我想使用一种非常酷的“英语描述”测试设置，比如 Easyb 或 Spock。

我该怎么办？从 Grails 为我创建的自动生成的测试类开始，然后将 Spock 的东西塞进其中，这将是一件神奇的事情。显然我不能两次使用“扩展”。这是否给出了我正在尝试做的事情的要点？

```
class Xyz extends GroovyTestCase extends spock.lang.Specification {

    //void testSomething() {
    //    fail "Implement me"
    //}

    def "length of Spock's and his friends' names"() {
        expect:
        name.size() == length

        where:
        name     | length
        "Spock"  | 5
        "Kirk"   | 4
        "Scotty" | 6
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:42:06.830

扩展 spock 类，而不是 groovy 类。您可以从[源代码中列出的](http://code.google.com/p/spock/source/browse/branches/groovy-1.7/spock-grails-support/src/main/groovy/grails/plugin/spock/?r=1149)UnitSpec、ControllerSpec、IntegrationSpec 等中进行选择。Spock会处理剩下的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T01:52:21.730

- 使用“grails 安装模板”

-将测试模板更改为以下内容：

```
@artifact.package@

import grails.test.mixin.*
import org.junit.*
import spock.lang.Specification

@TestFor(@artifact.testclass@)
class @artifact.name@ extends Specification {

} 
```

- 在 Spock 中编写测试代码（或普通的 JUnit 代码）

-IntelliJ->运行->编辑配置。添加 JUnit 类型的新配置。测试种类：`<All in package/All in UnitTest directory/All in one UnitTest class/etc.`>

-（快捷键：方法名或类名上的光标->ctrl-shift-F10）

* * *

关于我最初的问题：回想起来，我对那篇博客文章的“在目录中运行”部分感到困惑。当前的 IntelliJ 允许您在一个目录或整个项目中运行所有 JUnit 测试。

一旦我理解了这一点，下一步就是意识到 Spock 测试是 JUnit 测试。在 test/unit 目录中创建一个“class Xyz extends Specification {}”类，用 Spock 代码填充它，然后 Run as... JUnit。魔法！

# backbone.js - 主干路由在导航（）时保留主题标签

> ID：10784754
> 
> 赞同：0
> 
> 时间：2012-05-28T12:34:24.400
> 
> 标签：backbone.js

你好，这是我的场景。

我有这些路线

```
 routes: {
    "": "show_group_list",
    "!/group/:_id/": "show_group",
}, 
```

这是我的导航功能：

```
 App.app.navigate('!/group/'+group.get('_id')+'/', { trigger: true }); 
```

当函数被触发时，地址栏会显示**localhost/group/1**而不是*localhost/#!/group/1*。问题是，当我刷新页面时，我不再获得初始页面（我的是单页应用程序）

如何破解 navigate() 以保留主题标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:53:10.180

好的，这很简单，我启用了 pushState。禁用 pushState 你会得到哈希

# sql - 数据库事务 - 或者这是一个规范化问题？

> ID：10784757
> 
> 赞同：1
> 
> 时间：2012-05-28T12:34:30.147
> 
> 标签：sql, database, transactions, normalization

假设一个学生参加了特定的课程。他的总费用为 25000 美元（基于其他计算，如学费、杂费等）。

现在，这让我感到困惑。我怎样才能*得到*并*计算*学生的总余额。我是不是该：

1.  每次他付款时，从他的总余额（我表中的一列）中减去他支付的金额。

2.  **永远**不要修改任何列，而是使用另一个名为 total_fee 列的属性。只需从我的 tution_payment 表中找到的每笔交易中获取他支付的总金额，然后从 total_fee 中减去结果（这可以通过我的查询来完成）。另请注意，我在这里没有使用 total_balance。

我记得有人跟我说过

> *金融交易一般只插入*

这是否意味着我以前的解决方案是正确的？目前，我使用后者，但觉得这是一个不准确的解决方案。

我不熟悉数据库如何表示会计交易，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:32:13.870

通常，会有一个带有事务的表。学生费用将记入大学的贷方并记入学生的借方。还款将被记为学生的信用。利息费用将计入大学。

这样，就不需要存储余额。您根据交易历史计算余额。最大的好处是可以解释余额；它不仅仅是一个存储在数据库中的数字，而是它的完整历史。

# php - set_exception_handler 是否打算替换 set_error_handler？

> ID：10784759
> 
> 赞同：8
> 
> 时间：2012-05-28T12:34:43.457
> 
> 标签：php

根据[PHP 手册](http://php.net/exceptions)： *内部 PHP 函数主要使用错误报告，只有现代面向对象的扩展使用异常。但是，**错误可以通过 ErrorException 简单地转换为异常***

ErrorException 中提供的示例：

```
<?php
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
}
set_error_handler("exception_error_handler"); 
```

它似乎允许使用异常而不是默认的错误报告。我的问题是，这对我们来说是一种鼓励还是一种选择？

此外，哪种更好的做法是像上面的示例一样单独使用异常，或者同时使用异常 (set_exception_handler) 和错误报告 (set_error_handler)？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T12:42:29.647

简短的回答：不。这是两个不同的功能。

长答案：它不是要替换，而是要利用。[`set_exception_handler`^(*Docs*)](http://php.net/set_exception_handler)用于异常，[`set_error_handler`^(*Docs*)](http://php.net/set_error_handler)用于错误。那是两双不同的鞋子。

另见：

*   [PHP：异常与错误？](https://stackoverflow.com/questions/841500/php-exceptions-vs-errors)
*   [PHP：错误处理的控制流程是什么？](https://stackoverflow.com/questions/2306111/php-what-is-the-flow-of-control-for-error-handling)
*   [错误处理和记录^(*文档*)](http://php.net/manual/book.errorfunc.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-04T19:03:20.057

不，任何未捕获的异常都会导致致命错误。如果要优雅地响应 catch 块中未捕获的异常，则需要将函数设置为默认异常处理程序。为此，您使用**set_exception_handler()**函数，该函数接受一个可调用对象作为其参数。您的脚本将在可调用对象执行后终止。函数**restore_exception_handler()**会将异常处理程序恢复为之前的值。

# java - 2列jcombobox

> ID：10784768
> 
> 赞同：0
> 
> 时间：2012-05-28T12:35:06.220
> 
> 标签：java, swing, jcombobox

我对多列 jcombobox 有很多用途，但还没有找到任何东西，也没有设法制作我自己的。我尝试了几种在网络上找到的方法，但都没有奏效。之后我在某处读到那些（旧）在当前 Java 版本下不起作用。

到目前为止，我已经成功地制作了自己的组合框，组合框有一个表格作为下拉列表，我可以用鼠标选择一个项目，但目标是当用户开始在编辑框中键入时，下拉列表打开并光标根据用户编写的文本移动。似乎来自 eg 的事件`JTextField editor = (JTextField) comboBox.getEditor().getEditorComponent()`不起作用。

有没有人设法制作一个两列组合框或有任何想法，当用户开始输入时我如何获得事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:51:27.033

您正在寻找自动完成功能（我理解这个问题）：[SwingX](http://swingx.java.net)支持它- 并且非常易于使用。

它归结为实现自定义 ObjectToStringConverter 并使用该转换器使用 autoCompleteDecorator 配置组合框。就像是：

```
/**
 *  A converter which expects an item of an array type and returns
 *  a string representation of its first value. 
 */
public static class ArrayToStringConverter extends ObjectToStringConverter {

    @Override
    public String getPreferredStringForItem(Object item) {
        if (!(item instanceof Object[])) return DEFAULT_IMPLEMENTATION.getPreferredStringForItem(item);
        Object[] array = (Object[]) item;
        return DEFAULT_IMPLEMENTATION.getPreferredStringForItem(array[0]);
    }

}

// usage
// assuming an model with items being arrays 
JComboBox combo = new JComboBox(arrayModel);
// the renderer supporting multiple columns, f.i. a table
combo.setCellRenderer(new TabularListRenderer());
AutoCompleteDecorator.decorate(combo, new ArrayToStringConverter()); 
```

一个完整的工作示例（包括渲染器并显示如何强制弹出窗口的宽度大于组合本身）是[我的孵化器部分中的 TableAsListRenderer](http://java.net/projects/jdnc-incubator/sources/svn/show/trunk/src/kleopatra/java/org/jdesktop/swingx/table/asrenderer?rev=3379)

顺便说一句：自动完成功能是一个独立模块，可通过 maven 访问或从[java.net 的 maven 代表](https://maven.java.net/index.html#nexus-search;quick~swingx)手动下载，您可能需要 swingx-autocomplete-1.6.4.jar （加上相应的文档/来源，如果感兴趣）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:41:36.050

> 有没有人设法制作一个两列组合框或有任何想法，当用户开始输入时我如何获得事件。

您可以放入`JTable`，`JComboBox`但默认情况下，您只能从整`JTables`行中选择值，而不是直接从`JTables Cell`（需要额外的解决方法，尚未尝试）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T06:21:39.887

我也在寻找这个答案

这是我到目前为止的尝试..我创建Jpopup并将Jtable放在那里..然后我使用jlabel而不是jcombobox，当用户单击jlabel时，弹出（Jtable）将显示在该jlabel位置..当用户在jtable上选择值时，然后弹出窗口将处理，然后 jlabel 将显示结果..

对于您的情况，您可以使用 jtextfield 而不是 jlabel

编辑：继承人相关问题 [在此处输入链接描述](https://stackoverflow.com/questions/12943313/get-value-from-jcombobox)

# html - CSS垂直定位，不知道高度

> ID：10784770
> 
> 赞同：2
> 
> 时间：2012-05-28T12:35:19.120
> 
> 标签：html, css, vertical-alignment

我有以下菜单结构：

```
<div class="header" style="height: 150px;">
    <nav id="main-nav">
        <div class="menu-main-menu-container">
            <ul id="menu">
                <li>menu item 1</li>
                <li>menu item 2</li>
            </ul>
        </div>
        <div class="clear"></div>
    </nav>
</div> 
```

`#main-nav`在这种情况下，容器是真实的`height: 20px;`（`.menu-main-menu-container`也是如此）。但是当我尝试`.header`使用这个垂直定位整个菜单时：

```
#main-nav {
    bottom: 0;
    margin: auto;
    position: absolute;
    right: 0;
    top: 0;
} 
```

瞬间`#main-nav`得到高度`.header`！所以，它是`height: 150px;`（根据 Firebug），我不能垂直定位它。

我如何垂直定位它？这是我经常偶然发现的错误。当我添加 top: 0; 和底部：0；它获取父容器的高度。我不知道那个菜单的高度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:00:07.593

Situation when height of the parent is unknown and the height of the child known: Set `top: 50%` and `margin-top: -10px` (`10px` = half the height of the nav). Demo [http://dabblet.com/gist/2819055](http://dabblet.com/gist/2819055)

Situation when both the heights of the parent and the child are unknown: Use a pseudo-element of `height: 100%`; `display: inline` & `vertical-align: middle` on both the pseudo-element and the child (nav in this case) - demo [http://dabblet.com/gist/2819071](http://dabblet.com/gist/2819071)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T12:57:49.353

I'm thinking that you mean center horizontally. In which case you cannot do that if your height is unknown by CSS only. You can use jQuery for that though. Take a look at [this](http://jsfiddle.net/W5N6q/) fiddle.

It calculates the height of your menu and then calculates where it has to be positioned.

# objective-c - 在 iOS 中用画笔画一条线

> ID：10784772
> 
> 赞同：3
> 
> 时间：2012-05-28T12:35:26.187
> 
> 标签：objective-c, ios, core-graphics, cgcontext, brush

这里有很多帖子，有人问如何在CGContext中用画笔画线。答案总是：使用模式。但是，我现在尝试了几个小时，对我来说主要问题似乎是：CoreGraphics 似乎只是简单地将图案绘制为填充，然后简单地用您指定的路径的笔划剪裁此图案。这会导致一些看起来很糟糕的瓷砖边框，它看起来不像是有人真的用手画了一些东西。我想要的是刷子沿着路径绘制，没有任何剪裁。我基本上想沿着路径移动，并简单地在路径上每隔 x 个点绘制画笔图像，距离上，画笔的大小。这是否可以通过 CoreGraphics 以某种方式实现，或者这只是您必须自己实现的东西？

//编辑：对不起，我认为我说的很清楚，我使用了一个模式。这是我到目前为止所做的：

```
struct CGPatternCallbacks patternCallback = {0, drawChalkPattern, NULL};
CGAffineTransform patternTransform = CGAffineTransformMakeScale(.25f, .25f);

UIImage* brush = [UIImage imageNamed:@"ChalkBrush"];
CGPatternRef pattern = CGPatternCreate(NULL, (CGRect){CGPointZero, brush.size}, patternTransform, brush.size.width, brush.size.height, kCGPatternTilingConstantSpacingMinimalDistortion, true, &patternCallback);
CGColorSpaceRef patternSpace = CGColorSpaceCreatePattern(NULL);
CGContextSetStrokeColorSpace(context, patternSpace);

CGFloat color[4] = {1.0f, 1.0f, 1.0f, 1.0f};
CGContextSetStrokePattern(context, pattern, color);

CGContextDrawPath(context, kCGPathStroke); 
```

而这就是 patternCallback 函数：

```
void drawChalkPattern(void * info, CGContextRef context) {
    UIImage* pattern = [UIImage imageNamed:@"ChalkBrush"];
    CGContextDrawImage(context, (CGRect){CGPointZero, pattern.size}, [pattern CGImage]);
} 
```

最好的问候，迈克尔

# php - 快速插入会导致数据丢失

> ID：10784774
> 
> 赞同：0
> 
> 时间：2012-05-28T12:35:36.060
> 
> 标签：php, mysql

我这里有一个与 mysql 和 php 相关的奇怪错误。我想知道这是否也可能是我们服务器的性能问题。

我有一个用于管理回扣促销代码的课程。代码很棒，工作正常，完全符合它的预期。saveChanges() 操作根据对象的状态发送 INSERT 或 UPDATE ，并且在当前上下文中只会插入因为我正在尝试生成优惠券代码。

该类的 saveChanges 是这样的：（我知道，我不应该使用旧的 mysql，但由于软件的架构限制，我别无选择，所以请不要抱怨那部分）

```
public function saveChanges($asNew = false){

    //Get the connection
    global $conn_panier;

    //Check if the rebate still exists
    if($this->isNew() || $asNew){

        //Check unicity if new
        if(reset(mysql_fetch_assoc(mysql_query('SELECT COUNT(*) FROM panier_rabais_codes WHERE code_coupon = "'.mysql_real_escape_string($this->getCouponCode(), $conn_panier).'"', $conn_panier))) > 0){
            throw new Activis_Catalog_Models_Exceptions_ValidationException('Coupon code "'.$this->getCouponCode().'" already exists in the system', $this, __METHOD__, $this->getCouponCode());
        }

        //Update the existing rebate
        mysql_query($q = 'INSERT INTO panier_rabais_codes 
                        (
                            `no_rabais`,
                            `code_coupon`,
                            `utilisation`,
                            `date_verrou`
                        )VALUES(
                            '.$this->getRebate()->getId().',
                            "'.mysql_real_escape_string(stripslashes($this->getCouponCode()), $conn_panier).'",
                            '.$this->getCodeUsage().',
                            "'.($this->getInvalidityDate() === NULL ? '0000-00-00 00:00:00' : date('Y-m-d G:i:s', strtotime($this->getInvalidityDate()))).'"
                        )', $conn_panier);
        return (mysql_affected_rows($conn_panier) >= 1);

    }else{

        //Update the existing rebate
        mysql_query('UPDATE panier_rabais_codes
                        SET
                            `utilisation` = '.$this->getCodeUsage().',
                            `date_verrou` = "'.($this->getInvalidityDate() === NULL ? '0000-00-00 00:00:00' : date('Y-m-d G:i:s', strtotime($this->getInvalidityDate()))).'"
                        WHERE 
                            no_rabais = '.$this->getRebate()->getId().' AND code_coupon = "'.mysql_real_escape_string($this->getCouponCode(), $conn_panier).'"', $conn_panier);
        return (mysql_affected_rows($conn_panier) >= 0);

    }

} 
```

如您所见，代码本身非常简单干净，如果插入成功则返回 true，否则返回 false。

代码的另一部分使用随机算法生成代码，如下所示：

```
while($codes_to_generate > 0){

    //Sleep to delay mysql choking on the input
    usleep(100);

    //Generate a random code
    $code = strtoupper('RC'.$rebate->getId().rand(254852, 975124));
    $code .= strtoupper(substr(md5($code), 0, 1));
    $rebateCode = new Activis_Catalog_Models_RebateCode($rebate);
    $rebateCode->setCouponCode($code);
    $rebateCode->setCodeUsage($_REQUEST['utilisation_generer']);
    try{
        if($rebateCode->saveChanges()){
            $codes_to_generate--;
            $generated_codes[] = $code;
        }
    }catch(Exception $ex){
    }

} 
```

正如您在此处看到的，有两点需要注意。只有当我从 saveChanges 获得返回 true 时，才会填充要生成的代码数量和生成的代码数组，因此 mysql 必须报告已插入信息以使这部分发生。

另一个花絮是 while 的第一行：

```
//Sleep to delay mysql choking on the input
usleep(100); 
```

什么？那么这篇文章就是关于这个的。我的代码可以完美运行，只需生成少量代码。但是，如果我要求 mysql 一次保存多个代码，我必须使用 usleep 来限制自己，否则 mysql 会删除其中一些行。它将报告有受影响的行但不保存它们。

在 100 行以下，我不需要节流，然后我需要根据要插入的行数来休眠。这一定很简单，但我不知道是什么。这是我尝试插入的行的总和以及我必须实现的最小睡眠节流阀：

*   < 100 行：无
*   < 300 行：2 毫秒
*   < 1000 行：5 毫秒
*   < 2000 行：10 毫秒
*   < 5000 行：20 毫秒
*   < 10000 行：100 毫秒

感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:53:36.010

您确定您的代码都已插入且未更新，因为更新不存在的行没有任何作用。

# java - 2D 平台游戏中的碰撞错误

> ID：10784786
> 
> 赞同：1
> 
> 时间：2012-05-28T12:36:29.183
> 
> 标签：java, 2d, polygon, collision

我目前正在开发一款 2D Mario-Like Platformer Game。我遇到了一个我一直试图解决一段时间的碰撞问题，但似乎没有任何效果：/

基本上，我有一个CenterLayer，它在哪个位置存储什么样的Tile。然后我有一些 Sprites 和一个 Player，它们应该与这些 Tiles 发生碰撞。

因为这些瓷砖可以是三角形（或任何其他类型的凸多边形），我决定通过 SAT（分离轴定理）处理碰撞。这很好用，但是当与地板碰撞时，许多瓷砖彼此相邻并且精灵向左移动时，它会选择错误的边缘并将精灵向右移动，但预期的结果是向上移动。这会导致精灵卡住。

这是我目前使用的代码：

```
package level;

import java.awt.Polygon;

import tiles.Tile;
import sprites.*;

public class Collider { 
/** Collide Sprite (or Player) with CenterLayer **/ 
public static void collide(Sprite s, CenterLayer c){
    CollisionPolygon ps = s.getPolygon();

    //Get blocks to collide with
    int startXTile = (int) (s.getX() / CenterLayer.TILE_WIDTH) - 1;
    int endXTile = (int) Math.ceil((s.getX() + s.getWidth()) / CenterLayer.TILE_WIDTH) + 1;
    int startYTile = (int) (s.getY() / CenterLayer.TILE_HEIGHT) - 1;
    int endYTile = (int) Math.ceil((s.getY() + s.getHeight()) / CenterLayer.TILE_HEIGHT) +1;

    //limit to level boundaries
    if(startXTile < 0) startXTile = 0;
    if(endXTile > c.LEVEL_WIDTH) endXTile = c.LEVEL_WIDTH;
    if(startYTile < 0) startYTile = 0;
    if(endYTile > c.LEVEL_HEIGHT) endYTile = c.LEVEL_HEIGHT; 

    int sizeX = endXTile - startXTile;
    int sizeY = endYTile - startYTile;

    //loop through tiles and collide
    for(int xc = 0; xc < sizeX; xc++)
    for(int yc = 0; yc < sizeY; yc++){
        int xblock = xc + startXTile;
        int yblock = yc + startYTile;

        Tile t = c.getTile(xblock, yblock);
        if(t!=null){ //if tile == null --> tile is air
            CollisionPolygon pt = t.getPolygon(xblock, yblock);

            double[] projection = PolygonCollision(ps, pt);             

            //if collision has happened
            if(projection[0] != 0 || projection[1] != 0){
                //collide
                s.moveBy(projection[0], projection[1]);

                //update sprites polygon to new position                    
                ps = s.getPolygon();
            }
        }
    }
}

public static double dotProduct(double x, double y, double dx, double dy) {
    return x * dx + y * dy;
}

// Calculate the projection of a polygon on an axis (ax, ay)
// and returns it as a [min, max] interval
public static double[] ProjectPolygon(double ax, double ay, Polygon p) {
    double dotProduct = dotProduct(ax, ay, p.xpoints[0], p.ypoints[0]);
    double min = dotProduct;
    double max = dotProduct;
    for (int i = 0; i < p.npoints; i++) {
            dotProduct = dotProduct(p.xpoints[i], p.ypoints[i], ax, ay);
            if (dotProduct < min) {
                    min = dotProduct;
            } else if (dotProduct > max) {
                    max = dotProduct;
            }
    }
    return new double[] { min, max };
}

// Calculate the distance between [minA, maxA](p1[0], p1[1]) and [minB, maxB](p2[0], p2[1])
// The distance will be negative if the intervals overlap
public static double IntervalDistance(double[] p1, double[] p2) {
    if (p1[0] < p2[0]) {
        return p2[0] - p1[1];
    } else {
        return p1[0] - p2[1];
    }
}

public static double[] PolygonCollision(CollisionPolygon p1, CollisionPolygon p2){
    boolean intersection = true;

    int edgeCount1 = p1.npoints;
    int edgeCount2 = p2.npoints;

    double projectionX = 0;
    double projectionY = 0;
    double projectionDist = Double.POSITIVE_INFINITY;

    //loop through all the edges
    for(int edgeIndex = 0; edgeIndex < edgeCount1 + edgeCount2; edgeIndex++){
        //find edges

        double[] axis;

        if(edgeIndex < edgeCount1){
            axis = p1.getAxis(edgeIndex);
        } else {
            axis = p2.getAxis(edgeIndex - edgeCount1);
        }

        double axisX = axis[0];
        double axisY = axis[1];

        //System.out.println("edge: " +axisX + ", "+ axisY);

        //find the projection of both polygons on current axis
        final double[] proj1 = ProjectPolygon(axisX, axisY, p1);
        final double[] proj2 = ProjectPolygon(axisX, axisY, p2);

        //Check if polygons are intersecting, if not end loop
        double id = IntervalDistance(proj1, proj2); 
        if(id > 0){
            intersection = false;
            break;
        }

        //Check if projection would be shorter than previous one
        id = Math.abs(id);
        if(id < projectionDist){
            projectionDist = id;
            projectionX = axisX;
            projectionY = axisY;

            //check if hit from "false" side
            double d1x = p1.getCenterX();
            double d1y = p1.getCenterY();
            double d2x = p2.getCenterX();
            double d2y = p2.getCenterY();

            double midx = d1x - d2x;
            double midy = d1y - d2y;

            double dot = dotProduct(midx, midy, projectionX, projectionY);

            if(dot < 0){
                projectionX = -projectionX;
                projectionY = -projectionY;
            }
        }

    }

    double[] result = new double[]{0, 0};

    if(intersection){
        //System.out.println("colliison: " + projectionX +"; "+ projectionY + ", " + projectionDist);
        result[0] = projectionX * projectionDist;
        result[1] = projectionY * projectionDist;   
    }

    return result;
}
} 
```

有任何想法吗？

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T12:55:13.667

我也有这个错误，当多边形上有平行边时会发生这种情况。解决此问题的简单方法是在找到的轴上投影多边形中心之间的差异。如果结果为负，您只需将轴乘以 - 1.

```
 Vector aMidPoint = new Vector();
  Vector bMidPoint = new Vector();
  for ( Vector v : aVerts) {
     aMidPoint = aMidPoint.add(v);
  }
  for ( Vector v : bVerts) {
     bMidPoint = bMidPoint.add(v);
  }
  aMidPoint = aMidPoint.scalarDivision(aVerts.size());
  bMidPoint = bMidPoint.scalarDivision(bVerts.size());

  Vector ba = aMidPoint.subtract(bMidPoint);

  if (ba.dotProduct(minOverlapVector) < 0) {
     minOverlapVector = minOverlapVector.scalarMultiplication(-1);
  } 
```

# ruby-on-rails-3 - Cancan 无法与 active_admin 配合使用

> ID：10784787
> 
> 赞同：0
> 
> 时间：2012-05-28T12:36:29.730
> 
> 标签：ruby-on-rails-3, cancan, activeadmin

我已经使用下面的链接使用 active_admin 实现了 cancan。 [https://github.com/gregbell/active_admin/wiki/How-to-work-with-cancan](https://github.com/gregbell/active_admin/wiki/How-to-work-with-cancan)

就我而言，唯一的变化是在书面代码下方。应用程序/模型/ability.rb

```
class Ability
  include CanCan::Ability

  def initialize(user)

    user ||= AdminUser.new # guest user (not logged in)

    if user.id == 1  
      can :manage, :all      
      puts ">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> manage all"
    else
      can :read, :all
      puts ">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> read all"
    end
  end
end 
```

现在只需在 user.id 上设置条件。所以当我运行我的应用程序时，我可以看到我的 put 正确登录。

问题：

*   因此，如果我使用用户 whos user.id != 1 登录，那么我也可以在 active_admin 中管理我的所有模块。康康能力对我不起作用。

（简而言之，我可以：代码在任何情况下都不起作用）

使用 rails 3.1.1、cancan 1.6.7、activeadmin 0.4.4、ruby 1.9.3

正确遵循链接中的命令，仔细检查。

在 AdminUser 中使用了 authorize_resource。

使用社交而不是设计，这件事会影响康康吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:09:08.263

我在 /admin 的每个模型中的代码中编写以下代码

然后我在能力模型中的条件开始工作。

```
 menu :if => proc{ can?(:manage, #ModelName) }     
  controller.authorize_resource 
```

在发布这个问题之前，我只是在管理员用户中编写了上面的代码

# mysql - 我想在这个查询中使用 MYSQL 的一些逻辑

> ID：10784790
> 
> 赞同：0
> 
> 时间：2012-05-28T12:36:34.040
> 
> 标签：mysql, database

我有两个表，第一个被调用`teams`，第二个被调用`cpd`，我想要这个结果（*见下面的结果屏幕*）。我自己试过但没有成功（*见下面的练习查询*）。

> 团队表

```
id    name               sub_cat_id
1     SACRAMENTO KINGS   19
2     KINGS              19
3     MIMAMI HEAT        19
4     HEAT               20
5     KITE               20 
```

> cpd表

```
id team_id status added_date
1  3       1      2012-05-26
2  3       1      2012-05-27
3  3       0      2012-05-28 
```

> 练习查询

```
SELECT 
t.`id`,t.`name`,IFNULL(cpd.status,0) AS resultStatus,IFNULL(cpd.added_date,CURDATE()) AS added_date
FROM `teams` t
LEFT JOIN cpd  ON cpd.team_id = t.id 
WHERE t.`sub_cat_id` = 19 OR cpd.added_date = CURDATE() 
```

> 结果屏幕（仅需要那些行在屏幕中为黑色）

![在此处输入图像描述](../Images/096718c6f0d8e2f2cffdab8f312066fb.png)

更新

> 解释 ？

1.  我正在尝试`sub_cat_id = 19`在团队表中获取与他们相关的那些行
2.  加入`team table`_ `cpd table`_`cpd.status filed`
3.  `cpd.status`必须与当前日期`cpd table`相关`2012-05-28`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:46:06.997

选择吨。`id`,t。`name`,IFNULL(cpd.status,0) AS resultStatus,IFNULL(cpd.added_date,CURDATE()) AS added_date FROM `teams`t LEFT JOIN cpd ON cpd.team_id = t.id WHERE t. `sub_cat_id`= 19 或 cpd.added_date = CURDATE() GROUP BY t.id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:46:43.330

获得所需结果的方法不止一种：

例如：

```
SELECT t.`id`,t.`name`,
       IFNULL(cpd.status,0) AS resultStatus,
       IFNULL(cpd.added_date,CURDATE()) AS added_date
FROM `teams` t
INNER JOIN cpd  ON (cpd.team_id = t.id AND cpd.status = 0) 
WHERE t.`sub_cat_id` = 19 
      OR 
      cpd.added_date = CURDATE() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:47:08.220

您的 JOIN`ON cpd.team_id = t.id`仅将一个元组与 cpd 表匹配，因此对于其他元组，日期设置为 NULL（因为您正在执行 LEFT JOIN），因此 where 查询仅提供一个元组

# mysql - sql查询加入

> ID：10784793
> 
> 赞同：0
> 
> 时间：2012-05-28T12:36:39.463
> 
> 标签：mysql, sql, join

我有一个查询，通过它我从一个表中选择所有 Id

```
SELECT emp_id FROM emp_table 
```

现在我必须在一个查询中从另一个表中选择所有这些 Emp 名称

```
SELECT emp_name FROM emp_detail WHERE emp_id='".THAT ID."' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:39:06.813

使用联接

```
Select d.emp_name from emp_table t join emp_detail d on t.emp_id = d.emp_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:39:46.680

```
SELECT emp_name 
FROM emp_detail 
WHERE emp_id in (SELECT emp_id FROM emp_table) 
```

或者

```
SELECT d.emp_name 
FROM emp_detail d
inner join emp_table e on e.emp_id = d.emp_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:40:14.327

```
SELECT dtl.emp_name --other columns
FROM emp_table emp
JOIN emp_detail dtl
  ON emp.id = dtl.emp_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T12:47:19.260

```
SELECT d.emp_name, e.emp_id
FROM emp_detail d
inner join emp_table e on e.emp_id = d.emp_id and e.emp_id='".ParameterID."'; 
```

或者

```
SELECT d.emp_name, e.emp_id
FROM emp_table e
inner join emp_detail d on e.emp_id = d.emp_id where e.emp_id='".ParameterID."'; 
```

如果不需要，您可以删除查询的 ParameterID id 部分。

# wordpress - WordPress 可读性

> ID：10784794
> 
> 赞同：0
> 
> 时间：2012-05-28T12:36:39.513
> 
> 标签：wordpress, wordpress-theming

我想在我的文章中添加“可读性按钮”。但是存在的插件对我不起作用，因为我无法更改背景颜色。

所以在可读性网站上：readability.com/publishers/tools 我可以制作自己的按钮。

我怎样才能把它自动放在我的所有帖子中？我认为在functions.php中它将是正确的目的地..

这是按钮的代码：

```
<div data-bg-color="#fdfdfa" class="rdbWrapper" data-show-read="1" data-show-send-to-kindle="0" data-show-print="0" data-show-email="0" data-orientation="0" data-version="1"></div><script type="text/javascript">(function() {var s = document.getElementsByTagName("script")[0],rdb = document.createElement("script"); rdb.type = "text/javascript"; rdb.async = true; rdb.src = document.location.protocol + "//www.readability.com/embed.js"; s.parentNode.insertBefore(rdb, s); })();</script> 
```

提前谢谢。

迎接迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:46:56.767

functions.php 将是错误的地方。查看[Wordpress codex](http://codex.wordpress.org/Theme_Development#Template_Files)以了解哪些文件属于哪个文件。

您究竟想将按钮放在页面的哪个位置？

对您来说最重要的可能是：

*   **文章的index.php**或**single.php**，取决于您的主题
*   **page.php**用于静态页面
*   **header.php**用于页面标题
*   **页脚的**footer.php****

 **如果您将代码放在页眉或页脚中，如果您不使用任何可以设置在哪些页面（或页面类型）上显示按钮的[条件标签，它将显示在所有页面上。](http://codex.wordpress.org/Conditional_Tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:44:26.873

我认为最简单的方法是将 jQ 添加到页脚，并将按钮添加到 page.php 或您在条目内容关闭 div 上方创建的任何自定义页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T23:28:23.853

正确的位置是functions.php。您添加一个过滤器，如下所示：

```
function add_post_content($content) {
$content .= $buttonCode
return $content;
}
add_filter('the_content', 'add_post_content'); 
```

希望这会有所帮助，杰森

**[更新]**

为此，我假设您提供的代码是按钮代码，如果不是，则只需替换为正确的按钮代码。

在主题文件夹中打开您的 functions.php 并将其添加到底部：

要将其放在您添加的帖子下方：

```
function add_post_content($content) {
    $buttonCode = "<div data-bg-color=\"#fdfdfa\" class=\"rdbWrapper\" data-show-read=\"1\" data-show-send-to-kindle=\"0\" data-show-print=\"0\" data-show-email=\"0"\ data-orientation=\"0\" data-version=\"1\"></div><script type=\"text/javascript\">(function() {var s = document.getElementsByTagName(\"script\")[0],rdb = document.createElement(\"script\"); rdb.type = \"text/javascript\"; rdb.async = true; rdb.src = document.location.protocol + \"//www.readability.com/embed.js\"; s.parentNode.insertBefore(rdb, s); })();</script>";
    $content .= $buttonCode
    return $content;
}
add_filter('the_content', 'add_post_content'); 
```

要将其放在您添加的帖子上方：

```
function add_post_content($content) {
    $buttonCode = "<div data-bg-color=\"#fdfdfa\" class=\"rdbWrapper\" data-show-read=\"1\" data-show-send-to-kindle=\"0\" data-show-print=\"0\" data-show-email=\"0"\ data-orientation=\"0\" data-version=\"1\"></div><script type=\"text/javascript\">(function() {var s = document.getElementsByTagName(\"script\")[0],rdb = document.createElement(\"script\"); rdb.type = \"text/javascript\"; rdb.async = true; rdb.src = document.location.protocol + \"//www.readability.com/embed.js\"; s.parentNode.insertBefore(rdb, s); })();</script>";
    $content = $buttonCode . $content;
    return $content;
}
add_filter('the_content', 'add_post_content'); 
```**

# java - 设置属性映射> 进入 spring.xml

> ID：10784803
> 
> 赞同：4
> 
> 时间：2012-05-28T12:37:48.090
> 
> 标签：java, spring

在我的课堂上，我有这个二传手

```
public void setSomehing(Map<Object, Class<?>>  beans){
...
} 
```

`Object`是一些bean，`Class`是它的接口。我尝试更多的组合，但我总是得到

> `cvc-complex-type.2.3:`元素 'map' 不能有字符 [children]，因为该类型的内容类型是仅元素。

一些组合是：

```
<bean id="rmiServerBeanFactory" class="org.infobip.spring.remoting.server.StandaloneCompositeRmiServerBeanFactory">
        <property name="something">
               <map>
                 <entry key-ref="myBean" value="org.mypackage.MyBeanInterface"/>
             </map>
        </property>
      </bean> 
```

请帮忙。如何在 spring.xml 中设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:52:39.417

此错误消息是由于 XML 中的语法错误造成的。在此示例中，您只希望地图元素具有单个条目子项，对吗？寻找开始和结束地图标签之间的杂散字符。尝试按照您的意图重新输入该元素的所有内容。

[在此处](http://www.coderanch.com/t/485875/Spring/cvc-complex-type-Element-beans)查看类似的问题和解决方案。您只需要查看第一个和最后一个帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:58:43.333

hm maybe this example in my application helps you:

namespace util is

```
xmlns:util="http://www.springframework.org/schema/util" 

   <property name="something">
        <util:map map-class="java.util.concurrent.ConcurrentHashMap">
            <entry key="a" value="b"/>
        </util:map>
    </property> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T20:53:50.097

有几种方法可以做到这一点，但其中一种更紧凑的方法如下：

```
<map value-type="java.lang.Class">
    <entry key-ref="myBean" 
           value="org.mypackage.MyBeanInterface"/>
</map> 
```

（在 Spring 3.0 上测试。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-13T07:44:16.033

您的 XML 格式和语法在某处是错误的。它的真正含义（Sinn）是允许 ... 元素包含子元素，但不能包含裸文本（“内容类型仅是元素”），并且杂散的加号是裸文本。

# login - 表达式引擎登录问题（会员模块）

> ID：10784804
> 
> 赞同：0
> 
> 时间：2012-05-28T12:37:49.263
> 
> 标签：login, membership, expressionengine

我正在使用 Expression Engine 2。我想创建一个简单的仅限成员的部分。我已经使用成员组创建了相关权限，并且我已经为成员组实现了对某些页面的权限。

我使用了登录表单标签 (http://expressionengine.com/user_guide/modules/member/index.html) 来创建我的登录表单。但是，当我登录时，它什么也不做。我相信它在几个月前测试、注销和使用该站点之前可以正常工作，但现在登录表单似乎根本不起作用。它只是在没有登录的情况下提交回页面。如果我通过管理员登录，一切正常，所以它只是网站上的登录表单！

我的EE页面模板中的代码如下：

```
{if logged_out}
{exp:member:login_form return="site/index"} 
  <label>Username:</label> 
  <input type="text" name="username" value="" maxlength="32" /> 
  <label>Password:</label> 
  <input type="password" name="password" value="" maxlength="32" /> 
  {if auto_login}
    <p><input class='checkbox' type='checkbox' name='auto_login' value='1'  /> Remember me</p>
  {/if}
  <p><input type="submit" name="submit" id="submit" value="Login" /><br />
  <a href="{path='member/forgot_password'}">Forgot your password?</a></p>
{/exp:member:login_form}
{if:else}
  <p>Logged in: {username}<br />
  <a href="{path='LOGOUT'}">Log out</a></p>
{/if} 
```

对于要检查的内容或解决此问题的任何提示，我很感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:07:23.720

这可能是查看带有/不带有 www 前缀的站点之间的区别。

例如：www.mysite.com = 已注销 [http://mysite.com](http://mysite.com) = 已登录

在一般首选项中检查网站 url。

# jquery - 活动项目：使用 jQuery 将类添加到锚点

> ID：10784805
> 
> 赞同：0
> 
> 时间：2012-05-28T12:37:49.387
> 
> 标签：jquery, navigation

我的网站有一个由锚点组成的固定导航。我希望文本在单击时更改颜色以直观地表示活动状态，因此必须动态地将类添加到链接标记。

我想我需要一些 jQuery！问题：我仍在学习，不知道如何实现这一目标......

这是我的 HTML：

```
 <nav>
        <ul>
            <li class="menu_border"><a href="#accueil">ACCUEIL</a></li>
            <li class="menu_border"><a href="#projets">PROJETS</a></li>
            <li class="menu_border"><a href="#services">SERVICES</a>/li>
            <li class="menu_border><a href="#contact">CONTACT</a></li>
        </ul>
    </nav> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:39:57.860

您可以使用诸如...

```
$("nav ul").on("click", ".menu-border", function() {
    $(this).addClass("active").siblings().removeClass("active");
}); 
```

然后`active`在你的 CSS 中定义类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:18:16.637

```
$("nav a").bind("click", function() {
$("nav a.active").removeClass("active");
$(this).addClass("active"). 

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T03:24:47.660

将此添加到您的 smooth-scroll.js 文件（或您正在使用的任何文件）中，或者您可以在当前页面中打开一个脚本：

```
//current highlight
$('nav ul li a').click(function() {
    $('nav ul li a').removeClass("current");
    $(this).addClass('current');
}); 
```

然后将其添加到您的 CSS 中：

```
.current 
{
    color: #ff6600 !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T07:19:52.393

这是对亚历克斯的修复，他有一个语法错误。

```
 $("nav ul").click( function() {
        $(this).addClass("active").siblings().removeClass("active");
    }); 
```

# facebook - Facebook 聊天 API - 是否可以与 2 个未知用户聊天？

> ID：10784807
> 
> 赞同：0
> 
> 时间：2012-05-28T12:37:55.163
> 
> 标签：facebook, api, facebook-graph-api, chat, facebook-chat

我在想：

1.  是否可以通过 API 与不在我们好友列表中的好友聊天？

2.  2 未知用户可以使用 Facebook 聊天 API 进行交流吗？无论如何有可能（使用PHP或JS？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:30:43.487

不，唯一的方法是使用[发送对话框](https://developers.facebook.com/docs/reference/dialogs/send/)`&to=`，您可以在参数中指定非朋友的 UID 。没有公开的 API 方法可用于向非朋友发送消息。

# xcode - Xcode Instruments：分析的热点与源代码不匹配

> ID：10784809
> 
> 赞同：3
> 
> 时间：2012-05-28T12:37:58.560
> 
> 标签：xcode, xcode-instruments

使用 Instruments 时间分析器时，我经常得到没有意义的结果。它们表明时间花费在文件的某些部分上，这些部分要么在被检查的函数之外，要么不包含可执行代码（注释、空行等）。这使得结果往往接近于无用。

我尝试了很多方法来解决这个问题：

*   在重新编译和重新分析之前关闭仪器
*   清理构建，重新编译
*   每次我配置文件时重新启动仪器
*   更新到 Xcode 4.3.2

这些有时会有所帮助，但并不总是能防止问题发生。

我能做些什么来解决这个问题？

![问题示例](../Images/8c60d37a7ec6a7c1478407a6a580cbd8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:44:03.993

我在使用 gcc 编译并设置了 -O3 优化标志的代码上遇到了同样的问题。谷歌搜索，我了解到 Apple 的时间分析器不喜欢使用优化标志编译的 gcc 代码。

在没有 -O3 标志的情况下重新编译我的代码并重新运行时间分析器，热点现在与我的源代码的正确行匹配。也许这与您的问题有关。

# android - 我创建了一个新的 android 项目，它在 gen 文件夹中有 buildconfig.java

> ID：10784816
> 
> 赞同：3
> 
> 时间：2012-05-28T12:38:21.127
> 
> 标签：android

我已经尝试清理它，重新安装它。但是，一切都是徒劳的，R.java 文件没有创建我在另一台计算机上使用相同的配置，它工作得很好，所以我不知道问题出在哪里。BuildConfig.java 没有消失，R.java 没有出现......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:59:26.890

try to delete `BuildConfig.java` and `R.java` and re build

# javascript - 在 javascript 中找出 css 选择器的特殊性

> ID：10784817
> 
> 赞同：1
> 
> 时间：2012-05-28T12:38:23.040
> 
> 标签：javascript, jquery, css, css-specificity

> **可能重复：**
> [根据特定性对一组 CSS 选择器进行排序](https://stackoverflow.com/questions/5158631/sorting-a-set-of-css-selectors-on-the-basis-of-specificity)

有谁知道在 javascript 中找出 css 选择器的特殊性的方法？是否有一些库甚至浏览器支持？我希望 jquery 能提供一些东西，但就我查看源/文档而言，我没有找到任何东西。

自己写一个并不难，但我更喜欢经过验证的解决方案。css 选择器解析器也很有用。

我需要它来对一组通过特异性匹配相同元素的规则进行排序。

[http://www.w3.org/TR/selectors/#specificity](http://www.w3.org/TR/selectors/#specificity)中的特异性

# c# - 使用实体框架从关联中获取 ID

> ID：10784818
> 
> 赞同：3
> 
> 时间：2012-05-28T12:38:34.083
> 
> 标签：c#, linq, entity-framework, associations

我有这个小应用程序，我正在构建它作为学习实体框架基础知识的练习。它使用带有 3 个表的 MySQL 数据库：Courses、Students 和 Students_has_Courses： ![数据库架构](../Images/d4c3f8c30f957a648c7579d26b2c732b.png)

我使用这个数据库在 Visual Studio 中创建了一个实体模型： ![VS 架构](../Images/94683eb45b3fe57baeb78406c980bf24.png)

它工作正常。我可以用我的 datagridview 绑定一个表，修改数据并按下一个按钮来保存更改。但正如您所见，Students_has_Courses 是一个关联（这对我来说很新）。现在我的问题是：我需要指定学生 ID 的每个课程 ID（以了解学生正在学习哪些课程）。我认为这个 LINQ 查询会很好：

```
var query = from s in school.Students.AsEnumerable()
            where s.ID == selectedStudentId
            select s.Courses; 
```

但我似乎无法从这个 EntityCollection 中提取课程 ID？我用过，`foreach(var course in query)`但我真的被困在这里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T12:58:33.267

您应该能够使用以下方法获取课程 ID：

```
var studentsCourseIDs = (from s in school.Students
                         where s.ID == selectedStudentId
                         select s.Courses.Select(c => c.ID))
                        .Single(); 
```

或者，您可以从`Courses`集合开始：

```
var studentsCourseIDs = (from c in school.Courses
                         where c.Students.Any(s => s.ID == selectedStudentId)
                         select c.ID)
                        .ToList(); 
```

不要在您的示例中使用，因为它会在子句和应用选择`AsEnumerable()`之前将整个学生表加载到内存中。`where`

# android - 在listview android中更改所选项目的字体大小

> ID：10784824
> 
> 赞同：3
> 
> 时间：2012-05-28T12:39:00.027
> 
> 标签：android, listview, android-listview, listadapter

在我的列表视图充气机中，我有一个图像和一个文本视图。当用户选择列表视图中的任何项目时，我想增加文本视图中文本的字体大小。我正在使用自定义适配器。我可以在 getview 方法中执行此操作吗？而且是否可以在不调用 notifydatasetchanged() 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:42:36.230

您可以使用`setTag()`和`getTag()`。

适配器的 getView() 中的 setTag()

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    convertView=  getLayoutInflater().inflate(R.layout.layoutfile, null);
    TextView mTextViewNumber= (TextView) convertView.findViewById(R.id.TvId);
    ImageView mImageView= (ImageView) convertView.findViewById(R.id.ImgId)
    mTextViewNumber.setText("Hi hello");
    mImageView.setBackgroundResource(R.x.xxxx);
    convertView.setTag(mTextViewNumber, R.id.TvId);
    convertView.setTag(mImageView, R.id.ImgId);
    return convertView;
} 
```

通过 getTag() OnItemClickListener() 更改 Textsize。

```
mListView=(ListView) findViewById(R.id.list_call_log_listview);
mListView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                    long arg3) {
        TextView mTextView= (TextView) view.getTag(R.id.TvId);
        mTextView.setTextSize(20);
        ImageView mImageView= (ImageView) view.getTag(R.id.ImgId);
        mImageView.setBackgroundResource(R.x.xxxx);
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:51:53.973

我认为您可以在 onItemClick 方法中使用它，这是相当简单的解决方案

```
View v=myListView.getChildAt(position);
TextView tv=(TextView)v.findViewById(R.id.myTextView);
tv.setTextSize(...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:41:53.233

在 getView 功能的适配器中，您可以检查当前项目是否已选中，然后可以更改字体和颜色，如果这是真的...

或者可以使用选择器

[如何更改选定/聚焦的 ListView 项目中的字体颜色？](https://stackoverflow.com/questions/3917288/how-to-change-font-color-in-selected-focused-listview-items)

# c# - 从另一个 C# 填充一个 Treeview

> ID：10784825
> 
> 赞同：1
> 
> 时间：2012-05-28T12:39:04.573
> 
> 标签：c#, treeview, clone, tree-nodes

我希望能够获取从目录创建的树视图，并且当用户选中节点旁边的复选框时，我希望该节点使用相同的目录结构出现在第二棵树中

```
root
 a
 b
  b1
  b2
 c 
```

如果选择 b1，则第二个树视图将显示

```
root 
 b
  b1 
```

我知道有一个克隆方法，但是如果检查了多个，我似乎无法使其正常工作，因为除了使用 mouseclick 参数之外，我不知道如何获取已检查节点的位置。而且由于我有一个递归后检查功能，它将检查父节点下的所有节点，我不知道如何跟踪检查了哪些节点。我有一个函数可以告诉我根据它们的名称（而不是位置）检查哪些节点，这样我就可以将名称与“检查列表”进行比较。

# c# - 为什么 ExecuteNonQuery() 返回 -1 没有任何异常并且没有在数据库中插入条目？

> ID：10784830
> 
> 赞同：0
> 
> 时间：2012-05-28T12:39:35.290
> 
> 标签：c#, sql-server, visual-studio-2010, exception, executenonquery

我有以下功能：

```
public Exception createTopic(Topic t)
{
    query = "insert into [DisData].[dbo].[discussions]([title],[description],[usrid],[dateadded],[desid],[likes],[shares],[visit],[replyto],[sno]) values(@title,@des,@uid,@dateadded,@did,@like,@share,@visit,@replyto,@sno)";
    try
    {
        com = new SqlCommand(query, con);
        com.Parameters.AddWithValue("@title", t.getTitle());
        com.Parameters.AddWithValue("@des", t.getDescription());
        com.Parameters.AddWithValue("@uid", t.getUsrID());
        com.Parameters.AddWithValue("@dateadded", t.getDate());
        com.Parameters.AddWithValue("@did", t.getDesID());
        com.Parameters.AddWithValue("@like", 0);
        com.Parameters.AddWithValue("@share", 0);
        com.Parameters.AddWithValue("@visit", 0);
        com.Parameters.AddWithValue("@replyto", t.getReplyToID());
        com.Parameters.AddWithValue("@sno", getDisCount() + 1);
        con.Open();
        com.ExecuteNonQuery();
        con.Close();
        res.Redirect("viewthread.aspx?id=" + t.getDesID());
        return null;
    }
    catch (Exception e)
    {
        con.Close(); return e;
    }
} 
```

连接字符串在包含类的构造函数中定义。问题是，每当我尝试执行此函数时，它都会执行而不会出现任何异常，即使在 Visual Studio 调试器控制台上也不例外，并且也不会使用用户提供的新条目来更新数据库。当我检查 ExecuteNonQuery() 的返回值时，它返回-1。对我来说，代码似乎没问题，或者我可能遗漏了一些东西。请帮我识别它。

我还尝试通过删除所有 AddWithValue() 语句并将查询预定义为来执行查询

> 插入 [DisData].[dbo].discussions values('Test','TestDes','TestUID','12-12-2012','sdsd',1,1,1,'sdsd',2)

但是问题还是一样...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:17:16.637

对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

更详细的阅读链接[MSDN Link](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:04:43.740

如果您在代码中的某处启动了事务，则应使用 Transaction.Commit() 方法提交它。我也可以看到，您正在使用包含数据库名称的数据库表的长名称，应避免使用。检查数据是否正在插入 DisData 数据库，并且您正在另一个数据库中搜索...:)

# jquery - 文本区域元素的内容更改有哪些事件？

> ID：10784838
> 
> 赞同：0
> 
> 时间：2012-05-28T12:40:04.380
> 
> 标签：jquery, html

我有一个简单的文本区域元素，它最初是空的或由一些文本填充：

```
<textarea cols="60" rows="10" id="textareaEdit" >some text</textarea> 
```

我想知道要使用什么事件，所以每当用户更改 textarea 元素的文本内容（如复制/粘贴、删除、插入、更新等）时，都会触发相应的事件处理程序？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:44:25.607

`This event is limited to <input> elements, <textarea> boxes and <select> elements.`如[http://api.jquery.com/change/中所述](http://api.jquery.com/change/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:49:00.320

```
$('body').on('copy paste cut change', 'textarea', function (e) {
    //do something
}); 
```

# c# - 如何检查 SqlDataSource.SelectCommand 是否返回 null

> ID：10784842
> 
> 赞同：-2
> 
> 时间：2012-05-28T12:40:25.190
> 
> 标签：c#, asp.net

我有一个gridview 和sqldatasource。

```
I'm using : SqlDatasource1.SelectCommand = "Select Name from Table Where RowID=@RowID"; 
```

如何检查 selectedcommand 是否返回 null （未找到值）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:52:19.400

你可以使用：

```
DataSet ds = new DataSet();
sqlAdapter.Fill(ds);

if (ds.Tables[0].Rows.Count == 0)
{
     pnlQueryResults.Visible = true;
}
else
{
     pnlQueryResults.Visible = false;
}

gridView.DataSource = ds; 
```

标记：

```
<asp:Panel ID="pnlQueryResults" runat="server" Visible="false">
     <div>
         <p>Your query returned no results.</p>
     </div>
</asp:Panel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:52:10.863

同样，我们可以做更多的细节！但也许您遇到了在 ADO.NET 中返回的令人困惑的[DBNull](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)值，我们（程序员）往往期望普通的 old `null`.

如果是这种情况，您只需要使用以下内容：

```
if(result is DBNull)
{
    // Null returned
}
else
{
    // Not null.
} 
```

# android - LoaderManager 的 restartLoader 方法中的 NullPointerException

> ID：10784846
> 
> 赞同：6
> 
> 时间：2012-05-28T12:40:42.937
> 
> 标签：android, nullpointerexception, android-cursor, android-loadermanager

我的片段中有以下自己的接口实现：

```
@Override
    public void onReportChanged(Fragment sender, long id, int position) {
        // Views ein und ausblenden
        _List.setVisibility(View.GONE);
        _OnLoading.setVisibility(View.VISIBLE);
        _NoDataView.setVisibility(View.GONE);
        _ReportId = id;
        getLoaderManager().restartLoader(_LM_REPORTS, null, this);
    }; 
```

FragmentActivity 向这个 Fragment 报告，另一个 Fragment（选择列表）已经选择了一个项目。之后，ListFragment 应加载具有报告 ID (_ReportId) 的新数据。

但我`NullPoinerException`在去 onCreateLoader-Method 之前得到了这段代码。这是LogCat：

```
05-28 14:24:37.905: E/AndroidRuntime(1775): FATAL EXCEPTION: main
05-28 14:24:37.905: E/AndroidRuntime(1775): java.lang.NullPointerException
05-28 14:24:37.905: E/AndroidRuntime(1775):     at android.support.v4.app.LoaderManagerImpl.restartLoader(LoaderManager.java:637)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at de.webducer.android.worktime.beta.ui.fragment.ReportListFragment.onReportChanged(ReportListFra gment.java:142)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at de.webducer.android.worktime.beta.ui.ReportListActivity.onReportSelected(ReportListActivity.java:97)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at de.webducer.android.worktime.beta.ui.fragment.ReportSelectorSpinnerFragment$1.onItemSelected(ReportSelectorSpinnerFragment.java:78)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at android.widget.AdapterView.fireOnSelected(AdapterView.java:882)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at android.widget.AdapterView.access$200(AdapterView.java:48)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:848)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at android.os.Handler.handleCallback(Handler.java:605)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at android.os.Looper.loop(Looper.java:137)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at java.lang.reflect.Method.invokeNative(Native Method)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at java.lang.reflect.Method.invoke(Method.java:511)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-28 14:24:37.905: E/AndroidRuntime(1775):     at dalvik.system.NativeStart.main(Native Method) 
```

我不明白为什么。相同的代码（但对于另一个列表）在另一个 FragmentActivity 上工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T11:40:18.193

我找到了原因：

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle extra) {
    CursorLoader returnValue = null;
    if (_ReportId > 0) {
        switch (id) {
            case _LM_REPORTS:
                returnValue = new CursorLoader(getActivity(),
                    ReportContentProvider.CONTENT_URI_REPORT_DATA,
                    null,
                    ReportTable.COLUMN_ID + " =?",
                    new String[] { String.valueOf(_ReportId) },
                    null);
                    break;

                default:
                    break;
            }
        }
    return returnValue;
} 
```

Loader 必须一直运行。该条件`if (_ReportId > 1)`产生了异常。没有条件，代码运行良好。

# php - 如何在 PHP 中垂直回显文本行？

> ID：10784853
> 
> 赞同：14
> 
> 时间：2012-05-28T12:41:19.567
> 
> 标签：php, text

我在某个地方遇到了这个问题，我想知道如何使用 PHP 解决这个问题。鉴于此文本：

```
$str = '
PHP is a
widely-used

general-purpose
server side

scripting
language
'; 
```

如何垂直回显文本，如下所示：

```
 g        
      e        
      n        
      e        
  w   r s      
  i   a e      
  d   l r   s  
P e   - v   c l
H l   p e   r a
P y   u r   i n
  -   r     p g
i u   p s   t u
s s   o i   i a
  e   s d   n g
a d   e e   g e 
```

我会选择更简单更优雅的代码作为答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T22:21:12.863

正如其他人已经证明的那样，`array_map`能够进行翻转，这基本上是您需要解决的主要问题。剩下的就是你如何安排代码了。我认为您的版本非常好，因为它很容易理解。

如果您正在寻找其他极端，请小心处理：

```
$str = 'PHP is a
widely-used

general-purpose
server side

scripting
language';

$eol = "\n";
$turned = function($str) use ($eol) {
    $length = max(
        array_map(
            'strlen',
            $lines = explode($eol, trim($str))
        )
    );
    $each = function($a, $s) use ($length) {
        $a[] = str_split(
            sprintf("%' {$length}s", $s)
        );
        return $a;
    };
    return implode(
        $eol,
        array_map(
            function($v) {
                return implode(' ', $v);
            },
            call_user_func_array(
                'array_map',
                array_reduce($lines, $each, array(NULL))
            )
        )
    );
};
echo $turned($str), $eol; 
```

给你：

```
 g        
      e        
      n        
      e        
  w   r s      
  i   a e      
  d   l r   s  
P e   - v   c l
H l   p e   r a
P y   u r   i n
  -   r     p g
i u   p s   t u
s s   o i   i a
  e   s d   n g
a d   e e   g e 
```

这修复了另一个答案的输出，这是不正确的（现已修复）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T12:41:19.740

下面的代码将`$str`垂直打印。

```
$lines = preg_split("/\r\n/", trim($str));
$nl    = count($lines);
$len   = max(array_map('strlen', $lines));

foreach ($lines as $k => $line) {
  $lines[$k] = str_pad($line, $len, ' ', STR_PAD_LEFT);
}

for ($i = 0; $i < $len; $i++) {
  for ($j = 0; $j < $nl; $j++) {
    echo $lines[$j][$i].($j == $nl-1 ? "\n" : " ");
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T03:07:37.033

我从@bsdnoobz 获取了一些代码并对其进行了简化。我使用 \n 作为换行符，因为我在 Mac 上工作，而 \r\n doean 在这里工作。

```
$lines = preg_split("/\n/", trim($str));
$len   = max(array_map('strlen', $lines));
$rows  = array_fill(0,$len,'');
foreach ($lines as $k => $line) {
    foreach (str_split(str_pad($line, $len, ' ', STR_PAD_LEFT)) as $row => $char){
          $rows[$row] .= $char;
    }
}
echo implode("\n",$rows)."\n"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T22:28:22.337

```
$a = explode(PHP_EOL, trim($str));
$h = max(array_map('strlen', $a));
$w = count($a);
$m = array_map('str_split', array_map('sprintf', array_fill(0, $w, "%{$h}s"), $a));
$t = call_user_func_array('array_map', array_merge(array(null), $m));
echo implode(PHP_EOL, array_map('implode', array_fill(0, $h, ' '), $t)), PHP_EOL; 
```

PHP_EOL 应在适当的地方替换为“\n”、“\r\n”或“<br/>”。第一行之后的整个代码很容易变成一个大表达式，只是它的可读性会受到一点影响;-)

`$a`是行数组，`$h`是最终高度，`$w`是最终宽度，`$m`是字符矩阵（填充字符串后），`$t`是转置矩阵。

`array_fill(0, $h, ' '),`如果不需要列之间的空间，则可以简单地省略最后一行的。另一方面，不打印尾随空格字符可以这样实现：

```
echo implode(PHP_EOL, array_map('rtrim', array_map('implode', array_fill(0, $h, ' '), $t))), PHP_EOL; 
```

我把这个问题当作避免显式循环的练习（这通常比 PHP 函数中的循环更昂贵，尽管在这种情况下可能会失去优势）。这里的重要技巧是矩阵转置，我从[Codler 的这个答案中得到](https://stackoverflow.com/questions/797251/transposing-multidimensional-arrays-in-php/3423692#3423692)

总之，整个算法`O(width × height)`的复杂度是`O(width² × height)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T18:59:57.647

我试一试：

```
$arrlines = explode(PHP_EOL, trim($str));
$max = max(array_map('strlen', $arrlines));
foreach($arrlines as $val)
    $arrlines = str_pad($val,$max," ",STR_PAD_LEFT);    
for($x=0;$x<$max;$x++){
    for($y=0;$y<count($arrlines);$y++)
        $string .= strlen(trim($arrlines[$y][$x])) > 0 ? $arrlines[$y][$x]."&nbsp;":"&nbsp;&nbsp;";
    $string .= "\n";
    }
echo '<pre>'.$string.'</pre>'; 
```

行号：

1.  将每行的字符串保存在由 PHP 常量 PHP_EOL 分隔的数组 $arrlines 中
2.  获取最大字符串长度并将其保存到 $max
3.  循环 $arrlines 的每个元素，然后
4.  在字符串左侧添加填充以使其字符串长度等于 $max

对于第 5-9 行，嵌套循环将 $arrline[$y][$x] 保存到 $string，第 10 行输出结果。

结果可以在[这里](http://macinville.com/test.php)找到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T10:11:45.303

我在没有任何语言构造循环的情况下旋转文本的功能：

```
/**
 * Rotates text
 *
 * @param string $str String to rotate
 *
 * @return string Rotated string
 */
function rotateText($str)
{
    $lines     = explode(PHP_EOL, $str);
    $lengths   = array_map('strlen', $lines);
    $maxLength = max($lengths);
    $lines     = array_map(function ($line) use ($maxLength) {
        return str_pad($line, $maxLength, ' ', STR_PAD_LEFT);
    }, $lines);
    $chars     = array_map('str_split', $lines);
    array_unshift($chars, null);
    $rotatedLines = call_user_func_array('array_map', $chars);
    $rotatedText  = join(PHP_EOL, array_map('join', $rotatedLines));
    return $rotatedText;
}

echo "<pre>", rotateText($str), "</pre>"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T18:08:31.183

请注意，字符串的长度和数组中的元素数由 PHP 每个变量缓存。重复调用 strlen 或 count 只会导致空函数调用的性能损失（在后续调用中，长度或 count 不会在 PHP 内部测量两次）。

这适用于 Mac (\r)、Linux (\n) 或 Windows (\r\n) 输入字符串，和/或空输入字符串，和/或单行输入字符串，并输出首选行分隔符（默认为 PHP_EOL）：

```
function matrix_vertical_align_bottom($str, $strEOL=PHP_EOL)
{
    $arrLines=explode("\n", $str);

    $nMaxLength=max(array_map("strlen", $arrLines));
    $nRotatedWidth=count($arrLines)+strlen($strEOL);

    //allocate once
    $strRotated=str_pad(
        "", 
        $nRotatedWidth*$nMaxLength-strlen($strEOL), 
        str_repeat(" ", count($arrLines)).$strEOL
    );

    foreach($arrLines as $nRotatedColumnIndex=>$strLine)
    {
        $nRotatedVerticalPadding=$nMaxLength-strlen($strLine);
        for($nColumnIndex=strlen($strLine)-1; $nColumnIndex>=0; $nColumnIndex--)
            $strRotated[$nRotatedWidth*($nColumnIndex+$nRotatedVerticalPadding)+$nRotatedColumnIndex]=$strLine[$nColumnIndex];
    }

    return $strRotated;
}

echo matrix_vertical_align_bottom(preg_replace("/(\r\n|\r|\n)/", "\n", trim($str))); 
```

性能相当不错，上述算法只是在将字符串旋转 90 度时平移坐标。由于填充单个行引发了字符串扩展，因此没有内存重新分配（对于具有很多行的输入字符串，这将影响性能）。

不假定 HTML 输出，输出时 nl2br(htmlspecialchars( )) 应该可以解决问题 + 单间距字体。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-04T04:41:50.373

这是任何人都可以理解的简单代码

```
 $str = '
    PHP is a
    widely-used

    general-purpose
    server side

    scripting
    language
    ';

    $lines = array();

    $sentences = explode("\n\n",$str);
    foreach($sentences as $sentence){
        if($sentence != ""){
            $each_lines = explode("\n",$sentence);
            foreach($each_lines as $each_line){
                if($each_line != ""){
                    $lines[] = $each_line;
                }
            }
            $lines[] = "\t";
        }
    }
    $before_sort = $lines;
    usort($lines, "cmp_len");
    $big_length = strlen($lines[0]);
    foreach($before_sort as $key=>$arr){
        $this_length = strlen($arr);
        if($this_length < $big_length){
            $no_of_letters = $big_length - $this_length;
            $text = "";
            for($i=0;$i<$no_of_letters;$i++){
                $text .= " ";
            }
            $text .= $before_sort[$key];
            $before_sort[$key] = $text;
        }
    }

    $temp = array();
    echo "<table>";
    for($i=0;$i<$big_length;$i++){
      echo "<tr>";
        foreach($before_sort as $arr){
            echo "<td>";
                echo str_replace("\t","&nbsp;&nbsp;&nbsp;&nbsp;",$arr[$i]);
            echo "</td>";
        }
      echo "</tr>";
    }
    echo "</table>";

    function cmp_len($a, $b){
       return (strlen($a)  < strlen($b));
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-04T08:18:35.833

检查这个答案：

```
<?php

$str = 'PHP is a
widely-used

general-purpose
server side

scripting
language';

function getVerticalString($str){
    $str = preg_split('/\r|\n/',$str);

    $maxlength = 0;

    $totalstr = count($str);

    for($i=0;$i<$totalstr;$i++){
        if($maxlength<strlen($str[$i])){
            $maxlength = strlen($str[$i]);
        }
    }

    $strings = array();

    for($i=0;$i<$maxlength;$i++){
        $strings[$i] = "";
        for($j=0;$j<$totalstr;$j++){
            $temp = strlen($str[$j])-($maxlength-$i);
            if($temp>=0){
                $strings[$i] .= substr($str[$j],$temp,1);
            }
            else{
                $strings[$i] .= " ";
            }
        }
    }

    return implode("\r",$strings);
}

echo "<pre>".getVerticalString($str)."</pre>"; 
```

这输出：

```
 g    
   e    
   n    
   e    
 w rs   
 i ae   
 d lr s 
Pe -v cl
Hl pe ra
Py ur in
 - r  pg
iu ps tu
ss oi ia
 e sd ng
ad ee ge 
```

根据您的要求。:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-04T09:06:05.963

我真的不会说它更短，但行数更少;-)

```
$nr_lines = count($lines = preg_split('/\r?\n/', trim($str)));
$maxlen = max($lengths = array_map('strlen', $lines)); // get line lengthts and maximum
$line_ptrs = array_fill(0, $nr_lines, 0); // last character position per line

for ($j = 0; $j != $maxlen; ++$j) {
    for ($i = 0; $i != $nr_lines; ++$i) {
        // $maxlen - $lengths[$i] indicates where printing start for this line
        echo $j >= $maxlen - $lengths[$i] ? $lines[$i][$line_ptrs[$i]++] : ' ';
    }
    echo "\n";
} 
```

它在同一个内部循环中进行填充和打印，由`$line_ptrs`and`$lengths`数组辅助以跟踪下一个要打印的字符。

**基准**

基于 10,000 次迭代，此代码的性能比第一个答案好 19%。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-14T03:18:16.770

就像那句老话：

> ~~如果可以在没有正则表达式的情况下完成，请尝试一下。~~
> 
> ~~有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们的问题为零。~~
> 
> “我走的是人迹罕至的[路]”——罗伯特·弗罗斯特

在这个页面上有这么多类似的技术，我想我会提供一个全新的视角。这是一种在循环中使用输入字符串并将每行的最后一个字符（如果存在）作为空格分隔的字符串添加到输出数组的技术。当整个输入字符串由空白字符组成时，循环就会中断。我没有对其进行基准测试，但如果有人愿意提供他们的发现，我很想听听任何比较。

代码：（[演示](https://3v4l.org/Dlasc)）

```
$result = [];
while (!ctype_space($string)) {
    $line = [];
    $string = preg_replace_callback(
        "~.$|^$~m",
        function($m) use(&$line) {
            $line[] = $m[0] === '' ? ' ' : $m[0];
            return '';
        },
        $string,
    );
    array_unshift($result, implode(' ', $line));
}
echo implode("\n", $result); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-05-31T06:53:24.627

这是我的镜头。如果没有嵌套循环，无法弄清楚如何做到这一点。

```
$lines = array_map('strrev', explode("\r\n", trim($str)));
$new = array();
foreach(range(0, max(array_map('strlen', $lines))) as $i){ 
    foreach($lines as $line){
        $new[$i] .= (!empty($line[$i]) ? $line[$i] . ' ' : '  ');
    }
}
echo implode("\r\n", (array_slice(array_reverse($new), 1))); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-06-04T13:11:55.513

试试这个，

```
$str = 'PHP is a
widely-used

general-purpose
server side

scripting
language';

$strArr = explode("\r\n", $str);
$max =max(array_map('strlen', $strArr));

for($i=0; $i< $max;$i++)
{
    for($x=0;$x < count($strArr); $x++)
    {
        $strVal = $strArr[$x];
        $y = $i -($max -  strlen($strVal));
        $vertical .= strlen(trim($strVal[$y]))<> 0 ? $strVal[$y]." " : "  ";
    } 
    $vertical .="\n";
}
echo "<pre>".$vertical; 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2012-06-05T13:30:08.293

最好和最简单的方法:)

```
<style type="text/css">
#heading{
    /* vertical text css */
    width:1em;
    text-transform:uppercase;
}
</style>

<h1 align="center" id="heading">h e l l o</h1> 
```

[**演示**](http://sarfraznawaz2005.kodingen.com/demos/css/vertical_text.html)

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2019-04-12T06:57:34.050

```
$a= 'HelloWorld!';
$b=strlen($a);
for($i=0;$i<$b;$i++){
echo $c=substr($a,$i,1).'<br>';  
} 
```

# lucene - 返回 Lucene 文档中某个字段的 Top-k Hits

> ID：10784855
> 
> 赞同：0
> 
> 时间：2012-05-28T12:41:28.680
> 
> 标签：lucene

我有一个由文档组成的 Lucene 索引，每个文档都有两个字段，F1 和 F2。我在 F1 上执行搜索，并为排名前 k 的文档收集 F2。我使用 IndexSearcher 接口。在我的结果中，有很多重复的 F2 值，我可以要求 top-k 超过唯一的 F2 值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:45:52.700

在哈希集中添加 F2 值，然后在重复检查（使用链接）中，在结果对象中添加字段值对...这样您的结果对象将不会有重复值...

[http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#add%28E%29](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#add%28E%29)

# actionscript-3 - 从 SharedObject 恢复自定义类对象数组

> ID：10784856
> 
> 赞同：2
> 
> 时间：2012-05-28T12:41:33.587
> 
> 标签：actionscript-3, lso

我有一个名为“widgetArray”的小部件数组（我创建的一个类），我将其保存到一个共享对象中。

```
savedGame1.data.widgetArray = widgetArray; 
```

当我去加载这些数据并使用小部件时，我遇到了问题。该数组存储得很好，但每个小部件都保存为一个对象。所以我不能简单地做：

```
widetArray = savedGame1.data.widgetArray; 
```

因为如果我尝试使用小部件：

```
widgetArray[0].someWidgetFunction(); 
```

它不起作用，因为 flash 认为它们是对象。我在加载小部件时尝试过对它们进行类型转换，但它只产生一个空对象。

```
widgetArray[i] = widgetArray[i] as Widget;//widgetArray[i] becomes null
tempWidget:Widget = widgetArray[i] as Widget;//null as well 
```

这个问题是在一个朋友的论坛中提出的，因为没有回复，我认为这是适合它的地方......其他人如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:12:12.480

~~制作两个可以保存和加载小部件的方法，保存方法应该从小部件类中获取数据并将其保存到共享对象中，加载类将从共享对象中获取数据并设置对象的属性。~~

像这样的东西：

```
public function save():Object
{
   return {
      "x":this.x,
      "y":this.y,
      "otherStuff":otherStuff
   };
}

public function load(data:Object):void
{
  this.x = data.x;
  this.y = data.y;
  this.otherStuff = data.otherStuff;
} 
```

~~您可以调用 save 方法并将结果存储在数组中，然后将其存储在共享对象中。您只需要保存重建小部件类所需的数据，而不是类的所有属性。~~

**编辑：**根据 BlueRaja 的评论更新。

正如 BlueRaja 指出的那样，IExternalizable 旨在用于此目的。

如果您有这样的课程：

```
public class MyClass implements IExternalizable
{
    private var one:int = 1;
    private var two:int = 2;

    public function MyClass() 
    {
    }

    public function writeExternal(output:IDataOutput):void
    {
        output.writeInt(one);
        output.writeInt(two);
    }

    public function readExternal(input:IDataInput):void
    {
        one = input.readInt();
        two = input.readInt();
    }

    public function print():void
    {
        trace(one);
        trace(two);         
    }
} 
```

然后你可以像这样保存它：

```
registerClassAlias("MyClass", MyClass);

var sharedObject:SharedObject = SharedObject.getLocal("so");

var myClass:MyClass = new MyClass();    
sharedObject.data['storedObject'] = myClass;    
sharedObject.flush(); 
```

然后加载它：

```
registerClassAlias("MyClass", MyClass);

var sharedObject:SharedObject = SharedObject.getLocal("so");

var loadedClass:MyClass = sharedObject.data['storedObject'] as MyClass;
loadedClass.print(); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T08:39:40.323

[http://tush.wordpress.com/2007/07/08/actionscript-3-serializing-classes-using-registerclassalias/](http://tush.wordpress.com/2007/07/08/actionscript-3-serializing-classes-using-registerclassalias/) ...这也是将自定义类对象存储在共享对象中的真正方法

# css - 使用内容更改 DIV 宽度并将其放置在中心。

> ID：10784858
> 
> 赞同：2
> 
> 时间：2012-05-28T12:41:35.627
> 
> 标签：css, html

我试图让一个 div 居中并且最小宽度为 630px。它应该根据内容的大小扩大宽度。

* * *

出于某种原因，它占用了页面的整个宽度，即使我有：

1.  居中所有内容

2.  将其中的所有 div 设置为 600px 宽度

3.  已在其中放置了测试内容，但并不那么广泛

* * *

以下是相关位：http: [//jsfiddle.net/partisanentity/7KGRr/2/](http://jsfiddle.net/partisanentity/7KGRr/2/)

问题似乎是#imageholder？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:57:01.733

您可以 display:inline-block 到您的**#content** DIV。像这样写：

```
body{
    text-align:center;
}

#content {
    clear:both;
    min-width:630px;
    padding:15px;
    display:inline-block;
    *display:inline;/*For IE7*/
    *zoom:1;
    text-align:left;
    background-color:#5b5b5b;
    margin-top:15px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
} 
```

检查这个[http://jsfiddle.net/7KGRr/3/](http://jsfiddle.net/7KGRr/3/)

# sql - 如何从 sys.tables 获取表名并将输出存储在变量中？

> ID：10784861
> 
> 赞同：1
> 
> 时间：2012-05-28T12:41:40.967
> 
> 标签：sql, stored-procedures

我编写了一个存储过程，其中使用来自不同两个表的游标收集表名和数据库名。
但是我的问题是当我运行查询以找出数据库中是否存在表时，然后显示错误。现在如何运行查询并将输出存储到变量中？

```
Declare @table_exist nvarchar(200),@val1 nvarchar(200),@return1 nvarchar(200);
  SET @table_exist= 
    'SELECT 1 FROM '+@db_name+'.sys.tables 
    where name='+@table_name+'';
  EXEC sp_executesql @table_exist,@return1 OUTPUT;  
  select @return1; 
```

错误：

```
Invalid column name 'table name' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:54:55.327

构建动态查询时应该使用[quotename ：](http://msdn.microsoft.com/en-us/library/ms176114.aspx)

```
 SET @table_exist= 
     'SELECT 1 FROM '+ quotename(@db_name)+'.sys.tables 
     where name='+quotename(@table_name)+''; 
```

当面临这样的错误时，最好的办法是`print @table_exists`看看实际构建了什么。

**我没有正确查看您的查询。您缺少撇号：**

```
 SET @table_exist= 
     'SELECT 1 FROM '+ quotename(@db_name)+'.sys.tables 
     where name=''' + @table_name +''''; 
```

**更新：**

使用输出变量时，您应该在查询中设置它：

```
 SET @table_exist= 
    'SELECT @return1 = 1 FROM ' + quotename(@db_name) + '.sys.tables 
    where name='''+@table_name+''''; 
```

为防止结果集返回客户端，请创建临时表并将结果集插入其中。在这种情况下，这将只留下一个结果集，即`select @return1`：

```
 declare @tbl table (exist bit)
  insert into @tbl
  EXEC sp_executesql @table_exist, N'@return1 nvarchar(200) out', @return1 OUT;
  select @return1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:28:03.130

最好使用`'` 和`"`正确编写查询。这在编写查询时犯的错误更少。

您代码上的错误是您对仅使用`'`. 最好`'`仅用于变量。

将您的代码编写为：

```
"SELECT 1 FROM  ' "+@db_name+" '.sys.tables 
    where name=' "+@table_name+" ' "; 
```

# java - ImageJ - 无法加载插件

> ID：10784867
> 
> 赞同：0
> 
> 时间：2012-05-28T12:41:54.903
> 
> 标签：java, imagej

我使用 PluginFilter 接口为 imageJ 创建了一系列插件。其中许多插件共享一些常见任务，我也想在 imageJ 之外实例化它们，所以我创建了一个包含构造函数的抽象 Analysis.java

```
public Analysis(ImagePlus imp){
populateDBValues(imp);
} 
```

但没有默认构造函数。其他插件扩展 Analysis。我以前在每个插件中都有重复的代码，这很好用。添加构造函数后，ImageJ 中出现错误，显示消息“无法加载插件”。

我通过源代码跟踪到这一点

```
catch (InstantiationException e) {log("Unable to load plugin (ins)");} 
```

为什么添加构造函数会导致这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:41:55.043

来自Java 中的[默认构造函数和继承](https://stackoverflow.com/questions/525548/default-constructors-and-inheritance-in-java) “Java 自动为您提供默认构造函数（一个不带参数的构造函数），它使用一些默认值（0、null 或 false）初始化类的所有实例变量（如果有的话）。如果但是，如果您编写带有一些参数的构造函数，并且您没有编写任何默认构造函数，那么 Java 就不会提供默认构造函数。”

在使用参数创建构造函数之前，ImageJ 可以在加载插件时使用默认构造函数。在使用参数创建构造函数后，默认构造函数不再存在，因此 ImageJ 无法实例化插件并因此引发错误。

向类添加默认构造函数将解决该问题。

# java - Java Swing：JTextField 没有按预期失去焦点

> ID：10784875
> 
> 赞同：2
> 
> 时间：2012-05-28T12:42:10.507
> 
> 标签：java, swing, focus, jtable, jtextfield

我有一个有 2 列的 JTable。其中一列由 JTextField 表示，另一列由单选按钮表示。

模型以这种方式填充：

```
 model.addRow(new Object[]{radioButton, ""}); 
```

与 JTextField 相关联的是一个像这样的单元格编辑器：

```
class MyCellEditor extends DefaultCellEditor {

  MyCellEditor(JTextField textField) {
    super(textField);
    textField.addFocusListener(new FocusListener() {

        public void focusLost(FocusEvent e) {
            // do something if focus is lost
        }

        @Override
        public void focusGained(FocusEvent e) {
        }
    });
} 
```

当我单击 JTextField 单元格时，我会按预期得到一个“闪烁”光标，因此我可以输入我的文本。无论如何，如果我单击主窗口中的其他任何位置，我希望已经调用了“focusLost(...)”方法但只有当我在窗口中“玩”一点时才会发生这种情况（比如几次点击进出 jtextfield）。

为什么组件在第一次单击另一个外部组件后不会失去焦点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:54:09.683

你可以`stopEditing()`在`TableCellEditor`

或者直接写

```
table.putClientProperty("terminateEditOnFocusLost", Boolean.TRUE); 
```

更复杂的（JFormattedTextField）示例

```
import java.awt.Component;
import java.awt.EventQueue;
import java.text.DecimalFormat;
import java.text.ParseException;
import javax.swing.*;
import javax.swing.table.TableCellEditor;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumnModel;

public class EditorAsRendererTableTest {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JTable table = new JTable(3, 2);
                TableColumnModel colModel = table.getColumnModel();
                MyCellEditor both = new MyCellEditor();
                colModel.getColumn(0).setCellEditor(both);
                colModel.getColumn(0).setCellRenderer(both);
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.getContentPane().add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    private static class MyCellEditor extends AbstractCellEditor implements TableCellEditor, TableCellRenderer {

        private static final long serialVersionUID = 1L;
        private JFormattedTextField renderer = new JFormattedTextField(DecimalFormat.getInstance());
        private JFormattedTextField editor;

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            renderer.setValue(value);
            return renderer;
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            editor = new JFormattedTextField(DecimalFormat.getInstance());
            editor.setValue(value);
            return editor;
        }

        @Override
        public boolean stopCellEditing() {
            try {
                editor.commitEdit();
            } catch (ParseException e) {
                return false;
            }
            return super.stopCellEditing();
        }

        @Override
        public Object getCellEditorValue() {
            return editor.getValue();
        }
    }

    private EditorAsRendererTableTest() {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:51:30.527

我这样固定：

1) 将焦点放在新的 JTextField 上：

```
 if (editCellAt(getRowCount()-1, 1)) getEditorComponent().requestFocus(); 
```

2）表自动检测失去焦点：

```
 table.putClientProperty("terminateEditOnFocusLost", Boolean.TRUE); 
```

3）在“MyCellEditor class --> @Override public boolean stopCellEditing()”中检查组件是否有焦点：

```
 getComponent().isFocusOwner() 
```

# java - 如何在 JTable 中添加 JLabel？

> ID：10784879
> 
> 赞同：1
> 
> 时间：2012-05-28T12:42:27.550
> 
> 标签：java, swing, jtable

所以我想在我的 JTable 中添加一个带有背景颜色的空 JLabel。这是一个饼图，我想添加它以便图例匹配。

代码：

```
for (String result : queryResult) {

            JLabel label = new JLabel("Hallo: "+rowCount);
            label.setBackground(colors[rowCount]);
            label.setOpaque(true);

            String queryResultString = "";
            queryResultString = result.toString();
            String[] lineArray = queryResultString.split("////");

            String[] pieData = new String[3];

            pieData[0] = lineArray[0];
            pieData[1] = lineArray[rangId - 1];

            int value = Integer.parseInt(pieData[1]);
            double percentage = value / total * 100;

            pieData[2] = "" + percentage + "%";

            pieModel.addRow(new Object[] {label, pieData[0], pieData[1], pieData[2]});

            rowCount++;
        }

        pieTable.setDefaultRenderer(String.class, new DefaultTableCellRenderer() {

            @Override
            public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column){

                if(value instanceof JLabel){
                    //This time return only the JLabel without icon
                    return (JLabel)value;
                }else{
                    return super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
                }
            }
        }); 
```

我究竟做错了什么？:o

当我查看表格第一列的结果时，它说：

javax.swing.JLabel[,0,0,0...... 看不到其余部分，但它肯定不能正常工作！:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T12:49:08.533

> 所以我想在我的 JTable 中添加一个带有背景颜色的空 JLabel。这是一个饼图，我想添加它以便图例匹配。

默认情况下你不能这样做[Renderer](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)`Component`，`JComponent`或者`JLabel`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T12:48:10.663

JTable 中的每个单元格都已经是一个 JLabel。您需要自定义 getTableCellRendererComponent 以返回具有适当背景颜色设置的 super.getTableCellRendererComponent 以达到您想要的效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T13:14:35.407

`DefaultTableCellRenderer`继承自`JLabel`（继承自`JComponent`）。因此，您可以在`getTableCellRendererComponent`.

[例如](http://www.jguru.com/faq/view.jsp?EID=703279)：

```
ImageIcon icon = new ImageIcon(getClass().getResource("images/moon.gif"));// prepared before

public Component getTableCellRendererComponent(JTable table, Object value,
                                             boolean isSelected, boolean hasFocus, 
                                             int row, int column) {     
    setText((String)value);
    setIcon(icon);
    return this;
} 
```

`setText`来自超级 JLabel 类和`setIcon`超级 JComponent 类。

几乎所有`DefaultTableCellRenderer`方法都会覆盖这些类中的方法。

# actionscript-3 - 没有编译器错误和空白测试场景

> ID：10784883
> 
> 赞同：0
> 
> 时间：2012-05-28T12:42:41.650
> 
> 标签：actionscript-3

我制作了一个名为 airRaid 的 flash 文件和 2 个类。它们在同一个文件夹中。如果我测试场景，即使我写了完全错误的代码，我也不会出错。

该代码用于播放movieClip。我正确地链接了它。

所以我有airRaid闪存文件。

VoertuigRaid 类。如果我删除了一半的代码，并且没有给出任何错误，我唯一看到的是一个空白测试场景。

```
package  
{
    import flash.display.*;

    public class VoertuigRaid extends MovieClip
    {

        public function VoertuigRaid()
            {
                var a:Voertuig = new Voertuig("left", 50, 200);
                addChild(a);
            }
    }
} 
```

还有一个 Voertuig 课程：

```
package
{
    import flash.display.*;
    import flash.events.*;
    import flash.utils.getTimer;

    public class Voertuig extends MovieClip 
            {
                private var dx:Number;          //Snelheid en richting
                private var lastTime:int;       //Animatie tijd

        public function Voertuig(side:String, speed:Number, altitude:Number)
            {
                if (side == "left")
                    {
                        this.x = -50;       //Start aan de linkerkant
                        dx = speed          //Vlieg naar rechts
                        this.scaleX = -1;   //omdraaien
                    }
                else if (side == "right")
                    {
                        this.x = 50;        //Start aan de linkerkant
                        dx = -speed;        //Vlieg naar links
                        this.scaleX = 1;    //Niet omdraaien
                    }
                this.y = altitude           //Verticale positie van het voertuig

                //Kies een willekeurig vliegtuig
                this.gotoAndStop(Math.floor(Math.random()*5+1));

                //Animatie voorbereiden
                addEventListener(Event.ENTER_FRAME,moveVoertuig);
                lastTime = getTimer();
            }

        public function moveVoertuig(event:Event)
            {
                //Tijd moet passeren
                var timePassed:int = getTimer() -lastTime;
                lastTime += timePassed/1000;

                //Beweeg voertuig
                this.x += dx*timePassed/1000;

                //check to see it off screen
                if ((dx < 0) && (x < -50))
                    {
                        deleteVoertuig();
                    }
                else if ((dx > 0) && (x > 700))
                    {
                        deleteVoertuig();
                    }
            }
        public function deleteVoertuig()
            {
                removeEventListener(Event.ENTER_FRAME,moveVoertuig);
                MovieClip(parent).removeVoertuig(this);
                parent.removeChild(this);
            }
        public function voertuigHit()
            {
                removeEventListener(Event.ENTER_FRAME,moveVoertuig);
                MovieClip(parent).removeVoertuig(this);
                gotoAndPlay(ontploffing);
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:50:17.577

我发现您发布的详细信息不完整且不合时宜。但是，假设您正在尝试将库中的影片剪辑与**Voertuig**类连接起来，

如果您希望使用库影片剪辑以及使用上述功能进行扩展，请设置影片剪辑的**类**而不是**基类**。像这样的东西：

![在此处输入图像描述](../Images/0919755f4d6074a2062cec2ac5e4d99d.png)

# qt - 在 QtreeWidget 中作为列表级别

> ID：10784884
> 
> 赞同：0
> 
> 时间：2012-05-28T12:42:46.520
> 
> 标签：qt, qt4, qtreewidget, qtreewidgetitem

我有 6 个数字的向量，我想将其插入到列表中并将该列表添加到 QTreeWidget。列表的第一个数字在“根”级别，其他数字是子级别“根”。

我不知道该怎么做。

带有描述的图像： ![在此处输入图像描述](../Images/18b172d791a9accd2d808f61e58c9837.png)

代码：

```
void modal::zapis() {
ui->listWidget->clear();
ui->treeWidget->clear();
QList<QTreeWidgetItem *> items;

for(int i=0;i<v.size();i++)
{
    QString string;
    string.setNum(v.at(i));
    ui->listWidget->addItem(string);
    QTreeWidgetItem *root = new QTreeWidgetItem(ui->treeWidget);
    if(i==0)
    {
        root->setText(0, string);
    }
    else
    {
        QTreeWidgetItem *item = new QTreeWidgetItem(root);
        item->setText(0, string);
    }
}
} 
```

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:49:43.717

您在每次迭代中创建一个新的根节点，每次调用只需要创建一次。

# java - 使用 Hibernate Annotation 从父表创建和填充子表

> ID：10784891
> 
> 赞同：-1
> 
> 时间：2012-05-28T12:43:42.893
> 
> 标签：java, hibernate, one-to-one

我需要从表 EMPLOYEE 创建一个表 EMPLOYEE_REMARK。并且需要使用 Annotation Hibernate 来完成。

## 员工

EMP_ID、EMP_FNAME、EMP_LNAME

## EMPLOYEE_REMARK

EMP_REMARK_ID、EMP_ID、REMARK

这将是一个 OnetoOne 关系，即，对于每个 EMP_ID，将有一个 REMARK。REMARK 可以为空。

请帮助我解决方案...可以通过从员工创建一个类并从中填充 EMPLOYEE_REMARK 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:04:42.450

基本上这是做你想做的事的方式。

# 员工

```
@Entity
@Table(name = "EMPLOYEE")
public class Employee implements Serializable {

    @Id
    @Column(name = "EMP_ID")
    private Long id;
    @Column(name = "EMP_FNAME")
    private String firstName;
    @Column(name = "EMP_LNAME")
    private String lastName;
    @OneToOne(mappedBy = "employee", cascade = CascadeType.ALL,
    orphanRemoval = true)
    private EmployeeRemark employeeRemark;

    public void setRemark(String remark) {
        this.employeeRemark = new EmployeeRemark();
        this.employeeRemark.setRemark(remark);
        this.employeeRemark.setEmployee(this);
    }

    public String getRemark() {
        return employeeRemark == null ? null : employeeRemark.getRemark();
    }

    //getters and setters
} 
```

# 员工备注

```
@Entity
@Table(name = "EMPLOYEE_REMARK")
public class EmployeeRemark implements Serializable {

    @Id
    @Column(name = "EMP_REMARK_ID")
    private Long id;
    @OneToOne
    @JoinColumn(name = "EMP_ID")
    private Employee employee;
    @Column(name = "REMARK")
    private String remark;

    //getters and setters
} 
```

保存员工时，只需调用保存员工即可。EmployeeRemark 将级联到所有操作，并将与员工一起被删除，或者如果它以其他方式成为孤儿。

# mysql - MySql：查询优化（多个左连接）

> ID：10784893
> 
> 赞同：1
> 
> 时间：2012-05-28T12:43:43.313
> 
> 标签：mysql, query-optimization, left-join

当**where 子句**包含约 50 000 个 id 时，以下查询需要一个多小时才能执行……同样的查询在几千个 id 的情况下运行得非常快……

```
Select '300_new_files_2012-02-29.xml' as Filelist,
Sum(coalesce(temp_decmetadata.glare_none, 0)) as glare_none,
Sum(coalesce(temp_decmetadata.glare_sun, 0)) as glare_sun,
Sum(coalesce(temp_decmetadata.precipitation_clear, 0)) as precipitation_clear,
Sum(coalesce(temp_decmetadata.precipitation_heavyFog, 0)) as precipitation_heavyFog,
Sum(coalesce(temp_decmetadata.precipitation_mediumRain, 0)) as precipitation_mediumRain,
Sum(coalesce(temp_decmetadata.spray_clear, 0)) as spray_clear,
Sum(coalesce(temp_decmetadata.spray_heavySpray, 0)) as spray_heavySpray,
Sum(coalesce(temp_kafasccmobjectdata.laneAssignment_farRight, 0)) as laneAssignment_farRight,
Sum(coalesce(temp_kafasccmobjectdata.laneAssignment_leftAdjacent, 0)) as laneAssignment_leftAdjacent,
Sum(coalesce(temp_kafasccmobjectdata.type_motorbike, 0)) as type_motorbike,
Sum(coalesce(temp_kafasccmobjectdata.type_truck, 0)) as type_truck,
Sum(coalesce(temp_kafasccmobjectdata.type_van, 0)) as type_van,
Sum(coalesce(temp_visionmetadata.countryCode_SK, 0)) as countryCode_SK,
Sum(coalesce(temp_visionmetadata.countryCode_SM, 0)) as countryCode_SM,
Sum(coalesce(temp_visionmetadata.countryCode_TR, 0)) as countryCode_TR,
Sum(coalesce(temp_visionmetadata.countryCode_UA, 0)) as countryCode_UA,
Sum(coalesce(temp_visionmetadata.countryCode_US, 0)) as countryCode_US,
Sum(coalesce(temp_visionmetadata.countryCode_ZA, 0)) as countryCode_ZA,
Sum(coalesce(temp_visionmetadata.local_illumination_cast_shadows, 0)) as local_illumination_cast_shadows,
Sum(coalesce(temp_visionmetadata.local_illumination_oncoming, 0)) as local_illumination_oncoming,
Sum(coalesce(temp_visionmetadata.roadCharacteristics_flat, 0)) as roadCharacteristics_flat,
Sum(coalesce(temp_visionmetadata.roadCharacteristics_hilly, 0)) as roadCharacteristics_hilly,
Sum(coalesce(temp_visionmetadata.roadLocation_city, 0)) as roadLocation_city,
Sum(coalesce(temp_visionmetadata.roadLocation_cityResidential, 0)) as roadLocation_cityResidential,
Sum(coalesce(temp_visionmetadata.sky_overcast, 0)) as sky_overcast,
Sum(coalesce(temp_visionmetadata.sky_partlyCloudy, 0)) as sky_partlyCloudy,
Sum(coalesce(temp_visionmetadata.timeOfDay_day, 0)) as timeOfDay_day,
Sum(coalesce(temp_visionmetadata.timeOfDay_Sunny_daytime, 0)) as timeOfDay_Sunny_daytime
from files
left join 
(
 Select id,
 count(case when glare like '%none%' then 1 end) as glare_none,
 count(case when glare like '%sun%' then 1 end) as glare_sun,
 count(case when precipitation like '%clear%' then 1 end) as precipitation_clear,
 count(case when precipitation like '%heavyFog%' then 1 end) as precipitation_heavyFog,
 count(case when spray like '%clear%' then 1 end) as spray_clear,
 count(case when spray like '%heavySpray%' then 1 end) as spray_heavySpray,
 from decmetadata
 where id in (1264853,1264854,1264855,1264856,1264857,.....)
 group by id 
) temp_decmetadata on temp_decmetadata.id = files.id 
left join 
(
 Select id,
 count(case when laneAssignment like '%farRight%' then 1 end) as laneAssignment_farRight,
 count(case when laneAssignment like '%leftAdjacent%' then 1 end) as laneAssignment_leftAdjacent,
 count(case when type like '%car%' then 1 end) as type_car,
 count(case when type like '%motorbike%' then 1 end) as type_motorbike,
 count(case when type like '%truck%' then 1 end) as type_truck,
 count(case when type like '%van%' then 1 end) as type_van
 from kafasccmobjectdata
 where id in (1264853,1264854,1264855,1264856,1264857,.....)
 group by id 
) temp_kafasccmobjectdata on temp_kafasccmobjectdata.id = files.id 
left join 
(
 Select id,
 count(case when countryCode like '%SK%' then 1 end) as countryCode_SK,
 count(case when countryCode like '%SM%' then 1 end) as countryCode_SM,
 count(case when countryCode like '%TR%' then 1 end) as countryCode_TR,
 count(case when countryCode like '%UA%' then 1 end) as countryCode_UA,
 count(case when countryCode like '%US%' then 1 end) as countryCode_US,
 count(case when countryCode like '%ZA%' then 1 end) as countryCode_ZA,
 count(case when sky like '%lowSun%' then 1 end) as local_illumination_cast_shadows,
 count(case when comments like '%oncomingevent%' then 1 end) as local_illumination_oncoming,
 count(case when roadCharacteristics like '%flat%' then 1 end) as roadCharacteristics_flat,
 count(case when roadCharacteristics like '%hilly%' then 1 end) as roadCharacteristics_hilly,
 count(case when roadLocation like '%city%' then 1 end) as roadLocation_city,
 count(case when roadLocation like '%cityResidential%' then 1 end) as roadLocation_cityResidential,
 count(case when roadLocation like '%countryRural%' then 1 end) as roadLocation_countryRural,
 count(case when sky like '%overcast%' then 1 end) as sky_overcast,
 count(case when sky like '%partlyCloudy%' then 1 end) as sky_partlyCloudy,
 count(case when timeOfDay like '%day%' then 1 end) as timeOfDay_day,
 count(case when sky like '%clear%' and timeofday ='day' then 1 end) as timeOfDay_Sunny_daytime
 from visionmetadata
 where id in (1264853,1264854,1264855,1264856,1264857,....)
 group by id 
) temp_visionmetadata on temp_visionmetadata.id = files.id 
where files.id in (1264853,1264854,1264855,1264856,1264857,....) 
```

附上“解释选择...”的结果： ![在此处输入图像描述](../Images/3dac4abd7db9ed36cc098a46cbd991fa.png)

任何想法/建议/更正？？？

任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:52:47.627

是的...

第一：如何创建一个结构来保存您想要的所有 id，而不是在查询中写入 50,000 个数字 3 次或更多次。？

第二：尝试消除代码检查中的前导 %。（并在这些列上创建良好的索引）

第三：我几乎从不建议这个 - 但也许预先计算总数并将它们非规范化存储。

# json - 如何将 JSON 对象传递给操作

> ID：10784897
> 
> 赞同：1
> 
> 时间：2012-05-28T12:44:03.703
> 
> 标签：json, asp.net-mvc-3, model-view-controller, jquery

我在 MVC3 的视图中有以下 jQuery 代码。我想根据在成功函数中传递的 JSON 对象在`OffshoreECore`div ( ) 中加载部分视图（名为 ） 。`#Form`这是代码：

```
var inputParamtrs = { 'HeadId': $('#ExpenseId').val(), MProjid': $('#MProjid').val() };
$.ajax({
    type: "POST",
    url: "/Expenses/Edit",
    data: inputParamtrs,
    success:  function (json) {
        ('#Form').load('@Url.Action("OffShoreECore", *What comes here ?!?*)');
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:49:25.677

的第二个参数`load()`是`data`应与请求一起发送到指定 URL 的参数。要发送您的 JSON 字符串，请尝试以下操作：

```
success:  function (json) {
    $('#Form').load('@Url.Action("OffShoreECore")', json);
} 
```

您的示例代码还缺少第二个键 in和选择器 in的`'`分隔符，但我猜它们只是拼写错误。`inputParamtrs``$``success`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:52:18.530

```
$.getJSON("/Expenses/Edit",
    {
        HeadId: $('#ExpenseId').val(), 
        MProjid: $('#MProjid').val() 
    },
    function (data) {
        elementForResult.innerHTML = data;
    }); 
```

在控制器中：

```
public JsonResult Edit(int HeadId, int MProjid)
    {
        ...
        var result = SerializeControl("~/Views/Expenses/Edit.cshtml", null);
        return Json(result, JsonRequestBehavior.AllowGet);
    }

private string SerializeControl(string controlPath, object model)
    {
        var control = new RazorView(ControllerContext, controlPath, null, false, null);
        ViewData.Model = model;
        var writer = new HtmlTextWriter(new StringWriter());
        control.Render(new ViewContext(ControllerContext, control, ViewData, TempData, writer), writer);
        string value = writer.InnerWriter.ToString();
        return value;
    } 
```

# extjs - 如何在sencha touch中将数据绑定到标签

> ID：10784909
> 
> 赞同：1
> 
> 时间：2012-05-28T12:45:39.180
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我想将数据绑定到控制器级别的标签控件。我在视图中有一个主选项卡面板视图，还有两个视图，例如 example1 视图和规范视图。在规范选项卡视图中有一个标签是 id: `lblSpecification`，对于这个标签，我将在控制器级别绑定数据，如下所示。但它不起作用。控制器代码在这里：

```
config: {
  refs: {
    specificationPage: "specification",
    specificationLabel: "#lblSpecification"
  },

  control: {
    specificationPage: {
      initialize: "SpecificationInitialize"
    }
  },

  SpecificatiTabInitialize: function () {
    this.getSpecificationLabel().setHtml("Welcome");
  }
} 
```

我创建了另一个类似的项目，我没有使用选项卡面板，我遵循了与上述代码类似的步骤，它工作正常，请我知道它是由于选项卡面板引起的问题，还是他们有任何替代方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:14:58.677

在标签初始化但不是面板时尝试 setHtml。

# ruby-on-rails - 如何使用访问令牌在 Github 上使用 GET 和 POST？

> ID：10784916
> 
> 赞同：1
> 
> 时间：2012-05-28T12:46:32.333
> 
> 标签：ruby-on-rails, ruby, github-api

我正在使用 OmniAuth 通过 Github 对用户进行身份验证。OmniAuth 提供访问令牌。现在我想将 GET 或 POST 请求发送到 Github。我不想使用任何 gem，我想使用 Net::HTTP。我是这样做的：

```
<%consumer = OAuth::Consumer.new("mshsD0jpgcYwwOEcTW5ZTA",  "V6KTqllY5jS392pj4FNFCb5EiOM8DaFzVwr9cS54XQ", { :site => "https://api.github.com", :request_token_path => '/oauth/request_token', :access_token_path => '/oauth/access_token', :authorize_path => '/oauth/authorize', :scheme => :header })%>

<%access_token = OAuth::AccessToken.new(consumer,auth.token,auth.secret)%> 
```

我以前为 Twitter 做的同样工作很好，但现在我收到以下错误：

```
uninitialized constant ActionView::CompiledTemplates::OAuth 
```

即使在同一个应用程序中，同样的事情也适用于 Twitter，但不适用于 Github。

我通过谷歌搜索但没有发现任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:29:07.780

You should be using OAuth2 instead of OAuth. I'd actually recommend using [Octokit](https://github.com/pengwynn/octokit), it's easy to use and Wynn works for GitHub now so part of his job is keeping it up to date. :)

If you want to use Net::HTTP (although I can't imagine why), you can actually do that without any gems. Just put the token you got from OmniAuth in the request's "Authentication" header.

```
require 'net/https'
require 'uri'

uri = uri = URI.parse("https://api.github.com/users/username")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true

headers = { "Authentication" => "token" }
request = Net::HTTP::Get.new(uri.request_uri, headers)
response = http.request(request)
response.body # => A string containing the JSON response 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:32:41.690

鉴于您已经在使用 Omniauth 并且熟悉它，我建议您使用 omniauth-github 策略：[https ://github.com/intridea/omniauth-github](https://github.com/intridea/omniauth-github)

# javascript - jQuery 自动完成集成

> ID：10784921
> 
> 赞同：1
> 
> 时间：2012-05-28T12:46:44.983
> 
> 标签：javascript, jquery, html, css, autocomplete

我找到了这个 jQuery，我想将它集成到我的项目中。我的问题是如何应用该“来源”？

因为在我的输入中，我从数据库中接收到所有信息，而之前我不能在 html 或 jQuery 中写任何东西！

实际上，我使用 wicket 组件进行自动完成，但该组件有问题，因为如果我调整浏览器的大小，列表不会在输入下方对齐，因此我正在尝试找到更好的方法。

如果有人可以帮助我:)

```
var $element = $('.my-autocomplete');
var $testinput = $element.find('.my-autocomplete-input');

$testinput.autocomplete({
    minLength: 0,
    autoFocus: true,
    source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"]
  }); 
```

**小提琴示例：http:** [//jsfiddle.net/CSypd/36/](http://jsfiddle.net/CSypd/36/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:06:50.873

**客户端**

```
 $("#element _id").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '@Url.Action("GetEmployeeDepartmentStuff")',  
                        //generates into a url. eg http://www.site.com/MyPage/GetEmployeeDepartmentStuff?filter=....
                        dataType: "json",
                        data: {
                            filter: request.term
                        },
                        success: function (data) {
                            response($.map(eval(data), function (item) {
                                return {
                                    label: item.em_name,
                                    dp_Name: item.dp_Name
                                }
                            }));
                        }
                    })
                },
                maxLength: 2,
                select: function (event, ui) {                   
                    $("#Deparment").attr('value', ui.item.dp_Name);
                }
            }); 
```

**服务器端**

```
 [HttpGet]
    [CompressFilter]
    public ActionResult GetEmployeeDepartmentStuff(string filter = "")
    {
        SomeRepository repo = new SomeRepository();
        return repo.GetEmployeeDepartmentStuff(filter);   //returns a JSON result
    } 
```

不知道你的服务器端代码使用什么语言，但你需要有一个接受参数“过滤器”（见上文）的 web 方法/服务/暴露的东西，或者你想发回的任何其他东西.. .. 也不要忘记在你的标记中包含 jquery 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:55:27.323

最简单的想法是通过 ajax 调用获取源数组。

# json - upshot映射问题asp.net mvc4

> ID：10784925
> 
> 赞同：2
> 
> 时间：2012-05-28T12:46:51.317
> 
> 标签：json, knockout.js, asp.net-mvc-4, upshot

我正在开发 ASP.NET MVC 4 beta 中的单页应用程序，在结果尝试映射我的控制器返回的 JSON 时失败（我猜）。

我的项目需要一些个人信息，一些开放式问题+答案和一些李克特问题+答案（同意，不同意等）

这是我的模型的外观：

```
// Essay contains personal information, questions and related answers 
public class EssayResult {
    public EssayResult() {
        if( FinishedAt == null )
            FinishedAt = DateTime.Now;

        PersonInfo = new PersonInfo();
        LikertAnswers = new List<LikertAnswer>();
        OpenAnswers = new List<OpenAnswer>();
    }

    public int EssayResultId {get; set;}
    public DateTime? FinishedAt {get; set; }
    public virtual int PersonInfoId {get; set; }
    public virtual PersonInfo PersonInfo {get; set; }
    public virtual ICollection<LikertAnswer> LikertAnswers {get; set; }
    public virtual ICollection<OpenAnswer> OpenAnswers {get; set; }
}

// Contains some information about the person who's doing the essay
public class PersonInfo {
    public int PersonInfoId {get; set;}
    [Required]
    public int Age {get; set; }
    [Required]
    public Education Education {
        get { return ( Education ) EducationValue; }
        set { EducationValue = ( int ) value; }
    }
    [Required]
    public Gender Gender {
        get { return ( Gender ) GenderValue; }
        set { GenderValue = ( int ) value; }
    }
    [Required]
    public bool RobotExperience {get; set; }

    // Workaround to get enums mapped 
    public int EducationValue {get; set; }
    public int GenderValue {get; set; }
}

public enum Education {
    Middelbaar,
    Mbo,
    Hbo,
    Wo
}

public enum Gender {
    Man,
    Vrouw
}

public class LikertQuestion {
    public int LikertQuestionId {get; set; }
    [Required]
    public string Name {get; set; }
    [Required]
    public string Question {get; set; }
}

public class LikertAnswer {
    // Primary key and Question-relation
    public int LikertAnswerId {get; set; }

    public virtual int LikertQuestionId {get; set; }
    public virtual LikertQuestion LikertQuestion {get; set; }
    public virtual int EssayResultId {get; set; }
    public virtual EssayResult EssayResult {get; set; }

    // Properties
    public LikertScale Answer {get; set;}
}

public class OpenQuestion {
    public int OpenQuestionId {get; set; }
    public string Question {get; set; }
} 
```

我的控制器似乎返回了正确的 JSON：

```
{
    "EssayResultId": 0, 
    "FinishedAt": "/Date(1338204633030+0200)/", 
    "LikertQuestionId": 0,
    "LikertAnswers": [
    {
        "Answer": 0, 
        "EssayResult": null, 
        "EssayResultId": 0, 
        "LikertAnswerId": 0, 
        "LikertQuestion": {
            "LikertQuestionId": 1, 
            "Name": "PU01", 
            "Question": "Ik denk dat robots nuttig zijn"
        }
    }, 
    ...
    ], 

    "OpenAnswers": [
    {
        "Answer": null, 
        "EssayResult": null, 
        "EssayResultId": 0, 
        "OpenAnswerId": 0, 
        "OpenQuestion": {
            "OpenQuestionId": 1, 
            "Question": "Wat komt er als eerste in u op bij het horen van het woord 'robot'?"
        }, 
        "OpenQuestionId": 0
    }, 
    ...  ], 

    "PersonInfo": {
        "Age": 12, 
        "Education": 0, 
        "EducationValue": 0, 
        "Gender": 0, 
        "GenderValue": 0, 
        "PersonInfoId": 0, 
        "RobotExperience": false
    }, 
    "PersonInfoId": 0
} 
```

某些引用未设置，因为这些对象是由控制器创建的，而不是从数据库中提取的。

Knockout 无法将其映射到有效的视图模型中，它不会提示任何错误，但是当我使用 firebug 检查视图模型变量时，它会显示大量的结果函数等，而不是视图模型和一些额外的结果函数。

这是我的第一个 Knockout、Upshot 和 SPA 项目，所以我有点迷失了，因为结果不会引发任何错误，而且模型在服务器端/数据库级别是正确的......

如果我需要提供更多详细信息，请告诉我。:) 我已经按照 ToDo-items 教程和 Steve Sanderson 的 Delivery Tracker 示例进行操作，所以我想它必须与我的模型/映射有关..？

桑德

**更新：**我已经删除了 FinishedAt 属性，因为它显然格式错误，但即使这样也没有帮助..仍然不知道为什么我的视图模型不会渲染，json 似乎很好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:06:47.107

目前，Upshot 和服务器端不是 ASP.NET MVC 4 RTM 的一部分。所以我会稍等片刻——等待未来的决定。

# r - 在两个不匹配的不同表中创建具有匹配 id 的新数据框

> ID：10784926
> 
> 赞同：1
> 
> 时间：2012-05-28T12:46:54.827
> 
> 标签：r, merge, dataframe

我正在尝试合并两个带有 id 的数据框，我想先合并所有匹配的 id，然后找到不匹配的，我找到了可以合并常见 id 的合并函数。例如：

```
m1 = merge(df1, df2, by=c("id")) 
```

现在我正在尝试创建一个新的数据帧，其数据帧 2 的 id 与数据帧 1 不匹配。

你能告诉我我应该寻找哪个命令吗？

例如：

我有以下两个数据集：

![在此处输入图像描述](../Images/400cc46bcec094078a2bf7374e791d6c.png)df1 ![在此处输入图像描述](../Images/cbff9da6a63427700493657360c46857.png)df2

我正在尝试创建一个新的数据框，其中 df2 中的 id 不在 df1 中。例如 df2 中的 id = "a3" 和 "c3"。

![在此处输入图像描述](../Images/9646daeb34df52b1436be6778db0517a.png)

我的样本数据：

```
 df1 =data.frame(id= c("a1","a2","b1","b2","c1","c2"), value= 1:6)
df2 =data.frame(id= c("a1","a2","a3","b1","c1","c3"), value= 7:12) 
```

非常感谢，阿扬

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T12:58:49.117

如果您想使用`merge`，这是一种方法：

```
df_merged <- merge(df2, df1, by.x="id", by.y="id", all.x=TRUE)
df_merged[is.na(df_merged$value.y),]
  id value.x value.y
3 a3       9      NA
6 c3      12      NA 
```

由于您的列名是`data.frames`相同的并且`merge`由通用列名合并，因此您必须在此处明确告诉函数您要使用的列名`id`。

但你应该问问自己，你是否真的想在这里合并？如果您只想要那些`df2`不在的行`df1`，为什么不使用这样的东西呢？

```
df2[!(df2$id %in% df1$id), ]
  id value
3 a3     9
6 c3    12 
```

# java - 如何将负数和带小数点的数字转换为二进制、十六进制、八进制、十进制

> ID：10784934
> 
> 赞同：0
> 
> 时间：2012-05-28T12:47:27.497
> 
> 标签：java, converter

我想做一个转换器十进制，二进制，十六进制，八进制。这就是我现在使用java库所做的事情

```
import java.text.*;
import java.util.*;

public class convertitore {

public static void main(String[] args){

Scanner scanner = new Scanner(System.in);
String binario = null; 
String ottale = null;
int decimale = 0, sel;
String esa = null;

System.out.println("Choose the type of number to convert: ");
System.out.println("Enter 1 for decimal");
System.out.println("Enter 2 for binary");
System.out.println("Enter 3 for hexadecimal");
System.out.println("Enter 4 for octal");

sel = scanner.nextInt();

if (sel == 1){

System.out.println("Enter a decimal number: ");
decimale = scanner.nextInt();

esa = java.lang.Integer.toHexString(decimale);
binario = java.lang.Integer.toBinaryString(decimale);
ottale = java.lang.Integer.toOctalString(decimale); 
System.out.println("The decimal number entered is: " + decimale);
System.out.println("The hexadecimal number entered is: " + esa);
System.out.println("The binary number entered is: " + binario);
System.out.println("The octal number entered is: " + ottale);

}

if (sel == 2){

System.out.println("Enter a binary number: ");
binario = scanner.next();

decimale = Integer.parseInt(binario.toString(),2);
esa = java.lang.Integer.toHexString(decimale);
ottale = java.lang.Integer.toOctalString(decimale); 
System.out.println("The binary number entered is: " + binario);
System.out.println("The hexadecimal number entered is:  " + esa);
System.out.println("The decimal number entered is:  " + decimale);
System.out.println("The octal number entered is:  " + ottale);

}

if (sel == 3){

System.out.println("Inserisci un numero binario: ");
esa = scanner.next();

decimale = Integer.parseInt(esa.toString(),16);
binario = java.lang.Integer.toBinaryString(decimale);
ottale = java.lang.Integer.toOctalString(decimale); 
System.out.println("Il numero esadecimale inserito è: " + esa);
System.out.println("Il numero inserito in binario è: " + binario);
System.out.println("Il numero inserito in decimale è: " + decimale);
System.out.println("Il numero inserito in ottale è: " + ottale);

}

if (sel == 4){

System.out.println("Inserisci un numero binario: ");
ottale = scanner.next();

decimale = Integer.parseInt(ottale.toString(),8);
esa = java.lang.Integer.toHexString(decimale);
binario = java.lang.Integer.toOctalString(decimale);

System.out.println("Il numero ottale inserito è: " + ottale);
System.out.println("Il numero inserito in esacemale è: " + esa);
    System.out.println("Il numero inserito in decimale è: " + decimale);
    System.out.println("Il numero inserito in binario è: " + binario);  
}   
}
} 
```

但我想改进转换，用带小数点和负数的数字，你对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:02:52.487

In order to convert numbers with decimal points, you can use the class [Double](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html) and its methods, `toHexString` and `doubleToLongBits`.

# javascript - 正则表达式模式错误

> ID：10784936
> 
> 赞同：1
> 
> 时间：2012-05-28T12:47:32.150
> 
> 标签：javascript, regex

我正在尝试使用 javascript 正则表达式来验证出生日期文本框。这是我的代码

```
var patt=/[0-9]{1,2}/[0-9]{1,2}/[0-9]{4}/;
alert(patt.test("1985/08/03")); 
```

并且错误说： SyntaxEror: Unexpected token {

我不明白为什么，这种模式在 asp.net RegularExpressionValidator 控制器中运行良好。非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:50:20.383

您需要转义`/`字符，否则解释器会看到第一个字符并认为这是正则表达式的结尾。

您还应该在您的正则表达式中放置锚点，以确保它与*整个*字符串匹配，并且不匹配恰好*包含*该模式的任何字符串。

为简洁起见，您也可以使用`\d`代替`[0-9]`：

```
var patt = /^\d{1,2}\/\d{1,2}\/\d{4}$/; 
```

注意：您的样本不起作用 - 您已将年份放在首位，但 RE 预计它将是最后一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T12:49:07.243

这是一个**真正**验证 JavaScript 日期的示例代码：

```
function isValidDate(dateStr) {
    s = dateStr.split('/');
    d = new Date(+s[2], s[1]-1, +s[0]);
    if (Object.prototype.toString.call(d) === "[object Date]") {
        if (!isNaN(d.getTime()) && d.getDate() == s[0] && 
            d.getMonth() == (s[1] - 1)) {
            return true;
        }
    }
    return false;
} 
```

请参阅[在 JavaScript 中检测“无效日期”日期实例](https://stackoverflow.com/questions/1353684/detecting-an-invalid-date-date-instance-in-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:50:36.853

问题是您没有转义模式中的 / 分隔符。尝试

```
/[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}/; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:27:53.817

正则表达式（在您修复非转义的“/”之后）只会检查正确的位数。
它不会检查月份是否在 1 到 12 之间、天在 1 到 31、30、28 或 29 之间，具体取决于月份和闰年。

如果这对您来说足够了，那么您可以使用正则表达式获得的最接近的是（假设 dd/mm/yyyy）：

`/(3[01]|[12][0-9]|0?[1-9])\/(1[012]|0?[1-9])\/([12][0-9]{3})/`

天数将在 1-31 范围内
月份将在 1-12 范围内
我冒昧地将年份限制在 1000 到 2999 之间，但是如果您想限制从 1970 到 2059`(19[789][0-9]|20[0-5][0-9])`的使用，您可以使用格式年部分。
你会得到 1 美元的日期，2 美元的月份和 3 美元的年份（我认为）

# android - getInputStream() 方法在 Android 中返回一个空字符串

> ID：10784939
> 
> 赞同：0
> 
> 时间：2012-05-28T12:47:40.880
> 
> 标签：android, facebook, webpage, httpurlconnection

我正在尝试开发一个应用程序，我可以在其中获取`HTML`任何网页的源代码。我能够得到，`code`但是当我使用 some 尝试相同的代码时`facebook profile links`，它给了我一个空的`string`.

我正在使用`HttpURLConnection`. 我正在尝试如下代码：

```
URL url = new URL(urlPassed); 
HttpURLConnection urlc = (HttpURLConnection) url.openConnection(); 
BufferedInputStream buffer = new BufferedInputStream(urlc.getInputStream()); 
```

我正在尝试在循环中读取该缓冲区，因为`buffer.read(by)`where`"by"`是 size 的字节数组`7024`。但是，它适用于除 facebook 页面之外的所有其他网页。
这有什么原因吗？有什么办法解决这个问题吗？

# scala - Scala中的多选项类型

> ID：10784942
> 
> 赞同：5
> 
> 时间：2012-05-28T12:47:43.453
> 
> 标签：scala

如何归档一种返回 T 类型或 Error 类型的 Option 类型？

我正在做一些 Web 请求，响应要么是“ok”并且包含对象，要么调用返回错误，在这种情况下，我想提供一个带有错误原因的 Error 对象。

所以像：

```
def myRequest() : Result[MyObject] {
  if (thereWasAnError) Error(reason) else MyObject 
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T13:00:59.480

# `scala.Either`

[`Either`](https://www.scala-lang.org/api/current/scala/util/Either.html)类型应该正是你想要的：

```
def myRequest() : Either[String, MyObject] = 
    if (thereWasAnError) 
        Left("Some error message") 
    else 
        Right(new MyObject) 
```

`Either`类似于`Option`但可以保留以下两个可能值之一：*left*或*right*。按照惯例，*右边*是可以的，而*左边*是错误的。

你现在可以做一些花哨的模式匹配：

```
myRequest() match {
    case Right(myObject) =>
        //...
    case Left(errorMsg) =>
        //...
} 
```

# `scala.Option.toRight()`

同样，您可以使用`Option`并将其翻译为`Either`. 由于通常`*right* values is used for success and left for failure, I suggest using`toRight() `rather than`toLeft()`：

```
def myRequest() : Option[MyObject] =
    if (thereWasAnError)
        None
    else
        Some(new MyObject)

val result: Either[String, MyObject] = myRequest() toRight "Some error message" 
```

然而，在这个简单的例子中`Either`，直接返回结果似乎更直接。`myRequest()`

# c - 使用 exec 仅带有 argv 的一些参数（使用 C）

> ID：10784943
> 
> 赞同：2
> 
> 时间：2012-05-28T12:47:46.193
> 
> 标签：c, input, exec, argv

我需要一个看起来像的输入

```
./a.out <exe> <arg1> ... <argn> <others_stuff> 
```

我必须作为一个单独的进程执行的输入在哪里`<exe> <arg1> ... <argn>`（目标是将 exe 的输出保存到 txt 中）。

将输出保存到 txt 文件中没有问题，我只需要重定向标准输出（使用 dup2、freopen 或类似的东西）。

问题是只执行一部分 argv！因为 exec 的系列函数（它们太多了！）让我们将整个 argv 作为输入，或者指定每个 arg。我写在这里是因为我无法解决问题，所以我希望你能帮助我（我到处搜索都没有成功）。

编辑：我忘了说我不能使用系统来执行命令！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:56:29.603

如果你想使用 argv 的连续部分，你有两个选择，你可以（正如你所尝试的）创建一个新的 arg 数组，正确地填充它：

```
 char *params[argc-2];
  memcpy(params, argv+1, sizeof params);
  params[argc-3] = NULL;

  execvp(*params, params); 
```

你可以粉碎`argv`

```
 argv[argc-3] = NULL;
  execvp(argv[1], argv+1); 
```

或者，如果您没有太多参数，您可以使用`execlp`：

```
 execlp(argv[0], argv[0], argv[3], argv[2], argv[4], NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:01:10.767

Since `exec` accepts an `argv` argument as a `char*` array terminated by a `NULL` pointer, you can just use the existing `argv` and set the member after the last one you want to pass to `NULL`.

This does destroy `argv` - if that's a problem, you can copy it first (you'll have to allocate some memory for the new copy...)

# c# - 流畅的 NHibernate 和延迟加载

> ID：10784945
> 
> 赞同：3
> 
> 时间：2012-05-28T12:47:50.883
> 
> 标签：c#, .net, session, fluent-nhibernate, lazy-loading

我有一些关于延迟加载的问题

当我映射我的对象时，我`.Not.LazyLoad()`在我的应用程序中到处都写，它工作得很好。但我有一些问题。
示例：我有一堂课`User`。它具有属性`Name`和`Comments`. 映射：`Comments`_`User`

```
HasMany(x => x.Comments).KeyColumn("UserId").Not.LazyLoad(); 
```

哪个效果很好，但是在我加载的任何地方`User`，`Comments`都会加载它，这很糟糕……负载示例`User`：

```
var user = session.Get<User>(1); 
```

如果用户有很多评论，我的应用程序运行不佳......
问题是如果需要我如何启用 LazyLoad？或者我如何禁用延迟加载，如果我不写`.Not.LazyLoad()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:15:19.700

我找到了我的问题的答案。
如果不写任何地方`.Not.LazyLoad()`并且需要获取`Comments`，你必须写这个（获取 id=1 的用户）：

```
var user = session.QueryOver<User>()
                  .Fetch(u => u.Comments)
                  .Eager
                  .List()
                  .Where(u => u.Id == userId)
                  .FirstOrDefault(); 
```

或者，你需要什么。

# zedgraph - 具有 3-X 轴和 3-Y 轴的 Zed 图形

> ID：10784947
> 
> 赞同：4
> 
> 时间：2012-05-28T12:48:13.863
> 
> 标签：zedgraph

我正在使用 zedGraph dll 使用点来保存我的图形图像。现在我需要保存一个带有**1-X Axis 和 3-Y axis**的图表。也有**3-X 轴和 1-Yaxis**。请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T09:35:33.580

对于 Y 轴，这个问题相当简单。只需向 中添加足够数量的`YAxis`对象，`GraphPane.YAxisList`并通过设置 将曲线与相应的轴关联起来`YAxisIndex`。

将所有曲线添加到图形后，通过调用 更新 Y 轴的比例`GraphPane.AxisChange()`。

例子：

```
var pane = zedGraphControl1.GraphPane;

pane.YAxisList.Clear();
var y1 = pane.AddYAxis("First");
var y2 = pane.AddYAxis("Secnd");
var y3 = pane.AddYAxis("Third");

var curve1 = new LineItem(null, new[] { 0.1, 0.5, 0.9 }, 
    new[] { 0.8, 0.3, 0.1 }, Color.Blue, SymbolType.None) { YAxisIndex = y1 };
pane.CurveList.Add(curve1);

var curve2 = new LineItem(null, new[] { 0.1, 0.5, 0.9 }, 
    new[] { -0.8, -0.3, -0.1 }, Color.Green, SymbolType.None) { YAxisIndex = y2 };
pane.CurveList.Add(curve2);

var curve3 = new LineItem(null, new[] { 0.1, 0.5, 0.9 }, 
    new[] { -0.009, 0.001, 0.008 }, Color.Red, SymbolType.None) { YAxisIndex = y3 };
pane.CurveList.Add(curve3);

pane.AxisChange(); 
```

将产生以下结果：

![三个 Y 轴](../Images/27c2cb4fe364454783334b19135282a1.png)

对于 X 轴，您可以通过利用图形窗格的`XAxis`和属性，并将属性设置为应该引用第二个 X 轴的曲线来拥有 2 个不同的 X 轴。`X2Axis``IsX2Axis``true`

不过，我不知道超过 2 个 X 轴的解决方案。

# jquery - 条件按钮添加到 jQuery 模式

> ID：10784948
> 
> 赞同：11
> 
> 时间：2012-05-28T12:48:15.367
> 
> 标签：jquery, modal-dialog

我有一个 jQuery 模式，如果满足条件语句，我想在其中添加一个附加按钮。

原始示例代码（删减）：

```
$("#dialog").html("<div></div>").dialog({
    title: "Some Title",
    modal: true,
    width: 550,
    buttons: {
        Ok: function() {
            //
        },
        'A Button': function() {
            //
        }
    }
}).dialog('open'); 
```

因此，正如您在上面看到的，有一个带有 2 个按钮的模式，但我还想在其中添加一些动态代码，以便在设置变量时能够满足额外的按钮。例如

```
var some_variable = 0;

$("#dialog").html("<div></div>").dialog({
    title: "Some Title",
    modal: true,
    width: 550,
    buttons: {
        Ok: function() {
            //
        },
        'A Button': function() {
            //
        }
        /* ??? */
        if (some_variable==1) //then add the other button's code here..
        /* ??? */
    }
}).dialog('open'); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-28T12:51:15.280

您可以`buttons`在创建对话框之前创建对象：

```
//Create the buttons object
var buttons = {
    Ok: function() {},
    'A Button': function() {}
};

//Add another button to that object if some condition is true
if(something) {
    buttons['B button'] = function() {};
}

//Create the dialog, passing in the existing buttons object
$("#dialog").html("<div></div>").dialog({
    buttons: buttons,
    //Other options
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T12:52:23.437

目前没有办法只修改一个按钮，但您可以使用 option 方法重置完整的按钮哈希：

如果您的条件满足，则再次重置按钮。

`$('#contactform').dialog('option', 'buttons', {...});`

[http://old.nabble.com/jQuery-dialog-add-remove-button-on-the-fly-td22036498s27240.html](http://old.nabble.com/jQuery-dialog-add-remove-button-on-the-fly-td22036498s27240.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-28T20:42:12.343

或者，您可以创建所需的所有按钮，然后根据具体情况以及对话框中发生的情况显示或隐藏它们。这样做的一种方法是使用 jqueryui 对话框创建事件。

您可以参考以下工作示例：http: [//jsfiddle.net/eCLuy/](http://jsfiddle.net/eCLuy/)

> ```
> $("#dialog").dialog({
>     buttons: {
>         'prev': {
>         text: 'prev',
>         id: "prevB",
>         click: function() {
>             $(this).closest(".ui-dialog").find(".ui-button#prevB").addClass("hidden");            
>             $(this).closest(".ui-dialog").find(".ui-button#nextB").removeClass("hidden");               
>         }
>         },        
>         'next': {
>             text: 'next',
>             id: "nextB",
>             click: function() {
>                 $(this).closest(".ui-dialog").find(".ui-button#prevB").removeClass("hidden");               
>                 $(this).closest(".ui-dialog").find(".ui-button#nextB").addClass("hidden");            
>             }
>         }        
>     },
>     // http://api.jqueryui.com/dialog/#event-create
>     // Triggered when the dialog is created.
>     // Initialize the dialog with the create callback
>     create:function () {
>         $(this).closest(".ui-dialog").find(".ui-button#prevB").addClass("hidden");
>     }
> }); 
> ```

# java - 是否有任何 JVM 的 JIT 编译器生成使用矢量化浮点指令的代码？

> ID：10784951
> 
> 赞同：101
> 
> 时间：2012-05-28T12:48:21.910
> 
> 标签：java, floating-point, jit, sse, vectorization

假设我的 Java 程序的瓶颈确实是一些紧密循环来计算一堆矢量点积。是的，我已经分析过了，是的，这是瓶颈，是的，它很重要，是的，算法就是这样，是的，我已经运行 Proguard 来优化字节码等。

这项工作本质上是点积。如，我有两个`float[50]`，我需要计算成对产品的总和。我知道存在处理器指令集来快速批量执行此类操作，例如 SSE 或 MMX。

是的，我可能可以通过在 JNI 中编写一些本机代码来访问这些。事实证明，JNI 调用非常昂贵。

我知道您无法保证 JIT 将编译或不编译什么。有没有人*听说*过使用这些指令的 JIT 生成代码？如果是这样，Java 代码有什么可以帮助它以这种方式编译的吗？

可能是“不”；值得一问。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-30T02:06:53.873

所以，基本上，你希望你的代码运行得更快。JNI 就是答案。我知道你说它对你不起作用，但让我告诉你你错了。

这是`Dot.java`：

```
import java.nio.FloatBuffer;
import org.bytedeco.javacpp.*;
import org.bytedeco.javacpp.annotation.*;

@Platform(include = "Dot.h", compiler = "fastfpu")
public class Dot {
    static { Loader.load(); }

    static float[] a = new float[50], b = new float[50];
    static float dot() {
        float sum = 0;
        for (int i = 0; i < 50; i++) {
            sum += a[i]*b[i];
        }
        return sum;
    }
    static native @MemberGetter FloatPointer ac();
    static native @MemberGetter FloatPointer bc();
    static native @NoException float dotc();

    public static void main(String[] args) {
        FloatBuffer ab = ac().capacity(50).asBuffer();
        FloatBuffer bb = bc().capacity(50).asBuffer();

        for (int i = 0; i < 10000000; i++) {
            a[i%50] = b[i%50] = dot();
            float sum = dotc();
            ab.put(i%50, sum);
            bb.put(i%50, sum);
        }
        long t1 = System.nanoTime();
        for (int i = 0; i < 10000000; i++) {
            a[i%50] = b[i%50] = dot();
        }
        long t2 = System.nanoTime();
        for (int i = 0; i < 10000000; i++) {
            float sum = dotc();
            ab.put(i%50, sum);
            bb.put(i%50, sum);
        }
        long t3 = System.nanoTime();
        System.out.println("dot(): " + (t2 - t1)/10000000 + " ns");
        System.out.println("dotc(): "  + (t3 - t2)/10000000 + " ns");
    }
} 
```

和`Dot.h`：

```
float ac[50], bc[50];

inline float dotc() {
    float sum = 0;
    for (int i = 0; i < 50; i++) {
        sum += ac[i]*bc[i];
    }
    return sum;
} 
```

我们可以使用以下命令使用[JavaCPP](https://github.com/bytedeco/javacpp)编译和运行它：

```
$ java -jar javacpp.jar Dot.java -exec 
```

使用 Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz、Fedora 30、GCC 9.1.1 和 OpenJDK 8 或 11，我得到这种输出：

```
dot(): 39 ns
dotc(): 16 ns 
```

或大约快 2.4 倍。我们需要使用直接 NIO 缓冲区而不是数组，但[HotSpot 可以像访问数组一样快地访问直接 NIO 缓冲区](http://web.archive.org/web/20111117132310/http://blog.vlad1.com/2011/10/05/looking-at-java-nio-buffer-performance/)。另一方面，在这种情况下，手动展开循环并不能显着提高性能。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-06-17T08:00:33.707

为了解决其他人在这里表达的一些怀疑，我建议任何想向自己或其他人证明的人使用以下方法：

*   创建一个 JMH 项目
*   写一小段可向量化的数学。
*   在 -XX:-UseSuperWord 和 -XX:+UseSuperWord（默认）之间运行他们的基准测试
*   如果没有观察到性能差异，则您的代码可能没有被矢量化
*   为确保，运行您的基准测试以打印出程序集。在 linux 上，您可以使用 perfasm profiler('-prof perfasm') 看看是否生成了您期望的指令。

例子：

```
@Benchmark
@CompilerControl(CompilerControl.Mode.DONT_INLINE) //makes looking at assembly easier
public void inc() {
    for (int i=0;i<a.length;i++)
        a[i]++;// a is an int[], I benchmarked with size 32K
} 
```

带和不带标志的结果（在最近的 Haswell 笔记本电脑，Oracle JDK 8u60 上）： -XX:+UseSuperWord : 475.073 ± 44.579 ns/op（每操作纳秒） -XX:-UseSuperWord : 3376.364 ± 233.211 ns/op

热循环的程序集需要格式化和粘贴在这里，但这里有一个片段（hsdis.so 无法格式化一些 AVX2 矢量指令，所以我使用 -XX:UseAVX=1 运行）：-XX:+ UseSuperWord（带有'-prof perfasm：intelSyntax = true'）

```
 9.15%   10.90%  │││ │↗    0x00007fc09d1ece60: vmovdqu xmm1,XMMWORD PTR [r10+r9*4+0x18]
 10.63%    9.78%  │││ ││    0x00007fc09d1ece67: vpaddd xmm1,xmm1,xmm0
 12.47%   12.67%  │││ ││    0x00007fc09d1ece6b: movsxd r11,r9d
  8.54%    7.82%  │││ ││    0x00007fc09d1ece6e: vmovdqu xmm2,XMMWORD PTR [r10+r11*4+0x28]
                  │││ ││                                                  ;*iaload
                  │││ ││                                                  ; - psy.lob.saw.VectorMath::inc@17 (line 45)
 10.68%   10.36%  │││ ││    0x00007fc09d1ece75: vmovdqu XMMWORD PTR [r10+r9*4+0x18],xmm1
 10.65%   10.44%  │││ ││    0x00007fc09d1ece7c: vpaddd xmm1,xmm2,xmm0
 10.11%   11.94%  │││ ││    0x00007fc09d1ece80: vmovdqu XMMWORD PTR [r10+r11*4+0x28],xmm1
                  │││ ││                                                  ;*iastore
                  │││ ││                                                  ; - psy.lob.saw.VectorMath::inc@20 (line 45)
 11.19%   12.65%  │││ ││    0x00007fc09d1ece87: add    r9d,0x8            ;*iinc
                  │││ ││                                                  ; - psy.lob.saw.VectorMath::inc@21 (line 44)
  8.38%    9.50%  │││ ││    0x00007fc09d1ece8b: cmp    r9d,ecx
                  │││ │╰    0x00007fc09d1ece8e: jl     0x00007fc09d1ece60  ;*if_icmpge 
```

玩得开心冲进城堡！

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-11-28T13:30:13.503

在从 Java 7u40 开始的 HotSpot 版本中，服务器编译器提供对自动矢量化的支持。根据[JDK-6340864](http://bugs.sun.com/view_bug.do?bug_id=6340864)

然而，这似乎只适用于“简单循环”——至少目前如此。例如，累积数组还不能向量化[JDK-7192383](http://bugs.sun.com/view_bug.do?bug_id=7192383)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-28T20:09:59.877

这是我朋友写的关于试验 Java 和 SIMD 指令的好文章：http: [//prestodb.rocks/code/simd/](http://prestodb.rocks/code/simd/)

它的一般结果是您可以期望 JIT 在 1.8 中使用一些 SSE 操作（以及在 1.9 中更多）。虽然你不应该期望太多，你需要小心。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-28T15:02:34.523

您可以编写 OpenCl 内核来进行计算并从 java [http://www.jocl.org/](http://www.jocl.org/)运行它。

代码可以在 CPU 和/或 GPU 上运行，并且 OpenCL 语言还支持向量类型，因此您应该能够明确利用例如 SSE3/4 指令。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-12-05T23:11:34.647

查看[Java 和 JNI 之间的性能比较，以优化计算微内核的实现](http://arxiv.org/abs/1412.6765)。他们表明，Java HotSpot VM 服务器编译器支持使用超字级并行的自动向量化，这仅限于循环内并行的简单情况。本文还将为您提供一些指导，看看您的数据大小是否足以证明采用 JNI 路线的合理性。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-01T16:57:21.600

我猜你在发现 netlib-java 之前写了这个问题 ;-) 它提供了你需要的本机 API，具有机器优化的实现，并且由于内存固定，在本机边界没有任何成本。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-12-21T17:05:39.330

Java 16 引入了 Vector API（[JEP 417](https://openjdk.java.net/jeps/417)、[JEP 414](https://openjdk.java.net/jeps/414)、[JEP 338](https://openjdk.java.net/jeps/338)）。它目前正在“孵化”（即测试版），尽管任何人都可以使用它。它可能会在 Java 19 或 20 中成为 GA。

它有点冗长，但意味着可靠和便携。

可以重写以下代码：

```
void scalarComputation(float[] a, float[] b, float[] c) {
   assert a.length == b.length && b.length == c.length;
   for (int i = 0; i < a.length; i++) {
        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;
   }
} 
```

使用向量 API：

```
static final VectorSpecies<Float> SPECIES = FloatVector.SPECIES_PREFERRED;

void vectorComputation(float[] a, float[] b, float[] c) {
    assert a.length == b.length && b.length == c.length;
    int i = 0;
    int upperBound = SPECIES.loopBound(a.length);
    for (; i < upperBound; i += SPECIES.length()) {
        // FloatVector va, vb, vc;
        var va = FloatVector.fromArray(SPECIES, a, i);
        var vb = FloatVector.fromArray(SPECIES, b, i);
        var vc = va.mul(va)
                   .add(vb.mul(vb))
                   .neg();
        vc.intoArray(c, i);
    }
    for (; i < a.length; i++) {
        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;
    }
} 
```

较新的版本（即 Java 18）正试图使用​​谓词指令摆脱最后一个 for 循环，但据推测对它的支持仍然参差不齐。

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2012-05-30T02:40:42.500

如果有任何虚拟机足够聪明，我不相信大多数人都可以进行这种优化。公平地说，大多数优化要简单得多，例如在 2 的幂时进行移位而不是乘法。mono 项目引入了他们自己的向量和其他方法，并带有原生支持以帮助提高性能。

# c# - 在 C# 中 XmlAttribute 开头的破折号

> ID：10784952
> 
> 赞同：1
> 
> 时间：2012-05-28T12:48:26.777
> 
> 标签：c#, xml, cruisecontrol.net

我希望能够做这样的事情：

```
 //buildArgs
 XmlNode buildArgs = doc.CreateElement("buildArgs");
 XmlAttribute buildArgsAtt = doc.CreateAttribute("-D:project.rc_file"); 
```

但我得到了休闲错误：

```
An unhandled exception of type 'System.ArgumentException' occurred in System.Xml.dll

Additional information: Invalid name character in '-D'. The '-' character, hexadecimal value 0x2D, cannot be included in a name. 
```

但我没有选择格式。我正在尝试自动化向 Cruisecontrol.net 配置文件 (ccnet.config) 添加新元素的过程。所以我需要把那个破折号放在那里。

这是我的代码：

```
 //create new instance of XmlDocument
        XmlDocument doc = new XmlDocument();
        doc.PreserveWhitespace = false;

        //load from file
        doc.Load(filename);

        //create node and add value
        XmlNode projet = doc.CreateNode(XmlNodeType.Element, "projet", null);
        XmlAttribute projetAtt = doc.CreateAttribute("name");
        projetAtt.Value = projectName + " " + oracleVersion;
        projet.Attributes.SetNamedItem(projetAtt);

        ...

        //buildArgs
        XmlNode buildArgs = doc.CreateElement("buildArgs");
        XmlAttribute buildArgsAtt = doc.CreateAttribute("-D:project.rc_file");
        buildArgsAtt.Value = projectName + ".rc";
        XmlAttribute buildArgsAtt2 = doc.CreateAttribute("-D:project.svn_trunk_ver");
        buildArgsAtt2.Value = trunkNb;
        XmlAttribute buildArgsAtt3 = doc.CreateAttribute("-D:project.svn_trunk");
        buildArgsAtt3.Value = trunkPath;
        buildArgs.Attributes.SetNamedItem(buildArgsAtt);
        buildArgs.Attributes.SetNamedItem(buildArgsAtt2);
        buildArgs.Attributes.SetNamedItem(buildArgsAtt3);

        //add to parent node
        projet.AppendChild(nodeWD);
        projet.AppendChild(category);
        projet.AppendChild(trigger);
        trigger.AppendChild(intTrigger);
        projet.AppendChild(sourcecontrol);
        sourcecontrol.AppendChild(trunkUrl);
        sourcecontrol.AppendChild(workingDirectory);
        projet.AppendChild(tasks);
        tasks.AppendChild(nant);
        nant.AppendChild(targetList);
        targetList.AppendChild(target);
        nant.AppendChild(buildArgs);

        //add to elements collection
        doc.DocumentElement.AppendChild(projet);

        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Indent = true;
        settings.NewLineOnAttributes = true;
        settings.Encoding = Encoding.UTF8;

        using (XmlWriter writer = XmlTextWriter.Create(filename, settings))
        {
            doc.Save(writer);
        } 
```

我检查了这个：[在 XML 元素名称](https://stackoverflow.com/questions/1478486/using-in-xml-attribute-name)和其他中使用 - ，但我没有找到可以使用的答案。

-编辑-

这是 ccnet.config 的一个例子：http: [//ccnet.sourceforge.net/CCNET/Configuring%20the%20Server.html](http://ccnet.sourceforge.net/CCNET/Configuring%20the%20Server.html)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T12:51:43.470

你根本不能，那不是一个有效的属性名称。您可以将其存储为属性值 - 只需使用 XML 允许的名称。

我很确定 CruiseControl.Net 也没有这样做，因为它无法在此类文件上使用内置解析器。

编辑：它的元素值（也称为内容）。设置如下：

```
var buildArgs = doc.CreateElement("buildArgs");
buildArgs.Value = "-D:project.rc_file"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:05:56.913

示例配置的哪一行？你是说这个吗？

```
<buildArgs>-D:cvs.executable=c:\putty\cvswithplinkrsh.bat</buildArgs> 
```

那不是属性。是元素内容。

# mercurial - 如何在 Mercurial 中使先前的 EOL 问题的提交保持一致

> ID：10784954
> 
> 赞同：1
> 
> 时间：2012-05-28T12:48:34.600
> 
> 标签：mercurial, eol

我们有一个 Mercurial 存储库，其标准使用 Unix 样式的行尾。

如果用户在提交文件时没有注意到 EOL 问题——它们可能被 diff 工具“有效地”隐藏了——那么除非立即注意到，否则很难修复。

有没有办法使用“hg convert”（或类似的）来重新创建具有一致行尾的存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T22:38:19.860

没有简单的方法可以做到这一点，但您可以使用`hg transplant`选项`--filter`以更正的形式重新应用这些变更集，然后再应用`hg strip`错误的形式。你可能会在你的*集中式*`pretxnchangegroup`回购上挂上一个钩子，以防止人们在未来推动它们，这已经足够麻烦了。

# php - Codeigniter 一种从缓存文件夹中获取类似配置的数组的简单方法

> ID：10784957
> 
> 赞同：0
> 
> 时间：2012-05-28T12:48:50.647
> 
> 标签：php, arrays, oop, codeigniter, global-variables

我有一些数组格式的数据，我将其写入文件`application/cache`夹中的文件。格式为：

```
$extra_data['some_key'] = 'some_data'; 
```

它不直接与站点配置有关，因此我不想将其放入`application/config`. 然而，在某些情况下，我需要`$extra_data`在控制器或模型中实现这一点。

我所做的是，

1）在控制器中定义变量

```
class pages_model extends CI_Model
{
  var $extra_data; 
```

2）包括缓存文件并将其与上述变量相关联，

```
 function __construct()
  {
     parent::__construct();
     @include_once APPPATH . "cache/extra_data.php";
     $this->extra_data = $extra_data;
  } 
```

3）获取类变量作为变量然后使用它：

```
function func_name()
{
  $extra_data = $this->extra_data; 
```

这是我正在使用的方式，但我不确定它是正确还是有效的方式。

感谢您的任何想法和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:39:17.427

用 cache() 扩展 Loader 库怎么样？

然后你可以这样称呼它：

```
$this->load->cache('extra_data'); 
```

**库/MY_Loader.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Loader extends CI_Loader {

    /* Load custom cache values */
    function cache($str = '') {

        $CI =& get_instance();

        $data = array();
        $path = APPATH . "cache/{$str}.php";
        if (file_exists($path)) {

            include $path;
            $data = $extra_data;

        }

        $CI->$str = $data;

    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:57:55.603

为什么不在配置文件夹中创建一个名为 cache.php 的文件，只需像这样放置数据

```
$config['some_key'] = 'some_data'; 
```

然后你可以在你的构造中使用这个代码

```
 $this->load->config('cache', TRUE);
    $extra_data = $this->config->item('cache') 
```

我知道它不是配置的东西，但是由于您将它们放在单独的文件中，因此使用它们会更好

# python - 制作列表 oneliner -python 的列表

> ID：10784959
> 
> 赞同：0
> 
> 时间：2012-05-28T12:49:06.513
> 
> 标签：python, list

我有一个清单

```
l=[(1,2),(1,6),(3,4),(3,6),(1,4),(4,3)] 
```

我想返回一个列表，其中包含每个元组中第一个数字的列表。像这样的东西：

```
[[2,4,6],[4,6],[3]] 
```

制作一个迭代列表的程序并编写一个完整的函数很容易。我想找到一个 oneliner - python 的方式来做这件事。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T12:51:44.123

```
>>> from itertools import groupby
>>> from operator import itemgetter
>>> L = [(1,2), (1,6), (3,4), (3,6), (1,4), (4,3)]
>>> [[y for x, y in v] for k, v in groupby(sorted(L), itemgetter(0))]
[[2, 4, 6], [4, 6], [3]] 
```

**解释**

这通过使用[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby). `groupby`在可迭代对象中查找**连续**组，通过键、组对返回迭代器。

给定的参数`groupby`是一个键函数，`itemgetter(0)`它为每个元组调用，返回第一项作为键`groupby`。

`groupby`**按原始顺序**对元素进行分组，因此如果要按列表中的第一个数字进行分组，则必须首先对其进行排序，以便`groupby`可以按升序遍历第一个数字并实际对它们进行分组。

```
>>> sorted(L)
[(1, 2), (1, 4), (1, 6), (3, 4), (3, 6), (4, 3)] 
```

有一个排序列表，您可以在其中清楚地看到如果您回顾最终输出将创建的组。现在您可以使用`groupby`显示键、组对。

```
[(1, <itertools._grouper object at 0x02BB7ED0>), (3, <itertools._grouper object at 0x02BB7CF0>), (4, <itertools._grouper object at 0x02BB7E30>)] 
```

这是按第一个数字分组的排序项目。`groupby`将每个键的组作为迭代器返回，这很好而且非常有效，但是对于这个例子，我们将把它转换为 a`list`以确保它正常工作。

```
>>> [(k, list(v)) for k,v in groupby(sorted(L), itemgetter(0))]
[(1, [(1, 2), (1, 4), (1, 6)]), (3, [(3, 4), (3, 6)]), (4, [(4, 3)])] 
```

这几乎是正确的，但所需的输出仅显示每个列表中组中的第二个数字。因此，以下实现了预期的结果。

```
[[y for x, y in v] for k, v in groupby(sorted(L), itemgetter(0))] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:23:46.890

```
l = [(1, 2), (1, 6), (3, 4), (3, 6), (1, 4), (4, 3)]

d = {}
for (k, v) in l:
    d.setdefault(k, []).append(v)

print d.values() 
```

我知道它不是单行，但也许它比单行更容易阅读。

# google-app-engine - Google App Engine Java 后端应用程序版本

> ID：10784962
> 
> 赞同：4
> 
> 时间：2012-05-28T12:49:21.677
> 
> 标签：google-app-engine

我是 GAE Java 后端的新手，我不确定后端与应用程序版本的关系。我已经阅读了 GAE 文档并进行了很多搜索，但没有发现任何有用的信息。

我的问题是：

后台运行的应用程序版本是如何从已部署的版本中选择出来的？是否选择与前端完全相同，即新的后端实例默认使用默认版本？

如果是这样，那么命令`appcfg backends update [backend]`究竟更新了什么？只是配置文件？

我真的认为这应该在 GAE 文档中更清楚地说明。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T15:54:50.813

后端没有版本：

1.  您可以在管理控制台中为前端实例选择默认版本，但不能为后端执行此操作。

2.  更改前端实例的默认版本对后端实例没有任何作用。

3.  后端只有一个版本 - 通过`appcfg`.

因此，当您更改影响前端和后端实例的代码时，您需要上传两次。

# php - 如何使用 PHPUnit 在 Symfony2 中设置大量数据库单元测试？

> ID：10784973
> 
> 赞同：43
> 
> 时间：2012-05-28T12:50:18.967
> 
> 标签：php, symfony, doctrine-orm, phpunit

我对测试世界很陌生，我想确保我走在正确的轨道上。

我正在尝试使用*phpunit在**symfony2*项目中设置单元测试。

 **PHPUnit*工作正常，简单的默认控制器测试工作正常。（然而，这不是关于功能测试，而是对我的应用程序进行单元测试。）

不过，我的项目严重依赖数据库交互，据我从[phpunit 的文档](http://www.phpunit.de/manual/current/en/database.html)中了解到，我应该建立一个基于的类`\PHPUnit_Extensions_Database_TestCase`，然后为我的数据库创建固定装置并从那里开始工作。

然而，*symfony2*只提供了一个仅从开箱即用的`WebTestCase`类中扩展的类`\PHPUnit_Framework_TestCase`。

所以我是否应该假设我应该创建自己的`DataBaseTestCase`大部分副本`WebTestCase`，唯一的区别是它扩展`\PHPUnit_Extensions_Database_TestCase`并实现了它的所有抽象方法？

或者关于以数据库为中心的测试，是否有另一个“内置”推荐的*symfony2工作流程？*

由于我想确保我的模型存储和检索正确的数据，我不想最终意外地测试*教义的细节。*

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-20T08:34:20.017

我从来没有使用过`PHPUnit_Extensions_Database_TestCase`，主要是因为这两个原因：

*   它不能很好地扩展。如果您为每个测试都设置和拆除数据库，并且您有一个严重依赖数据库的应用程序，那么您最终会一遍又一遍地创建和删除相同的模式。
*   我喜欢不仅在我的测试中而且在我的开发数据库中拥有我的固定装置，甚至生产需要一些固定装置（初始管理员用户或产品类别或其他）。将它们放在只能用于 phpunit 的 xml 中对我来说似乎不合适。

**理论上我的方法...**

我将[教义/教义固定装置捆绑包](https://github.com/doctrine/DoctrineFixturesBundle)用于固定装置（无论出于何种目的），并使用所有固定装置设置整个数据库。然后，我针对该数据库执行所有测试，并确保在测试更改数据库时重新创建数据库。

优点是如果测试只读取但不更改任何内容，我不需要再次设置数据库。对于更改，我必须删除它并再次创建它，或者确保还原更改。

我使用 sqlite 进行测试，因为我可以设置数据库，然后复制 sqlite 文件并用干净的文件替换它以恢复原始数据库。这样我就不必删除数据库，创建它并再次加载所有固定装置以获得干净的数据库。

**...在代码中**

我写了[一篇关于如何使用 symfony2 和 phpunit 进行数据库测试](http://sgoettschkes.blogspot.com/2012/06/symfony2-test-database-best-pratice.html)的文章。

虽然它使用 sqlite，但我认为可以轻松地进行更改以使用 MySQL 或 Postgres 或其他任何东西。

**进一步思考**

以下是一些可能有效的其他想法：

*   我曾经读过一个测试设置，在你使用数据库之前，你开始一个事务（在 setUp 方法中），然后使用 tearDown 回滚。这样你就不需要再次设置数据库，只需要初始化一次。
*   我上面描述的设置的缺点是每次执行 phpunit 时都会设置数据库，即使您只运行一些没有数据库交互的单元测试。我正在尝试一种设置，其中我使用一个全局变量来指示数据库是否已设置，然后在测试中调用一个方法，该方法检查此变量并在数据库尚未发生时初始化数据库。这样，只有当测试需要数据库时才会发生设置。
*   sqlite 的一个问题是它在某些极少数情况下与 MySQL 的工作方式不同。我曾经遇到过一个问题，即 MySQL 和 sqlite 中的某些行为不同，导致在 MySQL 一切正常时测试失败。我不记得它到底是什么了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-17T17:44:11.187

tl;博士：

*   当且仅当您想走完整的功能测试路线时，我建议您查找[Sgoettschkes 的答案](https://stackoverflow.com/a/12508889/457268)。
*   如果您想对您的应用程序进行单元测试并且必须测试与数据库交互的代码，请继续阅读或直接跳转到[symfony2 文档](https://symfony.com/doc/2.8/testing/database.html)
    （还有一个更新的版本也讨论了[使用 symfony5 的夹具进行测试](http://symfony.com/doc/current/cookbook/testing/database.html)）

* * *

我最初的问题中的某些方面清楚地表明，我对单元测试和功能测试之间的区别缺乏理解。（正如我所写的，我想对应用程序进行单元测试，但同时也在谈论控制器测试；这些是定义上的功能测试）。

单元测试只对服务有意义，对存储库没有意义。这些服务可以使用实体管理器的模拟。（我什至会说：如果可能的话，编写只期望将实体传递给它们的服务。然后您只需要创建这些实体的模拟，您的业务逻辑的单元测试就变得非常简单。）

我的应用程序的实际用例很好地反映在 symfony2 文档中，其中[介绍了如何测试与数据库交互的代码](https://symfony.com/doc/2.8/testing/database.html)。

他们为服务测试提供了这个示例：

服务等级：

```
use Doctrine\Common\Persistence\ObjectManager;

class SalaryCalculator
{
    private $entityManager;

    public function __construct(ObjectManager $entityManager)
    {
        $this->entityManager = $entityManager;
    }

    public function calculateTotalSalary($id)
    {
        $employeeRepository = $this->entityManager
            ->getRepository('AppBundle:Employee');
        $employee = $employeeRepository->find($id);

        return $employee->getSalary() + $employee->getBonus();
    }
} 
```

服务测试类：

```
namespace Tests\AppBundle\Salary;

use AppBundle\Salary\SalaryCalculator;
use AppBundle\Entity\Employee;
use Doctrine\ORM\EntityRepository;
use Doctrine\Common\Persistence\ObjectManager;

class SalaryCalculatorTest extends \PHPUnit_Framework_TestCase
{
    public function testCalculateTotalSalary()
    {
        // First, mock the object to be used in the test
        $employee = $this->getMock(Employee::class);
        $employee->expects($this->once())
            ->method('getSalary')
            ->will($this->returnValue(1000));
        $employee->expects($this->once())
            ->method('getBonus')
            ->will($this->returnValue(1100));

        // Now, mock the repository so it returns the mock of the employee
        $employeeRepository = $this
            ->getMockBuilder(EntityRepository::class)
            ->disableOriginalConstructor()
            ->getMock();
        $employeeRepository->expects($this->once())
            ->method('find')
            ->will($this->returnValue($employee));

        // Last, mock the EntityManager to return the mock of the repository
        $entityManager = $this
            ->getMockBuilder(ObjectManager::class)
            ->disableOriginalConstructor()
            ->getMock();
        $entityManager->expects($this->once())
            ->method('getRepository')
            ->will($this->returnValue($employeeRepository));

        $salaryCalculator = new SalaryCalculator($entityManager);
        $this->assertEquals(2100, $salaryCalculator->calculateTotalSalary(1));
    }
} 
```

这类测试不需要测试数据库，只需要模拟。

因为测试业务逻辑很重要，而不是持久层。

只有对于功能测试来说，拥有自己的测试数据库才有意义，之后应该建立和拆除，最大的问题应该是：

功能测试什么时候有意义？

我曾经认为*测试所有的东西*是正确的答案；然而，在使用了许多本身几乎没有测试驱动开发的遗留软件之后，我变得更加~~懒惰~~务实，并认为某些功能是有效的，直到被错误证明不是。

假设我有一个应用程序可以解析 XML，从中创建一个对象，并将这些对象存储到数据库中。如果已知将对象存储到数据库的逻辑可以工作（例如：公司需要数据并且到目前为止还没有损坏），即使该逻辑是一大堆丑陋的废话，也没有*迫在眉睫*的需要测试。因为我需要确保我的 XML 解析器提取正确的数据。我可以根据经验推断将存储正确的数据。

在某些情况下，功能测试非常重要，例如，如果要编写一个在线商店。将购买的物品存储到数据库中将是业务关键，在这里使用整个测试数据库进行功能测试是绝对有意义的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T16:12:55.283

你可以使用这个类：

```
<?php

namespace Project\Bundle\Tests;

require_once dirname(__DIR__).'/../../../app/AppKernel.php';

use Doctrine\ORM\Tools\SchemaTool;

abstract class TestCase extends \PHPUnit_Framework_TestCase
{
/**
* @var Symfony\Component\HttpKernel\AppKernel
*/
protected $kernel;

/**
 * @var Doctrine\ORM\EntityManager
 */
protected $entityManager;

/**
 * @var Symfony\Component\DependencyInjection\Container
 */
protected $container;

public function setUp()
{
    // Boot the AppKernel in the test environment and with the debug.
    $this->kernel = new \AppKernel('test', true);
    $this->kernel->boot();

    // Store the container and the entity manager in test case properties
    $this->container = $this->kernel->getContainer();
    $this->entityManager = $this->container->get('doctrine')->getEntityManager();

    // Build the schema for sqlite
    $this->generateSchema();

    parent::setUp();
}

public function tearDown()
{
    // Shutdown the kernel.
    $this->kernel->shutdown();

    parent::tearDown();
}

protected function generateSchema()
{
    // Get the metadatas of the application to create the schema.
    $metadatas = $this->getMetadatas();

    if ( ! empty($metadatas)) {
        // Create SchemaTool
        $tool = new SchemaTool($this->entityManager);
        $tool->createSchema($metadatas);
    } else {
        throw new Doctrine\DBAL\Schema\SchemaException('No Metadata Classes to process.');
    }
}

/**
 * Overwrite this method to get specific metadatas.
 *
 * @return Array
 */
protected function getMetadatas()
{
    return $this->entityManager->getMetadataFactory()->getAllMetadata();
}
} 
```

然后你可以测试你的实体。像这样的东西（假设你有一个实体用户）

```
//Entity Test
class EntityTest extends TestCase {

    protected $user;

    public function setUp()
    {
         parent::setUp();
         $this->user = new User();
         $this->user->setUsername('username');
         $this->user->setPassword('p4ssw0rd');

         $this->entityManager->persist($this->user);
         $this->entityManager->flush();

    }

    public function testUser(){

         $this->assertEquals($this->user->getUserName(), "username");
         ...

    }

} 
```

希望这有帮助。

资料来源：theodo.fr/blog/2011/09/symfony2-unit-database-tests*

# git - 为 git web 主机打包代码子集

> ID：10784976
> 
> 赞同：1
> 
> 时间：2012-05-28T12:50:23.033
> 
> 标签：git, github

我想发布一个我一直在从事的大型软件项目的一小部分。我已将整个项目作为压缩档案发布。我现在想在 GitHub.com 上发布这个小子集。

git 中用于打包代码子集并在 git web 主机上共享该独立子集的机制是什么？我写了一个脚本来提取完整​​项目之外的相关文件，但是不用说，我不想将提取后的文件放在 git 下。

**编辑**将“git web host”替换为“GitHub.com”以获得更具体的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:16:08.173

可能您应该将您的子集变成一个[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)，该子模块将是一个已发布的项目（如果我正确解析“git web host”）。[您可以使用git-subtree](https://github.com/apenwarr/git-subtree)从您现有的仓库中提取它。然后，您可能需要`git filter-branch`在现有存储库上运行以擦除从`git-subtree`“主”历史中提取的子集；有关更多信息，请参阅[此答案](https://stackoverflow.com/a/359759/720999)。

PS 请注意，由于某些版本`git-subtree`现在是 Git 的一部分（在其`contrib/`目录中，IIUC）。

# ruby-on-rails - 如何使用 Paperclip gem 设置纵向图像的尺寸

> ID：10784979
> 
> 赞同：0
> 
> 时间：2012-05-28T12:50:27.820
> 
> 标签：ruby-on-rails, paperclip

我正在使用回形针 gem 上传图像，我想同时上传横向和纵向图像。任何人都可以帮助我如何设置这两个图像的尺寸。

我的代码是：

```
has_attached_file :media,
  :styles => {:yplarge=>"440x300>"},
  :path => ":rails_root/public/system/:class/:id/:style/:basename.:extension", 
  :url  => "/system/buzz_pictures/:id/:style/:basename.:extension"

   validates_attachment_size :media, :less_than => 2.megabytes, 
     :message => "Please attach a smaller picture."
   validates_attachment_content_type :media, 
     :content_type=>['image/jpeg', 'image/png', 'image/gif'] 
```

此代码适用于横向图像，但不适用于纵向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:30:49.523

下面的解决方案将保存 2 种样式，如果是横向的，纵向旋转 90 度，反之亦然。

```
has_attached_file :media,
  :styles => {:landscape => Proc.new { |a| { :geometry => "440x300>", :rotation => 90 unless a.landscape? } }, 
              :portrait => Proc.new { |a| { :geometry => "300x440>", :rotation => 90 if a.landscape? } } }
  :path => ":rails_root/public/system/:class/:id/:style/:basename.:extension", 
  :url  => "/system/buzz_pictures/:id/:style/:basename.:extension",
  :processors => [:rotator]

def landscape?
  Paperclip::Geometry.from_file(to_file(:original)).horizontal?
end

module Paperclip
  class Rotator < Thumbnail
    def transformation_command
      if rotate_command
        super + rotate_command
      else
        super
      end
    end

    def rotate_command
      if @options[:rotation]
        " -rotate #{ @options[:rotation] }"
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:04:56.073

只需添加另一种样式：

```
:styles => {
  :yplarge=>"440x300>",
  :portrait=>"300X440>"
} 
```

根据需要更改值。请注意，如果图像小于给定尺寸，则不会调整其大小。要更改该行为，请将 替换`>`为`#`。这将强制将图像调整为指定的尺寸。

有关使用不同样式的信息，请参阅回形针文档：

[https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation](https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation)

# sql - 复杂的 SQL 查询帮助

> ID：10784985
> 
> 赞同：0
> 
> 时间：2012-05-28T12:51:04.810
> 
> 标签：sql

我有一个数据库，其中包含有关到达/离开车站的公共汽车的信息。在我的应用程序中，我需要显示用户选择的车站的所有发车时间。

这意味着我必须识别通过所选车站的每条线路。我通过以下查询做到了这一点：

```
SELECT DISTINCT LinePaths.TimetableID 
               ,Lines.LineName AS [Line]
               ,Timetable.Heading
               ,LinePaths.Departure
               ,Regime.Name AS [Regime]
FROM            LinePaths
INNER JOIN Timetables ON Timetables.TimetableID = LinePaths.TimetableID
INNER JOIN Lines ON Timetable.LineID = Lines.LineID
INNER JOIN Stations ON LinePaths.Station = Station.StationID
INNER JOIN Regimes ON Timetables.Regime = Regimes.RegimeID
WHERE Station = @Station 
```

问题是`Timetable.Heading`我不需要显示公共汽车前往的最后一站的名称。这些是我可以使用的表的架构：

*   `Stations - ID, Name`
*   `Lines - LineID, LineName`
*   `Timetable - TimetableID, LineID, Heading, Regime` （`Regime`定义巴士在哪几天开车）
*   `LinePaths - ID, TimetableID, SN, Arrival, Departure, StationID`（这`SN`是一个序列号，它定义了特定路径上的站点顺序（总线将按特定顺序到达这些站点）。）

所以，`Timetable.Heading`我需要一个`Stations.Name`, 而不是我的问题。

该列必须代​​表公共汽车要去的最终车站（对于每条线路），所以我必须以某种方式识别最终车站（再次对于通过所选车站的每条线路）。为此，我必须使用`LinePaths`这张桌子。在该表中，数据按 分组`TimetableID`，因此具有相同值的条目按表示公共汽车到达车站顺序`TimetableID`的值排序（如下所示：） - 这意味着根据到时间表将到达带有 StationID 的车站，离开在，并且该车站是这条路线上的车站（是 的 ID，对于此查询并不重要）。`SN``xxxxx, 1111, 3, 8:15, 8:20, 9999``1111``8:15``9999``8:20``3rd``xxxxx``LinePath`

所以，最后，我的问题是 - 我如何使用 SQL 获取以下模式中的数据：

*   `FinalStationName`,
*   `Departure(from selected station)`,
*   `Regime`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:21:27.047

最有效的方法是创建一个带有 TimetableID 和最终站名称的新表，并将此表与其他表连接起来，但如果您确实需要在没有其他表的情况下获取值，则您需要新来计算最终站每个时刻表的车站。该查询获取每个时刻表的id和最后一站的名称

```
SELECT li.TimetableID, s.Name
FROM LinePaths li INNER JOIN
    (SELECT TimetableID, max(SN) as SN FROM LinePaths) as aux
ON aux.TimetableID = li.TimetableID AND aux.SN = li.SN
INNER JOIN Stations s
ON s.ID = li.StationID 
```

您可以将其用作子查询并通过 TimetableID 将其加入您的查询。不是最有效的事情，但它应该工作。

# facebook - 从应用程序本身发送邀请

> ID：10784991
> 
> 赞同：1
> 
> 时间：2012-05-28T12:51:49.620
> 
> 标签：facebook, invite

我们如何向我们应用程序的用户发送 Facebook 邀请？通常我们只收到来自朋友的邀请，而不是直接来自应用程序本身。

几个月前我收到了来自 The Sims Social 的邀请，我想开发同样的东西，这里是截图：

![模拟人生邀请](../Images/eb2a60dcd7274aee469151c56d4c9571.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:44:42.410

这种请求称为[App to User Request](https://developers.facebook.com/docs/requests/#app_to_user)。只有 Facebook.com 上的应用程序或移动应用程序可以使用和发送此类请求。发送它们非常简单，只需`/USER_ID/apprequests`使用您的应用访问令牌发出 HTTP POST 请求。一旦它们被用户接受并阅读当前请求列表，您还需要处理删除它们。它们都记录在[用户对象](https://developers.facebook.com/docs/reference/api/user/#apprequests)文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:45:22.593

您需要获取应用程序访问令牌，然后您才能发送给正在使用此应用程序的用户。

仅供参考：[作为应用程序的身份验证](https://developers.facebook.com/docs/authentication/applications/)

# android - 在 GridView 中显示 DB 内容

> ID：10784992
> 
> 赞同：1
> 
> 时间：2012-05-28T12:51:50.490
> 
> 标签：android, database, android-gridview

我在 DB 文件中创建了 2 列和 3 行。现在我需要在`GridView`. 代码中没有错误，但在模拟器中出现错误`"Force close"`。下面是代码：

```
public class Grid_testActivity extends Activity {

    // We need some kind of Adapter to made the connection between ListView UI component and SQLite data set.
    //private ArrayAdapter<String> uGraduateListAdapter;    
 // We need this while we read the query using Cursor and pass data
    //private ArrayList<UndergraduateDetailsPojo> pojoArrayList;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

     // Initialize UI components
       GridView grid = (GridView) findViewById(R.id.grid); 
       TextView txt= (TextView) findViewById(R.id.textView1);

 dbHelper db = new  dbHelper(this);

 Log.d("read data","reading");
 List<UndergraduateDetailsPojo> c=db.getAllContacts(); 

        grid.setAdapter((ListAdapter) txt);
    }} 
```

DBHelper 类：

```
public class dbHelper extends SQLiteOpenHelper {

    static String DB_PATH = "/data/data/com.apcog/databases/";

    //database name
    static String DB_NAME = "SAMPLE.sqlite";

    //define table name
    private static final String DB_TABLE="TEMP";

    //define table entries
    //private static final String ID="ID";
    //private static final String NAME="NAME";

    public dbHelper(Context context) 
    {
        super(context, DB_NAME, null, 1);
    }

public dbHelper(Context context, boolean copyDatabase) 
    {
this(context);
}

private boolean checkDataBaseExistence() 
        {

            // database to be verified
            SQLiteDatabase dbToBeVerified = null;

            try 
            {
                // get database path
                String dbPath = DB_PATH + DB_NAME;
                // try to open the database
                dbToBeVerified = SQLiteDatabase.openDatabase(dbPath, null,
                        SQLiteDatabase.OPEN_READONLY);

            } 
            catch (SQLiteException e) 
            {
                // do nothing since the database does not exist
            }

            // in case it exists, close it
            if (dbToBeVerified != null) 
            {
                // close DB
                dbToBeVerified.close();

            }

            // in case there is a DB entity, the DB exists
            return dbToBeVerified != null ? true : false;
        }

        public List<UndergraduateDetailsPojo> getAllContacts() {
            List<UndergraduateDetailsPojo> contactList = new ArrayList<UndergraduateDetailsPojo>();
            // Select All Query
            String selectQuery = "SELECT  * FROM " + DB_TABLE;

            SQLiteDatabase db = this.getWritableDatabase();
            Cursor cursor = db.rawQuery(selectQuery, null);

            // looping through all rows and adding to list
            if (cursor.moveToFirst()) {
                do {
                    UndergraduateDetailsPojo contact = new UndergraduateDetailsPojo();
                    contact.setID(cursor.getString(0));
                    contact.setName(cursor.getString(1));

                    // Adding contact to list
                    contactList.add(contact);
                } while (cursor.moveToNext());
            }

            // return contact list
            return contactList;
        }

        // Getting Count
        public int getCount() {
            String countQuery = "SELECT  * FROM " + DB_TABLE;
            SQLiteDatabase db = this.getReadableDatabase();
            Cursor cursor = db.rawQuery(countQuery, null);
            cursor.close();

            // return count
            return cursor.getCount();
        }

    } 
```

另一类：

```
public class UndergraduateDetailsPojo {

    private String _ID;
    private String _NAME;

    public UndergraduateDetailsPojo()
    {

    }

    public UndergraduateDetailsPojo(String id,String name){

            this._ID=id;
            this._NAME = name;
    }

    //getting ID
    public String getID() {
        return this._ID;
    }

    //setting ID
    public void setID(String ID) {
        this._ID = ID;
    }

    //getting name 
    public String getName() {
        return this._NAME;  
    }

    //setting name
    public void setName(String NAME) {
        this._NAME = NAME;
    }

} 
```

这是日志猫：

```
05-28 19:22:26.372: WARN/dalvikvm(3971): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971): FATAL EXCEPTION: main
05-28 19:22:26.382: ERROR/AndroidRuntime(3971): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.apcog/com.apcog.Grid_testActivity}: java.lang.ClassCastException: java.util.ArrayList
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at android.os.Looper.loop(Looper.java:123)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at java.lang.reflect.Method.invokeNative(Native Method)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at java.lang.reflect.Method.invoke(Method.java:521)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at dalvik.system.NativeStart.main(Native Method)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971): Caused by: java.lang.ClassCastException: java.util.ArrayList
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at com.apcog.Grid_testActivity.onCreate(Grid_testActivity.java:44)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-28 19:22:26.382: ERROR/AndroidRuntime(3971):     ... 11 more
05-28 19:22:26.402: WARN/ActivityManager(70):   Force finishing activity com.apcog/.Grid_testActivity
05-28 19:22:26.432: INFO/UsageStats(70): Deleting usage file : usage-20120514
05-28 19:22:26.722: DEBUG/dalvikvm(210): GC_FOR_MALLOC freed 8714 objects / 471808 bytes in 2976ms
05-28 19:22:26.932: WARN/ActivityManager(70): Activity pause timeout for HistoryRecord{45076730 com.apcog/.Grid_testActivity}
05-28 19:22:28.172: INFO/Process(3971): Sending signal. PID: 3971 SIG: 9
05-28 19:22:28.202: WARN/InputManagerService(70): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@450aa150
05-28 19:22:28.222: INFO/ActivityManager(70): Process com.apcog (pid 3971) has died.
05-28 19:22:32.691: DEBUG/dalvikvm(195): GC_EXPLICIT freed 156 objects / 7480 bytes in 132ms
05-28 19:22:37.265: WARN/ActivityManager(70): Activity destroy timeout for HistoryRecord{45076730 com.apcog/.Grid_testActivity} 
```

我刚刚添加了try..catch...我正在获取textview，但其中没有数据...这是显示数据库内容的正确方法...

尝试 {

```
 UndergraduateDetailsPojo(this,android.R.layout.simple_list_item_1,cursor,); 
```

dbHelper db = 新的 dbHelper(this);

Log.d("读取数据","正在读取"); 列表 c=db.getAllContacts();

```
 grid.setAdapter((ListAdapter) txt);
}
   catch(Exception e)
   {

   } 
```

# c# - RavenDB：在保存大量数据时，处理 128 项限制的最佳实践是什么？

> ID：10784993
> 
> 赞同：1
> 
> 时间：2012-05-28T12:51:52.500
> 
> 标签：c#, ravendb

我正在将保存在 SqlServer 数据库中的文档传输到 RavenDB 数据库。这个过程很简单，但根据 RavenDB 的“安全第一”原则，实际上只存储了前 128 个文档。

我理解为什么会这样，我也知道这个限制可以针对整个文档存储进行调整，但是，鉴于在给定操作中存储超过 128 个文档并不少见，我想知道什么是最好的实践是什么？

这是我的代码，展示了我如何绕过限制的示例。有没有更优雅的方式？

```
public static void CopyFromSqlServerToRaven(IDocumentSession db)
{
    var counter = 0;
    using (var connection = new SqlConnection(SqlConnectionString))
    {
        var command = new SqlCommand(SqlGetContentItems, connection);
        command.Connection.Open();
        using (var reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                counter++;
                db.Store(new ContentItem
                            {
                                Id = reader["Id"].ToString(),
                                Title = reader["Name"].ToString(),
                                Description = reader["ShortDescription"].ToString()
                            });
                if (counter < 128) continue;
                db.SaveChanges();
                counter = 0;
            }
        }
        db.SaveChanges();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:18:31.547

您可以在一次操作中存储所需的文档数量。无需分块保存更改。

# html - 边框半径在 IE9 中不起作用

> ID：10784999
> 
> 赞同：0
> 
> 时间：2012-05-28T12:52:16.827
> 
> 标签：html, css

边框半径在 IE9 中不起作用。我在我的项目中使用了以下属性。我还添加了.HTC文件

```
-moz-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
-webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
behavior: url(Styles/border-radius.htc); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T17:40:18.363

```
.myclass {
 border-style: solid;
 border-width: 2px;
 -moz-border-radius: 15px;
 -webkit-border-radius: 15px;
 border-radius: 15px;
} 
```

IE9 将使用默认的边框半径，所以只要确保在所有调用边框半径的样式中都包含它。然后您的网站将准备好支持 IE9。

```
-moz-border-radius is for Firefox, -webkit-border-radius is for Safari and Chrome. 
```

此外：不要忘记声明您的 IE 编码是 ie9：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

一些懒惰的开发者有`<meta http-equiv="X-UA-Compatible" content="IE=7" />`. 如果该标签存在，border-radius 将永远不会在 IE 中工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T14:23:18.127

采用

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />

 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-24T08:45:44.803

这是一个旧线程，但它对我没有帮助。我的解决方案是将 HTML 5 doctype 声明添加到页面：

<!DOCTYPE html>

其他 HTML doctype 声明也可以工作 - 我的问题是我生成的页面根本没有 doctype 声明。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T12:55:38.763

你需要把它放在你的 HTML 标题中

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

在这里发现的答案[ie9边界半径](https://stackoverflow.com/questions/5381446/ie9-border-radius)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T12:58:50.590

`border-radius.htc`在 ie9 中破坏了正常的边界半径，在 9 以下的 ie 版本中包含边界半径.htc 文件`conditional comments`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T12:58:51.637

在 IE9 边框半径中没有任何行为文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-28T13:00:49.540

这个答案也将有助于较低版本的ie，如ie6、7、8。

使用 CSS Pie -> [http://css3pie.com/](http://css3pie.com/)

这将允许您正常指定边框半径，然后在您的 css 中包含 pie.htc 脚本。这神奇地使它在 IE6 中工作。看那个！

这也适用于其他 CSS3 属性，如背景渐变。

您也可以尝试将其添加到您的脑海中->

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

祝你好运！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-28T16:31:24.630

边框半径支持 ie-7、ie-8、ie-9 通过 javascript 查看本教程如何在 ie [http://davidwalsh.name/css-rounded-corners中显示边框半径](http://davidwalsh.name/css-rounded-corners)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-10T13:13:32.930

如果您同时使用边界半径和过滤器： progid:DXImageTransform.Microsoft.gradient( startColorstr='######', endColorstr='######',GradientType=0 )，只需注释这个过滤器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-30T09:57:14.403

无论你包含什么或你写什么border-radius 在ie9 中都不起作用。更改浏览器模式或文档模式永远不是解决方案，因为它位于客户端。所以恐怕我的朋友没有合理的方法可以使边界半径在 ie9 中正常工作，除非您借助 javascript。