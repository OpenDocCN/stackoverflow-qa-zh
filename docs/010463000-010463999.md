# StackOverflow 问答 10463000-10463999

# c++ - C++ 头文件中的循环依赖。怎么找？

> ID：10463001
> 
> 赞同：4
> 
> 时间：2012-05-05T14:57:09.587
> 
> 标签：c++, header-files, circular-dependency

我想你们都知道什么是标头中的循环依赖。它的结果通常如下所示：

错误：未在此范围内声明“MyClass”

如果程序很短，很清楚该怎么做。但是如果程序有几十个文件......

我的问题是“是否有一些**算法**可以找到循环依赖？” 我的意思是一些特定的步骤，它们会让你成功，而不仅仅是“查看代码直到找到它”。

可能是一些程序，它是做什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:09:37.950

我知道的至少一个编译器（Visual C++）有一个名为“显示包含”的选项，可以帮助您跟踪包含顺序。这可以帮助您找出循环发生的位置。如果您的编译器没有这样的选项，您可以将#pragma 消息（或等效的）添加到文件的开头以跟踪它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:28:47.770

文档工具 Doxygen 可以生成显示依赖关系的图表。我用它来显示不同库的头文件之间的循环依赖关系。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T16:20:29.920

> 但是如果程序有几十个文件......

然后它仍然很短。转到编译器错误消息中提到的行，查看类是否在此处可用。如果 *.cpp 出现问题，#include 对应的文件。如果标题出现问题，请添加前向声明（`class MyClass;`）。如果前向声明不充分，则使用声明 myclass 的#include 文件。如果这导致循环依赖，那么每个标头的类型太多。将标头拆分为几个较小的标头。一种方法是为整个程序的每个标头设置一个类，但在许多情况下，这可能是矫枉过正。

# python - Django的模板问题

> ID：10463002
> 
> 赞同：0
> 
> 时间：2012-05-05T14:57:17.743
> 
> 标签：python, django, templates, django-templates

我正在尝试使用 django 创建一个模板，但是当我在 Python Shell 中执行这些语句时

```
>>> from django.template import Template
>>>t = Template("My name is {{ my_name }}.") 
```

它给了我这个错误

```
 Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    t = Template("Mi nombre es {{ mi_nombre }}.")
  File "django\template\base.py", line 123, in __init__
    if settings.TEMPLATE_DEBUG and origin is None:
  File "django\utils\functional.py", line 184, in inner
    self._setup()
  File "django\conf\__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:19:18.233

不要直接运行 python shell，而是使用 Django 的包装器。

cd 到你的项目目录，然后运行

```
python manage.py shell 
```

这将为您提供一个交互式 shell，其中设置了 Django 并导入了您的设置。

还有其他方法可以实现这一目标，但这应该会让你继续前进。

# jquery - 将文本区域中的选定文本大写

> ID：10463004
> 
> 赞同：1
> 
> 时间：2012-05-05T14:57:32.480
> 
> 标签：jquery, capitalize, selectedtext

我无法通过 onClick 将 textareas 中的选定文本大写。

经过数小时的谷歌搜索后，我发现没有内置方法可以在 texareas 中获取选择文本。

我在[替换文本的文本区域中找到了替换选定](https://stackoverflow.com/questions/3964710/replacing-selected-text-in-the-textarea)文本。

如何调整所选文本的大小写？

测试：http: [//jsfiddle.net/tDYe4/2/](http://jsfiddle.net/tDYe4/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:39:36.447

这是您的功能的修改版本。更新了你的[小提琴](http://jsfiddle.net/tDYe4/2/)。

```
function capitalizeSelectedText(el) {
    var sel       = getInputSelection(el),
        val       = el.value,
        selection = val.substring(sel.start, sel.end);

    if(!selection) return;

    var new_text = val.substring(0, sel.start) + selection.toUpperCase() + val.substring(sel.end);
    el.value = new_text;
} 
```

# android - 安卓 SDK。通过卫星/GPS 发送数据

> ID：10463005
> 
> 赞同：0
> 
> 时间：2012-05-05T14:57:34.773
> 
> 标签：android, android-2.2-froyo, android-networking

我有一个越野应用程序，主要供越野骑手和步行者用来查找其他人走过的小径。

应用示例可以在这里找到：[http ://www.youtube.com/watch?v=Wmk3cA2i2vI](http://www.youtube.com/watch?v=Wmk3cA2i2vI)

作为标准，数据可以通过 wifi 或由 Android 操作系统控制的信号塔发送。

因为您可以从 wifi 网络移动到 wifi 网络，再到手机信号塔，所以当手机断开连接并连接到另一个网络时，我的应用程序的用户将获得巨大的延迟。

我想知道的是，当我通过设置“小区状态”选项或其他方式进行选择时，是否也可以通过 GPS/卫星网络发送数据？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:00:37.430

据我所知，您无法通过 GPS 发送数据，GPS 不提供数据发送功能。您实际上只能使用 wifi、GPRS 或 WAP 互联网连接来发送数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:01:41.937

不可以。没有人可以通过 GPS 卫星发送数据，甚至是拥有这些卫星的美国空军也不行。他们不是那样做的。

有卫星通信系统（见 inmarsat、globalstar、iridium）。这些都不能被标准的安卓手机使用。这些系统上的手机通常比标准智能手机大得多，也贵得多。

# joomla - 更新 Joomla 模块源不反映更改

> ID：10463008
> 
> 赞同：0
> 
> 时间：2012-05-05T14:58:03.580
> 
> 标签：joomla, joomla-extensions, joomla1.7, joomla2.5

我正在尝试修改 Joomla 模块的源代码，但我没有看到 UI 上的更改。我也尝试从管理面板清除浏览缓存和 Joomla 缓存，但效果不佳。任何人都知道为什么这些更改没有反映在 UI 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T00:02:44.623

而且我怀疑您正在错误的位置进行更改。那是因为某些模板对某些模块有自己的 HTML/PHP 实现。像大多数模板一样，其中包含用于登录模块的 html。您应该查看模板文件夹以及在您的站点上处于活动状态的文件夹。

您正在编辑的模块将位于 /modules/mod_login

但实际上，如果您在模板中定义了“mod_login”，它应该是这样的：/templates/ **|您的活动模板文件夹|** /html/mod_login

这就是您的实际模块 HTML 实现所在的位置。如果该文件存在，请尝试编辑该文件。

如果您没有找到该文件/文件夹，那么您的 Joomla 2.5 设置或该模块一定有问题。

如果您需要进一步的帮助，请告诉我。（我其实是一个专业的 Joomla! 支持提供者）

# css - Wordpress 可视化编辑器不显示项目符号

> ID：10463011
> 
> 赞同：0
> 
> 时间：2012-05-05T14:58:31.973
> 
> 标签：css, wordpress

我的博客有问题，我做了一个页面，在编辑器的 html 端写了所有内容，列出了一些项目并发布了它，项目符号出现了，一切都很好，但是当我切换到可视化编辑器时，我仍然可以看到项目符号但是如果我点击更新然后添加到列表或修改它，项目符号本身就会消失，但是列出的项目保持它们的 css 样式（有点底部填充），任何帮助如何获得它们使用可视化编辑器时出现？

这是我的列表项的 CSS

```
 ol, ul {
list-style:none;
    text-decoration:none;   
}
li { 
  padding-bottom:5px;
   } 
```

我有 list-style:none 因为它隐藏了列出的页眉和页脚链接。我已将列表样式更改为圆形和列表样式位置等，并且页眉和页脚项目符号再次出现，但我页面上的“项目符号”列表项没有任何反应。

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:01:00.877

```
list-style:none; 
```

有点自我解释。删除它，项目符号点将再次出现。

# android - 将菜单项添加到 Android 的最近屏幕菜单

> ID：10463018
> 
> 赞同：-1
> 
> 时间：2012-05-05T14:58:51.597
> 
> 标签：android, recent-screens

我想让用户在 Android 上更轻松地退出（强制停止）应用程序 - 无需进入设置>管理应用程序......等。如果已经有更简单的方法，请分享。

如果没有，有没有办法将菜单项添加到最近的屏幕菜单？我目前正在研究 Honeycomb，但对 ICS 的答案也同样感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:08:48.317

你应该看看这个：

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

[http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)

[http://developer.android.com/reference/android/os/Process.html#myPid%28%29](http://developer.android.com/reference/android/os/Process.html#myPid%28%29)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T15:33:48.437

> 我想让 Android 上的用户更容易退出（强制停止）应用程序

幸运的是，这是不可能的，因为“强制停止”具有“退出”之外的特定后果。

> 有没有办法将菜单项添加到最近的屏幕菜单？

抱歉，没有。

# jquery - 骨干网响应有时返回空

> ID：10463019
> 
> 赞同：1
> 
> 时间：2012-05-05T14:58:54.253
> 
> 标签：jquery, backbone.js, tastypie

Backbone 存在不一致的问题。我在我的集​​合的 fetch 方法中添加了一个 console.log，所以我知道服务器总是提供数据，但有时我的视图无法看到该信息，或者显示 this.model.models.length 到为零，当我知道 fetch 返回了对象时。

我不知道为什么我会在 fetch 和尝试查看它们之间删除对象，所以希望有人能提供帮助。

我的路由器是这样的：

```
Router = Backbone.Router.extend({
    routes: {
       ""              : "index",
       "/"             : "index",
       "testing"       : "index",
       "follow/:type/" : "follow"
    },

    follow: function(type) {
        switch(type) {
            case "companies":
               this.followedItems = new FollowedCompanies();
               break;
            case "software":
               this.followedItems = new FollowedSoftware();
               break;
            case "hardware":
               this.followedItems = new FollowedHardware();
               break;
            case "tags":
               this.followedItems = new FollowedTags();
               break;
            case "people":
               this.followedItems = new FollowedPeople();
               break;
            default:
        }
        title = type.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
        this.followedItems.fetch({
            success: function(data) {
            },
            error: function(data) {
                console.log("Error: " + data);
            }
        });
        this.followView = new FollowView({
            model: this.followedItems,
            el: $("#activityFeed"),
            title: title
        });
    }
});

    var router = new Router();
    Backbone.history.start(); 
```

Model / Controller，为了简洁，只剪了一个，但都是一样的，甚至有一个不一致：

```
var FollowedSoftware = Backbone.Collection.extend({
    url: '/api/v1/follow_software/?format=json',
    model: TestFollowing,
    parse: function(resp) { 
          console.log(resp.objects); 
          return resp.objects; 
    }
}); 
```

我的观点是这样的：

```
var FollowView = Backbone.View.extend({
    template: _.template($("#FollowHeaderTemplate").html()),
    initialize: function() {
        var self = this;
        $(self.el).slideUp('fast', function() {
            self.model.fetch(); // Put here for to help?  Doesn't matter if it's here or not really. 
            $(self.el).html(self.render());
        });
        $(self.el).slideDown('slow');
        // this.model.reset();
    },
    render: function() {
        var self = this;
        $(this.el).html(new FollowHeaderView().render({title: this.options.title}).el);
        console.log(this.model.models);
        $(self.el).append(new FollowHeaderView({title: this.options.title}).render());
        _.forEach(this.model.models, function(item) {
             $(self.el).append(new FollowedItemView({model: item}).render().el);
        });
    }
})

var FollowHeaderView = Backbone.View.extend({
    template: _.template($("#FollowHeaderTemplate").html()),
    render: function() {
        $(this.el).html(this.template({"title": title}));
        return this;
    }
})

var FollowedItemView = Backbone.View.extend({
    template : _.template( $("#FollowedTemplate").html()),
    render: function() {
        $(this.el).html(this.template({"item" : this.model.toJSON()}))
        return this;
    }
}); 
```

即使只是做“软件”路线，有时它会起作用，有时它不会。fetch 中的 console.log 方法总是返回工作数据，但视图中的 console.log 只是有时这样做。

我没有在客户端或服务器上的任何地方缓存任何东西，但我无法始终如一地进行这项工作。在我的 .fetch 调用中，我添加了成功和错误回调，但错误回调永远不会触发。我没有在任何地方覆盖同步。我正在使用 0.9.2 的 Backbone，并且提供服务器由 Django-Tastypie 提供支持，它可以完美地工作（并且在其他一些具有相同代码的模型上也可以完美地工作。）

可能与 switch 语句有关，但我不知道它会如何，并且为每个“类型”定义一个路由似乎很愚蠢（尽管如果必须的话我会这样做）。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T15:55:10.800

在您的路由器`follow`方法结束时，您调用 fetch，然后立即初始化您的视图。您应该初始化视图，对集合调用 fetch，然后将视图的`render`方法绑定到集合的`"reset"`事件。流程是异步的，应进行相应处理。

这是一个绑定到事件的示例，`reset`而不必在 fetch 上实现成功/错误方法（您通常不必这样做）。

```
var FollowView = Backbone.View.extend({
    template: _.template($("#FollowHeaderTemplate").html()),
    initialize: function() {
        var self = this;
        $(self.el).slideUp('fast', function() {
            self.model.fetch(); // Put here for to help?  Doesn't matter if it's here or not really. 
            $(self.el).html(self.render());
        });
        $(self.el).slideDown('slow');

        // **ADDED BY lupefiasco**
        self.model.on('reset', function() {
            self.render();
        }, this);
    },
    render: function() {
        var self = this;
        $(this.el).html(new FollowHeaderView().render({title: this.options.title}).el);
        console.log(this.model.models);
        $(self.el).append(new FollowHeaderView({title: this.options.title}).render());
        _.forEach(this.model.models, function(item) {
             $(self.el).append(new FollowedItemView({model: item}).render().el);
        });
    }
}) 
```

### 旁注

您在每次调用 route 时重新初始化视图`/follow/:type`，这非常好，但是您需要在初始化新视图之前取消绑定旧视图。所以做这样的事情。

```
if (this.followView != null) {
     this.followView.off(); // old view is now unbound
}
this.followView = new FollowView(); 
```

您不需要在构造函数中传入视图的根元素。只需通过`el`属性在视图中定义它，Backbone 就会自动为您设置`$el`（“jQuerified”版本）。

```
var FollowedItemView = Backbone.View.extend({
    template : _.template( $("#FollowedTemplate").html()),
    el: '#activityFeed',
    render: function() {
            this.$el.html(this.template({"item" : this.model.toJSON()}))
            return this;
    }
}); 
```

`model`当您应该通过属性传递集合时，您正在通过属性将集合传递给视图`collection`。我不认为这在功能方面有很大的不同，但这是[最佳实践](http://backbonejs.org/docs/backbone.html#section-147)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:45:41.593

在从服务器完成获取模型之前，您正在访问视图中的模型。尝试在调用的`success`回调中初始化您的视图`fetch`。

例如

```
var my = this;
this.followedItems.fetch({
  success: function(model) {
    my.followView = new FollowView({
      model: model,
      el: $("#activityFeed"),
      title: title
    });
  }
}); 
```

# iphone - 我可以有一个 if/or 语句吗？

> ID：10463022
> 
> 赞同：-4
> 
> 时间：2012-05-05T14:59:10.100
> 
> 标签：iphone, objective-c, if-statement

如果发生两件事中的任何一件，有没有办法执行一个代码？具体来说，我有 2 个 TextField，如果其中任何一个为空，我想在执行操作时弹出 UIAlertView。我可以设置

```
if ([myTextField.text length] == 0) {
    NSLog(@"Nothing There");
    UIAlertView *nothing = [[UIAlertView alloc] initWithTitle:@"Incomplete" message:@"Please fill out all fields before recording" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
    [nothing show];
    [nothing release];
}
if ([yourTextField.text length] == 0) {
    NSLog(@"Nothing For Name");
    UIAlertView *nothing = [[UIAlertView alloc] initWithTitle:@"Incomplete" message:@"Please fill out all fields before recording" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
    [nothing show];
    [nothing release];
} 
```

但如果两者都为空，则会弹出该语句 2 次。

如果其中一个或两个都为空，我怎样才能让它只弹出一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:02:16.497

您可以使用(or) 运算符将这两个条件组合成一条`if`语句。`||`

```
if (([myTextField.text length] == 0) || ([yourTextField.text length] == 0)) {
    NSLog(@"Nothing There");
    UIAlertView *nothing = [[UIAlertView alloc] initWithTitle:@"Incomplete" 
                                                      message:@"Please fill out all fields before recording" 
                                                     delegate:self 
                                            cancelButtonTitle:@"Ok" 
                                            otherButtonTitles:nil];
    [nothing show];
    [nothing release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:01:40.413

使用复合条件

```
if (([myTextField.text length] == 0) || ([yourTextField.text length] == 0))) {
    NSLog(@"Nothing There");
    UIAlertView *nothing = [[UIAlertView alloc] initWithTitle:@"Incomplete" message:@"Please fill out all fields before recording" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
    [nothing show];
    [nothing release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:21:05.810

正如其他答案指出的那样，您可以像这样进行或使用惰性评估：

```
if ([myTextField.text length] == 0 || [yourTextField.text length] == 0) { 
```

惰性评估（`||`而不是`|`）只是确保第二个条件仅在必须运行时才运行。

请注意，这些东西的计算结果为 BOOL，因此您可以利用这些东西并给它们命名。例如：

```
BOOL eitherFieldZeroLength = ([myTextField.text length] == 0 || [yourTextField.text length] == 0);
if (eitherFieldZeroLength) { 
```

虽然这对于当前情况来说是微不足道的，但使用中间变量可以增加代码的清晰度。

# javascript - javascript中对象值中的两条垂直线是什么意思？

> ID：10463025
> 
> 赞同：22
> 
> 时间：2012-05-05T14:59:14.203
> 
> 标签：javascript, operators

> **可能重复：**
> [|| 是什么 运营商呢？](https://stackoverflow.com/questions/830618/what-does-the-operator-do)

也许有人可以提供更好的代码片段，但以下是什么`||`意思？：

```
var time =  $(el).data('start') || new Date(); 
```

它是一个`or`运算符吗？如果是，一个变量可以有两个不同的值有什么意义？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-05T15:04:01.377

这是一个`OR`运算符。你需要了解的是：

*   在逻辑运算符中使用时，非布尔值将转换为布尔值。转换成`false`的值称为“假”，转换成`true`的值称为“真”。虚假值包括`0`、`undefined`、`null`等。更多内容请参见[Truthy and Falsy: When All is Not Equal in JavaScript](http://www.sitepoint.com/javascript-truthy-falsy/)。

*   `OR`运算符*短路*：它不断评估表达式，直到找到 is `true`，然后停止。

因此，`var time = $(el).data('start') || new Date();`意味着“设置`time`为元素的`start`数据`el`，或者，如果那是虚假的，则使用当前时间”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T15:06:27.540

```
exp1 || exp2 
```

评估 exp1。如果 exp1 为真，则不评估 exp2（称为短路评估）。如果 exp1 返回 false，则计算 exp 2。如果 exp1 OR exp2 为真，则 (exp1||exp2) 评估为真。

但在 Javascript 中，您可以使用运算符设置值。

```
a = something

if (prop)

a = prop 
```

可以改写为

```
a = prop || something 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-05T15:01:04.507

它的意思是“或”。在这种情况下，它将 的值分配给`$(el).data('start')`变量`time`，或者，如果该变量不存在或返回`false`，则将其分配给从 返回的值`new Date()`。或者，正如马洛沃里奥在评论中更清楚地指出的那样：

> ...如果`$(el).data('start')`为“假”（即未定义、空、0、假、空字符串或 NaN），则`new Date()`计算并分配给`time`.

逻辑运算符的重要方面：

> 逻辑运算符通常与布尔（逻辑）值一起使用；当它们存在时，它们返回一个布尔值。但是，&& 和 || 运算符实际上返回指定操作数之一的值，因此如果这些运算符与非布尔值一起使用，它们可能返回非布尔值。

参考：

*   [逻辑运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T15:06:14.153

运营商的方式|| 被评估的是，如果第一部分是真实的，它会返回它。如果第一部分是假的，则返回第二部分。因此，上述表达式等价于：

```
if ($(el).data('start')) {
  time = $(el).data('start');
} else {
  time = new Date();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T15:01:29.353

这意味着`logical sum`。`var time = $(el).data('start') || new Date();`if `$(el).data('start')`will have `undefined`or `false`value then`time`将从`new Date`函数中获得价值。

# objective-c++ - 目标c ++中的变量命名变量

> ID：10463029
> 
> 赞同：1
> 
> 时间：2012-05-05T15:00:05.077
> 
> 标签：objective-c++

是否可以按照以下方式做一些事情：

```
 Entity [NSString stringWithFormat:@"Entitiy%i",entitiesCreated]; 
```

创建一个名为 Entity1、Entity2、Entity3、Entityn 的变量？我不在乎我是怎么做的，我只需要一些类似于可变命名变量的东西。如果有任何用处，它们将被添加到数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:37:53.203

不是“变量”本身，而是按名称存储数据的典型方法是通过关联数据结构，例如`NSMutableDictionary`（在 ObjC 中）或`std::unordered_map`或`std::map`（在 C++ 中）。你调查过那些吗？特别是，例如，这近似于您似乎正在尝试做的事情：

```
NSMutableDictionary* dict = [NSMutableDictionary dictionaryWithCapacity:1];
[dict addObject:somevalue forKey:[NSString stringWithFormat:@"Entity%i",entitiesCreated]]; 
```

然后，访问值：

```
id val = [dict valueForKey:@"Entity1"]; 
```

或者。

我假设您来自另一种编程语言，例如 JavaScript 或 PHP，其中此类关联数据结构用于保存*所有*变量 - 在 C 派生语言中并非如此，其中变量是静态分配的。您必须显式创建任何动态数据结构。

# javascript - Javascript 从正文到 js 文件

> ID：10463030
> 
> 赞同：0
> 
> 时间：2012-05-05T15:00:05.123
> 
> 标签：javascript, xhtml

我是真正的 JS 菜鸟，我的 HTML 正文中有这段代码：

```
 var secDuration = 5;
  var image = 1;
  var maxImages = 4;
  var slider = document.getElementById('slider');

 function changeImage(requiredImage) {

    if (!requiredImage && requiredImage != 0){
      if(image < maxImages){
        image++;
      }
      else{
        image = 1;
      }
    }
    else{ 
      if(requiredImage > maxImages){
        image = 1;
      }
      else if(requiredImage < 1){ 
        image = maxImages;
      }
      else{
        image = requiredImage;
      }
    }
    slider.className = "image"+image;

    clearTimeout(timeout)
  }

  function nextImage(){
    changeImage(image+1);
  }
  function prevImage(){
    changeImage(image-1);
  }

  changeImage(1); 
```

问题是当我将它粘贴到我正确连接到我的 HTML 的 js 文件中时，脚本不再工作。我尝试了几种解决方案，但我可能遗漏了一些东西。帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:03:46.807

JavaScript 文件的有效嵌入是：

```
<html>
<head>
    ...
    <script type="text/javascript" src="/path/to/script.js"></script>
</head>
<body>
    ...
</body>
</html> 
```

确保你以同样的方式完成。

然后，当页面完全加载时，您必须使用 HTML 页面中的元素，因此请像`document.getElementById`in`window.onload`方法那样移动语句：

```
window.onload = function() {
    slider = document.getElementById('slider');
}; 
```

因此，您更新的脚本应如下所示：

```
var image = 1;
var maxImages = 4;
var slider;

function changeImage(requiredImage) {
    if (!requiredImage && requiredImage != 0) {
        if (image < maxImages) {
            image++;
        }
        else {
            image = 1;
        }
    }
    else {
        if (requiredImage > maxImages) {
            image = 1;
        }
        else if (requiredImage < 1) {
            image = maxImages;
        }
        else {
            image = requiredImage;
        }
    }
    slider.className = "image" + image;

    clearTimeout(timeout)
}

function nextImage() {
    changeImage(image + 1);
}

function prevImage() {
    changeImage(image - 1);
}

window.onload = function() {
    slider = document.getElementById('slider');
    changeImage(1);
};​ 
```

# jquery - JQuery 插件模式参考/比较

> ID：10463032
> 
> 赞同：0
> 
> 时间：2012-05-05T15:00:16.157
> 
> 标签：jquery, design-patterns, plugins

我正在寻找一个文档/网站，该文档/网站列出（至少）最流行的 jQuery 插件开发模式，并解释您何时会使用每种模式（优点、缺点等）。这样的参考存在吗？是否有一个网站列表，当它们一起编译时，会创建这样的参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:10:09.797

做了一些进一步的研究，发现了这个：[http ://addyosmani.com/resources/essentialjsdesignpatterns/book/#jquerypluginpatterns](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#jquerypluginpatterns)

# database - 对大型生产数据库进行架构更改的最佳实践

> ID：10463036
> 
> 赞同：2
> 
> 时间：2012-05-05T15:00:33.717
> 
> 标签：database, sql-server-2008, database-schema, mysql-management

我们有时必须对基于 mysql 或 mssql 的生产数据库进行架构更改。我对这通常是多么严峻的考验感到震惊。技术人员使用各自平台的浏览器（例如 Sql server Management Studio）进行更改，我观察到此过程存在几个问题：

1.  对数据库的每次更改都会花费大量时间，从而导致技术人员不满意并导致数据库停机时间延长。
2.  技术人员不知道数据库引擎在进行更改时所取得的进展。出现问题的原因是技术人员在过程中不知道在尝试进行更改时是否存在某种故障，或者只是执行此更改需要很长时间。

有没有更好的方法来做到这一点？通过命令行脚本更改表是否被认为是最佳实践？执行架构更改时是否有方法监控进度？

谢谢，

艾略特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-17T16:33:31.440

实际上，您可以进行架构更改并使数据库在生产中保持在线。1\. alter table 添加新列并设置默认值为 null 2\. 创建一个 SP 以更新一小块数据中的值，例如 10K 3\. 使用正确的默认值更改 table

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T07:07:25.203

Elliott，从您的评论看来，您正在使用客户支持而不是支持开发人员来对数据库进行更改。如果我错了，请纠正我。如果您使用 Support Developer，他们应该运行脚本来进行更改，这始终是最好的方式。通过阅读您的问题，您的数据库看起来确实有大量记录。要获取脚本，您可以使用 Microsoft VisualStudio DB 版本。它将比较数据库源项目和您要将其部署到的数据库。然后，您可以查看创建的脚本并在服务器上运行它。

关于需要很长时间的更改问题，正如我所说，取决于数据量和您正在执行的架构更改。为了防止长时间停机，您需要找到对客户影响最小的时间，并在此期间进行。如果您是 24x7 系统，则必须安排停机时间。另外，试着研究你的变化模式。是否有可能您可以将所有更改分组到单个版本，以便减少停机时间。另外，看看为什么要进行如此多的数据库更改，您可以在设计中做些什么来减轻更改。例如。每次进行架构更改时，可能都会重新构建索引。可能您可以在架构更改期间禁用索引。完成架构更改，然后使用数据库作业安排索引重建

关于您关于监控架构更改的问题，我认为没有任何视觉指标可以说明已经完成了这么多。您只需要等待命令完成即可。

# ruby-on-rails-3 - Rails 3 为与 select 的 has_many 关联分配值

> ID：10463038
> 
> 赞同：1
> 
> 时间：2012-05-05T15:00:39.273
> 
> 标签：ruby-on-rails-3, select

我有一个问题`Problem`模型`has_many`。我的问题模型`has_many`问题。我有一个名为 的连接表`issue_problems`，它有自己的模型，即`belongs_to`问题和问题。在我的问题表单中，我试图将问题分配给带有选择标签的问题。（问题已经创建，所以我只是分配给问题。）我已经尝试过了，但收到以下错误：

```
undefined method `reject' for "3":String 
```

和堆栈错误：

```
app/controllers/problems_controller.rb:12:in `create' 
```

*注意：我计划在未来实施一些允许我分配多个问题以`has_many`利用*

这是我的代码：

**我的问题模型**：

```
class Issue < ActiveRecord::Base
  validates :name, :presence => true, :on => :create

  has_many :issue_problems
  has_many :problems, :through => :issue_problems
end 
```

**我的问题模型：**

```
class Problem < ActiveRecord::Base
  validates :body, :presence => true
  belongs_to :user
  has_many :solutions
  has_many :issue_problems
  has_many :issues, :through => :issue_problems

  accepts_nested_attributes_for :solutions, :issues
end 
```

**我的问题问题模型：**

```
class IssueProblem < ActiveRecord::Base
  belongs_to :problem
  belongs_to :issue
end 
```

**我对问题控制器的创建操作：**

```
def create
  @problem = current_user.problems.new(params[:problem])
  @solution = @problem.solutions.new(params[:problem][:solution])
  respond_to do |format|
    if @problem.save
      @problem.issues << @problem.issue
      @solution.save!
      @solution.update_attributes(problem_id: @problem.id, user_id: current_user.id)
      format.html { redirect_to(@problem, :notice => 'Problem was successfully created.') }
      format.xml  { render :xml => @problem, :status => :created, :location => @problem }
    else
      format.html { render :action => "new" }
      format.xml  { render :xml => @problem.errors, :status => :unprocessable_entity }
    end
  end
end 
```

**我的表格：**

```
<%= form_for(@problem) do |f| %>
  <%= f.hidden_field :published_at, :value => Time.now %>
  <% if @problem.errors.any? %>
  <div id="errorExplanation">
    <p>Halt! Just so you know, you have to fix these <%= pluralize(@problem.errors.count, "error") %> before you can ask a question:</p>
    <ul>
    <% @problem.errors.full_messages.each do |msg| %>
      <li>-&nbsp;<%= msg %></li>
    <% end %>
    </ul>
  </div>
  <% end %>
  <div class="input-container">
    <%= f.text_field :body, :placeholder => "What's your problem?" %>
  </div>
  <%= f.fields_for :solution do |f| %>  
    <%= f.hidden_field :published_at, :value => Time.now %>
  <div class="input-container">
    <%= f.text_field :body, :placeholder => "What solution do you propose?" %>
  </div>
  <% end %>
  <%= f.select :issue_ids, Issue.all.collect {|x| [x.name, x.id]}, :prompt => "Select an issue" %>
  <div id="button">
  <%= f.submit 'Add', :class => 'button' %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:18:16.280

如果您足够开放以观看[此链接中的](http://www.lynda.com/Ruby-on-Rails-3-tutorials/essential-training/55960-2.html?srchtrk=index:1%0Alinktypeid:2%0Aq%3aruby%20on%20rails%0Apage:1%0As%3arelevance%0Asa%3atrue%0Aproducttypeid:2%0Ameta_software_facet%3aRuby%20on%20Rails)**8\. 关联 - 多对多**部分，那么我认为您对所有内容都足够清楚。

观看[此](http://railscasts.com/episodes/154-polymorphic-association) **railscasts**并从头开始了解所有内容。

## 编辑：

尽管您的问题已解决，但请将此作为访问此处以深入了解 ROR 中的多对多关联的人们的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:10:18.940

我认为您不需要 IssueProblem 模型。您应该将“has_and_belongs_to_many”放入问题和问题模型中，如下所示：

```
class Issue < ActiveRecord::Base
  has_and_belongs_to_many :problems
end

class Problem < ActiveRecord::Base
  has_and_belongs_to_many :issues
end 
```

# c# - 如何从c#中的字符串（a + b）输入中获取运算符类型？

> ID：10463042
> 
> 赞同：0
> 
> 时间：2012-05-05T15:01:04.410
> 
> 标签：c#

例如，如果用户以 a + b 的形式给出输入，则过程应该是添加两个已经声明为 int a, int b 的变量

```
int a = 7;
int b = 8;
string formula = console.readline(); 
```

如果用户键入 a + b 作为公式，我需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:05:58.117

您尝试评估数学表达式。我建议使用**NCalc**

> **NCalc**是 .NET 中的数学表达式求值器。NCalc 可以解析任何表达式并评估结果，包括静态或动态参数和自定义函数。

*   [NCalc - .NET 的数学表达式评估器](http://ncalc.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:08:53.153

你可以这样做：

```
int a = 7;
int b = 8;
string formula = "a+b";
formula=formula.Replace("a",a.ToString()).Replace("b",b.ToString());

var calc = new System.Data.DataTable();
Console.WriteLine(calc.Compute(formula, "")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:09:39.970

前一段时间做了这个来评估这样的表达式

```
private static double Calc(string expression)
{
    try
    {
        var table = new System.Data.DataTable();
        table.Columns.Add("expression", string.Empty.GetType(), expression);
        System.Data.DataRow row = table.NewRow();
        table.Rows.Add(row);
        return double.Parse((string)row["expression"]);
    }
    catch (Exception)
    {
        return 0;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-04-12T12:18:49.073

此代码允许用户输入两个数字和他或她想要的操作员

```
Console.WriteLine("Please enter the first number");
            int a = int.Parse(Console.ReadLine());

            Console.WriteLine("Enter the operator you want to use");
            string c = Console.ReadLine() ;

            Console.WriteLine("Enter the last number");
            int b = int.Parse(Console.ReadLine());

            string formula = "acb";
            formula = formula.Replace("a", a.ToString()).Replace("b", b.ToString()).Replace("c", c.ToString());

            var calc = new System.Data.DataTable();
            Console.WriteLine(calc.Compute(formula, "")); 
```

# ruby-on-rails - 获取任意级别的自引用层次模型

> ID：10463044
> 
> 赞同：1
> 
> 时间：2012-05-05T15:01:20.677
> 
> 标签：ruby-on-rails, ruby, json, self-reference

我正在尝试从 Rails 获取自引用数据。我有一个`Task`使用以下代码调用的模型：

```
class Task < ActiveRecord::Base
  has_many :tasks
  has_many :relationships, foreign_key: "follower_id", dependent: :destroy
  has_many :followed_tasks, through: :relationships, source: :followed
  scope :orphans, :conditions => "id NOT IN (SELECT DISTINCT followed_id FROM relationships)" 
```

在我的控制器中，我想与他们的孩子（子任务）和孙子一起完成所有任务。到目前为止，我一直在这样做：

```
@tasks = Task.orphans.to_json(:include => { :followed_tasks => {
:include => :followed_tasks}}) 
```

这可能不是最有效的方法，但它是我可以想出的一种方法。现在，如果我想要更多级别的嵌套，此代码很快就会变得难以维护。我怎样才能改进我的代码，以便能够指定一个变量`maxLevelsNum = 4`，然后让我的查询以某种方式获取具有四级深度的子​​任务的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:36:10.937

自从提出问题以来已经有一段时间了，但是，您可以在下面找到一个可能的答案（maxLevelsNum 需要大于或等于 1）：

```
hash_string = constructHash(maxLevelsNum)

def constructHash(treeDepth)
  output = ":include => :followed_tasks"

  (2..treeDepth).each do 
    output = ":include => { :followed_tasks => {" + output + "}}"
  end

  return "{" + output + "}"
end

@tasks = Task.orphans.to_json(eval(hash_string)) 
```

# javascript - 从 getJSON 调用返回的数据发生变化时触发事件

> ID：10463053
> 
> 赞同：0
> 
> 时间：2012-05-05T15:02:16.463
> 
> 标签：javascript, jquery, getjson

我有一个 getJSON 函数，我当前调用一次，然后使用 setInterval() 函数来收听可能随时更改值的 thingspeak.com 频道提要。

我想在我的 jQuery 代码中触发一个事件，在 getJSON 函数之外，当返回的数据 field1 的值为“1”时。如果值为“0”，则应关闭事件。到目前为止，一切都很好。但是由于 getJSON 每隔几秒钟就在监听频道，它会一遍又一遍地触发事件（timer() 函数）。

如何让 getJSON 事件“在后台运行”并且仅在从频道提要返回的数据实际发生更改时触发？返回的数据还有一个字段，该字段具有数据条目的唯一 ID (entry_id)，因此可以侦听此值的更改。

当前运行此代码：

```
$(document).ready(function() {
    getUpdates();
    setInterval('getUpdates()',400);
});

function getUpdates() {
    $.getJSON('http://api.thingspeak.com/channels/xxx/feed/last.json?callback=?', {key: "xxx"}, function(data) {
    if(data.field1 == '1') {
        // trigger timer function on
    } else if(data.field1 == '0') {
        // trigger timer function off
    }
});

function timer() {
    // Starts a timer countdown in a div
} 
```

**这是代码的第二个版本，可能会提供更多信息：**

```
$(document).ready(function() {
    getUpdates();
    setInterval('getUpdates()',400);    
});

function getUpdates() {
    var entries = new Array();
    $.getJSON('http://api.thingspeak.com/channels/xxx/feed/last.json?callback=?', {key: "xxx"}, function(data) {
        if ($.inArray(data.entry_id,entries) === -1) {
            //New entry, add the ID to the entries array
            entries.push(data.entry_id);

            //Check if the div should be visible or not
            if(data.field1 == '1') {
                $(".desc").show();
            } else if(data.field1 == '0') {
                $(".desc").hide();
            } 
        } else if ($.inArray(data.entry_id,entries) > -1) {
            // Same entry as previous call, do nothing.
        } 
    });
}

<div class="desc"></div> 
```

这仍然不起作用，因为它似乎没有更新条目数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:32:38.907

这是一个未经测试的近似逻辑（毕竟我无法访问包含正确数据的提要）。让我知道它是否会引导您朝着正确的方向前进。

```
var timerSet = 0;

function startTimer(){
    timerSet = 1;
    // start the 1-minute timer and show feedback to user
}

function stopTimer(){
    timerSet = 0;
    // stop the 1-minute timer and show feedback to user
}

function getUpdates() {
    var entries = new Array();
    $.getJSON('http://api.thingspeak.com/channels/xxx/feed/last.json?callback=?', {key: "xxx"}, function(data) {
        if ($.inArray(data.entry_id,entries) === -1) {
            //New entry, add the ID to the entries array
            entries.push(data.entry_id);

            // check which state the system is in and manage the 1-minute timer
            if(data.field1 == '1' && timerSet === 0) { // if 1-minute timer not running already - start it
                startTimer();
            } else if(data.field1 == '0' && timerSet === 1) { // if 1-minute timer running already - stop it
                stopTimer();
            } 
        }
    });
}

$(document).ready(function() {
    // getUpdates(); don't need this: function will be called in 400ms anyway
    setInterval('getUpdates()',400);    
}); 
```

# c++ - 如何对字符串进行路径操作？

> ID：10463059
> 
> 赞同：0
> 
> 时间：2012-05-05T15:02:56.170
> 
> 标签：c++, stl

假设我们有一些字符串`A`“swdfsd/sdfsdf/sdfsd/sdfsd/sdf.file”和`B`“swdfsd/oooo/”，我们想做一些简单的工作，比如获取文件所在的文件夹名称并从位置B开始获取文件A的路径（结果如`swdfsd/oooo/../sdfsdf/sdfsd/sdfsd/sdf.file`）（不使用 boost::filesystem）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:21:05.077

编写类似于 Unix dirname 和 basename 命令的简单路径例程非常简单。那些只是处理路径的最后一个路径分隔符。

但正如有人已经评论过的那样，其他任何事情都可能很棘手。考虑使用 . 和..会使事情复杂化。

# php - 如果用户关闭了他的浏览器，则更新 mysql 查询

> ID：10463067
> 
> 赞同：0
> 
> 时间：2012-05-05T15:04:15.810
> 
> 标签：php

如果用户已登录，则显示状态为“ON”，因为我运行查询以显示用户现在在线：

**在线的：**

```
$sqlonline = mysql_query("INSERT INTO useronline VALUES('$_SESSION[id]', '$uname', '$ip', 
'$time', '', 'ON')"); 
```

如果用户已注销，那么我会更新查询以显示用户处于离线状态

**离线**

```
$q=mysql_query("UPDATE useronline SET status = 'OFF',  time_out  = '$time' WHERE 
session_id ='$_SESSION[id]'"); 
```

好吧，我的问题..如果用户关闭了他/她的浏览器，有什么方法可以将查询更新为 status = **'OFF' ？**现在如果用户关闭浏览器，它会显示用户现在**在线。**我想如果用户关闭浏览器然后显示用户现在是**“离线”**

谁能给我一个想法！
对不起我的英语不好:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:08:19.660

在用户尝试关闭浏览器选项卡时，没有可靠的方法可以向服务器发送内容。您需要写入来自用户的最后一个请求的数据库时间。当这个时间过去足够远时，就意味着用户已经离开了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:10:35.273

您可以尝试使用 Javascript 执行此操作并检查窗口关闭事件，但这取决于浏览器是否支持。

您可以做的是创建一个表来记录人们何时访问您的站点，然后运行一个 cron 作业来检查他们更改页面后的时间。如果超过 X 分钟，则将该用户的状态设置为离线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:24:02.257

当用户关闭窗口时，您无法更新到 db。

您可以通过定期检查数据库来更新。

您可以在数据库中有一个名为 last_updated_time 的字段。如果用户登录，则使用 setInterval() 或 setTimeOut() 方法每隔几（3 或 5）秒从用户页面更新此列中的当前时间。

如果用户关闭了窗口，last_updated_time 将不会更新。

在要显示在线/离线状态的页面中，检查当前时间与用户的 last_updated_time 之间的时间差。如果时间差较长，将用户状态更新为OFF，并显示离线状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-28T22:01:05.350

是的，你可以通过使用上面 3 的 jquery 来做到这一点

```
$(window).on("beforeunload", function(){
   // and use browser online function navigator.onLine;
}); 
```

# cobol - 获得使用 Call 语句的想法

> ID：10463069
> 
> 赞同：1
> 
> 时间：2012-05-05T15:04:33.467
> 
> 标签：cobol

当我调用另一个程序时，我需要问一下我的菜单程序有什么问题

通过点击 1 或 2，当程序调用时，我无法返回我的菜单程序，

你能帮我吗？当我按 Esc 键时，我怎样才能回到我的菜单，或者

我的通话记录是错误的。

这是我的菜单程序的代码。

```
LINKAGE SECTION.
   01 MY-PROG1 PIC X.
   01 MY-PROG2 PIC X.

......
......
......

MAIN.

       DISPLAY MENU-HEADER ERROR-MESSAGE.
       PERFORM ENTRY-MENU UNTIL CHOICE = 3\.     
       STOP RUN.

   ENTRY-MENU.
       ACCEPT MENU-SELECT.
       PERFORM INPUT-CHOICE UNTIL CHOICE = 3.
       STOP RUN.

   INPUT-CHOICE.
       IF CHOICE = 1
         CALL  'MY-PROGRAM1' USING MY-PROG1 
       ELSE IF CHOICE =2
         CALL 'MY-PROGRAM2' USING MY-PROG2
       ELSE 
          MOVE "INVALID INPUT....." TO ERRMSG
          DISPLAY ERROR-MESSAGE. 
```

这是 MY-PROGRAM1.COB 这是我按下 Esc 键时如何回调菜单程序

```
LINKAGE SECTION.
   01   MY-PROG1 PIC X.
   01   MY-MENU  PIC X.

......
......
......

MAIN.

 .......
 .......
 STOP RUN.

ENTER-BIRTHDATE.

  ACCEPT...
  .......

  IF ESC-KEY
     DISPLAY CLEAR-SCREEN
     CALL 'MENU'

  ELSE IF F10
    .....
    ..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T15:16:26.580

您应该将`STOP RUN`被调用程序中的语句替换为`GOBACK`.

这是使用`STOP RUN`and的一般规则`GOBACK`：

> GOBACK 语句标记被调用程序的逻辑结束。
> 
> 一般规则 如果在调用运行时元素控制下的程序中执行 GOBACK 语句，则目标程序的运行就像执行与 GOBACK 语句具有相同子句的 EXIT PROGRAM 语句一样。请参阅主题 EXIT 语句。如果在不受调用运行时元素控制的程序中执行不带 ADDRESS OF 子句的 GOBACK 语句，则目标程序就像执行与 GOBACK 语句具有相同子句的 STOP RUN 语句一样运行。如果在不受调用运行时元素控制的程序中执行带有 ADDRESS OF 子句的 GOBACK 语句，则目标程序就像执行 STOP RUN 语句一样运行，只是在系统区域中设置了任意返回值。GOBACK 语句可能会产生比等效的 EXIT PROGRAM 和 STOP RUN 语句更紧凑的代码。在执行指定了 GLOBAL 短语的声明性过程时，不得执行 GOBACK 语句，除非在执行该声明性过程时调用的程序中。如果在函数中执行 GOBACK 语句，则该函数将如同执行 EXIT FUNCTION 语句一样运行。如果在方法中执行 GOBACK 语句，则该方法就像执行 EXIT METHOD 语句一样运行。如果在迭代器中执行 GOBACK 语句，则迭代器就像执行 EXIT ITERATOR 语句一样运行。在执行指定了 GLOBAL 短语的声明性过程时，不得执行 GOBACK 语句，除非在执行该声明性过程时调用的程序中。如果在函数中执行 GOBACK 语句，则该函数将如同执行 EXIT FUNCTION 语句一样运行。如果在方法中执行 GOBACK 语句，则该方法就像执行 EXIT METHOD 语句一样运行。如果在迭代器中执行 GOBACK 语句，则迭代器就像执行 EXIT ITERATOR 语句一样运行。在执行指定了 GLOBAL 短语的声明性过程时，不得执行 GOBACK 语句，除非在执行该声明性过程时调用的程序中。如果在函数中执行 GOBACK 语句，则该函数将如同执行 EXIT FUNCTION 语句一样运行。如果在方法中执行 GOBACK 语句，则该方法就像执行 EXIT METHOD 语句一样运行。如果在迭代器中执行 GOBACK 语句，则迭代器就像执行 EXIT ITERATOR 语句一样运行。
> 
> 停止运行。这取决于您的系统。大多数编译器上的 STOP RUN 会终止程序，如果它被另一个 cobol 程序调用，则整个过程都会终止。

在此[链接](http://publib.boulder.ibm.com/infocenter/cicsts/v3r1/index.jsp?topic=/com.ibm.cics.ts31.doc/dfhp3/dfhp3p9.htm)的末尾，您可以找到一个很好的模式来表示所有这些关系。

编辑：（来自旧的 Microsoft Cobol 文档）

> EXIT PROGRAM STATEMENT : EXIT PROGRAM 语句出现在被调用的子程序中，导致控制权返回到调用程序中 CALL 之后的下一个可执行语句。该声明必须是一个段落本身。

# java - 重写 Crenshaw 的“让我们构建一个编译器”的设计模式？

> ID：10463070
> 
> 赞同：6
> 
> 时间：2012-05-05T15:04:39.020
> 
> 标签：java, design-patterns, project-management

我正在将 Jack Crenshaw 的“让我们构建一个编译器”从 Turbo Pascal 4.0 重写为 JAVA。这很励志，因为经典书籍还没有面向对象的版本

[是否有更现代的 OO 版本的“让我们构建编译器”？](https://stackoverflow.com/questions/3723716/is-there-a-more-modern-oo-version-of-lets-build-a-compiler)

全书共15章。编译器以增量的方式呈现：第一章提供了整个编译器的样板代码，然后每章都在前一章的 Pascal 过程中添加了一些行。

我已经翻译了前两章，每一章都作为一个包，每个 Pascal 过程作为 JAVA 中的静态保护方法，一章的过程集中在一个类中，该类扩展了从其前一章翻译的类。

```
package td1;
public class Cradle {
    protected final static char TAB='\t';
    protected static char look;

    protected static void getChar() throws IOException {
        look=(char) System.in.read();
        }       
 ...
}

package td2;

public class Cradle extends td1.Cradle{

    protected static void factor() throws IOException {
    ...
    }

...
} 
```

但是，当我来到td3时，我必须更新td2.Cradle的factor()，但我不想在td2.Cradle中更改factor()，因为那样会使td2中的factor()做得更多它应该在 td2 中提出。我想到了“扩展” td2.Cradle()，但是，扩展静态类似乎是不可能的。

[我的相关问题在这里](https://stackoverflow.com/questions/10456561/override-a-protected-method-and-try-to-call-it-from-the-super-class)

也许我应该将每个静态方法更改为非静态方法？

我当然需要一些设计模式，有人可以帮忙吗？我希望我很清楚。总而言之，这个项目逐渐地为每个过程提供了越来越多的指令，我确实希望使用一些像继承这样的 JAVA 机制来记录中间步骤。

帕斯卡代码是经典的书籍在这里[LBC](http://compilers.iecc.com/crenshaw/)。我觉得尝试使用继承是因为

1.  每一章都调用/添加更多行到前面章节中定义的程序
2.  我希望让我的 JAVA 源代码对所有想要一步一步关注 LBC 的人有用。所以不宜使用单个类来放入作者编译器的最终源代码。必须像 Crenshaw 那样按章节拆分代码并逐渐增加它们。

我的实际解决方案是将 tp1.Cradle 的方法保持为静态。tp2.Cradle, tp3.Cradle, ... 直到 tp15.Cradle 中的方法都是非静态的，它们都*静态导入*tp1.Cradle.* 。此外，对于每个大于 2 的整数 i，tp[i].Cradle*扩展*tp[i-1].Cradle。

不要犹豫，告诉我更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:40:53.847

听起来你在正确的轨道上。为了能够覆盖这些方法，它们应该是实例方法。因此，您应该从依赖这些“全局方法”的模型转移到基于实例的模型，在其中创建 Cradle 类的实例并在该实例上调用适当的方法。

# java - 如何在 POM.xml 中引用环境变量？

> ID：10463077
> 
> 赞同：198
> 
> 时间：2012-05-05T15:05:27.573
> 
> 标签：java, maven, environment-variables, pom.xml

我正在使用 Maven 作为构建工具。我设置了一个名为`env`. 如何在`pom.xml`文件中访问此环境变量的值？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-05-05T15:11:32.433

查看[Maven 属性指南](http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-properties.html)...

正如 Seshagiri 在评论中指出的那样，`${env.VARIABLE_NAME}`会做你想做的事。

我将添加一句警告并说`pom.xml`应该完全描述您的项目，因此请明智地使用环境变量。如果你让你的构建依赖于你的环境，它们就更难复制

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-09-16T23:17:40.450

直接将环境变量传递给 Maven 系统属性可能更安全。例如，假设在 Linux 上您要访问环境变量 MY_VARIABLE。您可以在 pom 文件中使用系统属性。

```
<properties>
    ...
    <!-- Default value for my.variable can be defined here -->
    <my.variable>foo</my.variable>
    ...
</properties>
...
<!-- Use my.variable -->
... ${my.variable} ... 
```

在 maven 命令行上设置属性值：

```
mvn clean package -Dmy.variable=$MY_VARIABLE 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-09-09T00:16:32.450

另外，请确保您的**环境变量**仅**由大写字母组成**....我不知道为什么（文档没有明确说明，至少@Andrew White提供的链接），但是如果变量是小写单词（例如 env.dummy），变量总是为空或为空...

我为此苦苦挣扎了一个小时，直到我决定尝试一个大写变量，并且问题解决了。

OK 变量示例：

*   假的
*   DUMMY_ONE
*   JBOSS_SERVER_PATH

（**注意**：我使用的是 maven v3.0.5）

我希望这可以帮助某人....

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-01-30T23:53:37.963

我们不能用

```
<properties>
    <my.variable>${env.MY_VARIABLE}</my.variable>
</properties> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-25T13:16:30.100

我也在为同样的事情苦苦挣扎，运行一个设置变量的 shell 脚本，然后想要使用 shared-pom.xml 中的变量。目标是使用 com.google.code.maven-replacer-plugin 让环境变量替换我的项目文件中的字符串。

使用`${env.foo}`或`${env.FOO}`不适合我。Maven 只是没有找到变量。起作用的是在 Maven 中将变量作为命令行参数传递。这是设置：

1.  在 shell 脚本中设置变量。如果您在子脚本中启动 Maven，请确保已设置变量，例如使用`source ./maven_script.sh`从父脚本调用它。

2.  在 shared-pom 中，创建一个获取环境变量的命令行参数：

```
<插件>
  ...
  <执行>
    <执行>
    ...
      <执行>
      ...
        <配置>
          <param>${foo}</param> <!-- 注意这不是* ${env.foo} -->
        </配置>

```

3.  在 com.google.code.maven-replacer-plugin 中，设置替换值`${foo}`。

4.  在我调用 maven 的 shell 脚本中，将其添加到命令中：`-Dfoo=$foo`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-04-22T14:07:18.630

您可以使用`<properties>`标签来定义自定义变量和`${variable}`模式来使用它

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <!-- define -->
    <properties>
        <property.name>1.0</property.name>
    </properties>

    <!-- using -->
    <version>${property.name}</version>

</project> 
```

# jquery - 为画廊使用图像精灵

> ID：10463078
> 
> 赞同：4
> 
> 时间：2012-05-05T15:05:35.463
> 
> 标签：jquery, html, css, css-sprites

由于图像过多和图像过大（文件大小），加载时间变慢。我已经开始将一些 PNG 转换为 JPG，并且正在考虑探索将当前图像滑块/图库（一系列 6 个旋转 JPG 图像）更改为单个精灵的想法。我不确定这是否可能或是否值得所有努力。

我知道背景图像是问题的核心，我已经在努力将它们更改为 JPG 并减小它们的文件大小。链接在下面，如果任何有经验的 html/css/js/jquery 人可以建议是否 1) 可以为画廊/滑块使用图像精灵和 2) 值得吗？它会帮助加载时间吗？

[http://tinyurl.com/7ywoqpf](http://tinyurl.com/7ywoqpf)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:31:09.660

我不建议为画廊使用图像精灵。如果你想改变任何东西，你必须修改精灵。现在，比方说，对您的站点进行五次更改，这就是对精灵的 5 次修改。最好为此使用经过适当优化的独立图像。这样，您只需轻松修改外观顺序，并根据具体情况更改图像。

如果您需要对图像进行大量的 LOSSLESS 压缩，请访问此 URL：

[http://kraken.io/](http://kraken.io/)

我基本上将它用于我正在从事的任何重型项目。

希望这有助于 G

# c++ - 如何正确构造和继承类？

> ID：10463081
> 
> 赞同：2
> 
> 时间：2012-05-05T15:05:57.897
> 
> 标签：c++, algorithm, qt, design-patterns, inheritance

我想通过串口编写通信接口。（使用 Qt）

我有 QSerialPort 类，它提供了使用串行端口的接口。我从 QSerialPort 类继承了 QMySerialPort，它为配置端口添加了一些功能和对话框窗口。

现在我想编写 2 个协议类：第一 - 低层类、sendPacket、parseData 方法等。第二 - 高层：setDeviceID、getDeviceID、onPayload 等。

我该怎么做？首先想到的是创建一些 QSerialInterface 元类，其中将包括 QMySerialPort 的对象和 2 个协议层类。我应该在它们之间建立一些联系。

如：

**协议类：** void setPort(QSerialPort *port) { m_port = port; }

**sendPacket 方法：** m_port->send(local_data);

但我认为这种方法很糟糕。你有什么想法？也许我应该在这里使用设计模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:06:50.753

也许您应该缩小问题的范围以获得更有用的答案。也就是说，有几件事我想指出。

*   尝试将 UI 代码与业务逻辑分开。更具体地说，配置对话框的代码在`QMySerialPort`.
*   根据您要添加的功能类型`QSerialPort`，请记住，您可以`QSerialPort`通过组合而不是继承来使用，并且在许多情况下（如果不是大多数情况下）前者更可取。
*   一般来说，尽量将每个接口/类的职责定义得尽可能狭窄和集中。解析数据应该在与发送/接收单个数据包不同的接口中进行。通过这种方式，您可以替换不同的通信介质，同时保持整体协议和处理它的对象不变。
*   该`setPort`方法还可以，尽管我个人会将`port`其作为参数传递给构造函数。

# firefox - GWT 插件 Firefox 12

> ID：10463085
> 
> 赞同：7
> 
> 时间：2012-05-05T15:06:07.943
> 
> 标签：firefox, gwt

我想使用 FireFox 12 进行 GWT 开发。但此版本不受 Google 官方支持。

我找到了 [http://notepad2.blogspot.de/2012/04/gwt-developers-plugin-for-firefox-12.html](http://notepad2.blogspot.de/2012/04/gwt-developers-plugin-for-firefox-12.html)

使用这个插件省钱吗？或者我有感染恶意软件的危险？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T17:10:09.103

Stefan，我在我的 GWT 项目中主要使用 Firefox，并且能够切换到 FF12，这要感谢 Google 的 Alan Leung，他[在所有主要平台上发布了用于 FF12 的开发模式插件构建](https://groups.google.com/forum/#!starred/google-web-toolkit/7OR5LM1POzI)。从那里下载插件是最安全的。我已经使用 Mac 通用二进制构建大约一个星期了，没有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:13:52.090

更新插件的代码仍在[审查中](http://gwt-code-reviews.appspot.com/1701803/)。回滚到 Firefox 11 或使用 Chrome。

# button - 为充满按钮的衬垫布局添加触摸监听器

> ID：10463094
> 
> 赞同：4
> 
> 时间：2012-05-05T15:07:18.787
> 
> 标签：button, android-linearlayout, touch-event, swipe-gesture, findviewbyid

我在线性布局中添加了一个触摸事件来响应滑动手势，效果很好。但是，当我向布局添加按钮时，父衬垫布局被忽略。我应该如何防止这种情况发生？

```
LinearLayout ln2 = (LinearLayout) findViewById(R.id.fr2);
ln2.setOnTouchListener(swipe); 
```

我如何使用`onInterceptTouch`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T15:09:53.733

您应该创建自己的布局并覆盖布局的 onInterceptTouchEvent(MotionEvent ev) 方法。

例如，我创建了自己的布局，它扩展了 RelativeLayout

```
 @Override
       public boolean onInterceptTouchEvent(MotionEvent ev) {
         return true; // With this i tell my layout to consume all the touch events from its childs
      }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
        // Log.d(TAG, String.format("ACTION_DOWN | x:%s y:%s", 
            break;
        case MotionEvent.ACTION_MOVE:
        //Log.d(TAG, String.format("ACTION_MOVE | x:%s y:%s", 
            break;
        case MotionEvent.ACTION_UP:
            break;
        }
        return true;
    } 
```

当我在布局中放置一个按钮时，即使我点击了那个按钮，我的布局也会消耗所有的 touchEvent，因为它`onInterceptTouchEvent`总是返回 true。

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T05:23:19.637

在您想要点击的布局中添加 android:onClick="tapEvent" 。通过更改 MAX_TAP_COUNT 值，您可以使用任意数量的抽头。

```
private long thisTime = 0;
private long prevTime = 0;
private int tapCount = 0;
private static  final int MAX_TAP_COUNT = 5;
protected static final long DOUBLE_CLICK_MAX_DELAY = 500;

public void tapEvent(View v){

        if (SystemClock.uptimeMillis() > thisTime) {
            if ((SystemClock.uptimeMillis() - thisTime) > DOUBLE_CLICK_MAX_DELAY * MAX_TAP_COUNT) {
                Log.d(TAG, "touch event " + "resetting tapCount = 0");
                tapCount = 0;
            }
            if (tapCount()) {
               //DO YOUR LOGIC HERE
            }
        }

}

private Boolean tapCount(){

        if (tapCount == 0) {
            thisTime = SystemClock.uptimeMillis();
            tapCount++;
        } else if (tapCount < (MAX_TAP_COUNT-1)) {
            tapCount++;
        } else {
            prevTime = thisTime;
            thisTime = SystemClock.uptimeMillis();

            //just incase system clock reset to zero
            if (thisTime > prevTime) {

                //Check if times are within our max delay
                if ((thisTime - prevTime) <= DOUBLE_CLICK_MAX_DELAY * MAX_TAP_COUNT) {
                    //We have detected a multiple continuous tap!
                    //Once receive multiple tap, reset tap count to zero for consider next tap as new start
                    tapCount = 0;
                    return true;
                } else {
                    //Otherwise Reset tapCount
                    tapCount = 0;
                }
            } else {
                tapCount = 0;
            }
        }
        return false;

} 
```

# iphone - Xcode - 团队配置文件

> ID：10463099
> 
> 赞同：2
> 
> 时间：2012-05-05T15:08:07.740
> 
> 标签：iphone, xcode, provisioning, keychain, signing

我想在真实设备上从 xcode 测试应用程序。我已经在钥匙串访问中添加了开发证书 - 证书（此证书不是我创建的）

Xcode 创建了 Team Provisioning Profile ，但我仍然收到错误： **Xcode 在您的钥匙串中找不到此配置文件的有效私钥/证书对。未找到有效的签名身份。**

我还创建了私钥和公钥。

但是如何将这些密钥与配置文件/开发证书连接起来？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:12:30.467

您需要开发证书和私钥。您必须自己创建开发证书，或者要求导出这对制作它的人。

# python - Python Tkinter 循环

> ID：10463111
> 
> 赞同：1
> 
> 时间：2012-05-05T15:08:56.243
> 
> 标签：python, tkinter

我正在尝试创建一个无限循环（带中断），它在我的 Tkinter 窗口旁边运行并与它上面的小部件进行交互。是的，我**已经**完成了我的研究，但是当我运行我的代码并激活该功能时，窗口停止响应。

我已经从方法中删除了“while true”，并在它的末尾放置：

```
if self.connected:
    root.after(100, self.listenServer(id, req)) 
```

我认为问题在于该功能需要一些时间才能完成（我正在制作一个 Omegle 客户端，因此它必须连接到服务器）。我可以说它运行了六次，因为我在方法中放了一条打印语句。

有没有一种简单的~~（AKA 无线程）~~方法来解决这个问题？

好吧，如果线程是唯一的方法，那么我想它会很好

这是我的连接和监听方法：

```
 def listenServer(self, id, req):
    site = url.urlopen(req)

    #We read the HTTP output to get what's going on
    rec = site.read()

    if 'waiting' in rec:
        self.chatbox.config(state=NORMAL)
        self.chatbox.insert(END, "Waiting...\n", "italic")
        self.chatbox.config(state=DISABLED)

    elif 'connected' in rec:
        self.chatbox.config(state=NORMAL)
        self.chatbox.insert(END, "Stranger connected\n", "italic")
        self.chatbox.config(state=DISABLED)

    elif 'strangerDisconnected' in rec:
        self.chatbox.config(state=NORMAL)
        self.chatbox.insert(END, "Stranger Disconnected\n", "italic")
        self.chatbox.config(state=DISABLED)
        self.connected = False

    elif 'typing' in rec:
        self.chatbox.config(state=NORMAL)
        self.chatbox.insert(END, "Stranger is typing\n", "italic")
        self.chatbox.config(state=DISABLED)

    elif 'gotMessage' in rec:
        self.chatbox.config(state=NORMAL)
        self.chatbox.insert(END, "Stranger: " + rec[17:len(rec) - 3] + "\n")
        self.chatbox.config(state=DISABLED)

def OmegleConnect(self):
    self.chatbox.config(state=NORMAL)
    self.chatbox.insert(END, "Connecting...\n", "italic")
    self.chatbox.config(state=DISABLED)

    site = url.urlopen('http://omegle.com/start', '')
    id = site.read()
    id = id[1:len(id) - 1]
    self.chatbox.config(state=NORMAL)
    self.chatbox.insert(END, "Stranger ID: " + id + "\n", "title")
    self.chatbox.config(state=DISABLED)
    req = url.Request('http://omegle.com/events', urllib.urlencode({'id':id}))
    self.chatbox.config(state=NORMAL)
    self.chatbox.insert(END, "Finding a stranger...\n", "italic")
    self.chatbox.config(state=DISABLED)
    self.connected = True
    root.after(100, self.listenServer(id, req)) 
```

是的，我知道它写入文本小部件的方式效率很低。我尝试了一种方法来更容易地做到这一点，但它不起作用。一旦我启动并运行它，我会担心这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:11:52.910

这里的问题是窗口需要不断更新，以便窗口对输入做出反应——这是程序工作方式的现实，并且是有意义的。

另一方面，您想在不允许窗口更新的循环中执行某些操作 - 鉴于此，窗口无法做出反应。

所以不，没有解决方案不会以某种方式涉及线程或多处理 - 你需要一次做两件事。

# 可能的解决方案：

如果您不想直接处理线程，您可以使用一个库[`twisted`](http://twistedmatrix.com/)来提供您正在谈论的网络，这将避免您等待您的请求完成。

另一个主要选项是使用[`multiprocessing`模块](http://docs.python.org/library/multiprocessing.html)或[`threading`模块](http://docs.python.org/library/threading.html#module-threading)将您想要同时做的事情移动到将界面更新到新线程/进程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:10:01.673

如果您不想使用线程：

```
tkinterwidget.update() # repaint & use events 
```

或者如果你想安排一些事情：

```
class MainWindo(Tk):

    ...

    def method(self):
        # do something here for every 100 ms
        if loop:
            self.after(100, self.method) 
```

注意不要从两个线程与 Tkinter 交互。我的程序有时会因此而崩溃。

# android - 三星我的文件资源管理器：选择文件意图

> ID：10463112
> 
> 赞同：8
> 
> 时间：2012-05-05T15:09:09.507
> 
> 标签：android, file, android-intent, explorer

我想启动一个可以返回任何类型文件的意图选择器。以下代码适用于通常的文件浏览器（ES、Astro 等），但不适用于内置的三星我的文件浏览器。

```
Intent selectFile = new Intent(Intent.ACTION_GET_CONTENT);
selectFile.setType("file/*");
startActivityForResult(Intent.createChooser(selectFile, "Select File"), SELECT_FILE); 
```

有谁知道如何处理那个三星浏览器？我尝试使用 Intent selectFile = new Intent("com.sec.android.app.myfiles.PICK_DATA") 但它似乎不起作用。

有任何想法吗？谢谢。

更新：我使用了这段代码

```
Intent selectFile = new Intent();
selectFile.setAction("com.sec.android.app.myfiles.PICK_DATA");
startActivityForResult(selectFile, SELECT_FILE); 
```

但我收到此错误：在请求结果时使用了 FORWARD_RESULT_FLAG。有谁知道这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T08:48:27.653

```
Intent samsungIntent = new Intent();
samsungIntent.setAction("com.sec.android.app.myfiles.PICK_DATA");
samsungIntent.putExtra("CONTENT_TYPE", "*/*"); 
```

从 setType 更改为 putExtra 可以解决问题。

# mysql - MySQL - 如何使用列约束声明主键？

> ID：10463117
> 
> 赞同：1
> 
> 时间：2012-05-05T15:09:45.290
> 
> 标签：mysql, sql, database, database-design

您好，我正在使用 MySQL，并且已经在我的 SQL 中使用表约束声明了原子主键，这是一个不好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:26:00.697

当您说“列约束”时，您是说这个吗？

```
CREATE TABLE `clients` (
  `id` int(11) NOT NULL auto_increment PRIMARY KEY,
  `created` datetime NOT NULL,
  `email` varchar(150) NOT NULL,
  `notes` text NOT NULL
); 
```

它们中的任何一个本质上都没有什么不好（这只是句法上的差异）。

上面的“in column”语法稍短一些，因此当您不关心命名约束并且 PK 仅跨越一个字段时，您可能希望使用它。

相反，如果你想命名主键或者它是复合的，你会使用“表级”语法。

以下是跨两列的命名 PK 示例：

```
CREATE TABLE `clients` (
  ...
  CONSTRAINT `my_primary_key` PRIMARY KEY (`id1`, `id2`)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:23:36.657

你所拥有的是最佳实践。在列之后具有所有约束。

更容易阅读（至少对我而言）：所有约束（和索引）都在表的定义中组合在一起。

一致性：不能将复合主键声明为列约束，因此通过这种方式，您可以在所有表​​定义中的同一位置声明所有主键约束。

不易出错：必须以这种方式定义外键约束。如果您尝试将它们定义为列约束，它们会在 MySQL 中（默默地）被忽略！

* * *

我不确定在这种情况下“原子”应该是什么意思，我想这意味着密钥不是复合（复合），而只有一列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:50:32.433

虽然不完全是主键的答案，但这里有一个由开发人员手工制作的列级和表级内容的示例：

Sql 服务器：

```
create table zz
(
id int not null primary key,
lastname varchar(50) not null check(len(lastname) >= 2),
x numeric(18,4) not null,
y numeric(18,4) not null,
constraint ck_balance check(x - y >= 0)
); 
```

您可以在 Sql Server 管理工具上看到它是否使您的列级预期内容真正驻留在列中：

```
CREATE TABLE [dbo].[zz](
    [id] [int] NOT NULL,
    [lastname] [varchar](50) NOT NULL,
    [x] [numeric](18, 4) NOT NULL,
    [y] [numeric](18, 4) NOT NULL,
PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[zz]  WITH CHECK ADD CHECK  ((len([lastname])>=(2)))
GO

ALTER TABLE [dbo].[zz]  WITH CHECK ADD  CONSTRAINT [ck_balance] CHECK  ((([x]-[y])>=(0)))
GO

ALTER TABLE [dbo].[zz] CHECK CONSTRAINT [ck_balance]
GO 
```

只有列级检查约束（姓氏字段）获得列级处理。其他诸如主键（即使它是单个字段）和约束检查两个数字是否平衡的事情都在表级别。

我看不到您的数据库将如何将*列约束*（主键）放在列级别上，主键信息无论如何都会保存在表级别上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T15:29:41.083

*当您执行此列约束*时，它们都是相同的：

```
create table xx(
    id int primary key,
    txt text not null   
); 
```

当你的数据库管理工具用它创建一个脚本时，它是这样的：

```
CREATE TABLE xx
(
  id integer NOT NULL,
  txt text NOT NULL,
  CONSTRAINT xx_pkey PRIMARY KEY (id )
) 
```

使主键成为*表约束*的优点是您可以以更具描述性的方式命名您的主键。

第一种方法（表约束）的另一个优点是，如果您决定创建复合主键，则可以实现：

```
create table yy
(
   country_id int not null,
   city_id int not null,
   population int,
   constraint xx_primary_key primary key(country_id, city_id)
); 
```

您不能使用*列约束*执行此操作：

```
create table yy
(
   country_id int not null primary key,
   city_id int not null primary key,
   population int not null
); 
```

*无论哪种方式，您的朋友对列约束*都不准确，没有*列约束*（原文如此）之类的东西（他们可能意味着列级主键），没有保存列的*主*键信息在列级别（即使您使用单列主键）

将 PRIMARY KEY 放在列级别只是一种语法方便，但它们没有保存在那里，您的 RDBMS 仍会将这些信息放在表级别

# php - 使用 PHP 添加类以突出显示所选菜单的最简单方法是什么？

> ID：10463118
> 
> 赞同：0
> 
> 时间：2012-05-05T15:09:49.113
> 
> 标签：php, css, menu, highlight

我在所有页面中都有一个这样的菜单，并且想添加一个 CSS 类来根据页面突出显示选定的菜单。

哪种方法**最简单**？

```
<div id="menu">
   <a href="index.php" class="item-menu">Home</a>
   <a href="projects.php" class="item-menu">Projects</a>   
   <a href="contact.php" class="item-menu">Contact</a>            
</div> 
```

菜单代码位于一个`menu.php`在所有页面中调用的文件中。我可以通过曲折的方式（使用 IF 或其他东西）实现我想要的，但我正在寻找一个简单的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T15:12:59.297

这很脏但很容易：

```
<div id="menu">
   <a href="index.php" class="item-menu<?php if( basename( $_SERVER["SCRIPT_FILENAME"] ) == 'index.php' ) echo ' active';?>">Home</a>
   <a href="projects.php" class="item-menu<?php if( basename( $_SERVER["SCRIPT_FILENAME"] ) == 'projects.php' ) echo ' active';?>">Projects</a>   
   <a href="contact.php" class="item-menu<?php if( basename( $_SERVER["SCRIPT_FILENAME"] ) == 'contact.php' ) echo ' active';?>">Contact</a>            
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:12:14.983

这应该可以帮助您入门

```
<div id="menu">
    <a href="index.php" class="item-menu <?= $_SERVER['REDIRECT_URL'] == '/index.php' ? 'selected' : '' ?>">Home</a>
    <a href="projects.php <?= $_SERVER['REDIRECT_URL'] == '/projects.php' ? 'selected' : '' ?>" class="item-menu">Projects</a>   
    <a href="contact.php <?= $_SERVER['REDIRECT_URL'] == '/contact.php' ? 'selected' : '' ?>" class="item-menu">Contact</a>            
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:16:28.580

作为已经提出的解决方案的替代方案，您可以简单地向主`<ul/>`元素添加一个类，然后为每个组合设置 CSS：

```
<div id="menu" class="home">
   <a href="index.php" class="home item-menu">Home</a>
   <a href="projects.php" class="projects item-menu">Projects</a>   
   <a href="contact.php" class="contact item-menu">Contact</a>            
</div>​

#menu.home a.home,
#menu.projects a.projects,
#menu.contact a.contact {
    /* Active link CSS */
}​ 
```

然后，您只需要使用 PHP 来确定`#menu`. 这可以通过几种不同的方式完成，具体取决于您的应用程序的设置方式。如果您`menu.php`只是被包含在其他页面中，您可以将此类放在其他位置（例如`<body/>`元素上）并将以前的 CSS 调整为类似`body.home #menu a.home, ...`.

查看一个工作示例 - [http://jsfiddle.net/jaredhoyt/7TX4h/](http://jsfiddle.net/jaredhoyt/7TX4h/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T15:20:53.317

根据您的决定获取元素并将类名添加到类属性中：

```
if ($res = $xpath->query(sprintf('//a[@href="%s"]', basename($_SERVER['SCRIPT_FILENAME'])))
{
    $res->item(0)->setAttribute('class', $res->item(0)->getAttribute('class') . ' active');
} 
```

这假设您在 dom 元素中有菜单，并且您`DOMXpath`可以使用它 ( `$xpath`)。

# ios - 原生 IOS 应用和 node.js

> ID：10463121
> 
> 赞同：64
> 
> 时间：2012-05-05T15:10:01.520
> 
> 标签：ios, node.js, native

是否可以使用 node.js 创建本机 ios 应用程序，是否有人有任何示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-22T22:09:53.940

我一直在寻找这个，尽管其中许多答案都非常正确地指出 V8 与 iOS 不兼容，但似乎在 iOS 中运行类似节点的环境并非完全不可能。

我发现的第一个选项叫做“Neunode”（一年没有更新）。如果您想要更多，这里有一些参考链接：

*   [https://github.com/snakajima/neunode](https://github.com/snakajima/neunode)
*   [http://www.neunode.com](http://www.neunode.com)
*   [https://www.youtube.com/watch?v=xzFH80-HYTo（httpserver](https://www.youtube.com/watch?v=xzFH80-HYTo)示例）

* * *

# [Nodelike / Node.app 项目](https://github.com/node-app/Nodelike)

> Nodelike 是 Node.app 项目的核心框架，其目标是在 iOS 7 和 OS X Mavericks 上使用 JavaScriptCore.framework 实现大致与 Node.JS 兼容的接口。

### [示例：口译员](https://github.com/node-app/Interpreter)

> 使用 Nodelike 框架将 Node.JS 解释器实现为 iOS 应用程序的示例项目。

*编辑：*

*它仍然“不适用于严肃的项目”，但在以下位置结帐更新： [https ://github.com/node-app/Nodelike](https://github.com/node-app/Nodelike)*

* * *

总的来说，Node.app 项目看起来很有希望，一定要查看他们的[网站](http://nodeapp.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-26T08:32:38.050

**是的！**您可以在 iOS 设备上运行 Node 应用程序。Node.JS fork除了 Google 的 V8 之外，[JXcore还实现了 SpiderMonkey JavaScript 引擎。](http://jxcore.io)源代码存储库可从[Github获得](https://github.com/jxcore/jxcore)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:18:11.943

不，您不能使用 Node.js 创建本机 iOS 应用程序。除非您找到安装 Node.js 的方法，否则这将是非常自定义的并且需要对手机进行 root。

请问你想达到什么目的？我可以为您指出正确的方向。除非你只是好奇 Node 是否可以在 iOS 上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-22T14:21:38.600

有一个相对较新的项目试图存档： http: [//nodeapp.org/](http://nodeapp.org/)

它正在积极开发中，并且已经支持大多数基本的东西和文件系统访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T15:14:46.830

不可以。但是您可以使用 Unity 之类的工具以 Javascript（与 Node 的语言相同，即服务器运行的 javascript）编写本机应用程序。

另外，欢迎来到 SO！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-23T16:50:00.473

正如 Nuray Altin 所提到的，您可以使用[JXcore](https://github.com/jxcore/jxcore)及其[Cordova 插件来完成](https://github.com/jxcore/jxcore-cordova)。这是一篇关于该主题的文章：[使用 Node.js 和 Cordova 开发 iOS 应用程序](http://modernweb.com/2015/03/19/develop-an-ios-application-with-node-js-and-cordova)。

它逐步完成整个过程（从源代码编译 JXcore、安装 Apache Cordova、创建应用程序等）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-22T04:21:45.393

我应该提一下，您可以将 node.js 编译成 arm-emu-arm 模式，它可以在 iOS 上运行而不会出现问题。它可以“假设地”被 Apple 的应用程序商店接受，但是有数百个原因说明为什么没有人（更不用说应用程序商店）会接受节点应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-16T15:39:59.853

由于沙盒限制，您无法在本机 iOS 应用程序中运行适当的 Node.js 环境。

话虽如此，有几个项目可以让您在本机（iOS/Android）应用程序中嵌入/运行 Node.js 应用程序。

这可能是最受欢迎的项目：http: [//jxcore.io/](http://jxcore.io/)

这是一个使用 JXcore 的示例 iOS 项目：[https ://github.com/jxcore/jxcore-ios-sample](https://github.com/jxcore/jxcore-ios-sample)

# jquery - JQuery解析JSON数组

> ID：10463131
> 
> 赞同：28
> 
> 时间：2012-05-05T15:11:19.127
> 
> 标签：jquery, arrays, json, jquery-mobile, getjson

我有`JSON`如下输出：

```
["City1","City2","City3"] 
```

我想获取每个城市名称，我该怎么做？

```
$.getJSON("url_with_json_here",function(json){

}); 
```

编辑：

```
$.getJSON('url_here', function(data){
    $.each(data, function (index, value) {
      $('#results').append('<p>'+value+'</p>');
        console.log(value);
    });
}); 
```

以上似乎不起作用，没有输出任何值。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-05T15:22:09.730

[`getJSON()`](http://api.jquery.com/jQuery.getJSON/)获取后还将为您解析 JSON，因此从那时起，您将使用一个简单的 Javascript 数组（`[]`在 JSON 中标记一个数组）。该文档还包含有关如何处理获取的数据的示例。

[您可以使用`for`循环](https://stackoverflow.com/questions/3010840/loop-through-array-in-javascript)获取数组中的所有值：

```
$.getJSON("url_with_json_here", function(data){
    for (var i = 0, len = data.length; i < len; i++) {
        console.log(data[i]);
    }
}); 
```

检查您的控制台以查看输出（[Chrome](https://developers.google.com/chrome-developer-tools/docs/console)、[Firefox/Firebug](http://getfirebug.com/logging)、[IE](https://stackoverflow.com/questions/2656730/internet-explorer-console)）。

jQuery 还提供[`$.each()`](http://api.jquery.com/jQuery.each/)了迭代，所以你也可以这样做：

```
$.getJSON("url_with_json_here", function(data){
    $.each(data, function (index, value) {
        console.log(value);
    });
}); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-05T15:14:26.707

使用[`parseJSON`方法](http://api.jquery.com/jQuery.parseJSON/)：

```
var json = '["City1","City2","City3"]';
var arr = $.parseJSON(json); 
```

然后你有一个包含城市名称的数组。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-03T20:09:38.690

```
var dataArray = [];
var obj = jQuery.parseJSON(yourInput);

$.each(obj, function (index, value) {
    dataArray.push([value["yourID"].toString(), value["yourValue"] ]);
}); 
```

这对我有很大帮助:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T09:41:08.760

```
var dataArray = [];
var obj = jQuery.parseJSON(response);
  for( key in obj ) 
  dataArray.push([key.toString(), obj [key]]);
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-31T10:13:28.267

和`parse.JSON`

```
var obj = jQuery.parseJSON( '{ "name": "John" }' );
alert( obj.name === "John" ); 
```

# redis - Redis 可以在进程中运行 w/.net 吗？

> ID：10463138
> 
> 赞同：7
> 
> 时间：2012-05-05T15:12:05.093
> 
> 标签：redis

是否可以在 .NET 下运行 Redis？

我了解一般用例是 Redis 不在进程中，并且可能在另一台服务器上。我正在开发的应用程序需要进程内缓存和进程外缓存。我的想法是，我想为进程内和进程外的需求使用相同的应用程序/库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T19:33:48.480

不，你不能那样做。您应该`Cache`在进程中使用或类似。

但是您绝对走在正确的轨道上，进行 2 级缓存 (L1+L2)。Stack Exchange 自己也这样做。参见例如：

*   [https://stackoverflow.com/a/6478883/290343](https://stackoverflow.com/a/6478883/290343)
*   [http://highscalability.com/blog/2011/3/3/stack-overflow-architecture-update-now-at-95-million-page-vi.html](http://highscalability.com/blog/2011/3/3/stack-overflow-architecture-update-now-at-95-million-page-vi.html)

# php - 如果 Id 匹配，则 PHP/mysql 插入信息 否则插入不同的信息

> ID：10463144
> 
> 赞同：0
> 
> 时间：2012-05-05T15:12:22.683
> 
> 标签：php, mysql

好的所以这已经被修改了仍然有3个表板，帐户，日志

感谢 Bryan Moyles，他让我顿悟

这是我的代码

```
$query=$S->query("
    SELECT
        `TBL`.`LAcc`,
        `TBL`.`AId`,
        `TBL`.`Add`,
        `TBL`.`Lost`,
        `TBL`.`LDate`,
        `TBL`.`FDate`

        FROM (
            SELECT 
                (SELECT SUM(`Add`) FROM `m_rules` GROUP BY `Group`) AS `Add`,
                `S`.`Account` as `LAcc`,
                `P`.`Id` as `AId`,
                SUM(`S`.`Loss`*`S`.`Multiple`) AS `Lost`,
                MAX(`S`.`Timestamp`) AS `LDate`,
                MIN(`S`.`Timestamp`) AS `FDate`
                    FROM `log` AS S,`account` AS P

            GROUP BY `P`.`Id`
        ) as `TBL`
        WHERE `TBL`.`FDate` <= NOW()
        AND `TBL`.`LDate` >= DATE_SUB(NOW(), INTERVAL 1 DAY)

") or die(mysql_error());

    while($Log=$S->fetch($query)) { 

        if($Log['AId']==$Log['LAcc']) {
            $Score=$Log['Add']-$Log['Lost'];
        } else {
            $Score='Bonus';
        }

        /*
            echoing to see results
        */
        echo $Log['AId'].' : '.$Score.'<br />';

        /* 
        This is what the query would look like Thanks to Bryan Moyles,

        $S->query("INSERT INTO `board` (`Account`,`Score`, `Date`)VALUES('".$Log['Id']."', '".$Score."', 'NOW()') ON DUPLICATE KEY UPDATE Score = '".$Score."'");
        */
    } 
```

所有结果都在这里：按帐户 ID 分组

```
Account Id:4, Log Account:5, Add: 97.64236, Lost:141.11371 LastDate:2012-05-04 22:07:46, FirstDate:2012-05-04 22:05:48, Score:Bonus
Account Id:5, Log Account:5, Add: 97.64236, Lost:141.11371 LastDate:2012-05-04 22:07:46, FirstDate:2012-05-04 22:05:48, Score:-43.47135
Account Id:6, Log Account:5, Add: 97.64236, Lost:141.11371 LastDate:2012-05-04 22:07:46, FirstDate:2012-05-04 22:05:48, Score:Bonus
Account Id:7, Log Account:5, Add: 97.64236, Lost:141.11371 LastDate:2012-05-04 22:07:46, FirstDate:2012-05-04 22:05:48, Score:Bonus
Account Id:8, Log Account:5, Add: 97.64236, Lost:141.11371 LastDate:2012-05-04 22:07:46, FirstDate:2012-05-04 22:05:48, Score:Bonus 
```

GROUP BY 日志帐户 ID

```
Account Id:4, Log Account:4, Add: 97.64236, Lost:119.67095 LastDate:2012-05-04 22:07:46, FirstDate:2012-05-04 22:06:29, Score:-22.02859
Account Id:4, Log Account:5, Add: 97.64236, Lost:542.30295 LastDate:2012-05-04 22:06:54, FirstDate:2012-05-04 22:05:48, Score:Bonus
Account Id:4, Log Account:6, Add: 97.64236, Lost:43.59465 LastDate:2012-05-04 22:07:06, FirstDate:2012-05-04 22:07:06, Score:Bonus 
```

我看到问题只是不确定解决方案..

**解决了！**

我换了

```
FROM `log` AS S,`account` AS P 
```

和

```
FROM `account` AS `P` LEFT JOIN `log` AS `S` ON `P`.`Id`=`S`.`Account` 
```

在原始查询中（在我在这里修改和更改之前）我有帐户并与`P`. `Id`= `S`。`Account`这没有用，所以我只是交换了日志和帐户，它可以工作.. 不敢相信这是问题，但感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:25:23.753

我不确定您将如何遇到日志不存在的情况，因为您正在根据查询结果构建数据。但是，您正在插入主键，您可以捕获重复键错误，并相应地运行更新。

查看这篇文章 [http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

```
$S->query("INSERT INTO `board` (`Account`,`Score`, `Date`)VALUES('".$Log['Id']."', '".$Score."', 'NOW()') ON DUPLICATE KEY UPDATE Score = '".$Score."'"); 
```

# javascript - 如何使用 JQuery 在任何深度上查找具有类的元素？

> ID：10463148
> 
> 赞同：1
> 
> 时间：2012-05-05T15:12:53.910
> 
> 标签：javascript, jquery

我知道我在任何深度（可能是一两个或三个，它随着时间的推移而变化）的 div 内部的某个地方，class="nested"。如何使用 JQuery 在任何深度上找到该元素？

我试过了

`var nest=$('#container_div').find('.nested');`但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T15:14:14.210

`var nest=$('#container_div').find('.nested');`也许你忘了报价？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T15:22:35.843

还有另一种有趣的语法：

```
var nest = $( '.nested', '#container_div' ); 
```

我给 jQuery 一个在哪里寻找类的*上下文*`.nested`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T15:20:45.950

其他答案没有错，但是：

```
var nest=$('#container_div .nested'); 
```

更简洁。用空格分隔选择器与`find`在选择器中相同。如果出于某种原因您只想限制直接子代，

```
var nest=$('#container_div > .nested'); 
```

# ruby-on-rails - Rails 转储文件作为响应

> ID：10463151
> 
> 赞同：0
> 
> 时间：2012-05-05T15:13:01.217
> 
> 标签：ruby-on-rails

我来自 PHP 背景，所以我知道这是可能的。我不确定如何在rails中做到这一点。

基本上不是输出文本，我想输出一个二进制流（基本上是一个文件）并抛出一个`Content-Type: audio/mpeg`以及一个`Content-Disposition`标题，以便浏览器接受它作为下载

我也有一个变量，我想打印为二进制流而不将文件写入磁盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:16:09.530

您可以使用[`send_data`](http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_data).

# bash - Tramp 使用 ssh 不来源 .bash_profile / .profile

> ID：10463152
> 
> 赞同：9
> 
> 时间：2012-05-05T15:13:05.803
> 
> 标签：bash, emacs, aquamacs, tramp

我正在使用 Aquamacs（使用 emacs 24 和 tramp 版本 2.2.3 的 OSX 图形 emacs）来编辑远程服务器上的一些文件。Tramp 设置为使用**ssh**并且在编辑文件方面工作正常。

编译时失败，因为编译器不在路径中。似乎 tramp 没有获取任何配置文件，例如**.profile**或**.bash_profile**。/bin/sh 是指向 /bin/bash 的链接，因此 bash 应该是 tramp 使用的 shell。在远程服务器上的 emacs 中启动的 shell 也不会获取任何内容。来自常规终端仿真器（在 OS X 上尝试过*终端*和*X11*）的 ssh 连接按预期工作（一切来源正确）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:05:00.567

> /bin/sh 是指向 /bin/bash 的链接，因此 bash 应该是 tramp 使用的 shell。

这是不一样的。当作为“sh”调用时，它的行为类似于 sh 而不是 bash，因此不会获取 bash 特定的 rc/profile 文件（例如 ~/.bash_profile、~/.bashrc）。但是 ~/.profile 将被读取。您的问题可能是您正在使用 bash 语法在 ~/.profile 中设置内容。

这将不起作用：

```
export PATH=/some/path:$PATH 
```

但这将：

```
PATH=/some/path:$PATH
export PATH 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-12T09:59:31.150

我遇到了这个问题，并且可以从我的 shell 历史记录中看到 tramp`/bin/sh`作为非登录 shell 执行，这意味着它`~/.profile`不会被执行。

这听起来像 emacs 手册[在这里](https://www.gnu.org/software/emacs/manual/html_node/tramp/Remote-programs.html)所说的：

> 另一种查找远程路径的方法是使用远程主机分配给远程用户的路径。Tramp 在登录后通常不会保留此远程路径。但是，tramp-own-remote-path 保留了路径值，可用于更新 tramp-remote-path。
> 
> ```
>  (add-to-list 'tramp-remote-path 'tramp-own-remote-path) 
> ```
> 
> 请注意，这仅在您的远程 /bin/sh shell 支持登录参数“-l”时才有效。

如预期的那样，添加`'tramp-own-remote-path`到我在历史记录和来源中看到的命令`tramp-remote-path`中添加了标志。`-l``~/.profile`

（这在[Ivan 评论](https://stackoverflow.com/questions/10463152/tramp-using-ssh-does-not-source-bash-profile-profile#comment44690209_10463152)中链接的问题[的已接受答案](https://emacs.stackexchange.com/a/7685)中有所描述，但没有提到 PATH 受到 sourcing 的尊重，这意味着可以在该文件中完成其他环境定制。）`~/.profile`

# javascript - Fabric.js - 在新创建的路径上实现形状识别

> ID：10463158
> 
> 赞同：0
> 
> 时间：2012-05-05T15:14:02.550
> 
> 标签：javascript, html, canvas, fabricjs

我想将基本的形状识别功能添加到基于 Fabric.js 的项目中。我目前使用 path:created 观察者来获取新创建的路径，然后将路径表示传递给一个函数，该函数可以确定路径是否创建某种形状，我只是想知道整个路径实际上是如何表示的.

我可以看到路径对象有一个路径数组，它表示路径本身，但不能完全弄清楚它是如何做到的，如果有人对实现这种功能有更好的想法，我会很高兴听到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:19:44.930

创建的路径是`fabric.Path`. `fabric.Path`或多或少反映了[SVG <path> 元素](http://www.w3.org/TR/SVG/paths.html#PathElement)的格式（另见[路径数据](http://www.w3.org/TR/SVG/paths.html#PathData)）。`fabric.Path::render` [解析这些数据并相应地呈现形状](https://github.com/kangax/fabric.js/blob/master/src/path.class.js#L245-435)。

# scala - 控制器操作无法使用“发现类型不匹配：所需单元：play.api.mvc.Result”进行编译

> ID：10463160
> 
> 赞同：3
> 
> 时间：2012-05-05T15:14:21.910
> 
> 标签：scala, playframework, contacts, exchangewebservices

我是 Scala 和 Play 框架的新手。我必须创建一个“联系人”模块，但出现以下错误：

```
type mismatch found : Unit required: play.api.mvc.Result 
    contactVal.save()
where contactVal is defined as 
    val contactVal  = new Contact(service) where service is 
    val service = new ExchangeService() 
```

如何保存新的 EWS 联系人？

我的代码：

```
def add = Action(parse.json) {
  implicit r=>
    val contactVal  = new Contact(service)
    val userId = (r.body \ "userId").asOpt[String].getOrElse("")
    val contactId = (r.body \ "id").asOpt[String].getOrElse("")
    val givenName = (r.body \ "givenName").asOpt[String].getOrElse("")
    val fName = (r.body \ "fName").asOpt[String].getOrElse("")
    val lName = (r.body \ "lName").asOpt[String].getOrElse("")
    val displayName = (r.body \ "displayName").asOpt[String].getOrElse("")
    val emailId1 = (r.body \ "emailId1").asOpt[String].getOrElse("")

    val streetB = (r.body \ "streetB").asOpt[String].getOrElse("")
    val cityB = (r.body \ "cityB").asOpt[String].getOrElse("")
    val stateB = (r.body \ "stateB").asOpt[String].getOrElse("")
    val postalcodeB = (r.body \ "postalcodeB").asOpt[String].getOrElse("")
    val countryB = (r.body \ "countryB").asOpt[String].getOrElse("")
    val phoneHome = (r.body \ "phoneHome").asOpt[Int].getOrElse("")
    val bday = (r.body \ "bday").asOpt[String].getOrElse("")

    contactVal.setGivenName(givenName)
    contactVal.setNickName(fName)
    contactVal.setSurname(lName)
    contactVal.setDisplayName(displayName)

    val bdayDate= new Date()
    bdayDate.setDate(bday.toInt)
    contactVal.setBirthday(bdayDate)

    contactVal.save()
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T17:08:08.183

问题是 Action 正文中的最后一行代码没有返回 play.api.mvc.Result 对象。

见：[http ://www.playframework.org/documentation/2.0.1/ScalaActions](http://www.playframework.org/documentation/2.0.1/ScalaActions)

尝试在动作主体的末尾添加一个 Ok（或其他一些 SimpleResult 对象）。例子：

```
def add = Action(parse.json) { request =>
  ...
  contactVal.save()
  Ok("contact saved") // or if you want to render a templated: Ok(someTemplate())
} 
```

# ruby-on-rails - Rails：简单的 update_attributes 不起作用

> ID：10463169
> 
> 赞同：0
> 
> 时间：2012-05-05T15:15:14.803
> 
> 标签：ruby-on-rails, attributes, update-attributes

我有一个带有属性“turn_index”的“rota”模型。出于某种原因， update_attributes 似乎不起作用。任何线索为什么？

```
 rota = Rota.create
  rota.turn_index.should == 0 -- passes
  rota.update_attributes(:turn_index=>1)
  rota.turn_index.should == 1 -- fails 
```

rota 的架构是：

```
 create_table "rotas", :force => true do |t|
    t.string   "name"
    t.integer  "turn_index"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end 
```

罗塔型号：

```
class Rota < ActiveRecord::Base
  has_many :rotazations
  has_many :users, :through => :rotazations
  has_many :invitations

  before_save :set_turn_index

  private

  def set_turn_index
    self.turn_index = 0
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:33:48.727

你`before_save`总是设置`turn_index`为 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:36:16.330

在 上`before_save`，您设置`turn_index`为 0。您可以通过仅在创建时设置它来解决此问题：

```
before_save :set_turn_index, on: :create 
```

`turn_index`或者在迁移中将默认值设置为 0。

# c# - 如何在 NHibernate 和 C# 中映射子类和子类属性

> ID：10463171
> 
> 赞同：0
> 
> 时间：2012-05-05T15:15:42.993
> 
> 标签：c#, xml, nhibernate

**如何在 Nhibernate 中映射这种类型的子类容器情况。**帮我提供映射xml结构

*我的班级结构*

```
public class Employee
{
    public virtual int EmpID;
    public virtual string EmpName;
    public virtual Audit AuditDetails;
}

public class Audit
{
    public virtual User CreatedBy;
    public virtual DateTime CreatedOn;
    public virtual User ModifiedBy;
    public virtual DateTime ModifiedOn;
}

public class User
{
    public virtual int UserID;
    public virtual string FullName;
    public virtual Audit AuditDetails;
} 
```

*我的数据库表结构*

```
Employee
EmpID(int pk) | EmpName(varchar) | CreatedBy(int) | ModifiedBy(int) | CreatedOn(date) | ModifiedOn(date)

User
UserID (int pk) | FullName(varchar) | CreatedBy(int) | ModifiedBy(int) | CreatedOn(date) | ModifiedOn(date) 
```

使用**NHibernate**和**C#**我希望解决这种情况。
我的大多数表都包含**审核详细信息**（创建者、修改者和它们的日期时间），
我希望以这样的方式进行映射，即**用户 ID**应保存为**CreatedBy**和**ModifiedBy**字段，而日期是直接映射。但是这些所有细节都是我的班级结构中
一个名为**Audit的单独实体。**
请通过为此类情况提供映射表来帮助我。
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:20:53.243

如果要将审计实体放在同一个表中，则需要使用`<component>`. 这是一个教程：

[http://ayende.com/blog/3937/nhibernate-mapping-component](http://ayende.com/blog/3937/nhibernate-mapping-component)

# php - 怎么下载以前版本的PHP源代码

> ID：10463177
> 
> 赞同：2
> 
> 时间：2012-05-05T15:16:32.680
> 
> 标签：php, download

大家好，我想下载php 5.1.6的源码，但是php官网(http://php.net/downloads.php)只有5.4和5.3，那我怎么下载5.1.6的源码呢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T15:19:45.177

您可以在以下位置下载它：

[http://www.php.net/releases/](http://www.php.net/releases/)

这可以追溯到 3.0.18

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T15:18:28.063

[https://github.com/php/php-src/tags](https://github.com/php/php-src/tags) 或 [https://github.com/php/php-src/tree/PHP-5.1](https://github.com/php/php-src/tree/PHP-5.1)

# c++ - OOP 中联合的使用

> ID：10463185
> 
> 赞同：5
> 
> 时间：2012-05-05T15:17:19.157
> 
> 标签：c++, language-lawyer, unions

联合可以像类和结构一样用作类型（有一些限制）。它可以有成员函数。它可以用作 OOP 构造。

据我了解，联合只是被导入到 C++ 中以保持与 C 的向后兼容性。
在这些年的编程中，我从未像使用类或结构作为 OOP 构造那样使用联合。

Union 是否有任何实际用途作为 OOP 构造（不仅仅是作为数据类型），或者它只是语言的一些残留部分，永远不会有用？

* * *

**编辑：**
该标准绝对允许联合充当 OOP 构造。它允许在联合中使用成员函数。以下代码可以编译和工作，并且符合标准：

```
union A
{
    int a;
    int k;

    void doSomething(){}

};

int main()
{
    A obj;
    int i = obj.a;
    obj.doSomething();
    return 0;
} 
```

如果不应该充当 OOP 构造，为什么标准允许联合中的成员函数？
请发布带有具体推理的答案，并且请不要发布*我不这么认为*的答案，没有很好的理由说明*为什么？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T16:16:53.963

**不**，联合不是面向对象的构造。

OO 最重要的一个特性是多态性，但联合不能参与继承关系（不能是不同类型的基，本身不能有基）或具有虚函数。联合的唯一目的是提供数据类型，而不是*对象*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:21:49.357

我个人的看法是“不”。

从历史上看，C 允许开发人员对主机系统进行低级访问，以非常灵活的方式访问内存。通过提供一种构造来将相同的内存区域视为不同的数据类型，这种灵活性变得更加容易。

但是很难看出如何将其归类为任何类型的面向对象构造。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:23:52.333

我认为**没有**。

**工会与****面向对象**无关。

C++ 从未说过它只打算支持 OO。C++ 从一开始就支持**多种范式**（同时：过程式、函数式、生成式、面向对象）

C++ 11 支持“**不受限制的联合**”，但从 OO 的角度来看，我没有看到任何用法

根据作者，**面向对象**需要以下问题：

*   身份
*   继承/通才
*   多态性
*   封装

在**工会**的情况下，第一个问题是有效的。可以识别联合（例如通过其地址）

没有可用于联合的**继承**概念。

有人可能会争辩说数据是联合中的多态，但这种解释与 oo 认为的多态相去甚远。联合不能有虚函数，如果没有继承，这几乎是无用的。它会破坏内存布局。

联合中有**封装**。但是，由于限制，我不希望这种情况下有用的应用程序。如果有的话，我会很感激一个链接

有了这组功能，我认为“抽象数据类型”（ADA）是正确的术语。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T15:53:05.503

这不是一个好的做法，但假设您可以强有力地保证只有一个字段处于活动状态：

```
class multi_type {
private:
    bool unit_is_float;
    union {
        float float_member;
        int int_member;
    };
public:
    multi_type(bool is_float) : unit_is_float(is_float) {}
    bool isFloat() { return unit_is_float; }
    bool isInt() { return !unit_is_float; }
    float& getFloat() {
        if (!isFloat()) throw std::logic_error("not a float");
        return float_member;
    }
    int& getInt() {
        if (!isInt()) throw std::logic_error("not an int");
        return int_member;
    }
}; 
```

格式要简洁，不漂亮。

有效的应用程序可能位于某种解析库中，其中要解析的语言可以具有不同类型的标记，这些标记只能在运行时确定。它是使用 void*s 的替代方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T19:49:22.100

来自[微软的帮助](http://msdn.microsoft.com/en-us/library/5dxy4b7b%28v=vs.80%29.aspx)：

> C++ 联合是类类型的有限形式。它可以包含访问说明符（public、protected、private）、成员数据和成员函数，包括构造函数和析构函数。它不能包含虚函数或静态数据成员。它不能用作基类，也不能有基类。工会成员的默认访问权限是公开的。

甚至可以对联合进行模板化（参见例如[模板 - 完整指南](https://rads.stackoverflow.com/amzn/click/com/B003YL3OYG)）。从这个意义上说，联合提供了几乎相同*程度*的**封装**。

尽管有所有这些语法限制，联合确实填补了破坏 C++ 类型系统的一个小漏洞。考虑这些松散的对应关系：

```
class/struct with virtual functions    <--> dynamic_cast
class/struct without virtual functions <--> static_cast
union                                  <--> reinterpret_cast 
```

**多态性**就是以安全和受控的方式破坏类型系统。**类和结构及时**打破了类型系统。使用虚函数，我们可以在运行时打破类型系统；如果没有虚函数，我们可以在编译时完成（尤其是使用模板）。另一方面，联合可以破坏类型系统**。**请注意，多态性和封装齐头并进：任何可能更改的内容都对用户隐藏（通过 vtable、编译时查找或数据重新解释）。

这是否足以将联合标记为 OO 编程风格的一部分，这对我来说似乎是一个品味问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T15:25:16.383

如果您的数据基于上下文具有不同的解释和类型，则作为低级构造，联合将很有用。从这个意义上说，与保留不能同时存在的不同字段相比，它可以帮助您保持对象更小。

这是对 OOP 的有效关注吗？有点，我猜...

--

人们对它们进行的一种黑客攻击是访问具有不同名称的不同字节（典型示例是具有 4 个字节 r、g、b、a 和一个 32 位整数颜色的联合），但这有潜在的危险[https://stackoverflow。 com/a/1582389/278842](https://stackoverflow.com/a/1582389/278842)。

# c# - 从 SQL 数据库中删除

> ID：10463188
> 
> 赞同：1
> 
> 时间：2012-05-05T15:17:35.147
> 
> 标签：c#, mysql, linq

我正在尝试从 MySQL 数据库中删除分配。这样做时，我将删除所有元素和虚假内容，如下所示。问题是，当它到达 deleteboguses 方法中的 for 循环时，它会引发异常“EntityCommandExecutionException”，任何想法为什么会这样做？我究竟做错了什么？

```
public static void DeleteAssignment(int id)
    {
        var deleteAssignment = from assignment in context.assignment
                               where assignment.id == id
                               select assignment;
        DeleteElement(id);
        foreach (assignment a in deleteAssignment)
        {
            context.assignment.DeleteObject(a);
        }
        context.SaveChanges();
    }

    public static void DeleteElement(int id)
    {
        var deleteElement = from element in context.element
                            where element.assId == id
                            select element;
        foreach(var e in deleteElement)
        {
            DeleteBoguses(e.id);
            context.element.DeleteObject(e);
        }
        context.SaveChanges();
    }

    public static void DeleteBoguses(int id)
    {
        var deleteBogus = from b in context.bogus
                          where b.elementId == id
                          select b;
        foreach(var b in deleteBogus)
        {
            context.bogus.DeleteObject(b);
        }
        context.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:54:41.877

就像您需要此修复程序的原因的解释一样，这个问题在技术上仍然是开放的。

`IEnumerable`，就像`deleteElement`您方法中的变量一样，`DeleteElement`在枚举值时不会接受用户从其集合中删除项目。

为了解决这个问题，您可以使用该`ToList()`函数创建值的副本。这样可以安全地删除原始列表中的项目，同时仍循环其值。

# c++ - 有没有办法从它的类外部声明一个 C++ 保护变量？

> ID：10463189
> 
> 赞同：0
> 
> 时间：2012-05-05T15:17:46.317
> 
> 标签：c++, class, variables, protected

```
class A {
public:
    A();
    int get();
    void set();
};

protected int A::var; 
```

似乎它会工作。但是，它“在受保护之前期望一个不合格的 id”。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T15:18:58.453

简而言之，不，这是不可能的。

用复杂的话来说，这是不可能的，因为标准`protected`只允许在类定义中使用关键字和访问说明符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T15:21:57.513

编译器如何知道要为类的实例分配多少空间？考虑

```
A foo;
protected int A::var;
A bar; 
```

编译器如何知道在分配空间`var`时分配空间`foo`？第一行和第二行甚至可以在不同的翻译单元中。

所以，不，这是不可能的，因为它没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:24:41.470

没有办法*完全按照*您的意愿去做（正如其他人所说），但是如果您只是不想向您班级的用户透露`protected`/`private`成员，那么围绕这个有“黑客”。您可以创建一个`PrivateBase`和`PublicBase`类，然后创建一个使用多重继承或组合前两个类的第三个类。通常，这样做是因为您想要分发头文件但又不想透露所有私人成员。

[这是一个例子](https://stackoverflow.com/a/4619846/277718)。我相信斯科特迈耶斯在他的一本书中也有一个例子。这是更多的工作，并使您的维护更加复杂，所以请记住这一点。

# c - 如何在 C 中为 Ubuntu 控制台程序编写条件循环

> ID：10463191
> 
> 赞同：-1
> 
> 时间：2012-05-05T15:17:58.073
> 
> 标签：c, linux

您将如何或是否可以在 ubuntu 终端中用 C 语言编写条件 if 循环。这是我必须在大学里写的一个项目。

据我所知，我认为该语言是 C 语言。

我会用伪代码写我的问题，任何帮助都会很棒。

```
global x variable
global y variable

please enter X (x has to be a value between 1-100)
if anything other than 1-100 then repeat and ask for x again

once the value has been identified as 1-100
please enter Y
if anything other than 1-100 enter ask again

once the two values have been entered scan into a 2d array. 
```

例子：

```
please enter x: d
please enter x: d
please enter x: 5
please enter y: f
please enter y: 5

1 2 3 4 5
1 2 3 4 5
1 2 3 4 5
1 2 3 4 5 
1 2 3 4 5 
```

感谢您的任何建议。

我的讲师再次说过这个模块是 C 和 Ubuntu Linux 中的控制台只是为了澄清。

这是我到目前为止所拥有的；对其中的所有评论感到抱歉，我必须发表评论以展示他们作为任务的一部分所做的一切。

```
#include <stdio.h>  //this defines the library to use within c//  
#include <stdlib.h> //this defines the library to use within c//
#include <time.h>   //this defines the library to use within c//

int x; /*this sets the initial variables to program*/
int y; /*this sets the initial variables to program*/

int main(void){

printf("Please Enter Size X Of Array:");/*This is where the x limit of the array is set*/
scanf("%d",&x); 
```

我希望它在这里检查输入的值是否在 1-100 之间，如果不是，它会打印以再次输入数组的大小 X（Y 相同）

```
printf("\n");

printf("please Enter Size Y Of Array:");/*This is where the y limit of the array is set*/
scanf("%d",&y);

    int array[x][y];/*this sets the initial variables to program*/ 
```

任何人都可以发布您将如何做到这一点，因为当我尝试时它不起作用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:26:34.930

```
do {
    printf("Please Enter Size X Of Array:");/*This is where the x limit of the array is set*/
    scanf("%d",&x);
} while (x<1 || x>100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:17:28.267

我会这样写循环：

```
 for (;;) {
     printf ("Please Enter Size X Of Array: ");
     fflush (stdout);
     if (scanf ("%d", &x) == 1 && x >= 1 && x <= 100) {
         break;
     }
     /* Read a character to prevent looping forever for non-numbers or EOF. */
     if (( x = getchar()) == EOF) {
        exit (EXIT_FAILURE);
     }
 } 
```

# html - 有一个 html 链接将某人引导到另一个页面并弹出另一个页面

> ID：10463194
> 
> 赞同：0
> 
> 时间：2012-05-05T15:18:09.403
> 
> 标签：html, href

我曾尝试寻找这个问题的答案，但我的搜索空手而归。甚至很难弄清楚要搜索哪些术语。基本上我所拥有的是产品清单。我有您单击图片的功能，它会打开一个新选项卡，将您定向到外部链接，您可以在我的 a href 中使用 target =_blank 购买产品。我还希望图片指向另一个内部链接，您可以在其中评论和评价产品，只需在原始页面所在的同一选项卡中打开它（因此您基本上必须回击以返回主要产品清单。这可能吗？如果可以，怎么做？提前感谢您的指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:25:29.713

```
<a href="url for new tab" target="_blank" 
  onclick="location.href = 'url for current tab'">Link</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:29:10.213

```
<script type="text/javascript">
   function openpages() {
window.open("http://google.com");
window.location = "http://yahoo.com"
   }
  </script>
<a href=# onclick="openpages()">open product description</a> 
```

这将在新标签页中打开 Google，并在与链接相同的位置打开 Yahoo

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:23:43.270

如果我理解正确，您希望链接重定向到页面并打开弹出窗口？你试过 Javascript 的[onclick](http://www.w3schools.com/jsref/event_onclick.asp)吗？

您可以执行以下操作：

```
<a href="thePage.html" onclick="window.open('thePopup.html')"><img src="myImage.png"/></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T15:32:50.770

它非常简单，使用`onclick`结合`href`标签的处理程序。

```
<a href="#yourinternallink" onclick="window.open('popup.html')">
   <img src="link/to/my/image.jpg" />
</a> 
```

# c - getch 和箭头代码

> ID：10463201
> 
> 赞同：46
> 
> 时间：2012-05-05T15:18:39.390
> 
> 标签：c, character, decimal, arrow-keys, getch

我正在编写一个`getch()`用于扫描箭头键的程序。到目前为止，我的代码是：

```
switch(getch()) {
    case 65:    // key up
        break;
    case 66:    // key down
        break;
    case 67:    // key right
        break;
    case 68:    // key left
        break;
} 
```

问题是当我按下`'A'`,或代码也会执行，因为`'B'`是十进制代码，等等......`'C'``'D'``65``'A'`

有没有办法在不打电话给别人的情况下检查箭头键？

谢谢！

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-07-11T12:26:29.037

通过按一个箭头键`getch`将三个值推入缓冲区：

*   `'\033'`
*   `'['`
*   `'A'`, `'B'`,`'C'`或`'D'`

所以代码将是这样的：

```
if (getch() == '\033') { // if the first value is esc
    getch(); // skip the [
    switch(getch()) { // the real value
        case 'A':
            // code for arrow up
            break;
        case 'B':
            // code for arrow down
            break;
        case 'C':
            // code for arrow right
            break;
        case 'D':
            // code for arrow left
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-06T18:59:44.230

getch() 函数返回箭头键（和其他一些特殊键）的两个键码，如 FatalError 的注释中所述。它首先返回 0 (0x00) 或 224 (0xE0)，然后返回标识所按下键的代码。

对于箭头键，它首先返回 224，然后是 72（上）、80（下）、75（左）和 77（右）。如果按下数字键盘箭头键（关闭 NumLock），getch () 首先返回 0 而不是 224。

请注意，getch() 没有以任何方式标准化，并且这些代码可能因编译器而异。这些代码由 Windows 上的 MinGW 和 Visual C++ 返回。

一个方便的程序来查看 getch () 对各种键的操作是：

```
#include <stdio.h>
#include <conio.h>

int main ()
{
    int ch;

    while ((ch = _getch()) != 27) /* 27 = Esc key */
    {
        printf("%d", ch);
        if (ch == 0 || ch == 224)
            printf (", %d", _getch ()); 
        printf("\n");
    }

    printf("ESC %d\n", ch);

    return (0);
} 
```

这适用于 MinGW 和 Visual C++。这些编译器使用名称 _getch() 而不是 getch() 来表明它是一个非标准函数。

因此，您可以执行以下操作：

```
ch = _getch ();
if (ch == 0 || ch == 224)
{
    switch (_getch ())
    {
        case 72:
            /* Code for up arrow handling */
            break;

        case 80:
            /* Code for down arrow handling */
            break;

        /* ... etc ... */
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-14T04:00:01.857

So, after alot of struggle, I miraculously solved this everannoying issue ! I was trying to mimic a linux terminal and got stuck at the part where it keeps a command history which can be accessed by pressing up or down arrow keys. I found ncurses lib to be painfuly hard to comprehend and slow to learn.

```
char ch = 0, k = 0;
while(1)
{
  ch = getch();
  if(ch == 27)                  // if ch is the escape sequence with num code 27, k turns 1 to signal the next
    k = 1;
  if(ch == 91 && k == 1)       // if the previous char was 27, and the current 91, k turns 2 for further use
    k = 2;
  if(ch == 65 && k == 2)       // finally, if the last char of the sequence matches, you've got a key !
    printf("You pressed the up arrow key !!\n");
  if(ch == 66 && k == 2)                             
    printf("You pressed the down arrow key !!\n");
  if(ch != 27 && ch != 91)      // if ch isn't either of the two, the key pressed isn't up/down so reset k
    k = 0;
  printf("%c - %d", ch, ch);    // prints out the char and it's int code 
```

It's kind of bold but it explains alot. Good luck !

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-14T00:12:47.250

这[`keypad`](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0ahUKEwiyh4CDh9rJAhUGWh4KHVaFALoQFggdMAA&url=http%3A%2F%2Ftldp.org%2FHOWTO%2FNCURSES-Programming-HOWTO%2Finit.html&usg=AFQjCNEO9S-SfKuuqnZmD7w8ZGK2gotXFw&sig2=5-TU9M0f2JcQW80oblYoOw)将允许用户终端的键盘允许将功能键解释为单个值（即没有转义序列）。

如手册页所述：

> 键盘选项启用用户终端的键盘。如果启用（bf 为 TRUE），用户可以按下功能键（例如箭头键），wgetch 返回表示功能键的单个值，如 KEY_LEFT。如果禁用（bf 为 FALSE），curses 不会专门处理功能键，程序必须自己解释转义序列。如果终端中的键盘可以打开（发送）和关闭（本地工作），打开此选项会导致终端键盘在调用 wgetch 时打开。键盘的默认值为 false。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-01T11:54:03.737

实际上，要阅读箭头键，需要阅读其扫描码。以下是方向键按下（不是按键释放）生成的扫描码

> 当 num Lock 关闭时

*   左 E0 4B
*   右 E0 4D
*   向上 E0 48
*   向下 E0 50

> 当 Num Lock 开启时，这些键前面带有**E0 2A**

*   字节 E0 为 -32
*   字节 48 为 72 UP
*   字节 50 为 80 DOWN

    ```
    user_var=getch();
    if(user_var == -32)
    {
        user_var=getch();
        switch(user_var)
        {
        case 72:
            cur_sel--;
            if (cur_sel==0)
                cur_sel=4;
            break;
        case 80:
            cur_sel++;
            if(cur_sel==5)
                cur_sel=1;
            break;

        }
    } 
    ```

在上面的代码中，我假设程序员只想移动 4 行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-21T13:45:23.117

试试这个怎么样？

```
void CheckKey(void) {
int key;
if (kbhit()) {
    key=getch();
    if (key == 224) {
        do {
            key=getch();
        } while(key==224);
        switch (key) {
            case 72:
                printf("up");
                break;
            case 75:
                printf("left");
                break;
            case 77:
                printf("right");
                break;
            case 80:
                printf("down");
                break;
        }
    }
    printf("%d\n",key);
}

int main() {
    while (1) {
        if (kbhit()) {
            CheckKey();
        }
    }
} 
```

（如果你不明白为什么会有 224，那么尝试运行这段代码：）

```
#include <stdio.h>
#include <conio.h>

int main() {
    while (1) {
        if (kbhit()) {
            printf("%d\n",getch());
        }
    }
} 
```

但我不知道为什么是 224。如果你知道为什么，你能写下评论吗？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-07T13:10:59.250

对于使用`ncurses`工作代码和 ncurses 初始化的解决方案，请参阅 [getchar() 为向上和向下箭头键返回相同的值 (27)](https://stackoverflow.com/questions/15306463/getchar-returns-the-same-value-27-for-up-and-down-arrow-keys)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-14T22:27:57.613

我已经使用 getch 编写了一个函数来获取箭头代码。这是一个快速的'n'dirty解决方案，但该函数将根据箭头键返回一个ASCII码：UP：-10 DOWN：-11 RIGHT：-12 LEFT：-13

此外，使用此功能，您将能够区分 ESCAPE 触摸和箭头键。但是您必须按 ESC 2 次才能激活 ESC 键。

这里的代码：

```
char getch_hotkey_upgrade(void)
{
  char ch = 0,ch_test[3] = {0,0,0};

    ch_test[0]=getch();

    if(ch_test[0] == 27)
    {
        ch_test[1]=getch();

        if (ch_test[1]== 91)
        {
            ch_test[2]=getch();

            switch(ch_test[2])
            {
            case 'A':
                //printf("You pressed the up arrow key !!\n");
                //ch = -10;
                ch = -10;
                break;
            case 'B':
                //printf("You pressed the down arrow key !!\n");
                ch = -11;
                break;
            case 'C':
                //printf("You pressed the right arrow key !!\n");
                ch = -12;
                break;
            case 'D':
                //printf("You pressed the left arrow key !!\n");
                ch = -13;
                break;
            }
        }
        else
         ch = ch_test [1];
    }
    else
        ch = ch_test [0];
  return ch;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-21T23:43:33.260

我只是一个初学者，但我创建了一个`char(for example "b")`，我做`b = _getch();`了（它是一个`conio.h`库的命令）并检查

```
If (b == -32)
b = _getch(); 
```

并检查键（72 上，80 下，77 右，75 左）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-02T17:10:38.557

```
 void input_from_key_board(int &ri, int &ci)
{
    char ch = 'x';
    if (_kbhit())
    {
        ch = _getch();
        if (ch == -32)
        {
            ch = _getch();
            switch (ch)
            {
            case 72: { ri--; break; }
            case 80: { ri++; break; }
            case 77: { ci++; break; }
            case 75: { ci--; break; }

            }
        }
        else if (ch == '\r'){ gotoRowCol(ri++, ci -= ci); }
        else if (ch == '\t'){ gotoRowCol(ri, ci += 5); }
        else if (ch == 27) { system("ipconfig"); }
        else if (ch == 8){ cout << " "; gotoRowCol(ri, --ci); if (ci <= 0)gotoRowCol(ri--, ci); }
        else { cout << ch; gotoRowCol(ri, ci++); }
        gotoRowCol(ri, ci);
    }
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-06-03T09:24:53.770

尝试这个...

我在 Windows 7 中使用 Code::Blocks

```
while (true)
{
    char input;
    input = getch();

    switch(input)
    {
    case -32: //This value is returned by all arrow key. So, we don't want to do something.
        break;
    case 72:
        printf("up");
        break;
    case 75:
        printf("left");
        break;
    case 77:
        printf("right");
        break;
    case 80:
        printf("down");
        break;
    default:
        printf("INVALID INPUT!");
        break;
    }
} 
```

# security - *-Biba 模型的属性

> ID：10463203
> 
> 赞同：2
> 
> 时间：2012-05-05T15:18:53.103
> 
> 标签：security, integrity

在 Dieter Gollmann 的 Computer security 书中，在 Biba 模型下，*-property 解释如下。

> 如果主体 s 可以读取（观察）对象 o，那么只有当 fo(p)<=fo(o) 时，s 才能对某个其他对象 p 具有写访问权。

我希望这个声明的最终想法一定是“不读”或类似的东西（根据互联网上的资源）。但我不明白这句话是如何表达这个想法的。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:53:42.237

根据您指定的书，它没有明确声明“不阅读”（尽管有些来源指定了这一点）。在 BIBA 模型中，主要考虑因素是完整性。它通过只允许信息向下流动来防止较低层次对较高层次的污染。据此，如果主体读取特定对象-o并尝试将内容写入另一个对象-p并且fo(p)>=fo(o)，即信息向上流动。（有时 object-o 可能包含病毒数据并将被写入更高级别的对象）。所以这个流程不应该被允许。这就是为什么 fo(p)<=fo(o) 约束作为完整性 *-property 存在的原因。

# mysql - MySQL Workbench 中的外键

> ID：10463206
> 
> 赞同：3
> 
> 时间：2012-05-05T15:19:11.973
> 
> 标签：mysql, foreign-keys

我在 MySQL Workbench 中制作了八个带有 EER 图的表。现在我使用程序建议的 SQL 来创建表。它适用于大多数人，但不适用于包含外键的人。有谁知道如何解决这个问题？这是建议的代码和错误消息。

SQL 语句：

```
CREATE TABLE IF NOT EXISTS `webprogrammering`.`Deltagelse` (
  `deltagelseNr` INT NOT NULL AUTO_INCREMENT ,
  `deltagerNr` INT NOT NULL ,
  `Arrid` INT NOT NULL ,
  PRIMARY KEY (`deltagelseNr`) ,
  INDEX `deltagerNr` () ,
  INDEX `Arrid` () ,
  CONSTRAINT `deltagerNr`
    FOREIGN KEY ()
    REFERENCES `webprogrammering`.`deltagere` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Arrid`
    FOREIGN KEY ()
    REFERENCES `webprogrammering`.`arrangement` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB 
```

错误消息日志：

> ERROR 1064：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的 ') 、 INDEX `Arrid`() 、 CONSTRAINT `deltagerNr` FOREIGN KEY () REFERE'附近使用正确的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:31:11.807

```
 CREATE TABLE IF NOT EXISTS `webprogrammering`.`Deltagelse` (
  `deltagelseNr` INT NOT NULL AUTO_INCREMENT ,
  `deltagerNr` INT NOT NULL ,
  `Arrid` INT NOT NULL ,
  PRIMARY KEY (`deltagelseNr`) ,
  INDEX `deltagerNrIdx` (deltagerNr) ,
  INDEX `ArridIdx` (Arrid) ,
  CONSTRAINT `deltagerNr_fk`
    FOREIGN KEY (deltagerNr)
    REFERENCES `webprogrammering`.`deltagere` (referenceField)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Arrid_fk`
    FOREIGN KEY (Arrid)
    REFERENCES `webprogrammering`.`arrangement` (referenceField2)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB 
```

将字段名称 referenceField、referenceField2 更改为正确的名称。

# css - 仅在元素左侧的 Box-Shadow

> ID：10463208
> 
> 赞同：68
> 
> 时间：2012-05-05T15:19:30.867
> 
> 标签：css

我一直无法在元素的左侧设置盒子阴影。

我试过这个：

```
.box {
    box-shadow: -10px 0px 3px 0px #aaa;
}
```

```
<div class="box">Example element</div>
```

然而，盒子阴影看起来更像一条灰线，缺乏我在使用盒子阴影时习惯的常规阴影效果。此外，上面的示例包括一个我试图摆脱的小顶盒阴影。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-05T15:29:50.453

你可能需要更多的模糊和更少的传播。

```
box-shadow: -10px 0px 10px 1px #aaaaaa; 
```

尝试在这里[http://css3generator.com/](http://css3generator.com/)使用盒子阴影生成器，直到你得到你想要的效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-12-18T22:04:31.500

这个问题非常非常非常古老，但作为将来的一个技巧，我推荐这样的东西：

```
.element{
    box-shadow: 0px 0px 10px #232931;
}
.container{
    height: 100px;
    width: 100px;
    overflow: hidden;
} 
```

基本上，您有一个盒子阴影，然后将元素包装在一个 div 中，并将其溢出设置为隐藏。您需要调整 div 的高度、宽度甚至填充，以仅显示左框阴影，但它可以工作。 [看这里的例子](https://i.stack.imgur.com/lNSEx.png)如果你看这个例子，你可以看到没有其他阴影，只有一个黑色的左阴影。编辑：这是对同一张屏幕截图的重拍，以防有人认为我只是剪掉了右边。你可以在[这里找到](https://i.stack.imgur.com/5PmZq.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-05T08:54:58.417

```
box-shadow: inset 10px 0 0 0 red; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-06T12:05:39.460

```
box-shadow: -15px 0px 17px -7px rgba(0,0,0,0.75); 
```

**解释：**

第一个 px 值是“水平长度”设置为 -15px 以将阴影定位在左侧，下一个 px 值设置为 0，因此阴影顶部和底部居中以最小化顶部和底部阴影。

第三个值（17px）称为模糊半径。数字越高，阴影越模糊。然后最后一个 px 值 -7px 是散布半径，正值会增加阴影的大小，负值会减小阴影的大小，在 -7px 时它会阻止阴影出现在项目的上方和下方。

参考： [CSS Box Shadow 属性](https://www.w3schools.com/cssref/css3_pr_box-shadow.asp)

# android - 在单击图像按钮时更新文本视图（小部件）

> ID：10463213
> 
> 赞同：0
> 
> 时间：2012-05-05T15:20:11.650
> 
> 标签：android, android-layout

我试图做到这一点，以便在我的小部件上按下图像按钮时，它会更改 textview 的文本。这个 textviews 数据是来自数组的随机字符串（我已经有代码）。我开始查看广播接收器，但我真的不知道为什么我的不工作。非常感谢任何帮助:)

小部件活动

```
public class Widget extends AppWidgetProvider {

private Random rgenerator = new Random();
private Random rgenerator2 = new Random();
private String[] myString1;

  public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
      Resources res = context.getResources();
        myString1 = res.getStringArray(R.array.myArray);

    final int N = appWidgetIds.length;
    Log.i("ExampleWidget",  "Updating widgets " + Arrays.asList(appWidgetIds));
    // Perform this loop procedure for each App Widget that belongs to this
    // provider
    for (int i = 0; i < N; i++) {
      int appWidgetId = appWidgetIds[i];
      // Create an Intent to launch ExampleActivity
      Intent intent = new Intent();
        intent.setAction(TestReceiver.TEST_INTENT);
        intent.setClassName(TestReceiver.class.getPackage().getName(), TestReceiver.class.getName());
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
      PendingIntent pendingIntent = PendingIntent.getBroadcast(context.getApplicationContext(), 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
      // Get the layout for the App Widget and attach an on-click listener
      // to the button
      RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widgetlayout);
      views.setOnClickPendingIntent(R.id.imagewidgeterica, pendingIntent);
      // To update a label
      views.setTextViewText(R.id.widget1label , myString1[rgenerator.nextInt(myString1.length)]);
      // Tell the AppWidgetManager to perform an update on the current app
      // widget
      appWidgetManager.updateAppWidget(appWidgetId, views);

    }

}

         } 
```

广播接收器：

```
package kevin.erica.box;

public class TestReceiver extends BroadcastReceiver {
private Random rgenerator = new Random();
private Random rgenerator2 = new Random();
private String [] myString1;
private String myStringRandom = myString1[rgenerator.nextInt(myString1.length)];

public static final String TEST_INTENT= "MyTestIntent";

@Override
public void onReceive(Context context, Intent intent) {
 // TODO Auto-generated method stub

 Toast.makeText(context, "Test", Toast.LENGTH_SHORT);

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context.getApplicationContext());

  Toast.makeText(context, "Test", Toast.LENGTH_SHORT).show();
  int[] appWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);
  RemoteViews rViews = new RemoteViews(context.getPackageName(), R.layout.widgetlayout);
            rViews.setTextViewText(R.id.widget1label, "someupdateddata");
            appWidgetManager.updateAppWidget(appWidgetIds, rViews);

}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:44:20.093

如果 ImageButton 和 TextView 都在同一个布局中，那么 BroadcastReceiver 可能是矫枉过正。

你有没有在你的活动中尝试过这样的事情：

```
final Widget w = (Widget)findViewById(R.id.yourWidgetId);
ImageButton button = (ImageButton) findViewById(R.id.yourImageButtonId);

button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        w.onUpdate();
    }
} 
```

[http://developer.android.com/reference/android/view/View.OnClickListener.html](http://developer.android.com/reference/android/view/View.OnClickListener.html)

# python - Python pexpect - TIMEOUT 进入回溯并退出

> ID：10463216
> 
> 赞同：4
> 
> 时间：2012-05-05T15:20:31.367
> 
> 标签：python, python-2.7, pexpect

我是 python-pexpect 的新手。在 Tcl/expect 中，当我遇到超时时 - 我会回复消息并退出函数。我尝试使用发布的示例代码尝试类似的响应 [http://pexpect.svn.sourceforge.net/viewvc/pexpect/trunk/pexpect/examples/sshls.py?revision=489&view=markup](http://pexpect.svn.sourceforge.net/viewvc/pexpect/trunk/pexpect/examples/sshls.py?revision=489&view=markup)

我基于上面的这段代码——如果我提供了一个伪造的密码，我希望这只是超时，打印“错误！”，然后退出程序。但是当我运行它时 - 进入“回溯输出”（见下文），有人可以帮助我让程序打印“错误”并优雅地退出程序。

```
test@ubuntu:~/scripts$ ./tmout.py 
Hostname: 192.168.26.84
User: root
Password: 
Timeout exceeded in read_nonblocking().
<pexpect.spawn object at 0xb77309cc>
version: 2.3 ($Revision: 399 $)
command: /usr/bin/ssh
args: ['/usr/bin/ssh', '-l', 'root', '192.168.26.84', '/bin/ls', '-l']
searcher: searcher_re:
    0: EOF
buffer (last 100 chars): 
Permission denied, please try again.
root@192.168.26.84's password: 
before (last 100 chars): 
Permission denied, please try again.
root@192.168.26.84's password: 
after: <class 'pexpect.TIMEOUT'>
match: None
match_index: None
exitstatus: None
flag_eof: False
pid: 14997
child_fd: 3
closed: False
timeout: 30
delimiter: <class 'pexpect.EOF'>
logfile: None
logfile_read: None
logfile_send: None
maxread: 2000
ignorecase: False
searchwindowsize: None
delaybeforesend: 0.05
delayafterclose: 0.1
delayafterterminate: 0.1
Traceback (most recent call last):
  File "./tmout.py", line 54, in <module>
    traceback.print_exc()
NameError: name 'traceback' is not defined
test@ubuntu:~/scripts$ 
```

源代码：

```
#!/usr/bin/env python

"""This runs 'ls -l' on a remote host using SSH. At the prompts enter hostname,
user, and password.

$Id$
"""

import pexpect
import getpass, os

def ssh_command (user, host, password, command):

    """This runs a command on the remote host. This could also be done with the
pxssh class, but this demonstrates what that class does at a simpler level.
This returns a pexpect.spawn object. This handles the case when you try to
connect to a new host and ssh asks you if you want to accept the public key
fingerprint and continue connecting. """

    ssh_newkey = 'Are you sure you want to continue connecting'
    child = pexpect.spawn('ssh -l %s %s %s'%(user, host, command))
    i = child.expect([pexpect.TIMEOUT, ssh_newkey, 'password: '])
    if i == 0: # Timeout
        print 'ERROR!'
        print 'SSH could not login. Here is what SSH said:'
        print child.before, child.after
        return None
    if i == 1: # SSH does not have the public key. Just accept it.
        child.sendline ('yes')
        child.expect ('password: ')
        i = child.expect([pexpect.TIMEOUT, 'password: '])
        if i == 0: # Timeout
            print 'ERROR!'
            print 'SSH could not login. Here is what SSH said:'
            print child.before, child.after
            return None       
    child.sendline(password)
    return child

def main ():

    host = raw_input('Hostname: ')
    user = raw_input('User: ')
    password = getpass.getpass('Password: ')
    child = ssh_command (user, host, password, '/bin/ls -l')
    child.expect(pexpect.EOF)
    print child.before

if __name__ == '__main__':
    try:
        main()
    except Exception, e:
        print str(e)
        traceback.print_exc()
        os._exit(1) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T15:39:46.337

> **关于自动化 ssh 登录的说明：**如果您正在考虑使用 (p)expect 来自动化 ssh 登录，请考虑改用 ssh 密钥。作为奖励，ssh 密钥比密码更安全。它们比在文件系统上存储纯文本密码安全得多，许多用户都希望这样做。如果您使用 ssh 代理，您可以输入一次密码以在本地解锁您的密钥，然后自动使用该密钥在多个主机上进行多次登录。为方便起见，您可以设置或禁用密码到期的时间限制。

首先，您应该导入回溯，因此如果程序中出现意外错误，`traceback.print_exc()`它将起作用。

```
import getpass, os, traceback 
```

我还创建了一个`die()`函数，以便在程序退出时关闭 ssh。

```
def die(child, errstr):
    print errstr
    print child.before, child.after
    child.terminate()
    exit(1) 
```

删除这一行，因为在下一行添加正确的命令后它可能被错误地留在那里：

```
 child.expect ('password: ') 
```

正确的行（处理超时）是：

```
 i = child.expect([pexpect.TIMEOUT, 'password: ']) 
```

然后替换这个：

```
 child.expect(pexpect.EOF)
    print child.before 
```

有了这个：

```
 i = child.expect([pexpect.TIMEOUT, 'Permission denied', pexpect.EOF])
    if i == 0:
        die(child, 'ERROR!\nSSH timed out. Here is what SSH said:')
    elif i == 1:
        die(child, 'ERROR!\nIncorrect password Here is what SSH said:')
    elif i == 2:
        print child.before 
```

此更改将告诉程序检测错误密码，或在有未知输入时优雅地超时，而不是引发异常。请注意，如果您的命令运行时间超过默认超时持续时间，它将在完成之前中止。你需要设置类似的东西`timeout=60`作为参数`expect()`来改变它。

此外，`None`超时后返回也没有用。相反，调用`die()`which 将调用`exit(1)`：

```
 die(child, 'error message') 
```

**这是最终代码：**

```
#!/usr/bin/env python

"""This runs 'ls -l' on a remote host using SSH. At the prompts enter hostname,
user, and password.

$Id$
"""

import pexpect
import getpass, os, traceback

def ssh_command (user, host, password, command):

    """This runs a command on the remote host. This could also be done with the
pxssh class, but this demonstrates what that class does at a simpler level.
This returns a pexpect.spawn object. This handles the case when you try to
connect to a new host and ssh asks you if you want to accept the public key
fingerprint and continue connecting. """

    ssh_newkey = 'Are you sure you want to continue connecting'
    child = pexpect.spawn('ssh -l %s %s %s'%(user, host, command))
    i = child.expect([pexpect.TIMEOUT, ssh_newkey, 'password: '])
    if i == 0: # Timeout
        die(child, 'ERROR!\nSSH could not login. Here is what SSH said:')
    if i == 1: # SSH does not have the public key. Just accept it.
        child.sendline ('yes')
        i = child.expect([pexpect.TIMEOUT, 'password: '])
        if i == 0: # Timeout
            die(child, 'ERROR!\nSSH could not login. Here is what SSH said:')
    child.sendline(password)
    return child

def die(child, errstr):
    print errstr
    print child.before, child.after
    child.terminate()
    exit(1)

def main ():

    host = raw_input('Hostname: ')
    user = raw_input('User: ')
    password = getpass.getpass('Password: ')
    child = ssh_command(user, host, password, '/bin/ls -l')

    i = child.expect([pexpect.TIMEOUT, 'Permission denied', pexpect.EOF])
    if i == 0:
        die(child, 'ERROR!\nSSH timed out. Here is what SSH said:')
    elif i == 1:
        die(child, 'ERROR!\nIncorrect password Here is what SSH said:')
    elif i == 2:
        print child.before

if __name__ == '__main__':
    try:
        main()
    except Exception, e:
        print str(e)
        traceback.print_exc()
        os._exit(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:00:57.423

我建议尝试使用 pexpect 附带的 pxssh 模块/类来自动化 ssh 会话。这将通过处理这些常见情况来减少您的代码。

[这是从另一个 StackOverflow https://stackoverflow.com/a/6189676/570450](https://stackoverflow.com/a/6189676/570450)复制的一些示例代码

```
import pxssh
s = pxssh.pxssh()
if not s.login ('localhost', 'myusername', 'mypassword'):
    print "SSH session failed on login."
    print str(s)
else:
    print "SSH session login successful"
    s.sendline ('ls -l')
    s.prompt()         # match the prompt
    print s.before     # print everything before the prompt.
    s.logout() 
```

# html - 如何创建圆形搜索框

> ID：10463217
> 
> 赞同：4
> 
> 时间：2012-05-05T15:20:33.333
> 
> 标签：html, css, textfield

我有一个大小为 190x30 像素的 div 和一个相同的背景图像。背景图像是一个圆角矩形，看起来不错。当我将文本字段放在 div 中时，背景会垂直重复，所以由于某种原因，搜索框需要 60 px 的垂直空间......为什么？我应该补充一点，它在 DreamWeaver 中显示正确，但在 Chrome 或 IE 中却没有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T15:22:57.953

CSS：

```
.round {
    width: 100%;
    border-radius: 15px;
    border: 1px #000 solid;
    padding: 5px 5px 5px 25px;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 5;
}

.corner {
    position: absolute;
    top: 3px;
    left: 5px;
    height: 20px;
    width: 20px;
    z-index: 10;
    border-radius: 10px;
    border: none;
    background: #000; /* Set the bg image here. with "no-repeat" */
}

.search {
    position: relative;
    width: 190px;
    height: 30px;
} 
```

HTML：

```
<form id="search-form">
    <div class="search">
      <input type="text" name="search" class="round" />
      <input type="submit" class="corner" value="" />
    </div>
</form> 
```

演示：http: [//jsfiddle.net/Bh4g3/](http://jsfiddle.net/Bh4g3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:24:23.117

为了防止背景重复，使用这个 CSS 声明：

```
#element {
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T18:42:50.020

你可以试试这个 CSS

```
#divName { background:url("image-src) no-repeat; height:30px; width:190px; } 
```

HTML

```
<div id="divName"><input type="text" ></div> 
```

你可以在 div "divName" 里面放任何东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T22:04:22.213

我认为这样更好：

```
<input placeholder="Search..." type="search" value="" id="search"
         onchange="openPage()">

<script>
    function openPage() {
        var x = document.getElementById("search").value;

        if (x === "Home") {
            window.open("home.html");
        }

        if (x === "About") {
            window.open("about.html");
        }
    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-12T19:43:27.403

你可以这样做：

CSS：

```
.example input[type=text] {
       border-radius: 25px;
      } 
```

HTML：

```
<div class="example">
         <input type="text" placeholder="Search..">
       </div> 
```

这是一个小提琴，看看它的样子：

```
.example input[type=text] {
  border-radius: 25px splid;
}
```

```
<!DOCTYPE html>
<html>

  <head>
  </head>
    <body>
      <div class="example">
    <input type="text" placeholder="Search...">
  </div>
    </body>

</html>
```

# jquery - jquery自定义事件返回值

> ID：10463218
> 
> 赞同：1
> 
> 时间：2012-05-05T15:20:45.020
> 
> 标签：jquery, return, custom-events

我正在尝试了解有关 jquery 自定义事件的更多信息，因此我制作了这个简单的代码来进行测试：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Jquery custom events</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>
            $(function(){
                $('#link1').click(function(){
                    var that = $(this);
                    $.ajax({
                        url: "http://localhost/jquery/index.html",

                        beforeSend: function(event){ // if returned false, stops ajax request
                           return that.trigger('ajax:beforesend',[{p1: '1'},{p2: '2'}]);

                        },
                        success: function(){
                            that.trigger('ajax:success');
                        },
                        error: function(){
                        }
                    });

                    return false;
                });

                $('#link1').bind('ajax:beforesend',function(e,data,data2){
                    alert("success"+data2.p2);
                    return false;
                });

                $('#link1').bind('ajax:success',function(e){
                    alert("success");

                });
            });
        </script>
    </head>

    <body>
        <a id="link1">link1</a>

        <div id="box" style="width:500px;height:150px;background-color: gray;margin-top: 50px;">
            result
        </div>
    </body>

</html> 
```

我的问题是：在 beforesend 函数中，如果触发的自定义事件的结果为假但不起作用，我想中止 ajax 请求，我错过了什么？

编辑：请不要专注于 beforesend 功能。我真正想要的是如何将自定义事件结果（例如真或假）返回到调用事件的位置（在这种情况下是在发送函数之前）。正如我所说，这只是样板代码。不是现实世界的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:34:34.427

beforeSend 是一个 Ajax 事件。在 beforeSend 函数中返回 false 将取消请求。从 jQuery 1.5 开始，无论请求的类型如何，都将调用 beforeSend 选项。

请在此处检查 beforesend ajax 事件处理程序并尝试[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

很可能您的问题出在`beforesend`函数内。

# iphone - iOS UINavigationBar 标题文本颜色 (iOS 4)

> ID：10463226
> 
> 赞同：0
> 
> 时间：2012-05-05T15:21:22.080
> 
> 标签：iphone, ios, ios4, uinavigationbar, textcolor

> **可能重复：**
> [iPhone 导航栏标题文本颜色](https://stackoverflow.com/questions/599405/iphone-navigation-bar-title-text-color)

我正在尝试更改应用程序中导航标题栏的文本颜色。我已经设法在 iOS 5 中使用新的外观 API 做到了这一点，但是在查看了有关如何在 iOS 4 上执行此操作的各种线程后，我仍然迷失了方向。

我希望能够将我所有视图控制器上 UINavigationBar 的文本颜色设置为某种颜色，对于 iOS 5，我在 AppDelegate 中使用了外观方法，但完全不确定如何为 iOS 4 执行此操作。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:50:22.963

在 iOS 5.0 之前，我认为您必须使用自定义视图，如您想要自定义的 UILabel，并将其设置为导航栏：

```
 [self.navigationItem setTitleView: myLabel]; 
```

[您可以在此处](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html#//apple_ref/occ/instp/UINavigationItem/titleView)查看文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:57:54.163

你可以按照 Aguin 所说的去做，改变标签的颜色。

提示：输入你的标题：

```
#define UIColorFromRGB(rgbValue) [UIColor \
colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 \
green:((float)((rgbValue & 0xFF00) >> 8))/255.0 \
blue:((float)(rgbValue & 0xFF))/255.0 alpha:1.0] 
```

然后更改标签的颜色：

```
[self.navigationItem setTitleView: myLabel];
UIColor* titleColor = UIColorFromRGB(0xff6600); //An orange color for example
myLabel.textColor = titleColor; 
```

# comments - FB 评论与非 FB 评论混在一起？

> ID：10463229
> 
> 赞同：0
> 
> 时间：2012-05-05T15:21:50.117
> 
> 标签：comments, facebook-comments

我可以在 FB 评论之间显示非 FB 评论吗？

如果我理解正确，评论是通过 iFrame 显示的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:32:05.040

如果您在谈论[Facebook 评论插件](https://developers.facebook.com/docs/reference/plugins/comments/)，那么答案是否定的。您不能将非 fb 评论放在“fb 评论之间”。

# jsf - 在 ConfirmDialog 中销毁的 RequestScoped bean

> ID：10463231
> 
> 赞同：2
> 
> 时间：2012-05-05T15:22:06.860
> 
> 标签：jsf, jsf-2, primefaces

我有 RequestScoped bean，因为我将用户从带有记录的 dataTable 重定向到编辑页面。在这个数据表中，我有删除按钮：

```
<p:column>
    <p:commandButton update=":deleteNewsDialog" oncomplete="deleteNewsDlg.show()" icon="ui-icon-closethick">
        <f:setPropertyActionListener value="#{news}" target="#{newsBean.news}" />
    </p:commandButton>
</p:column> 
```

这是对话框：

```
<p:confirmDialog id="deleteNewsDialog" message="Czy na pewno chcesz usunąć wiadomość o tytule &quot;#{newsBean.news.title}&quot;?"
    header="Usuwanie wiadomości" severity="alert"
    widgetVar="deleteNewsDlg" appendToBody="true">
    <h:form>
        <p:commandButton value="Usuń" actionListener="#{newsBean.delete}" update=":newsesTableForm:newsesTable, :newsesTableForm:newsGrowl"/>
        <p:commandButton value="Anuluj" oncomplete="deleteNewsDlg.hide();"/>
    </h:form>
</p:confirmDialog> 
```

当 newsBean.delete 被触发时， newsBean 不再存在，所以我得到了很多丑陋的验证异常。我有其他类似 ViewScoped bean 的页面，它的工作原理就像一个魅力。帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T17:53:17.630

一个请求范围的 bean 的生命周期正好是一个 HTTP 请求/响应。因此，使用表单检索整个视图已经是一个 HTTP 请求/响应。请求范围的 bean 在响应结束时被丢弃。当您在视图上触发 ajax 请求时，您实际上是在发送一个新的 HTTP 请求。因此，这将创建一个新的请求范围 bean，该 bean 在 HTTP 响应结束时被丢弃。因此，同一视图上的每个 ajax 请求都会获得自己的请求范围 bean 实例。

如果您需要维护与视图相关的数据，这不是您想要的。您需要将 bean 放在视图范围内。只要您通过 ajax 和返回`null`或`void`在动作侦听器方法中与同一个视图交互，bean 就会存在。请注意，当您返回 a 时`String`，即使为空，也会重新创建视图，因此视图范围的 bean 将被丢弃。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

# html - 更快的加载时间：背景图像或浏览器属性？

> ID：10463238
> 
> 赞同：1
> 
> 时间：2012-05-05T15:22:38.670
> 
> 标签：html, css, page-load-time

我的网站背景很乱，为了更容易阅读，我使用了这个背景属性：

```
p : background-color {rgba(250, 250, 250, 0.7)} 
```

考虑到网站加载时间的目标，使用不透明的背景图像会更好吗？

你可以在这里看到这个问题：http: [//tinyurl.com/7ywoqpf](http://tinyurl.com/7ywoqpf)

注意我已经在努力减少背景 PNG 大小，这个问题仅与段落背景有关

我应该保留当前设置还是使用背景图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:25:08.860

图像必须从服务器下载然后加载到浏览器，而使用 CSS 属性`rgba`来创建效果，它仅依赖于浏览器。所以毫无疑问，`rgba`比图像更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:19:14.730

好的，这就是页面加载瀑布的样子 - [http://www.webpagetest.org/result/120505_MG_47R9V/1/details/](http://www.webpagetest.org/result/120505_MG_47R9V/1/details/)

你已经知道你需要减少图像，但你可以做一些其他的事情..

删除重复的 ga.js 使用 jquery.min.js 而不是 jquery.js 为 html、css 和 js 打开 gzip

如果您正在寻找图像压缩器，jpegmini.com 可以很好地处理 jpeg，并且有很多用于 PNG 的选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T17:42:41.130

图像，无论压缩得多么好，都必须下载。由于 ping，总会有一些开销。更重要的是，因为许多浏览器坚持从不为每个主机名同时发出两个请求（行为在 HTTP 规范中定义），所以任何图像都会延迟加载其他资源。

我不知道 RGBA 的实现，但如果这意味着下载另一个资源更快，我会感到*非常惊讶。*

# c++ - rand() 和 srand() 函数 opengl visual cpp

> ID：10463244
> 
> 赞同：0
> 
> 时间：2012-05-05T15:23:14.157
> 
> 标签：c++, visual-c++

我正在用 opengl 制作一个吃豆人游戏，我需要生成 2 个不同的数字 0 或 1，它们负责我的吃豆人的方向，取决于他所采取的方向。

如何使用 rand() 函数生成一个数字，该函数为一个数字生成 75% 的随机性，为另一个生成 25% 的随机性？

如果我做：

```
n = rand() % 3; 
```

它将得到 2 个不同的数字。问题是我不知道如何制作的随机百分比。我可以用cicle和柜台做。但有人告诉我，我可以直接在 rand() 函数中执行它。我搜索但我在谷歌上找不到任何具体的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:42:34.433

使用`<random>`图书馆。bernoulli_distribution 将以给定的概率 p 生成真，以概率 1-p 生成假。

```
#include <random>

#include <iostream>
#include <algorithm>
#include <iterator>

int main() {
    std::generate_n(std::ostream_iterator<bool>(std::cout," "), 10,
                    std::bind(std::bernoulli_distribution(0.25), std::mt19937()));
} 
```

印刷：

```
1 0 0 1 0 0 1 0 0 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:29:48.003

rand() 给你一个介于 0 和 RAND_MAX 之间的随机数（典型值为 32k）

所以一半的值将在 0 和 RAND_MAX/2 之间，1/3 将在 0 和 RAND_MAX/3 之间，2/3 将在 RAND_MAX/3 和 RAND_MAX 之间。

这足够暗示吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T15:34:30.903

您始终可以使用平均分布的随机范围 from `a`to`b`并检查您的条件，如下所示：

```
if((rand() % 100)>=75)
    // 25%
    ;
else
    // 75 %
    ; 
```

# javascript - JS 私有方法未在每次构造函数调用时重新定义

> ID：10463245
> 
> 赞同：2
> 
> 时间：2012-05-05T15:23:14.957
> 
> 标签：javascript, oop, private, micro-optimization

如何创建一个每次调用构造函数时都不会重新定义的 Javascript 私有方法？

据我所知，在 OOP-JS 中，私有方法是在一个“类”的“构造方法”中定义的方法，每次实例化一个新的“对象”时都会调用。我在想也许一个函数声明（即`function name()`，与函数表达式相反`var name = function()`）可以解决问题，但我怎么能确定下面的代码只声明我的函数一次呢？

```
​function Tester() {
    function test () {
        console.log("executed");
    }
}
var t1 = new Tester();
var t2 = new Tester(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T15:27:16.913

> 如何创建一个每次调用构造函数时都不会重新定义的 Javascript 私有方法？

你不能*（好吧，请参阅下面的一些回旋余地）*。但是，除非您将拥有数千个 的实例`Tester`，否则不要太担心它；大多数引擎可能会在创建的多个函数对象中重用底层代码。（*代码*，注意；不是函数对象或它关闭的上下文，它们*必须*是唯一的并且每次都分配。但它们不必很大。当然，相当多的函数函数也相当小......）

> ...我如何确定以下代码只声明我的函数一次？

您可以确定它不会；每次`Tester`调用它都会声明该函数。见证：

```
​function Tester() {
    this.test = test;
    function test () {
        console.log("executed");
    }
}
var t1 = new Tester();
var t2 = new Tester();
console.log(t1.test === t2.test); // "false" 
```

* * *

请注意，您可以拥有实现私有的函数，但不分配给对象的任何实例。模块模式可以很方便地做到这一点：

```
var Tester = (function() {

    function Tester(name) {
        this.name = name;
    }
    Tester.prototype.publicFunction = function() {
        privateFunction.call(this);
    };

    function privateFunction() {
        console.log("My name is " + this.name);
    }

    return Tester;
})();

var t = new Tester("Fred");
t.publicFunction(); // Outputs "My name is Fred" via the private function 
```

在那里，`privateFunction`它是完全私有的，只能由匿名函数中的代码访问。它只有一个副本，但您可以调用它，就好像您正在使用调用`Tester`实例的方法一样`privateFunction.call(this)`。

当然，或者，由于 using`call`比执行普通调用*稍慢*，您可以将实例作为参数传递：

```
var Tester = (function() {

    function Tester(name) {
        this.name = name;
    }
    Tester.prototype.publicFunction = function() {
        privateFunction(this);
    };

    function privateFunction(t) {
        console.log("My name is " + t.name);
    }

    return Tester;
})();

var t = new Tester("Fred");
t.publicFunction(); // Outputs "My name is Fred" via the private function 
```

当然，`call`只有在出现问题时，额外的成本才是问题；除非你在一个紧密的循环中调用了数十万次，否则这不太重要。因此，是否使用`call`和`this`传递参数主要是一种风格选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T18:10:27.547

我花了一段时间（来自 ActionScript 3 背景），但我觉得我应该与你分享我是[如何学会停止担心并喜欢缺乏私有方法的](http://www.imdb.com/title/tt0057012/)；）

许多流行的 JavaScript 库，例如[Backbone.js](http://documentcloud.github.com/backbone/)和[js-Signals](http://millermedeiros.github.com/js-signals/)只是使用一种命名约定，其中前导下划线表示私有成员，而不是使用稍微深奥的语法（尽管每个都有自己的！）。只是为了提供一些额外的上下文，Python 的文档甚至说 Python 根本不支持私有成员，并[建议使用下划线来代替](https://stackoverflow.com/questions/3294764/simulate-private-variables-in-python)。

JavaScript 是一种*非常*动态的语言；没有严格的类型检查和一些[非常令人兴奋的范围界定](http://www.robertsosinski.com/2009/04/28/binding-scope-in-javascript/)；并且有一些非常酷的库可以利用这些事实，例如[SinonJS](http://sinonjs.org/)，它可以轻松地在您的代码库中实现有意义的测试覆盖；例如：

```
var instance = new Car("ford");

// Replace the car's engine with test stub.
// Alternative syntax: sinon.stub(instance, '_engine');
instance._engine = sinon.stub(instance._engine);

car.start();

// As the '_engine' object has been mocked it gains new attributes.
ok(instance._engine.checkOil.calledOnce, 'Oil level was checked'); 
```

抱歉，这个答案并没有真正回答你的问题（TJ 的答案在这方面几乎是教科书） - 我只是认为提供另一种可能的解决方案是值得的。

# entity-framework - 带有 IRepository 模式集合的 POCO Entity Framework 4 在删除时被修改错误

> ID：10463254
> 
> 赞同：0
> 
> 时间：2012-05-05T15:24:09.807
> 
> 标签：entity-framework, poco, irepository

在我们的 EF 和 POCO 首次设置中，我们有一个 IRepository 模式非常适合我们。但是，我们遇到了一个奇怪的问题，即“集合已修改；枚举操作可能无法执行”。

基本上我们有一个带有 ObjectSet 的存储库，如下所示：

```
protected IObjectSet<T> ObjectSet
{
  get
  {
    if (_objectSet == null)
    {
      _objectSet = this.Context.CreateObjectSet<T>();
    }

    return _objectSet;
  }
} 
```

以及 IRepository 类上的删除方法，其实现如下：

```
public void Delete(T entity)
{
  ObjectSet.DeleteObject(entity);
} 
```

这一切都非常简单，到目前为止我们还没有遇到任何问题，但是每当我们尝试删除集合的对象时，都会出现此错误。如果我在删除方法上放置一个断点，将鼠标悬停在 ObjectSet 上并展开结果以便全部加载，那么 DeleteObject 工作正常，但如果所有项目都没有从 ObjectSet 加载，它会失败并出现集合修改错误。

我设置了一个不使用 POCO 或 IRepository 的测试平台，它工作正常，所以基本上有一些我很明显遗漏的东西。我们非常深入地在多个项目中使用这种模式，人们一直在努力解决它，而不是试图修复它，我认为这不是一个选择。

非常感谢您的帮助或见解。

编辑：

这很奇怪，但是当我从模型中删除某些实体时，这个错误消失了，但是我们有一个巨大的模型，我无法追踪它，因为我首先删除了除了删除中的特定表之外的所有内容。以前有没有人遇到过这种情况，我们正在使用继承表（每种类型），但我无法证明这是问题所在。

第二次编辑：

好的，我从模型中删除了除了每个类型继承实体的表之外的所有内容，并且当我删除除一个派生类型之外的所有类型并尝试从中删除它时，错误发生了。所以我的问题是，在使用每个类型继承的表时，还有其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:05:48.380

这是实体框架中的一个错误。根据连接在 4.5 中修复。

# django - Django模板和拆分变量列表

> ID：10463258
> 
> 赞同：0
> 
> 时间：2012-05-05T15:25:09.450
> 
> 标签：django, django-templates

在我的 django 视图中，我传递了一个包含多个项目的列表。

我的html设计是这样的：

```
<ul>
 <li>
   <div>1st item</div>
   <div>2nd item</div>
</li> 
 <li>
   <div>3th item</div>
   <div>4th item</div>
 </li> 
 <li>
   <div>5th item</div>
   <div>6th item</div>
 </li>
</ul> 
```

你看模式，每两个项目，我需要将它们拆分并放入一个新的`<li></li>`. 如何使用每两个循环和划分这些变量`{% for item in my_list %}`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:50:30.863

如果项目具有将它们自然分组的某些属性，则可以使用`regroup`：

```
{% if list_of_items %}
    <ul>
    {% regroup list_of_items by property as item_chunks %}
    {% for chunk in item_chunks %}
        <li>
        {% for item in chunk.list %}
        {{ item }}
        {% endfor %}
        </li>
    {% endfor %}
    </ul>
{% endif %} 
```

这比尼克的解决方案多几行，但如果这些元素确实具有自然连接它们的属性，我会说这是一个更优雅的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:02:39.243

你可以尝试这样的东西，它不是特别优雅，也没有经过任何测试！

```
{% if list_of_items %}
<ul>
<li>
  {% for item in list_of_items %}
  <div>{{ item }}</div>
  {% cycle '' '</li><li>' %}
  {% endfor %}
</li>
</ul>
{% endif %} 
```

您可以首先在视图中重新排列列表以使其成为列表列表，或者您可以编写自己的批处理过滤器。

据我所知，没有一种非常简单的 django 模板方式来做你想做的事 - Django 模板故意限制你编写 python 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T14:22:16.817

您可能想要枚举大小为 2 的批次中的 6 个元素的总列表，这为您提供 3 个批次，然后遍历每个批次。

为此，您可以在 templatetags 目录中添加自定义批处理过滤器。这是添加自定义标签/过滤器的文档。 [https://docs.djangoproject.com/en/1.9/howto/custom-template-tags/](https://docs.djangoproject.com/en/1.9/howto/custom-template-tags/)

您的自定义过滤器可以是这样的。

```
@register.filter

def batch(iterable, n=1):
    l = len(iterable)
    for ndx in range(0, l, n):
        yield iterable[ndx:min(ndx + n, l)] 
```

在你的 html

```
 {% for batch in yourlist|batch:2%}
        <li>
          {% for element in batch %}
              <div>{{element}}</div>
          {% endfor %}
        </li>
      {% endfor %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-01T22:54:26.877

为 Django 3.1 更新这个答案

```
{% block content %}
    <div class="row">
    {% for product in products %}
        <div class="col-md-auto">
           <h5>{{ product.name }}</h5>
        </div>

    {% if forloop.counter|divisibleby:"6" %}
        </div>
        <div class="row">
    {% endif %}

    {% endfor %}
    </div>

{% endblock content %} 
```

# asp.net - 访问上一页

> ID：10463260
> 
> 赞同：0
> 
> 时间：2012-05-05T15:25:19.497
> 
> 标签：asp.net, vb.net, exception-handling, httprequest, nullreferenceexception

我正在尝试使用 VB.NET 使用以下代码在 ASP.NET 中访问您的上一页：

```
Partial Class _Default Inherits Page        
    Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        Dim previousPage As String = Page.Request.UrlReferrer.ToString
        If (Request.UrlReferrer <> Nothing) Then
            If previousPage.Contains("Login") Then
                Dim tUsername As String = Session("Username")
                lblUsername.Text = "Welcome, " + tUsername
            ElseIf previousPage.Contains("Register") Then
                Dim cUsername As String = Session("CUsername")
                lblUsername.Text = "Welcome, " + cUsername
            Else
                lblUsername.Text = "Welcome, Guest"
            End If
        End If
    End Sub
End Class 
```

我收到此错误：

> 你调用的对象是空的。

在：

```
Dim previousPage As String = Page.Request.UrlReferrer.ToString 
```

我想要做的是访问前一页，这样我就可以获得一个会话变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:37:28.907

试试这个代码。

```
Partial Class _Default
        Inherits System.Web.UI.Page

        Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

            If (Request.UrlReferrer <> Nothing) Then

               Dim previousPage As String = Page.Request.UrlReferrer.ToString

                If previousPage.Contains("Login") Then

                    Dim tUsername As String = Session("Username")

                    lblUsername.Text = "Welcome, " + tUsername

                ElseIf previousPage.Contains("Register") Then

                    Dim cUsername As String = Session("CUsername")

                    lblUsername.Text = "Welcome, " + cUsername
                End If

            Else
                    lblUsername.Text = "Welcome, Guest"

            End If

        End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:41:38.943

不确定您要做什么，但虽然很容易回答您的具体问题，但您应该退后一步，回顾一下您为什么要这样做。

您*似乎*正在尝试基于某些身份验证来控制流量。如果是这样，请考虑[ASP.Net Forms Authentication](http://msdn.microsoft.com/en-us/library/xdt4thhy.aspx) +/- Login Controls。您可以将此架构“插入”到您现有的身份验证机制中（这意味着您不必根除现有的东西来实现它）。

（如果您仍想重新发明轮子）考虑使用 cookie，而不是在登陆*“此”*页面之前尝试找出*“用户来自哪里*” ——这两者都可以变化 x——你的网站拥有的网页越多或者会有，你会有更多的意大利面。

# ruby - 在 ruby 中将 Hex STDIN / ARGV / 转换为 ASCII

> ID：10463264
> 
> 赞同：4
> 
> 时间：2012-05-05T15:25:30.680
> 
> 标签：ruby, string, hex, stdin

我的问题是如何将 cmd ARGV 的 STDIN 或从十六进制转换为 ascii

我知道如果我将十六进制字符串分配给变量，一旦我打印它就会被转换

前任

```
hex_var = "\x41\41\x41\41"
puts hex_var 
```

结果将是

> AAAA

但我需要通过（ARGV 或获取）从命令行获取值

说我有这行

```
s = ARGV

puts s
# another idea
puts s[0].gsub('x' , '\x') 
```

然后我跑了

```
ruby  gett.rb \x41\x41\x41\x41 
```

我有

> \x41\x41\x41\x41

有没有办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:15:05.723

在控制台中输入的反斜杠将由 shell 解释并且不会进入您的 Ruby 脚本，除非您连续输入两个反斜杠，在这种情况下，您的脚本将获得文字反冲并且不会自动转换后面的十六进制字符代码强烈反对。

如果将脚本的最后一行替换为以下代码，则可以手动将这些转义代码转换为字符：

```
puts s.gsub(/\\x([[:xdigit:]]{1,2})/) { $1.hex.chr } 
```

然后使用双重反冲输入运行它：

```
$ ruby gett.rb \\x41\\x42\\x43
ABC 
```

*当通过gets*或类似方法获取用户输入时，用户只需要为每个字符转义输入一个反斜杠，因为它确实会作为文字反斜杠传递给您的脚本，因此上述*gsub*调用可以正确处理。

* * *

解析命令行参数的另一种方法是让 shell 为您解释字符转义。如何做到这一点取决于您使用的外壳。如果使用*bash*，可以这样做：

```
$ echo $'\x41\x42\x43'
ABC
$ ruby -e 'puts ARGV' $'\x41\x42\x43'
ABC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:20:03.653

您在这里要处理几个问题。您已经尝试解决第一个问题，但我认为您的解决方案并不理想。您使用命令行参数传入的反斜杠正在由 shell 评估，并且永远不会进入 ruby​​ 脚本。如果您只想在脚本中执行 gsub，则甚至没有理由将它们传入。按照您的方式进行操作意味着参数中的*任何*“x”都将被换掉，即使是那些不习惯的表示一个十六进制。如果可能的话，最好对参数中的 \ 进行双重转义。如果没有价值来自哪里的背景，很难说方式实际上会更好。

```
ruby gett.rb \\x41\\x41 
```

这样 ARGV 实际上会得到 '\x41\x41'，这更接近你想要的。

但是，它仍然不是您想要的，因为 ARGV 参数是在没有表达式替换的情况下创建的（就像它们在单引号中一样）。所以 Ruby 正在逃避那个 \ 即使你不想要它。本质上，您需要接受它并重新评估它，就好像它在双引号中一样。

```
eval('"%s"' % s) 
```

其中 s 是字符串。

因此，将它们放在一起，您最终可能会得到以下任何一种：

```
# ruby gett.rb \x41\x41

ARGV.each do |s|
  s = s.gsub('x' , '\x')
  p eval('"%s"' % s)
end
# => "AA"

# ruby gett.rb \\x41\\x41

ARGV.each do |s|
  p eval('"%s"' % s)
end
# => "AA" 
```

# scala - Scala，使用 Responder 来抽象可能的异步计算

> ID：10463266
> 
> 赞同：0
> 
> 时间：2012-05-05T15:25:54.653
> 
> 标签：scala, monads, akka, future

我一直在研究 scala 和 AKKA 来管理一个明显可并行化的算法。我有一些函数式编程的知识，并且主要使用 Java，所以我的 FP 可能还不是最好的。

我正在使用的算法非常简单，有一个顶级计算：

```
 def computeFull(...): FullObject 
```

此计算调用子计算，然后将其汇总（以简化）：

```
 def computePartial(...): Int 
```

并`computeFull`做这样的事情（再次简化）：

```
 val partials = for(x <- 1 to 10
     y <- 1 to 10) yield computePartial(x, y)
 partials.foldLeft(0)(_ + _) 
```

因此，它非常接近 AKKA 示例，进行 PI 计算。我有很多 computeFull 可以调用，并且每个里面都有很多 computePartial。所以我可以将所有这些包装在 AKKA 演员中，或者在 Futures 中简化，在单独的线程中调用每个 computeFull 和每个 computePartial。然后我可以使用[http://doc.akka.io/docs/akka/snapshot/scala/futures.html](http://doc.akka.io/docs/akka/snapshot/scala/futures.html)的 fold、zip 和 map 函数来组合期货。

但是，这意味着 computeFull 和 computePartial 必须返回包含实际结果的 Futures。因此，他们变得依赖于 AKKA，并假设事情是并行运行的。事实上，我还必须在我的函数中隐式传递执行上下文。

我认为这很奇怪，算法“不应该”知道它是如何并行化的细节，或者它是否是。

在阅读了 scala 中的 Futures（而不是 AKKA 的）并查看了代码延续之后。scala (http://www.scala-lang.org/api/current/scala/Responder.html) 提供的 Responder monad 似乎是抽象函数调用如何运行的正确方法。我有这种模糊的直觉，computeFull 和 computePartial 可以返回 Responders 而不是期货，并且当执行 monad 时，它决定嵌入在 Responder 中的代码如何执行（如果它产生一个新的 actor 或者它是否在同一个线程上执行）。

但是，我不确定如何得到这个结果。有什么建议么？你认为我走对了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:05:27.103

如果您不想依赖 Akka（但请注意，Akka 风格的期货将被移动并包含在 Scala 2.10 中）并且您的计算是对集合的简单折叠，您可以简单地使用 Scala 的并行集合：

```
val partials = for { x <- (1 to 10).par
  y <- 1 to 10
} yield computePartial(x, y)
// blocks until everything is computed
partials.foldLeft(0)(_ + _) 
```

当然，这将阻塞直到`partials`准备就绪，因此当您真正需要期货时，它可能不是一个合适的情况。

使用 Scala 2.10 风格的期货，你可以让它完全异步，而你的算法不会注意到它：

```
def computePartial(x: Int, y: Int) = {
  Thread.sleep((1000 * math.random).toInt)
  println (x + ", " + y)
  x * y
}

import scala.concurrent.future
import scala.concurrent.Future
val partials: IndexedSeq[Future[Int]] = for {
  x <- 1 to 10
  y <- 1 to 10
} yield future(computePartial(x, y))

val futureResult: Future[Int] = Future.sequence(partials).map(_.fold(0)(_ + _))

def useResult(result: Int) = println(s"The sum is $result")

// now I want to use the result of my computation
futureResult map { result => // called when ready
  useResult(result)
}
// still no blocking
println("This is probably printed before the sum is calculated.") 
```

所以，`computePartial`不需要知道它是如何执行的。（尽管它不应该有任何副作用，即使出于本示例的目的，`println`也包括了副作用。）

一种可能的`computeFull`方法应该管理算法并因此了解`Futures`并行性。毕竟这*是*算法的一部分。

（至于`Responder`: Scala 的旧期货使用它，所以我不知道这是怎么回事。 - 执行上下文不正是您正在寻找的配置方式吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:13:21.047

The single actor in akka knows not if he runs in parrallel or not. That is how akka is designed. But if you don't want to rely on akka you can use parrallel collections like:

```
for (i <- (0 until numberOfPartialComputations).par) yield (
  computePartial(i)
).sum 
```

The sum is called on a parrallel collection and is performed in parrallel.

# php - 如何轻松将 PEAR 依赖项与 app 打包？

> ID：10463269
> 
> 赞同：0
> 
> 时间：2012-05-05T15:26:02.313
> 
> 标签：php, pear

我正在开发一个利用一些 PEAR 包的 PHP 应用程序。我希望能够将应用程序打包成存档（例如 tar、zip 等），以便在服务器上轻松下载和提取以运行。我不希望服务器需要 PEAR 来下载或安装依赖项。有没有一种简单的方法将 PEAR 依赖项与应用程序打包在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:44:22.747

有两种部署方式（我建议您同时提供两种选择）：

1.  法尔
2.  扩展文件目录

在任何一种情况下，如果您要收集所有相关的组件文件，您可以查询 PEAR 以获取这些文件。

**列出 PEAR 安装程序安装的软件包**

```
pear list 
```

**结果列表**

```
Installed packages, channel pear.php.net:
=========================================
Package          Version State
Archive_Tar      1.3.7   stable
Console_Getopt   1.3.0   stable
PEAR             1.9.4   stable
Structures_Graph 1.0.4   stable
XML_Util         1.2.1   stable 
```

**列出包 XML_Util 的文件**

```
pear list-files Archive_Tar # or pear list Archive_Tar 
```

**结果列表**

```
Installed Files For Archive_Tar
===============================
Type Install Path
php  /Users/wilmoore/local/php/versions/5.4.0/lib/php/Archive/Tar.php
doc  /Users/wilmoore/local/php/versions/5.4.0/lib/php/doc/Archive_Tar/docs/Archive_Tar.txt 
```

从这里开始，只需遍历该列表并收集文件即可。您应该能够跳过以“doc”为前缀的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:47:21.640

好的，您可能正在寻找Composer，这是一个PHP[中的依赖管理工具。](http://www.getcomposer.org/)

如果我理解正确，这应该做你想要的。

# iphone - 无法将事件附加到段控制

> ID：10463272
> 
> 赞同：0
> 
> 时间：2012-05-05T15:26:26.450
> 
> 标签：iphone, objective-c, ios

再会。我尝试将事件添加到段控制，但它总是让我感到厌烦。我在课堂上创建了一个属性

```
#import <UIKit/UIKit.h>

@interface Events : UINavigationController{
    UISegmentedControl *segmentedControl;
}
@property (nonatomic, retain) UISegmentedControl *segmentedControl;
-(void)changeSegment:(id)sender;
@end 
```

在 .m 文件中我添加了一个子视图

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
         self.segmentedControl = [[UISegmentedControl alloc] initWithItems:
                                                [NSArray arrayWithObjects:
                                                 [NSString stringWithString:NSLocalizedString(@"Трансляции", @"")],
                                                 [NSString stringWithString:NSLocalizedString(@"Мафия", @"")],

                                                 nil]];
        segmentedControl.autoresizingMask = UIViewAutoresizingFlexibleWidth;
        segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
        [segmentedControl setSelectedSegmentIndex:0];

        //[segmentedControl setFrame:[self.navigationBar bounds]];
        CGRect rect = [self.navigationBar bounds];
        rect.size.width = rect.size.width - 40;
        rect.size.height = rect.size.height - 15;
        rect.origin.y =  rect.origin.y + 7;
        rect.origin.x =  rect.origin.x + 17;
        [segmentedControl setFrame:rect];

        [self.navigationBar addSubview:segmentedControl];

    }
    return self;
} 
```

然后在 ViewDidLoad 我尝试添加事件

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [self.segmentedControl addTarget:self action:@selector(changeSegment:) 
               forControlEvents:UIControlEventValueChanged];

} 
```

以及事件描述

```
-(void)changeSegment{
    if(segmentedControl.selectedSegmentIndex == 0){

    }
    if(segmentedControl.selectedSegmentIndex == 1){

    }
} 
```

但它从来没有进入这个功能。并给我错误 [Events changeSegment:]: unrecognized selector sent to instance 0x6833bf0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:38:23.373

您声明`-(void)changeSegment:(id)sender`了选择器并将其添加`@selector(changeSegment:)`到您的段控件中，但是，您实现了`-(void)changeSegment`or `@selector(changeSegment)`，请注意缺少 :。

只需更改此：

```
-(void)changeSegment{
    if(segmentedControl.selectedSegmentIndex == 0){

    }
    if(segmentedControl.selectedSegmentIndex == 1){

    }
} 
```

对此：

```
-(void)changeSegment:(id)sender{
    if(segmentedControl.selectedSegmentIndex == 0){

    }
    if(segmentedControl.selectedSegmentIndex == 1){

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:28:49.417

您正在参加活动。是价值改变了吗？

我想你在 touchUpInside 上试试

# java - 将图像存储在mysql中并检索它

> ID：10463274
> 
> 赞同：0
> 
> 时间：2012-05-05T15:26:31.570
> 
> 标签：java, mysql, image, jsp, servlets

我正在用 jsp&servlet 创建一个网站

我想问：

将图像存储在数据库（mysql）中并检索它的最佳方法是什么

将其用作个人资料的图片

我该怎么做？

提前谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:28:41.093

两种常见的解决方案：

*   直接在数据库中的字节字段中

*   在磁盘上，路径存储在数据库中（我个人喜欢使用文件的 SHA1 作为名称，所以我不能有两次相同的文件，如果 SHA1 是 abcdef，路径是 a/b/cdef）

两种解决方案都非常有效。第一个解决方案的优点是只有一个文件要备份、启用回滚等等。第二种可能更自然，因为磁盘文件系统是用来存储文件的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:29:15.857

将图像保存在服务器上的文件夹中。将图像路径保存在 db 中。在显示时从 db 获取图像路径并检索图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:35:54.200

将图像存储在数据库中。

```
 import java.sql.*;
    import java.io.*;

    public class insertImage{
     public static void main(String[] args) {
      System.out.println("Insert Image Example!");
      String driverName = "com.mysql.jdbc.Driver";
      String url = "jdbc:mysql://localhost:3306/";;
      String dbName = "databasename";
      String userName = "root";
      String password = "root";
      Connection con = null;

      try{
       Class.forName(driverName);
       con = DriverManager.getConnection(url+dbName,userName,password);
       Statement st = con.createStatement();
       File imgfile = new File("images.jpg");
       FileInputStream fin = new FileInputStream(imgfile);
       PreparedStatement pre = con.prepareStatement("insert into Tablename values(?)");
       pre.setBinaryStream(3,fin,(int)imgfile.length());
       pre.executeUpdate();
       System.out.println("Inserting Successfully!");
       pre.close();
       con.close(); 
     }
     catch (Exception e){
      System.out.println(e.getMessage());
     }
    }
   } 
```

[使用 Servlet http://www.roseindia.net/servlets/retreiveimage.shtml](http://www.roseindia.net/servlets/retreiveimage.shtml)从数据库中检索图像

# javascript - Objective-c 的参数 [self] 是否与 JavaScript 的原型相关？

> ID：10463276
> 
> 赞同：0
> 
> 时间：2012-05-05T15:26:46.673
> 
> 标签：javascript, objective-c

只是涉足一些 Objective-C，我发现这句话很有趣：

```
self = [super init] 
```

Objective-C 的 self 参数和 JavaScript 的原型链一样吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:40:44.123

不。Objective-C 的继承模型不是基于原型的，它有类作为实例的蓝图。对 self 的调用不会导致任何原型链。

Obj-C 的 self 与 Java 的 this 相关性更好。

# ruby-on-rails - 在图像上显示评论

> ID：10463277
> 
> 赞同：0
> 
> 时间：2012-05-05T15:27:10.757
> 
> 标签：ruby-on-rails, ruby

所以[昨天](https://stackoverflow.com/questions/10449780/displaying-comments-under-an-image)我遇到了一个问题，我无法在我的艺术家页面上显示来自朋友的评论，我已经设法解决了这个问题，但现在我正在努力在我的图像上显示评论。

我现在要做的就是显示我手动输入数据库的评论并将它们显示在我的图像下方。

这是图像的模型：

```
class Image < ActiveRecord::Base
  has_many :publishings
  has_many :artists, :through => :publishings
  has_many :comments,:through => :friends
  has_many :comments, :as => :resource, :class_name => "Commentable"
end 
```

这是图像的 show.html

```
<p id="notice"><%= notice %></p>
<div id="container">
  <p>
    <b>Title:</b>
    <%= @image.title %>
  </p>

  <p>
    <b>Filename:</b>
    <%= @image.filename %>
    <%= image_tag @image.filename %>
  </p>

  <p>
    <b>Likes:</b>
    <span id="images_<$=@image.id%>_likes_count"><%= @image.likes %></span>
  </p>
  <div id="comments">
    <h2>Comments</h2> 
    <%= render :partial => "shared/comment", :collection => @image.comments%>
  </div>
</div>

<%= link_to 'Like', like_image_path(@image), :method => :post %> |
<%= link_to 'Edit', edit_image_path(@image) %> |
<%= link_to 'Back', images_path %> 
```

这是我目前收到的错误：

```
> undefined method `first_name' for nil:NilClass

    Extracted source (around line #16):

13: </p>
14: <p>
15:   <b>First name:</b>
16:   <%= @artist.first_name %>
17: </p>
18: 
19: <p> 
```

应用程序跟踪

```
app/views/images/show.html.erb:16:in `_app_views_images_show_html_erb___1549892128_70077336775360_0'
app/controllers/images_controller.rb:18:in `show' 
```

这是朋友的模型，它显示了正确的方法：

```
class Friend < ActiveRecord::Base
  has_many:friends
  has_many :artists, :through => :publishings

  def display_name
    "#{self.first_name} #{self.second_name}"
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:10:51.760

In yesterday's question, you posted your `ImagesController` but the `show` method never sets the `@artist` variable.

Your stack trace here indicates that the `@artist` variable is nil.

But, since your model indicates that an image can have many artists, your view really should logically change to:

```
<% @image.artists.each do |artist| %>
  <p>
    <b>First name:</b>
    <%= artist.first_name %>
  </p>
<% end %> 
```

# java - 如何在桌面应用程序中添加 Google 搜索框？

> ID：10463278
> 
> 赞同：2
> 
> 时间：2012-05-05T15:27:14.843
> 
> 标签：java, swing

我正在用 java 创建一个简单的桌面应用程序，它显示当前正在运行的服务。我想在顶部添加一个谷歌搜索栏，可以直接在默认浏览器中打开应用程序中输入的关键字的谷歌搜索结果（网页）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T15:31:29.990

您应该`query_string`从输入框中获取值，然后使用以下内容：

```
try {
  java.awt.Desktop desktop = java.awt.Desktop.getDesktop();
  java.net.URI uri = new java.net.URI( "http", "google.com", 
    "/search?q=" + query_string );
  desktop.browse( uri );
} catch ( Exception e ) {
  System.err.println( e.getMessage() );
} 
```

# java - Android - 从音量计算分贝

> ID：10463281
> 
> 赞同：1
> 
> 时间：2012-05-05T15:27:48.823
> 
> 标签：java, android, audio, android-emulator, android-ndk

是否可以从音量级别计算分贝值？
假设正在播放声音（它可以是任何轨道，但我使用的是带有 AudioTrack 的生成声音）。播放声音时，声音的音量从 0（静音）增加到 99（最大）。现在我想检索分贝值，例如当音量为 50 时。
是否可以？

我在这个线程中找到了如何计算分贝值：[从振幅计算分贝 - Android 媒体记录器](https://stackoverflow.com/questions/6571894/calculate-decibel-from-amplitude-android-media-recorder)

```
power_db = 20 * log10(amp / amp_ref); 
```

但这里它使用幅度，而不是音量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:34:06.753

对于您的计算，您可能可以假设更多的振幅 = 更多的音量。

它们密切相关：[http](http://en.wikipedia.org/wiki/Volume_(sound) ://en.wikipedia.org/wiki/Volume_(sound )

# javascript - Google Places API - 使用城市查找地址

> ID：10463286
> 
> 赞同：7
> 
> 时间：2012-05-05T15:28:27.020
> 
> 标签：javascript, google-maps, google-places-api

我计划使用 Google Places API 在我的网站中创建地址自动填充功能。我的问题是关于我的要求是否可以使用 Google Places。

我有一个“发布请求”页面，用户在其中发布地址（城市、街道和门牌号）。我还有一个“搜索”页面，用户可以在其中根据城市搜索帖子。在这里，用户只插入一个城市名称，没有街道和门牌号码。

我的问题：

1.  我可以强制用户插入城市、街道和门牌号（例如，仅插入城市或仅插入城市和街道会提示无效输入，或者自动完成将仅返回城市、街道和门牌号的结果）？

2.  我可以强制用户只插入城市（没有街道和门牌号）吗？

3.  假设用户发布了一个带有“MyCity, MyStreet 12”的地址。在应用程序的后台，我得到这个特定位置的 id 并存储它。另一个用户正在搜索帖子并插入“MyCity”。在后台，我获得了“MyCity”的特定 ID，并使用此 ID 在我的数据库中搜索。如何使用“MyCity”键找到第一个用户的结果：“MyCity, MyStreet 12”？
    换句话说，假设我有一个代表城市的位置 id 和代表完整地址（城市、街道、门牌号）的其他位置 id，我如何仅使用 id 检查完整地址是否属于城市？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T09:45:58.877

至于用户在与`Autocomplete`[^(dev-guide)](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)关联的输入框中输入的内容，您无法控制他们输入的内容。但是，当您设置`Autocomplete`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#Autocomplete)时，您可以定义控制将返回的结果的选项。您的关键是正确设置`types`选项。

具体到您的问题**#1** ，您可以通过设置为来限制将返回`Autocomplete`到地址的结果，如下例所示：`types``geocode`

```
var defaultBounds = new google.maps.LatLngBounds(
  new google.maps.LatLng(-33.8902, 151.1759),
  new google.maps.LatLng(-33.8474, 151.2631));

var input = document.getElementById('searchTextField');
var options = {
  bounds: defaultBounds,
  types: ['geocode']
};

autocomplete = new google.maps.places.Autocomplete(input, options); 
```

具体到您的问题**#2**，您可以通过设置为如下所示来限制返回`Autocomplete`到城市的结果：`types``cities`

```
var input = document.getElementById('searchTextField');
var options = {
  types: ['(cities)'],
  componentRestrictions: {country: 'fr'}
};

autocomplete = new google.maps.places.Autocomplete(input, options); 
```

另请注意，由于`Autocomplete`已被限制为`(cities)`，我添加了一个`componentRestrictions`说明符来设置搜索城市的国家（在本例中为法国）并删除了`bounds`说明符。

具体到你的问题**#3**，你可以创建两张表，一张存储**City**数据，一张存储**Address**数据，如下UML图所示：

![在此处输入图像描述](../Images/b9a6986b330560b67881b1b12b281c38.png)

根据您问题中的描述，此设计有一些关键方面：

*   `City`从到有一对多的关系`Address`。这将允许您将许多`Address`记录关联到单个`City`记录。它还将使检索`Address`任何已输入的所有记录变得简单`City`。
*   `Address`和之间的关系`City`表明对于*每个* `Address`， a`City`必须存在。这意味着当用户输入 时`Address`，您必须采取以下措施： 1 - 检查数据库中是否`City`已经`Address`存在。2 - 如果`City` *确实*存在，则在存储新的 时检索其`ID`并将其用作外键值。3 - 如果*不*存在，则必须为该创建一个新的唯一性，并且必须将其存储在数据库中。那么在存储. _ 确保每个人都有相关的`City-ID``Address``City` *`ID``City``City``ID``City``City-ID``Address``Address``City`回答您在问题 #3 中提出的一个问题：**如何使用“MyCity”键找到第一个用户的结果：“MyCity, MyStreet 12”？**因为当您存储“MyCity, MyStreet 12”`Adress`记录时，您确保表中存在“MyCity”记录`City`。如果另一个用户输入相同的或与相同的关联的用户将来输入的，则检索`ID`for很简单。`City``City``Address``City`*
**   `City`和之间的关系`Address`表示，对于任何`City`可能有零个或多个关联`Address`记录。这确保了即使没有进行后续搜索，您描述中仅搜索 a 的用户`City`也可以存储。被存储，它有一个，它只是在等待以后可能添加的任何新记录。`City``Address``City``ID``Address`*

 *最后，作为问题 #3 的一部分，您又问了一个问题：**如何仅使用 id 来检查完整地址是否属于城市？**能够回答这个问题就是为什么`City-ID`每条`Address`记录都有一个外键。它清楚地定义了`City`与 any 相关联的`Address`。因此，如果您有`ID`for a`City`和`ID`for an `Address`，确定它们是否匹配的最简单方法是： 1 -使用 .`Address`从数据库中检索`Address` `ID`. 2 - 将刚刚从数据库中检索到的值与您开始使用的`City-ID`值进行比较；如果它们匹配，您就知道与`Address``ID``City``Address``City`如果它们不匹配，您可以确定 that`Address`和 that之间没有关系`City`。

我不完全确定您要通过地址和城市实现什么目标，但我已尝试为您提供一个可靠的解决方案，涵盖您在问题中描述的内容。我包含了很多细节，以便您的所有观点都得到解决，并希望它能使我的描述清晰易懂。我希望这可以帮助你 -

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:37:17.753

这比 Google Places 更像是一个 Javascript 问题。

使用 Javascript 例程验证表单，并在案例 #1 中检查是否填写了所有字段。另一方面，对于案例 #2，您可以禁用/删除您不想填写的字段，并仅使用您要发送的内容发布请求。

对于#3，这只是一个缓存问题。使用 localStorage 或数组将城市存储为键，并将结果存储为值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T03:28:35.873

正如 Sean Mickey 所描述的，Google Places 将帮助您的用户自动填写他们的地址：

1.  他们开始在一个字段中输入他们的*街道地址*
2.  谷歌给他们一个可能匹配地址的列表
3.  他们选择一个，你会得到[这样的回应](https://developers.google.com/maps/documentation/places/autocomplete#place_autocomplete_responses)

该`id`响应将针对他们的街道地址，而不是针对城市。所以它不会以你想要的方式有用。如果要匹配城市，则需要存储城市的*名称*（如果需要，可以创建自己的 id 表）。

想想你想如何在你的数据库中实现位置搜索：

*   按城市搜索（错过居住在城市范围之外的人）
*   按距离搜索（找到一定半径内的所有人）

如果您选择按距离搜索，您还应该存储 Google Places 在用户输入地址时返回给您的纬度和经度。您还需要阅读如何在数据库中进行[空间搜索](http://wiki.apache.org/solr/SpatialSearch)（尤其是 geodist）。*

# android - 压缩大量图片与app打包

> ID：10463299
> 
> 赞同：0
> 
> 时间：2012-05-05T15:29:43.740
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我想用我的应用程序打包大量图片，几乎 90 mb。我最初的实现是在需要时下载图像，但是这会导致不必要的等待并破坏体验。有没有办法用 apk 压缩应用程序? 否则经验中的任何建议如何处理这种情况？另外，如果我要求用户在第一次运行时下载 sd 卡上的图像集，如果我想更新图像（即更改一些图像），我会面临任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:50:20.833

首先，您可能会发现[这篇](http://android-developers.blogspot.com/2012/03/android-apps-break-50mb-barrier.html)Android 博客文章很有用。您可以为您的 .apk 分配巨大的扩展文件（最多 2 GB），因此您不妨将这些图像放在那里。但是，当您决定更新这些图像时，如果我不得不再次下载 90 MB，作为用户，我肯定会感到不安。

作为替代方案，您可以将这些图像 .zip 压缩起来，如果您可以启动整个应用程序。大小低于 50 MB 限制，您可以将其存储为项目资产。您可以在第一次运行时将这些图像解压缩到 SD 卡上。但是话又说回来，更新图像是有问题的。

为什么您认为按需下载是一种不好的方法？您的应用可以根据需要下载这些图像，并将它们缓存在 SD 卡上。您还可以限制缓存大小。我肯定会走那条路。与在项目资产中嵌入巨大的 .zip 文件或使用扩展文件的静态方式相反，更新图像非常简单。

# android - Sqlite 中表格的最后一个元素

> ID：10463305
> 
> 赞同：-1
> 
> 时间：2012-05-05T15:30:50.140
> 
> 标签：android, sqlite

如何获取表格的最后 N 个元素？我已经使用了这个查询，但它似乎不起作用。

```
Cursor c = database.rawQuery("select top 7 * from dailystats order by daily_ID desc;", null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:33:08.197

只需使用[`limit`](http://sqlite.org/lang_select.html#orderby)：

```
select * from dailystats order by daily_ID desc limit 7; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:34:15.217

Top 用于 SQL Server 你需要使用 Limit

```
select * from dailystats order by daily_ID desc limit 7; 
```

或仅选择最后一行

```
select * from dailystats where daily_ID = (select max(daily_ID) from dailystats); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:46:29.343

为了赢得这一点，我按照 OP 的要求发表评论作为答案；）

使用`limit`，`select * from dailystats order by daily_ID desc LIMIT 7`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T15:41:27.303

如果您允许我将所有这些答案转换为更多 Android 代码，例如：

```
SQLiteDatabase database = dbHelper.getReadableDatabase();
String tableName = "dailystats";
String orderBy = "daily_ID desc";
String limit = String.valueOf(5);
Cursor cursor = database.query(tableName,
                               null, //all columns
                               null, // no where clause
                               null, // no where arguments
                               null, // no grouping
                               null, // no having
                               orderBy,
                               limit); 
```

从那时起，您就可以像使用Android中的`cursor`任何其他功能一样使用 了。`cursor`它将按降序保存`limit`与列相关的最高结果。`orderBy`

# jquery - 为什么 jQuery fadeIn() 不能正常工作？

> ID：10463306
> 
> 赞同：1
> 
> 时间：2012-05-05T15:31:15.543
> 
> 标签：jquery, settimeout, fadein

我有我写的这个函数应该显示通知：

```
function newNotification(message) {
    window.clearTimeout(window.tid);
    $("#notify").stop().prepend(message + '<br/>').fadeIn(400, function() {
        window.tid = window.setTimeout(function() {
            $("#notify").fadeOut('3000', function() {
               $("#notify").html('');
            });
        }, 3000);
    });
} 
```

问题是，如果我在另一个淡出时传递通知，则`#notify`div 不会淡入。它的不透明度卡在 0 和 1 之间。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:23:07.180

好的，所以我终于设法弄清楚了。`FadeIn()`仅当元素被隐藏时才有效，这就是为什么当不透明度介于 0 和 1 之间时它会卡住。

我只需要替换`FadeIn()`为`FadeTo()`使其工作。

谢谢大家的帮助！

# azure - 同步框架 - 同步前检查逻辑

> ID：10463310
> 
> 赞同：0
> 
> 时间：2012-05-05T15:31:56.497
> 
> 标签：azure, synchronization, microsoft-sync-framework, data-synchronization, azure-data-sync

我想知道我是否可以用一些逻辑同步两个数据库。

```
DbSyncTableDescription user = SqlSyncDescriptionBuilder.GetDescriptionForTable("User", sqlServerConn);
DbSyncTableDescription role = SqlSyncDescriptionBuilder.GetDescriptionForTable("Role", sqlServerConn);
DbSyncTableDescription usersInRoles = SqlSyncDescriptionBuilder.GetDescriptionForTable("UsersInRoles", sqlServerConn); 
```

例如，将管理员同步到用户表。不要同步五线谱。

![在此处输入图像描述](../Images/0bc964ce21ff8ad067f88c397403bc3f.png)

预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:10:44.567

您可以在您的范围内定义过滤器...请参阅：[演练：定义过滤范围和供应服务器数据库](http://msdn.microsoft.com/en-us/library/ff928601.aspx)

或者如果您想要更多关于需要同步的逻辑，您可以拦截 ChangesSelected 事件中的更改...请参阅：[Manipulating the change dataset in Sync Fx](http://jtabadero.wordpress.com/2011/03/07/manipulating-the-change-dataset-in-sync-fx/)

# php - CakePHP hasAndBelongsToMany 没有按预期链接

> ID：10463315
> 
> 赞同：1
> 
> 时间：2012-05-05T15:32:43.557
> 
> 标签：php, cakephp

我有三个表：用户、个人资料和朋友。

它们是这样连接的：

```
public $name = 'User';

    public $hasOne = 'Profile';

    public $hasMany = array(
        'Post',
        'Answer'
    );

    public $hasAndBelongsToMany = array(
        'User'=>array(
            'className'              => 'User',
            'joinTable'              => 'friends',
            'foreignKey'             => 'user_from',
            'associationForeignKey'  => 'user_to'
        )
    ); 
```

并且个人资料模型只是一个 belongsTo 用户，所以我没有展示，而朋友模型是虚拟的，通过在用户模型中进行关联。

因此，要获取用户的朋友列表。我在朋友控制器中像这样传递用户名：

```
public function index( $username )
{   
    $friends = $this->User->find('first', 
        array(
            'conditions'=>array(
               'User.username'=>$username
            ),
            'contain'=>array(
                'Profile',
                'Friend'=>array(
                    'conditions'=>array(
                        'Friend.status'=>1
                    ),
                    'contain'=>'Profile'
                )
            )
        )
    );

    $this->set('friends', $friends);
} 
```

哪个应该为朋友提取数据以及相关的个人资料信息！

但是我得到了这个错误：`Model "Friend" is not associated with model "Profile" [APP/Cake/Model/Behavior/ContainableBehavior.php, line 339]`所以有些东西不能正常工作......

任何人都可以帮忙吗？

我尝试在模型中将他 hasAndBelongsToMany 的名称更改为 Friends ，但这会引发一个错误，即表格不是 unqiue ......所以这也不是解决方案。

表：

```
**users**
id
username
password

**profiles**
id
name
user_id

**friends**
id
user_from
user_to
status 
```

如果我将模型更改为：

```
public $hasAndBelongsToMany = array(
        'Friend'=>array(
            'className'              => 'Friend',
            'joinTable'              => 'friends',
            'foreignKey'             => 'user_from',
            'associationForeignKey'  => 'user_to'
        )
    ); 
```

然后我得到这个错误：

```
Database Error
Error: SQLSTATE[42000]: Syntax error or access violation: 1066 Not unique table/alias: 'Friend'

SQL Query: SELECT `Friend`.`id`, `Friend`.`user_from`, `Friend`.`user_to`, `Friend`.`created`, `Friend`.`status`, `Friend`.`id`, `Friend`.`user_from`, `Friend`.`user_to`, `Friend`.`created`, `Friend`.`status` FROM `db52704_favorr`.`friends` AS `Friend` JOIN `db52704_favorr`.`friends` AS `Friend` ON (`Friend`.`user_from` = 6 AND `Friend`.`user_to` = `Friend`.`id`) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:10:28.797

相关模型的模型和别名应该是唯一的。在您的情况下，问题是：

```
public $name = 'User';
...
public $hasAndBelongsToMany = array(
    'User'=>array(
    ... 
```

如果`friends`是连接表名，则可以`Friend`用作朋友用户的别名。

第二件事是你试图包含两者`User => Profile`，`User => Friend => Profile`这可能也是有问题的。

以我的经验， deep `contain`s 可能会变得非常低效。您可能会考虑从包含中删除好友`Profile`，然后提取好友用户 ID 并分别获取配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:42:52.583

我想你正在寻找这样的东西：

用户.php

```
public $hasAndBelongsToMany = array(
    'Friend'=>array(
        'className'              => 'User',
        'joinTable'              => 'friends',
        'foreignKey'             => 'user_from',
        'associationForeignKey'  => 'user_to'
    )
); 
```

这将在 habtm 关系中将 User 表作为其自身的 Friend 别名。为了遵守约定，连接表应`friends_users`使用`user_id`和`friend_id`键调用。

这是我使用我制作的测试应用程序得到的结果（只需添加您的条件）：

```
$this->User->contain(array(
            'Profile',
            'Friend' => array(
                'Profile',
            ),
        ));
debug($this->User->find('all', array('conditions' => array('User.id' => 1))));

array(
    (int) 0 => array(
        'User' => array(
            'id' => '1',
            'name' => 'user1'
        ),
        'Profile' => array(
            'id' => '1',
            'user_id' => '1'
        ),
        'Friend' => array(
            (int) 0 => array(
                'id' => '2',
                'name' => 'user2',
                'FriendsUser' => array(
                    'id' => '1',
                    'user_id' => '1',
                    'friend_id' => '2'
                ),
                'Profile' => array(
                    'id' => '2',
                    'user_id' => '2'
                )
            )
        )
    )
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T04:18:37.707

您的`Friend`模型没有`user_id`，这就是`User`模型无法联系的原因`Friend`。尝试以下方法：

```
public function index( $username )
{   
    $this->User->Behaviors->attach('Containable');
    $friends = $this->User->find('first', 
        array(
            'conditions'=>array(
               'User.username'=>$username
            ),
            'contain'=>array(
                'Profile',
                'Friend'=>array(
                    'conditions'=>array(
                        'Friend.status'=>1
                    )
                )
            )
        )
    );

    $this->set('friends', $friends);
} 
```

# playframework-2.0 - 播放 2 个不同的视图包

> ID：10463319
> 
> 赞同：7
> 
> 时间：2012-05-05T15:33:16.470
> 
> 标签：playframework-2.0

我正在尝试将我的视图从默认视图包中移出到 mynewpackage.view.xyz 中。这不是控制器的问题。

似乎它们根本没有编译。

玩 2.0 文档说：

> ... 请注意，在 Play 2.0 中，控制器、模型和视图包名称约定现在就是这样，并且可以根据需要进行更改（例如在所有内容前加上 com.yourcompany）。...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T23:53:05.330

1.  创建新包`/app`让我们称之为`com.mycompany.views`
2.  在其中创建新视图：`myView.scala.html`
3.  在行动中返回它：`return ok(com.mycompany.views.html.myView.render());`

如您所见`html`，包名称和视图名称之间有重要部分，要在不重新加载页面的情况下编译视图，请使用命令开始播放：`play ~run`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T23:39:36.290

1）克隆视图到你的新包。2）清理和编译。3) 更改导入引用

# asp.net - Application_LogRequest 事件未触发

> ID：10463320
> 
> 赞同：0
> 
> 时间：2012-05-05T15:33:35.503
> 
> 标签：asp.net, asp.net-4.0

我有一个 global.asax。我添加了对 LogRequest 和 BeginRequest 的订阅

```
void Application_LogRequest(object sender, EventArgs e)
...
void Application_BeginRequest(object sender, EventArgs e)
.... 
```

首先，我不确定 LogRequest 的真正目的是什么以及何时触发。我还做了一个测试应用程序，我在上面的 LogRequest 和 BeginRequest 中有断点。不知何故，永远不会触发 LogRequest - 它永远不会进入断点。并且 BeinRequest 会随着每个请求正确触发。我在网上做了一些研究，但是关于 LogRequest 事件的信息很少，除了它应该随着每个请求触发......但在我的情况下它不是。

我从 VS 运行，但我的网站已部署到 IIS。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:12:44.613

根据[MSDN 库](http://msdn.microsoft.com/en-us/library/bb470252.aspx)：

> 仅当应用程序在 IIS 7.0 和 .NET Framework 3.0 或更高版本中以集成模式运行时，才支持 MapRequestHandler、LogRequest 和 PostLogRequest 事件。

因此，您可能正在经典模式下运行 IIS 6.0 或 IIS 7.0（或更高版本）。

# java - 在java中获取环境变量的值？

> ID：10463323
> 
> 赞同：0
> 
> 时间：2012-05-05T15:33:55.037
> 
> 标签：java, jsp, operating-system

我在 Windows 中设置了一个名为“sample”的环境变量。我可以使用以下代码获取此环境变量的值吗？

```
System.getProperty("sample"); 
```

在 UAT 环境中，我有 LINUX 操作系统。我可以在 LINUX 操作系统中设置相同的环境变量并使用 检索相同的环境变量`System.getProperty("sample")`吗？

我的意思是`System.getProperty("sample");`检索是否与操作系统无关？

另外，我想在 JSP 中获取环境变量的值。我知道不建议在 jsp 中保留逻辑，但我仍然需要使用它。我可以`System.getProperty("sample");`在jsp中使用吗？请帮我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-05T15:35:20.240

用于[`System.getenv()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getenv%28java.lang.String%29)检索环境变量，而不是[`System.getProperty()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperty%28java.lang.String%29). 后者用于（顾名思义）系统属性。

有什么不同？[Java 系统属性和环境变量](https://stackoverflow.com/questions/7054972/java-system-properties-and-environment-variables)

* * *

如果您需要访问 JSP 中的环境变量，那么您做错了什么。至少，使用 servlet。更多阅读：[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:35:13.810

是的，这与操作系统无关，您可以在 JSP 中使用它。

# ruby-on-rails-3 - 从 rake 任务向其他站点发出请求

> ID：10463326
> 
> 赞同：0
> 
> 时间：2012-05-05T15:34:03.930
> 
> 标签：ruby-on-rails-3, request, rake-task

我正在尝试使用示例对象自动化我的数据库填充，所以我使用 rake 任务。我想使用来自其他网站页面的一些数据。我创建了带有 url 列表的 txt 文件，从中应该读取该信息并遇到问题：我不知道如何在 rake 任务之外发出请求。我需要得到响应，按照 RSPEC 允许的方式提取一些选择器。感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:52:49.963

对于自定义 rake 任务，您始终可以创建自己的插件。请参阅 rails 指南 -[插件部分](http://guides.rubyonrails.org/plugins.html)。在插件中，您可以使用 get 方法从外部 URL 获取数据。有关详细信息，请参阅 ActionDispatch::Integration::RequestHelpers 方法。您可以添加自己的提取逻辑并为数据库播种。

# java - Android 格式化日历以输出时间

> ID：10463328
> 
> 赞同：7
> 
> 时间：2012-05-05T15:34:07.557
> 
> 标签：java, android

我正在使用以下代码设置警报。我想输出这将是什么时间。我不知道我是否走错了路。如果我输出变量 cal 它有一长串信息。如何仅提取小时和分钟？

```
 Calendar cal = Calendar.getInstance();
    // add 5 minutes to the calendar object
    cal.add(Calendar.MINUTE, 464); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-05T20:50:41.290

您可以使用 m0skit0 所说的静态常量，或者使用`SimpleDateFormat`. 下面是一些代码来显示这两种方法：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.MINUTE, 464);
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
System.out.println(sdf.format(cal.getTime()));
System.out.println(cal.get(Calendar.HOUR)+":"+cal.get(Calendar.MINUTE)); 
```

输出：

```
05:31
5:31 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T15:37:17.830

在您的对象上使用[get()](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#get%28int%29)方法，并为所需字段（小时、分钟等）使用静态常量。`Calendar``Calendar`

例如：

```
cal.get(Calendar.Minute); 
```

# php - 如何使用fancybox在iframe中调用外部php

> ID：10463331
> 
> 赞同：1
> 
> 时间：2012-05-05T15:34:22.290
> 
> 标签：php, fancybox

我无法使用调用外部 php 脚本文件的 fancybox 打开 iframe，这是我用来调用的锚标记 `<a id="iframe" href="gallery.php" >Gallery</a>`

```
jQuery(document).ready(function() {
      jQuery("#iframe" ).fancybox({
        'width'             : '75%',
        'height'            : 885,
        'autoScale'         : false,
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'type'              : 'iframe',
        'href'              : "gallery.php"
    }); 
```

});

gallery.php 文件位于同一文件夹 **中，调用页面也在 php 上**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:48:24.850

请仔细阅读此列表并确保您已完成每一项：

*   包含 jquery 库并确保它正确包含它（这可以通过使用“firebug”和“net”选项卡来完成）。
*   包含了 fancybox css 和 javascript 库，再次检查它们是否都已成功包含。
*   尝试使用确切的路径，例如[http://www.test.com/gallery.php](http://www.test.com/gallery.php)

这是您的 html 文件应该是什么样子的示例：

```
<script type="text/javascript" src="http://www.test.com/jquery-1.4.3.min.js"></script>    
<script type="text/javascript" src="http://www.test.com/jquery.fancybox-1.3.4.pack.js"></script>
<link rel="stylesheet" type="text/css" href="http://www.test.com/jquery.fancybox-1.3.4.css" media="screen" />

<script type="text/javascript">
    $(document).ready(function() {
        $("#iframe" ).fancybox({
            'width'             : '75%',
            'height'            : 885,
            'autoScale'         : false,
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'type'              : 'iframe',
            'href'              : "http://www.test.com/gallery.php"
        });
    });
</script>

<a id="iframe">Gallery</a> 
```

如果您完成这些步骤并确保您的 html 看起来与我所说的完全一样，那么您应该没有问题。

# android - android gps参数传递给Web应用程序

> ID：10463337
> 
> 赞同：0
> 
> 时间：2012-05-05T15:35:12.563
> 
> 标签：android, jsf

我开发了 androide 应用程序，它产生了一些双重价值。

我的问题是我必须将此类值从 androide 应用程序传递给任何其他基于 jsf 的 web 应用程序。

我正在尝试以下代码。

```
 import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

public class TestHttpClient {
        public static void main(String[] args) {
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(
            "https://www.google.com/accounts/ClientLogin");

    try {

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("Email", "youremail"));
        nameValuePairs
                .add(new BasicNameValuePair("Passwd", "yourpassword"));
        nameValuePairs.add(new BasicNameValuePair("accountType", "GOOGLE"));
        nameValuePairs.add(new BasicNameValuePair("source",
                "Google-cURL-Example"));
        nameValuePairs.add(new BasicNameValuePair("service", "ac2dm"));

        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = client.execute(post);
        BufferedReader rd = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent()));

        String line = "";
        while ((line = rd.readLine()) != null) {
            System.out.println(line);
            if (line.startsWith("Auth=")) {
                String key = line.substring(5);
                // Do something with the key
            }

        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    }
} 
```

我如何从 jsf 编码中检索这样的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:44:00.220

你应该有一些网络服务来获取服务器中的这些值，并且在 android 中使用 HTTP 通信使用`HTTPclient`do google，因为`HttpClient`你会得到很多例子。

# ruby-on-rails - 为什么 simple_form hidden_ field_tag 值不会被保存 rails

> ID：10463340
> 
> 赞同：0
> 
> 时间：2012-05-05T15:35:15.347
> 
> 标签：ruby-on-rails, database, simple-form

我试图用rails将外键保存到数据库中为什么数据库列在这个位置是空的，我该如何解决这个问题

```
<%= hidden_field_tag :list_id %>
...
<%= f.button :submit, :class => "btn-primary" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:43:51.857

尝试仅使用属性名称，不使用 id 后缀。

```
<%= hidden_field_tag :list %> 
```

更好的做法是使用[嵌套路由](http://guides.rubyonrails.org/routing.html#nested-resources)，假设您有一个属于**列表资源的****项目**资源，您的路由可能是这样的：

 **```
POST /lists/1/items 
```

它将为列表 id 1 创建一个新项目，您不必担心将列表 id 作为表单字段传递。

我建议您使用[Inherited Resources](https://github.com/josevalim/inherited_resources) gem 让它更容易。**

# jquery - jQuery：以像素为单位获取 DIV 的确切位置，而不是返回“自动”作为结果

> ID：10463345
> 
> 赞同：3
> 
> 时间：2012-05-05T15:35:59.753
> 
> 标签：jquery, position

假设我有 5 个`div`**高度和宽度**变化`float:left;`：

当我`.css("");`用来获取他们的位置（左右）时，

`"auto"`结果总是会结束。

有什么方法可以获取相对于容器（）以像素为单位 **的确切数字****（左和右**） ？**`position:absolute;`**

（*有可能`div`会在我使用时开始一个新行，`float:left;`并且它们的宽度和高度无法确定。*）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T15:41:13.977

jQuery 有两种位置方法，一种是相对于文档的，一种是相对于容器的。

[相对于容器（位置）](http://api.jquery.com/position/)。

[相对于文档（偏移量）](http://api.jquery.com/offset/)。

请注意，位置表示相对于偏移父项，因此您可能必须应用位置：相对于容器元素。

# testing - 测试发布到多个页面

> ID：10463348
> 
> 赞同：0
> 
> 时间：2012-05-05T15:36:05.400
> 
> 标签：testing, facebook-page

我们正在开发一个可以让人们发布到多个页面的系统（想想 Hootsuite）。

我们显然希望能够在发布之前对其进行测试，为此需要跨多个页面进行测试。在大多数情况下，消息会略有不同，但测试我们不知道的任何速率限制都会很有用。

我显然可以创建 X 个 Facebook 页面以用于测试目的，但是有什么方法可以创建“测试页面”，就像您可以创建测试帐户一样？我看到的文档中没有任何内容表明这一点，但想检查一下。

非常感谢，凯夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:43:03.267

您的测试帐户可以创建页面。这些应该随着测试帐户消失。

# c - c中的短函数-不明白出了什么问题

> ID：10463357
> 
> 赞同：0
> 
> 时间：2012-05-05T15:37:33.517
> 
> 标签：c

我正在编写一个函数，它只计算 DNA 的“互补”链，意思是用 G 代替 C，用 A 代替 T，等等。

这就是我写的：

```
#include <stdio.h>
#include <string.h> 
#define SIZE 70

int isLegitSequence(char sequence[]);
void getComplementaryStrand(char complementary[],char sequence[]);
int findSubSequence(char sequence[],char subsequence[]);
int findSubComplementary(char sequence[],char subcomplementary[]);
void cutSequence(char sequence[],char tocut[]);
void checkDNAList(char data[][SIZE],int rows,char sequence[]);

void main(){
    char dnaSequence[SIZE];
    char compDnaSequence[SIZE];

    printf("Enter a DNA Strand\n");
    gets(dnaSequence);
    printf("%d\n",isLegitSequence(dnaSequence));
    getComplementaryStrand(compDnaSequence,dnaSequence);
    puts(compDnaSequence);

}

int isLegitSequence(char sequence[]){
    int i=0;
    while (sequence[i]){
        if(sequence[i]=='A'||sequence[i]=='C'||sequence[i]=='G'||sequence[i]=='T');
        else return 0;
        i++;
    }
    return 1;
}

void getComplementaryStrand(char complementary[SIZE],char sequence[SIZE]){
    int j=strlen(sequence)-1,i;
    for(i=0;sequence[i];i++,j--){
        if(sequence[i]=='A') sequence[j]='T';
        else if(sequence[i]=='C') sequence[j]='G';
        else if(sequence[i]=='G') sequence[j]='C';
        else sequence[j]='A';
    }
    complementary[strlen(sequence)]='\0';
} 
```

但是，这是我运行程序时得到的：

```
Enter a DNA Strand
CGCTC
1
╠╠╠╠╠
Press any key to continue . . . 
```

这是我第一次使用函数，所以我不确定我在这里做错了什么。非常感谢帮助，但在我的理解范围内，即非常非常基本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:40:42.490

您需要在调用函数`getComplementaryStrand`的源文件的顶部添加函数的原型。

在源文件的顶部添加这一行：

```
void getComplementaryStrand(char complementary[SIZE],char sequence[SIZE]); 
```

**编辑**：与此同时，问题发生了变化……在编译错误之前。OP请提出一个新问题，而不是用一个新问题编辑您的原始问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:03:49.537

除了结束字符之外，您永远不会在*互补*字符串`getComplementaryStrand()`中填写任何内容。所以你会得到垃圾。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T16:06:39.490

仔细查看`getComplementaryStrand()`函数中的 for 循环。您是否将值分配给正确的字符串？我想不是。*

# javascript - 用不同的图像/按钮替换图像 - javascript

> ID：10463359
> 
> 赞同：2
> 
> 时间：2012-05-05T15:37:50.643
> 
> 标签：javascript, html

在一个函数中，我试图用另一个图像/按钮替换一个图像/按钮。

```
 <img src="images/14.gif" id="ImageButton1" onClick="showLoad()">    
        <img src="images/getld.png" id="ImageButton2" alt="Get Last Digits" style="display:none;" onClick="showLock()" />

            <script type="text/javascript" language="javascript"> 

            function swapButton(){
                    document.getElementById('ImageButton1').src = document.getElementById('ImageButton2').src;
                }
</script> 
```

但是我的问题是有两个相同的按钮，（按钮2）更换时！（一个在页面顶部，一个在它应该在的地方）。我想知道是否有办法摆脱顶部的额外按钮，或者在 javascript 函数中创建按钮元素？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:06:48.860

我建议类似于以下内容：

```
function swapImageSrc(elem, nextElemId) {
    if (!elem) {
        return false;
    }
    if (!nextElemId || !document.getElementById(nextElemId)) {
        var id = elem.id.replace(/\d+/, ''),
            nextNum = parseInt(elem.id.match(/\d+/), 10) + 1,
            next = document.getElementById(id + nextNum).src;
    }
    else {
        var next = document.getElementById(nextElemId).src;
    }

    elem.src = next;
}

var images = document.getElementsByTagName('img');

for (var i = 0, len = images.length; i < len; i++) {
    images[i].onclick = function() {
        swapImageSrc(this,imgButton2);
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3UVKc/1/)。

* * *

**编辑**补充说，虽然可以切换`src`图像的属性，但似乎没有必要，因为这两个图像都存在于 DOM 中。另一种方法是简单地隐藏单击的图像并显示下一个：

```
function swapImageSrc(elem, nextElemId) {
    if (!elem) {
        return false;
    }
    if (!nextElemId || !document.getElementById(nextElemId)) {
        var id = elem.id.replace(/\d+/, ''),
            nextNum = parseInt(elem.id.match(/\d+/), 10) + 1,
            next = document.getElementById(id + nextNum);
    }
    else {
        var next = document.getElementById(nextElemId);
    }
    if (!next){
        return false;
    }
    elem.style.display = 'none';
    next.style.display = 'inline-block';
}

var images = document.getElementsByTagName('img');

for (var i = 0, len = images.length; i < len; i++) {
    images[i].onclick = function() {
        swapImageSrc(this,imgButton2);
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3UVKc/2/)。

* * *

**编辑**以提供另一种方法，将元素移动`next`到与单击的图像元素相同的位置：

```
function swapImageSrc(elem, nextElemId) {
    if (!elem) {
        return false;
    }
    if (!nextElemId || !document.getElementById(nextElemId)) {
        var id = elem.id.replace(/\d+/, ''),
            nextNum = parseInt(elem.id.match(/\d+/), 10) + 1,
            next = document.getElementById(id + nextNum);
    }
    else {
        var next = document.getElementById(nextElemId);
    }
    if (!next){
        return false;
    }
    elem.parentNode.insertBefore(next,elem.nextSibling);
    elem.style.display = 'none';
    next.style.display = 'inline-block';
}

var images = document.getElementsByTagName('img');

for (var i = 0, len = images.length; i < len; i++) {
    images[i].onclick = function() {
        swapImageSrc(this,imgButton2);
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3UVKc/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:09:04.483

您可以隐藏第一个按钮，不仅可以更改图像源。下面的代码显示了一种方法。

```
<img src="images/14.gif" id="ImageButton1" onClick="swapButtons(false)" style="visibility: visible;" />     
<img src="images/getld.png" id="ImageButton2" alt="Get Last Digits" style="visibility: hidden;" onClick="swapButtons(true)" /> 

<script type="text/javascript" language="javascript">  
    function swapButtons(show1) { 
        document.getElementById('ImageButton1').style.visibility = show1 ? 'visible' : 'hidden';
        document.getElementById('ImageButton2').style.visibility = show1 ? 'hidden' : 'visible';
    } 
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:49:16.180

您可以使用删除javascript中的元素

```
var el = document.getElementById('id');
var remElement = (el.parentNode).removeChild(el); 
```

# django - Uploadify 3.1 尝试上传到 Amazon S3 (SignatureDoesNotMatch)

> ID：10463360
> 
> 赞同：5
> 
> 时间：2012-05-05T15:37:52.717
> 
> 标签：django, amazon-s3, uploadify, signature, http-status-code-403

这是一些背景
[http://www.uploadify.com/documentation/](http://www.uploadify.com/documentation/)
[http://aws.amazon.com/articles/1434/](http://aws.amazon.com/articles/1434/)

3 天以来，我一直在努力将 Uploadify 上传到 Amazon S3。这是我的第一次折磨（HTTP 400 错误 - MaxPostPreDataLengthExceeded） Uploadify 3.1

我最近通过在uploadify调用中意识到我需要这个来修复它

"fileObjName": "文件",

但是现在出现403错误。

SignatureDoesNotMatch 我们计算的请求签名与您提供的签名不匹配。检查您的密钥和签名方法。

这个 403 错误是我存在的祸根。从周围搜索来看，我似乎弄乱了我的政策文件中的条件。这是事实

在html页面上：

```
<p>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#file').uploadify(
            {
                "formData": {"AWSAccessKeyId": "AKIAJOVJ2J3JX5Z6AIKA", "bucket": "my-stupid-bucket", "acl": "private", "key": "uploads/${filename}",
                "signature": "2I0HPQ2SoZOmhAUhYEb4nANFSCQ%253D",
                "policy": "eyJleHBpcmF0aW9uIjogIjIwMTItMDUtMDRUMjE6Mzk6MDJaIiwgImNvbmRpdGlvbnMiOiBbeyJidWNrZXQiOiAicmVrZWVwcy1yZWNlaXB0LXVzLTEiIH0sIFsic3RhcnRzLXdpdGgiLCAiJFVwbG9hZCIsICJTdWJtaXQgUXVlcnkiXSwgeyJhY2wiOiAicHJpdmF0ZSIgfSwgWyJzdGFydHMtd2l0aCIsICIka2V5IiwgInVwbG9hZHMvJHtmaWxlbmFtZX0iXSwgWyJzdGFydHMtd2l0aCIsICIkRmlsZW5hbWUiLCAiIl0sIFsic3RhcnRzLXdpdGgiLCAiJENvbnRlbnQtVHlwZSIsICIiXV19"},
                "fileObjName": "file",
                "uploader": "http://my-stupid-bucket.amazonaws.com",
                "swf": "/static/uploadify/uploadify.swf"
            }
        );
    });
    </script>

    <div id="file" class="uploadify" style="height: 30px; width: 120px; ">
    <object id="SWFUpload_0" type="application/x-shockwave-flash" data="/static/uploadify/uploadify.swf?preventswfcaching=1336228509904" width="120" height="30" class="swfupload" style="position: absolute; z-index: 1; "><param name="wmode" value="transparent"><param name="movie" value="/static/uploadify/uploadify.swf?preventswfcaching=1336228509904"><param name="quality" value="high"><param name="menu" value="false"><param name="allowScriptAccess" value="always"><param name="flashvars" value="movieName=SWFUpload_0&amp;uploadURL=http%3A%2F%2Fmy-stupid-bucket.amazonaws.com&amp;useQueryString=false&amp;requeueOnError=false&amp;httpSuccess=&amp;assumeSuccessTimeout=30&amp;params=AWSAccessKeyId%3DAKIAJOVJ2J3JX5Z6AIKA%26amp%3Bbucket%3Dmy-stupid-bucket%26amp%3Bacl%3Dprivate%26amp%3Bkey%3Duploads%252F%2524%257Bfilename%257D%26amp%3Bsignature%3D2I0HPQ2SoZOmhAUhYEb4nANFSCQ%2525253D%26amp%3Bpolicy%3DeyJleHBpcmF0aW9uIjogIjIwMTItMDUtMDRUMjE6Mzk6MDJaIiwgImNvbmRpdGlvbnMiOiBbeyJidWNrZXQiOiAicmVrZWVwcy1yZWNlaXB0LXVzLTEiIH0sIFsic3RhcnRzLXdpdGgiLCAiJFVwbG9hZCIsICJTdWJtaXQgUXVlcnkiXSwgeyJhY2wiOiAicHJpdmF0ZSIgfSwgWyJzdGFydHMtd2l0aCIsICIka2V5IiwgInVwbG9hZHMvJHtmaWxlbmFtZX0iXSwgWyJzdGFydHMtd2l0aCIsICIkRmlsZW5hbWUiLCAiIl0sIFsic3RhcnRzLXdpdGgiLCAiJENvbnRlbnQtVHlwZSIsICIiXV19&amp;filePostName=file&amp;fileTypes=*.*&amp;fileTypesDescription=All%20Files&amp;fileSizeLimit=0&amp;fileUploadLimit=0&amp;fileQueueLimit=999&amp;debugEnabled=false&amp;buttonImageURL=%2Fscratchpad%2F&amp;buttonWidth=120&amp;buttonHeight=30&amp;buttonText=&amp;buttonTextTopPadding=0&amp;buttonTextLeftPadding=0&amp;buttonTextStyle=color%3A%20%23000000%3B%20font-size%3A%2016pt%3B&amp;buttonAction=-110&amp;buttonDisabled=false&amp;buttonCursor=-2"></object>

    <div id="file-button" class="uploadify-button " style="height: 30px; line-height: 30px; width: 120px; ">
        <span class="uploadify-button-text">SELECT FILES</span>
    </div>
    </div>

    <div id="file-queue" class="uploadify-queue"></div>
</p> 
```

政策文件：

```
{"expiration": "2012-05-04T21:39:03Z",
    "conditions": [
        {"bucket": "my-stupid-bucket" },
        ["starts-with", "$Upload", ""],
        {"acl": "private" },
        ["starts-with", "$key", "uploads/${filename}"]
        ["starts-with", "$Filename", ""],
        ["starts-with", "$Content-Type", ""]
    ]
} 
```

请求：

```
POST / HTTP/1.1
Host: my-stupid-bucket.s3.amazonaws.com
User-Agent: Adobe Flash Player 11
Content-Length: 44914
x-flash-version: 11,2,202,235
Accept-Types: text/*
Content-Type: multipart/form-data; boundary=----------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Connection: close

------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Content-Disposition: form-data; name="Filename"

yWxh1.jpg
------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Content-Disposition: form-data; name="acl"

private
------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Content-Disposition: form-data; name="signature"

OZBMi4oaUAz2p67wZYWo87qFVaQ%253D
------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Content-Disposition: form-data; name="AWSAccessKeyId"

AKIAJOVJ2J3JX5Z6AIKA
------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Content-Disposition: form-data; name="key"

uploads/${filename}
------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Content-Disposition: form-data; name="bucket"

my-stupid-bucket
------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Content-Disposition: form-data; name="policy"

eyJleHBpcmF0aW9uIjogIjIwMTItMDUtMDRUMjI6MTc6MDZaIiwgImNvbmRpdGlvbnMiOiBbeyJidWNrZXQiOiAicmVrZWVwcy1yZWNlaXB0LXVzLTEiIH0sIFsic3RhcnRzLXdpdGgiLCAiJFVwbG9hZCIsICIiXSwgeyJhY2wiOiAicHJpdmF0ZSIgfSwgWyJzdGFydHMtd2l0aCIsICIka2V5IiwgInVwbG9hZHMvJHtmaWxlbmFtZX0iXSwgWyJzdGFydHMtd2l0aCIsICIkRmlsZW5hbWUiLCAiIl0sIFsic3RhcnRzLXdpdGgiLCAiJENvbnRlbnQtVHlwZSIsICIiXV19
------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Content-Disposition: form-data; name="file"; filename="yWxh1.jpg"
Content-Type: application/octet-stream

blah blah blah  <--- content stream stuff

------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0
Content-Disposition: form-data; name="Upload"

Submit Query
------------KM7gL6cH2ei4ae0KM7Ij5KM7ae0ae0-- 
```

错误：

```
<Error>
    <Code>SignatureDoesNotMatch</Code>
    <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
    <StringToSignBytes>65 79 4a 6c 65 48 42 70 63 6d 46 30 61 57 39 75 49 6a 6f 67 49 6a 49 77 4d 54 49 74 4d 44 55 74 4d 44 52 55 4d 6a 49 36 4d 54 63 36 4d 44 5a 61 49 69 77 67 49 6d 4e 76 62 6d 52 70 64 47 6c 76 62 6e 4d 69 4f 69 42 62 65 79 4a 69 64 57 4e 72 5a 58 51 69 4f 69 41 69 63 6d 56 72 5a 57 56 77 63 79 31 79 5a 57 4e 6c 61 58 42 30 4c 58 56 7a 4c 54 45 69 49 48 30 73 49 46 73 69 63 33 52 68 63 6e 52 7a 4c 58 64 70 64 47 67 69 4c 43 41 69 4a 46 56 77 62 47 39 68 5a 43 49 73 49 43 49 69 58 53 77 67 65 79 4a 68 59 32 77 69 4f 69 41 69 63 48 4a 70 64 6d 46 30 5a 53 49 67 66 53 77 67 57 79 4a 7a 64 47 46 79 64 48 4d 74 64 32 6c 30 61 43 49 73 49 43 49 6b 61 32 56 35 49 69 77 67 49 6e 56 77 62 47 39 68 5a 48 4d 76 4a 48 74 6d 61 57 78 6c 62 6d 46 74 5a 58 30 69 58 53 77 67 57 79 4a 7a 64 47 46 79 64 48 4d 74 64 32 6c 30 61 43 49 73 49 43 49 6b 52 6d 6c 73 5a 57 35 68 62 57 55 69 4c 43 41 69 49 6c 30 73 49 46 73 69 63 33 52 68 63 6e 52 7a 4c 58 64 70 64 47 67 69 4c 43 41 69 4a 45 4e 76 62 6e 52 6c 62 6e 51 74 56 48 6c 77 5a 53 49 73 49 43 49 69 58 56 31 39</StringToSignBytes>
    <RequestId>5C360649B9B97C0C</RequestId>
    <HostId>zT+9IaqTw/RAWwJH8KwCmGJZ6Wydq1/hg0v55TL8acHPX5ZMQvU2T4mbTF9wHD15</HostId>
    <SignatureProvided>OZBMi4oaUAz2p67wZYWo87qFVaQ%253D</SignatureProvided>
    <StringToSign>eyJleHBpcmF0aW9uIjogIjIwMTItMDUtMDRUMjI6MTc6MDZaIiwgImNvbmRpdGlvbnMiOiBbeyJidWNrZXQiOiAicmVrZWVwcy1yZWNlaXB0LXVzLTEiIH0sIFsic3RhcnRzLXdpdGgiLCAiJFVwbG9hZCIsICIiXSwgeyJhY2wiOiAicHJpdmF0ZSIgfSwgWyJzdGFydHMtd2l0aCIsICIka2V5IiwgInVwbG9hZHMvJHtmaWxlbmFtZX0iXSwgWyJzdGFydHMtd2l0aCIsICIkRmlsZW5hbWUiLCAiIl0sIFsic3RhcnRzLXdpdGgiLCAiJENvbnRlbnQtVHlwZSIsICIiXV19</StringToSign>
    <AWSAccessKeyId>AKIAJOVJ2J3JX5Z6AIKA</AWSAccessKeyId>
</Error> 
```

在这一点上，它一定是我没有看到的东西。互联网世界里有人可以把我从软垫房间里救出来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:46:07.663

尝试删除

```
["starts-with", "$Upload", ""],
["starts-with", "$Content-Type", ""] 
```

从政策上。表单数据必须与策略匹配。（Flash 创建的 $Filename 除外）

我已经通过uploadify 3.1成功将文件上传到S3

这是我的代码：

```
 jQuery('#file_upload').uploadify({
            'formData'      : {
            'AWSAccessKeyId': '<?= AWS_ACCESS_KEY ?>',
            "acl": "private", 
            "key": "<?= $blog ?>/${filename}",
            "signature": "<?= $signature ?>",
            "policy": "<?= $policy ?>",
            "success_action_status": "201"
        },
        "fileObjName":"file",
        'swf'      : '/js/uploadify/uploadify.swf',
        'scriptAccess' : 'always',
        'uploader' : 'http://s3.amazonaws.com/<?= AWS_S3_BUCKET ?>',
        'buttonText' : 'Browse',
        'width' : 120,
        'height': 30,
        'multi' : false,
        'onUploadError' : function(file, errorCode, errorMsg, errorString) {
            alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
        },
... 
```

这是我的政策：

```
 return base64_encode(
        '{'.
            '"expiration": "'.gmdate('Y-m-d\TH:i:s\Z', time()+60*60*24+intval(@$data['timestamp'])).'",'.
            '"conditions": '.
            '['.
                '{"bucket": "'.$data['bucket'].'"},'.
                '{"acl": "private"},'.
                '{"success_action_status": "201"},'.
                '["starts-with","$key",""],'.
                '["starts-with","$Filename",""],'.
                '["content-length-range",0,5242880]'.
            ']'.
        '}'
    ); 
```

希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:43:33.680

z33 的回答也对我有用，但我想保留 Content-Type。这是我的解决方法。在“formData”块中，添加：

```
"content-type" : "video/mp4" 
```

在策略中，还添加：

```
'{"content-type": "video/mp4"} 
```

我注意到两者必须匹配，否则上传将失败。您可以为不同文件类型的内容类型选择器添加一个类，但我没有解决这个问题。

这是我的示例：formData

```
'formData'  : {
               "AWSAccessKeyId"         : "<?= S3::$AWS_ACCESS_KEY ?>",
               "key"                : "${filename}",
               "acl"                : "public-read",
               "content-type"                       : "video/mp4",
               "policy"                             : "<?= $policy ?>",
               "signature"              : "<?= $signature ?>",
               "success_action_status"      : "201"
              } 
```

政策：

```
return base64_encode(
        '{'.
            '"expiration": "'.gmdate('Y-m-d\TH:i:s\Z', time()+60*60*24+intval(@$data['timestamp'])).'",'.
            '"conditions": '.
            '['.
                '{"bucket": "'.$data['bucket'].'"},'.
                '["starts-with", "$key", ""],'.
                '{"acl": "public-read"},'.
                '{"success_action_status": "201"},'.
                '["starts-with","$Filename",""],'.
                '{"content-type": "video/mp4"},'.
                '["content-length-range",0,5000242880]'.
            ']'.
        '}'
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T23:16:20.953

正在研究我自己的（现已解决的问题），并通过[http://www.uploadify.com/forum/#/discussion/1416/uploading-to-amazon-s3/p1找到了这个问题](http://www.uploadify.com/forum/#/discussion/1416/uploading-to-amazon-s3/p1)

正是这个线程让我在一年多前开始运行，但我最近开始遇到 Chrome 21/win 的问题。

您的代码通过[http://jsbeautifier.org/运行](http://jsbeautifier.org/)

```
$(document).ready(function () {
    $('#file').uploadify({
        "formData": {
            "AWSAccessKeyId": "AKIAJOVJ2J3JX5Z6AIKA",
            "bucket": "my-stupid-bucket",
            "acl": "private",
            "key": "uploads/${filename}",
            "signature": "2I0HPQ2SoZOmhAUhYEb4nANFSCQ%253D",
            "policy": "[... snip ...]"
        },
        "fileObjName": "file",
        "uploader": "http://my-stupid-bucket.amazonaws.com",
        "swf": "/static/uploadify/uploadify.swf"
    });
}); 
```

我刚刚升级到 uploadify 3.1 并遇到了类似的无效签名问题。答案似乎是该线程中的代码已经过时了。

IIRC，该线程声明您应该对签名/等进行编码URIComponent。似乎不再是这种情况了。我的 2.x 代码在不编码签名和策略的情况下使用 3.1。猜测这是对已解决的上传/闪存问题的一些解决方法。

此外，您的签名似乎是双 URL 编码的。

TL;博士;
不要使用 uploadify 3.1（可能还有更早的版本）对您的表单数据进行编码。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-05T16:03:37.130

为什么在uploadify 和amazon 之间没有服务器端解析器？这样一来，您就向客户端浏览器提供了太多它实际上不应该拥有的信息。

# css - css相对位置

> ID：10463362
> 
> 赞同：-1
> 
> 时间：2012-05-05T15:37:55.573
> 
> 标签：css

如何设置 div 30*n 的顶部位置。N 是外部 div 内的 div 数（以及所有没有 javascript 的）。举个例子。

```
#div1
{
    top:#div1>numberOf(div)*30+"px";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:42:29.707

您不能在 CSS 中执行任何计算。最接近您想要的是使用 PHP 来编辑内联 CSS。

例如：

```
<?php $answer = result of calculation ?>
<div id="div1" style="top: <?php echo $answer; ?px">...</div> 
```

无论如何，如果不使用javascript，我想不出答案。

# php - 让 jQuery 发布不止一个查询

> ID：10463365
> 
> 赞同：1
> 
> 时间：2012-05-05T15:38:04.147
> 
> 标签：php, jquery

我有一个 jQuery 代码将一个发布`ID`到另一个*php*文件

```
<script type="text/javascript">

$(function() {
   //More Button
   $('.more').live("click",function() {
      var ID = $(this).attr("id");

      if(ID){

         $("#more"+ID).html('<img src="moreajax.gif" />');

         $.ajax({
            type: "POST",
            url: "ajax_more.php",
            data: "lastmsg="+ ID, 
            cache: false,
            success: function(html){
                $("ol#updates").append(html);
                $("#more"+ID).remove();
            }
         });

   }else{
      $(".morebox").html('The End');   
   }    
   return false; 
   });
});

</script> 
```

我想知道的是如何让它与“最后一次按摩 ID”一起发布另一个查询。我有一个 mysql 查询，它会输出一个值（pid）我怎么能把它和“最后一次按摩 id”一起发布。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:46:08.660

```
$.ajax({
            type: "POST",
            url: "ajax_more.php",
            data: "lastmsg="+ ID + "&pid=" + your_pid, 
            cache: false,
            success: function(html){
                $("ol#updates").append(html);
                $("#more"+ID).remove();
            }
         }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:05:22.817

这是我的解决方案：

```
var salji = {
  rate: score,
  image_id: img_id
};

$.ajax({
    type: "POST",
    url: "widgets/rate.php",
    data: salji,
    success: function(msg){
        alert('wow');
    }
}); 
```

# javascript - jQuery TypeError“无法调用未定义的方法'toLowerCase'”（函数uaMatch）

> ID：10463366
> 
> 赞同：1
> 
> 时间：2012-05-05T15:38:05.587
> 
> 标签：javascript, jquery, subdomain

我对 jQuery 有一个非常奇怪的问题：

我有一个网站（带有 Flask）：`http://localhost:5000/`，它运行良好。现在我已经设置了一个子域，编辑了我的`/etc/hosts`（我添加了 `127.0.0.1 fonts.localhost`），子域使用完全相同的 html（甚至更少）但是当我加载站点时 jQuery 给了我这个错误： `Uncaught TypeError: Cannot call method 'toLowerCase' of undefined`. 它来自未压缩的[jQuery 1.7.2](http://code.jquery.com/jquery-1.7.2.js)文件`uaMatch`中的函数。传递给函数的参数必须是未定义的，uaMatch 只被调用一次（第 925 行），在第 75 行分配了。是（根据调试控制台）。`884``userAgent``userAgent``userAgent = navigator.userAgent``navigator.userAgent``"Mozilla/5.0 (X11; Linux i686) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19"`

所以我真的不明白为什么我会收到这个错误，它只发生在子域上。的重要 html `fonts.localhost:5000`。

```
<!doctype html>
<title>test</title>
<meta charset=utf-8>
<link rel=stylesheet type=text/css href="http://localhost:5000/static/style.css">
<link rel=stylesheet type=text/css href="http://localhost:5000/static/bootstrap.min.css">
<script type=text/javascript src="http://localhost:5000/static/jquery-1.7.2.min.js"></script>
<body>
    …
</body> 
```

**编辑**：它也不适用于未压缩的 jQuery（我还包括在 google 托管的 jQuery 文件进行测试，同样的错误）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:41:05.147

哦，亲爱的，我终于找到了错误，似乎 jQuery 无法处理没有 TLD 的域，我将 hosts 条目从更改`127.0.0.1 fonts.localhost`为`127.0.0.1 fonts.localhost.localdomain`，在此更改 jQuery 工作之后。是否值得一个错误报告？

# java - 按下按钮/单击图像时的 JavaApplet

> ID：10463370
> 
> 赞同：0
> 
> 时间：2012-05-05T15:38:42.453
> 
> 标签：java, javascript, jquery, html

按下按钮或单击网页上的图像时是否可以运行 JavaApplet？

也许你们可以分享任何例子，相关的html/jscript/jquery？

此时我的代码有什么问题？

```
<html> 
    <script> 
        function openApplet(){ 
        var attributes = {codebase:'.', 
        code:'d.Applet', 
        archive:'Applet.jar', 
        WIDTH=500, HEIGHT=300} ; 
    } 
    </script> 
    <body> 
        <applet id="myapplet" 
         CODEBASE="." 
         ARCHIVE="Applet.jar" 
         CODE="d.Applet" 
         WIDTH=500 HEIGHT=300 
         style="visibility:hidden;" 
        > 
        </applet> 
        <input value="Applet_on_Click" onclick="openApplet()" type="button"> 
    </body> 
</html> 
```

我只是在寻找非常简单的解决方案。单击图像，小程序出现，单击不同的图像，将显示另一个小程序。或者当我们按下按钮时这些事情也会发生？

**更新**

谢谢**慢毒**提供的信息！

但我错过了一些东西。

现在有我的原始代码：

[http://www.text-upload.com/read.php?id=360320&c=7544773](http://www.text-upload.com/read.php?id=360320&c=7544773)

这仅适用于纯 html。但是当你点击按钮时没有任何动作。如果我禁用此行 "style="visibility:hidden" ，则无需单击即可显示小程序。

我不想在单击按钮后显示小程序。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:44:55.493

您应该将`applet`标签添加到`onclick`处理程序中的文档。

```
var applet = document.createElement("applet");
// fill in various attributes for applet
// ...

// "install" the applet
document.getElementById("appletContainer").appendChild(applet); 
```

# ios - 将 UITableViewCell 恢复为正常编辑模式

> ID：10463374
> 
> 赞同：4
> 
> 时间：2012-05-05T15:39:14.613
> 
> 标签：ios, user-interface, uitableview, editing

当用户决定删除 UITableViewCell 时，我会出现第二个确认对话框。这是我的正常状态下的表格视图：

![普通的](../Images/e8b1ff2075492b3394817eda1abc3d88.png)

* * *

这是整个表格进入编辑模式的时候：

![普通编辑模式](../Images/08800b0b3b8fb17adc3a0dbc31930d2a.png)

* * *

现在，当用户点击左侧的红色减号之一时，单元格将进入删除确认模式：

![删除确认模式](../Images/62bb0aa63766a27b5db9db3ca7807fe2.png)

* * *

如果用户随后点击刚刚出现的删除按钮，则会出现此操作表：

![第二次确认](../Images/22c0489928cbc7e56a7e581af438cc32.png)

* * *

这就是问题出现的地方。如果用户确认他们要删除地图，一切都很好。但是如果按下取消按钮，动作表就会消失，但表格视图仍然是这样的：

![删除确认按钮不应再处于选中状态，并且应隐藏在视图中](../Images/1740f151affcdf0222274c1db3d44392.png)

问题是删除确认按钮不应再处于其选定状态，并且应该隐藏自身。正如你所看到的，它没有。我在文档中的搜索已经结束，没有结果。我不想这样做，`setEditing:NO`因为我希望表格保持正常的编辑状态。有任何想法吗？

编辑1：这是里面发生的事情`tableView:commitEditingStyle:forRowAtIndexPath:`

```
- (void)tableView:(UITableView*)tableView commitEditingStyle:
    (UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath*)indexPath {
    NSInteger finalIndex = [self getFinalIndexForIndexPath:indexPath];

    NSString* mapTitle = ((PreviewDataObject*)[[[SingletonDataController sharedSingleton]
        getImportedOrSavedMapPreviews:masterIdentifierString] 
        objectAtIndex:finalIndex]).titleString;

    UIActionSheetWithIndexPath* sheet = [[UIActionSheetWithIndexPath alloc] initWithTitle:
        [NSString stringWithFormat:@"Are you sure you want to delete the map '%@'?", 
        mapTitle] delegate:self cancelButtonTitle:@"Cancel" 
        destructiveButtonTitle:@"Delete Map" otherButtonTitles:nil];
    sheet.indexPath = indexPath;
    [sheet showFromTabBar:[AppDelegate appDelegate].tabBarController.tabBar];
    [sheet release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:25:40.373

在那之后，你也可以提出一个 AlertView 询问他们是否真的，真的，真的想要删除。

打开按钮然后按删除的两步过程应该是足够的确认。

在我看来，做你正在做的事情并不是标准做法，一旦你进入那个领域，你就会在框架中发现漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-09T19:49:25.613

我同意上述讨论，即需要点击删除 3 次是个坏主意。

但是，对于其他操作，可能有充分的理由重置该行。最简单的解决方案就是重新加载那一行。

斯威夫特 2.2：

```
tableView.reloadRowsAtIndexPaths([indexPath], withRowAnimation: .None) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:50:16.440

试试这个，告诉我它是否适合你。

```
 -(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
  {
      if (editingStyle == UITableViewCellEditingStyleDelete)
       {
           // Delete the row from the data source.

           [arr removeObjectAtIndex:indexPath.row];

           [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
         }
        else if (editingStyle == UITableViewCellEditingStyleInsert)
        {
          // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
        }   
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-27T09:34:15.980

只需退出编辑模式（Swift）：

```
tableView.setEditing(false, animated: true) 
```

# javascript - Momentjs 和倒数计时器

> ID：10463376
> 
> 赞同：9
> 
> 时间：2012-05-05T15:39:33.487
> 
> 标签：javascript, jquery, momentjs

我发现 Momentjs 库非常酷，但是我发现文档对于如何完成一些简单的任务不是很清楚。我正在尝试构建一个倒数计时器，我猜我应该使用 duration 对象，但我不太明白如何（可能是因为英语不是我的第一语言）。无论如何，这就是我想要的：

```
var time = 7200;
var duration = moment.duration('seconds',time);

setInterval(function(){
  //show how many hours, minutes and secods are left
  $('.countdown').text(duration.format('h:mm:ss')); 
  //this doesn't work because there's no method format for the duration object.
},1000); 
```

所以它应该每秒显示：

02:00:00

01:59:59

01:59:58

01:59:57

...

00:00:00

我将如何使用 Momentjs 库实现此结果？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T16:27:03.663

`duration`对象代表一个静态周期，它不会随着时间的流逝而增加/减少。所以如果你要减少它，你必须自己做，例如创建一种秒计数器或`duration`每次重新创建对象。这是第二个选项的代码：

```
var time = 7200;
var duration = moment.duration(time * 1000, 'milliseconds');
var interval = 1000;

setInterval(function(){
  duration = moment.duration(duration.asMilliseconds() - interval, 'milliseconds');
  //show how many hours, minutes and seconds are left
  $('.countdown').text(moment(duration.asMilliseconds()).format('h:mm:ss'));
}, interval); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:09:31.400

我也不太了解 Momentjs，但我认为您正在寻找这样的东西：

```
var time = 7200;
var duration = moment.duration('seconds',time);

setInterval(function(){
    var countdown = duration.milliseconds();
    $('.countdown').text(moment(countdown).format('h:mm:ss')); 
},1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-04T01:10:21.757

[https://github.com/jsmreese/moment-duration-format](https://github.com/jsmreese/moment-duration-format) 它是 Moment.js JavaScript 日期库的插件，用于向 Moment 持续时间添加全面的格式

```
<script type="application/javascript" src="/js/moment.js"></script>
<script type="application/javascript" src="/js/moment-duration-format.js"></script>

<script>

function startTimer(){

var duration = moment.duration({
    'hour': 2,
    'minutes': 0,
    'seconds': 0 
});

var interval = 1;

var timerID = -1; //hold the id

var timer = setInterval(function () {

    if(duration.asSeconds() <= 0){
        console.log("STOP!");
        console.log(duration.asSeconds());
        clearInterval(timerID);
    }
    else{

    duration = moment.duration(duration.asSeconds() - interval, 'seconds');

    $('.countdown').html( duration.format("hh:mm:ss", { trim: false }) );
    }

}, 1000);

timerID = timer;

return timer;
};

//start
myTimer = startTimer();    

//stop
//clearInterval(myTimer);

</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-28T09:02:54.643

这是我在 2019 年所做的。

```
var time = 7200;
var duration = moment.duration(time, "seconds");
var interval = 1000;

setInterval(function(){
  duration.subtract(interval, "milliseconds"); //using momentjs substract function
  console.log(moment(duration.asMilliseconds()).format('hh:mm:ss')); 
}, interval ); 
```

# perl - 如何获取 perl 哈希的某些部分

> ID：10463379
> 
> 赞同：0
> 
> 时间：2012-05-05T15:39:50.317
> 
> 标签：perl, data-structures, hash

我正在学习 perl 并使用[Wea​​ther::NOAA::Alert](http://search.cpan.org/perldoc?Weather%3a%3aNOAA%3a%3aAlert)并且想弄清楚如何仅捕获其输出的特定部分。

它输出一个哈希，但我只想要某个部分，例如紧急部分......我该怎么办？

[样本输出](http://warningweather.com/test.txt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:04:00.453

它不是数组，而是散列的散列。您可以通过以下方式访问值

```
$result->{'US'}->{'http://alerts.weather.gov/cap/wwacapget.php?x=MT124CAB8F109C.WinterWeatherAdvisory.124CAB90FBA0MT.TFXWSWTFX.c906fc319cc9f5b747e95ac455f8c2f0'}->{'certainty'} 
```

将包含字符串

```
Likely 
```

查看[http://www.cs.mcgill.ca/~abatko/computers/programming/perl/howto/hash/](http://www.cs.mcgill.ca/~abatko/computers/programming/perl/howto/hash/)了解 Perl 哈希的介绍。

# javascript - javascript 从表单中获取选定的值（在带有 DB 的 Netbeans Web 项目中）

> ID：10463382
> 
> 赞同：0
> 
> 时间：2012-05-05T15:40:18.980
> 
> 标签：javascript, database, netbeans, javabeans, netbeans-7

我需要一点帮助。首先，我在表单中有一些来自数据库的值的页面，如下所示：

```
out.println("<form method=\"post\" action=\"update.jsp?id=" + 
                    rs.getString(1) +"\" onSubmit=\"return editF(this)\" id=\"editDiv"+ rs.getString(1) +"\" >" + SelectCat() +" </form>")
public String SelectCat()
    {
        String result = "<select name=\"category\" >";
        try
        {
            String request = "SELECT * FROM cat";
            Statement st = getConnection().createStatement();
            ResultSet rs = st.executeQuery(request);
            while (rs.next())
            {
                result += "<option value=\"" + rs.getString(1) + "\">" + rs.getString(2) + "</option>";
            }
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        }
        result += "</select>";
        return result;
    } 
```

我的javascript函数是

```
 function editF(form)
{
    alert("a");
    string header = form.header.value;
    string text = form.text.value;
    string category = form.category.selectedIndex.value;
    var e = document.getElementByName("category");
    //var category = e.selectedIndex;
    form.action = form.action + "&header="+header+"&text="+text+"&categoryID="+category;
    return true;
}; 
```

但我无法获得选定的价值。你能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:42:59.580

```
var category = form.category.options[ form.category.selectedIndex ].value; 
```

另外，javascript 不是强类型语言，在声明它的时候不能定义它的类型。相反，使用`var`.

# java - LWJGL 中带有纹理的 VBO

> ID：10463384
> 
> 赞同：0
> 
> 时间：2012-05-05T15:40:22.070
> 
> 标签：java, opengl, 2d, lwjgl, vbo

如何将纹理附加到 VBO？

我让它与 colorBuffer 一起工作，现在我想实现一个纹理。这是我的绘制方法：

```
Color.white.bind();
glBindTexture(GL_TEXTURE_2D, texture.getTextureID());

glBindBuffer(GL_ARRAY_BUFFER, vboVertexHandle);
glBufferData(GL_ARRAY_BUFFER, vertexData, GL_STATIC_DRAW);
glBindBuffer(GL_ARRAY_BUFFER, 0);
glBindBuffer(GL_ARRAY_BUFFER, vboVertexHandle);
glBufferData(GL_ARRAY_BUFFER, textureData, GL_STATIC_DRAW);
glVertexPointer(vertexSize, GL_FLOAT, 0, 0L);

glEnableClientState(GL_VERTEX_ARRAY);
glTexCoordPointer(3, GL_FLOAT, 0, 0);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glDrawArrays(GL_QUADS, 0, amountOfVertices);
glDisableClientState(GL_COLOR_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY); 
```

那根本不显示任何东西。纹理被正确地加载，我让它在立即模式下工作。我必须做些什么才能使其与 VBO 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:49:00.460

在设置 texCoordPointer 时，看起来纹理坐标的 VBO 未绑定。更改命令的顺序应该有效。此外，您正在使用单个 VBO 中的 texCoord 数据覆盖顶点。最简单的解决方案是每个都有两个单独的 VBO。

```
glBindTexture(GL_TEXTURE_2D, texture.getTextureID());
// vertices
glBindBuffer(GL_ARRAY_BUFFER, vboVertexHandle);
glBufferData(GL_ARRAY_BUFFER, vertexData, GL_STATIC_DRAW);
glVertexPointer(vertexSize, GL_FLOAT, 0, 0L);
// texCoords
glBindBuffer(GL_ARRAY_BUFFER, vboTexCoordHandle);
glBufferData(GL_ARRAY_BUFFER, textureData, GL_STATIC_DRAW);
glTexCoordPointer(3, GL_FLOAT, 0, 0);
// unbind VBO
glBindBuffer(GL_ARRAY_BUFFER, 0);

glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glDrawArrays(GL_QUADS, 0, amountOfVertices);

glDisableClientState(GL_COLOR_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY); 
```

注意：通常你不想通过每个 VBO 多次调用 glBufferData 来创建新的 VBO。

# paypal - Paypal 移动网络自适应支付

> ID：10463389
> 
> 赞同：21
> 
> 时间：2012-05-05T15:41:01.357
> 
> 标签：paypal, mobile-website, paypal-adaptive-payments

我正在为移动网站集成[Paypal Adaptive Payment API 。](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPayAPI)但是当我提交付款给

[https://www.paypal.com/webscr?cmd=_ap-payment&paykey=value](https://www.paypal.com/webscr?cmd=_ap-payment&paykey=value)

（对于沙盒：[https](https://www.sandbox.paypal.com/cgi-bin/webscr) ://www.sandbox.paypal.com/cgi-bin/webscr ）

它总是重定向到贝宝主网。不是贝宝移动网站。如何将客户端重定向到贝宝移动网络？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T01:45:05.590

尝试将您的网站重定向到

[https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay?paykey=AP-XYZ&expType=mini](https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay?paykey=AP-XYZ&expType=mini)

填写您的支付密钥代替 AP-XYZ

让我知道它是否有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-13T21:42:11.993

我发现最好的方法是迷你浏览器体验。但是我在实现它的移动设备上遇到了各种不同的问题（这就是它的初衷）。您会看到许多关于自适应支付的类似问题以及使用灯箱和迷你浏览器体验的各种问题。

但最后......我在几个小时之后，几天之后才弄清楚！当涉及到 PayPal 自适应支付的问题和以下问题时，这应该可以解决每个人的所有不同类型的问题：

1.  默认重定向的贝宝页面不是移动响应的，在移动设备上看起来很糟糕。
2.  灯箱“挂起”并且在某些移动设备上无法关闭。
3.  完成付款或取消后，迷你浏览器不会关闭。
4.  迷你浏览器不会从 paypal apdg.js 脚本重定向到 callBackFunction。
5.  付款完成后（或取消时）不重定向到 returnUrl 和 cancelUrl
6.  Chrome for ios (iphone) 不会启动回调函数，因此在付款完成或取消后，它只会让您停留在您启动 paypal 付款页面的页面，从而阻止您验证付款成功或失败。

请打鼓....来了！！这取代了对 PayPal javascript 文件等的任何需求。您所需要的只是下面的内容以及您自己获取 PayKey 以添加到重定向 url 的方法。[我的实时网站是https://www.trackabill.com](https://www.trackabill.com)，自适应支付使用以下代码正常工作。

```
<div>
    <?php $payUrl = 'https://www.paypal.com/webapps/adaptivepayment/flow/pay?expType=mini&paykey=' . $payKey ?>

    <button onclick="loadPayPalPage('<?php echo $payUrl; ?>')" title="Pay online with PayPal">PayPal</button>
</div>
<script>
    function loadPayPalPage(paypalURL)
    {
        var ua = navigator.userAgent;
        var pollingInterval = 0;
        var win;
        // mobile device
        if (ua.match(/iPhone|iPod|Android|Blackberry.*WebKit/i)) {
            //VERY IMPORTANT - You must use '_blank' and NOT name the window if you want it to work with chrome ios on iphone
                //See this bug report from google explaining the issue: https://code.google.com/p/chromium/issues/detail?id=136610
            win = window.open(paypalURL,'_blank');

            pollingInterval = setInterval(function() {
                if (win && win.closed) {
                    clearInterval(pollingInterval);
                    returnFromPayPal();
                }
            } , 1000);
        }
        else
        {
            //Desktop device
            var width = 400,
                height = 550,
                left,
                top;

            if (window.outerWidth) {
                left = Math.round((window.outerWidth - width) / 2) + window.screenX;
                top = Math.round((window.outerHeight - height) / 2) + window.screenY;
            } else if (window.screen.width) {
                left = Math.round((window.screen.width - width) / 2);
                top = Math.round((window.screen.height - height) / 2);
            }

            //VERY IMPORTANT - You must use '_blank' and NOT name the window if you want it to work with chrome ios on iphone
                //See this bug report from google explaining the issue: https://code.google.com/p/chromium/issues/detail?id=136610
            win = window.open(paypalURL,'_blank','top=' + top + ', left=' + left + ', width=' + width + ', height=' + height + ', location=0, status=0, toolbar=0, menubar=0, resizable=0, scrollbars=1');

            pollingInterval = setInterval(function() {
                if (win && win.closed) {
                    clearInterval(pollingInterval);
                    returnFromPayPal();
                }
            } , 1000);
        }
    }

    var returnFromPayPal = function()
    {
       location.replace("www.yourdomain.com/paypalStatusCheck.php");
        // Here you would need to pass on the payKey to your server side handle (use session variable) to call the PaymentDetails API to make sure Payment has been successful
        // based on the payment status- redirect to your success or cancel/failed page
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-16T10:11:02.500

实际上有一个简单的解决方案，在任何地方都没有记录。我们正在与 PayPal 讨论添加它，所以我想知道它是否最终得到实施。

无论如何，只需将用户重定向到以下 URL，完成后他们将被重定向回您的站点：

```
https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/preapproval?preapprovalKey=PA-XXXXX&expType=redirect 
```

The difference here is using `expType=redirect` rather that `expType=mini`. I'm not sure when this was added but after a bit of reverse engineering and some experimenting we have a surprisingly simple solution.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T16:15:49.627

没错 - 自适应支付 UI 未针对移动设备进行优化。但最接近它提供的是我们所说的 MiniBrowser 体验。您可以尝试看看这是否满足您的需求。您可以在 X.com 上找到操作指南：[实现迷你浏览器选项](https://www.x.com/developers/paypal/documentation-tools/how-to-guides/how-create-embedded-payment-flow-using-adaptive-payments#mini-b)

# performance - SQLite iOS 5+ 问题

> ID：10463393
> 
> 赞同：1
> 
> 时间：2012-05-05T15:41:30.673
> 
> 标签：performance, sqlite, ios5, sql-order-by

我对 iOS 5 上的 SQLite 有奇怪的问题。

在 iOS 应用程序中，我有相当大的表（1 000 000 + 记录）。我有一个简单的查询来从表中获取大约 20 000 条记录，然后我通过 ORDER BY 语句对结果进行排序。像这样的东西：

```
SELECT table2Field,table3Field,table4Field,table5Field,probability,impact 
FROM table1 
    INNER JOIN table2 ON id2=table1_id2 
    INNER JOIN table3 ON id3=table1_id3 
    INNER JOIN table4 ON id4=table1_id4 
    INNER JOIN table5 ON id5=table1_id5 
WHERE country_id = 0 AND category_id = 0 
ORDER BY table2Field, table3Field, table4Field, ABS(impact) DESC 
```

在 iOS 4 上，这项工作大约需要 2-3 秒。然而，在 iOS 5 上，它的工作时间更长。我试图找出这个问题的根本原因，但我没有成功。有趣的事实是，如果我从查询中删除 ORDER BY 语句，一切正常。

任何人都有更好的解决方案，然后手动排序数据？

谢谢，阿尔特姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:23:13.807

iOS 5 中的新版本 SQLite 很可能只是选择了比 iOS 4 中的版本低效率的查询计划。您可以在每个版本中使用[EXPLAIN QUERY PLAN](http://www.sqlite.org/eqp.html)来查看是否有明显差异。可能早期版本使用了后期版本未使用的索引。

您也可以尝试使用[ANALYZE](http://www.sqlite.org/lang_analyze.html)为查询计划器提供更好的信息，然后再次尝试 EXPLAIN QUERY PLAN。

有时添加/更改索引将有助于 ORDER BY 查询。

# ios - ObjectiveC 协议问题详情 -> 主通信

> ID：10463394
> 
> 赞同：0
> 
> 时间：2012-05-05T15:41:31.687
> 
> 标签：ios, ipad, xcode4.2, xcode4.3, master-detail

我正在使用 UISplitViewController 来管理 Master 和 Detail 视图。从大师到细节，一切都很好。我可以从列表中选择一个项目，并通过委托更新详细视图。

我希望能够使用详细视图上的按钮删除项目。在详细视图上执行此操作非常简单。但是，我似乎无法弄清楚如何更改主视图以反映项目已被删除的事实。

这是我的示例：[SampleCode](http://www.file-upload.net/download-4294356/Simple_SplitView_Controller_Example.zip.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:35:14.093

使 master 成为详细视图的代表。那就是：当你从主控启动细节时，告诉细节谁是主控，最好使用委托构造。这样，当发生任何变化时，细节可以通知主控。

或者您也可以将数据放入 CoreData 中，并在 CoreData 表中发生更改时自动通知主服务器。检查`NSManagedObjectContextObjectsDidChangeNotification`更多信息。

# .net - Google Place API - 如何检索营业时间

> ID：10463396
> 
> 赞同：4
> 
> 时间：2012-05-05T15:41:37.557
> 
> 标签：.net, foursquare, google-places-api, yelp

有没有办法获得谷歌地方的开放时间？我在几个论坛和文档中寻找，但我什么也没找到（也许只有foursquare API公开了这些信息）

谷歌不公开这些信息？

有没有暴露这个的服务？（脸书位置，yelp，ecc ..）

非常感谢大家的回复

阿尔贝托

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-09T02:05:04.277

我想现在这是可能的：

[https://developers.google.com/places/documentation/details#PlaceDetailsResults](https://developers.google.com/places/documentation/details#PlaceDetailsResults)

如果您不想制作自己的 Places API 密钥或安装节点，请参阅[此要点以获取示例输出。](https://gist.github.com/therealplato/5954112)

```
var request = require('request');
// $ npm install request
// Test code to demonstrate parsing operating hours from Google Places
// https://developers.google.com/places/documentation/details#PlaceDetailsResults

// most establishments specify one set of hours per day:
var testRef = 'CnRoAAAAhWUhxi1GkTSCMDMb2piX2JgQzcMv1v6Bv1rDWAINnWrI6T_Vkn3KRpnI5rTd2NI2f0zy4R8n6vRDoj-qTewKa3r70riORCUF-HNU1FLtI3MHNSw8z0_6fBni6hTuXCsGw1SD44I85ha9GVZOZlAS_hIQuNBJmgTHh9bCC4XvdLiDCBoUfmY1ozj0FW-TvurbmryBdwAvoPo';

// 24 hour restaurants only have one period with open:0000 and no close
var _24hrRef = 'CnRpAAAAcKNSNO0jxSONMAPx7EjG6BdgqhWbzDh1rOWM8I1HJZikRYPxW4L1A1ZwH4HEEBy5diKyXT1nRs2a7cxZK7S4oOr5HrTKewV_WGYdy-CuumuwLzSeckgXWvRdIRCW49JXUeJsqhkhtATHyyIDUYWW4RIQ38ZaUuG8A3WbRrsHLwmwDRoUfmtzSsfki7v8iBmUAZgrUIoVOt0'

// Restaurants that are closed on some days will have fewer than 7 open:close pairs

getPlaceDetails(_24hrRef, function(err, result){
  if(err){ 
    return console.log('Request error: '+err+result);
  };
  console.log('Request successful:')
  console.log(JSON.stringify(result.opening_hours, null, 2));
});

function getPlaceDetails(ref,callback){
  var config = {   
    uri:'https://maps.googleapis.com/maps/api/place/details/json',
    qs: {
      key: "SOME-VALID-GOOGLEPLACES-API-KEY",
      // Generate a new Simple API key and plug it in
      // https://code.google.com/apis/console
      reference:ref,
      sensor:'false',
    }
  };
  request(config, function(err, response, body){
    if(err){ return callback(err) };
    var res = JSON.parse(body);
    switch(res.status){
      case "OK":           return callback(null, res.result);
      case "ZERO_RESULTS": return callback(null, res.result);
      default:             return callback(res.status, body);
    };
  });
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T20:19:37.407

Factual API 也公开了操作时间。这是在餐厅 API 中，它由美国的 80 万家餐厅组成。该字段的结构为 JSON 哈希，其中一周中的每一天都由整数 cf 进行索引。ISO-8601：1 = 周一至 7 = 周日。

文档 - [http://developer.factual.com/display/docs/Places+API+-+Restaurants](http://developer.factual.com/display/docs/Places+API+-+Restaurants)

餐厅数据演示 - [http://www.factual.com/data/t/restaurants-us](http://www.factual.com/data/t/restaurants-us)

餐厅实体的示例。

```
24: 24,
open_24hrs: false,
accessible_wheelchair: true,
address: "3274 21st St",
alcohol: false,
alcohol_bar: false,
alcohol_beer_wine: false,
alcohol_byob: false,
attire: "casual",
category: "Food & Beverage > Restaurants > Pizza",
country: "US",
cuisine: "Pizza, Italian, American, Fast Food, Pasta",
factual_id: "5873129b-11e9-49db-a012-967b4046420d",
fax: "(415) 695-1687",
founded: "1999",
groups_goodfor: false,
hours: "{"1":[["11:00","24:00"]],"2":[["11:00","24:00"]],"3":[["11:00","24:00"]],"4":[["11:00","24:00"]],"5":[["11:00","1:00"]],"6":[["11:00","1:00"]],"7":[["11:00","24:00"]]}",
kids_goodfor: true,
latitude: 37.75694,
locality: "San Francisco",
longitude: -122.42052,
meal_cater: true,
meal_deliver: true,
meal_dinner: true,
meal_lunch: true,
meal_takeout: true,
name: "Serrano's Pizza and Pasta",
options_vegan: true,
options_vegetarian: true,
owner: "Serranos Pizza",
parking: true,
payment_cashonly: false,
postcode: "94110",
price: 2,
rating: 4.5,
region: "CA",
reservations: false,
seating_outdoor: true,
smoking: false,
status: "1",
tel: "(415) 695-1615",
website: "http://www.serranospizza.com/" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T17:03:32.647

它们通过 Facebook API 公开。例如，纽约市的粮农组织 Schwartz 已经填写了他们的工作时间：

访问 Graph API Explorer [https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)并在框中输入他们的 ID：`155199767827259`

我很确定 Yelp API 也公开了这些信息，但你必须非常明确地归类任何 Yelp 信息。

# java - 不满意的链接错误

> ID：10463397
> 
> 赞同：0
> 
> 时间：2012-05-05T15:41:44.570
> 
> 标签：java, libreoffice, unsatisfiedlinkerror

使用 Libre Office API 并在 java.lang.UnsatisfiedLinkError 上弹跳：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: com.sun.star.lib.connections.pipe.PipeConnection.createJNI(Ljava/lang/String;)I
    at com.sun.star.lib.connections.pipe.PipeConnection.createJNI(Native Method)
    at com.sun.star.lib.connections.pipe.PipeConnection.<init>(PipeConnection.java:125)
    at com.sun.star.lib.connections.pipe.pipeConnector.connect(pipeConnector.java:134)
    at com.sun.star.comp.connections.Connector.connect(Connector.java:138)
    at com.sun.star.comp.urlresolver.UrlResolver$_UrlResolver.resolve(UrlResolver.java:120)
    at com.sun.star.comp.helper.Bootstrap.bootstrap(Bootstrap.java:292)
    at HelloTextTableShape.getRemoteServiceManager(HelloTextTableShape.java:446)
    at HelloTextTableShape.newDocComponent(HelloTextTableShape.java:433)
    at HelloTextTableShape.useWriter(HelloTextTableShape.java:115)
    at HelloTextTableShape.useDocuments(HelloTextTableShape.java:107)
    at HelloTextTableShape.main(HelloTextTableShape.java:98)
CE> Warning: -nologo is deprecated.  Use --nologo instead.
CE> Warning: -nodefault is deprecated.  Use --nodefault instead.
CE> Warning: -norestore is deprecated.  Use --norestore instead.
CE> Warning: -nolockcheck is deprecated.  Use --nolockcheck instead.
CE> Warning: -accept=pipe,name=uno7528184211562854035;urp; is deprecated.  Use --accept=pipe,name=uno7528184211562854035;urp; instead. 
```

有谁知道如何处理这个？似乎无法在互联网上找到一个好的解决方案/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:44:17.597

您缺少指向 com.sun.star.lib.connections.pipe.PipeConnection.createJNI(Ljava/lang/String;)I 的 JNI 库的 -Djava.library.path 或（如果不在 Windows 上）LD_LIBRARY_PATH 的设置.

# apache - apache mod_rewrite 优先于 带 svn 和 trac

> ID：10463399
> 
> 赞同：1
> 
> 时间：2012-05-05T15:41:53.857
> 
> 标签：apache, mod-rewrite, trac

我有一个 apache 配置文件，

```
<VirtualHost *:443 >

    SSLEngine on
    SSLCertificateFile ...
    SSLCertificateKeyFile ...
    SSLCertificateChainFile ...
    SSLCACertificateFile ...

    ServerName www.etebaran.com
    ServerAlias www.etebaran.com etebaran.com 
    ServerAdmin webmaster@etebaran.com
    DocumentRoot /home/etebaran/domains/etebaran.com/private_html
    ScriptAlias /cgi-bin/ /home/etebaran/domains/etebaran.com/public_html/cgi-bin/

    UseCanonicalName OFF

    SuexecUserGroup etebaran etebaran
    CustomLog /var/log/httpd/domains/etebaran.com.bytes bytes
    CustomLog /var/log/httpd/domains/etebaran.com.log combined
    ErrorLog /var/log/httpd/domains/etebaran.com.error.log
    ErrorDocument 400 default
    ErrorDocument 401 default
    ErrorDocument 403 default
    ErrorDocument 404 default
    ErrorDocument 405 default
    ErrorDocument 408 default
    ErrorDocument 410 default
    ErrorDocument 411 default
    ErrorDocument 412 default
    ErrorDocument 413 default
    ErrorDocument 414 default
    ErrorDocument 415 default
    ErrorDocument 500 default
    ErrorDocument 501 default
    ErrorDocument 502 default
    ErrorDocument 503 default

<Location /svn>
    #Options -All
    DAV svn
    SVNPath /home/etebaran/svn/

    AuthzSVNAccessFile /home/etebaran/svn/conf/authz
    Satisfy Any
    Require valid-user
    AuthType Basic
    AuthName "Etebaran Repository"
    AuthUserFile /home/etebaran/svn/conf/.htpasswd
    SVNAutoversioning on 
</Location>
<Location /trac>
    SetHandler mod_python
    PythonHandler trac.web.modpython_frontend
    PythonOption TracEnv /home/etebaran/trac
    PythonOption TracUriRoot /trac
    Satisfy Any
</Location>
<LocationMatch "/trac/login">
    AuthType Basic
    AuthName "Etebaran Trac"
    AuthUserFile /home/etebaran/svn/conf/.htpasswd
    Require valid-user
</LocationMatch>
    <Directory /home/etebaran/domains/etebaran.com/private_html>
        Options +Includes -Indexes
        RewriteEngine On
        RewriteCond %{query_string} ^(.*)
        RewriteRule (.*) etebaran/_japp/controller.php?__r=$1&%1 [L]
        suPHP_Engine ON
        suPHP_UserGroup etebaran etebaran
    </Directory>
</VirtualHost> 
```

问题是，`<Directory>`优先于`<Location>`，因此目录上的重写规则会覆盖位置。

奇怪的是，etebaran.com/svn 仍然有效，但 etebaran.com/trac 由目录指令和位于其中的 PHP 框架处理。

我知道有一些讨厌的解决方法，但最整洁的解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:04:22.373

问题似乎是你的`RewriteCond`线。您的匹配模式是`^(.*)`，它将匹配*任何东西*。使用更详细的匹配模式以确保它不会与您的其他工具的 URL 匹配。例如，一个模式`!^/svn/.*`应该匹配任何不以“ `/svn/`”开头的 URL。

您的 Subversion 和 Trac 安装似乎分别使用以 " `/svn/`" 和 " `/trac/`" 开头的 URL。您的 PHP 框架的 URL 是什么样的？它们也以前缀开头，还是从站点的根目录提供？

# ruby-on-rails - Ruby 中的年龄计算

> ID：10463400
> 
> 赞同：2
> 
> 时间：2012-05-05T15:42:14.437
> 
> 标签：ruby-on-rails, ruby, datetime

我正在尝试编写一个 Rails 应用程序，但目前出生日期的显示与正常日期格式一样，但我更愿意在视图中显示年龄

我在控制器中的方法如下，我的数据库中有一个 DOb 列作为出生日期L

```
def age
  @user = user
  now = Time.now.utc.to_date
  now.year - @user.dob.year - (@user.dob.to_date.change(:year => now.year) > now ? 1 : 0)
end 
```

它显示为 DOB: 23/5/2011，但我希望它以年为单位。

我如何还放置一个验证器来检查年龄是否低于 18 岁？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T16:00:31.337

对于验证器，您可以使用[自定义方法](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-methods)：

```
validate :over_18

def over_18
  if dob + 18.years >= Date.today
    errors.add(:dob, "can't be under 18")
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-05T20:51:31.477

我遇到了这个问题，并认为我会发布一个更现代的答案，它利用 Rails 便捷方法语法和自定义验证器。

# 自定义年龄验证器

此验证器将为您要验证的字段名称和最低年龄要求提供一个选项哈希。

```
# Include somewhere such as the top of user.rb to make sure it gets loaded by Rails.
class AgeValidator < ActiveModel::Validator

  def initialize(options)
    super
    @field = options[:field] || :birthday
    @min_age = options[:min_age] || 18
    @allow_nil = options[:allow_nil] || false
  end

  def validate(record)
    date = record.send(@field)
    return if date.nil? || @allow_nil

    unless date <= @min_age.years.ago.to_date
      record.errors[@field] << "must be over #{@min_age} years ago."
    end
  end

end 
```

# 示例用法

```
class User < ActiveRecord::Base
  validates_with AgeValidator, { min_age: 18, field: :dob }
end 
```

* * *

# `User#age`方便法

为了计算用户的显示年龄，您需要小心计算闰年。

```
class User < ActiveRecord::Base
  def age

    return nil unless dob.present?
    # We use Time.current because each user might be viewing from a
    # different location hours before or after their birthday.
    today = Time.current.to_date

    # If we haven't gotten to their birthday yet this year.
    # We use this method of calculation to catch leapyear issues as
    # Ruby's Date class is aware of valid dates.
    if today.month < dob.month || (today.month == dob.month && dob.day > today.day)
      today.year - dob.year - 1
    else
      today.year - dob.year
    end

  end
end 
```

## 还有规格！

```
require 'rails_helper'
describe User do
  describe :age do
    let(:user) { subject.new(dob: 30.years.ago) }
    it "has the proper age" do
      expect(user.age).to eql(30)

      user.birthday += 1.day
      expect(user.age).to eql(29)
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T16:17:10.687

计算年龄时应该小心。这是一个正确的方法：

```
def age(as_at = Time.now)
  as_at = as_at.utc.to_date if as_at.respond_to?(:utc)
  as_at.year - dob.year - ((as_at.month > dob.month || (as_at.month == dob.month && as_at.day >= dob.day)) ? 0 : 1)
end 
```

之后，根据@Baldrick：

```
validate :check_over_18

def check_over_18
  errors.add(:dob, "can't be under 18") if age < 18
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T16:05:16.060

您在这里有几个不同的问题。

1.  年龄计算属于哪里？

    年龄计算应该是辅助方法或模型方法。我一直将其作为模型方法，但最近看到了在装饰器甚至辅助方法中使用这些显示元素的优势。在您的情况下，首先将其放入模型中，然后从那里开始：

    ```
    def age
        now = Time.now.utc.to_date
        now.year - dob.year - ((now.month > dob.month || (now.month == dob.month && now.day >= dob.day)) ? 0 : 1)
    end 
    ```

2.  您如何验证此人已超过 18 岁？

    如果某人未满 18 岁，您是否真的限制他们被保存到数据库中？或者您是否限制了观看能力？

    ```
    def is_over_18?
        age >= 18
    end 
    ```

这编写了一个自定义的每个验证器或使用一个 Proc，但我真的质疑以这种方式验证的决定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-07T05:21:37.397

要查找年龄，您可以使用 gem [adroit-age](https://github.com/raj-adroit/adroit-age)

```
age = AdroitAge.find_age("23/01/1990")
=> 23 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T13:57:06.897

我也不得不处理这个问题，但是几个月。变得太复杂了。我能想到的最简单的方法是：

```
def month_number(today = Date.today)
  n = 0
  while (dob >> n+1) <= today
    n += 1
  end
  n
end 
```

你可以用 12 个月做同样的事情：

```
def age(today = Date.today)
  n = 0
  while (dob >> n+12) <= today
    n += 1
  end
  n
end 
```

这将使用 Date 类来增加月份，这将处理 28 天和闰年等。

# android - ADT/Eclipse - 图形/显示工件和 main.xml 布局编辑器中的移动文本行

> ID：10463401
> 
> 赞同：3
> 
> 时间：2012-05-05T15:42:15.523
> 
> 标签：android, eclipse, adt

> **可能重复：**
> [移动和消失的代码行；Eclipse 的 XML 编辑器的问题](https://stackoverflow.com/questions/10030727/moving-and-vanishing-lines-of-code-trouble-with-eclipses-xml-editor)

我是 Eclipse 和 ADT 的新手，但我在两台不同的机器上设置了我的环境，并且两者都显示相同的奇怪之处（都是 Windows 7 64 位）。

在图形布局和 main.xml 视图之间更改选项卡时，main.xml 视图中的代码行将开始消失或移动。没有视频或动画 gif 很难显示，但我会尝试使用这些屏幕截图：

[图 1](https://i.imgur.com/EBCwQ.png) [图 2](https://i.imgur.com/htBfW.png)

请注意，我所做的只是突出显示一段文本，然后突然间所有这些伪影都出现了。它使开发变得不那么愉快。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T11:16:34.727

经过一些测试，我发现“自动格式化由可视布局编辑器编辑的 XML”选项（在 Preferences | Android | Editors 中）可能是这里的罪魁祸首。

通过我的测试，我发现在图形布局设计模式下更改属性（例如 layout_gravity）总是会在此选项打开但返回 XML（文本）模式时搞砸文件的视觉显示，但是当它关闭时我没有问题。

如果您想在从图形布局设计模式返回时格式化 XML，只需使用快捷方式`Ctrl`- `Shift`- `F`。此外，我没有发现使用“保存时格式化”选项有任何问题；即使我在图形布局模式下使用它；因此您可以使用`Ctrl`-`S`而不是在您仍处于图形布局模式时保存和格式化您的 XML。

我尝试了其他编辑器选项，例如“显示范围指示器”或“使用字符显示垂直标尺的变化”，但我没有看到激活或取消激活这些选项的行为有任何差异。

最后，纠正文件损坏时的视觉显示；我发现使用快捷方式：`Ctrl`- `A`，`Ctrl`- `C`，`Ctrl`-`V`比关闭/重新打开文件要容易一些。这相当于做了一个全选、复制、粘贴；有效地将整个 XML 文件复制到自身之上。

# java - 在 Tomcat 5.5 上禁用更新会话

> ID：10463402
> 
> 赞同：3
> 
> 时间：2012-05-05T15:42:30.170
> 
> 标签：java, session, tomcat, tomcat5.5

如何在 Tomcat 5.5 中针对特定请求禁用重置会话超时？在一个页面上，我有一个 javascript 函数，它定期向服务器发送 ajax 调用。在服务器端，我不希望这些调用更新会话生命周期。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:22:01.890

好的，既然你不喜欢我的第一个想法，我想出了这个 JSP 演示。这是一种黑客攻击，但它确实有效。要测试，复制和粘贴。浏览到第一个 JSP。它将启动一个会话并设置非活动间隔。重定向后，继续点击浏览器上的刷新按钮。无论您请求第二个 JSP 多少次，当前会话都会终止。

test1.jsp

```
<%
   session.setMaxInactiveInterval(20); //for easy testing
   response.sendRedirect("test2.jsp");
%> 
```

test2.jsp

```
<%@ page session="false" import="java.util.*" %>
<%
  HttpSession session = request.getSession(false);
  if(session == null){
                  out.print("Error, No Session!");
                  return;
  }
  long creationTime = session.getCreationTime();
  long now = new Date().getTime();
  long lastAccessedTime = session.getLastAccessedTime();
  int oldInterval = session.getMaxInactiveInterval();
  int inactivePeriod = (int)(now - lastAccessedTime)/1000; 
  session.setMaxInactiveInterval(oldInterval - inactivePeriod); 
  int newInterval = session.getMaxInactiveInterval();
%>
<html>
<body>
session id is <%=session.getId()%>
<br/><%=creationTime%> = creationTime
<br/><%=lastAccessedTime%> = lastAccessedTime
<br/><%=now%> = now
<br/><%=oldInterval%> = oldInterval in seconds 
<br/><%=inactivePeriod%> = inactivePeriod
<br/><%=newInterval%> = newInterval in seconds 
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:25:01.387

我会创建一个单独的网络应用程序（与您现在的应用程序一起）来接受 AJAX 调用。在第二个 Web 应用程序中，您可以避免创建会话。您可以通过在 JSP 的页面指令中使用 session="false" 或在 Servlet 中不显式创建指令来做到这一点。如果您需要在这两个应用程序之间共享数据，则可以在上下文定义中使用属性 crossContext="true"。 [Tomcat 文档](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html#Common_Attributes)

# tridion - 在组件编辑器中获取字段的 _current_ 值？（Tridion 2011 SP1）

> ID：10463406
> 
> 赞同：11
> 
> 时间：2012-05-05T15:42:35.970
> 
> 标签：tridion

我正在编写“保存”命令的扩展，基本上我想验证某些字段并显示一个弹出窗口，允许编辑器根据当前日期、发布号和其他一些属性选择给定的关键字或其他值。

我以为我进展顺利，直到我最终发现`$display.getItem()`返回的是存储在 CM 中的项目，而不是编辑器可能已更改的当前值。

是否有内置方法可以让我获取此信息？还是我需要解析 DOM 才能弄清楚？

这是我目前拥有的代码

```
var item = $display.getItem();
if (item.getItemType() == "tcm:16") {
   if (item.getSchema().getStaticTitle() == "Test Schema") {
      var content = $xml.getNewXmlDocument(item.getContent());
      var fieldXml = $xml.getInnerText(content, "//*[local-name()='NewField']");
      alert(fieldXml);
   }
} 
```

它正在工作 - 我得到“NewField”的值 - 但这是项目加载时的值，而不是*当前**值*。

有趣的是，`item.getTitle()`显示了 Title 字段的当前值，所以我希望也有办法为自定义字段实现这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T09:00:45.417

我不知道这是否是正确的方法，但您可以在项目上触发“collectdata”事件 - 这将使用迄今为止在编辑屏幕上输入的内容更新它的数据。

```
var item = $display.getView().getItem();
item.fireEvent("collectdata");
$log.message(item.getXml()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:19:29.540

Peter's approach copies the values from the controls in the HTML into the item's XML. This is a great approach **if** you don't mind the item being updated, since it allows you to simply manipulate the XML instead of the HTML.

But if you don't want the item to be updated yet, you have no choice but to find the correct control(s) in the HTML and read the value from there.

I wrote up this little helper function for it:

```
function getControlForFieldName(name)
{
    var fieldBuilder = $display.getView().properties.controls.fieldBuilder;
    var fieldsContainer = fieldBuilder.properties.input;
    var fieldsNode = fieldsContainer.getElement();
    var fieldContainer = $dom.getFirstElementChild(fieldsNode);
    while (fieldContainer)
    {
        var labelNode = $dom.getFirstElementChild(fieldContainer);
        var fieldNode = $dom.getNextElementSibling(labelNode);
        var control = fieldNode.control;
        if (control.getFieldName() == name)
        {
            return control;
        }
        fieldContainer = $dom.getNextElementSibling(fieldContainer);
    }
} 
```

With this function in place you can simply look up the control for a field given its name. When you have the control you can get the values from it easily.

```
var fieldControl = getControlForFieldName('Body');
if (fieldControl)
{
    var values = fieldControl.getValues();
    // values is an array, since it caters for multi-value fields
    // if this is a single-value field, get the value from values[0]
} 
```

Note that my approach requires way more code than Peter's and touches quite a few non-public APIs.

# c# - 未在 C# 中捕获的未处理异常

> ID：10463408
> 
> 赞同：4
> 
> 时间：2012-05-05T15:42:47.583
> 
> 标签：c#, backgroundworker

我正在使用以下代码来处理程序中所有未处理的异常。但是异常没有传播到指定方法的问题。

```
 [STAThread]
    static void Main()
    {

        AppDomain currentDomain = default(AppDomain);
        currentDomain = AppDomain.CurrentDomain;
        Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);
        // Handler for unhandled exceptions.
        currentDomain.UnhandledException += GlobalUnhandledExceptionHandler;
        // Handler for exceptions in threads behind forms.
        System.Windows.Forms.Application.ThreadException += GlobalThreadExceptionHandler;

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new FormMain());
    }

  private static void GlobalUnhandledExceptionHandler(object sender, UnhandledExceptionEventArgs e)
    {
        Exception ex = (Exception)e.ExceptionObject;        

        MessageBox.Show(ex.Message,
                                  "Important",
                                  MessageBoxButtons.YesNo);
    }

    private static void GlobalThreadExceptionHandler(object sender, System.Threading.ThreadExceptionEventArgs e)
    {
        Exception ex = e.Exception;

        MessageBox.Show(ex.Message,
                                 "Important",
                                 MessageBoxButtons.YesNo);

    } 
```

FormMain 有一个 backgroundWorker 对象。这个后台工作人员负责完成应用程序的大部分工作，如果 doWork 方法出现异常，它不会像我预期的那样被传播。这是我在 MainForm 中使用的后台工作人员的代码。

```
 private void button_startSync_Click(object sender, EventArgs e)
 {            
     backgroundWorker1.RunWorkerAsync(getSettings());\          
 }

  private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
  {        

     // ... processing code
     // Unhandled Exception will generated in this method...           
  } 
```

请告知我在这里做错了什么，我希望程序中任何地方生成的异常都被捕获到上面的那些全局处理程序中，以便报告错误/异常以进行修复..

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T15:55:09.450

这是设计使然，BackgroundWorker 类捕获在 DoWork 事件处理程序中引发的任何异常。并在 RunWorkerCompleted 事件处理程序的 e.Error 属性中公开它。所以这样写：

```
 private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e) {
  { 
      if (e.Error != null) throw e.Error;
      // etc..
  } 
```

# c# - 多项目解决方案对象生命周期

> ID：10463412
> 
> 赞同：1
> 
> 时间：2012-05-05T15:43:13.493
> 
> 标签：c#, lifetime

我承认我是 C# 的新手，我有以下问题。

假设您有一个包含三个项目（A、B、C）的解决方案。项目 C 引用 B，B 和 C 都引用 A。B 是入口点所在的位置。我在项目 A 中的一个类中有一个列表。它是这样的：

项目一：

```
public class ProcessDuration
    {
        public List<TicketTimer> DurationList = new List<TicketTimer>();

        public void AddProcesstime(string Ticket, int Count, Process_Step Step, Process_Status Status, DateTime Time)
        {
            Ticket ccStart = new Ticket();
            ccStart.RecordTime(Ticket, Count, Step, Status, Time);
            DurationList.Add(ccStart);
        }
...
} 
```

项目B：

```
class testB
{
          public TicketProcessDuration TD = new TicketProcessDuration();
          TD.StartProcessMonitor(ticketMain, request.DataRecords.Count);
} 
```

项目 C：

```
class testC
{
        TD.StartProcessMonitor(ticketMain, request.DataRecords.Count); //Error here because TD scope
} 
```

我想从项目 B 和 C 添加到列表中。所以我在 B 中创建了一个 ProjectDuration 类的对象。但是由于范围的原因，我无法从项目 C 中访问它。我尝试将列表设为静态并在项目 C 中创建对象 TD，但它给了我另一个问题 - 它为应用程序生命周期维护列表，但我希望在每次运行后清空列表。我不想定义一个函数并将 ProjectDuration 对象从 B 传递给 C。还知道它是一个 Web 服务应用程序，所以几个连接可能正在迭代列表，所以我无法在一次运行后清除它。

你有什么建议？我该如何解决这个问题？我也想知道如何在垃圾收集器之前销毁对象TD？

任何紧急帮助将不胜感激。如果我需要阅读某些领域以更好地了解这些情况，请告诉我......但首先要解决！

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:53:01.847

B创造C吗？如果是这样，让 B 在创建时将 ProcessDuration 的实例提供给 C 的构造函数。更好的办法是通过它的构造函数向 B 提供 ProcessDuration，以便每个类都可以使用模拟或假 ProcessDuration 进行测试。

```
 public class TestB
  {
      private TestC C { get; set; }
      private ProcessDuration TD { get; set; }

      public TestB(ProcessDuration td)
      {
           this.TD = td;
           this.C = new TestC(td);
      }

      public void DoSomething()
      {
           this.TD.StartProcessMonitor( ... );
           this.C.DoSomethingEsle();
      }
  }

  public class TestC
  {
      private ProcessDuration TD { get; set; }

      public TestC(ProcessDuration td)
      {
          this.TD = td;
      }

      public void DoSomethingElse();
      {
          this.TD.StartProcessMonitor(...);  // or just continue using it???
      }
 } 
```

这称为构造函数注入，它可以说是在相关类之间传递依赖关系的最佳方式。最终，您可以开始使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)框架来为您管理这些，但刚开始我会手动完成，直到您了解它在做什么，然后继续使用框架为您完成。

当然，这可能不是您的确切情况。也许 B 和 C 都是由其他东西创建的。在这种情况下，您可以让该类将相同的 ProcessDuration 实例注入 B 和 C（而不是让 B 创建 C 并传递实例）。

由于这是在 Web 服务中运行的，因此您需要确保所有实例都是[线程安全的](http://en.wikipedia.org/wiki/Thread_safety)，即，类中的数据不会在多个线程之间共享，或者，如果是，您已经内置了一些锁定机制，以确保一次只有一个线程可以访问数据。如果您不确定自己在做什么，您将希望避免使用静态实例来帮助确保线程安全。在进一步研究之前，对依赖注入和线程进行一些研究可能会有所帮助。

# actionscript-3 - BlackBerry Air 中的自定义按钮？

> ID：10463413
> 
> 赞同：0
> 
> 时间：2012-05-05T15:43:48.817
> 
> 标签：actionscript-3, air, blackberry-playbook

我正在使用 AIR 为 BlackBerry PlayBook 开发应用程序，并且我需要创建带有渐变的自定义按钮，并且在按下时会产生不同的渐变。文字应根据需要为黑色或白色（由我为应用程序的不同部分决定）。

那么有什么办法可以实现这种按钮吗？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:09:58.773

出色地...

1.  您可以使用绘图 API 以编程方式创建按钮渐变，或者为每个状态创建和嵌入位图。

2.  然后，您可以创建一个由渐变资源和 textField 对象组成的自定义按钮类，作为具有鼠标/触摸事件的子项，以控制视觉变化并调度按钮自定义事件。

3.  最后，您可以创建自定义按钮事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:42:59.543

您应该为[qnx.fuse.ui.buttons.Button创建一个自定义](https://bdsc.webapps.blackberry.com/air/apis/qnx/fuse/ui/buttons/Button.html)[按钮皮肤](https://bdsc.webapps.blackberry.com/air/apis/qnx/fuse/ui/skins/buttons/package-detail.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:27:30.973

如果您使用的是 spark 组件按钮，则需要使用 SkinClass 属性，您可以在其中传递任何皮肤对象。在此皮肤中，您可以设置状态，如 up 、 down 、 over 、 disabled 。

// 创建皮肤类的代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark">
<!-- host component -->
<fx:Metadata>
    [HostComponent("ImageButton")]
</fx:Metadata>

<!-- states -->
<s:states>
    <s:State name="down" />
    <s:State name="over" />
    <s:State name="up" />
    <s:State name="disabled" />
</s:states>

<!-- SkinParts
name=labelDisplay, type=spark.core.IDisplayText, required=false
name=iconDisplay, type=spark.primitives.BitmapImage, required=false
-->
<s:BitmapImage source="@Embed('add_audio.png')"       includeIn="disabled" />
<s:BitmapImage source="@Embed('add_audio.png')"       includeIn="up" />
<s:BitmapImage source="@Embed(add_audio_press.png')"  includeIn="over"/>
<s:BitmapImage source="@Embed('add_audio_press.png')" includeIn="down"/> 
```

// 创建一个自定义按钮类

```
package 
```

{ 进口火花.components.Button;

```
public class ImageButton extends Button
{
    public function ImageButton()
    {
        super();
        this.buttonMode=true;
    }
} 
```

}

像这样使用这两个类。

```
<local:ImageButton x="2" y="43" skinClass="skins.audio.Cut" /> 
```

# android - 菜单中的项目就像一个按钮

> ID：10463421
> 
> 赞同：-1
> 
> 时间：2012-05-05T15:45:09.470
> 
> 标签：android, contextmenu, menuitem

我有一个关于菜单中的项目像按钮一样的问题，我不知道如何解决它。

在菜单中的一个项目中，我引用了一个可扩展的项目，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/item1" android:title="Item1" />
  <item android:id="@+id/item2" android:title="Item2" />
</menu> 
```

而且我不知道如何定义它，并像按钮一样使用它，如下所示：

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  Button button = (Button) findViewById(R.id.button);

  button.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
      String uri=null;

      Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
      intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE,
                      RingtoneManager.TYPE_RINGTONE);
      if (uri !=null) {
        intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI,
                        Uri.parse(uri));        
      } else {
        intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI,
                        (Uri)null);
      }

      startActivityForResult(intent, 1);
    }
  }); 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:11:38.473

所以你想实现一个菜单。对于 API 10 或更低版本，将 menu.xml 放入 res/menu/ 并在您的活动中覆盖这两个函数：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
    case R.id.item1:
        // Do something
        break;
    case R.id.item2:
        // Do something else
        break;
    }
    return true;
} 
```

对于 API 11+，请考虑使用此处说明的操作栏[。](http://developer.android.com/guide/topics/ui/menus.html)

**更新**

对于首选项菜单，您需要使用 findPreference() 并定义自定义 setOnPreferenceClickListener()。不要在此处复制代码片段，而是遵循以下三个详细教程中的任何一个：

*   [http://www.kaloer.com/android-preferences](http://www.kaloer.com/android-preferences)
*   [http://androidpartaker.wordpress.com/tag/ringtonepreference/](http://androidpartaker.wordpress.com/tag/ringtonepreference/)
*   [http://www.bogotobogo.com/Android/android16Preferences.php](http://www.bogotobogo.com/Android/android16Preferences.php)

# java - 参数化测试套件

> ID：10463423
> 
> 赞同：1
> 
> 时间：2012-05-05T15:45:18.260
> 
> 标签：java, junit, junit4

我有一堆参数化的 JUnit4 测试，它们看起来都像：

```
@RunWith(Parameterized.class)
public class MyTestX {
  private final MyParameter param;
  public TestX(MyParameter param) { 
    this.param = param; 
  }

  @Test
  public void myTest() {
    // Some test code
  }
} 
```

我想从不同的测试套件运行它们，每个测试套件都有不同的 MyParameter 值。

我尝试了以下方法：

```
@RunWith(Suite.class)
@SuiteClasses( { MyTest1.class, MyTest2.class, ... })
public class MyTestSuite1 {

  @Parameters
  public static Collection<Object[]> data() {
    Object[][] data = {{ new MyParameter(1) )}};
    return Arrays.asList(data);
  }
} 
```

但它不起作用：我得到“MyTestX 类上没有公共静态参数方法”。

有没有办法从测试套件而不是测试用例中指定参数？如果可能的话，我想避免为每个测试、每个测试套件创建一个新类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:39:03.357

我有一个类似的问题。通过创建一个包含`@Parameters`and的抽象类来修复它`@RunWith(Parameterized.class)`。这个类被测试套件中的所有测试扩展。我发现的一件事是，无论这些注释是在您的测试套件中还是在您的测试中，`@Parameters`都将在`@BeforeClass`and之前调用。`@Before`希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T18:06:52.583

我正在学习 Junit 和 WebDriver，在练习 junit 的过程中，我也遇到了类似的错误。不确定我的答案会有多大用处，但值得一试。

请检查您的导入语句，并且应该有正确的参数语句，即**import org.junit.runners.Parameterized.Parameters**；

如果它与任何其他参数语句冲突，则尝试删除其他语句并仅保留此语句。

这解决了我的问题。

刚刚看到这篇文章已经 2 岁了，但这可能会帮助其他任何人现在遇到同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:03:07.480

听起来您想使用相同的参数运行*不同的测试。*

参数化测试用于使用不同参数运行*相同的测试。*如果您的测试不完全相同，那么您需要不同的测试。

您需要做的是`@Test`向您的类添加不同的方法，`MyTestX`而忘记参数化测试。这样你就只有一堂课了，你的考试会以一种清晰的方式组织起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-04T22:31:24.460

> 我想从不同的测试套件运行它们，每个测试套件都有不同的 MyParameter 值。

您的要求与以下的正常行为不同`Parameterized`：如果您定义测试层次结构并`Object[][]`为它们分配相同的参数集 ()，则 JUnit 框架将使用第一个测试用例的所有参数运行测试，然后再转到下一个测试用例并使用所有参数运行它。

因此，如果您想在转到下一个参数之前先**对单个参数执行所有测试，则****需要另一个 runner**。看看[这个](https://github.com/PeterWippermann/parameterized-suite)为您提供`ParameterizedSuite`Runner 的库。

参数化的测试套件如下所示：

```
@RunWith(ParameterizedSuite.class)
@SuiteClasses({OneTest.class, TwoTest.class})
public class MyParameterizedTestSuite {
    @Parameters(name = "Parameters are {0} and {1}")
    public static Object[] params() {
        return new Object[][] {{'A',1}, {'B',2}, {'C',3}};
    } 
```

# javascript - jQuery 和本地存储异常行为

> ID：10463424
> 
> 赞同：1
> 
> 时间：2012-05-05T15:45:24.043
> 
> 标签：javascript, jquery, html, jquery-mobile, local-storage

我正在尝试从本地存储中检索一些项目，如果它们在那里，则在页面上显示一些内容。这是我正在尝试做的事情：

```
function loadData()
{       
    var transData = storage.get('TransInfo');

    if(transData != undefined)
    {
        $('#UserName').val(transData[0]);

        if(transData[1] == 'Blue')
        {
            $('#radio-choice-1').attr('checked', true);
        }
        else
        {
            $('#radio-choice-2').attr('checked', true);
        }

        $('#TransNum').val(transData[2]);

        if(transData[3] == 'A')
        {
            $('#radio-choice-1-board').attr('checked', true);
        }
        else
        {
            $('#radio-choice-2-board').attr('checked', true);
        }

        unHideAll();
        return true;
    }
}; 
```

当最终加载数据时，我想调用 unHideAll()：

```
//THIS FUNCTION FAILS WHEN CALLED!!
function unHideAll()
{
    /*
    $('#radio-choice-1').checkboxradio('enable');
    $('#radio-choice-2').checkboxradio('enable');
    $('#radio-choice-1-board').checkboxradio('enable');
    $('#radio-choice-2-board').checkboxradio('enable');
    $('#TransNum').textinput('enable'); 
    $('#UserContinue').remove();
    $('#nextButton').show();
    */
}; 
```

我遇到的问题是 unHideAll() 永远不会到达任何地方。如果我在顶部放置一个 alert()，它会显示，但如果我在底部放置一个 alert()，它永远不会到达那里。知道为什么吗？

这是我调用这些方法的方式：

```
$(document).ready(function()
{   
    clearStorage(); 
    loadData();
    unHide();           
    collectData();
}); 
```

知道为什么我不能让 unHideAll() 做任何事情吗？它适用于传统的 unHide() 方法，我在还没有本地存储时使用该方法，但如果存在本地存储，它往往会很快失败。

有任何想法吗？

编辑：

这是我的本地存储代码：

```
window.storage = {
    store:localStorage,
    get: function( key ) 
    {
        try
        {
            return JSON.parse(this.store[key]);
        } 
        catch(e) {};

        return undefined;
    },
    set: function( key, value) 
    {
        try
        {
            this.store[key] = JSON.stringify(value);
        } 
        catch(e) {};
    }
}; 
```

编辑2：

这是一些有效的代码，这就是为什么它在我的新方法中不起作用的原因。

```
//THIS CODE WORKS FLAWLESSLY TO REVEAL ITEMS!!
$('#UserContinue').click(function() 
{
    if($('#UserName').val() == '') 
    {
        alert('Please Enter a User Name First!');
        return false;
    }
    else 
    {
        User_Name = $('#UserName').val();
        $('#radio-choice-1').checkboxradio('enable');
        $('#radio-choice-2').checkboxradio('enable');
        $('#radio-choice-1-board').checkboxradio('enable');
        $('#radio-choice-2-board').checkboxradio('enable');
        $('#TransNum').textinput('enable'); 
        $('#UserContinue').remove();
        $('#nextButton').show();

        confirm('Welcome ' + User_Name +'!');

        return true;
    }

    return true;
}); 
```

这真的很奇怪......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:02:12.590

unHideAll() 的代码是完全错误的。你没有像 checkboxradio() 或 textinput() 这样的方法。这就是为什么在调用函数时会发生错误并产生您解释的行为。
要使用 jQuery 启用/禁用表单元素，请阅读常见问题解答： http: [//docs.jquery.com/Frequently_Asked_Questions#How_do_I_disable.2Fenable_a_form_element.3F](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_disable.2Fenable_a_form_element.3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:00:37.197

你可以简单地试试这个：

```
window.storage = {
    store:localStorage,
    get: function( key ) 
    {  
      var ret = this.store.getItem('key');
      if(ret) {
           return JSON.parse(ret);
       }
        return undefined;
    },
    set: function( key, value) 
    { 
        this.store.setItem(key, JSON.stringify(value));
    }
}; 
```

**笔记：**

1.  在您的`get`功能中，我看不到任何内容`localStorage`
2.  `set`函数不要将数据设置为`localStorage`

# c# - 需要帮助将 RTF 保存为 TXT 作为流

> ID：10463425
> 
> 赞同：0
> 
> 时间：2012-05-05T15:45:33.027
> 
> 标签：c#, asp.net-mvc, .net-4.0, razor

我能够读取一个 RTF 文件（数据表）并将其读取到一个字符串，如下所示。

```
Stream rtftxt = Request.Files[0].InputStream;
int size = Convert.ToInt32(rtftxt.Length);
Byte[] rtf = new Byte[size];
rtftxt.Read(rtf, 0, size);
string FileText=System.Text.Encoding.GetEncoding("utf-8").GetString(rtf); 
```

我需要删除富文本格式，或者如果可能，将其另存为流中的 TXT 并再次读取此流。任何帮助和建议将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:35:28.043

WinForms[`RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)控件可用于以编程方式将富文本转换为纯文本，而无需实际将控件放置在窗体上。

以下代码从输入流中读取富文本并将生成的纯文本写入输出流。

```
var box = new RichTextBox();
var reader = new StreamReader(input);
box.Rtf = reader.ReadToEnd();
var writer = new StreamWriter(output);
writer.Write(box.Text);
writer.Flush(); 
```

# codeigniter - Codeigniter 外键约束检查

> ID：10463429
> 
> 赞同：5
> 
> 时间：2012-05-05T15:46:17.113
> 
> 标签：codeigniter, constraints

我先解释一下表结构：

```
+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| id        | int(11)      | NO   | PRI | NULL    | auto_increment |
| firstname | varchar(255) | NO   |     | NULL    |                |
| name      | varchar(255) | NO   |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+ 
```

id 字段是通过外键从另一个表中引用的。

假设我的模型中有这样的函数：

```
public function delete_user($id) {
    return $this->db->delete('users', array('id' => $id));
} 
```

当从另一个表中引用此用户时，它应该会引发错误。“坏”的事情是，Codeigniter 实际上在整页上显示了该错误：

```
Error Number: 1451

Cannot delete or update a parent row: a foreign key constraint fails (`testing`.`users_link`, CONSTRAINT `users_link_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`))

DELETE FROM `users` WHERE `id` = '1' 
```

有没有办法让 delete_user 函数返回 FALSE 而不是显示错误？我想通知用户他们必须先做其他事情。我尝试使用事务并返回事务状态，但这仍然会引发错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T09:17:48.103

在配置文件夹 database.php 文件中找到该行

```
$db['default']['db_debug'] 
```

并将其设置为 FALSE。这将阻止 Codeigniter 在屏幕上打印错误。

同样在删除功能中，您可以检查：

```
if ($this->db->_error_number() == 1451) 
```

如果发生这种情况时您需要做一些特别的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-07T13:51:17.960

我以这种方式使用它 Codeigniter 3.0

模型

```
/*
 * function to delete user
 */
function delete_user($id)
{
            if ( ! $this->db->delete('users', array('id' => $id)))
            {
                            return $this->db->error();
            }
    return FALSE;
} 
```

控制器

```
$fk_check = $this->User_model->delete_user($id);

if($fk_check) {
// Unable to delete record
// $fk_check is an array containing $fk_check['code'] & $fk_check['message']
exit();
}

// Here your record has been deleted 
```

# opengl - 为什么 glGetUniformBlockIndex() 返回 INVALID_INDEX？

> ID：10463433
> 
> 赞同：1
> 
> 时间：2012-05-05T15:46:53.557
> 
> 标签：opengl, vertex-shader, uniform

我在程序中使用以下顶点着色器，但由于某种原因，`glGetUniformBlockIndex(id, "draw2DQuadVS")`返回`INVALID_INDEX`.

程序在使用前已正确链接，并传递了正确的 id。此外，没有设置 opengl 错误。有什么解释吗？

```
 #version 410
    uniform CBPostProcessVS
    {
        vec4  f4_Proj2DTo3D;
    } postProcessVS;

    uniform CBDraw2DQuadVS
    {
        vec4  f4_PositionOffsetAndScale;
        vec4  f4_TexcoordOffsetAndScale;
    } draw2DQuadVS;

        in vec3 vPosition;
    in vec2 vTexcoord0;
    in vec4 vColor0;
    in vec3 vTangent;
    in vec3 vBinormal;
    in vec3 vNormal;

    out vec2 v_vTexcoord0;
    out vec3 vPosFactor;

    void main()
    {    
        vec2 pos = (vec2(vPosition) * draw2DQuadVS.f4_PositionOffsetAndScale.zw) + vec2(draw2DQuadVS.f4_PositionOffsetAndScale);
        vec2 uv = (vec2(vTexcoord0) * draw2DQuadVS.f4_TexcoordOffsetAndScale.zw) + vec2(draw2DQuadVS.f4_TexcoordOffsetAndScale);

        gl_Position = vec4(pos,0,1);
        v_vTexcoord0 = uv;

        vPosFactor.xy = uv * vec2(postProcessVS.f4_Proj2DTo3D) + postProcessVS.f4_Proj2DTo3D.zw;
        vPosFactor.z = 1.0;
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T16:30:42.833

```
glGetUniformBlockIndex(id, "draw2DQuadVS") 
```

`draw2DQuadsVS`不是统一块*的*名称。块的名称是`CBDraw2DQuadVS`。`draw2DQuadsVS`只是块范围的 GLSL 名称。

更多信息可以在[OpenGL Wiki 页面](http://www.opengl.org/wiki/Interface_Block_%28GLSL%29#Syntax)上找到。

# c# - ObservableCollection 的 ObservableCollection 的网格

> ID：10463435
> 
> 赞同：2
> 
> 时间：2012-05-05T15:47:01.427
> 
> 标签：c#, wpf, observablecollection

这是一个有趣的案例，我无法在网上找到任何信息。我正在尝试创建一个网格并需要将 ObservableCollection 的 ObservableCollection 绑定到它。想象一个这样的模型：

```
public class App
{
    private ObservableCollection<MyNewCollection> collections;
}

public class MyNewCollection : DependencyObject
{
    public ObservableCollection<MyCollectionItem> items;
    // ... public properties: string CollectionTitle 
}

public class MyCollectionItem : DependencyObject 
{
    // ... public properties: string ItemTitle
} 
```

我希望网格的第一列列出集合对象中的项目，以便每一行都包含来自集合 ObservableCollections 中一个项目的 CollectionTitle。对于第二列，我希望每一行都包含与适当的集合对象关联的一组 MyCollectionItems 项。

从上面的代码：

1.  集合为“c”
2.  项目为“我”

```
+-------------------------------------------------- --------------------------------------------+
+ | 第 0 列 | 第 1 栏 |
+-------------------------------------------------- --------------------------------------------------------|
+ 第 0 行 | c[0].CollectionTitle | c[0].i[0].ItemTitle ...i[1].ItemTitle ... i[2].ItemTitle |
+ 第 1 行 | c[1].CollectionTitle | c[1].i[0].ItemTitle ...i[1].ItemTitle ... i[2].ItemTitle |
+ | | |
+ ... |
+-------------------------------------------------- --------------------------------------------+

```

如果我有一组静态的 MyNewCollection 对象，这会很容易，但由于它可以增长到无穷大，我需要为 MyNewCollection 对象创建一个新的 ObservableCollection，这就是我在理解如何使用 WPF 执行此操作时遇到麻烦的地方. 任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:04:35.247

这是使用 ItemsControl 的一种方法，其中每一行都包含另一个 ItemsControl。

Xaml：

```
<Page.Resources>
    <DataTemplate x:Key="ChildItemTemplate" 
                  DataType="{x:Type Samples:NestedCollectionItem}">
        <TextBlock Text="{Binding Title}" Margin="5"/>
    </DataTemplate>
    <ItemsPanelTemplate x:Key="ChildItemPanel">
        <StackPanel Orientation="Horizontal"/>
    </ItemsPanelTemplate>
    <DataTemplate x:Key="ItemTemplate" 
                  DataType="{x:Type Samples:NestedCollectionChildViewModel}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" SharedSizeGroup="c1"/>
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <TextBlock VerticalAlignment="Center"  Text="{Binding Title}"/>
            <ItemsControl 
                Grid.Column="1" 
                ItemsSource="{Binding Items}"
                ItemsPanel="{StaticResource ChildItemPanel}"
                ItemTemplate="{StaticResource ChildItemTemplate}"
                />
        </Grid>
    </DataTemplate>
</Page.Resources>

<Page.DataContext>
    <Samples:NestedCollectionRootViewModel/>
</Page.DataContext>

<Grid>
    <ItemsControl 
        Grid.IsSharedSizeScope="True"
        ItemsSource="{Binding Items}" 
        ItemTemplate="{StaticResource ItemTemplate}"/>
</Grid> 
```

编码：

```
public class NestedCollectionRootViewModel
{
    public NestedCollectionRootViewModel()
    {
        Items =
            new ObservableCollection<NestedCollectionChildViewModel>
                {
                    new NestedCollectionChildViewModel
                        {
                            Title = "Item 1",
                            Items =
                                new ObservableCollection<NestedCollectionItem>
                                    {
                                        new NestedCollectionItem {Title = "One"},
                                        new NestedCollectionItem {Title = "Two"},
                                        new NestedCollectionItem {Title = "Three"},
                                        new NestedCollectionItem {Title = "Four"},
                                    }
                        },

                    new NestedCollectionChildViewModel
                        {
                            Title = "Item 2",
                            Items =
                                new ObservableCollection<NestedCollectionItem>
                                    {
                                        new NestedCollectionItem {Title = "Five"},
                                        new NestedCollectionItem {Title = "Six"},
                                    }
                        },

                };
    }

    public ObservableCollection<NestedCollectionChildViewModel> Items 
       { get; private set; }
}

public class NestedCollectionChildViewModel
{
    public string Title { get; set; }
    public ObservableCollection<NestedCollectionItem> Items { get; set; }
}

public class NestedCollectionItem
{
    public string Title { get; set; }
    // ... etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:05:49.803

我只简单地使用过 C#，但是，如果我没记错的话，当你不能直接绑定时，你应该编写一个自定义[ValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)类，它处理你的 MyCollectionItem 元素，然后在绑定中使用它。

# android - 调整 MapView 以显示整个弹出气泡

> ID：10463436
> 
> 赞同：0
> 
> 时间：2012-05-05T15:47:01.887
> 
> 标签：android

我正在使用 MapView.addView() 在点击 OverlayItem 标记时在其顶部显示一个弹出气泡。有时，弹出视图会超出显示屏幕的边缘，因为它包含的信息量很大，或者因为被点击的标记靠近地图的边缘。如何确定弹出视图何时不适合，然后调整地图的位置以显示整个弹出视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:30:51.440

我问这个问题已经三个月了，所以我想我会发布我想出的解决方案，以防万一有人看到这个帖子。此方法是扩展类的一部分`MapView`。

```
/**
 * Repositions the map, if necessary, in order to fully display the view passed in.  Mainly used
 * by the map bubbles displayed when tapping on an overlay item marker.  It's important that the
 * view passed in has already been laidout by the system so its measurements are available.
 *
 * @param view The being displayed on the map.
 */
private void recenter(View view) {
  Display display = windowManager.getDefaultDisplay();

  // Get the dimensions of the physical display screen.  These will differ based on the orientation
  // of the device.
  int displayWidth  = display.getWidth();
  int displayHeight = display.getHeight();

  // Get the coordinates of the top left and bottom right corners of the view.
  Point topLeft     = new Point(view.getLeft(),  view.getTop());
  Point bottomRight = new Point(view.getRight(), view.getBottom());

  // Will be used to convert between map coordinates and pixels.
  Projection projection = getProjection();

  // Get the pixel coordinates for the map's current center and use that to initialize a new point
  // object that will be used to reposition the map if necessary.
  Point mapCenter = projection.toPixels(getMapCenter(), null);
  Point newCenter = new Point(mapCenter);

  // Adjust the "x" coordinate if necessary.
  if (topLeft.x < 0) {
    newCenter.x += topLeft.x;
  }
  else if (bottomRight.x > displayWidth) {
    newCenter.x += bottomRight.x - displayWidth;
  }

  // Adjust the "y" coordinate if necessary.
  if (topLeft.y < 0) {
    newCenter.y += topLeft.y;
  }
  else if (bottomRight.y > displayHeight) {
    newCenter.y += bottomRight.y - displayHeight;
  }

  // Reposition the map only if the newly calculated center differs from the original.
  if (!newCenter.equals(mapCenter)) {
    getController().animateTo(projection.fromPixels(newCenter.x, newCenter.y));
  }
} 
```

让我感到困惑的一件事是如何确保传入的视图具有可用的测量值。我通过注册一个监听器来解决这个问题，以确定系统何时布置了视图，如下所示：

```
// Add a listener to determine when the layout for the "mapBubbleMsg" view has been completed.
// This will be used to reposition the map if necessary so the newly added view is visible.
mapBubbleMsg.getViewTreeObserver().addOnGlobalLayoutListener(mapBubbleMsgLayoutListener); 
```

这是听众：

```
/**
 * Listen for layout changes to the "mapBubbleMsg" view.  This will be used to reposition the map
 * if necessary so the "mapBubbleMsg" view is visibile.  The first thing this listener does is
 * unregister itself in order to prevent it from being called repeatedly each time the "mapBubbleMsg"
 * view layout changes.
 */
ViewTreeObserver.OnGlobalLayoutListener mapBubbleMsgLayoutListener = new
ViewTreeObserver.OnGlobalLayoutListener() {
  public void onGlobalLayout() {
    mapBubbleMsg.getViewTreeObserver().removeGlobalOnLayoutListener(this);
    recenter(mapBubbleMsg);
  }
}; 
```

我希望这对其他人有帮助。

# java - 在 GAE 数据存储中删除子实体会导致多个实体被删除

> ID：10463440
> 
> 赞同：0
> 
> 时间：2012-05-05T15:47:45.100
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

我在由 2 个类实现的 GAE 数据存储中的单个实体组中具有一对多关系：

**用户.java：**

```
public class User {
    ...
    @Persistent(mappedBy = "user", defaultFetchGroup="true")
    private List<Note> noteSets; 
```

**注意.java：**

```
public class Note {
    ... 
    @Persistent
    private User user; 
```

我有以下代码通过用户键和注释 id 删除一个注释：

```
public static void deleteNote(String userKey, long noteId) {
        PersistenceManager pm = DatastoreManager.get().getPersistenceManager();
        try {
            User user = pm.getObjectById(User.class, userKey);
            Key childKey = user.getUserKey().getChild(Note.class.getSimpleName(), noteId);
            Note note = pm.getObjectById(Note.class, childKey);
            pm.deletePersistent(note);
        } finally {
            pm.close();
        }
    } 
```

此代码工作正常，但有时它会删除超过 1 个 Note 实体。这种行为的原因是什么？

# python - 按值对字典进行排序

> ID：10463442
> 
> 赞同：1
> 
> 时间：2012-05-05T15:48:02.073
> 
> 标签：python

我从一堆或电子邮件中读取数据并计算每个单词的频率。首先构造两个计数器：

```
counters.stats = collections.defaultdict(dict)
counters.chi = collections.counter() 
```

统计的关键是单词。对于每个单词，我构造一个字典，其键是电子邮件的名称，值是该单词在这封电子邮件中出现的频率。

气的关键与统计中的词相同。我想通过'chi'中的键对'stats'中的键进行排序。该问题通过以下方式解决：

```
def print_stats(counters):
    sorted_key = sorted(counters.stats, key = counters.chi.get)
    result = collections.OrderedDict(k, counters.stats[k] for key in sorted_key)
        for form, cat_to_stats in result.items(): 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:20:01.953

如果我对您的理解正确，这应该可以满足您的要求：

```
>>> stats = {'a':   {'email1':4, 'email2':3}, 
...          'the': {'email1':2, 'email3':4},
...          'or':  {'email1':2, 'email3':1}}
>>> chi = {'a': 7, 'the':6, 'or':3}
>>> sorted(stats, key=chi.get)
['or', 'the', 'a'] 
```

让我知道这是否适合您。此外，正如上面提到的 Boud，您应该考虑`numpy`/ `scipy`，它可能会提供更好的性能 - 并且肯定会提供许多内置功能。

既然你说这不起作用——由于你还没有解释的原因——这里有一个更一般的例子来说明如何使用这个`key`参数。这表明它`get`适用于`Counter`对象以及标准字典，还表明如何创建一个执行某些操作的函数：

```
>>> stats = {'a':   {'email1':4, 'email2':3}, 
...          'the': {'email1':2, 'email3':4},
...          'or':  {'email1':2, 'email3':1}}
>>> wordlists = ([k] * sum(d.itervalues()) for k, d in stats.iteritems())
>>> chi = collections.Counter(word for seq in wordlists for word in seq)
>>> sorted(stats, key=chi.get)
['or', 'the', 'a']
>>> sorted(stats, key=lambda x: chi[x] + 3)
['or', 'the', 'a']
>>> sorted(stats, key=chi.get, reverse=True)
['a', 'the', 'or'] 
```

我仍然不完全理解您在寻找什么，但也许您的意思是获取键值元组的排序列表？

```
>>> sorted(stats.iteritems(), key=lambda x: chi[x[0]])
[('or', {'email3': 1, 'email1': 2}), 
 ('the', {'email3': 4, 'email1': 2}), 
 ('a', {'email2': 3, 'email1': 4})] 
```

我实际上建议将其拆分：

```
>>>> sorted_keys = sorted(stats, key=chi.get)
>>>> [(k, stats[k]) for k in sorted_keys]
[('or', {'email3': 1, 'email1': 2}), ('the', {'email3': 4, 'email1': 2}), ('a', {'email2': 3, 'email1': 4})] 
```

您说您想要按 中的值排序的东西`chi`，但“与统计数据具有相同的结构”。这是不可能的，因为字典没有顺序；最接近的是元组的排序列表，或`OrderedDict`（在 2.7+ 中）。

```
>>>> collections.OrderedDict((k, stats[k]) for k in sorted_keys)
OrderedDict([('or', {'email3': 1, 'email1': 2}), ('the', {'email3': 4, 'email1': 2}), ('a', {'email2': 3, 'email1': 4})]) 
```

如果您必须经常重新排序字典，则此方法毫无意义。

# css - CSS：采用父级内部的所有可用高度而不溢出它

> ID：10463447
> 
> 赞同：4
> 
> 时间：2012-05-05T15:48:34.133
> 
> 标签：css, layout

```
<div id="wr">
    <div id="con_top"></div>
    <div id="con_bottom"></div>
</div>​

#wr {
    height:400px;
    width:80%;
    margin:50px auto;
    border:1px solid black;
}
    #con_top {
        height:40px;
        margin:5px;
        border:1px solid red;            
    }
    #con_bottom {
        height:100%;
        border:1px solid blue;
        margin:5px;    
    }​ 
```

[http://jsfiddle.net/nMbWw/](http://jsfiddle.net/nMbWw/)

如何制作蓝色正方形，适合黑色，父容器？没有javascript可以吗？

使用表格元素更容易，但表格在 Opera 和 IE 中存在错误。高度为 100% 的 td 元素无法按预期工作，取表格元素本身的高度，而忽略该表格中所有其他 td 的高度。

例如用 Opera 或 IE 打开：

[http://jsfiddle.net/UTMRn/3/](http://jsfiddle.net/UTMRn/3/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T15:57:36.813

忘记桌子:)。您可以使用绝对定位：

```
#wr {
    height:400px;
    width:80%;
    margin:50px auto;
    border:1px solid black;
    position: relative; /* added to keep the absolute element inside */
}

#con_top {
    height:40px;
    margin:5px;
    border:1px solid red;            
}

#con_bottom {
    border:1px solid blue;
    margin:5px;    
    position: absolute; /* make it absolute */
    top: 45px; /* the height of the other element + its margin */
    bottom: 0; /* stick to the bottom */
    left: 0; /* stick to the left */
    right: 0; /* stick to the right */
}​ 
```

[jsFiddle 演示](http://jsfiddle.net/nMbWw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:59:39.617

`height:100%;`意味着我想要和父母一样高。由于父母`#wr`有更多的孩子，`#con_bottom`不适合。在您当前的情况下，85% 的高度似乎适合`#con_bottom`. 请记住，边距和边框（以及父级的填充）计入可用空间。

# java - 如何使用 Instrumentation 获取变量值？

> ID：10463449
> 
> 赞同：2
> 
> 时间：2012-05-05T15:48:42.323
> 
> 标签：java, bcel, javaagents

我目前正在尝试开发一个 java 代理来获取堆栈跟踪，其中包含被调用方法的名称和该方法传递的值。我有一个简单的应用程序，它创建了一些不同对象的实例并使用它们来测试我的 java 代理。

哦，我也在使用 BCEL。

目前，我能得到的只是所有具有方法和属性的类。

这是java代理的代码：http: [//pastebin.com/HFkgswJH](http://pastebin.com/HFkgswJH)

这是我运行时得到的： java -javaagent:instr.jar bookStore.jar ：[http ://pastebin.com/gsjat72E](http://pastebin.com/gsjat72E)

那么，如何在调用方法时获得跟踪？例如，如果在我的简单应用程序中我这样做：

> Book myBook = new Book("Title", "Author", "Thriller");
> 
> myBook.setTitle("这很有趣");

我想获取方法名称“setTitle”和传递的字符串值：“这很有趣！”

有任何想法吗？关联？图书馆？

谢谢！

# php - php中的foreach循环和字符串

> ID：10463451
> 
> 赞同：1
> 
> 时间：2012-05-05T15:48:49.843
> 
> 标签：php, regex, string, foreach

**php代码：**

```
foreach ($html->find('table') as $noscript) {echo $data;
        echo $data;
        echo $noscript->innertext . "<br>";
    } 
```

现在我需要将其中的每个字符串与 "google" 进行比较，它可以是 "GOOGLE" 或 "Google" 之类的任何东西，这里大小写无关紧要。

但是我如何检查 `$noscript->innertext`和回显`$data;`“谷歌”

我想不出一种方法来实现这一点。请给我一些代码示例。

**我试过的代码**

```
foreach ($html->find('table') as $noscript) {
        //if (strstr(strtolower($data)||strtolower($noscript->innertext), "google"))
        if (preg_match('/google/i', $data || $noscript->innertext)) {
            echo "This is Google";
            $real = 1;
        }

        echo $data;
        echo $noscript->innertext . "<br>";
    } 
```

**第二次尝试：**

```
if (strstr(strtolower($data)||strtolower($noscript->innertext), "google")) 
```

两者都不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T15:59:24.357

```
if(stristr($data,'google') || stristr($noscript->innertext,'google'))
{
    echo "This is Google";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:53:01.873

您可能正在寻找一种叫做正则表达式的东西：

```
§hasGoogle = preg_match('~goo+gle~i', $text); 
```

那是他们自己描述字符串的语言。您可以在上面 ( ) 和 Internet 上的该函数[的 PHP 手册](http://php.net/pcre.pattern)中找到它们。[`preg_match`](http://php.net/preg_match)也许最好读一本关于它们的书，因为这是它自己的语言。

注意这个表达式：

```
$data || $noscript->innertext 
```

要么是PHP，`FALSE`要么是`TRUE`PHP，但不是你想的那样（一个字符串）。PHP 中没有这样的捷径，因此您需要编写更多代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T15:52:36.220

```
foreach ($html->find('table') as $noscript) {
       if(preg_match("/^google/i", $noscript->innertext) || preg_match("/^google/i", $data)) {
          echo $data;
        }
        echo $noscript->innertext . "<br>";
} 
```

# php - 如何自动创建一个新的表格行

> ID：10463454
> 
> 赞同：0
> 
> 时间：2012-05-05T15:49:07.380
> 
> 标签：php, arrays, loops, html-table

我需要一些帮助来用 PHP 生成一个表。

我有一个包含 10 -15 个条目的数组。像这样：

```
$array = array(IME1, IME2, IME3, IME4,IME5, IME6, IME7 ,IME8 ,IME9 ,IME10); 
```

目标是创建一个像这样的表：在每 3 个条目上自动创建一个新行。

![例子](../Images/246f321d1f6d9831556dbfe3c175c299.png)

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T15:51:03.377

看起来像一份工作**[`array_chunk()`](http://il.php.net/manual/en/function.array-chunk.php)**

```
array_chunk($array, 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:41:08.643

不是最漂亮的解决方案

```
$chunks = array_chunk($array, $max_col); 
$max_col = 3; 
?>
<table border="1">
    <tbody>
        <? foreach($chunks as $key => $value){
            echo "<tr>";
            foreach($value as $k => $v){
                echo "<td> ".$v." </td>";
            }
            // Finish tr, but only if there are no items left for the next row
            if( count($value) == $max_col ){
                echo "</tr>";
            }
        }
        // Finish td with an empty value setting colspan if there are not enough items to fil the entire row
        if( count($value) < $max_col ){
            echo "<td colspan=".($max_col-count($v)-1)."></td>";
            // Finish the last row
            echo "</tr>";
        }
        ?>
    </tbody>
</table> 
```

考虑将您的逻辑与您的演示文稿分开。有许多模板引擎可以轻而易举地解决这个问题，或者让你定义一个函数/修饰符/片段来处理这个任务并让你轻松地重用它。

# java - 无法持久化分离的对象

> ID：10463460
> 
> 赞同：0
> 
> 时间：2012-05-05T15:50:00.200
> 
> 标签：java, postgresql, netbeans

我正在使用连接到 postresql 数据库的 java 企业应用程序，并且在日志文件中出现此错误

```
javax.ejb.EJBException
at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:3894)
at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:3794)
at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:3596)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1379)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1316)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:205)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:127)
at $Proxy120.create(Unknown Source)
at com.mirodinero.web.servlets.setMisDatos.processRequest(setMisDatos.java:111)
at com.mirodinero.web.servlets.setMisDatos.doGet(setMisDatos.java:140)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:427)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:315)
at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:287)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:218)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:94)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:98)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:222)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1096)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:166)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1096)
at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:288)
at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.invokeAdapter(DefaultProcessorTask.java:647)
at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.doProcess(DefaultProcessorTask.java:579)
at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.process(DefaultProcessorTask.java:831)
at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.executeProcessorTask(DefaultReadTask.java:341)
at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:263)
at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:214)
at com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:265)
at com.sun.enterprise.web.connector.grizzly.ssl.SSLWorkerThread.run(SSLWorkerThread.java:106) 
```

原因：javax.persistence.EntityExistsException：异常描述：无法保留分离的对象 [com.mirodinero.entidad.DatosUsuario[idUsuario=Miguel LLorente]]。类> com.mirodinero.entidad.DatosUsuario 主键> [Miguel Llorente] 在 oracle.toplink.essentials.internal.ejb.cmp3.base.EntityManagerImpl.persist(EntityManagerImpl.java:224) 在 com.sun.enterprise.util。 EntityManagerWrapper.persist(EntityManagerWrapper.java:440) 在 com.mirodinero.sesionBean.DatosUsuarioFacade.create(DatosUsuarioFacade.java:30) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl。 java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 com.sun。Enterprise.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1011) 在 com.sun.enterprise.security.SecurityUtil.invoke(SecurityUtil.java:175) 在 com.sun.ejb.containers.BaseContainer.invokeTargetBeanMethod(BaseContainer. java:2920) 在 com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:4011) 在 com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:197) ... 33 更多原因：异常 [TOPLINK-7231] (Oracle TopLink Essentials - 2.1 (Build b60e-fcs (12/23/2008)))：oracle.toplink.essentials.exceptions.ValidationException 异常描述：无法保持分离的对象 [com.mirodinero.entidad. DatosUsuario[idUsuario=Miguel Llorente]]。类> com.mirodinero.entidad.DatosUsuario 主键> [Miguel Llorente] 在 oracle.toplink.essentials。

还有这个：

```
javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
at oracle.toplink.essentials.internal.ejb.cmp3.EJBQueryImpl.throwNoResultException(EJBQueryImpl.java:274)
at oracle.toplink.essentials.internal.ejb.cmp3.base.EJBQueryImpl.getSingleResult(EJBQueryImpl.java:513)
at com.mirodinero.sesionBean.DatosUsuarioFacade.findById(DatosUsuarioFacade.java:57)
at sun.reflect.GeneratedMethodAccessor560.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.enterprise.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1011)
at com.sun.enterprise.security.SecurityUtil.invoke(SecurityUtil.java:175)
at com.sun.ejb.containers.BaseContainer.invokeTargetBeanMethod(BaseContainer.java:2920)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:4011)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:197)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:127)
at $Proxy120.findById(Unknown Source)
at com.mirodinero.web.servlets.setMisDatos.processRequest(setMisDatos.java:96)
at com.mirodinero.web.servlets.setMisDatos.doGet(setMisDatos.java:140)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:427)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:315)
at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:287)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:218)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:94)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:98)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:222)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1096)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:166)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1096)
at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:288)
at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.invokeAdapter(DefaultProcessorTask.java:647)
at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.doProcess(DefaultProcessorTask.java:579)
at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.process(DefaultProcessorTask.java:831)
at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.executeProcessorTask(DefaultReadTask.java:341)
at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:263)
at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:214)
at com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:265)
at com.sun.enterprise.web.connector.grizzly.ssl.SSLWorkerThread.run(SSLWorkerThread.java:106) 
```

所以我去检查出现错误的文件，代码如下所示：

```
public DatosUsuario findById(String id) {
    DatosUsuario du = null;
    try {
        du = (DatosUsuario) em.createNamedQuery("DatosUsuario.findByIdUsuario").setParameter("idUsuario", id).getSingleResult();
    } catch (Exception nre) {
        log.error("No existe el usuario: " + id + ", ex: ", nre);
    } finally {
        log.debug("du: " + du);
        return du;
    }
} 
```

有人知道错误在哪里吗？因为在我的网页中，它看起来像是 3 次中的 2 次保存数据。

是的，实际上这里给出了 EntityExistExpection：

```
public void create(DatosUsuario datosUsuario) {
    em.persist(datosUsuario);  // in this line
}

public void edit(DatosUsuario datosUsuario) {
    em.merge(datosUsuario);
}

public void remove(DatosUsuario datosUsuario) {
    em.remove(em.merge(datosUsuario));
} 
```

但我想它需要创建新用户，对吧？还是应该检查用户是否存在然后只编辑数据？如何做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:07:59.407

可能会抛出 EntityExistsException，因为您需要执行 em.merge() 而不是 em.persist()。

当实体不是新实体并且需要保存时，您应该创建一个由客户端调用的 save() 方法。

```
public void save(DatosUsuario datosUsuario) {
    em.merge(datosUsuario);
} 
```

或者，您可以保留 create() 方法并检查实体是否已被持久化。具有@Id 和@GeneratedValue(strategy=GenerationType.AUTO) 的实体仅在持久化时才具有ID。所以这样的事情可以工作：

```
public void createOrSave(DatosUsuario datosUsuario) {
    if (datosUsuario.getId() == null){
        em.persist(datosUsuario);
    }
    else{
        em.merge(datosUsuario);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:05:08.227

第一个异常是由被分离的对象引起的，这可能有几个原因。就像它是已结束事务的一部分，或者它是已关闭的上下文的一部分。当您想在新的事务/上下文中使用它时，您需要在您的实体管理器上调用合并。

您发布的最后一个异常是由于将 id 传递给您的 findById 函数而导致数据库中不存在任何对象。getSingleResult() 的行为是在不完全是一个结果时抛出异常。

# oop - Ada：使用构造对象的值

> ID：10463467
> 
> 赞同：2
> 
> 时间：2012-05-05T15:50:32.060
> 
> 标签：oop, package, ada

这篇文章是上一篇文章的后续：

[Ada：理解私有类型和理解封装](https://stackoverflow.com/questions/10398922/ada-understanding-private-types-and-understanding-packaging)

我正在尝试创建一个名为 的对象`Configuration`，将其打印在屏幕上，以便我可以看到它的内容并尝试访问这个创建的对象的组件。**这是给我带来麻烦的最后一部分**。代码如下：

首先是包装规格`Rectangular_Method.ads`：

```
package Rectangular_Method is
type Rectangular is private;

function Construct(Horz, Vert : Long_Float) return Rectangular;

procedure Print(Configuration: in Rectangular);

procedure Vector_Basis_r (A : in Long_Float; D : out Rectangular);

function Get_Horz (R : Rectangular) return Long_Float;
function Get_Vert (R : Rectangular) return Long_Float;

private
type Rectangular is
    record
         Horz, Vert: Long_Float;
    end record;

end Rectangular_Method; 
```

接下来，包体`Rectangular_Method.adb`：

```
with Ada.Text_IO, Ada.Long_Float_Text_IO;
with Ada.Numerics.Long_Elementary_Functions;
use  Ada.Numerics.Long_Elementary_Functions;

package body Rectangular_Method is

function Construct(Horz, Vert : Long_Float) return Rectangular is
begin
  return(Horz, Vert);
end Construct;

procedure Print(Configuration: in Rectangular) is
use Ada.Text_IO, Ada.Long_Float_Text_IO;
  begin
Put("(");
Put(Configuration.Horz, Fore => 2, Aft => 2, Exp => 0); Put(", ");
Put(Configuration.Vert, Fore => 2, Aft => 2, Exp => 0);
Put_Line(")");
  end Print;

procedure Vector_Basis_r (A : in Long_Float; D : out Rectangular) is
begin
  D.Horz := Cos (A, Cycle => 360.0);
  D.Vert := Sin (A, Cycle => 360.0);
end Vector_Basis_R;

function Get_Horz (R : Rectangular) return Long_Float is
begin
  return R.Horz;
end Get_Horz;

function Get_Vert (R : Rectangular) return Long_Float is
begin
  return R.Vert;
end Get_Vert;
end Rectangular_Method; 
```

最后是测试文件`test_rectangular_form.adb`：

```
with Ada.Long_Float_Text_IO;
with Ada.Text_IO; use Ada.Text_IO;

with Rectangular_Form;
use type Rectangular_Form.Rectangular;
procedure Test_Rectangular_Form is

Theta                                 : Long_Float;
Basis_r                               : Rectangular_Form.Rectangular;

Configuration: Rectangular_Form.Rectangular;

begin
   Ada.Text_IO.Put("Enter the angle ");
   Ada.Long_Float_Text_IO.Get (Item => theta);

   --Vector basis
   Rectangular_Form.Vector_Basis_R (A => Theta, D => Basis_R);

   Configuration := Rectangular_Form.Construct(Rectangular_Form.Get_Horz (Basis_R),Rectangular_Form.Get_Vert (Basis_R));
   Ada.Text_IO.New_Line;
   Rectangular_Form.Print(Configuration);

end Test_Rectangular_Form; 
```

现在的问题（基于`test_rectangular_form.adb`）：

I have created an object `Configuration` as shown above holding the *horizontal* and *vertical* components of *Basis_R*. If I want to access say the horizontal component of `Configuration`, the following doesn't work:

```
aa := Rectangular_Form.Configuration.Rectangular.Horz; 
```

(after defining `aa` to be of type *Long_Float*)

I have tried various expressions to access the components of the object `Configuration` but in vain.

Any help would be most appreciated.

Thanks...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:15:56.830

The purpose of your Get_Horz and Get_Vert functions is to retrieve the components of your Rectangular object:

```
aa := Rectangular_Form.Get_Horz(Configuration); 
```

# c# - 如何将模型和另一个参数传递给视图

> ID：10463471
> 
> 赞同：0
> 
> 时间：2012-05-05T15:51:21.697
> 
> 标签：c#, asp.net-mvc-3, parameters, model, viewmodel

我可能已经这样做了……我可能只是缺少一些简单的东西，但本质上我只是希望能够做到这一点……

```
public ActionResult ContinueProcess(Model m, int id){

} 
```

我只想同时传递模型和另一个参数。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:57:08.700

使用 ViewModel

```
public class MyViewModel {
    public Model MyModel {get;set;}
    public int ParameterId {get;set;}
} 
```

用作您的视图模型，

或使用 ViewBag

```
ViewBag.ParameterId= id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:27:44.193

我当然会创建一个**ViewModel**来处理这个

```
public class ContinueProcessViewModel
{
   public int ID { set;get;}
   public Model ContinueProcess { set;get;}
} 
```

在您的获取操作方法中返回此 ViewModel'

```
public ActionResult ContinueProcess(int id)
{
  ContinueProcessViewModel objVM=new ContinueProcessViewModel();
  objVm.ID=id;
  return View(objVM);
} 
```

在你的视图中，有一个 HTMLelement(textbox/hidden) 来保存这个值

```
@Html.HiddenFor(x=>x.ID) 
```

现在您应该可以在您的 httppost 操作方法中访问它了

```
[HttpPost]
public ActionResult ConitnueProcess(ContineProcessViewModel objVM)
{
  //Check objVm.ID here
} 
```

# c++ - 如何设置 Visual Studio 以将所需的 DLL 文件复制到发布版本中的发布目录中？

> ID：10463474
> 
> 赞同：0
> 
> 时间：2012-05-05T15:51:55.820
> 
> 标签：c++, visual-studio-2010, dll, release

我记得 Visual Studio 自己完成了将所需的 DLL 文件复制到发布版本中的发布目录的任务，但现在它不再这样做了，我必须`C:\WINDOWS\system32`通过我的系统搜索所有目录和其他目录来找到DLL文件并粘贴到项目的发布目录中，在整个系统中搜索DLL文件会很无聊。

您知道如何设置 Visual Studio，以便在构建应用程序时将所有必需的 DLL 文件复制到发布目录中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:56:16.093

它应该复制到您的调试文件夹中，但首先您需要通过选择项目导入 DLL，右键单击所有窗口控件，选择“选择项目”并浏览到相应的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T14:46:43.677

您可以告诉 VB 引用 DLL 而不是移动它们。VB 的右侧是解决方案资源管理器。右键单击您的项目并选择“添加引用”。浏览到小的基本 DLL（通常是 C:\Program Files (x86)\Microsoft\Small Basic）。

# android - 在多个活动中共享数据库

> ID：10463477
> 
> 赞同：0
> 
> 时间：2012-05-05T15:52:20.840
> 
> 标签：android, sqlite

我创建了三个活动。一种是 DBActivity，用于执行面向数据库的操作（创建、插入、检索、删除关闭等）。创建数据库是在 DBActivity 的构造函数中执行的。辅助活动 StoreActivity 会将 EditText 值存储到数据库中。第三个活动 RetrieveActivity 将检索数据库值。我已经为 DBActivity 创建了对象并将值保存到数据库中。在 RetreiveActivity 中检索数据库时，获取数据库的想法是什么..？如果我为将创建一个新数据库的 DBActivity 创建了对象，这会给我带来麻烦。如何访问在 StoreActivity 中创建的同一数据库...您能帮我编码吗...？提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:02:42.653

您的问题反映了您的概念中的问题。您希望独立于所有活动来访问数据库。所以你不应该把你的数据库逻辑放在一个Activity类型的类中。通过继承这个类来编写你自己的数据库助手类：[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)。
现在，您可以在要访问数据库的每个 Activity 中创建该数据库帮助程序类的实例。你也许可以考虑尝试一个[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)实例。所以你总是检索相同的帮助程序实例。

编辑：检索始终相同数据库的关键是，始终在 SQLiteOpenHelper 类的构造函数中使用相同的数据库名称。

# google-maps - 我可以在嵌入地图时显示 Google 地图描述吗？

> ID：10463478
> 
> 赞同：0
> 
> 时间：2012-05-05T15:52:23.727
> 
> 标签：google-maps, google-maps-api-3

我正在开展一个项目，我们正在使用[现有的 Google 地图](http://maps.google.com/maps/ms?msa=0&msid=200982308931784589810.000494b659528123b822c&ie=UTF8&t=m&source=embed&ll=43.199244,-70.904925&spn=0.04289,0.056262)并将其嵌入[到我们的页面](http://dovertrail.wp.lamp.mandiasconsulting.com/maps/)中。我们想做的是将地图描述拉入页面并将其放入 div 中 - 但我们无法找到如何通过 API 访问地图描述。（你能猜到我是谷歌地图的新手吗？）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:33:34.160

描述是地图 KML 提要的一部分。您可以在服务器上以 xml 形式检索 KML 提要，也可以将其与 google feed api 之类的服务相结合，以在 javascript 中检索结果。

# image-processing - 寻找图像中最“有趣”部分的性能合理的算法是什么？

> ID：10463480
> 
> 赞同：5
> 
> 时间：2012-05-05T15:52:36.970
> 
> 标签：image-processing

我已经实现了[这里](http://petersobot.com/blog/a-use-for-smartphone-photos/)描述的算法来突出照片中最有趣的部分，但它的性能不是很好，而且我不确定它是否能像其他人那样做得好。我想尝试实现一个更好的，但我实际上并不知道足够的图像处理来开始。

坦率地说，我什至不知道要问什么问题。

所以，我在这里寻找的是一个很好的算法，当提供 jpg 图像时，它会找到该图像的一个区域，它是……图像的一个亮点，如果不是*亮点*，理想情况下是在最少的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:16:23.407

这通常被称为显着区域检测。有很多方法可以做到这一点，因为显着性在某种程度上是客观的，并且主要取决于应用程序。通过谷歌搜索，您应该能够找到许多方法。如果您提供示例图像，也许这里有人可以提供更详细的建议。希望有帮助。

颜色通常可以很好地提示检测显着部分。另一种常用的方法是依靠图像梯度。这可能是两种最通用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:28:55.173

You could also have a look at content aware cropping, or [seam carving](http://en.wikipedia.org/wiki/Seam_carving), for those algorithms do the inverse. They try to discard irrelevant or redundant visual content.

# python - Django Url 错误：int() 以 10 为底的无效文字：'tony'

> ID：10463487
> 
> 赞同：0
> 
> 时间：2012-05-05T15:53:10.410
> 
> 标签：python, regex, django, django-views, django-urls

我正在使用用户创建一个小 Django 应用程序，并且我创建了自己的 UserProfile 模型。但是我的网址有一些问题（至少我认为）。我认为我使用的正则表达式是错误的。一探究竟：

我得到的错误：

```
ValueError at /usr/tony/

invalid literal for int() with base 10: 'tony' 
```

我的网址：

```
url(r'^usr/(?P<username>\w+)/$', 'photocomp.apps.users.views.Userprofile'), 
```

我的观点：

```
from django.shortcuts import render_to_response, get_object_or_404
from django.template import RequestContext
from django.contrib import auth
from django.http import HttpResponseRedirect
from photocomp.apps.users.models import UserProfile

def Userprofile(request, username):
    rc = context_instance=RequestContext(request)
    u = UserProfile.objects.get(user=username)
    return render_to_response("users/UserProfile.html",{'user':u},rc) 
```

这是我的模型：

```
from django.db import models
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    first_name = models.CharField(max_length="30", blank=True)
    last_name = models.CharField(max_length="30", blank=True)
    email = models.EmailField(blank=True)
    country = models.CharField(blank=True,max_length="30")
    date_of_birth = models.DateField(null=True)
    avatar = models.ImageField(null=True, upload_to="/avatar") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:10:26.263

```
u = UserProfile.objects.get(user__username=username) 
```

It looks like you are searching for the username attribute of user. Foreign keys are spanned in django by double underscores.

[https://docs.djangoproject.com/en/dev/topics/auth/](https://docs.djangoproject.com/en/dev/topics/auth/)

[https://docs.djangoproject.com/en/dev/topics/db/queries/](https://docs.djangoproject.com/en/dev/topics/db/queries/)

Also `.get()` will throw a `DoesNotExist` exception it is advisable to wrap the query in try: except block so that it doesn't 500 on the user. [https://docs.djangoproject.com/en/1.2/ref/exceptions/#objectdoesnotexist-and-doesnotexist](https://docs.djangoproject.com/en/1.2/ref/exceptions/#objectdoesnotexist-and-doesnotexist)

```
def Userprofile(request, username):
    rc = context_instance=RequestContext(request)
    try:
      u = UserProfile.objects.get(user__username=username)
    except UserProfile.DoesNotExist:
      # maybe render an error page?? or an error message at least to the user
      # that the account doesn't exist for that username?
    return render_to_response("users/UserProfile.html",{'user':u},rc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:32:44.417

要获得更简洁的代码，请改用[get_object_or 404](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#get-object-or-404)：

```
from django.shortcuts import get_object_or_404

def Userprofile(request):
    u = get_object_or_404(UserProfile, pk=1) 
```

另外，为了清楚起见，我建议不要给您的视图和类使用相同的名称。我会把这个函数称为类似的东西`profile_detail`。但这只是一个家务细节。

# javascript - jQuery html在刷新时消失

> ID：10463489
> 
> 赞同：0
> 
> 时间：2012-05-05T15:53:17.663
> 
> 标签：javascript, jquery, html, refresh

我正在用jQuery`<div>`的方法修改一个空的。`.html()`当我刷新页面时，添加的代码消失了。

```
$('#div').html($('#div').html() + '<div>'+obj.name+'&nbsp;<a href="">(x)</a>'); 
```

是否可以改变行为或使用其他方法？

谢谢

编辑：

校准我的问题

> 也许这是一个设计错误。它是一个带有一些字段的表单和用户可以上传文件的第二个表单，在上传文件后，我在 div 中添加文件名和删除链接。如果用户提交表单，程序会连接创建的对象和文件。它实际上并不是任何人都需要刷新的页面，但它可能会发生，然后文件会保存在数据库中，但信息会丢失以将其与表单对象连接起来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:58:22.740

当然，每当您重新加载页面时，所有元素都会恢复到原始状态（从服务器加载）。但是有一些方法可以解决这个问题。

*   使用 cookie
*   使用 HTML 本地存储

您必须了解客户端脚本的工作原理。修改发生在客户端系统上，而不是服务器上，脚本将从那里加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:59:46.713

你应该创建一个函数：

```
function doMyStuff(){    
     //your code here    
}
doMyStuff();   // that will be triggered on DOM ready // page refresh, whateva'

$('#element').on('click',function(){
    doMyStuff(); // you call your function on click
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:09:42.050

我真的不明白你在这里做什么，但你可以把你想要的链接放在 HTML 页面本身的 #div pa 中。然后，如果您想在用户单击按钮时更改该行代码，您可以使用 CSS 来实现。

具体来说，像这样：

```
<div>
  <p><a id="example" href="www.example.com">Example</a></p>
</div> 
```

如果说，用户点击一个按钮（onClick（）...）

```
$('div p a#example').html(//what you want to do here); 
```

那可能应该更改代码。

这样，您的浏览器不会在您等待客户端先进行操作时在 HTML 本身中显示空白点。

# testing - ActiveMQ 的测试用例

> ID：10463492
> 
> 赞同：1
> 
> 时间：2012-05-05T15:53:28.897
> 
> 标签：testing, jakarta-ee, junit, jms, activemq

我想知道如何根据建议使用 ActiveMQ 进行测试[模拟 JMS - jUnit的答案使用 ActiveMQ 测试 JMS](https://stackoverflow.com/questions/5217315/simultating-jms-junit)

但是，我没有从 MessageConsumer 收到我期望的消息。如果我使用接收它只是挂在那里。

这是我的代码

```
import javax.jms.Connection;
import javax.jms.ConnectionFactory;
import javax.jms.MessageConsumer;
import javax.jms.MessageProducer;
import javax.jms.Queue;
import javax.jms.Session;
import javax.jms.TextMessage;

import org.apache.activemq.ActiveMQConnectionFactory;
import org.junit.Assert;
import org.junit.Test;

public class JmsTest {
@Test
public void test() throws Exception {
    final ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(
            "vm://localhost?broker.persistent=true");
    final Queue queue;
    final Connection connection = connectionFactory.createConnection();
    final Session session = connection.createSession(true,
            Session.AUTO_ACKNOWLEDGE);
    {
        queue = session.createQueue("test");
    }
    {
        final MessageProducer producer = session.createProducer(queue);
        final TextMessage message = session.createTextMessage("testing");
        producer.send(message);
    }
    {
        final MessageConsumer consumer = session.createConsumer(queue);
        final TextMessage message = (TextMessage) consumer.receiveNoWait();
        // "message" is null at this point
        Assert.assertEquals("testing", message.getText());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T21:47:14.320

谢谢蒂姆，我们几乎在同一时间找到了它，但我必须进行一些其他修改，正如我在评论中指定的那样。简而言之，我必须确保“事务”属性为“假”，正如 Tim 所说，我必须进行 connection.start() 调用。

```
@Test
public void test() throws Exception {
    final ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(
            "vm://localhost?broker.persistent=false");

    final Connection connection = connectionFactory.createConnection();
    connection.start();
    final Session session = connection.createSession(false,
            Session.AUTO_ACKNOWLEDGE);
    final Queue queue = session.createTemporaryQueue();
    {
        final MessageProducer producer = session.createProducer(queue);
        final TextMessage message = session.createTextMessage("testing");
        producer.send(message);
    }
    {
        final MessageConsumer consumer = session.createConsumer(queue);
        final TextMessage message = (TextMessage) consumer.receiveNoWait();
        Assert.assertNotNull(message);
        Assert.assertEquals("testing", message.getText());
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T20:38:00.483

在您收到消息之前，您需要调用 connection.start() 否则不会向消费者发送任何消息。此外，您的代码不应假设 receiveNoWait 将始终返回一条消息，因为消息出列并路由到消费者可能需要很短的时间，因此尝试在那里重试或使用调用的定时接收（）可能是合适的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-24T13:51:20.690

使用主题看起来像这样：

```
 final ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(url);
        final javax.jms.Connection connection = connectionFactory.createConnection();
        connection.setClientID("12345");
        connection.start();

        final Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
        final Topic temporaryTopic = session.createTemporaryTopic();

        final MessageConsumer consumer1 = session.createConsumer(temporaryTopic);

        final MessageProducer producer = session.createProducer(temporaryTopic);
        producer.send(session.createTextMessage("Testmessage"));

        final TextMessage message = (TextMessage)consumer1.receiveNoWait();

        Assert.assertNotNull(message);
        Assert.assertEquals("testing", message.getText()); 
```

# java - javax.swing.JCheckBox setSelected 未从 GUI 调用

> ID：10463493
> 
> 赞同：0
> 
> 时间：2012-05-05T15:53:35.420
> 
> 标签：java, swing, overriding, jcheckbox

我正在尝试扩展一些 Swing 组件并覆盖与其状态交互的方法（JComboBox 的 setSelectedIndex、JCheckBox 的 setSelected 等）。JCheckBox 有问题。我已经覆盖了 setSelected 方法，但是当用户通过 UI 更改 JCheckBox 状态时它似乎没有调用。我可以通过调用方法来更改 JCheckBox 状态，但似乎 GUI 使用另一种方式来更改它的状态。我怎样才能在课堂上捕捉到该事件？对于其他类的 Swing，一切都很好，所有被覆盖的方法都可以正常工作。

```
public class MyCheckBox extends JCheckBox {
    @Override
    public void setSelected(boolean selected) {
        //Method is not performed when MyCheckBox is clicked
        super.setSelected(selected);
    }
} 
```

UP.：我已经制作了支持“撤消/重做”操作的组件包。我刚刚向所有组件添加了 addUndoableEditListener(UndoableEditListener l) 方法，因此实现隐藏在我的组件中。这就是我扩展 Swing 组件而不是使用动作侦听器的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:08:54.070

如果您只想收听此更改 - 使用 ItemListener （它甚至会收听由 ButtonGroup 更改或 setSelected 方法调用产生的事件）：

```
checkBox.addItemListener ( new ItemListener ()
{
    public void itemStateChanged ( ItemEvent e )
    {
        System.out.println (isSelected ());
    }
} ); 
```

如果您只想从“UI”接收更改，或者添加一个 ActionListener。

但是，如果您真的想知道复选框如何从“UI”更改状态...

JCheckBox 只不过是一个简单的按钮，每个状态都有适当的图标，所以我们应该看到 JButton 事件

在 JButton 类中听鼠标没有任何意义——它隐藏在当前的 ButtonUI 中

在 BasicButtonUI 类中，您可以找到添加到其中的侦听器：

```
protected void installListeners(AbstractButton b) {
    BasicButtonListener listener = createButtonListener(b);
    if(listener != null) {
        b.addMouseListener(listener);
        b.addMouseMotionListener(listener);
        b.addFocusListener(listener);
        b.addPropertyChangeListener(listener);
        b.addChangeListener(listener);
    }
} 
```

在鼠标释放时的 BasicButtonListener 中：

```
public void mouseReleased(MouseEvent e) {
if (SwingUtilities.isLeftMouseButton(e)) {
    // Support for multiClickThreshhold
        if (shouldDiscardRelease) {
        shouldDiscardRelease = false;
        return;
    }
    AbstractButton b = (AbstractButton) e.getSource();
    ButtonModel model = b.getModel();
    model.setPressed(false);
    model.setArmed(false);
    }
} 
```

因此该事件被发送到按钮内部的 ButtonModel 集。要捕获它，您必须将按钮内的 ButtonModel 替换为您自己的：

```
check.setModel ( new DefaultButtonModel ()
{
    public void setSelected ( boolean b )
    {
        super.setSelected ( b );
    }
} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:07:08.657

您需要在复选框中[添加](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#addActionListener%28java.awt.event.ActionListener%29)一个。[`ActionListener`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T16:09:14.600

尽管所有评论都是相关的，并且可能不需要扩展这些组件，但我做了一个快速测试以确定单击按钮时遵循的代码路径（只是出于好奇）。下面的一段代码

```
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JToggleButton;
import java.awt.EventQueue;

public class JCheckBoxTest {

  private static JCheckBox createCheckBox(){
    JCheckBox checkBox = new JCheckBox();
    checkBox.setModel( new JToggleButton.ToggleButtonModel(){
      @Override
      public void setSelected( boolean b ) {
        Thread.dumpStack();
        super.setSelected( b );
      }
    });
    return checkBox;
  }

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame testFrame = new JFrame( "TestFrame" );
        testFrame.add( createCheckBox() );
        testFrame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        testFrame.pack();
        testFrame.setVisible( true );
      }
    } );
  }
} 
```

允许在更改按钮后面的模型的选定状态时确定堆栈跟踪。堆栈跟踪显示以下相关部分

```
at JCheckBoxTest$1.setSelected(JCheckBoxTest.java:19)
at javax.swing.JToggleButton$ToggleButtonModel.setPressed(JToggleButton.java:289)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321) 
```

所以基本上听众直接与按钮模型交互。

# python - 使用 python 登录 Google Appengine

> ID：10463495
> 
> 赞同：0
> 
> 时间：2012-05-05T15:54:15.997
> 
> 标签：python, cookies, urllib2

使用 Python 和 urllib2 登录 Google Appengine 我从[https://www.google.com/accounts/ClientLogin](https://www.google.com/accounts/ClientLogin)获得了 Auth 和 Sid 但后来我添加了标题，却发现我没有登录。

这是我的代码（我是一个新的python用户，代码会很糟糕..）：

```
LOGIN_URL = 'https://www.google.com/accounts/ClientLogin'
EMAIL = 'XXXXX@gmail.com'
PASSWORD = 'XXXXX'
print "Your Google account:"
print EMAIL
print "Logging in..."
arequest = urllib2.Request(LOGIN_URL, urlencode({
    'service': 'ah',
    'Email': EMAIL,
    'Passwd': PASSWORD,
}))

f = urllib2.urlopen(arequest)
lines = f.read().split()
auth = lines[2][5:]
sid = lines[0][4:]
print "Google Logged in"
#print auth and sid,and you will find the code above is right
brequest = urllib2.Request("https://appengine.google.com")
brequest.add_header('User-Agent', 'Here is Chrome's UA')
brequest.add_header('Content-Type', 'application/x-www-form-urlencoded')
brequest.add_header('Authorization', 'GoogleLogin auth=' + auth)
brequest.add_header('Cookie', 'SID=' + sid)
brequest.add_header('Referer', 'https://appengine.google.com/start') 
print "Opening with Auth info..."
bresponse = urllib2.urlopen(brequest)
print bresponse.read()
#The output shows that I haven't logged in. 
```

我在firefox中使用firebug查看头信息，cookie不只是上面的sid。我该怎么办？接下来的表演需要登录（我还没写），我该怎么写？它是在我的笔记本电脑上午餐的，所以我不使用 urlfetch 之类的 appengieg 的库。非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:59:27.390

我认为这`SID`不是您需要发送的唯一 cookie，并且`Authorization`不应将标头发送给她。

您应该使用 a`CookieJar`来`HttpCookieProcessor`管理您的 cookie，而不是手动进行。[这里的例子](http://docs.python.org/library/cookielib.html#examples)

# awk - 通过 awk 获得三个最高的网站访问者

> ID：10463499
> 
> 赞同：3
> 
> 时间：2012-05-05T15:55:13.373
> 
> 标签：awk

因此，我正在尝试制作一个 awk 脚本，该脚本按最高三个的顺序确定最多的命中。我这样做是基于一个看起来像的 apache web 日志

```
192.168.198.92 - - [22/Dec/2002:23:08:37 -0400] "GET    / HTTP/1.1" 200 6394 www.yahoo.com    "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1...)" "-"
192.168.198.92 - - [22/Dec/2002:23:08:38 -0400] "GET    /images/logo.gif HTTP/1.1" 200 807 www.yahoo.com    "http://www.some.com/" "Mozilla/4.0 (compatible; MSIE 6...)" "-"
192.168.72.177 - - [22/Dec/2002:23:32:14 -0400] "GET    /news/sports.html HTTP/1.1" 200 3500 www.yahoo.com    "http://www.some.com/" "Mozilla/4.0 (compatible; MSIE ...)" "-"
192.168.72.177 - - [22/Dec/2002:23:32:14 -0400] "GET    /favicon.ico HTTP/1.1" 404 1997 www.yahoo.com    "-" "Mozilla/5.0 (Windows; U; Windows NT 5.1; rv:1.7.3)..." "-"
192.168.72.177 - - [22/Dec/2002:23:32:15 -0400] "GET    /style.css HTTP/1.1" 200 4138 www.yahoo.com    "http://www.yahoo.com/index.html" "Mozilla/5.0 (Windows..." "-"
192.168.72.177 - - [22/Dec/2002:23:32:16 -0400] "GET    /js/ads.js HTTP/1.1" 200 10229 www.yahoo.com    "http://www.search.com/index.html" "Mozilla/5.0 (Windows..." "-"
192.168.72.177 - - [22/Dec/2002:23:32:19 -0400] "GET    /search.php HTTP/1.1" 400 1997 www.yahoo.com    "-" "Mozilla/4.0 JJohnJoJJJJJoJJoJJJJJoJJohJJJJJJJJJJJJohnJohJoJoJJJoJJ 
```

为此，我这样做：

```
$1 ~ /[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/ {
hitCounter[$1]++
notIndexed=1
for(i in ips) {
if (i==$1) { notIndexed=0 }
}
if(notIndexed==1) {
ips[indexx]=$1
indexx++
}
} 
```

此行检测 IP，然后在由 IP 索引的“hitCounter”数组中增加它的命中计数。之后，我检查 ips 列表“ips”，看看命中的 IP 是否已经在其中。如果不是，则将 IP 添加到“ips”数组中，并且索引计数增加一。理论上，通过这样做，“ips”中的每个索引都应该与“hitCounter”中的索引相关。最后我有...

```
END {

indexxx=0
for (i in hitCounter) {
if (i>hitCounter[firstIP])
    firstIP=ips[indexxx]
else if (i>hitCounter[secondIP])
    secondIP=ips[indexxx]
else
    thirdIP=ips[indexxx]

indexxx++
}

} 
```

在这里，我检查了“hitCounter”中的 IP 命中计数，将它们与三个高命中变量中的命中进行比较，如果 IP 命中大于三个高命中变量内容之一，我将其设置为当前IP。

这似乎对我有用，我应该得到“192.168.72.177 192.168.198.92”作为输出，但我得到的是“192.168.198.92 192.168.198.92”。

为什么？

编辑：对不起，这就是我打印放置在“hitCounter”foreach循环之后的最终结果的方式......

```
print "The most hits were from "firstIP" "secondIP" "thirdIP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:07:33.533

我不会每次都搜索 IP 以查看它是否存在于 IP 地址列表中，而是这样做：

```
$1 ~ /[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/ {
    hitCounter[$1]++
}

END {

    for (ip in hitCounter) {
        if (hitCounter[ip] > hitCounter[firstIP])
            thirdIP = secondIP
            secondIP = thirdIP
            firstIP = ip
        else if (hitCounter[ip] > hitCounter[secondIP])
            thirdIP = secondIP
            secondIP = ip
        else
            thirdIP = ip

    }

} 
```

我认为您的部分困惑在于认为这`i`是价值而不是`for (i in hitCounter)`.

# html - 具有被 Google 索引的非常规 URL 的动态 PHP 页面？

> ID：10463502
> 
> 赞同：1
> 
> 时间：2012-05-05T15:55:29.223
> 
> 标签：html, url

我最近设计了一个网页，并试图在谷歌上引用每个单独的页面。问题是，我的网站上真的没有任何实际页面（这听起来很傻，我知道）。这是网站：[Can of Clouds](http://canofclouds.com/thought/)，如果您可以快速浏览一下。

当用户加载页面时，会在 url 的末尾放置一个随机散列键。然后，使用 ajax 调用，该键的问题从数据库加载到框中。所以我想要做的是让每一页（例如.../thought/#1、.../thought/#2、.../thought/#3、...）都在 Google 上编入索引。我认为第一步是为每个问题创建一个永久链接。这是我应该做的吗？如果是这样，最好的方法是什么？如果没有，让谷歌索引每个问题的最简单方法是什么。

谢谢，任何提示将不胜感激。

# php - 如何在特定单词之后从字符串中获取子字符串

> ID：10463507
> 
> 赞同：1
> 
> 时间：2012-05-05T15:55:58.357
> 
> 标签：php, substring

我正在寻找从字符串中获取子字符串：解释这一点的最佳方法是使用以下示例：

```
$string = 'locations?city=London';
if (strpos($string,'city=') !== false) 
{
   // now here I need something to get London in a string
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T16:11:15.260

```
parse_str( parse_url( 'locations?city=London', PHP_URL_QUERY ), $params );

print_r( $params );

// outputs: Array ( [city] => London ) 

echo $params['city'];

// outputs London 
```

# php - PHP：将图片 - 仅链接 - 发布到 Facebook 墙上

> ID：10463510
> 
> 赞同：0
> 
> 时间：2012-05-05T15:56:28.693
> 
> 标签：php, facebook, image, facebook-wall

我正在尝试使用 PHP 在 Facebook 墙上发帖。我找到了这段代码：

```
$args = array(
    'message' => $text,
    'picture' => $link2picture
);

$this->_facebook->api('/me/feed/', 'post', $args); 
```

但它似乎不起作用（它只显示消息文本）。所以我的问题是，有没有办法只发布图片，将其链接到页面？我试图避免将照片上传到 Facebook，而且我不想使用显示与左侧对齐的小图片的标准“共享链接”；我的想法只是显示图像缩略图，可能是图像之前或之后的描述，当用户单击该图像时，他将被重定向到给定页面。这可以做到吗？如何？

编辑：我也试过这段代码，但没有成功：

```
$attachment = array(
'name' => $title,
'caption' => 'The subtitle',
'description' => $message,
'media' => array(array(
    'type' => 'image',
    'src' => $file_path,
    'href' => $link
))
);
$this->facebook->api(array('method' => 'stream.publish', 'target_id' => $this->getUser(), 'attachment' => $attachment)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:27:38.533

试试这个：

```
$attachment = array('message' => $message, 'access_token' => $token, 'picture' => $picture_path);

$result = $facebook->api('/me/feed', 'post', $attachment);

```

享受 ：）

# ruby-on-rails - 数组元素的排列，作为 MongoID 查询中的查询条件

> ID：10463515
> 
> 赞同：1
> 
> 时间：2012-05-05T15:57:32.483
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我有一个“[嵌入式一对多](http://mongoid.org/docs/relations/embedded/1-n.html)”模型，如下所示：

```
class User
  include Mongoid::Document

  field :nickname
  embeds_many :watchlists
end

class Watchlist
 include Mongoid::Document

 field :html_url
 field :description
 field :tags_array, type: Array
 embedded_in :user
end 
```

以及用于查询的“[标准](http://mongoid.org/docs/querying/criteria.html)”，如下所示：

```
User.where('watchlists.tags_array' => %w[ruby web framework]) 
```

问题是它只匹配“watchlists.tags_array”呈现的“精确”单词序列，而我希望它匹配“ruby”、“web”和“framework”的所有排列。

前任。：

在数组的情况下：%w[ruby web framework]，我需要匹配以下所有排列：

```
ruby web framework
ruby framework web

framework web ruby 
framework ruby web

web framework ruby
web ruby framework 
```

那可能吗 ？我怎样才能做到这一点 ？

更新：

查询有点复杂（我试图简化），它是一种嵌套的提取和排列，不适用于我的解决方案，也不适用于 Sergio Tulentsev 解决方案。在这两种情况下，它只匹配确切的数组：

```
 Object.const_set :Competitor, Struct.new(:html_url, :description, :watchers, :forks)
  def self.find_competitors(tags_array)
    competitors = []
    # doesn't work:  User.where('watchlists.tags_array' => tags_array).only(:watchlists).each do |u|
    User.all_in('watchlists.tags_array' => tags_array).only(:watchlists).each do |u|
      u.watchlists.where(:tags_array => tags_array).each do |wl|
        competitors << Competitor.new(wl.html_url, wl.description, wl.watchers, wl.forks)
      end
    end
    return competitors
  end 
```

更新：

我只是想念，相同的“ [all_in 标准](http://mongoid.org/docs/querying/criteria.html#all_in)”也进入内部循环......并且排列也很好：

```
User.all_in('watchlists.tags_array' => tags_array).only(:watchlists).each do |u|
  u.watchlists.all_in(:tags_array => tags_array).each do |wl|
    competitors << Competitor.new(wl.html_url, wl.description, wl.watchers, wl.forks)
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:05:59.290

我想你正在寻找`$all`运营商

```
db.users.find({'watchlists.tags_array': { $all: ['ruby', 'web', 'framework']}}); 
```

在[Mongoid 语言](http://mongoid.org/docs/querying/criteria.html#all_in)中应该是这样的：

```
User.all_in('watchlists.tags_array' => %w[ruby web framework]) 
```

# .net - Thread.Sleep 是否会停用 TCPListener？

> ID：10463517
> 
> 赞同：1
> 
> 时间：2012-05-05T15:58:00.020
> 
> 标签：.net, vb.net, multithreading, tcp, tcplistener

我有一个这样的线程：

```
 Public Sub StartWork()
        Try
            myTCPListener.Start()
            While StopRequest = False
                Dim requestspending As Boolean = m_TCPListener.Pending()
                If myTCPListener.Pending = False Then
                    Threading.Thread.Sleep(100)
                Else
                   DoSomething()
                End If

            End While
        Catch ex As Exception
            Throw ex
        End Try
    End Sub 
```

现在我的问题是：当这里什么都没有发生时，我通过 Thread.Sleep 将 Thread 发送到睡眠模式。这是否会以某种方式影响 TCPListener 在他的工作中以及当线程处于睡眠模式时传入连接会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:08:43.587

当您的线程处于睡眠状态时，它无法执行任何操作。特别是它将无法接受连接。因此，连接到您的客户端将不得不等待 100 毫秒，直到连接建立（当您调用 Accept 和 Accept 返回时连接建立）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:11:23.373

侦听 TCP 连接并为其提供服务是一种标准设计模式。有一种比代码中更好的方法。在有连接请求之前使用`TcpListener.AcceptTcpClient()`which 块，当发生连接请求时，它会返回`TcpClient`，您可以使用它来为客户端提供服务。即使`AcceptTcpClinet()`是阻塞调用（在有请求之前不会返回），它也不会使用 CPU 时间。由于这正是您在代码中所做的（在有请求之前什么都不做），它将完成您想要的工作。

通常你应该避免`Thread.Sleep()`，因为它不是放弃 CPU 时间的最好方法。您应该使用专门的侦听方法`AcceptTcpClinet()`，例如计时器、异步调用`WaitHandle`等`Thread.Join()`。做起来要困难得多，有时也不值得，但这应该是你的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:24:38.113

```
Dim connection As Socket
Dim reader As BinaryReader
Dim writer As BinaryWriter
Dim socketStream As NetworkStream
Dim listener As TcpListener

Dim ip As IPAddress = IPAddress.Parse(ipstring)
listener = New TcpListener(ip, portnumber)
listener.Start()

connection = listener.AcceptSocket()
socketStream = New NetworkStream(connection)
writer = New BinaryWriter(socketStream)
reader = New BinaryReader(socketStream) 
```

这是处理传入连接的有效方法:-)，您不必让任何东西进入睡眠状态。如果性能是一个问题，请降低线程的优先级。前任：

```
serverthread.Priority = ThreadPriority.BelowNormal 
```

# javascript - 在 Javascript 中将 em 转换为 px（并获取默认字体大小）

> ID：10463518
> 
> 赞同：69
> 
> 时间：2012-05-05T15:58:22.347
> 
> 标签：javascript, css, events, dom

在某些情况下，获得`em`测量的准确像素宽度可能很有用。例如，假设您有一个元素具有以 em 为单位测量的 CSS 属性（如边框或填充），并且您需要获取边框或填充的确切像素宽度。有一个涉及此主题的现有问题：

[如何使用 JavaScript 或 JQuery 获取以像素为单位的默认字体大小？](https://stackoverflow.com/questions/1442542/how-can-i-get-default-font-size-in-pixels-by-using-javascript-or-jquery)

这个问题询问有关获取*默认字体大小*的问题- 这是将相对`em`值转换为精确`px`值所必需的。

[这个答案](https://stackoverflow.com/a/4530334/168288)很好地解释了如何获取元素的默认字体大小：

> 由于 ems 测量宽度，您始终可以通过创建一个 1000 ems 长的 div 并将其 client-Width 属性除以 1000 来计算确切的像素字体大小。我似乎记得 ems 被截断到最接近的千分之一，所以你需要 1000 ems避免错误截断像素结果。

因此，以这个答案为指导，我编写了以下函数来获取默认字体大小：

```
function getDefaultFontSize(parentElement)
{
    parentElement = parentElement || document.body;
    var div = document.createElement('div');
    div.style.width = "1000em";
    parentElement.appendChild(div);
    var pixels = div.offsetWidth / 1000;
    parentElement.removeChild(div);
    return pixels;
} 
```

获得默认字体大小后，只需将 em 乘以元素的默认字体大小并将结果四舍五入，即可将任何`em`宽度转换为宽度：`px`

`Math.round(ems * getDefaultFontSize(element.parentNode))`

**问题：**理想情况下，`getDefaultFontSize`它应该是一个简单、无副作用的函数，它返回默认字体大小。但它*确实*有一个不幸的副作用：它修改了 DOM！它附加一个孩子，然后删除孩子。为了获得有效的`offsetWidth`属性，附加孩子是必要的。如果您不将子元素附加`div`到 DOM，则该`offsetWidth`属性将保持为 0，因为该元素永远不会被渲染。即使我们立即删除子元素，此函数仍会产生意想不到的副作用，例如触发正在侦听父元素的事件（如 Internet Explorer`onpropertychange`或 W3C 的`DOMSubtreeModified`事件）。

**问题：**有没有办法编写一个真正无副作用的`getDefaultFontSize()`函数，不会意外触发事件处理程序或导致其他意外副作用？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-05T21:05:06.380

**编辑：不，没有。**

在不影响 DOM 的情况下获取给定元素的渲染字体大小：

```
parseFloat(getComputedStyle(parentElement).fontSize); 
```

这是基于[这个问题](https://stackoverflow.com/questions/4571813/why-is-this-javascript-function-so-slow-on-firefox)的答案。

* * *

**编辑：**

在 IE 中，您必须使用`parentElement.currentStyle["fontSize"]`，但这不能保证将大小转换为`px`. 所以就这样了。

此外，这个片段不会为您提供元素的默认字体大小，而是它的*实际*字体大小，如果它实际上有一个与之关联的类和样式，这一点很重要。换句话说，如果元素的字体大小为`2em`，您将获得 2 em 中的像素数。除非内联指定字体大小，否则您将无法获得正确的转换率。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-03T12:57:42.070

我有更好的答案。`1em`我的代码将在 JavaScript 变量中存储(以 CSS 像素`px`为单位)的长度`em`：

1.  将它`div`放在 HTML 代码中的任何位置

    ```
    <div id="div" style="height:0;width:0;outline:none;border:none;padding:none;margin:none;box-sizing:content-box;"></div> 
    ```

2.  将此函数放在您的 JavaScript 文件中

    ```
    var em;
    function getValue(id){
        var div = document.getElementById(id);
        div.style.height = '1em';
        return ( em = div.offsetHeight );
    } 
    ```

现在，每当您`'getValue'`在参数中使用该测试 div 的 id 调用此函数时，您将拥有一个变量名称`em`，其中包含 1 em 的值（以 px 为单位）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T21:40:08.013

如果您需要一些快速而肮脏的东西（并且基于主体的基本字体大小，而不是元素），我会选择：

```
Number(getComputedStyle(document.body,null).fontSize.replace(/[^\d]/g, ''))

 Number(  // Casts numeric strings to number
   getComputedStyle(  // takes element and returns CSSStyleDeclaration object
     document.body,null) // use document.body to get first "styled" element
         .fontSize  // get fontSize property
          .replace(/[^\d]/g, '')  // simple regex that will strip out non-numbers
 ) // returns number 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-27T10:49:07.643

以下解决方案使用二分搜索和 window.matchMedia 来找出窗口的 em 宽度。然后我们将窗口 em 宽度除以窗口像素宽度得到最终结果。不涉及 DOM，无副作用！在性能方面，我的 comp 大约需要 8 次迭代，大约 0.2 毫秒。

```
const singleEmInPixels = getSingleEmInPixels();
console.log(`1em = ${singleEmInPixels}px`);

/**
 * returns the amount of pixels for a single em
 */
function getSingleEmInPixels() {
    let low = 0;
    let high = 200;
    let emWidth = Math.round((high - low) / 2) + low;
    const time = performance.now();
    let iters = 0;
    const maxIters = 10;
    while (high - low > 1) {
        const match = window.matchMedia(`(min-width: ${emWidth}em)`).matches;
        iters += 1;
        if (match) {
            low = emWidth;
        } else {
            high = emWidth;
        }
        emWidth = Math.round((high - low) / 2) + low;
        if (iters > maxIters) {
            console.warn(`max iterations reached ${iters}`);
            break;
        }
    }
    const singleEmPx = Math.ceil(window.innerWidth / emWidth);
    console.log(`window em width = ${emWidth}, time elapsed =  ${(performance.now() - time)}ms`);
    return singleEmPx;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-01T18:47:05.600

我需要 em 大小，这就是我着陆的地方。我受到@10011101111 的解决方案的启发，编写了这个通用解决方案。请注意，这可能不一定没有 OP 要求的副作用，但可以对其进行调整以具有最小的副作用。

该解决方案适用于那些与我有相同问题的人。

要获得全像素结果：

```
function getSize(size = '1em', parent = document.body) {
    let l = document.createElement('div')
    l.style.visibility = 'hidden'
    l.style.boxSize = 'content-box'
    l.style.position = 'absolute'
    l.style.maxHeight = 'none'
    l.style.height = size
    parent.appendChild(l)
    size = l.clientHeight
    l.remove()
    return size
} 
```

要获得更精确的结果：

```
function getSizePrecise(size = '1em', parent = document.body) {
    let l = document.createElement('div'), i = 1, s, t
    l.style.visibility = 'hidden'
    l.style.boxSize = 'content-box'
    l.style.position = 'absolute'
    l.style.maxHeight = 'none'
    l.style.height = size
    parent.appendChild(l)
    t = l.clientHeight
    do {
        s = t
        i *= 10
        l.style.height = 'calc(' + i + '*' + size + ')'
        t = l.clientHeight
    } while(t !== s * 10)
    l.remove()
    return t / i
} 
```

请注意，您可以传入任何大小的任何单位。例如：

```
getSizePrecise('1ex')
getSizePrecise('1.111ex') 
```

您也可以通过删除`calc()`函数并将除单位以外的大小值直接乘以 JavaScript 中的乘数来适应 CSS < 3 的兼容性。

如果值溢出，这可能会返回 0。

在试图找出溢出限制时，我在 Firefox 88.0 上达到了 17895696 或 17895697 的像素值。因此，我将上述函数更新如下：

```
function getSizePrecise(size = '1em', parent = document.body) {
    let l = document.createElement('div'), i = 1, s, t
    l.style.visibility = 'hidden'
    l.style.boxSize = 'content-box'
    l.style.position = 'absolute'
    l.style.maxHeight = 'none'
    l.style.height = size
    parent.appendChild(l)
    t = l.clientHeight
    do {
        if (t > 1789569.6)
            break
        s = t
        i *= 10
        l.style.height = 'calc(' + i + '*' + size + ')'
        t = l.clientHeight
    } while(t !== s * 10)
    l.remove()
    return t / i
} 
```

.6 严格来说不是必需的（因为 t 可能是一个完整的值），但我将它留在那里以供参考。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-10T13:57:38.050

以下 JS 函数将任何 CSS 长度单位值转换为另一个。
干杯!

```
// Usage examples: convertCSSLengthUnit('26.556016597510375mm'); convertCSSLengthUnit('26.556016597510375mm', 'px'); convertCSSLengthUnit('100px', 'mm');
function convertCSSLengthUnit(fromUnitValue, toUnit){
  let value = fromUnitValue.match(/[0-9]+\.*[0-9]*/g)[0];
  let unit = fromUnitValue.match(/[a-zA-Z]+/g)[0];

  let frag = document.createRange().createContextualFragment(`
    <div style='all: initial; pointer-events: none; display: block; position: absolute; border: none; padding: 0; margin: 0; background: rgba(0,0,0,0); color: color: rgba(0,0,0,0); width: 1${unit}; height: 1px;'></div>
  `);
  document.body.appendChild(frag);
  let measureElement = document.body.children[document.body.children.length-1];
  let toUnitValuePixel = measureElement.getBoundingClientRect().width * value; // X
  measureElement.remove();

  if(toUnit){
    let frag = document.createRange().createContextualFragment(`
      <div style='all: initial; pointer-events: none; display: block; position: absolute; border: none; padding: 0; margin: 0; background: rgba(0,0,0,0); color: color: rgba(0,0,0,0); width: 1${toUnit}; height: 1px;'></div>
    `);
    document.body.appendChild(frag);
    let measureElement = document.body.children[document.body.children.length-1];
    let valueUnit = measureElement.getBoundingClientRect().width; // Y
    measureElement.remove();

    // Given: Aem and Bmm with B=1\. We know: Aem = Xpx and Bmm = Ypx. Therefore: 1px = Bmm/Y Result: Aem = Xpx = X * 1px = X * Bmm/Y <=> Aem = X * 1mm/Y (with B=1) <=> Aem = X/Ymm
    return (toUnitValuePixel / valueUnit) + toUnit;
  }
  return toUnitValuePixel + 'px';
} 
```

# ios - 从 NSNumber 检索内容时遇到问题

> ID：10463520
> 
> 赞同：0
> 
> 时间：2012-05-05T15:58:39.543
> 
> 标签：ios, nsnumber

听起来是个愚蠢的问题。我正在尝试从定义为 NSNumber 的变量中检索内容，该变量是从 mutableArray 中读取的：

```
NSNumber * nsnMoneyPerMonth;
nsnMoneyPerMonth=[[[myTableData objectAtIndex:0]  objectAtIndex:myIndexPath.row]objectForKey:@"moneyPerMonth"];

int moneyPerMonth=sqlite3_column_int(statement, 1); 
NSNumber *nsnumberMoneyPerMonth=[NSNumber numberWithInt:moneyPerMonth]; 
[NSMutableDictionary alloc]initWithObjectsAndKeys:nsnumberMoneyPerMonth,@"moneyPerMonth" 
```

现在，一切都很好。但是，当我添加一行代码时：

```
int intMoneyPerMonth=[nsnMoneyPerMonth intValue]; 
```

要尝试检索内容，会抛出 EXC_BAD_ACCESS。

那么，我做错了什么？

# actionscript-3 - 为移动项目 Flash Builder 4.6 添加日期选择器

> ID：10463522
> 
> 赞同：0
> 
> 时间：2012-05-05T15:59:14.970
> 
> 标签：actionscript-3, flash, apache-flex, datepicker, flex4.6

这是我目前正在使用的 UI 的代码，我想在此代码中添加一个适用于 android 的日期选择器。具有 Id="datepicker" 的字段是我要添加日期选择器的地方。我也希望将这些添加到 UI
1)。打印按钮*如果可能，将收据打印到打印机，甚至将文件保存在本地*

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="Transaction" xmlns:components="components.*"
        viewDeactivate="callout.close()"
        xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Declarations>
        <s:RadioButtonGroup id="PaymentMethod"/>
        <components:MyCalloutComp id="callout" height="200" close="location.text=event.data" verticalPosition="after"/>
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import spark.events.TextOperationEvent;

            [Bindable]
            protected var total:Number = 0;

            protected function inputChangeHandler(event:TextOperationEvent):void
            {
                var n:Number;
                total = 0;

                n = Number(input1.text);
                if (!isNaN(n))
                    total += n;

                n = Number(input2.text);
                if (!isNaN(n))
                    total += n;

                n = Number(input3.text);
                if (!isNaN(n))
                    total += n;

                n = Number(input4.text);
                if (!isNaN(n))
                    total += n;

                n = Number(input5.text);
                if (!isNaN(n))
                    total += n;

                n = Number(input6.text);
                if (!isNaN(n))
                    total += n;
            }

]]>
    </fx:Script>
    <s:Label x="878" y="312" fontSize="18" fontWeight="bold" text="{total}"/>
    <s:Label x="17" y="15" color="#1294E7" fontSize="18" fontWeight="bold" text="Method of Payment"/>
    <s:RadioButton x="291" y="46" label="CREDIT CARD" groupName="PaymentMethod"/>
    <s:RadioButton x="11" y="46" label="CASH" groupName="PaymentMethod"/>
    <s:RadioButton x="144" y="47" label="CHECK" groupName="PaymentMethod"/>
    <s:Label x="26" y="90" text="Card Type"/>
    <s:Button x="686" y="413" width="82" label="Print"/>
    <s:Button x="800" y="413" width="96" label="Process"/>
    <s:TextArea x="25" y="175" height="38" maxChars="7"/>
    <s:Label x="25" y="159" text="Drivers License #"/>
    <s:TextInput id="input1" softKeyboardType="number" x="616" y="34" change="inputChangeHandler(event)" width="175"/>
    <s:TextInput id="input2" softKeyboardType="number" x="847" y="33" change="inputChangeHandler(event)" width="154"/>
    <s:TextInput id="input3" softKeyboardType="number" x="616" y="106" change="inputChangeHandler(event)" width="175"/>
    <s:TextInput id="input4" softKeyboardType="number" x="847" y="103" change="inputChangeHandler(event)" width="154"/>
    <s:TextInput id="input5" softKeyboardType="number" x="616" y="180" change="inputChangeHandler(event)" width="175"/>
    <s:Label x="638" y="17" text="Towing Charge"/>
    <s:Label x="870" y="16" text="Mileage Charge"/>
    <s:Label x="656" y="88" text="Labor Charge"/>
    <s:Label x="849" y="86" text="Extra Person Charge"/>
    <s:Label x="636" y="162" text="Special Equipment"/>
    <s:TextInput id="input6" softKeyboardType="number" x="847" y="178" change="inputChangeHandler(event)" width="154"/>
    <s:Label x="867" y="160" text="Storage Charge"/>
    <s:Label x="815" y="311" fontSize="19" fontWeight="bold" text="Total"/>
    <s:TextInput softKeyboardType="number" x="262" y="106" width="320"/>
    <s:Label x="265" y="89" text="Credit Card Number"/>
    <s:Label x="422" y="159" text="Expiry Date"/>
    <s:TextArea id="datepicker" x="418" y="182" width="139" height="38"/>
    <s:DateSpinner x="491" y="252"/>
    <s:TextInput id="location" x="22" y="107" width="205" editable="false" enabled="true"
                 focusIn="callout.open(this.location,true)" text="Select..."/>
</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:37:59.423

看这里 - [http://help.adobe.com/en_US/flex/mobileapps/WS7dd5c1363434bb702fbebf5a1312e95e4e3-8000.html](http://help.adobe.com/en_US/flex/mobileapps/WS7dd5c1363434bb702fbebf5a1312e95e4e3-8000.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DateSpinner.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DateSpinner.html)

您可以将日期选择器添加到您的移动应用程序，即使它没有通过将 mx.swc 添加到您的项目来优化移动设备。那应该可以让您访问选择器..为什么不使用微调器？我看到你的代码中有它..

# php - 将 mySQL 全文搜索相关值传递回 PHP 生成的表单

> ID：10463523
> 
> 赞同：0
> 
> 时间：2012-05-05T15:59:17.927
> 
> 标签：php, mysql, full-text-search, relevance

我正在使用 php 生成的表单对数据库进行 mySQL 全文查询。匹配项根据加权相关性排序并返回到表单。我的问题是：

有没有办法将相关值也传递回表单？

我想将相关值传递给 JS，以便客户端可以重新排序匹配列表，而无需将表单重新提交回服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:03:21.973

我想你会发现这个： [http ://w3schools.com/ajax/ajax_database.asp](http://w3schools.com/ajax/ajax_database.asp)

# jquery - 通过ajax加载的Jquery手风琴不起作用

> ID：10463527
> 
> 赞同：3
> 
> 时间：2012-05-05T15:59:44.220
> 
> 标签：jquery, ajax

所以我在一个使用 ajax 在页面之间加载内容的网站上工作，但是这些页面中的 javascript 在加载时停止工作，即使如果我直接访问该页面它工作得很好。

这是索引页面

[http://tinyurl.com/82exd3u](http://tinyurl.com/82exd3u)

如果您单击“服务”，您会看到它加载时手风琴侧边栏无法正常工作。当我直接访问该页面时，它工作正常。

[http://tinyurl.com/7jfjek8](http://tinyurl.com/7jfjek8)

这是我正在使用的ajax代码（尝试使用live，但它没有完成这项工作）

```
$(document).ready(function() {
    $('.nav').live('click', function(){
        var href = $(this).attr('href')+" #content";
        $('#content').hide().load(href).fadeIn('normal');
        return false
    }); 
}); 
```

我从手风琴代码中删除了 document() 准备好的部分，希望这样做可以解决问题，但仍然没有。

有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:35:24.813

在索引文件中，当 body 元素加载时，它会尝试调用 initialize(); 这是没有定义的。这一定是javascript停止工作的原因。检查 body 元素的 onLoad 属性。

还要检查您的 JS 和 CSS 文件的 url，其中两个不起作用：

> ```
>  <script src="js/libs/modernizr-2.5.3.min.js"></script>
> 
>  <link rel="stylesheet" href="css/style.css"> 
> ```

# c# - Unique Constraint Hack - 实体框架

> ID：10463532
> 
> 赞同：1
> 
> 时间：2012-05-05T16:00:00.133
> 
> 标签：c#, .net, entity-framework

由于没有任何方法可以在当前最新的 EF 版本中为实体添加唯一约束，所以我想出了一个主意。（我知道可以通过嵌入 SQL 添加约束）

我在我的 Repository 类中添加了一个方法：

```
private IDbSet<T> Entities;

public virtual bool Contains(Func<T, bool> predicate)
{
        return Entities.Any(t => predicate(t));
} 
```

我认为这将取代我目前的重复预防逻辑：

```
bool already exists = (from t in someSet.Entities 
                       where t.UniqueColumn == entity.UniqueColumn select t).
                       FirstOrDefault() != null;

if(alreadyExists)
throw new Exception("Entity already exists in DB."); 
```

这是一个好主意，防止重复插入/更新数据库的最佳方法是什么？

**编辑**：我编辑了 Contains 方法以使用谓词。现在我可以写这样的代码：

```
if(repository.Contains(t=> t.Email == "someemail@email.com")
     throw new Exception("Email already exists."); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:05:51.837

如果这将是一种罕见的情况，那么在数据库上放置唯一约束然后捕获在您尝试插入现有记录时生成的异常并没有错。

如果这很可能发生很多，那么我仍然会将约束放在数据库上，但请照常进行检查。

FWIW，您应该使您的方法采用 an`Expression<Func<T, bool>>`以便查询不会转换为 Enumerable。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:05:06.087

好吧，这行不通，因为您需要声明要强制执行唯一性的内容。在主键上？在“用户名”之类的其他列上？在 User.EMail 列上，但前提是它不为空（因此您可以同时拥有多个用户的空电子邮件）？

我更喜欢这样的事情是明确的。所以我实际上更喜欢你以前的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:11:18.663

在 DB 中强制唯一性的最佳方法是使用**唯一约束**。

# c# - 获取列表c#中的项目计数

> ID：10463533
> 
> 赞同：0
> 
> 时间：2012-05-05T16:00:03.360
> 
> 标签：c#, c#-4.0

我有一个单词列表，我想计算每个单词，然后选择按单词出现次数降序排列的前 1000 个单词。有什么快速的方法来执行这项任务。谢谢大家。

```
for (int j = 0; j < tokens.Length; j++)
{
  if (!yy.ContainsKey(tokens[j]))
                    yy.Add(tokens[j], 1);
                else
                    yy[tokens[j]]++;

 } 
```

我想用列表更改字典。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T16:07:06.620

您可以使用 LINQ 来做到这一点：

```
var query = words.GroupBy(word => word)
                 .OrderByDescending(g => g.Count())
                 .Select(g => g.Key)
                 .Take(1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:07:00.297

```
List<string> yourList = ... 

var top1000 = yourList.GroupBy(s => s).Select(g => new { Value = g.Key, Count = g.Count() })
                      .OrderByDescending(p => p.Count).Take(1000); 
```

# node.js - 热推网站代码ala Meteor

> ID：10463534
> 
> 赞同：1
> 
> 时间：2012-05-05T16:00:05.980
> 
> 标签：node.js, meteor, hotdeploy

在[Meteor www.meteor.com](http://www.meteor.com/)中，每次保存 HTML/Javascript/CSS 时，它都会将更改推送到浏览器，因此**您无需手动刷新浏览器。

## 有没有一种方法可以在标准 node.js 环境中做到这一点而不使用流星？

在 PHP/Java 环境中呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:26:46.413

我还没有尝试过，但[LiveJS.com](http://livejs.com/)可能会工作。

从文档：

> 只需包含 Live.js，它就会通过向服务器发送连续的 HEAD 请求来监控当前页面，包括本地 CSS 和 Javascript。对 CSS 的更改将被动态应用，HTML 或 Javascript 更改将重新加载页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:16:48.090

这将做你想做的事：[https ://github.com/viatropos/design.io](https://github.com/viatropos/design.io)

# c++ - 将函数声明为 BigStruct&& foo(...); 是一种好习惯吗？

> ID：10463535
> 
> 赞同：0
> 
> 时间：2012-05-05T16:00:20.037
> 
> 标签：c++, rvalue

```
class A
{
public:
    A()
    {
        cout << "A()" << endl;
    }

    A(const A&)
    {
        cout << "A(const A&)" << endl;
    }

    A(A&&)
    {
        cout << "A(A&&)" << endl;
    }

    A& operator=(const A&)
    {
        cout << "A(const A&)" << endl;
    }

    A& operator=(A&&)
    {
        cout << "A(const A&&)" << endl;
    }

    ~A()
    {
        cout << "~A()" << endl;
    }
};

A&& f_1()
{
    A a;
    return static_cast<A&&>(a);
}

A f_2()
{
    A a;
    return static_cast<A&&>(a);
}

int main()
{
    cout << "f_1:" << endl;
    f_1();
    cout << "f_2:" << endl;
    f_2();
} 
```

输出是：

```
f_1:
A()
~A()
f_2:
A()
A(A&&)
~A()
~A() 
```

* * *

示例代码显然表明 f_1() 比 f_2() 更有效。

所以，我的问题是：

我们是否应该总是将函数声明为 some_return_type&& f(...); 而不是 some_return_type f(...); ?

如果我的问题的答案是正确的，那么接下来是另一个问题：

有许多函数声明为 some_return_type f(...); 在 C++ 世界中，我们应该将它们更改为现代形式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T16:07:34.280

> 将函数声明为 BigStruct&& foo(...); 是一种好习惯吗？

可怕的练习。与*左值引用*一样，您正在做的是返回对本地对象的*引用。*当调用者收到引用时，被引用的对象已经消失了。

> 有许多函数声明为 some_return_type f(...); 在 C++ 世界中，我们应该将它们更改为现代形式吗？

现代形式是它们已经构建的形式（仅考虑返回类型）。更改了标准以使通用形式更有效，而不是让每个人都重写所有代码。

现在有非现代版本，`void f( type& t )`而不是`type f()`何时`f` *创建*对象。我们想要更改为现代形式的那些，`type f()`因为它提供了一个更简单的接口来推理和提供更简单的用户代码：

用户无需考虑对象是否被*修改*或*创建*：

```
void read_input( std::vector<int>& ); 
```

那是追加还是替换向量？

并使调用者代码更简单：

```
auto read_input(); 
```

对比

```
std::vector<int> v; 
read_input(v); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T14:53:14.723

在`f_2`您阻止编译器应用[NRVO 时](http://en.wikipedia.org/wiki/Return_value_optimization)。当您放弃演员表并启用优化进行编译时，您会发现它同样有效。绝对不需要强制转换参考，这在`f_2`.

# mysql - 选择显示优先级最高的多个用户组

> ID：10463537
> 
> 赞同：1
> 
> 时间：2012-05-05T16:00:21.303
> 
> 标签：mysql, sql

我试图让它选择具有最高显示优先级的组。问题是它选择了 ID 最低的组，我不确定如何选择显示优先级最高的组。

SQL 查询如下所示：

```
SELECT xf_user_group_relation.user_id , 
       xf_user_field_value.field_value,
       xf_user_group_relation.user_group_id, 
       MAX( xf_user_group.display_style_priority ) AS display_style_priority 
FROM xf_user_group_relation
     INNER JOIN xf_user_group ON xf_user_group_relation.user_group_id = xf_user_group.user_group_id
     INNER JOIN xf_user_field_value ON xf_user_group_relation.user_id = xf_user_field_value.user_id
WHERE xf_user_group.display_style_priority >= 500 
      AND field_id = 'minecraft' 
      AND xf_user_group_relation.user_group_id NOT IN(21,22)
GROUP BY xf_user_group_relation.user_id, 
      xf_user_field_value.field_value; 
```

这些组`xf_user_group`具有以下结构：

```
user_group_id            int(10)        AUTO_INCREMENT
title                    varchar(50)
display_style_priority   int(10)
user_css                 text
user_title               varchar(100) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:20:17.157

MySql 错误地允许您聚合值而不在 GROUP BY 中指定所有非聚合。所以它自己选择为 user_group_id 显示什么值。要获得所需的结果，必须为每个用户获得最大 display_style_priority，然后将 user_id 和 value 连接回原始表以过滤它们。您可能会使用两种形式，**join**：

```
SELECT *
FROM xf_user_group_relation
     INNER JOIN xf_user_group 
        ON xf_user_group_relation.user_group_id = xf_user_group.user_group_id
     INNER JOIN xf_user_field_value 
        ON xf_user_group_relation.user_id = xf_user_field_value.user_id
     INNER JOIN
     (
       SELECT r2.user_id, MAX(g2.display_style_priority) display_style_priority
         FROM xf_user_group_relation r2
        INNER JOIN xf_user_group g2 
           ON r2.user_group_id = g2.user_group_id
        GROUP BY r2.user_id
     ) maxDSP
        ON xf_user_group_relation.user_id = maxDSP.user_id
       AND xf_user_group.display_style_priority = maxDSP.display_style_priority
WHERE xf_user_group.display_style_priority >= 500 
      AND field_id = 'minecraft' 
      AND xf_user_group_relation.user_group_id NOT IN(21,22) 
```

并**与子查询中的最大值进行比较：**

```
SELECT *
FROM xf_user_group_relation
     INNER JOIN xf_user_group 
        ON xf_user_group_relation.user_group_id = xf_user_group.user_group_id
     INNER JOIN xf_user_field_value 
        ON xf_user_group_relation.user_id = xf_user_field_value.user_id
WHERE xf_user_group.display_style_priority =
      (SELECT MAX(g2.display_style_priority) 
         FROM xf_user_group_relation r2
        INNER JOIN xf_user_group g2 
           ON r2.user_group_id = g2.user_group_id
        WHERE r2.user_id = xf_user_group_relation.user_id
      )
      AND xf_user_group.display_style_priority >= 500 
      AND field_id = 'minecraft' 
      AND xf_user_group_relation.user_group_id NOT IN(21,22) 
```

现场演示在[Sql Fiddle](http://sqlfiddle.com/#!2/05249/17)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:10:57.953

你可以加`order by`

```
ORDER BY xf_user_group_relation.user_id DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:51:00.810

此查询是否将具有最低 ID 的组配对并说它具有最高的 display_style_priorty？

如果是这样，子查询可以为您处理，但我不确定您得到的结果是什么以及所需的结果是什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T17:25:56.703

准确地说，这将返回每个 具有最高显示优先级的组`(user_id, field_value)`，**而**不仅仅是每个用户。我假设这就是你想要的：

```
SELECT r.user_id, 
       x.field_value,
       r.user_group_id, 
       x.max_disp AS display_style_priority
FROM (
    SELECT r.user_id, v.field_value, max(g.display_style_priority) AS max_disp
    FROM   xf_user_group_relation r
    JOIN   xf_user_field_value    v USING (user_id)
    JOIN   xf_user_group          g USING (user_group_id)
    WHERE  g.display_style_priority >= 500 
    AND    v.field_id = 'minecraft' 
    AND    r.user_group_id NOT IN (21,22)
    GROUP  BY r.user_id, v.field_value
    )  x
JOIN  xf_user_group_relation r USING (user_id)
JOIN  xf_user_group g ON g.display_style_priority = x.max_disp
                     AND g.user_group_id = r.user_group_id 
```

如果一个用户可以有多个相同的组`display_style_priority`，这可以返回多行`(user_id, field_value)`共享相同的最大显示优先级。

* * *

其他 RDBMS（如 PostgreSQL、MSSQL 或 Oracle）具有**窗口函数**，可以从根本上简化此类任务。

在 PostgreSQL 中，您的查询可以像这样工作：

```
SELECT DISTINCT
       r.user_id
      ,v.field_value
      ,last_value(g.user_group_id) OVER w AS user_group_id
      ,last_value(g.display_style_priority) OVER w AS display_style_priority 
FROM   xf_user_group_relation r
JOIN   xf_user_field_value    v USING (user_id)
JOIN   xf_user_group          g USING (user_group_id)
WHERE  g.display_style_priority >= 500 
AND    v.field_id = 'minecraft' 
AND    r.user_group_id NOT IN (21,22)
WINDOW w AS (PARTITION BY r.user_id, v.field_value
             ORDER BY g.display_style_priority); 
```

[PostgreSQL 手册中的窗口函数介绍。](http://www.postgresql.org/docs/current/interactive/tutorial-window.html)

# c++ - SetConsoleTextAttribute : 仅前台

> ID：10463540
> 
> 赞同：1
> 
> 时间：2012-05-05T16:00:33.830
> 
> 标签：c++

我只想更改控制台应用程序的前景色文本，而不是背景文本颜色或控制台背景色。换句话说：我想保持以前的颜色，除了前景文本颜色。

目前我使用下面的代码，但文本下的背景也发生了变化。

```
#include <windows.h>
#include <iostream>
using namespace std;

int main(int argc, char* argv[])
{

    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), FOREGROUND_GREEN);
    cout << "green?" << endl;
    cin.ignore();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:14:37.110

Use `GetConsoleScreenBufferInfoEx` to retrieve the current colour attributes, and change the foreground only.

The following, albeit untested, should work no matter what background colour you start off with:

```
HANDLE outputHandle = GetStdHandle (STD_OUTPUT_HANDLE); //used twice
CONSOLE_SCREEN_BUFFER_INFOEX cbie; //hold info

//article didn't say this was necessary, but to be on the safe side...
cbie.cbSize = sizeof (CONSOLE_SCREEN_BUFFER_INFOEX);

GetConsoleScreenBufferInfoEx (outputHandle, &cbie); //get info

//first, cancel out all foreground attributes
//then, set the ones you want (I use bright red)
cbie.wAttributes &= 
    ~(FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_BLUE | FOREGROUND_INTENSITY);
cbie.wAttributes |= (FOREGROUND_RED | FOREGROUND_INTENSITY);

SetConsoleScreenBufferInfoEx (outputHandle, &cbie); //pass updated info back 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:02:21.873

还要设置背景颜色（否则会变成黑色）例如：红色背景上的绿色书写（注意：使用按位或运算符 | ）

```
SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), FOREGROUND_GREEN | BACKGROUND_RED); 
```

# ios - iOS URL Encode NSString 并且结果总是 (null)

> ID：10463542
> 
> 赞同：4
> 
> 时间：2012-05-05T16:00:38.880
> 
> 标签：ios, nsstring, urlencode, nsurl

当我使用 NSASCIIStringEncoding 为 GET 请求编码一些汉字时。

```
NSLog(@"%@",searchText);
NSString *stringForSearch = [searchText stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
NSLog(@"%@",stringForSearch); 
```

2012-05-05 23:51:02.669 StarHopeFundingApprovalSystem[756:f803] 中</p>

2012-05-05 23:51:06.305 StarHopeFundingApprovalSystem[756:f803]（空）

第一个日志是汉字，但第二个日志总是（空），请帮助我，提前谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T16:10:12.050

尝试使用`NSUTF8StringEncoding`insted of `NSASCIIStringEncoding`。

# objective-c - 跨多个 NSManagedObjectContexts 的 NSManagedObject 之间的关系

> ID：10463544
> 
> 赞同：0
> 
> 时间：2012-05-05T16:00:49.147
> 
> 标签：objective-c, core-data, relationship, nsmanagedobject, nsmanagedobjectcontext

我的应用程序使用多个线程，每个线程具有一个托管对象上下文。

为了清楚起见，我将不同的托管对象上下文称为：moc1、moc2、...等。

假设我们有两个具有简单一对多关系的模型：

```
User 1----* Document 
```

当用户登录时，我从其中一个上下文（例如 moc1）中获取相应的模型。

（伪代码）

```
UserModel *globalLoggedUser = ( Fetch the logged in user using moc1 ) 
```

然后我存储这个用户，以便我以后可以引用它。

在应用程序的另一部分，我需要遍历数组中的数千个项目并为其创建 Document 对象。然后每个文档都需要绑定到当前用户。这发生在不同的后台线程（有自己的上下文）

```
for( NSString *documentName in documents) {
    ( Create new document using moc2 )

    ** THIS IS WHERE MY PROBLEM IS **
    // What I currently do:
    UserModel *tempUser = ( Fetch the logged in user using moc2 )
    ( bind new document to tempUser )

    // What I would like to do: 
    ( bind new document to globalLoggedUser )

    // Note that in this case tempUser and globalLoggedUser are the same user, except they are attached to different contexts.

} 
```

如您所见，我希望避免每次都将新用户获取到当前上下文中。

问题是，globalLoggedUser 是 moc1 的一部分，而新文档是 moc2 的一部分（或 moc3、moc4 等，取决于线程）。

那么解决这个问题的最佳方法是什么？如何全局保存/缓存一个对象，然后使用同一个对象在不同的​​上下文中绑定关系，而不会产生每次都必须获取的惩罚？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:45:42.787

您不能跨线程使用相同的 NSManagedObject 是正确的。

[从核心数据编程指南：](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385)

> 使用线程限制，您不应在线程之间传递托管对象或托管对象上下文。要跨线程边界从一个上下文“传递”另一个托管对象，您可以：
> 
> *   传递其对象 ID (objectID) 并在接收托管对象上下文时使用 objectWithID: 或 existingObjectWithID:error:。
>     
>     
>     
>     必须保存相应的托管对象——您不能将新插入的托管对象的 ID 传递给另一个上下文。
>     
>     
> *   在接收上下文上执行 fetch。

我认为如果您在运行“文档”循环*之前*使用 moc2 获取登录用户会很好，因为我看不出有任何理由每次在循环内进行获取。（你这样做有什么原因吗？）

不必担心从线程 1 将任何内容绑定到 UserModel，您从 moc2 获得的 tempUser 引用数据库中与 globalLoggedUser 相同的数据。

# git - Git checkout -f 不替换仓库中未跟踪的本地文件

> ID：10463548
> 
> 赞同：0
> 
> 时间：2012-05-05T16:01:27.310
> 
> 标签：git

我有一个使用 git checkout -f 从 git repo 定期更新的目录。这很好用，但我只想更新被跟踪的文件而不删除其他本地文件。由于它本身不是回购协议，因此我不能使用 .gitignore。有任何想法吗？

**编辑：**好吧，我最终克隆了 repo 并将更新推送到它，而不是使用 git checkout。有了这个，我获得了使用 .gitignore 来防止本地文件被替换。

# amazon - 如何获取商品的父 ASIN？

> ID：10463549
> 
> 赞同：4
> 
> 时间：2012-05-05T16:01:49.303
> 
> 标签：amazon, amazon-product-api

要获取商品的变体，我们需要传递其父商品的 ASIN。但是给定子商品，是否可以通过亚马逊产品广告 API 获取父 ASIN？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T15:04:51.050

在您的 ResponseGroup 中包含 VariationMatrix。这在亚马逊上的记录很差，但它会为您提供每件商品的 ASIN 和 ParentASIN。据我所知，它适用于 ItemSearch 和 ItemLookup。然后使用 ParentASIN 进行 ItemLookup，您将获得返回的 Variations 和一组 Items，所有这些都显示了它们的 ASIN、它们的变体尺寸、报价等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-29T21:23:21.747

如果您还没有找到答案，以下请求帮助我获得了父 ASIN。

```
$baba_item = array(
'Operation' => 'ItemLookup',
'ItemId' => 'B003O6CB6S',  
'ResponseGroup' => 'Variations'
);

$baba_result =  $amazon->queryAmazon($baba_item);
$parentASINi= $baba_result->Items->Item->ParentASIN; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T18:18:21.027

不幸的是，经过长时间的搜索，我可以说无法通过亚马逊产品广告 API 的当前版本 (2011-08-02) 获取父 ASIN。

我希望将来亚马逊会提供这个功能。

# asp.net - 如何使用 iTextSharp 打印网格视图

> ID：10463553
> 
> 赞同：5
> 
> 时间：2012-05-05T16:02:18.837
> 
> 标签：asp.net

如何在 asp.net 中使用 iTextSharp 打印 GridView 数据（全部）？我只需要一个提示而不是完整的代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T16:09:15.013

试试这个：

```
 protected void ExportToPDF(GridView gvReport, bool LandScape)
{
    int noOfColumns = 0, noOfRows = 0;
    DataTable tbl = null;

    if (gvReport.AutoGenerateColumns) 
    {
        tbl = gvReport.DataSource as DataTable; // Gets the DataSource of the GridView Control.
        noOfColumns = tbl.Columns.Count;
        noOfRows = tbl.Rows.Count;
    }
    else
    {
        noOfColumns = gvReport.Columns.Count;
        noOfRows = gvReport.Rows.Count;
    }

    float HeaderTextSize = 8;
    float ReportNameSize = 10;
    float ReportTextSize = 8;
    float ApplicationNameSize = 7;

    // Creates a PDF document

    Document document = null;
    if (LandScape == true)
    {
        // Sets the document to A4 size and rotates it so that the     orientation of the page is Landscape.
        document = new Document(PageSize.A4.Rotate(), 0, 0, 15, 5);
    }
    else
    {
        document = new Document(PageSize.A4, 0, 0, 15, 5);
    }

    // Creates a PdfPTable with column count of the table equal to no of columns of the gridview or gridview datasource.
    iTextSharp.text.pdf.PdfPTable mainTable = new iTextSharp.text.pdf.PdfPTable(noOfColumns);

    // Sets the first 4 rows of the table as the header rows which will be repeated in all the pages.
    mainTable.HeaderRows = 4;

    // Creates a PdfPTable with 2 columns to hold the header in the exported PDF.
    iTextSharp.text.pdf.PdfPTable headerTable = new   iTextSharp.text.pdf.PdfPTable(2);

    // Creates a phrase to hold the application name at the left hand side of the header.
    Phrase phApplicationName = new Phrase("Sample Application", FontFactory.GetFont("Arial", ApplicationNameSize, iTextSharp.text.Font.NORMAL));

    // Creates a PdfPCell which accepts a phrase as a parameter.
    PdfPCell clApplicationName = new PdfPCell(phApplicationName);
    // Sets the border of the cell to zero.
    clApplicationName.Border = PdfPCell.NO_BORDER;
    // Sets the Horizontal Alignment of the PdfPCell to left.
    clApplicationName.HorizontalAlignment = Element.ALIGN_LEFT;

    // Creates a phrase to show the current date at the right hand side of the header.
    Phrase phDate = new Phrase(DateTime.Now.Date.ToString("dd/MM/yyyy"), FontFactory.GetFont("Arial", ApplicationNameSize, iTextSharp.text.Font.NORMAL));

    // Creates a PdfPCell which accepts the date phrase as a parameter.
    PdfPCell clDate = new PdfPCell(phDate);
    // Sets the Horizontal Alignment of the PdfPCell to right.
    clDate.HorizontalAlignment = Element.ALIGN_RIGHT;
    // Sets the border of the cell to zero.
    clDate.Border = PdfPCell.NO_BORDER;

    // Adds the cell which holds the application name to the headerTable.
    headerTable.AddCell(clApplicationName);
    // Adds the cell which holds the date to the headerTable.
    headerTable.AddCell(clDate);
    // Sets the border of the headerTable to zero.
    headerTable.DefaultCell.Border = PdfPCell.NO_BORDER;

    // Creates a PdfPCell that accepts the headerTable as a parameter and then adds that cell to the main PdfPTable.
    PdfPCell cellHeader = new PdfPCell(headerTable);
    cellHeader.Border = PdfPCell.NO_BORDER;
    // Sets the column span of the header cell to noOfColumns.
    cellHeader.Colspan = noOfColumns;
    // Adds the above header cell to the table.
    mainTable.AddCell(cellHeader);

    // Creates a phrase which holds the file name.
    Phrase phHeader = new Phrase("Sample Export", FontFactory.GetFont("Arial", ReportNameSize, iTextSharp.text.Font.BOLD));
    PdfPCell clHeader = new PdfPCell(phHeader);
    clHeader.Colspan = noOfColumns;
    clHeader.Border = PdfPCell.NO_BORDER;
    clHeader.HorizontalAlignment = Element.ALIGN_CENTER;
    mainTable.AddCell(clHeader);

    // Creates a phrase for a new line.
    Phrase phSpace = new Phrase("\n");
    PdfPCell clSpace = new PdfPCell(phSpace);
    clSpace.Border = PdfPCell.NO_BORDER;
    clSpace.Colspan = noOfColumns;
    mainTable.AddCell(clSpace);

    // Sets the gridview column names as table headers.
    for (int i = 0; i < noOfColumns; i++)
    {
        Phrase ph = null;

        if (gvReport.AutoGenerateColumns)
        {
            ph = new Phrase(tbl.Columns[i].ColumnName, FontFactory.GetFont("Arial", HeaderTextSize, iTextSharp.text.Font.BOLD));
        }
        else
        {
            ph = new Phrase(gvReport.Columns[i].HeaderText, FontFactory.GetFont("Arial", HeaderTextSize, iTextSharp.text.Font.BOLD));                
        }

        mainTable.AddCell(ph);
    }

    // Reads the gridview rows and adds them to the mainTable
    for (int rowNo = 0; rowNo < noOfRows; rowNo++)
    {
        for (int columnNo = 0; columnNo < noOfColumns; columnNo++)
        {
            if (gvReport.AutoGenerateColumns)
            {
                string s = gvReport.Rows[rowNo].Cells[columnNo].Text.Trim();
                Phrase ph = new Phrase(s, FontFactory.GetFont("Arial", ReportTextSize, iTextSharp.text.Font.NORMAL));
                mainTable.AddCell(ph);
            }
            else
            {
                if (gvReport.Columns[columnNo] is TemplateField)
                {
                    DataBoundLiteralControl lc = gvReport.Rows[rowNo].Cells[columnNo].Controls[0] as DataBoundLiteralControl;
                    string s = lc.Text.Trim();
                    Phrase ph = new Phrase(s, FontFactory.GetFont("Arial", ReportTextSize, iTextSharp.text.Font.NORMAL));
                    mainTable.AddCell(ph);
                }
                else
                {
                    string s = gvReport.Rows[rowNo].Cells[columnNo].Text.Trim();
                    Phrase ph = new Phrase(s, FontFactory.GetFont("Arial", ReportTextSize, iTextSharp.text.Font.NORMAL));
                    mainTable.AddCell(ph);
                }                    
            }
        }

        // Tells the mainTable to complete the row even if any cell is left incomplete.
        mainTable.CompleteRow();
    }

    // Gets the instance of the document created and writes it to the output stream of the Response object.
    PdfWriter.GetInstance(document, Response.OutputStream);

    // Creates a footer for the PDF document.
    HeaderFooter pdfFooter = new HeaderFooter(new Phrase(), true);
    pdfFooter.Alignment = Element.ALIGN_CENTER;
    pdfFooter.Border = iTextSharp.text.Rectangle.NO_BORDER;

    // Sets the document footer to pdfFooter.
    document.Footer = pdfFooter;
    // Opens the document.
    document.Open();
    // Adds the mainTable to the document.
    document.Add(mainTable);
    // Closes the document.
    document.Close();

    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment; filename= SampleExport.pdf");
    Response.End();
} 
```

从[这里取](http://www.dotnetspider.com/resources/29759-Exporting-GridView-PDF.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:08:32.097

这就是我今天使用的。摘自[http://blog.codovations.com/2011/01/generating-pdf-from-datatable-using.html](http://blog.codovations.com/2011/01/generating-pdf-from-datatable-using.html)

```
using System;
using System.Web;
using System.Data;

using iTextSharp.text;
using iTextSharp.text.pdf;

namespace yetanothercoder
{
    /// <summary>
    /// Summary description for CreatePdf
    /// </summary>
    public class PDFExporter
    {

        private readonly DataTable dataTable;
        private readonly string fileName;
        private readonly bool timeStamp;

        public PDFExporter(DataTable dataTable, string fileName, bool timeStamp)
        {
            this.dataTable = dataTable;
            this.fileName = timeStamp ? String.Format("{0}-{1}", fileName, GetTimeStamp(DateTime.Now)) : fileName;
            this.timeStamp = timeStamp;
        }

        public void ExportPDF()
        {
            HttpResponse Response = HttpContext.Current.Response;
            Response.Clear();
            Response.ContentType = "application/octet-stream";
            Response.AddHeader("Content-Disposition", "attachment; filename=" + fileName + ".pdf");

            // step 1: creation of a document-object
            Document document = new Document(PageSize.A4, 10, 10, 90, 10);

            // step 2: we create a writer that listens to the document
            PdfWriter writer = PdfWriter.GetInstance(document, Response.OutputStream);

            //set some header stuff
            document.AddTitle(fileName);
            document.AddSubject(String.Format("Table of {0}", fileName));
            document.AddCreator("www.yetanothercoder.com");
            document.AddAuthor("naveenj");

            // step 3: we open the document
            document.Open();

            // step 4: we add content to the document
            CreatePages(document);

            // step 5: we close the document
            document.Close();
        }

        private void CreatePages(Document document)
        {
            document.NewPage();
            document.Add(FormatPageHeaderPhrase(dataTable.TableName));
            PdfPTable pdfTable = new PdfPTable(dataTable.Columns.Count);
            pdfTable.DefaultCell.Padding = 3;
            pdfTable.WidthPercentage = 100; // percentage
            pdfTable.DefaultCell.BorderWidth = 2;
            pdfTable.DefaultCell.HorizontalAlignment = Element.ALIGN_CENTER;

            foreach (DataColumn column in dataTable.Columns)
            {
                pdfTable.AddCell(FormatHeaderPhrase(column.ColumnName));
            }
            pdfTable.HeaderRows = 1;  // this is the end of the table header
            pdfTable.DefaultCell.BorderWidth = 1;

            foreach (DataRow row in dataTable.Rows)
            {
                foreach (object cell in row.ItemArray)
                {
                    //assume toString produces valid output
                    pdfTable.AddCell(FormatPhrase(cell.ToString()));
                }
            }

            document.Add(pdfTable);
        }

        private static Phrase FormatPageHeaderPhrase(string value)
        {
            return new Phrase(value, FontFactory.GetFont(FontFactory.TIMES, 10, Font.BOLD, new BaseColor(255, 0, 0)));
        }

        private static Phrase FormatHeaderPhrase(string value)
        {
            return new Phrase(value, FontFactory.GetFont(FontFactory.TIMES, 8, Font.UNDERLINE, new BaseColor(0, 0, 255)));
        }

        private Phrase FormatPhrase(string value)
        {
            return new Phrase(value, FontFactory.GetFont(FontFactory.TIMES, 8));
        }

        private string GetTimeStamp(DateTime value)
        {
            return value.ToString("yyyyMMddHHmmssffff");
        }
    }
} 
```

# php - 如何使用 cli 脚本更改终端工作目录？

> ID：10463559
> 
> 赞同：3
> 
> 时间：2012-05-05T16:02:45.403
> 
> 标签：php

我想从 cli 脚本更改 Linux 终端中的目录，**而不是 PHP 当前工作目录**——希望使用 shell_exec()。

例如：从`user@host:~$`到`user@host:/the/other/directory$`

`system()`并且`exec()`不允许。

这在我的情况下不起作用：

```
$dir = '/the/other/directory';
shell_exec('cd '.$dir); 
```

也不是这些

```
shell_exec('cd '.escapeshellarg($dir));
shell_exec(escapeshellcmd('cd '.$dir));
pclose(popen('cd '.$dir)); 
```

但是`shell_exec('ls '.$dir)`给了我该目录中的列表。有什么诡计吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:47:40.277

当你像你一样执行几个命令时：

```
shell_exec('cd '.escapeshellarg($dir));
shell_exec(escapeshellcmd('cd '.$dir)); 
```

它行不通。第一个命令与第二个无关，所以不能使用第一个命令的结果来执行第二个命令。

如果要执行一系列命令，请使用管道符号，`|`如：

```
echo shell_exec("ls /etc/apache2 | grep fileName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:31:54.457

shell_exec 所做的本地更改仅适用于该 php 进程，因此 ls 将从该其他目录获取。但是当你退出 php 时，你又回到了 bash，它从不真正关心进程的作用。

我怀疑您可以从外部更改 bash 的当前目录。如果您需要在其他目录中运行 bash，您可以在 php 中尝试：

```
system('gnome-terminal --working-directtory=/home/doom'); 
```

这将在新目录中启动另一个终端，但脚本会等到你退出这个 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:33:24.150

如果您的意思是要通过调用 php cli 脚本来更改父 shell 的目录，那么您不能这样做。你能做的充其量是：

```
shell> eval `your/cli/script` 
```

在你的脚本中做类似的事情

```
<?php
...
    echo "cd $dir"

?> 
```

# android - 在方向更改时保留列表片段中的列表

> ID：10463560
> 
> 赞同：18
> 
> 时间：2012-05-05T16:02:58.363
> 
> 标签：android, android-listview, android-fragments, android-orientation

我有一个使用片段的应用程序，所有片段都包含在一个活动中。该活动从一个包含按钮菜单的片段开始，所有这些都会导致各种列表片段替换原始按钮/菜单片段。

我的问题是，在方向改变时，如果活动正在显示其中一个列表视图，它就会消失并且按钮菜单会返回。我理解为什么会发生这种情况......活动被破坏并重新创建，但不知道如何解决它并通过方向更改来维护列表视图/当前片段。

我在[这里](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentRetainInstance.html)`setRetainInstance`找到了使用示例，但我无法弄清楚如何将它应用到我的情况下使用按钮菜单或我想要保留的片段可能是几个不同的片段之一。

下面是简化代码以显示主要活动和列表片段之一。

任何关于添加内容的指针，以便保留列表片段，将不胜感激。

**活动**

```
public class Main extends FragmentActivity {
    private MainMenuFragment menu;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        menu = new MainMenuFragment();
        getSupportFragmentManager().beginTransaction().replace(R.id.pane, menu).commit();    
    }
} 
```

**列表片段**

```
public class ItemListFragment extends ListFragment {

    private TextView header;
    private TextView empty;
    private Button add;
    public static Cursor itemCursor;
    private GroceryDB mDbHelper;
    public static long mRowId;
    public static CheckCursorAdapter lists;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.common_list, container, false);
        header = (TextView) v.findViewById(R.id.header);
        empty = (TextView) v.findViewById(android.R.id.empty);
        header.setText(R.string.header_item);
        empty.setText(R.string.empty_items);
        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        mRowId=0;
        mDbHelper = new GroceryDB(getActivity());
        mDbHelper.open();

        itemCursor = mDbHelper.fetchAllItems();
        getActivity().startManagingCursor(itemCursor);

        String[] from = new String[] { GroceryDB.ITEM_NAME };
        int[] to = new int[] { R.id.ListItem };
        lists = new CheckCursorAdapter(getActivity(),
                R.layout.listlayout_itemlist, itemCursor, from, to);
        setListAdapter(lists);        
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-05T16:20:55.923

> 如何解决它并通过方向更改维护列表视图/当前片段

每次`onCreate()`调用时，您都在盲目地替换片段。相反，仅在`savedInstanceState()`is时添加/替换片段`null`。如果不是`null`，您将从配置更改中返回，并且您现有的片段将被重新创建（或者，如果它们被保留，它们已经存在）。

`setRetainInstance(true)`意味着片段*本身*将在配置更改时保留，而不是像活动一样被销毁/重新创建。但是，它仍然会被调用`onCreateView()`。在您的代码中，这意味着您的数据成员会保留，但即使您不重新查询数据库`ItemListFragment`，您仍然需要调用。`setListAdapter()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T13:20:11.327

我知道这在很久以前就已经解决了，但是为了寻找解决方案的人，他们在方向改变期间（反复）遇到保留列表的问题，我想补充一点，你可以还可以使用一个自定义类来保存您的列表适配器的数据列表。

这样，它在重新创建活动（和列表片段）时保留数据，您可以测试它是否在您的 oncreate 中有任何数据。如果您像往常一样继续并以通常的方式获取数据`list == null`。`list.size < 0`否则，您只需使用它已有的数据设置您的列表适配器。

To me this is a lot easier, and seeing as Eclipse automatically creates a similar DummyContent class for your data when creating an android master/detail flow project it basically only requires a change of the oncreate of your listfragment.

# java - 不支持的 GLSL 着色器

> ID：10463561
> 
> 赞同：0
> 
> 时间：2012-05-05T16:02:58.620
> 
> 标签：java, opengl, glsl, shader, notsupportedexception

对于一个类，我必须使用 Java、jogl 和 lwjgl。我们得到了一些代码，现在我正在尝试运行此代码，但是我得到了错误：

" 不支持 GLSL 3.30。支持的版本有：1.00 ES、1.10 和 1.20"

而且我无法确定支持哪些着色器，或者它是驱动程序问题还是硬件缺陷。

目前我正在进行 debian 测试/不稳定并使用当前的 xorg-video-ati 驱动程序包。

谁能告诉我如何确定支持哪些着色器（如果有的话）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:34:51.200

> “ 不支持 GLSL 3.30。支持的版本有：1.00 ES、1.10 和 1.20”（...）目前我正在进行 debian 测试/不稳定并使用当前的 xorg-video-ati 驱动程序包。

好吧，这并不奇怪，因为到目前为止，DRI/Mesa xorg-video-ati aka radeon 驱动程序仅支持带有扩展的 OpenGL-2.1。OpenGL-3 仍处于 DRI/Mesa 开发的实验阶段。

您需要安装 AMD/ATI 的专有 fglrx/Catalyst 驱动程序以获得对 OpenGL-3 及更高版本的支持（当然这仍然取决于您的硬件）。幸运的是，fglrx 的质量得到了显着提高，而我最后一次详尽的测试（使用 Radeon HD6570）显示出极大的稳定性（它们甚至可以通过所有的折磨测试，比如模糊的上下文和 FB 设置）。我发现并报告的唯一真正的错误是，无论垂直同步和交换间隔如何设置，glXSwapBuffers 都不会阻塞间接渲染上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:26:42.430

GLSL 3.30 需要 OpenGL 3.3。您的硬件似乎无法运行 GL 3.x，或者您最近没有更新驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:30:45.080

如果您查看 GLSL 文件或作为着色器加载的字符串，应该有一行：

```
#version 330 
```

这意味着版本 3.3。您可以尝试将其更改为：

```
#version 120 
```

（1.2 版）

不能保证它会起作用，但如果着色器很简单，你可能会侥幸成功。

# css - 在 css 中使用 blend 或其他东西来显示正文背景图像和页脚颜色

> ID：10463572
> 
> 赞同：1
> 
> 时间：2012-05-05T16:04:19.477
> 
> 标签：css, html, image-processing

我有网站[http://change.is](http://change.is)我曾经使用过像 photoshop 这样的图像混合。

在这个网站上，我使用不同的颜色作为页脚，将其分为四个部分，第一个和第二个颜色的不透明度为 0.7，第三个颜色为 0.9，最后一个颜色为 0.5。由于前三种颜色的不透明度接近 1，因此身体背景网格不像第四种颜色那样正确可见。但我不想改变他们的不透明度。

我需要表现得像

![在此处输入图像描述](../Images/70a300fc613941da9d395be2d39f22c2.png)

但在这个屏幕截图中，我将不透明度降低到 0.5，所以页脚颜色看起来不是我想要的，但我需要使用相同的颜色，第一和第二颜色的不透明度为 0.7，第三颜色的不透明度为 0.9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:51:02.730

所以你要做的是在蓝色、粉红色、黄色下显示更多的网格，但你不想改变不透明度。您可以使用颜色对网格进行 Photoshop 处理，以便控制显示的网格框的数量，然后将其设置为背景并重复-x。

# android - 应用程序未启动

> ID：10463575
> 
> 赞同：0
> 
> 时间：2012-05-05T16:04:42.703
> 
> 标签：android

我只是在创建应用程序后更改了主要活动名称并在清单文件中更新了相同名称。但是现在该应用程序正在构建而没有任何错误，它根本没有启动。这是我在 eclips 中得到的输出

> [2012-05-05 21:32:12 - 测试] 执行同步 [2012-05-05 21:32:12 - 测试] 自动目标模式：首选 AVD 'Test_G' 可用于模拟器 'emulator-5554' [2012 -05-05 21:32:12 - 测试] 将 Test.apk 上传到设备 'emulator-5554' [2012-05-05 21:32:12 - 测试] 安装 Test.apk ... [2012-05-05 21:32:15 - 测试] 成功！[2012-05-05 21:32:16 - 测试] \Test\binTest.apk 安装在设备上 [2012-05-05 21:32:16 - 测试] 完成！

如何解决这个问题

清单.xml

```
?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="Test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity android:name="contactListTab"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:22:41.300

您尚未提供意图类别。尝试添加

```
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

在活动标签之间！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:24:33.787

您的活动声明并不是说它应该是应用程序开始执行此操作后应该打开的第一个活动，您必须添加意图过滤器并且您的活动名称应该是 . 因为它是包中的一个java文件。正如另一个答案中提到的，您必须将 设置`package=""`为您的应用程序的包名称。

尝试将清单更改为：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="-->PACKAGE NAME<--"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity android:name=".contactListTab">
         <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
         </intent-filter>
        </activity>
    </application>

</manifest> 
```

确保活动名称是contactListTab！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:15:23.783

```
package="Test" 
```

而不是`Test`，将包放在您的 Activity 所在的位置。还要确保`contactListTab`是您的`Activity`.

我建议您在*res/strings.xml*文件中声明此类字符串，而不是在此处使用它们。这种方式更容易改变它们。

# java - 删除 XML 结构 Java DOM 中的节点

> ID：10463577
> 
> 赞同：0
> 
> 时间：2012-05-05T16:04:55.400
> 
> 标签：java, xml, dom

我正在尝试从用 Java 中的 DOM 解析的 XML 文件中删除一个节点。

```
private Node deleteChildNode (Node node, String nodeName )
{
    Node tempNode = null;
    NodeList nl = node.getChildNodes();
    for (int i = 0; i < nl.getLength(); i++)
    {
        tempNode = nl.item(i);
        if (tempNode.getNodeName().equals(nodeName))
        {                   
            tempNode= node.removeChild(tempNode);                   
        }        
    }
    return node;
} 
```

调用：

```
nodeClone = deleteChildNode(nodeClone, "L123"); 
```

但是节点并没有被删除。

```
NodeList nl = nodeClone.getChildNodes();
        for (int i = 0; i < nl.getLength(); i++)
            System.out.println(nl.item(i).getNodeName()); 
```

显示“L123”节点。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T00:34:38.000

如果在给定节点下有多个具有节点名称的节点，那么您的代码将无法工作，因为您将跳过节点。在删除节点时使用 NodeList 有点棘手。基本上，当您删除子节点时，如果修改 NodeList 以便所有以下节点都移回一个索引。（类似于在使用索引迭代列表时从列表中删除元素）。一个简单的解决方法是添加“--i;” 删除子节点后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T06:23:04.797

我使用这个方便的小方法来清除传递节点的子节点：

```
public static void clearChildNodes(Node node){
    while(node.hasChildNodes()){
        NodeList nList = node.getChildNodes();
        int index = node.getChildNodes().getLength() - 1;

        Node n = nList.item(index);
        clearChildNodes(n);
        node.removeChild(n);
    }

} 
```

# node.js - Nodejs：使用 vows 和 nodejs http 模块时无法获取响应正文

> ID：10463580
> 
> 赞同：0
> 
> 时间：2012-05-05T16:05:05.373
> 
> 标签：node.js, testing, vows

我在玩誓言和nodejs。

```
var vows = require('vows');
var http = require('http');
var suite = vows.describe('testing');
var host = 'www.google.com', port = '80', path = '/', method = 'GET';

suite.addBatch({
    'A context': {
        topic: function(){
            http.get({
              host: host,
              port: port,
              path: path,
              method: method
            }, this.callback);
        },
        "sample test": function(res, extra){//here extra is just to prevent vows error
            res.on('data', function (chunk) {
                console.log('BODY: ' + chunk);//It never gets logged
            });
            console.log('HEADERS: ' + JSON.stringify(res.headers));//it is working
        }
    }
});

suite.export(module); 
```

但我无法获得响应正文。我究竟做错了什么。

我正在使用 nodejs v 0.6.6 和 vows v0.6.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:41:42.943

从我所见，看起来 Vows 在`this.callback`运行时并没有直接调用测试。它被延迟`processnextTick`。如果我不得不猜测，也许在那段时间正在发出“数据”事件。这意味着在所有数据事件被触发之前，您不会绑定您的“数据”函数。

但实际上，问题在于 Vows 测试应该将所有像这样的异步逻辑分离到`topic`自身中。如果你真的想在测试中检查块，那么就这样做。

另请注意，您可以拥有任意数量的块，而不仅仅是一个`data`事件。您可能想要设置流编码，并将数据连接为字符串。您当前的代码将 Buffer 隐式转换为字符串，这可能会因多字节字符而中断。

```
suite.addBatch({
    'A context': {
        topic: function(){
            var cb = this.callback;
            var req = http.get({
              host: host,
              port: port,
              path: path,
              method: method
            });

            // Aggregate all chunks before running callback
            req.on('response', function(res) {
              var chunks = []
              res.on('data', function(chunk) {
                chunks.push(chunk);
              });
              res.on('end', function() {
                cb(null, res, chunks);
              });
            });

            // Handle connection failures.
            req.on('error', cb);
        },
        "sample test": function(err, res, chunks){
            chunks.forEach(function (chunk, i) {
                console.log('BODY piece ' + i + ': ' + chunk);
            });
            console.log('HEADERS: ' + JSON.stringify(res.headers));
        }
    }
}); 
```

# drupal-7 - 将字体添加到 CKEditor（在 Drupal 中）

> ID：10463582
> 
> 赞同：1
> 
> 时间：2012-05-05T16:05:06.677
> 
> 标签：drupal-7, ckeditor, truetype

[我已经从http://www.FontIneed.com](http://www.FontIneed.com)下载了三种字体 - .tff 文件并在Linux下安装它们。它们实际上安装在整个系统中，因为它们现在出现在 OpenOffice 套件字体下拉框中。由于我已经在 Drupal 中安装了 CKEditor 作为富文本编辑器，因此我尝试将这些字体添加到其中。如果 Javascript 插入适用于给定的配置文件，在 Drupal->Config->CKEditor->Advanced 中进行测试时，我已经遇到了问题。我完全输入了 texfield 框下提供的示例，但是，当在 Full HTML 中创建一个新块时，字体下拉列表显示了整个可用字体集（不仅是我输入的字体）。然后，我想将我的新字体添加到 plugin.js 文件中的 CKEDITOR.config.font_names 中（尽管我不喜欢这样，因为当新版本将覆盖此文件时，它会破坏我的设置......）。但是新字体没有出现。我应该怎么办？谢谢 PS：我可能在输入他们的名字时遇到问题。例如，我有一种带有 Zipty_Do.tff 文件的字体；文件的第一行写着“Zipty Do，Regular”，这就是我输入的名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:22:49.573

不管你是否能够让你的新宠出现在 CkEditor 中，我相信如果你安装了免费字体，它们很可能不是标准的系统字体。如果不将字体嵌入网站本身，这些字体将仅对您可用，因此对您网站的访问者显示不同。

我发现在嵌入非系统字体方面非常有用的一个模块是 Cufon [http://drupal.org/project/cufon](http://drupal.org/project/cufon)。希望这可以帮助。

# c++ - 将数据的平均值插入向量中

> ID：10463584
> 
> 赞同：0
> 
> 时间：2012-05-05T16:05:09.770
> 
> 标签：c++, stl, stdvector

我在测试中有以下数据：

```
2011-01-03      2116    
2011-01-03      2120    
2011-01-04      2116    
2011-01-04      2115 
```

和以下代码：

```
std::map<std::string, std::vector<double> >::iterator tk = test.begin();
std::vector<double>tmp;

std::copy(tk->second.begin(), tk->second.end(), std::back_inserter(tmp)); 
```

上面的代码`tmp`包含：

```
2116
2120
2116
2115 
```

但是，我想将`tk->second`每个日期的平均值插入`tmp`. 我是否必须将我的 back_inserter 写入循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:26:29.937

```
for(auto it = test.begin(); it != test.end(); it++)
{
  double sum = 0.0;
  int count = 0;
  for(auto it2 = it->second.begin(); it2 != it->second.end(); it2++, count++)
  { 
    sum += *it2;
  }
  tmp.push_back(sum / count);
} 
```

# c - C/C++ 代码不适用于 DEV C++。（浮点数或类型）

> ID：10463587
> 
> 赞同：0
> 
> 时间：2012-05-05T16:05:43.173
> 
> 标签：c, recursion, floating-point, factorial, dev-c++

```
#include<stdlib.h>
#include<stdio.h>

long double fact(unsigned long int n)
    /*The factorial of a positive integer by recursion*/
{
    if (n==0)
        return 1;
    else
        return n*fact(n-1);
}

int main()
{
    long double  sum, n;
    int i, m;
    printf("\t/*Code to find the approximate value of e */");
check:
    printf("\n\n\tPlease Enter the value of n := ");
    scanf("%lf", &n);
    sum=0;
    for (i=0; i<=n; i++)
        sum +=1/(fact(i));
    printf("\n\n\tThe appriximate value of e := %.15lg\n\n\t", sum);
    printf("Let's do this again? 1/ YES Any key/ NO := ");
    scanf("%d", &m);
    if (m==1)
        goto check;
    else (1);
    return 0;
} 
```

此代码在 Visual C++ 2010 中运行良好，但不适用于 DEV C++。对于 e 的值，它一直返回零。有人可以解释为什么！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:10:05.707

使用这个`scanf("%Lf", &n);`long double 的格式说明符是`%Lf`, `%le`，`%lg`所以使用这个

并考虑这些点

Dev-C++ 它使用 GCC (MinGW)。没有大量的 Dev-C++ 更新可以解决这个问题。

1.  Dev-C++ 5 年没有更新了；不要屏住呼吸。

2.  衍生 wxDev-C++ 得到维护。

3.  如果您想要编译器更新，请访问 www.mingw.org，并希望最新版本仍然适用于古老的 Dev-C++。或者使用不同的 IDE 或编译器。我推荐 VC++ 2010 Express Edition（免费，并且调试器更好），您的代码在 VC++ 2008 中可以正常工作，但这并不安全。

4.  您如何确定该值为“0”？很可能它实际上是 0.000001 之类的东西，而您的审讯方法将其四舍五入。您应该在调试器而不是打印语句中查看该值。不幸的是，Dev-C++ 的调试器很糟糕。

5.  ISO C 标准库只为双精度定义函数。如果要为 float 定义版本，则需要编译为 C++ 并包含 . C 不支持函数重载，因此在 C 中没有不同命名的函数是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:12:49.817

did you check wheter scanf(...) really reads the number you want to read? Try to print the value you read. And also the line

```
sum +=1/(fact(i)); 
```

looks suspicious. 1 as an integer divided by something bigger than 1 should always yield 0, in the optimal case on every compiler... Maybe you could try this instead:

```
sum +=1.0/(fact(i)); 
```

EDIT: Sorry was wrong here. Typeconversions make it possible to devide integer by long double.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:08:50.310

```
scanf("%lf", &n); 
```

`%lf`转换规范用于读取`double`.

您必须使用`%Lf`来阅读`long double`.

# android - 在自定义视图的随机位置使用动画

> ID：10463590
> 
> 赞同：0
> 
> 时间：2012-05-05T16:06:02.517
> 
> 标签：android, android-animation

嗨，在我的应用程序中，我正在尝试制作爆炸动画，无论敌人在我的自定义视图中被摧毁的地方。完成此操作的最佳方法是什么，因为我知道您无法使用 onDraw 将 imageView 绘制到画布上？如何让动画在敌人的位置播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:18:03.830

您可以首先创建一个爆炸列表，并使用线程和处理程序一个接一个地显示它们。例如，如果您创建了 10 个图像，即explosion-1.png、explosion-2.png...explosion-10.png，那么使用canvas.drawBitmap，您可以让它们一个接一个地出现，直到序列完成使用一个循环。

# c++ - 从 XML（或类似）生成 C/C++ 命令行参数解析代码

> ID：10463600
> 
> 赞同：1
> 
> 时间：2012-05-05T16:07:30.833
> 
> 标签：c++, c, xml, command-line-arguments

是否有从 XML（或类似的东西）生成 C/C++ 源代码以创建命令行参数解析功能的工具？

现在对问题进行更长的解释：

到目前为止，我一直使用[gengetopt](http://www.gnu.org/software/gengetopt/gengetopt.html)进行命令行参数解析。它是一个很好的工具，可以根据自己的配置格式（文本文件）生成 C 源代码。例如 gengetopt 配置行

```
option "max-threads" m "max number of threads" int default="1" optional 
```

除其他外，生成一个变量

```
int max_threads_arg; 
```

我以后可以使用。

但是 gengetopt 没有为我提供这个功能：

*   一种从 gengetopt 配置格式生成 Unix 手册页的方法

*   一种从 gengetopt 配置格式生成 DocBook 或 HTML 文档的方法

*   当我有多个共享一些常用命令行选项的程序时，一种重用 C/C++ 源代码和重用 gengetopt 配置行的方法

当然 gengetopt 可以通过运行为我提供文档文本

`command --help`

但我正在搜索标记文档（例如 HTML、DocBook、Unix 手册页）。

您知道是否有任何具有自由开源许可证的 C/C++ 命令行参数工具/库可以满足我的需求？

我猜这样的工具会使用 XML 来指定命令行参数。这将使生成不同格式的文档（例如手册页）变得容易。只有在构建时才需要 XML 文件来生成 C/C++ 源代码。

我知道可以使用其他一些命令行参数解析库在运行时读取 XML 中的配置文件，但我正在寻找一种在构建时从 XML（或类似的东西）生成 C/C++ 源代码的工具。

**更新 1**

我想在编译时尽可能多地进行计算，而在运行时尽可能少地进行计算。所以我想避免给你一个命令行选项映射的库，比如 boost::program_options::variables_map （[教程](http://www.boost.org/doc/libs/1_49_0/doc/html/program_options/tutorial.html)）。

换句话说，我更`args_info.iterations_arg`喜欢`vm["iterations"].as<int>()`

用户**tsug303**建议使用该库[`TCLAP`](http://tclap.sourceforge.net/)。它看起来相当不错。将选项分成几组可以满足我的需要，这样当多个程序共享一些通用选项时，我可以重用代码。尽管它不会从 XML 的配置文件格式生成源代码，但我几乎将该答案标记为已接受的答案。

但是没有一个推荐的库能满足我的所有要求，所以我开始考虑编写自己的库。草图：一种将自定义 XML 格式作为输入并生成 C++ 代码和 XML 模式的新工具。其他一些 C++ 代码是使用 CodeSynthesis XSD 工具从 XML 模式生成的。两块 C++ 代码组合成一个库。一个额外的好处是我们获得了一个用于命令行选项的 XML Schema，并且我们获得了一种将它们全部序列化为二进制格式（从 CodeSynthesis XSD 生成的 CDR 格式）的方法。我会看看我是否有时间编写这样一个库。更好的当然是找到一个已经实现的库。

今天我读到了用户**Nore**的[建议替代方案](https://bitbucket.org/noresources/ns-xml/wiki/program)。它看起来很有希望，当计划中的 C++ 代码生成已经实现时，我会渴望尝试一下。来自**Nore**的建议看起来最接近我一直在寻找的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:13:32.490

也许这个[`TCLAP`](http://tclap.sourceforge.net/)图书馆会满足你的需要？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:02:07.190

我可以建议你看看[这个项目](https://bitbucket.org/noresources/ns-xml/wiki/program)。这是我目前正在研究的：A XSD Schema，用于描述 XML 中的命令行参数。我进行了 XSLT 转换以创建 bash 和 Python 代码、XUL 前端界面和 HTML 文档。

~~不幸的是，我还没有生成 C/C++ 代码（已经计划好了）。~~

**编辑**：C 解析器的第一个工作版本现在可用。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-05T12:37:45.423

我将添加另一个名为[protoargs](https://github.com/ashlander/protoargs)的项目。[它使用cxxopts从](https://github.com/jarro2783/cxxopts)[protobuf](https://developers.google.com/protocol-buffers) proto 文件中生成 C++ 参数解析器代码。

不幸的是，它不能满足所有作者的需求。没有生成文档。没有编译时计算。但是，有人可能会发现它很有用。

**UPD：正如评论中提到的，我必须指定这是我自己的项目**

# javascript - 使用自动分页器时 jQuery 动画的问题

> ID：10463602
> 
> 赞同：1
> 
> 时间：2012-05-05T16:07:35.567
> 
> 标签：javascript, jquery, animation, scroll, infinite-scroll

我在我的页面上设置了一个自动寻呼机，以允许无限滚动。我还使用 jQuery 来更改悬停在图像上的图像的不透明度。但是，动画仅适用于第一页，而不是自动加载的连续页面。知道为什么会这样吗？或者有什么方法可以解决这个问题？谢谢。

这是我用于图像和自动寻呼机的代码：

`<script type="text/javascript"> $(document).ready(function(){ $(".post").animate({opacity:.8}); $(".post").hover(function(){$(this).stop().animate({opacity:1}, "fast");}, function(){ $(this).stop().animate({opacity:.8}, "slow"); }); }); </script> <script type="text/javascript" src="http://static.tumblr.com/q0etgkr/J5bl3lkz1/tumblrautopagernopage.js"></script>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:18:46.280

你的代码在哪里？我们不是魔术师...

在试图弄清楚你在这里说什么的范围内，我认为你的代码很可能不适用于更新的自动分页代码。看看您是否可以将更动态的代码放入您的系统中，并在自动寻呼机加载图像后应用该代码。

# wpf - 在选项卡时选择tabiTem从代码 - 主题使用DataTemplate时

> ID：10463604
> 
> 赞同：0
> 
> 时间：2012-05-05T16:07:42.000
> 
> 标签：wpf, tabcontrol

我的 WPF 应用程序中有一个 TabControl。TabControl 的 ItemsSource 绑定到视图对象的 ObservableColction。它使用 DataTemplate 为集合中的 Items 中的选项卡填充可视树。

我需要在 conde-behind 中选择当前选项卡，以响应用户在应用程序的另一个屏幕上执行的操作。当我遍历 TabControl 的 Items 集合中的项目时，我得到了我的视图模型的实例。

如何访问实际的 TabItems 并对其进行迭代，然后选择我想要的？

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:59:29.537

如果您使用的是 MVVM 方法，则应将 TabControl 的 SelectedItem 属性绑定到保存 TabItems ObservableCollection 的同一对象（ViewModel）。当您需要更改当前选项卡时，请将 SelectedItem 属性设置为 ObservableCollection 中的正确 TabItem。

# java - 关于不可变类

> ID：10463605
> 
> 赞同：0
> 
> 时间：2012-05-05T16:07:42.673
> 
> 标签：java, immutability

我已经基于不可变的概念开发了一个下面的代码，正如我们在 java 字符串类中所知道的那样是不可变的，所以我也开发了下面的类作为不可变的，请告诉我它是否正确根据不可变..

```
 public final class BrokenPerson
{
    private String firstName;
    private String lastName;
    private Date dob;

    public BrokenPerson( String firstName,  String lastName, Date adob)
    {
        this.firstName = firstName;
        this.lastName = lastName;
        this.dob = new Date(adob.getTime());
    }

    public String getFirstName()
    {
        return this.firstName;
    }
    public String getLastName()
    {
        return this.lastName;
    }
    public Date getDOB()
    {
        return  new Date(dob.getTime());

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T16:10:01.853

`final`应用于一个类使其不可扩展，而不是不可变。

您希望您的成员成为`final`.

```
public final class BrokenPerson
{
    private final String firstName;
    private final String lastName;
    private final Date dob;
    //...
} 
```

当然，像现在这样，类不能被修改，因为私有字段没有被任何成员方法修改，但是，为了严格起见，你应该将它们标记为`final`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:10:55.917

This is correct, as there is no way to modify the object

# ios - 我从 NSString 的“componentsSeparatedByString”方法得到了奇怪的输出

> ID：10463611
> 
> 赞同：0
> 
> 时间：2012-05-05T16:08:09.850
> 
> 标签：ios, nsstring, persistence

我想将 NSDictionary 数组存储到文件中。所以我写了一个函数来从 NSArray 转换为 NSString。但是我遇到了一个非常奇怪的问题。这是我的代码。

```
+ (NSArray *)arrayForString:(NSString*)dataString
{
    NSArray* stringArray = [dataString componentsSeparatedByString:ROW_SEPARATOR];
    NSLog(@"%@", stringArray);
    NSMutableArray* dictionaryArray = [[NSMutableArray alloc] initWithCapacity:0];
    for (int i = 0; i < [stringArray count]; i++)
    {
        NSString* string = [stringArray objectAtIndex:i];
        NSLog(@"%@", string);
        NSArray* subStrings = [string componentsSeparatedByString:COLUMN_SEPARATOR];
        NSDictionary* dic = [[NSDictionary alloc] initWithObjectsAndKeys:[subStrings objectAtIndex:0], PHOTO_NAME, [NSNumber numberWithUnsignedInt:[[subStrings objectAtIndex:1] unsignedIntValue]], PHOTO_SEQ_NO, nil];
        [dictionaryArray addObject:dic];
    }
    return dictionaryArray;
} 
```

这是日志：

```
2012-05-05 23:57:35.113 SoundRecognizer[147:707] (
    "new Photo/0",
    "new Photo/1"
)
2012-05-05 23:57:35.118 SoundRecognizer[147:707] new Photo/0
2012-05-05 23:57:35.123 SoundRecognizer[147:707] -[__NSCFString unsignedIntValue]: unrecognized selector sent to instance 0x1d18c0 
```

如何从以下数组中获得@“-”？！

```
2012-05-05 23:57:35.113 SoundRecognizer[147:707] (
    "new Photo/0",
    "new Photo/1"
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:00:03.537

NSString 没有`unsignedIntValue`方法。改为使用`intValue`。但我不确定这一切的意义——无论如何，您都可以使用`writeToFile: atomically:`.

# c++ - 为什么命令行参数的字符串比较不起作用？

> ID：10463613
> 
> 赞同：0
> 
> 时间：2012-05-05T16:08:23.547
> 
> 标签：c++, command-line-arguments

```
int main(int argc, char *argv[])
{
    cout << strcmp(argv[1], "id");
    return 0;
} 
```

它返回假。我错过了什么？

谢谢我得到它的工作，将在 4 分钟内接受答复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T16:11:22.407

`strcmp`如果被比较的 c 字符串相等，则返回 0。`0 == false`，因此它实际上正在工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:11:35.797

`strcmp`如果 2 个字符串[相等](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)，则返回 0 。

**提示：为避免数组越界异常（Segmentation Fault），请使用：**

```
if (argv < 2) return 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:11:47.133

只输出 argv[1] 会更容易开始：

```
cout << argv[1] << endl; 
```

然后您可以看到您在 argv[1] 上获得的价值并从那里获取。您的代码没有任何问题，所以我猜您没有正确配置 IDE 以传递正确的 argv[1] 参数。

如上所述，您*应该*得到一个 0，而不是一个 false。

# iphone - Instruments 是否显示 UIWebView 使用的内存？

> ID：10463622
> 
> 赞同：6
> 
> 时间：2012-05-05T16:09:14.233
> 
> 标签：iphone, ios, memory, uiwebview, instruments

我有一个应用程序在 iPhone 4、iPod Touch 2nd gen、iPhone 3G 上运行良好，但在 2 或 3 次内存警告后系统地在 iPod Touch 4th gen 上崩溃。我在 Instruments 中对其进行了测试，它告诉我应用程序在发送内存警告时使用了 2MB。这似乎是一个非常小的内存量。

我怀疑与 UIWebView 相关的问题，如果 Instruments 实际显示 UIWebView 使用的内存量，我会徘徊。2MB 不足以在我之前开发的应用程序上生成内存警告。

这不是 UIWebView 中的泄漏，因为有时我在第一次显示 UIWebView 时会崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:34:38.990

尝试这个：

1.  选择列表上方的“调用树”（默认为“统计”）
2.  检查“反转调用树”+“隐藏系统库”+“仅显示 obj-C”

现在您可以按升序浏览仍在内存中的调用。它们不是对象，但您应该能够看到在那里调用您的 UIWebView 的选择器。如果不是以编程方式而不是 IB 创建它，那么它肯定会显示出来。

如果可以，也尝试先检查泄漏并使用 ARC。

# c++ - WinAPI LoadKeyboardLayout();

> ID：10463626
> 
> 赞同：2
> 
> 时间：2012-05-05T16:09:31.053
> 
> 标签：c++, winapi, keyboard-layout

我用 VS2010 编译 dll，但在更改键盘布局时遇到问题。我正在运行 Windows 7。

```
GetKeyboardLayout(0); //Returns previous layout
LoadKeyboardLayout("00000409", KLF_ACTIVATE);
GetKeyboardLayout(0); //Returns 04090409 (English layout) 
```

但是布局没有改变。有人可能会说我做错了什么，但是如果我将“00000409”更改为任何其他语言 ID，例如更改为俄语“00000419”，布局就会完美更改。该问题仅出现在英文布局中。

当我使用`ActivateKeyboardLayout`所有布局都切换正常但英语不起作用时，也会出现同样的问题。

它可以是什么问题之王？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:49:54.387

这个错误让我很开心。重启后一切正常。

# c# - MonoGame - BlendState - 2D SpriteBatch

> ID：10463629
> 
> 赞同：0
> 
> 时间：2012-05-05T16:09:47.047
> 
> 标签：c#, .net, ios, xamarin.ios, monogame

我需要`SpriteBatch`在 WPF 或普通 UIKit 应用程序中呈现我期望的图像：

*   正如您所期望的那样，部分透明的 PNG 相互叠加呈现
*   我有一个可以修改的 alpha，最好是使用`Color.White`和修改`A`值。

最近一直在使用`BlendState.NonPremultiplied`，但我得到了奇怪的线条，其中部分透明的 PNG 相互重叠。

我在 Windows 上遇到了类似的问题[（请参阅此处）](https://stackoverflow.com/questions/10450585/xna-blendstate-with-spritebatch)，但通过更改`Premultiplied`XNA 内容项目中的设置来修复它。我怎样才能为 MonoGame 做类似的事情？（我期待这里的OpenGL有所不同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:32:37.310

我们通过使用两种不同的设置解决了这个问题。

在 Windows 和 XNA 上：

*   采用`BlendState.NonPremultiplied`
*   将所有 PNG 的内容项目的默认设置更改为 Premultiply = False
*   要修改精灵的 Alpha 值，请使用`Color.White`并设置`A`值

在 MonoGame 和 iOS 上：

*   采用`BlendState.AlphaBlend`
*   保持 PNG 原样
*   要修改精灵的 Alpha 值，请使用`Color.White * (float)Alpha / (float)byte.MaxValue`

我的 PNG*没有*预乘，并且完全按照您从 Photoshop 出来的预期使用。

# firefox-addon - Firefox lightweight-theme-list-change event not sent?

> ID：10463639
> 
> 赞同：0
> 
> 时间：2012-05-05T16:10:26.800
> 
> 标签：firefox-addon

I have a FF extension that I want notified when the lightweight theme list is changed. Here's the code:

```
var PesonaSwitcherObserver = {

    register: function() {
        PersonaSwitcher.log ("in register");
        var observerService =
            Components.classes["@mozilla.org/observer-service;1"]
            .getService(Components.interfaces.nsIObserverService);
        observerService.addObserver(PesonaSwitcherObserver,
            "lightweight-theme-list-change", false);
    },

    observe: function (subject, topic, data) {
        PersonaSwitcher.log ("in observe");
        switch (topic) {
            case 'lightweight-theme-list-change':
                PersonaSwitcher.subMenu();
                break;
        }
    },

    unregister: function() {
        PersonaSwitcher.log ("in unregister");
        var observerService =
            Components.classes["@mozilla.org/observer-service;1"]
            .getService(Components.interfaces.nsIObserverService);
        observerService.removeObserver(PesonaSwitcherObserver,
            "lightweight-theme-list-change");
    }
}

window.addEventListener("load", PesonaSwitcherObserver.register, false);
window.addEventListener("unload", PesonaSwitcherObserver.unregister, false); 
```

The log receives the "in register", but no "in observes" when I add or remove personas. I've even looked at LightweightThemeManager.jsm and

```
function _updateUsedThemes(aList) { 
```

calls

```
Services.obs.notifyObservers(null, "lightweight-theme-list-changed", null); 
```

Anyone know why or have a hint?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:23:10.200

我猜想调用`observerService.addObserver()`失败 - 请检查错误控制台（按 Ctrl-Shift-J 打开它）。您的观察者没有实现`QueryInterface`功能，观察者服务将明确检查是否`nsIObserver`已实现。[使用XPCOMUtils.jsm](https://developer.mozilla.org/en/JavaScript_code_modules/XPCOMUtils.jsm)最容易实现此功能。如果您不想将其导入全局范围（您可能不想，因为您的代码似乎是从覆盖层运行的），您可以这样做：

```
var PesonaSwitcherObserver = {
    QueryInterface: Components.utils.import("resource://gre/modules/XPCOMUtils.jsm", null)
                              .XPCOMUtils
                              .generateQI([Components.interfaces.nsIObserver]),
    ... 
```

# html - 如何在 CSS 中使用 :not 选择器？

> ID：10463640
> 
> 赞同：1
> 
> 时间：2012-05-05T16:10:29.097
> 
> 标签：html, css, css-selectors

我的问题说明了一切。我是 CSS 新手。我正在尝试使用以下代码，但它不起作用：

```
ul.verticalNav {
    /*declaration*/
}

ul.verticalNav li {
    /*declaration*/
}

ul.verticalNav li a {
    /*declaration*/
}

ul.verticalNav li a:not(:nth-last-child(1)) {
    border-bottom: 1px solid #323232;
} 
```

该类`ul.verticalNav li a:not(:nth-last-child(1))`没有创建边界。HTML 是：

```
<ul class="verticalNav">
    <li><a href="#">Home</a></li>
    <li><a href="#">View Profile</a></li>
    <li><a href="#">Edit Profile</a></li>
    <li class="bottomLeftMenuItem"><a class="bottomLeftMenuItem" href="#">Search Profile</a></li>
</ul> 
```

我无法找到问题所在。

提前致谢。

* * *

我正在使用 Firefox 12.0 和 Google Chrome 18.0.1025.168 m。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T16:13:44.993

您的选择器错误，应该是

```
ul.verticalNav li:not(:nth-last-child(1)) a {
    border-bottom: 1px solid #323232;
}​ 
```

那是因为使用您的标记，`<a>`总是将成为`<li>`其父级的最后一个子级。您想要的是将样式应用于任何不是最后一个孩子`<a>`的 s 中。`<li>`

# mobile - 在智能手机上安装多个操作系统？

> ID：10463641
> 
> 赞同：2
> 
> 时间：2012-05-05T16:10:28.983
> 
> 标签：mobile, operating-system

我想知道是否可以将手机配置为支持多种操作系统*进行开发*。

不是在谈论在手机上运行虚拟机，而是在同一部手机上实际安装多个操作系统，从而在打开手机时提供启动选项。这对开发人员测试真实设备有很大帮助。

需要有人对此有所了解。如果可能的话，计划在这方面写一篇论文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:18:48.643

是的，为什么不？。

例如，我测试了这个

[idroid](http://www.idroidproject.org/) 在单个设备中运行 android 和 iphone os。

还有另一种选择

[网络和安卓](http://www.redmondpie.com/cyanogenmod-7-for-touchpad-makes-further-progress-touchscreen-wi-fi-sound-and-accelerometer-now-working-video/)

但存在很多问题：

a) 官方（苹果、微软和谷歌）他们不希望这样。所以我不认为他们会正式这样做。

b）由于它不是官方的，因此它将缺少驱动程序。例如，iDroid 缺少几个驱动程序

# javascript - 奇怪的 javascript 代码...加密、编码还是打包？

> ID：10463658
> 
> 赞同：2
> 
> 时间：2012-05-05T16:12:01.517
> 
> 标签：javascript, jquery, encryption, encoding

> **可能重复：**
> [如何混淆 JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

我正在浏览一些网站，发现非常有趣的事情。我只是这个编码的初学者，从来没有见过这样的东西，所以我想知道它是加密的还是编码的或打包的，还是有别的？

**脚本示例：**

```
V10861992380165541086199238016554108619923801655410861992380165541086199238016554108619923801655410861992380165541086199238016554='13047389474143951304738947414395130473894741439513047389474143951304738947414395130473894741439513047389474143951304738947414395130473894741439513047389474143951304738947414395130473894741439513047389474143951304738947414395130473894741439513047389474143951304738947414395130473894741439513047389474143951304738947414395130473894741439513047389474143951304738947414395130473894741439513047389474143951304738947414395130473894741439513047389474143951304738947414395130473894741439513047389474143951304738947414395' 
```

或者这里是一个很长的东西的截图，甚至不能在我的屏幕上捕捉它。 [http://snpr.cm/8KznHp.png](http://snpr.cm/8KznHp.png) [http://snpr.cm/xOLfRE.png](http://snpr.cm/xOLfRE.png)

谁能告诉我这些是什么，我该怎么做？我需要支付程序或其他费用吗？谢谢你的理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:30:32.997

所有行或代码所做的只是创建一个以 V 开头的变量并将数字放入其中。在没有看到其余代码的情况下，我无法判断它是否只是编码或加密，但如果您注意到该字符串只是重复数字 1304738947414395。您绝对可以自己进行简单的编码。一个简单的编码是将所有的javascript代码放在一个字符串中`aaa="document.write('blah')"`，然后说`aaa="atob(aaa)`将原始字符串转换为base64。保存 base64 字符串，然后将其放在 eval 语句中，这样`eval(btoa(aaa))`会将其转换回文本，然后 eval 执行文本。完成后，您将获得一些经过编码的轻度混淆代码。

# php - 允许网络访问者调用管理员的链接

> ID：10463660
> 
> 赞同：-2
> 
> 时间：2012-05-05T16:12:12.827
> 
> 标签：php, javascript, phone-call

一位客户在他的联系我们页面上请求了一项功能，浏览器只能拨打他的电话，并且某些在线电话服务会向他收费。如果可能的话，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:16:04.663

[Twilio](http://twilio.com)提供了一个 voip api，可以满足您的需求：[点击通话](http://www.twilio.com/docs/howto/click-to-call)

注意：我不隶属于任何级别的 twilio。原始海报客户的请求肯定会要求第三方 api/软件，并且无论如何都将限于提供的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:17:17.163

有许多呼叫服务会呼叫双方 - 其中一个可能适合。“点击通话”的谷歌应该在相关国家/地区找到某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T16:19:07.043

如果您的客户有 Skype，您可以发布指向该 Skype 用户的链接：

```
<a href="skype:the_skype_name">Call the admin on skype</a> 
```

否则，您可以使用 Flash 或 html5 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T16:21:23.520

如果客户和访客都可以选择Skype，那么简单的解决方案是 `<a href="callto://YourSkypeName">Call us</a>` 如果不是，请使用与您所在国家相对应的服务之一，正如Andiih所说。

# ruby-on-rails - Rails：update_attributes 不会更新引用同一模型实例的任何其他现有实例

> ID：10463666
> 
> 赞同：3
> 
> 时间：2012-05-05T16:13:01.563
> 
> 标签：ruby-on-rails, attributes, update-attributes

我意识到以下几点：

```
 user1 = User.create - creates a model with id 1 and age  is 0

  same_user = User.find(1)

  same_user.update_attributes(:age => 18)

  p same_user.age # prints out 18
  p user1.age # prints out 0 
```

为什么现有属性不从数据库中获取值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T16:16:01.413

您需要重新加载您的用户。因为它的属性在数据库中更改时保存在内存中。

```
p same_user.age
p user1.reload.age 
```

# grails - How do I get GrailsRootLoader to resolve resources with absolute paths?

> ID：10463670
> 
> 赞同：1
> 
> 时间：2012-05-05T16:13:20.477
> 
> 标签：grails, groovy

In my grails app, I use a third party library which makes heavy use of `getClass().getClassLoader().getResource("/some/thing")` - resource loading with absolute paths.

Resources are in `grails-app/conf`. Using `grails run-app` the classloader used is a `org.codehaus.groovy.grails.cli.support.GrailsRootLoader`. With this classloader, resolving fails when absolute paths are used. Resources **do** resolve without the preceeding "/" - e.g. `some/thing` does resolve. Resources also do resolve **with** the preceeding "/" in unit tests or when the app is packaged as a war. This both does not really help.

How do I get `GrailsRootLoader` to resolve absolute paths when I run the app with the `grails` command ?

PS: I use grails-2.0.3 on Linux and tried Java versions 1.7.0_01 (Oracle) and 1.6.0_24 (OpenJDK).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:05:34.630

我还没有尝试过，但看起来这应该在第三方库中修复：[getResourceAsStream 在新环境下失败？](https://stackoverflow.com/questions/3238562/getresourceasstream-fails-under-new-environment)

# ios - 如何在 Mac 上启动应用程序上传器？

> ID：10463674
> 
> 赞同：3
> 
> 时间：2012-05-05T16:13:40.960
> 
> 标签：ios, xcode

我编写了一个应用程序，我想将其上传到 Apple 以供审查和 AppStore。

我读到应用程序上传器位于 /Developer/Applications/Utilities。

但是，我不知道我应该如何处理这些信息。

我在哪里可以找到或输入“/Developer”以便我可以转到“/Applications”？

发现者？发射器？命令提示符？X代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-23T05:06:11.867

1.  打开你的 xCode
2.  在菜单栏上转到 xCode-> Open Developer Tool -> Application Loader

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:19:51.670

由于最近更新了 Xcode，该`/Developer`文件夹不再使用。您可以在`/Applications/Xcode.app/Contents/Applications`.

要打开此文件夹，请复制路径，在 Finder 中打开“前往 > 前往文件夹”，然后将路径粘贴到弹出窗口中。或者在您的 Applications 文件夹中找到 Xcode，右键单击它，按“显示包内容”并导航到正确的子文件夹。

提示：为了快速访问 Application Loader（以及其他应用程序，即 FileMerge、Icon Composer 和 Instruments），您可以为它们创建一个别名并将它们放在您的 Applications 文件夹中。或者，如果您经常使用它们，请将它们拖到您的 Dock 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T16:25:09.887

在 XCode 4 中，您不再需要 Application Uploader。只需选择设备目标（不是模拟器），选择菜单产品 - 存档。这将在您的管理器（菜单：Window-Organizer）的档案部分产生一个产品。在这里，您可以验证并提交应用程序。

顺便说一句，/Developer 是 XCode 曾经所在的位置，现在 XCode (4.3) 位于 /Applications/XCode 中，所以这可能有点令人困惑。

# xslt - anyone please write XSLT code for this xml?

> ID：10463676
> 
> 赞同：-2
> 
> 时间：2012-05-05T16:14:14.043
> 
> 标签：xslt

```
<?xml version="1.0" encoding="UTF-8"?>
<school>
<classes>
    <class>
        <name>DEPT-NAME</name>
        <place>ROOM-NO</place>
    </class>
</classes>
<alldata>
    <data>
        <value>CSE</value>
        <value>101</value>
    </data>
    <data>
        <value>IT</value>
        <value>202</value>
    </data>
</alldata>
<students>
    <student>
        <DEPT-NAME>CSE</DEPT-NAME>
        <name>Jhon</name>
        <roll>111</roll>
    </student>
    <student>
        <DEPT-NAME>CSE</DEPT-NAME>
        <name>Zubi</name>
        <roll>112</roll>
    </student>
    <student>
        <DEPT-NAME>IT</DEPT-NAME>
        <name>Jack</name>
        <roll>121</roll>
    </student>
    <student>
        <DEPT-NAME>IT</DEPT-NAME>
        <name>Razz</name>
        <roll>122</roll>
    </student>
</students>
</school> 
```

I want a csv output like

1.  DEPT-NAME ROOM-NO NAME ROLLNO
2.  CSE 101 Jhon 111
3.  ****__*_*__*_*___**_Zubi 112**
***   IT 202 Jack 121*   ****__*_*__*_*___**_Razz 122****

 ****I was trying to do like this way but it did't work

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>
        <xsl:template match="/">
        <xsl:text>SCHOOL</xsl:text>

        <xsl:variable name="StudentCSE">
            <xsl:for-each select="school/students/student[DEPT-NAME='CSE']">
                <xsl:value-of select="name"/><xsl:text>,</xsl:text>
                <xsl:value-of select="roll"/>
            </xsl:for-each>
        </xsl:variable>

        <xsl:variable name="Value">
        <xsl:for-each select="school/alldata/data">
                    <xsl:text>&#010;</xsl:text>
                    <xsl:for-each select="value" >
                        <xsl:value-of select="."/><xsl:text>,</xsl:text>
                    </xsl:for-each>
                            <xsl:copy-of select="$StudentCSE"/>
                    </xsl:for-each>
        </xsl:variable>

        <xsl:for-each select="school/classes/class">
                <xsl:text>&#010;</xsl:text>
                <xsl:value-of select="name"/><xsl:text>,</xsl:text>
                <xsl:value-of select="place"/><xsl:text>,NAME,ROll</xsl:text>
                <xsl:copy-of select="$Value"/>
        </xsl:for-each>
        </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:06:00.750

您可能需要重新格式化，因为为简单起见，我删除了您的许多元素，但要解决您的问题，请尝试使用 <xsl:key> 创建教室查找。

<xsl:key> 让我们使用数据节点作为有效负载并使用数据的第一个值元素的内容作为键来创建一个哈希映射/字典：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>

   <xsl:key name="class-lookup" match="school/alldata/data" use="value[1]" />

   <xsl:template match="/">
      <!-- header -->
      <xsl:for-each select="school/classes/class">
         <xsl:value-of select="name"/>, <xsl:value-of select="place"/>, NAME, ROll
      </xsl:for-each>

      <!-- data -->
      <xsl:for-each select="school/students/*">
         <xsl:text>&#10;</xsl:text>
         <xsl:value-of select="DEPT-NAME"/>, <xsl:value-of select="key('class-lookup', DEPT-NAME)/value[2]" />, <xsl:value-of select="name"/>,  <xsl:value-of select="roll"/>
      </xsl:for-each>

   </xsl:template>
</xsl:stylesheet> 
```

输出：

```
DEPT-NAME, ROOM-NO, NAME, ROll

CSE, 101, Jhon,  111
CSE, 101, Zubi,  112
IT, 202, Jack,  121
IT, 202, Razz,  122 
```****

# asp.net-mvc-3 - MVC3 Dynamic SubDomain Routing

> ID：10463678
> 
> 赞同：1
> 
> 时间：2012-05-05T16:14:51.437
> 
> 标签：asp.net-mvc-3, multi-tenant, route-constraint

First of all, I have read a lot of post relating this issue like: [Asp.net MVC RouteBase and IoC](https://stackoverflow.com/questions/4540768/asp-net-mvc-routebase-and-ioc) , [Tenant-specific routes for dynamically loaded modules](https://stackoverflow.com/questions/7246773/tenant-specific-routes-for-dynamically-loaded-modules) , and many others.

What I want is: - Dynamically create pages like tenant1.mydomain.com, tenant2.mydomain.com, etc. - My tenants will have the same functionality but just different content, styles, title, etc.

I have tried extending RouteBase class but have read that is not a clean solution. Then I have tried creating a custom RouteConstraint like above posts recommend but not succeded.

Help me!

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:24:26.800

我通过做两件事实现了这一点。1) 是通过工厂提供存储库来提供选择正确内容的功能，工厂在创建时将 URL 传递给该工厂。这里的问题是，可能通过关系从本身没有 Tennantid 字段的实体中获取错误的数据。

2) 是一个基本的自定义视图引擎，它查找 URL 的主机部分，如果发现使用了该模板，它将查找客户端特定模板（通过文件夹结构），否则返回默认模板。

在这两者之间，我有一个系统可以通过相同的定制 CMS 和产品管理工具提供（在我的情况下）多个网站。

# java - Unable to start activity ComponentInfo: java.lang.NullPointerException

> ID：10463679
> 
> 赞同：-1
> 
> 时间：2012-05-05T16:15:06.123
> 
> 标签：java, android

i'm building an android application for my degree. i need to get all contacts from phone for begin the apllication (later i need also to get emails etcetc). so i used two classes

Degree_thesisActivity

```
 public class Degree_thesisActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GetFromPhone gf = new GetFromPhone();
    gf.getContacts();

} 
```

}

GetFromPhone.java

```
class GetFromPhone extends Activity {

public void getContacts() {
    // TODO Auto-generated method stub

    /**Declare a Contacts Cursor which have a list of all contacts*/
    Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    /**Move while cursor has another istance to process*/
    while(cursor.moveToNext()){
        /**Get the contact name pointed by cursor at that time*/
        cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        String contactID = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        /**show the contact pointed.THIS WILL BE MODIFIED FURTHER!!!!*/
                new AlertDialog.Builder(this)
                    .setMessage(contactID)
                    .setNeutralButton("ok", new OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                        }
                    })
                    .show();

    }

} 
```

}

but i get this error :

05-05 15:49:20.060: E/AndroidRuntime(824): java.lang.RuntimeException: Unable to start activity ComponentInfo{it.paki.degreethesis/it.paki.degreethesis.Degree_thesisActivity}: java.lang.NullPointerException

why?anybody can help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:37:24.557

由于类`GetFromPhone`extends `Activity`，您**不能**使用`new`关键字来创建类的实例。作为一个`Activity`，它需要遵循[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。我认为您需要阅读[应用程序基础知识](http://developer.android.com/guide/topics/fundamentals.html)。

# cocoa - 如何让 NSTextField 与自动布局中的文本一起增长？

> ID：10463680
> 
> 赞同：39
> 
> 时间：2012-05-05T16:15:10.313
> 
> 标签：cocoa, nstextfield, autolayout

Lion 中的自动布局应该让文本字段（以及标签）随其包含的文本一起增长变得相当简单。

文本字段设置为在 Interface Builder 中换行。

有什么简单可靠的方法来做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-05T16:28:20.120

`intrinsicContentSize`中的方法`NSView`返回视图本身认为的内在内容大小。

`NSTextField`计算此值时不考虑`wraps`其单元格的属性，因此如果布局在单行上，它将报告文本的尺寸。

因此，自定义子类`NSTextField`可以覆盖此方法以返回更好的值，例如单元格`cellSizeForBounds:`方法提供的值：

```
-(NSSize)intrinsicContentSize
{
    if ( ![self.cell wraps] ) {
        return [super intrinsicContentSize];
    }

    NSRect frame = [self frame];

    CGFloat width = frame.size.width;

    // Make the frame very high, while keeping the width
    frame.size.height = CGFLOAT_MAX;

    // Calculate new height within the frame
    // with practically infinite height.
    CGFloat height = [self.cell cellSizeForBounds: frame].height;

    return NSMakeSize(width, height);
}

// you need to invalidate the layout on text change, else it wouldn't grow by changing the text
- (void)textDidChange:(NSNotification *)notification
{
    [super textDidChange:notification];
    [self invalidateIntrinsicContentSize];
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-03-23T13:40:37.910

## 斯威夫特 4

## 可编辑的自动调整 NSTextField

*基于 Peter Lapisu 的 Objective-C 帖子*

子类`NSTextField`，添加下面的代码。

```
override var intrinsicContentSize: NSSize {
    // Guard the cell exists and wraps
    guard let cell = self.cell, cell.wraps else {return super.intrinsicContentSize}

    // Use intrinsic width to jive with autolayout
    let width = super.intrinsicContentSize.width

    // Set the frame height to a reasonable number
    self.frame.size.height = 750.0

    // Calcuate height
    let height = cell.cellSize(forBounds: self.frame).height

    return NSMakeSize(width, height);
}

override func textDidChange(_ notification: Notification) {
    super.textDidChange(notification)
    super.invalidateIntrinsicContentSize()
} 
```

设置`self.frame.size.height`为“一个合理的数字”**可以避免**使用`FLT_MAX`,`CGFloat.greatestFiniteMagnitude`或大数字时的一些错误。当用户选择突出显示字段中的文本时，会在操作过程中出现错误，他们可以向上和向下拖动滚动到无穷大。此外，当用户输入文本时，它`NSTextField`会被空白，直到用户结束编辑。最后，如果用户选择了`NSTextField`，然后尝试调整窗口大小，如果 的值`self.frame.size.height`太大，窗口将挂起。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-08T03:08:07.923

接受的答案是基于操纵`intrinsicContentSize`，但在所有情况下可能都没有必要。如果（a）您给文本字段 a`preferredMaxLayoutWidth`和（b）使字段 not ，自动布局将增加和缩小文本字段的高度`editable`。这些步骤使文本字段能够确定其固有宽度并计算自动布局所需的高度。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/29547238/1940455)和[此答案](https://stackoverflow.com/a/25926579/1940455)。

更模糊的是，`editable`如果您在字段上使用绑定并且无法清除该`Conditionally Sets Editable`选项，则自动布局将中断对文本字段属性的依赖性。

# c# - 从 List<> 中查找特定类的对象

> ID：10463695
> 
> 赞同：3
> 
> 时间：2012-05-05T16:18:08.177
> 
> 标签：c#, generic-list

我有一个基类，比如说叫做`Fruits`。然后我有几个子类，比如`Banana:Fruit`，`Apple:Fruit`等等。

然后我有一个不同类型的对象列表，香蕉、苹果等等。看起来像这样：

```
List<Fruits> f = new List<Fruits>{new Banana(), new Banana(), new Apple(), new Banana()}; 
```

我想要一个可以获取水果列表和类型的函数，并给我一个列表，列表中只有该类型的对象。所以如果我打电话给`find_obj(f, Banana)`, （或其他东西），它应该给我一个只包含香蕉的列表。

我可能在这里表现出极端的无知，我道歉。这甚至可能吗？我知道如果我事先知道课程，我可以做这样的事情：

```
public List<Fruit> GimmeBanana(List<Fruit> f)
{
     List<Fruit> Output=new List<Fruit>{ };
     foreach(Fruit fr in f)
     {
         if (fr is Banana){ Output.Add(fr); }
     }
} 
```

但我不知道如何使它适用于*Any*类。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T16:20:27.873

框架中已经存在这样的方法 - [`OfType<T>`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)：

```
List<Banana> bananas = f.OfType<Banana>().ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:26:16.987

您需要一个通用方法，例如：

```
 public List<T> GimmeAnyOfType<T>(List<Fruit> f)
    {
        return f.OfType<T>().ToList();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T16:22:16.067

即使您应该`OfType`按照其他答案的说明使用，作为学习经验，我将如何编写您的方法：

```
public IEnumerable<Banana> GimmeBananas(List<Fruit> f)
{
     if (f == null) yield break; //depending on what business logic you're looking for.
     foreach(Fruit fr in f)
     {
         if (fr is Banana) yield return fr;
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T16:25:09.823

您可以使用 LINQ OfType 运算符从集合中仅选择具有匹配类型的元素。

```
class Fruit { }
class Banana : Fruit{}
class Apple : Fruit{}

static void Main(string[] args)
{
    var fruits = new List<Fruit> { new Banana(),  new Banana(), new Apple(), new Fruit() };
    int bananas = fruits.OfType<Banana>().Count(); // 2
    int apples = fruits.OfType<Apple>().Count(); // 1
    int fruitc = fruits.OfType<Fruit>().Count(); // 4
    int exactFruits = GetOfExactType<Fruit,Fruit>(fruits).Count();  // 1
}

static IEnumerable<V> GetOfExactType<T, V>(IEnumerable<T> coll)
{
    foreach (var x in coll)
    {
        if (x.GetType().TypeHandle.Value == typeof(V).TypeHandle.Value)
        {
            yield return (V)(object)x;
        }
    }
} 
```

此运算符仅在您具有平面派生层次结构时才有效。如果您有例如 Apples 作为从水果派生的基类，并且您有专门的苹果，如 GoldenDelicius、RedDelicus ......并且您想计算所有类型为 apple 但不是派生的苹果，您不能使用 OfType 运算符来做到这一点。为此，您仍然需要一个额外的功能。在示例中，它被称为 GetOfExactType。

# python - 多次按键检测wxPython

> ID：10463702
> 
> 赞同：0
> 
> 时间：2012-05-05T16:19:40.270
> 
> 标签：python, tree, wxpython

我正在使用 wxPython 创建一个项目管理器，它有一个拆分器窗口。一侧是显示文件名称并打开文件的树，另一侧是用于编辑文件的 textctrl。

我遇到的一个问题是，当按下 SHIFT 和 TAB 时，我希望它返回 4 个空格，我有代码在按下 TAB 时添加 4 个空格。

我还有一个问题，当我将位于不同文件夹中的文件添加到我的程序 cwd 时，树会添加一个新节点，并且文件出现在该节点下，我正在努力让树保存到文件中。

另外我想知道如何从外部 png 文件向树中的项目添加图标。

对于这些问题中的任何一个，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:37:04.737

我不知道使用 WxPython，所以对此没有太多了解。但一般来说，你可以做的是每当按下一个键时，调用一个回调函数，你就可以获得按下键的时间。把它保存在某个地方。当按下下一个键时，获取时间。比较两次，如果没有太大的延迟（您可以决定延迟），这意味着两个键同时按下（尽管它们不是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:41:22.710

要捕获多个键，您需要捕获 EVT_CHAR 或使用加速器表。后者更容易，而前者可能会给你更多的控制权。这里有几个教程给你：

*   [wxPython：捕获键和字符事件](http://www.blog.pythonlibrary.org/2009/08/29/wxpython-catching-key-and-char-events/)
*   [wxPython：键盘快捷键（加速器）](http://www.blog.pythonlibrary.org/2010/12/02/wxpython-keyboard-shortcuts-accelerators/)

# ssis - 使用什么数据流转换控件

> ID：10463709
> 
> 赞同：0
> 
> 时间：2012-05-05T16:20:17.770
> 
> 标签：ssis, sql-server-2008-r2

我想创建一个 ssis SQL server 2008 项目（BIDS）到 ETL，从服务器 SR1 上的数据库 DB1（table11.Table12，table13）到服务器 SR2（通过 VPN 连接到 SR1），目标数据库 DB2（table2） .在源、转换和目标中使用的最佳数据流控制是什么。什么将是最好的设计。两个数据库都在 SQL Server 2008 上。感谢您的输入

# jquery - 条形之间的浮动图表间距

> ID：10463712
> 
> 赞同：0
> 
> 时间：2012-05-05T16:20:33.790
> 
> 标签：jquery, flot

我有以下浮动图表，它运行良好，但问题是条形应该位于上表中相应列的中心。我在浮动图表中使用了以下选项，它显示为图像中所示。但我认为随着列数的增加，这不会正确对齐，还有其他方法可以做到这一点吗？

```
xaxis: { min: 0.5, max: (legend.maxlength + 0.5), ticks: xAxis }, 
```

[![浮动图表](../Images/ad504e0e067d0d7b71896d70e62e7f77.png)](https://i.stack.imgur.com/P3Rkm.png)
[（来源：[ravidowluri.com](http://ravidowluri.com/untitled.png)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:59:35.340

您的条看起来像是*以*表格列为中心，所以我不完全确定您的意思。但也许 bar.align 选项是您正在寻找的？API 文档对此进行了详细解释，但基本上您的系列将如下所示：

```
series = {
    data = [...],
    bars: {
        align: "center"
    }
} 
```

# ruby-on-rails - 嵌套属性文件上传 - 可能吗？

> ID：10463717
> 
> 赞同：1
> 
> 时间：2012-05-05T16:21:01.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我有一个 Release 模型，其中轨道被接受为嵌套属性。在我开始可能是一项不可能完成的任务之前，有谁知道是否可以使用回形针（或类似的）添加文件附件/上传，以便我可以为版本中的每个轨道添加音频文件？

# comments - 匿名发表脸书评论？

> ID：10463718
> 
> 赞同：2
> 
> 时间：2012-05-05T16:21:06.460
> 
> 标签：comments, facebook-comments

基于此[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)人们可以使用其他第三方服务发帖，但用户可以使用 FB 评论系统在网站上匿名发帖吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:22:45.693

AFAIK，不可能使用 Facebook 的评论系统匿名发帖。无论是哪个网站，如果您使用 Facebook 登录进行评论，您的评论将与您的 Facebook 个人资料相关联。

# c# - 无法解析在 appharbor 托管的 WCF Web 服务

> ID：10463719
> 
> 赞同：1
> 
> 时间：2012-05-05T16:21:19.507
> 
> 标签：c#, wcf, app-config, appharbor, wcf-endpoint

我正在尝试在 appharbor.com 托管 WCF Web 服务 该服务在本地托管时按预期响应，但是在 appharbor 构建和托管时，它只返回 404。

该服务正在控制台应用程序中运行：

```
namespace Service.Host
{
    class Program
    {

        static void Main(string[] args)
        {

            var host = new ServiceHost<AchievementService>();

            host.Open();

            Console.WriteLine("AchievementService is running...\nPush any key to terminate.");
            Console.ReadLine();

            host.Close();
        }
    }
} 
```

app.config 看起来像这样：

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
   <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <services>
      <service name="Service.Main.AchievementService">
        <host>
          <baseAddresses>
            <add baseAddress="http://achiever.apphb.com"/>
            <!--<add baseAddress="http://localhost"/>-->
          </baseAddresses>
        </host>
        <endpoint address="AchievementService/"
                  behaviorConfiguration="RestBehavior"
                  binding="webHttpBinding"
                  contract="Service.Main.Contracts.IAchievementService"/>
        <endpoint address="mex" 
                  binding="mexHttpBinding" 
                  contract="IMetadataExchange" />
      </service>
    </services>

    <behaviors>
      <endpointBehaviors>
        <behavior name="RestBehavior">
          <webHttp helpEnabled="true" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
</configuration> 
```

如果我使用包含值“http://localhost”的基地址，我可以在我的 web 服务中访问 get 方法、元数据、帮助等。但是当我将它更改为成就者.apphb.com 并构建它时，我只在[http://achiever.apphb.com/AchievementService/](http://achiever.apphb.com/AchievementService/)或[http://achiever.apphb.com/收到 404](http://achiever.apphb.com/)

我尝试过的是各种地址配置，我尝试过在 appharbor 构建的 localhost，结果相同。我也搜索了一些例子，但我没有找到任何可以帮助我解决这个问题的东西。

该服务已部署并且不包含任何测试，来自 appharbor 的注释：

```
5/5/12 6:02 PM: Received notification, queuing build
5/5/12 6:02 PM: Downloading source
5/5/12 6:02 PM: Downloaded source in 0.27 seconds
5/5/12 6:02 PM: Starting build
5/5/12 6:02 PM: 0 warnings
5/5/12 6:02 PM: Build completed in 1.57 seconds Details
5/5/12 6:02 PM: Starting website precompilation
5/5/12 6:02 PM: Precompilation completed
5/5/12 6:02 PM: Starting tests
5/5/12 6:02 PM: Tests completed in 2.39 seconds
5/5/12 6:02 PM: Build successfully deployed
Tests

Build contains no tests 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:25:11.513

请检查您的构建状态和测试。如果您的一项测试失败，则无法部署该项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:45:37.060

我遇到了 WCF 服务的元数据问题。但是能够使用 *.svc 位置看到 WCF 服务在那里。[http://achiever.apphb.com/AchievementService/](http://achiever.apphb.com/AchievementService/[Name) [您的服务名称].svc是否适合您？

编辑：试试这个修复[在 AppHarbor 上托管 WCF Web API 应用程序？](https://stackoverflow.com/questions/6186090/hosting-a-wcf-web-api-app-on-appharbor)

# java - 使用 geotools 可视化编辑地理数据

> ID：10463724
> 
> 赞同：0
> 
> 时间：2012-05-05T16:22:24.270
> 
> 标签：java, geotools

使用 JMapFrame，我具有可视化地理数据的功能，但我不知道如何添加工具来编辑这些数据，就像使用 GIS 应用程序一样。是否有可能做到这一点？

问候，

奥古斯托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:23:51.250

[JMapFrame 显然是在http://geotools.org/](http://geotools.org/)上发布的开源工具包的一部分

由于它是开源的，因此您可以添加任何您喜欢的功能。你只需要实现它。

# jquery - jQuery Tabs - 在页面重新加载时获取选定的选项卡

> ID：10463725
> 
> 赞同：0
> 
> 时间：2012-05-05T16:22:39.423
> 
> 标签：jquery, tabs, selecteditem

我正在使用[jqueryfromdesigners](http://jqueryfordesigners.com/jquery-tabs/)的 jQuery Tabs 函数，但只有第一个示例适用于我。这是我使用的脚本代码：

```
 <script type="text/javascript" charset="utf-8">
$.noConflict();
        $(function () {
            var tabContainers = $('div.tabs > div');
            tabContainers.hide().filter(':first').show();

            $('div.tabs ul.tabNavigation a').click(function () {
                tabContainers.hide();
                tabContainers.filter(this.hash).show();
                $('div.tabs ul.tabNavigation a').removeClass('selected');
                $(this).addClass('selected');
                return false;
            }).filter(':first').click();
        });
    </script> 
```

这是显示选项卡的演示代码：

```
<div class="tabs">
  <!-- tabs -->
  <ul class="tabNavigation">
    <li><a href="#first">Send a message</a></li>
    <li><a href="#second">Share a file</a></li>
    <li><a href="#third">Arrange a meetup</a></li>
  </ul>

  <!-- tab containers -->
  <div id="first">
    <p>Lorem ipsum dolor sit amet.</p>
  </div>
  <div id="second">
    <p>Sed do eiusmod tempor incididunt.</p>
  </div>
  <div id="third">
    <p>Ut enim ad minim veniam</p>
  </div>
</div> 
```

我已经更改了代码供我使用。现在在 tab-content-divs 中显示了我通过 php 获取的信息。此内容中有许多链接，单击时会重新加载页面。

当用户单击#tab2 中的链接时，如何实现该页面重新加载并显示最后选择的#tab2？现在它总是显示#tab0 ...

我将不胜感激任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:21:26.623

Thx again for your reply!

I tried several variations, but nothing worked...

If I use the following code, where I implemented the first code from you below my tab-script in a separate call nothing happens:

```
 <script type="text/javascript" charset="utf-8">
$.noConflict();
        $(function () {
            var tabContainers = $('div.tabs > div');
            tabContainers.hide().filter(':first').show();

            $('div.tabs ul.tabNavigation a').click(function () {
                tabContainers.hide();
                tabContainers.filter(this.hash).show();
                $('div.tabs ul.tabNavigation a').removeClass('selected');
                $(this).addClass('selected');
                return false;
            }).filter(':first').click();
        });
    </script>
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
     tabContainers.hide();
     tabContainers.filter(window.location.hash).show();
     $('div.tabs ul.tabNavigation a').removeClass('selected');
     return false;

});
</script> 
```

I choose a tab (for example tab#3), click on a link, the site reloads I still get displayed tab#1...

2nd version I tried:

```
 <script type="text/javascript" charset="utf-8">
$.noConflict();
        $(function () {
            var tabContainers = $('div.tabs > div');
            tabContainers.hide().filter(':first').show();

            $('div.tabs ul.tabNavigation a').click(function () {
                tabContainers.hide();
                tabContainers.filter(this.hash).show();
                $('div.tabs ul.tabNavigation a').removeClass('selected');
                $(this).addClass('selected');
                return false;
            }).filter(':first').click();
        });
    </script>
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
     tabContainers.hide();
     tabContainers.filter(window.location.hash).show();
     $('div.tabs ul.tabNavigation a').removeClass('selected');
     return false;

});
</script> 
```

Same as before, the site reloads and shows tab#1...

With the third version the tabs are all hidden, I first need to click on a tab to get it displayed...

```
 <script type="text/javascript" charset="utf-8">
$.noConflict();
        $(function () {
            var tabContainers = $('div.tabs > div');
            tabContainers.hide().filter(':first').show();

            $('div.tabs ul.tabNavigation a').click(function () {
                tabContainers.hide();
                tabContainers.filter(this.hash).show();
                $('div.tabs ul.tabNavigation a').removeClass('selected');
                $(this).addClass('selected');
                return false;
            }).filter(':first').click();

$(document).ready(function(){
     tabContainers.hide();
     tabContainers.filter(window.location.hash).show();
     $('div.tabs ul.tabNavigation a').removeClass('selected');
     return false;
});

});
</script> 
```

On click and site-reload the tabs are hidden again...

It would be great if you could take another look at this. I don't know what to do to get this running...

Cheers!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:26:05.537

您需要使用 url 添加一个哈希标签，并且在页面加载时您可以使用`window.location.hash`. 根据哈希标签，您可以选择相应的选项卡

所以在你的情况下，一个简单的解决方法是

```
$(document).ready(function(){
     tabContainers.hide();
     tabContainers.filter(window.location.hash).show();
     $('div.tabs ul.tabNavigation a').removeClass('selected');
     return false;

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:31:01.277

您可以与[cookie一起使用](http://docs.jquery.com/UI/Tabs#option-cookie)

```
$( ".selector" ).tabs({ cookie: { expires: 30 } }); 
```

# c++ - 构造函数调用组合

> ID：10463727
> 
> 赞同：-1
> 
> 时间：2012-05-05T16:23:05.693
> 
> 标签：c++, composition

我有以下合成代码。它会产生错误，

```
#include <iostream>

using namespace std;

class X
{
      private:
              int iX;
      public:
             X(int i=0) : iX(i) { cout <<"Constructing X.."<<endl; } 
             ~X() { cout <<"Destructing X.."<<endl; }

             int getIX() { return iX; } 
};

class Y
{
      private:
              X x(3);
              int jY;
      public:
             Y(int j = 0) : jY(j) { cout <<"Constructing Y.."<<endl; }
             ~Y() { cout <<"Destructing Y.."<<endl; }
             void callGetX() { cout <<"iX is "<<(x.getIX())<<endl; }
};

int main()
{
    Y yObj(1);
    yObj.callGetX();
} 
```

错误：在成员函数 void Y::callGetX() 'x' 中未声明（首先使用此函数）

有什么我错过的吗？谁能告诉我这个场景的构造函数调用机制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T16:35:28.603

```
X x(3); 
```

这在 C++ 中是不合法的（在 Java AFAIK 中是合法的）。实际上，它使编译器认为这`x`是一个返回类对象的成员函数，`X`而不是考虑类`x`的成员变量`X`。

而是这样做：

```
Y(int j = 0) : jY(j), x(3) { cout <<"Constructing Y.."<<endl; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T16:26:03.413

您将成员放在初始化列表中：

```
Y(int j = 0) : x(3), jY(j) 
```

你的语法：

```
class Y
{
private:
   X x(3);
//...
}; 
```

是非法的。

# scala - 规范化验证错误类型

> ID：10463729
> 
> 赞同：3
> 
> 时间：2012-05-05T16:23:24.843
> 
> 标签：scala, scalaz

我试图找到最方便的方法来规范化一个“上”层中的 scalaz.Validations 中的错误类型，该层调用返回“下”层上具有不同错误类型的验证的方法。自然地，需要为每个较低级别的错误类型定义一个到上层错误类型的映射，但我似乎无法绕过在 for 理解中提供显式类型提示，以便获取我的隐式。我想将错误类型的显式转换（例如通过 .fail.map(...).validation如下：

```
package errorhandling

import scalaz._
import Scalaz._

class LowerServiceA {
  def doStuff(): Validation[LowerServiceAError, Int] = Success(1)
}
sealed trait LowerServiceAError
// ... more specific error types

class LowerServiceB {
  def doStuff(): Validation[LowerServiceBError, Int] = Success(1)
}
sealed trait LowerServiceBError
// ... more specific error types

class LowerServiceC {
  def doStuff(): Validation[LowerServiceCError, Int] = Success(1)
}
sealed trait LowerServiceCError
// ... more specific error types

sealed trait UpperError {}
// ... more specific error types
trait IsUpperError[E] {
  def apply(e: E): UpperError
}
object IsUpperError {
  implicit val lowerServiceAErrorIsUpperError: IsUpperError[LowerServiceAError] = new IsUpperError[LowerServiceAError] {
    def apply(err: LowerServiceAError) = new UpperError {}
  }

  implicit val lowerServiceBErrorIsUpperError: IsUpperError[LowerServiceBError] = new IsUpperError[LowerServiceBError] {
    def apply(err: LowerServiceBError) = new UpperError {}
  }

  implicit val lowerServiceCErrorIsUpperError: IsUpperError[LowerServiceCError] = new IsUpperError[LowerServiceCError] {
    def apply(err: LowerServiceCError) = new UpperError {}
  }
}

object UpperError {
  implicit def upperError[E: IsUpperError, A](v: Validation[E, A]): Validation[UpperError, A] =
    v.fail.map(e => implicitly[IsUpperError[E]].apply(e)).validation
}

class UpperService(serviceA: LowerServiceA, serviceB: LowerServiceB, serviceC: LowerServiceC) {
  def doStuff(): Validation[UpperError, Int] = {
    for {
      // I'd like to avoid the repeated type-hints or .fail.map(...).validation here
      a <- serviceA.doStuff() // : Validation[UpperError, Int]
      b <- serviceB.doStuff() // : Validation[UpperError, Int]
      c <- serviceC.doStuff()
    } yield a + b + c
  }
} 
```

没有类型提示的编译器错误（2.9.2）：

```
ErrorHandling.scala:56: error: could not find implicit value for evidence parameter of type errorhandling.IsUpperError[java.lang.Object]
  b <- serviceB.doStuff() //: Validation[UpperError, Int]
    ^ 
```

发现一个错误

如果做这种事情的愿望暗示了我如何处理这种错误处理的问题，我也很感激指导。

# python - “[float(n)-50 for n in range(100)]” - 这是做什么的？

> ID：10463736
> 
> 赞同：2
> 
> 时间：2012-05-05T16:25:08.747
> 
> 标签：python

我偶然发现了这个单行：

```
[float(n)-50 for n in range(100)] 
```

有人可以告诉我它的作用吗？它应该为向量返回一个浮点值。

最好的，马吕斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T16:27:20.403

这是一个[列表理解](http://www.secnetix.de/olli/Python/list_comprehensions.hawk)，其内容为“创建一个包含 100 个元素的列表，以便对于 index 处的每个元素`n`，将该元素设置为等于 n-50”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:28:21.727

这是一个[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

> 列表推导式提供了一种创建列表的简洁方式。常见的应用是创建新列表，其中每个元素是应用于另一个序列或可迭代的每个成员的某些操作的结果，或者创建满足特定条件的那些元素的子序列。
> 
> 例如，假设我们要创建一个正方形列表，例如：
> 
> ```
> >>> squares = []
> >>> for x in range(10):
> ...     squares.append(x**2)
> ...
> >>> squares 
> [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
> ```
> 
> 我们可以通过以下方式获得相同的结果：
> 
> ```
> squares = [x**2 for x in range(10)] 
> ```
> 
> 这也等价于`squares = map(lambda x: x**2, range(10))`，但更简洁易读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T16:50:00.717

它的含义与以下内容相同：

```
[float(x) for x in range(-50, 50)] 
```

或者（至少在 Python 2 中）：

```
map(float, range(-50, 50)) 
```

如果您知道列表推导式或函数的工作原理，这些是不言自明的`map`：它们将整数范围`-50...50`转换为浮点数列表（上 50 个是不包括的）。结果是列表：

```
[-50.0, -49.0 ... 49.0] 
```

# objective-c - 如何将鼠标右键菜单添加到 NSCollectionViewItem

> ID：10463740
> 
> 赞同：5
> 
> 时间：2012-05-05T16:25:23.227
> 
> 标签：objective-c, nscollectionview

我有一个问题。如何将鼠标右键菜单添加到 NSCollectionViewItem。作为尝试，我还使用 Apple 的演示应用 IconCollection。我尝试将 NSMenu 拖到 IconViewPrototype.xib 并将其连接到 IB 中的视图菜单出口。但是在构建和运行时，单击鼠标右键，没有任何反应。我认为NSBox 也是 NSView 的子类，应该支持鼠标右键菜单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:18:02.177

我最终创建了一个`NSView`子类用作`CollectionViewItem`. 在那里我设置了一个委托（在 IB 中连接），并使用它来捕获鼠标右键并打开菜单：

```
-(void)rightMouseDown:(NSEvent *)theEvent {
NSMenu *menu = [self.delegate menuForCollectionItemView:self];
[menu popUpMenuPositioningItem:[[menu itemArray] objectAtIndex:0]
                    atLocation:NSZeroPoint
                        inView:self];
} 
```

这仍然需要一些代码来定位用户单击的菜单，但这是一个开始。

如果有人有更清洁的方法，我很想听听。

# html - 使用 CSS 为单个单词着色

> ID：10463741
> 
> 赞同：14
> 
> 时间：2012-05-05T16:25:30.700
> 
> 标签：html, css

我想设置`<pre>`块中单个单词的颜色（粗略地说，用于显示带有语法突出显示的代码）。不推荐使用该`<font>`标签以支持使用 CSS，这很公平；什么是必需的语法？特别是，单词应该包含在什么元素中？我以前曾经`<div>`为 CSS 样式标记文本块，但这似乎只适合标记完整的段落。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-05T16:27:12.147

您应该使用最简单、最通用的[内联](http://htmldog.com/guides/cssadvanced/display/)元素：[`<span>`](https://developer.mozilla.org/en/HTML/Element/span). 对于每种类型的标记，为跨度指定一个或多个适当的类。例如：

```
<span class="type">int</span>
<span class="name">foo</span>
<span class="op">=</span>
<span class="number literal">42</span> 
```

[**看到它在行动**](http://jsfiddle.net/Fgdm8/)。

**更新：** StackOverflow 也进行代码高亮——上面的代码被高亮了！它的 HTML 是什么样的？查看源 HTML 显示第一行使用突出显示

```
<span class="tag">&lt;span</span>
<span class="pln"> </span>
<span class="atn">class</span>
<span class="pun">=</span>
<span class="atv">"type"</span>
<span class="tag">&gt;</span>
<span class="pln">int</span>
<span class="tag">&lt;/span&gt;</span>

// and it goes on 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-05T16:28:18.687

使用带有样式属性的跨度。像：

```
This is a <span style="color:#f00;">sentence</span>. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-05T16:27:32.557

[`<span>`](https://developer.mozilla.org/en/HTML/Element/span)

> 此 HTML 元素是用于表达内容的通用内联容器，它本身并不代表任何内容。它可用于对元素进行分组以进行样式化（使用 class 或 id 属性），或者因为它们共享属性值，例如 lang。只有在没有其他语义元素是合适的时候才应该使用它。`<span>`非常像一个`<div>`元素，但`<div>`它是一个块级元素，而 a`<span>`是一个内联元素。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-05T16:28:43.343

使用`<span class="red">text</span>`和一些基本的 CSS，比如`.red { color: red; }`

编辑：注意类名“red”不是一个好习惯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T19:31:21.967

这里没有标记魔法：您可以使用任何内联标记，并且您可以在 CSS 中执行魔法（着色或其他格式）。从技术上讲，并非所有的内联标记在内部都是有效的`pre`，但浏览器并不真正关心。更重要的是，一些内联标记具有一些默认呈现或功能。

如果您不想要任何默认渲染，您可以使用`a`or `font`or`span`标记，当它们没有属性并且没有样式时，它们对任何东西都没有影响。如果您想要一些默认呈现，您可以使用相应的标记（如果存在），例如`b`粗体或`u`下划线。这意味着即使不使用您的样式表，也会应用一些特殊的表示。

`span`正如其他答案中所建议的那样，大多数人决定使用 just 。这很简单，没有人可以声称它有“错误的语义”，因为它没有。但真正的魔力在于 CSS，您使用标记只是将某些字符序列区分为一个元素，以便可以将其设置为一个单元。

`font`与您可能听到的大多数人所说的相反，当您真正进行一些字体设置时，使用它并没有本质上的错误。但是像`<font color=red>`. 如果您有大量这样的标签，而您的老板、客户或妻子告诉您使用不同的红色阴影，您将不得不更改无数标签，可能在几十个文件中。但是，如果您编写了`<font class=keyword>`or `<a class=keyword>`，或者，如果您愿意，`<span class=keyword>`并且您使用在所有 HTML 文件中引用的 CSS 文件，则只需更改该 CSS 文件中的一个值。

# r - ggroup 的 gWidgets 和 rGtk2 问题

> ID：10463755
> 
> 赞同：3
> 
> 时间：2012-05-05T16:27:28.637
> 
> 标签：r, gtk2, gwidgets

在 ubuntu 12.04 上，我安装了 gWidgets 并打算使用 RGtk2 绑定。现在，调用单个组件，例如

```
obj <- gbutton("hello man!", container = gwindow()) 
```

有效，但还有其他基本功能

```
win <- gwindow("main app")
group <- ggroup(container = win) 
```

我收到未安装某些东西时通常会遇到的错误

```
Error in add(tag(obj, "contentPane"), value, expand = TRUE, fill = "both") : 
  error in evaluating the argument 'obj' in selecting a method for function 'add': Error     
  in function (classes, fdef, mtable)  : unable to find an inherited method for function   
 ".tag", for signature "<invalid>", "guiWidgetsToolkitRGtk2" 
```

我尝试重新安装 libgtk-dev，以及 R 和 gWidgets，但没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:35:23.453

我遇到了同样的错误。我意识到我没有安装依赖项，所以我安装了 cairoDevice 包，它运行良好。希望这有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:04:06.357

嗯，这似乎是 gwindow 对象在作为容器传递给组容器之前无效的问题。当未指定工具包时，我已经看到类似的问题。要查看这是否是导致此问题的原因，请尝试复制并粘贴此代码：

```
library(gWidgets)
options(guiToolkit="RGtk2")

w <- gwindow()
g <- ggroup(cont=w)
l <- glabel("it is working", cont=g) 
```

# c# - WP7：有条件地显示和隐藏数据模板中的控制元素

> ID：10463759
> 
> 赞同：0
> 
> 时间：2012-05-05T16:27:53.583
> 
> 标签：c#, windows-phone-7, xaml, silverlight-3.0

我有一个带有 ListBox 控件的笔记应用程序，它列出了`ObservableCollection<Note> Notes`. `class Note`具有类似的属性

```
String Title;
bool Has_Reminder;
DateTime Reminder_Date; 
```

我想要的是显示 的 TextBlock 元素仅在为真`Reminder_Date`时才显示。`Has_Reminder`但我不知道如何从我的自定义控件 NoteListItem 访问此属性。它的`this.DataContext`属性是`null`，但该控件仍能正确显示由 ListBox ItemsSource 传递的 Note 的绑定属性。我怎样才能做到这一点？

谢谢你的帮助。

**我试图读取构造函数中的属性，但不起作用：**

```
public NoteListItem()
{
    InitializeComponent();

    Note this_note = LayoutRoot.DataContext as Note; // turns out, this_note is null

    if (!this_note.Has_Reminder)
        Reminder_Info.Visibility = System.Windows.Visibility.Collapsed;
} 
```

**NoteListItem 控件**

```
<Grid x:Name="LayoutRoot" >
    <TextBlock x:Name="Title" Text="{Binding Title}" />
    <TextBlock x:Name="Reminder_Date" Text="{Binding Reminder_Date}" />
</Grid> 
```

**笔记列表控件：**

```
<ListBox x:Name="NoteListBox" ItemsSource="{Binding Notes}" >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <local:NoteListItem />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:46:20.387

你知道如何使用转换器吗？您的转换器会将 bool 转换为 Visibility，然后您可以将 TextBlock 的 Visibility 绑定到`Has_Reminder`：

```
<TextBlock x:Name="Reminder_Date" Text="{Binding Reminder_Date}" Visibility="{Binding Has_Reminder, Converter={...}}"/> 
```

这可能会有所帮助： http: [//www.jeff.wilcox.name/2008/07/visibility-type-converter/](http://www.jeff.wilcox.name/2008/07/visibility-type-converter/)

# url - 非常简单的 URL 重写 - 请帮助

> ID：10463763
> 
> 赞同：0
> 
> 时间：2012-05-05T16:28:28.747
> 
> 标签：url, iis-7, url-rewriting, windows-server-2008-r2

Windows Server 2008 R2 上的 IIS。

我有以下内容（由 URL rewrite 2.0 生成）：

```
<rule name="RewriteUserFriendlyURL1" stopProcessing="true">
<match url="^/([^/]+)/?$" />
    <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="?p={R:1}" appendQueryString="true" logRewrittenUrl="true" /> 
```

我以为这会导致

[http://localhost/56321](http://localhost/56321)

被交互为：

[http://localhost/?p=56321](http://localhost/?p=56321)

任何人都可以看到它错了吗？它只是给出一个 404 错误。

我还尝试了一个 url 重定向规则，它工作正常，所以我知道该模块正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:59:24.057

您的解决方案是正确的，但与 URL 匹配的正则表达式不应以斜杠开头。以下作品：

```
<rule name="RewriteUserFriendlyURL1" stopProcessing="true">
    <match url="^([^/]+)/?$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="?p={R:1}" appendQueryString="true" logRewrittenUrl="true" />
</rule> 
```

希望这可以帮助。

# linux - 反汇编 /proc/kcore 时，objdump 和 udis86 产生不同的输出

> ID：10463764
> 
> 赞同：2
> 
> 时间：2012-05-05T16:28:33.273
> 
> 标签：linux, disassembly, objdump

我需要`/proc/kcore`在 Linux 中反汇编文件，并且需要获取一些特殊指令的虚拟地址，以便`kprobes`稍后放置。根据[这个文件](http://tldp.org/LDP/Linux-Filesystem-Hierarchy/html/proc.html) `/proc/kcore`是物理内存的图像，但在[这个问题](https://stackoverflow.com/questions/4882755/difference-between-kcore-mem-kmem-in-proc-directory)中有人回答说它是内核的虚拟内存（正是我正在寻找的）。

当我使用`objdump`工具反汇编它时，它以类似的地址开头`f7c0b000`，但[udis86](http://udis86.sourceforge.net/)以 0x0 开头（和完全不同的指令）。当我尝试`grep`一些特定的指令时，比如说`mov 0xf7c1d60c,%edx`，我得到了：

**对象转储**

```
f7c0b022 mov    0xf7c1d60c,%edx 
```

**udis86**

```
290ec02a mov    0xf7c1d60c,%edx 
```

看起来和之间的偏移`udis86`量`objdump`总是`0xbffff000`。为什么这么奇怪的偏移量？如何获取特定指令的虚拟地址？我读过的某个地方，该内核被静态映射到虚拟地址 0xc0000000 + 0x100000。如果`/proc/kcore`真的是物理图像，只将 0x100000 添加到返回的地址是否正确`objdump`，我将获得虚拟地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:57:29.633

`objdump`理解`ELF`格式文件（例如`/proc/kcore`）。它能够提取文件的可执行部分，同时忽略不可执行的内容（例如`.note`部分）。

您可以`ELF`使用该`-h`标志查看可执行文件的结构，例如：

```
# objdump -h /proc/kcore
/proc/kcore:     file format elf64-x86-64

Sections:
Idx Name          Size      VMA               LMA               File off  Algn
  0 note0         00001944  0000000000000000  0000000000000000  000002a8  2**0
                  CONTENTS, READONLY
  1 .reg/0        000000d8  0000000000000000  0000000000000000  0000032c  2**2
                  CONTENTS
  2 .reg          000000d8  0000000000000000  0000000000000000  0000032c  2**2
                  CONTENTS
  3 load1         00800000  ffffffffff600000  0000000000000000  7fffff602000  2**12
                  CONTENTS, ALLOC, LOAD, CODE
(...) 
```

It looks like the `udcli` tool from `udis86` probably starts disassembling things from the beginning of the file, which suggests that your output will probably start with a bunch of irrelevant output and it's up to you to figure out where execution starts.

**UPDATE**

Here's the verification. We use [this answer](https://stackoverflow.com/questions/3925075/how-do-you-extract-only-the-contents-of-an-elf-section) to extract the first `load` section from /proc/kcore, like this:

```
# dd if=/proc/kcore of=mysection bs=1 skip=$[0x7fffff602000] count=$[0x00800000] 
```

And now if we view that with `udcli`:

```
# udcli mysection
0000000000000000 48               dec eax                 
0000000000000001 c7c060000000     mov eax, 0x60           
0000000000000007 0f05             syscall                 
0000000000000009 c3               ret                     
000000000000000a cc               int3                    
000000000000000b cc               int3 
```

We see that it looks almost identical to the output of `objdump -d /proc/kcore`:

```
# objdump -d /proc/kcore
/proc/kcore:     file format elf64-x86-64

Disassembly of section load1:

ffffffffff600000 <load1>:
ffffffffff600000:       48 c7 c0 60 00 00 00    mov    $0x60,%rax
ffffffffff600007:       0f 05                   syscall 
ffffffffff600009:       c3                      retq   
ffffffffff60000a:       cc                      int3   
ffffffffff60000b:       cc                      int3 
```

# jquery - Jquery.show() 函数不适用于 ASP 更新面板中的 div

> ID：10463767
> 
> 赞同：-1
> 
> 时间：2012-05-05T16:28:46.377
> 
> 标签：jquery, updatepanel

我有一个asp更新面板和一个div。但是 jquery show 函数不适用于这个 div。有什么办法让它工作吗？

```
 $(document).ready(function () {
        $("#answerButton0").click(function() {
            $("#answerPanel0").show("slow");
        });

    });

<asp:UpdatePanel ID="updateQuestions" runat="server">
                <ContentTemplate>
                    <div class="descHeader" style="width: 600px;">
                        <asp:Label ID="Label2" runat="server" Text="Last 10 Questions"></asp:Label>
                    </div>
                    <div class="descContent" style="width: 600px; height: auto;">
                        <asp:Timer ID="timerPageLoad" runat="server" Interval="500" OnTick="timerPageLoad_Tick" />
                        <div id="loading" style="display: none; height: 60px;">
                            <asp:Image ID="img1" runat="server" ImageUrl="~/images/site/process.gif" />
                        </div>
                        <div id="questionsPanelDiv" style="display: none;">
                            <asp:Panel ID="pnlQuestions" runat="server">
                            </asp:Panel>
                        </div>
                    </div>
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="btnAsk" EventName="Click" />
                </Triggers>
            </asp:UpdatePanel> 
```

***#answerPanel0 和 #answerButton0 是从 pnlQuestions 面板后面的代码动态创建的。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:43:12.553

```
 $(document).ready(function () {
        $('#answerButton0').live('click', function () {
            $('#answerPanel0').show('slow');
        });
    }); 
```

# objective-c - 如何保存在 UIWebview 控件中显示的 PDF（无需从网络重新加载）？

> ID：10463770
> 
> 赞同：4
> 
> 时间：2012-05-05T16:29:19.397
> 
> 标签：objective-c, ios, pdf, uiwebview

我有一个可能是 PDF 的应用程序打开 URL。我可以检测到在 UIWebView 控件中打开了 PDF，如果是这样，我建议将其保存在本地，在 iPad 中。迄今为止，我找到的唯一解决方案（如本主题中所述：[保存由 UIWebView 在本地显示的 PDF 是](https://stackoverflow.com/questions/9569812/save-pdf-which-is-displayed-by-uiwebview-locally)在新的 NSData 对象中重新加载远程 PDF 文件，然后将其保存到磁盘。

是否可以使用 UIWebView 的 NSData 属性，并将其直接写入磁盘，以避免重新加载已经加载和显示的潜在大型 PDF 文件？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:37:45.467

我认为您无法访问 UIWebView 缓存的数据。但是，您可以先从本地 PDF 下载 PDF，然后在 UIWebView 中显示。

***编辑***

阅读您的问题，我了解：

*   首先，您在 UIWebView 中显示 PDF。
*   您要求用户下载。
*   您下载 PDF（PDF 的第二次请求）。

我建议你：

*   检查 URL 是否为 PDF。
*   要求用户下载。
*   下载它。
*   **在加载本地**文件的 UIWebView 中显示 PDF 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:38:12.627

您是否检查了 UIWebView 内容，使用...

```
NSString HtmlCOntent = [NSMutableString stringWithString:[self.webView stringByEvaluatingJavaScriptFromString:@"document.body.outerHTML"]]; 
```

它可以帮助您了解 WebView 如何处理 PDF 文件的内容

# jquery - jquery 重构：遍历

> ID：10463771
> 
> 赞同：-2
> 
> 时间：2012-05-05T16:29:27.487
> 
> 标签：jquery, jquery-ui

这是一些我想做得更好的很棒的代码。

```
select: function(event, ui)      
  {
  jQuery(this).siblings('div.hidden_fields').children('.poly_id').val(ui.item.user)
} 
```

它是`select`jquery UI 自动完成的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:35:33.953

你可以试试这个

```
jQuery('div.hidden_fields .poly_id',jQuery(this).parent()).val(...); 
```

请记住，您始终可以为 jQuery 选择器提供上下文

```
jQuery("someselector", context) 
```

# asp.net-mvc - 带参数的 T4MVC 和 Ajax 方法

> ID：10463773
> 
> 赞同：1
> 
> 时间：2012-05-05T16:29:41.610
> 
> 标签：asp.net-mvc, t4mvc

我正在尝试将 T4MVC 应用于我的项目。比如说，我有一个 ajax 搜索框，它调用 Home/SearchQuery 操作，该操作将字符串 q 作为参数。如何在 T4MVC 中编写该行？

从 Ajax.BeginForm("SearchQuery", "Home", .... 到 Ajax.BeginForm(MVC.Home.SearchQuery(???)...

.cshtml 文件

```
@using (Ajax.BeginForm("SearchQuery", "Home", /* <-----Convert to T4MVC Here */
        new AjaxOptions {
            LoadingElementId = "loadingGif",
            OnSuccess = "parseResults",
            OnFailure = "searchFailed"
        })) {
    <input type="text" name="q" />
    <input type="submit" value="Search" />
    <img id="loadingGif" style="display:none" src="@Url.Content("~/content/images/loading.gif")" />
}

<div id="searchResults" style="display: table"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:40:20.413

你`q`是从表单中的输入提交的，所以你可以写

```
@using (Ajax.BeginForm(MVC.Home.SearchQuery(),
        new AjaxOptions {
            LoadingElementId = "loadingGif",
            OnSuccess = "parseResults",
            OnFailure = "searchFailed"
        })) {
    <input type="text" name="q" />
    <input type="submit" value="Search" />
    <img id="loadingGif" style="display:none" src="@Url.Content("~/content/images/loading.gif")" />
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:23:28.570

另一个可能的答案：重新生成模板

我知道这有点愚蠢，但我来到这里只是因为我忘记使用模板重新生成类（在重新生成模板之前可以访问带参数的新方法）。也许有人会发现这很有用。

# php - 带有二维数组的 socket_select()

> ID：10463774
> 
> 赞同：1
> 
> 时间：2012-05-05T16:30:10.813
> 
> 标签：php, sockets, multidimensional-array

我正在尝试使我的 PHP 服务器更有效率。我构建了一个名为的对象`Client`，其中包含已连接的客户端（与服务器有一个开放的套接字连接）信息，例如`name`等`id`。

现在我有一组套接字连接和一组客户端对象。当我提到一个连接时，我在我的客户端数组中搜索以找到与该连接匹配的正确客户端。它工作得很好，但效率有点低..对于服务器中的少量客户端你感觉不到，但我担心如果我有成千上万的连接它会减慢服务器的速度。

作为解决方案，我考虑了二维数组，但我在设计它时遇到了逻辑问题。

我可以做这样的事情：

```
$clients = array();
$temp = array($newsock, new Client());
$clients[] = $temp; 
```

我希望我`$clients[]`成为套接字和`$clients[][]`客户端对象。在每一行中，`$client`我将只有`$client[$index][0]`哪个将是我用于该连接的客户端对象。我可以将其发送到`socket_select()`函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:39:19.693

你说你在你的客户对象中有一个`id`属性。为什么不使用它`id`作为两个数组的键呢？

*   套接字连接数组
*   客户端对象数组

您甚至可以将连接和客户端对象保存在一个数组中，每个对象都在一个对象中，使用我之前谈到的相同键——客户端`id`。

无论如何，无论您决定存储客户端连接对象，您都可以将其传递给所有相关的套接字函数 -

*   `socket_select();`
*   `socket_accept();`
*   `socket_write();`
*   ETC...

* * *

关于您的服务器的效率，我实现了一些分叉以将数据广播到大量客户端（所有客户端都在聊天服务器的示例中）。

这是我用于分叉广播的实现 -

```
function broadcastData($socketArray, $data){
        global $db;
        $pid = pcntl_fork();
        if($pid == -1) {
                // Something went wrong (handle errors here)
                // Log error, email the admin, pull emergency stop, etc...
                echo "Could not fork()!!";
        } elseif($pid == 0) {
                // This part is only executed in the child
                foreach($socketArray AS $socket) {
                        // There's more happening here but the essence is this
                        socket_write($socket,$msg,strlen($msg));
                        // TODO : Consider additional forking here for each client. 
                }
                // This is where the signal is fired
                exit(0);
        }
        // The child process is now occupying the same database 
        // connection as its parent (in my case mysql). We have to
        // reinitialize the parent's DB connection in order to continue using it. 
        $db = dbEngine::factory(_dbEngine); 
} 
```

上面的代码是从我以前的问题中提取的（这是[自我回答](https://stackoverflow.com/a/10114945/558021)的）。
[终止从套接字服务器派生的僵尸子进程](https://stackoverflow.com/q/9976441/558021)

如果您选择开始分叉进程，也许它可能会对您有所帮助。

# gwt - 将列表子编辑器添加到选项卡面板

> ID：10463782
> 
> 赞同：0
> 
> 时间：2012-05-05T16:30:57.480
> 
> 标签：gwt, gwt2, gwt-editors

我曾经`ListEditor`允许编辑儿童列表，我所做的一切就像我在一些示例中看到的那样。与示例的唯一区别是我希望将编辑儿童的小部件作为选项卡添加到某些`TabLayoutPanel`.

问题是我想给这个新选项卡一个标题，这个标题不是恒定的，而是取决于新创建的子编辑器正在编辑的对象（所以让标题是`child.getName()`），我不知道内部`EditorSource#create()`方法。

```
ListEditor<ChildProxy, ChildPanel> children = ListEditor
        .of(new EditorSource<ChildPanel>() {

            @Override
            public ChildPanel create(int index) {
                ChildPanel tab = new ChildPanel();
                //here's a problem, how I can get tabHeader here?
                tabPanel.add(tab,tabHeader);
            }

        }); 
```

如何将依赖于值的标题设置为由创建的选项卡`create()`？任何帮助/解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:58:13.427

这种方法是否适合您：

```
public class ChildrenEditor extends Composite implements
        IsEditor<ListEditor<Child, ChildInTabEditor>> {

    ListEditor<Child, ChildInTabEditor> editor;

    public ChildrenEditor() {
        initWidget(uiBinder.createAndBindUi(this));
        editor = ListEditor.of(new ChildInTabEditorSource());
    }

    private class ChildInTabEditorSource extends EditorSource<ChildInTabEditor> {

            public ChildInTabEditor create(int index) {
                ChildInTabEditor tab = new ChildInTabEditor();
                // here's the trick :
                Child child = editor.getList().get(index);
                tabPanel.add(tab,child.getTabTitle());
                return tab;
            }

      }

    @Override
    public ListEditor<Child, ChildInTabEditor> asEditor() {
        return editor;
    }

} 
```

`ChildInTabEditor`也必须是实现的选项卡`Editor<Child>`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:45:29.117

对我有用的是传递`tabPanel`和`index`新创建`ChildPanel()`并制作它`ValueAwareEditor`。然后我在给定的参考上`setValue()`设置标题。`tabPanel``index`

# java - Maven - 依赖解析失败，包存在于本地仓库中

> ID：10463785
> 
> 赞同：0
> 
> 时间：2012-05-05T16:31:27.953
> 
> 标签：java, dependencies, maven-3, dependency-management, maven-gae-plugin

我正在使用`maven-gae-plugin`http://code.google.com/p/maven-gae-plugin/[使用](http://code.google.com/p/maven-gae-plugin/)继承创建一个多模块项目（父项目参考）

我的结构如下：

```
|
`-- pom.xml
|-- base-api-project (packaging=jar)
|   `-- pom.xml
|-- main-www-project (packaging=war)
|   `-- pom.xml 
```

根`pom.xml`配置为父 + 聚合器（参考`modules`）。

当我使用根 pom.xml 构建时，一切都被编译和打包。

但是，当我`mvn gae:run`在`main-www-project`文件夹中运行时，我收到一个错误，即`base-api-project`在已注册的存储库中找不到。我扫描所有注册的存储库...

但我的问题是......如果它已经存在`~/.m2/repository`，那我为什么要在网上寻找呢？

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:21:36.893

使用快照版本时，maven 将始终查找最新的快照，而版本将首先在本地解析。
但是，本地 repo 中的每个工件也将需要相应的 POM，并且该 POM 可能声明不在本地 repo 中的依赖项，或者是快照版本（递归等）。

# eclipse - ndk-build.cmd：找不到命令

> ID：10463786
> 
> 赞同：2
> 
> 时间：2012-05-05T16:31:29.337
> 
> 标签：eclipse

（对不起，我的英语不好...）

我正在尝试使用 CDT 插件在 Eclipse 中构建我的 .so 库。（这是一个android项目，带有本机代码......）

因为我在windows上，所以我用这个替换了[Project->Properties->C/C++ build]中的build命令：

```
[absolute_path_to_android-ndk]\ndk-build.cmd V=1 
```

但是我在控制台中收到了这条消息：

```
C:\SDK\android-ndk-r8\ndk-build.cmd 
Cannot run program "C:\SDK\android-ndk-r8\ndk-build.cmd": Le fichier spécifié est introuvable.
Error: Program "C:/SDK/android-ndk-r8/ndk-build.cmd" is not found in PATH 
```

我在 Eclipse 的构建命令中只尝试了“ndk-build.cmd”，并在我的 PATH 环境变量中尝试了这个命令的路径，但我仍然有同样的错误。事实上，我无法从 Eclipse 的构建命令中执行任何程序。

当我在 cmd.exe 或 cygwin 中调用 ndk-build 时，构建库没有问题，但是当我尝试在 Eclipse 中自动构建库时，它不起作用......

有没有人可以解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:52:38.367

我通过在 ubuntu 终端和 Eclipse 中将 NDK 路径添加到路径变量中找到了解决方案。然后我不得不删除“ndk-build.cmd”中的“.cmd”，因为终端说我没有这个文件结尾的权限。

# sockets - node.js 和 socket.io：不同“会话”的不同连接

> ID：10463792
> 
> 赞同：2
> 
> 时间：2012-05-05T16:32:16.560
> 
> 标签：sockets, node.js, socket.io

我有一个 node.js 应用程序，可以将推文“流式传输”给用户。目前，它只是在 Twitter 中搜索硬编码字符串，但我希望允许用户在 URL 中配置它（例如，通过访问`/?q=stackoverflow`）。

目前，我的代码看起来有点像这样：

```
app.get('/', function (req, res) {

    // page rendering skipped

    io.sockets.on('connection', function (socket) { 
        twit.stream('user', {track: 'stackoverflow'}, function(stream) {
            stream.on('data', function (data) {
                socket.volatile.emit('tweet', data);
            }
        });
    });
}); 
```

问题是，如何让每个用户可以**同时**看到不同的推文流？目前，它在单个浏览器选项卡中运行良好，但一旦打开第二个选项卡，它就会崩溃 - 并且错误在 socket.io 内部相当深。我在滥用它吗？

我还没有完全理解socket.io，所以这可能是问题所在。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:18:29.327

每次有新请求进入时，您都在使用 io.sockets.on 重新定义连接回调 - 您应该在 io 对象的初始化语句之后将该代码块移到 app.get 之外。

# java - Java - 测量方法执行时间

> ID：10463793
> 
> 赞同：2
> 
> 时间：2012-05-05T16:32:20.320
> 
> 标签：java, multithreading, timing, stopwatch

我正在尝试使用计时器来测量算法的复杂性来测量执行时间，同时改变输入数组的大小。

我现在的代码相当简单：

```
public void start() {
    start = System.nanoTime();
}

public long stop() {
    long time = System.nanoTime() - start;
    start = 0;
    return time;
} 
```

它似乎工作正常，直到数组的大小变得非常大，而我期望的 O(n) 复杂度算法结果似乎是 O(n^2)。我相信这是由于 CPU 上的线程，其他进程在运行期间切入更多时间，n 值更大。

基本上，我想测量我的进程运行了多少时间，而不是我调用算法以来已经运行了多长时间。有没有一种简单的方法可以在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:42:13.343

测量执行时间是一个非常有趣但也很复杂的话题。要在 Java 中正确执行此操作，您必须对 JVM 的工作原理有所了解。[这](http://www.ibm.com/developerworks/java/library/j-benchmark1/index.html)是 developerWorks 上一篇关于基准测试和测量的好文章。阅读它，它会帮助你很多。

作者还提供了一个做基准测试的小框架。你可以使用这个框架。它将为您提供所需的确切信息 - CPU 消耗时间，而不仅仅是之前和之后的两个时间戳。该框架还将处理 JVM 预热并跟踪即时编译。

您还可以为 Eclipse使用像[这样的性能监视器。](http://code.google.com/a/eclipselabs.org/p/jvmmonitor/)这种性能监视器的问题是，它不执行基准测试。它只是跟踪您的应用程序当前使用的时间、内存和诸如此类的东西。但这不是真正的测量——它只是特定时间的快照。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:40:28.377

Java 中的基准测试是一个*难题*，尤其是因为随着您的方法得到越来越多的优化，JIT 可能会产生奇怪的效果。[考虑使用像Caliper](http://code.google.com/p/caliper/)这样的专用工具。有关如何使用它以及测量不同输入大小的性能的示例，请参见[此处](http://code.google.com/p/caliper/source/browse/tutorial/Tutorial.java#140)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T16:54:23.993

如果您想要当前线程（或者实际上是任意线程）的实际 CPU 时间而不是挂钟时间，那么您可以通过 ThreadMXBean 获得它。基本上，一开始就这样做：

```
ThreadMXBean thx = ManagementFactory.getThreadMXBean();
thx.setThreadCpuTimeEnabled(true); 
```

然后，每当您想获取当前线程的经过 CPU 时间时：

```
long cpuTime = thx.getCurrentThreadCpuTime(); 
```

您会看到 ThreadMXBean 也有调用来获取 CPU 时间和任意线程的其他信息。

关于时间复杂性的其他评论也适用。单独调用一段代码的时间可能取决于 CPU 的状态以及 JIT 编译器在该特定时刻决定执行的操作。算法的整体可扩展性行为通常是在多次调用中出现的趋势，您总是需要为时间安排中的一些“异常值”做好准备。

另外，请记住，仅仅因为特定时间以纳秒（或实际上是毫秒）*表示*，并不意味着该时间实际上具有该粒度。

# java - 带有临时目录的Tomcat多部分表单上传错误

> ID：10463794
> 
> 赞同：3
> 
> 时间：2012-05-05T16:32:29.900
> 
> 标签：java, tomcat

当我尝试上传包含图像和常规表单项的表单时，我收到以下错误：

org.apache.commons.fileupload.FileUploadBase$IOFileUploadException：处理多部分/表单数据请求失败。/usr/tomcat7/tmp/upload__275a1dac_1371dd097cc__8000_00000001.tmp（没有这样的文件或目录）

它在 ServletFileUpload.parseRequest(request) 上失败。我没有从常规堆栈跟踪中获得其他信息。

这似乎只发生在大于大约 5k 的文件（某种限制性限制）上。

我已经验证该目录存在并且可读可写。有足够的磁盘空间。我尝试更改 tmp 目录，但更改后的目录出现相同的错误。我尝试在 server.xml 中设置 maxUploadSize - 无效。

如果相关，我在客户端使用 JQuery ajaxSubmit，但我过去使用它没有问题。

我很茫然，希望能得到有关我能做什么的指示，或者至少是调试问题的最佳方法。谢谢！

# java - 将 Java 引用沿对象链向下传递的最佳方式

> ID：10463795
> 
> 赞同：5
> 
> 时间：2012-05-05T16:32:39.463
> 
> 标签：java, parameter-passing

让我们考虑一个这样的对象链：

```
Earth->Continent->Country->City->name 
```

`Earth.class`让我们也考虑一下`public static void main(String[] args)`

当应用程序使用命令行选项执行时，例如，在不引入中间参数的情况下`Barcelona`将其传递给对象的最佳方法是什么？`City`

对象是在程序执行期间的不同阶段创建的。

我们应该将`name`变量设为静态还是使用 IoC，例如 Spring 或 Google Guice？还有其他选择吗？

欢迎任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:40:16.977

*   我最喜欢 IOC 来完成这项任务。让 IOC 在构建 City 时传递依赖项。
*   替代方案：使用静态服务注册表，可以查询其值。城市可以从服务登记处获得它的名字。
*   备选方案：在您的层次结构上实现复合模式，包括一个函数，例如 find，它可以返回城市。然后你只需要查询和设置`earth.find(BarcelonaID).setName(args[0]);`

PicoContainer 中的 IoC 解决方案的示例如下：

```
PicoContainer container = new DefaultPicoContainer();
container.addComponent(Earth.class);
container.addComponent(Continent.class);
container.addComponent(Country.class);
container.addComponent(City.class, new ConstantParameter(cityName));

City barcelona = container.getComponent(City.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:41:23.900

您可以自上而下构建数据结构——大陆构建城市，或自下而上`main`构建城市并将其传递给国家，或使用某种组合。DI 倾向于后者。

```
public static void main(String... argv) {
  // Bottom up.
  City city = new City(/* args relevant to city */);
  Country country = new Country(city, /* args relevant to country */);
  Continent continent = new Continent(country, /* args relevant to continent */);
  Planet planet = new Planet(continent, /* args relevant to planet */);
}

class City {
  City(/* few parameters */) { /* little work */ }
}
class Country {
  Country(/* few parameters */) { /* little work */ }
}
...
class Planet {
  Planet(/* few parameters */) { /* little work */ }
} 
```

这可能比自上而下更干净：

```
public static void main(String... argv) {
  // Top down.
  Planet earth = new Planet(
    /* all the parameters needed by Earth and its dependencies. */);
}
class Planet {
  Planet(/* many parameters */) { /* lots of work */ }
}
... 
```

DI 人士认为，自下而上的构造导致代码更易于维护和测试，但您不需要 DI 框架来使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T16:50:22.577

In my mind, this is the best use case you could imagine for a [Visitor](http://en.wikipedia.org/wiki/Visitor_pattern) pattern. Basically, there should be one class `Parameters` that should hold all the parameters. Every object that needs one set of parameters can be visited with that `Parameters` class. The object can then pass the parameters to its children that know which parameters to use and how. In your case, this can be done this way:

```
public interface IParameterized{
   public void processParameters(Parameters param);
}

public class Earth implements IParameterized{
   public Earth(){
      // Create all countries here and store them in a list or hashmap 
   }
   public void processParameters(Parameters param){
      // find the country you want and pass the parameters to it
      country.processParameters(param);
   }
} 

public class Country implements IParameterized{
   public Country(){
      // Create all cities that belong to this country
   }
   public void processParameters(Parameters param){
      // find the city you want and pass the parameters to it
      city.processParameters(param);
   }
} 

public class City implements IParameterized{
   public City(){
      // Create city...
   }
   public void processParameters(Parameters param){
      // Do something with the parameter
   }
} 
```

**EDIT** To wire up the dots, this can be used in the following way:

```
public static void main(String... argv) {
     Parameters params = new Parameters();
     // Populate params from the command line parameters
     Earth earth = new Earth();

     // Earth takes the responsibilty of processing the parameters
     // It will delegate the processing to the underlying objects in a chain
     earth.processParameters(params);
} 
```

As a side note, you could also have a look at the [Chain Of Responsibility](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern) design pattern

# php - 如何阻止 URL 查询字符串重复？

> ID：10463798
> 
> 赞同：2
> 
> 时间：2012-05-05T16:33:36.777
> 
> 标签：php, mysql, url, parameter-passing

我正在使用 URL 查询字符串来过滤 MySQL 搜索结果。当用户单击其中一个链接时，查询连同另一个变量被传递给应用程序，然后应用程序构建并执行对数据库的 SQL 查询。

过滤有效 - 用户可以按流派、平台进行过滤，也可以同时进行排序，但问题是每次点击链接时，都会在`$query`.

例如，如果用户在*示例*中输入并选择作为过滤器，流派*操作*，则查询如下所示：

```
keywords=example&genre=action 
```

但是假设他们然后单击冒险类型，则查询如下所示：

```
keywords=example&genre=action&genre=adventure 
```

如果已经设置了变量，有没有办法让查询替换它？

```
$query = mysql_real_escape_string(htmlentities(trim($_SERVER[QUERY_STRING]))); 

<div id="filter_nav">
        <ul  id="nav_form">
            <li><h3 id="h3">Genre: &nbsp;</h3>
            <li><a href="search.php?'.$query.'&genre=Fighting">Fighting</a></li>
            <li><a href="search.php?'.$query.'&genre=Role-Playing">Role-Playing</a></li>
            <li><a href="search.php?'.$query.'&genre=Action">Action</a></li>
        </ul>
        <ul  id="nav_form">
            <li><h3 id="h3">Platform: &nbsp;</h3>
            <li><a href="search.php?'.$query.'&platform=Playstation 3">PS3</a></li>
            <li><a href="search.php?'.$query.'&platform=xbox 360">Xbox 360</a></li>
            <li><a href="search.php?'.$query.'&platform=Gamecube">Gamecube</a></li>
        </ul>
        </div>
        ';
        echo '
        <ul  id="sorting_form">
            <li><h3 id="h3">SORT BY: &nbsp;</h3>
            <li><a href="search.php?'.$query.'&order=title">Title</a></li>
            <li><a href="search.php?'.$query.'&order=release_date">Date</a></li>
            <li><a href="search.php?'.$query.'&order=rating">Rating</a></li>

        </ul>
        ';

function search_results($keywords){
$returned_results = array();
$where = "";

$keywords = preg_split('/[\s]+/', $keywords);
$total_keywords = count($keywords);

foreach($keywords as $key=>$keyword){
    $where .= "title LIKE '%$keyword%'";
    if($key != ($total_keywords - 1)){
        $where .= " AND ";
    }   
}
if (isset($_GET['platform']) && !empty($_GET['platform'])){
    $platform = mysql_real_escape_string(htmlentities(trim($_GET['platform']))); 
        $where .= " AND platform='$platform'";
    }

if (isset($_GET['genre']) && !empty($_GET['genre'])){
    $genre = mysql_real_escape_string(htmlentities(trim($_GET['genre']))); 
                $where .= " AND genre='$genre'";
}

if (isset($_GET['order']) && !empty($_GET['order'])){
    $order = mysql_real_escape_string(htmlentities(trim($_GET['order'])));
    $where .= " ORDER BY $order DESC";
    }

$results ="SELECT * FROM games WHERE $where "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:45:46.470

使用您的代码，可以使用每个链接来解构查询字符串[`parse_url`](http://php.net/manual/en/function.parse-str.php)并使用它重建它。[`http_build_query`](http://www.php.net/manual/en/function.http-build-query.php)

但是，就我个人而言，我只会选择一个带有 3 个选择框的表单，其中预先选择了先前选择的值。

您可以将所有选择选项放在一个多维数组中并执行双循环。

例子：

```
<?php
$options = array(
  "genre" => array("Fighting", "Role-Playing", ...),
  ...
);
foreach $options as $key => $value)
{
?>
<select name="<?php echo $key; ?>">
<?php 
  foreach ($value as $item)
  {
    // echo option for item and mark it selected if necessary
  }
?>
</select>
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T16:38:14.360

修改每个`<a>`标签，如 `<a href="search.php?'.$query.'&genre=Fighting">Fighting</a>` ： `<a href="search.php?&genre=Fighting">Fighting</a>`

即删除`'.$query.'`部分。

# sql-server-2008 - MDX 查询元数据窗格图标键？

> ID：10463800
> 
> 赞同：0
> 
> 时间：2012-05-05T16:33:42.943
> 
> 标签：sql-server-2008, sql-server-2008-r2, mdx

在 Sql Management Studio MDX 查询设计器中，有元数据窗格，您可以从中将多维数据集的元素拖到查询中。

反正有图标的钥匙吗？

一个金字塔有六个点，另一个有六个点，在两个垂直的行中，每行三个。不确定文件夹图标在维度下代表什么，等等。这不是唯一的，所以我真的很想要一把钥匙。有任何想法吗？在帮助中找不到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:17:25.123

一旦您有创建多个维度的经验，图标的含义就会变得显而易见。他们中的许多人通过旁边的标签很明显。以下是其他一些的列表：

![措施](../Images/f0f45d58d43410f497db253ce479d52f.png)度量
![计算量度](../Images/3b98974c3faa3802b0048fcf7a338279.png)计算度量
![方面](../Images/c6f8fcb12a0fe87b997a109e0e30f651.png)维度
![属性层次](../Images/14f6614b8f3a5913f60ea6a1c610103a.png)属性层次
![用户定义的层次结构](../Images/96b19237ead0ce0865d4857633bf868c.png)用户定义层次 用户定义层次
![1级](../Images/7a33ce68d76ce3cb0533ec5ddb1599a9.png)1 级 用户定义层次
![2级](../Images/ec66bbb431de7639819f0ed28b234a8f.png)2 级
![成员属性](../Images/5a48080f8524c00739866c23f3b7ec77.png)成员属性

您正在谈论的维度下方的文件夹图标最有可能包含成员属性。

# sql - 关系代数中 Group By 和 Have 子句查询的等价物是什么？

> ID：10463801
> 
> 赞同：0
> 
> 时间：2012-05-05T16:33:43.190
> 
> 标签：sql, relational-algebra

例子：

7.查找同一天拜访了同一专业的两位不同医生的患者。

```
 SELECT       p.pid , d.speciality, v.date
   FROM         Patient p
   JOIN         Visits v ON v.pid = p.pid
   JOIN         Doctors d ON d.did = v.did
   GROUP BY     p.pname, d.speciality, v.date
   HAVING   COUNT(DISTINCT d.did) = 2 
```

您如何为此编写合法的 RA？

基本上 GroupBy 和 RA 中的从句的等价性是什么？

同样被问到[这里没有得到回答](https://stackoverflow.com/questions/7728012/equivalent-of-groupby-and-having-clause-in-relational-algebra)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T09:12:54.800

您实际上并不需要尝试转换 SQL，反映问题也提供了 RA 解决方案：

“查找同一天拜访了同一专业的两位不同医生的患者”

我们首先将患者、就诊和医生结合起来

`Patients x Visits x Doctors`

由于我们有两次就诊和两名医生，我们需要另一个表访问和医生的实例。我们不能照原样使用它们，否则我们将无法区分它们。因此，重命名`\rho`：

`Patients x \rho_V1(Visits) x \rho_D1(Doctors) x \rho_V2(Visits) x \rho_D2(Doctors)`

接下来我们需要选择“匹配”的组合

```
\sigma_{Patients.pid = V1.pid /\ 
        Patients.pid = V2.pid /\ 
        V1.date = V2.date /\ 
        V1.did = D1.did /\ 
        V2.did = D2.did /\
        D1.did != D2.did /\
        D1.speciality = D2.speciality}
 (Patients x \rho_V1(Visits) x \rho_D1(Doctors)  x 
             \rho_V2(Visits) x \rho_D2(Doctors)) 
```

接下来我们需要找到患者，即project on`pid`

```
\pi_{Patients.pid} 
(\sigma_{Patients.pid = V1.pid /\ 
        Patients.pid = V2.pid /\ 
        V1.date = V2.date /\ 
        V1.did = D1.did /\ 
        V2.did = D2.did /\
        D1.did != D2.did /\
        D1.speciality = D2.speciality}
 (Patients x \rho_V1(Visits) x \rho_D1(Doctors)  x 
             \rho_V2(Visits) x \rho_D2(Doctors))) 
```

通过这种方式，您可以找到在同一天*至少*拜访过同一专业的两位不同医生的患者。*如果您需要找到恰好*拜访过两位医生的患者，您应该记住*恰好 2 = 至少 2 - 至少 3*，即

```
\pi_{Patients.pid} 
(\sigma_{Patients.pid = V1.pid /\ 
        Patients.pid = V2.pid /\ 
        V1.date = V2.date /\ 
        V1.did = D1.did /\ 
        V2.did = D2.did /\
        D1.did != D2.did /\
        D1.speciality = D2.speciality}
 (Patients x \rho_V1(Visits) x \rho_D1(Doctors)  x 
             \rho_V2(Visits) x \rho_D2(Doctors)))
-
\pi_{Patients.pid} 
(\sigma_{Patients.pid = V1.pid /\ 
        Patients.pid = V2.pid /\ 
        Paitents.pid = V3.pid /\
        V1.date = V2.date /\ 
        V2.date = V3.date /\
        V1.did = D1.did /\ 
        V2.did = D2.did /\
        V3.did = D3.did /\
        D1.did != D2.did /\
        D1.did != D3.did /\
        D2.did != D3.did /\
        D1.speciality = D2.speciality /\
        D2.speciality = D3.speciality}
 (Patients x \rho_V1(Visits) x \rho_D1(Doctors)  x 
             \rho_V2(Visits) x \rho_D2(Doctors)  x
             \rho_V3(Visits) x \rho_D3(Doctors) )) 
```

# javascript - Google Maps Api V3 在多个页面刷新时加载

> ID：10463806
> 
> 赞同：0
> 
> 时间：2012-05-05T16:34:23.457
> 
> 标签：javascript, google-maps-api-3

我有这个脚本来初始化谷歌地图。初始化函数初始化地图。问题是它可以工作，但不是第一次打开页面时。我必须刷新它两到三次才能显示地图。为什么会这样？

在正文 OnLoad 事件上调用初始化函数。

并且它不会在除 chrome 之外的任何其他浏览器中加载（在两到三页刷新后）

```
 var infowindow = new google.maps.InfoWindow();
  var places=[];        //contains the addresses of markers

//Find User GeoLocation to Show On Map for the First TIme Map opens.
    if (navigator.geolocation)
    {
            navigator.geolocation.getCurrentPosition(showPosition)                                                             
    }
    else
    {
            alert("Geolocation is not supported by this browser.");
    }

    function showPosition(position)
    {
      latitude=position.coords.latitude;
      longitude= position.coords.longitude;
    }

//Initialize Google Map Api
function initialize()
{
    geocoder = new google.maps.Geocoder();

    //Initial Map Variables
    var myoptions={
            zoom:8,
            center:new google.maps.LatLng(latitude,longitude),
            mapTypeId:google.maps.MapTypeId.ROADMAP
        };  

        //Initialize Map
        map=new google.maps.Map(document.getElementById("map_canvas"),myoptions);           

    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:10:40.733

我说这是因为地理定位何时返回是未知的。它是异步的。如果地图尝试在地理定位完成之前加载，则变量`latitude`和`longitude`未设置并且地图将不会加载。

确保首先进行地理位置定位，它应该没问题。

[https://files.nyu.edu/hc742/public/googlemaps/stackload.html](https://files.nyu.edu/hc742/public/googlemaps/stackload.html)

```
function getLocation() {
var infowindow = new google.maps.InfoWindow();
  var places=[];        //contains the addresses of markers

//Find User GeoLocation to Show On Map for the First TIme Map opens.
    if (navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(showPosition, function(err) { alert(err + " " + err.code);});
    }
    else
    {
            alert("Geolocation is not supported by this browser.");
    }
}

    function showPosition(position)
    {
      latitude=position.coords.latitude;
      longitude= position.coords.longitude;
      initialize(latitude, longitude);
    }

//Initialize Google Map Api
function initialize(latitude, longitude)
{
    geocoder = new google.maps.Geocoder();

    //Initial Map Variables
    var myoptions={
            zoom:8,
            center:new google.maps.LatLng(latitude,longitude),
            mapTypeId:google.maps.MapTypeId.ROADMAP
        };  

        //Initialize Map
        map=new google.maps.Map(document.getElementById("map_canvas"),myoptions);           

} 
```

HTML：

```
<body onload="getLocation()">

<div id="map_canvas"></div>

</body> 
```

# eclipse-plugin - 如何在 Aptana Studio 3 中从本地 .zip 或 .jar 文件安装插件？

> ID：10463807
> 
> 赞同：1
> 
> 时间：2012-05-05T16:34:28.627
> 
> 标签：eclipse-plugin, installation, aptana

我有一个本地打包的插件，不能从任何更新服务器获得（我使用 Eclipse 从源代码构建和导出它。）该插件在 Eclipse 环境中安装和工作。

现在我想在我的独立 Aptana Studio 3 安装中使用它。是否有记录方法将包含工作 Eclipse 插件的 .ZIP 或 .JAR 文件安装到 Aptana Studio 3 中？

如果这在其他地方有详细记录，那么我只需要一个 URL！:D

**编辑**：我意识到插件在 Aptana 中不起作用的原因可能有很多；这里的问题是我找不到从 Aptana 中安装插件的简单方法。我已经尝试过“添加存储库 -> 本地”和“添加存储库 -> 存档”，但是这两种方法都无法识别打包的插件。我还尝试将 jar 文件放入 Aptana 3 'plugins' 目录并重新启动——不爱。但是没有错误消息或日志条目可以帮助理解我无法安装插件的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:20:56.060

可能是依赖问题。在某些情况下，一个插件可能依赖于产品中缺少的另一个插件（例如 Aptana Studio，在这种情况下）。

我建议将 Aptana Studio 作为插件安装到经典的 Eclipse 3.7 安装中。然后，就像您之前尝试过的那样安装您的插件。

希望有帮助。

# ios - iOS 团队配置。Xcode 不提供我们的团队资料作为选项。为什么？

> ID：10463811
> 
> 赞同：1
> 
> 时间：2012-05-05T16:35:09.970
> 
> 标签：ios, xcode, provisioning-profile

我知道我们都有关于设置 iOS 配置的个人地狱故事。深呼吸。好的。

我们的三人团队有一个团队配置文件设置。查看。它出现在 Xcode 管理器中。查看。现在我想实际将此配置文件用于项目。但是下拉列表中提供的一组配置文件不包括我们的团队配置文件作为选项之一。它确实提供了其他人（我有不止一个 Apple 开发者 ID）。我的其他队友也有同样的问题。我们都有一个在同一日期创建的“iOS 团队配置文件”，但识别号不同。

有人可以启发我吗？

谢谢，
道格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:34:07.530

检查钥匙串中的开发者证书（它在钥匙串访问应用程序中）。它存在吗？伟大的！它是否有一个箭头，当您单击它时，它会展开并显示您的名字？是的？伟大的！

如果这些都不正确，则转到配置门户并再次完成该认证过程（有关详细说明，请参阅该站点）。

如果证书不是问题，请检查 appID 以及 info.plist 中捆绑标识符下列出的内容。如果这不完全正确，它将无法正常工作。

祝你好运！

# c++ - 模板参数推导和模板参数

> ID：10463822
> 
> 赞同：0
> 
> 时间：2012-05-05T16:36:03.173
> 
> 标签：c++, templates

我以为我们可以在没有模板参数的情况下调用模板函数。为什么此代码仅在我将模板参数指定为双精度时才有效？

```
#include <iostream>
template <typename T>
T max(T x, T y)
{
    return x > y ? x : y;
}

int main()
{
    cout<<::max(3,4.7)<<"\n";     //Error
    cout<<::max<int>(3,4.7)<<"\n"; //Error
    cout<<::max<double>(3,4.7)<<"\n"; //Works
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:02:49.777

模板参数推导需要应用于函数的所有参数，并且在第一种情况下（仅不编译的情况）它将推导参数为`int`and `double`。因为它们不完全匹配**，**所以参数推导失败。正如您已经意识到的那样，答案是禁用类型推断并自己提供类型参数（第二行和第三行）。

对于显式专门化的函数模板和普通函数，参数会进行隐式或用户定义的**类型转换**（double 到 int，int 到 double，或通过类构造函数和转换运算符）。但是，在模板参数推导期间，不会执行此类类型转换。

# c - c segfault 由于错误的指针

> ID：10463824
> 
> 赞同：1
> 
> 时间：2012-05-05T16:36:11.527
> 
> 标签：c, function, pointers

这是我的代码：

```
 #include <stdio.h>
#include <stdlib.h>

void getinfo(unsigned int a, unsigned int b, char **s);

int main(){
    unsigned int len_max = 8;
    unsigned int current_size = 0;
    char *pStr = malloc(len_max);
    if(pStr == NULL){
        perror("\nMemory allocation\n");
        return EXIT_FAILURE;
    }
    current_size = len_max;

    printf("Inserisci hostname: ");
    getinfo(len_max, current_size, &pStr);
    printf("\nLa stringa inserita è: %s\n", pStr);
    free(pStr);
    return EXIT_SUCCESS;
}

void getinfo(unsigned int a, unsigned int b, char **pStr){
    unsigned int i = 0;
    char c = EOF;
    while((c = getchar()) != '\n'){
        *pStr[i++] = (char)c;
        if(i == b){
            b = i+a;
            if((*pStr = realloc(*pStr, b)) == NULL){
                perror("\nMemory allocation error\n");
                exit(EXIT_FAILURE);
            }
        }
    }
    *pStr[i]='\0';
} 
```

当我执行此代码时，当我按下回车键时（在我写完字符串之后）出现分段错误。
我确定问题出在函数中（可能问题出在 *s 指针上），但我不知道如何纠正它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T16:47:35.963

你有一个优先级问题。你需要使用

```
(*s)[i++] = ... 
```

代替

```
*s[i++] = ... 
```

同样你需要

```
(*s)[i]='\0'; 
```

当您编写时，`*s[i]`您正在索引`s`. 但是你想索引`*s`，因此需要括号。

我没有检查您的其余代码，但如果确实有更多错误，我希望这可以帮助您调试其余代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:52:21.927

问题在于`*s[i++] = (char)c;`尝试`(*s)[i++] = (char)c;`用 *s 周围的括号将其转换为。以及`(*s)[i] = '\0'`.

# python - 以像素为单位指定 Tkinter 文本小部件的尺寸？

> ID：10463826
> 
> 赞同：6
> 
> 时间：2012-05-05T16:36:40.940
> 
> 标签：python, tkinter

我正在尝试在 Tkinter（对于 Python）中创建一个文本小部件，其字体大小可以更改，但是当这种情况发生时，我不希望小部件自行调整大小。小部件中的所有文本都是相同的字体样式。到目前为止我得到了什么：

```
root = Tk()
t = Toplevel(root)
fnt = tkFont.Font(family="Helvetica",size=36,weight="bold",underline=1)
txt = Text(t, font=fnt, width=20, height=6)
txt.grid(row=0,column=0)
b = Button(t, text="click", command=change)
b.grid(row=1, column=0)
txt.insert(END, "This is text!") 
```

其中`change`定义为：

```
def change():
    txt.delete(1.0, END)
    fnt.config(size=100)
    txt.insert(END, "This is text!") 
```

现在，当我单击按钮时，文本确实变大了，但整个小部件会自行调整大小以进行补偿！我认为这是因为小部件的大小是根据“行”和“字符”而不是像素来指定的。如何阻止小部件调整大小？

我尝试不更改小部件的字体，而只是插入带有指定新字体的标签的文本，这是可行的，但问题是当我在插入文本的左侧和右侧手动键入新文本时，这是默认样式，不是我想要的尺寸。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T17:25:30.073

我在此页面上找到了我的问题的答案：[How to stop Tkinter Text widget resize on font change？](https://stackoverflow.com/questions/9833698/python-tkinter-how-to-stop-text-box-re-size-on-font-change)

关键是构建一个框架来放置文本小部件，以像素为单位指定框架大小，并调用`grid_propagate(False)`框架以防止它在文本小部件想要调整大小时调整大小。

# java - 正则表达式的java子字符串

> ID：10463829
> 
> 赞同：0
> 
> 时间：2012-05-05T16:36:51.833
> 
> 标签：java, regex, substring

我有以下字符串“类（102）（401）”和“类（401）”我想找到正则表达式来查找子字符串，它总是从“类（102）（401）”或“类”中返回值“类” (102)"

以下是我的代码

```
Pattern MY_PATTERN = Pattern.compile(".^(\\(\\d+\\))");
    Matcher mat = MY_PATTERN.matcher("Class (102) (401)");
    while (mat.find()){
        System.out.println(mat.group());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:55:15.823

我看不出这有什么用 - 但如果你需要它，如果你使用这个正则表达式，“类”将在第一个匹配组中：

```
(Class)(?:\s*\(\d+\))+ 
```

如果您需要捕获其他单词后跟相同的模式，只需使用：

```
(.*?)(?:\s*\(\d+\))+ 
```

如果它是您所追求的数字而不是字符串“类”，请使用这个数字，并且匹配项也将在捕获组中：

```
Class(?:\s*\(\(d+)\))+ 
```

您需要转义反斜杠，为了便于阅读，我将其省略了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:48:54.913

如果您想知道 'Class' 是否包含在字符串中，为什么不使用 String.contains("Class")？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:05:54.687

您可以使用 String#replaceAll 来获得您想要的东西，如下所示：

```
String substr = str.replaceAll("^([\\S]+).*$", "$1"); 
```

# php - 在 SQL 上连接多个表，并按顺序排列

> ID：10463832
> 
> 赞同：0
> 
> 时间：2012-05-05T16:37:20.077
> 
> 标签：php, sql, wordpress

我正在研究 wordpress，我想用他们不同的分类法显示一个 POST。

我在查询时遇到了一些麻烦，我现在正在处理 2 天..

我的查询：

```
SELECT wp_posts.ID, wp_posts.post_title, wp_posts.post_content, wp_posts.post_type,
wp_term_taxonomy.taxonomy, wp_terms.name
FROM wp_term_relationships, wp_term_taxonomy, wp_terms, wp_posts
WHERE wp_posts.post_type = 'dimsum'
AND wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id
AND wp_term_taxonomy.term_taxonomy_id = wp_terms.term_id
AND wp_term_relationships.object_id = wp_posts.ID 
```

这是控制台显示的内容：http: [//tinyurl.com/bnw2dot](http://tinyurl.com/bnw2dot)

但我想在我的 wordpress 主题上显示类似的东西：

**需要按参考排序**

点心 ：

N1——蟹皇烧买——测试——测试（4）——5.00

N10 -- 晶莹鲜虾饺 -- Har Kau -- 虾饺 (4) -- 5.00

N11 -- 蟹皇烧买 -- 烧卖 -- 虾饺 (4) --5.00

如果有人可以帮助我，我很绝望

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:49:05.220

为订单字段添加`ORDER BY`有趣的内容。

```
 SELECT wp_posts.ID, wp_posts.post_title, wp_posts.post_content, wp_posts.post_type,
    wp_term_taxonomy.taxonomy, wp_terms.name
    FROM wp_term_relationships, wp_term_taxonomy, wp_terms, wp_posts
    WHERE wp_posts.post_type = 'dimsum'
    AND wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id
    AND wp_term_taxonomy.term_taxonomy_id = wp_terms.term_id
    AND wp_term_relationships.object_id = wp_posts.ID 
    ORDER BY wp_term_taxonomy.taxonomy DESC //(OR ASC) 
```

# cordova - 在我的基于 MVC 的 Sencha Touch 项目中添加一个“控制器”类

> ID：10463835
> 
> 赞同：1
> 
> 时间：2012-05-05T16:37:27.667
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我创建了一个 MVC SenchaTouch 项目。我创建了一个示例应用程序，用户将在其中输入用户名和密码并将其发送到 Web 服务。

用户名和密码字段应该在“VIEW”中，“将其发送到 Web 服务”功能应该在“CONTROLLER”中。

在我的程序中，发送到网络服务的部分也在“视图”中，所以有人可以帮我编辑我的代码，这样我就可以在“控制器”中拥有“发送到网络服务”功能

这是代码

```
Ext.define('TU.view.Contact',{
           extend:'Ext.form.Panel',
           xtype:'contactform',

           config: {

           title:'Contact',
           iconCls:'user',

           url:'http://somesite.com/contact.php',
           items: [
           {
                   xtype:'fieldset',
                   title:'User Login',

                   items:[
                          {
                          xtype:'textfield',
                          name:'name',
                          label:'Name'
                          },
                          {
                          xtype:'passwordfield',
                          name:'password',
                          label:'Password'
                          }
                          ]
           },
           {
                   xtype:'button',
                   text:'Send',
                   ui:'confirm',
                   padding:5,
                   handler:function(){
                   this.up(contactform).submit();

                   }
           }
           ]

           }

           }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:54:06.737

首先，设置`id`按钮的属性。

```
 xtype:'button',
 id:'submitBtn',
 text:'Send'
 .....
 ..... 
```

在控制器类中，

```
Ext.define('MyApp.controller.Main', {
    extend: 'Ext.app.Controller',

    config: {
        refs : {
            submitBtn: '#submitBtn'
        },

        control : {
            submitBtn: {
                tap: 'submitData'
            }
        },
    },

    submitData: function() {
             var form = Ext.getCmp('form-id');

             // Get username and password fields ...
             var formvalues = form.getValues();

             // Web Service code goes here ..
             Ext.Ajax.request({
                 params: formvalues,                     
                 url:'http://_servername_.com/app/insert.php'

                 success : function() {
                       Ext.Msg.alert('Success','Username and password successfully entered');
                 }

                 failure : function() {
                       Ext.Msg.alert('Failure','Error while adding data');
                 }
             });        
    }
}); 
```

**注意：** `insert.php`将是服务器端代码（只是一个例子），它将与您的数据库建立连接并在其中输入值。

# c - 为什么这个 C 宏会导致语法错误？

> ID：10463837
> 
> 赞同：2
> 
> 时间：2012-05-05T16:37:49.180
> 
> 标签：c, macros, embedded, pic, c18

这是我第一次在 C 中使用宏，我试图用宏替换我通常放入函数中的大部分代码。这是一个经常使用的中断的一部分，因此我需要尽可能地优化它。阅读文档后，我发现编译器不支持函数内联，我想避免函数调用开销。

代码本身将数据发送到串行输入并行输出移位寄存器，据我所知，没有更短的方法可以编写我需要的代码。

我正在使用 C18 编译器版本 3.41 和 MPLAB X IDE。

所以这是我以函数形式使用的代码：

```
void first_one(void)
{
   //3 invisible zeroes
            LATBbits.LATB1=0; //data set to zero

            LATBbits.LATB0=1;//first clock
            LATBbits.LATB0=0;

            LATBbits.LATB0=1;//second clock
            LATBbits.LATB0=0;

            LATBbits.LATB0=1;//third clock
            LATBbits.LATB0=0;
            //end of invisible zeroes

            //two visible zeroes    
            LATBbits.LATB0=1;//first clock
            LATBbits.LATB0=0;

            LATBbits.LATB0=1;//second clock
            LATBbits.LATB0=0;
            //end of two visible zeroes

            LATBbits.LATB1=1;//Data is now one

            LATBbits.LATB0=1;
            LATBbits.LATB0=0;
            //one 

            LATBbits.LATB1=0;//Data is now zero

            LATBbits.LATB0=1;//first clock
            LATBbits.LATB0=0;

            LATBbits.LATB0=1;//second clock
            LATBbits.LATB0=0;

            //after this, everything should be in place
            LATBbits.LATB0=1;
            LATBbits.LATB0=0;
} 
```

我已经把函数变成了这个宏：

```
#define first_one() {  \
\
            LATBbits.LATB1=0;\               
                              \
            LATBbits.LATB0=1;\
            LATBbits.LATB0=0;\
                                \
            LATBbits.LATB0=1;\
            LATBbits.LATB0=0;\
                            \
            LATBbits.LATB0=1;\
            LATBbits.LATB0=0;\
            \                                
            LATBbits.LATB0=1;\
            LATBbits.LATB0=0;\
\
            LATBbits.LATB0=1;\
            LATBbits.LATB0=0;\
            \
            LATBbits.LATB1=1;\
\
            LATBbits.LATB0=1;\
            LATBbits.LATB0=0;\    
\
            LATBbits.LATB1=0;\
             ^^^ The syntax error is here!
\
            LATBbits.LATB0=1;\
            LATBbits.LATB0=0;\
\
            LATBbits.LATB0=1;\
            LATBbits.LATB0=0;\
\
            LATBbits.LATB0=1;\
            LATBbits.LATB0=0;\
\
                     } 
```

那么我做错了什么？

**更新**：我删除了评论，现在在不同的位置出现语法错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T17:03:13.577

检查标记后没有空格`\`，一些编译器为此发出编译错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T16:40:37.583

在删除注释之前拼接行，因此`\`in `\//3 invisible zeroes` 不会继续该行。

您需要删除注释或使用 C 样式注释 ( `/* 3 invisible zeroes */`) 并将注释放在继续该行的*之前。*`\`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T16:47:07.817

问题在于注释和预处理器处理它们的方式。删除评论，这应该可以正常工作。或者使用 /* 注释 */

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T17:17:38.320

三个建议：

首先，确保每个`\`.

~~其次，`()`如果它不打算接受任何参数，请从宏名称中删除。~~ 根据下面的评论进行**编辑。**

最后，将宏的内容包装在 a 中`do {...} while(0)`（没有尾随分号）。这样，当您编写`first_one();`代码时，右大括号后就不会出现虚假的分号。

简而言之，

```
#define do_first         \
  do {                   \
    LATBbits.LATB0 = 1;  \
    ...                  \
  } while(0) 
```

**编辑**Lundin 指出这是过时且不必要的。我一直认为，如果宏扩展为形式的语句，则需要避免诊断`{...};`——显然我错了。不过，我仍然更喜欢它作为一种风格选择。

# c# - 没有从 SqlDataReader 获得所有结果

> ID：10463841
> 
> 赞同：0
> 
> 时间：2012-05-05T16:38:13.980
> 
> 标签：c#, asp.net, sql-server

有人可以帮我解决我看到的问题吗？出于某种原因，当我运行我的页面时，我得到了我的下拉列表来填充数据，但是我的数据库中的第一项，每个 SQL 查询，都没有被填充。

例如，我的数据库表是：

**类别**

```
1  Books
2  Clothing
3  Toys
4  Household Items 
```

我的第一个查询-

```
SELECT Category FROM ProductCategories 
```

我的下拉列表填充了

```
Clothing
Toys
Household Items 
```

我还有另外 2 个要填充的下拉列表，它们正在做同样的事情。一旦我弄清楚了这一点，我将尝试找出在数据库中插入数据时遇到的另一个问题。

谢谢！

```
public partial class InsertItems : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        SqlConnection connection;
        SqlCommand populateList;
        SqlDataReader reader;

        string connectionString = ConfigurationManager.ConnectionStrings["LakerBids"].ConnectionString;
        connection = new SqlConnection(connectionString);

        populateList = new SqlCommand("USE LakerBids SELECT Category FROM ProductCategories;" +
                                "USE LakerBids SELECT SubCategory FROM ProductSubCategories;" +
                              "USE LakerBids SELECT LName FROM Users", connection);
        if (!IsPostBack)
        {
            try
            {
                connection.Open();
                reader = populateList.ExecuteReader();

                while (reader.Read())
                {
                    pcategory.DataSource = reader;
                    pcategory.DataValueField = "Category";
                    pcategory.DataBind();
                }

                reader.NextResult();

                while (reader.Read())
                {
                    psubcategory.DataSource = reader;
                    psubcategory.DataValueField = "SubCategory";
                    psubcategory.DataBind();
                }

                reader.NextResult();

                while (reader.Read())
                {
                    user.DataSource = reader;
                    user.DataValueField = "LName";
                    user.DataBind();
                }

                reader.Close();
            }
            finally
            {
                connection.Close();
            }
        }
    }

    protected void AddItem(object sender, EventArgs e)
    {
        if (Page.IsValid)
        {
            SqlConnection connection;
            SqlCommand insertData;

            string connectionString = ConfigurationManager.ConnectionStrings["LakerBids"].ConnectionString;
            connection = new SqlConnection(connectionString);
            insertData = new SqlCommand("INSERT INTO Products (ProductName, ProductDesc, CategoryID, SubCatID, StatusID, UserID, ReservePrice, AuctionLength, BidID)" +
            "VALUES (@ProductName, @ProductDesc, @CategoryID, @SubCatID, 1, @UserID, @ReservePrice, @AuctionLength, NULL)", connection);

            insertData.Parameters.Add("@ProductName", System.Data.SqlDbType.NVarChar, 50);
            insertData.Parameters["@ProductName"].Value = pname.Text;

            insertData.Parameters.Add("@ProductDesc", System.Data.SqlDbType.NVarChar, 200);
            insertData.Parameters["@ProductDesc"].Value = pdesc.Text;

            insertData.Parameters.Add("@CategoryID", System.Data.SqlDbType.Int);
            insertData.Parameters["@CategoryID"].Value = pcategory.SelectedIndex;

            insertData.Parameters.Add("@SubCatID", System.Data.SqlDbType.Int);
            insertData.Parameters["@SubCatID"].Value = psubcategory.SelectedIndex;

            insertData.Parameters.Add("@UserID", System.Data.SqlDbType.Int);
            insertData.Parameters["@UserID"].Value = user.SelectedIndex + 2;

            insertData.Parameters.Add("@ReservePrice", System.Data.SqlDbType.Money);
            insertData.Parameters["@ReservePrice"].Value = Convert.ToDecimal(reserveprice.Text);

            insertData.Parameters.Add("@AuctionLength", System.Data.SqlDbType.Int);
            insertData.Parameters["@AuctionLength"].Value = Convert.ToInt32(auctionlength.Text);

            try
            {
                connection.Open();
                insertData.ExecuteNonQuery();
                Response.Redirect("Categories.aspx");
            }
            catch (Exception error)
            {
                dberror.Text = error.ToString();
            }
            finally
            {
                connection.Close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:48:54.683

您需要使用 DataSet 或在集合中填充业务实体，然后绑定到集合。

```
List<Category> cats = new List<Category>();

while (reader.Read()) 
{ 
   Category cat = new Category();

   // fill properties from DataReader
   cats.Add(cat);
} 

pcategory.DataSource = cats; 
pcategory.DataValueField = "Category"; 
pcategory.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:08:42.070

每个block中的“reader.read()”语句实际上是在读取第一行数据，所以当你设置DataSource的时候，第一行已经被读取了。拿出来试试

如果要遍历每个结果，则应使用“while (reader.Read())”，而不是一步绑定结果集。

话虽如此，关于使用数据集、分离逻辑等的评论是有效的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:49:19.143

Sab0tr0n，我怀疑正在发生两件事之一。

1）如果您说在执行某种“添加类别”操作之后第一项没有出现，那么可能是在插入完成之前填充了下拉列表。这意味着，您需要在允许将插入提交到数据库后重新查询。

或者

2）在这一行设置断点：

```
string connectionString = ConfigurationManager.ConnectionStrings["LakerBids"].ConnectionString; 
```

然后确认 connectionString 是正确的数据库。我已经看到指向测试或暂存数据库的旧配置文件会导致这种混乱。

祝你好运。如果这些都不是答案，也许可以向我们简化您的示例，或者详细说明您对应用程序的具体操作以及何时发现问题。

# php - 安全包含 php

> ID：10463849
> 
> 赞同：1
> 
> 时间：2012-05-05T16:39:19.570
> 
> 标签：php, security

这包括安全吗？或者是否可以使用一些 RFI/LFI 或它叫什么？

```
$request_uri = explode('/', $_SERVER['REQUEST_URI']);
$script_name = explode('/', $_SERVER['SCRIPT_NAME']);

for ($i = 0; $i < sizeof($script_name); $i++) {
    if ($request_uri[$i] == $script_name[$i])
    {
        unset($request_uri[$i]);
    }
}

$command = array_values($request_uri);

if (file_exists('controllers/' . $command[0] . '.php')) {
    include 'controllers/' . $command[0] . '.php';
} 
```

更新：

```
if (isset($_GET['p'])) {
    $pages = array('home', 'login', 'register');
    $page = filter_var($_GET['p'], FILTER_SANITIZE_URL);

    if (in_array($page, $pages) && file_exists($page . '.php')) {
        include ($page . '.php');
    } else {
        include ('404.php');
    }  
}
else {
    include ('home.php');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:47:25.427

好吧，如果你确保`$command[0]`它只包含字母数字字符（可能还有下划线和连字符），那*可能*会有点安全。

像下面这样的东西可能会完成这项工作：

```
if (!ctype_alnum($command[0])) {
    // Hacking attempt!
    exit;
} 
```

但是根据用户输入包含文件仍然是一个坏主意。更好的想法是使用将 URI 映射到控制器的查找表，并使用自动加载来包含相关文件。这样，用户输入和包含之间就有了很大的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:34:02.280

您的代码将用户提供的任意字符串提供给 PHP 的`include`; 这很糟糕，几乎是[https://www.owasp.org/index.php/Server-Side_Includes_(SSI)_Injection的教科书示例](https://www.owasp.org/index.php/Server-Side_Includes_(SSI)_Injection)

你想解决什么问题需要这个？

# c++ - 什么是 GCC 的“vstring”？

> ID：10463851
> 
> 赞同：24
> 
> 时间：2012-05-05T16:39:27.557
> 
> 标签：c++, gcc

我阅读了一些 GCC 错误报告，那里的人在谈论“vstring”。搜索 WEB 我注意到[http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.2/vstring_8h.html](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.2/vstring_8h.html)。

有人可以详细说明它的用途和用途吗？为什么使用它而不是 std::string？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-05T16:48:22.827

GCC`vstring`是一个通用的字符串类，它是在 GCC 4.1 的`libstdc++`实现中引入的。

它与 兼容`std::basic_string`，具有以下附加详细信息：

*   提供了两个基类：
    *   默认值避免引用计数，并针对短字符串进行了优化；
    *   替代的，仍然使用它（即引用​​计数），同时在一些低级领域（例如对齐）进行了改进。参见`vstring_fwd.h`一些有用的 typedef。
*   已经重写了各种算法（例如，替换），简化了代码并添加了简单的优化。
*   DR 431 的选项 3 对两个可用的基础都实现了，从而改进了对有状态分配器的支持。

DR431 是[库工作组缺陷报告 431](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#431)，选项 3 看起来像是为类实现更好的分配器支持，以允许更好的交换和其他与分配器相关的操作。

基本细节来自[GCC 4.1 的发行说明](http://gcc.gnu.org/gcc-4.1/changes.html)，位于运行时库部分。

编辑：

看起来这个扩展的最初目的是为 C++11`std::string`实现提供基础。GCC/libstdc++ 贡献者 Paolo Carlini 在此[GCC 错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52938#c8)中发表评论，其中`<ext/vstring.h>`包含 next 的非引用计数实验版本`std::string`。2012 年 4 月 12 日的评论：

> 我们试图解释的是，这类问题是众所周知的，并且或多或少会影响*任何*引用计数的实现...... **当不使用引用计数并且确实不会使用它时，情况*并非*如此（根据新C++11 标准）在一个新的实现中`std::string`，我们目前正在展示它`<ext/vstring.h>`**...

# sql - Rails 3 - “通过”关联 - 如何从数据库中获取数据？

> ID：10463852
> 
> 赞同：1
> 
> 时间：2012-05-05T16:39:37.713
> 
> 标签：sql, ruby-on-rails-3, associations, models

我在从数据库中获取数据时遇到问题，模型关联类型**通过**.

在我的网站上，我有一个类别，如体育、新闻、天气等。当用户登录并选择了想要查看文章的类别时，我只想显示这些文章。

这是我的模型的样子：

```
class User < ActiveRecord::Base
  has_many :user_categories
  has_many :categories, :through => :user_categories
end

class Category < ActiveRecord::Base
  has_many :articles

  has_many :user_categories
  has_many :users, :through => :user_categories
end

class UserCategory < ActiveRecord::Base
  belongs_to :user
  belongs_to :category
end

class Article < ActiveRecord::Base
  belongs_to :category
end 
```

但我仍然找不到方法，如何从用户选择的类别中获取所有文章......我尝试了类似的东西

```
Article.joins("LEFT JOIN categories ON category.id = user_categories.category_id").where('user_categories.user_id = ?', current_user.id) 
```

我会感谢每一个建议！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:46:26.370

这是*一种*方法：

```
Article.where(:category_id => current_user.categories.map {|c| c.id}) 
```

这将创建 2 个查询。第一个将返回当前用户类别的列表。然后 ruby`map`​​ 函数将创建一个包含这些类别的 id 的数组。然后，第二个查询将返回 category_id 在 ids 数组中的文章列表。第二个查询将类似于：

```
select articles.* from articles where articles.category_id in(1,2,3); 
```

# php - 在 joomla 中创建我自己的表单时出现 SQL 错误

> ID：10463854
> 
> 赞同：1
> 
> 时间：2012-05-05T16:39:45.117
> 
> 标签：php, html, joomla, joomla-extensions

嘿伙计们，我想在 joomla 中创建自己的表单并使用 post 方法。所以我下载扩展程序以在 joomla 的文章中制作我自己的代码，就像这样

```
<form action="http://localhost/ocr/includes/Create_Subject.php" method="post">

username <input type="text" name="menu_name" value=""/><br/>

password <input type="text" name="id" value=""/><br/>

<input type="submit" name="save" value="Submit" />
</form> 
```

然后我转到我的网站数据库并创建一个名为 show 的表以将我的值添加到其中，我从我的表单中获取它并创建一个名为 (Create_Subject.php) 的 php 文件并将其放入我的网站中的包含文件中并通过像你在我的 html 代码和该 php 代码here 中看到的操作调用它

```
<?php 
 $coonect=mysql_connect("localhost","root","");
     if(!$coonect){
  echo "Data_base error";
    die(mysql_error());
    }
     ?>
   <?php
       $username=$_POST['menu_name'];
       $id=$_POST['id'];

       $db_select=mysql_select_db("ocr");
       if(!$db_select){
    die(mysql_error());
     echo" error";

         }
             $query= "INSERT INTO show (
            name , id ) 
            VALUES( '{$username}' ,{$id} ) " ;

                 if(mysql_query($query)){
         header("www.google.com");
           exit;
          }else{
       echo"<p> error </p>";
      }

           ?> 
```

`

并且当我运行该站点时，向我显示一个错误是什么做错了任何heleeeeep plez ....:)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:54:03.663

在这里，您可以找到有关使用 Joomla 进行 SQLQuering 的大量信息！

[http://docs.joomla.org/Accessing_the_database_using_JDatabase](http://docs.joomla.org/Accessing_the_database_using_JDatabase)

如果你有任何问题，你可以问任何你想要的...

# python - 如何在 Python 中将 [1, 2, 3] 转换为 1 2 3 字符串？

> ID：10463860
> 
> 赞同：-3
> 
> 时间：2012-05-05T16:40:30.720
> 
> 标签：python, string, list

需要快速帮助，但如何在 Python 中将 [1, 2, 3] 数组转换为字符串 1 2 3？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T16:41:55.290

以下生成器表达式`' '.join(str(i) for i in [1,2,3])`会将列表中的每个数字转换为以空格分隔的字符串`'1 2 3'`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T16:43:34.263

尝试这个：

```
' '.join(map(str, [1, 2, 3])) 
```

或这个：

```
' '.join(str(x) for x in [1, 2, 3]) 
```

这个也有效。它效率不高而且有点难看，但展示了如何使用完全不同的方法解决问题 - 即正则表达式。

```
import re
re.sub(r'[],\[]', '', str([1, 2, 3])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T13:24:45.180

我不清楚，你是想`[1,2,3]`变成`'123'`还是`'1 2 3'`。

```
' '.join(str(i) for i in [1,2,3]) 
```

将导致“1 2 3”

和

```
''.join(str(i) for i in [1,2,3]) 
```

将导致“123”

（注意 ''.join 和 ' '.join 之间的区别。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T16:41:54.353

```
>>> L = [1, 2, 3]
>>> ' '.join('%u' % x for x in L)
'1 2 3' 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-05-05T16:44:04.213

遍历数组并将每个元素附加到一个字符串，从一个空字符串开始。

# android - 带有本机代码的 Android AsyncTask

> ID：10463864
> 
> 赞同：3
> 
> 时间：2012-05-05T16:40:44.607
> 
> 标签：android, android-ndk

在我没有 C 语言经验的前提下，我想解决一个不允许我继续发布我的应用程序的问题。

我有一个使用 ffmeg 进行文件转换的本机函数，我通过 AsyncTask 从 Android 调用它。

我需要停止本机功能，并尝试了几种方式：

1）我在 C 中创建了一个函数“deleteRutine”，它重置所有变量。（不工作）

2）我添加了转换布尔变量的功能，并通过Android的方法将其设置为false（不工作）

我还能尝试什么？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:02:37.943

正如 rui.araujo 所提到的，如果实施得当，第二种方法应该可以工作。

您从 Android 传递到本机函数的布尔值，打印它并检查它是否正确传递。大多数情况下，您的 JNI 方法实现中可能存在问题，因为您的代码标志没有被修改。

你的代码应该是这样的：

```
while(FLAG==true)
{
     //Do Your task
}
return; 
```

如果实施得当，这肯定会起作用。我在许多类似的情况下都使用过它。如果仍然存在问题，请编辑您的帖子并发布第二个实现的代码片段...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:26:21.823

如果您使用的是交叉编译的 ffmpeg 二进制文件，则本机方法应在转换完成后立即返回。如果需要停止它的最佳方法是使用： http: [//developer.android.com/reference/android/os/Process.html](http://developer.android.com/reference/android/os/Process.html)向它发送退出信号，因为它会正确完成/关闭它正在转换的文件。

# button - JavaScript SDK - 应用程序 ID

> ID：10463866
> 
> 赞同：1
> 
> 时间：2012-05-05T16:40:57.893
> 
> 标签：button, sdk, facebook-social-plugins, app-id

> **可能重复：**
> [如何获取 APP ID 以便访问 Facebook JavaScript SDK](https://stackoverflow.com/questions/8753465/how-can-i-get-an-app-id-so-i-can-access-the-facebook-javascript-sdk)

没有 JavaScript SDK 就没有“发送按钮”。但是 JavaScript SDK 要求您在 Facebook 上注册您的网站以获取 App ID。

我终于明白我通过开始制作应用程序（？）得到了这个应用程序 ID。但我不被允许。帐户已验证，发送复印件护照...等希望这会结束并且会好的

但仍然想知道这是否确实是制作“发送按钮”的最简单方法......（询问 JavaScript SDK）

谢谢伯特

# php - PHP ORM 最佳实践：从另一个对象类型中检索值：

> ID：10463867
> 
> 赞同：1
> 
> 时间：2012-05-05T16:40:58.360
> 
> 标签：php, orm, redbean

我最近开始使用 RedBean ORM。

我有一个用户 bean 类型来存储用户的信息，以及一个用于用户功能的关联 FUSE 模型。

当用户登录或会话已设置时，Redbean 会检索用户的信息，包括地址。

在用户登录之前，我通过 geoip 位置服务为新用户 bean 设置状态和城市值。

我想知道这种程序的最佳做法是什么。

在我看来，我有几个选择：

1.  在用户 FUSE 模型中创建一个方法，该方法实例化 geoip 对象并设置值。
2.  在FUSE模型之外实例化geoip对象，直接设置值，即：$user->state = $location->state;
3.  在 FUSE 模型之外实例化 geoip 对象，但将对象传递给知道如何处理它的 FUSE 模型设置器。

我猜你真的不想做选项一，因为它为类创建了一个依赖项。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:49:37.647

如果您每次登录时都需要与用户一起处理 geoip 内容 - 创建方法并在用户登录时对其进行初始化 (1)。在其他选项中，我将使用选项 3 ( `Instantiate the geoip object outside of the FUSE model, but pass the object to a FUSE model setter which knows how to handle it.`)。最好不要直接使用对象属性并设置一些方法来处理这些属性。

```
$user->setProperty('one'); // Actually can just execute `$user->property = $var;` 
```

但不是

```
$user->property = 'one'; 
```

# mysql - 将词形还原集成到 Sphinx

> ID：10463870
> 
> 赞同：2
> 
> 时间：2012-05-05T16:41:15.420
> 
> 标签：mysql, sphinx, lemmatization

我有一个 MySQL 数据库，里面有几十万个文本文档，我需要对这些文本文件执行搜索。我决定使用 Sphinx 来实现搜索功能。但是，我需要用户能够找到所有不同形式的搜索词。我在 python 中编写了一个能够产生相当准确结果的 lemmatizer，我的问题是：如何将它与 Sphinx 集成？帮助很大。

编辑：由于还没有答案，我想补充一点，“这真的很难”或“它不能完成”之类的评论也将受到重视。如果我的想法有问题，很高兴知道:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-26T13:11:36.563

我知道这个问题很老，但它仍然在这里，所以......

Sphinx 现在[内置了对 lemmatizers 和 stemmers 的支持](http://sphinxsearch.com/docs/current.html#conf-morphology)。lemmatizer 目前有[英语、德语和俄语词典](http://sphinxsearch.com/downloads/dicts/)。我不确定字典的格式，所以我不确定添加其他语言有多难（尽管词干分析器支持其他几种语言）。

# ruby-on-rails - 如何将设计中的资源暴露给另一个控制器？

> ID：10463874
> 
> 赞同：4
> 
> 时间：2012-05-05T16:41:38.583
> 
> 标签：ruby-on-rails, ruby, devise

我试图在模式中呈现默认的设计编辑注册视图。模态正在从另一个控制器调用.. Home_controller 在这种情况下。

我的模态标记中有 <%= render :template, 'devise/registrations/edit' %> ，当单击启动模态按钮时它被调用，但是 rails 通过我是一个关于设计资源使用的未定义变量方法. 我知道资源只是一个用户对象，但主控制器不知道如何解决这个问题，我认为渲染模板方法解决了这个问题，让 rails 使用设计注册控制器。

有任何想法吗？我真的想要保留默认的设计控制器以简化未来的功能吗？如何从一个控制器中的不同控制器调用视图，从而使被调用控制器中的所有操作都可用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T17:18:21.720

尝试将此添加到 application_helper.rb （来自[The Devise Wiki](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)）

```
 def resource_name
    :user
  end

  def resource
    @resource ||= User.new
  end

  def devise_mapping
    @devise_mapping ||= Devise.mappings[:user]
  end 
```

# css - 如何在 coda 中为 LESS 配置语法高亮显示？

> ID：10463877
> 
> 赞同：5
> 
> 时间：2012-05-05T16:41:52.890
> 
> 标签：css, syntax-highlighting, less, coda

我使用[LESS.app](http://incident57.com/less/)来减少编译，但对于 Coda 在文件中没有 CSS/LESS 的语法高亮显示没有帮助`.less`。

如何强制 Coda 在 .less 文件中突出显示 css/less 语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:00:12.450

我通过创建一个 LESS“modes”文件夹来解决这个问题。

*   右键单击“**应用程序**”中的 Coda 应用程序
*   选择“**包装内容**”
*   “**内容**”
*   “**资源**”
*   “**模式**”
*   **然后将“ LESS Modes** ”文件夹存放在“ **Modes** ”中

[http://ge.tt/3YxFNRH/v/0](http://ge.tt/3YxFNRH/v/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:13:21.143

我不确定你在问什么，这个问题不是很容易理解。

您是否正在寻找一种`less`在 Coda 中打开文件并使用正确颜色正确突出显示源的方法？

> [Jason Robb SEEStyles](https://github.com/jasonrobb/Coda-SEEStyles)或者从[Twilight-Seestyles导入](https://github.com/DraStudio/Twilight-Seestyles)[less 样式](https://github.com/DraStudio/Twilight-Seestyles/blob/master/LESS.seestyle)怎么样？

`less`您是否希望`css`在 Coda中编译？

> [AlfredApp](http://support.alfredapp.com/extensions)的脚本怎么样？

# php - PHP 在我的服务器上不起作用，但我在某处找到的这个会话脚本需要它

> ID：10463883
> 
> 赞同：2
> 
> 时间：2012-05-05T16:42:51.877
> 
> 标签：php, session

我正在尝试为我的网页添加一些安全性。

我的网页“page.html”有很多 javascript 脚本和 html 代码。我可以将扩展名更改为 php。对于那件事我没有任何疑问。

我正在使用我在互联网上找到的示例代码来了解 session_start 的工作原理。如果我有 html 扩展名，它可以正常工作，但即使我不添加用户并通过，我也可以访问网页。如果我使用 php 扩展程序，网页会再次将我抛出到登录提示。使用 php 扩展程序，当我在浏览器上编写网页时，我无法访问该网页。

这是我检查访问的代码：checkAccess.php

```
<?php
session_start();
//check the autenticated value
if ($_SESSION["autenticado"] != "si") {
//if doesn't exits, goes to login webpage
header("Location: login.php");
exit();
}
?> 
```

我在 html 和 php 网页上添加了这一行：

```
<?php include "checkAccess.php";?> 
```

我知道它有效，因为我可以访问我的 html 页面。但是当我将扩展名更改为 php 时，它不起作用。

我是否必须在 php.ini 或类似的东西中配置任何值？

我添加我的其他 php 文件来检查会话：

autenticacion.php：

```
<?
session_start();
if ($_POST["usuario"]=="user" && $_POST["contrasena"]=="123456"){
$_SESSION["autenticado"]= "SI";
header ("Location: mypage.php");
}else {
header("Location: login.php?errorusuario=si");
}
?> 
```

登录.php：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
<title>Autenticación PHP</title>
</head>
<body>
<h1>Formulario de autenticaci&oacuten</h1>
<?php if(isset($_GET['errorusuario'])){if ($_GET['errorusuario']=="si"){?>
<font color="red"><b>Datos incorrectos</b></font>
<?php }}else{?>
Introduce tu nombre de usuario y contrase&ntildea
<?}?>
<form action="autenticacion.php" method="POST">
<table border="0">
<tr><td>Nombre de usuario:</td><td><input name="usuario" size="25" value=""/></td></tr>
<tr><td>Contrase&ntildea:</td><td><input name="contrasena" size="25" type="password"/>      </td></tr>
<tr><td/><td><input type="submit" value="Inicio de sesión"/></td></tr>
</table>
</form>
Para ingresar, d&eacutebes ingresar <b>pablo</b> en el 1er campo y <b>123456</b> en el    2do.
</body>
</html> 
```

我正在使用 xampp 来测试页面。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-05T16:49:51.653

问：在哪里`$_SESSION["autenticado"]`设置？

问：你在`session_start()`那里也做过吗？您*必须在**两个*页面中调用 start_session() 。

问：如果你认为你`echo`的价值是``$_SESSION["autenticado"]`什么？为什么不对整个 $_SESSION[] 数组做一个 var_dump() ，看看那里有*没有什么*？

问：您是否在浏览器中启用了 cookie？

这是一个关于 PHP 会话的好教程：

*   [http://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)

这是 $_SESSION[] 超全局的文档（注意您可能应该在代码中使用的“isset($_SESSION)”函数）：

*   [http://php.net/manual/en/reserved.variables.session.php](http://php.net/manual/en/reserved.variables.session.php)

是的，php.ini 中有会话设置。但坦率地说，除非万不得已，而且除非你确切地知道自己在做什么，否则我不会惹他们中的任何一个。这是文档：

*   [http://php.net/manual/en/session.configuration.php](http://php.net/manual/en/session.configuration.php)

# java - Java GUI Swing，从 .txt 文件中读取

> ID：10463887
> 
> 赞同：-1
> 
> 时间：2012-05-05T16:43:50.267
> 
> 标签：java, security, swing, user-interface, serialization

好的，我想知道是否有人可以非常详细地解释如何让我的 JPasswordField 将输入的内容保存到 .txt 文件中。所以当我再次打开程序时，我可以让那个人登录，它会得到是否是密码。如果是密码，则 JOptionPane 将关闭。我把这一切都放在一个 JFrame 中，“登录”按钮在一个 JMenu 中的一个 JMenuBar 中，名为“文件”。在文本文件中，我想让用户输入用户名和密码，它会为该用户设置用户名和密码，如下所示。前任。

用户名 = 加文

密码 = 123

因此，如果有办法将某个变量存储到该文本文件并让程序加载该变量值，如果您能解释一下，那就太好了。我对用勺子喂食也很开放，因为我不只是服用和使用它，不。我要看看它，弄清楚它为什么起作用，因为我要以不同的方式复制它。提前致谢！

PS 是的，我确实做了一些研究，但问题是，人们会放一个我不知道它如何开始工作的代码，我对 Java 编程还很陌生。所以，请粘贴代码，我会研究它们，但如果你也可以稍微解释一下。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-05T16:55:50.787

我相信这正是您正在寻找的 - [http://cs.saddleback.edu/rwatkins/CS4B/Crypto/FileEncryptor.html](http://cs.saddleback.edu/rwatkins/CS4B/Crypto/FileEncryptor.html)

该代码有据可查，但如果您有任何问题，请直接问他们，我会尽力回答

嗯，这是使用加密最简单的方法（可能）。这绝对是个好主意。然而，仅写入和读取文本文件的简单部分可以通过

```
39:       filename = "clear.txt";
40: 
41:       // Password must be at least 8 characters (bytes) long
42: 
43:       String password = "super_secret";
44: 
46:       outFile = new FileOutputStream(filename);
80:       outFile.write(password); 
```

这种阅读方法更复杂，但我会尝试解释一下

```
private static String readFileAsString(String filePath) throws java.io.IOException{
    byte[] buffer = new byte[(int) new File(filePath).length()];
    BufferedInputStream f = null;
    try {
        f = new BufferedInputStream(new FileInputStream(filePath));
        f.read(buffer);
    } finally {
        if (f != null) try { f.close(); } catch (IOException ignored) { }
    }
    return new String(buffer);
} 
```

基本上 byte[] 是一个原始 1 和 0 的数组（如果您不确定那是什么，请用谷歌搜索）。它将文件的所有 1 和 0 放入数组中（即与文件长度相同，即 (int) new File(filePath).length()），然后一个 fileinputstream 做了所有奇妙的魔法来转换这些 1 和 0成文字。BufferedinputStream 只是文件输入流的一个有效包装器，因为它一次读取大量字节，然后同时将它们全部转换（它将它们存储在缓冲区中，因此得名），而不是一次读取和转换 1 个字节，这很慢并且效率低下（FileInputStream 本身）。你会想用谷歌搜索的例外情况，但基本上它只是为了让你的程序在你找不到文件或者你没有读取/写入权限的情况下不会崩溃。

# web - 将应用程序直接安装到系统的网站

> ID：10463890
> 
> 赞同：0
> 
> 时间：2012-05-05T16:43:56.953
> 
> 标签：web, system

是否可以让网站直接在系统上安装应用程序（游戏和软件）？该网页可以将所需的安装文件从服务器复制到系统上的指定目的地，也可以访问系统注册表以进行修改。无需以这种方式下载应用程序的设置文件。他们甚至可以被授予修改硬件设备文件系统的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:42:10.920

正如您所描述的那样，我看到完成此操作的唯一方法是通过 Adob​​e Air 应用程序。当然，用户必须下载并安装 Adob​​e Air，但他们只需在计算机的整个生命周期内执行一次。

然后，您可以向用户显示一个带有特殊命令的按钮，告诉 Adob​​e Air 安装您的应用程序

这是一个这样的安装程序的示例：[http ://www.earthbrowser.com/install/](http://www.earthbrowser.com/install/)

# css - 如何制作 100% 高度的分栏

> ID：10463893
> 
> 赞同：1
> 
> 时间：2012-05-05T16:44:12.493
> 
> 标签：css

好的，主要内容和侧边栏的基本设置，它们之间应该有细线。有没有办法用纯css制作？

```
<row>
<div span6>
<div span1 divider>
<div span5>
</row> 
```

所以那个分隔线是一条细线，它会有 100% 的高度？我知道我可以在 jquery 中设置高度或者只是跳过它但只是想知道......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:57:41.660

我的意见 - 如果没有固定高度（**.row**）用于使用*左边框*，则只有使用重复背景图像的可能性。**（ .row**中的一些点和*重复*-y ）

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T17:24:53.230

我也在寻找解决这个问题的方法。我需要一个可以用“列数”实现的解决方案，并提出以下解决方案。

我只是在容器中添加了一个背景*（1px x 4px，尽管高度可以大或小（1px 可以），只要你愿意） 。*

我的容器代码（示例：）

```
<div class="column-two">

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris bibendum tortor sit amet ultricies ornare. Integer eu interdum augue. Pellentesque quis semper neque. Duis enim nisl, posuere in sollicitudin id, euismod vel neque. Quisque id nisi cursus, laoreet ante ut, faucibus eros. Mauris orci massa, vestibulum at ante a, semper luctus nunc. Phasellus vel nisi condimentum, congue enim et, auctor elit. Vestibulum libero neque, aliquet eget dapibus quis, ullamcorper a orci.</p>

</div> 
```

应用于我的容器的 CSS：

```
div.column-two {
-moz-column-count: 2;
-moz-column-gap: 30px;
-webkit-column-count: 2;
-webkit-column-gap: 30px;
background:url('images/div-2column.png') center top repeat-y;
} 
```

这将创建 2 列显示，其中背景图像创建视觉垂直分隔。对我有用！:)

编码

*（我还添加了以下内容，以确保列高度相等。以下内容从初始段落中删除了填充）*

```
div.column-two p:first-of-type { margin-top:0; } 
```

*请注意，较旧的 IE 浏览器将退回到单列显示。使用“背景：无”定位这些特定浏览器将确保背景不会显示在单列段落的中间。***

# c# - 是否有任何开源元循环 CLR 实现？

> ID：10463894
> 
> 赞同：0
> 
> 时间：2012-05-05T16:44:13.607
> 
> 标签：c#, .net, clr, metacircular

.Net CLR 是否有任何开源元循环实现？我知道 MONO 并不完全是用 C# 编写的，所以我一直在寻找某种完全用 C# 实现 .Net CLR 的开源项目（类似于用于 JVM 的[Maxine](http://labs.oracle.com/projects/maxine)），以便更好地理解 .Net CLR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:40:02.167

您是否阅读过代号为“Rotor”的共享源 CLI？

一些链接：

[http://en.wikipedia.org/wiki/Shared_Source_Common_Language_Infrastructure](http://en.wikipedia.org/wiki/Shared_Source_Common_Language_Infrastructure)

[http://www.microsoft.com/en-us/download/details.aspx?id=4917](http://www.microsoft.com/en-us/download/details.aspx?id=4917)

Roslyn 项目也很有趣，它是一个用 C# 编写的 C# 编译器：

[http://blogs.msdn.com/b/csharpfaq/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)

# requirejs - 使用 requireJS 和 data-main 的参数

> ID：10463895
> 
> 赞同：9
> 
> 时间：2012-05-05T16:44:33.897
> 
> 标签：requirejs

我想知道是否有一种方法可以使用 data-main 参数将参数传递给 requireJS。

```
<script data-main="Main"  src="lib/require/require.js"></script> 
```

我可以介绍全局变量：

```
<script>
    var mainId = "Main";
    var mainTarget = "body";
</script>
<script data-main="Main"  src="lib/require/require.js"></script> 
```

但我想知道是否有更清洁的方法来做到这一点。谢谢！

编辑：

西蒙，对于 mainTarget 值，我认为这是一个很棒的计划。

```
require([
    'plugins/load!./'+mainId+'.htm',
    'plugins/load!./'+mainId+'.css'
],function(html,css){
    var Main = function(){
        this.__proto__ = mainTarget;
    }
    new Main();
} 
```

如何将此应用于 mainId？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T20:03:26.203

实现此目的的一种方法是创建一个全局或通用模块并将其用作依赖项：

**global.js**

```
define({
    foo: 'test',
    bar: 'red'
}); 
```

使用全局：

```
require(['global'], function(global) {
    console.log(global.foo) // 'test'
}); 
```

这依赖于 JS 文件中保存的全局对象属性。将服务器端的数据输出到 HTML 页面中的 JS 对象中也是一种常见的模式。为此，您只需为您的模块命名。

```
<head>
    <script>
        define('global', {
            mainId: 'Main',
            mainTarget: 'body' 
        })
    </script>
</head> 
```

**main.js**

```
require(['global'], function(global) {
    console.log(global.mainId) // 'Main'
}); 
```

如果您定义一个需要全局属性的模块，只需将该`global`模块设置为依赖项即可。

您还可以使用`priority`配置选项来确保您的全局模块在其他任何内容之前加载 - [http://requirejs.org/docs/api.html#config](http://requirejs.org/docs/api.html#config)

# python - 在 NLTK 和 Python 中创建自定义分类语料库

> ID：10463898
> 
> 赞同：10
> 
> 时间：2012-05-05T16:44:42.623
> 
> 标签：python, regex, nlp, nltk

我遇到了一些与正则表达式和`CategorizedPlaintextCorpusReader`Python 有关的问题。

我想创建一个自定义分类语料库并在其上训练一个朴素贝叶斯分类器。我的问题如下：我想要两个类别，“pos”和“neg”。正面文件都在一个目录中，`main_dir/pos/*.txt`，而负面文件在一个单独的目录中，`main_dir/neg/*.txt`。

如何使用`CategorizedPlaintextCorpusReader`来加载和标记 pos 目录中的所有正文件，并对负文件执行相同操作？

`Movie_reviews`注意：设置与语料库完全相同（ `~nltk_data\corpora\movie_reviews`）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T15:24:46.547

这是我的问题的答案。由于我正在考虑使用两种情况，我认为最好同时涵盖这两种情况，以防将来有人需要答案。如果您具有与 movie_review 语料库相同的设置 - 多个文件夹以相同的方式标记，您希望您的标签被调用并包含训练数据，您可以使用它。

```
reader = CategorizedPlaintextCorpusReader('~/MainFolder/', r'.*\.txt', cat_pattern=r'(\w+)/*') 
```

我正在考虑的另一种方法是将所有内容放在一个文件夹中，并将文件命名为 0_neg.txt、0_pos.txt、1_neg.txt 等。您的读者的代码应该类似于：

```
reader = CategorizedPlaintextCorpusReader('~/MainFolder/', r'.*\.txt', cat_pattern=r'\d+_(\w+)\.txt') 
```

我希望这对将来的某人有所帮助。

# javascript - iOS webview将var发送到javascript html文件

> ID：10463899
> 
> 赞同：0
> 
> 时间：2012-05-05T16:44:42.857
> 
> 标签：javascript, html, objective-c, ios, xcode

我正在将一个 html 文件加载到 uiWebView 并使用以下方法获取先前在 div 上设置的变量：

```
 NSString *body = [self.webView stringByEvaluatingJavaScriptFromString:
                          @"document.getElementById('var').innerHTML"]; 
```

但我现在需要相反的过程，使用 javascript 将变量设置为 html 文件。Html javascript 代码将等到我发送一个 var。类似于以下伪代码，

```
 [self.webView stringSetJavaScriptFromString:
           @"document.setElementById('var').innerHTML", myStringVar]; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:25:55.570

你是否已经尝试过

```
[self.webView stringByEvaluatingJavaScriptFromString:
      [NSString stringWithFormat:@"document.getElementById('var').innerHTML = '%@';",myStringVar]]; 
```

?

# iphone - 这是开发了哪些控件？（见图）我相信它是 UITableView 但不知道如何

> ID：10463902
> 
> 赞同：0
> 
> 时间：2012-05-05T16:45:05.270
> 
> 标签：iphone, ios, uitableview

我是 iPhone/iPad 开发的新手。

我想创建一个文本应用程序，该应用程序具有在列表中显示图像（来自本地文件）的功能，如下图所示。我相信它已经完成了，`UITableView`但我什至不知道如何开始它。当然我尝试在网上搜索，但大部分内容都很基础......

谢谢

![该应用程序称为 Cool Guy](../Images/900df1007fbce97341a9d3352be115d8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:59:23.433

是的，你是对的，可以使用 UITableView 完成，但你需要具有标准垂直行的表格视图。请访问以下参考资料，这将对您有很大帮助。

[垂直与标准垂直行](http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-2)

希望对你有帮助...

# java - 在 java swing 中使用 JDirectoryChooser

> ID：10463903
> 
> 赞同：0
> 
> 时间：2012-05-05T16:45:15.820
> 
> 标签：java, swing

我需要一个`JDirectoryChooser`在 java swing 中使用的简单示例。

`JDirectoryChooser chooser = new JDirectoryChooser();`总是给我一个编译时错误`JDirectoryChooser cannot be resolved`。我认为这一定是图书馆的问题，但我不太确定它需要哪个图书馆？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T16:49:38.513

`JDirectoryChooser`不是官方 JDK 的一部分，似乎是 JAlbum 的一部分。但是查看[javadoc](http://jalbum.net/api/se/datadosen/component/JDirectoryChooser.html)，您可以通过使用常规来获得相同的结果`JFileChooser`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T13:52:49.617

没有“JDirectoryChooser”，但`JFileChooser`有以下方法：

`setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);`

# html - HTML/CSS 动态数字生成器

> ID：10463904
> 
> 赞同：-4
> 
> 时间：2012-05-05T16:45:25.100
> 
> 标签：html, css

如何生成动态数字，因为它们可以用作登录特定页面的 6 位密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:47:59.910

为此使用Javascript。这是一个示例，它将在默认警报框中提醒它。您可能想用它做其他事情，但创建随机 6 位数字的逻辑是相同的：

```
<script type="text/javascript">
    alert(100000+Math.floor(Math.random()*900000));
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:53:28.860

我不确定 CSS 有什么用。你有很多选择，例如。javascript 或 php。

您需要提供更多信息，但如果我理解正确，PHP 将是最好的，因为它是服务器端。如果您将 Javascript 用作验证码，则 Javascript 可能是一个安全问题。

你可以使用

```
<?php echo rand(0, 999999); ?> 
```

# objective-c - Ruby Motion 在 Ruby 中手动创建语法相似的类 Objective-C 函数

> ID：10463906
> 
> 赞同：3
> 
> 时间：2012-05-05T16:45:26.493
> 
> 标签：objective-c, methods, rubymotion

Ruby Motion 带有许多预构建的函数，其格式如下：

```
def tableView(tv, numberOfRowsInSection:section)
  # blah
end 
```

我想像这样删除自己的功能；人为的例子：

```
class Timeser
  def multiplyNumber(one byNumber:two)
    one*two
  end
end 
```

此代码不会在 ruby​​ motion 1.0 下编译...有没有办法做到这一点？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T19:20:34.353

你少了一个逗号：

```
class Timeser
  def multiplyNumber(one, byNumber:two)
    one*two
  end
end 
```

结果：

```
(main)>> Timeser.new.multiplyNumber(2, byNumber: 3)
=> 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:55:29.390

```
class Foo
  def initWithThingOne(one, andThingTwo: two)
    puts one
    puts two
  end
end

Foo.new.initWithThingOne "1", andThingTwo: "2"
=>
1
2 
```

# c++ - 什么时候创建和销毁静态成员？

> ID：10463907
> 
> 赞同：1
> 
> 时间：2012-05-05T16:45:40.720
> 
> 标签：c++

何时创建和销毁特定 C++ 类的静态成员？假设我定义了一个`WinVersion`类：

WinVersion.h

```
class WinVersion {
public:
    // static methods
    static WinVersion& Get();
    static bool Is_NT();

    // singleton
    static WinVersion m_version;

    // constructor
    WinVersion();

private:
    unsigned short m_PlatformId;
    unsigned short m_MajorVersion;
    unsigned short m_MinorVersion;
    unsigned short m_BuildNumber;
}; 
```

WinVersion.cpp：

```
// static members
WinVersion WinVersion::m_version = WinVersion(); // unsure if it's good enough

// static functions
WinVersion& WinVersion::Get() {
    return m_version;
}

bool WinVersion::Is_NT() {
    return (m_version.m_PlatformId == VER_PLATFORM_WIN32_NT);
}

// constructor
WinVersion::WinVersion()
{
    OSVERSIONINFO osinfo;
    osinfo.dwOSVersionInfoSize = sizeof(OSVERSIONINFO);
    ...
} 
```

什么时候`m_version`创建和销毁静态成员？万一出现异常怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T17:03:01.777

静态成员在 main() 之前初始化，在 main() 中返回后按创建的相反顺序销毁。

静态成员是静态分配的，它们的生命周期以程序开始和结束。

异常不适用于静态成员初始化，因为您无法捕获静态对象将抛出的任何异常。在你的程序开始之前你不应该“期望”有静态成员初始化问题，这显然是一个错误。你的编译器和链接器会让你知道静态定义的任何问题。

# iphone - CoreData 将 NSDate 存储为 UTC-Timestamp 有缺点吗？

> ID：10463909
> 
> 赞同：0
> 
> 时间：2012-05-05T16:45:56.313
> 
> 标签：iphone, core-data, types

在 Sql 中有日期函数，但在 CoreData 中只有“<”、“=”和类似的。如果我将 Date 存储为表示时间戳的 intvalue，我也可以使用“-”、“+”等。除了转换之外，将日期存储为 NSDate 还有一个好处吗？我不认为，但我不确定。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:34:34.963

不，没有缺点。事实上，如果您在生成 NSManagedObject 子类时选择“使用原始数据类型的标量属性”，它会为您将 NSDate 转换为 NSTimeInterval (double)。

# iphone - 使用 Instagram 打开图像

> ID：10463911
> 
> 赞同：6
> 
> 时间：2012-05-05T16:45:59.940
> 
> 标签：iphone, objective-c, ios, xcode, ipad

嗨，我需要在 Instagram 中导入我编辑的图像，比如 PhotoStudio：

![在此处输入图像描述](../Images/38fa31a0fc969308471a3198fd7582a9.png)

我用这段代码捕获了我的图像：

```
 UIGraphicsBeginImageContextWithOptions(self.captureView.bounds.size, self.captureView.opaque, 0.0);
    [self.captureView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * screenshot = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext(); 
```

然后我需要`screenShot`用 Instagram 打开它：

* * *

***编辑***：

我实现这样的方法：

```
 UIGraphicsBeginImageContextWithOptions(self.captureView.bounds.size, self.captureView.opaque, 0.0);
    [self.captureView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * screenshot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", screenshot]];

    docFile.UTI = @"com.instagram.photo";
    [self setupDocumentControllerWithURL:igImageHookFile];

    NSURL *instagramURL = [NSURL URLWithString:@"instagram://media?id=MEDIA_ID"];
    if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) {
        [[UIApplication sharedApplication] openURL:instagramURL];
    }

    else {   
        NSLog(@"No Instagram Found");
    }
} 
```

但我收到这个输出：

```
2012-05-05 21:55:36.842 InstantFrame[855:707] *** Assertion failure in -[UIDocumentInteractionController setURL:], /SourceCache/UIKit/UIKit-1914.84/UIDocumentInteractionController.m:1094
2012-05-05 21:55:36.848 InstantFrame[855:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UIDocumentInteractionController: invalid scheme (null).  Only the file scheme is supported.' 
```

Instagram 将打开，但不会导入任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:54:29.193

您要做的是打开一个特殊格式的 url。

这是我通过快速谷歌搜索找到的 instragram 文档：

[http://instagr.am/developer/iphone-hooks/](http://instagr.am/developer/iphone-hooks/)

这是描述**url 方案**过程的苹果文档。 [http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007891-SW1](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007891-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:56:33.173

要在 Instagram 上分享图片，图片的最小尺寸应为 612x612。否则它不会导入图像。

# c# - 是否可以在没有用户名的情况下使用 WinRT 的 CredentialPicker？

> ID：10463912
> 
> 赞同：1
> 
> 时间：2012-05-05T16:46:07.140
> 
> 标签：c#, windows-8, windows-runtime

在 Metro Style 应用程序中，我想使用 WinRT 提供的 CredentialPicker，主要是为了为用户提供一致的外观和感觉。但是我只需要一个密码，而不是用户名和密码。

是否可以以某种方式隐藏“用户名”输入框（以及用户图标），但在使用基本身份验证时保留所有其他功能？

基本上我想要这样的东西：

```
using Windows.Security.Credentials.UI;

async Task<string> GetPassword() {
  CredentialPickerOptions options = new CredentialPickerOptions();
  options.ShowUsernameEntry = false; // Error: No such API

  var result = await CredentialPicker.PickAsync(options);
  return result.CredentialPassword;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:53:33.323

答案是不。你不能那样做。

# objective-c - 为什么在发送 NSFetchedResultsChangeDelete 事件的核心数据中更改记录？

> ID：10463914
> 
> 赞同：2
> 
> 时间：2012-05-05T16:46:18.187
> 
> 标签：objective-c, ios, cocoa, core-data

我有一个实现 NSFetchedResultsControllerDelegate 的 UITableViewController。在

```
- (NSFetchedResultsController *)fetchedResultsController 
```

我正在从实体加载记录。现在，当我更新该实体中的记录时，NSFetchedResultsChangeType 总是 NSFetchedResultsChangeDelete 并删除我的对象。我认为它应该只是更新，因为我正在更新记录而不是删除它。

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

UITableView *tableView = self.tableView;

switch(type) {

    case NSFetchedResultsChangeInsert:
        [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:
        NSLog(@"object deleted %d",
              indexPath.row);
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeUpdate:

        [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
        break;

    case NSFetchedResultsChangeMove:
        NSLog(@"object moved %d",
              indexPath.row);
        [tableView deleteRowsAtIndexPaths:[NSArray
                                           arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [tableView insertRowsAtIndexPaths:[NSArray
                                           arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;
}} 
```

**编辑1：**

当我第一次保存对象时，它似乎也没有插入。事实上，当时 didChangeObject 甚至没有被解雇。

**编辑 2**

更多信息：我对不同的谓词使用同一张表。我有一个拆分视图，左右视图都是表格视图。在左侧，我显示了一些类别，并根据左侧的选择配置右侧的视图。配置首先删除缓存，然后更改 NSFetchedResultsController 的谓词，然后对其执行 performFetch。在后台，我找到所选类别的更新对象，然后插入新对象或更新现有对象。现在添加新对象不会自动显示在表格视图中，并且更新对象会导致删除。我从不同的 NSFetchedResultsController 更新左表视图中的类别，效果很好。两个 NSFetchedResultsController 都使用不同的缓存文件。如果我不更改谓词，那么所有类别的对象都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T18:02:13.450

我遇到了同样的问题。这就是我修复的方式：

1.  我的谓词使用 ("index == %@")
2.  我正在过滤一个整数值，但我传递了@“1”。
3.  将其更改为 %i 并传递整数，有效。

# c# - 应用程序不会终止

> ID：10463917
> 
> 赞同：0
> 
> 时间：2012-05-05T16:46:28.483
> 
> 标签：c#, .net, winforms

我的问题是，当我使用标题栏上的关闭框关闭表单时，应用程序不会终止。

当我正在进行一些 I/O 操作时，我想退出应用程序而不执行 I/O 操作。

实际上，似乎程序已关闭，但任务管理器的进程列表显示并非如此。

如何强制取消 I/O 操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:52:21.830

我向您推荐以下内容：

1.  将 I/O 操作更改为异步模式（使用 BeginXXX、EndXXX），停止它们会更容易！
2.  使用同步事件停止所有线程。
3.  跟踪所有线程并调用 Kill 方法。

与其他点（2 或 3）一起使用的第一个点应该足够了。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:50:03.217

关闭表单只会使表单不可见。但是，如果有任何进程在主线程或其他线程中运行，则应用程序不会终止。您必须确保所有资源都已关闭或处置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T16:51:04.313

您如何尝试关闭您的应用程序？

Application.Exit 只是要求通过消息循环关闭。它可能不会发生。

最好的方法是关闭您可能正在执行的所有非后台线程。不这样做将使您的流程保持运行。

您也可以尝试 Environment.Exit 或 Environment.FailFast。这就像杀死你的进程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T17:03:03.907

**如果您的应用程序中运行了任何无限循环，请在启动它们之前让您的线程在后台线程中运行，那么它们将在应用程序退出时自动关闭。**

尝试这样做：

```
Thread somethread = new Thread(...);
someThread.IsBackground = true;
someThread.Start(...); 
```

# python - ListCtrl 在 wxPython 中调整窗口

> ID：10463920
> 
> 赞同：0
> 
> 时间：2012-05-05T16:47:13.650
> 
> 标签：python, wxpython

我一直在使用 wxPython 创建一个应用程序。我想使用 ListCtrl 显示一些数据，并且我希望列占用最大空间。这是：可用的最大大小在我拥有的行之间划分。我已经尝试过了，但它不起作用（这是 listctrl 所在的面板）：

```
class VirtualListPanel(wx.Panel):
   def __init__(self, parent):
    wx.Panel.__init__(self, parent, -1)

    width = self.GetParent().GetClientSize().width/5
    coches = vehiculos()    
    gris = wx.Color(220,220,220)

    self.lista = wx.ListCtrl(self, style=wx.LC_REPORT|wx.LC_HRULES|wx.LC_VRULES)
    self.lista.InsertColumn(0, "Matricula", width=width)
    self.lista.InsertColumn(1, "Tipo", width=width)
    self.lista.InsertColumn(2, "Matriculacion", width=width)
    self.lista.InsertColumn(3, "Ult. ITV", width=width)
    self.lista.InsertColumn(4, "Prox. ITV", width=width)

    i = 0   
    for data in coches:
        index = self.lista.InsertStringItem(i, data[0])
            self.lista.SetStringItem(index, 1, str(data[1]))
            self.lista.SetStringItem(index, 2, str(data[2]))
        self.lista.SetStringItem(index, 3, str(data[3]))
        self.lista.SetStringItem(index, 4, str(prox(data[1],data[2],data[3])))
        if((index+1) % 2 == 0):
            self.lista.SetItemBackgroundColour(index,gris)
        i += 1

    self.sizer = wx.BoxSizer(wx.HORIZONTAL)
    self.sizer.Add(self.lista, 1, wx.EXPAND|wx.ALL)
    self.SetSizer(self.sizer)

    self.Bind(wx.EVT_SIZE, self.OnResize)

def OnResize(self, event):
        width = self.GetParent().GetClientSize().width/5
    self.lista.SetColumnWidth(0, width)
    self.lista.SetColumnWidth(1, width)
    self.lista.SetColumnWidth(2, width)
    self.lista.SetColumnWidth(3, width)
    self.lista.SetColumnWidth(4, width) 
```

现在，它甚至没有占据整个窗口，它只在左上角显示一个小方块。如果我评论“self.Bind(wx.EVT_SIZE ...”行，它会显示全屏，但列很小。

先感谢您！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:06:52.367

您缺少的是函数`event.Skip()`中的调用`OnResize`。可以在此处找到有关事件传播的一些详细信息[http://wiki.wxpython.org/EventPropagation](http://wiki.wxpython.org/EventPropagation)。或者，您可以使用`self.Layout()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:43:45.580

May I suggest that you look into ObjectListView (http://objectlistview.sourceforge.net/python/). This is a wrapper around ListCtrl that has this and many other nice features builtin.
In your case, you could just pass the `isSpaceFilling=True` parameter to every column and they would divide the space equally. You can even set a minimum width for each column.

```
ColumnDefn('Title', valueGetter='title', isSpaceFilling=True, minimumWidth=100) 
```

I know ObjectListView looks a bit confusing at first, but I found it very usefull.

# mysql - 编写这个 MySQL 查询的更简洁的方法？

> ID：10463921
> 
> 赞同：3
> 
> 时间：2012-05-05T16:47:15.243
> 
> 标签：mysql

这是我当前的查询：

```
SELECT * FROM users
WHERE blah blah...
AND users.who = '1'

AND users.seeking = '2' 
OR users.seeking = '5' 
OR users.seeking = '8' 
OR users.seeking = '9' 
OR users.seeking = '11' 
OR users.seeking = '13' 
OR users.seeking = '14' 
OR users.seeking = '15' 

AND users.account_status = '1'; 
```

如您所见，搜索字段可以有多个值。除了编写这么多 OR 之外，有没有一种更漂亮的方法来指定该字段的所有可接受值以便由我的 select 语句返回？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T16:48:40.087

```
SELECT * FROM users
WHERE blah blah...
AND users.who = '1'

AND users.seeking IN('2','5','8','9','11','13','14','15') 
AND users.account_status = '1'; 
```

# vb.net - 在 vb.net LIFO 或 FIFO 中列出，为什么？

> ID：10463926
> 
> 赞同：0
> 
> 时间：2012-05-05T16:48:14.197
> 
> 标签：vb.net, list

我有这个列表（只是一个典型的 .net 列表），我在其中添加了一堆 UI 项，然后将该列表用于一个 Sub，它使用 .getenumarator 和 While 循环遍历它。

现在的问题是我的物品是如何从这个列表中检索出来的？？？

是先进先出还是后进先出，或者答案不是上面的，我完全失去了它！在这种情况下，也许我需要关于其他事情的不同或更多信息。

可以的话帮忙....

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:57:10.917

List 的枚举器将按照元素添加的顺序遍历元素。因此，如果使用 .Add 或 .AddRange 添加元素，则为“FIFO”。但是当然也可以使用 Insert 将元素插入到列表中的任何位置。

有关更多“证据”，请参阅此[类似问题](https://stackoverflow.com/questions/453006/does-a-listt-guarantee-that-items-will-be-returned-in-the-order-they-were-adde)。（这不是官方的！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:55:07.820

如果您有此列表：

> 姓名 性别
> 杰斯 女
> 迈克 男

这个循环：

```
dim str = ""
for each i as listviewitem in listview1.items
str &= i.text & " "
str &= i.subitems(0).text & " "
next 
```

str = "姓名性别 jess 女 mike 男"

# python - 将 pygooglevoice 与 IronPython 一起使用

> ID：10463928
> 
> 赞同：2
> 
> 时间：2012-05-05T16:48:24.183
> 
> 标签：python, ironpython, google-voice

我正在尝试使用 IronPython 用漂亮的 C# Winform 应用程序包装 pygooglevoice。我对 python 很陌生，我已经克服了一些障碍，但看起来我需要专家的眼睛（或初学者！）（或“外籍人士”的眼睛）来帮助我解决这个问题。

```
 File "..\googlevoice\util.py", line 3, 
in <module> 
ImportError: cannot import expat from xml.parsers 
The actual code here is: 
from xml.parsers.expat import ParserCreate 
```

执行 IronPython ipy64.exe 时出现上述错误，如下所示：

```
ip64.exe "c:\Users\nick\Downloads\pygooglevoice-0.5\googlevoice\markasread.py 
```

markasread.py的内容如下：

```
from googlevoice import Voice,util 
voice = Voice() 
voice.login('emailAddr...@gmail.com', 'password here') 
while True : 
    folder = voice.search('is:unread') 
    if folder.totalSize <= 0 : 
        break 
    util.print_(folder.totalSize) 
    for message in folder.messages: 
        util.print_(message) 
        message.mark(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:23:10.593

好吧，似乎googlevoice api使用了IronPython不支持的expat解析器。

[`pyexpat`](http://fepy.svn.sourceforge.net/viewvc/fepy/trunk/lib/pyexpat.py?content-type=text%2Fplain)如果您改用来自[FePy](http://fepy.sourceforge.net/)的文件（另存为） ，也许您可​​以让它工作`Lib/xml/parsers/expat.py`。但我不知道这是否足以让一切正常工作。

# java - 如何使用 Xpath 检索 XML 树的节点后的节点？

> ID：10463934
> 
> 赞同：3
> 
> 时间：2012-05-05T16:49:00.120
> 
> 标签：java, xml, xpath, xml-parsing

首先，我必须说我发现`Xpath`它是一个非常好的解析器，并且在与其他解析器进行比较时我猜它非常强大。

给定以下代码：

```
 DocumentBuilderFactory domFactory = 
  DocumentBuilderFactory.newInstance();
  domFactory.setNamespaceAware(true); 
  DocumentBuilder builder = domFactory.newDocumentBuilder();
  Document doc = builder.parse("input.xml");
  XPath xpath = XPathFactory.newInstance().newXPath(); 
```

如果我想找到`first`Round 1 & Door 1 的节点，在这里：

```
<Game>
    <Round>
        <roundNumber>1</roundNumber>
        <Door>
            <doorName>abd11</doorName>
            <Value>
                <xVal1>0</xVal1>
                <xVal2>25</xVal2>
                <pVal>0.31</pVal>
            </Value>
            <Value>
                <xVal1>25</xVal1>
                <xVal2>50</xVal2>
                <pVal>0.04</pVal>
            </Value>
            <Value>
                <xVal1>50</xVal1>
                <xVal2>75</xVal2>
                <pVal>0.19</pVal>
            </Value>
            <Value>
                <xVal1>75</xVal1>
                <xVal2>100</xVal2>
                <pVal>0.46</pVal>
            </Value>
        </Door>
        <Door>
            <doorName>vvv1133</doorName>
            <Value>
                <xVal1>60</xVal1>
                <xVal2>62</xVal2>
                <pVal>1.0</pVal>
            </Value>
        </Door>
    </Round>
    <Round>
        <roundNumber>2</roundNumber>
        <Door>
            <doorName>eee</doorName>
            <Value>
                <xVal1>0</xVal1>
                <xVal2>-25</xVal2>
                <pVal>0.31</pVal>
            </Value>
            <Value>
                <xVal1>-25</xVal1>
                <xVal2>-50</xVal2>
                <pVal>0.04</pVal>
            </Value>
            <Value>
                <xVal1>-50</xVal1>
                <xVal2>-75</xVal2>
                <pVal>0.19</pVal>
            </Value>
            <Value>
                <xVal1>-75</xVal1>
                <xVal2>-100</xVal2>
                <pVal>0.46</pVal>
            </Value>
        </Door>
        <Door>
            <doorName>cc</doorName>
            <Value>
                <xVal1>-60</xVal1>
                <xVal2>-62</xVal2>
                <pVal>0.3</pVal>
            </Value>
            <Value>
                <xVal1>-70</xVal1>
                <xVal2>-78</xVal2>
                <pVal>0.7</pVal>
            </Value>
        </Door>
    </Round>
</Game> 
```

我会这样做：

```
 XPathExpression expr = xpath.compile("//Round[1]/Door[1]/Value[1]/*/text()");      
  Object result = expr.evaluate(doc, XPathConstants.NODESET);
  NodeList nodes = (NodeList) result; 
```

如果我想要`second`第 1 轮和第 1 门的节点，那么：

```
XPathExpression expr = xpath.compile("//Round[1]/Door[1]/Value[2]/*/text()"); 
```

但是我如何使用循环来做到这一点，因为我不知道`Value-nodes`我有多少，这意味着我怎样才能使用循环来做到这一点，每次迭代我都会检索 3 个（我的意思是`xVal1`,`xVal2`和`pVal`值）更多值的值节点！？

要求这样做的原因是：

1.  我不知道我有多少`Round`-s

2.  我不知道我有多少`Value`-s

3.  我不想每次都声明一个新的`XPathExpression`

谢谢 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T20:24:12.783

**选项 1** - 遍历文档中的所有 Value 元素。只需要一次评估，但很难知道 Value 属于哪个 Round 或 Door 元素。

```
NodeList result = (NodeList) xpath.evaluate("//Round/Door/Value/*/text()", doc, XPathConstants.NODESET); 
```

**选项 2** - 分别迭代每个 Round、Door 和 Value 元素。需要更多评估，但上下文很容易知道。如果需要索引，很容易在循环中添加一个计数器。

```
// Get all rounds and iterate over them
NodeList rounds = (NodeList) xpath.evaluate("//Round", doc, XPathConstants.NODESET);
for (Node round : rounds) {
  // Get all doors and iterate over them
  NodeList doors = (NodeList) xpath.evaluate("Door", round, XPathConstants.NODESET);
  for (Node door : doors) {
    // Get all values and iterate over them
    NodeList values = (NodeList) xpath.evaluate("Value/*/text()", door, XPathConstants.NODESET);
    for (Node value : values) {
      // Do something
    }
  }
} 
```

**选项 3** - 根据您的要求对上述方法进行一些组合

请注意，我删除了表达式编译步骤以缩短示例。应该重新添加它以提高性能。

# objective-c - 内存管理 ios

> ID：10463947
> 
> 赞同：-4
> 
> 时间：2012-05-05T16:50:01.973
> 
> 标签：objective-c, ios, memory-management

我来自java背景，所以我是内存管理的菜鸟。我需要从 NSString *str = @"hi"; 释放内存吗？我确实需要释放 NSString *str = [[NSString alloc init]? 我合成的那些 UILabel 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:56:31.497

在这种情况下`NSString *str = @"hi";`，您不必释放字符串，因为它是编译时常量字符串对象（您不是所有者）。在第二种情况下`NSString *str = [[NSString alloc] init]`，您必须释放它，因为您是所有者，您正在分配内存，因此您是负责人。

如果您声明属性如`retain`or ，则必须释放合成属性`copy`。通常是发布它们的好网站`dealloc`。

你应该阅读这个 Apple[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011-SW1)。它有点大，但很有用；）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:57:41.353

现在不需要这样做了，有了 ARC 内存管理。查看[此](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)链接了解更多信息，或在 Google 上搜索“ARC 内存管理”。

如果您仍想手动管理内存，可以关闭 ARC。查看[此](http://www.raywenderlich.com/2657/memory-management-in-objective-c-tutorial)链接以获取快速的内存管理教程。

编辑：如果您没有使用 iOS 5，那么您必须手动管理内存。在回答您的问题“我合成的那些 UILabel 怎么样”时，如果您问如何释放它们，您只需调用

```
[label release]; 
```

明智的做法是调用所有发布声明

```
- (void)dealloc 
```

例如：

```
- (void)dealloc {
    [label release];
    [super dealloc];
} 
```

# facebook - “已达到 Feed 操作请求限制” - Facebook SDK

> ID：10463949
> 
> 赞同：0
> 
> 时间：2012-05-05T16:50:18.957
> 
> 标签：facebook, error-handling

我从 Facebook SDK 收到此错误。如果可能的话，请帮我解决这个问题。

> “未捕获的 OAuthException：(#341) 已达到 Feed 操作请求限制...”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:10:05.217

您不能增加 Facebook 强制执行的限制。尽管在某些情况下，用户个人资料中的许多帖子可能是理想的结果，但有时它被认为是垃圾邮件；Facebook 通过对此类事情实施限制来防止这种情况发生。

如果您只是想捕获此错误并向您的用户显示更微妙的错误消息，您可以使用`try {} catch`块包装您对 Facebook 的调用。

您还没有指定您使用的语言，所以我将在 PHP 中给出一个示例 -

```
$post_obj = array(
  'link' => 'www.stackoverflow.com',
  'message' => 'Posting with the PHP SDK!'
));

try{
  $ret_obj = $facebook->api('/me/feed', 'POST',$post_obj);
  if (!$ret_obj) {
    throw new Exception('Post unsuccessful!');
  }
} catch (Exception $e) {
  // Display some error to the user.
}
// If we reached here we know that the post was successful. 
```

# android - 有没有办法以编程方式设置静态主屏幕壁纸？

> ID：10463953
> 
> 赞同：0
> 
> 时间：2012-05-05T16:50:37.960
> 
> 标签：android, android-launcher, android-wallpaper

我正在修改一个安卓启动器。我想将第一个屏幕设置为静态图像，而所有其他屏幕将是其他静态图像。我怎样才能从主屏幕代码做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:20:10.530

根据开发人员的说法，您可以。

这是他们[演示](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/SetWallpaperActivity.html)套件的一部分。

# php - URL 中应允许使用哪些字符以及如何确保/删除不需要的字符？

> ID：10463954
> 
> 赞同：-2
> 
> 时间：2012-05-05T16:50:42.873
> 
> 标签：php

> **可能重复：**
> [终极清洁/安全功能](https://stackoverflow.com/questions/4223980/the-ultimate-clean-secure-function)

我正在寻找一些解决方案，以确保我的 $_GET 传入数据仅具有所需的内容，而不具有其他一些危险字符等。如何进行此操作的最佳验证/清理？我假设 REGEXP 可以在这里发挥一些作用：

```
if (isset($_GET['p'])) {
 //validate //sanitize etc...

//call controller... or whatever.
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T17:01:50.543

要验证或清理您的输入，请使用 PHP 的[过滤器](http://www.php.net/manual/en/intro.filter.php)函数：

> **验证**用于验证或检查数据是否符合某些条件。例如，传入`FILTER_VALIDATE_EMAIL`将确定数据是否为有效的电子邮件地址，但不会更改数据本身。
> 
> **清理**将清理数据，因此它可能会通过删除不需要的字符来改变它。例如，传入`FILTER_SANITIZE_EMAIL` 将删除不适合电子邮件地址包含的字符。也就是说，它不会验证数据。

* * *

如果要显示数据，则需要转义 HTML 实体。您可以使用[htmlentities](http://www.php.net/manual/en/function.htmlentities.php)函数执行此操作。

* * *

您是否要将数据存储在数据库中？根据您连接到数据库的方式（MySQL 函数、MySQLi 或 PDO），您需要（分别）使用[mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php)、[mysqli::real_escape_string 或 mysqli_real_escape_string](http://www.php.net/manual/en/mysqli.real-escape-string.php)或[PDO::quote](http://www.php.net/manual/en/pdo.quote.php)或[prepared statements](http://www.php.net/manual/en/pdo.prepared-statements.php)。

* * *

您想使用 URL 中的值吗？然后你需要使用[urlencode](http://www.php.net/manual/en/function.urlencode.php)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:57:39.170

如果我正确理解您的问题，您可以使用百分比编码。更多信息[在这里](http://en.wikipedia.org/wiki/Percent-encoding)。

在 PHP 中，这将是：

```
<?php
echo '<a href="mycgi?foo=', urlencode($userinput), '">';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:16:41.533

这取决于 $_GET 参数的内容。使用 REGEX 或字符串函数删除不必要的字符。例如：如果您的变量是页码，则删除所有不是数字的内容。如果它是某种排序值，则检查可能的值（asc/desc/...）并删除其余值。只保留您需要的内容。这应该是最安全的方式。

对于其他内容，请使用[urlencode()](http://www.php.net/manual/en/function.urlencode.php)和[urldecode()](http://www.php.net/manual/en/function.urldecode.php)，这样您就可以传递所有可能的字符。但是当你将此输入用于其他事情时要小心（例如保存到数据库或显示数据）！始终使用[mysql_real_escape_string()](http://www.php.net/manual/en/function.mysql-real-escape-string.php)、[htmlentities()](http://de2.php.net/manual/en/function.htmlentities.php)和类似的函数来编码 $_GET 参数的内容。

# c# - Linq2sql 连接查询以显示名称列表，但仅显示在另一个表中有记录的名称

> ID：10463956
> 
> 赞同：0
> 
> 时间：2012-05-05T16:51:03.893
> 
> 标签：c#, winforms, linq-to-sql, c#-4.0

我有一个员工表，我目前正在用该表中的名称填充组合框。我还有一个名为expenseHdr 的相关表，其中包含员工pk。我的表结构如下所示：

```
employees     expenseHdr
empPk         expPk
name          expenseType
              empPk 
```

现在它正在过滤名称，但它正在重复其在费用 Hdr 中的每条记录的名称。我怎样才能让它只显示每个名字一次？谢谢！

```
var emps = (from emp in db.employees
                        join exp in db.expenseHdrs on emp.pk equals exp.empPk
                        where emp.active == true 
                        orderby emp.name
                        select emp.name.Substring(0, 20)).ToList();
            cboEmployee.DataSource = emps; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:59:40.630

您可以使用`Any()`

```
var emps = (from emp in db.employees
                        where emp.active && emp.expenseHdrs.Any()
                        orderby emp.name
                        select emp.name.Substring(0, 20)).ToList();
            cboEmployee.DataSource = emps; 
```

如果表之间没有数据库关系，您将改为编写：

```
where emp.active && db.expenseHdrs.Any(exp => emp.pk == exp.empPk) 
```

# c++ - Dev C++ 编译错误，权限被拒绝

> ID：10463958
> 
> 赞同：6
> 
> 时间：2012-05-05T16:51:19.697
> 
> 标签：c++, compilation, dev-c++

我想使用 dev c++ 编译器编译代码程序，但我的编译器没有编译我的代码。程序由两个文件组成，一个是头文件，另一个是实现 .cpp 文件。我要编译的代码是正确的并且可以工作，但它没有在我的电脑上编译（windows 7）请帮忙

我得到的错误是

```
 Permission denied 
  ld returned 1 exit status 
  C:\Makefile.win [Build Error]  [Project1.exe] Error 1 
```

这是我的编译日志

```
Compiler: Default compiler
Building Makefile: "C:\Makefile.win"
Executing  make...
make.exe -f "C:\Makefile.win" all
g++.exe -c testProgDoublyLinkedList.cpp -o testProgDoublyLinkedList.o -I"C:/Dev-Cpp/lib/gcc/mingw32/3.4.2/include"  -I"C:/Dev-Cpp/include/c++/3.4.2/backward"  -I"C:/Dev-Cpp/include/c++/3.4.2/mingw32"  -I"C:/Dev-Cpp/include/c++/3.4.2"  -I"C:/Dev-Cpp/include"   

g++.exe testProgDoublyLinkedList.o  -o "Project1.exe" -L"C:/Dev-Cpp/lib" -mwindows  

C:\Dev-Cpp\Bin\..\lib\gcc\mingw32\3.4.2\..\..\..\..\mingw32\bin\ld.exe: cannot open output file Project1.exe: Permission denied
collect2: ld returned 1 exit status

make.exe: *** [Project1.exe] Error 1

Execution terminated 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-08T16:30:47.637

尝试运行任务管理器以确定您的程序是否仍在运行。

如果它终止它，因为这就是你的编译器给你一个错误的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T16:59:48.310

Windows 7 不允许您直接写入`c:\`（以及其他位置）的根目录，除非在以管理员权限运行的进程中。

对您来说最简单的解决方法是将您的项目从`c:\`另一个目录移动——例如，`c:\projects`将工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-09T06:19:46.380

我在我的 Windows 7 中尝试了所有建议的答案
1\. 以管理员身份运行
2\. 如果它已经在运行，则终止该进程
3\. 授予项目文件夹的完全控制权限
4\. 移动到不同的项目文件夹。
没有什么能解决我的问题。最后我在**禁用 avast 防病毒**后尝试了..它起作用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T04:40:27.940

**Windows 7的**

> 如果单击保存所有文件按钮，然后关闭并删除 makefile 和除 .cpp、.dev、.c 之外的其他文件，然后使用 .dev 或 .cpp 或 .c 重新打开，然后运行它即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-06T04:56:38.363

通过创建一个新文件夹并将项目保存到该新文件夹中，我能够解决同样的问题。然后我还将源文件保存在同一个文件夹中，一切最终都正确执行。尝试执行时查找文件似乎是目录问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-03T04:26:14.460

我从项目文件夹中删除了生成的 exe 文件，然后出现错误。每次 rebuld-rerun 后我都会删除。如果没有删除，请等待 1-2 分钟。一次尝试删除，它会拒绝。离开它，它会自行消失。同时你可以享受代码的变化。尝试了一切，只有这个有效

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-21T04:29:32.833

C:\Dev-Cpp\Bin..\lib\gcc\mingw32\3.4.2........\mingw32\bin\ld.exe: 无法打开输出文件 Project1.exe: Permission denied collect2: ld返回 1 个退出状态

这里的这一行是计算机说它没有使用指定目录的权限。将您的工作保存在程序有权使用的新文件夹中，或者以管理员身份运行您的程序。

对一个老问题的回应是毫无意义的，但如果其他人有这个问题，希望这能节省他们一些时间。

# c++ - 内联汇编 - cdecl 和准备堆栈

> ID：10463960
> 
> 赞同：2
> 
> 时间：2012-05-05T16:51:27.440
> 
> 标签：c++, linux, gcc, assembly, 32-bit

我最近一直在尝试通过使用缓冲区和不同汇编运算符的 RAW 十六进制等效项在 C++ 中实现动态函数。为了说明一个简单的跳转：

```
byte * buffer = new buffer[5];
*buffer = '0xE9'; // Hex for jump
*(uint*)(buffer + 1) = 'address destination'; 
```

我在组装方面没有经验，但我知道足以创建*非常*简单的功能。现在我正在原始内存中创建 cdecl 函数。问题是，我不知道我想用`sub`. 我们以这个函数为例：

```
int MyTest(int x, int y) { return x + y; }

long TheTest(int x, int y)
{
    return MyTest(x, 5);
}

08048a20 <_Z6TheTestii>:
_Z6TheTestii():
 8048a20:   55                      push   %ebp
 8048a21:   89 e5                   mov    %esp,%ebp
 8048a23:   83 ec 18                sub    $0x18,%esp
 8048a26:   c7 44 24 04 05 00 00    movl   $0x5,0x4(%esp)
 8048a2d:   00 
 8048a2e:   8b 45 08                mov    0x8(%ebp),%eax
 8048a31:   89 04 24                mov    %eax,(%esp)
 8048a34:   e8 c2 ff ff ff          call   80489fb <_Z6MyTestii>
 8048a39:   c9                      leave  
 8048a3a:   c3                      ret 
```

如您所见，首先是 C++ 代码，下面是“TheTest”函数的 ASM。可以立即注意到堆栈被推送了 24 (0x18) 个字节（如前所述，我没有使用汇编的经验，因此我可能不会使用正确的术语和/或完全正确）。这对我来说没有任何意义。当只使用 2 个不同的整数时，为什么需要 24 个字节？使用了变量“x”，它是 4 个字节，而值“5”也使用了 4 个字节（记住它是 cdecl，因此调用函数负责处理函数*参数*的内存）不能弥补 24... .

现在这里有一个额外的例子，它让我对汇编输出感到*非常*好奇：

```
int NewTest(int x, char val) { return x + val; }

long TheTest(int x, int y)
{
    return NewTest(x, (char)6);
}

08048a3d <_Z6TheTestiiii>:
_Z6TheTestiiii():
 8048a3d:   55                      push   %ebp
 8048a3e:   89 e5                   mov    %esp,%ebp
 8048a40:   83 ec 08                sub    $0x8,%esp
 8048a43:   c7 44 24 04 06 00 00    movl   $0x6,0x4(%esp)
 8048a4a:   00 
 8048a4b:   8b 45 08                mov    0x8(%ebp),%eax
 8048a4e:   89 04 24                mov    %eax,(%esp)
 8048a51:   e8 ca ff ff ff          call   8048a20 <_Z7NewTestic>
 8048a56:   c9                      leave  
 8048a57:   c3                      ret 
```

这里唯一的区别（除了值）是我使用'char'（1字节）而不是整数。如果我们再看一下汇编代码，这只会将堆栈指针推入 8 个字节。这与前面的示例相差*16*个字节。作为一个彻头彻尾的 C++ 人，我不知道发生了什么。如果有人能在这个问题上启发我，我将不胜感激！

注意：我在这里发帖而不是阅读 ASM 书籍的原因是因为我需要为这个功能使用*汇编*。所以我不想为了 40 行代码读一整本书……

编辑：我也不关心平台依赖性，我*只*关心 Linux 32bit :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:07:49.137

中创建的堆栈帧`TheTest`包含本地（自动）变量和函数的参数，例如`MyTest`和`NewTest`，由 调用`TheTest`。框架由 推动和弹出`TheTest`，因此只要它足够大以容纳它调用的函数的参数，大小就无关紧要了。

您看到的编译器输出是编译器多次传递的结果。每次传递都可以执行减少所需帧大小的转换和优化；我怀疑在某些早期状态下，编译器需要 24 字节的帧，即使代码经过优化，也从未减少它。

您平台上编译器的 ABI 将建立一些您必须遵循的堆栈对齐规则，因此帧大小被四舍五入以满足这些要求。

这些函数使用帧指针`%ebp%`，尽管这不是代码大小或性能的胜利；不过，这可能有助于调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:19:07.273

在我看来，您的编译器对第一个函数犯了错误（可能缺少堆栈使用优化）。您的编译器使用两条指令（移动到预先分配的堆栈槽）而不是一条推送指令也很奇怪。

您是否在没有优化的情况下进行编译？你能发布你的编译器命令行吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T11:25:27.117

这是为了保持堆栈与 32 字节的倍数对齐，以便 SIMD 指令可以与堆栈上的变量一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T17:07:32.037

在这些函数中插入了一些序言和尾声代码。尝试用裸函数编写程序集，即

```
__declspec( naked ) void UsernameIdTramp() // 10 byter, 5 bytes saves + 5 bytes for tramp
{
    __asm 
    {  
        nop; nop; nop; nop; nop;   // 5 bytes copied from target - 
        nop; nop; nop; nop; nop;   // 5 bytes for the jump back.
    }
} 
```

# django - 在 Dreamhost 上使用 .htaccess 和 Django 关闭PassengerEnabled 和密码保护目录

> ID：10463962
> 
> 赞同：1
> 
> 时间：2012-05-05T16:52:11.973
> 
> 标签：django, .htaccess, passenger, dreamhost

我有一个在 Dreamhost 上使用 Django 构建的网站，该网站使用Passenger 和 Apache 成功部署。我有一组静态 HTML 页面，它们在一个名为`/demo/`. 通过使用此行将`.htaccess`文件添加到目录：`/demo/`

`PassengerEnabled off`

我能够绕过 Django 并提供`/demo/`目录中的静态页面。我想在`/demo/`不编辑 Django python 文件的情况下为页面添加密码保护，但无法通过在文件中添加以下行来做到这一点`.htaccess`（行上方和下方`PassengerEnabled off`：

```
AuthUserFile /public/demo/.htpasswd
AuthGroupFile /dev/null
AuthName "Private Demo Area"
AuthType Basic
require valid-user 
```

我没有被迫使用`.htaccess`文件方法，并且想知道如何将静态文件目录配置为不被 Django 处理但也受密码保护？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:06:33.173

我找到了一个解决方案，它涉及创建子域，而不是尝试通过重新映射的子目录通过 Django 和Passenger 提供静态文件。这是我所做的：

*   在 Dreamhost Web 面板中创建子域 demo.domain.com
*   将 .htaccess 文件添加到子域的根目录：

    AuthUserFile /public/demo/.htpasswd AuthGroupFile /dev/null AuthName "Private Demo Area" AuthType Basic 需要有效用户

这成功了，但我的演示域现在`demo.domain.com`是`domain.com/demo/`. 我可以接受这种权衡，这是我在 Dreamhost 共享主机上能找到的唯一解决方案。

# java - 关于java中的委托模式

> ID：10463963
> 
> 赞同：0
> 
> 时间：2012-05-05T16:52:16.430
> 
> 标签：java

我从委托模式中了解到的是那个类 (ClassA) 做了另一个类 (ClassB) 所做的事情。ClassA 还必须比 ClassB 做更多的事情（有更多的方法）。您可能很想简单地让 ClassA 子类 ClassB。抵制这种诱惑，因为这是错误的做法。继承本来就很慢，正确的设计是在ClassA中定义一个ClassB类型的数据成员。通过这种方式，您消除了子类化的需要并降低了耦合强度

```
 //ClassA
 public class ClassA{

      private ClassB classB;

      //methods
      public void doThis(){classB.doThis();}
      public void doThat(){…}
  } 
```

这是B类

```
 ClassB
  public class ClassB{
      public void doThis(){…}
  } 
```

请指教是我的理解是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:06:36.377

[您真的在问继承和组合](http://www.artima.com/designtechniques/compoinh.html)之间有什么区别。这两种模式都有自己的用例。[有效的 Java](http://java.sun.com/docs/books/effective/)建议您应该在两个对象具有真正的“是”关系时使用继承。例如，矩形是一种形状。所以它可能应该扩展形状。然而，在某些情况下，人们误解了这个理论，并且在他们真正应该组成另一个对象时仍然扩展。优点当然是解耦和未来更好的设计。教科书示例`HashMap`在 java 中扩展。而不是扩展，一个人可以实现`Map`并且只拥有一个`HashMap`执行实际逻辑的组合。

我建议您阅读 Effective Java 并了解这两种模式的优势。

# sockets - Python socket.error：[Errno 111] ubuntu 12.04 上的连接被拒绝

> ID：10463965
> 
> 赞同：2
> 
> 时间：2012-05-05T16:52:31.357
> 
> 标签：sockets, python-2.7

我正在尝试将套接字与 python 一起使用，但我不断收到此错误消息：

```
import socket
>>> s = socket.socket( socket.AF_INET, socket.SOCK_STREAM )
>>> s.connect(('localhost', 8000))
Traceback (most recent call last):
  File "stdin", line 1, in module
  File "/usr/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.error: [Errno 111] Connection refused 
```

/etc/hosts 中的配置是：

```
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

系统是 ubuntu 12.04 ，没有配置防火墙。尝试更改端口号，但没有运气；它仅适用于不同于“localhost”的域。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:18:45.157

尝试

```
s = socket.socket( socket.AF_INET6, socket.SOCK_STREAM )
s.connect(('::1', 8000)) 
```

你似乎只启用了 ipv6。

# android - Android long to date 转换出错

> ID：10463967
> 
> 赞同：0
> 
> 时间：2012-05-05T16:52:51.490
> 
> 标签：android

我将日期转换为长。2012 年 5 月 5 日星期六 16:39:00 -> 1336235940000

然后我把它转换回一个日期，我得到 6-4-112 16:39

```
long tmp = 1336235940000l;  
Date d = new Date(tmp);
int aYear = d.getYear();
int aMonth = d.getMonth();
int aDay = d.getDay();
int aHour = d.getHours();
int aMinutes = d.getMinutes();
String str_dateA = aDay + "-" + aMonth + "-" + aYear + " " + aHour + ":" + aMinutes;
Log.i("longtodate", str_dateA + ""); 
```

如果第一个月是 0，aMonth 可能是 4，但是 day 怎么可能是 6 而不是 5？年份是112？怎么了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:20:48.927

`Date.getDay()`给出 DAY_OF_WEEK，而不是一个月中的哪一天。

星期六是一周的第 6 天。

# ios - 如何在表格视图单元格中调整文本标签的大小

> ID：10463970
> 
> 赞同：0
> 
> 时间：2012-05-05T16:53:06.130
> 
> 标签：ios, imageview, tableview, cell, textlabel

我正在编写一个包含 RSS 阅读器的应用程序。RSS 阅读器正在下载标题、描述和图像。我放置在与描述相同的单元格中的附件视图中的图像。描述放置在文本标签中，并根据图像完美调整大小。但我希望图像显示在左侧。但是当我从附件视图中删除图像并将其移动到左侧的图像时，T​​extlabel 不会调整大小。

我如何调整文本标签的大小。

```
CGRect f = cell.textLabel.frame;
[cell.textLabel setFrame: CGRectMake(f.origin.x-20, f.origin.y, f.size.width-50, f.size.height)];

cell.textLabel.font = [UIFont systemFontOfSize:11];
cell.textLabel.numberOfLines =3;
cell.textLabel.textColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.7];
cell.backgroundColor = [UIColor clearColor];
cell.textLabel.backgroundColor = [UIColor clearColor];
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

我试图用 setframe 函数调整它的大小，但这不起作用。

希望你们中的一些人可以将我推向正确的方向。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:50:35.463

您需要继承 UITableViewCell 类。这是一个例子：

.h 文件：

```
#import <UIKit/UIKit.h>

@interface MyCustomerCell : UITableViewCell

@end 
```

.m 文件：

```
#import "MyCustomerCell.h"

@implementation MyCustomerCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void)layoutSubviews {
    [super layoutSubviews];
    self.imageView.frame = CGRectMake(0,0,150,90);
    self.imageView.bounds = CGRectMake(0, 0, 150, 90);
    self.textLabel.frame = CGRectMake(250, 0, 200, 40);   //change this to your needed
    self.detailTextLabel.frame = CGRectMake(250, 40, 200, 40);
} 
```

@结尾

# jquery - 特定类的 jQuery 函数

> ID：10463971
> 
> 赞同：0
> 
> 时间：2012-05-05T16:53:14.710
> 
> 标签：jquery, jquery-selectors, wordpress

我正在一个 wordpress 页面中运行一个自定义循环，该循环应该列出一个类别中的所有鞋子以及颜色选择器。我让循环运行得很好，页面看起来还不错。但是我对更改图像的 jQuery 脚本有一个大问题。

每个帖子都有：不同颜色鞋子的几张图片和颜色选择器 - 不同的鞋子有不同数量的颜色（您可以在以下位置查看演示：[http](http://www.etfovac.com/testbed/shoe/) ://www.etfovac.com/testbed/shoe/ - 最后一页应该看起来像这样[http://www.etfovac.com/testbed/shoe/mockup.jpg](http://www.etfovac.com/testbed/shoe/mockup.jpg)）我的 jQ 函数看起来像这样（对于 testbed 页面）

```
$(document).ready(function() {
    $(".colorwrap a").click(function(){
        var a = $(this).attr("rel");
        $(".cipela-1, .cipela-2, .cipela-3, .cipela-4").slideUp('slow');
        $("."+a).slideDown("slow");
    });
    $(".cipela-1").slideDown("slow");
}); 
```

但它改变了页面上每只鞋的图片。

我可以在函数中对其进行硬编码，因此它选择 cipela 1 到 50

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:59:13.353

尝试只滑动兄弟姐妹：

```
$(this).siblings(".cipela-1, .cipela-2, .cipela-3, .cipela-4").slideUp('slow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T18:07:12.180

不要在该类的所有项目中执行 slideDown。仅将当前元素的子元素作为父元素。使用`closest()`功能

```
$(document).ready(function() {
    $(".colorwrap a").click(function(){
        var item=$(this);           
        var a = item.attr("rel");
       item.closest(".post").find(".cipela-1, .cipela-2, .cipela-3, .cipela-4").slideUp('slow');
        item.closest(".post").find("."+a).slideDown("slow");
        });
        $(".cipela-1").slideDown("slow");
}); 
```

工作示例[http://jsfiddle.net/rXB5G/16/](http://jsfiddle.net/rXB5G/16/)

# ruby - 使用 ruby -mail 阅读电子邮件不会以文本格式返回邮件正文

> ID：10463972
> 
> 赞同：2
> 
> 时间：2012-05-05T16:53:22.723
> 
> 标签：ruby, email, rubygems, mail-gem

我使用 ruby​​-mail 阅读电子邮件。

除了邮件正文，所有内容都以正确的可读格式呈现。

邮件正文显示为其他一些编码格式。

我的代码是：

```
Mail.defaults do
  retriever_method :pop3, :address    => "some.email.com",
              :port       => 995,
              :user_name  => 'domain/username',
              :password   => 'pwd',
              :enable_ssl => true
end

puts "From"
puts mail.from
puts "Sender:"
puts mail.sender
puts "To:"
puts mail.to              
puts "CC:"
puts mail.cc              
puts "Subject:"
puts mail.subject         
puts "Date:"
puts mail.date.to_s       
puts "MessageID:"
puts mail.message_id      
puts "Body:"
#puts mail.body 
```

输出是：

来自 legalholdnotification123@emc.com

发件人：

至：bhavesh.sharma@emc.com

抄送：

主题：case4：合法保留通知

日期：2012-04-24T14:46:25-04:00

消息ID：3298720.1335293185423.JavaMail.root@vm-bhaveshok7

身体：

日期：2012 年 5 月 5 日星期六 09:45:08 -0700 Mime 版本：1.0 内容类型：文本/纯文本；charset=utf-8 内容传输编码：base64 内容 ID：<4fa559147a120_138455aab4289ac@USITHEBBASL2C.mail>

SGVsbG8gU2lyL01hZGFtLA0KDQpCcmllZiBpbnRyb2R1Y3Rpb24gdG8gdGhl IGNhc2UgY2FzZTQNCg0KV2UgaGF2ZSBpZGVudGlmaWVkIHlvdSBhcyBhIHBl cnNvbiB3aG8gbWF5IGhhdmUgImRvY3VtZW50cyIgLS0gd2hpY2ggaW5jbHVk ZXMgYm90aCBwaHlzaWNhbCBhbmQgZWxlY3Ryb25pYyBkb2N1bWVudHMgLS0g dGhhdCBhcmUgcmVsYXRlZCB0byB0aGlzIG1hdHRlci4gV2UgYXJlIGltcGxl bWVudGluZyBhIG1hbmRhdG9yeSBkb2N1bWVudCByZXRlbnRpb24gcG9saWN5 IHRvIHByZXNlcnZlIHRoZXNlIGRvY3VtZW50cy4gUGxlYXNlIGNhcmVmdWxs eSByZXZpZXcgdGhpcyBtZW1vcmFuZHVtIGFuZCBzdHJpY3RseSBhZGhlcmUg dG8gdGhlIG1hbmRhdG9yeSBkb2N1bWVudCByZXRlbnRpb24gcG9saWN5IG91 dGxpbmVkIGhlcmVpbi4gW0NvbXBhbnldIGNvdWxkIGJlIHN1YmplY3QgdG8g

所以我无法阅读邮件正文。

需要做什么才能阅读邮件，我需要从正文中提取文本，并且必须使用邮件正文中存在的链接。

巴韦什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:50:24.510

邮件 gem 不会自动解码正文。您可以使用：

```
mail.message.body.decoded 
```

获取解码的消息正文。此外，您可能会发现您想要访问消息的 HTML 部分的纯文本。为此，您可以使用以下内容：

```
plain_part = message.text_part ? message.text_part.body.decoded : nil
html_part = message.html_part ? message.html_part.body.decoded : nil 
```

然后，您可以将`message.body.decoded`用作备用，以防这些部分不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T18:58:44.387

添加[邮件](https://github.com/mikel/mail)gem，只需使用带有 mail.parts[1].body.decoded 的电子邮件正文格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-04T15:52:26.830

我用了：

```
[...]

ids = imap.search(['UNSEEN'])

ids.each do |msg_id|
  raw_msg = imap.fetch(msg_id,'RFC822').first.attr['RFC822']
  msg = Mail.read_from_string raw_msg
  msg_body_content = msg.multipart?? msg.text_part.body.decoded : message.html_part.body.decoded
end 
```

# c++ - Eclipse CDT+Cygwin如何处理？

> ID：10463975
> 
> 赞同：8
> 
> 时间：2012-05-05T16:53:40.050
> 
> 标签：c++, eclipse, cygwin, eclipse-cdt

最近我安装了 Eclipse Indigo Service Release 2（用于 JAVA EE）并在线安装了 CDT 8。然后我安装了最新版本的带有 gcc、g++、gdb、make、binutils、automake 等的 Cygwin。我还制作了环境变量 PATH正确的。

制作一个新的 C++ 项目（使用 Cygwin GCC 工具链）很好，但是在输入 HelloWorld 程序后，它会显示很多错误和警告。

使用外部构建器时，错误显示

> “无法运行程序“make”：?????????¨?”。

使用内部构建器时，附上它显示

> "g++ -IC:\cygwin\lib\gcc\i686-pc-cygwin\4.5.3\include\c++ -O0 -g3 -Wall -c -fmessage-length=0 -o src\test_cpp.o ..\src \test_cpp.cpp
> 
> 错误：无法运行程序“g++”：?????????¨?
> 
> 发生构建错误，构建已停止

在 Windows CMD 和 Cygwin 终端中，g++ 并使两者都能正常工作。

更何况Eclipse找不到包含库，只好在项目属性->C/C++中添加路径C:\cygwin\lib\gcc\i686-pc-cygwin\4.5.3\include\c++建筑->设置。但在那之后，它仍然显示错误，

> 'std' 不明确'
> 
> 'endl' 的无效重载
> 
> 符号“cout”无法解析

在项目属性-> C/C++ 构建-> 发现选项中，我将发现配置文件范围设置为配置范围，将发现配置文件设置为每个文件扫描仪信息配置文件的 GCC。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T09:33:39.223

您必须设置 Cygwin 工具链，首先使用以下软件包安装 Cygwin：

```
binutils
gcc
gcc-core
gcc-g++
gcc-mingw-core
gcc-mingw-g++
make 
```

添加`%cygwin%\bin`到您的 PATH 环境变量，然后打开 Eclipse，当您打开一个新的 c/cpp 项目向导时，将显示 Cygwin 工具链。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T08:43:53.327

你试过这个[C++ 的 Eclipse CDT 和 Cygwin 教程](http://www.badprog.com/c-eclipse-installation-of-c-c-development-tools-cdt-and-cygwin-for-windows)吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T03:56:02.930

我有类似的错误，对我有用的如下：在设置中：`'Project|Properties|C/C++ General|Indexer'`，我取消选中`'Allow heuristic resolutions of includes'`并保存了设置。重建后，我所有的错误，如 ''std' is ambiguous ...' 都消失了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-19T09:10:14.003

您是否检查过您使用的是哪个二进制解析器？

右键单击您的项目，属性，C/C++ 构建，设置，二进制解析器选项卡，如果您使用的是 Windows 操作系统，请选择 PE Windows Parser 或 Linux 操作系统的 Elf Parser。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-17T10:20:20.580

给出使用 eclipse + CDT + cygwin-gcc 编写 hello world 程序的所有基本步骤。

您一定错过了从 3 到 7 的一些步骤。

1.  使用包安装cygwin `binutils`、`gcc-core`、`gcc-g++`和. 我之前没有安装任何包裹。所以我在安装 cygwin 后安装了这些软件包。您可以通过重新运行 cygwin 的 setup exe（此答案中的第 3 点）或按照[此答案](https://stackoverflow.com/a/50950390/1317018)中的说明使用来[安装](https://stackoverflow.com/a/50946609/1317018)它们： `gdb``make``apt-cyg`
2.  在 eclipse 中安装[CDT 插件](https://marketplace.eclipse.org/content/eclipse-cc-ide)或安装[CDT eclipse](http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/photonr)。
3.  设置 windows`path`环境变量以包含 cygwin bin ( `C:\Program Files\cygwin\setup\bin`) 和 lib ( `C:\Program Files\cygwin\setup\lib`) 目录路径。设置 windows`classpath` 环境变量以包含 cygwin lib 目录路径。
4.  在 windows 命令提示符下运行 commands `gcc`、`g++`和以检查已安装的 cygwin 软件包是否可访问且未给出 command not found 错误。对于,和, 它应该给出输入或目标文件未找到错误。对于，它应该开始提示，您可以通过输入提示来转义。`gdb``make``gcc``g++``make``gdb``gdb``Quit``gdb`
5.  开始eclipse并做`File > New > C/C++ Project`
6.  选择 C/C++ 托管构建： 单击。[![在此处输入图像描述](../Images/b62f0e7c4bf545a622e39d98e035930e.png)](https://i.stack.imgur.com/Qq3qR.png)
    `Next>`
7.  给出合适的项目名称。在工具链中选择`Cygwin GCC`： 它应该创建新项目并从环境变量中指定的 cygwin lib 目录中包含所需的头文件：
    [![在此处输入图像描述](../Images/8ae3f31ad6916d7ca87d04135dd4b671.png)](https://i.stack.imgur.com/JQJix.png)

    [![在此处输入图像描述](../Images/49ce2fc0ed2d4c0be524b550f463814f.png)](https://i.stack.imgur.com/z9ckv.png)
8.  右键单击在项目资源管理器中创建的项目 > 将鼠标悬停在上下文菜单中的新建上 > 单击源文件夹。`src`为新的源文件夹命名。
    [![在此处输入图像描述](../Images/ec3302ddb31da69cf3748c09b9979d64.png)](https://i.stack.imgur.com/3qAhM.png)
9.  右键单击源文件夹并添加新的 C 源文件`HelloWorld.c`： [![在此处输入图像描述](../Images/5b497ce644e4d30250a92c2cbe0614bc.png)](https://i.stack.imgur.com/bp300.png)
10.  右键单击项目并选择构建项目。它应该创建调试文件和可执行二进制文件：
    [![在此处输入图像描述](../Images/ba118c46eeb2656e4c12b6955254c2b3.png)](https://i.stack.imgur.com/7CMTL.png)
11.  右击打开的c文件，`Run as > Local C/C++ Application`. 它应该运行在前面步骤中生成的可执行文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-14T12:06:59.777

我运行的 Eclipse 版本是 Photon(4.8)。我正在运行 cygwin64 版本 2.10.0(0.325/5/3)。

我创建了一个新目录 - foo - 并在其中添加了以下文件：

## CMakeLists.txt：

```
set(CMAKE_C_FLAGS "-g -O0")
set(CMAKE_CXX_FLAGS "-g -O0 --std=c++17")
add_executable (foo main.cpp) 
```

请注意，源代码级调试需要“-g -O0”。

## 主.cpp：

```
#include <iostream>

using namespace std;

int
main()
{
    cout << "Hello World" << endl;
    auto i = 5;
    cout << i << endl;
} 
```

然后在 foo 目录中运行：

制作。

然后我打开了eclipse。

File->Import C/C++->Existing Code as Makefile Project

点击下一步

我将现有代码位置设置为我的 foo 目录（通过浏览它）

这会自动将我的项目名称设置为 foo（如果您愿意，可以更改它）

在“索引器设置的工具链”中，暂时设置“无”并完成。我们稍后会解决这个问题。

现在在“项目资源管理器”窗格中，右键单击“foo”并转到“属性”

转到“C/C++ 构建”

转到“工具链编辑器”

取消选中“仅显示兼容的工具链”

在“当前工具链”下拉菜单中，选择“Cygwin GCC”

点击“应用并关闭”

再次，在“项目资源管理器”窗格中，右键单击“foo”并转到“属性”

转到“C/C++ 构建”

转到“环境”

确保“CYGWIN_HOME”环境变量设置正确。默认设置是“C:\cygwin”，但这对我不利，并引起了很多问题。就我而言，它是 C:\cygwin64

点击“应用并关闭”

现在再次右键单击 foo 项目，然后单击“构建项目”

在项目窗格中的 foo 下，单击 main.cpp 以显示它。在某处设置断点。

按 F11

您应该使用之前设置的断点。

希望这可以帮助。

# php - 在 Codeigniter 中从 DB 重命名 url

> ID：10463979
> 
> 赞同：0
> 
> 时间：2012-05-05T16:53:47.753
> 
> 标签：php, codeigniter, url-rewriting

我创建了一个网站，其中包含带有 url 的产品：[http://somesite.com/controller/function/brand_id/product_id](http://somesite.com/controller/function/brand_id/product_id)。我想将这些 ID 更改为更易于搜索的名称。所有这些 ID 都在带有名称的数据库中。是否可以从数据库中获取这些名称并将它们放入 URL 中？这是因为我无法使用路由工具。产品和品牌是动态的，可以随时删除或（名称）更改。所以不能把它硬编码到路线中。

谢谢你的努力

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:57:06.170

您可以使用`_remap`Codeigniter 内置函数在 url 中使用多个函数：在控制器中使用以下函数：

```
public function _remap($method){
if ($method == 'project-name')
{
   //display project1
}
elseif($method == 'project-name2')
{
   //display project2
} 
```

另一个使用参数的例子：

```
public function _remap($method, $params = array())
{
    $method = 'process_'.$method;
    if (method_exists($this, $method))
    {
        return call_user_func_array(array($this, $method), $params);
    }
    show_404();
} 
```

`$method`在`function`您的网址中： [http ://somesite.com/controller/function/brand_id/product_id](http://somesite.com/controller/function/brand_id/product_id)

您可以通过从数据库中提取它们来对不同的方法执行相同的操作

看看这里：[http ://codeigniter.com/user_guide/general/controllers.html#remapping](http://codeigniter.com/user_guide/general/controllers.html#remapping)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:21:02.923

`brand_id`您应该能够通过为和设置一些通配符路由来完成此操作`product_id`。当您对产品执行查询时，您只需检查 URI 段是整数（ID）还是字符串（名称）并相应地查询数据库。我将存储产品名称的 URL 友好版本（替换空格和特殊字符），然后对其进行查询，并将其用于在整个应用程序中生成链接。

**更新：**这是您在路由所有内容的方法中所需的逻辑的代码示例：

```
public function search($brand, $product)
{
    if (is_int($brand))
    {
        // Look up the brand using an ID
        $this->db->where('id', $brand);
    }
    else
    {
        // Look up the brand based on the URI segment
        $this->db->where('uri_friendly_name', $brand);
    }

    // Do the same with adding conditionals for $product and then run the query
} 
```

这是您需要的路线示例：

```
$route['controller/function/(:any)/(:any)'] = "controller/search"; 
```

# javascript - 使用 javascript 获取所有表行

> ID：10463985
> 
> 赞同：1
> 
> 时间：2012-05-05T16:54:53.173
> 
> 标签：javascript, html, regex, parsing

我有一个 HTML 字符串，想获取所有 tr 的内部 html。过去我在 JavaScript 中使用过 jQuery，但我现在使用的是 Appcelerator，并且无法在其中使用 DOM。我有一个适用于 php 的正则表达式，但我不知道如何在 JS 中使用它。有谁知道如何在 JS 中使用这个正则表达式或有其他解决方案。

正则表达式：

```
preg_match_all("#\<tr\>(.+?)\<\/tr\>#s", $html, $match); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:22:55.687

我得到了这个页面上几乎所有 div 的内容，如下所示：

```
var html = document.body.innerHTML;
var matches = html.match( /<div>(.+?)<\/div>/ig );
console.log( matches ); 
```

您可以在控制台中尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:12:10.033

我会做这样的事情（未经测试）：

```
var rowColArray = [], //2D format - first key will be row, second will be column
rowStrings.match(/<tr[^>]*>([^<]*)<\/tr>/ig),
i = rowStrings.length;

while(i--){
    rowColArray[i] = rowStrings.match(/<td[^>]*>([^<]*)<\/td>/ig)
} 
```

注意`[^>]*`和类似的用法：

这就像说“匹配 0 个或更多不是 '>' 的任何内容”，并且比与每个单个字符 '.' 进行比较要快得多。可以表示直到建立匹配。使用 '.' 的唯一原因 正则表达式中的通配符是为了找到它不代表的真正古老的晦涩空白字符。对于处理大型表的愚蠢浏览器正则表达式引擎来说，这实际上可能会产生巨大的差异。

# javascript - 触发功能中的jQuery延迟

> ID：10463989
> 
> 赞同：1
> 
> 时间：2012-05-05T16:55:11.373
> 
> 标签：javascript, jquery

我的页面中有以下脚本，它是“DynamicPage”脚本的一部分，并且我添加了一个部分来调用函数以使我的图像滑块脚本运行。它在这里解决了我以前遇到的问题。它可以工作，除了页面加载后会有一瞬间的延迟。下面的图片让您了解我的意思。

[随着页面加载](http://i.imgur.com/uhxVu.png "随着页面加载")

[它应该是什么样子/大约半秒后是什么样子](http://i.imgur.com/cB6c5.png "它应该是什么样子/大约半秒后是什么样子")

这是脚本

```
$(function() {

    var newHash      = "",
        $mainContent = $("#main-content"),
        $pageWrap    = $("#page-wrap"),
        baseHeight   = 0,
        sliderInit = true,
        $el;

    $pageWrap.height($pageWrap.height());
    baseHeight = $pageWrap.height() - $mainContent.height();

    $("navbar").delegate("a", "click", function() { window.location.hash = $(this).attr("href"); return false; });

    $(window).bind('hashchange', function(){
        newHash = window.location.hash.substring(1);
        if (newHash) {
            $mainContent.find("#guts").slideUp(5, function() {
                $mainContent.hide().load(newHash + " #guts", function() {
                    $mainContent.slideDown(5, function() {
                        $pageWrap.animate({height: baseHeight + $mainContent.height() + "px" }, function() {
                            $('#games').coinslider({ navigation: true, height:325, width: 595, hoverPause: true, delay: 5000});
                        });
                    });
                    $("navbar a").removeClass("current");
                    $("navbar a[href='"+newHash+"']").addClass("current");
                });
            });
        };
    });
    $(window).trigger('hashchange');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:27:37.647

您的问题不是 javaScript 问题，而是 Html/CSS 问题。

实际上，如果您要在没有 javaScript 的情况下加载您的网页（我知道，但人们仍在使用 XP 和古老的浏览器），它会卡在您的“页面加载示例”中。

我的建议是有一个隐藏的 css 类，您可以将其应用于所有多余的附加动态元素。你想隐藏的东西没有javascript，或者在你的情况下，额外的图像帧。这样，您不仅可以防止您看到的不合适的效果，还可以使网站向后兼容。如果您的客户目标受众可能不精通 IT，则尤其重要。

```
.preLoadHide {
    visibility:hidden;
} 
```

之后（如果）加载 javaScript，请执行以下操作，因为您使用的是 jQuery [在应用图像幻灯片效果之前或之后需要实验]

```
jQuery(".preLoadHide").removeClass(".preLoadHide"); 
```

* * *

请注意，我们通过以下方式引起延迟还有一个非常充分的理由

> $(function() { ...您的代码在这里... });

在您的代码上下文中：这确保在加载图像后执行 JavaScript，因为当没有加载任何内容时，脚本将崩溃/失败/什么都不做，什么都不做。因此你的 0.5 秒延迟。

[由于您的页面仍在加载，实际上大多数图像是在浏览器中逐步加载的，当它们第一次出现时，它们实际上是不完整的高分辨率细节，我们有时只是没有意识到这一点，减少高分辨率图片是一部分优化]

因此，由于服务器加载时间不是您始终可以控制的，最好假设延迟始终存在。因此使用它=P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:02:19.103

我建议您在页面上添加一个叠加层。比如说，位于页面顶部的黑色/白色背景隐藏了其他所有内容。现在，当您的函数触发时，将这个覆盖层淡出，然后将其移除。

```
$(function() {

var newHash      = "",
    $mainContent = $("#main-content"),
    $pageWrap    = $("#page-wrap"),
    baseHeight   = 0,
    sliderInit = true,
    $el;
                .
                .
                .

$("#MY_OVERLAY").hide('slow');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T19:38:57.540

您是否尝试过在页面加载完成后触发滑块？

```
$(document).ready(function() {
   $(window).trigger('hashchange');
}); 
```

# css - 3个div，如何仅自动调整2个，用于模板

> ID：10463991
> 
> 赞同：0
> 
> 时间：2012-05-05T16:55:26.033
> 
> 标签：css

我有一个用于每个页面的网站模板。我想让 2 个 div 自动调整内容的大小。

[http://jsfiddle.net/agroe070/9QGjH/2/](http://jsfiddle.net/agroe070/9QGjH/2/)

如果蓝色 div 的内容大于 div，我希望 div 自动调整大小以适应内容，并且我希望绿色 div 也自动调整大小，因此绿色 div 的底部仍然与橙色 div 的底部。反之亦然。橙色 div 永远不会重新调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:07:04.097

使用 min-height 而不是 height 我认为它会解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:11:25.833

这些是我更改的 CSS 声明，它似乎可以按要求工作：

```
#wrapper{
    /* your other stuff */
    position: relative; /* to position the sidebar relative to this element */
}
#sidebar{
    position: absolute;
    top: 0;
    bottom: 50px;
    left: 10px;
    width: 190px;
    /* other stuff */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9QGjH/3/)。

# php - 如何检查php脚本是否已经运行

> ID：10463992
> 
> 赞同：3
> 
> 时间：2012-05-05T16:55:32.847
> 
> 标签：php, cron, while-loop

如何创建不可停止的while循环，如果它已经在运行不要再次运行它，我假设如果脚本运行它将更新数据库中的最后一个cron时间，并且脚本将检查当前时间 - 40秒是否小于最后一个cron时间。我所拥有的样本，但那是过度循环（一次又一次地运行做过程）谢谢！

```
<?php
ignore_user_abort(1); // run script in background 
set_time_limit(0);    // set limit to 0

function processing()
{
//some function here
setting::write('cron_last_time', $time); // write cron last time to database
}

$time = current_timestamp();  // current time
$time_before = $time - 20;   //

$settings = setting::read('module_cron_email'); // Get last cron time from database ( in array )
$time_last = $settings['setting_value'];     // Last cron time get value from array

if ($time_before < $time_last) // check if time before is less than last cron time
{ 
   do{
   processing(); //run our function
   sleep(7);    // pause for 7 seconds
   continue;   // continue
   }
   while(true); // loop
}else{

echo "already running";
die();
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T16:57:44.230

启动脚本时，检查锁定文件。如果确实存在，则退出或跳过循环。如果它不存在，请创建文件并让它运行。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-05T16:58:10.357

[PHP PCNTL](http://www.php.net/manual/en/book.pcntl.php)是您所需要的！您可以使用它来分叉 PHP 进程。

```
 while(true) { // Infinite

                     $pid = pcntl_fork();

                        switch (pcntl_fork($pid)) {

                                case -1:

                                        die('Fork failed');

                                        break;

                                case 0: // Child

                                        processing();

                                        exit(0);

                                        break;

                                default: // Parent

                                        pcntl_waitpid($pid, $status);

                                        break;

                        }

        } 
```

# php - 使用与 PHP 下拉列表中所选值相对应的值填充文本字段

> ID：10463993
> 
> 赞同：-2
> 
> 时间：2012-05-05T16:55:50.350
> 
> 标签：php, dreamweaver

我的 mysql 数据库中有两个字段，即 ItemDescription 和 StockNo。ItemDescription 填充下拉列表。从下拉列表中选择一个值后，我想用与所选 ItemDescription 对应的 StockNo 填充一个文本字段。我没有要显示的代码（除了我插入的表单控件）。我听说这可以通过 AJAX 实现，但我没有找到教程。先感谢您！

另外，如果这很重要，我正在使用 Adob​​e Dreamweaver CS5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:11:40.083

将数字放在`value`您选择的**选项**的属性中：

```
<select id="dropdown">
    <option value="">Select an option …&lt;/option>
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
</select> 
```

添加**输入**以显示值：

```
<input type="text" id="value" />​ 
```

**并使用JavaScript**使其工作：

```
window.onload = function() {
    document.getElementById("dropdown").onchange = function() {
        document.getElementById("value").value = this.options[this.selectedIndex].value;
    }
} 
```

**示例（小提琴）：http:** [//jsfiddle.net/jhogervorst/nYADy/](http://jsfiddle.net/jhogervorst/nYADy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:23:37.453

一个简单的基本解决方案可能如下所示......

```
<html>
<body>
Item Description <select id="ItemDescription" onchange="populate()">
<option value="Item1">Item1</option>`</select>
<br/>
Stock No <input type="text" id="StockNo" value=""/>
</body>
</html> 
```

JS部分......

```
var xmlHttp;

function createXmlHttpRequest() {

     if(window.ActiveXObject)   {
         xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
     }
     else if(window.XMLHttpRequest){
         xmlHttp = new XMLHttpRequest();      
     }
}

function populate() {

    createXmlHttpRequest(); 
var param = document.getElementById('ItemDescription').value;
    xmlHttp.open("GET", "http://localhost:9444/populate?itemdesc="+param, true);
    xmlHttp.onreadystatechange=handleStateChange;
    xmlHttp.send(null);    
 }

 function handleStateChange() {  

   if(xmlHttp.readyState==4) {   
       if(xmlHttp.status==200){         
         var stockNo = xmlHttp.responseText                       
         document.getElementById('StockNo').value = stockNo;                                              
    }
    else
        alert("Error Loading Page" + xmlHttp.status + xmlHttp.statusText);  
    }
 } 
```

}

# c# - 读取发布文件的内容并传递给线程

> ID：10463997
> 
> 赞同：1
> 
> 时间：2012-05-05T16:55:52.267
> 
> 标签：c#, amazon-s3

这是我的方法头：

```
private Hashtable uploadItemResource(Hashtable htRequest, 
        int userId, HttpPostedFile file, SessionData sessionData) { 
```

文件对象是从我的网站发布的文件。我正在尝试在另一个线程中将此文件发送到 AWS

```
PutObjectRequest titledRequest = new PutObjectRequest();
titledRequest
    //other options left out
    .WithInputStream(file.InputStream); 
```

然后我`s3Client.PutObject(titledRequest);`在一个线程中运行。

问题是我遇到了这个异常：

> System.Net.WebException：请求被中止：请求被取消。---> System.IO.IOException：在写入所有字节之前无法关闭流。在 System.Net.ConnectStream.CloseInternal(Boolean internalCall, Boolean aborting) --- 内部异常堆栈跟踪结束 ---

我认为这是因为文件对象超出范围，并且在 AWS 调用仍在尝试读取它时尝试处理。

解决此问题的最佳方法是什么？提前转储文件内容并将其传递给 AWS 的最佳方法是*什么*？

# vb.net - 数据集声明 - 性能测试

> ID：10463998
> 
> 赞同：0
> 
> 时间：2012-05-05T16:55:52.917
> 
> 标签：vb.net, dataset

首先让我从一个例子开始，

```
Public Class EmpDemo

    Public Function getEmpData() as DataSet
    End Function 

End Class 
```

情况1：

```
Dim ds as New DataSet   'A DataSet instance gets created here
ds = EmpDemo.getEmpData()    'Another DataSet instance gets created here 
```

案例二：

```
Dim ds as DataSet
ds = EmpDemo.getEmpData()  'A single instance gets created here 
```

问题：

*如果我选择案例 1*，它将如何影响页面性能？我如何证明*案例 2*是最佳选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:58:28.113

性能差异可以忽略不计，但案例 2 显然是更好的选择。添加无用的代码，在这种情况下创建一个您从不使用的对象实例，只会污染您的代码库。