# StackOverflow 问答 10552000-10552999

# java - 我想知道Maven是什么

> ID：10552000
> 
> 赞同：-7
> 
> 时间：2012-05-11T13:08:31.893
> 
> 标签：java, gwt, maven

我正在使用 gwt 构建系统，我们正在使用 Maven。任何人都可以简单地解释什么是maven。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:11:21.497

Maven 是一个管理和构建工具，可帮助您解决依赖关系（库/jar）并为您自动管理它。自己尝试一下，给它一个机会，你不会后悔的；）

-> [http://en.wikipedia.org/wiki/Apache_Maven#Concepts](http://en.wikipedia.org/wiki/Apache_Maven#Concepts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:10:03.750

Maven 是一个具有构建能力的项目管理工具 :) 它旨在标准化项目的结构并解决 java 项目中的其他常见问题 :)

您可以查看 wikipedia（或者更好的是 maven 项目站点）以获得更好的解释！

# java - java中的正则表达式：匹配BOL和EOL

> ID：10552001
> 
> 赞同：4
> 
> 时间：2012-05-11T13:08:35.077
> 
> 标签：java, regex

我尝试在Windows下用java解析windows ini文件。假设内容是：

```
[section1]
key1=value1
key2=value2
[section2]
key1=value1
key2=value2
[section3]
key1=value1
key2=value2 
```

我使用以下代码：

```
Pattern pattSections = Pattern.compile("^\\[([a-zA-Z_0-9\\s]+)\\]$([^\\[]*)", Pattern.DOTALL + Pattern.MULTILINE);
Pattern pattPairs = Pattern.compile("^([a-zA-Z_0-9]+)\\s*=\\s*([^$]*)$", Pattern.DOTALL + Pattern.MULTILINE);
// parse sections
Matcher matchSections = pattSections.matcher(content);
while (matchSections.find()) {
    String keySection = matchSections.group(1);
    String valSection = matchSections.group(2);
    // parse section content
    Matcher matchPairs = pattPairs.matcher(valSection);
    while (matchPairs.find()) {
        String keyPair = matchPairs.group(1);
        String valPair = matchPairs.group(2);
    }
} 
```

但它不能正常工作：

1.  第 1 节不匹配。这可能是因为这不是从“EOL 之后”开始的。当我在 then 之前放置空字符串时，`[section1]`它匹配。

2.  `valSection`返回 '​​\r\nke1=value1\r\nkey2=value2\r\n' 。`keyPair`返回'key1' 。看起来还可以。但`valPair`返回 'value1\r\nkey2=value2\r\n' 但不是根据需要返回 'value1'。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:50:23.597

您不需要`DOTALL`标志，因为您的模式中根本不使用点。

我认为 Java 将`\n`自己视为换行符，因此`\r`不会被处理。你的模式：

```
^\\[([a-zA-Z_0-9\\s]+)\\]$ 
```

不会是真的，但确实存在

```
^\\[([a-zA-Z_0-9\\s]+)\\]\r$ 
```

将要。

我建议您也忽略 MULTILINE 并使用以下模式作为行分隔符：

```
(^|\r\n)
($|\r\n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:51:04.350

第一个正则表达式刚刚起作用（这不是您如何读取文件的问题吗？），第二个正则表达式添加了“？” 签名以不情愿的方式使用它。

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Test {

    public static void main(String[] args) {
        String content = "[section1]\r\n" +
        "key1=value1\r\n" +
        "key2=value2\r\n" +
        "[section2]\r\n" +
        "key1=value1\r\n" +
        "key2=value2\r\n" +
        "[section3]\r\n" +
        "key1=value1\r\n" +
        "key2=value2\r\n";

        Pattern pattSections = Pattern.compile(
                "^\\[([a-zA-Z_0-9\\s]+)\\]$([^\\[]*)", Pattern.DOTALL
                        + Pattern.MULTILINE);
        Pattern pattPairs = Pattern.compile(
                "^([a-zA-Z_0-9]+)\\s*=\\s*([^$]*?)$", Pattern.DOTALL
                        + Pattern.MULTILINE);
        // parse sections
        Matcher matchSections = pattSections.matcher(content);
        while (matchSections.find()) {
            String keySection = matchSections.group(1);
            String valSection = matchSections.group(2);
            // parse section content
            Matcher matchPairs = pattPairs.matcher(valSection);
            while (matchPairs.find()) {
                String keyPair = matchPairs.group(1);
                String valPair = matchPairs.group(2);
            }
        }

    }

} 
```

# perl - Perl - 一个内衬文件编辑："perl -n -i.bak -e "print unless /^$id$,/" $filetoopena;" 不工作

> ID：10552006
> 
> 赞同：1
> 
> 时间：2012-05-11T13:08:52.060
> 
> 标签：perl, file, edit

我不能让它工作。

```
#!/usr/bin/perl -w
use strict;
use CGI::Carp qw(fatalsToBrowser warningsToBrowser);
my $id='123456'; 
my $filetoopen = '/home/user/public/somefile.txt'; 
```

文件包含：

```
123456
234564
364899
437373 
```

所以......一堆其他的潜艇和代码

```
if(-s $filetoopen){
     perl -n -i.bak -e "print unless /^$id$,/" $filetoopen;
} 
```

我需要从文件 $filetoopen 中删除与 $id 匹配的行

但是，如果 $id 也不在 $filetoopen 中，我也不希望脚本“崩溃”。

这是在 .pl 脚本子中，不是从命令行运行的。

我想我已经很接近了，但是在这里阅读了几个小时之后，我不得不求助于发布这个问题。

这甚至可以在脚本中使用吗？

我成功地尝试了 TIE，但是，我需要知道如何在没有 TIE::FILE 的情况下执行此操作。

当我尝试时，我得到了错误：

mylearningcurve.pl 第 456 行的语法错误，“bak -e”附近

谢谢你教这只老狗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:20:52.437

首先（这**不是**你的问题的原因）`$,`（又名`$OUTPUT_FIELD_SEPARATOR`）默认为 undef，我不确定你为什么在正则表达式中使用它。我觉得逗号是一个错字。

不清楚您是从 shell 脚本还是从 Perl 调用它？

* * *

如果来自 Perl，则根本不应该调用嵌套的 Perl 解释器。

如果文件很小，将其插入并打印：

```
use File::Slurp;
my @lines = read_file($filename);
write_file($filename, grep { ! /^$id$/ } @lines); 
```

如果文件很大，则逐行读取作为过滤器。

```
use File::Copy;
move($filename, "$filename.old") or die "Can not rename: $!\n";
open(my $fh_old, "<", "$filename.old") or die "Can not open $filename.old: $!\n";
open(my $fh, ">", $filename) or die "Can not open $filename: $!\n";
while my $line (<$fh_old>) {
    next if $line =~ /^id$/;
    print $fh $_;
}
close($fh_old);
close($fh); 
```

* * *

如果来自 shell 脚本，这对我有用：

```
$ cat x1
123456
234564
364899
437373

$ perl -n -i.bak -e "print unless /^$id$/" x1

$ cat x1
234564
364899
437373 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:41:20.643

```
if(-s $filetoopen){
     perl -n -i.bak -e "print unless /^$id$,/" $filetoopen;
} 
```

我完全不确定您希望这样做。您不能只将命令行程序放在 Perl 代码的中间。您需要使用`system`来调用外部程序。Perl 和其他程序一样只是一个外部程序。

```
if(-s $filetoopen){
     system('perl', '-n -i.bak -e "print unless /^$id$,/"', $filetoopen);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:41:51.860

命令行参数的功能`-i`可以通过[`$^I`](http://perldoc.perl.org/perlvar.html).

```
local @ARGV = $filetoopen;
local $^I = '.bak';
local $_;
while (<>) {
   print if !/^$id$/;
} 
```

# php - 在 PHP 中搜索多维数组

> ID：10552011
> 
> 赞同：1
> 
> 时间：2012-05-11T13:09:00.423
> 
> 标签：php, arrays, search, multidimensional-array

如何在以下多维数组中搜索字符串“uk”？

```
array(43)
{
  [0]=> array(1) { ["country"]=> string(9) "Australia" }
  [1]=> array(1) { ["country"]=> string(7) "Bahrain" }
  [2]=> array(1) { ["country"]=> string(7) "Belgium" }
  [3]=> array(1) { ["country"]=> string(8) "Bulgaria" }
  [4]=> array(1) { ["country"]=> string(6) "Canada" }
  [5]=> array(1) { ["country"]=> string(7) "Croatia" }
  [6]=> array(1) { ["country"]=> string(6) "Cyprus" }
  [7]=> array(1) { ["country"]=> string(14) "Czech Republic" }
  [8]=> array(1) { ["country"]=> string(7) "Denmark" }
  [9]=> array(1) { ["country"]=> string(7) "Finland" }
  [10]=> array(1) { ["country"]=> string(7) "Germany" }
  [11]=> array(1) { ["country"]=> string(6) "Greece" }
  [12]=> array(1) { ["country"]=> string(9) "Hong Kong" }
  [13]=> array(1) { ["country"]=> string(7) "Hungary" }
  [14]=> array(1) { ["country"]=> string(7) "Iceland" }
  [15]=> array(1) { ["country"]=> string(5) "India" }
  [16]=> array(1) { ["country"]=> string(4) "Iran" }
  [17]=> array(1) { ["country"]=> string(6) "Israel" }
  [18]=> array(1) { ["country"]=> string(5) "Italy" }
  [19]=> array(1) { ["country"]=> string(5) "Japan" }
  [20]=> array(1) { ["country"]=> string(5) "Korea" }
  [21]=> array(1) { ["country"]=> string(6) "Kuwait" }
  [22]=> array(1) { ["country"]=> string(5) "Malta" }
  [23]=> array(1) { ["country"]=> string(8) "Mongolia" }
  [24]=> array(1) { ["country"]=> string(11) "Netherlands" }
  [25]=> array(1) { ["country"]=> string(6) "Norway" }
  [26]=> array(1) { ["country"]=> string(8) "Pakistan" }
  [27]=> array(1) { ["country"]=> string(6) "Poland" }
  [28]=> array(1) { ["country"]=> string(7) "Romania" }
  [29]=> array(1) { ["country"]=> string(6) "Russia" }
  [30]=> array(1) { ["country"]=> string(9) "Singapore" }
  [31]=> array(1) { ["country"]=> string(8) "Slovakia" }
  [32]=> array(1) { ["country"]=> string(12) "South Africa" }
  [33]=> array(1) { ["country"]=> string(13) "South America" }
  [34]=> array(1) { ["country"]=> string(5) "Spain" }
  [35]=> array(1) { ["country"]=> string(6) "Sweden" }
  [36]=> array(1) { ["country"]=> string(11) "Switzerland" }
  [37]=> array(1) { ["country"]=> string(6) "Taiwan" }
  [38]=> array(1) { ["country"]=> string(10) "Tajikistan" }
  [39]=> array(1) { ["country"]=> string(2) "UK" }
  [40]=> array(1) { ["country"]=> string(20) "United Arab Emirates" }
  [41]=> array(1) { ["country"]=> string(24) "United States of America" }
  [42]=> array(1) { ["country"]=> string(7) "Vietnam" }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T13:23:15.033

1）为什么要将所有简单字符串封装在一个新数组中？

1a) 如果确实有原因：

```
function my_search($needle, $haystack)
{
    foreach($haystack as $k => $v)
    {
        if ($v["country"] == $needle)
            return $k;
    }
    return FALSE;
}

$key = my_search("uk", $yourArray);
if($key !== FALSE)
{
    ...
} else {
    echo "Not Found.";
} 
```

> 此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。用于[`=== operator`](http://de3.php.net/manual/en/language.operators.comparison.php)测试此函数的返回值。

1b) 如果没有：

2）使用简单的字符串作为值来修复你的数组，而不是数组（1）的字符串

3）如果它是固定的，你可以简单地使用[`array_search()`](http://www.php.net/array_search)

编辑：将参数更改为更类似于 array_search。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T20:57:05.313

如果您使用的是（PHP 5 >= 5.5.0），有一种更好更简单的方法：

```
if(array_search('UK', array_column($array, 'country')) !== false ){
    echo 'found';
}else{
    echo 'Not found';
} 
```

# windows-phone-7 - 如何像下面的示例那样反序列化 json 数据？

> ID：10552012
> 
> 赞同：0
> 
> 时间：2012-05-11T13:09:00.430
> 
> 标签：windows-phone-7

当我有一个网站的 HttpWebRequest 时，我得到了一些像这样的 json 数据的响应：

```
[1,"aaa","bbb",[1,"aaa","bbb"]] 
```

我发现json格式没有键，但我必须反序列化数据。有人有什么想法吗？

谢谢：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:25:12.010

我使用 Json.NET 来反序列化它。我不确定这是最好的方法，但它确实反序列化：

```
string json = "[1,\"aaa\",\"bbb\",[1,\"aaa\",\"bbb\"]]";
var results = JsonConvert.DeserializeObject<object[]>(json);

foreach (var result in results)
{
    if (result is JArray)
    {
        var array = result as JArray;
        System.Console.WriteLine("  {");
        foreach (var item in array)
        {
            System.Console.WriteLine("     {0}", item);
        }
        System.Console.WriteLine("  }");

    }
    else
    {
        System.Console.WriteLine("{0}", result);
    }
} 
```

# java - 获取类中定义的不同 textView 的 id

> ID：10552013
> 
> 赞同：0
> 
> 时间：2012-05-11T13:09:03.000
> 
> 标签：java, android

我的 TextView 类是

```
static class ViewHolder {
        protected TextView tv0;
        protected TextView tv1;
        protected TextView tv2;
        protected TextView tv3;
        protected TextView tv4;
        protected TextView tv5;
        protected TextView tv6;
        protected TextView tv7; 
    }

linearview.setTag(viewHolder);
linearView.setId(xyz); 
```

// viewHolder.tv5 id 将为 xyz+5

现在，我可以使用 view.getTag 获取整个课程。我想要的是，假设我有一个词“测试”

我的随机函数选择 2，所以我想要 tv2 = T，tv3 = E 等等。我可以使用 str.getCharAt 来获取字符，但如何从随机单词中获取 textViews。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:24:28.220

如果我理解这一点是正确的......

在类中，您可以简单地编写：

```
TextView[] views = new TextView[]{tv0,tv1,tv2,tv3,etc.}; 
```

然后写一个getter：

```
public TextView[] views(){ return views; } 
```

或者，不是让它们受到保护，而是让它们公开。（仅当直接更改它们的值而无需更改其他任何内容都可以）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:31:07.260

你这个：

```
static class ViewHolder {
        private ArrayList<TextView> tv = new ArrayList<TextView>();

        public void addTV(TextView newTV)
        {
            tv.add(newTV);
        }

        public TextView getTVat(int i)
        {
            return tv.get(i);
        }

} 
```

# php - 如何防止 cron 作业执行，如果它已经在运行

> ID：10552016
> 
> 赞同：33
> 
> 时间：2012-05-11T13:09:06.947
> 
> 标签：php, cron, centos

我有一个 php 脚本，我在 CentOS 上每 10 分钟通过 cron 执行这个脚本。

问题是如果 cron 作业需要超过 10 分钟，那么同一个 cron 作业的另一个实例将启动。

我尝试了一个技巧，那就是：

1.  cron 作业开始时使用 php 代码创建一个锁定文件（与 pid 文件相同）。
2.  作业完成时使用 php 代码删除锁定文件。
3.  当任何新的 cron 作业开始执行脚本时，我检查了锁定文件是否存在，如果存在，则中止脚本。

但是可能存在一个问题，即当锁定文件由于某种原因没有被脚本删除或删除时。cron 将永远不会再次启动。

如果 cron 作业已经在运行，我有什么办法可以再次停止执行它，使用 Linux 命令或类似的命令？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-11T13:12:32.277

咨询锁定正是为此目的而设计的。

您可以使用[`flock()`](http://php.net/flock). 只需将该函数应用于先前打开的锁定文件，以确定另一个脚本是否对其进行了锁定。

```
$f = fopen('lock', 'w') or die ('Cannot create lock file');
if (flock($f, LOCK_EX | LOCK_NB)) {
    // yay
} 
```

在这种情况下，我添加`LOCK_NB`以防止下一个脚本等到第一个脚本完成。由于您使用的是 cron，因此总会有下一个脚本。

如果当前脚本过早终止，操作系统将释放任何文件锁。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-29T17:33:10.513

如果可以配置，也许最好不要编写代码：

[https://serverfault.com/questions/82857/prevent-duplicate-cron-jobs-running](https://serverfault.com/questions/82857/prevent-duplicate-cron-jobs-running)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-09-04T15:45:25.547

`flock()`对我来说效果很好 - 我有一个每 5 分钟安排一次数据库请求的 cron 作业，因此不要同时运行多个请求是至关重要的。这就是我所做的：

```
$filehandle = fopen("lock.txt", "c+");

if (flock($filehandle, LOCK_EX | LOCK_NB)) {
    // code here to start the cron job
   flock($filehandle, LOCK_UN);  // don't forget to release the lock
} else {
    // throw an exception here to stop the next cron job
}

fclose($filehandle); 
```

如果您不想终止下一个计划的 cron 作业，而只是暂停它直到正在运行的作业完成，那么只需省略`LOCK_NB`：

```
if (flock($filehandle, LOCK_EX)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-09T06:47:51.553

这是一个非常常见的问题，解决方案非常简单：`cronjoblock`一个简单的 8 行 shellscript 包装器使用flock 应用锁定：

[https://gist.github.com/coderofsalvation/1102e56d3d4dcbb1e36f](https://gist.github.com/coderofsalvation/1102e56d3d4dcbb1e36f)

> 顺便提一句。`cronjoblock`还可以逆转 cron 的垃圾邮件行为：仅在出现问题时才输出。这对于 cron 的 MAILTO 变量很方便。*除非*给定进程的 exitcode > 0 ，否则stdout/stderr 输出将被抑制（因此 cron 不会发送邮件）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-21T08:24:55.657

flock 在 php 5.3.3 中不起作用，因为文件资源句柄关闭时的自动解锁已被删除。现在解锁总是必须手动完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-29T07:46:57.577

我用这个::

```
<?php
// Create a PID file
if (is_file (dirname ($_SERVER['SCRIPT_NAME']) . "/.processing")) { die (); }
file_put_contents (dirname ($_SERVER['SCRIPT_NAME']) . "/.processing", "processing");

// SCRIPT CONTENTS GOES HERE //

@unlink (dirname ($_SERVER['SCRIPT_NAME']) . "/.processing");
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-23T09:12:58.820

```
#!/bin/bash
ps -ef | grep -v grep | grep capture_12hz_sampling_track.php
if [ $? -eq 1 ];
then
     nohup /usr/local/bin/php /opt/Apache/htdocs/cmsmusic_v2/script/Mp3DownloadProcessMp4/capture_12hz_sampling_track.php &
else
      echo "Already running"
fi 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-02T14:12:27.447

另一种选择：

```
<?php

/**
* Lock manager to ensure our cron doesn't run twice at the same time.
*
* Inspired by the lock mechanism in Mage_Index_Model_Process
*
* Usage:
* 
* $lock = Mage::getModel('stcore/cron_lock');
*
* if (!$lock->isLocked()) {
*      $lock->lock();
*      // Do your stuff
*      $lock->unlock();
* }
*/
class ST_Core_Model_Cron_Lock extends Varien_Object
{
    /**
     * Process lock properties
     */
    protected $_isLocked = null;
    protected $_lockFile = null;

    /**
     * Get lock file resource
     *
     * @return resource
     */
    protected function _getLockFile()
    {
        if ($this->_lockFile === null) {
            $varDir = Mage::getConfig()->getVarDir('locks');
            $file = $varDir . DS . 'stcore_cron.lock';
            if (is_file($file)) {
                $this->_lockFile = fopen($file, 'w');
            } else {
                $this->_lockFile = fopen($file, 'x');
            }
            fwrite($this->_lockFile, date('r'));
        }
        return $this->_lockFile;
    }

    /**
     * Lock process without blocking.
     * This method allow protect multiple process runing and fast lock validation.
     *
     * @return Mage_Index_Model_Process
     */
    public function lock()
    {
        $this->_isLocked = true;
        flock($this->_getLockFile(), LOCK_EX | LOCK_NB);
        return $this;
    }

    /**
     * Lock and block process.
     * If new instance of the process will try validate locking state
     * script will wait until process will be unlocked
     *
     * @return Mage_Index_Model_Process
     */
    public function lockAndBlock()
    {
        $this->_isLocked = true;
        flock($this->_getLockFile(), LOCK_EX);
        return $this;
    }

    /**
     * Unlock process
     *
     * @return Mage_Index_Model_Process
     */
    public function unlock()
    {
        $this->_isLocked = false;
        flock($this->_getLockFile(), LOCK_UN);
        return $this;
    }

    /**
     * Check if process is locked
     *
     * @return bool
     */
    public function isLocked()
    {
        if ($this->_isLocked !== null) {
            return $this->_isLocked;
        } else {
            $fp = $this->_getLockFile();
            if (flock($fp, LOCK_EX | LOCK_NB)) {
                flock($fp, LOCK_UN);
                return false;
            }
            return true;
        }
    }

    /**
     * Close file resource if it was opened
     */
    public function __destruct()
    {
        if ($this->_lockFile) {
            fclose($this->_lockFile);
        }
    }
} 
```

来源：[https ://gist.github.com/wcurtis/9539178](https://gist.github.com/wcurtis/9539178)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-22T20:21:00.660

我正在运行一个 php cron 作业脚本，该脚本专门处理使用现有 API 发送文本消息。在我的本地机器上，cron 工作运行良好，但在我客户的机器上，它正在发送双重消息。虽然这对我没有意义，但我仔细检查了负责发送消息的文件夹的权限，并将权限设置为 root。一旦我将所有者设置为 www-data (Ubuntu)，它就会开始正常运行。

这可能不是你的问题，但如果它是一个简单的 cron 脚本，我会仔细检查权限。

# asp.net-mvc - ASP.NET MVC 3 - ViewModel 最佳实践

> ID：10552017
> 
> 赞同：5
> 
> 时间：2012-05-11T13:09:12.220
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个 Razor 视图，其中包含许多从控制器获取数据的图形和其他文本字段。我正在考虑将一个`ViewModel`从控制器传递给视图，然后它将解析相关内容并显示它。

谁能建议上述方法是否是在 MVC 中解决此类问题的最佳实践？

该类`ViewModel`可能如下所示：

```
public class ViewModelDemo
{
    public MyChart chart {get;set;}
    public string LeftContent {get;set}
    public string bottomContent {get;set;}
    public ChartLeged legent {get;set} 
    ......
}

public class MyChart
{
   public List<int> xAxis {get;set}
   public List<int> yAxis {get;set;}
   ......
} 
```

我试图返回`ViewModel`的原因是页面的某些部分可能具有不同的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:15:59.453

绝对地。ViewModel 是解决此问题的完全可接受的解决方案。请参阅 Palermo 出色的 MVC in Action 书籍的第 12.1.5 节（在免费示例中很方便）

> 另一种选择是从域模型中为我们的视图创建一个单独的视图模型类型。我们将为那个视图创建一个专门的类。我们可以随心所欲地塑造该类型，并允许视图随心所欲地塑造我们的视图模型。分离视图模型的优点是我们的视图不会以任何方式影响域模型。对于不太复杂的应用程序，这种分离是不必要的，并且会使设计过于复杂。随着视图复杂性的增加，视图的设计对我们的领域模型的影响越来越大，除非视图模型和领域模型是分开的。

[http://www.manning.com/palermo/Samplechapter12.pdf](http://www.manning.com/palermo/Samplechapter12.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T13:13:40.453

我认为您的解决方案是正确的。

另一种方法可能是将大剃刀视图拆分为较小的局部视图，每个视图都有一个更简单的视图模型。这对于可读性，责任分离，ecc很有用。

# javascript - 如何获取 HTML 元素的原始高度？

> ID：10552019
> 
> 赞同：3
> 
> 时间：2012-05-11T13:09:23.837
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个 div：

```
<div id="div" style="height:150px; border:solid thin blue;"></div> 
```

有没有办法检索**原始**div 高度？div 是可调整大小的，因此用户可能在我的代码加载之前调整了它的大小。
注意：我的代码是一个 jQuery 插件，所以我不知道在调用我的插件之前元素发生了什么（所以请不要告诉我在元素数据中存储高度......）

[jqFiddle](http://jsfiddle.net/dDjeQ/1/)在这个演示中，我想在调整 div 大小后得到**150 。**
任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:13:21.267

不，因为`resizable()`方法会覆盖内联样式`height`值。

您需要将其存储在其他地方。

例如在`div`调整大小之前：

```
var originalHeight = $('#div').height();
$('#div').resizable();

$('#cmd').button().click(function(){
    alert(originalHeight);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:23:33.130

```
originalHeight=0;
$(document).ready(function()
{
    originalHeight= $("#div").height()
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:23:42.520

我不知道从 DOM 获取旧数据的方法，但你能不能坚持让插件调用一个 init 函数并获取这些值？您还可以在文档中建议在完成 init 函数之前不要移动元素，尽管如果通过 .ready() 调用它，这应该在用户有机会闪烁之前发生。

div如何调整大小，使用jquery-ui？

另一种选择可能是使用 ajax 再次获取页面，然后解析页面，但这会**耗费大量**精力并且非常混乱。

# android - 是否可以在 android 中 5 分钟后发送 Intent？

> ID：10552020
> 
> 赞同：-1
> 
> 时间：2012-05-11T13:09:29.173
> 
> 标签：android

我是安卓新手。请告诉我是否可以在 android 中 5 分钟、10 分钟后发送 Intent？我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T13:12:37.030

```
final Handler handler = new Handler();
handler.postDelayed(new Runnable() {
  @Override
  public void run() {
    // Launch new Intent here
  }
}, ((1000 * 60) * 5)); // 5 minutes delay before execute run() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T17:54:11.230

请参阅下面的代码，它可能会对您有所帮助。使用此计时器 5 分钟。

```
 final Timer myt = new Timer();
    myt.schedule(new TimerTask() {

    @Override
    public void run() {
    // TODO Auto-generated method stub

    try {
      Intent intent= new Intent(currentActivity.this, new_activity.class);
      startActivity(intent);    
    } catch (Exception e) {
    // TODO: handle exception
    }

      myt.cancel();
    }
    }, 300000); 
```

*在呼叫意图计时器自动终止后的上述代码中。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T18:20:53.927

嗯，如果操作系统决定在某个时候终止您的应用程序，这可能会变得很糟糕。如果您确实需要在 5 分钟后仍然通过该意图，您应该使用警报。看看[这个答案](https://stackoverflow.com/a/18827407/1665562 "这个答案")

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-11T13:16:08.267

```
final Handler handler = new Handler();
handler.postDelayed(new Runnable() {
@Override
public void run() {
 Intent intent= new Intent(youractivity.this, activitytostart5minuteslater.class);
 startActivity(intent);
}
}, ((1000 * 60) * 5)); 
```

你看过评论吗？？？

# javascript - 使用 jquery 解析 xml - 错误的 xml 格式

> ID：10552021
> 
> 赞同：0
> 
> 时间：2012-05-11T13:09:36.117
> 
> 标签：javascript, jquery, xml, json, parsing

我有这个 xml 文件：

```
<dist>
    <key>keynumber1</key>
    <string>value1</string>
    <key>keynumber2</key>
    <string>value2</string>
    <key>keynumber3</key>
    <string>value3</string>
    <key>keynumber4</key>
    <integer>value4</integer>
</dist> 
```

我怎样才能用jquery解析这个，比如：

```
{ "dist": {"keynumber1":"value1", "keynumber2":"value2"}} 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:15:05.867

第一步是使用 $.parseXML(str); 使用 jQuery 解析 xml；

[然后我使用了这个由David Welsh](http://davidwalsh.name/convert-xml-json)创建的漂亮函数

```
 function xmlToJson(xml) {

// Create the return object
var obj = {};

if (xml.nodeType == 1) { // element
    // do attributes
    if (xml.attributes.length > 0) {
    obj["@attributes"] = {};
        for (var j = 0; j < xml.attributes.length; j++) {
            var attribute = xml.attributes.item(j);
            obj["@attributes"][attribute.nodeName] = attribute.nodeValue;
        }
    }
} else if (xml.nodeType == 3) { // text
    obj = xml.nodeValue;
}

// do children
if (xml.hasChildNodes()) {
    for(var i = 0; i < xml.childNodes.length; i++) {
        var item = xml.childNodes.item(i);
        var nodeName = item.nodeName;
        if (typeof(obj[nodeName]) == "undefined") {
            obj[nodeName] = xmlToJson(item);
        } else {
            if (typeof(obj[nodeName].length) == "undefined") {
                var old = obj[nodeName];
                obj[nodeName] = [];
                obj[nodeName].push(old);
            }
            obj[nodeName].push(xmlToJson(item));
        }
    }
}
return obj;
}; 
```

# java - 用于在 Android 中存储文件的自定义密码加密文件系统

> ID：10552026
> 
> 赞同：0
> 
> 时间：2012-05-11T13:10:14.030
> 
> 标签：java, android, file, filesystems

是否可以创建自定义文件系统或使用现有文件系统（如 [EncFs](http://www.arg0.net/encfs)）在 Android 环境中读取数据。

我的想法是创建一个虚拟文件系统来存储一些媒体文件并开发一个可以直接从文件系统卷访问这些文件的应用程序。

我希望我的问题很清楚。！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:30:40.450

是的，但您需要有根设备才能使用它。或者，您需要构建自己的固件。这是一个，它是开源的：http: [//nemesis2.qx.net/pages/LUKSManager](http://nemesis2.qx.net/pages/LUKSManager)

# jquery - NyroModal - 关闭并重定向

> ID：10552032
> 
> 赞同：1
> 
> 时间：2012-05-11T13:10:42.327
> 
> 标签：jquery, nyromodal

我已经在我的网站中实现了 nyroModal jQuery 插件。我已经设置了一个配置 nyroModal Windows 的 javascript 文件：

```
$("a.nyroModal").nyroModal({

    bgColor: '#000',

    width: 680,

    height: 500

}); 
```

现在，打开的 nyroModal 窗口需要一个链接，我可以在其中关闭 nyroModal 窗口，然后重定向到特定页面。

我创建了一个关闭和重定向链接：

```
<a onclick="parent.$.nyroModalRemove(); window.parent.location.href = 'user/login';
return false;" href="#">log in</a> 
```

但是，窗口在 nyroModal 关闭之前被重定向 - 这看起来不太好。我想实现回调，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:45:07.877

创建一个从您的 onclick 调用的函数，例如：

```
<a onclick="nyroModalRedirect('user/login');" href="#">log in</a> 
```

然后创建调用 .close() 函数的函数，然后在调用重定向之前运行超时：

```
function nyroModalRedirect(url) {
    // Initialize timeout for hovering over group to load child districts when moving a school
    var timeout = null;
    var clear = function() {
        if (timeout) {
            clearTimeout(timeout);
            timeout = null;
        }
    }

    // Close modal (this is pulling the 'topmost' modal instance, but if you only have one, like my login form, it works a charm :)
    $.nmTop().close();
    clear();
    // Start timeout after closing modal
    timeout = setTimeout(function() {   
        // Redirect to passed URL after timeout occurs
        window.location.href = url;
    }, 500);
} 
```

享受 ：）

# vba - 如何将 Word 2010 表中的文本复制到 VBA 字符串中，同时保持换行符？

> ID：10552035
> 
> 赞同：0
> 
> 时间：2012-05-11T13:11:06.427
> 
> 标签：vba, string, ms-word, word-2010

我在 Word 中有一个表格，其中有一个包含几行短行的单元格。我想将该单元格的内容复制到一个 .txt 文件中，以维护换行符。

目前换行符丢失：Word表格单元格的内容：

```
Alice
Bob 
```

VBA字符串的内容：

```
AliceBob 
```

获取字符串的代码示例：

```
MyString = ActiveDocument.Tables(a).Cell(1, 1).Range.Text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:40:13.673

我通过使用复制和粘贴到新的 Word 文档中解决了我的问题，然后将新文档另存为文本文件。不整洁，但对这种情况足够有效。

# extjs - GXT 2.2.5 Demo Explorer 站点去哪儿了？

> ID：10552038
> 
> 赞同：4
> 
> 时间：2012-05-11T13:11:26.017
> 
> 标签：extjs, gxt

Sencha 发布了新版本的[GXT](http://www.sencha.com/products/gxt/)。他们有一个不错的[Demo Explorer](http://www.sencha.com/examples/#ExamplePlace%3aoverview)站点，您可以在其中查看示例并查看代码。但是，我们仍在使用之前的 2.2.5 版本，Demo Explorer 站点现在运行在新版本 3 上。

以前版本的 Demo explorer 是否还在某个地方？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T16:20:44.433

2.x 资源管理器已移至[http://www.sencha.com/examples-2/](http://www.sencha.com/examples-2/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-27T07:39:33.980

[http://dev.sencha.com/deploy/gxt-2.2.5.zip](http://dev.sencha.com/deploy/gxt-2.2.5.zip) --> 产品工件 [http://gxt-rtl.googlecode.com/git/war/examples.html](http://gxt-rtl.googlecode.com/git/war/examples.html) --> gxt2.2.5例子

# html - 在没有 ActiveX 类的 asp 中上传文件

> ID：10552046
> 
> 赞同：0
> 
> 时间：2012-05-11T13:12:07.723
> 
> 标签：html, browser, title, head, document-body

在将文件传回服务器之前，有没有办法在客户端检查文件大小（不使用也会出错的 ActievX）？在asp中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:18:00.637

在 ASP 中？不，根据定义。Active **Server** Pages 在收到来自客户端的请求之前不能做任何事情。

有一个草稿[文件 API](http://www.w3.org/TR/FileAPI/)，可让您使用客户端 JavaScript 执行此类检查。Mozilla 开发者网络有一个关于[获取选定文件信息](https://developer.mozilla.org/en/Using_files_from_web_applications#Getting_information_about_selected_files)的指南。一旦你有了对文件的引用，你就可以访问它的`.size`属性。

请注意，由于该规范是一个草案，它是相当新的并且可能会发生变化。这是一个非常新的，因此具有[非常有限的浏览器支持]（http://caniuse.com/#search=file api）。

您还可以使用 Java 小程序或 Flash 来实现您想要的（后者会得到更好的支持）。

# html - html表单，新手错误

> ID：10552051
> 
> 赞同：0
> 
> 时间：2012-05-11T13:12:27.457
> 
> 标签：html, forms

我有两个 html 文件，即“file1.html”和“file2.html”。File1 应该对写入输入文件中的字符串进行编码，并通过 URL 将其发送到 file2，以便在那里对其进行解码。

我的问题是一个令人尴尬的问题，因为我在从 file1 传递到 file2 时遇到了麻烦。这是我的代码：

```
<html>
<head>
<script type="text/javascript">
function encode()
{
    var encodeThis = document.getElementById("exampleText").value;
    document.getElementById("exampleText").value = escape(escape(encodeThis));
}
</script>
</head>

<body>

<form name="input" action="file2.html" method="get">
<input id="exampleText" type="text" name="example" value="Not strongly encoded" />
<input type="button" value="Encode and Submit!" onclick="encode()" />
</form>

</body>
</html> 
```

当我单击提交按钮时，我希望通过 URL 发送编码字符串并传递给我可以处理它的 file2.html，但是我仍然在我的第一页：“file1.html”。我在这里缺乏哪些基础知识？在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:18:12.947

因为没有提交。要么你给输入标签类型提交而不是按钮，要么你通过JS创建一个form.submit()。

`document.input.submit();`应该这样做。

顺便说一句...为什么要双重逃逸？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:17:03.700

提交按钮应该是这样的：

```
<input type="submit" value="Encode and Submit!" onclick="encode()" /> 
```

# javascript - 当内容来自 AJAX 时，如何从 html() 中提取给定 DIV 的 HTML()

> ID：10552052
> 
> 赞同：0
> 
> 时间：2012-05-11T13:12:27.723
> 
> 标签：javascript, jquery, ajax

我正在使用 jquery ajax 加载带有另一个页面内容/html 的页面部分。\

```
$(function() {
   app.xhr = $.ajax({
                                    url: url, 
                                    dataType: "html", 
                                    cache: false,
                                    success : function(html)
                                        {
                                            app.html = $(html);
                                            setTimeout(function(){
                                                app.insertPageData();
                                                app.xhr = null;
                                            },100)

                                        },
                                    error : function()
                                        {
                                            alert("Not Found")
                                        }
                                })

insertPageData : function()
                        {

                           $('div.data').html(app.html.find(".content").html())

                        }
}); 
```

所以这是IE特有的问题。app.html 包含页面的 HTML，我需要从不与 IE 一起使用的页面中提取一个特定的 div html。

有没有其他方法可以从 HTML 中提取 HTML？

谢谢/古西姆龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:15:46.113

你在你想要的 div 上有一个 id 或 class 吗？另外，通过提取，您的意思是这就是您想要的，还是您想从 HTML 中删除它？

如果你想*删除*div，并假设你有一个 id，你可以这样做：

```
app.html.remove('#id-of-div'); 
```

如果你想要的只是 div 而不是别的，那么你会这样做：

```
app.html = app.html.find('#id-of-div'); 
```

# delphi - 在特定位置使用delphi打开默认浏览器

> ID：10552059
> 
> 赞同：1
> 
> 时间：2012-05-11T13:12:44.663
> 
> 标签：delphi, browser, position

我想在默认浏览器的特定位置打开一个网页，并在该位置打开另一个网页，而不是该浏览器的新任务。也许用户打开了该浏览器的新任务，但是通过单击我的 delphi 程序中的按钮，必须首先打开所选网页。那可能吗？我的公司希望我编写这样的程序，但我不知道该怎么做。我真的很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:15:13.297

1.  [这里](http://delphi.about.com/cs/adptips2004/a/bltip0504_4.htm)有打开默认浏览器的说明，但您甚至可以像从 Windows 运行命令中一样“运行”一个 url。然后，您需要保留该过程的句柄，以便您可以使用它做一些事情。

2.  要在特定点打开网页，您最好在页面中使用命名锚点，即哈希后的位：[http](http://www.w3schools.com/TAGS/tryit.asp?filename=tryhtml_a_name) ://www.w3schools.com/TAGS/tryit.asp?filename= tryhtml_a_name 如果您不这样做'无法控制页面，并且没有可以尝试滚动的命名锚点：[如何通过 WinAPI 在外部应用程序中滚动滚动条？](https://stackoverflow.com/questions/3466403/how-to-scroll-the-scrollbar-in-external-application-via-winapi)

# android - BadParcelableException：解组时的 ClassNotFoundException：（空类名）

> ID：10552062
> 
> 赞同：2
> 
> 时间：2012-05-11T13:12:48.630
> 
> 标签：android, classnotfoundexception, parcelable, parcel

我有一个名为 AllStatStruct 的类。这个类包含三个属性，它们是我的类 StatStructCycle、StatStructHistory 和 MatrixStruct 的对象。每个类都扩展类 DataStruct 并实现 Parcelable 接口。`readParceable()`在接口的实现中，每个类都是使用or来读写的`writeParceable()`。

在我的 Activity 中，我在 AsyncTask 中调用 SOAP webservice 并获取 class 的对象`AllStatStruct`。这个对象通过创建一个传递给下一个活动`Bundle`：

```
protected void onPostExecute(final AllStatStruct ass) {

    if (ass != null) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        Bundle bundle = new Bundle();
        bundle.putParcelable("allStatStruct", ass);
        intent = new Intent(packageContext, PrivateView.class);
        intent.putExtras(bundle);
        startActivity(intent);

    } else {
        KreativBarometerMainView.this.showDialog(9999);
    }
} 
```

编组包裹效果很好，正如我在 LogCat 中的跟踪输出中看到的那样。但是在解组包裹时，会发生 ClassNotFoundException，我不知道为什么。这是跟踪：

```
05-11 15:02:59.796: E/AndroidRuntime(8647): Caused by: android.os.BadParcelableException: ClassNotFoundException when unmarshalling: 
05-11 15:02:59.796: E/AndroidRuntime(8647):     at android.os.Parcel.readParcelable(Parcel.java:1958)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at de.kreativBarometer.net.structs.AllStatStruct.<init>(AllStatStruct.java:45)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at de.kreativBarometer.net.structs.AllStatStruct$1.createFromParcel(AllStatStruct.java:70)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at de.kreativBarometer.net.structs.AllStatStruct$1.createFromParcel(AllStatStruct.java:1)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at android.os.Parcel.readParcelable(Parcel.java:1981)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at android.os.Parcel.readValue(Parcel.java:1846)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at android.os.Parcel.readMapInternal(Parcel.java:2083)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at android.os.Bundle.unparcel(Bundle.java:208)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at android.os.Bundle.getParcelable(Bundle.java:1100)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at de.kreativBarometer.ui.PrivateView.onCreate(PrivateView.java:693)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-11 15:02:59.796: E/AndroidRuntime(8647):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1628)
05-11 15:02:59.796: E/AndroidRuntime(8647):     ... 11 more 
```

如您所见，未找到的类没有给出名称！所以它正在搜索一个名为“”的类，当然它没有找到。

我不知道，为什么会这样。有人能帮我吗？我已经尝试过使用 ClassLoader，但是给意图一个额外的类加载器并使用这个来解组 parcelables 是行不通的。

**编辑：**

正如您所建议的，我尝试分别传递 AllStatStruct 的几个部分。它与`StatStructCycle`和一起工作正常`MatrixStruct`，但与`StatStructHistory`，仍然抛出错误。

现在，`NullPointerException`当我尝试用`StatStructCycle`s 解组我的 ArrayList 时，我得到了一个 , 。我注释掉了历史的其他部分。

我尝试使用 and 编写和读取 ArrayList `writeTypedList(List<T> list)`，`readTypedList(List<T> list, Creator<T> c)`但它也不起作用。

当我使用 ArrayLists 时，我还使用 将它们的容量调整为实际大小`trimToSize()`，因为我认为 ArrayList 的“空”插槽可能会导致问题。但同样，情况并非如此......

使用调试器启动应用程序显示，编组`StatStructHistory`没有空值......每个属性或列表项都被初始化。我不知道这`NullPointerException`是从哪里来的。

最好的问候 htz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:48:42.593

[解组parcelables的问题](https://stackoverflow.com/questions/1996294/problem-unmarshalling-parcelables)

看起来即使您的编组成功，如果有空异常，解组过程仍然会失败。

出于调试目的，请尝试逐个编组每个子对象。看看其中是否有任何错误，然后深入研究问题。现在，您正试图一次解组 3 个对象，并且很难确定哪个对象有问题（如果有的话）。

如果不清楚，我建议尝试这个：

```
bundle.putParcelable("allStatStruct", ass.StatStructCycle); 
```

如果可行，请尝试：

```
bundle.putParcelable("allStatStruct", ass.StatStructHistory); 
```

ETC...

# python - 在 scapy / python 中获取数据包大小

> ID：10552067
> 
> 赞同：9
> 
> 时间：2012-05-11T13:13:06.877
> 
> 标签：python, size, packet, scapy

在 Scapy（或者甚至只是 Python）中，我如何获得给定数据包的大小（以字节为单位）？我很想使用这个函数`len`，但我不确定它在数据包的情况下究竟返回什么。

```
>>> len(IP(dst="www.google.com"))
20

>>> len(IP(dst="www.google.com")/TCP(dport=80))
40 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T13:26:11.590

```
>>> len(IP(dst="www.google.com"))
20 
```

一个最小的 IP 标头中有 20 个字节。

```
>>> len(IP(dst="www.google.com")/TCP(dport=80))
40 
```

最小 TCP 标头中还有另外 20 个字节（20+20==40）。

所以似乎`len`正在返回数据包长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:06:50.037

我一直在观察的是 Len(packet[Layer]) 实际上会执行 LenField 类型的操作。它将返回数据包中的字节数，从指定的层开始，一直到数据包的末尾。因此，虽然此方法可用于确定整体数据包大小，但请注意，它无法确定单个层的长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-10T19:43:55.243

这是我在使用 scapy 嗅探数据包时获取数据包大小/长度的方法。

```
pkt.sprintf("%IP.len%") 
```

完整示例：

```
from scapy.all import *

# callback function - called for every packet
def traffic_monitor_callbak(pkt):
    if IP in pkt:
        print pkt.sprintf("%IP.len%")

# capture traffic for 10 seconds
sniff(iface="eth1", prn=traffic_monitor_callbak, store=0, timeout=10) 
```

我只使用 scapy 来嗅探数据包，所以我不确定在将 scapy 用于创建数据包等其他事情时上述内容是否有意义。

# jquery - jquery 选择除 div 及其子元素以外的所有元素

> ID：10552072
> 
> 赞同：10
> 
> 时间：2012-05-11T13:13:29.273
> 
> 标签：jquery, css, jquery-ui, toggle, selector

我有这个 html/css 代码：

```
<body>
        <!-- BEGIN: HEADER AREA -->
        <?php require("snippets/header_area.php"); ?>
        <!-- END: HEADER AREA -->
        <div id = "presentation_area">
            <div id = "submenu_area">
                <div id = "sliding_menu_area">
                </div>
                <div id = "tags">
                    <div id = "1">
                        <img src = "lang/el/images/1.png" />
                    </div>
                    <div id = "2">
                        <img src = "lang/el/images/2.png" />
                    </div>
                    <div id = "3">
                        <img src = "lang/el/images/3.png" />
                    </div>
                    <div id = "4">
                        <img src = "lang/el/images/4.png" />
                    </div>
                </div>
            </div>
        </div>
    </body> 
```

当用户单击除`#sub_menu_area`. 我使用js的以下部分：

```
$('*').not('#submenu_area').click(function(){
        if(slide == "open"){
            $('#sliding_menu_area').toggle(effect);
            slide = "close";
        }
    }); 
```

不幸的是，孩子们并没有被排除在外，点击它会切换很多次。有谁知道如何正确地做到这一点？！:)

**编辑：** 所以我需要一个 jquery 选择器来正确获取：`on click of all elements of body EXCEPT for #submenu_area and its descendants`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T15:18:44.390

试试这个：

```
$(document).click(function(e) {
        if ($(e.target).is('#submenu_area, #submenu_area *')) {
            return;
        }
        if(slide == "open"){
            $('#sliding_menu_area').toggle(effect);
            slide = "close";
        }
    }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T13:14:48.520

用这个：

```
$('*').not("#submenu_area *").click(function() { ... }); 
```

# msbuild - 如何在巡航控制中使用带有 mstest.exe 的 app.config 文件

> ID：10552076
> 
> 赞同：1
> 
> 时间：2012-05-11T13:13:41.463
> 
> 标签：msbuild, cruisecontrol.net, mstest

我正在使用 mstest.exe 执行我的测试用例，当我从 vs 运行这个测试用例时，它们运行良好，但是当我使用 ms-build 从巡航控制运行它们时，它们给了我异常，他们无法读取 application.config . 我的意思是我创建了一个从 app.config 读取值的类。它有一个将端口号读取为字符串并将其转换为 int 的字段，使用 VS 它是工作文件，但使用 Ms 构建它会显示 ArgumentNullException 异常。

那么我如何指定 mstest 使用特定的 app.config 文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:20:39.253

在 app.config 属性上，设置`Copy to Output Directory`=`Copy always`

如果测试在`TestDeploymentDir`使用下运行[`DeploymentItemAttribute`](https://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute.aspx)：

```
[TestMethod]
[DeploymentItem("app.config")] 
```

在 Visual Studio 2012 或更高版本中，您可以使用[`.runsettings`](https://msdn.microsoft.com/en-us/library/jj635153.aspx)更多部署选项。

在 Visual Studio 2010 中：

从`Test`菜单 > `Edit Test Settings`> `Local`>`Deployment`选项卡 > 检查`Enable deployment`并`Add file`指向 app.config

# c# - 保存画布以供以后重新使用

> ID：10552080
> 
> 赞同：0
> 
> 时间：2012-05-11T13:13:53.343
> 
> 标签：c#, android, xamarin.android

我正在用android制作示波器。到目前为止，我已经制作了基轴，每次程序启动时都会绘制这个轴。现在我想通过在第一次创建轴画布后保存它来提高性能。我的想法是将此画布保存为位图并在下次调用：

```
 public class ScopeCanvas : View
    {

        private Context _context;

        public double TimeBase { get; set; }
        public double VoltagePerDiv { get; set; }

        private Canvas _axisCanvas;
        private Bitmap _savedAxisCanvas;

        /// <summary>
        /// Constructor
        /// </summary>
        /// <param name="context">Context</param>
        public ScopeCanvas(Context context, double timeBase, double voltagePerDiv) : base(context)
        {
           _context = context;

            TimeBase = timeBase;
            VoltagePerDiv = voltagePerDiv;
        }

        protected override void OnDraw(Canvas canvas)
        {
            base.OnDraw(canvas);

            if(_axisCanvas == null)
            {
                _axisCanvas = CreateAxis(canvas);

#if DEBUG
                Console.WriteLine("Axis canvas newly created!");
#endif
            }
            else
            {
#if DEBUG
               Console.WriteLine("Using pre made axis canvas!");
#endif
            }
        }
} 
```

有人能告诉我如何保存这幅画布并稍后再回忆吗？我的意思是在`OnDraw`活动中！

PS：`CreateAxis(canvas)`是我在上面画轴的方法。这是它的外观： ![在此处输入图像描述](../Images/e2e6f4262c662568fd38c5e7e7ef0d13.png)

由于我不想硬编码电压和时基划分之间的固定距离，因此需要至少在第一次使用 ExactCenterY 等创建（与分辨率无关）时动态绘制它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:15:00.840

您“可以”将其引用到成员变量，但这不是一个好主意。如果您想稍后在该画布上绘制，请尝试（再次）使您​​的视图无效，以便再次`onDraw()`调用该方法并且您可以使用给定的画布。

# xcode - 合并后在 Xcode 的 project.pbxproj 中查找错误

> ID：10552082
> 
> 赞同：3
> 
> 时间：2012-05-11T13:13:57.157
> 
> 标签：xcode, version-control, merge-conflict-resolution

我在 iOS 应用程序的版本控制中面临两个分支的复杂合并。在我识别并选择了 中的冲突行之后`project.pbxproj`，Xcode 将不会加载该文件。运行它`plutil`显示了这一点：

> CFPropertyListCreateFromXMLData()：旧式 plist 解析器：字典中缺少分号。

我已经恢复并尝试了几次合并（小心地），每次都得到相同的结果，尽管我看不到我在哪里引入了格式问题。

有没有一种工具可以用来至少找出错误所在的*行*或*对象*，以便找到我正在犯的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T01:09:22.113

我创建了以下测试：

```
#import <Foundation/Foundation.h>
#import <err.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSString *path = [[NSFileManager defaultManager] stringWithFileSystemRepresentation:argv[1] length:strlen(argv[1])];
        NSData *data = [NSData dataWithContentsOfFile:path];

        if (!data)
            errx(EXIT_FAILURE, "open failed: %s\n", argv[1]);

        NSString *errorString;
        id plist = [NSPropertyListSerialization propertyListFromData:data
                                                    mutabilityOption:NSPropertyListImmutable
                                                              format:NULL
                                                    errorDescription:&errorString];

        if (!plist)
            errx(EXIT_FAILURE, "%s\n", [errorString UTF8String]);

        printf("plist successfully read\n");
    }
    return 0;
} 
```

并使用修改后的 project.pbxproj 运行它：

```
// !$*UTF8*$!
{
        archiveVersion = 1;
        classes = {
                x = 1
        };
... 
```

并得到以下错误：

2012-05-11 20:51:14.381 plist-test[41890:303] CFPropertyListCreateFromXMLData()：旧式 plist 解析器：第 6 行的字典中缺少分号。解析将被放弃。中断 _CFPropertyListMissingSemicolon 进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:17:58.940

我确定您已经考虑过这一点，但我看到的唯一选择是编写一个快速实用程序。

您可以尝试`CFPropertyListIsValid()`并希望它吐出一些有用的东西。标题说：

> 调试库版本会吐出一些有用的消息。

也许这个功能可以让您更深入地了解它的日志记录活动？我不知道 Apple 认为“有帮助”或“某些”是什么意思（也许只是，“不。它是无效的。”以及返回`false`），但那将是我的下一次尝试。

此外，`CFPropertyListCreateWithStream()`如果您一次阅读一点，可能会有所帮助。您可以通过分部分输入它直到它返回 NULL 来使用它来将错误位置归零。当遇到 NULL 时减少大小会让你更接近它的消化不良点。

# c++ - 锁、内存屏障、信号量的区别

> ID：10552085
> 
> 赞同：7
> 
> 时间：2012-05-11T13:14:10.590
> 
> 标签：c++, multithreading

这篇文章：[http](http://www.aristeia.com/Papers/DDJ_Jul_Aug_2004_revised.pdf) ://www.aristeia.com/Papers/DDJ_Jul_Aug_2004_revised.pdf （第12页）似乎在锁和内存屏障之间有所不同

我想知道锁、内存屏障和信号量之间有什么区别？

*（虽然其他问题可能会提到锁和同步对象之间的区别，但我没有发现锁和内存屏障之间的区别）*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T13:41:03.950

*   [内存屏障](http://en.wikipedia.org/wiki/Memory_barrier)是一种排序内存访问的方法。编译器和 CPU 可以更改此顺序以进行优化，但在多线程环境中，这可能是一个问题。与其他的主要区别在于线程不会因此而停止。
*   [锁或互斥锁](http://en.wikipedia.org/wiki/Mutual_exclusion)确保代码只能由 1 个线程访问。在本节中，您可以将环境视为单线程，因此不需要内存屏障。
*   [信号量](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)基本上是一个可以增加 (v()) 或减少 (p()) 的计数器。如果计数器为 0，则 p() 会暂停线程，直到计数器不再为 0。这是一种同步线程的方法，但我更喜欢使用互斥锁或[条件变量](http://en.cppreference.com/w/cpp/thread/condition_variable)（有争议，但这是我的观点）。当初始计数器为 1 时，信号量称为二进制信号量，它类似于锁。

锁和信号量之间的一个很大区别是线程拥有锁，所以没有其他线程应该尝试解锁，而信号量则不是这样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-11T14:05:57.647

内存屏障（也称为栅栏）是一种硬件操作，可确保对全局可见存储的不同读取和写入的顺序。在典型的现代处理器上，内存访问是流水线的，并且可能会出现乱序。内存屏障确保不会发生这种情况。完整的内存屏障将确保在它之前的所有加载和存储都发生在它之后的任何加载或存储之前。（许多处理器支持部分屏障；例如，在 Sparc 上，a `membar #StoreStore`确保在它之后发生的任何存储之前发生的所有存储对所有其他进程都是可见的。）

这就是内存屏障的全部作用。它不会阻塞线程或任何东西。

互斥量和信号量是更高级别的原语，在操作系统中实现。请求互斥锁的线程将阻塞，并由操作系统暂停其执行，直到该互斥锁空闲。操作系统中的内核代码将包含内存屏障指令以实现互斥锁，但它的作用远不止于此；内存屏障指令将暂停硬件执行（所有线程），直到满足必要条件——最多一微秒左右，整个处理器在这段时间内停止。当你试图锁定一个互斥锁，而另一个线程已经拥有它时，操作系统将暂停你的线程（并且只有你的线程——处理器继续执行其他线程），直到持有互斥锁的人释放它，这可能是几秒钟、几分钟或双数日。（当然，如果超过几百毫秒，它'

最后，信号量和互斥量并没有太大区别。互斥量可以被认为是计数为 1 的信号量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T13:29:16.327

现在简单解释一下。

**锁**

是对这段代码是否可以进行的原子测试

```
lock (myObject)
{
    // Stuff to do when I acquire the lock
} 
```

这通常是一条 CPU 指令，用于测试并将变量设置为单个原子操作。更多在这里，[http ://en.wikipedia.org/wiki/Test-and-set#Hardware_implementation_of_test-and-set_2](http://en.wikipedia.org/wiki/Test-and-set#Hardware_implementation_of_test-and-set_2)

**记忆屏障**

是对处理器的一个提示，它不能乱序执行这些指令。没有它，指令可能会乱序执行，就像在双重检查锁定中一样，两个空检查可以在锁定之前执行。

```
Thread.MemoryBarrier();
public static Singleton Instance()
{
    if (_singletonInstance == null)
    {
        lock(myObject)
        {
            if (_singletonInstance == null)
            {
                _singletonInstance = new Singleton();
            }
        }
    }
} 
```

这也是一组 CPU 指令，它们实现了内存屏障，以明确告诉 CPU 它不能乱序执行。

**信号量**

类似于锁，除了它们通常用于多个线程。例如，如果您可以处理 10 个并发磁盘读取，您将使用信号量。根据处理器的不同，这要么是它自己的指令，要么是带有负载的测试和设置指令，需要更多处理中断（例如在 ARM 上）。

# glassfish-3 - AMX Glassfish AppserverConnectionSource

> ID：10552086
> 
> 赞同：3
> 
> 时间：2012-05-11T13:14:12.960
> 
> 标签：glassfish-3

我可以通过 JMX 使用以下 URL 服务连接 Glassfish AS 3.1：jmx:rmi:///jndi/rmi://localhost:8686/jmxrmi

但是我无法通过 AMX 连接它。这是我正在使用的 API

> amx-api-10.0-SNAPSHOT

我在其源代码中意识到 url 的定义与以下不同。它在 AppserverConnectionSource.java 类中定义

```
private static final String APPSERVER_JNDI_NAME = "/management/rmi-jmx-connector"; 
```

当我尝试连接 AS AMX 接口时，出现以下错误。

> 使用 JMXServiceURL 连接：service:jmx:rmi:///jndi/rmi://127.0.0.1:8686/management/rmi-jmx-connector java.io.IOException：无法检索 RMIServer 存根：javax.naming.NameNotFoundException： management/rmi-jmx-connector at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:338) at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:248) at com.sun.appserv。 management.client.AppserverConnectionSource.createNew(AppserverConnectionSource.java:412) 在 com.sun.appserv.management.client.AppserverConnectionSource.getJMXConnector(AppserverConnectionSource.java:481) 在 com.sun.appserv.management.client.AppserverConnectionSource.getMBeanServerConnection( AppserverConnectionSource.java:513) 在 com.sun.appserv.management.client.ProxyFactory.getInstance(ProxyFactory.java:399) 在 com.sun.appserv.management.client.ProxyFactory.getInstance(ProxyFactory.java:373) 在 com.sun.appserv.management.client.AppserverConnectionSource.getDomainRoot(AppserverConnectionSource.java:528)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-28T06:43:03.210

我知道的太晚了，但我无法抗拒。我遇到了同样的问题，重新创建节点实例并不能解决问题。我查看了我的节点日志，发现我缺少 jars。只需添加那些丢失的 jar，我就可以再次使用其节点实例启动集群。

# arrays - Coldfusion8：如何创建关联数组？

> ID：10552089
> 
> 赞同：-1
> 
> 时间：2012-05-11T13:14:19.593
> 
> 标签：arrays, coldfusion-8

我需要创建一个行项目数组“arrayOfQuoteLineItem”。代替位置值，我必须为位置关联名称，如何在coldfusion8中做到这一点？我在“http://www.bennadel.com/blog/1676-Learning-ColdFusion-9-Delete-Array-Elements-With-ArrayDelete-.htm”上看到了一些用于coldfusion9但不是coldfusio8的代码？

```
 QuoteLineItem
   nmfcClass = "100"
   weight = "300" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:17:56.820

关联数组在 CF 中称为“结构”或“结构”。您可以将结构嵌套在数组中，或者将结构嵌套在结构中，或者任何您需要的东西。

```
<cfset quoteLineItems = arrayNew(1) /> <!--- or <cfset quoteLineItems = [] /> --->
<!--- probably some looping code here --->
<cfset st = structNew() /> <!--- or <cfset st = {} /> --->
<cfset st.nmfcClass = 100 />
<cfset st.weight = 300 />
<cfset arrayAppend(quoteLineItems, st) />
<!--- end loop ---> 
```

# javascript - Instagram 如何获取 access_token

> ID：10552091
> 
> 赞同：3
> 
> 时间：2012-05-11T13:14:34.557
> 
> 标签：javascript, instagram

我是 Instagram 应用程序开发的新手，并且在一段时间内一直在努力解决这个问题。基本上，它是这样的：

我将用户重定向到授权网址，如下所示：

```
window.open("https://api.instagram.com/oauth/authorize/?client_id=" + igClientId + "&redirect_uri=" + igCallbackUrl + "&response_type=code", "_blank"); 
```

然后，当用户登录时，页面重新加载并在回调 url ('') 的末尾添加 Instagram CODE `?code=returned_by_instagram_code`。

这就是我卡住的地方。

如何在页面重新加载后从 url 获取返回的代码（它存储在 cookie 或 session 中，因此我可以以某种方式访问​​它，或者我应该通过回调 url 和附加的一些函数以某种方式获取它）？

接下来，当我获得代码时，我可以`POST`向 Instagram 发送 ( ) 请求`access_token`吗？

* * *

预先感谢您的任何帮助。

*PS。我正在使用没有任何框架（例如 jquery）的 javascript，这是我正在寻找的响应。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:39:06.100

从仅使用客户端访问令牌生成的文档（[http://instagram.com/developer/authentication/](http://instagram.com/developer/authentication/)）中，您需要更改的关键是 URL 中的响应代码： &response_type= **token**

客户端（隐式）身份验证 如果您正在构建一个没有服务器组件的应用程序（例如，一个纯粹的 javascript 应用程序），您会注意到在没有服务器组件的情况下完成上述第三步来接收您的 access_token 是不可能的运送您的客户秘密。您永远不应该将您的客户机密发送到您无法控制的设备上。那么如何获得 access_token 呢？好吧，负责 OAuth 2.0 规范的聪明人预见到了这个问题并创建了隐式身份验证流程。

第一步：将您的用户引导至我们的授权 URL

```
https://instagram.com/oauth/authorize/?client_id=CLIENT-ID&redirect_uri=REDIRECTURI&response_type=token 
```

此时，我们会向用户展示一个登录屏幕，然后是一个确认屏幕，他们会在其中批准您的应用访问他们的 Instagram 数据。请注意，与显式流不同，此处的响应类型是“令牌”。

第二步：通过 URL 片段接收 access_token

一旦用户通过身份验证并授权您的应用程序，我们将使用 url 片段中的 access_token 将他们重定向到您的 redirect_uri。它看起来像这样：

```
http://your-redirect-uri#access_token=270740070.f59def8.d58713f2c81741c5b3686109306f98b4 
```

只需从 URL 片段中获取 access_token 即可。如果用户选择不授权您的应用程序，您将收到与显式流程中相同的错误响应

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T17:52:27.357

一个简单的例子，在 api.instagra ( [https://instagram.com/developer/clients/register/](https://instagram.com/developer/clients/register/) ) 上的注册应用程序中获取您的令牌。请先登录：

```
var accessToken = '5e6e329062f047dd95ggj6c9df202c828';

$.ajax({
 url: 'https://api.instagram.com/v1/media/popular',
 dataType: 'jsonp',
 type: 'GET',
 data: {client_id: accessToken},
 success: function(data){
    console.log(data);
    for(x in data.data){
      $('ul').append('<li><img  src="'+data.data[x].images.low_resolution.url+'"></li>');  
    }
},
error: function(data){
    console.log(data);
} 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:22:12.577

igCallbackUrl 将重定向到一个页面。该代码可以作为该请求的 GET 参数访问。

像 GET['code'] 在 php 中的东西。如果您提供有关服务器端框架的更多详细信息，那么回答您的问题将很有帮助。

如果您在 Javascript 上使用，则可以使用 github.com/Instagram/instagram-javascript-sdk。

# php - php : 警告：为 foreach() 提供的参数无效

> ID：10552093
> 
> 赞同：0
> 
> 时间：2012-05-11T13:14:38.087
> 
> 标签：php, foreach

我只是想不通..但是当我抛出异常消息时，我感觉问题就在那里。我在注册课程中得到了几乎相同的代码。通常只给错误数组提供消息，例如 $this->errors[] = "some error"。

```
<?php

class class_login 
{
    private $id;
    private $username;
    private $password;
    private $passmd5;

    private $errors;
    private $access;
    private $login;
    private $ltoken;

    public function __cunstruct()
    {
        $this->errors = array();

        $this->login  = isset($_POST['login'])? 1:0;
        $this->access = 0;
        $this->ltoken  = $_POST['ltoken'];
        $this->id     = 0;
        $this->username = ($this->login)? $this->filter($_POST['lusername']) : $_SESSION['username'];
        $this->password = ($this->login)? $this->filter($_POST['lpassword']) : '';
        $this->passmd5 = ($this->login)? md5($this->password) : $_SESSION['password'];

    }

    public function isLoggedIn()
    {
        ($this->login)? $this->verifyPost() : $this->verifySession();

        return $this->access;
    }

    public function filter($var)
    {
        return preg_replace('/[^a-zA-Z0-9]/','',$var);
    }

    public function verifyPost()
    {
        try
        {
            if(!$this->tokenValid())
                throw new Exception('Invalid Form Submission!');
            if(!$this->isDataValid())
                throw new Exception('Ivalid Form Data!');
            if(!$this->verifyDatabase())
                throw new Exception('Invalid Username/Password!');

            $this->access = 1;
            $this->registerSession();
        }
        catch(Exception $e)
        {
            $this->errors[] = $e->getMessage();
        }
    }

    public function verifySession()
    {
        if($this->sessionExist() && $this->verifyDatabase())
        $this->access = 1;
    }

    public function verifyDatabase()
    {
        include('db_connect.php');

        $data = mysql_query("SELECT ID FROM users WHERE username = '($this->username)' AND password = '($this->passmd5)'");

        if (mysql_num_rows($data))
        {
            list($this->id) = @array_values(mysql_fetch_assoc($data));

            return true;
        }
        else
            return false;

       }

    public function isDataValid()
    {
        return (preg_match('/[^a-zA-Z0-9](5,12)$/',  $this->username) && preg_match('/[^a-zA-Z0-9](5,12)$/',  $this->password))? 1:0;
    }

    public function tokenValid()
    {
        return (!isset($_SESSION['ltoken']) || $this->ltoken != $_SESSION['ltoken'])? 0 : 1;
    }

    public function registerSession()
    {
        $_SESSION['ID']       = $this->id;
        $_SESSION['username'] = $this->username;
        $_SESSION['password'] = $this->passmd5;
    }

    public function sessionExist()
    {
        return (isset($_SESSION['username']) && isset($_SESSION['password']))? 1 : 0;
    }

    public function show_errors()
    {
        foreach($this->errors as $key=>$value)
            echo $value."</br>";
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:18:15.987

构造函数被调用`__construct`，而不是`__cunstruct`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:19:09.853

我看到您正在将 $this->errors 设置为**__cunstruct**函数中的数组，但由于它不是 __construct 它可能永远不会被设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:19:19.427

你需要一个关联数组

```
foreach($this->errors as $key=>$value) 
```

但是你没有人。($this->errors[] = $e->getMessage();)

如果没有关联数组，您必须使用：

```
foreach($this->errors as $value) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:21:34.287

```
 public function __cunstruct() <------ The error is probably here. It is __construct
    {
        $this->errors = array();

        $this->login  = isset($_POST['login'])? 1:0;
        $this->access = 0;
        $this->ltoken  = $_POST['ltoken'];
        $this->id     = 0;
        $this->username = ($this->login)? $this->filter($_POST['lusername']) : $_SESSION['username'];
        $this->password = ($this->login)? $this->filter($_POST['lpassword']) : '';
        $this->passmd5 = ($this->login)? md5($this->password) : $_SESSION['password'];

    } 
```

你有一个错字.... **_*构造****而不是*****_构造****

# jquery - 解释一些代码

> ID：10552100
> 
> 赞同：0
> 
> 时间：2012-05-11T13:15:39.657
> 
> 标签：jquery

下面的 jQuery 代码发生了什么？

```
$("#myDiv").val($(".cssValue").sortable('serialize',{expression: 'textExp[#]'})); 
```

我了解它可以在 div 中的 css 值上启用排序，我愿意对此进行更正。

我对这部分感到困惑：

```
'serialize',{expression: 'textExp[#]'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:24:16.047

[http://docs.jquery.com/UI/Sortable#method-serialize](http://docs.jquery.com/UI/Sortable#method-serialize)

签名： .sortable( "serialize" , [options] ) 将可排序的项目 ID 序列化为表单/ajax 可提交字符串。调用此方法会生成一个哈希值，该哈希值可以附加到任何 url，以便轻松地将新的商品订单提交回服务器。

默认情况下，它通过以“setname_number”格式查看每个项目的 id 来工作，它会输出一个像“setname[]=number&setname[]=number”这样的哈希值。

您还可以提供选项哈希作为第二个参数，以自定义定义函数的工作方式。可能的选项是：'key'（用你想要的任何东西替换 part1[]）、'attribute'（测试除 'id' 之外的另一个属性）和'expression'（使用你自己的正则表达式）。

如果 serialize 返回一个空字符串，请确保 id 属性包含下划线。它们必须采用以下形式：“set_number” 例如，具有 id 属性 foo_1、foo_5、foo_2 的 3 元素列表将序列化为 foo[]=1&foo[]=5&foo[]=2。您可以使用下划线、等号或连字符来分隔集合和数字。例如 foo=1 或 foo-1 或 foo_1 都序列化为 foo[]=1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:24:21.467

> 我了解它可以在 div 中的 css 值上启用排序，我愿意对此进行更正。

`.sortable('serialize',{expression: 'textExp[#]'})`实际上是用于在先前实例化的 jQuery UI 小部件上调用方法的 jQuery UI 语法。也就是说，这条线实际上并不是`.cssValue`可排序的——那是在之前的时间点完成的。这个命令只是序列化元素。

这是一个完整的运行：

```
// select an element with id='myDiv'
$("#myDiv")
    // note: .val() is used for setting the value of form fields, so this doesn't
    // seem to make a lot of sense, given that #myDiv is presumably a div
    .val(
        // select an element with class='cssValue'
        $(".cssValue")
            // call the serialize method on this jQuery UI sortable element
            // this will return a serialization of .cssValue - check out
            // the methods tab here http://jqueryui.com/demos/sortable/
            .sortable('serialize', { expression: 'textExp[#]'})
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:19:18.173

它将具有 id 的元素的值设置`myDiv`为可排序的。（`sortable`是一个 jQuery 插件，[请参阅此页面](http://docs.jquery.com/UI/Sortable)。）

# listview - jQuery Mobile 中的可排序列表视图

> ID：10552106
> 
> 赞同：4
> 
> 时间：2012-05-11T13:15:50.823
> 
> 标签：listview, jquery-mobile, jquery-ui-sortable

jQuery Mobile 中是否有使列表视图可排序的功能？

通过可排序，我的意思是用户可以通过拖动重新排序列表中的元素，就像在 iPhone 上一样。

在列表视图上应用 jQuery UI 可排序效果使其可在桌面浏览器上排序，但不能在移动设备上排序。

*更新：* 我正在尝试[这些](https://stackoverflow.com/questions/5186441/javascript-drag-and-drop-for-touch-devices)解决方案。Touch Punch 使拖放功能起作用，但仅当列表不长于设备屏幕时。如果某些项目不在屏幕上（您需要向下滚动才能看到它们），那么功能就会被破坏：当您拖动项目时，它会得到错误的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:59:25.560

一个简单的解决方案是使用可排序的 jquery ui 以及 jquery 移动列表视图，请参阅代码：

```
<ul data-role="listview" class="sortable">
        <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1</li>
        <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 2</li>
        <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 3</li>
        <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 4</li>
        <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 5</li>
        <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 6</li>
        <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 7</li>
</ul> 
```

并确保将 jqueryui 库添加到

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script> 
```

然后调用 sortable 函数：

```
<script>
        $(function() {
                $( ".sortable" ).sortable();
                $( ".sortable" ).disableSelection();
        });
</script> 
```

我希望这有帮助...

# java - Spring+MyBatis 与多个数据库支持故障转移的最佳方法

> ID：10552107
> 
> 赞同：0
> 
> 时间：2012-05-11T13:15:51.433
> 
> 标签：java, spring, architecture, mybatis

我需要开发一些服务并向一些第三方公开 API。在这些服务中，我可能需要获取/插入/更新/删除涉及一些复杂计算的数据（不仅仅是简单的 CRUD）。我打算使用 Spring 和 MyBatis。

但真正的挑战是会有多个具有相同数据的数据库节点（一些外部设置将负责使它们保持同步）。当我收到一些数据的请求时，我需要随机选择一个数据库节点并查询它并返回结果。如果所选数据库无法访问或有一些网络问题或一些未知问题，那么我需要尝试连接到其他一些数据库节点。

我知道 Spring 的 AbstractRoutingDataSource。但是在哪里注入数据库连接重试逻辑呢？如果我动态切换数据源，Spring 会正确处理事务吗？

或者我应该避免 Spring 和 MyBatis 开箱即用的集成并使用 MyBatis 自己进行事务管理？

你们有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:40:51.257

我建议您使用像 MongoDB 这样的 NoSQL 数据库。很容易聚类。例如，您可以配置使用 10 台服务器并进行 3 次数据复制。

这意味着如果您的 10 台服务器中有 2 台出现故障 - 您仍然可以保存数据。

NoSQL 数据库与 RDBS 相比有所不同，但它们可以为集群提供高性能。

此外，NoSQL 不支持事务——如果是财务操作，您必须手动进行。

实际上，在使用 NoSQL 进行开发时，您应该采用不同的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:47:32.043

是的，它会起作用。获取 AbstractRoutingDataSource 并编写自己的代码。您唯一不能做的就是在事务运行时更改目标数据库。

所以你要做的就是把数据库重试代码放在getConnection中。如果在事务期间该连接变得无效，您应该让它失败。

# linq - 使用 Linq 查询截断集合

> ID：10552115
> 
> 赞同：0
> 
> 时间：2012-05-11T13:16:20.920
> 
> 标签：linq, lambda

我想将一个集合的一部分提取到另一个集合。我可以使用 for 循环轻松地做同样的事情，但我的 linq 查询不适用于相同的工作。我是 Linq 的新手，所以请帮我更正查询（如果可能，请提供解释/初学者教程链接）

传统的做法：

```
Collection<string> testColl1 = new Collection<string> {"t1", "t2", "t3", "t4"};
Collection<string> testColl2 = new Collection<string>();

for (int i = 0; i < newLength; i++)
{
    testColl2.Add(testColl1[i]);
} 
```

其中 testColl1 是源，而 testColl2 是所需的 count = newLength 截断集合。

我使用了以下 linq 查询，但它们都没有工作......

```
var result = from t in testColl1 where t.Count() <= newLength select t;
            var res = testColl1.Where(t => t.Count() <= newLength); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:18:49.093

使用[`Enumerable.Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)：

```
var testColl2 = testColl1.Take(newLength).ToList(); 
```

请注意，您的`for`循环和使用`Take`. 如果 中的项目少于，则`for`循环将抛出异常，而版本将默默地忽略这一事实，并仅返回与项目一样多的项目。`IndexOutOfRangeException``newLength``testColl1``Take``newLength`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T13:18:40.737

正确的方法是使用[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)：

```
var result = testColl1.Take(newLength); 
```

等效的使用方式[`Where`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where)是：

```
var result = testColl1.Where((i, item) => i < newLength); 
```

这些表达式将产生一个`IEnumerable`，因此您可能还想在末尾附加一个`.ToList()`or 。`.ToArray()`

两种方式都比您的原始实现少返回一个项目，因为它更自然（例如，如果`newLength == 0`不应该返回任何项目）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:18:49.153

您可以将`for`循环转换为如下内容：

```
testColl1.Take(newLength) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T13:19:17.080

使用[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)：

```
var result = testColl1.Take(newLength); 
```

此扩展方法返回集合中的前 N ​​个元素，其中 N 是您传递的参数，在本例中为`newLength`.

# asp.net - 表单提交资源未找到错误

> ID：10552118
> 
> 赞同：0
> 
> 时间：2012-05-11T13:16:48.110
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010

我正在开发一个带有表单的 mvc 项目。页面加载得很好，但是当我单击提交按钮时，出现此错误：

“/”应用程序中的服务器错误。无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的网址：/commercialrecycling

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.225

我在我的机器上本地运行表单。如何解决此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:18:37.640

你有`[HttpGet]`控制器动作的属性吗？这将限制表单发布并返回 404 错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:18:44.803

确保您有一个名为`commercialrecycling`type的操作方法`HttpPost`

```
[HttpPost]
public ActionResult Index(YourModel model)
{
  //Do for processing now
} 
```

假设您的表单是名为 YourViewModel 的模型/视图模型的强类型。

如果你不想使用模型绑定，你可以简单地使用参数

```
[HttpPost]
public ActionResult Index(string username,string password)
{
  //Do for processing now
} 
```

参数名称应与要从中读取数据的 HTML 元素的名称相同。

# ios5 - 一个使用异步请求处理原生包含在 ios5 中的 url 重定向的简单示例？

> ID：10552124
> 
> 赞同：0
> 
> 时间：2012-05-11T13:17:23.947
> 
> 标签：ios5

如何使用 ios 5 sdk 的异步 http get 请求来处理重定向的 url？

我发现了零碎的知识。所有解决方案都假定用户知道一些重要信息。对于刚开始编写 ios 代码到从 ios5 sdk 开始的人来说，这很难弄清楚。

我知道很多人可能会要求去阅读文档，但不知何故有同样的问题，但是请有人用简单的术语解释这个概念......一个工作代码以及小细节什么peice去哪里？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:36:36.500

[AFNetworking](https://github.com/AFNetworking/AFNetworking)为处理网络请求提供了良好的代码基础，并且[此页面专门](https://github.com/AFNetworking/AFNetworking/issues/265)包含有关重定向的信息。看起来该评论线程中提出的更改尚未提交，但无论如何检查一下，看看是否有帮助。

简而言之，[kcharwood](https://github.com/kcharwood)建议对您选择使用的任何操作进行子类化并覆盖`-(NSURLRequest *)connection:willSendRequest:redirectResponse:`，如下所示：

```
- (NSURLRequest *)connection: (NSURLConnection *)inConnection
         willSendRequest: (NSURLRequest *)inRequest
        redirectResponse: (NSURLResponse *)inRedirectResponse
{
    if (inRedirectResponse) {
       //Create your mutable request to return in the redirect scenario
    } else {
        return inRequest;
    }
} 
```

# jquery - 路由ajax rails麻烦

> ID：10552128
> 
> 赞同：1
> 
> 时间：2012-05-11T13:17:31.760
> 
> 标签：jquery, ruby-on-rails, ajax

我有这样的jQuery代码：

```
 $(".quantity").blur(function() {
    console.log("upd");
    $.ajax({
    url: "/line_items/update_quantity/",
    type: "GET",
    data: {id: $(this).attr('id'), quantity: $(this).attr('quantity'), cart: $(this).attr('cart')} 
    });
  }); 
```

但是这段代码为我生成了这样的网址：

> .../line_items/update_quantity/?id=29&quantity=111&cart=27

但我需要这样的网址：

> .../line_items/update_quantity/id=28&quantity=2&cart=27

没有 ？

A有这样的路线：

> 匹配 'line_items/:action/id=:id&quantity=:quantity&cart=:cart' => 'line_items#update_quantity'

我试过了，但没有任何事情发生。请帮帮我。

```
def update_quantity
    @cart = current_cart
    @line_item = LineItem.find(params[:id])
    respond_to do |format|
      if @line_item.update_attribute(:quantity, params[:quantity]) #&& @cart.id == params[:cart]
        format.html { redirect_to(@line_item, :notice => 'Line item was successfully updated.') }
        format.js
        format.xml  { head :ok }
      else
        format.html { render :action => "edit" }
        format.xml  { render :xml => @line_item.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:26:05.360

查询参数应该在之后启动`?`

[HTTP/1.1：协议参数](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2.2)

> “http”方案用于通过 HTTP 协议定位网络资源。本节定义了 http URL 的特定于方案的语法和语义。
> 
> http_URL = "http:" "//" host [ ":" port ] [ abs_path [ "?" query ]]

your route can be replaced by

```
match 'line_items/:action/:id' => 'line_items#update_quantity' 
```

`&quantity=:quantity&cart=:cart` is unnecessary

or better

```
resources :line_items do
  get :update_quantity, :on => :member
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:35:37.133

您必须手动在路线末尾附加 id：

```
$(".quantity").blur(function() {
    console.log("upd");
    $.ajax({
    url: "/line_items/update_quantity/" + $(this).attr("id"),
    type: "GET",
    data: {quantity: $(this).attr('quantity'), cart: $(this).attr('cart')} 
    });
  }); 
```

但我同意 rubish，你不应该用 GET url 更新记录

# php - 在 javascript http post 请求后处理不同的 php 响应

> ID：10552132
> 
> 赞同：3
> 
> 时间：2012-05-11T13:17:37.453
> 
> 标签：php, javascript, android, http-post

我正在开发一个 android 应用程序，它使用 PHP/MySQL 将数据从应用程序发送到服务器，以便注册/登录用户。我已经编写了 Javascript 和 PHP 文件来发送和接收 JSON 数据并将其插入 MySQL 数据库。我遇到的问题是如何处理来自 PHP 的不同响应。

示例：

```
<?php

   //decode json object
   $json = file_get_contents('php://input');
   $obj = json_decode($json);

   //variables
   $user_firstname = $obj->{'user_firstname'};
   $user_lastname = $obj->{'user_lastname'};
   $user_email = $obj->{'user_email'};
   $user_password = $obj->{'user_password'};

   if([variables] != null){
      //check for an existing email in db
      mysql_query("Check if email exists");

      if(email exist){
         //pass a response to java file
         return user_exists;
         die();
      }else{
         //success
         return success;
      }
   }

?> 
```

我想要的只是处理这些不同的返回值，以便在 android 应用程序中与用户进行交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:41:52.067

我认为您应该为此使用 HTTP 响应代码。例如，`HTTP 200 - OK` 当用户成功创建并且`HTTP 409 Conflict`用户已经存在时，您的 php 脚本将返回。这就是 RESTfull API 通常的工作方式。在 Android 上，您必须检查状态代码并决定要做什么。

```
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpPost httpget = new HttpPost("http://www.google.com/");

HttpResponse response = httpclient.execute(httpget);
int statusCode = response.getStatusLine().getStatusCode(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:23:35.520

您可以通过创建一个关联数组并将其传递给该数组来制作一个 json 响应，该数组[`json_encode()`](http://php.net/manual/en/function.json-encode.php)将返回一个您可以回显给 java 客户端的字符串。不要忘记使用该函数设置[适当的`Content-Type`标题。](https://stackoverflow.com/questions/477816/the-right-json-content-type)[`header()`](http://php.net/manual/en/function.header.php)适当地设置 HTTP 响应代码也是一个好主意。我正在描绘这样的事情：

```
$responseArray = array('response' => 'success'); // or 'user_exists'
$responseJson = json_encode($responseArray);
header('HTTP/1.1 200 OK'); // or 4xx FAIL_TEXT on failure
header('Content-Type: application/json');
echo $responseJson; 
```

然后，您必须在 java 客户端上解析此响应。

# html - 在 ul li 内具有 % 宽度的绝对位置？

> ID：10552144
> 
> 赞同：0
> 
> 时间：2012-05-11T13:18:26.987
> 
> 标签：html, css, positioning

我正在构建一个使用常规的导航菜单`ul#nav`。

在下面的示例中，我试图使 div 内的 div`li#third`悬在`ul#nav`. 我知道我需要`position: absolute`在里面的 div上使用，`li#third`但如果我这样做，那么它只会占用分配给它的 100% 的宽度。

我尝试更改`position: absolute; width: 40%;`div 上的，但最后一张`li`幻灯片在它下面。

如何保持与`li#third`元素相同的宽度并且仍然让它在底部流过它？

更新示例：http: [//jsfiddle.net/VyHJR/24/](http://jsfiddle.net/VyHJR/24/)

**HTML：**

```
<ul id="nav">
    <li id="first"><a href="">item</a></li>
    <li id="second"><a href="">item</a></li>
    <li id="third"><div id="search">search</div></li>
    <li id="fourth"><div id="flag"><div id="flag_item">4</div></div></li>
</ul> 
```

**CSS：**

```
ul#nav { width: 600px; background-color: #fdd; padding: 0; margin: 30px 0 0 20px; overflow: hidden; }

ul#nav li { float: left; text-align: center; }
ul#nav li a { color: #333333; }

ul#nav li#first { background-color: #dff; width: 20%; padding: 6px 0; }
ul#nav li#second { background-color: #ddf; width: 20%; padding: 6px 0; }
ul#nav li#third { background-color: #dfd; width: 40%; }
ul#nav li#fourth { background-color: #ffd; width: 20%; }

li#third div#search { width: 100%; background-color: #333333; height: 40px; color: #ffffff; }
li#fourth div#flag { width: 100%; height: 20px; background-color: #333333; }
li#fourth div#flag div#flag_item { width: 1px height: 30px; background-color: red; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:34:36.430

**见：http:** [//jsfiddle.net/thirtydot/VyHJR/34/](http://jsfiddle.net/thirtydot/VyHJR/34/)

现在我明白你想做什么了，这是有道理的。

我删除`overflow: hidden`了`ul#nav`，我认为它在那里包含浮动，并将其替换为`display: inline-block`. 我也可以使用[clearfix](http://nicolasgallagher.com/micro-clearfix-hack/)。

我添加`position: relative; height: 1px;`到`ul#nav li#third`. 有些`height`是必需的，否则第四个`li`代替第三个。`position: relative`包含绝对定位的`div#search`.

我添加`left: 0`到`div#search`纯粹是为了修复 IE7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:38:14.980

```
li{ overflow: hidden;
        position: relative;} 
```

# objective-c - 检测PNG文件是否在Objective C中损坏

> ID：10552145
> 
> 赞同：4
> 
> 时间：2012-05-11T13:18:27.127
> 
> 标签：objective-c, png, nsurlrequest, corrupt

我正在使用 NSURLRequest 下载 jpg 和 png。这工作正常，但有时文件已损坏。我已经看到了[捕捉错误：损坏的 JPEG 数据：数据段的过早结束，](https://stackoverflow.com/questions/3848280/catching-error-corrupt-jpeg-data-premature-end-of-data-segment)并且这适用于 jpgs。有谁知道对pngs做同样的事情的方法？即以编程方式检查png数据是否有效......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T16:16:10.550

PNG 格式有几个内置检查。每个“块”都有一个 CRC32 检查，但要检查您是否需要阅读完整的文件。

更基本的检查（当然不是万无一失的）是读取文件的开头和结尾。

前 8 个字节应始终是以下（十进制）值`{ 137, 80, 78, 71, 13, 10, 26, 10 }`（[ref](http://www.w3.org/TR/PNG-Structure.html)）。特别是，第二到第四个字节对应于 ASCII 字符串“PNG”。

十六进制：

```
89 50 4e 47 0d 0a 1a 0a
.. P  N  G  ........... 
```

您还可以检查文件的最后 12 个字节（IEND 块）。中间 4 个字节应对应 ASCII 字符串“IEND”。更具体地说，最后 12 个字节应该是（以十六进制表示）：

```
00 00 00 00 49 45 4e 44 ae 42 60 82
........... I  E  N  D  ........... 
```

（严格来说，PNG 文件以这 12 个字节结束并不是必须的，IEND 块本身表示 PNG 流的结束，因此文件原则上可以有额外的尾随字节，PNG 阅读器会忽略这些字节。在实践中，这是极不可能的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T11:42:29.763

正如[捕捉错误：损坏的 JPEG 数据：数据段的过早结束](https://stackoverflow.com/questions/3848280/catching-error-corrupt-jpeg-data-premature-end-of-data-segment?lq=1)这里是 PNG 的代码片段：

```
- (BOOL)dataIsValidPNG:(NSData *)data
{
    if (!data || data.length < 12)
    {
        return NO;
    }

    NSInteger totalBytes = data.length;
    const char *bytes = (const char *)[data bytes];

    return (bytes[0] == (char)0x89 && // PNG
            bytes[1] == (char)0x50 &&
            bytes[2] == (char)0x4e &&
            bytes[3] == (char)0x47 &&
            bytes[4] == (char)0x0d &&
            bytes[5] == (char)0x0a &&
            bytes[6] == (char)0x1a &&
            bytes[7] == (char)0x0a &&

            bytes[totalBytes - 12] == (char)0x00 && // IEND
            bytes[totalBytes - 11] == (char)0x00 &&
            bytes[totalBytes - 10] == (char)0x00 &&
            bytes[totalBytes - 9] == (char)0x00 &&
            bytes[totalBytes - 8] == (char)0x49 &&
            bytes[totalBytes - 7] == (char)0x45 &&
            bytes[totalBytes - 6] == (char)0x4e &&
            bytes[totalBytes - 5] == (char)0x44 &&
            bytes[totalBytes - 4] == (char)0xae &&
            bytes[totalBytes - 3] == (char)0x42 &&
            bytes[totalBytes - 2] == (char)0x60 &&
            bytes[totalBytes - 1] == (char)0x82);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T23:52:00.763

更好的 dataIsValidPNG 版本：

```
BOOL dataIsValidPNG(NSData *data) {

    if (!data) {
        return NO;
    }

    const NSInteger totalBytes = data.length;
    const char *bytes = (const char *)[data bytes];
    const char start[] = { '\x89',  'P',  'N',  'G', '\r', '\n', '\x1a', '\n' };
    const char end[]   = {   '\0', '\0', '\0', '\0',  'I',  'E',    'N',  'D', '\xAE', 'B', '`', '\x82' };

    if (totalBytes < (sizeof(start) + sizeof(end))) {
        return NO;
    }

    return (memcmp(bytes, start, sizeof(start)) == 0) &&
           (memcmp(bytes + (totalBytes - sizeof(end)), end, sizeof(end)) == 0);
} 
```

# python - 布尔的 Python max() 和 min() 值

> ID：10552147
> 
> 赞同：2
> 
> 时间：2012-05-11T13:18:33.727
> 
> 标签：python

在python解释器中，

```
min(True,False)==False
max(True,False)==True 
```

有设计保证吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T13:19:30.090

`True`等于`1`并且`False`是`0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T13:22:30.200

似乎，至少在 CPython 中，`bool`子类`int`。因此，您可以这样做：

```
>>> abs(False)
0
>>> abs(True)
1 
```

和：

```
>>> False < True
True
>>> True > False
True 
```

我猜测`max`并`min`使用比较运算符：

```
>>> cmp(False, True)
-1
>>> cmp(True, False)
1
>>> cmp(False, False)
0
>>> cmp(True, True)
0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T13:28:25.200

在 python 2.x 中，这不能保证，因为您可以覆盖 True 和 False：

```
>>> False = 23
>>> max(True, False)
23 
```

但是，如果您不指定 True 或 False，则 Language Design 保证 Booleans 子类 int 的值为 0、1、yes。（并且在py3中，True和False是保留字，所以不能做上面的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T13:21:16.533

根据[文档](http://docs.python.org/library/stdtypes.html#boolean-values)，

> 在数字上下文中（例如，当用作算术运算符的参数时），它们的行为分别类似于整数 0 和 1。

所以，是的，这是有保证的。

# c# - 传递给构造函数的变量是否可以作为属性使用？

> ID：10552156
> 
> 赞同：2
> 
> 时间：2012-05-11T13:18:55.300
> 
> 标签：c#, oop

我的老板坚持以下规则：传递给构造函数的所有变量都应该通过只读属性获得。

我看不出这是正确的真正原因，因为班级应该做它应该做的事情，而不是向其他人提供他们的结构。我知道有时它很有用，但这不是一般规则。

我的想法正确吗？我错过了什么吗？任何人都可以添加更多论点或反对吗？

规则示例：

```
 public class MyClass
 {
      public MyClass(ISomeProvider someProvider)
      {
          SomeProvider = someProvider;
      }
      public ISomeProvider SomeProvider { get; private set; }
      public void DoSomeWork()
      {
          ...
      }
 } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T13:23:43.393

就我个人而言，我会说不……我从不相信有一条适合所有人的规则。如果参数在类内部使用，则无需公开它们。

如果您将“原始”字符串密码传递给加密类，您不会期望原始字符串在对象的整个生命周期内都可以访问，实际上这样做可能会带来安全风险。

但另一方面，有时您必须遵循团队/经理制定的标准。如果您认为该原则是错误的，请详细讨论支持/反对该想法的论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:23:15.093

它**可以**像规则一样应用于某些特定项目的某些特定部分（应该说，听起来很奇怪的设计，但是..），但它永远不会成为软件设计中的通用规则，即使在一个单一的领域也是如此项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:26:04.177

老板决定的规则可以帮助调试了解对象的属性。这不是规则，您可以将其视为项目经理创建的设计模式。

```
public class MyClass
{
    private ISomeProvider someProvider;

    public ISomeProvider SomeProvider
    {
        get
        {
            //logic here 
            return this._someProvider;
        }
    }

    public MyClass(ISomeProvider someProvider)
    {
        this._someProvider = someProvider;
    }

    public void DoSomeWork()
    {

    }
} 
```

# jquery - 特色内容滑块 - 悬停时更改 - 幻灯片闪烁

> ID：10552159
> 
> 赞同：0
> 
> 时间：2012-05-11T13:19:03.917
> 
> 标签：jquery

谁能帮忙？

我为我正在为客户开发的网站添加了一个[特色内容滑块](http://webdeveloperplus.com/jquery/featured-content-slider-using-jquery-ui/)，他们询问的其中一条评论是幻灯片转换是否可以在悬停时发生，然后在单击幻灯片时（或者实际上是ui-tabs) 被带到目标 URL。

我拥有的 jQuery 是演示附带的标准（我还在学习你看）

```
 $(document).ready(function(){  
    $("#featured").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);  
    $("#featured").hover(  
    function() {  
        $("#featured").tabs("rotate",0,true);  
    },  
    function() {  
    $("#featured").tabs("rotate",5000,true);  
    }  
    );
    }); 
```

它增加了“悬停暂停”功能。

无论如何，选项卡的 HTML 如下所示：

```
 <ul class="ui-tabs-nav">
    <li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-1"><a href="#fragment-1"><span class="panelTitle">Find a<br />
      <span class="panelTitleMain">Boat</span></span> <span class="panelCopy">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span></a></li>
    <li class="ui-tabs-nav-item" id="nav-fragment-2"><a href="#fragment-2"><span class="panelTitle">Find an ABYA<br />
      <span class="panelTitleMain">Broker</span></span> <span class="panelCopy">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span></a></li>
    <li class="ui-tabs-nav-item" id="nav-fragment-3"><a href="#fragment-3"><span class="panelTitle">TBC<br />
      <span class="panelTitleMain">TBC</span></span> <span class="panelCopy">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span></a>&lt;</li>
  </ul> 
```

我已经设法让滑块在鼠标悬停时改变以下内容，但现在图像在加载时闪烁。

```
$("#featured").tabs({event: 'mouseover', fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);  
$("#featured").hover(  
function() {  
    $("#featured").tabs("rotate",0,true);  
},  
function() {  
$("#featured").tabs("rotate",5000,true);  
}  
); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:04:55.343

是的，我在加载时也以闪烁结束。

但我现在找到了解决方案。只需从函数中删除代码`'fx:{opacity: "toggle"}'`，它就可以正常工作。

我认为切换和鼠标悬停都不需要。

# android - 活动何时开始但我们何时使用 onStart()

> ID：10552173
> 
> 赞同：-2
> 
> 时间：2012-05-11T13:19:31.823
> 
> 标签：android, oncreate, onstart

我知道我们`onCreate()`在活动开始时打电话，但我们什么时候使用`onStart()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:26:45.093

这些就像我们作为活动生命周期的一部分的回调方法。所有方法调用应该在活动开始时调用，您只需覆盖其中的几个。

在 android 中，所有以“on”开头的函数都类似于提供给您的回调函数。

这些所有功能都称为生命周期的一部分。 ![在此处输入图像描述](../Images/50a01ab54f54c5da72f26971ea093404.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:23:43.820

`onStart()`- 在活动对用户可见之前调用。紧随其后的`onResume()`是活动是否出现在前台，或者`onStop()`它是否被隐藏。

这可能会帮助您澄清：http: [//developer.android.com/guide/topics/fundamentals/activities.html#ImplementingLifecycleCallbacks](http://developer.android.com/guide/topics/fundamentals/activities.html#ImplementingLifecycleCallbacks)

# ios - 检查 textField.text isEqualToString

> ID：10552176
> 
> 赞同：0
> 
> 时间：2012-05-11T13:19:50.340
> 
> 标签：ios, nsstring, uitextfield

我有动态添加到自定义的 qtyTextFields `UITableViewCell`。我想要做的是检测用户是否在 中输入了字符串 0`UITextField`并从 if 中删除一个对象`NSMutableArray`。（我知道如何从那`NSMutableArray`很好地删除对象）

下面的这个实现对我没有任何作用，甚至没有记录任何东西：

```
-(void)textFieldDidEndEditing:(UITextField *)textField{  
    if ([qtyTextField.text isEqualToString: @"0"])
    {
        NSLog(@"You ENTERED 0");
        [theProducts removeObjectAtIndex:qtyTextField.tag];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *path = [documentsDirectory stringByAppendingPathComponent:@"basket.plist"];
        [theProducts writeToFile:path atomically:YES];
    }
    else
    {
        NSLog(@"Do Nothing");
    } 
    [self.tableView reloadData];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:22:24.020

您是否尝试过使用从该方法获得的 UITextField 实例？因此 if 语句将显示为：

```
if ([textField.text isEqualToString: @"0"]){
    //code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:23:37.653

如果它甚至没有记录任何内容，那么听起来您没有在文本字段上设置委托。首先执行此操作，然后您应该会在日志中看到“ `DO NOTHING`”或“ ”。`You Entered Something`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:33:57.350

可能有各种情况导致您的代码无法正常工作：-

1.你可能没有在.h文件中实现UITextFieldDelegate

2.您可能没有在 viewDidLoad 方法中设置文本字段委托

```
myTextField.delegate=self; 
```

您可以使用此代码

```
if([myTextField.text length]==0)
{
//Show some error
}
else
{
if([myTextField.text isEqualToString:[NSString stringWithFormat:"%@",@"0"]])
{
//Your Operation
}
} 
```

在这里，您可能需要记住文本字段委托的设置。如果它在 tableview 上，那么它的委托将是 tableviewcontroller，如果你有其他的 viewcontroller。

# xml - XML/XSD 限制

> ID：10552177
> 
> 赞同：0
> 
> 时间：2012-05-11T13:19:53.150
> 
> 标签：xml, xsd

有人可以帮我做一个限制吗？我有一个名为 的元素`name`，这个元素不应该以`-`但可以包含`-``-`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:25:48.433

我不确定您是否熟悉正则表达式的[概念](http://en.wikipedia.org/wiki/Regular_expression)。如果是，那么您应该很容易[在 XSD 文件中应用正则表达式](http://www.regular-expressions.info/xml.html)。

# python - 在python中以全屏方式从mac游戏中获取信息

> ID：10552179
> 
> 赞同：1
> 
> 时间：2012-05-11T13:20:12.633
> 
> 标签：python, macos, fullscreen

我正在创建一个 python 脚本来自动化 mac 游戏。为此，我使用了 Accessibility API，因此我可以获取 AXApplication 元素，然后可以获取它的 AXWindows、AXChildren、属性、操作等。

当游戏处于窗口模式时，这可以正常工作。但是，当我将其更改为全屏时，AXWindows 列表为空，就像应用程序不再有窗口一样。所以，我无法获得游戏窗口大小、位置等。

是否有任何方式（使用可访问性 API 或其他不同的 API）在全屏模式下获取游戏窗口以获取属性和操作并从中操作游戏？

# c++ - 通过 HTTP 加载外部 HTML 时 DHTML_EVENT_ONCLICK 不起作用？

> ID：10552181
> 
> 赞同：1
> 
> 时间：2012-05-11T13:20:15.863
> 
> 标签：c++, windows, winapi, mfc

我需要为 CDhtmlDialog 中的 A 元素处理 onclick 事件，该元素使用 HTTP 协议（​​不是来自资源的 HTML）加载外部 HTML 文件。我使用以下代码：

```
BEGIN_DHTML_EVENT_MAP(CAdDialog)
    DHTML_EVENT_ONCLICK(_T("adlink"), OnAnchorClicked)
END_DHTML_EVENT_MAP() 
```

我的 A 元素 HTML 如下：

```
<a href="http://www.google.com/" id="adlink">Click here!!!</a> 
```

我希望当用户单击链接时 CDhtmlDialog 将调用 OnAnchorClicked 函数。然而，什么都没有发生。如果 CDhtmlDialog 加载外部 URL 而不是加载资源，看起来 DHTML_EVENT_ONCLICK 对它不起作用？有没有办法在 CDhtmlDialog 中捕获通过 HTTP 加载的 HTML 的 onclick 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T04:32:09.093

```
DHTML_EVENT_TAG(DISPID_HTMLELEMENTEVENTS_ONCLICK, _T("a"), OnLinkClickedMethod) 
```

这真是一个痛苦的发现。Microsoft 的 dispatch id 文档很糟糕。这将在您的 CDHtmlDialog 中捕获每个单击的链接。

对所有未来任性的旅行者的说明：所有调度 ID 都在 MsHtmdid.h 头文件中。

# c++ - Visual Studio 版本之间的不同未分配内存行为

> ID：10552185
> 
> 赞同：5
> 
> 时间：2012-05-11T13:20:38.963
> 
> 标签：c++, visual-studio, visual-c++, memory-management, compiler-errors

我的情况很奇怪。我正在尝试在我的相机管理软件中实现一个 10 多年前的 pci 相机设备 SDK。制造商不再营业，我没有机会获得官方帮助。所以我在这里，为我的丑陋问题寻找一些帮助。

SDK 附带`Visual Studio 6.0`示例。其中一个包含文件的结构以一个字节数组结尾，如下所示；

```
typedef struct AVData {
    ...  
    BYTE audioVideoData[1];
}AVDATA, *PAVDATA; 
```

但是这个单字节分配的字节数组接收视频帧并且很奇怪，它适用于 Visual Studio 6.0 版本。如果我使用 Visual Studio 2005/2008/2010 尝试它，我会开始收到`Memory Access Violation`错误消息，这实际上是有道理的，因为以后不可能将空间分配给固定大小的数组，不是吗？但是相同的代码在 VS 6.0 上运行良好？！这可能是由编译器或 c++ 运行时差异引起的，但我在这个主题上不是很有经验，所以很难说出我的某些原因。

我尝试将大小更改为预期的最大字节数，如下所示；

```
typedef struct AVData {
    ...  
    BYTE audioVideoData[20000];
}AVDATA, *PAVDATA; 
```

这有助于它开始工作，但有时我在尝试破坏库的解码器对象时遇到内存访问冲突问题。

这肯定有问题。我没有 SDK 的源代码，只有 DLL、Lib 和 Header 文件。我的问题是：

1）在Visual Studio 6.0版本中为固定大小的数组分配空间真的合法吗？

2）是否有任何可能的方法（编译器选项等）使相同的代码适用于较新的 VS 版本/C++ 运行时？

3）由于我编辑头文件的解决方法在一定程度上有效但仍然存在问题，您知道解决此问题的更好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:37:05.797

IIRC 它是创建大小可变的结构的老技巧。

考虑

```
struct {
  int len;
  char name[1];
} s; 
```

如果完成了适当的分配，“名称”现在可以是可变长度的，它将按顺序排列在内存中：

```
char* foo = "abc";
int len = strlen(foo);

struct s* p = malloc( sizeof(int) + len + 1 );

p->len = len;
strcpy(p->name, foo ); 
```

我认为以上内容在较新版本的 Visual Studio 中也应该可以正常工作，也许这是一个打包问题，你有没有做过#pragma pack(1) 来获取字节边界上的结构？我知道 VS6 将其作为默认设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T13:38:53.330

像这样的 C 结构中的单元素数组通常意味着直到运行时才知道大小。（有关 Windows 示例，请参阅[BITMAPINFO](http://msdn.microsoft.com/en-us/library/dd183375.aspx)。）

通常，会有一些其他信息（可能在结构中）告诉您缓冲区需要多大。您永远不会直接分配其中之一，而是分配正确大小的内存块，然后进行转换：

```
int size = /* calculate frame size somehow */
AVDATA * data = (AVDATA*) malloc(sizeof(AVDATA) + size);
// use data->audioVideoData 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:41:18.227

代码几乎肯定会以某种方式表现出未定义的行为，除了修复 SDK 的接口或源代码之外，没有其他方法可以解决此问题。由于它不再营业，这是不可能的。

# javascript - Appcelerator - Android 开放式图片库

> ID：10552186
> 
> 赞同：0
> 
> 时间：2012-05-11T13:20:39.420
> 
> 标签：javascript, android, image, titanium, appcelerator

打开图片库时，有时应用程序会崩溃，有时则不会。它显示了一个 java 异常，但没有任何有意义的消息。

有人有想法吗？我也使用了意图，但无法让它发挥作用。

谢谢！

这是我的代码示例：

```
Here a sample of my code:
function openGallery() {
var popoverView;
var arrowDirection;

if(Titanium.Platform.osname == 'ipad') {
    // photogallery displays in a popover on the ipad and we
    // want to make it relative to our image with a left arrow
    arrowDirection = Ti.UI.iPad.POPOVER_ARROW_DIRECTION_LEFT;
    popoverView = imageView;
}
var image = undefined;
Titanium.Media.openPhotoGallery({

    success : function(event) {
        var cropRect = event.cropRect;
        image = event.media;

        // set image view
        Ti.API.debug('Our type was: ' + event.mediaType);
        if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
            addAttachment(image);
        } else {
            // is this necessary?
        }
    },
    cancel : function() {

    },
    error : function(error) {
    },
    allowEditing : true,
    saveToPhotoGallery : true,
    popoverView : popoverView,
    arrowDirection : arrowDirection,
    mediaTypes : [Ti.Media.MEDIA_TYPE_VIDEO, Ti.Media.MEDIA_TYPE_PHOTO]
   });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-22T05:06:01.230

```
var win = Titanium.UI.createWindow({
    title:"Accessing the photo album",
    backgroundColor:"#FFFFFF",
    exitOnClose:true
});

var button = Titanium.UI.createButton({
    title:"Open the photo gallery",
    width:180,
    height:48,
    bottom: 12,
    zIndex:2
});

button.addEventListener("click", function(e){
    //Open the photo gallery
    Titanium.Media.openPhotoGallery({
        //function to call upon successful load of the gallery
        success:function(e){
            //e.media represents the photo or video
            var imageView = Titanium.UI.createImageView({
                image:e.media,
                width:320,
                height:480,
                top:12,
                zIndex:1
            });

            win.add(imageView);
        },
        error:function(e){
            alert("There was an error");
        },
        cancel:function(e){
            alert("The photo gallery was cancelled");
        },
        //Allow editing of media before success
        allowEditing:true,
        //Media types to allow
        mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO]
        //The other is Titanium.Media.MEDIA_TYPE_VIDEO
    });
});

win.add(button);

win.open(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T10:28:45.593

当我从项目切换时，上述评论从未解决过这个问题。

# jquery - 页面加载时的随机图像（JQuery）

> ID：10552187
> 
> 赞同：0
> 
> 时间：2012-05-11T13:20:39.407
> 
> 标签：jquery, plugins

我发现了这个很棒的插件，它可以拉取随机图像并将其显示在一个 div 中。

Se作者链接，

[http://www.robwalshonline.com/posts/jquery-plugin-random-image-on-page-load/](http://www.robwalshonline.com/posts/jquery-plugin-random-image-on-page-load/)

我尝试在 wordpress 站点中使用它，但是当图像加载时它只显示文件名而不是图片... Se 链接（我放了一个丑陋的蓝色框只是为了显示图像应该在页面上显示的位置加载。该脚本仅在索引页面上激活。）

[http://libra-frisk.com/toveAlsterdal/](http://libra-frisk.com/toveAlsterdal/)

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:30:31.097

图像的 URI 错误。这就是为什么您只看到替代文本的原因。确保图像位于 /images 目录中。

# python - Python拆分url以查找图像名称和扩展名

> ID：10552188
> 
> 赞同：11
> 
> 时间：2012-05-11T13:20:43.570
> 
> 标签：python, django, file-io

我正在寻找一种使用 Python 从特定 url 中提取文件名和扩展名的方法

假设一个 URL 如下所示

```
picture_page = "http://distilleryimage2.instagram.com/da4ca3509a7b11e19e4a12313813ffc0_7.jpg" 
```

我将如何获得以下内容。

```
filename = "da4ca3509a7b11e19e4a12313813ffc0_7"
file_ext = ".jpg" 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-11T13:29:10.393

```
try:
    # Python 3
    from urllib.parse import urlparse
except ImportError:
    # Python 2
    from urlparse import urlparse
from os.path import splitext, basename

picture_page = "http://distilleryimage2.instagram.com/da4ca3509a7b11e19e4a12313813ffc0_7.jpg"
disassembled = urlparse(picture_page)
filename, file_ext = splitext(basename(disassembled.path)) 
```

唯一的缺点是您的文件名将包含前面的 / ，您可以随时将其删除。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-11T13:28:20.510

尝试使用[urlparse.urlsplit](http://docs.python.org/library/urlparse.html?highlight=split%20url#urlparse.urlsplit)拆分 url，然后使用[os.path.splitext](http://docs.python.org/library/os.path.html#os.path.splitext)检索文件名和扩展名（使用[os.path.basename](http://docs.python.org/library/os.path.html#os.path.basename)仅保留最后一个文件名）：

```
import urlparse
import os.path

picture_page = "http://distilleryimage2.instagram.com/da4ca3509a7b11e19e4a12313813ffc0_7.jpg"

print os.path.splitext(os.path.basename(urlparse.urlsplit(picture_page).path))

>>> ('da4ca3509a7b11e19e4a12313813ffc0_7', '.jpg') 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-11T13:27:37.343

```
filename = picture_page.split('/')[-1].split('.')[0]
file_ext = '.'+picture_page.split('.')[-1] 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-09-18T13:16:38.487

```
# Here's your link:
picture_page = "http://distilleryimage2.instagram.com/da4ca3509a7b11e19e4a12313813ffc0_7.jpg"

#Here's your filename and ext:
filename, ext = (picture_page.split('/')[-1].split('.')) 
```

当您执行 picture_page.split('/') 时，它会从您的 url 返回一个字符串列表，由`/`. 如果你很了解 python 列表索引，你就会知道 -1 会给你最后一个元素或列表末尾的第一个元素。在您的情况下，它将是文件名：`da4ca3509a7b11e19e4a12313813ffc0_7.jpg`

通过 demeter 拆分`.`，您会得到两个值： `da4ca3509a7b11e19e4a12313813ffc0_7`和`jpg`，正如预期的那样，因为它们由您在 split() 调用中用作分隔符的句点分隔。

现在，由于最后一次拆分在结果列表中返回两个值，您可以对其进行元组化。因此，基本上，结果将是：

`filename,ext = ('da4ca3509a7b11e19e4a12313813ffc0_7', 'jpg')`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-11T13:28:26.427

`os.path.splitext`从 URL 中提取相关字符串后，将帮助您提取文件名和扩展名`urlparse`：

```
 fName, ext = os.path.splitext('yourImage.jpg') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-21T09:06:57.757

这是使用正则表达式查找*图像名称*和*扩展名的***最简单方法。**

 **```
import re
import sys

picture_page = "http://distilleryimage2.instagram.com/da4ca3509a7b11e19e4a12313813ffc0_7.jpg"

regex = re.compile('(.*\/(?P<name>\w+)\.(?P<ext>\w+))')

print  regex.search(picture_page).group('name')
print  regex.search(picture_page).group('ext') 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-11T13:31:46.880

```
>>> import re
>>> s = 'picture_page = "http://distilleryimage2.instagram.com/da4ca3509a7b11e19e4a12313813ffc0_7.jpg"'
>>> re.findall(r'\/([a-zA-Z0-9_]*)\.[a-zA-Z]*\"$',s)[0]
'da4ca3509a7b11e19e4a12313813ffc0_7'
>>> re.findall(r'([a-zA-Z]*)\"$',s)[0]
'jpg' 
```**

# android - Android计时器自动运行方法

> ID：10552190
> 
> 赞同：0
> 
> 时间：2012-05-11T13:20:45.897
> 
> 标签：android

```
 Handler handler = new Handler(); 
    handler.postDelayed(new Runnable() { 
         public void run() { 
//                  runs a method every 2000ms
//       example    runThisEvery2seconds();
         } 
    }, 2000);         

} //end of OnCreate

public void runThisEvery2seconds()
{
    //code that runs every 2 seconds
    Toast.makeText(getBaseContext(), "Run from timer", Toast.LENGTH_SHORT);
} 
```

目前我已经尝试过了，但没有出现 Toast 消息。不知道你是否被允许这样做，但总的来说，如果我实际上在 runThisEvery2seconds() 中执行代码，除了 Toast，它会每 2 秒运行一次吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:22:23.023

`show()`确保在发送敬酒信息时致电。

```
Toast.makeText(getBaseContext(), "Run from timer", Toast.LENGTH_SHORT).show(); 
```

不，您的消息不会每 2 秒显示一次。 `postDelayed`在指定的延迟之后运行一次任务，但之后它就完成了。如果您想让任务按计划运行，请查看 Java 的[Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)或[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:22:55.470

你没有显示`Toast`.
调用`show`方法。

```
Toast.makeText(getBaseContext(), "Run from timer", Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:25:53.877

`.show()`吐司结束。

> Toast.makeText(getBaseContext(), "从计时器运行", Toast.LENGTH_SHORT).show();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-30T04:41:20.097

调用`show()`方法。

```
Toast.makeText(getBaseContext(), "Run from timer", Toast.LENGTH_SHORT).show(); 
```

# c# - 将委托方法存储为类的成员

> ID：10552193
> 
> 赞同：1
> 
> 时间：2012-05-11T13:20:59.260
> 
> 标签：c#, delegates

我正在进行编码的 ui 测试，基本上是 ui 的单元测试，并且我创建了一个`TestObject`类，该类存储要在实例化它的 TestMethod 中针对自身执行的断言列表。

```
public class TestObject {
    public string urlToTest;
    public List<Assertion> assertions;
}

public class Assertion {
    public List<SearchPropertyExpression> searchPropertyExpressions;
    public Action assertMethod;
    public string expectedValue; // <-- this works fine if I'll always call a method like AreEqual() where it has an expected value, but what if I want to store a method in assertMethod that has different arguments???
}

public class SearchPropertyExpression {
    public string expression;
    public string value;
} 
```

我想存储 assert 方法（例如：`Assert.AreEqaul(object expected, object actual)`我想对该特定方法执行`TestObject`并稍后调用它，但我正在努力获得语法正确的东西。我也在努力为该委托传递参数方法（`assertMethod`）实际调用时。我将调用的所有方法都在 内`Microsoft.VisualStudio.TestTools.UnitTesting.Assert`。在下面的示例中，我想调用`Assert.AreEqaul()`但可以调用具有不同参数的任何方法。这是我到目前为止所得到的......

```
[TestMethod]
public void uiTestConnectionsEducationHomePage() {
    //instantiate test object
    TestObject testObject = new TestObject() {
        urlToTest = "/example/home.aspx",
        assertions = {
            new Assertion() {
                searchPropertyExpressions = {
                    new SearchPropertyExpression() {
                        expression = HtmlDiv.PropertyNames.Id,
                        value = "header"
                    }
                },
                assertMethod = Assert.AreEqual // <-- this is wrong,I'm thinking I need to tell assertMethod what arguments to expect here, lambda??
            }
        }
    };

    // get handle to browser and launch
    UiBrowserWindow uiBrowserWindow = new UiBrowserWindow();
    uiBrowserWindow.launchUrl(testObject.urlToTest);

    // assertions
    testObject.assertions.ForEach(x => {
        HtmlDiv htmlObject = new HtmlDiv();
        x.searchPropertyExpressions.ForEach(p => {
            htmlObject = uiBrowserWindow.uiHtmlDocument.searchHtmlElementByAttributeValue<HtmlDiv>(p.expression, p.value);
        });
        x.assertMethod; // <-- for this is example the arguments would be (htmlObject, "header").                   
    });
} 
```

我认为我真正的问题是这里有一个设计模式可以真正帮助我，但我并不精通设计模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:27:31.880

您的`assertMethod`委托类型`Action`代表返回类型为 void 且没有参数的方法，例如`void Foo()`.
`Assert.AreEqual`有[很多重载](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assert.areequal%28v=vs.100%29.aspx)，最普遍的是`Assert.AreEqual(Object expected, Object actual)`。我建议您使用它并相应地更改您的委托：

```
Action<Object, Object> assertMethod; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:09:05.420

如果您希望您的委托指向任何方法定义，您可以执行以下操作：-

```
public delegate void MyAction(params object[] args);
public class Assertion
{
    public List<PropertyExpression> propertyExpressions;
    public MyAction assertMethod;
}
public void Test()
{
   var asser = new Assertion()
                    {
                        assertMethod = (vals) =>Assert.AreEqual(vals[0],vals[1]);
                        propertyExpressions = null
                    };
   var asser2 = new Assertion()
                    {
                        assertMethod = (vals)=>Assert.AreEqual((string)vals[0],(string)vals[1],(bool)vals[2]);
                        propertyExpressions = null
                    };

    asser.assertMethod(1, 1);//calling object,object overload
    asser2.assertMethod("ab", "cd", true);//calling string,string,bool overload
} 
```

# registry - Tomcat v6 上的 WSO2 治理注册表 v4.1.1

> ID：10552195
> 
> 赞同：0
> 
> 时间：2012-05-11T13:21:04.443
> 
> 标签：registry, wso2, tomcat6, wso2carbon

我是stackoverflow的新成员。

我尝试在 Tomcat 上部署 WSO2 Registry Governance v4.1.1。

为此，网上是否有教程：

[http://opensource-soa.blogspot.fr/2009/03/deploying-wso2-registry-on-tomcat.html](http://opensource-soa.blogspot.fr/2009/03/deploying-wso2-registry-on-tomcat.html)

当我完成他的步骤时，我有一个例外：

`java.lang.IllegalStateException: instance already set org.wso2.carbon.bridge.BridgeServlet.setInstance (BridgeServlet.java: 227)`

这对于 WSO2 Registry 2.0.1 来说已经过时了，并且项目的结构已经改变。

已经有人做过这个手术了？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:19:41.240

首先，您可以使用 Wso2 Governance Registry 产品，而无需像 tomcat 那样部署任何应用服务器。但是，如果您对在 tomcat 上部署有强烈要求，请参阅 wso2greg-4.1.1 的更新文档。

[1]http://wso2.org/project/carbon/3.2.2/docs/admin_guide.html#webappmode

谢谢阿吉思

# javascript - 使用日期选择器

> ID：10552201
> 
> 赞同：0
> 
> 时间：2012-05-11T13:21:36.813
> 
> 标签：javascript, jquery-ui

我想添加日期选择器，但它应该处于隐藏状态。点击 div 它应该显示 datepicker。就像在输入标签上一样。我曾尝试使用按钮文本和图标来显示它，但在没有输入字段的情况下无法显示它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-11T13:44:32.560

你可以这样做：

HTML：

```
<div id="control">Click for calendar</div>
<div id='dp'></div> 
```

JS/jQuery：

```
var cal = $('#dp').datepicker();
cal.hide();
$('#control').on('click', function() {
    if (cal.is(':hidden')) {
        cal.show();
    } else {
        cal.hide();
    }
});​​​​​​​​​​​ 
```

示例 jsFiddle：http: [//jsfiddle.net/aztechy/dpAWV/](http://jsfiddle.net/aztechy/dpAWV/)

# c++ - 如何覆盖我当前运行的可执行文件？

> ID：10552202
> 
> 赞同：3
> 
> 时间：2012-05-11T13:21:38.610
> 
> 标签：c++, windows

> **可能重复：**
> [在 Windows Vista 上覆盖 C:\Program\MyProg 中的可执行文件](https://stackoverflow.com/questions/427700/overwrite-executable-in-c-program-myprog-on-windows-vista)

我有一个用 C++ 编写的应用程序。它正在运行。我怎样才能让它覆盖它自己的exe文件，以便在下次启动时它会是一个新的exe？

有点像自动更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:40:48.463

在实践中没有这样做。通常做的是：

原程序：

1.  启动一个小的“更新程序”程序
2.  终止

更新程序：

1.  等待原件终止。
2.  将原件移开（例如重命名为“.old”）。
3.  将新版本移动到位。
4.  启动新版本。
5.  终止。

这要安全得多，因为在新版本到位之前，您不会吹走旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:41:10.360

1.  复制它。
2.  覆盖副本。
3.  在运行 prog 退出之前，创建一个低优先级进程，女巫可以使用副本替换原始进程。比如“自动删除”。

无论如何，这是一个解决方案。我希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:09:39.363

如果您可以控制正在运行的进程（它是您的程序并且您可以让它知道），您应该能够解锁它以便可以覆盖它，如果它不是您最好的选择是终止并重新启动它如上所述

# c# - 有没有办法在浏览器中检查重写的 URL

> ID：10552207
> 
> 赞同：1
> 
> 时间：2012-05-11T13:21:54.057
> 
> 标签：c#, asp.net, url-rewriting

在我的项目中，我不想向用户显示查询字符串值。对于那种情况，我在 asp.net 中使用了 URL 重写。所以我的网址如下所示。

> `http://localhost/test/default.aspx?id=1`

到

> `http://localhost/test/general.aspx`

第一个 URL 将被重写为第二个 URL，但它仍将使用该查询字符串值执行 default.aspx 页面。这工作正常。

但我的问题是，用户有什么方法可以在浏览器中找到原始 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:25:21.770

答案是不。

浏览器无法知道最终服务请求的实际脚本是什么——它只知道它发送到服务器的内容（除非服务器发出重定向，但随后浏览器会向重定向目标发出新请求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:30:30.373

由于 URL 重写需要传入请求并将其路由到不同的资源，我相信答案是肯定的。在您请求的网络流量中的某个地方，`http://localhost/test/default.aspx?id=1`它被重写为新的请求`http://localhost/test/general.aspx`。

虽然这可能会隐藏原始请求，使其无法在浏览器中显示，但在某些时候它确实将原始 URL 作为 HTTP GET 发送。

按照建议，使用 Firebug 或 Fiddler 来嗅探流量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:02:39.177

我想出了我的问题的答案。我们可以很容易地找到重写后的 url。如果我们在浏览器中看到该页面的视图源，那么我们可以看到带有查询字符串值的原始 url。

# php - 如何从dati.txt文件中抓取随机链接（示例500个链接取出5个）

> ID：10552218
> 
> 赞同：-1
> 
> 时间：2012-05-11T13:22:42.857
> 
> 标签：php

我想在第一页显示从 dati.txt 文件中随机选择的链接（从大约 1000 个链接中随机选择 5 个）：

```
<?php

$righe_msg = file("dati.txt");

$numero=0;
foreach($righe_msg as $riga)
{
    $dato = explode("|", trim($riga));

    if (trim($dato[5])=="yes")
    {
        $numero++;
        echo"<tr><td bgcolor='#EEEEEE'>&raquo; <a href='$dato[2]'> $dato[1]</a></td></tr> ";
    }
}

?> 
```

关于 dati.txt dati.txt 是这样制作的

```
date1.. |title1..|link1...|description1|email1|yes
date2.. |title2..|link2...|description2|email2|yes
date3.. |title3..|link3...|description3|email3|yes
date4.. |title4..|link4...|description4|email4|yes
date5.. |title5..|link5...|description5|email5|yes
date6.. |title6..|link6...|description6|email6|yes
.. 
```

但是，您如何使用以下代码获取例如（链接）：

```
$links = file("dati.txt");
$numLinks = count($links);
$tmp = array();
for ($i = 0; $i < min(5, $numLinks); $i++)
{
    $randomIndex = rand(0, $numLinks - 1);
    $randomLink = $links[$randomIndex];

    // Avoid duplicates:
    if (in_array($randomLink, $tmp))
    {
        $i--;
        continue;
    }
    $tmp[] = $randomLink;

    echo $randomLink;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:31:08.807

考虑每行 1 个链接：

```
$links = file("dati.txt");
$numLinks = count($links);
$randomIndex = rand(0, $numLinks - 1);
$randomLink = $links[$randomIndex];
echo $randomLink; 
```

获取更多链接只是一个循环问题：

```
$links = file("dati.txt");
$numLinks = count($links);
$tmp = array();
for ($i = 0; $i < min(5, $numLinks); $i++)
{
    $randomIndex = rand(0, $numLinks - 1);
    $randomLink = $links[$randomIndex];

    // Avoid duplicates:
    if (in_array($randomLink, $tmp))
    {
        $i--;
        continue;
    }
    $tmp[] = $randomLink;

    echo $randomLink;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:32:57.210

```
<?php

  $links = file('links.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

  // used this for testing (generated from a file with one link each line (+carriage return)
  //$links = ARRAY('foo 1','foo 2','foo 3','foo 4','foo 5','foo 6','foo 7','foo 8','foo 9','foo 10','foo 11','foo 12');

  $amount = 3;

  shuffle($links);

  $rand_list = array_slice($links, 0, $amount);

  foreach ($rand_list AS $key => $link) {
    print $link.'</br>';
  }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:31:04.947

```
$righe_msg = file("dati.txt");
$num = 5;
$selected = array();     
while (count($selected)!=$num)
{
   $rand = rand(0,count($righe_msg)-1);
   $selected[$rand] = $righe_msg[$rand];
}
$numero=0;  
foreach ($selected as $sel)
{
   $dato = explode("|", trim($sel));

    if (trim($dato[5])=="yes")
    {
        $numero++;
        echo"<tr><td bgcolor='#EEEEEE'>&raquo; <a href='$dato[2]'> $dato[1]</a></td></tr> ";
    }
} 
```

# ruby-on-rails - Rails ActiveRecord 似乎忽略了模型错误

> ID：10552226
> 
> 赞同：0
> 
> 时间：2012-05-11T13:23:27.623
> 
> 标签：ruby-on-rails, attributes, rails-activerecord, assign

我有以下模型和关联：

> 状态 has_many :transactions, foreign_key: :transtatusid
> 
> 事务属于_to :status, foreign_key: :transstatusid

我有一个交易记录 t1 和一个状态记录 s3。我的意思是执行以下操作：

```
 t1.transtatusid = s3.id
 t1.save 
```

但是我却错误地这样做了

```
 t1.transtatusid = s3
 t1.save 
```

问题是 Rails 没有抱怨。它只是忽略了分配。

它应该抱怨吗？如果不是，为什么不呢？

我使用 MySQL 的 Rails3.2.1 和 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:19:34.517

据我所知，Rails 将忽略保存时的错误并继续使用对象的旧状态。如果要引发异常，则必须使用 save! 反而。之后，您可以使用错误消息、闪存消息或类似消息从引发的错误中解救出来。

# android - 从 MacBook 安装 APK 后设备连接丢失

> ID：10552231
> 
> 赞同：1
> 
> 时间：2012-05-11T13:23:42.137
> 
> 标签：android, macos, apk, adb

我的 MacBook Pro 遇到问题。我在插入设备的情况下输入“adb devices”，我可以看到它列在那里。但是，当我使用“adb install”安装应用程序时，连接会断开。这在 Android SDK 和 Eclipse 中都会发生。当我在 Eclipse 中启动它时，我得到了这个异常：

```
[2012-05-11 08:12:34 - Unexpected error while launching logcat. Try reselecting the device.] device not found
com.android.ddmlib.AdbCommandRejectedException: device not found
    at com.android.ddmlib.AdbHelper.setDevice(AdbHelper.java:752)
    at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:373)
    at com.android.ddmlib.Device.executeShellCommand(Device.java:397)
    at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:102)
    at java.lang.Thread.run(Thread.java:680) 
```

我拔下设备并重新连接它，直到我尝试运行应用程序时它才会显示。

这个问题似乎没有发生在我的 Windows 机器上。

（我在 Macbook 上没有网络共享功能，并且在我的 Android 设备上已禁用）

# vba - 没有更多引用时如何关闭加载项？

> ID：10552238
> 
> 赞同：1
> 
> 时间：2012-05-11T13:23:59.313
> 
> 标签：vba, excel

我正在 Excel VBA 中编写一组简单的模块化加载项。

在`Addin1.xlam`中，我选择了“工具..参考”并添加`MyMenus.xlam`为参考。

`Addin1`还有一些代码可以从菜单中关闭自己。但是当`Addin1`关闭时，`MyMenus`保持打开状态，即使它不再需要或被任何东西引用。

我也可能有`Addin2`或`Addin3`参考`MyMenus`。

当没有其他打开的项目对它有引用时，如何`MyMenus`自动关闭？

或者，我怎么能告诉`Addin1`“关闭，也关闭我有参考的任何东西”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T17:32:18.153

我以不同的方式解决了这个问题，因为用户不断地保存工作表并破坏参考。这有点像 hack，但 Excel VBA 中不是什么？

```
Public Sub CloseYourself()
    Application.OnTime Now + TimeValue("00:00:00"), "CloseYourselfNow"
End Sub

Private Sub CloseYourselfNow()
    On Error Resume Next
    ThisWorkbook.Close False
End Sub 
```

基本上，您在 Workbook_BeforeClose 事件中调用 CloseYourself，该事件将 CloseYourselfNow 安排为从现在起 0 秒（Excel 的这部分是单线程的，因此它等待原始工作簿关闭）。到 CloseYourselfNow 运行时，引用将被删除，插件可以自行关闭。如果其他静止的工作簿有参考，您需要 On Error Resume Next。最后，您可以将 False 更改为仅在您的开发机器上为 true 的某些检查 - 例如 Environ("COMPUTERNAME") - 这样它会保存插件并且您不会丢失开发更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:30:49.297

保持`MyMenus`加载项打开会导致任何问题吗？像这样的引用通常会因为您描述的原因而保持打开状态，即以防它在其他地方引用。我建议保持原样，但如果您确实要继续，则需要分两步完成：首先从第一个加载项 ( `Addin1.xlam`) 中删除引用，然后关闭第二个加载项 ( `MyMenus.xlam`)。像这样的东西应该工作：

```
Dim objRef As Reference

Set objRef = ThisWorkbook.VBProject.References("MyMenus")

Call ThisWorkbook.VBProject.References.Remove(objRef)

'Do not raise an exception as may not be able to close if the add-in is referenced elsewhere
On Error Resume Next
Call Workbooks("MyMenus.xlam").Close(False)
On Error Goto 0 
```

请注意，我已将`Microsoft Visual Basic for Applications Extensibility`引用添加到项目中（或者仅声明`objRef`为变体）。

当您 finally then close`AddIn1.xlam`时，请确保您在没有保存的情况下这样做，否则您将永久丢失参考。

# python - 寻找一个 Django nag 系统

> ID：10552242
> 
> 赞同：3
> 
> 时间：2012-05-11T13:24:19.680
> 
> 标签：python, django

我有一个 Django 应用程序。我已经以一种相当手动的方式实现了一些“nag”框，我现在正在为这些 nag 寻找一个专用的模块/框架。

**“唠叨”是什么意思？**这些是显示在网站每个页面顶部附近的小框，类似于 Django 的内置`messages`，告诉用户需要他注意的事情。例如，如果用户的信用卡即将到期，我们需要显示“您的信用卡即将到期，请点击此处输入新卡”的唠叨。如果最近的信用卡收费失败，我们需要显示一个唠叨。如果他没有验证他的电子邮件地址，我们需要显示一个唠叨。

为什么不使用内置`messages`框架？因为这些唠叨与消息有点不同。消息显示一次，然后被清除，而 nags 应该每次都显示在用户访问的网站的每个页面上。Nags 应该有一个“关闭”按钮，该按钮实际上将用作“打盹”按钮，导致消息在指定的时间段内不显示，例如 24 小时。

有没有人实施过这样的事情？一个框架，我可以在其中创建这些唠叨，指定它们出现的条件，它们的打盹能力，以及可能的更多功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:59:07.340

您可以通过在 cookie 中添加那些烦人的消息并在每次页面加载时显示它们来在客户端执行此操作。使用将删除 cookie 的关闭函数处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:41:29.610

如果您需要实时执行此操作 - 换句话说，用户无需刷新即可获取您的 nag 框 - 使用信号 + [ajax 推送引擎 (ape)](http://www.ape-project.org/wiki/index.php/Main)的组合 并为实际小部件添加[jquery](http://www.erichynds.com/jquery/a-jquery-ui-growl-ubuntu-notification-widget/)。

Josh Wright[写了一篇](http://www.alittletothewright.com/index.php/2010/01/apedjango-and-signals/)关于如何将所有这些连接在一起的文章。

# axapta - Dynamics AX MorphX WMSPickingList 报表

> ID：10552245
> 
> 赞同：0
> 
> 时间：2012-05-11T13:24:25.350
> 
> 标签：axapta, microsoft-dynamics, ax

我正在尝试修改 Dynamics AX 2009 中的 WMSPickingList_OrderPick 报告。

我正在尝试将 InventDim 组移动到与实际项目行相同的行上，因为它当前打印在下面。

我尝试手动移动字段，在这种情况下没有数据出现。我已经尝试切换参数，以便项目尺寸出现在项目编号之后或项目编号的一部分，在这种情况下，它仍然出现在下方。我还尝试简单地获取 Fetch 语句中的值并将它们传递给变量，我可以看到正在获取的值但是在显示方法中返回它们时没有数据出现？

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:11:29.720

转到应收账款 > 设置 > 表单 > 表单设置 在“常规”选项卡 >“打印项目尺寸”组中，选择“打印项目尺寸”作为“项目编号后”我假设它当前设置为“项目行下” "

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T10:07:19.777

WMSPickingList_OrderPick 报告的问题是设计的宽度，设计没有足够的宽度来打印库存尺寸，当您将它们放在同一行时它们不会出现，因为列重叠。然而，一个非常干净的解决方案是使用 Display 方法作为 Item ID（即项目编号）的数据源，并在该显示方法中仅附加维度。

# hibernate - 如何在休眠中使用复合键进行一对一映射

> ID：10552249
> 
> 赞同：1
> 
> 时间：2012-05-11T13:24:39.470
> 
> 标签：hibernate

我有三张桌子。一个学生可以注册多个课程。

**学生** RollNumber 整数，StudentName 字符串

**课程** CourseID 整数，课程名称字符串

**StudentCourses** RollNumber 整数、CourseID 整数、AllotedRoom 整数

**学生.hbm.xml**

```
<hibernate-mapping>
  <class name="myPackage.Student" table="STUDENT">
        <id name="ROLLNUMBER" type="integer">
            <column name="ROLLNUMBER" />
        </id>

        <property name="STUDENTNAME" type="string">
            <column name="STUDENTNAME"/>
        </property>
  </class>
</hibernate-mapping> 
```

**课程.hbm.xml**

```
<hibernate-mapping>
  <class name="myPackage.Course" table="COURSE">
        <id name="COURSEID" type="integer">
            <column name="COURSEID" />
        </id>

        <property name="COURSENAME" type="string">
            <column name="COURSENAME"/>
        </property>
  </class>
</hibernate-mapping> 
```

**学生课程.hbm.xml**

```
<hibernate-mapping>
  <class name="myPackage.StudentCourses" table="STUDENTCOURSES">
        <composite-id name="STUDENTCOURSES_pk" class="myPackage.STUDENTCOURSES_PK">
             <key-property name="STUDENTID" column="STUDENTID"/>
             <key-property name="COURSEID" column="COURSEID"/>
        </composite-id>

        <property name="ALLOTEDROOM" type="integer">
            <column name="ALLOTEDROOM"/>
        </property>
  </class>
</hibernate-mapping> 
```

对于在 StudentCourses 表中选择的任何记录，我想获取学生姓名和课程名称。我的映射文件应该如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:18:48.623

在您的学生课程中使用多对一，您可以指定链接的课程。所以那将是

```
<many-to-one name="Student"
                column="studentid"
                update="false" insert="false"/> 
```

在 Java studentcourse 类中，您可以指定 Student 对象并`studentcourse.student.studentname`在查询中检索名称。BTW StudentCourse 通常是一个类，因此您可能想要更改该名称。

# c# - COM Dll 的 C# .Net 包装器

> ID：10552250
> 
> 赞同：0
> 
> 时间：2012-05-11T13:24:41.380
> 
> 标签：c#, asp.net-mvc, web-services, design-patterns, com-interop

我们的新应用程序 1) Web 应用程序 (MVC3) 2) Web 服务需要通过互操作与我们基于 COM 的业务层进行通信

我们计划在 .Net 中为业务层创建一个包装器，以将 COM dll 从上述 2 中分离出来，以便我们有一个地方（包装器）来进行任何增强或完全将 COM 替换为其他东西。

```
 For eg: if there is a COMClassA and ICOMClassA. create a new WrapperClassA in .Net which will essentially have an instance of the COMClassA and required properties. 
```

在 Web 应用程序和 Web 服务中使用 WrapperClassA

我的问题 1）这是正确的方法吗？2) 如果是这样，创建 .Net Wrapper 的最佳方法是什么。
COM dll 有大约 100 多个类和相应的接口。任何代码生成技术？
3）我们可以使用一些设计模式来最小化代码生成还是有任何其他替代方案来解耦基于 COM 的业务层

请注意：我们不想在 ASP .Net 应用程序中创建 Web 服务和消费，因为我们认为可能存在相当大的性能问题。

任何帮助将不胜感激。Stackoverflow 社区你做得很好。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:44:31.577

大卫惠勒 -

> 计算机科学中的任何问题都可以通过另一层间接来解决。

我同意您问题中的以下陈述：

> 我们计划在 .Net 中为业务层创建一个包装器，以将 COM dll 从上述 2 中分离出来，以便我们有一个地方（包装器）来进行任何增强或完全将 COM 替换为其他东西。

这使您可以“挑选”您的问题区域、重写区域或保留区域。我几乎可以保证你的 COM 组件中至少有一个执行了一些黑魔法……五年前由某个前顾问或前雇员写的……哈哈

不幸的是，据我所知，您将不得不手动编码/设计您的间接层（或层）。但是，一些 VS.NET（以及 Resharper 和 CodeRush）重构/自动生成方法会对您有所帮助。但归根结底，**您**比任何人（或任何工具）都更了解您的产品（和设计）。

# ruby - Ruby 中的复合蛮力/进化引擎搜索

> ID：10552251
> 
> 赞同：0
> 
> 时间：2012-05-11T13:24:44.430
> 
> 标签：ruby, computer-science

关于我一直在思考的一个主题的问题。是否可以在蛮力搜索或进化编程中使用复合过程？我目前正在自己​​做这件事，尽管事实证明这很困难。

前提是应该可以使用类似于在普通储蓄账户中确定复利的方式的复利过程。

我一直在尝试通过以下方式实现进化算法。

A 具有生成新系统的能力并且具有 5.0 的“生成”适应度（即，它生成的系统的有效性是 A 本身的 5 倍） - 如果 A 生成 B，然后 B 生成 C，则系统的适应度 (有机体）应该这样复合

A = 5.0

B = 5.0 * A = 25.0

C = 25.0 * B = 625.0

任何人都可以协助在代码中实现这个启发式吗？（红宝石或伪代码）

我现在拥有的是这样的

我有一个名为 system 的类，它有一个生成随机数的方法，我想发展新系统，能够更好地生成与第二个生成的随机数匹配的随机数。成功将第二个生成的随机数与其“预测”（第一个随机数）匹配的系统将提高分数，不成功的系统将降低分数。

然后这些系统产生“子”系统，它们也以刚才提到的方式进行测试，尽管在这里我们利用子系统的适应度作为产卵系统的“产卵”适应度。这让我知道哪些“系统”产生了成功的系统。

虽然我可以很容易地确定哪些系统最擅长生成可以预测随机生成的数字的系统，但我不确定如何评估生成系统的生成系统（生成系统）的能力，并且由于这条链继续我相信适应度的确定可能是递归的。

最后，由于系统“适合度”的最终确定将取决于所生成系统的预测能力，那么“产卵”适合度因子如何复合到方程中？

此外，如果我进化出一个与 ruby​​ 使用的 PRNG 匹配的 PRNG，那么 PRNG 将逐步进化以匹配 ruby​​ 底层算法中的 PRNG。请不要这样，在时间 1，我们有一条来自我们试图预测的 PRNG 的信息，这为我们提供了那个时间步长的 1/1 或 100% 模型。如果我们然后在时间步二检索第二条信息，我们在时间步二的信息比时间步二之前的信息多 100%，因此预测能力应该是 200%（时间步二为 100%，额外信息为 0，100 % 在时间步二的额外信息，留下原始系统两倍的预测能力。

感谢您花时间阅读我的问题，如果您能以任何方式提供帮助，我将不胜感激。

如果您有任何问题，请告诉我

提前致谢

问候

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:53:38.597

我认为您无法使用搜索算法来做到这一点，因为您无法知道匹配随机数生成算法有多“接近”。接近随机数的值更有可能是巧合，而不是实际证明您越来越接近底层算法。

如果您将此作为玩具项目进行，请使用可以为其创建适应度函数的数据集（如果是进化编程）。常见的数据集有垃圾邮件检测、图像识别、用户偏好等。

# vim - 如何缩进 2 个字符并使 shiftwidth 不变为 1 个字符？

> ID：10552254
> 
> 赞同：1
> 
> 时间：2012-05-11T13:25:07.340
> 
> 标签：vim, indentation

我注意到***shiftwidth***用于缩进文本。

这是我在 _vimrc 中的 shiftwidth 设置：

```
set shiftwidth=1 
```

我不想改变它。我将它用于其他功能。

但是......我想***缩进***2个这样的空格：

```
--function-myfunction()
----1st-block
------2nd-block
--------3rd-block
--------end3rd-block
------end2nd-block
----end1st-block
--endfunction

- = 1 space 
```

这可能吗？

这是我在 _vimrc 中的缩进设置：

```
set autoindent  
set cindent  
set cinkeys=!^F 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:49:46.373

`setlocal`例如，您可以：

```
:setl sw=2 
```

它不会更改全局设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T23:19:49.257

这不是一个非常优雅的解决方案。但是您可以将它添加到您的 .vimrc 中并用于`,>>`向右缩进 2。`>>`仍然应该缩进您期望的正常 (1)。

```
com! SpecialIndent call SpecialInd()
nmap <silent> ,>> :SpecialInd<CR>
function! SpecialInd(...)
    let s:special_indent=&sw
    setl sw=2
    silent exec "normal! >>"
    silent exec "setl sw=".s:special_indent
endfunction 
```

# c++ - 枚举类型参数的专门成员模板

> ID：10552255
> 
> 赞同：2
> 
> 时间：2012-05-11T13:25:11.863
> 
> 标签：c++, templates, template-specialization

在下面的代码中，`Foo<T>::setValue`对于我的目的来说效果很好，除非在 where`T`是一个名为`TYPE`eg`Bar::TYPE`和的类枚举`Baz:TYPE`。

`Foo<T>::setValue`因此，如果没有命名`Bar`and ，我会很感激专业帮助`Baz`，因为可能有几十个这样的类。

```
class Bar
{
public:
    enum TYPE{ ONE , TWO };
};

class Baz
{
public:
    enum TYPE{ SIX , TEN };
};

template<typename T>
class Foo
{
public:
    void setValue(){} // Need a different setValue if T is a class enum

private:
    T m_value;
};

int main()
{
    Foo<int> f1;
    Foo<Bar::TYPE> f2;
    Foo<Baz::TYPE> f3; 
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T13:51:44.210

你可以这样做：

```
#include <type_traits>

template<typename T>
class Foo
{
public:
    void setValue() {
      setValueImpl<T>();
    }
private:
    template <class X>
    typename std::enable_if<std::is_enum<X>::value, void>::type
    setValueImpl() { std::cout << "Is enum" << std::endl; }

    template <class X>
    typename std::enable_if<!std::is_enum<X>::value, void>::type
    setValueImpl() { std::cout << "Not enum" << std::endl; } 

    T m_value;
}; 
```

Where`enable_if`根据`is_enum`类型特征选择要使用的版本。

该示例使用了 C++11 `enable_if`，`is_enum`但是对于 pre-C++11，boost 也有类似的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:46:29.127

考虑一下：

```
#include <iostream>

class Bar
{
public:
    enum TYPE{ ONE , TWO };
};

class Baz
{
public:
    enum TYPE{ SIX , TEN };
};

template<typename T>
class Foo
{
public:
    template<typename C> void setValue(const C &m_value, ...) 
    {
        std::cout << "normal" << std::endl;
    }

    template<typename C> void setValue(const C &m_value, typename C::TYPE fake = C::TYPE()) 
    {
        std::cout << "TYPE'ed" << std::endl;
    }

private:
    T m_value;
};

int main()
{
    Foo<int> f1;
    Foo<Bar> f2;
    Foo<Baz> f3; 

    f1.setValue(1);
    f2.setValue(Bar());
    f3.setValue(Baz());

    return 0;
} 
```

# sed - 使用 awk 或 sed 根据另一个文件中的最后一个字符从文本文件中删除行

> ID：10552256
> 
> 赞同：0
> 
> 时间：2012-05-11T13:25:20.010
> 
> 标签：sed, awk

我有一个文件，xx.txt，像这样。

```
 1PPYA
 2PPYB
 1GBND
 1CVHA 
```

该文件的第一行是“1PPYA”。我想

1.  读“1PPYA”的最后一个字符。在这个例子中，它是“A/”
2.  从“yy”目录中找到“1PPY.txt”（前四个字符）。
3.  删除以“csh”开头的包含“A”字符的行。

给定“yy”目录中的以下“1PPY.txt”：

```
 csh    1      A   1      27.704   6.347   
 csh    2      A   1      28.832   5.553  
 csh    3      A   1      28.324   4.589 
 csh    4      B   1      27.506   3.695  
 csh    5      C   1      29.411   4.842 
 csh    6      A   1      28.378   4.899 
```

所需的输出将是：

```
csh  4      B   1      27.506   3.695
csh  5      C   1      29.411   4.842 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:12:47.847

假设你的 shell 是 bash

```
while read word; do
    if [[ $word =~ ^(....)(.)$ ]]; then
        filename="yy/${BASH_REMATCH[1]}.txt"
        letter=${BASH_REMATCH[2]} 
        if [[ -f "$filename" ]]; then
            sed "/^csh.*$letter/d" "$filename"
        fi
    fi
done < xx.txt 
```

正如你用 awk 标记的问题：

```
awk '{
    filename = "yy/" substr($1,1,4) ".txt"
    letter = substr($1,5)
    while (getline < filename) 
        if (! match($0, "^csh.*" letter)) 
            print
    close(filename)
}' xx.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:37:15.377

您可以使用此 bash 脚本：

```
while read f l
do
   [[ -f $f ]] && awk -v l=$l '$3 != l' $f
done < <(awk '{len=length($0);l=substr($0,len);f=substr($0,0,len-1);print "yy/" f ".txt", l;}' xx.txt) 
```

我发布此内容是因为您是新用户，但是最好向我们展示您尝试过的内容以及遇到的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:08:34.017

这可能对您有用：

```
 sed 's|^ *\(.*\)\(.\)$|sed -i.bak "/^ *csh.*\2/d" yy/\1.txt|' xx.txt | sh 
```

注意我添加了文件备份。如果不需要，`-i.bak`请修改`-i`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T16:41:35.610

发射器：

```
@(next "xx.txt")
@(collect)
@*prefix@{suffix /./}
@  (next `yy/@prefix.txt`)
@  (collect)
@    (all)
@{whole-line}
@    (and)
@      (none)
@shell @num @suffix @(skip)
@      (end)
@    (end)
@  (do (put-string whole-line) (put-string "\n"))
@  (end)
@(end) 
```

跑：

```
$ txr del.txr
csh    4      B   1      27.506   3.695  
csh    5      C   1      29.411   4.842 
txr: unhandled exception of type file_error:
txr: (del.txr:5) could not open yy/2PPY.txt (error 2/No such file or directory) 
```

由于外部`@(collect)/@(end)`（很容易删除），它处理来自 的所有行`xx.txt`，而不仅仅是第一行，所以它爆炸了，因为我没有`2PPY.txt`.

# php - 通过java脚本设置多个县的时钟

> ID：10552259
> 
> 赞同：0
> 
> 时间：2012-05-11T13:25:25.017
> 
> 标签：php, javascript, jquery

我想通过 JavaScript 设置多个国家的时钟：

例子 ：

```
 U.S.A      India      Australia    Spain    
     10:20:23   15:32:23   19:36:41     15:63:20 
```

我想在页面中设置这个时钟。

我在我的页面中使用 PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:13:19.827

好处应该是每个国家/地区创建一个 Date 对象，并且创建一次。我不确定 php 代码应该是什么 - 要么使用服务器提供的时间并添加/减去时间，要么[在此处查看](http://www.kloth.net/software/timesrv1.php)如何从时间服务器获取时间。

html:

```
<div id="spain"></div>
<div id="jamaica"></div>​ 
```

js：

```
function zeroLead(i) { return i < 10 ? ("0" + i) : i; }
function start ( dateStr, where ) {
    var today = new Date ( dateStr );
    return function() {
        document.getElementById(where).innerHTML =
        zeroLead ( today.getHours()   ) + ":" +
        zeroLead ( today.getMinutes() ) + ":" +
        zeroLead ( today.getSeconds() );
        today.setMilliseconds ( 1001 );
    }
}

// here you set date with php
// date("F j, Y G:i:s");
var Spain = start   ( "May 11, 2012 21:13:00", "spain"   );
var Jamaica = start ( "May 11, 2012 21:43:00", "jamaica" );

setInterval( Spain,   1000 );
setInterval( Jamaica, 1000 );​ 
```

[Jsfiddle 演示](http://jsfiddle.net/dgSLr/)和使用 php 的[现场演示。](http://zdravko.genov.me/demo/Multiple-clocks.php)

# apache-camel - 挂起 ActiveMQ 传输和连接线程

> ID：10552260
> 
> 赞同：4
> 
> 时间：2012-05-11T13:25:38.027
> 
> 标签：apache-camel, activemq, apache-servicemix

我在 Apache ServiceMix 上部署了一个 Web 服务，它使用 Apache Camel 使用类似于以下的代码调用 ActiveMQ 驱动的路由：

```
 context.createProducerTemplate().sendBody("activemq:startComplex", xml); 
```

调用工作正常，但一段时间后，我的 Linux 机器上的文件描述符限制被击中。这些资源被一大堆（几千个）ActiveMQ 线程吃掉了。在 jmx 控制台下我可以看到很多类似于以下的线程：

```
Name: ActiveMQ Transport: tcp://localhost/127.0.0.1:61616
State: RUNNABLE
Total blocked: 0  Total waited: 0

Stack trace: 
 java.net.SocketInputStream.socketRead0(Native Method)
java.net.SocketInputStream.read(SocketInputStream.java:129)
org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill(TcpBufferedInputStream.java:5    0)
org.apache.activemq.transport.tcp.TcpTransport$2.fill(TcpTransport.java:589)
org.apache.activemq.transport.tcp.TcpBufferedInputStream.read(TcpBufferedInputStream.java:5    8)
org.apache.activemq.transport.tcp.TcpTransport$2.read(TcpTransport.java:574)
java.io.DataInputStream.readInt(DataInputStream.java:370)
org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:275)
org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:222)
org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:214)
org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:197)
java.lang.Thread.run(Thread.java:662) 
```

和

```
Name: ActiveMQ Transport: tcp:///127.0.0.1:46420
State: RUNNABLE
Total blocked: 0  Total waited: 2

Stack trace: 
 java.net.SocketInputStream.socketRead0(Native Method)
java.net.SocketInputStream.read(SocketInputStream.java:129)
org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill(TcpBufferedInputStream.java:50)
org.apache.activemq.transport.tcp.TcpTransport$2.fill(TcpTransport.java:589)
org.apache.activemq.transport.tcp.TcpBufferedInputStream.read(TcpBufferedInputStream.java:58)
org.apache.activemq.transport.tcp.TcpTransport$2.read(TcpTransport.java:574)
java.io.DataInputStream.readInt(DataInputStream.java:370)
org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:275)
org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:222)
org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:214)
org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:197)
java.lang.Thread.run(Thread.java:662) 
```

以及如何摆脱挂线的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:06:00.560

请参阅此常见问题解答 [http://camel.apache.org/why-does-camel-use-too-many-threads-with-producertemplate.html](http://camel.apache.org/why-does-camel-use-too-many-threads-with-producertemplate.html)

您不应在每次发送消息时都创建新的生产者模板。如果这样做，请记住在使用后将其关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:20:24.387

通过放弃对 ProducerTemplate 和 ConsumerTemplate 的所有使用，我设法摆脱了线程泄漏问题。

我现在使用标准 JMS API 来发送和接收来自 ActiveMQ 的消息。

# ios - 选择单元格时 UITableViewCell 的图像发生变化

> ID：10552263
> 
> 赞同：0
> 
> 时间：2012-05-11T13:25:56.373
> 
> 标签：ios, uitableview

I have an `UIImageView`set as the background to a custom cell (prototype cell) .How can I change the image in the image view , when the cell is selected?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:00:58.403

如果您想在单元格选择中更改 imageview 的图像，那么您需要在 tableview 的委托方法中执行此操作：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{} 
```

如果您有一个自定义单元格并将其背景设置为图像视图，那么您还必须在自定义单元格的类中创建其属性，并通过上述委托中的该属性更改图像视图的图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:02:05.647

您是否尝试过属性 highlightImage ？

# parallel-processing - 使用 Sun Grid Engine 为 SMP 作业保留整个节点？

> ID：10552265
> 
> 赞同：1
> 
> 时间：2012-05-11T13:26:04.040
> 
> 标签：parallel-processing, sungridengine

我有一个使用 Sun Grid Engine 在 SMP 并行环境中运行的工作。这段代码很好用，通常可以正常工作。代码比处理器密集型更占用内存，所以我通常使用 -pe smp 12 在我们的集群上保留整个节点（我们有 12 个核心/节点），即使作业本身（在提交的脚本中指定）只使用一小部分那个。

因为我要求的是 SMP 并行环境，所有 12 个插槽都应该来自同一个节点，并且应该有 1 个插槽/核心，对吗？因此，这应该保留整个节点。直到最近，它为此目的工作得很好。另一个用户提交了一个作业，该作业以某种方式在同一节点上获得了槽，最近也使用了网格引擎。我不确定这是怎么发生的。Grid Engine 是否会以少于请求的插槽数来启动我的 SMP 作业？如果没有，是否有更好的方法来确保我的作业保留整个节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:13:40.280

我想到了。第二个作业被错误地提交到包含所有核心的默认“全部”队列。

# javascript - Greasemonkey Userscript 在 Java 脚本中更改/设置变量

> ID：10552267
> 
> 赞同：0
> 
> 时间：2012-05-11T13:26:04.507
> 
> 标签：javascript, greasemonkey

我不知道这是否可能，但我想更改/设置由网络浏览器加载的值。

在此脚本标记中，设置了变量：

```
<script>
Current.set('username','tomi');
Current.set('user_id','1234');

</script> 
```

我尝试了这样的事情，显然并且正如预期的那样，以下代码行不起作用：

```
unsafeWindow.Current.set('username', 'myname');
unsafeWindow.Current.set('user_id', '1111'); 
```

我怎样才能操纵这样的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:17:03.057

可能有一种更简单的方法，具体取决于实际的目标页面（指向它的链接）以及您要执行的操作。但是，您始终可以使用[checkForBadJavascripts 实用程序](https://gist.github.com/2620135)。只需将您的脚本设置[为在 document-start 运行](http://wiki.greasespot.net/Metadata_Block#.40run-at)。

请参阅[此答案](https://stackoverflow.com/a/10468821/331508)和[此答案](https://stackoverflow.com/a/10472570/331508)。

在这种情况下，您可以这样调用`checkForBadJavascripts()`：

```
function changeUser () {
    Current.set('username', 'myname');
    Current.set('user_id', '1111');

    // ...
}

checkForBadJavascripts ( [
    [   false, 
        /username[\'\", ]+tomi/, 
        function () {addJS_Node (null, null, changeUser);} 
    ]
] );

*COPY checkForBadJavascripts.js contents here.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:28:09.370

你不能。Greasemonkey 脚本在所有其他脚本和页面加载之后执行。

# powershell - WMI - 使用非管理员帐户查询服务器

> ID：10552268
> 
> 赞同：2
> 
> 时间：2012-05-11T13:26:05.217
> 
> 标签：powershell, wmi, wmi-query

我想使用 PowerShell 从 Windows 2008 R2 Server 收集性能数据。对于此任务，我想使用非管理员帐户。我现在的问题是，我要返回一个空对象（$WMIService）。执行脚本时没有错误消息。当我使用具有管理员权限的帐户时，一切都很完美。所以我认为，非管理员帐户缺少权限。

我该如何解决我的问题？

我对 WMIService 帐户的配置：

*   启用远程 WMI 请求[technet](http://technet.microsoft.com/en-us/library/cc787533%28v=ws.10%29.aspx)
*   启用 DCOM 调用[msdn](http://msdn.microsoft.com/en-us/library/Aa393266.aspx)

我的脚本：

```
$ServiceCred = Get-Credential
$AdminCred= Get-Credential

$WMIService = Get-WmiObject -Class Win32_PerfFormattedData_PerfOS_Memory  -ComputerName servername -Credential $ServiceCred
$WMIAdmin = Get-WmiObject -Class Win32_PerfFormattedData_PerfOS_Memory  -ComputerName servername -Credential $AdminCred

$WMIService (Empty)
$WMIAdmin (Perfect) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:46:56.660

解决了！该用户还必须在 Performance Monitor Users 组中。

我的工作配置：

*   启用远程 WMI 请求 technet
*   启用 DCOM 调用 msdn
*   将帐户添加到**性能监视器用户**组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:10:01.597

您应该为您的非管理员帐户设置[适当的权限。](http://technet.microsoft.com/en-us/library/cc771551.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:06:40.367

看看[这个](http://www.poweradmin.com/help/enableWMI.aspx)指南，它可能会有所帮助。确保您在用户配置中启用了*远程启用*。

# asp.net - 在 asp.net 中更新缓存的用户控件

> ID：10552278
> 
> 赞同：1
> 
> 时间：2012-05-11T13:26:49.917
> 
> 标签：asp.net, user-controls, fragment-caching

我的页面上有一个用户控件来显示登录用户的个人资料图片。我已经使用`<%@ OutputCache Duration="120" VaryByParam="none" %>`.

我在这里遇到一个问题，即当我注销当前登录用户并以其他用户身份登录时，个人资料图片用户控件没有刷新，它仍然显示以前登录用户的图片。

当用户注销和另一个用户登录后用户控件刷新时，有人可以帮我解决这个问题吗？

任何帮助将不胜感激。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:35:21.687

您可以`<asp:substitution>`对无法缓存的 UserControl 部分使用控件，请参阅这篇关于[甜甜圈缓存](http://weblogs.asp.net/scottgu/archive/2006/11/28/tip-trick-implement-donut-caching-with-the-asp-net-2-0-output-cache-substitution-feature.aspx)的文章。

由于替换控制可以只接受字符串并呈现它，因此您必须将标记呈现为字符串。

# wpf - 将整数类型参数传递给 ssrs 报告

> ID：10552279
> 
> 赞同：0
> 
> 时间：2012-05-11T13:26:50.070
> 
> 标签：wpf, reporting-services, ssrs-2008, reportparameter

我有一个带有整数参数的报告，并且在将参数从 WPF 客户端传递给 ReportParameter 对象时，它给出了一个错误：

“ **'Microsoft.Reporting.WinForms.ReportParameter.ReportParameter(string, string[])' 的最佳重载方法匹配有一些无效参数**”。

如何将整数类型参数从我的 WPF 客户端传递给我的 SSRS 报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:51:05.707

您不应使用 toString() 将值传递给整数参数。

从报告外部传递的参数的理想设置为“文本”。您甚至不必在数据集上强制转换它们（在您的情况下为整数）。例如，如果您有这样的 ID 参数：

```
where ID=@ID 
```

您可以将其创建为文本并将其作为参数从 URL 传递，就像它是文本一样

# c# - 快速 Exp 计算：可以在不损失太多性能的情况下提高准确性吗？

> ID：10552280
> 
> 赞同：22
> 
> 时间：2012-05-11T13:26:51.197
> 
> 标签：c#, performance, floating-accuracy, exp

我正在尝试之前在[这个](https://stackoverflow.com/a/412988/650012)关于提高 C# 计算速度的 SO 问题的答案中描述的快速 Exp(x) 函数：

```
public static double Exp(double x)
{
  var tmp = (long)(1512775 * x + 1072632447);
  return BitConverter.Int64BitsToDouble(tmp << 32);
} 
```

该表达式使用了一些 IEEE 浮点“技巧”，主要用于神经集合。该函数比常规`Math.Exp(x)`函数快大约 5 倍。

不幸的是，相对于常规函数，数值精度仅为 -4% -- +2% `Math.Exp(x)`，理想情况下，我希望精度至少在低于百分比的范围内。

我已经绘制了近似和常规 Exp 函数之间的商，从图中可以看出，相对差异似乎以几乎恒定的频率重复。

![快速和常规 exp 函数之间的商](../Images/8495d5ef555a815fc5a5914be0417fa2.png)

是否有可能在不大幅降低计算速度的情况下利用这种规律性进一步提高“快速 exp”函数的精度，或者精度提高的计算开销是否会超过原始表达式的计算增益？

（作为旁注，我还尝试了在同一个 SO 问题中提出[的替代](https://stackoverflow.com/a/412102/650012)方法之一，但这种方法在 C# 中的计算效率似乎并不高，至少对于一般情况而言不是。）

**5月14日更新**

应@Adriano 的要求，我现在执行了一个非常简单的基准测试。我已经使用[-100, 100] 范围内的浮点值的每个替代*exp*函数执行了 1000 万次计算。由于我感兴趣的值范围从 -20 到 0，因此我还明确列出了 x = -5 处的函数值。结果如下：

```
 Math.Exp: 62.525 ms, exp(-5) = 0.00673794699908547
Empty function: 13.769 ms
     ExpNeural: 14.867 ms, exp(-5) = 0.00675211846828461
    ExpSeries8: 15.121 ms, exp(-5) = 0.00641270968867667
   ExpSeries16: 32.046 ms, exp(-5) = 0.00673666189488182
          exp1: 15.062 ms, exp(-5) = -12.3333325982094
          exp2: 15.090 ms, exp(-5) = 13.708332516253
          exp3: 16.251 ms, exp(-5) = -12.3333325982094
          exp4: 17.924 ms, exp(-5) = 728.368055056781
          exp5: 20.972 ms, exp(-5) = -6.13293614238501
          exp6: 24.212 ms, exp(-5) = 3.55518353166184
          exp7: 29.092 ms, exp(-5) = -1.8271053775984
      exp7 +/-: 38.482 ms, exp(-5) = 0.00695945286970704 
```

*ExpNeural*等效于本文开头指定的*Exp*函数。*ExpSeries8*是我最初声称在 .NET 上效率不高的[公式；](https://stackoverflow.com/a/412102/650012)当像 Neil 一样实现它时，它实际上非常快。*ExpSeries16*是类似的公式，但有 16 次乘法而不是 8次。 *exp1*到*exp7*是下面阿德里亚诺回答的不同函数。*exp7*的最后一个变体是检查*x*符号的变体；如果为负，则函数返回`1/exp(-x)`。

不幸的是，在我正在考虑的更广泛的负值范围内， [Adriano列出的](https://stackoverflow.com/a/10552567/650012)*expN*函数都不够。[Neil Coffey](https://stackoverflow.com/a/412102/650012)的级数展开方法似乎更适合“我的”值范围，尽管它在较大的负*x*下发散太快，尤其是在使用“仅”8 次乘法时。

 ** * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T16:40:28.393

泰勒级数近似（例如[阿德里亚诺答案](https://stackoverflow.com/a/10552567/1339280)`expX()`中的函数）在接近零时最准确，并且在 -20 甚至 -5 处可能存在巨大误差。如果输入具有已知范围，例如原始问题中的 -20 到 0，则可以使用一个小的查找表和一个额外的乘法来大大提高准确性。

诀窍是认识到 exp() 可以分为整数和小数部分。例如：

```
exp(-2.345) = exp(-2.0) * exp(-0.345) 
```

小数部分将始终介于 -1 和 1 之间，因此泰勒级数近似值将非常准确。整数部分只有 21 个可能的 exp(-20) 到 exp(0) 值，因此可以将这些值存储在一个小的查找表中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-11T13:43:10.050

尝试以下替代方案（`exp1`更快，`exp7`更精确）。

**代码**

```
public static double exp1(double x) { 
    return (6+x*(6+x*(3+x)))*0.16666666f; 
}

public static double exp2(double x) {
    return (24+x*(24+x*(12+x*(4+x))))*0.041666666f;
}

public static double exp3(double x) {
    return (120+x*(120+x*(60+x*(20+x*(5+x)))))*0.0083333333f;
}

public static double exp4(double x) {
    return 720+x*(720+x*(360+x*(120+x*(30+x*(6+x))))))*0.0013888888f;
}

public static double exp5(double x) {
    return (5040+x*(5040+x*(2520+x*(840+x*(210+x*(42+x*(7+x)))))))*0.00019841269f;
}

public static double exp6(double x) {
    return (40320+x*(40320+x*(20160+x*(6720+x*(1680+x*(336+x*(56+x*(8+x))))))))*2.4801587301e-5;
}

public static double exp7(double x) {
  return (362880+x*(362880+x*(181440+x*(60480+x*(15120+x*(3024+x*(504+x*(72+x*(9+x)))))))))*2.75573192e-6;
} 
```

**精确**

```
[-1...1] 中的函数错误 [3.14...3.14] 中的错误

exp1 0.05 1.8% 8.8742 38.40%
exp2 0.01 0.36% 4.8237 20.80%
经验 3 0.0016152 0.59% 2.28 9.80%
经验 4 0.0002263 0.0083% 0.9488 4.10%
exp5 0.0000279 0.001% 0.3516 1.50%
exp6 0.0000031 0.00011% 0.1172 0.50%
exp7 0.0000003 0.000011% 0.0355 0.15%

```

**学分**
这些实现是`exp()`由“scoofy”使用泰勒级数从`tanh()`“fuzzpilz”的实现中计算出来的（不管他们是谁，我只是在我的代码中有这些引用）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-29T02:44:55.490

如果有人想复制问题中显示的相对误差函数，这是一种使用 Matlab 的方法（“快速”指数在 Matlab 中不是很快，但它是准确的）：

```
t = 1072632447+[0:ceil(1512775*pi)];
x = (t - 1072632447)/1512775;
ex = exp(x);
t = uint64(t);
import java.lang.Double;
et = arrayfun( @(n) java.lang.Double.longBitsToDouble(bitshift(n,32)), t );
plot(x, et./ex); 
```

现在，误差的周期正好与二进制值`tmp`从尾数溢出到指数的时间一致。让我们通过丢弃成为指数的位（使其周期性）将我们的数据分成箱，并仅保留剩余的高八位（以使我们的查找表具有合理的大小）：

```
index = bitshift(bitand(t,uint64(2^20-2^12)),-12) + 1; 
```

现在我们计算平均所需的调整：

```
relerrfix = ex./et;
adjust = NaN(1,256);
for i=1:256; adjust(i) = mean(relerrfix(index == i)); end;
et2 = et .* adjust(index); 
```

相对误差降低到 +/- .0006。当然，其他表大小也是可能的（例如，具有 64 个条目的 6 位表给出 +/- .0025）并且误差在表大小上几乎是线性的。表条目之间的线性插值将进一步改善错误，但会以牺牲性能为代价。由于我们已经达到了准确度目标，让我们避免任何进一步的性能损失。

此时，获取 MatLab 计算的值并在 C# 中创建查找表是一些简单的编辑器技能。对于每个计算，我们添加一个位掩码、表查找和双精度乘法。

```
static double FastExp(double x)
{
    var tmp = (long)(1512775 * x + 1072632447);
    int index = (int)(tmp >> 12) & 0xFF;
    return BitConverter.Int64BitsToDouble(tmp << 32) * ExpAdjustment[index];
} 
```

加速与原始代码非常相似——对于我的计算机，编译为 x86 的速度大约快 30%，编译为 x64 的速度大约快 3 倍。使用 mono on ideone，这是一个巨大的净损失（但[原来的](http://ideone.com/HDcMF)也是如此）。

完整的源代码和测试用例：http: [//ideone.com/UwNgx](http://ideone.com/UwNgx)

```
using System;
using System.Diagnostics;

namespace fastexponent
{
    class Program
    {
        static double[] ExpAdjustment = new double[256] {
            1.040389835,
            1.039159306,
            1.037945888,
            1.036749401,
            1.035569671,
            1.034406528,
            1.033259801,
            1.032129324,
            1.031014933,
            1.029916467,
            1.028833767,
            1.027766676,
            1.02671504,
            1.025678708,
            1.02465753,
            1.023651359,
            1.022660049,
            1.021683458,
            1.020721446,
            1.019773873,
            1.018840604,
            1.017921503,
            1.017016438,
            1.016125279,
            1.015247897,
            1.014384165,
            1.013533958,
            1.012697153,
            1.011873629,
            1.011063266,
            1.010265947,
            1.009481555,
            1.008709975,
            1.007951096,
            1.007204805,
            1.006470993,
            1.005749552,
            1.005040376,
            1.004343358,
            1.003658397,
            1.002985389,
            1.002324233,
            1.001674831,
            1.001037085,
            1.000410897,
            0.999796173,
            0.999192819,
            0.998600742,
            0.998019851,
            0.997450055,
            0.996891266,
            0.996343396,
            0.995806358,
            0.995280068,
            0.99476444,
            0.994259393,
            0.993764844,
            0.993280711,
            0.992806917,
            0.992343381,
            0.991890026,
            0.991446776,
            0.991013555,
            0.990590289,
            0.990176903,
            0.989773325,
            0.989379484,
            0.988995309,
            0.988620729,
            0.988255677,
            0.987900083,
            0.987553882,
            0.987217006,
            0.98688939,
            0.98657097,
            0.986261682,
            0.985961463,
            0.985670251,
            0.985387985,
            0.985114604,
            0.984850048,
            0.984594259,
            0.984347178,
            0.984108748,
            0.983878911,
            0.983657613,
            0.983444797,
            0.983240409,
            0.983044394,
            0.982856701,
            0.982677276,
            0.982506066,
            0.982343022,
            0.982188091,
            0.982041225,
            0.981902373,
            0.981771487,
            0.981648519,
            0.981533421,
            0.981426146,
            0.981326648,
            0.98123488,
            0.981150798,
            0.981074356,
            0.981005511,
            0.980944219,
            0.980890437,
            0.980844122,
            0.980805232,
            0.980773726,
            0.980749562,
            0.9807327,
            0.9807231,
            0.980720722,
            0.980725528,
            0.980737478,
            0.980756534,
            0.98078266,
            0.980815817,
            0.980855968,
            0.980903079,
            0.980955475,
            0.981017942,
            0.981085714,
            0.981160303,
            0.981241675,
            0.981329796,
            0.981424634,
            0.981526154,
            0.981634325,
            0.981749114,
            0.981870489,
            0.981998419,
            0.982132873,
            0.98227382,
            0.982421229,
            0.982575072,
            0.982735318,
            0.982901937,
            0.983074902,
            0.983254183,
            0.983439752,
            0.983631582,
            0.983829644,
            0.984033912,
            0.984244358,
            0.984460956,
            0.984683681,
            0.984912505,
            0.985147403,
            0.985388349,
            0.98563532,
            0.98588829,
            0.986147234,
            0.986412128,
            0.986682949,
            0.986959673,
            0.987242277,
            0.987530737,
            0.987825031,
            0.988125136,
            0.98843103,
            0.988742691,
            0.989060098,
            0.989383229,
            0.989712063,
            0.990046579,
            0.990386756,
            0.990732574,
            0.991084012,
            0.991441052,
            0.991803672,
            0.992171854,
            0.992545578,
            0.992924825,
            0.993309578,
            0.993699816,
            0.994095522,
            0.994496677,
            0.994903265,
            0.995315266,
            0.995732665,
            0.996155442,
            0.996583582,
            0.997017068,
            0.997455883,
            0.99790001,
            0.998349434,
            0.998804138,
            0.999264107,
            0.999729325,
            1.000199776,
            1.000675446,
            1.001156319,
            1.001642381,
            1.002133617,
            1.002630011,
            1.003131551,
            1.003638222,
            1.00415001,
            1.004666901,
            1.005188881,
            1.005715938,
            1.006248058,
            1.006785227,
            1.007327434,
            1.007874665,
            1.008426907,
            1.008984149,
            1.009546377,
            1.010113581,
            1.010685747,
            1.011262865,
            1.011844922,
            1.012431907,
            1.013023808,
            1.013620615,
            1.014222317,
            1.014828902,
            1.01544036,
            1.016056681,
            1.016677853,
            1.017303866,
            1.017934711,
            1.018570378,
            1.019210855,
            1.019856135,
            1.020506206,
            1.02116106,
            1.021820687,
            1.022485078,
            1.023154224,
            1.023828116,
            1.024506745,
            1.025190103,
            1.02587818,
            1.026570969,
            1.027268461,
            1.027970647,
            1.02867752,
            1.029389072,
            1.030114973,
            1.030826088,
            1.03155163,
            1.032281819,
            1.03301665,
            1.033756114,
            1.034500204,
            1.035248913,
            1.036002235,
            1.036760162,
            1.037522688,
            1.038289806,
            1.039061509,
            1.039837792,
            1.040618648
        };

        static double FastExp(double x)
        {
            var tmp = (long)(1512775 * x + 1072632447);
            int index = (int)(tmp >> 12) & 0xFF;
            return BitConverter.Int64BitsToDouble(tmp << 32) * ExpAdjustment[index];
        }

        static void Main(string[] args)
        {
            double[] x = new double[1000000];
            double[] ex = new double[x.Length];
            double[] fx = new double[x.Length];
            Random r = new Random();
            for (int i = 0; i < x.Length; ++i)
                x[i] = r.NextDouble() * 40;

            Stopwatch sw = new Stopwatch();
            sw.Start();
            for (int j = 0; j < x.Length; ++j)
                ex[j] = Math.Exp(x[j]);
            sw.Stop();
            double builtin = sw.Elapsed.TotalMilliseconds;
            sw.Reset();
            sw.Start();
            for (int k = 0; k < x.Length; ++k)
                fx[k] = FastExp(x[k]);
            sw.Stop();
            double custom = sw.Elapsed.TotalMilliseconds;

            double min = 1, max = 1;
            for (int m = 0; m < x.Length; ++m) {
                double ratio = fx[m] / ex[m];
                if (min > ratio) min = ratio;
                if (max < ratio) max = ratio;
            }

            Console.WriteLine("minimum ratio = " + min.ToString() + ", maximum ratio = " + max.ToString() + ", speedup = " + (builtin / custom).ToString());
         }
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-29T02:06:57.733

以下代码应满足精度要求，对于 [-87,88] 中的输入，结果具有相对误差 <= 1.73e-3。我不懂 C#，所以这是 C 代码，但我认为转换应该相当简单。

我假设由于精度要求低，使用单精度计算就可以了。正在使用一种经典算法，其中 exp() 的计算映射到 exp2() 的计算。在通过 log2(e) 乘法转换参数后，小数部分的取幂使用 2 次极小极大多项式处理，而参数整数部分的取幂是通过直接操作 IEEE-754 单的指数部分来执行的-精度数。

volatile 联合有助于将位模式重新解释为整数或单精度浮点数，这是指数操作所需的。看起来 C# 为此提供了决定性的重新解释功能，这要干净得多。

两个潜在的性能问题是 floor() 函数和 float->int 转换。由于需要处理动态处理器状态，传统上两者在 x86 上都很慢。但是 SSE（特别是 SSE 4.1）提供了允许这些操作快速的指令。我不知道 C# 是否可以使用这些指令。

```
 /* max. rel. error <= 1.73e-3 on [-87,88] */
 float fast_exp (float x)
 {
   volatile union {
     float f;
     unsigned int i;
   } cvt;

   /* exp(x) = 2^i * 2^f; i = floor (log2(e) * x), 0 <= f <= 1 */
   float t = x * 1.442695041f;
   float fi = floorf (t);
   float f = t - fi;
   int i = (int)fi;
   cvt.f = (0.3371894346f * f + 0.657636276f) * f + 1.00172476f; /* compute 2^f */
   cvt.i += (i << 23);                                          /* scale by 2^i */
   return cvt.f;
 } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-17T13:08:50.600

我研究了Nicol Schraudolph 的[论文](http://nic.schraudolph.org/pubs/Schraudolph99.pdf)，现在更详细地定义了上述函数的原始 C 实现。似乎不可能在不严重影响性能的情况下充分认可*exp计算的准确性。*另一方面，近似值也适用于*x*的大幅度，高达 +/- 700，这当然是有利的。

调整上面的函数实现以获得最小的均方根误差。Schraudolph 描述了如何改变*tmp*表达式中的加法项以实现替代的近似属性。

```
"exp" >= exp for all x                      1072693248 -  (-1) = 1072693249
"exp" <= exp for all x                                 - 90253 = 1072602995
"exp" symmetric around exp                             - 45799 = 1072647449
Mimimum possible mean deviation                        - 68243 = 1072625005
Minimum possible root-mean-square deviation            - 60801 = 1072632447 
```

他还指出，在“微观”级别，近似的“exp”函数表现出阶梯式行为，因为在从*long*到*double*的转换中丢弃了 32 位。这意味着该函数在非常小的范围内是分段常数，但该函数至少不会随着*x*的增加而减小。*

# android - 如何通过onclick将图像放在android中的另一个图像上？

> ID：10552281
> 
> 赞同：0
> 
> 时间：2012-05-11T13:27:08.263
> 
> 标签：android, canvas, imageview

我的 xml 文件中有一个 imageview，我想在用户点击的地方放置另一个图像。我已经使用画布将图像放置在用户单击的位置，但是在将画布放在我的图像视图上时我被卡住了。或者当我们想在检测用户点击时将另一个图像放在图像视图上时有什么办法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:34:38.830

由于您已经覆盖了一个`View`方法，我会说绘制图像而不是`ImageView`. 你的`onDraw()`方法基本上是：

```
@Override
public void onDraw(Canvas canvas) {
  canvas.drawBitmap(bottomBitmap, xCorner, yCorner, paintObject);
  canvas.drawBitmap(topImage, fingerXCorner, fingerYCorner, paintObject);
} 
```

编辑：

或者，如果`ImageView`由于方便的比例类型而要保留 ，则可以覆盖 a `FrameLayout`。把它`ImageView`放在里面，然后重写`draw()`绘制位图的方法。

```
@Override
public void draw(Canvas canvas) {
  super.draw(canvas); // draws everything in the FrameLayout
  canvas.drawBitmap(topImage, fingerXCorner, fingerYCorner, paintObject);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:53:29.370

您是否尝试过使用[`ImageButton`](http://developer.android.com/reference/android/widget/ImageButton.html)?

```
<ImageButton
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:onClick="onButtonClick"
    android:src="@drawable/yourImageFile" /> 
```

然后在你的定义你的`onButtonClick`方法`Activity`，

```
public void onButtonClick(View v) {
    /* Do something */
} 
```

# php - JQuery 脚本在 WordPress 中无法正常工作

> ID：10552285
> 
> 赞同：0
> 
> 时间：2012-05-11T13:27:22.590
> 
> 标签：php, javascript, jquery, wordpress, wordpress-theming

> **可能重复：**
> [PHP 脚本未在 WordPress 中正确运行](https://stackoverflow.com/questions/10551489/php-script-not-running-in-wordpress-correctly)

我最近将[http://usborrow.pizzli.com/apply](http://usborrow.pizzli.com/apply)转换为网站的 WordPress 页面模板。其他所有页面都很好，但是当我访问[http://usborrow.pizzli.com/?page_id=6](http://usborrow.pizzli.com/?page_id=6)时，页面似乎一团糟，并且没有使用 JavaScript。任何支持将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:30:31.263

看起来您缺少一个 javascript 文件：

获取[http://usborrow.pizzli.com/js/jquery.maskedinput-1.3.min.js](http://usborrow.pizzli.com/js/jquery.maskedinput-1.3.min.js) 404（未找到）

看起来像（根据您的第一个链接）

它应该是：

```
<script src="/apply/js/jquery.maskedinput-1.3.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:31:16.880

加载资源失败：服务器响应状态为 403 (Forbidden) [http://usborrow.pizzli.com/js/jquery.maskedinput-1.3.min.js](http://usborrow.pizzli.com/js/jquery.maskedinput-1.3.min.js)

这使得 Uncaught TypeError: Object [object Object] has no method 'mask' form.js 第 2 行。

此 javascript 错误会阻止所有其他 js 运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T19:13:15.307

我观察到您加载 jquery 两次，一次在标头中，一次在 iframe 标头中。这会导致 jquery 的实例化并丢失您为某些特殊目的加载的所有 prev 脚本。使用 iframe 有什么特殊原因吗？如果不是，请尝试将其删除，然后检查结果。

# jquery - 如何在 HTML5 中创建内联表格元素？

> ID：10552296
> 
> 赞同：0
> 
> 时间：2012-05-11T13:28:05.560
> 
> 标签：jquery, html, jquery-mobile

**目标：**直接在下方显示一些带有成对逐字翻译的文本。文本必须在窗口中换行。必须在 HTML5 中工作。解决方案应如下所示：

[截屏](http://example.teadroid.com/home/screenshots/wraptable.png)

使用 HTML5 的原因是我希望 jQuery 和 jQuery Mobile 支持该页面。解决方案不必使用表格，我只想在彼此上方/下方显示这些单词对。

这是我在这里的第一篇文章，但已经从 stackoverflow 吸取了数周的智慧。多么棒的资源！期待一些聪明的答复。

> **附加信息：**
> 
> 我已经通过使用内联表为非 HTML5 完成了它，但是一旦你放入一个 HTML5 识别“！DOCTYPE html”标签，它就会中断并且浏览器将表视为块级元素。
> 
> 我对非 HTML5 的解决方案：

```
<HTML>
<BODY>
<table border="1" style="display:inline"><tr><td>hello</td></tr><tr><td>bonjour</td></tr></table>
<table border="1" style="display:inline"><tr><td>folks</td></tr><tr><td>les gens</td></tr></table>
<table border="1" style="display:inline"><tr><td>thank you</td></tr><tr><td>je vous remercie</td></tr></table>
<table border="1" style="display:inline"><tr><td>for your</td></tr><tr><td>pour votre</td></tr></table>
<table border="1" style="display:inline"><tr><td>helping me</td></tr><tr><td>aide-moi</td></tr></table>
<table border="1" style="display:inline"><tr><td>solve</td></tr><tr><td>à résoudre</td></tr></table>
<table border="1" style="display:inline"><tr><td>this</td></tr><tr><td>ce</td></tr></table>
<table border="1" style="display:inline"><tr><td>intractable</td></tr><tr><td>problème</td></tr></table>
<table border="1" style="display:inline"><tr><td>problem</td></tr><tr><td>insoluble</td></tr></table>
<table border="1" style="display:inline"><tr><td>.</td></tr><tr><td>.</td></tr></table>
<table border="1" style="display:inline"><tr><td>hello</td></tr><tr><td>bonjour</td></tr></table>
<table border="1" style="display:inline"><tr><td>folks</td></tr><tr><td>les gens</td></tr></table>
<table border="1" style="display:inline"><tr><td>thank you</td></tr><tr><td>je vous remercie</td></tr></table>
<table border="1" style="display:inline"><tr><td>for your</td></tr><tr><td>pour votre</td></tr></table>
<table border="1" style="display:inline"><tr><td>helping me</td></tr><tr><td>aide-moi</td></tr></table>
<table border="1" style="display:inline"><tr><td>solve</td></tr><tr><td>à résoudre</td></tr></table>
<table border="1" style="display:inline"><tr><td>this</td></tr><tr><td>ce</td></tr></table>
<table border="1" style="display:inline"><tr><td>intractable</td></tr><tr><td>problème</td></tr></table>
<table border="1" style="display:inline"><tr><td>problem</td></tr><tr><td>insoluble</td></tr></table>
<table border="1" style="display:inline"><tr><td>.</td></tr><tr><td>.</td></tr></table>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:33:53.733

你想要`display: inline-table`。

否则，您有一个`display: table-row`内部 a`display: inline`并且浏览器会生成一个匿名`display: table`块来保存`<tr>`.

* * *

也就是说，您所拥有的实际上并不像表格数据结构。

我怀疑你最好用一张桌子：

```
table { display: inline; }
tr { display: inline-table; } 
```

…虽然我还没有测试过，所以我不能说浏览器支持会是什么样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:43:37.350

最跨浏览器的方法可能是删除`style`属性（无论如何使用它们是不切实际的——一次又一次地重复相同的设置）并使用以下样式表：

```
 table { float: left; margin-right: 0.25em;  margin-bottom: 0.25em; } 
```

这适用于所有支持 CSS 的浏览器，甚至是旧版本的 IE。根据需要调整边距值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:31:56.623

由于表格只是二维的，为什么不直接使用样式列表 ( `LI`)？

```
<ul><li>Item One</li><li>Item Two</li></ul> 
```

然后改变列表的样式：

```
ul, li {list-style:none;padding:0;margin:0;display:inline;margin-right:10px;}
li {border:1px solid #000000} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-11T13:40:57.817

我认为这对您有用，如您显示的屏幕截图：http: [//jsfiddle.net/5Ak2g/](http://jsfiddle.net/5Ak2g/)

# tabs - 如何在 JavaScript 中选择选项卡并设置选项卡面板的内容

> ID：10552300
> 
> 赞同：0
> 
> 时间：2012-05-11T13:28:15.887
> 
> 标签：tabs, xul, tabpanel

我坚持这一点：我已经创建了选项卡和相应的选项卡面板。默认情况下，我隐藏了选项卡。为了使选项卡可见，我使用以下 JavaScript 行：

```
document.getElementById("tab-id").setAttribute("selected", true); 
```

但是，对应的内容`tabpanel`并没有像我预期的那样更新。我试过用这个：

```
document.getElementById("tabbox-id").selectedPanel = "tabpanel-id"; 
```

但是什么都没有发生；的内容`tabpanel`没有更新。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:53:57.313

该`selected`属性是在内部设置的，它只是选择更改的指示 - 更改它实际上不会更改选择。您最可能想要做的是：

```
var tabpanel = document.getElementById("tabpanel-id");
document.getElementById("tabbox-id").selectedPanel = tabpanel; 
```

请注意，这`selectedPanel`是面板而不是其 ID。或者，您也可以使用`selectedIndex`：

```
document.getElementById("tabbox-id").selectedIndex = 1; 
```

[文档](https://developer.mozilla.org/en/XUL/tabbox)

# php - 将日期保存到 MySQL

> ID：10552303
> 
> 赞同：0
> 
> 时间：2012-05-11T13:28:19.537
> 
> 标签：php, mysql

我在将日期保存到 MySQL 数据库时遇到了这个问题。

我有这个输入字段：

```
<input type="date" name="theDate" id="theDate" required></p> 
```

在将其保存到数据库之前，我将字符串格式化为如下日期：

```
date('Y.m.d', strtotime($table['day'])); 
```

数据库字段是**DATE**但它只保存`0000-00-00`.

当我在保存之前回显日期时，它是正确的`2012-02-23`。

我希望任何人都可以告诉我这是如何完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:41:18.637

```
date('Y.m.d', strtotime($table['day'])); 
```

输出`2012.02.23`不是`2012-02-23`......你需要

```
date('Y-m-d', strtotime($table['day'])); 
```

[请参阅有关 MySQL 日期和时间文字的本节](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html)

# android - 如何使 TextView 的内容水平和垂直滚动

> ID：10552305
> 
> 赞同：2
> 
> 时间：2012-05-11T13:28:20.373
> 
> 标签：android, android-layout, android-widget

我想滚动在 TextView 中查看的结果，这是我的 xml：

```
<scroll>
<TextView
android:id="@+id/ris"
android:layout_width="wrap_content"
android:layout_height="229dp"
android:layout_weight="0.96"
android:textAppearance="?android:attr/textAppearanceMedium" />
</scroll> 
```

但应用程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:29:54.453

利用

```
<ScrollView> your View "</ScrollView"> 
```

并且必须只有一个子ScrollView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:32:57.803

将此添加到 TextView 的 XML 文件中

```
 android:scrollHorizontally="true"
 android:scrollVertically="true" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:33:05.730

在您的 中添加以下作为属性`TextView`：

```
android:maxLines = "1"
android:scrollbars = "vertical" 
```

然后，一旦您实例化了您的`TextView`，请添加以下行：

```
mTextView.setMovementMethod(new ScrollingMovementMethod()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T18:01:25.810

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="19dp"
    android:layout_marginTop="24dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/tv"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/hello_world"
            tools:context=".Tester" />
    </LinearLayout>
</ScrollView> 
```

# asp.net - 查看未通过 javascript 访问的状态变量

> ID：10552306
> 
> 赞同：0
> 
> 时间：2012-05-11T13:28:22.207
> 
> 标签：asp.net, viewstate

我不明白为什么我不能在 java 脚本中使用我的视图状态变量。谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T13:34:50.357

视图状态不是为 javascript 使用而设计的。视图状态用于记住您在后面的代码中设置并在回发时再次使用的值。

如果您希望获得任何控制值，您可以使用简单的 javascript 来实现，没有理由使用视图状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:36:23.843

您不能直接访问视图状态，而只能访问包含视图状态的隐藏表单元素。我建议使用 RegisterHiddenField 而不是混合服务器/js代码：

你可以试试这个样本：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    ViewState("code") = "EE"
    Page.ClientScript.RegisterHiddenField("vCode", ViewState("code"))
End Sub 
```

在您的 javascript 上：

> var vCode = document.getElementById("vCode");
> 警报（vCode）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:50:44.257

视图状态已加密。你不应该能够阅读它。

如果要访问控件的参数，请通过属性公开它。

```
public string Label1Text
{
    get
    {
        return Label1.Text;
    }
}

<script>
    var lblText = "<%= this.Label1Text %>";
</script> 
```

# javascript - 使用 jQuery 删除 XML 节点

> ID：10552309
> 
> 赞同：0
> 
> 时间：2012-05-11T13:28:42.713
> 
> 标签：javascript, jquery, xml, delete-row

我想知道是否有人可以帮助我。

我整理了[这个](http://www.mapmyfinds.co.uk/development/deletetest.php)页面，允许用户查看他们上传的图片库。

初始上传时，物理图像保存在以下文件结构中： `UploadedFiles/userid/locationid/image`图像的详细信息（即描述等）保存在`files.xml`与物理图像位于同一目录中的 xml 文件中。

我现在正在努力让用户能够删除这些图像。

通过每个图像下方的删除图标，我承认在一些帮助下，将以下内容组合在一起，成功删除了物理图像。

'删除图标 Onclick 事件'

```
<script type="text/javascript"> 
    Galleria.ready(function() {
        this.$('thumblink').click();

    $(".galleria-image").append( 
    "<span class='btn-delete ui-icon ui-icon-trash'></span>"); 
    $(".btn-delete").live("click", function(){
    var img = $(this).closest(".galleria-image").find("img"); 

    // send the AJAX request
    $.ajax({
    url : 'delete.php',
    type : 'post',
    data : { image : img.attr('src') },
    success : function(){
    alert('Deleting image... ');
    img.parent().fadeOut('slow');
    }
    });

    return false;
    });

    });

</script> 
```

原来的'delete.php'

```
<?php

if (!empty($_POST)) {
$image = $_POST['image'];

if (file_exists($image)) {
unlink($image);
} 
}
?> 
```

**更新了'delete.php'**

```
<?php

if (!empty($_POST)) {
$image = $_POST['image'];

if (file_exists($image)) {
unlink($image);
} 
}

$doc = new DOMDocument; 
$doc->load('files.xml'); 

$thedocument = $doc->documentElement; 

$list = $thedocument->getElementsByTagName('files'); 

$nodeToRemove = null; 
foreach ($list as $domElement){ 
$attrValue = $domElement->getAttribute('file_name'); 
if ($attrValue == 'image') { 
$nodeToRemove = $domElement;
} 
} 

if ($nodeToRemove != null) 
$thedocument->removeChild($nodeToRemove); 

echo $doc->saveXML(); 
?> 
```

我遇到的问题是从 xml 文件中删除 xml 节点。我在下面提供了 XML 文件的摘录。

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <files>
  <file name="stag.jpg" source="stag.jpg" size="21341" originalname="stag.jpg" description="No description provided" userid="1" locationid="1" /> 
  </files> 
```

我已经对如何解决这个问题进行了大量研究，发现 jQuery 有它自己的命令，即`jQuery.remove`我认为可以删除节点。按照简短的教程，我在“Onclick Event”脚本的末尾添加了以下内容：

```
var doc = $(files.xml);
doc.find('file_name:src').remove(); 
```

不幸的是，虽然我没有收到特定错误，但该节点并未从文件中删除。当谈到 XML 时，我是一个完整的初学者，所以也许我看得太简单了。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:44:24.010

这是因为 JavaScript（JQuery）将 XML DOM 加载到内存中，然后当您删除节点时，它会从内存中的 xml 文档（对象）中删除。

它不会从物理 XML 文件中删除。

JS 在沙盒浏览器环境中运行，无法更改系统上的本地文件。如果您尝试从远程服务器加载 xml，那么这是一个非常糟糕的主意。

来自远程服务器的 XML 文件被下载为临时文件，然后当您再次加载 XML 时，会创建内存中的 DOM 并从中删除节点。

因此，如果您想要更改实际文件，您将需要使用 AJAX 并向您的服务器发送一些 HTTP 请求以对物理文件执行相同的操作。

**更新**：

查看本教程 [http://www.phpeveryday.com/articles/PHP-XML-Removing-Node-P415.html](http://www.phpeveryday.com/articles/PHP-XML-Removing-Node-P415.html)

并尝试在您的 delete.php 中加载 xml 文件并从中删除相应的节点，然后将此 xml 保存回将被覆盖的原始文件。

# php - 使用 PHP 的从属 mplayer

> ID：10552321
> 
> 赞同：1
> 
> 时间：2012-05-11T13:29:32.000
> 
> 标签：php, popen, mplayer, slave

我正在尝试使用 mplayer 为特定视频格式制作一个用 PHP 编写的跨平台播放器。
PHP 脚本构建视频文件并启动 mplayer，同时继续构建视频文件。
有时 PHP 脚本速度不够快，mplayer 会崩溃，因为它不再缓冲视频。
所以，如果我需要缓冲，我需要控制 mplayer 暂停它。
我做了一个功能 - 只是为了测试 - 试图在 5 秒后停止视频。
（这里是命令列表：[http](http://www.mplayerhq.hu/DOCS/tech/slave.txt) ://www.mplayerhq.hu/DOCS/tech/slave.txt ）

```
...
function OnClickButtonStart() {
    $mplayer = popen("mplayer -wid " .  $wid . " -slave -quiet -idle " . $filename . " > /dev/null 2> /dev/null  &", "w");
    var_dump($mplayer);
    sleep(5);
    echo "\nPausing...";
    fputs($mplayer, "pause\n");
    fflush($mplayer);
    echo "done!\n";
    return $mplayer;
}
... 
```

但是，即使输出是：

```
resource(5) of type (stream)
Pausing...done! 
```

视频停不下来！
怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-29T14:41:17.797

在 VB.NET 中，我使用以下代码来播放静音和暂停音乐。请随意使用。我认为您的问题可能在于发送命令功能。

```
 Private Sub funPlayMusic()
    ps = New Process()
    ps.StartInfo.FileName = "D:\Music\mplayer.exe "
    ps.StartInfo.UseShellExecute = False
    ps.StartInfo.RedirectStandardInput = True

    'ps.StartInfo.CreateNoWindow = True
    args = "-fs  -noquiet -identify -slave " '
    args += "-nomouseinput -sub-fuzziness 1 "
    args += " -vo direct3d, -ao dsound "
    '    -wid will tell MPlayer to show output inisde our panel
    '    args += " -vo direct3d, -ao dsound  -wid ";
    '    int id = (int)panel1.Handle;
    '    args += id;
End Sub

  Public Function SendCommand(ByVal cmd As String) As Boolean
    Try
        If ps IsNot Nothing AndAlso ps.HasExited = False Then
            ps.StandardInput.Write(cmd + vbLf)
            Return True
        Else
            Return False
        End If

    Catch ex As Exception
        Return False
    End Try
End Function 

   Public Sub Playsong(ByVal Songfilelocation As String)

    Try
        ps.Kill()
    Catch
    End Try
    Try
        ps.StartInfo.Arguments = args + " """ + Songfilelocation + """"
        ps.Start()

        SendCommand("set_property volume " + "80")
    Catch e As Exception
        MessageBox.Show(e.Message)
    End Try

End Sub

  Private Sub btnPause_Click(sender As Object, e As EventArgs) Handles       btnPlayPause.Click
    SendCommand("pause")

   End Sub

    Private Sub btnMute_Click(sender As Object, e As EventArgs) Handles btnMute.Click
    SendCommand("mute")

  End Sub 
```

# c# - DTO/域对象的最佳实践或模式

> ID：10552322
> 
> 赞同：1
> 
> 时间：2012-05-11T13:29:37.670
> 
> 标签：c#

我有一个下面的类，它被编写为使用 Web 服务响应消息进行映射。

```
public class someclassA
{
   public int properyA {get;set;}
   public int properyB {get;set;}
   public int properyC {get;set;}
   public int properyD {get;set;}
}

public class someclassB
{
   public int properyX {get;set;}
   public int properyY {get;set;}
   public int properyZ {get;set;}
} 
```

现在的要求是 someClassA 应该使用 someClassB 中的一些属性并添加另外 3 个计算属性，例如 propertyE、propertyF、propertyG 等。

关于模式的问题是我应该创建完全不同的 someClassAB 以拥有 someClassA 的所有属性和 3 个新属性，还是应该首先构建带有所有这些附加字段的 someClassA？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:57:35.710

这是要记住的规则。如果 A“是”B，则使用继承。否则，使它们成为单独的对象。只有在子类确实是父类的更具体形式的情况下才应使用继承。

想想维护。当未来物体开始越来越发散时会发生什么？现在你已经使用了类型，其中只有 20% 的属性在给定的上下文中有意义。

更不用说，如果您在不相关的实体之间有明确的界限，您的代码将更具可读性。每次您将继承放入图片中时，您在阅读代码时都会多一个“上下文”。如果混合对象（坦率地说是出于懒惰），代码的可读性会受到影响。

# vtiger - 从 vtiger 5.3.0 迁移到 5.4.0 失败

> ID：10552327
> 
> 赞同：0
> 
> 时间：2012-05-11T13:29:52.733
> 
> 标签：vtiger

尝试从 vtiger 5.3.0 迁移到 5.4.0 并在浏览器中导航到补丁文件夹时出现此错误：

警告：require_once(include/logging.php) [function.require-once]：无法打开流：\vtigercrm-5.3.0\apache\htdocs\vtigerCRM\upgrade\include\database\PearDatabase 中没有这样的文件或目录。第 1 行的 php

使用谷歌，我发现有人在迁移不同版本时出现此错误，虽然不是这些版本，也没有论坛主题对此问题有实际答案，我是唯一一个吗！？

我把补丁放在'\vtigercrm-5.3.0\apache\htdocs\vtigerCRM' 然后导航到它并得到这个错误，有什么想法！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T04:45:04.937

如果您想要完整的信息，请点击此链接。

[https://wiki.vtiger.com/index.php/Vtiger_CRM_5.4_Migration](https://wiki.vtiger.com/index.php/Vtiger_CRM_5.4_Migration)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-02T06:32:09.970

请不要使用补丁，如果您想进行迁移，只需点击此链接即可。

[点击这里](https://wiki.vtiger.com/index.php/Vtiger_CRM_5.4_Migration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T23:01:29.720

我认为现在说什么有点晚了，但是，我遇到了同样的错误。我认为，根据我的阅读，问题可能出在安装目录上。我看到您已将所有内容移至“升级”。也许问题就在那里。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-12T22:25:39.530

您尝试的迁移方法不是使用补丁来完成的。您尝试执行的操作仅适用于完整的应用程序包。

# iphone - 如何将 UITextField 的文本拆分为单个字符

> ID：10552330
> 
> 赞同：0
> 
> 时间：2012-05-11T13:30:14.010
> 
> 标签：iphone, objective-c, ios5, uitextfield

我有一个`UITextField`，假设这个文本框中有 5 个字符，例如你好。

现在我想把这个词分成单个字符，即'h'，'e'，'l'，'l'，'o'；

那么我该如何执行这种操作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:40:59.883

首先从文本字段中获取字符串值：

```
NSString *text = myTextField.text; 
```

然后你可以迭代每个字符：

```
NSUInteger len = [text length];
for (NSUInteger i = 0; i < len; i++)
{
    unichar c = [text characterAtIndex:i];
    // Do something with 'c'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:37:05.307

只需使用 NSString 方法 UTF8String

```
const char *str = [textField.text UTF8String]; 
```

然后你有一个 UTF8 字符数组

注意：确保您对 UTF8 编码感到满意，即没有非标准字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:53:07.297

我认为使用 for 循环是一个好主意，但要准确获得您要求的内容，请使用 -getCharacters:range:。这是一个例子：

```
- (void)testGetCharsInRange
{
    NSString *text = @"This is a test string, will it work?";

    unichar *chars = calloc([text length], sizeof(unichar));
    [text getCharacters:chars range:NSMakeRange(0, [text length])];

    STAssertEquals(chars[[text length] - 1], (unichar)'?', nil);

    free(chars);
} 
```

# android - Android活动在启动后立即崩溃

> ID：10552334
> 
> 赞同：-1
> 
> 时间：2012-05-11T13:30:22.477
> 
> 标签：android, runtime, onclicklistener

我一直致力于开发一个应用程序，一切进展顺利。但是，当我在我的一个 .xml 文件（不是 main.xml）中为按钮添加 onCLickListener 时，一旦我尝试在模拟器中打开它，它就开始崩溃。onClickListener 的所有代码都与我拥有的其他两个按钮相同。这是我有问题的听众的代码：

```
 Button button3 = (Button)findViewById(R.id.button3);
    button3.setOnClickListener(bt3listener);

    private OnClickListener bt3listener = new OnClickListener(){
    public void onClick(View v){
        setContentView(R.layout.main);
    }
}; 
```

这段代码与我的其他 onClickListeners 的唯一不同之处在于它引用了与 main.xml 不同的文件中的按钮。它在显示除顶部显示我的项目名称的黑屏之外的任何 ui 之前崩溃，并提示我说“un

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:34:32.823

> 对于我的一个 .xml 文件（不是 main.xml）中的按钮，

它必须是您设置的布局`setContentView()`，以便`findViewById()`使用 using`this`或使用 an检索它`inflater`以获得`Button`声明的布局，并使用返回`view`的 with `findViewById()`。

```
viewReturnedByInflater.findViewById() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:33:12.483

您需要在将 OnClickListener 分配给按钮之前对其进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:35:24.453

试试这个

```
private OnClickListener bt3listener = new OnClickListener(){
public void onClick(View v){
    setContentView(R.layout.main);
}
};
Button button3 = (Button)findViewById(R.id.button3);
button3.setOnClickListener(bt3listener); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:37:56.010

它会给您错误，因为当`Button button3 = (Button)findViewById(R.id.button3);` 它尝试查找按钮时，但由于该按钮位于另一个 xml 布局中，它会崩溃。

您应该使用其他布局或在主布局上添加按钮

# php - 弹出窗口不正常，不刷新页面

> ID：10552340
> 
> 赞同：0
> 
> 时间：2012-05-11T13:30:36.730
> 
> 标签：php, javascript, html, popup, page-refresh

我尝试在同一个窗口中打开弹出窗口，但它会将我转发到另一个窗口。另外，我尝试在弹出窗口关闭后刷新窗口，但我找不到简单的解决方案。我认为最好不要在 URL 中加上 #。那是我的功能：

```
<li value="Open window" >
    <a href="javascript: window.open('upd.php?m=<?php echo $oldpar?>','','width=520,height=400')">
        <u>EDIT</u>
    </a>
</li> 
```

我设法打开窗口，但主页也转到`javascript: window.open('upd.php?m=2','','width=520,height=400')`. 我试着说：

```
<script type="text/javascript">
    <!--
    function refreshParent()
    {
        window.opener.location.href = window.opener.location.href;

        if (window.opener.progressWindow)
        {
            window.opener.progressWindow.close()
        }

        window.close();
    }
    //-->
</script> 
```

在用户选择变量并按下按钮后自动关闭弹出窗口会很棒。在父（主） URL 刷新之后立即..有什么帮助吗？:)

PS任何想法如何自动刷新弹出？我看到所有浏览器都有不同的方式来做到这一点..常见的一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:53:53.963

*   使用“_self”作为窗口标题（第二个参数`window.open()`）在同一窗口中打开弹出窗口。

*   用于`window.location.reload();`重新加载当前窗口。

*   用于`opener.location.reload();`在调用之前重新加载打开弹出窗口的窗口`window.close();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:47:04.787

我不确定，但我猜你一直在寻找那个。

```
​&lt;ul>
<li value="Open window" ><a href="javascript: window.open('upd.php?m=<?php echo $oldpar>','','width=520,height=400'); return false;"><u>EDIT</u></a></li>
</ul> 
```

`return false;`在通话结束时应该可以解决您的问题。

**升级版：**

[http://jsfiddle.net/Mt8Vd/](http://jsfiddle.net/Mt8Vd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:54:34.080

通过链接打开窗口：

```
<a href="javascript:open('400','360','account.php?id=<?=$id?>&type=<?=$type?>');">Open</a> 
```

打开链接的js函数：

```
<script language="JavaScript">
function open(w,h,URL)
{
  var width = w;
  var height = h;
  var left = (screen.width/2)-(w/2);
  var top = (screen.height/2)-(h/2);    
  window.open(URL,'janela', 'width='+width+', height='+height+', top='+top+', left='+left+', scrollbars=yes, status=no, toolbar=no, location=no, directories=no, menubar=no, resizable=no, fullscreen=no');
}
</script> 
```

最后，在“弹出窗口”结束时，您应该在所有任务完成后关闭窗口，只需告诉脚本关闭弹出窗口并重新加载开启器页面。

```
<script language="JavaScript" type="text/javascript">
function close()
{
    opener.location.reload();
    window.close();
}
</script> 
```

# ios - UIApplication 终止状态

> ID：10552342
> 
> 赞同：0
> 
> 时间：2012-05-11T13:30:41.530
> 
> 标签：ios, uiapplication

某处是否有状态变量告诉我应用程序即将退出（发送*后* `UIApplicationWillTerminateNotification`）？UIApplication`applicationState`似乎没有考虑这种状态。

# php - 如何触发点击ajaxSubmitButton

> ID：10552344
> 
> 赞同：1
> 
> 时间：2012-05-11T13:30:43.313
> 
> 标签：php, jquery, yii

我有使用 ajaxSubmitButton 的过滤器。

```
CHtml::ajaxSubmitButton('Show',Yii::app()->createUrl('office/ajaxFilter'),array('update'=>'#office-install'),array('id'=>'filterSubmit')) 
```

我想在 pageLoad 上提交它（使用默认过滤器值接收数据）。如何触发点击ajaxSubmitButton？

使用

```
 $(document).ready(function () {
    $('#filterSubmit').trigger('click');
} 
```

提高重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:42:52.067

如果我正确理解您的问题，您需要触发点击`#filterSubmit`元素以运行与其关联的一些操作，但如果是这样，则页面不会跟随常规点击：

**将您的代码更新为：**

```
$(document).ready(function () {

  // bind a click event to the button
  $('#filterSubmit').bind('click', function(e) {

    // the browser from following the click
    e.preventDefault();
  });

  // trigger the click on the button
  $('#filterSubmit').trigger('click');

  // unbind the click event to allow the normal usage of that button
  $('#filterSubmit').unbind('click');
} 
```

这假设您有一些点击事件绑定到`#filterSubmit`... 如果不是这种情况，也许更详细的问题可以让我们帮助您！

* * *

**已编辑**

通过您刚刚发布的评论，您可以执行以下操作：

**你的代码** ^(（有一个小修复）)：

```
$(document).ready(function(){

  $('#filterSubmit').trigger('click');

}); // was missing ); here 
```

**使用 Yii 框架**

```
<?php

// the script string
$ourscript = "$('#filterSubmit').trigger('click');";

// Yii’s registerScript
Yii::app()->clientScript->registerScript(
                            'filtersubmitclickscript',
                            $ourscript,
                            CClientScript::POS_READY
                          );

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:34:30.533

该主题已在此处多次介绍： [https ://stackoverflow.com/search?q=click+trigger+jquery](https://stackoverflow.com/search?q=click+trigger+jquery)

由于安全限制，您可能会在使用触发器的多个浏览器中遇到问题。

# mysql - 严重：java.sql.SQLException：列计数与第 1 行的值计数不匹配

> ID：10552345
> 
> 赞同：0
> 
> 时间：2012-05-11T13:30:44.420
> 
> 标签：mysql, jdbc

我有 Mysql 数据库，并且正在处理 servlet：这是我的表模式：

```
 CREATE TABLE Files (
 File_Name               VARCHAR(50),
 File_Data                Blob ,
 File_Date          VARCHAR(20),
 File_Course_Code       VARCHAR(45) REFERENCES Course(Course_Code) ,
 PRIMARY KEY (File_Name , File_Date, File_Course_Code)
  ); 
```

这是servlet代码：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    ServletOutputStream os = response.getOutputStream();
    try {
        InputStream uploadedFile = null;

        DiskFileUpload fu = new DiskFileUpload();
        // If file size exceeds, a FileUploadException will be thrown
        fu.setSizeMax(10000000);

        List fileItems = fu.parseRequest(request);
        Iterator itr = fileItems.iterator();

        while (itr.hasNext()) {
            FileItem fi = (FileItem) itr.next();

            //Check if not form field so as to only handle the file inputs
            //else condition handles the submit button input
            if (!fi.isFormField()) {  // If the form fiel is a file
                uploadedFile = fi.getInputStream();
            }
        }

            // to get the file name:
            String fileName= "String";

            // to extract the date:
            java.util.Date now = new java.util.Date();
            String DATE_FORMAT = "yyyy-MM-dd hh:mm:ss";
            SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT);
            String strDateNew = sdf.format(now);

            HttpSession session = request.getSession();
            String a = (String) session.getAttribute("fileccode");

            // set connection up: 
            Class.forName("com.mysql.jdbc.Driver");
            Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/VC", "root", "");
            PreparedStatement stmt = null;
            stmt = conn.prepareStatement("INSERT INTO Files (File_Name,File_Data,File_Date,File_Course_Code) VALUES (?,? ?,?)");
                  stmt.setString(1,fileName);
            stmt.setBinaryStream(2,uploadedFile);
                  stmt.setString(3,strDateNew);
                  stmt.setString(4,a);
            stmt.executeUpdate();

    } catch (FileUploadException e) {
        os.print(e.getLocalizedMessage());
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        os.close();
    }
} 
```

我看过很多关于这个错误的帖子，但几乎所有帖子在编写查询时都有语法错误。我相信我没有语法错误。但也许 (File_Data) 作为主键和默认 null 会出错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:33:37.753

你少了一个逗号

```
VALUES (?,? ?,?) 
```

应该

```
VALUES (?,?,?,?) 
```

# asp.net-mvc - EF4.3.1 中的 MaxLength 属性

> ID：10552347
> 
> 赞同：9
> 
> 时间：2012-05-11T13:30:51.083
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, .net-4.5

```
 The type 'System.ComponentModel.DataAnnotations.MaxLengthAttribute' 
 exists in both 

 [path...]\packages\EntityFramework.4.3.1\lib\net40\EntityFramework.dll 

 and

'c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework
\.NETFramework\v4.5\System.ComponentModel.DataAnnotations.dll' 
```

现在，我[在 msdn](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/fab7a591-f790-4064-aeb5-c320eb5057e5)上阅读到排除 EntityFramework 引用（通过 nuget 包添加）是安全的。但是，当我这样做时，我无法正确创建 DBContext，因为 DbModelBuilder 类位于 EntityFramework dll 中。此外，当我删除 EntityFramework 引用时，一些其他关键类丢失了，所以这是旧的和不相关的解决方案。

**更新（消歧）**：两者`System.ComponentModel.DataAnnotations.dll`和`EntityFramework.dll` 包括`System.ComponentModel.DataAnnotations.MaxLengthAttribute`。问题是每个 dll 还包含对 EF 代码优先设计至关重要的其他类。例如：

```
EntityFramework.dll:
 - System.Data.Entity.DbModelBuilder

System.ComponentModel.DataAnnotations.dll:
 - System.ComponentModel.DataAnnotations.RegularExpressionAttribute 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T13:36:45.900

将此语句添加到您的班级顶部

```
 using System.ComponentModel.DataAnnotations; 
```

`System.ComponentModel.DataAnnotations`命名空间分布在`EntityFramework.dll`and`System.ComponontModel.DataAnnotations.dll`中。因此，您需要在项目中添加对这两者的引用以使用 DataAnnotations。

MaxLenth 属性存在于`EntityFramework.dll`. 因此，请确保您在项目引用部分中有对该 dll 的引用。

![在此处输入图像描述](../Images/5120b36082961c1fd16cc8134a1b60d4.png)

**编辑：**从 .NET 框架 4.5 开始，此命名空间已移至`System.ComponentModel.DataAnnotations.dll`. 因此，如果您将 .NET Framework 4.5 与 Entity Framework 4.3.1 或更低版本一起使用，您将遇到此冲突。如果您想坚持使用 .NET 4.5 或降级到 .NET 4 以使用 EntityFramework 4.3.1，解决方案是切换到 Entity Framework 1.50 beta 1/ 2 版本。

来自[msdn](http://msdn.microsoft.com/en-us/library/gg197525%28v=vs.103%29.aspx)文档。

> 从 Entity Framework 5.0 Beta 1 开始，EntityFramework.dll 不包含数据注释的定义。这些定义已移至 System.ComponentModel.DataAnnotations.dll 并在 System.ComponentModel.DataAnnotations.Schema 命名空间中定义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T08:29:57.617

我没有选择升级项目以使用 EF5，或将构建机器降级到 .Net Framework 4。

不过有办法解决这个问题！事实证明，当您安装 Visual Studio 2012 时，它会添加以下文件夹（以及其他文件夹）。

**C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0**

在 VS 中，如果您打开一个以 4.0 为目标的项目并查看对 System.ComponentModel.DataAnnotations 的引用的属性，您将看到路径指向上述位置，而不是 GAC。

此文件夹包含原始 Framework 4.0 程序集。如果它们存在于机器上，那么 MSBuild 等在构建面向 4.0 的项目时将引用这些，而不是 4.5 放入 GAC 的修改过的那些。

在我们的例子中，这意味着我们可以通过将该文件夹从安装了 VS 的开发机器复制到同一位置的构建服务器来解决问题。（注：我们只需要复制这个文件夹，不需要在构建服务器上安装VS）。

更多信息在这里： http: [//marcgravell.blogspot.co.uk/2012/09/iterator-blocks-missing-methods-and-net.html](http://marcgravell.blogspot.co.uk/2012/09/iterator-blocks-missing-methods-and-net.html)

希望这对其他人有帮助！

# android - Android appwidget点击不起作用

> ID：10552351
> 
> 赞同：7
> 
> 时间：2012-05-11T13:31:01.800
> 
> 标签：android, click, widget

天哪，这里肯定有一千个关于 android appwidgets 的不同教程，甚至还有更多问题，但我就是不知道为什么我的不工作。*叹气* 反问：为什么这里的代码不能与 setOnClickListener (new new Button.OnClickListener() { // do stuff }... 无论如何，我的小部件显示在屏幕上和标签是正确的，但是当我点击小部件时，什么也没有发生。我在所有我认为会发生某些事情的地方都设置了断点，但没有执行任何操作。

问题1：点击一个小部件后执行什么代码？

我的小部件在被点击时并没有真正更新。相反，它只是在我的程序的其余部分执行一些代码。它只是制作一些网络 http 和/或套接字服务器命令。此外，我的小部件在放置在桌面上之前配置了一个活动。

这是清单：

```
 <receiver android:name="PhcaAppWidgetProvider" >
     <intent-filter>
         <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
         <action android:name="com.skipmorrow.phca.PhcaAppWidgetProvider.WIDGET_CLICKED" />
     </intent-filter>
     <meta-data android:name="android.appwidget.provider"
                android:resource="@xml/phca_widget_info" />
 </receiver> 
```

这是小部件配置器活动

```
 private Activity act;
    private static ListView listView;
    private static ArrayAdapter<String> adapter;
    private ArrayList<String> actionList;
    private final String widgetPageName = "_widget";
    int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;
     private static final String PREFS_NAME = "PHCA";
     private static final String PREF_PREFIX_KEY = "prefix_";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setTitle("Choose an action for this widget");
        actionList = GetActionList();
        if (!actionList.isEmpty()) {
            listView = getListView();
            adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, actionList);
            setListAdapter(adapter);
        }
        else {
            // no objects on the widget page
        }

        // Find the widget id from the intent. 
         Intent intent = getIntent();
         Bundle extras = intent.getExtras();
         if (extras != null) {
             mAppWidgetId = extras.getInt(
                     AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
         }

         // If they gave us an intent without the widget id, just bail.
         if (mAppWidgetId == AppWidgetManager.INVALID_APPWIDGET_ID) {
             finish();
         }
    }

    private ArrayList<String> GetActionList() {
        ArrayList<String> l = new ArrayList<String>();
        Page p = CommonActivity.GetPageNamed(getApplicationContext(), widgetPageName);
        if (p!=null) {
            if (p.pageObjects.size()==0) DisplayEmptyPageHelpDialog();
            for (int i = 0; i < p.pageObjects.size(); i++) {
                l.add(p.pageObjects.get(i).GetParsedMajorLabel(getApplicationContext()).toString());
            }
        }
        else {
            CreateWidgetPage();
            DisplayEmptyPageHelpDialog();
        }
        return l;
    }

    private void CreateWidgetPage() {
        Page widgetPage = new Page(getApplicationContext());
        widgetPage.setPageName(widgetPageName);
        widgetPage.SetPageType("list");
        widgetPage.setNote("Widget Page");
        widgetPage.setPageTitle("Widget Page");
        widgetPage.setImageFilename("");
        widgetPage.setTransparentImageOverlayFilename("");
        widgetPage.InsertInstanceIntoDatabase(getApplicationContext());
    }

     private void DisplayEmptyPageHelpDialog() {
        Dialog helpDialog = new Dialog(this);
        helpDialog.setContentView(R.layout.phca_help_dialog);
        helpDialog.setTitle("PHCA Widget");
        TextView helpText = (TextView) helpDialog.findViewById(R.id.tvHelpText);
        helpText.setText("Your _widget page is empty. Please add an action to the _widget page so it can be used in a widget.");
        TextView subTitle = (TextView) helpDialog.findViewById(R.id.tvSubject);
        subTitle.setText("PHCA Widget configurator");
        helpDialog.show();
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        SharedPreferences.Editor prefs = getSharedPreferences(PREFS_NAME, 0).edit();
         prefs.putInt(PREF_PREFIX_KEY + mAppWidgetId, position);
         prefs.commit();

         // Push widget update to surface with newly set prefix
         String majorLabel = CommonActivity.GetPageObjectAtIndex(getApplicationContext(), widgetPageName, position).GetParsedMajorLabel(getApplicationContext()).toString();
         String minorLabel = CommonActivity.GetPageObjectAtIndex(getApplicationContext(), widgetPageName, position).GetParsedMinorLabel(getApplicationContext()).toString();
         AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(getApplicationContext());
         PhcaAppWidgetProvider.updateAppWidget(getApplicationContext(), appWidgetManager,
                 mAppWidgetId, majorLabel, minorLabel);

         Intent resultValue = new Intent();
         resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mAppWidgetId);
         setResult(RESULT_OK, resultValue);
         finish();
    } 
```

这是我的 appwidget 提供者

```
 public class PhcaAppWidgetProvider extends AppWidgetProvider {
    private static final String ACTION_CLICK = "WIDGET_CLICKED";
    private final String widgetPageName = "_widget";
     private static final String PREFS_NAME = "PHCA";
     private static final String PREF_PREFIX_KEY = "prefix_";

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {

        // Get all ids
        ComponentName thisWidget = new ComponentName(context,
                PhcaAppWidgetProvider.class);
        //int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
        final int N = appWidgetIds.length;
         for (int i=0; i<N; i++) {
            int appWidgetId = appWidgetIds[i];

            SharedPreferences myPrefs = context.getSharedPreferences(PREFS_NAME, context.MODE_WORLD_WRITEABLE);
            Integer objNum = myPrefs.getInt(PREF_PREFIX_KEY + appWidgetId, -1);
            if (objNum > -1) {
                PageAction pa = (PageAction) CommonActivity.GetPageObjectAtIndex(context, widgetPageName, objNum);
                String majorLabel = pa.GetUnparsedMajorLabel(context).toString();
                String minorLabel = pa.GetUnparsedMinorLabel(context).toString();
                updateAppWidget(context, appWidgetManager, appWidgetId, majorLabel, minorLabel);
            }
        }
    }

    @Override
    public void onEnabled(Context context) {
        Log.d("Widget", "onEnabled");
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        String intentAction = intent.getAction();
        updateWidgetState(context, intentAction);
        if (intentAction.equals(ACTION_CLICK)) {
            Bundle extras = intent.getExtras();
            Integer appWidgetId = extras.getInt("appwidgetid");
            SharedPreferences myPrefs = context.getSharedPreferences(PREFS_NAME, context.MODE_WORLD_WRITEABLE);
            Integer objNum = myPrefs.getInt(PREF_PREFIX_KEY + appWidgetId, -1);
            if (objNum > -1) {
                PageAction pa = (PageAction) CommonActivity.GetPageObjectAtIndex(context, widgetPageName, objNum);
                pa.ExecuteActionFromWidgetClick(context);
            }
        } else {
            super.onReceive(context, intent);
        }
    }

    public static void updateWidgetState(Context paramContext, String paramString)
     {
        RemoteViews localRemoteViews = buildUpdate(paramContext, paramString);
        ComponentName localComponentName = new ComponentName(paramContext, PhcaAppWidgetProvider.class);
        AppWidgetManager.getInstance(paramContext).updateAppWidget(localComponentName, localRemoteViews);
     }

    private static RemoteViews buildUpdate(Context ctx, String paramString)
     {
        RemoteViews views = new RemoteViews(ctx.getPackageName(), R.layout.phca_appwidget);
        views.setTextViewText(R.id.majorlabel, "majorLabel");
        views.setTextViewText(R.id.minorlabel, "minorLabel");
        Intent intent = new Intent(ctx, PhcaAppWidgetProvider.class);
        intent.setAction(ACTION_CLICK);
        intent.putExtra("appwidgetid", 0);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(ctx, 0, intent , 0);
        views.setOnClickPendingIntent(R.layout.phca_appwidget, pendingIntent);
        if(paramString.equals(ACTION_CLICK))
        {
              Toast.makeText(ctx, "ACTION_CLICK", Toast.LENGTH_LONG).show();

        }            
        return views; 
     }
 } 
```

当我添加小部件并将其删除时，不同的意图被传递到 onReceive 中，因此可以正常工作，但单击时什么也没有。

问题2：有人可以指出我做错了什么吗？我非常关注这里的教程：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/appwidget/ExampleAppWidgetProvider.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/appwidget/ExampleAppWidgetProvider.html)

问题 3：似乎我可以在小部件的布局 xml 中放置一个 android:onclick="WidgetClicked"，但我不知道在哪里放置 WidgetClicked 方法。WidgetProvider 似乎合乎逻辑，但这对我也不起作用。有没有办法在xml中做到这一点？

免责声明：上面的代码是经过一天半的故障排除后的当前状态。它只是许多不同尝试的一次迭代。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:37:01.297

您需要在清单中为小部件单击设置接收器：

```
 <receiver android:name="MyAppWidgetProvider" >
     <intent-filter>
         <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
         <action android:name="com.myname.myapp.MyAppWidgetProvider.ACTION_CLICK" />
     </intent-filter>
     <meta-data android:name="android.appwidget.provider"
     android:resource="@xml/my_widget_info" />
 </receiver> 
```

AppWidgetProvider.java

```
public class MyAppWidgetProvider extends AppWidgetProvider {
    private static final String ACTION_CLICK = "ACTION_CLICK_WIDGET";
    private final String widgetPageName = "_widget";
    private static final String PREFS_NAME = "MYAPP";
    private static final String PREF_PREFIX_KEY = "prefix_";
    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {

        ComponentName thisWidget = new ComponentName(context,
                MyAppWidgetProvider.class);
        final int N = appWidgetIds.length;
        for (int i=0; i<N; i++) {
            int appWidgetId = appWidgetIds[i];

            SharedPreferences myPrefs = 
                context.getSharedPreferences(PREFS_NAME, context.MODE_WORLD_WRITEABLE);
            Integer objNum = myPrefs.getInt(PREF_PREFIX_KEY + appWidgetId, -1);
            if (objNum > -1) {
                PageAction pa = (PageAction) CommonActivity
                    .GetPageObjectAtIndex(context, widgetPageName, objNum);
                String majorLabel = pa.GetUnparsedMajorLabel(context).toString();
                String minorLabel = pa.GetUnparsedMinorLabel(context).toString();
                updateAppWidget(context, appWidgetManager, 
                    appWidgetId, majorLabel, minorLabel);
            }
        }
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        String intentAction = intent.getAction();
        if (intentAction.equals(ACTION_CLICK)) {
        updateWidgetState(paramContext, str);
            Bundle extras = intent.getExtras();
            Integer appWidgetId = extras.getInt("appwidgetid");
            SharedPreferences myPrefs = 
            context.getSharedPreferences(PREFS_NAME, context.MODE_WORLD_WRITEABLE);
            Integer objNum = myPrefs.getInt(PREF_PREFIX_KEY + appWidgetId, -1);
            if (objNum > -1) {
                PageAction pa = (PageAction) CommonActivity
                .GetPageObjectAtIndex(context, widgetPageName, objNum);
                pa.ExecuteActionFromWidgetClick(context);
            }
        } else {
            super.onReceive(context, intent);
        }
    } 

public static void updateWidgetState(Context paramContext, String paramString)
          {
            RemoteViews localRemoteViews = buildUpdate(paramContext, paramString);
            ComponentName localComponentName = new ComponentName(paramContext, MyAppWidgetProvider.class);
            AppWidgetManager.getInstance(paramContext).updateAppWidget(localComponentName, localRemoteViews);
          }

    private static RemoteViews buildUpdate(Context ctx, String paramString)
          {
         RemoteViews views = 
         new RemoteViews(ctx.getPackageName(), R.layout.my_appwidget);
        views.setTextViewText(R.id.majorlabel, majorLabel);
        views.setTextViewText(R.id.minorlabel, minorLabel);
        Intent intent = new Intent(ctx, MyAppWidgetProvider.class);
        intent.setAction(ACTION_CLICK);
        intent.putExtra("appwidgetid", mAppWidgetId);
        PendingIntent configPendingIntentprev = PendingIntent.getBroadcast(ctx, 0, intent , 0);
        views.setOnClickPendingIntent(R.layout.my_appwidget, pendingIntent);
            if(parmString.equals(ACTION_CLICK))
            {
             //Toast.maketext("").show();
             //

            }            
             return rview; 
          }
 } 
```

有关完整示例，请参阅我在[这篇](https://stackoverflow.com/questions/10100217/how-to-find-which-button-has-been-clicked-in-app-widgets-in-android/10100739#10100739)文章中的回答。

# nsis - nsis 脚本被 avira 标记为特洛伊木马

> ID：10552354
> 
> 赞同：0
> 
> 时间：2012-05-11T13:31:08.287
> 
> 标签：nsis, virus, false-positive

当我重新配置我的 nsis 脚本以执行脚本的某些部分时，我的 nsis 脚本被标记为木马“tr/kdv.hg.1”，没有问题。但是脚本加在一起给出了误报。现在有人知道 nsis 的哪些功能可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:44:43.307

NSISdl, INetC and Dialer are the most common triggers AFAIK. Submit a sample [here](http://analysis.avira.com/samples/index.php) to get it fixed...

There is an old thread about Avira on the [forum](http://forums.winamp.com/showthread.php?t=290285).

# javascript - 如何减少每个空选择的使用错误消息

> ID：10552359
> 
> 赞同：0
> 
> 时间：2012-05-11T13:31:28.037
> 
> 标签：javascript, jquery, html, css

```
<div id="deletePlace">
    <ul>
        <li class="pDeleteul">
            <label>Country</label>
            <select id="dpCountry">
                <option>choose country</option>
                <option>Damascus</option>
                <option>Aleepo</option>
            </select>
        </li>
        <li class="pDeleteul">
            <label>Cell</label>
            <select id="dpCell">
                <option>choose cell</option>
                <option>c1</option>
                <option>c2</option>
            </select>
        </li>
        <li class="pDeleteul">
            <label>Place</label>
            <select id="dpPlace">
                <option>choose place</option>
                <option>p1</option>
                <option>p2</option>
            </select>
            <input type="button" value="delete" onclick="deletePlace()"/>
        </li>
    </ul>
</div> 
```

**它只有 3 个标签和 3 个选项**

当按下删除按钮时，如果用户没有选择任何选择的任何选项，它应该在空选择的左侧显示一条错误消息。

我可以通过将错误消息添加到每个选择中来做到这一点，并在我的 js 中检查选择是否为空，使错误消息出现，但这使我编写越来越多的重复代码。有没有办法使用javascript（或jQuery）使错误消息动态创建一个出现在使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:55:45.160

试试这个 ：

```
$('input[value=delete]').click(function() {
    $('.error').remove();
    $('select').each(function() {
        $this = $(this);
        if ($this[0].selectedIndex === 0) {
            $this.parent().prepend('<span class="error">Error</span>');
        }
    })
});​ 
```

每行的作用：

```
$('input[value=delete]').click(function() { 
```

这将一个函数附加到按钮的`click`事件`delete`（使用[属性等于选择器](http://api.jquery.com/attribute-equals-selector/)） - 使用[.click()](http://api.jquery.com/click/)

```
$('.error').remove(); 
```

删除已经存在的任何错误（类的 DOM 元素`error`） - 使用[.remove()](http://api.jquery.com/remove/)

```
$('select').each(function() { 
```

在每个上执行一个函数`select`- 使用[.each()](http://api.jquery.com/each/)

```
$this = $(this); 
```

保存`$(this)`以备后用 - 如果多次使用一个对象，它会更好（为了性能）“缓存”它

```
if ($this[0].selectedIndex === 0) { 
```

如果`selectedIndex`选择列表的 是`0`然后执行

```
$this.parent().prepend('<span class="error">Error</span>'); 
```

使用.prepend( [)](http://api.jquery.com/prepend/)将一些 HTML 添加到当前的[.parent()](http://api.jquery.com/parent/) ( `li`)`select`

**[这里的工作示例](http://jsfiddle.net/QQAQJ/2/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T13:47:16.057

试试这个-->

```
$('input[type=button]').on('click', function(e){
        $.each( $('select'), function(){ if( $(this).find('option:selected').val().indexOf('choose') > -1 ) alert('error');    }) 
```

# javascript - EmberJS 历史/撤消

> ID：10552360
> 
> 赞同：12
> 
> 时间：2012-05-11T13:31:30.677
> 
> 标签：javascript, ember.js, undo

**编辑：我在[GitHub 上做了我自己的实现](https://github.com/ignasbernotas/ember-history)**

我想知道，ember 中是否有允许保存对象/数组状态的内置功能？在我们的应用程序中，我们为特定的 Ember.ArrayController 构建了自己的撤消/历史实现，但它似乎有问题且速度慢（在 Firefox 中）。所以我想知道是否有任何东西可以取代我们的脚本。

基本上我们使用它的目的：用户添加、编辑、修改该数组中的元素，有时他们想要撤消/重做他们的更改。目前我们将状态数量限制为 30（可能不是最佳数量）。

任何想法/链接表示赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T11:01:08.897

我已经实现了一个 mixin “Memento”，它跟踪`mementoProperties`数组中定义的属性的变化。它支持*普通*属性以及*数组*属性。

基本思想如下：当 mixin 被初始化时，它将自己注册为属性变化的观察者。属性更改会向`memento`数组中添加一个新项目，该项目表示所做更改的历史记录。调用`undo`将属性设置为更改之前的状态。`redo`分别重置该值。

[mixin](https://github.com/pangratz/ember-memento/blob/master/app/lib/memento.js)托管在 GitHub 的ember **[-memento](https://github.com/pangratz/ember-memento)**上。可以按如下方式使用，参见[http://jsfiddle.net/pangratz666/9fa95/](http://jsfiddle.net/pangratz666/9fa95/)：

```
App.obj = Ember.Object.create(Ember.Memento, {
    name: 'hello',
    myArray: [],
    age: 12,

    mementoProperties: 'name age myArray'.w()
});

App.obj.get('myArray').pushObject(1);
App.obj.get('myArray').pushObject(2);
App.obj.get('myArray').pushObject(3);
App.obj.set('name', 'hubert');
App.obj.get('myArray').pushObject(4);
App.obj.set('age', 190);
App.obj.get('myArray').pushObjects(['a', 'b']);

App.obj.undo(); // myArray = [1,2,3,4]
App.obj.undo(); // age = 12
App.obj.undo(); // myArray = [1,2,3]
App.obj.undo(); // name = 'hello'
App.obj.redo(); // name = 'hubert'
App.obj.redo(); // myArray = [1,2,3,4]
App.obj.redo(); // age = 190 
```

# hibernate - Hibernate 工具：解析 JNDI 名称时出错

> ID：10552362
> 
> 赞同：18
> 
> 时间：2012-05-11T13:31:39.643
> 
> 标签：hibernate, hibernate-tools

我们正在尝试从 Hibernate 3.6.7 升级到 4.1.2 和 Hibernate Tools 3.2.0 到 3.5.0

我们使用 Ant 生成数据库创建脚本：

```
 <hibernatetool destdir="${target}">
        <jpaconfiguration persistenceunit="stdcmpOrderPersistenceUnit" propertyfile="@{propertyfile}"/>
        <classpath refid="@{classpathid}"/>
        <!-- the file name is relative to $destdir -->
        <hbm2ddl outputfilename="@{output}" format="true" export="false" drop="false"/>
     </hibernatetool> 
```

我们的持久化单元如下所示：

```
<persistence-unit name="stdcmpOrderPersistenceUnit" transaction-type="JTA">

    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/lakshmi_stdcmp</jta-data-source>
    <mapping-file>META-INF/stdcmpOrderNamedQueries.xml</mapping-file>

    <class>ch.ethz.id.wai.lakshmi.stdcmp.persistency.PersistentOrder</class>

    <exclude-unlisted-classes>true</exclude-unlisted-classes>

    <properties>
        <property name="hibernate.show_sql" value="false"/>
        <property name="hibernate.format_sql" value="false"/>
    </properties>

</persistence-unit> 
```

升级后我们收到以下错误：

```
[hibernatetool] org.hibernate.service.jndi.JndiException: Error parsing JNDI name [jdbc/lakshmi_stdcmp]
[hibernatetool] javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial 
```

既然 PersistenceUnit 上的所有信息都可用，为什么 Hibernate 会尝试解析 JNDI 名称？我们对旧版本没有任何问题。

无论如何，我们如何指定 NamingFactory？（和哪一个？）

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-06T16:05:38.420

我遇到了类似的问题，特别是导致“解析 JNDI 名称时出错”，只需从 session-factory 标记中删除空名称属性即可轻松解决。

我的 hibernate.cfg.xml 有

```
<session-factory name=""> 
```

这是自动生成的，所以我只是删除了`name`属性。

此修复程序在这里找到：[https ://forum.hibernate.org/viewtopic.php?f=1&t=1014760](https://forum.hibernate.org/viewtopic.php?f=1&t=1014760)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T17:09:49.733

问题来自您的休眠工具，您已将休眠工具配置为使用具有通过 JNDI 配置的 jta 数据源的持久性单元。为了让 ant 任务与 JNDI 对话，它需要命名工厂 url 和提供者。使用配置数据源的应用程序服务器的命名工厂类。

希望能帮助到你。

# jquery - 带有 .toggle .css 的 JQuery

> ID：10552365
> 
> 赞同：1
> 
> 时间：2012-05-11T13:31:44.833
> 
> 标签：jquery, css

我有一个显示 200 像素的 div。当我单击 div 中的图像时，我想显示 1000px。然后再次单击时再次接近 200px。

这是我的代码：

```
<script type="text/javascript">
$(document).ready(function() {
    // shows the slickbox DIV on clicking the link with an ID of "slick-show"

$('#slickbox').css("height", "200px");      
$('#slick-show').click(function() {
        $('#slickbox').toggle(function () {
    $("#slickbox").css("height", "1000px");
}, function () {
    $("#slickbox").css("height", "200px");
      });
});
return false;

});
</script>

<div id="slickbox" style="height: 1000px;">
<p style="text-align: center;">
<a id="slick-show" href="#"><img src="/ImageVaultFiles/id_468115/cf_69211/Happy_monday14-5.jpg" border="0" alt="Happy_monday14-5" /></a></p>
</div> 
```

代码有效，但我必须在第一次打开后每次双击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:41:47.583

这是因为您在单击元素后附加切换功能，避免.click：

```
 $(function() {
        // shows the slickbox DIV on clicking the link with an ID of "slick-show"

    $('#slickbox').css("height", "200px");      
    $('#slick-show').toggle(function () {
        $("#slickbox").css("height", "1000px");
    }, function () {
        $("#slickbox").css("height", "200px");
          });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T13:41:28.710

你在滥用`toggle`.

[http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

> 描述：将两个或多个处理程序绑定到匹配的元素，以在交替单击时执行。

`toggle`应该只调用一次。它将绑定点击处理程序，该处理程序将在交替点击时触发。您正在做的是每次单击时重新绑定单击处理程序。你真正想做的是这样的：

```
$('#slickbox').css("height", "200px");      
$('#slick-show').toggle(function () {
    $("#slickbox").css("height", "1000px");
}, function () {
    $("#slickbox").css("height", "200px");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:42:45.570

.click() 和 .toggle() 是多余的—— .toggle() 假设有人要点击一个元素。请参阅文档中的描述：“将两个或多个处理程序绑定到匹配的元素，以在交替单击时执行。” 只需省略 .click() 即可获得所需的行为..

```
$(document).ready(function() {
    $('#slickbox').css("height", "200px");   
    $('#slick-show').toggle(function() {
        $("#slickbox").css("height", "1000px");
    }, function() {
            $("#slickbox").css("height", "200px");
      });   
})​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:36:22.947

为不同的样式或宽度或高度或任何东西使用 CSS 类

然后使用

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

用于切换任何风格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T13:49:42.860

是的，你的`toggle`功能不正确。这是一个工作示例：

[http://jsfiddle.net/LsdUQ/](http://jsfiddle.net/LsdUQ/)

# iphone - 在我得到 Error Domain=NSPOSIXErrorDomain Code=57 后 NSURLConnection 不会响应

> ID：10552371
> 
> 赞同：1
> 
> 时间：2012-05-11T13:32:21.420
> 
> 标签：iphone, objective-c, ios, websocket, socket.io

所以这里是这个问题的简要描述：

我有一个使用 Web 套接字的应用程序 SocketRocket - 客户端，Nodejs + Socket.io - 服务器端。我在启动应用程序时建立了一个套接字连接，一切正常。如果我暂停应用程序（进入后台、锁定屏幕等），我可以在进入前台时重新连接。
但是，如果我失去连接（例如，如果我在路由器上阻止自己（我在 5-10 秒内收到套接字故障错误），然后解除阻止自己） - 我将无法使用`NSURLConnection`. （我为什么要为此烦恼？嗯，人们往往会在移动设备上经常放松，所以我必须处理这个错误）

如果我以前有一个工作连接，则会在连接恢复/进入前台时调用此代码。

```
 -(void) connectToHost:(NSString *)host onPort:(NSInteger)port withParams:(NSDictionary*)params withNamespace:(NSString *)endpoint
{    

  if (!_isConnected && !_isConnecting) 
  {
    _isConnecting = YES;

    _host = host;
    _port = port;
    _endpoint = [endpoint copy];

    NSMutableString *query = [[NSMutableString alloc] initWithString:@""];
    [params enumerateKeysAndObjectsUsingBlock: ^(id key, id value, BOOL *stop) {
        [query appendFormat:@"&%@=%@",key,value];
    }];

    NSString *s = [NSString stringWithFormat:HANDSHAKE_URL, _host, _port, rand(), query];
    [self log:[NSString stringWithFormat:@"Connecting to socket with URL: %@",s]];        

    _timeout = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(disconnect) userInfo:nil repeats:NO];

    [[LRResty client] get:s withBlock:^(LRRestyResponse *response) {
        [_timeout invalidate], _timeout = nil;                                
        if ( response.status == 200 )
        {
            NSString *responseString = [response asString];

            [self log:[NSString stringWithFormat:@"requestFinished() %@", responseString]];
            NSArray *data = [responseString componentsSeparatedByString:@":"];

            _sid = [data objectAtIndex:0];
            [self log:[NSString stringWithFormat:@"sid: %@", _sid]];

            _heartbeatTimeout = [[data objectAtIndex:1] floatValue] + 7.0;
            [self log:[NSString stringWithFormat:@"heartbeatTimeout: %f", _heartbeatTimeout]];

            NSString *t = [data objectAtIndex:3];
            NSArray *transports = [t componentsSeparatedByString:@","];
            [self log:[NSString stringWithFormat:@"transports: %@", transports]];

            [self openSocket];                 
        }
        else
        {
            [_delegate socketIOHandshakeFailed:self];
        }
    }];                       
  }                 
} 
```

这就是我在正常情况下得到的：

```
Connecting to socket with URL: https://example.com:9001/socket.io/1/?t=282442 
requestFinished() ==> 843717395328441553:60:60:websocket
debug: Finished request GET https://example.com:9001/socket.io/1/?t=282442 <LRRestyRequest> 
```

如果我在连接失败后尝试重新连接：

```
Connecting to socket with URL: https://example.com:9001/socket.io/1/?t=282475249 
```

我尝试运行同步请求，但它会阻止我的 UI 并且永远不会完成。因此，实际上请求可能正在尝试启动，但从未到达执行点。

如果我在调试器中暂停应用程序，这就是我得到的结果：您可以在此处查看屏幕截图 -> [http://avvs.co/static/app_paused.jpg](http://avvs.co/static/app_paused.jpg)
检查线程 7 -

```
#0 0x9855fc22 in mach_msg_trap ()
#7 0x026852d3 in -[NSRunLoop(NSRunLoop) run] ()
#8 0x00019b1b in -[LRURLRequestOperation start]
#9 0x00016670 in -[LRRestyRequest start] 
```

**更新**
这是该线程的完整操作列表，如果您能指出此处的问题，将非常高兴

```
#0  0x9855fc22 in mach_msg_trap ()
#1  0x9855f1f6 in mach_msg ()
#2  0x0073c10a in __CFRunLoopServiceMachPort ()
#3  0x0069f5d5 in __CFRunLoopRun ()
#4  0x0069ed84 in CFRunLoopRunSpecific ()
#5  0x0069ec9b in CFRunLoopRunInMode ()
#6  0x0268540f in -[NSRunLoop(NSRunLoop) runMode:beforeDate:] ()
#7  0x026852d3 in -[NSRunLoop(NSRunLoop) run] ()
#8  0x00019b0b in -[LRURLRequestOperation start]
#9  0x00016660 in -[LRRestyRequest start] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:48:41.603

我终于找到了解决方案。实际问题不在 NSURLConnection 中，而在套接字实现中。当失去连接时，应用程序正在关闭输入和输出流，但它们没有从运行循环中删除，也没有被分派。通过修复它，我能够恢复连接。

# uml - 垂直和水平同步线

> ID：10552374
> 
> 赞同：4
> 
> 时间：2012-05-11T13:32:40.627
> 
> 标签：uml

UML活动图上的水平和垂直同步线有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:32:59.493

没有语义差异

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T09:39:32.720

个人/审美布局偏好。

# javascript - 找出 HTML 高度是按样式还是按内容设置的

> ID：10552382
> 
> 赞同：19
> 
> 时间：2012-05-11T13:33:13.217
> 
> 标签：javascript, jquery, html, jquery-ui

我有 2 个 div：

```
<div id="div1"></div>
<div id="div2">div2</div>​ 
```

在我的 CSS 中：

```
#div1{ height:20px}​ 
```

两个 div 的高度均为 20px，请查看[演示](http://jsfiddle.net/ayUsw/1/)
如何确定 div 是否因内容而具有高度，或者是否已设置为 css 或内联样式？
这有助于我找出**开发人员**设置的尺寸或浏览器刚刚计算的尺寸。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T13:52:26.063

我找到了实现它的方法:)

```
function getRealHeight(element){
    var height=0;
    if (element.children().length>0){
        var temp = $('<div></div>');
        temp.append(element.children());
        height = element.height();
        element.append(temp.children());
    } else {
        var html=element.html();
        element.html('');
        height = element.height();
        element.html(html);
    }
    return height;
} 
```

​</p>

​<a href="http://jsfiddle.net/ayUsw/10/">演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:10:38.793

使用这个功能：

```
function emptyHeight ( elem ) {
    var $temp = $( '<div />' );
    var $elem = $( elem );
    var height;

    $temp.append( $elem.contents() );
    height = $elem.height();
    $elem.append( $temp.contents() );

    return height;   
} 
```

这个想法是暂时从元素中分离所有子节点。没有子元素的元素的高度为`0`，*除非*它的高度是通过 CSS 设置的。

将您的 DIV 元素传递给该函数。如果返回`0`，则表示 DIV 没有*通过*CSS 设置其高度。

```
if ( emptyHeight( yourDiv ) === 0 ) {
    // the DIV does not have any height value set via CSS
} else {
    // the DIV has a CSS height set
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:39:11.967

您可以使用 jQuery 搜索 CSS 高度值并进行比较吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T13:39:51.843

```
<div id="div-styled" style="height: 20px"></div>
<div id="div-unstyled"></div> 
```

使用纯 JavaScript检查***内联***CSS属性`height`

```
document.getElementById('div-styled').style.height // "20px"
document.getElementById('div-unstyled').style.height.length // 0 
```

* * *

**更新**

jQuery 也从外部样式表返回样式规则`.css()`

```
var $el = $('#container');
$el.html( $el.css('height') );
```

```
#container {
  height: 42px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.2.3/jquery.min.js"></script>
<div id="container"></div>
```

# r - R中列表列表的乘法组合

> ID：10552387
> 
> 赞同：7
> 
> 时间：2012-05-11T13:33:28.020
> 
> 标签：r

给定一个包含两个列表的列表，我试图在不使用 for 循环的情况下获得第一个列表与第二个列表的所有元素乘积的列表。例如：

```
> a <- list(c(1,2), c(2,3), c(4,5))
> b <- list(c(1,3), c(3,4), c(6,2))
> c <- list(a, b) 
```

该函数应返回一个包含 9 个条目的列表，每个条目大小为 2。例如，

```
> answer
[[1]]
[1] 1 6

[[2]]
[1] 3 8

[[3]]
[1] 6 4

[[4]]
[1] 2 9

[[5]]
[1] 6 12

etc... 
```

我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T13:40:42.547

一种快速（但占用大量内存）的方法是将 mapply 机制与参数回收结合使用，如下所示：

```
mapply(`*`,a,rep(b,each=length(a))) 
```

给出：

```
> mapply(`*`,a,rep(b,each=length(a)))
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
[1,]    1    2    4    3    6   12    6   12   24
[2,]    6    9   15    8   12   20    4    6   10 
```

或替换`a`为`c[[1]]`和`b`以`c[[2]]`获得相同的结果。要获取列表，请设置参数`SIMPLIFY = FALSE`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T14:01:27.653

不知道这是快速还是内存密集型只是它有效，Joris Meys 的回答更有说服力：

```
x <- expand.grid(1:length(a), 1:length(b))
x <- x[order(x$Var1), ]    #gives the order you asked for
FUN <- function(i)  diag(outer(a[[x[i, 1]]], b[[x[i, 2]]], "*"))
sapply(1:nrow(x), FUN)     #I like this out put
lapply(1:nrow(x), FUN)     #This one matches what you asked for 
```

**编辑：**既然布赖恩介绍了基准测试（我喜欢（[链接](http://trinkerrstuff.wordpress.com/2012/04/28/microbenchmarking-with/)）），我必须做出回应。实际上，我使用我称之为 expand.grid2 的东西有一个更快的答案，它是我从[HERE](https://stackoverflow.com/questions/10405637/use-outer-instead-of-expand-grid)偷来的原版的重量较轻的版本。我之前打算把它扔掉，但当我看到 Joris 的速度有多快时，我想为什么要这么麻烦，既短又甜又快。但是现在 Diggs 已经挖好了，我想我会`expand.grid2`为了教育目的把它扔在这里。

```
expand.grid2 <-function(seq1,seq2) {
    cbind(Var1 = rep.int(seq1, length(seq2)), 
    Var2 = rep.int(seq2, rep.int(length(seq1),length(seq2))))
}

x <- expand.grid2(1:length(a), 1:length(b))
x <- x[order(x[,'Var1']), ]    #gives the order you asked for
FUN <- function(i)  diag(outer(a[[x[i, 1]]], b[[x[i, 2]]], "*"))
lapply(1:nrow(x), FUN) 
```

这是结果（与 Bryan 的标签相同，但 TylerEG2 使用的是`expand.grid2`）：

```
Unit: microseconds
            expr      min       lq   median       uq      max
1   DiggsL(a, b) 5102.296 5307.816 5471.578 5887.516 70965.58
2   DiggsM(a, b)  384.912  428.769  443.466  461.428 36213.89
3    Joris(a, b)   91.446  105.210  123.172  130.171 16833.47
4 TylerEG2(a, b)  392.377  425.503  438.100  453.263 32208.94
5   TylerL(a, b) 1752.398 1808.852 1847.577 1975.880 49214.10
6   TylerM(a, b) 1827.515 1888.867 1925.959 2090.421 75766.01
7 Wojciech(a, b) 1719.740 1771.760 1807.686 1924.325 81666.12 
```

如果我采取订购步骤，我可以更加尖叫，但它仍然与 Joris 的答案不相近。

![在此处输入图像描述](../Images/ca994705c754bc665e900e57d9d2e579.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T20:38:26.767

将其他答案中的想法汇总在一起，我将再添加一条线来取乐：

```
do.call(mapply, c(FUN=`*`, as.list(expand.grid(b, a)))) 
```

这使

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
[1,]    1    3    6    2    6   12    4   12   24
[2,]    6    8    4    9   12    6   15   20   10 
```

如果您确实需要您提供的格式，那么您可以使用该`plyr`库将其转换为：

```
library("plyr")
as.list(unname(alply(do.call(mapply, c(FUN=`*`, as.list(expand.grid(b, a)))), 2))) 
```

这使

```
[[1]]
[1] 1 6

[[2]]
[1] 3 8

[[3]]
[1] 6 4

[[4]]
[1] 2 9

[[5]]
[1]  6 12

[[6]]
[1] 12  6

[[7]]
[1]  4 15

[[8]]
[1] 12 20

[[9]]
[1] 24 10 
```

* * *

只是为了好玩，基准测试：

```
Joris <- function(a, b) {
    mapply(`*`,a,rep(b,each=length(a)))
}

TylerM <- function(a, b) {
    x <- expand.grid(1:length(a), 1:length(b))
    x <- x[order(x$Var1), ]    #gives the order you asked for
    FUN <- function(i)  diag(outer(a[[x[i, 1]]], b[[x[i, 2]]], "*"))
    sapply(1:nrow(x), FUN)
}

TylerL <- function(a, b) {
    x <- expand.grid(1:length(a), 1:length(b))
    x <- x[order(x$Var1), ]    #gives the order you asked for
    FUN <- function(i)  diag(outer(a[[x[i, 1]]], b[[x[i, 2]]], "*"))
    lapply(1:nrow(x), FUN)
}

Wojciech <- function(a, b) {
    # Matrix with indicies for elements to multiply
    G <- expand.grid(1:3,1:3)

    # Coversion of G to list
    L <- lapply(1:nrow(G),function(x,d=G) d[x,])

    lapply(L,function(i,x=a,y=b) x[[i[[2]]]]*y[[i[[1]]]])
}

DiggsM <- function(a, b) {
    do.call(mapply, c(FUN=`*`, as.list(expand.grid(b, a))))
}

DiggsL <- function(a, b) {
    as.list(unname(alply(t(do.call(mapply, c(FUN=`*`, as.list(expand.grid(b, a))))), 1)))
} 
```

和基准

```
> library("rbenchmark")
> benchmark(Joris(b,a),
+           TylerM(a,b),
+           TylerL(a,b),
+           Wojciech(a,b),
+           DiggsM(a,b),
+           DiggsL(a,b),
+           order = "relative", 
+           replications = 1000,
+           columns = c("test", "elapsed", "relative"))
            test elapsed relative
1    Joris(b, a)    0.08    1.000
5   DiggsM(a, b)    0.26    3.250
4 Wojciech(a, b)    1.34   16.750
3   TylerL(a, b)    1.36   17.000
2   TylerM(a, b)    1.40   17.500
6   DiggsL(a, b)    3.49   43.625 
```

并表明它们是等价的：

```
> identical(Joris(b,a), TylerM(a,b))
[1] TRUE
> identical(Joris(b,a), DiggsM(a,b))
[1] TRUE
> identical(TylerL(a,b), Wojciech(a,b))
[1] TRUE
> identical(TylerL(a,b), DiggsL(a,b))
[1] TRUE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T20:17:05.030

```
# Your data
a <- list(c(1,2), c(2,3), c(4,5))
b <- list(c(1,3), c(3,4), c(6,2))

# Matrix with indicies for elements to multiply
G <- expand.grid(1:3,1:3)

# Coversion of G to list
L <- lapply(1:nrow(G),function(x,d=G) d[x,])

lapply(L,function(i,x=a,y=b) x[[i[[2]]]]*y[[i[[1]]]]) 
```

# php - PHP 无法打开远程文件

> ID：10552388
> 
> 赞同：0
> 
> 时间：2012-05-11T13:33:29.413
> 
> 标签：php, fopen

我正在制作一个脚本来打开远程文件（ftp）并使用 fopen 和 fwrite 对其进行编辑。我在连接到 ftp 时遇到问题。我制作了这段代码

```
 $handle =        fopen("ftp://".$ftp['username'].":".$ftp['password']."@".$ftp['server']."/cstrike/addons/amxmodx/configs/users.ini", "w") or die("ftp error");
fwrite($handle,$text."\n") or die('err2.'); 
```

设置了所有变量。我在网页中尝试使用 ftp://... 并且它有效。allow_url_fopen 开启...它只是说“ftp 错误”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:44:20.140

该`ftp://`处理程序[仅允许](http://www.php.net/manual/en/wrappers.ftp.php)使用`fopen("ftp://...", "w");`.

如果文件已经存在，则只有在使用覆盖集（即 mode ）打开它时才能写入它`w+`。

# java - 画布元素或动态表单生成器

> ID：10552389
> 
> 赞同：0
> 
> 时间：2012-05-11T13:33:29.707
> 
> 标签：java, canvas

我需要一个由可变数量的行和列（可由用户选择）组成的表单，我可以在其中插入值并处理它们。

我的问题是：是否可以使用画布，或者我应该只使用 java 脚本吗？请记住，对于要插入的数据，我需要表格格式（行和列对齐，无论插入的数据的长度如何），因为以易于用户阅读的方式构造信息很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:37:38.337

使用 Canvas 作为表格可能不是一个好主意。您必须自己完成所有渲染、定位、滚动、选择、编辑等。这是很多工作。使用表格元素并使用 javascript 和/或 jQuery 对其进行操作。或者考虑使用 DataTables 插件或类似插件。

# python - 使用 python 打印刷新标准输出行的问题

> ID：10552394
> 
> 赞同：2
> 
> 时间：2012-05-11T13:33:44.863
> 
> 标签：python, python-2.7, stdout

我一直在尝试使用以下代码在 python2.7 中打印出 for 循环的进度：

```
for i in range(100):
    if float(i) % 10.0 == 0:
        print i, "\r", 
```

我所追求的行为是在标准输出上刷新同一行，而不是每次都写入新行。

编辑1：

在我的控制台（Xfce Terminal 0.4.8）中进行测试，无论我是否包含该`if`语句，我实际上都没有得到任何输出。

**为什么没有输出？**

我最初说标准输出的行为取决于是否存在 if 语句，因为我将产生问题的代码简化为最简单的形式（仅产生上述效果）。我很抱歉。

编辑2：

感谢[senderle](https://stackoverflow.com/a/10552693/1358677)，这已经解决了。如果您错过了`sleep()`命令，打印和回车会发生得太快，以至于您看不到它们。

编辑 3：

最后一件事。如果您没有找到 中的最后一个数字`range(100)`，即 99，则该数字会从屏幕上清除。

编辑4：

注意[senderle](https://stackoverflow.com/a/10552693/1358677)的答案后面`print i`的逗号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:50:44.680

我发现 using`sys.stdout`是一种更加独立于系统的方式，因为各种原因与`print`工作方式有关。但是你必须`flush`明确地缓冲，所以我把它放在一个函数中。

```
def carriage_return():
    sys.stdout.write('\r')
    sys.stdout.flush() 
```

这是一种WAG。让我知道它是否有帮助。

我试过这个，它对我有用。这`time.sleep`只是为了戏剧化。

```
import sys, time

def carriage_return():
    sys.stdout.write('\r')
    sys.stdout.flush()

for i in range(100):
    if i % 10 == 0:
        print i,
        carriage_return()
        time.sleep(1) 
```

最后，我看到人们也这样做。使用这样的终端控制代码在某些方面似乎是正确的，但对我来说似乎更脆弱。这也适用于我上面的代码（在 OS X 上）。

```
def carriage_return():
    if sys.platform.lower().startswith('win'):
        print '\r'
    else:
        print chr(27) + '[A' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:43:39.757

按原样测试您的代码，并且只在第一行的末尾包含一个 :colon: ，在 Py2.7 32 位、Windows7 64 位上工作得很好。

您的`if`or`for`块中是否有任何对标准输出的输出写入可能导致新行被写出？

# php - 简单的正则表达式用相同的数量替换所有

> ID：10552401
> 
> 赞同：0
> 
> 时间：2012-05-11T13:34:09.973
> 
> 标签：php, regex, replace

我似乎无法做到这一点！

我正在尝试用相同数量的其他字符替换相同数量的空格：

```
$s="abc  def f";
echo preg_replace('/[\s*]+/', 'X', $s); 
```

## 期待 abcXXdefXf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:39:39.037

你需要正则表达式吗？

```
$s = 'abc  def f';
echo str_replace(' ', 'X', $s); // output: abcXXdefXf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:40:31.563

只需使用`str_replace`.

```
str_replace(" ", "X", $s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:37:42.267

```
$s="abc  def f";
echo preg_replace('/\s/', 'X', $s); 
```

# android - 我需要在所有移动设备上测试这个网站

> ID：10552402
> 
> 赞同：0
> 
> 时间：2012-05-11T13:34:10.820
> 
> 标签：android, iphone, blackberry, mobile

有什么方法可以在所有移动设备上测试我的网站。

我有一个可以在线测试的链接 - [http://iphonetester.com/](http://iphonetester.com/)

任何人都可以提供最佳解决方案来测试以下在线移动设备中的响应式设计或网站。

*   安卓手机
*   黑莓
*   苹果手机

提前致谢

[http://new.brandonplanning.com/home](http://new.brandonplanning.com/home)

我会非常感谢他们:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:42:30.317

我将以下内容用于移动测试（请记住，真实设备是最好的测试方式）

*   [Electric Plum iPhone Simulator](http://www.electricplum.com/dlsim.html)（有免费版）
*   [Opera 移动模拟器](http://www.opera.com/developer/tools/mobile/)

对于 Blackberry，您可能需要下载 RIM 的 Simulator / SDK。Android SDK 也适合测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:11:55.097

对于 iPhone，你可以下载一个叫做 iPhoney 的东西。有时它会搞砸，但这可能是我能找到的最准确的东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T13:36:16.103

utest.com 提供测试服务。

[测试](http://www.utest.com/)

他们提供所有移动设备的测试，但需要付费

# c# - C# 绑定到另一个 ObservableCollection 中的 ObservableCollection

> ID：10552403
> 
> 赞同：3
> 
> 时间：2012-05-11T13:34:10.770
> 
> 标签：c#, wpf, binding, observablecollection

我有一个 ObserveableCollection，其中包含另一个 ObserveableCollection。在我的 WPF 中，我设置了对 Persons.Lectures 的绑定。我现在的问题是，当我更改“讲座”集合中的任何值时，“人员”集合也不会通知我的绑定。将 ObserveableCollection 用于另一个 ObserveableCollection 时，这通常是一个问题吗？

我该如何解决这个问题，以便我的绑定会做出反应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:47:15.473

ObservableCollection 实现[了 INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)，它会通知您集合本身的更改（添加、顺序更改等）。

如果您希望您的绑定更新，那么 ObservableCollection 中包含的实际对象必须实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)。您可能会注意到集合也确实实现了该接口，但这是通知集合对象本身属性的更改，而不是其内容属性的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:06:57.980

我对您的情况并不完全清楚。“Persons”是 ObservableCollection 吗？但是，您是说它具有“讲座”属性，而标准 ObservableCollection 并非如此。这是一个继承自 ObservableCollection 的新类，它有一个“Lectures”属性，也是一个 ObservableCollection？

我猜你有一个 ObservableCollection 的 Person 对象，它们本身有一个 ObservableCollection 的讲座。是这样吗？如果是这样，也许您只是错误地构建了绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:13:55.913

虽然我（和一般的 WPF）更喜欢`ObservableCollection`，但我建议你使用`BindingList`这个“特定”的目的。

据我所知，`BindingList`在另一种`BindingList`情况下，将集合更改通知向上传播，而无需任何额外的管道。

试着让我知道。

# iphone - NSURLConnection http 请求调用从 applicationWillEnterForeground 方法刷新

> ID：10552404
> 
> 赞同：0
> 
> 时间：2012-05-11T13:34:18.647
> 
> 标签：iphone, objective-c, ios, xcode

我的应用程序是基于位置的应用程序，它运行良好。现在我想在我来自后台时刷新信息。`AppDelegate`我从它调用请求的方法中调用了一个函数，`NSURLConnection`并成功获取了一个地方的信息，该位置首先给出。但不会为我分配的其他地方刷新。

代码是：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{

  [self.viewController refresh];//api refresh method.
} 
```

现在它发送了我分配的第一个位置的请求，即使它发生了变化，但没有得到修改`UIViewController`细节。

在这里，我想刷新我给的最后一个请求。但我只为第一名而努力。哇，我能解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:46:33.890

```
If you are receiving data , the second time you hit the url nad it is not being reflected in the viewcontroller then there might be problem as :-
1>At what Event you might want to refresh data.
2>How are you sending the data to another viewcontroller
Check if the data is reaching the intended viewcontroller successfully 
```

.

另请显示您的刷新方法。如果您的刷新方法有一些参数并且您没有发送这些参数，那么您可以尝试：-

```
- (void)applicationWillEnterForeground:(UIApplication *)application 
{     
NSLog(@"app will enter foreground");     
[viewController refresh:NULL]; 
} 
```

如果问题仍然存在，请发布您的代码。

# java - Lucene updateDocument 不删除文档

> ID：10552409
> 
> 赞同：1
> 
> 时间：2012-05-11T13:34:31.907
> 
> 标签：java, lucene, yammer

这似乎是一个常见的问题，除了我之前没有遇到过这个问题并且通常的修复不起作用。这可能是一些愚蠢的事情，但我找不到它。

我想索引一个 yammer 站点，因为 yammer api 对于我的目的来说不够快，问题是当我尝试使用 updateDocument 功能更新我的索引时，旧的并没有被删除。但我有一个未分析的存储唯一密钥。

以下是相关代码：

```
Document newdoc = new Document();
newdoc.add(new Field(YammerMessageFields.URL, resultUrl, Field.Store.YES, Field.Index.NOT_ANALYZED));
newdoc.add(new Field(YammerMessageFields.THREAD_ID, threadID.toString(), Field.Store.YES, Field.Index.NOT_ANALYZED));
newdoc.add(new Field(YammerMessageFields.AUTHOR, senderName, Field.Store.YES, Field.Index.ANALYZED));
newdoc.add(new Field(YammerMessageFields.CONTENTS, resultText, Field.Store.YES, Field.Index.ANALYZED));
Term key = new Term(YammerMessageFields.THREAD_ID, newdoc.getFieldable(YammerMessageFields.THREAD_ID).toString());
logger.debug("updating document with key: " + key);
try {
    IndexWriter writer = getIndexWriter();
    writer.updateDocument(key, newdoc);
    writer.close();
} catch (IOException e) {
} 
```

我在日志中看到的是：

```
2012-05-11 12:02:29,816 DEBUG [http-8088-2] LuceneIndex - https://www.yammer.com/api/v1/messages/?newer_than=0
2012-05-11 12:02:38,594 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173285202>
2012-05-11 12:02:45,167 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173033239>
2012-05-11 12:02:51,686 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173014568>
2012-05-11 12:02:51,871 DEBUG [http-8088-2] LuceneIndex - new items:3

2012-05-11 12:03:27,393 DEBUG [http-8088-2] YammerResource - return all documents
2012-05-11 12:03:27,405 DEBUG [http-8088-2] YammerResource - nr docs:3
2012-05-11 12:03:27,405 DEBUG [http-8088-2] YammerResource - nr dels:0

...
next update
...

2012-05-11 12:03:35,802 DEBUG [http-8088-2] LuceneIndex - https://www.yammer.com/api/v1/messages/?newer_than=0
2012-05-11 12:03:43,933 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173322760>
2012-05-11 12:03:50,467 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173285202>
2012-05-11 12:03:56,982 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173056406>
2012-05-11 12:04:03,533 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173033239>
2012-05-11 12:04:10,097 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173030769>
2012-05-11 12:04:16,629 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173014568>
2012-05-11 12:04:23,169 DEBUG [http-8088-2] LuceneIndex - updating document with key: threadid:stored,indexed<threadid:173003570>
2012-05-11 12:04:23,341 DEBUG [http-8088-2] LuceneIndex - new items:7

2012-05-11 12:05:09,694 DEBUG [http-8088-1] YammerResource - return all documents
2012-05-11 12:05:09,696 DEBUG [http-8088-1] YammerResource - nr docs:10
2012-05-11 12:05:09,696 DEBUG [http-8088-1] YammerResource - nr dels:0 
```

所以密钥再次出现（和 4 个新的），但是当这完成后，我的商店中有 10 个文档而不是 7 个（和 3 个已删除的文档）。

编辑：这是我找到这些项目的方式，但我实际上展示了它们并用卢克检查了它。

```
IndexReader r = IndexReader.open(searchIndex.getIndex());
                List<Document> docList = new ArrayList<Document>();
                List<Document> delList = new ArrayList<Document>();

                int num = r.numDocs();
                num += r.numDeletedDocs();
                for ( int i = 0; i < num && i < max; i++)
                {
                    if ( ! r.isDeleted( i))
                        docList.add(r.document(i));
                    else
                        delList.add(r.document(i));

                }
                r.close();
                logger.debug("nr docs:" + docList.size());
                logger.debug("nr dels:" + delList.size()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:48:33.680

如果不运行一些测试代码，我不确定，但这对我来说是错误的：

```
Term key = new Term(YammerMessageFields.THREAD_ID, 
   newdoc.getFieldable(YammerMessageFields.THREAD_ID).toString()); 
```

你确定它不应该是：

```
Term key = new Term(YammerMessageFields.THREAD_ID, 
   newdoc.getFieldable(YammerMessageFields.THREAD_ID).stringValue()); 
```

然后，您继续使用该密钥尝试更新任何匹配的现有文档。如果密钥错误，那么文档更新可能会静默失败。我怀疑`toString()`on 那`Term`实际上只会给你一个 Object 引用，这意味着更新永远不会起作用。

调用`toString()`除日志记录或调试之外的任何内容（即任何包含逻辑的内容）通常都是错误的。

# asp.net-mvc-3 - 在 mvc3 中处理会话

> ID：10552412
> 
> 赞同：0
> 
> 时间：2012-05-11T13:34:34.223
> 
> 标签：asp.net-mvc-3

我有一个网站，所有用户信息都存储在 Session 中。但是，如果 Session 已过期，有没有办法将用户重定向回登录，而不是给我一个错误。这个问题在用于显示用户名的视图中最为严重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:45:00.450

您可以创建一个操作过滤器来检查用户会话并在他们需要登录时重定向。[这个问题可以帮助你。](https://stackoverflow.com/questions/5453338/asp-net-mvc-3-redirect-from-action-filter-attribute)

# c# - 当我想要附加实体时，它正在插入

> ID：10552415
> 
> 赞同：2
> 
> 时间：2012-05-11T13:34:39.893
> 
> 标签：c#, entity-framework, ef-code-first, poco

我有两个课程：

```
public class PartDefinition
{
    public int Id { get; set; }

    [Required]
    [MaxLength(10)]
    public string PartNumber { get; set; }

    [Required]
    public virtual Module Module { get; set; }
}

public class Module
{
    public int Id { get; set; }

    [Required]
    [MaxLength(10)]
    public string Name { get; set; }
} 
```

然后我尝试执行此操作：

```
PartDefinition part = new PartDefinition(partNumber, module);
context.PartDefinitions.Add(part);
context.SaveChanges(); 
```

我传递给新部件定义的模块已经存在于数据库中。但是，当我保存新部件定义而不是将当前模块添加为外键时，它会插入一个全新的模块。

我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:39:39.287

由于您没有任何表示数据库中主键的 [Key] 属性；它每次都会添加一个新模块。尝试使用 [Key] 属性标记 Id 属性。还要尝试在获取模块和插入部分时使用相同的上下文实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:38:56.247

您确定您的 Module 对象的 Id 设置为一个值吗？如果它为零，那么 Entity Framework 会将其视为一个新关系。

# symfony - 如何使用 symfony2 生成 pdf 报告？

> ID：10552420
> 
> 赞同：4
> 
> 时间：2012-05-11T13:34:54.800
> 
> 标签：symfony

我创建了一个考试模块，它以 HTML (twig) 格式向用户提供报告卡。现在我希望用户应该能够将报告卡保存为 pdf。我添加了一个按钮作为 Save ReportCard，我想在我的控制器中编写代码来生成这个与 html 内容相同的 pdf 文件。我用谷歌搜索并找到了这些链接：

1.  [PDF 库 8](http://www.pdflib.com/download/pdflib-family/pdflib-8/)
2.  [使用 PHP 生成 PDF](http://www.sitepoint.com/generate-pdfs-php/)

这些链接很棒，但我不知道如何在 symfony2 中使用它们。我是 symfony2 和 Php 的新手。任何人都可以在这里帮助我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-12T11:10:37.953

另一个比创建整个自定义 PDF 更轻松的解决方案是创建打印 css。然后使用 wkhtml2pdf 之类的库获取整个 DOM。还有一个来自 knplabs 的 Lib [https://github.com/KnpLabs/snappy](https://github.com/KnpLabs/snappy)和捆绑包[https://github.com/KnpLabs/KnpSnappyBundle](https://github.com/KnpLabs/KnpSnappyBundle)

我经常将它用于棘手的 html5 项目。借助 wkhtml2pdf 的 javascript 支持，您可以将 svg 和其他漂亮的东西添加到您的 pdf 中...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T19:34:02.293

一个具有很多功能的优秀库是[TCPDF](http://www.tcpdf.org/)。WhiteOctoberTCPDBundle 或 IoTcpdfBundle 是社区在该库中创建的一些包。[您可以在knpbundles](http://knpbundles.com/search?q=pdf)找到一些帮助您创建 PDF 的包。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T11:29:02.453

我花了很多时间寻找合适的图书馆。主要目标是尽可能轻松地生成 PDF，**而无需**坐标定位、换行的特殊功能等等。

到目前为止我发现的最好的匹配是：[https ://github.com/psliwa/PdfBundle](https://github.com/psliwa/PdfBundle)

... 具有 Symfony 捆绑包和 GitHub 条目包含大量示例。优秀的图书馆。

# javascript - 执行 jsonp ajax 调用时出错

> ID：10552422
> 
> 赞同：0
> 
> 时间：2012-05-11T13:35:09.087
> 
> 标签：javascript, jquery, ajax, json, jsonp

使用此代码

```
$.getJSON("http://mydomain.com/getcustomers?callback=?",function(data) {  
....
}).error(function(err){
....
}) 
```

我越来越

> jQuery16103492487950357067_1336742910384 未被调用

我在谷歌上搜索，有些人指出与 jquery validate 不兼容，我没有在此页面上使用该插件。我还尝试用 $.ajax 调用替换 $.getJSON 调用以获得更多控制权，但结果是一样的。

有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:38:01.917

GetCustomers 方法所在的服务真的支持 JSON-P 吗？您应该能够在 Fiddler 中看到响应。

您可以安装提琴手。从 www.fiddler2.com 下载。在 JSON-P 的情况下，JSON 部分由函数调用包装。

您的回复将如下所示：

![在此处输入图像描述](../Images/d25f355788e00074cbf62d2cac7bba85.png)

基本上，这是为了绕过同源策略而进行的黑客攻击，但由于 Google 等各方也在大量使用它，因此您可以“安全地”使用它。服务器返回的其实是一个javascript函数。

# .net - SharePoint 列表的多显示表单

> ID：10552430
> 
> 赞同：0
> 
> 时间：2012-05-11T13:35:31.863
> 
> 标签：.net, sharepoint-2010

我正在为从 _layouts 文件夹运行的 SharePoint 2010 构建自定义 .net 应用程序。它有多个调查表（aspx），并且都在一个列表中创建记录。在 SP 视图中单击编辑项目链接时，我想打开相应的表单。

可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:58:40.067

是的，这是可能的。您可以为列表创建内容类型并将 formurl 元素添加到内容类型，如下所示

```
<XmlDocuments> 
<XmlDocument  NamespaceURI="http://schemas.microsoft.com/sharepoint/v3/contenttype/forms/url"> 
  <FormUrls xmlns="http://schemas.microsoft.com/sharepoint/v3/contenttype/forms/url"> 
   <Display>_Layouts/xyzCorp/BZH_xMgt.aspx</Display> 
   <Edit>_Layouts/xyzCorp/BZH_xMgt.aspx</Edit> 
   <New>_Layouts/xyzCorp/BZH_xMgt.aspx</New> 
 </FormUrls> 
</XmlDocument> 
```

（参见[http://msdn.microsoft.com/en-us/library/ms473210(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/ms473210(v=office.12).aspx)）

我相信，但尚未测试，您的页面将在查询字符串中收到 ID=xxx。

* * *

我建议不要在 _layouts 中构建自定义应用程序页面，而是构建自定义表单模板，它允许您重用许多标准 SharePoint 功能：

*   标准字段控制（无需进行 CRUD）
*   重用标准功能，例如保存、取消、版本控制
*   重用您现有的品牌
*   使用功能区向表单添加功能

有关示例，请参见[http://blogs.syrinx.com/blogs/sharepoint/archive/2008/11/10/custom-item-layouts-using-custom-form-templates.aspx](http://blogs.syrinx.com/blogs/sharepoint/archive/2008/11/10/custom-item-layouts-using-custom-form-templates.aspx)。

# jdbc - MySQL 连接器/j，在哪里？

> ID：10552431
> 
> 赞同：0
> 
> 时间：2012-05-11T13:35:32.763
> 
> 标签：jdbc

“首先，在 $CATALINA_HOME/common/lib 中安装 Connector/J 附带的 .jar 文件，以便容器中安装的所有应用程序都可以使用它。”

好的，但我有 2 个 Catalina 文件夹：一个在工作中，一个在配置中。但是我在下面有一个“lib”目录：D:\apache-tomcat-7.0.27\lib 我应该在那里安装 jar 文件（“unjar”）吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:46:35.700

如果你把它放到你的服务器 lib 目录中，如果你将它部署到不同的主机，你会看到错误。如果不同的应用程序需要不同的 mysql 版本，你也会得到错误。当您升级服务器时，这些 jar 也可能会丢失。

最好将 mysql-xyz.jar 放在您的应用程序 lib 目录 (WEB-INF/lib) 中，不要解压它。

# install4j - 如何在 ${installer:sys.installationDir}/jre 以外的其他地方安装捆绑的 JRE？

> ID：10552432
> 
> 赞同：2
> 
> 时间：2012-05-11T13:35:35.957
> 
> 标签：install4j

好的，这对我来说有点难以用语言表达，所以请耐心等待。

我们的项目目录结构依赖于 ${sys.installationDir}/jre 作为用于运行我们产品的 JRE 的位置。这适用于使用 install4j 内置安装程序的新安装，因为 install4j 默认将 jre 放在那里。

但是对于 install4j 对旧版安装的内置更新，这是有问题的。

我有我正在重用的安装代码，不幸的是它依赖于 Java 1.6 功能。我有运行 1.5 的旧版产品安装，并且由于其他原因无法更新。

我需要允许 install4j 安装程序将 Java 1.6 jre 解压到临时位置，仅用于执行安装代码，然后将其删除。

我似乎找不到配置捆绑 JRE 安装位置的方法。任何提示/建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:55:51.460

JRE 包总是安装到安装目录内的“jre”子目录中。

您可以取消选择“安装文件”操作中的“更新捆绑的 JRE”属性，以防止旧的 JRE 被覆盖。

# vb.net - 在 vb.net 中，当您跳出循环时，您会破坏所有嵌套循环吗？

> ID：10552433
> 
> 赞同：3
> 
> 时间：2012-05-11T13:35:51.547
> 
> 标签：vb.net, loops

所以我有一些 vb.net 代码，我在 For 循环中有一个嵌套的 For 循环，然后我有 EXIT FOR 语句，它会跳出一个循环还是整个链？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T13:37:51.687

[`Exit For`](http://msdn.microsoft.com/en-us/library/t2at9t47%28v=vs.100%29.aspx)只会退出`For`它正在执行的当前循环。

来自[MSDN](http://msdn.microsoft.com/en-us/library/t2at9t47%28v=vs.100%29.aspx)：

> **退出**
> 
> 立即退出它出现的 For 循环。继续执行 Next 语句之后的语句。Exit For 只能在 For...Next 或 For Each...Next 循环内使用。在嵌套的 For 循环中使用时，Exit For 退出最内层循环并将控制转移到下一个更高级别的嵌套。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T13:37:58.743

回答您的问题：-它将打破一个循环。

定义：

**退出**：

> *“立即退出**它出现**的 For 循环。继续执行 Next 语句之后的语句...... Exit For 退出**最内层循环**并将控制转移到**下一个更高级别的嵌套**。”*

查看[MSDN 以获取更多信息](http://msdn.microsoft.com/en-us/library/t2at9t47%28v=vs.100%29.aspx)

# iphone - 如何在目标c中将图片上传到Facebook群组

> ID：10552434
> 
> 赞同：1
> 
> 时间：2012-05-11T13:35:52.053
> 
> 标签：iphone, ios, facebook

你好我的名字是ryoichi。

我正在尝试制作 iphone 应用程序。我想在 facebook gourp 上上传图片。但我不能。我可以上传图片，评论我的墙。

我尝试发布 facebook 群组，但没有错误。只发表评论。

这是我的代码

```
UIImage *img = [UIImage imageNamed:@"neko.jpg"];

NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                img, @"picture", @"testcomment", @"message",
                               nil];
[img release];

NSString *test =@"/168782779916152/feed";

[[delegate facebook] requestWithGraphPath:test
                      andParams:params
                  andHttpMethod:@"POST"
                    andDelegate:self]; 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:38:51.703

在使用之前不要释放 img。将`[img release]`请求移到发送它的后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:55:37.330

@dragon112 发布了正确的解决方案，但它有一个错误。您永远不应该释放该图像，因为您没有分配/保留它！检查[内存管理和所有权约定](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)。在您的示例中，只需删除该行

```
[img release]; 
```

并确保您实施了委托。

# android - WebView SaveInstanceState 不阻止 HTML 控件重置为原始值

> ID：10552437
> 
> 赞同：0
> 
> 时间：2012-05-11T13:36:12.407
> 
> 标签：android, asp.net, webview, xamarin.android

我有一个带有 3 个选项卡的 TabbedActivity。每周、转接和通话。Transfer Activity 包含一个我想在每次设备重新定向时维护的 WebView。我发现了大量的例子，这些例子让我看到了下面的内容。这样，WebView 似乎恢复到已保存的实例，并且在 OnProgressChange 期间显示的 ProgressDialog 在重新定向后不会显示备份。但是，WebView 显示的站点中有复选框。如果它们在横向中被选中，然后变成纵向（反之亦然），复选框都会返回到它们原来的未选中状态。我的 DropDownLists 也是如此。

```
[Activity]
public class Transfer : Activity
{
    private WebView web;
    private static ProgressDialog progress;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        SetContentView(Resource.Layout.Transfer);                    

        web = (WebView)FindViewById(Resource.Id.web);

        progress = new ProgressDialog(this);

        if (bundle == null)
        {               
            web.Settings.JavaScriptEnabled = true;
            web.SetWebChromeClient(new CustomWebChromeClient(this));
            web.SetWebViewClient(new CustomWebViewClient(this));
            web.ClearCache(true);
            web.LoadUrl("http://www.mysite.com");
        }
        else
        {
            web.RestoreState(bundle);
        }
    }

    protected override void OnSaveInstanceState(Bundle outState)
    {
        web.SaveState(outState);
    }

    private class CustomWebChromeClient : WebChromeClient
    {
        private readonly Activity _context;

        public CustomWebChromeClient(Activity context)
        {
            _context = context;
        }

        public override void OnProgressChanged(WebView view, int newProgress)
        {
            progress.SetTitle(newProgress + "%");

            if (!progress.IsShowing)
                {
                  progress.SetMessage("Please Wait...");
                  progress.Show();
                }
        }
    }

    private class CustomWebViewClient : WebViewClient
    {
        private readonly Activity _context;

        public CustomWebViewClient(Activity context)
        {
            _context = context;
        }

        public override void OnPageFinished(WebView view, string url)
        {
            if (progress.IsShowing)
                progress.Hide();
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:02:57.150

这是真的，我发现解决此问题的唯一方法是将以下内容放入清单文件中：

`android:configChanges="keyboardHidden|orientation"`

我必须警告你：这样做会使你的活动不会在方向改变时重新创建。这意味着您的纵向布局将不会被加载，因此您的布局可能会搞砸。我通过重新加载我必须放入我的 webview 的所有值来“修复”这个问题。事实证明，Android 能够非常快速地处理这些变化。

我希望这会有所帮助，祝你好运！

沃塔

# java - 同步两台安卓平板电脑

> ID：10552439
> 
> 赞同：2
> 
> 时间：2012-05-11T13:36:16.187
> 
> 标签：java, android, network-programming

我正在尝试在两台带有 Android 操作系统的华硕平板电脑之间同步操作。

我目前正在使用这个算法来做到这一点：

客户端平板电脑发送它的日历时间，如下所示：

```
Calendar cal = Calendar.getInstance();
cal.getTime();
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss:SSSS");

connectionTablet.SendMessage( sdf.format(cal.getTime()) ); 
```

服务器平板电脑收到它：

```
Log.d( "NETWORK", "msg" ); 
```

msg 是从客户端发送的 cal.getTime，因此当我调试服务器平板电脑时，我可以在 logcat 中看到接收和打印此消息的时间。

两种平板电脑都使用自动日期和时间（使用网络提供的时间）。

我的问题是，由于平板电脑从同一个地方获取时间信息，我知道它们在分钟和秒方面具有相同的时间，但我可以假设它们的时间在毫秒方面也是同步的吗？

例子：

平板电脑 1：09:34:07.699 平板电脑 2：09:34:07.699（± 5 毫秒）

那么我可以假设这个假设在任何时间点都有效吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:13:00.627

不，因为每个设备都有自己的内部时钟，并且这些时钟可能不会以完全相同的速度运行，这就是为什么设备会不时与网络时间源同步，但“中间”时间来自内部时钟可能会在某个时间点关闭。这是假设网络同步完美无缺

# jquery - Jquery对话框按钮返回值

> ID：10552440
> 
> 赞同：1
> 
> 时间：2012-05-11T13:36:18.457
> 
> 标签：jquery

我正在使用一个jquery对话框，我想要实现的是当用户按下“ok”时，程序继续进行，当按下“cancel”时，它就停止了。

```
 function displaymessage()
{
 $("#confirm").dialog({      
    buttons:{
                "OK":function(){$(this).dialog("close"); test(1);},
                "Cancel":function(){$(this).dialog("close");test(0);}        
            }
        });  
function test(bool)
{
if(bool==1)
return true;
else return false;
}
return test();
}

<div id="confirm"></div>
<input type="button" value="Click me!" onclick="return displaymessage()" /> 
```

但是用户点击“确定”按钮后如何控制功能测试运行呢？

谢谢

​​​​​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:28:26.480

取2个按钮

```
<asp:button id="submit" onclientclick="return displaymessage()" />

<asp:button id="submit_hidden" onclick="submit_OnClick" runat="server"/> 
```

隐藏带有 id 的按钮`submit_hidden`。（可能通过 css dsiplay:none;）

并在 jquery 中更改代码

```
$("#confirm").dialog({
    autoOpen:false,        
    buttons:{
                "OK":function(){ $("#submit_hidden").click();
                                 $(this).dialog("close"); },
                "Cancel":function(){ $(this).dialog("close");}        
            }
        }); 
```

现在你不需要返回任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:41:35.173

```
function displaymessage()
{
 $("#confirm").dialog({
    autoOpen:false,        
    buttons:{
                "OK":function(){  test(1); $(this).dialog("close"); },
                "Cancel":function(){ test(0); $(this).dialog("close");}        
            }
        });  
}

function test(bool)
{
  if(bool==1)
      return  true;
  else 
      return false;
} 
```

# iphone - 在 UItableview 中调整页脚大小

> ID：10552446
> 
> 赞同：2
> 
> 时间：2012-05-11T13:37:00.210
> 
> 标签：iphone, ios, uitableview, table-footer

我正在添加以下代码来添加带有按钮的页脚以执行操作。我无法将按钮重新调整为单元格的大小。CGRectMake(0, 0, 300,44) 值的变化不会影响页脚出现的变化，任何人都可以帮助我。我正在使用一个有更多会话的表。我不希望每个会话都有页脚，而是需要在表格末尾，所以我插入了以下代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   
*)indexPath 
{
//...
footerView  = [[UIView alloc] init];

UIButton* Logoutbutton = [UIButton buttonWithType:UIButtonTypeCustom];

[Logoutbutton setTitle:@"Logout" forState:UIControlStateNormal];

NSLog(@"cell width : %d",cell.contentView.frame.size.width);
[Logoutbutton setFrame:CGRectMake(0, 0, 300,44)];
[Logoutbutton setBackgroundImage:[UIImage imageNamed:@"LogoutBgImage.png"] 
forState:UIControlStateNormal];
[Logoutbutton setBackgroundColor:[UIColor clearColor]]; 

[Logoutbutton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal]; 
[Logoutbutton addTarget:self action:@selector(LogoutbuttonPressed:) 
forControlEvents:UIControlEventTouchUpInside];

Settingstable.tableFooterView = Logoutbutton;

return cell;
}

- (void)LogoutbuttonPressed: (UIButton*) button
{
 //some action
} 
```

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:53:35.577

您不需要向 uitableview 添加按钮，而是将其添加到 tableview 的页脚，您必须将视图传递给 tableview 的委托方法：-

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 
```

您可以阅读本[教程](http://blog.blackwhale.at/?p=104)，因为它与您的要求相同。![在此处输入图像描述](../Images/8489da5fb2f0189f00df00d7fc40363b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:39:01.123

用这种方式作为tableview的页脚

```
self.tableView.tableFooterView = myCustomFooterView 
```

对于整个表格的页脚视图，请使用

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 
```

并在此处阅读有关它的更多信息

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)

如果您不想只有一个单元格的页脚，则实现一个自定义单元格，并使用 layoutsubviews 更改单元格设置，对于自定义单元格，请使用此链接

[http://www.e-string.com/content/custom-uitableviewcells-interface-builder](http://www.e-string.com/content/custom-uitableviewcells-interface-builder)

[http://www.galloway.me.uk/tutorials/custom-uitableviewcell/](http://www.galloway.me.uk/tutorials/custom-uitableviewcell/)

[http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:40:35.227

要提供页脚视图高度，请使用此委托方法：

```
(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section 
```

# visual-studio - 在 CMake 中为项目设置特定的编译标志

> ID：10552448
> 
> 赞同：2
> 
> 时间：2012-05-11T13:37:04.590
> 
> 标签：visual-studio, cmake

我已经设法使用以下方法编辑特定项目的链接标志：

```
SET_TARGET_PROPERTIES(${target} PROPERTIES LINK_FLAGS "/foo") 
```

但我似乎无法使用以下方法编辑编译器标志：

```
SET_TARGET_PROPERTIES(${target} PROPERTIES COMPILE_FLAGS "/bar") 
```

打开 Visual Studio 项目时，我在命令行选项下找不到“/bar”。我尝试用一​​个真正的标志替换“/bar”，但我看不到 C/C++ 配置属性下发生的任何变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T15:11:02.083

事实证明，在将可执行文件添加到 CMake 后，我需要移动这些函数

# php - 如何从 HTTP GET 请求中获取 JSON 字符串

> ID：10552452
> 
> 赞同：2
> 
> 时间：2012-05-11T13:37:10.377
> 
> 标签：php, ajax, json, httpwebrequest

我有一个存储用户名等数据的 mysql 数据库。我有一个名为 result 的 PHP 文件，它从数据库中检索结果并将它们编码为 JSON 字符串。然后，我希望相同的 PHP 文件在不重新加载页面的情况下输出结果（通过 ajax）。实际上，我希望同一页面将 JSON 字符串作为 HTTP 请求获取，我该怎么做

到目前为止，这是 results.php

```
 <?php

        $link = mysql_connect('', '', '');
        if (!$link) {
            die('Could not connect: ' . mysql_error());
        }

        $db_selected = mysql_select_db('test', $link);
        if (!$db_selected) {
            die ('Can\'t use test : ' . mysql_error());
        }

        $result = mysql_query("SELECT user_name FROM users");
        if (!$result) {
            die('Invalid query: ' . mysql_error());
        }

        $names = array();

        while ($row = mysql_fetch_assoc($result)) {

            foreach ($row as $key => $val) {

                $names[][$key] = $val;
            }
        }

        if ($_GET['myvar'] == "done")
        {
            $ennames = json_encode($names);
            echo $ennames;
            exit();
        }

        ?>
         <script src="jquery-1.7.1.min.js">

         function getJSON()
         {
            $.getJSON("results.php", { myvar: "done" }, function(data) {
               var namesHTML = "";

               $.each(data, function(key, val) {
                   namesHTML = namesHTML + val + "<br/>";
                 });

               $("#divForNames").html(namesHTML);
            });
            setTimeOut(getJSON, 5000); //the 5000 here means 5 seconds
         }
        </script>

         <div id="divForNames">

         </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:55:46.207

您的 PHP 需要为此进行的唯一调整是在赋值后立即添加一个 if 语句`$ennames`：

```
if ($_GET['myvar'] == "specific-value-that-you-choose")
{
   echo $ennames;
   exit();
} 
```

对于轮询，您需要编写某种客户端脚本——最有可能是 javascript，并且最容易用 jQuery 编写。查看`.getJSON()`jQuery 函数和`setTimeOut()`创建逻辑来执行此轮询。它可能看起来像这样：

```
function getJSON()
{
   $.getJSON("result.php", { myvar: "specific-value-that-you-choose" }, function(data) {
      var namesHTML = "";

      $.each(data, function(key, val) {
          namesHTML = namesHTML + val + "<br/>";
        });

      $("#divForNames").html(namesHTML);
   });
   setTimeOut(getJSON, 5000); //the 5000 here means 5 seconds
} 
```

然后在非 JSON 页面的 HTML 中的某处，您需要包含一个`<div>`id 设置以匹配您在`$.getJSON()`函数中使用的那个（在这种情况下，我需要一个空`<div id="divForNames">`但您可以更改名称以适合您的优先。

# c# - 从 Descendants 获取 xml 元素列表

> ID：10552454
> 
> 赞同：5
> 
> 时间：2012-05-11T13:37:16.653
> 
> 标签：c#, xml, linq-to-xml

这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<dati>
  <product id="456">
    <item>a</item>
    <item>b</item>
    <item>c</item>
  </product>
  <product id="789">
    <item>a</item>
    <item>b</item>
  </product>
  <product id="533">
    <item>a</item>
  </product>
</dati> 
```

下面的代码只返回第一个 item.InnerText 元素

```
List<string> lst = new List<string>();
XDocument Doc = XDocument.Load("test.xml");

var q = from c in Doc.Descendants("product")
        where c.Attribute("id").Value == "789"
        select c.Element("item");

foreach (string name in q)
       lst.Add(name);

listBox1.DataSource = lst; 
```

我怎样才能收集所选产品的所有项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T13:40:56.703

当然：

```
var list = Doc.Descendants("product")
              .Single(c => c.Attribute("id").Value == "789")
              .Elements("item")
              .Select(item => (string) item)
              .ToList(); 
```

请注意，这采用了一种稍微不同的方法——它检查是否有一个匹配的产品元素（通过找到它），然后选择`item`它下面的元素，将每个元素投影到它的值。然后它以一种更简洁的方式将这些字符串转换为列表:)

# html - 考试所需的简单 VBA 例程

> ID：10552458
> 
> 赞同：-1
> 
> 时间：2012-05-11T13:37:21.890
> 
> 标签：html, excel, vba

我早上参加考试，考试内容涉及 HTML 和一点点 VBA。VBA 不是我的强项，我在这个特定的练习问题上寻求帮助：

“编写一个简单的 VBA 子程序来说明如何将数据插入到一系列单元格中”

听起来相对容易，但讲师在网上放了零笔记，对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:52:14.543

会保持这个有点抽象，因为它是家庭作业，我不想给你答案

alt-f11 打开 vba-editor 东西

也许使用适当的按钮制作一个模块

一个子程序应该看起来有点像

```
Sub insertIntoCell()
    ' right code here
End Sub 
```

看看[这个](http://msdn.microsoft.com/en-us/library/aa139976%28v=office.10%29.aspx)文档，你可能希望考虑某种形式的[迭代](http://en.wikipedia.org/wiki/Iteration#Computing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:02:37.970

我寻找了一个很好的例子或教程，我认为找到了一个很好的进入 VBA 编程的例子。[这](http://www.anthony-vba.kefra.com/vba/vbabasic2.htm)为您提供了一些基础知识和一个带有范围的示例句柄。我希望它能帮助你继续前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:10:11.173

像这样：

```
Range("A2").Value = 1000 
```

# python - 在前面添加文本 - Python

> ID：10552465
> 
> 赞同：1
> 
> 时间：2012-05-11T13:37:51.587
> 
> 标签：python

我有以下代码

```
Test1 =  Price[Product.index(TestABC)]+   AddQTYPriceA

print Test1
print "try this test" + Test1 
```

当它需要打印测试 1 时，它会给出正确的答案。我想尝试在它的前面添加文本，所以我输入了 print "try this test" + Test1

对于第二个打印命令，它给出以下错误。

```
Traceback (most recent call last):
  File "C:\Python26\data.py", line 78, in <module>
    print "try this test" + Test1
TypeError: cannot concatenate 'str' and 'float' objects 
```

有人可以帮助我如何让文字出现在前面。

格雷吉 D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T13:39:28.957

为了连接字符串和浮点数，您需要使用`str()`函数将浮点数转换为字符串。

```
print "try this test " + str(Test1) 
```

或者你可以使用`.format()`字符串方法：

```
print "try this test {0}".format(Test1) 
```

这两种方法都记录在 python[字符串内置类型 page](http://docs.python.org/library/stdtypes.html)中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T13:40:13.327

试试这个 ：

```
print "try this test", Test1

# let's assume that Test1 is equal to 2.5, you will get : 
>>> try this test 2.5 
```

无需连接字符串，让 python 完成工作；）

编辑：正如 Lattyware 所提到的，python 将自动在结果字符串的两个部分之间添加一个空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:41:06.700

好吧，我的手腕因使用传统方法而被打耳光。

使用[string.format](http://www.python.org/dev/peps/pep-3101/)方法，因为它非常灵活：

```
print "try this test {0}".format(Test1) 
```

str.format() 接受任意数量的参数，并按顺序映射到字符串中给定的 {slot}。所以你可以这样做：

```
"{0} {1} {2}".format("test", 1, 0.01) # => "test 1 0.01" 
```

又好又简单！

因此，只有在没有人查看时才执行以下操作：

```
print "try this test %f" % (Test1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:41:32.147

你可以试试这个例子：

`print "try this test %s" % str(Test1)`

它允许您将文本放在与 Test1 相关的开头或其他位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T13:42:14.757

您必须将 Test1 的输出转换为相同的数据 - print 可以处理任何数据类型，但`+`运算符只能处理相同的类型。

选项是：

*   使用 Test1 将任何输出转换为字符串`str()`

*   定义一种方法来处理将 Test1 添加到其他事物以返回字符串。

*   使其成为 Test1 类实际上生成整个字符串输出，因此无需连接它，您可以实现`__str__()`方法

*   使用许多选项来格式化输出

但我相信要带回家的要点是，`+`在 python 中并没有像在其他语言中那样重载，并且需要显式地转换不同的类型。

示例需要添加到您的 Price 类才能使用未修改的打印代码：

```
class Price(object):
    def __add__(self, x):
        return '%s %s' % (self, x) 
```

# sql-server - 无法打开 Microsoft SQL Server Management Studio

> ID：10552467
> 
> 赞同：7
> 
> 时间：2012-05-11T13:37:57.403
> 
> 标签：sql-server, windows-server-2008-r2

我有一个大问题。在打开 Microsoft SQL Server Management Studio 时，出现错误：

“找不到一个或多个组件。请重新安装应用程序”

我在互联网上搜索解决方案，但没有发现任何有用的东西。

我有 SQL Server 2012 和 Windows Server 2008 R2。

有什么建议吗？

谢谢。

# r - 如何使用不同的点大小来表示该点所在位置的数量

> ID：10552473
> 
> 赞同：6
> 
> 时间：2012-05-11T13:38:13.723
> 
> 标签：r, ggplot2

我正在处理分类数据，我正在尝试绘制一个散点图，其中点的大小应该代表该点位置的频率。

我先用抖动进行了尝试，但我对那个解决方案不满意。

我以为我可以创建一个频率列，但没有设法为此创建代码。

```
 qplot(X, Y, data=datatable, geom=c("point")) 
```

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T21:13:15.937

这是您所追求的猜测。在`df`下面的数据框中，`x`是`y`您的分类变量。有多种方法可以获得频率计数。在这里，使用了包中的`ddply()`函数。`plyr`其次是剧情。在调用中`ggplot`：`size`美学确保点大小代表频率；该`scale_size_discrete()`函数控制绘图上点的大小。

```
# Some toy data
df <- structure(list(x = structure(c(1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 
4L, 5L, 1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 
5L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L, 1L, 2L, 1L, 2L, 
3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 
4L, 5L, 1L, 2L, 3L, 4L, 5L), .Label = c("1", "2", "3", "4", "5"
), class = "factor"), y = structure(c(1L, 1L, 1L, 1L, 1L, 2L, 
2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 
5L, 5L, 5L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 4L, 
4L, 4L, 4L, 1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 1L, 1L, 2L, 2L, 
1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 4L, 
4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L), .Label = c("1", "2", "3", 
"4", "5"), class = "factor")), .Names = c("x", "y"), row.names = c(NA, 
79L), class = "data.frame")

# Required packages
library(plyr)
library(ggplot2)

# Get the frequency counts
dfc <- ddply(df, c("x", "y"), "nrow", .drop = FALSE)
#dfc

# The plot
ggplot(data = dfc, aes(x = x, y = y, size = factor(nrow))) + 
    geom_point() + 
    scale_size_discrete(range = c(1, 10)) 
```

![在此处输入图像描述](../Images/d49d99d49bd2772990538f18fcb549c8.png)

或使用数据框的相同图`df`- 未聚合的数据。

```
ggplot(data = df, aes(x = x, y = y)) +
  stat_sum(aes(size = factor(..n..)), geom = "point") +
  scale_size_discrete(range = c(1, 10)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T13:48:43.857

试试 spatstat 包中的 ppp 类，带有标记的对象的默认绘图可以满足您的要求。

# android - 无法使用 JSONArray 从 MYSQL 获取数据

> ID：10552478
> 
> 赞同：4
> 
> 时间：2012-05-11T13:38:27.447
> 
> 标签：android, mysql, database, json, arrays

这是我的课程，我尝试使用 JSON 从 MYSQL 获取一些数据到 JSONArray 中。

它给了我错误。

```
public class ConnectMySql extends Activity{
InputStream is;
//List<String> items;
JSONArray jArray;
//String[] items;
StringBuilder sb;
//ListView list;
TextView textv;
    String result;
//List<NameValuePair> items;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
//list = (ListView) findViewById(R.id.listview);

textv = (TextView) findViewById(R.id.tvHI);
setContentView(R.layout.main);

try{
    HttpClient httpsClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost("http://79.114.48.119/data.php");

    List<NameValuePair> nameValue = new ArrayList<NameValuePair>();
    httpPost.setEntity(new UrlEncodedFormEntity(nameValue));
    HttpResponse httpResponse = httpsClient.execute(httpPost);
    HttpEntity httpEntity = httpResponse.getEntity();
    is = httpEntity.getContent();
}catch(Exception e){
    Log.e("log_tag", "Error in HTTP connection" + e.toString());
    Toast.makeText(this, "http connection error: " + e.toString(), Toast.LENGTH_LONG).show();
}
    try{
        BufferedReader BufR = new BufferedReader (new InputStreamReader(is, "iso-8859-1"),8);
        sb = new StringBuilder();
        sb.append(BufR.readLine() + "\n");
        String line = "0";

        while((line = BufR.readLine()) != null){
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    }catch(Exception e){
        Log.e("log_tag", "Error in convert String" + e.toString());
    }
    int lat;
    int lon;
    try{
        jArray = new JSONArray(result);
        Toast.makeText(this, "no data found" + result, Toast.LENGTH_LONG).show();
        JSONObject json_data = null;
        for(int i = 0; i< jArray.length(); i++){
            json_data = jArray.getJSONObject(i);
            lat  = json_data.getInt("latitude");
            lon = json_data.getInt("longitude");

            textv.setText(lat + lon);

            //Here i use another function whitch uses lat & lon
        }
        //setupList();
    }catch(JSONException e){
        Toast.makeText(this, "no data found", Toast.LENGTH_LONG).show();
    }catch(Exception e){
        Toast.makeText(this, "error" + e.toString(), Toast.LENGTH_LONG).show();
    }
}
}
/*private void setupList() {

// TODO Auto-generated method stub
list.setAdapter(new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, items));
}

}*/ 
```

它不会改变文本视图，它给了我 NullPointException 。

我应该怎么办 ？任何人都可以帮助我或给我一些建议吗？谢谢 ！

# pydev - 在 pydev (IPython) 控制台中嵌入 IPython shell

> ID：10552479
> 
> 赞同：0
> 
> 时间：2012-05-11T13:38:38.193
> 
> 标签：pydev

当我做：

```
from IPython import embed
embed() 
```

控制台显示一个奇怪的提示，并且 shell 无法正常工作。我知道 pydev 本身使用 IPython，但其他一些 shell（如 web2py 交互式 shell）也这样做，它不会工作。

在控制台中多次递归地嵌入 IPython 效果很好。

任何想法让它工作？

谢谢，格格利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:46:56.177

它不起作用，因为 PyDev 中的控制台不是真正的 tty 替代品（IPython 期望它能够正常工作）。

因此，理想情况下，如果只是为了使用 IPython 进行开发，您可以使用 PyDev 交互式解释器：[http](http://pydev.org/manual_adv_interactive_console.html) ://pydev.org/manual_adv_interactive_console.html ，它已正确集成在 PyDev 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T22:41:01.103

从 3.0 开始，现在支持在另一个 IPython shell 中嵌入另一个 IPython shell - 我去年为它提供了补丁。

具体来说，您可以从您所在的任何 IPython 实例中对您的内心内容执行以下操作，前提是默认命令 shell 有效：

```
from IPython import embed; embed() 
```

# python - 覆盖 __new__ 疑虑

> ID：10552480
> 
> 赞同：3
> 
> 时间：2012-05-11T13:38:39.223
> 
> 标签：python, python-3.x

我将尝试在这里简化这种情况，当`__new__`如下覆盖时，我不知道调用 super`__new__`来完成这项工作的正确方法，我做得好吗还是有其他方法可以做到这一点？ `super().__new__(cls)`没有像我预期的那样产生正确的结果

我是python初学者，请耐心等待，我C++流利

```
import weakref

class A(str):
    def __init__(self,s):self.a=s
class B(str):
    def __init__(self,s):self.b=s

class P(A,B):
    manifest=weakref.WeakValueDictionary()
    def __new__(cls,a,b):
        o=P.manifest.get(a+b)
        if not o:
            print(a,b,super(P,cls))
            #i thought this first should be used because __init__ puts the values in
            #and we index the manifest with parameters [a+b]
            #o=super().__new__(cls)#produces unique results for all requests?!?
            #so i called like this and it works (either with a or b)
            o=super().__new__(cls,a)#why favoring a over b?
            #o=super().__new__(cls,b)#why favoring b over a?
            #o=super().__new__(cls,a,b)#its an error (of coz)
            P.manifest[a+b]=o
        print("using",id(o))
        return o
    def __init__(self,a,b):
        A.__init__(self,a)
        B.__init__(self,b)

p=P("a","b")
q=P("a","b")
r=P("a","x")
print(id(p),id(q),id(r)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:28:14.167

我怀疑（但我不确定）你正在尝试调用`__new__`你的超级类，即`A`和`B`. 做到这一点的最佳方法取决于很多事情。

的目的`P.__new__`是返回 的实例`P`。所以这就是你应该创造的。这确实`super().__new__(cls,a)`会做，所以应该可以正常工作，但是，您也可以`str.__new__(cls, a)`直接调用。

通常你实际上调用`object.__new__`，但由于你`str`不能这样做，它会告诉你在这种情况下它是不安全的。

如果您确实想使用`super()`（并且在某些情况下这是一个好主意），您通常应该在所有类中一致地使用它，因此它应该在`A`和`B`中使用，不仅在`__new__`而且在`__init__`

```
class A(str):
    def __init__(self, s):
        super().__init__(s)
        self.a = s

    def __new__(cls, s):
        return super().__new__(cls, s)

class B(str):
    def __init__(self, s):
        super().__init__(s)
        self.b = s

    def __new__(cls, s):
        return super().__new__(cls, s) 
```

但是，这里会出现问题，因为您没有相同的函数配置文件，因为 P 有两个参数。这可能表明您的解决方案可能不是最好的。特别是因为 P 是一个以两个字符串作为参数的字符串，所以这没有多大意义。在您之前的问题中，您谈到了多态性，这是一种在某种程度上打破了多态性的模式，因为 P 与 A 和 B 没有相同的 API，因此不能互换使用。

结果是我怀疑子类化是错误的解决方案。另外，我猜您正在尝试缓存对象，以便创建具有相同参数的新对象实际上会返回相同的对象。我建议您改为使用工厂方法，而不是覆盖`__new__`.

# java - 将 CSS 资源添加到 Wicket Web 应用程序

> ID：10552487
> 
> 赞同：0
> 
> 时间：2012-05-11T13:39:00.287
> 
> 标签：java, jakarta-ee, wicket-1.5

我想简单地将我的 css 资源添加到网页中。我有一个 BasePage 类，所有派生的网页都将共享相同的 css 样式。*我如何以最简单*的形式将 CSS 应用于网页？

这些是我根据教程发现并尝试做的*：

```
public BasePage(IModel model) {
    super(model);
    // won't work due to StyleSheetReference not getting found
    this.add(new StyleSheetReference(BasePage.class, "stylesheet", "style.css"));
    this.add(CSSPackageResource.getHeaderContribution(BasePage.class, "style.css")); 
```

检票口版本是 1.5.3。我使用 NetBeans 及其插件。

请考虑到我是 Wicket 和 Web 的新手。感谢您的回答。

*   [http://web.itu.edu.tr/~uyar/wicket-application-development/application-structure.html#shared-components](http://web.itu.edu.tr/~uyar/wicket-application-development/application-structure.html#shared-components)

*   [https://cwiki.apache.org/WICKET/including-css-resources.html](https://cwiki.apache.org/WICKET/including-css-resources.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T08:39:28.060

使用渲染头：

```
public class MyPage extends WebPage {
  public MyPage() {
  }
  public void renderHead(IHeaderResponse response) {
    response.renderJavaScriptReference(new PackageResourceReference(YuiLib.class,
      "yahoo-dom-event/yahoo-dom-event.js"));
    response.renderCSSReference(new PackageResourceReference(AbstractCalendar.class,
      "assets/skins/sam/calendar.css"));
  }
} 
```

# javascript - 使用复选框添加到javascript中的字符串

> ID：10552489
> 
> 赞同：0
> 
> 时间：2012-05-11T13:39:07.170
> 
> 标签：javascript, string, variables

我在 Javascript 中有一个字符串，我想在选中复选框并激活提交按钮时添加一些内容。

我所拥有的是：

```
var strDimensions = ["Sex","Age"]; 

$("input[id='Class']:checked").each(function() {
            strDimensions += "Class"; 
    }       
);

var chart = d3.parsets().dimensions(strDimensions); 
```

唯一不起作用的是添加`Class`到字符串中。

当复选框被选中时，我希望 strDimensions 是这样的：

```
strDimensions = ["Sex","Age","Class"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:42:29.267

你不是说`Array.push`吗？

```
strDimensions.push("Class"); 
```

# java - Android横向布局

> ID：10552493
> 
> 赞同：7
> 
> 时间：2012-05-11T13:39:18.763
> 
> 标签：java, android, android-layout

我正在设计一个应用程序，我只是想知道如何在横向模式下制作不同的布局。我在 res 中创建了一个名为“layout-land”的文件夹并创建了一个 xml 文件，但是当我运行模拟器时它不起作用。我试着称它为“main”，但它说它已经存在，但它确实存在于“layout”文件夹中。如果我称它为不同的东西，我是否需要更改清单中的某些内容？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T13:44:15.757

澄清一下，如果您在横向或纵向，Android`-land`首先在任一目录中查找布局文件，如果未找到，则检查默认`layout`目录。您的文件应命名如下，系统将根据设备的当前配置在运行时加载：

```
res/layout/main.xml
res/layout-land/main.xml 
```

查看有关[**提供资源**](http://developer.android.com/guide/topics/resources/providing-resources.html)的文档以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:43:58.790

您需要这样的文件夹结构：

```
res\layout\main.xml
res\layout-land\main.xml 
```

这些布局中的每一个都应包含相同的元素但重新排列，例如，如果您有一个`android:id="@+id/button1"`在纵向横向中的按钮，您将需要在横向模式下为等效按钮提供相同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:44:04.933

首先，您必须通过添加到清单来监听配置更改

```
android:configChanges="orientation" 
```

然后你可以覆盖这个函数并使用 setContentView

```
public void onConfigurationChanged(Configuration newConfig) 
```

# c# - 从 HTML 注释中提取变量和值

> ID：10552497
> 
> 赞同：1
> 
> 时间：2012-05-11T13:39:41.173
> 
> 标签：c#, asp.net, html, regex, string

我正在尝试从 HTML 注释中提取变量......关于如何做到这一点的任何想法？

评论示例...

```
<!-- variable1: "wer2345235" variable2: "sdfgh333" variable3: "sdfsdfdfsdf"  --> 
```

我尝试根据空格进行拆分，但变量值中可能有空格。

谢谢你的帮助！

[编辑] HTML 标记内的变量是作为 API 调用的结果返回的 - 所以它不在我的控制范围内。[/编辑]

[编辑 2] 这可以使用正则表达式来完成吗？我一直在阅读，我可以匹配但其他的不多！[/编辑]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:15:26.160

您可以使用 HTML 解析器来获取注释，即[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

你可以参考这个[Grabbing meta-tags and comments using HTML Agility Pack](https://stackoverflow.com/questions/2354653/grabbing-meta-tags-and-comments-using-html-agility-pack)

[编辑]假设你得到评论并且格式是已知的，你可以去掉

我这样做了，它使变量字段正确

```
 var str = "variable1: \"wer2345235\" variable2: \"sdfgh333\" variable3: \"sdfsdfdfsdf\"";
        var r = new Regex(@"variable[\d]+: ");
        var result = r.Split(str);
        foreach( var match in result)
        {
            Console.WriteLine(match);
        }

        Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:54:59.227

简单的正则表达式对此应该没问题。

```
 private Dictionary<string,string> ParseCommentVariables(string contents)
    {
        Dictionary<string,string> variables = new Dictionary<string,string>();

        Regex commentParser = new Regex(@"<!--.+?-->", RegexOptions.Compiled);
        Regex variableParser = new Regex(@"\b(?<name>[^:]+):\s*""(?<value>[^""]+)""", RegexOptions.Compiled);
        var comments = commentParser.Matches(contents);
        foreach (Match comment in comments)
            foreach (Match variable in variableParser.Matches(comment.Value))
                if (!variables.ContainsKey(variable.Groups["name"].Value))
                    variables.Add(variable.Groups["name"].Value, variable.Groups["value"].Value);
        return variables;
    } 
```

将首先从“内容”字符串中提取所有评论。然后它将提取它找到的所有变量。它将这些存储在字典中并将其返回给调用者。

IE：

```
string contents = "some other HTML, lalalala <!-- variable1: \"wer2345235\" variable2: \"sdfgh333\" variable3: \"sdfsdfdfsdf\"  --> foobarfoobarfoobar";
var variables = ParseCommentVariables(contents);
string variable1 = variables["variable1"];
string variable2 = variables["variable2"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:43:54.357

我猜你想通过服务器端代码访问，因为你应用了 C# 标记。是否有理由为这些变量选择评论？

您可以使用`<asp:HiddenField />`和使用 Value 属性。访问这些值并进行适当的解析将是微不足道的。

如果您绝对需要在评论中包含这些内容。注释是否包含在带有 ID 标签的其他块中？如果是这样，您可以获取该对象的 InnerHTML 并使用基本的字符串函数来获取和解析字段。这当然假设没有多个评论或没有明确的方式来定位这个特定的评论。

# css - 你能用代码修改外部样式表（less，sass）吗？

> ID：10552500
> 
> 赞同：0
> 
> 时间：2012-05-11T13:39:53.560
> 
> 标签：css, sass, less

我想知道是否有人曾经尝试过创建具有可以通过代码扩展的参数的 less 或 sass 样式表。

例如：

@primary-color：红色
@secondary-color：灰色

less 文件设置为使用输入（想想编辑器中具有 2-5 种颜色选项的 wordpress 文件），然后 css 和类都可以通过这些有限的选择进行修改。

我通常会看到在整个页面中创建内联代码的解决方案，但是创建可以通过可能出现在页面头部的一个小脚本文件中的几个输入来修改的 master less/sass 页面似乎更有意义.

在主题化设计时，这种类型的解决方案似乎很有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:43:13.387

克里斯，不必修复 CSS 或 SAAS 文件。它可以很容易地成为 PHP 或 ASP.NET。

如何在 PHP 中执行此操作的一个链接

[http://www.barelyfitz.com/projects/csscolor/](http://www.barelyfitz.com/projects/csscolor/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:51:33.973

我不得不实现你在最近的一个项目中描述的东西，我最终使用了[lessphp](http://leafo.net/lessphp/)。基本上，我使用的方法是：

1.  从文件中读取 LESS 表。
2.  在内存中的字符串开头添加一些自定义 LESS，例如变量声明或其他。
3.  将完整的 LESS 字符串传递给 lessphp 解析器，获取 CSS。
4.  （可选）智能缓存结果，以节省您将来的一些处理时间。
5.  为 CSS 服务。

像这样的方法可以很容易地在 WordPress 主题中使用来提供自定义。

**另外**：我在实现中搞砸的一件事是我将来会尽量避免将变量样式与样式表的其余部分分开。也就是说，lessphp 生成的文件应该只包含依赖于您的动态变量的样式，并且应该只用于增加现有静态工作表中的样式（默认为颜色/选项）。这样可以节省处理能力，还可以让您使用 less.js 来编写大部分样式，让您能够使用`#!watch`等。

# c# - 总是返回相同实例的类

> ID：10552501
> 
> 赞同：0
> 
> 时间：2012-05-11T13:39:58.580
> 
> 标签：c#, oop

如何在 C# 中编写一个只返回对象的“相同”实例的类？这实际上是单身还是不同？这在《Effective Java 2nd addition》一书中提到。

我使用 C# 4.0（没有技术障碍）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T13:42:22.890

是的，这是一个单例模式。[您会在此处](https://stackoverflow.com/questions/2550925/singleton-by-jon-skeet-clarification)找到基于我们自己的 Jon Skeet 的 C# 实现的精彩讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:46:46.943

如果您的 Singleton 对象的创建成本很高，但不是每次应用程序运行时都使用它，请考虑使用 Lazy。

```
public sealed class LazySingleton
{
    private readonly static Lazy<LazySingleton> instance = 
        new Lazy<LazySingleton>(() => new LazySingleton() );

    private LazySingleton() { }

    public static LazySingleton Instance
    {
        get { return instance.Value; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:44:08.257

```
using System;

namespace DesignPatterns
{
    public sealed class Singleton
    {
        private static volatile Singleton instance = null;

        private Singleton() { }

        public static Singleton Instance
        {
            get
            {
                if (instance == null)
                   Interlocked.CompareExchange(ref instance, new Singleton(), null);

                return instance;
            }
        }
    }
} 
```

# asp.net - 将数据传递到布局页面

> ID：10552502
> 
> 赞同：11
> 
> 时间：2012-05-11T13:39:59.130
> 
> 标签：asp.net, .net, asp.net-mvc-3, razor

我有一个`layout`页面需要填写变量。例子：

```
@ModelType KarateAqua.schoolModel

<html>
    <body>

        @RenderBody()

        <div id="footer">
            <div class="content">
                <div class="bottom_logo">
                    <a href="/"><span class="inv">@Model.schoolName</span></a>
                </div>
            </div>
        </div>
    </body>
</html> 
```

我不想在每个`ActionResult`. 有没有办法`layout`一次将数据传递到页面并为所有实例执行此操作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-05T19:48:52.970

创建一个动作过滤器并装饰您的控制器类。在动作过滤器中，您可以将值放入视图包中，这些值可用于您的布局。

这将在每个请求上运行，您不必在每个操作中设置值。您可以查找并忽略诸如子请求和 ajax 请求之类的东西，它们通常不使用布局，也不为它们设置 viewbag 值。

下面是我创建的一个属性示例，用于从会话中复制一个对象并通过 ViewBag 使其可用于布局

```
public class CurrentUserAttribute : ActionFilterAttribute
{
    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        // Don't bother running this for child action or ajax requests
        if (!filterContext.IsChildAction && !filterContext.RequestContext.HttpContext.Request.IsAjaxRequest())
        {

            if (filterContext.HttpContext.Session != null)
            {
                var currentUser = filterContext.HttpContext.Session["CurrentUser"] as CurrentUser;
                if (currentUser != null)
                {
                    filterContext.Controller.ViewBag.CurrentUser = currentUser;
                }
            }
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-11T13:58:38.870

好的，因为您希望在可以使用局部视图时设置它。但是，根据您的需要，您将需要有几个部分视图（如果部分将分散在 _layout 页面中，可能并不理想）

你的局部视图看起来像

```
@model KarateAqua.schoolModel

<div class="bottom_logo">
<a href="/"><span class="inv">@Model.schoolName</span>
</div> 
```

控制器

```
public class SchoolController : Controller
{
     public ActionResult Index()
     {
          //get schoolModel  
          return PartialView(schoolModel);
     }
} 
```

在您的 _layout.cshtml 中将此行放置在您想要插入局部视图的位置

```
@Html.Action("Index","School") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-29T21:00:28.263

您可以在布局页面上打开一个代码块并在那里填充对象。这将在每次使用布局页面时执行。好处是您不必更改控制器上的任何内容：

```
@{
    KarateAqua.schoolModel data = YourBusinessLayer.Method();
}

<html>
<body>

    @RenderBody()

    <div id="footer">
        <div class="content">
            <div class="bottom_logo">
                <a href="/"><span class="inv">@data.schoolName</span></a>
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T13:46:09.283

您可以使用`ViewBag`或`ViewData`将数据传递到您的布局页面。

**布局**

```
<html>
<body>
@RenderBody()

<div id="footer">
<div class="content">
<div class="bottom_logo">
<a href="/"><span class="inv">@ViewBag.schoolName</span>
</div></div></div>
</body>
</html> 
```

**控制器**

```
public ActionResult Index(){
   ViewBag.schoolName = "Bayside Tigers";
   return View();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-04T05:57:55.103

您始终可以创建返回标题的部分视图的操作。

只需将其添加到您的`layout`页面：

```
<html>
    <head> 
    </head>
        <body>
            @{ Html.RenderAction("header", "MyController", new { area = "" }); }

            @RenderBody()
//... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-17T15:55:03.017

我曾经`HTTP Session`在不同页面之间保留数据 -

```
//Opening page controller
public ActionResult Index()
{    
    Session["something"]="xxxx";
    return View();
} 
```

在共享`_layout`页面中；

```
//persistent data   
<p>Hello, @Session["something"]!</p> 
```

希望这会有所帮助，但如果您从与已设置的默认页面不同的页面开始，它将不起作用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-08T12:33:06.640

**您的布局页面：**

```
@ViewBag.LayoutVar 
```

**你的家庭控制器：**

```
public class HomeController : BaseController
{
   //Here some logic...
} 
```

**你的基础控制器**

```
namespace ProjectName.Controllers
{
    public class BaseController : Controller
    {

        public YetkiController()
        {
            //This parameter is accessible from layout
            ViewBag.LayoutVar = "Suat";
        }
    }
} 
```

逻辑很简单：您创建 BaseController ，其中包含您将在布局中使用的每个全局参数。*（如用户名或其他基于数据的参数）*

您继承（调用）`BaseController`以将所有参数放入当前控制器。

# java - 动画排序算法

> ID：10552504
> 
> 赞同：0
> 
> 时间：2012-05-11T13:40:08.020
> 
> 标签：java, javascript, asp.net-mvc-3, html

我正在做一个需要可视化排序算法的项目。

我环顾四周，发现 Javascript 和 CSS3 有一些很好的动画功能，用于闪烁和交换以可视化这一点。

但是我的教授更喜欢 Java，所以我想知道是否有一种使用 Java 和 Javascript 的混合方式，我在 Java 中调用这些 Javascript 动画函数。

我还想要一种简单的方法来完成将排序算法动画化为 Web 应用程序的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:57:58.993

这是可能的，但对于专业的软件开发人员来说可能需要几天的时间来实施。

虽然您可以在 Java 中运行 JavaScript 代码，但这并不能为您提供完整的浏览器（没有 DOM、没有窗口、没有 CSS 和 HTML 的呈现）。

因此，您首先需要在 Java 中嵌入 Web 浏览器。这是可能的，但所有解决方案都需要 JNI 或至少硬件特定的共享库。如果你觉得能胜任这项任务，那就去做吧。我建议尝试 SWT。[你可以在这里找到演示代码](http://www.eclipse.org/swt/snippets/)；小部件被调用`Browser`。

如果您不想在这个作业上花费一个月或更长时间，请[从这段代码开始](http://www.java2s.com/Tutorial/Java/0240__Swing/UsingJPanelasacanvas.htm)。

如果你想知道你是否做对了：http: [//www.sorting-algorithms.com/](http://www.sorting-algorithms.com/)

# c# - 给定一个正整数，我的代码对于找出下一个回文是否有效？

> ID：10552508
> 
> 赞同：5
> 
> 时间：2012-05-11T13:40:31.053
> 
> 标签：c#, arrays, palindrome

问题陈述：对于给定的正数，我必须立即找出下一个回文。例如：

```
For 808, output:818
2133, output:2222 
```

我想知道我的代码是否有效，效率如何？这是解决问题的好方法吗？

逻辑解释：我已经设置`i`到数字的最左边，`j`最右边的位置我基本上是在比较两个数字。我总是分配`num[j]=num[i]`，并跟踪数字是否大于原始值、小于或等于。最后，即：`j-i==1 or j==i`，根据数字的位数是偶数还是奇数，我看看数字是否变得更大，并做出相应的决定。

编辑：这个数字可以长达 100,000 位！..这是问题陈述的一部分，所以我试图避免暴力方法。

```
int LeftNineIndex = 0, RightNineIndex = 0;
bool NumberLesser = false, NumberGreater = false;
string number = Console.ReadLine();
char[] num = number.ToCharArray();
int i, j, x, y;
for (i = 0, j = num.Length - 1; i <= j; i++, j--)
{
      char m;
      Int32.TryParse(num[i].ToString(),out x);
      Int32.TryParse(num[j].ToString(), out y);
      if (x > y)
      {
           NumberGreater = true;
           NumberLesser = false;
      }
      else if (x < y)
      {
           if (j - i == 1)
           {
                NumberGreater = true;
                NumberLesser = false;
                x = x + 1;
                Char.TryParse(x.ToString(), out m);
                num[i] = m;
           }
           else
           {
                NumberGreater = false;
                NumberLesser = true;
           }             
     }

     if ((j == i && NumberGreater == false) || (j - i == 1 && x == y &&  NumberGreater == false))
     {
           if (x != 9)  // if the number is 9, then i can't add 1 to it
           {
                x = x + 1;
                Char.TryParse(x.ToString(), out m);
                num[i] = m;
           }
           else
           {
                if (num.Length != 1)
                {
                    Int32.TryParse(num[LeftNineIndex].ToString(), out x);
                    Int32.TryParse(num[RightNineIndex].ToString(), out y);
                    x = x + 1;
                    Char.TryParse(x.ToString(), out m);
                    num[LeftNineIndex] = m;
                    num[RightNineIndex] = m;
                }
                else
                {
                    // user has entered just '9', in which case I've hard-coded
                    Console.WriteLine("11");
                }
           }
     }
     num[j] = num[i];
     if (x != 9)  //gives us the index of the number closest to the middle, which is not 9
     {
          LeftNineIndex = i;
          RightNineIndex = j;
     }
}
Console.WriteLine(num); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T14:11:56.970

在恒定时间内找到下一个回文相对简单：

*   将输入分成两半（如果长度为奇数，则前半部分更大）
*   现在对于下一个回文有两个候选：
    1.  保留前半部分，修复后半部分
    2.  前半部分加 1，后半部分固定
*   如果大于输入，则选择第一个候选者，否则选择第二个候选者。

该[`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)类型对于实现这一点很有用：

这种方法在输入长度上具有线性成本，即它在数字大小上是对数的。

```
public static BigInteger NextPalindrome(BigInteger input)
{
    string firstHalf=input.ToString().Substring(0,(input.ToString().Length+1)/2);
    string incrementedFirstHalf=(BigInteger.Parse(firstHalf)+1).ToString();
    var candidates=new List<string>();
    candidates.Add(firstHalf+new String(firstHalf.Reverse().ToArray()));
    candidates.Add(firstHalf+new String(firstHalf.Reverse().Skip(1).ToArray()));
    candidates.Add(incrementedFirstHalf+new String(incrementedFirstHalf.Reverse().ToArray()));
    candidates.Add(incrementedFirstHalf+new String(incrementedFirstHalf.Reverse().Skip(1).ToArray()));
    candidates.Add("1"+new String('0',input.ToString().Length-1)+"1");
    return candidates.Select(s=>BigInteger.Parse(s))
              .Where(i=>i>input)
              .OrderBy(i=>i)
              .First();
} 
```

通过与本机实现进行比较，测试可以使用低于 100000 的所有正整数。

第五种情况很容易漏掉。如果数字由所有`9`s 组成，则增加前半部分会更改长度，并且如果当前长度是奇数 ( `9`, `999`,...) 则需要额外处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:57:42.333

我就是这样做的。似乎工作。

```
 private int FindNextPaladindrone(int value)
    {
        int result = 0;
        bool found = false;

        while (!found)
        {
            value++;
            found = IsPalindrone(value);
            if (found)
                result = value;
        }

        return result;
    }

    private bool IsPalindrone(int number)
    {
        string numberString = number.ToString();
        int backIndex;

        bool same = true;
        for (int i = 0; i < numberString.Length; i++)
        {
            backIndex = numberString.Length - (i + 1);
            if (i == backIndex || backIndex < i)
                break;
            else
            {
                if (numberString[i] != numberString[backIndex])
                {
                    same = false;
                    break;
                }
            }
        }
        return same;
    } 
```

# internet-explorer - 文本不换行到 IE 6 和 7 中向右浮动的元素

> ID：10552511
> 
> 赞同：1
> 
> 时间：2012-05-11T13:40:38.760
> 
> 标签：internet-explorer, word-wrap

我有下面的 HTML 和 CSS，我试图让 .metadata 向右浮动，并让文本环绕它。它在 Firefox 和当前版本的 IE 上运行良好，但在 IE6 和 7 中，文本不换行。元数据框向右浮动，但无论元数据框的高度是多少，它也会将文本向下推这么多，文本将跨越#container 的宽度。

在当前浏览器中，文本环绕 .metadata 框。

```
#container { width: 960px; margin:0 auto;}
.metadata { float: right; width: 500px; }

<div id="container">
    <div class="metadata">
        <div class="metadataRow">
           <div class="metadataLeft">Name: </div>
           <div class="metadataRight">Lorem ipsum</div>
        </div>
    </div>

    <p class="text">Lorem ipsum </p>
</div> 
```

# java - 如何限制 JMS DefaultMessageListenerContainer 重试消息的次数？

> ID：10552514
> 
> 赞同：7
> 
> 时间：2012-05-11T13:40:47.467
> 
> 标签：java, jms, ibm-mq

我正在使用 Spring JMS 连接到 Websphere MQ 服务器。我实现了 SessionAwareListener 接口来创建自定义侦听器，为业务逻辑重用旧代码。

测试时，侦听器抛出一个 StringIndexOutOfBoundsException，我没能捕捉到。但是，我在日志中看到打印了大约 32 次，然后 DMLC 停止。

```
WARN  - Execution of JMS message listener failed 
```

有没有办法控制 DMLC 重试消息的频率，以及如何处理未捕获的异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T13:47:40.573

您可以随时检查 JMSDeliveryCount。如果它超过您认为的最大值，则不要处理消息并返回。

您还[可以将 Websphere 配置](http://www.ibm.com/developerworks/websphere/library/techarticles/0803_titheridge/0803_titheridge.html)为在一些尝试后将错误消息移动到异常目标。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T14:10:59.620

在 Websphere MQ 世界中，在发生错误后将消息放回队列称为*回退。*

有两种选择如何处理它：

1.  在队列管理器中：您可以为给定队列配置*回退阈值*和*回退重新队列名称*属性。达到回退阈值后，队列管理器会将消息放入回退重新队列名称指定的队列中，而不是重新传递。有关更多信息，请参阅[WebSphere MQ 队列属性](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.explorer.doc/e_properties_queues.htm&resultof=%22BOQNAME%22%20%22boqnam%22)。

2.  在您的应用程序中：如果您使用 JMS API，请在开始处理消息之前通过调用[msessage.getIntProperty("JMSXDeliveryCount")检查 JMSXDeliveryCount 属性。](http://docs.oracle.com/javaee/1.3/api/javax/jms/Message.html#getIntProperty%28java.lang.String%29)如果它达到某个阈值，则将该消息作为错误处理。

# php - IMAP 迁移可能使用 PHP

> ID：10552517
> 
> 赞同：0
> 
> 时间：2012-05-11T13:40:51.563
> 
> 标签：php, email, imap

我需要客户端将大量 IMAP 邮箱从一台服务器移动到另一台服务器。

您可能会认为，鉴于电子邮件非常受欢迎，并且迁移事件必须始终发生，并且存在一种工具来帮助从一台服务器迁移到另一台服务器，您会非常惊讶地发现......没有。

作为一家代理机构，我们需要为我们的客户处理这些迁移，因此我们正在努力确定一个可行的流程，并且我们将有信心在未来使用。

我们的托管公司似乎比我们对我们能做什么的想法更少，所以我转向堆栈和它的用户。

我已经知道但不想听到的事情：

客户端手动将 IMAP 账户同步回服务器（50 多个邮箱靠这个太麻烦了）

我知道并且似乎有用的东西：

那里有 PHP 脚本可以连接到 imap 邮件服务器并进行迁移（这些让我很感兴趣，因为 PHP 是我的主要编程语言）。但是，到目前为止，我尝试过的任何方法都没有运气。我还需要迁移 IMAP 文件夹（即已发送、自定义文件夹等） 我需要保持已读或未读状态保持不变。

如果我想到可以添加的其他内容，我会更新这篇文章。

所以你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:49:55.803

为什么要重新发明轮子？

使用“Imapsync”：IMAP 迁移工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T10:47:49.733

有一个旧的但仍在工作的工具，称为[imapcopy](http://home.arcor.de/armin.diehl/imapcopy/imapcopy.html)。它由两个文件组成，一个exe和一个配置文件。我已经成功迁移了我的邮箱。它不保留文件夹层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T14:33:26.637

我尝试在功能强大的盒子上使用 IMAPSync，但收件箱很大时速度很慢。我使用了一个名为 dropmyemail.com 的解决方案 - 很棒的服务。每天备份您的电子邮件，然后您只需单击“迁移”，剩下的就交给它了。他们也有免费试用 :)

# jquery - 尽管在服务器端成功执行，但 Jquery AJAX 返回错误 500

> ID：10552518
> 
> 赞同：5
> 
> 时间：2012-05-11T13:40:51.810
> 
> 标签：jquery, codeigniter

我在使用 codeigniter 和 JQuery Ajax Post 时遇到问题。

我的 javscript

```
 $('.remove').click(function(){
        var category=event.target.id;
        var id=$('input[name=article_id]').val();
        var p={};
        p['id']=id;

        $.ajax({
            type: "POST",
            url: "/backend.php/blog/removeCategories",
            async:true,
            cache:false,
            data: {id: id, category: category }
            }).done(function(msg){
                jQuery('#category_list').load('/backend.php/blog/refreshCategories/',p,function(str){});
            }); 
```

我的 codeigniter 的控制器

```
 function removeCategories(){
        $id=$_POST['id'];
        $category_id=$_POST['category'];

        $this->article->removeCategory($category_id,$id);
    } 
```

我无法让 ajax 函数工作，因为总是从服务器收到错误 500。虽然，firebug 返回加载资源时出错，但函数 removeCategories 还是被执行了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T13:44:06.307

`data`通过对选项进行以下更改，确保您的数据正确传递。

```
$.ajax({
            type: "POST",
            url: "/backend.php/blog/removeCategories",
            async:true,
            cache:false,
            data: {"id": id, "category": category }
            }).done(function(msg){
                jQuery('#category_list').load('/backend.php/blog/refreshCategories/',p,function(str){});
            }); 
```

按照您的编码方式，每个键值对的键都设置为变量的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T13:47:07.783

**您的错误可能在模型中。**使用 chrome dev toolkit 找出返回的页面内容是什么。`HTTP CODE 500`表示服务器错误，通常是由于 PHP 中某处的语法问题。

此外，在您的 ajax 调用中，您应该使用`success:`and `error:`。如果代码抛出错误，这将允许您停止执行。

你为什么打电话`backend.php/`你不使用`index.php`？

另一种方法是代替使用`.load()`，您可以简单地从控制器传回 html，然后`success: function(data){}`将其附加到容器中。这将允许您监视 ajax 调用是否为`error()`or`success()`并采取相应的行动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-12T17:50:42.553

在 Codeigniter 中，如果您在配置中激活了 csrf_protection，它将返回错误 500！

要解决这个问题，您必须发送 csrf 值。

**例子：**

```
$.ajax({
          type: "POST",
          url: "http://example.com",
          data: {
                 '<?php echo $this->security->get_csrf_token_name(); ?>' : 
                 '<?php echo $this->security->get_csrf_hash(); ?>'
                }
       }); 
```

# php - 缩略图限制最大 ''6''

> ID：10552525
> 
> 赞同：0
> 
> 时间：2012-05-11T13:41:07.867
> 
> 标签：php, drupal, module, drupal-modules, field

我正在使用 Drupal 7 并为我的内容缩略图首页显示创建一个模块。工作这个：

```
 if(count($p_detail->field_slide) > 0){
            $output .= '<div class="right">';
            $output .= '<ul class="thumbs">';
            $i=6;
            foreach($p_detail->field_slide['und'] as $thumb):
                $img_path = $thumb['uri'];
                $img_url = image_style_url('tmb_240x117', $img_path);
                $img_file = '<img src="'.$img_url.'" alt="'.$p_detail->title.'" />';

                $output .= '<li>
                                <a href="'.$p_url.'">
                                    '.$img_file.'
                                    <div class="shadow"></div>    
                                    <div class="hoverimg"></div>
                                 </a>
                                <div class="img_no">0'.$i.'</div>
                            </li>';
                $i--;
            endforeach;
            $output .= '</ul>';
            $output .= '</div>';
        } 
```

我的缩略图，field_slide，我只想要前 6 个缩略图（如果有 6 个图像......对于考试，有 2 个图像，显示 2 个缩略图）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:53:06.353

您应该尽量不要在 PHP 代码中使用 HTML。我强烈建议为此使用一些模板。但无论如何，回答你的问题：

你可以做两件事：

**答案 1（首选）：**

限制从您的数据源（通常是数据库）中检索到的项目数量，这些项目存储在：

```
$p_detail->field_slide 
```

**答案2（简单，不太好的方法）：**

创建一个计数器 ($i) 并在您的 foreach 中使用 if 语句。就像是：

```
$i = 6;
foreach($p_detail->field_slide['und'] as $thumb) {
    if($i > 0) {
        // Your current code here
        $i--;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:37:17.680

您可以将参数传递给您的方法并返回您的资源，该参数告诉您的方法您想要接收的资源量，然后在您的 sql 查询中使用此参数进行限制。

# mysql - PDO 相当于 mysql_client_encoding()？

> ID：10552528
> 
> 赞同：3
> 
> 时间：2012-05-11T13:41:17.443
> 
> 标签：mysql, character-encoding, pdo

PDO 中有什么方法可以检查客户端编码，就像在 mysql/mysqli 中一样`mysql_client_encoding();`？

在 PHP.net 上，它声明可以使用 设置字符集`PDO::setAttribute()`，例如：

```
$db->setAttribute(PDO::MYSQL_ATTR_INIT_COMMAND, "SET NAMES 'utf8'"); 
```

但是如何*获得*当前的字符集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T15:19:54.977

有两个不同的字符集有问题：

*   MySQL 假定字符串由客户端发送的编码 ( [`character_set_client`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_character_set_client))；和
*   MySQL 将发送其响应的编码 ( [`character_set_results`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_character_set_results))。

要使用 PDO 确定这些变量的当前值，您可以获取相关[`SHOW VARIABLES`](http://dev.mysql.com/doc/en/show-variables.html)语句的结果；例如：

```
$qry = $db->query("SHOW VARIABLES LIKE 'character_set_client'"); 
```

的文档[`mysql_client_encoding()`](http://php.net/manual/en/function.mysql-client-encoding.php)有些模棱两可，因为它指出：

> 从 MySQL检索***`character_set`***变量。

但是，不存在这样的服务器系统变量：所以我不确定它会返回哪个。

`MYSQL_ATTR_INIT_COMMAND`最后，您可以在 DSN 中指定所需的字符集，而不是设置 a （如[手册中所述](http://php.net/manual/en/ref.pdo-mysql.connection.php)）：

```
$db = new PDO("mysql:dbname=$db;host=$host;charset=$charset", $user, $password); 
```

# c# - LINQ to 具有多个数据库的实体

> ID：10552538
> 
> 赞同：0
> 
> 时间：2012-05-11T13:41:36.740
> 
> 标签：c#, asp.net, linq, entity-framework-4, linq-to-entities

这就是我想要实现的目标：

我需要在不同数据库（相同引擎）中的表上执行插入操作，然后“本地”插入，然后对于每个插入的操作，我必须执行一个循环以插入子表。

场景是这样的：`Person`, `Contract`, `PayOrder`(local), `PayOrder`(db2), `Contracts_PayOrder`. （代码本身不是英文的，但我添加了注释）

对于每个`contract`拥有的`person`，我需要创建一个`PayOrder`（在 2 个不同的数据库中），其值是所有合同的总和，然后再次，对于每个合同，我必须插入`Contracts_PayOrder`

我为此创建了 2 个不同的 .edmx。这就是我在尝试`SaveChanges`使用 LocalDB 时得到的结果：（阅读代码注释）

> System.Data.SqlClient.SqlException：不允许新事务，因为会话中还有其他线程在运行。

这是我的尝试：

```
using (RegistroContratoEntities dbs = new RegistroContratoEntities())
{
    //Get list of active PERSONS
    IQueryable<Credor> credorList = dbs.Credores.Where(c => c.Status == true);

    foreach (Credor credor in credorList)
    {
        //Keep the payOrder Id
        decimal? renavamBoletoId = null;

        //Get list of contracts for that person

        IQueryable<Contrato> contratosCredor = dbs.Contratos
            .Where(c => c.Credor_Id == credor.Id &&
                   c.DataRegistro.Value.Month == pMesReferencia &&
                   c.Status == true);

        if (contratosCredor.Count() > 0)
        {
            // Gets the total cost of the PayOrder
            decimal valorBoleto = contratosCredor.Count() * 11;

            //
            // Creates the PayOrder (One for each person) on the external db
            //

            using (RenavamEntities dbren = new RenavamEntities())
            {
                BoletoRenavam boletoREN = new BoletoRenavam();

                boletoREN.Arquivo = null;
                boletoREN.BoletoSituacao_Id = CodBoletoSituacao.Ativo;
                boletoREN.ConvenioBoleto_Id = CodBoletoConvenio.Padrao;
                boletoREN.Emissao = DateTime.Now;
                boletoREN.LogDataAlteracao = DateTime.Now;
                boletoREN.LogUsuario = "RegistroContratos";
                boletoREN.LogVersaoRegistro = 1;
                boletoREN.Pagamento = null;
                boletoREN.PagamentoValor = null;
                boletoREN.Processamento = null;
                boletoREN.Status = "S";
                boletoREN.ParcelaValor = valorBoleto;
                boletoREN.Vencimento = DateTime.Now.AddDays(15);

                dbren.AddToBoleto(boletoREN);
                dbren.SaveChanges();

                renavamBoletoId = boletoREN.Id;
            }

            //
            // The PayOrder on the "main"" db
            //
            Boleto boletoREG = new Boleto();

            boletoREG.NumeroBoletoRenavam = renavamBoletoId;
            boletoREG.ArquivoRetorno = null;
            boletoREG.BoletoConvenio_Id = CodBoletoConvenio.Padrao;
            boletoREG.BoletoSituacao_Id = CodBoletoSituacao.Ativo;
            boletoREG.Credor_Id = credor.Id;
            boletoREG.Emissao = DateTime.Now;
            boletoREG.LogAlteracao = DateTime.Now;
            boletoREG.LogUsuario = pUsuario;
            boletoREG.LogVersao = 1;
            boletoREG.NumeroBoletoRenavam = null;
            boletoREG.Pagamento = null;
            boletoREG.PagamentoValor = null;
            boletoREG.Processamento = null;
            boletoREG.Status = true;
            boletoREG.Valor = valorBoleto;
            boletoREG.Vencimento = DateTime.Now.AddDays(15);

            dbs.AddToBoletos(boletoREG);
            dbs.SaveChanges();

            //
            // Then, for each contract, inserts a row in a child table that
            // will relate all contracts with it's PayOrders

            foreach (Contrato contrato in contratosCredor)
            {
                BoletoTaxaContrato boletoContrato = new BoletoTaxaContrato();

                boletoContrato.Boleto = boletoREG;
                boletoContrato.Contrato = contrato;
                boletoContrato.Data = DateTime.Now;
                boletoContrato.LogAlteracao = DateTime.Now;
                boletoContrato.LogUsuario = pUsuario;
                boletoContrato.LogVersao = 1;
                boletoContrato.Quantidade = 1;
                boletoContrato.Taxa_Id = CodBoletoTaxa.RegistroContrato;

                dbs.AddToBoletoTaxaContratos(boletoContrato);
                dbs.SaveChanges();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:48:32.263

只需在打开新上下文之前关闭第一个上下文。

我知道您需要来自另一个上下文的一些数据，但您可以在之前加载它（例如将其转换为 list|entity 以在第一个上下文关闭之前执行您的查询）。

# android - 在 TextView 旁边对齐 EditText

> ID：10552539
> 
> 赞同：1
> 
> 时间：2012-05-11T13:41:39.820
> 
> 标签：android, alignment, android-linearlayout, android-edittext

我希望我的 EditTexts 相互对齐，长度相同，并且向右对齐。我正在使用线性布局。现在[它看起来像这样](http://img1.uploadscreenshot.com/images/orig/5/13100230869-orig.jpg)。

这是我的 Android 布局 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" android:configChanges = "orientation"
    android:screenOrientation = "portrait" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:maxLines="1"
            android:singleLine="true"
            android:text="Mail:"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android:id="@+id/tbopmail"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:inputType="textEmailAddress" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Fornavn:"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android:id="@+id/tbopfornavn"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:inputType="textPersonName" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Efternavn:"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android:id="@+id/tbopefternavn"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:inputType="textPersonName" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:maxLines="1"
            android:singleLine="true"
            android:text="Adresse:"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android:id="@+id/tbopadr"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" android:inputType="textPersonName"/>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout6"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Telefon:"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android:id="@+id/tboptlf"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:inputType="phone"
            android:maxLength="8" android:layout_weight="1"/>

    </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout3"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <Button
                android:id="@+id/btopret"
                android:layout_width="170dp"
                android:layout_height="wrap_content"
                  android:layout_gravity="right"
                android:layout_marginTop="50dp"
                android:text="Opret mig som bruger!" android:layout_marginLeft="100dp" android:layout_marginRight="1dp"/>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:02:42.730

您正在寻找的是`android:layout_weight`属性，它告诉 Activity 每个视图应占用的父级百分比。每个父视图在布置其子视图时都会考虑此属性，父布局的权重为“1”以分配给其每个视图。这对应于 100% 的视图。如果你给孩子们（你的 textviews 和 edittexts）`android:layout_weight=".5"`，他们每个人都会扩大到占据父母空间的 50%。对于您的情况，您似乎希望文本视图的权重为 0.25，编辑文本的权重为 0.75。

此外，如果您不喜欢使用小数，您可以为父视图分配`android:weightSum`属性。您的新数字将对应于父视图的 100%，而不是 1。例如，如果您想要为视图拆分 25%-75%，则给每个父 LinearLayout 的 weightSum 为 4，TextView 的权重为 1， EditTexts 的权重为 3。

I just looked at your code before submitting and realized that you already use the `layout_weight` attribute. To get a little more in depth, when you give a single view in a parent a weight of 1, as you are, you're telling it to take up all available space after the other views have been laid out. So your textview is wrapping it's content and taking up a minimal amount of the parent, and the EditTexts get the rest. Basically, weight will not prevent a view from being laid out. If it requires more space in a parent than the weight is providing it, the remaining space is divided based on the weight of the other children.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:46:27.673

我不尝试，但也许你可以使用表格布局来解决这个问题。 [http://developer.android.com/resources/tutorials/views/hello-tablelayout.html](http://developer.android.com/resources/tutorials/views/hello-tablelayout.html) 可以看看这个链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:47:29.407

你可以尝试使用RelativeLayout

[http://developer.android.com/resources/tutorials/views/hello-relativelayout.html](http://developer.android.com/resources/tutorials/views/hello-relativelayout.html)

或以其他方式尝试具有相等列的 TableLayout

[http://developer.android.com/resources/tutorials/views/hello-tablelayout.html](http://developer.android.com/resources/tutorials/views/hello-tablelayout.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:51:34.677

您可以在 LinearLayout 中使用 weightSum ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T14:46:32.003

只需将**android:orientation="vertical"**添加到您的 linearlayout1,2,3...

```
<LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" > 
```

# linux - sendmsg 失败，错误代码为 3 (ESRCH)

> ID：10552542
> 
> 赞同：14
> 
> 时间：2012-05-11T13:42:01.803
> 
> 标签：linux, network-programming, udp

操作系统：Linux 2.6.24 (x86)

我的应用程序在服务器上运行，其中有多个客户端通过 UDP 端口 4500 连接到它。
间歇性地，应用程序无法将 UDP 流量发送到 UDP 端口 4500 上的客户端

这是因为 sendmsg 系统调用失败并出现错误代码 3 (ESRCH)
sendmsg 的手册页没有提及错误 ESRCH

即使杀死应用程序并重新启动它，问题也没有解决。
其他端口上的 UDP 流量工作正常

重新启动服务器是唯一的解决方案。

对于内核 2.6.11，我还没有看到这样的问题。

关于如何调试此问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-02T14:47:26.287

要调试此问题，鉴于可用的信息，我认为最好的起点是查看是否有`sendmsg`可以返回的方法`ESRCH`。首先，我们需要获取您看到问题的特定内核版本的源代码，我在[这里找到了它](https://www.kernel.org/pub/linux/kernel/v2.6/)

经过一番挖掘，我们可以看到以下链可能会执行：

```
net/ipv4/udp.c:646:     
    err = ip_route_output_flow(&rt, &fl, sk, 1);

net/ipv4/route.c:2421:
    err = __xfrm_lookup((struct dst_entry **)rp, flp, sk, flags);

net/xfrm/xfrm_policy.c:1380:
    pols[1] = xfrm_policy_lookup_bytype(XFRM_POLICY_TYPE_MAIN,
                            fl, family,
                            XFRM_POLICY_OUT);

net/xfrm/xfrm_policy.c:890:
    err = xfrm_policy_match(pol, fl, type, family, dir); 
```

最后，我们最终在`net/xfrm/xfrm_policy.c:854:xrfm_policy_match`

```
/*
 * Find policy to apply to this flow.
 *
 * Returns 0 if policy found, else an -errno.
 */
static int xfrm_policy_match(struct xfrm_policy *pol, struct flowi *fl,
             u8 type, u16 family, int dir)
{
    struct xfrm_selector *sel = &pol->selector;
    int match, ret = -ESRCH;

    if (pol->family != family ||
        pol->type != type)
        return ret;

    match = xfrm_selector_match(sel, fl, family);
    if (match)
        ret = security_xfrm_policy_lookup(pol, fl->secid, dir);

    return ret;
} 
```

因此，看起来错误来自`xfrm_policy_match`如果您检查代码，`xfrm_lookup_bytype`您会发现一个循环一直持续到迭代器用尽或返回值`xrfm_policy_match`is not `ESRCH`。

这告诉我们您的 sendmsg 调用失败，因为您的端口没有 xfrm 策略。当您声明它有效时，错误就会发生并持续存在，这表明您系统上的 xfrm 策略正在被调整或损坏。

[通过查看此处](http://man7.org/linux/man-pages/man8/ip-xfrm.8.html)的 xfrm 手册页，我们可以看到有一些用于调查策略的工具。通过阅读手册页，我的下一步将`ip xfrm state list`在问题未发生和发生后运行并比较输出。不幸的是，我没有一个正在运行的带有 2.6.24 内核的系统来进行更深入的研究。

请注意，我没有任何技巧可以得出这个结论，它是通过检查代码、grepping 和查找来确定的。这可能需要花费大量时间和精力，尤其是当您不熟悉代码库时。为了解决这个问题而不是调试它，我会在深入挖掘之前尝试不同的内核版本。

* * *

## TL;博士

看起来`ESRCH`错误来自一个名为 的网络子系统`xfrm`，有一组用于调查的工具`xfrm`可以在其手册页上[找到](http://man7.org/linux/man-pages/man8/ip-xfrm.8.html)

错误似乎很可能是由于您尝试发送到的地址/端口缺少策略。这可能是由于系统运行时配置更改或导致 xfrm 策略损坏的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T17:14:40.107

当我的 LAN 上的主机无法访问（以太网拔出）时，我刚刚在 OSX 上收到此错误。因此，它似乎可能由多种条件触发。（机场）路由器可能生成了 ICMP。

# c# - c# 7za.exe进程状态

> ID：10552544
> 
> 赞同：3
> 
> 时间：2012-05-11T13:42:07.243
> 
> 标签：c#, process, progress, 7zip

我正在运行一个 7za.exe 进程来对这样的文件进行 7zip 压缩：

```
ProcessStartInfo proc = new ProcessStartInfo();
proc.FileName = zip_Path;
proc.Arguments = "a -t7z ziped.7z file.bak";
proc.RedirectStandardInput = true;
proc.RedirectStandardOutput = true;
proc.UseShellExecute = false;
proc.CreateNoWindow = true;
p = Process.Start(proc); 
while (!p.HasExited)
{   
    res = p.StandardOutput.ReadLine();
    texto += "\n" + res;
}
 MessageBox.Show(texto + "\n" + "ErrorCode:" + p.ExitCode);
 p.Close(); 
```

这很好用，但是当我`7za.exe`在控制台上手动运行时，我可以看到压缩进度。有没有办法在我的应用程序上实时输出它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-29T10:15:52.923

我知道这是一个老问题，但我在这里找到了答案[https://stackoverflow.com/a/4291965/4050735](https://stackoverflow.com/a/4291965/4050735)

来自答案的代码示例：

```
var proc = new Process {
StartInfo = new ProcessStartInfo {
    FileName = "program.exe",
    Arguments = "command line arguments to your executable",
    UseShellExecute = false,
    RedirectStandardOutput = true,
    CreateNoWindow = true
}

proc.Start();
while (!proc.StandardOutput.EndOfStream) {
    string line = proc.StandardOutput.ReadLine();
    // do something with line
} 
```

我发现这会返回您通常在控制台中看到的每一行，例如每次压缩一个文件的每个文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-23T10:56:09.627

Hej，我今天遇到了同样的问题。因此，对于所有寻找答案并访问此网站的人（我想当您在 2014 年发布问题时，您将不再使用此信息）这是我解决问题的方法：

其核心是 7-Zip 使用不同的流来写入输出，而 C# 只获取其中一个。但是您可以使用命令行参数强制 7-Zip 仅使用一个流

```
-bsp1 -bse1 -bso1 
```

除了你还需要什么。然后像这样捕获百分比部分：

```
private static void CreateZip(string path, string zipFilename, Action<int> onProgress) {
    Regex REX_SevenZipStatus = new Regex(@"(?<p>[0-9]+)%");

    Process p = new Process();
    p.StartInfo.FileName = "7za.exe";
    p.StartInfo.Arguments = string.Format("a -y -r -bsp1 -bse1 -bso1 {0} {1}", 
        zipFilename, path);
    p.StartInfo.UseShellExecute = false;
    p.StartInfo.RedirectStandardOutput = true;

    p.OutputDataReceived += (sender, e) => {
        if (onProgress != null) {
            Match m = REX_SevenZipStatus.Match(e.Data ?? "");
            if (m != null && m.Success) {
                int procent = int.Parse(m.Groups["p"].Value);
                onProgress(procent);
            }
        }
    };

    p.Start();
    p.BeginOutputReadLine();
    p.WaitForExit();
} 
```

此方法将文件夹压缩为 7-Zip 文件。您可以使用 onProgress 参数（在另一个线程中调用）来处理状态 - 它将包含状态的百分比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T01:13:54.270

取决于它与控制台的交互方式`ReadLine()`可能还不够，因为它只会在输出换行符时返回。

7za.exe 可能正在操纵当前行以显示进度，在这种情况下您应该可以使用`Read()`.

如果您想更好地了解压缩发生的情况，您可以使用 LZMA C# SDK 查看 - 查看[SevenZipSharp](https://sevenzipsharp.codeplex.com/ "SevenZipSharp")。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:52:35.597

代替：

```
proc.CreateNoWindow = true; 
```

尝试：

```
proc.WindowStyle = ProcessWindowStyle.Hidden; 
```

# asp.net - jqueryui 日期选择器适用于一个字段

> ID：10552545
> 
> 赞同：0
> 
> 时间：2012-05-11T13:42:08.037
> 
> 标签：asp.net, jquery-ui, asp.net-dynamic-data

我在 ASP.NET 动态数据中使用 JQueryUi 日期选择器。有些表单有多个日期时间字段。但是日期选择器适用于第一个，其他字段不显示日期选择器。我该如何解决这个问题？

```
<script type="text/javascript">
$(document).ready(function () {
    $('#<%=TextBox1.ClientID %>').datepicker({
        showOn: "button",
        buttonImage: "../images/calendar.gif",
        buttonImageOnly: true
    }).regional['fa'];
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:58:43.113

这一行将`$('#<%=TextBox1.ClientID %>').`DatePicker 分配给输入，`ID=TextBox1`并且只分配给这个，所以它就像你说的那样工作。

要添加更多 DatePickers，您可以使用您希望使用 DatePicker 的其余控件添加更多行，或者在此控件上设置相同的 css 来访问 DatePicker 并将代码更改为`$('.DateKeeperCss').`您将**DateKeeperCss**样式设置为所有文本编辑器的位置您希望拥有 DatePicker。例如：

```
$(document).ready(function () {
    $('.DateKeeperCss').datepicker({
        showOn: "button",
        buttonImage: "../images/calendar.gif",
        buttonImageOnly: true
    }).regional['fa'];
}); 
```

和

```
<asp:TextBox runat="server" ID="TextBox1" CssClass="DateKeeperCss"></asp:TextBox>
<asp:TextBox runat="server" ID="TextBox2" CssClass="DateKeeperCss"></asp:TextBox>
<asp:TextBox runat="server" ID="TextBox3" CssClass="DateKeeperCss"></asp:TextBox>
<asp:TextBox runat="server" ID="TextBox4" CssClass="DateKeeperCss"></asp:TextBox> 
```

# iphone - 按下不同按钮时显示两个不同的数组

> ID：10552548
> 
> 赞同：0
> 
> 时间：2012-05-11T13:42:16.040
> 
> 标签：iphone, ios, xcode, arrays, uiviewcontroller

我有一个`UIViewController`名为 ForthViewControler 的两个按钮属性：
.h 文件：

```
#import <UIKit/UIKit.h>

@interface ForthViewController : UIViewController

@property (nonatomic, strong) IBOutlet UIButton* imgBtn;
@property (nonatomic, strong) IBOutlet UIButton* imgBtn2;

@end 
```

在 .m 文件中，我有那些连接到 Interface Builder 中的按钮的方法：

```
#import "SDWebImageRootViewController.h"

@implementation ForthViewController

@synthesize imgBtn, imgBtn2;

-(IBAction)menueBtnAction:(id)sender
{    
    SDWebImageRootViewController* tivc1 = [[SDWebImageRootViewController alloc] initWithNibName:@"SDWebImageRootViewController" bundle:nil];
    [self.navigationController pushViewController:tivc1 animated:NO];
}

-(IBAction)menueBtnActionAfter:(id)sender
{    
    SDWebImageRootViewController* tivc1 = [[SDWebImageRootViewController alloc] initWithNibName:@"SDWebImageRootViewController" bundle:nil];
    [self.navigationController pushViewController:tivc1 animated:NO];   
} 
```

这些方法通向 SDWebImageRootViewController。
这就是我在 SDWebImageRootViewController:
.h 文件中的内容：

```
#import <UIKit/UIKit.h>
#import "KTThumbsViewController.h"

@class SDWebImageDataSource;

@interface SDWebImageRootViewController : KTThumbsViewController 
{
@private
   SDWebImageDataSource *images_;
   UIWindow *window_;
}

@end 
```

.m 文件：

```
#import "SDWebImageRootViewController.h"
#import "SDWebImageDataSource.h"

@interface SDWebImageRootViewController ()

@end

@implementation SDWebImageRootViewController
}

- (void)viewDidLoad 
{
   [super viewDidLoad];

   self.title = @"SDWebImage Sample";

   images_ = [[SDWebImageDataSource alloc] init];
   [self setDataSource:images_];
} 
```

最后，在 SDWebImageDataSource 文件中我有这个：
.h 文件：

```
#import <Foundation/Foundation.h>
#import "KTPhotoBrowserDataSource.h"

@interface SDWebImageDataSource : NSObject <KTPhotoBrowserDataSource>
{
   NSMutableArray *images_;
}

@end 
```

.m 文件：

```
#import "SDWebImageDataSource.h"
#import "KTPhotoView+SDWebImage.h"
#import "KTThumbView+SDWebImage.h"
#import "ForthViewController.h"

#define FULL_SIZE_INDEX 0
#define THUMBNAIL_INDEX 1

@implementation SDWebImageDataSource

- (id)init
{
    self = [super init];
    if (self)
{
    // Create a 2-dimensional array. First element of
    // the sub-array is the full size image URL and 
    // the second element is the thumbnail URL.

    ForthViewController* tivc1 = [[ForthViewController alloc] initWithNibName:@"ForthViewController" bundle:nil];

    if (tivc1.imgBtn.selected == YES)
    {

        images_ = [[NSMutableArray alloc] initWithObjects:

                   [NSArray arrayWithObjects:@"http://farm6.static.flickr.com/5181/5554192246_e7cf81fb00_z.jpg", @"http://farm6.static.flickr.com/5181/5554192246_e7cf81fb00_s.jpg", nil],
                   [NSArray arrayWithObjects:@"http://farm6.static.flickr.com/5260/5554955879_01bfab9aeb_z.jpg", @"http://farm6.static.flickr.com/5260/5554955879_01bfab9aeb_s.jpg", nil],
                   [NSArray arrayWithObjects:@"http://farm6.static.flickr.com/5051/5556628277_f883fa1078_z.jpg", @"http://farm6.static.flickr.com/5051/5556628277_f883fa1078_s.jpg", nil], nil];
    }

    else
    {
        if (tivc1.imgBtn2.selected == YES)
        {
        images_ = [[NSMutableArray alloc] initWithObjects:
                   [NSArray arrayWithObjects:@"http://dl.dropbox.com/u/6089026/icon2.png", @"http://dl.dropbox.com/u/6089026/icon2.png", nil],
                   [NSArray arrayWithObjects:@"http://farm4.static.flickr.com/3427/3192205971_0f494a3da2_o.jpg", @"http://farm4.static.flickr.com/3427/3192205971_b7b18558db_s.jpg", nil],
                   [NSArray arrayWithObjects:@"http://farm2.static.flickr.com/1316/4722532733_6b73d00787_z.jpg", @"http://farm2.static.flickr.com/1316/4722532733_6b73d00787_s.jpg", nil],
                   [NSArray arrayWithObjects:@"http://farm2.static.flickr.com/1200/591574815_8a4a732d00_o.jpg", @"http://farm2.static.flickr.com/1200/591574815_29db79a63a_s.jpg", nil],
                   [NSArray arrayWithObjects:@"http://dl.dropbox.com/u/6089026/mika4.png", @"http://dl.dropbox.com/u/6089026/mika4.png", nil], nil];
            }
        }
    }
            return self; 
```

}

```
#pragma mark -
#pragma mark KTPhotoBrowserDataSource

- (NSInteger)numberOfPhotos
{
NSInteger count = [images_ count];
return count;
}

- (void)imageAtIndex:(NSInteger)index photoView:(KTPhotoView *)photoView {
    NSArray *imageUrls = [images_ objectAtIndex:index];
    NSString *url = [imageUrls objectAtIndex:FULL_SIZE_INDEX];
    [photoView setImageWithURL:[NSURL URLWithString:url] placeholderImage:[UIImage imageNamed:@"photoDefault.png"]];
}

- (void)thumbImageAtIndex:(NSInteger)index thumbView:(KTThumbView *)thumbView {
    NSArray *imageUrls = [images_ objectAtIndex:index];
    NSString *url = [imageUrls objectAtIndex:THUMBNAIL_INDEX];
    [thumbView setImageWithURL:[NSURL URLWithString:url] placeholderImage:[UIImage imageNamed:@"photoDefault.png"]];
}

@end 
```

如您所见，我尝试调用 ForthViewController 并将两个按钮用于“f”语句。
问题是每次我按下两个按钮之一（在我的 ForthViewController nib 文件中）它都会导致相同的数组......我会很高兴知道我做错了什么？
抱歉发了这么长的帖子，我想提供最详细的信息：）
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:47:15.340

你应该 setSelected 你的按钮。在您的 IBAction 方法中

```
 [tivc1.imgBtn setSelected:YES]; 
```

和

```
 [tivc1.imgBtn2 setSelected:YES]; 
```

在他们的方法中。然后它将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:47:27.313

你没有正确使用

```
if (tivc1.imgBtn2.selected == YES)
        {..... 
```

一件事是将按钮设置为选中状态

```
imgBtn2.selected = YES 
```

但是如果您在其他任何地方分配此类的对象，这可能会导致错误

第二个，也就是说，它不会给你正确的结果，因为它们现在不再被选中，并且总是只会访问第一个条件部分，在数据源中使用一些属性并将按钮 1 的值设置为 1 ，将按钮 2 的值设置为 2 ，然后检查该属性而不是按钮

# jakarta-ee - 我能否将所有 EJB 部署描述符放在 EAR 文件的 META-INF 目录中，而不是 EJB jar 文件中

> ID：10552552
> 
> 赞同：1
> 
> 时间：2012-05-11T13:42:29.147
> 
> 标签：jakarta-ee, jboss, ejb, ejb-3.0

我有一个作为 EAR 文件交付的企业应用程序。耳朵内的 META-INF 文件夹包含预期的“application.xml”，以及属于该应用程序的模块列表。

耳朵内还有许多 EJB jar 文件，每个文件都包含许多 EJB。出于某些原因，我们希望使用 XML 部署描述符来配置所有 ejb。因此，我们有许多 ejb-jar 文件，每个文件都嵌入到 ear 文件中每个 jar 的 META-INF 文件夹中，如下所示。

```
EAR_FILE
：     
:-----META-INF
: :
：-应用程序.xml
：     
：     
:--------EJB_JAR_1
: :
: -META-INF
: :
：-ejb-jar.xml
:--------EJB_JAR_2
: :
: -META-INF
: :
：-ejb-jar.xml
:-----EJB_JAR_3
              ：
              -META-INF
                      ：
                      -ejb-jar.xml

```

如您所见，这会产生许多单独的 ejb-jar.xml 部署描述符。我们希望能够将其集中到一个部署描述符中，该描述符定义了应用程序中的所有 ejb。

此外，我们希望将单独的 ejb jar 文件保存在耳朵中，而不是将它们全部放在一个耳朵中。

是否可以在包含应用程序中所有 EJB 配置的 ear 文件的 META-INF 文件夹中有一个“主”ejb-jar 文件？

或者甚至可以将 ejb-jar 文件放在包含 EJB 的实际 jar 之外？

归根结底，我真正想要实现的是将所有 ejb 部署描述符集中到某个文件中，而不是像上面那样让它们分布在每个单独的 EJB jar 中？

非常感谢，

戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:04:14.433

> 或者甚至可以将 ejb-jar 文件放在包含 EJB 的实际 jar 之外？

是的，但更准确地说：可以在 EJB 模块 JAR 之外拥有 EJB 类。换句话说，你可以用一个ejb-jar.xml创建一个单独的EJB模块，然后把所有的EJB_JAR_1、EJB_JAR_2等放到EAR/lib/目录下，这样就自动让所有的JAR对所有的EJB可见了EAR 中的模块（或者，在您的情况下为单个 EJB 模块）。`Class-Path: ejb-1.jar ejb-2.jar`或者，您可以在 EJB 模块 META-INF/MANIFEST.MF 中手动维护一个列表，但这需要更多的工作。

# java - response.flushBuffer() 不工作

> ID：10552555
> 
> 赞同：6
> 
> 时间：2012-05-11T13:42:33.707
> 
> 标签：java, servlets, streaming, oracle11g, blob

我正在尝试实现一个用于流式传输大型对象的 servlet：

```
 oracle.sql.BLOB blob = rs.getBLOB('obj');
    InputStream in = blob.getBinaryStream();

    int bufferSize = 1024;
    byte[] buffer = new byte[bufferSize];

    ServletOutputStream out = response.getOutputStream();

    int counter=0
    while((length=in.read(buffer)) != -1){
        out.write(buffer,0,length);
        counter++;
        if(counter % 10 == 0){
        counter=0;
        response.flushBuffer();
    } 
```

此代码假设通过块将数据发送到客户端块。现在发生的事情是，当我流式传输大型对象（100 MB）时，内存会增加，如果有多个并行下载/流，服务器有时会死机。

为什么这`flushBuffer()`不向客户端发送数据？只有在响应关闭后，客户端才会弹出打开/保存文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:48:30.113

你必须`Content-Length`在写数据之前设置header，否则服务器被迫缓冲所有数据，直到流关闭，此时它可以自己计算值，写入header，并发送所有数据。一旦你得到输出流，在你写任何数据之前，设置内容长度：

```
response.setHeader("Content-Length", String.valueOf(blob.length())); 
```

大多数服务器在这一点上都足够聪明，可以自己刷新缓冲区，所以你可能甚至不需要调用`flushBuffer()`——尽管它没有坏处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:06:11.587

首先，你需要一个响应的响应头，`servlet`这样容器才能知道信息在多少字节后才能结束：

```
response.setHeader("Content-Length", String.valueOf(blob.length())); 
```

# database-design - 这两个 Doctrine 映射的真正区别是什么？

> ID：10552559
> 
> 赞同：2
> 
> 时间：2012-05-11T13:42:46.977
> 
> 标签：database-design, orm, doctrine, doctrine-orm, associations

A`Product`可能有零个或多个`Label`。A`Label`可以分配为零或多个`Product`。那么， Doctrine 中的**映射 A**和**映射 B**有什么区别呢？

## 映射 A (OneToMany - ManyToOne)

```
/**
 * @ORM\Entity
 * @ORM\Table(name="product")
 */
class Product
{
    /**
     * @ORM\OneToMany(targetEntity="Label", mappedBy="products")
     */
    protected $labels;
}

/**
 * @ORM\Entity
 * @ORM\Table(name="label")
 */
class Label
{
    /**
     * @ORM\ManyToMany(targetEntity="Product", inversedBy="labels")
     */
    protected $products;
} 
```

## 映射 B (ManyToMany - ManyToMany)[文档示例](http://readthedocs.org/docs/doctrine-orm/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional)

```
/**
 * @ORM\Entity
 * @ORM\Table(name="product")
 */
class Product
{
    /**
     * @ORM\ManyToMany(targetEntity="Label", mappedBy="products")
     */
    protected $labels;
}

/**
 * @ORM\Entity
 * @ORM\Table(name="label")
 */
class Label
{
    /**
     * @ORM\ManyToMany(targetEntity="Product", inversedBy="labels")
     */
    protected $products;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:28:49.707

您的第一个示例尝试将 ONE-TO-MANY 关系与 MANY-TO-MANY 关系匹配。这将在尝试访问产品标签时引起问题。它将尝试在标签表的列中查找关系。虽然多对多关系应该有一个额外的表来耦合两个实体。

这是纯理论上的。我没有用真正的代码尝试过，但我想如果你使用第一个例子，Doctrine 会抛出异常。我实际上不应该使用第一个例子。

如果您不熟悉不同类型的关系，请阅读一些关于 RDBMS 的文章： [http ://en.wikipedia.org/wiki/Relational_model](http://en.wikipedia.org/wiki/Relational_model)

# php - 检查英国日期是否在 SQL 中的两个日期之间

> ID：10552560
> 
> 赞同：0
> 
> 时间：2012-05-11T13:42:51.643
> 
> 标签：php, mysql, date

我需要`postmeta.event_date`使用 SLQ 格式检查以 dd/mm/yyyy 格式在数据库表 () 中存储为字符串的英国日期是否介于两个日期之间`BETWEEN 'yyyy-mm-dd' AND 'yyyy-mm-dd+28'`。我可以确定要检查的日期，这是检查我是否遇到问题的日期，因为它的 SQL 格式错误。

我无法更改要检查的日期格式，因为它附加到帖子中，并且我不知道要从数据库中删除哪些帖子，直到我可以检查它们是否在我选择的日期之间...

有什么想法，如果这是可能的，或者我是否在查看两个查询（通过检查 PHP 中的数据来获取我真正想要的那些帖子的 ID）？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:49:49.810

转换日期的方法是使用`str_to_date`：

```
STR_TO_DATE(event_date, '%d/%m/%Y') 
```

这会将您的日期转换为您可以在`BETWEEN`公式中使用的日期。

[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:03:44.537

您可以使用以下构造：

STR_TO_DATE(postmeta.event_date, '%d/%m/%Y') 在 'yyyy-mm-dd' 和 'yyyy-mm-dd' 之间 + 间隔 28 天

但是，在可用于过滤的列中使用数据库本身不支持的自定义日期格式通常是一种糟糕的设计，除非人们可能确切地知道他们在做什么。

依赖于上面提供的过滤器的查询将起作用，但它不会非常有效，因为这种范围查找无法通过索引进行优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:45:31.183

怎么样

```
WHERE event_date BETWEEN 'yyyy-mm-dd' AND DATE_ADD('yyyy-mm-dd', INTERVAL 28 DAY) 
```

显然，`yyyy-mm-dd`将替换为实际值：

```
WHERE event_date BETWEEN '2011-05-11' AND DATE_ADD('2011-05-11', INTERVAL 28 DAY) 
```

如果您的日期字符串不是预期的格式，您必须先解析它。您可以在 PHP 中执行此操作或使用`STR_TO_DATE`.

```
WHERE event_date 
BETWEEN 
    STR_TO_DATE('01/05/2011','%d/%m/%Y') AND
    DATE_ADD(STR_TO_DATE('01/05/2011','%d/%m/%Y'), INTERVAL 28 DAY) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:49:10.240

这是从今天到接下来的 28 天的时间段

```
 $now = mktime();
  //set your period date
  $from = mktime(0, 0, 0, date("m",$now), date("d",$now), date("Y",$now));
  $to   = mktime(23, 59, 59, date("m",$now), date("d",$now)+28, date("Y",$now)); 
```

这是您的查询

```
 SELECT * FROM `postmeta` WHERE UNIX_TIMESTAMP(`event_date`)>='".$from."' AND UNIX_TIMESTAMP(`event_date`)<='".$to."' 
```

# python - Python：有效地将大列表输入到 Web 表单中？

> ID：10552565
> 
> 赞同：1
> 
> 时间：2012-05-11T13:43:01.203
> 
> 标签：python, selenium

我正在使用模块 selenium 和 xlrd 将许多数据单元格（~1000）从 excel 输入到 Web 表单中。我已经使用 selenium 的 send_keys 成功编写了执行此操作的代码，但是由于在提交表单之前处理输入，目前存在很大的时间延迟。我目前编译一个包含每个单元格值的大字符串，然后使用 send_keys 将其一次性放入表单中，如下所示：

```
for z in range(1000):
        ss = ss + (str(sh.row_values(z)[1])) + "\n"
form.send_keys(ss) 
```

我注意到，当我简单地将 1000 个 excel 单元格手动复制并粘贴到表单中时，提交前几乎没有处理延迟，所以我想有一种更有效的方法可以在不使用 selenium 的 send_keys 的情况下完成我想要的事情。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:17:22.250

您可能会考虑使用 javascript 来自己设置字段的值。

[这里的答案](https://stackoverflow.com/questions/5585343/getting-the-return-value-of-javascript-code-in-selenium/5585345#5585345)显示了如何在 python 中使用 selenium 执行 javascript。设置文本字段的值时，动作几乎是瞬时的，您不应该获得表单处理缓慢的效果。

但是请记住，一旦您开始使用 javascript 而不是 selenium 给定的 API，您将开始失去其内置的一些功能。例如，如果页面尚未加载并且您尝试执行 javascript，则操作将立即失败，因为它找不到元素，而 Selenium 会满足地等待一段时间，如果它没有找到元素，看看它是否最终会加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:51:18.237

如果没有涉及到 javascript，你可以试试 Mechanize

[http://wwwsearch.sourceforge.net/mechanize/](http://wwwsearch.sourceforge.net/mechanize/)

这就是您可以使用 Mechanize 处理表单的方式 -

[http://wwwsearch.sourceforge.net/mechanize/forms.html](http://wwwsearch.sourceforge.net/mechanize/forms.html)

# php - 正则表达式多次匹配多行

> ID：10552571
> 
> 赞同：0
> 
> 时间：2012-05-11T13:43:23.000
> 
> 标签：php, regex

我有一个这样的字符串：

```
Name: John Doe

Age: 23

Primary Language: English

Description: This is a multiline
description field that I want 
to capture

Country: Canada 
```

这不是实际数据，但您可以看到我正在尝试做的事情。我想使用正则表达式来获取“关键”字段（姓名、年龄、主要语言、描述、国家）及其值的数组。

我正在使用 PHP。

我目前的尝试是这样的，但它不起作用：

```
preg_match( '/^(.*?\:) (.*?)(\n.*?\:)/ism', $text, $matches ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:29:54.090

这是一个解决方案：[http](http://rubular.com/r/uDgXcIvhac) ://rubular.com/r/uDgXcIvhac 。

```
 \s*([^:]+?)\s*:\s*(.*(?:\s*(?!.*:).*)*)\s* 
```

请注意，我使用了否定的前瞻断言，`(?!.*:)`. 这是您可以检查下一行*是否*看起来不像新字段的唯一方法，同时从您离开的地方继续。（这就是为什么前瞻和后瞻被称为*零宽度*断言的原因。）

编辑：删除了关于任意宽度前瞻的位；我误解了。上面的解决方案很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:46:48.110

PHP 的 strtok 会帮助你吗？您可以将它与“：”一起用作分隔符/标记并修剪前导和尾随空格以删除不需要的新行。

[http://php.net/manual/en/function.strtok.php](http://php.net/manual/en/function.strtok.php)

# sql - 在已经有聚集索引的字段上放置非聚集索引时性能会提高吗？

> ID：10552575
> 
> 赞同：0
> 
> 时间：2012-05-11T13:43:40.687
> 
> 标签：sql, indexing, sql-server-2008-r2, clustered-index, non-clustered-index

我昨天按照以下几行执行了更新语句：

```
UPDATE MainTable
Set SomeField = SubsetTable.SomeField
where MainTable.MainTableKey = SubsetTable.MainTableKey 
```

其中`SubsetTable`是一个子集，`MainTable`并且具有相同的主键字段。`MainTable`大约有 2 亿条记录，`SubsetTable`有 50 万条记录。`MainTableKey`是一个 GUID。

这两个表都有一个聚集索引`MainTableKey`。

当我第一次执行这个查询时，它花了 14 个小时。

`MainTableKey`然后我在两个表上都添加了一个非聚集索引。现在需要 30 分钟。

有没有人知道为什么性能增益会如此显着？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:59:11.653

我敢打赌，如果您查看执行计划：

第一个查询是一个合并连接，涉及完全读取两个表。

```
200M rows + 5M rows = 205M rows.
205M rows / 14 hours = 4067 rows per second. 
```

第二个查询是嵌套循环连接，它读取整个小表并为每个小表行查找大表。

```
5M + 5M rows = 10M rows.
10M rows / 40 minutes = 4166rows per second. 
```

这些速率大致相等，支持我关于读取哪些行的理论。

您不必猜测：使用 运行查询`SET STATISTICS IO ON`，和/或查看执行计划。

# android - 服务和活动流程

> ID：10552578
> 
> 赞同：1
> 
> 时间：2012-05-11T13:43:48.970
> 
> 标签：android

我有一项活动的服务，我希望有与活动不同的服务流程，我已经做到了：

```
android:process=":MA_TEST" 
```

但有个问题

在任务管理器中，如果我结束我的活动，它会自动关闭服务，我希望我的服务真的在与活动不同的进程上工作。

另外，如何从任务管理器中隐藏我的活动？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:38:12.157

> 我希望服务流程与活动流程不同

为什么？这会浪费系统资源（RAM、CPU）并且通常不需要。

> 在任务管理器中，如果我结束我的活动，它会自动关闭服务

无论您的“任务管理器”是什么，都不会“结束”“活动”，而是停止您的应用程序，其中包括所有进程。

> 另外，如何从任务管理器中隐藏我的活动？

出于明显的安全原因，您不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:01:27.133

在 adb shell 中，您应该能够使用“ps”命令来验证服务是否有自己的进程条目，与应用程序的其余部分不同。

在模拟器上，adb 以 root 身份运行，因此您可以通过其 PID 专门杀死非服务进程。该服务不应因此而直接死亡，尽管如果这意味着该服务不再与用户有任何连接，这可能会使 Android 重新获得它。

这更多是为了便于理解，因为特定 pid-killing 在安全设备上不可用。

# assembly - 与 CMPSB 指令混淆

> ID：10552579
> 
> 赞同：6
> 
> 时间：2012-05-11T13:43:50.443
> 
> 标签：assembly, nasm, bootloader, 16-bit, osdev

我一直在看这段代码，我对**rep cmpsb**行感到困惑。

```
.LOOP:
      push    cx
      mov     cx, 0x000B                            ; eleven character name
      mov     si, ImageName                         ; image name to find
      push    di
 rep  cmpsb                                         ; test for entry match
      pop     di
      je      LOAD_FAT
      pop     cx
      add     di, 0x0020                            ; queue next directory entry
      loop    .LOOP
      jmp     FAILURE 
```

我知道它重复 cmpsb cx 次，但这如何比较两个字符串？比如说比较“Hey\0”和“hey\0”，这个循环比较4个字符串。第一个字符不同，并且 EFlags 寄存器将被相应地设置。但是，**cmpsb**指令会重复，并且下一个字符将是相同的。我可能误解了**cmpsb 的**工作原理，但看起来这个循环没有正确比较两个字符串。这个循环真的有效吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T14:15:05.470

REP 起作用的原因是 rep 与 REPE (F3h) 具有相同的编码。原则上 REPE 在这里使用是正确的，但根据您的汇编程序，它可能只是将 REP 视为正确的。

所以实际上你在那里有一个 REPE cmpsb，只是你的（反）汇编程序并不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:06:52.033

我认为您必须在 cmpsb 中使用 REPE 或 REPNE 前缀（已经有一段时间了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T02:15:37.903

据我了解，由于我正在阅读有关 brokenthorn 的相同教程，因此`Imagename`如果它们相同，它将比较 的第一个字节与 fat 条目的第一个字节。

它将一直持续到第一个差异处的所有 11 个字符（文件名和扩展名）。如果它们相同，它将设置 ZF 标志，并且 ZF 标志将保持清零。

因此，在比较整个文件名之后，如果它们相同，它将跳转到加载该胖条目。如果不是，它将加载下一个条目并比较该文件名。

# vb.net - 列出 DirectoryEntry 孩子：为什么这么慢？

> ID：10552582
> 
> 赞同：2
> 
> 时间：2012-05-11T13:43:58.243
> 
> 标签：vb.net, performance, directoryservices

或者更确切地说：我能做些什么呢？

我的目标是使用 .NET 列出家庭网络中所有可访问的网络设备。最好不要深入研究 WIN32 API，也不要求助于一系列时髦的 WMI 查询。

以下代码正是这样做的：

```
 Imports System.DirectoryServices

    (...)

    Dim network As New DirectoryEntry()

    network.Path = "WinNT:"

    For Each workgroup As DirectoryEntry In network.Children()

        For Each computer As DirectoryEntry In workgroup.Children

            If computer.SchemaClassName = "Computer" Then
                Console.WriteLine(computer.Name)
            End If

        Next

    Next 
```

`Children`但是，如果您运行此代码，则在访问DirectoryEntry 实例上的 getter 时会遇到非常明显的延迟。即使我的网络只有一个工作组和三个连接的设备。我可以想象这个问题在更大的子网上会变得更糟。

再说一遍，为什么会这样，我能做些什么呢？

# sencha-touch - 如何访问模型内 的字段

> ID：10552587
> 
> 赞同：2
> 
> 时间：2012-05-11T13:44:06.153
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用 Sencha Touch 2 并定义了这样的模型：

```
Ext.define('csx.model.Profile', {
 extend: 'Ext.data.Model',

 config: {
    fields: [
        {name: 'firstname',type: 'string'},
        {name: 'lastname', type: 'string'},
    ],

    hasMany: [
        {model: 'Telephone', name: 'telephones'},
        {model: 'Email', name: 'emails'},
    ],
 },

 doSomething: function () {
    var firstname = this.get('firstname'); //returns null
    var phones = this.telephones(); // throws a TypeError
},

}); 
```

在我的函数`doSomething`中，我试图访问模型的值以及与`hasMany`属性关联的模型。该`get`函数只返回 null ，当我尝试访问关联的模型时，我只得到一个 TypeError ，说该对象没有电话功能。但是，当我查看有关如何使用模型的 Sencha Touch 2 指南[UsingModels](http://docs.sencha.com/touch/2-0/#!/guide/models)时，它说可以`hasMany`通过类似于我指定的名称（电话）的函数访问关联。

那么如何访问模型中的字段值和关联模型呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:33:24.690

您应该更改模型的“hasMany”配置中的模型属性以反映模型的全名：

```
hasMany: [
    {model: 'csx.model.Telephone', name: 'telephones'},
    {model: 'csx.model.Email', name: 'emails'},
], 
```

也就是说，假设您已经像这样定义了电话和电子邮件模型：

```
Ext.define('csx.model.Telephone', { 
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {name: 'number', type: 'string'},
        ],
 });

Ext.define('csx.model.Email', { 
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {name: 'address', type: 'string'},
        ],
 }); 
```

然后，如果您创建“个人资料”模型的实例：

```
var profile = Ext.create('csx.model.Profile', {firstname:'John',lastname:'Deere'}); 
```

您可以像这样访问您的字段：

```
profile.get('firstname');
profile.get('lastname'); 
```

以及来自 hasMany 关联的“电话”和“电子邮件”商店，如下所示：

```
profile.telephones()
profile.emails() 
```

您的“名字”字段具有空值的事实是因为您没有实例化您的模型。'telephones()' 函数未如文档中所述自动创建的事实是由于错误的'模型'配置，如本答案开头所述。

希望这可以帮助。

# cmd - 使用 cmd.exe 更改目录并在该目录中运行命令

> ID：10552589
> 
> 赞同：30
> 
> 时间：2012-05-11T13:44:12.407
> 
> 标签：cmd

我想做的就是：

1.  更改到不同驱动器的特定目录
2.  在该目录中运行命令，例如 dir

我需要使用从不同驱动器开始的 cmd.exe 在一行中执行此操作

我会这样做：

```
c:
cd temp
dir 
```

所以到目前为止，在一份声明中，我有：

```
cmd /c c: & cd\temp & dir 
```

但这只是为我提供了我开始的 P: 目录的目录。如何获取从 c:\temp 返回的目录？

我无法运行批处理文件，它必须在一行语句中。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-11T14:39:34.530

您可能希望使用 /d 选项调用 CD，因此不仅要更改驱动器 c: 上的当前目录，还要转到那里（以防您不在该驱动器上）。

```
 cmd /c "cd /d c:\temp && dir" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T14:00:25.750

您使用 && 或 & 分隔多个命令

如果 cmd 窗口已经打开并从命令行运行

```
 c: && cd\temp && dir 
```

或者

```
cmd /c && c: && cd\temp && dir 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T13:46:30.817

您需要在该命令行周围加上引号：

`cmd /c "cd c:/ & dir"`

# java - java socket服务器保持活动的实现

> ID：10552591
> 
> 赞同：0
> 
> 时间：2012-05-11T13:44:16.107
> 
> 标签：java, sockets, keep-alive

我尝试在php中构建一个socket服务器，但发现由于php缺乏多线程能力，如果服务器加载了连接（可以说即使是少量的300连接），服务器会很减缓。

我已经切换到 java，并构建了一个多线程套接字服务器，并试图在 10 秒内用 100 个连接重载它，我必须说它勇敢地接受了它。我自己的电脑（导致过载）在过程，但服务器看起来他很好。

因为我正在构建一个应该同时运行大量连接的服务器，所以我试图提高效率，而不是让任何幽灵连接打开。

在那里我正在实现一个“保持活动状态”方法，我的问题如下：如果我在我的服务器中打开了 600 个打开的连接，显然它需要服务器时间在所有线程之间运行以检查保持活动状态，甚至得到来自客户端的保持活动消息 - 检查是否发送保持活动消息的适当时间应该是什么时候。我想了大约 2 分钟 - 所以服务器要忙，另一方面我不希望我的客户经常发送数据..有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:54:57.780

600 个打开的连接。假设每 2 分钟 120 秒发送一次 keep-alive，这意味着每秒大约有 5 个线程准备好发送 keep-alive。假设所有的连接都建立起来，五个线程将在不久之后再次准备好处理来自对等方的回显。因此，大约需要运行 10 个线程/秒来支持保持活动。

这是一个微不足道的负载。

如果客户端很忙，那么这些客户端将不会被发送保持活动状态，因此当客户端变得有用忙碌时，保持活动状态的负载会下降。

你听起来应该没事。

# magento - Magento - 邮费取决于用户组/折扣

> ID：10552597
> 
> 赞同：0
> 
> 时间：2012-05-11T13:44:38.743
> 
> 标签：magento, e-commerce

希望这里的人能够提供帮助，我有一个 Magento 社区商店，批发订单有折扣，这些是客户通过批发帐户登录的超过一定价值的订单，批发帐户只是客户组批发的帐户.

我正在尝试仅为进行批发订单的客户更改邮资成本，但尚未设法找到合适的方法来使其发挥作用。

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:55:56.500

你应该使用一个扩展，[比如这个](http://www.magentocommerce.com/magento-connect/shipping-and-payment-by-customer-groups.html)。我不使用那个，但是我之前购买了 Amasty 的扩展。

事实上，感谢您提出这个问题，我们需要回顾一下他的一些最新作品，看看我们是否需要购买更多……：D

# asynchronous - Tornado 和异步请求处理

> ID：10552598
> 
> 赞同：5
> 
> 时间：2012-05-11T13:44:40.927
> 
> 标签：asynchronous, webserver, tornado

我的问题分为两部分：

1.  “异步服务器”到底是什么意思，通常人们称之为 Tornado？有人可以提供一个具体的例子来说明概念/定义吗？

2.  在 Tornado 的情况下，“非阻塞”到底是什么意思？这与上面的异步性质有关吗？另外，我在某处读到它总是使用单个线程来处理所有请求，这是否意味着请求是一个接一个地顺序处理还是并行处理？如果是后一种情况，Tornado 是如何做到的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T20:41:55.300

1.  Tornado 使用[异步、非阻塞 I/O](http://en.wikipedia.org/wiki/Asynchronous_I/O)来解决[C10K 问题](http://www.kegel.com/c10k.html)。这意味着所有 I/O 操作都是事件驱动的，也就是说，它们使用回调和事件通知，而不是等待操作返回。Node.js 和 Nginx 使用类似的模型。例外是`tornado.database`，它是阻塞的。如果您想详细了解[Tornado IOLoop 源代码，则有详细记录。](https://github.com/facebook/tornado/blob/master/tornado/ioloop.py)具体示例见下文。

2.  非阻塞和异步在 Tornado 中可以互换使用，尽管在其他情况下存在差异；[这个答案提供了一个很好的概述](https://stackoverflow.com/questions/2625493/asynchronous-vs-non-blocking)。Tornado 使用一个线程并按顺序处理请求，尽管速度非常快，因为没有等待 IO。在生产中，您通常会运行多个 Tornado 进程。

至于一个具体的例子，假设你有一个 HTTP 请求，Tornado 必须（异步）获取一些数据并响应，这里（非常粗略地）会发生什么：

1.  Tornado 接收请求并在您的应用程序中调用适当的处理程序方法
2.  您的处理程序方法使用回调进行异步数据库调用
3.  数据库调用返回，回调被调用，响应被发送。

Tornado（与 Django 相比）的不同之处在于，在第 2 步和第 3 步之间，该进程可以继续处理其他请求。Tornado IOLoop 只是保持连接打开并继续处理其回调队列，而对于 Django（和任何同步 Web 框架），线程将挂起，等待数据库返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:21:12.853

这是我对 web.py(cherrypy) 和 tornado 性能的测试。 [樱桃是如何工作的？与龙卷风相比，当并发性较低时，它可以很好地处理请求](https://stackoverflow.com/questions/13522495/how-is-cherrypy-working-it-handls-requests-well-compared-with-tornado-when-conc)

# android - OutOfMemoryError : 切换 2 个活动后位图大小超出 VM 预算

> ID：10552600
> 
> 赞同：0
> 
> 时间：2012-05-11T13:44:50.157
> 
> 标签：android, garbage-collection

现在我确定当我切换 2 个活动时，前一个活动将被垃圾收集。

我有一个显示一组图像的 GridView，这些图像在异步加载时效果很好。不知何故，即使在切换到许多活动之后，活动似乎仍然与上面的图像一起存在。

我的问题是如何强制对整个适配器进行垃圾收集或清理整个活动？

现在它可能与手机略有不同。我正在使用安卓调试器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:50:45.737

尝试构建缓存或按需调整大小，而不仅仅是膨胀位图。可以在这里找到一个很好的解释：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:00:44.843

对于可能遇到持久适配器的每个人

```
LayoutInflater li = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view= li.inflate(R.layout.view, parent, false); 
```

# matlab - 将矩阵中的每 n 行提取到循环中的另一个矩阵

> ID：10552608
> 
> 赞同：0
> 
> 时间：2012-05-11T13:45:17.337
> 
> 标签：matlab, loops, matrix, extract

我是 matlab 的初学者，目前正在编写一个脚本，用于从热成像视频中提取数据。

首先，视频被切割成单独的帧。第一帧作为样本图片打开，用于定义采样点的坐标。然后目标是从一组帧中选择那些定义坐标的 rgb 值并将它们保存到矩阵中。

现在我有一个问题，将矩阵分离为 n 个较小的矩阵。例如，我将要选择的点数定义为 n=2 ，图片计数为 31。现在它返回一个矩阵，说明 62x3 双矩阵中 31 张图片的 rgb 代码，每张图片有 2 个点...

现在我想将第 1、3、5 ......等行提取到一个新矩阵......这应该在一个循环中完成，根据 n 点的数量......例如每个 5 个点图片等于5个矩阵，包含31张图片的值......

**这是我分析图片的代码的摘录，它返回矩阵“值”**

```
files = dir('*.jpg');
num_files = numel(files);

images = cell(1, num_files);
cal=imread(files(1).name);

n = input('number of selection points?: ');

imshow(cal);

[x,y] = ginput(n);

eval(get(1,'CloseRequestFcn'))

%# x = input('x-value?: ');   manual x selection
%# y = input('y-value?: ');   manual y selection

for k = 1:num_files
    images{k} = imread(files(k).name); 
end

matrix=cell2mat(images);
count=(0:size(matrix,1):size(matrix,1)*num_files);

for k = 1:num_files
    a(k)= mat2cell(impixel(matrix,x+count(k),y));
end

values = cat(1,a{:}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:30:33.317

## 轻松修复

你的意思是如果你有：

```
n = 2;
k = 2; % for example
matrix = [1 2 3;
          4 5 6;
          7 8 9;
          8 7 6]; 
```

你想让它变成

```
b{1} = [1 2 3;
        7 8 9];
b{2} = [4 5 6;
        8 7 6]; 
```

这可以通过以下方式轻松完成：

```
 for ii = 1:n
     b{ii} = matrix(1:n:end,:);
 end 
```

## 更好的修复

当然，也可以只重塑您的数据矩阵并使用它而不是较小的矩阵：（继续我的示例数据^^）

```
>> d=reshape(matrix',3,2,[]);
>> squeeze(d(:,1,:))

ans =

     1     7
     2     8
     3     9
>> squeeze(d(:,2,:))

ans =

     4     8
     5     7
     6     6 
```

## 好习惯

或者，我的首选：以易于访问的方式立即保存数据。我认为这将是一个大小矩阵：[num_files x num_points x 3]

如果你想要所有的第一点：

```
rgb_data(:,1,:) 
```

只有那些点的红色通道：

```
rgb_data(:,1,1) 
```

等等。我认为这是可能的：

```
rgb_data = zeros(num_files, num_points, 3);
for kk = 1:num_files
    rgb_data(kk,:,:) = impixel(images{kk},x+count(k),y);
end 
```

但我不明白你的代码的完整含义（例如：为什么`matrix=cell2mat(images)`??? 然后当然：

```
count=(0:size(matrix,1):size(matrix,1)*num_files); 
```

就是`count=0:num_files;` 这样我不确定会产生什么结果`impixel(matrix,x+count(k),y)`，我使用了 images{k} :)

# java - @XmlTransient 用于序列化但不用于反序列化？

> ID：10552609
> 
> 赞同：3
> 
> 时间：2012-05-11T13:45:19.407
> 
> 标签：java, rest, jaxb, persistence, jpa-2.0

有没有办法配置 @XmlTransient JPA2.0 注释，它只会在 Java-Object 序列化为 xml 时阻止 JAXB 机制，而不是在传入的 XML 转换为 java 对象时？

背景：我有一个讲 XML 的 REST api。有一个端点可以创建一个新的 Attachment 对象。正如我们所说的附件，这个类中有一个 byte[] 字段。在附件的进一步列表中，我不想提供每个附件的 byte[] 内容。

```
@Entity
@XmlRootElement
public class Attachment {

private String name;

private String mimeType;

private byte[] dataPart;

public String getName() {
    return name;
}

public void setName( String name ) {
    this.name = name;
}

public String getMimeType() {
    return mimeType;
}

public void setMimeType( String mimeType ) {
    this.mimeType = mimeType;
}

public byte[] getDataPart() {

    return dataPart.clone();
}

public void setDataPart( byte[] dataPart ) {
    this.dataPart = dataPart.clone();
}
} 
```

所以，当我用 XmlTransient 标记 getDataPart() 时，传入的 byte[] 的数据被忽略并设置为 null -> 它丢失了。有人知道如何指定 XmlTransient 的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:33:39.947

I have to answer the question myself =) I solved this by using a custom XmlAdapter that will tranlsate the binary data only in one direction. This is still a hack and we are not using this any more. Reasons below.

Here is the adapter:

```
public class DuplexBase64MarshallAdapter extends XmlAdapter<String, byte[]> {

        /**
         * running the adapter in half duplex mode means, the incoming data is marshaled but the
         * outgoing data not.
         */
        public static final boolean HALF_DUPLEX = false;

        /**
         * Running the adapter in full duplex means, the incoming and outgoing data is marshalled.
         */
        public static final boolean FULL_DUPLEX = true;

        private boolean isFullDuplexMode;

        public DuplexBase64MarshallAdapter() {
            this.isFullDuplexMode = HALF_DUPLEX;
        }

        /**
         * Constructor
         * 
         * @param fullDuplex
         *            use {@link #HALF_DUPLEX} or {@link #FULL_DUPLEX}
         */
        public DuplexBase64MarshallAdapter( boolean fullDuplex ) {
            this.isFullDuplexMode = fullDuplex;
        }

        @Override
        public byte[] unmarshal( String v ) throws Exception {
            return Base64.decode( v );
        }

        /**
         * Return always an empty string. We do not want to deliver binary content here.
         */
        @Override
        public String marshal( byte[] v ) throws Exception {
            if( isFullDuplexMode ) {
                return Base64.encodeBytes( v );
            }
            return "";
        }

    } 
```

The entity needs to be annotated with this adapter:

```
@Entity
@XmlRootElement
public class Attachment {

    private String name;

    private String mimeType;

    private byte[] dataPart;

    public String getName() {
        return name;
    }

    public void setName( String name ) {
        this.name = name;
    }

    public String getMimeType() {
        return mimeType;
    }

    public void setMimeType( String mimeType ) {
        this.mimeType = mimeType;
    }

    @XmlJavaTypeAdapter( DuplexBase64MarshallAdapter.class )
    public byte[] getDataPart() {

        return dataPart.clone();
    }

    public void setDataPart( byte[] dataPart ) {
        this.dataPart = dataPart.clone();
    }
} 
```

This solution works as exepcted. But there is a drawback: One of the intentions was to not let hibernate load the binary data while processing/loading attachment data. But thats not how it works. The binary data is loaded by hibernate in this case because it is send to the XMLAdapter but not translated into base64 :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:26:22.577

I think your question is not about "yes, serialise it, but don't deserialize it", but rather: transport the data client --> server, but not server --> client. You *do* want your server to deserialize the incoming `byte[]` data, right? You just don't want to (always?) sent it out when returning the entity.

If that is the case, you can simply set it to null before you send out the entity. In your REST resource, do something like this:

```
@PersistenceContext(unitName = "myPersistenceUnit")
privat EntityManager em;

@Path("/upload")
@POST
public Response storeAttachment(JAXBElement<Attachment> jaxbAttachment) {
  Attachment attachment = jaxbAttachment.getValue();

  // store it in the DB
  em.persist(attachment);

  // detach it, so that modifications are no longer reflected in the database
  em.detach(attachment);

  // modify your guts out, it'll only affect this instance
  attachment.setDataPart(null);   // <-- NPE if you don't get rid of .clone() in your entity

  URI newUri = ...
  return Response.created(newUri).entity(attachment).build();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:33:57.573

Just in case you *do* want to only serialize something, but never deserialize it, use `@XmlAccessorType(XmlAccessType.FIELD)` and only provide an `@XmlElement` annotated getter.

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Something {

  public Integer foo;

  public Integer getFoo() {
    return foo;
  }

  public void setFoo(Integer foo) {
    this.foo = foo;
  }

  @XmlElement
  public Integer getBar() {
    return 42;
  }
} 
```

(Assuming `foo` is set to 17), this will marshall into

```
<something>
  <foo>17</foo>
  <bar>42</bar>
</something> 
```

If you deserialize that (with the same class definition), `bar` will not be set by the unmarshaller (since it cannot find a setter).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-23T21:00:21.133

Hans, I had same problem. Your answer kind of put me in the right way. If the problem is only the serialization, this does the trick:

```
public class HalfDuplexXmlAdapter extends XmlAdapter<String, String> {

    @Override
    public String unmarshal(String value) throws Exception {
        return value;
    }

    @Override
    public String marshal(String value) throws Exception {
        //ignore marshall so you have half duplex
        return null;
    }

} 
```

and then use it this way:

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class User {

    String login;

    @XmlJavaTypeAdapter(HalfDuplexXmlAdapter.class)
    String password;

    // getters and setters
} 
```

So this way, password send from client to server is serialized and deserialized, but when User is sent from server to client password is not serialized and/or deserialized, and so not sent (null).

# facebook - as3 facebook api：需要 facebook.init 和 facebook.login

> ID：10552610
> 
> 赞同：1
> 
> 时间：2012-05-11T13:45:29.470
> 
> 标签：facebook, actionscript-3, flash, api

如果我的应用程序的 FacebookDesktop.init 成功，我似乎能够避免 FacebookDesktop.login 步骤。

这是一个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:41:48.970

如果我没记错的话，init 只是初始化 API，而 login 将用户登录到 Facebook 并授权应用程序。如果您已经登录 FB，但尚未授权该应用程序，则仍然需要登录。我认为标准过程是在初始化应用程序后使用[Facebook.getLoginStatus()](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)检查登录状态。

登录状态结果将为您提供`connected`（用户已登录并已授权您的应用程序）、`not_authorized`（用户已登录但尚未授权您的应用程序）和`unknown`（用户未登录）。

# java - Java小程序单击图像并执行某些操作

> ID：10552613
> 
> 赞同：0
> 
> 时间：2012-05-11T13:45:40.503
> 
> 标签：java, applet

我如何单击 java 小程序中的图像，然后它会做一些事情？

就像我喜欢的图像然后它会做一个 System.out.print 或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:55:08.780

您应该通过本教程了解如何使用 MouseAdapter 类。

[http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:57:00.220

首先扩展`applet`并`MouseListener`与您的班级一起：

```
public class MouseClickClass extends Applet implements MouseListener
{ 
```

然后添加这些方法并在其中做任何你喜欢的事情：

```
 public void mousePressed (MouseEvent me) {
   // Do something here
   repaint();
 }

 public void mouseReleased (MouseEvent me) {
   // Do something here
   repaint();
 } 

 public void mouseEntered (MouseEvent me) {
   // Do something here
   repaint();
 } 
```

# sql - 从搜索中排除与记录关联的记录

> ID：10552614
> 
> 赞同：0
> 
> 时间：2012-05-11T13:45:40.767
> 
> 标签：sql, ruby-on-rails, activerecord

我正在尝试编写一个 SQL 搜索，它允许返回任何带有特定值标记的记录，并排除任何具有其他标记的结果。

使用连接模型应用标签，如下所示：

```
class Customer < ActiveRecord::Base
  has_many :tag_assignments
  has_many :tags, :through => :tag_assignments
end

class Tag < ActiveRecord::Base
  has_many :tag_assignments
  has_many :customers, :through => :tag_assignments
end

class TagAssignment < ActiveRecord::Base
  belongs_to :customer
  belongs_to :tag
end 
```

我目前的查询是：

```
SELECT DISTINCT customers.* FROM customers LEFT OUTER JOIN tag_assignments ON tag_assignments.customer_id = customers.id WHERE (tag_assignments.tag_id NOT IN (?)) 
```

这 ？然后在查询中被我不想包含的标签列表替换。

当客户只应用了一个标签时，这很好用，但是一旦他们获得多个标签，尽管被排除在外，他​​们也会显示出来，因为他们的其他标签之一确实匹配。

需要记住的是，当添加附加子句（例如要求存在其他标签或匹配其他客户属性）时，这需要继续工作，但任何正确方向的点都会受到赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:02:56.153

我对此感到生疏......但你需要先用标签得到所有东西，然后否定..

```
SELECT DISTINCT customers.*
FROM customers
OUTER JOIN (
SELECT DISTINCT customers.id
FROM customers
INNER JOIN tag_assignments ON tag_assignments.customer_id = customers.id
WHERE tag_assignments.tag_id IN (?)
) AS neg_customers ON (neg_customers.id = customers.id)
WHERE neg_customers.id IS NULL; 
```

# php - 在php中使用preg_replace删除多行

> ID：10552615
> 
> 赞同：0
> 
> 时间：2012-05-11T13:45:44.937
> 
> 标签：php, regex, pcre

尽管正则表达式似乎是一个经常出现的问题，但我没有找到解决问题的方法。

我有一个多行文件（> 75 000），我想在其中替换很多行，都在两个可识别的模式（起点和终点）之间。我的正则表达式尝试：

```
$filtered = preg_replace('%(#\sstarting_point).+(#\sending_point)%isU',$replacement,$2befiltered); 
```

. 现在是任何字符，包括 \n。我使用 %..% 作为分隔符，因为我的行几乎包含任何内容，但没有 %（任何内容包括 /、$、-、、、空格、+、{、}）并且我遇到了“编译失败：无需重复在偏移量...”。

但我似乎无法让它工作。我认为php.ini中的pcre可能是问题所在，但似乎并非如此。我尝试使用[?U](http://www.php.net/manual/fr/reference.pcre.pattern.modifiers.php)，但没有成功。与 .* 一样吗？正如我在某些地方所读到的。也许我只是写错了，但是..

无论如何，有人愿意为此挠头吗？

文本示例（其中 ... 表示许多其他行）：

```
whatever
lines
you
can
...
# starting_point
lines/*-
to$_,"
delete+{}=@
...
# ending_point
some
other
lines
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:26:59.720

这似乎有效：`%(#\sstarting_point)(.*?)(#\sending_point)%isU`

$matches [2] [0] 包含 #starting_point 和 #ending_point 之间的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:40:00.473

```
$filtered = preg_replace('/(#\sstarting_point)(.*?)(#\sending_point)/sm', $replacement,$2befiltered); 
```

尝试这个。

# jquery - Jquery 基本表单验证

> ID：10552616
> 
> 赞同：0
> 
> 时间：2012-05-11T13:45:51.253
> 
> 标签：jquery, validation

我正在尝试创建自己的基本表单验证，而不必求助于繁重的、千篇一律的插件，并且我编写了以下代码。无论我多久重写一次并重新开始，我似乎都无法让它工作。

这个想法是脚本检查表单以查看是否所有字段都已完成，如果已完成，它会从提交按钮中删除 disabled 属性。

功能：-

```
function checkForm(){
$('#contact :input').each(function(){
  if($(this).attr('value') == null){
     var checked = false; 
    } else {
     var checked = true;
    }
})
if (checked == true){
   alert('all filled in');
   //remove disabled attribute from button  
} else {
    alert('not completed');
    //add disabled attribute to button
}

} 
```

以及调用该函数的代码：-

```
$('#contact :input').blur(function(){
     if ($(this).val() <= ''){
        $(this).next('.error').show();
    } else {
        $(this).next('.error').hide();
        checkForm();
    }
}) 
```

我整天都在搞这个，并且正在努力通过谷歌找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:59:38.013

由于您在 .each() 的匿名函数中创建了“已检查”变量，因此已检查变量在该函数之外无法用于您的 if(checked == true) 测试（您会得到“已检查未定义”错误），这就是您的警报没有触发的原因。

尝试首先在匿名函数之外定义“检查”变量，然后相应地更新它。

```
function checkForm() {

    var checked = true;

    $('#contact :input').each(function () {
        if ($(this).val() == '') {
            checked = false;
        }
    })

    if (checked == true) {
        alert('all filled in');
        //remove disabled attribute from button  
    } else {
        alert('not completed');
        //add disabled attribute to button
    }

}

$('#contact :input').blur(function () {
    if ($(this).val() == '') {
        $(this).next('.error').show();
    } else {
        $(this).next('.error').hide();
        checkForm();
    }
}) 
```

这是一个 jsFiddle 示例。[http://jsfiddle.net/DMLzK/1/](http://jsfiddle.net/DMLzK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:07:28.233

```
function checkForm(){
  var checked = true;
  $('#contact :input').each(function(){
    if(!$.trim($(this).val()).length) checked = false;
  })
  if (checked){
   alert('all filled in');
   //remove disabled attribute from button  
  } else {
    alert('not completed');
    //add disabled attribute to button
  }
} 
```

并调用函数

```
$('#contact :input').on('blur', function(){
     if (!$.trim($(this).val()).length){
        $(this).next('.error').show();
    } else {
        $(this).next('.error').hide();
        checkForm();
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:49:30.553

您可以为此使用 jquery.validate() 函数，其参考 URL 为：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:51:06.373

更正：

```
function checkForm(){
$('#contact :input').each(function(){
 if($(this).val() == ''){
    var checked = false; 
  } else {
 var checked = true;
}
})
if (checked == true){
 alert('all filled in');
 //remove disabled attribute from button  
 } else {
alert('not completed');
//add disabled attribute to button
 }

} 
```

和

```
$('#contact :input').blur(function(){
 if ($(this).val() == ''){
    $(this).next('.error').show();
} else {
    $(this).next('.error').hide();
    checkForm();
}
}) 
```

# mongodb - symfony2 / MongoDB 中的嵌入式文档

> ID：10552619
> 
> 赞同：0
> 
> 时间：2012-05-11T13:45:58.360
> 
> 标签：mongodb, symfony, doctrine-orm

我知道如何使用**symfony2**`Product`在**mongodb**中存储一个简单的对象：

 **此 YAML 文件：

```
Acme\StoreBundle\Document\Product:
    fields:
        id:
            id:  true
        name:
            type: string
        price:
            type: float 
```

将产生这个集合：

```
{ 
"_id" : ObjectId("..."), 
"name" : "...", 
"price" : "..." 
} 
```

但是现在，我想知道如何编写生成这样的结构的东西：

```
{ 
"_id" : ObjectId("..."), 
"name" : "...", 
"price" : 
   { 
     "before" : "...", 
     "after" : "..." 
   }
} 
```

任何想法或文档链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:42:55.870

您可以使用嵌入文档。[http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/tutorials/getting-started.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/tutorials/getting-started.html)

```
Acme\StoreBundle\文档\产品：
    领域：
        ID：
            身份证：真
        姓名：
            类型：字符串
        参考一：
            价格：
               目标文档：Acme\StoreBundle\Documents\price
               级联：全部

Acme\StoreBundle\Documents\price:
    领域：
        前：
            类型：浮动
        后：
            类型：浮动

```**

# android - 使用 ADK 收集数据

> ID：10552620
> 
> 赞同：0
> 
> 时间：2012-05-11T13:45:59.507
> 
> 标签：android, android-sensors, adk

我需要以 30hz 采样 6 个加速度计。

我想在我的安卓手机上记录数据。所以我正在考虑为此使用 ADK 和 arduino Mega ADK 板。

我的问题是从arduino板到android的带宽是否足够大？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:01:59.960

是的，arduino 的带宽会足够大

# mongodb - mongodb：从 json 查询中的 ObjectID 中提取时间戳

> ID：10552621
> 
> 赞同：6
> 
> 时间：2012-05-11T13:46:03.983
> 
> 标签：mongodb, timestamp, unix-timestamp, mongoexport

我想使用 json 查询从我的 ObjectID 中提取时间戳，因为我想使用 mongodump 但只在某些日期之间转储数据。我不想把我的时间戳放在 ObjectID 以外的地方，因为我需要数据库尽可能小。

**有没有办法使用 mongodump 接受的简单 json 查询从 ObjectID 中提取时间戳？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T16:21:51.673

你可以很简单地做到这一点，在文档页面[Mongo Extended JSON](http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON)（隐藏得很好）你可以找到一个描述如何在 JSON 中表示 mongo 扩展数据类型的表。您可能知道，前 4 个字节`ObjectId`表示时间戳，这直接映射到十六进制字符串中的前 8 个字符。因此，以下应该有效：

```
jhonkola@ubuntu:~$ mongoexport -d so_test -c example -q '{"_id" : {"$gt" : {"$oid" : "4fad36290000000000000000"}}}'
connected to: 127.0.0.1
{ "_id" : { "$oid" : "4fad3629a8bbba98829d5c1e" }, "a" : "bar", "b" : 2 }
{ "_id" : { "$oid" : "4fad362ea8bbba98829d5c1f" }, "a" : "baz", "b" : 3 }
{ "_id" : { "$oid" : "4fad3635a8bbba98829d5c20" }, "a" : "buzz", "b" : 4 }
{ "_id" : { "$oid" : "4fad363ca8bbba98829d5c21" }, "a" : "fizz", "b" : 5 }
exported 4 records
jhonkola@ubuntu:~$ 
```

以下是示例中使用的所有命令以供参考。

```
> use so_test
switched to db so_test
> db.example.insert({a: "foo", b: 1})
> db.example.insert({a: "bar", b: 2})
> db.example.insert({a: "baz", b: 3})
> db.example.insert({a: "buzz", b: 4})
> db.example.insert({a: "fizz", b: 5})
> db.example.find()
{ "_id" : ObjectId("4fad3620a8bbba98829d5c1d"), "a" : "foo", "b" : 1 }
{ "_id" : ObjectId("4fad3629a8bbba98829d5c1e"), "a" : "bar", "b" : 2 }
{ "_id" : ObjectId("4fad362ea8bbba98829d5c1f"), "a" : "baz", "b" : 3 }
{ "_id" : ObjectId("4fad3635a8bbba98829d5c20"), "a" : "buzz", "b" : 4 }
{ "_id" : ObjectId("4fad363ca8bbba98829d5c21"), "a" : "fizz", "b" : 5 }
> db.example.find({_id : {$gt : ObjectId("4fad362e0000000000000000")}})
{ "_id" : ObjectId("4fad362ea8bbba98829d5c1f"), "a" : "baz", "b" : 3 }
{ "_id" : ObjectId("4fad3635a8bbba98829d5c20"), "a" : "buzz", "b" : 4 }
{ "_id" : ObjectId("4fad363ca8bbba98829d5c21"), "a" : "fizz", "b" : 5 }
> 
bye

jhonkola@ubuntu:~$ mongodump -d so_test -c example -q '{"_id" : {"$gt" : {"$oid" : "4fad36290000000000000000"}}}'
connected to: 127.0.0.1
DATABASE: so_test    to     dump/so_test
    so_test.example to dump/so_test/example.bson
         4 objects

jhonkola@ubuntu:~$ mongoexport -d so_test -c example -q '{"_id" : {"$gt" : {"$oid" : "4fad36290000000000000000"}}}'
connected to: 127.0.0.1
{ "_id" : { "$oid" : "4fad3629a8bbba98829d5c1e" }, "a" : "bar", "b" : 2 }
{ "_id" : { "$oid" : "4fad362ea8bbba98829d5c1f" }, "a" : "baz", "b" : 3 }
{ "_id" : { "$oid" : "4fad3635a8bbba98829d5c20" }, "a" : "buzz", "b" : 4 }
{ "_id" : { "$oid" : "4fad363ca8bbba98829d5c21" }, "a" : "fizz", "b" : 5 }
exported 4 records 
```

# gcc - str 和 ldr 指令不使用相同的地址

> ID：10552622
> 
> 赞同：2
> 
> 时间：2012-05-11T13:46:06.037
> 
> 标签：gcc, assembly, arm, mmu

我有一个奇怪的问题，MMU 将内存转换为 str 而不是 ldr 指令。我正在为 arm7TDMI 使用 gcc（无优化）进行编译。

程序输入一个函数并在堆栈中存储 4 个参数（r0 到 r3）我有这些寄存器：

```
r0 = 0x1e10c8
r1 = 0x12adf0
r2 = 0x0
r3 = 0x2
r11 = 0x12ade4 
```

MMU 处于活动状态，并且 0x0 和 0x00FFFFFF 之间的所有内容在物理上位于 0xC0000000 和 0xC0FFFFFF 之间

电脑执行这 4 行汇编：

```
str r0, [r11, #-24]
str r1, [r11, #-28]
str r2, [r11, #-32]
strb r3, [r11, #-33] 
```

这是内存的范围，执行后数据存储在其中：

```
0xC012ADC0  02000000  ....
0xC012ADC4  00000000  ....
0xC012ADC8  0012ADF0  ð­..
0xC012ADCC  001E10C8  È... 
```

而这个内存范围是在FF

```
0x0012ADC0  FFFFFFFF  ÿÿÿÿ
0x0012ADC4  FFFFFFFF  ÿÿÿÿ
0x0012ADC8  FFFFFFFF  ÿÿÿÿ
0x0012ADCC  FFFFFFFF  ÿÿÿÿ 
```

我们看到，由于 MMU，数据物理存储在 0xC0000000 区域中。

因为我处于调试模式，所以我可以使用以下值手动更改此区域：

```
0x0012ADC0  F4F4F4F4  ôôôô
0x0012ADC4  3F3F3F3F  ????
0x0012ADC8  F2F2F2F2  òòòò
0x0012ADCC  1F1F1F1F  .... 
```

现在 2-3 组装执行后，我有这条组装线：

```
ldr r3, [r11, #-24] 
```

我执行这一行，我在 r3 中有这个值：

```
r3=0x1f1f1f1f 
```

（如果我不更改 0x0012ADC0 和 0x0012ADCC 之间的内存，我通常会得到 0xFFFFFFFF ...）

我真的不明白为什么 r3 不等于 0x1E10C8。这就像MMU在执行str命令时完成了它的工作，但是当执行ldr时，MMU没有翻译地址（0x0012ADCC而不是0xC012ADCC）。这里有一些我无法理解的东西。

以防万一，这里是所涉及的汇编指令的快照：

```
 kapiReceiveQueue:
000195fc:   push {r11, lr}
00019600:   add r11, sp, #4
00019604:   sub sp, sp, #32
00019608:   str r0, [r11, #-24]         <----- r0 stored physically at C012ADCC
0001960c:   str r1, [r11, #-28]
00019610:   str r2, [r11, #-32]
00019614:   strb r3, [r11, #-33]    ; 0x21
 693          switch (Option)
00019618:   ldrb r3, [r11, #-33]    ; 0x21
0001961c:   cmp r3, #2
00019620:   beq 0x1974c <kapiReceiveQueue+336>
...
0001974c:   ldr r3, [r11, #-24]         <------ r3 get the value of physical address 0x12ADCC
00019750:   ldr r2, [r3]
00019754:   sub r3, r11, #17
00019758:   mov r0, r2 
```

如果这与我的编译标志有任何关系，它们是：

```
arm-none-eabi-gcc  -march=armv4t -mcpu=arm7tdmi -dp  -DNG_COMP_GCC -c
-Wa,-adhlns="../../Base/Lib/Pa/Kapi.o.lst" -fmessage-length=0 -fno-zero-initialized-
in-bss -MMD -MP -MF"../../Base/Lib/Pa/Kapi.d" -MT"../../Base/Lib/Pa/Kapi.d" -fpic
-mlittle-endian -Wall -DNGHW_TOPMEM_ADDR=0x00800000 -DNG_CPU_ARM -DNG_CPU_ARMv4T 
-DNG_CODE_ARM -DNG_LITTLE_ENDIAN -DNG_DEBUG -DNG_RTOS -DNG_COMP_GCC -DNG_RTOS_UCOSII 
-DDHCP_CLIENT -g3 -gdwarf-2  ../../Base/Kernel/Alos/Ucos-II/Kapi.c -o"../../Base/Lib/Pa/Kapi.o" 
```

任何帮助将不胜感激！！

# servlets - 跨集群同步更新

> ID：10552623
> 
> 赞同：0
> 
> 时间：2012-05-11T13:46:07.493
> 
> 标签：servlets, websphere, cluster-computing

我有一个将版本标志维护为 ServletContext.setAttribute('flag', flagValue) 的 Web 应用程序

过滤器在其应用于 diff servlet 的 doFilter 方法中使用此 flagValue。

有一个通知服务可以切换“标志”的值。

现在我需要在集群环境中部署这个应用程序。鉴于 ServletContext 是每个 JVM 的事实，我如何将在通知 url 上收到的更新传播到集群中的多个服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:37:25.507

最终通知单个 AppServer url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:17:35.373

您可以使用 Dynacaches DistributedMap 在集群中共享值，然后其他服务器只需要在受到影响时检查更改。

# knockout.js - 使用淘汰赛验证插件的本机规则设置自定义错误消息

> ID：10552625
> 
> 赞同：21
> 
> 时间：2012-05-11T13:46:09.663
> 
> 标签：knockout.js, customization, knockout-validation

我正在使用 Asp.net MVC3 和 knockoutjs 库。我需要做一些客户端验证。我正在探索淘汰赛验证插件。

所以我在我的 js 代码中声明了以下 ko.observable 值：

```
 var numberValue = ko.observable().extend({ number: true }) 
```

这是我的观点部分：

```
<input data-bind = "value: numberValue " /> 
```

当用户输入一些不是数字的值时，会显示错误消息：“请输入数字”。我可以显示不同的错误消息但仍使用本机规则吗？我不想为此编写自定义验证逻辑。对于一些工作示例的任何帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-11T15:18:45.123

这是创建验证扩展程序的代码。

```
addExtender: function (ruleName) {
    ko.extenders[ruleName] = function (observable, params) {
        //params can come in a few flavors
        // 1\. Just the params to be passed to the validator
        // 2\. An object containing the Message to be used and the Params to pass to the validator
        //
        // Example:
        // var test = ko.observable(3).extend({
        //      max: {
        //          message: 'This special field has a Max of {0}',
        //          params: 2
        //      }
        //  )};
        //
        if (params.message) { //if it has a message object, then its an object literal to use
            return ko.validation.addRule(observable, {
                rule: ruleName,
                message: params.message,
                params: params.params || true
            });
        } else {
            return ko.validation.addRule(observable, {
                rule: ruleName,
                params: params
            });
        }
    };
}, 
```

如您所见，所有扩展程序都可以接收参数对象或带有参数和自定义消息的对象文字。所以在你的情况下。

```
var numberValue = ko.observable().extend({ number: { 
    message: "some custom message", 
    params: true 
} }) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-09-07T20:23:53.500

你可以像这样添加验证属性

```
 emailAddress: ko.observable().extend({  // custom message
        required: { message: 'Please supply your email address.' }
    }), 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-06T08:33:53.257

现有答案是正确的。但是，如果要更改已接受其他参数的验证器的消息，则必须将这些现有参数包装在名为`params`.

```
ko.observable().extend({
    unique: {
        params: {
            collection: foo,
            valueAccessor: function(item) {
                return item.bar();
            }
        },
        message: 'some custom message'
    }
} 
```

# mysql - MySQL 不会在 CentOS 5.5 和“ERROR 2002”中启动

> ID：10552628
> 
> 赞同：1
> 
> 时间：2012-05-11T13:46:19.140
> 
> 标签：mysql, selinux, mysql-error-2002

我想为我遇到的问题寻求帮助。安装 php-soap 后，我的 mysql 服务器突然停止。我不知道为什么它实际上停止了......

由于它已停止，我尝试通过键入以下行来启动它：

```
# /etc/init.d/mysqld start 
```

在此之后，我收到此消息：

```
MySQL Daemon failed to start.
Starting mysqld:                                           [FAILED] 
```

启动mysql似乎失败了。因为我尝试了很多次并且多次得到这个结果。我检查了mysqlog，这就是我得到的。

==== MYSQL 日志 ====

```
120511 21:34:43 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
120511 21:34:43 [ERROR] Error message file '/usr/share/mysql/english/errmsg.sys' had only 481 error messages,
but it should contain at least 641 error messages.
Check that the above file is the right version for this program!
/usr/libexec/mysqld: Unknown error 1146
120511 21:34:43 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120511 21:34:43  InnoDB: Initializing buffer pool, size = 8.0M
120511 21:34:44  InnoDB: Completed initialization of buffer pool
120511 21:34:44  InnoDB: Operating system error number 13 in a file operation.
InnoDB: The error means mysqld does not have the access rights to
InnoDB: the directory.
InnoDB: File name ./ibdata1
InnoDB: File operation call: 'open'.
InnoDB: Cannot continue operation.
120511 21:34:44 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended 
```

**其他信息：**

**操作系统**：CentOS 5.5 64bit

**Mysql 版本：**抱歉，由于出现此错误，我无法在服务器上安装 mysql 版本：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2) 
```

有人可以帮我解决这个问题吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:06:04.527

看起来您的 mysql 安装没有损坏，因为 /usr/share/mysql/english/errmsg.sys 已被修改为包含少于所需条目数。

我会再次为您的 centos 机器获取 mysql 的安装/src 文件。解压并从 sql/share/english 中找到文件 errmsg.sys，将其复制到 /usr/share/mysql/english/errmsg.sys 并重新启动 mysqld。另一种选择是在备份您的数据库以确保它们不会被吹走并拥有它的副本/备份之后，从 centos repo 重新安装 mysql。

我还将找出对 errmsg.sys 文件进行更改的原因。

# arrays - 带有字符串数组迭代的 Groovy 测试用例

> ID：10552642
> 
> 赞同：2
> 
> 时间：2012-05-11T13:47:08.663
> 
> 标签：arrays, groovy

我有一个测试用例，我需要测试多个字符串，它们被初始化为 String[]

```
 myArray.each {
        shouldFail(IllegalArgumentException) {
            println "it = " + it
            testObj.testMyString("$prefix $it", mockBuilder);
         }
    } 
```

打印语句显示`"it"`为空。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:42:04.060

如果您命名每个 var，它应该可以工作：

```
myArray.each { element ->
    shouldFail(IllegalArgumentException) {
        println "it = $element"
        testObj.testMyString("$prefix $element", mockBuilder)
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:49:57.840

每个闭包都有自己的“它”。在您的情况下，当“it”为空时，它是`shouldFail`闭包的“it”而不是`myArray.each`闭包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:51:40.483

当我将代码更改为此时它起作用了

```
 myArray.each {
        def testStr = it
        shouldFail(IllegalArgumentException) {
            println "it = " + testStr
            testObj.testMyString("$prefix $testStr", mockBuilder);
         }
    } 
```

我猜“它”在内部封闭中不可用

# ruby - nokogiri 库中的 LoadError

> ID：10552643
> 
> 赞同：1
> 
> 时间：2012-05-11T13:47:11.010
> 
> 标签：ruby, nokogiri

我正在尝试加载一个使用 nokogiri 的 ruby​​ 脚本，但得到一个我不理解的 LoadError。

```
LoadError: dlopen(/Library/Ruby/Gems/1.8/gems/nokogiri-1.5.2/lib/nokogiri/nokogiri.bundle, 9): Library not loaded: /opt/local/lib/libiconv.2.dylib Referenced from: /Library/Ruby/Gems/1.8/gems/nokogiri-1.5.2/lib/nokogiri/nokogiri.bundle Reason: Incompatible library version: nokogiri.bundle requires version 8.0.0 or later, but libiconv.2.dylib provides version 7.0.0 - /Library/Ruby/Gems/1.8/gems/nokogiri-1.5.2/lib/nokogiri/nokogiri.bundle 
```

有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:13:21.580

似乎 Nokogiri 的要求之一没有安装在正确的版本中。

尝试运行

> sudo apt-get install libiconv-ruby

在运行脚本之前更新 libiconv 包（假设您使用的是 linux）。

# javascript - 用 CSS 覆盖光标

> ID：10552652
> 
> 赞同：2
> 
> 时间：2012-05-11T13:47:45.433
> 
> 标签：javascript, css, html, cursor

我有一个`overflow: hidden`div，我通过允许用户单击并拖动背景来滚动它。这个空间里也有链接和按钮。

这就是我为 CSS 所做的：

```
#div-grabscroll {    
    cursor: url(../img/openhand.cur), move;
}
#div-grabscroll:active {
   cursor: url(../img/closedhand.cur), n-resize;
} 
```

这很好用，但是在拖动时，如果鼠标最终在按钮上移动（由于达到滚动限制），则`pointer`光标会覆盖我的`closedhand`光标。

所需的行为是，在 div 由鼠标控制的整个持续时间内，我希望光标保持在`closedhand`.

有没有办法在不修改鼠标可能移动的*所有内容的 CSS 的情况下覆盖光标？*我尝试`!important`了这种`:active`风格，但没有做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:52:53.193

答案/问题：如果您有一个重复的 div，它位于抓取滚动 div 的顶部，但它没有任何类型的背景或内容以便不隐藏任何内容，然后将光标手设置在此，会发生什么情况。

z-index 会以这种方式覆盖重要性吗？

这有意义吗？

实际上，您具有按该分层顺序的抓取滚动 - 按钮 - 不透明抓取滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:57:24.523

这是一个与创建“模态”对话框非常相似的问题，它可能会有类似的解决方案：我认为你必须在`iframe`你正在滚动的内容上创建一个定位，使其在 z-index 中更高在滚动期间，顺序比内容。这是因为在 IE 上（至少）表单控件往往不能很好地遵守 z-index，这就是为什么“灯箱”风格的东西会做这个`iframe`shim 的原因。

[这是我](https://stackoverflow.com/a/4868514/157247)在 SO 上对另一个问题给出的答案，它演示了`iframe`shim 的基础知识。在这种情况下，它是出于模态目的，但该概念和大部分代码都将适用。

# asp.net - 想要为基于 ASP.Net 4 的解决方案运行我自己的具有特殊端口的服务器实例

> ID：10552654
> 
> 赞同：1
> 
> 时间：2012-05-11T13:48:05.957
> 
> 标签：asp.net, .net, visual-studio-2010, iis

我在 asp.net 中创建了一个发送和接收短信的应用程序，它的工作方式与桌面应用程序非常相似，它将安装在服务器上以发送短信警报，但问题是如果服务器没有 iis，它将无法工作。我见过很多应用程序在安装时都有自己的服务器和端口，你不需要安装任何 IIS，当你双击它就开始在一个特殊的端口上运行并且运行良好，同样 Visual Studio 也运行它自己的端口开发模式，那么为 asp.net 产品制作这种解决方案的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:50:53.657

如果您正在讨论如何在 IIS 之外的应用程序中托管服务，Windows Communication Foundation (WCF)，它允许您在 Windows 窗体可执行文件、控制台应用程序、Windows 服务或 IIS 中托管服务。

这是一个太大的主题，无法在这里充分解释，但这里有一个很好的[起点](http://msdn.microsoft.com/en-us/netframework/aa663324)。

这将允许您创建主机，并允许您连接***类似于***Web 服务的服务，但对于如何连接有更多选项。（http、tcp 等）

**但它不是 ASP.NET 主机**。为此，您将需要一个可以执行 ASP.NET 的 Web 服务器，例如 IIS。没有办法解决拥有 Web 服务器的需要，无论它是已经建立的众多服务器之一，还是您自己编写。我相信 Apache 有一些扩展允许您通过 Mono 这样做，但我从未使用过它们。在我看来，自己写会浪费时间，而且是个坏主意。

到目前为止，最简单的解决方案是指定使用适当框架安装的 IIS 是使用您的网站的要求。

**编辑**

但是，如果您真的想编写一个 WinForms 应用程序并让它托管 ASP.NET，那么[上一个问题](https://stackoverflow.com/questions/1365344/hosting-asp-net-within-my-application)的答案似乎会有所帮助。您可以使用与 Visual Studio 相同的 Cassini Web 服务器。

# c++ - 以下新的重载是否会泄漏内存？

> ID：10552656
> 
> 赞同：4
> 
> 时间：2012-05-11T13:48:19.097
> 
> 标签：c++, memory-management, operator-overloading, new-operator

我遇到了以下代码：

```
 class a {
    public:

        void *  operator new(size_t l, int nb);
        double  values;
    };
void *a::operator new (size_t l,int n)
{
    return new char[l+ (n>1 ? n - 1 : 0)*sizeof(double)];
} 
```

从我得到的结果来看，它被用来拥有一个从“值”开始的类似数组的结构：

```
double* Val = &(p->a->values) + fColumnNumber; 
```

我的问题是：是否存在内存泄漏？我对重载 new 运算符非常陌生，但我很确定分配的内存没有正确释放。这是否也意味着我永远不能在堆栈上创建一个“a”类？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:29:04.580

我相信它在技术上会按原样产生 UB，尽管它是一种可能永远不会引起可见副作用的 UB（它正在使用`new []`，但我相信会与之匹配`delete`——但是对于`char`，这通常不会导致一个明显的问题）。

IMO，它使用新表达式来分配真正应该是原始字节而不是对象的内容几乎更糟糕。如果我这样做，我会这样写：

```
void *a::operator new (size_t l,int n)
{
    return ::operator new(l+ (n>1 ? n - 1 : 0)*sizeof(double));
} 
```

您可以将其与：

```
void a::operator delete(void *block)
{
    ::operator delete(block);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:12:08.457

我不明白为什么`operator delete`在 an 上调用的默认值`a *`无法正确释放此 custom 分配的内存`operator new`。最好的检查方法是实际编写一些代码并找出答案，尽管我可能会在 valgrind 等分析器中运行它而不是 rob05c 的技术。我假设提问者看到发生了内存泄漏并怀疑这是原因，所以围绕这个运算符编写一个测试用例似乎是一项值得的努力。

显然，如果之后没有人真正删除它，它就会泄漏......

我会质疑覆盖`new`这种功能的必要性，但我也认为这是其他人的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:19:55.093

它很好，但你需要在使用这个类的代码中使用`delete[]`，而不是`delete`，因为它分配了一个数组。请注意，用户不会得到他们需要这样做的任何提示 - 因此为他们重载删除运算符将是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:05:03.447

1.  您绝对可以在堆栈上创建类“a”。
2.  您应该知道 4 个（实际上更多，但会坚持基础）新的和删除的方法签名。

    ```
    void* operator new (std::size_t size) throw (std::bad_alloc);
    void* operator new[] (std::size_t size) throw (std::bad_alloc);
    void operator delete (void* ptr) throw ();
    void operator delete[] (void* ptr) throw (); 
    ```

    您正在“operator new”方法中分配一个数组，这应该在“operator new[]”方法中完成。这将摆脱你讨厌的检查。写两个，“operator new”和“operator new[]”

3.  不要忘记你想给调用者一个“a”类型的对象（`a myA = new a`）所以确保你返回“a”而不是char*，因此你也需要进行强制转换。

4.  你需要编写相应的delete[]和delete方法。

5.  要回答您的问题，我相信它确实会泄漏内存。您提供的新签名称为“新位置”。这允许您在不分配内存的情况下分配新指针，而是给它一个指向的位置。示例：如果您需要指向内存中特定点的指针。

    ```
    long z = 0x0F9877F80078;
    a myA = new (z) a[5];  // 5 pointers that point to 0x0F9877F80078 
    ```

根据定义，placement-new 运算符不应该分配内存，因为你有你让你泄漏。摆脱你的第二个参数，你现在可以这样做，因为你有两个版本的 operator new 并且你很高兴。不要忘记返回一个对象“a”。

查看 IBM 的信息中心： http: [//publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp ?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr318.htm](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr318.htm)

以及参考资料，cpluplus.com： [http ://www.cplusplus.com/reference/std/new](http://www.cplusplus.com/reference/std/new)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T14:08:40.097

这很容易找到。编写一个构造和解构大量 a 的循环*，*并观察您的内存使用情况。如果它泄漏，它会很快上升。

# php - 如何在 mySQL 中触发总天数

> ID：10552663
> 
> 赞同：0
> 
> 时间：2012-05-11T13:48:40.613
> 
> 标签：php, mysql, date, input, triggers

“我需要创建一个字段来显示日期和现在之间的天数。

```
TABLE:  reg_add

+------------+---------+
| Name       | Type    |
+------------+---------+ 
| hm_date    | date    |
+------------+---------+ 
| total_days | date    |
+------------+---------+ 
```

我的客户将在“hm_date”中输入以下日期：2012 年 5 月 1 日。

我需要“total_days”来显示当前日期 2012 年 5 月 1 日之间的总天数。

我想在服务器端实现这一点，这对我来说有点新鲜。

我需要创建一个**触发器**以始终更新“total_days”

我从这个开始，我无法制作触发器并使其正确：

```
SELECT DATEDIFF(curdate(),hm_date) as total_days FROM reg_add 
```

任何帮助，将不胜感激。

埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:30:47.087

[您可以使用TIMESTAMPDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)函数非常轻松地即时计算它-

```
SELECT TIMESTAMPDIFF(DAY, hm_date, NOW()) FROM reg_add; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:05:15.387

我查看了 MySQL 触发器文档，从它的外观来看，您只能为事件类型 Insert、Update 和 Delete 创建触发器。因此，您的 Trigger 实际上不会按照您的需要更新您的 total_days 字段（应该是 int）。[听起来您希望它按时间更新您的字段（也就是每 x 小时更新一次）]。

这是文档：[http ://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

我建议在 php 中编写一个每天运行一次（或多次）的 cron 作业，它将为您更新该字段。

在您的 cron 中，您应该只需要运行一个 sql 语句：（这应该遍历整个表并更新每一行的 total_days 字段）

```
UPDATE reg_add SET total_days = DATEDIFF(curdate(),hm_date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:57:45.843

Erik，我使用的是 tsql，对 MySQL 不太熟悉，但在 tsql 中，该`DATEDIFF`函数需要 3 个参数。语法是

> `DATEDIFF(date part, date1, date2).`

我会尝试`DATEDIFF(d,GETDATE(),hm_date) AS total_days FROM reg_add`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:58:13.160

您可以使用视图代替触发器：

```
CREATE VIEW reg_add_with_total_days_VIEW
  AS
SELECT hm_date
     , DATEDIFF( CURDATE(), hm_date ) AS total_days
FROM reg_add ; 
```

然后，您可以在每次需要总天数时使用该视图 - 这将即时计算：

```
SELECT hm_date, total_days
FROM reg_add_with_total_days_VIEW 
```

您可以看到它在[SQL-Fiddle中工作](http://sqlfiddle.com/#!2/cc6b3/7)

# url - URL 各部分的名称和最大长度

> ID：10552665
> 
> 赞同：20
> 
> 时间：2012-05-11T13:48:43.913
> 
> 标签：url, subdomain

在这个网址中：

```
http://www.subdomain.domainname.abc.xyz.com.us/directory/filename.extension 
```

1.  每个部分的名称是什么？
2.  每个部分的最大长度是多少？例如子域、域名、顶级域……</li>

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-31T09:42:49.750

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-02T15:19:44.013

要回答问题 1：

一个简单的 URI 看起来像：

```
http://www.mywebsite.com 
```

从右到左更容易解释：

*   com 是顶级域 (TLD)
*   mywebsite 是域，但在描述时通常会包含 TLD，例如 mywebsite.com
*   www 是一个子域
*   http:// 是用于访问资源的协议

只是为了让事情变得更加混乱，许多顶级域实际上是 2 个域，例如 .co.uk

所以，另一个例子是：

```
https://aaa.bbb.ccc.mywebsite.co.uk 
```

*   co.uk 是顶级域名
*   mywebsite 是域
*   ccc 是一个子域
*   bbb 是一个子域，或者你可以说是 ccc.mywebsite.co.uk 的一个子域
*   aaa 是一个子子域，或者您可以说是 bbb.ccc.mywebsite.co.uk 的子域

TLD 之后但文件名之前的任何内容都称为路径，例如：

```
https://www.mywebsite.com/this/is/a/path/to/resource/filename.txt 
```

在上面的示例中，filename.txt 通常称为资源（尽管有些人会说整行都是资源，因为您并不总是有文件名）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-03-16T17:50:21.250

## TLDR - 名字

鉴于，根据[**RFC3986**](https://www.rfc-editor.org/rfc/rfc3986)`foo://example.com:8042/over/there?name=ferret#nose` （2005 年 1 月） ，您的组件可以分解如下...[](https://www.rfc-editor.org/rfc/rfc3986)

 **```
 foo://subdomain.example.com:8042/over/there?name=ferret#nose
     \_/  \________/                /\_________/ \_________/ \__/
      |       |                          |            |        |
          \___|_____________________/
   scheme   label       authority       path        query   fragment
   (AKA:                (AKA:
   protocol)            (domain) 
```

## TLDR - 最大长度

*   标签/子域：`63`最多字符数。
*   域：`253`最多字符
*   总网址：`2,000`最多字符

## 细节

现在，让我们分解一下给定 URL 的替代版本`http://www.subdomain.domainname.com/directory/filename.extension?name=ferret#nose`：

### 协议

*   `http://`: 方案或协议。
    *   最大长度：没有强加限制，但这些通常由 IETF 创建，因此最长的 RFC 方案将是最大值，我将其视为`prospero`字符`8`。 *然而！* 您可以制定自己的协议并使其具有任何合理的长度，尽管我可能不会超过`255`字符。例如，`file:/`在 Chrome 中会显示文件，`samba:/`在 Linux 中会启动 Samba 应用程序并访问资源等等。
    *   来源：[**RFC1738**](https://www.rfc-editor.org/rfc/rfc1738)（1994 年 12 月）
    *   引用：*“以下是特定协议的注释。涵盖的方案有：ftp、http、gopher、mailto、news、nntp、telnet、wais、file、prospero。”*

### 子域

*   `www`, `subdomain`:`www`只是一个流行的子域，今天是多余的。
    *   最大长度：`63`字符
    *   来源：[**RFC1035**](https://www.rfc-editor.org/rfc/rfc1035)（1987 年 11 月）
    *   引用：*“标签不得超过 63 个字符。”*

### 领域

*   `domainname.com`：您的“域”，不是它的任何级别，而是完整的域。
    *   最大长度：`253`如果您关心电子邮件，则为字符（ `to`SMTP 中字段的最大限制是`255`字符，让您`a@(253-char-domain)`在电子邮件中保留尽可能长的域；`255`如果您不介意电子邮件不起作用
    *   来源：[**RFC2821**](https://www.rfc-editor.org/rfc/rfc2821)（2008 年 10 月）、[**RFC5321**](https://www.rfc-editor.org/rfc/rfc5321)（2008 年 10 月）、[**RFC821**](https://www.rfc-editor.org/rfc/rfc821)（1982 年 8 月）
    *   引用：

> *域名或号码的最大总长度为 255 个字符。*（RFC2821、RFC5321）
> 
> *[电子邮件地址格式为]`<mailbox> ::= <local-part> "@" <domain>`* (RFC821)

### 二级域名

*   `domainname`: 你的二级域名。
    *   与子域相同的限制和来源。

### 顶级域

*   `com`: 您的顶级域 (TLD)。这也可能包含一个句点，例如`co.uk`.
    *   最大长度：这些是由 IETF 的 RFC 建立的。最大长度将是存在的最长 TLD。例如，[**RFC6927**](https://www.rfc-editor.org/rfc/rfc6927)`.XN--MGBERP4A5D4AR`为沙特阿拉伯保留了该域。
    *   来源：[**RFC920**](https://www.rfc-editor.org/rfc/rfc920)（1984 年 10 月）
    *   引用：*“最初的顶级域名是：ARPA、GOV、EDU、COM、MIL、ORG。”*

### 小路

*   `directory/filename.extension`: 这是你的路。
    *   Max Length: `Infinite`，***但在实践中，请坚持使用不超过`2,000`字符***的 URL ，因为并非所有浏览器都能理解无限的概念。
    *   来源：[**RFC3986**](https://www.rfc-editor.org/rfc/rfc3986)（2005 年 1 月）、[**RFC2616**](https://www.rfc-editor.org/rfc/rfc2616)（1999 年 6 月）、[**RFC7230**](https://www.rfc-editor.org/rfc/rfc7230#section-3.1.1)
    *   引用：

> *“服务器必须能够处理它们所服务的任何资源的 URI，并且应该能够处理无限长度的 URI……”*（RFC2616）；
> 
> *“本规范不限制资源的范围......”*（RFC3986）；
> 
> *“建议所有 HTTP 发送方和接收方至少支持 8000 个八位字节的请求行长度。” (RFC7230)

### 查询和分片

*   `name=ferret`: 这是一个`GET`参数，形式为`field=value`。
*   `#nose`：这是片段，可用于使用 HTML 锚定到 HTML 文档的特定部分`<a name="nose" />`。
    *   Max：如上面关于路径的部分所述，总路径、查询和片段不应超过`2,000`字符。
    *   来源：[**RFC3986**](https://www.rfc-editor.org/rfc/rfc3986)（2005 年 1 月）
    *   引用：

> `URI = scheme ":" hier-part [ "?" query ] [ "#" fragment ]`**

# php - 开发服务器不再挂起，实时服务器需要很长时间

> ID：10552668
> 
> 赞同：0
> 
> 时间：2012-05-11T13:49:03.830
> 
> 标签：php, mysql, sql, database

开发：i3-2100（4 核）3.1Ghz

直播：E3-1220（4核）3.1Ghz

其他一切都几乎相同 - 4gb ram，500gb sata hds（raid 1）..

在 Dev 上运行此查询时，查询的时间`show processlist;`不到 1 秒，但在 Live 上它将处理查询，然后移动到“复制到 tmp 表”并骑到 300（时间）并且几乎可以说超时.

**编辑：解释查询。注意 live 和 dev 上的代码和数据库是相同的。**

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  p   const   PRIMARY     PRIMARY     4   const   1   Using temporary; Using filesort
1   SIMPLE  pchu    ref     project_company_has_user_project_id     project_company_has_user_project_id     4   const   3958    Using where
1   SIMPLE  fqha    ref     form_question_has_answer_form_id,form_question_has...   form_question_has_answer_user_id    4   new_klarents.pchu.project_company_has_user_user_id  4   
1   SIMPLE  c   eq_ref  PRIMARY     PRIMARY     4   new_klarents.pchu.project_company_has_user_company...   1   
1   SIMPLE  u   eq_ref  PRIMARY     PRIMARY     4   new_klarents.pchu.project_company_has_user_user_id  1 
```

请询问更多信息，我会提供我能找到的。

我几乎得出结论，使用 ORDER BY 时需要 tmp 表。

有没有人能够看到为什么实时服务器会导致速度变慢？，当实时和开发都没有运行其他查询时，我已经运行了这些查询。

询问：

```
SELECT 
    pchu.project_company_has_user_id, 
    pchu.project_company_has_user_project_id, 
    pchu.project_company_has_user_user_id, 
    c.company_id, 
    c.company_hall_no, 
    c.company_type, 
    c.company_company_name, 
    c.company_stand_number, 
    c.company_locked, 
    c.company_country, 
    c.company_ready_for_page, 
    c.company_image_file_1, 
    u.user_id, 
    u.user_username, 
    p.project_id, 
    p.project_name, 
    fqha.form_question_has_answer_id, 
    fqha.form_question_has_answer_request 
FROM 
    project_company_has_user pchu
LEFT JOIN 
    company c 
    ON 
        pchu.project_company_has_user_company_id = c.company_id 
LEFT JOIN 
    user u 
    ON 
        pchu.project_company_has_user_user_id = u.user_id 
LEFT JOIN 
    project p 
    ON 
        pchu.project_company_has_user_project_id = p.project_id 
LEFT JOIN 
    form_question_has_answer f 
    ON 
        pchu.project_company_has_user_user_id = f.form_question_has_answer_user_id 
        AND 
            (f.form_question_has_answer_form_id = 174) 
WHERE 
    (p.project_id = 29 AND pchu.project_company_has_user_garbage_collection = 0) 
ORDER BY 
    company_company_name asc 
LIMIT 25 
```

# sencha-touch - 带煎茶触摸的图像场

> ID：10552671
> 
> 赞同：0
> 
> 时间：2012-05-11T13:49:11.297
> 
> 标签：sencha-touch, extjs4, extjs

我正在使用 sencha touch 制作 form.fieldset。在我的模型中，我有一个图像字段，我该如何显示模型的当前图像？我的 form.fieldset 看起来像：

```
/**
 * This is used by the NestedList example to allow editing of an item in the Store
 */
Ext.define('ParkingSencha.view.EditorPanel', {
    extend: 'Ext.form.Panel',
    requires: ['Ext.form.FieldSet'],
    id: 'editorPanel',
    config: {
        modal: true,
        hideOnMaskTap: false,
        centered: true,
        width: 500,
        scrollable: false,
        items: [{
            xtype: 'fieldset',
            items: [
            {
                xtype: 'textfield',
                name: 'keyword',
                label: 'Mots clés'
            },
            {
                xtype: 'textfield',
                name: 'title',
                label: 'Titre'
            },
            {
                xtype: 'textfield',
                name: 'image',
                label: 'image'
            }
            ]
          }]
        }]
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:09:29.367

要在a 中*使用/加载*，您需要使用组件，而不是.`image``formfield``image``textfield`

像这样做，

```
....
{
  xtype: 'image',
  src: 'http://www.sencha.com/assets/images/sencha-avatar-64x64.png',
  flex: 1
},
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:22:09.317

**还有另一种解决方案，使用标签并在 html 标签内设置图像 ....:) 像这样**

```
{
xtype:'label',
html:'<img src="path of image ">'
} 
```

或者boomslang ans非常正确，我建议您使用它..

# php - Joomla！扩展管理器：管理不会加载

> ID：10552675
> 
> 赞同：3
> 
> 时间：2012-05-11T13:49:32.453
> 
> 标签：php, joomla, joomla2.5

当我尝试加载扩展管理器的“管理”部分时，99% 的情况下，Joomla 都会死掉，给我这个错误：

```
Fatal error: Maximum execution time of 30 seconds exceeded in C:\xampp\htdocs\vanillajoomla\libraries\joomla\string\string.php on line 399 
```

这是导致它的行（它在将字符串与所考虑的语言环境进行比较的例程中）：

```
if (!$locale = setlocale(LC_COLLATE, $locale)) 
```

重装了好几次，还是不行。这是在带有 XAMPP 的 Windows 7 下本地安装的，用于测试我正在开发的模块。谷歌搜索错误没有显示任何内容，“php locale timeout”也是如此。

有谁知道这是什么原因造成的，我该如何修复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T15:34:30.650

我有同样的问题，现在我刚刚评论了这条线，它似乎快了大约 20 倍，没有发现任何问题；）

```
//if (!$locale = setlocale(LC_COLLATE, $locale))
{
 $locale = $locale0;
} 
```

我的 joomla 的另一个问题是加载任何东西都需要很长时间 - 前端或后端，它来自全新安装（！joomla 2.5）。这是 Apache 或 PHP 或 MySQL 的一些错误设置，只是无法准确找出问题所在。除了 joomla，我本地主机上的所有其他站点都运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:59:26.797

这是我的技巧。问题似乎出在我的模块上，但我不知道如何或为什么。尝试为我的模块查找语言环境时，Joomla 似乎死了。由于该函数有助于按语言环境对字符串进行排序，因此我只是`return strcmp($str1, $str2);`在函数的开头添加了该函数。它失去了语言环境功能，但现在可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-26T22:20:35.927

okey it is probably caused by some plugin or module.. but what is the worst, it is not enough to turn them off.. I installed 3 plugin for voting (to test which is the best of them), one of them caused this type of crash the manager.. I turned off them but it didnt help.. I use an advice above, and commented line 399, than suddenly it worked.. I uninstalled all of them, then uncommented line 399 and everything was allright..hope this can help somebody..

# asp.net - jSignature 画布 jquery 在 ASPX.NET 中显示

> ID：10552684
> 
> 赞同：2
> 
> 时间：2012-05-11T13:50:22.793
> 
> 标签：asp.net, html

我正在使用 JSignature 通过 html5/Jquery Mobile 捕获用户的签名。我有一个字母数字值的签名，然后存储在 SQL Server 2008 数据库中。

我需要在 ASP.NET 中显示签名，但现在确定如何将这些字母数字值转换为 ASP.NET 可以读取的内容。

```
 jSignature 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:15:32.740

您可以将嵌入式 img 显示用作：

`<img src="data:image/png;base64,iVBORw0KGgoAAAANSUh .... " >`

`base64,iVBORw0KGgoA...`您的签名数据在哪里。

# c# - 是否可以使用常见查询扩展实体模型？

> ID：10552686
> 
> 赞同：0
> 
> 时间：2012-05-11T13:50:28.790
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework-4

假设我有一组`Sites`集合`Users`。`User`每当我必须重新定义查询以获取给定的最后一次访问时，我发现自己违反了 DRY 原则`site`。

例如，我的查询可能如下所示：

```
from site in Context.Sites
where site.ID == 99
select new {
  ID = site.ID,
  Name = site.Name,
  URL = site.URL,
  LastVisitedUser = site.Users.OrderByDescending(u => u.LastVisited).Select(u => new {
      ID = u.ID,
      Username = u.Username,
      Email = u.EmailAddress
   })
   .FirstOrDefault()
} 
```

该查询返回我想要的内容，但我发现自己在多个地方重复了 LastVisitedUser 的相同选择，因为我正在以不同的方式选择站点来填充我的各种 ViewModel。

所以，我想我会简单地用这样的属性扩展我的 Site Entity 类：

```
public partial class Site {
  public LastVisitedUser {
    get {
      var query = from user in Users
                  where user.SiteID == this.ID
                  orderby user.LastVisited descending
                  select user;
      return query.FirstOrDefault()
    }
  }
} 
```

In this manner, whenever I am selecting a site it would be fairly trivial to grab this property. This *almost* works, however I am stuck trying to assign an Entity user into my UserViewModel property into the LastVisited property of my return, without an obvious way on how to project the `User` into my ViewModel version.

Perhaps an example would help explain. What I'm trying to accomplish would be something like this:

```
from site in Context.Sites
where site.ID == 99
select new SiteViewModel {
  ID = site.ID,
  Name = site.Name,
  URL = site.URL,
  LastVisitedUser = site.LastVisitedUser <--- NOTE    
} 
```

NOTE = This is my point of failure. `LastVisitedUser` is a ViewModel with a subset of `User` data.

Am I going about this in the correct manner? Can I achieve what I'm trying to do, or am I horribly misguided? Am I about to sove this issue and run into others?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:00:27.747

Edit: The former answer was not correct. You cannot use extension method on the navigation property but you can still create extension method for the whole `Site` projection.

Just create simple reusable extension method:

```
public static IQueryalbe<SiteModel> GetSiteModels(this IQueryable<Site> query)
{
    return query.Select(site => new SiteModel {
                     ID = site.ID,
                     Name = site.Name,
                     URL = site.URL,
                     LastVisitedUser = site.Users
                                           .OrderByDescending(u => u.LastVisited)
                                           .Select(u => new LastVisitedUser {
                                                ID = u.ID,
                                                Username = u.Username,
                                                Email = u.EmailAddress
                                            }});
} 
```

Now you should be able to use that extension in your former query:

```
Context.Sites.Where(site => site.ID == 99).GetSiteModels(); 
```

Your example will not work because your property is not visible for Linq-to-entities.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:02:26.357

If you mean that you what to reuse common queries with different extensions, you just nead to write some base query and get different results and some Where lambda expressions. If you profile it, you will see that you have just one query to DB just return IQuerable in a base query

# php - 插入数据时，Mysql会自动创建一个额外的行

> ID：10552689
> 
> 赞同：1
> 
> 时间：2012-05-11T13:50:30.013
> 
> 标签：php, mysql, codeigniter

我正在尝试使用 codeigniter 创建一个基于文章的网站。当请求从数据库中获取任何文章进行查看时，我使用以下代码将每篇文章的唯一视图数标记在一个名为“hits”的单独表中。

```
mysql_query("INSERT INTO hits(ip,article_slug,hitcount) 
                 VALUES('$ip_address','$id',1)
               ON DUPLICATE KEY UPDATE hitcount=hitcount+0"); 
```

我得到 article_slug 的价值来自`$this->uri->segment(3);`

现在上面的查询工作正常，但问题是，在数据库中它为每个独特的文章视图添加了一个额外的行，我不知道它来自哪里。桌子看起来像这样

表：命中

```
 ip                         article_slug                          hitcount
 127.0.0.1    valid.png //<<no idea where the valid.png comes from       1
 127.0.0.1    making-a-seo-friendly-url-for-a-cms                        1 
```

我在localhost上运行它。你能告诉我如何摆脱产生valid.png的额外行的创建吗

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:59:05.843

您请求的页面是否可能包含指向 'server.com/valid.png' 的图片链接？在这种情况下，如果它没有快捷方式的静态文件访问 (.htaccess)，它可能会像任何其他请求一样被您的前端控制器解释。可能点亮萤火虫并检查所有正在发送的 http 请求。

# ipad - 从 Ipad phonegap 应用程序在外部浏览器中打开网页

> ID：10552690
> 
> 赞同：3
> 
> 时间：2012-05-11T13:50:31.983
> 
> 标签：ipad, html, cordova

> **可能重复：**
> [phonegap：在 Safari 中打开外部链接而不是应用的 UIWebView](https://stackoverflow.com/questions/9746260/phonegap-open-an-external-link-in-safari-not-the-apps-uiwebview)

我为我的 Ipad 制作了一个 HTML5 应用程序。这是使用 phonegap 制作的。在我的应用程序中，我有一些指向网页的外部链接。但是，当我打开这些链接时，外部网页会在我的应用程序中打开，并且由于我的 Ipad 没有“后退按钮”，因此无法返回我的应用程序。即使我关闭应用程序，然后再次打开它，外部网页也会打开。

我试图用一个儿童浏览器来解决这个问题，但我遇到了同样的问题。这是我使用的代码：

```
openChildBrowser('http://en.wikipedia.org/wiki/Lapis_lazuli',{ showLocationBar: true });">text here</a> 
```

和：

```
<a onclick= "window.plugins.childBrowser.showWebPage('http://en.wikipedia.org/wiki/Lapis_lazuli',{showLocationBar: true});">text here</a> 
```

我当然尝试过常规的href。有人可以解决我的问题吗？谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T12:28:49.457

我有同样的问题。我通过像这样在 a-tag 中添加 target="_blank" 来解决它。

```
<a href="http://en.wikipedia.org/wiki/Lapis_lazuli" target="_blank">text here</a> 
```

希望这可以帮助。

# google-bigquery - 当您必须使用表名指定数据集时，我们应该如何在 bigquery 中运行连接？

> ID：10552691
> 
> 赞同：0
> 
> 时间：2012-05-11T13:50:38.693
> 
> 标签：google-bigquery

我无法运行如下查询：

```
SELECT table1.name FROM dataset1.table1 
```

我也不能跑

```
SELECT dataset1.table1.name FROM dataset1.table1 
```

所以我什至不能开始玩连接。当您必须使用表名指定数据集时，我们应该如何在 bigquery 中运行连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:46:05.917

你应该这样尝试：

```
SELECT table1.name1, table1.name2, table2.name1, table2.name2
FROM dataset.table1 as table1
JOIN dataset.table2 as table2
ON table1.name1 = table2.name1
WHERE table1.name1 = whatever 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T11:12:36.407

谢谢乔丹，那是我做错了。我已经习惯了 mySQL，其中选择可以正常工作，但在 BQ 中不起作用。一旦我写出整个连接，表名就被正确提取了。

# python - pyqt4 python QLabel在单击按钮时显示

> ID：10552696
> 
> 赞同：0
> 
> 时间：2012-05-11T13:50:48.143
> 
> 标签：python, pyqt4

我想要实现的是当用户按下按钮时，我想显示最初隐藏的 QLabel。但是，在那个按钮上，我分配了一个重型扫描，大约需要 2-3 分钟的驱动扫描。QLabel 仅在扫描完成后出现，我如何使它在单击按钮后出现，而不是在一切完成后出现。

代码

```
self.label_3.hide()
...
self.pushButton.clicked.connect(self._btn_cb)
...    
def _btn_cb(self):
    self.label_3.show() # here is the show code
    for filename in find_files("C://images//", '*.png'): # took roughly 2-3 minutes
        print filename 
```

我对python很陌生，谢谢你帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:21:19.607

你只需要添加一个调用

```
QApplication.instance().processEvents() 
```

就在你打电话`.show()`给你的标签之后。这将强制 Qt 在继续处理其余代码之前处理队列中的事件（显示标签）。

`QApplication`确保从代码开始处导入`QtGui`。

```
from PyQt4.QtGui import QApplication 
```

# sql - 删除多余的 SQL 价格成本记录

> ID：10552697
> 
> 赞同：1
> 
> 时间：2012-05-11T13:50:49.503
> 
> 标签：sql, group-by

我有一个包含字段 id、invid、vendorid、cost、timestamp、chdeleted 的表 costhistory。每次供应商更新他们的价格列表时，它似乎都会填充一个触发器。

它有多余的记录——因为无论自上次记录以来价格是否发生变化，它都会被填充。
例子：

```
id | invid | vendorid | cost | timestamp | chdeleted  
1 | 123 | 1 | 100 | 1/1/01 | 0  
2 | 123 | 1 | 100 | 1/2/01 | 0  
3 | 123 | 1 | 100 | 1/3/01 | 0  
4 | 123 | 1 | 500 | 1/4/01 | 0  
5 | 123 | 1 | 500 | 1/5/01 | 0  
6 | 123 | 1 | 100 | 1/6/01 | 0 
```

我想删除 ID 为 2、3、5 的记录，因为它们没有反映自上次价格更新以来的任何变化。

我确信它可以完成，尽管它可能需要几个步骤。需要明确的是，这个表已经膨胀到 100gb 并且包含 600M 行。我相信适当的清理将使该表的大小减少 90% - 95%。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:58:45.890

您采用的方法会因您使用的数据库而异。对于 SQL Server 2005+，以下查询应为您提供要删除的记录：

```
select id 
from (
    select id, Rank() over (Partition BY invid, vendorid, cost order by timestamp) as Rank
    from costhistory 
) tmp
where Rank > 1 
```

然后，您可以像这样删除它们：

```
delete from costhistory 
where id in (
    select id 
    from (
        select id, Rank() over (Partition BY invid, vendorid, cost order by timestamp) as Rank
        from costhistory 
    ) tmp
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:02:53.220

我建议您使用 group by 查询重新创建表。另外，我假设“id”列未在任何其他表中使用。如果是这种情况，那么您还需要修复这些表。

删除如此大量的记录可能需要很长时间。

查询如下所示：

```
insert into newversionoftable(invid, vendorid, cost, timestamp, chdeleted)
    select invid, vendorid, cost, timestamp, chdeleted
    from table
    group by invid, vendorid, cost, timestamp, chdeleted 
```

如果您确实选择删除，我建议：

（1）先修复代码，这样就不会重复了。 （2）确定重复的id，放在单独的表中。(3) 批量删除。

要查找重复的 id，请使用以下内容：

```
 select *
    from (select id,
                 row_number() over (partition by invid, vendorid, cost, timestamp, chdeleted order by timestamp) as seqnum
          from table
         ) t
    where seqnum > 1 
```

如果您想保留最新版本，请在 order by 子句中使用“timestamp desc”。

# android - 无法在 Android 中滚动 webview

> ID：10552702
> 
> 赞同：1
> 
> 时间：2012-05-11T13:51:11.137
> 
> 标签：android, webview

我的 WebView 遇到了一些奇怪的问题。问题是如果页面比屏幕长，我无法在 Android 2.2 和 2.3 中滚动页面。滚动 WebView 的唯一方法是在 Android 4.0.3 中。有什么问题，或者只是无法在低于 4.0.3 的 Android 版本中滚动 WebView？

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent" android:id="@+id/rltvLayout01"
    android:layout_height="fill_parent" android:background="@color/white">  
    <LinearLayout android:id="@+id/LinearLayout01"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/ad_layout">
            <WebView android:id="@+id/webview"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:fitsSystemWindows="true"
                android:scrollbars="none" />
    </LinearLayout>
    <LinearLayout android:id="@+id/ad_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true">
            <com.google.ads.AdView android:id="@+id/ad"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                ads:adUnitId="-------------"
                ads:loadAdOnCreate="true"
                ads:adSize="BANNER" />
    </LinearLayout>
</RelativeLayout> 
```

**编辑 23:06：**

我才发现问题！我使用的实际代码不会导致这种行为，而是加载的网站导致了问题。在我的移动网站中，我使用视口正确显示它，而 FroYo 和 Gingerbread 的 WebView 不能很好地处理它。因此，在删除视口元标记后，它可以完美运行！无论如何谢谢Thomas K，垂直方向在移除视口后也使其可滚动！

**因此，如果您想让您的 web 视图在 Froyo 和 Gingerbread 中工作，请摆脱 html 代码中的 viewport 标签！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:04:49.803

添加

```
android:orientation="vertical" 
```

或者

```
android:orientation="horizontal" 
```

到线性布局

# c# - 为什么 Powershell 无法识别 Add_Type 块内的 System.Data？

> ID：10552703
> 
> 赞同：4
> 
> 时间：2012-05-11T13:51:13.343
> 
> 标签：c#, powershell-2.0

我正在尝试编写一个 PS 脚本，该脚本将打开一个存储的过程，传递参数并执行该过程，然后将数据输出到 DataSet。这一切似乎都有效，但是当我尝试在 Add-Type 块内创建一个 .NET 对象时，我得到了错误：

> 命名空间“系统”中不存在类型或命名空间“数据”（您是否缺少程序集引用？）

这是代码：

```
Add-Type @'
using System.Data;
using System.Collections.Generic;

public class TestObject
{...}
'@ 
```

真正让我困惑的部分是我在代码的另一部分中创建了一个 DataSet，在 .NET 类之外，并且对 System.Data.DataSet 的引用工作正常。

非常感谢您对此的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:19:13.700

您需要将 System.Data 添加到`-ReferencedAssemblies`参数`Add-Type`

# javascript - Jquery 可排序插件不允许在拖动元素时启动悬停功能

> ID：10552705
> 
> 赞同：2
> 
> 时间：2012-05-11T13:51:19.020
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我有这个问题：当一个菜单元素（使用[可排序插件](http://jqueryui.com/demos/sortable/)）被拖动并悬停在另一个元素上时，应该启动一个函数。我看到，虽然可排序插件被初始化，但它忽略了代码中其他地方编写的悬停函数。

如何在拖动元素并将鼠标悬停在预期元素上时触发悬停功能？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:30:26.397

## 您将需要使用 sortable over 事件：

```
Supply a callback function to handle the over event as an init option.
$( ".selector" ).sortable({
   over: function(event, ui) { ... }
});
Bind to the over event by type: sortover.
$( ".selector" ).bind( "sortover", function(event, ui) {
  ...
});

$("#sortable").sortable({
        over: function(event, ui) {
         alert( 'The Sortable Over Event Just Fired!!' );
        }
        }); 
```

# javascript - jqGrid SetCell 和 SaveCell 在关闭模式对话框后将单元格消隐

> ID：10552706
> 
> 赞同：1
> 
> 时间：2012-05-11T13:51:21.820
> 
> 标签：javascript, jqgrid

我有一个单元格可编辑的 jqgrid，其列的编辑类型为“按钮”。单击单元格时，将出现按钮。单击按钮时，会出现一个模式对话框，允许用户从网格中选择一个值。这一切都很好。

当用户从网格中选择一个值后单击模式对话框上的“确定”按钮时，我想用用户选择的值设置单元格值并保存单元格。

不是设置和保存单元格值，而是空白单元格。不知道为什么。

这是相关的 jqGrid / modal 对话框代码：

```
// global variables
base.selectedCode = null;
base.liaGridSelectedId = null;
base.liaGridSelectedICol = null;
base.liaGridSelectedIRow = null;

    $("#liaGrid").jqGrid({
        datatype: "local",
        data: base.liaGridData,
        cellEdit: true,
        cellsubmit: 'clientArray',
        height: 140,
        colNames: ['ID', 'Class Code', 'State', 'Location Type'],
        colModel: [
                    { name: 'id', index: 'id', width: 90, sorttype: "int", editable: false, hidden: true },
                    { name: 'ClassCode', index: 'ClassCode', width: 90, sortable: false, editable: true, edittype: "button",
                        editoptions: {
                            dataEvents: [{
                                type: 'click',
                                fn: function (e) {
                                    e.preventDefault();
                                    var rowid = $('#liaGrid').jqGrid('getGridParam', 'selrow');
                                    base.liaGridSelectedId = parseInt(rowid);
                                    $('#class-dialog').dialog('option', { width: 100, height: 200, position: 'center', title: 'Pick a Class' });
                                    $('#class-dialog').dialog('open');

                                    return true;
                                }
                            }]
                        }
                    },
                    { name: 'LocationType', index: 'LocationType', width: 90, sortable: false, editable: true, edittype: "select", editoptions: { value: "0:;1:Rural;2:Suburban;3:Urban"} }
                ],
        caption: "Liability Model",
        beforeEditCell: function (rowid, cellname, value, iRow, iCol) {
            base.liaGridSelectedICol = iCol;
            base.liaGridSelectedIRow = iRow;
        }
    });

    var infoDialog = $('#class-dialog').dialog({
        autoOpen: false,
        modal: true,
        show: 'fade',
        hide: 'fade',
        resizable: true,
        buttons: {
            "Ok": function () {
                if (base.selectedCode != null) {

                    $("#liaGrid").jqGrid('setCell', base.liaGridSelectedId, 'ClassCode', base.selectedCode);

                    $("#liaGrid").jqGrid('saveCell', base.liaGridSelectedIRow, base.liaGridSelectedICol);

                    $(this).dialog("close");
                }
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }

    }); 
```

如上所示，我正在尝试使用 jqGrid('setCell') 和 jqGrid('saveCell') 来更新和保存单元格的内容。不知道为什么这没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:42:59.973

如果有人遇到类似问题，我可以让它工作。我必须将[afterSaveCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing)处理程序添加到网格中：

```
afterSaveCell: function (rowid, name, val, iRow, iCol) {
    if (base.liaGridSelectedICol == 1) {
        $("#liaGrid").jqGrid('setRowData', rowid, { ClassCode: base.selectedCode });
    }
} 
```

仅供参考 - base.selectedCode 在模态中设置。

奇怪的是，这只在调用 setCell 和 saveCell 方法后才有效。如果没有这些在单元级别设置和保存的不成功调用，则不会调用上述处理程序。

如果有人有更合适的方法来解决这个问题，我想听听。

谢谢

# android - 单击不在列表视图中的布局中的按钮时检索Android列表行数据

> ID：10552707
> 
> 赞同：1
> 
> 时间：2012-05-11T13:51:23.307
> 
> 标签：android, android-layout, android-widget

我有一个带有 ListView 的 LinearLayout 和一个带有垂直方向的按钮。我有包含“EditText”的列表项的列表视图。我在上面提到的布局中有一个按钮，它位于列表视图下方，不是列表视图的一部分。我在列表行中编辑了 EditText。当我单击 listView 外部的保存按钮时，我需要检索 EditText 的内容。我正在使用 CursorAdapter。有没有一种方法可以尝试检索在 Android ListView 的 EditText 中编辑的文本。谁能帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:53:54.707

尝试这个，

```
btnSave.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
         for (int i = 0; i <listview.getCount() ; i++) {
             View vListSortOrder;
                    vListSortOrder=listview.getChildAt(i);     
                    try{
                    EditText edit=(EditText)vListSortOrder.findViewById(R.id.share_comment_edit);
                   String temp=edit.getText().toString();

        }
      }
    }); 
```

您必须创建对您的列表视图的特定子项的引用，并且在 for 循环中您将能够引用它。然后进行保存。

# bash - 如何制作“如果不是真的条件”？

> ID：10552711
> 
> 赞同：402
> 
> 时间：2012-05-11T13:51:37.000
> 
> 标签：bash, if-statement, syntax, boolean-expression

我希望在不正确`echo`时执行命令。`cat /etc/passwd | grep "sysa"`

我究竟做错了什么？

```
if ! [ $(cat /etc/passwd | grep "sysa") ]; then
        echo "ERROR - The user sysa could not be looked up"
        exit 2
fi 
```

* * *

## 回答 #1

> 赞同：559
> 
> 时间：2012-05-11T13:54:59.420

尝试

```
if ! grep -q sysa /etc/passwd ; then 
```

`grep``true`如果找到搜索目标，则返回，否则返回`false`。

所以不是`false`== `true`。

`if`shell 中的评估被设计为非常灵活，并且很多时候不需要命令链（如您所写）。

此外，按原样查看您的代码，您`$( ... )`对 cmd-substitution 形式的使用值得称赞，但请考虑该过程的结果。试着`echo $(cat /etc/passwd | grep "sysa")`看看我的意思。您可以通过使用`-c`grep 的 (count) 选项来进一步实现这一点，然后执行`if ! [ $(grep -c "sysa" /etc/passwd) -eq 0 ] ; then`该操作，但这是相当老派的。

但是，您可以使用最新的 shell 功能（算术评估），例如

```
if ! (( $(grep -c "sysa" /etc/passwd) == 0 )) ; then ...` 
```

这也为您提供了使用基于 c-lang 的比较运算符的好处，`==,<,>,>=,<=,%`也许还有其他一些。

在这种情况下，根据 Orwellophile 的评论，算术评估可以进一步缩减，例如

```
if ! (( $(grep -c "sysa" /etc/passwd) )) ; then .... 
```

或者

```
if (( ! $(grep -c "sysa" /etc/passwd) )) ; then .... 
```

最后，还有一个*奖项*，叫做`Useless Use of Cat (UUOC)`. :-) 有些人会跳上跳下哭哥特卡！我只是说它`grep`可以在它的命令行上取一个文件名，那么为什么在你不需要的时候调用额外的进程和管道构造呢？;-)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-05-13T15:05:26.347

我认为可以简化为：

```
grep sysa /etc/passwd || {
    echo "ERROR - The user sysa could not be looked up"
    exit 2
} 
```

或在单个命令行中

`$ grep sysa /etc/passwd || { echo "ERROR - The user sysa could not be looked up"; exit 2; }`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2020-09-17T02:46:38.373

这个

```
if [[ !  $(cat /etc/passwd | grep "sysa") ]]
Then echo " something"
exit 2
fi 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-09-02T18:38:16.767

> What am I doing wrong?

`$(...)` holds the **value**, not the exit status, that is why this approach is wrong. However, in this specific case, it does indeed work because `sysa` will be printed which makes the test statement come true. However, `if ! [ $(true) ]; then echo false; fi` would always print `false` because the `true` command does not write anything to stdout (even though the exit code is 0). That is why it needs to be rephrased to `if ! grep ...; then`.

An alternative would be `cat /etc/passwd | grep "sysa" || echo error`. Edit: As Alex pointed out, [cat is useless here](https://stackoverflow.com/questions/11710552/useless-use-of-cat): `grep "sysa" /etc/passwd || echo error`.

Found the other answers rather confusing, hope this helps someone.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-08T16:07:29.367

**这是一个示例的答案：**

为了确保数据记录器在线`cron`，每 15 分钟运行一次脚本，如下所示：

```
#!/bin/bash
#
if ! ping -c 1 SOLAR &>/dev/null
then
  echo "SUBJECT:  SOLAR is not responding to ping" | ssmtp abc@def.com
  echo "SOLAR is not responding to ping" | ssmtp 4151112222@txt.att.com
else
  echo "SOLAR is up"
fi
#
if ! ping -c 1 OUTSIDE &>/dev/null
then
  echo "SUBJECT:  OUTSIDE is not responding to ping" | ssmtp abc@def.com
  echo "OUTSIDE is not responding to ping" | ssmtp 4151112222@txt.att.com
else
  echo "OUTSIDE is up"
fi
# 
```

...依此类推，您可以在[http://www.SDsolarBlog.com/montage的蒙太奇中看到每个数据记录器](http://www.SDsolarBlog.com/montage)

* * *

仅供参考，使用`&>/dev/null`将命令的所有输出（包括错误）重定向到`/dev/null`

（条件只需要命令`exit status`的）`ping`

另外仅供参考，请注意，由于`cron`作业运行`root`时不需要`sudo ping`在`cron`脚本中使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-02T18:46:13.160

在支持它的 Unix 系统上（似乎不是 macOS）：

```
if getent passwd "$username" >/dev/null; then
    printf 'User %s exists\n' "$username"
else
    printf 'User %s does not exist\n' "$username"
fi 
```

这样做的好处是它将查询可能正在使用的任何目录服务（YP/NIS 或 LDAP 等）和本地密码数据库文件。

* * *

问题`grep -q "$username" /etc/passwd`在于，当没有这样的用户时，它会给出误报，但其他东西与该模式匹配。如果文件中的其他地方存在部分匹配或完全匹配，则可能会发生这种情况。

例如，在我的`passwd`文件中，有一行说

```
build:*:21:21:base and xenocara build:/var/empty:/bin/ksh 
```

即使我的系统上没有这样的用户，这也会引发对诸如此类的事情的有效匹配`cara`。`enoc`

为了使`grep`解决方案正确，您需要正确解析`/etc/passwd`文件：

```
if cut -d ':' -f 1 /etc/passwd | grep -qxF "$username"; then
    # found
else
    # not found
fi 
```

...或针对第一个`:`-delimited 字段的任何其他类似测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-01T13:23:24.617

simply:

```
if ! examplecommand arg1 arg2 ...; then
    #code block
fi 
```

without any brackets.

# c# - 在 C# 中获取属性名称

> ID：10552712
> 
> 赞同：1
> 
> 时间：2012-05-11T13:51:37.363
> 
> 标签：c#

我有一个验证类，在此我想验证从 Web 服务接收到的各种属性是否有效，如果不是，则报告描述性错误消息。

目前，网络服务返回所有字符串，我想将这些转换/验证为更有用的类型。问题是我目前在方法调用中将属性名称作为字符串参数传递。有没有办法在不将其作为字符串传递的情况下获取要在错误消息中显示的属性名称？

```
public class WebserviceAccess
{
    public MyUsefulDataObject ConvertToUsefulDataObject(WebserviceResponse webserviceResponse)
    {
        var usefulData = new MyUsefulDataObject();

        usefulData.LastUpdated = webserviceResponse.LastUpdated.IsValidDateTime("LastUpdated");
        // etc . . .
        // But I don't want to have to pass "LastUpdated" through.
        // I'd like IsValidDateTime to work out the name of the property when required (in the error message).

        return usefulData ;
    }
}

public static class WebServiceValidator
{
    public static DateTime IsValidDateTime(this string propertyValue, string propertyName)
    {
        DateTime convertedDate;

        if (!DateTime.TryParse(propertyValue, out convertedDate))
        {
            throw new InvalidDataException(string.Format("Webservice property '{0}' value of '{1}' could not be converted to a DateTime.", propertyName, propertyValue));
        }

        return convertedDate;
    }
} 
```

非常感谢任何帮助。

提前致谢。

编辑：使用 Oblivion2000 的建议，我现在有以下内容：

```
public class Nameof<T>
{
    public static string Property<TProp>(Expression<Func<T, TProp>> expression)
    {
        var body = expression.Body as MemberExpression;

        if (body == null)
        {
            throw new ArgumentException("'expression' should be a member expression");
        }

        return body.Member.Name;
    }
}

public class WebserviceAccess
{
    public MyUsefulDataObject ConvertToUsefulDataObject(WebserviceResponse webserviceResponse)
    {
        var usefulData = new MyUsefulDataObject();

        usefulData.LastUpdated = Nameof<WebserviceResponse>.Property(e => e.LastUpdated).IsValidDateTime(webserviceResponse.LastUpdated);
        // etc . . .

        return usefulData ;
    }
}

public static class WebServiceValidator
{
    public static DateTime IsValidDateTime(this string propertyName, string propertyValue)
    {
        DateTime convertedDate;

        if (!DateTime.TryParse(propertyValue, out convertedDate))
        {
            throw new InvalidDataException(string.Format("Webservice property '{0}' value of '{1}' could not be converted to a DateTime.", propertyName, propertyValue));
        }

        return convertedDate;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:56:20.233

在 Visual Studio 2011 中，有一个新功能可以处理这个问题：http: [//www.mitchelsellers.com/blogs/2012/02/29/visual-studio-11-caller-member-info-attributes.aspx](http://www.mitchelsellers.com/blogs/2012/02/29/visual-studio-11-caller-member-info-attributes.aspx)

在当前/旧版本中，您必须使用发布的 Oblivion2000 之类的技巧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:06:47.417

这是 Cℓinton Sheppard 的帖子： [http ://handcraftsman.wordpress.com/2008/11/11/how-to-get-c-property-names-without-magic-strings/](http://handcraftsman.wordpress.com/2008/11/11/how-to-get-c-property-names-without-magic-strings/)

它对我很有用，我把它放在我的书签里。就个人而言，我喜欢他的静态嵌套类方式（引用自上文）：

```
public class Sample2
{
    public static class BoundPropertyNames
    {
        public static readonly string Foo = ((MemberExpression)((Expression<Func<Sample2, int>>)(s => s.Foo)).Body).Member.Name;
    }

    public int Foo { get; set; }
} 
```

# android - 在 Eclipse 中设置 Roboguice 2.0 的问题

> ID：10552714
> 
> 赞同：1
> 
> 时间：2012-05-11T13:51:42.977
> 
> 标签：android, eclipse, roboguice

好的，所以我已经研究了几次，我根本无法使用 RoboGuice 2.0 启动和运行我的项目

Eclipse 只是无法识别注释，例如。

```
@InjectView(R.id.link_email) TextView linkEmail; 
```

我得到（在“问题”窗格中）：

'InjectView 无法解析为 MyActivity.java 类型'

'注释类型 InjectView 的属性值未定义'

我已按照以下说明进行操作：

[http://code.google.com/p/roboguice/wiki/InstallationNonMaven](http://code.google.com/p/roboguice/wiki/InstallationNonMaven)

我在我的 libs 文件夹中有这些 jars 并添加到构建路径中：

RoboGuice 2.0，Guice 3.0-no_aop，jsr305

我确定我在这里遗漏了一些简单的东西，有人有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:00:22.640

好的，所以我非常愚蠢，答案很明显。

我以前没有使用过自定义注释，但与“@Override”等标准注释不同，您必须导入类以便 Eclipse 识别代码，例如。

```
import roboguice.inject.InjectView; 
```

如果您点击控制和空格，Eclipse 将在编写代码时以正常方式为您自动完成。

希望这对其他人也有帮助！

# wpf - Wpf - 投影消失

> ID：10552718
> 
> 赞同：1
> 
> 时间：2012-05-11T13:51:55.953
> 
> 标签：wpf, shadow, effect

我创建了一个没有样式的窗口并添加了自定义边框。我需要我的窗户投下阴影。

```
<Border BorderBrush="#000000 "           
                    BorderThickness="1,0,1,1" Width="400" 
                            Height="400" 
                            VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                    CornerRadius="10, 10, 0, 0"
                    Background="Black">
                        <Border.Effect>
                            <DropShadowEffect Color="Black" Direction="320" 
                                    ShadowDepth="5" Opacity="1" BlurRadius="5" />
                        </Border.Effect></Border> 
```

但是当我像这样设置宽度和高度时，我的阴影消失了：

```
Width="{Binding RelativeSource={RelativeSource FindAncestor, 
                    AncestorType={x:Type Window}}, Path=Width}" 
```

请帮我找到解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:14:00.730

由于我们没有您解决方案的全部范围，我必须假设边框位于分配给窗口样式的 ControlTemplate 内。请记住，如果您要将 DropShadowEffect 应用于根窗口，则需要对其进行填充，否则您将看不到它。将 Padding="10" 应用于 Border，您应该会看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:54:47.567

尝试将阴影的 X 和 Y 厚度添加到您的 Windows 尺寸

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:52:50.353

不要在根视觉效果上应用效果！在这种情况下，它们适用于视觉树下的所有子级，并且会导致性能下降。使用下一个模式：

```
<Grid x:Name="RootWindowGrid">
   <Border x:Name="BorderWithEffect" Margin="5">
      <Border.Effect>
         <DropShadowEffect Color="Black" Direction="320" ShadowDepth="5" Opacity="1" BlurRadius="5" />
       </Border.Effect>
   </Border>

   <Border x:Name="RootBorder_ForAll_Another_Window_Visuals" Margin="5"/>
</Grid> 
```

余量取决于效果强度。

# c++ - 是否可以始终使用指针而不是引用，以便在需要时轻松转换为智能指针？

> ID：10552719
> 
> 赞同：4
> 
> 时间：2012-05-11T13:51:59.820
> 
> 标签：c++

我知道引用比指针更受欢迎，但是更改所有这些“。”非常乏味。需要时“->”。那么始终使用指针而不是引用是否可以接受，以便在需要时轻松将它们转换为智能指针？或者有什么方法可以快速更改对指针的引用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T13:54:48.420

> 因此，始终使用指针而不是引用是否可以接受，以便在需要时轻松将它们转换为智能指针

不，一般来说，**总是**规则总是不好的。（包括这个）。为什么要将引用转换为智能指针？如果是引用，则无需担心内存管理，这就是智能指针的目的。

> 或者有什么方法可以快速更改对指针的引用？

是的，取它的地址（`&`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:54:24.580

更改架构只是为了方便源代码中的文本替换？

**不**，这绝不是一个有效的设计决策。正如 Luchian 所解释的，这似乎并不是一个真正存在的考虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:18:31.740

使用指针而不是引用不会使以后转换为智能指针变得更容易。您不能只用智能指针替换所有指针并期望任何东西都能工作；智能指针的语义与指针的语义有很大不同（通常不是你想要的）。

在具有值语义的类中使用指针而不是引用确实有意义，因为即使不是不可能，也很难用引用实现预期的赋值语义。智能指针与它无关。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-11T13:54:23.410

使用引用的目的是让事情变得更容易一些，因为您可以像使用常规的非指针变量一样使用它们。

但如果它不是更容易，甚至更难，我认为绝对没有理由使用它们。

使用指针没有任何问题。

# vb.net - VB.net 文本 -> Excel 转换（转换后需要大量格式）

> ID：10552721
> 
> 赞同：1
> 
> 时间：2012-05-11T13:52:04.397
> 
> 标签：vb.net, vba

我正在 VB.net 中创建一个程序，它执行以下操作：

在较高级别上，我在电子邮件中收到一个文件，将附件放在受监控的文件夹中，将文本文件导入 excel，格式化 excel，然后将 excel 文件通过电子邮件发送给收件人列表。

这是我的计划：

1.  已完成：Outlook VBA 监控所有传入电子邮件的特定消息。收到消息后，将附加的 .txt 文件放到特定的网络文件夹中。
2.  已完成：（VB.net）监视器文件夹，添加文本文件时开始处理
3.  未完成：（VB.net）将文本文件导入 Excel
4.  不完整：(VB.net) 格式化 Excel 文本文件。（添加一行数据，用颜色/大小格式化列标题，添加一些空白列，向一些允许下拉选择的空白列添加数据验证）
5.  完成：（VB.net）保存文件。
6.  已完成：（VB.net）将文件发送到收件人列表。

显然，上述不完整的项目是大部分工作，但我想就你们中的一些人认为处理此类事情的最佳方式获得一些建议。文件的导入和格式化给我带来了一些问题，因为我无法决定什么是最有效的方法。

到目前为止我想到的：

*   方法如上。导入到 excel -> 格式
*   拥有一个包含已经为我完成的所有格式的模板 excel，并尝试将数据转换到此文档（不知道我是否/如何做到这一点）。它甚至可行吗？是否已经创建了模板，然后将文本文件导入新的 excel 文件，然后将该数据转换为 excel 模板？

在格式化文档方面，我想到的事情是记录一个我做我需要的所有格式的宏，然后尝试将该宏转换为我的 vb.net 代码，但我不是确定这是否可行。我每次都需要验证文本文件的格式是否正确？

我非常感谢任何人愿意提供的任何建议/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:58:53.023

您将需要使用[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

它允许您从头开始创建 Excel 文件，而无需启动 Excel 本身。自动化 Excel 会使流程变慢并且缺乏稳健性（Excel 流程可能会挂起或无法正常关闭）。

此外，使用 .Net 库可以让您在没有安装 Excel 的服务器上运行它。（下一步是通过 POP、IMAP 或 Exchange API 检查邮箱，因此该部分也不必在客户端计算机上运行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:10:35.377

如果你想操作 Excel 文件，我可以向你推荐 CodePlex 上的[NPOI 库](http://npoi.codeplex.com/)。与 OLE 自动化相比，它有几个优点：

1.  NPOI 不依赖于特定的 Excel 版本。

2.  不需要安装 Excel（或任何其他 Office 组件）。

3.  它更快。

它适用于 .XLS 和 .XLSX 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:30:48.013

[http://msdn.microsoft.com/en-us/library/kh3965hw(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/kh3965hw(v=vs.100).aspx)

您也可以只使用 MS 的 Interops 与 Excel、Outlook、Word 等进行交互。它们一点也不难使用。我不熟悉 CodePlex，所以这可能是一条更好或更简单的路线。我只是想为您提供一个替代方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:16:11.683

使用 Microsoft Office 2010 Interops，您不能再从 .net 应用程序生成 Office 文件。

您可以操作现有 Excel 文件中的数据，因此您需要模板（您的第四点）。然后 Excel 允许您查询一些数据库。您也许可以用您的文件夹模拟一个，否则我建议将您的 .txt 文件转换为一些数据库。（第三点）

如果您确实使用旧版本，则可以通过将 Excel 文件加载到 Excel 实例中并根据需要对其进行操作来创建 Excel 文件。

顺便说一句，我认为您的附加文件将具有某种格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T14:08:37.900

我们正在使用名为 excel writer 的第三方软件。可能不是您要找的，因为它需要许可证，但它非常快，客户不必等待图表或数据输出。因为我们有那个工具，所以没有尝试其他任何东西。

# r - R：直接从 R 在 Google Finance 中创建投资组合

> ID：10552725
> 
> 赞同：2
> 
> 时间：2012-05-11T13:52:13.460
> 
> 标签：r

有没有办法直接从 R 在 Google Finance 中创建投资组合 A（CSCO、CAT、HPQ）？

```
require(RGoogleDocs)

auth = getGoogleAuth("abc@def.com", "password",service="finance")
con = getGoogleDocsConnection(auth)

Portfolio A
CSCO
CAT
HPQ 
```

# php - PHP 缓冲区溢出

> ID：10552727
> 
> 赞同：0
> 
> 时间：2012-05-11T13:52:17.780
> 
> 标签：php, security, buffer-overrun

是否有任何已知点需要注意 PHP 中的缓冲区溢出？目前我从一个表单中获取一个电子邮件地址，运行它`preg_match`以检查它只是一个地址，`mail`用它调用函数，并使用`PDOStatement::bindValue()`.

有什么好担心的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:49:01.827

除了使用 preg_match 来检查格式是否正确之外，如果不先检查其长度，我不会对用户输入做任何事情。我可能想出一个 10,000 个字符的字符串，它可以通过简单的格式检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:58:17.190

如果您问是否可以在 PHP 中编写包含缓冲区溢出漏洞的代码，那么答案是否定的。你不能在 PHP 中拥有这些，它为你管理内存，你不能直接改变内存。唯一的情况是 PHP 本身有一个（安全）错误，您可以通过使 PHP 保持最新来缓解该错误。

# asp.net - 限制 asp.net 应用程序的面向公众的演示站点？

> ID：10552736
> 
> 赞同：5
> 
> 时间：2012-05-11T13:53:01.493
> 
> 标签：asp.net, forms-authentication, basic-authentication

我确信在某个地方一定有这个骗局，但我不容易找到它：

**给定一个本身使用表单身份验证的 asp.net 应用程序，保护面向公众的演示站点的最佳实践是什么，以使不在“人群”中的任何人都无法看到该站点？**

*   IP过滤？
*   围绕表单身份验证的基本身份验证？我已经把头撞到了这个上面，似乎无法让它工作：/
*   虚拟专用网？
*   首先“使演示站点公开面临被认为是有害的”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:53:11.850

您是否考虑过利用您的 Web.Config？

对于您希望匿名访问的区域，请使用：

```
<location path="unsecured_path">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location> 
```

或者拒绝匿名用户

```
<location path="secured_path">
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
  </location> 
```

如果您拒绝匿名用户，您将需要一种方法来验证您的用户。通过 Windows 安全性，当您尝试匿名点击它时会给出质询响应，或者通过给用户一个漂亮的登录页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T06:19:46.423

通常，“演示站点”使用基本身份验证进行保护。例如，向浏览器返回 401 并带有基本身份验证质询，它会变成提示输入凭据。理论上，一旦完成，站点的其余部分就只是常规的东西——在需要时形成身份验证。

这种方法在 ASP.NET 中的困难在于默认的 FormsAuthenticationProvider 硬连线将 401 解释为“登录页面需要 302”。以此为前提，同时进行表单身份验证和基本身份验证是一项挑战。

此外，IIS 内置的基本身份验证使用 Windows 作为身份验证存储（Active Directory 或本地 Windows 帐户）。让它使用不同的凭据存储并不容易做到“在盒子里”。

[http://custombasicauth.codeplex.com/](http://custombasicauth.codeplex.com/)是我一直在关注的一个非常有趣的项目。它提供了一个自定义的基本身份验证提供程序，允许您从不同的提供程序商店安装基本身份验证。弹出打开源代码到[http://custombasicauth.codeplex.com/SourceControl/changeset/view/53965#183990](http://custombasicauth.codeplex.com/SourceControl/changeset/view/53965#183990)和[http://custombasicauth.codeplex.com/SourceControl/changeset/view/53965#183995](http://custombasicauth.codeplex.com/SourceControl/changeset/view/53965#183995)并看到他们只是提取 Base64 编码的标头，并将其与 ASP.NET Membership Provider 进行比较。以此为前提，您可以构建一个类似的 HttpModule 来将标头数据与存储在 AppSettings 中的用户/通行证进行比较，并将该模块包含在您的演示站点中。神奇的酱汁是您没有在 Authenticate 上设置 401 状态，而是在 EndRequest 中设置 - 在 FormsAuthenticationModule 完成后，它是“401 到 302 登录页面”。唯一的缺点是`<location>`标签必须由 Forms Auth 或 Basic Auth 使用，但不能同时使用。如果用例真的是“保护整个演示站点”，那么将 Basic Auth 模块编码为“只做这一切”就足够了。我大约是这样做的 2/3。完成后，我可能会将其发布到 GitHub，因为它非常酷。唉，技术并不难，也许解决方案的描述就足够了。

如果您真的想要一个无需干预的无代码解决方案，请安装[http://custombasicauth.codeplex.com/](http://custombasicauth.codeplex.com/)。它甚至在 IIS 中为您提供漂亮的配置窗口。:D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:15:06.317

*   您可以按 IP 过滤 - 我以前在后端管理系统中做过这个。这在我的情况下工作得很好，因为唯一的用户拥有静态 IP，但我希望大多数人没有这个，所以你必须不断地调整以允许访问。

*   使用 IIS 中的一些设置，您可以添加额外的授权级别（您将不得不谷歌如何做到这一点） - 然后用户将需要登录一次才能查看该站点并再次在登录屏幕上。

*   你在这里一针见血——如果你不想让人们看到它，就不要把它放在互联网上。

基于以上内容，我的回答要么什么都不做，而是依靠您的登录系统（毕竟唯一公开的是登录页面）或不公开 - 使用某种 VPN。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T15:38:19.270

您可能想尝试为站点使用 80 以外的其他端口。如果您真的不想让人们知道它，这不是世界上最安全的事情，但它绝对是通过默默无闻的安全性。它不会阻止您使用表单身份验证，但您可能需要一些额外的配置来巧妙地在 http 和 https 流量之间转换。

因此，如果您的站点是[http://test.org](http://test.org)并且您还将演示站点设置为[http://test.org:9666](http://test.org:9666)，那么该站点的任何常规流量都会到达非演示站点。这可能不清楚，但我希望它能有意义地传达这个想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T04:22:22.917

如果您熟悉 Apache .htacces 和 .htpasswd 配置，请查看[http://www.helicontech.com/ape/](http://www.helicontech.com/ape/)（最多免费 3 个站点）。Helicon Ape 是一个 IIS 插件，它实现了 htacess/htpasswd 功能。

非常简单的密码机制。'.htpasswd' 允许通过创建一个带有用户名：md5 密码哈希的简单文本文件来控制访问。您可以自己对密码进行 MD5 处理，也可以使用[http://aspirine.org/htpasswd_en.html](http://aspirine.org/htpasswd_en.html)等在线网站来生成。例子：

```
apple:$apr1$4SZNOvdK$P7b6AkKVw.gXfdxlcvENp1
orange:$apr1$fvcwHIlc$OF7Mkhv8JfELDJnRmsku7/
banana:$apr1$IoSJc9GM$xtSY4nI3KCnTtjWKwxhmx/ 
```

获得访问权限的用户/通行证是：

```
apple:sauce
orange:juice
banana:split 
```

# python - 用多个分隔符分隔字符串并仅提取单个字符

> ID：10552739
> 
> 赞同：1
> 
> 时间：2012-05-11T13:53:13.430
> 
> 标签：python, regex, string, list, findall

假设我有一个可以具有不同格式的数据字符串。名义上，字符串中的数据将由空格分隔，但情况并非总是如此，因此`.split(' ')`在这种情况下简单的行不通。

一个示例字符串是：

```
string = '2012 05 06 04:20:00.0500 FOOBAR 4.7E+10 -55 33.0 555~2767 B 12 \r\n' 
```

要获得我需要的所有数字，它可以包含指数，以 -、+ 或 ~ 开头，或者没有空格分隔它们，我可以使用：

```
re.findall(r'[~+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?', string)
# giving the result;
['2012', '05', '06', '04', '20', '00.0500', '4.7E+10', '-55', '33.0', '555', '~2767', '12'] 
```

我还需要`B`字符串中的单个字符（在本例中为 ）。这个单个字符可以是 B、F 或 O，我可以得到它并避免`FOOBAR`在我的字符串中使用：

```
re.findall(r'((?:(?:\b))[FBO]\b)', string)
# giving the result:
['B'] 
```

但我需要的是得到一个结合了上述两个结果的结果。我总是可以将第二个结果附加到列表中，但我真的希望结果在相应列表中的位置以它们在原始字符串中存在的顺序出现`string`。也就是说，我想要一个如下所示的列表：

```
['2012', '05', '06', '04', '20', '00.0500', '4.7E+10', '-55', '33.0', '555', '~2767', 'B', '12'] 
```

有任何想法吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:08:39.270

怎么样：

```
re.findall(r'([~+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?|(?:(?:\b))[FBO]\b)', str) 
```

这将返回：

```
['2012', '05', '06', '04', '20', '00.0500', '4.7E+10', '-55', '33.0', '555', '~2767', 'B', '12'] 
```

另外，不要唠叨，而是`str`用变量名覆盖 Python 类型会让人不寒而栗。

# iphone - Objective-C - 使用 ARC 分配/初始化对象

> ID：10552743
> 
> 赞同：1
> 
> 时间：2012-05-11T13:53:28.067
> 
> 标签：iphone, objective-c, ios, memory-management, automatic-ref-counting

我想知道我是否可以直接分配，现在用 ARC 初始化一个 ivar（因为如果我记得清楚的话，没有 ARC 是不可能的，因为它会泄漏内存）？

示例（考虑像这样声明的 ivar）：

```
@property (nonatomic, strong) NSArray *myArray;

@synthetize myArray = _myArray; 
```

然后做

```
self.myArray = [[NSArray alloc] initWithObjects:object1, object2, nil]; //I know I could directly use [NSArray arrayWithObjects:...] but that's the purpose of my question 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:01:51.633

是的。

`alloc`使用/`initWithObjects:`和之间的唯一区别`arrayWithObjects:`是前者给你留下了一个保留的对象，而第二个没有。如果出于某种原因您想使用前者来初始化属性，您需要添加一个调用`autorelease`以避免泄漏。所以你会这样做：

```
self.myArray = [[[NSArray alloc] initWithObjects:foo, bar, nil] autorelease]; 
```

你是对的，使用 ARC，编译器会为你添加它，所以你现在可以说：

```
self.myArray = [[NSArray alloc] initWithObjects:foo, bar, nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:59:39.540

如果你没有在你的`dealloc`方法中释放它，它会的。使用 ARC，您负责分配。在该`dealloc`方法中，使用 ARC，您仍然可以使用`self.ivar=nil`（但 ARC 已经为您自动执行此操作）释放资源，但不使用`release`显式一词。此外，ARC 不允许您调用`[super dealloc]`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T14:10:39.357

您仍然可以分配和保留。对象生命周期保持不变，即当 reatin 计数下降到 0 时对象得到释放。ARC 为您所做的只是将对象放入自动释放池并正确释放它，这是您应该做的。您仍然可以覆盖 dealloc。

[你可以在这里](http://www.learn-cocos2d.com/2011/11/everything-know-about-arc/#myth-no-memory-management-control)找到关于 ARC 的好文章

# java - 创建LinkedList的最小个数和加法函数

> ID：10552745
> 
> 赞同：2
> 
> 时间：2012-05-11T13:53:30.813
> 
> 标签：java, algorithm, linked-list, addition

我在尝试逻辑并尝试编写 min 和 additionMerge 函数及其将至少一个列表作为参数（列表的第一个节点）的函数的递归版本时遇到问题。这将是一个私有帮助函数，由作为 LinkedList 类的成员函数的包装函数调用。

```
public class LinkedList {

     private static class ListNode {

        public int firstItem;
        public ListNode restOfList;
    }
    private ListNode first;

   /**
     * Create an empty list.
     */

    public LinkedList() {
       first = null;
    }

      public LinkedList(int n) {
    first = countDown(n);
}

public LinkedList(String s) {
    String[] temp = s.split(",");
    for (int i = temp.length-1; i >= 0; i--) {
        first = insertAtFront(first, Integer.parseInt(temp[i]));
    }
}

public int length() {
    return length(first);
}

private static int length(ListNode list) {
    if (list == null) {
        return 0;
    }
    int temp = length(list.restOfList);
    return temp + 1;
}

public boolean contains(int value) {
    return contains(first, value);
}

private static boolean contains(ListNode list, int value) {
    if (list == null) {
        return false;
    }
    if (list.firstItem == value) {
        return true;
    }
    return contains(list.restOfList, value);

}

public int sum() {
    return sum(first);
}

private static int sum(ListNode list) {
    if (list == null) {
        return 0;
    }
    return sum(list.restOfList) + list.firstItem;
}

public int count(int target) {
    return count(first, target);
}

private static int count(ListNode list, int target) {
    if (list == null) {
        return 0;
    }
    int temp = count(list.restOfList, target);
    if (list.firstItem == target) {
        temp++;
    }
    return temp;
}

public void replace(int oldValue, int newValue) {
    replace(first, oldValue, newValue);
}

private static void replace(ListNode list, int oldValue, int newValue) {
    if (list == null) {
        return;
    }
    replace(list.restOfList, oldValue, newValue);
    if (list.firstItem == oldValue) {
        list.firstItem = newValue;
    }
  }

    public void insertAtFront(int n) {
      first = insertAtFront(first, n);
   }

  private static ListNode insertAtFront(ListNode list, int n) {
    ListNode answer = new ListNode();
    answer.firstItem = n;
    answer.restOfList = list;
    return answer;
  }

  private static ListNode countDown(int n) {
    if (n == 1) {
        ListNode answer = new ListNode();
        answer.firstItem = 1;
        answer.restOfList = null;
        return answer;
    }
    ListNode temp = countDown(n - 1);
    ListNode answer = insertAtFront(temp, n);
    return answer;
  }

  public void insertAtBack(int item) {
    first = insertAtBack(first, item);
  }

  private static ListNode insertAtBack(ListNode list, int item) {
    if (list == null) {
        ListNode answer = new ListNode();
        answer.firstItem = item;
        answer.restOfList = null;
        return answer;
    }
    //List answer = new ListNode();
    //answer.firstItem = list.firstItem;
    ListNode temp = insertAtBack(list.restOfList, item);
    //answer.restOfList = temp;
    list.restOfList = temp;
    return list;
  }

  public void concatenate(LinkedList otherList) {
     this.first = concatenate(this.first, otherList.first);
  }

  private static ListNode concatenate(ListNode list1, ListNode list2) {
    if (list1 == null) {
        return list2;
    }
    ListNode temp = concatenate(list1.restOfList, list2);
    list1.restOfList = temp;
    return list1;
  }

  public void filter(int item) {
    first = filter(first, item);
  }

@Override
  public String toString() {
    if (first == null) {
        return "";
    }
    StringBuilder sb = new StringBuilder(256);
    sb.append(first.firstItem);
    for (ListNode current = first.restOfList;
            current != null;
            current = current.restOfList) {
        sb.append(',');
        sb.append(current.firstItem);
    }
    return sb.toString();
  }

  private static ListNode filter(ListNode list, int item) {
    if (list == null) {
        return null;
    }
    ListNode temp = filter(list.restOfList, item);
    if (list.firstItem == item) {
        return temp;
    }
    list.restOfList = temp;
    return list;
}

     public int min() throws RuntimeException {

      if (first == null)
      throw new RuntimeException("List is Empty");
         else 
          return min();

        }

  // * A private recursive helper function that returns the minimum item in a
   * list whose first node is the argument list.

 private static int min(ListNode list) throws RuntimeException {
    if (list == null) {
        return 0;

        }

    }

  public void additionMerge(LinkedList l2) {

 }

 * Every node in the list that begins with node
 * node1 is increased by the ammount of the corresponding
 * node in the list that begins with node node2.
 * If one list is longer than the other, the missing nodes 
 * in the shorter list are assumed to be 0.

  private static ListNode additionMerge(ListNode node1, ListNode node2) {
          if (list == null) {
             return null;
            }

       }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:26:54.363

如果这不是家庭作业，那么我的建议是：

*   不要编写自己的`LinkedList`课程。使用现有的输出，并添加额外的功能作为帮助类或通过扩展现有类。

*   如果你决定实现你自己的链表类，那么你应该小心使用递归。递归提供了一个简洁的解决方案，但是 Java 中的递归有一个主要缺点。JVM 不进行尾调用优化，因此深度递归的递归算法（例如递归遍历一个长列表）很容易导致`StackOverflowError`.

# php - 为什么 isset() 为已设置且为 T RUE 的布尔变量返回 FALSE？

> ID：10552749
> 
> 赞同：0
> 
> 时间：2012-05-11T13:53:40.577
> 
> 标签：php

我花了最后 20 分钟试图找出这个问题的原因。

首先我会做

```
$this->is_csu = TRUE; 
```

在我称为 isset 的单独类中，isset 返回 FALSE，如果我立即回显该变量，它将返回 TRUE。

```
echo var_dump(isset($this->is_csu));
echo var_dump($this->is_csu);
die(); 
```

结果输出为

```
bool(false) bool(true) 
```

我确信为什么会发生这种情况有一些技术原因，但它现在超出了我的范围。

希望有人可以对此有所了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:04:03.627

您可能使用私人成员扩展了一个类。

请参阅[PHP 示例](http://de3.php.net/manual/en/language.oop5.visibility.php)以了解如何处理。

我获得输出的唯一方法是在类上使用 PHP 魔术方法，例如：

```
class A
{
        public function __isset($n)
        {
                $this->$n = TRUE;
        }
}

$bar = new A();
var_dump(isset($bar->foo));
var_dump($bar->foo); 
```

输出：

```
bool(false)
bool(true) 
```

尽管我认为您已经知道您是否正在使用其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-16T23:24:39.727

我知道这是一个非常古老的问题，但我也想到了它，我不知道为什么。

最终原因是这是一个私有或受保护的成员，所以虽然你可以得到它的值，但 isset 返回了 false。

var_dump 是有问题的，因为它正在做反射。

# sql - 转换日期时间 SQL

> ID：10552750
> 
> 赞同：0
> 
> 时间：2012-05-11T13:53:45.453
> 
> 标签：sql, sql-server, sql-server-2005

我只需要从日期时间字段中获取日期和时间。我怎么做？

我的查询：

```
select  ImpFile, convert(nvarchar,ImpDate,21) as ImpDate
from nol_artikula_izmaina 
```

此查询的输出：
![图1](../Images/2ec3b1f5847b02f311e8db7eae2881c7.png)
我需要的是它只显示日期和小时，例如字段 ImpDate 应该如下所示：2012-05-11 14:00:00:000 和 2012-05-11 16： 00:00:000
这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:57:39.867

这通过获取“日期 0”和 之间的 [whole] 小时数`ImpDate`，然后将其添加到“日期 0”。

它在原则上与[删除时间](https://stackoverflow.com/questions/1177449/best-approach-to-remove-time-part-of-datetime-in-sql-server)非常相似（获取 [whole] 天数），并且可用于“截断”到任何日期部分（尽管对于秒或更短，您可能需要使用不同的“下限”日期大于 0 以避免溢出）。

```
 SELECT ImpFile, DATEADD(hh, DATEDIFF(hh, 0, ImpDate), 0)
 FROM nol_artikula_izmaina 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:02:15.140

选择使用日期部分。

[http://msdn.microsoft.com/en-us/library/aa258265(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258265(v=sql.80).aspx)

# c#-4.0 - 如何在 C# 中捕获未处理的异常？

> ID：10552751
> 
> 赞同：4
> 
> 时间：2012-05-11T13:53:47.323
> 
> 标签：c#-4.0, exception-handling, error-handling, c#-3.0

我试图在我的程序中捕获任何未处理的异常，我在 Program 主类中使用此代码

```
static class Program
{
/// <summary>
/// The main entry point for the application.
/// </summary>
[STAThread]
static void Main()
{
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);

AppDomain.CurrentDomain.UnhandledException += new    UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);

Application.Run(new Form1());
}

public static void CurrentDomain_UnhandledException(Object sender,  UnhandledExceptionEventArgs e)
{

MessageBox.Show((e.ExceptionObject as Exception).Message, "Unhandled domain Exception");
Application.Exit();
} 
```

现在我的表单 form1，我尝试创建一个简单的异常：除以零，没有 try catch 块，主模块中的代码确实拦截了异常，但我仍然有 MS Visual Studio 对话框。应用程序不退出。当然，在实际情况下，我会记录/邮寄错误。但我想了解为什么在我拦截我的异常后继续执行？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T10:34:52.473

从主 UI 线程捕获所有异常对我有用：

```
static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            // Add handler for UI thread exceptions
            Application.ThreadException += new ThreadExceptionEventHandler(UIThreadException);

            // Force all WinForms errors to go through handler
            Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);

            // This handler is for catching non-UI thread exceptions
            AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);

            Application.Run(new Form1());
        }

        private static void CurrentDomain_UnhandledException(Object sender, UnhandledExceptionEventArgs e)
        {
            try
            {
                Exception ex = (Exception)e.ExceptionObject;
                MessageBox.Show("Unhadled domain exception:\n\n" + ex.Message);
            }
            catch (Exception exc)
            {
                try
                {
                    MessageBox.Show("Fatal exception happend inside UnhadledExceptionHandler: \n\n"
                        + exc.Message, "", MessageBoxButtons.OK, MessageBoxIcon.Stop);
                }
                finally
                {
                    Application.Exit();
                }
            }

            // It should terminate our main thread so Application.Exit() is unnecessary here
        }

        private static void UIThreadException(object sender, ThreadExceptionEventArgs t)
        {
            try
            {
                MessageBox.Show("Unhandled exception catched.\n Application is going to close now.");
            }
            catch
            {
                try
                {
                    MessageBox.Show("Fatal exception happend inside UIThreadException handler",
                        "Fatal Windows Forms Error", MessageBoxButtons.AbortRetryIgnore, MessageBoxIcon.Stop);
                }
                finally
                {
                    Application.Exit();
                }
            }

            // Here we can decide if we want to end our application or do something else
            Application.Exit();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T01:10:43.683

您不必使用 Application.Exit 或 Environment.Exit，这只是 Visual Studio 的行为，它不断拦截导致未处理异常的行，但实际上，如果设置了 isTerminating 标志，您的应用程序将崩溃（退出） , 这是它的正确使用方法，我建议不要为此使用任何用户界面，也不要在这种情况下使用任何其他资源匮乏的进程，只需静默日志即可。

此事件的目的是获取日志为什么它究竟发生了，这不是让您的应用程序在崩溃时看起来很好，或者为此向用户道歉。但是当用户下次登录时，您将有机会执行上述操作。

因此，即使您打算通过电子邮件发送异常日志，最好的方法是编写文件并在下次启动应用程序时通过电子邮件发送文件。

我通常使用 log4net 并按如下方式使用这些事件。

```
[STAThread]
static void Main()
{
    log.Info("Starting deployer application");

    Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(Application_ThreadException);
    AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
    Application.ApplicationExit += new EventHandler(Application_ApplicationExit);

    Application.Run(ConnectionForm.GetInstance);
}

static void Application_ApplicationExit(object sender, EventArgs e)
{
    log.Info("Application Closed");
}

static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
{
    log.Error(string.Format("*** UNHANDLED APPDOMAIN EXCEPTION ({0}) *****", e.IsTerminating ? "Terminating" : "Non-Terminating"), e.ExceptionObject as Exception);
}

static void Application_ThreadException(object sender, System.Threading.ThreadExceptionEventArgs e)
{
    log.Error("*** UNHANDLED THREAD EXCEPTION *****", e.Exception);
} 
```

如果您在此之前从未使用过 log4net[会有所帮助](https://stackoverflow.com/questions/5612047/log4net-section-in-web-config-generates-error/19284263#19284263)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T10:42:06.947

```
Use Environment.Exit() 
```

代替

```
Application.Exit() 
```

# ios - iOS，拍照，但将照片框成椭圆形

> ID：10552752
> 
> 赞同：-1
> 
> 时间：2012-05-11T13:53:50.990
> 
> 标签：ios, uiimageview, camera, uiimage

当然，允许用户使用两个 iPhone / iPad 相机之一拍摄照片然后移动/缩放照片是很容易的——例如，通常在框中选择您的头部。但是我正在做一个你必须拍照的地方，但是，当你移动/缩放照片以选择头部时..事实上，头部出现在椭圆形框架内（或者显然，它可能是任何奇怪的形状） ，实际上，代码会将图像修剪为该形状（即，使其周围保持透明）。当然，这已经做过很多次了——是否有可用的现有系统？甚至 - 有没有人记得看到过这样的应用程序？

如果这为任何人敲响了警钟 - 谢谢！搜索一片空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:11:34.903

我认为您必须分两步执行此操作。

当用户使用相机拍照时，您可以在相机视图的顶部显示一个椭圆形的叠加层（参见`cameraOverlayView`的`UIImagePickerController`属性）。

然后，您可能需要对生成的图像进行遮罩以切出椭圆形。您可以根据[此文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-TPXREF101)使用 Quartz 。但也许您甚至根本不需要进行此蒙版，并且可以在最终使用图像的任何地方再次添加叠加层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:50:37.607

我的适用于 iPhone appstore.com/ovalphoto 的 OvalPhoto 应用程序就是这样做的。

# linux - 如何从核心转储中提取 EBP 和 ESP？

> ID：10552756
> 
> 赞同：3
> 
> 时间：2012-05-11T13:53:59.747
> 
> 标签：linux, gdb, cpu-registers, coredump

我正在尝试从没有调试信息的程序（Linux）中分析核心转储。分析应该在 C 中自动完成，所以**没有**GDB。

正如我在 GDB 中看到的，可以通过命令获取栈顶指针和栈基指针（ESP 和 EBP）`info registers`。当我向上或向下堆栈（命令`up`和`down`）时，我会看到当前帧的寄存器的更新版本。

我的问题是，我在核心转储中哪里可以找到这些信息？我知道核心转储中有一个 NOTE 部分，其中包含 NT_PRSTATUS、NT_PRPSINFO 和 NT_AUXV。但遗憾的是，我找不到有关该笔记的任何信息。GDB 是如何构建框架的，它从哪里获取信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:15:44.277

首先您需要阅读 ELF 规范，然后阅读 linux/fs/binfmt_elf.c 中的函数 elf_core_dump() 以了解 coredump 文件是如何组织的。但无论如何，您可以检查以下程序。

```
 #include <stdio.h>
 #include <elf.h>
 #include <sys/types.h>
 #include <unistd.h>
 #include <fcntl.h>
 #include <stdlib.h>
 #include <sys/procfs.h>

 int main (int argc, char **arg)
 {
Elf32_Ehdr *elfh;
Elf32_Shdr *elfsh;
Elf32_Phdr *elfphdr;
char *p = NULL;
char buf[1000], sbuf[1000];
int ret, fd, i = 0, size;

if (argc < 2) {
    printf("\nUsage: corenotes <core>\n");
    return 0;
}

fd = open(arg[1], O_RDONLY);
if (fd < 0) {
    perror("open");
    return 0;
}

/* Read ELF header*/
ret = read(fd, buf, sizeof(*elfh));
if (!ret) {
    perror("Error Reading the ELF Header");
    goto cl;
}
elfh = (Elf32_Ehdr *) buf;
/* Is it ELF*/
if ((elfh->e_ident[0] != 0x7f) || (elfh->e_ident[1] != 'E') ||
    (elfh->e_ident[2] != 'L') || (elfh->e_ident[3] != 'F')) {
    printf("\nUnrecongised File Format");
    goto cl;
}

/*
 * read program headers and print
 */
size = elfh->e_phnum * elfh->e_phentsize;
p =  malloc(size);

lseek(fd, elfh->e_phoff, SEEK_SET); 
ret = read(fd, p, size);
if (ret != size) {
    printf("\nCannot read Program Header");
    goto cl;
}
elfphdr = (Elf32_Phdr *)p;
for (i = 0; i < elfh->e_phnum; i++) {
    if (elfphdr->p_type == PT_NOTE) {
        unsigned char *pdata;
        struct note {
            unsigned int namesz;
            unsigned int descsz;
            unsigned int type;
        };
        struct note *not;
        int pad;

        pdata = malloc(elfphdr->p_filesz);
        lseek(fd, elfphdr->p_offset, SEEK_SET);
        ret = read(fd, pdata, elfphdr->p_filesz);
        not = (struct note *) pdata;
        printf("\n%s", pdata + sizeof (*not));
        pad  = 4 - (not->namesz % 4); 
        if (not->type == NT_PRSTATUS) {
            struct elf_prstatus *prs;

            prs = (struct elf_prstatus *)(pdata + sizeof(*not) + not->namesz + pad);
            printf("\nProgram Received %d", prs->pr_cursig);
            printf("\nPending Signals %08x", prs->pr_sigpend);
            printf("\nHold Signals %08x", prs->pr_sighold);
            printf("\nPID of the process %d", prs->pr_pid);
            printf("\nPPID of the process %d", prs->pr_ppid);
            printf("\nEBX: %08x", prs->pr_reg[0]);
            printf("\nECX: %08x", prs->pr_reg[1]);
            printf("\nEDX: %08x", prs->pr_reg[2]);
            printf("\nESI: %08x", prs->pr_reg[3]);
            printf("\nEDI: %08x", prs->pr_reg[4]);
            printf("\nEBP: %08x", prs->pr_reg[5]);
            printf("\nEAX: %08x", prs->pr_reg[6]);
            printf("\nXDS: %08x", prs->pr_reg[7]);
            printf("\nXES: %08x", prs->pr_reg[8]);
            printf("\nXFS: %08x", prs->pr_reg[9]);
            printf("\nXGS: %08x", prs->pr_reg[10]);
            printf("\nORG_EAX: %08x", prs->pr_reg[11]);
            printf("\nEIP: %08x", prs->pr_reg[12]);
            printf("\nECS: %08x", prs->pr_reg[13]);
            printf("\nEFLAGS: %08x", prs->pr_reg[14]);
            printf("\nESP: %08x", prs->pr_reg[15]);
            printf("\nXSS: %08x", prs->pr_reg[16]);
            pdata = pdata + sizeof(*not) + not->namesz + pad + sizeof(struct elf_prstatus);
        }
         not = (struct note *)pdata;
         if (not->type == NT_PRPSINFO) {
            struct elf_prpsinfo *prs;
            printf("\n\nNT_PRPSINF\n");
            pad  = 4 - (not->namesz % 4);
            prs = (struct elf_prpsinfo *)(pdata + sizeof(*not) + not->namesz + pad);
            printf("\nName of the Exe %s", prs->pr_fname);
        }
    //  free(pdata);
    }
    elfphdr++;
}
  free(p);      
  printf("\n\n");
  cl:   
  close(fd);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:26:45.523

elf 是一个复杂的格式，使用 libelf 提取 PT_NOTE。跳过其他，NT_PRSTATUS 有你需要的。

如果可以调用其他程序，elfdump 的运气会更好。

你可以在这里找到 NT_PRSTATUS 格式：http: [//lxr.free-electrons.com/source/include/linux/elfcore.h#L42](http://lxr.free-electrons.com/source/arch/x86/include/asm/elf.h#L116) [http://lxr.free-electrons.com/source/arch/x86/include/](http://lxr.free-electrons.com/source/include/linux/elfcore.h#L42) [asm/elf.h#L116](http://lxr.free-electrons.com/source/arch/x86/include/asm/elf.h#L116)

# vba - 在 VBA 中使用宏自动关闭 PPT

> ID：10552759
> 
> 赞同：1
> 
> 时间：2012-05-11T13:54:18.370
> 
> 标签：vba, powerpoint

我想在某些到期时间/日期后打开 PPT 文件时关闭我的 power point 演示文稿。我们需要它在 VBA 中使用宏。

下面的代码我们正在尝试执行上述要求。

```
/////////////////////// 
Sub Auto_Open() 
ExpirationCode 
End Sub 
Sub ExpirationCode() 
Dim ExpirationDate As Date 
ExpirationDate = DateSerial(2011, 5, 8) 
MsgBox "Check1" 
If Now() >= ExpirationDate 
Then
Application.Windows(1).Close 
MsgBox "Check2" 
End If 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:14:50.210

打开演示文稿时，PowerPoint 从不自动运行代码。

Sub Auto_Open 中的代码仅在它是加载项的一部分并加载加载项时运行。

如果当前日期已超过您设置的到期日期，您似乎想要关闭演示文稿。如果是这样，您可能必须以不同的方式处理此问题。例如，您可以要求用户安装一个小型插件才能使用您的演示文稿。

加载项会捕获 PPT 打开演示文稿时发生的事件，检查是否存在将演示文稿标识为您的演示文稿的某些功能，如果是，将检查到期日期，如果过期，则关闭演示文稿。

就个人而言，我会使用标签。大多数用户不知道它们，没有用于查看/编辑它们的 UI。您的事件处理程序可能类似于：

```
With ActivePresentation
  ' Does it have an EXPIRE tag?  
  If Len(.Tags("EXPIRE")) > 0 Then
    ' It does, so it's one of yours.  Now get the date:
    If .Tags("EXPIRE") ... Then ' meets some condition you set
        .Close ' the presentation
        MsgBox "Expired!"
    End If
  End If
End With 
```

# mysql - 用于条件计数的 MySql

> ID：10552762
> 
> 赞同：0
> 
> 时间：2012-05-11T13:54:25.800
> 
> 标签：mysql, database

输入是：

```
+--------+-------+----------+----------+
| RESULT | EXMID | EXSUBJID | SID      |
+--------+-------+----------+----------+
|     11 |     4 |        6 | Student4 |
|     12 |     4 |        6 | Student3 |
|     25 |     4 |        6 | Student5 |
|     45 |     4 |       10 | Student8 |
|     12 |     4 |       10 | Student4 |
|    100 |     4 |       10 | Student5 |
|     12 |     4 |       10 | Student3 |
+--------+-------+----------+----------+ 
```

我有这张表，其中列出了在不同科目的特定考试中出现的学生名单。

总科目是考试的科目总数。Pass 代表学生在任何科目中通过的状态，fail 代表学生在任何科目中失败的状态。

现在的问题是考试中通过、失败和通过百分比的总计数。如果学生在任何科目中不及格，他/她就是不及格。

我尝试了很多东西，但无法得到结果。

这就是我得到的：

```
+----------+------------+------+------+--------------+
| STUDENT  | TOTAL_SUBJ | PASS | FAIL | PASS_PERCENT |
+----------+------------+------+------+--------------+
| Student3 |          2 |    1 |    1 |        50.00 |
| Student4 |          2 |    0 |    2 |         0.00 |
| Student5 |          2 |    2 |    0 |       100.00 |
| Student8 |          2 |    1 |    0 |       100.00 |
+----------+------------+------+------+--------------+ 
```

任何人都可以为它提供一个好的解决方案吗？

这是我对上述输出的查询。

```
SELECT DISTINCT exreslt.SID AS STUDENT,
COUNT(exsubj.EXSUBJID) AS TOTAL_SUBJ,
SUM(exreslt.RESULT >= exsubj.PASS) AS PASS,
SUM(exreslt.RESULT < exsubj.PASS) AS FAIL,

ROUND(SUM(exreslt.RESULT >= exsubj.PASS)*100/ COUNT(exreslt.SID),2) AS 'PASS_PERCENT'
FROM EXAMSUBJ AS exsubj
STRAIGHT_JOIN EXAMRESULT AS exreslt
WHERE exsubj.EXSUBJID = exreslt.EXSUBJID AND exsubj.EXMID = exreslt.EXMID AND exsubj.EXMID=4 GROUP BY exreslt.SID ; 
```

我希望输出是

```
+----------+------------+------+------+--------------+
| STUDENT  | TOTAL_SUBJ | PASS | FAIL | PASS_PERCENT |
+----------+------------+------+------+--------------+
|       4  |          2 |    2 |    2 |        50.00 |
+----------+------------+------+------+--------------+ 
```

如果任何学生在任何一门科目中不及格，他将被视为不及格，否则他将通过。

# css - 为什么谷歌浏览器不会自动破解？

> ID：10552766
> 
> 赞同：0
> 
> 时间：2012-05-11T13:54:35.397
> 
> 标签：css, google-chrome, html, pre

我在这个文档中做错了什么，我不知道是什么。我还没有那么多内容。我正在为 WB 构建它。它在 Google Chrome 中不起作用，但在 Internet Explorer 中起作用。

[http://privat.bahnhof.se/wb802226/tesing.html](http://privat.bahnhof.se/wb802226/tesing.html)

有人可以查看源代码并查找错误吗？

我想好好`<span>`休息一下。我想做`<span>`一个`<pre>`。我也想要`<pre>`自动刹车。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:03:07.810

尝试申请`word-wrap: break-word;`您的 div，它适用于我的 Chrome。

如果您想要一个更多的跨浏览器解决方案，您可以尝试`&#8203;`在您想要休息的点放置零宽度空格，就像这个答案建议的那样：[https](https://stackoverflow.com/a/764015/1046057) ://stackoverflow.com/a/764015/1046057 （假设您需要一个长字符串，就像你没有空格的那个）。

# jquery - 输入时带有自动完成功能的 Jquery 搜索

> ID：10552767
> 
> 赞同：4
> 
> 时间：2012-05-11T13:54:45.173
> 
> 标签：jquery, jquery-ui

我有一些工作正常的 JQuery。它加载所有自动完成值，点击它们后，它们加载执行所有搜索的 searchdata.php。这行得通。

我想不通的是，如果用户决定他们不想选择自动完成值并按回车键，我如何让它在点击时对搜索输入中的值执行 searchdata.php输入而不重新加载页面？我试过绑定和生活，但无法让它工作。

```
<script type="text/javascript">
$(document).ready(function() {

var availableTags = <?php echo json_encode($findrow);?>;

  $("#search_input").watermark("Begin Typing to Search");
  $('#searchresultdata').append(sendSelected);

    $("#search_input").autocomplete({
        source: availableTags,
        select: function(event, ui) {
          sendSelected(ui.item.value);
          }
        });

function sendSelected(_val){
    var search_input = _val;
    if (search_input =='') search_input ='*';
    var dataString = 'keyword='+search_input;

    if (search_input.length > 2 || search_input=='*') {
       $.ajax({
            type: "GET",
            url: "core/functions/searchdata.php",
            data: dataString,
            success: function(server_response) {
                $('#searchresultdata').empty();
                $('#searchresultdata').append(server_response);
                $('span#category_title').html(search_input);
            }
        });
    }
}
});
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T13:58:54.267

```
$("#search_input").keypress(function(e) {
  if(e.keyCode == 13)
     {
         e.preventDefault();
         sendSelected(this.value);
         $(this).autocomplete('close');
     }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:03:21.977

```
$("#search_input").on('keyup', function(event) {
  if(event.which == 13)  // event.which detect the code for keypress in jQuery
     {
         event.preventDefault();
         sendSelected(this.value);
     }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T14:00:25.467

您可以`event.preventDefault()`在操作上使用它并且不会提交页面，您只需要确保在需要时将其打开和关闭

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# database - 使用 C#：将多个值（不唯一）插入 SQL 数据库表中的字段（主键）？

> ID：10552770
> 
> 赞同：1
> 
> 时间：2012-05-11T13:54:51.630
> 
> 标签：database, c#-4.0, insert, sql-server-2008-r2

我在 SQL 数据库中有一个表，它有两个字段**随机**（主键和非空）和**计数**（身份递增 1）。我必须在 Random 字段中插入十亿条记录。我能够一次插入 1000 行，因为这是 SQL Insert 语句可以处理的最大值（在使用 ADO.NET 的 C# 控制台应用程序中）。

我试图插入的数据是随机的，但不是唯一的。所以，我得到了例外“违反主键......”。不是只删除重复值，而是删除所有 1000 行。

**是否可以通过仅删除重复值而不是插入语句中的所有记录（在我的情况下为 1000）来插入唯一值？**

我也尝试使用 DataTable 和 SQLBulkCopy 插入值但没有成功。

示例场景：TableA

随机计数

100 1

101 2

插入（随机）表A值（102），（103），（100），（104），（105），（101）

100 和 101 是重复值。有没有办法只删除这些值（100,101）并插入所有其他值（102,103,104,105）？（在我的程序中，所有值都因违反主键而被删除）

非常感谢您对此的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:04:56.717

您可以尝试使用 IGNORE_DUP_KEY 标志。从 Random 中删除 PrimaryKey 并添加一个 UNIQUE 约束，如下所示：

```
 ALTER TABLE dbo.TableA
   ADD CONSTRAINT UniqueRandomValue
   UNIQUE (Random) WITH (IGNORE_DUP_KEY = ON); 
```

[SQL Server - 存储过程 - 忽略异常](https://stackoverflow.com/questions/7978279/sql-server-stored-procedure-ignore-exception)

另一种选择是编写自己的逻辑来避免或处理冲突。我建议在这种情况下使用存储过程，以防止重复的数据库连接。发送一批数据作为参数，并在存储过程中一个一个地插入，忽略冲突。小心限制批量大小以避免连接超时。动态减小批量大小被证明对于从数据大小引起的超时中反弹很有用。

```
BEGIN TRY
INSERT INTO TableA(Random) VALUES(@val);
END TRY
BEGIN CATCH
END CATCH; 
```

# python - PYTHON 代码和书中的一课

> ID：10552772
> 
> 赞同：-5
> 
> 时间：2012-05-11T13:54:57.373
> 
> 标签：python, python-2.7

我正在阅读 zed shaw 的书“Learning python the hard way”。原谅我，但我是编码新手，我很难理解这一点。我似乎看不到 find_city 函数如何通过输入状态找出要返回的城市。带有“好吧注意”和“#这条线是最重要的！学习！是那些让我感到困惑的线。

```
cities = {'CA': 'San Francisco', 'MI': 'Detroit',
                 'FL': 'Jacksonville'}

cities['NY'] = 'New York'
cities['OR'] = 'Portland'

def find_city(themap, state):
    if state in themap:
        return themap[state]
    else:
        return "Not found."

# ok pay attention!
cities['_find'] = find_city

while True:
    print "State? (ENTER to quit)",
    state = raw_input("> ")

    if not state: break

    # this line is the most important ever! study!
    city_found = cities['_find'](cities, state)
    print city_found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:04:47.360

简要地：

*   `cities`被实例化为字典，并在此处插入一些键/值。键和值都是 CA -> San Francisco, MI -> Detroit 等的字符串。

*   定义了一个名为的函数`find_city`，它接受两个输入参数（`themap`和`state`）；

*   向`cities`字典中添加了另一个键/值，其中键是字符串“_find”，但是这一次，值是函数 find_city 而不是以前的字符串；

*   在`city_found = cities['_find'](cities, state)`您向字典询问与`cities`键“_find”关联的值的行中，即函数`find_city`。然后，调用此函数，字典本身作为第一个参数，stdin 读取的“状态”作为第二个参数。

如果它被写成这样，它会是一样的：

```
method = cities['_find']
city_found = method(cities, state) 
```

高温高压

# jasper-reports - 在碧玉报告中添加页面边框

> ID：10552778
> 
> 赞同：4
> 
> 时间：2012-05-11T13:55:03.740
> 
> 标签：jasper-reports

我浏览了一些关于“在碧玉报告中添加页面边框”的帖子，但帮助很大。有人请详细告诉我如何添加页面边框？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T05:34:49.210

我通过为我的报告添加背景来实现这一点，例如：

```
<background>
    <band height="802" splitType="Stretch">
        <rectangle>
            <reportElement key="rectangle-2" x="0" y="76" width="535" height="726"/>
            <graphicElement>
                <pen lineWidth="0.5" lineStyle="Solid"/>
            </graphicElement>
        </rectangle>
    </band>
</background> 
```

# android - Android android.database.StaleDataException

> ID：10552780
> 
> 赞同：1
> 
> 时间：2012-05-11T13:55:09.540
> 
> 标签：android, database, cursor

我已将我的设备更新为 Android ICS (4.0.3) 我有一个活动，其中包含一个列表视图，其中填充了从数据库中读取的数据。使用 ResourceCursorAdapter 的扩展将数据排列在列表视图中。

列表加载并显示在屏幕上后，我按下主屏幕以调出主屏幕。然后我从最近的应用程序中恢复了我的应用程序（长按主屏幕），突然我得到了以下异常：

```
05-10 15:49:17.925: E/AndroidRuntime(10721): Caused by: android.database.StaleDataException: Attempted to access a cursor after it has been closed.
05-10 15:49:17.925: E/AndroidRuntime(10721):    at android.database.BulkCursorToCursorAdaptor.throwIfCursorIsClosed(BulkCursorToCursorAdaptor.java:75)
05-10 15:49:17.925: E/AndroidRuntime(10721):    at android.database.BulkCursorToCursorAdaptor.requery(BulkCursorToCursorAdaptor.java:144)
05-10 15:49:17.925: E/AndroidRuntime(10721):    at android.database.CursorWrapper.requery(CursorWrapper.java:186)
05-10 15:49:17.925: E/AndroidRuntime(10721):    at android.app.Activity.performRestart(Activity.java:4505)
05-10 15:49:17.925: E/AndroidRuntime(10721):    at android.app.Activity.performResume(Activity.java:4531)
05-10 15:49:17.925: E/AndroidRuntime(10721):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2446) 
```

在我的案例中，我已经阅读了有关操作系统行为的信息，并且光标似乎无效。问题是，尽管我已经注册了一个 DataSetObserver，但从未调用过 onInvalidated 方法，并且在崩溃之前也没有调用任何 Activity 的方法（如 onResume、onRestart ）。代码甚至没有到达 Adapter 中的 bindView。

你能帮我解决这个问题吗？如果您需要，我可以提供更多信息和相关代码。

提前致谢

这是代码，如果它是一团糟，很抱歉，但我只是在微调之前让它工作：

```
public class CallLogsList extends Activity implements Runnable,
        OnItemClickListener {

    // ... various declaration here

    private Handler mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case CALLLOGS_LOAD_DONE:
                loadCurrCallLogsList(true);
                break;
        case SHOW_ALL_LOG:
            case SHOW_MISSED_LOG:
            case SHOW_OUTGOING_LOG:
            case SHOW_INCOMING_LOG:
                // - set the adapter
                if (null == mCad) {
                    // the first time the adapter need to be called
                    mCad = new CallLogsCursorAdapter(mContext, mDataCursor);
                    mCallLogsListView.setAdapter(mCad);
                } else {
                    mCad.changeCursor(mDataCursor);
                    mCad.notifyDataSetChanged();
                }
                break;
            } // end of switch ctrl structure
            return;
        } // end of method handleMessage

    }; // end of Handler object

    /**
     * The following inner class implements the custom adapter to contain the
     * call log entries as read from the database
 * 
     */
    class CallLogsCursorAdapter extends ResourceCursorAdapter {
        Cursor mCallLogCursor = null;
        CallLogDataSetObserver mLogDataObserver = null;

        /**
         * Class constructor
         * 
         * @param context
         * @param c
         */
        public CallLogsCursorAdapter(Context context, Cursor c) {
            super(context, R.layout.recent_calls_list_item, c);
            mLogDataObserver = new CallLogDataSetObserver();
            mCallLogCursor = c;
            mCallLogCursor.registerDataSetObserver(mLogDataObserver);
            return;
        } // end of class constructor

        /**
         * This method binds an existing view to the data pointed to by the
         * cursor
         */
        @Override
        public void bindView(View view, Context context, Cursor cursor) {
                  // ... bind data to the view here
        } // end of method bindView

        /**
         * This method inflates the new view from the specified resource Such
         * resource has been passed to the super class in the call at the parent
         * class constructor we did in this derived class
         */
        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {
            View view = super.newView(context, cursor, parent);
                    // ... create the view
            return view;
        } // end of method newView

        /**

        /**
         * The data set observer for the data used by this adapter
         */
        private class CallLogDataSetObserver extends DataSetObserver {

            @Override
            public void onChanged() {
                return;
            } // end of method onChanged

            @Override
            public void onInvalidated() {
                if( null != mCallLogCursor ) {
                                // TODO: Remove this call coz the UI can get stuck
                                // if the call log is too long. Just ask for a new         
                                // cursor asynchronously
                                mCallLogCursor.requery();
                             }
                return;
            } // end of method onInvalidated

        } // end of class inner class CallLogDataSetObserver

    } // end of class CallLogsCursorAdapter

    /**
     * This method is called the first time the activity is created
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        Log.d(THIS_FILE, "Enter onCreate");
        super.onCreate(savedInstanceState);
             // ... initialization code here
        loadCurrCallLogsList(false);
        return;
    } // end of method onCreate

    /**
     * This method loads the current communication list
     */
    private synchronized void loadCurrCallLogsList(final boolean fromPullDown) {
        if (false == fromPullDown) {
            showLoadingView(true);
        }
        // start the loader thread
        Thread loader = new Thread(this);
        loader.start();
        return;
    } // end of method loadCurrCommunicationsList

    /**
     * This method is called when the activity is going to be destroyed
     */
    @Override
    protected void onDestroy() {
        if (null != database) database.close();
        database = null;
        if (mDataCursor != null)  mDataCursor.close();
        mDataCursor = null;
        // call the super class onDestroy method
        super.onDestroy();
    }

    /**
     * This method create the menu for the activity
     * 
     * @param menu
     */
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.in_call_log_list_menu, menu);
        return super.onCreateOptionsMenu(menu);
    } // end of method onCreateOptionsMenu

    /**
     * This method is called when the menu is going to be shown
     */
    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        if (false == CordlessApplication.getInstance().canUseJungoApi()) {
            menu.findItem(R.id.menu_item_edit).setEnabled(false);
        } else {
            // enable the edit item in the menu if the list is not empty
            menu.findItem(R.id.menu_item_edit).setEnabled(
                    null != mCad && !mCad.isEmpty());
        }
        return super.onPrepareOptionsMenu(menu);
    } // end of method onPrepareOptionsMenu

    /**
     * This method is called when the user click on an item in the menu
     * 
     * @param item
     */
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        item.setChecked(true);
        // Handle item selection
        switch (item.getItemId()) {
        case R.id.sub_menu_item_all:
            mCurrentLogView = CURR_LIST_ALL_LOG;
            mListHeader.setText(R.string.all_calls_log_header_txt);
            loadCurrCallLogsList(false);
            break;
        case R.id.sub_menu_item_in_only:
            mCurrentLogView = CURR_LIST_INCOMING_LOG;
            mListHeader.setText(R.string.received_calls_log_header_txt);
            loadCurrCallLogsList(false);
            break;
        case R.id.sub_menu_item_out_only:
            mCurrentLogView = CURR_LIST_OUTGOING_LOG;
            mListHeader.setText(R.string.dialled_calls_log_header_txt);
            loadCurrCallLogsList(false);
            break;
        case R.id.sub_menu_item_miss_only:
            mCurrentLogView = CURR_LIST_MISSED_LOG;
            mListHeader.setText(R.string.missed_calls_log_header_txt);
            loadCurrCallLogsList(false);
            break;
        case R.id.menu_item_edit:
            startModifyActivity();
            break;
           default:
            return super.onOptionsItemSelected(item);
        }

        return (true);
    } // end of method onOptionsItemSelected

    /**
     * This method is called when the user comes back to this activity from a
     * sub activity
     */
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (Activity.RESULT_OK != resultCode)
            return;
        switch (requestCode) {
        case DialingUtils.REQ_CODE_ADD_NEW_CONTACT: // pass through
        case DialingUtils.REQ_CODE_UPDATE_EXISTING_CONTACT:
            // refresh the call log list
            mCad.getCursor().requery();
            mCad.notifyDataSetChanged();
            break;
        case DialingUtils.REQ_CODE_PICK_CONTACT:
            DialingUtils.updateExistingContact(this, data.getData(),
                    mCallerInfo.mPhoneNumber, true);
            break;
        }
    } // end of method onActivityResult

    /**

    /**
     * This method load a filter version of the call logs
     * 
     * @param filter
     */
    private void loadFilteredData(final int filter) {
        if( null != mDataCursor ) mDataCursor.close();
        mDataCursor = null;
        // see whether it is needed to recover the database
        if (null == database) {
            database = new DBAdapter(mContext);
            database.open();
        }
        // read all the call logs from the database
        mDataCursor = database.getFilteredCallLogs(filter);
        return;
    } // end of method loadFilterData

    /**
     * This method is called when the user press a key on the device We use this
     * method to handle the press on the back key
     */
    @Override

    /**
     * This method is called in order to load the data from the 
     * local database in a separated thread
     */
    @Override
    public synchronized void run() {
        Looper.prepare();
        synchronized (MyConstants.mCallLogsMutex) {
            switch (mCurrentLogView) {
            case CURR_LIST_ALL_LOG:
                loadFilteredData(0);
                mHandler.sendEmptyMessage(SHOW_ALL_LOG);
                break;
            case CURR_LIST_MISSED_LOG:
                loadFilteredData(CallLog.Calls.MISSED_TYPE);
                mHandler.sendEmptyMessage(SHOW_MISSED_LOG);
                break;
            case CURR_LIST_OUTGOING_LOG:
                loadFilteredData(CallLog.Calls.OUTGOING_TYPE);
                mHandler.sendEmptyMessage(SHOW_OUTGOING_LOG);
                break;
            case CURR_LIST_INCOMING_LOG:
                loadFilteredData(CallLog.Calls.INCOMING_TYPE);
                mHandler.sendEmptyMessage(SHOW_INCOMING_LOG);
                break;
            }
        } // end of synch block
    } // end of method run

} // end of class CallLogsList 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T14:50:09.313

我找到了原因，解决方案如下：当您必须处理光标或数据库时，请避免使用 Activity.managedQuery(...) 和 Activity.startManagingCursor(...) 。文档说它们确实已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T14:07:33.297

而不是使用`Activity.ManagedQuery()`使用`Context.Query()`

```
string[] projection = new string[] { CalendarContract.Calendars.InterfaceConsts.Id };
        string selection = CalendarContract.Calendars.InterfaceConsts.Id + "=?";
        string[] selectionArgs =new string[]{Constants.CALENDAR_ID.ToString()};
        var cursor = m_ContentResolver.Query(calendarUri, projection, selection, selectionArgs, null); 
```

来自 Xamarin 应用程序的示例，日历操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T07:05:34.123

**采用**

```
Activity.getContentResolver().query() 
```

**代替**

```
Activity.managedQuery() 
```

# html - CSS：如何将边距应用于带有浮动的容器？

> ID：10552783
> 
> 赞同：1
> 
> 时间：2012-05-11T13:55:14.800
> 
> 标签：html, css, css-float

这是我的老问题，我从来没有找到真正的解决方案，所以我最后只是寻求帮助。

**HTML**

```
<section class="cols-2">
        <div class="wrapper">
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos
        </div>

        <div class="wrapper">
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos
        </div>
</section>
<section … 
```

**CSS**

```
.cols-2 .wrapper {
        margin:0;
        float: left;
        width: 50%;
    } 
```

所以我有两列浮动在我的`section.cols-2`. 在这种情况下，`section`没有自动高度！

例如，如果我想要另一个`section`在这个之后立即带有浮动，我不能在两个`section`s 之间应用边距。

我不想应用一个`height`值，我只需要两个`section`s 彼此分开特定的边距。

看我的例子：http: [//jsfiddle.net/kWtev/](http://jsfiddle.net/kWtev/)

感谢您的提示和技巧，我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:56:44.353

你需要清除浮动。这不仅是您古老的“问题”，也是每个网站建设者的问题。但幸运的是，古老的问题有古老的解决方案。

[互联网](http://colinaarts.com/articles/float-containment/)[上](http://www.dave-woods.co.uk/index.php/float-and-clear-a-comparison-of-css-clearing-techniques/)有[几种清算技术](http://robertnyman.com/2007/04/12/how-to-clear-css-floats-without-extra-markup-different-techniques-explained/) ，最常见的一种是在容器上使用。清除浮动的[“神奇”副作用之一。](http://colinaarts.com/articles/the-magic-of-overflow-hidden/) `overflow: hidden`[`overflow: hidden`](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)

```
.cols-2 { overflow: hidden; } 
```

[jsFiddle 演示](http://jsfiddle.net/kWtev/15/)

* * *

当然你可以简单地使用[`clear: left`](https://developer.mozilla.org/en/CSS/clear)，容器之间会有空间，但最后一个仍然不会有非零高度。

```
.cols-2 { clear: left; } 
```

一些清除技术通过插入另一个已应用的元素（如空 div 或伪元素）来解决此`clear: left`问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:01:14.487

`.cols-2 { overflow: auto; }`将解决您由浮动元素引起的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:17:16.503

最好的解决方案是对父容器使用“clearfix”。

```
.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { zoom: 1; }

<section class="cols-2 clearfix">
        <div class="wrapper">
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos
        </div>

        <div class="wrapper">
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos
        </div>
</section> 
```

您可以对任何包含浮动元素的容器使用 clearfix。您需要将 clearfix css 放在 css 文件的最后。

只需添加一个类，您就完成了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:04:14.827

你能检查一下这个[DEMO](http://jsfiddle.net/kWtev/14/)吗，它可能对你有帮助

```
.cols-2 {
    margin:20px 0;
    overflow:auto;    
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-12T00:02:58.263

你有没有想过使用：

```
-webkit-column-count: 2; 
-webkit-column-rule: 1px solid black;
-webkit-column-gap: 20px; 
```

当然`-webkit-`前缀必须替换为其他前缀才能更大兼容...

如果您期望的行为允许这样做...

[例子](http://jsfiddle.net/Christophe/7sauu/)

# windows-phone-7 - 如何判断耳机是否插入Windows phone Device？

> ID：10552784
> 
> 赞同：0
> 
> 时间：2012-05-11T13:55:15.000
> 
> 标签：windows-phone-7

好。关于我的 Windows 手机应用程序。如何判断耳机是否插入？

我没有在 Windows phone SDK 中找到任何 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:04:15.950

我不确定您当前是否可以访问此信息，因为 API 似乎不会公开此设备信息。

希望 Windows Phone 8 'Apollo' 版本中能提供更多硬件信息。已经确认您可以在下一个版本中访问较低级别的非托管 API 调用（想想 pInvoke）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:31:45.963

没有 API 可以做到这一点，但在我的脑海中，可能有一个你可能想要测试的“hacky”解决方法。我没试过，但耳机也可以作为收音机的天线。因此，您可以尝试测量[FMRadio.SignalStrength](http://msdn.microsoft.com/en-us/library/microsoft.devices.radio.fmradio.signalstrength%28VS.92%29.aspx)属性并查看它是否低于某个阈值（您必须使用和不使用耳机进行测试以确定它的阈值）。如果接收信号非常低，则可能是耳机未连接。它不会是完美的，但可能对你有用。

# java - StringBuffer 数组到字符串数组 - Java

> ID：10552790
> 
> 赞同：-2
> 
> 时间：2012-05-11T13:55:30.353
> 
> 标签：java, arrays, string, sorting, stringbuffer

我需要将 StringBuffer Array 转换为 String Array 进行排序。Java中有什么方法吗？

下面是我的代码，我试图按字母顺序对值（input1）进行排序，其中包含作为大写的第一个字母并忽略其他值。

```
import java.util.*;
public class IPLMatch
{
    public static void main(String args[])
    {

        int input1 = 4;
        String input2[] = {"One","two","Three","foUr"}, output[];
        StringBuffer[] temp = new StringBuffer[input1];
        int j = 0, k = 0;
        for(int i = 0; i < input1; i++)
        {
            boolean isUpperCase = Character.isUpperCase(input2[i].charAt(0));
            if(isUpperCase)
            {
                temp[j++] = new StringBuffer(input2[i]);
            }
        }
                //I need convert my stringbuffer array (temp) to String array for sorting
        Arrays.sort(temp); 
        System.out.print("{");
        for(int i = 0; i < temp.length; i++)
        {
            System.out.print( temp[i]+ ",");
        }
        System.out.print("\b}");
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T13:57:43.567

我认为没有内置方法。但是，很容易写一个：

```
public static String[] toStringArr(StringBuffer sb[]) {
    if (sb == null) return null;
    String str[] = new String[sb.length];
    for (int i = 0; i < sb.length; i++) {
        if (sb[i] != null) {
            str[i] = sb[i].toString();
        }
    }
    return str;
} 
```

或者，如果您想编写一个通用方法：

```
public static<T> String[] toStringArr(T arr[]) {
    if (arr == null) return null;
    String ret[] = new String[arr.length];
    for (int i = 0; i < arr.length; i++) {
        if (arr[i] != null) {
            ret[i] = arr[i].toString();
        }
    }
    return ret;
} 
```

这需要任何对象数组，适用`toString()`于每个元素，并返回结果字符串数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:02:28.593

```
final String[] temp = {"One","two","Three","foUr"};
final List<String> out = new ArrayList<String>();
for (String s : temp) if (Character.isUpperCase(s.charAt(0))) out.add(s);
final String[] outAry = out.toArray(new String[out.size()]);
Arrays.sort(outAry);
System.out.println(Arrays.toString(outAry)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:58:35.843

不可以。没有可用于将一种类型的 Array 转换为另一种类型的 Array 的方法。您将需要遍历第一个 StringBuffers 数组，并将每个数组依次转换为相同大小的新数组中的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:58:48.903

怎么样：

```
String[] str = new String[stringBufferArray.length];
for (int i = 0; i < stringBufferArray.length; i++)
  str[i] = stringBufferArray[i].toString() 
```

# eclipse - 使用 Tomcat 和 JSP 文件不会编译

> ID：10552794
> 
> 赞同：-1
> 
> 时间：2012-05-11T13:55:54.923
> 
> 标签：eclipse, jsp, tomcat

您好，我正在使用 Eclipse Indigo 并尝试运行 Tomcat 4.1 版。出于某种原因，Tomcat 不会编译我的 JSP 文件，我完全不知道为什么它们不会编译。我已经让我的同事看过它，但到目前为止没有任何帮助。

我想知道是否有人知道我应该查看哪些设置以及如何更改它以便取得一些进展？感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:59:31.840

Tomcat 4.1 确实是一个非常旧的版本。当前生产的是 Tomcat 7。我建议立即升级。

[http://tomcat.apache.org/whichversion.html](http://tomcat.apache.org/whichversion.html)

您尝试在哪个 JVM 版本下运行？

我的第一个猜测是您的 JSP 与 Tomcat 支持的 servlet/JSP 规范版本不匹配。同步 JAR 和 XML 配置以匹配。

这将有助于提供堆栈跟踪、错误消息，因此比“不会编译”更具体的东西。

# iphone - 在旋转 iPhone 时修改 CABasicAnimation

> ID：10552801
> 
> 赞同：3
> 
> 时间：2012-05-11T13:57:15.883
> 
> 标签：iphone, ios, animation, layer, cabasicanimation

我有一个使用 CABasicAnimation 旋转的 uiimage。当我获得指南针更新时，我通过时间偏移更改/更新图像起点。

这很好用，但是当我从指南针获取更新并删除旧动画时，它会跳回到开始位置，然后再移动到新的开始位置。这会导致闪烁效果。是否可以同时删除和添加动画或以某种方式防止这种情况发生？

到目前为止，我的代码如下。

```
[self.waveImage.layer RemoveAllAnimations];

CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
animation.fromValue = [NSNumber numberWithFloat:0.0];
animation.toValue = [NSNumber numberWithFloat:2.0 * M_PI];
animation.duration = 1.0;
animation.repeatCount = HUGE_VALF;    // Repeat forever           
animation.speed = 1.0/duration;
animation.timeOffset = startingPhase;
animation.fillMode = kCAFillModeForwards;

[self.waveImageView.layer addAnimation:animation forKey:@"transform.rotation.z"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:37:18.963

尝试这个。

*   摆脱 fromValue。当你不指定 fromValue 时，它​​使用动画的当前值

    删除时间阶段。您想从一开始就为新更改设置动画。timePhase 将导致它改变你的动画。

    不要使用重复计数。这将导致动画从开始到结束，然后快速返回并重复。

    添加动画.removedOnCompletion = NO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:02:33.657

你可以在这里详细查看

[https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html)

# bash - 如何创建文件中每个单词的频率列表？

> ID：10552803
> 
> 赞同：47
> 
> 时间：2012-05-11T13:57:30.610
> 
> 标签：bash, file-io, sed, grep

我有一个这样的文件：

```
This is a file with many words.
Some of the words appear more than once.
Some of the words only appear one time. 
```

我想生成一个两列的列表。第一列显示出现的单词，第二列显示它们出现的频率，例如：

```
this@1
is@1
a@1
file@1
with@1
many@1
words3
some@2
of@2
the@2
only@1
appear@2
more@1
than@1
one@1
once@1
time@1 
```

*   为了使这项工作更简单，在处理列表之前，我将删除所有标点符号，并将所有文本更改为小写字母。
*   除非有一个简单的解决方案，`words`并且`word`可以算作两个单独的单词。

到目前为止，我有这个：

```
sed -i "s/ /\n/g" ./file1.txt # put all words on a new line
while read line
do
     count="$(grep -c $line file1.txt)"
     echo $line"@"$count >> file2.txt # add word and frequency to file
done < ./file1.txt
sort -u -d # remove duplicate lines 
```

出于某种原因，这仅在每个单词后显示“0”。

如何生成文件中出现的每个单词的列表以及频率信息？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-11T14:05:35.470

不是`sed`和`grep`, 但是`tr`, `sort`, `uniq`, 和`awk`:

```
% (tr ' ' '\n' | sort | uniq -c | awk '{print $2"@"$1}') <<EOF
This is a file with many words.
Some of the words appear more than once.
Some of the words only appear one time.
EOF

a@1
appear@2
file@1
is@1
many@1
more@1
of@2
once.@1
one@1
only@1
Some@2
than@1
the@2
This@1
time.@1
with@1
words@2
words.@1 
```

在大多数情况下，您还希望删除数字和标点符号，将所有内容转换为小写（否则“THE”、“The”和“the”将分别计算）并禁止输入零长度单词。对于 ASCII 文本，您可以使用修改后的命令完成所有这些操作：

```
sed -e  's/[^A-Za-z]/ /g' text.txt | tr 'A-Z' 'a-z' | tr ' ' '\n' | grep -v '^$'| sort | uniq -c | sort -rn 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-10-02T22:37:17.390

**uniq -c**已经做了你想要的，只需对输入进行排序：

```
echo 'a s d s d a s d s a a d d s a s d d s a' | tr ' ' '\n' | sort | uniq -c 
```

输出：

```
 6 a
  7 d
  7 s 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-11-26T12:21:17.493

您可以为此使用 tr，只需运行

```
tr ' ' '\12' <NAME_OF_FILE| sort | uniq -c | sort -nr > result.txt 
```

城市名称文本文件的示例输出：

```
3026 Toronto
2006 Montréal
1117 Edmonton
1048 Calgary
905 Ottawa
724 Winnipeg
673 Vancouver
495 Brampton
489 Mississauga
482 London
467 Hamilton 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-13T15:54:45.757

输入文件的内容

```
$ cat inputFile.txt
This is a file with many words.
Some of the words appear more than once.
Some of the words only appear one time. 
```

使用`sed | sort | uniq`

```
$ sed 's/\.//g;s/\(.*\)/\L\1/;s/\ /\n/g' inputFile.txt | sort | uniq -c
      1 a
      2 appear
      1 file
      1 is
      1 many
      1 more
      2 of
      1 once
      1 one
      1 only
      2 some
      1 than
      2 the
      1 this
      1 time
      1 with
      3 words 
```

`uniq -ic`将计数并忽略大小写，但结果列表将具有`This`而不是`this`.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-12-15T22:58:00.023

## 让我们使用 AWK！

此函数按降序列出所提供文件中每个单词出现的频率：

```
function wordfrequency() {
  awk '
     BEGIN { FS="[^a-zA-Z]+" } {
         for (i=1; i<=NF; i++) {
             word = tolower($i)
             words[word]++
         }
     }
     END {
         for (w in words)
              printf("%3d %s\n", words[w], w)
     } ' | sort -rn
} 
```

您可以像这样在您的文件中调用它：

```
$ cat your_file.txt | wordfrequency 
```

* * *

*资料来源：[AWK-ward Ruby](http://tomayko.com/writings/awkward-ruby)*

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-11T14:49:30.217

这可能对您有用：

```
tr '[:upper:]' '[:lower:]' <file |
tr -d '[:punct:]' |
tr -s ' ' '\n' | 
sort |
uniq -c |
sed 's/ *\([0-9]*\) \(.*\)/\2@\1/' 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-05-21T07:41:29.423

让我们用 Python 3 来做吧！

```
"""Counts the frequency of each word in the given text; words are defined as
entities separated by whitespaces; punctuations and other symbols are ignored;
case-insensitive; input can be passed through stdin or through a file specified
as an argument; prints highest frequency words first"""

# Case-insensitive
# Ignore punctuations `~!@#$%^&*()_-+={}[]\|:;"'<>,.?/

import sys

# Find if input is being given through stdin or from a file
lines = None
if len(sys.argv) == 1:
    lines = sys.stdin
else:
    lines = open(sys.argv[1])

D = {}
for line in lines:
    for word in line.split():
        word = ''.join(list(filter(
            lambda ch: ch not in "`~!@#$%^&*()_-+={}[]\\|:;\"'<>,.?/",
            word)))
        word = word.lower()
        if word in D:
            D[word] += 1
        else:
            D[word] = 1

for word in sorted(D, key=D.get, reverse=True):
    print(word + ' ' + str(D[word])) 
```

让我们将此脚本命名为“frequency.py”并在“~/.bash_aliases”中添加一行：

```
alias freq="python3 /path/to/frequency.py" 
```

现在要在文件“content.txt”中查找频率词，您可以：

```
freq content.txt 
```

您还可以将输出通过管道传递给它：

```
cat content.txt | freq 
```

甚至分析来自多个文件的文本：

```
cat content.txt story.txt article.txt | freq 
```

* * *

如果您使用的是 Python 2，只需替换

*   `''.join(list(filter(args...)))`和`filter(args...)`
*   `python3`和`python`
*   `print(whatever)`和`print whatever`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-12T01:49:08.220

排序需要 GNU AWK ( `gawk`)。如果您有另一个没有 AWK 的 AWK `asort()`，则可以轻松对其进行调整，然后通过管道传输到`sort`.

```
awk '{gsub(/\./, ""); for (i = 1; i <= NF; i++) {w = tolower($i); count[w]++; words[w] = w}} END {qty = asort(words); for (w = 1; w <= qty; w++) print words[w] "@" count[words[w]]}' inputfile 
```

分成多行：

```
awk '{
    gsub(/\./, ""); 
    for (i = 1; i <= NF; i++) {
        w = tolower($i); 
        count[w]++; 
        words[w] = w
    }
} 
END {
    qty = asort(words); 
    for (w = 1; w <= qty; w++)
        print words[w] "@" count[words[w]]
}' inputfile 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-15T09:25:11.620

如果我的 file.txt 中有以下文本。

```
This is line number one
This is Line Number Tow
this is Line Number tow 
```

我可以使用以下 cmd 找到每个单词的频率。

```
 cat file.txt | tr ' ' '\n' | sort | uniq -c 
```

输出 ：

```
 3 is
  1 line
  2 Line
  1 number
  2 Number
  1 one
  1 this
  2 This
  1 tow
  1 Tow 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-08-05T12:29:50.907

这是一个更复杂的任务。我们至少需要考虑以下几点：

*   删除标点符号；天空不同于天空。还是天空？
*   地球与地球不同，上帝与上帝不同，月亮与月亮不同，但 The 和 the 被认为是相同的。因此，是否将单词小写是值得怀疑的。
*   我们必须考虑 BOM 字符

```
$ file the-king-james-bible.txt 
the-king-james-bible.txt: UTF-8 Unicode (with BOM) text 
```

BOM 是文件中的第一个元字符。如果不删除，它可能会错误地影响一个单词。

以下是使用 AWK 的解决方案。

```
 {  

        if (NR == 1) { 
            sub(/^\xef\xbb\xbf/,"")
        }

        gsub(/[,;!()*:?.]*/, "")

        for (i = 1; i <= NF; i++) {

            if ($i ~ /^[0-9]/) { 
                continue
            }

            w = $i
            words[w]++
        }
    } 

    END {

        for (idx in words) {

            print idx, words[idx]
        }
    } 
```

它删除 BOM 字符并替换标点符号。它不会小写单词。此外，由于该程序用于计算圣经的单词，它会跳过所有经文（if 条件与 continue）。

`$ awk -f word_freq.awk the-king-james-bible.txt > bible_words.txt`

我们运行程序并将输出写入文件。

```
$ sort -nr -k 2 bible_words.txt | head
the 62103
and 38848
of 34478
to 13400
And 12846
that 12576
in 12331
shall 9760
he 9665
unto 8942 
```

使用`sort`和`head`，我们可以找到圣经中最常用的十个单词。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-18T14:23:35.927

```
#!/usr/bin/env bash

declare -A map 
words="$1"

[[ -f $1 ]] || { echo "usage: $(basename $0 wordfile)"; exit 1 ;}

while read line; do 
  for word in $line; do 
    ((map[$word]++))
  done; 
done < <(cat $words )

for key in ${!map[@]}; do 
  echo "the word $key appears ${map[$key]} times"
done|sort -nr -k5 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-02-20T14:42:51.357

```
 awk '{ 
       BEGIN{word[""]=0;}
    {
    for (el =1 ; el <= NF ; ++el) {word[$el]++ }
    }
 END {
 for (i in word) {
        if (i !="") 
           {
              print word[i],i;
           }
                 }
 }' file.txt | sort -nr 
```

# c# - 创建多个表单实例

> ID：10552804
> 
> 赞同：0
> 
> 时间：2012-05-11T13:57:35.233
> 
> 标签：c#, .net, winforms

我正在尝试创建多个表单实例。例如，我有一个 form1 和一个 form2，而 form1 中有一个 ListView。

当单击 ListView 中的项目时，它将创建一个新的 form2 实例。

```
Form2 listview1.FocusedItem.SubItems[0].Text = new Form2();
listview1.FocusedItem.SubItems[0].Text.Show(); 
```

但是 C# 不允许我这样做，知道吗？（是的..我有错误：D）

好的，这个想法是..假设我想要 3 个 form2 实例，

`Form2 f21 = new Form2();`

`Form2 f22 = new Form2();`

`Form2 f23 = new Form2();`

现在我将有 3 个 form2，但是如果我不知道我可以创建多少个 form[s] 怎么办？（动态创建列表视图中项目的表单库）

实际上，这可能不是正确的方法......任何解决方案都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:00:52.877

`listview1.FocusedItem.SubItems[0].Text`是一个`string`属性，*你不能分配* `System.Windows.Forms.Form`给`string`.

不是很清楚你要在这里实现什么，但是，**可能是**这样的

```
new Form2().Show(); 
```

单击该项目对您来说就足够了。

如果这不是您要的，请澄清。

**编辑**

要管理任意数量的表单，您可以执行以下操作：

```
//somewhere in the code a global collection
var formsCollection = new List<Form>(); 
```

并点击项目：

```
formsCollection.Add(new Form2());
formsCollection[formsCollection.Count-1].Show(); 
```

另一件事**可能是**您需要在集合中找到一些特定的形式（出于某种原因）。您可以为 Form2 分配一些特殊属性，即一些唯一标识符，以便之后能够根据要求找到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:01:18.227

我认为不允许这样做意味着您遇到了某种错误。是语法错误吗？那将是我的猜测。

另外，您为什么要为每次新​​点击创建一个新表单？我建议重新使用现有对象或适当销毁/取消引用旧对象。

我认为线路有问题

```
Form2 listview1.FocusedItem.SubItems[0].Text = new Form2(); 
```

您不能将新形式分配给文本属性，此外，在这种语句中，您应该为变量提供名称，而不是其他地方的引用。你的意思是这样的：

```
Form2 f2 = new Form2(listview1.FocusedItem.SubItems[0].Text);
f2.Show(); 
```

# batch-file - 在批处理文件中定义和使用变量

> ID：10552812
> 
> 赞同：531
> 
> 时间：2012-05-11T13:57:52.040
> 
> 标签：batch-file, cmd, environment-variables

我正在尝试在批处理文件中定义和使用变量。看起来应该很简单：

```
@echo off

set location = "bob"
echo We're working with "%location%" 
```

我得到的输出如下：

```
We're working with "" 
```

这里发生了什么？为什么我的变量没有被回显？

* * *

## 回答 #1

> 赞同：652
> 
> 时间：2012-05-11T14:03:17.950

前面的空格`=`被解释为名称的一部分，它后面的空格（以及引号）被解释为值的一部分。所以你创建的变量可以用`%location %`. 如果这不是您想要的，请删除定义中的额外空格。

* * *

## 回答 #2

> 赞同：298
> 
> 时间：2012-05-11T14:04:12.613

空间很重要。您创建了一个名为的变量`'location '` ，其值为
`' "bob"'`。*注意 - 添加了封闭的单引号以显示空间的位置。*

如果你想在你的值中加上引号，那么你的代码应该看起来像

```
set location="bob" 
```

如果你不想要引号，那么你的代码应该看起来像

```
set location=bob 
```

或者更好

```
set "location=bob" 
```

最后一种语法可以防止无意的尾随空格进入该值，并且还可以防止诸如`&` `|`等之类的特殊字符。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-15T20:53:21.067

输入`location.bat`

```
@echo off
cls

set /p "location"="bob"
echo We're working with %location%
pause 
```

输出

```
We're working with bob 
```

（你犯的错误：`space`和`" "`）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-11-09T17:15:30.210

还考虑使用[`SETX`](https://ss64.com/nt/setx.html)- 它将在用户或机器（所有用户可用）级别上设置变量，尽管该变量将在下次打开 cmd.exe 时可用，因此它通常可以与`SET`：

```
::setting variable for the current user
if not defined My_Var (
  set "My_Var=My_Value"
  setx My_Var My_Value
)

::setting machine defined variable
if not defined Global_Var (
  set "Global_Var=Global_Value"
  SetX Global_Var Global_Value /m
) 
```

您还可以直接编辑注册表值：

> 用户变量：HKEY_CURRENT_USER\Environment

> 系统变量：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment

这将允许避免 SET 和 SETX 的一些限制，例如`=`名称中包含的变量。

### 第三方编辑

> SETX.exe 永久设置环境变量，
> 
> SETX 可用于为机器 (HKLM) 或当前登录的用户 (HKCU) 设置环境变量：

选项`/m`

```
 /m
       Set the variable in the system environment HKLM.
       (The default is the local environment HKCU) 
```

另一个例子

```
::setting variable for the current user
if not defined JAVAJDK (
  set "JAVAJDK=C:\Program Files\Java\jdk-13\bin"
  setx JAVAJDK "C:\Program Files\Java\jdk-13\bin"
) 
```

在 command.exe 中，您可以像这样使用变量`cd %JAVAJDK%`。

# antlr - 语法谓词不起作用

> ID：10552814
> 
> 赞同：1
> 
> 时间：2012-05-11T13:57:59.870
> 
> 标签：antlr, predicate, antlr3

第一条规则永远不会奏效。它应该处理类似“ID1.ID2.ID3.ID4.ID5”的东西。但其他规则按预期工作。它有什么问题？

```
grammar testInt;

data_source:
     (ID '.' ID '.' ID ('.' ID)+)=>program_ref
    | (ID '.' ID '.' ID)=>var_ref
    | (ID '.' ID)=>program_ref
    | resource;

program_ref: ID ('.' ID)+;
var_ref:    ID '.' ID '.' ID;
resource:   ID;

ID:  (LETTER | ('_'(LETTER | DIGIT))) ('_'? (LETTER | DIGIT))*;
WSFULL:(' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};

fragment LETTER: (('a'..'z') | ('A'..'Z'));
fragment DIGIT: '0'..'9'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:59:41.373

`var_ref`看起来 ANTLR之前首先尝试匹配，`program_ref`因为后者可能仅匹配 2匹配 3`ID`的位置`var_ref`，并且解析器贪婪地匹配令牌。

我认为这只是一个虚拟（您的一部分）语法：您是否正在尝试解决现实世界的问题？

# sql - sql中的速记IF语句

> ID：10552817
> 
> 赞同：5
> 
> 时间：2012-05-11T13:58:17.480
> 
> 标签：sql, sql-server

目前我有一个存储过程，它需要一个字符串

```
@vari as varchar(30)
if @vari is null 
    SELECT * FROM TABLE 
else 
    SELECT * FROM TABLE WHERE col = @vari
endif 
```

有什么方法可以内联 if 语句，从而不会因为 1 个参数而声明 2 个选择？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T14:00:15.023

```
SELECT * FROM TABLE WHERE (@vari is null or col = @vari) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:04:53.220

假设`col`永远不会为 NULL，您可以这样做：

```
select *
from table
where col = isnull(@vari, col) 
```

# sql - 对具有包含 2 列的主键的表的外键引用

> ID：10552821
> 
> 赞同：2
> 
> 时间：2012-05-11T13:58:27.047
> 
> 标签：sql, oracle

您可以在 SQL 中将一个外键设置为另一个具有 2 列主键的表，该表仅引用 Oracle 的一个主键列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:07:05.513

PK-FK 关系的规则说，没有列必须相等，数据类型也应该相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:54:38.907

外键必须引用整个主键或其他唯一约束。如果父表需要两列来唯一标识一条记录，则其从属表必须在其结构中包含这两列。

通过使用代理或合成主键来避免复合外键的扩散是很常见的，通常使用序列生成。外键引用单列代理键。

复合业务键仍应在具有唯一约束的父表中强制执行。

有时复合主键包含一个也是唯一的列。例如，这是一种执行弧的方式，（超类型和子类型关系）。因此，PERSONS 表将 (PERSON_ID) 作为主键，将 (PERSON_ID, PERSON_TYPE) 作为唯一键。在这种情况下，依赖表可能会引用 (PERSON_ID) 或 (PERSON_ID, PERSON_TYPE)，具体取决于特定关系。

# regex - 嵌套组中的递归正则表达式

> ID：10552826
> 
> 赞同：0
> 
> 时间：2012-05-11T13:58:41.260
> 
> 标签：regex

我必须使用正则表达式解析一些字符串......但我遇到了这两个：

> /: 13% 已使用 (1192/9919 MB) /var: 81% 已使用 (22881/29758 MB) /opt: 2% 已使用 (151/9919 MB) : (c,w) = (95,90)

和

> C: 65% 已使用 (37382/57105 MB) D: 11% 已使用 (6551/57205 MB) : (c,w) = (95,90)

它们是相同的，除了出现的次数。无论该组出现多少次，有什么方法可以解析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:52:06.657

好吧，首先您可以将字符串分成两半（[http://rubular.com/r/FB4WqFDSvJ](http://rubular.com/r/FB4WqFDSvJ)）：

```
\s*((?:[^:]+: \d\d?% used \(\d+\/\d+ \w+\) )+?): (\(c,w\) = \(\d+,\d+\))\s* 
```

然后，您可以在循环中一次识别并删除一件（[http://rubular.com/r/IqEfL0NFxv](http://rubular.com/r/IqEfL0NFxv)）：

```
\s*([^:]+: \d\d?% used \(\d+\/\d+ \w+\))\s* 
```

# xml - Perl XML::Twig 用另一个 XML 更新 XML 文件

> ID：10552833
> 
> 赞同：1
> 
> 时间：2012-05-11T13:58:57.670
> 
> 标签：xml, perl, xml-twig

这是我的问题，我需要使用另一个 xml 更新一个 xml 文件

数据.xml：

```
<?xml version='1.0'?>
<employees>
<employee>
    <employeenumber>V0000001</employeenumber>
    <name>John Doe</name>
    <age>43</age>
    <sex>M</sex>
    <department>Operations</department>
</employee>
<employee>
    <employeenumber>V0000002</employeenumber>
    <name>Jane Doe</name>
    <age>35</age>
    <sex>F</sex>
    <department>Operations</department>
</employee>
<employee>
    <employeenumber>V0000003</employeenumber>
    <name>Jane Doe</name>
    <age>35</age>
    <sex>F</sex>
    <department>Operations</department>
</employee>
<employee>
    <employeenumber>V0000004</employeenumber>
    <name>Jane Doe</name>
    <age>35</age>
    <sex>F</sex>
    <department>Operations</department>
</employee>
<employee>
    <employeenumber>V0000005</employeenumber>
    <name>Jane Doe</name>
    <age>35</age>
    <sex>F</sex>
    <department>Operations</department>
</employee>
</employees> 
```

数据2.xml：

```
<?xml version='1.0'?>
<employees>
<employee>
    <employeenumber>V0000002</employeenumber>
    <name>Jane Doe</name>
    <age>34</age>
    <sex>F</sex>
    <department>Management</department>
</employee>
<employee>
    <employeenumber>V0000004</employeenumber>
    <name>Jane Doe</name>
    <age>34</age>
    <sex>F</sex>
    <department>Sales</department>
</employee>
</employees> 
```

所以我需要用 Data2.xml 中的信息更新 Data.xml。

我已经编写了这段代码，它可以工作，但需要 6 小时才能执行，Data.xml 相当大（250mo）。

```
use XML::Twig;
my %soi = ();
open(FILE,">out.txt");

my $diff= XML::Twig->new( pretty_print => 'indented',
                        twig_handlers => 
                       { 'employees/employee' => \&stock_n_purge,}
                   )
              ->parsefile( 'data2.xml');

sub stock_n_purge
{ 
my( $diff, $elt)= @_;
$soi{$elt->first_child ("employeenumber")->text} = "1"; # stock l'element dans un tableau
$diff->print(\*FILE); 
printf "Found One";
$diff->purge;# frees the memory
}

my $full= XML::Twig->new( pretty_print => 'indented',
                        twig_handlers => 
                       { 'employees/employee' => \&stock_n_purge2,}
                   )
              ->parsefile( 'data.xml');

sub stock_n_purge2
{ 
my( $diff2, $elt2)= @_;
$diff2->print(\*FILE) unless (exists( $soi{$elt2->first_child ("employeenumber")->text} )); 
$diff2->purge;   # frees the memory
}

close(FILE); 
```

员工编号是唯一的，我将 data2.xml 的每个元素写入一个新文件，并将每个员工编号存储在一个数组中。然后我解析 data.xml 并写入每个元素，除非它存在于数组中。

这种方法根本没有效率。因此，我不想重写所有 data.xml，而是想从 data.xml 中删除数组中存在的每个元素（因此在 data2.xml 中）。然后将 data2.xml 中的元素附加到 data.xml

我的问题是我找不到使用 XML Twig 从 xml 文件中删除元素的方法。

有人有什么想法吗？

提前致谢，

西蒙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:24:23.003

快速浏览一下您的代码，在我看来，您多次打印这两个文件。实际上，当您执行`$diff->print`. 我还没有真正调试过你的代码，但我怀疑你想使用`flush`而不是`print`那里。试试看，如果情况有所改善，请告诉我们。

# jquery - jQuery 选择器中前导冒号的目的是什么？

> ID：10552838
> 
> 赞同：89
> 
> 时间：2012-05-11T13:59:18.557
> 
> 标签：jquery, jquery-selectors

我已经开始使用 Wijmo 工具包，并且在他们的文档页面中遇到了很多与此类似的示例选择器：

```
$(":input[type='radio']").wijradio(); 
```

我会这样写我的：

```
$('input[type=radio]').wijradio(); 
```

这些做同样的事情还是我错过了什么？

请注意，上面有两个区别：第一个选择器以冒号为前缀，并为输入类型加上引号。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-05-11T14:03:46.513

`:input`是一个[jQuery 扩展](http://api.jquery.com/input-selector/)，同时`input`是一个 CSS 选择器。

`textarea`, `button`, 和`select`元素将被前者匹配，但不匹配后者。

后者更快，因此将其用于您的具体`radio`示例。当您想要“所有表单元素”时使用`:input`，即使它们不是严格的`<input>`标签。即使在这种情况下，建议首先使用标准 CSS 选择器，然后`.filter(':input')`在该集合上使用。

> 因为 :input 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :input 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。为了在使用 :input 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用 .filter(":input")。

在 1.7.2 源代码中，:input 过滤器针对 nodeName 测试正则表达式：

```
input: function( elem ) {
            return (/input|select|textarea|button/i).test( elem.nodeName );
}, 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-11T14:03:58.947

选择`$("input")`器将只选择输入类型的元素

而`$(":input")`选择器将捕获所有输入元素（例如 textarea、select、input 等...）

有关更多信息，请访问有关`:input`选择器的 jQuery 官方文档：

[http://api.jquery.com/input-selector/](http://api.jquery.com/input-selector/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-11T14:03:40.457

选择`:input`器基本上选择所有`form`控件（输入、文本区域、选择和按钮元素），其中`input`选择器通过标签名称选择所有元素`input`。

由于单选按钮是一个`form`元素并且它也使用`input`标签，所以它们都可以用来选择单选按钮。然而，这两种方法在查找元素的方式上有所不同，因此每种方法都有不同的性能优势。

# c++ - Asio 和 HTTP 保持活动状态

> ID：10552840
> 
> 赞同：3
> 
> 时间：2012-05-11T13:59:31.450
> 
> 标签：c++, http, asynchronous, boost-asio, keep-alive

我正在尝试使用 asio 实现 Web 服务器，但是尽管将接受器设置为保持活动状态，但当我收到连接时，在我发送响应后连接套接字总是关闭，即使我从socket（为了从http实现keep-alive）。

我试图在代码中插入 printfs，出于某种原因，在我写完响应之后，当客户端建立新连接时，它会在我的套接字上调用接受器，它不应该只使用旧套接字并重新 -从中读取，而不是调用接受器？

还是我以错误的方式执行保活功能...

代码的相关部分是：

```
#include "connection.hpp"
#include <vector>
#include <boost/bind.hpp>
#include "connection_manager.hpp"
#include "request_handler.hpp"
#include <iostream>

namespace http {
namespace server {

connection::connection(asio::io_service& io_service,
    connection_manager& manager, request_handler& handler)
  : socket_(io_service),
    connection_manager_(manager),
    request_handler_(handler),
    request_parser_(new http_visitor()),
    keep_alive_(true)
{
}

asio::ip::tcp::socket& connection::socket()
{
  return socket_;
}

void connection::start()
{
  socket_.async_read_some(asio::buffer(buffer_),
      boost::bind(&connection::handle_read, shared_from_this(),
        asio::placeholders::error,
        asio::placeholders::bytes_transferred));
  std::cout << "In connection start" << std::endl;
}

void connection::stop()
{
  socket_.close();
}

void connection::handle_read(const asio::error_code& e,
    std::size_t bytes_transferred)
{
  if (!e)
  {
    boost::tribool result;
    boost::tie(result, boost::tuples::ignore) = request_parser_.parse(
        request_, buffer_.data(), buffer_.data() + bytes_transferred);

    if (result)
    {
      request_handler_.handle_request(request_, reply_);

      std::vector<header>::iterator hdr_it;

      for(hdr_it = request_.headers.begin(); hdr_it != request_.headers.end();     hdr_it++)
      {
            if( (hdr_it->name.compare("Connection" ) == 0) && 
                (hdr_it->value.compare("close" ) == 0 ) )
        { keep_alive_ = false; }   
      }

      asio::async_write(socket_, reply_.to_buffers(),
                    boost::bind(&connection::handle_write, shared_from_this(),
                    asio::placeholders::error));
    }
    else if (!result)
    {
      reply_ = reply::stock_reply(reply::bad_request);
      asio::async_write(socket_, reply_.to_buffers(),
          boost::bind(&connection::handle_write, shared_from_this(),
            asio::placeholders::error));
    }
    else
    {
      socket_.async_read_some(asio::buffer(buffer_),
          boost::bind(&connection::handle_read, shared_from_this(),
            asio::placeholders::error,
            asio::placeholders::bytes_transferred));
    }
  }
  else if (e != asio::error::operation_aborted)
  {
    connection_manager_.stop(shared_from_this());
  }
}

void connection::handle_write(const asio::error_code& e)
{
  if (!e)
  {

    std::cout << keep_alive_ << std::endl;
    if(keep_alive_)
    {
      buffer_.assign(0);
      request_.clear();
      keep_alive_ = false;
      start();
    }
    else
    {
      socket_.close();
    }  
  }

  if (e != asio::error::operation_aborted)
  {
    connection_manager_.stop(shared_from_this());
  }
}
}
} 
```

和

```
#include "server.hpp"
#include <boost/bind.hpp>
#include <signal.h>
#include <iostream>

namespace http {
namespace server {

server::server(const std::string& address, const std::string& port,
    const std::string& doc_root)
  : io_service_(),
    signals_(io_service_),
    acceptor_(io_service_),
    connection_manager_(),
    new_connection_(new connection(io_service_, connection_manager_, request_handler_)),
    request_handler_(doc_root)
{
  signals_.add(SIGINT);
  signals_.add(SIGTERM);
  signals_.async_wait(boost::bind(&server::handle_stop, this));

  // Open the acceptor with the option to reuse the address (i.e. SO_REUSEADDR).
  asio::ip::tcp::resolver resolver(io_service_);
  asio::ip::tcp::resolver::query query(address, port);
  asio::ip::tcp::endpoint endpoint = *resolver.resolve(query);
  acceptor_.open(endpoint.protocol());
  acceptor_.set_option(asio::ip::tcp::acceptor::reuse_address(true));
  acceptor_.set_option(asio::ip::tcp::acceptor::keep_alive(true));
  acceptor_.bind(endpoint);
  acceptor_.listen();
  acceptor_.async_accept(new_connection_->socket(),
      boost::bind(&server::handle_accept, this,
        asio::placeholders::error));
}

void server::run()
{
    io_service_.run();
}

void server::stop()
{
  io_service_.post(boost::bind(&server::handle_stop, this));
}

void server::handle_accept(const asio::error_code& e)
{
  if (!e)
  {
   std::cout << "In accept" << std::endl;
    connection_manager_.start(new_connection_);
    new_connection_.reset(new connection(io_service_, connection_manager_,     request_handler_));
    acceptor_.async_accept(new_connection_->socket(),
        boost::bind(&server::handle_accept, this, asio::placeholders::error));
  }
}

void server::handle_stop()
{
  acceptor_.close();
  connection_manager_.stop_all();
}

} // namespace server
} // namespace http 
```

在这段代码中，打印是“连接开始”、“接受”和“连接开始”，当有另一个从同一个客户端到服务器的连接时，它不应该只是第一个“连接开始”。 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:35:40.523

如果没有对代码的完全可见性，我猜这`new_connection_`是 a`shared_ptr`并且您没有在任何地方保留对它的引用。这将导致智能指针删除连接并关闭套接字。

在连接析构函数中插入断点并检查是否是这种情况。

如果没有看到更多代码，就很难诊断问题。

# javascript - webstorm ctrl-n 用于 javascript 函数

> ID：10552845
> 
> 赞同：1
> 
> 时间：2012-05-11T13:59:43.410
> 
> 标签：javascript, function, webstorm

我使用 resharper 并且喜欢它。我使用 webstorm 并且也喜欢它。但是，在 resharper 中，我可以执行 ctrl-n 并获取一个类， ctrl shift-n 并获取一个文件，然后 ctl shift alt -n 并获取一个方法。

好吧，在我用于 javascript 的 webstorm 中，如果我可以说 ctrl -somthing type DCI.Views.MyView 并将它带到一个主干.js 视图（或任何可能的功能），我真的会非常喜欢它。所以对于例如，如果我有一个文件

```
DCI.Views.SomeView = Backbone.View.extend({ bla bla bla }); 
```

或者

```
DCI.repository= (function(){ blah blah return blah blah blah}()); 
```

我希望能够导航到这些功能。有什么想法吗？R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T16:52:33.797

一种选择是此处定义的“按符号导航”：http: [//www.jetbrains.com/webstorm/webhelp/navigating-to-class-file-or-symbol-by-name.html](http://www.jetbrains.com/webstorm/webhelp/navigating-to-class-file-or-symbol-by-name.html)

```
Ctrl+Shift+Alt+N 
```

这将列出所有符号，包括在 Backbone 视图中定义的 JavaScript 函数。这是一个项目范围的搜索，当您只想在特定视图或类中搜索时，有时会很烦人。Sublime 具有更好的导航能力 IMO。

更好的选择是“使用结构视图导航”：[https ://www.jetbrains.com/phpstorm/webhelp/navigating-with-structure-views.html](https://www.jetbrains.com/phpstorm/webhelp/navigating-with-structure-views.html)

```
Ctrl+F12 
```

使用这种类型的搜索，它将直接搜索在您当前打开的视图或类上定义的属性的函数！！！

此外，您可以前往查看 > 工具窗口 > 结构（或键入 ALT + 7）查看当前打开文件的结构视图。这是一个很棒的导航工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:29:52.950

不知道是不是完全一样，但是在phpstorm中，你可以按住crtl，代码中的大部分对象和方法都变成了可点击的。通常它会说“多个实现”，然后会给你一个定义它的文件列表。适用于我使用的 js 框架（如 jquery、mootools 和其他东西）。

# mysql - 查询中的计数和不同结果

> ID：10552852
> 
> 赞同：2
> 
> 时间：2012-05-11T14:00:15.860
> 
> 标签：mysql

我有这个查询并导致我的数据库：

```
mysql> SELECT id FROM jos_content 
       WHERE catid=12 AND state=1 
       AND DATE(publish_up) <= NOW() ORDER BY DATE(publish_up) DESC LIMIT 0,5; 
```

```
    +----+
    | 编号 |
    +----+
    | 48 |
    | 47 |
    | 46 |
    +----+
    3 行一组（0.00 秒）

```

现在我想计算结果：

```
mysql> SELECT count(*), id FROM jos_content 
       WHERE catid=12 AND state=1 
       AND DATE(publish_up) <= NOW() ORDER BY DATE(publish_up) DESC LIMIT 0,5; 
```

```
    +----------+----+
    | 计数(*) | 编号 |
    +----------+----+
    | 3 | 46 |
    +----------+----+
    一组中的 1 行（0.00 秒）

```

为什么没有显示 48 和 47 结果？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:02:04.990

您需要包含一个`GROUP BY`子句。默认情况下，MySQL 允许`SELECT`子句中不包含在 a 中的列`GROUP BY`（这在大多数其他 RDBMS 中是错误的）。如果没有`GROUP BY`，MySQL 将返回关联列中的第一个，这通常不是正确的预期结果。

```
SELECT 
  count(*), 
  id
FROM jos_content
WHERE catid=12 AND state=1 AND DATE(publish_up) <= NOW() 
GROUP BY id
ORDER BY DATE(publish_up) DESC
LIMIT 0,5; 
```

如果您想在摘要中返回始终唯一的多个列，则不需要 中的所有列`GROUP BY`会很有帮助，如下所示，其中 对`name`是唯一的`id`，但是您必须对至少一个列进行分组才能使聚合正确运行并生成总结：

```
SELECT 
  id,
  name,
  COUNT(*)
FROM tbl
GROUP BY id 
```

为了与其他 RDBMS 兼容并避免错误，我建议*始终*在显式中包含所有`SELECT`列`GROUP BY`。

### 更新

更好地了解您的尝试后，如果您想要每行 id 旁边的所有行的总数，您可以使用`SELECT`列表中的子选择。不过这会有点慢。

```
SELECT
  id,
  (SELECT COUNT(*) FROM jos_content) AS numitems
FROM jos_content
WHERE catid=12 AND state=1 AND DATE(publish_up) <= NOW() 
ORDER BY DATE(publish_up) DESC
LIMIT 0,5; 
```

您可以通过对子查询中的计数进行笛卡尔连接（无子句）来欺骗它以更快地工作`ON`，因此不应为每一行执行它。仅当子查询将返回恰好一行时才执行此操作。

```
SELECT
  id
  numitems
FROM 
  jos_content
  /* Join with no ON clause */
  JOIN (SELECT COUNT(*) AS numitems FROM jos_content) subq
WHERE catid=12 AND state=1 AND DATE(publish_up) <= NOW() 
ORDER BY DATE(publish_up) DESC
LIMIT 0,5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:05:03.190

Count 是聚合函数，因此如果要包含任何列，则该列必须是查询中 group by 子句的一部分。

# jquery-mobile - JQuery Mobile CSS 填充仅在刷新时

> ID：10552856
> 
> 赞同：0
> 
> 时间：2012-05-11T14:00:28.590
> 
> 标签：jquery-mobile

我在 php 中嵌入了 JQuery Mobile，如下所示：

```
 echo '<p id="recordsfound">'.$recordcount ." records found. Enter text to filter records.</p>";        
    echo '<ul data-role="listview" data-theme="b" data-filter="true" id="lview">'; 
```

而CSS是：

```
#recordsfound {padding-bottom: 25px; padding-top:0;} 
```

css 已完成，因为文本垂直重叠列表过滤区域。

但是直到我点击刷新按钮才需要。（？！）所以我尝试使用 JQuery 在加载 JQM 后更改 css。

jquery 看起来像这样：

```
$( '#getclient' ).live( 'pageload',function(event){ //I have also tried pageinit
    $('#recordsfound').css({"padding-bottom":"25px"});    
    $('#recordsfound').css({"padding-top":"0"});
 }); 
```

这没有效果。

我很确定它与 listview 过滤器有关，因为我在其他地方没有这些 css 问题。

提前感谢您的任何建议和您的时间。

# perl - Perl 脚本或模块，例如目录中文件的版本控制？

> ID：10552859
> 
> 赞同：1
> 
> 时间：2012-05-11T14:00:37.590
> 
> 标签：perl, module, compare

我需要更新 Oracle 的 RDBMS 二进制文件。我正在寻找 perl 脚本或模块，它将显示哪些文件已更改（新的、删除的、修改的等）。我打算在打补丁前后运行一个脚本，然后比较结果。

我将不胜感激，因为谷歌为“perl compare”短语返回了太多结果。

最好的问候，斯科蒂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:21:10.853

也许您可以使用 git 并免除您的麻烦。在您想要查看此类数据的目录中初始化一个 repo，提交您的更改，然后使用差异来比较它们。

我知道这可能不适用，而且可能 git add 或 commit 会花费很长时间，但如果可能的话，git 会免费为您提供大量信息。

如果您真的想使用 perl，也许您有兴趣检查 File::Find 模块（walk 函数）并使用 stat 从文件中获取此统计信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T19:06:33.737

```
use strict;
use warnings;
use Path::Class;
use Digest::MD5;
use Data::Dumper; # Dumper
use Text::Diff; # diff 
```

That's the modules I use for a script of mine that does just that (to track ZIP/PDF/CHM in a directory and eliminate duplicates). Use `Path::Class::Dir->traverse` to walk the directory, `Digest::MD5` and `stat` to track file identity (for renames) by not recalculating checksums when file size and mtime are identical (safe enough for my purposes), `Data::Dumper` to load last time's results and save the new ones, and `Text::Diff` to compare text file versions of the old and new data and print a diff as a report. If you want to look at `Dumper` output, consider setting the following options for readability:

```
$Data::Dumper::Terse    = 1;
$Data::Dumper::Indent   = 1;
$Data::Dumper::Sortkeys = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:50:33.630

您可以为每个文件创建一个文件列表和一个校验和，然后`diff`在它们上运行吗？

例如，如果你有必要的命令行工具，你可以运行

```
find [directory] -print0 | sort -z | xargs -0 md5sum 
```

在命令行并比较补丁前后的结果文件。缺失的行对应于已删除的文件，多余的行对应于新文件，更改的校验和对应于修改过的文件。

如果你想使用 perl，你可以用 File::Find 和 Digest::MD5 写一些类似的东西。

# html - html页面中的放大和缩小问题

> ID：10552865
> 
> 赞同：0
> 
> 时间：2012-05-11T14:01:02.863
> 
> 标签：html, css, zooming

```
**html**
<html>
<head>
<link rel="stylesheet" href="style.css" ... />
</head>

<body>

<div id="wrapper">  
<div id="header">
<div id="comcast"><img src=Desert.jpg width="18px" height="40px"></img></div>
<div id="menu"><img src=Hydrangeas.jpg width="48px" height="40px"></img></div>
</div>  
<div id="content">      
<div id="content-left"><img src=Desert.jpg width="180px"      height="1000px"></img></div>      
<div id="content-main"><img src=Hydrangeas.jpg width="700px"  height="1000px"></img></div>      
</div>  
<div id="footer"></div> 
<div id="bottom"></div>
</div>

</body>
</html>

**css**
body 
{       
 font-family:arial,helvetica,sans-serif;        
 font-size:12px;    
}

#wrapper 
{       

 margin:0px auto;       
 border:1px solid #bbb;     
 padding:10px;  

}

#header 
{       
 border:1px solid #bbb;     
 height:80px;       
 padding:10px;  
}   

#content 
{       
 margin-top:10px;       
 padding-bottom:10px;   
}   
#content div 
{       
 padding:10px;      
 border:1px solid #bbb;     
 float:left;    
}   
#content-left 
{       
width:180px;    
}   
#content-main 
{       
 margin-left:10px;      
 width:700px;   
}   

#footer 
{       
float:left;     
margin-top:10px;        
margin-bottom:10px;     
padding:10px;       
border:1px solid #bbb;      
width:878px;    
}   
#bottom 
{       
clear:both;     
text-align:right;   
}

*{
margin:0px;
 }

#menu
{
float:right;
} 
```

问题是如果我向左放大或**缩小**内容并且内容主 div 混乱。我的要求是如果我们放大或缩小 contentleft 和 contentmain 它应该像这样缩小并且它不应该是混乱的。我怎样才能做到这**一点**.

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:07:24.423

在专门处理该问题之前，您需要修复一些 HTML suntax/validation 问题

```
<img src=Hydrangeas.jpg width="48px" height="40px"></img> 
```

应该

```
<img src="Hydrangeas.jpg" width="48" height="40" /> 
```

1.  在“”中包装属性
2.  像素在宽度和高度上没有要求。
3.  删除并终止打开标记为 />**

# java - 使用 JAVA POI api 从 Excel 中读取 MANDARIN

> ID：10552866
> 
> 赞同：1
> 
> 时间：2012-05-11T14:01:09.040
> 
> 标签：java, unicode, apache-poi

我需要从 excel 文件中读取 MANDARIN 语言数据以将其保存在数据库中。但是 Unicode 字符正在中断。我正在做以下事情。

```
 FileInputStream myInput = new FileInputStream(fileName);
POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);
Workbook workbook = new HSSFWorkbook(myFileSystem);
Sheet sheet = workbook.getSheetAt(0);

for (Row row : sheet) {
    for (Cell cell : row) {
    String str = null;
    switch (cell.getCellType()) {
    case Cell.CELL_TYPE_STRING:
        cell= CellUtil.translateUnicodeValues(cell);
        str = cell.getRichStringCellValue().getString();
        System.out.println(str);
        break;
    case Cell.CELL_TYPE_NUMERIC:
        str = new Long((long) cell.getNumericCellValue())
            .toString();
        System.out.println(str);
        break;
    default:
        System.out.println("It's here");
    }
    }
} 
```

# jqgrid - jqGrid 高级搜索对话框 - 具有下拉选择的列

> ID：10552867
> 
> 赞同：0
> 
> 时间：2012-05-11T14:01:13.220
> 
> 标签：jqgrid

我有一个带有高级过滤器的 jqGrid 4.3.1。有些列是布尔类型，例如是/否类型，当创建新的高级过滤器行时选择列类型时，我会显示一个下拉列表。例如说第 2 列是 IsActive (Boolean) 类型，当它被选中时，我显示了一个下拉列表而不是文本框。覆盖 jqGrid 高级过滤器的代码如下：

```
var cols = grid.jqGrid("getGridParam", "colModel");
for (var i = 0; i < cols.length; i++) {
if (cols[i].stype && cols[i].stype == "select" && cols[i].searchoptions && cols[i].searchoptions.buildSelect && $.isFunction(cols[i].searchoptions.buildSelect)
&& !cols[i].searchoptions.dataUrl && !cols[i].searchoptions.value) {
cols[i].searchoptions.value = cols[i].searchoptions.buildSelect(null);
} 
```

此代码在 4.3 版本（4.3.1 之前的一个版本）中可以正常工作 不知道是什么导致了问题，但现在我的下拉列表显示为空白。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:28:11.997

您没有发布`buildSelect`您使用的代码，因此很难说出代码失败的原因。我最不明白的是为什么你有这么复杂的代码。如果您知道该列`IsActive`的类型为布尔值，并且您希望在“高级搜索”对话框中将其显示为具有“是”和“否”值的下拉列表，并将其显示在网格中，并且在编辑期间作为复选框显示，您可以执行以下操作：

```
{ name: "IsActive", template: myCheckboxTemplate } 
```

`mytemplateCheckbox`你定义的地方

```
var myCheckboxTemplate = {
        formatter: "checkbox", align: "center", width: 20,
        edittype: "checkbox", editoptions: { value: "1:0" },
        stype: "select", searchoptions: { sopt: ["eq", "ne"], value: "1:Yes;0:No" }
    }; 
```

我永久使用所描述的方法，并且效果很好。与上面代码的唯一区别是我使用[“clickableCheckbox”](http://www.trirand.com/blog/?page_id=393/feature-request/make-disabled-checkbox-of-the-checkbox-formatter-clickable/#p25668)格式化程序而不是“checkbox”。如果你愿意，你可以从[这里](https://github.com/OlegKi/jqGrid-plugins)下载。

# javascript - Greasemonkey 计时器和替换

> ID：10552875
> 
> 赞同：0
> 
> 时间：2012-05-11T14:01:32.473
> 
> 标签：javascript, facebook, timer, greasemonkey

计时器应在 Facebook 聊天提交消息框中每 1 秒检查和替换一次文本

```
function gopi()
{
    chatDiv=document.getElementsByClassName('fbNubFlyoutFooter')[0].getElementsByClassName('inputContainer')[0].getElementsByClassName('uiTextareaAutogrow input')[0];

    for(x in chatDiv)
    {
        //var str=chatDiv[x].innerHTML;
        //str.replace("message2replace", "replacedmessage");
        if(chatDiv[x].innerHTML=="message2replace")
        {
            chatDiv[x].innerHTML="replacedmessage";
        }
    }

    setTimeout(gopi,5000);
    }

setTimeout(gopi,2000);

void 0; 
```

编辑：如果这不能，那么我怎样才能制作一个替换文本的框并发送它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:34:49.353

尝试这个：

```
function gopi() {
    var chatDiv = document.getElementsByClassName('fbNubFlyoutFooter')[0].getElementsByClassName('inputContainer')[0].getElementsByClassName('uiTextareaAutogrow input')[0];

    for (var x = 0, len = chatDiv.length; x < len; x++) {
        if (chatDiv[x].innerHTML == "message2replace") {
            chatDiv[x].innerHTML = "replacedmessage";
        }
    }   
}

setInterval(gopi, 1000);
void 0; 
```

如果这不起作用，您的聊天框选择器是错误的。

# asp.net - asp.net select row in grid set

> ID：10552879
> 
> 赞同：0
> 
> 时间：2012-05-11T14:01:55.037
> 
> 标签：asp.net

I have a gridview that I want to read, delete, edit and update, I have all the methods set up correctly. I need to know how to enable the grid view so I can select a row to then invoke the delete. Here is my code:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

namespace ConsumeDSetService
{
public partial class _Default : System.Web.UI.Page
{
    public static DataSet ds;

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        localhost.Service1 myws = new localhost.Service1();
        ds = myws.GetDataSet();
        GridView1.DataSource = ds;
        GridView1.DataBind();
    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        //updates database in web service with contents of dataset
        localhost.Service1 myws = new localhost.Service1();
        Label7.Text = myws.ModifyDatabase(ds);
    }

    protected void Button3_Click(object sender, EventArgs e)
    {
        //reads student record after row in grid view has been selected
        int i = GridView1.SelectedIndex;
        TextBox1.Text = System.Convert.ToString(ds.Tables["Students"].Rows[i]["RollNumber"]);
        TextBox2.Text = System.Convert.ToString(ds.Tables["Students"].Rows[i]["FirstName"]);
        TextBox3.Text = System.Convert.ToString(ds.Tables["Students"].Rows[i]["Surname"]);
        TextBox4.Text = System.Convert.ToString(ds.Tables["Students"].Rows[i]["Course"]);
        TextBox5.Text = System.Convert.ToString(ds.Tables["Students"].Rows[i]["Level"]);
        TextBox6.Text = System.Convert.ToString(ds.Tables["Students"].Rows[i]["Address"]);
    }

    protected void Button4_Click(object sender, EventArgs e)
    {
        //inserts new row into database
        DataRow dr = ds.Tables["Students"].NewRow();
        dr["RollNumber"] = TextBox1.Text;
        dr["FirstName"] = TextBox2.Text;
        dr["Surname"] = TextBox3.Text;
        dr["Course"] = TextBox4.Text;
        dr["Level"] = TextBox5.Text;
        dr["Address"] = TextBox6.Text;
        ds.Tables["Students"].Rows.Add(dr);
        GridView1.DataSource = ds;
        GridView1.DataBind();
    }

    protected void Button5_Click(object sender, EventArgs e)
    {
        //edits data row in set
        int i = GridView1.SelectedIndex;
        ds.Tables["Students"].Rows[i]["RollNumber"] = TextBox1.Text;
        ds.Tables["Students"].Rows[i]["FirstName"] = TextBox2.Text;
        ds.Tables["Students"].Rows[i]["Surname"] = TextBox3.Text;
        ds.Tables["Students"].Rows[i]["Course"] = TextBox4.Text;
        ds.Tables["Students"].Rows[i]["Level"] = TextBox5.Text;
        ds.Tables["Students"].Rows[i]["Address"] = TextBox6.Text;
        GridView1.DataSource = ds;
        GridView1.DataBind();
    }

    protected void Button6_Click(object sender, EventArgs e)
    {
        //deletes row in set
        int i = GridView1.SelectedIndex;
        ds.Tables["Students"].Rows[i].Delete();
        GridView1.DataSource = ds;
        GridView1.DataBind();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:15:08.270

Seems like you are in wrong direction. Not sure how you going to obtain the `selectedIndex` of the `gridview` in a separate `buttonclick` event.

To get an idea to how to perform insert, update and delete in a grid-view, have a look at these article about

[GridView Examples for ASP.NET](http://msdn.microsoft.com/en-us/library/ms972948.aspx)

[Insert, Update, Delete with Gridview....simple way](http://www.codeproject.com/Articles/24085/Insert-Update-Delete-with-Gridview-simple-way)

[How to use GridView with Insert, Edit, Update, Delete the Ado.net way C#](http://howtouseasp.net/how-to-use-gridview-with-insert-edit-update-delete-the-ado-net-way-c/)

Hope this might direct you in correct direction

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:23:14.573

To select a row onclick, you can use something like this:

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes.Add("onclick", ClientScript.GetPostBackClientHyperlink(Me.GridView1, "Select$" + e.Row.RowIndex.ToString()))
    }    
} 
```

# bash - 如何将变量（文件夹列表）传递给for循环？

> ID：10552881
> 
> 赞同：4
> 
> 时间：2012-05-11T14:02:04.690
> 
> 标签：bash, for-loop

我是 Linux 的新手，也是编程的初学者，但是已经能够在这里修补几行代码[，](http://www.cyberciti.biz/faq/bash-loop-over-file/) 将文件列表传递给 for 循环，[在这里](https://stackoverflow.com/questions/6122341/for-loop-for-files-in-multiple-folders-bash-shell)对文件夹执行相同的操作。

```
# Run search.sh from base folder; 
# Only interested in folders under base folder (e.g., baseFolder/FolderA)
# list all folders in base directory that match search parameters;
# cut out just the folder name; feed to variable DIR

 DIR=$(find . -name *MTL.txt | cut -d '/' -f2)

# echo $DIR = "FolderA FolderB FolderC"
# place that information in a for-loop

    for i in $DIR; do

      cd $DIR # step into folder

      # find specific file in folder for processing
      FILE=$(find -name *MTL | cut -d '/' -f2)

      # copy in a static file from another folder;
      # rename file based on file name found in previous step
      cp /baseFolder/staticfile.txt $FILE.new
      do more stuff

      cd .. # step out of directory

     done 
```

该代码在第一个目录中完成得很好，但无法进入后续目录。我猜我的（许多）问题之一是我不能像我一样将文件夹名称列表传递给 $DIR 。这应该很简单，但我的 foo 很弱。

请老师给我指路。

编辑：

将“cd $DIR”更改为“cd $i”具有预期的效果。代码现在循环遍历所有目录并在每个目录中正确执行操作。- 感谢 core1024 用于标记上述内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:05:02.850

> cd .. # 跳出目录

只是提高了一个级别。

您需要在循环之前将“基本目录”存储在变量中：

```
BASEDIR=`pwd` 
```

然后，您将执行

```
cd $BASEDIR # step out of directory 
```

而不是你现在的

> 光盘..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:16:27.367

我不是专家，但我认为`cd $DIR # step into folder`应该是`cd $i # step into folder`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:42:51.530

不过，不需要“For 循环”。find 命令已经循环遍历它找到的所有项目。

find 命令上有一个 -exec 选项，可将“找到”的每个项目传递给特定命令。

例如

```
find . -name *MTL.txt -exec cp {} /basefolder \; 
```

这会将找到的所有文件复制到 /basefolder

如果您对使用 for 循环有强烈的感觉，您还可以使用命令的输出作为循环列表。

例如

```
for MYVAR in `ls *.txt* `
do
    echo $MYVAR
done 
```

除非您正在格式化输出或有一个不将其输出发送到标准输出的命令，否则使用 cut 通常不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:42:59.260

下面稍微简单一些，因为它不需要解析`find`输出：

```
for subdir in *; do
  if [[ ! -d $subdir ]]; then
    continue
  fi

  cd $subdir
  for f in *MTL.txt; do
    cp /baseFolder/staticFile.txt $f.new
    # And whatever else
  done

  cd ..
done 
```

请注意，我只进入每个子目录一次，您的原始代码会在其中执行多次。我指出这一点，以防这是你的意图。此外，由于您的`cut`命令阻止您深入一个以上的目录，我认为这是您的意图。

根据您所做的其他事情，您可能能够完全避免更改目录。例如：

```
for f in $subdir/*MTL.txt; do
  cp /baseFolder/staticFile.txt $f.new
  # More stuff
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T19:01:11.020

如果目录名称包含嵌入空格，您的原始代码将中断。并且如果您在一个目录中有多个满足查找条件的文件，您还将重复该操作。选择：

```
IFS='
'
declare -a DIR
declare -a FILE
DIR=($(find . -name '*MTL.txt' | cut -f2 -d '/' | uniq))
for x in "${DIR[@]}"
 do
   if [ -d "$x" ];  then
     pushd "$x"
        FILE=($(ls *MTL))
        for y in "${FILE[@]}"
          do
            cp /baseFolder/staticfile.txt  "$y"
            echo do more stuff
          done
     popd
   fi
 done 
```

# c++ - 为什么与“cmatch”一起使用的 C++ 正则表达式代码会引发“smatch”异常？

> ID：10552884
> 
> 赞同：5
> 
> 时间：2012-05-11T14:02:10.900
> 
> 标签：c++, regex, visual-studio-2010

我是 C++ 正则表达式的新手，不能让它们使用字符串而不是 char*。到目前为止我看到的例子都是针对 c 字符串的。

我什至不会尝试在这里展示的真实程序使用子匹配，但我无法使它们工作，所以我尝试修改一个非常简单的工作示例，但它也不起作用。我使用 Visual Studio 2010 Ultimate。

原始 - 工作 - 代码：

```
const char *first = "abcd"; 
const char *last = first + strlen(first); 
std::cmatch mr; 
std::regex rx("abc"); 
std::regex_constants::match_flag_type fl = std::regex_constants::match_default;

std::cout << "search(f, l, \"abc\") == " << std::boolalpha 
          << regex_search(first, last, mr, rx) << std::endl; 
std::cout << "  matched: \"" << mr.str() << "\"" << std::endl; 

std::cout << "search(\"xabcd\", \"abc\") == " << std::boolalpha
          << regex_search("xabcd", mr, rx) << std::endl; 
std::cout << "  matched: \"" << mr.str() << "\"" << std::endl; 
```

修改后的代码：

```
const string first = "abcd";     // char * => string
std::smatch mr;                  // cmatch => smatch
std::regex rx(string("abc")); 
std::regex_constants::match_flag_type fl = std::regex_constants::match_default;

               // this works:
std::cout << "search(f, l, \"abc\") == " << std::boolalpha 
          << regex_search(first, mr, rx) << std::endl; 
std::cout << "  matched: \"" << mr.str() << "\"" << std::endl; 

               // after the next line executes mr seems good to me:
               // mr[0] = {3, matched:true, first="abcd", second="d",...}
std::cout << "search(\"xabcd\", \"abc\") == " << std::boolalpha
          << regex_search(string("xabcd"), mr, rx) << std::endl; 
               // but the following line gives the error
               // "Debug assertion failed"
               // Expression: string iterators incompatible
std::cout << "  matched: \"" << mr.str() << "\"" << std::endl; 
```

奇怪的是修改后的代码的一部分有效，而下一部分导致异常。我什至尝试使用 mr[0].str() 但我收到了相同的错误消息。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T14:15:50.093

问题是临时问题之一。

`smatch`将包含迭代器到您正在搜索的字符串。

`regex_search(string("xabcd"), mr, rx)`创建一个临时字符串，该*字符串*在`;`.

因此，当您`mr`在下一行使用时，它指的是无效内存。应该比`string`寿命更长`mr`。

# python - 检查目录 python ftplib 中的文件/文件夹

> ID：10552888
> 
> 赞同：-2
> 
> 时间：2012-05-11T14:02:24.003
> 
> 标签：python, ftp, ftplib

我刚刚学习 Python，安装了 Python 2，并试图弄清楚如何测试目录是否包含任何文件（以及目录）。有人可以帮忙吗？不过，我已经看到了与 ftplib 库无关的类似示例。

蚂蚁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:08:25.493

一旦你创建了你的 FTP 连接，你可以调用`.dir()`一个可选参数来检查一个特定的文件夹，这会给你一个目录列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:42:13.980

你可以在你感兴趣的目录上做一个 os.listdir，并测试返回列表中的项目，看看这些项目是不是文件是 os.path.isdir 的目录。

不过，不明白这与 ftp 有什么关系。

# iphone - 根据存储在 NSArray 中特定索引处的图像以编程方式设置 UIButton 的图像

> ID：10552892
> 
> 赞同：0
> 
> 时间：2012-05-11T14:02:32.303
> 
> 标签：iphone, objective-c, ios, uibutton, nsarray

这个问题很难解释。我正在尝试创建一组`UIButtons`基于`NSArray`. 我创建了一个`NSArray`包含许多图像的图像，如下所示：

```
socialArray = [[NSArray alloc] initWithObjects:
                   [UIImage imageNamed:@"FacebookButton.png"],
                   [UIImage imageNamed:@"WebsiteSocialButton.png"],
                   [UIImage imageNamed:@"TumblrButton.png"],
                   [UIImage imageNamed:@"TwitterButton.png"],
                   [UIImage imageNamed:@"InstagramButton.png"],
                   [UIImage imageNamed:@"VimeoButton.png"],
                   [UIImage imageNamed:@"GooglePlusButton.png"],
                   [UIImage imageNamed:@"YouTubeButton.png"],
                   [UIImage imageNamed:@"PinterestButton.png"],
                  nil]; 
```

并基于此创建视图中的项目数，如下所示：

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    return [socialArray count];
} 
```

然后我以编程方式创建按钮并设置其图像，如下所示：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{ 
    UIButton *button = (UIButton *)view;
    if (button == nil)
    {
        //no button available to recycle, so create new one
        UIImage *image = [UIImage imageNamed:@"page.png"];
        button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(0.0f, 0.0f, image.size.width, image.size.height);
        [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        [button setBackgroundImage:image forState:UIControlStateNormal];
        button.titleLabel.font = [button.titleLabel.font fontWithSize:50];
        [button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
    }

    //set button label
    [button setTitle:[socialArray objectAtIndex:0] forState:UIControlStateNormal];

    return button;
} 
```

我真正想做的是根据数组中的指定图像设置按钮的图像。因此，第一个按钮获取索引 0 处指定的 PNG 文件，第二个按钮获取索引 1 处的图像，依此类推。

关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:04:14.223

```
UIImage *image = [socialArray objectAtIndex:index]; 
```

（您必须在语句之外执行此操作`if`，否则不会为重复使用的按钮设置图像。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:05:55.333

从数组中获取：

```
UIImage *image = [socialArray objectAtIndex:index]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:05:58.803

你不能这样做： `UIImage *image = [socialArray objectAtIndex:index];`？

如果`index`可能比您的数组大，则将其更改为：

```
UIImage *image = [socialArray objectAtIndex:(index % [self numberOfItemsInCarousel:carousel])]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:10:10.063

试试这个

```
UIButton *button = (UIButton *)view;
int i=0;
    if (button == nil)
    {
        //no button available to recycle, so create new one
        UIImage *image = [imgArray objectAtIndex:i];
        button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(0.0f, 0.0f, image.size.width, image.size.height);
        [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        [button setBackgroundImage:image forState:UIControlStateNormal];
        button.titleLabel.font = [button.titleLabel.font fontWithSize:50];
        [button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
        i++;

    } 
```

# c# - 正则表达式查找#ffcc00 并将其替换为#fc0

> ID：10552893
> 
> 赞同：1
> 
> 时间：2012-05-11T14:02:32.457
> 
> 标签：c#, regex

我正在寻找一个正则表达式，它将在 CSS 文件中查找并替换某些模式，例如在以下字符串中：

```
.boxOneHeading, .boxTwoHeading, .boxThreeHeading
{
    font-size: 18px;
    font-family: MuseoSans500;
    padding: 10px 15px;
    width: 273px;
    background-color: #fbfbfb;
    background-color: #ffffff;
    background-color: #ffcc00;
} 
```

我正在使用以下正则表达式：#?[\s]*(.{1})\1{1}(.{1})\2{1}(.{1})\3{1} 这是正确的发现：

```
#ffffff and
#ffcc00 
```

但我只想找到#ffcc00 值并将它们替换为#fc0。

我要为此添加什么到正则表达式？

问候， 雅克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:09:23.267

这是一个例子：

```
var color = "#ffcc00";
var replaced = Regex.Replace(color, @"#(\w)\1(\w)\2(\w)\3", "#$1$2$3");
Console.WriteLine(replaced); 
```

但我只想找到 #ffcc00 值并将它们替换为 #fc0

我对此有点失望，此时这基本上不是查找/替换吗？

```
var replaced = css.Replace("#ffcc00", "#fc0"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:11:40.680

```
regex: ([0-9a-f])\1([0-9a-f])\2([0-9a-f])\3
replace: $1$2$3 
```

[正则表达式链接](http://regexr.com?30tus)

# cocos2d-iphone - Cocoa 框架结构

> ID：10552896
> 
> 赞同：0
> 
> 时间：2012-05-11T14:02:44.407
> 
> 标签：cocos2d-iphone

我对 iPhone 开发比较陌生。它使用 Cocoa 框架，对于开发游戏，我们可以使用我知道的 Cocos2d 框架，但我对这些与框架之间的结构关系感到困惑。Cocos2d 是 Cocoa 的子类吗？OpenGLES 框架与 Cocos2d 的关系如何？

感谢您的解释。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:10:33.427

首先，在 iOS 上使用的实际 SDK 被命名为 Cocoa Touch（在 MAC OS X 上，它被称为 Cocoa，顺便说一句。）。它由十几个框架组成，涵盖了编写 iOS 应用程序的不同方面。

Cocos2d for iOS 基于 Cocoa Touch 并使用它的一些基础设施来提供对 2d 游戏最有用的 SDK。

为了渲染屏幕，Cocos2d 使用 OpenGLES（它也是 Cocoa Touch 的一部分）。

希望这能回答你的问题。

# android - 选择另一个日期之前的日期 SQLite android

> ID：10552902
> 
> 赞同：0
> 
> 时间：2012-05-11T14:02:59.303
> 
> 标签：android, sqlite, date, select

我正在尝试选择具有`>=`所选日期的到期日期的项目。我使用的是 yyyy-mm-dd 格式，这是我的 sql 语句：

`String sql = "SELECT _id, item, value, finalDate FROM "+DATABASE_TABLE+" WHERE date(finalDate) >= date("+selectedDate+")";`

这个查询总是在我的数据库中产生一个“全选”，就好像没有条件一样。

一些有用的信息：

`selectDate`是一个字符串，其日期格式为 yyyy-mm-dd 我正在执行这样的查询：

```
return db.rawQuery(sql,null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:07:28.687

我认为您的查询语句中缺少一些单引号...

尝试这个：

```
String sql = "SELECT _id, item, value, finalDate FROM "+DATABASE_TABLE+" WHERE date(finalDate) >=date('"+selectedDate+"')"; 
```

**编辑**

哦，检查你的 var 名称。您`selectedDate`在查询中使用，但稍后在您的帖子中声明它是`selectDate`......

# eclipse - 工作集中的文件夹？

> ID：10552903
> 
> 赞同：1
> 
> 时间：2012-05-11T14:03:00.040
> 
> 标签：eclipse

使用 Lotus Notes 设计器客户端时，有没有办法在工作集中创建数据库设计的“文件夹”？也就是说，要么将数据库分组在一个工作集中，要么在选择列表中具有级联的“子工作集”？当您查看工作集选择列表时，可能是这样的：

```
MyWorkingSet
  --SubMyWorkingSet
  --OtherSubMyWorkingSet
MyOtherWorkingSet 
```

只是好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:37:30.140

不是我知道的。

您可以通过打开 PMR 或在ideajam 上发布来请求增强请求。

[http://ideajam.net/](http://ideajam.net/)

# javacv - Javacv - IplImage.createFrom() - 分配问题

> ID：10552909
> 
> 赞同：0
> 
> 时间：2012-05-11T14:03:14.517
> 
> 标签：javacv

当我执行我的代码有时它工作正常，但一次用于 aprox。7 执行出现错误。错误信息 ：

javacv cvReleaseData 中的错误参数（无法识别或不支持的数组类型）

我的代码：

```
File imageFile = new File("/home/user/java.jpg");  
BufferedImage bufferedImage= ImageIO.read(imageFile);  
IplImage poColorPhoto = IplImage.createFrom(bufferedImage); // here sometimes appear error  
IplImage poGrayPhoto = cvCreateImage(cvGetSize(poColorPhoto), IPL_DEPTH_8U, 1); 
cvCvtColor(poColorPhoto, poGrayPhoto, CV_BGR2GRAY); 
poColorPhoto.release(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:54:21.207

您可以将前 3 行替换为以下内容： IplImage poColorPhoto = opencv_highgui.cvLoadImage("yourImage.png");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T11:09:07.017

您可以尝试创建与 BufferedImage 具有相同宽度和高度的 IplImage，如下所示：

```
IplImage ipl_image = IplImage.create(your_buffered_image.getWidth(), your_buffered_image.getHeight(), IPL_DEPTH_8U, 1); 
```

然后将 BufferedImage 分配给您的 IplImage ，如下所示：

```
ipl_image = IplImage.createFrom(your_buffered_image); 
```

希望这可以帮助。

# ruby-on-rails - 移至生产服务器的 Rails 应用程序出现“符号转储格式错误”错误

> ID：10552925
> 
> 赞同：19
> 
> 时间：2012-05-11T14:04:07.167
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, deployment, passenger

我刚刚将我的 Rails 应用程序从开发服务器移到了部署服务器。我已经安装了乘客，但我想尝试`rails s`确保一切运行良好（这是我第一次开发和部署 Rails 应用程序）。

规格是：带有 RVM 的 Ruby 1.9.3、mod_passenger、Rails 3.2.3。所有安装正确，我还启用了 Apache 模块。顺便说一句，出了点问题（乘客一直说“错误消息：未知键：类”。）

运行`rails s`给出了上面列出的奇怪错误`dump format error for symbol(0x45)`

```
Processing by Devise::SessionsController#new as HTML
  Rendered devise/_links.haml (2.2ms)
  Rendered devise/sessions/new.html.haml within layouts/application (11.8ms)
Completed 500 Internal Server Error in 110ms

ActionView::Template::Error (dump format error for symbol(0x45)):
    8:     / HTML5 shim, for IE6-8 support of HTML elements
    9:     /[if lt IE 9]
    10:       = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    11:     = stylesheet_link_tag "application", :media => "all"
    12:     /%link(href="images/favicon.ico" rel="shortcut icon")
    13:     /%link(href="images/apple-touch-icon.png" rel="apple-touch-icon")
    14:     /%link(href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72")
  app/views/layouts/application.html.haml:11:in `_app_views_layouts_application_html_haml__3524679841439843142_22055600' 
```

这是什么意思？谷歌搜索似乎是一个 flash[] 错误，但我真的不明白我应该在这里做什么。

等待一些建议，谢谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-23T14:12:17.187

有同样的问题。尝试删除您的 [app]/tmp 目录。它似乎试图解组一些 borked 文件。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-21T22:51:19.303

将资产从 new.js 更改为 new.js.coffee 并在尝试渲染试图渲染 new.js 的视图时收到此错误：

```
ActionView::Template::Error (dump format error for symbol(0x6d)) 
```

我认为这与 tmp 文件有关（感谢此线程中的评论）。我跑了：

```
bundle exec rake tmp:clear 
```

我很高兴去！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T10:25:50.263

这里的问题是我在管道下插入了“haml-rails” `:assets`，所以它无法在生产环境中找到 HAML。

老实说，我很惊讶只是删除`javascript_include_tag`它`stylesheet_link_tag`仍然在渲染 html。

顺便说一句，我通过`haml-rails`移出`assets`范围来修复它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T13:52:52.677

当我从资产中删除一堆未使用的 .coffee 文件时，我遇到了同样的问题。

我通过运行解决了这个问题：

```
bundle exec rake assets:precompile RAILS_ENV=<environment> 
```

然后重启服务器。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-17T16:53:04.443

我有同样的问题，修复是运行`git clean -dfx`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-11T17:19:17.573

这看起来不像是乘客错误，我猜你的 HAML 有问题。尝试删除 8、9 和 10，看看它是否呈现。如果是这样，那将使您缩小问题的范围。

# java - NoClassDefFoundError 与 Google Contact API V3

> ID：10552927
> 
> 赞同：0
> 
> 时间：2012-05-11T14:04:13.380
> 
> 标签：java, google-contacts-api

我正在尝试使用 Google Contact API V3 (https://developers.google.com/google-apps/contacts/v3/) 进行一些测试。我只是想验证并从一个帐户中获取每个联系人。

我在我的库中添加了以下罐子：

*   gdata-client-1.0.jar
*   gdata-base-1.0.jar
*   gdata-contacts-3.0.jar
*   邮件.jar

我从以下位置下载了前两个 jar：[http ://code.google.com/p/gdata-java-client/source/browse/#svn%2Ftrunk%2Fjava%2Flib](http://code.google.com/p/gdata-java-client/source/browse/#svn%2Ftrunk%2Fjava%2Flib)

当我尝试运行我的代码时，我得到一个 java.lang.NoClassDefFoundError com/google/gdata/util/Version

在 gdata-client-1.0.jar 中有一个包 util，但我找不到 Version 类。

有没有人处理过这个问题？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:07:40.533

我想你忘记了`gdata-core-1.0.jar`

# asp.net - 移至服务器：此 sqlparametercollection 不包含具有参数名的 sqlparameter

> ID：10552931
> 
> 赞同：0
> 
> 时间：2012-05-11T14:04:32.007
> 
> 标签：asp.net, sql, vb.net, listview, parameters

我将一个经过全面测试的网站移到了我的网络服务器上，并且它不断返回

> 此 SqlParameterCollection 不包含具有 ParameterName 'Choices' 的 SqlParameter。

使用 VS 2010 我无法复制此错误，一切正常并通过所有测试。

服务器正在运行 IIS 6 和 net 3.5。我过去使用过它，没有遇到任何问题。该站点使用 vb.net 在 asp.net 3.5 中构建。

代码：

```
<SelectParameters>
   <asp:Parameter Name="UserID" Type="Object" />
   <asp:ControlParameter ControlID="DropDownList1" Name="Active" 
                         PropertyName="SelectedValue" Type="Boolean" />
   <asp:Parameter Name="Choices" Type="String" />
</SelectParameters>

Protected Sub BoarListSQL_Selecting(sender As Object, e As System.Web.UI.WebControls.SqlDataSourceSelectingEventArgs) Handles BoarListSQL.Selecting
    e.Command.Parameters("@UserId").Value = userId
    e.Command.Parameters("@Active").Value = DropDownList1.SelectedValue.ToString()
    e.Command.Parameters("@Choices").Value = lb_breeds.SelectedValue.ToString() 'breedChoice
End Sub

SelectCommand="If @Choices = 'ALL' BEGIN SELECT BoarID,Registration,Breed,Tag1,DOB,Name,BoarStudID,EntryDate,RemovalDate,Reason,Active,Location,BreedingHerdDate,Notes FROM [Table] WHERE ([UserID] = @UserID) AND ([Active] = @Active) END ELSE SELECT BoarID,Registration,Breed,Tag1,DOB,Name,BoarStudID,EntryDate,RemovalDate,Reason,Active,Location,BreedingHerdDate,Notes FROM [Table] WHERE ([UserID] = @UserID) AND ([Active] = @Active) AND ([Breed] = @Choices)" 
```

我在参数列表中有选择，并且在运行选择时添加了一个值。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:45:30.127

您可以尝试添加 addWithValue （应该可以正常工作）并注意，如果您不使用它，当您将一些文本放入数据库时​​，有时您可能需要 ' '。

所以另一种解决方案可能是：

```
e.Command.Parameters("@Choices").Value = "'" & lb_breeds.SelectedValue.ToString() & "'"  'breedChoice 
```

您将在以下位置找到有关如何使用它的一个很好的示例：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue(v=vs.90).aspx)

希望这可以帮助。

# javascript - 加载音频源文件时如何使用 js/jquery 处理事件？

> ID：10552932
> 
> 赞同：1
> 
> 时间：2012-05-11T14:04:33.983
> 
> 标签：javascript, jquery, events, load

[http://jsfiddle.net/kent93/AyEpR/](http://jsfiddle.net/kent93/AyEpR/)

我想在音频加载后隐藏（）加载器 gif。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:06:34.533

> > 您可以使用loadeddata-MediaEvent。

**例子：**

```
var files = ['a.mp3','b.mp3'];

$.each(files,function(){
   var tmp = new Audio();
   tmp.src = this;
   tmp.on('loadeddata',function(){
   var i = files.indexOf(this);
      files.splice(i,1);
      if (!files.length){
         alert('Preloading done!');
      }
   });
}); 
```

[从这个答案](https://stackoverflow.com/a/9716433/339852)引用和代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T14:07:56.170

使用纯 JS，您可以通过使用`canplaythrough`事件来做到这一点：

```
myAudio.addEventListener("oncanplaythrough", function() { ... here hide gif ... }, false); 
```

或者使用 jQuery：

```
$('#theMp3File').on('canplay canplaythrough', function(){
    $('.loader').hide();
}); 
```

# javascript - JS 在 textField 中列出多个选择选项

> ID：10552940
> 
> 赞同：0
> 
> 时间：2012-05-11T14:05:03.750
> 
> 标签：javascript, multiple-select

```
 $().ready(function() {  
       $('#add').click(function() {  
        return !$('#select1 option:selected').remove().appendTo('#select2');  
       });  
       $('#remove').click(function() {  
        return !$('#select2 option:selected').remove().appendTo('#select1');  
       });  
      }); 
```

这两个功能将选定的选项从一个多选移动到另一个。我需要在隐藏的输入类型中列出所有添加的选项值（在#select2 中）。每次调用这些函数之一时，都应更新此输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:31:29.213

这应该有帮助

```
var yourInput = $('#IdOfYourInput');

$('#add').click(function() {  
    var opt = !$('#select1 option:selected').remove().appendTo('#select2');
    yourInput.val($('#select2 option').map(function(){return this.value;}).get().join(','));
    return opt;
}); 
```

删除类似：

```
$('#remove').click(function() {
    var opt =$('#select2 option:selected').remove().appendTo('#select1');
    yourInput.val($('#select2 option').map(function(){return this.value;}).get().join(','));
    opt.appendTo('#select1');  
    return opt;
}); 
```

我希望这是你的目标..

# c# - NUnit TestFixtureAttribute：如何通过 TestFixtureAttribute 将 DateTime 实例传递给测试类构造函数

> ID：10552942
> 
> 赞同：0
> 
> 时间：2012-05-11T14:05:07.540
> 
> 标签：c#, .net, nunit

我开始使用 TestFixtureAttribute 使用不同的输入值多次执行单元测试。我正在测试的方法类似于 TryParse 操作，其中方法返回布尔结果并将输出参数设置为解析值。在成功的情况下，我希望该方法返回 true。但是我也想验证输出参数中的值。输出参数的类型为 DateTime。如何通过 TestFixtureAttribute 传递 DateTime 的实例。

```
[TestFixture("121231225959", true, new DateTime(2012,12,31,22,59,59)] 
```

上面给出了一个编译错误，因为它期望在属性中传递一个 const 值。

任何想法，将不胜感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:12:58.510

据我所知，这不能使用属性来完成，因为只有编译时常量才能作为属性参数传递。

您可以做的是在测试中创建一个循环并在那里传递值。例如：

```
DateTime[] dates = new [] { ... };
foreach (DateTime dt in dates)
{
    // Test
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:17:42.747

我认为属性对 [Datapoints]/[Theory] ​​可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:10:25.167

将其作为字符串传入并在构造函数中创建 DateTime。

# java - 不同的内连接 hql

> ID：10552945
> 
> 赞同：4
> 
> 时间：2012-05-11T14:05:13.467
> 
> 标签：java, hibernate, hql

我有以下休眠实体

```
public class Container {
  ...

  @OneToMany
  private List<ACLEntry> aclEntries;
} 
```

为了保护我的容器实例，我使用以下实体：

```
public class ACLEntry {

  ...
  private Long sid;
  private boolean principal;
  private Integer mask;

} 
```

hql-queries 将自动创建，因此为了搜索容器实例，将创建以下查询：

```
select container from Container container 
inner join container.aclEntries as aclEntry 
with bitwise_and (aclEntry.mask, 1) = 1 and 
   (aclEntry.sid = :userId or aclEntry.sid = :roleId) 
```

这样做的问题是，aclentry 连接可能会返回 2 个结果，这将导致重复的容器结果。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:11:15.190

据我了解，您需要一个可以容纳 Container 对象的多个条目的容器，只需将您的 hql 查询替换为以下内容：

添加`select distinct`为本机查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:11:46.287

作为蛮力解决方案，您可以编写本机查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:40:37.323

将其编写为 Criteria 查询可能更有意义，它[可以轻松支持根据关联条件选择对象](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/querycriteria.html#querycriteria-associations)。

同样的事情可以在 HQL 或本机查询中完成，执行指定相同逻辑的 Criteria 查询并查看它生成的 HQL/SQL 可能是有益的。

# android - Android - 如何使用 ActionBarCompat 显示子菜单

> ID：10552950
> 
> 赞同：1
> 
> 时间：2012-05-11T14:05:46.920
> 
> 标签：android, android-layout

我实现了 ActionBarCompat 以拥有跨不同操作系统版本的 ActionBar。
它在智能手机上隐藏，仅在平板电脑上显示。

我在这个屏幕截图中看到：http: [//developer.android.com/resources/samples/ActionBarCompat/index.html](http://developer.android.com/resources/samples/ActionBarCompat/index.html)，**共享**选项菜单在子菜单中显示**注销**选项，但是当我编译并运行示例代码时平板电脑，**注销**选项完全隐藏，没有任何选项可以将其显示为子菜单

然后我尝试做这样的事情：

```
<item        
    android:icon="@android:drawable/ic_menu_delete"
    android:orderInCategory="1"
    android:showAsAction="always"
    android:title="@string/menu_logout">
    <menu>
        <item
            android:id="@+id/menu_logout"                                
            android:title="@string/menu_logout"/>
    </menu>
</item> 
```

它真的看起来像我想要的 - 在平板电脑上，在智能手机上，但是，它有一个不受欢迎的效果 - 当单击“注销”选项菜单时，它会显示另一个上下文菜单，这是因为我相信嵌套菜单。

你们知道吗，如何在平板电脑上使用操作栏时显示子菜单，而在智能手机上只显示常规选项菜单？也许 ActionBarCompat 需要一些额外的配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:52:28.167

我找到了解决方案。该解决方案包含 2 个单独的菜单资源文件，用于平板电脑和智能手机：menu_tablet.xml、menu_smartphone。

对于平板电脑，我显示一个子菜单：

```
<item        
    android:icon="@android:drawable/ic_menu_delete"
    android:orderInCategory="1"
    android:showAsAction="always"
    android:title="@string/menu_logout">
    <menu>
        <item
            android:id="@+id/menu_logout"                                
            android:title="@string/menu_logout"/>
    </menu>
</item> 
```

对于智能手机，我显示为常规选项菜单：

```
<item        
        android:icon="@android:drawable/ic_menu_delete"
        android:orderInCategory="1"
        android:showAsAction="always"
        android:id="@+id/menu_logout"                                
        android:title="@string/menu_logout"    /> 
```

然后在代码中我像这样膨胀适当的菜单资源：

```
if(isTablet()){
    menuInflater.inflate(R.menu.menu_tablet, menu);
}else{
    menuInflater.inflate(R.menu.menu_smartphone, menu);
} 
```

# c++ - 自动分配算子构造

> ID：10552959
> 
> 赞同：0
> 
> 时间：2012-05-11T14:06:19.397
> 
> 标签：c++

有人可以指导我完成这种情况下的调用吗？

```
template<class T>
class mat4 {
public :

T matrix[4][4];

    mat4();
    mat4(vec4<T> i, vec4<T> j, vec4<T> k, vec4<T> t);
    mat4(const T input_matrix[4][4]);

    //~mat4();

    mat4<T> Transposed() const;
    void Transpose();

    mat4<T> Inversed() const;
    void Inverse();

}; 
```

如果我打电话给上面的代码

```
mat4<float> matrix;
float mf[4][4];

//fill the float matrix here

matrix = mf; 
```

然后我知道第三个构造函数被调用（它不是明确的），但除此之外还有什么？矩阵的复制构造函数，它采用从赋值操作创建的临时对象？我正在争论我是否应该为它创建一个自定义分配运算符，或者让它自己处理。自定义运算符只会将矩阵复制到 mat4 并返回对 mat4 的引用，但如果自动创建的赋值运算符没有开销，那么我宁愿坚持下去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:20:30.170

任何体面的[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)都应该将其减少为仅对第三个构造函数的调用。只要您使用优化进行编译，在这种情况下就无需降低可读性以减少开销。

另外，我看不出自定义复制构造函数和/或赋值运算符的开销如何低于编译器生成的开销；它们甚至可能使优化复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:48:43.673

如果这个矩阵包含一个`std::vector<T>(16);`，现代隐式生成的赋值运算符将“窃取”临时创建的内容，`mf`并避免第二个副本。对于较旧的编译器，您可以自己编写这样的赋值运算符（请参阅[What is the copy-and-swap idiom?](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)）。

但是，此矩阵将数组作为数据成员：隐式生成的赋值运算符，就像您可以编写的任何赋值运算符一样，必须实际复制（或移动，如果 T 是可移动的）16 个 T 值中的每一个（或如果 T 是可简单复制的，则使用单个 memcpy）。编译器实际上可能会优化出临时的并将所有 16 个 T 直接从`mf`into中复制出来`matrix.matrix`，但它是一个比简单的 RVO 更复杂的优化。在我的测试中，GCC 似乎正在这样做。

# javascript - 我网页上的 JavaScript 在 IE 9 中不起作用是有原因的吗？

> ID：10552960
> 
> 赞同：0
> 
> 时间：2012-05-11T14:06:26.237
> 
> 标签：javascript, html, internet-explorer, onclick, image-replacement

我写这个页面是为了成为一个图片库。当您将鼠标悬停在图片上时，它会向您显示图像的放大版本。当您单击其中一张较小的图像时，其上方的较大图片应更改为该图像。它在 Chrome 和 Firefox 中运行良好，但由于某种原因，大图在 IE9 中不会改变。有任何想法吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Text/Photo Swap Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script type="text/javascript">

<!--Everything below this comment (function switch1) is completely questionable. What IS this stuff?-->//The switchImg function is what swaps out the awesome.png picture when thumbnails are clicked.
function switchImg(i){
document.images["awesome"].src = i;
}
</script>
<style>

<!--NEEDS TO BE FIXED-->
<!--This uses the picture in the URL as a background image, needs to be fixed to stretch across whole page; use %'s.-->
body {background: url('gradient.png');}

<!--This is all gallery stuff. Makes it all a certain size, floats it to the left, pads the images, makes the images appear in a span while the mouse
is hovering over it (might be taked out and replaced with JavaScript).-->
#gallery {position: relative; }
#gallery ul {list-style-type: none;
width: 300px; }
#gallery li { display: inline; 
 float: left;
 padding: 5px; }
#gallery img {border-style: solid: 10px; border-color: #333; }
#gallery a { text-decoration: none;
         font-style: none;  
         color: #333; }
#gallery span {display: none; }
#gallery a:hover span {display: block;     
position: absolute;
top: 10px;
left: 300px; 
text-align: center; }

<!--NEEDS TO BE FIXED-->
<!--What does this do? Excellent question, my fine sir. This tries to float the image that changes on click to the right. -->   
#mainPicture {
float: right;
    }

<!-- <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=> <=popOut STUFF=>-->
.popOut
{
cursor: default;
list-style: none;
}
.popOut a
{
cursor: default;
}
.popOut a .preview
{
display: none;
}
.popOut a:hover .preview
{
display: block;
position: absolute;
top: -33px;
left: -45px;
z-index: 1;
}
.popOut img
{
background: #ebf0f3;
border-color: #ebf0f3;
border-style: solid;
border-width: 1px;
color: inherit;
vertical-align: top;
width: 100px;
height: 75px;
}
.popOut li
{
background: #ebf0f3;
border-color: #CCCCCC;
border-style: solid;
border-width: 0px;
color: inherit;
display: inline;
float: left;
margin: 3px;
padding: 2px;
position: relative;
}
.popOut .preview
{
border-color: #000;
width: 200px;
height: 150px;
}
.popOut p
{
text-align: center;
}
.popOut .textualLink
{

}
</style>
</head>

<body>

<!--NEEDS TO BE FIXED-->
<!--Give the awesome picture a similar outline to the preview pictures.-->
<!--This picture is the one that is going to change when pictures are clicked on.-->
<div class="mainPicture"><img id="awesome" src="awesome.png" height="300" width="400" alt=""><!--style="position:relative; left:600px; top:326px;"--></div>

<!--Alright, so this gallery is to hold all of the pictures. They're all set to be a certain size (100x75px) and expand to a larger size(400x300px). As it stands now, 
they're in an unordered list, and are set to change the awesome.png image whenever they are clicked.-->
<td width="1000" rowspan="3">
<div id="gallery">
<ul class="popOut">
    <li>
        <a href="#" onclick="switchImg('dog.jpg')"> 
            <img src="dog.jpg" width="100" height="75" alt="dog"><img src="dog.jpg" width="100" height="75" alt="dog" class="preview"> 
        </a>
    </li>
    <li>
        <a href="#" onclick="switchImg('cat.jpg')"> 
            <img src="cat.jpg" width="100" height="75" alt="cat"><img src="cat.jpg" width="100" height="75" alt="cat" class="preview"> 
        </a>
    </li>
    <li>
        <a href="#" onclick="switchImg('parrot.jpg')">
            <img src="parrot.jpg" width="100" height="75" alt="parrot"><img src="parrot.jpg" width="100" height="75" alt="parrot" class="preview"> 
        </a>
    </li>
    <li>
        <a href="#" onclick="switchImg('lizard.jpg')"> 
            <img src="lizard.jpg" width="100" height="75" alt="lizard"><img src="lizard.jpg" width="100" height="75" alt="lizard" class="preview"> 
        </a>
    </li>
    <li>
        <a href="#" onclick="switchImg('horse.jpg')">
            <img src="horse.jpg" width="100" height="75" alt="horse"><img src="horse.jpg" width="100" height="75" alt="horse" class="preview"> 
        </a>
    </li>
    <li>
        <a href="#" onclick="switchImg('chicken.jpg')"> 
            <img src="chicken.jpg" width="100" height="75" alt="chicken"><img src="chicken.jpg" width="100" height="75" alt="chicken" class="preview"> 
        </a>
    <li>
        <a href="#" onclick="switchImg('awesome.png')" class="textualLink"><p>Click for Default Image</p></a>
    </li>
</ul>

<!--This textarea is the field where information about whatever is clicked will pop up, and hopefully stay there. By default, it should contain some sort of welcome message.-->
<div id="textarea" style="height:600px;width:320px;font:14px;font:14px/26px Arial, Helvetica, sans-serif;overflow:scroll; position:relative;
top:12px;"><p id="textarea2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi pulvinar lectus non lectus auctor egestas. Donec at nunc neque. Morbi ornare condimentum lobortis. Nam vehicula urna ac mauris pharetra rutrum. Duis et arcu eget sapien interdum porttitor ut et tortor. Maecenas ultricies dignissim pretium. Integer quis enim metus. Sed enim lacus, eleifend eu euismod volutpat, blandit eu sem. Vestibulum varius purus ut est accumsan pellentesque. Donec quis enim id lectus sollicitudin suscipit at volutpat augue. Curabitur et metus purus. Fusce luctus nunc vitae sapien pharetra id accumsan lectus malesuada.</p></div>
</div>
</td>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:08:41.957

请改用此`switchImg`功能：

```
function switchImg(i){
    document.getElementById("awesome").src = i;
} 
```

我不认为 IE9 支持`document.images`，但我可能是错的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:08:53.970

将您的功能更改为：

```
function switchImg(i){
    document.getElementById("awesome").src = i;
} 
```

# php - 总是相同的错误信息

> ID：10552964
> 
> 赞同：0
> 
> 时间：2012-05-11T14:06:48.327
> 
> 标签：php, forms, class

它是一个登录表单和一个 class_login.php 文件。我得到了一个令牌，用于验证表单提交。它是一个随机字符串，我将其隐藏发送。我在课堂上收到 3 条错误消息。无效的表单提交。无效的表单数据。和无效的用户名/密码。问题是不管我做什么我都会卡在第一个错误无效的表单提交上。就像我发送的令牌永远不会与会话令牌匹配。但是当我删除那部分时，我总是得到无效的表单数据，即使我写了一个正确的现有用户/密码。在这里需要一些帮助：

```
<?php

class class_login 
{
    private $id;
    private $username;
    private $password;
    private $passmd5;

    private $errors;
    private $access;
    private $login;
    private $ltoken;

    public function __construct()
    {
        $this->errors = array();

        $this->login  = isset($_POST['login'])? 1:0;
        $this->access = 0;
        $this->ltoken  = $_POST['ltoken'];
        $this->id     = 0;
        $this->username = ($this->login)? $this->filter($_POST['username']) : $_SESSION['username'];
        $this->password = ($this->login)? $this->filter($_POST['password']) : '';
        $this->passmd5 = ($this->login)? md5($this->password) : $_SESSION['password'];

    }

    public function isLoggedIn()
    {
        ($this->login)? $this->verifyPost() : $this->verifySession();

        return $this->access;
    }

    public function filter($var)
    {
        return preg_replace('/[^a-zA-Z0-9]/','',$var);
    }

    public function verifyPost()
    {
        try
        {
            if(!$this->tokenValid())
                throw new Exception('Invalid Form Submission!');
            if(!$this->isDataValid())
                throw new Exception('Invalid Form Data!');
            if(!$this->verifyDatabase())
                throw new Exception('Invalid Username/Password!');

            $this->access = 1;
            $this->registerSession();
        }
        catch(Exception $e)
        {
            $this->errors[] = $e->getMessage();
        }
    }

    public function verifySession()
    {
        if($this->sessionExist() && $this->verifyDatabase())
        $this->access = 1;
    }

    public function verifyDatabase()
    {
        include('db_connect.php');

        $data = mysql_query("SELECT ID FROM users WHERE username = '($this->username)' AND password = '($this->passmd5)'");

        if (mysql_num_rows($data))
        {
            list($this->id) = @array_values(mysql_fetch_assoc($data));

            return true;
        }
        else
            return false;

       }

    public function isDataValid()
    {
        return (preg_match('/[^a-zA-Z0-9]$/',  $this->username) && preg_match('/[^a-zA-Z0-9]$/',  $this->password))? 1:0;
    }

    public function tokenValid()
    {
        return (!isset($_SESSION['ltoken']) || $this->ltoken != $_SESSION['ltoken'])? 0 : 1;
    }

    public function registerSession()
    {
        $_SESSION['ID']       = $this->id;
        $_SESSION['username'] = $this->username;
        $_SESSION['password'] = $this->passmd5;
    }

    public function sessionExist()
    {
        return (isset($_SESSION['username']) && isset($_SESSION['password']))? 1 : 0;
    }

    public function show_errors()
    {
        foreach($this->errors as $value)
            echo $value."</br>";
    }

}

?> 
```

这是 login_form.php

```
<?php
$check = 0;
$ltoken = $_SESSION['ltoken'] = md5(uniqid(mt_rand(), true));
if(isset($_POST['login']))
{
    $check = 1;
    include('class_login.php');

    $login = new class_login();

    if ($login->isLoggedIn())
        echo "Success!";
    else
        $login->show_errors();

}
?>

<link rel="stylesheet" href="CSS/regstyle.css" type="text/css" />
<script src="JS/jquery-1.7.2.js" type="text/javascript"></script>
  <script type="text/javascript">
      $(document).ready(function() {
          var checker = <?php echo $check; ?>;
          if(checker == 1)
          {
          $("#logform").slideDown("fast")
          }
      });
    </script>
<div id="content">
    <?php echo $ltoken; ?>
<!-- Begin Form -->
<div class="form-content">

<form class="reg-form" method="post" action="<?php $_SERVER['PHP_SELF'] ?>">

        <fieldset>
            <div class="divusername">
                <label for="username">Username:</label>
                <input type="text" id="username" name="username"  placeholder="Your Username Here" />
            </div>
            <div class="password">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" placeholder="Your Password Here" />
            </div>
            <div class="submit-button">
                <input type="hidden" name="ltoken" value="<?php echo $ltoken; ?>" />
                <input type="submit" name="login" value="Login" />
            </div>
        </fieldset>
</form>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T14:09:59.337

我怀疑您忘记使用`session_start()`. 请告诉我们你是如何使用这个类的。（您使用它的文件。）

## 编辑

以上无视。这里的问题是您`$_SESSION['ltoken']`在每次页面加载时将 设置为新的随机值。这就是为什么发布的价值（这是“落后”一代）永远不会匹配的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:14:07.520

分离出这段代码：

```
return (!isset($_SESSION['ltoken']) || $this->ltoken != $_SESSION['ltoken'])? 0 : 1; 
```

它可能准确也可能不准确，但它不可读并且使您的调试更加困难。我认为它可能会让你失望，因为你使用 if 或 else 作为第二个条件。

```
if( ! isset( $_SESSION['ltoken'] ) return false; 
return ( $this->ltoken != $_SESSION['ltoken']) ? 0 : 1; 
```

# symfony - Symfony2：如何强制下载

> ID：10552974
> 
> 赞同：3
> 
> 时间：2012-05-11T14:07:35.360
> 
> 标签：symfony, download

我正在尝试创建一个链接以使用 symfony2 下载文件。它确实下载了一个文件，但是因为它是零八位字节，所以没用。我不知道如何使它工作。有人知道该怎么做吗？

该文件位于`web/uploads/documents/`.

这是控制器中的代码：

```
// here I get the name of the file

  $response = new Response();
  $response->headers->set('Content-type', 'application/octet-stream');
  $response->headers->set('Content-Disposition', sprintf('attachment; filename="%s"', $filename));

  return $response; 
```

我试图写整个路径而不是`$filename`但它改变了下划线中的所有斜杠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:27:15.067

您忘记设置内容：

```
$response->setContent(file_get_contents($localFilePath)); 
```

# c# - DotNetNuke 6：对 Dynamics AX 2009 Business Connector 的基于 AD 表单的身份验证

> ID：10552976
> 
> 赞同：0
> 
> 时间：2012-05-11T14:07:41.230
> 
> 标签：c#, asp.net, dotnetnuke, dynamics-ax-2009, business-connector

这个问题有两个部分。要使用与 AX 2009 接口的 ASP.NET 开发应用程序，对 Business Connector (BusinessConnectorNet.dll) 的调用必须通过 Axapta 对象进行调用，如下所示：

```
Axapta ax = new Axapta();
ax.LogonAs("ad_username", "domain.com", new NetworkCredential("ad_username",
    "ad_password", "domain.com"), null, null, null, null); 
```

明显的问题是未加密/未散列的密码预计会从登录表单中传入。这可能已经由用户在我们购买的 DotNetNuke 或 EasyAD 模块（均基于 SqlMembershipProvider）上完成。

所需的结果是使用 DotNetNuke 6 的单点登录解决方案。

这是问题：

**是否有推荐的解决方案来获取和传递未加密的密码，或者是否有一些隐藏的未记录成员资格方法内置到 BusinessConnector？**

注意：我的经验水平是：

*   DotNetNuke 6：初学者（已制作并安装了工作模块）
*   ASP.Net：中级
*   C#：高级
*   AX 2009：中级
*   业务连接器：中级

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:42:05.270

> 是否有推荐的解决方案来获取和传递未加密的密码

您不这样做转发加密的（实际上是散列的）密码。

> BusinessConnector 中是否有一些隐藏的未记录成员资格方法？

不太可能。这最好留给 ASP.NET

老实说，我不明白这个问题。你的方法似乎是一个初步的尝试，似乎你只是停在那里。`Yes`自从您提出问题以来，我真的没有任何代码可以提供`No`。

# android - 在 Android 上使用 MapView 的 Facebook 幻灯片菜单

> ID：10552977
> 
> 赞同：0
> 
> 时间：2012-05-11T14:07:41.910
> 
> 标签：android, android-mapview, mapactivity

所以我知道有一些解决方法可以在我的 android 应用程序上获取 facebook 幻灯片菜单，可以通过以下方式之一：

1- FrameLayouts (http://stackoverflow.com/a/8673805/1010114)

2-截图（http://stackoverflow.com/a/9768498/1010114）

但是，我想要做的，并且到目前为止对如何实现一无所知，就是在 MapActivity 中有 Facebook 幻灯片菜单。这样，用户可以看到 MapView 并与之交互，并且能够按下菜单按钮来查看菜单（当菜单出现时，如果用户不能与地图的可见部分进行交互也可以）

使用选项 2（屏幕截图）不起作用，因为我似乎不能不拍摄地图视图的屏幕截图（或者至少我不能使用他的方式）

关于如何做到这一点的任何提示/想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:19:22.300

我遇到了同样的问题，并通过在 Activity 上添加 TabHost 来解决它。您可以将 MapActivity 设置为选项卡内容并隐藏它的按钮。

**示例代码：**

**地图.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true" />

</LinearLayout> 
```

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <Button
        android:id="@+id/menu_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="menu" />

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
        </FrameLayout>
    </TabHost>

</LinearLayout> 
```

**MyMapActivity.java：**

```
public class MyMapActivity extends MapActivity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);
    }
} 
```

**我的活动.java：**

```
public class MyActivity extends TabActivity
{
    private LayoutInflater inflater;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        inflater = LayoutInflater.from(context);
        // Inflate menu here

        // Get the TabHost
        TabHost tabHost = getTabHost();

        // Add the button and content
        TabHost.TabSpec spec = tabHost.newTabSpec("myMapTab")
                .setIndicator("Map")
                .setContent(new Intent(this, MyMapActivity.class));
        tabHost.addTab(spec);

        // Hide the button
        tabHost.getTabWidget().getChildAt(0).setVisibility(View.GONE);

        MapView mapView = (MapView) tabHost.getTabContentView().getChildAt(0).findViewById(R.id.mapview)
    }
} 
```

我希望这能解决你的问题。

# objective-c - 如何在 iPad 的单视图应用程序中以编程方式正确实例化和显示视图

> ID：10552978
> 
> 赞同：0
> 
> 时间：2012-05-11T14:07:45.427
> 
> 标签：objective-c, xcode, cocoa

我想知道如何以编程方式正确显示视图。我将尝试解释我到目前为止所做的事情：

该应用程序有一个带有两个视图控制器的故事板。其中之一有一个标识符：“detailview”。当我单击初始视图控制器上的按钮时，我想显示带有标识符“detailview”的视图控制器。目前我正在使用此代码：

```
TI4ViewController* vc = [self.storyboard instantiateViewControllerWithIdentifier:@"detailview"];
UIWindow* window = [UIApplication sharedApplication].keyWindow;                     
[window addSubview:vc.view]; 
```

这可以很好地显示视图“detailview”。但是，当我在 detailview 控制器上添加一个按钮并在 TI4ViewController（连接到“detailview”的视图控制器）中添加一个触地事件时，单击此按钮时出现异常。

我收到以下异常：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFType TestDown:]：无法识别的选择器已发送到实例 0x6e0f670”

我正在使用 Xcode 版本 4.3.2 (4E2002)

我不确定我在这里做错了什么。我认为 ViewController 已发布，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:16:45.210

您可以使用 segue，而不是添加另一个视图。[你可以在这里](http://howtomakeiphoneapps.com/using-storyboards-to-create-a-single-view-application/1363/)找到一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:43:52.580

问题解决了。我应该将 TI4ViewController 添加为初始视图控制器的属性。现在，当您离开该功能时，它已从内存中删除。

# jquery - 通过 jQuery 传递复选框组值

> ID：10552981
> 
> 赞同：0
> 
> 时间：2012-05-11T14:07:55.723
> 
> 标签：jquery, checkbox

我有一个让我感到困惑的“时刻”。

我有一个带有复选框组的表单。有 12 个复选框。它们的设置如下：

```
<input type="checkbox" id="search_shape1" name="search_shape[]" value="BR" /> 
<input type="checkbox" id="search_shape2" name="search_shape[]" value="AS" /> 
```

等等等等……

现在，我不是通过提交按钮提交它们，而是使用 jQuery 传递所有表单变量（此表单还包括 5 个 jQuery.ui 滑块。我使用的代码如下：

```
 $(function() {
    $("#epds").bind('submit',function() {
        var search_shape = $('#search_shape').val() || [];
        $.post('catalog/view/theme/emmaparker/template/information/db_query.php',{search_shape:search_shape}, function(data){
            $("#search_results").html(data);
        });
        return false; 
```

问题是，在我的处理页面（db_query.php）上，它永远不会得到复选框的结果。它确实得到了所有的滑块输入（输入类型=文本框..我从上面的代码中提取了所有这些）。我已经尝试了几乎所有东西，我只是感到困惑。我尝试将“search_shape”单独作为名称，将“search_shape[]”作为名称，一切。它只是不会传递一个值。

在 db_query 页面上，我尝试以多种方式输出值。我尝试过 print_r、简单的回显、将值设置为显式数组，然后将该变量设置为发布结果等。

我很茫然。谁能打我的头，让我知道我做错了什么？我确定这很简单，比如我没有正确传递 jQuery 中的值或其他东西。

谢谢，德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:55:35.660

这样的事情怎么样？尚未对其进行测试，但它应该像这样工作。

```
var group = new array();
$.each($("input[name='search_shape[]']:checked"), function() {
  group.push($(this).val());
}); 
```

# javascript - 使用 JQuery 将总和放入 Parent td

> ID：10552983
> 
> 赞同：0
> 
> 时间：2012-05-11T14:08:15.183
> 
> 标签：javascript, jquery, asp.net

我有以下内容`table`，我想将`sum`子表`input`放入`parent` `td`输入

```
<table cellspacing="0" rules="all" border="1" id="gvSPActivities" style="border-collapse: collapse;">
    <tr>
        <th scope="col">
            TextVal1
        </th>
        <th scope="col">
            TextVal2
        </th>
        <th scope="col">
            TextVal3
        </th>
    </tr>
    <tr class="gridrow2">
        <td>
            <input name="gvSPActivities$ctl02$TextVal1" type="text" id="gvSPActivities_TextVal1_0"
                class="numeric" style="width: 150px;" />
        </td>
        <td>
            <input name="gvSPActivities$ctl02$TextVal2" type="text" id="gvSPActivities_TextVal2_0"
                class="numeric" style="width: 150px;" />
        </td>
        <td>
            <input name="gvSPActivities$ctl02$TextVal3" type="text" id="gvSPActivities_TextVal3_0"
                class="total" style="width: 150px;" />

        <table>

       <tr>
           <td>
                        <input name="gvSPActivities$ctl02$gvBenefic$ctl02$txtMaleBenefic" type="text" id="gvSPActivities_gvBenefic_0_txtMaleBenefic_0" class="numeric" style="width:100px;" />
                        </td><td>
                        <input name="gvSPActivities$ctl02$gvBenefic$ctl02$txtFemaleBenefic" type="text" id="gvSPActivities_gvBenefic_0_txtFemaleBenefic_0" class="numeric" style="width:100px;" />
                        </td>

                </tr>

</table>
            </td>
    </tr>

</table> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:16:53.680

我不知道您何时要更新总数，但您可以使用此代码。

```
$('.gridrow2').each(function(){
    var total = 0;
    $(this).find('table > .numeric').each(function(){
        total += this.value;
    });

    $(this).find('.total').val(total);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:13:33.903

您的代码非常模糊，但我认为这就是您要寻找的内容：

```
$(".gridrow2 td input").onkeyup(function() {
    var sum = 0;

    $(".gridrow2 :input").each(function() {
        sum += $(this).val();
    });

    $("#gvSPActivities_gvBenefic_0_txtMaleBenefic_0").val(sum);
}); 
```

它将“父`<td>`输入”的值更改为三个子输入的总和。我认为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:14:54.600

```
var result = 0;

$('table > td.gridrow2 > table > td').each(function() {
  result += parseInt($(this).find('input.numeric').val());
});

$('td.gridrow2 > td:eq(2) > input[name="gvSPActivities$ctl02$TextVal3"]').val(result); 
```

# ios - 为什么当自定义 UIView 从 NIB 加载自身但也嵌入另一个 NIB 时，我得到无限循环

> ID：10552984
> 
> 赞同：1
> 
> 时间：2012-05-11T14:08:16.400
> 
> 标签：ios, objective-c, uiview

我有一个自定义 uiview (MyCustomView) 从 NIB (MyCustomView.xib) 加载其视图的问题。

问题是 MyCustomView 在其他 XIB 中被重用，所以 awakeFromNib 被调用。CustomView.xib 还包含 MyCustomView 的一个实例，因此 MyCustomView.awakeFromNib 中的 loadNibNamed 进入无限循环

我得到无限循环：

```
SomeVC.xib
+ calls MyCustomView awakeFromNib
++ which calls loadNibNamed: MyCustomView.nib
+++++ but top level View is also instance of MyCustomView
....so awakeFromNib: goes into infinite loop 
```

我只是想知道当自定义视图从笔尖加载其自身时，顶级 UIView 是否不应该是 MyCustomView 的实例？如果是这样，我如何连接插座/操作（我是否让 MyCustomView 成为文件所有者？）

无论如何欢呼

```
LONG EXPLANATION: 
```

我有一排按钮，我想在多个屏幕上重复使用。所以我创建了一个自定义视图

```
@interface ScreenMenuButtonsView : UIView
@property (retain, nonatomic) IBOutlet UIButton *buttonHome;
@property (retain, nonatomic) IBOutlet UIButton *buttonMyMusic;
@property (retain, nonatomic) IBOutlet UIButton *buttonStore;
@property (retain, nonatomic) IBOutlet UIButton *buttonSocial;
@property (retain, nonatomic) IBOutlet UIButton *buttonSettings;

@end 
```

我想在 IB 中布局视图，所以我创建了一个 NIB

```
ScreenMenuButtonsView_iPad.xib

Files Owner: no set NSObject
VIEW: ScreenMenuButtonsView
+ UIButton
+ UIButton
+ UIButton 
```

我希望自定义视图在内部加载自己的 NIB，我使用了 [http://nathanhjones.com/2011/02/20/creating-reusable-uiviews-with-a-drop-shadow-tutorial/ http://nathanhjones.com/2011/02/20/creating-reusable-uiviews-with-a-drop-shadow-tutorial/](http://nathanhjones.com/2011/02/20/creating-reusable-uiviews-with-a-drop-shadow-tutorial/) http:// /nathanhjones.com/wp-content/uploads/2011/02/ReusableTableHeaders.zip

```
- (id)initWithFrame:(CGRect)frame {

    //self = [super initWithFrame:frame]; // not needed - thanks ddickison
    if (self) {
        NSArray *nib = [[NSBundle mainBundle] 
                        loadNibNamed:@"HeaderView"
                        owner:self
                        options:nil];

        [self release]; // release object before reassignment to avoid leak - thanks ddickison
        self = [nib objectAtIndex:0];

        self.layer.shadowColor = [[UIColor blackColor] CGColor];
        self.layer.shadowOffset = CGSizeMake(1.0, 1.0);
        self.layer.shadowOpacity = 0.40;
    }
    return self;
} 
```

没关系，除非这假定您在某处调用 initWithFrame 来实例化 CustomView。HeaderView 示例这样称呼它：

```
// load the header - this could be done in viewWillAppear as well
HeaderView *header = [[HeaderView alloc] 
                       initWithFrame:CGRectMake(0, 0, 320, 60)];
header.lblTitle.text = @"That. Just. Happened.";
tblData.tableHeaderView = header;
[header release]; 
```

我希望能够在任何其他 XIB 中使用我的自定义视图类

HomeScreenViewController.xib

```
Files Owner: HomeScreenViewController
View:
+ ....other controls
+ ScreenMenuButtonsView 
```

问题是加载 HomeScreenViewController 时，它会在我的 customView 上调用 awakeFromNib：

所以我将 nib 加载出 initWithFrame 并移到一个名为 setupView 的方法中，并从 initWithFrame 和 awakeFromNib 调用它

```
- (id) initWithFrame:(CGRect)frame
{
    if ( ( self = [super initWithFrame: frame] ) )
    {
        [self setUpView];
    }
    return self;
}

- (void)awakeFromNib
{
    [self setUpView];
}

- (void) setUpView{

    if (self) {

        NSArray* nibViewsArray = nil;
        if([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad){
            //IPAD
            nibViewsArray = [[NSBundle mainBundle] loadNibNamed:@"ScreenMenuButtonsView_iPad"
                                                          owner:self
                                                        options:nil];    
...
} 
```

我的问题是加载 HomeScreenViewController.xib 时：

HomeScreenViewController.xib

```
Files Owner: HomeScreenViewController
View:
+ ....other controls
+ ScreenMenuButtonsView 
```

它尝试创建 ScreenMenuButtonsView 并且因为它在 NIB 中它调用 ScreenMenuButtonsView awakeFromNib

但是在这里我称之为 loadNibNamed：

```
- (void) setUpView{
    _viewSetupAlready = TRUE;
    //http://nathanhjones.com/2011/02/20/creating-reusable-uiviews-with-a-drop-shadow-tutorial/
    //self = [super initWithFrame:frame]; // not needed - thanks ddickison
    if (self) {
        NSArray* nibViewsArray = nil;
        if([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad){
            //IPAD
            nibViewsArray = [[NSBundle mainBundle] loadNibNamed:@"ScreenMenuButtonsView_iPad"
                                                          owner:self
                                                        options:nil];            
        }else{
            //IPHONE
            nibViewsArray = [[NSBundle mainBundle] loadNibNamed:@"ScreenMenuButtonsView_iPhone"
                                                     owner:self
                                                   options:nil];
        }
        if(nibViewsArray){
            //[self release];   // release object before reassignment to avoid leak - thanks ddickison                
            UIView * myView  = [nibViewsArray objectAtIndex: 0];

            //Check the top level object in NIB is same type as this custom class
            //if wrong you probably forgot to use correct NIB name in loadNibNamed:
            if([myView isMemberOfClass:[self class]]){

                self = (ScreenMenuButtonsView *)myView; 

            }else{
                NSLog(@"ERROR:top level view is not same type as custom class - are you loading the correct nib filename in loadNibNamed:\n%@", myView);
            }
        }else{
            NSLog(@"ERROR:nibViewsArray is nil");
        }
    }
} 
```

loadNibName: 加载

```
ScreenMenuButtonsView_iPad.xib

Files Owner: no set NSObject
VIEW: ScreenMenuButtonsView
+ UIButton
+ UIButton
+ UIButton 
```

但是顶视图是 ScreenMenuButtonsView 所以创建一个新实例并调用 awakeFromNib 并且我得到无限循环。

我知道为什么会发生循环并且 ScreenMenuButtonsView 上的实例正在从 xib 加载另一个实例。

我的问题在

ScreenMenuButtonsView_iPad.xib

```
Files Owner: no set NSObject
VIEW: ScreenMenuButtonsView
+ UIButton
+ UIButton
+ UIButton 
```

我应该改变视图：UIView

但是按钮的出口和操作呢：我应该更改文件所有者：没有设置 NSObject

成为视图类

文件所有者：ScreenMenuButtonsView

# c# - 自定义打印预览——设计选择

> ID：10552990
> 
> 赞同：0
> 
> 时间：2012-05-11T14:08:39.257
> 
> 标签：c#, .net, printing

我需要为我的 MVC Web 项目中的一个页面实现自定义打印预览屏幕。我只是想知道一些推荐的方法是什么。基本上，我们有一个包含许多不同选项的下拉菜单——每个选项在下拉菜单下显示不同的统计报告。对于打印预览，我只想预览报表，而不是整个页面。

我是否应该简单地获取 html 并切断我不想要的东西，然后重新渲染它？或者创建某种其他文档，可能是 XPS，然后显示它？备用CSS可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:35:50.803

并不是说任何人都可能感兴趣，但我最终只是使用原始页面中的 HTML 并禁用/重新设置所有链接和内容，并通过 javascript 隐藏不必要的元素。

# python - python正则表达式：html

> ID：10552995
> 
> 赞同：2
> 
> 时间：2012-05-11T14:08:48.427
> 
> 标签：python, html, regex

我有一个包含一行的 html 文件：

```
a = '<li><a href="?id=11&amp;sort=&amp;indeks=0,3" class="">H</a></li>' 
```

当我搜索时：

```
re.findall(r'href="?(\S+)"', a) 
```

我得到预期的输出：

```
['?id=11&amp;sort=&amp;indeks=0,3'] 
```

但是，当我将“i”添加到模式中时，例如：

```
re.findall(r'href="?i(\S+)"', a) 
```

我得到：

```
[ ] 
```

问题在哪里？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:09:51.767

问题是`?`具有特殊含义并且没有按字面匹配。

要修复，请像这样更改您的正则表达式：

```
re.findall(r'href="\?i(\S+)"', a) 
```

否则， 将`?`被视为应用于 的可选修改`"`。这恰好在您的第一个示例中起作用（偶然），但在第二个示例中不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T14:22:11.690

我个人认为 Python 的内置 HTMLParser 对于此类情况非常有用。我认为这根本不是矫枉过正——我认为它比正则表达式*更具*可读性和可维护性。

```
>>> class HrefExtractor(HTMLParser.HTMLParser):
...     def handle_starttag(self, tag, attrs):
...         if tag == 'a':
...             attrs = dict(attrs)
...             if 'href' in attrs:
...                 print attrs['href']
... 
>>> he = HrefExtractor()
>>> he.feed('<a href=foofoofoo>')
foofoofoo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:13:33.737

这里要注意的是，它在正`?`则表达式中具有特殊含义，它定义了任何事物的零次或一次出现。所以，如果你想要`<a>`标签中的 href 值，你应该使用 -

```
re.findall(r'href="(\?\S+)"', a) 
```

并不是

```
re.findall(r'href="?(\S+)"', a) 
```

所以，如果你不使用 ? 的特殊含义，你应该像a 或 b`\?`一样转义它或使用它。`ab?`你的使用方式？是不恰当的。

# ruby - 无法将字符串转换为整数 (TypeError)

> ID：10552998
> 
> 赞同：0
> 
> 时间：2012-05-11T14:09:00.097
> 
> 标签：ruby

以下代码返回错误“无法将字符串转换为整数”，请帮助

```
subject = ['eng','Math','Sci']
grade = ['grade 1','grade 2','grade 3']
subject.each do |sub|
    puts ("some string")
    grade[sub] .each do |grd|
        puts ("some string")
    end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:16:03.197

`grade[sub] .each do |grd|`那就是问题所在。

通过使用[整数索引或整数范围来访问数组元素。](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-size)

您正在尝试使用存储在`sub`. 由于这是一个普通的 .each 循环，它将循环数组中的所有元素，在本例中为`'eng','Math','Sci'`. 如果你想要例如的位置，`'eng'`你可以使用[`.each_with_index`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_index)

它可能应该只是

```
grade.each do |grd| 
```

它`each_with_index` 会是

```
subject.each_with_index do |sub, index|
  print sub
  print grade[index]
end 
```

如果您想要一个主题-> 成绩集合，那么像戴夫牛顿所说 的那样考虑使用[哈希可能会很好。](http://www.ruby-doc.org/core-1.9.3/Hash.html)

```
{"eng" => "grade 1","Math" => "grade 2","Sci" => "grade 3"}.each do |subject, grade|
  puts "#{subject| #{grade}"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:16:52.423

当你这样做

```
 grade[sub] .each do |grd| 
```

Ruby 希望`sub`使用整数来引用成绩列表中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:16:41.240

`subject`并且 `grade`都是数组。他们只能通过他们的位置来访问。在您的`each`循环中，块获取实际元素（in `sub`），而不是位置。因此，在第 5 行中，您尝试访问`grade['eng']`，这将不起作用并产生错误。请注意，与 PHP 不同，数组和散列（关联数组）是不同的东西。

从您的代码中猜测，您可能希望使用`each_index`而不是`each`将索引号传递给块而不是元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:27:59.127

我不确定我是否理解您要达到的目标；但是，如果您想打印科目和成绩，并且您确定数组中元素的相对顺序，您可以这样做：

```
subject = ['eng','Math','Sci']
grade = ['grade 1','grade 2','grade 3']
subject.each_with_index do |sub, idx|
    puts "#{sub} - #{grade[idx]}"
end 
```

输出：

```
eng - grade 1
math - grade 2
sci - grade 3 
```

然而，哈希可能更适合您的需求。