# StackOverflow 问答 11910000-11910999

# google-apps-script - 使用 Google App Script 的 HtmlService 提交表单

> ID：11910003
> 
> 赞同：4
> 
> 时间：2012-08-10T22:20:09.877
> 
> 标签：google-apps-script

我在使用 HtmlService 创建的 html 表单中调用服务器端 GAS 函数时遇到问题。HtmlService 文档说以下应该有效：

```
<form id='myForm'>
  <input name='myFile' type='file'>
  <input name='aField'>

  <input type='button' onclick='google.script.run.processForm(this.parentNode)'>
</form> 
```

我正在使用类似的东西：

```
<form id='approveForm'>
  <b>Enter Notes about this Approval : </b>
  <br /><br />
  <textarea id = 'approvalNotes' rows='10' cols='135'>Enter notes on this approval for future reference...</textarea>
  <br /><br />
  <b>Request Approved?</b>
  <br /><br />
  <input name = "decision" type="radio" id = 'rApproval' value='Yes'/>Yes<br />
  <input name = "decision" type="radio" id = 'rApproval' value ='No'/>No<br />
  <input name = "decision" type= "radio" id = 'rApproval' value='Pending'/>Pending<br />
  <br /><br />
  <b>Set the Group/List Type : </b>
  <br /><br />
  <input name = "gltype" type="radio" id = 'glType' value='Group'/>Group<br />
  <input name = "gltype" type="radio" id = 'glType' value='List'/>List<br />
  <input name = "gltype" type="radio" id = 'glType' value='?'/>?<br />
  <br />
  <input type='button' value='submit' onclick='google.script.run.processForm(this.parentNode)'>
</form> 
```

尽管我做了几乎与文档所说的用于表单提交相同的事情，但我的服务器端函数没有被调用。有人可以告诉我我可能做错了什么以及我如何能够解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T05:00:31.540

目前这个问题正在[这里](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1660&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)跟踪，HtmlService 中的表单有问题。“[如何在使用新 HtmlService 创建的 UI 中输入值](https://stackoverflow.com/questions/11260247/how-to-get-value-entered-in-ui-created-with-the-new-htmlservice/11300412#11300412)”提供了一种解决方法，但如果您要处理文件，它就不能很好地工作，因为它只适用于文本。

# ios - 为什么 KVO 不能在 UIView 子类上工作？

> ID：11910007
> 
> 赞同：0
> 
> 时间：2012-08-10T22:20:33.857
> 
> 标签：ios, cocoa-touch, uiview, key-value-observing

我有一个 UIView 子类，它又具有一个 contentView，在公共标头中声明如下：

```
@property (nonatomic,retain)UIVivew* contentView; 
```

每当 contentView 的框架发生变化时，我都会尝试获取 KVO 通知，但在我的 UIView 子类中从未调用过 observeValueForKeyPath 方法：

```
@implementation MyView

@synthesize contentView = _contentView;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        [self.contentView addObserver:self 
                           forKeyPath:@"frame" 
                              options:(NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld) 
                              context:nil];
    }   
    return self;
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([keyPath isEqualToString:@"frame"]) {
        CGRect newContentFrame = [[change objectForKey:NSKeyValueChangeNewKey] CGRectValue];
        CGRect selfNewFrame = self.frame;
        selfNewFrame.size = CGSizeMake(newContentFrame.size.width + 10, newContentFrame.size.height + 10);
        self.frame = selfNewFrame;
    }

    [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
} 
```

关于为什么 KVO 没有触发的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:37:04.160

对不起……我猜是剥夺睡眠……

忘记分配/初始化 contentView。

# python - Urwid：如何选择整行，而不是一列？

> ID：11910014
> 
> 赞同：2
> 
> 时间：2012-08-10T22:21:10.737
> 
> 标签：python, urwid

[我围绕这个例子](http://www.nicosphere.net/selectable-list-with-urwid-for-python-2542/)进行编码，当我按下向上或向下箭头时，我不明白如何选择整行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:50:46.047

由于`Columns`widget不支持多选，所以需要使用自己的容器widget（可以基于`Columns`with redefined`render`方法），或者只是Text，例如这个：

```
def __init__ (self, id, description):
    self.content = 'item %s: %s...' % (str(id), description[:25])
    self.item = urwid.AttrWrap(
        urwid.Text('item %s: %s' % (id, description)), 'body', 'focus'
        )
    super(ItemWidget, self).__init__(self.item) 
```

工作正常。此外，如果您需要填充，您可以使用字符串格式来模拟它。

# android - 如果用户没有点击项目位置，android listview 会说“New”

> ID：11910017
> 
> 赞同：0
> 
> 时间：2012-08-10T22:21:56.200
> 
> 标签：android, android-layout, android-listview

我有一个列表视图，基本上，如果用户尚未单击该位置，我希望`Listview`填充并显示“新建”，然后在用户单击该项目后将可见性设置为消失。谁能帮助我？`TextView``TextView``Listview`

我已经尝试了相当多的一些代码，当然通过反复试验，擦除代码，所以我无法向您展示我尝试过的所有内容。这是我尝试的最后一件事：

```
 // selecting single ListView item
    final ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long ide) {

            if (lv.isPressed(view.hasFocus(position))) { 
                newjob.setVisibility(View.VISIBLE); 
            } else { 
                newjob.setVisibility(View.GONE); 
            } 

               vib.vibrate(40); 

                // Starting new intent 
                try { 
                Intent in = new Intent(getApplicationContext(), 
                        SingleMenuItemActivity.class); 
                in.putExtra("jobInfo", JOBS.getJSONObject(position).toString()); 
                in.putExtra(pays, JOBS.getJSONObject(position).toString());
                in.putExtra(job, JOBS.getJSONObject(position).toString());
                in.putExtra(ready_at, JOBS.getJSONObject(position).toString());
                in.putExtra(due_by, JOBS.getJSONObject(position).toString());
                in.putExtra(customer_reference, JOBS.getJSONObject(position).toString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T22:30:14.690

这是一种方法，只需覆盖[OnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)：

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // Change your TextView's visibility to gone
        view.findViewById(R.id.textView).setVisibility(View.GONE);
    }
}); 
```

**从新代码更新**

看起来您正在使用 ListActivity 或 ListFragment。如果是这样，我建议使用 onListItemClick() 而不是 onItemClick() 因为它已经设置：

```
@Override
protected void onListItemClick (ListView listView, View view, int position, long id) {
    view.findViewById(R.id.textView).setVisibility(View.GONE);
} 
```

# ios - 如何使用新项目更新现有应用程序？

> ID：11910023
> 
> 赞同：3
> 
> 时间：2012-08-10T22:22:39.290
> 
> 标签：ios, xcode

我有一个通用 iOS 应用程序，它已经在 App Store 上架了两年。我正在为它进行大规模更新。从那以后我学到了很多东西，我觉得对我来说最好的事情就是从头开始重写应用程序。我可以只删除应用程序，但我宁愿从头开始一个新的 Xcode 项目并将其作为更新提交。

但是，我不确定这是否可行。我需要在 plist 和其他设置中进行哪些更改，以便将这个新项目识别为对现有项目的更新？甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T22:49:31.900

在开发新应用时，您应该只能使用现有应用的应用 ID/配置文件。

在 XCode 中，您可以将 Bundle ID 设置为应用程序的标识符，并更新 CFBundleVersion 和 CFBundleShortVersionString 以反映应用程序的当前版本。

请记住，您*无法添加*所需的设备功能（意味着使其更具限制性），因此它必须与旧版本的功能相匹配。

# android - Activity 不执行任务

> ID：11910029
> 
> 赞同：1
> 
> 时间：2012-08-10T22:23:34.860
> 
> 标签：android, android-asynctask

我做了这个活动，但任务没有开始。我对其进行了调试，onStart() 进入 task.execute() 行，但它从未进入 doInBackground()。在正在运行的任务列表中有一个 AsyncTask，我假设它是这个。我只是看不出问题出在哪里。这是代码。

```
package pl.edu.elka.pw.hosewski.wifi;

public class NetDetail extends Activity implements OnClickListener{

private LineGraph lgNet;
private WifiManager wifi;
private WiFiDetail net;
private DBSource dbs;
private DBWifi dbw;
private TextView ssid;
private TextView bssid;
private TextView freq;
private TextView capab;
private SharedPreferences getPrefs;
private int interval;
private LineRefresh task;
private ViewSwitcher psSwitch;
private Button bSwitch;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.netdetail);
    dbs = new DBSource(this);
    dbs.open();
    getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    wifi = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
    psSwitch = (ViewSwitcher) findViewById(R.id.psSwitch);
    bSwitch = (Button) findViewById(R.id.bSwitch);
    lgNet = (LineGraph) findViewById(R.id.lgNet);
    lgNet.setClickable(true);
    lgNet.setOnClickListener(this);
    bSwitch.setOnClickListener(this);
    Bundle b = getIntent().getExtras();
    long i = b.getLong("index");
    dbw = dbs.getWifi(i);
    net = WiFiList.getDetailByBSSID(dbw.getBssid());
    lgNet.setDetail(net);
    ssid = (TextView) findViewById(R.id.tvSSID);
    bssid = (TextView) findViewById(R.id.tvBSSID);
    freq = (TextView) findViewById(R.id.tvFrequen);
    capab = (TextView) findViewById(R.id.tvCapab);
    ssid.setText(dbw.getSsid());
    bssid.setText(dbw.getBssid());
    freq.setText(dbw.getFrequency() + " MHz");
    capab.setText(dbw.getCapability());
    this.setTitle(dbw.getSsid()+ " - detale");
    interval = Integer.parseInt(getPrefs.getString("intervals", "5"));
    task = new LineRefresh();
}

class LineRefresh extends AsyncTask<Void, Void, Void>{

    @Override
    protected void onProgressUpdate(Void... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
        updLines();
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        while(wifi.isWifiEnabled()){
            publishProgress();
            try {
                Thread.sleep(interval);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if(isCancelled()){
                break;
            }
        }
        return null;
    }

}

public void updLines(){
    lgNet.setDetail(net);
    lgNet.postInvalidate();
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
    dbs.close();
    task.cancel(true);
}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    task.execute();
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.lgNet:
        psSwitch.showNext();
        break;
    case R.id.bSwitch:
        psSwitch.showPrevious();
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:38:05.127

之后`task = new LineRefresh()`，添加`task.execute(null)`。您可能需要也可能不需要“null”参数，请参阅 Eclipse 告诉您的内容。

# javascript - 如何拦截并获取重定向 URL 标头中的位置？

> ID：11910034
> 
> 赞同：3
> 
> 时间：2012-08-10T22:24:03.993
> 
> 标签：javascript, jquery, http, redirect

我有一个在休息调用中传递给我的 uri，它是一个重定向 url，我希望能够拦截调用以在标头中获取重定向“位置”。

以下代码为位置标头返回 null。执行此客户端的正确方法是什么？

```
$(document).ready(function () {
    $.ajax({
        url: 'http://myserver.com/redirect?token=AAAnY13Y-76LZ4zXDOd',  // obviously not cross domain and contains redirect location to a youtube link to embed in my page, http://www.youtube.com/embed/bl2j345-xy
        data: {
            something: 'someotherthing'
        },
        complete: function (request, status) {
            var location = request.getResponseHeader("Location");  // this is null...it shows up in Fiddler as http://www.myotherserver.com in the Location Header
        },
        error: function (request, error) {
            alert(request.responseText);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:35:00.417

你为什么不设置 -> [http://myserver.com/redirect?token=AAAnY13Y-76LZ4zXDOd](http://myserver.com/redirect?token=AAAnY13Y-76LZ4zXDOd)返回重定向位置[http://www.myotherserver.com](http://www.myotherserver.com) 等等：

```
complete: function (request, status) {
window.location.href=request;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:10:29.537

使用这个[**小提琴**](http://jsfiddle.net/FranWahl/CszL7/1/)。我稍微更新了您的代码，添加了一些用于调试的控制台输出，因为我目前总是得到错误：`NETWORK_ERR: XMLHttpRequest Exception 101`。

我所做的主要更改是设置`async: false`. 这很重要，因为您不希望请求在完成之前返回。如果未指定默认设置`async: true`，这会导致 ajax 调用立即返回，这可能就是即使调用成功，您也不会看到任何响应标头的原因。

我还添加了一个`success: function...`带有简单调试的回调，以确保它在进入时被捕获。

另请查看 ajax[**文档**](http://api.jquery.com/jQuery.ajax/)中有关 crossDomain 非异步请求和 crossDomain 设置的部分：

> **async**
> *默认值：true*
> 默认情况下，所有请求都是异步发送的（即默认设置为 true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。
> 
> **crossDomain(添加 1.5)**
> *默认值：同域请求为 false，跨域请求为 true*
> 如果您希望在同一域上强制执行跨域请求（例如 JSONP），请将 crossDomain 的值设置为 true。例如，这允许服务器端重定向到另一个域。

我不确定重定向是否被认为是跨域的，但我猜上述的组合是错误和空请求标头的原因。

# playn - playn 骨骼构建排除 jbox2d

> ID：11910035
> 
> 赞同：0
> 
> 时间：2012-08-10T22:24:05.937
> 
> 标签：playn, jbox2d

为什么默认playn骨架项目不包含jbox2d？以及如何将它包含在 Maven 构建中？我确实了解如何将其包含到我的 IDE 中，但我希望 maven 构建包含来自 git go 的此依赖项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:18:29.300

不是每个游戏都需要它。

有关使用它的示例，请参见： [示例 pom.xml](http://code.google.com/p/playn-samples/source/browse/showcase/core/pom.xml#16)

# php - 谷歌货币转换器返回奇怪的字符串

> ID：11910036
> 
> 赞同：1
> 
> 时间：2012-08-10T22:24:36.190
> 
> 标签：php

我正在尝试向谷歌货币转换器 URL 发出 curl 请求。这部分有效，我取回了 JSON 数据，但是数据似乎采用了错误的编码。如果我尝试以任何方式转换编码或调整值，它将不起作用，并且我的 json_decode 返回 NULL。

我需要指定编码还是与没有引号的键有关？

下面是一些从他们那里得到结果的代码：

```
 $url = "https://www.google.com/ig/calculator?hl=en&q=" . $amount . $from . "=?" . $to;

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");
    curl_setopt($ch, CURLOPT_TIMEOUT, 60);
    $return = curl_exec($ch);
    curl_close($ch);

    var_dump($return); 
```

结果通常是围绕这个 `{lhs: "9Â 808.90 U.S. dollars",rhs: "7Â 986.40287 Euros",error: "",icc: true}`

我将编码转换为 ISO-8859-1 并且它有适当的空格，但它仍然无法正确 json_decode ...

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:21:20.830

您的值是“808.90 美元”。只需爆炸（）字符串并提取数据。

```
$data = explode('"', $url);
$data = explode(' ', $data['3']);
$var = $data['0'];
return round($var,3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:26:38.497

我从来没有得到那些奇怪的字符串。

测试.php

```
<?php
    $amount = '10$';
    $to = 'EUR';
    $url = "https://www.google.com/ig/calculator?hl=en&q=" . $amount . $from . "=?" . $to;

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");
    curl_setopt($ch, CURLOPT_TIMEOUT, 60);
    $return = curl_exec($ch);
    curl_close($ch);

    // dump the output
    var_dump($return);

    /*
    string(59) "{lhs: "10 US$",rhs: "8.14199642 Euros",error: "",icc: true}"
    */

    // quote the unquoted data from Google
    $forJSON = str_replace(array('lhs', 'rhs', 'error', 'icc'), array('"lhs"', '"rhs"', '"error"', '"icc"'), $return);

    // decode the JSON string and turn it into an array
    $toArray = json_decode($forJSON, true);

    // dump the array
    print_r($toArray);

    /* 
    Array
    (
        [lhs] => 9 808.90 U.S. dollars
        [rhs] => 7 986.40287 Euros
        [error] => 
        [icc] => 1
    )
    */
?> 
```

你应该尝试的事情：

*   确保将文件保存为 ANSI - 否则会得到奇怪的值
*   如果上述解决方案不起作用，请尝试重新制作文件，某处必须有编码。
*   或者你可能从一些实际上并没有使用的程序中复制了 9,808.90，`,`它是那里的另一个字符
*   您还应该知道 Google 使用未引用的数据进行响应，这不是 JSON 有效的，尝试像我一样逃跑，您应该能够解码

# php - 如何根据php中的已知ID在目录中查找文件？

> ID：11910037
> 
> 赞同：0
> 
> 时间：2012-08-10T22:25:21.543
> 
> 标签：php, regex, join, readdir

我在服务器上的文件夹中有一些图像：

```
/9_123456.jpg
/10_123457.jpg
/21_123458.jpg
/14_123459.jpg
... 
```

我也有一个保存这些文件名的数据库。

```
id    file
9     9_123456.jpg
10    10_123457.jpg
21    21_123458.jpg
14    14_123459.jpg 
```

我此时正在做的是查询图片名称并将其显示在网页上。

问题是我有数百万张图片，有时这些图片需要一段时间才能恢复，特别是如果我必须与其他一些图片一起加入该表。

我想做的是忽略该数据库表并编写一个 php 函数，让我得到这样的图片：

```
look in that directory and find a pic that begins with 9, or 10 , or whatever, because i know that number. some kind of a regexp. 
```

我的问题是，这种方法会比查询更快吗？我将如何查找该文件？

希望我让自己足够清楚。

感恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:28:17.780

有[glob](http://at2.php.net/manual/en/function.glob.php)可以帮助您：尝试`glob($id.'_*.jpg');`

性能取决于您的系统。非常笼统地说：在 Windows 上它会更慢（由于`*`语义的构建方式），在 Unices YMMV 上。我在使用 Linux 和 ReiserFS 时获得了出色的结果，并且在使用 Linux 和 ext* 时获得了非常有用的结果。如果访问了许多图像，则很有可能您在缓存中拥有该目录。但请注意，记忆压力是其中的一个因素！

# css - CSS 不兼容：Nivo 滑块推动页面元素出错

> ID：11910038
> 
> 赞同：0
> 
> 时间：2012-08-10T22:25:29.593
> 
> 标签：css, html, nivo-slider

任务：放入 Pic 所在的 Nivo Slider

结果：RSS 提要、搜索和页面下半部分离开

问题：如何修复 CSS 以对齐 RSS 提要、搜索和页面底部

[这是带有 Nivo Slider 所在图片的站点： http](http://scottjaxon.com/devsite/index.html) ://scottjaxon.com/devsite/index.html

这是我第 43 次尝试将其对齐： [http ://scottjaxon.com/devsite/testnivo43.html](http://scottjaxon.com/devsite/testnivo43.html)

网站的 CSS：

```
/* home */

#wrapper #user1 #feahome {
min-height: 341px;
height: auto !important;
height: 341px;
}
#wrapper #user1 #feahome #containerflash {
width: 960px;
height: 325px;
overflow: visible;
border-bottom: 3px solid #FFFFFF;
}
#wrapper #user1 #feahome #rsshome {
float: left;
color: #FFFFFF;
width: 440px;
height: 20px;
margin-bottom: 6px;
padding: 6px 20px 0px 20px;
border-right: 1px solid #FFFFFF;
}
#wrapper #user1 #feahome #searchhome {
float: left;
color: #FFFFFF;
height: 22px;
margin-top: 8px;
padding: 0px 20px 0px 20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:46:13.853

最大的问题是您的包装器 div 过早关闭。从我在顶部标记的位置删除 div 并将其添加到底部的 body 标签之前。看截图：

![包装div问题](../Images/67ca5afebfe9f93c2b7bcf9d077c2825.png)

# ruby - `exec'：字符串包含空字节（ArgumentError）

> ID：11910040
> 
> 赞同：7
> 
> 时间：2012-08-10T22:25:36.653
> 
> 标签：ruby, string, arguments, cmd, exec

```
cmd = "snv co #{rep} --username #{svn_user} --password #{pxs}" 

puts cmd  # this code wotks and prints all vars values normally

exec(cmd) 
```

```
xpto.rb:69:in `exec': string contains null byte (ArgumentError)
    from xpto.rb:69 
```

```
$ ruby -v
ruby 1.8.7 (2010-01-10 patchlevel 249) [i686-linux]
$ gem -v
1.3.7 
```

这是怎么回事？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T23:02:23.850

你的`cmd`字符串不知何故有一个空（即零）字节。Using`puts`不会显示任何空字节，它们只会被排除在输出之外：

```
1.8.7 :001 > exec "\0"
ArgumentError: string contains null byte
        from (irb):1:in `exec'
        from (irb):1
1.8.7 :002 > puts "n\0n"
nn
 => nil 
```

您可能应该检查您的`rep`,`svn_user`和`pxs`变量是如何填充的，以查看您是否可以追踪这些空字节的来源，但作为一种快速修复，您可以使用`gsub!`它们来删除它们：

```
cmd.gsub!(/\0/, '') 
```

# android - Android - 在 android 版本 4.0.3 以上的 WebView 中突出显示文本

> ID：11910041
> 
> 赞同：3
> 
> 时间：2012-08-10T22:25:46.677
> 
> 标签：android, search, webview, find, highlight

我有一个执行搜索的 webview，此代码适用于 android 版本 4.0.3 以下，在此版本及更高版本中，突出显示功能无法突出显示。搜索本身可以工作并跳转页面，但没有显示任何结果（除非你看起来足够努力！）。

我想知道是否有人知道支持高于 4.0.3 的解决方法？

其他答案中的人已将这些网页链接为可能的解决方案，但我不确定如何将其适应我在 Android 中的 webview。

网页：

```
http://4umi.com/web/javascript/hilite.php#thescript
http://www.nsftools.com/misc/SearchAndHighlight.htm 
```

我目前用于搜索和突出显示的代码：

```
 public boolean onKey(View v, int keyCode, KeyEvent event) {
            if ((event.getAction() == KeyEvent.ACTION_DOWN)
                    && ((keyCode == KeyEvent.KEYCODE_ENTER))) {
                wv.findAll(findBox.getText().toString());

                try {
                    Method m = WebView.class.getMethod("setFindIsUp",
                            Boolean.TYPE);
                    m.invoke(wv, true);
                } catch (Exception ignored) {
                }
            }
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:52:05.817

在 Android 4.1(jellybean) 中，`WebView.findAll()`已弃用，我们应该`WebView.findAllAsync`改用它。

[参考](http://developer.android.com/reference/android/webkit/WebView.html#findAll(java.lang.String))

希望得到帮助:)

# c++ - 在课堂上制作过滤器

> ID：11910042
> 
> 赞同：0
> 
> 时间：2012-08-10T22:25:47.650
> 
> 标签：c++, filter

我正在制作一个将多条记录保存在一个文件中的程序。我有代表不同记录的不同类和另一个类，一个管理文件的模板类。

```
template <class DataType> class Table
{
public:
    Table(const char* path);
    bool add(const DataType& reg);
    template <class FilterType> void print(const FilterType& filter) const
    {
        DataType reg;
        ...

        if (reg == filter)
        {
            cout << reg << endl;
        }

        ...
    }

private:
    const char* path;
};

class Student
{
public:
    char cods[5];
    char noms[20];
};

class Course
{
public:
    char codc[5];
    char nomc[20];
};

class Rating
{
public:
    char cods[5];
    char codc[5];
    int prom;
} 
```

我必须打印一个学生以及一门课程中所有学生的评分。像这样的东西：

```
Table<Rating> trat("path.dat");
trat.print("A001") //print the ratings for student A001.
trat.print("C001") //print the students for course C001. 
```

所有帮助将不胜感激。

- - - 编辑 - - - -

好的，谢谢你的回答。我使用 cstrings 是因为我需要为类中的每个成员设置一个固定大小，因为我要将这些类写入文件。

我想要完成的是制作一个适用于任何类型或记录的模板类表。

我一直在想的是我可以使用运算符重载进行比较和输出。

像这样的东西：

```
class Student
{
public:
    char cods[5];
    char noms[25];

    class CodsType
    {
    public:
        CodsType(const string& cods) : cods(cods) {}
        operator string() const { return cods; }
        string cods;
    };
};

class Course
{
public:
    char codc[5];
    char nomc[20];

    class CodcType
    {
    public:
        CodcType(const string& codc) : codc(codc) {}
        operator string() const { return codc; }
        string codc;
    };

};

class Rating
{
public:
    char cods[5];
    char codc[5];
    int prom;

    bool operator==(const Course::CodcType& codc) const
    {
        return (this->codc == string(codc));
    }
    bool operator==(const Student::CodsType& cods) const
    {
        return (this->cods == string(cods));
    }
}; 
```

接着：

```
Table<Rating> trat("path.dat");
trat.print(Student::CodsType("A001")) //print the ratings for student A001.
trat.print(Course::CodcType("C001")) //print the students for course C001. 
```

但问题是我必须为每个过滤器做一个类。有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:29:31.033

首先“你想做什么”？

模板功能强大，其他功能强大，但它们不会自行思考。您仍然需要了解您要做什么。

第一：你正在用 C++ 编程。不要使用 char 数组。使用标准::字符串。在大多数情况下，这就是您想要的，一些“文本”。

```
#include <string>    

class Student
{
public:
    std::string cods;
    std::string noms;
}; 
```

第二：你是什么意思`reg == filter`？？？reg 和 filter 有不同的类型！他们不能平等！如果要比较它们，则需要定义“相等”的含义。

模板帮不了你。他们不是魔杖。你需要自己思考。如果您仅将模板用于一种类型，则不需要模板。

```
#include <string>

class Table
{
  Table(const std::string & path);
  bool add(const Student & a);  // add student to table
  bool add(const Course & a);   // add course to table
  bool add(const Rating & a);   // add rating to table
  void filter(const std::string & str) const; // filter by string and print
};

void Table::filter(const std::string & str)
{
  // find students, courses, and ratings here
} 
```

你仍然需要弄清楚你想如何处理这 3 个结构。这仍然取决于你

# wordpress - EventBrite OAuth2.0 重定向网址不起作用

> ID：11910044
> 
> 赞同：0
> 
> 时间：2012-08-10T22:25:59.133
> 
> 标签：wordpress, redirect, oauth, oauth-2.0, eventbrite

我们正在构建一个与 EventBrite API 集成的 wordpress 站点，自上周以来，每次用户被重定向回我们的站点时，我们都会收到错误消息。

例如，当我设置`www.google.com`为我的重定向 URL 时，我将被重定向到`www.google.com/www.google.com`，因此网络服务器将返回错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:30:29.943

您是否仔细检查[了 API Key](http://eventbrite.com/api/key/)的[redirect_uri 设置](http://developer.eventbrite.com/doc/authentication/oauth2/)？

如有此类问题，请随时联系[Eventbrite API 团队](http://developer.eventbrite.com/contact-us/)寻求帮助。

# android - Android 应用内结算的签名数据为空

> ID：11910046
> 
> 赞同：1
> 
> 时间：2012-08-10T22:26:14.850
> 
> 标签：android, in-app-billing

我正在使用[AndroidBillingLibrary为我的 Android 应用程序实现应用内计费](https://github.com/robotmedia/AndroidBillingLibrary/.)

我已将 apk 上传到 Google play 并发布了应用内商品。然后我在我的设备上安装了与我上传到 Google Play 相同的 apk。当我尝试购买应用内 Android 市场时，会将空字符串作为签名数据发送到 purchaseStateChanged 侦听器。对此有什么想法吗？

# java - 匹配“#word1-word2-word3...”

> ID：11910049
> 
> 赞同：3
> 
> 时间：2012-08-10T22:26:36.110
> 
> 标签：java, regex, parsing, pattern-matching

我对正则表达式非常陌生，因此想知道是否有人可以帮助我生成正则表达式以匹配以下模式：

#aeronautical-航天

所以它只是一个“#”，后跟一个或多个单词，每个单词用连字符分隔。我尝试了以下正则表达式，但没有找到匹配项：

#\w+-?\w*-?\w*

但我想这仅说明带有“#”的正则表达式，后跟一个、两个或三个用连字符分隔的单词。我将如何解释“#”后跟由连字符分隔的任意数量的单词？

我再次道歉，因为我知道这是一个相当基本的问题，但我一直在寻找好的教程，但是虽然那里有很多教程，但其中大多数在以简单的方式解释正则表达式方面做得非常糟糕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T22:34:55.310

你要这个：

```
#\w+(-\w+)+ 
```

所以这意味着您需要一个“#”，后跟一个或多个字母，然后是一组或多组连字符和一个或多个字母。让我知道这是否有帮助。

# c++ - 在 C++11 中使用 futures、async 和 thread 实现搜索

> ID：11910051
> 
> 赞同：3
> 
> 时间：2012-08-10T22:27:12.443
> 
> 标签：c++, multithreading, asynchronous, c++11, future

我想以多线程方式实现分支和绑定搜索。特别是，我想用它`async`来包装每个分支的搜索调用，然后等到某个线程给出答案，然后退出。（理想情况下，我想取消其他线程，但线程取消不在标准中）。这是一些简化的代码：

```
#include <iostream>
#include <random>
#include <future>
#include <thread>

using namespace std;

mt19937 rng;
uniform_int_distribution<unsigned> random_binary(0, 1);

bool search() {
  return static_cast<bool>(random_binary(rng));
}

#define N 10000

int main()
{
  rng.seed(42);

  std::vector<future<bool>> tasks;

  for (unsigned i=0; i<N; ++i)
    tasks.push_back(async(launch::async, search));

  // Don't want to wait sequentially here.
  for (unsigned i=0; i<N; ++i) {
    tasks[i].wait();
    if (tasks[i].get()) {
      cout << "i = " << i << "\n";
      break;
    }
  }
  return 0;
} 
```

`search()`是搜索功能。它根据是否找到答案返回真/假。我返回一个随机答案以供说明。但问题的症结在于调用`tasks[i].wait()`. 现在，我正在按顺序等待任务完成。相反，我想做这样的事情：

```
auto x = wait_for_any(tasks.begin(), tasks.end());
x.get();
// cancel other threads.
// Profit? 
```

什么是实现这一目标的好方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T22:43:37.220

`std::future`提供了一个[`valid()`](http://en.cppreference.com/w/cpp/thread/future/valid)函数，可以让您检查结果是否可用而不阻塞，因此您可以使用它，例如在忙等待循环中：

```
std::future<bool>* res_future = 0;
for(size_t i = 0; ; i==tasks.size()?i=0:++i){
  // could add a timeout period to not completely busy-wait the CPU
  if(tasks[i].wait_for(std::chrono::seconds(0)) == std::future_status::ready){
    res = &tasks[i];
    break;
  }
}

bool res = res_future->get(); 
```

`std::future`为了使这样的任务更容易，建议添加一个在结果可用时`.then(func_obj)`异步调用 的方法，您可以在其中设置标志或其他东西。`func_obj`

遗憾的是，我不知道可能`wait_for_any`以上述任何其他方式实施的方法。：/

```
template<class FwdIt>
std::future<bool> wait_for_any(FwdIt first, FwdIt last)
{
  return std::async([=]{
    for(FwdIt cur(first); ; cur==last?cur=first:++cur){
    // could add a timeout period to not completely busy-wait the CPU
    if(cur->wait_for(std::chrono::seconds(0)) == std::future_status::ready)
      return cur->get();
  });
} 
```

线程销毁通常通过合作取消来完成。

PS：如果结果不可用，`std::future<T>::get()`将自动。`wait()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T23:17:29.653

安排所有任务都可以访问相同`condition_variable`的`mutex`、 和`bool`。这可以通过使这些全局变量或每个任务运行成员函数的成员数据来完成，或者您可以将它们`std::ref`作为参数传递给任务创建函数。

在开始任何任务之前初始化`bool`to 。`not_found`然后主线程启动任务并等待`condition_variable`. 然后搜索器任务进行搜索。当他们搜索时，他们偶尔会检查`bool`（可能带有原子负载）以查看它是否已设置为`found`. 如果有，搜索线程立即返回。

当一个线程找到结果时，它将设置`bool`为`found`并发出信号`condition_variable`。这将唤醒主线程并有效地取消其余的搜索任务。然后，主线程可以加入、分离、放弃等所有搜索任务。如果您没有 main 显式加入搜索器任务，最好安排所有搜索器任务在 main 退出之前结束。

没有投票。无需等待死胡同搜索。唯一的临时部分是弄清楚搜索者任务检查`bool`. 我建议对这部分进行性能测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-23T03:30:01.510

我将采取的方法是让 main 函数创建 a`std::promise`然后作为对将要完成工作的各种线程的引用传递。一旦获得结果，每个工作线程将使用`std::promise`它们共享的所有线程。`set_value()`

哪个工作线程首先到达那里将能够发送结果，而其他线程在尝试使用`set_value()`并且已经设置时会抛出异常。

在我正在使用的源代码框架中，但如果我们可以分离自治线程而不创建不用于任何东西`std::async`的附加部分，那就太好了。`std::promise`

所以代码骨架看起来像：

```
#include <iostream>
#include <thread>  // std::thread is defined here
#include <future>  // std::future and std::promise defined here

bool search(int args, std::promise<int> &p) {

    // do whatever needs to be done

    try {
        p.set_value(args);
    }
    catch (std::future_error & e) {
        // std::future_errc::promise_already_satisfied
    }
    return true;
}
int main(int argc, char * argv[])
{
    std::promise<int> myProm;    
    auto fut = myProm.get_future();

    for (int i = 1; i < 4; i++) {
        std::async(std::launch::async, search, i, std::ref(myProm));
    }

    auto retVal = fut.get();
    return 0;
} 
```

# basecamp - 是否有适用于新大本营的 iPad 应用程序？

> ID：11910052
> 
> 赞同：-1
> 
> 时间：2012-08-10T22:27:13.120
> 
> 标签：basecamp

我一直是 37Signals 项目管理工具 Basecamp 的忠实粉丝。37Signals 已经完全控制了该网站。不幸的是，我在 ipad 上使用的所有第三方应用程序现在都无法使用。

有谁知道是否有适用于“新大本营”的应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:39:49.710

我还没有找到适合 iPad 的版本，但有一些 iPhone 版本可以缩放到 iPad。我知道这不完全是你的问题，但很难找到 iPhone 的，所以我希望这会有所帮助。

*   [小屋](http://itunes.apple.com/us/app/lodge-basecamp-next/id533964216?mt=8)
*   [西装冠军](http://itunes.apple.com/us/app/suitchamp-new-basecamp-next/id553742298?mt=8)

我用过洛奇。很好，但真的希望它在 iPad 上。另一个是我没见过的新的。这是一个值得关注的好地方：

*   [http://basecamp.com/extras](http://basecamp.com/extras)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:02:31.157

[http://basecamp.com/mobile](http://basecamp.com/mobile)。Basecamp 刚刚发布了他们的 iPhone 应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T22:25:10.300

Basecamp 今天刚刚推出了他们的官方 iPad 应用程序：

[https://itunes.apple.com/us/app/basecamp-for-ipad-official/id898020776?ls=1&mt=8](https://itunes.apple.com/us/app/basecamp-for-ipad-official/id898020776?ls=1&mt=8)

# tdd - 测试正确的东西，避免重复覆盖的技术

> ID：11910057
> 
> 赞同：4
> 
> 时间：2012-08-10T22:27:50.583
> 
> 标签：tdd, code-coverage

考虑以下事件序列：

1.  你编写了一个函数`A()`来完成一个工作单元
2.  您为函数 A() 编写测试以确保不存在错误
3.  您编写`B()`使用函数的函数`A()`
4.  您为功能编写了一个测试`B()`以确保不存在任何错误
    4.1 功能`B()`覆盖功能`A()`的测试结果您至少有 2 个测试涵盖了一些相同的功能

**问题 1：一**`A()`开始就为函数编写测试值得吗？

1.  你写了很多代码
2.  你编写了一个巨大的回归测试来测试程序的端到端功能
    6.1 这个单一的回归测试有效地重复了绝大多数已经编写的测试

**问题 2：**按照这些步骤，代码包含许多测试，这些测试不止一次地涵盖了同一件事。有没有避免这种情况的技术？

**认为：**

出于这个问题的目的，请假设 B 做了两件事，其中一件是 A

```
void performLifeChoice() { // B()
  if (timeIsRight) {
     askForPromotion();   // A()
  } else {
     goBackToSchool();
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:27:21.220

我的一般回答是肯定的，值得为 A() 编写单元测试，原因有两个：

1) 你最终可能会从与 B() 不同的上下文中调用 A()，在这种情况下，你会很高兴知道 A() 正在工作，并避免重复测试。如果您没有单独对 A() 进行测试，您最终会为等效的代码分支重写两次实际上是相同的测试。

2) 与此相关的是，如果您不单独测试 A()，您最终可能会一直遇到海龟。现在想象一下，一个函数 C() 在它的一个分支中调用 B()，而 D() 调用 C() 等等......如果你遵循只测试更高级别函数的路径，你最终会集成测试必须涵盖越来越多的前提条件。在尽可能少的上下文中测试单个单元，原则上可以避免这个问题。

我的回答的一个隐含结论是，如果 A() 永远不会从 B() 以外的地方被调用，那么将 A() 设为私有可能是值得的，此时，测试可能会变得“可选”。另一方面，保留该测试可能仍然有用，因为它将帮助您确定当 B() 失败时，是因为您破坏了 A()。用 Kent Beck 的话来说，“如果测试失败，有多少事情会出错？答案越接近 1，测试就越“unit-y”。” - 进行单元测试非常有用，它可以帮助您准确找出代码中哪里出了问题。

现在你怎么能去测试 B()，而不复制 A() 的测试，增加前置条件？

这就是 Mocking/Stubbing 或类似技术可以发挥作用的地方。如果您考虑 B() 正在做什么，它实际上并没有执行 A()，它充当“协调器”，将条件输送到各种路径。在我看来，一个充分的测试应该是“当 TimeIsRight 时，B() 应该调用 A()”，A() 提供的答案与 B() 无关，这是 A() 的责任，你的单元测试涵盖。

在那个框架中，对 B() 的测试应该断言是在 TimeIsRight 时调用 A()，而不是 A() 返回的内容。根据您的代码的具体情况，您可以考虑使 A() 在 B() 中“可替代”，例如通过接口或通过注入代替 A() 的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T01:29:08.743

由于这些方法似乎在同一个类中，

*   如果`A()`是私有的，只需 test `B()`。`A()`将作为`B()`'s 测试的一部分进行测试。

*   如果`A()`是公开的，请不要在测试时对其进行测试`B()`。`A()`在单独的测试中验证's 的正确性。然后在另一个测试中，只需检查`B()` *调用* `A()`是否正确。在您的示例中，这意味着验证是否`askForPromotion()`在某些情况下被调用`timeIsRight`。

请注意，如果 A() 和 B() 在不同的类中，情况会略有不同。

顺便说一句，使用 TDD 方法，事件的顺序应该是 2\. 1\. 4\. 3\. ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T22:51:09.967

在这个例子中，不，在我看来，只为 A 编写测试并不值得。然而，在大多数情况下，A 和 B 都会接受参数，而 B 永远不会使用可能的参数输入的全部范围对于 A，但 A 的单元测试将（应该！），因此在这种情况下，对 A 的单元测试并不是浪费，因为它们涵盖了 B 未传递的参数，无论 B 的参数输入是什么。

# ios - 使用 restoreCompletedTransactions 恢复了哪些事务？

> ID：11910058
> 
> 赞同：1
> 
> 时间：2012-08-10T22:27:53.563
> 
> 标签：ios, in-app-purchase, subscriptions

如果用户一个接一个地购买了两个或多个非续订订阅，我调用 restoreCompletedTransactions 时会恢复哪些交易，比如相隔一个月。我是使用 transactionState SKPaymentTransactionStateRestored 获得他们两者的交易还是仅获得当前有效的交易（意味着在当前订阅期内）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:06:48.450

您将获得所有已完成的交易。在不续订的情况下，这意味着很多）

> 当您的应用程序恢复以前的购买时，Store Kit 将每笔交易交付给您的应用程序。

**编辑** Apple 根本不会恢复非更新，因此您必须自己创建该机制，否则，您将被拒绝——这确实发生在我的应用程序中。

# facebook - 单点登录保存哪些信息

> ID：11910064
> 
> 赞同：0
> 
> 时间：2012-08-10T22:28:50.943
> 
> 标签：facebook, single-sign-on

我正在开发一个移动应用程序，并想知道 facebook 单点登录使用提供的代码保存了哪些特定信息：

```
public class MyGreatActivity extends Activity {

    Facebook facebook = new Facebook("YOUR_APP_ID");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        facebook.authorize(this, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {}

            @Override
            public void onFacebookError(FacebookError error) {}

            @Override
            public void onError(DialogError e) {}

            @Override
            public void onCancel() {}
        });
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
    }
} 
```

我想从 facebook 中提取用户信息，这些信息将填写字段，以便使用我的应用程序的新用户更快地注册。为此可以提取哪些具体信息？感谢任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:54:59.187

只需确定您的用户已经授权了哪些权限，这将告诉您无需请求许可即可阅读哪些信息。

您通过 Graph API 检查权限

```
GET https://graph.facebook.com/me/permissions 
```

或通过 FQL

```
SELECT email,publish_stream FROM permissions WHERE uid = me() 
```

# security - Mutul 身份验证是 TLS 必须的吗？

> ID：11910066
> 
> 赞同：1
> 
> 时间：2012-08-10T22:29:16.147
> 
> 标签：security

我正在使用 EAP-TLS 进行 RADIUS 身份验证。我使用自签名 CA 和服务器/客户端证书来建立相互身份验证。

话虽如此，是否绝对有必要同时拥有服务器和客户端证书来建立 TLS ？如果是这样，那么浏览器如何仅使用服务器证书进行身份验证？EAP-PEAP (mschapv2) 也仅使用服务器证书来建立安全隧道。

派生加密密钥的服务器和客户端之间的握手消息是什么。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:32:49.023

它是 EAP-TLS 的必需和 PEAP 的可选。EAP-TLS 中没有浏览器。你是说 802.1x 客户端吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:44:34.087

使用 EAP-TLS 客户端身份由客户端证书传输到服务器，因此它可以授权证书认证的用户。

通常使用 EAP-PEAP 客户端通过 TLS 验证服务器身份，就像在浏览器中浏览到安全站点一样。

然后，服务器使用内部用户/通过身份验证协议 (MSCHAPv2..etc) 验证客户端身份，就像输入您的用户名和密码以登录您浏览的安全站点一样。

在进行 PEAP + 内部身份验证时，客户端证书验证不是必需的，通常不会进行。

EAP-PEAP 与 EAP-TLS 一样从 TLS 会话主机派生网络会话加密密钥。由于内部 MSCHAPv2 身份验证而派生的密钥不用于会话加密。

# php - iframe 突破是双后退按钮

> ID：11910069
> 
> 赞同：0
> 
> 时间：2012-08-10T22:29:42.380
> 
> 标签：php, javascript, iframe

我正在使用一个从书签调用的 iframe，它调用一个 html 页面，该页面显示有关他们正在查看的页面的用户详细信息。要关闭我正在使用的 iframe：

```
<a href="<? echo $original_page_url; ?>" target="_parent">X Close Window</a> 
```

这将关闭 iframe 并将用户留在他们所在的同一页面上。然而，这是理想的，就浏览器而言，他们必须按两次后退按钮才能回到他们之前的位置，例如一些搜索结果，因为他们基本上已经连续两次访问当前页面。最初一次，然后在我关闭 iframe 时再次出现。

有没有更好的方法可以避免这种情况？

这是生成 iframe 的小书签代码：

```
javascript:(function%20(d)%20{var%20modal%20=%20document.createElement('iframe');
modal.setAttribute('src',%20'http://blah.com/info.html?url='+encodeURIComponent(window.location.href)+'&page_title='+document.title);
modal.setAttribute('scrolling',%20'no');modal.className%20=%20'modal';
document.body.appendChild(modal);var%20c%20=%20document.createElement('link');
c.type%20=%20'text/css';c.rel%20=%20'stylesheet';
c.href%20=%20'//blah.com/css/iframe.css';
document.body.appendChild(c);}(document)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:36:07.593

使用这个 javascript 代码：

```
document.getElementById('iframeId').style.display='none'; 
```

此外，您可以在 iframe 中关闭此 iframe：

```
parent.document.getElementById('iframeId').style.display='none'; 
```

这将从父级获取 iframe 对象并将其可见性设置为隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:56:01.257

尝试`window.location.replace`

也许像这样

```
<a onclick="window.location.replace('<? echo $original_page_url; ?>')">X Close Window</a> 
```

# dust.js - dust.js 条件语句中的 $idx 和 $len

> ID：11910070
> 
> 赞同：11
> 
> 时间：2012-08-10T22:29:43.783
> 
> 标签：dust.js

关于灰尘的文档*太糟糕*了，我已经仔细阅读了我可能找到的所有内容，但无法弄清楚它应该如何工作。

我在假设的特殊值 $idx 和 $len 上遇到了这个问题，如果我猜对了，它会在迭代类似数组的部分和所述类似数组的部分的长度时返回当前索引。我有一个@if 条件（实际上是多个），我正在尝试锻炼以格式化模板，而这些值并没有像我所说的那样接近，这让我想到了以下问题：

1.  $idx 和 $len 在dust.js 中是真正的特价商品吗？
2.  您可以在@if 中使用它们吗？如果可以，如何使用？
3.  假设 1=true，$idx 是从零开始的吗？

这是我的模板：

```
{#myArray}
  {name}{@sep}, {/sep}{@if cond="('{$idx}' == '{$len} - 2')"}and {/if}{@if cond="('{$idx}' == '{$len} - 1')"}{@if cond="('{$len}' == '1')"} is {:else} are {/if}here.{/if}
{/myArray} 
```

它应该做什么：

*   如果只有一个人，则呈现字符串“Jake is here”。
*   如果有两个人，则呈现字符串“Jake and John are here”。
*   如果有三个或更多人，则呈现字符串“Jake, John, and Bill are here”。（显然，根据需要添加逗号分隔的名称）

如果 $idx 和 $len 特价商品按照人们认为的方式工作，那么这个模板会做我想做的事，尽我所能，但是，我不认为 $idx 或 $len （或两者）都已实施。如果不是，我该如何创建一个模板来满足我的需求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T20:49:01.653

1.  是的，他们是 Dust 中的特殊帮手。
2.  但是根据[dustjs-linkedin wiki](https://github.com/linkedin/dustjs/wiki/Dust-little-less-know-language-constructs)（在@if 部分下），它们不能在原语列表中使用。在这种情况下，您必须使用以下语法：

    ```
    {@idx}{.}{/idx} 
    ```

同样适用于长度。因此，您的模板类似于此[jsFiddle](http://jsfiddle.net/2zNq2/11/)中的模板。

3.是的，$idx 和@idx 从零开始。（有关更多信息，请参见[此处](https://github.com/linkedin/dustjs/issues/80)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T02:27:10.870

但是根据dustjs-linkedin wiki（在@if 部分下），它们不能在原语列表中使用。在这种情况下，您必须使用以下语法：

{@idx}{.}{/idx}

现在这种情况发生了变化，即使在原语中 $idx 和 $len 也有效

# wpf - 具有实体框架项目结构的 MVVM

> ID：11910075
> 
> 赞同：4
> 
> 时间：2012-08-10T22:30:21.663
> 
> 标签：wpf, entity-framework, mvvm

我目前正在 WPF 中学习 MVVM。我正在使用 Code First 方法创建一个包含实体框架的应用程序。我的项目的正确结构应该是什么？

MVVM 有这个结构

```
Views 
ViewModels
Model 
```

我目前的计划是将我的 POCO 放入 Model 文件夹中。我应该把继承自 DbContext 类的类放在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T22:43:37.270

MVVM 本身并没有指定服务基础架构。虽然您的 POCO 域应保留在“模型”目录中，但 MVVM 实现不应该知道 DbContext。

换句话说，不应该有一个派生自 DbContext 的类。

我通常通过 ViewModelProvider 构造来提供这种类型的功能，该构造将“实际”模型从 ViewModel 实现中抽象出来。这有助于更轻松地模拟等。所有具体的 viewModel 实现都应该通过这个抽象来“提供”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:15:15.010

Models、Views 和 ViewModels 存储桶实际上只是应用程序的层。它们的实际位置无关紧要，只要它们之间的*交互*不违反 MVVM 模式即可。

也就是说，我倾向于遵循 ASP.NET MVC 和 T4Scaffolding NuGet 包设置的模式。安装该软件包后，您可以发出以下命令。

```
Scaffold Repository -ModelType Person 
```

这将基于 Person 模型类为您搭建两个新类。

*   模型\MyApplicationContext.cs
*   模型\PersonRepository.cs

第一个只是您期望的标准 DbContext 类。您的 Views 或 ViewModles 不会直接与此类交互。存储库类提供了对上下文的抽象；这是你应该在层之间传递的那个。存储库也比 DbContaxt 更容易模拟，并且可以使用完全不同的技术（如 WCF 数据服务）轻松实现。

希望这个答案至少为您提供了一个很好的起点。

# jquery - jQuery.each 和 .html 的行为不符合预期

> ID：11910076
> 
> 赞同：3
> 
> 时间：2012-08-10T22:30:39.390
> 
> 标签：jquery

我希望这样：

```
$('.iat_map').each(function(i,el) {
    $(el).html(opt_list);
}); 
```

还有这个：

```
$('.iat_map').html(opt_list); 
```

做同样的事情。但是，当我尝试前者时，它会清除内容而不是用`opt_list`. （`.iat_map`指一堆`<selects>`）。

如果我`console.log(opt_list)`在里面`each()`，它会按预期输出。

是什么赋予了？

[做了一个小提琴](http://jsfiddle.net/mnbayazit/U9agP/1/)。完全可重现（至少在 Chrome 21 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:00:30.360

不知道发生了什么，尝试了一堆我认为可能会造成麻烦的事情并且到目前为止找不到解决方案，但这就是我将如何做到的并且它有效。

```
var options = [
    [1, "one"],
    [2, "two"],
    [3, "three"]
];

var list = [];
for (var i in options) {
    list.push(
        '<option value="'+ options[i][0] +'">'+
            options[i][1] +            
        '</option>'        
    );
}

$('.sel').empty().append(
    '<option>&ndash; Not selected &ndash;</option>'+
    list.join('')
); 
```

**演示：http:** [//jsfiddle.net/elclanrs/U9agP/4/](http://jsfiddle.net/elclanrs/U9agP/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T23:06:25.373

问题是这`opt_list`是一个 jQuery 对象（意味着 jQuery 将选项放入 DOM 元素中），当您附加 jQuery 对象时，DOM 元素会从旧位置删除并添加到新位置。

这就是为什么当您使用 时`.each`，您会注意到选项仅在最后一个选择上。

显然，当您这样做时`$('.iat_map').html(opt_list);`，jQuery 在附加它们之前会克隆 DOM 元素。

我建议制作`opt_list`成一个字符串，而不是一个 jQuery 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T23:05:33.040

需要克隆列表。[http://jsfiddle.net/mnbayazit/U9agP/5/](http://jsfiddle.net/mnbayazit/U9agP/5/)

它将元素从一个移动`<select>`到另一个，因为它们是参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T22:57:38.930

根据 jQuery 文档，对每个 jQuery 对象的调用与在泛型数组上使用的调用略有不同。

尝试丢失`el`并`this`改用。

```
$(this).html(opt_list); 
```

[http://api.jquery.com/each/](http://api.jquery.com/each/)

# java - JPanel 未显示在 JScrollPane 中

> ID：11910080
> 
> 赞同：1
> 
> 时间：2012-08-10T22:31:08.087
> 
> 标签：java, swing

我正在尝试制作一个应用程序，它可以让您创建和玩 Jeopardy！木板。在创建 GUI 时，我似乎遇到了困难。一个 JPanel (scrollPanel1) 似乎没有出现在我的 JScrollPane (scrollPanel1) 中。我很确定 JScrollPane 在那里，因为当我将滚动条策略设置为始终显示滚动条时，滚动条是可见的。但我不认为 JPanel 出现在里面。我会很感激一些帮助。

这是代码：

```
import java.awt.*;
import javax.swing.*;

public class CreateNewBoardGUI {
    private JFrame mainFrame;
    private JPanel mainPanel;
    private JPanel boardInfo;
    private JLabel boardNameLabel;
    private JTextField boardNameField;
    private JTabbedPane catTab;
    private JPanel tabPanel1;
    private JPanel catNamePanel1;
    private JLabel catNameLabel1;
    private JTextField catNameField1;
    private JScrollPane scrollPane1;
    private JPanel scrollPanel1;
    private JPanel qPanel1;
    private JLabel qLabel1;
    private JTextField qField1;

    public void CreateNewBoardGUI(){
        mainFrame = new JFrame("Create new Jeopardy! board");
        mainPanel = new JPanel();
        boardInfo = new JPanel();
        boardNameLabel = new JLabel("What would you like this board to be called?");
        boardNameField = new JTextField();
        catTab = new JTabbedPane();
        tabPanel1 = new JPanel();
        catNamePanel1 = new JPanel();
        catNameLabel1 = new JLabel("What would you like the category to be called?");
        catNameField1 = new JTextField();
        scrollPane1 = new JScrollPane();
        scrollPanel1 = new JPanel();
        qPanel1 = new JPanel();
        qLabel1 = new JLabel("200 Point Question");
        qField1 = new JTextField();

        mainPanel.setLayout(new BorderLayout());
        boardInfo.setLayout(new BorderLayout());
        tabPanel1.setLayout(new BorderLayout());
        catNamePanel1.setLayout(new BorderLayout());
        scrollPanel1.setLayout(new BorderLayout());
        mainFrame.setSize(700, 900);
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.setResizable(false);
        mainFrame.setLocationRelativeTo(null);
        mainFrame.setVisible(true);

        qPanel1.add(qLabel1);
        qPanel1.add(qField1);
        scrollPanel1.add(qPanel1, BorderLayout.NORTH);
        scrollPane1.add(scrollPanel1);
        tabPanel1.add(scrollPane1, BorderLayout.CENTER);
        catNamePanel1.add(catNameField1, BorderLayout.CENTER);
        catNamePanel1.add(catNameLabel1, BorderLayout.NORTH);
        tabPanel1.add(catNamePanel1, BorderLayout.NORTH);
        mainPanel.add(catTab, BorderLayout.CENTER);
        boardInfo.add(boardNameField, BorderLayout.CENTER);
        boardInfo.add(boardNameLabel, BorderLayout.NORTH);
        mainPanel.add(boardInfo, BorderLayout.NORTH);
        mainFrame.add(mainPanel);

        catTab.addTab("Category 1", tabPanel1);

    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:19:08.593

去除那个`scrollPane1 = new JScrollPane();`

并添加它（在创建 scrollPanel1 实例之后）：

`scrollPane1 = new JScrollPane(scrollPanel1);`

这将强制 scrollPane1 将 scrollPanel1 作为其“视口”。

要查看情况如何，您应该设置背景颜色： `scrollPanel1.setBackground(Color.red);`
向面板添加不同的颜色以研究它们的行为。

将滚动条从选项卡面板中拉伸出来后，它应该会立即添加它。

注意：查看“空布局”。它应该更容易处理。

让我知道这是否有帮助，或者您是否仍有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T03:21:15.857

```
package com.test;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.ScrollPaneLayout;
import javax.swing.border.LineBorder;

public class MainGrid {

    public static JPanel addPanel(int count) {
        JPanel newPanel = new JPanel();
        newPanel.setLayout(new GridLayout(1, 5));
        JButton jb1 = new JButton("Button 1" + count);
        jb1.setSize(200, 10);
        newPanel.add(jb1);
        JButton jb2 = new JButton("Button 2" + count);
        jb2.setSize(200, 10);
        newPanel.add(jb2);
        JButton jb3 = new JButton("Button 3" + count);
        jb3.setSize(200, 10);
        newPanel.add(jb3);
        JButton jb4 = new JButton("Button 4" + count);
        jb4.setSize(200, 10);
        newPanel.add(jb4);
        JButton jb5 = new JButton("Button 5" + count);
        jb5.setSize(200, 10);
        newPanel.add(jb5);
        newPanel.setBorder(new LineBorder(Color.black, 2));
        newPanel.setVisible(true);
        return newPanel;
    }

    public static void main(String[] args) {
        JFrame.setDefaultLookAndFeelDecorated(true);
        JFrame frame = new JFrame("BoxLayout Test");
        JPanel mainPanel = new JPanel();
        mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.PAGE_AXIS));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollPane = new JScrollPane(mainPanel);
        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        scrollPane.setLayout(new ScrollPaneLayout());
        mainPanel.add(addPanel(1));
        mainPanel.add(addPanel(2));
        mainPanel.add(addPanel(3));
        mainPanel.add(addPanel(4));
        mainPanel.add(addPanel(5));
        mainPanel.add(addPanel(6));
        mainPanel.add(addPanel(7));
        mainPanel.add(addPanel(8));
        mainPanel.add(addPanel(9));
        mainPanel.add(addPanel(10));
        mainPanel.add(addPanel(11));
        mainPanel.add(addPanel(12));
        mainPanel.add(addPanel(13));
        mainPanel.add(addPanel(14));
        mainPanel.add(addPanel(15));
        mainPanel.add(addPanel(1));
        mainPanel.add(addPanel(2));
        mainPanel.add(addPanel(3));
        mainPanel.add(addPanel(4));
        mainPanel.add(addPanel(5));
        mainPanel.add(addPanel(6));
        mainPanel.add(addPanel(7));
        mainPanel.add(addPanel(8));
        mainPanel.add(addPanel(9));
        mainPanel.add(addPanel(10));
        mainPanel.add(addPanel(11));
        mainPanel.add(addPanel(12));
        mainPanel.add(addPanel(13));
        mainPanel.add(addPanel(14));
        mainPanel.add(addPanel(15));
        scrollPane.setViewportBorder(
                BorderFactory.createLineBorder(Color.red));
        frame.add(scrollPane);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# c++ - C++ ReadConsoleInput 不适用于 boost::thread

> ID：11910082
> 
> 赞同：0
> 
> 时间：2012-08-10T22:31:22.607
> 
> 标签：c++, windows, console, boost-thread

我创建了一个侦听器类，它将在控制器对象上调用诸如 on_left_mouse_released 之类的方法。它工作正常，现在我正在尝试使用 boost::thread 让它在另一个线程中运行。但是，我似乎做错了什么。我是多线程的新手，所以这很容易成为一个简单的错误。

以下是侦听器类的选定部分：

```
void Listener::listen()
{
keepListening = true;

while(keepListening)
{
    if(timerEnabled)
    {
        this->CheckForTimerEvent();

        if( !PendingMouseOrKeyEvents()) //readconsoleinput is blocking
            continue;
    }

    if(!keepListening) //could have been changed in a timer event
        break;

    if(!mouseEnabled && !keyboardEnabled)
        continue;

    ReadConsoleInput(hIn, &InRec, 1, &NumRead);

    //see http://msdn.microsoft.com/en-us/library/windows/desktop/ms683499(v=vs.85).aspx
    //for more information on InRec and its submembers

    if(mouseEnabled &&InRec.EventType == MOUSE_EVENT)
    {
        this->ProcessMouseEvent(InRec.Event.MouseEvent);
        cout << "here";
    }
    else if(keyboardEnabled && InRec.EventType == KEY_EVENT)
    {
        this->ProcessKeyEvent(InRec.Event.KeyEvent);
                    cout << "here";
    }
}
}
void Listener::operator()()
{
    listen();
} 
```

在我的主函数中，如果我创建一个名为 listener 的 Listener 对象，则说“listener();” 这两个 couts 都发生在适当的事件中。但是，如果我使用“boost::thread listen (boost::ref(listener));” 相反，什么也没有发生。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:06:18.857

很可能您已经启动了线程并且在退出测试程序之前忘记了等待线程退出。添加一个

```
listen.join(); 
```

在您的测试程序结束时。

# javascript - 这两种使用 jQuery 附加 DOM 元素的方法有什么不同？

> ID：11910086
> 
> 赞同：2
> 
> 时间：2012-08-10T22:31:52.470
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我从以下两段代码中遇到了不同的结果。不过，我认为它们的性能应该相同。任何人都可以告诉我这些差异以及我何时应该使用其中的一个吗？

```
function ContentHeader(selector){
    "use strict";
    var contentHeader = $(selector);

    var headerTitle = $('<span/>', {
        'class': 'headerTitle'
    }).appendTo(contentHeader);

    //OPTION A: This is my preferred method, but, after calling appendTo, no DOM element is added to the DOM tree.
    var headerTitleInput = $('<input/>', {
        'class': 'headerInput',
        type: 'text'
    }).appendTo(headerTitle);

    //OPTION B: By contrast, this method is less robust / just a string, but the DOM element is added correctly to the DOM tree.
    headerTitle.append('<input type="text" class="headerInput" />');
} 
```

我更喜欢使用 jQuery 的 DOM 对象构造函数，因为它巧妙地封装了属性，但显然我并不完全理解它。

编辑：我正在为这个问题生成一个 jsFiddle。请回来查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:19:04.240

我相信我找到了答案。不幸的是，这不是性感或教育。

当我创建我的 ContentHeader 对象时，我会返回一些公共方法。其中之一称为“SetTitle”。它看起来像这样：

```
setTitle: function(title){
  headerTitle.text(title);
} 
```

此方法在异步代码执行块期间与服务器交互。似乎创建 jQuery 对象的开销会根据时间产生不同的、尴尬的结果。该问题在 jsFiddle 内无法重现。

# c - 使用 CUDA 和 GCC 链接错误

> ID：11910089
> 
> 赞同：0
> 
> 时间：2012-08-10T22:32:01.510
> 
> 标签：c, gcc, cuda, nvcc

我一直在尝试编译一组 C 和 CUDA 代码。问题出在我制作文件时的编译链接阶段。我制作了一个要在主机上执行的包装函数，以在设备上分配内存，将数据复制到它，并运行内核代码。此外，包装代码包含在与内核代码相同的文件中。包装器。以下是代码调用函数的方式：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>
#include "LAMMPS.h"

...

main(int argc, char **argv)
{
    ...
tortuosityTotal = gradient(nbAtoms, topAtoms, bottomAtoms, nTop, nBottom, allConnections, atomlist, ysize); 
```

这是我制作的头文件“LAMMPS.h”中的函数定义：

```
float gradient(unsigned short nbAtoms, unsigned short *topAtoms,unsigned short
              *bottomAtoms, unsigned short nTop, unsigned short nBottom, struct connection
              **allConnections,struct atoms *atomlist, double *ysize); 
```

这是我正在使用的makefile：

```
all: tortGPU

tortGPU: gradient_kernel.o buildNeighborList.o dumpRead.o tortuosityGPU.c
    nvcc tortuosityGPU.c buildNeighborList.o dumpRead.o gradient_kernel.o -lm -o tortGPU
buildNeighborList.o: dumpRead.o buildNeighborList.c
    gcc -c buildNeighborList.c
dumpRead.o: dumpRead.c
    gcc -c dumpRead.c
gradient_kernel.o:
    nvcc -c gradient_kernel.cu -arch=sm_20
clean: rm -rf *.o program 
```

最后，编译步骤工作正常，但是当我将它们全部链接在一起时（使用 tortGPU 的最后一步，我收到以下错误消息：

```
/tmp/tmpxft_000068c7_00000000-1_tortuosityGPU.o: In function `main':
tortuosityGPU.c:(.text+0x520): undefined reference to `gradient'
collect2: ld returned 1 exit status
make: *** [tortGPU] Error 1 
```

我尝试使用带有 -L 的 gcc 并得到完全相同的错误代码。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:34:53.490

尽管该语言经常被称为，但将其称为C++ 编译器`cuda-C`更为正确。命名的函数正受到 C++ 名称重整（或者，更准确地说，正在寻找重整名称）。您可以使用 C++ 包装您的声明或将您的代码编译为 C++。`cuda-C++``nvcc``gradient``nvcc``extern "C"`

# php - 在mysql的帮助下显示图像

> ID：11910091
> 
> 赞同：-3
> 
> 时间：2012-08-10T22:32:15.657
> 
> 标签：php, mysql, image

我有我的 sql 数据库，其表内容为 [image varchar(22)] 将图像的值存储为图像的 url 位置为 images/tree.jpg

如何用php检索它

```
<?php
    $link=mysql_connect("localhost","root","");
    mysql_select_db("bookstore");
    $qry="select * from books where btype='$cat'";
    $res=mysql_query($qry,$link);

    while($row=mysql_fetch_array($res));
    {

        print " <img src=http://localhost/zack/PROJECT/".$row['image'] ." width=323px >";

    }
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-10T22:47:45.147

如果 SELECT 语句是正确的并且图像确实位于您的 Web 根文件夹的 /zack/PROJECT 子文件夹中，那应该可以工作。

```
<?php
$link=mysql_connect("localhost","root","");
mysql_select_db("bookstore");
$qry="SELECT image FROM books WHERE btype='$cat'";
$res=mysql_query($qry,$link);

while($row=mysql_fetch_array($res));
{
    echo '<img src="http://localhost/zack/PROJECT/'.$row['image'] .'" width="323" >';
}
?> 
```

# php - 业务规则引擎

> ID：11910092
> 
> 赞同：2
> 
> 时间：2012-08-10T22:32:37.917
> 
> 标签：php, rules, high-availability, business-rules, rule-engine

我们有几种不同编程语言的应用程序，我们使用 Oracle 和 MySQL 作为存储。大多数业务逻辑都存储在代码和 Oracle 过程中。现在，每次我们必须使用新规则实现新功能时，它都会成为一个大问题。

因为：

1.  很难用不同的语言正确地实现业务规则而不会出现任何错误......

2.  这很耗时。

3.  很难测试。

4.  每次发生更改时代码都会变得混乱（尽管我们进行了重构，但我们无法保持足够干净（我们每 2 周发布一次））

现在我听说存在用于处理业务规则 (BR) 的业务规则引擎 (BRE)。如果 PHP 应用程序（高流量电子商务网站）可以向 BRE 执行请求并获得 JSON 响应，那就太好了。如果我们可以使用旧规则进行历史检查，那就更好了。C# 应用程序也应该使用 BRE。

对于更有经验的人，您对此有何看法？

# javascript - Javascript- 带有特定值标记的数组

> ID：11910093
> 
> 赞同：0
> 
> 时间：2012-08-10T22:32:51.457
> 
> 标签：javascript, arrays, token, tokenize

假设我有一个数组`['dcab', 'feac', 'gwad', 'dnae']`，但想让每个数组`'a'`都在自己的令牌中，例如`['dc', 'a', 'b', 'fe', 'a', 'c', 'gw', 'a', 'd', 'dn', 'a', 'e'];`. 我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T22:41:08.480

```
var x = ['dcab', 'feac', 'gwad', 'dnae'];
x = x.join('-').replace(/a/g,"-a-").split('-'); 
```

* * *

**更新：**正如@Robert 指出的那样，如果您`'a'`在开头或结尾有，这将导致`''`空白字符串出现在最终数组中。您可以通过执行以下操作来删除空白字符串来解决此问题：

```
x.join('-').replace(/a/g,"-a-").split('-').filter(function(x) { return x!='' }); 
```

或者，对于性能可能成为问题的较大数组，您可以简单地使用另一个分隔符摆脱额外的分隔符`.replace()`（这可能是更好的方法，尽管它不那么可读）：

```
x.join('-').replace(/a/g,"-a-").replace(/^\-|\-(?=\-)|\-$/g,'').split('-'); 
```

当然，不用说你的分隔符可以是任何东西（它不一定是 a `'-'`），只要你能保证它不会出现在你的任何字符串中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T22:36:43.933

```
var arr = ['dcab', 'feac', 'gwad', 'dnae'];
var result = [];
var i;
var s;

for (i = 0; i < arr.length; i++) {
    s = arr[i].split('a');
    result.push(s[0]);
    if (s.length > 1) {
        result.push('a');
        result.push(s[1]);
    }
} 
```

仅当每个字符串恰好包含一个或零个“a”字符时才有效。如果它可以包含更多，您可以遍历 split 的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T22:38:23.270

```
var arr = ['dcab', 'feac', 'gwad', 'dnae'];

var new_arr = arr.reduce(function(ret, val) {
    ret.push.apply(ret, val.split(/(a)/))
    return ret;
}, []); 
```

请注意，某些较旧的浏览器不支持捕获和保留拆分字符。

* * *

像这样简洁一点...

```
var new_arr = arr.reduce(function(ret, val) {
    return ret.concat(val.split(/(a)/));
}, []); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-28T05:18:22.690

首先，您分别处理数组元素并提取它们的标记。然后你结合结果。

您正在寻找 3 种类型的令牌：

*   一个“a”。正则表达式是`/a/`.
*   一系列其他字符 =>`/[^a]+/`
*   当原始元素是一个空字符串时，您要保留它 =>`/^$/`

所以总的来说，一个标记的正则表达式是`/a|[^a]+|^$/`. 要提取*所有*标记，您需要包含全局搜索标志`g`。

```
var strings = ['dcab', 'feac', 'gwad', 'dnae'];

var arrays = strings.map(function(string) {
    return string.match(/[^a]+|a|^$/g);
}); 
```

`match`返回一个数组，其中包含在字符串中找到的标记。剩下要做的就是连接所有这些数组。

幸运的是，有一个数组方法仅用于此特定目的。但不幸的是，使用未知数量的数组并不容易：

```
var tokens = arrays[0].concat(arrays[1], arrays[2], ... 
```

首先你不知道你有多少个数组。所以没有办法传递正确数量的参数。但也许你甚至不知道是否`array[0]`存在。所以你最好使用一个空数组作为起点。

不过有一些方法可以解决这个问题。

一种解决方案是将串联分成多个步骤：

```
var tokens = arrays.reduce(function(result, array) {
    return result.concat(array);
}, []); // note the initial empty array 
```

`apply`但对我来说，一次使用并传递所有数组似乎更合适：

```
var concat = Array.prototype.concat;
var tokens = concat.apply([], arrays); 
```

所有放在一起的代码如下所示：

```
var strings = ['dcab', 'feac', 'gwad', 'dnae'];
var concat = Array.prototype.concat;

var tokens = concat.apply([], strings.map(function(string) {
    return string.match(/[^a]+|a|^$/g);
})); 
```

# vb.net - 文件夹中的简单名称刮板

> ID：11910097
> 
> 赞同：0
> 
> 时间：2012-08-10T22:33:14.773
> 
> 标签：vb.net

> **可能重复：**
> [读取文件夹中的多个文本文件](https://stackoverflow.com/questions/668064/read-multiple-text-files-in-a-folder)

我有一个包含文件的文件夹，例如：123.psd 12345.psd 123456.psd 等，我想将文件夹内的所有名称刮到 TXT 文件中，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:43:44.367

您可以使用[`Path.GetFileNameWithoutExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension%28v=vs.100%29.aspx)：

```
Dim filesNames = From path In IO.Directory.EnumerateFiles("C:\Temp")
                 Select IO.Path.GetFileNameWithoutExtension(path)
IO.File.WriteAllLines("C:\Filenames.txt", filesNames) 
```

编辑：这是一个也适用于 .NET 3.5 的版本：

```
Dim filesNames = From path In IO.Directory.GetFileSystemEntries("C:\Temp")
         Select IO.Path.GetFileNameWithoutExtension(path)
IO.File.WriteAllLines("C:\Filenames.txt", filesNames.ToArray) 
```

这甚至在 .NET 2 中也有效：

```
Dim filesNames = IO.Directory.GetFileSystemEntries("C:\Temp")
Dim fileNamesWithoutExtension(filesNames.Length - 1) As String
For i = 0 To filesNames.Length - 1
    fileNamesWithoutExtension(i) = IO.Path.GetFileNameWithoutExtension(filesNames(i))
Next
IO.File.WriteAllLines("C:\Filenames.txt", fileNamesWithoutExtension) 
```

# xcode4.3 - 注释字幕上的反向地理编码

> ID：11910099
> 
> 赞同：0
> 
> 时间：2012-08-10T22:33:20.597
> 
> 标签：xcode4.3

我目前有一个应用程序，当我在地图上放置注释时，它会显示标题和副标题，副标题显示纬度/经度/半径信息。

```
 -(NSString *)title{
    return @"Saved position";
}

   - (NSString *)subtitle {
        return [NSString stringWithFormat: @"Lat: %.4F, Lon: %.4F, Rad: %.1fm",
        self.coordinate.latitude, self.coordinate.longitude, self.radius];
    }

    -(id)initWithCoordinate:(CLLocationCoordinate2D) coor{
        self.coordinate=coor;
        NSLog(@"%f,%f",coor.latitude,coor.longitude);
        return self;
    } 
```

我想更改字幕行以显示地址。我知道这是使用 CLGeocoder 的反向地理编码，但是我不确定如何正确执行此操作。我在网上查看了许多示例，并查看了苹果开发网站，但它有点压倒性。任何帮助都非常感谢这位新手程序员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:43:45.863

我已经解决了这个问题，并想分享我是如何做到的：

RegionAnnotation.h

```
#import <MapKit/MapKit.h>
#import <CoreFoundation/CoreFoundation.h>

@interface RegionAnnotation : NSObject <MKAnnotation, CLLocationManagerDelegate>

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, readonly, copy) NSString *subtitle;
@property (nonatomic, readonly, copy) NSString *title;

//Reverse Geocoding
@property(nonatomic, readonly) CLPlacemark *administrativeArea;//The state
@property(nonatomic, readonly) CLPlacemark *locality; //The city 
@property(nonatomic, readonly) CLPlacemark *subThoroughfare;//Street number
@property(nonatomic, readonly) CLPlacemark *thoroughfare;//Street address

@end 
```

RegionAnnotation.m

```
#import "RegionAnnotation.h"
#import <AddressBookUI/AddressBookUI.h>

@implementation RegionAnnotation

@synthesize coordinate = _coordinate, subtitle = _subtitle, title = _title, administrativeArea = _administrativeArea, location = _location, locality = _locality, subThoroughfare = _subThoroughfare, thoroughfare = _thoroughfare;

- (id)init
{
    self = [super init];

    return self;    
}

- (void) setCoordinate:(CLLocationCoordinate2D)newCoordinate
{
    _coordinate = newCoordinate;
}

- (NSString *)title {
    return @"Monitored Region";
}

- (void) setSubtitle:(NSString *)newSubtitle
{
    _subtitle = newSubtitle;
}

-(void)reverseGeocodeLocation:(CLPlacemark *)placemark
{

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    CLLocationCoordinate2D coord = self.coordinate;

    CLLocation *location = [[CLLocation alloc] initWithLatitude:coord.latitude longitude:coord.longitude];

    [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
        CLPlacemark *placemark = [placemarks objectAtIndex:0];

        NSLog(@"%@ %@ %@ %@",
              placemark.subThoroughfare,
              placemark.thoroughfare,
              placemark.locality, 
              placemark.administrativeArea);
    }];
}

- (NSString *)getAddress {
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    CLLocation *location = [[CLLocation alloc] initWithLatitude:self.coordinate.latitude longitude:self.coordinate.longitude];
    NSString *geoAddress = [[NSString alloc] init];
    [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"reverseGeocodeLocation:completionHandler: Completion Handler called!");
        if (error){
            NSLog(@"Geocode failed with error: %@", error);
//            [self displayError:error];
            return;
        }
        NSLog(@"getAddress Received placemarks: %@", placemarks);
        CLPlacemark *placemark = [placemarks objectAtIndex:0];
         // use the AddressBook framework to create an address dictionary
         NSString *addressString = ABCreateStringWithAddressDictionary(placemark.addressDictionary, NO);        
        _subtitle = addressString;
    }];

    return geoAddress;

}

@end 
```

我目前让用户长时间推动以在地图视图上创建注释。现在，当用户通过按下它来选择引脚时，它会显示物理地址而不是经度和纬度。

我希望这对所有一直在寻找方法的人有所帮助。

# php - 如何在不刷新页面的情况下使用 MySQL 查询过滤页面上列出的项目？

> ID：11910100
> 
> 赞同：-3
> 
> 时间：2012-08-10T22:33:20.027
> 
> 标签：php, mysql, ajax, forms

我有一个页面，它使用选择查询从 MySQL 数据库中的曲目生成音频播放列表，即

```
$query1="SELECT * FROM tracks WHERE uploaded_page='$this_path_short' ORDER BY id DESC"; 
```

我希望用户能够以各种方式过滤播放列表，并且计划在表单中设置一系列单选按钮，以生成新的 MySQL 查询以仅列出所需的曲目。

我想知道使用此查询更新播放列表的最佳方式。理想情况下，这将在不刷新页面的情况下完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:51:05.103

在头部添加 AJAX：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 
```

按钮使用示例：

```
 <a href="#" onClick="$('#content_s').load('/sql.php?value=some_path');">News</a> 
```

如果需要，您可以在 CSS 文件中编辑 $content_s 的悬停。

并在您的 html 中显示数据：

```
<div id="content_s">
 </div> 
```

您的 sql.php 文件将如下所示：

```
<?php
$this_path_short = $_GET['value']; // stay frosty, it's SQLi vurnable, but this will get "some_path" I belive. I didn't test this though, but it should work
$query1="SELECT * FROM tracks WHERE uploaded_page='$this_path_short' ORDER BY id DESC";
... 
```

您可以使用 PHP 生成链接

**编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑**

index.php 你说播放列表的路径在 index.php 所以：

```
<html>
<head>
<title>Playlist</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 
</head>
<?php $path = 'http://www.youtube.com/watch?v=Jx0oOZmY5KM'; ?>
<div id="menu">
<a href="#" onClick="$('#content_s').load('playlist.php/?val=<?php echo $path ?>');">Load Playlist</a>
</div>
<div id="content_s">
</div>
</html> 
```

播放列表.php：

```
<?php
$this_path_short = $_GET['val']; 
echo '$this_path_short = ' .$this_path_short.'<br>';
echo 'This is how the query looks like right now: "SELECT * FROM tracks WHERE uploaded_page=\''.$this_path_short.'\' ORDER BY id DESC";';
?> 
```

这个例子会让你了解它是如何工作的

1.

![在此处输入图像描述](../Images/bfd9c265f31d93ba520f4bb39f10f8d5.png)

2.

![在此处输入图像描述](../Images/0acc1836cc668d0c5e90740c9950d268.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:17:32.400

您必须使用 Ajax。jQuery 库对此非常有用。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T22:39:24.387

在非常大的行中：

*   只需使用过滤器 /playList.php?filter= 发出 Ajax 请求。
*   在响应中，您只放置播放列表而不是 html 页眉和页脚。
*   用新的播放列表替换播放列表的内容。

也许你可以使用[jQuery](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T22:44:05.597

检查这个：[http](http://www.datatables.net/) ://www.datatables.net/有用的插件

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-10T22:42:54.583

每当您想要新页面内容而不刷新页面时 - 解决方案就是 AJAX。我无法用几句话解释 AJAX，但这里有一个很棒的教程：

[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

# asp.net - Elmah 没有保存错误

> ID：11910101
> 
> 赞同：2
> 
> 时间：2012-08-10T22:33:30.063
> 
> 标签：asp.net, asp.net-mvc, nuget, elmah

我刚刚安装了 Elmah is Nuget，它显示错误，但是当我重新启动我的 Web 应用程序时，它没有旧的，我如何配置它来保存它？我以为它会自动完成..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T22:47:01.370

如果您使用默认提供程序，您的错误日志将无法在应用程序重新启动后继续存在，因为它存储在内存中。选择不同的提供程序，例如 XML 文件或数据库文件之一，例如`Elmah.SqlErrorLog`- 您需要编辑`web.config`文件以更改它。

网上有更多信息。例如：

[http://code.google.com/p/elmah/wiki/DotNetSlackersArticle#Storing_errors_in_memory](http://code.google.com/p/elmah/wiki/DotNetSlackersArticle#Storing_errors_in_memory)

[http://www.devcurry.com/2012/05/error-handling-elmah-in-aspnet-mvc.html](http://www.devcurry.com/2012/05/error-handling-elmah-in-aspnet-mvc.html)

# ios5 - UITabBarController 和 UINavigationController 内的模态 UIViewController

> ID：11910109
> 
> 赞同：1
> 
> 时间：2012-08-10T22:35:00.867
> 
> 标签：ios5, uiviewcontroller, uitabbarcontroller

我试图了解容器控制器和他们的孩子之间的关系。我发现 Apple 在 presentingViewController 和 parentViewController 之间的区别有些武断。例如，我使用包含 UINavigationController 的 UITabBarController 创建了一个故事板。nav 控制器推入另一个 UIViewController，该 UIViewController 又显示一个模态视图控制器。

故事板图像可以在[http://www.personal-lexicon.com/xyz/ViewControllerParentTest.png找到](http://www.personal-lexicon.com/xyz/ViewControllerParentTest.png)

通过按下每个控制器上的*Show Parent Info*按钮，我使用以下代码打印出它的关系。

```
- (IBAction)showParent:(id)sender {
const char *selfCls = class_getName(self.class);
NSLog(@"%@ = %p (%s)", self.title, self, selfCls);

const char *parentCls = class_getName(self.parentViewController.class);
NSLog(@"Parent Controller = %p (%s)", self.parentViewController, parentCls);

const char *presentingCls = class_getName(self.presentingViewController.class);
NSLog(@"Presenting Controller = %p (%s)", self.presentingViewController, presentingCls);

const char *navCls = class_getName(self.navigationController.class);
NSLog(@"Navigation Controller = %p (%s)", self.navigationController, navCls);

const char *tabCls = class_getName(self.tabBarController.class);
NSLog(@"TabBar Controller = %p (%s)\n\n", self.tabBarController, tabCls);
} 
```

这将产生以下输出：

```
Root = 0x68ca810 (PTMasterViewController)
Parent Controller = 0x68ca610 (UINavigationController)
Presenting Controller = 0x0 (nil)
Navigation Controller = 0x68ca610 (UINavigationController)
TabBar Controller = 0x68ca3a0 (UITabBarController)

1st Push = 0x68d6f10 (PTMasterViewController)
Parent Controller = 0x68ca610 (UINavigationController)
Presenting Controller = 0x0 (nil)
Navigation Controller = 0x68ca610 (UINavigationController)
TabBar Controller = 0x68ca3a0 (UITabBarController)

Modal 1 = 0x68d7860 (PTMasterViewController)
Parent Controller = 0x0 (nil)
Presenting Controller = 0x68ca3a0 (UITabBarController)
Navigation Controller = 0x0 (nil)
TabBar Controller = 0x0 (nil) 
```

*Root*和*1st Push*控制器的关系是有道理的，但为什么模态控制器将 UITabBarController 显示为其呈现控制器？对我来说，这应该是第*一个 Push*控制器。甚至导航控制器也比标签栏控制器更有意义。

# javascript - 可以在所有其他点击事件之后执行 jquery 点击事件吗？

> ID：11910113
> 
> 赞同：2
> 
> 时间：2012-08-10T22:35:34.970
> 
> 标签：javascript, jquery, events

我正在使用一个已经有很多内置 javascript 的 SharePoint 应用程序。我遇到了一个问题，我向元素添加了一个点击事件，但它在其他几个点击事件之前执行，这会导致问题。

如果一个元素上有多个单击事件，是否可以使用 jQuery 添加一个在所有其他元素之后触发的事件？我无法更改附加这些事件的顺序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:38:05.690

您是否尝试过将事件处理程序添加到元素的父级并希望没有一个子级阻止事件冒泡？

肯定会在所有直接处理程序之后调用父处理程序。如果您使用的是 jQuery，则 event.target 将包含实际单击的元素。

# uitextfield - UITextField 控制一个 UISlider 立即更新

> ID：11910117
> 
> 赞同：0
> 
> 时间：2012-08-10T22:36:09.923
> 
> 标签：uitextfield, xcode4.3, uislider

我正在使用 Xcode 4.3。我有一个控制 UISlider 值的 UITextField。我想让滑块在文本字段更改后立即更新其值。截至目前，它仅在单击返回键时更新。我有另一个视图也控制文本字段的值，但是在单击文本字段并按下返回键之前，滑块不会更新其位置。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T22:46:53.647

我通过在 viewDidAppear 方法中添加函数解决了这个问题。现在效果很好！

# java - 多生产者单消费者执行者服务设计

> ID：11910118
> 
> 赞同：0
> 
> 时间：2012-08-10T22:36:34.663
> 
> 标签：java, queue, threadpool, executorservice

我有一个`java.util.BlockingQueue`充满 POJO，需要由`ExecutorService`. 此队列必须由单个线程提供服务，但会同时从多个线程推送。

过去，我写的解决方案看起来有点像这样，但我真的很鄙视它：

```
executorService.execute(new Runnable() {

    @Override
    public void run() {
        while (true) {
            try {
                POJO job = blockingQueue.take();
                servicePOJO(job);
            } catch (InterruptedException e) {
                break;
            }
        }
    }
}); 
```

有没有更好的方法来写这个，或者这是最好的方法？我不喜欢这样做的原因是，如果我需要添加多个消费者，我需要以实际线程池的大小在循环中运行上述内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:35:10.117

我会将 ExecutorService 与每个对象的任务一起使用。

```
public <POJO> void asyncServicePOJO(final POJO pojo) {
    executorService.execute(new Runnable() {
        @Override
        public void run() {
            servicePOJO(pojo);
        }
    });
} 
```

不需要额外的队列。

# javascript - 在与 IE8 兼容的文档片段中定位数据

> ID：11910125
> 
> 赞同：0
> 
> 时间：2012-08-10T22:37:03.707
> 
> 标签：javascript, internet-explorer-8, bbcode

我正在一个项目中工作，我被要求制作，它必须在其他浏览器中以与 IE8 中预期的方式相同的方式工作。

这是一个用于将 HTML 转换为 BBCode 的系统，反之亦然。

我目前的问题是将 HTML 转换为 BBCode（BBCode 转换为 HTML 已解决（我希望如此））。

例如，我有这种要翻译的输入（这是剧透）

`<DL contenteditable=false><DT>Spoiler:</DT><DD class=codebox contenteditable=true>someTextToBeSpoiled</DD></DL>`

如果它有多条线，那就更糟了！

`<DL contenteditable=false><DT>Spoiler:</DT><DD class=codebox contenteditable=true>Line1</DD><DD class=codebox contenteditable=true>Line2</DD><DD class=codebox contenteditable=true>line3</DD></DL>`

我必须为此翻译使用的任何代码都必须（有点）可重写为适用于几乎任何 HTML 结构的通用代码，因此应该像处理任何其他代码一样处理剧透标签的这个特定代码。我确实知道每个数据在哪里。

为了尝试为 ie8 解决这个问题（对于其他人，我使用更好的解决方案，使用 ie8 中不可用的方法，顺便说一句，他们解决得很快）。

` var theOuterHTML = document.createElement('div'); theOuterHTML.innerHTML = "

剧透：

"+""+""；

```
var searchContent = regexEscape(theOuterHTML.innerHTML).replace("<!\\-\\- !!@here1!!# \\-\\->", "(.*?)")

searchContent = searchContent.replace("\n", "");

new RegExp(searchContent, "gm").exec(param1['context'].outerHTML)[1] 
```

`

问题是 var searchContent 在所有代码之后得到以下内容（替换在那里但似乎什么都不做）：（ `<DL contenteditable=false> <DT>Spoiler:</DT> <DD class=codebox contenteditable=true>someTextToBeSpoiled</DD></DL>`是的，那些奇怪的新行没有理由存在）
替换似乎对这些新行没有做任何事情，并且无法在输入中添加新行（由于 ie8 的不可预测性）。

应该存在的结束文本是： `[spoiler]someTextToBeSpoiled[/spoiler]`

这样的事情怎么解决？我整天都在纠结这个:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:47:32.260

这变得相当骇人听闻，但我相信我找到了一个可能的解决方案。

IE8 的问题是在一些标签之后添加了 \r\n，原因我只是不明白

与规范中所说的不同，如果您使用`.replace("\n", "")`this**不是**全局替换，则 ie8 会 `.replace(/\n/, "")`代替`.replace(/\n/gm, "")`. 另外，因为它添加了一个**\r\n**而不仅仅是**\n**，所以替换是**不够的**，这就是让我最困惑的地方。为了获得您需要的正确替换`.replace(/\r\n/mg, "")`（不需要管道字符，它不是 OR，它是 \r 后跟 \n）。

最后，这可能而且可能是hackish，但据我所知，这是处理IE8及之前的方法......

通过使用`.replace(/\r\n/mg, "")`，我能够在 exec() 方法中获得匹配。

# c++ - QML/C++ 通过 QML 按钮更改绘制的场景

> ID：11910128
> 
> 赞同：1
> 
> 时间：2012-08-10T22:37:15.990
> 
> 标签：c++, qt, qml

我有一个混合的 QML/C++ 应用程序，除了一个问题外，它总体上运行良好：在一个`Foo`继承自我`QDeclarativeItem`想绘制 a`QtMobility::QGeoMapData`和 a 的类`QGraphicsWidget`中。当按下 qml 按钮时，我将绘制的对象从 a切换到包含场景`QtMobility::QGeoMapData`的原生对象。`QGraphicsWidget`在`Foo`这幅作品的施工过程中，场景如预期般被填满，画家取了原生场景。唉，我需要在按下按钮时动态创建 QGraphisWidget 并稍后将其销毁。创建效果很好并且场景已填充，但是当之后调用画家时，它会挂起并且程序会占用所有系统内存。有什么建议可以解决吗？

# jasper-reports - jasperreport 服务器的推荐浏览器？

> ID：11910129
> 
> 赞同：3
> 
> 时间：2012-08-10T22:37:55.300
> 
> 标签：jasper-reports, jasperserver

我们使用 JasperReports Server 获得了很多古怪的行为。有谁知道它的首选浏览器是什么？他们的常见问题解答没有具体说明。

我在使用 IE 8 时遇到了很多问题。（问题似乎在 9.0 中消失了） Chrome 也是如此。“树加载失败”错误。

但是，firefox似乎是最可靠的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:08:17.420

根据[JasperReports-Server-CP-Install-Guide.pdf](http://sourceforge.net/projects/jasperserver/files/JasperServer/JasperServer%204.5.0/)，它应该支持 Firefox、Internet Explorer、Chrome 和 Safari。见部分`3.4 Logging into JasperReports Server`：

> `2\. Open a supported browser: Firefox, Internet Explorer, Chrome, and Safari.`

由于那是社区项目版本，我认为付费版本也一样。还值得注意的是，它似乎也没有列出最低版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:58:29.993

请参阅以下平台支持数据表： [http ://www.jaspersoft.com/sites/default/files/Jaspersoft%20Platform%20Support%20V4.7.pdf](http://www.jaspersoft.com/sites/default/files/Jaspersoft%20Platform%20Support%20V4.7.pdf)

第 2 页将为您提供商业版和社区版所支持的浏览器。如果您在使用受支持的浏览器时遇到问题，我建议您将其记录在 jasperforge.org 上。

对于 v4.7，以下是列表：

*   火狐浏览器 3.5、3.6、4.0
*   微软 Internet Explorer 7、8、9.0
*   苹果 Safari 4.0、5.0
*   谷歌浏览器 6.0 或更高版本
*   Adobe Acrobat 7 或更高版本
*   Adobe Flash 8 或更高版本
*   Apple iPad iOS Safari 4.x 或更高版本

# php - php代理目录

> ID：11910139
> 
> 赞同：1
> 
> 时间：2012-08-10T22:39:10.230
> 
> 标签：php, proxy, webserver

假设我们在服务器上找到了一个目录 Loacated really FAR

server1.{domainUS}/maindir/

但我有一个**主**服务器

{域名.UK}

我想创建一个指向我的**主**服务器的子域，而不是将其指向我的其他服务器`server1.{domainUS}`，因为我的远程服务器**只** 允许通过**主**服务器传输 http....所以我需要一个类似 PHP 代理的脚本来转发完整的**主**服务器的目录

例子..

```
server1.{domainUS}/maindir/testube/testfile.html <==test file
proxy.{domain.UK}/testube/testfile.html  <==test file 
```

Example2，我还需要它与 php 查询等很好地配合使用。

```
server1.{domainUS}/maindir/testube/testfile <==test php document
proxy.{domain.UK}/testube/testfile  <==test php document 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:30:52.710

将此代码放入您的服务器配置中`server1.{domainUS}`（假设为 Apache）：

```
<Directory "maindir/">
    RewriteEngine On
    RewriteCond %{QUERY_STRING} (.*)
    RewriteRule ^(.*?)$ http://google.com/%{PATH_INFO}
</Directory> 
```

或者，如果您无法更改配置，则可以将`Directory`标记的内容`.htaccess`放在`maindir`.

# python - 在扭曲的 python 上重用 TCP 端口

> ID：11910140
> 
> 赞同：1
> 
> 时间：2012-08-10T22:39:16.773
> 
> 标签：python, sockets, port, twisted

我正在尝试启动并运行这个简单的 python 聊天服务器： [http ://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

它工作正常，除了我每次都必须手动选择一个新端口。否则，我会收到错误 98，说明该端口已在使用中。

[如何关闭被杀死的程序打开的套接字？](https://stackoverflow.com/questions/5875177/how-to-close-a-socket-left-open-by-a-killed-program) 推荐我使用一些 SO_REUSEADDR: 东西，但我不知道如何在我的准系统 python 程序中实现它。诚然，我是个小胖子。

这个页面建议做一些疯狂的自动选择，但这听起来比我需要的要复杂一些。 [http://twistedmatrix.com/pipermail/twisted-python/2005-August/011098.html](http://twistedmatrix.com/pipermail/twisted-python/2005-August/011098.html)

感谢任何可以帮助我的人！

```
from twisted.internet.protocol import Protocol, Factory
from twisted.internet import reactor

class IphoneChat(Protocol):
def connectionMade(self):
    #self.transport.write("""connected""")
    self.factory.clients.append(self)
    print "clients are ", self.factory.clients

def connectionLost(self, reason):
    self.factory.clients.remove(self)

def dataReceived(self, data):
    #print "data is ", data
    a = data.split(':')
    if len(a) > 1:
        command = a[0]
        content = a[1]

        msg = ""
        if command == "iam":
            self.name = content
            msg = self.name + " has joined"

        elif command == "msg":
            msg = self.name + ": " + content

        print msg

        for c in self.factory.clients:
            c.message(msg)

def message(self, message):
    self.transport.write(message + '\n')

factory = Factory()
factory.protocol = IphoneChat
factory.clients = []

reactor.listenTCP(80, factory)
print "Iphone Chat server started"
reactor.run() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-31T07:32:42.720

以下代码尝试设置 SO_REUSEPORT 。

```
import logging
import socket
import sys

from twisted.internet import reactor, tcp
from twisted.internet.protocol import Factory, Protocol

class Echo(Protocol):
    def dataReceived(self, data):
        logging.warning('Recv %s', data)
        self.transport.write(data)

class ReusePort(tcp.Port):

    def createInternetSocket(self):
        s = tcp.Port.createInternetSocket(self)
        if not hasattr(socket, "SO_REUSEPORT"):
            logging.warning('Not support socket.SO_REUSEPORT')
            return s
        if (
            'bsd' in sys.platform or
            sys.platform.startswith('linux') or
            sys.platform.startswith('darwin')
        ):
            s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEPORT, 1)
            logging.warning('Successfully set socket.SO_REUSEPORT')
        else:
            logging.warning(f'Not set socket.SO_REUSEPORT on {sys.platform}')
        return s

f = Factory()
f.protocol = Echo
p = ReusePort(6666, f)
p.startListening()
reactor.run() 
```

您可以同时启动多个进程。它们都绑定到端口 6666。 注意：在 Linux 上，连接将平衡到这些进程。但在 macOS 上，只有第一个进程获得所有连接。

参考：

*   [https://github.com/crossbario/autobahn-python/blob/master/examples/twisted/websocket/echo_multicore/server_reuseport.py](https://github.com/crossbario/autobahn-python/blob/master/examples/twisted/websocket/echo_multicore/server_reuseport.py)
*   [https://github.com/twisted/twisted/pull/994](https://github.com/twisted/twisted/pull/994)

# haskell - 正整数类型

> ID：11910143
> 
> 赞同：35
> 
> 时间：2012-08-10T22:39:30.783
> 
> 标签：haskell

在许多关于 Haskell 的文章中，他们说它允许在编译时而不是运行时进行一些检查。所以，我想实现最简单的检查——只允许对大于零的整数调用函数。我该怎么做？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-10T22:49:52.137

```
module Positive (toPositive, Positive(unPositive)) where

newtype Positive = Positive { unPositive :: Int }

toPositive :: Int -> Maybe Positive
toPositive n = if (n < 0) then Nothing else Just (Positive n) 
```

上面的模块没有导出构造函数，因此构建类型值的唯一方法`Positive`是提供`toPositive`一个正整数，然后您可以使用它来解包`unPositive`以访问实际值。

然后，您可以使用以下方法编写一个仅接受正整数的函数：

```
positiveInputsOnly :: Positive -> ... 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-08-11T05:57:43.437

Haskell 可以在编译时执行*一些*其他语言在运行时执行的检查。您的问题似乎暗示您希望在编译时取消任意检查，如果没有很大的证明义务潜力，这是不可能的（这可能意味着您，程序员，需要证明该属性对于所有用途都是正确的）。

在下面，我不觉得我说的只是 pigworker 在提到非常酷的发声`Inch`工具时所触及的。希望关于每个主题的附加词将为您阐明一些解决方案空间。

**人们的意思（当谈到 Haskell 的静态保证时）**

通常，当我听到人们谈论 Haskell 提供的静态保证时，他们谈论的是 Hindley Milner 风格的静态类型检查。这意味着不能将一种类型与另一种混淆 - 任何此类滥用都会在编译时被捕获（例如：`let x = "5" in x + 1`无效）。显然，这只是皮毛，我们可以讨论 Haskell 中静态检查的更多方面。

**智能构造器：运行时检查一次，通过类型确保安全**

Gabriel 的解决方案是有一个类型，`Positive`，只能是正数。构建正值仍然需要在运行时进行检查，但是一旦获得肯定，使用函数就不需要检查 - 可以从这里利用静态（编译时）类型检查。

对于许多问题，这是一个很好的解决方案。[我在讨论黄金数字](https://stackoverflow.com/questions/3220246/using-haskells-types-to-replace-assert-statements-or-if-checks-in-other-languag/3220366#3220366)时推荐了同样的东西。无论如何，我认为这不是您要钓鱼的目的。

**精确表示**

dflemstr 评论说，您可以使用`Word`无法表示负数的类型（与表示正数略有不同的问题）。通过这种方式，您实际上不需要使用受保护的构造函数（如上所述），因为没有违反您的不变量的类型的居民。

使用正确表示的一个更常见的例子是非空列表。如果您想要一个永远不会为空的类型，那么您可以创建一个非空列表类型：

```
data NonEmptyList a = Single a | Cons a (NonEmptyList a) 
```

这与使用`Nil`代替的传统列表定义形成对比`Single a`。

回到正面的例子，你可以使用 Peano 数的一种形式：

```
data NonNegative = One | S NonNegative 
```

或者用户 GADT 构建无符号二进制数（您可以添加`Num`和其他实例，允许使用类似的函数`+`）：

```
{-# LANGUAGE GADTs #-}

data Zero
data NonZero
data Binary a where
  I :: Binary a -> Binary NonZero
  O :: Binary a -> Binary a
  Z :: Binary Zero
  N :: Binary NonZero

instance Show (Binary a) where
        show (I x) = "1" ++ show x
        show (O x) = "0" ++ show x
        show (Z)   = "0" 
        show (N)   = "1" 
```

**外部证明**

虽然不是 Haskell 世界的一部分，但可以使用替代系统（例如 Coq）生成 Haskell，这些系统允许陈述和证明更丰富的属性。以这种方式，Haskell 代码可以简单地省略检查，`x > 0`但 x 总是大于 0 的事实将是一个静态保证（再次：安全性不是由于 Haskell）。

根据猪工所说，我会归`Inch`为这一类。Haskell 还没有发展到足以执行您想要的任务，但是生成 Haskell 的工具（在这种情况下，是 Haskell 上的非常薄的层）继续取得进展。

**更具描述性的静态属性研究**

与 Haskell 合作的研究社区非常棒。虽然对于一般用途来说还太不成熟，但人们已经开发出一些工具来执行诸如静态检查[函数偏向性](http://community.haskell.org/~ndm/catch/)和[合同](http://research.microsoft.com/en-us/um/people/simonpj/papers/verify/)之类的事情。如果你环顾四周，你会发现这是一个丰富的领域。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-08-10T23:52:51.257

如果我未能插入 Adam Gundry 的[Inch](https://github.com/adamgundry/inch/) 预处理器，该预处理器管理 Haskell 的整数约束，我将无法履行作为他的主管的职责。

智能构造函数和抽象障碍都非常好，但是它们将过多的测试推向运行时间，并且不允许您实际上以静态检查的方式知道自己在做什么，而无需`Maybe`填充. （一位学究写道。另一个答案的作者似乎暗示 0 是肯定的，有些人可能会认为这是有争议的。当然，事实是我们使用了各种下限，0 和 1 都经常出现。我们也对上限有一些用处。）

按照 Xi 的 DML 的传统，Adam 的预处理器在 Haskell 原生提供的基础上增加了一层额外的精度，但生成的代码会按原样擦除到 Haskell。如果他所做的工作能够更好地与 GHC 集成，与 Iavor Diatchki 一直在做的类型级自然数的工作相协调，那就太好了。我们很想弄清楚什么是可能的。

回到一般的观点，Haskell 目前没有足够的依赖类型来允许通过理解来构造子类型（例如，大于 0 的 Integer 元素），但您通常可以将类型重构为允许静态约束的更多索引版本。目前，*单例*类型的构造是实现这一目标的可用方法中最干净的。您需要*一种*“静态”整数，然后同类居民`Integer -> *`捕获特定整数的属性，例如“具有动态表示”（这是单例构造，为每个静态事物提供唯一的动态对应物），但还需要更具体的事物，例如“积极”。

英寸代表了一种想象，如果您不需要为单例构造而烦恼，以便使用一些表现良好的整数子集，那会是什么样子。在 Haskell 中，依赖类型编程通常是可能的，但目前比必要的要复杂得多。对这种情况的恰当情绪是尴尬，而我对此感受最为强烈。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-06-28T23:02:00.487

我知道很久以前就已经回答了这个问题，并且我已经提供了自己的答案，但我想提请注意在此期间可用的新解决方案：Liquid Haskell，您可以在[此处](http://goto.ucsd.edu/~rjhala/liquid/haskell/blog/blog/2013/01/01/refinement-types-101.lhs/)阅读介绍。

在这种情况下，您可以通过以下方式指定给定值必须为正：

```
{-@ myValue :: {v: Int | v > 0} #-}
myValue = 5 
```

同样，您可以指定一个函数`f`只需要这样的正参数：

```
{-@ f :: {v: Int | v > 0 } -> Int @-} 
```

Liquid Haskell 将在编译时验证给定的约束是否得到满足。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-11T00:34:39.820

这——或者实际上，对自然数类型（包括 0）的类似需求——实际上是对 Haskell 数字类层次结构的常见抱怨，这使得它不可能提供一个真正干净的解决方案。

为什么？看看 的定义`Num`：

```
class (Eq a, Show a) => Num a where
    (+) :: a -> a -> a
    (*) :: a -> a -> a
    (-) :: a -> a -> a
    negate :: a -> a
    abs :: a -> a
    signum :: a -> a
    fromInteger :: Integer -> a 
```

除非您恢复使用`error`（这是一种不好的做法），否则您无法为`(-)`和`negate`提供定义`fromInteger`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-13T06:45:41.567

GHC 7.6.1 计划使用类型级自然数：[https ://ghc.haskell.org/trac/ghc/ticket/4385](https://ghc.haskell.org/trac/ghc/ticket/4385)

使用此功能，编写“自然数”类型很简单，并提供您永远无法实现的性能（例如，使用手动编写的 Peano 数类型）。

# c# - 如何在另一个表单上显示 GroupBox 及其内容？

> ID：11910144
> 
> 赞同：0
> 
> 时间：2012-08-10T22:39:30.767
> 
> 标签：c#, winforms, custom-component, groupbox

我有两种形式。在第一个表单上，我有一个虚拟小键盘（我有一个`GroupBox`，里面有数字按钮，这是我的虚拟小键盘）。使用这个虚拟数字键盘，我将数字输入到`TextBox`. 在第二种形式`TextBox`中，我有另一个输入数字的地方。

我想在第二种形式上使用我的虚拟小键盘。我怎样才能做到这一点？

如果有人一步一步地向我解释我应该做什么，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:59:40.320

1) 创建一个 WinForms 项目，我将其命名为“ReusingUserControlsSample”
2) 创建一个新的 UserControl，将其命名`MyUserControlWithButtons`或其他任何您喜欢的名称
3) 出于习惯，在 UserControl 属性上设置“AutoSize=true”和 AutoSizeMode="GrowAndShrink" . 稍后您可能会了解它们的作用
4) 在 UserControlDesigner 上，在控件上放置一些按钮，将它们命名为“btnLetterA”、“btnLetterB”、“btnLetterC”
5) 双击每个按钮，因此将生成单击处理程序
6) 在您的 UserControl 的代码中，创建一个`public TextBox TheOutput`属性
7) 在您的 UserControl 的代码中，在您在步骤 (5) 中生成的每个单击处理程序中，添加一行将一些文本添加到`TheOutput`文本框' `TextBox`s财产。请记住检查`TheOutput`NULL。

建造。

8) 返回 Form1
9) 放置`MyUserControlWithButtons`在表单上，​​将其命名为“mykeyboard”
10) 在表单上放置一个 TextBox，将其命名为“mytextbox”
11) 转到 Form1 的代码
12) 在构造函数中，在“InitializeComponent”下方，将 mytextbox 分配给`TheOutput`mykeyboard

就是这样。现在您可以构建并运行它，一切都应该没问题。请不要将“键盘”的整个代码都放在用户控件中。该表单仅将其设置为与**该**文本框一起使用。在第二种形式中，您可以以相同的方式执行此操作：放置键盘，放置文本框，设置键盘以写入该文本框，它的工作方式相同。

编码：

MyUserControlWithButtons.cs

```
using System;
using System.Windows.Forms;

namespace ReusingUserControlsSample
{
    public partial class MyUserControlWithButtons : UserControl
    {
        public MyUserControlWithButtons()
        {
            InitializeComponent();
        }

        public TextBox TheOutput { get; set; }

        private void btnLetterA_Click(object sender, EventArgs e)
        {
            TheOutput.Text += "A";
        }

        private void btnLetterB_Click(object sender, EventArgs e)
        {
            TheOutput.Text += "B";
        }

        private void btnLetterC_Click(object sender, EventArgs e)
        {
            TheOutput.Text += "C";
        }
    }
} 
```

MyUserControlWithButtons.cs

```
namespace ReusingUserControlsSample
{
    partial class MyUserControlWithButtons
    {
        /// <summary> 
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary> 
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Component Designer generated code

        /// <summary> 
        /// Required method for Designer support - do not modify 
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.btnLetterA = new System.Windows.Forms.Button();
            this.btnLetterB = new System.Windows.Forms.Button();
            this.btnLetterC = new System.Windows.Forms.Button();
            this.SuspendLayout();
            // 
            // btnLetterA
            // 
            this.btnLetterA.Location = new System.Drawing.Point(3, 3);
            this.btnLetterA.Name = "btnLetterA";
            this.btnLetterA.Size = new System.Drawing.Size(66, 21);
            this.btnLetterA.TabIndex = 0;
            this.btnLetterA.Text = "The \"A\"";
            this.btnLetterA.UseVisualStyleBackColor = true;
            this.btnLetterA.Click += new System.EventHandler(this.btnLetterA_Click);
            // 
            // btnLetterB
            // 
            this.btnLetterB.Location = new System.Drawing.Point(66, 30);
            this.btnLetterB.Name = "btnLetterB";
            this.btnLetterB.Size = new System.Drawing.Size(66, 21);
            this.btnLetterB.TabIndex = 0;
            this.btnLetterB.Text = "The \"B\"";
            this.btnLetterB.UseVisualStyleBackColor = true;
            this.btnLetterB.Click += new System.EventHandler(this.btnLetterB_Click);
            // 
            // btnLetterC
            // 
            this.btnLetterC.Location = new System.Drawing.Point(3, 57);
            this.btnLetterC.Name = "btnLetterC";
            this.btnLetterC.Size = new System.Drawing.Size(66, 21);
            this.btnLetterC.TabIndex = 0;
            this.btnLetterC.Text = "The \"C\"";
            this.btnLetterC.UseVisualStyleBackColor = true;
            this.btnLetterC.Click += new System.EventHandler(this.btnLetterC_Click);
            // 
            // MyUserControlWithButtons
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.AutoSize = true;
            this.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
            this.Controls.Add(this.btnLetterC);
            this.Controls.Add(this.btnLetterB);
            this.Controls.Add(this.btnLetterA);
            this.Name = "MyUserControlWithButtons";
            this.Size = new System.Drawing.Size(135, 81);
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.Button btnLetterA;
        private System.Windows.Forms.Button btnLetterB;
        private System.Windows.Forms.Button btnLetterC;
    }
} 
```

Form1.cs

```
using System.Windows.Forms;

namespace ReusingUserControlsSample
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            mykeyboard.TheOutput = mytextbox;
        }
    }
} 
```

Form1.Designer.cs

```
namespace ReusingUserControlsSample
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.mytextbox = new System.Windows.Forms.TextBox();
            this.mykeyboard = new ReusingUserControlsSample.MyUserControlWithButtons();
            this.SuspendLayout();
            // 
            // mytextbox
            // 
            this.mytextbox.Location = new System.Drawing.Point(84, 38);
            this.mytextbox.Name = "mytextbox";
            this.mytextbox.Size = new System.Drawing.Size(100, 20);
            this.mytextbox.TabIndex = 0;
            // 
            // mykeyboard
            // 
            this.mykeyboard.AutoSize = true;
            this.mykeyboard.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
            this.mykeyboard.Location = new System.Drawing.Point(66, 122);
            this.mykeyboard.Name = "mykeyboard";
            this.mykeyboard.Size = new System.Drawing.Size(135, 81);
            this.mykeyboard.TabIndex = 1;
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(284, 264);
            this.Controls.Add(this.mykeyboard);
            this.Controls.Add(this.mytextbox);
            this.Name = "Form1";
            this.Text = "Form1";
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        #endregion

        private System.Windows.Forms.TextBox mytextbox;
        private MyUserControlWithButtons mykeyboard;
    }
} 
```

程序.cs

```
using System;
using System.Windows.Forms;

namespace ReusingUserControlsSample
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T22:43:47.207

创建一个`UserControl`并将您的虚拟数字键盘组框/按钮放在上面。然后在每个表单上放置新的用户控件来代替现有的组框/按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T22:53:00.307

你有两个选择：

*   要么创建一个名为“VirtualKeypad”的用户控件，然后将 GroupBox 和键盘按钮移到那里，然后在两个表单上使用（放置）新的“VirtualKeypad”控件。您的控件必须公开一些事件，或者有一个属性可以告诉它将文本放在哪个文本框等。

*   或者，如果您只想拥有一个键盘，那么您就有麻烦了。小键盘必须是一个，但是您的小键盘按钮如何知道将输入的文本放在哪里？您将不得不聆听焦点的变化，因此当您单击/触摸文本框（第一个或第二个），然后单击/触摸键盘时，键盘将不得不检查谁在他之前拥有焦点（旧的焦点是文本框第一个或第二个），然后将数字/字母放在那里。这会有点棘手。另外，如果您是 WinForms 的初学者，您可能会遇到两个独立窗口之间的通信问题。我建议您先尝试使用 UserControl。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T22:53:28.867

我建议只复制它（最好将它全部复制到一个新的用户控件中，就像 Dan-o 说的那样，然后放在每个表单上），然后交换可见的。但是，要直接回答您的问题，您可以通过修改控件集合在表单之间移动控件：

```
//FormA
FormB formBInstance;
void button_OnClick(object sender, EventArgs e){
    Controls.Remove(myControl);
    formBInstance.Controls.Add(myControl);
} 
```

但是，您在任何给定时间管理哪个表单都存在隐含的困难，我建议您不要在这样的表单之间交叉控件，除非您确实需要（如果您认为这样做，通常有更简单的方法）。

既然你一步一步地问，这里没有人能真正做到，这里[对用户控件的解释](http://msmvps.com/blogs/deborahk/archive/2009/10/13/winforms-user-controls-101.aspx)应该有所帮助。之后，只需从您的工具箱中选择它，就像您选择任何其他控件并在每个表单上制作一样。（如果你*真的*需要他们表现得像一个人一样，设置一些东西来切换它是可见的）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T23:22:53.210

就是这样！它没有工作，因为按钮只是坐在那里，并且您可能没有编写任何代码来处理新控件中的点击。您必须将整个组框/按钮移动到控件，以及处理它的整个代码：所有事件处理程序、所有格式化程序等，您在第一个表单上所做的一切以使键盘工作 - 现在必须移动到用户控件。

但这不是结束！当点击按钮时，您的键盘处理代码会向文本框添加文本，对吗？现在，在您的用户控件中，将没有文本框。

您的新漂亮控件必须从文本框中*抽象*出来。理想情况下，它应该 *假设*会有任何文本框，但让我们跳过它。在新用户控件的代码中，放置一个类似于 的新属性`public TextBox MyOutputTextbox {get;set}`。现在，让我们执行该属性，这是您的文本框，它将获取所有文本并相应地修复您的 UserControl 代码。然后将您的控件放在表单上。然后确保您的表单的构造函数都将文本框分配给该属性：

```
public Form1() {
    InitializeComponent();
    myKeyPadControl.MyOutputTextbox = txtFirstBox;
} 
```

它应该可以工作。

# php - 导入注释的问题

> ID：11910147
> 
> 赞同：12
> 
> 时间：2012-08-10T22:40:29.580
> 
> 标签：php, doctrine-orm

我正在使用 Doctrine2 和 Symfony2 Validator 组件的 CodeIgniter 项目。

我所有的 Doctrine2 实体`use Doctrine\ORM\Mapping`和实体管理器都能识别它们。我的实体注释如下所示：

```
/**
 * @Entity(repositoryClass = "UserRepository")
 * @Table(name = "user")
 * @HasLifecycleCallbacks()
 */ 
```

在这一点上，我可以毫无问题地持久化实体。第一个问题出现在我尝试使用 Symfony2 Validator 组件时。当我尝试验证`User`对象时，我收到此错误：

> [语义错误] Entity\User 类中的注释“@Entity”从未被导入。您是否可能忘记为此注释添加“使用”语句？

这个问题的唯一“修复”是 through `use Doctrine\Mapping\Entity`，但我必须对我的实体（表、列、ManyToOne 等）使用的*每个注释执行此操作。*我试图弄清楚为什么我需要明确地显示`use`每个注释类而不是自动识别它们（不应该`use Doctrine\ORM\Mapping`授予我访问该命名空间中所有类的权限？）。

因此，我尝试在`use Doctrine\ORM\Mapping as ORM`所有注释前加上`ORM\`. 例如：`@ORM\Entity()`。Symfony2 验证器停止抱怨，但现在 Doctrine2 抱怨`Class Entity\User is not a valid entity or mapped super class.`我不知道为什么这种方法适用于验证器，但不适用于 Doctrine2。如果我运行控制台命令`doctrine:orm:info`，我的`User`实体将无法识别。

因为这是一个 CodeIgniter 应用程序，所以我正在自动加载 Symfony2 和 Doctrine2 库。我的自动加载代码如下：

```
# Symfony2 ClassLoader component
require_once __DIR__ . '/application/libraries/symfony/src/Symfony/Component/ClassLoader/UniversalClassLoader.php';
$loader = new \Symfony\Component\ClassLoader\UniversalClassLoader();
$loader->register();
$loader->registerNamespace('Symfony', __DIR__ . '/application/libraries/symfony/src');
$loader->registerNamespace('Doctrine', __DIR__ . '/application/libraries/doctrine/lib');

# Doctrine2 
require_once __DIR__ . '/application/libraries/doctrine/lib/Doctrine/Common/Annotations/AnnotationRegistry.php';
use Doctrine\Common\Annotations\AnnotationRegistry;
AnnotationRegistry::registerLoader(function($class) use ($loader) {
    $loader->loadClass($class);
    $classExists = class_exists($class, false);
    return $classExists;
});
AnnotationRegistry::registerFile(__DIR__ . '/application/libraries/doctrine/lib/Doctrine/ORM/Mapping/Driver/DoctrineAnnotations.php'); 
```

我不在乎是否必须为所有内容做序言`ORM\`，我只想找到一个 Symfony2 Validator 和 Doctrine2 都可以使用的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-15T00:06:28.727

我在使用 Silex、Doctrine2 和 Symfony-Validator 时遇到了类似的问题。

解决方案是避免使用 SimpleAnnotationsReader 而是使用普通的 AnnotationReader （看看[Doctrine\ORM\Configuration::newDefaultAnnotationDriver](http://www.doctrine-project.org/api/orm/2.3/class-Doctrine.ORM.Configuration.html#_newDefaultAnnotationDriver)）。然后，您可以在每个实体前面加上`ORM\`（当然也可以`use Doctrine\ORM\Mapping as ORM;`在每个实体中插入）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-24T11:08:07.590

我通过将以下内容添加到我的实体文件中解决了这个问题：

```
use Doctrine\ORM\Mapping as ORM; 
```

所以我的文件现在看起来像：

```
<?php

namespace Acme\CustomBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Example
 *
 * @ORM\Entity
 * @ORM\Table(name="example")
 *
 */
class Example
{
    /**
     * @ORM\Column(type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     *
     * @var integer
     */
    private $id;

    /**
     * @ORM\Column(type="string", length=125)
     *
     * @var string
     */
    private $title;

    /**
     * Get id
     *
     * @return integer
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set title
     *
     * @param string $title
     *
     * @return Example
     */
    public function setTitle($title)
    {
        $this->title = $title;

        return $this;
    }

    /**
     * Get title
     *
     * @return string
     */
    public function gettitle()
    {
        return $this->title;
    }

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-04T11:50:04.983

为您`use`在`entities`. 例如：

```
use Doctrine\ORM\Mapping\Entity;
use Doctrine\ORM\Mapping\Table;
use Doctrine\ORM\Mapping\Id;
use Doctrine\ORM\Mapping\Column;
use Doctrine\ORM\Mapping\GeneratedValue; 
```

但是您可能对使用这种方法不感兴趣。您可以将所有`use`语句写入一个文件，然后将其包含在您的`entities`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-04T07:19:22.307

我收到相同的错误消息“[语义错误] Entity\User 类中的注释“@Entity”从未被导入。您是否忘记为此注释添加“使用”语句？”。

问题是我有 ORM 的别名并且没有将它用于注释。

我有这个：`@OneToOne(targetEntity="CompanyProduct")`

正确的是：`@ORM\OneToOne(targetEntity="CompanyProduct")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-11T10:06:29.613

如果您正在测试并且您的测试因此而失败。确保在 phpunit 设置中配置了正确的自动加载。

对于一个非常具体的场景，我的问题是升级我的 symfony 版本，而在我拥有`bootstrap.cache.php`文件之前，但在新版本上，它是`app/autoload`. 我不得不更改我的`phpunit.xml`配置文件并将我的引导选项设置为该文件`bootstrap="autoload.php"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-11T19:21:23.143

我的问题通过添加解决了：

`use Doctrine\ORM\Mapping\HasLifecycleCallbacks;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-05T17:54:17.153

## **丑陋的解决方案**

我正在学习学说，在这个阶段对我来说重要的是我可以轻松地从网站上复制/粘贴示例并使用它们而无需额外的编辑。

*   为所有实体设置这样的命名空间：`namespace Doctrine\ORM\Mapping;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-04T16:44:49.203

在 ubuntu 更新期间将 php7 升级到 php8 时遇到同样的问题。我不想将我所有的项目依赖更新到 php8，所以我安装了 ondrej/php ppa 并重新安装了 php7 和 php8。

# django - Django、Apache、Nginx 和 Internet Explorer

> ID：11910149
> 
> 赞同：0
> 
> 时间：2012-08-10T22:41:04.900
> 
> 标签：django, apache, internet-explorer, nginx

首先，我很抱歉我的英语不好。

我有一个 Windows Server 2008 R2 VPS，用于运行我的 django 应用程序。

我使用 apache + mod_wsgi 后端来提供动态内容，使用 nginx 作为前端来提供静态文件和媒体。

但这里的问题是，当我看到我的 web 模板离线（在 django 之外）时，即使在 Internet Explorer 中也一切正常，但是当我在 vps 或 localhost（仅 apache 或 apache + nginx 或 django 开发服务器）上运行我的应用程序时其他浏览器很好地显示了我的 webapp，但在 Internet Explorer 中，一切都是乱码。CSS 样式不好，还有 js 脚本。

谢谢你。

当我在 Internet Explorer 中加载 mywebsite 的管理面板时，一切正常，但在主要网站页面中问题仍然存在。

我的管理面板**不是**django 管理应用程序，我编写了自己的管理面板。它在 IE 中正确显示，但主站点没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:10:36.923

如果`location /`有 proxy_pass`/static/`也会有。所以 /static/demo.png 将转到代理。

使用类似的东西

```
location @proxy { 
    proxy_pass         http://127.0.0.1:81; 
    proxy_redirect     off; 
} 
```

并尝试查看 / 中是否存在文件，如果不是代理它。

```
location / { 
    try_files $uri $uri/ @proxy;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:49:58.600

碰巧，您是通过 Virtualbox 访问服务器吗？共享的虚拟机文件系统可能是问题所在。有关此问题，请参阅[nginx 提供损坏的字符（Linux 上的 nginx 作为 vbox 中的来宾系统）](https://serverfault.com/questions/401081/nginx-serves-broken-characters-nginx-on-linux-as-guest-system-in-vbox)。

如果您使用共享文件系统将文件“上传”到服务器，请尝试使用 FTP 或 SCP 将文件传输到服务器。

# javascript - $("'" + foo + "'") 与 $(foo)

> ID：11910151
> 
> 赞同：-1
> 
> 时间：2012-08-10T22:41:07.813
> 
> 标签：javascript, jquery, html

我有一些代码从一开始就一直在工作，已经两个多月了。选择器具有动态内容，存储在变量 中`newClasses`。我的代码曾经是`$("'" + newClasses + "'")`，大约两天前，在我在页面上添加了单独的功能之后，没有影响此代码，也没有导入任何库或其他任何东西，我得到了错误

`Uncaught Error: Syntax error, unrecognized expression: '.fs.btn.heading.abstract' code.jquery.com/jquery.min.js:2`

经过一天的故障排除后，我发现如果我删除了`"'" +`and `+ "'"`，它变成`$(newClasses)`了 ，该功能又开始工作了。仅供参考：该变量在字符串的任一端`newClasses`均不包含s 。`'`

现在，我知道这是一个不同的问题，但是可以在单独的部分中添加哪些代码来影响功能，并导致我不得不删除单引号的连接？

备注 -

*   我不是在寻找网页的代码帮助、更多故障排除方法和思考答案。
*   由于代码量大，而且添加的代码不同，发布代码毫无意义，但您可以随意查看 Git 代码[here](https://github.com/specialorange/ResumeBuilder)
*   我什至尝试恢复到之前的提交，但由于某种原因，它仍然有同样的错误。
*   我从我的编程会话中推断出，当控制台在低级别行号（本例中为 2）上引用 JS 或 JQuery 时，它通常与琐碎`;`的`)`, 或`}`, 但 JSLint 没有显示出来特别异常。
*   从那以后没有更改浏览器，但我确实重新启动了，并且可能有系统更新等待完成。

jQuery的API是否有可能改变？还有什么我没有想到的？感谢您对可能的罪魁祸首的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:48:20.040

选择器只是一个字符串。如果您的变量已经是字符串类型，那么您不需要在每一端添加引号，这样做可能会导致错误，因为字符串的每一端都不应该有引号。所以，`$(var)`应该工作得很好。

引号用于声明字符串文字，例如：

```
"#test" 
```

但如果您已经在变量中拥有数据，则不需要。因此，如果您有一个名为的变量`sel`已经包含 string `#test`，那么您可以这样做：

```
$(sel) 
```

唯一可以在选择器字符串中添加引号的情况是，如果您需要将引号嵌入到字符串中间，例如这个选择器：

```
[data-myval='whatever'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T22:48:42.673

我不知道你一开始用过`$("'" + newClasses + "'")`。为什么要`'`在字符串之前和之后添加？

这就像在做`$("'.fs.btn.heading.abstract'")`。我不明白你为什么会这样做。

在 jQuery 选择器中唯一需要引号的是当您使用属性选择器时，例如：`$('input[id="test.input"]')`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T22:59:27.720

您不可能设法使该代码起作用，唯一可能的解释是在添加该功能之前从未执行过该代码。

它基本上在做的是：

```
var id= "#idname"; //#idname
var str = "'" + id + "'"; //'#idname'
$(str); //equivalent to $("'#idname'"); which is wrong 
```

请记住，当您看到时`"hello"`，字符串仅保留`hello`，引号不是字符串的一部分

# java - JLabel不断变化的背景颜色

> ID：11910155
> 
> 赞同：0
> 
> 时间：2012-08-10T22:42:00.717
> 
> 标签：java, swing, colors, background, jlabel

我是 GUI 编程新手，我尝试了一些代码，并希望不断更改名为“HeaderPanel”的 JPanel 的背景。

为什么这不像我希望的那样工作？（颜色保持不变......）

```
private void changeColors() {
    int r = 0;
    int g = 155;
    int b = 12;

    while(true) {
        r = (r+1)%255;
        g = (g+1)%255;
        b = (b+1)%255;

        Color color = new Color(r,g,b);
        HeaderPanel.setBackground(color);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:21:58.793

您的 while 循环正在阻止重绘管理器更改颜色。

您需要以某种方式在后台执行请求，例如

```
public class TestLabel extends JLabel {

    private Timer timer;

    private int r = 0;
    private int g = 155;
    private int b = 12;

    public TestLabel() {

        setText("Hello world");
        setOpaque(true);

        timer = new Timer(1000, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                System.out.println("tick");

                r = (r + 1) % 255;
                g = (g + 1) % 255;
                b = (b + 1) % 255;

                Color color = new Color(r, g, b);
                setBackground(color);

                System.out.println(color);

                if (r == 0 && b == 0 && g == 0) {

                    r = 0;
                    g = 155;
                    b = 12;

                }

                invalidate();
                revalidate();
                repaint();

            }
        });

        timer.setRepeats(true);
        timer.setCoalesce(true);
        timer.start();

    }
} 
```

您可能想继续阅读

*   [事件调度线程](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFIQFjAA&url=http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html&ei=WZclUM9mppyIB8vFgLAB&usg=AFQjCNEV-IbRLqmbImNIyRXEWy5L7ZP9tw&sig2=VlMYjPURnV_J4TwKUbT7cw)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

**更新扩展示例**

```
public class TestLabel extends JLabel {

    private Timer timer;

    private Object[][] colors = {{"Black", Color.BLACK},
        {"Blue", Color.BLUE},
        {"Cyan", Color.CYAN},
        {"Dark Gray", Color.DARK_GRAY},
        {"Gray", Color.GRAY},
        {"Green", Color.GREEN},
        {"Light Gary", Color.LIGHT_GRAY},
        {"Mangenta", Color.MAGENTA},
        {"Orange", Color.ORANGE},
        {"Pink", Color.PINK},
        {"Red", Color.RED},
        {"White", Color.WHITE},
        {"Yellow", Color.YELLOW}};

    public TestLabel() {

        setText("Hello world");
        setOpaque(true);

        timer = new Timer(1000, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                System.out.println("tick");

                int index = (int) Math.round((colors.length - 1) * Math.random());

                Object[] group = colors[index];

                setBackground((Color)group[1]);
                setText((String)group[0]);

            }
        });

        timer.setInitialDelay(0);
        timer.setRepeats(true);
        timer.setCoalesce(true);
        timer.start();

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:25:17.483

我不是摇摆开发人员，但是当您更改颜色属性时，您是否不必“重新绘制”或类似的东西？另一方面，您将需要另一个线程来不断更新颜色。

总结

*   更改面板背景颜色的代码（包括重绘）
*   调用上述代码的线程。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T23:05:10.793

您需要告诉您`JPanel`自己绘制，可能是通过调用`invalidate()`.

# jquery - jQuery datepicker，在循环中选择

> ID：11910157
> 
> 赞同：0
> 
> 时间：2012-08-10T22:42:23.100
> 
> 标签：jquery, datepicker

我有两个带有 2 个输入框的表单，用于输入开始日期和结束日期，标记为：

```
<form>
    <input type="text" id="from1" name="from1" />
    <input type="text" id="to1" name="to1" />
</form>
<form>
    <input type="text" id="from2" name="from2" />
    <input type="text" id="to2" name="to2" />
</form> 
```

当具有开始日期的输入框中的值发生变化时，我需要为具有结束日期的输入框设置最小值。当我像这样直接设置日期选择器时：

```
$("#from1").datepicker({
    onSelect: function(selectedDate) {
         $("#to1").datepicker("option", "minDate", selectedDate);
    }
});
$("#to1").datepicker(); 
```

这样可行。但是当我像这样在循环中设置 datepicker 时：

```
for (var i = 1; i < 3; i++) {
    var input1 = "#from"+i;
    var input2 = "#to"+i;
    $(input1).datepicker({
        onSelect: function(selectedDate) {
             $(input2).datepicker("option", "minDate", selectedDate);
        }
    });
    $(input2).datepicker();
} 
```

这不起作用，如果我在“from1”中选择值，则“minDate”仅设置为“to2”。当我更改“from1”中的值时，我想为“to1”设置“minDate”。知道有什么问题吗？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:50:56.153

我不明白你为什么要在循环上设置 datepicker...改用一个类，它会更容易。另外，为什么你会有两种形式？

```
<form>
    <input type="text" id="from1" class="from" name="from1" />
    <input type="text" id="to1" class="to" name="to1" />
    <input type="text" id="from2" class="from" name="from2" />
    <input type="text" id="to2" class="to" name="to2" />
</form> 
```

在 JS 中很简单：

```
$(".from").datepicker({
    onSelect: function(selectedDate) {
         $(this).next()
                .datepicker("option", "minDate", selectedDate);
    }
})
// not sure you need this...
.next()
.datepicker(); 
```

# xcode - Xcode控制台错误“程序接收信号：”EXC_ARITHMETIC“”有除法？

> ID：11910158
> 
> 赞同：2
> 
> 时间：2012-08-10T22:42:25.413
> 
> 标签：xcode

我最近一直在使用 Xcode 控制台工具来构建简单的程序。我想要做的是设置一个值说“x”等于变量的除法。Xcode 似乎适用于加法和减法，但不适用于将变量设置为等于变量的除法。这是我的代码以供进一步参考：

```
scanf("%ix^2+%ix+%i", &h, &i, &j);

            k = h/m; <---- Error

            l = i - n;

            m = h/k; <---- Error

            n = i - l;

            l = j/n; <---- Error

        NSLog(@"(%ix+%i)(%ix+%i)", k, l, m, n); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:49:09.327

[EXC_ARITHMETIC (SIGFPE)](http://en.wikipedia.org/wiki/SIGFPE) 这可能是由于各种情况（如除以零、整数溢出等）而发生的，在您的情况下，我猜它很可能是**整数除以零。**

**编辑：**问题是它不是异常，它是一个信号错误，所以你不能通过异常处理来处理它。您需要找到一种处理信号的方法。有关更多信息，请参阅此问题[C++ 的已接受答案：捕获除以零错误](https://stackoverflow.com/questions/4747934/c-catch-a-divide-by-zero-error)。

在整体方面**除以零**是一个逻辑错误，你不应该一开始就让这种情况发生，所以要处理它，最好不要发生这种情况。

# javascript - 将使用 SVG 的 html5 javascript 应用程序移植到 android

> ID：11910160
> 
> 赞同：1
> 
> 时间：2012-08-10T22:42:41.700
> 
> 标签：javascript, android, svg

我有一个使用 SVG 和[D3](http://d3js.org/)来呈现、检测悬停事件和编辑 svg 的 Javascript 应用程序。如何将此应用程序移植到 android 和/或 iphone？Phonegap 是一个选项，但我不确定它是否可以与 SVG 和 D3 一起使用，并给我一个可以完成应用程序所做的所有事情的本机 apk。谢谢 ：）

# objective-c - 在 ivar 指针中放置值？

> ID：11910163
> 
> 赞同：0
> 
> 时间：2012-08-10T22:43:05.877
> 
> 标签：objective-c, pointers, automatic-ref-counting

我试图将一个 ivar 指针传递给一个方法，然后在该 ivar 中放置一个值。

```
static void placeThis(NSString *thingIn, NSString **here) {
    *here = thingIn;
}

- (void) placeThis:(NSString *)thingIn inHere:(NSString **)here {
    *here = thingIn;

}
- (void) place:(NSString*)thingIn {
    [self placeThis:thingIn inHere:&thing];
    placeThis(thingIn, &thing);
    NSLog(@"How did that go? %@", thing);
} 
```

我不知道我的语法是否正确。我想存储`thingIn`在 ivar 中。当前错误是

```
passing address of non-local object to __autoreleasing parameter for write-back 
```

**这有可能吗，如果可以，怎么做？**

**注意：**这被认为是一个坏主意，因为它破坏了封装。我只会在非常本地的情况下使用它。

**注意**：ivar 被定义为`__strong NSString* thing`（strong 只是为了清楚起见）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:10:42.337

您应该使用`NSString * __strong *`的类型`here`

是的，做那种事情不是一个好主意。

# android - Android：支持同一尺寸类别内的多种屏幕尺寸

> ID：11910164
> 
> 赞同：2
> 
> 时间：2012-08-10T22:43:20.200
> 
> 标签：android, android-layout

我对支持多种屏幕尺寸/分辨率/密度等感到非常困惑。

这是困境：

我将应用程序的 GUI 分为四类 - 小、普通、大、Xlarge。

所以我正在测试的手机是普通屏幕尺寸，3.2 英寸 HTC MyTouch3G。现在，我还发现 3.7 英寸屏幕也被称为普通屏幕 - 以及其他一些尺寸。

我怎么可能去支持这么多不同的屏幕尺寸？

我的应用程序的主布局被包裹在一个 ScrollView 中。为了进行测试，我制作了正常大小的布局，使其在 3.7 英寸屏幕上看起来正确（回想一下我的手机是 3.2 英寸）。当我在手机上安装该应用程序时，整个视图会滚动，因为所有图形都太大了。但它不会水平滚动，所有内容都水平调整但不是垂直调整。

那么我有什么方法可以设计应用程序以适应正常或大类别中的所有屏幕尺寸？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:52:28.767

一般来说，您必须设计您的 UI 以适应同一类别下的所有屏幕尺寸“我通常使其适合最小尺寸并尝试在适合时使用 layout_weight 属性，以便视图随屏幕尺寸缩放”，您可以使用 android sdk xml 编辑器，以查看您的 UI 在每种屏幕尺寸下的外观。

如果您发现这种方法因任何原因不方便，您始终可以手动执行操作（使用

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

并进行计算，然后将它们应用于视图的 width 、 height 属性。

# javascript - 使 JQuery 调用适用于所有 JSON 字段

> ID：11910170
> 
> 赞同：0
> 
> 时间：2012-08-10T22:43:55.523
> 
> 标签：javascript, jquery, json

我有一些我正在使用 jQuery.grep() 搜索的 JSON 数据。基本上，我有一些搜索框，并且只想返回与框中输入的内容匹配的 JSON 记录。

在这里，有一些代码：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
    <script type="text/javascript">     

     $(document).ready(function(){
         var events =  
         [{
            'id': '1',
            'title': 'Test event',
            'start': '2012-08-08 18:45:00',
            'end': '2012-08-15 18:45:00',
            'participant': 'yes',
            'notes': 'A small river named Duden flows by their place and supplies it with the necessary regelialia.',
        },
        {
            'id': '2',
            'title': 'Another test event',
            'start': '2012-08-24 16:37:00',
            'end': '2012-08-26 16:37:00',
            'participant': 'yes',
            'notes': 'It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life.',
        },
        {
            'id': '3',
            'title': 'infinity event',
            'start': '2012-08-09 22:44:00',
            'end': '2012-08-09 15:44:00',
            'participant': 'no',
            'notes': 'Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.',
        }];     

        $('#output').html(JSON.stringify(events));

        $('#title_search').change(function() {
                var sorted_events = events;
                sorted_events = $.grep(events, function(evt,i){
                    return evt.title.toLowerCase().indexOf($('#title_search').val()) >= 0
            });
            $('#output').html(JSON.stringify(sorted_events));
        });
     });
    </script>
</head>
<body>
Title: <input type='text' id='title_search'></input><br/>
Notes: <input type='text' id='notes_search'></input><br/>
    Q: <input type='text' id='q_search'></input><br/>
<div id="output">
</div>
</body> 
```

如您所见，当#title_search 更改时，它会搜索 JSON 中的所有“标题”字段并仅返回匹配的字段。这一切都很好。

现在，我想对“备注”字段（以及本示例中没有的其他文本字段）执行相同的操作，但是为每个搜索字段一遍又一遍地编写相同的函数似乎效率低下（而且完全是错误的） . 这就是我的 JavaScript 技能崩溃的地方。我知道这在 JavaScript/jQuery 中是可能的，但从来没有完全掌握它。有人可以告诉我如何，并像我五岁一样向我解释吗？

加分项：我还想添加一个下拉列表，因为“参与者”只有两个可能的值，并且它的工作方式与文本字段相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:15:32.093

您可以为此使用表单元素名称属性：

```
Title: <input name="title" type='text' id='title_search'></input><br/>
Notes: <input name="notes" type='text' id='notes_search'></input><br/>
    Q: <input name="q" type='text' id='q_search'></input><br/> 
```

然后在您的 JavaScript 中引用名称以将其与字段匹配：

```
function changeHandler(e) {
    var sorted_events = events,
        $this = $(this), // save a reference to the event target
        field = $this.attr("name"),
        value = $this.val();

    sorted_events = $.grep(events, function(evt,i){
        return evt.title.toLowerCase().indexOf($value) >= 0
    });

    $('#output').html(JSON.stringify(sorted_events));
}

$('#title_search').change(changeHandler);
$('#notes_search').change(changeHandler);
$('#q_search').change(changeHandler); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T04:33:53.400

我认为这是您真正期望的，还增加了对下拉选择的支持

看[小提琴演示](http://jsfiddle.net/8W3Sr/4/)

html

```
Title: <input type='text' id='title'></input><br/>
Notes: <input type='text' id='notes'></input><br/>
    Q: <input type='text' id='q'></input><br/>
participant : <select id='participant'>
<option selected='selected'>Select</option>
<option>Yes</option>
<option>No</option>
</select>
<div id="output">
</div>​ 
```

Javascript

```
$(document).ready(function() {
    var events = [{
        'id': '1',
        'title': 'Test event',
        'start': '2012-08-08 18:45:00',
        'end': '2012-08-15 18:45:00',
        'participant': 'yes',
        'notes': 'A small river named Duden flows by their place and supplies it with the necessary regelialia.',
        },
    {
        'id': '2',
        'title': 'Another test event',
        'start': '2012-08-24 16:37:00',
        'end': '2012-08-26 16:37:00',
        'participant': 'yes',
        'notes': 'It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life.',
        },
    {
        'id': '3',
        'title': 'infinity event',
        'start': '2012-08-09 22:44:00',
        'end': '2012-08-09 15:44:00',
        'participant': 'no',
        'notes': 'Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.',
        }];

    $('#output').html(JSON.stringify(events));

    var changeHandler = function() {
        var sorted_events = events;
        var field = $(this).attr('id');
        var value = $(this).val();
        sorted_events = $.grep(events, function(evt, i) {            
            return evt[field].toLowerCase().indexOf(value.toLowerCase()) >= 0
        });
        $('#output').html(JSON.stringify(sorted_events));
    };

    $(document).on('change', '#title', changeHandler);
    $(document).on('change', '#notes', changeHandler);
    $(document).on('change', '#q', changeHandler);
    $(document).on('change', '#participant', changeHandler);
});​ 
```

# ruby-on-rails - 为什么 Rails 将 'localhost:3000/assets' 添加到我的图像 src？

> ID：11910172
> 
> 赞同：3
> 
> 时间：2012-08-10T22:44:12.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在循环播放我的电影中的一系列电影，如下所示：

```
<li>
  <%= link_to image_tag(movie.image.url), movie %>
  <%= link_to sanitize(movie.title), movie %>
</li> 
```

但它正在生成以下html：

```
<img alt="3382" src="http://0.0.0.0:3000/assets/http//s3-eu-west-1.amazonaws.com/ramen-hut/pictures/3382.jpg?1344477777"> 
```

这让我很困惑，有人可以帮忙吗？为什么要添加该`http://0.0.0.0:3000/assets/`网址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:57:18.890

因为`:`在`http`您的`movie.image.url`.

如果没有`http://`，Rails 会认为这是一个资产名称并添加资产前缀。

例如：

```
<%= image_tag 'http//foo/bar.jpg' %>
<%= image_tag 'http://foo/bar.jpg' %> 
```

输出：

```
<img alt="Bar" src="/assets/http//foo/bar.jpg" />
<img alt="Bar" src="http://foo/bar.jpg" /> 
```

# java - 使用 Javascript 调用 Java (JTA telnet)

> ID：11910173
> 
> 赞同：0
> 
> 时间：2012-08-10T22:44:25.170
> 
> 标签：java, javascript, jta

我需要你的一点帮助。我希望你能找到一分钟来看看我的问题。

我正在使用 JAVA 远程登录应用程序（[http://javatelnet.org/space/start](http://javatelnet.org/space/start)）

[您可以在此链接 ( http://javassh.org/download/jta26.jar](http://javassh.org/download/jta26.jar) )下载 JTA 应用程序。您可以将此小程序与以下 html 代码一起使用：

```
<html>
<body>
<applet CODEBASE="."
    ARCHIVE="jta26.jar"
    CODE="de.mud.jta.Applet"
    NAME="Appletas"
    style="width: 250px; height: 250px; float: left;">
    <param name="config" value="applet.conf">
</applet>
</body>
</html> 
```

您还可以使用与您的 html 页面和 .jar 文件位于同一目录中的 applet.conf 文件。

例如，如果您将这些行放在 applet.conf 文件中：

```
Applet.detach           =       true
Applet.detach.startText =       Press to Start!
Applet.detach.stopText  =       Press to Stop!
Applet.detach.immediately =     false

Socket.host             =       10.0.0.1
Socket.port             =       23 
```

Applet 将被加载，您可以看到 .startText（带有“Press to Start!”文本的按钮）。如果单击该按钮，应用程序将启动。它将尝试通过 telnet（端口 23）协议连接到 IP 地址为 10.0.0.1 的设备。

我正在寻找如何使用 javascript 来实现这一点。我想加载这个在开始时隐藏的小程序。之后，会有我自己的按钮，用 html 编写，而不是用 java 编写。我想通过单击这些按钮来调用这个小程序，它们将执行相同的 java 命令（当我们按下带有 .startText 的按钮时启动小程序的命令）。

我知道我们可以像这样从 javascript 调用 java 函数：

```
<SCRIPT LANGUAGE="JavaScript">
function runAppletFunction()
{
document.AppletName.functionWeWantToCall();
}
</SCRIPT> 
```

所以，我试图在 jta26.jar java 代码中找到这些函数。我找到了一个很棒的 java 反编译器。

看起来有 3 个主要函数：init()、start()、stop()。停止功能正在工作，我可以从 javascript 调用此功能，如果它正在运行，java telnet 应用程序将关闭。我没有成功使用其他功能，也没有错误。我不知道如何调试单击 .startText 按钮时发生的情况，以及调用哪个函数，因为单击后，telnet 应用程序被打开（这就是我正在寻找的）。

为了节省您的时间，我将在另一个帖子中添加应用程序的主要代码（因为我一次无法添加超过2个超链接，请先回复任何人此帖子），但如果您有时间，请检查我的 html 代码与实际的小程序。我知道你们可以帮我解决这个问题。我只需要以正确的方式调用正确的函数。

我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:10:57.127

希望这对 [http://www.javareference.com/jrexamples/viewexample.jsp?id=81](http://www.javareference.com/jrexamples/viewexample.jsp?id=81)有所帮助 ？

如果它没有解决，我认为它给了你理由，其他两种方法可能不是公开的。

# wpf - 如何显示部分 FormattedText？

> ID：11910175
> 
> 赞同：2
> 
> 时间：2012-08-10T22:44:29.793
> 
> 标签：wpf, text, drawing

在 WPF 4.0 中，FormattedText 类至少需要有足够的垂直空间来显示一行和足够的水平空间来显示一个字符，否则什么都不显示。

有没有办法强制 FormattedText 部分生成文本字符？

顺便说一句，我希望它显示大文本（例如 Arial 72）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:38:13.617

只是一个猜测，但不是通过`MaxWidth`and限制文本大小`MaxHeight`，您不能通过将剪辑矩形推到 DrawingContext 上来剪辑文本[吗](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.pushclip.aspx)？

# ruby-on-rails - 如何使用失败尝试次数使设计可锁定

> ID：11910176
> 
> 赞同：39
> 
> 时间：2012-08-10T22:44:35.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

使用设计 2.1.2 和 Rails 3.2.6

我正在做这个问答，以防其他人遇到这个问题，因为我发现它的文档很少而且分散。

如果您尝试设置`Devise`为可锁定，则可能会出现此错误。

```
undefined local variable or method `locked_at' for [someClass] 
```

这意味着您的模型没有适当的属性。

先决条件：在 config/initializers/devise.rb 中设置以下内容

```
# ==> Configuration for :lockable
# Defines which strategy will be used to lock an account.
# :failed_attempts = Locks an account after a number of failed attempts to sign in.
# :none            = No lock strategy. You should handle locking by yourself.
config.lock_strategy = :failed_attempts

# Defines which key will be used when locking and unlocking an account
config.unlock_keys = [ :email ]

# Defines which strategy will be used to unlock an account.
# :email = Sends an unlock link to the user email
# :time  = Re-enables login after a certain amount of time (see :unlock_in below)
# :both  = Enables both strategies
# :none  = No unlock strategy. You should handle unlocking by yourself.
config.unlock_strategy = :email

# Number of authentication tries before locking an account if lock_strategy
# is failed attempts.
config.maximum_attempts = 20

# Time interval to unlock the account if :time is enabled as unlock_strategy.
# config.unlock_in = 1.hour 
```

设置您的模型以包括`devise :lockable`：

```
class Example < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :lockable 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-10T22:44:35.660

`Devise`您的模型需要这三个属性。因此，生成以下迁移并运行它。

```
class AddLockableToExamples < ActiveRecord::Migration
  def change
    add_column :examples, :failed_attempts, :integer, default: 0
    add_column :examples, :unlock_token, :string # Only if unlock strategy is :email or :both
    add_column :examples, :locked_at, :datetime
  end
end 
```

希望这可以节省其他人几个小时的 google-fu。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-29T07:48:35.113

只需在设计迁移中取消注释此字符串：

```
 ## Lockable
  # t.integer  :failed_attempts, :default => 0 # Only if lock strategy is :failed_attempts
  # t.string   :unlock_token # Only if unlock strategy is :email or :both
  # t.datetime :locked_at 
```

# matlab - 使用 eigs 或 eig 减小尺寸

> ID：11910179
> 
> 赞同：0
> 
> 时间：2012-08-10T22:45:04.500
> 
> 标签：matlab, pca

我有一个 1024x704x256 的图像，我已将其重组为 2D 矩阵。每行代表一个能量通道，每列代表一个像素。我正在执行 PCA 以使用代码减少频段数量：

```
A=A-repmat(mean(A,2),1,size(A,2));  
[V, D] = eig(cov(A'));  
Evalues = diag(D);  
pc = V * A; 
```

其中 A = 均值调整后的 2D 数据集，V = 特征向量矩阵， D = 特征值矩阵。

我的问题是 V 和 D 的输出（使用 eigs 或 eig）自动按升序排列。在较小的数据集上使用这些函数之前，我没有遇到过这个问题。我需要知道哪些向量/值对对应于矩阵 A 中的行以进行进一步分析。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:47:10.763

特征值/特征向量问题可以定义为

```
A*V = lambda*V 
```

其中`lambda`是标量（特征值），`V`是向量（特征向量）。

据我所知，特征值和特征向量都与矩阵中的各个行没有任何特定的对应关系`A`。

你能详细说明为什么你不希望你的特征值/向量被订购吗？

# c++ - 如何在二维粒子系统中实现方向？

> ID：11910181
> 
> 赞同：1
> 
> 时间：2012-08-10T22:45:07.760
> 
> 标签：c++, 2d, sdl, motion

我正在为一个 2D 项目的 SDL 创建一个简单的粒子系统。我的生成功能工作正常，我可以创建速度以及粒子生成的位置。我需要做的是指示运动方向，例如，在火箭的烟雾轨迹中。那么如何让粒子系统选择粒子的运动方向呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:58:49.487

为了给每个粒子一个运动方向，选择一个绝对角度（0 指向显示器的右侧），一个模数（粒子的速度）并执行这些简单的三角指令：

```
vel.x = speed*cos(angle);
vel.y = speed*sin(angle); 
```

实际的指令取决于底层的数据结构，但数学概念是完美的。请注意您使用的角度和函数：两者必须具有相同的角度单位（度、弧度、...）。

# android - 了解复制/粘贴 Android

> ID：11910184
> 
> 赞同：0
> 
> 时间：2012-08-10T22:45:16.963
> 
> 标签：android, android-menu, clipboardmanager

我正在遵循Android 开发者页面上的复制和粘贴[指南](http://developer.android.com/guide/topics/text/copy-paste.html)。但是，有一个部分我不太明白，即使用纯文本粘贴的部分：

```
// Gets the ID of the "paste" menu item
MenuItem mPasteItem = menu.findItem(R.id.menu_paste);

// If the clipboard doesn't contain data, disable the paste menu item.
// If it does contain data, decide if you can handle the data.
if (!(clipboard.hasPrimaryClip())) {

mPasteItem.setEnabled(false);

} else if (!(clipboard.getPrimaryClipDescription().hasMimeType(MIMETYPE_TEXT_PLAIN))) {

    // This disables the paste menu item, since the clipboard has data but it is not plain text
    mPasteItem.setEnabled(false);
} else {

    // This enables the paste menu item, since the clipboard contains plain text.
    mPasteItem.setEnabled(true);
}
} 
```

我可以理解其中的大部分内容，但让我措手不及的是成员变量的使用。我知道这些指南不是 1:1 的代码，但我只是发现并没有看到一个名为“menu”的变量。所以，我问那些可能比我更了解 Android 的人，这个变量的目的是什么？我知道我回去编辑了 menu.xml 文件，所以我有一个“复制”和“粘贴”项目（这个“教程”似乎使用了），但现在我不知道如何实例化/初始化这个菜单，我也不知道它的用途。谁可以给我解释一下这个？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:53:15.547

愚蠢的 Android 开发人员，使用未记录的变量...

这是对包含`Menu`粘贴按钮 (a `MenuItem`) 的某些布局的引用。这个项目有 ID `menu_paste`，你可能知道也可能不知道。

实际上，此`menu`变量可以是`Menu`包含您的菜单项的任何布局。[您可以在此处](http://developer.android.com/guide/topics/ui/menus.html)了解如何创建`Menu`s 。

# c++ - 运算符 new 不调用构造函数

> ID：11910186
> 
> 赞同：-2
> 
> 时间：2012-08-10T22:45:25.303
> 
> 标签：c++

考虑下面的代码片段：

```
class Base
{
    public:
    Base()
    {
            cout<<"Constructor"<<endl;
    }
    Base(const Base& rhs)
    {
            cout<<"Copy constructor"<<endl;
    }
    Base* Clone()
    {
            return new Base(*this); <--------------- 2
    }
    void* operator new(size_t size)
    {
            void* p=malloc(size);
            cout<<"Inside new"<<endl;
            return p;
    }
};

int main()
{
    Base b1; <------------ 1
    Base* ptr=b1.Clone();
    return 0;
} 
```

我得到的[输出](http://ideone.com/1oPTK)为：

```
Constructor
Inside new
Copy constructor 
```

我一直听说，第一个 operator new 分配了一块 void 类型，然后 new 运算符调用构造函数将该块转换为与 LHS 上的确切类型相同的类型。
那么，为什么没有为语句 2 调用构造函数呢？

我还想知道 C++ 编译器对语句 2 执行的确切操作系列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T22:48:58.190

> 那么，为什么没有为语句 2 调用构造函数呢？

这是。你认为`"Copy constructor"`从哪里来？

```
Base b1; 
```

输出：`Constructor`

```
Base* ptr=b1.Clone(); 
```

来电

```
new Base(*this); 
```

这反过来又调用你的`operator new`，然后是你的复制构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:20:25.140

的实现在`T * p = new T(a, b, c); delete p;`道德上等同于这个序列：

```
void * const addr = operator new(sizeof T);   // either global or in T

T * p = new (addr) T(a, b, c);                // ditto

p->~T();

operator delete(addr);                        // ditto 
```

结果是内存分配和对象构造是 C++ 中两个不同的概念。

# javascript - 函数参数列表太长 | 最小化

> ID：11910187
> 
> 赞同：0
> 
> 时间：2012-08-10T22:45:24.803
> 
> 标签：javascript

随着这个动画变得越来越复杂，我不断添加参数，以便在每次回调时都可以使用它们。目前共6个。

例如，现在我想在显示消息时禁用输入框，所以我必须添加另一个元素 -`in_element;`

**电话：**

```
 Mo.C.movePane( cover_element, pane_element, 0, 0, 0, 'begin' ); 
```

**功能：**

```
 movePane: function( cover_element, pane_element, start, end, index, state ) {
        if( ( state === 'begin' ) ) {
            start = parseInt( window.getComputedStyle( pane_element, null ).getPropertyValue("top"), 10 );
            end = start + 40;
            index = start;
            state = 'down';
            cover_element.style.display = 'inline';
            Mo.C.movePane(cover_element, pane_element, start, end, index, 'down' );
        }
        if( ( state === 'down' ) && ( index < end ) ) {
            index += 1;
            pane_element.style.top = ( index ) + 'px';
            setTimeout( function( ){ Mo.C.movePane(cover_element, pane_element, start, end, index, state ); }, 1 );
        }
        else if( ( state === 'down' ) && index === end ) { 
            state = 'up';
            setTimeout( function( ){ Mo.C.movePane(cover_element, pane_element, start, end, index, state ); }, 2000 );
        }
        else if( ( state === 'up' ) && ( index > start ) ) {
            index -= 1;
            pane_element.style.top = ( index ) + 'px';
            setTimeout( function( ){ Mo.C.movePane(cover_element, pane_element, start, end, index, state ); }, 1 );
        }
        else if( ( state === 'up' ) && ( index === start ) ) {
            cover_element.style.display = 'none';
            // signup_pass_input.addEventListener( "keypress", Mo.UserNew.enter, false );
        }
    }
}; 
```

**可能的解决方案**

*   将所有内容包装在一个名为 的对象中`object_all = {}`，并仅传递这一个变量。
*   以某种方式分解功能 - 可能会提取开始和结束条件以分离功能
*   从函数参数移动到对象属性（静态）以保持所需变量的持久性
*   ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:43:55.160

当有多个参数时，使用一个对象是正常的。下面是重构代码的示例：

```
function( cover_element, pane_element, opt ) {
  var delay=1;
  if (!opt) {
    opt = {};
    opt.start =
      parseInt(
        window.getComputedStyle( pane_element, null ).
          getPropertyValue("top"),
        10
      );
    opt.end = opt.start + 40;
    opt.index = opt.start;
    opt.state = 'down';
    cover_element.style.display = 'inline';
  }

  switch(opt.state) {
    case 'down':
      opt.index += 1;
      if (opt.index >= opt.end) {
        opt.index = opt.end;
        opt.state = 'up';
        delay=2000;
      }
      break;
    case 'up':
      opt.index -= 1;
      if (opt.index <= opt.start) {
        cover_element.style.display = 'none';
        opt = null;
      }
  }

  if (opt) {
    pane_element.style.top = ( opt.index ) + 'px';
    setTimeout(
      function( ){
        Mo.C.movePane(cover_element, pane_element, opt);
      },
      delay
    );
  }
} 
```

并这样称呼它：

```
Mo.C.movePane(elem1, elem2); 
```

它切换方向时的延迟现在是 2000 而不是 2001。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:55:29.687

@mVChr 有正确的答案：传递具有各种参数属性的单个对象。这是一个标准范式，它使许多接口非常干净。将jQuery 的`$.ajax()`方法作为一个很好的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T05:30:45.047

推荐使用对象。你也可以按照下面给出的

```
function movePane() {
    var a = arguments; // to make it easy
    var name = a[0];
    var age = a[1];
    var place = a[2];
    console.log(name, age, place)
}

movePane("abc", 28, "def"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T19:07:05.820

根据评论答案：

使用对象 o。请注意，您不必初始化对象属性即可使用它们。非常简洁。

```
 var o = {};
            o.cover_element = cover_element;
            o.pane_element = pane_element
            o.state = 'begin';
        Mo.C.movePane( o );
        return o_p;
    },
    movePane: function( o ) {
        if( ( o.state === 'begin' ) ) { 

            // start

            o.start = parseInt( window.getComputedStyle( o.pane_element, null ).getPropertyValue("top"), 10 );
            o.end = o.start + 40;
            o.index = o.start;
            o.state = 'down';
            o.cover_element.style.display = 'inline';
            Mo.C.movePane( o );
        }
        else if( ( o.state === 'down' ) && ( o.index < o.end ) ) { 

            // move down

            o.index += 1;
            o.pane_element.style.top = ( o.index ) + 'px';
            setTimeout( function( ){ Mo.C.movePane( o ); }, 1 );
        }
        else if( ( o.state === 'down' ) && ( o.index === o.end ) ) { 

            // pause

            o.state = 'up';
            setTimeout( function( ){ Mo.C.movePane( o ); }, 2000 );
        }
        else if( ( o.state === 'up' ) && ( o.index > o.start ) ) { 

            // move up

            o.index -= 1;
            o.pane_element.style.top = ( o.index ) + 'px';
            setTimeout( function( ){ Mo.C.movePane( o ); }, 1 );
        }
        else if( ( o.state === 'up' ) && ( o.index === o.start ) ) { 

            // complete

            o.cover_element.style.display = 'none';
        }
    }
}; 
```

# ios - 核心数据详细视图，如默认电子邮件应用程序

> ID：11910189
> 
> 赞同：0
> 
> 时间：2012-08-10T22:45:49.983
> 
> 标签：ios, uitableview, core-data

我有一个由 NSFetchedResultsController 支持的主 UITableView 控制器，此视图显示按时间划分的结果列表。此视图由一个分段控件管理，该控件确定 NSFetchedResultsController 上谓词的类别和各种标志。到目前为止，一切似乎都很好。

但我对详细视图有疑问：

我希望用户能够在详细视图中导航下一个和上一个，就像默认的**ios 电子邮件应用程序**一样。

我将如何通过我的设置实现类似的效果？我认为我不能只将实体传递给我的详细视图并增加/减少一个 id，因为之前的列表视图取决于一些过滤谓词。

我是否需要在详细控制器中创建另一个使用类似谓词的 nsfetchedresults 控制器？我将如何有效地检测当前结果之后/之前是否没有更多内容，以便我可以将 prev/next 按钮变灰？

我能否以某种方式利用主列表视图（由 nsfc 支持）已经返回的结果集，即使它是批处理和分段的？

感谢您帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:21:54.817

我的第一个想法是子类`NSFetchedResultsController`化，以便它记住已选择用于详细查看的最新项目的索引路径。它可以为“previous”实现诸如`(id)nextObject`、`(BOOL)nextExists`和类似的方法。

如果您将表视图控制器中对它的引用传递到详细信息控制器，则可以在此处来回执行操作，并在返回时通过使用当前详细信息索引路径选择单元格来同步表中的选定条目。

唯一真正的技巧是索引路径算法，但这应该可以通过`sections`检查`NSFetchedResultsController`.

# objective-c - 在单视图应用程序中被 UIWebView 困扰

> ID：11910191
> 
> 赞同：0
> 
> 时间：2012-08-10T22:46:16.690
> 
> 标签：objective-c, xcode, uiwebview

我可以在选项卡式应用程序中做到这一点，没问题，但是让它在单视图应用程序（使用 xib）中工作让我发疯。

我创建了一个新类 WebViewController。标题是：

```
#import <Foundation/Foundation.h>
#import "GHViewController.h"

@interface GHWebViewController : UIViewController <UIWebViewDelegate>
{
    IBOutlet UIWebView *webView;
}

@property (nonatomic, retain) UIWebView *webView;

@end 
```

实现是：

```
#import "GHWebViewController.h"

@implementation GHWebViewController

@synthesize webView = _webView;

-(void)viewDidLoad
{
    [super viewDidLoad];
    NSString *fullURL=@"http://www.amazon.com/Books-by-Joel-Derfner/lm/RVZNXKV59PL51/ref=cm_lm_byauthor_full";
    NSURL *url = [NSURL URLWithString:fullURL];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];
}

@end 
```

到现在为止还挺好。但是进入网络视图只是用户可用的几个选项之一（通过条形按钮）。所以我添加了一个`UIWebView`但`ViewController`隐藏它，直到用户按下按钮进入网络视图。

这就是我卡住的地方。我试过让这个代表那个，那个代表另一个，我不知道什么是对的，什么是错的，并且`IBOutlet`in`WebViewController`不会连接到我的任何东西，我`ViewController`只是得到更多并且更加困惑。我尝试添加另一个xib，`WebViewController`但这只会导致灾难。我在这里超出了我的深度。

所以我的多部分问题是：

1.  正如我在单视图应用程序中所描述的那样，是否可以使用 a`UIWebView`作为多个选项之一？
2.  如果是这样，我需要做些什么来完成它——考虑 a) 委托、b) 代码和 c) 用户界面中的连接？
3.  如果没有，我应该如何处理任务？

关闭以查看 Total Recall。也许这会让我头脑清醒......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:29:03.647

我不太确定我是否完全理解你的问题；您的 3 个问题之前的段落有些令人困惑...

但有些想法：

1.  您不需要界面中的那个 ivar。特别是。你不应该`IBOutlet`在你的 ivar 声明中。如果您需要`IBOutlet`，它应该在您的`@property`声明中而不是您的 ivar 中。

2.  也许你真的不需要`IBOutlet`. 即你不需要把你的webView 放在xib 上。（如果你愿意，你可以，但你不需要。）

3.  所以你可以`IBAction`用一个按钮连接起来。单击该按钮时，您可以`alloc init`webView （并设置其框架），将其添加到您的`self.view`, 并设置`webview.delegate = self`或其他内容。

4.  然后你可以像平常一样处理`loadURL`和处理这些东西。当您再次单击该按钮（或其他按钮）时，您只需从视图中删除您的 web 视图。

# php - php三元运算符到if

> ID：11910199
> 
> 赞同：0
> 
> 时间：2012-08-10T22:47:12.300
> 
> 标签：php, ternary-operator

我浏览了有关三元运算符的 PHP 手册，发现很难理解。

如何将此三元运算符转换为`if`语句或编辑，以便它将执行以下代码。而不是`echo`ing 我希望代码根据用户是否登录来运行方法，

```
echo 'User ' . ($openid->validate() ? $openid->identity . ' has ' : 'has not ') . 'logged in.'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T22:51:55.117

您的代码实际上是：

```
if ($openid->validate()) {
    $temp = $openid->identity . ' has ';
} else {
    $temp = 'has not ';
}

echo 'User ' . $temp . 'logged in.'; 
```

听起来你想做的是：

```
if ($openid->validate()) {
    handleLoggedInFunction();
} else {
    handleNotLoggedInFunction();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T22:53:02.410

直接翻译是：

```
echo 'User ';

if($openid->validate()) {
   echo $openid->identity . ' has ';
} else {
   echo 'has not '
} 
echo 'logged in.'; 
```

但是，有更简洁的方法来编写执行相同操作的代码（查看其他答案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T22:50:43.623

```
$value = true;
$value ? runFunction() : (echo "has not logged in"); 
```

外推：

```
$openid->identity() ? loggedInFunction() : notLoggedInFunction(); 
```

# terminal - 在所有命令上隐式调用 grc 终端着色器

> ID：11910202
> 
> 赞同：7
> 
> 时间：2012-08-10T22:47:50.107
> 
> 标签：terminal, xterm, colorize, text-coloring, ansi-colors

我喜欢终端的 grc 着色器。但是，我必须明确地为我想要着色的任何内容添加前缀：

```
grc --config=conf.mine 
```

有没有办法让它自动应用于您在命令行上输入的所有内容（这样我可能甚至不需要知道 grc 是什么）？如果不存在更好的选择，也许使用 shell 钩子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-27T09:01:08.843

自 v1.9 起随 grc 提供的[grc.bashrc](https://github.com/garabik/grc/blob/master/grc.bashrc)和[grc.zsh](https://github.com/garabik/grc/blob/master/grc.zsh)文件通过为常用命令添加别名以（非完整）方式执行此操作：

**grc.bashrc**

```
GRC=`which grc`
if [ "$TERM" != dumb ] && [ -n "$GRC" ]
then
    alias colourify="$GRC -es --colour=auto"
    alias configure='colourify ./configure'
    alias diff='colourify diff'
    alias make='colourify make'
    alias gcc='colourify gcc'
    alias g++='colourify g++'
    alias as='colourify as'
    alias gas='colourify gas'
    alias ld='colourify ld'
    alias netstat='colourify netstat'
    alias ping='colourify ping'
    alias traceroute='colourify /usr/sbin/traceroute'
    alias head='colourify head'
    alias tail='colourify tail'
    alias dig='colourify dig'
    alias mount='colourify mount'
    alias ps='colourify ps'
    alias mtr='colourify mtr'
    alias df='colourify df'
fi 
```

**grc.zsh**

```
if [[ "$TERM" != dumb ]] && (( $+commands[grc] )) ; then
  # Prevent grc aliases from overriding zsh completions.
  setopt COMPLETE_ALIASES

  # Supported commands
  cmds=(
    cc \
    configure \
    cvs \
    df \
    diff \
    dig \
    gcc \
    gmake \
    ifconfig \
    last \
    ldap \
    ls \
    make \
    mount \
    mtr \
    netstat \
    ping \
    ping6 \
    ps \
    traceroute \
    traceroute6 \
    wdiff \
  );

  # Set alias for available commands.
  for cmd in $cmds ; do
    if (( $+commands[$cmd] )) ; then
      alias $cmd="grc --colour=auto $cmd"
    fi
  done

  # Clean up variables
  unset cmds cmd
fi
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2019-07-23T08:21:54.933

我试过这个，它对我有用：

```
alias ls="ls -FHG" 
```

# javascript - 与 .closest() .siblings() .find() 混淆

> ID：11910203
> 
> 赞同：2
> 
> 时间：2012-08-10T22:47:52.907
> 
> 标签：javascript, jquery

我有这个代码：

```
<div id="wrapf">

<div class="dropsf">
  <select name="f" class="food">
    <option value="" rel="">Choose!</option>
    <option value="1" rel="2">1</option>
    <option value="3" rel="6">2</option>
    <option value="7" rel="14">3</option>
  </select>
</div>

<div class="serve">
 <button id="plus">+</button>
 <input id="srv" name="srv" class="srv" type="text" value="1" size="2" readonly="readonly"/>
 <button id="minus">-</button>
</div>

</div><!-- #wrapf --> 
```

在向上面的代码添加一些代码之前，我有这段代码`<div>`（出于对齐和 CSS 原因）：

```
var food = $(".food"),
    cc = [],
    gc = [];

    //Push values into an array.
for(var i = 0; i < food.length; i++) {
  var v = food.eq(i).find('option:selected').val();
  var m = food.eq(i).siblings('input[name=srv]').val();
    gc.push(food.eq(i).find('option:selected').attr('rel'));
    cc.push(v * m); 
 } 
```

但是现在我的 javascript 不起作用，我对如何从下拉列表中获取值感到困惑......（我附加每个下拉列表，这就是我使用该`for`语句的原因），我的`v`变量很好，并且`gc.push`声明有效，但我的`m`变量没有注册。我正在尝试从`serving`输入中获取值，我该怎么做？

附言。我也试过`.find()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:55:38.440

`input[name=srv]`不是 的兄弟姐妹`.food`。此外，对于循环 jQuery 对象，我建议使用`.each`.

```
var food = $(".food"),
    cc = [],
    gc = [];

food.each(function(){
    var $this = $(this),
        // you can just get the val of the select
        val = $this.val(),
        // this is the same as $(this).find('option:selected')
        option = $('option:selected', this),
        // or even simpler: $('#srv').val();
        inputVal = $this.parent('.dropsf').siblings('.serve').find('input[name=srv]').val();
    gc.push(option.attr('rel'));
    cc.push(val * inputVal);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T22:53:18.793

```
food.closest('#wrapf').find('input[name=srv]').val() 
```

应该管用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T22:56:38.193

id 不是唯一的吗？这不应该工作吗？

```
$("#srv").val() 
```

顺便说一句，你不需要这样做：

```
var v = food.eq(i).find('option:selected').val(); 
```

你可以这样做（如果你有多种食物）：

```
var v = food.eq(i).val(); 
```

`val()`已经为您提供了当前选择的值。

# silverlight - Silverlight 服务器端数据分页使用 REST？

> ID：11910214
> 
> 赞同：-1
> 
> 时间：2012-08-10T22:49:03.157
> 
> 标签：silverlight, paging, wcf-ria-services

谁能指出我使用 MVC RESTful API 层在 Silverlight 中进行服务器端分页的最有效方法，或者在这一点上？

我有一个非常大的开销调用，假设它可以返回成千上万个复杂对象，而这些对象本身又可以包含几十个复杂对象。我想使用寻呼将其限制为每次呼叫 10 个。

我正在查看 Silverlight DataPager，尽管您可以使用 RIA 服务进行服务器端分页，但我不确定如何合并 REST API 调用（如果有的话）。

我打算自己简单地修改我的 API 调用以接受要返回的记录的起点和计数，但尽管这适用于 API/服务器端，但 Silverlight 的 DataPager“PageCount”和其他项目是只读的，并且我无法手动设置那些知道我的数据集数量的人。

唯一的补救办法是继续我要走的路，但创建我自己的 UserControl 并以某种方式覆盖该只读功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:40:19.623

Silverlight HTTP 堆栈不适用于 REST。基于浏览器的请求的默认模式将请求转换为 200 或 404。这意味着您必须使用客户端模式才能使用[此处](https://stackoverflow.com/questions/924472/paging-in-a-rest-collection)的技术。您可以使用[客户端堆栈](http://www.wintellect.com/CS/blogs/jprosise/archive/2009/10/14/silverlight-3-s-new-client-networking-stack.aspx)——但这也是有限的。

REST 中的分页通常像链表一样实现。您的响应包含指向下一组对象的链接。

WCF RIA 是一种生成客户端和服务器端代码的技术。我不明白它与 REST 有何关系。使用 REST 或 WCF RIA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:02:56.473

我相信在 silverlight 上获取数据的最佳方式是 WCF Ria Services。这是一堆基于 WCF 构建的代码，但它允许您使用动态 linq**过滤/排序/分页和分组客户端**查询您的数据源。看看[http://blogs.msdn.com/b/saurabh/archive/2009/11/23/understanding-the-wcf-in-wcf-ria-services.aspx](http://blogs.msdn.com/b/saurabh/archive/2009/11/23/understanding-the-wcf-in-wcf-ria-services.aspx)

就可维护性/性能而言，我已经使用这项技术构建并共同开发了一个内部站点，该技术在大约 300 个类的数据模型上为 500 多个当代用户提供服务，我认为为了提供与普通 WCF 相同的功能，我已经花费了更多的开发人员时间。但是要小心 WCF RIA 它有点固执己见，您可能需要欺骗一些东西，但是，WCF RIA 它是高度可定制的，尤其是在服务器端。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T14:38:44.397

我只是让我们的 UX 设计师创建了一个新的分页 UI 控件，我自己手动管理它并使用我自己的分页 REST API。

# python - 输出到 CSV：更改现有代码以添加“标志”列

> ID：11910216
> 
> 赞同：0
> 
> 时间：2012-08-10T22:49:12.603
> 
> 标签：python, file-io, csv

代码（在下面重现）读入一个文件，做一些事情，并将原始文件的一个子集输出到一个新文件中。如何稍微调整一下，而是将初始文件中的所有内容输出到输出文件，但添加一个“标志”列，其值为“1”，其中该行是当前输出的行（我们最感兴趣的行的子集）？其他行（当前仅在输入文件中的行）在新的“标志”列中将有一个空白或“0”。

这个问题对我来说经常发生，只要有一个通用的方法就可以节省我很多时间。

非常感谢任何帮助！

```
import csv
inname = "aliases.csv"
outname = "output.csv"

def first_word(value):
    return value.split(" ", 1)[0]

with open(inname, "r", encoding = "utf-8") as infile:
    with open(outname, "w", encoding = "utf-8") as outfile:
      in_csv = csv.reader(infile)
      out_csv = csv.writer(outfile)

      column_names = next(in_csv)
      out_csv.writerow(column_names)

      id_index = column_names.index("id")
      name_index = column_names.index("name")

      try:
          row_1 = next(in_csv)
          written_row = False

          for row_2 in in_csv:
              if first_word(row_1[name_index]) == first_word(row_2[name_index]) and row_1[id_index] != row_2[id_index]:
                  if not written_row:
                      out_csv.writerow(row_1)

                  out_csv.writerow(row_2)
                  written_row = True
              else:
                  written_row = False

              row_1 = row_2
      except StopIteration:
          # No data rows!
          pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:07:08.803

我在编写 CSV 时总是使用 DictReader，主要是因为它更明确（这让我更容易:)）。下面是你可以做的一个高度程式化的版本。我所做的更改包括：

*   使用`csv.DictReader()`and`csv.DictWriter()`代替`csv.reader`and `csv.writer`。这与使用字典而不是列表来表示行不同，这意味着行看起来像`{'column_name': 'value', 'column_name_2': 'value2'}`. 这意味着每一行都包含列标题数据，也可以像字典一样对待。
*   使用示例列名来显示读/写是如何工作的。我制作了一个包含两列的示例 CSV：`name`和`number`，然后在编写时，我做了一个简单的检查以查看该`number`值是否为`> 2`

考虑到这一点，以下是示例：

```
import csv

input_csv = 'aliases.csv'
output_csv = 'output.csv'

def first_word(value):
    return value.split(' ', 1)[0]

with open(input_csv, 'r') as infile:
    # Specify the fieldnames in your aliases CSV
    input_fields = ('name', 'number')

    # Set up the DictReader, which will read the file into an iterable
    # where each row is a {column_name: value} dictionary
    reader = csv.DictReader(infile, fieldnames=input_fields)

    # Now open the output file
    with open(output_csv, 'w') as outfile:
        # Define the new 'flag' field
        output_fields = ('name', 'number', 'flag')
        writer = csv.DictWriter(outfile, fieldnames=output_fields)

        # Write the column names (this is a handy convention seen elsewhere on SO)
        writer.writerow(dict((h, h) for h in output_fields))

        # Skip the first row (which is the column headers) and then store the
        # first row dictionary
        next(reader)
        first_row = next(reader)

        # Now begin your iteration through the input, writing all fields as they
        # appear, but using some logic to write the 'flag' field
        # This is where the dictionary comes into play - 'row' is actually a
        # dictionary, so you can use dictionary syntax to assign to it
        for next_row in reader:
            # Set up the variables for your comparison
            first_name = first_word(first_row['name'])
            next_name = first_word(next_row['name'])
            first_id = first_row['number']
            next_id = next_row['number']

            # Compare the current row to the previous row
            if first_name == next_name and first_id != next_id:
                # Here we are adding an element to our row dictionary - 'flag'
                first_row['flag'] = 'Y'
            # Now we write the entire first_row dictionary to the row
            writer.writerow(first_row)

            # Change the reference, just like you did
            first_row = next_row 
```

# objective-c - 已删除的 NSManagedObject 从 tableview 中正确删除，然后在保存时重新出现

> ID：11910217
> 
> 赞同：3
> 
> 时间：2012-08-10T22:49:16.360
> 
> 标签：objective-c, ios, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

我正在使用 NSFetchedResultsController 和 NSFetchedResultsControllerDelegate 来驱动 UITableViewController/UITableView。单击按钮会通过 触发删除 NSManagedObject `[managedObjectContext deleteObject:aManagedObject]`。

NSFetchedResultsControllerDelegate 方法正确触发，并且该行从 UITableView 中删除。

这就是事情变得奇怪的地方。当我调用`[managedObjectContext save:&error]`NSFetchedResultsControllerDelegate 方法`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`时，将使用已删除的 NSManagedObject 作为对象（并且 isDeleted 在托管对象上为 YES）并且更改类型为 NSFetchedResultsChangeInsert ，它将已删除的 NSManagedObject 添加回 UITableView。

我试图通过检查`isDeleted`委托方法中的标志来抑制插入，但这会导致`beginUpdates`and`endUpdates`断言失败。

我做错了什么或不正常吗？我在某个地方错过了一步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:55:03.553

你没有忘记下面的代码吗？

如果您仍然感到困惑，Apple 的示例代码，请参阅。会对你有很大帮助的。

[iPhoneCoreData食谱](http://developer.apple.com/library/ios/#samplecode/iPhoneCoreDataRecipes/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008913-Intro-DontLinkElementID_2)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *cellIdentifier = @"cellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    // Configure the cell
    MyObject *recipe = (MyObject *)[fetchedResultsController objectAtIndexPath:indexPath];
    //do stuff
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {
        UITableView *tableView = self.tableView;

        switch(type) {
            case NSFetchedResultsChangeInsert:
                break;

            case NSFetchedResultsChangeDelete:
                [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeUpdate:
                [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
                break;

            case NSFetchedResultsChangeMove:
                [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
    }

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {
        switch(type) {
            case NSFetchedResultsChangeInsert:
                [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T09:39:00.947

我暂时找到了解决方法：

```
[managedObjectContext deleteObject:managedObject];
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [managedObjectContext performBlock:^{
        resultsController.delegate = nil;
        [managedObjectContext save:nil];
        resultsController.delegate = self;
    }];
}); 
```

这会删除对象，让 NSFetchedResultsController 委托触发以从 UITableView 中删除行。然后稍后的调度会断开委托，执行保存然后重新附加委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:42:14.677

面对与您完全相同的问题，我可以意识到，只有另一个对象或上下文对已删除对象的单个引用才能使其保持活动**状态**，直到删除引用为止。如果应用程序再次尝试访问已删除的对象，它将崩溃。单个引用可能是已删除对象重新出现的原因。

就我而言，在调用异步删除操作之前释放对将要删除的对象的 UIViewController 实例引用解决了这个问题。

```
// Delete a NSManagedObject.
NSManagedObjectID *objectID = [[managedObject objectID] copy];
// Release all references to the object.
self.managedObject = Nil;
// Asynchronously delete the object.
[self asynchronouslyDeleteManagedObjectWithManagedObjectID:objectID]; 
```

忽略该`Release all references to the object`部分会使对象重新出现，就像`isDeleted`在被删除到`NSFetchedResultsController`观察者实例后一样。

# javascript - 多个 Facebook Like 按钮问题

> ID：11910218
> 
> 赞同：0
> 
> 时间：2012-08-10T22:49:17.577
> 
> 标签：javascript, facebook, button, sdk, facebook-like

我有一个图片库，每个都有自己的永久链接页面。在图库页面和永久链接上，每张图片都有一个 FB Like 按钮。Like 按钮被指定为“like”永久链接 URL，因此每个 URL 都是唯一的。它们中的大多数都可以正常工作，但有些似乎是相互连接的（你喜欢一个，它会自动让你喜欢多个），就好像它们共享相同的 URL……但这是不可能的，因为每个都是唯一的。

使用 FB linter，它显示所有数据都是正确的，所以我看不出是什么导致了重叠。

在这里查看[http://watchsuburbia.com](http://watchsuburbia.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:29:10.543

问题似乎解决了。我从 HTML5 版本切换到 XFBML 实现，这似乎解决了这个问题。如果有人能解释为什么 HTML5 会发生这种情况，或者这甚至可以成为解决方案，那就太好了。

# javascript - Javascript onclick改变id img

> ID：11910222
> 
> 赞同：0
> 
> 时间：2012-08-10T22:49:56.373
> 
> 标签：javascript, html, function

我正在尝试使用它，以便如果您选择 id 为“defaultone”或“defaulttwo”的图像之一，则 id 为“actualone”的图像将更改为该图像。我知道我非常接近，但我在某处有一个小错误。有人可以帮帮我吗？？

```
 <script type="text/javascript">
        // Popup window code
        function newPopup(url) {
            popupWindow = window.open(url,'popUpWindow','height=450,width=600,left=10,top=10,resizable=no,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
        }
        function bigimg(x) {
            x.style.height="65px";
            x.style.width="85px";
            x.style.opacity="0.5";
        }
        function defaultimg(x) {
            x.style.height="60px";
            x.style.width="80px";
        }
        function teamback(x) {
            document.getElementById("x").src = document.getElementById("defaultone").src;
        }
        </script>

    </head>
        <body>
            Your Team <img id="defaultone" onmouseover="bigimg(this)" onclick="teamback(this)" onmouseout="defaultimg(this)" src="cowboys.gif"> vs <img id="defaulttwo" onmouseover="bigimg(this)" onclick="teamback(this)" onmouseout="defaultimg(this)" src="giants.gif"><img src="" id="actualone" style="width:85px; height:65px;"><br><br>
            <img src="colts.gif"> vs <img src="bears.gif">
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:55:55.913

在您的 JavaScript 方法`teamover()`中，您错误地使用`document.getElementById("x")`;引用了发送元素 元素`"x"`不存在。

尝试更新到这个：

```
function teamback(x) {
    // update the "actualone" image's source to the sending-image's source
    document.getElementById("actualone").src = x.src;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T22:58:06.643

使用 jQuery（您已经包含在 HTML 文档的头部）：

```
<script type="text/javascript">
    $(document).ready(function(){
        // For both
        $('#defaultone, #defaulttwo').click(function(){
            $('#actualone').attr('src', $(this).attr('src'));
        });
    });
</script> 
```

重写为使用一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T23:00:44.277

应该如下

```
function teamback(x) {
    x.src = document.getElementById("defaultone").src; // To change the x element's src to defaultone's src
} 
```

由于您`this`不是使用它的 id 来传递元素本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T23:01:54.557

看起来您正试图`x`在此行上访问：

```
document.getElementById("x").src = 
```

它应该是：

```
x.src = 
```

此外，`onclick`等中的代码后面应该有一个分号，比如

```
onclick="teamback(this);" 
```

# android - 指针问题！（安卓）

> ID：11910223
> 
> 赞同：0
> 
> 时间：2012-08-10T22:50:12.610
> 
> 标签：android, eclipse, pointers

我在 onTouch 方法中遇到了多个指针的问题。所有指针都与一个布尔值相关联，如果向下，则为 true，如果向上，则为 false。非常重要的是，如果一个指针从 true 变为 false，它不会影响其他布尔值。

我遇到的问题是，例如当指针 1 和 2 向下并且指针 2 上升（更改为 false）时，指针 1 也在该迭代中更改为 false。这是因为当指针计数改变时，指针 ID 也在改变。

您对如何解决我遇到的问题有什么建议吗？

这是代码：

```
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    int action = (event.getAction() & MotionEvent.ACTION_MASK);
    int pointCount = event.getPointerCount();

    for (int i = 0; i < pointCount; i++) {
        int id = event.getPointerId(i);

        if (id < MAX_NUMBER_OF_POINT) {
            Log.d(TAG, String.valueOf(id));
            xA[id] = (int) event.getX(i);
            yA[id] = (int) event.getY(i);

            if ((action == MotionEvent.ACTION_DOWN)
                    || (action == MotionEvent.ACTION_POINTER_DOWN)
                    || (action == MotionEvent.ACTION_MOVE)) {
                touching[id] = true;
            } else {
                Log.e(TAG, "i: " + String.valueOf(i));
                Log.e(TAG, "id: " + String.valueOf(id));
                touching[id] = false;
            }
        }
    }

    for (int i2 = 0; i2 < 5; i2++) {
        if (touching[i2] == false) {
            // Log.d(TAG, "Was Here" + String.valueOf(i2));
            xA[i2] = 0;
            yA[i2] = 0;
        }
    }

    x1 = xA[0];
    x2 = xA[1];
    x3 = xA[2];
    x4 = xA[3];

    y1 = yA[0];
    y2 = yA[1];
    y3 = yA[2];
    y4 = yA[3];

return true;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:01:04.067

我认为有一个 id 的目的是为了让你有一个一致的名称来引用它。如果 id 随指针计数而变化，则可能需要另一个标识系统。您可以创建一个指针ID 数组，该数组独立于指针计数进行引用/更新。

# java - Java DB 的最终用户要求

> ID：11910226
> 
> 赞同：1
> 
> 时间：2012-08-10T22:50:27.760
> 
> 标签：java, derby, javadb

当我在寻找用于 Java 桌面应用程序的简单嵌入式支持 JPA 的 DB 时，我发现 Apache Derby / Java DB 是执行此类操作的一种非常常见的方式。

我已经发现，自 1.6 以来，每个 JRE/JDK 安装都默认附带 Java DB。

但是当进入教程时，安装 derby 有很多步骤......

忽略这些步骤，只是尝试类似：

```
public class Main {
  public static void main(String[] args) throws ClassNotFoundException {
    Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
  }
} 
```

抛出以下异常：

```
Exception in thread "main" java.lang.ClassNotFoundException: org.apache.derby.jdbc.EmbeddedDriver 
```

这让我想到了我的问题：

**我是否需要*最终用户*设置任何环境变量或类似的东西？**如果我只想发送一个 JAR（或者至少只有一个文件夹包含运行我的桌面应用程序所需的所有内容），那么 derby 仍然是值得进一步了解的正确事情，或者它是死胡同，我应该寻找 SQLite -Libs还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T22:57:08.050

如果包含您提供的方法调用，则不需要任何环境变量。但是，您确实需要确保 JDBC 驱动程序位于您的类路径中。最简单的方法是[在 JAR 的清单文件中设置类路径](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

我最近问了一个[相关问题](https://stackoverflow.com/questions/11875054/inserting-to-and-searching-a-large-amount-of-data-in-java)，并被指示检查[H2](http://www.h2database.com/html/main.html)和[HSQLDB](http://hsqldb.org/)。我目前正在使用 HSQLDB，它似乎符合我的需求，这与您的需求非常相似。我希望这有帮助！

# google-maps - 打开新的（gMap v3）时关闭打开的InfoBubble

> ID：11910227
> 
> 赞同：1
> 
> 时间：2012-08-10T22:50:33.430
> 
> 标签：google-maps, infobubble

我不知道该怎么办......`infoBubbles`如果我要打开一个新的，我只想关闭所有打开的。我正在使用以下代码。想法？我尝试了很多，google了很多，但它不应该那么复杂，不是吗？我想创建一个数组并为打开的数组保存 id，但我认为必须有另一种更简单的方法来解决这个问题。

```
$(document).ready(function(){
            createmap();

    function createmap(lat,lng){
        var latlng = new google.maps.LatLng(50, 10);
    var myOptions = {
    zoom: 12,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
    bounds = new google.maps.LatLngBounds();
            createMarker();
    }

    function createMarker(){
            var markers = [];
            var cm = window.cm = new ClusterManager(
                map,
                {
                    objClusterIcon: new google.maps.MarkerImage('images/map/flag_cluster.png', false, false, false, new google.maps.Size(20,20)),
                    objClusterImageSize: new google.maps.Size(20,20)
                }
            );

            var json = [];
            var x1 = -85;
            var x2 = 85;
            var y1 = -180;
            var y2 = 180;
            for (var i=0; i<20; ++i) {
                json.push(
                    '{'+
                        '"longitude":'+(x1+(Math.random()*(x2-x1)))+','+
                        '"latitude":'+(y1+(Math.random()*(y2-y1)))+','+

                        '"title":"test"'+
                    '}'
                );
            }
            json = '['+json.join()+']';
            // eval is ok here.
            eval('json = eval(json);');

            infos = [];
            $.each(json, function(i,item){      
    var contentString = '<div id="content"><a onclick="createdetailpage('+i+');">'+item.title+'<br /></a></div>';

                console.log(item.latitude);
                var myLatlng = new google.maps.LatLng(item.latitude,item.longitude);
            var marker = new google.maps.Marker({
                    position: myLatlng, 
                    //map: map, 
                    flat: true,
                    title:item.title,
                    //animation: google.maps.Animation.DROP,
                    //icon: myIcon
                });  
                var infoBubble = new InfoBubble({               
                    content: '<div class="phoneytext">'+contentString+'</div>'
                });                                

                google.maps.event.addListener(marker, 'click', function() {
                    if (!infoBubble.isOpen()) {
                        infoBubble.open(map, marker);
                    }
                }); 
                cm.addMarker(marker, new google.maps.Size(50, 50));                 
            });
        map.fitBounds(bounds);              
    }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:46:08.247

只打开一个 infoBubble 的最简单方法是只打开一个 infoBubble 并根据单击的标记以不同的内容打开它。

[带有自定义标记的 InfoWindow 示例（同样的概念适用于 InfoBubble）](http://www.geocodezip.com/v3_markers_infowindows.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:54:25.003

是`InfoBubble`一个`OverlayView`. 据我所见，`overlaycomplete`添加叠加层时会发出一个事件。如果添加的叠加层与“this”不同，也许您所有的`InfoBubble`s 都可以收听该事件并关闭。

不过，这只是一个想法，我自己还没有尝试过。如果您尝试一下，我们将非常感谢您的反馈！

# ios - 无法推送、拉取或合并 git。“工作副本有未提交的更改”

> ID：11910228
> 
> 赞同：9
> 
> 时间：2012-08-10T22:50:38.023
> 
> 标签：ios, xcode, git, repository, bitbucket

我最近在 bitbucket 上建立了一个 git 存储库，并在其中添加了一个旧项目。我已经提交并推动了一项更改作为测试，但现在我面临这个问题。

每次我尝试拉、推或合并时，都会收到以下错误消息：

![工作副本](../Images/aa1b2453c45d0b4139d3461011766f94.png)

“工作副本 'Project_Name' 有未提交的更改”。

我已经多次提交了这个更改：

![该文件似乎被命名为：用户界面状态](../Images/294bca2c601016da51fc5051dbdd62fd.png)

* * *

**编辑**：我做了'git status'并得到以下信息：

```
# On branch master
# Your branch is ahead of 'origin/master' by 2 commits.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   Crunch.xcodeproj/project.xcworkspace/xcuserdata/Neil.xcuserdatad/UserInterfaceState.xcuserstate
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

* * *

非常感谢您的帮助，SirKaydian

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T08:39:12.723

第1步：

```
git rm --cached ProjectName.xcodeproj/project.xcworkspace/xcuserdata/username.xcuserdatad/UserInterfaceState.xcuserstate 
```

第2步：

```
git commit -m "Removed file that shouldn't be tracked" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T23:56:34.143

好吧，原来我只需要发表评论

```
//THIS IS A TEST 
```

并承诺。现在它工作正常。这一定只是一些奇怪的错误。

感谢您的帮助，SirKaydian

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T23:52:01.577

我不熟悉该`.xcuserstate`文件，但它听起来像是一个用户特定的文件。通常，用户特定的文件在源代码控制中没有任何业务。它们经常更改，通常是二进制的，因此难以区分，并且对其他用户没有帮助。尝试关闭您的 IDE，然后运行命令或尝试将此文件名添加到您的`.gitignore`文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T02:30:45.617

我通过以下方式解决了这个问题：

```
git push <remote> localbranch --force. 
```

除非您完全确定自己知道自己在做什么，否则不要使用 --force 标志。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-17T19:19:48.293

```
git rm --cached *.xcuserstate *.xcuserdata 
```

运行上面的命令。然后提交，然后推送。

见这里：[Xcode 说“未提交的更改”每当我尝试 git pull 或 push](https://stackoverflow.com/questions/11173261/xcode-says-uncommitted-changes-whenever-i-try-to-git-pull-or-push)

您可能需要单独运行它们：

```
git rm --cached *.xcuserstate
git rm --cached *.xcuserdata 
```

# css - CSS 光标在 IE9 中不是内联的

> ID：11910236
> 
> 赞同：1
> 
> 时间：2012-08-10T22:51:17.813
> 
> 标签：css, internet-explorer-9

当我使用

> 光标：网址（xxx.ico）

它适用于 chrome 和 FF。但是当我将鼠标悬停在 div 上时尝试使用 IE9 - 光标“跳”上 30 像素。这是为什么？

```
*( i tried to use 32X32 and 16X16 icons - and it's the same) 
```

CSS：

```
.main_div { 
cursor:url(/static/IMG/hand.ico),auto;
 } 
```

谢谢！

# vb.net - 使用 String 的实际值作为 TextBlock.Text 的格式化值

> ID：11910237
> 
> 赞同：0
> 
> 时间：2012-08-10T22:51:26.230
> 
> 标签：vb.net, string, variables, textbox

所以基本上我有这个：

带有 1 个按钮 (btn_Convert) 和 2 个文本框（txtBox_StringValue 和 txtBox_Result）的 WPF 窗口。

然后在 txtBox_StringValue 中粘贴格式化的字符串值：

```
"This is a Header" & vbCrLf & "======================" & _
vbCrLf & "INFO" & vbCrLf & "======================" 
```

然后，当我单击 btn_Convert 时，我希望发生以下情况。

代码：

```
Dim tempStringValue = txtBox_StringValue.Text

txtBox_Results.Text = tempStringValue 
```

但是（显然），当我执行上述操作时，Results TextBox 只会再次显示字符串：

```
"This is a Header" & vbCrLf & "======================" & _
vbCrLf & "INFO" & vbCrLf & "======================" 
```

代替：

```
This is a Header
======================
INFO 
```

那么如何获取字符串的值，然后去除包含的双引号，以便分配时的值就像是代码中设置的变量值，而不仅仅是传递字符串。

根据我所做的研究，我猜我需要使用反射，但是我不熟悉反射概念，也不知道如何处理它。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:32:43.280

在这种情况下，反射不会帮助你。听起来您在说的是动态解释一些 VB.NET 源代码并将执行该代码的结果输出到另一个文本框。在这种情况下，您需要使用 Code DOM 类在内存中动态构建程序集并执行它。

# java - 全屏游戏窗口无法正确显示

> ID：11910242
> 
> 赞同：0
> 
> 时间：2012-08-10T22:52:00.577
> 
> 标签：java, swing, jframe, fullscreen

您好，我正在尝试创建全屏游戏的开头，但遇到了问题。我想要一个带有白色文本的蓝色背景，并将整个屏幕更改为 800*600。问题是我得到一个中间有一个 800*600 框的屏幕（不可见，但我可以通过鼠标边界判断）并且我的背景是黑色的。

* * *

![在此处输入图像描述](../Images/14a6e1544789297e9dd4f5fedc2834e3.png)

* * *

我的代码：

```
import java.awt.*;

import javax.swing.JFrame;
/**
 * Write a description of class Full here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class Full extends JFrame 
{

   public static void main(String[] args){
     DisplayMode dm = new DisplayMode(800,600,16, DisplayMode.REFRESH_RATE_UNKNOWN);  
     Full full = new Full();
     full.run(dm);

    }
   public void run(DisplayMode dm){
     setBackground(Color.BLUE);  
     setForeground(Color.WHITE);
     setFont(new Font("Arial", Font.PLAIN,24));

     Screen s = new Screen();
     try{
        s.setFullScreen(dm,this);
        try{
            Thread.sleep(15000);
        }catch(Exception ex){}
        }finally{
         s.restoreScreen();   
        }
    }
   public void paint(Graphics g){
       if(g instanceof Graphics2D){
           Graphics2D g2 = (Graphics2D) g;

g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
        }
       g.drawString("This is gonna be awesome!!",200,200);
    }
}

public class Screen
{
  private GraphicsDevice vc;
  Window myWindow;
  public Screen(){
      GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
      vc = env.getDefaultScreenDevice();
    }
  public void setFullScreen(DisplayMode dm, JFrame myWindow){
      myWindow.setUndecorated(true);
      myWindow.setResizable(false);
      vc.setFullScreenWindow(myWindow);

      if(dm != null && vc.isDisplayChangeSupported()){
          try{
             vc.setDisplayMode(dm); 
            }catch(Exception ex){}
        }
    }
  public Window getFullScreenWindow(){
      return vc.getFullScreenWindow();
    }
  public void restoreScreen(){
      Window w = vc.getFullScreenWindow();
      if(w != null){
          w.dispose();
        }
      vc.setFullScreenWindow(null);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:37:40.113

这是一个简短的答案，因为您似乎走错了路:)

游戏应该使用 OpenGL 或 DirectX，因此图形工作由 GPU 完成。我强烈推荐 OpenGL，因为它与每个平台都兼容。你开始的方式，游戏将完全在 CPU 上运行，这是不好的。

看看[LWJGL（轻量级 Java 游戏库）](http://lwjgl.org)。它是一个允许您使用 OpenGL 的跨平台库。这将需要一些谷歌搜索的教程，但它真的是值得的。你的游戏表现会好很多，你的游戏会按照它必须的方式制作。只是为了给你一个想法，Minecraft 是用 LWJGL 制作的。

OpenGL 允许您使用一些简单的方法快速开始您的游戏开发，这对于第一次游戏体验来说是很好的。稍后，您会发现如何更有效地做事，但是这将是太多的信息开始 :D
祝你好运！

# windows-phone-7 - Windows Phone 7 列表框不显示

> ID：11910251
> 
> 赞同：0
> 
> 时间：2012-08-10T22:53:17.317
> 
> 标签：windows-phone-7, listbox

所以我有一个列表框，我试图为“成就页面”制作一个列表框。如果我使用列表，一切都很好，但是当我将它切换到列表时，没有显示任何内容，甚至从 xaml...

```
public partial class achievementPage : PhoneApplicationPage
{
    public string Description { get; set; }
    public string Type { get; set; }
    public achievementPage()
    {
        InitializeComponent();
        loadListbox();
    }
    public achievementPage(string achievementGet, string d1)
    {  
    }
    public void loadListbox()
    {
        achievementStoreage.loadData();
        List<achievementPage> achievementList = new List<achievementPage>();
        achievementList.Add(new achievementPage(achievementStoreage.achievement1, "This is a        test"));
        achievementList.Add(new achievementPage(achievementStoreage.achievement2, "This is    another test")); 
        //List<string> achievementList = new List<string>();
        //achievementList.Add("Sup");
        achievementListBox.ItemsSource = achievementList;
    }
}

<ListBox Name="achievementListBox" Margin="0,0,0,0" >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Button Width="776" Height="120" BorderBrush="Black">
                <Button.Content>
                    <StackPanel Orientation="Horizontal" Height="50">
                        <StackPanel Orientation="Horizontal" Height="40">
                            <TextBlock Width="150" Foreground="Black" FontSize="22" Text="Description:" Height="40"/>
                        </StackPanel>
                    </StackPanel>
                </Button.Content>
            </Button>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我得到的只是一个空白页。PS不要担心成就存储，它工作正常。（只是我获取存储数据的地方）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:03:43.360

天啊。为什么要创建一个`achievementPage`s列表？在您的成就页面上，您将需要一个`ListBox`带有类型的项目，例如、、、、`AchievementItem`等。`CompletedAchievement``NotCompletedAchievement`

目前，什么都没有显示，因为您的代码可能会抛出 StackoverflowException（这里不是开玩笑:)）。看：你的成就页面构造函数调用 loadListBox 创建两个成就页面并将它们添加到列表中。但是创建两个成就页面会再次导致它们的构造函数被调用两次，这会调用 loadListBox 两次，依此类推。

-- 编辑：好的，没有stackoverflow，我刚刚注意到第二个构造函数。你应该坚持用你知道的大写字母来命名类 :) 无论如何，把 a`Page`作为 a 的数据项`ListBox`放在 a 上`Page`是个**坏主意**。

你想得到的应该看起来更像：

```
public partial class AchievementPage : PhoneApplicationPage
{
    public string Description { get; set; }
    public string Type { get; set; }

    public AchievementPage()
    {
        InitializeComponent();
        loadListbox();
    }

    public void loadListbox()
    {
        var theList = new List<Achievement>();
        theList.Add(new Achievement{ AchvCount=3, AchvName="medals" });
        theList.Add(new Achievement{ AchvCount=2, AchvName="badges"  }); 
        theList.Add(new Achievement{ AchvCount=6, AchvName="zonks"  }); 

        achievementListBox.ItemsSource = achievementList;
    }
}

public class Achievement : DependencyObject
{
    public int AchvCount {get; set;}
    public string AchvName {get; set;}
}

<ListBox Name="achievementListBox" Margin="0,0,0,0">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50" />
                    <ColumnDefinition Width="50" />
                    <ColumnDefinition Width="50" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="You've got:" />
                <TextBlock Grid.Column="0" Text="{Binding AchvCount}" />
                <TextBlock Grid.Column="0" Text="{Binding AchvName}" />
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:23:56.333

坦率地说，您似乎根本不允许将 ItemTemplates 与 UIElements 一起用作项目的 DataContexts。我试过：

```
achievementListBox.ItemsSource = new [] {"a","b"}; 
```

并且这两个项目都是可见的并且打印了虚拟的“描述”文本，但是我尝试过的以下几行都没有呈现任何内容：

```
achievementListBox.ItemsSource = new [] { new TextBlock(), new TextBlock()};
achievementListBox.ItemsSource = new [] { new Rectangle(), new Rectangle()};
achievementListBox.ItemsSource = new [] { new Grid(), new Grid()}; 
```

尝试使用您的自定义页面 - 相同。没有显示项目。

这是非常具有误导性的。项目**已**显示，但请看上面的行：控件被创建为**empty**，没有设置内容！。

事实证明，如果 ListBox 检测到 Item 是 UIElement，那么它**不会**使用 ItemTemplate，而是直接呈现该 UIElement！

```
achievementListBox.ItemsSource = new[] { new TextBlock() { Text = "bbb" }, new TextBlock() { Text = "eee" } };
achievementListBox.ItemsSource = new[] { new Rectangle() { Fill = new SolidColorBrush(Colors.Red), Width = 30, Height = 10 }, new Rectangle() { Fill = new SolidColorBrush(Colors.Green), Width = 30, Height = 10 } };

var gridA = new Grid() { Width = 110, Height = 40 }; gridA.Children.Add(new Rectangle() { Fill = new SolidColorBrush(Colors.Red) });
var gridB = new Grid() { Width = 110, Height = 40 }; gridB.Children.Add(new Rectangle() { Fill = new SolidColorBrush(Colors.Green) });
achievementListBox.ItemsSource = new[] { gridA, gridB }; 
```

以上三个示例都完全忽略了 ListBox.ItemTemplate，而是直接显示两个项目：两个文本框、两个矩形、两个更大的矩形（在一个网格中）。

回到您的案例：这意味着使用您的原始设置，ListBox 也会尝试直接显示项目 - 因为您的自定义页面是 UIElement。它确实做到了！但是您的页面是……空的。在重载的构造函数中，您`InitializeComponent();`通过读取 XAML 代码省略了构造视图的 。这是一个更正的示例，它显示了三次“Hello”：一次只是因为它位于页面上，接下来两次是因为 ListBox 行设置为同一页。

请原谅我重命名了这些类，我只是开始了一个新项目，而不是粘贴您的代码。
请注意，我必须向 XAML 添加一些其他控件，因为用作数据项的页面将显示为空，因为它们没有设置项

```
public partial class MainPage : PhoneApplicationPage
{
    public string Description { get; set; }
    public string Type { get; set; }

    public MainPage()
    {
        InitializeComponent();
        loadListbox();
    }

    public MainPage(string achievementGet, string d1)
    {
        InitializeComponent();
        someText.Text = d1;
    }

    public void loadListbox()
    {
        achievementListBox.ItemsSource = new[] { new MainPage(null, "ddd"), new MainPage(null, "ccc") };
    }
}

<StackPanel>
    <TextBlock>
        <Run Text="Hello" />
        <Run Text=" " />
        <Run x:Name="someText" />
    </TextBlock>

    <ListBox Name="achievementListBox" Margin="0,0,0,0">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Width="150" Foreground="White"
                           FontSize="22" Text="This DataTemplate is IGNORED because the Item is UIElement"
                           Height="40"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</StackPanel> 
```

我尝试以与您类似的方式来塑造代码，只是删除了一些与问题无关的行。我希望这能解释你现在的一切：）

# objective-c - CGFloat/NSTimeInterval 是否会失去准确性

> ID：11910257
> 
> 赞同：0
> 
> 时间：2012-08-10T22:54:16.340
> 
> 标签：objective-c

将 CGFloat 除以 NSTimeInterval 时是否会丢失任何准确性？

我正在尝试将 NSTimeInterval 转换为 UIView.frame.size.width 并当前将其转换为浮点数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:59:31.887

An`NSTimeInterval`是 a 的 typedef `double`，保证至少具有与 a 一样的精度`CGFloat`（在 32 位系统上`CGFloat`定义为 a ，在 64 位系统上定义为 a ）。`float``double`

所以不，将 a`CGFloat`除以 an`NSTimeInterval`不会失去任何准确性（与将它除以另一个相比，`CGFloat`浮点数学总是担心精度/准确性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:00:11.870

CGFloat 可以是浮点数，而 NSTimeInterval 是双精度数。如果您执行除法（您的结果是双精度），则不会损失精度，但是如果您将 NSTimeInterval 转换为 CGFloat，则可能会损失精度。

# ruby-on-rails - Rails 3 活动跟踪器数据库管理

> ID：11910266
> 
> 赞同：0
> 
> 时间：2012-08-10T22:56:34.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我最近在我的应用程序中添加了用户活动跟踪功能，该功能跟踪用户与多个模型的交互，以及每个模型中的几个不同操作。

```
class User

  has_many :activities, :order => 'created_at desc'     

  def log_activity(object, type)
    activities.create(:subject_type => object.class.name, :subject_id => object.id, :subject_action_type => type)
  end 

end 
```

现在我在用户创建/更新/删除各种对象并在用户配置文件上显示此活动后调用此方法。我想一段时间后，活动表将包含如此多的记录，它会达到影响加载时间的程度。我想知道以用户友好的方式管理它并保持我的数据库顺利运行的一个好的实现是什么。

我正在考虑设置某种计划任务，在 x 时间后清理旧记录。也许您可以就如何完成此任务提供一些建议或推荐更好的解决方案？

我使用**PostgreSQL**作为我选择的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:15:07.093

您的`activities`延迟加载，因此除非您要求，否则它不会拉入所有相关活动。所以当你这样说的时候：

```
activities.create(...) 
```

您对数据库所做的只是一个 INSERT：没有`select * from activities where ...`to build `activities`，只有`create`调用中的 INSERT。

所以你不用担心你的`log_activity`方法。

如果你想限制你的`activities`表的大小，那么一个简单的：

```
Activity.connection.execute("delete from activities where created_at < now() - interval '10 days'") 
```

偶尔清理一下死木应该没问题。`'10 days'`当然，这只是为了说明。

# jquery - jQuery 砌体和 WordPress

> ID：11910269
> 
> 赞同：0
> 
> 时间：2012-08-10T22:56:59.453
> 
> 标签：jquery, image, wordpress, gallery, jquery-masonry

我正在尝试将 WordPress 画廊与 jQuery Masonry 放在一起，但它看起来不正确。

这是我的代码：

```
<style type="text/css">
#container {
}
.item {
  width: 200px;
  float: left;
  padding: 10px;
  margin: 10px;
  background: #D8D5D2;
  font-weight: 300;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
}
</style>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="jquery.masonry.min.js"></script>

<script>
$(function(){
  $('#container').masonry({
    // options
    itemSelector : '.item',
    columnWidth : 240
  });
});
</script> 
```

这是 HTML：

```
<div id="container">

<div class="item"><img src="1.JPG" width="200" /></div>
<div class="item"><img src="2.JPG" width="200" /></div>
<div class="item"><img src="3.JPG" width="200" /></div>
<div class="item"><img src="4.JPG" width="200" /></div>

...
</div> 
```

这是输出：

[![输出](../Images/63713c91e6a5df4cc4da184e751bad74.png)](https://i.stack.imgur.com/dYWiB.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:21:25.963

很久以前，我在我的 Wordpress 网站上使用了 Masonry，结果非常好，唯一的问题是我不确定代码是什么，因为这是很久以前的事了，而且该网站不再存在。尝试将以下内容添加到您的 CSS。

```
overflow:hidden; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:54:06.250

嗯，这是尴尬。显然 jquery.masonry.min.js 无处可寻，当我将它添加到文件夹中时，它开始完美运行！谢谢大家的好意建议。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-10T23:00:47.673

首先让我印象深刻的是这句话：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script> 
```

它应该是：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script> 
```

# sql - SQL 存储过程 IF EXISTS UPDATE ELSE INSERT

> ID：11910286
> 
> 赞同：18
> 
> 时间：2012-08-10T22:59:15.260
> 
> 标签：sql, stored-procedures, if-statement

好的。[早些时候，我在这里](https://stackoverflow.com/questions/11906506/sql-server-2008-if-not-exists-insert-else-update)得到了很多帮助，将 SQL 后端用于一个简单的......只是不适合我:(......我工作的小型办公室的时钟解决方案，所以我回来了！

我目前正在使用的表由 6 列组成：

1.  clockDate 日期不为空 PK
2.  用户名 varchar(50) 不为空 PK
3.  时钟在时间(0)
4.  休息时间(0)
5.  磨合时间(0)
6.  下班时间(0)

虽然我已经`IF NOT EXISTS INSERT ELSE UPDATE`从上一个问题中弄清楚了我的陈述，但现在我试图在存储过程中使用它，而不是在普通的查询窗口中使用它，但没有成功。

基本上，用户打卡是不费吹灰之力的。但是，如果用户没有打卡，但他们打卡吃午饭，则该语句需要创建行而不是更新现有行。好的，这是我的存储过程：

```
ALTER PROCEDURE dbo.BreakOut
(
    @userName varchar(50)
)
AS

IF EXISTS (SELECT * FROM Clock WHERE clockDate = GETDATE() AND userName = @userName)
    BEGIN
        UPDATE Clock SET breakOut = GETDATE() 
            WHERE clockDate = GETDATE() AND userName = @userName
    END
ELSE
    BEGIN
        INSERT INTO Clock (clockDate, userName, breakOut) 
            VALUES (GETDATE(), @userName, GETDATE())
    END 
```

这是我的问题...如果用户 DID 当天打卡我得到主键违规，因为存储过程仍在尝试运行`INSERT`语句的一部分并且从不运行该`UPDATE`行。我也尝试过翻转它，`IF NOT EXISTS`结果相同。让 IF-ELSE 在存储过程中工作的诀窍是什么？这可以按照我的想法来完成，还是我必须研究`Merge`陈述？我的计划是在每个工作站上从一个简单的 Visual Basic 程序运行存储过程。也许我有点不知所措:(可惜我的老板太便宜了，不能只买一个时钟解决方案！

**编辑：**

感谢大家的帮助！！我爱上了这个网站，问题得到答案这么快！！！这是我的工作存储过程：

```
ALTER PROCEDURE dbo.BreakOut
(
    @userName varchar(50)
)
AS

IF EXISTS (SELECT * FROM Clock WHERE DateDiff(dd, GetDate(),clockDate) = 0 AND userName = @userName)
    BEGIN
        UPDATE Clock SET breakOut = GETDATE() 
            WHERE DateDiff(dd, GetDate(),clockDate) = 0 AND userName = @userName
    END
ELSE
    BEGIN
        INSERT INTO Clock (clockDate, userName, breakOut) 
            VALUES (GETDATE(), @userName, GETDATE())
    END 
```

这是正确的，还是可以进一步改进？再次感谢你们！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T23:06:36.587

这可能是这里的问题： WHERE clockDate = GETDATE()

GetDate 返回当前日期和当前时间，这与clockDate 不匹配。您可以将日期与 DateDiff 进行比较：

```
WHERE DateDiff(dd, GetDate(),clockDate) = 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T23:08:46.627

您的问题似乎如下：

假设用户在 09:00 打卡

可能存在如下记录：

```
ClockDate 用户名 clockIn breakOut breakIn clockOut
12/08/2012 乔 09:00 NULL NULL NULL

```

现在您的 IF 语句正在执行此操作：

```
SELECT * FROM Clock WHERE clockDate = "20120812 17:24:13" AND userName = @userName 
```

即该记录将不存在。

相反，试试这个：

```
IF EXISTS (SELECT * FROM Clock  WHERE clockDate = DATEADD(D, 0, DATEDIFF(D, 0, GETDATE())) AND userName = @userName) 
```

您还需要确保将 clockDate 存储为 GETDATE() 的日期部分，否则，您需要像这样调整查询：

```
IF EXISTS (SELECT * FROM Clock WHERE DATEADD(D, 0, DATEDIFF(D, 0, clockDate)) = DATEADD(D, 0, DATEDIFF(D, 0, GETDATE())) AND userName = @userName) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T23:07:49.633

您的更新将永远不会运行，因为`GETDATE`返回日期*和时间*。

[http://msdn.microsoft.com/en-us/library/ms188383.aspx](http://msdn.microsoft.com/en-us/library/ms188383.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-16T00:36:00.260

```
CREATE PROCEDURE `SP_GENRE_SELECT`(
    IN _Id INTEGER,
      IN _Name VARCHAR(50),
      IN _account VARCHAR (50),
      IN _Password VARCHAR (50),
      IN _LastConnexionDate DATETIME,
      IN _CreatedDate DATETIME,
      IN _UpdatedDate DATETIME,
      IN _CreatedUserId INTEGER,
      IN _UpdatedUserId INTEGER,
      IN _Status TINYINT
    )
BEGIN
      SELECT *
      FROM user
      WHERE Id LIKE IF(_Id IS NULL,'%',CAST(_Id AS VARCHAR(50)))
      AND
      Name LIKE IF(_Name IS NULL,'%',CONCAT('%',_Name,'%'))
      AND
      Account LIKE IF(_Account IS NULL,'%',CONCAT('%',_Account,'%'))
      AND
      LastConnexionDate LIKE IF(_LastConnexionDate IS NULL,'%',CONCAT('%',CAST(LastConnexionDate AS VARCHAR(50),'%')))
      AND
      CreatedDate LIKE IF(_CreatedDate IS NULL,'%',CONCAT('%',CAST(_CreatedDate AS VARCHAR(50),'%')))
      AND
      UpdatedDate LIKE IF(_UpdatedDate IS NULL,'%',CONCAT('%',CAST(_UpdatedDate AS VARCHAR(50),'%')))
      AND
      CreatedUserID LIKE IF(_CreatedUserID IS NULL,'%',CONCAT('%',CAST(_CreatedUserID AS VARCHAR(50),'%')))
      AND
      UpdatedUserID LIKE IF(_UpdatedUserID IS NULL,'%',CONCAT('%',CAST(_UpdatedUserID AS VARCHAR(50),'%')))
      AND
      Status LIKE IF(_Status IS NULL,'%',CAST(_Status AS VARCHAR(50),'%'))

END 
```

# image-processing - 使用 Matlab 并行计算工具箱工具优化图像采集

> ID：11910290
> 
> 赞同：0
> 
> 时间：2012-08-10T22:59:39.197
> 
> 标签：image-processing, parallel-processing, video-capture, matlab

使用单个 matlab 工作者，我可以轻松地使用我的相机（使用 matlab imaq 工具箱）实现最大每秒帧数 (fps)。这个简单的代码做到了：

```
matlabpool(1)
start(vid)
pause(1); % give matlab time to initialize the camera
for j=1:frames
     data = getsnapshot(vid);
end 
```

但是，一旦我尝试即时进行一些图像处理，有效率就会下降 50%。由于我在 matlabpool 中还有 5 个工作人员（还有一个 gpu），我可以优化这一点，以便抓取的每个帧都由不同的工作人员处理吗？例如：

```
for j=1:frames
data = getsnapshot(vid);
      <do some analysis with worker mod((j),5)+2  i.e. worker 2 to 6 >  
end 
```

问题是“数据”是从相机连续获取的，分析需要大约 2 轮循环，因此如果每次都有不同的工作人员（或核心）处理，则可以再次获得最大 fps。 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T10:02:22.140

在我看来，这里的工作流程本质上是连续的..

您可以做的最好的事情是矢量化/并行化您的图像处理功能（因此您仍然可以一张一张地抓取图像，但您将处理分布在多个核心上）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:30:14.510

我想我得到了解决方案：

```
for i=1:frames

     for sf=1:6; % I got 6 cores
         m(:,:,sf) = getsnapshot(vid);
     end

     spmd 
         result=f(m(:,:,labindex));
     end
end 
```

我设法通过 GPU 并行化获得更好的结果......

# java - 单例创建新窗口

> ID：11910291
> 
> 赞同：1
> 
> 时间：2012-08-10T22:59:40.190
> 
> 标签：java, javafx-2

使用单例创建新窗口是一种好习惯吗？

我有主窗口，我想创建另一个。此窗口仅用于更改主窗口中的属性。

我的代码：

主窗口

```
public class MainWindow  {

private StackPane root = new StackPane();
private Stage primaryStage = new Stage();

  public void run(){

    primaryStage.setTitle("v0.2-alpha");
    Scene scene = new Scene(root, 600, 400);
    scene.getStylesheets().addAll("css/style.css"); 

    MainMenu mmb = new MainMenu();     

    VBox vBox = new VBox();
    vBox.getChildren().add(mmb.createMenuBar());

    ISplitPane lsp = new SplitPaneLeftImpl();
    ISplitPane csp = new SplitPaneCenterImpl();
    ISplitPane rsp = new SplitPaneRightImpl();

   HBox hboxpane = new HBox();
   hboxpane.getChildren().addAll(spl.createSplitPane(), spc.createSplitPane(), spr.createSplitPane());

    root.getChildren().addAll(vBox,hboxpane);
    primaryStage.setScene(scene);
    primaryStage.show();
} 
```

}

创建新的窗口类

```
public interface IStage {
    public void createStage();
}

class StageOptionsImpl implements IStage{
private OptionsStage(){}

private Stage stageOptions = new Stage();

private static StageOptionsImpl os = null;

public static StageOptionsImpl getInstance(){
    if(os == null){
        synchronized(StageOptionsImpl.class){
            if(os == null){
                os = new StageOptionsImpl();
            }
        }
    }
    return os;
}

@Override
public void createStage(){
 GridPane gp  = new GridPane();
    TabPane tabPane = new TabPane();
    tabPane.setSide(Side.LEFT);                

    Tab tabSecurity = new Tab("Security");
    tabSecurity.setContent(new SecurityTab().tabCreate());

    Tab tab2 = new Tab("System Data");
    tab2.setContent(new DataTab().tabCreate());

    Tab tab3 = new Tab("tab 3");
    tab3.setContent(new SecurityTab().tabCreate());

    tabPane.getTabs().addAll(tabSecurity, tab2, tab3);

    Scene sceneOptions = new Scene(tabPane, 400, 300, Color.AQUA);
    stageOptions.setScene(sceneOptions);
    stageOptions.show();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:14:14.420

如果它只从那里使用，你为什么要一个单例。单例的全部意义在于您可以在任何地方使用它的相同实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:56:04.940

管理这些窗口的最佳方法通常是创建一个类来管理程序中的所有窗口/面板。

如果你想打开名为“ClientForm”的面板，它应该有一个这样的方法：

```
public void OpenClientForm(){

// Set the other forms to their default form(when != null) and set their visibility as false (when != null).
    RestorePanels();
 // In case it hasn't been created yet 
 if (ClientForm == null){
 // calls a factory that creates the form.
 }
 else{
 // Set the form as visible
 }
} 
```

在程序内部“处理”面板/表单时，您应该有一种方法可以清除面板，强制它们恢复到原始状态并将它们的可见设置为 false。

Swing 有很多问题，处理表单并重新创建它们可能会在您的界面中弄乱很多东西。所以，回到你的问题......实现一个单例或一个工厂来管理你的表单应该是最好的方法。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T23:11:21.517

> 使用单例创建新窗口是一种好习惯吗？

好吧，这归结为一个设计问题。

如果您只想`Component`在您的应用程序中拥有一个共享的 a 实例，那么我会说单例不是一个坏方法。它将迫使这种选择。

但是，如果您想要显示相同的多个实例，`Component`但想要一种更简单的方式来构造它，或者想要通过 API 公开一个非具体的接口，那么`Factory`模式将是更好的选择。

# cakephp - cakephp 将字符串传递给控制器

> ID：11910292
> 
> 赞同：0
> 
> 时间：2012-08-10T22:59:44.430
> 
> 标签：cakephp

我有这个过程，我需要处理一个文本文件。为了让用户选择一个文件，我使用这个：

```
<?php echo $this->Form->file('prodfile'); ?> 
```

它提供了一个浏览器按钮和一个带有所选文件路径的输入。

用户浏览文件后，单击我的链接以触发该方法。

如何将“prodfile”输入上的字符串值添加到链接作为这个链接？：

```
<?php echo $this->Html->link(__('Process File'), array('controller' => 'qcas', 'action' => 'loadProdFromFile', 'dataFile' => $this->data['Project']['prodfile'], 'dirId' => $dirs['id']),  null, __('Please confirm you want to Load Production from File for Dir %s?', $dirs['dir_dataname'])); ?> 
```

尝试了前者，但由于我没有提交表单，'prodfile' 上的值不会到达控制器。

如何将此文件输入上的字符串值传递给控制器​​？（只需要字符串解析并在控制器上构建正确的路径）。

更新：我目前正在使用 Ajax 来实现这一点，但如果有人可以提出不同的方法，请这样做。

你能帮我吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:20:57.883

如果没有 ajax，使用 javascript 我已经设法通过触发链接上的参数将字符串（文件的完整路径）传递给服务器以进行解析。

1.- 用户拿起一个文件

```
<?php echo $this->Form->file('prodfile', array('onchange' => "getFile();")); ?>
(getFile() only saves current href on my links - step 3-) 
```

2.- 用户手动将完整路径复制到文本输入中。（不优雅但解决了我的问题）。

```
echo $this->Form->input('Project.fullPathInput', array('label' => 'Copied Path', 'id' => 'fullPath', 'onchange' => "assignPath();"));
(assignPath() updates href on all my original links with the fullpath -since I don't know which one the user will click- 
```

3.- 这是原始链接（其中几个是动态创建的

```
echo $this->Html->link(__('LFF'), array('controller' => 'qcas', 'action' => 'loadProdFromFile', 'dirId' => $dirs['id']), array('name' => 'lff', 'id' => 'lff' . $i));

    function getFile() {
        document.getElementById('fullPath').value = '';
        var sHref = document.getElementsByName('lff');
        var len = sHref.length;
        // only the first time, save original hRef
        if ( preValues.length == 0) {   
            for (var i=0; i<len; ++i) {
                preValues[i] = sHref[i].href;
            }
        } else {
            for (var i=0; i<len; ++i) {
                sHref[i].href = preValues[i];
            }
        }
    }        

    function assignPath() {
        var finalPath = document.getElementById('fullPath').value;
        var sHref = document.getElementsByName('lff');
        var len = sHref.length;
        for (var i=0; i<len; ++i) {
            sHref[i].href = sHref[i].href + '/filePath:'+finalPath;
        }        
    } 
```

只是想分享以防有人面临类似的情况。

实际上，我已经使用 jQuery ajax 重新制作了整个东西，但没有用户选择文件。（作为用户的第二个选项）。

# php - 如何将此正则表达式组合成一个

> ID：11910293
> 
> 赞同：0
> 
> 时间：2012-08-10T22:59:58.067
> 
> 标签：php, regex

我正在尝试提取字符串的最后一个单词，但忽略它可能具有的任何扩展名，例如`amazon_uk`而不是`amazon_uk.gif`

以下代码使用 2 个 preg_match 函数从字符串中提取单词，我希望能够在 1 个 preg_match 中做同样的事情，我该怎么做？

**php代码**

```
$str = 'http://i.example.com/about/bs/logo_borderless/amazon_uk.gif';

preg_match('/[^\.\/]+\.[^\.\/]+$/', $str, $matches);
preg_match('/^[^.]+(?=.)/', $matches[0], $matches2);
$website = $matches2[0]; 
```

**输出**

```
amazon_uk 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:03:32.000

```
preg_match( '#/([^./]+)\.[^./]+$#si', $str, $matches ); 
```

**这就是它在做什么......**

```
/ 
```

匹配正斜杠

```
([^./]+) 
```

然后一个或多个既不是句点也不是正斜杠。这是我们正在匹配的位。

```
\. 
```

然后是一段时间

```
[^./]+ 
```

然后一个或多个既不是句点又不是正斜杠。

```
$ 
```

然后是字符串的结尾

* * *

你问了一个正则表达式，上面就是这样。但这是我实际上会做的......

```
$url = 'http://i.example.com/about/bs/logo_borderless/amazon_uk.gif';
$output = str_replace( array('.gif','.jpg','.png'), '', basename($url) ); 
```

**[Basename](http://php.net/basename)**是我一直使用的东西 - 非常方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T23:07:47.413

因为它将始终采用您指定的格式（根据评论），您还可以使用`substr()`and `strpos()`(and `strrpos()`) 的组合来获取文本，而不是正则表达式：

```
// get the filename after the last slash
$file = substr($str, strrpos($str, '/') + 1);
// get the text before the extension
$website = substr($file, 0, strpos($file, '.')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T23:07:40.447

```
preg_match('/\/([\w]+)\.(?:[a-zA-Z]{1,3})$/', $str, $matches);
$result = $matches[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T00:59:09.643

非贪婪搜索加上扩展上的可选匹配应该可以解决问题：

```
preg_match('/([^\.\/]+?)(?:\.\w*)?$/', $str, $matches);
$website = $matches[1]; 
```

# python - 如何使用 Fabric 处理部署到具有多个应用程序服务器的单个主机？

> ID：11910295
> 
> 赞同：3
> 
> 时间：2012-08-10T23:00:06.477
> 
> 标签：python, host, fabric

我有许多应用程序服务器在同一台主机上运行。每个应用程序服务器都安装在不同的目录中。

我应该如何使用 Fabric 解决服务器上的部署问题？我希望能够分别在每台服务器上以及在服务器子集上执行部署。显然这个`env.hosts`参数在这里没有用，因为所有的服务器都在同一个主机上。`env.roledefs`参数也是如此。当每台服务器都安装在不同的主机上时，这些会派上用场。

我应该如何处理服务器的分组，并为 fab 工具可以读取和应用的每个服务器设置单独的环境参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:13:01.500

这只是 python，所以做你需要做的事情来让它们分开。您可以在字典或读入脚本的某些 yaml 文件中定义目录差异。没有任何面料可以让您以一种方式做到这一点，也没有提供任何特定的方式来做到这一点。

但本质上请记住，它不是 DSL，它是一个完整的 python 文件，你会偶然发现最适合你和你的环境的东西。

# asp.net - ASP.NET MVC LINQ 实体框架删除不起作用

> ID：11910306
> 
> 赞同：0
> 
> 时间：2012-08-10T23:01:41.370
> 
> 标签：asp.net, asp.net-mvc, entity-framework

这是我的代码：

```
User user = db.Users.Where(u => u.ID == userInSession.ID).FirstOrDefault();
            UserItem UI = user.UserItems.Where(ui => ui.User == user && ui.Item == item&& ui.IsFavourite == true).FirstOrDefault();
            if (UI == null)
            {
                return false;
            }
            else
            {
                user.UserItems.Remove(UI);
                return true;
            }
            db.SaveChanges(); 
```

它找到了 erntry 并尝试将其删除，但删除后，它并没有删除整行，它只是删除了表中 UserID 的值。我在这里想念什么？当我这样做时。添加它工作正常..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:33:45.800

用于`db.UserItems.Remove`移除实际对象。您还可以创建一个查询来检查该特定 userSessionId 的 UserItems 是否存在，如下所示：

```
var UI = db.UserItems.Where(ui => ui.User.ID == userInSession.ID && ui.Item == item && ui.IsFavourite == true).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:04:47.673

您正在执行的代码是删除从用户项到用户的*映射。*您必须使用您正在使用的数据上下文删除用户项。

# clang - 如何告诉 ccc-analyzer（c 静态分析器）函数无法返回

> ID：11910311
> 
> 赞同：1
> 
> 时间：2012-08-10T23:02:24.383
> 
> 标签：clang, clang-static-analyzer

我目前正在使用`ccc-analyzer`by`static-build`来分析我们的代码库。我正在使用从 Git 镜像制作的最新版本。

现在在 PC-Lint 中，只要函数没有返回，我就可以告诉 Lint。这通常通过`/*lint -unreachable*/`控制 PC-Lint 行为的或类似的注释（“标记”）来完成。

我现在`scan-build`遇到了一些我想抑制的误报，因为我知道一个特定的函数永远不会返回（最终它会调用`exit`C 运行时的函数）。有什么方法可以告诉`static-build`/`ccc-analyzer`我的函数*无法*返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:20:19.983

事实证明，有一种方法可以使用[此处记录](http://clang-analyzer.llvm.org/annotations.html#attr_analyzer_noreturn)的 GCC 样式属性来注释代码。所以这个问题得到了回答。

# php - 验证选择器输入的值不是第一个 PHP

> ID：11910312
> 
> 赞同：1
> 
> 时间：2012-08-10T23:02:28.127
> 
> 标签：php, html

抱歉，我知道我昨天问过这个问题，但我得到的答案是 Javascript，它对我有用，但现在我正在编写 PHP 脚本，我也无法弄清楚 PHP 版本。我试图研究它，但没有任何结果。

我正在尝试为您的生日创建一些选择器的验证脚本，例如月份、日期和年份。基本上我希望脚本运行为：

如果选择器在第一个选项上，则返回 false ELSE 返回 true

如果选择了列表中的第一个选项，我需要什么 IF 语句才能返回脚本 false。

例如，

```
<select>
    <option>FAIL IF THIS IS SELECTED</option>
    <option>PASS IF THIS IS SELECTED</option>
    <option>PASS IF THIS IS SELECTED</option>
    ...And So On
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:06:23.653

**HTML**

```
<form action="post.php" method="post">
    <select name="test" id="test">
        <option value="0">FAIL IF ...</option>
        <option value="1">PASS IF ...</option>
        <option value="2">PASS IF ...</option>
    </select>
</form> 
```

**PHP 里面的一些验证函数（form.php）**

```
if($_POST['test'] == "0") return false;
else return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:07:30.460

您可以在每个标签`value`内提供属性`option`

```
<select>
    <option value="">FAIL IF THIS IS SELECTED</option>
    <option value="something">PASS IF THIS IS SELECTED</option>
    <option value="something else">PASS IF THIS IS SELECTED</option>
    ...And So On
</select> 
```

然后使用检查`<select>`标签的值

```
if($_POST['name of select tag'] == '') // first selector is chosen
{
   // display the error message
} 
```

# asp.net - RadGrid 尝试在插入后保持插入表单打开

> ID：11910313
> 
> 赞同：0
> 
> 时间：2012-08-10T23:02:39.513
> 
> 标签：asp.net, telerik-grid

我有一个 Telerik radgrid，它是一个基本的数据输入表单。

我想在插入后保持插入表单打开。用户单击插入按钮，记录保存，网格仍处于插入模式。

我可以通过使用让网格以插入模式打开

```
RadGrid1.MasterTableView.IsItemInserted = true; 
```

但是，无论我将这段代码放在哪里（page_prerender、oninsert 等），当插入记录时，radgrid 都会返回查看网格项。我尝试在加载（$（document）.ready）后在客户端执行此操作，但没有调用该代码。（可能是由于 radajaxmanager 覆盖它）

```
 var grid = $find("<%#RadGrid1.ClientID %>");
        grid.get_masterTableView().IsItemInserted = true; 
```

有谁知道如何在插入后保持插入行模板打开？

我的下一步是保留上一个插入中的一些值，所以如果你知道如何做到这一点，请包括在内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:18:50.337

你可以使用下一个：

```
<Telerik:RadGrid ID="Grid"
    OnNeedDataSource="NeedDataSource" ..> 
```

需要数据源函数：

```
protected void NeedDataSource(object sender, GridNeedDataSourceEventArgs e) {
  parametersGrid.DataSource = data;
  parametersGrid.MasterTableView.IsItemInserted = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T17:48:15.917

您可以设置**e.Canceled = true;** 在您的 itemCommand 事件中

# iphone - 有人可以向我解释一下 CCSpriteBatchNodes 和 spritesheets 是如何工作的吗？

> ID：11910317
> 
> 赞同：3
> 
> 时间：2012-08-10T23:03:28.093
> 
> 标签：iphone, objective-c, ipad, cocos2d-iphone, sprite-sheet

我已经构建了一个小型 ipad 游戏，并且 spritesheets 和批处理节点到处都是。但是我不知道它们是如何工作的，何时添加精灵表，何时将精灵添加到 spritebatchnode 等等。等等。

这是我在初始屏幕（主菜单）中所做的：

```
CCSpriteBatchNode *spriteSheet  = [CCSpriteBatchNode batchNodeWithFile:@"sprites.png"];
screenSize = [CCDirector sharedDirector].winSize;    
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"sprites.plist"];
[self addChild:spriteSheet]; 
```

在其他类中-我总是需要使用相同的批处理节点->“sprites.png”-我调用

```
CCSprite *someSprite = [CCSprite spriteWithSpriteFrameName:someSpriteFrameName.png]; 
```

并将其添加到`self`.

```
[self addChild:someSprite]; // I do not understand why I would add my sprite to the batch node instead of self 
```

所以情况如下：

*   我有一个名为“sprites.png”的文件，我所有的精灵都在其中。

    1.  每当我改变场景时，我是否会创建一个新的批处理节点？spriteframecache 应该保持不变吧？
    2.  如果我有两个精灵表文件，我将与 spriteframecache 做什么？
    3.  何时将子节点添加到批处理节点，为什么？

我似乎真的没有完全掌握这个概念。我大致知道我为什么使用它。但如果有人能用外行的方式再次向我解释一切，我将非常感激，所以我对我所做的事情有 100% 的把握。请尽量解释它的基本原理。

*   非常感谢 - 马丁

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T11:34:11.800

1.  CCSpriteBatchNode 是 CCNode 的继任者，因此您必须为每个场景创建单独的实例。如果您有多个纹理文件，则可以在场景中使用多个批处理节点。

    `CCSpriteFrameCache`是一个单例，因此它在应用程序生命周期内保持不变。

2.  将两者都添加到`CCSpriteFrameCache`. `CCSpriteFrameCache`单例具有缓存所有场景的所有精灵帧的`loadedFilenames_`字段（实例）。`NSMutableSet`

3.  当您期望大量具有相似纹理的精灵时，您必须使用批处理节点。例如，您希望每 2 秒生成 100 个硬币。如果您使用通常`CCNode`并在其上创建精灵，您的应用程序将`CCSprite`每 2 秒分配这 100 个对象。`CCSpriteBatchNode`旨在提高性能和更好的内存使用率。它`UITableView`与可重复使用的细胞一样工作。

    当您使用可重用单元格滚动表格视图时，它不会创建新单元格。当必须在屏幕上显示新单元格时，表格视图只需在屏幕外找到具有相同重用标识符的单元格并将其内容替换为新内容。`CCSpriteBatchNode`以同样的方式工作。当您尝试向其添加新精灵时，节点会尝试在屏幕外查找未使用的精灵并替换其内容。

    请记住，您添加的精灵`CCSpriteBatchNode`必须使用用于创建此批处理节点的纹理文件中的纹理。

    以下示例基于您问题中的代码：

```
CCSpriteBatchNode *batchNode  = [CCSpriteBatchNode batchNodeWithFile:@"sprites.png"];
screenSize = [CCDirector sharedDirector].winSize;    
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"sprites.plist"];
[self addChild:batchNode];
CCSprite *someSprite = [CCSprite spriteWithSpriteFrameName:@"someSpriteFrom_sprites.png_.png];
[batchNode addChild:someSprite]; // add sprite to batch node to get all advantages of it 
```

这是一篇关于 CCSpriteBatchNode 性能的好文章：http: [//www.learn-cocos2d.com/2011/09/cocos2d-spritebatch-performance-test/](http://www.learn-cocos2d.com/2011/09/cocos2d-spritebatch-performance-test/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T02:41:50.343

**现代渲染器** 我们从头开始重写了渲染器。渲染图与场景图分离。这意味着最终支持自动批处理 :-) 并且新的渲染器非常快，我们不再鼓励使用 SpriteBatchNode。

精灵也有自动剔除。

好在我们没有牺牲任何旧功能：仍然支持自定义 OpenGL 命令！

[参考这个链接](http://www.cocos2d-x.org/news/216)

希望它有帮助

# windows-phone-7 - 如何使图像和文本与复选框对齐

> ID：11910335
> 
> 赞同：1
> 
> 时间：2012-08-10T23:06:21.510
> 
> 标签：windows-phone-7, xaml, checkbox, multi-select

我创建了一个多选列表，其中包括一个堆栈面板以及每个对应于复选框控件的图像和文本。我的实现工作正常，虽然我无法让图像和文本与复选框正确对齐！我想知道是否有比简单地调整边距更好的方法，但如果没有，如何实现？

主页.xaml

```
<toolkit:MultiselectList x:Name="connectionTypeMultiSelectList" HorizontalAlignment="Left" VerticalAlignment="Top" Tap="connectionTypeMultiSelectList_Tap">
                        <toolkit:MultiselectList.ItemTemplate>
                            <DataTemplate>

                                <StackPanel Orientation="Horizontal" Margin="12,0,0,0">
                                    <Image Source="{Binding Icon}" Width="35" Height="35" Margin="0"/>
                                    <TextBlock Text="{Binding Name}"  Margin="10"/>
                                </StackPanel>

                            </DataTemplate>
                        </toolkit:MultiselectList.ItemTemplate>                            
                    </toolkit:MultiselectList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:12:58.417

尝试设置堆栈面板的高度并指定要适合的图像和文本为 TextAlign=Center。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:44:30.707

在您的设计中尝试以下边距值，让我知道它是否有效。它适用于我创建的虚拟数据。我希望它也适合你。

```
 <StackPanel Orientation="Horizontal" Margin="12,0,0,0">
        <Image Source="{Binding Icon}" Width="35" Height="35" Margin="0,-12,0,0"/>
        <TextBlock Text="{Binding Name}" Margin="12,5,0,0"/>
  </StackPanel> 
```

# ios - NSArray 中 NSNumbers 的频率

> ID：11910337
> 
> 赞同：0
> 
> 时间：2012-08-10T23:06:23.533
> 
> 标签：ios, nsarray, frequency, nsnumber

嗨，我正在开发一个应用程序，该应用程序根据用户设置的一组上限和下限创建一个`NSArray`of 。`NSNumbers`在这些范围内将有至少 5000 个随机创建的数字......

我正在尝试找出最好的方法来获取`NSNumber`出现在数组中的每个随机生成的频率。

目前我在想我需要通过一些（？）来解析它并设置一个`NSDictionary`键作为数字和它出现的频率。然而，它试图在我的思绪冻结的情况下有效地做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:48:11.480

最简单的方法是使用 NSCountedSet。只需使用 initWithArray 从您的数组创建一个集合，它将唯一的项目（每个值只会进入一次），但会为您提供遇到特定对象的次数的计数。这是一个例子：

```
 NSArray *array = @[@1,@2,@3,@5,@7,@2,@1,@3,@9,@3,@1];
    NSCountedSet *set = [[NSCountedSet alloc] initWithArray:array];
    NSLog(@"%@",set);
    for (NSNumber *num in [set allObjects]) {
        NSLog(@"Number is: %@  Count is: %d",num, [set countForObject:num] );
    } 
```

# java - 为班级成员创建 Eclipse 模板

> ID：11910344
> 
> 赞同：2
> 
> 时间：2012-08-10T23:07:29.333
> 
> 标签：java, eclipse, templates

因此，如果我声明一个私有成员，例如

```
private MyObject test; 
```

我想创建一个模板，它将生成以下格式的代码

```
public MyObject retrieveAllMyObjects() {
    return test.findAll();
} 
```

我一直在搞乱模板，但我什至不知道如何激活模板。当我执行 Ctrl+Space 时，我没有收到任何模板建议消息

```
public ${return_type} retrieveAll${field}s() {

} 
```

显然这只是一个起点，我只是想看看我是否可以让 eclipse 生成它，然后我会从那里开始，但没有这样的运气。我的模板没有出现在任何地方。我使用的上下文是“Java 类型成员”我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:38:10.797

也许您对此解决方案感到满意：

```
private ${type} ${name};

public ${type} retrieveAll${type}s() {
    return  ${name}.findAll();
} 
```

如何使用它：

1.  设置名称为“retrieveAll”的代码模板
2.  去你的课
3.  输入'ret'
4.  打`<ctrl>+<space>`
5.  选择全部检索
6.  `<Enter>`
7.  输入您想要的类型，例如字符串
8.  `<Tab>`
9.  输入您想要的字段名称，例如 test
10.  `<Enter>`

# python - LPTHW ex50：找不到模块实用程序

> ID：11910347
> 
> 赞同：0
> 
> 时间：2012-08-10T23:07:44.723
> 
> 标签：python

我正在练习 lpthw 的第 50 次，[这是链接](http://learnpythonthehardway.org/book/ex50.html)。
在以非常混乱的方式下载 lpthw.web 框架之后。
我通过编写一个 .py 文件继续练习。

```
import web
urls = ('/', 'index')

app = web.application(urls, globals())

class index:
    def GET(self):
        greeting = "Hello World"
        return greeting

if __name__ == "__main__":
    app.run() 
```

但我收到了这个错误：

```
Traceback (most recent call last):
    File "bin\app.py", line 1, in <module>
      import web
    File "c:\Python31\lib\site-packages\web\__init__.py", line 14, in <module>
      import utils, db, net, wsgi, http, webapi, httpserver, debugerror
ImportError: No module named utils 
```

是什么问题造成的，

我怀疑这是我安装 lpthw.web 的一种非常混乱的方式（我遇到了很多错误，但多次尝试了多种方式。）提前谢谢你！
如果有人需要更多信息评论，我可以编辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:29:45.500

我想你忘了阅读设置说明。本学习指南**不**兼容 python3：

[练习 0：设置](http://learnpythonthehardway.org/book/ex0.html)

> 您应尽可能完全按照这些说明进行操作。例如，Mac OSX 计算机已经有 Python 2，所以不要安装 Python 3（或任何 Python）。
> 
> *确保安装的是 Python 2 而不是 Python 3。*
> 
> **初学者警告**
> 程序员可能会尝试让您安装 Python 3 并学习它。你应该告诉他们，“当你计算机上的所有 Python 代码都是 Python 3 时，我会努力学习它。” 这应该让他们忙碌大约 10 年。

从系统中删除 python3 并安装 python2.7 以在安装建议的包时允许本教程工作。

否则，请查找另一个使用与 python3 兼容的库中的示例的教程。截至目前，并非所有内容都已更新。由于这个原因，许多人坚持使用python2.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:29:07.907

作为教程状态，您可以尝试使用或`easy_install`从命令行`pip`安装`easy_install lpthw.web``pip install lpthw.web`

另请注意，您需要正确引用`application`
这`app = application(urls, globals())`应该
`app = web.application(urls, globals())`
注意 ^^^ 部分。

另外，如果您对 python micro-web-frameworks 我推荐[bottle.py 感兴趣](http://bottlepy.org/docs/dev/)，它不需要安装它只是一个名为的 python 文件`bottle.py`

**更新**
我设法使用python3重新创建问题，所以`jdi`是对的，这里的问题是python3不向后兼容python2，一些python2投诉应用程序无法在python3下正确运行，反之亦然。

在这种情况下，python3 似乎不支持包内的相对导入，确实发现这个[http://www.python.org/dev/peps/pep-0328/](http://www.python.org/dev/peps/pep-0328/)很有趣。

从鼓舞士气中发挥：

> 对于第二个问题，建议默认情况下所有导入语句都是绝对的（仅搜索 sys.path），并使用特殊语法（前导点）来访问包相对导入。

所以`lpthw.web`尝试导入相关包，但它根本不能。这就是我们得到的原因，`ImportError: No module named utils`因为 utils 是包中的相对模块。
即使它可以加载它，它也会遇到其他非向后兼容性问题，只是试图`import utils`在我们得到的包中

```
>>> import utils 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "utils.py", line 75
    except KeyError, k:
               ^
SyntaxError: invalid syntax 
```

这与这个 pep [http://www.python.org/dev/peps/pep-3110/](http://www.python.org/dev/peps/pep-3110/)`except`相关，它说明了语句的不同语法。

正如您所看到的，尝试将这个包迁移到 python3 将是一个主要障碍，所以最好把它留给开发人员，这适用于那里的许多包，为什么 python3 与 python2 如此不同，主要是因为他们想尽可能地修补语言......

暂时坚持python2，最终大部分包都会迁移到python3。

# ruby - 如何在 vagrant 和 puppet 之间共享主机文件

> ID：11910348
> 
> 赞同：1
> 
> 时间：2012-08-10T23:07:45.357
> 
> 标签：ruby, virtualbox, puppet, vagrant

我目前正在将大量 EC2 实例转换为一系列 puppet 脚本，然后使用 Vagrant 虚拟化设备以进行本地开发。

我一直坚持在 vagrant 中管理网络并将其映射到生产中。

首先我有这样的事情：

```
# Main Web Server
config.vm.define :app do |app_config|
    app_config.vm.host_name = "web1"
    app_config.vm.network :hostonly, "10.0.0.2"
    app_config.vm.box = "precise64"

    ...etc
        puppet.manifest_file = "persist/web.pp"
end 

# First DB server
config.vm.define :db1 do |db1_config|
    db1_config.vm.host_name = "db1"
    db1_config.vm.network :hostonly, "10.0.0.3"
    db1_config.vm.box = "precise64"
    ...etc
        puppet.manifest_file = "persist/db.pp"
end

etc. 
```

然后在这种情况下，web.pp 和 db.pp 相当简单，它们只是设置了 python、uwsgi、nginx、mysql 等。

所以问题：我需要在里面例如`puppet/modules/hosts/files/hosts`必须指定如下内容：

```
10.0.0.3    db1.X.com
10.0.0.4    db2.X.com
etc. 
```

在生产中，我们结合使用我们的站点 DNS 和 ec2 实例 DNS 记录（我无法将其放入主机）。通常，我们的 haproxy 主机具有公共 DNS 记录，并且它们在其配置中保存 EC2 名称（这使得无法使用主机文件）。

那么如何构建一个 puppet 和 vagrant 都可以导入和使用全局映射的文件，例如：

```
hosts = {
         web => 10.0.0.2,
         db1 => 10.0.0.3,
         db2 => 10.0.0.4,
} 
```

例如，我可以从 puppet 模板中`haproxy.cfg`访问，也可以从 Vagrant 文件中访问，因此我也可以`vm.network`对其进行设置。

限制：

*   不能只是 IP，必须是 IP 或 DNS 的符号名称
*   不能使用 puppet master（不幸的是，这个不灵活）。
*   虚拟化 DNS 服务器也似乎很混乱，所以 id 而不是。

另外，我对 ruby**​​ 真的很**陌生，如果您提供示例（这将是很棒的），请对其进行足够的描述，以便我能够通过 ruby​​ 文档找到自己的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:56:01.790

2 个选项：

1）您可以让 vagrant 读取您从文件中显示的哈希（放置在它的目录、数据库等），然后使用该内容生成 Vagrantfile。Vagrant 的配置只是运行一些 ruby​​ 代码（我认为）如果没有

2) 让 shell 脚本生成 Vagrantfile 和/或 puppet 配置/静态文件。

实现细节是微不足道的。

# c# - 使用实体框架作为 ORM 的项目可以在 windows server 2003 上运行吗？

> ID：11910351
> 
> 赞同：0
> 
> 时间：2012-08-10T23:08:10.580
> 
> 标签：c#, entity-framework, entity-framework-4

我正在开发一个 Web 应用程序项目，我正在使用实体框架从现有数据库生成模型。我已经在我的测试环境中部署了项目，即 windows 2003。我确信我的模型的连接字符串是正确的，但我看不到项目正在与数据库通信（在事件查看器中检查）。是不是因为实体框架只兼容windows server 2008，不兼容windows server 2003？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:16:42.263

您可以在 Windows Server 2003 上运行它。

Entity Framework 最多面向 .NET Framework 4.0，它在 Windows Server 2003 上[可用。](http://msdn.microsoft.com/en-us/library/8z6watww.aspx)

我建议检查

*   连接字符串确实正确 - 在实体框架之外执行，例如，如果您要连接到 SQL Server，请尝试直接使用[SqlConnection](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)打开连接。
*   检查防火墙设置和其他权限。

# c - 检查单个链接列表中的回文

> ID：11910352
> 
> 赞同：0
> 
> 时间：2012-08-10T23:08:14.490
> 
> 标签：c, list, data-structures, hyperlink

> **可能重复：**
> [单链表是否为回文](https://stackoverflow.com/questions/7966068/single-linked-list-is-palindrome-or-not)

假设我有一个包含 char 项的链接列表，我需要查找该链接列表中的字符是否为回文。我知道链接列表根本不是一个合适的结构，但是如果我们有一个怎么办？

例如`a-b-c-b-a`

双向链表很简单，我们可以从头尾开始

```
ptrh=head ptrt=tail
if(ptrh->item==ptrt->item) 
```

和

```
ptrh->ptrh->frwdlink
ptrt->ptrt->bcklink 
```

但是如果我们有一个单链表呢？那怎么实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:11:36.987

知道列表的大小，您就可以知道中间是什么。然后，当您浏览时，您只需将所有字符缓存到中间，并确保它们在中间之后以相反的顺序出现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T23:16:35.800

你可以创建临时数组吗？将链表中的所有项放入一个数组中，然后将索引 n 与索引 (length - n) 进行比较。

```
var ptr = head; var array = [];

while (ptr != null)
{
  array.push(ptr.item);
  ptr = ptr.next;
}

for (var i = 0; i < array.length / 2; i++)
{
  if (array[i] != array[array.length - i])
    return (false);
}

return (true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T23:15:04.140

您可以在第一次浏览列表时构建一个节点顺序相反的列表。

然后比较原始列表和倒排列表的前 n/2+1 个节点

# r - 如何在 levelplot 中将 x 轴标签旋转 90 度

> ID：11910353
> 
> 赞同：14
> 
> 时间：2012-08-10T23:08:24.663
> 
> 标签：r, levelplot

我正在尝试可视化相关图，并且我认为我已经让它工作了，除了 x 轴标签的混乱。关于如何旋转它们的任何建议？许多 Base R 图的某些参数似乎不适用于水平图。可能我不知道我在说什么。

这是我使用的数据：

```
cor2<-structure(c(1, -0.0389681095266643, -0.0389681095266643, 0.178476154216706, 
-0.178476154216706, -0.168494117498168, -0.0531355593389041, 
-0.0627159607856109, -0.11922152176561, 0.00887070126495505, 
-0.0721998017906867, -0.140654273521441, 0.0257953297166468, 
-0.0504004052031319, -0.057270788080051, -0.0918121581058645, 
-0.0389681095266643, 1, 1, -0.207885482210833, 0.207885482210833, 
0.221906241587463, 0.285338260198777, 0.370743678038144, 0.219208701879567, 
0.266580102221828, 0.193378655575033, 0.23922965323291, 0.164352387360997, 
0.229607796224011, 0.184412911672718, -0.250294366329347, -0.0389681095266643, 
1, 1, -0.207885482210833, 0.207885482210833, 0.221906241587463, 
0.285338260198777, 0.370743678038144, 0.219208701879567, 0.266580102221828, 
0.193378655575033, 0.23922965323291, 0.164352387360997, 0.229607796224011, 
0.184412911672718, -0.250294366329347, 0.178476154216706, -0.207885482210833, 
-0.207885482210833, 1, -1, -0.836264694082863, 0.0968492347163521, 
-0.529206721168992, -0.368511719318385, -0.370488391611307, -0.446552321746797, 
-0.0946404317035884, -0.166601542941319, -0.371982811624152, 
-0.0551151773556682, -0.0252777576827408, -0.178476154216706, 
0.207885482210833, 0.207885482210833, -1, 1, 0.836264694082863, 
-0.0968492347163521, 0.529206721168992, 0.368511719318385, 0.370488391611307, 
0.446552321746797, 0.0946404317035884, 0.166601542941319, 0.371982811624152, 
0.0551151773556682, 0.0252777576827408, -0.168494117498168, 0.221906241587463, 
0.221906241587463, -0.836264694082863, 0.836264694082863, 1, 
-0.0484257163697656, 0.493261440648374, 0.421352971692481, 0.335283617372406, 
0.42535494057661, 0.0277745485055271, 0.0990554932499753, 0.268268745412774, 
0.106129159123147, 0.0645326205432567, -0.0531355593389041, 0.285338260198777, 
0.285338260198777, 0.0968492347163521, -0.0968492347163521, -0.0484257163697656, 
1, -0.525318257575221, -0.160726744335619, -0.530266513726872, 
-0.523896249354085, 0.0821688285842216, 0.120061871987285, -0.0462809753885581, 
0.0894673511307366, -0.157709074647179, -0.0627159607856109, 
0.370743678038144, 0.370743678038144, -0.529206721168992, 0.529206721168992, 
0.493261440648374, -0.525318257575221, 1, 0.450831181390043, 
0.894070902852474, 0.937461049803717, 0.120717838386174, 0.0922093724569894, 
0.421886104540215, 0.0686035045695465, -0.0259181463830899, -0.11922152176561, 
0.219208701879567, 0.219208701879567, -0.368511719318385, 0.368511719318385, 
0.421352971692481, -0.160726744335619, 0.450831181390043, 1, 
0.194931612275736, 0.475810998910999, 0.0674296214446775, 0.0665009602984884, 
0.181289860729344, -0.0399243218645222, -0.0918283721705961, 
0.00887070126495505, 0.266580102221828, 0.266580102221828, -0.370488391611307, 
0.370488391611307, 0.335283617372406, -0.530266513726872, 0.894070902852474, 
0.194931612275736, 1, 0.955425650934062, 0.0881868869011078, 
0.139156258136006, 0.310078412850343, 0.137566770975812, -0.0893525009590147, 
-0.0721998017906867, 0.193378655575033, 0.193378655575033, -0.446552321746797, 
0.446552321746797, 0.42535494057661, -0.523896249354085, 0.937461049803717, 
0.475810998910999, 0.955425650934062, 1, 0.0988326951129949, 
0.147058790355866, 0.336760945050752, 0.110616903520016, -0.107521647802021, 
-0.140654273521441, 0.23922965323291, 0.23922965323291, -0.0946404317035884, 
0.0946404317035884, 0.0277745485055271, 0.0821688285842216, 0.120717838386174, 
0.0674296214446775, 0.0881868869011078, 0.0988326951129949, 1, 
0.746502805562635, 0.144029358291222, 0.496146773442592, -0.464865772986093, 
0.0257953297166468, 0.164352387360997, 0.164352387360997, -0.166601542941319, 
0.166601542941319, 0.0990554932499753, 0.120061871987285, 0.0922093724569894, 
0.0665009602984884, 0.139156258136006, 0.147058790355866, 0.746502805562635, 
1, 0.068339761274059, 0.546006730280353, -0.392180163611345, 
-0.0504004052031319, 0.229607796224011, 0.229607796224011, -0.371982811624152, 
0.371982811624152, 0.268268745412774, -0.0462809753885581, 0.421886104540215, 
0.181289860729344, 0.310078412850343, 0.336760945050752, 0.144029358291222, 
0.068339761274059, 1, -0.118872875719514, 0.0250634712618911, 
-0.057270788080051, 0.184412911672718, 0.184412911672718, -0.0551151773556682, 
0.0551151773556682, 0.106129159123147, 0.0894673511307366, 0.0686035045695465, 
-0.0399243218645222, 0.137566770975812, 0.110616903520016, 0.496146773442592, 
0.546006730280353, -0.118872875719514, 1, -0.0649756207052158, 
-0.0918121581058645, -0.250294366329347, -0.250294366329347, 
-0.0252777576827408, 0.0252777576827408, 0.0645326205432567, 
-0.157709074647179, -0.0259181463830899, -0.0918283721705961, 
-0.0893525009590147, -0.107521647802021, -0.464865772986093, 
-0.392180163611345, 0.0250634712618911, -0.0649756207052158, 
1), .Dim = c(16L, 16L), .Dimnames = list(c("ID", "QnWeight_initial", 
"QnWeight_initial_mg", "Days_till_1st_Wrkr", "Days_before_max_Wrkr_Eclosion", 
"Wrkr_Eclosion_Bin", "QnMass_At_Wrkr_Eclosion", "ColonyMass_At_Wrkr_Eclosion", 
"Adult_Wrkrs_At_Wrkr_Eclosion", "Mature_Brood_At_Wrkr_Eclosion", 
"Sum_wrkrsPlusBrood_At_Wrkr_Eclosion", "QnMass_2wksLater", "QnMass_4wksLater", 
"ColonyMass_4wksLater", "QnMass_2mnthsLater", "ColonyMass_2mnthsLater"
), c("ID", "QnWeight_initial", "QnWeight_initial_mg", "Days_till_1st_Wrkr", 
"Days_before_max_Wrkr_Eclosion", "Wrkr_Eclosion_Bin", "QnMass_At_Wrkr_Eclosion", 
"ColonyMass_At_Wrkr_Eclosion", "Adult_Wrkrs_At_Wrkr_Eclosion", 
"Mature_Brood_At_Wrkr_Eclosion", "Sum_wrkrsPlusBrood_At_Wrkr_Eclosion", 
"QnMass_2wksLater", "QnMass_4wksLater", "ColonyMass_4wksLater", 
"QnMass_2mnthsLater", "ColonyMass_2mnthsLater"))) 
```

我的代码：

```
rgb.palette <- colorRampPalette(c("blue", "yellow"), space = "rgb")
levelplot(cor2, aspect="iso", main="Correlation Matrix", xlab="", xaxt='n', ylab="", col.regions=rgb.palette(120), cuts=100, at=seq(0,1,0.01)) #, names.arg=paste(cor2[,1]),las=3

#this is what I tried, and it didn't work. I couldn't get names(cor2) to work, but I guess that this is a separate question.
labs<- (cor2[,0])
text(cex=1, x=x-0.25, y=-1.5, labs, xpd=TRUE, srt=90)

##want something like this, but can't find an analogous way to remove axisnames and add text
#x <- barplot(table(mtcars$cyl),axisnames=FALSE)#,xaxt="n" 
#labs <- paste(names(table(mtcars$cyl)), "cylinders")
#text(cex=1, x=x-0.25, y=-1.5, labs, xpd=TRUE, srt=90) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-11T09:29:45.713

就 x 轴标签的旋转而言，您必须使用参数`scales`（`?xyplot`有关参数的更多信息，请参阅`lattice`）。您只想修改其`x`组件：`scales=list(x=list(rot=90))`. 在上下文中：

```
levelplot(cor2,
          aspect="iso", scales=list(x=list(rot=90)),
          main="Correlation Matrix", col.regions=rgb.palette(120),
          cuts=100, at=seq(0,1,0.01)) 
```

# java - Tomcat servlet 中的 ThreadLocal

> ID：11910359
> 
> 赞同：5
> 
> 时间：2012-08-10T23:08:45.603
> 
> 标签：java, session, tomcat, thread-local-storage

我遇到了一个问题，即我的生产系统中出现异常，但我真的没有关于谁导致它们的好信息。该人的用户名作为变量存储在他们的 tomcat 会话中，显然我可以在我的`doPost`or`doGet`方法中访问它，但除非我将该信息作为参数传递给我的每个业务对象，否则我无权访问会话. 出于显而易见的原因，我想将用户名添加到日志消息中，这样我就知道发生了什么。

所以我的解决方案是做这样的事情

```
public class ExceptionUtil {
    private ExceptionUtil() { } // no instantiation
    private static final ThreadLocal<String> local = new ThreadLocal<String>();
    public static void set(String user) { local.set(user); }
    public static String get() { return local.get(); }
} 
```

然后在我的帖子/获取中，我可以做到这一点

```
String username = request.getSession().getAttribute("username");
ExceptionUtil.set(username); 
```

然后在我的例外情况下，我可能会这样做（人为的，不好的做法示例）

```
catch(SQLException e) {
    logger.error(ExceptionUtil.get() + " did something dumb in sql", e);
    throw e;
} 
```

我关心的唯一问题是 Tomcat 将如何管理我的线程。如果他们保留线程怎么办？他们会坚持吗？ThreadLocal 值是否也会持续存在？如果我将整个 Session 存储在 ThreadLocal 中而不仅仅是一个字符串，那将是一个严重的内存泄漏可能性。这也意味着如果有人忘记重新设置（或忘记在完成后清除）用户名/会话在一个持续存在多个请求的线程上，那里可能有陈旧的数据。

称我为愤世嫉俗者，但我不想依赖程序员（甚至，尤其是我自己！）不要忘记为程序的正确性做事。如果我可以对我的代码进行白痴验证，我愿意。这意味着更好地了解 Tomcat 将如何使用线程。

因此，单句形式的问题：

> 如果我在 Tomcat (7.0.27) 上运行的 web 应用程序中使用 ThreadLocal，我是否会冒 Thread 被用于多个请求的风险，并且来自先前请求的数据被持久化？

我应该指出，即使他们没有回答“Tomcat/ThreadLocal 恶作剧”的确切问题，我也愿意接受其他解决方案，这些解决方案允许我优雅地访问会话变量以进行日志记录。我也愿意就我的解决方案的潜在缺陷发表评论。我有一个业务问题要解决，而且我不接受任何一种解决方案。我只想知道是谁一直在我的产品系统上造成异常:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:37:33.880

是的，tomcat 使用 ThreadPool 概念，这意味着线程正在被重用，因此正如您所建议的“您的线程本地保留值”，

我建议的替代方案可能是

1.  **完成后清理线程，在视图控制器的某个地方**

2.  **编写一个请求过滤器并在过滤器开始时清理所有内容并推送新值，并将其分配给您服务器上的每个 url 模式**。

对于您所遵循的方法，而不是将某些值保存在类中，将请求存储在 Thread Local 中，然后使用该请求使用自制的 util 类从会话中提取值，该类接受请求，然后返回您想要的值，这样您在线程中保存会话并获取值，但请确保您每次都添加新鲜并在完成后清理请求（为此使用第二个选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T09:48:45.583

您不需要重新发明轮子，日志系统会为您完成。

如果**logback/log4j**是您的记录器实现，那么 Mapped Diagnostic Context( **MDC** ) 绝对是您的答案。MDC 在逻辑上类似于 ThreadLocal，但它更好：

1.  MDC 透明地处理线程安全和同步

2.  子线程自动继承其父线程的映射诊断上下文的副本。所以即使你使用多线程来处理请求，它仍然可以。

因此，像这样在 servlet 过滤器中设置 MDC，以实现您的目标：

```
 public void doFilter(ServletRequest request, ServletResponse response,
    FilterChain chain) throws IOException, ServletException {

    boolean successfulRegistration = false;

    HttpServletRequest req = (HttpServletRequest) request;    
    Principal principal = req.getUserPrincipal();
    // Please note that we could have also used a cookie to 
    // retrieve the user name

    if (principal != null) {
      String username = principal.getName();
      successfulRegistration = registerUsername(username);
    } 

    try {
      chain.doFilter(request, response);
    } finally {
      if (successfulRegistration) {
        MDC.remove(USER_KEY);
      }
    }
  }

  private boolean registerUsername(String username) {
    if (username != null && username.trim().length() > 0) {
      MDC.put(USER_KEY, username);
      return true;
    }
    return false;
  } 
```

然后在您的日志配置中，在您的模式布局中添加 %X{USER_KEY} 以使用您在 MDC 中设置的值。

在**logback**中，有开箱即用的过滤器**MDCInsertingServletFilter**可以记录更多信息，例如 remoteHost/requestUrl 等，对于记录非常有用的信息。

[查看 MDC http://logback.qos.ch/manual/mdc.html](http://logback.qos.ch/manual/mdc.html)上的 logback 文档

# java - 为什么这会产生 StackOverflowError

> ID：11910361
> 
> 赞同：0
> 
> 时间：2012-08-10T23:08:51.227
> 
> 标签：java, recursion, tree, stack-overflow

我是树的初学者，我只是第一次尝试实现一个并正在生成stackoverfloweror。我知道它可能与错误的递归调用有关，但是我没有看到递归有任何问题，我可以得到一点帮助吗？错误在此代码中。

```
public void insert(Node node, String value)
{
    if((value.compareTo(node.getValue())) < 0)
    {
        if (node.left != null) 
        {
            insert(node.left, value);
        }
        else
            node.left = new Node(value);

    }
    else if((value.compareTo(node.getValue())) > 0)
    {
        if(node.right !=null)
        {
            insert(node.right, value);
        }
        else
            node.right= new Node(value);
    }
} 
```

我在这里调用该方法

```
public static void main(String[] args) throws FileNotFoundException, IOException {
    Tree dataTree = new  Tree(new Node("m"));

    File file = new File("C:\\randomdata.csv");

    BufferedReader br = new BufferedReader(new FileReader(file));
    String line;

    while((line = br.readLine()) != null){
        if(line.toString().contains("zogeti"))
            break;
        else
        {
            dataTree.insert(dataTree.getRootElement(),line);
        }
    }

    br.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:21:22.353

如果文件最初是排序的，那么这个函数看起来会为一个有 N 行的文件递归 N 次。Java 没有实现尾递归，所以这肯定是一个真正的递归。将其重写为 while 循环而不是递归函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:15:50.497

`node.left == node`如果您的树中或`node.right == node`其他更长的周期，这很可能会发生。

在其当前形式中，如果值相等，则不会触发 if 块，并且只会返回（并返回跟踪，以及）不添加任何内容。这意味着循环可能发生在此方法之外。

您可能会在唯一可能在插入网络之外创建元素的其他地方发现此错误：Tree 类的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T23:18:41.707

这个 CSV 文件有多大？文件越大，递归越深，导致stackoverflow。

尝试使用以下命令行参数执行 java。

```
-Xms512m -Xmx512m 
```

另外，如果从文件中读取的新行与现有节点值相同怎么办？

以下代码将忽略...（可能是一个要求，我只是说）。

```
if((value.compareTo(node.getValue())) < 0)
{
    if (node.left != null) 
    {
        insert(node.left, value);
    }
    else
        node.left = new Node(value);

}
else if((value.compareTo(node.getValue())) > 0)
{
    if(node.right !=null)
    {
        insert(node.right, value);
    }
    else
        node.right= new Node(value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T23:50:41.950

如果您的文件长度为 3260953 行并且已排序，那肯定可以解释您的问题。如果元素是按升序排列的，那么每次`insert`插入一个新元素，每次都会被放置在每个节点的右分支上。您最终得到的是一串 3260953 个线性链接节点，您的代码通过尽可能多的递归调用访问这些节点。这将溢出堆栈。尝试在一个小得多的文件上运行，并按字母顺序排列。

*红黑*树通过重新分配元素自动平衡树来避免这个问题。然而，编写这样一个数据结构并不是那么简单。

# android - GLES iOS、Android RenderBuffer 同步还是异步？

> ID：11910363
> 
> 赞同：1
> 
> 时间：2012-08-10T23:09:15.360
> 
> 标签：android, ios, opengl-es, asynchronous, opengl-es-2.0

GLES 2.0 调用在 Android 和 iOS 上是同步的还是异步的？它什么时候会阻塞 CPU 并等待 GPU 完成发送的命令？我相信 glReadPixels 和 glGetTexImage 肯定会阻塞线程并等待所有 gl 命令完成。

经过一些测试后，我觉得多线程应用程序即使在单核设备上也可能获得性能，因为 GL 调用是同步的并且 GPU 会阻塞 CPU。

在 iOS 和 Android 上是否有任何参考 gl* 调用是否同步。我知道一般来说它不是同步的。

拥有 2 个线程是否有意义：一个线程进行 GL 调用，另一个线程运行物理以在 GL 阻塞主线程时为 CPU 提供一些工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:17:00.943

大多数 OpenGL 命令不会阻止程序的执行。任何设置状态或发出绘图调用的操作都只是将命令放入 GPU 推送缓冲区并立即返回。在发出下一个命令之前，您不必等待命令到达 GPU 或模型完成绘制。

例外是任何从 GPU 请求状态的东西，例如`glGet.../glRead...`操作。这需要 GPU 刷新它的指令队列，以便它可以向您返回正确的值。这些可能会导致长时间的停顿，因此建议根据需要谨慎使用。

> 拥有 2 个线程是否有意义：一个线程进行 GL 调用，另一个线程运行物理以在 GL 阻塞主线程时为 CPU 提供一些工作？

那要看。通常，如果您正在等待 GPU，那是因为您需要立即获得一些值才能继续进行计算。如果您可以在后台执行不依赖于此的工作，则将其卸载到另一个线程是有意义的。

# redirect - 临时重定向

> ID：11910365
> 
> 赞同：0
> 
> 时间：2012-08-10T23:09:37.227
> 
> 标签：redirect, redirecttoaction

我有一个 MVC 站点，我想将那里的所有流量临时重定向到另一个 MVC 站点。如果不使用不允许我连接到远程 IIS 服务器的 IIS 管理器，我该如何做到这一点。我有一个继承自 .Net 控制器的抽象类。我在应用程序中的所有控制器都继承自抽象类。因此，我想只在抽象类中执行此操作，这样我就不必在具体的控制器类中到处编写重定向逻辑。如何才能做到这一点？还有其他纯 MVC 方式的建议吗？我不是在寻找 meta http-equiv="location" content="xxx" 解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:23:47.347

问题解决了。我在 Global.asax 中使用了 Application_Start()

```
protected void Application_Start(object sender, EventArgs args)
{
//HttpContext.Current.Response.Redirect("http://otherSite/appName");
} 
```

# vba - 在vba中设置文件名的路径

> ID：11910371
> 
> 赞同：0
> 
> 时间：2012-08-10T23:10:12.370
> 
> 标签：vba, ms-access-2007

希望这是有道理的，并且有人可以指出我正确的方向。我正在 Access 2007 中构建一个项目

我有一个带有文本字段 PhotoName 的表格 tblEmployees，一个带有 Listbox List0 的表格 Form2 和空的图像框 Image1 和 Image2

字段 PhotoName 存储照片的名称，即 122000_998.jpg，没有完整路径，例如 C:\Photos\122000_998.jpg

List0 有 4 列数据，其中 Column(4) 是照片文件名的位置，即 122000_998.jpg

Form2 打开时，我需要自动从几行中选择一张照片

我可以使用以下命令从任何行检索照片以显示在 Image1 和 Image2 中，但前提是我将 tblEmployees PhotoNamI 中的文件名从 122000_998.jpg 更改为 C:\Photos\122000_998.jpg 或者如果我更改 Me.Image1.Picture = Me.List0.Column(4) 到 Me.Image1.Picture = "C:\VisitorImage\" & Me.List0.Column(4)

Me.List0.Selected(0) =真

Me.Image1.Picture = Me.List0.Column(4)

Me.List0.Selected(1) =真

Me.Image2.Picture = Me.List0.Column(4)

当上面在表单打开事件过程中运行时，如何添加上面的路径以查找照片，而不添加 tblEmployees PhotoName 的路径或将其添加到每一行代码。我问，因为路径可能会改变，简单地改变路径值而不是遍历每一行会更容易，因为可能有 20 多张照片

感谢所有帮助，谢谢

杰德斯基3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:23:31.913

怎么样？

```
dim pathprefix as String
pathprefix = "C:\Photos\"
Me.List0.Selected(0) =True
Me.Image1.Picture = pathprefix + Me.List0.Column(4)
Me.List0.Selected(1) =True
Me.Image2.Picture = pathprefix + Me.List0.Column(4) 
```

# mysql - 以正确的方式使用主键（处理语言环境）

> ID：11910376
> 
> 赞同：1
> 
> 时间：2012-08-10T23:10:33.430
> 
> 标签：mysql

我有一个名为的表`countries`，其结构为：ID、LOCALES_ID、NAME

我想用这个表处理多个语言环境，所以我需要对于不同的 LOCALES_ID，ID 是相同的。所以，如果我插入：

```
INSERT INTO countries (locales_id, name)
VALUES
('1', 'Lorem'),
('2', 'Ipsum'); 
```

我想要在数据库上的最终结果是：

```
ID | LOCALES_ID | NAME
1  | 1          | Lorem
1  | 2          | Ipsum 
```

但是通过我尝试的 INSERT，我得到了下一个结果：

```
ID | LOCALES_ID | NAME
1  | 1          | Real insert
2  | 2          | Real insert #2 
```

我的`countries`表在列 ID 和 LOCALES_ID 上有一个 PRIMAY 索引，我认为这就是我在插入不同的语言环境时需要的全部，我得到了相同的 ID。

我该如何解决这个问题？

先感谢您，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:26:51.570

您在这里尝试实现的是一对多关系，即每个国家/地区可以有多个区域设置。这无法通过单个表格实现，因为您会发现同一个国家/地区出现多​​次。您应该做的是将数据拆分为两个表。您可以在下面找到一个示例。

**国家表的结构**
- ID int、自动增量、主键
- 名称 varchar

**Locales 表的结构**
- CountryID int，主键
- LocaleID int，主键
- Name varchar

处理 INSERT - 要在国家表中插入，只需填充名称字段（或您可能需要的任何其他字段）：

```
INSERT INTO Countries
  (Name)
VALUES
  ('Ireland') 
```

ID 字段将自动填充。对于这个例子，我们可以想象“Ireland”的 ID = 1。
- 要插入 Locales，您将传递三个值，即 CountryID、LocaleID 和 Name。

```
INSERT INTO Locales
  (CountryID, LocaleID, Name)
VALUES
  (1, 1, 'Lorem') 
```

此查询将为 ID = 1 的国家（即爱尔兰）和“Lorem”插入 LocaleID 作为名称。要插入“Ipsum”，您将执行相同的操作：

```
INSERT INTO Locales
  (CountryID, LocaleID, Name)
VALUES
  (1, 2, 'Ipsum') 
```

其中 LocaleID 将为 2，对于 ID = 1 且名称为“Ipsum”的国家/地区。

**如何检索数据**
由于现在数据被拆分为两个表，因此您必须使用 Join 将其放在一起。这很简单：

```
SELECT
  C.ID AS CountryID
  ,L.Name AS CountryName
  ,L.LocaleID
FROM
  Countries C
  LEFT JOIN
  Locales L ON
    (L.CountryID = C.CountryID) AND
    (L.LocaleID = :InputLocaleID) 
```

就是这样。现在，您的查询将在正确的语言环境中返回带有名称的国家（如果存在）。如果不是，CountryName 和 LocaleID 将为 NULL。

**更新 2012/08/11 - 如何使用单表（不推荐）**

如果您希望对国家/地区使用单个表，则必须手动处理国家/地区 ID。也就是说，您将按如下方式执行 INSERT：

```
INSERT INTO Countries
  (ID, LocaleID, Name)
VALUES
  (:CountryID, :LocaleID, :Name) 
```

然而，这会给你留下一个问题。假设该表包含未指定数量的国家，您必须添加一个新的。你会给这个新国家什么ID？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:26:19.177

也许像

```
Locales
(LocalID, LocaleName) Use the standard id e.g. en-GB
Primary Key (LocaleID) 
```

国家（可能需要为比利时（瓦隆和佛兰芒）等国家/地区开展这项工作

```
(CountryID,CountryLocaleID)
Primary Key (CountryID)
ForeignKey CountryLocaleID -> Locales(LoacleID) 
```

（添加任何其他国家/地区特定信息，但不添加名称！

```
CountryTranslations
(CountryID, LocaleID,InternationalisationID) 
Primary Key(CountryID,LocaleID) 
Unique Key(InternationalisatiosnID)
Foreign Key CountryID -> Countries.CountryID
Foreign Key LocaleID -> Locales.LocaleID
Foreign Key InternationalisationID -> Internationalisations.InternationalisationID 
```

（这是您在国家/地区之间的链接及其在各种语言环境中的名称

```
Internationalisations
(InternationalsationID, Translation)
PK (InternationalisationID) 
```

（你所有的翻译。）

# python - UnicodeEncodeError -- utf8 和 unicode() 不起作用

> ID：11910381
> 
> 赞同：0
> 
> 时间：2012-08-10T23:10:55.887
> 
> 标签：python, unicode, utf-8

我有一个大纲如下：

```
synopsis = 'Eine Geschichte, wie im normalen Leben... Der als äußerst vorsichtig 
            geltende Risikoanalytiker Ruben verlässt seine Frau,...' 
```

我正在尝试将其写入文件，但不断遇到：

> UnicodeEncodeError：“ascii”编解码器无法在位置 705 编码字符 u'\xe4'：序数不在范围内（128）

这是我尝试过的：

```
synopsis = unicode(synopsis)
new_file.write('%s' % synopsis)

synopsis = synopsis.encode('utf-8')
new_file.write('%s' % synopsis) 
```

另外，我已经`# # -*- coding: utf-8 -*-`在我的文件顶部指定了。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:21:05.063

你怎么开`new_file`？

```
import codecs
new_file = codecs.open('out', mode='w', encoding='utf-8') 
```

这应该允许您将 Unicode 字符串写入文件，该文件将被编码为 UTF-8。

（除非另有设置，`sys.getdefaultencoding()`is`'ascii'`会影响新打开文件的编码。）

# iphone - iOS 中的委托

> ID：11910389
> 
> 赞同：1
> 
> 时间：2012-08-10T23:11:43.667
> 
> 标签：iphone, objective-c, ios, delegates

我有 2 个 ViewController，在第一个 - TableView 和第二个 - 带有标签的按钮中。当我单击第二个 ViewController 中的按钮时，我需要返回 TableView 并设置

```
cell.detailTextLabel.text 
```

按钮上标签的文本。

这是我的代码，但它不起作用：

视图控制器.h：

```
#import <UIKit/UIKit.h>
#import "TestControl.h"

@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, myTestProtocol>
{
    TestControl *myProtocol;
}
@property (strong, nonatomic) IBOutlet UITableView * tableTest;

@end 
```

视图控制器.m：

```
#import "ViewController.h"
#import "TestControl.h"

@implementation ViewController

@synthesize tableTest;

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationController.navigationBarHidden = YES;

    myProtocol = [[TestControl alloc]init];
    myProtocol.delegate = self;

        // Do any additional setup after loading the view, typically from a nib.
}

- (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 3;
}

- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    TestControl * test = [[TestControl alloc] initWithNibName:@"TestControl" bundle:nil];
    [self.navigationController pushViewController:test animated:YES];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    switch (indexPath.row) {
        case 0:
            cell.textLabel.text = @"Firs Cell";
            cell.detailTextLabel.text = myProtocol.myLabel.text;
            break;
        case 1:
            cell.textLabel.text = @"Second Cell";
            break;
        case 2:
            cell.textLabel.text = @"Third Cell";
            break;

        default:
            break;
    }

    return cell;
}
@end 
```

测试控制.h：

```
#import <UIKit/UIKit.h>

@protocol myTestProtocol <NSObject>

@end

@interface TestControl : UIViewController
{
    UILabel *myLabel;
}

@property (nonatomic, assign) id <myTestProtocol> delegate;
@property (strong, nonatomic) IBOutlet UILabel *myLabel;

- (IBAction)testButton:(id)sender;
@end 
```

测试控制.m：

```
@implementation TestControl

@synthesize myLabel;
@synthesize delegate;

- (IBAction)testButton:(id)sender
{
    myLabel.text = @"TEXT LABEL";
    [self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:0] animated:YES];

} 
```

这有什么问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:41:04.957

有几件事......

您正在创建两个不同`TestControl`的对象，为其中一个设置委托并推动另一个，因此处理按钮点击的对象没有委托。

反过来，委托逻辑会更好地工作。也就是说，`TestControl`应该有与其委托进行通信的代码，而不是委托从`TestControl`.

# jquery - 创建 jquery 对象变量

> ID：11910392
> 
> 赞同：0
> 
> 时间：2012-08-10T23:12:34.967
> 
> 标签：jquery

我想复制 jquery 对象选择，例如

当我选择多个对象时

```
var test = $(".someclass"); 
```

我得到具有该类的所有选定对象的对象。

现在我怎么能在那场战争中继续添加对象，比如`test.push($(".somediv"));`

我也看到了，但是 当我尝试将对象添加到空变量时`.add( jQuery object )`它给了我错误`Cannot call method 'add' of null`

另外，我如何创建没有值的 jquery 变量，然后再添加它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T23:16:13.527

您可以使用`$()`创建一个空的 jQuery 对象，然后您可以使用`.add()`通过选择器向其中添加更多项目：

```
var items = $().add(".someClass");
items = items.add(".someDiv"); 
```

使用时`.add()`，请记住它返回一个新的 jQuery 对象，其中添加了新元素。它不会修改原始 jQuery 对象。很容易忘记这一点并执行以下操作：

```
items.add(".someDiv"); 
```

并想知道为什么没有添加任何内容`items`（这让我咬了好几次）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:19:33.663

**jfriend00**解决方案是您在现代版本的 jQuery 中使用的解决方案。我也经常使用这个：

```
var classes = ['foo', 'bar', 'bla', 'asd'];
var $els = $('.'+ classes.join('.,')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T23:21:42.820

你可以这样做

```
var objects = $().add(".className").add(".divName"); 
```

# javascript - 茉莉花和元素的位置

> ID：11910393
> 
> 赞同：1
> 
> 时间：2012-08-10T23:12:49.507
> 
> 标签：javascript, jquery, jasmine

我想测试当元素通过窗口中间时是否发生了什么。我只是似乎不明白。这是我的源文件：

```
 checkIfWorkInMiddle: function(element) {
        var middelOfScreen = this.getMiddleOfScreen();
        var posAboveBottom = this.getPosAboveBottom(element);
        if (posBottomAboveBottom > middelOfScreen) {
            return true;
        } 
```

元素的位置取决于滚动位置。当我进行测试时，元素始终位于屏幕中间下方。我怎样才能在我的测试中改变它？我的规范文件如下：

```
describe("Get Middle of screen" , function() {
it('returns true if above the middle of screen' , function() {
    var fakeElement = Object.create( blocks );
    var x = fakeElement.checkIfWorkInMiddle(element);

    expect(x).toBeTruthy();
}); 
```

});

所以这在测试中总是返回 false 。我可以在测试中做些什么来强制 posBottomAboveBottom 成为不同的值。那么实际上是伪造滚动事件吗？我希望我的问题很清楚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:51:01.470

你可以尝试使用

```
 window.scrollTo(x,y); 
```

然后传入中间值或中间值，如 y = 500。这将定位窗口，以便 Jasmine 可以运行测试。

```
it("check is .... ", function(){
    window.scroll(0,400);
    var fakeElement = Object.create( blocks );
     var x = fakeElement.checkIfWorkInMiddle(element);

     expect(x).toBeTruthy();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T16:13:30.467

感谢您的回答。然而，我找到了解决方案。这很明显。一个更简单的例子。对象的两种方法（x1 和 y1）。一种方法使用另一种方法将其返回值存储在变量中。您可以想象 y1 表示元素的顶部。

```
x1 : function() {
        var p = this.y1();
        if (p > 3) {
            return 'bigger';
        } else {
            return 'smaller'
        }
    },
y1: function() {
        return 1;
    } 
```

我想影响元素的位置，因此在这个简化的示例中，我的测试中 y1 的返回值。我这样做如下：

```
describe("See if Called" , function() {
   it('check if returns the valid value' , function() {
    var fakeElement = Object.create( blocks );
    spyOn(fakeElement, 'y1').andCallFake(function() {
        return 4;
    });
   var x = fakeElement.x1();
   expect(x).toEqual("bigger");
   });
}); 
```

这通过了。希望这仍然可以帮助某人..

# android - 哪种方法最简单？（XML 和 API）

> ID：11910396
> 
> 赞同：0
> 
> 时间：2012-08-10T23:13:22.843
> 
> 标签：android, xml, json, api

首先，我不得不说我在android编程方面完全是菜鸟......

对不起，如果我没有正确地问我的问题

我正在使用 Last.FM 及其 API，但我遇到了很多错误，我很生气 :( 所以我希望你能帮助我..

好的，我认为 last.fm API 使用 XML，所以我开始使用 JSON 进行开发，但我了解到这不是那种方式。我决定搜索更多，我发现了一些关于 XML 解析器的东西，但我不确定这是否是正确的方法......

我想用艺术家的所有曲目填写一个列表。示例：[http ://ws.audioscrobbler.com/2.0/?method=artist.gettoptracks&artist=terror&api_key=b25b959554ed76058ac220b7b2e0a026](http://ws.audioscrobbler.com/2.0/?method=artist.gettoptracks&artist=terror&api_key=b25b959554ed76058ac220b7b2e0a026)

任何人都可以帮助我吗？编写这样的程序的正确（和最简单）方法是什么？怎么做？

多谢！

对于那些没有使用过 Last.FM API 的人，这里是它的文档

[http://www.lastfm.es/api](http://www.lastfm.es/api)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:50:16.160

您可以编写自己的解析器，我猜这超出了您的技能水平。或者您可以搜索“last.fm java xml parser”

以下文章展示了如何使用 XPath 解析来自 last.fm api 的 xml 文件。

[使用 xpath 在 java 中解析 XML](https://stackoverflow.com/questions/7653580/xml-parsing-in-java-with-xpath)

或者，您可以查看以下项目如何处理 last.fm API 内容：

[http://code.google.com/p/jaudioscrobbler/](http://code.google.com/p/jaudioscrobbler/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:03:40.143

我强烈推荐使用[Simple Framework](http://simple.sourceforge.net/)来序列化/反序列化 XML。它重量轻且易于使用。过去我在 Android 项目中使用过它并且对它很满意。

不要重新发明轮子并尝试自己解析 XML。这将处理它并允许您使用一行代码将 XML 响应编组到域对象中。

# java - 没有调用paintComponent，无法使图像变量工作

> ID：11910398
> 
> 赞同：0
> 
> 时间：2012-08-10T23:13:35.247
> 
> 标签：java, image, swing, paintcomponent, japplet

所以我知道我在编程方面很烂，但如果有人能给我一些代码帮助，我将不胜感激，我不知道为什么我会收到这个错误

找不到标志

```
 g.drawImage(movPic2, 35, 515, 200, 200,this);                 ^
  symbol:   variable movPic2
  location: class MovieDis 
```

如果any1可以给我一个代码片段示例，我只能用文字来理解。厌倦了这个程序，只想完成它。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.JComponent.*;

public class Movie extends JApplet {

    private String movName1;
    private String director1;
    private int yearMade1;
    private Image movPic1;
    private String movName2;
    private String director2;
    private int yearMade2;
    private Image movPic2;
    private String movName3;
    private String director3;
    private int yearMade3;
    private Image movPic3;
    private String movName4;
    private String director4;
    private int yearMade4;
    private Image movPic4;

    public void init() {
        MovieDis goo = new MovieDis(movPic1, movPic2, movPic3, movPic4);
        goo.setBounds(0, 0, 750, 500);
        add(goo);
    }
}

class MovieDis extends JComponent {

    private String movName1;
    private String director1;
    private int yearMade1;
    private Image movPic1;
    private String movName2;
    private String director2;
    private int yearMade2;
    private Image movPic2;
    private String movName3;
    private String director3;
    private int yearMade3;
    private Image movPic3;
    private String movName4;
    private String director4;
    private int yearMade4;
    private Image movPic4;

    public MovieDis(Image movPic1, Image movPic2, Image movPic3, Image movPic4) {
        setBackground(Color.black);
        movPic1 = Toolkit.getDefaultToolkit().createImage("Shaw.jpg");
        movPic2 = Toolkit.getDefaultToolkit().createImage("dances.jpg");
        movPic3 = Toolkit.getDefaultToolkit().getImage("Inception.jpg");
        movPic4 = Toolkit.getDefaultToolkit().getImage("Cuckoo.jpg");
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.black);
        g.fillRect(0, 0, 750, 500);
        g.drawImage(movPic1, 35, 35, 200, 200, this);
        g.drawImage(movPic2, 35, 515, 200, 200, this);
        g.drawImage(movPic3, 265, 35, 200, 200, this);
        g.drawImage(movPic4, 35, 515, 200, 200, this);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:28:55.580

变量`movPic1`（和 2-4）没有存储在你的`MovieDis`类中的任何地方。这就是该`paintComponent()`方法抱怨的原因。您需要将它们添加到`MovieDis`然后在您的类构造函数中分配它们。

# xcode - 如何在 Xcode 控制台中检查答案是否为整数

> ID：11910402
> 
> 赞同：0
> 
> 时间：2012-08-10T23:14:32.717
> 
> 标签：xcode

我想做的是找到数字的因素。为此，我创建了两个变量，为了检查它是否是数字的一个因子，我将数字除以检查它是否等于整数。我要你告诉我的是如何检查两个数字的除法是否是整数。

这是我的代码：

```
int x, y;
        // insert code here...
        NSLog(@"Factors of...");

        scanf("%i", &x);

        NSLog(@"Here are the factors: %i", x/y);

        for (y=0; y <= x; y++) {
            if (x % y = //does not or equals integer){

            }
        }

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:23:59.657

这是我的方法：

```
int x, y;
        //insert code here...
        NSLog(@"Welcome to the factors program. Type in your integer. Up to a 15 digit number!");

        scanf("%i", &x);

        for (y = 1; y <= x; y ++) {

            if (x % y == 0){

            NSLog(@"%i", y); //factors program

            }
            else{

            }
        }

    }
    return 0;
} 
```

# playframework - 播放 2 - Scala FakeRequest withJsonBody

> ID：11910405
> 
> 赞同：20
> 
> 时间：2012-08-10T23:15:06.767
> 
> 标签：playframework

我正在尝试测试控制器上的操作。

这是一个相当简单的操作，它接受 JSON 并返回 JSON：

```
 def createGroup = Action(parse.json) { request =>
    val name = (request.body \ "name").as[String]
    val collabs = (request.body \ "collabs").as[List[String]]

    Ok(Json.toJson(
      Map("status" -> "OK",
        "message" -> "%s created".format(name))
    ))
  } 
```

我想验证返回的 JSON 是否确实正确。

我将如何使用 FakeRequest 来做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-12T14:50:16.400

也许是这样的：

```
"POST createGroup with JSON" should {
  "create a group and return a message" in {
    implicit val app = FakeApplication()
    running(app) {
      val fakeRequest = FakeRequest(Helpers.POST, controllers.routes.ApplicationController.createGroup().url, FakeHeaders(), """ {"name": "New Group", "collabs": ["foo", "asdf"]} """)

      val result = controllers.ApplicationController.createGroup()(fakeRequest).result.value.get

      status(result) must equalTo(OK)
      contentType(result) must beSome(AcceptExtractors.Accepts.Json.mimeType)

      val message = Region.parseJson(contentAsString(result))

      // test the message response
    }
  }
} 
```

注意：该`val result`行现在可能是正确的，因为我是从使用 Async 控制器的测试中得出的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-25T20:44:01.890

我正在使用播放 2.1。@EtienneK 方法对我不起作用。这就是我的使用方式：

```
"update profile with new desc" in {
            running(FakeApplication()) {
        var member1 = new MemberInfo("testapi2@test.com")
        member1.save()
        var mId = member1.getMemberIdString()

        val json = Json.obj(
            "description" -> JsString("this is test desc")
                 )
        val req = FakeRequest(
                  method = "POST",
                  uri = routes.ProfileApiV1.update(mId).url,
                  headers = FakeHeaders(
                    Seq("Content-type"->Seq("application/json"))
                  ),
                  body =  json
                )
                val Some(result) = route(req.withCookies(Cookie("myMemberId", mId)))
        status(result) must equalTo(OK)
        contentType(result) must beSome("application/json")
        charset(result) must beSome("utf-8")
        contentAsString(result) must contain("ok")

        member1 = MemberInfo.getMemberInfoByMemberId(mId)
        member1.delete()
        }
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T13:24:33.503

我有同样的问题。像这样修复它：

```
"respond to the register Action" in {
    val requestNode = Json.toJson(Map("name" -> "Testname"))
    val request = FakeRequest().copy(body = requestNode)
        .withHeaders(HeaderNames.CONTENT_TYPE -> "application/json");
    val result = controllers.Users.register()(request)

    status(result) must equalTo(OK)
    contentType(result) must beSome("application/json")
    charset(result) must beSome("utf-8")

    val responseNode = Json.parse(contentAsString(result))
    (responseNode \ "success").as[Boolean] must equalTo(true)
  } 
```

# mongodb - 流星中的自定义排序说明符

> ID：11910409
> 
> 赞同：0
> 
> 时间：2012-08-10T23:15:37.090
> 
> 标签：mongodb, meteor

我在 Meteor 中有一个集合，它基本上是对象 id 的链表。我想从头到尾对物体进行分类。

根据 Meteor 的[文档](http://docs.meteor.com/#sortspecifiers)，您可以使用的排序说明符只是在一个键上升序和降序。有没有办法对链接列表进行排序或制作我自己的自定义排序说明符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:37:48.100

这是应用程序级别的问题。我认为 Meteor 甚至 Mongodb 不会很快原生支持这一点，我认为你可以获取 Collection，然后自己做（可能 Underscore.js 有帮助）。

# python - Pygame：key.get_pressed() 与事件队列不重合

> ID：11910410
> 
> 赞同：5
> 
> 时间：2012-08-10T23:15:39.570
> 
> 标签：python, pygame, game-physics

我正在尝试为使用 Python 中的 pygame 的应用程序制定简单的控件。我已经掌握了基础知识，但我遇到了一个奇怪的墙：我正在使用箭头键来控制我的角色。如果我按住一个箭头键，然后按住另一个箭头键（沿对角线移动），角色会按预期移动。但是，如果我释放我按下的*第二个*键（同时仍然按住第*一个*键），即使我仍然按住第一个键，角色也会停止移动。这是我的简单运动代码：

```
for event in pygame.event.get():
    if event.type == QUIT:
        pygame.quit()
        sys.exit()
    elif event.type == KEYDOWN:
        if pygame.key.get_pressed()[K_LEFT]:
            player.pos = (player.pos[0] - 2, player.pos[1])
        if pygame.key.get_pressed()[K_RIGHT]:
            player.pos = (player.pos[0] + 2, player.pos[1])
        if pygame.key.get_pressed()[K_UP]:
            player.pos = (player.pos[0], player.pos[1] - 2)
        if pygame.key.get_pressed()[K_DOWN]:
            player.pos = (player.pos[0], player.pos[1] + 2) 
```

现在，我自然对此感到非常困惑。所以我尝试打印一些行来调试。在主控制循环的顶部，我写道：

```
print (pygame.key.get_pressed()[K_DOWN], pygame.key.get_pressed()[K_RIGHT])
print pygame.event.get() 
```

...输出一个显示向下和向右箭头键状态的元组，然后显示 pygame 事件队列。我的结果更让我困惑。如果我沿对角线向下和向右移动角色，先按向下键，然后按右键，*然后*释放右键使其简单地向下移动，角色像以前一样停止移动......但这会打印到外壳上：

```
(1, 0)
[] 
```

也就是说，当我*松开*右箭头键并仍然按住向下箭头键时，pygame.key.get_pressed() 明白向下箭头键仍在按住，但事件队列中没有任何内容。

另外，在代码的前面（在控制循环之前）我正在调用

```
pygame.key.set_repeat(1, 2) 
```

使角色在按住键的同时继续移动。

任何帮助将不胜感激！谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T07:42:38.427

对于像移动这样的事情，你不应该检查事件（比如`KEYDOWN`or `KEYUP`），但是如果你的移动键被按下（使用[`get_pressed`](http://www.pygame.org/docs/ref/key.html#pygame.key.get_pressed)）检查你的主循环的每次迭代。

在您的代码中，仅当还有`KEYDOWN`事件时才检查按下的键。

* * *

还有一些其他的事情需要考虑：

*   您应该将键映射和播放器的速度分开，这样以后更改其中任何一个都会更容易。

*   您应该首先确定一个运动矢量并对其进行归一化，否则，如果您的垂直和水平运动速度为`10`，您的对角线运动速度将为 ~ `14`。

**工作示例：**

```
import pygame

pygame.init()

screen = pygame.display.set_mode((200, 200))
run = True
pos = pygame.Vector2(100, 100)
clock = pygame.time.Clock()

# speed of your player
speed = 2

# key bindings
move_map = {pygame.K_LEFT: pygame.Vector2(-1, 0),
            pygame.K_RIGHT: pygame.Vector2(1, 0),
            pygame.K_UP: pygame.Vector2(0, -1),
            pygame.K_DOWN: pygame.Vector2(0, 1)}

while run:
  for e in pygame.event.get():
    if e.type == pygame.QUIT: run = False

  screen.fill((30, 30, 30))
  # draw player, but convert position to integers first
  pygame.draw.circle(screen, pygame.Color('dodgerblue'), [int(x) for x in pos], 10)
  pygame.display.flip()

  # determine movement vector
  pressed = pygame.key.get_pressed()
  move_vector = pygame.Vector2(0, 0)
  for m in (move_map[key] for key in move_map if pressed[key]):
    move_vector += m

  # normalize movement vector if necessary
  if move_vector.length() > 0:
    move_vector.normalize_ip()

  # apply speed to movement vector
  move_vector *= speed

  # update position of player
  pos += move_vector

  clock.tick(60) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T09:27:44.840

只需使用事件返回数据，而不是尝试轮询，您已经在检查它是否为 keydown 事件类型，现在只需询问 KEY 索引，如下所示：

```
for event in pygame.event.get():
    if event.type == QUIT:
        pygame.quit()
        sys.exit()
    elif event.type == KEYDOWN:
        if event.key == K_LEFT:
            player.pos = (player.pos[0] - 2, player.pos[1]) 
```

其余代码.....

还可以考虑使用单独的数据结构来存储控件的状态，然后只使用事件来更新该数据结构。这将有助于使控件更加灵活，因为您不会依赖事件队列来使您的角色移动，根据我的经验，这会导致以下问题：一次无法按下两个以上的按钮，以及奇怪的延迟或角色移动的时间问题。所以像：

```
keystates={'up':False, 'down':False, 'left':False, 'right':False}
running=True

#start main pygame event processing loop here
while running:
    for event in pygame.event.get():
        if event.type == QUIT:
            running=False

        #check for key down events
        if event.type == KEYDOWN:
            if event.key == K_UP:
                keystates['up']=True
            if event.key == K_DOWN:
                keystates['down']=True
            if event.key == K_LEFT:
                keystates['left']=True
            if event.key == K_RIGHT:
                keystates['right']=True

        #check for key up events
        if event.type == KEYUP:
            if event.key == K_UP:
                keystates['up']=False
            if event.key == K_DOWN:
                keystates['down']=False
            if event.key == K_LEFT:
                keystates['left']=False
            if event.key == K_RIGHT:
                keystates['right']=False

    #do something about the key states here, now that the event queue has been processed
    if keystates['up']:
        character.moveUp()  #or whatever your call for these are...
    if keystates['down']:
        character.moveDown()
    if keystates['left']:
        character.moveLeft()
    if keystates['right']:
        character.moveRight()

#gracefully exit pygame here
pygame.quit() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T22:12:41.110

您正在使用基于事件的输入，但在这种情况下，您需要基于轮询的输入。然后你就不会弄乱键重复了。

```
import pygame
from pygame.locals import *

done = False    
player.pos = Rect(0,0,10,10)

while not done:
    for event in pygame.event.get():
        # any other key event input
        if event.type == QUIT:
            done = True        
        elif event.type == KEYDOWN:
            if event.key == K_ESC:
                done = True
            elif event.key == K_F1:
                print "hi world mode"

    # get key current state
    keys = pygame.key.get_pressed()
    if keys[K_LEFT]:
        player.pos.left -= 10
    if keys[K_RIGHT]:
        player.pos.left += 10
    if keys[K_UP]:
        player.pos.top -= 10
    if keys[K_DOWN]:
        player.pos.left += 10
    if keys[K_SPACE]: 
        print 'firing repeated gun' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T00:40:59.410

我的猜测是 set repeat 不会像你想象的那样工作。基本上，在你的第二个键上升后，重复不会发生。这对我来说似乎很有意义：打开一个文本编辑器并按住“A”键。“A”会溢出屏幕。然后，在按住“A”键的同时按“J”键。“A”停止。这是一个典型的按键重复系统。

我不确定使用这种“set_repeat”方法最终是否会奏效。基本上，玩家按下的任何键现在都会“重复”，即使他们点击“开火”或“跳跃”。

作为替代方案，尝试在用户按下或释放时保存状态。不要使用 set_repeat，而是执行以下操作：

```
for event in pygame.event.get():
    if event.type == QUIT:
        pygame.quit()
        sys.exit()
    elif event.type == KEYDOWN:
        if pygame.key.get_pressed()[K_LEFT]:
            player.moving_left = True
        if pygame.key.get_pressed()[K_RIGHT]:
            player.moving_right = True
        if pygame.key.get_pressed()[K_UP]:
            player.moving_up = True
        if pygame.key.get_pressed()[K_DOWN]:
            player.moving_down = True
    elif event.type == KEYUP:
        if pygame.key.get_pressed()[K_LEFT]:
            player.moving_left = False
        if pygame.key.get_pressed()[K_RIGHT]:
            player.moving_right = False
        if pygame.key.get_pressed()[K_UP]:
            player.moving_up = False
        if pygame.key.get_pressed()[K_DOWN]:
            player.moving_down = False

# Somewhere else in your game loop...
if player.moving_left:
    player.pos[0] -= 2
if player.moving_right:
    player.pos[0] += 2
if player.moving_up:
    player.pos[1] -= 2
if player.moving_right:
    player.pos[1] += 2 
```

# web-services - 我的 Rest 服务在 Tomcat 中不起作用，我无法让它发送我的资源，我做错了什么？

> ID：11910416
> 
> 赞同：0
> 
> 时间：2012-08-10T23:17:10.177
> 
> 标签：web-services, rest, tomcat, jersey

所以我开始阅读[这篇](http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/)关于如何使用 Jersey 开发 Restful 服务的教程。我想开发将数据从 MySQL 数据库发送到 Android 客户端的 Rest 服务。我阅读并按照教程中的步骤制作了自己的资源类，但是当我尝试在 Apache 上运行该服务时，出现以下[错误](http://pastebin.com/cGeNMrCH)。

我刚刚开始尝试使用 Web 服务和 Rest，我已经从那个 IBM 站点阅读了与该主题相关的信息，并且我认为我掌握了它，但我真的迷失了为什么不工作。

我的 web.xml 如下

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>TesterRest</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>
 <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.mx.ipn.escom.testerRest.resources</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>

</web-app> 
```

这是我的资源类：

包 com.mx.ipn.escom.testerRest.resources；

```
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Request;
import javax.ws.rs.core.UriInfo;
import javax.xml.bind.annotation.XmlRootElement;

import com.mx.ipn.escom.testerRest.dao.TemaDao;
import com.mx.ipn.escom.testerRest.db.Connector;
import com.mx.ipn.escom.testerRest.modelo.Tema;

@XmlRootElement
@Path("/temas")
public class TemaResource {
    @Context
    UriInfo uriInfo;
    @Context
    Request request;

    @GET
    @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
    public List<Tema> getTemas() throws SQLException{

        TemaDao temaDao = new TemaDao();        
        List<Tema> temas=temaDao.getTemas();
        temaDao.terminarSesion();

        return temas;
    }
} 
```

我的数据库连接类工作正常，所以这不是问题。

我正在使用 Eclipse 3.6 开发和 Apache Tomcat 6。

我对 JAXB 完全陌生，所以如果有人能给我指导我错过了什么样的注释，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:56:11.330

根据您的屏幕截图，我认为您应该更新您的 web.xml 以具有正确的包名称：

```
<servlet>
  <servlet-name>Jersey REST Service</servlet-name>
  <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
  <init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>com.mx.ipn.escom.testerRest.resources</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet> 
```

您的`mx`配置中缺少 。

# svn - 为什么 Svn 试图访问我的错误目录中的 Format 文件？

> ID：11910417
> 
> 赞同：8
> 
> 时间：2012-08-10T23:17:11.047
> 
> 标签：svn

目前我们有多个项目的存储库。我正在对其进行重组，以便我们可以为每个项目提供一个 SVN 存储库。

我一直在成功地关注[http://www.yolinux.com/TUTORIALS/SubversionRepositoryDataTransfer.html](http://www.yolinux.com/TUTORIALS/SubversionRepositoryDataTransfer.html)但遇到了问题。

在新的存储库中，我添加了我的主干、分支和标签目录。我他们试图将文件从根目录移到主干目录中。我能够成功添加这些文件夹。问题是当我尝试将文件移动到主干目录时。专门将文件添加到 ./trunk 级别似乎最失败：

```
Commit failed (details follow):
Could not open the requested SVN filesystem
Could not open the requested SVN filesystem 
```

查看我的 apache 日志，我在错误文件中看到了这一点：

```
[Fri Aug 10 18:30:00 2012] [error] [client 173.0.0.1] (20014)Internal error: Can't open file '/var/www/vhosts/site.com/subdomains/repo/error_docs/format': No such file or directory
[Fri Aug 10 18:30:00 2012] [error] [client 173.0.0.1] Could not fetch resource information.  [500, #0]
[Fri Aug 10 18:30:00 2012] [error] [client 173.0.0.1] Could not open the requested SVN filesystem  [500, #2]
[Fri Aug 10 18:30:00 2012] [error] [client 173.0.0.1] Could not open the requested SVN filesystem  [500, #2]
[Fri Aug 10 18:30:00 2012] [error] [client 173.0.0.1] (20014)Internal error: Can't open file '/var/www/vhosts/site.com/subdomains/repo/error_docs/format': No such file or directory
[Fri Aug 10 18:30:00 2012] [error] [client 173.0.0.1] Could not fetch resource information.  [500, #0]
[Fri Aug 10 18:30:00 2012] [error] [client 173.0.0.1] Could not open the requested SVN filesystem  [500, #2]
[Fri Aug 10 18:30:00 2012] [error] [client 173.0.0.1] Could not open the requested SVN filesystem  [500, #2] 
```

我不确定它为什么要在我的 error_docs 目录中寻找格式。该目录存在，但它没有任何命名格式。

我的 repo 的权限与工作功能 repo 相同。所以虽然它看起来像一个权限错误，但我看不到我的设置失败的地方

```
drwxr-xr-x 7 apache apache       4096 Aug 10 17:41 repo

drwxr-xr-x 2 apache apache 4096 Aug 10 17:41 conf
drwxr-xr-x 3 apache apache 4096 Aug 10 17:41 dav
drwxr-sr-x 6 apache apache 4096 Aug 10 19:05 db
-r--r--r-- 1 apache apache    2 Aug 10 17:41 format
drwxr-xr-x 2 apache apache 4096 Aug 10 17:41 hooks
drwxr-xr-x 2 apache apache 4096 Aug 10 17:41 locks
-rw-r--r-- 1 apache apache  229 Aug 10 17:41 README.txt 
```

编辑 - 08/17，更多地探讨这个问题。目前的设置是：

```
/pickles.com/
    /trunk
    /branches
    /tags
    pickles.com/
        /app
        /config
        etc... 
```

我正在尝试使用 svn mv pickles.com/pickles.com/* pickles.com/trunk 将代码放在主干中。我在我的 apache 日志中收到与以下内容相同的错误：

```
==> access_log <==
120.0.0.1 - travisks [17/Aug/2012:12:40:40 -0400] "PROPFIND /pickles.com/pickles.com HTTP/1.1" 207 919 "-" "SVN/1.6.17 (r1128011) neon/0.28.6"
120.0.0.1 - travisks [17/Aug/2012:12:40:40 -0400] "PROPFIND /pickles.com/!svn/vcc/default HTTP/1.1" 207 606 "-" "SVN/1.6.17 (r1128011) neon/0.28.6"
120.0.0.1 - travisks [17/Aug/2012:12:40:40 -0400] "PROPFIND /pickles.com/!svn/bln/22 HTTP/1.1" 207 659 "-" "SVN/1.6.17 (r1128011) neon/0.28.6"
120.0.0.1 - travisks [17/Aug/2012:12:40:40 -0400] "PROPFIND /pickles.com/pickles.com HTTP/1.1" 207 919 "-" "SVN/1.6.17 (r1128011) neon/0.28.6"
120.0.0.1 - travisks [17/Aug/2012:12:40:41 -0400] "PROPFIND /pickles.com/!svn/vcc/default HTTP/1.1" 207 672 "-" "SVN/1.6.17 (r1128011) neon/0.28.6"
120.0.0.1 - travisks [17/Aug/2012:12:40:41 -0400] "PROPFIND /pickles.com/!svn/bc/22/pickles.com HTTP/1.1" 207 930 "-" "SVN/1.6.17 (r1128011) neon/0.28.6"
120.0.0.1 - travisks [17/Aug/2012:12:40:41 -0400] "PROPFIND /pickles.com/trunk/pickles.com HTTP/1.1" 500 430 "-" "SVN/1.6.17 (r1128011) neon/0.28.6"

==> error_log <==
[Fri Aug 17 12:40:41 2012] [error] [client 120.0.0.1] (20014)Internal error: Can't open file '/var/www/vhosts/publicsite.com/subdomains/svn/error_docs/format': No such file or directory
[Fri Aug 17 12:40:41 2012] [error] [client 120.0.0.1] Could not fetch resource information.  [500, #0]
[Fri Aug 17 12:40:41 2012] [error] [client 120.0.0.1] Could not open the requested SVN filesystem  [500, #2]
[Fri Aug 17 12:40:41 2012] [error] [client 120.0.0.1] Could not open the requested SVN filesystem  [500, #2] 
```

我的svn配置：

```
<location />
  DAV svn
  SVNParentPath /var/www/vhosts/publicsite.com/subdomains/svn
  SVNListParentPath on

  AuthType Basic
  AuthName "svn.publicsite.com"
  AuthUserFile /var/www/vhosts/publicsite.com/subdomains/svn/conf/passwd

  Require valid-user
</location> 
```

此相同配置适用于同一服务器上的另一个虚拟主机。所以我不希望成为问题。唯一的变化是 ParentPath 处于打开状态，这是一个存储库目录，而不是具有许多目录的单个存储库。

**编辑 - Apache 将 SVN 重定向到 error_docs 目录**

我更新了 conf 以充当单个存储库。

原本的：

```
SVNParentPath /var/www/vhosts/publicsite.com/subdomains/svn2
SVNListParentPath on 
```

单一格式：

```
SVNPath /var/www/vhosts/publicsite.com/subdomains/svn2/pickles.com 
```

一切都按预期运行。将其转回 SVNParentPath，我们又回到了同样的老问题。现在我知道它与 MediaTemple、Plesk 和子域设置有关。

回顾一下，我得到的错误是：

```
Internal error: Can't open file '/var/www/vhosts/publicsite.com/subdomains/svn2/error_docs/format 
```

我在 error_docs 中创建了一个指向 ./subdomains/svn2/pickes.com/format 的符号链接，然后错误变为：

内部错误：打开数据库锁定文件时出错

这不是权限错误（在我显示的级别）。该项目与在单模式下工作的项目具有相同的权限集和用户。Apache 在某个地方默认使用 error_docs，因此 SVN 正在那里寻找它的目录，而不是 url 指定的存储库。

我检查了我找到的每个 httpd 文件，但找不到有关域应如何处理其子域的参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T19:12:19.243

这是一个被服务器配置混淆的 apache 问题（可能是 Plesk，但他们的论坛中没有人提供任何信息）。

问题是基本子域目录由 apache 提供服务，因此它也不能配置为通过 DAV SVN、[svn faq提供服务](http://subversion.apache.org/faq.html#http-301-error)

我能够通过将我的存储库移动到他们自己的专用目录来实施解决方案。然后我将位置标签更新为 svn 存储库，并成功地从 svn2.publicsite.com/repos 提供服务。

我的下一步是清理 url 中的冗余。我需要在 Plesk 之外创建一个单独的虚拟主机，这样我就可以支持 svn2.publicsite.com，或者我将重新定位目录，使其只是 publicisite.com/repos。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T19:24:21.473

apache Location 指令中是否存在与 svn URL 冲突的名称冲突？

# objective-c - 用于创建 iPad 应用程序的最佳软件

> ID：11910419
> 
> 赞同：0
> 
> 时间：2012-08-10T23:17:13.477
> 
> 标签：objective-c, xcode, titanium

我只是想知道创建 iPad 应用程序的最佳方式是什么。在学习 Objective-C 时值得我学习还是 Titanium 是一个更好的选择？我以前从未使用过 Objective-C，但我熟悉 JavaScript。感谢您提供的任何帮助。我也知道有一些 C# 转换器。有人用过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:38:50.013

如果您正在编写可以设想为“复杂网页”的小型应用程序，那么几乎任何像 Titanium 这样的框架都会有所帮助 - 并且可能还允许您跨平台进行。

如果您可以设想将来使用硬件或硬件加速功能（如 GPS、相机或视频），只需学习 Obj-C 并从那里开始。当您使用该应用程序完成 80% 并发现性能很糟糕，您需要访问您的框架不支持的特定功能，或者 iOS7 推出了一个很酷的新功能时，它会为您节省很多痛苦您需要用来保持竞争力但不能使用的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T23:41:26.633

一般来说，objective-C for iPhone 开发都可以学习。IDE 是 xcode。Q & A 与stackoverflow iPhone Objective-C 相关，xcode 是相关问题。我建议使用 xcode 学习 Objective-C。

您可以在下面开始开发框架的所有 javascript 和 jquery 可用。如果生产力是objective-c之间的差异。对于 iPhone、Android、Windows Phone 等的代码都是可重用的。

[http://phonegap.com/](http://phonegap.com/)

[http://www.appcelerator.com/](http://www.appcelerator.com/)（钛）

[http://www.anscamobile.com/corona/](http://www.anscamobile.com/corona/)

[https://vaadin.com/home](https://vaadin.com/home)

每个比较的框架下都是post。

[比较-电晕-phonegap-titanium](https://stackoverflow.com/questions/1482586/comparison-between-corona-phonegap-titanium)

[电晕-vs-phonegap-vs-钛/](http://www.prosoxi.com/2011/09/29/corona-vs-phonegap-vs-titanium/)

如果你有使用 Adob​​e AIR 或 ActionScript3.0 的技能，iPhone 开发也可以。最新的 IDE 是 Fl​​ashBuilder 4.6，Flash CS6。到 iPhone、Android 的代码。可重复使用的。

[Adobe AIR](http://www.adobe.com/products/air.html)

以下站点包括基于 C# 的 IDE，您可以使用 MonoTouch 进​​行开发，但需要付费。在 iOS、Android 和 Windows Phone 7 之间轻松共享代码。

[单触](http://xamarin.com/monotouch)

如果您只开发游戏，请查看 GameSalad。无需编写任何代码开发。

[游戏沙拉](http://gamesalad.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T23:34:07.877

作为当前的 C# 开发人员，我建议硬着头皮学习 Objective-C。它只会通过在您的简历中添加更多有价值的技能以及更多地接触其他语言的优缺点来帮助您的职业生涯。如果您遇到困难，网上有很多信息可以帮助您。

# routing - 使用 sammy.js 进行绝对 URL 路由

> ID：11910421
> 
> 赞同：1
> 
> 时间：2012-08-10T23:17:25.640
> 
> 标签：routing, sammy.js

我有一个绝对的 URL：

```
<a href="https://circleci.com/docs/configuration">configuration</a> 
```

我使用 Sammy.js 进行路由，但它不会路由它。但是，很高兴路由相同 URL 的相对版本：

```
<a href="/docs/configuration">configuration</a> 
```

如何以相同的方式使 sammy route 成为绝对版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:34:02.553

您仍然可以在您的 中使用哈希`href`，即`href="#ESPN"`

然后使用 Sammy 捕获路由并使用该`location.assign`方法加载新 URL 或检索文档：

```
Sammy(function () {
    /* Top-bar navigation requests
    */
    this.get("#:view", function () {
        switch (this.params.view) {              
            case "ESPN":
                location.assign("http://www.espn.com")
                break;    
        };
    });

    /* Reporting Excel requests
    */
    this.get("#Reporting/Excel/:type/:audience/:unitID/:departmentID", function () {
        location.assign("Report/Excel?" +
            "Type=" + this.params.type + "&" +
            "Audience=" + this.params.audience + "&" +
            "UnitID=" + this.params.unitID + "&" +
            "DepartmentID=" + this.params.departmentID
        );
    });
}).run(); 
```

# jquery - 使用 jQuery 在页面上的特定表中添加行

> ID：11910424
> 
> 赞同：0
> 
> 时间：2012-08-10T23:17:32.470
> 
> 标签：jquery, html, html-table, append

我一直在查看各种 StackOverflow 和 Google 的答案，但我无法弄清楚这一点。

我想要做的是在我的页面上的许多表之一中添加一行。现在，所有“添加行”请求都添加到第一个表中。

这是我的Javascript：

```
$(document).ready(function() {
$("a#add_row").click(function () {
$('#ListTable1').height($('#collapse1').height() + 60)
    $("#delTable").find('tbody')
    .append($('<tr>')
        .append($('<td>')
            .append('<input type="text" name="name[]" size="5"class="input input-small" />'))
                .append($('</td>')
                )
                .append($('<td>')
                .append('<input type="text" name="endpoint[]" size="5" class="input input-small" />'))
                .append($('</td>')
                )
                .append($('<td style="width: 20px">')
                .append()
                .append($('</td>')
                ))
            .append($('</tr>'))
        );
    });
}); 
```

这是我开始每张桌子的方式：

```
<table class="table" id="listTable1" style="width: 280px;">
<thead>...the head...</thead>
<tbody>...all sorts of rows. Added row goes at the end of the tbody...</tbody>
<tfoot>
   <tr>
      <td><a id="add_row">Add Row</a></td><td></td>
   </tr>
</tfoot>
</table> 
```

这是我正在使用的按钮：

```
<a id="add_row">Add Row</a> 
```

我知道我必须`id`为每个表的 ID 递增，但我不知道如何使用 Javascript 只向执行请求的表添加一行。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:29:34.673

您可以使用[最接近](http://api.jquery.com/closest/)获取相关表：

```
$("#add_row").click(function () {
    var $theTable = $(this).closest("table");

    // do your thing
}); 
```

正如您所提到的`id`，每个按钮的 shoudl 应该是唯一的。我建议改用一个类，让你的选择器`.add_row`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:32:20.540

将表格和按钮放在一个 div 中，然后使用 parent();

Javascript

```
$(document).ready(function() {

    $("a#add_row").click(function () {

    var table = $(this).parent().find('table');

    table.height($('#collapse1').height() + 60)

    $("#delTable").find('tbody').append($('<tr>')
    .append($('<td>')
    .append('<input type="text" name="name[]" size="5"class="input input-small" />'))
            .append($('</td>')
            )
            .append($('<td>')
            .append('<input type="text" name="endpoint[]" size="5" class="input input-small" />'))
            .append($('</td>')
            )
            .append($('<td style="width: 20px">')
            .append()
            .append($('</td>')
            ))
        .append($('</tr>'))
    );
});
}); 
```

HTML

```
<div id="container">

    <table class="table" id="listTable1" style="width: 280px;">...</table>
    <a id="add_row">Add Row</a>

</div> 
```

# php - preg_match_all 在 html 标签之间抓取找到的单词

> ID：11910436
> 
> 赞同：0
> 
> 时间：2012-08-10T23:19:13.380
> 
> 标签：php, preg-match

我有以下代码应该将提供的字符串与 $contents 匹配。$contents 变量具有通过 file_get_contents() 函数存储的网页内容：

```
if (preg_match('~<p style="margin-top: 40px; " class="head">GENE:<b>(.*?)</b>~iU', $contents, $match)){
                    $found_match = $match[1];
                } 
```

所述网页上的原始字符串如下所示：

```
<p style="margin-top: 40px; " class="head">GENE:<b>TSPAN6</b> 
```

我想将通过 (.*?) 在网页上找到的字符串 'TSPAN6' 匹配并存储到 $match[1] 中。但是，匹配似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:16:31.037

不幸的是，您的建议没有奏效。

在浏览 html 代码几个小时后，我意识到正则表达式只是在冒号后面有一个空格。因此，代码片段现在看起来像这样：

```
$pattern = '#GENE: <b>(.*)</b>#i';
preg_match($pattern1, $contents, $match1);
if (isset($match1[1]))
{
    $found_flag = $match1[1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:24:36.720

尝试这个：

```
preg_match( '#GENE:<b>([^<]+)</b>si#', $contents, $match );
$found_match = ( isset($match[1]) ? $match[1] : false ); 
```

# apache - 如何使用 htaccess 重定向动态页面

> ID：11910438
> 
> 赞同：-1
> 
> 时间：2012-08-10T23:19:17.933
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, url-rewriting

我已将站点从一个框架移动到另一个框架，现在我想重定向重要页面（大约 20 个）。如何使用 apache rewrite 重定向它们？以下是示例：

```
Old: http://mydomain.com/ba/stream.php?kat=15
New: http://www.mydomain.com/bs/about-us/our-partners

Old: http://mydomain.com/ba/stream.php?kat=29
New: http://www.mydomain.com/bs/catalogues/it-catalogue 
```

此外，在列出重要页面后，我想重定向所有剩余的链接形式：

```
http://mydomain.com/ba/whatever-is-here 
```

至

```
http://www.mydomain.com/bs/ 
```

按照 TerryE 的建议，我将附上我最新的无效代码：）

```
RewriteCond %{QUERY_STRING} ^kat=15$
RewriteRule ^stream\.php$ http://www.mydomain.com/bs/about-us/our-partners [R=301,L] 
```

另一个注意事项：我使用此代码将根域重定向到 www 子域：

```
RewriteCond %{HTTP_HOST} ^mydomain\.com$ [NC]
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301,L] 
```

我已将此根放在 www 代码下方，用于特定页面重定向，当我`http://mydomain.com/ba/stream.php?kat=15`在浏览器中测试时，我被重定向到`http://www.mydomain.com/bs/ba/stream.php?kat=15`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:56:39.257

阿德南，

您需要将以下行添加到您的`DOCROOT/.htaccess`. 这假设您的子目录中没有任何`.htaccess`文件。`ba`（有关原因的说明， 请参阅[调试 .htaccess 重写的提示。）](https://stackoverflow.com/questions/9153262/tips-for-debugging-htaccess-rewrite-rules)

```
RewriteEngine On
RewriteBase   /
#
# Redirect kat 15 to the Partners page 
#
RewriteCond %{QUERY_STRING}   ^kat=15$
RewriteRule ^ba/stream\.php$  http://www.mydomain.com/bs/about-us/our-partners? [R=301,L]
#
# Redirect all other kat ids to the corresponding bs page 
#
RewriteCond %{QUERY_STRING}   ^kat=(\d+)$
RewriteRule ^ba/stream\.php$  http://www.mydomain.com/bs/%1? [R=301,L] 
```

笔记：

*   规则匹配 UPI 减去前导路径（在本例中为 /）
*   你需要有尾随吗？在替换字符串上以抑制现有的查询参数。
*   **%n**参数从最后一次成功的条件匹配中获取匹配变量。

# php - 无法加载外部 javascript 文件 - Codeigniter

> ID：11910439
> 
> 赞同：2
> 
> 时间：2012-08-10T23:19:21.317
> 
> 标签：php, javascript, codeigniter

我正在使用 CodeIgniter。我正在尝试加载一个外部 javascript`.js`文件。该文件放置在视图文件夹本身中。

我使用以下代码在视图文件中加载js文件

```
<script src="/countdown.js" type="text/javascript"></script> 
```

但它不会加载 js 文件。如果我只是将它放在视图文件中，相同的代码就可以工作。有人可以指出我在这里缺少什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:23:01.583

一种可能的解决方案是当我不得不处理`include`诸如 CSS 和 Javascript 之类的事情时必须做的事情。

我所做的是将css和js文件放入codeigniter目录的根目录（`application`文件夹所在的目录，并像这样调用它们：

```
<script src="<?php echo base_url("countdown.js"); ?>" type="text/javascript"></script> 
```

这将从`application/`包含的目录中进行调用。

祝你好运！

# c# - 在所有表单上显示 MessageBox，设置位置和/或颜色

> ID：11910448
> 
> 赞同：6
> 
> 时间：2012-08-10T23:20:46.020
> 
> 标签：c#, visual-studio-2010, messagebox

我有两种形式，我将其中一种形式的`TopMost`属性设置为 true。在某个地方，当程序运行时，我显示了一个 MessageBox，但由于 TopMost 设置为 true，当 MessageBox 弹出时，它显示在最顶层的窗体下，所以我看不到它。

1.  有什么方法可以让我的一个表单始终位于顶部，但是当 MessageBox 弹出时，让消息框显示在该特定表单的顶部？

2.  是否可以为 MessageBox 提供一个位置，使其不在中间显示，而是在屏幕下方显示？

3.  假设我有一个橙色的表单，我可以有一个仅用于该特定应用程序的粉红色消息框。我的意思是我不是指播放窗口颜色属性。（我不希望*所有*消息框都是粉红色的。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-09-05T05:50:36.097

我用这个。

```
MessageBox.Show(
                "message",
                "title",
                MessageBoxButtons.OK,
                messageBoxIcon,
                MessageBoxDefaultButton.Button1,
                (MessageBoxOptions)0x40000); // this set TopMost 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-11T00:08:59.007

1) MessageBox.Show 方法有一个*重载*，它采用 Window 类型的第一个参数。如果您使用该重载而不仅仅是 Show(string)，即：

```
class MyForm : Form {
    void method(){
       MessageBox.Show(this, "blablablablabla");
    }
} 
```

然后 MessageBox 将以“模态”模式显示，并且恰好位于该表单的顶部。现在只要确保你通过了最上面的表格，你就完成了。副作用是“模态”模式将导致消息框阻塞原始窗口，直到消息被解除。

2）不，这不可能直接。但是，您可以努力使用 .Net 并获得消息框的“句柄”，然后通过 P/Invoke 将窗口移动到某些 WinApi 函数，但我不建议您这样做。

3) 不，这对于 MessageBoxes 是不可能的

您想要在 (2) 和 (3) 中实现的目标是不可能的，因为 MsgBox 本来就是简单的。要获得这些东西，您必须编写自己的小型表单，充当消息框，并呈现该表单而不是消息框。该表单将能够具有您喜欢的任何样式、任何位置和任何行为。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-24T14:43:23.113

一个最简单的方法`MessageBox`是这样的：

```
using (var dummy = new Form() { TopMost = true })
{
    MessageBox.Show(dummy, text, title);
} 
```

您不必实际显示虚拟表单。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-21T11:40:43.617

要`MessageBox`在应用程序的所有其他形式（包括带有 set 的形式）之上显示 a，`TopMost`您可以使用[`Show()`](https://msdn.microsoft.com/en-us/library/ba3x8zfh%28v=vs.110%29.aspx)方法重载，该方法采用类型参数[`MessageBoxOptions`](https://msdn.microsoft.com/en-us/library/system.windows.forms.messageboxoptions%28v=vs.110%29.aspx)并将 MessageBoxOptions.ServiceNotification 作为该参数传递。

```
DialogResult result = MessageBox.Show("Configuration file was corrupted.\n\nDo you want to reset it to default and lose all configurations?", "Config File Corrupted", MessageBoxButtons.YesNo, MessageBoxIcon.Question, MessageBoxDefaultButton.Button2, MessageBoxOptions.ServiceNotification); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T23:38:31.073

我认为 .Net 中没有内置功能可以做到这一点，但我建议您保留 TopMost 表单的引用，并在显示每条消息之前对其进行更改，如下所示：

```
 public static void ShowMessage(string message)
    {
        Component.InstanceOfTopMost.TopMost = false;
        MessageBox.Show(message);
        Component.InstanceOfTopMost.TopMost = true;
    } 
```

`Component`是一个静态类，它包含您的表单的引用，它应该是 TopMost。这个静态类的原因是您可能想在多个地方使用该表单，这样您就可以轻松访问您的表单。这是一种简单的方法，您可以根据需要更改它。

**更新 ：**

```
 public class Component
        {
            public static Form2 InstanceOfTopMost { get; set; }
        } 
```

组件只是一个名称，给它另一个名称，因为还有另一个名为 Component 的 .Net 类。

```
 var frm = new Form2();
        Component.InstanceOfTopMost = frm;
        frm.Show(); 
```

希望这有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-11T00:29:29.450

@Saber Amani：为什么会这样？看，它只是工作：

```
 using System.Windows.Forms;

    namespace ReusingUserControlsSample
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void button1_Click(object sender, System.EventArgs e)
            {
                Form1 second = new Form1();
                second.TopMost = true;
                second.Show();

                MessageBox.Show(second, "BLARGH");
            }

            private void InitializeComponent()
            {
                this.button1 = new System.Windows.Forms.Button();
                this.SuspendLayout();
                this.button1.Location = new System.Drawing.Point(178, 201);
                this.button1.Name = "button1";
                this.button1.Size = new System.Drawing.Size(75, 23);
                this.button1.TabIndex = 0;
                this.button1.Text = "button1";
                this.button1.UseVisualStyleBackColor = true;
                this.button1.Click += new System.EventHandler(this.button1_Click);
                this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
                this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
                this.ClientSize = new System.Drawing.Size(284, 264);
                this.Controls.Add(this.button1);
                this.Name = "Form1";
                this.Text = "Form1";
                this.ResumeLayout(false);

            }

            private System.Windows.Forms.Button button1;
        }
    } 
```

MSG 正确显示在第二种形式 TopMost 上。唯一的“问题”是**知道**哪种形式是最顶层的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-13T14:45:23.640

```
https://stackoverflow.com/questions/29326042/show-message-box-in-net-console-application
https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-messagebox

using System.Runtime.InteropServices;
//...
[DllImport("User32.dll", CharSet = CharSet.Unicode)]
public static extern int MessageBox(IntPtr h, string m, string c, uint type);
const uint ICONERROR = 16;
const uint ICONWARNING = 48;
const uint ICONINFORMATION = 64;
const uint MB_TOPMOST = 262144;

//...
MessageBox((IntPtr)0, "Started" + DateTime.Now, "Log", ICONINFORMATION | MB_TOPMOST); 
```

# vba - 如何在 MS Access Form 的表格中显示记录数据

> ID：11910449
> 
> 赞同：3
> 
> 时间：2012-08-10T23:20:47.107
> 
> 标签：vba, ms-access, vbscript, ms-office, office-2010

我正在 Office Access 中处理表单。我注意到没有很多控件可供使用，但我需要在结构（不是列表框或组合框）之类的表中显示数据。请问我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T19:41:51.793

实际上，Access 中真正出色的功能之一就是我们所说的连续表单。连续表单只是一种表单，您可以在其中放置所需的任何类型的控件，魔术部分是这些控件将为您一遍又一遍地重复每一行细节 - 结果是一个网格，我敢说一个最强大的网格控件可用 - 它完全可以使用 VBA 进行编程。

这样的设置不仅为您提供了我们 IT 行业所见过的最好的网格控件之一，而且您只需很少的工作就能创造出这样的奇迹。

因此，您可以删除图片、按钮、复选框甚至组合框。它们都会为您重复作为网格。

因此，这是一个在 Access 中创建的简单屏幕：

![在此处输入图像描述](../Images/81a533386b7ef12363ff5c038d510951.png)

这里还有一些想法。请注意，其中一些是 Access Web 表单，但所有外观都可用于客户端表单或 Web 表单。

所以请记住，可以在浏览器中运行的新的完整 Web 效果表单，甚至是仅限客户端的表单都可以使用这些新效果，例如阴影、悬停效果等。

![在此处输入图像描述](../Images/4a7ca87ac7027551a9d32481bb3d5c33.png)

和这个：

![在此处输入图像描述](../Images/eb924565261602536f52977b11dc71cf.png)

和

![在此处输入图像描述](../Images/0422df3c8120d3c9d57382581dc8932a.png)

***以上非常酷，因为我放入了富文本控件并将其绑定到一个函数。结果是一列，以红色显示两行之间的差异。多么酷啊？***

上面的所有示例都是我们在 Access 中所谓的连续表单，并且构建起来非常简单，并且所有上面的示例都是 100% 仅使用 Access 表单构建的，包括带有阴影的按钮的图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:24:02.210

有很多控件。您可以添加一个子表单，它将显示一个连续的表单或数据表，甚至是一个查询或表格。您可以将表单本身切换到数据表视图或连续表单。

# python - nslookup 一个 IP 地址。一些问题！！！需要python脚本

> ID：11910454
> 
> 赞同：-1
> 
> 时间：2012-08-10T23:21:07.430
> 
> 标签：python, nslookup, gethostbyaddr

我为这个IP做nslookup ..

nslookup 74.125.225.79

主机名如下：

主机名：ord08s07-in-f15.1e100.net

--

但是当我浏览到 74.125.225.79 或使用 ord08s07-in-f15.1e100.net

它带我去**google.com**

我知道这是一个重定向。

--

**问题是.. 我可以在命令行（或在 python 脚本中）使用什么命令来循环遍历文本文件中的多个 IP 地址，以便我可以直接访问最终域名。**

74.125.225.79 -> www.google.com（或类似名称）而不是某些服务器名称...例如 ord08s07-in-f15.1e100.net

我需要的原因是...我从我们的用户浏览的日志文件中列出了几个 ip 地址，我需要找出他们去了哪些网站...将 ip 映射到他们在浏览器。

我有一个 python 脚本，它使用以下命令循环文件：

```
>>> import socket
>>> socket.gethostbyaddr("69.59.196.211")
('stackoverflow.com', ['211.196.59.69.in-addr.arpa'], ['69.59.196.211']) 
```

但我需要在浏览器上看到的最终目的地。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:30:26.407

出于多种原因，您不一定能将 IP 地址转换为特定网站。

1.  小型网站可能使用共享服务器。IP 解析为共享托管服务，而不是特定站点。
2.  许多大型网站都使用 CDN。这些使用分布在世界各地的许多服务器。
3.  如果网站托管在住宅 IP 上，反向 DNS 通常指向 ISP 域中的名称，而不是客户自己的域。
4.  该站点可能会进行 DNS 循环负载平衡，因此 www.company.com 会解析为多个不同的 IP。每个 IP 的反向 DNS 可能是更具体的名称，例如 webserver1.company.com、webserver2.company.com 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:29:39.433

实际上，你不能。正如您所发现的，单个 IP 地址并不能唯一标识一个网站——单个网站（尤其是像 Google 这样的大型网站）可能有多个 IP 地址，并且单个 IP 地址可能被多个网站共享。

# ios - 我可以有一个包含 NSArrays 的 NSArray

> ID：11910459
> 
> 赞同：-4
> 
> 时间：2012-08-10T23:21:22.893
> 
> 标签：ios, nsarray, nsarraycontroller

我想为一个标签存储多个值，我有大约 10 个标签。那么有可能有一个 NSArray 对象的 NSArray 吗？我可以做这样的事情：

```
[[NSArray alloc] initWithObjects: NSArray1, NSArray2, nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:26:17.747

是的。NSArray 可以保存从 NSObject 子类化的任何对象。NSArray 是 NSObject 的子类。因此，一个 NSArray 可以容纳一个 NSArray。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:27:04.980

由于您可以将任何对象存储在 NSArray 中，因此您可以将其他 NSArray 存储在其中，就像任何其他对象（即 NSNumber、YourCustombObj 等）一样。

你甚至可以在 NSArrays 中添加 NSMutableArrays 或 NSDictionarys：

```
NSArray *array = [NSarray alloc] initWithObjects: mutableArray1, dictionary1, nil]; 
```

# python - subprocess.Popen 工作吗？

> ID：11910466
> 
> 赞同：0
> 
> 时间：2012-08-10T23:22:26.527
> 
> 标签：python, subprocess, popen

**测试1.py**

```
import cStringIO
import os
import cgi
import time
import sys
from subprocess import Popen, PIPE, STDOUT

def application(environ, start_response):
    headers = []
    headers.append(('Content-Type', 'text/plain'))
    write = start_response('200 OK', headers)

    input = environ['wsgi.input']
    output = cStringIO.StringIO()

    process = Popen(["python","C:/wamp/www/python/popen/test2.py"], stdout=PIPE, stderr=PIPE)

    a = 0
    while a < 10:
        a += 1
        print >> output, "%r" % process.returncode
        print >> output, "%r" % process.poll()
        print >> output
        time.sleep(1)

    while True:
        out = process.stdout.read(1)
        if out == '' and process.poll() != None:
            break
        if out != '':
            sys.stdout.write(out)
            sys.stdout.flush()

    print >> output, "Output: "+out

    output.write(input.read(int(environ.get('CONTENT_LENGTH', '0'))))
    return [output.getvalue()] 
```

**测试2.py**

```
import cStringIO
import os
import cgi
import time

def application(environ, start_response):
    headers = []
    headers.append(('Content-Type', 'text/plain'))
    write = start_response('200 OK', headers)

    input = environ['wsgi.input']
    output = cStringIO.StringIO()

    time.sleep(15)

    print >> output, "done"

    output.write(input.read(int(environ.get('CONTENT_LENGTH', '0'))))
    return [output.getvalue()] 
```

**test1.py 输出**

```
None
None

None
0

0
0

0
0

0
0

0
0

0
0

0
0

0
0

0
0

Output: 
```

无论我设置`time.sleep(15)`为 0 秒还是 30 秒（在 test2.py 中），我都会得到相同的输出。出事了。我也尝试读取输出，所以我至少可以告诉它正在读取文件。但是我没有输出。这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:32:48.263

您的第二个脚本 (test2.py) 只定义了一个`application`函数——它不调用该函数，因此当您运行该脚本时不会发生任何可见的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:19:20.203

为了扩展@duskwuff 已经给出的答案......是的，子进程正在正常工作。

问题是`test2.py`脚本几乎立即成功完成，因为从命令 shell 调用它会运行脚本，但脚本没有入口点。并且没有办法以您使用它的方式运行它。`test2.py`是一个 wsgi 应用程序，旨在以等待连接进入的方式运行，然后通过您的`application`可调用对象传递请求。

`test2.py`需要实际做一些事情，可以从命令行执行：

```
import time

def main():
    time.sleep(5)
    print "All done"

if __name__ == "__main__":
    main() 
```

# php - 具有用户权限的 PHP 管理面板

> ID：11910467
> 
> 赞同：0
> 
> 时间：2012-08-10T23:22:26.813
> 
> 标签：php

这是我在这里的第一个问题，我相信这个问题不存在:) 我搜索但没有成功。

好的，我有下一个问题。我需要一些想法如何在管理面板中执行用户权限。我想要一个超级管理员、管理员和操作员。任何人都将拥有不同的特权。超级管理员将拥有所有权限，一些管理员和一些操作员（但并非所有人）将拥有相同的权限。我需要一个后端逻辑。如何在没有很多 if 语句的情况下做到这一点，这样我的代码看起来不错？我使用自己编写的 Smarty 模板引擎和 oop php。我将分配 Smarty 特权，但接下来呢？谁能给我想法或一些示例代码？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:34:12.840

使用 MVC 这是一项相对简单的任务。在一个名为的表中创建不同的角色，`permissions`然后在另一个名为的表中创建`user_permissions`连接`user_id`到`permission_id`. 然后创建一个函数，可能在一个名为`user`called的类中`has_role()`。该函数接受两个参数：权限别名和最终的用户 ID。

如果要避免在视图中调用函数，可以在控制器中保存不同的变量，这些变量会传递给视图，例如：

```
$isAdmin = $user->has_role('admin');
$isOperator = $user->has_role('operator'); 
```

如果您只向管理员显示一些内容，您可以在视图中执行以下操作：

```
<?php if($isAdmin): ?>

<p>Admin only content</p>

<?php endif; ?> 
```

但是，如果您只有管理员页面，只需将

```
if(! $this->user->has_role('role')) {
  header("Location: /index.php");
  die();
} 
```

会成功的。所有这一切在没有 MVC 部分的情况下当然是可行的，但是它变得更加干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:28:10.760

也许您可以通过拆分您的管理视图（大概每种类型的用户获得不同的 UI 体验）然后根据用户的权限包含正确的文件来做到这一点？

Tbh，如果不知道您的 OOP 框架的工作原理，这很难回答，因为这将定义您如何解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T23:51:36.343

```
class Session {

    public static function init() {
        @session_start();
    }

    public static function set($key, $value) {
        $_SESSION[$key] = $value;
    }

    public static function get($key) {
        if (isset($_SESSION[$key])) {
        return $_SESSION[$key];
        }
    }

    public static function destroy() {
        //unset($_SESSION);
        session_destroy();
    }

} 
```

稍后您在登录 php 中设置角色，$data['role'] 您从 mysql 获得：

```
 Session::init();
   Session::set('role', $data['role']); 
```

并检查角色使用，例如：

```
 $role = Session::get('role');
    if ($role != 'owner') {
        Session::destroy();
        header('location: '.URL.'login');
        exit;
    } 
```

# javascript - Firefox中删除元素的问题

> ID：11910470
> 
> 赞同：0
> 
> 时间：2012-08-10T23:22:55.407
> 
> 标签：javascript, firefox, cross-browser

我正在使用 JavaScript 从网页中创建和删除元素。我已经让它在除 Firefox 之外的所有浏览器中工作。在 Firefox 中，它将创建元素、删除元素、重新创建元素，但在重新创建元素后，它会返回“未找到”类型错误，指出该元素不存在并且它主要卡在屏幕上观点。

这将创建图像：

```
function createMOImage( objId )
{
    var img = document.createElement('img');
    var leftOffset = document.getElementById( objId ).offsetLeft;

    img.src = 'images/pre-butt-mo.png';
    img.style.position = 'absolute';
    img.style.left = leftOffset + "px";
    img.style.opacity = '0.2';
    img.style.zindex = '9';
    img.id = 'temp';
    img.onmouseout = function () { moff( objId ); };

    return img;
} 
```

如您所见，创建的图像有一个调用此函数的鼠标移出事件：

```
function moff( objId )
{
    var container = document.getElementById( 'container' );
    var temp = document.getElementById( 'temp' );

    removeMOImage( );
    changeButt( objId );

    return;
} 
```

change 函数工作得很好，但它没有被调用，因为 JavaScript 在`removeMOImage()`函数中被终止：

```
function removeMOImage(  )
{
    if ( img = document.getElementById('temp') )
    {
        img.parentNode.removeChild( temp );
    } else {
        return;
    }
} 
```

`removeChild`尽管元素已在 create 函数中成功重新创建，但该函数返回 not found。

我在 IE Chrome Opera 和 Firefox 中进行了测试，唯一有问题的是 Firefox。我还必须克服其他一些 FF 特定问题，其中大部分是通过其他堆栈溢出线程解决的；但是，我找不到解决此问题的方法。

这是来自源代码的完整 JavaScript c&p：

```
function mon( objId )
{

    var container = document.getElementById( 'container' );
    var img = createMOImage( objId );

    container.appendChild( img );
    changeButt( objId );

    return;
}

function moff( objId )
{
    var container = document.getElementById( 'container' );
    var temp = document.getElementById( 'temp' );

    removeMOImage( );
    changeButt( objId );

    return;
}

function createMOImage( objId )
{
    var img = document.createElement('img');
    var leftOffset = document.getElementById( objId ).offsetLeft;

    img.src = 'images/pre-butt-mo.png'; // change image names to match button ID's
    img.style.position = 'absolute';
    img.style.left = leftOffset + "px";
    img.style.opacity = '0.2';
    img.style.zindex = '9';
    img.id = 'temp';
    img.onmouseout = function () { moff( objId ); };

    return img;
}

function removeMOImage(  )
{

    // find cross browser approach. General consensus is to use remove child from the parent div reference but there are alot of issues.
    // Also have issue with mouse moving over the element causing the element to be deleted even though the mouse never actually leaves the element.

    // Best Hypothesized solution - move the mouseout event to the MO image
    // Confirmed solution for Chrome and IE but FF will only delete the image after the first MOut, after recreating the element it stays perminantly
    if ( img = document.getElementById('temp') )
    {
        img.parentNode.removeChild( temp );
    } else {
        return;
    }

}

function changeButt( objId )
{
    var img = document.getElementById( objId );
    var imginv = document.getElementById( objId + "inv" );
    var temp = document.getElementById( 'temp' );

    if ( temp != null )
    {
        img.src = "images/blank-butt.png";
        imginv.src = "images/blank-butt-inv.png";
        return;
    } else {
        img.src = "images/" + objId + ".png";
        imginv.src = "images/" + objId + "inv.png";
        return;
    }    
} 
```

目的是在另一个图像上创建一个图像，并在鼠标从新创建的图像（比原始图像大）上移开时删除该图像。如果能解决这个问题，将不胜感激。我真的不想用闪光灯。

另一个问题是 opacity 属性似乎在 IE 中不起作用。除非这里有人有任何想法，否则我将独自解决该解决方案。如果可能的话，有人会在 safari 上进行心理测试吗？无权访问 Mac。

*我为这些愚蠢的笔记道歉，它们是为了在我离开电脑时帮助我跟踪。

[编辑] 我修复了不透明度问题。[编辑] 通过创建一个额外的变量解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:26:26.420

这是一个范围界定问题。您在一个函数中定义临时变量并尝试在另一个函数中引用它。

```
function moff( objId ) {
    var container = document.getElementById( 'container' );

    removeMOImage( );
    changeButt( objId );
}

function removeMOImage(  ) {
    var temp = document.getElementById( 'temp' );

    if ( temp ) {
        temp.parentNode.removeChild( temp );
    }
} 
```

你也不需要最后的`return`陈述。如果您不提前退出或返回值，那么您无论如何都在模仿解释器为您所做的事情。

# javascript - 在 TCP/IP 堆栈 Microchip 中设置日期和时间

> ID：11910472
> 
> 赞同：0
> 
> 时间：2012-08-10T23:23:13.157
> 
> 标签：javascript, tcp, stack, microchip

将日期和时间设置为实时时钟 (RTCC) 的最佳方法是什么？您可以根据 IP 地址的位置提取当前时间，还是必须手动设置。如果您手动设置它，让您的用户设置它的最佳方法是什么？我目前有一个使用名称的简单表单，有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:57:52.057

如果我正确理解了这个问题，那么找出本地时间的最佳方法是提供一个从用户浏览器读取本地时间的网页。

如果您只需要找出 UTC，那么可以使用其中一台池服务器进行 NTP，从而避免用户交互。

# c++ - C - 字符数组初始化

> ID：11910474
> 
> 赞同：1
> 
> 时间：2012-08-10T23:23:33.710
> 
> 标签：c++, c, arrays, struct, initialization

在下面的情况 2、3、4、5 中，初始化是如何发生的。1 将包含垃圾。

```
char x[16];
char x[16] = {0};
char x[16] = {0, };
char x[16] = {1};
char x[16] = {1, }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T23:25:47.820

如果对数组使用大括号初始值设定项语法，则初始值设定项列表中未提及的任何其他元素都将使用零进行初始化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T23:32:12.320

@Philipp 是正确的。

一个快速测试给了我这个：

[http://codepad.org/DsOtXIYg](http://codepad.org/DsOtXIYg)

顺便说一句，这是运行测试代码的绝佳链接。

# ruby - 从两个不同长度的数组中生成哈希，均匀分布元素

> ID：11910477
> 
> 赞同：-1
> 
> 时间：2012-08-10T23:24:13.580
> 
> 标签：ruby, arrays, hash

我有两个不同长度的数组。我想将它们放入哈希中，尽可能均匀地分布元素。

***编辑***：对不起，我意识到我没有提供足够的输入。“尽可能均匀”是指以下内容：

array1 总是比 array2 有更多的元素。

array2 元素是字符串。最小的单位是单词。

***更新的目标*** 对于生成的哈希，我希望根据平均字数比（所有元素 array2 到 array1.join(" ").split(" ")）将值分配给键。这样我就可以在不破坏字符串完整性的情况下将数字分配到尽可能接近平均值的字符串。您还可以将结果显示为：

```
result = {"The older son of a woman" =>[320, 321, 322, 323],...} 
```

我很抱歉造成混乱，我想应用程序的目的让我以某种颠倒的方式想到了这一点..

* * *

我可以让下面的示例代码在某些情况下工作，但在某些情况下却不行。

```
array1.clear
array2.clear

array11 = [336, 337, 338, 339, 340, 342, 344, 345, 346, 347, 348]
array22 = ["New research", "suggests that hoarders have unique patterns", "of brain activity", "when faced with making decisions", "about their possessions."] 

array1 =  [320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 331, 332, 333, 334] 
array2 = ["The older son of a woman", "killed at Sunday's mass shooting", "in Wisconsin said she was shot just", "after completing prayers."] 

def hash_from_arrays(array1, array2)
 hash  =  Hash.new{|h,k| h[k] = [] }
  arr_ratio = arr1_to_arr2_ratio(array2, array1)
  start =  0
  last_arr1_to_arr2 = Float(Float(array2.last.split(" ").length)*Float(arr_ratio)).floor
  array1.each_with_index do | element, index|
    arr1_for_arr2_ratio = Float(Float(array2[0].split(" ").length)*Float(arr_ratio)).floor
    hash[element] = array2[0]
    if arr1_for_arr2_ratio + start == index && array2.length > 1
      array2.shift
      start = index
    end
  end
  return hash
end

def arr1_to_arr2_ratio(array1, array2)
  word_count = 0.0
  array1.each{|string| word_count = word_count + string.split(" ").length}
  result = Float(array2.length) / word_count
  return result
end

 hash_from_arrays(array1, array2)
 => {320=>"The older son of a woman", 321=>"The older son of a woman", 322=>"The older son of a woman", 323=>"The older son of a woman", 324=>"The older son of a woman", 325=>"killed at Sunday's mass shooting", 326=>"killed at Sunday's mass shooting", 327=>"killed at Sunday's mass shooting", 328=>"in Wisconsin said she was shot just", 329=>"in Wisconsin said she was shot just", 331=>"in Wisconsin said she was shot just", 332=>"in Wisconsin said she was shot just", 333=>"after completing prayers.", 334=>"after completing prayers."} 
```

***编辑***更新了代码，现在它适用于两个数组。我想一般都有效...如果有人可以提出更好的解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:29:10.863

0) 问题描述：

我有两组，我想定义它们之间的映射。

首先是一组唯一的字符串，命名为 SS 或“字符串”，其项称为“字符串”。
第一个集合是有限的，它由 NStrings 个项目组成。
第一组中的每个字符串可以由任意数量的单词组成，用 NumWords(string) 表示。
因此，第一组还提供了每个字符串的平均字数的统计属性，用 TargetAVG 表示。

第二个是一组唯一的数字，命名为 KK 或“keys”，其项称为“a key”。
第二组是有限的，它由 NKeys 项组成。
这些数字的确切值无关紧要，它们仅用作唯一标识符。

保证第二组比第一组有更多的条目。

我想在第一组和第二组之间生成映射 MM。
第二组（键）中的每一项都应准确分配第一组（字符串）中的一项。
此映射必须至少使用第一组（字符串）中的每个项目一次。
第一组中的任何一项（字符串）都可以多次使用。
因此，映射还从第一组（字符串）中生成给定项目的多次使用的统计属性，用 NumUses(string) 表示。

我想生成这样的映射，即分配给键的字符串中的单词数产生相同的 TargetAVG 平均值（或尽可能接近），并注释字符串计数为平均值的多次映射使用它的次数。

1) 重述：

问题：

> 从一组固定的独特物品中选择固定数量的不同价值物品，以最适合目标总价值。要选择的项目数大于项目数，这部分项目必须多次选择。

额外限制：

> 每个项目必须至少选择一次。

在哪里：

> items = SS
> target item count = NKeys
> item value = NumWords(item) * NumUses(item)
> target total value = TargetAVG * NKeys (= 估计整个映射中的单词总数)

2）让我们尝试降低问题的复杂性：

键比字符串多 + 每个字符串必须至少使用一次 + 每个键必须只使用一次。
因此，正确生成的映射将包含一个子集，该子集由映射到不同键的每个字符串组成。
因此，一个 NString 的键已经部分解决了，因为我们知道它们必须与每个字符串一对一地匹配，我们只是不知道顺序。例如，我们知道 70 个键中的大约 30 个必须与 30 个字符串中的每一个进行 1 对 1 配对，但我们不知道哪个键对应哪个字符串。但是，分配的确切顺序从来都不重要，所以我们甚至可以直接映射它们：第一个到第一个，第二个到第二个，……第 30 个到第 30 个。
这正是我们为减少问题所做的。

所以：

> -) 我们总是可以减少，因为键比字符串多
> -) 并且为此，我们总是会留下一些剩余的键，正是 (NKeys-NStrings)
> -) 保证“每个项目必须是至少选择一次”

健全性检查：
部分解决方案已用完 NStrings 个键，我们只剩下 (NKeys-NStrings) 个键。
最终解决方案必须达到等于 TargetAVG 的平均值。
我们已经在键的第一个 NStrings 上使用了所有 NStrings 个字符串。
这意味着我们的部分解决方案保证在内部具有“TargetAVG”的平均值。
我们还剩下一些钥匙。
这意味着其余键的映射也应该具有“TargetAVG”的平均值，或者尽可能接近。
我们已经满足了要求，我们现在可以随时使用任何字符串，甚至为零。

一切听起来都很棒。

3）遗留问题：

问题类型：

> 选择固定数量的有价值物品以最适合目标总价值。任何项目我都可以选择任意次数。

在哪里：

> items = SS
> target item count = (NKeys-NStrings)
> item value = NumWords(item) * NumUses(item)
> target total value = TargetAVG * (NKeys-NStrings) （= 剩余映射中估计的单词总数）

重要的是，我们希望通过使用精确的“X”个选择来获得最接近给定值“S”的总和。
这意味着它不是一般的背包包装问题，而是它的一种子类，一种 [改变问题](http://en.wikipedia.org/wiki/Change-making_problem)。让我们试试它是否适合：

> 我们需要以最少使用不同价值的硬币来处理一定数量的现金。
> =>
> 我们需要在一些具有不同字数的字符串之间拆分指定数量的单词，恰好 X 选择。

另外，如果理想是不可能的，我们希望获得“最佳近似”结果。

背包问题被归类为 NP，一般来说，获得精确或最佳可能是困难的或非常耗时的。在谷歌上花了一些时间之后，我还没有找到任何现成的算法可以用精确的 N 选择来解决金钱问题，并且可能这类问题只是以其他名称而闻名，我现在不记得了. 我非常建议您搜索，或询问有关如何分类此类问题的问题。如果有人更精通算法命名法的答案，您甚至可以立即找到可行的解决方案。

其他需要考虑的事情：您的“最佳结果”需求有多严重，实际上，它需要有多接近？相对于字符串的数量会有多少键？字符串的字数会有多少变化？任何额外的条件都可能有助于放下背包并使用一些在这些条件下碰巧是安全的幼稚方法。

例如，如果剩余（NKey-NSstrings）的数量很少，只需启动一个完整的指数搜索，它将检查所有可能性，您肯定会得到最好的结果。

否则，如果您不需要最好的结果并且 (NKeys-NStrings) 很高并且字数相对均匀，那么您可能只需进行简单的贪婪分配，而错误分配的几个项目将使平均值只差一点（几个项目除以高 NKeys-NStrings = 平均值的低分数）。

在其他情况下，或者如果您真的需要最佳匹配，您可能需要进入“动态规划”或“整数线性规划”，以便为类似问题生成近似解。

如果我对此有任何想法，我会添加它们并发表评论，但实际上我怀疑。在我的记忆中，我已经写了所有的东西，只有当我真的再次把鼻子贴在算法书上时，我才能给你更多的指点，遗憾的是我现在几乎没有时间了：）给我一个如果您偶然发现问题的正确分类，请注意！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:11:55.607

我很高兴你有一些解决方案:)

我玩了一点你的 nevest 代码，让我们有：

```
array1 =  [320, 321, 322, 323, 324]
array2 = ["a a a a a a a a a a a a a a a a", "b"]

irb(main):071:0> pp hash_from_arrays(array1, array2)
{320=>"a a a a a a a a a a a a a a a a",
 321=>"a a a a a a a a a a a a a a a a",
 322=>"a a a a a a a a a a a a a a a a",
 323=>"a a a a a a a a a a a a a a a a",
 324=>"a a a a a a a a a a a a a a a a"} 
```

1）完全不使用“B”可以吗？
2) array2 有 17 个单词，除以 array1 中的 5 个键 = 平均每个键 3.4 个单词。结果每个键平均有 16 个单词，这与 3.4 相差甚远。显然，如果“b”被使用几次，avg 会更接近 3.4。

或者，也许我再次不明白您心中的分布/平均值是什么？

# mysql - MySQL 不工作（类路径问题）

> ID：11910478
> 
> 赞同：0
> 
> 时间：2012-08-10T23:24:26.300
> 
> 标签：mysql, jdbc, driver

我有一个尝试连接到数据库的简单示例，只有在解压缩工作目录中的 mysql*.jar 文件时*才能执行此操作。*

1.  我试图将 /path/to/mysql.jar.file 导出到 $PATH 和 $CLASSPATH 并且没有用。
2.  我尝试使用包含这样的路径，但它不起作用： javac -cp ".:/usr/share/java/" HelloWorld.java

可能是什么问题。为什么找不到jar文件？

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:16:19.563

在运行 JVM 以及运行编译器时，您需要设置类路径。类路径必须包含 JAR 本身，而不是包含 JAR 的文件夹。

你的线

```
javac -cp ".:/usr/share/java" HelloWorld.java 
```

表明您正在将类路径传递给`javac`Java 编译器，而不是 JVM。

让我们使用以下简单的类，它只是连接到 MySQL，然后再次断开连接：

```
import java.sql.*;

public class HelloWorld {
    public static void main(String[] args) throws Exception {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/db", "user", "password");
        System.out.println("Got connection");
        con.close();
    }
} 
```

当我开始运行它时会发生以下情况：

```
C:\Users\Luke\Java>echo %CLASSPATH%
.;C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip;C:\Users\Luke\stuff\ojdbc6.jar

C:\Users\Luke\Java>java HelloWorld
Exception in thread "main" java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at HelloWorld.main(HelloWorld.java:5) 
```

在这种情况下，MySQL 驱动程序 JAR 不在类路径中，因此当我们尝试加载驱动程序类 ( `com.mysql.jdbc.Driver`) 时会出现错误。

如果我使用命令行开关将驱动程序 JAR 添加到类路径`-cp`（我在当前目录中有此 JAR 的副本），它可以工作：

```
C:\Users\Luke\Java>java -cp .;mysql-connector-java-5.1.18-bin.jar HelloWorld
Got connection 
```

（我在 Windows 上，所以我`;`用作路径分隔符。你似乎在使用 Unix 的某些方言，所以你应该`:`改用。）

同样，如果我们将 JAR 添加到`CLASSPATH`环境变量中，它也可以：

```
C:\Users\Luke\Java>set CLASSPATH=%CLASSPATH%;mysql-connector-java-5.1.18-bin.jar

C:\Users\Luke\Java>java HelloWorld
Got connection 
```

# google-app-engine - 谷歌应用引擎上的子字符串类型文本搜索

> ID：11910479
> 
> 赞同：3
> 
> 时间：2012-08-10T23:24:33.177
> 
> 标签：google-app-engine, full-text-search

我看到谷歌应用引擎现在添加了文本搜索：[https ://developers.google.com/appengine/docs/python/search/overview](https://developers.google.com/appengine/docs/python/search/overview)

这是否包括在字符串中搜索子字符串？

我问的原因是因为我之前编写了一些代码，允许子字符串搜索名称和电话号码等字段。例如，您可以搜索“San”，它会找到类似“Mike DaSantos”的结果。这对于自动完成之类的东西来说太棒了。

我遇到了成本问题，因为这需要大量的写入操作。我为此执行的每个字段都需要大约 O((n*n+1)/2) 次写入操作，因为它涉及字符串中每个字母子集的写入操作。在为 6000 名客户编制电话号码、姓名、电子邮件地址和地址的索引时，这增加了几美元的应用引擎成本。

我想知道使用搜索 API 是否可以以更低的成本提供此功能？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T00:36:12.237

不，它没有。

我们可以搜索的唯一“通配符”是复数。

```
~"car"  # searches for "car" and "cars" 
```

它可以做的是在同一个字段中保存多个令牌。[在TextSearchServlet](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/search/java/src/com/google/appengine/demos/search/TextSearchServlet.java)中查看他们的示例

```
 StringTokenizer tokenizer = new StringTokenizer(tagStr, ",");
  while (tokenizer.hasMoreTokens()) {
    docBuilder.addField(Field.newBuilder().setName("tag")
        .setAtom(tokenizer.nextToken()));
  } 
```

因此，例如，您可以查询“nametag”字段，并假设您将名称标记到其中，得到“Mike DaSantos”

```
 Results<ScoredDocument> results = getIndex().search("nametag:San"); 
```

我对这里的成本和配额不是很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:32:59.993

顺便说一句，您自己的子字符串搜索解决方案不需要 O((n*n+1)/2) 写操作。

你应该只需要1。

即，不是创建 O((n*n+1)/2) 个对象，而是在 ndb.StringProperty(repeated=True) 中创建一个具有 O((n*n+1)/2) 个列表元素的对象

# python - Python 3x 的最佳机器学习包？

> ID：11910481
> 
> 赞同：19
> 
> 时间：2012-08-10T23:24:42.400
> 
> 标签：python, python-3.x, machine-learning, scikit-learn

看到 scikit-learn 不支持 Python 3，我很沮丧……是否有任何人可以为 Python 3 推荐的类似包？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T07:12:25.853

如果您在 Windows 上寻找 scikits-learn，则有[3.2 32&64 位的二进制安装程序](http://www.lfd.uci.edu/~gohlke/pythonlibs/#scikit-learn)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-10T23:43:53.637

尝试其中任何一个，python 3都支持

1.  [http://mdp-toolkit.sourceforge.net/](http://mdp-toolkit.sourceforge.net/)

2.  [http://mlpy.sourceforge.net/](http://mlpy.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-08T12:41:33.157

老问题，Python3 现在支持 Scikit-Learn。

# git - 获取jenkins合并到maven的代码的git SHA-1

> ID：11910482
> 
> 赞同：1
> 
> 时间：2012-08-10T23:25:00.900
> 
> 标签：git, jenkins, maven-3, buildnumber-maven-plugin

我正在使用 git 插件的“构建前合并”选项来构建一个 Maven 作业。我尝试在我的 maven pom 中使用 ${GIT_BRANCH} 和 ${GIT_COMMIT} 将提交信息写入我的构建工件，但这些变量设置为正在合并的分支及其提交 SHA-1。

有没有办法可以找到合并代码的 SHA-1 并将其传递给 maven？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:25:48.817

Mojo的[Buildnumber Maven 插件](http://mojo.codehaus.org/buildnumber-maven-plugin/usage.html)可以为您获取此信息。

该项目站点尚未完全更新以反映它与 GIT 一起使用的事实。

```
<build>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>buildnumber-maven-plugin</artifactId>
      <version>1.1</version>
      <executions>
        <execution>
          <phase>validate</phase>
          <goals>
            <goal>create</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <doCheck>true</doCheck>
        <doUpdate>true</doUpdate>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

这会将`${buildNumber}`属性设置为工作区的完整 GIT 哈希。

它还具有确保构建在开发人员机器或 CI 构建服务器上相同的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T11:24:03.843

你也可以试试[maven git commit id 插件](https://github.com/ktoso/maven-git-commit-id-plugin)。它将为您提供来自 Git 的大量信息，它支持精美的格式和许多不同的用例。

[直接链接到文档](https://github.com/ktoso/maven-git-commit-id-plugin#using-the-plugin)。

# ios - 知道模态动画何时完成

> ID：11910483
> 
> 赞同：0
> 
> 时间：2012-08-10T23:25:04.870
> 
> 标签：ios, uitableview, presentmodalviewcontroller

我允许用户使用垂直呈现的模式添加新项目。完成后，模式滑出视图，新项目被添加到列表中。

我希望用户通过插入带有动画的新行（或者选择它）来查看他添加的影响。问题是，如果单元格位于列表的底部，用户不会真正看到动画，因为它发生在仍然消失的模式下。

有没有办法知道这个动画什么时候完成？还是我需要做一些更狡猾/更狡猾的事情*

* 我正在考虑将添加的单元格的引用存储在 iVar 中，然后将其插入到 viewDidAppear 中，直到模态完成转换后才会触发 - 其他想法将不胜感激。

编辑：我的第二个 hacky 想法是将模态解散包装在与解散相同持续时间（0.3？）的动画块中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:25:05.220

你是如何进行模态转换的？如果你使用[`presentViewController`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)而不是`presentModalViewController`，你有一个`completion`块。同样， the[`dismissViewControllerAnimated`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/dismissViewControllerAnimated%3acompletion%3a)也有一个`completion`块（旧的`dismissModalViewControllerAnimated`没有）。这些是在 iOS 5 中引入的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:51:12.663

如果在某些奇怪的情况下，完成块没有让你的船漂浮，那么大多数苹果动画的当前默认动画时间是 0.25f 秒。您可以硬编码延迟并在此之后执行操作，但不建议这样做。它只是一种解决方法。你应该尽可能按照罗伯特和本所说的去做。

# ios - CATextLayer 在 CALayer 之上？

> ID：11910491
> 
> 赞同：2
> 
> 时间：2012-08-10T23:26:01.540
> 
> 标签：ios, calayer, catextlayer

我正在尝试使用 zPosition 将这个 CATextLayer 放在我的 CALayer 之上，但是 CATextLayer 似乎总是在 CALayer 后面？

```
CALayer *sublayer = [CALayer layer];
sublayer.backgroundColor = [UIColor colorWithRed:0/255.0 green:156.0/255.0 blue:222.0/255.0 alpha:1.0].CGColor;
sublayer.shadowOffset = CGSizeMake(0, 3);
sublayer.shadowRadius = 5.0;
sublayer.shadowColor = [UIColor blackColor].CGColor;
sublayer.shadowOpacity = 0.8;
sublayer.frame = CGRectMake(340, 435, 126, 1);
sublayer.zPosition=1;
[self.view.layer addSublayer:sublayer];
CGSize size=CGSizeMake(126, 265);
[self resizeLayer:sublayer to:size];

CATextLayer *label = [[CATextLayer alloc] init];
[label setFont:@"Helvetica-Neue"];
[label setFontSize:56];  
[label setFrame: self.view.frame];
[label setString:@"56"];
[label setAlignmentMode:kCAAlignmentCenter];
[label setForegroundColor:[[UIColor whiteColor] CGColor]];
label.zPosition=99;
[self.view.layer  addSublayer:label]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T18:15:27.167

```
> CATextLayer *label = [[CATextLayer alloc] init];
> [label setFont:@"Helvetica-Neue"];
> [label setFontSize:56];  
> [label setFrame: self.view.frame];
> [label setString:@"56"];
> [label setAlignmentMode:kCAAlignmentCenter];
> [label setForegroundColor:[[UIColor whiteColor] CGColor]];
> label.zPosition=99;
> [self.view.layer  addSublayer:label]; 
```

我会改变：

```
[self.view.layer  addSublayer:label]; 
```

至：

```
[self.view.layer insertSublayer:label Above:sublayer]; 
```

# ios - 更改每个其他单元格的 UItableViewCell 背景颜色

> ID：11910492
> 
> 赞同：3
> 
> 时间：2012-08-10T23:26:04.737
> 
> 标签：ios, uitableview

为了让我的 UITableView 看起来更好，我需要交替更改每个单元格的背景颜色。
由于我没有设法直接更改背景颜色，因此我在单元格的背景中添加了一个 UILabel，然后执行以下操作（在 cellForRowAtIndexPath 方法中）：

```
// Set cell color
if(indexPath.row % 2 == 0){
    UIView *bckView = (UIView *)[cell viewWithTag:100];
    bckView.backgroundColor = [UIColor colorWithRed:226.0/255.0 green:243.0/255.0 blue:1.0 alpha:1.0];
} 
```

第一次显示列表时，它看起来不错（第一个单元格是浅蓝色，第二个是白色，第三个是浅蓝色......）。但是......当我播放并移动列表几次并完成单元格的背景颜色混合时。我很确定这与细胞被重复使用的事实有关，但我不知道如何解决这个问题。任何想法 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T23:32:43.630

您需要`else`设置另一种颜色，因为您无法预测上次为重复使用的单元格设置的颜色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T23:32:53.187

在 if 语句中添加一个 else 部分，在其中将背景颜色设置为另一种颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T00:44:14.353

您将需要一个 else 与您的 if 一起使用，以便以另一种方式设置颜色，否则，最终，您的所有单元格最终都会变成相同的颜色。

此外，如果您只在 if(!cell) 或 if(cell == nil) 代码块中使用该方法，则在显示出列单元格时不会调用它。因此，您需要确保它在每次都被调用的块中。

# python - 通过套接字向其他计算机发送linux命令

> ID：11910494
> 
> 赞同：-1
> 
> 时间：2012-08-10T23:26:17.153
> 
> 标签：python, sockets

我试图通过其套接字发送命令来“控制”另一台 linux 计算机，例如，向`ls`123.222.12.1:5050 发送命令。[*这是我有兴趣实施的一个例子*](http://www.oir.caltech.edu:8080/DETECT/P200_Echelle/echelle_soft_user_manual/DBSP_Scripting.html)

如果我们不使用`sendsockcmd`上面链接中显示的特殊代码（ ），那么在python中是否有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:13:29.107

你应该试试[paramiko](http://www.lag.net/paramiko/)模块，就像这个[问题](https://stackoverflow.com/questions/373639/running-interactive-commands-in-paramiko)一样。

# ember.js - ember-data 中的 Adapter 和 Fixture Adapter 和 REST Adapter 有什么区别？

> ID：11910496
> 
> 赞同：7
> 
> 时间：2012-08-10T23:26:22.537
> 
> 标签：ember.js, ember-data

Adapter 和 Fixture Adapter 和 REST Adapter 有什么区别，什么时候使用它们？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-11T04:41:05.333

当您不（还？）关心与后端通信时使用`DS.FixtureAdapter`（或），但会将您的数据作为“夹具”存储在客户端中。`DS.FixtureAdapter.create()`声明模型后：

```
App.Thing = DS.Model.extend({
  name: DS.attr('string'),
  // ...
}); 
```

您可以定义您的固定装置：

```
App.Thing.FIXTURES = [
  {
    id: 1,
    name: '...',
    // ...
  },
  {
    id: 2,
    name: '...',
    // ...
  },
]; 
```

然后您可以在它们上使用 ember-data 方法（例如`App.Thing.findAll()`等）并对其进行操作，但当然它只会在页面存在的情况下持续存在（即 javascript 环境）。

`DS.RestAdapter`，虽然显然仍在开发中，但可以使用，旨在很好地适应 Rails API，但可能可以修改/扩展以与您正在使用的任何 RESTful API 一起使用。它知道`App.Thing.findAll()`通过调用来`/things`处理，并`App.Thing.find(12)`通过调用来处理`/things/12`。这是一个相对路径，附加到您传入的命名空间参数：

```
App.store = DS.Store.create({
  revision: 4,
  adapter: DS.RestAdapter.create({
    namespace: 'http://what.ever/api/v1'
  })
}); 
```

`DS.Adapter`相当抽象：上述内置适配器的超类。如果两者都不适合您的需求，您可能希望实现自己的：

```
App.adapter = DS.Adapter.create({
  find: function(store, type, id) {
    // ...
    jQuery.get( ... , function(data) {
      store.load(type, id, data);
    });
  },
  createRecord: function(store, type, model) {
    // ...
    jQuery.post( ... , function(data) {
      store.didCreateRecord(model, data);
    });
  },
  // ...
});
App.store = DS.Store.create({
  revision: 4,
  adapter: App.adapter
}); 
```

希望有帮助。有关更多信息，请参阅[https://github.com/emberjs/data](https://github.com/emberjs/data)上的自述文档。

# android - 从一个活动中获取文本并将其设置在另一个活动中

> ID：11910497
> 
> 赞同：1
> 
> 时间：2012-08-10T23:26:23.333
> 
> 标签：android

我看到了很多与我的问题非常相似的问题，但似乎没有任何效果，所以如果之前已经回答过，我深表歉意。

所以我有一个带有计算器的应用程序，它显示你自己卷烟可以节省多少钱。在计算器中，我有一系列用于输入的编辑文本框：您当前为一包香烟支付的金额、您所在州的税款、每天吸烟量、一袋烟草的成本和烟管的成本。点击计算后，它会告诉您当前为预制卷烟支付的费用与自己卷烟的费用。

存在的问题是有许多不同尺寸的烟草袋，所以要解决所有问题，它必须基于 6 盎司袋子。所以我开发的是一个工作表，用来计算你会为正确的金额支付多少。例如，如果我买一个 16 盎司的袋子，计算结果就不会正确，所以工作表会告诉你要为一袋 6 盎司的相同产品支付多少钱。

所以我不知道如何从我的工作表中获取新价格并将其放入计算器活动中。从我读到的 getText 和 setText 在活动之间不起作用。我还看到了 Intent 方法，您在其中 putExtras 从当前活动和 getExtras 在您希望它去的活动上。但我见过的每个例子都涉及开始一项新活动。当我只想获取并基本上复制工作表中的数字时，关闭工作表并将其放入我的计算器活动中。

我非常感谢您能给我的任何信息，因为我几个月来一直在寻找这个答案。好吧，我放弃了一段时间，现在我又回来了。如果您需要我发布代码或任何其他信息，请告诉我。

这是我的计算器。这是我想将新数字放入 editText(perbag) 的地方

```
public class Calculator extends Activity {
     EditText perbag

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.calculator);

    final MediaPlayer lighterFlick = MediaPlayer.create(this,
            R.raw.lighter_sound);

    // worksheet clickable textview
    TextView initiateWorksheet = (TextView)           findViewById(R.id.initiateWorksheet);
    initiateWorksheet.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            startActivity(new Intent("com.trhodes.saveonsmokes.WORKSHEET"));

        }
    }); 
```

这是从计算器活动中打开的工作表活动。因此，第一部分只是在“wsnewprice”中获取我需要的数字。所以在底部我有按钮“wsok”，这是我想要获取工作表的“wsnewprice”的地方，然后关闭工作表并将其放在上述计算器活动的editText“perbag”中。

```
 public class Worksheet extends Activity{

EditText wspriceperbag = null;
EditText wsweight = null;
EditText wsnewprice = null;
Button wscalculate;
Button wsok;
double Wspriceperbag = 0.00D;
double Wsweight = 0.00D;
double Wsnewprice = 0.00D;
double ounce = 6;
public Intent intent;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.worksheet);

    wspriceperbag = (EditText) findViewById(R.id.wspriceperbag);
    wsweight = (EditText) findViewById(R.id.wsweight);
    wsnewprice = (EditText) findViewById(R.id.wsnewprice);
    wscalculate = (Button) findViewById(R.id.wscalculate);
    wsok = (Button) findViewById(R.id.wsok);

    wscalculate.setOnClickListener(new Button.OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {

                Wspriceperbag = Double.parseDouble(wspriceperbag.getText()
                        .toString());
                Wsweight = Double.parseDouble(wsweight.getText()
                        .toString());
            } catch (NumberFormatException nfe) {

            }
            DecimalFormat localDecimalFormat = new DecimalFormat("#0.00");
            Wsnewprice = (Wspriceperbag / Wsweight) * ounce;
            wsnewprice.setText(localDecimalFormat.format(Wsnewprice));

        }

    });

    wsok.setOnClickListener(new Button.OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub

        }

    }); 
```

现在这是我尝试使用的代码，但就像我说的我不想开始一项新活动，我只想去上一个活动。

```
to:

    perbag.setText(getIntent().getExtras().getString("newprice"));

from:

    Intent intent = new Intent(Worksheet.this, Calculator.class);
            intent.putExtra("newprice",wsnewprice.getText().toString());
            startActivity(intent); 
```

如果这令人困惑，我很抱歉，我试图尽可能清楚。

编辑：对于我找到的解决方案

原始活动的新代码

```
 //this is to start the worksheet
        initiateWorksheet.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
Intent i = new Intent(Calculator.this, Worksheet.class);
startActivityForResult(i, 0);

//this is coming back to the original activity and placing the new data..
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK);
        Bundle bundle = data.getExtras();
        String s = bundle.getString("newprice");
        perbag.setText(s); 
```

工作表活动的新代码：

```
//this is getting the new number and putting it into a string
wsok.setOnClickListener(new Button.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent newNumber = new Intent();
            Bundle bundle = new Bundle();
            bundle.putString("newprice", wsnewprice.getText().toString());
            newNumber.putExtras(bundle);
            setResult(RESULT_OK, newNumber);
            finish();

//had to add this because force close when hitting the back button
    @Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    Intent newNumber = new Intent();
    Bundle bundle = new Bundle();
    bundle.putString("newprice", "");
    newNumber.putExtras(bundle);
    setResult(RESULT_OK, newNumber);
    finish(); 
```

感谢您回复的每个人，如果没有你们，我仍然会拔头发。另外，如果有人对在没有最后一行代码的情况下按下后退按钮的强制关闭有任何建议，我会全力以赴。否则很酷，因为它实际上以我想要的方式工作。

* * *

谢谢，特拉维斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:42:53.503

你问如何在活动之间传递数据？要开始一项新活动，您可能会创建一个`Intent`并开始它，

```
Intent i = new Intent(this, OtherActivity.class);
startActivity(i); 
```

如果您想将数据传递给其他活动，只需将其添加到意图中，

```
Intent i = new Intent(this, OtherActivity.class);
i.putExtra("foo", "bar");
startActivity(i); 
```

在接收活动中，

```
Intent i = getIntent(); // get the intent that started me
String foo = i.getStringExtra("foo"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:59:46.517

不确定我的问题是否正确，但是*从*活动传回数据类似于将数据传递*给*活动。您可能会开始您的工作表，[`startActivityForResult`](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)然后在返回 in 后查看返回的结果数据[`onActivityResult`](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)，该数据也包含在中`Intent`。

这是一个强调的例子。

```
public class CalculatorActivity extends Activity {
    /** Some locally unique identifier to recognize where you're coming from. */
    private static final int RECQ_WORKSHEET = 1;

    /**
     * Some event that triggers your worksheet activity.
     */
    public void onWorksheetButtonTouched( final View view ) {
        Intent intent = new Intent( this, WorksheetActivity.class );
        startActivityForResult( intent );
    }

    /**
     * Method which is called when returning from an activity
     * called with startActivityForResult.
     */
    @Override
    public void onActivityResult( int requestCode, int result, Intent data ) {
        if( requestCode == REQC_WORKSHEET ) {
            // We're coming back from the worksheet here, so fetch the returned data.
            final String numberFromWorksheet = data.getStringExtra( WorksheetActivity.EXTRA_NUMBER );
            ...
        }
        ...
    }
} 
```

您的工作表活动将返回其包装到 an 中的数据并将其`Intent`存储在[`setResult`](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29).

```
public class WorksheetActivity extends Activity {
    /**
     * Having accessible extra parameters enumerated in some way
     * makes your life (and the life of your colleagues) easier.
     * I've seen people adding _IN_, _OUT_ or _IO_ to emphasize
     * whether it's an input or output parameter, or both.
     */
    public static final String EXTRA_NUMBER = "number";

    ...

    /**
     * Some event which closes the worksheet activity.
     */
    public void returnFromWorksheetButtonTouched( final View view ) {
        // Fetch the text you want to return.
        final EditText someText = (EditText) findViewById( R.id.someIdOfYourEditText );
        final String value = someText.getText();
        // Put it into an Intent.
        final Intent resultData = new Intent(); // note that we're using the no-args c'tor here
        resultData.putExtra( EXTRA_NUMBER, value );
        // Now finish with this result.
        setResult( RESULT_OK, resultData );
        finish();
    }
} 
```

# hibernate - 中断的休眠逆向工程任务，模糊的错误消息

> ID：11910500
> 
> 赞同：0
> 
> 时间：2012-08-10T23:26:43.357
> 
> 标签：hibernate, reverse-engineering, hibernate-tools

我们有一个项目，它使用独立的 Hibernate Tools Ant 任务来构建 hbm.xml 文件和 POJO。我们只在需要添加或更新 POJO 时才运行 Ant 任务，它有自己的 build.xml 文件，而不是每次构建项目时。

其他人更新了项目，现在 Ant 任务（未更改）无法解析构建文件（也未更改）。我无法知道变化是什么，或者这种变化持续了多长时间，所以我请求社区帮助我诊断它。这是消息：

```
build.xml:34: org.hibernate.HibernateException: Could not parse configuration: src\main\config\hibernate\datawhse.reveng.cfg.xml
        at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1494)
        at org.hibernate.cfg.Configuration.configure(Configuration.java:1462)
        at org.hibernate.tool.ant.ConfigurationTask.doConfiguration(ConfigurationTask.java:96)
        at org.hibernate.tool.ant.JDBCConfigurationTask.doConfiguration(JDBCConfigurationTask.java:50)
        at org.hibernate.tool.ant.ConfigurationTask.getConfiguration(ConfigurationTask.java:55)
        at org.hibernate.tool.ant.HibernateToolTask.getConfiguration(HibernateToolTask.java:302)
        at org.hibernate.tool.ant.HibernateToolTask.getProperties(HibernateToolTask.java:318)
        at org.hibernate.tool.ant.ExporterTask.configureExporter(ExporterTask.java:94)
        at org.hibernate.tool.ant.ExporterTask.execute(ExporterTask.java:39)
        at org.hibernate.tool.ant.HibernateToolTask.execute(HibernateToolTask.java:186)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:392)
        at org.apache.tools.ant.Target.performTasks(Target.java:413)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.Main.runBuild(Main.java:811)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: org.dom4j.DocumentException: Connection refused: connect Nested exception: Connection refused: connect
        at org.dom4j.io.SAXReader.read(SAXReader.java:484)
        at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1484)
        ... 26 more 
```

这是它无法解析的配置文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration
    PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
    <property name="show_sql">false</property>
    <property name="hibernate.connection.pool_size">0</property>
    <property name="connection.url">jdbc:as400://system;libraries=XXX YYY ZZZ;dateformat=iso;timeformat=iso;prompt=false;naming=system;transaction isolation=none</property>
    <property name="connection.driver_class">com.ibm.as400.access.AS400JDBCDriver</property>
    <property name="connection.username">username</property>
    <property name="connection.password">password</property>
    <property name="dialect">org.hibernate.dialect.DB2Dialect</property>
</session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:05:52.890

这似乎是答案：reveng.xml 和 reveng.cfg.xml 文件由我们的一位常驻天才更新，将工作 XML DTD 定义替换为与项目中安装的 Hibernate jar 不匹配的定义。这是适用于 reveng.cfg.xml 文件的文件：

`<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">`

这是适用于 reveng.xml 文件的文件：

`<!DOCTYPE hibernate-reverse-engineering SYSTEM "http://hibernate.sourceforge.net/hibernate-reverse-engineering-3.0.dtd">`

以下是那些被破坏并且不起作用的：

`<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN" "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">`

`<!DOCTYPE hibernate-reverse-engineering SYSTEM "http://www.hibernate.org/dtd/hibernate-reverse-engineering-3.0.dtd">`

这是针对 Hibernate 逆向工程 3.3.1 jar 的。

我希望这对某人有帮助！

# gcc - 为什么 GCC 会生成 mov %eax,%eax ，这是什么意思？

> ID：11910501
> 
> 赞同：33
> 
> 时间：2012-08-10T23:26:44.620
> 
> 标签：gcc, assembly, x86-64

GCC 4.4.3 生成了以下 x86_64 程序集。让我困惑的部分是`mov %eax,%eax`. 将寄存器移动到自身？为什么？

```
 23b6c:       31 c9                   xor    %ecx,%ecx        ; the 0 value for shift
   23b6e:       80 7f 60 00             cmpb   $0x0,0x60(%rdi)  ; is it shifted?
   23b72:       74 03                   je     23b77
   23b74:       8b 4f 64                mov    0x64(%rdi),%ecx  ; is shifted so load shift value to ecx
   23b77:       48 8b 57 38             mov    0x38(%rdi),%rdx  ; map base
   23b7b:       48 03 57 58             add    0x58(%rdi),%rdx  ; plus offset to value
   23b7f:       8b 02                   mov    (%rdx),%eax      ; load map_used value to eax
   23b81:       89 c0                   mov    %eax,%eax        ; then what the heck is this? promotion from uint32 to 64-bit size_t?
   23b83:       48 d3 e0                shl    %cl,%rax         ; shift rax/eax by cl/ecx
   23b86:       c3                      retq 
```

这个函数的 C++ 代码是：

```
 uint32_t shift = used_is_shifted ? shift_ : 0;
    le_uint32_t le_map_used = *used_p();
    size_t map_used = le_map_used;
    return map_used << shift; 
```

An`le_uint32_t`是一个在大端机器上包装字节交换操作的类。在 x86 上它什么也不做。该`used_p()`函数从地图基数 + 偏移量计算一个指针，并返回一个正确类型的指针。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-10T23:43:35.240

在 x86-64 中，32 位指令隐式零扩展：位 32-63 被清除（[以避免错误依赖](https://stackoverflow.com/questions/11177137/why-do-x86-64-instructions-on-32-bit-registers-zero-the-upper-part-of-the-full-6)）。所以有时这就是为什么你会看到奇怪的指令。（[mov %esi, %esi 在 x86-64 上是否为空操作？](https://stackoverflow.com/questions/6654098/is-mov-esi-esi-a-no-op-or-not-on-x86-64)）

但是，在这种情况下，先前的`mov`-load 也是 32 位的，因此高半部分`%rax`已经被清除。`mov %eax, %eax`似乎是多余的，显然只是 GCC 错过了优化。

# php - 使用文本字段对后端管理进行排序的前端菜单

> ID：11910503
> 
> 赞同：0
> 
> 时间：2012-08-10T23:26:57.993
> 
> 标签：php, mysql, sorting, drop-down-menu, menu

我是一名初级 PHP/MySQL 开发人员，需要一些帮助，如何通过后端使用文本字段自定义排序来显示前端菜单项，我想按 1,2,3 之类的数字对页面（菜单标题）进行排序。 ..ETC。在前端。如果我也能从您的回答中理解下拉菜单排序，那就太好了。:D 但无论如何，这是我的后端代码，但它不起作用我认为需要一个我不太了解的数组：

```
<form name="sort_form" method="post" action="" >
<?php while($row = mysql_fetch_assoc($res)) { ?>
<tr>
    <input type="hidden" value="<?php echo $row['id']; ?>" name="id" />
    <td><input type="text" value="<?php echo $row['sort_by']; ?>" name="sort_by" size="2" maxlength="2"/></td>
    <td><?php echo $row['page_title']; ?></td>
</tr>
    <?php } ?>
<tr>
    <td colspan="2" align="center"><input type="submit" name="submit" value="Sort" /></td>
</tr>
</form> 
```

这是执行操作时的代码。

```
<?php
if(isset($_POST['submit']) == "Sort") {

    $id = intval($_POST['id']);
    $sort_by = intval($_POST['sort_by']);

    $query_update = "UPDATE `pages` SET `sort_by`='$sort_by' WHERE `id`='$id'";
    $updated = mysql_query($query_update) or die ("Update failed!");

    echo "Updated Successfuly!";

}
?> 
```

希望你能理解！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:33:31.777

要对列表进行排序，您不能只更新 sort_by 字段。

如果你的表有以下数据

```
id  page_title  sort_by
1   title_1         1
2   title_2         2
3   title_3         3 
```

如果用 sort_by 值 1 更新第 3 行会发生什么？将有两行的 sort_by 值为 1，哪一行先出现？如果您再次使用 sort_by 值 1 更新第 2 行会发生什么... sort_by 字段中可能会出现很多冲突。

但是，有几种方法可以解决这个问题。一种是简单地交换 sort_by 值。因此，当您将第 3 行的 sort_by 值更新为 1 时，您还将检查是否存在任何 1 的 sort_by 值，如果存在，请将它们替换为第 3 行的 sort_by 值。

如果交换不是您要寻找的行为，您可以为 sort_by 字段提供浮点数据类型。在这种情况下，每次您在表中插入或移动某些东西时，它的 sort_by 字段将是它夹在中间的 2 行的平均值。如果您想在第 1 行和第 2 行之间移动第 3 行，您可以将第 3 行的 sort_by 值设置为 1.5。

```
id  page_title  sort_by
1   title_1         1
2   title_2         2
3   title_3         1.5 
```

然后，如果您想将 2 移回 1 和 3 之间，您可以将 2 的 sort_by 值设置为 1.25

```
id  page_title  sort_by
1   title_1         1
2   title_2         1.25
3   title_3         1.5 
```

你可以继续这样做很长时间。但是，由于您正在使用文本字段编辑按字段排序，因此这似乎不是您的正确选择。

我的建议是在你的表中有另一列名为“sort_by_updated_at”。每次更新 sort_by 值时，将 sort_by_updated_at 设置为当前时间。这样，您可以对两列进行排序。您对常规的 sort_by 字段进行排序，但如果有任何冲突，请查看 sort_by_updated_at 字段，并且 sort_by_updated_at 值较低的行将排在所有其他行之前。

# perl - 如何手动唤醒 perl 睡眠功能？

> ID：11910504
> 
> 赞同：1
> 
> 时间：2012-08-10T23:26:58.963
> 
> 标签：perl, sleep, manual

我想知道是否可以手动唤醒已经进入睡眠状态的 perl 脚本。基本上，我在执行某些操作后将脚本设置为休眠一个小时，10 分钟后我意识到我希望它再次运行。

我运行的平台是 linux，带有 tcsh shell。

再次感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T01:33:29.093

在许多系统上，系统调用之类的`sleep`可能会被信号中断。在这样的中断上，`sleep`将返回它实际睡眠的秒数并设置`$!`。当然，您必须使用允许您的脚本继续执行的信号。如果您没有设置任何特定的信号处理程序，则`SIGSTOP`和的组合`SIGCONT`也可以解决问题。

例子：

```
$ perl -e 'print "slept for ", sleep 1000, " seconds.\n";' &
[2] 6220
$ kill -STOP 6220
$ kill -CONT 6220
slept for 8 seconds[2]+  Stopped     perl -e ... 
```

另一个例子（琐碎的`SIGUSR1`处理程序）：

```
$ perl -e '$SIG{USR1}=sub{}; print "slept for ", sleep 1000, "s.\n"' &
[1] 2419
$ kill -USR1 2419
slept for 4s 
```

# amazon-s3 - 需要帮助在 Amazon Web Services 上决定 EBS 还是 S3

> ID：11910509
> 
> 赞同：28
> 
> 时间：2012-08-10T23:27:37.433
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services, amazon

我正在开发一个包含文件存储和共享功能的项目，经过数月研究利用 AWS 的最佳方法后，我仍然有点担心。

基本上我的决定是使用 EBS 存储来存放用户文件还是 S3。当用户想要下载少量文件时，系统将包含即时 zip 归档。此外，当用户下载任何文件时，我不希望文件的 URL 暴露。

我想出的两个最佳选择是：

1.  拥有一个 EC2 实例，该实例安装了多个 EBS 卷来存储用户文件。

    *   优点：它似乎比 S3 快得多，并且从 EBS 卷中压缩文件很简单。
    *   缺点：我相信亚马逊限制了你可以使用多少 EBS 存储，并且没有 S3 那样冗余。
2.  文件上传和处理后，系统会将这些文件推送到 S3 存储桶以进行长期存储。当请求文件时，我将从 S3 检索文件并输出回客户端。

    *   优点：冗余，没有文件存储限制
    *   缺点：看起来很慢，无法将 S3 存储桶作为卷挂载在文件系统中，提供压缩文件意味着将每个文件传输到 EC2 实例，压缩，然后最后发送输出（再次，慢！）

我的任何假设有缺陷吗？谁能想到管理大量文件存储的更好方法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-11T13:39:18.197

如果您的服务将被不确定数量的用户使用，请务必记住，可扩展性始终是一个问题，无论采用何种选项，您都需要扩展服务以满足需求，所以它会方便假设您的服务将在具有 EC2 实例池而不是单个实例的 Auto Scaling 组中运行。

关于保护 URL 只允许授权用户下载文件，有很多方法可以做到这一点，而无需您的服务充当中间人，那么您至少需要处理两个问题：

1.  **文件名可预测性**：为避免 URL 可预测性，您可以将上传的文件命名为哈希并将原始文件名和所有权存储在 SimpleDB 等数据库中，您可以选择设置 http 标头，例如“Content-Disposition: filename=original_file_name.ext " 建议用户浏览器相应地命名下载的文件。

2.  **授权**：当用户要求下载您的服务的给定文件时，使用[查询字符串身份验证](http://docs.amazonwebservices.com/AmazonS3/latest/dev/S3_QSAuth.html)或[临时安全凭证](http://docs.amazonwebservices.com/STS/latest/UsingSTS/Welcome.html)为该特定用户发出临时授权，在一段时间内授予对该文件的读取访问权限，然后您的服务将重定向到 S3 存储桶 URL用于直接下载。这可以大大减轻您的 EC2 池实例的负担，从而可以更快地处理其他请求。

为了减少 S3 存储桶的空间和流量（记住您按存储和传输的 GB 付费），我还建议在上传到 S3 之前使用 gzip 等标准算法压缩每个单独的文件，并设置标题“Content-Encoding: gzip”为了使自动解压缩与用户浏览器一起工作。如果您选择的编程语言是 Java，我建议您查看我创建的插件代码[webcache-s3-maven-plugin](http://github.com/aro1976/aws-parent)，以从 Web 项目上传静态资源。

关于压缩文件夹的处理时间，您经常无法确保文件夹会在短时间内被压缩，以便让用户立即下载它，因为最终可能会有巨大的文件夹可能需要几分钟甚至要压缩几个小时。为此，我建议您使用 SQS 和 SNS 服务以允许**异步压缩处理**，它的工作原理如下：

1.  用户请求文件夹压缩
2.  前端 EC2 实例在 SQS 队列中创建压缩请求
3.  一个后端EC2实例，消费SQS队列的压缩请求
4.  后端实例将文件从 S3 下载到 EBS 驱动器，因为生成的文件将是临时的，我建议选择至少使用带有**临时**类型磁盘的 m1.small 实例，这些磁盘是虚拟机本地的，以减少 I /O 延迟和处理时间。
5.  生成压缩文件后，服​​务将文件上传到 S3 存储桶，可选择设置[对象过期](http://docs.amazonwebservices.com/AmazonS3/latest/dev/ObjectExpiration.html)属性，这将告诉 S3 存储桶在一定时间后自动删除文件（再次降低您的存储成本），并且在 SNS 主题中发布文件已准备好下载的通知。
6.  如果用户仍然在线，请阅读主题的通知，并通知用户压缩文件已准备好下载，如果一段时间后此通知未到达，您可以告诉用户压缩时间比预期的要长一旦文件准备好下载，该服务将通过电子邮件通知他。

在这种情况下，您可以有两个 Auto Scaling 组，分别是前端和后端，它们可能具有不同的可扩展性限制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T14:25:18.497

如果您坚持使用 S3 直接从您的 EC2 实例提供 zip 文件，这将比在本地存储它们更复杂。但是 S3 比任何 EC2 存储卷都更耐用，所以如果文件需要保存很长时间，我还是建议使用它。

您说您不想直接公开文件 URL。如果这只是因为您不希望人们能够为他们添加书签并在将来绕过您的服务身份验证，那么 S3 有一个很好的解决方案：

1 - 将您想要提供的文件（如果您希望这样，可以压缩）存储在私有 S3 存储桶中。

2 - 当用户请求文件时，对请求进行身份验证，然后将有效请求重定向到文件的**签名临时 S3 URL**。有很多不同语言的库可以创建这些 URL。

3 - 用户直接从 S3 下载文件，无需通过您的 EC2 实例。这可以节省您的带宽和时间，并可能为用户提供最快的下载速度。

这确实公开了一个 URL，但这可能没关系。如果用户保存 URL 是没有问题的，因为在你设置的过期时间之后它将无法工作。对于我的服务，我将时间设置为 5 分钟。由于是数字签名的，用户不能在不使签名失效的情况下更改 URL 中的过期时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T00:53:06.243

对于此用例，使用 S3 是更好的选择。它可以更好地扩展，并且会更简单。你为什么担心它很慢？EC2 和 S3 之间的传输非常快速。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-16T09:30:31.590

一些考虑：

1.  EBS 卷成本是 S3 的几倍。
2.  EBS 卷大小限制为 16 TB，因此这应该不是问题。但是，这种大小的卷*非常*昂贵。
3.  确保您的存储桶与您的 EC2 实例位于同一区域。
4.  使用 VPC 终端节点与 S3 通信。这要快得多。
5.  确保您的 EC2 实例类型具有您需要的网络带宽。CPU 和网络速度随着实例大小而上升。

我会将所有内容保留在 S3 上，根据需要下载文件以将它们压缩到一个包中。然后将 zip 上传到 S3 并向用户提供一个 S3 签名 URL，以便从 S3 下载。

您可以允许用户从您的 EC2 实例下载，但很多用户会遇到错误问题、重试问题、带宽慢等。如果 zip 文件很小（小于 100 MB）在本地交付，否则上传到 S3 并让 S3处理用户下载问题。

另一种选择是创建一个 Lambda 函数来创建 zip 文件并存储在 S3 上。现在您不必担心网络带宽或扩展。Lambda 函数可以将您提供给浏览器的 S3 URL 返回给您，或者 Lambda 可以通过电子邮件向客户发送链接。为此请查看 SES。注意：Lambda 文件系统只有 512 MB 的空间，最多可以分配 1.5 GB 的内存。如果您生成的 zip 文件大于此大小，Lambda 将无法工作（此时）。但是，您可以创建多个 zip 文件（part1、part2、...）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-10T00:33:01.067

主要问题是您在哪里托管。由于您说您使用的是 ec2 实例，这意味着您正在利用 AWS，如果您需要扩展，我会选择 EBS，然后选择 EFB。

S3 很棒，但 IMO 它主要用于如果您使用不同的提供商（如 Namecheap 等）托管您的网站，并且只想将 AWS 用于数据库。

我认为可靠性和持久性并不重要，尤其是当您考虑可以备份 Ec2 和 EFB 的快照时。

我会完全根据价格去。看看哪个更便宜。如果存在显着的性能差异（2-5 秒的用户等待时间），我可能会考虑花更多的钱购买更快的。

EFB 是一种扩展方法，可能比 EBS 便宜。我相信亚马逊建议使用 EBS 直到它达到一定大小，然后切换到 EFB。

# perl - perl -MCPAN 前沿

> ID：11910510
> 
> 赞同：-1
> 
> 时间：2012-08-10T23:27:39.947
> 
> 标签：perl, debian, cpan

我有 Debian 6。

我想用 perl 恶魔安装脚本 PHP。我安装 perl 等。

> apt-get install perl build-essential

在demon.pl 我有几行：

> 使用 Frontier::Daemon::Forking；
> 
> 使用地穴::XXTEA；
> 
> 使用 Cfg::Config；块引用使用 Unix::PasswdFile；
> 
> 使用 MIME::Base64；
> 
> 使用文件::查找；
> 
> 使用 File::Slurp；
> 
> 使用 File::Copy::Recursive qw(fcopy rcopy dircopy fmove rmove dirmove pathempty pathrmdir);

我发现，我必须打开：

> perl -MCPAN -e 外壳

并安装

> 安装 Frontier::Daemon::Forking
> 
> 安装地穴::XXTEA
> 
> 安装 Cfg::Config
> 
> 安装 Unix::PasswdFile
> 
> 安装 MIME::Base64
> 
> 安装文件::查找
> 
> 安装文件::Slurp
> 
> 安装文件::复制::递归

没有 Cfg::Config 一切正常，我有错误：

```
 Warning: Cannot install Cfg::Config, don't know what it is.
Try the command

    i /Cfg::Config/

to find objects with matching identifiers.
CPAN: Time::HiRes loaded ok (v1.9719) 
```

最后我尝试运行 demo.pl 但有错误

```
./demon.pl: line 1: use: command not found
: command not found
./demon.pl: line 2: use: command not found
: command not found
./demon.pl: line 3: use: command not found
: command not found
./demon.pl: line 4: use: command not found
: command not found
./demon.pl: line 5: use: command not found
: command not found
./demon.pl: line 6: use: command not found
: command not found
./demon.pl: line 7: use: command not found
: command not found
./demon.pl: line 8: syntax error near unexpected token `('
./demon.pl: line 8: `use File::Copy::Recursive qw(fcopy rcopy dircopy fmove rmov' dirmove pathempty pathrmdir); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:46:09.630

无法从 CPAN 安装 Cfg::Config，因为 CPAN 上没有此类模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:03:57.960

我怀疑该`Cfg::Config`模块来自 CPAN 之外的某个地方。*这可能是demo.pl*应该附带的东西。

您看到的其他错误来自 shell。你这样称呼它：

```
 % ./demon.pl 
```

Shell 尝试将该文件作为程序执行。它看到它是一个文本文件，因此它查看前两个字节以查看它们是否为`#!`. 如果是这样，它将使用之后的路径`#!`作为将处理文本的解释器。这条线被称为“shebang线”。在 Perl 程序中，它通常看起来像：

```
 #!/usr/bin/perl 
```

如果你想让 shell 弄清楚如何处理文件，你只需要那行。您可以指定要使用`perl`：

```
% perl demon.pl 
```

由于您正在尝试确定您的 Perl 程序是否正在运行并具有它需要的所有模块，因此您可以尝试进行语法检查：

```
% perl -c demon.pl 
```

如果你想添加 shebang 行，你应该找到我们的 where your `perl`is：

```
% which perl
/usr/bin/perl 
```

走这条路并构建你的 shebang 并将它放在你的 Perl 程序的顶部：

```
#!/usr/bin/perl
... # rest of program 
```

# php - PHP preg_replace 崩溃。仅适用于正则表达式大师

> ID：11910511
> 
> 赞同：0
> 
> 时间：2012-08-10T23:27:40.223
> 
> 标签：php, regex, recursion, preg-replace, lookahead

你好吗？我会直奔主题。

我正在使用一个**递归正则表达式**，它基本上**删除了单个或嵌套的 <blockquote> tags**。我只需要删除普通的 <blockquote> ... </blockquote> 文本，无论是否嵌套，并留下这些之外的任何内容。

这个正则表达式完全按照我的意愿完成工作（注意使用前瞻和递归）

```
$comment=preg_replace('#<blockquote>((?!(</?blockquote>)).|(?R))*</blockquote>#s',"",$comment); 
```

但它有一个大问题：**当 $comment 很大（超过 3500 个字符长）时，apache 崩溃**（我假设分段错误）。

我需要一个解决问题的方法，但要**解决崩溃**，使用**更好的正则表达式**或**自定义函数**也可以完成这项工作。

如果您只是对如何删除嵌套的特定标签有想法，我们欢迎您。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:38:13.313

伙计，你的模式会像疯了一样出现错误！即使是几百字节的注释也会以崩溃告终。

使用 preg_split() 拆分字符串要简单得多，然后使用计数器来跟踪您的深度。而当深度大于 1 时，您将丢弃文本。这是实现：

```
$tokens = preg_split('#(</?blockquote.*?>)#s', $comment, -1, PREG_SPLIT_DELIM_CAPTURE); 
$outsideTokens = array();
$depth = 0;
for($token = reset($tokens); $token !== false; $token = next($tokens)) { 
    if($depth == 0) {
        $outsideTokens[] = $token;
    }
    $delimiter = next($tokens);
    if($delimiter[1] == '/') {
        $depth--;
    } else {
        $depth++;
    }
}
$comment = implode($outsideTokens); 
```

即使开始标记包含属性，代码也应该可以工作。

# php - 如何使用PHP从目录中删除除一个之外的所有文件？

> ID：11910512
> 
> 赞同：6
> 
> 时间：2012-08-10T23:27:44.760
> 
> 标签：php, delete-file, unlink, removeall

我有一些目录，其中包含一些文件：

```
/test1/123.jpg
/test1/124.jpg
/test1/125.jpg
/test2/123.jpg
/test2/124.jpg 
```

我想删除除`/test1/124.jpg or /test2/124.jpg`?

我知道目录名和文件名。有没有办法在带有 php 的 Linux 环境中做到这一点`unlink`？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-10T23:34:42.127

只需编辑 $dir 和 $leave_files 即可编辑位置和文件。

```
$dir = 'test1';
$leave_files = array('124.jpg', '123.png');

foreach( glob("$dir/*") as $file ) {
    if( !in_array(basename($file), $leave_files) ){
        unlink($file);
    }
} 
```

您将为每个目录运行一次。

如果目标目录与此脚本不在同一个文件夹中，还要记住使 $dir 成为完整路径（没有尾部斜杠）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T23:33:39.120

也许有点粗糙，但如果你在 Linux 系统上，你可以这样做（假设你在正确的目录中）：

```
<?php shell_exec('rm $(ls * | grep -v '.$fileYouWantToKeep.')'); ?> 
```

如果包含任何用户输入，您显然需要过滤该变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T23:31:01.580

8 年前，我写了这个被接受的快速技巧，但请考虑到

*   它依赖于平台：它仅适用于类 unix 系统，因为它依赖于类 unix 路径`rm`以及`mv`删除和移动 shell 命令。
*   它需要 php 配置以允许通过[shell_exec](https://www.php.net/manual/en/function.shell-exec.php)运行系统 shell 命令（除非您知道自己在做什么，否则我不建议这样做）
*   这是对所提出问题的一个临时答案，甚至还不够花哨，无法在文件名数组上使用[foreach](https://www.php.net/manual/en/control-structures.foreach.php)迭代，这可以提供更通用的解决方案。
*   它不执行任何类型的错误捕获，因此您的脚本将在失败时静默继续（同时捕获错误`shell_exec`也不是微不足道的，因为您没有像[exec](https://www.php.net/manual/en/function.exec.php)或[system](https://www.php.net/manual/en/function.system.php)这样的替代方法那样获得退出代码）

但是，它具有在单个 shell 命令中运行所有删除的优点，并且它不需要对每个处理的文件进行额外的排除查找，这使得它在高删除与保留比率下运行得非常快，如果性能是您正在寻找的：

```
 for ($i=1;$i<=2;$i++){
        shell_exec ('mv /test'.$i.'/124.jpg /test'.$i.'/keep.jpg');
        shell_exec ('rm /test'.$i.'/12*.jpg');
        shell_exec ('mv /test'.$i.'/keep.jpg /test'.$i.'/124.jpg');
    } 
```

无论如何，如果您在这里查看其他一些提出基于[取消链接](https://www.php.net/manual/en/function.unlink.php)的解决方案的答案，则在我的之后添加了一些其他答案，这（如下面的评论中所讨论的）是一种更好的方法，我也建议这样做

*   添加错误处理，因为`unlink`当文件正在使用或不允许脚本执行用户修改它时，由于权限问题可能无法删除现有文件。

*   *在运行脚本处理不知情的长文件列表之前，请始终使用* `ini_get('`[max_execution_time](https://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)`');`检查您的脚本执行超时设置（并在必要时考虑使用[set_time_limit为您的脚本扩展它）。](https://www.php.net/manual/en/function.set-time-limit.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T23:42:41.867

这是另一种选择：

```
<?php
$dirList = array('/path/to/dir1','/path/to/dir2'); //List of Dirs with files to be deleted. No trailing slash
$saved = array('path/to/file1','path/to/file2'); //List of files to be saved, no leading slash

foreach($dirList as $directory){
$list = scandir($directory);
foreach($list as $file){
if(!is_int(array_seach($directory.'/'.$file,$saved))){ //Array search returns key if needle exists, so we check if it does not return int
unlink($file);
}
}
}

?> 
```

我现在无法访问我的服务器，所以我没有测试它，但我认为它应该可以工作。先在一些测试目录上尝试一下，看看它是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T05:49:11.537

您可以将文件移动到临时文件夹，然后删除该文件夹，创建一个新的粉丝移动具有旧文件夹名称的文件夹，然后将照片移回，删除 tmp 文件夹。$利润$

# asp.net - 在 ASP.NET 的后台任务中解析 A utofac 组件

> ID：11910514
> 
> 赞同：8
> 
> 时间：2012-08-10T23:28:03.223
> 
> 标签：asp.net, autofac, fire-and-forget

在 ASP.NET 中使用 Autofac 和 ContainerDisposalModule，我如何支持具有需要解决的组件依赖项的触发和忘记调用？我遇到的问题是 ASP.NET 请求在任务运行之前完成并处理了请求的生命周期范围，因此任何需要在新线程中解析的组件都会失败，并显示消息“无法解析实例并且嵌套的生命周期不能从这个 LifetimeScope 创建，因为它已经被释放了”。在 ASP.NET 中使用 Autofac 支持触发和忘记呼叫的最佳方法是什么？我不想延迟执行某些可以在后台线程上完成的任务的请求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-12T13:49:36.443

Alex 发布的答案适用于当前的 Autofac 和 MVC 版本：

*   用于`InstancePerRequest`数据库上下文
*   添加`ILifetimeScope`为依赖项以获取容器
*   `SingleInstance`确保它是根生命周期范围
*   用于`HostingEnvironment.QueueBackgroundWorkItem`在后台*可靠地运行某些东西*
*   用于`MatchingScopeLifetimeTags.RequestLifetimeScopeTag`避免必须知道 autofac 用于 PerRequest 生命周期的标记名

[https://groups.google.com/forum/#!topic/autofac/gJYDDls981A](https://groups.google.com/forum/#!topic/autofac/gJYDDls981A) [https://groups.google.com/forum/#!topic/autofac/yGQWjVbPYGM](https://groups.google.com/forum/#!topic/autofac/yGQWjVbPYGM)

要点：[https ://gist.github.com/janv8000/35e6250c8efc00288d21](https://gist.github.com/janv8000/35e6250c8efc00288d21)

全球.asax.cs：

```
protected void Application_Start() {
  //Other registrations
  builder.RegisterType<ListingService>();
  builder.RegisterType<WebsiteContext>().As<IWebsiteContext>().InstancePerRequest();  //WebsiteContext is a EF DbContext
  builder.RegisterType<AsyncRunner>().As<IAsyncRunner>().SingleInstance();
} 
```

AsyncRunner.cs

```
public interface IAsyncRunner
{
    void Run<T>(Action<T> action);
}

public class AsyncRunner : IAsyncRunner
{
    public ILifetimeScope LifetimeScope { get; set; }

    public AsyncRunner(ILifetimeScope lifetimeScope)
    {
        Guard.NotNull(() => lifetimeScope, lifetimeScope);
        LifetimeScope = lifetimeScope;
    }

    public void Run<T>(Action<T> action)
    {
        HostingEnvironment.QueueBackgroundWorkItem(ct =>
        {
            // Create a nested container which will use the same dependency
            // registrations as set for HTTP request scopes.
            using (var container = LifetimeScope.BeginLifetimeScope(MatchingScopeLifetimeTags.RequestLifetimeScopeTag))
            {
                var service = container.Resolve<T>();
                action(service);
            }
        });
    }
} 
```

控制器

```
public Controller(IAsyncRunner asyncRunner)
{
  Guard.NotNull(() => asyncRunner, asyncRunner);
  AsyncRunner = asyncRunner;
}

public ActionResult Index()
{
  //Snip
  AsyncRunner.Run<ListingService>(listingService => listingService.RenderListing(listingGenerationArguments, Thread.CurrentThread.CurrentCulture));
  //Snip
} 
```

上市服务

```
public class ListingService : IListingService
{
  public ListingService(IWebsiteContext context)
  {
    Guard.NotNull(() => context, context);
    Context = context;
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T14:07:52.200

您需要创建一个独立于请求生命周期范围的新生命周期范围。下面的博客文章显示了如何使用 MVC 执行此操作的示例，但相同的概念可以应用于 WebForms。

[http://aboutcode.net/2010/11/01/start-background-tasks-from-mvc-actions-using-autofac.html](http://aboutcode.net/2010/11/01/start-background-tasks-from-mvc-actions-using-autofac.html)

如果您需要确保在请求完成后确定执行异步工作，那么这不是一个好方法。在这种情况下，我建议在请求期间将消息发布到队列中，以允许单独的进程获取并执行工作。

# sql - SQL Server CE 存在子句性能

> ID：11910519
> 
> 赞同：0
> 
> 时间：2012-08-10T23:29:29.090
> 
> 标签：sql, entity-framework, sql-server-ce

以下查询在针对 SQL Server CE 数据库运行 sql 时运行速度非常慢，我曾希望将其转换为 linq for EF。任何人都可以就此提出建议，我还没有在 SQL Server CE 上创建任何索引。表 2 有 100,000 行。

```
SELECT 
    *
FROM
    Table1 T1a
WHERE
    EXISTS
(
SELECT
    NULL
FROM
    Table2 T2
        JOIN Table1 T1b ON T2.Field1 = T2.Field1
WHERE
    T2.SomeID = 12345 AND
    T1a.SomeString = T1b.SomeString
)
ORDER BY
    T1a.SomeString,
    T1a.AnotherString 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:40:57.677

只考虑给出的信息。

对我`T2.SomeID`来说，从索引开始是最明显的地方。之后，您可能会查看它，`T2.Field1`因为它在连接中使用（并且可能`T1.Field1`取决于 # of rows in `T1`）。下一个可能`T1.SomeString`既是因为它的比较用法，又是因为它被用于排序。

然而，它`T2.SomeID`取决于数据的构成、每个值的基数、表中有多少行、还有多少其他查询。将完成多少更新与查找等等等等。

# c# - 设置 Monogame 窗口位置 (OSX)

> ID：11910524
> 
> 赞同：4
> 
> 时间：2012-08-10T23:30:11.547
> 
> 标签：c#, macos, xna, monogame

如何设置我在 Mac OS X 上的 Monogame 中创建的游戏窗口的位置？我见过[这个](https://stackoverflow.com/questions/9726667/how-can-i-control-where-xna-positions-the-game-window-at-startup)问题，但它不起作用：显然没有窗口的句柄。我想我也许可以用 MonoMac 以某种方式做到这一点......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:52:02.913

您是否在 Game-Class 的构造函数中尝试过这个？

```
public MyGame()
{
this.Window.ClientBounds.Location  = new Point (x,y);    
} 
```

# php - 向 php 提交 HTML 表格行

> ID：11910529
> 
> 赞同：-2
> 
> 时间：2012-08-10T23:30:49.383
> 
> 标签：php, javascript, jquery, mysql, ajax

我需要帮助弄清楚如何将表格行中的数据提交到 PHP 中进行处理。我需要它能够提交多行数据。有任何想法吗？

我[这里](http://jsfiddle.net/djp122/cp6ne/)有一张桌子。我希望能够检查该行并将数据提交给 php 以处理数据。它是一个 HTML 表格。我只想知道如何将变量传递给php，例如数组或其他东西

好吧，伙计们是这样的：

```
$("submit_btn").click(function () {

       $('#diary tbody>tr input:checked').each(function() {
           $.post('process.php', 
                data: "an array",
                success: "data submitted");
       }

}); 
```

我将如何获取数组中的表格行数据以提交它？（答案如下）

好的第 2 部分：

将表格行数据发送到 php.ini

jQuery代码：

```
 rows = JSON.stringify(rows); // submit this using $.post(...)
    alert(rows);
    $.post('classes/process.php', rows, function(data) {
      $('#results').html(data);
    })
        .error(function() { alert("error"); })
    }); 
```

PHP代码：

```
<?php

$rowsArray = json_decode($_POST['rows']);

echo $rowsArray;
?> 
```

错误：

```
Notice: Undefined index: rows in C:\...\classes\process.php on line 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:03:33.590

```
$('#submit_btn').click(function(){
    var rows = [];
    $('#box-table-a tbody tr input[type=checkbox]:checked').each(function(i,v){
        var tds = $(v).parents('tr').children('td');
        rows.push({
            'name': tds.eq(1).find('select').val(),
            'units': tds.eq(2).text(),
            'calories': tds.eq(3).text(),
            'sugar': tds.eq(4).text()
        });
    });
    rows = JSON.stringify(rows); // submit this using $.post(...)
    $.post('classes/process.php', {'rows': rows}, function(data){
        console.log(data);
    });
}); 
```

使用 $.post()提交，然后在服务器端，您可以使用;`rows`转换回数组`json_decode()`

**样本输出：**

[{"name":"Water","units":"1","calories":"2","sugar":"3"},{"name":"Food","units":"4 ","卡路里":"5","糖":"6"}]

**演示：http:**
[//jsfiddle.net/cp6ne/84/](http://jsfiddle.net/cp6ne/84/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T23:37:52.273

您可以使用 jQuery 库向 PHP 脚本发出 AJAX 请求，然后“处理”表中的数据。

您还可以使用 jQuery .each() 函数对多行执行此操作。

# xcode - xCode 4.4“无响应”调试输出

> ID：11910532
> 
> 赞同：1
> 
> 时间：2012-08-10T23:31:08.247
> 
> 标签：xcode, ide

刚刚更新到 xCode 4.4，在模拟器或移动设备上调试应用程序时，xCode 进程始终挂起“无响应”。

我已将问题缩小到在调试窗口中输出接收到的数据事务的异步 Web 请求。这不是过多的输出，大约 500k 的 xml 数据。

其他 http 事务的输出似乎也很差，这些事务的大小要小得多。

我知道这不是应用程序，因为，我可以在模拟器或 iPhone 上本地运行应用程序而没有任何挑战；但是，一旦附加到 xcode ide，问题就会恢复。

...这是xcode ide中用于调试输出的缓冲区大小挑战吗？

谢谢大家，

# visual-c++ - 命令行上的 MSVC 2008 Express

> ID：11910535
> 
> 赞同：0
> 
> 时间：2012-08-10T23:31:48.223
> 
> 标签：visual-c++, compiler-errors, express

我想从 MS Visual C++ Express 2008 的命令行编译一个简单的 test.cpp 文件

我可以看到命令，如果我运行

```
 cl test.cpp 
```

我有错误：LNK1104 无法打开文件'kernel32.lib'。我没有任何使用 GUI 编译文件的问题。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:38:48.390

以下链接的解决方案似乎也可以解决您的问题。

[http://social.msdn.microsoft.com/Forums/is/Vsexpressvc/thread/426d85b4-db84-4c01-a9d4-d3fd025339c0](http://social.msdn.microsoft.com/Forums/is/Vsexpressvc/thread/426d85b4-db84-4c01-a9d4-d3fd025339c0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:16:53.757

你能试试这个吗，我知道它适用于 VS 完整版：

*   打开 Visual Studio 命令提示符
*   输入**devenv /porject myproject.vcproj /Rebuild /ProjectConfig Release**

我希望这在特快版中有效。如果它不适合您，请发表评论。

# ios - iOS/Cocoa：UIAlertView 抛出 EXC_BAD_ACCESS

> ID：11910539
> 
> 赞同：0
> 
> 时间：2012-08-10T23:32:37.607
> 
> 标签：ios, cocoa

似乎是一个令人震惊的微不足道的差异。传递一个非`nil`值 for `otherButtonTitles`to 会`UIAlerView`爆炸。

在职的：

```
UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle:@"Login with your credentials"
                      message:nil
                      delegate:nil
                      cancelButtonTitle:@"Cancel"
                      otherButtonTitles:nil]; 
```

不工作：

```
UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle:@"Login with your credentials"
                      message:nil
                      delegate:nil
                      cancelButtonTitle:@"Cancel"
                      otherButtonTitles:@"OK"]; 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:36:53.600

```
UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle:@"Login with your credentials"
                      message:nil
                      delegate:nil
                      cancelButtonTitle:@"Cancel"
                      otherButtonTitles:@"OK1",@"OK2",nil]; 
```

最后一个参数是一个多参数，应该由 nil 终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:47:49.390

基本上，你应该有这个：

```
UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle:@"Login with your credentials"
                      message:nil
                      delegate:nil
                      cancelButtonTitle:@"Cancel"
                      otherButtonTitles:@"OK", nil]; 
```

它[在此处](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/occ/instm/UIAlertView/initWithTitle%3amessage%3adelegate%3acancelButtonTitle%3aotherButtonTitles%3a)声明“要添加到接收器的附加按钮的标题，以 nil 终止。”

基本上，它是一个多值参数，可以抓取值直到为零。它与数组和列表的工作方式相同。

# ruby-on-rails - 对象上的 link_to 触发方法

> ID：11910541
> 
> 赞同：1
> 
> 时间：2012-08-10T23:32:46.893
> 
> 标签：ruby-on-rails

我在文件中有`link_to`一行代码`html.erb`：

```
<%= link_to "no thanks" %> 
```

我想点击这个链接来触发`:reject`我在这个“treating.rb”模型文件中设置的状态方法：

```
class Treating < ActiveRecord::Base
  attr_accessible :intro, :proposed_date, :proposed_location, :requestee_id, :state

  state_machine :state, :initial => :pending do

    event :reject do
        transition [:pending] => :rejected
    end

    event :reply do
        transition [:pending, :rejected] => :replied
    end

    event :archive do
      transition [:rejected] => :archived
    end
  end
  ...
end 
```

我在我`link_to`的代码行中添加了什么来获得它所指的“治疗”，以使其状态从“待定”变为“拒绝”？我已经尝试过`action =>`，`method =>`但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:44:04.673

您需要一个控制器操作来执行此操作，例如：

```
# ?.html.erb
<%= link_to "no thanks", reject_treating_path(@treating), method: :post %>

# config/routes.rb
resources :treatings do
  member do
    post :reject
  end
end

# app/controllers/treatings.rb
class TreatingsController < ApplicationController
  # POST /treatings/:id/reject
  def reject
    current_user.treatings.find(params[:id]).reject!
    redirect_to treatings_path, notice: "Treating was rejected"
  end
end 
```

我为处理资源添加了一个成员操作，并假设处理属于用户。

# delphi-7 - Indy 发送文件并关闭打开的句柄

> ID：11910544
> 
> 赞同：1
> 
> 时间：2012-08-10T23:33:03.810
> 
> 标签：delphi-7, indy, delphi, indy-9

我使用此代码将文件发送到客户端。

```
procedure TForm1.IdTCPServer1Execute(AThread: TIdPeerThread);
var
 hFile    : THandle;
 FileBuff : array [0..1023] of byte;
 dwRead   : DWORD;
 Recieved : String;
begin
 Recieved := Athread.Connection.ReadLn;
 if Recieved = 'FILE' then begin
   Memo1.Lines.Add('Sending File...');
   hFile := CreateFileW('FILE.bin',
   GENERIC_READ, FILE_SHARE_READ, nil, OPEN_EXISTING, 0, 0);
   if hFile = INVALID_HANDLE_VALUE then exit;
   SetFilePointer(hFile, 0, nil, FILE_BEGIN);
   while true do begin
     ReadFile(hFile, FileBuff[0], 1024, dwRead, nil);
     if dwRead <= 0 then break;
     Athread.Connection.WriteBuffer(FileBuff[0], dwRead);
   end;
   CloseHandle (hFile);
   Athread.Connection.Disconnect;
 end;
end; 
```

这就像一个魅力，但如果客户端在文件发送时断开连接，Indy 会立即终止执行线程，因此文件句柄仍然打开！客户端断开连接后有没有办法关闭文件句柄？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T01:07:01.483

您的代码存在三个问题：

1) 直接访问 TMemo 不是线程安全的，因此会导致死锁和/或崩溃。UI 访问必须仅在主线程的上下文中完成。您可以使用 Indy`TIdSync`或`TIdNotify`类从服务器事件中安全地访问 UI。

2) 就像提到的 RRUZ 一样，您没有保护文件句柄免受异常影响。如果引发异常，例如当客户端断开连接时，您不会关闭文件句柄。

3）您正在使用相对路径打开文件。始终使用绝对路径以确保使用正确的文件。

试试这个：

```
procedure TForm1.IdTCPServer1Execute(AThread: TIdPeerThread); 
var 
 hFile    : THandle; 
 FileBuff : array [0..1023] of byte; 
 dwRead   : DWORD; 
 Recieved : String; 
begin 
  Recieved := Athread.Connection.ReadLn; 
  if Recieved = 'FILE' then begin 
    // I'll leave this as an exercise for you to figure out...
    //Memo1.Lines.Add('Sending File...'); 

    hFile := CreateFile('C:\Path\FILE.bin', GENERIC_READ, FILE_SHARE_READ, nil, OPEN_EXISTING, 0, 0); 
    if hFile = INVALID_HANDLE_VALUE then RaiseLastOSError;
    try
      repeat 
        if not ReadFile(hFile, FileBuff[0], SizeOf(FileBuff), dwRead, nil) then RaiseLastOSError;
        if dwRead = 0 then Break; 
        AThread.Connection.WriteBuffer(FileBuff[0], dwRead);
      until False;
    finally
      CloseHandle(hFile); 
    end;
    AThread.Connection.Disconnect; 
  end; 
end; 
```

或者，您可以将文件名传递给 Indy 并让它为您管理文件：

```
procedure TForm1.IdTCPServer1Execute(AThread: TIdPeerThread); 
var 
 Recieved : String; 
begin 
  Recieved := Athread.Connection.ReadLn; 
  if Recieved = 'FILE' then begin 
    // I'll leave this as an exercise for you to figure out...
    //Memo1.Lines.Add('Sending File...'); 

    AThread.Connection.WriteFile('C:\Path\FILE.bin', True); 
    AThread.Connection.Disconnect; 
  end; 
end; 
```

# c# - 传输数据时使用套接字传输文件但程序（无响应）c#

> ID：11910545
> 
> 赞同：0
> 
> 时间：2012-08-10T23:33:13.193
> 
> 标签：c#, file, sockets, transfer

我尝试键入具有（客户端）和（多客户端服务器）的单个程序来发送和接收文件 **传输完全成功**，但程序（无响应）传输数据并在完成后正常返回

您可以通过以下链接下载项目： [http ://www.mediafire.com/?81gs1zqbsgqldwb](http://www.mediafire.com/?81gs1zqbsgqldwb)

请帮我解决程序传输数据时（无响应）的问题？？？

发送机制：

```
byte[] buffer = new byte[packetSize];
while (sum < length)
{
    if (length - sum > packetSize)
    {
        count = fileStream.Read(buffer, 0, packetSize);
        Send(socket_File, buffer);
    }
    else
    {
        buffer = new byte[length - sum];
        count = fileStream.Read(buffer, 0, length - sum);
        Send(socket_File, buffer);  
    }
    sum = sum + count;
}
fileStream.Close(); 
```

接收机制：

```
string path = Save_File.FileName;
FileInfo fi = new FileInfo(path);
FileStream fs = fi.OpenWrite();
byte[] buffer = new byte[packetSize];

while (sum < File_Size)
{
    if (File_Size - sum > packetSize)
    {
        count = Socket_File_Client.Receive(buffer, 0, packetSize, 0);
        fs.Write(buffer, 0, count);
    }
    else
    {
        buffer = new byte[File_Size - sum];
        count = Socket_File_Client.Receive(buffer, 0, File_Size - sum, 0);
        fs.Write(buffer, 0, count);
    }
    sum = sum + count;
}
fs.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:39:39.957

代码中的常规 IO 阻塞。这意味着正在执行您的代码的线程将不得不等到传输完成。如果此线程是您程序中的主线程，那么它将导致您的程序在完成之前对用户输入无响应（“无响应”）。

在阻塞 IO 时，您有两种方法可以使程序响应：

*   使用异步 IO
*   在另一个线程中运行您的传输

我认为在您的情况下，第二种选择可能更容易。

只需使用 ThreadPool.QueueUserWorkItem 或 BackgroundWorker。有关解释和详细信息，请参阅[本文。](http://www.dotnetperls.com/threadpool)

# windows - 在 Windows 上跨共享驱动器进行统一

> ID：11910547
> 
> 赞同：2
> 
> 时间：2012-08-10T23:33:25.667
> 
> 标签：windows, cmd, unison

我在 \192.168.1.110 有一个共享驱动器 我的 unison 设置为从

```
C:\mydata 
to
\\192.168.1.110\mydata 
```

我可以访问 \192.168.1.110\mydata 但是当我尝试从命令提示符统一告诉我“登录失败：未知用户名或密码错误。”时，它没有我在资源管理器窗口中指定的身份验证信息。我该如何指定它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T23:56:38.047

只需右键单击桌面上的“我的电脑”（或 Windows 7 中的“计算机”）图标并选择“连接到网络驱动器”或“映射网络驱动器”，或单击“开始->计算机->映射网络驱动器”或按 ALT 键并在任何资源管理器窗口中单击“工具->映射网络驱动器”，然后键入`\\192.168.1.110\mydata`并分配一个未使用的驱动器号，例如`Z:`.

现在您已经安装了一个虚拟驱动器，它可以像 Windows 中的任何其他驱动器一样工作，因此您不必担心登录和网络问题。只需将您的程序设置为复制自或您分配给网络驱动器的任何字母`C:\mydata`。`Z:\`

# freebase - 在谷歌细化中获取网址时如何处理大型数据集？

> ID：11910553
> 
> 赞同：1
> 
> 时间：2012-08-10T23:34:15.270
> 
> 标签：freebase, google-refine

所以，我有一个 excel 表，其中包含来自 freebase 的大约 190000 个电影名称，我想通过按标题获取 url 从维基百科获取信息，这需要很长时间，我让我的电脑运行了 8 个小时，它刚刚得到到 2%。有时我的互联网被切断了，我不得不从头开始。无论如何，我是否可以一次执行 100 条记录并一直持续到文件末尾，这样如果我的互联网中断，我可以恢复该过程。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:14:51.103

大约 20 万次获取可能是您应该开始使用 Freebase 或 Wikipedia 批量转储的地方。默认的 Refine fetch rate 间隔为 5000 毫秒（即 5 秒），这比大多数 Web 服务所需的时间要长得多。您可能可以将其降低到 500 毫秒或更短。

你不需要从你的个人电脑上运行东西。您可以使用 Amazon 的 EC2 或其他具有永久连接性和设计正常运行时间的服务。

遗憾的是，Refine 的“通过获取 URL 添加列”操作目前无法重新启动，因此您需要确保可以完成它。如果您不能保证正常运行时间/连接性，您唯一的其他解决方案是 a) 以较小的块执行操作或 b) 使用不同的工具。

# objective-c - 离开视图后无法使用 AVAudio Player 播放 AVAudioRecording

> ID：11910554
> 
> 赞同：0
> 
> 时间：2012-08-10T23:34:16.550
> 
> 标签：objective-c, ios5, avaudioplayer, avaudiorecorder

我正在尝试创建一个应用程序，允许某人在 iOS5 中永久录制和保存他们的声音。然后可以随时播放该录音。只要用户停留在记录和播放音频的视图上，我的代码就可以工作，但是当我离开视图时，回到它并尝试播放音频，我收到此错误：

错误：操作无法完成。（OSStatus 错误 -50。）

显然，离开视图会导致保存在 Documents 文件夹中的文件无法正常工作？有人对我如何解决这个问题有解决方案或答案吗？

我录制和播放音频的代码如下：

```
- (IBAction)playSound:(id)sender {

    if (!self.audioRecorder.recording)
    {
        NSError *error;

        if (self.audioPlayer)
            self.audioPlayer = nil;

        self.audioPlayer = [[AVAudioPlayer alloc] 
                       initWithContentsOfURL:self.audioRecorder.url                                    
                       error:&error];

        self.audioPlayer.delegate = self;
        [self.audioPlayer prepareToPlay];

        if (error)
            NSLog(@"Error: %@", 
                  [error localizedDescription]);
        else
            [self.audioPlayer play];
    }

}

- (IBAction)recordSound:(id)sender {

    if(!self.audioRecorder.recording)
    {

        self.dirPaths = NSSearchPathForDirectoriesInDomains(
                                                       NSDocumentDirectory, NSUserDomainMask, YES);
        self.docsDir = [self.dirPaths objectAtIndex:0];
        self.soundFilePath = [self.docsDir
                                   stringByAppendingPathComponent:@"sound.caf"];

        self.soundFileURL = [NSURL fileURLWithPath:self.soundFilePath];

        self.recordSettings = [NSDictionary 
                                        dictionaryWithObjectsAndKeys:
                                        [NSNumber numberWithInt:AVAudioQualityMin],
                                        AVEncoderAudioQualityKey,
                                        [NSNumber numberWithInt:16], 
                                        AVEncoderBitRateKey,
                                        [NSNumber numberWithInt: 2], 
                                        AVNumberOfChannelsKey,
                                        [NSNumber numberWithFloat:44100.0], 
                                        AVSampleRateKey,
                                        nil];

        NSError *error = nil;

        self.audioRecorder = [[AVAudioRecorder alloc]
                              initWithURL:self.soundFileURL
                              settings:self.recordSettings
                              error:&error];

        if (error)
        {
            NSLog(@"error: %@", [error localizedDescription]);
        } else {
            [self.audioRecorder prepareToRecord];
        }

        [self.audioRecorder record];
        [self.audioRecorder recordForDuration:(NSTimeInterval) 5];
        [self.record setTitle:@"Stop" forState: UIControlStateNormal];
    }
    else if (self.audioRecorder.recording)
    {
        [self.audioRecorder stop];
        [self.record setTitle:@"Record" forState: UIControlStateNormal];

    } 
    else if (self.audioPlayer.playing) {
        [self.audioPlayer stop];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:52:51.077

我猜这是因为当你记录文件时，你指定了一个文件名，并且 url 保存在`self.audioRecorder.url`属性中。

一旦离开视图，`AVAudioPlayer`对象就会从内存中释放出来`self.audioPlayer`。`self.audioRecorder`

当你回来时，试图用`self.audioRecorder.url`它并不真正存在的属性来初始化它，因此用 nil 初始化。

尝试从这里改变你的 alloc 和 init ：

```
self.audioPlayer = [[AVAudioPlayer alloc] 
                   initWithContentsOfURL:self.audioRecorder.url                                    
                   error:&error]; 
```

对此：

```
 self.dirPaths = NSSearchPathForDirectoriesInDomains(
                                                   NSDocumentDirectory, NSUserDomainMask, YES);
    self.docsDir = [self.dirPaths objectAtIndex:0];
    self.soundFilePath = [self.docsDir
                               stringByAppendingPathComponent:@"sound.caf"];

    self.soundFileURL = [NSURL fileURLWithPath:self.soundFilePath];
    self.audioPlayer = [[AVAudioPlayer alloc] 
               initWithContentsOfURL:self.soundFileURL                                    
               error:&error]; 
```

或者类似的东西，只要你用存储在文件系统中的文件初始化播放器。不是来自存储在内存中的对象

# c++ - 为什么模板函数不能将指向派生类的指针解析为指向基类的指针

> ID：11910558
> 
> 赞同：2
> 
> 时间：2012-08-10T23:35:23.523
> 
> 标签：c++, templates, inheritance, pointers, template-function

**编译器是否无法在编译时获取指向派生类的指针并知道它有一个基类？**根据以下测试，它似乎不能。有关问题发生的位置，请参阅我最后的评论。

**我怎样才能让它工作？**

```
std::string nonSpecStr = "non specialized func";
std::string const specStr = "specialized func";
std::string const nonTemplateStr = "non template func";

class Base {};
class Derived : public Base {};
class OtherClass {};

template <typename T> std::string func(T * i_obj)
{ return nonSpecStr; }

template <> std::string func<Base>(Base * i_obj)
{ return specStr; }

std::string func(Base * i_obj)
{ return nonTemplateStr; }

class TemplateFunctionResolutionTest
{
public:
    void run()
    {
        // Function resolution order
        // 1\. non-template functions
        // 2\. specialized template functions
        // 3\. template functions
        Base * base = new Base;
        assert(nonTemplateStr == func(base));

        Base * derived = new Derived;
        assert(nonTemplateStr == func(derived));

        OtherClass * otherClass = new OtherClass;
        assert(nonSpecStr == func(otherClass));

        // Why doesn't this resolve to the non-template function?
        Derived * derivedD = new Derived;
        assert(nonSpecStr == func(derivedD));
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:46:29.867

```
Derived * derivedD = new Derived;
assert(nonSpecStr == func(derivedD)); 
```

这不会像您期望的那样解析为非模板函数，因为要做到这一点，必须执行从`Derived *`to的转换；`Base *`但是模板版本不需要这种转换，这导致后者在重载解析期间更好地匹配。

要强制模板函数不匹配两者`Base`，`Derived`您可以使用 SFINAE 拒绝这两种类型。

```
#include <string>
#include <iostream>
#include <type_traits>
#include <memory>

class Base {};
class Derived : public Base {};
class OtherClass {};

template <typename T> 
typename std::enable_if<
    !std::is_base_of<Base,T>::value,std::string
  >::type
  func(T *)
{ return "template function"; }

std::string func(Base *)
{ return "non template function"; }

int main()
{
  std::unique_ptr<Base> p1( new Base );
  std::cout << func(p1.get()) << std::endl;

  std::unique_ptr<Derived> p2( new Derived );
  std::cout << func(p2.get()) << std::endl;

  std::unique_ptr<Base> p3( new Derived );
  std::cout << func(p3.get()) << std::endl;

  std::unique_ptr<OtherClass> p4( new OtherClass );
  std::cout << func(p4.get()) << std::endl;
} 
```

输出：

```
non template function
non template function
non template function
template function 
```

# javascript - switch(!0) 是什么意思

> ID：11910569
> 
> 赞同：5
> 
> 时间：2012-08-10T23:37:44.647
> 
> 标签：javascript, jquery, jstree

我看到一段代码让我觉得很奇怪。javascript中的switch（！0）是什么意思？在哪些情况下可以使用这种技术？

jsTree 在一些地方使用它，但它看起来很陌生。我敢肯定它背后有一个很好的理由，但无法弄清楚。

[http://www.jstree.com/](http://www.jstree.com/)

这是一段代码：

```
switch(!0) {
    case (!s.data && !s.ajax): throw "Neither data nor ajax settings supplied.";
    case ($.isFunction(s.data)): //...
                                 break;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T23:39:07.443

它将每个案例与`boolean true`.

*阐述*

```
case (!s.data && !s.ajax) 
```

如果`!s.data && !s.ajax`评估为`true`，则将选择此案例执行。

`switch(true)`是相同的`switch(!0)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T23:53:50.230

A`switch(!0)`与 相同`switch(true)`。

这种模式：

```
switch (true) {
  case (condition): do something; break;
  case (condition): do something; break;
  case (condition): do something; break;
} 
```

工作方式相同：

```
if (condition) {
  do something;
} else if (condition) {
  do something;
} else if (condition) {
  do something;
} 
```

# c# - 如何执行具有依赖关系和调度的任务

> ID：11910570
> 
> 赞同：1
> 
> 时间：2012-08-10T23:37:47.243
> 
> 标签：c#, .net, sql-server, scheduled-tasks, database-backups

我有一个必须安排的任务列表，比如 cron。这是用于 sql server 上的备份。

数据库将以多种组合方式执行 FULL、DIFF、LOGS 备份。

所以：

*   每天早上 8:00 吃饱
*   每小时差
*   每 10 分钟记录一次

但是，我有这个问题：

*   如果服务器在上午 8:15 醒来，则不执行 FULL 任务。
*   如果 FULL 失败，则执行 DIFF & LOG 没有意义
*   如果服务器在周六早上 8:15 醒来，LOG 开始 8:20 启动，那么完整必须等待下周一。
*   如果 LOG 占用太多（上午 9:01 未完成），则 DIFF 在 LOG 尚未完成时开始。我不想那样！

我用quartz.net做这个，但那是切线的-我愿意更改lib，删除它等等-。所以我的主要目标是任务顺序/执行的可靠性。

在顺序代码中，这很容易做到：

*   DO_FULL 那么
*   DO_DIFF 那么
*   DO_LOG

但是，使用调度程序这是不可能的（至少使用石英）。

问题在于时间的管理。当任务被标记为每小时开始时，必须更多的是提示而不是硬规则，因为前一个可能没有完成。此外，做 FULL 是开始循环的必要条件。

我想知道算法必须在这里应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:12:53.143

最简单的解决方案是编写一个 Windows 服务（根据设计，它可以连续运行）。

1.  Windows 服务在 8:00 唤醒其线程 (T0) 之一。
2.  T0 执行必要的验证并在失败时发出警报并中止，否则生成完整备份线程 T1。
3.  只有当所有验证都很好时才会执行 T1，所以只需继续备份。
4.  如果 T1 成功完成，服务将唤醒其差异线程 (T2) 和日志线程 (T3)。
5.  T2 和 T3 检查 T1 的最后一次成功运行。如果 T1 失败，T2 和 T3 也会中止。
6.  T2 每小时执行一次，执行 diff 并休眠。
7.  T3 每 15 分钟执行一次。它必须检查 T2 是否正在运行，如果是，则再次休眠（x 秒）并重试。如果 T2 没有运行 T3，则应履行其职责。
8.  在一天结束的某个预定时间，如果需要，所有线程都应该被重置或中止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:35:05.580

您将需要跟踪执行的任务。例如，要运行 DIFF，必须先执行 FULL。为此，请启动任务并将 FULL 的状态设置为 false。当 FULL 完成其工作时，将状态设置为 true。当 DIFF 有时间运行时，它会检查 FULL 是否准备好（基于 FULL 生成的真或假值）。如果不是，则 DIFF 只是等待，直到 FULL 发送它已完成其工作的信号（真）。LOG 运行也是如此。这是实现顺序行为的一种简单方法。

# python - IOError：[Errno 13] 权限被拒绝 - ftplib

> ID：11910579
> 
> 赞同：2
> 
> 时间：2012-08-10T23:39:18.240
> 
> 标签：python, ftplib

我正在尝试从 ftp 服务器下载文件，但遇到错误权限被拒绝错误。

```
Traceback (most recent call last):
   File "/Users/x34/Documents/Python/ftp_download.py", line 27, in <module>
     download()
   File "/Users/x34/Documents/Python/ftp_download.py", line 21, in download
     with open(filename,'wb') as f:
IOError: [Errno 13] Permission denied: '/p012r018_5dt19900722_z20_30.tif.gz' 
```

手动或使用 filezilla 下载工作正常，但我下面的脚本没有

```
from ftplib import ftp    
ftp = FTP(r'ftp.glcf.umd.edu')
ftp.login()

directory = 'glcf/Landsat/WRS2/p012/r018/p012r018_5dx19900722.TM-GLS1990'
filename = '/p012r018_5dt19900722_z20_30.tif.gz'

ftp.cwd(directory)

with open(filename,'wb') as f:
    ftp.retrbinary('RETR' + filename,f.write)

ftp.close() 
```

另请注意......也许我误读了文档 - [http://docs.python.org/library/ftplib.html](http://docs.python.org/library/ftplib.html)但我不完全理解 ftplib 决定下载文件的位置（默认下载目录？）。是否有其他模块更适合此应用程序？

**更新**

我应该澄清一下，服务器上的文件名前面不包含“/”。我只是补充说，因为它似乎有助于找到正确的文件位置和名称，因为之前的尝试以以下错误 ftplib.error_perm: 500 Unknown command 结束。

文件的完整路径是

```
 ftp.glcf.umd.edu/glcf/Landsat/WRS2/p012/r018/p012r018_5dx19900722.TM-GLS1990/p012r018_5dt19900722_z20_30.tif.gz' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T23:58:53.003

它将您的文件保存在您要求它保存的位置，在`with open(filename,'wb') as f:`您打开文件以保存接收到的内容的行中。

而且，由于您的文件名以 a 开头`/`，它会尝试保存到`/`文件系统的根目录 ( )，看起来您没有足够的权限。

试试这个：

```
from ftplib import ftp    
ftp = FTP(r'ftp.glcf.umd.edu')
ftp.login()

directory = 'glcf/Landsat/WRS2/p012/r018/p012r018_5dx19900722.TM-GLS1990'
filename = '/p012r018_5dt19900722_z20_30.tif.gz'

ftp.cwd(directory)

with open(filename[1:],'wb') as f: # slices the string, "cutting" out the "/"
    ftp.retrbinary('RETR ' + filename,f.write)

ftp.close() 
```

请注意，我们更改了要写入文件系统的文件名（行`with open(filename[1:],'wb') as f:`）。如果您不了解切片运算符，请看一下这个[问题。](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)

`'RETR'`此外，您应该在代码中的字符串末尾放置一个空格字符。它应该`'RETR ' + filename`代替`'RETR' + filename`. ' `RETR somefile.txt`' 是对 FTP 服务器的命令，而您正在执行 ' `RETRsomefile.txt`'，从而破坏了带有文件名的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:02:48.417

您在两个地方使用相同的文件名变量，我假设根“/”对您的 ftp 有效，但显然是本地权限问题。

尝试在 ftp 命令中使用“/”，但在您打开的本地文件中不使用“/”

# jquery - 整个 div 上的 jQuery onClick 事件，除了特定的 span 元素

> ID：11910581
> 
> 赞同：1
> 
> 时间：2012-08-10T23:39:48.007
> 
> 标签：jquery, onclick, z-index

```
<div class="hidden" id="build_blankrow">
    <span class="track_title"></span>
    <span class="track_time"></span>
    <span class="track_artist"></span>
    <span class="track_album"></span>
    <span class="track_number"></span>
    <span class="track_options">
        <span class="track_options_download"></span>
        <span class="track_options_addtoplaylist"></span>
        <span class="track_options_playnow"></span>
    </span>
</div> 
```

这是一个隐藏的 DOM 元素，用于呈现搜索结果页面 (AJAX)。在更新并填写有效信息后，我克隆（true）上述元素并将其附加到页面。问题源于“track_options”类中的元素应该以其他方式运行。我在 StackOverflow 上看到其他问题，它们通过阻止默认操作（将在本文末尾链接）完全删除行为，但我想删除从父级继承的 onClick 事件并添加特定于每个元素的操作。

StackOverflow 还是新手，所以请随时提出您认为有益的任何问题。

谢谢大家，即使是正确方向的指针！

[使用 onclick 事件取消绑定 div 内“a”的 onclick 事件](https://stackoverflow.com/questions/5660751/unbind-onclick-event-for-a-inside-a-div-with-onclick-event)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T23:47:27.823

您可以做的是为该 div 内的所有跨度指定一个单击函数，以阻止单击事件传播。我还没有测试过这段代码，但它看起来像这样：

```
$('#build_blankrow').click(function(ev) {
   // .....
});
$('#build_blankrow > span').click(function(ev) {
     ev.stopPropagation() // this ensures that the event won't bubble up to your div
    // put in your own code here
}); 
```

查看[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:46:03.933

你的任务有点令人困惑，但我会尝试对实现目标的众多方法中的几个进行完整的分解。

*   第一的

如果您尝试为未由特定子级触发的父级 Div 创建单击，则可以简单地使用[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)，如下所示：

```
// Noticed I did not use an ID call here for your parent div, the reason is simple,
// You stated you use it like a "template" and clone it, or at least parts from it, thus it might 
// (depending on how you use it) have multiple positions in your document, thus, one set ID just 
// will not do.  So I pretended as if you had already added a similar named class to the parent
// div, thus calling forth this click function on ALL div's containing said class
$(".build_blankrow")
    //  This call to .live will ensure you can call the click function dynamically 
    //  on "future" created divs containing the same class name
    .live("click", function(e) { /* do work */ })
    //  This is called "chaining" in jquery
    //  Our .live click func returns the originally called '$(".build_blankrow")'
    //  ALSO: in NEWER jQuery, .live is replaced with .on
    //  Thus we dont need to make a new call just to get to its childrean
    //  .find will allow us to search the children for exactly what we need
    //  in this case we're grabbing the span with the class 'track_options'
    //  and setting its click func (this will effect its children) to stop propagation to parents
    .find(".track_options")
    .live("click", function(e) { e.stopPropagation(); }); 
```

*   第二

您可能不希望 track_options 的所有孩子都使用 stop 道具，因此您使用[.filter()](http://api.jquery.com/filter/)。这个方便的 jQuery 函数将允许您在您选择的 track_options 的内部元素上停止 prop。请参见下面的示例：

```
//  You will notice not much change at start
$(".build_blankrow")
    .live("click", function(e) { /* do work */ })
    .find(".track_options span")
    //  Here comes the change, gota love .filter
    //  Here I will get only the children elements for download and play now
    .filter(".track_options_download, .track_options_playnow")
    //  KEEP IN MIND, if your using NEWEST jQuery, then replace .live with .on
    // like so: .on("click", funct.....
    .on("click", function(e) { e.stopPropagation(); console.log("WHAT"); }); 
```

*   第三

您可以利用 jQuery 中的 CSS 选择器来想出巧妙的方法来根据需要访问每个元素。就像是：

```
$(".build_blankrow")
    .on("click", function(e) { /* do work */ })
    //  Here I use simple CSS to filter out the autoplaylist child
    .find(".track_options span:not(.track_options_addtoplaylist)")
    .on("click", function(e) { e.stopPropagation(); }); 
```

之前代码中使用的重要 jQuery 链接：

1.  [。居住（）](http://api.jquery.com/live/)
2.  [。在（）](http://api.jquery.com/on/)
3.  [。点击（）](http://api.jquery.com/click/)
4.  [。寻找（）](http://api.jquery.com/find/)
5.  [。筛选（）](http://api.jquery.com/filter/)
6.  [.stopPropagation()](http://api.jquery.com/event.stopPropagation/)
7.  [jQuery 选择器](http://api.jquery.com/category/selectors/)

其他可能感兴趣的东西（我会举个例子，除了我必须和一个不想吃饭的 4 岁孩子打交道！grrr）是[.andSelf()](http://api.jquery.com/andSelf/)。它将允许调用获取 track_options 及其 1 或 2 个子项，如下所示：`$(".track_options).find("span:not(.track_options_addtoplaylist)").andSelf();`

# python - sqlite3 只写入浮点 numpy 数组而不是整数数组

> ID：11910584
> 
> 赞同：4
> 
> 时间：2012-08-10T23:40:39.480
> 
> 标签：python, sqlite, numpy

我可以将带有浮点数的 Numpy 数组保存到 sqlite3，但不能保存带有整数的数组：

```
import sqlite3
import numpy as np

db = sqlite3.connect('database.db')
database = db.cursor()

database.execute("CREATE TABLE table_name " 
     "(round INT, id INT, PRIMARY   KEY(round, id))")

row_to_write = np.array([1])
dtype = str(row_to_write.dtype)
if dtype.startswith('float'):
    database.execute("ALTER TABLE table_name ADD data FLOAT;")
elif dtype.startswith('int'):
    database.execute("ALTER TABLE table_name ADD data INTEGER;")

insert_str = "INSERT INTO table_name (round, id, data) VALUES (0, 0, ?);"
database.execute(insert_str, row_to_write) 
```

结果是：

```
InterfaceError: Error binding parameter 0 - probably unsupported type. 
```

如果我分配一个**浮点数组**而不是它的**工作原理** `row_to_write = np.array([1.1])`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T02:34:47.583

Numpy 正在使用一些自定义整数数据类型来有效地将数据打包到内存中。由于 sqlite 不熟悉这些类型，因此您必须事先告诉它如何处理它们：

```
>>> for t in (np.int8, np.int16, np.int32, np.int64,
...           np.uint8, np.uint16, np.uint32, np.uint64):
...     sqlite3.register_adapter(t, long)
... 
>>> cur.execute("insert into foo(bar) values(?)", np.array([1]))
<sqlite3.Cursor object at 0x027A7620> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T02:49:06.027

您可以`tolist`在使用值之前调用数组：

```
>>> import numpy as np
>>> x = np.array([1,2,3])
>>> type(x[0])
<type 'numpy.int64'>
>>> y = x.tolist()
>>> y
[1, 2, 3]
>>> type(y[0])
<type 'int'> 
```

# php - 上传多张图片时只创建一次缩略图 CodeIgniter

> ID：11910585
> 
> 赞同：0
> 
> 时间：2012-08-10T23:40:45.830
> 
> 标签：php, codeigniter, image-uploading

这是代码：

```
for ($i=0; $i<$total_count_of_files; $i++)
                {
                    $_FILES['userfile']['name'] = $_FILES['pics']['name'][$i];
                    $_FILES['userfile']['type'] = $_FILES['pics']['type'][$i];
                    $_FILES['userfile']['tmp_name'] = $_FILES['pics']['tmp_name'][$i];
                    $_FILES['userfile']['error'] = $_FILES['pics']['error'][$i];
                    $_FILES['userfile']['size'] = $_FILES['pics']['size'][$i];

                    $config['upload_path'] = './uploads/gallery/';
                    $config['allowed_types'] = 'jpg|jpeg|gif|png';
                    $config['max_size'] = '0';
                    $config['encrypt_name'] = TRUE;

                    $this->upload->initialize($config);

                    if($this->upload->do_upload())
                    {
                        $pic = $this->upload->data();

                        // Thumbnail
                        $config1['image_library'] = 'gd2';
                        $config1['source_image'] = $pic['full_path'];
                        $config1['create_thumb'] = TRUE;
                        $config1['maintain_ratio'] = FALSE;
                        $config1['width'] = 180;
                        $config1['height'] = 113;

                        $this->load->library('image_lib', $config1);
                        $this->image_lib->resize();
                        // Thumbnail ends

                        $count_imgs += 1;
                        $this->galleries_model->add_image($pic['file_name'], $pic['image_width'], $pic['image_height'], $gallery_id);
                    }
                } 
```

该代码工作正常，只是缩略图创建有一个问题，它只制作一个拇指（上传的第一个图像）然后不创建（但继续上传其他原始图像）。可能是什么问题呢？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:19:11.533

我认为您必须在每次创建图像后清除图像库类。

```
$this->image_lib->resize();
$this->image_lib->clear(); 
```

# r - 将引导程序输出写入文件

> ID：11910590
> 
> 赞同：3
> 
> 时间：2012-08-10T23:41:26.837
> 
> 标签：r, statistics-bootstrap

我是 R 新手，正在尝试对大型频率数据文件的标准误差进行一些引导估计。我的引导程序在单个数据点上工作正常，但我不知道如何保存输出。理想情况下，我只想将标准错误写入新文件。

这是我迄今为止尝试过的：

```
x = c(1,2,3,4,5,6,7,8,9,10)
samplemean = function(x, d){return(mean(x[d]))}
b = boot(x, samplemean, R=1000)
b
ORDINARY NONPARAMETRIC BOOTSTRAP

Call:
boot(data = x, statistic = samplemean, R = 1000)

Bootstrap Statistics :
    original  bias    std. error
t1*      5.5 -0.0356   0.9145759 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:10:59.547

`t`您可以使用对象中的（复制）槽计算标准错误`boot`。

```
require(boot)

x <- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)

samplemean <- function(x, d) {return(mean(x[d]))}

set.seed(123)
b <- boot(x,samplemean,R=1000)
b
## Bootstrap Statistics :
##     original  bias    std. error
## t1*      5.5 -0.0232     0.90887

## str(b) first...
apply(b$t, 2, sd)
##[1] 0.90887 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:37:58.490

boot:::print.boot 函数使用这个表达式来计算它为普通引导程序报告的“std.error”：

```
sqrt(apply(t, 2L, function(t.st) var(t.st[!is.na(t.st)]))) 
```

如果要将其写入文件，则可以传递`b$t`给它并使用`cat`：

```
cat( sqrt(apply(b$t, 2L, function(t.st) var(t.st[!is.na(t.st)]))), file="seboot.txt") 
```

（沿着这些线在函数中进行了一些早期处理，取出了 NA 值）：

```
t <- matrix(boot.out$t[, index], nrow = nrow(boot.out$t))
allNA <- apply(t, 2L, function(t) all(is.na(t)))
t <- matrix(t[, !allNA], nrow = nrow(t)) 
```

# django - Django 自定义管理命令：AttributeError: 'module' object has no attribute 'Command'

> ID：11910591
> 
> 赞同：18
> 
> 时间：2012-08-10T23:41:27.313
> 
> 标签：django

我正在尝试制作一个自定义管理命令，如下面的文档所示：[https ://docs.djangoproject.com/en/dev/howto/custom-management-commands/](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)

当我尝试从我的项目目录运行命令时，我遇到以下错误：

```
AttributeError: 'module' object has no attribute 'Command' 
```

这是文件：

```
#event_expiration.py
from django.core.management.base import BaseCommand, CommandError
from app.models import Event
import datetime

class Command(BaseCommand):
    help = 'deletes expired events'

    def handle(self, *args, **options):

        today = datetime.datetime.now()
        events = Event.objects.filter(date=datetime.date(2011,11,11))

        for e in events:
            e.delete()

        self.stdout.write('Expired events successfully deleted.') 
```

我正在运行的命令是：

```
$ python manage.py event_expiration 
```

我已确保在管理和命令文件夹中添加 event_expiration.py 文件，并且这些文件夹具有 init 文件。这些在我的一个应用程序文件夹中。

我在这里忽略了什么吗？任何帮助表示赞赏，谢谢！

编辑：

SO用户Yuji帮助我尝试调试一下，但我们仍然很难过。这是我们所做的：

首先，完整的回溯和命令：

```
(venv)matt@inspirion14z:~/Dropbox/PROD/ersvp.it$ python manage.py event_expiration
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/matt/Dropbox/PROD/ersvp.it/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/matt/Dropbox/PROD/ersvp.it/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/matt/Dropbox/PROD/ersvp.it/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/home/matt/Dropbox/PROD/ersvp.it/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 70, in load_command_class
    return module.Command()
AttributeError: 'module' object has no attribute 'Command' 
```

要查看 django/core/management/ **init** .py" 的第 70 行发生了什么，我将 import pdb; pdb.set_trace() 放在文件中。

在调试模式下，我们尝试：

```
module.__file__ 
```

检查模块是否在预期的位置，并且确实如此，输出为：

```
'/home/matt/Dropbox/PROD/ersvp.it/app/management/commands/event_expiration.pyc' 
```

接下来，我们尝试在 shell 中手动导入 Command：

```
>>> from app.management.commands.event_expiration import Command 
Traceback (most recent call last):   File "<console>", line 1, in <module> ImportError: cannot import name Command 
```

还在挠头！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-07-17T13:53:12.970

我遇到了同样的问题，问题是我的命令类没有被调用`Command`，正如文档所说的那样。例子：

```
class Command(NoArgsCommand):
    # Do something here 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T01:46:27.913

你的文件结构是什么样的？它应该是这样的：

```
app/
    __init__.py
    management/
        __init__.py
        commands/
            __init__.py
            event_expiration.py 
```

如果结构如上，请尝试以下操作：

```
python manage.py shell
>>> from app.management.commands import event_expiration
>>> dir(event_expiration)
['Account', 'BaseCommand', 'Callback', 'Command', 'CommandError', 'Comment', 'Status', 'User', '__builtins__', '__doc__', '__file__', '__name__', '__package__', 'clean_phone_number', 'csv', 'models', 'os', 're'] 
```

我已经列出了`dir`在我自己的管理命令上运行的纯输出。试一试，然后报告模块可用的内容。此时您可能会发现自己遇到错误，这*可能*有助于诊断。我怀疑导入 django 本身存在问题。我猜`python manage.py shell`会失败，这意味着这不是您的命令有问题，而是项目有问题。

编辑2：

`check_expiration`在您的输出中可见的事实`dir`支持我的理论，即文件夹结构在某种程度上有问题。除非您的模块中有专门命名的函数。

请执行以下操作并显示输出：

```
cd /path/to/app/
find . 
```

此外，显示文件的全部内容以及`event_expiration.py`文件的内容`management/commands/__init__.py`。还要小心与制表符混合的空格作为空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-10T01:05:42.050

**直接打印查询集也会导致此错误**。例如，我试图做这样的事情（只是测试，不是真正的用例）：

```
 def handle(self, *args, **options):
       ppl = People.objects.all()
       print(ppl) 
```

**分辨率**：

```
 def handle(self, *args, **options):
       ppl = People.objects.all()
       print(str(ppl)) # Convert queryset to string 
```

**结论**：在 shell 中起作用的不一定在管理命令中起作用。如果有人能指出原因会很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-07T15:27:45.977

我通过导入常规点击模块而不是`djclick`

`my_module/management/commands/run_thing.py`

```
# import click  # causes the error because not setup like djclick is
import djclick as click

@click.command()
@click.option("--thing", required=True, prompt=True)
def command(thing):
    print(f"hi: {thing}" 
```

示例运行：

```
./manage.py run_thing --thing 123
...
hi: 123 
```

# iphone - 如何在 iOS 中将 CFReadStreamRead 设置为超时？

> ID：11910600
> 
> 赞同：0
> 
> 时间：2012-08-10T23:43:41.327
> 
> 标签：iphone, ios, http, network-programming, cfnetwork

我有在 iOS 上使用 CFReadStreamRead 的旧代码，但如果没有/丢失连接，CFReadStreamRead 将永远阻塞。如何将 CFReadStreamRead 设置为超时？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T18:33:55.593

@Michael Wildermuth 是的，打开流并修复它时出错。遇到同样问题的人，下面的代码会有所帮助。

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
CFStreamClientContext dataStreamContext = {0, (__bridge void *)(self), NULL, NULL, NULL};

CFHTTPMessageRef message = CFHTTPMessageCreateRequest(kCFAllocatorDefault, CFSTR("GET"), (__bridge CFURLRef)url, kCFHTTPVersion1_1);

NSString *header;
NSDictionary *requestHeaders = [NSDictionary dictionaryWithObject:@"application/html;charset=UTF-8" forKey:@"Content-Type"];
for (header in requestHeaders) {
    CFHTTPMessageSetHeaderFieldValue(message, (__bridge CFStringRef)header, (__bridge CFStringRef)[requestHeaders objectForKey:header]);
}

CFHTTPMessageSetBody(message, (CFDataRef)(CFSTR("")));

CFReadStreamRef readStream = CFReadStreamCreateForHTTPRequest(kCFAllocatorDefault, message);
CFOptionFlags events = kCFStreamEventHasBytesAvailable | kCFStreamEventErrorOccurred | kCFStreamEventEndEncountered;

if(CFReadStreamSetClient(readStream, events, EvenCallBack, &dataStreamContext)){
    CFReadStreamScheduleWithRunLoop(readStream, CFRunLoopGetCurrent(), kCFRunLoopCommonModes);
}

CFReadStreamOpen(readStream); 
```

而对于回调函数，

```
void EvenCallBack(CFReadStreamRef readStream, CFStreamEventType type, void *clientCallBackInfo){

if(CFReadStreamHasBytesAvailable(readStream))
{
    uint8_t buf[1024];
    unsigned int len = 1024;

    CFIndex numBytesRead = CFReadStreamRead(readStream, buf, len);

    NSMutableData* data = [[NSMutableData alloc] init];
    [data appendBytes:&buf length:numBytesRead];

    NSString *str = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

    NSLog(@"Network read (%d): %@", len, str);
}else {
    return;
}

CFHTTPMessageRef message = (CFHTTPMessageRef)CFReadStreamCopyProperty((CFReadStreamRef)readStream, kCFStreamPropertyHTTPResponseHeader);
if (!message) {
    NSLog(@"No message");
}

} 
```

谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T18:19:51.013

我最终使用了一个自制的超时。代码是这样的：

```
uint64_t start = get_current_time();

while(TRUE) {
     if(CFReadStreamHasBytesAvailable(stream) == TRUE) {
          while ((bytes_read = CFReadStreamRead(stream, buffer, read_size)) > 0) {
               // do work!
          }
          start = get_current_time();
     }
     uint64_t elapsed = get_current_time() - start;
     if(elapsed > timeout) {
          break;
     }
     sleep(10);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T12:25:58.203

while ((bytes_read = CFReadStreamRead(stream, buffer, read_size)) > 0) {
// 工作！
}

我不认为这段代码有什么特别之处。CFReadStreamRead 在内部以类似的方式实现。引用 Apple 的文档：“这个函数会阻塞，直到至少有一个字节可用；它不会阻塞，直到缓冲区被填满。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T21:16:58.593

我设置了一个自定义超时方法：

```
var hasRecievedUpdate = false
var httpStream: CFReadStream?
var handler: ((Data?, URLResponse?, Error?) -> Void)?

func send() {
        let stream = httpStream as Stream
        stream.delegate = self

        stream.schedule(in: RunLoop.current, forMode: RunLoop.Mode.default)
        stream.open()

        hasRecievedUpdate = false

        DispatchQueue.main.asyncAfter(deadline: DispatchTime.now() + self.timeout) {
            if !self.hasRecievedUpdate
            {
                stream.close()
                self.handler?(nil, nil, nil)
            }
        }
}

 func stream(_ aStream: Stream, handle eventCode: Stream.Event) {

        self.hasRecievedUpdate = true
        ...
} 
```

# regex - VBScript 正则表达式

> ID：11910603
> 
> 赞同：1
> 
> 时间：2012-08-10T23:44:21.110
> 
> 标签：regex, vbscript

需要帮助构建一个检查有效计算机名称并仅返回无效字符的 VBScript 正则表达式。字符串只能包含数字、大小写字母和 (-) 符号。它不能以 (-) 开头或结尾，也不能只是数字。

有效（返回不匹配）：

> 电脑
> Computer8
> 8Computer
> Com8电脑电脑 Computer
> -
> 123

无效（返回匹配无效字符）：

> 123-
> 电脑电脑-电脑
> *电脑
> PC& 123

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:55:27.433

据此： http: [//msdn.microsoft.com/en-us/library/ms974570.aspx](http://msdn.microsoft.com/en-us/library/ms974570.aspx) VBScript 有自己的正则表达式语法风格。请注意，NetBIOS 计算机名称的长度限制为 15。

那么应该是 "^\w[\w-]{0,14}$"

RegEx 满足除“是所有数字”之外的所有要求。这可以通过运行第二个正则表达式“^\d+$”来完成。

在代码中：

```
Dim regexValid, regexNumber
Set regexValid = New RegExp
Set regexNumber = New RegExp

regexValid.Global = True
regexValid.IgnoreCase = True
regexNumber.Global = True
regexNumber.IgnoreCase = True

regexValid.Pattern = "^\w[\w\-]{0,14}$"
regexNumber.Pattern = "^\d+$"

Dim inputString
inputString = InputBox("Computer name?")

If regexValid.Test( inputString ) And Not regexNumber.Test( inputString ) Then
    ' It's a valid computer name string
Else
    ' It's invalid
End If 
```

嗯，这是我今年写的第一个 VBScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:05:44.210

我最终切换了有效和无效的回报。我最终还使用了两个不同的 RegEx 字符串。第一个是：

```
 ^[0-9a-zA-Z]{1,}[-]*[0-9a-zA-Z]{1,}$ 
```

这不允许在开头或结尾使用 (-)，并且需要所有数字、字母或 (-)。它还需要一个至少包含两个字符的字符串。

第二个是：

```
"[a-zA-Z]" 
```

这样可以确保至少包含一个字母。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T02:43:09.183

像这样的东西`/^([0-9]|[a-zA-Z]){1,}[a-zA-Z0-9-]+([0-9]|[a-zA-Z]){1,}$/`

# maven - findbugs pmd checkstyle cobertura 的 Maven 声纳插件配置

> ID：11910604
> 
> 赞同：3
> 
> 时间：2012-08-10T23:45:02.817
> 
> 标签：maven, sonarqube, findbugs, checkstyle, cobertura

我需要一些帮助来为 maven 项目设置代码质量插件。
我有一个多模块项目。虽然我在构建过程中配置了`pmd`、和`checkstyle`，并且可以为每个插件生成 xml 报告，但我在项目中配置声纳插件时面临一些挑战。`findbugs``cobertura`

我不知道如何解决这个问题：

1.  我应该在执行声纳时重用这些插件生成的报告吗？如果是这样，我的声纳插件配置应该是什么？
2.  如果我使用嵌入式`pmd`、、和插件运行声纳`checkstyle`，我如何将它们配置为仅针对特定包运行或对结构进行分析。`findbugs``cobertura``findbugs``com.mycompany.-`
3.  最后，我无法在声纳中获得覆盖报告，无论是在声纳外部还是在声纳内运行 cobertura。

我在下面有我的 pom 供审查。任何帮助将不胜感激。

这是在我的根 pom 中构建部分的插件部分中：

```
<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>cobertura-maven-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <instrumentation>
                    <includes>
                        <include>com/mycompany/**/*.class</include>
                    </includes>                 
                </instrumentation>
                <formats>
                    <format>xml</format>
                </formats>
            </configuration>                
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-pmd-plugin</artifactId>
            <version>2.7.1</version>
            <configuration>
                <sourceEncoding>utf-8</sourceEncoding>
                <minimumTokens>100</minimumTokens>
                <targetJdk>1.6</targetJdk>
                <includes>
                    <include>com/mycompany/**/*.java</include>                      
                </includes>
                <excludeRoots>
                    <excludeRoot>target/generated-sources/*</excludeRoot>
                </excludeRoots>
            </configuration>
        </plugin>   
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>findbugs-maven-plugin</artifactId>
            <version>2.5.2</version>
            <configuration>
                <onlyAnalyze>com.mycompany.-</onlyAnalyze>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <version>2.9.1</version>
            <configuration>
                <includes>com/mycompany/**/*.java</includes>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>sonar-maven-plugin</artifactId>
            <version>2.0</version>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T10:19:42.317

> 1）我应该在执行声纳时重用这些插件生成的报告吗？如果是这样，我的声纳插件配置应该是什么？

Sonar 不提供机制来重用这些插件生成的报告。您可以通过[质量配置文件](http://docs.codehaus.org/display/SONAR/Quality+Profiles)配置规则。

> 2) 如果我使用嵌入式 pmd、checkstyle、findbugs 和 cobertura 插件运行声纳，我如何将它们配置为仅针对特定包运行或让 findbugs 分析“com.mycompany.-”结构。

Sonar Web UI 允许您为 findbugs 过滤器指定排除项。对于 cobertura 也是如此。不确定pmd，checkstyle。

> 3）最后我无法在声纳中获得覆盖报告，无论是在声纳外部还是在声纳内运行 cobertura。

这可能是因为[jacoco 是默认的代码覆盖引擎](http://jira.codehaus.org/browse/SONAR-3536)。您可以`mvn clean verify/install sonar:sonar`按照指示运行，看看它是否有效。

# java - Java ImageIO 非常慢

> ID：11910607
> 
> 赞同：3
> 
> 时间：2012-08-10T23:45:45.133
> 
> 标签：java, image, screenshot, javax.imageio

我正在制作一个程序，将客户端屏幕发送到服务器并显示它，但它非常慢。一帧需要2-3秒，上传/下载速度不是问题。有什么我做错了/我可以改变什么来加快速度吗？

服务器：

```
import java.awt.BorderLayout;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.zip.GZIPInputStream;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class Server {

    public static void main(String[] args) {
        try {
            JPanel panel = new JPanel();
            panel.setLayout(new BorderLayout());

            JLabel label = new JLabel();
            label.setSize(800, 600);
            label.setVisible(true);

            JScrollPane scroll = new JScrollPane();
            scroll.getViewport().add(label);
            panel.add(scroll, BorderLayout.CENTER);

            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.getContentPane().add(panel);
            frame.setSize(800, 600);
            frame.setVisible(true);

            ServerSocket serverSocket = new ServerSocket(25565);
            Socket socket = serverSocket.accept();
            GZIPInputStream in = new GZIPInputStream(socket.getInputStream());
            BufferedImage image = null;
            while(socket.isConnected()) {
                image = ImageIO.read(in);
                if(image != null) {
                    label.setIcon(new ImageIcon(image));
                    label.repaint();

                }
            }
            in.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

客户：

```
import java.awt.AWTException;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.io.IOException;
import java.net.Socket;
import java.util.zip.GZIPOutputStream;

import javax.imageio.ImageIO;

public class Client {

    public static void main(String[] args) {
        try {
            Robot robot = new Robot();
            Toolkit toolkit = Toolkit.getDefaultToolkit();
            Rectangle screen = new Rectangle((int) toolkit.getScreenSize().getWidth(), (int) toolkit.getScreenSize().getHeight());
            Socket socket = new Socket("127.0.0.1", 25565);
            GZIPOutputStream out = new GZIPOutputStream(socket.getOutputStream());

            while(socket.isConnected()) {
                ImageIO.write(robot.createScreenCapture(screen), "png", out);
            }
            out.close();
        } catch (AWTException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T02:42:34.640

If you are sending the image as `png` the GZIPStream is probable a bad idea. You won't achieve a signicant compression gain as png already has good compression. Depending on the kind of image you can also consider `jpeg` to achieve better compression.

But probably the most important is wrapping the output stream with a BufferedOuputStream:

```
BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream()); 
```

You can do the same in the input stream.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T02:52:47.120

你的问题自相矛盾。

一方面，您询问有关通过套接字发送图像的问题。另一方面，您说“一帧需要 2-3 秒，*上传/下载速度不是问题*。”

我建议您尝试分析您的应用程序以确定瓶颈是否在图像捕获、图像转换、图像压缩或套接字 I/O 中。其中任何一个都是*合理*的解释，而*猜测*并不是识别真实答案的好策略。

（如果您已经知道瓶颈在哪里......不要通过在问题中包含其余步骤来混淆问题。例如，如果您已经**知道**问题出在图像转换中，则无需甚至提到您正在通过网络发送图像。但如果您不**知道**这一点，请不要向我们提供潜在的虚假信息......比如“上传/下载速度不是问题”。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-02T18:35:42.763

我相信所有给出的答案都不能解决问题。我怀疑问题*不是*网络连接，而是 ImageIO.read(InputStream) 方法。这个版本的方法简直太慢了。如果您尝试从本地驱动器将其作为流加载（而 ImageIO.read(File) 执行得很好），也会发生 2-3 秒。

我解决了这个问题：

```
ImageIO.setUseCache(false); 
```

此处的更多信息： [字节数组到缓冲图像的转换速度很慢](https://stackoverflow.com/questions/20132911/byte-array-to-buffered-image-conversion-slow)

# php - 从选定的 id 填充行的值

> ID：11910611
> 
> 赞同：0
> 
> 时间：2012-08-10T23:46:00.790
> 
> 标签：php

我正在使用 PHP 根据数据库中的值将名称填充到选项列表中。选择名称后，我想根据选择的任何名称填充行的值。

我用名称值填充选项列表没有问题，但是一旦我选择了一个名称，该行的记录将不会显示在输入框中。

这是我正在使用的代码：

```
$query = "SELECT name, id 
FROM artists 
ORDER BY name";

$mysql_stuff = mysql_query($query, $mysql_link);
while($row = mysql_fetch_row($mysql_stuff)) {

 $artists_name = htmlspecialchars(stripslashes($row[0]));
 $artists_id = stripslashes($row[1]);

    // we compare the id of the record returned and the one we have selected
    if ($artists_id) { 
        $selected = $artists_id;
    } else {
        $selected = "";
    }
    print("<option value=\"$artists_id\">$artists_name</option>
    ");
}

print("</select>
<input type=\"Submit\" name=\"submit\" value=\"Update\">
<input type=\"Submit\" name=\"delete\" value=\"Delete\">

<br >
<br />
Edit Biography:
</td>
</tr>
");

if (isset($_POST['submit'])) {
    print("<tr valign=\"top\">
    <td valign=\"top\" width=\"150\">Name</td>
    <td valign=\"top\">Artist Biography</td>
    </tr>

    ");

    print("<tr valign=\"top\" bgcolor=\"$colour\">
    <td valign=\"top\">
    <input type=\"text\" name=\"artists_name[$selected]\" value=\"$artists_name\" size=\"40\" />
    </td>

    <td valign=\"top\">
    <textarea name=\"artists_Biography[$selected]\"  cols=\"40\" rows=\"10\">$artists_Biography</textarea>
    </td>

    </tr>
    ");

}   

print("</table>
</form>
"); 
```

我可以在将所选名称的值填充到输入框中获得一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:26:10.033

我不确定如何解释这段代码。使用阿贾克斯。在 change() 方法上使用 Jquery 获取选择的值并通过 ajax() 将其发送到从数据库获取信息并返回所需内容的 php 脚本。然后使用 .ajax() 方法的 Success 部分将该数据放入表单上的输入中。

```
$(function(){
    $("select#artist").change(function() 
    {
        var artist = $("select#artist").val();
    $.ajax({
    type: "POST",
    url: "ajax-find-artist.php",
    data: "artistID=" + artist, 
    cache: false,
    success: function(html){
    var newElems = html;
    $("input#artistRestult").html(newElems);
    }
    });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:03:29.883

因此，您将艺术家 ID 提交到帖子中。然后该帖子将刷新或更改页面。假设该操作是您在帖子中有 ID 的页面。如何从 ID 中获取艺术家姓名？您是否在 id 上运行另一个 sql 查询来查找名称？可能需要对您的代码顺序进行一些说明以提供帮助。谢谢

# ios - IOS 开发中心新手，如何使用自己的手机运行应用程序？

> ID：11910612
> 
> 赞同：0
> 
> 时间：2012-08-10T23:46:05.240
> 
> 标签：ios, xcode

我只自己使用过 Xcode，我刚刚支付并注册了我的 IOS 开发许可证。我真的需要使用自己的手机来运行我的应用程序，但是当我尝试时，我得到了这个错误：找不到与应用程序标识符“tanner.appname”匹配的有效配置文件。我不知道规定文件是什么或其他什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:48:59.970

欢迎开发！

这是您的配置错误的快速教程：http: [//www.wikihow.com/Create-a-Provisioning-Profile-for-iPhone](http://www.wikihow.com/Create-a-Provisioning-Profile-for-iPhone)

或者您可以使用启动助手。

[https://developer.apple.com/ios/manage/overview/index.action](https://developer.apple.com/ios/manage/overview/index.action)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:50:22.637

您必须在[苹果开发中心](https://developer.apple.com/ios/manage/overview/index.action)注册。您需要注册设备并下载正确的配置文件。

此外，打开 Xcode 管理器（Window -> Organizer）并确保您的手机已插入，然后将其标记为“使用此设备进行开发”。

最后，关于供应和开发中心的苹果文档可以在这里找到：[供应和开发](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html)

# java - SQL 从插入返回 Auto_increment 值

> ID：11910619
> 
> 赞同：1
> 
> 时间：2012-08-10T23:46:38.957
> 
> 标签：java, sql, insert

我有一个需要上传到 SQL 表的大型数据集（250,000 行）。我目前正在从我创建的 Java 应用程序中执行此操作，并且正如预期的那样，它非常慢。我必须将文本文件中的每一行插入一个表中，并使用一个 auto_increment 列来存储该新行的 id。现在我想使用相同的 id 将我输入到第一个表的字符串的修改版本插入到第二个表中，其中一个列保存原始递增的 id，以便我可以将两行绑定在一起。显然我可以查询我刚刚插入的字符串，然后提取 id，但这是我试图避免的每行的额外查询。有没有办法在执行插入语句时将递增的 id 值从 sql 表中提取到我的 java 类中？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:57:44.013

我猜你正在使用**JDBC**，所以使用`getGeneratedKeys()`. `java.sql.PreparedStatement`返回`Resulset`的包含自动生成的密钥。

# c# - 在 ASP.NET 2010 WebForms 中显示 .raw 图像

> ID：11910620
> 
> 赞同：3
> 
> 时间：2012-08-10T23:46:49.163
> 
> 标签：c#, asp.net, c#-4.0

我正在开发一个 Web 应用程序，我必须在弹出页面中显示图像，但图像扩展名为“.raw”，我尝试将 imageurl 设置为 asp.net 的图像控件或 HTML 的 img 选项卡但它不起作用。这是一个 32 位图像，大小为 1920 x 1080，我使用的平台是带有 C# 的 asp.net 2010 webforms。

如何渲染 .raw 图像以显示在 asp.net Web 应用程序上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:53:41.093

由于浏览器不支持 .raw 文件（除非某些插件/插件/扩展可以处理它），浏览器不知道如何处理它。

您可以做的是创建一个`IHttpHandler`将处理此扩展的（您在 web.config 中映射它）。在后面的代码中，处理程序将找到 .raw 文件，将其编码为其他一些流行的格式，如 .jpeg（并可能将其保存到磁盘，以免每次您想要访问 .jpeg 等效文件时都重新编码）并输出到浏览器。

由于 .raw 是一种通用格式，仅表示文件采用成像设备创建的格式，因此找到合适的转换工具可能会也可能不会容易。我会从尝试`ImageMagick`和开始`dcraw`。

查看[http://en.wikipedia.org/wiki/Raw_image_format](http://en.wikipedia.org/wiki/Raw_image_format)了解更多信息。

# google-calendar-api - 谷歌日历 API 集成

> ID：11910621
> 
> 赞同：3
> 
> 时间：2012-08-10T23:46:51.840
> 
> 标签：google-calendar-api

我的场景如下：我们目前拥有一个在线租赁市场，它使用点对点预订，就像 Airbnb 一样。这意味着每个用户都有一个用于他们财产的日历。我们在我们的网站上有一个用于预订的 Vaway 日历，但是我们希望集成谷歌日历，这样我们就可以从我们的合作伙伴处以两种方式同步/异步所有 Ical 日历支持它的网站。

经过大量研究，我测试了我的个人谷歌日历，看看 iCal 是如何工作的，它似乎工作得很好，所以我们决定这个架构需要在更大的范围内实现。这将用于所有新用户注册，为我们的用户提供一个多合一的日历，将我们所有的合作伙伴网站同步到一个完全同步的谷歌日历中以供其列表。这基本上允许在 7 个不同平台上列出其列表的用户同步到一个日历，显示可用性，以便他们跟踪 Vaway 帐户内部。

谷歌日历将与我们的 Vaway 日历完全分开，特别是允许我们的用户将他们所有来自其他网站的房产预订同步到一个集成日历中。阅读谷歌日历 API 时的问题是它需要 OAuth 2.0，这是用户登录所必需的从他们现有的谷歌帐户（日历，Gmail...等）。我们的许多用户和新注册用户都没有谷歌帐户，我们不希望他们必须通过谷歌注册流程才能登录他们的日历。OAuth 2.0有什么办法吗？我们真的只需要谷歌日历的功能及其在我们的仪表板中的同步功能，以授予读写权限并与其他平台上的其他日历来回同步 2 方式。

凭借谷歌日历的所有功能，它似乎非常适合我们在测试时所做的事情。与我们签约的每个用户都将在 vaway 提供的 Vaway 仪表板中拥有谷歌日历，但他们将在 Vaway 平台内管理自己的谷歌日历以进行物业预订。所有日历事件/预订都将公开，以允许 Ical 同步选项通过。

我们不希望用户在平台之外访问此日历，因为这会将他们拉离站点。我不确定哪种解决方案最适合这种商业模式，并且在研究后完全不知所措。我们正在努力将我们的开销保持在较低水平，因此谷歌应用市场不是一个选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T10:04:40.603

你真的应该重新提出你的问题，因为现在真的很难阅读和理解。

但是，如果我真的得到您的问题，您希望启用从个人应用程序管理谷歌日历，而最终用户不必登录到任何谷歌个人帐户。

如果这显然是你想要做的，我建议你看看 Service Account with OAuth2.0。（见这里：[https](https://developers.google.com/accounts/docs/OAuth2#serviceaccount) ://developers.google.com/accounts/docs/OAuth2#serviceaccount ）它将为您的应用程序提供一个服务帐户，您可以从中处理您的应用程序的日历。

在这里，您将找到一个示例，展示如何使用 Java 进行操作。（[https://code.google.com/p/google-api-java-client/wiki/OAuth2#Service_Accounts](https://code.google.com/p/google-api-java-client/wiki/OAuth2#Service_Accounts)）

# android - 需要密码才能禁用 Android 设备管理员

> ID：11910624
> 
> 赞同：2
> 
> 时间：2012-08-10T23:47:39.037
> 
> 标签：android, device-admin

我正在考虑一个具有设备管理员权限的安全应用程序。我想看看当用户尝试在设置->安全->设备管理员下以管理员身份取消选中应用程序时是否可能需要密码。这将增加一个障碍，不允许用户轻松卸载应用程序，因为他们首先需要从应用程序中删除管理员权限（他们需要使用密码进行身份验证），然后才能卸载。这个想法是让父母在孩子的手机上安装一个安全应用程序，而不是让孩子轻易卸载它。如果没有 root 访问权限，这样的事情是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T10:06:39.603

在 onDisableRequested() 方法（DeviceAdminReceiver 的覆盖方法）中启动密码活动

在 Android 2.3 中，一旦单击停用按钮，您的活动就会打开。

从 Android 4.x 单击停用按钮后，活动会在大约 5-10 秒后打开。因此，您可以通过 onDisabled() 方法而不是 onDisableRequested() 锁定设备。

# css - 侧边菜单 div 高度不随主 div 扩展

> ID：11910626
> 
> 赞同：0
> 
> 时间：2012-08-10T23:47:55.983
> 
> 标签：css, html

我有一个 .page`<div>`包含里面的所有内容。当内容伸展时， .page 也会伸展`<div>`。

我的主要问题是 .leftBannerBackground`<div>`不与 .page 扩展`<div>`。

我可以做些什么来使 .leftBannerBackground 的高度随 .page`<div>`扩展`<div>`？

HTML 的简短版本：

```
 <div class="page">
        <div class="header">
            <div class="top_banner">
            </div>
            <div class="title">
                <h1 class="siteColor centeredText">
Header                </h1>
            </div>
        </div>
        <div class="leftBanner">
        </div>
        <div class="leftBannerBackground">

        </div>

        <div class="main">
            <!-- Content goes here -->
          <div class="leftSide">

          </div>

            <div class="rightSide" style="margin-top: 35px;"></div>

        </div>
        <div class="bottomFiller"></div>

        <div class="footer">

        </div>
    </div> 
```

CSS：

```
 /* DEFAULTS
----------------------------------------------------------*/

body   
{
    background: #ffffff;
    font-size: .80em;
    font-family: "Helvetica Neue", "Lucida Grande", "Segoe UI", Arial, Helvetica, Verdana, sans-serif;
    /*margin: 0px;*/
    text-align:justify;
   padding: 0px;
    color: #000000;
    /*height: auto !important;
    height: 100%;
    min-height: 100%;*/
}

p
{
    margin-bottom: 10px;
    line-height: 1.2em;
}

/* HEADINGS   
----------------------------------------------------------*/

h1, h2, h3, h4, h5, h6
{
    font-size: 1.5em;
    color: #666666;
    font-variant: small-caps;
    text-transform: none;
    font-weight: 200;
    margin-bottom: 0px;
}

h1
{
    font-size: 1.6em;
    padding-bottom: 0px;
    margin-bottom: 0px;
}

h2
{
    font-size: 1.5em;
    font-weight: 600;
}

h3
{
    font-size: 1.2em;
}

h4
{
    font-size: 1.1em;
}

h5, h6
{
    font-size: 1em;
}

/* this rule styles <h1> and <h2> tags that are the 
first child of the left and right table columns */
.rightColumn > h1, .rightColumn > h2, .leftColumn > h1, .leftColumn > h2
{
    margin-top: 0px;
}

/* PRIMARY LAYOUT ELEMENTS   
----------------------------------------------------------*/

.page
{
    width: 960px;
    background-color: #fff;
    /* margin: 20px auto 0px auto;*/
    border: 1px solid #496077;
    position: absolute;
    top: 20px;
    left: 50%;
    margin-left: -480px;

}

.header
{
    position: relative;
    margin: 0px;
    padding: 0px;
    background: #FFFFFF;
    width: 100%;
}

.header h1
{
    font-weight: 700;
    margin: 0px;
    padding: 0px 0px 0px 20px;
    color: #f9f9f9;
    border: none;
    line-height: 2em;
    font-size: 2em;
}

.main
{
    position:relative;
    padding: 4px 12px 8px 6px;
    margin: 220px 0px 0px 150px;
    width: 790px;
    min-height:390px;
    top: 10px;
    overflow: auto;

}

.bottomFiller
{
    min-height: 0px;
}

.leftCol
{
    padding: 6px 0px;
    margin: 12px 8px 8px 8px;
    width: 200px;
    min-height: 200px;
}

.footer
{
    position: relative;
    color: #ffffff;
    padding: 8px 0px 0px 0px;
    margin: 0px auto;
    text-align: center;
    line-height: normal;
    background-color: #9B0707;
    min-height: 20px;
    /*margin-bottom: 40px;*/
}

.partners
{
    position: relative;
    width: 126px;
    height: 46px;
    bottom: 20px;
    z-index:6800;
}

/* TAB MENU   
----------------------------------------------------------*/

div.hideSkiplink
{
    width:100%;
}

div.menu
{
    position: relative;
    padding: 0px 0px 0px 16px;
    margin-top: 275px;
    margin-bottom: 0%;

    height: 100%;
    /*top: 200px;
    margin: 275px 0px;*/
}

div.menu ul li a, div.menu ul li a:visited
{
    color: #FCE756;  /* text color */
    font-size:medium;
    display: block;
    list-style: none;
    line-height: 1.95em;
    padding: 4px 5px;
    text-decoration: none;
    white-space: nowrap;
}

div.menu ul li a:hover
{
    color: #ffffff;
    text-decoration: none;
}

/* FORM ELEMENTS   
----------------------------------------------------------*/

fieldset
{
    margin: 1em 0px;
    padding: 1em;
    border: 1px solid #ccc;
}

fieldset p 
{
    margin: 2px 12px 10px 10px;
}

fieldset.login label, fieldset.register label, fieldset.changePassword label
{
    display: block;
}

fieldset label.inline 
{
    display: inline;
}

legend 
{
    font-size: 1.1em;
    font-weight: 600;
    padding: 2px 4px 8px 4px;
}

input.textEntry 
{
    width: 320px;
    border: 1px solid #ccc;
}

input.passwordEntry 
{
    width: 320px;
    border: 1px solid #ccc;
}

div.accountInfo
{
    width: 42%;
}

/* MISC  
----------------------------------------------------------*/

.siteColor
{
    color: #9B0707 !important;
}

.centeredText
{
    text-align: center;
}

.clear
{
    clear: both;
}

.leftBannerSpaceFiller
{
    position: relative;
    float:left;
    background-color:#9B0707;
    height: 100%;
    width:132px;
}

.title
{
    display: block;
    float: right;
    text-align: left;
    right: 250px;
    width: auto;
    position: absolute;
    margin-top: 8px;
}

.top_banner
{
    background-image: url('../Images/topBanner.png');
    top: 66px;
    left:50px;
    height: 164px;
    width: 911px;
    position: absolute;
    z-index: 6900;
}

.leftSide {
float:left;
width:468px;
}
.leftSidecont {
float:left;
width:790px;
}
.leftSideteam {
float:left;
width:540px;
}
.leftSideliens {
float:left;
width:268px;
}
.rightSide {
float:right;
width:300px;
}
.rightSidecont {
position: absolute;
width:400px;
}
.rightSideteam {
float:right;
width:228px;
}
.rightSideliens {
float:right;
width:500px;
}

.leftBanner
{
    background-image: url('../Images/leftBanner.png');
    height: 592px;
    width: 52px;
    margin-top: 30px;
    position: absolute;
    z-index: 3600;
}

.leftBannerBackground
{
    position:relative;
    background-color: #9B0707; /* #a40a0a; */
    width:132px;
    z-index: 1600;
    float:left;
    height: 100%;
    margin-bottom: 0%;

}

.loginDisplay
{
    font-size: 1.1em;
    display: block;
    text-align: right;
    padding: 10px;
    color: White;
}

.bold
{
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:57:16.873

你有两个选择：

1.  在 .leftBannerBackground 上使用绝对定位并设置`top: 0px;`和`bottom: 0px;`. 演示：http: [//jsfiddle.net/ZXLNk/](http://jsfiddle.net/ZXLNk/)
2.  在 .leftBannerBackground 上使用`height: 100%;`（就像您已经使用的那样）。但为了让它工作，您还需要将所有包含元素的高度设置为 100%：.page `<body>`, 和`<html>`. 当然，这也意味着您将无法在 .page 上使用绝对定位。演示：http: [//jsfiddle.net/gLzcK/](http://jsfiddle.net/gLzcK/)

# jquery-ui - 将 jquery 拖放添加到淘汰赛

> ID：11910634
> 
> 赞同：3
> 
> 时间：2012-08-10T23:48:49.250
> 
> 标签：jquery-ui, knockout.js, knockout-2.0

> **可能重复：**
> [可排序和可删除的淘汰赛列表](https://stackoverflow.com/questions/12273818/sortable-and-droppable-knockout-list)

我正在使用淘汰赛来绑定 UL。我想让用户能够拖放 LI 并让我的视图模型通过重新排序进行更新。

拖放工作正常，我的 jquery 中有正确的事件，但我不确定如何进行更新。

我搜索了文档，但找不到任何东西。

我创建了一个小提琴，让解释我在做什么更容易

[Js Fiddle在这里](http://jsfiddle.net/spnz/RS2VM/1/)

任何建议都会很棒！

更新了 jsfiddle 链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:50:43.537

我从未使用过 Knockout，而且我现在没有时间了解它的复杂性，所以这不是一个完整的解决方案，但[这里有一些东西可以帮助你入门](http://jsfiddle.net/RS2VM/2/)。请参阅下面的链接，了解我在搜索时发现的一些页面的链接，这些页面可能会帮助您完成解决方案。

这是我从你[原来的小提琴](http://jsfiddle.net/spnz/RS2VM/1/)中改变的部分：

```
var view_model = new ViewModel(initialData);

ko.applyBindings(view_model);

$(function() {
    $( "#sortable" ).sortable({
        revert: true,
        stop: function(event, ui) { console.log("stop event")},

        start : function ( event, ui ) {

            ui.item.data( 'previous_index', ui.item.index() );

        },
        // start

        update : function ( event, ui ) {

            var question = view_model.questions.splice(

              ui.item.data( 'previous_index' ), 1

            )[0];

            view_model.questions.splice( ui.item.index(), 0, question );

            ui.item.removeData( 'previous_index' );

        }
        // update

    });
}); 
```

参考：

[jQuery UI Sortable，如何在更新事件中确定当前位置和新位置？](https://stackoverflow.com/questions/1601827/jquery-ui-sortable-how-to-determine-current-location-and-new-location-in-update)

[使用 jquery ui 可排序插件获取项目的开始位置](https://stackoverflow.com/questions/2620601/get-the-start-position-of-an-item-using-the-jquery-ui-sortable-plugin)

[带有原始位置占位符的jQuery Sortable（）？](https://stackoverflow.com/questions/2209029/jquery-sortable-with-original-position-placeholder)

[淘汰赛 + jqueryui 可拖动/可拖放后续](http://wilsonhut.wordpress.com/2012/01/17/knockout-jquery-ui-draggabledroppable-follow-up/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:09:25.517

Ryan Niemeyer 为此目的编写了一个 Knockout 插件：

*   [https://github.com/rniemeyer/knockout-sortable](https://github.com/rniemeyer/knockout-sortable)

这是更新的博客条目：

*   [http://www.knockmeout.net/2012/02/revisiting-dragging-dropping-and.html](http://www.knockmeout.net/2012/02/revisiting-dragging-dropping-and.html)

# ruby - ruby 中的 ruby 错误消息中的反引号和单引号

> ID：11910637
> 
> 赞同：4
> 
> 时间：2012-08-10T23:49:47.590
> 
> 标签：ruby

为什么 ruby​​ 在错误消息中使用反引号和单引号？

```
bad_method
NameError: undefined local variable or method `bad_method' for main:Object 
```

如您所见，方法名称包含在反引号和单引号中：`bad_method'

为什么不像大多数 ruby​​ 库那样使用两个反引号呢？或者至少是单引号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T00:24:15.113

对于这样的问题，有一连串的答案：

### 为什么 *nix-y 的人单引号喜欢 'this' 而不是喜欢 'this'？

*   [https://softwareengineering.stackexchange.com/a/75357](https://softwareengineering.stackexchange.com/a/75357)
*   [https://softwareengineering.stackexchange.com/a/75350](https://softwareengineering.stackexchange.com/a/75350)

### 关于使用反引号和单引号（如“this”）的任何参考？

*   [https://english.stackexchange.com/a/18669](https://english.stackexchange.com/a/18669)

对我来说，它是从乳胶复制而来的。

# resize - 在纯 Lua 中为 jpeg 图像制作缩略图？

> ID：11910638
> 
> 赞同：4
> 
> 时间：2012-08-10T23:50:05.133
> 
> 标签：resize, lua, exif, image-resizing, shrink

Lua - >是否可以缩小更大的图像？

我需要它来制作 jpeg 图像的缩略图。

我不需要“绑定”。有没有用纯 Lua 编写的模块？写一个难吗？

我找到了这些：

*   [https://github.com/tnodir/luafreeimage](https://github.com/tnodir/luafreeimage)
*   [http://www.tecgraf.puc-rio.br/im/](http://www.tecgraf.puc-rio.br/im/)
*   [http://ittner.github.com/lua-gd/manual.html#intro](http://ittner.github.com/lua-gd/manual.html#intro)

但他们都使用 C 库。另外，您认为可以在纯 LUA 中读取照片的 Exif 数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T19:10:15.240

这是可能的，但没有人做过，因为它既困难又毫无意义，因为 Lua 与 C 的接口非常好。

# vb.net - 将文本框中的数字求和到没有按钮的单个文本框

> ID：11910639
> 
> 赞同：1
> 
> 时间：2012-08-10T23:50:11.973
> 
> 标签：vb.net

好的，我正在寻找代码来对多个框（在本例中为 2 个）中的数字求和，并自动用总和填充另一个框，而无需单击按钮或任何东西。我说的是在前两个框中输入数字时在第三个框中显示总和。这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:57:56.557

您可以订阅 TextBox [TextChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)事件，并在前两个中的任何一个中的文本发生更改时更新第三个文本框。

只需确保仔细处理无效输入（即：使用`Int32.TryParse`而不是`Int32.Parse`），因为文本框值不是数字可能会引发异常。

# java - Eclipse Spring Maven 项目

> ID：11910641
> 
> 赞同：0
> 
> 时间：2012-08-10T23:50:17.103
> 
> 标签：java, eclipse, spring, m2e, spring-ide

我对 Eclipse 有点陌生。

所以我安装了最新的 Eclipse Juno、m2e 和 SpringIDE。

我无法理解如何使用上述软件组合创建 Maven Spring 项目。

Eclipse UI 给我的唯一选项是 Maven 项目或 Spring 项目： ![在此处输入图像描述](../Images/54a4d974786c48b443d0ce5130e93df8.png)

我知道在**Eclipse**中可以有一个 Maven/Spring 项目，我实际上有一个：

![在此处输入图像描述](../Images/98e133d633918e0d4705dd038729c40e.png)

但为了使它成为可能，我必须创建一个 Spring 项目并手动编辑其 .project 文件以包含 Maven 特性和构建命令：

```
<buildSpec>
    <buildCommand>
        <name>org.eclipse.wst.common.project.facet.core.builder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.jdt.core.javabuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.springframework.ide.eclipse.core.springbuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.m2e.core.maven2Builder</name>
        <arguments>
        </arguments>
    </buildCommand>
</buildSpec>
<natures>
    <nature>org.springframework.ide.eclipse.core.springnature</nature>
    <nature>org.eclipse.jdt.core.javanature</nature>
    <nature>org.eclipse.wst.common.project.facet.core.nature</nature>
    <nature>org.eclipse.m2e.core.maven2Nature</nature>
</natures> 
```

和 .project 文件以包含构建路径：

```
<classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER">
    <attributes>
        <attribute name="maven.pomderived" value="true"/>
    </attributes>
</classpathentry> 
```

问题：

**如何在不修改 .project 文件的情况下从 Eclipse UI 执行此操作？**

有什么方法可以从 UI 向 Eclipse 项目添加性质？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:14:59.150

尝试在项目资源管理器中右键单击项目 -> 配置 -> 转换为 maven 项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:23:51.800

![添加春季项目性质](../Images/9cfd3c6a4d98063063b2cbc9ae42545a.png)

此选项可用，例如在使用[SpringSource Toolssuite时](http://www.springsource.org/sts)

# android - 同一应用程序中的多个同步适配器

> ID：11910650
> 
> 赞同：5
> 
> 时间：2012-08-10T23:51:18.597
> 
> 标签：android, android-syncadapter

我需要在我的应用程序中有两个单独的同步。每 12 小时完成一次。另一个是每周完成。我想让它们都在同一个“帐户”下，因此可以分别启用/禁用每种类型的同步。

实际上，这些帐户是假的——我不需要那个功能，所以我所有的验证器方法都返回 null。

但我只能让一个同步适配器出现在一个帐户中。知道如何实现这一目标吗？

# java - java 7 uuid 错误？

> ID：11910659
> 
> 赞同：10
> 
> 时间：2012-08-10T23:53:11.673
> 
> 标签：java, scala, uuid

我相信我可能在 Oracle Java7 Update 5 中发现了一个 UUID 多线程错误，我想知道是否有人可以用一个独立的例子来确认。基本上会发生什么，如果我同时调用 UUID.Random()（我使用 64 个线程），我大部分时间都会很快发生冲突）。

但是，如果 UUID 生成器通过预先运行一个测试来预热，该测试只是抛出一堆 UUID，它似乎工作正常。这是scala的要点：

[https://gist.github.com/3318973](https://gist.github.com/3318973)

需要注意的是，我正在插入一个可变集合，我正在从 64 个不同的线程同步该集合。主线程阻塞等待工作人员完成，然后检查设置的大小是否应该是它应该是的。碰撞在发生时打印。

谢谢！亚当

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T02:47:52.703

可能是这样的：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7071826](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7071826)

它已在 7u6 中修复，应该很快就会出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:21:12.347

我对 Java 1.7.0_05 进行了快速检查（不涉及 scala 或 scalatest）并且无法重现任何 UUID 冲突。我的基本设置是相同的，128 个线程在一个同步的集合中每个都抛出 10000 个 uid。这很可能是您的测试代码的问题，我无法在这台机器 atm 上仔细检查。

# c# - 写入位图时在asp.net c#中找不到字体

> ID：11910664
> 
> 赞同：1
> 
> 时间：2012-08-10T23:54:35.050
> 
> 标签：c#, asp.net, fonts, bitmap

问题是我无法加载字体然后在位图中渲染。具体来说，asp.net 网页代码创建一个位图，然后尝试将文本写入位图中。我尝试将代码从一台服务器（Win 2003）移动到另一台服务器（Win 2008）。它适用于 Win 2003 但不适用于 Win 2008。我从旧服务器复制字体 (.ttf) 并将它们安装在新服务器上。

代码：

```
Bitmap barcode = new Bitmap(1, 1);
ffamily = new FontFamily("Free 3 of 9"); //exception

Font threeOfNine = new Font(ffamily, 60, FontStyle.Regular, GraphicsUnit.Point);
Graphics graphics = Graphics.FromImage(barcode);
SizeF size = graphics.MeasureString(number, threeOfNine);
barcode = new Bitmap(barcode, size.ToSize());
graphics = Graphics.FromImage(barcode);
graphics.Clear(Color.White);
graphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.SingleBitPerPixelGridFit;
graphics.DrawString(number, threeOfNine, new SolidBrush(Color.Black), 0, 0);
graphics.Flush();
threeOfNine.Dispose();
graphics.Dispose(); 
```

然后它在以下行抛出此异常`new FontFamily()`：

```
Exception information: 
Exception type: ArgumentException 
Exception message: Font 'Free 3 of 9' cannot be found. 
```

字体已安装到 Windows 字体文件夹中。如果我尝试：

```
Font threeOfNine = new Font("Free 3 of 9", 60, FontStyle.Regular, GraphicsUnit.Point); 
```

然后使用标准默认字体创建字体。是否存在安全问题？为什么我的字体无法正确加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T00:44:26.600

好吧，我自己找到了答案。

After installing the font and ensuring the right permissions were on the .ttf. I had to restart IIS. I think only the app pool was all that was needed to restart. Then it started working.

# ruby-on-rails-3 - 尝试调试 ruby 1.9.3p194 rails 3.2.7

> ID：11910665
> 
> 赞同：2
> 
> 时间：2012-08-10T23:54:38.937
> 
> 标签：ruby-on-rails-3, rubymine

Arg，看起来这是一个相当普遍的问题，但我似乎无法弄清楚如何让我的调试器工作。我已经安装了无数的宝石来试图让这个坏男孩跑起来，但没有运气。这是一个完整的列表。我也包含了我的 gemfile。很明显，我是一个 RoR 新手。我使用 RubyMine 作为我的 IDE，在尝试调试时我收到一条错误消息，指出“当前未安装调试器所需的 gem ruby​​-debug-base19x。您要安装它吗？”。当然，在说“是”下载镜像时，镜像被破坏并且下载失败导致以下错误：

> 下午 5:56:46 运行开发时出错：SponsorBid：无法启动调试器。未安装 Gem 'ruby-debug-ide' 或其可执行脚本 'rdebug-ide' 不存在。

![本地宝石](../Images/acf2bae6c45c1fb0e942a9405bac1c3b.png)

![宝石文件](../Images/2305966d68b3b400a3f9138ecb46c56f.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T13:30:53.737

尽管这个问题在这里重复了另外两个问题，但为了完整起见，我会回答它。

为了从 RubyMine 进行调试，您必须只使用 2 个调试 gem：

*   `ruby-debug-base19x`
*   `ruby-debug-ide`

正是这些宝石必须使用，**不** `ruby-debug-base19`，**不** `ruby-debug19`，**不** `debugger`。所有其他调试 gem 必须从`Gemfile`.

有关如何安装正确的调试 gem 版本的详细信息，[请参阅此答案。](https://stackoverflow.com/a/10325110/104891)如果您在下载`linecache19-0.5.13.gem`gem 时遇到问题，请尝试使用[此镜像](ftp://ftp.intellij.net/pub/.idea/rubymine/linecache19-0.5.13.gem)。

验证`gem list`您是否安装了以下或更新的版本：

```
ruby-debug-base19x (0.11.30.pre10)
ruby-debug-ide (0.4.17.beta9) 
```

此命令不应列出其他调试 gem。

* * *

如[另一个答案所述](https://stackoverflow.com/a/11674999/104891)，`debugger`不得使用 gem，它会与 RubyMine 使用的调试 gem 冲突，调试器将无法工作。您必须卸载此 gem，将其从 中删除，`Gemfile`并确保您的代码不会调用此 gem 的任何方法并且不会尝试加载它。

调试愉快！

* * *

正如@Anjan 所建议的，您的`Gemfile`for 调试可能如下所示：

```
gem 'linecache19', '>= 0.5.13', :git => 'https://github.com/robmathews/linecache19-0.5.13.git'
gem 'ruby-debug-base19x', '>= 0.11.30.pre10'
gem 'ruby-debug-ide', '>= 0.4.17.beta14'` 
```

只需运行`bundle install`以获取所需调试 gem 的正确版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:17:25.897

这是我在 Gemfile 中使用的，用于通过捆绑程序安装所需的 gem：

```
gem 'linecache19', '>= 0.5.13', :git => 'https://github.com/robmathews/linecache19-0.5.13.git'
gem 'ruby-debug-base19x', '>= 0.11.30.pre10'
gem 'ruby-debug-ide', '>= 0.4.17.beta14'` 
```

无需手动安装 gem，它将自动在您的开发人员的计算机上运行。

# scala - 将大集合拆分为较小的集合

> ID：11910668
> 
> 赞同：0
> 
> 时间：2012-08-10T23:55:24.627
> 
> 标签：scala

假设我有这个：

```
val list = Seq(1,2,3,4,5,6,7) 
```

我想把它变成这个

```
Seq[Seq[Int]] 
```

除了内部 Seq 的大小应该最大为 2，所以最终输出是这样的

```
Seq(Seq(1,2), Seq(3,4), Seq(5,6), Seq(7)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T00:15:01.780

您需要该`grouped`方法，该方法返回一个`Iterator`. 然后，您可以拨打`toSeq`或`toList`上`Iterator`。

```
scala> list.grouped(2).toSeq
res14: Seq[Seq[Int]] = Stream(List(1, 2), ?) 
```

# delphi - 密码 rijndael delphi 2010 dcp

> ID：11910673
> 
> 赞同：1
> 
> 时间：2012-08-10T23:56:05.137
> 
> 标签：delphi, delphi-2010, rijndael

我有一个 IV（初始化向量）和密钥，我需要加密一个字符串，这是代码：

```
function TForm1.CipherAES (key: AnsiString; Vector: AnsiString;
  InStream: TMemoryStream) : TMemoryStream;
var
  cipher: TDCP_rijndael;
  i: integer;
  toEnc, toSnd : array of byte;
  outStream, AStream :TMemoryStream;
  StreamR, Stream2 : AnsiString;
begin
  outStream := TMemoryStream.Create;
  SetLength(toEnc, InStream.Size);

  cipher := TDCP_rijndael.Create(nil);
  cipher.Init(key[1], 128, nil);
  cipher.SetIV(vector[1]);
  cipher.BlockSize := 16;
  InStream.Position := 0;

  for I := 0 to InStream.Size-1 do
    InStream.Read(ToEnc[i], 1);

  for I := 0 to inStream.size-1 do
    StreamR := StreamR + ByteToHex(toEnc[i]) + ' ';
  Memo1.Lines.Add(StreamR);
  inStream.Position := 0;

  cipher.CipherMode := cmCBC;
  cipher.EncryptStream(inStream, outStream, InStream.Size);
  Base64Encode(outStream.Memory, @StreamR[1], outStream.Size);

  Stream2 := Copy(StreamR, 1, outStream.Size + 8);
  Memo1.Lines.Add(Stream2);
  Memo1.Lines.Add(StreamR);

  outStream.Position := 0;

  SetLength(toSnd, outStream.Size);
  for I := 0 to outStream.Size-1 do
    outStream.Read(toSnd[i], 1);

  StreamR := '';
  for I := 0 to outStream.size-1 do
    StreamR := StreamR + ByteToHex(toSnd[i]) + ' ';
  Memo1.Lines.Add(StreamR);

  cipher.burn;
  cipher.free;

  Result := outStream;
end; 
```

当我将流传递给 base64 时，我给出了下一个答案：

```
ub/JkCsCZwbAnyqjo+miIw== 
```

但应该是：

```
ub/JkCsCZwbAnyqjo+miI2XNZwNrJo31YBNTwQuHkq0= 
```

有人可以帮助我吗？为什么会发生这样的事情？

提前感谢沃利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:12:04.013

如果您对这两个值进行 base64 解码，您将得到：

ub/JkCsCZwbAnyqjo+miIw== 解码为：

```
B9 BF C9 90 2B 02 67 06-C0 9F 2A A3 A3 E9 A2 23 (in hex) 
```

=> 16 个字节

ub/JkCsCZwbAnyqjo+miI2XNZwNrJo31YBNTwQuHkq0= 解码为：

```
B9 BF C9 90 2B 02 67 06-C0 9F 2A A3 A3 E9 A2 23
65 CD 67 03 6B 26 8D F5-60 13 53 C1 0B 87 92 AD (in hex) 
```

=> 32 字节

这让我觉得你只向 TForm1.CipherAES() 传递了 16 个字节。我这么说是因为在调用 cipher.EncryptStream 之后，outStream.size 应该等于 inStream.size

当您使用断点进行测试时，请澄清 InStream.Size 的值是什么。

**关于您的代码的一些注释：**

1.  Base64Encode 返回输出缓冲区包含的字节数。您永远不会使用此值来设置 StreamR 的大小。

    您对 base64encode 的调用应该类似于：

    ```
    // Allocate buffer for base64 decoded data
    setLength(StreamR, ((inStrem.size + 2) div 3) * 4); 
    size := Base64Encode(outStream.Memory, @StreamR[1], outStream.Size);
    setLength(StreamR, size); 
    ```

2.  我真的不明白这个的意思：

    Stream2 := Copy(StreamR, 1, outStream.Size + 8);

    为什么 outStream.Size + 8？您正在根据其他缓冲区的大小从 StreamR 复制某些内容，而忽略 StreamR 的实际大小？此外，“Copy()”最多只能获得 LENGTH(StreamR) 个字符。

3.  而不是逐字节填充 ToEnc 考虑使用：

    InStream.ReadBuffer(ToEnc[0], InStream.size);

    toSnd 相同（但 .writeBuffer()）

* * *

**关于加密字符串的注意事项**（因为我不知道您如何提供 InStream）：

Ensure you're encrypting Unicode version of the text (UTF16-LE or UTF-8). Converting string to ansiString goes via OS system locale and can result in data loss (the famous '????')

# java - Java中的兄弟嵌套类可以访问彼此的私有成员

> ID：11910674
> 
> 赞同：8
> 
> 时间：2012-08-10T23:56:09.930
> 
> 标签：java, nested-class, private-members

我发现java中的两个嵌套类可以访问彼此的私有成员。为什么会这样？这是一个错误还是标准规定的？

以下代码编译并运行没有错误。

```
public class Main {
public static void main(String args[]) {
    A a = new A();
    a.var1 = 12;
    B b = new B();

    System.out.println(a.var1);
    b.printA(a);
}

private static class A {
    private int var1;
}

private static class B {
    private int var2;

    public void printA(A a) {
         // B accesses A's private variable
         System.out.println(a.var1);
    }

}

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T00:00:57.870

是的，这是预期的。变量是私有的意味着它不能在 的范围之外被访问`Main`，但是它可以在这个范围内的任何地方被访问，以非常相似的方式，同一个类的两个实例可以访问彼此的私有成员。

# android - SurfaceView.lockCanvas() 未正确清除位图缓冲区

> ID：11910675
> 
> 赞同：1
> 
> 时间：2012-08-10T23:56:32.057
> 
> 标签：android, surfaceview

我创建了一个扩展 SurfaceView 的类，以便循环一系列 ARGB 位图。这主要是有效的，除了底层位图的状态（通常但不总是）为每个新帧保留。

换句话说，如果我显示的第一帧是不透明的，而随后的帧是透明的，那么在绘制新帧时不会清除原始帧中的不透明像素。

这种行为让我感到困惑，因为 SurfaceHolder.lockCanvas() 的文档特别指出：

“在 unlockCanvas() 和 lockCanvas() 之间永远不会保留 Surface 的内容，因此，必须写入 Surface 区域内的每个像素。”

如果我只是有一个纯色背景，那么调用 canvas.drawARGB(255,0,0,0) 成功将其清除为黑色......但我想要一个透明背景，我无法将其清除为透明颜色，因为 canvas.drawARGB(0,0,0,0) 没有效果。

```
import java.util.ArrayList;
import java.util.Random;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

/*
 * Accepts a sequence of Bitmap buffers and cycles through them.
 */

class AnimatedBufferView extends SurfaceView implements Runnable
{
    Thread thread = null;
    SurfaceHolder surfaceHolder;
    volatile boolean running = false;

    ArrayList<Bitmap> frames;
    int curIndex = 0;

    public AnimatedBufferView(ArrayList<Bitmap> _frames, Context context) 
    {
        super(context);
        surfaceHolder = getHolder();
        frames = _frames;
    }

    public void onResume(){
        running = true;
        thread = new Thread(this);
        thread.start();
    }

    public void onPause(){
        boolean retry = true;
        running = false;
        while(retry){
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    @Override
    public void run() 
    {
        // TODO Auto-generated method stub
        while(running)
        {
            if(surfaceHolder.getSurface().isValid())
            {               
                Canvas canvas = surfaceHolder.lockCanvas();

                //clear the buffer?
                //canvas.drawARGB(255, 0, 0, 0);

                //display the saved frame-buffer..
                Matrix identity = new Matrix();
                Bitmap frame = frames.get(curIndex);
                canvas.drawBitmap(frame, identity, null);

                surfaceHolder.unlockCanvasAndPost(canvas);

                curIndex = (curIndex + 1) % frames.size();

                try {
                    thread.sleep( 100 );
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T02:20:50.527

好的，发现问题在于默认的 Porter-Duff 绘图模式，导致无法绘制透明颜色。只需要改变模式。IE，

```
Canvas canvas surfaceView.lockCanvas();
canvas.drawColor(0, Mode.CLEAR); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:01:53.470

这个让我困惑了一段时间。基本上，您将不得不每帧重绘整个屏幕。这是因为当您锁定画布时，您得到的是一个落后两帧的画布，而不是发布的最后一帧。这是由于帧被缓冲的方式。只有两个缓冲区，一个是当前显示的，一个是在当前缓冲区之前发布的。当你锁定画布时，你会得到一个当前没有显示的画布（这意味着你得到一个画布，它是一个框架）。

这就是为什么您可能会听到人们将缓冲区称为交换缓冲区的原因，因为当前显示屏幕与您绘制所有内容的屏幕交换。这意味着您永远不会真正取回最新的缓冲区。

希望这对你有某种意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T17:52:52.203

谷歌文档说的是正确的......因为你重新锁定了表面的像素并且有两个缓冲区，因为android根据绘图调用的速度使用三重或双缓冲它可以在一帧一个缓冲区上绘制任何内容您之前已经在绘图调用中填充了它，然后它可以绘制另一个带有另一个内容的缓冲区，因此您可以锁定由另一个缓冲区中的数据构成的表面......

所以最好在绘制任何内容之前覆盖所有内容，例如使用 proter duff 模式和清除颜色或仅使用黑色`canvas.drawColor(Color.BLACK);`

# backbone.js - 从不同的路由器/视图访问集合

> ID：11910681
> 
> 赞同：0
> 
> 时间：2012-08-10T23:57:37.670
> 
> 标签：backbone.js

我对 Backbone 还是有点陌生​​，对此我感到很困惑......

我有一个用于标题的路由器/集合/视图，以及一个用于广告系列的路由器/集合/视图。

当用户创建一个新的活动时，它必须与一个标题相关联。所以在创建表单中，我需要访问所有标题的列表，以便获取它们的名称和（rails）ID。

不过，我不确定如何从我的广告系列视图中访问此标题列表。

关于解决方案的一些想法：

1.  使用像连字这样的关联库——对于一个相当简单的问题，这似乎需要做很多工作，而且我真的不需要关联。我只需要完整的标题列表。
2.  在全局范围内声明我的 Titles 集合并将其传递给 Titles 路由器的初始化程序。
3.  在 Campaigns 路由器中创建一个 Titles 集合。这似乎是多余的。

很高兴发布代码，但我不知道什么是相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:23:17.897

如果你的意思是全局范围`window`，我建议尽可能避免这种情况。您的 Titles / Campaign 类是否可以访问共享范围？例如：

```
( function () {

  var App = {};

  // ...

  // Titles code

  var titles = App.titles = new Backbone.Collection;

  // ...

  // Campaign code

  var titles = App.titles;

} )(); 
```

如果您希望在整个应用程序中使用单个 Titles 集合，您可能想要安排一些事情，以便您的应用程序的各个部分可以访问共享范围。

否则，如果由于某种原因这不切实际或不可取，您可以在“广告系列”部分中创建一个单独的标题集合并从服务器获取它，或者引导它，或者您想要填充它。

没有看到一些代码很难更具体，所以也许这会建议一些你认为与发布相关的代码。

# magento - Magento - 对自定义报价总计字段征税

> ID：11910686
> 
> 赞同：3
> 
> 时间：2012-08-10T23:58:35.890
> 
> 标签：magento

我为 Magento 创建了一个附加费模块，它为报价添加了一个自定义总计字段。附加费输入到 Magento 中，包括税。我已成功获得将附加费添加到报价中的模块，并且结帐页面上的总计是正确的。

我的问题是在尝试对附加费征税以使其包含并显示在结帐页面的税字段中时出现。目前它只包括产品税和运费。

我已经设法计算了附加费的税款，但无法将税款应用于报价，以便将其显示在税款字段中，但也不认为我的方法是完全正确的。任何帮助将非常感激。

```
class ********_Deposits_Model_Quote_Address_Total_Surcharge extends Mage_Sales_Model_Quote_Address_Total_Abstract {

 protected $_config = null;

 public function __construct()
 {
    $this->setCode('surcharge_price');
    $this->_config      = Mage::getSingleton('tax/config');
    $this->_store = Mage::app()->getStore();
 }

 protected function _calculateTax(Mage_Sales_Model_Quote_Address $address)
{
    $calculator     = Mage::getSingleton('tax/calculation');
    $inclTax        = $this->_config->priceIncludesTax($this->_store);

    $taxRateRequest = $calculator->getRateRequest(
        $address,
        $address->getQuote()->getBillingAddress(),
        $address->getQuote()->getCustomerTaxClassId(),
        $this->_store
    );

    $taxRateRequest->setProductClassId(Mage::getStoreConfig('********/surcharges/tax_class', $this->_store));

    $rate = $calculator->getRate($taxRateRequest);

    $baseTax = $tax = $calculator->calcTaxAmount($address->getBaseSurchargePriceAmount(), $rate, $inclTax, true);

}

/**
 * Collect address subtotal
 *
 * @param   ********_Surcharges_Model_Quote_Address $address
 * @return  ********_Surcharges_Model_Quote_Address_Total_Surcharge
 */
public function collect(Mage_Sales_Model_Quote_Address $address)
{

    parent::collect($address);

    $this->_setAmount(0)->_setBaseAmount(0);

    // If Surcharges Is Enabled Then Calculate Away :-)
    if(Mage::getStoreConfig('********/surcharges/surcharge_enabled')) {

      $items = $this->_getAddressItems($address);
      if (!count($items)) {
          return $this;
      }

      // Calculate Total Surcharge For Items In Quote (Base Prices!)
      $surcharge = 0.0;
      foreach ($items as $item) {
        $price = $item->getData('base_surcharge_price', null);
        if(isset($price)) {
          $surcharge += $item->getData('base_surcharge_price') * $item->getQty();
        }
      }

     $this->_setAmount($surcharge);
     $this->_setBaseAmount($surcharge);

     $this->_calculateTax($address);
    }

    return $this;
}

public function fetch(Mage_Sales_Model_Quote_Address $address)
{

  if(Mage::getStoreConfig('********/surcharges/surcharge_enabled')) {
    $surcharge = $address->getSurchargePriceAmount();
    if(isset($surcharge) && $surcharge > 0) {
      $address->addTotal(array(
          'code'  => $this->getCode(),
          'title' => Mage::getStoreConfig('********/surcharges/surcharge_label'),
          'value' => $surcharge
      ));
    }
  }

  return $this;
}

public function getLabel()
{
    return Mage::getStoreConfig('********/surcharges/surcharge_label');
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T12:09:22.627

我设法使用以下代码解决了这个问题。不是最好的解决方案，但花了几个小时试图做到这一点并且没有快速得到任何地方。Asterix 需要更换。

```
class *****_Deposits_Model_Quote_Address_Total_Surcharge extends Mage_Sales_Model_Quote_Address_Total_Abstract {

 protected $_taxConfig = null;

 public function __construct()
 {
    $this->setCode('surcharge_price');
    $this->_taxConfig      = Mage::getSingleton('tax/config');
    $this->_store = Mage::app()->getStore();
 }

 protected function _calculateTax(Mage_Sales_Model_Quote_Address $address)
{
    $calculator     = Mage::getSingleton('tax/calculation');
    $calculator->setCustomer($address->getQuote()->getCustomer());

    $inclTax        = $this->_taxConfig->priceIncludesTax($this->_store);

    $taxRateRequest = $calculator->getRateRequest(
        $address,
        $address->getQuote()->getBillingAddress(),
        $address->getQuote()->getCustomerTaxClassId(),
        $this->_store
    );

    $taxRateRequest->setProductClassId(Mage::getStoreConfig('*****/surcharges/tax_class', $this->_store));

    $rate = $calculator->getRate($taxRateRequest);

    if($rate > 0.0) {
      $baseTax = $calculator->calcTaxAmount($address->getBaseSurchargePriceAmount(), $rate, $inclTax, true);
      $tax = $address->getQuote()->getStore()->convertPrice($baseTax, false);

      $address->addTotalAmount('tax', $tax);
      $address->addBaseTotalAmount('tax', $baseTax);

      $rates = array();
      foreach ($address->getAppliedTaxes() as $rate) {
        $rate['amount'] = $rate['amount'] + $tax;
        $rate['base_amount'] = $rate['base_amount'] + $baseTax;
        $rates[] = $rate;
      }

      $address->setAppliedTaxes($rates);

      if($inclTax) {
        $address->setGrandTotal($address->getGrandTotal() - $tax);
        $address->setBaseGrandTotal($address->getBaseGrandTotal() - $baseTax);
      }
    }

}

/**
 * Collect address subtotal
 *
 * @param   *****_Surcharges_Model_Quote_Address $address
 * @return  *****_Surcharges_Model_Quote_Address_Total_Surcharge
 */
public function collect(Mage_Sales_Model_Quote_Address $address)
{

    parent::collect($address);

    // Clear Cached Values As Multiple Addresses Causes Values To Be Added Twice Otherwise!
    $this->_setAmount(0)->_setBaseAmount(0);

    // If Surcharges Is Enabled Then Calculate Away :-)
    if(Mage::getStoreConfig('*****/surcharges/surcharge_enabled')) {

      $items = $this->_getAddressItems($address);
      if (!count($items)) {
          return $this;
      }

      // Calculate Total Surcharge For Items In Quote (Base Prices!)
      $surcharge = 0.0;
      foreach ($items as $item) {
        $price = $item->getData('base_surcharge_price', null);
        if(isset($price)) {
          $surcharge += $item->getData('base_surcharge_price') * $item->getQty();
        }
      }

     $this->_setAmount($address->getQuote()->getStore()->convertPrice($surcharge, false));
     $this->_setBaseAmount($surcharge);

      $this->_calculateTax($address);
    }

    return $this;
}

/**
 * Assign subtotal amount and label to address object
 *
 * @param   *****_Surcharges_Model_Quote_Address $address
 * @return  *****_Surcharges_Model_Quote_Address_Total_Surcharge
 */
public function fetch(Mage_Sales_Model_Quote_Address $address)
{

  if(Mage::getStoreConfig('*****/surcharges/surcharge_enabled')) {
    $surcharge = $address->getSurchargePriceAmount();
    if(isset($surcharge) && $surcharge > 0) {
      $address->addTotal(array(
          'code'  => $this->getCode(),
          'title' => Mage::getStoreConfig('*****/surcharges/surcharge_label'),
          'value' => $surcharge
      ));
    }
  }

  return $this;
}

/**
 * Get Surcharge label
 *
 * @return string
 */
public function getLabel()
{
    return Mage::getStoreConfig('*****/surcharges/surcharge_label');
} 
```

}

# php - SOAP 服务器没有得到所有的参数

> ID：11910689
> 
> 赞同：7
> 
> 时间：2012-08-10T23:59:00.877
> 
> 标签：php, soap

我正在使用 PHP，并且使用与 PHP 捆绑在一起的 SOAP 类。我花了一整天的时间试图弄清楚为什么这不起作用。

我在客户端写了这个：

```
 $client = new SoapClient("Audit.wsdl");                              
 $params=array('SerialNumber'=>'PB4LAX6JLJT7M','PercentProgress'=>'50','ResultID'=>'5');
 $result=$client->__soapCall('HardDriveStatusUpdate',array($params)); 
```

然后我在服务器端写了这个：

```
function HardDriveStatusUpdate($sn, $p, $rs)
{
    $serialNumber=$sn->SerialNumber;
    $percentProgress=$p->PercentProgress;
    $resultID=$rs->ResultID; 
    // process with variables 
    return array('HardDriveStatusUpdateResult' => '$result');
}

$server=new SoapServer('Audit.wsdl');
$server->addFunction('HardDriveStatusUpdate');
$server->handle(); 
```

我注意到什么都没有发生。为了调试，我有写入“$serialNumber, $percentProgress, $resultID”文件的功能。事实证明，它只得到第一个参数，但第二个和第三个参数是空的。（它显示“PB4LAX6JLJT7M，”）为什么？

WSDL 说：

```
 <s:element name="HardDriveStatusUpdate">
    <s:complexType>
      <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="SerialNumber" type="s:string" />
        <s:element minOccurs="1" maxOccurs="1" name="PercentProgress" type="s:int" />
        <s:element minOccurs="1" maxOccurs="1" name="ResultID" type="s:int" />
      </s:sequence>
    </s:complexType>
  </s:element> 
```

我构造参数的方式有问题吗？

用 __getLastRequest() 测试：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://127.0.0.1/soap/">
     <SOAP-ENV:Body>
         <ns1:HardDriveStatusUpdate>
             <ns1:SerialNumber>PB4LAX6JLJT7M</ns1:SerialNumber>
             <ns1:PercentProgress>50</ns1:PercentProgress>
             <ns1:ResultID>5</ns1:ResultID>
         </ns1:HardDriveStatusUpdate>
     </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

真正的问题肯定是服务器端。即使所有参数都已在 SOAP 请求中发送，该函数也没有获取参数。这是为什么？我尝试了另一种方法，但仍然无法获得第二个参数。它仅适用于 FIRST 参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T01:00:57.907

我使用您提供的 wsdl 尝试了您的代码，参数在单个对象中发送，因此您需要进行以下更改：

```
function HardDriveStatusUpdate($myObject)
{
    $serialNumber = $myObject->SerialNumber;
    $percentProgress = $myObject->PercentProgress;
    $resultID = $myObject->ResultID; 
    // process with variables 
    return array('HardDriveStatusUpdateResult' => true);
} 
```

我在 SoapUi ( with `print_r($myObject); die();`) 中对其进行了测试，结果如下

：![在此处输入图像描述](../Images/fe7e0b8f01cb4395d53e5af95782e22c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T11:00:06.650

当我尝试学习 SOAP 时，我遇到了很多问题（完全感谢知识的扩展）。这是我最终得到它的方式：

Step1：从 PHPClasses.org 下载 PHP2WSDL 类

Step2：使用以下代码生成WSDL require_once("PHPClasses/PHP2WSDL/WSDLCreator.php");

```
$test = new WSDLCreator("WSDLTester", "http://localhost/soap/SoapServer/");
//$test->includeMethodsDocumentation(false);

$test->addFile("servicefunctions.php");

$test->addURLToClass("servicefunctions", "http://localhost/soap/SoapServer/server.php");

//$test->ignoreMethod(array("example1_1"=>"getEx"));

$test->createWSDL();
$test->saveWSDL("/path/to/dir/SoapServer/test.wsdl"); 
```

我将以上内容存储在一个名为 wsdl.php 的文件中，然后您可以在浏览器中访问该文件以生成 wsdl 文件。**注意：重要的是把你的类和你创建的soap服务器的url作为addURLToClass中的url - 因为这就是你的服务器进入wsdl的方式被正确调用**

为了完整起见，ServiceFunctions.php 的代码如下：

```
class servicefunctions {

    /**
     * stringifies
     *
     * @param string $string
     * @return string
     */
    public function stringify(string $string) {
        return "I took the " . $string . " and stringified it";
    }

    /**
     * Adds two numbers
     *
     * @param int $number1
     * @param int $number2
     * @return string
     */
    public function addify(int $number1,int $number2) {
        $answer = ($number1 + $number2);
        $string = "the answer is " . $answer;
        return (string)$string;
    }

} 
```

请注意使用注释来输入 var 类型，然后 PHP2WSDL 和生成的 wsdl 文件中将使用该注释。

然后这将创建服务器：

```
try {
  $server = new SOAPServer("/home/liam/DevEnv/SoapServer/test.wsdl",array('cache_wsdl'=>WSDL_CACHE_NONE));
  $server->setClass("servicefunctions");
  $server->handle();
  }

catch (SOAPFault $f) {
  print "ERROR".$f->faultstring;
} 
```

这是客户：

```
try {
$client = new SoapClient("/home/liam/DevEnv/SoapServer/test.wsdl",array('cache_wsdl'=>WSDL_CACHE_NONE));
echo print_r($client->__getFunctions(),true) . "<br/>";
echo $client->stringify("test new");
}
catch (SOAPFault $f) {
  print "ERROR" . $f->faultstring;
} 
```

输出：

```
Array ( [0] => string addify(integer $number1, integer $number2) [1] => string stringify(string $string) )
I took the test new and stringified it 
```

我相信您可以轻松地将其转换为您的课程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:35:48.497

您将数据作为 1 个参数作为数组 ( `array($params)`) 发送，这意味着服务器只接收一个参数。您可以将函数签名更改为仅接受 1 个参数，也可以更改调用函数的方式。

如果您想使用一系列 key => value 参数调用它，您可以将其更改`$params`为：

```
array(array("SerialNumber" => 'PB4LAX6JLJT7M'), array('PercentProgres' .... )); 
```

然后调用使用`$result=$client->__soapCall('HardDriveStatusUpdate',$params);`

在您的接收函数中，您尝试使用[对象属性](http://php.net/manual/en/language.oop5.properties.php)语法检索参数，而您可能应该使用[数组语法](http://php.net/manual/en/language.types.array.php)，例如。`$sn["SerialNumber"]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T17:17:58.603

这是一个类似的问题，它帮助我解决了问题：

[PHP Soap Server：无法访问我调用的类中的soap请求参数](https://stackoverflow.com/questions/14734297/php-soap-server-cant-access-to-soap-request-parameters-in-my-called-class/17999678#17999678)

希望它可以帮助某人，

丹尼尔

# c - 随机数生成 - 未声明的标识符

> ID：11910690
> 
> 赞同：0
> 
> 时间：2012-08-10T23:59:16.140
> 
> 标签：c, random, identifier

到目前为止，我将程序代码的一部分放在一起很糟糕

```
#include <windows.h>
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

#define MAX_BUFF_SIZE 1024
#define IDM_FILE_RUN 40001
#define IDM_APP_EXIT 40002

//Window Function
LRESULT CALLBACK WindowFunc(HWND, UINT, WPARAM, LPARAM);

int WINAPI WinMain(HINSTANCE hThisInst, HINSTANCE hPrevInst, 
               LPSTR lpszArgs, int nWinMode)
{

WNDCLASS wcls;
HWND hwnd;
MSG msg;

// Name of window and window class
LPCWSTR szWinName   = L"Threads Program";
LPCWSTR szClassName = L"ThreadsProgram";

wcls.hInstance = hThisInst;
wcls.lpszClassName = szClassName;
wcls.lpfnWndProc = WindowFunc;
wcls.style = 0;
wcls.hIcon = LoadIcon(NULL, IDI_APPLICATION);
wcls.hCursor = LoadCursor(NULL, IDC_ARROW);
wcls.lpszMenuName = NULL;
wcls.cbClsExtra = 0;
wcls.cbWndExtra = 0;
wcls.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);

// Register windows class
if(!RegisterClass(&wcls))
{
    return 0;
}

// Create main window
hwnd = CreateWindow(szClassName,
    szWinName,
    WS_OVERLAPPEDWINDOW,
    100,
    100,
    400,
    400,
    HWND_DESKTOP,
    NULL,
    hThisInst,
    NULL );

// Show main window
ShowWindow(hwnd, nWinMode);
UpdateWindow(hwnd);

// Message loop
while(GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
}
return (int)msg.wParam;
}

LRESULT CALLBACK WindowFunc(HWND hMainWindow, UINT message, 
                        WPARAM wParam, LPARAM lParam)
{
static char textBuffer[MAX_BUFF_SIZE];
static int nRead;

switch(message)    
{
case WM_CREATE:
    {
        HMENU hMenu;
        HMENU hMenuPopup;

        // create menus
        hMenu = CreateMenu();
        hMenuPopup = CreateMenu();

        // populate menus
        AppendMenu(hMenuPopup, MF_STRING,  IDM_FILE_RUN,   L"&Choose Balls");   
        AppendMenu(hMenuPopup, MF_STRING,  IDM_APP_EXIT,   L"&Exit");  
        AppendMenu(hMenu, MF_POPUP, (UINT_PTR)hMenuPopup,   L"&File");

        // attach menus to main window
        SetMenu(hMainWindow, hMenu);
    }
    break;
case WM_COMMAND:
    {
        // Obey command
        switch(LOWORD(wParam))
        {
        case IDM_FILE_RUN:

            {
                srand (time(NULL));
                for (int i = 0; i < 6; i++)
                    printf ("%i\n", (rand ()% 49) + 1);  

    return 0;

            }
            break;
        case IDM_APP_EXIT:
            SendMessage(hMainWindow, WM_CLOSE, 0, 0);
            break;
        }
    }
    break;
case WM_DESTROY:
    PostQuitMessage(0);
    break;
default:
    return DefWindowProc(hMainWindow, message, wParam, lParam);
}
return 0;
}// Window function 
```

错误消息说我有一个未声明的标识符，它与我的随机数部分有关，

```
case IDM_FILE_RUN:              
            {
                srand (time(NULL));
                for (int i = 0; i < 6; i++)
                    printf ("%i\n", (rand ()% 49) + 1);  

                return 0;
            } 
```

我不确定我需要写什么以及我需要在哪里写来修复它。

谢谢

```
Error   9   error C2059: syntax error : ')' 108 1
Error   6   error C2065: 'i' : undeclared identifier    108 1
Error   8   error C2065: 'i' : undeclared identifier    108 1
Error   4   error C2143: syntax error : missing ')' before 'type'   108 1
Error   2   error C2143: syntax error : missing ';' before 'type'   108 1
Error   3   error C2143: syntax error : missing ';' before 'type'   108 1
Error   5   error C2143: syntax error : missing ';' before 'type'   108 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:08:15.443

这可能是一个长镜头，但将您当前的 for 循环更改为如下所示：

```
 int i;
  for (i = 0; i < 6; i++)
    ... 
```

可能是你的编译器不喜欢在里面声明变量`for`（我的不喜欢，除非我给它一个特殊的命令行选项）

# iphone - 游戏中心标识符和游戏应用标识符

> ID：11910695
> 
> 赞同：1
> 
> 时间：2012-08-11T00:00:10.790
> 
> 标签：iphone, objective-c, ios, xcode, cocos2d-iphone

好的，我有一个游戏中心捆绑标识符和一个应用捆绑标识符。一个来自 iPhone 开发者网站，另一个来自 iTunes connect。我需要确保两者都添加到我的应用程序中，但我该怎么做。我的游戏中心 ID 是 gamecenter101，我的应用 ID 是 app101。为了让我的应用程序正常工作，我必须在我的 info.plist 中同时拥有这两者。关于如何做到这一点的任何建议？有什么方法可以同时使用它们吗？

# php - wamp localhost SSL错误上的Amazon S3

> ID：11910697
> 
> 赞同：15
> 
> 时间：2012-08-11T00:00:32.973
> 
> 标签：php, ssl, curl, amazon-s3

我正在尝试在我的本地主机上测试 PHP Amazon S3，但不断收到相同的错误：

> 致命错误：未捕获的异常 'cURL_Exception' 带有消息'cURL 资源：资源 id #69; cURL 错误：SSL 证书问题，验证 CA 证书是否正常。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败（cURL 错误代码 60）。见[http://curl.haxx.se/libcurl/c/libcurl-errors.html](http://curl.haxx.se/libcurl/c/libcurl-errors.html) 有关错误代码的说明。在 C:\wamp\www\mysite\application\libraries\awsphp\lib\requestcore\requestcore.class.php:829 堆栈跟踪：#0 C:\wamp\www\mysite\application\libraries\awsphp\sdk.class .php(1034): RequestCore->send_request() #1 C:\wamp\www\mysite\application\libraries\awsphp\services\sqs.class.php(250): CFRuntime->authenticate('ListQueues', Array ) #2 C:\wamp\www\mysite\application\libraries\awsphp\services\sqs.class.php(582): AmazonSQS->authenticate('ListQueues', Array) #3 C:\wamp\www\mysite \application\controllers\uploads.php(33): AmazonSQS->list_queues() #4 [内部函数]: Uploads->aw3() #5 C:\wamp\www\mysite\system\core\CodeIgniter.php( 359）：第 829 行 C:\wamp\www\mysite\application\libraries\awsphp\lib\requestcore\requestcore.class.php 中的 call_user_func

测试代码：

```
$sqs = new AmazonSQS();
$response = $sqs->list_queues();
var_dump($response->isOK()); 
```

我将 AWS 开发工具包正确安装到 php 文件并在我的本地服务器上启用了 CURL 和 SSL。我能做些什么来完成这项工作？我在网上找不到任何帮助。我正在使用wamp。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-11T00:24:31.710

1.  获取[此文件](https://curl.haxx.se/ca/cacert.pem)并将其保存到您的硬盘驱动器。调用它`cacert.pem`。
2.  在 php.ini 中配置[`curl.cainfo`](http://php.net/manual/en/curl.configuration.php#ini.curl.cainfo)在步骤 1 中下载的文件的完整路径。
3.  重启阿帕奇。

我将把它作为练习留给读者，以了解*为什么*会修复它，您需要的所有信息都可以在上面的链接中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T08:16:57.087

1.  你在 Windows 上运行吗？
2.  您是否花时间运行与 SDK 捆绑在一起的 SDK 兼容性测试？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T23:09:40.283

根据[这篇文章](https://forums.aws.amazon.com/message.jspa?messageID=215107)，您无法在本地主机上使用 Amazon AWS ..

# php - 使用 Mysqli 进行 PHP 登录

> ID：11910698
> 
> 赞同：2
> 
> 时间：2012-08-11T00:00:40.567
> 
> 标签：php, mysql, html, mysqli

我对 php / mysqli 比较陌生，我在验证用户时遇到问题，我不确定如何获取一行并验证数据，然后将用户重定向到新页面或显示错误（所有我知道我需要使用 _SESSION) 。*基本上我在使用 fetch() 例程时遇到问题，编写这个代码的正确方法是什么？*

* * *

```
 <?php 
    session_start();
    $username = trim($_POST['username']);
    $password = trim($_POST['password']);
    /* Create a new mysqli object with database connection parameters */
    $mysqli = mysqli_connect('localhost', 'root', '', 'draftdb');

    if(mysqli_connect_errno()) 
    {
          echo "Connection Failed: " . mysqli_connect_errno();
          exit();
    }
       /* Create a prepared statement */
    if($stmt = $mysqli -> prepare("SELECT Login_ID, Login_PW,
    FROM login  
    WHERE Login_ID=? AND Login_PW =?"))
     {

          /* Bind parameters
             s - string, b - boolean, i - int, etc */
          $stmt -> bind_param("ss", $username, $password);

          /* Execute it */
          $stmt -> execute();

          /* Bind results */
          $stmt -> bind_result($username, $password);

          /* Fetch the value */

          if($stmt->fetch() == true)

             { 
             $row =$query -> fetch();
             $_SESSION['name'] = $row;
             header("Location:/in.php");
            exit();
             }
        else 
             { 
            echo 'Invalid Login'; 
             } 

          /* Close statement */
          $stmt -> close();
       }

       /* Close connection */
       $mysqli -> close();
    ?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T00:15:15.363

按照这个顺序

1.  准备查询`$stmt->prepare()`
2.  如果使用占位符，则绑定参数`$stmt->bind_param("ss", $username, $password);`
3.  执行
4.  将结果绑定到变量`$stmt->bind_result($username, $password)`
5.  数据现在已准备好被拾取`$stmt->fetch()`
6.  关闭准备好的语句`$stmt->close`

我认为你不清楚`$stmt->bind_result()`已经设置了变量。在您的情况下，您可能只从表中获取 1 行，这样`$stmt->fetch()`就足够了。如果您有多行，则需要一个循环来使用数据。

例子：

```
$a = array();
while ($stmt->fetch()) {
    $a = array('username' => $username, 'password' => $password);
} 
```

关于用户和密码匹配：你现在有

```
$_POST['username'];
$_POST['password'];
$username;
$password; 
```

所以你必须做一个 if 语句来检查`$_POST['username'] == $username && $_POST['password'] == $password`. 如果这是真的，您可以设置您的登录标志。

要让用户保持登录状态，只需设置一个 $_SESSION 变量。您可以设置`$_SESSION['logged_in'] = true;`，如果设置了此变量，这使您有可能知道用户已经通过身份验证。如果用户想结束他的会话，只需取消设置变量（并销毁会话）。

我还注意到另一件事：

```
if($stmt->fetch() == true) { } // equals: if ($stmt->fetch()) { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T02:16:51.633

这有重大的安全问题，但要回答你的问题：

你可以这样做：

```
$sql = "SELECT Login_ID, Login_PW,
  FROM login  
  WHERE Login_ID=?
";

$stmt = $mysqli->prepare( $sql );

// Do your thing...

// Make sure the user is found.
if ( ! $stmt->rowCount() )
    return false;

// Retrieve your results as an associative array.
$user = $stmt->fetch();

// Check the password.
if ( ! $_POST['password'] == $user['Login_PW'] ) )
  return false;

$_SESSION['name'] = $user['Login_ID'];

header("Location:/in.php");

exit(); 
```

**您可能会发现这些很有用：**
[Why you should be using PHP's PDO for Database Access](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)
[Secure Passwords with Phpass](http://sunnyis.me/blog/secure-passwords/)

# c++ - 不明白 sscanf() 函数的工作原理

> ID：11910701
> 
> 赞同：1
> 
> 时间：2012-08-11T00:01:22.877
> 
> 标签：c++, parsing, file-io, scanf

我不明白如何`sscanf()`在 C++ 中使用来读取文件。

我正在开发一个程序，它从一个文件中读取三个跑步者的名字，以及他们的五个最佳时间。我想平均每个跑步者的时间，并说出谁是最好的跑步者。我在使用文件 IO 时遇到了绝对的困难。

Cplusplus.com 帮助了一些人，但并没有真正说明如何读取、将 char*（名称）与浮点数（时间）分开等。在其他地方，我无法逃避过于技术性的行话和解释。

一位朋友向我展示了这段代码片段来解释。

```
while(file>>str) {
    sscanf (str.c_str(),"%d",&myint);
} 
```

有人介意向我解释它是如何阅读的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T00:17:08.987

使用`sscanf()`被认为有点老派，但可能非常有益并且值得掌握。我认为您正在寻找类似的东西：

```
sscanf(input, "%s %f", name, &time); 
```

`input`文件中的一行在哪里。一些基础知识是`%s`针对基本字符串和`%f`浮点数的。

享受编程的开始；随着您获得经验，它只会变得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:49:52.107

scanf 如果与 printf 相反。

“sscanf”中的第一个“s”表示它扫描一个字符串。“fscanf”扫描文件，“scanf”扫描标准输入。

格式与 printf 相同。

如果将`sprintf(s, "%d x", 5)`“5 x”打印到 s中，`sscanf("5 x", "%d x", &n)`则将 5 放入 n 中。它总是与 printf 相反。

例外是`%s`。`%s`在 printf 中打印每个字符串。printf("%s", str); 将打印 str，无论 str 中有什么。在scanf中，`%s`是一个词。单词是没有空格的东西。所以读a`%s`只会读一个词。

`sscanf(str, "%d", &a);`表示 str 的格式为“%d”（单个十进制数），并且您正在将此数字转换为 a （因为 &a 是第二个参数）。

举个例子

```
int a,b,c,d;
sscanf("10,20,30,40", "%d,%d,%d,%d", &a, &b, &c, &d); 
```

将导致 a = 10, b = 20, c= 30, d = 40。每个 %d 将读取到下一个参数，并且每个将读取一个十进制数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T00:55:41.720

总体而言，该[`sscanf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fscanf.html)函数用于在描述要在字符串中找到的值的格式字符串的指导下，将（C）字符串转换为程序变量中的一系列值。

剖析引用的代码：

```
while (file >> str)
{
    sscanf(str.c_str(), "%d", &myint);
} 
```

我们可以假设这`file`是一个输入流并且`str`是一个字符串。循环在每次迭代时将输入中的`while`一个“单词”读取到字符串中，其中“单词”是一系列非空白字符，可能前面有一系列空白字符。

示例中的`sscanf()`语句具有三个参数和一个被忽略的返回值（后果自负）。第一个参数是 C 风格的字符串，因此读取的单词通过`str.c_str()`调用转换为 C 字符串。第二个参数是一个格式字符串，它告诉字符串`sscanf()`中期望的内容。在这种情况下，`%d`转换说明符指示十进制整数。第三个参数是指向相应类型的指针，转换后的值将存储在其中。通常，一个格式字符串可以包含多个转换说明符，并且每个分配的转换说明符都需要一个指针参数（您可以通过抑制分配来跳过数据）。

from的返回值`sscanf()`是成功分配转换的次数。在这种情况下，您应该检查是否完成了一次转换。

这是一个基于您的示例的工作微型程序：

```
#include <iostream>
#include <string>
#include <cstdio>
#include <cstdlib>

static void read_stuff(std::istream &file)
{
    std::string str;
    while (file >> str)
    {
        std::cout << "IN: <<" << str << ">>" << std::endl;
        int myint;
        if (sscanf(str.c_str(), "%d", &myint) != 1)
        {
            std::cerr << "Oops: sscanf() failed" << std::endl;
            std::exit(1);
        }
        std::cout << "GOT: " << myint << std::endl;
    }
}

int main()
{
    read_stuff(std::cin);
    return(0);
} 
```

假设您键入输入行：`123 234 345 abc`. 然后程序产生：

```
IN: <<123>>
GOT: 123
IN: <<234>>
GOT: 234
IN: <<345>>
GOT: 345
IN: <<abc>>
Oops: sscanf() failed 
```

请注意，如果您正在处理的名称包含名字和姓氏，可能带有中间名首字母和 5 个数字（都在一行上），那么您可能需要一个不同的过程。您可能会使用`getline()`读取整行，然后尝试使用`sscanf()`（或者您可能会使用 a`stringstream`来代替）解析它。当然，您必须在线处理少于 5 个数字。I/O 总是很棘手，尤其是当您也必须处理错误数据时（并且生产质量代码总是必须准备好处理错误数据）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T00:57:33.963

基本上，您在 sscanf 函数的第二个参数中指定字符串格式，用占位符替换要解析的变量。

比如说，您知道您的文件包含以下几行：

```
Father bought 8 bottles of rum on day 1\.  
Father bought 11 bottles of rum on day 2\.  
Father bought 5 bottles of rum on day 3\.  
Father bought 19 bottles of rum on day 4\. 
```

除了每天的瓶子数量之外，您不关心该字符串中的任何内容。您修复不更改的部分，即“父亲当天买了瓶朗姆酒”，并为要从字符串中提取的部分指定占位符。

您的代码将如下所示：

```
int nDay, nBottles;
sscanf(str.c_str(), "Father bought %d bottles of rum on day %d", &nBottles, &nDay);
cout << "Day: " << nDay << ", bottles: " << nBottles << endl; 
```

% 之后的符号仅指定该部分将被解析为的变量类型。`d`这里的意思是十进制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-16T19:47:25.257

只需使用`sscanf(str.c_str(), "%d", &myint)`而不是`sscanf(str, "%d", &myint)`.

我看到其他人解释过`sscanf`，但我认为你的问题有点不同。

`sscanf`是一个 C 函数，但您可以在 C++ 中使用它，因为 C++ 包含 C。`sscanf`基本上需要一个字符串，按照您将显示的方式对其进行划分，然后将这些部分分配给变量。但是在C中并没有这样的东西`string`。正因为如此，`sscanf`它的参数`char*`就是`char pointer`与它基本做同样的工作`string`。

在 C++ 中，您应该使用`c_str()`函数转换`string`为`char pointer`.

# java - 在 AndEngine 中使用 RatioResolutionPolicy 时如何更改白色边框的颜色？

> ID：11910702
> 
> 赞同：3
> 
> 时间：2012-08-11T00:01:24.347
> 
> 标签：java, android, andengine

我正在我的深色主题游戏中测试不同的分辨率。而且我注意到 AndEngine 在使用 RatioResolutionPolicy 时会留下白色边框。如何更改此边框的颜色以使我的游戏看起来更容易看到？

```
 final EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE, new RatioResolutionPolicy(CAMERA_WIDTH,
            CAMERA_HEIGHT), mCamera).setNeedsSound(true); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T23:06:28.313

不幸的是，我有同样的问题，但只有当我更新我的 Android SDK 时，所以也许这就是问题所在，但你的问题的解决方案是我的，它是去`res/values/styles.xml`编辑这一行：

```
style name="AppTheme" parent="android:Theme.Light" 
```

更改为`Theme.Black`。

对所有文件执行相同的`styles.xml`操作，即在文件夹`res/values-v11`和`res/values-v14`.

这应该可行，现在边界不再是白色的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T18:37:46.800

这晚了一年多，但正确的方法是添加

```
android:theme="@android:style/Theme.Black.NoTitleBar" 
```

到您的活动（每项活动）`AndroidManifest.xml`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T00:20:07.817

如果您谈论的是精灵的边框，那么当使用纹理打包器创建精灵时，精灵周围会出现边框。因此，如果您制作 50x50 大小的精灵，它会作为 52x52 大小的精灵进入应用程序。

**解决方案 ：**

*通过将 extrude 设置为至少 1 解决了该问题。*

我想这可能是你的情况。

谢谢。

# css - 在多个级别中使用多个类选择 DIV

> ID：11910704
> 
> 赞同：0
> 
> 时间：2012-08-11T00:01:49.870
> 
> 标签：css, css-selectors

我有这个 HTML：

```
<div class="row-fluid list-item-main-euvou-entradas">
    <div class="span1 list-item-main-euvou-entradas-colorcode green"></div>
    <div class="span1 list-item-main-euvou-entradas-rank">1</div>
    <div class="span1 list-item-main-euvou-entradas-votes">Votos</div>
    <div class="span9 list-item-main-euvou-entradas-content">
        <a href="#">some link</a>
        <p>some text...<p>          
    </div>
</div> 
```

我还需要使用选择器“row-fluid list-item-main-euvou-entradas”中的此类来选择此类“span1 list-item-main-euvou-entradas-colorcode green”。

我试过这样的事情，但不起作用：

```
.row-fluid .list-item-main-euvou-entradas .span1 .list-item-main-euvou-entradas-colorcode .green {
    some css code;
} 
```

关于这个有什么线索吗？

最好的祝福，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T00:03:07.213

您需要删除类之间的空格：

```
.row-fluid.list-item-main-euvou-entradas .span1.list-item-main-euvou-entradas-colorcode.green {
    some css code;
} 
```

所以对于父div（2个类）

```
.row-fluid.list-item-main-euvou-entradas 
```

和孩子（3班）

```
.span1.list-item-main-euvou-entradas-colorcode.green 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:51:01.210

你可以试试这个：

***CSS 代码***

```
 div.row-fluid.list-item-main-euvou-entradas div.span1.list-item-main-euvou-entradas-colorcode.green {
       /*some css code*/
        color:red;
    } 
```

# ios - 在 NSString iOS 中从 UTF8 转换为 Unicode

> ID：11910708
> 
> 赞同：0
> 
> 时间：2012-08-11T00:02:04.040
> 
> 标签：ios

我没有看到任何将 UTF8 转换为 Unicode 字符串的直接 NSString 函数？我是否需要使用第三方代码进行转换？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:11:07.087

它很容易。首先你得到字符串的长度，[str length]，然后你得到一个指向 unichar 字节的指针（unichar 或多或少是 UTF-16）：

```
unichar unibuffer[length];
[str getCharacters:unibuffer range:NSRangeMake(0, length]]; 
```

# solr - 按时间跨度过滤并使其与众不同

> ID：11910716
> 
> 赞同：0
> 
> 时间：2012-08-11T00:03:48.527
> 
> 标签：solr

我正在寻找一种方法来获取在特定时间跨度内（从现在到十分钟前）活跃的每个唯一用户的列表。使用方面，我可以获取每个唯一用户，但我仍然无法在上述时间跨度内获取它们（“q=date_update:[NOW-10MINUTE T​​O NOW] 似乎不起作用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:53:17.717

你应该尝试这样的事情

date_update:[现在-2分钟/分钟到现在/分钟]

此外，请确保您提交更改。由于时间跨度短，这也可能是一个问题。

# iphone - 从网络播放 mp3

> ID：11910722
> 
> 赞同：2
> 
> 时间：2012-08-11T00:04:30.553
> 
> 标签：iphone

我尝试了以下三种解决方案，但都没有奏效。我确信我错过了一些关键点，但不清楚是什么。（仅供参考，我正在 iPhone 设备上尝试以下解决方案，而不是在模拟器上。）

```
- (IBAction)actionAVPlayer:(id)sender { 
AVPlayer* player = [[AVPlayer alloc] initWithURL:[NSURL URLWithString:urlTextField.text]]; 
[player play];

}

- (IBAction)actionMemoryBuffer1:(id)sender {

  NSError *error;
  NSData *_objectData = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlTextField.text]];

  AVAudioPlayer* audioPlayer = [[AVAudioPlayer alloc] initWithData:_objectData error:&error];
  audioPlayer.numberOfLoops = -1;
  audioPlayer.delegate = self;
  audioPlayer.volume = 1.0f;
  [audioPlayer prepareToPlay];

  if (audioPlayer == nil)
    NSLog(@"%@", [error description]);
  else
    [audioPlayer play];
}

- (IBAction)actionMemoryBuffer2:(id)sender {

  NSURLRequest* request = [ NSURLRequest requestWithURL: [NSURL URLWithString:urlTextField.text] ];
  NSError *requestError;
  NSURLResponse *urlResponse = nil;

  NSData *_objectData  = [ NSURLConnection sendSynchronousRequest:request returningResponse: &urlResponse  error: &requestError];

  NSError *error;
  AVAudioPlayer* audioPlayer = [[AVAudioPlayer alloc] initWithData:_objectData error:&error];
  audioPlayer.numberOfLoops = -1;
  audioPlayer.delegate = self;
  audioPlayer.volume = 1.0f;
  [audioPlayer prepareToPlay];

  if (audioPlayer == nil)
    NSLog(@"%@", [error description]);
  else
    [audioPlayer play];
} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:11:22.190

尝试使用 MPMoviePlayerController。首先，您需要导入 MediaPlayer 框架。然后就这么简单：

```
MPMoviePlayerController *myAudioPlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:urlTextField.text]];
[myAudioPlayer play]; 
```

# asp.net - asp.net中的while或for循环

> ID：11910724
> 
> 赞同：0
> 
> 时间：2012-08-11T00:05:48.083
> 
> 标签：asp.net

如何在下面的 asp.net 中使用 For 循环？我尝试使用 <% for(int i=0; i<5; i++)%> 这给了我语法错误。我已经厌倦了“糟糕！您的编辑无法提交，因为：”的消息：

```
<asp:ListView runat="server" ID="EmployeesListView" DataSourceID="EmployeesDataSource" DataKeyNames="EmployeeID" OnDataBound="grd_RowDataBound">

  <LayoutTemplate>

    <table cellpadding="2" runat="server" id="tblEmployees" name="tblEmployees" style="width:100%" color="green">
    <tr id="Tr3" runat="server" style="background-color: red; color: yellow">  
        <th id="lbl1" style="display:none">Record No.</th>
    </tr>
    <tr runat="server" id="itemPlaceholder"></tr>
    </table>

    <asp:DataPager runat="server" ID="DataPager" PageSize="5">
      <Fields>
        <asp:NumericPagerField ButtonCount="5" PreviousPageText="<--" NextPageText="-->" />
      </Fields>
    </asp:DataPager>

  </LayoutTemplate>

  <ItemTemplate>

     <td valign="top" class="tdWithBorder" width="165" align="right" style="background-color: #D7E0EC; color: blue">
         <asp:Label ID="lblCallStatus" runat="server" Text='Call Status' />
         <br />

         <asp:Label ID="lblHoursWorked1" runat="server" Text='HoursWorked' />
            <br />

         <asp:Label ID="lblOTMealsPaid" runat="server" Text='Meals Paid'/>

         <br />
     </td>

    </tr>
   </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:41:13.677

Look at the code-behind here [http://everymanprogrammer.com/index.php/nested-repeaters-do-it-clean-and-simple-a-beginners-tutorial-part-1/](http://everymanprogrammer.com/index.php/nested-repeaters-do-it-clean-and-simple-a-beginners-tutorial-part-1/)

# javascript - jquery 或 javascript：截断表格单元格中的文本

> ID：11910726
> 
> 赞同：0
> 
> 时间：2012-08-11T00:06:20.457
> 
> 标签：javascript, jquery

我需要使用 javascript 或 jQuery 截断表格第一列中的文本。这是我所在的位置：

桌子：

```
<table id="bigTable">
    <tr><td>Text is tooooo looong</td><td>Just Right</td></tr>
    <tr><td>Text is tooooo looong</td><td>Just Right</td></tr>
    <tr><td>Text is tooooo looong</td><td>Just Right</td></tr>
</table> 
```

尝试以下内容但没有成功（从其他类似帖子编译）：

```
var lbl = $("#bigTable tbody");
var newLbl = $(lbl[0].outerHTML);
$('td:eq(0)', newLbl).slice(5); 
```

它似乎没有从单元格中获取内容或文本。没有任何效果。也试过了——

```
$('td:eq(0)', newLbl)contents().slice(5);

$('td:eq(0)', newLbl).text().slice(5); 
```

我究竟做错了什么？

**编辑**

在发生更多的投票和一般脾气暴躁之前......我必须将 div 中的文本复制到一个变量以进行操作，然后在不同的窗口/div 中显示。这是响应按钮单击而发生的。

...但应用 css 规则听起来很有希望。将尝试改为。

请参阅此小提琴以了解我需要做什么：

[http://jsfiddle.net/Vsse3/2/](http://jsfiddle.net/Vsse3/2/)

在使用 css 想法之前，我必须能够用 div 包装列单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:32:03.357

你不需要js，使用CSS：

**演示：http:**
[//jsfiddle.net/vTDAQ/3/](http://jsfiddle.net/vTDAQ/3/)

*@elckarns*评论是正确的，但您还需要将单元格内容包装在 a`div`中以使用`text-overflow`.

另请注意，您的表格格式不正确。

**演示按要求更新：http:**
[//jsfiddle.net/Vsse3/6/](http://jsfiddle.net/Vsse3/6/)

# google-apps-script - 如何在文件夹中创建文件？

> ID：11910734
> 
> 赞同：10
> 
> 时间：2012-08-11T00:10:04.853
> 
> 标签：google-apps-script, google-drive-api

我有一个 Apps 脚本，它创建多个文件并将它们移动到一个文件夹中。有没有办法将文件直接放在文件夹中，或者我首先必须获取文件然后将其复制到适当的文件夹，然后将其从根文件夹中删除，如下所示：

```
folder=DocsList.createFolder("MyFolder");
var file=DocsList.createFile(blob);
file.addToFolder(folder);
file.removeFromFolder(DocsList.getRootFolder()); 
```

这样做的问题是，如果您打开 Drive，您会看到该文件首先放置在根文件夹中，然后移动到`MyFolder`. 所以在执行`removeFromFolder`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T13:55:11.010

刚刚测试了以下代码

```
function Test() {
  DocsList.createFolder('Folder1').createFolder('Subfolder1').createFile('File1', 'Empty');
} 
```

它按预期工作，即`File1`在新创建的文件夹中创建了一个新文档`My Drive\Folder1\Subfolder1`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-25T14:49:20.677

DocsList 不再有效，已被 DriveAPI、Google App Services 和 Advanced Google services 取代。

在这里我留下我的测试代码，这段代码创建文件夹-子文件夹-google文件-pdf-并以各种方式将它们存储在文件夹和子文件夹中，希望对您有所帮助

```
function Drive_2015() {   //busca un folder, si no lo hay lo crea y crea 2 sub carpetas un google document copiado en cada una de ellas
  var name='folder de prueba';
  var carpeta = DriveApp.getRootFolder().searchFolders("title contains '"+name+"'");
  if (carpeta.hasNext()===true) {    
      while (carpeta.hasNext()) {
      var folder = carpeta.next();
      Logger.log(folder.getName()+' '+folder.getId());
      }
  }else{
    var folder=DriveApp.getRootFolder().createFolder(name);

    var parent=DriveApp.getFolderById(folder.getId());   // get parent folder
    var folder2 =parent.createFolder('Subfolder');   // 1° way to create sub folder
    var folder3=folder.createFolder(name+1);// 2° way to create sub folder (and more easy)

    var doc = DocumentApp.create('Documento sta');
    var sheet = SpreadsheetApp.create('Spreadsheet sta');
    Utilities.sleep(300); // este retardo es para garantizar en el user-side la creacion del nuevo archivo
    var files = DriveApp.getFilesByName('Documento sta');// or Id var file = DriveApp.getFileById(doc.getId());
    while (files.hasNext()) {
      var file = files.next();
      Logger.log('ojo '+file.getName());
      file.makeCopy(folder3);
      file.makeCopy(folder2);
      var file2=file.makeCopy(folder);
      file2.setName('Acta individual del alumno')
      var blob = file2.getAs('application/pdf'); 
      var file2pdf = folder.createFile(blob);
      var file2pdf = DriveApp.getFileById(file2pdf.getId());
      var file2pdf=file2pdf.makeCopy(folder);
      Logger.log('se creó: '+file.getName()+' en la carpeta: '+folder.getName()+' el PDF es: '+file2pdf.getId());
      DriveApp.getFileById(file2pdf.getId()).setTrashed(true)
      DriveApp.getFileById(docid).setTrashed(true)
      }
  }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-08T22:32:56.510

自 2015 年起，您应该使用 DriveApp 服务来管理 Google Drive 中的文件。DriveApp 有一个 Folder 类，允许您直接在文件夹中创建文件。

```
function createFilesInFolder() {
  //This creates the folder
  var folder = DriveApp.createFolder('My Folder');
  //This creates a file in the folder
  var file = folder.createFile('My File.txt', 
                               'Lorem ipsum', 
                               MimeType.PLAIN_TEXT);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-23T11:24:26.053

我只是想发表评论（但没有 50 声望点）。

当原始帖子无效时，上述答案有效的原因是 .createFolder 适用于 DocsList.createFolder （在根目录中创建文件夹）和 Folder.createFolder ，后者在当前文件夹中创建子文件夹。

这对除了我之外的每个人来说都是显而易见的——但我花了很长时间才意识到:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-27T03:02:55.563

GAS 现在允许使用 .moveTo 更快地移动文件。假设您想要构建一个可以编辑的文档。此代码允许您创建文件夹、创建文档、移动文档，最后点击 DocumentApp 编辑文件。

前任：

```
const saveTo = DriveApp.createFolder("FolderName").next().getId();
const newDoc = DocumentApp.create("New Doc"), 
  newDocId = DriveApp.getFileById(newDoc.getId()).moveTo(saveTo); 
```

# jquery - jQuery on() 和 stopPropagation()

> ID：11910735
> 
> 赞同：5
> 
> 时间：2012-08-11T00:10:11.113
> 
> 标签：jquery, stoppropagation

我有一个从左侧滑入的侧窗格，使用 get() 动态添加内容。我希望窗格外的所有点击都能通过触发一个函数来关闭它。根据我阅读的其他问题，我想出了以下代码。

```
$('html').click(function() {
    if (side_showing) {
        close_side();
    }
});

$(document).on("click", "#side", function(event) {  
    event.stopPropagation();
}); 
```

我似乎无法让它工作。我知道该`on()`功能正在被触发，但`event.stopPropagation`似乎没有。有小费吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T00:12:36.223

您不能`stopPropagation()`与委托事件处理一起使用（事件处理程序位于父级上）。

这是因为事件传播首先使委托的事件处理工作，所以当你的事件处理程序被调用时，事件已经传播了。

代码中发生的事情的顺序是：事件传播到文档对象，然后调用事件处理程序。因此，当您调用`event.stopPropagation()`它时，它不会做任何事情，因为事件已经传播。

如果您需要阻止父对象获取事件传播，那么您不能使用委托事件处理。您必须将事件处理程序直接分配给对象本身，以便在事件传播之前拦截事件。如果这些是动态创建的对象，那么您必须在它们创建后立即为其分配事件处理程序。

我知道的唯一其他解决方案是将事件处理程序放在您不希望看到这些事件的父对象上，并确保这些事件处理程序忽略源自您的`#side`对象的事件。

# actionscript-3 - AS3 - 使用精灵表优化我的游戏

> ID：11910738
> 
> 赞同：0
> 
> 时间：2012-08-11T00:10:55.823
> 
> 标签：actionscript-3, sprite

所以，我正在努力让我的Flash“游戏”运行得更顺畅。我为每个对象使用单独的 PNG 文件来创建播放器动画。

我从一些地方听说使用这样的单个文件很糟糕。

我听说过使用精灵表来压缩数据并减少内存使用量。

也许我错了，但是有没有办法将我所有的 PNG 图像（具有透明度）合并在一起，使 flash 可以继续单独使用这些图像？

我真的在寻找使我的程序运行更顺畅的方法，以便能够在屏幕上显示大量图像而不会出现太多延迟。关于如何让事情运行得更好的任何想法？

[这是我正在尝试制作的基于图块的游戏的示例，该游戏存在严重的延迟问题。](http://www.newgrounds.com/dump/item/1c55ca8ea8d2d5ab91d8ddd596324d20)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:54:08.313

[TexturePacker](http://www.codeandweb.com/texturepacker/features)允许合并 png 文件。它会生成两个文件：png 和配置文件。Png 只是合并的图像，配置文件是 txt 文件，您可以将其加载到 swf 中，使用它来解析和拆分图像。针对不同的游戏引擎，配置可以是各种格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:18:44.270

使用 Photoshop 或类似软件，您可以将所有动画帧合并到一个文件中。文件的大小和形状可以是任何你想要的，但是每个“框架”应该是相同的大小、相同的顺序并且它们之间没有空格。例如，假设每一帧是 25x25px，你的步行动画是 10 帧，你希望最终的 .png 是一个长条。您将制作一个尺寸为 250X25 或 25X250 的新 .png，然后按照动画顺序将所有帧插入该文件。是否要将它们嵌入显示对象或加载的文件取决于您，但是一旦拥有它们，您只需使用 BitmapData 将输入文件分解为新的 BitmapData 对象，然后根据需要显示它们。更进一步，

# matlab - MATLAB 自动将 double 转换为 int 而无需显式强制转换

> ID：11910742
> 
> 赞同：4
> 
> 时间：2012-08-11T00:11:39.377
> 
> 标签：matlab, casting, int, double

我会让输出自己说话：

```
>> numFiles, meanTangle, sdTangle

numFiles =

         526

meanTangle =

    0.4405

sdTangle =

    0.1285 
```

现在，当我从这些变量中创建一个向量时：

```
>> [numFiles meanTangle sdTangle]

ans =

         526           0           0 
```

另外，只是为了澄清：

```
>> class(numFiles)

ans =

int32

>> class(meanTangle)

ans =

double

>> class(sdTangle)

ans =

double 
```

为什么 MATLAB 将浮点数 ( `meanTangle`and `sdTangle`) 转换为 int 而不进行强制转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T00:18:08.073

它将所有双精度数转换为整数，因为您的数组包含一个整数。这与精度问题有关。

它将整个数组转换为 int32 类型：

```
>> class(ans)

ans =

int32 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T00:14:58.597

由于未解释的原因，MATLAB 定义了将数组中的整数数据类型与浮点数据组合以返回整数数据类型。

检查此以获取更多信息[Float 变为 integer](http://www.mathworks.nl/matlabcentral/answers/36773-why-float-no-become-integer) 。
您`numFiles`在这里是一个整数，因此它将所有其他变量也转换为整数。

# linq - 如何在 linq 中创建带有填充行的数据集？

> ID：11910743
> 
> 赞同：0
> 
> 时间：2012-08-11T00:11:55.457
> 
> 标签：linq

如果我有这样的列表：

```
var teams = new List() { "Team A", "Team B", "Team C" }; 
```

我有一个分数如下的数据集：

```
var scores = new List<scoredata> {
    new scoredata() { Team = 'Team A', Date = '1/1/2012', Value = 1 }, 
    new scoredata() { Team = 'Team B', Date = '1/1/2012', Value = 1 }, 
    new scoredata() { Team = 'Team C', Date = '1/1/2012', Value = 1 }, 
    new scoredata() { Team = 'Team A', Date = '1/2/2012', Value = 2 }, 
    new scoredata() { Team = 'Team B', Date = '1/3/2012', Value = 3 }, 
    new scoredata() { Team = 'Team C', Date = '1/4/2012', Value = 4 }
} 
```

是否可以构建一个看起来像这样的数据集？

```
Team A, '1/1/2012', 1
Team B, '1/1/2012', 1
Team C, '1/1/2012', 1
Team A, '1/2/2012', 2
Team B, '1/2/2012', null
Team C, '1/2/2012', null
Team A, '1/3/2012', null
Team B, '1/3/2012', 3
Team C, '1/3/2012', null
Team A, '1/4/2012', null
Team B, '1/4/2012', null
Team C, '1/4/2012', 4 
```

我不确定这叫什么，但我想在我的最终数据集中填写空白日期和分数，以便它始终返回每个日期的所有团队，但如果分数数据不可用则返回 null。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T00:29:34.603

```
var dates = scores.Select(s => s.Date).Distinct();

var result =    
    from date in dates
    from team in teams
    let teamScores = scores.Where(s => s.Team == team && s.Date == date)
    orderby date
    select new { team, date, Score = teamScores.FirstOrDefault() }; 
```

不过没有用编译器检查，试一试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:27:31.027

使用纯 LINQ to Objects。

```
public class ScoreData
{
    public string Team { get; set; }
    public string Date { get; set; }
    public int? Value { get; set; }
} 
```

```
var teams = new[] { "Team A", "Team B", "Team C" };
var scores = new[]
{
    new ScoreData { Team = "Team A", Date = "1/1/2012", Value = 1 }, 
    new ScoreData { Team = "Team B", Date = "1/1/2012", Value = 1 }, 
    new ScoreData { Team = "Team C", Date = "1/1/2012", Value = 1 }, 
    new ScoreData { Team = "Team A", Date = "1/2/2012", Value = 2 }, 
    new ScoreData { Team = "Team B", Date = "1/3/2012", Value = 3 }, 
    new ScoreData { Team = "Team C", Date = "1/4/2012", Value = 4 },
};

var dates = scores.Select(score => score.Date).Distinct();
var query =
    from date in dates
    from team in teams
    join score in scores
        on new { Team = team, Date = date }
        equals new { score.Team, score.Date }
        into filteredScores
    let defaultScore = new ScoreData
    {
        Team = team,
        Date = date,
        Value = null,
    }
    from score in filteredScores.DefaultIfEmpty(defaultScore)
    select score; 
```

请注意，这很可能不会在 LINQ to SQL 或 LINQ to Entities 中按原样工作，它需要一些调整。

# javascript - 如何使用 regex 和 jQuery 用两个单独的替换字符串替换两个单独的字符串？

> ID：11910745
> 
> 赞同：1
> 
> 时间：2012-08-11T00:12:15.950
> 
> 标签：javascript, jquery, regex

我正在使用 jQuery 来尝试这样的事情：

```
$('input').keyup(function(e){
    var val = $(this).val();

    var smileString = val.replace(/[:][)]/g, '<img src="smile.png" />');
    $('#regexoutput').html(smileString);

    var frownString = val.replace(/[:][(]/g, '<img src="frown.png" />');
    $('#regexoutput').html(frownString);
}) 
```

有没有办法用一个表达式来做到这一点？上面的代码仅适用于底部替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:31:28.367

我想你想要

```
$('input').keyup(function(e){ 
    var val = $(this).val(); 

    val = val.replace(/[:][)]/g, '<img src="smile.png" />');  
    val = val.replace(/[:][(]/g, '<img src="frown.png" />'); 

    $('#regexoutput').html(val); 
}) 
```

`replace`如果您使第二个 arg 成为检查匹配字符串并返回正确结果的函数， 您也可以通过一个操作来执行此操作。

未经测试：

```
val = val.replace(/:\)/g, function (s) { 
        var fn = s == ':)' ? 'smile' : 'frown';
        return '<img src="' + fn + '.png" />' 
      }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:32:03.150

```
$('input').keyup(function(e){
    var val = $(this).val();

    var smileString = val.replace(/[:][)]/g, '<img src="smile.png" />').
        replace(/[:][(]/g, '<img src="frown.png" />');

    $('#regexoutput').html(smileString);

}); 
```

# tinymce - 我无法让 htmlpurifier 允许锚点（具有 name 属性的标签）

> ID：11910749
> 
> 赞同：1
> 
> 时间：2012-08-11T00:12:56.443
> 
> 标签：tinymce, htmlpurifier

我真的无法让 htmlpurifier 允许标签上的名称属性。我想让 tinyMCE 与锚一起工作。我想不推荐使用 name 属性，应该使用 id，但是 tinyMCE 会产生 name 属性。有没有办法我可以将它们转换为 id="" 或接受它们？

按照[文档](http://htmlpurifier.org/docs/enduser-customize.html)，我尝试了这个，但它不起作用

```
require_once( 'HTMLPurifier.standalone.php' );

$config = HTMLPurifier_Config::createDefault();

$config->set( 'HTML.Doctype'        , 'XHTML 1.0 Transitional'  );
$config->set( 'Cache.DefinitionImpl', null                      ); // remove this later!
$config->set( 'Core.CollectErrors'  , true                      );

$def = $config->getHTMLDefinition( true );

$def->addAttribute( 'a', 'name' , 'ID'    );
// $def->addAttribute( 'a', 'name' , 'CDATA' ); // does not work either
// $def->addAttribute( 'a', 'name' , 'Text'  ); // does not work either

$purifier = new HTMLPurifier( $config );

$purifier->purify( '<a name="test"></a>' );

echo $purifier->context->get( 'ErrorCollector' )->getHTMLFormatted( $config );

// output:

//     Error Line 1, Column 0: name attribute on <a> removed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:14:19.547

[http://htmlpurifier.org/docs/enduser-id.html](http://htmlpurifier.org/docs/enduser-id.html)

（哦，删除自定义 HTML 定义和声明。）

# java - 具有相同名称的 Jython 覆盖方法

> ID：11910750
> 
> 赞同：5
> 
> 时间：2012-08-11T00:12:56.690
> 
> 标签：java, python, jython

我在 2010 年看到 JRuby 上发生了类似的问题，当时我们试图在 Jruby 中覆盖一个在 Java 源代码上最初重载的方法。我们如何在 Jython 中处理这个问题？更具体地说，我如何指定要重载的方法之一被覆盖并忽略其余的方法，或者如何覆盖所有这些方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:25:13.323

Python 不支持方法重载（但它支持默认值）。

```
def my_function(paramA, paramB = None):
  pass 
```

由于 Jython 只是一个 Python 实现，我相信这同样适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T17:20:46.673

要从 Jython 调用特定的 Java 方法，您可能必须使类型非常匹配，甚至完全匹配。

Jython 会执行某种[类型的强制转换](http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html)，但在某些情况下这不会选择您想要的方法。

要在特定基类上调用公共方法，您可以使用`BaseClass.method(self, ...)`. 要调用受保护的方法，您必须在方法名称[前面](http://www.jython.org/archive/21/docs/subclassing.html)`self.super__method(...)`加上.

# php - 如何使用 onchange 为下拉列表中的用户选择提供 javascript？

> ID：11910752
> 
> 赞同：0
> 
> 时间：2012-08-11T00:13:20.713
> 
> 标签：php, javascript, html, variables, onchange

我知道这个问题很简单，但我在其他地方找不到它，所以我认为问这个问题是合适的。

我有一个简单的下拉列表。我使用 onchange 在选择更改时触发事件。我想知道我需要做什么才能将选择转换为 javascript 中的变量。这样我就可以使用该变量来做其他事情（特别是使用 switch 语句填充另一个下拉列表）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:25:17.213

不确定这是否是您想要的：

```
var optionSelected = 0;

var select = document.getElementById('mySelect');

select.onchange = function() {
    optionSelected = this.value;
    alert(optionSelected);
}​​​​​;​ 
```

演示：http: [//jsfiddle.net/vTDAQ/1/](http://jsfiddle.net/vTDAQ/1/)

# range - 如何在 Google App Script 中使用受保护的范围？

> ID：11910754
> 
> 赞同：0
> 
> 时间：2012-08-11T00:13:32.183
> 
> 标签：range, google-apps-script, protected

从 8 月 8 日起，可以在电子表格中设置受保护的范围。如何在我的脚本中访问此功能？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:22:08.143

我想说您可能只需要等待 GAS “赶上” Google 电子表格中的新功能，或者可能将其作为[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中的功能请求提出。

如果要实现它，我认为它将作为范围对象上的 setProtection() 方法，因为它现在可以在工作表对象上完成。

# c++ - 类函数的默认模板参数：在哪里指定？

> ID：11910755
> 
> 赞同：4
> 
> 时间：2012-08-11T00:13:39.593
> 
> 标签：c++, templates, c++11, default

对于 C++2011 中的每种情况，我必须在哪里指定类成员函数的默认模板参数（假设声明（当然）在“类主体”中，并且函数定义在类主体之外）：

*   “正常”功能
*   静态函数
*   朋友功能

在定义中，在声明中还是两者兼而有之？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:48:44.400

好吧，根据我创建模板类和方法的经验，您可以这样指定模板函数：

```
template<typename T>
T MyFunc(T &aArg1, T &aArg2)
{
    //...Definition Goes Here
} 
```

这`typename T`是模板函数的模板参数类型，您需要将该数据类型一致地传递给标记为“T”的每个参数。这意味着 aArg2 必须是 aArg1 的任何数据类型。现在，当您调用此函数时，您可以这样调用它： `MyFunc</*datatype*/int>(iArg1, iArg2);`两个参数必须是数据类型“int”，否则您将收到警告或错误。

现在，这也适用于类方法（我认为这就是您所说的“类成员函数”），它们是类（即`MyClass::MyFunc()`）提供的函数，因此当您声明一个作为模板方法的类方法时，您可以这样做以相同的方式。这是一个示例类：

```
class MyClass
{
   MyClass();
   ~MyClass();

   template<typename T> 
   static T MyStaticFunc(T aArg) { return aArg; }

   template<typename T> 
   T MyFunc(T aArg) { return aArg; }
} 
```

如您所见，并不难。现在，静态函数与您必须确保在内置类的同一模块中定义 then 的方式相同，否则您将收到错误消息。

不幸的是，我从来没有真正使用过“朋友”方法，所以我不知道如何解决这个问题。我怀疑您会以与其他两个相同的方式进行操作。我希望答案的整篇文章有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:26:19.983

在 Clang 中尝试这些建议如下：

*   对于非`static`and`static`函数，在定义或声明中指定默认值是可以接受的——但不能同时指定两者，如果它们相互矛盾，当然也不能；
*   对于`friend`函数，在定义中指定默认值`class`会导致错误。

# .net - 为什么 .Net 1.1 不支持匿名方法？

> ID：11910757
> 
> 赞同：0
> 
> 时间：2012-08-11T00:14:37.780
> 
> 标签：.net, delegates, compatibility, il

我最近通过我的新工作学到了很多关于 IL 的知识。我有一个问题，虽然我找不到答案。

我看到的所有文档都表明.Net 1.1 不支持匿名方法（用于委托）。然而，在 IL 中，匿名方法似乎是通过使用具有“不可能”名称的常规方法来实现的。

那么匿名方法如何让它们在 .Net 1.1 上不受支持呢？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T00:19:43.097

> 那么匿名方法如何让它们在 .Net 1.1 上不受支持呢？有什么我想念的吗？

针对 .Net 1.1 的编译器不支持这一点，因此无法在 1.1 版本的框架中创建一个。

当然，自定义语言或编译器可以创建匿名方法的一个版本——但当时什么也没做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:20:48.323

我认为文档具有误导性。它应该说明的是，早期版本的托管语言（VB、C#、C++/CLI）不支持匿名方法。

正如您所发现的，IL 中没有匿名方法的概念。使它们匿名（通过使用混乱的名称隐藏它们）取决于语言。

# c# - SupressMessage 属性有什么用？

> ID：11910764
> 
> 赞同：3
> 
> 时间：2012-08-11T00:15:16.737
> 
> 标签：c#, .net

我一直在研究 WPF 应用程序的几个源代码，并且到处都看到了 SupressMessage 属性。属性的描述现在对我来说非常模糊。“禁止报告特定的静态分析工具违反规则，允许对单个代码工件进行多次禁止。” 这个属性有什么用，它的实际用途是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T00:17:56.620

当您将[代码分析](http://msdn.microsoft.com/en-us/library/dd264939)应用到您的项目时，您有时会收到您想要忽略的警告，因为警告是误报，或者因为您的代码的特定部分可以违反代码分析规则。

您可以使用[SuppressMessageAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.codeanalysis.suppressmessageattribute.aspx)来做到这一点。现在代码分析已内置到 Visual Studio 的“更高”SKU 中，但以前您必须使用名为**FxCop**的工具来执行分析。

通常，当您想忽略警告时，您有三个选项：

*   您可以从用于分析代码的规则集中删除该规则。只有当你真的不关心规则时，你才应该这样做。

*   您可以在项目范围的抑制文件中抑制警告，该文件通常`GlobalSuppressions.cs`使用`SuppressMessageAttribute`. 这将允许您将所有抑制保留在单个文件中，但会使特定抑制与一段代码相关联变得有些困难。

*   您可以使用`SuppressMessageAttribute`. 这在代码和抑制之间建立了清晰的联系，但也给代码带来了额外的信息。请注意，某些警告只能在全局抑制文件中被抑制，因为它们与特定的代码段无关。

当您单击代码分析警告上的**操作下拉菜单时，最后两个选项可直接在 Visual Studio 中使用。**当您使用 忽略警告时，`SuppressMessageAttribute`您可以为 提供一个值`Justification`。这样做可以让您和其他开发人员在稍后的时间点了解警告被禁止的原因。

如果您因为代码中有一些特殊的单词或缩写而收到有关拼写的警告，您可能不应该取消警告，而是为您的项目创建[自定义代码分析字典](http://msdn.microsoft.com/en-us/library/bb514188.aspx)。

对代码进行代码分析不仅可以提高代码的质量，还可以在此过程中学到一些东西。

# iphone - 使用多个顶点和索引缓冲区对象进行渲染 (ios - OpenGLES 2.0)

> ID：11910766
> 
> 赞同：2
> 
> 时间：2012-08-11T00:16:11.623
> 
> 标签：iphone, ios, ipad, opengl-es, opengl-es-2.0

我无法使用超过 1 对顶点和索引缓冲区对象来渲染我的所有对象。为了检查一切，我只初始化了 3 个对象并渲染它们。这会导致前两个对象的几何图形失真，而第三个对象的几何图形渲染得有些精细（不完美）。

当我只是初始化所有 3 但仅首先渲染时，它再次显示扭曲的几何图形，并且以某种方式第三个几何图形更明显（即使我没有渲染它）。

但是，如果我正在初始化和渲染其中任何一个，它就会呈现得很好（完美）。这是我的代码：

```
float tempAngles[4] = {0, 60, 180, 360};
pieOne = [[IVNode alloc]initWithPieGeometry:0.75 thickness:0.20 startAngle:tempAngles[0]*M_PI/180   andEndAngle:tempAngles[1]*M_PI/180];

glGenBuffers(1, &vertexBuffer1);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer1);//vertexBuffer[i]);
glBufferData(GL_ARRAY_BUFFER, [pieOne.pie getVertexSize]*sizeof(GLfloat), [pieOne.pie returnVertexArray] , GL_STATIC_DRAW);

glGenBuffers(1, &indexBuffer1);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer1);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, [pieOne.pie getIndicesSize]*sizeof(GLushort),[pieOne.pie returnIndexArray], GL_STATIC_DRAW);

pieTwo = [[IVNode alloc]initWithPieGeometry:1.0 thickness:0.20 startAngle:tempAngles[1]*M_PI/180 andEndAngle:tempAngles[2]*M_PI/180];

glGenBuffers(1, &vertexBuffer2);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer2);//vertexBuffer[i]);
glBufferData(GL_ARRAY_BUFFER, [pieTwo.pie getVertexSize]*sizeof(GLfloat), [pieTwo.pie returnVertexArray] , GL_STATIC_DRAW);

glGenBuffers(1, &indexBuffer2);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer2);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, [pieTwo.pie getIndicesSize]*sizeof(GLushort),[pieTwo.pie returnIndexArray], GL_STATIC_DRAW);

pieThree = [[IVNode alloc]initWithPieGeometry:0.75 thickness:0.20 startAngle:tempAngles[2]*M_PI/180 andEndAngle:tempAngles[3]*M_PI/180];

glGenBuffers(1, &vertexBuffer3);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer3);//vertexBuffer[i]);
glBufferData(GL_ARRAY_BUFFER, [pieThree.pie getVertexSize]*sizeof(GLfloat), [pieThree.pie returnVertexArray] , GL_STATIC_DRAW);

glGenBuffers(1, &indexBuffer3);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer3);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, [pieThree.pie getIndicesSize]*sizeof(GLushort),[pieThree.pie returnIndexArray], GL_STATIC_DRAW);

//#define BUFFER_OFFSET(i) ((char *)NULL + (i))
glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 6*sizeof(GLfloat), BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 6*sizeof(GLfloat), BUFFER_OFFSET(12)); 
```

现在在我的渲染功能中，我有：

```
-(void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{

glClearColor(0.77f, 0.88f, 1.0f, 1.0f);     
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

float yellow[3][4] = {1.0f, 1.0f, 0.0f, 1.0f,
    1.0f, 0.0f, 0.0f, 1.0f,
    1.0f, 1.0f, 1.0f, 1.0f};

glUseProgram(_program);
//1st   
GLKMatrix4 model = GLKMatrix4Identity;// GLKMatrix4MakeTranslation(1.5, 0, 0);
_modelViewProjectionMatrix = GLKMatrix4Multiply(_modelViewProjectionMatrix, model);

glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0,_normalMatrix.m);
glUniform4f(uniforms[COLOR_VECTOR], yellow[0][0], yellow[0][1], yellow[0][2], yellow[0][3]);   

//bind corresponding buffer before drawing
glBindBuffer(GL_ARRAY_BUFFER, indexBuffer1);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer1);
glDrawElements(GL_TRIANGLES, [pieOne.pie getIndicesSize], GL_UNSIGNED_SHORT, (void*)0);

//2nd    
model = GLKMatrix4MakeTranslation(0, -1, 0);
_modelViewProjectionMatrix = GLKMatrix4Multiply(_modelViewProjectionMatrix, model);

glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0,_normalMatrix.m);//
glUniform4f(uniforms[COLOR_VECTOR], yellow[1][0], yellow[1][1], yellow[1][2], yellow[1][3]);   

//bind corresponding buffer before drawing
glBindBuffer(GL_ARRAY_BUFFER, indexBuffer2);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer2);
glDrawElements(GL_TRIANGLES, [pieTwo.pie getIndicesSize], GL_UNSIGNED_SHORT,(void*)0);

//3rd
model = GLKMatrix4MakeTranslation(-1.5, 0, 0);
_modelViewProjectionMatrix = GLKMatrix4Multiply(_modelViewProjectionMatrix, model);
glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0,_normalMatrix.m);
glUniform4f(uniforms[COLOR_VECTOR], yellow[2][0], yellow[2][1], yellow[2][2], yellow[2][3]);   

//bind corresponding buffer before drawing
glBindBuffer(GL_ARRAY_BUFFER, indexBuffer3);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer3);
glDrawElements(GL_TRIANGLES, [pieThree.pie getIndicesSize], GL_UNSIGNED_SHORT, (void*)0);

} 
```

**getIndicesSize**返回 indexArray 中的元素数。 **getVertexSize**返回 vertexArray 中元素的数量。 **returnVertexArray**返回几何的顶点数组。 **returnIndexArray**返回几何的索引数组。顶点数组的类型为 GLfloat。索引数组是 GLushort 类型。

生成的顶点数组中的元素数为 24522。生成的索引数组中的元素数为 22680。在互联网上，我发现只有多个 VBO/IBO 的示例没有使用 GLkit，它们在初始化方面完全符合我的要求缓冲区和渲染。我在这个问题上花了将近 2 天的时间。我觉得缺少一些非常基本的东西。不知何故，最后一个绑定缓冲区会影响我感觉到的所有其他几何图形（基于我上面解释的结果）。可能是模拟器问题（我不这么认为）？快速响应将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:26:31.920

您似乎对这些`glVertexAttribPointer`功能的工作方式有些困惑。当您调用 时`glVertexAttribPointer`，它会告诉 OpenGL：

> 在下一次绘制调用中，从当前绑定缓冲区的地址加上提供的缓冲区偏移量开始渲染。

在此之后，是否更改绑定的缓冲区无关紧要，因为指针仍然指向函数调用时绑定的缓冲区。

因此在这段代码中：

```
glBindBuffer(GL_ARRAY_BUFFER, indexBuffer1);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer1);
glDrawElements(GL_TRIANGLES, [pieOne.pie getIndicesSize], GL_UNSIGNED_SHORT, (void*)0); 
```

调用 glBindBuffer(GL_ARRAY_BUFFER) 在这里绝对没有任何作用，因为您没有更新指针。

```
glBindBuffer(GL_ARRAY_BUFFER, indexBuffer1);
//need to set glVertexAttribPointers here
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer1);
glDrawElements(GL_TRIANGLES, [pieOne.pie getIndicesSize], GL_UNSIGNED_SHORT, (void*)0); 
```

# html - Firefox 中未加载 CSS 文件

> ID：11910770
> 
> 赞同：2
> 
> 时间：2012-08-11T00:16:56.140
> 
> 标签：html, css, firefox, sass

[我有这个 HTML + CSS + js](http://miracle-acupuncture.com/)。

如果您在 Chrome 或 IE 中查看它，页面将完美呈现。但是，FF 似乎没有加载 CSS 文件。我 99% 确定它指向正确的目录。

```
css/stylesheets/miracle.css 
```

它使用 Github 页面发布，并且 css 是使用 SASS 从 scss 文件编译的。如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T00:55:43.457

Firefox 不喜欢文件`@charset "IBM437";`顶部的声明`miracle.css`。尝试删除此行。

看起来这可能会被 SASS 添加到您的输出中，因此您应该检查源 (scss) 文件的编码以确定 SASS 是从哪里获取的。

# java - Java 线程未启动

> ID：11910775
> 
> 赞同：0
> 
> 时间：2012-08-11T00:17:02.997
> 
> 标签：java, multithreading

我有一个 IRC 机器人，它在给定一些参数的情况下托管游戏服务器。问题是，一旦它托管了一个服务器，它就会停止侦听 IRC（实际上，一次只能托管一个服务器）。这不是我想要的。

我认为线程将是我的问题的答案，但我似乎无法让它工作。看来它实际上并没有在另一个线程中开始？

这是我的主类，它通过线程启动并运行该方法：

```
// Everything is okay, run the server.
Runnable r = new Server(this, channel);
Thread thread = new Thread(r);
thread.start(); 
```

这是（大概）控制线程的 Server 类：

```
public class Server extends PircBot implements Runnable  {

public void run() {

}

public Server (bot BotRun, String channel) {
    String names[] = org.bestever.bebot.bot.hostbuilder.split(" ");
    ProcessBuilder pb = new ProcessBuilder(names);
    pb.redirectErrorStream(true);
    try {
        Process proc = pb.start();
        BufferedReader br = new BufferedReader(new InputStreamReader(proc.getInputStream()));
        String strLine = null;
        while((strLine = br.readLine()) != null) {
            // Returns UDP Initialized if the server was successfully started
            if (strLine.equalsIgnoreCase("UDP Initialized.")) {
                BotRun.sendMessage(channel, "Server started successfully.");
            }
            // Returns Bad Hex Number if there is a problem with the WAD file
            else if (strLine.startsWith("Bad hex number")) {
                BotRun.sendMessage(channel, "Error starting server: "+strLine);
            }
            System.out.println(strLine);
        }
        Thread.currentThread().interrupt();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我实际上没有在线程中启动它吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T00:22:48.467

恐怕没有。

服务器类应该更像：

```
public class Server extends PircBot implements Runnable {

    private bot BotRun;
    private String channel;
    public void run() {
        String names[] = org.bestever.bebot.bot.hostbuilder.split(" ");
        ProcessBuilder pb = new ProcessBuilder(names);
        pb.redirectErrorStream(true);
        try {
            Process proc = pb.start();
            Reader reader = new InputStreamReader(proc.getInputStream());
            BufferedReader br = new BufferedReader(new InputStreamReader(proc.getInputStream()));
            String strLine = null;
            while((strLine = br.readLine()) != null) {
                // Returns UDP Initialized if the server was successfully started
                if (strLine.equalsIgnoreCase("UDP Initialized.")) {
                    BotRun.sendMessage(channel, "Server started successfully.");
                }
                // Returns Bad Hex Number if there is a problem with the WAD file
                else if (strLine.startsWith("Bad hex number")) {
                    BotRun.sendMessage(channel, "Error starting server: "+strLine);
                }
                System.out.println(strLine);
            }
            reader.close();
            Thread.currentThread().interrupt();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public Server (bot BotRun, String channel) {
        this.BotRun = BotRun;
        this.channel = channel;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:22:53.310

你的`run()`方法是空的；它开始，什么都不做，然后结束。

# jquery - Jquery show 方法在 XUL 中无法正常工作

> ID：11910776
> 
> 赞同：1
> 
> 时间：2012-08-11T00:17:04.237
> 
> 标签：jquery, css, xul

我正在尝试使用动态 XUL 和 Jquery 创建一个 firefox 扩展。当我使用定义元素时

```
<vbox class="b" id="event" style="display:none"></vbox> 
```

当我尝试

```
$('.b').show(); 
```

命令，它工作正常。

但是，当我尝试使用定义元素时

```
<vbox class="b" id="event"></vbox> 
```

以及另一个 .css 文件中的样式

```
display:none 
```

并尝试显示使用上面给出的相同 Jquery 代码，它不起作用。

我尝试通过更改其他一些属性来检查相关的css文件是否正确附加了元素（检查路径是否正确）并且它工作正常。

在堆栈溢出中的一些帖子中，我尝试使用包含所有 css 功能的[Modernizr 。](http://modernizr.com/docs/#features-css)它显示了我无法显示的 vbox 元素。但它在页面底部提供了所有输出。使用的 jquery 版本是 jquery-1.3.2.min.js。有什么我想念的？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:22:01.247

问题是，XUL 框元素使用不同的 CSS`display`属性值。他们使用专有`-moz-box`而不是`block`，因为它们必须是灵活的盒子。Jquery 的`show()`方法 sets `display: block`，哪种在 XUL 中有效，但不完全。

因此，要使其正常工作，您应该这样做以显示 XUL 框元素：

```
myElement.style.display = '-moz-box'; 
```

# java - pig udf 后的错误解除引用

> ID：11910778
> 
> 赞同：0
> 
> 时间：2012-08-11T00:17:37.967
> 
> 标签：java, user-defined-functions, apache-pig

这实际上与问题有关[如何为 PIG 或 HIVE 中的行添加行号？](https://stackoverflow.com/questions/9288578/how-can-i-add-row-numbers-for-rows-in-pig-or-hive/9289365#9289365)

srini 提供的第三个答案工作正常，但我无法在 udf 之后访问数据。

srini提供的udf如下

```
import java.io.IOException;
import java.util.Iterator;
import org.apache.pig.EvalFunc;
import org.apache.pig.backend.executionengine.ExecException;
import org.apache.pig.data.BagFactory;
import org.apache.pig.data.DataBag;
import org.apache.pig.data.Tuple;
import org.apache.pig.data.TupleFactory;
import org.apache.pig.impl.logicalLayer.schema.Schema;
import org.apache.pig.data.DataType;

public class RowCounter extends EvalFunc<DataBag> {
TupleFactory mTupleFactory = TupleFactory.getInstance();
BagFactory mBagFactory = BagFactory.getInstance();
public DataBag exec(Tuple input) throws IOException {
    try {
        DataBag output = mBagFactory.newDefaultBag();
        DataBag bg = (DataBag)input.get(0);
        Iterator it = bg.iterator();
        Integer count = new Integer(1);
        while(it.hasNext())
            { Tuple t = (Tuple)it.next();
              t.append(count);
              output.add(t);
              count = count + 1;
            }

        return output;
    } catch (ExecException ee) {
        // error handling goes here
        throw ee;
    }
}
public Schema outputSchema(Schema input) {
     try{
         Schema bagSchema = new Schema();
         bagSchema.add(new Schema.FieldSchema("RowCounter", DataType.BAG));

         return new Schema(new Schema.FieldSchema(getSchemaName(this.getClass().getName().toLowerCase(), input),
                                                bagSchema, DataType.BAG));
     }catch (Exception e){
        return null;
     }
    }
} 
```

我写了一个简单的测试猪脚本如下

```
A = load 'input.txt' using PigStorage(' ') as (name:chararray, age:int);
/*
--A: {name: chararray,age: int}
(amy,56)
(bob,1)
(bob,9)
(amy,34)
(bob,20)
(amy,78)
*/
B = group A by name;
C = foreach B {
   orderedGroup = order A by age;
   generate myudfs.RowCounter(orderedGroup) as t;
}
/*
--C: {t: {(RowCounter: {})}}
({(amy,34,1),(amy,56,2),(amy,78,3)})
({(bob,1,1),(bob,9,2),(bob,20,3)})
*/
D = foreach C generate FLATTEN(t);
/*
D: {t::RowCounter: {}}
(amy,34,1)
(amy,56,2)
(amy,78,3)
(bob,1,1)
(bob,9,2)
(bob,20,3)
*/ 
```

问题是如何在以后的操作中使用 D。我尝试了多种方法，但总是出现以下错误

```
ava.lang.ClassCastException: java.lang.String cannot be cast to org.apache.pig.data.DataBag
    at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POProject.processInputBag(POProject.java:575)
    at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POProject.getNext(POProject.java:248)
    at org.apache.pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator.getNext(PhysicalOperator.java:316)
    at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.processPlan(POForEach.java:332)
    at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.getNext(POForEach.java:284)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.runPipeline(PigGenericMapReduce.java:459)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.processOnePackageOutput(PigGenericMapReduce.java:427)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.reduce(PigGenericMapReduce.java:407)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapReduce$Reduce.reduce(PigGenericMapReduce.java:261)
    at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:176)
    at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:572)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:414)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:256) 
```

我的猜测是因为我们没有包内元组的模式。如果是这个原因，我应该如何修改udf？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:20:24.743

好的，我通过添加 outputSchema 找到了解决方案，如下所示

```
public Schema outputSchema(Schema input) {
   try{
      Schema.FieldSchema counter = new Schema.FieldSchema("counter", DataType.INTEGER);
      Schema tupleSchema = new Schema(input.getField(0).schema.getField(0).schema.getFields());
      tupleSchema.add(counter);

      Schema.FieldSchema tupleFs;
      tupleFs = new Schema.FieldSchema("with_counter", tupleSchema, DataType.TUPLE);

      Schema bagSchema = new Schema(tupleFs);
      return new Schema(new Schema.FieldSchema("row_counter",
                                                bagSchema, DataType.BAG));
     }catch (Exception e){
        return null;
     }
  } 
} 
```

谢谢。

# javascript - 如何在 javascript 中将命名的 HTML 实体转换为数字的 HTML 实体？

> ID：11910782
> 
> 赞同：2
> 
> 时间：2012-08-11T00:18:17.263
> 
> 标签：javascript, jquery, html, html-entities

按照[这个问题](https://stackoverflow.com/questions/4162270/dom-exception-when-assigning-html-entities-to-innerhtml)（我有同样的问题），如何使用 javascript/jquery将具有类似实体的字符串转换为`&nbsp;`这些实体的字符串？`&#160;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:37:02.470

```
str.replace(/$#160/g, '&nbsp'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:44:14.240

[php.js](http://phpjs.org/functions/index)对此很有用：

[http://phpjs.org/functions/html_entity_decode:424](http://phpjs.org/functions/html_entity_decode:424)
[http://phpjs.org/functions/htmlspecialchars_decode:427](http://phpjs.org/functions/htmlspecialchars_decode:427)
[http://phpjs.org/functions/htmlentities:425](http://phpjs.org/functions/htmlentities:425)

# java - 图像未显示在绘画组件中

> ID：11910783
> 
> 赞同：1
> 
> 时间：2012-08-11T00:18:33.253
> 
> 标签：java, image, swing, paintcomponent, japplet

它给了我一个黑屏背景，但它似乎没有读取图像或绘制它们，一些帮助将不胜感激，如果你能告诉我与我的代码有关的信息，我无法理解一般 r 模糊的答案，谢谢.

```
import java.awt.*;
import javax.swing.*;
import javax.swing.JComponent.*;

public class Movie extends JApplet {

    private String movName1;
    private String director1;
    private int yearMade1;
    private Image movPic1;
    private String movName2;
    private String director2;
    private int yearMade2;
    private Image movPic2;
    private String movName3;
    private String director3;
    private int yearMade3;
    private Image movPic3;
    private String movName4;
    private String director4;
    private int yearMade4;
    private Image movPic4;

    public void init() {
        MovieDis goo = new MovieDis(movPic1, movPic2, movPic3, movPic4);
        goo.setBounds(0, 0, 750, 500);
        add(goo);
    }
}

class MovieDis extends JComponent {

    private String movName1;
    private String director1;
    private int yearMade1;
    private Image movPic1;
    private String movName2;
    private String director2;
    private int yearMade2;
    private Image movPic2;
    private String movName3;
    private String director3;
    private int yearMade3;
    private Image movPic3;
    private String movName4;
    private String director4;
    private int yearMade4;
    private Image movPic4;

    public MovieDis(Image movPic1, Image movPic2, Image movPic3, Image movPic4) {
        setBackground(Color.black);
        movPic1 = Toolkit.getDefaultToolkit().createImage("Shaw.jpg");
        movPic2 = Toolkit.getDefaultToolkit().createImage("dances.jpg");
        movPic3 = Toolkit.getDefaultToolkit().getImage("Inception.jpg");
        movPic4 = Toolkit.getDefaultToolkit().getImage("Cuckoo.jpg");
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.black);
        g.fillRect(0, 0, 750, 500);
        g.drawImage(movPic1, 35, 35, 200, 200, this);
        g.drawImage(movPic2, 35, 515, 200, 200, this);
        g.drawImage(movPic3, 265, 35, 200, 200, this);
        g.drawImage(movPic4, 35, 515, 200, 200, this);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:37:06.490

这可能不起作用的原因有很多，最明显的是

*   您无权读取图像（文件系统或 URL）
*   URL 引用错误（因为文件的位置不是您认为的位置）

根据文件的存储位置，您有两种选择。

如果文件与 Jar 一起存储在服务器上。您将需要了解文档库参考。

所以在你的`init`方法中，你需要添加

```
URL base = getDocumentBase();
System.out.println("base = " + base); // testing only
movPic1 = getImage(base, "issue169.jpg");
movPic2 = getImage(base, "issue194.jpg");
movPic3 = getImage(base, "issue248.jpg");
movPic4 = getImage(base, "issue78.jpg"); 
```

这假定图像与 HTML 文件位于服务器上的同一目录中。您可以根据需要使用相对路径。

如果文件存储/捆绑在`Jar`（这可能是静态图像的首选方式），您需要使用`classloader`来查找它们

```
try {
    movPic1 = ImageIO.read(getClass().getResource("/testapplet/issue169.jpg"));
    movPic2 = ImageIO.read(getClass().getResource("/testapplet/issue194.jpg"));
    movPic3 = ImageIO.read(getClass().getResource("/testapplet/issue248.jpg"));
    movPic4 = ImageIO.read(getClass().getResource("/testapplet/issue78.jpg"));
} catch (IOException ex) {
    ex.printStackTrace();
} 
```

我使用了这种方法，但在测试时确实遇到了一个小问题。因为我的文件被捆绑（还），小程序查看器试图将它们加载为`File`它无权执行的参考 - 小程序视图允许您将其设置为不受限制。

这最终导致

![在此处输入图像描述](../Images/635949c4a8fb2a5b95d222b392ceef34.png)

PS-我将小程序布局管理器设置为`BorderLayout`而不是使用绝对定位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:30:24.263

据我所知，您的图像很可能是空的或空的。看到这是 applet 代码并且您没有使用正确的 URL，如果 Toolkit 无法找到图像，它可能会返回一个标记值（宽度和高度 = -1 的图像）。不幸的是，在这种情况下 g.drawImage 不会抛出异常。请检查您的图像是否正确加载。

# c# - asp.net 循环遍历 javascript 文件

> ID：11910786
> 
> 赞同：0
> 
> 时间：2012-08-11T00:18:49.200
> 
> 标签：c#, asp.net

我想循环浏览我的 javascript 文件。在应用程序启动时的 global.asax 文件中，我有这个：

```
void Application_Start(object sender, EventArgs e) 
{
    //bugs this line
    System.IO.DirectoryInfo info = new System.IO.DirectoryInfo("\\Scripts");

    StringBuilder sb = new StringBuilder();

    foreach (var item in info.GetFiles("*.js"))
    {
        sb.Append(System.IO.File.ReadAllText(item.FullName));
        sb.Append(Environment.NewLine);
    }
} 
```

但是，它不起作用，它说找不到文件。如何以编程方式访问目录及其文件？

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T00:22:42.970

你的路径几乎肯定是不正确的。

利用

```
string mappedPath = HttpContext.Current.Server.MapPath("~\\Scripts");
System.IO.DirectoryInfo info = new System.IO.DirectoryInfo(mappedPath); 
```

# vbscript - 如何远程将工作组计算机加入域

> ID：11910788
> 
> 赞同：0
> 
> 时间：2012-08-11T00:19:10.163
> 
> 标签：vbscript, dns, workgroup, ou

场景：我在具有管理员凭据的域中使用 ComputerA。远程计算机 B（具有已知的管理员凭据）在工作组中。ComputerB 需要加入指定 OU 中的特定域（不同于 ComputerA 的域），我的活动 ComputerA 凭据有权执行此操作。我无法使用 NETDOM 等外部程序，我更愿意使用 VBScript。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:03:02.767

我实际上能够自己解决这个问题。这是未来编码人员的代码：

```
Const JOIN_DOMAIN             = 1
Const ACCT_CREATE             = 2
Const ACCT_DELETE             = 4
Const WIN9X_UPGRADE           = 16
Const DOMAIN_JOIN_IF_JOINED   = 32
Const JOIN_UNSECURE           = 64
Const MACHINE_PASSWORD_PASSED = 128
Const DEFERRED_SPN_SET        = 256
Const INSTALL_INVOCATION      = 262144

Const WbemAuthenticationLevelPktPrivacy = 6

SystemName = "ComputerB"
strNamespace = "root\cimv2"
ComputerBLogin= "Login"
ComputerBPass = "Password"
ComputerALogin = "Login"
ComputerAPass = "Password"
DomainName = "domain.com"
OU = "OU=desiredou,DC=domain,DC=com"

Set objWbemLocator = CreateObject("WbemScripting.SWbemLocator")

Set objWMIService = objwbemLocator.ConnectServer(SystemName, strNamespace, ComputerBLogin, ComputerBPass)

objWMIService.Security_.authenticationLevel = WbemAuthenticationLevelPktPrivacy

Set colComputers = objWMIService.ExecQuery _
    ("Select * From Win32_ComputerSystem")
For Each objComputer in colComputers
    ReturnValue = objComputer.JoinDomainOrWorkGroup(DomainName, ComputerAPass, ComputerALogin, OU, JOIN_DOMAIN + ACCT_CREATE)
Next

If Err.Number <> 0 Then
    Set WshShell = CreateObject("WScript.Shell")
    message = WshShell.Popup ("Unable to join " & SystemName & " to the domain! Please join manually.",, "Error", 0 + 16)
Else
    Set WshShell = CreateObject("WScript.Shell")
    message = WshShell.Popup ("Domain joining was successful!",, "Success!", 0 + 64)
End If

Err.Clear 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:37:38.850

[试试这个，我从http://www.tek-tips.com/viewthread.cfm?qid=1240726](http://www.tek-tips.com/viewthread.cfm?qid=1240726)改编了一段脚本

```
strComputer = "ComputerB"
strPassword = "mypassword"
strDomain   = "mydomain"
strUser     = "myusername"

Set objComputer = GetObject("winmgmts:{impersonationLevel=Impersonate}!\\" & _
    strComputer & "\root\cimv2:Win32_ComputerSystem.Name='" & _
        strComputer & "'")

ReturnValue = objComputer.JoinDomainOrWorkGroup(strDomain, strPassword, strDomain & "\" & strUser, "ou=My_Computer_OU,DC=mycorp,dc=com, _
        JOIN_DOMAIN + ACCT_CREATE)

If ReturnValue = 0 Then
    MsgBox "Computer added to domain under old name without error. proceeding to change computer name. "
Else
    MsgBox "Computer not added to domain successfully. Return value: " & ReturnValue
End If 
```

# coldfusion - 为什么从 base64 二进制数据生成的图像不会显示？

> ID：11910795
> 
> 赞同：1
> 
> 时间：2012-08-11T00:20:22.363
> 
> 标签：coldfusion, upload, amazon-s3, amazon, binaryfiles

我正在尝试从远程位置获取图像，调整其大小并将其保存到 Amazon S3。

问题是，我可以将图像保存到 S3，但是当我尝试显示它时，浏览器显示`image can't be displayed because it contains errors`. 我确定这是因为我做了以下事情：

a) 从远程位置抓取图像：

```
 <cfhttp timeout="45" 
      throwonerror="no" 
      url="#variables.testFilePath#" 
      method="get" 
      useragent="Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.12) Gecko/20080201 Firefox/2.0.0.12" 
      getasbinary="yes" 
      result="objGet"> 
```

b）创建图像以验证和调整大小

```
<cfset objImage = ImageNew(objGet.FileContent); 
```

c) 调整大小后，我将调整大小的图像 (!) 转换回二进制数据，因为以下对 S3.cfc 的函数调用需要有效的文件路径才能将图像作为 binaryData 再次读取。我正在这样做：

```
 <cfset variables.filekey = toBase64( objImage )> 
```

而不是这个：

```
 <cffile action="readBinary" file="#arguments.uploadDir##arguments.fileKey#" variable="binaryFileData"> 
```

因为我无法获得有效`arguments.uploadDir`的工作，所以不是在这里重新读取图像，我想我只是转换回二进制数据并将其保存到 S3。它将我的图像转换回 base64 字符串，然后我将其保存在 S3 中。

**问题：**
有人可以告诉我我做错了什么吗？我猜是base64 getasbinary 和toBase64。但我不确定。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:36:33.260

您无需将其转换回二进制文件。只需使用`cfimage`标签将其写入磁盘，然后使用路径将图像发送到亚马逊。然后在完成后删除图像。

# java - 最小化二维数组中读取次数的算法

> ID：11910800
> 
> 赞同：0
> 
> 时间：2012-08-11T00:21:07.103
> 
> 标签：java, algorithm

给定一个大小为 x*y 的二维数组，其数字从 1 到 x*y 或 null ，条件如下 - m[x,y] == null || m[x,y] > m[x',y'] 其中 (x > x' && y = y') || (y > y')

例如：

```
2X2 array: 
4 0
0 0

2X2 array: 
3 0
0 4 
```

编写一个算法，以最少的读取次数输出 1 到 x*y 之间缺失的数字列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:48:47.590

在这里，您有一个 C# 解决方案，但可以很容易地转换为 Java。主要思想是，在问题的定义下，一行中的最小值是您可以期望在前一行中找到的最大值。（同样的想法是，您在一行中找到的最大值是您在下一行中可以预期的最小值）。如果您找到了一行预期的最大值（或最小值），您不必继续访问矩阵，因为没有任何意义，然后您节省了很多步骤成为最佳解决方案。

```
static List<int> Missing(int[,] matrix, int x, int y)
{
    bool[] numbers = new bool[x * y + 1]; //All values found in the matrix
    int max = x * y; //Max possible value in a row
    int min = max; //Min possible value in a row
    int row = y - 1; //Starting from the last row in the matrix until the first one
    while ((row >= 0) && (min > 1)) //Stop accessing in case that the global possible minimum (value 1) is found in a row greater than first one
    {
        int col = -1;
        do
        {
            col++;
            if (matrix[row, col] > 0) //Assuming that value 0 means null
            {
                numbers[matrix[row, col]] = true; //Mark as found the value in the cell
                min = Math.Min(min, matrix[row, col]); //Update the minimun value of the row (first non zero value in the row)
            }
        }
        while ((col < x - 1) && (matrix[row, col] < max) && (min > 1)); //Inside the matrix range? Stop condition to do not access more elements in that row
        max = min - 1; //Update the possible maximum value for the following row (row - 1)
        row--;
    }
    var result = new List<int>();
    for (var index = 1; index <= x * y; index++)
        if (!numbers[index]) //Return only those values that were NOT found in the matrix
            result.Add(index);
    return result;
} 
```

使用示例：

```
int[,] matrix =
{
    { 0,  2,  0, 11, 0 },
    { 0,  0,  0,  0, 0 },
    { 0, 12,  0, 15, 0 },
    { 0, 16,  0,  0, 0 },
    { 0,  0, 21, 25, 0 }
};
List<int> numbers = Missing(matrix, matrix.GetLength(0), matrix.GetLength(1));
for (int index = 0; index < numbers.Count - 1; index++)
    Console.Write(numbers[index].ToString() + " ");
Console.WriteLine(numbers.Count > 0 ? numbers[numbers.Count - 1].ToString() : string.Empty); 
```

希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:25:19.417

分配一个布尔数组，初始化为 false 大小 (x*y)

遍历矩阵中的所有单元并将 array(M(x,y)) 设置为 true

遍历数组并打印 array(i)=false 的所有索引

如果您正在寻找技巧，则缺失数字的总和（1to(x*y) 的总和 - 矩阵的总和）和缺失数字的数量可能足以确定它们是什么

# ruby - Capistrano：在单独的项目中运行_locally

> ID：11910805
> 
> 赞同：0
> 
> 时间：2012-08-11T00:22:27.847
> 
> 标签：ruby, capistrano

我正在使用 capistrano 进行部署。我正在尝试定义一个任务，它将：

```
cd other-rails-app && bundle exec rake sometask 
```

但它抱怨 Rake 不是捆绑包的一部分（这在我试图运行此任务的项目中显然不是真的）。我认为它必须在执行命令之前以某种方式改变环境并假设已经加载了捆绑程序（这在 capistrano 任务中是正确的，但它是错误的 Gemfile）。

如何在干净的环境中使用 capistrano 在本地运行命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:25:58.427

我解决了这个问题。当你运行 capistrano 时，`BUNDLE_GEMFILE`环境变量被设置为当前项目的 Gemfile。因此，当您运行时`bundle exec rake`，Bundler 会首先查看环境中设置的 Gemfile。解决方案是“重置”这个 Gemfile 变量。我创建了一个脚本，用于在我的另一个项目的根目录中运行我的 rake 任务。

所以不要这样做：

```
run_locally "cd other-rails-app && bundle exec rake mytask" 
```

我这样做：

```
run_locally "cd other-rails-app && ./mytask.rb" 
```

在`mytask.rb`文件中我这样做：

```
#!/usr/bin/env ruby

ENV['BUNDLE_GEMFILE'] = File.expand_path('Gemfile', File.dirname(__FILE__))
require 'bundler/setup'

%x{rake mytask} 
```

# wordpress - 如何在 bbpress 中将类应用于我的主题行？

> ID：11910811
> 
> 赞同：0
> 
> 时间：2012-08-11T00:23:00.947
> 
> 标签：wordpress, bbpress

我今天早上安装了 bbpress。我一直在慢慢地将它融入到我的 wrpdress 211 儿童主题中。我注意到的一件事是，我创建的示例置顶帖没有收到添加到其中的置顶类。

到目前为止，我所做的是将存档论坛、页面主题标签、侧边栏 bb-tagcloud、单论坛、单主题、单用户和分类主题标签复制到我的子主题中并格式化每个页面都与我现有的主题相匹配。如果我使用 bbpress 主题在实时预览中查看我的网站，我会看到 Sticky 类正在应用于粘性主题。我不确定为什么使用我的孩子主题没有发生这种情况？

我刚刚注意到所有类型的类都没有应用于各个主题行？使用实时预览查看同一页面，我看到应用了以下类：2019 年后主题类型-主题状态-发布 hentry 奇数超级粘性 bbp-parent-forum-1998 user-id-1。

而在我的孩子主题中，我完全没有应用任何课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:19:26.900

我发现了问题。我的函数中有一个函数。php 格式错误。正确的方法是这样的：

```
// Add classes to posts
add_filter('post_class', 'my_post_classes');
function my_post_classes( $classes )
{
    $postType = get_post_type();

    if ( $postType == 'post' ) {
        $classes[] = 'clearfix';

    }

    return $classes;
} 
```

# ruby-on-rails - rails表单数据没有保存到数据库

> ID：11910814
> 
> 赞同：2
> 
> 时间：2012-08-11T00:23:36.377
> 
> 标签：ruby-on-rails, ruby

我是 Rails 新手，正在尝试制作一个简单的网站来开始学习。但是，当我提交表单时，数据不会保存到数据库中。我真的不知道出了什么问题，我一直在努力解决一段时间。如果我在 rails 控制台中记录并保存它，那么该记录会成功显示在数据库中（以及索引页面上）。

计算.rb：

```
class Calculate < ActiveRecord::Base
  attr_accessible :number, :root
end 
```

计算控制器.rb：

```
class CalculatesController < ApplicationController
  def index
    @calculate = Calculate.all
  end

  def new
    @calculate = Calculate.new
  end

  def create
    @calculate = Calculate.new(params[:calculate])
    if @calculate.save
      redirect_to '/calculates'
    else
      render 'new'
      flash[:notice] = "Didn't work"
    end
  end
end 
```

新的.html.erb：

```
<%= form_for(@calculate) do %>
  <%= label_tag(:number, "Enter the number") %>
  <%= text_field_tag :number %>
  <%= label_tag(:root, "root") %>
  <%= text_field_tag :root %>
  <%= submit_tag("Submit") %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:34:55.630

啊哈哈！我将我的观点更新为：

```
<%= form_for @calculate, :url => { :action => "create" } do |f| %>
  <%= f.label :number %>
    <%= f.text_field :number %>
    <%= f.label :root %>
    <%= f.text_field :root %>
    <%= submit_tag("Submit") %>
<% end %> 
```

现在它可以工作了。惊人的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:08:48.693

如果您正在使用`form_for`，请使用[`form_for`语法](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)

```
<%= form_for(@calculate) do |form| %>
  <%= form.label :number %>
  <%= form.text_field :number %>
  <%= form.label :root %>
  <%= form.text_field :root %>
  <%= form.submit "Submit" %>
<% end %> 
```

这将自动处理路由，如果`@calculate`是新对象，它将提交它以创建，或者如果它已经保存，它将发送一个 put 请求`edit action`

# objective-c - MKMapView 点击大头针不会调用 didSelectAnnotationView

> ID：11910824
> 
> 赞同：6
> 
> 时间：2012-08-11T00:25:28.553
> 
> 标签：objective-c, mkmapview, mkannotationview, mkmapviewdelegate

我正在使用 mapView 并尝试在您单击地图上显示的图钉时弹出标注。

引脚设法放置在正确的位置，因此我认为注释有效，但是当我单击引脚时，它不会显示标注。我有显示标注 = YES。

`didSelectAnnotationView`当我单击图钉时，根本不会调用该方法。

是否有一些常见问题可能导致此方法无法调用？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-11T01:26:18.530

如果点击图钉即使`canShowCallout`是也不会显示标注`YES`，则注释`title`可能是`nil`或空白。

如果`title`为空白，则不会显示标注，也不会`didSelectAnnotationView`调用委托方法。

# php - MAMP 没有 SQLite

> ID：11910826
> 
> 赞同：1
> 
> 时间：2012-08-11T00:25:47.397
> 
> 标签：php, macos, apache, sqlite, mamp

我已经安装并重新安装了 MAMP，但似乎没有包含 sqlite。我搜索了 httpd.conf 没有结果。我以为我应该添加

```
extension=php_pdo.so
extension=php_pdo_sqlite.so
extension=php_sqlite.so 
```

但扩展甚至不在 MAMP 目录中，因此添加上述行没有任何作用。根据 MA​​MP 网站文档 SQLite 包含在安装中，但我在任何地方都没有看到它，而且我没有运气让它工作。当我加载引用 SQLiteDatabase 类的页面并且我的 php 错误日志显示时出现问题

```
PHP Fatal error:  Class 'SQLiteDatabase' not found in /var/www/queries.php on line 67 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:05:46.390

我根据@drew010 的评论解决了这个问题。尽管 SQLiteDatabase 列在 PHP 网站上，但它似乎无法正常工作。我更改为 new SQLite3() ，它现在似乎可以工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:43:10.130

不，MAMP 没有 SQLite。不知道你为什么这么说。基于[MAMP 网站](http://www.mamp.info/en/mamp/index.html)文档 SQLite 包含在内，但实际上列出了包并且 SQLite 不存在。

请注意，SQLite 作为操作系统（以及 Apache 和 PHP）的一部分默认安装在 OS X 上。

# c# - 我在更新查询中有错误...请检查我的代码

> ID：11910827
> 
> 赞同：0
> 
> 时间：2012-08-11T00:26:06.633
> 
> 标签：c#, c#-4.0

我有一个四类学生，课程，注册和更新分数

在学生课上：

```
 public class Student
{
    public string studID  { get; set; }
    public string name { get; set; }

    public Student() { }

    public Student(string StudID,string Name)
    {
        this.studID = StudID;
        this.name = Name;
    }
} 
```

在课程中

```
 public class Course
{
    public string courseID { get; set; }
    public string title { get; set; }
    public int credits { get; set; }

    public Course()
    {

    }

    public Course(string CourseID, string Name, int Credits)
    {
        this.courseID = CourseID;
        this.title = Name;
        this.credits = Credits;
    }
} 
```

在注册班

```
 public class Registration 
{
    public Student studentData { get; set; }
    public Course courseData { get; set; } 
    public DateTime DOEnroll { get; set; } 

    public Registration ()
    {
    }

    public Registration (Student sData, Course cData, DateTime doe)
    {
        this.studentData = sData;
        this.courseData = cData;
        this.DOEnroll = doe;

    }

} 
```

在 UpdateScore 类中

```
 public class UpdateScore 
{
    public Registration enrollData { get; set; }
    public int score { get; set; }

    public UpdateScore () { }

    public UpdateScore (Registration enrData, int sco)
    {
        this.enrollData = enrData;
        this.score = sco;
    }
} 
```

现在我正在使用此查询进行更新，但在 studentID 和 CourseID 中显示空数据

代码是：

```
 public static void Update(UpdateScore score)
    {
        SqlConnection conn = DB.GetConnection();

        try
        {
            conn.Open();
            string selectStm = "UPDATE EnrollmentTable set Score = @Score where StudentID = @StudentID AND  CourseID = @CourseID";

            SqlCommand command = new SqlCommand(selectStm, conn);

            SqlParameter param1 = new SqlParameter();
            SqlParameter param2 = new SqlParameter();
            SqlParameter param3 = new SqlParameter();

            param1.ParameterName = "@StudentID";
            param2.ParameterName = "@CourseID";
            param3.ParameterName = "@Score";

            Student st = new Student();
            Course cr = new Course();

            Registration enr = new Registration ();

            enr.courseData = cr;
            enr.studentData = st;
            score.enrollData = enr;

            param1.Value = st.studID ;
            param2.Value = cr.courseID;
            param3.Value = score.score;

            command.Parameters.Add(param1);
            command.Parameters.Add(param2);
            command.Parameters.Add(param3);

            int i = command.ExecuteNonQuery();
        }
        catch (SqlException ex)
        {
            throw ex;
        }
        finally
        {
            conn.Close();//Close Connection
        }

    } 
```

它给了我这个例外

**参数化查询“(@StudentID nvarchar(4000),@CourseID nvarchar(4000),@Score int)U”需要未提供的参数“@StudentID”。**

您能告诉我如何获取 StudentID 和 CourseID 中的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:30:31.060

您不应该在参数名称本身中有@。改变

```
param1.ParameterName = "@StudentID";
param2.ParameterName = "@CourseID";
param3.ParameterName = "@Score"; 
```

至

```
param1.ParameterName = "StudentID";
param2.ParameterName = "CourseID";
param3.ParameterName = "Score"; 
```

还，

*   您捕获异常只是为了再次抛出它。不要捕获一个你不会做一些有用的事情的异常。
*   使用*using*关键字比在*finally*块中手动关闭连接更简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:31:37.857

埃里克对你的问题给出了正确的解释。我想指出另一个问题。

在您的学生班级中，您稍后分配给 param1.Value 的自动属性 ​​studID 是一个字符串。C# 中的字符串是对象，因此它们的默认值为 null。您的更新代码没有为 studID 分配任何值，因此当您将其分配给 param1.Value 时，实际上是在将 null 分配给 param1.Value。这可能不是你想要的。

与 CourseID 相同。

假设您在 Update 方法中收到的 UpdateScore 已按照对象模型的建议正确构造了其中的所有数据，则不应创建新的 Student 或 Course 对象。相反，做类似的事情

```
param1.Value = score.enrollData.studentData.studID; 
```

以及其他信息的类似内容。

继续编码！

注意：这看起来很像家庭作业，因此您还应该借此机会考虑一下代码在做什么，还可以使用调试器运行它以查看如何分配值等。我已经概述了一些帮助，但我不会t为你做你的全部工作:-)

# php - PHP表单提交不刷新

> ID：11910830
> 
> 赞同：1
> 
> 时间：2012-08-11T00:26:48.310
> 
> 标签：php, javascript, forms, refresh

创建此表单时，我完成了教程，并对其进行了编辑和格式化以匹配我的站点。原始表单按照我想要的方式工作，而我的工作方式除了在提交表单时没有向上滑动，而是页面刷新。我已经对代码进行了很多次比较，并查看了所有地方，无法弄清楚我更改或遗漏了什么导致我刷新页面。任何帮助将不胜感激。我已经花了几个小时来解决这个问题，而且我敢肯定它很小。

这是原始教程： http: [//www.hongkiat.com/blog/ajax-html5-css3-contact-form-tutorial/](http://www.hongkiat.com/blog/ajax-html5-css3-contact-form-tutorial/)

这是我的代码：

标头中的 PHP：

```
<?php 
error_reporting(E_ALL ^ E_NOTICE); // hide all basic notices from PHP

//If the form is submitted
if(isset($_POST['submitted'])) {

// require a name from user
if(trim($_POST['contactName']) === '') {
    $nameError =  '<strong>WARNING:</strong> Please provide your full name.'; 
    $hasError = true;
} else {
    $name = trim($_POST['contactName']);
}

// need valid email
if(trim($_POST['email']) === '')  {
    $emailError = '<strong>WARNING:</strong> Please provide an email address.';
    $hasError = true;
} else if (!preg_match("/^[[:alnum:]][a-z0-9_.-]*@[a-z0-9.-]+\.[a-z]{2,4}$/i", trim($_POST['email']))) {
    $emailError = 'Please provide a valid email address.';
    $hasError = true;
} else {
    $email = trim($_POST['email']);
}

// require a phone from user
if(trim($_POST['phone']) === '') {
    $phoneError =  '<strong>WARNING:</strong> Please provide a phone number.'; 
    $hasError = true;
} else {
    $phone = trim($_POST['phone']);
}

// we need at least some content
if(trim($_POST['comments']) === '') {
    $commentError = '<strong>WARNING:</strong> Please provide a message.';
    $hasError = true;
} else {
    if(function_exists('stripslashes')) {
        $comments = stripslashes(trim($_POST['comments']));
    } else {
        $comments = trim($_POST['comments']);
    }
}

// upon no failure errors let's email now!
if(!isset($hasError)) {

    $emailTo = 'myemail@gmail.com';
    $subject = 'Submitted message from '.$name;
    $sendCopy = trim($_POST['sendCopy']);
    $body = "Name: $name \n\nEmail: $email \n\nPhone: $phone \n\nComments: $comments";
    $headers = 'From: ' .' <'.$email.'>' . "\r\n" . 'Reply-To: ' . $email;

    mail($emailTo, $subject, $body, $headers);

    // set our boolean completion value to TRUE
    $emailSent = true;
}
}
?> 
```

用 PHP 形成：

```
 <div class="separator">
                <h5>Keep in touch</h5>
                <div class="sep_line"></div><!-- separator line -->
            </div>

            <div class="clear"></div>

            <div class="twoThirds">

        <?php if(isset($emailSent) && $emailSent == true) { ?>
            <div class="Note Success hideit">
            <p><strong>SUCCESS: </strong>Your message has been sent.</p>
            </div>
        <?php } else { ?>

                <div id="respon">

                <?php if(isset($hasError) || isset($captchaError) ) { ?>
                    <div class="Note Failure hideit">
                    <p><strong>FAILURE: </strong>Error submitting the message.</p>
                    </div>
                <?php } ?>

                    <form action="contact.php" method="post" id="contact-form">    

                        <label for="name">
                            Name:  *                    </label>
                        <input type="text" name="contactName" id="contactName" value="<?php if(isset($_POST['contactName'])) echo $_POST['contactName'];?>" size="22" tabindex="1" class="nameInput">
                        <?php if($nameError != '') { ?>
                            <br><div class="Note Warning hideit"><p><?php echo $nameError;?></p></div> 
                        <?php } ?>
                       <label for="email">
                            Email:  *                   </label>
                        <input type="text" name="email" id="email" value="<?php if(isset($_POST['email']))  echo $_POST['email'];?>" size="22" tabindex="2" class="emailInput">  
                        <?php if($emailError != '') { ?>
                            <br><div class="Note Warning hideit"><p><?php echo $emailError;?></p></div>
                        <?php } ?>
                        <label for="phone">
                            Phone:  *               </label>
                        <input type="text" name="phone" id="phone" value="<?php if(isset($_POST['phone']))  echo $_POST['phone'];?>" size="22" tabindex="3" class="webInput">
                        <?php if($phoneError != '') { ?>
                            <br><div class="Note Warning hideit"><p><?php echo $phoneError;?></p></div> 
                        <?php } ?>
                        <label for="message">
                            Your Message:   *               </label>
                        <textarea name="comments" id="commentsText" tabindex="4" class="messageInput"><?php if(isset($_POST['comments'])) { if(function_exists('stripslashes')) { echo stripslashes($_POST['comments']); } else { echo $_POST['comments']; } } ?></textarea>
                        <?php if($commentError != '') { ?>
                            <br><div class="Note Warning hideit"><p><?php echo $commentError;?></p></div> 
                        <?php } ?>                            
                        <br>

                        <input name="reset" class="button" type="reset" id="reset" tabindex="5" value="Reset">
                        <input name="submit" class="button" type="submit" id="submit" tabindex="6" value="Submit">
                        <input type="hidden" name="submitted" id="submitted" value="true" />                            
                    </form>

                </div>
        <?php } ?>

        </div><!-- end main contact-us --> 
```

Javascript：

```
<script type="text/javascript">
<!--//--><![CDATA[//><!--
$(document).ready(function() {
    $('form#contact-us').submit(function() {
        $('form#contact-us .error').remove();
        var hasError = false;
        $('.requiredField').each(function() {
            if($.trim($(this).val()) == '') {
                var labelText = $(this).prev('label').text();
                $(this).parent().append('<span class="Note Warning hideit">Your forgot to enter your '+labelText+'.</span>');
                $(this).addClass('inputError');
                hasError = true;
            } else if($(this).hasClass('email')) {
                var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                if(!emailReg.test($.trim($(this).val()))) {
                    var labelText = $(this).prev('label').text();
                    $(this).parent().append('<span class="Note Warning hideit">Sorry! You\'ve entered an invalid '+labelText+'.</span>');
                    $(this).addClass('inputError');
                    hasError = true;
                }
            }
        });
        if(!hasError) {
            var formInput = $(this).serialize();
            $.post($(this).attr('action'),formInput, function(data){
                $('form#contact-us').slideUp("fast", function() {                  
                    $(this).before('<p class="Note Success hideit"><strong>SUCCESS: </strong>Your message has been sent.</p>');
                });
            });
        }

        return false;   
    });

});
//-->!]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:21:07.287

解决方法很简单，

主要是您缺少指定`id`您提交的表单的正确性，

```
<form action="contact.php" method="post" id="contact-form"> 
```

它应该在哪里

```
<form action="contact.php" method="post" id="contact-us"> 
```

表单中缺少一些属性，您在 javascript 中选择了这些属性

例如。

*   `.requiredField`
*   `.error`

尝试纠正这些。

**编辑**

粗略编辑的表单块

```
<form action="contact.php" method="post" id="contact-us">    

    <label for="name">
        Name:  *                    </label>
    <input type="text" name="contactName" id="contactName" value="<?php if (isset($_POST['contactName'])) echo $_POST['contactName']; ?>" size="22" tabindex="1" class="nameInput requiredField">
    <?php if ($nameError != '') { ?>
        <br><div class="error"><p><?php echo $nameError; ?></p></div> 
    <?php } ?>
    <label for="email">
        Email:  *                   </label>
    <input type="text" name="email" id="email" value="<?php if (isset($_POST['email'])) echo $_POST['email']; ?>" size="22" tabindex="2" class="email requiredField">  
    <?php if ($emailError != '') { ?>
        <br><div class="error"><p><?php echo $emailError; ?></p></div>
    <?php } ?>
    <label for="phone">
        Phone:  *               </label>
    <input type="text" name="phone" id="phone" value="<?php if (isset($_POST['phone'])) echo $_POST['phone']; ?>" size="22" tabindex="3" class="webInput requiredField">
    <?php if ($phoneError != '') { ?>
        <br><div class="error"><p><?php echo $phoneError; ?></p></div> 
    <?php } ?>
    <label for="message">
        Your Message:   *               </label>
    <textarea name="comments" id="commentsText" tabindex="4" class="messageInput requiredField"><?php if (isset($_POST['comments'])) {
        if (function_exists('stripslashes')) {
            echo stripslashes($_POST['comments']);
        } else {
            echo $_POST['comments'];
        }
    } ?></textarea>
    <?php if ($commentError != '') { ?>
            <br><div class="error"><p><?php echo $commentError; ?></p></div> 
    <?php } ?>                            
    <br>

    <input name="reset" class="button" type="reset" id="reset" tabindex="5" value="Reset">
    <input name="submit" class="button" type="submit" id="submit" tabindex="6" value="Submit">
    <input type="hidden" name="submitted" id="submitted" value="true" />                            
</form>​ 
```

**另一个编辑** ​</p>

在您的 JS 文件更改中，

```
$(this).parent().append('<span class="Note Warning hideit"> 
```

到

```
$(this).parent().append('<span class="error"> 
```

和

```
$(this).before('<p class="Note Success hideit"> 
```

到

```
$(this).before('<p class="tick"> 
```

就像在教程中一样。

# java - 为什么浮点数在将 1 除以 2 或 4 时返回 0？

> ID：11910833
> 
> 赞同：0
> 
> 时间：2012-08-11T00:28:33.023
> 
> 标签：java, android, opengl-es

这是我用来飞过我的精灵表的方法。在对象类中，我跟踪信息并执行所有循环，这基本上只需要分配纹理映射坐标。只是它似乎不起作用。但我记录了我翻阅行/列的方式，它正在正确循环。但就纹理而言，我什么也没看到。一点也不。我错过了什么吗？

```
 public void SetToAnimatedTexture(int NumFramesWide, int NumFramesTall, int CurrentRow, int CurrentColumn) {
    /***************************************************************************************** 
     * This Assembles our Vertices in the correct spots by disassembling
     * our custom rectangles corners, and adds animation. Call this after creating the meshRect
     * *****************************************************************************************/

    float frameWidth = 1/NumFramesWide;
    float frameHeight = 1/NumFramesTall;

    float u1 = frameWidth*CurrentColumn;
    float u2 = (frameWidth*CurrentColumn) + frameWidth;
    float u3 = (frameWidth*CurrentColumn) + frameWidth;
    float u4  = frameWidth*CurrentColumn;

    float v1 = (frameHeight*CurrentRow) + frameHeight;
    float v2 = (frameHeight*CurrentRow) + frameHeight;
    float v3 = frameHeight*CurrentRow;
    float v4 = frameHeight*CurrentRow;

    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(4 * VERTEX_SIZE);
    byteBuffer.order(ByteOrder.nativeOrder());
    vertices = byteBuffer.asFloatBuffer();

    float x1 = (float) rect.BottomLeftCorner.x;
    float x2 = (float) rect.BottomRightCorner.x;
    float x3 = (float) rect.TopRightCorner.x;
    float x4 = (float) rect.TopLeftCorner.x;

    float y1 = (float) rect.BottomLeftCorner.y;
    float y2 = (float) rect.BottomRightCorner.y;
    float y3 = (float) rect.TopRightCorner.y;
    float y4 = (float) rect.TopLeftCorner.y;

    vertices.put(new float[] { x1, y1, 1, 1, 1, 1, u1, v1,
                                x2, y2, 1, 1, 1, 1, u2, v2,
                                x3, y3, 1, 1, 1, 1, u3, v3,
                                x4, y4, 1, 1, 1, 1, u4, v4 });
                            //  x   y   r  g  b  A   u|s  v|t
                            //  x,y are coordinates
                            //  rgba = color red green blue alpha
                            //  u|s v|t = UV or ST texture coordinates
    vertices.flip();

    byteBuffer = ByteBuffer.allocateDirect(6 * 2);
    byteBuffer.order(ByteOrder.nativeOrder());
    indices = byteBuffer.asShortBuffer();
    indices.put(new short[] { 0, 1, 2,
                                2, 3, 0 });
    indices.flip();

} 
```

这是我为自己建立的框架的一部分。

好的，通过做一些记录来解决这个问题。这就是问题所在

```
 float frameWidth = 1/NumFramesWide;
    float frameHeight = 1/NumFramesTall; 
```

它将两个值都返回为 0。它说

```
 1/2=0 , 1/4=0 
```

我检查了所有变量的值，这就是问题所在。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T00:45:33.997

它首先进行整数除法，然后进行赋值。因为 1 和`NumFrames*`都是整数，所以你最终得到 0。

您可以通过将代码更改为来解决此问题

```
float frameWidth = 1.f/NumFramesWide;
float frameHeight = 1.f/NumFramesTall; 
```

# java - 在java中打印出与我的正则表达式匹配的字符串？

> ID：11910834
> 
> 赞同：0
> 
> 时间：2012-08-11T00:28:38.813
> 
> 标签：java, regex, string, pattern-matching

**可能重复：** [在java中打印正则表达式匹配](https://stackoverflow.com/questions/836704/print-regex-matches-in-java)

我在 java 中使用 Matcher 类将字符串与特定的正则表达式匹配，我使用 Pattern 类将其转换为 Pattern。我知道我的正则表达式有效，因为当我执行 Matcher.find() 时，我得到了我应该得到的真实值。但是我想打印出产生这些真实值的字符串（意味着打印出与我的正则表达式匹配的字符串），并且我没有在匹配器类中看到实现这一点的方法。请让我知道是否有人以前遇到过这样的问题。我很抱歉，因为这个问题相当初级，但我对正则表达式相当陌生，因此我仍然在正则表达式世界中寻找自己的方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T00:30:37.313

假设`m`是你的匹配器：

`m.group()`将返回匹配的字符串。

**[编辑]**添加了有关匹配组的信息

此外，如果您的正则表达式在括号内有部分，`m.group(n)`将返回与括号内的第 n 个组匹配的字符串；

```
Pattern p = Pattern.compile("mary (.*) bob");
Matcher m = p.matcher("since that day mary loves bob"); 
```

`m.group()`返回“玛丽爱鲍勃”。
`m.group(1)`回报“爱”。

# sqlite - Cordova/Phonegap ORM？

> ID：11910837
> 
> 赞同：12
> 
> 时间：2012-08-11T00:29:15.433
> 
> 标签：sqlite, cordova

是否有任何与 Cordova 兼容的 ORM javascript 项目，例如[ORMLite](http://ormlite.com/)？我做了google搜索，github搜索，在这里搜了一下，没找到。

如果没有，也许是时候开始了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-04T12:36:08.323

这个旧的，但我偶然发现了它，所以其他人也可能......最终对我有用的是使用[Cordova SQLite 插件](https://github.com/brodysoft/Cordova-SQLitePlugin)用于没有大小限制的数据库和[Persistence.js](https://github.com/coresmart/persistencejs) ORM 来使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T02:43:21.500

这个问题很老，但我实际上最终使用了[Persistence.js 。](https://github.com/zefhemel/persistencejs)它有自己的缺点，但每个 ORM 都有。

它实际上会使用手机上的 HTML5 存储。每个规范限制为 5mb，但显然个别供应商可能不会强制执行或遵循此限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T12:54:29.487

是的，有一个开源框架，称为 Siminov Hybrid，它为 Android Native (Java) 和 Web (JavScript) 提供 ORM。它易于配置，同时适用于 Native 和 Web。

与 Phonegap 一起工作，以后它也将支持其他框架。

[http://siminov.github.io/android-hybrid](http://siminov.github.io/android-hybrid)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-22T17:59:23.583

我不知道为什么没有官方的带有cordova的sqlite的ORM，尽管它是非常需要的！

无论如何，在撰写本文时，您有以下选项： 1- typeorm 和 angularjs2 （他们承诺为 sqlite 提供支持） 2- ionic2-orm 它是前一点的一个分支，但是看起来没有支持直到现在 3-ionic2-orm2 也是前一点的一个分支（duh ..）你可以在这个[https://github.com/sidneycorreia/ionic-orm上访问它](https://github.com/sidneycorreia/ionic-orm)

4-到目前为止最好的选择是 pouchdb 检查这个[https://pouchdb.com/](https://pouchdb.com/)

# node.js - Mongoose 连接/模型：需要始终在打开状态下运行？

> ID：11910842
> 
> 赞同：6
> 
> 时间：2012-08-11T00:29:51.437
> 
> 标签：node.js, mongodb, mongoose, express

我正在使用 Mongoose 3，最明显的连接数据库的方法是

```
conn = mongoose.createConnection(...)
conn.on("open", ...) 
```

问题是，我是否需要在 open 回调中定义我的所有模型？如果是这样，我将不得不创建一个`initMongoose.coffee`看起来像

```
# initMongoose.coffee

mongoose = require "mongoose"
module.exports = mongoose.createConnection ...

# modelExample.coffee

conn = require "./initDatabase"
conn.on "open", -> 
    ... define model?
    modeule.exports = model # I think this does not work? 
```

我想我在 Node 文档的某处读到不能在这样的回调中定义模块？

* * *

由于我只使用 1 个连接，我想我可以使用

```
mongoose.connect ... 
```

哪个不接受任何回调所以我想是同步的？我可以定义我的所有模型并在之后进行查询`connect()`吗？它目前有效，但可能是因为它足够快。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-11T00:48:01.460

Mongoose 会缓冲命令直到完成连接，因此您可以将其视为同步的，并定义您的模型并随时开始使用该库；只有当您想开始实际插入或检索数据时，您才需要建立连接。

# c# - 如何为我的程序正确设置类设计（C# .Net）

> ID：11910843
> 
> 赞同：0
> 
> 时间：2012-08-11T00:30:07.573
> 
> 标签：c#, .net, class

我是一个自学成才的初级程序员。我设计了一个赛马程序，它读取一个文件，该文件包含每场比赛中每匹马的信息，包括该马前 10 场比赛的信息。然后将信息输出为可读的格式，有点像赛马形式或程序。

例如，8 月 10 日星期六在 Churchill Downs 有 9 场比赛，每场比赛有 8 匹马。因此，当天的 csv 文件将包含 72 匹马。这些马中的每一匹也会有他们最近 10 场比赛的统计数据。

我目前所做的是将 csv 文件读取到列表中。然后我将列表中包含的信息转移到马对象列表中，该列表基本上存储了每匹马的所有信息。

我觉得使用类来存储所有信息的唯一好处是更容易操作这些数据，因为我不必记住索引。

我想知道是否有更好的方法来设计这个程序？有什么见解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T01:01:17.600

如果您考虑这里真正发生的事情，您会发现马匹、比赛以及特定马匹在特定比赛中的表现。

所以，如果你允许你的类设计遵循这个，你可能会有这样的东西：

```
public class Horse
{
    public string Name { get; set; }
    public Gender Gender { get; set; }
    public Breed Breed { get; set; }
    public DateTime WhenBorn { get; set; }
    // etc...

    public TimeSpan GetAge()
    {
        return DateTime.Now - WhenBorn;
    }
}

public class Race
{
    public string Venue { get; set; }
    public DateTime WhenStarted { get; set; }
    public DateTime WhenFinished { get; set; }
    // etc...
}

public class HorseRace
{
    public Race Race { get; set; }
    public Horse Horse { get; set; }
    public int? PlaceFinished { get; set; } // null if did not finish
    public string JockeyName { get; set; }
    public double HorseWeighIn { get; set; } // weight of horse at time of race
    public double JockeyWeighIn { get; set; } // weight of jockey at time of race
    // etc...
}

public enum Gender
{
    Colt,
    Filly
}

public enum Breed
{
    // fill in breeds here
} 
```

一旦你有了一个你喜欢的类设计，你就可以开始考虑如何存储你的数据，以便更容易地将它放入你的类中。您可以为每个类创建一个单独的文件，而不是一个包含大量重复数据的巨型 csv 文件，例如 Horses.csv、Races.csv、HorseRaces.csv。最终，您可能希望从 CSV 升级到基于文件的小型数据库。

最终，您希望拥有三个列表：`Horses`、`Races`和`HorseRaces`。要显示这些列表，您可以遍历您的`HorseRaces`，并轻松获取您需要的所有数据，只需使用 和 的属性，`HorseRace`然后使用`Race`和的属性`Horse`。例如，`horseRace.Horse.Name`。

# glassfish - 如何从命令行禁用和启用管理控制台（admin-listener，端口 4848）

> ID：11910847
> 
> 赞同：6
> 
> 时间：2012-08-11T00:30:46.190
> 
> 标签：glassfish, glassfish-3, asadmin

我想控制何时何地可以访问管理服务

如何执行以下操作之一（如果可能）

1.  仅从 localhost 启用管理控制台（我知道 disable-secure-admin，但我仍然不希望任何人在最后添加 4848 时看到控制台登录页面）我将使用 SSH 隧道连接

2.  或者，能够使用证书，因此只有经过认证的客户端才能看到控制台

3.  或者，能够在需要时按需启动/停止管理服务，而不是向外界开放（例如 start stop __asadmin 虚拟服务器）

以上任何一种可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T01:24:03.133

好的，我通过猜测找到了它

方案#1的解决方案

*   确保首先在端口 4848 上有 SSH 隧道
*   转到配置 -> 服务器配置 -> 网络配置 -> 网络监听器 -> 管理员监听器
*   在**常规**选项卡下，在**地址：**字段中替换`0.0.0.0`为`127.0.0.1`
*   重启服务器

方案#3的解决方案

我没有找到任何命令行方式来启用/禁用虚拟服务器、网络侦听器或协议，但编辑 domain.xml 显示它就在那里，只需注释掉并重新启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T15:09:51.470

1.  [使用 asadmin 更新名为 的 HTTP 网络侦听器`admin-listener`](http://docs.oracle.com/cd/E18930_01/html/821-2416/ggnfu.html#giwls)。

2.  [asadmin enable-secure-admin-principal](http://docs.oracle.com/cd/E18930_01/html/821-2433/enable-secure-admin-principal-1.html) “指示 GlassFish Server 在启用安全管理时接受来自指定 SSL 证书标识的客户端的管理请求”。

3.  [asadmin enable-secure-admin](http://docs.oracle.com/cd/E18930_01/html/821-2433/enable-secure-admin-1.html#scrolltoc) “启用安全管理员（如果尚未启用），可选择更改用于 DAS 到实例管理消息的别名或用于实例到 DAS 管理消息的别名”。也是一个关于这个主题 [的好博客。](https://blogs.oracle.com/quinn/entry/securing_adminstration_in_glassfish_server1)*这不会打开/关闭管理员，而是启用/禁用对管理控制台的远程访问，而不会出现 (1) 的复杂情况*。

# mysql - SQL - 不明确的列

> ID：11910848
> 
> 赞同：0
> 
> 时间：2012-08-11T00:30:54.893
> 
> 标签：mysql, sql

我看不出这个查询有什么问题。我收到一条错误消息：

> “ **from 子句中的 article_id 列不明确**”

我知道这可能与表名别名有关，但不确定如何修复。如果查询较小，我也许可以解决一些问题，但这对我来说很困惑，每次我更改某些内容以尝试修复它时，其他东西都会停止 - 所以我想我会先问。

```
SELECT bt.topic_title, f.article_id, p.photo_id, ba.title, ba.slug,
IFNULL(c.cnt,0) comments, IFNULL(ph.cnt,0) photos, IFNULL(v.cnt,0) videos
FROM blog_article_followers AS f
LEFT OUTER JOIN (
    SELECT article_id, COUNT(comment_id) as cnt
    FROM blog_comments
    GROUP BY article_id) c
    ON f.article_id = c.article_id
LEFT OUTER JOIN (" _
    SELECT article_id, COUNT(photo_id) as cnt
    FROM photos
    GROUP BY article_id) ph
    ON f.article_id = ph.article_id
LEFT OUTER JOIN (
    SELECT article_id, COUNT(video_id) as cnt
    FROM videos
    GROUP BY article_id) v
    ON f.article_id = v.article_id
LEFT JOIN blog_topics bt ON f.topic_id = bt.topic_id
LEFT JOIN blog_articles AS ba USING (article_id)
LEFT JOIN photos AS p USING (article_id)
WHERE f.member_id = 100 AND p.cover = 1
ORDER BY f.follow_date DESC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:37:49.333

尝试替换这个：

```
LEFT JOIN blog_articles AS ba USING (article_id)
LEFT JOIN photos AS p USING (article_id) 
```

有了这个

```
LEFT JOIN blog_articles AS ba ON f.article_id = ba.article_id
LEFT JOIN photos AS p ON f.article_id = photos.article_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:32:33.753

您必须重命名该列

```
LEFT JOIN photos AS p USING (p.article_id) 
```

`article_id`或属于哪个表

# sql - 两个查询。相同的输出。一个需要 2 小时，另一个需要 0 秒。为什么？

> ID：11910855
> 
> 赞同：5
> 
> 时间：2012-08-11T00:31:52.337
> 
> 标签：sql, sql-server-2008, query-optimization, linked-server

我在临时表中插入了一些 ID `#A`，如下所示：

```
SELECT DISTINCT ID
INTO #A
FROM LocalDB.dbo.LocalTable1
WHERE ID NOT IN (SELECT DISTINCT ID FROM LocalDB.dbo.LocalTable2)
GO

CREATE INDEX TT ON #A(ID)
GO 
```

我正在尝试使用我在前一阶段收集的标识符从远程链接服务器获取一些信息：

**查询一：**

```
SELECT ID, Desc
FROM RemoteLinkedServer.DB.dbo.RemoteTable X
WHERE ID IN (SELECT ID FROM #A) 
```

**查询 2：**

```
SELECT ID, Desc
FROM RemoteLinkedServer.DB.dbo.RemoteTable X
INNER JOIN #A Y
ON X.ID = Y.ID 
```

现在在下面的查询中，我正在做的是获取临时表的输出，复制行并将它们正确格式化为逗号分隔的列表，然后手动将其放入查询中。

**查询 3：**

```
SELECT ID, Desc
FROM RemoteLinkedServer.DB.dbo.RemoteTable X
WHERE ID IN (-- Put all identifiers here --) 
```

查询`1`和`2`执行需要 2 小时，查询`3`需要 0 秒（我的临时表包含大约 200 行）。我不知道发生了什么，也没有权限检查远程服务器是否在 ID 上有相关索引，但令人困惑的是，手动构建的查询立即运行，表明出现了问题在查询优化阶段。

关于这里出了什么问题或如何加快查询速度的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T00:40:44.447

查询 1 和 2 会导致 RemoteTable 中的所有数据都被拉入本地数据库，以便执行连接操作。这会消耗 RAM、网络带宽，并且在执行查询时通常会非常慢。

查询 3 允许远程服务器过滤结果以仅发送您想要的匹配项。

基本上，它归结为谁来做这项工作。查询 1/2 需要您的本地数据库来执行；查询 3 让远程执行此操作。

如果您在该远程表中有大量数据，那么您可能会遇到网络拥塞等问题。

查询链接服务器的最佳方法是构建查询，例如远程服务器完成所有工作并将结果发送回本地服务器。这将优化获取所需数据所需的网络、内存和磁盘资源量。

任何时候您必须跨服务器边界加入（使用链接服务器），这将是一场灾难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T01:07:11.117

作为参考，这是我根据@ChrisLively 的建议解决问题的方法：

```
SELECT DISTINCT ID
INTO #A
FROM LocalDB.dbo.LocalTable1
WHERE ID NOT IN (SELECT DISTINCT ID FROM LocalDB.dbo.LocalTable2)
GO

CREATE INDEX TT ON #A(ID)
GO

DECLARE @IDList VARCHAR(MAX)
SELECT @IDList=(SELECT TOP 1 REPLACE(RTRIM((
                SELECT DISTINCT CAST(ID AS VARCHAR(MAX)) + ' ' 
                FROM #A AS InnerTable               
                FOR XML PATH (''))),' ',', '))
FROM #A AS OuterResults

DECLARE @sql AS varchar(MAX)
SET @sql = 'SELECT * FROM RemoteLinkedServer.RemoteDB.dbo.RemoteTable X WHERE ID IN (' + @IDList + ')'

EXEC (@sql)

DROP TABLE #A
GO 
```

# javascript - 从另一个页面执行jquery函数？

> ID：11910859
> 
> 赞同：0
> 
> 时间：2012-08-11T00:32:59.993
> 
> 标签：javascript, jquery

在我的页面上，我动态更新了一个由数据库填充的页面。你选择州和城市，他会告诉你城里有哪些商店。一些城市有相当广泛的商店列表，所以我需要一个滚动条。我正在使用 mCustomScrollbar。

为了让它工作，所以我称之为这个脚本：

```
<script>
    (function($){
        $(window).load(function(){
            $("#exibe_lojas").mCustomScrollbar({
                scrollButtons:{
                    enable:true
                },
                autoDraggerLength: false
            });
        });
    })(jQuery);
</script> 
```

但是，由于我仍然没有内容，我必须在加载我的数据后调用它，而这是另一个 javascript 文件，它在数据库中进行查询，并将结果显示在一个 div 中。鉴于结果我这样做：

```
function stateChanged()
{ 
    if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
    { 
        document.getElementById("exibe_cidade").innerHTML=xmlHttp.responseText
    }
} 
```

我认为这是我放置滚动条功能的地方，但因为它在另一个文件中；我不知道怎么称呼它。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:36:33.083

最明显的方法是将代码放入`stateChanged`方法中，但如果文件内容无法编辑，您可以监听 ID 为“exibe_cidade”的元素上的内容更改：

```
$( '#exibe_cidade' ).bind( 'contentchanged', function() {
    $("#exibe_lojas").mCustomScrollbar( {
        // your magic here
    } );
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:39:54.493

尝试这个 ：

```
function stateChanged()
{ 
    if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
    { 
        document.getElementById("exibe_cidade").innerHTML=xmlHttp.responseText;

        $("#exibe_lojas").mCustomScrollbar({
            scrollButtons:{
                enable:true
            },
            autoDraggerLength: false
        });
    }
} 
```

# php - 将文本文件每一行上传到mysql行

> ID：11910861
> 
> 赞同：1
> 
> 时间：2012-08-11T00:33:25.247
> 
> 标签：php, mysql

我有 email.txt 存储在我的服务器中 email.txt 的路径是

```
/home/xxxx/public_htnl/email.txt 
```

email.txt 包含数千封订阅者的电子邮件，每天都会更新。我想每天使用 cron 将这些电子邮件导入其他数据库。

我已经尝试过了，但它给出了错误

不能加载。`Access denied for user 'test'@'localhost' (using password: YES)`

我想我没有运行权限`LOAD DATA INFILE`

我的代码是：

```
<?php

$db = mysql_connect('localhost', 'test', 'test')
or die('Failed to connect');
mysql_select_db('test', $db);

$string = file_get_contents("http://www.xyz.com/email.txt", "r");
$myFile = "/home/xxx/public_html/email.txt";

$fh = fopen($myFile, 'w') or die("Could not open: " . mysql_error());
fwrite($fh, $string);
fclose($fh);

$result = mysql_query("LOAD DATA INFILE '$myFile'" .
                  " INTO TABLE email");
if (!$result) {
die("Could not load. " . mysql_error());
}
?> 
```

可以接受任何其他好的方法。请不要建议在存储电子邮件等时将数据直接存储在其他数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:55:44.987

作为 root MySQL 用户，尝试运行查询：

```
GRANT FILE on *.* to 'test'@'localhost'; 
```

如果您仍然收到错误，请确保您的测试用户的用户名和密码正确，并且您访问 MySQL 的主机与测试用户和密码的主机匹配。

编辑：

```
<?php

$db = mysql_connect('localhost', 'test', 'test') or die(mysql_error());

if (!mysql_select_db('test', $db)) die(mysql_error());

$emails = file("http://www.xyz.com/email.txt");

foreach($emails as $email) {
    $email = trim($email);
    if ($email == '' || strpos($email, '@') === false) continue;
    $email = mysql_real_escape_string($email);

    $query = "INSERT INTO `email` VALUES('$email')";
    $result = mysql_query($query);
    if (!$result) {
        echo "Failed to insert $email.  " . mysql_error() . "<br />\n";
    }
} 
```

如果有很多很多电子邮件，您可以构建一个电子邮件地址数组并每隔一段时间进行一次扩展插入。

```
INSERT INTO emails VALUES('email1'), ('email2'), ('email3'), ('email4') 
```

# php - 启用订单元框

> ID：11910867
> 
> 赞同：0
> 
> 时间：2012-08-11T00:34:30.960
> 
> 标签：php, wordpress

如何启用订单元框？我希望它设置顺序。

```
<?php $loop = new WP_Query( array( 'post_type' => 'bocker', 'posts_per_page' => 10, 'product_category' => 'spanskt',  'orderby' => 'meta_value', 'order' => 'ASC', ) ); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:04:56.280

这个链接应该有你需要的信息： http: [//codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)

这里还有一个关于这个主题的教程： [http ://wptheming.com/2010/08/custom-metabox-for-post-type/](http://wptheming.com/2010/08/custom-metabox-for-post-type/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:41:35.543

这篇文章解决了我的问题：[按自定义字段排序帖子](https://stackoverflow.com/questions/4076000/order-posts-by-custom-field)

我创建了一个名为“pub_year”的自定义字段（它甚至比元框更适合）：

```
<?php $loop = new WP_Query( array( 'post_type' => 'bocker', 'posts_per_page' => 10, 'product_category' => 'ex-jugoslaviskt', 'meta_key' => 'pub_year', 'orderby' => 'meta_value', 'order' => 'DESC' ) ); ?> 
```

# iphone - Objective-C：HTML 网站

> ID：11910874
> 
> 赞同：1
> 
> 时间：2012-08-11T00:36:11.927
> 
> 标签：iphone, html, objective-c, ios, xcode

我被告知要从该网站检索巴西圣保罗的交通数据：

[http://www.cetsp.com.br](http://www.cetsp.com.br)

我必须检索显示在各处的信息，包括网站的其他链接/部分。我不太确定怎么做。我必须解析 HTML 并找到了一个教程，但它并没有教我如何解析这个网站，或者特别是任何其他的。

如果你去那个网站，你会看到四个方块，分别写着北、南、东、西和他们的交通公里数之类的东西，我必须收集这些数据和信息。但是怎么办！？而且，我必须从这个站点获取流量的地图图像：

[http://www.cetsp.com.br/transito-agora/leste/mapa-de-fluidez.aspx](http://www.cetsp.com.br/transito-agora/leste/mapa-de-fluidez.aspx)

再次，但如何？我有 HTML 解析类 hpple。这是我到目前为止所知道的代码：

```
NSURL *tutorialsUrl = [NSURL URLWithString:@"http://www.cetsp.com.br"];
NSData *tutorialsHtmlData = [NSData dataWithContentsOfURL:tutorialsUrl];

TFHpple *tutorialsParser = [TFHpple hppleWithHTMLData:tutorialsHtmlData]; 
```

所以我真的很困惑如何开始这个。如果有人可以帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T03:49:47.657

对于您想要的每条数据，您将需要编写一些代码来从 HTML 中的文档树中检索该数据。

第一步是在 Safari/Chrome 的网络检查器中打开该站点，并了解您想要的数据在树中的哪个位置。

接下来，您需要编写代码以导航到文档树中的该点并提取该数据。每当我不得不做这样的事情时，我就被能够使用像 python 这样的语言宠坏了，它有很多模块可以用来完成这个。我对 Cocoa 在该领域的可用功能不是很熟悉，但请看一下：

[http://www.raywenderlich.com/14172/how-to-parse-html-on-ios](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)

Ray 提供了一个很好的示例，可以帮助您启动并运行。也许您已经看过这篇文章，在这种情况下，您已经顺利完成了。您只需要通过文档找到您需要的元素的路径。

# java - Android Parcelable

> ID：11910878
> 
> 赞同：0
> 
> 时间：2012-08-11T00:37:00.390
> 
> 标签：java, android

我有一个类可以控制我的 http 通信，并跟踪 http 会话。我遇到的问题是，我想从几个活动中使用这个类。
到目前为止，我发现的唯一选择是在主视图中将其设为静态，但如果应用程序在辅助视图中放置很长时间，则静态类变为空。我也尝试过使其可打包，但我无法通过我的 CookieStore 或我的 httpContext。这意味着每次我进入视图或离开视图时，我都必须重新对服务器进行身份验证，从而导致大量不必要的流量。

我如何通过 Parcelable 传递对象，或者是否有另一种类型的类扩展允许我创建一个所有 Activity 都可以查看的持久类？

```
public class JSON implements Parcelable {
private String URL;
private String HOSTNAME;
private Context f_context;
private DefaultHttpClient httpClient;
private CookieStore cookieStore;
private HttpContext httpContext;
protected boolean Authenticated = false;
protected long Authenticate_timeout = 0;

public int describeContents() {
    return 0;
}

public void writeToParcel(Parcel out, int flags) {
    Bundle b = new Bundle();
    b.putString("URL",URL);
    b.putString("HOSTNAME", HOSTNAME);
    b.putBoolean("Authenticated", Authenticated);
    b.putLong("Authenticate_timeout", Authenticate_timeout);
    out.writeBundle(b);
    Object[] o = new Object[4];
    o[0] = httpClient;
    o[1] = cookieStore;
    o[2] = httpContext;
    o[3] = f_context;
    out.writeArray(o);
    }
public static final Parcelable.Creator<JSON> CREATOR = new Parcelable.Creator<JSON>() {
    public JSON createFromParcel(Parcel in) {
        return new JSON(in);
    }

    public JSON[] newArray(int size) {
        return new JSON[size];
    }
};

private JSON(Parcel in) {
    Object[] o = in.readArray(null);
    httpClient = (DefaultHttpClient) o[0];
    cookieStore = (CookieStore) o[1];
    httpContext = (HttpContext) o[2];
    f_context = (Context) o[3];
    Bundle b = in.readBundle();
    URL = b.getString("URL");
    HOSTNAME = b.getString("HOSTNAME");
    Authenticated = b.getBoolean("Authenticated");
    Authenticate_timeout = b.getLong("Authenticate_timeout");
}

public JSON(Context context) {
    f_context = context;
    updateSettings();
    HttpParams myParams = new BasicHttpParams();
    HttpConnectionParams
            .setConnectionTimeout(myParams, Consts.http_timeout);
    HttpConnectionParams.setSoTimeout(myParams, Consts.http_timeout);
    httpClient = new DefaultHttpClient(myParams);
    cookieStore = new BasicCookieStore();
    httpContext = new BasicHttpContext();
    httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
} 
```

# php - 查找由 PHP 编码的关联数组的长度

> ID：11910889
> 
> 赞同：2
> 
> 时间：2012-08-11T00:39:50.737
> 
> 标签：php, javascript

我有一个在 php 中创建的多维数组，它被传递回 jQuery 脚本。我需要遍历这个数组并处理数据。

在 Firebug 中，我可以看到数据位于 data.data.items。我尝试使用 data.data.items.length 查找数组的长度，但它返回为未定义。有趣的是，这在我的 php 部分在传回一个包含 8 个空项的数组之前正常工作。现在它已填充（并且索引是字符串），长度不起作用。每个项目中还有一个对象。这是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:13:43.703

JavaScript 中的数组仍然是一个对象。当使用字符串（或任何非整数）设置值时，您实际上是在设置对象的属性（在使用整数键设置它时实际上也是在这样做，但处理方式略有不同）。

对于使用字符串作为键后突然损坏的问题，我希望 PHP 意识到当你有一个诚实的数组而不是一个关联数组时，它会`[]`在所有键都是整数和对象时发送数组（由 包围） （被 包围`{}`）否则。我相信在字符串键控的情况下，PHP 正在生成对象，因此`.length`变得未定义（而不是空数组中的 0）。

要回答您的问题，有一种简单的方法可以计算此数据的“长度”：

```
var i = 0;
for (var item in data.data.items) {
    i++;
} 
```

这将遍历每个属性`data.data.items`并计算它们。请注意，如果您（或您包含的任何库）向`Object`原型添加属性，这将不会产生预期的结果。这是相当少见的，但您在使用`for..in`.

您可以使用 Nagh 建议的方法解决此问题，该方法忽略未在该特定对象上定义的属性：

```
var i = 0;
for (var item in data.data.items) {
    if(data.data.items.hasOwnProperty(item)) {
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:13:50.177

您始终可以使用“foreach”类型的循环。在这种情况下，您不需要知道有多少数组长度，甚至不需要知道它是否为数组，因为您也可以遍历对象属性。

正如乔已经指出的那样，javascript 没有关联数组，当您尝试使用关联数组时 - 您最终会得到具有属性的对象。但是，如果你确定，这个对象只有属性 - 是你的数组，你可以使用这样的代码：

```
for (i in arr) {
  if (arr.hasOwnProperty(i)) {
    //do something with arr[i]
  }
} 
```

但是，如果您确实需要一个数组，请考虑使用整数作为数组索引。

# xcode - Xcode如何仅检查一个值是否为真然后显示一条消息

> ID：11910891
> 
> 赞同：1
> 
> 时间：2012-08-11T00:40:05.797
> 
> 标签：xcode

这是我的问题。我希望代码检查其中一个值`y`是否没有余数，然后显示消息素数。现在它正在显示每个值的消息`y`。

这是我的代码：

```
for (y = 2; y <= x-1; y ++) {

        if (x % y == 0){

                NSLog(@"Not prime");                       
        }
        else if(x % y != 0) {                
                NSLog(@"Is prime");               
        }

}
return 0;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:50:23.653

您需要将“主要”移出循环。您的方法检查它是否不是素数，然后在每次迭代循环时打印“素数”。如果它从不打印“Not Prime”，您只需要打印“Is Prime”。每次检查数字时，您的 If-Else 都会打印一个或另一个。一个简单的 BOOL（布尔值）可以使这成为可能。

尝试这样的事情：

```
BOOL prime = YES;

for (y = 2; y <= x-1; y ++) {

          if (x % y == 0){
                //If this is ever the case, print "Not Prime", flag the Boolean to "No", and break out of the loop.  No need to check any further
                NSLog(@"Not prime");
                prime = NO;
                break;
        }

}

//If we never ran into "Not Prime", print "Is Prime"
if(prime == YES)
    NSLog(@"Is prime");

return 0; 
```

# ios - iOS：设置属性

> ID：11910892
> 
> 赞同：2
> 
> 时间：2012-08-11T00:40:26.150
> 
> 标签：ios, pointers, pointer-address

当我使用当前保留的 NSArray 中的对象设置属性时，它会只存储指针（轻量级），还是将内容复制到属性中？

据我所知，它似乎只会分配指针，但我不确定。

此外，在什么情况下会使用 *pointer = *otherPointer 或 set 方法（例如 setDelegate）复制值，而不是仅传递指针（如果有）。它不应该总是只传递指针地址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T00:58:27.880

正如你所说，它总是通过指针。除非您专门添加取消引用符号，否则情况总是如此。

但是，当您向类添加属性并将 setter 设置为`copy`：

```
@property (nonatomic, copy) id obj; 
```

当使用点语法或 setter 时，这将被翻译为：

```
_obj = [otherObj copy]; 
```

在这里，这将取决于所讨论的对象是否支持复制自身，或者它会退回到它的超类`NSObject`或另一个中间类的副本。

此外，Collection 类`NSDictionary`并`NSArray`做一个浅拷贝，因为它们只复制对其对象的引用，所以你有两个指向同一组对象的集合。

# c# - 创建文件并将其保存到目录

> ID：11910893
> 
> 赞同：3
> 
> 时间：2012-08-11T00:40:30.380
> 
> 标签：c#, asp.net

我正在使用字符串生成器从这样的目录中读取多个文件：

```
StringBuilder sb = new StringBuilder();

sb.Append(System.IO.File.ReadAllText(
       HttpContext.Current.Server.MapPath("~\\Scripts\\File1.js")));

sb.Append(System.IO.File.ReadAllText(
       HttpContext.Current.Server.MapPath("~\\Scripts\\File2.js")));

var TheFile = sb.ToString(); 
```

现在我想将此 sb 保存在名为 MyFile.js 的文件中的 \Script 目录中。我看到了几种可用的方法，但我不确定选择哪一种。

我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T00:51:03.320

Server.MapPath() 不会读取文件，它只是根据服务器的相对路径为您提供正确的绝对路径。如果您想读入文件并将它们写入单个文件，请尝试这样的操作，

```
string filenameA = HttpContext.Current.Server.MapPath("~\\Scripts\\File1.js"));
string filenameB = HttpContext.Current.Server.MapPath("~\\Scripts\\File2.js"));

string fileContentA = File.ReadAllText(filenameA);
string fileContentB - Flie.ReadAllText(filenameB);

System.IO.File.WriteAllText("filename", fileContentA + "\n" + fileContentB); 
```

* * *

现在，如果您有许多文件要附加在一起，那么使用 StringBulider 将是提高性能的方法。

```
StringBuilder sb = new StringBuilder();
foreach (string filename in filenames)
    sb.AppendLine(File.ReadAllText(filename));

File.WriteAllText(sb.ToString()); 
```

* * *

此外，如果文件非常大并且不适合内存，则可以使用 FileStreams 仅从源流式传输并附加到主文件。

```
foreach (string filename in filenames)
{
     using (FileStream srcFile = new FileStream(filename, FileMode.Open, FileAccess.Read))
     using (FileStream desFile = new FileStream(targetFilename, FileMode.Append, FileAccess.Write))
           srcFile.CopyTo(desFile);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:51:13.683

此代码可以帮助您：

```
using (System.IO.StreamWriter file = new   
System.IO.StreamWriter("\\Script\\ MyFile.js"))
        {

                    file.WriteLine(sb.ToString());

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T00:51:30.347

干得好：

```
File.WriteAllText(HttpContext.Current.Server.MapPath("~\\Scripts\\MyFile.js"), sb.ToString()); 
```

# objective-c - 目标 C 语法错误？CS193 计算器视图控制器

> ID：11910899
> 
> 赞同：-1
> 
> 时间：2012-08-11T00:41:11.130
> 
> 标签：objective-c, ios5, cs193p

我遇到了很多关于同一个文件的问题，在清除了我的其他错误之后，我似乎仍然无法弄清楚。我认为错误是我有一个太多/很少 { 或 } 但在尝试了多种变化之后，我被卡住了。

我真的很感激第二次关注这个......谢谢！

下面立即显示有问题的部分，错误显示在 { else }

```
- (IBAction)digitPressed:(UIButton *)sender
{
    NSString *digit = sender.currentTitle;
    if (self.userIsInTheMiddleOfEnteringANumber); {
      self.display.text = [self.display.text stringByAppendingString:digit];
    } else {
        self.display.text = digit;
        self.userIsInTheMiddleOfEnteringANumber = YES;
    }
} 
```

完整的文件插入打击

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController ()
@property (nonatomic) BOOL userIsInTheMiddleOfEnteringANumber;
@property (nonatomic, strong) CalculatorBrain *brain;
@end

@implementation CalculatorViewController

@synthesize display = _display;
@synthesize userIsInTheMiddleOfEnteringANumber = _userIsInTheMiddleOfEnteringANumber;
@synthesize brain = _brain;

- (CalculatorBrain *)brain
{
    if (!_brain) _brain = [[CalculatorBrain alloc] init];
    return _brain;
}
- (IBAction)digitPressed:(UIButton *)sender
{
    NSString *digit = sender.currentTitle;
    if (self.userIsInTheMiddleOfEnteringANumber); {
      self.display.text = [self.display.text stringByAppendingString:digit];
    } else {
        self.display.text = digit;
        self.userIsInTheMiddleOfEnteringANumber = YES;
    }
}

- (IBAction)enterPressed
{
    [self.brain pushOperand:[self.display.text doubleValue]];
        self.userIsInTheMiddleOfEnteringANumber = NO;
}

- (IBAction)operationPressed:(UIButton *)sender
{
    if (self.userIsInTheMiddleOfEnteringANumber) [self enterPressed];
    double result = [self.brain performOperation:sender.currentTitle];

    NSString *resultString = [NSString stringWithFormat:@"%g", result];
    self.display.text = resultString;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:43:25.620

您在此行上有一个额外的分号：

```
if (self.userIsInTheMiddleOfEnteringANumber); { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:45:16.097

看起来你有“;” 在你的 if 语句之后

```
if (self.userIsInTheMiddleOfEnteringANumber); 
```

# database - 处理非重叠范围的建议方法（例如调度）

> ID：11910903
> 
> 赞同：6
> 
> 时间：2012-08-11T00:42:36.880
> 
> 标签：database, oracle, concurrency, constraints

我已经多次看到此类问题，并试图确定以非重叠方式存储范围的最佳方式。例如，在安排某种资源时，一次只能由一个人使用。我所看到的大多是这样的：

```
PERSON          ROOM        START_TIME      END_TIME
Col. Mustard    Library     08:00           10:00
Prof. Plum      Library     10:00           12:00 
```

1.  防止新条目与现有时间表重叠的最佳方法是什么，例如如果 Scarlet 小姐想从 11:00 到 11:30 预订图书馆？内联约束不起作用，我认为这不能在触发器中轻松完成。处理最初在表中查找现有冲突的所有插入的过程？

2.  其次，处理并发问题的最佳方法是什么？假设 Scarlet 小姐在 13:00 到 15:00 之间想要图书馆，而 White 夫人在 14:00 到 16:00 之间想要图书馆。（1）中的过程会发现这两个时间表都可以接受，但很明显，它们不是。我唯一能想到的是手动锁定表或某种互斥锁。

3.  上表的主键是什么（房间，开始时间）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T02:18:50.217

对于具有固定时间范围的情况的快速工作方式，您可以将所有范围存储在单独的表中，然后简单地将其链接到“储备”表。它可以解决固定范围的问题，例如，您可以仅以 30 分钟的间隔保留库，工作时间从早上 8 点到晚上 8 点，只需要 24 条记录。

```
--Person table---------------
ID   PERSON         ROOM
1    Col. Mustart   Library
2    Proof. Plum    Library

--Timeshift table------------
ID   START_TIME   END_TIME
1    08:00        08:30
2    08:30        09:00
....
24   19:30        20:00

--Occupy table----
DATE            TIMESHIFT    PERSON
TRUNC(SYSDATE)   TS_ID        P_ID
08/12/2012         4           1
08/12/2012         5           1
08/12/2012         9           2 
08/12/2012         10          2 
```

现在您将其设为 PK 或 UK，并且您的数据库驱动检查已准备就绪。它会很快，而且数据开销很小。然而，每秒使用相同的例程不会那么有效。

更通用和复杂的方法是让一些程序（或触发器）检查，您的范围是否被占用，您必须检查所有当前记录。

# visual-studio-2010 - TFS 获取当前文件变更集

> ID：11910905
> 
> 赞同：0
> 
> 时间：2012-08-11T00:43:05.837
> 
> 标签：visual-studio-2010, mef, changeset

我正在为 Visual Studio 编写一个 MEF 扩展。它是自定义语言的分类器。我需要获取文件的当前变更集 - 我认为来自 TFS。

如果您右键单击该文件并选择属性，它会显示“最新版本” - 我相信这是与该文件关联的最新变更集。

我想创建一个 TFS 工作区，然后获取变更集编号，但我不知道如何从编辑器中文件的物理路径找出当前工作区映射。

例如，如果文件是“d:\workspace\solution\random_folder\junk.txt”，我如何知道文件的工作空间在 TFS 中映射到哪里？

我应该只映射一个工作区，然后搜索一个名为“junk.txt”的文件吗？如果在不同的子目录中有超过 1 个文件怎么办。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:27:56.273

您不能将一个工作区放在现有工作区下方，这无法正确处理。要创建额外的工作区，请打开 VS 并转到 SourceControlExplorer。在菜单中是 Workspaces 的下拉菜单，选择“Workspaces ...”，将打开一个新对话框。按“添加..”按钮创建一个新工作区，您可以在其中选择哪个 ServerPath 映射到哪个本地路径。

# c++ - System() 失败，返回值 255/-1（8 位表示）

> ID：11910908
> 
> 赞同：0
> 
> 时间：2012-08-11T00:43:16.137
> 
> 标签：c++, linux, system-calls, supervisord

我有一个可执行文件，它有一些系统命令（基本上它会复制和运行脚本文件）。当我在独立测试时（像使用 sudo 一样自己启动可执行文件）`system()`工作正常。

现在我将我的可执行文件与`supervisord`. 我的可执行文件的功能运行良好，但`system()`命令失败并显示 255 / -1（8 位表示）。

我检查的事情清单：

1.  进程当前工作目录正确
2.  Supervisord 和我的进程以 root 身份运行
3.  目录和文件的chown是root

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:06:04.790

```
system("sudo cp ./Scripts/x.sh /tmp/"); 
```

sudo 是获取超级用户权限的命令。它通常会提示您输入密码（但在某些情况下，它会跳过它）。如果没有控制台提示您，它可能会失败。

无论如何，你不应该这样做。您只需编写`system("cp ./Scripts/x.sh /tmp/")`并使用 root 访问权限启动您的程序（supervisord 可能有办法做到这一点）。

# ruby-on-rails - 试图在 Rails 中返回 AREL 而不是数组

> ID：11910917
> 
> 赞同：1
> 
> 时间：2012-08-11T00:44:41.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, arel, active-relation

我有两个模型： Products 和 Tags 通过 products_tags 加入 HABTM 关系。

我目前将我的控制器索引定义为：

```
@stats = Product.all(:include => :tags).uniq 
```

它返回一个数组。如何返回 Active Rel 对象？我尝试添加作用域，但收到无方法错误。

我需要找到并列出一个唯一的标签列表，并且能够查看每个特定标签所属的产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:46:29.453

试试`@stats = Product.includes(:tags).uniq`。

请注意，`uniq`将关系转换为数组；如果你想做一些`SELECT DISTINCT`你想要使用的事情`Product.includes(:tags).select('DISTINCT whatever')`。

# javascript - 我需要一个系统来发布 javascript 游戏的高分，但它必须很难被愚弄

> ID：11910918
> 
> 赞同：2
> 
> 时间：2012-08-11T00:44:47.967
> 
> 标签：javascript, ajax, http, canvas

我一直在开发一些 Javascript/Canvas 游戏，并一直在尝试想出一种存储游戏状态和数据的方法，这种数据的一个例子就是高分。

最简单的方法当然是将高分发布到带有 http 请求的服务器上，但这很容易被愚弄，人们可以自己发出 http 请求，瞧，你现在是冠军了。

如果您有解决此问题的方法，我在询问 stackoverflow。这是一个棘手的问题，因为 javascript 代码在客户端计算机上运行并且它是人类可读的。

唯一可能的解决方案，或者更确切地说，威慑，我想出的是混淆制作高分帖子的javascript代码（并在其中包括一个校验和/魔术常数），至少使系统更难游戏。

你有更好的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T00:52:01.200

在这种情况下，解决方案是不要保存乐谱，也不要将乐谱传送到**任何地方**。

相反，按需计算它，并且只缓存它以供显示。需要高分报告时，传入影响分数的多个因素，并加密。

然后，服务器将解密该消息，并自行重新计算分数。

# javascript - 尝试使用 json2 脚本将多级 javascript 数组转换为 json

> ID：11910919
> 
> 赞同：1
> 
> 时间：2012-08-11T00:44:53.667
> 
> 标签：javascript, jquery, json

我正在使用以下脚本来帮助我将 javascript 数组转换为 json 字符串：[https ://github.com/douglascrockford/JSON-js/blob/master/json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

这是怎么回事：

```
var data = [];
data[1] = [];
data[1].push('some info');
data[1].push('some more info');
json_data = JSON.stringify(data);
alert(json_data); 
```

这不会（返回空白）：

```
var data = [];
data['abc'] = [];
data['abc'].push('some info');
data['abc'].push('some more info');
json_data = JSON.stringify(data);
alert(json_data); 
```

我想转换多维 javascript 数组，但`stringify()`如果我命名我的数组键，我似乎无法使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:48:47.957

JSON 数组仅是整数索引。

您可以将第一行更改`{}`为在[http://jsfiddle.net/5YXNk/](http://jsfiddle.net/5YXNk/)中使用，这是您可以在这里做的最好的事情。

检查[http://json.org/](http://json.org/)上的数组语法——注意数组只包含值，这些值将被非负整数隐式索引。就是那样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:48:18.470

Javascript 中没有关联数组之类的东西。如果你想使用字符串“keys”，你将不得不使用一个对象。

# haskell - 编译 snaplet-mongodb-minimalistic 时的 Cabal 问题

> ID：11910920
> 
> 赞同：2
> 
> 时间：2012-08-11T00:45:03.260
> 
> 标签：haskell, cabal, haskell-snap-framework

谁能帮我解决这个问题。我正在尝试从[snaplet-mongodb-minimalistic包编译](https://github.com/Palmik/snaplet-mongodb-minimalistic)[示例 1](https://github.com/Palmik/snaplet-mongodb-minimalistic/tree/master/examples/example1)，但出现以下错误：

```
$ cabal install
Resolving dependencies...
cabal.exe: Could not resolve dependencies:
trying: snaplet-mongodb-minimalistic-example1-0.0.1 (user goal)
trying: mongoDB-1.3.0/installed-137... (dependency of
snaplet-mongodb-minimalistic-example1-0.0.1)
trying: transformers-base-0.4.1/installed-9d4... (dependency of
mongoDB-1.3.0/installed-137...)
next goal: snap-server (dependency of
snaplet-mongodb-minimalistic-example1-0.0.1)
rejecting: snap-server-0.9.0/installed-5b0..., 0.9.0, 0.8.1.1, 0.8.1, 0.8.0.1,
0.8.0 (conflict: snaplet-mongodb-minimalistic-example1 => snap-server==0.7.)
rejecting: snap-server-0.7.0.1 (conflict: transformers-base =>
transformers==0.3.0.0/installed-e82..., snap-server => transformers>=0.2 &&
rejecting: snap-server-0.7 (conflict: mongoDB =>
array==0.4.0.0/installed-3cf..., snap-server => array>=0.2 && rejecting: snap-server-0.6.0.1, 0.6.0, 0.5.5, 0.5.4, 0.5.3.1, 0.5.3, 0.5.2,
0.5.1.4, 0.5.1.3, 0.5.1.2, 0.5.1.1, 0.5.1, 0.5.0, 0.4.3, 0.4.2, 0.4.1,
0.4.0.2, 0.4.0.1, 0.4.0, 0.3.1.1, 0.3.1, 0.3.0, 0.2.16.2, 0.2.16.1, 0.2.16,
0.2.15.1, 0.2.15, 0.2.14.1, 0.2.14, 0.2.13.3, 0.2.13.2, 0.2.13.1, 0.2.13,
0.2.12, 0.2.11, 0.2.10.2, 0.2.10.1, 0.2.10, 0.2.9, 0.2.8.1, 0.2.8, 0.2.7.2,
0.2.7.1, 0.2.7, 0.2.6, 0.2.5, 0.2.4, 0.2.2, 0.2.1, 0.1.4, 0.1.3, 0.1.2, 0.1.1
(conflict: snaplet-mongodb-minimalistic-example1 => snap-server==0.7.) 
```

我已经向作者提出了[问题](https://github.com/Palmik/snaplet-mongodb-minimalistic/issues/5)，但他似乎很忙。如果我能解决这个问题，我会提交一个修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:46:59.287

`snaplet-mongodb-minimalistic`取决于`snap-core == 0.9.*`while`example-1`取决于`snap-core == 0.7.*`(and `snap-server`)。结果就是您所看到的依赖失败的美妙级联。您必须检查依赖关系`example-1`并确保任何地方都没有版本冲突。

# git - 重置本地 git 存储库

> ID：11910921
> 
> 赞同：28
> 
> 时间：2012-08-11T00:45:05.417
> 
> 标签：git

几天前，我在 Github 上创建了一个存储库，然后按照步骤将我现有的解决方案添加到其中。我不知道我做错了什么，但是经过一些随机的“git add”命令等等，我现在在 github 中得到了 windows 的消息：

```
failed to sync this branch.
You might need to open a shell and debug the state of this repo. 
```

不会发生。

一个更好的主意是我删除 github 上的存储库并从我的本地存储库重新开始。我知道如何删除 github 上的存储库（我知道这很容易，因为我已经这样做过一次。）我不确定如何在本地重新开始。是否有一个基本上是“git uninit”或“git deconstruct repository”的 git 命令？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-11T00:50:43.280

Git 将有关 repo 的所有内容存储在 repo 的根目录中的隐藏`.git`文件夹中。只需删除该文件夹，`rm -rf .git`就好像那里从来没有回购一样。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-18T15:08:12.110

*   首先去你当地的仓库
*   显示隐藏文件。
*   您将在本地存储库中看到一个名为“.git”的文件夹。
*   删除那个。
*   现在打开 Github for Windows。
*   如果您在本地选项卡中单击该存储库，您应该会收到一个无法找到存储库的错误。
*   就是这样，单击重新克隆存储库按钮。
*   Repo 将被再次下载并默认保存在 My Documents/GitHub 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-15T13:39:37.333

当我失去互联网连接时，我在 GitHub for Windows 上收到此错误。一旦我恢复连接，它就会同步起来。显然，Windows 客户端上的错误消息的描述性不足以告诉您何时失去连接。就这么简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T23:40:22.643

还有另一个选项不涉及使用命令行。不言而喻，是的，您应该知道如何使用它，但如果您只是学习它并不是那么简单。

下载 TortoiseGit 并右键单击包含 repo 的文件夹。转到 TortoiseGit > Push 并输入您的登录详细信息。八达宾。

我将它与 Github 客户端一起使用。现在生活更轻松/更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-14T15:50:34.083

我很确定我在另一个stackoverflow中找到了这个（如果我看到那个我会把链接放在这里）但是重新启动Windows实际上为我解决了这个问题。如果我没记错的话，这与 Github for Windows 更新有关。

可能还有另一种方法可以让应用程序正确更新并同步而无需重新启动。每次我遇到这个问题时，重新启动 Windows 都会修复它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-10T18:54:11.193

git windows 甚至无法为我克隆 repo，无论我可以在 git shell 中克隆它。我通过以下步骤修复了它：

1.  卸载 git for windows。
2.  重新启动窗口。
3.  为 Windows 安装 git。

不重新启动Windows不会解决问题，我确实尝试过。

# php - 用于 php 中 HTML 的正则表达式

> ID：11910925
> 
> 赞同：1
> 
> 时间：2012-08-11T00:45:51.390
> 
> 标签：php, html, regex

我有一个 html 文件......这个文件有公式：

```
<body>
<p class="Title-P">Compiler</p>
<p class="Heading1-P">kdnkls:</p>
<p class="Normal-P">dsf</p>
<p class="ListParagraph-P">kjsksf</p>
<p class="ListParagraph-P">dsfsf</p>
<p class="ListParagraph-P">sfsfsf</p>
<p class="Heading2-P">fsfs:</p>
</body> 
```

什么是合适的正则表达式来替换标签：

> `<p class="Title-P>foo</p>`和`<h1>foo</h1>`

*   `<p class="Heading1-P">kdnkls:</p>`和`<h2> kdnkls: </h2>`
*   `<p class="Normal-P>foo</p>`和`<p> foo </p>`
*   ETC...

我在 php 中使用 preg_replace 函数作为参数：模式和替换......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T00:50:17.060

尝试：

```
$html = preg_replace('/<p class="Title-P">(.*?)<\/p>/i', "<h1>$1</h1>", $html);
$html = preg_replace('/<p class="Normal-P">(.*?)<\/p>/i', "<p>$1</h1>", $html); 
```

这应该可行，更好的办法是使用[DOM](http://php.net/dom)解析文档并进行更改，然后保存文档。

# python - 使用 Python 进行简单的远程进程监控

> ID：11910937
> 
> 赞同：6
> 
> 时间：2012-08-11T00:49:22.327
> 
> 标签：python, linux, monitoring

我想编写一个 python 脚本来对运行在 linux 服务器上的远程进程执行一些非常简单的“无代理”监控。

它将在伪代码中执行以下任务：

```
for each remoteIPAddress in listOfIPAddresses:
    log into server@remoteIPAddress via ssh
    execute the equivalent of a 'ps -ef' command
    grep the result to make sure a particular process (by name) is still running 
```

一种方法是在子进程中使用 python 调用 shell 脚本并解析它们的输出。这似乎效率很低。有没有更好的方法通过 python 库来做到这一点？

通过在这里和其他地方的研究，我所能找到的只是：

*   [psutil](http://code.google.com/p/psutil/) - 看起来它不进行远程监控，所以我必须在远程机器上运行代理以通过 RPC 报告统计信息。
*   [pymeter](http://pymeter.sourceforge.net/docs.html) - 我必须编写自己的插件来监控特定的远程服务。
*   [stackoverflow #4546492](https://stackoverflow.com/questions/4546492/process-monitoring-python-ubuntu-linux) - 一些有用的链接，但发布者正在寻找不同的解决方案。

谢谢，请放轻松，这是我的第一个问题:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T01:01:37.907

您可能对Fabric[库感兴趣。](http://docs.fabfile.org/en/1.4.3/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:58:22.623

查看[paramiko](http://www.lag.net/paramiko/)。您可以使用它通过 ssh 进入服务器并运行命令。然后，您可以解析结果并对它们做您想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:53:33.537

从上面的答案中得到线索，我调查了 Fabric，发现下面的演示特别有趣/有帮助。它概述了用于服务器监视和管理的三个库——Fabric、Cuis 和 Watchdog。为后代：

[在 Python 中使用 Fabric、Cuisine 和 Watchdog 进行服务器管理](http://www.slideshare.net/ffunction/fabric-cuisine-and-watchdog-for-server-administration-in-python)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T02:51:13.307

它可能比您要寻找的要重，但[Zenoss](http://www.zenoss.com/)支持无代理监控。

其他答案中建议的 paramiko 和 Fabric 也是不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-30T09:08:52.760

为什么不使用像 Nagios 这样的专用监控工具？Nagios 通过 NRPE 插件和 SSH 插件等进行代理和无代理监控。试试看。

# php - 如何正确使用 php sha1 hex？

> ID：11910940
> 
> 赞同：0
> 
> 时间：2012-08-11T00:49:32.110
> 
> 标签：php, sha1

如何通过 php 编写此代码并获得类似的结果？

为 SHA 计算构建 MSG

```
 MSG_TXT = "8F"+"08"+"1234567890123470"+"08"+"1234567890123470"+"0743210987654321"+"08"
 Convert MSG_TXT to MSG_BIN [] = {$8F,$08,$12,$34,$56, ..... $65,$43,$21,$08}
 SHA-1(MSG_BIN[]) = 9E667331662BE10D78D56F75D6899F764212C5C1 
```

这段代码在delphi中工作，但在php中没有类似的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:22:29.503

尝试这个：

```
// your string
$txt = "8F"."08"."1234567890123470"."08"."1234567890123470"."0743210987654321"."08";
// convert to binary string
$txt = pack('H*', $txt);
// print sha1
echo sha1($txt, false); 
```

# node.js - 如何保护nodejs中的公共动态文件夹

> ID：11910956
> 
> 赞同：9
> 
> 时间：2012-08-11T00:51:29.870
> 
> 标签：node.js, express, pug

我在 public/images/picture.jpg 中显示带有翡翠的图片，但我想保护一些图片或限制对公共文件夹的访问怎么做？

```
project
    node_modules
    public
        images
            image.jpg
        javascripts
        stylesheets
        protected_folder*
            image_protected.jpg
    views 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-11T03:22:29.120

注意：对于所有这些示例，我使用的应用程序结构如下：

```
.
├── app.js
└── public
    ├── protected
    │   └── file.txt  <-- contains text "protected file"
    └── regular
        └── file.txt  <-- contains text "regular file" 
```

* * *

你有几个选择。最简单的一种是让 Express在公共中间件*之前*通过您的路由器路由请求，允许您拦截请求：

```
var express = require('express');
var http = require('http');
var path = require('path');

var app = express();

// use app.router before express.static
app.use(app.router);
app.use(express.static(path.join(__dirname, 'public')));

function userIsAllowed(callback) {
  // this function would contain your logic, presumably asynchronous,
  // about whether or not the user is allowed to see files in the
  // protected directory; here, we'll use a default value of "false"
  callback(false);
};

app.get('/', function(req, res, next) {
  res.end('Home page');
});

app.get('/protected/*', function(req, res, next) {
  userIsAllowed(function(allowed) {
    if (allowed) {
      next(); // call the next handler, which in this case is express.static
    } else {
      res.end('You are not allowed!');
    }
  });
});

http.createServer(app).listen(3000, function(){
  console.log('Express server listening on port 3000');
}); 
```

结果：

```
http://localhost:3000/regular/file.txt # regular file
http://localhost:3000/protected/file.txt # You are not allowed! 
```

这种方法的问题是，在提供静态文件之前，请求必须一直通过应用程序的路由器，这不是很有效，但可能满足您的需求（您需要采取一些测量并自己找出来）。

* * *

另一种选择是在中间件链中插入一个小功能，该功能基本相同，但不需要运行整个应用程序路由器：

```
var express = require('express');
var http = require('http');
var path = require('path');

function userIsAllowed(callback) {
  // this function would contain your logic, presumably asynchronous,
  // about whether or not the user is allowed to see files in the
  // protected directory; here, we'll use a default value of "false"
  callback(false);
};

// This function returns a middleware function
var protectPath = function(regex) {
  return function(req, res, next) {
    if (!regex.test(req.url)) { return next(); }

    userIsAllowed(function(allowed) {
      if (allowed) {
        next(); // send the request to the next handler, which is express.static
      } else {
        res.end('You are not allowed!');
      }
    });
  };
};

var app = express();

app.use(protectPath(/^\/protected\/.*$/));
app.use(express.static(path.join(__dirname, 'public')));

app.get('/', function(req, res, next) {
  res.end('Home page');
});

http.createServer(app).listen(3000, function(){
  console.log('Express server listening on port 3000');
}); 
```

这执行基本相同的逻辑，但不是通过*整个*应用路由器路由每个请求，而是在每个请求的开头运行一个小函数，检查请求的 URL 是否与您传入的正则表达式匹配。如果匹配，它运行检查以查看用户是否可以访问该文件。

结果：

```
http://localhost:3000/regular/file.txt # regular file
http://localhost:3000/protected/file.txt # You are not allowed! 
```

# linux - shell脚本中的新行

> ID：11910960
> 
> 赞同：0
> 
> 时间：2012-08-11T00:52:10.800
> 
> 标签：linux, shell, unix, solaris, sunos

我的 shell 脚本中有以下命令，可以在一封电子邮件中发送所有四个 echo 语句

```
{
echo "Data Successfully loaded into LIP table"
echo "Total Items Purchased: `echo $QUERY1 | awk '{print $1}'`"
echo "Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`"
echo "Error Percentage: $QUERY2" 
} | mailx -s "Report for $DATE_YEST_FORMAT1" -r rj@host.com user2@host.com 
```

但是当我看到我的电子邮件时，我得到了下面我不想要的输出 -

```
Data Successfully loaded into LIP table Total Items Purchased: 3956391 
Total Items MissingorMismatch: 975825 Error Percentage: 24.66452380464924 
```

我需要逐行输出如下所示的内容。

```
Data Successfully loaded into LIP table 
Total Items Purchased: 3956391 
Total Items MissingorMismatch: 975825 
Error Percentage: 24.66452380464924 
```

任何建议为什么会这样？我正在跑步`SunOS (Solaris)`。

**更新：-**

在尝试了给出的建议后`Kevin`

```
QUERY1=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT SUM(total_items_purchased), SUM(total_items_missingormismatch) from lip_data_quality where dt='$DATE_YEST_FORMAT2';"`

QUERY2=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT 100 * SUM(total_items_missingormismatch*1.0) / SUM(total_items_purchased) FROM lip_data_quality where dt='$DATE_YEST_FORMAT2';"`

mailx -s "LIP Data Quality Report for $DATE_YEST_FORMAT1" -r rj@host.com rj@host.com uname@host.com <<EOF
Data Successfully loaded into LIP_DATA_QUALITY table

Total Items Purchased: $(echo $QUERY1 | awk '{print $1}')

Total Items MissingorMismatch: $(echo $QUERY1 | awk '{print $2}')

Error Percentage: $QUERY2
EOF 
```

**我在电子邮件中收到的输出 -**

```
Data Successfully loaded into LIP_DATA_QUALITY table

Total Items Purchased: $(echo 3712928   393455 | awk '{print }')

Total Items MissingorMismatch: $(echo 3712928   393455 | awk '{print }')

Error Percentage: 10.596892802661404 
```

这是不对的..我应该得到这样的输出-

```
Data Successfully loaded into LIP_DATA_QUALITY table

Total Items Purchased: 3712928

Total Items MissingorMismatch: 393455

Error Percentage: 10.596892802661404 
```

我在跑步`SunOS`

```
bash-3.00$ uname -a
SunOS lvsaishdc3in0001 5.10 Generic_142901-02 i86pc i386 i86pc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:53:55.007

可能会`mailx`忽略单个换行符并用空行分隔段落，类似于`tex`我们自己的 SO。

结合[heredoc](http://tldp.org/LDP/abs/html/here-docs.html)

```
mailx -s "Report for $DATE_YEST_FORMAT1" -r rj@host.com user2@host.com <<EOF
Data Successfully loaded into LIP table

Total Items Purchased: `echo $QUERY1 | awk '{print $1}'`

Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`

Error Percentage: $QUERY2
EOF 
```

[看来您的 bash 无法识别`$(command)`语法，因此我已将其删除。]

[注意，我刚刚测试过，Solaris`mailx`发送的电子邮件格式与我输入的完全相同。但是，如果您的邮件阅读器以 HTML 模式显示，它可能会折叠空格并将其全部显示为一行。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:59:29.400

尝试使用它来执行此操作`\n`，因为它通常是打印函数中换行符的标准转义序列。，如下所示：

```
{
echo -e "Data Successfully loaded into LIP table\n"
echo -e "Total Items Purchased: `echo $QUERY1 | awk '{print $1}'\n"
echo -e "Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'\n"
echo -e "Error Percentage: $QUERY2\n" 
} | mailx -s "Report for $DATE_YEST_FORMAT1" -r rj@host.com user2@host.com 
```

更多信息可以在[这里](http://ss64.com/bash/echo.html)获得。

# c# - 使用 ColumnAttribute 或 HasKey 方法指定复合主键的顺序

> ID：11910962
> 
> 赞同：32
> 
> 时间：2012-08-11T00:52:39.223
> 
> 标签：c#, entity-framework, entity-framework-4, database-migration

我正在尝试对具有父子关系的 2 个对象使用复合主键。每当我尝试创建新迁移时，都会出现错误：

**无法确定类型“Models.UserProjectRole”的复合主键排序。使用 ColumnAttribute 或 HasKey 方法指定复合主键的顺序。**

根据错误提示，我确实添加了注释`Column (Order = X)`，但错误仍然存​​在并且不会消失，除非我只留下一个带有 Key 注释的字段。这是我绊倒的对象：

```
public class UserProjectRole
{
    [Key, Column(Order = 0),DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid UserProjectRoleID { get; set; }

    [Key, Column (Order = 1)]
    public Guid ProjectID { get; set; }

    [ForeignKey("ProjectID")]
    public Project Project { get; set; }

    public Guid AppUserGuid { get; set; }

    // followed by a number of unrelated String fields.
 } 
```

这是项目类：

```
public class Project: Base
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid ProjectID { get; set; }

    public virtual ICollection<UserProjectRole> UserRoles { get; set; }

    // followed by a number of unrelated String fields.

} 
```

这是我的 DBContext 的一部分：

```
public class SiteContext : DbContext
{

    public DbSet<Project> Projects { get; set; }

    public DbSet<UserProjectRole> UserProjectRoles { get; set; }
} 
```

我在使用 EF 4.3.1 的 VisualStudio 2012

一段时间以来，我一直在努力反对这一点，所有论坛和 SO 答案都建议添加我已经拥有的列顺序注释。 **我错过了一些明显的东西吗？？？**

*谢谢你读到这里-)*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-11T11:46:07.750

它花了很多时间摆弄和测试不同的东西。直到我决定从头开始使用类似的数据结构制作一个新的香草项目之前，我一无所知。当我从 NuGet 安装 EntityFramework 时，我看到了一条消息：

> ## Entity Framework 4.x 和 .NET Framework 4.5 的已知问题
> 
> Entity Framework 4.1 到 4.3 在 EntityFramework 程序集中的 System.ComponentModel.DataAnnotations 命名空间中包含了额外的数据注释。在 .NET 4.5 中，这些注释被移动到 System.ComponentModel.DataAnnotations.dll 程序集的 System.ComponentModel.DataAnnotations.Schema 命名空间中成为 .NET Framework 的一部分。如果您使用的是 EF 4.x 并以 .NET 4.5 为目标，则会导致在不同程序集中具有相同名称的两个数据注释。因为 .NET Framework 中的注释位于不同的命名空间中，所以我们无法使用类型转发来避免这种冲突。
> 
> 可以在 .NET 4.5 上使用 EF 4.x，但我们建议使用 EF 5 的最新预发布版本。如果您不使用受影响的数据注释，则不会影响您的代码。如果您在 C# 项目中使用数据注释，则可以使用 extern 修饰符来确保您的代码使用来自 EntityFramework.dll ( [http://msdn.microsoft.com/en-us/library/e59b22c5(v=VS ) 的注释.80).aspx](http://msdn.microsoft.com/en-us/library/e59b22c5(v=VS.80).aspx) )。如果您在 .NET 4.5 中使用 System.ComponentModel.DataAnnotations.dll 程序集中的新注释，Code First 将不会处理它们。
> 
> 受影响的注释是：
> 
> *   **柱子**
> *   复杂类型
> *   数据库生成
> *   数据库生成选项
> *   外键
> *   逆属性
> *   最长长度
> *   最小长度
> *   未映射
> *   桌子

那时我意识到我的数据项目是在 VS2012 中新创建的，默认情况下以 .Net 4.5 为目标，而我在解决方案中的其余项目是从 VS2010 迁移并以 .Net 4.0 为目标。所以我已经更新了所有项目以 .Net 4.5 为目标，并获得了 EntityFramework 5.0 的预发布版本。

**确保您首先将您的项目更新到 Net4.5，然后再将 EF 更新到 5.0，否则它将永远恨你，许多兔子会死去。**

[此截屏视频](http://thedatafarm.com/blog/data-access/video-entity-framework-5-enums-and-moving-solution-from-ef-4-3/)是更新到 EF5.0 的绝佳起点

~~那时我的错误消失了，但我得到了不同的错误。我无法添加迁移，因为它找不到迁移配置，即使我在它之前几秒钟就设置了配置。这又花了很多时间摆弄 NuGet，卸载广告重新安装包。然后我在 packages.config 中看到这样的行：~~

 ~~```
package id="EntityFramework" version="5.0.0-rc" targetFramework="net40" 
```~~ 

~~我已将 targetFramework 更改为“net45”，现在我从迁移中获得了预期的行为。我想会有更好的方法来获得带有包的 nuget target .Net 4.5，但这对我有用。~~

我希望这可以避免有人把头撞到墙上。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-22T08:57:54.793

```
public class UserProjectRole
{
   [Key, Column (Order = 0)]
   public Guid UserProjectRoleID { get; set; }

   [Key, Column (Order = 1)]
   [ForeignKey("Project")]
   public Guid ProjectID { get; set; }

   [Required]
   public Project Project { get; set; }

   public Guid AppUserGuid { get; set; }

   // followed by a number of unrelated String fields.
}

public class Project: Base
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid ProjectID { get; set; }

    public virtual ICollection<UserProjectRole> UserRoles { get; set; }

    // followed by a number of unrelated String fields.

}

public class SiteContext : DbContext
{
    public DbSet<Project> Projects { get; set; }

    public DbSet<UserProjectRole> UserProjectRoles { get; set; }
} 
```

试试这个，尤其是`[Required]`上面的`public Project Project {get; set;}`.

如果这不起作用，请再试一次并删除`[Key, Column (Order = 1)]`上面的`[ForeignKey("ProjectID")]`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-10T16:49:53.080

这是针对那些死兔子的修复程序（在更新到 .Net 4.5 之前已更新到 EF 5.0）：

在 csproj 文件中，更改

```
<Reference Include="EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\packages\EntityFramework.5.0.0\lib\net40\EntityFramework.dll</HintPath>
</Reference> 
```

至

```
<Reference Include="EntityFramework">
  <HintPath>..\packages\EntityFramework.5.0.0\lib\net45\EntityFramework.dll</HintPath>
</Reference> 
```

当你知道它时很明显......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-12T14:42:02.267

我能够使用相同的解决方案

PM> Install-Package EntityFramework -Pre

[http://weblogs.asp.net/scottgu/archive/2012/12/11/entity-framework-6-alpha2-now-available.aspx](http://weblogs.asp.net/scottgu/archive/2012/12/11/entity-framework-6-alpha2-now-available.aspx)

# caching - 如何在 Windows 8 Release Preview 上安装 AppFabric 1.1 for Windows Server？

> ID：11910967
> 
> 赞同：0
> 
> 时间：2012-08-11T00:54:36.213
> 
> 标签：caching, windows-8, appfabric

如何在 Windows 8 Release Preview 上安装 AppFabric 1.1 for Windows Server？当我尝试在 Windows 8 Release Preview 上安装它时，会收到消息

> “当前操作系统 Windows 8 Release Preview（版本 6.2.8400.0）不支持 WIndows Server AppFabric。有关支持的操作系统列表，请参阅安装指南。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:03:45.183

截至目前，Windows 8 Beta OR Preview 不支持 AppFabric 1.1。一旦 Windows 8 的最终版本可通过他们的博客和文档获得，团队将为客户提供有关在 Windows 8 Server 上运行 AppFabric 的指导。最大限度

# iphone - 在 UITableView 中显示具有特定字符串值的对象

> ID：11910968
> 
> 赞同：0
> 
> 时间：2012-08-11T00:54:56.650
> 
> 标签：iphone, objective-c, xcode

如果我想显示所有对象，我使用下面的代码。但是，如果我只想显示键“Favorite”=“Yes”的值的对象，那又如何呢？这样的例子会很棒。

```
- (void)viewDidLoad
{
[super viewDidLoad];    

NSString *path = [[NSBundle mainBundle]
                    pathForResource:@"Objects" ofType:@"plist"];

sortedObjects = [[NSMutableArray alloc]initWithContentsOfFile:path];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [sortedObjects count];
} 
```

附言。属性列表是一个带有字典的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:11:39.360

您需要创建一个新数组，我们称之为过滤，您通过过滤 sortedObjects 创建，并使用它来填充表。

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF.Favorite == %@", @"Yes"];
NSArray *filtered = [sortedObjects filteredArrayUsingPredicate:pred]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:15:06.427

尝试添加以下代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *cellIdentifier = @"cellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath 
{
    if([[sortedObjects objectAtIndex:indexPath.row] valueForKey:@"Favorite"] isEqualToString:@"YES"])
    {
        //do stuff
    }
} 
```

# ruby-on-rails - 如何持续增加计数器缓存列？

> ID：11910974
> 
> 赞同：1
> 
> 时间：2012-08-11T00:56:17.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, race-condition, counter-cache

假设我有一个计数器缓存需要在每次页面加载时递增。假设我有 10 个 Web 实例。如何持续增加计数器缓存列？

使用一个 Web 实例即可轻松实现一致性。但是在运行多个实例时，可能会出现竞争条件。

这是一个快速的解释。假设我的计数器缓存列被调用`foo_counts`，其起始值为0。如果同时加载2个Web实例，则都实现计数为0。到了增加计数的时候。它们都将计数从 0 增加到 1。

我查看了[http://guides.rubyonrails.org/active_record_querying.html#locking-records-for-update](http://guides.rubyonrails.org/active_record_querying.html#locking-records-for-update)

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T01:31:59.773

你可以使用[`update_counter`](http://api.rubyonrails.org/classes/ActiveRecord/CounterCache.html#method-i-increment_counter)：

> **增量计数器（计数器名称，ID）**
> 
> 将数字字段加一，通常表示计数。

这会在 SQL 中执行直接更新，因此`Model.increment_counter(:c, 11)`将此 SQL 发送到数据库：

```
update models set c = coalesce(c, 0) + 1 where id = 11 
```

所以你不必担心比赛条件。让数据库完成它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:02:49.007

考虑对增量进行排队，并让工作人员在后台执行实际的增量。你不会有完全到毫秒的数据，但至少它会是准确的。

# android - android - 从整数资源设置 sqlite 数据库版本

> ID：11910975
> 
> 赞同：0
> 
> 时间：2012-08-11T00:56:25.647
> 
> 标签：android, sqlite

每个人。

在我的应用程序中，我通过整数资源设置整数应用程序版本代码（不是版本名称，而是清单中的 android 系统值 android:versionCode）。

我想强制我的 SQLite 数据库在我更新应用程序时自动更新数据库版本，市场根据整数版本代码决定。在我的数据库子类的构造函数中，我尝试将注释行替换为它下面的行：

```
protected static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        //          super(context, DATABASE_NAME, null, DATABASE_VERSION);
        super(context, DATABASE_NAME, null, context.getInteger(R.integer.version_code));

    }
} 
```

但不断收到错误，因为 getInteger() 未在此上下文中定义。

对此的任何帮助将不胜感激，特别是如果这被认为是基本实践。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:50:17.493

如果您无法达到 getInteger 方法的错误，请尝试将上下文强制转换为启动 sqlite 的活动。

IE

```
((MainActivity)context).getInteger(). 
```

# css - 选项 DIV 在 Jquery 对话框顶部固定位置

> ID：11910977
> 
> 赞同：1
> 
> 时间：2012-08-11T00:56:28.727
> 
> 标签：css, jquery-ui, position

我有一个 Jquery 对话框。在对话框中，我有一个带有“保存按钮”的 DIV。此 DIV 可以有多个按钮或下拉菜单，具体取决于场景。所以它实际上是一个TOP Options Div。

图片在这里：

![在此处输入图像描述](../Images/41141fdfcbfcbae093efa67a1bb9bb9a.png)

我需要让这个 DIV 始终可见。现在如果对话框内容超过对话框高度，那么如果我向下滚动，我将失去选项 div 的可见性。

关于如何执行此操作的任何线索？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T13:15:08.513

我建议您将对话框的其余内容放入一个 div 中，在该 div 中应用一个固定高度和一个 overflow-y: 滚动属性。

```
height : 250px
overflow-y: scroll 
```

所以事实上，当顶部 div 保持固定时，您将上下滚动的不是整个对话框，而是第二个 div 内容，而顶部 div 只是停留在其位置。

示例：[具有固定顶部和滚动内容的对话框](http://jsfiddle.net/NorthernWill/2TckJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:29:14.293

这是一种方法：

[http://jsfiddle.net/andromedado/Gq54S/](http://jsfiddle.net/andromedado/Gq54S/)

假设环绕“新用户”、“关闭”、可滚动内容和按钮窗格的位置已经固定。

从那里，您只需使按钮窗格的位置也固定，并为其提供适当的宽度，使其不会与滚动条重叠。Finagling 宽度与填充可能很冗长，所以我在脚本中作弊，只是声明 vars 来保存填充信息。

我还添加了一个元素“buttonSpacer”，它从浮动按钮窗格中获取它的高度；这为浮动内容提供了一些可以推动的东西，因此它不会最终出现在按钮窗格下方。

# gdb - 如何为 gdb 函数定义别名

> ID：11910979
> 
> 赞同：3
> 
> 时间：2012-08-11T00:56:51.497
> 
> 标签：gdb

**GDB**支持命令函数`define`。我想为 GDB 写一个帮助脚本，我希望每个函数都有一个有意义的名字和一个别名，就像`bt`and一样`backtrace`。

GDB 支持这个功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-10T09:13:36.923

完成马特答案的示例：

```
alias ir = info registers
ir 
```

如记录在：[https ://sourceware.org/gdb/onlinedocs/gdb/Aliases.html](https://sourceware.org/gdb/onlinedocs/gdb/Aliases.html)

与 Bash 别名不同，您*不能*将参数传递给这些别名的定义，例如：

```
alias ir = info registers eax 
```

该`registers`部分仅被接受，因为它不是参数，而是子命令。

但是您可以在使用别名时传递参数：

```
ir eax 
```

然后，您可以列出所有当前定义的别名：

```
help aliases 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T21:43:32.467

```
(gdb) apropos alias
alias -- Alias one command to another
aliases -- Aliases of other commands 
```

# php - 检查数组的数组是否包含某个字符串

> ID：11910980
> 
> 赞同：1
> 
> 时间：2012-08-11T00:56:56.730
> 
> 标签：php, arrays

在将任何新的子数组添加到父数组之前，我正在检查以确保数组数组不包含某些字符串

我想确保如果具有相同`website`且`condition`存在的数组不会将新的子数组添加到父数组中。

**例如**，在此示例中，`$newArr`不得将 插入到数组中，`$arr`因为它们已经存在具有相同`website`和的数组`condition`。

```
$arr = array(
   array(
      'website' => 'amazon',
      'price' => 20,
      'location' => 'uk',
      'link' => '...',
      'condition' => 'new'
   ),
   array(
      'website' => 'abe',
      'price' => 20,
      'location' => 'uk',
      'link' => '...',
      'condition' => 'new'
   )
);

$newArr = array(
      'website' => 'amazon',
      'price' => 60,
      'location' => 'uk',
      'link' => '...',
      'condition' => 'new'
   ) 
```

我正在寻找一个简单的解决方案，因为`in_array`在父数组上使用该函数是不够的。

**到目前为止的代码**

```
$arr = array();

foreach($table->find('tr.result') as $row){

   if(($website = $row->find('a img',0)) 
      && ($price = $row->find('span.results-price a',0))
      && ($location = $row->find('.results-explanatory-text-Logo'))                     
      && ($link = $row->find('a',0))){                  

      $website = str_replace( array('.gif','.jpg','.png'), '', basename($website->src));
      $price = floatval(trim(str_replace(',', '', $price->innertext), "&pound;")); 
      $location = "uk";         
      $link = $link->href;

      $arr[] = array(
         'website' => $website,
         'price' => $price,
         'location' => $location,
         'link' => $link,
         'condition' => 'new'
      );
   }            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:22:10.877

我希望下面代码中的注释能说明一切......我不是 PHP 专业人士，这可能不是最优雅的方式，但我相信逻辑是有道理的。显然 $new_array 对象有一些未声明的变量，但仅作为示例。

我希望这会有所帮助，并且没有人反对我:)

```
<?php
    // Original array
    $arr = array();

    foreach($result as $row) {
        // Get the new array as an object first so we can check whether to add to the loop
        $new_array = array(
            'website' => $website,
            'price' => $price,
            'location' => $location,
            'link' => $link,
            'condition' => 'new'
        );

        // If the original array is empty there's no point in looping through it
        if(!empty($arr)) {
            foreach($arr as $child) {
                // Check through each item of the original array
                foreach($new_array as $compare) {
                    // Compare each item in the new array against the original array
                    if(in_array($compare, $child)) {
                        // if there's a match, the new array will not get added
                        continue;
                    }
                }

            }   
        }

            // If there's no match, the new array gets added
        $arr[] = $new_array;
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:18:29.507

`$arr`您每次循环查找`$website`和`$condition`（总是`'new'`？），或者您可以保留找到的键的辅助数组。`$arr`如果您每次都从空开始，则第二种方法将起作用并且速度更快。

```
$arr = array();
$keys = array();

foreach($table->find('tr.result') as $row){

   if(...){                  
      ...
      $condition = 'new'; // set as needed

      // track seen keys
      $key = $website . '|' . $condition; // assumes neither field contains '|'
      if (!isset($keys[$key])) {
         $keys[$key] = true;
         $arr[] = array(...);
      }
   }            
} 
```

# ruby-on-rails-3 - 将事件的日期时间链接到其关联的位置时区（TimeZone gem，ActiveSupport::TimeWithZone）

> ID：11910987
> 
> 赞同：0
> 
> 时间：2012-08-11T00:58:40.870
> 
> 标签：ruby-on-rails-3, datetime, timezone, location, geocoding

我为此苦苦挣扎了一天半，最后才终于走到了一起，部分原因是我从根本上误解了一些事情，因为我对事情应该如何运作的假设，所以我得到的结果似乎完全不合理和令人困惑我开始认为图书馆里的东西一定被严重破坏了。他们不是。

**这个线程是为了分享我的问题，以及什么有效，部分原因是在我看来，很多时候日期时间记录应该与其位置的本地时间相关联，而且很多时候应用程序在时区更改方面表现异常我认为这是因为他们不这样做。所以这里是如何做到这一点。**

简单的部分是使用 TimeZone gem 来获取位置的时区（我已经有了使用 GMaps4Rails gem 的纬度/经度），如下所述： [Ruby gem for find timezone of location](https://stackoverflow.com/questions/8349817/ruby-gem-for-finding-timezone-of-location)

最初，我希望每个日期时间都可以有一个固有的和持久的时区，即使在从数据库中保存和检索之后，因为我们只关心每个事件的本地时区。对于在非本地区域中需要日期时间的不寻常和罕见的情况，我可以转换。但我猜这不存在，因为 MySQL 似乎没有带有日期时间的时区概念，并且只是将所有内容存储为普通的日期和时间。

所以，这很好——数据库存储在 UTC 中，我必须在每个方向上进行转换。

如何？（见下文。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:58:40.870

用户在事件地点的适当本地时间输入日期时间（年、月、日、小时、分钟、秒）。要将其保存为数据库中正确的 UTC 时间，并在稍后检索它并将其与正确的时区一起使用，以下是配方：

1.  您必须首先设置`Time.zone = timezone`-- 其中 timezone 是一个命名的时区字符串，例如`"America/Toronto"`（GeoKit/TimeZone 样式）或`"Eastern Time (US & Canada)"`（Rails 3 样式）：

    ```
    1.9.3p200 :001 > Time.zone = "America/Toronto"
     => "America/Toronto" 
    ```

    请注意，在 GeoKit/TimeZone 样式和 Rails 3 样式之间进行映射并非易事。对此有一些支持，但 GeoKit 返回的许多映射不在 Rails 映射中，所以我坚持使用 GeoKit/TimeZone 名称，因为它们似乎工作得很好，而且我不需要用户可选择时区，因为我正在为使用这些位置的用户自动处理所有这些。

2.  现在您可以使用 解析和保存您的日期时间变量`ActiveSupport::TimeWithZone`，它将使用`Time.zone`参数正确编码：

    ```
    1.9.3p200 :002 > t = Time.zone.local( 2012, 8, 1, 12, 0, 0 )
     => Wed, 01 Aug 2012 12:00:00 EDT -04:00 
    ```

    即在我的情况下，对于我`Event`的带有实例的模型`event`：

    ```
    event.start = Time.zone.local( year, month, day, hour, min, sec )
    event.save 
    ```

    当数据保存到数据库时，它是 UTC： `2012-08-01 16:00:00.000000`

    （下面通过调用模拟`t.utc`）

    ```
    1.9.3p200 :003 > t = t.utc
     => 2012-08-01 16:00:00 UTC

    1.9.3p200 :004 > t.zone
     => "UTC" 
    ```

3.  现在，当您从数据库中读回它时，您需要再次使用`TimeWithZone`支持来告诉 DateTime 它所在的时区。

    请注意，该`in_time_zone`函数不会更改基础 datetime 变量的时区：

    ```
    1.9.3p200 :005 > t.in_time_zone( "America/Toronto" )
     => Wed, 01 Aug 2012 12:00:00 EDT -04:00 

    1.9.3p200 :006 > t
     => 2012-08-01 16:00:00 UTC 

    1.9.3p200 :007 > t.zone
     => "UTC" 
    ```

    所以你真的需要将函数输出分配回你的 datetime 变量：

    ```
    1.9.3p200 :008 > t = t.in_time_zone( "America/Toronto" )
     => Wed, 01 Aug 2012 12:00:00 EDT -04:00 

    1.9.3p200 :009 > t
     => Wed, 01 Aug 2012 12:00:00 EDT -04:00 

    1.9.3p200 :010 > t.zone
     => "EDT" 
    ```

4.  最后，一个警告——不要使用`t.time`！它的输出完全无用且不合理，时间和时区不同步：

    ```
    1.9.3p200 :011 > t.time
     => 2012-08-01 12:00:00 UTC 
    ```

# php - PHP脚本被随机中断

> ID：11910989
> 
> 赞同：0
> 
> 时间：2012-08-11T00:58:59.583
> 
> 标签：php

我有一个 php 脚本，它可以做很多事情，产生大量输出，并且可能需要几分钟才能完成。

我已经在开头放置了一个 set_time_limit(999999) 。

在此之前，明显超过了三十秒的时间限制，被打断了。发生这种情况时，记录了一个致命错误，表明这一点。

现在，从我调用该脚本的浏览器中，我观察到浏览器几乎实时接收脚本的输出，但在随机点，脚本只是被中断。它*没有*超过时间限制（显然），并且没有记录任何错误。实际上，如果我再次尝试它，它会在不同的点被打断。

问题是，如果没有遇到错误，并且没有达到时间限制，还有什么可以导致脚本被中断？也许由于超时而与客户端（浏览器）断开连接？（不过，等待数据不是超时，因为数据一直在输出）。也许浏览器可能有一个 html 页面的最大尺寸？

但是，如果是这两种情况之一，为什么没有将其记录为错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:19:07.657

当脚本达到时间限制时，会抛出一个致命错误，所以如果你没有看到任何错误，这不应该是原因（确保错误报告被激活，要么在脚本中设置它，要么在 php.ini 中设置它。 ini 文件）。

如果您想停用时间限制，请改用：

```
set_time_limit(0); 
```

不幸的是，如果没有更多信息，我们将无济于事。

# .net - 如何编写与 LINQ to SQL（和高性能）兼容的 FirstOrException() 扩展方法？

> ID：11910990
> 
> 赞同：2
> 
> 时间：2012-08-11T00:59:03.977
> 
> 标签：.net, vb.net, linq-to-sql, extension-methods, linq-to-objects

我经常发现自己在编写这样的代码：

```
Dim oRenewalOrder = (From c in dc.Orders _
                     Where c.CustomerID = iCustomerID _
                     And c.Type = "RENEWAL").FirstOrDefault()

If oRenewalOrder Is Nothing Then
   Throw New Exception("Can't find renewal order for customer " & iCustomerID) ' or assert, if you prefer
End If

' Continue processing... 
```

我更喜欢使用 First() 方法，因为当没有元素时它已经抛出异常。但是这个异常并没有告诉你是什么原因造成的，这使得调试变得更加困难。所以我想写一个 FirstOrException() 扩展方法，我可以这样使用：

```
Dim oRenewalOrder = (From c in dc.Orders _
                     Where c.CustomerID = iCustomerID _
                     And c.Type = "RENEWAL").FirstOrException("Can't find renewal order for customer " & iCustomerID)

' Continue processing... 
```

问题是很难以通用方式编写这样的方法，同时使用 LINQ to Objects*并*利用 LINQ to SQL 提供的查询优化。我能想到的最好的是：

```
 ''' <summary>
    ''' Returns the first element of a sequence.
    ''' If the sequence is empty, an InvalidOperationException is thrown with the specified message.
    <Extension()> _
    Function FirstOrException(Of T)(ieThis As IEnumerable(Of T), sMessage As String) As T
        Try
            Return ieThis.First()
        Catch ex As InvalidOperationException
            Throw New InvalidOperationException(sMessage, ex)
        End Try
    End Function 
```

我还为 IEnumerable(Of T) 编写了另一个等效的扩展方法，以涵盖 LINQ to Objects 的情况。这些工作得很好，但是必须捕获异常并重新抛出它似乎很糟糕。我尝试了一种不同的方法，使用 Take(1) 和 AsEnumerable()，但是当我分析它时，它运行了两个单独的 SELECT TOP 1 语句：

```
 <Extension()> _
    Function FirstOrException(Of T)(iqThis As IQueryable(Of T), sMessage As String) As T
        Dim aFirst = iqThis.Take(1).AsEnumerable()
        If aFirst.Count() <= 0 Then
            Throw New InvalidOperationException(sMessage)
        Else
            Return aFirst(0)
        End If
    End Function 
```

所以我回到异常处理方法。我不喜欢它，因为当出现不同的问题时，集合底层的任何 LINQ 提供程序都有可能抛出 InvalidOperationException - 不是缺少结果，而是其他问题。这会导致我的代码错误地认为没有结果，而实际上这完全是一个不同的问题。

...

好吧，正如您输入详细问题时经常发生的那样，我想我找到了更好的解决方案，我将在下面的答案中发布。但如果有人发现更好的东西，我会留下这个问题:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:35:35.533

您已经在没有更改 Linq-to-sql 优化的情况下进行了扩展。您需要至少访问数据库一次以检查那里是否有东西。您不需要使用`Take(1)`，只需调用`FirstOrDefault()`并检查它是否返回`Nothing`。

```
Function GetFirstOrException(Of T)(sMessage As String, sFirst as T) as T
   if (T is Nothing) 
      Throw New InvalidOperationException(sMessage)
   Return T
End Function

 <Extension()> _
Function FirstOrException(Of T)(iqThis As IQueryable(Of T), sMessage As String) As T
    Return GetFirstOrException(sMessage, idThis.FirstOrDefault())
End Function

 <Extension()> _
Function FirstOrException(Of T)(iqThis As IEnumerable(Of T), sMessage As String) As T
    Return GetFirstOrException(sMessage, idThis.FirstOrDefault())
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:59:03.977

我发现这`Take(1).ToArray()`是最干净的解决方案。它只导致将单个查询发送到数据库。请注意，在下面的代码中，我正在为 IEnumerable 和 IQueryable 执行单独的扩展方法，以支持 LINQ to SQL 和 LINQ to Objects。

```
 ''' <summary>
    ''' Returns the first element of a sequence.
    ''' If the sequence is empty, an InvalidOperationException is thrown with the specified message.
    <Extension()> _
    Function FirstOrException(Of T)(ieThis As IEnumerable(Of T), sMessage As String) As T
        Dim aFirst = ieThis.Take(1).ToArray()
        If aFirst.Length <= 0 Then
            Throw New InvalidOperationException(sMessage)
        Else
            Return aFirst(0)
        End If
    End Function

     ''' <summary>
     ''' Returns the first element of a queryable (e.g. LINQ to SQL) sequence.
     ''' If the sequence is empty, an InvalidOperationException is thrown with the specified message.
    <Extension()> _
    Function FirstOrException(Of T)(iqThis As IQueryable(Of T), sMessage As String) As T
        Dim aFirst = iqThis.Take(1).AsEnumerable()
        If aFirst.Length <= 0 Then
            Throw New InvalidOperationException(sMessage)
        Else
            Return aFirst(0)
        End If
    End Function 
```

# powershell - Measure-Object - 对来自连续 get-counter 的所有 counterSamples 求和

> ID：11910996
> 
> 赞同：1
> 
> 时间：2012-08-11T00:59:47.637
> 
> 标签：powershell, powershell-2.0, performancecounter, powershell-1.0

我正在尝试编写一个 PowerShell 脚本，它将每 N 秒连续轮询一个性能计数器，然后将计数器返回的值相加。我的最终目标是将十几个计数器的结果汇总并运送到 Graphite 服务器进行监控和报告。

到目前为止，这是我为一个特定的柜台拼凑而成的，我只是不确定如何在 PowerShell 魔法巫术的土地上获得一些东西。

1.  我不知道如何将作业 ID 获取为整数，因此我可以自动执行 while 循环。
2.  仅返回来自 Receive-Job 的 CounterSample 数据，这些数据可以通过管道传输到 Measure-Object 以获得总和。

    ```
    Start-Job {Get-Counter -Counter "\Network Interface(MyNic)\Bytes Received/sec" -Continuous -SampleRate 1}

    while ($true) { 
            start-sleep -s 10
            Receive-Job -id N
    } 
    ```

我也很想知道一种简单或有效的方法来动态确定 PowerShell v1.0 或 v2.0 中 Windows 框上的活动 NIC。"\Network Interface(*)\" 有效，但给了我一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:22:36.500

关于#1，获取从`Start-Job`. 您可以稍后使用它来引用作业，例如：

```
$job = Start-Job ... 
```

对于＃2，在末尾添加一个额外的 foreach 例如：

```
$job = start-job {Get-Counter -Counter "\Network Interface(Realtek PCIe GBE Family Controller)\Bytes Total/sec" -Continuous -SampleInterval 1 | Foreach {$_.CounterSamples}} 
```

然后像这样对数据求和：

```
Receive-Job $job | Measure CookedValue -Sum 
```

# elasticsearch - Elasticsearch 和轮胎：添加分析设置中断从_source 中排除？

> ID：11910997
> 
> 赞同：1
> 
> 时间：2012-08-11T01:00:05.517
> 
> 标签：elasticsearch, tire

我有一个对象被索引到带有大型附件的 Elasticsearch 中，我不想将其存储在 _source 中。在映射中指定“排除”修复了该问题（感谢此处回答的另一个问题），但是当我为过滤器/分析器添加自定义设置时，它以某种方式破坏了排除，我想知道这是轮胎问题还是它只需要以不同的方式指定排除。

这是代码：

```
settings analysis: {
  filter: {
    ngram_filter: {
      type: "nGram",
      min_gram: 2,
      max_gram: 12
    }
  },
  index_analyzer: {
    index_ngram_analyzer: {
      type: "custom",
      tokenizer: "standard",
      filter: ["lowercase", "ngram_filter"]
    }
  },
  search_analyzer: {
    search_ngram_analyzer: {
      type: "custom",
      tokenizer: "standard",
      filter: ["standard", "lowercase", "ngram_filter"]
    }
  }
} do
  mapping :_source => { :excludes => ['attachment'] } do
    indexes :id, :type => 'integer'
    [:title, :abstract].each do |attribute|
      indexes attribute, type: 'string', analyzer: 'ngram_analyzer'
    end
    indexes :attachment, :type => 'attachment'
  end
end 
```

带有 ":excludes" 的 "mapping" 行一直在起作用，直到我添加了 "settings" 块，所以这导致排除被忽略。有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T02:44:10.980

试试这个：

```
settings :analysis => {
  :filter  => {
    :ngram_filter => {
      :type => "nGram",
      :min_gram => 2,
      :max_gram => 12
    }
  },
  :analyzer => {
    :index_ngram_analyzer => {
      :type  => "custom",
      :tokenizer  => "standard",
      :filter  => ["lowercase", "ngram_filter"]
    },
    :search_ngram_analyzer => {
      :type  => "custom",
      :tokenizer  => "standard",
      :filter  => ["standard", "lowercase", "ngram_filter"]
    }
  }
} do
  mapping :_source => { :excludes => ['attachment'] } do
    indexes :id, :type => 'integer'
    [:title, :abstract].each do |attribute|
      indexes attribute, :type => 'string', :index_analyzer => 'index_ngram_analyzer', :search_analyzer => 'search_ngram_analyzer'
    end
    indexes :attachment, :type => 'attachment'
  end
end 
```