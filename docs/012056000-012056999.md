# StackOverflow 问答 12056000-12056999

# ruby-on-rails - Rails - Rubber - setup_remote_aliases 任务被“卡住”并显示消息“sftp upload #StringIO:0x103bf1068 ->

> ID：12056001
> 
> 赞同：1
> 
> 时间：2012-08-21T13:31:36.570
> 
> 标签：ruby-on-rails, amazon-web-services

我正在尝试使用橡胶将我的应用程序部署到 AWS。

但是 setup_remote_aliases 任务“卡住”了消息“sftp upload #StringIO:0x103bf1068 ->

在尝试橡胶帽：刷新时，它再次卡在同一点。我设置了一个微型实例 - 可能是因为这个吗？

以下是日志：

```
 Instance running, fetching hostname/ip data
  * executing `rubber:_allow_root_ssh'
  * executing "sudo -p 'sudo password: '  bash -l -c 'cp /home/ubuntu/.ssh/authorized_keys /root/.ssh/'"
    servers: ["23.20.223.139"]
 ** Can't connect as user ubuntu to 23.20.223.139, assuming root allowed
  * executing `rubber:_direct_connection_23.20.223.139_794'
  * executing "echo"
    servers: ["23.20.223.139"]
    [23.20.223.139] executing command
 ** [out :: 23.20.223.139] Please login as the ec2-user user rather than root user.
 ** [out :: 23.20.223.139] 
    command finished in 11086ms
  * executing `rubber:setup_static_ips'
  * executing `rubber:setup_local_aliases'
 ** Writing out aliases into local machines /etc/hosts, sudo access needed
Password:
 ** Auto role: apache => production.foo.com, {:platform=>"linux"}
 ** Auto role: app => production.foo.com, {:platform=>"linux"}
 ** Auto role: passenger => production.foo.com, {:platform=>"linux"}
 ** Auto role: collectd => production.foo.com, {:platform=>"linux"}
 ** Auto role: common => production.foo.com, {:platform=>"linux"}
 ** Auto role: monit => production.foo.com, {:platform=>"linux"}
 ** Auto role: db => production.foo.com, {:primary=>true, :platform=>"linux"}
 ** Auto role: postgresql => production.foo.com, {:platform=>"linux"}
 ** Auto role: postgresql_master => production.foo.com, {:platform=>"linux"}
 ** Auto role: elasticsearch => production.foo.com, {:platform=>"linux"}
 ** Auto role: examples => production.foo.com, {:platform=>"linux"}
 ** Auto role: graphite_server => production.foo.com, {:platform=>"linux"}
 ** Auto role: graphite_web => production.foo.com, {:platform=>"linux"}
 ** Auto role: graylog_elasticsearch => production.foo.com, {:platform=>"linux"}
 ** Auto role: graylog_mongodb => production.foo.com, {:platform=>"linux"}
 ** Auto role: mongodb => production.foo.com, {:platform=>"linux"}
 ** Auto role: graylog_server => production.foo.com, {:platform=>"linux"}
 ** Auto role: graylog_web => production.foo.com, {:platform=>"linux"}
 ** Auto role: haproxy => production.foo.com, {:platform=>"linux"}
 ** Auto role: web => production.foo.com, {:platform=>"linux"}
 ** Auto role: web_tools => production.foo.com, {:platform=>"linux"}
  * executing `rubber:setup_remote_aliases'
    servers: ["production.foo.com"]
 ** sftp upload #<StringIO:0x0000010477db48> -> /tmp/setup_remote_aliases 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T22:58:56.470

Ubuntu Server 实例没问题。其他的可能有问题。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:36:31.217

虽然我不知道确切的问题是什么，但我在使用橡胶时也遇到了这种问题。我发现向橡胶添加更多调试信息非常有用。

对于您的情况，您可以找到定义任务的位置并简单地记录一些消息。

```
grep -r setup_remote_aliases `bundle show rubber` 
```

此外，您可能想尝试支持 Rails 应用程序部署的 Amazon Elastic Beanstalk：[https ://forums.aws.amazon.com/ann.jspa?annID=1680](https://forums.aws.amazon.com/ann.jspa?annID=1680)

# html - 马拉地语未在浏览器中正确显示

> ID：12056003
> 
> 赞同：4
> 
> 时间：2012-08-21T13:31:45.970
> 
> 标签：html, css, utf-8, character-encoding, lang

在我的 html 文档中，我的 html 为：

```
<html>
<head><title>title</title></head>

<body>  <div>विजय कदम&lt;/div>   </body>
</html> 
```

我得到的输出为：

```
à¤µà¤¿à¤œà¤¯ à¤•à¤¦à¤® 
```

任何想法？我需要说明什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:33:56.953

1.  [以UTF-8 编码](https://superuser.com/questions/21135/how-can-i-edit-unicode-text-in-notepad)保存您的文件
2.  将元标记添加到 html 以支持 UTF-8
3.  确保您的服务器支持 UTF-8 编码，[Apache 的一个示例](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CGwQFjAB&url=https://stackoverflow.com/questions/913869/how-to-change-the-default-encoding-to-utf-8-for-server&ei=9ZAzUO2yKoST0QWU14CIBg&usg=AFQjCNFtHGcTksYfV_ULSx4CyZgXrsxFxg&sig2=rDodpiIy62x1QJ-A7K5otA)。

如何将页面编码更改为[UTF-8](http://en.wikipedia.org/wiki/UTF-8)：

将以下标记添加到 HTML：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

或 HTML5 等价物：

```
<meta charset="utf-8" /> 
```

有关字符编码的更多信息，请查看[此](http://kunststube.net/encoding/)内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:38:04.267

您需要一个以 Unicode UTF-8 格式保存的编辑器。

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

您还可以使用转换器来显示印地语。链接： http: [//vikku.info/indian-language-unicode-converter/hindi-unicode-converter.html](http://vikku.info/indian-language-unicode-converter/hindi-unicode-converter.html)你所做的是粘贴html文本。希望这可以帮助！

# html - @fontface - zen 购物车中的 403 禁止错误

> ID：12056008
> 
> 赞同：3
> 
> 时间：2012-08-21T13:32:01.167
> 
> 标签：html, css, fonts, permissions, zen-cart

我不确定这是否是发布此内容的正确位置，因为我不知道问题出在哪里。基本上字体现在对我来说真的很痛苦，而且没有任何效果。我尝试从 google-fonts 加载字体并遇到 IE 问题，所以我决定自己下载并提供它们，但现在它在任何浏览器中都不起作用我收到错误：

“网络错误：403 禁止 - [http://www.mychic.co.uk/includes/templates/SmartStart/fonts/architectsdaughter-webfont.woff](http://www.mychic.co.uk/includes/templates/SmartStart/fonts/architectsdaughter-webfont.woff) ““网络错误：403 禁止 - [http://www.mychic.co.uk/包括/模板/SmartStart/fonts/architectsdaughter-webfont.ttf](http://www.mychic.co.uk/includes/templates/SmartStart/fonts/architectsdaughter-webfont.ttf) "

我已经尝试使用权限来授予对文件的读取和执行权限，甚至尝试过 777 并且仍然遇到相同的错误，字体肯定在它们应该在的位置，我的 css 看起来像这样：

```
@font-face {
    font-family: 'architects_daughterregular';
    src: url('../fonts/architectsdaughter-webfont.eot');
    src: url('../fonts/architectsdaughter-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/architectsdaughter-webfont.woff') format('woff'),
         url('../fonts/architectsdaughter-webfont.ttf') format('truetype'),
         url('../fonts/architectsdaughter-webfont.svg#architects_daughterregular') format('svg');
    font-weight: normal;
    font-style: normal;

}

body { font-family: 'architects_daughterregular'; } 
```

有人建议我添加一个 .htaccess 文件，因此我将以下内容添加到站点的根目录和字体目录（是否正确）：

```
AddType application/vnd.ms-fontobject .eot
AddType application/x-font-ttf        .ttf
AddType application/x-font-woff       .woff 
```

任何想法我在这里做错了什么 - 任何帮助/想法都非常感谢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T17:14:52.323

感谢我的托管服务提供商，我已经找到了问题所在，我将尽我所能将信息传递给遇到相同问题的任何其他人：zencart 已在包含文件夹中包含一个 .htaccess 文件，该文件会阻止某些文件。删除这将解决问题，但也允许在服务器上运行脚本，因此最好只允许通过与您的字体文件相对应的文件类型（请参阅添加到文件匹配的 svg、eot、woff 和 ttf 文件类型）：

```
#
# @copyright Copyright 2003-2010 Zen Cart Development Team
# @license http://www.zen-cart.com/license/2_0.txt GNU Public License V2.0
# @version $Id: .htaccess 18695 2011-05-04 05:24:19Z drbyte $
#
# This is used with Apache WebServers
#
# The following blocks direct HTTP requests to all filetypes in this directory recursively, except certain approved exceptions
# It also prevents the ability of any scripts to run. No type of script, be it PHP, PERL or whatever, can normally be executed if ExecCGI is disabled.
# Will also prevent people from seeing what is in the dir. and any sub-directories
#
# For this to work, you must include either 'All' or at least: 'Limit' and 'Indexes' parameters to the AllowOverride configuration in your apache/conf/httpd.conf file.
# Additionally, if you want the added protection offered by the OPTIONS directive below, you'll need to add 'Options' to the AllowOverride list, if 'All' is not specified. 
# Example:
#<Directory "/usr/local/apache/htdocs">
#  AllowOverride Limit Options Indexes
#</Directory>
###############################

# deny *everything*
<FilesMatch ".*">
  Order Allow,Deny
  Deny from all
</FilesMatch>

# but now allow just *certain* necessary files:
<FilesMatch ".*\.(js|JS|css|CSS|jpg|JPG|gif|GIF|png|PNG|swf|SWF|xsl|XSL|svg|eot|ttf|woff)$">
  Order Allow,Deny
  Allow from all
</FilesMatch>

IndexIgnore */*

## NOTE: If you want even greater security to prevent hackers from running scripts in this folder, uncomment the following line (if your hosting company will allow you to use OPTIONS):
# OPTIONS -Indexes -ExecCGI 
```

# android - Android：httppost，检查结果有问题

> ID：12056010
> 
> 赞同：0
> 
> 时间：2012-08-21T13:32:12.833
> 
> 标签：android, http-post

我在检查/验证 http post 操作的结果方面有点挣扎。我正在检查数据库中的某些条目，然后将结果转换为 JSONArray。但是，如果结果为空，我不想尝试转换。我正在捕获异常，因此如果结果为零，程序不会崩溃，但我想避免尝试将空结果一起转换。

我正在像这样连接到数据库（通过 php 脚本）：

```
try {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(url);
    StringBuilder authentication = new 
    StringBuilder().append("user").append(":").append("pass");
    result = Base64.encodeBytes(authentication.toString().getBytes());
    httppost.setHeader("Authorization", "Basic " + result);
    nameValuePairs.add(new BasicNameValuePair("date", date));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
} catch (Exception e) {
    Log.e(DEBUG_TAG, "Error in http connection" + e.toString());
}

try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-
                         8859-1"),8);
    sb = new StringBuilder();
    sb.append(reader.readLine() + "\n");
    is.close();
    result = sb.toString();
} catch (Exception e) {
    Log.e("log_tag", "Error converting result "+e.toString());
} 
```

如您所见，我从服务器获取结果并将其转换为字符串。

然后我想将此字符串转换为 JSONArray 如果它不为空。如果它是空的，我想跳过它。

但是，我无法弄清楚如何捕捉转换后的结果字符串是否为空。

如果我这样做，在上面的代码之后，

```
itemsview.append("Result: " + result) 
```

那么附加的文本是“null”。这是有道理的，因为从数据库返回的结果（在这个测试中）是空白的。

但是，如果我这样做是为了捕获 null 结果，

```
if (result.equals("null") {
    itemsview.append("Result is null!");
} 
```

文字没有出现。所以，如果我打印出结果字符串的值，它是空的。但是，当我检查 if 中的 null 值时，结果并非如此。

我在这里想念什么？

顺便说一句：如前所述，我在这段代码之后所做的是将结果字符串转换为 JSONArray，然后将值插入到列表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:42:23.307

代替

```
if (result.equals("null") {
itemsview.append("Result is null!");} 
```

利用

```
if (result==null) {
itemsview.append("Result is null!");} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:37:04.927

我认为最好检查 result==null 而不是你在做什么 :) 干杯 :)

# c# - Linq 在同一个列表中添加相同的项目

> ID：12056011
> 
> 赞同：1
> 
> 时间：2012-08-21T13:32:13.117
> 
> 标签：c#, linq

所以我有一类产品：

```
class Product{
    public int id;
    public int price;
    public string product_name;
}

var BoughtProductList = new List<Product>();
BoughtProductList .Add(new Product() { id = 1, price = 3 product_name = "orange" });
BoughtProductList .Add(new Product() { id = 2, price = 2 product_name = "apple" });
BoughtProductList .Add(new Product() { id = 2, price = 2 product_name = "apple" });
BoughtProductList .Add(new Product() { id = 3, price = 3 product_name = "banana" }); 
```

现在我想把它放在一张桌子上，这样它就会向我展示所有购买的产品，但我不想两次看到苹果产品。我如何在 linq 中查看该列表而不创建该类的新实例并添加相同的产品 ID 以查看我在该列表中出售该苹果的金额。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:43:37.680

```
from produce in BoughtProductList
group produce.price by new {produce.id, produce.product_name} into grp
select new{grp.id, grp.product_name, TotalPrice = grp.Sum()}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:39:06.700

您要做的是`GroupBy`对产品的`id`属性执行 a 。完成此操作后，您可以从每个组中添加`id`and`product_name`并知道它将是不同的。您还可以`Sum`计算每个组的价格（或将数量乘以价格）以获得销售该产品所赚取的总金额。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:43:14.567

```
var newBoughtProductList = new List<Product>();//create new list

for (int i = 0; i < BoughtProductList.Count; i++)//search old list
{
    Product currentProduct = BoughtListProduct[i];//get current product

    if (!newBoughtProductList.Contains(currentProduct)) //see if duplicate
        newBoughtProductList.Add(currentProduct);       //add product

    else 
    {
        int copyingProduct = BoughtProductList.FindIndex(currentProduct);
        //get duplicates index

        newBoughtProductList[copyingProduct].price += 
           newBoughtProductList[copyingProduct].price;//add to price of duplicate
    }
} 
```

这基本上搜索列表并且不添加任何重复项，然后如果某项是重复项，它会通过重复项的价格增加价格。*注意：这不使用`linq`（但您可能知道）*希望这会有所帮助！

# html - 在网站上自动“跳转标记”而不在链接中添加#region？

> ID：12056016
> 
> 赞同：0
> 
> 时间：2012-08-21T13:32:21.010
> 
> 标签：html, hyperlink, hashtag

如果您想在网站上跳转到特定位置，请为该位置添加主题标签，例如：

```
www.mysite.com/category/file1#info 
```

是否可以为类别文件夹中的每个站点设置跳转以自动跳转到#info而不设置链接？

就像，当我分享这些链接中的任何一个时：

```
www.mysite.com/category/file1
www.mysite.com/category/file2
www.mysite.com/category/file3 
```

然后它会自动跳转到**#info**。

如果这是可能的，那将是一种方法/解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:48:19.047

假设您更喜欢客户端技术来执行此操作，而不是服务器端（[asp](/questions/tagged/asp "显示标记为“asp”的问题")、[.net](/questions/tagged/.net "显示标记为“.net”的问题")、[php](/questions/tagged/php "显示标记为“php”的问题")、[ruby](/questions/tagged/ruby "显示标记为“红宝石”的问题")​​ ...），并且您很乐意使用 JavaScript，那么以下解决方案将更改包含文件夹的*所有*元素的`href`属性： *`a``href``category`*

 *```
var links = document.getElementsByTagName('a');

for (var i = 0, len = links.length; i < len; i++) {
    var cur = links[i],
        h = cur.href;
    if (h.indexOf('/category/') !== -1) {
        cur.href = h + '#info';
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/ckqYp/1/)。

或者，更简洁一点，使用三元运算符来做完全相同的事情（尽管这次显式返回`href`if 它不被更改：

```
var links = document.getElementsByTagName('a');

for (var i = 0, len = links.length; i < len; i++) {
    var cur = links[i],
        h = cur.href;
    cur.href = h.indexOf('/category/') !== -1 ? h + '#info' : h;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/ckqYp/2/)。*

# java - Java GUI Windows 经典

> ID：12056017
> 
> 赞同：0
> 
> 时间：2012-08-21T13:32:21.540
> 
> 标签：java, user-interface, layout, netbeans

我注意到在 Netbeans 中，您可以通过各种屏幕（Windows、Windows Classic、Nimbus 等）预览您的 GUI。我很确定 Netbeans 中的默认值是 Metal，但我想将其更改为 Windows Classic。这可能吗？

还想知道是否可以将边缘更改为直线而不是圆形。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:47:19.973

应用程序的视觉风格被称为“外观”。 [查看有关它们的 Java 教程](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

从教程：

```
try {
        // Set System L&F
        UIManager.setLookAndFeel(
            UIManager.getSystemLookAndFeelClassName());
    } 
    catch (UnsupportedLookAndFeelException e) {
       // handle exception
    }
    catch (ClassNotFoundException e) {
       // handle exception
    }
    catch (InstantiationException e) {
       // handle exception
    }
    catch (IllegalAccessException e) {
       // handle exception
    } 
```

# visual-studio-2012 - Visual Studio 2012 损坏 ApplicationHost.config 文件

> ID：12056020
> 
> 赞同：1
> 
> 时间：2012-08-21T13:32:37.483
> 
> 标签：visual-studio-2012

我刚刚安装了 Visual Studio 2012 RTM。在尝试创建新 Web 项目的过程中，我收到以下错误：

“Web 应用程序项目当前配置为使用 IIS Express。要切换回使用 Visual Studio 开发服务器，请更改工具/选项菜单的项目和解决方案/Web 项目类别下的开发服务器选项。配置 IIS Express 失败并显示以下错误：文件名：\?\UNC\DEV-FILES\home\mike\MyDocuments\IISExpress\config\applicationHost.config。行号：1。错误：配置文件不是格式正确的 XML”

...并且项目创建随后失败。

我已经知道我可以通过使用 VS 开发服务器来解决这个问题，但我也应该能够在必要时使用 IIS。

当我查看有问题的 applicationHost 文件时，它的大小为 0kb。看起来 Visual Studio 2012 完全清除了文件的内容。我已经从 c:/inetpub/history/ 对 applicationHost 文件进行了干净的备份，并将它们恢复到 IISExpress 文件夹中。同样，当我尝试通过 VS 2012 创建新项目时，文件从 85KB 变回 0KB。

所以我想我想弄清楚为什么 VS 2012 正在写入 applicationHost.config 文件，它试图写什么，以及我如何解决这个问题。

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:48:10.050

我遇到了这个问题，并通过删除 IISExpress 文件夹上的加密来解决它。您可能需要也可能不需要删除 My Documents\Visual Studio 2012 文件夹上的加密。

# xml-parsing - jibx 继承

> ID：12056021
> 
> 赞同：2
> 
> 时间：2012-08-21T13:32:41.263
> 
> 标签：xml-parsing, jibx

我有一个输入 xml，我需要使用 JibX 对其进行解析和绑定。
我们使用 xml 的特定 node() 中的值来确定必须初始化的子类的类型。

*示例.xml*

```
<MainClass>
    <TypeCode>ChildClassType</TypeCode>
    <!--Optional:-->
    <ChildClassOne_Attribute1></ChildClassOne_Attribute1>
    <!--Optional:-->
    <ChildClassOne_Attribute2></ChildClassOne_Attribute2>
    <!--Optional:-->
    <ChildClassTwo_Attribute1></ChildClassTwo_Attribute1>
    <!--Optional:-->
    <ChildClassTwo_Attribute2></ChildClassTwo_Attribute2>
    <!--Optional:-->
    <ChildClassThree_Attribute></ChildClassThree_Attribute>
</MainClass> 
```

在 JibX 中可以解析上述 xml 并根据“TypeCode”初始化三个类之一 - ChildClassOne、ChildClassTwo、ChildClassThree。

我的最终结果应该是这样的，

```
Class MainClass{
    String TypeCode
} 
```

如果我的 TypeCode 是“TypeOne”，我需要初始化“ChildClassOne”

```
Class ChildClassOne extends MainClass{
    ChildClassOne_Attribute1;   
    ChildClassOne_Attribute2;
 } 
```

如果我的 TypeCode 是“TypeTwo”，我需要初始化“ChildClassTwo”

```
Class ChildClassTwo extends MainClass{
    ChildClassTwo_Attribute1;   
    ChildClassTwo_Attribute2;
 } 
```

如果我的 TypeCode 是“TypeThree”，我需要初始化“ChildClassThree”

```
Class ChildClassThree extends MainClass{
    ChildClassThree_Attribute;      
 } 
```

这在 JibX 中是否可行，还是我要求太多？

提前感谢普拉文

# iphone - 如何在表格视图中设置相同尺寸的图像？

> ID：12056022
> 
> 赞同：0
> 
> 时间：2012-08-21T13:32:43.553
> 
> 标签：iphone

我是 iPhone 新手，我正在创建一个应用程序，将国家名称和他们的国旗显示为缩略图。问题是所有图像的大小都不相同，因此输出不可预测。

代码如下

# .h 文件

```
IBOutlet UILabel *countryLabel;
IBOutlet UIImageView *thumbnailView;
IBOutlet UILabel *populationLable; 
```

# .m 文件

```
#import "TextFieldAlertViewController.h"

@implementation TextFieldAlertViewController

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
  return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *simpleTableIdentifier = @"SimpleTableItem";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

  if (cell == nil) {
   cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
  }

  cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
  cell.imageView.image = [UIImage imageNamed:[thumbnails objectAtIndex:indexPath.row]];
  return cell;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
  self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
  if (self) {
    // Custom initialization
  }
  return self;
}

- (void)loadView {
}

- (void)viewDidLoad {
  [super viewDidLoad];
  tableData = [NSArray arrayWithObjects:@"Australia", @"Brazil",@"China", @"Denmark", @"England", @"France", @"Germany", @"Hong Kong", @"India", @"Japan", @"Korea", @"Labanon", @"Malasiya", @"Niegiria", @"Peru", @"Swidden", nil];
  thumbnails = [NSArrayarrayWithObjects:@"aus.png",@"br.png",@"ch.png",@"dk.png",@"eng.png",@"fr.png", @"ger.png",@"hk.png",@"in.png",@"jp.png",@"ko.png",@"lb.png",@"my.png",@"ng.png",@"pe.png",@"sw.png",nil];
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:52:42.010

我现在实际上有同样的问题，当前的答案将不起作用，因为 a 中的所有标准视图`UITableViewCell`都在方法中调整了大小`layoutSubviews`，因此更改视图的框架，至少在 中`tableView:cellForRowAtIndexPath:`不起作用。

据我所知，您有以下选择：

1.  `layoutSubviews`通过在调用后对 UITableViewCell 进行子类化来更改 imageView 的框架`[super layoutSubviews]`，我已经尝试过了，您还必须移动 textLabel 因为它会被定位在错误的位置，因为图像现在更大/更小。
2.  不要使用`imageView`，而是创建你自己的`UIImageView`，当然你必须重新定位 textLabel 或者创建你自己的，缺点是当设备旋转时`UILabel`你必须知道你和 UILabel 的位置和大小， `UIImageView`tableView 调整大小等。
3.  用透明度填充图像，使所有图像大小相同，并能够利用默认的`UITableViewCell`自动布局
4.  现场调整图像大小，如以下答案：[Incorrect size of Images in TableView](https://stackoverflow.com/questions/6178579/incorrect-size-of-images-in-tableview)

我想我会在我自己的情况下使用第三个选项，因为我可以控制每个单元格中使用的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:46:20.000

`cellForRowAtIndexPart`只需在部分中设置单元格 imageView 的 Frame

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewStylePlain reuseIdentifier:CellIdentifier];
    }
    cell.imageView.frame = CGRectMake(50, 10, 200, 50);
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:43:06.410

试试“返回单元格”上方的这一行：

```
cell.imageView.frame = CGRectMake(0,0,32,32); 
```

# excel - 根据两个日期系列中的常见日期生成新的日期系列

> ID：12056029
> 
> 赞同：1
> 
> 时间：2012-08-21T13:33:08.467
> 
> 标签：excel, excel-2010, vba

我正在尝试将两个数据系列与日期进行比较，并且在第三列中仅显示两个数据系列中常见的日期（以降序模式排序）。我的一个朋友帮助我整理了一些似乎可以工作的代码，但是当我拥有相当长的一系列数据时，生成结果似乎需要很长时间。有没有办法以不同的方式编写这段代码，可以更快地计算？（我目前正在使用 excel 2010。

我在 D2 上输入然后将其复制下来的功能是：`=next_duplicate(A2:$A$535,B2:$B$535,D1:$D$1)`

![在此处输入图像描述](../Images/522f674b62ec75473e47c965c6502102.png)

```
Function next_duplicate(list1, list2, excluded)
   For Each c In list1
    If WorksheetFunction.CountIf(excluded, c) = 0 Then
        If WorksheetFunction.CountIf(list2, c) > 0 Then
            next_duplicate = c
            Exit For
        End If
    End If
Next c

If next_duplicate = 0 Then
    next_duplicate = "N/A"
End If
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:41:16.373

您可以在没有 VBA 的情况下执行此操作。

在 C 列中，使用 COUNTIF 提取仅出现在 A 列和 B 列中的日期

```
=IF(COUNTIF($B$2:$B$7,"="&A2) > 0, A2, 0) 
```

然后在 D 列中使用数组公式（从[这里](http://www.get-digital-help.com/2009/06/06/sorting-numbers-and-text-cells-also-removing-blanks-using-array-formula-in-excel/)）对空格进行排序和删除。不要忘记选择范围，然后按 control、shift 和 enter。

```
=INDEX(C2:C7, MATCH(LARGE(IF(ISBLANK(C2:C7), "", IF(ISNUMBER(C2:C7), COUNTIF(C2:C7, "<"&C2:C7), COUNTIF(C2:C7, "<"&C2:C7)+SUM(IF(ISNUMBER(C2:C7), 1, 0))+1)), ROW()-ROW($D$2)+1), IF(ISBLANK(C2:C7), "", IF(ISNUMBER(C2:C7), COUNTIF(C2:C7, "<"&C2:C7), COUNTIF(C2:C7, "<"&C2:C7)+SUM(IF(ISNUMBER(C2:C7), 1, 0))+1)), 0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:03:21.923

如果@Dan 的解决方案有效，请继续使用，因为公式解决方案通常更酷:) 如果您需要使用 VBA，您可以试试这个：

```
Sub Common()

Dim Date1 As Range
Dim Date2 As Range
Dim CommonDates() As Variant
Dim UniqueDates As New Collection

Set Date1 = Range("A2:A6")
Set Date2 = Range("B2:B6")

' Change the max array size to equal the length of Date1
' This is arbitrary and could be more efficient, for sure :)
ReDim CommonDates(Date1.Count)

' Set a counter that will increment with matches
i = 0

' Since a match needs to be in both, iterate through Date1 and check
' if the Match function returns a True value when checking Date2.
' If so, add that value to the CommonDates array and increment the counter.
For Each DateVal In Date1
  If IsError(Application.Match(DateVal, Date2, 0)) = False Then
    CommonDates(i) = DateVal.Value
    i = i + 1
  End If
Next

' Filter out dupes (in case that is possible - if not, this can be removed
' and the bottom part reworked
On Error Resume Next
For Each Value In CommonDates
  UniqueDates.Add Value, CStr(Value)
Next Value

' Now go to the first cell in your Common Dates range (I'm using C2) and
' print out all of the results
Range("C2").Activate
For j = 1 To UniqueDates.Count
  ActiveCell.Value = UniqueDates(j)
  ActiveCell.Offset(1).Activate
Next j

' Back to the beginning
Range("C2").Activate

' Use this if you don't need to filter dupes
'For Each r In CommonDates
'  ActiveCell.Value = r
'  ActiveCell.Offset(1).Activate
'Next

End Sub 
```

它基本上遍历 Date1 并检查 Match 公式在 Date2 中是否成功/失败。成功=匹配，这意味着一个共同的日期。然后将它们打印到另一列。希望这可以帮助！

# c# - C# datagridview unicode 字符编码

> ID：12056030
> 
> 赞同：1
> 
> 时间：2012-08-21T13:33:10.120
> 
> 标签：c#, unicode, encoding, datagridview, character

我无法解决以下问题：我使用 datagridview 列告诉用户该行的项目是否已被处理。我想，一个小的 unicode 图标就足够了，所以我选择了 U+2174（复选标记）和 U+2715（交叉）来实现我想要的。对于数据表...

```
row["Done"] = (listProcessed.Contains(file.FullName)) ? "\u2714" : "\u2715"; 
```

它在我的开发机器上的调试和发布模式下运行良好，但在 Windows XP 虚拟机上却失败了。在那一张上，只显示了狭窄的方块，就好像它不认识字符一样。

我在某处读到它可能是由于行结尾，所以我尝试将*TrimEnd(null)*应用于字符串，但这没有帮助。

有没有办法让它在 Windows XP 上工作？到底出了什么问题？

感恩节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:37:04.410

这意味着 Windows XP 机器使用的字体不包含这些字符。

使用charmap 看看你是否能找到一种字体。（尝试 Arial Unicode MS）

# excel - 自动生成序列号，根据优先级列自动排序行

> ID：12056036
> 
> 赞同：0
> 
> 时间：2012-08-21T13:33:17.950
> 
> 标签：excel, vba

我需要一个宏来在 B 列中输入信息后立即在 A 列上自动生成一个序列号。C 列允许对 B 列中的信息进行优先级排序。我目前有一个宏可以根据优先级对行进行排序。因此，优先级 1 将在工作表顶部排序，然后是 2 等。因此，考虑到排序宏将根据分配的优先级移动行，如何自动生成序列号的问题。

序列号应该是从 1,2,3 开始的简单数字序列.....不确定如何查询用于创建下一个数字的最后一个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:01:05.527

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Dim rng As Range, c As Range
    Set rng = Application.Intersect(Target, Me.Columns(2))
    If Not rng Is Nothing Then
        'protect against processing (eg) the insertion of a whole column
        If rng.Cells.Count < 100 Then
            For Each c In rng.Cells
                If Len(c.Value) > 0 And Len(c.Offset(0, -1).Value) = 0 Then
                    c.Offset(0, -1).Value = GetNextNumber()
                End If
            Next c
        End If
    End If

End Sub

Function GetNextNumber()
    Dim rv
    With Me.Range("H1")
        rv = .Value
        .Value = .Value + 1
    End With
    GetNextNumber = rv
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:52:37.537

我想这将是一些变化`=MAX(A:A)+1`

如果您使用的是 Excel 2003，您可能希望限制范围`=MAX(A1:A65536)+1`

在 VBA 中

```
Option Explicit

Sub test()
Dim lookuprng As Range
Dim nextSerial As Long

Set lookuprng = Sheet1.Range("A:A")
nextSerial = WorksheetFunction.Max(lookuprng) + 1
End Sub 
```

# csv - 处理 .CSV 当其中一个值可能在字符串中包含逗号时

> ID：12056038
> 
> 赞同：2
> 
> 时间：2012-08-21T13:33:21.837
> 
> 标签：csv, coldfusion

我有一个需要转换为冷融合查询的 .csv。我使用了 cflib.org CSVtoQuery 方法，它工作得很好......但是......

如果 csv 中的“单元格”在字符串中包含逗号，例如列表，则该记录的查询行会变得混乱，因为它将字符串中的逗号视为新值。

我无法控制数据的输入方式，因此我无法将其写入或传递到引号等内。

有谁知道是否有办法处理值中可能包含逗号的 .csv（转换为查询或其他可行的结构）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:03:20.883

不，没有。制作 CSV 的人没有正确制作。没有 CSV 解析器可以区分逗号分隔和逗号之间的区别，如果没有办法区分的话。

制作文件的人应该选择不同的分隔符。

# excel - 如何在经典 ASP 中创建真正的 excel 文件

> ID：12056040
> 
> 赞同：2
> 
> 时间：2012-08-21T13:33:33.193
> 
> 标签：excel, asp-classic

我一直在使用`application/vnd.ms-excel`经典 ASP 中的选项导出 excel 文件，但是在单击下载后，`Save As`我看到`Save As Type`option = **web page**。

那么有什么方法可以`Save As`默认将文件类型保存为“ **Excel 97-2003 WorkBook** ”？我尝试过`excel.application`，`owc`但不幸的是，它们都不适合我。

实际上，当我使用这些选项时，它们会消耗大量 CPU 内存。

我愿意使用任何第三方组件来创建 Excel。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T17:12:32.007

我不确定您是否知道，但只要您在 Web 服务器上安装了 Excel，就可以使用经典 ASP 访问 Excel DOM。

您可以做的事情是有限制的，但是如果您的要求很简单，那么它可能就是您正在寻找的答案，而无需购买开始变得不受支持的昂贵组件。

```
Set oExcel = Server.CreateObject("Excel.Application")

Set oBook = oExcel.Workbooks.Add
Set oSheet = oBook.ActiveSheet
Set oRange = oExcel.ActiveCell

oRange.Cells(1,1) = "First Column"
oRange.Cells(1,2) = "Second Column"

oBook.SaveAs "workbook.xls"
oBook.Close
oExcel.Quit

Set oExcel = Nothing 
```

# ios - iOS - 显示格式化数据的最佳实践

> ID：12056045
> 
> 赞同：0
> 
> 时间：2012-08-21T13:33:52.763
> 
> 标签：ios, uiwebview, formatting, uilabel

我需要在一个视图上显示一些格式化的数据。一些标题、链接和一些粗体和斜体文本。我想知道实现这一目标的最佳方法是什么。

我现在看到了两种可能性：在 HTML 中格式化并使用 UIWebView 或放置一些格式化的 UILabel。

有没有其他好的方法来完成这个要求？

我想知道你的学习可以使用其中一种或两种方式。

BR，〜米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:49:53.870

我喜欢使用 UIWebViews 来显示富文本。我在我的应用程序包中包含了一个 HTML 模板，其中包含 CSS，然后在其中包含占位符来保存文章的各个部分。

```
 <body>
   <h1>%@</h1> // Header
   <p>%@</p>   // Article content
 </body> 
```

您还可以使用属性标签，其中之一是 TTTAttributedLabel。 [https://github.com/mattt/TTTAttributedLabel/](https://github.com/mattt/TTTAttributedLabel/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:00:36.347

查看[DTCoreText](https://github.com/Cocoanetics/DTCoreText) - 使用 UIWebView 更好（恕我直言），你可以用它做一些非常漂亮的事情。本质上，它使用 NSAttributedStrings 作为文本表示，您可以手动构建它们，也可以让这个框架将 HTML 转换为那个。当用户点击图像或链接时，有很多选项可以获取回调。

# objective-c - 重复加载图像时 OS X ARC 内存增加

> ID：12056048
> 
> 赞同：1
> 
> 时间：2012-08-21T13:33:57.140
> 
> 标签：objective-c, macos, automatic-ref-counting, nsimage, nsautoreleasepool

在使用自动引用计数编写的应用程序中重复加载不同的 NSImage 时，我遇到了一个问题。似乎 ARC 没有正确释放图像对象，而是随着列表的迭代，内存使用量增加，直到迭代完成，此时内存被释放。

在某些情况下，我看到该过程使用了多达 2GB 的内存。在一个非常相似的问题[上对 SO 进行了很好的讨论](https://stackoverflow.com/questions/5047682/memory-continues-to-increase-when-loading-and-releasing-nsimage)，最终将进程放入 NSAutoReleasePool 并释放图像并耗尽池。如果我不使用 ARC，这也适用于我，但不可能在 ARC 中调用这些对象/方法。

有什么方法可以在 ARC 中进行这项工作吗？似乎 ARC 应该自己解决这个问题 - 这让我认为这些对象没有被释放的事实一定是 OS X 的一个错误。（我正在使用 XCode 4.2.1 运行 Lion）。

导致问题的代码类型如下所示：

```
+(BOOL)checkImage:(NSURL *)imageURL
{
    NSImage *img = [[NSImage alloc] initWithContentsOfURL:imageURL];
    if (!img)
         return NO;

    // Do some processing
    return YES;
} 
```

该方法在循环中被重复调用（例如，300 次）。分析应用程序，内存使用量继续增加，为每个图像分配 7.5MB。如果不使用 ARC，可以执行以下操作（如[本主题](https://stackoverflow.com/questions/5047682/memory-continues-to-increase-when-loading-and-releasing-nsimage)中所建议）：

```
+(BOOL)checkImage:(NSURL *)imageURL
{
    NSAutoReleasePool *apool = [[NSAutoReleasePool alloc] init];
    NSImage *img = [[NSImage alloc] initWithContentsOfURL:imageURL];
    if (!img)
         return NO;

    // Do some processing

    [img release];
    [apool drain];

    return YES;
} 
```

有谁知道如何强制 ARC 进行内存清理？目前，我已将该函数放在一个文件中，该文件使用 -fno-objc-arc 作为编译器标志传入。这行得通，但是让 ARC 为我做这件事会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:39:13.847

使用`@autoreleasepool`，像这样：

```
+(BOOL)checkImage:(NSURL *)imageURL
{
    @autoreleasepool { // << push a new pool on the autotrelease pool stack
      NSImage *img = [[NSImage alloc] initWithContentsOfURL:imageURL];
      if (!img) {
         return NO;
      }
      // Do some processing
    } // << pushed pool popped at scope exit
    return YES;
} 
```

# iphone - 有没有免费的软件可以在 cocos 2D 中创建纹理？

> ID：12056049
> 
> 赞同：1
> 
> 时间：2012-08-21T13:33:57.467
> 
> 标签：iphone, cocos2d-iphone, xcode4.3

我是 iphone 开发新手。我正在使用 cocos 2D 开发 2D 游戏。我正在检查是否有任何用于纹理创建的软件。当我搜索时，所有软件都是付费软件，如纹理打包器，zwoptex。我正在寻找可用于创建纹理的免费软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:06:18.170

TexturePacker、SpriteHelper 和 Zwoptex 可让您从单个图像创建 cocos2d 的纹理图集。它们的价格不到 20 美元。

TexturePacker[试用版](http://www.codeandweb.com/texturepacker/download)包括一个可以免费使用的 TexturePacker 命令行版本。它的功能比专业版少。

唯一免费的替代品是[Zwoptex (Flash)](http://zwopple.com/zwoptex/static/downloads/zwoptex-flashversion.zip)，它已经过时了，效率不高，只能创建 1024x1024 的图集，最重要的是它不能自动更新现有的纹理图集。

如果您正在寻找创建图像的免费程序，请查看[Seashore](http://seashore.sourceforge.net/The_Seashore_Project/About.html)和[Gimp](http://www.gimp.org)。

# html - 具有负边距的浮动元素会导致文本换行错误？

> ID：12056052
> 
> 赞同：15
> 
> 时间：2012-08-21T13:34:15.570
> 
> 标签：html, css, webkit, css-float, word-wrap

这个看起来像 webkit 中的文本换行错误，还是我错过了什么？

DOM：

```
<div>
  <p>
    <img src="http://static.jsbin.com/images/favicon.png">
    no sea takimata sanctus estestest Lorem ...
  </p>
</div> 
```

CSS：

```
div {
  width: 200px;
}

p {
 margin-right: 32px;
 padding-left: 30px;
}

img {
 float: left;
 margin-left: -30px;
} 
```

![错误的文字换行](../Images/a326555cf1214860fba650bf979ae928.png)

演示：http: [//jsbin.com/onoced/1/edit](http://jsbin.com/onoced/1/edit)

截图：

![铬 22.0.1223.0 (149385) 和铬 21.0.1180.79](../Images/4866ceb9a5346702f2c4d6d41caf77b6.png) ![火狐 14.0.1](../Images/df8ce58d2584745073fee308eeb1d292.png) ![歌剧 12.00](../Images/64f22a87fcc9ffb44472e24b85f1f3e0.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T08:56:18.023

正如您所指出的，我不会说这是一个错误：它在 WebKit 浏览器中的行为相同。否则，我们必须将浏览器引擎之间的每一个差异都归类为错误。

虽然有人已经向 Webkit.org 报告了类似的问题：[http ://bugs.webkit.org/show_bug.cgi?id=63074](http://bugs.webkit.org/show_bug.cgi?id=63074)

但这不仅限于段落，在列表和标题中也可以找到相同的行为。

参见示例：http: [//jsbin.com/uzozus/1/edit](http://jsbin.com/uzozus/1/edit)

**Webkit 浏览器中这种行为的解释是：**

> 如果对浮动应用负边距，则会创建导致内容重叠的空白。

资料来源：[http ://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)

让我们将此应用于您的示例：您的图像宽度为 16 像素 x 16 像素，因此为了使其与 30 像素的负边距相等，我们必须水平添加 14 像素

```
 img {
    float: left;
    margin-left: -30px;
    padding:5px 14px 0 0;
  } 
```

参见示例：http: [//jsbin.com/onoced/37/edit](http://jsbin.com/onoced/37/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T22:14:23.053

对我来说，它肯定看起来像一个错误。如果您正在寻找解决方法，您应该能够用跨度包装图像，并浮动包装器跨度而不是图像。

像这样：

```
<h2>Float Left</h2>
<div>
  <p>
    <span class="icon"><img src="http://static.jsbin.com/images/favicon.png"></span>
    no sea takimata <span class="hightlight">sanctus estestest</span> Lorem ipsum dolor sit amet.
  </p>
</div> 
```

使用这些 css 规则代替您的原始`img`规则：

```
.icon {
  float: left;
}
.icon > img {
  margin-left: -30px;
  background: pink;
  padding: 5px 0;
} 
```

这是修改后的示例：http: [//jsbin.com/onoced/12/edit](http://jsbin.com/onoced/12/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:29:54.733

请试试这个代码：我在 ie、mozilla、crome、opera 和 safari 上测试过。

在 Apple Safari 中也经过测试

[http://jsfiddle.net/CrxQA/6/](http://jsfiddle.net/CrxQA/6/)

在所有浏览器中，它的处理方式相同并被包裹

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T12:01:24.847

这是我的解决方案：

```
<style>
#main{
  width: 200px;
  height:200px;
}
#pic
{
    width:100px;/* or any size you like*/
    height:auto;
    float:left;
}
#txt
{
    width:100px;
    height:auto;
    float:left;
    overflow:hidden;
}
p 
{
 margin-right: 32px;
 padding-left: 30px;
}
</style> 
```

HTML：

```
<div id="main">
    <div id="pic">
        <img src="http://static.jsbin.com/images/favicon.png"/>
    </div>
    <div id="txt">
          <p>
            no sea takimata sanctus estestest Lorem ...
          </p>
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T15:39:09.633

我不确定这是一个错误，但它似乎仅限于 WebKit（也在 Safari 中测试过）。我过去遇到过影响父元素的负边距问题。

根据我的经验，负边距可能是不可预测的，如此处所示，通常在不同的浏览器中显示不同。有什么理由你不能使用这种类型的布局......

[http://jsbin.com/onoced/7/edit](http://jsbin.com/onoced/7/edit)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T15:52:42.030

看起来你发现了一个错误。

这类似于另一个关于负边距和文本换行的活动错误：问题[141887](http://code.google.com/p/chromium/issues/detail?id=141887)。很有可能它们都是相关的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-23T21:41:22.927

是的，它看起来像一个错误。您可能会考虑的另一个选项是在图像上设置`display`to`block`并添加 1 行的负下边距。

```
img {
  display: block;
  margin-left: -30px;
  margin-bottom: -1em;
} 
```

[http://jsbin.com/onoced/10/edit](http://jsbin.com/onoced/10/edit)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-27T07:34:22.817

我不知道你的目标是什么，但假设我不喜欢以那种方式抛出文本，我总是更喜欢把它放在标签中。所以对我来说最好的解决方案（绕过“错误”！？）是：

```
<div>
    <img>
    <p>text here </p>
</div> 
```

或者

```
<section>
    <div class="try">    
        <img>
        <p>text here </p>
    </div>
    <div class="try">    
        <img>
        <p>text here </p>
    </div>
    <div class="try">    
        <img>
        <p>text here </p>
    </div>
    .
    .
    .
</section> 
```

无论如何，您可以使用自动换行属性来调整您的 Ptag 列表。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-29T18:39:53.997

解决此问题的一种简单方法是仅将图像推到段落之前，然后删除负边距：

DOM：

```
<div>
  <img src="http://static.jsbin.com/images/favicon.png">
  <p>
    no sea takimata sanctus estestest Lorem ...
  </p>
</div> 
```

CSS：

```
div {
  width: 200px;
}

p {
 margin-right: 32px;
 padding-left: 30px;
}

img {
 float: left;
 /* margin-left: -30px; */
} 
```

这是[修改后的 JS Bin：](http://jsbin.com/onoced/39/edit)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-30T08:11:40.600

我不知道你的目标是什么，但是假设我不喜欢以那种方式抛出文本，我总是更喜欢将它放在标签中。所以对我来说最好的解决方案（绕过“错误”！？）是：

```
<div>
 <img>     <p>text here </p> </div> 
```

或者
`<section> <div class="try"> <img> <p>text here </p> </div> <div class="try"> <img> <p>text here </p> </div> <div class="try"> <img> <p>text here </p> </div> . . .`

无论如何，您可以使用自动换行属性来调整您的 Ptag 列表。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-30T15:12:29.747

正如 Jasper de Vries 所提到的，我会将 img 设置为 display:block。由于内联元素的边距具有不可预测的结果。我还将 p 标签设置为 display:block。

```
 <!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
<title>JS Bin</title>
<style type="text/css">
  div {
    border: 1px solid red;
    margin: 20px 0;
    width: 200px;
  }

  p {
    background: #EEE;
    border-right: 1px solid green;
    margin: 0;
    margin-right: 20px;
    padding-left: 30px;
    display:block
  }

  img {
    background: pink;
    float: left;
    display:block;
    margin-left: -30px;
    padding: 5px 0;
  }

  .nf {
    float: none;
  }

  .abs {
    position: absolute;
  }

  .hightlight {
    background: rgba(255,255,0,0.2);
  }
</style>
</head>
<body>
  <h2>No Float</h2>
   <div>
    <p>
      <img class="nf" src="http://static.jsbin.com/images/favicon.png" alt="This make it W3C compliant">
      no sea takimata <span class="hightlight">sanctus estestest</span> Lorem ipsum dolor sit amet.
    </p>
  </div>
  <h2>Float Left</h2>
   <div>
    <p>
      <img src="http://static.jsbin.com/images/favicon.png" alt="This make it W3C compliant">
      no sea takimata <span class="hightlight">sanctus estestest</span> Lorem ipsum dolor sit amet.
    </p>
  </div>

  <h2>Position Absolute</h2> 
  <div>
    <p>
      <img class="abs fn" src="http://static.jsbin.com/images/favicon.png" alt="This make it W3C compliant">
      no sea takimata <span class="hightlight">sanctus estestest</span> Lorem ipsum dolor sit amet.
    </p>
  </div>
</body>
</html> 
```

此代码已通过 W3C 最新标准的验证。将代码复制并粘贴到验证器中以进行确认。

[W3C 验证器（按输入）](http://jigsaw.w3.org/css-validator/#validate_by_input)

# android - Android：如何使 TextView 可编辑？

> ID：12056054
> 
> 赞同：44
> 
> 时间：2012-08-21T13:34:17.267
> 
> 标签：android

我怎样才能允许用户编辑一个`TextView`？当然，我可以`EditText`改用，但我不知道如何自定义它，而且我已经阅读了`TextView`可以编辑的 Android 文档。所以我尝试了这个：

```
<TextView android:id="@+id/tv"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:textSize="80sp"
          android:text="MyText"
          android:editable="true"
          android:singleLine="true"
          android:inputType="text"
          android:focusable="true"
          android:clickable="true"
          android:cursorVisible="true"/> 
```

但它看起来仍然很常见`TextView`。有谁知道我错过了什么？或者，可能是，如何定制`EditText`它看起来像`TextView`：没有边框和背景？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-21T13:43:24.220

我知道你不想使用 an`EditText`但很容易让它看起来像`TextView`.

```
<EditText
     android:id="@+id/Id"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:background="@android:color/transparent" >
 </EditText> 
```

您也可以使用`android:background="@null"`.

**编辑：**

的参数*确实*使它可编辑（有一些限制）`TextView`。`editable`

 *如果您设置`android:editable="true"`，您可以`TextView`通过方向键访问，或者您可以添加`android:focusableInTouchMode="true"`以能够获得对触摸的关注。

问题是您无法修改现有文本，也无法移动光标。您编写的文本会添加到现有文本之前。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-21T13:37:58.827

你可以伪造一个可编辑的 Textview。您只需要在触摸它时隐藏文本视图（使其“可点击”），用 EditText 替换它，并在编辑结束时再次显示它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-11T11:15:01.683

您可以通过添加这些行使您的 TextView 可编辑

```
tv.setFocusable(true);
tv.setEnabled(true);
tv.setClickable(true);
tv.setFocusableInTouchMode(true); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-17T19:29:33.817

TextView 定义了 EditText 上的所有功能，但没有对它们的内置支持。EditText 的一些主要区别：

a)**方法 getDefaultEditable() 返回 true**。这只是将这个子类定义为可编辑的标记。

b)**一种运动方法**。是一个控制光标行为的对象（位置、向后/向前移动 - 在某些语言中可能会发生变化等）。相反，TextView 只返回 null，因为无论如何都不是光标。

c)**方法 CharSequence getText()**。TextView 为此返回一个字符串。EditText 使用表示可变文本缓冲区的特定字符序列实现（可编辑）。

正因为如此，我们不能把 TextView 想象成一个受约束的 EditText。TextView 草图编辑界面，但不实现自身。

如果您需要一个有时可以关闭编辑的文本组件，您正在寻找 EditText 组件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-22T07:40:29.353

```
 tv.setCursorVisible(true);
    tv.setFocusableInTouchMode(true);
    tv.requestFocus();
    tv.setEnabled(true); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-14T17:38:04.687

我终于通过以编程方式创建**TextView**找到了解决您问题的方法

```
TextView textView = new TextView(context, null, android.R.attr.editTextStyle) {
    @Override
    public boolean getDefaultEditable() {
        return true;
    }
}; 
```

**或在 XML 中**

```
<TextView
android:id="@+id/textView_ID"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:style="@android:attr/editTextStyle"
android:editable="true"/> 
```

享受！*

# database-design - Neo4j 中的二分图实现

> ID：12056058
> 
> 赞同：5
> 
> 时间：2012-08-21T13:34:36.937
> 
> 标签：database-design, neo4j, graph-databases

我有一个用户和项目的二分图。我想在neo4j中实现这个。有什么方法可以区分节点吗？现在，唯一的区别在于属性值：

```
node A properties:
type=user, age=18, name=user123
node B properties:
type=item, price=123, name=item1234 
```

并在 cypher 中查询图形如下所示：

```
-get all users:
start n=node:node_auto_index('type:user') return n;
start n=node:node_auto_index('age:*') return n; 
```

1：虽然，因为每个用户都有年龄属性，所以不需要指定确切的节点类型，是吗？无论如何我必须指定它吗？

2：第二，由于类型属性是完全重复的，创建一个具有属性用户的特定节点和一个具有属性项目的特定节点，而不是将所有用户节点和所有项目节点与其适当的根节点相关联，这不是更容易吗?

3：在neo4j中，创建节点时，除了创建节点的参数类型之外，还有什么方法可以指定它的类型？（就像每组节点都保存在数据库的不同部分中，因此查询或获取特定组确实只需要指向该区域而不是遍历所有节点并检查类型参数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:49:42.560

好吧，没有黄金法则。如果你有很多一种类型的节点，你可能想要使用和索引，否则和类型节点也很好。取决于您的用例，因为非常大的超级节点正在减慢速度，并且被更好地视为索引。

如果您知道您在节点类型上有一个唯一属性，那么您当然可以从该属性推断它，并`type`在您的情况下跳过该属性。

# java - Liferay 中不同的“请求”隐式对象

> ID：12056066
> 
> 赞同：6
> 
> 时间：2012-08-21T13:34:50.387
> 
> 标签：java, servlets, attributes, request, liferay

从这些隐式对象中获取属性有什么区别：

```
renderRequest.getAttribute("myVar")
actionRequest.getAttribute("myVar")
request.getAttribute("myVar") 
```

为什么他们都被允许？
我的意思是您通常将属性存储在`actionRequest`或`renderRequest`对象中，但您可以在`request`隐式对象中获取它，为什么？
什么是正确的方法？

如何在视图时间内获得一个动作对象？
不违反action-render renderParams 传递机制吗？如果在 JSP 中尝试使用它们时
抛出 actionRequest/response，为什么它们可以作为隐式对象使用？`NullPointerException`

最后，在请求（`PortalUtil.getOriginalServletRequest`）中存储属性什么时候有用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T13:21:43.380

**访问请求属性的正确方法是什么？** 在 portlet 中，正确的方法是只与`renderRequest`检索参数值以及获取或设置请求属性（在 JSP 或 portlet 类中）进行交互。`renderResponse`可用于创建新的 Portlet URL。

**为什么你也可以从`request`对象中获取请求属性？** `request`是一个`HttpServletRequest`并且`renderRequest`是一个`PortletRequest`。然而，Liferay以这样`request`的方式实现为包装器`HttpServletRequest`，例如，对于访问请求属性，`PortletRequest`如果它在实际中找不到该属性，它将回退到`HttpServletRequest`.

**在查看时间`actionRequest`有什么用？`actionResponse`** 就像你说的，如果你遵循 MVC 的原则，你只会将 JSP 用于视图逻辑。如果您检查`DefineObjectsTag`来自 Liferay 的内容，您可以看到所有这些`xxxRequest`和`xxxResponse`对象仅在 portlet 处于正确的生命周期中时才被设置。因为，通常情况下，您在执行 JSP 逻辑时处于 RENDER_PHASE 中，`renderRequest`并且`renderResponse`不会为空。

**什么时候将属性存储在`request`?** `HttpServletRequest`如果您正在使用portlet ，那么 将属性存储在其中没有任何意义。另一方面，在 servlet（过滤器）中，您可以添加属性，然后可以使用`request.getAttribute("xxx")`.

# java - 在二叉树中寻找最小共同祖先

> ID：12056068
> 
> 赞同：2
> 
> 时间：2012-08-21T13:34:57.177
> 
> 标签：java, algorithm, tree, binary-tree

> **可能重复：**
> [如何在二叉树中找到两个节点的共同祖先？](https://stackoverflow.com/questions/1484473/how-can-i-find-the-common-ancestor-of-two-nodes-in-a-binary-tree)
> [二叉树的第一个共同祖先](https://stackoverflow.com/questions/10133332/first-common-ancestor-of-a-binary-tree)

我有一个如下的二叉树。我需要找到最小共同祖先（LCA）。例如，6 和 4 的 LCA 为 1，4 和 5 的 LCA 为 2。

```
 1
   / \
  2   3
 / \ / \
4  5 6  7 
```

谁能建议我应该如何处理和解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T14:13:11.037

从一个普通的深度优先搜索算法开始：

```
public Node find(Node node, int target) {
    if(node == null || node.value == target) {
        return node;
    }
    if(node.value > target) {
        return find(node.left, target);
    } else {
        return find(node.right, target);
    }
} 
```

现在，调整它以采用两个“目标”参数，target1 和 target2。

当对 target1 的搜索将您带到左侧，而对 target2 的搜索将您带到右侧时，您就找到了 LCA。

这假设两个目标都确实存在。如果您需要断言他们这样做，您需要在找到潜在的 LCA 后继续搜索。

```
public Node findLca(Node node, int t1, int t2) {
    if(node == null) {
        return null;
    }
    if(node.value > t2 && node.value > t1) {
        // both targets are left
        return findLca(node.left, t1, t2);
    } else if (node.value < t2 && node.value < t1) {
        // both targets are right
        return findLca(node.right, t1, t2);
    } else {
        // either we are diverging or both targets are equal
        // in both cases so we've found the LCA
        // check for actual existence of targets here, if you like
        return node;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:44:30.443

使用列表可以解决您的问题。

你应该做一个 getAncestorList()。它按其祖先返回列表顺序，例如。4 有祖先列表 [1,2] 和 7 有祖先列表 [1,3]

```
list1 = node1.getAncestorList()
list2 = node2.getAncestorList()

minlength = min(list1.size(), list2.size())
for (int i = 0; i < minlength; i++) {
    e1 = list1.getItemAt(i);
    e2 = list2.getItemAt(i);
    if (e1 == e2) ec = e1;
}
return ec; 
```

因为它们都有相同的根祖先。所以你不需要关心不同的深度。你总能找到前（n）个相同的祖先。祖先（n）是最近的共同祖先。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:54:44.103

这是我通常做的：

first calculate `f[i][j]`，表示`2^j`node 的第 -th 个父亲`i`。我们有

```
f[i][j] = f[f[i][j - 1]][j - 1] 
```

现在我们可以及时得到`j-th`节点 i 的父亲`log(n)`。

我们需要每个节点的深度，比如说`h[i]`

以上可以用简单`dfs()`的复杂度来完成`O(N*Log(N))`。

然后对于每个查询节点（i）和节点（j）的 LCA 的查询（i，j），想象有两只猴子在树上爬起来，试图到达同一个节点。

1.  首先使它们处于相同的高度，然后我们知道它们需要起床相同的高度才能相遇。
2.  虽然他们不在同一个节点，但尽可能地攀登。
3.  他们当前所在节点的父亲是 LCA。

你可以参考这个：

```
int query(int u, int v){
    if(h[u]>h[v])swap(u,v);
    v = getUp(v,h[v]-h[u]);
    for(int i=log(n);i>=0;i--){
        if(f[u][i]!=f[v][i]){
            u=f[u][i];
            v=f[v][i];
        }
    }
    while(u!=v){
        u=f[u][0];
        v=f[v][0];
    }
    return u;
} 
```

这里`getUp(i, j)`的意思是找到`j-th`节点i的父亲，正如我们上面提到的，可以是

```
int nt(int u,int x){
    for(int i=log(n);i>=0;i--){
        if((1<<i)<=x){
            u=f[u][i];
            x-=(1<<i);
        }
    }
    return u;
} 
```

所以对于非常查询，复杂度也是`O(N*Log(N))`。

# java - java - 为什么字符串连接与pip行在java中什么都不返回（空字符串）？

> ID：12056079
> 
> 赞同：0
> 
> 时间：2012-08-21T13:35:58.700
> 
> 标签：java, string, concatenation

**java - 为什么字符串连接与pip行在java中什么都不返回（空字符串）？**

```
String product="";
for(Tar t:tars){
    product.concat(t.product.concat("|"));
}
System.out.println(product); 
```

结果什么都没有（空字符串）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T13:37:44.080

`String#concat`返回一个连接的字符串，它不会修改它。字符串在 Java 中是不可变的。

所以...

```
product = product.concat(t.product.concat("|")); 
```

但是，我建议使用[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)，其中字符串复制在循环中发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:39:47.293

改为使用`StringBuilder`。

```
StringBuilder product=new StringBuilder();
for(Tar t:tars){
            product.append(t.product).append("|");
}
System.out.println(product.toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:40:24.517

如果集合相当大，我建议使用 a[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)来构建所需的字符串，而不是使用字符串连接。它将提高性能，尽管会稍微提高一点。

另请参阅[Java 中 toString() 中的 StringBuilder 与字符串连接](https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java)。

而且，直接从马嘴里，

[`String#concat`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#concat%28java.lang.String%29)：

> 将指定的字符串连接到此字符串的末尾。
> 
> 如果参数字符串的长度为`0`，则返回此`String`对象。否则，将`String`创建一个新对象，表示一个字符序列，该字符序列是由该`String`对象表示的字符序列和由参数字符串表示的字符序列的串联。

# sql-server - 非键列上的 SQL 删除查询

> ID：12056082
> 
> 赞同：0
> 
> 时间：2012-08-21T13:36:04.613
> 
> 标签：sql-server, vb.net

我是 SQL 查询语言的新手，我试图弄清楚如何使用 vb.net 删除具有非键 ID 列值的行（在 SQL DB 表中）。例如在下表 TEST 中：

```
ID     Name 
1      x 
2      y 
3      z 
```

我有一个用户选择名称值的 Windows 窗体，但是当我运行我的代码时它说

> *无法将 varchar "y" 转换为 int。*

这是我的代码尝试：

```
Dim sConnectionString As String

sConnectionString = "Data Source=" + serverName + ";Initial Catalog=" + dbName + ";Integrated Security=SSPI;"

Dim objConn As New SqlConnection(sConnectionString)
objConn.Open()

Dim cmd As New SqlCommand

cmd.Connection = objConn
cmd.CommandText = "DELETE FROM TEST WHERE Name = y"

cmd.ExecuteNonQuery() 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:38:52.363

如果您的 Name 列是 varchar 类型，则需要将值括在单引号中

```
cmd.CommandText = "DELETE FROM TEST WHERE Name = 'y'" 
```

您的问题的完整答案将是：

```
Dim sConnectionString As String 
sConnectionString = "Data Source=" + serverName + _
                     ";Initial Catalog=" + dbName + _ 
                     ";Integrated Security=SSPI;" 

Dim objConn As SqlConnection
Using(objConn = new SqlConnection(sConnectionString) 
    objConn.Open() 
    Dim cmd As New SqlCommand 
    cmd.Connection = objConn 
    cmd.CommandText = "DELETE FROM TEST WHERE Name = @name" 
    cmd.Parameters.AddWithValue("@name", txtName.Text)
    cmd.ExecuteNonQuery() 
End Using 
```

我假设您的用户在文本框中插入要删除的名称，然后您将此值传递给参数化查询。使用参数化查询将使您免于处理引用问题和 Sql Injection Attacks 的麻烦

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T13:39:58.980

如果你这样做，你将删除所有行`WHERE Name = y`，你可能不想这样做。

您应该在 UI 中使用名称，但将 ID 传递给 SQL。

如果您确实想删除具有该名称的所有行，请在 y 周围加上引号，因为没有它们，它正在寻找一个名为 y 的列：

`DELETE FROM TEST WHERE Name = 'y'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:02:59.950

cmd.CommandText = "从测试中删除名称 = y";

相反，您可以使用这个

cmd.CommandText = "从测试中删除 ID = " + idValue;

这里的“idValue”是你从用户那里得到的 ID

或其他明智的

cmd.CommandText = "从测试中删除名称 = 'y'";

# ruby-on-rails - Rails - 全局人性化属性

> ID：12056084
> 
> 赞同：0
> 
> 时间：2012-08-21T13:36:05.533
> 
> 标签：ruby-on-rails, model, human-readable

假设我有一个`User`带有`name`属性的模型。如果一个`@user`有名字`'CAIO'`，我可以调用 humanize 方法使它更好：

```
@user.name          =======> CAIO
@user.name.humanize =======> Caio 
```

但是我很懒，不想`humanize`每次都打电话：我想`@user.name`返回人性化的版本。

现在，我知道我可以使用辅助方法或模型来做到这一点

```
def h_name
  self.name.humanize
end 
```

但是这样做然后我必须更改`@user.name`我的应用程序中的所有内容`@user.h_name`......而且我很懒！:-)

有没有办法直接在模型中声明，而是使用`name`来调用呢？更好的是，它适用于`name`我所有的模型！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:57:10.967

检查[布](https://github.com/jcasimir/draper)带。这个 gem 提供了以面向对象的方式捆绑视图逻辑的装饰器（很像演示者）。此外，Ryan Bates[在 Draper 上制作了出色的 RailsCast](http://railscasts.com/episodes/286-draper)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:00:51.463

您可以在模型中添加 before_save。

before_save :h_name

def h_name self.name = self.name.humanize end

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:13:40.683

[这个类似的问题](https://stackoverflow.com/questions/373731/override-activerecord-attribute-methods)解释了几种方法来做到这一点。

一种可能性是：

```
class User < ActiveRecord::Base
    def name
        super().humanize
    end
end 
```

# powershell - 使用 wmi 通过 SCCM 2012 自动部署软件

> ID：12056088
> 
> 赞同：0
> 
> 时间：2012-08-21T13:36:11.257
> 
> 标签：powershell, deployment, wmi, sccm

我一直在寻找通过代码调用 WMI 类来使用 SCCM 2012 在客户端计算机中自动部署（安装）软件的选项。我找到了以下网址 [http://www.sepago.de/e/david/2012/03/17/microsoft-configuration-manager-2012-and-powershell-ae-create-deployments](http://www.sepago.de/e/david/2012/03/17/microsoft-configuration-manager-2012-and-powershell-ae-create-deployments)

但这只会宣传可安装的软件包。我想要一些可以让我实际安装软件的东西。希望我的查询很清楚。

问候蒂克卢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T00:38:33.510

```
Start-CMApplicationDeployment

Start-CMPackageDeployment

Start-CMTaskSequenceDeployment 
```

并使用`-DeployPurpose<DeployPurposeType>`参数将其设置为`Required`

你不能用`Start-CMSoftwareUpdateDeployment`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-25T07:46:44.540

我想推荐用于远程软件安装的[Total Software Deployment软件。](http://www.softinventive.com/total-software-deployment/)此工具是 SCCM 的新替代品。在当前版本中它的功能可能有点少，但我相信它很快就会发展成更大的东西。

# glsl - 变暗四边形以模拟 AO

> ID：12056092
> 
> 赞同：2
> 
> 时间：2012-08-21T13:36:15.457
> 
> 标签：glsl

我想根据我在地图上计算的遮挡因子使颜色更深，我需要它来模拟 AO，我考虑将面部与指定的深色纹理混合作为可能的解决方案之一，我想知道是否有是我可以在不使用纹理的情况下做的任何事情。实际上引擎类似于我的世界，我根据我正在考虑的面部周围的体素计算遮挡因子。我不是在寻找一个复杂的方法，因为它只是第一个实现。干杯

我现在需要一个非常简单的效果，ssao 是不可能的，原因有很多。我认为唯一的解决方案是给顶点上色，但我怎样才能让脸看起来不完全是黑色的呢？

您如何看待将纹理与四边形颜色混合的第二种解决方案？在“图形设置 1”= 顶点着色和“图形设置 2”= 纹理混合。

# c# - 绘制位图 C#

> ID：12056093
> 
> 赞同：2
> 
> 时间：2012-08-21T13:36:15.503
> 
> 标签：c#, winforms

我正在尝试使用位图类在屏幕上绘制图像，但出现了问题。

这是我的代码：

```
Bitmap bm = new Bitmap(@"C:\Alan\University\111.jpg");
Graphics g = Graphics.FromImage(bm);
g.DrawImage(bm,60,60); 
```

运行代码后，我的屏幕上没有任何附加内容。我的代码有什么问题？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T13:39:34.563

您正在从`Image`自身制作图形对象，然后尝试将图像绘制到自身上。您需要将图像绘制到另一个`Graphics`对象中。通常代表您希望显示图像的屏幕或组件。

您没有指定尝试在哪种上下文中绘制图像。如何获取`Graphics`对象取决于框架（WPF、WinForms 等）。对于一个典型的 winforms 应用程序，您希望`OnPaint`在窗口中覆盖，如下所示：

```
protected override void OnPaint(PaintEventArgs e)
{
   Bitmap bm = new Bitmap(@"C:\Alan\University\111.jpg");

   // Draw using this   
   e.Graphics.DrawImage(bm,60,60);

   base.OnPaint(e);
} 
```

当然，您可能希望在某些启动方法中只加载一次图像，而不是每次绘制表单时。

# couchdb - 显示所有 1M 并在 couchdb 中排序两次？

> ID：12056095
> 
> 赞同：0
> 
> 时间：2012-08-21T13:36:28.533
> 
> 标签：couchdb

couchdb 的新手，我想与排序建立一对多的关系

类别 -> 文档

想对类别进行排序并对每个类别中的文档进行排序，并希望将结果作为数组获得。

我可以按类别或按文档排序，但不能同时按两者。

我想得到这样的查询结果：

```
[{  name: 'category1',
    position: 1,
    type: 'category',
    documents: [{ name: ..., type: ..., position: 1 },
                { name: ..., type: ..., position: 2 },
                { name: ..., type: ..., position: 3 }
 }
 {  name: 'category2',
    position: 2,
    type: 'category',
    documents: [{ name: ..., type ..position: 1 },
            { name: ..., position: 2 },
            { name: ..., position: 3 }]
 }] 
```

我像这样设置视图设计和地图功能（这是正确的方法吗？）：

```
function(category) { 
  if (type == 'category') {
      for (var d in category.documents) {
          emit([category.position, category.documents[d].position??? ], {_id: category.documents[d], category: category })
      }
  } 
```

问题是...

1- category.documents[d].position 还不会“存在”，所以我不能简单地这样做。

2-查询结果的格式不是我想要的。它将是文档行，而不是具有文档对象数组的类别行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:20:52.290

CouchDB 中没有关系。正确的方法是直接在文档上设置文档所属的类别。

```
{
    _id: ...,
    name: ...,
    type: ...,
    category: 1,
    position: 1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:46:05.340

正如@OctavianDamiean 所指出的，您应该在文档中添加一个类别字段。然后 map 函数变成这样：

```
function(doc) {
  if (doc.type === 'Document') {
    emit([doc.category, doc.position], 1);
  }
} 
```

用 查询`include_docs=true`，你会得到：

```
[ { "key": ["category1", 1], "doc": { "name": "doc1.1", "type": "Document", "position": 1 } },
  { "key": ["category1", 2], "doc": { "name": "doc1.2", "type": "Document", "position": 2 } },
  { "key": ["category2", 1], "doc": { "name": "doc2.1", "type": "Document", "position": 1 } },
  { "key": ["category2", 2], "doc": { "name": "doc2.2", "type": "Document", "position": 2 } },
  ...
] 
```

# android - Nexus 7 平板电脑上未显示 Toast 通知

> ID：12056097
> 
> 赞同：4
> 
> 时间：2012-08-21T13:36:32.070
> 
> 标签：android, notifications, tablet, toast

我正在尝试让`Toast`通知显示在我的 Nexus 7 平板电脑上 - 但是，它们不会显示。`Toast`我在我的大部分应用程序中都使用自定义消息，但甚至像这样简单：

```
Toast.makeText(MyActivity.this, "generic toast message", Toast.LENGTH_LONG).show(); 
```

不管用。

我已经在其他设备上测试过这个应用程序，包括 Nexus 1 手机 (2.3)、MyTouch (2.2) 和 Acer Iconia 平板电脑 (4.0)。Toast 消息出现在除此 Nexus 7 平板电脑 (4.1) 之外的所有其他设备上。

是否有允许`Toast`在应用程序中禁用通知的用户设置？还是在`Toast`4.1 之后对消息的处理方式有所不同？这些是我目前唯一的想法。我已经在 Google 上搜索了这个问题，但没有得到关于类似问题的单个链接。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T13:51:29.643

也许[这篇文章](http://code.google.com/p/android/issues/detail?id=35013)可以帮助你。

听起来像一个错误。

* * *

**编辑**：如果链接失效，本质上是：

转到设置 -> 应用程序 -> My_App 并在其下方找到一个标有“显示通知”的小框。如果未选中，请检查它。

# jsf - javax.el.E LException: /converter.xhtml @44,53 value="#{converterBean.toList}": 在类型 com.primesystems.beans.ConverterBean 上读取“toList”时出错

> ID：12056098
> 
> 赞同：0
> 
> 时间：2012-08-21T13:36:33.910
> 
> 标签：jsf

我在 Tomcat 中运行 JSF 应用程序。它有 3 个由`render`属性链接的列表。

```
<h:selectOneMenu id="selectedCategory" value="#{converterBean.selectedCategory}">
    <f:ajax execute="selectedCategory" render="selectedFrom"/>
    <f:selectItems value="#{converterBean.categories}"/>
</h:selectOneMenu>
<h:selectOneListbox id="selectedFrom" value="#{converterBean.selectedFrom}" size="5">
    <f:selectItems value="#{converterBean.fromList}"/>
    <f:ajax execute="selectedCategory selectedFrom" render="selectedTo"/>
</h:selectOneListbox>
<h:selectOneListbox id="selectedTo" value="#{converterBean.selectedTo}" size="5">
    <f:selectItems value="#{converterBean.toList}"/>
</h:selectOneListbox> 
```

当我点击`selectedCategory`它呈现`selectedFrom`罚款。当我在其中选择项目时`selectedFrom`，会出现如下错误。

> 严重：javax.el.E​​LException：/converter.xhtml @44,53 value="#{converterBean.toList}"：在 com.primesystems.beans.ConverterBean 类型上读取“toList”时出错

我想获得更多的堆栈跟踪，但在调试器中运行，为与 tomcat 相关的附加程序添加 log4j 并用 try/catch 包围我的 bean 方法是不好的。

我试过 mojarra 版本 2.1.7 和 2.2.0-m05 都有相同的行为。

**我的代码存在问题，并且在 converterBean.getToList 方法中捕获异常我能够捕获堆栈跟踪。所以我遇到的问题得到了解决。**

我想在下面发表评论。下面的定位器被注入到转换器 bean 中，并且由于 Conveter 类不可序列化，我添加了如下逻辑，因为我有时看到与序列化相关的异常。

```
@ManagedBean(name="serviceLocater")
@ApplicationScoped
public class LocalServiceLocater implements ServiceLocater, Serializable {
transient private Converter converter;
public LocalServiceLocater() {
    converter = new Converter();
}
public Converter getConverter() {
    // TODO Auto-generated method stub
    return converter;
}

private void readObject(java.io.ObjectInputStream in)
        throws IOException, ClassNotFoundException {
        in.defaultReadObject();
        converter = new Converter();
}

} 
```

我还想再添加一个问题。当我选择*category*时，*from list*和*to list*都需要更新。目前我已经对它们进行了编码，希望它们能够级联，但它只*从 list*更新。我曾尝试*从**类别 ajax 渲染属性*中进行渲染和*列出*， 但随后它发送*类别，旧的，*而我希望它改为发出两个请求。首先*从列表*中填写*类别*。*带有类别*的第二个请求，从填充*到列表*。

# android - 将 Facebook 单点登录 (SSO) 添加到 Android AIR 应用程序

> ID：12056099
> 
> 赞同：1
> 
> 时间：2012-08-21T13:36:37.720
> 
> 标签：android, facebook, apache-flex, actionscript, single-sign-on

简而言之，我希望找到本教程：[https](https://developers.facebook.com/docs/mobile/android/build/#enablesso)
://developers.facebook.com/docs/mobile/android/build/#enablesso 但对于在 Flash Builder 中使用 facebook-actionscript-api 构建的 Flex 应用程序，特别是 facebookMobile图书馆。

我正在构建一个简单的 Android 应用程序，它将在列表中显示用户的朋友。我不希望用户被提示输入他们的用户名和密码，我宁愿它使用设备的 Facebook 应用程序进行身份验证（单点登录）。

到目前为止，我已经设法使用 keytool 从我的 .p12 文件中获取 Android Key Hash，并将其添加到 facebook 开发者网站上的应用程序中（以启用 SSO）。

先谢谢了！
本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T14:50:16.690

我找到了一个免费的 sso 本机扩展，适用于 android @ [http://afterisk.wordpress.com/2013/02/26/first-free-facebook-single-sign-on-sso-adobe-air-native-extension -for-android](http://afterisk.wordpress.com/2013/02/26/first-free-facebook-single-sign-on-sso-adobe-air-native-extension-for-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:02:45.407

我发现最好的是这个（不是免费的）包： http: [//www.adobe.com/devnet/air/articles/goviral-ane-android.html](http://www.adobe.com/devnet/air/articles/goviral-ane-android.html)

现在试试看。

# php - 在下拉菜单中打印 JSON 字符串

> ID：12056101
> 
> 赞同：0
> 
> 时间：2012-08-21T13:36:39.573
> 
> 标签：php, json

我在将 JSON 字符串的值生成到下拉菜单中时遇到问题。我有一个 JSON API

```
http://service.proventustechnologies.com/api/json?username=demo&token=4ce26206-025d-11dc-8314-0800200c9a66&method=getattributevalues&dimensionId=10 
```

当您单击它时，您将看到许多这样的值。

```
{
"response": {
    "id": 10,
    "values": [
        {
            "id": 258,
            "value": "Cameras"
        },
        {
            "id": 2581,
            "value": "GPS Navigation"
        },
        {
            "id": 259,
            "value": "MP3 Players"
        },
        {
            "id": 260,
            "value": "Cell Phone/PDA"
        },
        {
            "id": 6377,
            "value": "Digital Photo Frame"
        },
        {
            "id": 110,
            "value": "Motherboard"
        },
        {
            "id": 108,
            "value": "Desktop/Server"
        },
        {
            "id": 109,
            "value": "Notebook"
        },
        {
            "id": 10738,
            "value": "E-Book Reader"
        }
    ],
    "name": "System Type"
},
"status": "ok" 
```

}

我想在下拉菜单中打印所有值，例如相机、GPS 导航。感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:39:56.780

用于[`json_decode`](http://php.net/manual/en/function.json-decode.php)将 json 编码的字符串转换为 PHP 变量：

```
<?php
  $json = file_get_contents($your_url);

  $obj = json_decode($json);
  echo $obj->response->id; // prints 10 (based on your sample code)
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:19:49.053

hridaynehu，使用您的 json 数组值填充选择框非常容易。按照下面的代码行。

```
<?php
     $url = 'http://service.proventustechnologies.com/api/json?username=demo&token=4ce26206-025d-11dc-8314-0800200c9a66&method=getattributevalues&dimensionId=10';
    $content = file_get_contents($url);
    $jsonArray = json_decode($content, true);?> 

<select name="json_populate"><?php 
    foreach($jsonArray->response->values as $jsonValue) { ?>
        <option value="<?php echo $jsonValue->id; ?>"><?php echo $jsonValue->value; ?></option>
    <?php } ?>
</select> 
```

如果对您有帮助，请将其标记为答案。因为它也可以帮助其他人。

感谢和问候， Sanjoy Dey

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:44:25.097

我无法真正了解您的知识水平，但是您应该将数据加载到 html select 元素中，例如：

```
<?php
    echo '<select>';

    $jsonData = file_get_contents($url); 
    $jsonDataObject = json_decode($jsonData);

    foreach($jsonDataObject->response->values as $option){
        echo '<option value=' . $option->id . '>' . $option->value . '</option>';
    }

    echo '</select>';
?> 
```

# javascript - 解释用于检测 vml 的 javascript 函数

> ID：12056102
> 
> 赞同：0
> 
> 时间：2012-08-21T13:36:40.913
> 
> 标签：javascript, internet-explorer-8, vml

这是一个用于检测浏览器中的 VML 支持的函数。它是 html 组件文件的一部分，用于为旧版本的 IE 提供边框半径和阴影功能。我想向我解释一下它的分步逻辑：

```
function supportsVml() {
    if (typeof supportsVml.supported == "undefined"){
        var a = document.body.appendChild(document.createElement('div'));
        a.innerHTML = '<v:shape id="vml_flag1" adj="1" />';
        var b = a.firstChild;
        b.style.behavior = "url(#default#VML)";
        supportsVml.supported = b ? typeof b.adj == "object": true;
        a.parentNode.removeChild(a);
    }

    return supportsVml.supported
} 
```

我感到困惑的地方：

1.  什么是 supportVml.supported？这是一个变量吗，我没有看到它在文件中的其他任何地方声明...
2.  什么是 url(#default#VML) 行为？
3.  supportsVml.supported 根据条件重新分配了一个新值，但我不知道是什么或为什么......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:41:21.167

`supportsVml.supported`是函数的一个属性，仅用作结果的缓存。

如果是`undefined`（在第一次调用之前），则运行检测算法。之后只使用缓存的值并省略检测。

实际的检测算法会尝试添加一个默认的 VML 元素并检查它是否被正确插入。如果是这样，则支持 VML。

**编辑**

可以将`behavior`脚本附加到元素的 CSS（[链接](http://www.css3.com/css-behavior/)）。据我所知，这是旧版 IE 独有的。

```
supportsVml.supported = b ? typeof b.adj == "object": true; 
```

此行使用三元运算符。可以改写如下：

```
if ( b ) {
  if ( b.adj == 'object' ) {
    supportsVml.supported = true;
  } else { 
    supportsVml.supported = false;
  }
} else {
  supportsVml.supported = true;
} 
```

# sql-server - 根据日期从主表中选择最近的子记录

> ID：12056107
> 
> 赞同：0
> 
> 时间：2012-08-21T13:37:02.070
> 
> 标签：sql-server, tsql

我正在尝试将数据合并到两个表中。第一个（子）表包含一些付款信息，包括生效日期、员工编号和付款值。

```
emp_no  date_earn   Amount
456789  03/10/2009  20
456789  18/03/2010  30
456789  17/03/2011  12
456789  16/03/2012  34 
```

另一个（主）表包含员工编号、生效日期和职位。

```
emp_no  effective_date  job_title 
456789  01/01/2009      Tester
456789  20/05/2010      Manager
456789  01/04/2011      Snr Manager 
```

我需要报告薪酬信息表并显示在薪酬信息生效日期时的职位名称：

```
emp_no  date_earn   Amount  job_title 
456789  03/10/2009  20      Tester
456789  18/03/2010  30      Manager
456789  17/03/2011  12      Manager
456789  16/03/2012  34      Snr Manager 
```

我尝试过使用相关查询，例如：

```
select p.emp_no, p.date_earn, p.amount,
(select top 1 e.job_title from emp_hist e
where e.emp_no = p.emp_no
and e.effective_date <= p.date_earn ) as JOB_TITLE
from 
pay p where p.emp_no = 456789 
```

但根据上面的例子，我会给我所有行的工作测试员。如果有人可以提供帮助，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:01:21.213

您需要在 emp_hist 中的 SELECT 中使用 ORDER BY - 否则第一条记录“Tester”始终满足您的条件并首先返回。

```
where e.emp_no = p.emp_no and e.effective_date <= p.date_earn order by e.effective_date desc 
```

但是，在这种情况下，我相信 CROSS APPLY 查询可以成为您的朋友。一旦你掌握了它的用法，你就会发现自己一次又一次地使用它。一个好的经验法则是，如果您正在考虑在内联视图中使用 SELECT TOP * - 请停止并改用 APPLY 查询。恕我直言，它使您的 SQL 更易于阅读和理解，我敢说它使您的查询更有效。

您可以使用 CROSS APPLY 重新编写查询，如下所示：

```
SELECT
   P.emp_no
  ,P.date_earn
  ,P.amount
  ,T.job_title
FROM
  pay P
  CROSS APPLY (
    SELECT TOP 1
      E.job_title
    FROM
      emp_hist E
    WHERE
      E.emp_no = P.emp_no
      AND E.effective_date <= P.date_earn
    ORDER BY
      E.effective_date DESC
  ) T
WHERE
  P.emp_no = 456789 
```

我没有运行它，但我相信它应该可以工作。

# css - 导航栏中的 twitter bootstrap 按钮未正确垂直对齐

> ID：12056111
> 
> 赞同：4
> 
> 时间：2012-08-21T13:37:07.470
> 
> 标签：css, twitter-bootstrap, vertical-alignment, navbar

`<button class='btn' />`使用时在导航栏中定位元素时遇到问题`.pull-left`。看到这个jsFiddle：http: [//jsfiddle.net/6e49G/](http://jsfiddle.net/6e49G/)

按钮是垂直偏移的，看起来不太好： ![](../Images/68699fd862085d9f5a8393c8f314b334.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T20:49:17.927

Just in case anyone stumbles across this like I did, this issue seems to be fixed in version 2.3.0 of Bootstrap. I was running 2.2.2 previously and had this exact problem (input-prepend or input-append), but only with buttons, not icons. As a last resort I thought I'd check for an update of Bootstrap and thankfully that did the trick.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T13:56:52.480

您还可以将按钮从输入前置 div 中取出，然后将 form-inline 类应用于表单，它应该为您提供所需的内容。见[http://jsfiddle.net/6e49G/25/](http://jsfiddle.net/6e49G/25/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T13:46:12.417

看起来引导程序没有设计为在导航栏中附加按钮。我用自定义样式解决了它。您的最高利润来自`.navbar`样式。

```
.navbar-form .input-prepend .btn { margin-top: 0px; } ​ 
```

代码：http: [//jsfiddle.net/6e49G/15/](http://jsfiddle.net/6e49G/15/)

# sql - 按最佳匹配排序，然后按名称排序

> ID：12056114
> 
> 赞同：1
> 
> 时间：2012-08-21T13:37:19.963
> 
> 标签：sql, db2, db2-luw

我想要一个 SQL`like`查询，并让结果以输入参数开头，然后将结果的其余部分按字母顺序排序。

所以如果我有

```
Foobbb
aaafoo
Fooaaa
bFoob
cccfooccc 
```

我搜索 foo 我希望它排序为：

```
Fooaaa
Foobbb
aaafoo
bFoob
cccfooccc 
```

所以我最相关的项目是第一位的。想要一种清晰易懂且性能良好的方法来做到这一点？我可以创建一个临时表，但认为开销太大。

我试过了

```
DECLARE cemployer CURSOR
WITH RETURN
FOR SELECT employer
    FROM   ((SELECT employer_name,  1 AS grp
             FROM   employer e
             WHERE  Upper(employer_name) LIKE Upper(i_employer|| '%'))
            UNION
            (SELECT employer_name, 2   AS grp
             FROM   employer e
             WHERE  Upper(employer_name) LIKE Upper('%'||i_employer|| '%')))
    ORDER  BY grp,
              employer;

OPEN cemployer; 
```

但是，当我这样做时，我得到

```
Fooaaa
Foobbb 
```

在结果集的底部再次重复。DB2 不允许我对外部查询进行区分。我知道我可以通过执行 substring 或 locate 或其他字符串函数以多种方式解决此问题，但想知道最**优雅**的方法来执行此操作并确保不返回重复项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T13:45:11.563

一般方法

```
ORDER BY CASE WHEN col like 'foo%' THEN 1 ELSE 2 END,col 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:47:05.680

问题是 emplyer 匹配两个组，而您只想要第一个匹配。解决此问题的一种方法是通过以下方式将查询更改为组：

```
SELECT employer
FROM   ((SELECT employer_name,  1 AS grp
         FROM   employer e
         WHERE  Upper(employer_name) LIKE Upper(i_employer|| '%')
        )  UNION
        (SELECT employer_name, 2   AS grp
         FROM   employer e
         WHERE  Upper(employer_name) LIKE Upper('%'||i_employer|| '%')
        )
       )
group by employer
ORDER  BY min(grp), employer; 
```

这是一种非常简单的修复方法，无需摆弄定义每个组的逻辑。

# python - 禁用 matplotlib pyplot 的输出

> ID：12056115
> 
> 赞同：49
> 
> 时间：2012-08-21T13:37:19.730
> 
> 标签：python, matplotlib

我有一个形状数组`A`（1000、2000）。我使用 matplotlib.pyplot 绘制数组，这意味着 1000 条曲线，使用

```
import matplotlib.pyplot as plt
plt(A) 
```

这个数字很好，但有一千行：

```
<matplotlib.lines.Line2D at 0xXXXXXXXX> 
```

我可以禁用这个输出吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-21T13:39:55.530

此输出是`plt`函数返回的内容（我假设您打算在这里编写`plt.plot(A)`）。要禁止此输出，请为返回对象指定一个名称：

```
_ = plt.plot(A) 
```

`_`通常用于表示以后不会使用的临时对象。请注意，您看到的此输出只会出现在解释器中，而不是当您从解释器外部运行脚本时。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-08-21T16:16:20.230

您还可以通过`;`在末尾使用来抑制输出（假设您在某种交互式环境中执行此操作）

```
 plot(A); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-09-20T00:36:41.563

`plt.show()`

这样就不需要创建不必要的变量。

例如：

```
import matplotlib.pyplot as plt

plt.plot(A)
plt.show() 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-07-08T09:04:51.373

在 plot 命令后使用分号

例如：plt.imshow(image,cmap);

将显示图表并停止详细

# php - Prestashop 列出 2 中的产品 1

> ID：12056119
> 
> 赞同：0
> 
> 时间：2012-08-21T13:37:37.013
> 
> 标签：php, smarty, prestashop

我有一个列出 4 的滑块

*   公关幻灯片。

    我想添加一个额外的行，以便显示 2x4 产品。

    为了实现它，我需要列出 2 个产品公关。

    *   我真的尝试过修复它，但我的代码和我如何计算我的产品有问题。

    请看一下：`{if isset($products)} {include file="$tpl_dir./breadcrumb.tpl"} {assign var=count value=0}

    ```
     {foreach from=$products item=product name=products}

            {if $count == 0}
                <li style="position: relative;">
            {/if}
                <div id="ProductCon">
                    <div class="prodimage"><a href="{$product.link|escape:'htmlall':'UTF-8'}" class="product_img_link" title="{$product.name|escape:'htmlall':'UTF-8'}"><img src="{$link->getImageLink($product.link_rewrite, $product.id_image, 'home')}" alt="{$product.legend|escape:'htmlall':'UTF-8'}" {if isset($homeSize)} width="{$homeSize.width}" height="{$homeSize.height}"{/if} /></a></div>
                    <h3><a href="{$product.link|escape:'htmlall':'UTF-8'}" title="{$product.name|escape:'htmlall':'UTF-8'}">{$product.name|truncate:35:'...'|escape:'htmlall':'UTF-8'}</a></h3>
                </div>
                {if $count == 1}
                    </li>
                {/if}
                {function name='counter2'}
                    {$count+1}
                {/function}
        {/foreach}

        </ul>
    </div>
    <!-` 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:25:06.010

Smarty 不是（完整的）编程语言，它是一个模板引擎。有些事情是故意不允许的。

您应该使用作为smarty 提供的道具的[计数器](http://www.smarty.net/docsv2/en/language.function.counter.tpl)，以便您不必使用编程逻辑来实现您的目标。

对于分配，您需要使用特殊的 Smarty 功能 smarty [assign](http://www.smarty.net/docs/en/language.function.assign.tpl)。

## 对于 smarty 计数器，这应该有效：

```
{counter start=0 skip=1 assign="count"}

{foreach from=$products item=product name=products}
    {if $count == 0}
        <li style="position: relative;">
     {/if}
    <div id="ProductCon">
        <div class="prodimage">
            <a href="{$product.link|escape:'htmlall':'UTF-8'}" class="product_img_link" title="{$product.name|escape:'htmlall':'UTF-8'}">
                <img src="{$link->getImageLink($product.link_rewrite, $product.id_image, 'home')}" alt="{$product.legend|escape:'htmlall':'UTF-8'}" {if isset($homeSize)} width="{$homeSize.width}" height="{$homeSize.height}"{/if} />
            </a>
        </div>
        <h3>
            <a href="{$product.link|escape:'htmlall':'UTF-8'}" title="{$product.name|escape:'htmlall':'UTF-8'}">{$product.name|truncate:35:'...'|escape:'htmlall':'UTF-8'}</a>
        </h3>
    </div>
    {if $count == 1}
        </li>
    {/if}
    {counter}
{/foreach} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:27:37.827

您可能可以检查 foreach 循环中的索引值。这是一个如何实现它的示例。这还会检查列表是否包含奇数个产品并关闭最后一个产品的 li 标签。希望这可以帮助

```
<ul>
    {foreach from=$products item=product name=products}
        {if $smarty.foreach.products.first == true || $smarty.foreach.products.index % 2 == 0}
            <li style="position: relative;">
        {/if}
            <div id="ProductCon">
                <div class="prodimage"><a href="{$product.link|escape:'htmlall':'UTF-8'}" class="product_img_link" title="{$product.name|escape:'htmlall':'UTF-8'}"><img src="{$link->getImageLink($product.link_rewrite, $product.id_image, 'home')}" alt="{$product.legend|escape:'htmlall':'UTF-8'}" {if isset($homeSize)} width="{$homeSize.width}" height="{$homeSize.height}"{/if} /></a></div>
                <h3><a href="{$product.link|escape:'htmlall':'UTF-8'}" title="{$product.name|escape:'htmlall':'UTF-8'}">{$product.name|truncate:35:'...'|escape:'htmlall':'UTF-8'}</a></h3>
            </div>
        {if $smarty.foreach.products.index % 2 == 1 || $smarty.foreach.products.last == true}
            </li>
        {/if}
    {/foreach}
</ul> 
```

# php - 在按钮单击时运行 PHP 代码

> ID：12056120
> 
> 赞同：2
> 
> 时间：2012-08-21T13:37:42.650
> 
> 标签：php, html

当用户单击按钮时，运行 PHP 脚本的最佳方式是什么？它不会向用户发送任何内容！（PHP 脚本只发送一个 PostgreSQL 查询。）

我只找到了返回数据的方法。我只想运行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:39:07.980

您正在寻找[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)（异步 javascript）。只需让一个javascript函数调用目标脚本，要么不返回任何内容，要么不对返回值做任何事情。或者，您可以简单地将表单提交到页面上的隐藏 iframe。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T14:05:28.960

这是我能想到的最好的。希望这是你要找的。

```
 /* Function that we create to handle backwards compatiblity to browsers.
    What it does is to try diffrent types of XMLHttpRequests. */
            function getXMLHttp() {
                var xmlHttp;
                try {
                    //Firefox, Opera, Safari, Chrome, IE7+
                    xmlHttp = new XMLHttpRequest();
                } catch (e) {
                    try {
                        //Internet Explorer 6
                        xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
                    } catch (e) {
                        try {
                            //Internet Explorer 5
                            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
                        } catch (e) {
                            return false;
                        }
                    }
                }
                return xmlHttp;
            }
            // Here, we send the request
            function send() {
                /* We say the variable xmlHttp is the function 
                where we try the diffrent XMLHttpRequests*/
                var xmlHttp = getXMLHttp();
                    // We open your PHP file...
                xmlHttp.open("POST", "yourphpfile.php", true);
                    // ...and send it to the server
                xmlHttp.send();
            } 
```

**简短** 说明 由于您没有向用户返回任何内容，因此您使用 POST 而不是 GET。它向服务器发送对文件的请求。正如您在问题中所说，某些内容已发送到 PostgreSQL 服务器。但是，该 PHP 脚本在支持 PHP 的托管服务器上运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T13:42:53.203

最基本的方法是使用 html 表单。

```
<form action="somePHPfile.php" method="post">
  <input type="button" value="Run somePHPfile.php" />
</form> 
```

您也可以按照 Ben D 的建议进行操作，但这不是最基本的方法。使用 jquery：

```
$("#YOURbuttonID").click(function(){
  $.post("yourPHPfile.php", function(){
    alert("Success!");
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:41:59.840

您将需要使用 Ajax，然后您可以更新 div 等，以便用户知道查询是否正确执行。

# ios - NSDictionary 为 NSNumber 返回 nil

> ID：12056122
> 
> 赞同：0
> 
> 时间：2012-08-21T13:37:50.917
> 
> 标签：ios, nsdictionary, gamekit, nsnumber

我正在使用 gamekit 在 nsdictionary 中发送一个 nsnumber。当我 NSlog 字典时，数字没问题，但是当我尝试获取 NSNumber 时，它总是（空）。

```
NSMutableDictionary *dict = [NSKeyedUnarchiver  unarchiveObjectWithData:data];
NSNumber *receivedHostNum = (NSNumber*)[dict objectForKey:@"h"];
if (gameStarted == NO){

    NSLog(@"%@",dict);
    NSLog(@"My Num:%i",[hostNum intValue]);
    NSLog(@"%@",receivedHostNum);
    NSLog(@"Recieved Num:%i",[receivedHostNum intValue]);

    if ([hostNum intValue]>[receivedHostNum intValue])
        NSLog(@"You are host");
    else
        NSLog(@"You are client");
} 
```

这是日志：

```
2012-08-21 14:34:06.067 PeerPicker[6667:c07] {
    "-589267889" = h;
}
2012-08-21 14:34:06.068 PeerPicker[6667:c07] My Num:-2142897577
2012-08-21 14:34:06.068 PeerPicker[6667:c07] (null)
2012-08-21 14:34:06.069 PeerPicker[6667:c07] Recieved Num:0
2012-08-21 14:34:06.069 PeerPicker[6667:c07] You are client 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:44:53.900

我认为你把你的号码放在你的字典里是错误的。您的日志显示：

```
2012-08-21 14:34:06.067 PeerPicker[6667:c07] {
    "-589267889" = h;
} 
```

它应该是：

```
2012-08-21 14:34:06.067 PeerPicker[6667:c07] {
    "h" = -589267889;
} 
```

在构造数组或存储数组时，您已经反转了键和对象。

# forms - Seblod 的通用形式（joomla 2.5）

> ID：12056123
> 
> 赞同：0
> 
> 时间：2012-08-21T13:37:53.803
> 
> 标签：forms, button, joomla2.5

我是一名开发人员，他接管了一个使用 SEBLOD 创建的 Joomla 网站。该网站是一个列表网站，上面有 300 多个列表。

该网站的目的是通过列表获取查询。

目前，查询附在一个按钮上——它会打开您的电子邮件程序并发送电子邮件。这并不理想。

有没有办法创建一个通用查询框或表格并将其附加到每个列表，并在发送时在此表单中包含列表的名称？

有没有办法创建一个可以附加在网站页面前端的表单，而不是“请求报价”按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:38:26.393

坦率地说，seblod 是一个令人印象深刻的 Joomla 应用程序，但我担心你可能无法在他们的论坛上获得有用的答案，我已经使用它一年多了，我只是接受它的一些功能。访问[论坛](http://www.seblod.com/support/forum.html)，您应该能够从那里的开发人员那里找到一个好的答案。它是一个宽敞的套件，因此它可能会带来一些独特的挑战。

# android - SensorEventListener 在 2.1 (API 7) 的虚拟设备上挂起，但不在真实设备上，为什么？

> ID：12056128
> 
> 赞同：0
> 
> 时间：2012-08-21T13:38:11.427
> 
> 标签：android, eclipse, avd, android-sdk-2.1

*** 回答：正如 DeeV 所指出的，这个问题已经在[这里](https://stackoverflow.com/questions/8626718/how-to-avoid-android-getsystemservicecontext-sensor-service-hanging-emulator)讨论过了。我不知道如何将这个问题作为 DUPLICATE 关闭

我一直在使用运动检测进行测试，并且取得了不错的效果。但是有一个小错误我完全不知道如何解决。当我实现以下内容时：

```
public class MainActivity extends Activity implements SensorEventListener 

private SensorManager mSensorManager;

// ... OnCreate..

mSensorManager = (SensorManager) getSystemService(this.SENSOR_SERVICE); 
```

在任何活动上，它都可以在带有 4.0.3 和 2.1-upate1 的 android 设备上运行良好。然而，在模拟器上，它只适用于 4.0.3。在 2.1 上，虚拟设备只是在执行时挂起，在 logcat 上没有消息。删除此行：

```
mSensorManager = (SensorManager) getSystemService(this.SENSOR_SERVICE); 
```

然后允许活动开始。

我现在的问题一定是我的环境；我重新安装了sdk，但问题仍然存在。我只在我的电脑上试过这个。谁能告诉我发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:45:51.063

简单的回答，[您不能使用某些模拟器来测试传感器。](https://groups.google.com/forum/?fromgroups=#!topic/android-beginners/G2g_gRz8ttM) 从那以后他们似乎已经解决了这个问题，但是 2.1 模拟器仍然没用。据此[，](https://stackoverflow.com/questions/8626718/how-to-avoid-android-getsystemservicecontext-sensor-service-hanging-emulator)您可以通过禁用您尝试检索的传感器来绕过它。它会像传感器不存在一样工作，因此您至少可以测试您的应用程序，就好像它是无法使用加速度计的设备一样。

# java - 为 Java 应用程序运行数据库迁移

> ID：12056139
> 
> 赞同：2
> 
> 时间：2012-08-21T13:38:32.743
> 
> 标签：java, heroku, database-migration

在 Heroku 上为 Java 应用程序运行数据库迁移的推荐方法是什么？有什么最佳实践吗？比如工具等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:15:57.293

一个迟到的答案，但如果你没有使用 Play！（它有一个名为“Evolutions”的内置解决方案），我建议查看 liquibase（[http://www.liquibase.org/](http://www.liquibase.org/)）。从概念上讲，它的工作原理类似于 Play！进化或 Rails 迁移 - 模块化 DDL/DML 步骤，按顺序执行并随时间跟踪，以便维护数据库的活动历史记录。模式定义是通过一种非常简单的 XML 格式定义的，能够定义 SQL 语句、回滚步骤等。

它也可以连接到 Spring 应用程序上下文以在服务器启动时执行，这使其非常适合 Heroku。例如，context.xml 中的代码片段会在 Spring 启动时触发数据库升级分析：

```
<bean class="liquibase.integration.spring.SpringLiquibase" id="liquibase" lazy-init="false">
  <property name="dataSource" ref="dataSource"/>
  <property name="changeLog" value="classpath:META-INF/schema/db-changelog-master.xml"/>
</bean> 
```

# c++ - 函数内部不允许定义或重新声明“GetInstance”

> ID：12056140
> 
> 赞同：-1
> 
> 时间：2012-08-21T13:38:34.860
> 
> 标签：c++, templates, constructor, thread-safety, singleton

我正在尝试在多线程环境中的包装器内创建单例类的实例。我正在使用包装器来简化我的工作，而不是在 ManagerSources 中多次编写 Lock 和 Unlock。

```
#define ManagerSOURCES() ManagerSources::GetInstance()

// Singleton
class ManagerSources :public Mutex {

protected:

    std::map< std::string , SourcesSPtr > Objects;

    static ManagerSources * Instance; // declared in a cpp file
    ManagerSources() {}
    ManagerSources( const ManagerSources& cpy ) {}
    ManagerSources operator=( ManagerSources& cpy) {}

public:

    static ManagerSources* GetInstance() {
        if ( Instance == NULL )
            Instance = new ManagerSources();
        return Instance;
    }

    ...
};

// This class is a wrapper for ManagerSources in a thread programming environment
template <class T>
class SingletonThreadSafe {

protected:

    T *pointer;

public:

    class proxy {
        T* pointer;

    public:

        proxy(T* _pointer) : pointer(_pointer) {
            // LOCK();            
        }

        ~proxy(){
            // UNLOCK();
        }

        T* operator->() {
            return pointer;

        }
    };

    // Default parameter is needed for containers (eg. insert into a map) where we need
    // a constructor without parameters
    SingletonThreadSafe(T* cpy = NULL ): pointer(cpy) {

    }

    ~SingletonThreadSafe() {
    }

    SingletonThreadSafe(const SingletonThreadSafe & cpy) {

        this->pointer = cpy.pointer;

    }

    SingletonThreadSafe operator=(SingletonThreadSafe cpy) {

            this->pointer = cpy.pointer;

            return *this;

    }

    T operator*() {

        return *pointer;

    }

    proxy operator->() {

        return proxy( pointer );

    }
}; 
```

我有以下声明

```
typedef SingletonThreadSafe<ManagerSources> aa;

aa( ManagerSources::GetInstance() ); // doesn't work

or 

aa( ManagerSOURCES() ); // the same as above; still not working 
```

语法不起作用，它给了我以下错误**"Definition or redeclaration of 'GetInstance' not allowed inside a function"**。而且，我不知道为什么。**关于如何解决这个问题的任何想法？**

另外，对我来说奇怪的事实是，如果我用默认参数重写构造函数

```
SingletonThreadSafe(T* cpy = T::GetInstace() ): pointer(cpy) {

} 
```

以下声明有效

```
aa()->A_Function(A_Parameter); 
```

如果我声明它仍然有效

```
aa bb( ManagerSOURCES() ); //  it works

( SmartPtr<ManagerSources>() = ManagerSOURCES() )->A_Function(A_Parameter); // it works; 
// the constructor with the  default parameter is called 
```

我不知道为什么会出现错误“函数内部不允许定义或重新声明 'GetInstance'”。

我正在使用 Xcode 4.4.1 和 LLVM GCC 4.2 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:49:01.997

这是最令人烦恼的解析的变体。

```
aa( ManagerSources::GetInstance() ); // doesn't work 
```

`ManagerSources::GetInstance`被解释为不带参数并返回类型的函数的声明`aa`。

您可以使用以下方法解决它`static_cast`：

```
static_cast<aa>( ManagerSources::GetInstance() ); 
```

强制转换`void`也可以工作，任何其他阻止表达式被解析为声明的东西也可以：

```
(void) aa( ManagerSources::GetInstance() ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:52:44.773

```
aa( ManagerSources::GetInstance() ); 
```

那是一个函数声明；相当于：

```
aa ManagerSources::GetInstance(); 
```

如果您希望它创建一个对象，则将其设为（命名）变量声明：

```
aa x(ManagerSources::GetInstance()); 
```

或者，如果您希望它成为创建临时对象的表达式，则将其明确设为表达式：

```
(void)aa(ManagerSources::GetInstance()); 
```

尽管请注意，在创建它的完整表达式的末尾会销毁未命名的临时对象，这几乎肯定不是您想要的。

# php - 错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接而不发送任何数据

> ID：12056142
> 
> 赞同：1
> 
> 时间：2012-08-21T13:38:48.887
> 
> 标签：php, screen-scraping, simple-html-dom, phantomjs, laravel

我收到这个错误

```
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

在我的 PHP 函数中，如果我不执行 a`echo`后跟 a `flush()`。在我必须执行`echo`and的这些函数中`flush()`，我使用`shell_exec()`来运行`phantomjs`和处理它返回的结果`simple_html_dom`。我还使用了一个名为 Laravel 的 PHP 框架。

是什么导致了这个错误，为什么`echo`ing 和做一个`flush()`修复这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T23:56:12.290

通常，Laravel 期望输出`return`由你的路由或控制器编辑，而不是`echo`编辑。例如，您可能有

```
Route::get('foo', function() {
    return 'Hi';
}); 
```

然后 Laravel 将向浏览器输出“Hi”。根据您的需要，您可以自己构建此输出，也可以使用 Laravel 的[View 或 Response](http://laravel.com/docs/views)类以适合您的应用程序的方式格式化数据。

如果您绝对*需要*使用 echo 刷新输出，这是[通过视图文件执行](https://stackoverflow.com/questions/13790844/php-flush-doesnt-work-with-laravel)此操作的一种可能方法。

# mysql - 多租户 MySQL 数据库中的数据虚拟隔离

> ID：12056145
> 
> 赞同：2
> 
> 时间：2012-08-21T13:39:03.940
> 
> 标签：mysql, mongodb, database-schema, multi-tenant

这更像是一个概念性问题，因此如果它们能够实现相同的概念，则欢迎对堆栈进行变体。我们目前正在使用 MySQL 并将一些服务扩展到 MongoDB。

我们的想法是，我们希望能够管理单个物理数据库模式/结构，以便随着使用该结构的客户数量增长到数千、数十、数百个，调整、扩展等不会变得过于繁琐等，但是我们希望在这个级别而不是简单地在应用程序层隔离他们的数据，以提供更严格的分离。是否可以使用相同的结构为每个客户端创建虚拟箱，但它们的数据在结构上彼此分离？

正常的方法显然是直接或通过外部关系将客户端密钥添加到每一行数据，但鉴于我们无法预见 20/20 的情况下我们的系统可能会如何发生黑客攻击，从而允许“跨客户端”数据检索，我想要更进一步，将分离嵌入到一个几乎结构层面。

我还在这里阅读了另一篇文章：[MySQL：如何进行行级安全性（如 Oracle 的虚拟专用数据库）？](https://stackoverflow.com/questions/5527129/mysql-how-to-do-row-level-security-like-oracles-virtual-private-database)它使用“视图”作为一种方法，但是随着客户列表的增加，这似乎变得更有效。

谢谢！

- - 编辑 - -

根据下面建议的一些文献，这里有更多关于我们意图的信息：

@Stennie 提供的 MSDN 文章中概述的三者中最接近的情况是单个数据库、多模式，但不同之处在于，我们对创建后自定义客户端模式不感兴趣，我们实际上希望它们保持锁定到父/主模式。

理想情况下，该解决方案将保持每个模式链接到父表集结构，而不是简单地复制它，希望对父模式或主模式的任何更改都将级联到所有客户端/租户模式。

更进一步，在集群中，我们可以有一个具有主模式的主控，每个从属从它复制，但有一组分片的租户。然后可以在不中断的情况下通过集群过滤对主节点的更改，并在所有实例之间保持一致性，还允许我们更快地更新应用程序层，因为我们知道所有数据库都与更新的模式兼容。

希望这是有道理的，我在这个级别上仍然有点新鲜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:00:38.643

有一些常见的基础设施方法，从“不共享”（又名`multi-instance`）到“共享一切”（又名[`multi-tenant`](http://en.wikipedia.org/wiki/Multitenancy)）。

例如，“虚拟箱”的一种直接方法是使用共享数据库服务器为每个客户端分配一个数据库。这介于两个共享极端之间，因为您的客户将共享数据库服务器基础设施，但将他们的数据和架构分开。

每个客户端的数据库方法将允许您：

*   使用数据库的身份验证和访问控制管理每个客户端的身份验证和访问
*   支持不同的数据库软件（你提到使用支持视图的 MySQL 和不支持视图的 MongoDB）
*   更轻松地为每个客户端备份和恢复数据
*   在数据库级别避免潜在的跨客户端泄漏
*   避免单个海量数据库的过度表增长和相关管理问题

一些潜在的缺点包括：

*   有更多的数据库要管理
*   对于要强制执行某些模式（即 MySQL）的数据库，您需要在所有数据库中应用模式更改或支持某种形式的版本控制
*   对于预先分配存储的数据库（即 MongoDB），您可以为每个客户端使用更多存储（特别是如果您的实际数据大小很小）
*   您可能会遇到命名空间或打开文件的限制
*   您仍然需要担心应用程序和数据安全 :)

如果您对多租户进行一些研究，您会发现一些其他解决方案，从这个示例（共享数据库服务器架构上的每个客户端隔离数据库）到更复杂的分区数据方案。

这篇 Microsoft 文章包括对方法和注意事项的有用概述：[多租户 SaaS 数据库租户模式](https://docs.microsoft.com/en-us/azure/sql-database/saas-tenancy-app-design-patterns)。

# c - 带有 __in 注释的 winusb.h 如何在 c 下编译？

> ID：12056154
> 
> 赞同：0
> 
> 时间：2012-08-21T13:39:30.883
> 
> 标签：c

当我尝试编译具有 winusb.h 头文件的（在 windows xp 上，使用 Visual c++ 6.0）ac（不是 C++）程序时，我遇到了 c++ 注释（__in）的问题，例如：

```
__in  HANDLE DeviceHandle, 
```

我需要什么才能在c中编译它？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:42:06.480

忽略它（以及类似的注释）：

```
#define __in 
#define __out
#define __in_opt 
```

# php - 无法访问函数中的全局变量

> ID：12056161
> 
> 赞同：0
> 
> 时间：2012-08-21T13:39:47.700
> 
> 标签：php

> **可能重复：**
> [无法访问 usort 函数中的全局变量？](https://stackoverflow.com/questions/894990/cant-access-global-variables-inside-a-usort-function)

我已经经历过这个问题不止一次了，这次我不知道如何解决它。

```
$testing = "hej";
function compare($b, $a)
{
    global $testing;
    echo '<script>alert(\'>'.$testing.'<\');</script>';
} 
```

为什么这不显示带有“> hej <”的警报框，对我来说它显示“> <”。

此外，这是一个`uasort`作为第二个参数调用的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:43:00.490

答案很简单：**不要使用全局变量。**

如果要访问该变量并更改该变量的值，请通过引用将其作为参数传递：

```
<?php
$testing = "hej";

function compare($b, $a, &$testing) {
    $testing = "def";
}

compare(1, 2, $testing);

echo $testing; // result: "def" 
```

如果您只想要该值，请按值传递：

```
<?php
$testing = "hej";

function compare($b, $a, $testing) {
    $testing = "def";
}

compare(1, 2, $testing);

echo $testing; // result: "hej" 
```

**更新：**

另一种选择是将对象传递给`usort()`数组：

```
<?php
class mySort {
    public $testing;

    public function compare($a, $b) {
        echo '<script>alert(\'>'.$this->testing.'<\');</script>';
    }
}

$data = array(1, 2, 3, 4, 5);
$sorter = new mySort();
usort($data, array($sorter, 'compare')); 
```

# javascript - 断帧检测

> ID：12056162
> 
> 赞同：1
> 
> 时间：2012-08-21T13:39:49.993
> 
> 标签：javascript, html, frame

我需要一些方法来检测来自某个 URL 的站点是否是断帧器。我的意思是**Framebreaker** - 如果它加载在框架中，则会制动框架结构的站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:43:31.367

如果您要问的是“如何防止在框架中查看我的网页？” 那么这是[目前已知的最佳解决方案](http://seclab.stanford.edu/websec/framebusting/framebust.pdf)：

使用 CSS 将页面的主体设置为不显示：

```
<style>
  body { display : none ; }
</style> 
```

然后仅在页面不在框架中时显示页面：

```
<script>
  if (self == top) {
    //Not in a frame
    document.getElementsByTagName("body")[0].style.display = 'block';
  } else {
    //In a frame. Redirect to the real page.
    top.location = self.location;
  }
</script> 
```

将样式放在 <head> 中，将脚本放在 <body> 中。

如果您只是想检测页面是否被框住，但不做任何事情，您只需要以下 javascript：

```
<script>
  if(self == top) {
    alert("Not in a frame");
  } else {
    alert("In a frame");
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:42:41.300

不知道你为什么把它标记为 php，只有 javascript 可以做到这一点......

```
if (top !== window) {
    top.location.href = '/url/';
} 
```

# python - 从 NumPy 中不均匀采样的数据生成均匀采样的数组

> ID：12056165
> 
> 赞同：6
> 
> 时间：2012-08-21T13:39:53.377
> 
> 标签：python, numpy, scipy, sample

问题是我想减少绘图和分析的数据量。我正在使用 Python 和 Numpy。数据采样不均匀，因此有一个时间戳数组和一个对应值数组。我希望数据点之间至少有一定的时间。我在这里有一个用 Python 编写的简单解决方案，可以在样本之间至少间隔一秒的地方找到索引：

```
import numpy as np

t = np.array([0, 0.1, 0.2, 0.3, 1.0, 2.0, 4.0, 4.1, 4.3, 5.0 ]) # seconds
v = np.array([0, 0.0, 2.0, 2.0, 2.0, 4.0, 4.0, 5.0, 5.0, 5.0 ])

idx = [0]
last_t = t[0]
min_dif = 1.0 # Minimum distance between samples in time
for i in range(1, len(t)):
    if last_t + min_dif <= t[i]:
        last_t = t[i]
        idx.append(i) 
```

如果我们看一下结果：

```
--> print idx
[0, 4, 5, 6, 9]

--> print t[idx]
[ 0\.  1\.  2\.  4\.  5.] 
```

问题是如何才能更有效地做到这一点，特别是如果数组真的很长？是否有一些内置的 NumPy 或 SciPy 方法可以做类似的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:11:43.383

虽然像 @1443118 一样，我建议使用`pandas`，但您可能想尝试使用`np.histogram`.

首先，了解`min_dif`您需要的 bin 数量（s 的间隔）：

```
>>> bins = np.arange(t[0], t[-1]+min_dif, min_dif) - 1e-12 
```

这`t[-1]+min_dif`是为了确保我们采取最后一点，`-1e-12`避免将`4.0`您的示例计入最后一个 bin 的技巧：这只是确保我们关闭右侧间隔的偏移量。

```
>>> (counts, _) = np.histogram(t, bins)
>>> counts
array([4, 1, 1, 0, 3])
>>> counts.cumsum()
array([4, 5, 6, 6, 9]) 
```

所以，`v[0:4]`是你的第一个样本，`v[4:5]`你的第二个......你明白了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T13:46:21.607

一个简单的解决方案是通过插值，使用例如`numpy.interp`：

```
vsampled = numpy.interp(numpy.arange(t[0], t[-1]), t, v) 
```

但是，这不会为您提供值的索引。但是，即使对于输入数组中没有可用数据的 t 中的点，它也会通过插值生成值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:26:27.093

我想不出一个*完全*符合您要求的解决方案，但是虽然它对我来说似乎不太优雅，但这应该可以在不进行插值的情况下*大致*完成您想要的。它将每秒最多给出一个值（最左边）：

```
# Assuming that t is sorted...
# Create all full seconds.
seconds = np.arange(int(t[0]), int(t[-1]) + 1)

# find the indexes for all
idx = np.searchsorted(t, seconds)
idx = np.unique(idx) # there might be duplicates if a second has no data in it. 
```

对于您的示例，它给出了相同的结果，但它通常会允许更小或更大的差异当然（0到2秒之间的任何东西）......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T15:12:25.350

我建议为此使用[熊猫](http://pandas.pydata.org/)。生成规则间隔的时间序列然后将数据重新采样到某个特定频率非常简单。请参阅[此](http://pandas.pydata.org/pandas-docs/stable/timeseries.html) 内容并查看关于在页面下方重新采样的小节。

# html - 旋转下拉列表

> ID：12056175
> 
> 赞同：0
> 
> 时间：2012-08-21T13:40:24.240
> 
> 标签：html, css, drop-down-menu, html-select

请看看这个[jsfiddle](http://jsfiddle.net/rYtFQ/)。

我正在尝试旋转下拉列表，但我想知道我是否也可以旋转下拉菜单。当您现在单击下拉列表时，会出现一个普通列表，但我想让它旋转。

提前感谢您的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:53:21.653

这是不可能的。选项的下拉菜单由系统呈现，因此不受 CSS 选择器的影响。

我建议使用 jQuery 解决方法，否则你会被“老式”选项样式卡住。

# php - 如何在 symfony2 全局辅助函数（服务）中访问服务容器？

> ID：12056178
> 
> 赞同：54
> 
> 时间：2012-08-21T13:40:26.503
> 
> 标签：php, service, symfony

这个问题始于我不明白为什么我不能将变量传递给 symfony2 全局辅助函数（服务），但是感谢比我聪明的人，我意识到我的错误是关于尝试在一个没有的类中使用 security_context没有注射所以...

这是最终的结果，有效的代码。我发现没有更好的方法可以使这对社区有所帮助。

这是您如何从 symfony2 中的全局函数或辅助函数中从 security_context 获取用户和其他数据的方法。

我有以下类和功能：

```
<?php
namespace BizTV\CommonBundle\Helper;

use Symfony\Component\DependencyInjection\ContainerInterface as Container;

class globalHelper {    

private $container;

public function __construct(Container $container) {
    $this->container = $container;
}   

    //This is a helper function that checks the permission on a single container
    public function hasAccess($container)
    {
        $user = $this->container->get('security.context')->getToken()->getUser();

        //do my stuff
    }     
} 
```

...定义为这样的服务（在 app/config/config.yml 中）...

```
#Registering my global helper functions            
services:
  biztv.helper.globalHelper:
    class: BizTV\CommonBundle\Helper\globalHelper
    arguments: ['@service_container'] 
```

现在，在我的控制器中，我像这样调用这个函数......

```
public function createAction($id) {

    //do some stuff, transform $id into $entity of my type...

    //Check if that container is within the company, and if user has access to it.
    $helper = $this->get('biztv.helper.globalHelper');
    $access = $helper->hasAccess($entity); 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-21T14:26:43.267

我假设第一个错误（未定义的属性）发生在您添加属性和构造函数之前。然后你得到了第二个错误。这个其他错误意味着您的构造函数希望接收一个 Container 对象，但它什么也没收到。这是因为当你定义你的服务时，你没有告诉依赖注入管理器你想要获取容器。将您的服务定义更改为：

```
services:
  biztv.helper.globalHelper:
    class: BizTV\CommonBundle\Helper\globalHelper
    arguments: ['@service_container'] 
```

然后构造函数应该期望一个 Symfony\Component\DependencyInjection\ContainerInterface 类型的对象；

```
use Symfony\Component\DependencyInjection\ContainerInterface as Container;

class globalHelper {    

    private $container;

    public function __construct(Container $container) {
        $this->container = $container;
    } 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-04-01T21:40:57.833

尽管不是 OO 中的最佳实践，但始终有效的方法

```
global $kernel;
$assetsManager = $kernel->getContainer()->get('acme_assets.assets_manager');‏ 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-24T13:37:26.320

另一种选择是扩展 ContainerAware：

```
use Symfony\Component\DependencyInjection\ContainerAware;

class MyService extends ContainerAware
{
    ....
} 
```

它允许您调用`setContainer`服务声明：

```
foo.my_service:
    class: Foo\Bundle\Bar\Service\MyService
    calls:
        - [setContainer, [@service_container]] 
```

然后，您可以像这样在服务中引用容器：

```
$container = $this->container; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-08T10:13:58.377

也许这不是最好的方法，但我所做的是将容器传递给班级，所以每次我需要它时我都会拥有它。

```
$helpers = new Helpers();
or
$helpers = new Helpers($this->container);

/* My Class */
class Helpers
{
    private $container;

    public function __construct($container = null) {
        $this->container = $container;
    }
    ...
} 
```

每次都为我工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-27T14:59:21.813

`service_container`你不应该在你的服务中注入。在您的示例中，您应该注入旧的`security.context`或更新的`security.token_storage`。[例如，请参阅http://symfony.com/doc/current/components/dependency_injection.html](http://symfony.com/doc/current/components/dependency_injection.html)的“避免您的代码依赖于容器”部分。

前任：

```
<?php
namespace BizTV\CommonBundle\Helper;

use Symfony\Component\Security\Core\Authentication\Token\Storage\TokenStorage;

class globalHelper {    

    private $securityTokenStorage;

    public function __construct(TokenStorage $securityTokenStorage) {
        $this->securityTokenStorage= $securityTokenStorage;
    }   

    public function hasAccess($container)
    {
        $user = $this->securityTokenStorage->getToken()->getUser();

        //do my stuff
    }     
} 
```

应用程序/配置/config.yml：

```
services:
  biztv.helper.globalHelper:
    class: BizTV\CommonBundle\Helper\globalHelper
    arguments: ['@security.token_storage'] 
```

你的控制器：

```
public function createAction($id) {

    $helper = $this->get('biztv.helper.globalHelper');
    $access = $helper->hasAccess($entity); 
```

# c# - AssertWasCalled() 等效方法在编译时未知

> ID：12056179
> 
> 赞同：1
> 
> 时间：2012-08-21T13:40:28.140
> 
> 标签：c#, reflection, rhino-mocks

我有一个 Rhino 模拟对象，并且我有一个 MethodInfo 表示正在模拟的接口上的方法。我想知道 MethodInfo 所代表的方法是否已经在 mock 对象上被调用。

如果我在编译时知道该方法，我会使用 Rhino AssertWasCalled() 方法。

如果我有一两天的空闲时间，我可能会使用表达式树的魔法来生成代码，但这比这个问题目前的价值要高。

我想知道我是否错过了更简单的方法。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:11:44.343

您假设在这里使用表达式树会使事情变得过于复杂，但我不同意：

```
// What you have:
var methodInfo = typeof(ICloneable).GetMethod("Clone");

var parameter = Expression.Parameter(typeof(ICloneable), "p");
var body = Expression.Call(parameter, methodInfo);

// Rhino can accept this as an expectation.
var lambda = Expression.Lambda<Action<ICloneable>>(body, parameter).Compile(); 
```

然后像这样使用它：

```
var clone = new MockRepository().Stub<ICloneable>();
clone.Replay();
clone.Clone();
clone.AssertWasCalled(lambda); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:08:21.753

根据上面 Ani 的有用评论，我得出了以下结论。

`GetParameters()[0]`这是测试代码，所以我对恐怖感到乐观！

```
 protected static object InvokeOldOperation<TCurrentInterface>(MethodInfo oldOperationMethod, object implToTest, TCurrentInterface mockCurrentImpl)
    {
        MethodInfo currentInterfaceMethod = typeof(TCurrentInterface).GetMethod(oldOperationMethod.Name);

        Type oldRequestType = oldOperationMethod.GetParameters()[0].ParameterType;
        var request = Activator.CreateInstance(oldRequestType);

        Type currentRequestType = currentInterfaceMethod.GetParameters()[0].ParameterType;

        ParameterExpression instanceParameter = Expression.Parameter(typeof(TCurrentInterface), "i");
        var requestParameter = Expression.Constant(null, currentRequestType);
        MethodCallExpression body = Expression.Call(instanceParameter, currentInterfaceMethod, new Expression[] { requestParameter});
        var lambda = Expression.Lambda<Func<TCurrentInterface, object>>(body, instanceParameter).Compile();

        var response = oldOperationMethod.Invoke(implToTest, new[] {request});
        mockCurrentImpl.AssertWasCalled(lambda, opt => opt.Constraints(Is.TypeOf(currentRequestType)).Repeat.Once());

        return response;
    } 
```

# javascript - 访问 JavaScript 对象中的方法

> ID：12056185
> 
> 赞同：1
> 
> 时间：2012-08-21T13:40:56.033
> 
> 标签：javascript

考虑以下 Java 脚本代码：

```
 var myObj = function (  ) {
        var x = 0;
        return {
            addup: function (y) {
                x += y;
            },
            getX: function (  ) {
                return x;
            }
        }
    }(); 
```

这个函数返回一个有两种方法的对象（如果我没记错的话）。

现在，两个问题：

1.  如何调用从函数返回的两个方法？
2.  这些方法仍然可以访问变量 x 吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:44:33.130

1.  `myObj.getX();`和`myObj.addup(5);`
2.  是的，他们仍然可以访问

示例 - [http://jsfiddle.net/qWT9N/](http://jsfiddle.net/qWT9N/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:45:30.143

如何调用从函数返回的两个方法？

```
myObj.addup(10);
var xValue = myObj.getX(); 
```

这些方法仍然可以访问变量 x 吗？**是的**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T13:45:33.837

`myObj`您已经创建了具有私有属性`x`和两个公共方法的“模板”对象。

根据您的“模板”调用创建对象`var obj = myObj();`

1.  `obj.addup(2);`你可以这样称呼他们`obj.getX();`
2.  是的，这些方法可以访问`x`它们的私有变量

# jquery-mobile - 动态菜单与硬编码

> ID：12056190
> 
> 赞同：1
> 
> 时间：2012-08-21T13:41:05.093
> 
> 标签：jquery-mobile, cordova

我正在使用 jQuery Mobile 为客户端构建移动应用程序。我的问题是相当基本且非技术性的：

该应用程序可以拥有三种不同类型的用户，它们都具有不同的菜单布局。一些用户可以访问系统的某些部分，而其他用户则不能。

我的问题是——我应该在 index.html 文件中对菜单系统进行硬编码，还是应该在他们登录时动态创建它？我假设通过对菜单进行硬编码然后只选择要显示的#page 而不是需要ajax调用...但是将菜单构建器保持在服务器端处理可以让我们更加敏捷部署后需要更改菜单。

如果已经问过这个问题，我们深表歉意。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:57:26.057

动态构建您的页面。在 jQuery mobile 上，很多东西会重复，如果你想尊重[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)并想创建易于维护的代码，那就动态地做。

此外，通过在移动应用程序上执行此操作，您将减少加载时间：您只需加载一个页面，而不是加载 3 个页面，这在移动开发中至关重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:45:25.050

如果可以动态完成硬编码，那么硬编码是不好的，因为它可以节省开销并产生更容易维护的更好的代码。

如果您想在将来更改菜单，您可以只编辑信息源，而不是遍历所有代码，其中包含大量的混乱 if 和 else 语句，说如果此人已登录，则不显示此选项，但显示此选项等等

# mysql - MySQL：在运行时为客户端确定 max_allowed_pa cket 的值

> ID：12056195
> 
> 赞同：2
> 
> 时间：2012-08-21T13:41:28.577
> 
> 标签：mysql, configuration, mysql-connector

考虑这种情况：

```
-- Server: max_allowed_packet = 200MB 
-- Client: max_allowed_packet = 4MB

-- The following will return 200MB
SHOW variables like 'max_allowed_packet'; 
```

不阅读配置文件，是否可以为客户端确定 max_allowed_pa​​cket 的值？我正在使用 MySQL C API。

基本上，我希望我的应用程序具有以下内容：

```
 max_allowed_packet = min(max_allowed_packet_server, max_allowed_packet_client) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T13:04:17.857

您无法`max_allowed_packet`在运行时直接确定客户端。当您执行`show variables like "max_allowed_packet"`时，它仅显示服务器端的 max_allowed_pa​​cket 以及它在开始时读取的任何内容。似乎没有其他方法可以找到这个值。

此外，为了解决您的问题，默认情况下，[来自 MySQL Docs](http://dev.mysql.com/doc/refman//5.5/en/server-system-variables.html#sysvar_max_allowed_packet)

```
On the client side, max_allowed_packet has a default of 1GB. 
```

此外，正如您已指定您正在使用`MySQL C API`. [您可以使用mysql_options()](http://dev.mysql.com/doc/refman/5.0/en/mysql-options.html) API设置 max_allowed_pa​​cket 的值，如下所示：

首先创建包含内容的选项文件

```
[client]
max_allowed_packet=10M 
```

假设这个文件保存为“c:/mysql.cnf”，它将客户端的 max_allowed_pa​​cket 的值设置为 10MB。现在您需要在您的连接语句之前包含以下代码行来读取此文件。

```
mysql_options (conn, MYSQL_READ_DEFAULT_FILE, "C:/mysql.cnf"); 
```

如果您希望将组的名称从文件更改为`client`，`myClient`请将“c:/mysql.cnf”设置为

```
[myClient]
max_allowed_packet=10M 
```

并在您的连接语句之前使用以下代码行：

```
mysql_options (conn, MYSQL_READ_DEFAULT_FILE, "c:/mysql.cnf");
mysql_options (conn, MYSQL_READ_DEFAULT_GROUP, "myClient"); 
```

所以，最后你的代码看起来像这样：

```
MYSQL mysql;

mysql_init(&mysql);
mysql_options (conn, MYSQL_READ_DEFAULT_FILE, "c:/mysql.cnf");
mysql_options (conn, MYSQL_READ_DEFAULT_GROUP, "myClient");
if (!mysql_real_connect(&mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&mysql));
} 
```

上面的代码行，会将您的 max_allowed_pa​​cket 设置为 10M，现在您可以使用查询“ `show variables like "max_allowed_packet"`”读取服务器端 max_allowed_pa​​cket，并且您知道客户端 max_allowed_pa​​cket 为 10MB。

更多参考资料[1](http://etutorials.org/SQL/MySQL/Part+IV+Appendixes/Appendix+F.+C+API+Reference/C+API+Functions/)

对于 MySQL 命令行客户端，[MySQL 文档](http://dev.mysql.com/doc/refman//5.5/en/packet-too-large.html)说

> 如果你使用 mysql 客户端程序，它的默认 max_allowed_pa​​cket 变量是 16MB

希望它有所帮助，并服务于您的目的....

# crystal-reports - Crystal Report 2008 添加命令 Where 子句参数

> ID：12056200
> 
> 赞同：0
> 
> 时间：2012-08-21T13:41:58.517
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-xi

Crystal 版本 - Crystal Reports 2008 业务对象 - XI

我编写了一个查询来填充子报表，并希望根据用户的输入将参数拉入该查询。我的问题是，我需要在“Where”子句的第一行中放入什么正确的语法来接受参数？

我在添加命令中创建了一个参数，它被称为`PickDate`

这是我在 Crystal Reports 中使用的查询：

```
 select 
            table2.book_no,
            table2.time_stamp,
            table2.restdate, 
            a.timestamp, 
            a.event_type,
            a.status,
            a.people, 
            a.new_date, 
            a.comments,
            a.operator_id 

    from table1 a, table2
    where table1.book_no  = table2.outage_no 
```

我已经测试了查询，它正在提取所有数据，现在我只需要帮助添加参数来提示用户输入数据时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:14:21.800

您是否尝试在子报表中使用“选择专家”？你应该可以说 field = {?PickDate}

# soa - SOA 服务中的报告功能

> ID：12056203
> 
> 赞同：0
> 
> 时间：2012-08-21T13:42:17.847
> 
> 标签：soa

我正在寻找设计一个 SOA 服务，除了它的主要要求之外，它还需要少量报告。

SOA 服务何时应 (a) 包含其自己的报告功能，以及 (b) 何时应将报告作为单独报告服务的一部分提供？

我想 (a) 使服务更加独立，但是 (b) 当组织已经部署了报告服务时可能应该首选？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:40:38.203

如果报告是独立的并且与经常更改的数据相关，您可以/应该报告个别服务。

当数据不可变（即数据的历史副本）时，可以使用集中式报告。这样，服务仍然是数据的所有者（并负责更新数据），并且数据仍然可用于跨服务报告。这是我称之为聚合报告的模式（您可以在[此处](http://www.manning.com/free/excerpt_rotem_a.html)查看它的草稿）

你可以看到我在 infoQ 上发表的一篇文章，名为[bridging the gap between BI & SOA](http://www.infoq.com/articles/BI-and-SOA)

# perl - 在 perl 中访问文件

> ID：12056207
> 
> 赞同：2
> 
> 时间：2012-08-21T13:42:31.027
> 
> 标签：perl

在我的脚本中，我正在处理打开文件和写入文件。我发现我尝试打开的文件有问题，该文件存在，它不是空的，并且我正在将正确的路径传递给文件句柄。

我知道我的问题可能听起来很奇怪，但是在调试代码时，我将以下命令放入脚本中以检查一些文件

```
system ("ls"); 
```

然后我的脚本运行良好，当它被删除时它不再正常工作。

```
 my @unique = ("test1","test2");
 open(unique_fh,">orfs");
 print unique_fh @unique ;
 open(ORF,"orfs")or die ("file doesnot exist");
 system ("ls");
    while(<ORF>){
    split ;
    }
    @neworfs=@_ ;
  print @neworfs ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:17:52.613

当您打印到文件时，Perl 会缓冲输出。换句话说，每次你说`print`;它实际上并没有写入文件。它保存了一堆数据并一次将其全部写入。这更快。

在您的情况下，您看不到您写入文件的任何内容，因为 Perl 还没有写入任何内容。然而，添加`system("ls")`调用会导致 Perl 首先编写您的输出（解释器足够聪明，可以这样做，因为它认为您可能想要使用`system()`调用来对刚刚创建的文件执行某些操作）。

你如何解决这个问题？正如 choroba 建议的那样，您可以在再次打开文件之前关闭文件以进行阅读。或者您可以禁用该文件的缓冲。在打开文件后放置此代码：

```
my $fh = select (unique_fh);
$|=1;
select ($fh); 
```

然后，无论何时您打印到文件，它都会立即被写入（`$|`是一个设置输出缓冲行为的特殊变量）。

首先关闭文件可能是一个更好的主意，尽管可以同时打开一个用于读取和写入的文件句柄。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T14:03:14.400

在尝试从同一个文件中读取之前，您没有关闭文件句柄。

# javascript - 直接绑定和使用各个函数的区别

> ID：12056208
> 
> 赞同：1
> 
> 时间：2012-08-21T13:42:31.107
> 
> 标签：javascript, jquery, click, each

我对每个功能都很困惑。

[提琴手](http://jsfiddle.net/ComboZhc/5Dy7D/)

```
<html>
    <head>
        <script type="text/javascript" src="jquery-1.8.0.min.js"></script>
        <script>
        $(document).ready(function(){
            //$(".a").click(function(){
            //  alert("hi");
            //});
            $(".a").each(function(){
                $(this).click(function(){
                    alert("hi");
                });
            });
        });
        </script>
    </head>
    <body>
    <div class="a">hi</div>
    <div class="a">hi</div>
    </body>
</html> 
```

`.click`直接使用函数和使用有什么区别`.each`？它们都有效。

非常感谢。

**编辑**

如果这两种方法相同，请举例说明为什么`.each`需要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:47:47.177

其实这里是有区别的。随着`.each`您在每次迭代中创建一个新函数，每个元素都会获得一个分配为事件处理程序的不同函数对象。
如果您调用`.click`整个选择，则情况并非如此。它将使用您传递给它的函数作为每个元素的事件处理程序。但最终的行为是相同的。

您可以通过在迭代元素之前创建一次来避免创建新的函数对象：

```
var handler = function(){
    alert("hi");
};
$(".a").each(function(){
    $(this).click(handler);
}); 
```

但没有必要这样做。`.click`内部调用`.on`，这反过来将调用`.each`迭代选定的元素并绑定事件处理程序。

`.each`只是一种通用的方法来迭代元素并用它们做任何你想做的事情。例如，您可能希望将每个元素中的一个单词替换为另一个单词：

```
$('a').each(function() {
    $(this).text($(this).text().replace('foo', 'bar'));
}); 
```

这不是一个很好的例子，因为这里也有一种更简洁的方法，但我希望它能给你一些想法。

* * *

**为什么这两种方式之间存在性能差异？**

外部`.each`调用是多余的，并增加了额外的开销。“调用链”看起来类似于：

```
each (1 time)
  -> callback (N times)
    -> click (1 time) (N times in total)
      -> on (1 time) (N times in total)
        -> each (1 time) (N times in total)
          -> callback (which ultimately adds the event handler) (1 time) (N times in total) 
```

相比之下，这大致是您`.click`直接调用时发生的情况：

```
click (1 time)
  -> on (1 time)
    -> each (1 time)
      -> callback (which ultimately adds the event handler) (N times) 
```

因此，不仅执行了更多功能，而且还执行了多次相同的功能（如`.click`nad ）。*每个函数可能会在每次调用时进行一次*`.on`检查或初始化变量，因此很明显，如果您多次调用它，则会花费更多时间。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:44:34.420

`.click`元素列表上的元素`($('selector').length > 1)`通过 jQuery 在内部循环以添加事件。

`.each`并且`.click`由您完成.. 但随后它会通过相同的 jQuery 迭代代码。

我更喜欢使用第一个，因为它更整洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:43:46.730

如果您遵循 jquery 源代码，则没有区别，并且等同于同一件事。因此，我建议使用简单`click`的 .*

# java - Java - 比较两个字符串并将值分配给第三个变量？

> ID：12056209
> 
> 赞同：0
> 
> 时间：2012-08-21T13:42:32.970
> 
> 标签：java, string, variables, compare

这是我的第一次，所以我会尽量添加尽可能多的信息，这样我就不会被骂了。:-)

我想要做的是我有 2 个变量，它们从 2 个字段中获取文本，并且只从每个字段中获取第一个字符并将其分配给这些值。

这是我用来获取字符串的代码。就像您一样，它们是两个单独的电话。

```
try { var_ContactSurname = var_ContactSurname.substring(0,1);
    }
catch (Exception e){
} 
```

我再次使用不同的变量进行上述操作。现在到这一点，它做了我想要的。它从字段中获取第一个字母并将其分配给变量。

所以此时我有两个变量（比如 D 和 R 的示例字符）。

var_ContactSurname = R var_ContactLicenceNumber = D

我想要做的是比较这两个变量，如果它们匹配，我想返回一个 TRUE 值，否则如果它们不匹配，则返回 FALSE。

该值也必须是一个字符串，并分配给一个名为 var_ContactValidate 的新变量。

```
if (var_ContactLicenceNumber.toLowerCase().equals()var_ContactSurname.toLowerCase()){
var_ContactValidate == "TRUE";
}
else {
var_ContactValidate == "FALSE";
} 
```

不，您可能会注意到可能缺少一些代码。我正在使用一个规则引擎，它为我做了很多功能。我可以使用原始 Java 代码来做其他事情（比如这个比较）......但这是我遇到问题的比较。

对于该比较的任何想法将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:48:38.920

1.  我会用这个`String`方法[`equalsIgnoreCase()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)
2.  要将值分配给字段，请使用 single `=`，而不是 double ( `==`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:49:55.633

```
if (var_ContactLicenceNumber.equalsIgnoreCase(var_ContactSurname){
var_ContactValidate = "TRUE";
}
else {
var_ContactValidate = "FALSE";
} 
```

核实

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:52:36.890

除了已经说过的 - 一个更简单、更优雅的版本（没有`if`条件）可能是：

```
var_ContactValidate = Boolean.toString(
     var_ContactLicenceNumber.equalsIgnoreCase(var_ContactSurname))
    .toUpperCase(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T13:54:03.760

将您的整段代码更改为：

```
if (var_ContactLicenceNumber.equalsIgnoreCase(var_ContactSurname)){
var_ContactValidate == "TRUE";
}
else {
var_ContactValidate == "FALSE";
} 
```

这结合了您想要的不区分大小写，并通过第二个字符串作为 .equalsIgnoreCase 函数的参数。

另外，我不确定你想用这条线做什么： `var_ContactValidate == "TRUE";`

如果要将 var_ContactValidate 分配给“TRUE”，则使用单个等号 '=' 作为双等号 '==' 来比较值。在这种情况下，您也可以考虑使用布尔值而不是字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T14:37:30.123

这是一个还检查空值和空字符串的实现：

```
public class SurnameAndLicenseValidator {
    public static void main(String[] args) {

        // FALSE
        validateSurnameAndLicense(null, "jb78hq");
        validateSurnameAndLicense("Johnson", null);
        validateSurnameAndLicense(null, null);
        validateSurnameAndLicense("", "jb78hq");
        validateSurnameAndLicense("Johnson", "");
        validateSurnameAndLicense("", "");
        validateSurnameAndLicense("johnson", "xb78hq");

        // TRUE
        validateSurnameAndLicense("Johnson", "jb78hq");
        validateSurnameAndLicense("johnson", "jb78hq");
    }

    private static String validateSurnameAndLicense(String surname,
            String license) {
        String result;
        if (surname != null
                && surname.length() > 0
                && license != null
                && license.length() > 0
                && Character.toUpperCase(surname.charAt(0)) == Character
                        .toUpperCase(license.charAt(0))) {
            result = "TRUE";
        } else {
            result = "FALSE";
        }
        System.out.println(surname + " " + license + " " + result);
        return result;
    }
} 
```

main 方法在这里用作单元测试。如果你喜欢这种东西，你可能想从中提取一个真正的 JUnit 测试。

# xcode - Xcode 中的“目标”是什么？

> ID：12056213
> 
> 赞同：9
> 
> 时间：2012-08-21T13:42:48.243
> 
> 标签：xcode, targets

在使用 xcode 时，我已经看到了很多关于“目标”的事情。当我单击项目图标（蓝色，在 xcode 4.2 中）时，我会在中间窗格中看到“目标”，其中包含我的文件名。

这意味着什么？我可以在我的项目中添加更多“目标”吗？如果是，那意味着什么？

我有这个：http: [//developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Targets.html](http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Targets.html)

但我什么都不懂

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T13:52:00.643

目标基本上定义了您正在构建什么以及如何构建它。如果您想构建不止一件事，您可以添加更多目标。如果您需要从同一个项目构建几个相关的东西，这通常是有意义的。

例如，您可能希望一个目标用于应用程序的完整付费版本，而另一个目标用于应用程序的精简免费版本。这两个目标将包含许多相同的代码和资源，但某些设置会不同，并且每个目标可能包含不同的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:47:18.173

目标只是构建产品的不同方式。你有你的源文件，你有你的输出，有几种方法可以从 A 到 B。

一个 Xcode 项目可能包含许多源文件，这些源文件可以构建并产生许多不同的产品。

例如，您可以使用某些文件构建可执行文件，或者您可以从某些文件或单元测试库构建库（框架），或使用不同的构建标志。

大多数项目都有一个目标，但有些项目比其他项目更复杂。

# c# - 如何从库中获取网站程序集

> ID：12056214
> 
> 赞同：0
> 
> 时间：2012-08-21T13:42:51.710
> 
> 标签：c#, asp.net, reflection, ihttphandler

我的解决方案包括 2 个项目，一个 ASP.NET MVC 3 项目 - **Company.Web**和一个 .NET 库项目 - **Company.BLL**。该库包含一个实现 IHTTP 的类**——Company.BLL.Fido**。

我已将 Fido 注册为我的 Web 项目的 HTTPHandler，并且在 ProcessRequest() 方法中，我想使用反射 从 Company.Web 项目动态调用一个方法—— **Company.Web.FidoHelper.DoSomething() 。**

如何获得对**Company.Web**程序集的引用？Assembly.GetCallingAssembly() 返回*System.Web*，Assembly.GetEntryAssembly() 返回*null*，Assembly.GetAssembly() 返回*Company.BLL*。

查看 AppDomain.GetAssemblies()，我看到**Company.Web**包含在结果中，但是我的库项目如何知道该选择哪一个？我无法对这个选择进行硬编码，因为我计划将此库用于其他项目。

代码：

```
namespace Company.BLL
{
    public class Fido: IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            //hard-coding like this is not acceptable
            var assembly = AppDomain.CurrentDomain.GetAssemblies()
                                     .Where(a => a.FullName
                                     .StartsWith("Company.Web"))
                                     .FirstOrDefault();
            var type = assembly.GetType("Company.Web.FidoHelper");
            object appInstance = Activator.CreateInstance(type);
            type.InvokeMember("DoSomething", BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public, null, appInstance, new object[] { context });
            context.Response.End();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:01:06.150

这是我解决问题的方法：

在**Company.Web**中，创建一个扩展**Company.BLL.Fido的类****Fido**。不要提供任何实现并将**Company.Web.Fido**注册为处理程序而不是**Company.BLL.Fido**。

 ******在**Company.BLL.Fido 的**ProcessRequest() 方法中，HTTP 上下文的*CurrentHandler*属性现在引用**Company.Web.Fido**，因此我可以使用该类型获得对**Company.Web程序集的引用。**

```
var assembly = Assembly.GetAssembly(context.CurrentHandler.GetType()); 
//assembly = Company.Web 
```

现在，我可以使用反射来调用 Company.Web.FidoHelper.DoSomething(context)。

代码：

```
namespace Company.BLL
{
    public class Fido: IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            //hard-coding like this is not acceptable
            var assembly = Assembly.GetAssembly(context.CurrentHandler.GetType());
            var type = assembly.GetType("Company.Web.FidoHelper");
            object appInstance = Activator.CreateInstance(type);
            type.InvokeMember("DoSomething", BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public, null, appInstance, new object[] { context });
            context.Response.End();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:59:11.763

用这个：

```
Assembly helperAssy = Assembly.GetAssembly(typeof(FidoHelper)); 
```

这是 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/system.reflection.assembly.getassembly%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getassembly%28v=vs.100%29.aspx)

****更新****

好的，所以如果您没有参考，`Company.BLL`那么您将不得不检查 AppDomain 中加载的*所有程序集。*这会很混乱，因为您将不得不查看名称等才能找到您想要的东西。

但是这样的事情：

```
Assembly[] assemblies = AppDomain.Current.GetAssemblies();
Assembly theOne;
foreach(Assembly assy in assemblies)
{
   if(assy.FullName == "Company.Web")
   {
       theOne = assy;
       break;
   }
}
// Do the rest of your work 
```******

# java - ArrayList 输入 java

> ID：12056220
> 
> 赞同：6
> 
> 时间：2012-08-21T13:43:04.507
> 
> 标签：java, input, arraylist

我在看问题：

> 编写一个程序，读取一个整数序列并按升序显示它们。

我正在创建一个 ArrayList （我是新手），我想用从命令行输入的整数填充。有了一个数组，我可以使用一个 for 循环

```
 for (int i =0; i < array.length; i++) {
      array[i] = scanner.nextInt(); 
```

但是使用无限大小的 ArrayList 我不确定如何处理输入？

编辑：

```
class SortNumbers {

public static void main(String[] args) {

List numbers = new ArrayList();
Scanner scanner = new Scanner(System.in);
System.out.println("Enter some numbers.");

while (scanner.hasNextInt()) {
int i = scanner.nextInt();
numbers.add(i);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T13:48:09.953

使用 ArrayList 的想法是避免确定性迭代计数。尝试这样的事情：

```
ArrayList<Integer> mylist = new ArrayList<Integer>();
while (sc.hasNextInt()) {
    int i = sc.nextInt();
    mylist.add(i);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T13:47:57.243

我宁愿遍历扫描仪并添加到列表中：

```
List<Integer> list = new ArrayList<Integer>();
while(scanner.hasNextInt())
      list.add(scanner.nextInt());
} 
```

然后排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T13:44:23.283

您需要使用[ArrayList 添加](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28int,%20E%29)方法

例子：

```
arraylist.add(nextVale); 
```

`for`使用 arraylist 时不需要循环。当您添加内容时，列表大小会自动增加。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T13:47:15.560

首先，如果您有一个`ArrayList`，您将不会使用它`[]`来访问/设置元素。那是针对数组的，它与`ArrayList`. 你会用这个`add`方法，

其次，您需要对 ArrayList 进行排序。[在 API 中](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)签出。`Collections.sort`

最后，要遍历 List，有许多可用的构造。最常见的一种是..

```
List<Integer> numbers = new ArrayList<Number>();

numbers.add(1);
numbers.add(2);
...

for (Integer number : numbers) {
   System.out.println(number);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T13:57:09.017

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class sortArrayList {

    public static void main(string args[]) {
        List<Integer> arrList = new ArrayList<Integer>();
        while (scanner.hasNextIint()) {
            arrList.add(scanner.nextInt());
        }
        Collections.sort(arrList);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-19T07:08:18.957

这并不难。由于您使用的是数组列表，因此非常简单！

```
import java.util.*;
class Arr{
public static void main(String args[]){
Scanner sc=new Scanner(System.in);//initializing scanner class
String cont="";//String to check whether the user wants to input anymore numbers or not
List<Double> n=new ArrayList<Double>();//List that will store our numbers
while(!(cont.equals("no"))){//taking continuous input

        System.out.println("Enter number:");
        n.add(sc.nextDouble());

        System.out.println("Do you want to continue?(type 'yes'/'no')");
        cont=sc.next();
    }
Collections.sort(n);//sorts your ArrayList
System.out.println("Sorted list:");
for (Double value : n) {//displaying sorted list
        System.out.println( value);
}
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-07T06:38:54.033

您还可以使用 for 循环：

```
ArrayList<Integer> list = new ArrayList<Integer>();
for (int i = 0; i < 5; i++) {
    list.add(sc.nextInt());
} 
```

# android - 使用单点登录的密钥不匹配（仅）

> ID：12056232
> 
> 赞同：0
> 
> 时间：2012-08-21T13:44:04.450
> 
> 标签：android, facebook

我将 Android 密钥哈希放在开发人员设置中，如下所述：

[http://developers.facebook.com/docs/mobile/android/build/#sig](http://developers.facebook.com/docs/mobile/android/build/#sig)

它有效，已经使用该应用程序几个月了。

现在我想启用单点登录。

执行了同一页面中描述的步骤（在 Android 应用程序中并在开发人员帐户中启用单点登录）。但我进入应用程序：

invalid_key：Android 密钥不匹配。您的密钥“ xxxxxxxxxxxxxxxxxxxxxxxx

" 与您的应用程序设置中指定的允许键不匹配。请在[http://www.facebook.com/developers检查您的应用程序设置](http://www.facebook.com/developers)

（我删除了 SO 的密钥）。

问题是什么？如果我不使用单点登录，一切正常。当不使用单点登录时（不要相信），是否可能未使用密钥。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:48:09.300

好的，似乎只有单点登录才需要密钥哈希。所以我的可能是错误的，并且在不使用单点登录时会被忽略。

编辑：确认，更改密钥解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:41:02.257

我曾经遇到过这个错误，这是使用单点登录并且在您的应用程序的 Facebook 部分没有正确的密钥哈希的结果。

要解决此问题并能够使用单点登录，请获取错误消息中的密钥并将其粘贴到 Android 密钥哈希字段中。

这应该可以解决您的问题。密钥哈希仅在您启用单点登录时使用，这就是在您关闭 SSO 时它会被忽略的原因。

# jquery - JQuery“点击”事件触发两次

> ID：12056234
> 
> 赞同：3
> 
> 时间：2012-08-21T13:44:07.847
> 
> 标签：jquery, events, tap

我对 JQuery 移动“点击”事件有一个真正的问题。它触发了两次，我似乎无法阻止它。

问题是我有一个页面 index.html，当您点击一个按钮时，您会转到 page2.html。问题是，当您进行快速点击时，您将移动到 page2.html，然后它会再次点击该页面，这会导致严重的问题。无论如何我可以解决这个问题吗？我试过 return false; 但它不起作用。这是我使用的代码：

```
$("#read").on('tap',function()
{
    $.mobile.changePage('pages/reader/reader.html');
    return false;
}); 
```

更新：在做了很多测试之后，它似乎不是被触发两次的事件。似乎有时会在另一个页面上进行额外的点击，因此点击下一页上的其他按钮。这是一个严重的问题，我不能像这样发布它。

任何人都知道为什么 JQuery mobile 会以这种糟糕的方式表现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:54:34.620

我对 jquerymobile 没有太多经验，但这很可能是 eventPropagation 的原因，停止将事件传播到其父级可能会有所帮助。

尝试这个：

```
$("#read").on('tap',function(e)
{
    $.mobile.changePage('pages/reader/reader.html');
    e.stopPropagation();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:47:30.113

尝试：

```
$("#read").on('tap',function()
{
    var $this = $(this);

    if (!$this.hasClass("tapped")) {
        $this.addClass("tapped");
        $.mobile.changePage('pages/reader/reader.html');
    }
}); 
```

如果您需要重新启用该按钮，只需 removeClass("tapped")，您可能知道。

# asp.net - 使用 Linq-To-SQL 在 SQL Server 2000 数据库上的用户“sa”登录失败

> ID：12056242
> 
> 赞同：0
> 
> 时间：2012-08-21T13:44:23.057
> 
> 标签：asp.net, sql, visual-studio-2010, visual-studio-2008, sql-server-2000

我可以通过企业管理器和查询分析器与 sa 用户联系。我`.dbml`在 Visual Studio 2008 中创建了文件和连接字符串，然后手动将其导入到 Visual Studio 2010 ASP.Net MVC3 项目中。

我的印象是这是在 VS 2010 中使用 SQL Server 2000 数据库的公认方式。

我已将连接字符串复制到 ASP.Net 网站中的 Web.config。
[这是堆栈跟踪](https://gist.github.com/3415588)

我根本不确定问题是什么。我希望这不是因为 VS 2010 项目永远无法连接到 SQL Server 2000。

**编辑**
连接字符串是

```
<add name="MobiledbConnectionString" 
     connectionString="Data Source=JAMESWRIGHT2771\SQLLOCAL;Initial Catalog=mobiledb;User ID=sa;Password=MYPASSHERE"
     providerName="System.Data.SqlClient" /> 
```

显然`MYPASSHERE`是我的密码所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:06:28.393

不确定它是否相关，也许有点晚了，但我在我的连接字符串中添加了选项“Persist Security Info=True”，它就成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:54:05.773

AFAIK，通信没有改变——它完全向后兼容。不过，您可能在数据库中尝试和做的事情发生了很大变化。IE，linq to sql 的模式生成可能会做一些 Sql 2000 不喜欢的事情，除非它具有该模型的兼容模式。

当您访问的数据库不存在时，您经常会收到此错误。你已经创建了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T01:53:46.397

我想出了这个问题，虽然我以前从未处理过这件事。
当我将 dbml 文件导入 VS 2010 时，它被放入“类库”项目中，由于某种原因，它使用的是“Settings.settings”文件中的连接字符串，而不是 app.config 中的连接字符串或Web.config 文件（我通过完全删除 Web.config 和 app.config 连接字符串进行了验证）。

我从未听说过此 Settings.settings 文件，但我现在通过更改该值使其工作。

# c# - 如何处理（国家/地区）代码列表中已弃用的值

> ID：12056255
> 
> 赞同：2
> 
> 时间：2012-08-21T13:45:09.203
> 
> 标签：c#, .net, vb.net, database-design

假设我们有一个所有国家的代码列表，包括他们的国家代码。国家代码是国家表的主键，它在数据库的许多地方用作外键。在我的应用程序中，国家通常显示为多个表单的下拉列表。

过去存在的一些国家已经不复存在，例如[塞尔维亚和黑山](http://en.wikipedia.org/wiki/Serbia_and_Montenegro)，其国家代码为 SCG。

我有两个目标：

*   不允许用户使用这些旧值（因此在插入数据时这些值不应在下拉列表中可见）
*   用户应该仍然能够（只读）打开旧的东西，在这种情况下，不推荐使用的值应该在下拉列表中可见。

我看到两个选项：

*   重命名不推荐使用的值，例如从“CountryName”到“!!!!!CountryName”。这种方法最容易实现，但也有明显的缺点。
*   将 IsActive 列添加到国家表中，并将所有不推荐使用的值设置为 false，将所有其他值设置为 true。在用户可以插入数据的所有表单上，仅显示活动值。在只读表单上，我们可以显示所有值（包括已弃用的值），以便用户能够显示旧数据。但是在我的一些表单上，用户应该也可以编辑数据，这意味着不推荐使用的值应该对他隐藏。这意味着，每个 Dropbox 都应该有一些像这样的初始化逻辑：如果显示的数据是只读的，则在 Dropbox 中包含不推荐使用的值，如果数据也用于编辑，则排除它们。但这也是很多工作并且容易出错。

还有其他想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:01:00.067

正如您所描述的，我经常处理这种情况，并使用“活动”标志来解决问题。当我用值填充下拉列表时，我只加载“活动”数据并包含最多 1 个不推荐使用的值，但前提是它正在被使用。（即，如果我正在查看人员记录，并且该人员的国家/地区已弃用，则该国家/地区将与活动国家/地区一起包含在下拉列表中。我在只读和编辑模式下执行此操作，因为在我的案例，如果一个人记录（例如）列出了一个已弃用的国家，他们可以继续使用它，但是一旦他们将其更改为非弃用的国家，然后保存它，他们就永远无法切换回来（你的用例可能会有所不同）。

所以关键的区别是，即使在只读模式下，我也不会将所有已弃用的国家/地区添加到 DDL，而只是将已弃用的国家/地区添加到我正在查看的记录中，即使那样，也只有当该记录是已经在使用了。

这是我在加载下拉列表时使用的逻辑示例：

```
 protected void LoadSourceDropdownList(bool AddingNewRecord, int ExistingCode)
    {
        using (Entities db = new Entities())
        {
            if (AddingNewRecord) // when we are adding a new record, only show 'active' items in the drop-downlist.
                ddlSource.DataSource = (from q in db.zLeadSources where (q.Active == true) select q);

            else // for existing records, show all active items AND the current value.
                ddlSource.DataSource = (from q in db.zLeadSources where ((q.Active == true) || (q.Code == ExistingCode)) select q);

            ddlSource.DataValueField = "Code";
            ddlSource.DataTextField = "Description";
            ddlSource.DataBind();

            ddlSource.Items.Insert(0, "--Select--");
            ddlSource.Items[0].Value = "0";
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:51:49.863

如果您将记录显示为只读，为什么还要加载常规数据呢？

这是我要做的：

无论如何，该记录都将包含国家代码，我还建议返回国家描述（诚然这会降低效率），但是当用户加载“旧东西”时，业务服务会认识到该记录将是只读的，而且您不必费心加载国家/地区列表（这会使事情变得更有效率）。

在我的演示服务中，我通常会检查国家列表是否为空。如果不是 (r/w) 将数据加载到列表框中，如果是 (r/o) 从记录中的数据填充列表框 - 列表中的单个条目等于只读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:57:01.373

您可以使用 CollectionViewSource 进行过滤，也可以只创建一个使用 LINQ 过滤完整列表的 Public Enumerable。

[CollectionViewSource 类](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)

LINQ FieldDef.DispSearch 是活动条件。IEnumerable 的性能比 List 好一点。

```
public IEnumerable<FieldDefApplied> FieldDefsAppliedSearch
{
    get
    {
        return fieldDefsApplied.Where(df => df.FieldDef.DispSearch).OrderBy(df => df.FieldDef.DispName);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:57:21.357

为什么您仍想显示（例如）带有旧国家代码的客户地址？
如果我理解正确，您目前仍然有指向“塞尔维亚和黑山”的“地址”记录。我认为，如果您解决了该问题，那么您当前的问题将不存在。

“国家”一词可能有点误导：并非 ISO 3166 中的所有“国家”实际上都是独立的。相反，它们中的许多是地理上独立的领土，在法律上是其他国家的一部分或附属国。

另请注意，“撤回的国家/地区代码”保留 5 年，*这意味着 5 年后可以重复使用。因此，不再使用国家/地区代码本身作为主键对我来说是有意义的*，特别是如果由于历史原因您需要回溯以前的国家/地区代码。

那么为什么不制作指向新国家/地区ID的“撤回”字段/表。您仍然可以检查（例如，在 sql 中，因为您已经在使用表）该字段是否为空，以便在需要时进行真/假检查。

我的看法是：“国家”代码可能会改变，国家可能会合并，国家可能会分裂。

如果国家/地区发生变化或合并，您可以通过简单的查询来更新您的地址记录。

如果国家有分歧，您需要一种方法来确定哪个地址属于哪个国家。你可以使用一些自动化系统来做到这一点（并写冗长的书）。
或者
（当它是一个类似网站的论坛时），您可以要求仍然有一个退出国家/地区的用户指向他们帐户中的多个替代项，以便在登录时更新他们的国家/地区条目，他们只能从新国家/地区列表中进行选择在撤回的字段中指定。

想想这个简化的国家表设置：

```
id  cc  cn                     withdrawn
1   DE  Germany
2   CS  Serbia and Montenegro  6,7
3   RH  Southern Rhodesia      5
4   NL  The Netherlands        
5   ZW  Zimbabwe
6   RS  Serbia
7   ME  Montenegro 
```

在此示例中，国家 ID 为 3 的地址记录通过对国家 ID 5 的查询进行更新，无需用户交互（或其他解决方案）。
但是，指定 country-id 2 的地址记录将被要求选择 country-id 6 或 7（当然在呈现给用户的文本中，您使用国家名称）或选择执行您的自定义自动更新例程。

另请注意：“撤回”是一个重复组，因此您可以/应该将其放入单独的表格中。

在您的场景中实施此想法（无需停机）：

*   sql 语句以数字 id 作为主键构建一个新的国家/地区表。
*   sql 语句使用新字段“country-id”更新地址记录，并使用与该记录的地址字段中指定的国家/地区代码对应的新国家/地区表中的国家/地区 ID 填充此字段。
*   （sql 语句）创建撤回的表并在其中填充正确的数据。
*   然后重写为表单提供数据的 sql 语句
*   添加检查并“要求用户更新国家/地区”-例程
*   让新形式上线
*   等待/查看意外错误
*   从“地址”表中删除旧的国家/地区表和（现在未使用的）国家/地区代码列

*我很好奇其他专家对这个想法的看法！！*

# haskell - 为什么向工作函数添加 as-pattern 会导致编译错误？

> ID：12056257
> 
> 赞同：7
> 
> 时间：2012-08-21T13:45:18.737
> 
> 标签：haskell, types, as-pattern

[这是](http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/src/Control-Monad-Instances.html)标准的 Functor 实例`Either a`：

```
instance Functor (Either a) where
        fmap _ (Left x) = Left x
        fmap f (Right y) = Right (f y) 
```

在加载到 GHCi 时添加 as-pattern 会导致编译错误：

```
instance Functor (Either a) where
        fmap _ z@(Left x) = z          -- <-- here's the as-pattern
        fmap f (Right y) = Right (f y)

Couldn't match expected type `b' against inferred type `a1'
  `b' is a rigid type variable bound by
      the type signature for `fmap' at <no location info>
  `a1' is a rigid type variable bound by
       the type signature for `fmap' at <no location info>
  Expected type: Either a b
  Inferred type: Either a a1
In the expression: z
In the definition of `fmap': fmap _ (z@(Left x)) = z 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T13:57:30.457

`fmap`有签名`(a -> b) -> f a -> f b`，即它必须允许`a`和`b`不同。在您的实现中，`a`并且`b`只能是相同的，因为它返回作为参数传递的相同内容。所以GHC抱怨。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T01:52:20.107

例如`Either a`，`fmap`具有以下类型：

```
(i -> j) -> Either a i -> Either a j 
```

在这个等式中：

```
fmap _ (Left x) = Left x 
```

已知第二个参数是 type`Either a i`并且与 pattern 匹配`Left x`。我们`x`取出，并应用`Left`到它得到结果`fmap`。

诀窍是`Left`等式左边的和`Left`右边的不是一回事！在 LHS`Left`上是这个构造函数：

```
Left :: a -> Either a i 
```

而在 RHS 上`Left`是这个构造函数：

```
Left :: a -> Either a j 
```

模式中使用的 RHS`Left`不会匹配`fmap`' 的第二个参数的类型`Either a i`，并且 LHS`Left`不会构造所需类型的值作为`fmap`' 结果`Either a j`。

因此`Left`，从语义上讲，无法对这两种事物使用相同的方法；您必须构建一个`Left x :: Either a j`包含`x`在`Left x :: Either a i`. *在操作*上，Haskell 实现可能会或可能不会相同地表示这两个术语，并且可能会或可能不会共享具有不同类型的两个值的单个内存表示，并且可能会或可能不会足够聪明以优化构造一个新值的表示方式与它现有的另一个值相同。但是这些实现问题与程序的*含义*不同，类型检查器的角色纯粹与含义有关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T13:58:29.097

我最好的猜测是这失败了，因为`z`在等式的每一边都代表了不同的类型：

*   整体类型是`fmap :: (a -> b) -> Either t a -> Either t b`

*   在左侧，`z :: Either t a`

*   在右侧，`z :: Either t b`

似乎`Left x`允许在同一个方程中有多个不同的类型，但`z`不是。

这个实现也失败了，显然是出于同样的原因：

```
instance Functor (Either a) where
        fmap f (Right y) = Right (f y)
        fmap _ z = z          

Couldn't match expected type `b' against inferred type `a1'
  `b' is a rigid type variable bound by
      the type signature for `fmap' at <no location info>
  `a1' is a rigid type variable bound by
       the type signature for `fmap' at <no location info>
  Expected type: Either a b
  Inferred type: Either a a1
In the expression: z
In the definition of `fmap': fmap _ z = z 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T19:24:00.260

如果你专门化`fmap`to的签名`Either l`，你会得到：

```
fmap :: (a -> b) -> Either l a -> Either l b 
```

这意味着`Left r`您在 case 语句左侧进行模式匹配的 必须具有 type `Either l a`。但是，您不能按原样返回它，因为您必须返回一个`Either l b`. 这需要将左侧的值重新包装在一个新的值中，`Left`以便编译器可以推断它正在返回一个新生成的值`Either`，该值可能具有不同的类型`Right`。

# objective-c - Objective-C 访问块内的属性

> ID：12056258
> 
> 赞同：8
> 
> 时间：2012-08-21T13:45:21.810
> 
> 标签：objective-c, ios, objective-c-blocks

我已经阅读了 Apple 的 Blocks Programming Topics 和我的尽职调查在线搜索，但我仍然不清楚我是否正确实施了我的块。我有一组客户端作为发送 NSNotification 时填充的属性。Clients 用作 tableview 数据源。下面的代码有效，但我很好奇它是否将 self 置于保留周期中。我应该做类似的事情`__block id theClients = self.clients;`然后`theClients`在块内引用吗？

`@property (strong, nonatomic) NSMutableArray *clients;`

```
NSNotificationCenter *notifyCenter = [NSNotificationCenter defaultCenter];
__block id observer = [notifyCenter addObserverForName:queryHash
                                                object:nil
                                                 queue:[[NSOperationQueue alloc] init]
                                            usingBlock:^(NSNotification* notification){
                                                // Explore notification

    if ([[notification.userInfo objectForKey:kdatasetReturnKey] objectAtIndex:0]) {
        NSArray *rows = [[notification.userInfo objectForKey:kdatasetReturnKey] objectAtIndex:0];
        if (self.clients)
        {
            self.clients = nil;
        }
        self.clients = [[NSMutableArray alloc] initWithCapacity:rows.count];
        for (NSDictionary *row in rows) {
            [self.clients addObject:row];
        }
    } else {
        NSLog(@"CLIENTS ERROR Returned: %@",[notification.userInfo objectForKey:kerrorReturnKey]);
    }

    [[NSNotificationCenter defaultCenter] removeObserver:observer];
}]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T16:14:03.527

访问 clients 属性没有问题，因为它是一个强（即保留）属性。所以你不需要`__block`这里。

一个问题可能`self`是在发送通知时可能不再存在。然后您将访问已释放的对象，应用程序可能会崩溃！为避免这种情况，您应该删除`dealloc`方法中的观察者。

`__block`之前`id observer`绝对是必需的！

**编辑：**

`self`在 iOS 5 中，您可以使用弱引用安全地捕获：

```
__weak id weakSelf = self; 
```

然后在块内您可以安全地使用`weakSelf.clients`. 当对象被释放时，变量weakSelf 将自动变为nil。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T17:14:33.053

是的，您有一个保留周期，至少在通知发生之前是这样。当您访问块中的`clients`ivar 时，该块将保留自身。它将由通知中心的块保留，直到通知发生（因为您在块的末尾删除了观察者）。如果您不希望这样做，您可以使用对 self 的弱引用。

```
NSNotificationCenter *notifyCenter = [NSNotificationCenter defaultCenter];
__weak id weakSelf = self;
id observer = [notifyCenter addObserverForName:queryHash
                                        object:nil
                                         queue:[[NSOperationQueue alloc] init]
                                    usingBlock:^(NSNotification* notification) {
    if (weakSelf) {                                
        if ([[notification.userInfo objectForKey:kdatasetReturnKey] objectAtIndex:0]) {
            NSArray *rows = [[notification.userInfo objectForKey:kdatasetReturnKey] objectAtIndex:0];
            if (weakSelf.clients)
            {
                weakSelf.clients = nil;
            }
            weakSelf.clients = [[NSMutableArray alloc] initWithCapacity:rows.count];
            for (NSDictionary *row in rows) {
                [weakSelf.clients addObject:row];
            }
        } else {
            NSLog(@"CLIENTS ERROR Returned: %@",[notification.userInfo objectForKey:kerrorReturnKey]);
        }
    }    
    [[NSNotificationCenter defaultCenter] removeObserver:observer];
}]; 
```

我看不出你有什么理由需要`__block`获得资格`observer`。

也不清楚你在这里使用基于块的 API 有什么好处。如果您不想担心潜在的保留周期，您可以使用`addObserver:selector:name:object:`并将通知回调的主体放在实例方法中。

# javascript - 在 JavaScript 中计算时差（天+小时+分钟+秒）

> ID：12056263
> 
> 赞同：-3
> 
> 时间：2012-08-21T13:45:33.333
> 
> 标签：javascript, countdown

大声笑对不起我不小心发布了它

我是 JavaScript 新手，我正在尝试制作一个简单的倒计时脚本，该脚本应该显示结束日期和今天的服务器日期之间的差异。

这是我正在尝试做的一个很好的例子[http://moblog.bradleyit.com/2009/06/javascripting-to-find-difference.html](http://moblog.bradleyit.com/2009/06/javascripting-to-find-difference.html)

我唯一要添加的是另一个具有计算秒数的变量。我怎样才能做到这一点？

这是代码：

```
    var 今天 = 新日期（）；
     var Christmas = new Date("12-25-2009");
     var diffMs = (圣诞节 - 今天); // 现在和圣诞节之间的毫秒数
     var diffDays = Math.round(diffMs / 86400000); // 天
     var diffHrs = Math.round((diffMs % 86400000) / 3600000); // 小时
     var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000); // 分钟
     alert(diffDays + " days, " + diffHrs + " hours, " + diffMins + " 离圣诞节 2009 分钟 =)");

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:40:09.933

这段代码有两个问题：

1：您需要使用一个可以跨浏览器接受的日期，因此需要使用 / 而不是 - 进行格式化。

2：你正在四舍五入，四舍五入时会给你不准确的数字。所有数字都需要四舍五入。这是一个这样做的功能：

```
var roundDown = function(num){
    var full = num.toString();
    var reg = /([\d]+)/i;
    var res = reg.exec(full);
    return res[1];
} 
```

所以你的最终代码应该是这样的：

```
var roundDown = function(num){
    var full = num.toString();
    var reg = /([\d]+)/i;
    var res = reg.exec(full);
    return res[1];
}

var today = new Date(); // date and time right now
var goLive = new Date("06/01/2013"); // target date
var diffMs = (goLive - today); // milliseconds between now & target date
var diffDays = roundDown(diffMs / 86400000); // days
var diffHrs = roundDown((diffMs % 86400000) / 3600000); // hours
var diffMins = roundDown(((diffMs % 86400000) % 3600000) / 60000); // minutes
var diffSecs = roundDown((((diffMs % 86400000) % 3600000) % 60000) / 1000 ); // seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:54:34.243

```
var endDate = new Date(year, month, day, hours, minutes, seconds, milliseconds);
var today = Date.now()
var timeLeft = endDate - today // timeLeft would be in milliseconds
// Parse this into months, days, hours, ... 
```

将它放在一个函数中，并将其设置为每秒左右使用`setInterval`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:55:25.467

这应该让您开始使用 JavaScript 日期对象及其相关方法。 [http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

此外，查找 setInterval() 方法，它允许您以设定的时间间隔触发代码（例如，更新倒计时文本）。

# ruby-on-rails - 在 Rails DateTime.parse 中更正夏令时的时间

> ID：12056264
> 
> 赞同：19
> 
> 时间：2012-08-21T13:45:35.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, timezone

只是增加了关于时区和 DST 问题的数百万个问题。

我有一个带有单独日期和时间字段的表单，我将它们组合起来创建一个 DateTime 像这样

```
start_time = DateTime.parse("#{parse_date(form_date)} #{form_start_time} #{Time.zone}") 
```

如果我在 2012 年 8 月 21 日和 15:00 填写表格，那么这些就是我在重新加载表格时看到的值。如果我在我的模型中查看我的 start_time 属性，它被正确设置为`Tue, 21 Aug 2012 15:00:00 EST +10:00`.

如果我在夏令时开始后使用今年晚些时候的日期（我在澳大利亚），则会出现我遇到的问题。如果我使用 2012 年 12 月 21 日和 15:00，请检查我看到的 start_time `Fri, 21 Dec 2012 16:00:00 EST +11:00`。

我对问题的解释是日期保存在我当前的时区 (+10:00) 中，因为这是我告诉 DateTime.parse 要做的。但是，当返回值时，Rails 会查看日期并说“嘿，现在是 12 月的夏令时”并返回 +11:00 时区的时间。

如果 DST 生效，我想要做的是告诉 DateTime.parse 将时间保存在 +11:00 时区。显然将 Time.zone 传递到我的字符串中并不能实现这一点。有没有一种简单的方法可以做到这一点？我可以看到使用 Time#dst 的方法吗？但我怀疑这会创建一些非常难看的复杂代码。我认为可能有一种我缺少的内置方式。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-12-06T18:03:02.013

（Rails 4.2.4 的答案，未检查旧版本或新版本）

我建议不要使用固定班次 +01:00、+02:00 等，而是使用`in_time_zone`带有时区名称作为参数的 String 方法：

夏季时间：

```
ruby :001 > "2016-07-02 00:00:00".in_time_zone('Paris')
 => Sat, 02 Jul 2016 00:00:00 CEST +02:00 
```

冬季时间：

```
ruby :002 > "2016-11-02 00:00:00".in_time_zone('Paris')
 => Wed, 02 Nov 2016 00:00:00 CET +01:00 
```

`String#in_time_zone`相当于：

```
ruby :003 > Time.find_zone!("Paris").parse("2016-07-02 00:00:00")
 => Sat, 02 Jul 2016 00:00:00 CEST +02:00 

ruby :004 > Time.find_zone!("Paris").parse("2016-11-02 00:00:00")
 => Wed, 02 Nov 2016 00:00:00 CET +01:00 
```

您可以通过以下方式获取时区名称：

```
$ rake time:zones:all 
```

或在 Rails 控制台中：

```
ruby :001 > ActiveSupport::TimeZone.all.map(&:name) 
```

或为选择标签构建集合：

```
ActiveSupport::TimeZone.all.map do |timezone|
  formatted_offset = Time.now.in_time_zone(timezone.name).formatted_offset
  [ "(GMT#{formatted_offset}) #{timezone.name}", timezone.name ]
end 
```

并存储时区名称而不是班次。

**注意**：不要混淆`String#in_time_zone`方法和`Time#in_time_zone`方法。

考虑我系统的时区是“巴黎”。

```
ruby :001 > Time.parse("2016-07-02 00:00:00")
 => 2016-07-02 00:00:00 +0200 
ruby :002 > Time.parse("2016-07-02 00:00:00").in_time_zone("Nuku'alofa")
 => Sat, 02 Jul 2016 11:00:00 TOT +13:00 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-22T02:28:32.410

到目前为止，这是我的解决方案。我希望有人有更好的。

```
start_time = DateTime.parse "#{date} #{(form_start_time || start_time)} #{Time.zone}"
start_time = start_time - 1.hour if start_time.dst? && !Time.now.dst?
start_time = start_time + 1.hour if Time.now.dst? && start_time.dst? 
```

它似乎有效，但我没有严格测试它。我怀疑它可以被美化和缩短，但我认为这是可读和可以理解的。有什么改进吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-02T06:23:41.770

我遇到了这个确切的问题。我的应用程序允许用户查看即将发生的事件。在美国，我们在 11 月 2 日进入 DST，并且该日期及之后的所有事件都提前一小时显示时间。

我们需要有机会选择时区并将其存储到自己的字段中。在我使用以下内容存储我的日期时间之前：

```
timezone_offset = Time.now.in_time_zone(params[:opportunity][:time_zone]).strftime("%z") #-0700
DateTime.parse("#{params[:opportunity][:start_datetime]} #{timezone_offset}") 
```

为了解决这个问题，我已更改为：

```
start_datetime = Time.zone.parse(params[:opportunity][:start_datetime]) 
```

要显示正确的时间，我们使用：

```
@opportunity.start_datetime.in_time_zone(@opportunity.time_zone) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T03:11:32.893

我会尝试使用

```
Australian Eastern Standard Time (AEST) (UTC +10).  
Australian Central Standard Time (ACST) (UTC +9 ½).  
Australian Western Standard Time (AWST) (UTC +8). 
```

调整夏令时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-17T21:54:10.953

在 Rails 中，我们可以使用 ActiveSupport::TimeZone：

```
tz = ActiveSupport::TimeZone.new 'Pacific Time (US & Canada)'
tz.parse(date_str_without_zone).to_datetime 
```

我使用[TZip](https://github.com/farski/TZip)从邮政编码中获取 TimeZone 字符串（例如“太平洋时间（美国和加拿大）”）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-18T00:31:07.737

如果您有自定义的日期/时间格式，不同于 所支持的`String#in_time_zone`，您还可以使用（自 rails 5 起）[`strptime`](https://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-parse)，例如：

```
Time.find_zone!('Auckland').strptime('2021-02-02 08.00.00', '%Y-%m-%d %H.%M.%S') 
```

# javascript - 在 Eclipse 中编辑 text/html 内容

> ID：12056265
> 
> 赞同：3
> 
> 时间：2012-08-21T13:45:42.170
> 
> 标签：javascript, html, eclipse, formatting

通过将它们包装在“script type="text/html"”标签中（在我的情况下是在 JSP 中），我越来越多地使用 javascript 呈现的模板。问题是 Eclipse (Indigo) 不应用任何格式，例如语法着色、缩进、建议等。有没有办法告诉 Eclipse 将这些内容视为 HTML？

（编辑）

感谢人们的回答，但也许我应该澄清这个问题。Eclipse 中的 JSP 编辑工作得很好——只是到处都有一些麻烦。JSP 中的不同格式（包括 JSP、Javascript、HTML 和 scriptlet）都可以正常工作。我只是想知道是否有一个配置可以在其中定义一个**<script type="text/html">**部分以呈现为 HTML。如果答案是否定的，那就这样吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-24T17:04:10.187

我知道我很晚了，但万一有人遇到同样的问题，比如我

我不想使用任何插件，最后我为我们使用 JSP 的特殊情况想出了一个简单的解决方法：使用 JSTL 命令“out”

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<c:out value=" <script id='emptyTemplate' type='text/template'> " escapeXml="false" />

    <div class="emptyTemplateDiv">
        Nothing here
    </div>

<c:out value=" </script> " escapeXml="false" ></c:out> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:47:17.690

可能无法在 JSP 中获取特定内容 (Javascript) 以获取语法颜色。检查这个：[如何在 JSP 编辑器中激活 javascript 的语法着色 - Eclipse](https://stackoverflow.com/questions/5697958/how-to-activate-syntax-coloring-for-javascript-in-jsp-editor-eclipse)

此外，这可能很有用：[Eclipse 是否有一个好的 JSP 编辑器？](https://stackoverflow.com/questions/211841/is-there-a-good-jsp-editor-for-eclipse)

上述答案中的 Amateras 编辑器可在此处获得：http: [//sourceforge.jp/projects/amateras/downloads/51002/tk.eclipse.plugin.htmleditor_2.1.0.jar](http://sourceforge.jp/projects/amateras/downloads/51002/tk.eclipse.plugin.htmleditor_2.1.0.jar)并且必须下载并手动安装到插件文件夹中。

我刚刚在 Indigo SR2 上尝试过，它为 JSP 文件提供了一个编辑器。我没有足够复杂的 JSP 文件来测试它，但是从我测试它的代码来看，语法着色似乎与 Eclipse **[Web Tools Platform](http://www.eclipse.org/webtools/)**贡献的“JSP 编辑器”没有太大的不同。

**快照** ![在此处输入图像描述](../Images/cd0efe27f408b715db2efa746e029d02.png)

在这里查看上面的全尺寸快照：http: [//i.stack.imgur.com/es0OJ.png](https://i.stack.imgur.com/es0OJ.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:50:34.743

您需要一个 Eclipse 插件。比如[这个](http://amateras.sourceforge.jp/cgi-bin/fswiki_en/wiki.cgi?page=EclipseHTMLEditor)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:52:11.967

Aptana Studio 3 .. 下载并安装..

选择一个主题。享受JS

# objective-c - Cocos2d Lua 最新版本

> ID：12056267
> 
> 赞同：0
> 
> 时间：2012-08-21T13:45:49.020
> 
> 标签：objective-c, ios, cocos2d-iphone, lua

我在这里经历了一场重大危机，我想征求意见。过去几个月我一直在开发一款完全基于 lua 脚本的游戏。该项目是一个基于 cocos2d 的项目，包含 mclua 库（更多关于 mcLua 的信息可以在这里找到[http://www.grzmobile.com/blog/2009/12/1/integrating-lua-into-and-iphone-应用程序部分 2.html](http://www.grzmobile.com/blog/2009/12/1/integrating-lua-into-and-iphone-app-part-2.html)）。

现在我快要完成项目的实施了，我刚刚发现我使用的 lua 版本是 5.1.4 显然没有对这个项目非常重要的 goto 语句。然而，最新版本的 lua 5.2 现在支持 goto 语句。

我的问题是，当我尝试将 lua 版本 5.2 添加到我的项目中时，库 mclua 会引发一堆错误，而且似乎该库不适用于 5.1.4 以外的任何其他版本的 lua。

我现在该怎么办？我应该快完成这个项目了。这是否意味着我现在完全搞砸了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:42:47.600

然后你就可以做出选择了。您可以：

1.  停止做任何`goto`“对这个项目非常重要”的事情。我使用 Lua 已经有一段时间了，我从来没有那么*需要* `goto`过。无论你在做什么，都可以通过其他方式来完成。
2.  修改此“mclua”库以修复当您尝试将其链接到 Lua 5.2 时遇到的“一堆错误”。由于您没有解释这些错误是什么，我们无法真正帮助您解决这些错误。

请注意，Lua 的次要版本号并不是为了保证与以前的版本向后兼容。虽然更改通常相对较小，但这并不意味着需要付出努力以使代码无需修改即可在两者中工作。

# c++ - 翻译 CIM、C++ 和 VARIANT 类型

> ID：12056269
> 
> 赞同：1
> 
> 时间：2012-08-21T13:45:54.737
> 
> 标签：c++, visual-c++, variant, wbem

这是 CIM 类型的列表，我需要知道 C++ 和 VARIANT 类型中的等价物。

CIM_ILLEGAL

CIM_EMPTY

CIM_SINT8

CIM_UINT8

CIM_SINT16

CIM_UINT16

CIM_SINT32

CIM_UINT32

CIM_SINT64

CIM_UINT64

CIM_REAL32

CIM_REAL64

CIM_BOOLEAN

CIM_STRING

CIM_DATETIME

CIM_REFERENCE

CIM_CHAR16

CIM_OBJECT

CIM_FLAG_ARRAY

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:50:33.253

CIM：CIM_ILLEGAL

C++：-

变体：-

* * *

CIM：CIM_EMPTY

C++：-

变体：VT_EMPTY

* * *

CIM：CIM_SINT8

C++：有符号字符

变体：VT_I1

* * *

CIM：CIM_UINT8

C++：无符号字符

变体：VT_UI1

* * *

CIM：CIM_SINT16

C++：有符号短

变体：VT_I2

* * *

CIM：CIM_UINT16

C++：无符号短

变体：VT_UI2

* * *

CIM：CIM_SINT32

C++：有符号整数

变体：VT_I4

* * *

CIM：CIM_UINT32

C++：无符号整数

变体：VT_UI4

* * *

CIM：CIM_SINT64

C++：有符号的 __int64

变体：VT_I8

* * *

CIM：CIM_UINT64

C++：无符号 __int64

变体：VT_UI8

* * *

CIM：CIM_REAL32

C++：浮点数

变体：VT_R4

* * *

CIM：CIM_REAL64

C++：双

变体：VT_R8

* * *

CIM：CIM_BOOLEAN

C++：布尔

变体：VT_BOOL

* * *

CIM：CIM_STRING

C++：BSTR、宽字符串

变体：VT_BSTR

* * *

CIM：CIM_DATETIME

C++：time_t、TDateTime

变体：VT_DATE

* * *

CIM：CIM_REFERENCE

C++：-

变体：-

* * *

CIM：CIM_CHAR16

C++：wchar_t

变体：VT_BSTR 或 VT_I2

* * *

CIM：CIM_OBJECT

C++：-

VARIANT：VT_UNKNOWN 或 VT_DISPATCH，取决于对象类型

* * *

CIM：CIM_FLAG_ARRAY

C++：-

VARIANT：VT_ARRAY 与另一个指定数组类型的 VT 标志结合

# html - 内部不需要的空间 带有浮动元素

> ID：12056272
> 
> 赞同：1
> 
> 时间：2012-08-21T13:46:03.577
> 
> 标签：html, css, dreamweaver

我有一个`<div>`不调整内容（这是两个`<p>`元素）的问题。内容是浮动的。

*   我有一个`<p>`标签浮动到左边
*   我有一个`<p>`标签浮动到右侧
*   我`<div>`下面有一个带有 style="clear:both" 的空标签

尽管如此，`<div>`包含整个内容的 3 行高 - 而不是应该的 1 行。我缺少什么使它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:53:42.637

我准备了一个小提琴，它运行良好 - 它一定是您的代码中的错误。向我们展示其中的一些片段。

**[例子](http://jsfiddle.net/myJ3W/)**

确保不`paddings/margins/height/lineheight`影响您`div`的 s 和`p`s (=reset browserdefaults!)。父母也`div`需要足够宽以容纳两者`p`。此外，如果您有非浮动内容，则顺序很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:53:53.713

`<p>`首先，将两个标签都向左浮动。

然后，确保`<div>`有足够大的宽度来容纳两个`<p>`标签。

在那之后，您应该能够将它们排成一行。

[http://jsfiddle.net/myJ3W/1/](http://jsfiddle.net/myJ3W/1/)

只是为了向您展示为什么向右浮动可能不是一个好主意（这实际上取决于您要做什么......对话框？）

如果使用`float: right;`，则在段落过长后格式会中断：

[http://jsfiddle.net/myJ3W/3/](http://jsfiddle.net/myJ3W/3/)

然而，如果你`float: left;`将它们都放入容器中，你可以确定它们会粘在盒子里：

[http://jsfiddle.net/myJ3W/4/](http://jsfiddle.net/myJ3W/4/)

同样，真的取决于你在这里想要达到的目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:56:31.063

我相信`<p>`元素有一个 default `margin`，尝试设置`margin`为`0px`，这可能会删除间距。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-21T13:54:31.270

最外层是否有足够的空间`<div>`使每条`<p>`线都是一行？如果没有，一个会在另一个之下崩溃。此外，您的清除两者`<div>`也将具有完整的行高。这是我应用于一个名为`cb`我在这些情况下应用的类的风格......

```
.cb
{
    clear:both !important;
    float:none !important;
    height:1px;
    line-height:0;
    margin:0;
    padding:0;
} 
```

# ruby-on-rails - Ruby 从 Class 获取实例方法定义

> ID：12056273
> 
> 赞同：7
> 
> 时间：2012-08-21T13:46:03.607
> 
> 标签：ruby-on-rails, ruby

我正在尝试从 Class 对象中获取方法 :foo 的定义。

```
class Bar
  def foo(required_name, optional="something")
    puts "Hello args are #{required_name}, #{optional}"
  end

  def self.bar
    puts "I am easy, since I am static"
  end
end 
```

我*无法创建*类的实例，因为我需要方法定义来评估是否应该创建对象（应用程序要求）。 `Bar.class.???(:foo)`

我可以得到`bar`定义，`Bar.class.method(:bar)`但我当然需要`foo`，谢谢！

更新：

使用**Ruby 1.8.7**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T13:59:14.587

您可以`instance_method`在这样的类上使用该方法：

```
Bar.instance_method(:foo) 
```

这将返回一个`UnboundMethod`. （见[http://ruby-doc.org/core-1.9.3/UnboundMethod.html](http://ruby-doc.org/core-1.9.3/UnboundMethod.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:54:58.650

您可以发现该类是否具有如下实例方法`:foo`：

```
Bar.instance_methods.include? :foo 
```

一个例子：

```
String.instance_methods.include? :reverse
=> true
String.instance_methods.include? :each
=> false 
```

# sql - 合并 SQL 中的重复记录，其中“用户”重复但 PK 和某些列是唯一的

> ID：12056276
> 
> 赞同：0
> 
> 时间：2012-08-21T13:46:10.103
> 
> 标签：sql, database, merge, duplicates, records

我有 2 个表 'tbMemeberInfo' 和 'tbDocument'。

上传文档时，它会在 tbDocument 中记录一个字段 InfoID，即 tbMemeberInfo 中的 PK(MemberInfoID)。

然而，在 tbMemeberInfo 中有重复项。用户有一个“AgreementNo”和一个“IDNumber”，重复记录只包含 1 或其他。

我需要合并这些记录以将“AgreementNo”和“IDNumber”插入其中一条记录并删除另一条记录。

这是迄今为止我尝试过的表结构和代码......

tb会员信息

```
MemberInfoID   AgreementNo  IDNumber     DOB                  Initials  FirstName   LastName   Language      Role    CountryID     Email
861616         124346665    NULL         1976-08-24 00:00:00.000    DV   DAMIAN     Example     English      Member         1     damian.example@mail.com
866185          NULL      7608241234123  1976-08-24 00:00:00.000    DV   DAMIAN     Example     English      Member         1     damian.example@mail.com 
```

tb文档

```
DocumentID  r_object_id      DocumentTypeID   UniqueDocumentNo  ContentLength   ContentType        FileName                                      CreatedUserID     CreatedDate                 InfoID   
293787      0900d431800bc987    13            PPS156329L         1753819        application/pdf    Example_DV_PROV_APP_2009110316140300[1].pdf     362            2010-01-13 16:21:46.250       861616
293794      0900d431800bc998    530           PPS156335O         66750          image/tiff         Example, DV DRS REPORT.tif                      362            2010-01-13 16:26:48.420       861616 
```

SQL 代码

```
DECLARE
@MemberInfoID int
,@AgreementNo varchar(50)
,@IDNumber varchar
,@DOB datetime
,@TitleID int
,@FirstName varchar(150)
,@LastName varchar(150)
,@ModifiedDate datetime 

SELECT @AgreementNo = AgreementNo, @IDNumber = IDNumber, @FirstName = FirstName, @LastName = LastName, @DOB = DOB
FROM tbMemberInfo mi
INNER JOIN tbDocument d
ON mi.MemberInfoID = d.InfoID
WHERE (mi.AgreementNo = '') OR (mi.IDNumber = '') 

--SELECT @IDNumber = IDNumber  From tbMemberInfo mi
--INNER JOIN tbDocument d
--ON mi.MemberInfoID = d.InfoID
--WHERE (mi.AgreementNo = '') 

--SELECT @AgreementNo = AgreementNo From tbMemberInfo mi
--INNER JOIN tbDocument d
--ON mi.MemberInfoID = d.InfoID
--WHERE (mi.IDNumber  = '') AND (FirstName = @FirstName) AND (LastName = @LastName) AND (DOB = @DOB)

UPDATE tbMemberInfo
SET [IDNumber] = @IDNumber, [AgreementNo] = @AgreementNo, ModifiedDate  = GETDATE() 
FROM tbMemberInfo mi
    INNER JOIN tbDocument d
        ON mi.MemberInfoID = d.InfoID   
 WHERE (IDNumber = '') OR (AgreementNo = '') AND (FirstName = @FirstName)
        AND (LastName = @LastName) AND (DOB = @DOB)
 GROUP BY MemberInfoID 
```

这些都不起作用。它将“7”放入所有 IDNumber 列。关于如何做到这一点的任何想法。我还没来得及删除重复项，我想先合并。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:59:20.977

您应该使用**IDNumber is NULL**而不是**= ''**

您的 where 子句有一些问题，您应该编写如下内容：

```
WHERE (IDNumber is Null or AgreementNo is NULL) AND (FirstName = @FirstName AND LastName = @LastName AND DOB = @DOB) 
```

**我的建议是创建一个与tbMemberInfo**具有完全相同架构的 tmp 表（这将帮助您组织步骤并稍微简化任务）；以您想要的方式对条目进行分组并将它们合并到 tmp 表中（如果我理解正确，您正在使用*FirstName、LastName 和 DateOfBirth*来识别不同的条目）。最后截断**tbMemberInfo中的所有内容并用****tmp**表中的内容填充它。这里有更多细节：

```
INSERT INTO tmp
SELECT * FROM tbMemberInfo;

UPDATE tmp t1 INNER JOIN tbMemberInfo t2
        ON    t1.FirstName = t2.FirstName 
        AND   t1.LastName = t2.LastName 
        AND   t1.DOB = t2.DOB 
        SET   t1.AgreementNo = t2.AgreementNo 
        WHERE t1.AgreementNo IS NULL 
        AND   t1.MemberInfoID != t2.MemberInfoID;

UPDATE tmp t1 INNER JOIN tbMemberInfo t2
        ON    t1.FirstName = t2.FirstName 
        AND   t1.LastName = t2.LastName 
        AND   t1.DOB = t2.DOB 
        SET   t1.IDNumber = t2.IDNumber 
        WHERE t1.IDNumber is NULL 
        AND   t1.MemberInfoID != t2.MemberInfoID;

-- Just to make sure there are no entries left without a value
SELECT * FROM tmp WHERE IDNumber is NULL OR AgreementNo is NULL;

-- now we are going to keep the row with the lowest ID
DELETE t1 FROM tmp t1, tmp t2 
    WHERE t1.MemberInfoID < t2.MemberInfoID 
    AND   t1.FirstName = t2.FirstName 
    AND   t1.LastName = t2.LastName 
    AND   t1.DOB = t2.DOB;

-- update the InfoID intbDocument table
UPDATE tbDocument t1 JOIN tbMemberInfo t2 
           ON    t1.InfoID = t2.MemberInfoID
           JOIN  tmp t2 
           ON    t2.FirstName = t3.FirstName 
           AND   t2.LastName = t3.LastName 
           AND   t2.DOB = t3.DOB
               SET   t1.InfoID = t3.tbMemberInfoID
               WHERE t1.InfoID NOT IN (SELECT MemberInfoID FROM tmp);

TRUNCATE tbMemberInfo;

INSERT INTO tbMemberInfo
SELECT * FROM tmp; 
```

注意：我没有测试这些查询，只是很快就写出来了，所以它们可能有问题，但你会明白的，可以自己修复它们。不要在原始数据上运行这些，先复制并测试它们。

# java - Java 7 Update 6 中不存在 com.sun.deploy.net.DownloadEngine.getCachedFile() 方法

> ID：12056279
> 
> 赞同：1
> 
> 时间：2012-08-21T13:46:19.687
> 
> 标签：java

**我需要com.sun.deploy.net.DownloadEngine.getCachedFile(location)**为启动器返回的路径文件。此方法在 Java 5 和 Java 6 中运行良好，但是当我更新到 Java 7 时，它不再可用. 有谁知道我如何通过 cmd 中的该方法或任何其他获取路径文件的方法获取文件路径返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:48:35.520

它在包中的事实表明它是`com.sun`特定于 Sun 实现的，不应依赖它。我认为你需要一种更便携的方式来做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:23:14.450

```
com.sun.deploy.cache.Cache.getCacheEntry(new URL(fileName), null).getDataFile(); 
```

# sql-server - 什么是原始数据库？

> ID：12056283
> 
> 赞同：-2
> 
> 时间：2012-08-21T13:46:30.050
> 
> 标签：sql-server, sql-server-2008

我收到一个请求，因为“此数据将仅在 RAW 数据库中采用这种格式。” 但我不确定什么是 RAW 数据库。他们想整合我们的数据并要求我们准备原始数据库。如何从 SQL Server 2008 R2 制作原始数据库？

糟糕，它可能会像这些评论一样造成一些混乱，但不幸的是，这就是我得到的关于请求的所有信息。所以可能，我需要改变这个问题。那么什么是合适的要求他们澄清呢？此外，它不是数据库名称。我需要准备一种文件将其传输到总部以创建更大的数据库。我认为 SQL Server 2008 R2 中可能存在一种名为 raw 的文件类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:52:44.323

嗯，这听起来几乎像是从一些精美的数据库书籍中引用的，使用“原始数据库”作为新流行语。

数据库处于最佳状态时，它包含“原始数据”（只有纯数据，没有统计数据，计算的平均值 -> 标准化数据库）。

在某些情况下，您不能拥有原始数据，并且需要跟踪数据库中的计算值（主要是出于性能原因以加快查询时间），我可以想象那些人只是希望您将它们扔掉以获得“原始数据”数据库”仅由“原始数据”组成。

# url - curl_setopt 不适用于 url 作为变量

> ID：12056286
> 
> 赞同：1
> 
> 时间：2012-08-21T13:46:49.917
> 
> 标签：url, variables, curl

如果我这样做 - 它有效：

```
curl_setopt($ch, CURLOPT_URL, "http://www.facebook.com/pages/Muzikos-R%C5%ABsys/192813414094112?sk=events"); 
```

但如果我试试这个

```
$url = "http://www.facebook.com/pages/Muzikos-R%C5%ABsys/192813414094112?sk=events";
curl_setopt($ch, CURLOPT_URL, $url); 
```

它给我一个空白页；

有任何想法吗？暂时找不到答案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:50:05.517

试试这个代码：

```
$url = "http://www.facebook.com/pages/Muzikos-R%C5%ABsys/192813414094112?sk=events";
$ch  = curl_init($url);
$res = curl_exec($ch); 
```

# c# - 从 Web 服务 XML 响应中提取键值对

> ID：12056295
> 
> 赞同：3
> 
> 时间：2012-08-21T13:47:20.420
> 
> 标签：c#, .net, arrays, web-services

我正在使用 C# 和 Visual Studio 2010 中的 .NET 2.0 框架。我正在尝试提取 Web 服务返回的 URL。此 URL 在包含键和值的特征数组中返回。（我认为这类似于我在学校学到的叫做**哈希表**）。

我的智能感知没有发现任何有用的东西，我无法弄清楚我做错了什么。

这是代码。什么进去`serverInfo.FeatureSet[]`？

```
public string wfl_reqURL(string username, string password)
{
    MyWorkflow.ServerInfo serverInfo = new MyWorkflow.ServerInfo();
    myURL = serverInfo.FeatureSet[];
} 
```

这就是它在 WSDL 中的描述方式。`FeatureSet`正在作为带有字符串键和字符串值的数组返回：

```
<ServerInfo>
  <FeatureSet>
    <Feature>
      <Key>FileUploadUrl</Key>
      <Value>http://localhost/transferindex.php</Value>
    </Feature>
  </FeatureSet>
</ServerInfo> 
```

我是否提供了有关我的问题的足够详细信息？我发现的大多数信息似乎都是关于如何在 Web 服务中*创建*这样的数组，而不是像我想要的那样*从Web 服务中**选择*一个。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:50:33.807

如果您使用的是 c# 3.5，那么 linq 中的某些内容就像

```
myURL = serverInfo.FeatureSet.First(o=>o.Key == "FileUploadUrl").Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:08:47.840

尝试这样的事情：

```
object neededItem = null;
foreach (string item in serverInfo.FeatureSet.Keys)
{
    if (item == "FileUploadUrl")
    {
        neededItem = serverInfo.FeatureSet[item];
        break;
    }
}
if (neededItem != null)
{
    //Do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:35:26.740

问题出在数据类型上。将代码更改为此解决了问题，尽管方式很混乱。我认为它与类型及其定义方式有关......作为字典或数组，但它与我想象的有点不同......

```
foreach( MyWorkFlow.Feature feature in serverInfo.FeatureSet) {
    if (feature.Key.ToString() == "FileUploadUrl") {
        string myURL = feature.Value;
        Console.WriteLine(myURL);
    } 
```*

# c# - C# 在循环中覆盖旧对象

> ID：12056298
> 
> 赞同：-2
> 
> 时间：2012-08-21T13:47:34.507
> 
> 标签：c#, memory, loops

我有一个循环存储创建对象并存储它们。有 3 个类和很多代码，所以我将重点介绍： 在主类中：

```
 public static List<TaskIDHolder> mainHolders = new List<TaskIDHolder> (); 
```

我的循环是这样工作的：

```
 foreach (string aDir in directories){
 //Variables
 string var1= "";
 int var2= 0;

 //Buisness Logic

 //Storage
        Boolean newTaskID = true;
        foreach (TaskIDHolder taskIDHolder in mainHolders)
        {
            if (taskIDHolder.getTaskID().Equals(taskID))
            {
                //Add obj
                File newFile = new File(var1, var2);
                taskIDHolder.addFile(newFile);
                newTaskID = false;
            }
        }
        if (newTaskID)
        {
            //Create Holder
            File newFile = new File(var1, var2);
            TaskIDHolder newHolder = new TaskIDHolder(taskID, newFile);
            //Add Holder
            mainHolders.Add(newHolder);
        }    

 } 
```

现在我的其他类是 File 和 TaskIDHolder。现在我在 TaskIDHolder 中获得了同一文件的 9 个实例，而不是不同的实例。

编辑：对不起，我的问题是如何获取存储的文件对象的唯一实例。

我没有写下业务逻辑，因为它没有为问题带来洞察力。

至于这里的课程，它们是：

```
class File
{
    public static string var1;
    public static int var2;

    public File(string avar1, int avar2)
    {
        var1 = avar1;
        var2 = avar2;
    }

    public string getVar1()
    {
        return var1;
    }

    public int getVar2()
    {
        return var2;
    }
}

class TaskIDHolder
{
    public static List<File> files = null;
    public static string taskID = "";

    public TaskIDHolder(string aTaskID, File aFile)
    {
        taskID = aTaskID;
        files = new List<File>();
        files.Add(aFile);
    }

    public void addFile(File aFile)
    {
        files.Add(aFile);
    }

    public string getTaskID()
    {
        return taskID;
    }

    public List<File> getFiles()
    {
        return files;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:52:00.853

您**可能**要求类似（伪代码）：

```
 if (newTaskID)
 {
   //find a file in the collection
   File newFile = taskIDHolder.Where(file=>file.Var1 == var1 && file.Var2==var2).SingleOrDefault<File>();

   //can not find it, so create a new one
   if(newFile==null)
       newFile = new File(var1, var2);

   TaskIDHolder newHolder = new TaskIDHolder(taskID, newFile);
   //Add Holder
   mainHolders.Add(newHolder);
  } 
```

请注意，我**认为**该`File`对象具有`Var1`和`Var2`属性。如果没有，请为您的类型选择正确的属性。

# ajax - 在 HTTP 流期间同时调用 AJAX

> ID：12056299
> 
> 赞同：3
> 
> 时间：2012-08-21T13:47:38.460
> 
> 标签：ajax, apache, streaming, jwplayer

我有一个运行 Web 应用程序的 Apache 服务器。在这个 web 应用程序中，我展示了一个使用 JWPlayer 的视频。JWPlayer 使用 http 伪流从提供此视频的 PHP 脚本中获取视频。所有这些都运行良好，视频流式传输良好。

我遇到的问题是在视频流式传输时，我还使用 AJAX 调用来获取一些 XML 文件，这些文件由同一页面上的 Adob​​e Flash 文件使用。在流式传输时，这些 XML 文件提取将保持“待处理”，直到加载整个视频。使用 Chrome，我可以看到视频被逐字节加载。视频完全加载后，将获取 XML 文件。此外，如果我在视频流式传输时在浏览器中打开另一个选项卡并尝试再次加载 Web 应用程序，则在视频完全加载之前它也不会显示。

这似乎是某种 Apache 设置。apache 的 MPM 设置为：

ThreadsPerChild 150 MaxRequestsPerChild 0

这似乎是正确的。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:59:31.887

如果您使用的是 PHP 会话，那么这可能是导致 IO 阻塞的原因。

[同时调用同一文件时php阻塞](https://stackoverflow.com/questions/1174378/php-blocking-when-calling-the-same-file-concurrently)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T01:25:00.613

我正在制作一个带有私人视频流的系统。所以，我需要通过 php 进行流式传输，因为使用 php 编程我能够重新设置用户访问权限。

我在流式传输视频和在服务器上执行其他脚本时遇到了麻烦。使用 session_write_close() 解决了打开另一个脚本的问题，我发现网络上的脚本对我有很大帮助。

我想分享，因为该脚本可以进行真正的流式传输。我在[http://www.tuxxin.com/php-mp4-streaming/](http://www.tuxxin.com/php-mp4-streaming/)网站上找到了它。感谢这段代码的作者=D

请享用 ！

```
<?php
$file = 'video360p.mp4';
$fp = @fopen($file, 'rb');
$size   = filesize($file); // File size
$length = $size;           // Content length
$start  = 0;               // Start byte
$end    = $size - 1;       // End byte
header('Content-type: video/mp4');
//header("Accept-Ranges: 0-$length");
header("Accept-Ranges: bytes");
if (isset($_SERVER['HTTP_RANGE'])) {
    $c_start = $start;
    $c_end   = $end;
    list(, $range) = explode('=', $_SERVER['HTTP_RANGE'], 2);
    if (strpos($range, ',') !== false) {
        header('HTTP/1.1 416 Requested Range Not Satisfiable');
        header("Content-Range: bytes $start-$end/$size");
        exit;
    }
    if ($range == '-') {
        $c_start = $size - substr($range, 1);
    }else{
        $range  = explode('-', $range);
        $c_start = $range[0];
        $c_end   = (isset($range[1]) && is_numeric($range[1])) ? $range[1] : $size;
    }
    $c_end = ($c_end > $end) ? $end : $c_end;
    if ($c_start > $c_end || $c_start > $size - 1 || $c_end >= $size) {
        header('HTTP/1.1 416 Requested Range Not Satisfiable');
        header("Content-Range: bytes $start-$end/$size");
        exit;
    }
    $start  = $c_start;
    $end    = $c_end;
    $length = $end - $start + 1;
    fseek($fp, $start);
    header('HTTP/1.1 206 Partial Content');
}
header("Content-Range: bytes $start-$end/$size");
header("Content-Length: ".$length);
$buffer = 1024 * 8;
while(!feof($fp) && ($p = ftell($fp)) <= $end) {
    if ($p + $buffer > $end) {
        $buffer = $end - $p + 1;
    }
    set_time_limit(0);
    echo fread($fp, $buffer);
    flush();
}
fclose($fp);
exit();
?> 
```

# c# - xml xsd 验证和格式错误的 xml

> ID：12056303
> 
> 赞同：0
> 
> 时间：2012-08-21T13:47:50.023
> 
> 标签：c#, xml, xsd, asp.net-4.0

我编写了一个快速类来验证 FilePath 上的 XML 文件与 .NET 的 XSD（见下文）。

我有大量数据文件由局域网上的另一台机器生成，但这些文件不是真正的 XML，它们格式错误，但每次都以相同的方式并根据它们的结构，我可以对内容进行一些全局替换文件来纠正它。所以我必须在用 XSD 测试之前纠正这些。我必须替换`<\`为`</`等等。所有替换都列在代码中。

当我将其指向生成文件的机器的 LAN 网络共享时，文件列表大约有 50k 个文件，这大约需要 15 分钟才能完成。我想知道这是否只是局域网限制的 IO，或者是否有比我在这里所做的替换更好（更快）的方法来纠正格式错误的 XML。

```
class VCheck
{
    private static XmlReaderSettings settings = new XmlReaderSettings();
    private bool valid;
    string message;
    public string Message { get { return message; } }

    public VCheck()
    {
        settings.ValidationType = ValidationType.Schema;
        settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
        settings.ValidationEventHandler += new ValidationEventHandler(ValidationCallBack);
        settings.Schemas.Add(null, "schema.xsd");
    }

    public bool CheckFile(string FileFullPath) 
    {
        StreamReader file = new StreamReader(FileFullPath);
        valid = true;
        message = null;
        try
        { //setup xml reader with settings
            XmlReader xml = XmlReader.Create(new StringReader(@"<?xml version='1.0'?><root xmlns=""MYE"">" + 
            file.ReadToEnd().Replace(@"<\", @"</").Replace("&", "&amp;").Replace("\"", "&quot;").Replace("'", "&apos;") + "</root>"), 
            settings);

            while (xml.Read()) ; //read in all xml, validating against xsd
        }
        catch
        {
            //problem reading the xml file in, bad path, disk error etc.
            return false;
        }

        return valid;
    }

    void ValidationCallBack(object sender, ValidationEventArgs e) //called on failed validations
    {
        valid = false;
        message = e.Message;
        switch (e.Severity)
        {
            case XmlSeverityType.Error:
                //Do stuff on validation error
                break;
            case XmlSeverityType.Warning:
                //Do stuff on validation warning
                break;
        }

    }

} 
```

我会像这样从 main 调用它：

```
 static void Main(string[] args)
    {
        VCheck checker = new VCheck();
        foreach (string file in files) //files is a List<string> of file paths/names
        {
            if (!checker.CheckFile(file))
            {
                //To do stuff if not valid
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:51:57.520

考虑到您的性能问题，我不认为将其全部读入内存 -`ReadToEnd`并对内容执行是一个不错的选择。`String.Replace`

如果我是你，我宁愿“一块一块地”重写这些文件——也就是说，即时缓冲和替换数据。

只需创建一个新文件，将一些格式错误的文件加载到缓冲区中（例如 4 kb），进行替换，将结果刷新到新创建的文件中；冲洗并重复。

注意：可能会发生一个缓冲区以 . 结尾，`<`而下一个缓冲区以`\`. 如果你不想错过任何`<\`s （和类似的），你也需要处理这种情况。

另一种可能的解决方案是，您可以尝试创建自己的“更宽容”的实现`XmlReader`（此类不是密封的，因此您可以基于它并创建自己的），尽管我个人没有这样做，我不确定这是否是一个好方法。重写文件至少会给您留下语法上有效的 XML，这在某些时候可能会派上用场。

* * *

PS。附带说明：

```
 catch
    {
        //problem reading the xml file in, bad path, disk error etc.
        return false;
    } 
```

我不会那样做的。它使调用者不知道操作失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:23:18.953

最快的过程是那些根本不需要执行的过程。因此，我建议您注意 [Michael Kay 关于处理“非格式良好的 XML”的评论。](https://stackoverflow.com/questions/12043065/suggested-method-for-dealing-with-invalid-xml/12043476#12043476)

如果您希望作为 XML 处理的非 XML 数据是由一台机器生成的，那么该机器没有理由不能生成 XML 数据而不是您当前尝试修复的非 XML 数据。更糟糕的是，您为处理数据生成过程中的错误所付出的每一分钟努力都是在说服负责该过程的人员他们正在生成正确、格式良好的 XML 上的一分钟。所以你在这里受伤的不仅仅是你自己。

# javascript - Javascript 长度总是显示 1。为什么？

> ID：12056305
> 
> 赞同：1
> 
> 时间：2012-08-21T13:48:01.617
> 
> 标签：javascript, jquery, match

我有以下 Javascript，它是更大功能的一部分。我正在做一个 javascript 匹配，然后尝试获取匹配的长度。问题是，即使长度为 10 个字符，长度也总是返回 1。

```
var content = $(this).text();
var word = /#(\w+)/ig;
var query = content.match(word);

alert(query + ' | ' + query.length); 
```

如何获得匹配长度的准确值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T13:49:27.643

因为`String.match`使用全局正则表达式的结果是一个数组。`query.length`告诉你只有一场比赛；您可以使用 访问匹配的字符串`query[0]`。

`alert`它在您的调用中似乎是一个字符串，因为`Array.toString`它相当于`array.join(',')`. 只有一个元素，它显示了单个元素。

# sql - Oracle sql 基准测试

> ID：12056308
> 
> 赞同：0
> 
> 时间：2012-08-21T13:48:18.027
> 
> 标签：sql, oracle, benchmarking

我必须对查询进行基准测试 - 目前我需要知道添加参数以选择结果集（FIELD_DATE1）将如何影响 sql 执行时间。db 中有管理限制，所以我不能使用调试。所以我写了一个查询：

```
SELECT COUNT(*), MIN(XXXT), MAX(XXXT) 
  FROM ( select distinct ID AS XXXID, sys_extract_utc(systimestamp) AS XXXT
              , FIELD_DATE1 AS XXXUT  
           from XXXTABLE 
          where FIELD_DATE1 > '20-AUG-06 02.23.40.010000000 PM' ); 
```

查询的输出将显示查询执行的实时时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:13:04.283

在 Oracle 中进行基准测试时需要学习很多东西。我建议您从以下项目开始，即使它担心您在 db 中可能没有足够的限制，因为其中一些功能可能需要额外的权限：

*   **解释计划：**对于每条 SQL 语句，oracle 必须创建一个**执行计划**，执行计划定义了如何读取/写入信息。即：要使用的索引、连接方法、排序等。解释计划将为您提供有关您的查询有多好以及它如何使用索引的信息。学习这个**查询成本**的概念是关键，所以看看它。

*   **TKPROF：**它是一个Oracle 工具，允许您读取Oracle 跟踪文件。当您在 oracle 中启用定时统计时，您可以跟踪您的 sql 语句，此跟踪的结果将放在文件中；您可以使用 TKPROF 读取这些文件。TKPROF 将让您看到的信息包括：

> *   count = 执行 OCI 程序的次数
> *   cpu = cpu 执行时间，以秒为单位
> *   elapsed = 执行的经过时间（以秒为单位）
> *   disk = 从磁盘中物理读取缓冲区的次数
> *   查询 = 为一致读取而获得的缓冲区数
> *   current = 在当前模式下获得的缓冲区数（通常用于更新）
> *   rows = fetch 或 execute 调用处理的行数

请参阅：[使用 SQL 跟踪和 TKPROF](http://docs.oracle.com/cd/B10500_01/server.920/a96533/sqltrace.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:12:42.130

在这个查询中`SYSTIMESTAMP`可能会被评估一次，并且与每一行关联的相同值，或者它会为每一行评估一次，或者介于两者之间。也有可能从表中获取所有行，然后为每一行评估 SYSTIMESTAMP，因此您无法准确了解整个查询所花费的时间。通常，您不能依赖 SQL 中的求值顺序，或者假设函数将针对它出现的每一行求值一次。

一般来说，我测量执行时间的方法是使用客户端工具来报告它。如果您在 SQLPlus 中执行查询，您可以`SET TIMING ON`让它报告每个语句的执行时间。其他交互式工具可能具有类似的功能。

# javascript - 启用 FireBug 时 matchMedia 返回 null

> ID：12056313
> 
> 赞同：2
> 
> 时间：2012-08-21T13:48:29.673
> 
> 标签：javascript, firefox, firebug, media-queries

我的网络应用程序使用`matchMedia`. 有时，`null`无论传递什么值，调用此函数都会返回。这很奇怪，但并不总是发生（可能是 3 次中的 1 次），并且仅在打开 FireBug 的 FireFox 中发生。有人遇到过这样的问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T12:03:38.050

似乎 matchMedia() 在隐藏（显示：无）iframe 中调用时在 FF 中返回 null。我在使用 jQuery UI 的选项卡小部件时遇到了这种行为，并且选项卡面板是 iframe。我的解决方法是覆盖 jQuery UI 的 .ui-tabs-hide CSS 类：

```
.ui-tabs-hide { display: block !important; position: absolute; left: -99999px; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T04:59:49.897

Matchmedia 在隐藏 iframe 的情况下返回 null，您可以在访问 window.matchmedia 之前使用此代码

`if(typeof window.matchMedia == 'function' && window.matchMedia!=undefined && window.matchMedia('screen and (max-width: 650px)')!=null){ //Your code goes here }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T17:31:10.223

我发现我必须这样做：

```
if (w.matchMedia == null ){ 
    format = uformat; 
} else if(w.matchMedia(qo) != null) {
    if (w.matchMedia(qo).matches || w.matchMedia(q).matches ) {  format = mformat; }
} else {
    format = uformat; 
} 
```

# java - 打印包含 JBIG2 图像的 PDF

> ID：12056315
> 
> 赞同：8
> 
> 时间：2012-08-21T13:48:34.043
> 
> 标签：java, pdf, printing, applet, jbig2

请向我推荐一些可以帮助我打印包含 JBIG2 编码图像的 PDF 文件的库。`PDFRenderer`，`PDFBox`别帮我。这些库可以打印简单的 PDF，但不能打印包含 JBIG2 图像的 PDF。`PDFRenderer`尝试修复它（根据 PDFRedndrer 的错误跟踪器上的错误问题），但某些页面仍然（尤其是存在条形码的地方）不想打印。

PS 我`javax.print`在小程序中使用 API

谢谢！

**更新**：也试过ICEPdf，太不想工作了。

我得出的结论是所有这些库（PDFRenderer、ICEPdf、PDFBox）都使用 [`JPedals`jbig2 解码器](http://www.jpedal.org/support_JBIG.php)。错误（某些页面未打印）来自此解码器库。该解码器的开源版本（用于 PDFRenderer、ICEPdf、PDFBox）不再受支持，但`JPedal`有一个新的项目商业分支，他们写道，该错误已在新的商业版本中修复，售价 9 美元ķ。

有任何想法吗？

**更新 2**：昨天我尝试用其他开源库替换[JPedal 的免费](http://www.jpedal.org/support_JBIG.php)[`jbig2-imageio`](http://code.google.com/p/jbig2-imageio/)库。但是我没有得到任何成功的结果，所以我在他们的项目页面上创建了一个新主题（google-code 的论坛 -[这里](https://groups.google.com/forum/?fromgroups=#!topic/jbig2-imageio-discuss/56FlWsXNYEg)）。将不胜感激任何帮助。

我还发现了一些关于`Apache PDFBox`bug-tracker 的有用讨论：[here](https://issues.apache.org/jira/browse/PDFBOX-1067)和[here](https://issues.apache.org/jira/browse/PDFBOX-81)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:12:50.550

正如您在**yms**回答中的评论一样。*“但是我可以使用什么库来提取图像并（更重要的是）将它们放回 PDF 中？”*

这是一个简单的演示
1) 提取`jbig2`或者你可以说所有的图像来自`pdf`。
2）将`jbig2`图像转换为任何其他格式，在我的例子中是`jpeg`.
3) 创建新`pdf`的包含`jpeg`.

使用库[jbig2-imageio](http://code.google.com/p/jbig2-imageio/)和[itext](http://itextpdf.com/)。

在下面的示例中，请根据需要更改**资源**和**目录路径**。
为此，我必须浏览最后将附上的几个资源。希望这可以帮助。

```
import com.itextpdf.text.Document;
import com.itextpdf.text.Image;
import com.itextpdf.text.pdf.PdfPCell;
import com.itextpdf.text.pdf.PdfPTable;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfWriter;
import com.itextpdf.text.pdf.parser.*;

import com.levigo.jbig2.JBIG2ImageReader;
import com.levigo.jbig2.JBIG2ImageReaderSpi;
import com.levigo.jbig2.JBIG2ReadParam;
import com.levigo.jbig2.io.DefaultInputStreamFactory;

import java.awt.image.BufferedImage;
import java.io.*;
import javax.imageio.ImageIO;
import javax.imageio.stream.ImageInputStream;

public class JBig2Image {
    private String filepath;
    private int imageIndex;

    public JBig2Image() {
        this.filepath = "/home/blackadmin/Desktop/pdf/demo18.jbig2";
        this.imageIndex = 0;
        extractImgFromPdf();
        convertJBig2ToJpeg();
        createPDF();
    }

    private void extractImgFromPdf() {
        try {
            /////////// Extract all Images from pdf /////////////////////////

            PdfReader reader = new PdfReader("/home/blackadmin/Desktop/pdf/orig.pdf");
            PdfReaderContentParser parser = new PdfReaderContentParser(reader);
            MyImageRenderListener listener = new MyImageRenderListener("/home/blackadmin/Desktop/pdf/demo%s.%s");
            for (int i = 1; i <= reader.getNumberOfPages(); i++) {
                parser.processContent(i, listener);
            }
        } catch (IOException ex) {
            System.out.println(ex);
        }
    }

    private void convertJBig2ToJpeg() {
        InputStream inputStream = null;
        try {
            ///////// Read jbig2 image ////////////////////////////////////////
            inputStream = new FileInputStream(new File(filepath));
            DefaultInputStreamFactory disf = new DefaultInputStreamFactory();
            ImageInputStream imageInputStream = disf.getInputStream(inputStream);
            JBIG2ImageReader imageReader = new JBIG2ImageReader(new JBIG2ImageReaderSpi());
            imageReader.setInput(imageInputStream);
            JBIG2ReadParam param = imageReader.getDefaultReadParam();
            BufferedImage bufferedImage = imageReader.read(imageIndex, param);

            ////////// jbig2 to jpeg ///////////////////////////////////////////
            ImageIO.write(bufferedImage, "jpeg", new File("/home/blackadmin/Desktop/pdf/demo18.jpeg"));
        } catch (IOException ex) {
            System.out.println(ex);
        } finally {
            try {
                inputStream.close();
            } catch (IOException ex) {
                System.out.println(ex);
            }
        }
    }

    public void createPDF() {
        Document document = new Document();
        try {
            PdfWriter.getInstance(document,
                    new FileOutputStream("/home/blackadmin/Desktop/pdf/output.pdf"));
            document.open();
            PdfPTable table = new PdfPTable(1); //1 column.    
            Image image = Image.getInstance("/home/blackadmin/Desktop/pdf/demo18.jpeg");
            image.scaleToFit(800f, 600f);
            image.scaleAbsolute(800f, 600f);   // Give the size of image you want to print on pdf
            PdfPCell nestedImgCell = new PdfPCell(image);
            table.addCell(nestedImgCell);
            document.add(table);
            document.close();
            System.out.println(
                    "======== PDF Created Successfully =========");
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    public static void main(String[] args) throws IOException {
        new JBig2Image();
    }
}

class MyImageRenderListener implements RenderListener {

    /**
     * The new document to which we've added a border rectangle.
     */
    protected String path = "";

    /**
     * Creates a RenderListener that will look for images.
     */
    public MyImageRenderListener(String path) {
        this.path = path;
    }

    /**
     * @see com.itextpdf.text.pdf.parser.RenderListener#beginTextBlock()
     */
    public void beginTextBlock() {
    }

    /**
     * @see com.itextpdf.text.pdf.parser.RenderListener#endTextBlock()
     */
    public void endTextBlock() {
    }

    /**
     * @see com.itextpdf.text.pdf.parser.RenderListener#renderImage(
     * com.itextpdf.text.pdf.parser.ImageRenderInfo)
     */
    public void renderImage(ImageRenderInfo renderInfo) {
        try {
            String filename;
            FileOutputStream os;
            PdfImageObject image = renderInfo.getImage();
            if (image == null) {
                return;
            }
            filename = String.format(path, renderInfo.getRef().getNumber(), image.getFileType());
            os = new FileOutputStream(filename);
            os.write(image.getImageAsBytes());
            os.flush();
            os.close();
        } catch (IOException e) {
            System.out.println(e.getMessage());
        }
    }

    /**
     * @see com.itextpdf.text.pdf.parser.RenderListener#renderText(
     * com.itextpdf.text.pdf.parser.TextRenderInfo)
     */
    public void renderText(TextRenderInfo renderInfo) {
    }
} 
```

**参考资料：**
1）`jbig2`从`pdf` （[提取图像](http://itextpdf.com/examples/iia.php?id=284)）（[MyImageRenderListener](http://itextpdf.com/examples/iia.php?id=283)）中提取。
2）转换`jbig2`（[JBIG2ImageReaderDemo](http://code.google.com/p/jbig2-imageio/source/browse/jbig2-imageio/trunk/src/test/java/com/levigo/jbig2/JBIG2ImageReaderDemo.java)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:44:34.687

You have tools as [ImageMagick](http://www.imagemagick.org) which handle images and convert them to a lot of formats. I used it some years ago so I can't tell you if the jbig2 format is properly handled by default or if you have to install some plugin. You can try the following to have a list of supported formats beginning with J like the `JBIG2` you are searching for:

```
$ convert -list format | grep -i J 
```

It is really obvious to convert to pdf with with tool too, coupled with `gs` tool aka [GhostScript](http://pages.cs.wisc.edu/~ghost/).

If fact nothing prevent you to display a PNG/JPEG version of the image and provide a download link to the original JBIG2 file with its own metadatas.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:04:10.557

作为替代方案，您可以尝试在服务器端执行此操作：

**方法 1：**
使用外部应用程序将 PDF 文件转换为光栅图像并打印出来。

**方法 2：**
通过重新压缩 JBIG2 图像来调整 PDF 文件：

1- 从文件中提取压缩为 JBIG2 的图像。

2- 使用其他算法（jpeg、png 等）重新压缩它们。为了做到这一点，您可能需要在 Java 之外使用 JNI 或[调用外部应用程序](https://stackoverflow.com/a/5604756/501196)。例如，如果 GPL lincense 适合您的需要，您可以尝试使用[jbig2dec或 ImageMagic。](http://jbig2dec.sourceforge.net/)

3- 将重新压缩的图像放回您的 PDF 中。

这种方法将意味着这些图像的一些质量损失，但至少您将能够打印文件。

您可以使用 iText 在 Java 中执行此操作，[在 iText in Action 一书中有一章关于调整图像大小](http://www.itextpdf.com/examples/iia.php?id=286)（带有示例代码）。想法是提取图像，调整大小（包括重新压缩）并将其放回原处。您可以以此为起点。请注意，iText 是一个 AGPL 项目，因此您不能在商业闭源应用程序中免费使用它。

如果您使用的是基于 Windows 的服务器并且您负担得起商业工具，您也可以使用 C#/VB.Net 或 C++的[Amyuni PDF Creator实现此目的（](http://www.amyuni.com/en/developer/pdfcreator/features/)*通常免责声明适用于此建议*）。您只需要检查所有类型为[acObjectTypePicture](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Object_Attributes/Drawing_Objects_Attributes/Common_Attributes.htm)的对象并将[属性 Compression 设置为 acJPegHigh](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Object_Attributes/Drawing_Objects_Attributes/Picture_Object_Attributes.htm)，这种方法不需要任何外部 JBIG2 解码器（如果您有兴趣，我可以在此处包含一些示例代码）。

如果您使用小程序仅打印 PDF 文件，您还可以尝试[生成一个 PDF 文件，该文件在打开时显示打印对话框](https://stackoverflow.com/questions/6167995/generate-a-pdf-that-automatically-prints)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T15:59:33.817

使用 AcrobatReader 本身怎么样？让它工作有点混乱，我猜这不是一个强大的解决方案。但可能会完美地打印所有内容。并且自由

关于这条路线的一些信息；

[http://vineetreynolds.blogspot.nl/2005/12/silent-print-pdf-print-pdf.html](http://vineetreynolds.blogspot.nl/2005/12/silent-print-pdf-print-pdf.html) http://www.codeproject.com/Questions/98586/Programmatically-print-PDF-documents [http:// forums.adobe.com/message/2336723](http://forums.adobe.com/message/2336723)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T10:40:40.900

Borisvl 的 JPedal 库有一个分支，位于

[https://github.com/Borisvl/JBIG2-Image-Decoder#readme](https://github.com/Borisvl/JBIG2-Image-Decoder#readme)

其中包含速度改进，我相信它也应该修复您的错误。

编辑：该错误与简单的范围检查有关。基本上，您需要防止 GetPixel 访问位图范围之外的 x,y 值。

在调用 getPixel 之前，您需要确保满足以下条件

col >= 0 并且 col < bitmap.width 行 >= 0 并且 row < bitmap.height

这是一些带有几个小范围检查的 Delphi 代码。我自己无法测试 Java 代码，但您需要更改 src/org/jpedal/jbig2/image/JBIG2Bitmap.java

```
procedure TJBIG2Bitmap.combine(bitmap: TJBIG2Bitmap; x, y: Integer; combOp: Int64);
...
...
var
begin
  srcWidth := bitmap.width;
  srcHeight := bitmap.height;
  srcRow := 0;
  srcCol := 0;

  if (x < 0) then x := 0;
  if (y < 0) then y := 0;

  for row := y to Min(y + srcHeight - 1, Self.height - 1) do   // <<<<<<<<  HERE
  begin
    for col := x to x + srcWidth - 1 do
    begin
      srcPixel := bitmap.getPixel(srcCol, srcRow); 
```

安德鲁。

# visual-studio - 如何在附加到 Visual Studio 中的进程时运行测试

> ID：12056316
> 
> 赞同：4
> 
> 时间：2012-08-21T13:48:34.043
> 
> 标签：visual-studio, web-services, unit-testing, debugging, visual-studio-2012

我正在尝试调试一些 Web 服务。我有许多集成测试设置。我想将调试器附加到我的 Web 进程，然后执行我的一项测试。问题是 Visual Studio 似乎不允许我在已附加到进程时运行测试。有没有办法解决？我能够做到这一点的唯一方法是在调用 web 服务之前在测试中设置一个断点，调试单元测试，然后一旦它遇到断点，就将调试器附加到我的 web 服务进程。这步骤太多了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T04:10:41.943

不，我不相信你可以。但是，您可以启动 Visual Studio 的第二个实例，并使用适当的断点将其附加到您的 Web 进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-29T06:04:21.640

我知道这已经晚了，但它仍然相关，至少到 VS2019 为止。

我要做的是解决这个问题：

1.  将调试器附加到我的 Web 服务
2.  分离调试器
3.  记下“重新附加到进程”快捷方式。我认为默认是 Shift+Alt+P
4.  运行单元测试
5.  立即点击重新连接快捷方式

除非您的测试启动异常迅速，否则此方法将在测试开始运行之前重新附加调试器。

如果您的机器可以处理 2 个 VS 实例，艾伦的回答会更好。

# qt - 编译前复制文件

> ID：12056318
> 
> 赞同：3
> 
> 时间：2012-08-21T13:48:35.257
> 
> 标签：qt, qmake

我有一个包含许多 sobprojects 的主项目，我使用 qmake 编译。

在子项目中，我必须在编译**之前**复制一些文件（一些头文件）。我已经看到一些命令在链接之前和之后执行操作，但我想知道是否可以在开始编译之前执行一些 shell 操作。我不能引用它们，但我必须复制它们（请不要问为什么，这不是我的错 :-( ）。有什么建议吗？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T12:44:39.740

请参阅我对几乎相同问题的 最后**回答：**

> > **[使用 Qt 编译项目后将一些文件复制到构建目录](https://stackoverflow.com/questions/15672130/)**

对你来说唯一的区别是改变第 5 点：

```
POST_TARGETDEPS     += copyfiles ## copy files after source compilation 
```

到：

```
PRE_TARGETDEPS     += copyfiles ## copy files before source compilation 
```

在执行**qmake****之前**，必须存在文件系统中已经**存在**的所有**文件**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:07:12.323

我认为您可以通过仔细使用 QMAKE_EXTRA_COMPILERS 和 QMAKE_EXTRA_TARGETS 变量来完成您想要做的事情。Qt Labs 文章[The Power of QMake](http://labs.qt.nokia.com/2008/04/16/the-power-of-qmake/)给出了合理的介绍。额外编译器的“.commands”部分可以是任意命令，包括 shell 命令。

我在此[电子邮件交流](http://lists.trolltech.com/qt-interest/2006-11/thread00934-0.html)中发现的另一个建议是“……看看 mkspecs/features/*.prf - 特别是那些 moc 和 uic 的……”以了解其他可能的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:28:04.167

我也只是`QMAKE_EXTRA_TARGETS`尝试解决问题，但无法完成;）

另一个可能对您有用的（简单）解决方案是将调用`gcc`/ `g++`：在`.pro`文件中，设置`QMAKE_CXX=./g++Wrapper`和`g++Wrapper`shell 脚本中，调用原始编译器，同时在调用之前和之后做任何你想做的事情：

```
#!/bin/bash
DoWhateverYouWantBeforeCompilation
g++ $*
DoWhateverYouWantAfterCompilation 
```

通过评估命令行参数，您还可以将您的操作限制在特定文件中。**

# c# - 在 Azure 中创建表时出现异常

> ID：12056319
> 
> 赞同：1
> 
> 时间：2012-08-21T13:48:36.483
> 
> 标签：c#, azure, azure-storage

在 Azure 中创建表时

```
 public void Create()
    {
        TableClient.CreateTableIfNotExist(TableName);
    } 
```

我收到以下异常：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
 <code>OutOfRangeInput</code>
 <message xml:lang="en-US">One of the request inputs is out of range.
RequestId:df3a853d-5ff6-46ec-908e-99ddf49c104c
Time:2012-08-21T13:41:43.9555920Z</message>
</error> 
```

谁能解释一下这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:51:19.970

表名无效。你用的名字是什么？

来自[MSDN](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)：

表名必须符合以下规则：

表名在一个帐户中必须是唯一的。

表名只能包含字母数字字符。

表名不能以数字字符开头。

表名不区分大小写。

表名的长度必须为 3 到 63 个字符。

这些规则也由正则表达式“^[A-Za-z][A-Za-z0-9]{2,62}$”描述。

表名保留它们创建时的大小写，但在使用时不区分大小写。

# jquery - AJAX JQuery 字符串结果按字符分解

> ID：12056321
> 
> 赞同：0
> 
> 时间：2012-08-21T13:48:41.933
> 
> 标签：jquery, ajax

```
$.ajax({
    async: false,
    url: '@Url.Action("UpdateMS")' + "?MAC=" + $('#MAC').val() + "&Serial=" + $('#Serial').val() + "&I_ID=" + $('#I_ID').val(),
    dataType: "json",
    cache: false,
    success: function (data) {
        $("#Serial_Number").val("");
        $("#MAC_Address").val("");
        $("#Message").text(data);
        alert(data[0]);
        if (data[0] == 'D') {                        
            $("#PartOne").css("display", "inline");
            $("#PartTwo").css("display", "none");
            $("#MACSerial").val("");
            $("#MACSerial").focus();
        }
    }
}); 
```

`data`是一个 JSON 字符串，其值为`Device Updated`。

这是问题：

在谷歌浏览器和类似的作品上就像一个魅力。

`data[0]`具有值`"D"` （即字符串数组中的第一个字符）。

`undefined`除了在臭臭的旧移动设备上，当我运行我的测试警报时它会报告价值！

`data``"Device Updated"`它本身会在所有浏览器上正确生成正确的字符串。

有任何想法吗？？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:53:44.260

尝试使用`data.charAt(0)`. 并非所有浏览器都支持您访问字符串的方式。

检查这个[JavaScript access string chars as array](https://stackoverflow.com/questions/4051385/javascript-access-string-chars-as-array) out，答案中有解释。

# c++ - Libexif ，附加新的 exif 数据

> ID：12056322
> 
> 赞同：6
> 
> 时间：2012-08-21T13:48:46.353
> 
> 标签：c++, c, jpeg, libexif

我的任务是编辑 exif 标签并向它们添加应用程序特定的值。如果 exif 标签存在，libexif 非常乐意编辑它们。但如果 exif 标签不存在，我将不得不创建它们并将它们附加到文件中。libexif 使用 C fopen，所以我不认为没有一些 IO 操作会有简单的方法。我正在考虑读取原始图像数据并将它们放入内存中， fopen(newfile, 'w') 添加 exif 数据，然后附加图像数据。
仅当有人知道更简单的方法时（我受 libexif 限制，libexiv2 可能会产生许可冲突）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:53:43.517

为了共同利益，我将回答我自己的问题，exif 应用程序有一个修改后的 libjpeg，可以操作 jpeg 原始数据。它具有以下功能

`jpeg_data_load_data (JPEGData *data, const unsigned char *d,unsigned int size);` 和

`jpeg_data_set_exif_data(myJPEGImage,exif);` `jpeg_data_save_file(myJPEGImage,"gangrene1.jpg");`

可以使用，像 imagemagick 这样的免费程序也有自己的 libjpeg ， libexif 实现来操作 exif 和 jpeg 数据。希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T01:22:51.650

在 libexif 和 libexiv2 之间进行选择时，我刚刚走上了与您相同的道路。由于许可，我选择了 libexif。

回到手头的问题，

libexif 不支持直接加载 JPG。您需要另一个包来读取 JPG 并提取 EXIF 标头（或者您可以自己编写一些东西）。

有一个名为 exifyay 的优秀 Github 项目，它使用 libexif 并有两个额外的库来处理 JPGS 中的读取。这是一个 python 项目，但库的源代码是 C。你可以在[这里找到 exifyay](https://github.com/NarrativeTeam/exifyay)（注意我与 exifyay 或 libexif 没有任何关系）

我刚刚编译了 libexif 并将 exifyay 的源代码合并到 VS2010 项目[中](https://www.dropbox.com/s/xsuqeui9w9gprhl/libexif-0.6.21_CompiledInVS2010%2BExample%2BJPGReaderWorking.7z?dl=0)。文件夹“contrib\examples\LibexifExample”中有一个示例。如果您不喜欢下载随机链接，这里是我工作的代码示例：

```
/*
 * write-exif.c
 *
 * Placed into the public domain by Daniel Fandrich
 *
 * Create a new EXIF data block and write it into a JPEG image file.
 *
 * The JPEG image data used in this example is fixed and is guaranteed not
 * to contain an EXIF tag block already, so it is easy to precompute where
 * in the file the EXIF data should be. In real life, a library like
 * libjpeg (included with the exif command-line tool source code) would
 * be used to write to an existing JPEG file.
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>
#include <libexif/exif-data.h>
#include <libjpeg/jpeg-data.h>
#include <JpegEncoderEXIF/JpegEncoderEXIF.h>

/* byte order to use in the EXIF block */
#define FILE_BYTE_ORDER EXIF_BYTE_ORDER_INTEL

/* comment to write into the EXIF block */
#define FILE_COMMENT "libexif demonstration image"

/* special header required for EXIF_TAG_USER_COMMENT */
#define ASCII_COMMENT "ASCII\0\0\0"

static ExifEntry *create_tag(ExifData *exif, ExifIfd ifd, ExifTag tag, size_t len)
{
    void *buf;
    ExifEntry *entry;

    /* Create a memory allocator to manage this ExifEntry */
    ExifMem *mem = exif_mem_new_default();
    assert(mem != NULL); /* catch an out of memory condition */

    /* Create a new ExifEntry using our allocator */
    entry = exif_entry_new_mem (mem);
    assert(entry != NULL);

    /* Allocate memory to use for holding the tag data */
    buf = exif_mem_alloc(mem, len);
    assert(buf != NULL);

    /* Fill in the entry */
    entry->data = (unsigned char*)buf;
    entry->size = len;
    entry->tag = tag;
    entry->components = len;
    entry->format = EXIF_FORMAT_UNDEFINED;

    /* Attach the ExifEntry to an IFD */
    exif_content_add_entry (exif->ifd[ifd], entry);

    /* The ExifMem and ExifEntry are now owned elsewhere */
    exif_mem_unref(mem);
    exif_entry_unref(entry);

    return entry;
}

int main(int argc, char **argv)
{

    ExifEntry *entry;

    //Input JPG
    char mInputFilename[]="example.jpg";

    //Load JPG
    JPEGData * mJpegData = jpeg_data_new_from_file(mInputFilename);

    //Load Exif data from JPG
    ExifData * mExifData = jpeg_data_get_exif_data(mJpegData);

    //Set some Exif options
    exif_data_set_option(mExifData, EXIF_DATA_OPTION_FOLLOW_SPECIFICATION);
    exif_data_set_data_type(mExifData, EXIF_DATA_TYPE_COMPRESSED);
    exif_data_set_byte_order(mExifData, FILE_BYTE_ORDER);

    entry = create_tag(mExifData, EXIF_IFD_EXIF, EXIF_TAG_USER_COMMENT, 
            sizeof(ASCII_COMMENT) + sizeof(FILE_COMMENT) - 2);
    /* Write the special header needed for a comment tag */
    memcpy(entry->data, ASCII_COMMENT, sizeof(ASCII_COMMENT)-1);
    /* Write the actual comment text, without the trailing NUL character */
    memcpy(entry->data+8, FILE_COMMENT, sizeof(FILE_COMMENT)-1);
    /* create_tag() happens to set the format and components correctly for
     * EXIF_TAG_USER_COMMENT, so there is nothing more to do. */

    /* Create a EXIF_TAG_SUBJECT_AREA tag */
    entry = create_tag(mExifData, EXIF_IFD_EXIF, EXIF_TAG_SUBJECT_AREA,
               4 * exif_format_get_size(EXIF_FORMAT_SHORT));
    entry->format = EXIF_FORMAT_SHORT;
    entry->components = 4;

    //Write back exif data
    jpeg_data_set_exif_data(mJpegData,mExifData);

    //Save to JPG
    jpeg_data_save_file(mJpegData,"test.jpg");

    return 0;
} 
```

# android - 如何使 ImageView 包装其内容？

> ID：12056325
> 
> 赞同：0
> 
> 时间：2012-08-21T13:48:55.147
> 
> 标签：android, scale, android-imageview

我是 Android 初学者，我认为这是一个非常简单的问题，但我在任何地方都找不到。我添加了这样的 ImageView：

```
//....
            iv = new ImageView(context);
            iv.setBackground(getResources().getDrawable(drawable));
            iv.setAdjustViewBounds(true);

            RelativeLayout.LayoutParams imajpara=new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT);
            iv.setMaxWidth(100);        
            iv.setMaxHeight(100);
            iv.setLayoutParams(imajpara);           
            iv.setScaleType(ScaleType.CENTER_INSIDE);
//.... 
```

但是 ImageView（在这种情况下是一个球图片）适合整个屏幕，即使图像 (.png) 是 100x100 像素。在代码中，您会看到我尝试解决此问题，但都没有奏效。图像视图位于相对布局中。

那么如何使 ImageView 根据图像的尺寸调整自身的大小呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:53:52.340

使用`setImageDrawable()`而不是`setBackground()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:58:57.537

您可以直接设置正确的尺寸，而不是在 Layoutparams 的构造函数中指示“WRAP_CONTENT”。

# sql - Oracle APEX_ITEM API 使用和问题

> ID：12056329
> 
> 赞同：0
> 
> 时间：2012-08-21T13:49:09.987
> 
> 标签：sql, plsql, oracle-apex

我有以下选择语句用作标准报告：

```
select id,
       name,
       telephone,
       apex_item.checkbox2(10,id) as "Tick when Contacted",
       apex_item.text(20,:P2_DATE) as "Date Contacted",
       apex_item.textarea(30,:P2_COMMENT,5,80) as "Comment"
from   my_table 
```

我的问题是，我不确定我是否正确执行此操作的区域是，如果此语句返回 10 行并且在这 10 行中，我只选择/检查 5 条记录，然后按提交按钮，为什么会这样将所选记录插入另一个表的我的 PL/SQL 页面进程没有拾取`:P2_DATE`，`:P2_COMMENT`哪些是页面上的隐藏项，纯粹用作占位符，而不是 my_table 中的实际列？

我这样做是正确的还是需要使用 apex 集合？

这是我的页面流程的样子；它是否正确？

```
DECLARE

  v_row          BINARY_INTEGER;

BEGIN
  FOR i IN 1..APEX_APPLICATION.G_F10.COUNT LOOP
    v_row := APEX_APPLICATION.G_F10(i);

    INSERT INTO MY_OTHER_TABLE
                   ( DATE_CONTACTED,
                     COMMENTS 
                   )
    VALUES         ( APEX_APPLICATION.G_F20(v_row),
                     APEX_APPLICATION.G_F30(v_row) 
                   );
  END LOOP;

  COMMIT;
END; 
```

带有用户输入的报告示例如下：

```
ID/CHECKBOX         DATE CONTACTED          COMMENTS
=====================================================
1                   21/08/2012              Comment 1
2                   21/08/2012              Comment 2
3                   21/08/2012              Comment 3
4                   21/08/2012              Comment 4
5                   21/08/2012              Comment 5 
```

根据用户手动输入这 5 条评论的报告，我希望这 5 条记录被插入到 MY_OTHER_TABLE 中，因为它们已经过检查。

不幸的是，我检查过的 5 条记录从未填充 MY_OTHER_TABLE。

我不确定我错过了什么，或者在使用这两个占位符项目时我的原始选择是否完全错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:15:57.260

在你的评论中你说

> 我可以在源不是来自底层 oracle 表的情况下使用 apex_item.text api 吗？

现在我读为：

> 我可以生成此报告并将我的 apex_item 字段的**默认值**设置为我的 2 个页面项目的默认值吗？

是的。你可以。这就是我认为您最初的意思，这是有道理的，因为无论如何这些项目都是隐藏的。只需确保以下内容：
如果您的意思是在页面加载时未将值放入报告项目中：
如果隐藏项目的区域低于您的报告区域，请使用项目移动您的区域或创建一个新区域在您的报告所在区域上方。
上面和下面我正在谈论他们在表单结构中的位置。如果您使用组件视图轻松查看此内容，请切换到树视图。
我的猜测是该项目（及其源）之前已处理，因此在报告开始呈现之前具有有效的会话状态。

# sql - 返回多列，其中只有一个选择最大值

> ID：12056336
> 
> 赞同：1
> 
> 时间：2012-08-21T13:49:27.363
> 
> 标签：sql, db2, mainframe

我想编写一个 SQL，它返回多个列，其中一个具有选择最大值。让我用一个例子来说明。

实际上我想要这样的东西：

```
Select max(from_date)
      ,func_status_code
      ,name
from table
where from_date <= current date 
```

所以我想要的是对一列执行最大选择，但还要获取该行/那些行的其他列。

```
from_date   func_status_code   name
2012-08-21        1             A
2012-08-21        4             A
2012-08-20        5             A
2012-08-20        3             A 
```

返回

```
from_date   func_status_code   name
2012-08-21        1             A
2012-08-21        4             A 
```

我知道我可以做一个子选择，比如：

```
select from_date
      ,func_status_code
      ,name
  from table
  where from_date = (Select max(from_date)
                       from table
                       where from_date <= current date
                    ) 
```

但我不明白为什么其他方法不起作用。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:56:24.170

一种方法是使用窗口/分析函数：

```
select func_status_code, name
from (Select func_status_code, name,
             max(from_date) over () as maxdate
      from table 
      where from_date <= current date
     ) t
where from_date = maxdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:51:18.990

你缺少`GROUP BY`条款

```
SELECT from_date, MAX(func_status_code) maxCode, name
FROM tableName
-- WHERE from_date <= getDate()     -- extra condition here
GROUP BY from_date, name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:33:40.000

您的子选择查询是正确的。您还可以使用公用表表达式获得相同的结果。

```
WITH m as
(
  Select max(from_date) mxdate
    from table
    where from_date <= current date
)
select from_date
      ,func_status_code
      ,name
  from table t, m
 where t.from_date = m.mxdate 
```

# iphone - 将 NSURLConnection 方法移动到可重用类

> ID：12056338
> 
> 赞同：0
> 
> 时间：2012-08-21T13:49:32.560
> 
> 标签：iphone, nsurlconnection

我正在使用`NSURLConnection`从 Web 服务下载一些 JSON，然后显示在`UITableView`. 我的所有代码都在视图类中运行良好，但我想知道是否可以`NSURLConnection`让其他类使用这些方法？

例如，如下所示：

```
NSURLConnectionClass *connection = [[NSURLConnectionClass alloc] init];
NSArray *myDataArray = [connection withURL: [NSURL URLWithString: @"http://www.example.com"]];
// Reload table with new data 
```

我意识到这不会起作用，因为 NSURLConnection 是异步的，但想知道是否还有其他可以尝试的方法。我基本上是在尝试避免在每个下载数据的视图中重复代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:58:29.783

您可以为您的自定义连接类创建一个委托协议。这样它就可以下载异步和静止并在完成后回调。更好的是使用块进行回调。这种模式用在流行的 ASIHttpRequest 类中。

您甚至可以使此类成为表视图的委托和数据源。这样你只需要`[tableview reloadData]`在加载完成时调用。缺点是这有点混淆了 MVC 模式。

# php - Symfony2 DOMCrawler selectLink 返回空 uri

> ID：12056339
> 
> 赞同：5
> 
> 时间：2012-08-21T13:49:36.140
> 
> 标签：php, symfony, functional-testing

我在编写功能测试和 DOMCrawler 时遇到问题。我的问题是通过链接抓取邮件内容。从文档中我看到可以使用 html 内容作为参数创建爬虫。所以这是我的代码块：

```
$mailCrawler = new Crawler($message->getBody());
$linkCrawler = $mailCrawler->selectLink('Link name');
$client->click($linkCrawler->link()); 
```

在第三行我有一个例外，因为 $linkCrawler 有空的 $uri 字段。异常消息：

```
InvalidArgumentException: Current URI must be an absolute URL (""). 
```

谁能告诉我为什么爬虫无法获取该链接？

我只能说 $message var getBody 方法返回正确的内容。

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-27T12:17:49.003

您需要指定根爬虫网址。例子：

```
$crawler = new Crawler('', 'http://www.example.com');
$crawler->addHtmlContent("
    <!DOCTYPE html>
    <html>
        <body>
            <a href=\"/rel-link\">rel-link-text</a>
            <a href=\"http://another.com/abs-link\">abs-link-text</a>
        </body>
    </html>
", 'UTF-8');

$cLink1 = $crawler->selectLink('rel-link-text')->eq(0);
$l1 = $cLink1->link();
echo $l1->getUri(); // http://www.example.com/rel-link

$cLink2 = $crawler->selectLink('abs-link-text')->eq(0);
$l2 = $cLink2->link();
echo $l2->getUri(); // http://another.com/abs-link 
```

# database - 网站“你可以做到”脚本

> ID：12056341
> 
> 赞同：0
> 
> 时间：2012-08-21T13:49:43.107
> 
> 标签：database

我想为访问我网站的新用户创建一条培训路径。此培训路径必须显示信息气泡，显示您可以在每个页面上执行的操作，但仅限于您第一次访问它时。

因此，例如，如果用户进入一个有编辑按钮的页面，则应该在编辑按钮旁边显示一个信息框，告诉用户他可以编辑该页面。

我将自己创建脚本，我只想知道检查用户是否已经看到该框的最佳方法是什么。我正在考虑在数据库中为每个信息框存储一个布尔值，如果用户看到该框，该值将设置为 true。为了从数据库中保存一些查询，我想我也可以将相同的值存储在 localStorage 或 Cookies 中。

为网站创建用户培训路径的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:09:59.073

我建议的方法是像你说的那样为每个气泡存储用户 ID（ip 或用户名？）和一个位值。

PS：对于您的脚本，您可以使用： http: [//www.maxvergelli.com/jquery-bubble-popup/documentation/](http://www.maxvergelli.com/jquery-bubble-popup/documentation/)

杰罗姆

# objective-c - performSelector:withObject:afterDelay: 无法更改延迟值

> ID：12056344
> 
> 赞同：-2
> 
> 时间：2012-08-21T13:49:53.073
> 
> 标签：objective-c, ios

我有一个由 performSelector:withObject:afterDelay: 调用的非常简单的方法：但是无论我为 afterDelay 分配什么值，该方法总是在 10 秒延迟后触发。该方法调用一个 URLRequest，当它完成时，调用另一个请求（不确定这是否有影响）。

我有：

```
-(void)connectionDidFinishLoading:(NSURLConnection*)connection {
    [self performSelector:@selector(poll) withObject:nil afterDelay: 1];
}
.....
-(void)poll
{
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    ....
    NSURLConnection *connection = [[[NSURLConnection alloc] initWithRequest:request delegate:self] autorelease];
    .....
} 
```

无论我为 afterDelay 分配什么值，该方法*总是*在 10 秒后调用。关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:07:45.673

您的 NSURLConnectionDelegate 是否在与主线程不同的线程上获取消息？如果是这样，请将您的消息发布到 mainThread：

```
NSLog(@"WILL SEND wait1sec");
[self performSelectorOnMainThread:@selector(wait1sec) withObject:nil waitUntilDone:NO]; 
```

然后

```
- (void)wait1sec
{
    NSLog(@"GOT wait1sec");
    [self performSelector:@selector(poll) withObject:nil afterDelay: 1];
}
- (void)poll
{
    NSLog(@"GOT poll()");
    ... 
```

PS：你可以用 dispatch_after() 更容易地做到这一点，但你没有提到块，所以没有去那里。

PS：尝试将此添加到您的所有委托消息中：

```
-(void....
{
    assert([NSThread isMainThread]);
    ... 
```

如果这不会使您的应用程序崩溃，那么某些东西正在阻塞我们的主 runLoop - 您的主线程上的那个 - 所以您可能正在某个地方等待某些东西。在这种情况下，您的 UI 将完全没有响应。

# android - 如何连接安卓蓝牙发送数据

> ID：12056349
> 
> 赞同：0
> 
> 时间：2012-08-21T13:50:02.277
> 
> 标签：android, bluetooth

我是Android新手，我正在尝试制作一个通过蓝牙连接和发送数据的应用程序，有人可以帮我启动我的应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T03:30:24.177

我不确定您到底要做什么，但这里有几个例子：

[http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-simple-spp.html](http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-simple-spp.html)

[http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-basic-bluetooth.html](http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-basic-bluetooth.html)

[http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-turning-led-on-and.html](http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-turning-led-on-and.html)

第一个示例展示了如何使用 Android 设备和 Windows PC 设置 SPP 客户端和服务器，并将数据从 Andriod 设备发送到 PC。在 Windows 上，它有 java 和 perl 中的服务器示例。

第二个示例展示了如何在 Android 设备和 Arduino 之间设置基本的蓝牙连接。

第三个示例以第二个示例为基础，展示了如何使用程序将数据从 Android 发送到 Arduino。

这些示例应该包含适用于 Android、Windows 和 Arduino 的所有代码。

希望这可以帮助。

# ruby-on-rails - 屏蔽控制器功能——Rails3

> ID：12056353
> 
> 赞同：0
> 
> 时间：2012-08-21T13:50:17.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想隐藏或屏蔽*example.com/users/$ID/edit*为*example.com/profile/edit*。

配置/路由.rb

```
resources :users 
```

应用程序/控制器/users_controller.rb

```
def edit
@user = User.find(params[:id])
end 
```

* * *

我试过添加路线

```
match '/profile/edit' => 'users#edit', :as => :edit_profile 
```

但是，当我访问*example.com/profile/edit*时，编辑方法抱怨无法找到用户的 ID。

有没有办法可以从浏览器中屏蔽 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:12:19.163

如果您尝试编辑当前用户的个人资料，您可以在编辑操作中使用以下内容：

```
 def edit
      @user = User.find_by_id( params[:id] ) || current_user
    end 
```

如果找不到用户，这将首先尝试通过返回 nil 的 id 参数查找用户，如果返回值为 nil，它将设置`@user`为`current_user`辅助方法的返回值。这假设您正在使用像[Devise](https://github.com/plataformatec/devise)这样的东西，它提供了`current_user`获取当前登录用户的方法。

另一个注意事项。您应该更改路由中的 match 以指定只有 get 请求对编辑操作有效。

```
 get 'profile/edit' => 'users#edit' , as: edit_profile 
```

如果您试图阻止用户编辑其他人的个人资料，则在加载用户后需要以下内容：

```
 redirect_to( root_path ) and return unless @user == current_user 
```

这将使当前用户无法编辑其他用户的个人资料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:09:46.817

如果您想允许登录用户更改其个人资料，也许您需要将用户的 ID 存储在会话中。

因此，当用户登录时，您将其 ID 保存到会话中：

```
session[:user_id] = ... 
```

然后您的编辑方法将如下所示

```
def edit
  @user = User.find(session[:user_id])
end 
```

如果该解决方案不是您想要的，那么您可能只需要将 ':id' 参数添加到匹配代码中。

# html - 如何在 Bootstrap/CSS 中正确对齐此标题？

> ID：12056355
> 
> 赞同：0
> 
> 时间：2012-08-21T13:50:17.700
> 
> 标签：html, css, twitter-bootstrap, alignment, responsive-design

我开始模拟一个基于 Twitter 的 Bootstrap 框架的 WordPress 主题。有人可以验证我到目前为止的代码是否是犹太洁食吗？

更具体地说，标题...我在头像旁边有我的名字和副标题。我希望文本垂直显示在图像中间。当页面足够宽时，这可以成功（screengrab：imgur.com/YCpSm）。但是，当我减小浏览器宽度并启动响应式设计时，文本会向上移动（截屏：imgur.com/K4Vyj）。

如何确保文本保持在图像的垂直中心？

谢谢。

--

代码： http: [//jsfiddle.net/robertandrews/jP4nT/](http://jsfiddle.net/robertandrews/jP4nT/)（包含标准 bootstrap.css、标准 bootstrap-responsive.css 和自定义 CSS 合二为一）

页面：http: [//jsfiddle.net/robertandrews/jP4nT/embedded/result/](http://jsfiddle.net/robertandrews/jP4nT/embedded/result/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:07:30.383

您可以使用浮动元素而不是绝对定位：http: [//jsfiddle.net/jP4nT/1/](http://jsfiddle.net/jP4nT/1/)

我也不会在 <p> 中放置 <h1> 标记，但这可能没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:36:15.863

这可能更简单：http: [//jsfiddle.net/6FMDR/](http://jsfiddle.net/6FMDR/)

*   不需要额外的 html 标签

*   更少的 CSS

**CSS：**

```
.myheader {
  padding:15px 0 20px;
  display:block;
}

.myheader img {
   float: left;
   padding:0 15px 10px 0;    
}

.myheader h1 {
   margin-top: 10px;
} 
```

# concurrency - 多线程代码的大复杂度

> ID：12056356
> 
> 赞同：1
> 
> 时间：2012-08-21T13:50:19.220
> 
> 标签：concurrency, time-complexity

受多线程影响的算法的运行时间如何指定？

例如，CompareAndSet 循环可能永远不会被满足（如果你很不走运的话）

```
AtomicReference<ContainerOfItems> oldContainer;

void AddItem(Item aItem)
{
    ContainerOfItems newContainer;

    do
    {
        newContainer = null;
        newContainer = new ContainerOfItems();
        newContainer.CopyContents(oldContainer);
        newContainer.Add(aItem);
    }
    while (!CompareAndSet(oldContainer, newContainer));

    oldContainer = null;
} 
```

在这个例子中（看起来很像 Java，但实际上是伪代码），CopyContents 操作可能需要很长时间，这样 oldContainer 已被其他线程替换，导致`CompareAndSet`失败。这段代码的运行时间是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:55:24.867

> 这段代码的运行时间是多少？

程序的整体运行时间很大程度上取决于需要多长时间以及对导致失败`copyContents(...)`的竞争条件的频率的预测。`compareAndSet(...)`这将取决于同时运行的线程数。

但是，我怀疑就 Big-O 而言，循环的次数`compareAndSet(...)`并不重要。例如，如果 a`copyContents(...)`需要 O(N) 时间来运行，平均它必须循环 3 次才能完成`compareAndSet(...)`，而你运行它 N 次来添加所有项目，它是 O(N^2) -- 3 由于常数而退出。

此外，因为您暗示并发，也会有一个因素速度的提高，因为算法将是多线程的，但这也只是一个恒定的因素改进，不会影响 Big-O。因此，可以通过查看 Big-O 的`copyContents(...)`次数（我假设）N来计算 Big-O。

# magento - Magento：ImageCdn 错误？（很长的故事）

> ID：12056357
> 
> 赞同：6
> 
> 时间：2012-08-21T13:50:23.233
> 
> 标签：magento

我有一些与 Magento 的免费扩展[OnePica ImageCdn](http://www.magentocommerce.com/magento-connect/onepica-imagecdn.html)有关的问题。

当我上传“损坏的图像”时，前端出现损坏的图像。 ![在此处输入图像描述](../Images/5cdd4744b9b562b32dae01e305b0391c.png)

好的，让我们开始长篇大论：

我注意到这是因为 ImageCdn 扩展和“损坏的图像”而发生的。

在 ImageCdn 的部分代码中：

```
OnePica_ImageCdn_Helper_Image

/**
 * In older versions of Magento (<1.1.3) this method was used to get an image URL.
 * However, 1.1.3 now uses the getUrl() method in the product > image model. This code
 * was added for backwards compatibility.
 *
 * @return string
 */
public function __toString()
{
    parent::__toString();
    return $this->_getModel()->getUrl();
} 
```

我的问题是，有人知道该代码的目的是什么吗？我不明白他们上面的评论是什么意思。我认为这是一个错误，因为它总是`return $this->_getModel()->getUrl();`

真的是一个错误还是只是我的错误解释？

这是我到目前为止所做的：

*   我有一张图片`dummy.jpeg`
*   经过一番调查，我才意识到这是一个“腐败的形象”。
*   我测试使用：`<?php print_r(getimagesize('dummy.jpeg')); ?>`

结果：

> ```
> Array
> (
>     [0] => 200
>     [1] => 200
>     [2] => 6
>     [3] => width="200" height="200"
>     [bits] => 24
>     [mime] => image/x-ms-bmp
> ) 
> ```

当然，我对结果感到惊讶，因为当我使用`Preview`（在 Mac OSX 上） 打开它时它看起来不错![看起来不错](../Images/38e95aa764ff80ea0b9020274def088b.png)

*   然后我用十六进制编辑器打开它，前两个字节是：`BM`这是BMP的标识符
*   我尝试为产品上传 .bmp 图片 -> 失败，无法选择图片
*   我让我的同事也上传它（在 Ubuntu 上），他能够将文件类型的选择更改为“任何文件”。当他单击“上传文件”时，显示的错误消息表明不允许该类型的文件。
*   我脑海中闪过的是：管理员试图上传`.bmp`图片但失败了。然后他将其重命名为`.jpeg`并成功。虽然我不明白什么样的图像可以重命名而不显示损坏的图像徽标（超出主题）。
*   这些场景会触发异常，我将分解我所追踪的内容。

代码跟踪：

> *   app/design/frontend/base/default/catalog/product/view/media.phtml

```
<?php
    $_img = '<img id="image" src="'.$this->helper('catalog/image')->init($_product, 'image').'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'" />';
    echo $_helper->productAttribute($_product, $_img, 'image');
?> 
```

*   从该代码中，我知道图像 url 是使用以下方法生成的：`$this->helper('catalog/image')->init($_product, 'image')`
*   我做了`Mage::log((string)$this->helper('catalog/image')->init($_product, 'image'));`

> 结果： `http://local.m.com/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/d/u/dummy.jpeg`

.

> *   Mage_Catalog_Helper_Image

```
public function __toString()
{
    try {
        if( $this->getImageFile() ) {
            $this->_getModel()->setBaseFile( $this->getImageFile() );
        } else {
            $this->_getModel()->setBaseFile( $this->getProduct()->getData($this->_getModel()->getDestinationSubdir()) );
        }

        if( $this->_getModel()->isCached() ) {
            return $this->_getModel()->getUrl();
        } else {
            if( $this->_scheduleRotate ) {
                $this->_getModel()->rotate( $this->getAngle() );
            }

            if ($this->_scheduleResize) {
                $this->_getModel()->resize();
            }

            if( $this->getWatermark() ) {
                $this->_getModel()->setWatermark($this->getWatermark());
            }
Mage::log('pass');
            $url = $this->_getModel()->saveFile()->getUrl();
Mage::log('not pass');
        }
    } catch( Exception $e ) {
        $url = Mage::getDesign()->getSkinUrl($this->getPlaceholder());
    }
    return $url;
} 
```

*   中触发的错误`$this->_getModel()->saveFile()->getUrl()`。在代码的某些部分，它最终会达到：

> Varien_Image_Adapter_Gd2

```
private function _getCallback($callbackType, $fileType = null, $unsupportedText = 'Unsupported image format.')
{
    if (null === $fileType) {
        $fileType = $this->_fileType;
    }
    if (empty(self::$_callbacks[$fileType])) {
        //reach this line -> exception thrown
        throw new Exception($unsupportedText);
    }
    if (empty(self::$_callbacks[$fileType][$callbackType])) {
        throw new Exception('Callback not found.');
    }
    return self::$_callbacks[$fileType][$callbackType];
} 
```

> *   在前面的代码中捕获了异常：

```
Mage_Catalog_Helper_Image
public function __toString()
{
    ...
    } catch( Exception $e ) {
        $url = Mage::getDesign()->getSkinUrl($this->getPlaceholder());
    }
    ...
} 
```

> $url 变成了： `http://local.m.com/skin/frontend/default/default/images/catalog/product/placeholder/image.jpg`

*   那么，它应该已经生成了占位符图像吧？ ![占位符](../Images/360b207be2ef529ed21a51624426ba6b.png) （没有 ImageCdn 扩展名）
*   没有为什么

> `Mage_Catalog_Helper_Image`被重写 `OnePica_ImageCdn_Helper_Image`

```
public function __toString()
{
    parent::__toString(); //the result is http://local.m.com/skin/frontend/default/default/images/catalog/product/placeholder/image.jpg but no variable store/process its value
    return $this->_getModel()->getUrl(); //in the end it will return http://local.m.com/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/d/u/dummy.jpeg
} 
```

万一你们都已经忘记了这个问题：有人知道该代码的目的是什么吗？我不明白他们上面的评论是什么意思。这真的是一个错误还是只是我的错误解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:09:49.583

不，这不是错误。它只是对旧 Magento 系统的遗留支持。我想知道，您是否曾经四处窥探过早期版本的 magento（如内联文档注释所引用的，< 1.1.3）？

事情的要旨是在 Mage 1.1.3 之前，`Mage_Catalog_Helper_Image`实例碰巧从 to-string 转换产生 URL，例如

```
$image = (some instance of Mage_Catalog_Helper_Image).. ;
$imageUrl = (string) $image; 
```

`__toString`可能是`protected`或者`private`，我不确定，但我确定通常的做法是始终编写这个魔法方法，以便在你打算用这种方法重写一些东西的类中使用它数据投射。

# ruby - Ruby 程序退出太快，数据被覆盖

> ID：12056358
> 
> 赞同：0
> 
> 时间：2012-08-21T13:50:28.767
> 
> 标签：ruby

我正在编写一个 Ruby 程序来模拟课程管理系统。就我的程序目前而言，当用户第一次加载程序时，他们会看到一个菜单。我目前正在处理菜单中的第一个选项——将模块添加到方案中。

一步一步地工作，当用户从菜单中选择这个选项时，他们被要求输入一个方案名称，该名称被保存为名为“方案”的哈希中的键。然后他们被要求输入一个模块名称，该名称保存到哈希中，在属于他们刚刚输入的方案的键下。

然后打印出一行，告诉用户该方案和模块已添加到系统中。

然后询问他们是否要添加另一个模块。这是我有几个问题的地方：

A. 如果用户键入'y'，他们被要求输入方案——如果他们输入的方案已经存在，他们被告知，如果不存在，它被创建，然后他们被要求输入模块名称。然后询问他们是否要添加另一个模块。如果用户键入“n”当前存在的方案，连同它们的模块一起被打印出来，程序退出。

B. 在这种情况下，我在同一个方案中添加了两个模块，但只打印了最后一个模块，所以大概是覆盖了输入的第一个模块 - 我如何确保不会发生这种情况，并且在第一个模块被保存到“方案”散列之后，任何后续模块都附加到散列的末尾，而不是替换已经存在的模块？

1.  如何确保当用户在步骤 A 键入“n”时程序不会退出，而是返回到主程序菜单？

2.  如何确保保存到散列的第一条数据不会被我保存到散列的任何后续数据覆盖，而是它们成为单独的条目？（这里的想法是有一些类似于 Java ArrayList 的东西，它会自动将下一位数据添加到下一个数组元素中，该数组元素可以自由增加数值）

我拥有的两个类是 Application（充当我与用户的接口）和 CourseModules（存储用户输入的数据的位置）。

Application.rb 目前看起来像这样：

```
class Application
# To change this template use File | Settings | File Templates.
require './courseModules.rb'
def initialize
  mainMenu
end

=begin
  def navigateTo(what)
    what.new(v).display
    mainMenu
  end
=end

  def mainMenu
    puts "What would you like to do?
      1: Add module to a scheme
      2: Remove module from a scheme
      3: Query modules
      4: Modify module
      5: Register a student on a scheme
      6: Remove a student from a scheme
      7: Register a student on a module
      8: Remove a student from a module"
    case gets.strip
      when "1"
        CourseModules.add_module
      when "2"
        CourseModules.removeModuleFromScheme
      when "3"
        navigateTo CourseModules
      when "4"
        navigateTo CourseModules
      when "5"
        navigateTo Student
      when "6"
        navigateTo Student
      when "7"
        navigateTo Student
    end
  end
  Application.new
end 
```

CourseModules.rb 目前看起来像这样：

```
class CourseModules
# To change this template use File | Settings | File Templates.
@@moduleScheme = nil
@@moduleYear = nil
#@moduleTitle = ""
@noOfModulesInScheme = 0

def self.moduleYear
  @@moduleYear
end

def initialize(v)
  @val = v
end
# Set and get the @val object value
def set (v)
  @val = v
end
def get
  return @val
end

# Attempt at add_module method on 21/08/2012 at 12:35
def self.add_module
  schemes = {}
  scheme_exists = false
  add_another_module = true

 while add_another_module
   print "Enter scheme name: "
   scheme_name = gets
   schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

   if !scheme_exists
     print "Enter module name: "
     module_name = gets
     schemes[scheme_name.chop] = module_name.chop
     puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
   else
     scheme_exists = false
     puts "This scheme has already been added"
     puts "Enter module name: "
     module_name = gets
     schemes[scheme_name.chop] = module_name.chop
     puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
   end

   print "Add another module? "
   ask_if_user_wants_to_add_another_module = gets
   if !(ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module.chop == "yes")
     add_another_module = false
   end
 end
 puts schemes
 end

 end
 def removeModuleFromScheme
   moduleName.moduleScheme = nil
 end

 def queryModule

end 
```

* ***21/08/2012 18:00 编辑*****

好的，我的 courseModules 类现在看起来像这样：

```
class CourseModules
# To change this template use File | Settings | File Templates.
@@moduleScheme = nil
@@moduleYear = nil
#@moduleTitle = ""
@noOfModulesInScheme = 0

def self.moduleYear
 @@moduleYear
end

def initialize(v)
 @val = v
end
# Set and get the @val object value
def set (v)
 @val = v
end
def get
 return @val
end

# Attempt at add_module method on 21/08/2012 at 16:30
def self.add_module
 schemes = {}
 scheme_exists = false
 add_another_scheme = true
 add_another_module = true

 while add_another_scheme
   print "Enter scheme name: "
   scheme_name = gets
   @schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

   if !scheme_exists
     @schemes[scheme_name.chop] = []
     puts "Scheme #{scheme_name.chop} has been added to the system"
   else
     scheme_exists = false
     puts "This scheme has already been added"
   end

   while add_another_module
     print "Enter module name: "
     module_name = gets
     @schemes[scheme_name.chop].include?(module_name.chop) ? true : @schemes[scheme_name.chop] << module_name.chop
     print "Add another module? "
     ask_if_user_wants_to_add_another_module = gets
     if(!ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module == "yes")
      add_another_scheme = false
   end

 end

 print "Add another scheme? "
 ask_if_user_wants_to_add_another_scheme = gets
 if !(ask_if_user_wants_to_add_another_scheme.chop == "y" or ask_if_user_wants_to_add_another_scheme.chop == "yes")
   add_another_scheme = false
 end
 puts @schemes

end

 while add_another_module
   print "Enter scheme name: "
   scheme_name = gets
   schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

   if !scheme_exists
     print "Enter module name: "
     module_name = gets
     schemes[scheme_name.chop] = module_name.chop
     puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
   else
     scheme_exists = false
     puts "This scheme has already been added"
     puts "Enter module name: "
     module_name = gets
     schemes[scheme_name.chop] = module_name.chop
     puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
   end

   print "Add another module? "
   ask_if_user_wants_to_add_another_module = gets
   if !(ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module.chop == "yes")
     add_another_module = false
   end
 end
 puts schemes
end

end 
```

但是现在，当我从菜单中选择“1”并输入方案名称时，我在线上出现错误：

```
@schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false 
```

它说

> 在`add_module': undefined method`has_key 中？对于 nil:NilClass (NoMethodError)

有谁知道我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:59:32.453

正如我在另一个线程上告诉你的，如果你需要方案和模块之间的 1:M 关系，你需要将模块存储在数组中。您还需要将方案哈希重新定义为实例变量。即在

```
def initialize
   @schemes = {}
   # ... your other code
end

def self.add_module
    scheme_exists = false
    add_another_scheme = true

    while add_another_scheme
        add_another_module = true 
        print "Enter scheme name: "
        scheme_name = gets
        @schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

        if !scheme_exists
            @schemes[scheme_name.chop] = []
            puts "Scheme #{scheme_name.chop} has been added to the system"
        else
            scheme_exists = false
            puts "This scheme has already been added"
        end

        while add_another_module
            print "Enter module name: "
            module_name = gets
            @schemes[scheme_name.chop].include?(module_name.chop) ? true : @schemes[scheme_name.chop] << module_name.chop
            print "Add another module? "
            ask_if_user_wants_to_add_another_module = gets
            if !(ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module.chop == "yes")
               add_another_module = false
            end 
        end

        print "Add another scheme? "
        ask_if_user_wants_to_add_another_scheme = gets
        if !(ask_if_user_wants_to_add_another_scheme.chop == "y" or ask_if_user_wants_to_add_another_scheme.chop == "yes")
           add_another_scheme = false
        end
    end
    puts @schemes
end 
```

# ole - 为什么我不能在 Dynamics NAV 中编译包含 OCX 的对象？

> ID：12056359
> 
> 赞同：1
> 
> 时间：2012-08-21T13:50:28.767
> 
> 标签：ole, navision, dynamics-nav

我从文本文件中导入了一个 Form 对象。当我尝试编译它时，我收到以下错误消息：

> 此消息适用于 C/AL 程序员：
> 由“Microsoft Common Dialog Control 6.0 (SP3)”标识的 OLE 控件或自动化服务器。CommonDialog 需要设计时许可证。无法获得此许可证。确保使用适当的许可证正确安装了 OLE 控件或自动化服务器”

我正在使用开发人员许可证在 Dynamics NAV 中进行开发。OCX 已正确注册，在 NAV 的“自定义控件”中列为指向“C:\Windows\SysWOW64\comdlg32.ocx”。
为什么我不允许编译对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:34:33.870

正如您所说，所讨论的许可证纯粹是为了在设计时环境中使用 CommonDialog 组件。这与您的 NAV 许可证或您的客户能够运行使用该组件的代码无关。设计时许可证（只不过是系统注册表中的一个键；不是实际的许可证文件）用于安装 Microsoft Visual Basic 6.0 或更早版本的 Microsoft Visual Studio。

如果您可以访问 VB6.0 或 VS2005，则可以使用安装盘上的 VB6Controls.reg，如下所述：http: [//support.microsoft.com/default.aspx](http://support.microsoft.com/default.aspx?scid=kb;en-us;318597) ?scid=kb;en-us;318597 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T07:04:11.350

还有一个技巧可以解决这个问题，避免安装很多像 VB6.0 这样的垃圾。

此消息与您尝试编译的对象中的某些自动化类型变量有关。

您可以从其他数据库中的任何其他**编译**对象或同一数据库中的任何其他**编译**对象复制此变量。然后您导入的对象将神奇地编译。只需从导入对象的变量列表中删除变量，然后使用复制粘贴将其从编译对象中复制。

 **我不知道那是什么魔法，但它对我有用很多次。我在数据库的恢复备份中从同一对象复制了变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:53:09.720

正如消息所说，组件加载，尝试获得许可证而不是获得许可证。因此，您没有它所说的，或者您在组件查看它的路径查找中没有它。**

# ios - ios - 归档应用程序和创建二进制文件有什么区别？

> ID：12056365
> 
> 赞同：0
> 
> 时间：2012-08-21T13:50:49.080
> 
> 标签：ios, ios5

我已经开始将我的应用程序提交到苹果商店的步骤，并且我已经制作了一个钥匙串安全文件，并做了一个代码库的存档。

但据我了解，我必须制作一个代码库的二进制文件，它只是一个 zip 文件，然后上传到 iTunes Connect，对吗？

归档代码库有什么意义？那没有创建二进制文件吗？以及如何正确签署二进制文件以便可以将其提交到苹果商店？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:04:51.977

您在这里使用了许多术语，但没有正确使用所有术语。

“代码库”通常是指作为应用程序一部分的整个文件集合。其中最重要的是源代码文件，但大多数人还会包含诸如 XML 文件、字符串文件、图像、项目文件和其他资源之类的东西。“代码库存档”听起来像是您将所有这些都放在一个 zip 文件中以安全保存。我理解你的意思是你使用了 Xcode 的“存档”命令，但这有几件事：

*   将程序编译成应用程序包（应用程序包是一个*包含*可执行“二进制”文件的目录，但也包含应用程序所需的其他资源）

*   使用您的私钥和分发条款签署捆绑包

*   压缩应用程序

*   将存档与调试符号文件一起保存在 Xcode 的管理器中，以便您以后可以对收到的任何崩溃日志进行符号化

*   可选择将应用程序提交给 iTunesConnect 进行审核、保存应用程序或将应用程序邮寄给某人

“创建二进制”实际上只是意味着创建某种二进制（即非文本）文件，但人们通常认为所讨论的二进制文件是可执行的。所以是的，使用 Xcode 的“存档”命令将“创建一个二进制文件”，但它进一步确保“二进制文件”以正确的格式存储以提交给 iTunesConnect 或分发给用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T13:58:37.147

创建存档还保存了符号化崩溃报告所需的 .dsym 文件。

有关存档的更多信息，请参阅本文：http: [//developer.apple.com/library/ios/#qa/qa1764/_index.html](http://developer.apple.com/library/ios/#qa/qa1764/_index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:00:01.060

您可以使用 Xcode 将二进制文件提交到 iTunes 连接。此外，二进制文件已经使用配置/分发配置文件进行了签名。

为了正确签署二进制文件，您需要使用分配给应用程序的应用程序 ID 创建分发配置文件。您编译您的应用程序并制作存档。您可以前往 Xcode 的管理器将您的应用程序提交到应用商店。

# javascript - 查找所有为 textmode=password 的 asp:textboxes 并将显示更改为 none

> ID：12056367
> 
> 赞同：0
> 
> 时间：2012-08-21T13:50:54.473
> 
> 标签：javascript, jquery

有没有办法找到所有 asp:textboxes 其中 textmode=password 并将它们的显示更改为 none 或者我需要给它们一个类？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:54:06.850

带有文本模式“密码”的文本框将呈现为`<input type="password" />`. 使用 JavaScript/jQuery 时，您唯一需要关心的是渲染输出；客户端将没有用于呈现它的代码的概念。

要隐藏所有，只需使用：

```
$('input[type=password]').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:55:58.863

```
$('[type="password"]').css("display", "none"); 
```

# encryption - Shibboleth 用户属性加密

> ID：12056368
> 
> 赞同：0
> 
> 时间：2012-08-21T13:50:59.990
> 
> 标签：encryption, encryption-asymmetric, encryption-symmetric, saml-2.0, shibboleth

Shibboleth 如何保证第 3 方无法访问 IdP 和 SP 之间交换的 SAML 2.0 断言中包含的用户属性？

从 IdP 传输到 SP 时，所有用户属性都被加密是否正确？用户属性是否使用对称密钥加密，该对称密钥也包含在断言中，但使用 SP 的公钥加密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:25:19.787

我怀疑 Shibboleth 会做任何事情来*保证*用户属性是加密的。根据[SAML 2.0 规范（pdf）](https://www.oasis-open.org/committees/download.php/35387/sstc-saml-bindings-errata-2.0-wd-05-diff.pdf)：

> SAML 请求和 SAML 响应的消息机密性是可选的，取决于使用环境。

但是，SAML 2.0[确实允许使用消息级机密性保证 (pdf)](http://docs.oasis-open.org/security/saml/v2.0/saml-sec-consider-2.0-os.pdf)，包括[XMLEnc](http://www.w3.org/TR/xmlenc-core/)和[XMLSig](http://www.w3.org/TR/xmldsig-core/)（[Shibboleth 都支持](https://wiki.shibboleth.net/confluence/display/SHIB2/IdPXMLSigEnc)）以及可能支持其他消息级机密性模式的自定义配置文件或属性类型。

# asp.net - 使用 Response.OutputStream.Write 向浏览器发送文件时如何设置页面标题

> ID：12056376
> 
> 赞同：4
> 
> 时间：2012-08-21T13:51:21.547
> 
> 标签：asp.net, vb.net, http-headers, content-disposition

我有一个页面，用于从数据库中提取文件并提示下载或流式传输到浏览器，具体取决于 URL 的格式。这工作正常，但是当我尝试设置页面标题并且它默认为 URL 中的域名时，我所做的一切都不起作用。

我意识到这很可能发生，因为我正在使用将二进制文件发送到浏览器`Response.OutputStream.Write(buffer, 0, bytesRead)`，因此根据我在网上找到的其他内容“我正在用二进制文件填充缓冲区，所以我无法控制标题”

> 您正在用二进制文件填充缓冲区，没有 HTML，因此没有标题标签。我不确定此时您是否可以控制浏览器中的 Title 标记。让我检查一下我现在拥有的带有 PDF 的页面。至少在我正在查看的示例中，这似乎无法做到。我打开了另一个 PDF，但它直接指向本地文件，并且在浏览器中设置了 Title 标签。我不确定这是否嵌入在 PDF 中。

在这里找到：[http ://forums.asp.net/t/1088814.aspx/1](http://forums.asp.net/t/1088814.aspx/1)

我已经尝试了所有正常的地方来设置页面标题：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="FileServer.aspx.vb" Inherits="FileServer" Title="Title goes here" %> 
```

或者

```
<head runat="server">
    <title>Title goes here</title>
</head> 
```

或者

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim FileNumber As String = RouteData.Values("FileNumber")
        Dim Disposition As String = RouteData.Values("Disposition")

        If FileNumber IsNot Nothing Then
            Title = "Title goes here"
            ServeFile(FileNumber, Disposition)
        End If
End Sub 
```

我有什么办法可以设置这个标题还是我不​​走运？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:55:54.760

您不能在将文件发送到浏览器的同时设置标题。为了让浏览器改变“页面”的标题，它需要实际渲染一个 HTML 文档（即它需要渲染一个页面）。

在这种情况下，您不会发送任何有效的 HTML 内容，因此您发送的内容会被下载。

如果你想这样做，你需要做的就是做一种“反弹”。重定向到呈现标题的页面以及您想要的任何其他内容（即 aspx 页面）。并从该页面“反弹”浏览器进行下载。

# winapi - 如何从 Google Chrome 扩展程序向桌面应用程序发送消息？

> ID：12056380
> 
> 赞同：11
> 
> 时间：2012-08-21T13:51:51.717
> 
> 标签：winapi, google-chrome, google-chrome-extension, message, desktop-application

我有一个 Windows 桌面应用程序，它必须与我的 Chrome 扩展程序协同工作。

我可以通过 Google Chrome 扩展以某种方式向我的桌面应用程序发送消息吗？

我可以使用哪些 IPC 对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T14:27:55.813

我看到三个选项：

1.  你可以使用互联网。您可以拥有一个远程服务，Chrome 扩展程序和您的桌面应用程序都可以与之通信，以进行通信。
2.  您可以让您的桌面应用程序内置一个简单的服务器，以便 chrome 扩展程序可以向它发出本地 http 请求以与之通信。
3.  ~~使用 Google NPAPI 插件功能可以完全访问计算机。~~ [现在已弃用](https://developer.chrome.com/apps/npapi)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-03T17:21:18.760

如今，您将使用 Chrome 的原生消息传递 API 将消息从您的扩展程序发送到原生消息传递主机。后者可以是“真正的”可执行文件，然后将消息传递到您的桌面应用程序。

文档：http: [//developer.chrome.com/extensions/messaging#native-messaging-host](http://developer.chrome.com/extensions/messaging#native-messaging-host)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-03T17:43:05.590

chrome 扩展有一个`native massage api`与本机进程通信，

看这里：

[https://developer.chrome.com/apps/nativeMessaging](https://developer.chrome.com/apps/nativeMessaging)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T14:02:06.300

这几乎肯定需要一个自定义的[NPAPI 插件](http://developer.chrome.com/extensions/npapi.html)，并且不能使用基本的扩展 API 来完成。NPAPI 开发相当艰巨，超出了我的专业领域，但请随意阅读[Google 关于该主题的文档](http://developer.chrome.com/extensions/npapi.html)。

作为替代方案，也许您可​​以让您的桌面应用程序轮询扩展的内部。例如，扩展程序的沙盒文件系统中可能有一个文件，它会在其中留下消息供桌面应用程序查找。这种方法不是最理想的，因为它需要轮询而不是推送，但它确实为您节省了编写 NPAPI 插件的麻烦。

# android - httpGet 请求错误 W/System.err(6388): android.os.NetworkOnMainThreadException

> ID：12056382
> 
> 赞同：0
> 
> 时间：2012-08-21T13:51:55.997
> 
> 标签：android, android-activity, http-get

我想从我的网络服务中获取返回值。

我有管理 HTTPRequest 的课程：

```
public class RatePromotions 
{
    public RatePromotions() {}

    public String executeHttpGet(String url) throws Exception 
    {
        BufferedReader in = null;
        try 
        {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI(url));
            HttpResponse response = client.execute(request);
            in = new BufferedReader
            (new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) 
            {
                sb.append(line + NL);
            }
            in.close();

            String returnedRate = sb.toString();
            System.out.println(returnedRate);

            return returnedRate;
        }
        finally 
        {
            if (in != null) 
            {
                try 
                {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

它看起来非常基本。

然后我的 WebService 应该返回我：是或否。

我这样使用它：

```
RatePromotions rating = new RatePromotions();
                String uid = Secure.getString(getContentResolver(),Secure.ANDROID_ID);
                String url = "http://developer.prixo.fr/API/RatePromo?promo="+promofrombdd.getIdentifier()+"&uid="+uid+"&rate="+"1";

                try {
                    if (rating.executeHttpGet(url).equals("YES"))
                    {
                        dialog.cancel();
                        Toast.makeText(TabPromotionsSingleItemActivity.this, "Promotion notee.", Toast.LENGTH_SHORT).show();
                    }
                    else
                    {
                        dialog.cancel();
                        Toast.makeText(TabPromotionsSingleItemActivity.this, "Impossible de prendre en comptre votre vote. " +
                            "Merci de réessayer.", Toast.LENGTH_LONG).show();
                    }
                } catch (Exception e) {
                    dialog.cancel();
                    Toast.makeText(TabPromotionsSingleItemActivity.this, "Impossible de prendre en comptre votre vote. " +
                        "Merci de réessayer.", Toast.LENGTH_LONG).show();
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

但它返回给我的只是吸引人的东西..

查看我的系统错误：

```
08-21 15:45:45.870: W/System.err(6388): android.os.NetworkOnMainThreadException
08-21 15:45:45.870: W/System.err(6388):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
08-21 15:45:45.870: W/System.err(6388):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
08-21 15:45:45.870: W/System.err(6388):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
08-21 15:45:45.870: W/System.err(6388):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-21 15:45:45.875: W/System.err(6388):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
08-21 15:45:45.875: W/System.err(6388):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-21 15:45:45.875: W/System.err(6388):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-21 15:45:45.875: W/System.err(6388):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
08-21 15:45:45.875: W/System.err(6388):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-21 15:45:45.875: W/System.err(6388):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-21 15:45:45.875: W/System.err(6388):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-21 15:45:45.875: W/System.err(6388):     at com.dev.prixo.webservice.RatePromotions.executeHttpGet(RatePromotions.java:53)
08-21 15:45:45.875: W/System.err(6388):     at com.dev.prixo.TabPromotionsSingleItemActivity$4.onClick(TabPromotionsSingleItemActivity.java:222)
08-21 15:45:45.875: W/System.err(6388):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:168)
08-21 15:45:45.875: W/System.err(6388):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 15:45:45.875: W/System.err(6388):     at android.os.Looper.loop(Looper.java:137)
08-21 15:45:45.875: W/System.err(6388):     at android.app.ActivityThread.main(ActivityThread.java:4517)
08-21 15:45:45.875: W/System.err(6388):     at java.lang.reflect.Method.invokeNative(Native Method)
08-21 15:45:45.875: W/System.err(6388):     at java.lang.reflect.Method.invoke(Method.java:511)
08-21 15:45:45.875: W/System.err(6388):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
08-21 15:45:45.875: W/System.err(6388):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
08-21 15:45:45.875: W/System.err(6388):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:54:42.590

听起来您正试图在 UI 线程中发出 http 请求。从 Android 3.0 开始，您必须将您的请求放在另一个线程中。

看到那个帖子：[HonyComb 和 DefaultHttpClient](https://stackoverflow.com/questions/4821845/honycomb-and-defaulthttpclient)

# c# - 选择合适的微控制器来连接 RFID 和 C# 开发的软件

> ID：12056388
> 
> 赞同：2
> 
> 时间：2012-08-21T13:52:02.880
> 
> 标签：c#, c, microcontroller, rfid, firmware

我目前正在领导一个团队设计一种新设备，该设备涉及对与软件集成的微控制器进行编程。

我的想法很简单：

> *   使用微控制器检测 RFID（大多数酒店房卡中的那种，也就是你把它拿到扫描仪上，它会获取 RFID ID），然后与将用 C# 编写的软件应用程序接口。

微控制器要求：

> *   读取 RFID 的能力（我假设应该只需要 I/O 引脚，因此它可以连接到广播 ID 的收发器）。
>     
>     
> *   通过 USB 与 C# 通信的能力。
>     
>     
> *   应该用C编程
>     
>     
> *   电路板上应该有引脚，试图避免运行微处理器的原型板和电路。

我听说 PIC32 将是一个不错的选择，但不确定我会选择哪种板。

我发现的一个可能的扫描仪是[https://www.sparkfun.com/products/8628](https://www.sparkfun.com/products/8628)

什么是一个好的控制器，我不是在寻找超快的微控制器，我只需要它来完成它的工作并向软件报告（RFID ID）？

我认为 C# 将是开发软件应用程序来做这个项目的最简单的语言，还有其他人有什么其他建议吗？

我有一年的时间做这个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:41:35.620

如果您的预算最高为 800 美元，并且其中包括评估板、RFID 评估板、编程工具、编译器、电子设备、PCB 和组件，那么这会限制您的很多选择。

MCU 执行的工作看起来并不太复杂：只是在连接到 RFID 芯片的 UART（或 SPI）和 USB 之间传递数据包。一个简单、便宜的 MCU 应该没问题。这里不需要强大的 ARM。我建议使用 TI 的 MSP430 之类的产品。对于小于 16k 的二进制文件，c 编译器是免费的。这似乎是这里的情况。调试器价格实惠：100 美元。MSP430 评估板的价格约为 30 美元。

但这不仅仅是软件问题。您需要执行一些电子设计。但是，如果您最终想要一个“产品”而不是一些连接在一起的评估板，那么这是要付出的代价，这更像是一种概念证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:38:14.723

如果您对 C# 感到满意，则可以使用 .netmf 板。我有[FEZ Panda II](http://www.ghielectronics.com/catalog/product/256/)板，它允许您在 .net + Visual Studio 中编写所有嵌入式代码。它使用 ARM 处理器。此外，该公司还提供了许多不同的附加模块，它们可能对您有用。这里唯一需要注意的是，在微处理器上运行这样的托管环境并不能让您高度控制时间，从您的项目的声音来看，这应该不是一个大问题。它也是一种非常便宜的解决方案，并且价格与 arduino 之类的产品相同。

Arduino 也非常易于使用，并且更“低级”，抽象层更少。这些还有大量的附加组件。

# javascript - IE9 上的 Javascript srcElement 属性

> ID：12056390
> 
> 赞同：1
> 
> 时间：2012-08-21T13:52:05.853
> 
> 标签：javascript

我在一个`div`对象中有一些图像，当触发 mousedown 事件时，我用它`n.srcElement`来捕获图像对象。

在 Firefox 中它会是`n.target`

但是`IE9`两者都不起作用`n.target`，因为 IE9 在使用和`n.srcElement`时将返回 div 对象而不是图像对象。`n.target``n.srcElement`

问题是在 IE9 上可以使用什么属性来在单击 div 对象中的图像时获取图像对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:11:55.140

当您绑定 div 元素而不是图像并使用鼠标事件时，如果您使用 n.target (firefox) 或 n.srcElement 单击图像，您将获得图像对象。IE 9 您将需要使用 window.event.srcElement 来获取您刚刚单击的对象。

# windows-phone-7 - 单击时添加 Listpicker

> ID：12056394
> 
> 赞同：0
> 
> 时间：2012-08-21T13:52:14.353
> 
> 标签：windows-phone-7, windows-phone-7.1

我想在单击按钮时一个一个地添加 Listpickers，同时向下到 Listpickers 的控件应该在每次添加 listpicker 时向下移动。请给我一个想法。

用于创建列表选择器的 XAML 代码。

```
 <toolkit:ListPicker Grid.Row="0"  Margin="5,76,226,-52" x:Name="list" ItemTemplate="{StaticResource PickerItemTemplate}" ItemCountThreshold="3"
                            FullModeItemTemplate="{StaticResource PickerFullModeItemTemplate}"   FullModeHeader="Select your Monthly Debts:" SelectedIndex="2"  CacheMode="BitmapCache"
                            FontFamily="Arial Black" FontSize="32" FontWeight="ExtraBlack"/> 
```

C#代码：

```
 List<payment> source = new List<payment>();
        source.Add(new payment() { Name = "Car Payment" });
        source.Add(new payment() { Name = "Credit UnionLoan" });
        source.Add(new payment() { Name = "Spousal Support" });
        source.Add(new payment() { Name = "Child Support" });
        source.Add(new payment() { Name = "Visa" });
        source.Add(new payment() { Name = "MasterCard" });
        this.list.ItemsSource = source; 
```

支付类文件：

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace NewUIChanges
{
public class payment
{
    public string Name
    {
        get;
        set;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:36:08.187

您可以像任何其他控件一样将 ListPickers 动态添加到 UI。

对于您向下移动其他控件的其他要求，我建议您对上面显示的 ListPicker XAML 代码进行一些小的更改。

```
<StackPanel x:Name="StackPanelListPickers" Grid.Row="0">
<toolkit:ListPicker  Margin="5,76,226,-52" x:Name="list" ItemTemplate="{StaticResource PickerItemTemplate}" ItemCountThreshold="3"
                        FullModeItemTemplate="{StaticResource PickerFullModeItemTemplate}"   FullModeHeader="Select your Monthly Debts:" SelectedIndex="2"  CacheMode="BitmapCache"
                        FontFamily="Arial Black" FontSize="32" FontWeight="ExtraBlack"/>
</StackPanel> 
```

然后在要添加 ListPickers 的代码后面的代码中执行以下操作：

```
//Generate a dynamic listpicker
ListPicker lp = new ListPicker() { Name = "List2" };
lp.Template = this.Resources["PickerItemTemplate"] as ControlTemplate;
lp.FullModeItemTemplate = this.Resources["FullModeItemTemplate"] as DataTemplate;
//And all other properties of "lp" as you need ..I am not writing all here

//Now add this new Listpicker to the stackpanel which is the child of the Grid
this.StackPanelListPickers.Children.Add(lp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:04:13.880

您可以创建 ListPicker 并使用绑定到 ObservableCollection。

ObsarvableCollection 的优点是您的更改会在视图上自动更新。有关详细信息，请参阅：[MSDN](http://msdn.microsoft.com/en-us/library/ms668604.aspx)。也看看[stackoverflow.com/questions/9745279](https://stackoverflow.com/questions/9745279/using-listpicker-and-databinding)

# java - 单独线程锁父中的 Java JDBC 查询

> ID：12056403
> 
> 赞同：6
> 
> 时间：2012-08-21T13:52:43.753
> 
> 标签：java, multithreading, oracle, jdbc

我很难理解这一点。这是正在发生的事情。我正在生成一个新线程，该线程拥有与 Oracle 数据库的 JDBC 连接。当我要求它连接到数据库时，父线程在调用 start() 方法时继续运行，但是当我要求子线程执行查询（在单独的方法上）时，父线程卡住等待子线程的方法来完成它的工作。任何猜测如何解决这个问题？提前致谢！

```
public class Main extends Thread{

    public Main()
    {
    }

    public void myCounter() {
        int i = 0;
        DBConnection myConnection = null;
        for(;;)
        {
            i++;

            System.out.println("time: " + i);
            if( i  == 5)
            {
                myConnection = new DBConnection("localhost", 1521, "hr", "hr", "XE");
                myConnection.start();

            }
            if(i == 10)
                try {

                    myConnection.runQuery("Select * from hr.numbers order by dbms_random.value");
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public void run()
    {
        myCounter();
    }

    public static void main(String[] args) {

        Main boot = new Main();
        boot.start();

    }

} 
```

* * *

```
public class DBConnection extends Thread{

    Connection myConnection;
    int port;
    String user;
    String password;
    String serviceName;
    String host;

    public void run()
    {
        setUpConnection(host, port, user, password, serviceName);
    }
    /**
     * Sets up variables to create a connection to Oracle.
     *  
     * @param host      host
     * @param port      port
     * @param user      user
     * @param password  password
     */
    public DBConnection(String host, int port, String user, String password, String serviceName)
    {
        this.host = host;
        this.port = port;
        this.user = user;
        this.password = password;
        this.serviceName = serviceName;
    }

    private void setUpConnection(String host, int port, String user,
            String password, String dataBase) {
        System.out.println("-------- Oracle "
                + "JDBC Connection Testing ------------");

        try {

            Class.forName("oracle.jdbc.OracleDriver");

        } catch (ClassNotFoundException e) {

            System.out.println("Couldn't find Oracle JDBC Driver... :-(");
            e.printStackTrace();
            return;

        }

        System.out.println("Oracle JDBC Driver Registered!");
        myConnection = null;
        try {
            myConnection = DriverManager.getConnection(
                    "jdbc:oracle:thin:@//" 
                            + host 
                            + ":" 
                            + port 
                            + "/" 
                            + dataBase,
                            user, password
                    );

        } catch (SQLException e) {

            System.out.println("Connection Failed!");
            e.printStackTrace();
            return;

        }

        if (myConnection != null) {
            System.out.println("Connected to Oracle! :-)");
        } else {
            System.out.println("Failed to make connection!");
        }
    }

    /**
     * Queries the database and returns a ResultSet
     * @param  query            SQL
     * @throws SQLException 
     */
    public  ResultSet runQuery(String query) throws SQLException 
    {
        System.out.println("                                                    [DBConnection] Started Running @ " + (new SimpleDateFormat("HH:mm:ss:S")).format(new Date()));
        ResultSet rs = null;

        Statement stt = myConnection.createStatement();
        rs = stt.executeQuery(query);
        System.out.println("                                                    [DBConnection] Finished Running @: " + (new SimpleDateFormat("HH:mm:ss:S")).format(new Date()));
        return  rs;

    } 
```

* * *

这是我得到的输出：

```
time: 1
time: 2
time: 3
time: 4
time: 5
-------- Oracle JDBC Connection Testing ------------
Oracle JDBC Driver Registered!
time: 6
Connected to Oracle! :-)
time: 7
time: 8
time: 9
time: 10
                                                    [DBConnection] Started Running @ 14:46:00:660
                                                    [DBConnection] Finished Running @: 14:46:12:750
time: 11
time: 12
time: 13
time: 14 
```

………………

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:58:30.250

我认为您误解了线程的工作原理。问题是您在父线程上调用它：

```
myConnection.runQuery("Select * from hr.numbers order by dbms_random.value"); 
```

**这是对恰好是线程**的对象的`runQuery`方法的顺序调用。这并不意味着它将指示孩子执行该方法。相反，父线程将自己执行它，并且子线程在其方法返回后立即完成。`myConnection`**`run`**

 **如果你想有一个单独的线程不断接收命令来执行查询，你将不得不实现一个生产者-消费者模式，在这种模式下，父进程一直在排队等待子进程执行的命令。为此，我建议您查看[ExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:59:57.067

当您调用 时`myConnection.runQuery()`，您在父线程的方法中，因此即使您调用其方法之一，`run()`您也不在线程中。`connection`

你应该调用`runQuery`里面的`run()`方法`myConnection`来实现你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:00:44.917

你的`runQuery`方法是阻塞的，因为你在主线程上调用它（所以它会等到查询完成）。如果您希望在另一个线程上调用它，请在另一个线程`run`方法上调用它（只需启动您最初为查询方法调用的另一个线程）**

# android - android: cancel(true) 不会杀死 AsyncTask

> ID：12056405
> 
> 赞同：3
> 
> 时间：2012-08-21T13:52:50.813
> 
> 标签：android, android-asynctask, kill

我正在使用 Android`AsyncTask`来从服务器下载文件。下载文件时，我试图杀死 AsyncTask。

```
protected void onPostExecute(Void result) {
    MyTask.cancel(true);
} 
```

但它仍在运行（我可以从 Eclipse 的调试窗口中看到它）。如何杀死 AsyncTask？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:55:54.950

当 AsyncTask 完成运行时，将调用 onPostExecute()。线程会死。垃圾收集器会清理它。你不必做任何事情。你正在做的事情是多余的。

除此之外，调用“取消”会向线程发送和中断信号。如果您的进程可以被中断，它将停止阻塞并继续执行。然后，如果为真，则必须调用`isCancelled()`该`doInBackground()`方法并从该方法返回。`isCancelled()`之后，`onCanceled()`and`onPostExecute()`将被调用，线程将像往常一样自行死亡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:22:50.267

[这里](http://developer.android.com/reference/android/os/AsyncTask.html)有一些关于取消的文档`AsyncTask`，这可能是相关的：

> 可以通过调用随时取消任务`cancel(boolean)`。
> 
> 调用此方法将导致后续调用`isCancelled()`返回 true。
> 
> 调用此方法后，将在返回后调用`onCancelled(Object)`, 而不是。`onPostExecute(Object)``doInBackground(Object[])`
> 
> 为确保尽快取消任务，您应始终`isCancelled()`定期检查 from的返回值`doInBackground(Object[])`，如果可能的话（例如在循环内。）"

# html - 垂直条显示在图像下方？

> ID：12056406
> 
> 赞同：0
> 
> 时间：2012-08-21T13:52:51.143
> 
> 标签：html

我正在尝试向我的网站添加一些图像，但由于某种原因，垂直条显示在图像的下方和右侧。

这是我的网站网址：[http ://bit.ly/Lcspfp](http://bit.ly/Lcspfp)

问题图片是页面底部的品牌徽标。

这是我用来显示品牌徽标的代码：

```
<ul id="brands">
<li><a><img src="images/brand1.png" alt="" /></a></li>
<li><a><img src="images/brand2.png" alt="" /></a></li>
<li><a><img src="images/brand3.png" alt="" /></a></li>
<li><a><img src="images/brand4.png" alt="" /></a></li>
<li><a><img src="images/brand5.png" alt="" /></a></li>
<li><a><img src="images/brand6.png" alt="" /></a></li>
<li class="last"></li><p>
</ul> 
```

这是我不想要的带有垂直条的图像的图像：http: [//i.imgur.com/9g1do.png](http://i.imgur.com/9g1do.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:00:59.110

添加此 CSS 规则：

```
ul#brands a {
    background:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:58:12.390

删除此 CSS 规则：

```
background: url(../images/links_separator.gif) no-repeat 100% 50%; 
```

它创建了那些垂直线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:01:08.473

将您的 styles.css 文件的第 644 行更改为以下内容：

```
.footer ul a { padding-right:5px; margin-right:3px; } 
```

# c++ - 将 SFML 与 Qt 创建器一起使用？

> ID：12056412
> 
> 赞同：2
> 
> 时间：2012-08-21T13:53:18.790
> 
> 标签：c++, qt, sfml

我最近开始学习 SFML API 以用于学习目的，但在我看来它只支持 Codeblocks IDE 和 Visual Studio。由于我自己的想法，我不喜欢这两个 IDE，我更喜欢 Qt 附带的 IDE。

是否可以在 Qt 创建者中基本上使用 SFML？

**编辑：**

我知道你们中的一些人有一天可能会在谷歌上找到这个，在努力设置 sfml 以与 qt creator 一起工作 8 天之后，我找到了解决方案：

第 1 步：从网站下载 SFML 的 VS 版本（不是代码块版本）第 2 步：将 DLL 从 C:\SFML-1.6\lib 复制到您的 system32 目录第 3 步：打开 qt creator，制作一个普通的 C++ 项目，打开您的 .pro 文件并添加以下行：

```
 INCLUDEPATH += C:\SFML-1.6\include
LIBS += C:\SFML-1.6\lib\sfml-system.lib \
    C:\SFML-1.6\lib\sfml-window.lib \
    C:\SFML-1.6\lib\sfml-graphics.lib \
    C:\SFML-1.6\lib\sfml-audio.lib \
    C:\SFML-1.6\lib\sfml-network.lib 
```

你完成了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:56:57.943

简短的回答：是的。

IDE 并不那么重要。编译器会。根据 Qt Creator 使用的编译器，您可以下载相应的 SFML 包。基于 MinGW 的版本很可能与您默认安装的 Qt Creator 一起工作得很好。（我相信依赖于MinGW？）

剩下要做的就是将 SFML 放在它自己的目录中，并确保在 Qt Creator 项目中设置正确的路径。真的没什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-06-30T17:04:02.910

1.  制作简单的c++项目
2.  选择 QMake 构建系统
3.  在 project.pro 添加 2 行：

配置 += 链接_pkgconfig

PKGCONFIG += sfml-all

# git - 在哪里放置我的 Git 起源？

> ID：12056416
> 
> 赞同：4
> 
> 时间：2012-08-21T13:53:30.193
> 
> 标签：git

我管理两个实时网站：一个位于公司防火墙后面，另一个是托管在 Bluehost 上的重复（精简）版本。我相信我可以使用 git 的一些[代理设置](https://stackoverflow.com/a/8248542/719689)从防火墙后面推送，以便 Bluehost 版本接收这些更改。我的笔记本电脑上还有 XAMPP 和 Linux VM，这样我就可以在那里进行所有测试并在我的开发设置中复制防火墙设置。

我应该在哪里放置“原点”以指示两个实时服务器之间的同步？我不认为我想使用 GitHub，因为我不希望我的代码在*另一台*服务器上。我应该将我的存储库推送到防火墙后面的服务器、Bluehost 服务器，甚至可能是我的本地机器（尽管我认为这是不可能的）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:31:51.947

最好将源放在防火墙后面的仓库中，指向（引用）Bluehost 之一。
这样，您可以从 Bluehost*拉回*您的公司仓库（在您从任何其他远程仓库推送到 Bluehost 之后）。

ITSec 团队通常不赞成将任何东西从公司防火墙后面推到“外部”的想法。

# magento - Magmi 可配置产品进口

> ID：12056424
> 
> 赞同：1
> 
> 时间：2012-08-21T13:54:01.220
> 
> 标签：magento, magmi

在 Magmi v0.7.17 中，我无法导入可配置产品。

这是我得到的 csv 示例（此处仅与问题相关的字段）：

[http://img198.imageshack.us/img198/8871/csvq.jpg](http://img198.imageshack.us/img198/8871/csvq.jpg)

*   首先，我需要输入“_attribute_set”才能进行导入，否则我会收到错误“无法创建产品sku：xxx未定义属性集”。但是在每个在线文档和数据流导出中，这个字段都是“attribute_set”。

*   当我运行导入（使用可配置项处理器 v1.3.6）时，只创建了简单的产品并且我遇到了这些错误：

    SQLSTATE [23000]：完整性约束违规：1048 列 'attribute_id' 不能为空 - INSERT INTO `catalog_product_super_attribute`( `product_id`, `attribute_id`, `position`) VALUES (?,?,?)

数据库中不存在任何属性和属性集，我希望它是动态创建的。但有可能吗？还是我错过了一些领域？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:07:09.933

好的，现在可以了。在插件中稍作调试后，我看到“configurable_attributes”列是空的。我将它移到文件的开头（attribute_set 旁边），它工作正常。这是因为我没有在csv中用“”封装我的文本，因为Excel没有这样做。所以我用 OpenOffice 修改了我的文件并让它在最后。

突然，attribute_set 也开始工作了。

请务必选择“Magmi Magento Reindexer”，否则产品不会出现在前端。

导入前必须在 BackOffice 中创建属性和属性集。Magmi 只能创建属性值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T05:07:21.553

对我来说工作的是：

> ```
> 1\. Check "configurable_attributes"
>    - All attribute are listed ?
>    - All attribute are correctly spelled?
> 2\. Check same for all custom attribute on header row
> 3\. Check attribute "Use To Create Configurable Product" value is set "Yes" 
> ```

此错误表示您的属性和属性集有错误。

# c# - 如何使用 LINQ 返回字符串

> ID：12056430
> 
> 赞同：1
> 
> 时间：2012-08-21T13:54:16.100
> 
> 标签：c#, linq

我有一些执行查询的代码。

```
int credenciadaId = 10;
var nome = from c in db.SanCredenciadas
           where c.CredenciadaId == credenciadaId
           select c.Name; 
```

我的问题分为两部分。

我希望查询只返回一个`Name`作为`string`. 如何更改查询`nome`以使以下代码有效？

```
string name = nome; 
```

此外，我如何编写改进的查询，以便它使用 lambda 表达式和[方法语法](http://msdn.microsoft.com/en-us/library/bb397947.aspx)而不是当前的查询语法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:56:29.800

像这样

```
string name = nome.Single().Name; 
```

如果您没有得到我怀疑是您想要的结果，这将失败。

您使用 lambda 的查询将是

```
var credenciadaId = 10;
var name = db.San_Credenciadas
    .Single(c => c.Credenciada_Id == credenciadaId).Name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:56:03.090

```
var name = db.San_Credenciadas.First(c => c.Credenciada_Id == Credenciada_Id).Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:43:39.243

值得注意的是，如果你要使用`collection.Single()`或者`collection.Single(x => x.Onething == someValue)`你的收藏必须有一个与之匹配的项目，否则它会抛出异常。

至于`collection.First()`，你只是想确保它`collection`实际上有一些数据，所以你可以，例如，使用`if (collection.Any())`

一般来说，我会选择使用`collection.SingleOrDefault()`或者`collection.FirstOrDefault()`检查从那里返回的值是否不为空。如果没有，那么你可以得到这个名字。如果它*为*空，那么您可以根据需要处理错误。

# c# - 使用 Web 服务时一项属性未保存

> ID：12056435
> 
> 赞同：0
> 
> 时间：2012-08-21T13:54:34.867
> 
> 标签：c#, asp.net-mvc, wcf, entity-framework

我有这个对象：

```
public class Announcement
    {
        public int Id { get; set; }
        public DateTime  DateSent { get; set; }
        private IList<string> _recipients;
        public IList<string> Recipients
        {
            get { return _recipients; }
            set { _recipients = value; }
        }

        public string RecipientsString 
        {
            get { return String.Join("\n", _recipients); }
            set { _recipients = value.Split('\n').ToList(); }
        }
    } 
```

我可以使用 DateSent 和 RecipientString（由 \n 分隔的电子邮件地址字符串）填充此对象，并将其毫无问题地保存到数据库中。

现在我想将其移至 Web 服务，以便我们可以在多个应用程序中使用它。

我在 web 服务中创建了完全相同的对象，并在本地（在服务上）测试一切都按预期工作。

但是，如果我在客户端上填充对象并将其传递给要保存的服务，则 RecipientString 始终为空（非空）。DateSent 很好。

我猜数据在序列化中丢失了，但我不知道为什么，或者如何解决这个问题。我还认为，这可能与电子邮件地址中的 @ 有关，但我已经排除了这种可能性。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:15:43.187

发生这种情况是因为为描述您的服务而生成的 de WSDL 无法描述您的 get 和 set 函数中使用的函数。我建议您将 RecipientsString 保留为公共属性，并在您的类上创建一个私有方法 GetRecipients 来处理 RecipientsString 值并返回您需要的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:17:06.637

使用没有支持字段的 RecipientsString。

# php - PHP 标头重定向在 IE 8 上不起作用

> ID：12056436
> 
> 赞同：0
> 
> 时间：2012-08-21T13:54:36.867
> 
> 标签：php, internet-explorer, redirect, header

php下的重定向：

```
header("Location: mask.php") 
```

确实**适用**于 IE 9、google chrome、firefox，但**不适**用于 IE 8。

我怎样才能解决这个问题？

PS：`header("Location: http://......")`没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T13:56:34.747

你最后缺少`;`你需要`exit`的脚本，所以不再执行脚本。

```
<?php
    header("Location: mask.php");
    exit; // with die at the end
?> 
```

测试`IE`制作一个重定向某个地方的示例页面并在[NetRenderer上进行测试](http://netrenderer.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T04:58:59.720

我刚遇到这个问题，这篇文章仍然出现在谷歌中。对我有用的解决方案是在 URL 中包含 www。

例子：

```
header("Location: http://www.example.com/mask.php");
exit(); 
```

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:58:05.337

后添加`die();`。

喜欢：

```
header("Location: mask.php");
die(); 
```

# java - 从 servlet 获取对 JspContext/PageContext 的引用

> ID：12056437
> 
> 赞同：4
> 
> 时间：2012-08-21T13:54:41.670
> 
> 标签：java, jsp, jakarta-ee, servlets

有谁知道从 servlet 获取 JspContext 引用的方法？

我有一个转发到 Jsp 的 servlet，我想从 servlet 中设置一些 PageContext 变量，以便它们可以在 Jsp 中使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:46:36.360

让我看看我是否理解：您想从 servlet 调用 JSP 并使一些变量（在 servlet 的控制下）对 JSP 可用。对？

然后忘记`PageContext`，它只是特定于 JSP 页面并且不能从 servlet 访问。您在请求、会话或 servlet 上下文中设置的任何属性都将在 JSP 中可用。这`PageContext`是一个比以前更宽的范围，它带有一个`findAttribute`方法，当被调用时，它将在页面的上下文、请求、会话或 servlet 上下文中查找具有给定名称的属性（按此顺序）。

因此，您唯一需要做的就是将这些变量设置为这些范围之一中的属性，我建议使用`request`一个 ( `HttpServletRequest.setAttribute("foo", "fooValue")`)，然后使用值表达式 ( `${foo}`) 在您的 JSP 中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:47:21.787

您应该使用请求范围。pageContext由JSP的service方法中的JspFactory的实现依赖子类获得。以 Tomcat 为例

```
public void _jspService(
 ...
pageContext = _jspxFactory.getPageContext(this, request, response,null, true, 8192, true); 
```

所以在请求被发送到 JSP 之前 pageContext 是不存在的。

# c# - List 的最后 k 个元素

> ID：12056442
> 
> 赞同：-4
> 
> 时间：2012-08-21T13:54:46.630
> 
> 标签：c#, .net, list

> **可能重复：**
> [使用 Linq 获取集合的最后 N 个元素？](https://stackoverflow.com/questions/3453274/using-linq-to-get-the-last-n-elements-of-a-collection)

在 C#、.NET 中，如何获取 List 的最后 k 个元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:58:59.407

```
var klist = list.Skip(Math.Max(0,list.Count - k)).Take(k); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T13:58:04.180

```
MyList.GetRange(Mylist.Count - k, k); 
```

[http://msdn.microsoft.com/en-us/library/21k0e39c.aspx](http://msdn.microsoft.com/en-us/library/21k0e39c.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:56:50.377

我假设你想要类似的东西：

```
myList.Reverse();
myList.Take(amount);
myList.Reverse(); 
```

没有更多信息，我无法给你更好的答案。

# .net - 从 Umbraco 4.7 中的 razor 宏渲染 ascx 用户控件

> ID：12056447
> 
> 赞同：3
> 
> 时间：2012-08-21T13:55:11.577
> 
> 标签：.net, razor, macros, umbraco, ascx

我以前遇到过这个问题[，](https://stackoverflow.com/questions/10689284/umbraco-render-net-user-control-ascx-macro-with-razor)但从来没有让它工作，但这次我没有其他方法可以解决它，真的需要让它工作。

我有一个简单的 ascx 控件，它读取 RSS 提要并以简单的 html 输出。后面的代码很简单。

然后我有一个 razor 脚本，它呈现整个页面，并在该页面的某个区域内添加我的 ascx 控件。

如果我像这样直接在模板上添加控件：

```
<umbraco:macro Alias="SubnavRenderer" language="cshtml" runat="server"></umbraco:macro> 
```

它运作良好，但博客条目出现在内容之外。

所以从剃刀脚本里面我做了这样的事情：

```
foreach (var item in Model.Children) 
    {
        ...
        else if(item.NodeTypeAlias == "Blog")
             {
               @Html.Raw(umbraco.library.RenderMacroContent("<?UMBRACO_MACRO macroAlias=\"BlogRenderer\"></?UMBRACO_MACRO>", Model.Id));
             } 
        } 
```

这会呈现一个空的 div，但内容无法在其中呈现，因此宏无法正常工作。我怀疑它与页面的生命周期有关。该宏有一个可能被跳过的 page_load 事件或类似的事件。

有任何想法吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:34:28.277

当我第一次阅读您的帖子时，我打算建议您在需要宏的位置添加一个 asp:PlaceHolder，然后使用[Page PreInit](http://msdn.microsoft.com/en-us/library/ms178472.aspx#lifecycle_events)事件动态生成控件并将其弹出到占位符中。

我还建议您使用[uQuery](http://ucomponents.codeplex.com/wikipage?title=uQuery)（它带有 ucomponents 并且在 4.8 的 Umbraco 核心中 - 以便您的 razor 脚本简化为：

Model.GetNodesByType("博客");

但是看看你的 html.raw 命令，也许这就是问题所在——你不应该使用**item.Id**而不是**Model.Id**吗？

**编辑**

你可以尝试[转义你的宏声明——这对我有用](http://our.umbraco.org/wiki/reference/umbracolibrary/rendermacrocontent)；你也可以添加 runat="server" 属性。

# c# - LINQ 选择多个项目存储类型

> ID：12056449
> 
> 赞同：2
> 
> 时间：2012-08-21T13:55:13.267
> 
> 标签：c#, linq

首先，我很抱歉，因为我觉得我应该能够通过谷歌找到这个，但我似乎不能，很可能是因为我的搜索词太笼统了（或者我只是不知道要寻找什么） .

鉴于：

```
int[] numbers = {0, 1, 2, 3, 4, 5};

var selectedNumbers = from n in numbers
                      where n > 2
                      select n; 
```

如果选择了多个元素，什么是 var？

澄清一下：我应该将它视为什么对象类型？它有不止一个元素，这意味着某种集合（我猜它被视为某种类型的接口......？）但老实说，我不确定*是什么*，所以我可以在代码中正确使用它.

或者（尽管出于简单的好奇心，我仍然希望知道第一部分），是否有一种将其转换为普通集合的好方法，例如`List<int>`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:56:58.220

简单的：`IEnumerable<int>`

您实际上应该能够将鼠标悬停在 Visual Studio 中的变量上，工具提示会告诉您它的类型是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:57:05.353

是`IEnumerable<int>`。下面的代码是等价的：

```
IEnumerable<int> selectedNumbers =
     from n in numbers
     where n > 2
     select n; 
```

要转换为列表，请调用`ToList()`。

```
List<int> list = selectedNumbers.ToList(); 
```

您也可以在一行中执行这两项操作：

```
List<int> list = numbers.Where(n => n > 2).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T14:01:04.523

*var*是 IEnumerable，因为 from、where 和 select 只是 IEnumerable 扩展方法的语法糖。请注意，如果您枚举*selectedNumbers*可枚举，它将对每个枚举的*数字应用查询。*如果您使用*ToList*方法，您将获得一个包含查询结果的列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T13:57:26.493

会的`IEnumerable<int>`。

要转换为列表，只需`ToList()`在 selectedNumbers 上使用扩展方法。

```
List<int> listOfNumbers = selectedNumbers.ToList(); 
```

# javascript - 如何确保只有您的 javascript 可以连接到您的网络服务器

> ID：12056453
> 
> 赞同：2
> 
> 时间：2012-08-21T13:55:25.273
> 
> 标签：javascript, web-services, obfuscation

我们正在考虑将一些工具从 .NET 转换为带有 Web 服务风格后端的 HTML5。后端本身将完全自定义运行在实现 WebSockets 的嵌入式硬件上，这意味着我们可以完全控制。

我遇到的问题是一半的代码将用连接到后端的 JavaScript 编写。理想情况下，我们希望确保除了“我们”之外没有其他人可以做到这一点。我们指的是托管在我们页面中的 JavaScript（由同一个嵌入式网络服务器提供）。

是否有可能阻止任何第三方，或者更具体地说，任何不在我们盒子上的代码调用 Web 服务？

我有一些想法，没有万无一失的各种缺点：

*   确保每个连接的引用地址是 Web 服务器的地址
*   提供页面时，将“种子”嵌入到 JS 中，JS 使用该“种子”连接到 Web 服务器，就像临时通行证一样。只有具有正确种子的请求才会得到服务。

关于如何实现这一点的任何想法都会很棒。我意识到我可能不会得到一个万无一失的系统，但“接近”的东西是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:59:01.203

您要防止的是[CSRF - Cross-site Request Forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。

您的第二个想法 - 要求客户端在请求标头中提供只有您的 Web 服务器可能产生的令牌，这是针对此类攻击的常见保护措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:07:08.013

你永远无法知道你的 web 服务是从哪里调用的*代码*或*从哪里*调用的——你只会收到一个 web 请求。一切都可以被欺骗。

因此，您将需要一些身份验证系统，客户可以在其中证明其使用服务的权利。一个肯定不会公开的“种子”可能会这样做。

# matlab - MATLAB nnmf() - 大型术语文档矩阵 - 内存和速度问题

> ID：12056455
> 
> 赞同：1
> 
> 时间：2012-08-21T13:55:34.090
> 
> 标签：matlab, sparse-matrix, term-document-matrix, nmf

我有一个很大的术语文档矩阵，想使用 matlab 提供的非负矩阵分解函数。问题是在第 1 次迭代之后，内存使用率迅速上升并达到顶峰（我的系统有 6GB），另一方面，CPU 使用率水平变得非常低（大约 1%-5%）。整个系统的行为就像它已经崩溃一样，只有等待很长时间才能完成第二次迭代。（请注意，要获得好的结果需要更多的迭代）。

问题：

如果有人对此有任何经验，或者使用比我更大的矩阵运行 nnmf()，我真的很想知道他/她实际上是如何克服上述问题的。

另外：我用较小的矩阵（大约 7000x1800）完成了这个，没有问题。我使用稀疏矩阵是因为术语文档矩阵有很多零元素，这有助于减少需要存储的空间。例如，在我的情况下，术语文档矩阵具有`14608 * 18828 = 275039424`元素和`sum(sum(spa~=0)) = 1312582`非零元素：

```
>> whos
Name          Size                    Bytes  Class     Attributes

full      14608x18828            2200315392  double              
spa       14608x18828              21151944  double    sparse 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:16:41.257

我想我们都看过太多《星际迷航》的剧集了。我们的计算机不是无限快的，也不是无限量的内存。我们期望我们几乎可以进行任何我们想要的计算，并且几乎立即获得结果，这让我们感到厌烦。仅仅因为您想要处理大型矩阵的分解并不意味着您将能够这样做。获得更多内存来处理这种大小的问题。或者解决较小的问题。

您描述的矩阵甚至不是非常稀疏，它们的分解将基本上是完全完整的。稀疏矩阵很少有价值，除非非零值的数量占总数的一小部分。只有 50% 零值的稀疏矩阵是对工具的浪费。例如，

```
>> A = randi([0 1],100, 100);
>> B = sparse(A);
>> whos
  Name        Size             Bytes  Class     Attributes

  A         100x100            80000  double              
  B         100x100            81480  double    sparse 
```

看到这里 A 是 50% 的零，但稀疏形式实际上比完整版本需要更多的内存来存储！请记住，您不仅需要存储非零元素，还需要存储它们的位置。

好的，所以稀疏存储效率不高。但是，您肯定可以在运营效率方面获得收益吗？甚至不是这样。使用 Steve Eddins timeit 函数进行比较，我得到以下结果：

```
>> timeit(@() A*A)
ans =
   7.3604e-05

>> timeit(@() B*B)
ans =
    0.0014884 
```

所以稀疏乘法比全乘法慢得多。

本质上，只有 50% 为零的稀疏矩阵正在浪费稀疏形式的功能。如果矩阵更加稀疏，结果会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:07:33.817

**终于奏效的东西：**

我检查了`nnmf.m`文件（Matlab提供的算法实现）并试图理解代码。有一个名为“d”的变量执行以下操作：`d = a - w*h;` 并且是一个与“a”具有相同维度的完整矩阵（即大型术语文档矩阵）：

```
Name             Size                    Bytes  Class      Attributes
a            14608x18828              21151944  double     sparse    
d            14608x18828            2200315392  double               
...
h                4x18828                602496  double               
h0               4x18828                602496  double               
...
w            14608x4                    467456  double               
w0           14608x4                    467456  double 
```

为了节省一些内存空间，我曾经`clear`在不需要时删除此矩阵。**旧** `nnmf.m`文件的一部分：

```
d = a - w*h;
dnorm = sqrt(sum(sum(d.^2))/nm);
dw = max(max(abs(w-w0) / (sqrteps+max(max(abs(w0))))));
dh = max(max(abs(h-h0) / (sqrteps+max(max(abs(h0))))));
delta = max(dw,dh); 
```

被这个**新**的取代：

```
d = a - w*h;
dnorm = sqrt(sum(sum(d.^2))/nm);
clear d;
dw = max(max(abs(w-w0) / (sqrteps+max(max(abs(w0))))));
dh = max(max(abs(h-h0) / (sqrteps+max(max(abs(h0))))));
delta = max(dw,dh); 
```

`clear d` was added there because `d` was never used after that. For the term-document matrix that was being used, this worked without causing memory problems.

# sql-server-2008 - 锁定数据库服务器 CPU 的查询

> ID：12056459
> 
> 赞同：0
> 
> 时间：2012-08-21T13:55:53.747
> 
> 标签：sql-server-2008, sql-server-2005, database-deadlocks

我们使用的是 MSSQL server 2008，我们的应用程序有 sql 查询，这些查询将数据库锁定在行和页级别。据说由于锁定，CPU 命中率为 100%。是否有程序或方法可以找出哪个 MSSQL 服务器实例消耗了多少 CPU，以便我可以进一步缩小这个问题的范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:42:29.960

检查 SQL SERVER 上正在运行的查询及其状态和 CPU 时间。

```
SELECT sqltext.TEXT,
req.session_id,
req.status,
req.command,
req.cpu_time,
req.total_elapsed_time,
cn.*
FROM sys.dm_exec_requests req
CROSS APPLY sys.dm_exec_sql_text(sql_handle) AS sqltext 
LEFT OUTER JOIN sys.dm_exec_sessions AS cn
ON req.session_id= cn.session_id 
```

在每个实例上运行它，看看它是否有助于故障排除

# xml - 对 XML 文件中的元素进行排序

> ID：12056462
> 
> 赞同：2
> 
> 时间：2012-08-21T13:55:56.443
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

我有一个看起来像这样的文件：

```
<xml>
 <person>
  <name>John</name>
  <age>33</age>
  <car>Yugo</car>
 </person>
 <person>
  <car>Tesla</car>
  <age>44</age>
  <name>Peter</name>
 </person>
<xml> 
```

有些人可能会注意到其中的元素顺序不同。

有谁知道仅保留 xml 内容但格式化 in-file 的 übersimple xslt？

这将是想要的输出：

```
<xml>
 <person>
  <age>33</age>
  <car>Yugo</car>
  <name>John</name>
 </person>
 <person>
  <age>44</age>
  <car>Tesla</car>
  <name>Peter</name>
 </person>
<xml> 
```

一个在其元素中具有相同值但具有某种顺序的文件（在这种情况下按元素名称排序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:13:00.013

`xsl:sort`当你告诉它按`local-name()`函数的值排序时应该做的伎俩。`name()`如果要考虑命名空间前缀，请将其替换为函数。

以下样式表复制任何文档中的所有元素，并按字母顺序对其内容进行排序。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
    <xsl:template match="*">
        <xsl:copy>
            <xsl:apply-templates>
                <xsl:sort select="local-name()"></xsl:sort>
            </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

它不适用于属性、注释或 CDATA，但如果您愿意，实现这些应该不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:25:37.113

这个 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:strip-space elements="*"/>
<xsl:output method="xml" indent="yes"/>

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates/>
    </xsl:copy>
</xsl:template> 

<xsl:template match="person">
    <xsl:copy>
        <xsl:apply-templates>
            <xsl:sort select="local-name()"/>
        </xsl:apply-templates>
    </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

应用于此 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<xml>
<person>
    <name>John</name>
    <age>33</age>
    <car>Yugo</car>
</person>
<person>
    <car>Tesla</car>
    <age>44</age>
    <name>Peter</name>
</person>
</xml> 
```

给出这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<xml>
<person>
    <age>33</age>
    <car>Yugo</car>
    <name>John</name>
</person>
<person>
    <age>44</age>
    <car>Tesla</car>
    <name>Peter</name>
</person>
</xml> 
```

# ios - 具有多行的 UIBarButtonItem 显示为低分辨率

> ID：12056463
> 
> 赞同：1
> 
> 时间：2012-08-21T13:55:58.257
> 
> 标签：ios, uinavigationbar, uibarbuttonitem

我正在尝试使用两行文本创建一个 UIBarButtonItem，例如 iPod.app 中的“正在播放”按钮

我在这个线程中使用提供的代码：[我们如何在导航栏中的 UIBarButtonItem 中放置两行](https://stackoverflow.com/questions/8926732/how-can-we-put-two-line-in-uibarbuttonitem-in-navigation-bar?answertab=active)

但在设备上运行时，该按钮以低分辨率显示，如下所示：

[https://www.dropbox.com/s/vp5vn9mmq0f96n8/2012-08-21%2014.57.1​​2.png](https://www.dropbox.com/s/vp5vn9mmq0f96n8/2012-08-21%2014.57.12.png)

为什么？我不想使用静态图像，因为我的应用程序已本地化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:47:23.447

要解决此问题，如果设备是视网膜，请使用 UIGraphicsBeginImageContextWithOptions 而不是 UIGraphicsBeginImageContext。然后将上下文的比例设置为 mainScreen 比例。

```
+ (UIImage *)nowPlayingButton {

    UILabel * addCustomLabel = 
            [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 40, 25)];
    addCustomLabel.text = 
        NSLocalizedString(@"NOW_PLAYING_NEWLINE", 
                          @"Now playing text divided on two lines");
    addCustomLabel.textColor = [UIColor whiteColor];
    addCustomLabel.font = [UIFont boldSystemFontOfSize:10];
    addCustomLabel.numberOfLines = 2;
    addCustomLabel.backgroundColor = [UIColor clearColor];
    addCustomLabel.textAlignment = UITextAlignmentCenter;

    CGSize size = addCustomLabel.bounds.size;

    static CGFloat scale = -1.0;

    UIScreen *screen = [UIScreen mainScreen];
    scale = [screen scale];

    if(scale > 0.0) {
        UIGraphicsBeginImageContextWithOptions(size, NO, scale);
    } else {
        UIGraphicsBeginImageContext(size);
    }

    CGContextRef context = UIGraphicsGetCurrentContext();
    [addCustomLabel.layer renderInContext: context];
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    CGContextRelease(context);

    return img;
} 
```

# iphone - 在后台使用 MPMoviePlayer 播放 mp3 文件

> ID：12056469
> 
> 赞同：0
> 
> 时间：2012-08-21T13:56:27.880
> 
> 标签：iphone, xcode, audio, mpmovieplayercontroller, mpmovieplayer

我正在使用它从服务器`MPMoviePlayerViewController`播放`.mp3`文件但无法正常工作。这是我正在使用的代码。

```
NSString *path = @"http://myurl/music.mp3";
MPMoviePlayerViewController *mpviewController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:path]];
mpviewController.moviePlayer.movieSourceType = MPMovieSourceTypeStreaming;  
[self presentModalViewController:mpviewController animated:YES];
[[mpviewController moviePlayer] play]; 
```

音频播放 3 或 5 秒后自动停止。无法弄清楚是什么问题。你的建议会有很大帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:01:11.477

通过这段代码解决了它：）它可以帮助某人。

```
NSString *path = @"http://myurl/mymusic.mp3";
mv = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:path]];
mv.movieSourceType = MPMovieSourceTypeUnknown;
[self.view addSubview:mv.view];
[mv play]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:35:20.917

我正在使用这个[GIT](https://github.com/mattgallagher/AudioStreamer)从我的服务器传输音频。使用 repo 很简单。

在我导入我的项目时，它没有任何背景播放。我已经添加了一些简单的 iOS 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T15:45:51.020

## 也许你应该保留你的 mpviewController，我犯了同样的错误。

# sql-server - 无法在我的查询中获得总数

> ID：12056472
> 
> 赞同：2
> 
> 时间：2012-08-21T13:56:30.987
> 
> 标签：sql-server, sql-server-2008, tsql

这是我获取总数的查询。

```
SELECT       
    MemberShipMaster.Id,   
    MemberShipMaster.Name,  
    TotalCount = 
    (
        SELECT
            ISNULL(COUNT(MemberPortfolio.Id), 0) AS total
        FROM
            JFPMembers
            INNER JOIN MemberPortfolio 
                ON JFPMembers.MemberID = MemberPortfolio.MemberId
        WHERE
            JFPMembers.MembershipType = MemberShipMaster.Id 
            AND JFPMembers.IsActive = 1
            AND MemberPortfolio.IsActive = 1
    )  
FROM
    MemberShipMaster
    Left JOIN JFPMembers
        ON MemberShipMaster.Id = JFPMembers.MembershipType   
WHERE
    MemberShipMaster.Id <> 6
GROUP BY
    MemberShipMaster.Id,
    MemberShipMaster.Name
Order by
    MemberShipMaster.Name 
```

下面是我的表架构

```
SELECT [MemberID]        -- PK 
    ,[MembershipType]  --FK , table [MemberShipMaster]
FROM JFPMembers

SELECT [Id]       -- PK
    ,[MemberId] -- FK OF Table JFPMembers         
FROM MemberPortfolio

SELECT [Id]  --PK
    ,[Name]
FROM MemberShipMaster 
```

我需要的是成员 Portfolios 的总计数，按 MembershipType，即我的关系是这样的，JFPMembers 是保存成员信息的主表。会员分为 3 类，高级会员、企业会员和普通会员。这三种类型存储在 MemberShipMaster 中。ID 分别为 3、4 和 5。还有一张用于持有 Portfolio 的表，该表作为 MemberId 来关联其各自的成员。

但是我收到了 MemberShipMaster.Id 的一些多值或参考错误。请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:42:19.947

新代码：

```
SELECT abb1.Id, abb1.Name,   
TotalCount =  
(SELECT 
        ISNULL(COUNT(abb3.Id), 0) AS total 
    FROM 
        JFPMembers as abb4 
        INNER JOIN MemberPortfolio as abb3 
            ON abb4.MemberID = abb3.MemberId 
    WHERE 
        abb4.MembershipType = abb1.Id  
        AND abb4.IsActive = 1 
        AND abb3.IsActive = 1)   

FROM 
    MembershipMaster as abb1 
    Left JOIN JFPMembers as abb2
        ON abb1.Id = abb2.MembershipType    
WHERE 
    abb1.Id <> 6 
GROUP BY 
    abb1.Id, 
    abb1.Name 
Order by 
    abb1.Name 
```

# javascript - 如何将 HTML5 Web Workers 与 Google Closure Tools 结合使用？

> ID：12056478
> 
> 赞同：5
> 
> 时间：2012-08-21T13:56:49.407
> 
> 标签：javascript, html, google-closure, web-worker, google-closure-library

我需要在我的应用程序的后台做一些计算密集型的工作，并且我一直在学习 HTML5 Web Workers。是否有使用 Google Closure Tools 执行此操作的集成方法？我找到[了 gears.Worker](http://closure-library.googlecode.com/svn/docs/class_goog_gears_Worker.html)，但我不清楚这个类是否符合要求，也不知道如何使用它。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:24:18.573

使用 Web Workers 不需要闭包库中的任何特殊内容，除非您想在不编译的情况下运行 bootstrap/webworkers.js 会有所帮助。它是这样使用的

```
/**
 * Closure dependency management, require only main worker script of un-compiled version.
 */
if (typeof COMPILED == 'undefined') {
  CLOSURE_BASE_PATH = '../../../closure-library/closure/goog/';
  importScripts(
      CLOSURE_BASE_PATH + 'bootstrap/webworkers.js',
      CLOSURE_BASE_PATH + 'base.js',
      CLOSURE_BASE_PATH + 'deps.js',
      '/your-script.js');
} 
```

`gear`在网络存储之前使用。我想这不是很好也很丑陋。

# umbraco - 在将 Umbraco 4.8 项目移动到服务器调用 Model.MediaById 在 Examine.ExamineManager.get_Instance() 崩溃

> ID：12056486
> 
> 赞同：0
> 
> 时间：2012-08-21T13:57:03.480
> 
> 标签：umbraco

我正在使用 Umbraco 4.8 和 IIS 7。从 WebMatrix 运行时，我的代码运行良好。昨天我把它移到我的本地 IIS 服务器上进行测试，然后再将它移到远程服务器上。我无法获得媒体文件工作的简单请求。我无法遵循其他线程的建议来使用检查仪表板，因为它与 4.8 不兼容。我已经清空了我的媒体文件夹（在后台，然后在文件夹本身）并使用桌面媒体上传器将图像全部放回。没有不同。我的简单剃刀文件：

```
<img  src="@Model.MediaById(Model.friendlyPicture).umbracoFile" alt="picture" /> 
```

导致以下崩溃：加载 Razor 脚本时出错（文件：Tg 配置文件图像）“Examine.ExamineManager”的类型初始化程序引发异常。在检查.ExamineManager.get_Instance()

```
 at umbraco.MacroEngines.ExamineBackedMedia.GetUmbracoMedia(Int32 id)
 at umbraco.MacroEngines.Library.RazorLibraryCore.MediaById(Int32 Id)
 at umbraco.MacroEngines.Library.RazorLibraryCore.MediaById(String Id)
 at umbraco.MacroEngines.DynamicNode.MediaById(String Id)
 at System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0,    T1 arg1)
 at ASP._Page_macroScripts_tgProfileImage_cshtml.Execute() in    c:\Websites\UmbracoSites\Todd Growns\ToddUmbracoSite\macroScripts\tgProfileImage.cshtml:line 2
 at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
 at System.Web.WebPages.WebPage.ExecutePageHierarchy(IEnumerable`1 executors)
 at System.Web.WebPages.WebPage.ExecutePageHierarchy()
 at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
 at umbraco.MacroEngines.RazorMacroEngine.ExecuteRazor(MacroModel macro, INode currentPage)
 at umbraco.MacroEngines.RazorMacroEngine.Execute(MacroModel macro, INode currentPage) 
```

在之前的项目中，我只是使用上传功能将图像添加到页面。这次使用 MediaPicker 似乎要好得多，以避免两次上传图像。我试图让图像以各种方式加载（包括内联剃刀宏加上我想使用的 ImageGen.ashx），但它总是落在同一个地方。我的 app_data 文件夹中没有检查索引，所以我看不出它与损坏的索引有什么关系。

各个地方都有类似的错误报告，但没有任何我可以使用的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:22:06.967

我可能看起来像 Examine 在读取 ExamineIndex.config 或 ExamineSettings.config 文件时遇到问题。

在尝试获取媒体时，它会首先尝试从 Examine 获取，然后再访问数据库。在这种情况下，它似乎无法找到索引，这可能是因为权限问题或配置错误。由于它在 webmatrix 中工作，我认为配置很好。

您是否尝试过为您的应用程序池帐户授予对文件夹的完全权限？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T14:58:29.917

过去在移动站点时，我在移动后重建了索引。在这种情况下，它是存储媒体和文档数据的内部索引。

问候

伊斯梅尔

# java - Vaadin - 从窗口获取当前显示的通知

> ID：12056490
> 
> 赞同：2
> 
> 时间：2012-08-21T13:57:15.603
> 
> 标签：java, vaadin

是否有可能以某种方式从 Vaadin 的给定窗口获取当前显示的[通知？](https://vaadin.com/api/com/vaadin/ui/Window.Notification.html)[查看 Window API](https://vaadin.com/api/com/vaadin/ui/Window.html)，我只能看到几个`showWindow()`方法。

**那么，有谁知道是否有一些功能可以获取当前显示的[通知](https://vaadin.com/api/com/vaadin/ui/Window.Notification.html)（如果有任何通知存在，那就是）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:05:33.210

我不相信目前有任何方法可以做到这一点。

您可以覆盖 Window#showNotification(Notification) 以自己跟踪这一点，但据我所知，客户端不会告诉服务器通知已关闭 => 无法“重置”此标志。

（私有方法 Window#addNotification 在链接列表中跟踪要发送到浏览器的通知，但 Window#paintContent(PaintTarget) 会在将通知发送到浏览器后立即清除该列表）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T09:51:34.437

通过反射：

```
private boolean isNotified(String notif) throws SecurityException, NoSuchFieldException,
IllegalArgumentException, IllegalAccessException {
    Page current = Page.getCurrent();

    Field f = current.getClass().getDeclaredField("notifications");
    f.setAccessible(true);
    List<Notification> notifications = (List<Notification>) f.get(current);
    boolean found = false;
    if (notifications != null) {
        for (Notification notification : notifications) {
            if (notification.getCaption() == notif) {
                found=true;
            }
        }
    }
    return found;
} 
```

# c++ - 如何在 Mac OS 上设置线程优先级 pthread

> ID：12056491
> 
> 赞同：3
> 
> 时间：2012-08-21T13:57:19.487
> 
> 标签：c++, pthreads

我发现：

```
pthread_setschedprio() 
```

这里：[http ://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setschedprio.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setschedprio.3.html)

但我找不到线程优先级的任何有效值。对于 Windows，我发现了非常明确的可能值，例如：

```
THREAD_PRIORITY_BELOW_NORMAL
THREAD_PRIORITY_NORMAL
THREAD_PRIORITY_ABOVE_NORMAL 
```

但对于 Mac OS，我什么也没找到。我不能使用 Cocoa NSThreads 类，我需要使用 POSIX 线程。

你知道如何在 Mac OS 上设置线程优先级 pthreads 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-14T08:59:59.220

AFAIK`pthread_setschedprio()`在 macOS 上不存在。您只能在使用创建线程时设置线程的优先级`pthread_setschedparam()`。

至于优先级，请参阅以下文档`pthread_setschedparam()`：

> 有效的线程优先级（通过 param->sched_priority 访问）必须在`sched_get_priority_min(2)`和`sched_get_priority_max(2)`系统调用返回的范围内。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-12T18:39:15.687

虽然我当然同意上面关于避免修改线程优先级或调度以解决问题的评论，但您可能希望首先阅读 pthread_getschedparam 的手册页，其中讨论了调度，并显示了 OS X 下最小/最大优先级设置的一些值。然后，重新考虑你的问题，不要使用线程优先级来解决它。

# sockets - Modbus TCP/IP 设备通讯问题

> ID：12056496
> 
> 赞同：1
> 
> 时间：2012-08-21T13:57:29.987
> 
> 标签：sockets, networking, tcp, tcp-ip, modbus

我正在尝试与使用 Modbus TCP/IP 的设备进行通信。我正在使用 C# 4.0 .NET 套接字，并且在从设备返回响应时遇到了麻烦。由于设备/网络的性质，它必须是异步通信。

现在我可以连接到设备了。当`Connect`命令执行时，设备 LED 会亮起，表示存在活动连接。然后我执行`Send`命令，灯熄灭（意味着我失去了连接），当我收到时，我什么也得不到。我尝试了一堆不同的数据包，但在任何情况下都没有成功。我在想，是不是和`SocketType`我初始化 Socket 的时候有关？可能是我正在尝试使用的端口（当前使用端口 4）吗？

这是我尝试使用的 Modbus TCP/IP 文档： [Modbus 文档](http://www.modbus.org/docs/Modbus_Application_Protocol_V1_1b.pdf)

这是我的代码：

```
sockPort = new Socket(IPAddress.Parse(_commInfo.IPAddress).AddressFamily, SocketType.Stream, ProtocolType.Tcp);   
IPEndPoint m_localhost = new IPEndPoint(IPAddress.Parse(addr.Address.ToString()), 4);    
sockPort.Bind(m_localhost);
sockPort.Connect(new IPEndPoint(IPAddress.Parse(_commInfo.IPAddress), 502));
byte[] rx = new byte[260];

byte[] data = { 0x03, 0x00, 0x20, 0x00, 0x04, 0x45, 0xf0 };

sockPort.Send(data);
var asf = sockPort.Receive(rx); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:01:46.970

问题很可能出在您对应用程序（modbus）协议的解释上——字节序、数据包布局等。使用[wireshark](http://www.wireshark.org)或`tcpdump(1)`找出发送到设备和从设备发送的内容。其他几点：

*   您不需要`bind(2)`套接字的本地端，内核将为您选择一个*临时*本地端口。
*   一旦完成，您应该准备好在套接字上进行双向通信`connect(2)`。
*   不要忽略发送和接收调用的返回值——它们可能比你预期的要少。

至于设备本身的工作原理，最好查找制造商文档并搜索特定于设备的邮件列表、用户组和论坛。

希望这可以帮助。

# ios - ios核心数据：如何更改NSManagedObject而不将其保存到上下文中

> ID：12056499
> 
> 赞同：0
> 
> 时间：2012-08-21T13:57:30.097
> 
> 标签：ios, core-data, save, nsmanagedobjectcontext

我假设一个名为“mArray”的 NsMutableArray，它从核心数据上下文中获取结果。因此，“mArray”包含一些 NSManagedObjects。

在某些时候，我必须对这些对象进行一些编辑。

再进一步，我将不得不向上下文添加一些新的 NSManagedObjects，还需要保存上下文。

现在新对象已保存，而且对这些对象的上述编辑也已保存。

我希望能够仅将新添加的 NSManagedObjects 保存到上下文中而无需进行编辑。

有人可以指出正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:41:40.403

保存上下文时，您将保存其中的所有内容。如果您想处理一些不与其他对象同时保存的对象，则需要使用多个上下文。

请参阅有关 NSManagedObjectContext 的文档，因为使用多个上下文并不是世界上最简单的事情。

# git - 如何配置 cvs2git 来处理多个 CVS 目录？

> ID：12056505
> 
> 赞同：2
> 
> 时间：2012-08-21T13:57:50.780
> 
> 标签：git, cvs2git

这个问题与我最近的 git [SO post](https://stackoverflow.com/questions/12042882/determining-how-cvs2git-converted-cvs-trees)有关。

除了编写一个 shell 脚本之外，我不太确定如何配置 cv2git 让它读取一个 Linux 目录 SRC_TREE，其中有多个 CVS 项目。任何指针将不胜感激。

我正在提供我最近的帖子来展示这项工作。我不是在没有第一次尝试的情况下问的。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T02:57:01.157

cvs2git 不支持在一次程序运行中将多个项目从 CVS 转换为 git。因此，除了每个存储库运行一次 cvs2git 之外，别无选择。编写 shell 脚本可能是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T15:50:58.123

那很容易。只需使用 SRC_TREE/module 而不是 SRC_TREE 作为模块根目录（`run_options.set_project()`选项文件中的第一个参数或简单地在命令行上。

如果您想将模块名称作为 git 树中的根路径，请直接使用 SRC_TREE 但忽略所有您不想要的模块。

如果您的计划更高级，我建议您在开始转换之前复制您的 cvs 目录（如果您还没有这样做）并随意移动您的目录（加入或拆分模块）。

# android - 如何在 Android 中处理 SQLite 数据集

> ID：12056506
> 
> 赞同：0
> 
> 时间：2012-08-21T13:57:54.013
> 
> 标签：android, sqlite

我需要在 Android 系统中处理 SQLite 数据集。

在我的 dataBaseHelper 文件（DataBaseAccessor）中，我有以下代码（当附加到列表视图时显示相关数据）。

```
public static ArrayList<QuestionListQuestion> getQuestionListQuestions(long id){
String qry = "select QuestionListQuestionID, QuestionListQuestionQuestionListID, QuestionListQuestionQuestionID, QuestionListQuestionSortOrder, QuestionListQuestionSupplementalQuestionIDYes, QuestionListQuestionSupplementalQuestionIDNo, QuestionListQuestionSupplementalQuestionIDText, QuestionListQuestionSurveyGroupID from QuestionListQuestion  where  QuestionListQuestionQuestionListID=" + id;
ArrayList<QuestionListQuestion> list = new ArrayList<QuestionListQuestion>();
try{
    Cursor cursor = wdb.rawQuery(qry, null);
while (cursor.moveToNext()) {
QuestionListQuestion questionlistquestion = new QuestionListQuestion();
    questionlistquestion.QuestionListQuestionID = cursor.getLong(0);
    questionlistquestion.QuestionListQuestionQuestionListID = cursor.getLong(1);
    questionlistquestion.QuestionListQuestionQuestionID = cursor.getLong(2);
    questionlistquestion.QuestionListQuestionSortOrder = cursor.getLong(3);
questionlistquestion.QuestionListQuestionSupplementalQuestionIDYes = cursor.getString(4);       questionlistquestion.QuestionListQuestionSupplementalQuestionIDNo = cursor.getString(5);
questionlistquestion.QuestionListQuestionSupplementalQuestionIDText = cursor.getString(6);
questionlistquestion.QuestionListQuestionSurveyGroupID = cursor.getLong(7);
list.add(questionlistquestion);
}
    cursor.close();
}
catch (Exception e) {
    e.printStackTrace();
}
return list;
} 
```

我现在需要扩展系统，以便我可以处理数据并根据返回的原始列表在另一个表中创建新记录。

我尝试了以下附加到按钮（从微调器中选择相关列表 ID）：-

```
QuestionListID = (String) SiteGenerateQuestions.this.spnQuestL.getSelectedItem().toString();
long SpinnerSelectedBT;
SpinnerSelectedBT = GenerateQuestions.this.spnQuestL.getSelectedItemId();
list = DatabaseAccessor.getQuestionListQuestions(SpinnerSelectedBT);
for (int i=0; i < list.size(); i++){
Toast.makeText(SiteGenerateQuestions.this," list.get(" + i + ")   = " + list.get(i) + " "  , Toast.LENGTH_SHORT).show();
} 
```

Toast 显示以下内容：-

```
list.get(0) =  com.tw.question.entity.QuestionListQuestion@407a6F70
list.get(1) =  com.tw.question.entity.QuestionListQuestion@407bc170
etc... 
```

我如何才能访问实际数据而不是 ... .entity.QuestionListQuestion@407bc170 还是我完全偏离了轨道？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:12:48.010

我同意@wsanville，该`get()`方法将返回列表中该位置的对象。当您打印出一个对象（在 toast、log、System.out.println 等中）时，它将使用`toString()`打印输出中的值。默认值`toString()`是包名称后跟@，后跟该对象的十六进制表示。您的类将需要覆盖该`toString()`方法，因此当您使用`get()`它时，它将打印出您在`toString()`方法中放入的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:06:34.487

您看到的输出是因为您尚未实现类的`toString()`方法`QuestionListQuestion`。除此之外，您似乎确实拥有要查找的数据。只需尝试输出对象的 ID，而不是连接对象本身（这将`toString()`在后台调用）。

此外，由于单击按钮时看起来您正在执行数据库操作，因此请确保在 UI 线程之外执行数据库操作。查看[文档](http://developer.android.com/guide/components/processes-and-threads.html)以获得高级概述。您可能希望对有`AsyncTask`问题的数据库操作使用 。

# actionscript-3 - ActionScript 3.0 中是否有一种方法可以根据可绑定的布尔变量基本上使选项卡可见或不可见？

> ID：12056507
> 
> 赞同：0
> 
> 时间：2012-08-21T13:57:59.470
> 
> 标签：actionscript-3, apache-flex, tabnavigator

诚然，这与之前提出的问题非常相似，但略有不同。在我看来，我所看到的关于如何将选项卡应用于或不应用于 TabNavigator 的所有内容都不够好。问题在于，我在研究中看到的执行此操作的方法存在以下问题：在用户看到标签丢失后瞬间添加标签，或者在用户看到标签出现后瞬间删除标签。有没有办法解决这个问题？谢谢！

编辑：为了清楚起见，我的意思是，对于标签和图像等其他内容，我们基本上可以通过将它们的可见性设置为可绑定变量并且在设置该变量之前不进入它们所在的屏幕来解决这个问题。我正在寻找与这种方法等效的方法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:46:05.860

当可绑定变量发生变化时，您可以使用 a`ChangeWatcher`来触发函数。在该函数中，根据变量的值添加或删除选项卡。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="onCreationComplete()"
               xmlns:local="*">
    <fx:Script>
        <![CDATA[
            import mx.binding.utils.ChangeWatcher;

            [Bindable]
            public var showTab2:Boolean;

            private var watcher:ChangeWatcher;

            private function onCreationComplete():void
            {
                watcher=ChangeWatcher.watch(this, "showTab2", onValueChange);
            }

            private var _tab2:NavigatorContent;

            public function get tab2():NavigatorContent
            {
                if (!_tab2)
                {
                    _tab2=new NavigatorContent();
                    _tab2.label="tab2";
                }
                return _tab2;
            }

            private function onValueChange(event:Event):void
            {
                if (showTab2 && !tabNav.contains(tab2))
                {
                    tabNav.addElement(_tab2);
                }
                else if (!showTab2 && tabNav.contains(tab2))
                {
                    tabNav.removeChild(tab2);
                }
            }
        ]]>
    </fx:Script>

    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <mx:TabNavigator id="tabNav" width="300" height="300">
        <s:NavigatorContent label="tab 1"/>
    </mx:TabNavigator>

    <s:Button label="Add/remove tab2" click="showTab2 = !showTab2"/>
</s:Application> 
```

# xquery - 如何使用 Xquery 从两个 XML 文件中获取数据？

> ID：12056522
> 
> 赞同：0
> 
> 时间：2012-08-21T13:58:31.907
> 
> 标签：xquery, basex

Sample1.xml

```
<data><row><id>949459</id><product_id>4119945117</product_id></row>
    <row><id>781351</id><product_id>1009460692</product_id></row>
    <row><id>780163</id><product_id>1009755673</product_id></row>
    <row><id>1017226</id><product_id>1013393868</product_id></row>
    <row><id>1017956</id><product_id>1013393871</product_id></row>
    <row><id>1017310</id><product_id>1013393874</product_id></row>
    <row><id>771708</id><product_id>4388803569</product_id></row>
    <row><id>3270790</id><product_id>1013679270</product_id></row>
    <row><id>775869</id><product_id>1014142699</product_id></row>
    <row><id>1017599</id><product_id>1021870484</product_id></row>
    <row><id>1018789</id><product_id>1021870489</product_id></row>
    <row><id>1017091</id><product_id>1021870491</product_id></row>
    <row><id>1017333</id><product_id>1021870492</product_id></row>
    <row><id>1017630</id><product_id>1021870493</product_id></row>
    <row><id>1017774</id><product_id>1021870495</product_id></row>
    <row><id>1018192</id><product_id>1021870496</product_id></row>
    <row><id>1018725</id><product_id>4408034849</product_id></row>
    <row><id>1017990</id><product_id>1021870498</product_id></row>
    <row><id>1018027</id><product_id>1021870499</product_id></row>
    <row><id>1017166</id><product_id>1021870500</product_id></row>
    <row><id>769120</id><product_id>1032140806</product_id></row>
    <row><id>950336</id><product_id>1035310069</product_id></row>
    </data> 
```

示例2.xml

```
<productSet>
 <row><product>4388803569</product></row>
 <row><product>4408034289</product></row>
 <row><product>4408034589</product></row>
 <row><product>4408034849</product></row>
 <row><product>4094557957</product></row>
 <row><product>4119945117</product></row>
</productSet> 
```

这是我的 Xquery，通过与示例 2 文件中的 product_id 元素进行比较，返回来自 sample1 XML 文件的所有产品元素值。在这里，我试图检索所有不可用的产品。

```
<outProduct_10310>
{ for $b in doc("sample1.xml")/data/row,
      $a in doc("sample2.xml")/productSet/row[product != $b/product_id]
  return   
      <op_id> { $b/product_id/text() } </op_id>
  }  </outProduct_10310> 
```

当我将这两个 XML 与等号进行比较但我想检索不匹配的数据时，此代码将返回正确的匹配数据，但如果我运行上面的代码，它会给出以下输出：

```
<outProduct_10310>
  <op_id>4119945117</op_id>
  <op_id>4119945117</op_id>
  <op_id>4119945117</op_id>
  <op_id>4119945117</op_id>
  <op_id>4119945117</op_id>
  <op_id>1009460692</op_id>
  <op_id>1009460692</op_id>
  <op_id>1009460692</op_id>
  <op_id>1009460692</op_id>
  <op_id>1009460692</op_id>
  <op_id>1009460692</op_id>
  <op_id>1009755673</op_id>
  <op_id>1009755673</op_id>
  <op_id>1009755673</op_id>
  <op_id>1009755673</op_id>
  <op_id>1009755673</op_id>
  <op_id>1009755673</op_id>
  <op_id>1013393868</op_id>
  <op_id>1013393868</op_id>
  <op_id>1013393868</op_id>
  <op_id>1013393868</op_id>
  <op_id>1013393868</op_id>
  <op_id>1013393868</op_id>
  <op_id>1013393871</op_id>
  <op_id>1013393871</op_id>
  <op_id>1013393871</op_id>
  <op_id>1013393871</op_id>
  <op_id>1013393871</op_id>
  <op_id>1013393871</op_id>
  <op_id>1013393874</op_id>
  <op_id>1013393874</op_id>
  <op_id>1013393874</op_id>
  <op_id>1013393874</op_id>
  <op_id>1013393874</op_id>
  <op_id>1013393874</op_id>
  <op_id>4388803569</op_id>
  <op_id>4388803569</op_id>
  <op_id>4388803569</op_id>
  <op_id>4388803569</op_id>
  <op_id>4388803569</op_id>
  <op_id>1013679270</op_id>
  <op_id>1013679270</op_id>
  <op_id>1013679270</op_id>
  <op_id>1013679270</op_id>
  <op_id>1013679270</op_id>
  <op_id>1013679270</op_id>
  <op_id>1014142699</op_id>
  <op_id>1014142699</op_id>
  <op_id>1014142699</op_id>
  <op_id>1014142699</op_id>
  <op_id>1014142699</op_id>
  <op_id>1014142699</op_id>
  <op_id>1021870484</op_id>
  <op_id>1021870484</op_id>
  <op_id>1021870484</op_id>
  <op_id>1021870484</op_id>
  <op_id>1021870484</op_id>
  <op_id>1021870484</op_id>
  <op_id>1021870489</op_id>
  <op_id>1021870489</op_id>
  <op_id>1021870489</op_id>
  <op_id>1021870489</op_id>
  <op_id>1021870489</op_id>
  <op_id>1021870489</op_id>
  <op_id>1021870491</op_id>
  <op_id>1021870491</op_id>
  <op_id>1021870491</op_id>
  <op_id>1021870491</op_id>
  <op_id>1021870491</op_id>
  <op_id>1021870491</op_id>
  <op_id>1021870492</op_id>
  <op_id>1021870492</op_id>
  <op_id>1021870492</op_id>
  <op_id>1021870492</op_id>
  <op_id>1021870492</op_id>
  <op_id>1021870492</op_id>
  <op_id>1021870493</op_id>
  <op_id>1021870493</op_id>
  <op_id>1021870493</op_id>
  <op_id>1021870493</op_id>
  <op_id>1021870493</op_id>
  <op_id>1021870493</op_id>
  <op_id>1021870495</op_id>
  <op_id>1021870495</op_id>
  <op_id>1021870495</op_id>
  <op_id>1021870495</op_id>
  <op_id>1021870495</op_id>
  <op_id>1021870495</op_id>
  <op_id>1021870496</op_id>
  <op_id>1021870496</op_id>
  <op_id>1021870496</op_id>
  <op_id>1021870496</op_id>
  <op_id>1021870496</op_id>
  <op_id>1021870496</op_id>
  <op_id>4408034849</op_id>
  <op_id>4408034849</op_id>
  <op_id>4408034849</op_id>
  <op_id>4408034849</op_id>
  <op_id>4408034849</op_id>
  <op_id>1021870498</op_id>
  <op_id>1021870498</op_id>
  <op_id>1021870498</op_id>
  <op_id>1021870498</op_id>
  <op_id>1021870498</op_id>
  <op_id>1021870498</op_id>
  <op_id>1021870499</op_id>
  <op_id>1021870499</op_id>
  <op_id>1021870499</op_id>
  <op_id>1021870499</op_id>
  <op_id>1021870499</op_id>
  <op_id>1021870499</op_id>
  <op_id>1021870500</op_id>
  <op_id>1021870500</op_id>
  <op_id>1021870500</op_id>
  <op_id>1021870500</op_id>
  <op_id>1021870500</op_id>
  <op_id>1021870500</op_id>
  <op_id>1032140806</op_id>
  <op_id>1032140806</op_id>
  <op_id>1032140806</op_id>
  <op_id>1032140806</op_id>
  <op_id>1032140806</op_id>
  <op_id>1032140806</op_id>
  <op_id>1035310069</op_id>
  <op_id>1035310069</op_id>
  <op_id>1035310069</op_id>
  <op_id>1035310069</op_id>
  <op_id>1035310069</op_id>
  <op_id>1035310069</op_id>
</outProduct_10310> 
```

我对 xquery 完全陌生。谁能帮助我如何获取不匹配的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:23:07.997

首先，您不需要使用 for 循环比较所有 id 对，因为如果您提供序列，标准 = 运算符将搜索相等的值。

因此，查找所有*匹配*产品的更简单方法是：

```
<outProduct_10310>
{ for $b in doc("sample1.xml")/data/row[product_id = doc("sample2.xml")/productSet/row/product]
  return   
      <op_id> { $b/product_id/text() } </op_id>
  }  
</outProduct_10310> 
```

对于不匹配的产品，您可以只选择与 not 运算符不匹配的所有产品：（请注意，您不能在此处使用 !=，因为总会有不同的 id）

```
<outProduct_10310>
{ for $b in doc("sample1.xml")/data/row[not (product_id = doc("sample2.xml")/productSet/row/product) ]
  return   
      <op_id> { $b/product_id/text() } </op_id>
  }  
</outProduct_10310> 
```

根据您的 XQuery 引擎有多好，您可能希望将括号`doc("sample2.xml")/productSet/row`移出`[..]`并将其存储在一个变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:17:14.177

请注意，所有一般比较（=、!=、...）都将左操作数的所有项目与右操作数的所有项目进行比较。一旦比较成功（即产量`true`），结果也将是正确的。例如，`(1,2) != (1,2)`将 return `true`，因为单一比较`1 != 2`产生`true`。

在您的特定查询中，您可以尝试`not(product = $b/product_id)`改为，只有在没有单个比较产生 true 时才会返回 true。

# c# - 从 C# 中的 char 中删除转义字符

> ID：12056523
> 
> 赞同：0
> 
> 时间：2012-08-21T13:58:36.333
> 
> 标签：c#

我在从数据库中检索 nchar(2) 并分配给 c# 中的 char 变量时遇到问题。以下是示例值：

**DB 值：** S **C# 变量值**“S” **DB 值：**空 **C# 变量值**“\0”

我正在使用动态变量进行检索，并将其分配给 char 变量后，它会引发错误。在将其分配给 char 变量之前，我是否需要先修剪并删除转义字符，或者是否有任何标准函数来执行该任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:04:57.400

试试这个：

```
string dbValue = ...; // FROM DB!
string cValue = dbValue == null ? String.Empty : dbValue.Trim('\0').Trim(); 
```

结果，您将得到一个空字符串，用于 db 的空值以及空字符串...

# c# - 既然已经发布了 VS 2012，那么在 VS 2010 中使用 Async 的正确方法是什么？

> ID：12056525
> 
> 赞同：11
> 
> 时间：2012-08-21T13:58:39.550
> 
> 标签：c#, visual-studio-2010, visual-studio-2012, async-await, async-ctp

由于工作限制，我需要在不久的将来继续使用 Visual Studio 2010。同时，我在个人编码中一直在学习 Async。最新的 Async CTP 是否与 C# 5.0 的 Async 语言特性完全一致？并且安装 Async CTP 是在 VS2010 中使用 Async 的正确方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T14:13:24.287

异步 CTP 是在 Visual Studio 2010 中使用的唯一方法`async`。但是，它并不是在`async`.NET 4.5 / Visual Studio 2012 中使用的，CTP 中的几个错误已在最终版本中修复。根据 CTP 的自述文件，您不会在 Visual Studio 2010 中获得这些错误修复：

> **关于“原样”许可的说明**
> 
> *虽然 Async CTP 许可证不会阻止您在生产环境中自担风险使用它，但我们建议您不要这样做。*此 CTP 的目标只是收集有关我们预期异步设计的反馈。我们没有设计或构建它以用于生产环境，也没有像在生产环境中使用所需的那样彻底测试它，我们认为它存在太多缺陷，不适合在生产环境中使用。我们非常感谢有关 Async CTP 的反馈，但我们不打算对 Async CTP 本身进行任何修复：我们所做的修复只会出现在最终受支持的发布产品中。

如果您绝对需要 VS 2010，我会尝试先安装 Async CTP，然后安装 .NET 4.5（运行时和 SDK）。在 Visual Studio 中开发，但使用独立编译器进行构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T18:51:47.663

尽管关键字相同，但 Async CTP 与最终的 C# 5.0 实现并不完全一致。

如果您真正的业务需求是生成可以在 .NET 4.0 上运行的应用程序，那么推荐的方法是使用带有[异步目标包](http://www.microsoft.com/en-us/download/details.aspx?id=29576)的 VS2012 （可通过 NuGet 获得）。

在此配置下，您的开发机器具有 .NET 4.5 和 VS2012，但是从您的解决方案构建生成的二进制文件将与 .NET 4.0 兼容。

这导致对异步语言功能的最全面支持，因为 VS2012 + 异步目标包为您提供完全相同的官方编译器，并且高于 CTP 质量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T14:33:03.833

鉴于 .NET 4.5 安装在 .NET 4 之上的方式，以及可能带来的挑战，我会尽量将您的工作环境与您的个人开发环境分开。

您*可以*在同一台机器上安装 VS2010 和 VS2012，我建议不要使用异步 CTP：

*   减少对工作 IDE 的污染
*   C# 5 的最新版本
*   使用 VS 2012 的所有好处

但是，如果可能的话，我认为在 VM 或单独的机器上进行开发会更安全。

最不吸引人的选择是使用 CTP，IMO - 老实说，我只能看到这方面的风险。

# algorithm - 装箱算法

> ID：12056526
> 
> 赞同：1
> 
> 时间：2012-08-21T13:58:42.420
> 
> 标签：algorithm, bin-packing

我有一个厨房从冷冻加热饭菜，他们需要按人数生产饭菜。餐点以冷冻大小的份量提供，例如 4 块、6 块等。较大的尺寸具有较低的单位成本。所以允许浪费，我如何计算尺寸以最低成本完成订单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:13:39.000

这个问题对我来说听起来像是[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)。我假设[贪心算法](http://en.wikipedia.org/wiki/Greedy_algorithm)在这里不起作用，因为似乎存在重叠的子问题。您可能必须使用[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)算法，该算法通过计算满足该人数的膳食部分的所有可能组合的成本来确定给定人数的最低成本。

我只是为您指出了正确的方向，因为这听起来可能是家庭作业。无论哪种方式，这个问题听起来都可以简化为一个众所周知的解决方案。

# label - JavaFX 1.3 中的标签

> ID：12056527
> 
> 赞同：1
> 
> 时间：2012-08-21T13:58:52.670
> 
> 标签：label, javafx

`CheckBox`当用户单击与其关联的标签时，我想更改 JavaFX 1.3 的状态。该控件的[文档`Label`提到了该`labelFor`属性](http://docs.oracle.com/cd/E17802_01/javafx/javafx/1.3/docs/api/javafx.scene.control/javafx.scene.control.Label.html)：

> Label 是一个不可编辑的文本控件。标签对于显示需要适合特定空间的文本很有用，因此可能需要使用省略号或截断来调整字符串的大小以适合。标签也很有用，因为它们可以具有助记符，如果使用这些助记符，会将焦点发送到列为`labelFor`属性目标的控件。

我尝试了以下方法：

```
var autoRefreshCheckBox : CheckBox = CheckBox {
    ...
}

var autoRefreshCheckBoxLabel : Label = Label {
    text: "Autorefresh"
    labelFor: autoRefreshCheckBox
} 
```

不幸的是它没有编译：

```
[WARNING] ...fx:347: cannot find symbol
[WARNING] symbol  : variable labelFor
[WARNING] location: class javafx.scene.control.Label
[WARNING] labelFor: autoRefreshCheckBox
[WARNING] ^ 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:42:53.507

you can add a text to the checkbox and it handles the onclick event.

```
 var autoRefreshCheckBox : CheckBox = CheckBox {
            text: "Autorefresh"
 .. 
```

}

# api - 场所搜索中的 CategoryId 无法正常工作

> ID：12056532
> 
> 赞同：0
> 
> 时间：2012-08-21T13:59:00.247
> 
> 标签：api, search, categories, foursquare

在“搜索场所”的foursquare Api文档中[https://developer.foursquare.com/docs/venues/search](https://developer.foursquare.com/docs/venues/search)它指出

```
"categoryId  - A comma separated list of categories to limit results to. This is an experimental feature and subject to change or may be unavailable. If you specify categoryId you may also specify a radius. If specifying a top-level category, all sub-categories will also match the query." 
```

意识到它应该是实验性的，但是当我提供 Food category ie`4d4b7105d754a06374d81259`时，它​​只返回一些本地结果，其余的都在数英里之外。
但是，如果我在网站上执行相同的搜索 sing Food 类别，它会正确返回很多结果，假设它的最后一点`"If specifying a top-level category, all sub-categories will also match the query"`不起作用，即它没有搜索子类别？

有什么解决办法解决这个问题吗？

谢谢，

尼尔·佩珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:55:14.393

您正在使用其默认意图 intent=checkin发出[/venues/search请求。](https://developer.foursquare.com/docs/venues/search)这将返回附近结果的过滤器，由于它试图猜测用户可能在哪里签到，因此受到距离的严重影响。

Foursquare Explore 使用[/venues/explore](https://developer.foursquare.com/docs/venues/explore)端点并尝试返回查询的推荐结果。如果您想获得在该工具中获得的各种结果，请致电 /venues/explore?section=food

# iphone - #import "PhoneGapDelegate.h" phonegap 中的错误消息？

> ID：12056534
> 
> 赞同：3
> 
> 时间：2012-08-21T13:59:01.407
> 
> 标签：iphone, cordova

我对 iPhone 开发非常陌生，并且希望使用 PhoneGap 框架来创建 iPhone 应用程序。我在 PhoneGap 项目中创建了 HTML、JavaScript。我已经在我的项目中导入了这些文件。当我编译我的项目时，XCode 显示以下错误，

' `PhoneGapDelegate.h`' 文件未找到

我已经搜索谷歌来解决这个错误，但我无法从那里找到任何单一的想法。而且我的发展也很新鲜。我从谷歌搜索中找到了以下链接我不知道如何在我的项目中使用它，

[http://ldt.stanford.edu/~educ39109/yaac/lab3/iphone/Classes/PhoneGapDelegate.h](http://ldt.stanford.edu/~educ39109/yaac/lab3/iphone/Classes/PhoneGapDelegate.h)

在项目中，我没有任何 PhoneGap 框架。我已经从 PhonGap 网站下载了示例应用程序。

你能帮我解决这个问题并运行这个项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:29:49.740

你说它是在一个框架内吗？你可能需要做一些事情

`#import <PhoneGap/PhoneGapDelegate.h>`

# c# - 如何在不存在的文件夹中自动创建文件？

> ID：12056535
> 
> 赞同：3
> 
> 时间：2012-08-21T13:59:02.560
> 
> 标签：c#, file, directory, atomic

给定一个文件的路径，我想创建这个文件，以及指向它的目录字符串（如果它们不存在）；但我不希望我的程序的任何其他实例能够看到没有文件的基本目录。

基本上，我想一次原子地创建所需的目录和文件。据我了解，必须分两步完成（创建目录，创建文件），所以我在考虑使用锁定文件，但同样的问题适用：我在哪里创建锁定文件？我不知道需要创建多少级别的文件夹，并且在某些时候，我可能会失去写入权限，因此锁定文件没有“安全的地方”。

然后我考虑使用锁定目录而不是锁定文件，但我找不到任何“测试和设置”方法来创建目录（`Directory.CreateDirectory(path)`不会告诉你它是否做了什么）。

那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:02:11.780

以临时名称创建目录和文件，并将目录自动重命名为最终名称。

或者使用事务性 NTFS（更难）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:05:12.787

您可以使用允许您同步进程间的 Mutex 类。

[http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

在所有进程的伪代码中

```
grab the mutex
try
 check or create directory and file
finally
release the mutex 
```

这适用于在同一台电脑上运行的本地程序实例。未指定，但对于跨网络使用相同数据库的程序实例，您可以在数据库中实现类似互斥的功能。

# asp.net-mvc - EntityFramework DataAnnotations 验证不起作用

> ID：12056543
> 
> 赞同：0
> 
> 时间：2012-08-21T13:59:21.043
> 
> 标签：asp.net-mvc, entity-framework, data-annotations

我使用 EF Power Tools 从现有数据库自动生成模型。我使用 DataAnnotations 执行所需的验证，这在大多数情况下都有效，除了验证与其他表具有外键关系的属性（一对多等）时。为了完成这些属性的验证，我需要做什么？

在下面的代码中，我试图将 DistributorId 属性设为必填字段。

```
 public class Event
{
    public Event()

    public int EventId { get; set; }
    [Remote ("CheckDuplicateEventName","Event",AdditionalFields="InsertMode")]
    [Required(ErrorMessage = "Event Name is required.")]
    public string Name { get; set; }

    [Required(ErrorMessage = "Distributor is required.")]
    public int DistributorId { get; set; }

    public virtual Distributor Distributor { get; set; }

} 
```

映射类

```
 public EventMap()
    {
        // Primary Key
        this.HasKey(t => t.EventId);

        // Properties
        this.Property(t => t.Name)
            .IsRequired()
            .HasMaxLength(256);

        // Table & Column Mappings
        this.ToTable("Events");
        this.Property(t => t.EventId).HasColumnName("EventId");
        this.Property(t => t.Name).HasColumnName("Name");
        this.Property(t => t.DistributorId).HasColumnName("DistributorId");

        // Relationships
        this.HasRequired(t => t.Distributor)
            .WithMany(t => t.Events)
            .HasForeignKey(d => d.DistributorId);

    } 
```

天呐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:54:51.880

这很简单，因为`Name`is a `string`（可以为空），而`DistributorId`is a `int`（不可为空）。这意味着`DistributorId`始终存在（尽管可能不是您要查找的值，但仍然`[Required]`满足验证。

你可能想要改变的是

*   或者用`[Required]`可以验证实际值的东西替换`[Range]`是很好的例子。
*   或者`DistributorId`在写入数据库之前将其作为字符串转换为 int 。

希望这可以帮助

# c# - C# wia + 网络扫描仪如何连接？

> ID：12056549
> 
> 赞同：0
> 
> 时间：2012-08-21T13:59:35.090
> 
> 标签：c#, wia, wsd

我可以枚举本地设备，我可以在注册表中找到我想连接的扫描仪的 DeviceId。CommonDialog 仅枚举本地设备。DeviceId 是只读的。

如何枚举网络上的设备，然后连接或连接到已知的 DevicedId？

谢谢

# design-patterns - 我应该为我的场景使用哪种 Java EE 模式？

> ID：12056550
> 
> 赞同：0
> 
> 时间：2012-08-21T13:59:39.050
> 
> 标签：design-patterns, jakarta-ee, session-variables

我有一个应用程序，它将许多变量作为属性存储在会话中。每次我需要一个时，我都必须记住属性名称的确切含义，并将其转换回它的类型以使用它。

我正在考虑使用单个对象来包含所有这些变量，并将其称为“SessionManager”，这样我只需要记住一个属性名称并且转换不会失败。

我想知道这是否是一种模式，或者是否存在类似或更好的现有模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:14:19.667

听起来您的会话需要某种缓存。

你不能不知道属性名称。但是，您可以使用每种对象类型的专用方法跳过铸造部分（理想情况下，除了基元之外，您不会有很多不同的类型）

既然你提到了 Java EE，我会选择一个无状态 bean，它实现了接口中定义的以下操作：

```
String getString(string fieldName);
int getInt(string fieldName);
DateTime getDateTime(fieldName);
...
object getObject(fieldName); // for special scenarios
void setInt(string fieldName, int value);
void setString(String fieldnName, String value);
... 
```

在 bean 实现中，我将添加额外的灵活性：

定义两个实现前一个接口的类（除了 bean 类）。一个可以从内存中存储和读取值，另一个可以从数据库中存储和读取值。并添加一个策略模式，让您选择要使用的类（同样，因为您使用 Java EE，这可能是一个 Application Server 变量）

总结一下：

创建一个公开您需要的类型的接口（以避免强制转换） 在 EJB 中实现所述接口 在您要使用的不同数据存储中尽可能多地实现所述接口 实现一个简单的策略模式（不需要专用类，一个开关EJB 中的语句会做）选择适当的类。从您的代码中调用 EJB 客户端。

希望有帮助

# jquery - jQuery 对话框未在 IE8 中打开，但背景覆盖确实

> ID：12056555
> 
> 赞同：1
> 
> 时间：2012-08-21T13:59:54.117
> 
> 标签：jquery, internet-explorer-8, dialog

我正在使用 JQuery 的对话框在用户访问页面时弹出一条消息，但它应该每天只发生一次。我已经设法让一切正常，但是当代码命中时：

```
$('#dialog').dialog('open') 
```

没发生什么事。现在当我这样做时：

```
modal: true, 
```

运行它，背景覆盖确实出现了，但不是实际的对话框。我读了一个问题，他们说这是一个错误并注释掉了某行，我这样做了，但没有发生任何变化。

它在 chrome、ff 等中效果很好，只是在 IE8 中不行

这是我的代码（当然只是相关的东西）：

```
<script src="http://testsite/JQuery/js/jquery-1.8.0.min.js" ></script>
<script src="http://testsite/JQuery/development-bundle/ui/jquery.ui.core.js"></script>
<script src="http://testsite/JQuery/jquery-ui-1.8.20.custom/development-bundle/ui/jquery.ui.widget.js"></script>
<script src="http://testsite/JQuery/jquery-ui-1.8.20.custom/development-bundle/ui/jquery.ui.position.js"></script>
<script src="http://testsite/JQuery/jquery-ui-1.8.20.custom/development-bundle/ui/jquery.ui.dialog.js"></script>

<link rel="stylesheet" href="JQuery/jquery-ui-1.8.20.custom/css/ui-lightness/jquery-ui-1.8.20.custom.css" type="text/css">

<script type="text/javascript">

function openpopup() {
    $("#dialog").dialog('open');
}

function writeCookieTest() {
    var currentDate = new Date();
    currentDate.setTime(currentDate.getTime() + 60 * 1000); // Just a minute to test
    document.cookie = "oncePerDay=true; expires=" + currentDate.toGMTString() + "; path=/";
}

function readCookieTest() {
    var name = "oncePerDay";
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
}

$(document).ready(function () {

    $("#dialog").dialog({
        autoOpen: false,
        modal: true,
        height: 300,
        width: 300
    });

    if (readCookieTest() != "true") {
        writeCookieTest();
        openpopup();
    }
});
</script>

<div id="dialog" title="Reminder!">
<p>This is the text to remind...</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:12:17.920

解决了。没有所有需要的脚本和混合脚本版本似乎是一个问题，以下 jQuery 脚本允许对话框在 IE8 上正常工作：

```
<link rel="stylesheet" href="jQueryUI/jquery-ui-1.8.21.custom.css">

<script src="jQueryUI/jquery-1.7.2.min.js"></script>
<script src="jQueryUI/jquery.ui.core.js"></script>
<script src="jQueryUI/jquery.ui.datepicker.js"></script>
<script src="jQueryUI/jquery.ui.widget.js"></script>
<script src="jQueryUI/jquery.ui.position.js"></script>
<script src="jQueryUI/jquery.ui.dialog.js"></script>
<script src="jQueryUI/jquery.ui.mouse.js"></script>
<script src="jQueryUI/jquery.ui.draggable.js"></script>
<script src="jQueryUI/jquery.effects.core.js"></script>
<script src="jQueryUI/jquery.effects.explode.js"></script>
<script src="jQueryUI/jquery.ui.resizable.js"></script> 
```

# android - GMGridView 在 android 中等效

> ID：12056558
> 
> 赞同：3
> 
> 时间：2012-08-21T13:59:58.063
> 
> 标签：android, android-layout, gridview, android-emulator, grid

我们是否有类似 android.Some 库中的 gmgridview 等价物或可以模拟 android 的相同行为的东西，如 GMGRIDVIEW 为 iOS 做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:20:27.650

我认为没有适用于 Android 的 GMGGridView 的确切版本，但这里有一个可能有用的类似版本： [https](https://github.com/thquinn/DraggableGridView) ://github.com/thquinn/DraggableGridView （我相信它是开源的）还有关于 Android Gridview 的信息。 .. [http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html) http://www.mkyong.com/android/android-gridview-example/ 希望这些有帮助。

# xpages - 在@username 上单点登录，使用 Xpages 提供匿名

> ID：12056559
> 
> 赞同：0
> 
> 时间：2012-08-21T13:59:59.597
> 
> 标签：xpages

我认为我已经在我们的测试 8.5.3 服务器上配置了 web SSO (SPNEGO)。我创建了一个测试讨论数据库，当我使用 Web 客户端访问它时，会显示我的凭据。但是，如果我首先访问我的 Xpage，@Username 函数会显示匿名。如果我先显示讨论页面，然后返回我的 Xpage，@Username 会给出正确的名称。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:39:16.023

我会检查数据库的 ACL 并查看匿名设置的内容。

我怀疑在讨论中，anonymous 设置为“无访问权限”，因此它通过 SPNEGO 触发登录过程并使用您的凭据登录，但 XPage 应用程序可能将匿名设置为阅读器，因此它只是让您以匿名身份登录。

当您在 xpage 应用程序之前访问讨论时，正在设置 ltpatoken SSO cookie，因此当您点击 xpage 应用程序时，它知道您通过 SSO 登录，这就是为什么它在这种情况下显示正确的凭据。

# c# - 找不到类型或命名空间名称“ReportingServiceSoapClient”

> ID：12056562
> 
> 赞同：2
> 
> 时间：2012-08-21T14:00:04.680
> 
> 标签：c#, reporting-services, web-reference

我已经快放弃这个了。我知道这是一个报告服务网络参考，但我知道它不是以下网址中的任何一个。

> reportserv/ReportServer/ReportExecution2005.asmx
> reportserv/reportserver/ReportService.asmx
> reportserv/reportserver/ReportService2005.asmx?wsdl

有没有人碰巧知道这个参考的 URL？或者有人知道如何查看服务器上的所有 Web 引用吗？

```
ReportingServiceSoapClient rs = new ReportingServiceSoapClient(); 
```

> 找不到类型或命名空间名称“ReportingServiceSoapClient”我告诉你 ReportingServicesSoapClient 和 ReportInformation 不存在。

![在此处输入图像描述](../Images/8746ed6ddcbe94973ceabf5f854e601a.png)

![在此处输入图像描述](../Images/b626d17021b2081133bae4c898014462.png)

我正在使用它来查看报告服务中的所有文件夹。

```
ReportingServiceSoapClient rs = new ReportingServiceSoapClient();
            rs.ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Impersonation;

            CatalogItem[] HomeFolders = null;
            string reportPath = "/";
            rs.ListChildren(reportPath, true, out HomeFolders);

            foreach (var homeF in HomeFolders)
            {
                if (homeF.Type.ToString() == "Folder")
                {
                    Console.WriteLine(homeF.Path + "=> " + homeF.Name + " => is this your home folder? (y/n)");
                    bool ynLoop = true;
                    while (ynLoop == true)
                    {
                        var readL = Console.ReadLine();
                        if (readL == "y")
                        {
                            ynLoop = false;
                            TargetHomeFolder = homeF.Path.ToString();
                        }
                        else if (readL == "n")
                        {
                            ynLoop = false;
                        }
                        else
                        {
                            Console.WriteLine("You must use y or n");
                        }
                    }
                    if (TargetHomeFolder != "")
                    {
                        break;
                    }
                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:47:10.693

我的天啊！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！

我想消除更多的挫败感。区别仅此而已。您必须添加`reportserv/reportserver/ReportService.asmx`为**服务参考**而不是 Web 参考。如果您将其添加为网络参考，您将无法访问它。

# nhibernate - Fluent Nhibernate：同时在集合中获取集合

> ID：12056565
> 
> 赞同：0
> 
> 时间：2012-08-21T14:00:15.240
> 
> 标签：nhibernate, fluent-nhibernate, task-parallel-library

我需要急切地获取具有集合集合等的实体，以便我可以同时处理数据（一个具有许多 YELLOWEntities 的事物实体，每个实体都有许多 SubYellowEntities）。所需的关键代码是：

```
NHibernateUtil.Initialize(fetchedThings); 
```

（请参阅下面接受的答案。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:29:53.390

目前的方法存在几个问题。让我重新审视一下这个问题。

据我了解，您正在寻找`Things`具有多对一的检索`BlueEntities`和 的集合`YellowEntities`，而后者又具有 的集合`SubYellowEntities`。

`join fetch`您应该研究[批量获取](http://www.nhforge.org/doc/nh/en/index.html#performance-fetching-batch)实体和集合，而不是使用、转换器和循环。

为和设置好的批量大小`BlueEntity`后，您根本不需要 TPL 的东西。`Thing.YellowEntities``YellowEntity.SubYellowEntities`

如果事实证明您这样做了，您将无法返回可安全使用的实体，因为它们必须与单个会话相关联才能有用，并且会话不是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:52:44.643

**解决方案（如果您可以对此进行改进，请继续发布修订作为答案）：** 在 8 个处理器上运行 17 秒（低于 97 秒），结果正确。请记住，绝大多数时间都花在了计算上，而不是等待 Nhibernate 返回。

```
var fetchedThings = new List<Thing>();
var sessFT = Session.SessionFactory.OpenSession();
Task getThingsTask = new Task(() =>
   {
       fetchedThings = sessFT.CreateQuery(@" from Thing t " +
                             " inner join fetch t.BlueEntity " )
                             .SetResultTransformer(Transformers.DistinctRootEntity)
                             .List<Thing>();
        NHibernateUtil.Initialize(fetchedThings);
    });
getThingsTask.Start();

var fetchedYellows = new List<YELLOWEntity>();
var sessFY = Session.SessionFactory.OpenSession();
Task getYellowsTask = new Task(() =>
   {
        fetchedYellows = sessFY.CreateQuery(@" from YELLOWEntity y " +
                             " left join fetch y.SubYellowEntities " + ... )
                             .SetResultTransformer(Transformers.DistinctRootEntity)
                             .List<YELLOWEntity>();
        NHibernateUtil.Initialize(fetchedThings);
    });
getYellowsTask.Start();

getThingsTask.Wait();
getYellowsTask.Wait();

Parallel.ForEach(fetchedThings, thing =>
{
    thing.YELLOWEntities = fetchedYellows.Where(y=>y.Thing.Id == thing.Id).ToList();
    ...
    //...inner foreach() loop through 'YELLOWthings'... doing threadsafe stuff
    ...
});

//dispose the temp sessions 
```

# apache - mod_security 中未执行阶段 3 和 4

> ID：12056568
> 
> 赞同：0
> 
> 时间：2012-08-21T14:00:37.303
> 
> 标签：apache, resin, mod-security

由于 Railo/Resin 不允许会话 cookie 为 httpOnly，我一直在尝试使用 mod-security 2.7 来捕获它们。通常这会在`phase:3`我似乎无法处理阶段：3 或 4 的任何规则时完成......

像这样的简单规则：

```
SecRule RESPONSE_HEADERS:Set-Cookie ".+" "id:1005,log,phase:3,msg:%{matched_var}" 
```

访问我的 rootPage 时记录：

```
[/][4] Initialising transaction (txid UDORCgoUBWsAADDIBB4AAAA-).
[/][4] Transaction context created (dcfg 324de8).
[/][4] First phase starting (dcfg 324de8).
[/][4] Starting phase REQUEST_HEADERS.
[/][9] This phase consists of 0 rule(s).
[/][4] Second phase starting (dcfg 324de8).
[/][4] Input filter: This request does not have a body.
[/][4] Starting phase REQUEST_BODY.
[/][9] This phase consists of 0 rule(s).
[/][4] Hook insert_filter: Adding output filter (r 15b6110).
[/][4] Initialising logging.
[/index.cfm][4] Starting phase LOGGING.
[/index.cfm][9] This phase consists of 0 rule(s).
[/index.cfm][4] Recording persistent data took 0 microseconds.
[/index.cfm][4] Audit log: Not configured to run for this request. 
```

但是，当访问静态图像时，阶段 3 和 4 会正常处理：

```
[/image.png][4] Initialising transaction (txid UDORMgoUBWsAADDIBB8AAAA-).
[/image.png][4] Transaction context created (dcfg 324de8).
[/image.png][4] Hook insert_error_filter: Adding output filter (r 15ba120).
[/image.png][9] Output filter: Receiving output (f 15bba50, r 15ba120).
[/image.png][4] Starting phase RESPONSE_HEADERS.
[/image.png][9] This phase consists of 1 rule(s).
[/image.png][4] Recipe: Invoking rule 347328; [file "C:/Apache/conf/httpd.conf"] [line "525"] [id "1005"].
[/image.png][5] Rule 347328: SecRule "RESPONSE_HEADERS:Set-Cookie" "@rx .+" "phase:3,auditlog,pass,id:1005,log,msg:%{matched_var}"
[/image.png][4] Rule returned 0.
[/image.png][9] No match, not chained -> mode NEXT_RULE.
[/image.png][4] Output filter: Response body buffering is not enabled.
[/image.png][9] Content Injection: Not enabled.
[/image.png][4] Output filter: Completed receiving response body (non-buffering).
[/image.png][4] Starting phase RESPONSE_BODY.
[/image.png][9] This phase consists of 0 rule(s).
[/image.png][4] Output filter: Output forwarding complete.
[/image.png][9] Output filter: Sending input brigade directly.
[/image.png][4] Initialising logging.
[/image.png][4] Starting phase LOGGING.
[/image.png][9] This phase consists of 0 rule(s).
[/image.png][4] Recording persistent data took 0 microseconds.
[/image.png][4] Audit log: Not configured to run for this request. 
```

我正在使用 mod_caucho 将 Apache 连接到 Resin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:48:39.513

从您的日志中，它已被执行。

> [/image.png][4] 配方：调用规则 347328；[文件 "C:/Apache/conf/httpd.conf"] [行 "525"] [id "1005"]。[/image.png][5] 规则 347328：SecRule "RESPONSE_HEADERS:Set-Cookie" "@rx .+" "phase:3,auditlog,pass,id:1005,log,msg:%{matched_var}" [/ image.png][4] 规则返回 0。 [/image.png][9] 不匹配，未链接 -> 模式 NEXT_RULE。

你有一个错误，很愚蠢，当你请求一个静态资源时，服务器不会响应一个 Set-Cookie 头，只有你请求一个动态资源，它才会有一个 Set-Cookie 头。

在你的情况下，你请求一个图像。你可以请求一个动态文件，比如 website/inpde.php?uaer=admin，然后你会看到它匹配 Set-Cookie

# sqlite - 限制文本字段的字符数

> ID：12056571
> 
> 赞同：15
> 
> 时间：2012-08-21T14:00:49.047
> 
> 标签：sqlite

我想要一个字段“名称”最多 20 个字符......在 sqllite 中是否可能？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-10-07T21:15:40.807

是的，带有检查约束。这是一个强制使用长度小于或等于 20 个字符的 TEXT 数据类型的示例。

```
CREATE TABLE IF NOT EXISTS "test"
(
    "id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    "name" TEXT NOT NULL
    CHECK(
        typeof("name") = "text" AND
        length("name") <= 20
    )
);

INSERT INTO "test" ("name") VALUES ("longer than twenty characters"); 
```

结果：

```
Error: CHECK constraint failed: test 
```

帮助 OP 可能为时已晚，但也许其他人会发现这很有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-21T14:07:29.587

编号 每个[SQLite 版本 3 中的数据类型](https://www.sqlite.org/datatype3.html)，

> 请注意，类型名称后面的括号中的数字参数（例如：“VARCHAR(255)”）会被 SQLite 忽略 - SQLite 不会对字符串、BLOB 或数值。

# f# - F# 中的其他构造函数

> ID：12056573
> 
> 赞同：16
> 
> 时间：2012-08-21T14:00:51.813
> 
> 标签：f#

我正在尝试在 F# 中创建一个额外的构造函数来执行一些额外的工作（即读取基本的 csv 文件），如下所示：

```
type Sheet () =
  let rows = new ResizeArray<ResizeArray<String>>()
  let mutable width = 0

  new(fileName) as this = 
    Sheet() 
    then
      let lines = System.IO.File.ReadLines fileName
      for line in lines do
        let cells = line.Split ','
        rows.Add(new ResizeArray<String> (cells)) //line 16
        if cells.Length > width then width <- cells.Length 
```

但我收到以下错误：

```
Error   1   The namespace or module 'rows' is not defined   C:\Users\ga1009\Documents\PhD\cpp\pmi\fsharp\pmi\Csv.fs 16
Error   2   The value or constructor 'width' is not defined C:\Users\ga1009\Documents\PhD\cpp\pmi\fsharp\pmi\Csv.fs 17
Error   3   The value or constructor 'width' is not defined C:\Users\ga1009\Documents\PhD\cpp\pmi\fsharp\pmi\Csv.fs 17 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-21T15:41:57.987

正如 Daniel 指出的那样，F# 设计是您有一个主构造函数，它通常采用类所需的所有参数并执行初始化。其他构造函数可以为参数提供默认值，也可以根据其他信息计算它们。

在您的情况下，我认为最好的设计是`rows`作为构造函数参数传递。然后您可以添加两个额外的构造函数（一个加载文件，另一个提供空列表）。

这使代码更简单一些，因为您不必检查是否提供了参数（如 Daniel 的版本）。我还做了一些其他的简化（即计算`width`功能并使用序列推导 - 如果`Sheet`不修改数据，你也可以避免使用`ResizeArray`）：

```
type Sheet private (rows) =  
  // The main constructor is 'private' and so users do not see it,
  // it takes columns and calculates the maximal column length
  let width = rows |> Seq.map Seq.length |> Seq.fold max 0

  // The default constructor calls the main one with empty ResizeArray
  new() = Sheet(ResizeArray<_>())

  // An alternative constructor loads data from the file
  new(fileName:string) =
    let lines = System.IO.File.ReadLines fileName 
    Sheet(ResizeArray<_> [ for line in lines -> ResizeArray<_> (line.Split ',') ]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T14:09:18.797

`rows`并且`width`不在范围内。您可以让成员获取/设置它们，或者（我的建议）使具有最多 args 的构造函数成为主要构造函数：

```
type Sheet (fileName) =
  let rows = new ResizeArray<ResizeArray<string>>()
  let mutable width = 0

  do
    match fileName with 
    | null | "" -> ()
    | _ ->
      let lines = System.IO.File.ReadLines fileName
      for line in lines do
        let cells = line.Split ','
        rows.Add(new ResizeArray<string> (cells)) //line 16
        if cells.Length > width then width <- cells.Length

  new() = Sheet("") 
```

通常，辅助构造函数旨在成为主构造函数的重载，因此它们无法与类内部（字段）进行交互。这鼓励了单一的初始化路径（和更好的设计）。

# jquery - 从在运行时添加多个值的文本框向服务器发送值

> ID：12056579
> 
> 赞同：0
> 
> 时间：2012-08-21T14:00:59.873
> 
> 标签：jquery, jquery-ui

我有以下 div，我在运行时通过函数 addAnswers() 添加值现在我需要通过服务器发送这些值。（假设我有 4 个答案 ans1,ans2,ans3,ans4..所以我需要将它们作为 4 个字符串发送可能是字符串数组。请帮助.. /div> function addAnswers(){ $('#answers').append('' + $('#answer').val() + ''); 现在，当我向这个 div 添加 4 个答案说 ans1、ans2、ans3 和 ans4 时，我如何将它发送到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:08:33.390

我不确定我是否正确理解了您想要做什么，但是使用 jQuery 向服务器发送请求非常简单：

```
var s1 = 'string 1', s2 = 'string 2';
$.ajax({ url: 'server.url', data: 's1='+s1+'&s2='+s2 }) 
```

# hibernate - 从子查询 QuerySyntaxException 中减去休眠 HQL

> ID：12056581
> 
> 赞同：0
> 
> 时间：2012-08-21T14:01:05.947
> 
> 标签：hibernate, exception, subquery, hql

我正在尝试编写`HQL`适用于 Sybase 和 Derby 数据库的查询。这是查询的伪代码：

```
from MY_TABLE as t
where (t.Val = :val) 
and (t.Val2 > 
    ( select max(tt.Val2)
    from MY_TABLE as tt
    where tt.Val = :val) - 2); 
```

当我使用 hibernate 作为`HQL`查询运行它时，它会失败，`QuerySyntaxException: unexpected AST node`但如果我将查询作为 SQL 执行，它会成功。我已经把它缩小到不喜欢从子查询的结果中减去一个值，但我无法在谷歌上找到任何解释如何解决这个问题的东西。

有人知道我在做什么错吗？现在我只是将它作为 SQL 来继续前进，但我的好奇心真的很想知道如何在 HQL 中做到这一点。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T16:14:00.797

> 我正在尝试编写适用于 Sybase 和 Derby 数据库的 HQL 查询

您不会编写符合任何特定数据库平台要求的 HQL。HQL 是一种抽象，它引用映射对象图中的属性和类。

Hibernate 将使用您提供的映射和配置的方言负责生成符合底层数据库平台的 SQL。

# php - Symfony 2 FOS UserBundle 用户没有获得组的角色

> ID：12056583
> 
> 赞同：3
> 
> 时间：2012-08-21T14:01:07.960
> 
> 标签：php, symfony, fosuserbundle, roles

我正在使用 FOS 用户包来管理对我的应用程序的访问。[因为我需要一个组概念，所以我已经按照文档组](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/groups.md)中的描述实现了我需要的东西。

一切都可以创建用户和组，但是当我以用户身份登录并尝试获得他的角色时，他只有 USER_ROLE。

这是我的用户

```
use FOS\UserBundle\Entity\User as BaseUser;
class RegistredUser extends BaseUser
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\ManyToOne(targetEntity="myBundle\Entity\RegistredUserGroup")
 */
protected $group;
 [...]
} 
```

这是我的小组课

```
use FOS\UserBundle\Entity\Group as BaseGroup;
class RegistredUserGroup extends BaseGroup
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

[...]
} 
```

我的用户在 RegistredUser 表中没有设置任何角色，但设置了 groupId。该组具有 ROLE_ADMIN 角色。

在我的布局中，我尝试像这样检查角色：

```
 {% if is_granted('ROLE_ADMIN') %}
    <dl class="menuIcon">
                    <dd><img src="{{ asset('bundles/bundle/images/user.png') }}" alt=""></dd>
                    <dd>{{ "menu.gererReferentiel"|trans }}</dd>
                    </dl>
    {% endif %} 
```

但是 Symfony 不显示任何内容。

我是否使用了错误的功能来检查 groupe 角色？还是我做错了什么？

一个解决方案是让 groups_role 通过

```
{% if app.user != null and  app.user.group.hasRole('ROLE_ADMIN') %} 
```

但是还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T06:10:42.307

> FOSUserBundle 允许您将组关联到您的用户。组是对角色集合进行分组的一种方式。组的角色将授予属于它的所有用户。

来自[**使用 FOSUserBundle 的组**](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/groups.md)

在你的情况下，你不应该检查

```
app.user.group.hasRole('ROLE_ADMIN') 
```

如果用户有一个具有角色管理员的组，但检查当前用户是否是某个组的成员，例如

```
app.user.hasGroup('ADMIN') 
```

# crystal-reports - Crystal Reports - 计算日期之间的周数，包括年份

> ID：12056586
> 
> 赞同：0
> 
> 时间：2012-08-21T14:01:17.570
> 
> 标签：crystal-reports

我运行了一份报告，其中包括计算两个日期之间的周数。

```
IF(DatePart ("ww",Date({Documents/Document/HeaderData.ShipDate}),crMonday))-(DatePart ("ww",Date({Documents/Document/HeaderData.TenderDate}),crMonday))<> 0 THEN (DatePart ("ww",Date({Documents/Document/HeaderData.ShipDate}),crMonday))-(DatePart ("ww",Date({Documents/Document/HeaderData.TenderDate}),crMonday)) 
```

这适用于同一年的日期，但我们发现 2013 年的日期计算不正确。有没有办法在一周中包含一年的计算，这会给我们一个真实的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:04:27.857

只需使用`DateDiff`而不是减法：

```
DateDiff (Intervaltype, Date1, Date2, firstDay) 
```

IE

```
DateDiff (("ww", Date({Documents/Document/HeaderData.ShipDate}),
     Date({Documents/Document/HeaderData.TenderDate}), crMonday) 
```

（**注意：**上面的代码应该在一行，但为了便于阅读，它被分成两行）。

# powershell - 如何在powershell中更新变量中的变量？

> ID：12056589
> 
> 赞同：1
> 
> 时间：2012-08-21T14:01:23.180
> 
> 标签：powershell

我正在为我拥有的脚本制作一个菜单系统，我可以通过使用菜单或将它们作为参数传递给脚本来更改我需要的值。我目前的烦恼之一是在菜单刷新时输入新值后，菜单文本中的变量不会更新为新值。

```
 $global:drive="C:"

      $title = "Setup 

      "
           $message = "The default variables are:
            VARIABLES TO CHANGE

            1\. The Drive Location: $global:drive <<<--- This is the variable that does not update after I change it when I run the script.
       "

      $one = New-Object System.Management.Automation.Host.ChoiceDescription "&1 Drive", "The Drive Location:"

      $options = [System.Management.Automation.Host.ChoiceDescription[]]($one)

     :OuterLoop do 
{ 
    for ($i = 1; )
    {

      $result =  $host.ui.PromptForChoice($title, $message, $options, 1) 

    switch ($result)
        {
            0 {$global:drive = Read-Host "Drive is $global:drive .Set the  Drive Location";
                "The Drive is now: $global:drive";
                break;}

          }

                }
}

 while ($y -ne 100) 
```

最初我没有将变量设置为全局，但在此处阅读可能会有所帮助。它没有，但也没有伤害。我也尝试将其设置为脚本。变量确实发生了变化，所以这比任何东西都更美观。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:52:02.810

我运行了您的代码，但我在菜单中进行了更改。我唯一做的就是注释掉你的第一个`$global:drive="C:"`。如果它始终位于脚本的顶部，`$global:drive`则将始终显示`C:`.

您可以使用以下代码检查变量是否存在，如果它不存在则分配该值：

```
if $(!(Get-Variable -Name Drive -Scope global -ErrorAction SilentlyContinue)) { $global:drive="C:" } 
```

如果全局变量`Drive`存在，它什么也不做。如果不存在，`$global:drive`将设置为`C:`. 希望这可以帮助。

在@Norm 评论后编辑：

您的消息未更新的原因是因为`$title`设置在循环之外。因为`$Title`已经定义了，所以不需要每次循环运行时都改变。只需将`$Title`循环内的声明移到行之前`$result = $host.ui.PromptForChoice($title, $message, $options, 1)`。这应该可以解决您遇到的问题。

Edit2：对不起，`$message`需要移动，而不是`$title`

# python - 如何按

> ID：12056590
> 
> 赞同：4
> 
> 时间：2012-08-21T14:01:26.613
> 
> 标签：python, excel, python-2.7, pywinauto

```
from pywinauto import application
app = application.Application.start("C:\\Program Files\\Microsoft Office\\Office12\\EXCEL.exe")
app.Microsoft_Excel.TypeKeys('%a') 
```

%a = `Alt`+`a`

我要`Ctrl`+ `a`。有这个迹象吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:22:22.373

您必须使用`Control`密钥说明符 - `^`，因此请尝试：

```
app.Microsoft_Excel.TypeKeys('^a') 
```

[您可以在此处](http://www.rutherfurd.net/python/sendkeys/)或[此处](http://00010xg.wcomhost.com/rjp3/rjp3help/sendkeys_reference.html)获取有关 SendKeys 迷你语法的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T08:10:56.397

你可以使用：send_keys('^a')

# php - 如何在打开 JavaScript 的情况下进行 cURL？

> ID：12056595
> 
> 赞同：2
> 
> 时间：2012-08-21T14:01:36.207
> 
> 标签：php, javascript, curl, terminal

我需要将远程 uri 中的内容加载到本地的 PHP 变量中。远程页面仅在 JavaScript 打开时显示内容。我怎样才能解决这个问题？

本质上，如何将 cURL 用于需要 JavaScript 加载内容的页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:06:44.547

[Mink](http://mink.behat.org/)是我能找到的唯一 php 无头浏览器。如前所述，硒是另一种流行的选择。我不知道如果你有很多事情要做，这些会提供多好的性能。他们似乎更倾向于测试？

许多其他语言都有它们，列在下面的链接中。由于 php 不处理 javascript，因此您将需要另一个工具。无头浏览器公开了 javascript 引擎并允许您以编程方式与浏览器交互。

[无头互联网浏览器？](https://stackoverflow.com/questions/814757/headless-internet-browser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:06:41.143

为此，您必须使用浏览器插件（例如 selenium）模拟浏览器。不过，这将涉及的不仅仅是一个简单的 get 请求。

[http://seleniumhq.org/](http://seleniumhq.org/)

# php - 第二个顺序功能踩在第一个功能上

> ID：12056599
> 
> 赞同：0
> 
> 时间：2012-08-21T14:01:59.340
> 
> 标签：php, function, header

我想我必须崩溃并寻求帮助。（应该在 3 天前完成！）

这就是发生的事情......

*   PHP 读取会话和发布变量，从 mysql 查询构建一个 .csv 文件。
*   它会尝试打开“另存为”对话框，完成后跳转到另一个页面。
*   我正在使用嵌套函数，但是在运行时，对话框似乎被运行了并且永远不会出现。
*   单独的功能工作正常。
*   运行时，“另存为”对话框不等待用户输入
*   谁能看到我做错了什么，或者你能改变我的想法吗？
*   $filename 指向服务器上创建的 CSV 文件
*   $suggname 是用户应该在对话框中看到的默认文件名。

编码：

```
holdit($filename,$suggname);

function holdit($filename,$suggname) {
  $fp=@fopen($filename, 'rb');
  if (strstr($_SERVER['HTTP_USER_AGENT'], "MSIE")) {
    header('Content-Type: "application/octet-stream"');
    header('Content-Disposition: attachment; filename="'.$suggname.'"' );
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header("Content-Transfer-Encoding: binary");
    header('Pragma: public');
    header("Content-Length: ".filesize($filename));
  } else {
    header('Content-Type: "application/octet-stream"');
    header('Content-Disposition: attachment; filename="'.$suggname.'"' );
    header("Content-Transfer-Encoding: binary");
    header('Expires: 0');
    header('Pragma: no-cache');
    header("Content-Length: ".filesize($filename));
  }
  fpassthru($fp);
  fclose($fp);
  jump();
}

function jump() {
    header('Location: return_from_csv.php');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:17:28.887

您正在向 HTTP 响应添加大量标头。其中之一是`Location`指示浏览器重定向。显然，它将其解释为比其他标题更高的优先级。

决定是否要在响应中重定向或提供文件，然后选择其中一个。

我怀疑你误解了`Location`标题。阅读：[http ://en.wikipedia.org/wiki/HTTP_location](http://en.wikipedia.org/wiki/HTTP_location)

从外观上看，您尝试提供 CSV 文件，然后重定向到另一个页面。抱歉，您不能这样做。HTTP 响应只做一件事和一件事。您可以考虑使用`target`属性在另一个窗口中打开指向 CSV 文件的链接`<a>`。

# php - 在按钮上单击引用不同的 html 文件

> ID：12056600
> 
> 赞同：0
> 
> 时间：2012-08-21T14:01:59.693
> 
> 标签：php, html, button, click

我一直在寻找几个小时，可能是因为我有限的 Java 知识，我有点卡住了..

我正在开发一个网站，我想让事情尽可能容易改变。我希望用户加载主页，然后通过点击不同的按钮，页面的 html“主要内容”会相应改变。

我的理由是我想让一切都保持干净和简单，这样如果我想更新索引页面的格式，我只需要更新一页..

我假设我为此需要java..

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Prodigy Doo Design</title>
<link href="template/style.css" rel="stylesheet" type="text/css" />
</head>

<body>

<?php include('template/header.php'); ?>
<div class="pad50px900wide"><!--Padding after headder--></div>
<?php include('template/nav.php'); ?>

<!--*****************************
********* BODY CONTENT***********
******************************-->
<div class="bodyContent"><?php include('text.html'); ?></div>
<!--*****************************
******END OF BODY CONTENT********
******************************-->

<?php include('template/footer.php'); ?>

</body> 
```

被大量表示为“BODY CONTENT”的部分是我想要改变的部分。我想我可以以某种方式说：

如果主页按钮单击 - >包括'home.html'

如果关于按钮单击-> 包含'about.html' ... ...

我只是不知道如何将其放入代码中..

你可以在这里查看到目前为止我得到的东西[http://pddtest.webuda.com/](http://pddtest.webuda.com/)（如果你不知道，当你在大多数浏览器中显示该站点的源代码时，它会加载参考文件，就好像它们都是首先在一起，所以可能更容易理解我想要做什么）

抱歉，如果我有点含糊，任何帮助都会非常感激，我已经在互联网上爬了很长时间，我知道这可能相当简单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:28:40.120

我认为您要实现的是一个基本模板，其中只有主要内容发生了变化。这意味着编辑基本模板（或页面，如果你想调用它），编辑所有其他页面。

为此，您只需要一些基本的 PHP，您可以在 GET 变量中将文件名与响应一起发送。

```
<a href="index.php?file=about">About</a> 
```

无论您的包含在哪里，您只需将此变量添加到 php 扩展中：

```
<?php include ($file.".php"); ?> 
```

当然不要忘记检查变量是否在请求中。这是一种非常基本的方式，可能不安全，但它是基本 php 的一个很好的应用程序。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:09:05.060

您已经包含 PHP，这意味着您正在减少需要对您的页面进行更新的数量，并且更改页眉、页脚等中的某些内容将在整个网站上进行更改。

最好有单独的页面，即 index.php、about.php（您的页面必须是 .php 而不是 .html，因为您在页面中使用 php 来包含）并仅使用常规链接到这些页面链接。

这种方法对SEO也更好。

如果你真的想按照你最初谈论的方式来做，你可以使用 jQuery load() 方法。

更多信息在这里： [http ://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:13:24.070

我认为您需要阅读有关 javascript、HTML 和 PHP 的基础知识；这样，您应该能够自己获得它并成为更好的开发人员。

Javascript 是*客户端*脚本。这意味着您的 javascript 代码由用户的浏览器*解释。*当某些浏览器以不同方式解释您的 javascript 时，这可能会导致问题。

PHP 是*服务器端*脚本。无论您的用户使用什么浏览器浏览，它的行为都是一样的。只要传入相同的数据，函数就会以一致的方式运行。它将 HTML（或其他数据，但更高级）发送到客户端。

HTML 是标记。它所做的只是告诉浏览器*如何显示*您从服务器返回的数据。

将这三个结合起来，您可以更好地了解它们如何相互作用。如果您页面上的某些内容在后台可以是“动态的”，但一旦用户查看它是静态的（不变），请使用 PHP。如果某些内容依赖于用户输入来动态更改而不刷新页面，那么您将需要实现某种 javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:13:57.543

有多种方法可以实现这一点，这里有 3 种无需重新加载 index.html 的简单方法：

*   **使用 iFrame**：让 index.html 包含所有按钮和一个名为 PageContent 的 iFrame 在单击每个按钮时调用一个 JS 函数，该函数只需将 PageContent 的 src 属性更改为相关的 html。
*   **使用客户端 JS**：使 index.html 包含所有按钮。还将所有相关页面的内容包含到隐藏的 DIV 中。单击每个按钮时，隐藏所有其他“选项 DIVS”并仅显示相关的 DIV。
*   **使用 AJAX**：使 index.html 包含所有按钮和一个名为 PageContent 的 DIV 在单击每个按钮时调用一个 JS 函数，该函数只需访问服务器，获取链接到按钮的页面内容并将其呈现到 DIV 中内部HTML。

# java - GWT-Platform 一起展示演示者

> ID：12056604
> 
> 赞同：0
> 
> 时间：2012-08-21T14:02:09.330
> 
> 标签：java, gwt, gwt-platform, gwt-mvp

嘿，所以我只是在学习 gwtp 框架，我遇到了一些困境。我在顶层有一个 LayoutPresenter，它有一个主内容槽和菜单内容槽，我正在尝试找到一种方法将每个槽的演示者绑定在一起，以便在显示主要内容时它会自动显示正确的一面菜单。目前，我在菜单的 Presenter 中有一个静态布尔值，它会更新 onReveal 和 onHide。然后，我可以检查显示主要内容时菜单是否可见，如果不可见，我会显示它。

```
 public class MenuPresenter extends Presenter<MenuPresenter.MyView, MenuPresenter.MyProxy> {

private static boolean hidden = true;
    ...
    @Override
protected void revealInParent() {
    RevealContentEvent.fire(this, LayoutPresenter.SIDE, this);
}

@Override
protected void onReveal(){
    super.onReveal();
    hidden = false;
}

@Override
protected void onHide(){
    super.onHide();
    hidden = true;
}

public static boolean isHidden(){
    return hidden;
}
    } 
```

然后在主要内容Presenter中：

```
 public class ContentPresenter extends
    Presenter<ContentPresenter.MyView, ContentPresenter.MyProxy> {

...

private final DispatchAsync dispather;
private final PlaceManager placeManager;

@Inject
public PhoneCallPresenter(final EventBus eventBus, final MyView view, final MyProxy proxy, final DispatchAsync dispatcher, final PlaceManager placeManager) {
    super(eventBus, view, proxy);
    this.dispather = dispatcher;
    this.placeManager = placeManager;
}

@Override
protected void revealInParent() {
    RevealContentEvent.fire(this, LayoutPresenter.CONTENT, this);
}

@Override
protected void onReveal() {
    super.onReveal();
    if (MenuPresenter.isHidden()){
        placeManager.revealPlace(new PlaceRequest(NameTokens.menu));
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:58:57.487

据我了解这个问题，您希望为不同的主要内容提供不同的侧面菜单。
在这种情况下，有两种解决方案：

1.  将菜单视为普通演示者（您可能会为每种主要内容类型设置多个）。`MenuPresenter`您只需要使用与您的主要内容 Presenter 相同的历史标记来注释相应的内容。因此，对于上面的示例，您将`PhoneCallMenuPresenter`使用与您的`PhoneCallPresenter`. 当您导航到`/phonecall`（或任何您的历史标记）时，两者`PhoneCallPresenter`都会`PhoneCallMenuPresenter`自动显示。（你不必做任何事情）。
2.  如果您只想拥有一个`MenuPresenter`并将要显示的逻辑放在其中`Presenter`，我建议使用 a`PresenterWidget`而不是 normal `Presenter`。将`MenuPresenterWidget`被注入`LayoutPresenter`并将添加到`LayoutPresenter.SIDE`插槽中。您可以为 定义一个设置器`MenuPresenterWidget`以指定当前显示的主要内容（将从 调用该设置器，`LayoutPresenter`或者您可以覆盖该`onReset()`方法并检查当前的位置请求并决定在菜单中显示什么。

对于解决方案 1，您必须`MenuPresenter`为每个主要内容都有一个，`Presenter`并且可能有许多代码行是多余的（您可以创建一个基础`MenuPresenter`并从中派生）。因此，如果侧面菜单中有很多业务逻辑与主要内容完全不同，我会选择解决方案 1。如果您只显示不同的链接，创建`MenuPresenter`每个主要内容的开销`Presenter`可能是到高，我会选择解决方案 2，只`MenuPresenterWidget`为所有主要内容类型创建一个并始终显示它。

# java - Java：异常关闭我的应用程序

> ID：12056605
> 
> 赞同：1
> 
> 时间：2012-08-21T14:02:10.003
> 
> 标签：java, exception

我想要一个从按钮引发异常的应用程序。
然后异常应该关闭应用程序（未处理的异常）。

（我需要它来检查我的代码`Runtime.getRuntime().addShutDownHook()`）

所以我写了这个

```
button1.addActionListener(new ActionListener() {
    @Override public void actionPerformed(ActionEvent e) {
        throw new NullPointerException("");
    }
}); 
```

并尝试也尝试抛出*RuntimeException*，但应用程序没有关闭。

有什么建议我如何因异常关闭我的应用程序？
谢谢。

**编辑**
我将解释 - 在 Java 文档中 - [http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread)](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread))
注意到当你编写一个 JVM 关闭挂钩 - 使其成为快速运行的代码。引用：

> “关闭钩子也应该快速完成它们的工作......”

我的代码运行时间更长，我想通过异常来测试它（而不是 System.exit() - 虽然它应该是相同的，但有时结果不一样）

只是想知道如何从按钮引发异常（我知道代码很糟糕，它是用于测试的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:12:22.443

您需要捕获异常并调用 System.exit()

[评论中对此进行了](http://ruben42.wordpress.com/2009/03/30/catching-all-runtime-exceptions-in-swing/)解释（由 Duncan Jones 建议；）

> setDefaultUncaughtExceptionHandler 仅在线程死亡时才起作用（线程由于未捕获的异常而突然终止）。但除非应用程序结束，否则 EventQueue 线程将永远不会死亡。因此，如果不进行特殊处理，所有未捕获的异常都将被 EventQueue 吞并并静默进入系统。

所以我会添加一个未捕获的异常处理程序来捕获其他线程何时死亡，但是要检查 EDT 中抛出的异常，您必须自己捕获它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:06:23.593

检查这个答案： [如何在 Swing 中捕获此异常？](https://stackoverflow.com/questions/740418/how-do-i-catch-this-exception-in-swing)

在执行 uncaughtException 时，只需退出您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:16:06.327

> 任何建议如何由于异常而关闭我的应用程序？

首先，从动作监听器抛出异常是行不通的。它将杀死 Swing 事件调度程序线程，但这不会使应用程序退出。

简单的解决方案是`System.exit(...)`从侦听器调用以告诉 JVM 关闭。但是，如果这种方法有点“野蛮”并且可能导致异步执行的任务被放弃。您可以通过使用关闭挂钩来让任务摆脱困境来改善，但这仍然不是很好。例如，关闭挂钩不会以可预测的顺序触发......

更好的解决方案是将您的应用程序*设计*为在通过调用`System.exit()`. 例如，一旦“主”线程启动了 Swing 调度程序事件线程，它就可以等待一个告诉它关闭的条件。“退出”按钮的动作监听器会发出这种情况的信号，主线程会唤醒并开始关闭。

# jquery - 如何使用jQuery删除XML文件末尾的无效字符

> ID：12056606
> 
> 赞同：0
> 
> 时间：2012-08-21T14:02:09.623
> 
> 标签：jquery, xml-parsing

我必须使用 jQuery 处理一系列 XML 文件，这些文件在 XML 文件的最后一个结束标记之后包含无效字符。如果我手动删除字符，则文件可以使用以下代码完美运行：

```
 $.ajax({
    type: "GET",
    url: "data/brackets.xml",
    dataType: "xml",
    success: parseXml
  }); 
```

有没有一种简单的方法使用上面的代码在读取文件时将其删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:06:49.527

数据类型需要一个有效的`xml`XML 文档才能调用成功回调。您可以改为将数据类型设置为`text/plain`. 然后，您的结果将是一个字符串，您可以根据需要对其进行操作（删除某些字符），然后手动解析 XML 文档。

您还可以为 xml 数据类型添加自己的转换器：

```
$.ajax({
   type: "GET",
   url: "data/brackets.xml",
   dataType: "xml",
   success: parseXml,
   converters: {
       "text xml": function(xmlString) {
          // manipulate xmlString;
          return $.parseXML(xmlString);
       }
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:04:42.980

谢谢，这帮助我指出了正确的方向。我使用此代码使其工作：

```
 $.ajax({
     type: "GET",
     url: "data/brackets.xml",
     dataType: "xml",
     dataFilter: function (response) {
         response=response.substr(0,response.length-1);
         return response;
     },
     success: parseXml

 }); 
```

# mysql - Mysql 的 MD5 不能很好地使用编码

> ID：12056612
> 
> 赞同：5
> 
> 时间：2012-08-21T14:02:36.237
> 
> 标签：mysql, encryption, encoding, md5

我今天遇到了一个有趣的问题。在我的用户表中，所有字段都是 latin1_swedish_ci。密码存储为用户特定盐及其密码的 md5 哈希。

此查询导致错误：

```
SELECT * FROM users 
WHERE email = '...' 
AND password = MD5('1234' + salt) 
```

抱怨一个`#1267 - Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation '='`

当我将最后一行更改为：

```
AND password = CAST(MD5('1234' + salt) AS CHAR CHARACTER SET latin1) 
```

查询执行得很好。

首先，我怀疑我的输入（此处为“1234”）可能会混淆字符集，但我尝试了简单的测试选择，只有一个 md5`salt`并且没有其他输入，但字符编码错误仍然存​​在。

我想将 md5 转换为 latin1 进行比较是一种选择，另一种可能是将密码列设置为 utf8_general_ci。然而，我的问题是：

为什么？为什么即使您输入的部分采用不同的编码，md5 也会返回似乎是 utf8 的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:09:22.083

根据[MySQL 文档](http://dev.mysql.com/doc//refman/5.5/en/encryption-functions.html)：

> 一些加密函数返回 ASCII 字符串：MD5()、OLD_PASSWORD()、PASSWORD()、SHA()、SHA1()。从 MySQL 5.5.3 开始，它们的返回值是一个非二进制字符串，它具有由 character_set_connection 和 collat​​ion_connection 系统变量确定的字符集和排序规则。在 5.5.3 之前，这些函数返回二进制字符串。MySQL 5.5.6 中对 SHA2() 进行了相同的更改。

除了您已经提到的内容之外，您还可以更改列定义。您真的希望根据瑞典语使用的规则对您的密码哈希进行排序和比较吗？也许`binary`或者`varbinary`会是更好的列类型。

# opengl - 如何在同一个应用程序中同时管理 OpenGL 和 Direct3D 渲染

> ID：12056614
> 
> 赞同：2
> 
> 时间：2012-08-21T14:02:50.173
> 
> 标签：opengl, direct3d

目标是做一个渲染引擎，怎么可能同时拥有OpenGL和Direct3D，并且能够从一个渲染器切换到另一个渲染器。这主要是一个设计问题。我最好的猜测是某种多态行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:30:40.483

> 怎么可能同时拥有 OpenGL 和 Direct3D

将每个渲染器放入动态库中，并让它们导出一组通用函数。

> 并且能够从一个渲染器切换到另一个。

通过加载正确的库文件。如果尝试在任意时间执行此操作，请为主要的 PITA 做好准备。在程序启动时最容易完成。

# php - Zend Test assertResponseCode 与 PHPUnit 不兼容？

> ID：12056615
> 
> 赞同：0
> 
> 时间：2012-08-21T14:02:56.300
> 
> 标签：php, zend-framework, phpunit, zend-test

我正在尝试使用 Zend Test 和 PHPUnit 来测试我构建的应用程序。我只是处于设置的早期阶段并且遇到了一些问题（[请参阅这个有趣的问题](https://stackoverflow.com/questions/12041979/setup-phpunit-with-zend-test)）。但是除了 PHPUnit 出于某种原因无法写入日志文件之外，测试确实运行得很好（似乎）。但是，如果我尝试使用，则会`$this->assertResponseCode(200, 'some message');`收到以下错误：

```
Declaration of Zend_Test_PHPUnit_Constraint_ResponseHeader::evaluate() should be compatible with PHPUnit_Framework_Constraint::evaluate($other, $description = '', $returnResult = false) 
```

我查看了 Zend 测试代码，我很确定我传递了正确的参数。我也搜索了我的问题并找到[了这个问题](https://stackoverflow.com/questions/4464933/zend-framework-unit-test-fails-on-assertresponsecode200)。关于我做错了什么的任何想法？

我正在从[这里](http://pear.phpunit.de/)运行最新的 PHPUnit (3.6.12)，在 Windows 上运行 PHP 5.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:11:30.150

来自[http://framework.zend.com/issues/browse/ZF-11828](http://framework.zend.com/issues/browse/ZF-11828)：

> 由于一系列原因，关闭无法修复：
> 
> Matthew 反复声明 PHPUnit 3.4.x 是 ZFv1 的官方支持版本 反复尝试（官方和非官方）没有产生一个可行的 PHPUnit 3.4.x PHAR 存档，可以与 ZFv1 捆绑存在替代解决方案（即：altroot PEAR 安装 + PHPUnit 3.4.x)

# jquery - 删除字符串开头的逗号

> ID：12056619
> 
> 赞同：0
> 
> 时间：2012-08-21T14:03:07.297
> 
> 标签：jquery

Campaign Monitor 有一个脚本可以输出您的活动档案。这是输出：

```
<article class="node history">
  <ul>
    <li><a href="http://xxx.createsend.com/t/ViewEmailArchive/x/1448CC2F5A9BABD9/C67FD2F38AC4859C/" class="ext">Title</a>, 04 July 2012</li>
  </ul>
</article> 
```

因为我想将日期与标题分开（通过给 a 元素一定的宽度）；如何摆脱日期前面的逗号和空格 - 使用 jQuery？

当我尝试下一段代码时，我在 li 元素中的 a 元素消失了（所以没有更多的链接，一切都只是纯文本）。

更新：好的，所以这适用于逗号。如何删除空间以及？

```
$(".node.history ul li").each(function() {
      $(this).html($(this).html().replace(/[,]/, ""));
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:20:20.830

如其他答案中所述，您需要修复选择器，并使用`$().html()`而不是`$().text()`.

您的正则表达式也不需要方括号-它们定义了一组要匹配的字符（在您的情况下，当您想要 [我认为] 逗号*后跟*空格时，一个字符是逗号或空格）。完整解决方案：

```
<ul class="node history"> 
    <li>
        <a href=http://xxx.createsend.com/t/ViewEmailArchive/x/1448CC2F5A9BABD9/C67FD2F38AC4859C/ class="ext">Title</a>, 04 July 2012
    </li>
</ul> 
```

```
$("ul.node.history li").each(function() {
    var result = $(this).html().replace(/, /, "");
    $(this).html(result);
    alert(result);
}); 
```

[http://jsfiddle.net/RichardTowers/H5Hcj/](http://jsfiddle.net/RichardTowers/H5Hcj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:21:24.470

这可能会删除字符前的逗号

```
 $("ul.node.history li").each(function() {
 $(this).text($(this).text().replace(/\,/g, ""));
 });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:04:11.160

使用`$.html()`而不是`$.text()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:22:05.463

如果我理解您的问题，请尝试将您的 html 字符串简单地更改为：

```
<article class="node history">
  <ul>
    <li><a href="http://xxx.createsend.com/t/ViewEmailArchive/x/1448CC2F5A9BABD9/C67FD2F38AC4859C/" class="ext">Title</a>&nbsp 04 July 2012</li>
  </ul>
</article> 
```

删除逗号并添加“ ”（空格）

# blackberry - 在 Blackberry 中的 Editfields 之间自动更改焦点

> ID：12056620
> 
> 赞同：3
> 
> 时间：2012-08-21T14:03:09.530
> 
> 标签：blackberry, event-handling, focus, textfield, blackberry-editfield

我的 BlackBerry 应用程序中有五个`EditField`对象，每个对象只接受一个数字字符。

输入字符时，我想将焦点从第一个`EditField`更改为第二个。`EditField`请注意，从一个到另一个的焦点`EditField`必须自动进行，而不是通过按 Enter 键或其他键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:08:30.307

您想在字段内容更改时设置一个`FieldChangeListener`来`EditField`监视。一旦用户输入了一个字符，您就可以通过调用移动到下一个字段`Field.setFocus()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:15:47.400

假设您`EditField`的 s 被一一添加到屏幕上。

您可以使用下一个代码：

```
editField<i>.setFieldChangeListener(this);
...
public void fieldChanged(Field field, int status) {
   if (field instanceof EditField) {
     EditField editField = (EditField)field;
     if (field.getText().length() > 0) {//don't move focus in case of deleted text
        Manager manager = field.getManager();
        Field nextField = manager.getField(manager.getFieldIndex(editField) + 1);
        if (nextField instanceof EditField) {
           nextField.setFocus();
        }
     }
   }
} 
```

# json - 在查找 JSON-LD 主页时被重定向到 http://commitse.ru/

> ID：12056621
> 
> 赞同：1
> 
> 时间：2012-08-21T14:03:13.350
> 
> 标签：json, malware

每当我尝试访问 JSON-LD 的主页 (http://json-ld.org) 时，我都会被重定向到一个明显的恶意软件站点 (http://commitse.ru/)。我不知道为什么会发生这种情况或访问 JSON-LD 主页的任何解决方法。任何人都可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:06:32.530

我正在运行 100 多个站点，并且最近我的所有站点都感染了此重定向到[http://commitse.ru/](http://commitse.ru/)。我可以告诉你几件事。

首先，我发现这样做的人是通过中国联通北京省网络 ip 来`61.135.249.115`的。他们正在使用可以在您的 cpanel 中关闭的后门。默认情况下，门是敞开的，任何人都可以将文件上传到您的网络服务器。

“允许匿名上传”复选框，需要取消选中，在 FILES/ANONYMOUS FTP 下。他们正在用`htaccess`自己感染的`htaccess`.

# java - 如何在本地测试 EJB

> ID：12056623
> 
> 赞同：0
> 
> 时间：2012-08-21T14:03:19.683
> 
> 标签：java, jsp, ejb

EJB新手，请帮忙：

为了在本地验证我的 EJB，我尝试创建一个调用 EJB 的 test.jsp，如下所示：

```
<%@ page import="com.web.ejb.service.ContentInfo" %>
<% ContentInfo ci = ContentInfo.getContentById("123"); %> 
```

运行 jsp 时，出现错误“只能导入类型。com.web.ejb.service.ContentInfo 解析为包”。

然后我用

```
<jsp:useBean id="ContentInfo" class="com.web.ejb.service.ContentInfo" /> 
```

但得到“ContentInfo 无法解析为类型。”

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:07:42.070

从错误信息来看，好像`com.web.ejb.service.ContentInfo`不是你的类名。也许你打错字了？

如果您想更彻底地测试 EJB，您可以使用[OpenEJB](http://openejb.apache.org/)来复制 EJB 服务器的功能，例如在单元测试的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:46:33.937

首先检查类名是否正确，是否在上述包中可用。之后试试这个：

```
<%@ page import="<package>.<YourBusinessInterface>, javax.naming.*"%>

<%!
try {
   InitialContext ic = new InitialContext();
   <YourBusinessInterface> obj = (<YourBusinessInterface>)
                ic.lookup(<YourBusinessInterface>.class.getName());

} catch (Exception ex) {
    // exception code here    
}
%>

<html>
   <body>
      <% obj.callBusinessMethod(); %>
   </body>
</html> 
```

此链接[http://docs.oracle.com/javaee/5/tutorial/doc/bnbnp.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnbnp.html)可能会对您有所帮助。:)

# android - android中的shell脚本给出[：未找到

> ID：12056625
> 
> 赞同：3
> 
> 时间：2012-08-21T14:03:21.113
> 
> 标签：android, linux, shell, sh

我有这个可以在我的 linux 机器上运行的脚本

```
#!/bin/sh
c=1
if [ $c == 1 ]
then
  echo c is 1
else
  echo c is 0
fi 
```

但是当我在android中使用它时，如下所示：

```
#!/system/bin/sh
c=1
if [ $c == 1 ]
then
  echo c is 1
else
  echo c is 0
fi 
```

它给出了一个错误，如：

```
[: not found 
```

**编辑**

是否有任何其他逻辑来检查 的值`$c`，无论是 1 还是 0 ？

**Android shell 在 [] 中存在问题，如果是这样，还有其他方法可以检查 c 的值吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:11:10.257

andriod shell sh 实际上是一个到busybox的链接，它被调用为

```
busybox sh 
```

你需要手动设置[小程序

```
busybox ln -s /your_original_sh_path/busybox [ 
```

如果您不知道busybox放在哪里，请尝试列出您提供的/system/bin/sh

```
ls /system/bin/sh
busybox which busybox 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T07:06:58.400

通常`[`是 的别名`test`，

在 Linux 机器测试中

```
/usr/bin/test 
```

和

```
if [ $c == 1 ] 
```

被评估为

```
if test "$c" = 1 
```

**但是在android中没有`test`**

所以如果 with [] 在任何情况下都不起作用......

我将为android交叉编译测试并检查它....!!!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T16:07:44.500

Android 不提供完整的 UNIX 环境，它不是 UNIX 操作系统。它有一些相似之处，就像 Windows 与 UNIX 也有一些相似之处。一些 Android 设备和 ROM 尝试提供比其他设备更多的类 UNIX 环境，但如果您正在考虑跨设备兼容性，则不能依赖安装的大多数标准 shell 脚本工具。

例如，如果您查看您的 GNU/Linux 系统，您可以看到它`test`实际上`[`是程序。试试这个：`ls -l /usr/bin/[`。大多数 Android 安装不包括`test`或`[`. 这意味着，如果您想尝试使用 Android 的最小 shell 环境进行实际编程，您必须使用许多奇怪的技巧。您可以安装busybox 以获得完整的UNIX shell 环境，或者您甚至可以将busybox 构建到您的应用程序中。当我需要在应用程序中包含 shell 脚本（例如，[Lil' Debi](https://github.com/guardianproject/lildebi/)和[Commotion MeshTether](https://github.com/opentechinstitute/commotion-android)）时，我会这样做。

`killall`这是在 Android`/system/bin/sh`环境中编写的示例： [http://en.androidwiki.com/wiki/Android_Shell_tips_and_tricks](http://en.androidwiki.com/wiki/Android_Shell_tips_and_tricks)您还可以使用各种[参数扩展来创建一些逻辑，您可以在](http://tldp.org/LDP/abs/html/parameter-substitution.html)[Barnacle Wifi Tether 脚本](https://github.com/szym/barnacle/blob/master/res/raw/)中看到一个示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T14:05:09.183

使用 bash：

`#!/system/bin/bash`

或者

`#!/system/xbin/bash`

您可以检查您的`sh`二进制文件在您的 Linux 机器上指向的位置：

```
ls -l /bin/sh 
```

**编辑**

顺便说一句，使用：

```
c=1
if [ $c -eq 1 ]
then
  echo c is 1
else
  echo c is 0
fi 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T20:57:17.640

如何在换行之前检查 .sh 文件是否不包含回车符。

Windows \r\n -> CR LF

Unix \n -> LF

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T04:42:53.363

认为您使用了错误的算术运算符并且缺少“;”的语法错误：尝试

```
[ $c -eq 1 ]; 
```

此外，您在文件顶部的 Bash (sh) 位置可能是错误的：

```
#!/system/bin/sh 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-28T21:34:07.047

我也遇到了这个问题并找到了解决方案（在另一个站点上）

```
if [[ $b -gt 0]]
then
    echo 'Hooray it works'
else
    echo 'still works'
fi 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-14T00:58:21.557

使用 /system/bin/cmp 进行相等性测试。如果您需要进行数值测试，请将 $(($c == 1)) 替换为 $c

```
#!/system/bin/sh
echo $c >/tmp/a
echo 1 >/tmp/b
if cmp /tmp/a /tmp/b
    echo c is 1
else
    echo c is 0
fi 
```

# iis - IIS下的NetworkService有空的AppData路径

> ID：12056626
> 
> 赞同：4
> 
> 时间：2012-08-21T14:03:23.777
> 
> 标签：iis, iis-7, iis-8

在 Windows 8 上使用 IIS 8，我设置了一个应用程序池，它以`Network Service`.

在页面代码中，我调用：

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)
Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData) 
```

两个调用都返回 null。

我已经尝试过组合`<identity impersonate="true|false"/>`以及在应用程序池设置中将加载用户配置文件设置设置为 true|false，但我总是得到空结果。

我希望得到以下之一：

```
C:\Windows\ServiceProfiles\NetworkService\AppData\Local
C:\Windows\System32\config\systemprofile\AppData\Local 
```

在另一个用户的计算机上，即使应用程序池作为网络服务运行，他们也会将第二个文件夹作为路径 (IIS 7.5)。

这些配置文件文件夹会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:02:56.650

在你`%WINDIR%\System32\inetsrv\config\applicationHost.config`寻找`<applicationPoolDefaults>`. 在 下`<processModel>`，确保你没有`setProfileEnvironment="false"`。如果这样做，请将其设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:29:17.863

我认为您需要 LoadUserProfile 设置以及来自控制台的一个额外调用：

cd "%~dp0" md appdata

这将为应用程序池用户创建所需的文件夹。我不确定这是否会导致 Environment.SpecialFolder.ApplicationData 返回正确的路径。

# ruby-on-rails-3 - 在 Active Record 中查询三向关系

> ID：12056627
> 
> 赞同：0
> 
> 时间：2012-08-21T14:03:49.573
> 
> 标签：ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我试图弄清楚如何在不使用 find_by_sql 的情况下查询这种关系

```
class User < ActiveRecord::Base
  has_many :lists
end

class List < ActiveRecord::Base
  has_many :list_items
  belongs_to :user
end

class ListItem < ActiveRecord::Base
  belongs_to :list
  belongs_to :item
end

class Item < ActiveRecord::Base
  has_many :list_items
end 
```

这应该是我们正在使用的，但我怎么能不通过 user.rb 中的 find_by_sql 来做到这一点

```
def self.find_users_who_like_by_item_id item_id
  find_by_sql(["select u.* from users u, lists l, list_items li where l.list_type_id=10 and li.item_id=? and l.user_id=u.id and li.list_id=l.id", item_id])
end 
```

我尝试了几种不同的包含/连接/合并方案，但无法理解我想要做的事情。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:16:47.357

很难准确地说出您在此处尝试执行的查询，但看起来您想要用户记录，其中用户有一个具有特定 list_type_id 并包含特定项目的列表。这看起来大概是这样的：

```
User.joins(:lists => [:list_items]).where('lists.list_type_id = ? and list_items.item_id = ?', list_type_id, item_id) 
```

这会导致 ActiveRecord 执行如下查询：

```
SELECT "users".* FROM "users" INNER JOIN "lists" ON "lists"."user_id" = "users"."id" INNER JOIN "list_items" ON "list_items"."list_id" = "lists"."id" WHERE (lists.list_type_id = 10 and list_items.item_id = 6) 
```

并返回用户对象的结果集合。

# forms - 疑难解答“必须管理传递给选择字段的实体”

> ID：12056630
> 
> 赞同：1
> 
> 时间：2012-08-21T14:04:07.437
> 
> 标签：forms, symfony

这个问题已经在 SO 上被问过好几次了——每次，解决方案似乎都不同，而且几乎总是，答案似乎是偶然发现的/或者它是一个粗略的 hack——这意味着没有一致的观点导致问题的原因以及如何解决问题。

我还遇到消息**“必须管理传递给选择字段的实体”** - 目前尚不清楚为什么会引发此异常。

我在捆绑包中定义了一个联系人类（.yml 格式）。Contact 类与其他两个类具有 manyToOne 关系，`Promotion`并且`ContactReferrer`- 见下文：

```
Foobar\ContactlistBundle\Entity\Contact:
    type: entity
    table: contact
    repositoryClass: Foobar\ContactlistBundle\Repository\ContactRepository

    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        first_name:
            type: string
            length: 32
            nullable: true

        last_name:
            type: string
            length: 64
            nullable: true

        email:
            type: string
            length: 128
            unique: true

        token:
            type: string
            length: 8
            unique: true

        is_validated:
            type: boolean

        created_at:
            type: datetime

        updated_at:
            type: datetime
            nullable: true

    manyToOne:
        promotion:
            targetEntity: Promotion
            inversedBy: promoted_contacts
            joinColumn:
                name: promotion_id
                referencedColumnName: id

        referrer:
            targetEntity: ContactReferrer
            inversedBy: referrer_contacts
            joinColumn:
                name: contact_referrer_id
                referencedColumnName: id 
```

我使用生成的表单`php app/console doctrine:generate:form FooBarContaclistBundleContact`并手动编辑了表单，如下所示：

```
class ContactType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('first_name')
            ->add('last_name')
            ->add('email', 'email')
            ->add('token')
            ->add('is_validated')
            ->add('created_at')
            ->add('updated_at')
            ->add('promotion', 'entity', array(
                                                'class' => 'Foobar\ContactlistBundle\Entity\Promotion',
                                                'expanded' => false,
                                                'multiple' => false, )
                 )
            ->add('referrer', 'entity', array(
                                                'class' => 'Foobar\ContactlistBundle\Entity\ContactReferrer',
                                                'expanded' => false,
                                                'multiple' => false, )
            );
    }

    public function getName()
    {
        return 'Foobar_contactlistbundle_contacttype';
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Foobar\ContactlistBundle\Entity\Contact',
        );
    }
} 
```

在我的 Entity/Contact.php 类中，这是构造函数的代码：

```
class Contact
{
    public function __construct()
    {
        $this->token = 'abcdef123';
        $this->is_validated = false;
        $this->created_at =  new \DateTime();
        $this->setUpdatedAt(new \DateTime());

        // Set these to defaults
        $this->promotion = new \Foobar\ContactlistBundle\Entity\Promotion();
        $this->referrer = new \Foobar\ContactlistBundle\Entity\ContactReferrer();
    }

    // more code ... 
} 
```

在我的控制器中，我有以下代码：

```
public function newcontactAction(Request $request)
{
    // do something ...
    $contact = new Contact();
    $form = $this->createForm(new ContactType(), $contact);  // <- Exception thrown here
    // do something ...
} 
```

当我浏览导致执行上述控制器代码的路径时，我收到错误：`Entities passed to the choice field must be managed`- 有谁**知道**是什么原因造成的以及如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:16:00.147

`Entities passed to the choice field must be managed`表示相关实体必须持久化到 entityManager。在创建表单之前尝试持久化`promotion`和`referrer`实体

```
public function newcontactAction(Request $request)
{
    // do something ...
    $em->persist($contact->getPromotion());
    $em->persist($contact->getReferrer());
    $form = $this->createForm(new ContactType(), $contact); 
```

如果这对您没有帮助，您将不得不创建新的促销和引荐实体，将它们保存到 entityManager，而不是`flush()`. 并且仅在此步骤之后创建新的联系人实体并创建表单。

# php - 在 Ajax 响应中发送数据

> ID：12056635
> 
> 赞同：0
> 
> 时间：2012-08-21T14:04:23.087
> 
> 标签：php, ajax, jquery

嘿，我正在尝试在另一个使用 ajax 的基础上填充一个选择下拉列表。我有一个选择填充投资组合，第二个是空的。当我从第一个选择框中选择一个选项时。我调用一个 ajax 函数，在其中发送所选的投资组合 id，在 ajax 方法中，我找到所选 id 的组，如何用我找到的组填充第二个选择。我的代码是

包含两个选择的表单

```
<form name="portfolios" action="{{ path('v2_pm_portfolio_switch') }}" method="post" >
        <select id="portfolios" name="portfolio" style="width: 200px; height:25px;">
            <option selected="selected" value="default">Select Portfolio</option>
            {% for portfolio in portfolios %}
                <option get-groups="{{ path('v2_pm_patents_getgroups') }}" value={{ portfolio.id }}>{{ portfolio.portfolioName }}</option>
            {% endfor %}
        </select><br/><br/>
        <select id="portfolio-groups" name="portfolio-groups" style="width: 200px; height:25px;">
            <option selected="selected" value="default">Select Portfolio Group</option>
        </select><br/>
</form> 
```

JS

```
 <script>
    $(document).ready(function(){
        $('#portfolios').change(function() {
            var id = $("#portfolios").val();
            var url = $('option:selected', this).attr("get-groups");
            var data = {PID:id};
            $.ajax({
                type: "POST",
                data: data,
                url:url,
                cache: false,
                success: function(data) {
                    //want to populate the 2nd select box here
                }
            });
        });
    }); 
</script> 
```

控制器方法，我在其中找到所选投资组合的组

```
public function getgroupsAction(Request $request){
    if ($request->isXmlHttpRequest()) {

        $id = $request->get("PID");
        $em = $this->getDoctrine()->getEntityManager();
        $portfolio_groups = $em->getRepository('MunichInnovationGroupPatentBundle:PmPatentgroups')
        ->getpatentgroups($id);
        return $portfolio_groups;
    }
} 
```

知道如何发送投资组合组并填充第二个选择

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:28:48.153

使用`getJson`代替`ajax()`;

Json（JavaScript Object Notation），是在 php 和 javascript 之间发送结构化数据的最简单方法。

我在这里假设控制器直接响应 ajax 查询，这`$portfolio_groups`是一个以“id”和“name”为键的关联数组或具有相同属性的对象。

在您的 PHP 控制器中发送 json 数据：

```
public function getgroupsAction(Request $request){
    if ($request->isXmlHttpRequest()) {

        $id = $request->get("PID");
        $em = $this->getDoctrine()->getEntityManager();
        $portfolio_groups = $em->getRepository('MunichInnovationGroupPatentBundle:PmPatentgroups')
        ->getpatentgroups($id);
        echo json_encode($portfolio_groups);
    }
} 
```

然后使用 getJson 检索数据并对其进行迭代：

```
$.getJSON(url, data, function(result) {
    var options = $("#portfolio-groups");
    $.each(result, function(item) {
        options.append($("<option />").val(item.id).text(item.name));
    });
}); 
```

查看[getjson 文档](http://api.jquery.com/jQuery.getJSON/)以获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:35:17.563

最简单的方法是从控制器返回 json 字符串，然后在 $.ajax 的“成功”调用中处理它。

让我们假设，您的 $portfolio_groups 变量是一个数组：

`$portfolio_groups = array('1'=>'Portfolio 1', '2' => 'Portfolio 2');`

然后你可以从控制器返回它作为 json 字符串，如下所示：

`echo json_encode($portfolio_groups);`

然后在您的 jQuery ajax 调用中，您可以在响应中捕获此字符串（$.ajax 的“成功”设置）。不要忘记添加设置 dataType: 'json'

粗略地说，您的 $.ajax 调用将如下所示：

```
$.ajax({
    type: "POST",
    data: data,
    url:url,
    cache: false,
    dataType: 'json', // don't forget to add this setting
    success: function(data) {
        $.each(data, function(id, title){
            var node = $('<option>').attr('value', id).html(title);

            // this will simply add options to the existing list of options
            // you might need to clear this list before adding new options
            $('#portfolio-groups').append(node);
        });
    }
}); 
```

当然，如果数据不为空等，您还需要添加检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:58:50.177

假设函数*getgroupsAction*保留在一个平面 php 控制器中（不在类中），您应该告诉服务器执行该函数

因此，在 ajax 调用文件的末尾，您几乎不应该先调用该函数（可能是您做到了！）

对于您的专利组结果集，您可以通过 php 或 javascript 生成选择

在第一种情况下，您应该这样做：

```
//php
  $options = getgroupsAction($_REQUEST);
  $return = "<select name =\"name\" id=\"id\"><option value=\"\"></option>";
 foreach( $options as $option){
       $return.= "<option value=\"$option\">$option</option>";
 }
 $return .= "</select>";
  echo $return; 
```

然后在Javascript中：// javascript

```
 var data = {PID:id};
        $.ajax({
            type: "POST",
            data: data,
            url:url,
            cache: false,
            success: function(data) {
                //inside data you have the select html code so just:
               $('#divWhereToappend').append(data);
            },
    error: function(data) {
                //ALWAYS print the error string when it returns error for a more easily debug
         alert(data.responseText);
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:32:10.170

看看这个 XML[教程](http://www.w3schools.com/xml/)（有人会因为我链接到 w3schools 而发火）这是一个好的开始。

AJAX 请求在非常广泛的术语中是使浏览器打开一个只有它可以看到（而不是用户）可以看到的窗口的调用。向服务器发出请求，服务器返回一个页面，发出请求的脚本可以查看该页面。这意味着任何可以用文本表达的东西都可以通过 AJAX 传输，包括 XML（AJAX 中的 X 代表 XML）。

这有什么帮助？考虑一下，如果您尝试填充下拉列表，则需要返回一个项目列表来填充它。您可以对页面进行 ajax 调用`http://www.mysite.com/mypage.php?d=select1`（如果您不熟悉 GET 和 POST 请求，或者对 AJAX 更实用的方面有一点了解，可以[在此处](http://www.w3schools.com/ajax/default.asp)获得另一个完整的教程）并让它返回一个项目列表如下：

```
item1
item2
item3
... 
```

并扫描文本以查找换行符。虽然这肯定适用于大多数情况，但它并不理想，并且在可能使用 AJAX 的所有其他情况下肯定不会有用。而是考虑在 XML 中格式化 PHP（.NET、ASP 等）中的返回：

```
<drop>
    <item>item1</item>
    <item>item2</item>
    <item>item3</item>
</drop> 
```

并使用内置在解析器中的 Javascript（[在此处](http://www.w3schools.com/xml/xml_parser.asp)概述）来获取数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T14:32:39.730

我要做的是使用 $.load() 函数。为此，您`getgroupsAction`应该返回选项 html。

JS：

```
<script>
    $(document).ready(function(){
        $('#portfolios').change(function() {
            var id = $("#portfolios").val();
            var url = $('option:selected', this).attr("get-groups");
            var data = {PID:id};

            // Perhaps you want your select to show "Loading" while loading the data?
            $('#portfolio-groups').html('<option selected="selected" value="default">Loading...</option>');

            $('#portfolio-groups').load(url, data);
        });
    }); 
</script> 
```

我不知道如何`$portfolio_groups`存储数据，但假设您会在回复中执行以下操作：

```
<?php foreach($portfolio_groups as $p) : ?>
    <option value="<?php echo $p->value ?>"><?php echo $p->name ?></option>
<?php endforeach ?> 
```

这样，选择将填充由输出的选项`getgroupsAction`。

# c# - 如何定义命名参数 C#

> ID：12056639
> 
> 赞同：19
> 
> 时间：2012-08-21T14:04:28.940
> 
> 标签：c#, .net, custom-attributes, named-parameters

这似乎是一个简单的问题，但由于某种原因，我无法在任何地方找到答案。基本上，我希望能够实现一个采用**NamedParameters**的构造函数。

通过命名参数，我并不是指具有默认值的参数（可选参数），例如：

```
public SomeMethod(){
    string newBar = Foo(bar2 : "customBar2");
}

public string Foo(string bar1 = "bar1", bar2 = "bar2" ){
     //...
} 
```

我试图实现的一个很好的例子是来自**System.Web.Mvc程序集的****AuthorizeAttribute**。您可以使用以下方式：

 **```
[Authorize(Roles = "Administrators", Users = "ThatCoolGuy")]
public ActionResult Admin(){

} 
```

intellisense 中的构造函数签名类似于以下示例，我相信（请确认）那些 NamedParameters 正在映射到类属性。

> AuthorizeAttribute.AuthorizeAttribute( **NamedParameters...** ) 初始化 System.Web.Mvc.AuthorizeAttribute 类的新实例
> 
> **命名参数：**
> 
> *   订单整数
> *   用户字符串
> *   角色字符串

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T14:12:17.373

请注意：

调用方法时定义参数名的语法与可选参数无关：

`Foo(bar1 : "customBar1");`即使这样声明，您也可以使用`Foo`：`void Foo(string bar1)`

* * *

回答这个问题：
我的猜测是，这是类似于 Visual Studio 2010 中引入的[对象初始化程序](http://msdn.microsoft.com/en-us/library/bb384062%28v=vs.100%29.aspx)的语法糖，因此您不能将它用于您自己的类。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-21T14:08:59.667

您正在谈论的行为特定于属性，不能在“普通”类构造函数中重用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-21T14:10:38.540

你不需要“实现”任何东西。

参数可以以您描述的方式使用，仅作为构造函数上的参数存在。

引入它们时，您*确实*需要使用 C# 3.5 或更高版本。

您的示例无需修改即可在 C# 4.0 / Visual Studio 2010 上编译和运行。

请参阅MSDN 上的[命名和可选参数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。

* * *

关于对象的属性，没有相应的构造函数参数，确切的语法是特定于属性的，不能被复制，但是，使用[对象初始化器](http://msdn.microsoft.com/en-us/library/bb384062.aspx)可以接近。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T14:06:34.653

您可以将构建器/构造器信息模式与属性初始化器一起使用。

```
class PersonInfo
{
    public string Name { get; set; }
    public int? Age { get; set; }
    public Color? FavoriteColor { get; set; }

    public Person BuildPerson()
    {
        return new Person(this);
    }
}

class Person
{
    public Person(PersonInfo info)
    {
        // use info and handle optional/nullable parameters to initialize person
    }

    ...
}

var p = new Person(new PersonInfo { Name = "Peter", Age = 15 });
// yet better
var p = new PersonInfo { Name = "Peter", Age = 15 }.BuildPerson(); 
```

但是我不明白，为什么您不只使用命名参数并提供 null 来指示可选参数。

```
class Person
{
    public Person(string name = null, int? age = null, Color? favoriteColor = null) { /* ... */ }
}

var p = new Person(name: "Peter", age: 15); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-07T01:52:47.443

命名参数并不特定于属性。这是一种可以在任何地方使用的语言语法。对初始化程序使用属性很好，但您并不总是希望将内部设置为设置属性。

只需使用以下方法实例化您的类：

```
TheClass c = new Theclass(param3:firstValue, param1:secondValue, param2:secondValue); 
```

关于这部分问题：

> “但是我不明白，为什么你不只使用命名参数并提供 null 来指示可选参数。”

命名参数很好的原因是您不需要在括号中提供无关的值，只需指定您想要指定的值，因为如果它是可选的，您甚至不需要输入 null。此外，如果您指定 null，您将覆盖该参数的任何默认值，使其成为可选。可选意味着有一个默认值，意味着没有传入任何内容。

实例时的属性初始化纯粹是为了方便。自 C 以来，已经能够在类型的构造时初始化值。如果无法在构造函数中指定这些值，这很方便。我个人觉得他们的便利已经宠坏了人们，它变得有点太自由了，让一切都公开了。仅取决于您需要的属性的设计和安全性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T14:11:44.530

我怀疑这是可能的。这是特定于属性的东西。

我认为最接近的选择是使用对象初始化器：

```
class Foo {
    public string Name {get;set;}
    public int Data {get;set;}
}

var foo = new Foo {Name = "MyName", Data = 12}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-02T15:08:11.197

尝试使用此签名

```
[AttributeUsage(AttributeTargets.Class)] 
```

在您的班级名称之前

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-19T13:14:23.143

Visual C# 2010 引入了命名参数和可选参数。命名参数使您能够通过将参数与参数名称而不是参数在参数列表中的位置相关联来为特定参数指定参数。命名参数使您无需记住或查找参数在参数列表中的顺序被调用方法的参数列表。

```
static void Main(string[] args)
{
    mapingFunction(snum2: "www.stackoverflow.com", num1: 1);
}
public static void mapingFunction(int num1, string snum2)
{
   Console.WriteLine(num1 + " and " + snum2);
} 
```

在这里你可以看到参数是按照我们的顺序传递的

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-12T13:45:23.853

完整说明请参考 MSDN 规范：

[https://msdn.microsoft.com/en-us/library/aa664614(v=vs.71).aspx](https://msdn.microsoft.com/en-us/library/aa664614(v=vs.71).aspx)

“*属性类的每个非静态公共读写字段和属性都为属性类定义了一个命名参数*”。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-29T14:32:20.407

您可能想要做的是在您的属性中实现公共属性：

```
public class AuditFilterAttribute : ActionFilterAttribute
{
    public string Message { get; set; }

    public AuditFilterAttribute() { }
} 
```

可以通过应用它的命名参数访问它们：

```
[AuditFilter(Message = "Deleting user")]
public ActionResult DeleteUser(int userId) 
```

希望有帮助...**

# c - 使用 FILE 删除文件 *

> ID：12056641
> 
> 赞同：0
> 
> 时间：2012-08-21T14:04:36.400
> 
> 标签：c, file, delete-file

> **可能重复：**
> [如何删除 C 中 FILE* 指向的文件？](https://stackoverflow.com/questions/3657886/how-can-i-delete-a-file-pointed-to-by-a-file-in-c)

**我想在C**程序结束时删除一个文件，此时文件名早已被遗忘。如果我可以只使用 FILE * 直接删除它或找到文件名然后使用 remove()... 而不必为此记住文件名，那就太好了。

有谁知道可以实现这一目标的任何方法？我在 Windows 系统上，但我需要保持可移植性，所以不能使用任何操作系统特定的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:07:53.193

> 如果我可以使用 FILE * 直接删除它或找到文件名然后使用 remove()... 而不必为此记住文件名，那就太好了

无法从`FILE *`. A`FILE *`不一定是真实文件；只是想想`popen(3)`例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:13:45.503

我不知道可移植的方式，但有一个 Linux 版本（可能适用于其他 unice）和一个 Windows 版本：

Linux：一个应该可以`readlink()`工作`sprintf("/proc/self/fd/%d",fd)`

Windows： `GetFileInformationByHandleEx()`会给你名称作为结构的一部分（搜索 MSDN，我的脑海中没有详细信息）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:19:03.720

例如

```
#include <stdio.h>
#include <stdlib.h>

void endproc(void){
    remove("removeFile.dat");
}

int main(){
    atexit(endproc);
    return 0;
} 
```

# c++ - 将二进制字符串转换为整数字符串c ++

> ID：12056642
> 
> 赞同：1
> 
> 时间：2012-08-21T14:04:38.373
> 
> 标签：c++, string, binary, decimal

> **可能重复：**
> [将 1 和 0 的字符串转换为二进制值](https://stackoverflow.com/questions/117844/converting-string-of-1s-and-0s-into-binary-value)

我想在 C++ 中将二进制字符串转换为整数字符串。例如：

`"000000000010"`变成`"2"`

我有以下约束：我不能将此字符串转换为整数类型，然后再将其转换为字符串，因为该二进制字符串可能非常大！

我已经尝试用 来做，用`stringstream`标志将二进制字符串插入它，`std::stringstream::binary`然后使用`std::dec`标志输出内容，但它不起作用

谢谢大家。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T14:08:09.833

您可以[`std::bitset`](http://en.cppreference.com/w/cpp/utility/bitset)从 a构造 a `std::string`，并使用`std::bitset::to_ulong`or`std::bitset::to_ullong`来获取整数。一定要注意字节顺序，它不是为你做的。

如果您需要整数中的字符串，请使用[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T14:14:52.023

你可以这样做：

*   创建一个新的输出字符串，包含“0”
*   对于（反转的）原始字符串的每个字符：
    *   将结果乘以 2（逐位计算，注意进位）
    *   如果数字是 a `'1'`，则在结果中加 1（如上）
*   反转结果（使用`std::reverse`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:15:50.257

在我的脑海中，我将从累加值 0 开始，从右到左读取二进制字符串。对于每个位，将累加值乘以 2，如果该位为 1，则将累加值加 1。如果累加值大于 9，则将其除以 10，并将余数作为字符写出。这将以相反的顺序给出十进制字符。

没关系。这行不通。

# android - android上的gwt-phonegap仅显示空白屏幕

> ID：12056645
> 
> 赞同：0
> 
> 时间：2012-08-21T14:04:57.997
> 
> 标签：android, gwt, cordova, mgwt

使用 gwt-phonegap 1.8.1 创建并在 Phonegap Cloud 上编译的基本 Android 应用程序仅显示空白屏幕。在咨询 gwt-phonegap 创建者的网站后，发现以下信息（[http://blog.daniel-kurka.de/2012/04/gwt-phonegap-16-issues-with-loading-on.html](http://blog.daniel-kurka.de/2012/04/gwt-phonegap-16-issues-with-loading-on.html)）但是，有gwt-phonegap 1.8.1 源代码中没有“de.kurka.cordova”包 - 所以我找不到纠正报告错误的方法。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:30:45.123

我博客上的类不打算在您的 GWT 项目中使用，它们需要添加到您的 android phonegap 项目中。

将这些类添加到您的 android phonegap 项目中，如博客中所述，您的应用程序将正常启动。

# java - 检查另一个线程中的任务是否已经在 Android 中完成

> ID：12056649
> 
> 赞同：0
> 
> 时间：2012-08-21T14:05:10.540
> 
> 标签：java, android, multithreading, sleep

我正在从网站下载 html 源代码并将其显示在 TextView 上。它正在另一个线程中下载，我想在它完成时显示它。所以。我必须暂停主线程，直到它完成。现在我这样做：

```
 MyAsyncTask task = new MyAsyncTask(this);
    task.execute();
    Thread.sleep(6000);
    ((TextView) findViewById(R.id.textView1)).setText(task.result); 
```

但正如您所见，这不是最好的方法。我需要类似“sleepUntil(boolean is MyTaskCompleated)”的东西。Java中是否有类似的东西。或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:10:10.117

让 UI 线程休眠与在 UI 线程本身中执行实际工作没有什么不同。这两种情况都会导致 UI 没有响应，并可能导致“应用程序无响应”消息。

您的目标似乎是在执行此工作时不允许用户执行任何其他操作。一种替代方法是使用进度对话框和子类方法中`dismiss()`的对话框来阻止 UI 。`onPostExecute()``AsyncTask`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:23:13.047

我使用**回调**。

*MyCallback.java*

```
public interface MyCallback<T> {
    public void onComplete(T result);
} 
```

*MyAsyncTask.java*

```
public class MyAsyncTask extends AsyncTask<Void, Void, Boolean> {

    private MyCallback<Boolean> mCallback;

    public MyAsyncTask(MyCallback<Boolean> callback) {
        mCallback = callback;
    }

    @Override
    protected void onProgressUpdate(Void... progress) {
        super.onProgressUpdate(progress);
        // ...
    }

    @Override
    protected Boolean doInBackground(Void... params) {
        // ...
    }

    @Override
    protected void onPostExecute(Boolean result) {
        if (mCallback != null) {
            mCallback.onComplete(result); // will call onComplete() on MyActivity once the job is done
        }
    }

} 
```

在此示例中，此回调将不接受任何参数并返回一个`Boolean`.

现在您所要做的就是让您的调用类（`MyActivity`例如）实现`MyCallback`：

```
public class MyActivity extends Activity implements MyCallback<Boolean> {
    // ...

    xxx {
        MyAsyncTask myAsyncTask = new MyAsyncTask(this); // the callback
        myAsyncTask.execute();
    }

    // ...

    @Override
    protected void onComplete(Boolean result) {
        // ...
    }
} 
```

这就是我所做的，而且效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:10:44.517

我建议创建一个扩展 Asynctask 的类，然后在重载方法中执行您的工作。这将使您能够在另一个线程上运行您的任务，并在结果完成后让它执行代码。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

查看用法下的示例。onPreExecute 和 onPostExecute 的重载在 UI 线程上运行，因此您可以执行一些操作，例如在 PreExecute 上显示进度对话框并在 PostExecute 上关闭它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:19:56.243

```
doSomeWork();
new MyAsyncTask().execute(url); 
```

异步任务：

```
private class MyAsyncTask extends AsyncTask<URL, Void, Void> {
 protected void doInBackground(URL... urls) {
     downloadHtml(urls[0]); 
 }

 protected void onPostExecute(Long result) {
     continueWorkHere();
 }
} 
```

# ajax - Kendo UI 数据源中新项目的 ID

> ID：12056651
> 
> 赞同：4
> 
> 时间：2012-08-21T14:05:23.333
> 
> 标签：ajax, kendo-ui

[当我使用 Kendo UI 数据源](http://docs.kendoui.com/api/framework/datasource#transport-object)在服务器端创建新项时，**如何**使用插入到服务器端数据库中的新记录的 ID 更新客户端数据项的 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:34:04.100

做更多的研究我发现这个非常有用的信息确实应该在文档中，但它被“隐藏”在一个不太容易找到的论坛搜索消息中：

[http://www.kendoui.c​​om/forums/ui/grid/refresh-grid-after-datasource-sync.aspx#2124402](http://www.kendoui.com/forums/ui/grid/refresh-grid-after-datasource-sync.aspx#2124402)

我不确定这是否是最好的方法，但它解决了我的问题！

该解决方案只是使用数据源**读取**方法来使用来自服务器的数据更新模型实例。

宝贵的信息是**在哪里**完成的：在**transport.create**对象的“**完成**”事件中！

 **这是代码：

```
transport: {
    read: {
        url: "http://myurl.json"
    },
    create: {
        url: "http://mycreate.json",
        type: "POST",
        complete: function(e) {
            $("#grid").data("kendoGrid").dataSource.read(); 
        }
    }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:00:23.647

为了避免 read 方法引入的额外服务器调用，如果您的 create 方法返回一个对象，数据源将自动为您插入它。

知道您需要做的就是从数据库中设置 id 字段并返回模型。

例如，用于创建的 ASP MVC 操作的伪代码。

```
public JsonResult CreateNewRow(RowModel rowModel)
{
    // rowModel.id will be defaulted to 0

    // save row to server and get new id back
    var newId = SaveRowToServer(rowModel);

    // set new id to model
    rowModel.id = newId;

    return Json(rowModel);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T14:31:19.353

我遇到了同样的问题，我想我可能已经找到了答案。如果在架构中定义了保存结果的对象，则必须在同一对象中返回创建链接的结果。例子：

```
schema: {
          data: "Results",
          total: "ResultsCount", .... 
} 
```

示例 MVC 方法：

```
public JsonResult CreateNewRow(RowModel rowModel)
{
    // rowModel.id will be defaulted to 0

    // save row to server and get new id back
    var newId = SaveRowToServer(rowModel);

    // set new id to model
    rowModel.id = newId;

    return Json(new {Results = new[] {rowModel}});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T19:45:15.900

只是添加到杰克的答案（我没有评论的声誉），如果您的创建和更新操作返回具有与剑道数据源中定义的相同架构的数据，数据源将自动更新 Id 字段以及任何其他可能已被操作调用修改的字段。您不必做任何其他可以正确形成结果的事情。我使用此功能在服务器端计算一堆东西，并向客户端显示结果，而无需完全重新加载数据。**

# ruby-on-rails - 如何在祝贺通知消息中显示用户电子邮件？

> ID：12056657
> 
> 赞同：0
> 
> 时间：2012-08-21T14:06:05.933
> 
> 标签：ruby-on-rails, devise

我正在使用设计宝石。

我想在注册消息后进行更改以告知以下内容：

```
 We sent confirmation instructions to user@mail.com. 
```

我想更改用户注册后显示的 flash[:notice] 消息。

我知道，我可以更改 devise.en.yml 中的文本，但是如何在这个文件中添加 Ruby 代码？

**编辑：当将 .erb 扩展名添加到 devise.en.yml 文件并使其成为 devise.en.yml.erb 文件时，以及当我尝试使用 erb 扩展名时：**

 **```
 signed_up: '<%=current_user.email%>' 
```** 

**什么都没有告诉我。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:17:34.737

这是我的问题的正确代码：

```
class RegistrationsController < Devise::RegistrationsController
  def create       
   if resource.active_for_authentication?
    session["resource_email"] = resource.email  
    flash[:notice] = "#{resource.email} signed in  successfully.."  if is_navigational_format?
  ...
  ...
  end
 end
end 
```

# glassfish-3 - Glassfish docroot 和无法访问的跨域

> ID：12056662
> 
> 赞同：0
> 
> 时间：2012-08-21T14:06:17.530
> 
> 标签：glassfish-3, crossdomain.xml

我正在尝试从 Flex 访问网络服务。网络服务部署在 Glassfish 3.1 应用服务器上。现在，Flex 需要在服务器的根目录（顶层）有一个“crossdomain.xml”文件。

问题出在这里：我搜索发现跨域文件应该在docroot目录中（c:\Glassfish3\Glassfish\domains\domain1\docroot）。那正是我放置它的地方，但是当我尝试到达它时却得到了 404。

我也试过把它放在应用程序下，但没有用。

我该怎么办？

谢谢你，伊多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:53:18.783

好的，我找到了答案，尽管我不确定是否推荐这样做。

在 Glassfish 管理控制台中，在配置 --> 服务器配置 --> 网络配置 --> http-listener-1 下。

我将地址从“0.0.0.0”更改为服务器的实际 IP 地址。

现在它工作正常，我可以访问 crossdomain.xml，但正如我所说，我不太确定是否推荐此操作并且不会产生其他错误。

谢谢你。

# objective-c - 是否需要在设备中启用 iCloud 才能存储来自应用程序的数据？

> ID：12056672
> 
> 赞同：0
> 
> 时间：2012-08-21T14:06:40.553
> 
> 标签：objective-c, cocoa, ios5, icloud

首先感谢您的帮助！我正在开发一个我们计划在 iCloud 空间中存储一些数据的应用程序。我们已将 iCloud 代码添加到应用程序，但无法弄清楚如下所述的一些事情：

1.  是否需要在用户设备中启用 iCloud（用户可能通过设置 -> iCloud 选择不使用 iCloud）才能将我的应用数据保存到 iCloud？
2.  据我所知，iCloud上的数据是根据用户的苹果ID保存的；因此，如果用户通过设置 -> 商店更改了他的苹果 ID，那么我的应用数据将存储在哪里（应用是通过不同的苹果 ID 下载的）？
3.  如何在开发环境中测试 iCloud。当我在各种设备上安装应用程序（通过使用 adHoc mpp 的 testflight）时，它不会同步数据）？

再次感谢！国会议员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:26:48.003

我得到了我自己问题的答案。请参考以下苹果链接：

参考苹果官网的[link1](https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/TestingandDebuggingforiCloud.html#//apple_ref/doc/uid/TP40012094-CH8-SW1)和[link2的最后一段。](https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesignForCoreDataIniCloud.html#//apple_ref/doc/uid/TP40012094-CH3-SW1)

# c# - 在 .Net Compact Framework 中绘图时控制闪烁

> ID：12056678
> 
> 赞同：2
> 
> 时间：2012-08-21T14:07:15.840
> 
> 标签：c#, compact-framework

我有一个在位图上绘制一些项目的控件。

我正在使用 Microsoft 手势库来滚动和平移位图。

在进行平移或滚动时，我的位图闪烁很多。

我只是`OnPaint`根据滚动/平移坐标在方法中绘制位图的一部分。

以下是示例代码：

```
protected override void OnPaint(PaintEventArgs e)
        {
            using (Graphics g = e.Graphics)
            {
                if (!_painted)
                {
                    // drawing items first time
                    InitilizeBitmap(g);                 
                    _painted = true;
                }           

                Rectangle rec = new Rectangle(0, _bitmapLocation.Y, ClientRectangle.Width, ClientRectangle.Height);
                using (Graphics gCached = Graphics.FromImage(_cachedBitmap))
                {
                    gCached.Clear(BackColor);
                    gCached.DrawImage(_bmpControl, 0, 0, rec, GraphicsUnit.Pixel);
                }

                g.DrawImage(_cachedBitmap, 0, 0);
            }
        }

        protected override void OnPaintBackground(PaintEventArgs e)
        {

        } 
```

有没有办法避免闪烁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:20:04.377

问题是您只使用 1 个缓冲区，因此绘制操作会立即出现。您需要的是翻页/双缓冲。

您要做的是设置一个新的图形对象，您可以在该对象上进行所有绘图，然后在完成后绘制完成的对象。这应该消除任何闪烁，因为面向屏幕的位图只更新一次，并且一次完成。

# xml - ORA-03113 使用 dbms_xmlschema.registerschema 时

> ID：12056679
> 
> 赞同：0
> 
> 时间：2012-08-21T14:07:16.387
> 
> 标签：xml, oracle, plsql, xsd

我正在尝试使用 Oracle plsql 存储过程注册一个 Xml 模式来验证一些 xml 文档。这是一段代码：

```
begin
    dbms_xmlschema.registerschema(
         schemaurl => 'http://www.w3.org/TR/xmldsig-core/xmldsig-core-schema.xsd',
         SCHEMADOC => bfilename('XMLDIR','xmldsig-core-schema.xsd'),
         local => false,
         gentypes => false,
         gentables => false,
    );
end; 
```

我的 XML 模式不是本地的，所以我必须将**local**设置为**false**。我确切地说所有这些语句都是在 SYS 用户下执行的。

我已经创建了一个目录并通过以下命令授予每个人访问权限：

```
create or replace directory XMLDIR as '/absolute/path/to/xmlschema';
create public synonym XMLDIR for XMLDIR;
GRANT ALL ON DIRECTORY XMLDIR TO PUBLIC; 
```

我注意到，如果在我运行第一个 plsql 块之前磁盘上不存在文件**xmldsig-core-schema.xsd**，则结果是**ORA-22288**错误（文件或 LOB 操作字符串失败字符串）。所以我之前创建了**xmldsig-core-schema.xsd**文件。

当我运行 *dbms_xmlschema.registerschema...* 我收到错误**ORA-03113 : end-of-file on communication channel**

怎么了 ？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:58:32.000

由于代理或防火墙问题，可能无法访问 DTD。您可以从 XML 模式中删除或注释 DTD 引用并尝试注册它。

如果您希望能够在不编辑模式的情况下注册模式，则需要确保`httpuritype()`在尝试注册模式之前可以使用 来访问 DTD 的 URL 而不会出现任何错误。

```
select httpuritype('http://www.w3.org/2001/XMLSchema.dtd').getClob() from dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T22:38:10.483

**ORA-03113**表示您的连接已断开。由于某种原因，您的客户端计算机和数据库服务器停止了相互通信。可能性：

*   服务器挂了？
*   你的网线有问题吗？
*   进程被杀死？
*   日志满了？
*   甲骨文内部错误？

查看您的警报日志。更多信息在这里：[如何解决 Oracle 11g 中的错误消息 ORA-03113？](http://www.oracle-error.com/11g/ORA-03113.html)

# javascript - 事件处理程序绑定到匿名函数与命名函数

> ID：12056684
> 
> 赞同：11
> 
> 时间：2012-08-21T14:07:34.653
> 
> 标签：javascript, jquery, event-handling

**我知道`.on()`jQuery 存在**并且`.bind()`将来不应该使用，考虑到我的 jQuery 版本大于或等于 1.7。

我想知道的是：将匿名函数或命名函数附加到事件处理程序之间有什么区别`.bind()`吗？

***例子：***

```
// Anonymous function
$(".warning").bind("click", function(){
   alert("Hello");
});

// Named function
$(".warning").bind("click", foo);

function foo(){
   alert("Hello");
} 
```

想象一下，我`div`的页面中有 100 个班级`warning`。该函数`.bind()`将使用匿名函数将一个新函数附加到每个处理程序，但它与 JavaScript 和 jQuery 内部的命名函数完全相同吗？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T14:08:35.170

不会有任何明显的性能差异。

一个主要区别是，使用命名函数，您还可以选择性地取消绑定函数，而不仅仅是与事件类型关联的所有函数。

当然，这也可以帮助您避免代码重复。

# salesforce - SalesForce Apex 代码在文件下载时失败 - 过早的 EOF

> ID：12056685
> 
> 赞同：1
> 
> 时间：2012-08-21T14:07:36.827
> 
> 标签：salesforce, apex-code, force.com

在我的 Apex 代码中，我试图下载一个远程 csv 文件来处理内存。不幸的是，`System.CalloutException: Premature EOF`当我尝试获取文件时出现错误。我能够使用该文件连接到服务器（当文件尚未准备好下载时，我可以看到返回的错误消息），因此连接详细信息可能不是问题。

```
private static void processURL(String url, UserHelper__c helper){

String username = 'login';
String password = 'password';

HttpRequest req = new HttpRequest();
HttpResponse res = new HttpResponse();
Http http = new Http();

req.setEndpoint(url);

Blob headerValue = Blob.valueOf(username + ':' + password);
String authorizationHeader = 'BASIC ' + EncodingUtil.base64Encode(headerValue);
req.setHeader('Authorization', authorizationHeader);

req.setMethod('GET');

try {
    System.debug('processURL Send request: '+req);
    res = http.send(req); //Premature EOF hits here.
    System.debug('processURL successful');

} catch(System.CalloutException e) {
    System.debug('processURL error: '+ e);
}

...

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:42:57.993

这是由于服务器以缓冲方式发送其响应造成的。似乎 SalesForce Apex 代码无法处理缓冲响应。我没有关于服务器端发生的事情的所有细节，所以我不能提供更多细节。

# android - 无法从 Android 中的反向地理编码打印地址

> ID：12056694
> 
> 赞同：1
> 
> 时间：2012-08-21T14:08:18.190
> 
> 标签：android, google-maps, android-emulator, reverse-geocoding

我从堆栈溢出中解决了许多问题并实施了上述过程。但我无法获得地址。如果我错过了什么，请告诉我..？myLoc = (TextView) findViewById(R.id.id1);

```
Geocoder geocoder = new Geocoder(getBaseContext(),Locale.getDefault());
try {
    address = geocoder.getFromLocation(latitude, longitude, 1);
                if (address.size() > 0) {
        for (int i = 0; i < address.get(0)
                .getMaxAddressLineIndex(); i++) {
            display = "";
            display += address.get(0).getAddressLine(i)
                    + "\n";
        }
        }

} catch (Exception e2) {
    // TODO: handle exception
}
myLoc.setText("Current Location:"+display);
System.out.println(display); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:18:14.143

您可以使用反向地理编码和 Google api 从纬度和经度获取地址。

**反向地理编码**：

```
 double currentLatitude;
    double currentLongitude;

void getAddress(){
        try{
            Geocoder gcd = new Geocoder(this, Locale.getDefault());
            List<Address> addresses = 
                gcd.getFromLocation(currentLatitude, currentLongitude,100);
            if (addresses.size() > 0) {
                StringBuilder result = new StringBuilder();
                for(int i = 0; i < addresses.size(); i++){
                    Address address =  addresses.get(i);
                    int maxIndex = address.getMaxAddressLineIndex();
                    for (int x = 0; x <= maxIndex; x++ ){
                        result.append(address.getAddressLine(x));
                        result.append(",");
                    }               
                    result.append(address.getLocality());
                    result.append(",");
                    result.append(address.getPostalCode());
                    result.append("\n\n");
                }
                addressText.setText(result.toString());
            }
        }
        catch(IOException ex){
            addressText.setText(ex.getMessage().toString());
        }
    } 
```

**Google API：**查看这个从纬度和经度返回地址的 api

[http://maps.googleapis.com/maps/api/geocode/json?latlng=17.734884,83.299507&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=17.734884,83.299507&sensor=true)

[要了解更多信息，请阅读此](https://developers.google.com/maps/documentation/geocoding/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:40:29.547

1.  [getMaxAddressLineIndex()](http://developer.android.com/reference/android/location/Address.html#getMaxAddressLineIndex%28%29)返回一个从零开始的**索引，因此您的 for 循环条件应该是***0 <= maxIndex*而不是*0 < maxIndex*
2.  **通过分配display = "";**在每次迭代中覆盖以前的地址行；因此将仅以最后一个地址行结束。这是故意的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:25:29.890

另一个好主意是实现 LocationListener 接口并使用 LocationManager`requestLocationUpdates()`方法将您的 Activity 注册为侦听器。然后，您可以覆盖`onLocationUpdate()`以在设备位置更改时收到通知。您向该`requestLocationUpdates()`方法提供在您接受另一个更新之前必须经过的最短时间以及在您获得更新之前设备必须移动多远。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-17T11:25:03.513

您可以这样做以获得完整的地址。如果你想要单独的**国家名称** ， **州**等。那么，我不会喜欢你这种方法。

```
public class ParentHomeActivity extends AppCompatActivity {

     ...

private Geocoder geocoder;
private TextView mAddressTxtVu;

     ...

// I assume that you got latitude and longitude correctly 

mLatitude  =  20.23232
mLongitude =  32.999

String errorMessage = "";

geocoder = new Geocoder(context, Locale.getDefault());

List<Address> addresses = null;

try {
          addresses = geocoder.getFromLocation(
                   mlattitude,
                   mlongitude,
                   1);
  } catch (IOException e) {
          errorMessage = getString(R.string.service_not_available);
          Log.e(TAG, errorMessage, e);
  } catch (IllegalArgumentException illegalArgumentException) {
                    // Catch invalid latitude or longitude values.
          errorMessage = getString(R.string.invalid_lat_long_used);
          Log.e(TAG, errorMessage + ". " + "Latitude = " + mlattitude +", 
         Longitude = " + mlongitude, illegalArgumentException);
  }

  // Handle case where no address was found.
  if (addresses == null || addresses.size() == 0) {
         if (errorMessage.isEmpty()) {
                  errorMessage = getString(R.string.no_address_found);
                  Log.e(TAG, errorMessage);
         }

  } else {
         Address address = addresses.get(0);
         ArrayList<String> addressFragments = new ArrayList<String>();

         // Fetch the address lines using getAddressLine,
         // join them, and send them to the thread.
         for (int i = 0; i <= address.getMaxAddressLineIndex(); i++) {
                  addressFragments.add(address.getAddressLine(i));
         }
         // Log.i(TAG, getString(R.string.address_found));

   mAddressTxtVu.setText(TextUtils.join(System.getProperty("line.separator"),
                            addressFragments));
                } 
```

# python - PY2EXE 是否编译 Python 代码以更快地运行？

> ID：12056702
> 
> 赞同：2
> 
> 时间：2012-08-21T14:08:46.073
> 
> 标签：python, exe, py2exe

我真的很喜欢 PY2EXE 模块，它确实帮助我与其他同事共享脚本，这些脚本非常易于使用。

我的问题是：当 PY2EXE 模块将代码编译成可执行文件时，生成的可执行文件过程是否更快？

感谢您的回复！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:13:02.650

py2exe 只是将 Python 解释器和所有需要的库捆绑到可执行文件和一些库文件中。当您运行可执行文件时，它使用捆绑的解释器来运行您的脚本。

由于它实际上并不生成本机代码，因此执行速度应该大致相同，可能会因为打包所有内容的开销而变慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:13:16.457

部分地，它将 python 环境与“预编译”的 pyc 文件捆绑在一起。这些已经被解析为 python 字节码，但它们不是本机速度可执行文件

# php - 如何将 RSS 提要转换为 $wp_query->posts？

> ID：12056704
> 
> 赞同：0
> 
> 时间：2012-08-21T14:08:50.727
> 
> 标签：php, wordpress, rss

是否可以在 Wordpress 中向后转换 RSS。与将我的帖子转换为 RSS 一样，我想将来自其他站点的 RSS 源转换为 $wp_query->posts 返回的相同格式，以便在 Wordpress 模板中使用，就像我使用 $wp_query->posts 一样。

谢谢，

托马斯

# wordpress - Wordpress 自定义主题问题（它在管理员上显示相同的主题）

> ID：12056706
> 
> 赞同：0
> 
> 时间：2012-08-21T14:09:02.863
> 
> 标签：wordpress, themes

我从标准网站迁移到 wordpress 主题，但一天后，当我尝试登录 wp-admin 时，它会显示主题和很多错误，例如 pluggable.php 上的“标头已发送”。

如何在不更改管理站点的情况下显示我的自定义模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:14:31.177

“标头已发送”警告表明您在新服务器上的错误显示设置更加严格。

由于显示错误，因此网站无法正确重定向您。

将以下内容添加到 wp-config：

```
error_reporting(E_NONE);
ini_set('display_errors', FALSE); 
```

这应该有助于克服这个问题。

此外，您不应该在`functions.php`文件中输出任何内容，因为管理区域包含它，因为您可能想要制作一个复杂的主题，为主题配置添加管理菜单按钮，有点像插件

# sql - 如何用一个语句插入多行

> ID：12056716
> 
> 赞同：-1
> 
> 时间：2012-08-21T14:09:46.690
> 
> 标签：sql, sql-server-2005

```
CREATE DATABASE Exercise

USE Exercise;
Go

CREATE TABLE Employees
(
EmployeeNumber nchar(10),
EmployeeName nvarchar(50),
DateHired datetime,
HourlySalary money
);
GO

INSERT INTO Employees
VALUES(N'593705', N'Frank Somah', N'20061004', 26.15),
(N'720947', N'Paul Handsome', N'20000802', 36.05);
GO

INSERT INTO Employees(EmployeeName, EmployeeNumber, DateHired)
VALUES(N'Clarice Simms', N'971403', N'20011112');
GO 
```

插入语句不起作用。',' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:12:18.430

在 SQL Server 2005 中，您不能使用`,`between `values`：

代替：

```
INSERT INTO Employees
VALUES(N'593705', N'Frank Somah', N'20061004', 26.15),
(N'720947', N'Paul Handsome', N'20000802', 36.05); 
```

使用`SELECT`with`UNION ALL`或 multiple `INSERT...VALUES...`：

```
INSERT INTO Employees
SELECT N'593705', N'Frank Somah', N'20061004', 26.15 
UNION ALL
SELECT N'720947', N'Paul Handsome', N'20000802', 36.05

INSERT INTO Employees
Values(N'593705', N'Frank Somah', N'20061004', 26.15)

INSERT INTO Employees
Values(N'720947', N'Paul Handsome', N'20000802', 36.05)
GO

INSERT INTO Employees(EmployeeName, EmployeeNumber, DateHired)
VALUES(N'Clarice Simms', N'971403', N'20011112');
GO 
```

因此，您的完整脚本将是：

```
CREATE TABLE Employees
(
    EmployeeNumber nchar(10),
    EmployeeName nvarchar(50),
    DateHired datetime,
    HourlySalary money
);
GO

INSERT INTO Employees
select N'593705', N'Frank Somah', N'20061004', 26.15
union all
select N'720947', N'Paul Handsome', N'20000802', 36.05
GO

INSERT INTO Employees(EmployeeName, EmployeeNumber, DateHired)
VALUES(N'Clarice Simms', N'971403', N'20011112');
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:13:35.687

您可以使用多个插入语句。代替

```
INSERT INTO Employees
VALUES(N'593705', N'Frank Somah', N'20061004', 26.15),
(N'720947', N'Paul Handsome', N'20000802', 36.05); 
```

你可以做

```
INSERT INTO Employees
    VALUES (N'593705', N'Frank Somah', N'20061004', 26.15);
INSERT INTO Employees
    VALUES (N'720947', N'Paul Handsome', N'20000802', 36.05); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:14:22.677

我猜你是在 SQL Server 2005 上工作的。它在 2005 上不支持多值插入。你需要一个一个地插入它。

```
INSERT INTO Employees
VALUES(N'593705', N'Frank Somah', N'20061004', 26.15)
GO
INSERT INTO Employees
VALUES(N'720947', N'Paul Handsome', N'20000802', 36.05)
GO
INSERT INTO Employees(EmployeeName, EmployeeNumber, DateHired)
VALUES(N'Clarice Simms', N'971403', N'20011112')
GO 
```

# ios - xcode - 库中的头文件类型

> ID：12056717
> 
> 赞同：0
> 
> 时间：2012-08-21T14:09:51.100
> 
> 标签：ios, xcode, static-libraries, header-files

[XCode：复制标头：公共与私有与项目？](https://stackoverflow.com/questions/7439192/xcode-copy-headers-public-vs-private-vs-project/8016333)

这似乎是一个很好的解释，但我仍然无法理解其中的大部分内容。

公共 - 可读的源代码？它们是指头文件的可读源代码吗？

私有的——因为我仍在处理实现的那一部分，我会将该标题标记为私有的，没有人可以使用它，直到我将它改回公共并再次构建库。??

项目 - 我什么都不懂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:12:46.700

长话短说：如果您想将代码作为库提供，请将这些函数和类型声明放在标题中。

如果您有复杂的代码在文件之间共享类型`c`并需要类型和函数的前向声明，请将它们放在标题中。

否则，*无需*使用标题。尽管出于可读性和文档目的将它们分开是很好的。

# c# - 以编程方式将 SQLite 转换为 .sql

> ID：12056721
> 
> 赞同：0
> 
> 时间：2012-08-21T14:10:01.683
> 
> 标签：c#, mysql, database, sqlite

好吧，这可能听起来有点傻。我想得越多，听起来就越愚蠢。

**背景**：
我工作的公司大约一年前聘请了一个人为他们编写一些软件。该软件（用 VB6 编写）适用于钻井用品制造商（传感器、钻头等）。无论如何，该软件安装在钻机站点，并提供大量信息（位深度、rpm 等）。现在，每 10 秒读取一次读数，并保存到文件中。（我最初被告知一个本地 SQL 数据库，但事实证明这是不正确的。）这个文件显然只能在 SQLite 数据库浏览器中打开（在任何文本编辑器中打开它都会导致查看垃圾，本质上）。

**前进**：
我受聘编写一个程序，该程序获取保存的数据，并根据它创建每日报告。最初，我被告知本地机器上有一个 MySQL 数据库来存储信息。然而，我最近才发现事实并非如此。它存储在这个文件中。我可以在 SQLite 数据库浏览器中打开文件，然后将其导出为 .sql 文件，这真是太棒了。问题是，我的雇主希望以编程方式完成这项工作。

**我的问题**：
有没有办法以编程方式将此 SQLite 文件转换为 .sql，或者将此信息上传到本地 MySQL 数据库的最佳途径是什么？非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:14:06.730

您是否考虑过仅使用用于 .NET 的 [the] SQLite 数据提供程序并以这种方式打开和读取数据？您可以轻松地从 SQLite 数据库中读取数据，并将其写入 MySQL 数据库（使用适当的 MySQL 数据提供程序）。

这是我过去使用的 SQLite 数据提供程序：http: [//sqlite.phxsoftware.com/](http://sqlite.phxsoftware.com/) 我不确定是否有更新（或更好）的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:47:30.897

使用 SQLite Manager 应用程序，您必须对 SQLite 数据库中的数据进行 *.sql 文件转储。将生成的 *.sql 文件导入 MySQL 数据库。

编写一个将使用此代码的 C# 脚本：

```
sqlite_db_handler.query('SELECT * FROM dbname.sqlite_master WHERE type='table''); 
```

获取 SQLite 数据库中所有表的列表。

遍历每个表并使用以下代码：

```
sqlite_db_handler.query('SELECT * FROM '+table_name); 
```

使用以下代码迭代每个结果行：

```
mysql_db_handler.query('REPLACE INTO '+table_name+' VALUES('+row.join("','")+')'); 
```

完毕！

PS：这是伪代码我不是 C# 开发人员。

# php - 查询PHP cookie

> ID：12056722
> 
> 赞同：1
> 
> 时间：2012-08-21T14:10:01.783
> 
> 标签：php, cookies

我是 PHP 新手，我正在使用 PHP cookie，但遇到无法正确设置 cookie 的问题。这是Set Cookie的声明

> setcookie('cookieusername', $username, 100000);

和Get Cookie的声明

> $cookieusername = $_COOKIE["cookieusername"];

问题是，`$_COOKIE["cookieusername"];`没有定义的值。

我不知道问题是什么。我已经厌倦了将 cookie 路径设置为“/”，但这仍然不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T14:13:35.123

代替：

```
setcookie('cookieusername', $username, 100000); 
```

你所要做的：

```
setcookie('cookieusername', $username, time() + 100000); 
```

原因是第三个参数是到期时间（作为 Unix 时间戳（自纪元以来的秒数）），而不是到期时间。这[是手册的链接](http://php.net/manual/en/function.setcookie.php)。

# iphone - iPhone：将部分记录从一个文件传输到另一个文件

> ID：12056728
> 
> 赞同：1
> 
> 时间：2012-08-21T14:10:42.847
> 
> 标签：iphone, file, ios5, file-transfer, nsdocumentdirectory

我在文档目录中创建了一个包含 200 个日志/行的文本文件（使用字符串分隔数据的分隔符）。我想将前 50 条记录转移到另一个文件中，并将剩余的 150 条记录保存在同一个文件中。

我想到了一个逻辑，说

```
NSString *logString = [[NSString alloc]initWithContentsOfFile:logFilePath encoding:NSUTF8StringEncoding error:nil];
NSArray *logsArray = [logString componentsSeparatedByString:@"[;]"];
[@"" writeToFile:logFilePath atomically:YES encoding:NSUTF8StringEncoding error:&error];
for (int i=0; i<=[logsArray count];i++){
     if(i<=50){
        "write to new file"
     }
     else{
         "write to old file"
     }
} 
```

这个逻辑可以正常工作。我担心的是我有很大的丢失数据的风险，因为我有一次清空和重写我的文件。我已经创建了太多文件来备份我的数据。有没有办法处理这种情况？

谢谢 - Arun.AR    

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:15:25.667

1.  将所有 200 行加载到 NSArray 中（就像你现在做的那样）。
2.  创建一个名为“file_50_new”的新文件。
3.  将 NSArray 的前 50 个对象写入“file_50_new”。
4.  创建一个名为“file_150_new”的新文件。
5.  将 NSArray 的其他 150 个对象写入“file_150_new”。
6.  删除原始文件。
7.  重命名新文件。

这样，您始终将原始文件保留到最后。如果发生某些事情（崩溃等），你总是有所有的线路。它们可能位于不同的文件中，但您总是可以稍后通过更多逻辑将它们取回。

实际上，最后 150 个对象的编写可以由 Cocoa 框架自动完成，但这些步骤是它的要点。

# sql-server - 参数化查询有效，但我需要这两行吗？

> ID：12056730
> 
> 赞同：1
> 
> 时间：2012-08-21T14:10:44.570
> 
> 标签：sql-server, sql-server-2008, asp-classic, parameters

下面的代码运行良好我只是想问我是否取出 2 行代码，代码仍然可以正常工作，但我应该把它取出还是保留它，它有什么作用？

我在这里先向您的帮助表示感谢。

```
 ' OPEN DATABASE
        dim objConn,objRS,objTRS,objUnit

'----Do I need this ? ----> Const adCmdText = &H0001

        Set objConn = Server.CreateObject("ADODB.Command") 
        objConn.ActiveConnection = "Driver={SQL Server};Server=MSSQLSrv;Database=DbTest;UID=blablabala;PWD=blablabala"

'----Do I need this ? ----> objConn.CommandType = adCmdText

        strQuery = "SELECT USERNAME,PASSWORD from CUSTOMERS where EMAIL=?"
        objConn.CommandText=strQuery 
        objConn.Parameters(0) = Request.QueryString("email")
        SET objRS = objConn.execute(strQuery) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:16:37.807

不，你不需要它。`Text`是默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:14:38.670

1号线和2号线一起工作

```
Const adCmdText = 1                  'Evaluate as a textual definition
objConn.CommandType = adCmdText    ' Evaluate as textual definition, not stored procedure 
```

CommandType 可以是存储过程。您可以直接通过 SP 设置/定义自己的方式，然后调用（使用 SqlCommand），因此无需定义 UserDefinedFunction。

有关所有 CommandTypeEnum 值的完整列表，请参见[http://www.w3schools.com/ado/prop_comm_commandtype.asp](http://www.w3schools.com/ado/prop_comm_commandtype.asp)

希望这可以帮助...

# objective-c - 更新核心数据条目

> ID：12056739
> 
> 赞同：0
> 
> 时间：2012-08-21T14:11:02.840
> 
> 标签：objective-c, xcode, core-data, data-persistence

我正在使用核心数据来保存游戏的分数，并且在得分被击败时需要帮助更新条目。这就是我所在的地方。我在应用程序第一次启动时写入数据，如下所示：

```
LevelData *levelOne = [NSEntityDescription insertNewObjectForEntityForName:@"LevelData" inManagedObjectContext:context];
    levelOne.levelNum = @"1";
    levelOne.topScore = @"0";
    levelOne.isPassed = @"No";

    if (![context save:&error]) {
        NSLog(@"coudlnt save: %@", [error localizedDescription]);
    } 
```

然后我在关卡末尾读出数据，如下所示：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"levelNum == 1"];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"LevelData" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];
NSError *error;
NSArray *fetchedObjects = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
for (LevelData *info in fetchedObjects) {
    NSLog(@"Is Passed: %@", info.levelNum);
    NSLog(@"Top Score: %@", info.topScore);
    NSLog(@"Is Passed: %@", info.isPassed);
} 
```

我一直在做的是更新 topScore 条目并将其写回数据存储而不创建新条目，而是更新现有条目。

帮助/示例会非常有帮助，非常感谢。

谢谢，凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:06:32.633

好吧，从数据存储中更新条目很容易。获取、更新、保存。正如你似乎有把握。核心数据的真正问题是定义初始数据存储。核心数据的设计并没有引入数据库的概念，因此通常情况下，直到后端为您实现它（在您的应用程序调用它的第一次保存之后）才存在。

我看到开发人员通常会做些什么来解决这个问题，即设置 AppDelegate 来实现一个快速而肮脏的 hack：保存一个空的数据库。然后他们注释掉这段代码；从磁盘检索文件，重命名，修改，添加到项目的支持文件中。

现在，重新访问 AppDelegate，他们在应用程序启动时测试客户端机器上数据存储的存在。如果不存在，他们知道从他们的支持文件中注入默认数据存储。基本上将其复制到适当的路径并适当地重命名它。

这对于版本控制变得过于复杂。另一种方法是将默认值的 plist 写入主包，并在第一次启动时将其导入，并将一个密钥存储在用户默认值中，让我知道这是否有必要。它需要更多的样板代码，但它是一种很好的设置方式。您可以对版本控制数据进行编码以支持升级合并更容易。如果您能够很好地处理核心数据，那么操作 XML 应该不会更困难。

# perl - 用 perl-DBI 执行 PgSQL？

> ID：12056742
> 
> 赞同：0
> 
> 时间：2012-08-21T14:11:19.070
> 
> 标签：perl, postgresql, plpgsql, dbi

我需要在 PostgreSQL 服务器上执行复杂的 SQL。

像这样的东西：

```
$sql=<<EOF;
BEGIN;
DO SOME SQL HERE
END;
EOF

$dbh->do($sql) ; 
```

如果这不可能，我如何在 DBD::Pg 中创建和执行存储过程？我无法访问其他软件或库，但 perl + DBI

perl-DBI 如何使用 PGSQL 的手册在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:55:16.667

是的，很可能从 Perl 程序执行复杂的 SQL 和存储过程。参见例如

*   [DBI 站点](http://dbi.perl.org/)
*   [DBI 模块文档](http://search.cpan.org/~timb/DBI/DBI.pm)
*   [DBI::做](http://search.cpan.org/~timb/DBI/DBI.pm#do)
*   [如何使用 DBI 调用存储过程？](https://metacpan.org/pod/release/ADESC/DBI-FAQ-0.38/FAQ.pm#5.3-How-can-I-invoke-stored-procedures-with-DBI?)

使用 PostgreSQL，来自 DBI FAQ 的存储过程执行示例是：

```
$dbh->do( "SELECT someProcedure;" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:13:40.927

使用 DBD::Pg 驱动程序；您可以在 cpan 找到它： [https ://metacpan.org/pod/DBD::Pg](https://metacpan.org/pod/DBD::Pg)

# sql - 联邦 sql 视图 azure

> ID：12056743
> 
> 赞同：1
> 
> 时间：2012-08-21T14:11:27.697
> 
> 标签：sql, azure, ssms, federation

所以我一直在尝试为我的站点使用 SQL Azure 中的联合。我首先试图找到一种工具，我可以在其中使用完整的图形界面测试我的编码。我无法在 SSMS (SQL Server Management Studio) 中找到编辑前 200 行的上下文菜单。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:59:30.060

通过 SSMS R2 可能没有完全使用 SQL 数据库联合的 GUI 界面，但是将适当的查询与 SSMS 结合起来，您可能能够获得您正在寻找的结果。我不确定您如何尝试使用您的联合数据显示前 200 条记录，但是如果您提供更多步骤，我可能会添加更多信息。

仅供参考，[这](http://msdn.microsoft.com/en-us/library/windowsazure/hh778416.aspx)是使用 SSMS 与 SQL 数据库联合工作的方式。

# html - 对齐问题

> ID：12056749
> 
> 赞同：1
> 
> 时间：2012-08-21T14:11:48.680
> 
> 标签：html, css, alignment

所以我在我的[网站](http://freshbeer.lv/final/index.php)上设计了一个联系表格，我 遇到了“发送按钮”的问题，由于某种原因，边距/比需要的更靠右对齐。您可以看到，在其他 2 个部分中，棕色按钮正确对齐，但在第三个联系部分中，棕色发送按钮比需要的更靠右对齐，我不知道是什么原因造成的......

这是影响该按钮的 css（按钮具有 id="msgSend"）：

```
.inner-trio a, #msgSend {
    color: #fff;
    padding: 3px 0;
    margin: 7px;
    display: block;
    border-radius: 5px 5px 6px 6px;
    background-color: #6a2c10;
    text-shadow: 1px 1px #471d0a;
    text-align: center;
    border-bottom: 4px solid #381201;

}

.inner-trio a:hover, #msgSend:hover {
    background-color: #853815;
    border-bottom: 4px solid #5b2005;
    cursor: pointer !important;
}

.inner-trio a:active, #msgSend:active {
    background-color: #6a2c10;
    border-bottom: none;
    margin-top: 11px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:20:41.800

问题是您定义`margin:7px`了**表单**和**输入**。如果你想要想要的结果，那么这样写：

```
input[type="submit"]{
 margin-left:0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T14:20:58.537

解决这个问题的最简单方法应该是添加：

```
#msgSend { margin: 0px;} 
```

到你的 CSS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T14:15:26.233

您将所有输入元素的宽度设置为 100%，并且输入按钮上的边距为 7px。有你的问题:)

# asp.net-mvc-4 - StructureMap 和自动注册

> ID：12056751
> 
> 赞同：1
> 
> 时间：2012-08-21T14:11:52.783
> 
> 标签：asp.net-mvc-4, structuremap

我有3个项目：

`Core`（包含存储库、服务等的域模型和接口）
`Repository`（存储库的具体实现）
`Web`（MVC 4 项目）。

在 ObjectFactory.Initialize 我有这样的东西：

```
For<IFooRepository>().Use<FooRepository>();
For<IBooRepository>().Use<BooRepository>();
... 
```

假设我有 50 个存储库，这是否意味着我必须编写 50 行代码（每个具体实现一个）？能`StructureMap`以某种方式找出`FooRepository`实现接口并在请求接口`IFooRepositor`时实例化该类吗？`IFooRepository`

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:59:28.037

StructureMap 确实允许您通过扫描程序集并应用约定将接口连接到类型来以编程方式执行此操作。这是一个例子：

```
public class RepositoryRegistry : StructureMap.Configuration.DSL.Registry
{
    public RepositoryRegistry()
    {
        Scan(s =>
        {
            s.AssemblyContainingType<ApplicationRepository>();
            s.Convention<TypeNamingConvention>();
        });
    }
} 
```

和：

```
public class TypeNamingConvention : IRegistrationConvention
{
    public void Process(Type type, Registry registry)
    {
        Type interfaceType = type.GetInterfaces()
            .ToList()
            .Where(t => t.Name.ToLowerInvariant().Contains("i" + type.Name.ToLowerInvariant()))
            .FirstOrDefault();

        if (interfaceType != null)
        {
            registry.AddType(interfaceType, type);
        }
    }
} 
```

并且您在初始化时调用注册表，如下所示：

```
ObjectFactory.Initialize(x => x.Scan(s =>
{
 s.TheCallingAssembly();
 s.LookForRegistries();
})); 
```

This convention just assumes the standard that your type matches the interface + "I". Hopefully that gives you enough to go on.

# android - 按下返回按钮时释放 Android 上的内存

> ID：12056754
> 
> 赞同：1
> 
> 时间：2012-08-21T14:11:55.937
> 
> 标签：android, memory, back-button

我有 2 项活动，`Activity1`并且`Activity2`. 在`Activity1`我有一个按钮可以去`Activity2`。

Activity2 有很多 Edittext 和其他 Views。

当我启动应用程序时，进程的内存为 10mb。如果我单击按钮并`Activity2`加载，我的内存进程约为 59mb。

问题是，`Activity2`如果我按下后退按钮，我会返回`Activity1`，我的内存进程大约是 59mb，我不需要关于`Activity2`.

现在，如果我再次单击该按钮，我有一个`OutOfMemory`.

按下返回按钮时如何强制释放内存？

我尝试打电话`finish()`，`System.gc()`但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:18:25.763

试试这个....首先关闭您的活动...使用以下代码...

```
public class ur_clss extends Activity {
private ur_class c1;
//ur content here
     @Override
     public void onBackPressed () {
               c1.finishActivity(0);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:02:05.497

这是代码的结构：

```
public class Activity2 extends Activity {
    // Global variables
    private CarregaOperacions carrega_operacions;
    private TableLayout taula;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    // Some code of UI

    // Show a ProgressBar
    loadProgress();
    carrega_operacions = new CarregaOperacions(Activity2.this);
    carrega_operacions.execute(null);

}

    @Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{

    if ((keyCode == KeyEvent.KEYCODE_BACK))
    {

        finish();
    }
    return super.onKeyDown(keyCode, event);
}

static class CarregaOperacions extends AsyncTask<Void, Void, Void> {
    WeakReference<Activity2> context;
    Activity2 act;

    public CarregaOperacions(Activity2 activity) {
        context = new WeakReference<Activity2>(activity);
        act = context.get();
    }

    @Override
    protected Void doInBackground(Void... arg0) {
            act.carregaOperacions();
        return null;
    }

     protected void onPostExecute(Void result) {

         ArrayList<LinearLayout> llista = act.getLlistaFiles();
         for (int i = 0; i < llista.size(); i++ ) {
             act.getTable().addView(llista.get(i));

         }

         act.getScroll().setVisibility(View.VISIBLE);
         act.treuProgres();
     }
 } 
```

用这段代码，我解释一下：

*   真实情况是，Activity1 调用了一个 TabActivity，它有 Activity2。Activity2 加载了很多寄存器，我异步执行此操作。我在Activity2和TabActivity上覆盖onKeyDown，但似乎只有onKeyDown的Activity2被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:23:27.537

您需要**覆盖**BackButton 并在按下它时释放内存。

```
@Override
public void onBackPressed()
{
Activity.finish() // the activity that you want to terminate
} 
```

或者，还有另一种方法。当您启动新活动时，旧活动会继续 onPause()。您可以尝试调用旧活动的`finish()`。`onPause()`

# java - Json 从 .Net 服务器到 android 客户端

> ID：12056755
> 
> 赞同：0
> 
> 时间：2012-08-21T14:12:01.583
> 
> 标签：java, android, json

我正在尝试从 android 应用程序调用 ApiController。这是 api 控制器：

```
[AcceptVerbs("GET", "POST")]        
public string Get(string coords)      
{
  using (var context = new Entities())
  {
          var records = from poi in context.Pois
                     where poi.Latitude >= fromLatitude &&
                           poi.Latitude <= toLatitude &&
                           poi.Longitude >= fromLongitude &&
                           poi.Longitude <= toLongitude
                     select new
                     {
                         poiName = poi.Name,
                         poiLatitude = poi.Latitude,
                         poiLongitude = poi.Longitude
                     };

          return JsonConvert(records);
      }
  }
}

private string JsonConvert(object records)
{
    return Newtonsoft.Json.JsonConvert.SerializeObject(records,);
} 
```

在 android 代码中，我正在使用新的 JSON（字符串）创建 json 数组。问题是 java 抛出异常：json 字符串无效。当我查看调试器时，我看到字符串在 " 之前有 2 个反斜杠，而 java 不知道如何解析它。

问题出在哪里？谢谢

更新：已解决。WebApi 以 json 作为字符串返回 XML。将 WebApi 更改为不返回 XML，然后将其更改为返回对象（并删除了 JSONConvert） - 它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-18T16:38:11.973

我知道这是一个老问题，但我遇到了类似的问题并找到了解决方案。

在我的情况下，我必须将一个复杂的 JSON 对象（嵌套）从一个 .NET 客户端传递给一个 Java Rest API，并且使用了一个字符串参数，由于双反斜杠（我将它序列化，所以它是转义，然后 .NET 在发送之前再次对其进行转义）。

所以，为了避免我使用 StringContent

```
MyType obj = new MyType()
{
...
};

string obJSON = JsonConvert.SerializeObject(obj);
StringContent sc = new StringContent(obJSON, Encoding.UTF8,"application/json");
HttpResponseMessage response = client.PostAsync(ruta, sc).Result; 
```

希望这对某人有帮助！

# excel - 在区分空单元格和空白单元格的列中查找

> ID：12056763
> 
> 赞同：0
> 
> 时间：2012-08-21T14:12:18.637
> 
> 标签：excel, vba

我需要找到一列中的第一个单元格，该单元格要么是空的，要么只包含空格。我想出了以下..

```
Dim FindString As String
Dim Rng As Range
Dim Done As Boolean

FindString = ""
With Sheets("Yahoo").Range("A:A")
    Set Rng = .Find(What:=FindString, _
                    After:=.Cells([Stock_Start_Row], 1), _
                    LookIn:=xlValues, _
                    LookAt:=xlWhole, _
                    SearchOrder:=xlByRows, _
                    SearchDirection:=xlNext, _
                    MatchCase:=False)
    If Not Rng Is Nothing Then
        j = Rng.Row
        Done = False
        Do Until Done
            FindString = .Cells(j, 1)
            FindString = Replace(FindString, " ", "")
            If FindString = "" Then
                j = j - 1
            Else
                Done = True
            End If
        Loop

        MsgBox "Found" & " " & Rng.Row & " " & j
    Else
        MsgBox "Nothing found"
    End If
End With 
```

这将在第一个空单元格之前发现并清除任何空白单元格，但不会在前面的单元格中发现空白单元格。

有没有办法搜索包含一个或多个空格的单元格？

如果是这样，我可以添加第二个搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:51:46.807

> 我需要找到一列中的第一个单元格，该单元格要么是空的，要么只包含空格。

这将通过工作表上的 A 列（“Yahoo”）。它应该适合你：

```
Sub FindBlankOrEmptyCells()
Dim wbk As Workbook
Set wbk = ThisWorkbook

Dim ws As Worksheet
Set ws = wbk.Sheets(1)

Dim cell As Range

Dim BlankCounter As Integer
Dim i As Integer
Dim OldCellValue As Variant ' just for the heck of it

For Each cell In Sheets("Yahoo").Range("A:A")
    OldCellValue = cell.Value
    cell.NumberFormat = "@"
    cell.Value = "'" & cell.Value

    BlankCounter = 0

    If cell.Value = "" Then
        MsgBox "Found an empty cell in Column A, Row: " & " " & cell.Row
        Exit Sub
    End If

    For i = 1 To Len(cell)
        If cell.Characters(i, 1).Text = " " Then
            BlankCounter = BlankCounter + 1
        End If

        If BlankCounter = Len(cell) Then
            MsgBox "Found a cell full of blanks in Column A, Row: " & " " & cell.Row

                cell.Clear
                cell.Value = OldCellValue
                cell.Value = cell.Value

            Exit Sub
            ' If you want to delete the contents of the cell or continue looping you can delete this Exit Sub and put in:
            ' cell.ClearContents
            ' then it will loop through all the cells and delete blanks and message you each time
        End If
    Next i

    cell.Clear
    cell.Value = OldCellValue
    cell.Value = cell.Value

Next cell

End Sub 
```

这将找到第一个为空或仅包含空格（空格）的单元格。一旦找到符合该标准的单元格，它将停止。如果你想继续循环，你可以启用我注释掉的代码。让我知道它是如何工作的。

编辑：

如果您想使用 .find 函数来获得一些可能的效率 - 但最终您将需要遍历单元格中的所有字符并确定它是否包含所有空格。试试这个（我在第 30 行停止了它，所以它不会不断弹出空白消息 - 但您可以删除这些消息并将循环扩展到第 999999 行）：

```
Sub FindBlankOrEmptyCellsWithFindFunction()
Dim FindString As String
Dim Rng As Range
Set Rng = Sheets("Yahoo").Range("A1")
Dim Done As Boolean

Dim wbk As Workbook
Set wbk = ThisWorkbook

Dim ws As Worksheet
Set ws = wbk.Sheets(1)

Dim cell As Range

Dim BlankCounter As Integer
Dim i As Integer
Dim ii As Integer
Dim LoopStopperRange As Range
Dim OldCellValue As Variant

ii = 0

Do
    ii = ii + 1
    FindString = " "
    With Sheets("Yahoo").Range("A:A")
        Set Rng = .Find(What:=FindString, _
                        After:=.Cells(Rng.Row, 1), _
                        LookIn:=xlValues, _
                        LookAt:=xlPart, _
                        SearchOrder:=xlByRows, _
                        SearchDirection:=xlNext, _
                        MatchCase:=False)
        If Not Rng Is Nothing Then ' If Rng Is Something Then
            If ii = 1 Then
                Set LoopStopperRange = Rng
            End If
            If LoopStopperRange = Rng And ii > 1 Then
                Exit Do
            End If
            For Each cell In Rng
                OldCellValue = cell.Value
                cell.NumberFormat = "@"
                cell.Value = "'" & cell.Value

                BlankCounter = 0

                If cell.Value = "" Then
                    MsgBox "Found an empty cell in Column A, Row: " & " " & cell.Row
                    'Exit Sub
                End If

                For i = 1 To Len(cell)
                    If cell.Characters(i, 1).Text = " " Then
                        BlankCounter = BlankCounter + 1
                    End If

                    If BlankCounter = Len(cell) Then
                        MsgBox "Found a cell full of blanks in Column A, Row: " & " " & cell.Row

                            cell.Clear
                            cell.Value = OldCellValue
                            cell.Value = cell.Value

                        'Exit Sub
                        ' If you want to delete the contents of the cell or continue looping you can delete this Exit Sub and put in:
                        ' cell.ClearContents
                        ' then it will loop through all the cells and delete blanks
                    End If

                Next i

                cell.Clear
                cell.Value = OldCellValue
                cell.Value = cell.Value

            Next cell
         Else
        End If
    End With
Loop Until Rng Is Nothing

Set Rng = Sheets("Yahoo").Range("A1")

Do
    ii = ii + 1
    FindString = ""
    With Sheets("Yahoo").Range("A:A")
        Set Rng = .Find(What:=FindString, _
                        After:=.Cells(Rng.Row, 1), _
                        LookIn:=xlValues, _
                        LookAt:=xlPart, _
                        SearchOrder:=xlByRows, _
                        SearchDirection:=xlNext, _
                        MatchCase:=False)
        If Not Rng Is Nothing Then ' If Rng Is Something Then
            For Each cell In Rng
                OldCellValue = cell.Value
                cell.NumberFormat = "@"
                cell.Value = "'" & cell.Value

                BlankCounter = 0

                If cell.Value = "" Then
                    MsgBox "This loop will go until Row 30 so you don't have to pause/break out. Found an empty cell in Column A, Row: " & " " & cell.Row
                    'Exit Sub
                End If

            Next cell
         Else
        End If
    End With
Loop Until Rng.Row = 30
'Loop Until Rng.Row = 99999

End Sub 
```

祝你好运。

# java - 默认情况下会话持续多长时间？

> ID：12056765
> 
> 赞同：4
> 
> 时间：2012-08-21T14:12:27.790
> 
> 标签：java, session, jakarta-ee

*会话*持续多长时间：

```
HttpSession session = request.getSession(); 
```

最后什么时候我没有明确声明`session.setMaxInactiveInterval(int i)`？让我们假设，用户没有从他的浏览器中删除 cookie。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T14:16:44.590

只要声明的价值`session-timeout`在`web.xml`州内。如果那里没有指定值，则容器决定此设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:19:54.267

`HttpSession`有`getMaxInactiveInterval`方法可以告诉您会话将为用户保留多少可用。

如果你`setMaxInactiveInterval`是负数，只要他不删除cookies，它就永远不会过期。

**编辑：**对于您对我无法添加评论的其他答案的评论，如果用户不接受 cookie，他将永远不会有会话。因此，如果他删除它，他将开始一个新会话。

# c - fgetc 逐行读取文件

> ID：12056770
> 
> 赞同：0
> 
> 时间：2012-08-21T14:12:47.157
> 
> 标签：c, file, fgetc

所以我正在研究一个用于将`fgetc`一行读入缓冲区的函数。所以我可以随意使用该缓冲区，然后用下一行重新填充缓冲区。我的函数有效，但是我必须在 for 循环之外重复代码来处理最后一行，如下所示：

```
for(i = 0, c = 1; ch != EOF; i++)
{
    ch = fgetc(grab);
    if(ch == 0x0A)
    {
        /*Process Line*/
        c = 1;
    }
    else 
    {
        linetmp = realloc(line, (c + 1) * sizeof(char));
        if(!linetmp)
        {
            free(line);
            free(url);
            printf("\nError! Memory allocation failed!");
            return 1;
        }
        line = linetmp;
        line[c - 1] = ch;
        line[c] = 0x00;
        c++;
    }
}
/*repeat if(ch == 0x0A) statement*/ 
```

我宁愿在同一个循环中完成这一切，但不确定我将如何去做。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:20:50.133

`[getline()](http://linux.die.net/man/3/getline)`如果您在 POSIX 系统上，我建议您改为使用。

此外，您的逻辑很奇怪，因为您`EOF`仅在循环头中检查，但`ch`在循环内更新。这意味着它将`ch == EOF`在重新评估循环条件之前运行 with 。

您应该尝试将更新和检查放在一起，使循环标题如下所示：

```
for(i = 0, c = 1; (ch = fgetc()) != EOF; i++) 
```

此外，您需要考虑行分隔符，`'\n'`（回车）和`'\n'`（换行）都可能发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:08:16.920

我认为您不应该在每个字符之后重新分配。如果您想让缓冲区处于所需的最小值，您可以在最后重新分配 (strlen() + 1); 此外，还有一个函数 fgets() 可以读取一行。

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>

int somefunc(FILE *grab)
{
   int current_size = 100;
   int data_size = current_size - 1;
   char *url = malloc(current_size);
   char *line = malloc(current_size);
   char *linetmp;
   int ch;
   ch = fgetc(grab);
   int i = 0;
   int c  = 0;
   while (ch  != EOF && ch != 0x0A )
   {
      i++;
      if ( i > data_size )
      {
         current_size = current_size * 2;
         data_size = current_size - 1;
         linetmp = realloc(line, current_size);
         if (!linetmp)
         {
            free(line);
            free(url);
            printf("\nError! Memory allocation failed!");
            return 1;
         }
         line = linetmp;
      }
      line[c] = ch;
      c++;
      ch = fgetc(grab);
   }
   line[c] = '\0';
   linetmp = realloc(line,strlen(line) + 1);
   line = linetmp;
   printf("we just read line->%s\n",line);
   free(line);
   free(url);
   return 0;
}

int main(void)
{
   char *cpFilename = "somefile.txt";
   FILE *fp = fopen(cpFilename,"r");
   if ( fp == NULL )
   {
      printf("ERROR: could not open %s\n",cpFilename);
      printf("Error code: %d\n",errno);
      perror("ERROR:");
      return 1;
   }
   int return_code = somefunc(fp);
   while (return_code != EOF && return_code != 1)
   {
      return_code = somefunc(fp);
   }
   fclose(fp);
} 
```

# c# - MVC-ControllerTypeCache.xml 如何以及何时填充

> ID：12056777
> 
> 赞同：5
> 
> 时间：2012-08-21T14:13:01.193
> 
> 标签：c#, asp.net-mvc-3

我有几个与此文件（MVC-ControllerTypeCache.xml）相关的问题。

**1)**谁能告诉我这个文件是何时以及如何生成的？

我知道它是由框架生成的，以减少调用控制器时所需的反射量。

我也知道 MVC 源代码中有一些内部类可以使用它，控制器工厂`GetControllerType`使用它们。

**2）**有没有办法在应用程序中使用它？

例如，如果我想列出应用程序中的所有控制器，使用这个文件意味着我不必自己通过反射找到它们。

还值得知道它是如何/何时更新的，因为该方法`GetControllerType(requestContext, controllerName);`将根据它在此文件中找到的内容返回您的控制器类型。

知道它何时更新以及您是否可以依赖它可以改变您从驻留在它们自己的程序集中的插件/模块注册控制器的方式。

不过，我主要是出于兴趣而问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T09:21:00.923

> 1) 谁能告诉我这个文件是何时以及如何生成的？

在每个请求上调用的`DefaultControllerFactory.GetControllerType`which 调用该 `GetControllerTypeWithinNamespaces`方法来检索可用控制器类型的列表：

```
private Type GetControllerTypeWithinNamespaces(RouteBase route, string controllerName, HashSet<string> namespaces) {
    ControllerTypeCache.EnsureInitialized(BuildManager);
    ICollection<Type> matchingTypes = ControllerTypeCache.GetControllerTypes(controllerName, namespaces);

    ... more code removed for brevity
} 
```

如您所见，它在开始时做了两件事：初始化和从`ControllerTypeCache`.

该`EnsureInitialized`方法使用带有双重检查锁定的单例，以确保在应用程序的整个生命周期内只执行一次初始化：

```
public void EnsureInitialized(IBuildManager buildManager) {
    if (_cache == null) {
        lock (_lockObj) {
            if (_cache == null) {
                List<Type> controllerTypes = TypeCacheUtil.GetFilteredTypesFromAssemblies(_typeCacheName, IsControllerType, buildManager);
                var groupedByName = controllerTypes.GroupBy(
                    t => t.Name.Substring(0, t.Name.Length - "Controller".Length),
                    StringComparer.OrdinalIgnoreCase);
                _cache = groupedByName.ToDictionary(
                    g => g.Key,
                    g => g.ToLookup(t => t.Namespace ?? String.Empty, StringComparer.OrdinalIgnoreCase),
                    StringComparer.OrdinalIgnoreCase);
            }
        }
    }
} 
```

请注意，如果该`_cache`字段为空，则该字段将仅初始化一次。这将在应用程序由 IIS 启动后到达您的站点的第一个请求时发生。

使用该`TypeCacheUtil.GetFilteredTypesFromAssemblies`方法检索控制器类型。所以让我们研究一下：

```
public static List<Type> GetFilteredTypesFromAssemblies(string cacheName, Predicate<Type> predicate, IBuildManager buildManager) {
    TypeCacheSerializer serializer = new TypeCacheSerializer();

    // first, try reading from the cache on disk
    List<Type> matchingTypes = ReadTypesFromCache(cacheName, predicate, buildManager, serializer);
    if (matchingTypes != null) {
        return matchingTypes;
    }

    // if reading from the cache failed, enumerate over every assembly looking for a matching type
    matchingTypes = FilterTypesInAssemblies(buildManager, predicate).ToList();

    // finally, save the cache back to disk
    SaveTypesToCache(cacheName, matchingTypes, buildManager, serializer);

    return matchingTypes;
} 
```

该代码非常不言自明：

1.  它使用一个`TypeCacheSerializer`类从缓存中读取它们。在内部，此序列化程序将文件加载到 a 中`XmlDocument`，然后操作其元素以提取类型。
2.  `FilterTypesInAssemblies`如果在缓存中找不到任何内容，则会对将使用反射从所有引用的程序集中检索控制器类型的方法进行昂贵的调用。
3.  它将类型保存到缓存中，以便下次从缓存中加载它们。

这是一篇博客文章，它也描述了该过程：[http ://www.beletsky.net/2011/12/inside-aspnet-mvc-instantiation-of.html](http://www.beletsky.net/2011/12/inside-aspnet-mvc-instantiation-of.html)

> 2）有没有办法在应用程序中使用它？

您不应该直接从您的代码中使用此 XML 文件，因为它的内容和格式可能会在将来的版本中更改，这会破坏您的代码。

我同意，如果能够从我们的代码中利用这个特性来提高原本昂贵的反射代码的性能，那就太好了。我希望框架的作者已经公开了这个 API。

不幸的是，他们没有，所以我们可以自己推出：

```
public static class ControllerTypeCache
{
    private static object _syncRoot = new object();
    private static Type[] _cache;

    public static IEnumerable<Type> GetControllerTypes()
    {
        if (_cache == null)
        {
            lock (_syncRoot)
            {
                if (_cache == null)
                {
                    _cache = GetControllerTypesWithReflection();
                }
            }
        }
        return new ReadOnlyCollection<Type>(_cache);
    }

    private static Type[] GetControllerTypesWithReflection()
    {
        var typesSoFar = Type.EmptyTypes;
        var assemblies = BuildManager.GetReferencedAssemblies();
        foreach (Assembly assembly in assemblies) 
        {
            Type[] typesInAsm;
            try 
            {
                typesInAsm = assembly.GetTypes();
            }
            catch (ReflectionTypeLoadException ex) 
            {
                typesInAsm = ex.Types;
            }
            typesSoFar = typesSoFar.Concat(typesInAsm).ToArray();
        }

        return typesSoFar
            .Where(t => t != null && 
                        t.IsPublic && 
                        !t.IsAbstract && 
                        typeof(IController).IsAssignableFrom(t)
            )
            .ToArray();
    }
} 
```

> 还值得知道它是如何/何时更新为方法 GetControllerType(requestContext, controllerName); 将根据在此文件中找到的内容返回您的控制器类型。

该文件在应用程序的整个生命周期内永远不会更新。如前所述，它在应用程序启动时创建一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:46:19.390

我快速浏览了 ASP.NET MVC 源代码，据我所知，缓存文件是在第一次尝试读取它时创建的。这通常会在应用程序启动期间发生。

ASP.NET MVC 包含一个内部类，其中包含一个`ControllerTypeCache`包含文件名的常量字符串。这是源代码中唯一出现的“MVC-ControllerTypeCache.xml”。

```
internal sealed class ControllerTypeCache
{
    private const string TypeCacheName = "MVC-ControllerTypeCache.xml";
    ...
} 
```

这个常量只用在`ControllerTypeCache`类的这个方法中：

```
public void EnsureInitialized(IBuildManager buildManager)
{
    if (_cache == null)
    {
        lock (_lockObj)
        {
            if (_cache == null)
            {
                List<Type> controllerTypes = TypeCacheUtil.GetFilteredTypesFromAssemblies(TypeCacheName, IsControllerType, buildManager);
                var groupedByName = controllerTypes.GroupBy(
                    t => t.Name.Substring(0, t.Name.Length - "Controller".Length),
                    StringComparer.OrdinalIgnoreCase);
                _cache = groupedByName.ToDictionary(
                    g => g.Key,
                    g => g.ToLookup(t => t.Namespace ?? String.Empty, StringComparer.OrdinalIgnoreCase),
                    StringComparer.OrdinalIgnoreCase);
            }
        }
    }
} 
```

您可以看到它将文件名传递给`TypeCacheUtil.GetFilteresTypesFromAssemblies`. 这是该方法的样子：

```
public static List<Type> GetFilteredTypesFromAssemblies(string cacheName, Predicate<Type> predicate, IBuildManager buildManager)
{
    TypeCacheSerializer serializer = new TypeCacheSerializer();

    // first, try reading from the cache on disk
    List<Type> matchingTypes = ReadTypesFromCache(cacheName, predicate, buildManager, serializer);
    if (matchingTypes != null)
    {
        return matchingTypes;
    }

    // if reading from the cache failed, enumerate over every assembly looking for a matching type
    matchingTypes = FilterTypesInAssemblies(buildManager, predicate).ToList();

    // finally, save the cache back to disk
    SaveTypesToCache(cacheName, matchingTypes, buildManager, serializer);

    return matchingTypes;
} 
```

如您所见，它尝试从缓存文件中读取。如果读取失败（例如因为文件还不存在），则会生成新的控制器类型列表并将其保存在新版本的缓存文件中。

该`ReadTypesFromCache`方法如下所示：

```
internal static List<Type> ReadTypesFromCache(string cacheName, Predicate<Type> predicate, IBuildManager buildManager, TypeCacheSerializer serializer)
{
    try
    {
        Stream stream = buildManager.ReadCachedFile(cacheName);
        if (stream != null)
        {
            using (StreamReader reader = new StreamReader(stream))
            {
                List<Type> deserializedTypes = serializer.DeserializeTypes(reader);
                if (deserializedTypes != null && deserializedTypes.All(type => TypeIsPublicClass(type) && predicate(type)))
                {
                    // If all read types still match the predicate, success!
                    return deserializedTypes;
                }
            }
        }
    }
    catch
    {
    }

    return null;
} 
```

如您所见，它使用 a`BuildManager`来读取缓存文件。

这是我能找到的唯一可以读取或创建缓存文件的地方。在调用层次结构中导航时，我最终会从`DefaultControllerFactory`类或`AreaRegistration`类中使用该方法。

所以我猜想这些类中的任何一个第一次需要应用程序中的控制器列表时，最终都会调用该类的`GetFilteredTypesFromAssemblies`方法。`TypeCacheUtil`它仅在无法读取文件时生成缓存文件。由于这个类使用 a`BuildManager`来读取它，我相信它只会在文件损坏、丢失或重新启动应用程序时生成它。

浏览网页后，人们似乎报告说，为了重新生成 MVC-ControllerTypeCache.xml 文件，例如更改和保存 Global.asax 或 Web.Config 文件以触发重新启动就可以了。

你能在你自己的代码中利用这个文件吗？你可能*可以*，但你可能*不应该*。我只会使用反射。如果您因为这种方法而遇到性能问题，*那么*您可以开始考虑缓存，在这种情况下，我敢打赌，构建您自己的序列化控制器列表并使用 .NET 的内置缓存机制进行缓存会“更安全”他们而不是尝试重用 MVC-ControllerTypeCache.xml。我猜它是内部的。

# c# - Numpad0 不能与 char.IsLetterOrDigit 一起使用

> ID：12056779
> 
> 赞同：0
> 
> 时间：2012-08-21T14:13:03.050
> 
> 标签：c#, onkeyup

我有一个方法，当 KeyUp 事件在我的控件上触发时调用，在该方法中，我使用 char.IsLetterOrDigit 方法检查按下的键是字母或数字。但是它似乎不适用于键盘数字！？

我的代码如下：

```
 void MyControls_KeyUp(object sender, KeyEventArgs e)
    {
        if ((char.IsLetterOrDigit(Convert.ToChar(e.KeyValue))))
        {
            ....
        }
    } 
```

有人知道为什么这不起作用吗？

提前致谢。

我正在使用 C#4.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:21:54.580

你没有做你认为你正在做的事情。

`Convert.ToChar()`不会采用键盘代码并将其转换为该键所代表的字符；这样做涉及太多，不同的键盘布局、文化、键修饰符状态等等。您在这里所做的是获取*KeyCode 枚举的数值*并将其转换为`char`.

如果要检索与按键关联的字符，则需要覆盖`KeyPress`事件而不是`KeyUp`事件。Windows 窗体将执行所有必要的翻译和转换，以确定哪个字符对应于键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:25:57.110

KeyUp 可让您处理键盘上的所有按钮（包括功能键和数字键盘等特殊键）。但是，KeyValue 或 KeyCode 并不总是指按下按钮的字符。

KeyPress 将为您提供按下按钮的字符，但不会处理特殊键（包括关闭 numlock 时的数字键盘）。

如果你想处理键盘上的所有键，我会使用 KeyUp。e.KeyValue 返回 Keys 枚举中的值（所以数字键盘 0 是 Keys.NumPad0），如果您只想处理输入的值，请使用 KeyPress。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:26:51.913

试试这个 ：

```
if (e.KeyCode == Keys.NumPad0)
        {
            // your code
        }
        // else for other numpad keys 
```

# wpf - WPF 绑定验证的方法？

> ID：12056781
> 
> 赞同：0
> 
> 时间：2012-08-21T14:13:04.110
> 
> 标签：wpf

我正在努力寻找一种令人满意的 WPF/MVVM 数据验证方法。我一直在使用`IDataErrorInfo`，但是如果我将文本框绑定到（比如说）一个`int`属性，并输入一个非数字值，WPF 会生成自己的验证消息（“无法转换值'xyz'”）。该控件确实被突出显示为错误，但我的视图模型不知道该属性处于无效状态，因为绑定（以及因此 IDataErrorInfo 验证）从未发生过。

我还没有研究自定义验证器。使用这些是否可以通知视图模型有错误？我有点不愿意使用它们，因为为复杂应用程序所需的许多规则中的每一个创建验证器类似乎有点过分。也许我可以混合使用这两种方法，即确保输入是数字的基本自定义验证器，以及用于更复杂内容的 IDataErrorInfo？

我也在努力使用 IDataErrorInfo 验证“相关”属性。假设我的模型具有“Min”和“Max”属性，我想确保 Min 小于 Max。如果我将“Min”文本框更改为大于 Max，则该控件将被正确标记为无效。如果我现在将“Max”更改为大于“Min”，则“Min”文本框验证状态不会被清除（可能是因为“Min”没有改变，因此不会再次得到验证）。这种情况的最佳方法是什么？

我很想知道其他人如何处理 WPF 验证。.Net 4.5 中的 WPF 验证是否有任何改进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:08:22.977

怀疑您知道这一点，但如果类型不匹配（或无法转换），则 set 甚至不会被调用。

绑定到 Int 的空 TextBox 有这个问题吗？因为 TextBox 正在传递 String.Empty 而不是 null。所以使用转换器将 String.Empty 转换为 null。

TextBox 将接受文本。没有办法解决这个问题。

您可以绑定到字符串，以便一切都通过集合。

或者您可以在 UI 上处理 keydown 事件，并且只允许数字并绑定到 Int。然后在验证中确定该值是否在范围内。

# java - 在 Java 中实现一个新的 LinkedList 方法

> ID：12056784
> 
> 赞同：0
> 
> 时间：2012-08-21T14:13:15.687
> 
> 标签：java, eclipse, class, linked-list

我有一个任务，涉及创建三个操作链表的方法。说明指示我使用以下构造函数：

```
 public MyList (LinkedList<Integer> list) {
 ...
 } 
```

但是，无论我如何尝试集成，Eclipse 似乎都不喜欢我的代码。这是我目前的尝试：

```
import java.util.*;

public class ListClass {

public static void main(String[] args) {
    LinkedList<Integer> list = new LinkedList<Integer>();
    list.add(10);
    list = MyList(list);
}

public MyList (LinkedList<Integer> list){
    LinkedList<Integer> r = list;
    return r;
}
} 
```

现在我认为上面的 MyList 构造函数会很高兴地返回输入的列表，但我的 Java 技能真的很弱。我一直在阅读教程并尝试了一下，但它并没有像我想象的那样奏效。

无论如何，Eclipse 给了我两个错误——在“list = MyLIst(list);” 它说方法 MyList 未为 ListClass 定义，在“public MyList”行它说“方法的返回类型丢失” - 但我告诉它 r 是一个链表，并返回它。

这伤害了我的大脑，我无法弄清楚，谁能帮我一把？我想如果我能够让上面的代码正常工作，我应该能够对其余的进行排序。

**较新的代码**

正如正确指出的那样，我的类名与我假定的构造函数名不同。所以这里是调整后的代码：

```
import java.util.LinkedList;

public class MyList {

public static void main(String[] args) {
    LinkedList<Integer> list = new LinkedList<Integer>();
    list.add(10);
    list.add(-20);
    MyList(list);
}

public MyList(LinkedList<Integer> list) {
    LinkedList<Integer> newList = list;
    System.out.println(newList);    
}
} 
```

这已经解决了“返回类型”错误（谢谢），尽管我仍然收到“未定义”错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:15:29.010

方法声明中缺少的是方法`MyList`的返回类型：

```
public MyList (LinkedList<Integer> list) 
```

应该是这样的

```
public LinkedList<Integer> MyList (LinkedList<Integer> list) 
```

除此之外，方法名称的通常约定是驼峰式，但以小写字母开头。我会调用它`myList`而不是`MyList`（您应该为该方法选择一个更好的名称，以反映该方法的目的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:16:34.737

如果

```
public MyList (LinkedList<Integer> list) {
 ...
} 
```

应该是*Constructor*，该类也必须命名`MyList`。您不能从构造函数返回任何内容，因此只需保留它的声明即可。

只需重命名您的类，将 保存`LinkedList`到上面构造函数中的私有字段，然后将您应该实现的方法添加到`MyList`类中。

要摆脱未定义的问题，您需要使用“新”创建列表：

```
MyList myList  = new MyList(list); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:17:10.927

这里的问题是构造函数必须与其封闭类具有相同的名称。但是，您尝试在名为 ListClass 的类中命名 MyList 构造函数。

因此，要么将你的类和构造函数命名为 MyList，要么将它们命名为 ListClass。

至于“未定义”的问题，不能直接调用构造函数。您必须在“新”语句中使用它，因为它用于创建类的新实例：

```
MyList someList = new MyList(); // variable someList will hold a new MyList instance 
```

或者

```
new MyList(); // instance without a reference variable. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T14:45:37.633

使用您修改后的代码，仍有一些问题需要纠正：

1.  在 Java 中，您调用构造函数来创建一个新的*Object*。当您将其创建为方法的一部分时，您可能希望保留此对象`main()`，使用类似以下内容以防止出现“未定义”错误：

    ```
    MyList ml = new MyList(list); 
    ```

2.  作为构造函数的一部分，您仅将`LinkedList<Integer>`传入的作为局部变量存储，而不是作为类变量存储。在您的班级顶部使用以下声明更正此问题：

    ```
    public class MyList {
        private LinkedList<Integer> list;
        //... 
    ```

* * *

## 附加功能的结构

为了添加您在下面评论中描述的附加功能，我将使用以下类型的结构（显然您仍然需要实现这些方法，但您可以看到我将它们放在哪里）：

```
import java.util.LinkedList;

public class MyList {
    private LinkedList<Integer> list;

    public MyList(LinkedList<Integer> list) {
        this.list = list;
    }

    public LinkedList<Integer> reverse() {
        //Create a reversed list

        return rList;
    }

    public LinkedList<Integer> odd() {
        //Create a list of the odd elements

        return oddList
    }

    public LinkedList<Integer> even() {
        //Create a list of the even elements

        return evenList;
    }

    @Override
    public String toString() {
        return list.toString();
    }

    public static void main(String[] args) {
        LinkedList<Integer> list = new LinkedList<Integer>();
        list.add(0);
        list.add(2);
        list.add(4);

        MyList ml = new MyList(list);
        System.out.println("MyList: " + ml);
        LinkedList<Integer> tsil = ml.reverse();
        System.out.println("Reversed: " + tsil);
        LinkedList<Integer> ls = ml.odd();
        System.out.println("Odd: " + ls);
        LinkedList<Integer> it = ml.even();
        System.out.println("Even: " + it);
    }
} 
```

# .net - 参考资源字符串名称中的无效字符？是否允许使用“：”？

> ID：12056790
> 
> 赞同：1
> 
> 时间：2012-08-21T14:13:30.413
> 
> 标签：.net, invalid-characters, resourcestring

我在 MSDN 上进行了快速检查，然后在此处进行了快速搜索，但我没有找到任何明确说明 .net 资源字符串名称中允许/不允许哪些字符的内容。目前我正在尝试找出是否允许使用“：”，但我更愿意找到一些涵盖所有情况的参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:23:54.110

资源名称上不允许使用冒号。如果你尝试一下，你会得到

> 资源名称 XX:XXX 不是有效标识符

对于资源名称应用与变量相同的规则。如果您检查该`.designer`文件，您会看到为您定义的每个字符串资源创建了一个属性，因此它需要遵循相同的命名规则。

# testing - 参数扫描：根据输出对参数进行排序

> ID：12056799
> 
> 赞同：0
> 
> 时间：2012-08-21T14:14:02.630
> 
> 标签：testing, sorting, parameters, combinations

我正在尝试为我的算法找到最佳的 3 元组参数组合。对于每种可能的组合，我都有几个结果。现在，我首先按照最高成功次数对每个元组 (x,y,z) 进行排序，方式如下：

```
(x,y,z): ((1.0, 100 times), (0.8, 20 times), (0.5, 200 times), (0.0, 10 times))
(x1,y1,z1): ((1.0, 80 times), (0.9, 100 times), (0.5, 50 times), (0.0, 100 times))
(x2,y2,z2): ((1.0, 80 times), (0.9, 20 times), (0.5, 200 times), (0.0, 30 times)) 
```

...这意味着对于元组 (x,y,z) 我的成功率为 1.0 100 次，成功率为 0.8 20 次，等等。

现在，恐怕这样的排序是幼稚的，因为它没有考虑到这一点，例如，`(x1,y1,z1)`有大量的失败（0.0）和大量的成功（1.0）。

我应该如何考虑到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:32:25.777

答案很大程度上取决于您对“最佳”的定义！您是否希望有一种算法在 100% 的时间里总是给出 0.8 的成功，或者在 80% 的时间里给出 1.0 的成功和 20% 的时间里给出 0.0 的失败，或者那些对于您的目的来说是等价的？

您可以采取的一种非常简单的方法是对结果进行加权求和，如下所示：

```
rank = 0;
total_results = 0;
for each (success_rate, number_of_results_at_this_rate) in this_data; do
    rank += (success_rate * number_of_results_at_this_rate);
    total_results += number_of_results_at_this_rate;
done
rank = rank / total_results; 
```

（当然，如果 total_results 始终保持不变，这可以简化，就像上面的示例一样）

这将为您的示例提供以下排名：

```
(x,y,z) = (100 + 16 + 100 + 0) / (100+20+200+10) = about 0.65
(x1,y1,z1) = (80 + 90 + 25 + 0) / (80+100+50+100) = about 0.59
(x2,y2,z2) = (80 + 18 + 100 + 0) / (80+20+200+30) = 0.6 
```

# c++ - stl 数据结构的输出参数与堆栈上的返回值的效率

> ID：12056801
> 
> 赞同：10
> 
> 时间：2012-08-21T14:14:09.663
> 
> 标签：c++, performance, stl, c++11

假设我有这些功能

```
std::Vector<Point> calculate() {
   std::Vector<Point> points; //do stuff with points
   return points;
} 
```

和

```
void calculate(std::Vector<Point>& points) {
   //do stuff with points
} 
```

所以我的问题是特定于在堆栈上初始化的对象，并且是 stl 对象。性能上有什么区别，流行的方法是什么

问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T17:00:49.710

以该值作为参考参数具有以下性质：

1.  不会进行复制、移动或任何其他操作。
2.  返回值不能在用户端立即丢弃。他们不能只是在你的函数的引用参数或其他东西上临时推一下。他们*必须*声明一个变量，因此他们必须给它一个将存在于当前范围内的名称。
3.  API*建议*该值是输入/输出参数。也就是说，有一个值被传入，将被读取和写入。如果不是这样，那么使用它代表了一个次优的 API 设计元素。

返回值具有以下属性：

1.  如果复制省略不可用（由于函数实现的性质、不良编译器或返回值未初始化新值），则返回值将被*移动*。没有复制。移动不是免费的，但一般不会比几个指针副本贵多少。不会分配或释放新的对象或内存。
2.  API*强制执行*值的输出性质。用户无法使用它传入的输出，因为它没有传入任何内容。同样，函数无法读取任何值，因为它不接受任何内容。它是一个输出价值，时期；该函数生成它并返回它。
3.  返回值可以根据用户的决定立即丢弃。显然，如果用户经常这样做，则表明有问题，但由用户决定是否要保留输出值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-21T14:18:06.263

由于复制省略，性能很可能是相同的。

两种方法表达的不同

```
std::vector<Point> calculate() 
```

返回一个向量（可能基于一些参数）。

```
void calculate(std::vector<Point>& points) 
```

修改现有向量（同样，可能基于参数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-12T22:06:02.550

我的拙见：返回值产生的问题比解决的问题多……它们看起来更简单，在调用段中更简洁，但是会避免右值引用……

缺点是表达能力会降低，但这是一个很小的成本，因为像内存分配这样的资源会向上游移动。

C++ 必须而且可以在语法和资源管理方面得到显着简化。

# asp.net - 在 asp.net 中监视会话变量的应用程序

> ID：12056805
> 
> 赞同：0
> 
> 时间：2012-08-21T14:14:19.780
> 
> 标签：asp.net, session, session-variables, session-state

是否有第三方应用程序或插件来监视 asp.net 应用程序的会话变量？当我在开发中运行我的应用程序时，我想监视会话变量，了解它们何时被创建、销毁、更改值等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:32:50.810

你看过一瞥吗？[http://getglimpse.com/](http://getglimpse.com/)

“Glimpse 的核心允许您直接在浏览器中调试您的网站或 Web 服务。Glimpse 允许您“瞥见”您的 Web 服务器中正在发生的事情。换句话说，Firebug 用于调试您的客户端代码，Glimpse是在客户端中调试您的服务器。” -*来自 Glimpse 网站*

# c# - c# 创建新的唯一对象实例

> ID：12056806
> 
> 赞同：0
> 
> 时间：2012-08-21T14:14:20.663
> 
> 标签：c#, memory

我的问题是如何更改以下代码以创建 10 个不同的对象实例而不是 10 个相同的对象。

```
 List <OBJ> newList = new List<OBJ> ();
 for (int i = 0; i < 10; i++){
     OBJ newOBJ = new OBJ (i);
     newList.Add(newOBJ);  
 } 
```

OBJ 类在哪里：

```
 class OBJ    {
    public static int numb;

    public OBJ(int i)
    {
        numb = i;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T14:16:43.783

那是10个不同的对象。但是由于数字是[`static`](http://msdn.microsoft.com/en-us/library/98f28cdx.aspx)，它们都具有相同的数字。

因此，如果您愿意，请使其成为非静态的。

```
class OBJ    {
    public int numb;

    public OBJ(int i)
    {
        numb = i;
    }
} 
```

如果要计算实例数，可以将其保留为静态。

```
class OBJ    {
    public static int num_instances;
    public int number;

    public OBJ(int i)
    {
        number = i;
        num_instances ++;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T14:16:08.980

制作*实例*字段而不是`numb`类*字段*。删除：**`static`**

 **```
public int numb; 
```

当`static`所有实例都`OBJ`使用同一个`int`命名的`numb`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T14:17:28.710

任何时候使用`new`，都会获得一个新实例。代码似乎没问题。唯一的问题是您应该`static`从`public static int numb`.

```
class OBJ    {
  public int numb;

  public OBJ(int i)
  {
      numb = i;
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T14:16:25.560

这就是您的代码已经在做的事情。您成员上的`static`关键字`numb`使 . 的所有实例共享 numb `OBJ`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-21T14:16:29.977

我不确定我是否理解您的问题，但请尝试删除 static 关键字。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T14:17:28.637

您正在创建新实例，但您唯一的属性是静态的，它在所有实例之间共享。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T14:27:28.700

您应该只删除`static`关键字...看看这个： http: [//msdn.microsoft.com/en-us/library/98f28cdx (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/98f28cdx(v=vs.100).aspx)**

# spring - spring 资源/** 奇怪的行为

> ID：12056815
> 
> 赞同：0
> 
> 时间：2012-08-21T14:14:41.600
> 
> 标签：spring, spring-mvc

我在使用 spring 从服务器获取资源时遇到了一些奇怪的行为。我会尽我所能去飞机。

我正在使用这样的spring MVC资源：

> mvc:resources mapping="resources/**" location="/resources/" />

一切正常，直到我尝试从根目录中不止一个“/”的路径中获取页面。

例如：我有一个映射

> ```
> @RequestMapping({"/","/home"})
> public String showHomePage(Map<String, Object> model) {
>     return "landingpage";   
> } 
> ```

它返回包含我需要的所有资源（.js、图像等）的登录页面

但如果我这样做：

```
@Controller
@RequestMapping({"/extraMapping"})
public class ExtraController {
    protected static Logger logger = Logger.getLogger(ExtraController.class);

    @RequestMapping({"/{id}/overview"})
    public String showHomePage(Map<String, Object> model,  @PathVariable int id) {
        return "extradashboard";    
    }
} 
```

我在所有资源上都找不到 404。因此，如果我将 return "extradashboard" 更改为 return "landingpage"，就不会有任何混淆；同样的事情也会发生。404 未找到。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:21:29.403

好吧，我通过创建另一个资源映射到新的控制器基本映射来解决了这个问题。像这样：

```
<mvc:resources mapping="extraMapping/{id}/resources/**" location="/resources/" /> 
```

# tcl - 无法通过活动状态 teacup.exe 下载软件包

> ID：12056820
> 
> 赞同：1
> 
> 时间：2012-08-21T14:14:59.630
> 
> 标签：tcl

我有活动状态 tcl 版本 8.5 ；我正在尝试使用来自 tclshell 控制台的命令“teacup install mime”通过版本 8.5.11.1.295996 的 teacup.exe 下载 mime 包。但是在这样做的同时，我得到了错误“虽然已经完成了不考虑字母大小写和接受子字符串的更模糊搜索，但我们很遗憾地说它也没有产生任何可能的安装候选者”。

请提出可能存在的问题；我的平台是win xp。

# mysql - 连接的连接结果

> ID：12056821
> 
> 赞同：0
> 
> 时间：2012-08-21T14:14:59.903
> 
> 标签：mysql, sql, group-concat

我有以下（有点长）查询：

```
 SELECT * 
        FROM client C
        JOIN uga U
        ON U.id_uga = C.id_uga
        JOIN appartenance A
        ON A.id_uga = U.id_uga
        JOIN serviceattribuee SA
        ON SA.id_client = C.id_client
        JOIN service S
        ON S.id_service = SA.id_service
        WHERE A.id_utilisateur = 28
        ORDER BY ville_client 
```

这让我返回了类似的东西：

```
Nom : "Test" 
Adresse : "Test"
Services : "Service 1"

Nom : "Test" 
Adresse : "Test"
Services : "Service 2"

Nom : "Test 2"
Adresse : "Test 2"
Services : "Service 1"

Nom : "Test 2"
Adresse : "Test 2"
Services : "Service 2" 
```

如您所见，结果是重复的，因为每个客户端都有多个服务。有没有办法将每个客户端的所有服务连接到同一行，以避免双打？

我正在使用 MySQL5.5

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:17:40.257

```
 SELECT c.Nom, c.Adresse, group_Concat(s.Nom) as services
    FROM client C
    JOIN uga U
    ON U.id_uga = C.id_uga
    JOIN appartenance A
    ON A.id_uga = U.id_uga
    JOIN serviceattribuee SA
    ON SA.id_client = C.id_client
    JOIN service S
    ON S.id_service = SA.id_service
    WHERE A.id_utilisateur = 28
    group by c.Nom, c.Adresse 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:20:13.000

您想对事物进行分组并使用 group_concat：

```
select nom, addresse, ville_client,
       group_concat(services separator ', ')
FROM client C JOIN
     uga U
     ON U.id_uga = C.id_uga JOIN
     appartenance A
     ON A.id_uga = U.id_uga JOIN
     serviceattribuee SA
     ON SA.id_client = C.id_client JOIN
     service S
     ON S.id_service = SA.id_service
group by nom, addresse, ville_client
WHERE A.id_utilisateur = 28
ORDER BY ville_client 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T14:21:18.590

我认为您正在寻找的是带有 GROUP BY 子句的 GROUP_CONCAT 。为了很好地使用它，您需要专门枚举要连接的列（我在这里展示了一个示例，您可以根据自己的需要进行调整：

```
SELECT 
  C.*
  GROUP_CONCAT(S.Nom) as `services`
FROM client C
  JOIN uga U
  ON U.id_uga = C.id_uga
  JOIN appartenance A
  ON A.id_uga = U.id_uga
  JOIN serviceattribuee SA
  ON SA.id_client = C.id_client
  JOIN service S
  ON S.id_service = SA.id_service
WHERE A.id_utilisateur = 28
GROUP BY C.id
ORDER BY ville_client 
```

# java - JFreeChart：缩放和平移后数据消失

> ID：12056828
> 
> 赞同：2
> 
> 时间：2012-08-21T14:15:29.727
> 
> 标签：java, swing, zooming, jfreechart, panning

我有一个 JFreeChart 时间序列图表，它显示一个 TimePeriodValuesCollection。数据集包含两个区间。数据显示正确，我可以平移（使用 Ctrl 拖动）视图。问题是，如果我放大并在缩放视图中向右平移视图，则在第一个间隔不再可见后，第二个间隔突然消失。

一切都很好，如果只有一个间隔，或者我没有放大。

有什么想法吗？

SSCCE：

```
public class DisappearingTest {
    public static final SimpleDateFormat oracleDateFormat = new SimpleDateFormat("yyyy-MM-dd");

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                buildFrame();
            }
        });
    }

    private static void buildFrame()  {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        JPanel chartPanel = null;
        try {
            chartPanel = createChartPanel();
        } catch (ParseException e) {
            e.printStackTrace();
        }
        f.add(chartPanel);

        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    static JPanel createChartPanel() throws ParseException {
        TimePeriodValues timePeriodValues = new TimePeriodValues("Test");

        Date startDate1 = oracleDateFormat.parse("2011-01-01");
        Date endDate1 = oracleDateFormat.parse("2011-12-31");

        timePeriodValues.add(new Second(startDate1), 0.3);
        timePeriodValues.add(new Second(endDate1), 0.3);

        Date startDate2 = oracleDateFormat.parse("2012-01-01");
        Date endDate2 = oracleDateFormat.parse("2015-12-31");

        timePeriodValues.add(new Second(startDate2), 0.5);
        timePeriodValues.add(new Second(endDate2), 0.5);

        TimePeriodValuesCollection dataSet = new TimePeriodValuesCollection();
        dataSet.addSeries(timePeriodValues);

        JFreeChart chart = ChartFactory.createTimeSeriesChart("Title", "Time", "Value", dataSet, true, true, false);
        XYPlot plot = chart.getXYPlot();
        plot.setDomainPannable(true);
        plot.setRangePannable(true);

        ChartPanel chartPanel = new ChartPanel(chart);

        return chartPanel;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T02:07:37.647

可悲的是，我不知道为什么，但这种变化可能有助于表征异常。单击并拖动以选择略多于所有范围和域的除*n*天之外的所有天，其中*n* > 3。当您向左拖动时，向未来平移，您将看到最后一段在第 3 天后消失，并且然后在大约*n*天后*重新出现。*该按钮允许重新开始；请注意，刻度标记中午。*`Reset`*

 *附录：在这个[论坛帖子](http://www.jfree.org/forum/viewtopic.php?f=3&t=115655)中，作者检查了问题并提出了[补丁](http://www.jfree.org/forum/viewtopic.php?f=3&t=115655#p174646)。

附录：在[错误 ID 3561093](https://sourceforge.net/tracker/?func=detail&aid=3561093&group_id=15494&atid=115494)中修复。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.WindowConstants;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.time.Day;
import org.jfree.data.time.TimePeriodValues;
import org.jfree.data.time.TimePeriodValuesCollection;

/**
 * @see http://stackoverflow.com/a/12065474/230513
 */
public class DisappearingTest {

    private static ChartPanel chartPanel;
    private static ValueAxis range;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                buildFrame();
            }
        });
    }

    private static void buildFrame() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        initChartPanel();
        f.add(chartPanel, BorderLayout.CENTER);
        JPanel panel = new JPanel();
        panel.add(new JButton(new AbstractAction("Reset") {

            @Override
            public void actionPerformed(ActionEvent e) {
                chartPanel.restoreAutoBounds();
                range.setLowerBound(0);
                range.setUpperBound(1);
            }
        }));
        f.add(panel, BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    static void initChartPanel() {
        TimePeriodValues values = new TimePeriodValues("Test");
        values.add(new Day(1, 1, 2012), 0.2);
        values.add(new Day(2, 1, 2012), 0.2);
        values.add(new Day(3, 1, 2012), 0.8);
        values.add(new Day(1, 2, 2012), 0.8);
        TimePeriodValuesCollection data = new TimePeriodValuesCollection();
        data.addSeries(values);
        JFreeChart chart = ChartFactory.createTimeSeriesChart(
            "Title", "Time", "Value", data, true, true, false);
        XYPlot plot = chart.getXYPlot();
        plot.setDomainPannable(true);
        range = plot.getRangeAxis();
        range.setLowerBound(0);
        range.setUpperBound(1);
        chartPanel = new ChartPanel(chart);
        chartPanel.setMouseWheelEnabled(true);
    }
} 
```*

# excel - 捕获 Excel 数据透视表刷新事件

> ID：12056831
> 
> 赞同：3
> 
> 时间：2012-08-21T14:15:45.407
> 
> 标签：excel, pivot-table, vba

是否存在与数据透视表的数据刷新对应的事件？我找到了

```
    worksheet_pivottableupdate
```

事件，但这似乎每次我更改过滤器或操作数据透视表时都会被调用（这在我的宏中很常见）。我需要的只是捕获基础数据何时更新。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T09:53:40.780

解决此问题的一种方法是使用该`pivottableupdate`事件，并将其与检查以下数据透视表属性是否已更改相结合。

```
PivotTables("PivotTable1").RefreshDate 
```

有关 RefreshDate 属性的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ff834610(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ff834610(v=office.14).aspx)。

# ruby-on-rails - 从 YAML 加载 ActiveRecord 对象时出现反序列化错误

> ID：12056834
> 
> 赞同：5
> 
> 时间：2012-08-21T14:15:46.603
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, yaml, delayed-job

当我尝试反序列化新的 ActiveRecord 对象时，为什么会出现此错误：

```
[Dev]> YAML.load(Identity.new.to_yaml)
Delayed::DeserializationError: Delayed::DeserializationError 
```

同时，这个具有现有 AR 对象的示例按预期工作：

```
[Dev]> YAML.load(Identity.first.to_yaml)
=> #<Identity id: 1, ... 
```

基于搜索答案，一些看起来相关的事情：

我正在使用`ruby 1.9.2p318`, `rails 3.1.3`，`delayed_job 2.1.4`而我`YAML::ENGINE.yamler`的 is `syck`。

我该怎么做才能将新的身份记录序列化为 YAML，然后再反序列化？

更新：我还发现，如果我删除了`delayed_job`gem，那么这个简单的例子确实有效，而我`YAML::ENGINE.yamler`现在是`psych`. 但我`delayed_job`在我的应用程序中使用，所以了解发生了什么仍然很重要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-19T18:54:02.760

那么原因是如果你检查delayed_job结构存在一个名为的文件[`serialization/active_record.rb`](https://github.com/collectiveidea/delayed_job/blob/master/lib/delayed/serialization/active_record.rb)

现在对于 Ruby `syck`（仅 syck 它发生）作为 YAML 引擎，`yaml_new`每次调用时都会调用定义`YAML.load`，如果您从技术上检查该方法，它会尝试从数据库中构建对象，并`id`从对象的属性中提取

所以为此

`YAML.load(Identity.first.to_yaml)`

它在内部执行此操作

`Identity.find(1)`

但在你的情况下`Identity.new`，因为与它没有`id`关联，所以这会让你反序列化

我认为人们花了这么长时间才回答这个问题的原因是你列出的错误

`Delayed::DeserializationError: Delayed::DeserializationError`

因为它确实说明了任何关于它[当前](https://github.com/collectiveidea/delayed_job/blob/master/lib/delayed/serialization/active_record.rb#L8)`no primary`存在的密钥的信息

我相信[这个](https://github.com/collectiveidea/delayed_job/commit/8d3907764ecf557472cc680282710f4ccc459240)提交可能的原因是在您发布问题的同时或多或少地被推送，但也许您仍然在您的机器中使用旧代码并没有报告它

```
ActiveRecord::RecordNotFound, class: #{klass} , primary key: #{val['attributes'][klass.primary_key]} 
```

## 笔记 ：

它只发生在`syck`经过测试的情况下`pysch`，根本没有调用该方法，也许它用于向后兼容我猜

# android - 如何在没有按钮的情况下自动启动应用程序

> ID：12056835
> 
> 赞同：0
> 
> 时间：2012-08-21T14:15:47.093
> 
> 标签：android

是否可以在不使用按钮的情况下启动我的应用程序代码？

当有人单击应用程序图标时，我希望我的应用程序“就这样做”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:17:33.037

如果单击您的应用程序图标，您的活动将自动启动。

在 Activity 的 onCreate 中，您可以发送 Intent 来启动另一个 Activity。

如果您指的是应用程序中的图标，请参阅 xjaphx 答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:17:09.900

您可以`OnClickListener`为您的图标设置一个，这将是一个`ImageView`.

# f# - 在 F# 中重载 [,] 运算符

> ID：12056837
> 
> 赞同：3
> 
> 时间：2012-08-21T14:15:55.857
> 
> 标签：f#

如何在 F# 中重载运算符 [,]（如在 2D 数组中）？我希望能够写出类似的东西：`myObject.[a, b]`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T14:23:52.257

那是一个“索引属性”。[在 MSDN 上的Indexed Properties (F#)](http://msdn.microsoft.com/en-us/library/dd233202.aspx)页面底部有一个带有多个参数的索引属性示例。

# android - Android，应用程序运行时推送消息？

> ID：12056839
> 
> 赞同：0
> 
> 时间：2012-08-21T14:15:56.747
> 
> 标签：android, push-notification, google-cloud-messaging

我在android中开发一个应用程序。我想在客户端应用程序当前运行时发送推送消息。我如何通过 Google 云消息传递来实现这一点。或任何其他方法？但我想在应用程序运行阶段以及应用程序关闭时发送推送消息。提前致谢。希望有人能帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:22:22.817

gcm 消息中的 delay_while_idle 属性将使 GCM 服务器在设备不空闲时发送消息。

阅读有关云消息传递的信息，这将有助于全面了解该服务的工作原理。[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:20:02.000

您不能在客户端推送消息。您可以将 REST HTTP 数据发送到服务器。

在服务器端 - 使用 gcm-server 库来推送 gcm 消息。

# c - 为什么栈被实现为链表？有什么需求，为什么数组实现还不够？

> ID：12056842
> 
> 赞同：4
> 
> 时间：2012-08-21T14:15:59.990
> 
> 标签：c, stack, linked-list

很多时候，栈是用链表实现的，是不是数组表示不够好，在数组中我们可以很容易地进行push pop，而链表比数组更复杂代码，与数组实现相比没有优势。

您能否举一个链接列表实现更有益的示例，或者我们不能没有它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:25:40.907

我会说许多实际的堆栈实现*都是*使用数组编写的。例如，.NET Stack 实现使用数组作为后备存储。

数组通常更有效，因为您可以将堆栈节点都保留在附近的连续内存中，这可以很好地适合处理器上的快速缓存行。

我想您会看到使用链表的堆栈的教科书实现，因为它们更容易编写并且不会强迫您编写一些额外的代码来管理后备数组存储以及提出增长/复制/预留空间启发式。

此外，如果您真的需要使用很少的内存，那么链表实现可能是有意义的，因为您不会“浪费”当前未使用的空间。但是，在具有大量内存的现代处理器上，通常最好使用数组来获得它们提供的缓存优势，而不是担心链表方法的页面错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:20:48.147

数组的大小是有限的和预定义的。当您不知道其中有多少时，链表是一个完美的选择。

更详细的比较：-（+表示支配链表，-表示数组）

`Size and type constraint:-`

1.  (+) 数组的其他成员以相等的距离对齐并且需要连续的内存，而在另一边的链接列表可以提供非连续的内存解决方案，所以有时它对内存以及在大数据的情况下也有好处（避免 cpu 轮询资源）。

2.  (+) 假设您使用数组作为堆栈，并且数组的类型为 int。现在您将如何在其中容纳双精度数？

`Portability`

1.  (+) 数组可能会导致索引超出范围异常等异常，但您可以随时在链表中增加链。

`Speed and performance`

1.  (-)如果它与性能有关，那么对于数组来说，显然大部分复杂性都在 O(1) 左右。如果是链表，您将不得不选择一个起始节点来开始跟踪，这会增加性能损失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:18:51.520

当堆栈的大小变化很大时，如果您有一个总是分配一个巨大数组的通用例程，那么您会浪费空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:24:57.050

显然，固定大小的数组有事先知道最大大小的限制。
如果您考虑`dynamic array`，那么[链接列表与数组](http://en.wikipedia.org/wiki/Linked_list#Linked_lists_vs._dynamic_arrays)涵盖了包括执行操作的复杂性在内的细节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T22:58:34.987

堆栈是使用链表实现的，因为 Push 和 Pop 操作的时间复杂度为 O(1)，而数组的时间复杂度为 O(n)。（除了链表中灵活的大小优势）

# javascript - Javascript 使用 JCanvaScript 在画布中加载图像

> ID：12056849
> 
> 赞同：1
> 
> 时间：2012-08-21T14:16:10.150
> 
> 标签：javascript, arrays, canvas, html5-canvas

我正在使用 JcanvaScript 库来处理 Html5 画布，现在我想在我的画布中加载一些图像，但只有最后一个图像加载成功，除了最后一个，我看不到任何其他图像，我不知道是什么我的代码错了。

这是代码

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      canvas {
           border: 1px solid #9C9898;
       }
    </style>
      <script src="jcanvas/jCanvaScript.1.5.15.js"></script>
      <script>
          var imagesUrl = [];
          var imagesObj = [];
          var canvasWidth = 800;
          var canvasHeight = 600;
          var imagesIdPrefix = 'images_';
          var canvas = "canvas";
          var fps = 60;

          imagesUrl.push('images/image1.jpg');
          imagesUrl.push('images/image2.jpg');
          imagesUrl.push('images/image3.jpg');
          imagesUrl.push('images/image4.jpg');

          function init(){
              for (i = 0; i < imagesUrl.length; i++){
                  var xImage = new Image();
                  xImage.src = imagesUrl[i];
                  xImage.onload = function(){
                      jc.start(canvas, fps);
                      jc.image(xImage, i*10, 0, 200, 200)
                              .id(imagesIdPrefix.toString() + i.toString());
                      jc.start(canvas, fps);
                  }
                  imagesObj.push(xImage);
              }
          }

      </script>
  </head>
  <body onload="init()">
    <canvas id="canvas" width="800px" height="600px"></canvas>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:22:44.813

该错误已由 MrOBrian 在评论中确定：当调用 onload 回调时， i 具有它在循环结束时的值。这就是为什么您认为只有最后一个图像加载成功的原因。

一个标准的解决方案是将循环的内容嵌入到一个闭包中，保持 i 的值：

```
for (i = 0; i < imagesUrl.length; i++){
     (function(i){
              var xImage = new Image();
              xImage.src = imagesUrl[i];
              xImage.onload = function(){
                  jc.start(canvas, fps);
                  jc.image(xImage, i*10, 0, 200, 200)
                          .id(imagesIdPrefix.toString() + i.toString());
                  jc.start(canvas, fps);
              }
              imagesObj.push(xImage);
       })(i);
   } 
```

**编辑 ：**

当您想确保在运行某些代码之前加载所有需要的图像时，您可以使用此功能：

```
function onLoadAll(images, callback) {
    var n=0;
    for (var i=images.length; i-->0;) {
        if (images[i].width==0) {
            n++;
            images[i].onload=function(){
                if (--n==0) callback();
            };
        }
    }
    if (n==0) callback();
} 
```

图像必须首先提供它们的 src。你这样调用函数：

```
onLoadAll(imagesObj, function(){
     // do something with imagesObj
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:39:40.233

您需要确保图像已加载，然后再循环浏览它们。

通过在循环内定义您的`onload`函数`for`，图像可能尚未加载，因此脚本将跳过它。当它完成循环时，最后一张图像可能是唯一及时加载的图像。

我建议为循环**外**的每个图像添加一个加载器`for`，当所有图像都加载完毕后，继续循环遍历数组。

加载器和检查器看起来像这样：

```
var loadedImages = [];
var loadedNumber = 3 //the number of images you need loaded    
var imageToBeLoaded = new Image();
imageToBeLoaded.onload = function() {
    loadedImages.push(true);
    checkImages();
}
function checkImages() {
    if (loadedImages.length != loadedNumber) {
        setTimeout(checkImages(),1000);
    } else {
        init(); //your draw function
    }
} 
```

# installation - 安装地铁风格应用

> ID：12056850
> 
> 赞同：1
> 
> 时间：2012-08-21T14:16:12.397
> 
> 标签：installation, windows-8, microsoft-metro

我正在尝试安装我的 Metro 应用程序。所以，我的问题是：我可以在安装过程中将我的应用程序的示例图片移动到 KnownFolders.Pictures 和 Videos 吗？而且，如何为我的应用程序创建安装文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:47:03.120

借助 Windows 8 中的 Windows Store 应用程序安装机制，无需编写安装程序或安装程序。一旦您的应用发布，这一切都将通过 Windows 应用商店进行管理。

由于您无法编写安装程序，为了实现类似的目标，您可以在应用程序中放置一些功能以在首次运行时执行，然后保存设置以指示您已经执行了首次运行操作。

这将是您放置移动示例图片的代码的地方。

但是，您的应用还需要适当的权限才能以编程方式访问 KnownFolders 位置 - 请查看本文了解详细信息。[http://msdn.microsoft.com/en-us/library/windows/apps/Hh967755.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh967755.aspx)

询问用户是否可以将示例图片复制到他们的图片库也是一个很好的最佳实践。

# jenkins - 禁用“允许用户注册”将用户添加到 Jenkins

> ID：12056851
> 
> 赞同：61
> 
> 时间：2012-08-21T14:16:13.740
> 
> 标签：jenkins, user-management

我不希望新用户能够注册。所以在 Jenkins 的配置中，我使用 Jenkins 自己的用户数据库禁用了“允许用户注册”。

但是我现在如何手动添加用户？另外，是否有我应该照顾的默认管理员用户？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-09-11T08:26:49.313

“管理詹金斯”中有“创建用户”。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-02-13T09:40:16.373

如果“允许用户注册”已经被禁用并且安全性打开并且没有用户可以用来登录，唯一的方法是在服务器上手动更改 Jenkins 配置并重新启动服务器。

要更改的内容在 Jenkins 主文件夹中的 config.xml 文件中。改变

```
<useSecurity>true</useSecurity> 
```

到

```
<useSecurity>false</useSecurity> 
```

重启并刷新浏览器

瞧！！！

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-08-05T10:59:37.353

`Manage Jenkins -> Jenkins own user database, Anyone can do anything`. 这样您就不会被迫登录或注册。`Manage Jenkins -> Manage Users`然后您创建用户，然后相应地设置安全性。

如果您不先设置安全方法，则无法添加用户。

配置 Jenkins 的一种便捷方法是`config.xml`直接编辑文件并使用`Manage Jenkins -> Reload configuration from Disk`超链接，而不是重新启动服务。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-21T15:24:29.810

处理此问题的推荐方法是使用基于矩阵的安全性并留下注册。将默认权限设置为无，这样当人们注册时，他们实际上无法做任何事情，除非您明确授予他们权限。如果您出于某种原因不想保留注册，则必须启用以添加用户，然后在完成后禁用。据我所知，除非您想手动编辑配置文件，否则无法添加关闭注册的用户。

没有默认管理员用户，您需要确保为自己添加最大权限，否则在启用安全性时可能会被锁定。

# silverlight - 确定 Silverlight 版本

> ID：12056852
> 
> 赞同：1
> 
> 时间：2012-08-21T14:16:13.953
> 
> 标签：silverlight, devexpress, version

我即将开始处理一些遗留代码，特别是 Silverlight 组件。我需要确定用于此组件的 Silverlight 版本，这样我就不会安装不需要的软件（特别是 DevExpress Silverlight）或做任何无关的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:59:23.827

## 项目版本

要找出您的项目需要构建的 Silverlight（或其他引用的程序集，例如 DevExpress）的版本，您可以查看项目文件中的项目引用。

在下面的示例中，您可以看到作为`Include`属性的一部分声明的版本。

```
<Reference Include="System.Windows.Controls, Version=2.0.5.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\..\..\..\..\..\..\Program Files\Microsoft SDKs\Silverlight\v4.0\Libraries\Client\System.Windows.Controls.dll</HintPath>
</Reference> 
```

## 构建的组件或应用程序版本

要确定构建特定组件所依据的 Silverlight（或其他引用的程序集，例如 DevExpress）的版本，您可以在 XAP 文件中的 DLL 上使用[.NET Reflector](http://www.reflector.net/)或[类似的](http://www.jetbrains.com/decompiler/) [反射工具。](http://www.telerik.com/products/decompiler.aspx)要获取此 DLL，请将 XAP 扩展名更改为 ZIP 并使用您最喜欢的 ZIP 实用程序。

## Silverlight 运行时版本

以下 javascript 使您能够获取已安装 Silverlight 运行时的版本。这是基于在[此博客](http://blog.mdk-photo.com/post/Detecting-Silverlight-version-installed.aspx)上找到的代码（现在似乎已损坏）。我记得编辑它以添加一些额外的浏览器等。

要获取版本，请使用`Silverlight.version`.

```
// Determines the version of the Silverlight runtime.
// Taken from http://blog.mdk-photo.com/post/Detecting-Silverlight-version-installed.aspx

if (!window.Silverlight)
    window.Silverlight = {};

Silverlight.ua = null;

///////////////////////////////////////////////////////////////////////////////
// detectSilverlightVersion
///////////////////////////////////////////////////////////////////////////////
function detectSilverlightVersion() {
    var container;
    var silverlightVersion;

    var BinarySearch = function (control, versionNumbers, indx, min, max) {
        if (max < min)
            return -1 // not found

        if (min == max)
            return min
        else {
            versionNumbers[indx] = Math.ceil(min + ((max - min) / 2))
            var isSupported = control.IsVersionSupported(buildVersionString(versionNumbers))
            if (!isSupported)
                return BinarySearch(control, versionNumbers, indx, min, versionNumbers[indx] - 1)
            else
                return BinarySearch(control, versionNumbers, indx, versionNumbers[indx], max)
        }
    }

    var buildVersionString = function (versionNumbers) {
        var versionString = "";
        for (var l = 0; l < versionNumbers.length; ++l) {
            versionString += versionNumbers[l];
            if (l != versionNumbers.length - 1)
                versionString += ".";
        }
        return versionString;
    }

    try {
        var control = null;

        if (Silverlight.ua != null && Silverlight.ua.Browser == 'MSIE') {
            control = new ActiveXObject('AgControl.AgControl');
        }
        else {
            if (navigator.plugins["Silverlight Plug-In"]) {
                container = document.createElement("div")
                document.body.appendChild(container);
                container.innerHTML = '<embed type="application/x-silverlight" />';
                control = container.childNodes[0];
            }
        }

        if (control.Settings) {
            try {
                silverlightVersion = control.Settings.version;
            }
            catch (z) {
            }
        }

        if (!silverlightVersion) {
            var major = 0;
            var minor = 0;
            var revision = 0;
            var build = 0;

            var buildVersionString = function (versionNumbers) {
                var versionString = "";
                for (var l = 0; l < versionNumbers.length; ++l) {
                    versionString += versionNumbers[l];
                    if (l != versionNumbers.length - 1)
                        versionString += ".";
                }
                return versionString;
            }

            var versionNumbers = [0, 0, 0, 0];

            if (arguments[0]) {
                for (var i = 0; i < versionNumbers.length; ++i) {
                    for (var incrementor = 0; incrementor < 100000; ++incrementor) {
                        versionNumbers[i] = incrementor;

                        if (!control.IsVersionSupported(buildVersionString(versionNumbers))) {
                            versionNumbers[i] = incrementor - 1;
                            break;
                        }
                    }
                }
            } else {
                versionNumbers[0] = BinarySearch(control, versionNumbers, 0, 0, 20);
                versionNumbers[1] = BinarySearch(control, versionNumbers, 1, 0, 20);
                versionNumbers[2] = BinarySearch(control, versionNumbers, 2, 0, 100000);
                versionNumbers[3] = BinarySearch(control, versionNumbers, 3, 0, 20);
            }
            silverlightVersion = buildVersionString(versionNumbers);
        }

        control = null;
    }
    catch (e) {

    }

    if (container) {
        container.parentNode.removeChild(container);
    }

    if (!silverlightVersion)
        silverlightVersion = "Not installed!";

    return silverlightVersion;
}

///////////////////////////////////////////////////////////////////////////////
// detectUserAgent Parses UA string and stores relevant data in Silverlight.ua.
///////////////////////////////////////////////////////////////////////////////
Silverlight.detectUserAgent = function () {
    var ua = window.navigator.userAgent;

    Silverlight.ua = { OS: 'Unsupported', Browser: 'Unsupported' };

    //Silverlight does not support pre-Windows NT platforms
    if (ua.indexOf('Windows NT') >= 0) {
        Silverlight.ua.OS = 'Windows';
    }
    else if (ua.indexOf('PPC Mac OS X') >= 0) {
        Silverlight.ua.OS = 'MacPPC';
    }
    else if (ua.indexOf('Intel Mac OS X') >= 0) {
        Silverlight.ua.OS = 'MacIntel';
    }

    if (Silverlight.ua.OS != 'Unsupported') {
        if (ua.indexOf('MSIE') >= 0) {
            if (navigator.userAgent.indexOf('Win64') == -1) {
                if (parseInt(ua.split('MSIE')[1]) >= 6) {
                    Silverlight.ua.Browser = 'MSIE';
                }

            }
        }
        else if (ua.indexOf('Firefox') >= 0) {
            var version = ua.split('Firefox/')[1].split('.');
            var major = parseInt(version[0]);
            if (major >= 2) {
                Silverlight.ua.Browser = 'Firefox';
            }
            else {
                var minor = parseInt(version[1]);
                if ((major == 1) && (minor >= 5)) {
                    Silverlight.ua.Browser = 'Firefox';
                }
            }
        }

        else if (ua.indexOf('Chrome') >= 0) {
            Silverlight.ua.Browser = 'Chrome';
        }

        else if (ua.indexOf('Safari') >= 0) {
            Silverlight.ua.Browser = 'Safari';
        }

        else if (ua.indexOf('Opera') >= 0) {
            Silverlight.ua.Browser = 'Opera';
        }
    }
}

// Detect the user agent at script load time
Silverlight.detectUserAgent();

$(this).ready(function () {
    Silverlight.version = detectSilverlightVersion();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:02:59.840

一种方法可能是打开您的项目文件之一 (.csproj / .vbproj) 并找到 TargetFrameworkIdentifier。

针对 Silverlight 4 的项目：

```
<TargetFrameworkVersion>v4.0</TargetFrameworkVersion>` 
```

针对 Silverlight 5 的项目：

```
<TargetFrameworkVersion>v5.0</TargetFrameworkVersion> 
```

# apache - 配置 HAProxy+nginx+PHP-FPM 以超越 Apache+mod_php

> ID：12056861
> 
> 赞同：3
> 
> 时间：2012-08-21T14:16:28.607
> 
> 标签：apache, nginx, haproxy, php

**编辑**

在 VirtualBox 上运行我的操作系统是个问题。一旦我将我的操作系统设置为磁盘上的本机操作系统，我就能够看到性能提升。

**原来的**

我读过很多人建议放弃 Apache+mod_php 而使用 HAProxy+nginx+PHP-FPM。我正在尝试验证它是否是更有效的设置，但没有看到人们描述的结果。siege 和 ab (Apache Benchmark) 都表明 Apache 在任何数量的并发连接下每秒都能提供更好的响应，并且可以支持更多的连接。

我在 VirtualBox 上运行 Ubuntu 11.04 服务器。它有 10 GB 的空间和 1,344 兆的内存。我使用 apt-get 安装上述程序。以下是相关的配置文件，其中仅包含重要部分。

haproxy.cfg

```
global
        maxconn 4096
        user haproxy
        group haproxy
        daemon
        stats socket /var/run/haproxy.sock mode 0600 level admin

defaults
        log     global
        mode    http
        option  httplog
        option  dontlognull
        retries 3
        option  redispatch
        maxconn 2000
        contimeout      5000
        clitimeout      50000
        srvtimeout      50000

listen tcpcluster *:80
        mode tcp
        option tcplog
        balance roundrobin

        server tcp01 192.168.1.199:8080 check 
```

nginx.conf

```
worker_processes 2;

events {
        worker_connections 768;
} 
```

www.conf

```
pm = dynamic
pm.max_children = 10
pm.min_spare_servers = 2
pm.max_spare_servers = 4
pm.max_requests = 500 
```

apache.conf

```
<IfModule mpm_prefork_module>
    StartServers          5
    MinSpareServers       5
    MaxSpareServers      10
    MaxClients           10
    MaxRequestsPerChild   0
</IfModule>
<IfModule mpm_worker_module>
    StartServers          2
    MinSpareThreads      25
    MaxSpareThreads      75
    ThreadLimit          64
    ThreadsPerChild      25
    MaxClients           10
    MaxRequestsPerChild   0
</IfModule>
<IfModule mpm_event_module>
    StartServers          2
    MinSpareThreads      25
    MaxSpareThreads      75
    ThreadLimit          64
    ThreadsPerChild      25
    MaxClients           10
    MaxRequestsPerChild   0
</IfModule> 
```

鉴于 PHP-FPM 和 Apache 都最多有 10 个孩子，我希望任何速度优势都是可见的。在我运行的每个测试中（在我运行测试之前总是等到负载为 0.01），Apache 总是能够更有效地处理更多请求。

是否可以进行一些其他优化，以便最适合扩展的设置将优于不应该更有效的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:29:08.200

使用 haproxy 作为连接集中器：使用“mode http”而不是“mode tcp”，使用“option http-server-close”并将服务器 maxconn 值设置为远低于 worker 连接值。您应该跨越一个点，即较低的并发性会带来更高的性能、更低的 RAM 使用率和更好的整个链上的缓存效率。

顺便说一句，我们正在谈论的数字是多少？它们是以每秒数百或数千个请求来衡量的吗？因为很明显，应用程序服务器只会在更高的负载中产生真正的影响。显然，如果应用程序运行非常缓慢，更换服务器时没有理由看到差异。

# c++ - 堆分配变量的结构成员对齐

> ID：12056866
> 
> 赞同：1
> 
> 时间：2012-08-21T14:16:38.590
> 
> 标签：c++, c, gcc

我有一个结构，其中成员有一定的对齐要求，而结构本身不存在这样的要求。

我正在使用 gcc，因此使用 __attribute__((aligned(n))) 可以解决问题，除非（据我所知）在堆上分配了结构的实例。

如何保持堆分配实例的对齐？posix_memalign(3) 将对齐结构本身，而不是结构成员，所以我看不出如何使它与该函数一起工作。

来源在这里：[https ://github.com/colding/disruptorC/blob/master/src/disruptor.h#L92](https://github.com/colding/disruptorC/blob/master/src/disruptor.h#L92)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:20:40.613

无论结构在哪里——堆栈或堆——结构的布局必须相同。编译器确保`sizeof()`结构中元素的布局和对齐要求匹配（通过填充）。它还为结构本身提供了所需的对齐方式，以便其成员最终位于右边界（该值是其任何成员的最大对齐方式）。

所以只需使用`posix_memalign`，你会没事的：

```
MyStruct* ptr;
posix_memalign(&ptr, alignof(MyStruct), sizeof(MyStruct)); 
```

例如，如果您有以下定义：

```
struct MyStruct {
    char c;
    double d;
} 
```

当然，它依赖于编译器，但最可能的行为是编译器列出以下内容：

*   1 字节字符
*   7 个字节的填充
*   8 字节双精度

并为整个事物提供 8 个字节的对齐方式。然后，如果结构本身正确对齐（在 8 字节边界上），则偏移 8 个字节的双精度也将正确对齐。

（`alignof`在不同的编译器/标准中有所不同：`__alignof__`在 gcc、`__alignof`MSVC 和`alignof`C11/C++11 中。）

# jquery - Nivo 滑块过渡无法正常工作

> ID：12056873
> 
> 赞同：0
> 
> 时间：2012-08-21T14:16:58.963
> 
> 标签：jquery, wordpress, nivo-slider

我在我的 wordpress 主题中使用 nivo 滑块 jQuery 插件（没错，我使用的是 jQuery 插件而不是 WordPress 插件），无论出于何种原因，图像转换都是可怕的。

就像，它们缓慢而不稳定，你会看到过渡效果，直到图像再次改变。这就是我的意思：

![在此处输入图像描述](../Images/ada8f07d40ff33828fed493f2a2fec3e.png)

这是我的 jQuery 代码

```
jQuery(document).ready(function() {  

    var logo_width = jQuery('.logo a img').width();
    jQuery('.logo').width(logo_width);

    jQuery('#cycler').nivoSlider({
        effect: 'fade', // Specify sets like: 'fold,fade,sliceDown'
        slices: 15, // For slice animations
        boxCols: 6, // For box animations
        boxRows: 2, // For box animations
        animSpeed: 500, // Slide transition speed
        pauseTime: 3000, // How long each slide will show
        startSlide: 0, // Set starting Slide (0 index)
        directionNav: true, // Next & Prev navigation

        controlNav: true, // 1,2,3... navigation
        controlNavThumbs: false, // Use thumbnails for Control Nav

        manualAdvance: false, // Force manual transitions
        prevText: 'Prev', // Prev directionNav text
        nextText: 'Next', // Next directionNav text
        randomStart: false, // Start on a random slide
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:20:14.290

您需要删除幻灯片中所有对象标签包装的图像。

示例： **从**

```
<ul id="slider">
<li><img src="..." /></li>
<li><img src="..." /></li>
<li><img src="..." /></li>
<li><img src="..." /></li>
</ul> 
```

**至**

```
<div id="slider">
<img src="..." />
<img src="..." />
<img src="..." />
<img src="..." />
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:00:08.347

嗯，你的代码没有明显的问题——除了你使用过的事实`jQuery(document).ready(function() {`

这可能是问题所在，document.ready() 将在所有图像下载之前运行，因此您在图像仍在下载时（可能）运行滑块转换。

我会`jQuery(window).load(function() {`改用。

此外，参数列表的末尾还有一个逗号。这不会导致迟缓问题，但会导致它在 IE7 中失败（如果这对您来说是个问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T21:06:46.487

我在这里参加聚会很晚，但我遇到了同样的问题并设法解决了。

原来它与切片设置有关。请注意您的切片如何设置为 15，并且“过渡”中有 15 个段如果您将切片设置为 1，您应该能够对其进行排序。

我花了很长时间才弄清楚当它发生在我身上时发生了什么。

# iframe - Framebuster 异常

> ID：12056889
> 
> 赞同：2
> 
> 时间：2012-08-21T14:17:37.950
> 
> 标签：iframe, framebusting

我有一个关于编写框架破坏者破坏者的问题。我已经阅读了[Frame Buster Buster ...需要破坏代码，](https://stackoverflow.com/questions/958997/frame-buster-buster-buster-code-needed)但我需要进行额外的调整。

我在 [ [http://my_domain.c0m/blog]](http://my_domain.c0m/blog])上的博客中的内容正在显示在另一个显示三个“视图”的站点上。一个视图是一个提要，并没有特别困扰我。另外两个打扰我，我想打破两个。我还想允许具有框架权限的域例外。

在一个视图中，我的博客顶部的 html 顶部的内容似乎首先被复制以创建一个“快照”[ [http://the_other_domain.c0m/copy_of_blog]](http://the_other_domain.c0m/copy_of_blog]) ，然后该副本被框在 [ [http: //the_other_domain.c0m/](http://the_other_domain.c0m/) ]。因此，在这种情况下，“子”副本都托管在 [ [http://the_other_domain.c0m/]](http://the_other_domain.c0m/])上。谷歌翻译做了类似的事情——但我觉得这没问题。所以，我想打破这个框架，同时也允许谷歌和那些已经复制到他们的电脑并希望在可能框架的实用程序中查看的人例外。

在另一个视图中，我网站的内容似乎被框起来了。所以在这种情况下 [ [http://my_domain.c0m/blog_post]](http://my_domain.c0m/blog_post])是由 [ [http://the_other_domain.c0m/]](http://the_other_domain.c0m/])框起来的。我想摆脱这个框架。但是，我的困难在于，我无法弄清楚如何做到这一点，同时将谷歌翻译或个人电脑用户框架的例外情况保留在家里。

到目前为止我的解决方案（我对javascript并不是特别熟悉。所以，请不要对冗余和缺乏知识笑得太厉害）：

我能够使用以下方法破坏第一帧：

```
<SCRIPT type="text/javascript" >
var topWindow = String(top.location)
var topWord=topWindow.split("/")

var selfWindow = String(self.location)
var selfWord=topWindow.split("/")

var correctLocation ="http://my_domain.c0m/blog" 
var correctWord2="my_domain.c0m" 

var http="http:"

if( ( (topWord[2] != correctWord2) || (selfWord[2] != correctWord2) )   
&& (topWord[2] != 'translate.googleusercontent.com' ) && (topWord[0] == http ) ){
document.write("message expressing my opinion about the asshattery going in here.]" )
setTimeout("redirect_after_pause()",8000)
}else{ 
//document.write("<p><font color='purple'>Hi there! Javascript is working.</font>&nbsp;</p> " )
}

function redirect_after_pause() {
    var correctLocation ="http://my_domain.c0m/blog" 
top.location=correctLocation
} 
```

我知道这是低效的。但它有效并实现了我的目标，即 a）我的法国读者要求的 googlecontent 翻译和 b）用户在下载到他们的电脑的实用程序中构建的情况（我认为 uri 以“文件”开头:"。

现在的困难是：这不适用于托管在我的域中的内容在另一个域中构建的视图。我相信我已经将问题归结为 var topWindow = String(top.location) 不允许在我的子窗口中出现。原则上，这会起作用：

```
<script type="text/javascript">
  if(top != self) top.location.replace(location); 
```

然而，我认为它搞砸了谷歌翻译的使用，它使用一个顶部框架来保存他们对我的内容的翻译也托管在 [ [http://translate.google.com]](http://translate.google.com])。我怀疑它同样会搞砸可能会在某人的电脑上显示本地副本的阅读器，如果该副本显示在框架中。

如果有人可以指导我找到一个解决方案，我可以实施以打破两个框架，同时允许我的例外

顺便说一句：看起来有问题的网站正在使用 framebuster。我四处寻找，在他们的 /static/common.js?1345250291 代码中找到了这个：

```
enable_iframe_buster_buster:function(){var a=this,b=0;window.onbeforeunload=function(){b++};clearInterval(this.locks.iframe_buster_buster);this.locks.iframe_buster_buster=setInterval(function(){0&lt;b&&(b-=2,a.flags.iframe_story_locations_fetched&&!a.flags.iframe_view_not_busting&&_.contains(["page","story"],a.story_view)&&NEWSBLUR.reader.active_feed&&($(".NB-feed-frame").attr("src",""),window.top.location="/reader/buster",$(".task_view_feed").click()))},1)},disable_iframe_buster_buster:function(){clearInterval(this.locks.iframe_buster_buster)} 
```

这在一些特别密集的javascript中很深。无论它做什么，它似乎都不会影响我在我的内容被复制并托管在 [ [http://the_other_domain.c0m/]](http://the_other_domain.c0m/])的情况下破坏框架的能力。我还没有完全探索它是否破坏了简单的框架破坏器，因为早些时候我最近才意识到在与父框架具有不同域的子框架中禁止使用“var topWindow = String(top.location)”。

无论是否存在帧破坏者，我都希望在这里获得解决方案方面的帮助。我知道，如果一个网站现在以这种方式构建我的内容，那么令人讨厌的技术流行起来只是时间问题，我想在解决方案中编写代码，优雅地破坏这两种方法，同时为自己提供异常。提前致谢。

# uiviewcontroller - 为多个 UIViewController 创建一个数组

> ID：12056891
> 
> 赞同：0
> 
> 时间：2012-08-21T14:17:43.660
> 
> 标签：uiviewcontroller, uinavigationcontroller, nsarray

所以我想创建一个包含我的应用程序的数组`UNViewControllers`。我正在使用导航控制器在视图之间切换。我的总体目标是使用这个数组，以便我可以使用这个数组加载视图。我唯一的问题是我不知道如何使用这个功能。我是否需要在我的 Projects AppDelegate 文件中创建数组，以便可以将数组应用于我的所有子 ViewController？任何建议都会非常有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:22:47.810

你有导航控制器吗？所以你不需要视图控制器数组，导航控制器会处理它。只需在界面构建器（故事板）中为每个视图控制器提供一个标识符，然后使用：

```
MyViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"MyVCIdentifier"];
[self.navigationController pushViewController:vc animated:YES]; 
```

# kde - 使用 dolphin（或其他浏览器），如 yakuake

> ID：12056898
> 
> 赞同：1
> 
> 时间：2012-08-21T14:18:04.983
> 
> 标签：kde, kde4, dolphin-browser

我经常想打开一个文件浏览器打开一个文件然后关闭浏览器。

有没有办法（等离子体，海豚插件，另一个浏览器......）可以让我拥有一个“以”yakuake风格的文件浏览器？（即使用快捷方式展开，并在我选择所需文件时重新折叠）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-17T12:09:18.397

`xdotool`花了我一些时间，但最终设法用（在 Ubuntu 上）得到了你想要的（最终，我也想要:) `sudo apt-get install xdotool`。

使用此脚本，您可以让任何应用程序按照您的要求运行：

```
#!/bin/bash

SEARCHED_WINDOW=$1
COMMAND=${2:-$SEARCHED_WINDOW}
SEARCHED_WINDOW_CLASSNAME=toggleApp$SEARCHED_WINDOW
WINDOW_ID=$(xdotool search --classname $SEARCHED_WINDOW_CLASSNAME)
VISIBLE_WINDOW_ID=$(xdotool search --onlyvisible --classname $SEARCHED_WINDOW_CLASSNAME 2>/dev/null)

if [ -z "$WINDOW_ID" ]; then
    $COMMAND 2>/dev/null &
    pid=$!
    NEW_WINDOW_ID=$(xdotool search --onlyvisible --sync --pid $pid 2>/dev/null)
    xdotool set_window --classname $SEARCHED_WINDOW_CLASSNAME $NEW_WINDOW_ID
    xdotool windowfocus $NEW_WINDOW_ID
elif [ -z "$VISIBLE_WINDOW_ID" ]; then
    xdotool windowmap $WINDOW_ID
    xdotool windowfocus $WINDOW_ID
else
    xdotool windowunmap $VISIBLE_WINDOW_ID
fi 
```

（灵感来自[这里](https://bbs.archlinux.org/viewtopic.php?id=71789&p=1)）

你这样称呼它：

```
./toggle.sh dolphin 
```

如果启动程序的命令不同，可以添加第二个参数：

```
./toggle.sh appName commandToLaunchApp 
```

该脚本的作用如下：

1.  如果应用程序没有运行：启动它，给窗口一个特定的类，并给窗口焦点
2.  如果应用程序正在运行但没有可见窗口：使窗口可见并使其获得焦点
3.  否则，即应用程序正在运行并且可见：隐藏它。

您剩下要做的就是将快捷方式映射到上述命令以启动脚本。在 KDE 中：*系统设置*>*快捷方式和手势*>*自定义快捷方式*。然后*Edit* > *New* > *Global shortcut* > *Command*。

此外，此脚本适用于任何应用程序，应该适用于任何符合[EWMH](http://en.wikipedia.org/wiki/Extended_Window_Manager_Hints "EWMH")的窗口管理器，并允许您拥有同一应用程序的其他实例（这就是我添加类技巧的原因）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:05:46.490

最接近您想要的解决方案是 Widget Layer Compiz 插件。

该插件使您可以在工作区顶部显示一个图层。您可以将此层配置为保存您选择的窗口，在您的情况下，这将是文件管理器。它具有隐藏/显示功能，您可以将其绑定到热键。

它使用窗口匹配规则来定义要保存的窗口。

有关[http://wiki.compiz.org/Plugins/Widget的更多信息](http://wiki.compiz.org/Plugins/Widget)

但是，这意味着您使用 Compiz 合成管理器。

# c++ - C++ 中的聚合

> ID：12056902
> 
> 赞同：0
> 
> 时间：2012-08-21T14:18:18.523
> 
> 标签：c++

在下面的代码中为什么这两个语句是非法的

```
const int i[] = { 1, 2, 3, 4 };

// float f[i[3]]; // Illegal

struct S { int i, j; };
const S s[] = { { 1, 2 }, { 3, 4 } };
//double d[s[1].j]; // Illegal
int main() {} 
```

为什么它们是非法的？文字定义如下，我不明白。

> “在数组定义中，编译器必须能够生成移动堆栈指针以容纳数组的代码。在上述两种非法定义中，编译器都会抱怨，因为它无法在数组定义中找到常量表达式。”

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:20:29.183

数组大小需要是常量表达式。尝试这个：

```
constexpr int i[] = { 1, 2, 3, 4 };

float f[i[3]]; 
```

该`constexpr`关键字是在 C++11 中引入的。以前的 C++ 版本没有这种通用常量表达式的概念，也没有等效的概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:19:28.260

因为 C++ 不支持变长数组，`s[1].j`也不是编译时常量。

`f`该引用所指的是和`d`在**自动存储**中的事实。当它们超出范围时，运行时将自动清理它们的内存。因此，它必须事先知道大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:22:34.393

因为 d 是静态数组，这意味着它的大小必须在编译时知道。因此，您不能使用非常量变量作为大小参数。

但是你可以试试

```
 const int i = 3;
 double d[i]; 
```

例如。

# javascript - 如何从 Google 自定义搜索中下载搜索结果？

> ID：12056906
> 
> 赞同：0
> 
> 时间：2012-08-21T14:18:33.863
> 
> 标签：javascript, python, html, search-engine, webpage

有谷歌自定义搜索的网站。但是当搜索结果出来时，我无法将这些结果保存在原生 html 中。

比如我想`(ITE)`在这个网站上搜索[http://www.asiaone.com/A1Home/A1Home.html](http://www.asiaone.com/A1Home/A1Home.html) 结果页面是：

[http://www.asiaone.com/vgn-ext-templating/asiaone/search/A1MultipleSearchResults.jsp?q=%28ITE%29&cx=009076860783986227266%3Atwgr1shu6je](http://www.asiaone.com/vgn-ext-templating/asiaone/search/A1MultipleSearchResults.jsp?q=%28ITE%29&cx=009076860783986227266%3Atwgr1shu6je)

但是当我尝试下载该结果页面的源代码时，结果和概要在平面 HTML 上不可用。

**python 中是否有任何可用的库或任何其他可以从搜索结果中下载这些概要的软件？**我有这样的东西，但 html 源代码没有概要也没有搜索结果：

```
import urllib
url = "http://www.asiaone.com/vgn-ext-templating/asiaone/search/A1MultipleSearchResults.jsp?q=%28" + "ITE" + "%29&cx=009076860783986227266%3Atwgr1shu6je"
html = urllib.urlopen(url).read().decode('UTF-8')
print html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:01:00.520

您应该查看[Google XML API](https://developers.google.com/custom-search/docs/xml_results) - 它应该具有您正在寻找的功能。

如果您一心想要获得等效的 python，请查看 Google 的[Data API 客户端](https://developers.google.com/gdata/docs/client-libraries?hl=da)- 它们包含工具和示例，可帮助您使用集成的 google 数据构建自己的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:11:00.087

我正在尝试访问：[https](https://www.googleapis.com/customsearch/v1?key=) ://www.googleapis.com/customsearch/v1? key= &cx=009076860783986227266:Atwgr1shu6je&q=ITE

我正在输入从[https://code.google.com/apis/console/?api=customsearch](https://code.google.com/apis/console/?api=customsearch)获得的自己的密钥。

但是，我收到无效值错误，因为我的密钥与您的 cx id 没有关联。你必须把你的钥匙放在这里并得到结果。

PS：不要在评论或问题中输入您的密钥。它可能会花钱（https://code.google.com/apis/console/?api=customsearch:billing）

您可以参考[https://developers.google.com/custom-search/v1/using_rest#WorkingResults](https://developers.google.com/custom-search/v1/using_rest#WorkingResults)。它清楚地提到了您需要做什么才能获得结果。

# c - 自动堆栈使用分析器

> ID：12056909
> 
> 赞同：-1
> 
> 时间：2012-08-21T14:19:03.083
> 
> 标签：c, stack

我只是想知道有任何免费的 C 堆栈使用分析器，例如[http://www.absint.com/stackanalyzer/index.htm](http://www.absint.com/stackanalyzer/index.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:38:07.407

我认为 gprof 是一个很好的工具。

[http://www.cs.utah.edu/dept/old/texinfo/as/gprof.html](http://www.cs.utah.edu/dept/old/texinfo/as/gprof.html)

# vb6 - VB6 注册错误

> ID：12056911
> 
> 赞同：1
> 
> 时间：2012-08-21T14:19:04.923
> 
> 标签：vb6

我在服务器上安装了一个 vb6 应用程序。它完美地工作。

我正在尝试将其重新定位到另一台服务器，但是出现错误：“组件：TABCTL32.OSX 或其依赖项之一未注册”。此服务器上不存在 TABCTL32.OSX。

在另一个 Windows 2003 服务器上，我收到一个不同的错误，指出另一个组件未注册。我在某处读到，在 Windows Server 2003 上默认未安装 VB6，我在其他地方读到它是。有没有办法查看是否安装？我不确定要在“添加/删除程序”中寻找什么。我需要安装这个吗：http: [//support.microsoft.com/kb/192461](http://support.microsoft.com/kb/192461)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:39:00.467

正如主题[Windows Server 2003 包含新版本的 Msvbvm60.dll](http://support.microsoft.com/kb/823746)所建议的那样，该操作系统确实*包含*VB6 核心运行时。但是，不能保证有辅助 VB6 库的基本子集 Microsoft 开始[在 Windows Vista、Windows Server 2008、Windows 7 和 Windows 8 上的 Visual Basic 6.0 支持声明中](http://msdn.microsoft.com/en-us/vstudio/ms788708.aspx)调用“运行时扩展文件” 。

无论如何，必须始终部署 tabctl32.ocx，因为它不包含在那里。

VBRun60.exe中描述的包[安装 Visual Basic 6.0 运行时文件](http://support.microsoft.com/kb/192461)，您提供的原始链接是一种杂物，在任何情况下仅适用于旧版本的 Windows（NT 4.0、Win9x），在极少数情况下你会用它。

> VBRun60.exe 文件不用于替换打包和部署向导 (PDW) 以分发 Visual Basic 应用程序。

无论如何，它不包含或与 tabctl32.ocx 没有任何关系。

本质上，您要问*的不是*开发问题，也不适合 StackOverflow。这是一个更适合像[ServerFault](https://serverfault.com/)这样的地方的管理问题。

如果您没有使用正确的安装包部署此应用程序，那么这*可能会*被粗略地认为是一个开发问题，尽管它仍然不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:33:27.070

在您的设置中重新分发和注册 tabctl32.ocx。

如果您没有设置，请将该文件复制到（32 位）windows\system32 文件夹或应用程序的文件夹中，并`regsvr32 tabctl32.ocx`从具有管理权限的命令提示符中发出命令。

# c - 如何从 Cormen 和 Co 的“算法导论”中实现归并排序

> ID：12056912
> 
> 赞同：12
> 
> 时间：2012-08-21T14:19:04.153
> 
> 标签：c, algorithm, mergesort

我正在从 Cormen and Co. 学习算法，我在从他们的伪代码中实现合并排序时遇到问题。我通过以下方式编译它：

```
$ gcc -Wall -g merge_sort.c 
```

我有一个问题，因为对于数字：

```
2 4 5 7 1 2 3 6 
```

结果是：

```
1 2 2 3 3 4 5 5 
```

我试图仔细阅读伪代码，但这对我没有帮助。我想知道我做错了什么。下面是我的代码：

```
#include <stdio.h>

#define SIZE 8

void merge(int *array_of_integers, int p, int q, int r) {
    int n1 = q - p + 1;
    int n2 = r - q; 
    int i, j, k;
    int left_array[n1 + 1];
    int right_array[n2 + 1];

    for (i = 0; i < n1; i++)
        left_array[i] = array_of_integers[p + i];
    for (j = 0; j < n2; j++)
        right_array[j] = array_of_integers[q + j];

    i = 0;
    j = 0;

    for (k = p; k < r; k++){
        if (left_array[i] <= right_array[j]) {
            array_of_integers[k] = left_array[i];
            i++;
        } else {
            array_of_integers[k] = right_array[j];
            j++;
        }   
    }
}

void merge_sort(int *array_of_integers, int p, int r) {
    if (p < r) {
        int q = (p + r) / 2;
        merge_sort(array_of_integers, p, q);
        merge_sort(array_of_integers, q + 1, r);
        merge(array_of_integers, p, q, r);
    }
}

void print_array(int *array_of_integers, int amout_of_integers) {
    int i;
    for(i = 0; i < amout_of_integers; i++)
        printf("%d ", array_of_integers[i]);
    puts("");
}

int main(void) {
    int dataset[] = { 2, 4, 5, 7, 1, 2, 3, 6 };

    print_array(dataset, SIZE);
    merge_sort(dataset, 0, SIZE);
    print_array(dataset, SIZE);

    return 0;
} 
```

编辑：（正确的解决方案）

```
 void merge(int *array_of_integers, int p, int q, int r) {
     int n1 = q - p + 1;
     int n2 = r - q; 
     int i, j, k;
     int left_array[n1 + 1];
     int right_array[n2 + 1];

     left_array[n1] = 123456798;
     right_array[n2] = 123456798;

     for (i = 0; i < n1; i++)
         left_array[i] = array_of_integers[p + i];
     for (j = 0; j < n2; j++)
         right_array[j] = array_of_integers[q + j + 1];

     i = 0;
     j = 0;

     for (k = p; k <= r; k++) {
         if (left_array[i] <= right_array[j]) {
             array_of_integers[k] = left_array[i];
             i++;
         } else {
             array_of_integers[k] = right_array[j];
             j++;
         }
     }
 }

 void merge_sort(int *array_of_integers, int p, int r) {
     if(p < r) {
         int q = (p + r) / 2;
         merge_sort(array_of_integers, p, q);
         merge_sort(array_of_integers, q + 1, r);
         merge(array_of_integers, p, q, r);
     }
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T14:45:09.470

您的代码中有两个问题。

一，您需要澄清您传递的参数的含义。在 merge_sort 内部，看起来 p 是要排序的第一个元素，而 r 是要排序的最后一个元素。但是，在调用 merge_sort 的地方，在 main 中，它被传递 0 和 SIZE。这里，0 是要排序的第一个元素，但 SIZE 不能是最后一个元素，因为它（大概）是要排序的元素个数。在您的示例中，您传递了 8，但要排序的最后一个元素是 7。因此，请决定是否要更改 merge_sort 以便 r 是元素的数量，或者是否要更改 main 以传递 SIZE-1。类似地，在合并中，p 似乎是要合并的第一个元素，q 是第一个范围的最后一个元素（所以 q+1 是第二个的第一个），而 r 是第二个范围的最后一个元素。但是当你从 array_of_integers 复制到 right_array 时，你从 q+j 复制。当 j 为零时，这将复制第一个范围的最后一个元素，但您需要第二个范围的第一个元素。因此，您需要清除索引的这些用途。（另外，left_array 和 right_array 只需要 n1 和 n2 个元素，而不是 n1+1 和 n2+1。）还要检查 k 上的循环，`for(k = p; k < r; k++)`. 该循环的继续条件应该是什么？

二，当你合并left_array和right_array时，你没有考虑到一个数组可能是空的（因为之前所有的元素都被复制出来了），所以比较left_array[i]和right_array[j]是行不通的，因为i 或 j 分别表示 left_array 或 right_array 之外的元素。例如，如果 i 已达到其极限 (n1)，则不应进行比较。相反，您应该只从 right_array 中获取一个元素。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-04T18:03:24.430

这个虽然是用Java实现的，但逻辑显然是一样的。我已经处理了埃里克回答中提出的所有要点。请查看代码，它是不言自明的。

```
import java.util.*;
class MergeSort
{

    public static void main(String args[])
    {
        int testArray[] = {1,3,5,3,1,7,8,9};
        mergeSort(testArray,0,testArray.length-1);
        System.out.println(Arrays.toString(testArray));
    }

    protected static void mergeSort(int arr[], int p, int r)
    {
        int q;
        if (p<r)
        {
            q = (p+r)/2;
            mergeSort(arr,p,q);
            mergeSort(arr, q+1, r);
            merge(arr,p,q,r);   
        }   
    }

    protected static void merge(int arr[], int p, int q, int r)
    {    
        int n = q-p+1;
        int m = r-q;

        int L[] = new int[n+1];
        int R[] = new int[m+1];
        int i,j,k;

        for(i=0; i< n; i++)
        {
            L[i] = arr[p+i];    
        }
        for(j=0; j< m; j++)
        {
            R[j] = arr[q+j+1];    
        }

        L[n] = Integer.MAX_VALUE;
        R[m] = Integer.MAX_VALUE;

        i = 0;
        j = 0;
        for(k = p; k<= r; k++)
        {

            if( L[i]<=R[j])
            {
                arr[k] = L[i];
                i = i+1;
            }
            else
            {
                arr[k] = R[j];
                j = j+1;

            }           
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-15T10:56:26.837

```
This one worked for me

    // MergeSortRevisionAgain.cpp : Defines the entry point for the console application.
//Understanding merge sort
#include <iostream>

using std::cout;
using std::endl;

//The declaration of the merge sort function
void merge(int A[], int p, int q, int r);
int* mergeSort(int A[], int p, int r);

int main()
{

    /*My Code to test for the merge sort*/
    int myArray[]{ 2,3,5,7,1,4,7,9};
    int lengthOfArray = sizeof(myArray) / sizeof(myArray[1]);
    int* sortedOutput = mergeSort(myArray, 0, lengthOfArray-1);

    for (int i = 0; i <lengthOfArray; i++)
    {
        cout << sortedOutput[i] << " ";
    }

    cout << endl;

    return 0;
}

void merge(int A[], int p, int q, int r)
{
    //Declaration of number of variable in each half
    int n1 = q - p + 1;                                                             //1\. n1 = q - p + 1
    int n2 = r - q;                                                                 //2\. n2 = r-q

    //Declaration of left and right part of the array
    int* leftArray= new int[n1+1] ;                                                 //3\. Let L[1...n1+1] and ... 
    int* rightArray= new int[n2+1] ;                                                //... R[1...n2+1] be new arrays

    //Entering the for loop for the left side
    for (int i = 0; i < n1; i++)                                                    //4.for i = 1 to n1 NB(change i to 0 since index in c++ starts from 0)
    {
        leftArray[i] = A[p + i ];                                                   //5\. L[i] = A[p+i-1] NB(change to A[p+i] since "i" was changed to 0 hence A[p,...,p+i)
    }

    //Entering the for loop for the right side
    for (int  j = 0; j < n2; j++)                                                   //6\. for j = 1 to n2 NB(change j j= 0 since index in c++ starts from 0)
    {
        rightArray[j] = A[q + j+1];                                                 //7\. R[i] = A[q + j ] NB(change to A[q+j+1] since "j" was changed to 0  hence A[q+1,...q+1+j]
    }

    leftArray[n1] = 999;                                                            //8\. Set L[n1+1] = sentinel NB last value in leftArray will be the sentinel
    rightArray[n2] = 999;                                                           //9\. Set L[n2 + 2] = sentinel NB last value in rightArray will be the sentinel

    int i = 0;                                                                      //10\. i = 1 change to i = 0 since index starts from 0 in c++
    int j = 0;                                                                      //11\. j = 1 change to j = 0 since index starts from 0 in c++

    for (int k = p; k <= r; k++)                                                    //12\. for k = p to r - change as specified in code since index of array p = 0, r = lengthofArray - 1
    {
        if (leftArray[i] <= rightArray[j])                                          //13\. L[i] <= R[j]
        {
            A[k] = leftArray[i];                                                    //14\. A[k] = L[i]
            i = i + 1;                                                              //15\. i = i + 1
        }
        else
        {
            A[k] = rightArray[j];                                                   //16\. A[k] = R[j]
            j = j + 1;                                                              //17\. j = j+1;
        }
    }

    delete leftArray;                                                               //18\. Free allocated dynamic memory for leftArray
    leftArray = nullptr;                                                            //19\. Set pointer to nullptr to prevent access to deleted memory
    delete rightArray;                                                              //20\. Free allocated dynamic memory for rightArray              
    rightArray = nullptr;                                                           //21\. Set pointer to nullptr to prevent access to deleted memory
}

int* mergeSort(int A[], int p, int r)
{
    if (p < r)
    {
        int q = floor((p + r) / 2);
        mergeSort(A, p, q );
        mergeSort(A, q + 1, r);
        merge(A, p, q, r);
    }

    return A;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-10T23:15:42.523

这是我的尝试。已知错误：由于 INT_MAX 用作哨兵，对包含 INT_MAX 的数组进行排序可能会导致指针在合并期间溢出。

```
#include <stdio.h>
#include <limits.h>
void merge(int A[], unsigned int p, unsigned int q, unsigned int r){
    unsigned int n1 = q - p; //differs from book because C indexes from 0
    unsigned int n2 = r - q;

    int L[n1 + 1]; // L contains the first elem of A, up to the midpoint (not including the midpoint)
    int R[n2 + 1]; // R contains the elems including the midpoint of A all the way to the end.

    L[n1] = INT_MAX; //INT_MAX is our sentinel, which will be used in the merge step. No possible int will be greater than INT_MAX, so during the merge,
    R[n2] = INT_MAX; // INT_MAX is similar to the infinity used in the book

    for (unsigned int i = 0; i < n1; i++){
        L[i] = A[p + i];
    }

    for (unsigned int i = 0; i < n2; i++){
        R[i] = A[q + i];
    }
    // Now we just need to merge L and R and sort A
    // The sorting occurs here, during the merge.
    unsigned int i = 0;
    unsigned int j = 0;

    for (unsigned int k = p; k < r; k++){
        if (L[i] <= R[j]){
            A[k] = L[i];
            i++;
        }
        else{
            A[k] = R[j];
            j++;
        }
    }
}
void merge_sort(int A[], unsigned int p, unsigned int r) { // input is array A, first elem p, and last elem + 1 r

    if (p < r - 1) { //differs from book... since C indexes from 0, if we have an array of size 1, we will subtract 1 to get 0 and then hit the base case

        // Otherwise, find the midpoint and divide and conquer
        unsigned int q = (p + r) / 2; //q is the midpoint of A
        merge_sort(A, p, q); //this must process the midpoint
        merge_sort(A, q, r); //this must process the elem after the midpoint to the last elem
        merge(A, p, q, r);
        return;

    }

}

int main(){

    int A[] = {432, 5, 99, 101, 43};
    unsigned int len_A = sizeof(A)/sizeof(A[0]);

    printf("original order of elems in A: \n");

    for (unsigned int i = 0; i < len_A; i++){
        printf("%d ", A[i]);
    }

    merge_sort(A, 0, len_A);

    printf("\n\n");
    printf("after performing merge_sort: \n");

    for (unsigned int i = 0; i < len_A; i++){
        printf("%d ", A[i]);
    }

    printf("\n\n");

return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T14:28:04.690

**Python实现**

```
from math import inf

def merge(A, p, q, r):

    n1 = q - p + 1
    n2 = r - q

    L = [0] * (n1+1)
    R = [0] * (n2+1)

    for i in range(0, n1):
        L[i] = A[p + i]

    for j in range(0, n2):
        R[j] = A[q + j + 1]

    L[n1] = inf
    R[n2] = inf

    i = 0
    j = 0
    for k in range(p, r+1):
        if L[i] <= R[j]:
            A[k] = L[i]
            i = i + 1
        else:
            A[k] = R[j]
            j = j + 1

def mergesort(A, p, r):

    if p < r:
        q = (p + r)//2
        mergesort(A, p, q)
        mergesort(A, q + 1, r)
        merge(A, p, q, r)

A = [00, 11, 12, 13, 14, 15, 16, 17, 18, 2, 4,
     5, 7, 1, 2, 3, 6, 22, 23, 34, 56, 78, 77]

merge(A, 9, 12, 16)

print(A)

mergesort(A, 9, 16)
print(A)

print(A) 
```

# ruby-on-rails - 在 Rails 中转换时区的最佳方法

> ID：12056913
> 
> 赞同：0
> 
> 时间：2012-08-21T14:19:09.400
> 
> 标签：ruby-on-rails, timezone

我想将时间从一个时区转换为另一个。

例子：

我第一次拥有的图像，比如

```
t=....
puts t
 => Sun Aug 12 00:00:00 +0200 2012 
```

我想要完全相同的时间，但在不同的时区。我可以做这个：

```
mytimezone.local(t.year,t.month,t.day,t.hour,t.min)
=> Sun, 12 Aug 2012 00:00:00 BRT -03:00 
```

那么有没有办法以更好的方式完成同样的事情呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:47:03.440

你试过`in_time_zone`方法吗？

```
 > t = Time.parse("Sun Aug 12 00:00:00 +0200 2012")
 => 2012-08-12 02:00:00 +0400
 > t.in_time_zone('Eastern Time (US & Canada)')
 => Sat, 11 Aug 2012 18:00:00 EDT -04:00 
 > mytimezone = ActiveSupport::TimeZone.new('Eastern Time (US & Canada)')
 => (GMT-05:00) Eastern Time (US & Canada)
 > t.in_time_zone(mytimezone)
 => Sat, 11 Aug 2012 18:00:00 EDT -04:00 
```

# node.js - now.js 没有准备好

> ID：12056914
> 
> 赞同：2
> 
> 时间：2012-08-21T14:19:13.237
> 
> 标签：node.js, express, nowjs-sockets

我有一点问题。我正在尝试使用 node.js/express.js/now.js 创建一个动态 Web 应用程序。[我已经完成了http://nowjs.com/download](http://nowjs.com/download)的小示例代码中所示的所有操作，但没有成功，客户端 now.js 脚本正确托管，但 now.ready(..) 永远不会触发。唯一的区别是我使用 express 而我用于初始化 now.js 的服务器是 https。

你有什么想法可能导致它不起作用吗？

服务器端：

```
var server = express.createServer(..);
..
server.listen(port, function() {..});
var nowjs = require('now');
var everyone = nowjs.initialize(server);
everyone.now.log = function(msg) { console.log(msg); } 
```

客户端：

```
<script type="text/javascript" src="/nowjs/now.js"></script>
<script type="text/javascript">
    now.ready(function() { now.log('asd'); alert('asd'); });
</script> 
```

任何帮助将不胜感激！

最好的，科内尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:22:52.717

嗯，找到了答案。长答案：now.js 在确定 socket.io 应该通信的通信端口时存在问题。此问题似乎仅在使用默认 https 端口 (443) 时出现。

我找到了两个解决方案，一个丑陋的： [https ://groups.google.com/forum/?fromgroups=#!topic/nowjs/8cO9D77tN2o](https://groups.google.com/forum/?fromgroups=#!topic/nowjs/8cO9D77tN2o)

基本上你需要在 now/lib/fileServer.js 编辑 now.js 的源代码并替换

```
var hostPort =  options['port'] || host[1] || '80'; 
```

和

```
var hostPort =  options['port'] || host[1] || ((request.headers.referer.split(':')[0] === 'https') ? '443' : '80'); 
```

更好的方法是将端口选项设置为 socket.io。幸运的是，now.js 支持这一点：

```
var everyone = nowjs.initialize(server, {port: port, socketio: {transports: ['xhr-polling', 'jsonp-polling']}}); 
```

我希望这将帮助其他遇到相同问题的人，也希望稍后在 now.js 中修复此行为。

最好的问候：Kornel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:22:43.387

使用 Safari 运行最新版本的节点，现在在 OSX 上运行。

服务器.js

```
var html = require('fs').readFileSync(__dirname+'/index.html');
var httpServer = require('http').createServer(function(req, response) { 
    /* Serve your static files */ 
    response.end(html);
})
httpServer.listen(8080);

var nowjs = require("now");
var everyone = nowjs.initialize(httpServer);

console.log('done');
everyone.now.logStuff = function(msg){
    console.log(msg);
} 
```

索引.html

```
<script type="text/javascript" src="http://localhost:8080/nowjs/now.js"></script>

<script type="text/javascript">
  now.ready(function(){
    // "Hello World!" will print on server
    now.logStuff("Hello World!");
  });
</script>
done.. 
```

启动服务器：

```
node server.js 
```

打开浏览器：

```
http://localhost:8080 
```

# android - 如何按时间间隔安排 Android FTP 上传和下载？

> ID：12056915
> 
> 赞同：0
> 
> 时间：2012-08-21T14:19:15.733
> 
> 标签：android, ftp, alarmmanager

我正在开发一项活动，只需按一下按钮，即可通过 FTP 从远程服务器下载包含多个数字的文本文件。按下另一个按钮，将创建一个文本文件，其中包含取决于数字（CPU 使用率、SD 卡可用空间等）的各种统计信息，并通过 FTP 传回同一服务器。

所有这一切都运行良好，但下一阶段的开发是让应用程序在时间间隔内完成所有这些，所有这些都在后台而不显示 GUI（仅用于设置）。

我以前从未这样做过，所以我在网上搜索了一下，似乎我需要使用警报管理器，但我不知道从哪里开始。有人可以指出我正确的方向吗？如果有人能给我一个与我的特定问题相关的答案，而不是说“去看看某某 Android 网站”，那将会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:31:22.017

对于背景内容，请阅读： http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html) 如果您想间隔执行此操作，您可以使用：http: [//developer.android.com/reference/android/应用程序/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

# f# - 避免使用“可变”变量调用带有 byref（C# 中的 out）参数的方法？

> ID：12056923
> 
> 赞同：2
> 
> 时间：2012-08-21T14:20:02.053
> 
> 标签：f#, pass-by-reference, c#-to-f#, f#-3.0

所以我在 C# 中有这个类：

```
public class Foo : IFoo {
    public bool TryConnect(out Status status) {
        ...
    }
} 
```

我想用 F# 来消费它。

不幸的是，我不得不使用一些hackery，例如：

```
type FooService (foo : IFoo) =

    member x.Execute() =
        let mutable status = Unchecked.defaultof< ^Status>
        foo.TryConnect(&status) |> ignore
        (...do something with status...) 
```

有没有办法在这里不使用“可变”？最后，我实际上根本没有使用第一个初始化值。

（我使用的是 F# 2.0，但如果您有仅适用于 F# 3.0 的提示，我会很高兴听到它们。）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:25:57.383

`out`参数被自动元组化。所以，你可以这样做：

```
let res, status = foo.TryConnect() 
```

有关详细信息，请参阅MSDN 上[的按引用传递。](http://msdn.microsoft.com/en-us/library/dd233213.aspx)

# c - 声明结构数组时出错

> ID：12056926
> 
> 赞同：1
> 
> 时间：2012-08-21T14:20:08.010
> 
> 标签：c

我必须声明一个大小为 16 的结构数组。以下代码给出错误 code1.c:12:1: error: initializer element is not constant

```
typedef struct node 
{
int tokenvalue;
struct  node *next;
char *n;
} node;
node *dummy=(node *)malloc(26*sizeof(node)); 
```

也使用 node dummy[26] 给出分段错误。我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:21:18.693

您不能使用任何非编译时常量初始化具有静态存储的对象。让它保持未初始化并在函数中为其分配一些内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T14:23:30.937

尝试在您的`main()`函数中初始化它，因为您无法使用非常量值或无法在编译时确定的值初始化全局变量。

或者，您可以将其声明为

```
node dummy[27]; 
```

作为全局变量，而不必使用 malloc（如果大小是恒定的）。

# jquery - IE 8 JQuery .find() 不适用于 XML 字符串

> ID：12056937
> 
> 赞同：1
> 
> 时间：2012-08-21T14:20:40.523
> 
> 标签：jquery, xml, soap, internet-explorer-8, find

JQuery 似乎无法在返回的 XML 字符串中找到我的选择器字符串。它**似乎**在 Chrome 中工作，但由于浏览器身份验证问题，我无法在同一环境中调试。

我知道过去曾有人问过这类问题，但我没有找到任何特别适用于我的情况的问题。

以下 XML 响应由 SOAP 请求提供；我相信这`<z:row`件作品在这里很重要：

```
"<?xml version="1.0"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetListItemsResponse xmlns="http://schemas.microsoft.com/sharepoint/soap/"><GetListItemsResult><listitems xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema">
                <rs:data ItemCount="6">
                    <z:row ows_Attachments="0" ows_Year="2012" ows_LinkTitle="Orange" ows_Quantity="3.00000000000000" ows_Quantity2="5.00000000000000" ows_Color="Orange" ows__ModerationStatus="0" ows__Level="1" ows_Title="Orange" ows_ID="1" ows_UniqueId="1;#{FEDE3004-A0F4-421F-A76B-5BD51003B11C}" ows_owshiddenversion="8" ows_FSObjType="1;#0" ows_Created_x0020_Date="1;#2012-08-01 19:24:08" ows_Created="2012-08-01 19:24:08" ows_FileLeafRef="1;#1_.000" ows_PermMask="0x7fffffffffffffff" ows_Modified="2012-08-15 11:15:41" ows_FileRef="1;#Sandbox/bitest/Lists/Produce/1_.000" ows_MetaInfo="1;#"/>
                    <z:row ows_Attachments="0" ows_Year="2012" ows_LinkTitle="Apple" ows_Quantity="5.00000000000000" ows_Quantity2="9.00000000000000" ows_Color="Red" ows__ModerationStatus="0" ows__Level="1" ows_Title="Apple" ows_ID="2" ows_UniqueId="2;#{1E40887F-87BF-4029-93A3-A1096DF1D1A7}" ows_owshiddenversion="8" ows_FSObjType="2;#0" ows_Created_x0020_Date="2;#2012-08-01 19:24:42" ows_Created="2012-08-01 19:24:42" ows_FileLeafRef="2;#2_.000" ows_PermMask="0x7fffffffffffffff" ows_Modified="2012-08-15 11:15:42" ows_FileRef="2;#Sandbox/bitest/Lists/Produce/2_.000" ows_MetaInfo="2;#"/>
                    <z:row ows_Attachments="0" ows_Year="2011" ows_LinkTitle="Orange" ows_Quantity="4.00000000000000" ows_Quantity2="9.00000000000000" ows_Color="Orange" ows__ModerationStatus="0" ows__Level="1" ows_Title="Orange" ows_ID="4" ows_UniqueId="4;#{D3C73386-1EA5-435A-BD1A-EF67F719078F}" ows_owshiddenversion="7" ows_FSObjType="4;#0" ows_Created_x0020_Date="4;#2012-08-15 11:13:23" ows_Created="2012-08-15 11:13:23" ows_FileLeafRef="4;#4_.000" ows_PermMask="0x7fffffffffffffff" ows_Modified="2012-08-15 11:15:36" ows_FileRef="4;#Sandbox/bitest/Lists/Produce/4_.000" ows_MetaInfo="4;#"/>
                    <z:row ows_Attachments="0" ows_Year="2011" ows_LinkTitle="Apple" ows_Quantity="8.00000000000000" ows_Quantity2="12.0000000000000" ows_Color="Red" ows__ModerationStatus="0" ows__Level="1" ows_Title="Apple" ows_ID="5" ows_UniqueId="5;#{13F99513-8DE1-48A9-9114-40E5A8B2343F}" ows_owshiddenversion="6" ows_FSObjType="5;#0" ows_Created_x0020_Date="5;#2012-08-15 11:13:59" ows_Created="2012-08-15 11:13:59" ows_FileLeafRef="5;#5_.000" ows_PermMask="0x7fffffffffffffff" ows_Modified="2012-08-15 11:15:27" ows_FileRef="5;#Sandbox/bitest/Lists/Produce/5_.000" ows_MetaInfo="5;#"/>
                    <z:row ows_Attachments="0" ows_Year="2010" ows_LinkTitle="Orange" ows_Quantity="2.00000000000000" ows_Quantity2="6.00000000000000" ows_Color="Orange" ows__ModerationStatus="0" ows__Level="1" ows_Title="Orange" ows_ID="6" ows_UniqueId="6;#{A6DBFD00-6383-4993-9C9E-4398E080FDEE}" ows_owshiddenversion="6" ows_FSObjType="6;#0" ows_Created_x0020_Date="6;#2012-08-15 11:14:05" ows_Created="2012-08-15 11:14:05" ows_FileLeafRef="6;#6_.000" ows_PermMask="0x7fffffffffffffff" ows_Modified="2012-08-15 11:15:38" ows_FileRef="6;#Sandbox/bitest/Lists/Produce/6_.000" ows_MetaInfo="6;#"/>
                    <z:row ows_Attachments="0" ows_Year="2010" ows_LinkTitle="Apple" ows_Quantity="10.0000000000000" ows_Quantity2="2.00000000000000" ows_Color="Red" ows__ModerationStatus="0" ows__Level="1" ows_Title="Apple" ows_ID="7" ows_UniqueId="7;#{2F1BD539-545A-4796-AC1D-A9C4B76BE253}" ows_owshiddenversion="4" ows_FSObjType="7;#0" ows_Created_x0020_Date="7;#2012-08-15 11:14:58" ows_Created="2012-08-15 11:14:58" ows_FileLeafRef="7;#7_.000" ows_PermMask="0x7fffffffffffffff" ows_Modified="2012-08-15 11:15:28" ows_FileRef="7;#Sandbox/bitest/Lists/Produce/7_.000" ows_MetaInfo="7;#"/>
                </rs:data>
            </listitems></GetListItemsResult></GetListItemsResponse></soap:Body></soap:Envelope> 
```

"

以下例程旨在遍历此响应并找到关联的值。它完全无法执行，好像 xData.XML 是空的（我也尝试过 xData.xml - 没有变化）。

```
$(xData.XML).find("z\\:row").each(function() {
           quantityOneArray[i] = parseFloat($(this).attr("ows_Quantity"));
           quantityTwoArray[i] = parseFloat($(this).attr("ows_Quantity2"));
           i++;
           alert("xData "+ i + ": "+xData.XML);
    }); 
```

[这是我的 IE8 调试器](http://img.photobucket.com/albums/v34/Shrout1/IE8_xData_Debugger.png)窗口屏幕截图的链接，其中包含几个手表。`xData.xml`字符串突出显示。这个断点紧接在我上面的迭代例程之前。

*   我的选择器格式不正确吗？
*   我的选择器是否需要额外的转义？
*   我是否在查看错误的返回值或对象？

我绝对在这里拔头发。我在 Chrome 中将选择器更改为“行”，它可以工作；在 IE8 中没有区别。

另外，请查看[此博客文章](http://weblogs.asp.net/jan/archive/2009/05/06/querying-sharepoint-list-items-using-jquery.aspx)以查看工作示例。最初我使用的是“xData.responseXML”，但它会在调试器中显示为“未定义”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:09:25.190

看起来您正在将 xml 字符串传递给`$()`，这将导致 jQuery 将该 xml 字符串转换为 HTML。现代浏览器倾向于只允许它并使用“新” html 元素，而旧浏览器（IE6、7、8）会扼杀它们。

尝试使用

```
var xmlDoc = $.parseXML(xData.XML);
$(xmlDoc).find("z\\:row").each(... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T11:09:37.733

试试这个，

铬/火狐：

xml.children[0].childNodes[1].innerHTML

IE8+/Safari：

xml.childNodes[0].childNodes[1].textContent

IE8：

xml.documentElement.childNodes[1].text；

示例代码在这里，

var xml = $.parseXML(XMLDOC);

var xmlNodeValue = "";

if(userAgent.match("msie 8.0")){

xmlNodeValue = xml.children[0].childNodes[1].innerHTML;

}else{ // IE8+

xmlNodeValue = xml.childNodes[0].childNodes[1].textContent;

}

# perforce - 我如何列出自特定更改列表以来的 P4 更改

> ID：12056940
> 
> 赞同：17
> 
> 时间：2012-08-21T14:20:42.640
> 
> 标签：perforce

有没有办法在特定分支的特定更改列表之后获取更改列表列表？

```
p4 changes (some flag ?) (CL#) //depot/project 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-21T20:24:47.203

这可以使用以下语法来完成（假设您想查看自更改列表 12345 以来提交到此分支的所有更改）：

```
p4 changes //depot/project/...@12345,#head 
```

* * *

[要成功使用 Perforce，了解Perforce](http://www.perforce.com/perforce/r12.1/manuals/cmdref/o.fspecs.html)[文件规范](http://www.perforce.com/perforce/r12.1/manuals/cmdref/o.fspecs.html)或文件规范的复杂性至关重要。将其视为 Perforce 的查询语言。

例如，如果你想对两点之间的分支做*一些事情*，你需要一个类似于下面的文件规范：

*   `//depot/branches/branch_name/...@12345,#head`指定更改列表 12345 和 head/latest 之间的范围。

*   `//depot/branches/branch_name/...@12345,23456`指定更改列表 12345 和 23456 之间的范围。

*   `//depot/branches/branch_name/...@2012/08/01,@2012/08/21`指定两个日期之间的范围。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-21T16:25:19.383

```
p4 changes "//depot/project/...@>nnn" 
```

其中 nnn 是您的 CL#。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T12:28:41.873

如果您正在使用 Perforce 集成，并且需要获取下一个 CL 以进行集成（在您集成的最后一个 CL 之后的 CL，例如 @12345），请尝试以下操作：

```
p4 changes "//depot/branches/branch_name/...@>12345" | tail -1 | cut -d ' ' -f 2 
```

# ios - IOS - IB：在 UIViewcontroller 中使用 UITableView，请帮助我

> ID：12056947
> 
> 赞同：0
> 
> 时间：2012-08-21T14:20:53.530
> 
> 标签：ios, json, uitableview, uiviewcontroller, storyboard

我是新手IOS并使用IB，我在UIViewController中工作UITableView，我在viewcontroller和setdelegate中实现了“UITableViewDelegate，UITableViewDataSource”，uitableview的数据源，但它不起作用，我不知道，

请帮我！

感谢您阅读这篇文章。

代码 viewcontroller.h

```
@interface ViewController : UIViewController<UITableViewDelegate,
UITableViewDataSource> @property (nonatomic, retain) IBOutlet UITableView *tableView; 
```

代码视图控制器.m

```
- (void)viewDidLoad { [tableView setDataSource:self];
    [tableView setDelegate:self];
    dispatch_async(htvque, ^{
               NSData* data = [NSData dataWithContentsOfURL: listFilmByCate];
        NSError* error;
        jsonTable = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
        listDataTable = [jsonTable objectForKey:@"List"];
                dispatch_async(dispatch_get_main_queue(), ^{
                     [tableView reloadData];
        });
    });

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return listDataTable.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSDictionary *dataTable = [listDataTable objectAtIndex:indexPath.row];  
    NSData *receivedData = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[dataTable objectForKey:@"Thumbnail"]objectForKey:@"Url1"]]];    UIImage *image = [[[UIImage alloc] initWithData:receivedData] stretchableImageWithLeftCapWidth:50 topCapHeight:80];

    static NSString *simple_cell = @"simpleCell";

    CustomizeCell_Home *customize_cell = (CustomizeCell_Home *)[tableView dequeueReusableCellWithIdentifier:simple_cell];
    if (simple_cell == nil) 
    {}

    customize_cell.imageView.image = image;
    customize_cell.lbldescription.text =[dataTable objectForKey:@"LongDescription"];
    customize_cell.lblTitle.text =  [dataTable objectForKey:@"VName"];
    customize_cell.lblTitle.lineBreakMode = UILineBreakModeWordWrap | UILineBreakModeTailTruncation;
    customize_cell.lbldescription.lineBreakMode = UILineBreakModeWordWrap | UILineBreakModeTailTruncation;
    customize_cell.lbldescription.numberOfLines=4;
    customize_cell.contentView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bgtblRight.png"]];
    return customize_cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:28:59.137

在这行代码中是你的问题：

```
CustomizeCell_Home *customize_cell = (CustomizeCell_Home *)[tableView dequeueReusableCellWithIdentifier:simple_cell];
if (simple_cell == nil) 
{} 
```

如果`customize_cell`是会发生什么`nil`？

你没有实例化`customize_cell`并且因为你不能调用这些方法：

```
customize_cell.imageView.image = image;
customize_cell.lbldescription.text =[dataTable objectForKey:@"LongDescription"];
customize_cell.lblTitle.text =  [dataTable objectForKey:@"VName"];
customize_cell.lblTitle.lineBreakMode = UILineBreakModeWordWrap | UILineBreakModeTailTruncation;
customize_cell.lbldescription.lineBreakMode = UILineBreakModeWordWrap | UILineBreakModeTailTruncation;
customize_cell.lbldescription.numberOfLines=4;
customize_cell.contentView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bgtblRight.png"]];
return customize_cell; 
```

只需在 if 中添加一个简单的初始化单元格，如下所示：

```
if (customize_cell == nil) 
{
  customize_cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"AnIdentifierString"] autorelease];
} 
```

**编辑**

改变这个：

```
CustomizeCell_Home *customize_cell = (CustomizeCell_Home *)[tableView dequeueReusableCellWithIdentifier:simple_cell];
if (simple_cell == nil) 
{}

customize_cell.lbldescription.text =[dataTable objectForKey:@"LongDescription"];
customize_cell.lblTitle.text =  [dataTable objectForKey:@"VName"];
customize_cell.lblTitle.lineBreakMode = UILineBreakModeWordWrap | UILineBreakModeTailTruncation;
customize_cell.lbldescription.lineBreakMode = UILineBreakModeWordWrap | UILineBreakModeTailTruncation;
customize_cell.lbldescription.numberOfLines=4;
customize_cell.contentView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bgtblRight.png"]];
return customize_cell; 
```

至：

```
CustomizeCell_Home *customize_cell = (CustomizeCell_Home *)[tableView dequeueReusableCellWithIdentifier:simple_cell];
if (customize_cell == nil) 
{
  customize_cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"AnIdentifierString"] autorelease];
}

customize_cell.lbldescription.text =[dataTable objectForKey:@"LongDescription"];
customize_cell.lblTitle.text =  [dataTable objectForKey:@"VName"];
customize_cell.lblTitle.lineBreakMode = UILineBreakModeWordWrap | UILineBreakModeTailTruncation;
customize_cell.lbldescription.lineBreakMode = UILineBreakModeWordWrap | UILineBreakModeTailTruncation;
customize_cell.lbldescription.numberOfLines=4;
customize_cell.contentView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bgtblRight.png"]];
return customize_cell; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:44:39.960

放，

表视图。数据源 = 自我；
表视图。委托=自我；

实现被定向为**@required的****协议**意味着**强制**

 ****```
-(UITableViewCell*) tableView: (UITableView *) tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath 
{
    // dint concentrate on this part, hope u are right
    NSDictionary *dataTable = [listDataTable objectAtIndex:indexPath.row];  
    NSData *receivedData = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[dataTable objectForKey:@"Thumbnail"]objectForKey:@"Url1"]]];    
    UIImage *image = [[[UIImage alloc] initWithData:receivedData] stretchableImageWithLeftCapWidth:50 topCapHeight:80];

    static NSString *simple_cell = @"simpleCell";
    // works like double ended queue.... cells are re-used when available... so when cell is nil, u need to create
    CustomizeCell_Home *customize_cell = (CustomizeCell_Home *)[tableView dequeueReusableCellWithIdentifier:simple_cell];  
    if (simple_cell == nil) 
    {
         // CustomizeCell_Home is linked to CustomizeCell_Home_Reference using nib,
         [[NSBundle mainBundle] loadNibNamed: @"CustomizeCell_Home" owner: self options: nil];

         customize_cell = CustomizeCell_Home_Reference;
    }
    .....  
    .....  
    return customize_cell; 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T14:25:54.363

首先，永远不会分配单元，而不是执行 if(simple_cell==nil)，您应该执行 if(customize_cell==nil) 并在那里执行初始化代码。否则，您将比较刚刚创建的字符串并将值设置为与 nil。****

# jquery - 使用 jQuery 在悬停/退出时展开/缩小 div

> ID：12056950
> 
> 赞同：24
> 
> 时间：2012-08-21T14:21:04.857
> 
> 标签：jquery, html, hover, position

我正在寻找一个`jQuery`插件来扩展`div`元素，以便在悬停时显示它们的溢出（如果有的话）。插图：

![在此处输入图像描述](../Images/9769d3aeaaf819efbf9a8084cf00a04f.png)

该插件应该在相对定位`div`的 's 上工作（我猜这意味着您创建 的副本`div`，将其定位设置为绝对，然后找出放置它的位置）。

**那里有这样的插件吗？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-21T14:37:34.337

你不需要插件。只需添加适当的 css 并使用 jQuery 动画：

```
$div
.on('mouseenter', function(){
    $(this).animate({ margin: -10, width: "+=20", height: "+=20" });
})
.on('mouseleave', function(){
    $(this).animate({ margin: 0, width: "-=20", height: "-=20" });
})​ 
```

[演示在这里](http://jsfiddle.net/evJey/212)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-21T14:38:03.743

图像在这里丢失了......但这是我几年前完成的。基本理论是所有图像/ div 的任何东西都是绝对的，在它们自己的相对区域内。`left & top`然后我为这两个位置设置动画`-negatively`。这使得它们突出于周围的盒子之上，看起来就像它们正在弹出一样。（当然你还需要确保这个的 z-index 高于它周围的 z-index）。

[**jsFiddle 演示**](http://jsfiddle.net/tdsNF/1/)

```
$(".img a img").hover(function() {
    $(this).closest(".img").css("z-index", 1);

    // this is where the popping out effect happens
    $(this).animate({ height: "200", width: "200", left: "-=55", top: "-=55" }, "fast");

}, function() {
    $(this).closest(".img").css("z-index", 0);
    $(this).animate({ height: "90", width: "90", left: "+=55", top: "+=55" }, "fast");
});​ 
```

我对这两件事的风格是：

```
.img { 
   position:relative; 
   z-index:0px;  
}

.img a img { 
   position:absolute;
   border:1px #1b346c solid; 
   background:#f1f1f1; 
   width:90px; 
   height:90px; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-14T19:02:27.860

感谢@MarkPieszak。对于**动态创建的**元素，使用

```
$(document).on({
  mouseenter: function () {
    $(this).animate({ height: "200", width: "200", left: "-=55", top: "-=55" }, "fast");
  },
  mouseleave: function () {
    $(this).animate({ height: "90", width: "90", left: "+=55", top: "+=55" }, "fast");
  }    
}, '.img a img'); 
```

`.hover()`仅适用于静态元素。更多[在这里](https://stackoverflow.com/questions/22180546/jquery-hover-not-working-with-dynamic-elements)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T16:43:47.890

实际上，您可以完全使用 css 来完成此操作，这是我网站上的一个片段，我完全懒得编辑它，但您明白了：

```
<ul class="hover">
  <li style="margin-top:40px;"">
   <a href=""><img src="images/Home/Home.jpg" alt="home" style="width:130px; height:100px;"/>
   <img src="images/Home/Home.jpg" alt="home" class="preview" style="width:180px; height:150px;"/></a>
  </li>
  <li style="margin-left:55px; margin-top:-20px;">
   <a href=""><img src="images/About/About.jpg" alt="About The Author" style="width:200px; height:200px;"/>
   <img src="images/About/About.jpg" alt="About The Author" class="preview" style="width:250px; height:250px;"/></a>
  </li>
</ul> 
```

CSS：

```
/* begin hover */

.hover{
cursor: default;
list-style: none;
}

.hover a .preview{
display: none;
}

.hover a:hover .preview{
display: block;
position: absolute;
top: -33px;
left: -45px;
z-index: 1;
}

.hover img{
background: white;
border-color: black;
border-style: solid;
border-width: 4px;
color: inherit;
padding: 2px;
vertical-align: top;
-moz-border-radius: 15px;
border-radius: 15px;
}

.hover li{
background: black;
border-color: black;
border-style: solid;
border-width: 1px;
color: inherit;
display: block;
float: left;
margin: 3px;
padding: 5px;
position: relative;
}

.hover .preview{
border-color:black;
border-width:8px;
border-stle:solid;
}

li{
-moz-border-radius: 15px;
border-radius: 15px;
} 
```

那里有一些不需要的样式，但同样，你明白了。基本上你只是在原始图像上显示一张图像，悬停

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-27T02:24:33.687

如果是文字的话，就复杂一点了……

我这样使用它：

```
$('.floating').mouseenter(function(){
  const $this = $(this);
  const dimension = $this.data('dimension');
  const ratioEnlarged = 2;

  const tempElement = $this.clone();
  tempElement.appendTo('body');
  tempElement.css({
    width: dimension.width,
    height: dimension.height
  });

  if(tempElement.is(':offscreen')){
    // Change this to animate if you want it animated.
    $this.css({
      'margin-left': -dimension.width * ratioEnlarged/2,
      'margin-top': -dimension.height * ratioEnlarged/4,
      'font-size': ratioEnlarged + 'em',
      width: dimension.width * ratioEnlarged,
      height: dimension.height * ratioEnlarged
    });
  } else {
    $this.css({
      'margin-left': -dimension.width * ratioEnlarged/4,
      'margin-top': -dimension.height * ratioEnlarged/4,
      'font-size': ratioEnlarged + 'em',
      width: dimension.width * ratioEnlarged,
      height: dimension.height * ratioEnlarged
    });
  }

  tempElement.remove();
});

$('.floating').mouseleave(function(event) {
  const $this = $(this);
  const dimension = $this.data('dimension');

  if(!$this.hasClass('context-menu-active')){
    $this.css({
      margin: 0,
      'font-size': '1em',
      width: dimension.width,
      height: dimension.height
    });
  }
}); 
```

# delphi - 在 Delphi XE 中使用 Indy IdHttp Digest 身份验证的 401

> ID：12056951
> 
> 赞同：2
> 
> 时间：2012-08-21T14:21:09.567
> 
> 标签：delphi, indy, digest-authentication

尝试使用 Digest 对合作伙伴的使用 Delphi XE 的 Web 服务执行 get()。

我已将`IdAuthenticationDigest`uses 子句包含在我所阅读的内容中，该子句应该会自动起作用-但我一定遗漏了一些东西，因为我得到了401 Unauthorized。

代码：

```
begin
  // Init request:   
  IdHttp := TIdHttp.Create(nil);
  try
    idHttp.Request.ContentType := self.inputType; // 'application/xml'
    idHttp.Request.Accept := self.outputType; //'application/json';

    // Set request method:
    idHttp.Request.Method := Method; // 'Get'
    // Set username and password:
    idHttp.Request.BasicAuthentication := False;
    // IdHttp.Request.Username/Password also fails
    IdHttp.Request.Authentication.Username := 'xx';
    IdHttp.Request.Authentication.password := 'xx';

    IdHttp.Request.ContentLength := Length(Body);

    // Send request:
    if Method = 'GET' then
      Result := idHttp.Get(self.ServiceHost + URI)
    else
    if Method = 'POST' then
      Result := idHttp.Post(self.ServiceHost + URI, SendStream);

   finally
    idHttp.Free;
   end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T16:23:29.170

您需要设置`Request.Username`and`Request.Password`属性而不是使用该`Request.Authentication`属性。此外，根本不要设置`Request.Method`or`Request.ContentLength`属性。所有这三个属性都由`TIdHTTP`内部管理。

```
 // Init request:   
  IdHttp := TIdHttp.Create(nil);
  try
    idHttp.Request.ContentType := self.inputType; // 'application/xml'
    idHttp.Request.Accept := self.outputType; //'application/json';

    // Set username and password:
    idHttp.Request.BasicAuthentication := False;
    IdHttp.Request.Username := 'xx';
    IdHttp.Request.Password := 'xx';

    // Send request:
    if Method = 'GET' then
      Result := IdHttp.Get(self.ServiceHost + URI)
    else
    if Method = 'POST' then
      Result := IdHttp.Post(self.ServiceHost + URI, SendStream);
   finally
    IdHttp.Free;
   end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T21:53:07.023

添加类似这样的 OnAuthorization 事件：

```
procedure TForm1.IdHTTP1Authorization(Sender: TObject;
  Authentication: TIdAuthentication; var Handled: Boolean);
begin
Authentication.Username:='user';
Authentication.Password:='passs'; 
if Authentication is TIdDigestAuthentication then
  begin
    showmessage('onAuthorization: '+Authentication.Authentication);
    TIdDigestAuthentication(IdHTTP1.Request.Authentication).Uri:=IdHTTP1.Request.URL;
    TIdDigestAuthentication(Authentication).Method := 'GET';
  end;
Handled:=true;
end; 
```

有时 indy 会遗漏一些必要的信息。就我而言，我正在连接到 Tomcat 服务器，但这需要在发送摘要参数身份验证信息时使用 Get 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-06T15:07:35.793

在执行 GET 之前，您还需要设置*hoInProcessAuth*标志。

```
idHttp.HTTPOptions := idHttp.HTTPOptions + [hoInProcessAuth]; 
```

# java - Mysql数据库更新字段时出错

> ID：12056952
> 
> 赞同：1
> 
> 时间：2012-08-21T14:21:10.347
> 
> 标签：java, mysql, database, swing

我正在使用 Java Swing 应用程序来更新 Mysql 表中的列。这是我的代码（部分）

```
String qunty = txtWithdraw.getText();
String partno = txtNo.getText();
int qty = Integer.parseInt(qunty);
con = DriverManager.getConnection(url + db, "username", "password");
        Statement st = con.createStatement();
String sell = "update Store_info_table set qnty_received = qnty_received - " + qty +      "where Part_number = '" + partno + "'";
                st.executeUpdate(sell); 
```

我得到的例外是：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Part_number = 'DF6534'' at line 1 
```

我想更新 qnty_received 字段，使其等于原始值减去用户传递的值，即（int qty）。我犯了什么错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T14:22:49.583

在 where 之前添加一个空格：

```
 " where Part_number = '" + partno + "'"; 
```

作为一个好的做法，我建议您使用`PreparedStatement`和设置相同的参数。动态连接参数可能会强制数据库引擎每次都解析一个新的 SQL 语句。

> SQL 语句被预编译并存储在 PreparedStatement 对象中。然后可以使用该对象多次有效地执行该语句。

请参阅：[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T14:22:51.563

缺少空间：

```
... + qty +      "where ...
                  ^--- here 
```

这使您的查询类似于

```
... qnty_received - blahwhere 
```

# c# - 如何使用 selenium webdriver 获取此 div 标签？

> ID：12056956
> 
> 赞同：1
> 
> 时间：2012-08-21T14:21:20.940
> 
> 标签：c#, selenium, selenium-webdriver

```
<div id="ctl00_ContentHolder_vs_ValidationSummary" class="errorblock">
    <p><strong>The following errors were found:</strong></p>
    <ul><input type="hidden" Name="SummaryErrorCmsIds" Value="E024|E012|E014" />
        <li>Please select a title.</li>
        <li>Please key in your first name.</li>
        <li>Please key in your last name.</li>
    </ul>
</div> 
```

我想捕获值为 E024 E012 和 E014 的文本并将其写入 Excel 文件。

我尝试了以下但它不起作用。

```
string val1 = driver.FindElement(By.XPath("//div[contains(@class, 'errorblock'/ value = 'E024|E012|E014'")).Text; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:26:11.943

在java中 -

```
String x = driver.findElement(By.name("SummaryErrorCmsIds")).getAttribute("Value")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-04T09:07:50.460

更好的方法是使用 XPATH

```
 driver.FindElement(By.XPath("...\li")).Text; (OR)

 driver.FindElement(By.XPath("...\li")).GetAttribute("value"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T15:37:33.167

尝试这个：

```
 var div = driver.FindElement(By.XPath("//div[contains(@id, 'ValidationSummary')]"));
    var targetElement = div.FindElement(By.XPath("//ul[contains(@name, 'SummaryErrorCmsIds')]"));
// or var targetElement = div.FindElement(By.TagName("input")) 
```

然后从这个元素中获取你需要的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T23:38:24.397

您的问题是您选择了错误的元素。我不知道您的 html 是什么样的，但请尝试查看 FindElements 并尝试通过“li”进行查找

看这里：[使用 Selenium 2 的 IWebDriver 与页面上的元素进行交互](https://stackoverflow.com/questions/4657465/using-selenium-2s-iwebdriver-to-interact-with-elements-on-the-page)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T11:06:03.607

IN C# it should be as follows.

```
String var1= driver.FindElement(By.XPath("//div[contains(@id, 'ValidationSummary')]")).Text; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T10:45:50.633

我不确定这是否是您的意思，但我的示例解决方案是：

```
WebElement element = driver.findElement(By.className("errorblock")).findElement(By.tagName("ul"));
List<WebElement> values = element.findElements(By.tagName("li"))

for (WebElement value : values)
{
   String valueString = value.getText();
   //write to excel or whatever
} 
```

# python - 在 python 中的 sqlite3 中搜索时“没有这样的列”

> ID：12056961
> 
> 赞同：2
> 
> 时间：2012-08-21T14:21:37.073
> 
> 标签：python, sqlite

我的表“info”有 4 列：bp、key、exp 和 job。我正在尝试创建一个在指定列中搜索术语的函数：

*编辑：不同的问题，请参阅下面的第二个代码和第二个错误*

```
def search2(query, field):

    search_string = query    

    if field == "bp":
        cursor.execute("SELECT * FROM info WHERE bp="+search_string)
    elif field == "key":
        cursor.execute("SELECT * FROM info WHERE key="+search_string)
    elif field == "exp":
        cursor.execute("SELECT * FROM info WHERE exp="+search_string)
    elif field == "job":
        cursor.execute("SELECT * FROM info WHERE job="+search_string) 
```

但是，这会引发错误，“test”作为搜索字符串，“bp”作为列：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Users\user\Programs\time_database.py", line 32, in search2
    cursor.execute("SELECT * FROM info WHERE bp="+search_string)
sqlite3.OperationalError: no such column: test 
```

顺便说一句，“测试”并不是一个专栏。我希望它是与指定列*匹配的搜索字符串...*

*编辑*

感谢 Martijn Pieters，但现在又出现了另一个错误。我现在的代码是：

```
def search2(query, field):

    search_string = query    

    if field == "bp":
        cursor.execute("SELECT * FROM info WHERE job=?", search_string)
    elif field == "key":
        cursor.execute("SELECT * FROM info WHERE key="+search_string)
    elif field == "exp":
        cursor.execute("SELECT * FROM info WHERE exp="+search_string)
    elif field == "job":
        cursor.execute("SELECT * FROM info WHERE job="+search_string) 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Users\gummi\Programs\time_database.py", line 32, in search2
    cursor.execute("SELECT * FROM info WHERE job=?", search_string)
sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement         uses 1, and there are 4 supplied. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:23:29.433

您没有引用搜索字符串，而是数据库将其解释为列名。

使用查询参数，这些参数会自动引用您的搜索字符串：

```
cursor.execute("SELECT * FROM info WHERE job=?", search_string) 
```

接下来，如果`field`（列）值不是来自不受信任的来源（例如网页），您可以将其直接插入到查询中：

```
cursor.execute("SELECT * FROM info WHERE %s=?" % field, (search_string,)) 
```

现在您不再需要所有分支。

如果该`field`值*确实*来自不受信任的来源，最简单的方法就是测试它是否是允许的值：

```
def search2(query, field):
    if field not in set(['bp', 'key', 'exp', 'job']):
        raise ValueError('No such column ' + field)    
    cursor.execute("SELECT * FROM info WHERE %s=?" % field, (query,)) 
```

# .net - 从接口映射时使 AutoMapper 识别具体类型

> ID：12056962
> 
> 赞同：1
> 
> 时间：2012-08-21T14:21:37.617
> 
> 标签：.net, automapper

我有这样的映射

```
Mapper.CreateMap<ISomething, ISomethingDto>(); 
```

我想将 AutoMapper 配置为根据源的具体类型构造某些具体类型，而不是生成代理。例如，我可能有

```
class SomethingSpecial : ISomething {...} 
```

和

```
class SomethingSpecialDto : ISomethingDto{...} 
```

当我打电话

```
Mapper.Map<ISomething, ISomethingDto>(aSomethingSpecial); 
```

我想收到SomethingSpecialDto 的实例，但没有代理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:45:19.620

我最终实现了一个`ITypeConverter`，它检查具体类型`ResolutionContext.SourceValue`并返回正确的映射类型。这行得通，但并不比完全不使用 AutoMapper 实现映射好多少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:29:44.960

`SomethingSpecial`和之间没有联系`SomethingSpecialDto`。
你只需要映射那些具体的类：

```
Mapper.CreateMap<SomethingSpecial, SomethingSpecialDto>(); 
Mapper.CreateMap<SomethingNormal, SomethingNormalDto>(); 
// ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T14:44:40.887

听起来您的对象和 DTO 之间是 1:1 的，因此无需针对接口创建映射。

```
Mapper.CreateMap<SomethingSpecial, SomethingSpecialDto>(); 
```

如果您在映射阶段处理接口，诀窍是将类型作为参数传递给映射调用：

```
public ISomethingDto DoMap(ISomething something)
{
   return (ISomethingDto) Mapper.Map(something, something.GetType(), typeof(SomethingSpecialDto));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T19:42:00.670

这是我目前正在做的事情：

```
Mapper.CreateMap<IAlpha, IAlpha>();

Mapper.Map<IAlpha, IAlpha>(alphaDAO, new AlphaDTO()); 
```

只要属性匹配，这*应该适用于两个不同的接口，但我无法通过实际测试来支持它。*

我不确定你是否想让 AutoMapper 知道要自动创建哪个对象，但我觉得这可能不是一个选择。至少，它需要在 CreateMap 方法中有一个额外的参数，该参数采用您希望它在遇到给定 Map 时实例化的具体类型，但它的限制太大了。最后，最好将两个具体类相互映射。即使你映射到 AlphaDTO 类型，你仍然可以返回 IAlpha。

# actionscript-3 - 如何从闪存中删除亚马逊 s3 对象？

> ID：12056967
> 
> 赞同：0
> 
> 时间：2012-08-21T14:22:00.303
> 
> 标签：actionscript-3, flash, amazon-s3

根据 Amazon S3 REST API 删除对象需要 DELETE 请求，例如

```
DELETE /myobject.txt
Host: bucket.s3.amazonaws.com
...
Authorization: <auth> 
```

但是 Flash 中的 URLRequest.method 字段只能设置为 GET 或 POST，所以我无法创建这样的请求。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:43:07.927

Check out the [as3httpclient](https://github.com/gabriel/as3httpclient "as3httpclient") lib, it makes DELETE requests available

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:32:23.367

是否可以向您的服务器发出 POST 请求，然后从 php 向亚马逊发出 DELETE 请求？

# c# - C# DynamicObject 类方法

> ID：12056971
> 
> 赞同：1
> 
> 时间：2012-08-21T14:22:11.037
> 
> 标签：c#, dynamicobject

是否有一种简单的方法可以为 DynamicObject 或 ExpandoObject 的子类创建类方法？

回归反思是唯一的方法吗？

我的意思是：-

```
class Animal : DynamicObject {
}

class Bird : Animal {
}

class Dog : Animal {
}

Bird.Fly = new Action (()=>Console.Write("Yes I can")); 
```

在这种情况下，Bird.Fly 应用于 Bird 类而不是任何特定实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:08:07.540

不，没有动态类范围的方法。您可以做的最接近的事情是在子类上静态声明一个动态单例。

```
class Bird : Animal {
    public static readonly dynamic Shared = new ExpandoObject();

}

Bird.Shared.Fly = new Action (()=>Console.Write("Yes I can")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:44:02.187

```
 public class Animal : DynamicObject
    {
        Dictionary<string, object> dictionary = new Dictionary<string, object>();

        public override bool TryGetMember(
        GetMemberBinder binder, out object result)
        {
            string name = binder.Name.ToLower();
            return dictionary.TryGetValue(name, out result);
        }

        public override bool TrySetMember(SetMemberBinder binder, object value)
        {
            dictionary[binder.Name.ToLower()] = value;
            return true;
        }
    }
    public class Bird : Animal
    {

    } 
```

然后将其称为您的示例：

```
dynamic obj = new Bird();
            obj.Fly = new Action(() => Console.Write("Yes I can"));

            obj.Fly(); 
```

有关更多信息，请查看[DynamicObject](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)

# c# - 文件流创建

> ID：12056976
> 
> 赞同：14
> 
> 时间：2012-08-21T14:22:25.977
> 
> 标签：c#, filestream

这是语法吗

```
 FileStream fs = new FileStream(strFilePath, FileMode.Create); 
```

和这个一样吗？

```
FileStream fs = File.Create(strFilePath); 
```

如果是，哪个更好？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T14:26:55.860

根据 JustDecompile 的说法，这确实很重要，因为`File.Create`最终会调用：

```
new FileStream(path, 
               FileMode.Create, 
               FileAccess.ReadWrite, 
               FileShare.None, 
               bufferSize, 
               options); 
```

使用`bufferSize`4096（默认）和`FileOptions.None`（也与 FileStream 构造函数相同），但`FileShare`标志不同：FileStream 构造函数使用`FileShare.Read`.

`File.Create(string)`所以我说：如果您不关心其他选项，请选择可读性和使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-21T14:27:35.303

在我看来，我使用这个：

```
using (FileStream fs = new FileStream(strFilePath, FileMode.Create))
{    
    fs.Write("anything");
    fs.Flush();
} 
```

他们基本上做同样的事情，但是这个创建文件并以创建/写入模式打开它，您可以设置缓冲区大小和所有参数。

```
new FileStream(path, FileMode.Create, FileAccess.ReadWrite, FileShare.None, bufferSize, options); 
```

使用 File.Create 它包装了所有这些默认缓冲区和参数。使用我的 new FileStream(strFilePath, FileMode.Create); 您将获得更好的灵活性和管理方式；但在这一点上，如果您想要更多的可读性或管理选项，它更多的是个人选择！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T14:32:10.557

第二个对流使用不同的 FileMode：看看这篇文章

[http://msdn.microsoft.com/en-us/library/47ek66wy.aspx](http://msdn.microsoft.com/en-us/library/47ek66wy.aspx)

管理此方法的默认值！

但是使用一个`using`语句，所以任何资源都会以正确的方式释放！

```
using (FileStream fs = new FileStream(strFilePath, FileMode.Create))
{
    // HERE WHAT YOU WANT TO DO!
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T14:28:13.647

他们做同样的事情。唯一真正的区别是，如果您愿意，前者可以让您在运行时使用不同的 FileMode（使用变量控制它），而后者只会执行 Create 操作。

附带说明一下，约定是在 using 块中处理诸如文件流之类的事情，以便在超出范围时自动处理它们。

```
using (var fs = new FileStream(strFilePath, FileMode.Create))
{
    //do some stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T14:27:32.513

第一个使用共享读取访问权限创建或覆盖文件，第二个使用无。因此，这取决于您是否要允许在处理文件时授予访问权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T14:29:56.890

对于第一个，您有更多的选项可以做：句柄、文件访问、文件模式、int 缓冲区大小，....但是对于第二个，您可以做的选择更少。

# python - pip install 不安装存储库的一部分

> ID：12056977
> 
> 赞同：0
> 
> 时间：2012-08-21T14:22:27.617
> 
> 标签：python, django, pip

我在尝试安装[django-bleach](http://pypi.python.org/pypi/django-bleach)时遇到了问题（同样：[django-html_sanitizer 0.1.2](http://pypi.python.org/pypi/django-html_sanitizer/)也有同样的问题）。我尝试了几种从我的requirement.txt安装它的方法：（
`django-bleach`
`django-bleach==0.1.2`这是我写它时的最新版本）
`git+https://bitbucket.org/ionata/django-bleach.git@5bdae1b0bd86#egg=django_bleach`

所有这些方法都不起作用：该目录`/templatetags`未安装在我的虚拟环境中（`site-packages/django_bleach`）。

知道该怎么做吗？（我不想从存储库中复制文件，它不会轻易部署）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:40:19.400

您应该将包 django_bleach.templatetags 添加到包中

```
packages=[
    'django_bleach',
    'django_bleach.templatetags',
] 
```

package_data 适用于非 python 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:22:27.617

好的，我刚刚找到了一个解决方案：
`setup.py`未配置为考虑文件夹/templatetags。

只需在 , 中添加:`setup.py`行，它看起来像这样（感谢 frog32 ！）：`packages=['django_bleach']``'django_bleach.templatetags'`

```
 ...
    packages=[
        'django_bleach',
        'django_bleach.templatetags'
    ],
    ... 
```

如果包不是你的（比如我的情况），你需要分叉它（通常在 Bitbucket 或 GitHub 上），`setup.py`在你的存储库中更改。如果您使用 Pip，您应该配置您`requirement.txt`从您的存储库获取包，这里我的示例是：

```
 (other packages)
    ...
    django-bleach
    ... 
```

变成：

```
 ...
    git+https://sebastien_worms@bitbucket.org/sebastien_worms/django-bleach.git
    ... 
```

就我而言，我只需要跑步就可以`pip install -r requirement.txt`了！

# javascript - 在 Javascript 中查找子字符串并添加/添加一些字符

> ID：12056982
> 
> 赞同：4
> 
> 时间：2012-08-21T14:22:44.797
> 
> 标签：javascript, regex, string

想象一下，我有以下多行 Javascript 字符串：

> 学校
> 
> 苹果
> 
> ~胡萝卜
> 
> 狗

我想取任何以“~”开头的行并将其替换为“#(contents of line)#”。所以在这个例子中，我想找到“~carrot”并将其替换为“#carrot#”。

我正在尝试使用正则表达式提出解决方案，但无法找到用修改后的版本（带有前置/附加字符）替换某些匹配字符串的方法。

任何帮助将不胜感激，希望一个例子能打开灯泡......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T14:26:53.353

`thestring.replace(/~(\w+)/g, "#$1#");`

括号“捕获”单词 ( `\w+`)，`$1`结果中的 引用捕获的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T14:27:43.807

这真的很容易。假设您在 OldString 中有您的字符串

```
var OldString = "school apple  ~carrot dog";

var myNewString = OldString.replace(/~carrot/, "#carrot#");

document.write("Old string =  " + OldString); 
document.write("<br />New string = " + myNewString); 
```

希望能帮助到你

# r - 多组密度图

> ID：12056989
> 
> 赞同：4
> 
> 时间：2012-08-21T14:23:07.510
> 
> 标签：r, ggplot2, kernel-density

在对包使用多重插补后，我试图产生类似于`densityplot()`from 的东西。这是一个可重现的示例：`lattice package``ggplot2``mice`

```
require(mice)
dt <- nhanes
impute <- mice(dt, seed = 23109)
x11()
densityplot(impute) 
```

产生：

![我想在 ggplot 中改进的密度图输出](../Images/826d2e17f6e581e6d25fc9bbbaf87c27.png)

我想对输出有更多的控制（我也用它作为 ggplot 的学习练习）。所以，对于`bmi`变量，我尝试了这个：

```
bar <- NULL
for (i in 1:impute$m) {
    foo <- complete(impute,i)
    foo$imp <- rep(i,nrow(foo))
    foo$col <- rep("#000000",nrow(foo))
    bar <- rbind(bar,foo)
}

imp <-rep(0,nrow(impute$data))
col <- rep("#D55E00", nrow(impute$data))
bar <- rbind(bar,cbind(impute$data,imp,col))
bar$imp <- as.factor(bar$imp)

x11()
ggplot(bar, aes(x=bmi, group=imp, colour=col)) + geom_density()
+ scale_fill_manual(labels=c("Observed", "Imputed")) 
```

产生这个： ![在此处输入图像描述](../Images/c87bf9575b8697dd4881dbe6be9b697a.png)

所以它有几个问题：

1.  颜色不对。看来我控制颜色的尝试完全错误/被忽略了
2.  有不需要的水平线和垂直线
3.  我希望图例显示 Imputed 和 Observed 但我的代码给出了错误`invalid argument to unary operator`

此外，要完成一条线完成的工作似乎需要做很多工作`densityplot(impute)`- 所以我想知道我是否可能完全以错误的方式去做这件事？

**编辑**：我应该添加第四个问题，正如@ROLO 所指出的：

.4\. 地块的范围似乎不正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:22:53.177

使用 ggplot2 更复杂的原因是您使用`densityplot`的是 mouse 包（`mice::densityplot.mids`准确地说 - 查看它的代码），而不是来自 lattice 本身。此函数具有从内置绘制`mids`结果类的所有功能。如果您尝试使用相同的方法，您会发现它至少与使用 ggplot2 一样多。`mice``lattice::densityplot`

但事不宜迟，以下是使用 ggplot2 的方法：

```
require(reshape2)
# Obtain the imputed data, together with the original data
imp <- complete(impute,"long", include=TRUE)
# Melt into long format
imp <- melt(imp, c(".imp",".id","age"))
# Add a variable for the plot legend
imp$Imputed<-ifelse(imp$".imp"==0,"Observed","Imputed")

# Plot. Be sure to use stat_density instead of geom_density in order
#  to prevent what you call "unwanted horizontal and vertical lines"
ggplot(imp, aes(x=value, group=.imp, colour=Imputed)) + 
    stat_density(geom = "path",position = "identity") +
    facet_wrap(~variable, ncol=2, scales="free") 
```

![在此处输入图像描述](../Images/6a8d37d9918f7a83b8cc619b321b52b8.png)

但正如您所见，这些图的范围小于`densityplot`. 此行为应由参数`trim`of控制`stat_density`，但这似乎不起作用。修复代码后，`stat_density`我得到了以下情节：

![在此处输入图像描述](../Images/2f1036830a91c1261199969a5f591ebc.png)

`densityplot`仍然与原版不完全相同，但更接近。

编辑：要真正修复，我们需要等待 ggplot2 的下一个主要版本，请参阅[github](https://github.com/hadley/ggplot2/issues/652)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T15:05:06.817

你可以让 Hadley 为这个 mids 类添加一个强化方法。例如

```
fortify.mids <- function(x){
 imps <- do.call(rbind, lapply(seq_len(x$m), function(i){
   data.frame(complete(x, i), Imputation = i, Imputed = "Imputed")
 }))
 orig <- cbind(x$data, Imputation = NA, Imputed = "Observed")
 rbind(imps, orig)
} 
```

ggplot 在绘图之前“强化”非 data.frame 对象

```
ggplot(fortify.mids(impute), aes(x = bmi, colour = Imputed, 
   group = Imputation)) +
geom_density() + 
scale_colour_manual(values = c(Imputed = "#000000", Observed = "#D55E00")) 
```

请注意，每个都以“+”结尾。否则命令应该是完整的。这就是传说没有改变的原因。以“+”开头的行导致错误。

![在此处输入图像描述](../Images/5a00a12ca6dcaa89902555997c07536e.png)

您可以融合 fortify.mids 的结果以在一张图中绘制所有变量

```
library(reshape)
Molten <- melt(fortify.mids(impute), id.vars = c("Imputation", "Imputed"))
ggplot(Molten, aes(x = value, colour = Imputed, group = Imputation)) + 
geom_density() + 
scale_colour_manual(values = c(Imputed = "#000000", Observed = "#D55E00")) +
facet_wrap(~variable, scales = "free") 
```

![在此处输入图像描述](../Images/394aaf8d227b490de2380865e3bd4d0e.png)

# java - 将关闭挂钩设置为非守护程序

> ID：12056991
> 
> 赞同：3
> 
> 时间：2012-08-21T14:23:07.747
> 
> 标签：java, multithreading, shutdown

当我的 java 应用程序关闭时 - 我的关闭挂钩直到最后都没有完全运行。
在java [doc](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)中它提到

> 关闭钩子也应该快速完成它们的工作......

（请参阅文档），因为它会快速关闭应用程序。
我想尝试解决它（也许将其设置为非守护线程）

所以我首先尝试使用一个简单的应用程序来重建它。
我使用添加钩子

```
 Runtime.getRuntime().addShutdownHook(new Thread(){
        @Override public void run() {
            for (int i = 0; i < 1000000; i++) {
                System.out.println(i);
            }

        }
    }); 
```

我扔了一个

```
 System.exit(1); 
```

在此示例中，关闭过程一直计数到结束，没有问题。（所以没有重建）

如何在我的应用程序中修复它？
我怎样才能重建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:27:30.530

javadoc 给出了建议。如果 JVM 出现故障，你的钩子不应该运行几分钟来做各种事情。它们旨在在程序之后进行清理。

钩子线程被启动，然后`join()`在它们上被调用，因此 JVM在停止之前*总是*等待它们完成。这是来自的代码`ApplicationShutdownHooks.runHooks()`：

```
static void runHooks() {
    ...
    for (Thread hook : threads) {
        hook.start();
    }
    for (Thread hook : threads) {
        hook.join();
    }
} 
```

这就是说，如果您调用`System.exit(1);`，JVM 将立即退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:38:22.683

您是否在容器中运行您的应用程序？启动停止/关闭后，容器可能会在超时后终止 JVM。正常情况下，shutdown hook 应该全部结束，这样会延迟 JVM 的关闭时间，但*在极少数情况下，虚拟机可能会中止，即在没有干净关闭的情况下停止运行。当虚拟机在外部终止时会发生这种情况，例如在 Unix 上使用 SIGKILL 信号或在 Microsoft Windows 上使用 TerminateProcess 调用。如果本地方法出错，例如破坏内部数据结构或尝试访问不存在的内存，虚拟机也可能中止。如果虚拟机中止，则无法保证是否会运行任何关闭挂钩。*

# wpf - XAML 链接到窗口部分

> ID：12056992
> 
> 赞同：0
> 
> 时间：2012-08-21T14:23:12.147
> 
> 标签：wpf, xaml

在 XAML 中，我如何设置超链接以将用户带到我的窗口的特定部分。就像您如何在 HTML 中使用锚标记一样。基本上，我们希望用户能够点击错误列表中的错误，然后链接会将他们带到该区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:49:30.083

XAML Hyperlink NavigateUri 可以使用一些代码，即

```
<Window x:Class="fwAnchorInWindow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <StackPanel>
        <TextBox x:Name="TextBoxName" Text="Enter Name"/>
        <TextBox x:Name="TextBoxNumber" Text="Enter Number"/>
        <TextBlock>
          <Hyperlink NavigateUri="TextBoxName" RequestNavigate="Hyperlink_RequestNavigate">
              There is a name error.
          </Hyperlink>
        </TextBlock>
    </StackPanel>
</Window>

using System.Windows;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Navigation;
namespace fwAnchorInWindow
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Hyperlink_RequestNavigate(object sender, RequestNavigateEventArgs e)
        {
            if (sender is Hyperlink)
            {
                string controlName = ((Hyperlink)sender).NavigateUri.ToString();
                IInputElement control = (IInputElement)this.FindName(controlName);
                Keyboard.Focus(control);
            }
        }
    }
} 
```

FindName 只是查找子控件的一种方法。这篇文章还有其他方法：[WPF 方法来查找控件](https://stackoverflow.com/questions/636383/wpf-ways-to-find-controls)。

同样重要的是要注意 WPF 区分 Logical Focus 和 Keybaord Focus：[Mark Smith 的 It's Bascially Focus](http://julmar.com/blog/mark/?p=52)。在上面的代码中，键盘焦点自动表示逻辑焦点。

# postgresql - 在 PostgreSQL 数据库上启用 FIPS

> ID：12056994
> 
> 赞同：6
> 
> 时间：2012-08-21T14:23:14.427
> 
> 标签：postgresql, openssl, fips

有人可以指定在 Postgres 数据库上启用 FIPS 的步骤吗？我用谷歌搜索，但找不到任何具体的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-15T12:50:11.913

> 有人可以指定在 Postgres 数据库上启用 FIPS 的步骤吗？

我不相信您可以在“FIPS 模式”下运行 Postgres，因为它使用了未经批准的密码学。从过去的审计中，我知道它广泛使用了 MD5（例如，请参阅[Postgres 邮件列表：使用 MD5](http://www.postgresql.org/message-id/CAH8yC8ksq5zjU7O7e5kCN0JVmeP+PgeUpY-OutjaJ1Gd5ec5yw@mail.gmail.com)。所以很多东西在实践中都会被打破。

尽管如此，以下是尝试通过 OpenSSL 执行此操作的步骤。分为三个部分，因为 Postgres 不支持 FIPS，您需要对 Postgres 进行一些修改。

* * *

**第一步**

您必须为配置构建 OpenSSL。这是一个两步过程。首先构建 FIPS 对象模块；其次，构建 FIPS 能力库。

要构建 FIPS 对象模块，首先下载 `openssl-fips-2.nntar.gz。解压后执行：

```
./configure
make
sudo make install 
```

运行上述命令后，`fipscanister`将位于`/usr/local/ssl/fips-2.0`. FIPS Capable Library 将使用它来提供 FIPS 验证加密。

其次，你下载`openssl-1.n.n.tar.gz`. 解压后执行：

```
./configure fips shared <other options>
make all
sudo make install 
```

关键部分是`fips`配置期间的选项。

运行上述命令后，您将拥有一个 FIPS 功能库。图书馆将位于`/usr/local/ssl/lib`. 一如既往地`libcrypto.so`使用。`libssl.so`

FIPS Capable Library 使用 . `fipscanister`，因此您无需担心`/usr/local/ssl/fips-2.0`. 它只是构建 FIPS 对象模块的工件（有些人放弃）。

**第二步**

查找 Postgres 调用的位置`SSL_library_init`：

```
$ grep -R SSL_library_init *
...
src/backend/libpq/be-secure.c:      SSL_library_init();
src/interfaces/libpq/fe-secure.c:           SSL_library_init(); 
```

打开`be-secure.c`and `fe-secure.c`，然后添加对 的调用`FIPS_mode_set`。

```
/* be-secure.c, near line 725 */
static void
initialize_SSL(void)
{
    struct stat buf;

    STACK_OF(X509_NAME) *root_cert_list = NULL;

#if defined(OPENSSL_FIPS)
    int rc;
    rc = FIPS_mode();
    if(rc == 0)
    {
        rc = FIPS_mode_set(1);
        assert(1 == rc);
    }
#endif

    if (!SSL_context)
    {
#if SSLEAY_VERSION_NUMBER >= 0x0907000L
        OPENSSL_config(NULL);
#endif
        SSL_library_init();
        SSL_load_error_strings();
        ...
    }
    ...
} 
```

如果调用`FIPS_mode_set`成功，那么您将使用 FIPS 验证加密。如果失败，您仍将使用 OpenSSL 的加密，但它*不会*是 FIPS 验证的加密。

您还需要将以下标题添加到`be-secure.c`and `fe-secure.c`：

```
#include <openssl/opensslconf.h>
#include <openssl/fips.h> 
```

**第三步**

最后一步是确保您从第一步开始使用 FIPS 功能库。通过`CFLAGS`和做到这一点`LDFLAGS`：

```
cd postgres-9.3.2
export CFLAGS="-I/usr/local/ssl/include"
export LDFLAGS="-L/usr/local/ssl/lib"

./config --with-openssl <other options>
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-16T16:00:02.807

对于 Red Hat Linux 上的 PostgreSQL，[https:](https://public.cyber.mil/stigs/downloads/) //public.cyber.mil/stigs/downloads/ 网站有一个 PostgreSQL 9.x 的安全技术实施指南，其中包含此检查。

```
Rule Title: PostgreSQL must implement NIST FIPS 140-2 validated 
cryptographic modules to protect unclassified information requiring
confidentiality and cryptographic protection, in accordance with the data
owners requirements.
STIG ID:    PGS9-00-008200
Rule ID:    SV-87645r1_rule
Vuln ID:    V-72993 
```

“修复文本”内容为

```
Configure OpenSSL to be FIPS compliant. 

PostgreSQL uses OpenSSL for cryptographic modules. To configure OpenSSL to
be FIPS 140-2 compliant, see the official RHEL Documentation: 
```

[https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Security_Guide/sect-Security_Guide-Federal_Standards_And_Regulations-Federal_Information_Processing_Standard.html](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Security_Guide/sect-Security_Guide-Federal_Standards_And_Regulations-Federal_Information_Processing_Standard.html)

```
For more information on configuring PostgreSQL to use SSL, see supplementary
content APPENDIX-G. 
```

Joseph Conway 指出“STIG 所指的附录 G 位于 PostgreSQL STIG 补充文件中，而不是 [postgresql.org] 文档。您可以在此处获取补充文件（以及 STIG 的其余部分）：[https://dl.dod .cyber.mil/wp-content/uploads/stigs/zip/U_PGS_SQL_9-x_V2R1_STIG.zip](https://dl.dod.cyber.mil/wp-content/uploads/stigs/zip/U_PGS_SQL_9-x_V2R1_STIG.zip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T07:37:43.710

据我了解您的问题，您正在考虑尝试确保您可以使用 AES 算法加密传入和传出 PostgreSQL 的数据。虽然 FIPS 远远超出了这一点，也远远超出了问答中可以提出的问题，但至少这个问题很容易回答。

简单的解决方案是将 SSL 与您选择的证书颁发机构一起使用（如果您使用的是 Active Directory，则可以使用证书服务器，否则您可以使用 OpenSSL 来运行自己的证书颁发机构）。然后，您可以指定要使用的加密标准（请参阅[官方文档](http://www.postgresql.org/docs/9.1/static/ssl-tcp.html)）。从那里将使用加密，并且您的服务器将通过您的客户端进行身份验证。您还可以设置客户端证书并要求对它们进行身份验证。

# awk - 使用 awk 从文本文件中提取值

> ID：12056996
> 
> 赞同：1
> 
> 时间：2012-08-21T14:23:18.807
> 
> 标签：awk

我想根据 column2 的值从文本文件中提取 column1。只有当 column2 大于 20 时，我才需要打印 column1。我还需要在输出中打印文件名。我怎样才能用 awk 做到这一点？

```
file1.txt 

alias    23
samson   10
george   24

file2.txt 

andrew   12
susan    16
david    25   

desired output

file1

alias
george

file2

david 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:30:05.193

`awk '{ if($2 > 20) { print FILENAME " " $1 } }' <files>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:23:39.450

这可能对您有用：

```
awk '$2>20{print $1}' file1 file2 
```

如果你想要文件名和更漂亮的打印：

```
awk 'FNR==1{print FILENAME} $2>20{print "    ",$1}' file1 file2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:06:50.223

```
awk '$2>20{if(file!=FILENAME){print FILENAME;file=FILENAME}print}' file1 file2 
```

见下文：

```
> awk '$2>20{if(file!=FILENAME){print FILENAME;file=FILENAME}print}' file1 file2
file1
    alias    23
    george   24
file2
    david    25 
```

# iphone - 长按不能正常工作？

> ID：12056997
> 
> 赞同：0
> 
> 时间：2012-08-21T14:23:20.073
> 
> 标签：iphone, objective-c, uigesturerecognizer

我面临一个小问题。请帮我。

当我按住我的视图时，我的功能被调用了 2-3 次，并且在释放按住后的某些时间再次调用了长按功能。

在视图中确实加载了

```
-(void)viewdidload
{
    UILongPressGestureRecognizer *longPressGesture =
        [[[UILongPressGestureRecognizer alloc]
          initWithTarget:self action:@selector(longPress:)] autorelease];

        [self.view addGestureRecognizer:longPressGesture];
        [self.view release];
}
    -(void)longPress:(UILongPressGestureRecognizer *)sender 
    {
        NSLog(@"******Long Press*******");

} 
```

***长按打印***多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:39:18.423

如果手势尚未结束，您可能只想从 longPress 返回。将此代码放在 longPress 的顶部：

```
if (sender.state != UIGestureRecognizerStateEnded)
{
    return;
} 
```