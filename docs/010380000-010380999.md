# StackOverflow 问答 10380000-10380999

# objective-c - 动作：Objective-C 中的@selector

> ID：10380000
> 
> 赞同：-5
> 
> 时间：2012-04-30T07:29:25.313
> 
> 标签：objective-c, ios, button, action, selector

> **可能重复：**
> [如何在选择器方法中发送两个参数？](https://stackoverflow.com/questions/1857817/how-can-i-send-two-arguments-in-a-selector-method)

我正在为按钮编写一个动作。但是我作为选择器编写的方法需要两个参数。我将如何在代码中编写方法名称：

```
action:@selector(myMethod) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:37:37.400

传递给“动作”方法的唯一参数是`sender`，它是触发动作的视图（它是可选的）。所以你不能将多个参数传递给一个动作方法，因为没有多个参数要发送。

但是您可以简单地从您的操作中调用另一个方法，该方法可以包含您想要的任何参数。

```
- (void)viewDidLoad {
  myButton.action = @sel(myAction);
}

- (void)myAction {
  [self someMethod:@"first argument" withOtherArg:@"second argument"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:38:57.463

**第一件事：**在提出新问题之前，您应该接受更多答案，人们往往不会帮助您。

**答案：**

使用字典，您可以在其中放置要作为参数传递的 2 个值。这样一来，您将只有一个要传递的参数（字典本身）。它使代码更清晰，并让您可以灵活地在将来需要时传递更多参数。别忘了留下一些评论，这样你就不会忘记你在字典里放了什么。

# jquery - Reload $(document).ready(function() ajax页面重新加载后

> ID：10380005
> 
> 赞同：7
> 
> 时间：2012-04-30T07:29:46.233
> 
> 标签：jquery

在ajax请求中重新加载html页面后，我有一个通用的js文件，我无法访问该文件中的函数， **$（document）.ready（function（）**之间的通用JS函数 如何访问它们并触发通用文件中的函数 **示例**：

常见的 JS：

```
 $(document).ready(function() { 

 $(".agree_btn").click(function(){
        alert(123);             
    });

}); 
```

**phtml**页面中的函数

```
$('.loadMoreAnswers').live('click', function(event) {

          var location_id = $(this).attr('location_id');
          var counter= $(this).attr('counter');
                $('#loadingAnswer').show();

        $.ajax({
            type: 'POST',
            url: '/daleel/loadmore',
            data: 'location_id='+location_id+'&part='+'answers'+'&answerCounter='+counter,  //with the page number as a parameter
            success: function(msg){

                if(msg.length!=0)    //if no errors
                { $(this).parent().load("view")
                    $('#loadingAnswer').remove();
                    counter+=5;
                    $('#profile-page-answer').append(msg); 

                } 
                else $("#loadingAnswer").remove();

            },
            dataType: 'html'
        });

              }); 
```

它像这样渲染 HTML：

```
<a agreed="no" agreed-content-id="63066" class="agree_btn" id="agree-a63066">
Agree
    </a> 
```

但是当我单击此链接时，它不会运行 Common JS 文件中的函数

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T07:42:01.497

在ajax成功中重新绑定click事件处理程序

```
success: function(msg){
 //your code
 $(".agree_btn").bind('click');
} 
```

或者您可以使用[`delegate`](http://api.jquery.com/delegate/)低于 1.7 的 jQuery 版本，例如

```
$(document).delegate(".agree_btn",'click',function(e){
 //your code
}); 
```

或者你正在使用 jQuery 版本 1.7+ 使用[`on`](http://api.jquery.com/on/)方法

```
$(document).on("click",".agree_btn",function(e){
 //your code
}); 
```

不要使用`.live`其已弃用的[*文档*](http://api.jquery.com/live/)

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:33:04.817

`live()`在通用 js 文件中使用。例如

```
$('selector').click(function(){
//function body
}) 
```

而不是这种用途

```
$('selector').live('click', function(){
//function body
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T12:31:35.773

ajax 完成后嵌入 document.ready 函数。ajax 调用后，它将在页面上重新注册脚本。

例如：

```
$.ajax({
            url: 'deleteEntry',
            data: {'ids': JSON.stringify(getList)},
            async: true,
            success: function (data) {
                location.reload();
            },
            error: function (data) {
                alert('error');
            },
            complete: function (data) {
                //add your script in body here
            }
        }); 
```

# actionscript-3 - flex4 中带有 itemrenderer 的分层高级数据网格

> ID：10380012
> 
> 赞同：0
> 
> 时间：2012-04-30T07:30:30.727
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4, flex3

我使用 itemRenderers 使用图像和按钮渲染器完成了分层高级数据网格。

这里是图像的链接：-[图像](http://i49.tinypic.com/35hnygz.jpg) 在附加的图像中，您可以看到项目渲染未正确对齐。我从这个博客中阅读了一些更新，并应用了 spark 渲染器来创建项目渲染器类。

我创建了 itemrenderer **uisng s:MXAdvancedDataGridItemRenderer** 类。请检查以下按钮渲染器类的代码：-

```
<s:layout>
    <s:HorizontalLayout verticalAlign="middle" horizontalAlign="center" paddingLeft="6" paddingTop="0" paddingRight="6" paddingBottom="0"/>
</s:layout>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
    <![CDATA[
        import com.common.ImageLibrary;

        import mx.controls.Alert;
        import mx.resources.ResourceManager;

        override public function set data(value:Object):void
        {
            super.data = value;
            var showButton:String;

            if(value.hasOwnProperty("Data_Transfer") ) 
            {                   
                showButton = value.Data_Transfer;

                if (showButton == "Show_Button") {

                    startId.visible= true;
                    startId.includeInLayout= true;
                    abortId.visible= true;
                    abortId.includeInLayout= true;
                    imgStatus.visible=false;
                    lblStatus.visible= false;
                    imgStatus.includeInLayout= false;
                    lblStatus.includeInLayout= false;
                }else {
                    startId.visible= false;
                    abortId.visible= false;
                    startId.includeInLayout= false;
                    abortId.includeInLayout= false;
                    imgStatus.includeInLayout= true;
                    lblStatus.includeInLayout= true;                        
                    lblStatus.text = "--";
                }

            }               

        }

    ]]>
</fx:Script>

<s:HGroup width="100%" gap="5" verticalAlign="middle" horizontalAlign="left" height="100%">
    <!--<mx:Image id="imgStatus"/>
    <s:Label id="lblStatus" textAlign="left" showTruncationTip="true"  paddingTop="3"/>-->
    <s:VGroup height="50%" verticalAlign="middle" horizontalAlign="center">             
        <s:Button label="Start" id="startId"/>
        <s:Button label="Abort" id="abortId" />
    </s:VGroup>
    <s:HGroup height="100%">    
            <mx:Image id="imgStatus" includeInLayout="false"/>
            <s:Label id="lblStatus" textAlign="left" showTruncationTip="true"  paddingTop="3" />
    </s:HGroup>
</s:HGroup> 
```

`

并且渲染器也无法正常工作。我必须在父行中显示按钮并在子行中显示标签和图像。但渲染器无法正常工作。

请让我知道，如果对此问题有任何解决方案。

# javascript - 设置窗口弹出坐标

> ID：10380015
> 
> 赞同：2
> 
> 时间：2012-04-30T07:30:33.597
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我正在使用这样的 JQuery UI 对话框；

```
 $(function () {
        var dlg = $("#dialog").dialog({
            draggable: true,
            resizable: false,
            width: 950,
            height: 480,
            autoOpen: false,
            modal: true,
            minHeight: 30,
            minwidth: 30,
            title: 'test'
        });
    }); 
```

窗户 ：

```
 function PopupUrl(url, name, width, height) {
        var features = "location=1, status=1, scrollbars=1, width=" + width + ", height=" + height + '"';
        window.open(url, name, features);
    } 
```

对话框已打开页面的中心，但弹出窗口出现不同的坐标。我想重叠。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:45:55.603

只需将计算的顶部和左侧添加到您的功能列表中，弹出窗口将位于屏幕中心：

```
function PopupUrl(url, name, width, height) {
    var top = parseInt((screen.availHeight / 2) - (height / 2));
    var left = parseInt((screen.availWidth / 2) - (width / 2));
    var features = "location=1, status=1, scrollbars=1, width=" + width + ", height=" + height + ", top=" + top + ", left=" + left;
    window.open(url, name, features);
} 
```

# symfony - 如何使用捆绑包中的 css 和图像？

> ID：10380016
> 
> 赞同：2
> 
> 时间：2012-04-30T07:30:38.047
> 
> 标签：symfony

我是 symfony2 的新手，我很困惑如何按资产使用 css 和图像。
例如，我有一个名为 userbundle 的边界，我将我的 css 和图像放在 UserBundle/Resources/public/css 和 UserBundle/Resources/public/image 中。但按资产，它们位于 web/acmeuser/css 和 web/acmeuser/image 中。它们不存在，当然我不能展示它们。

回答：
问题是因为s​​vn。如果两边都有 svn，这意味着在 src/bundles 和 web/bundles 中。如果它们都在 svn 控制下，那么命令

资产：安装网络

将导致此异常： unlink(web//bundles/framework\images.svn\text-base\open_quote.gif.svn-base): Permission denied in \vendor\symfony\src\Symfony\Component\HttpKernel\Util\Filesystem第 101 行的 .php 如果您刚刚删除了 /web/bundles 并将 svn ignore 设置为它。重新运行命令，一切顺利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:27:08.613

你可以试试这个。

```
{% block javascript %}
<link rel="stylesheet" type="text/css" href="{{ asset('bundles/UserBoundle/Resources/public/css/Filename.css') }}" ></link>

<script type="text/javascript" src="{{ asset('bundles/UserBoundle/Resources/public/js/Filename.js') }}">
</script> 

{% endblock %} 
```

# mysql - 如何同步 2 个数据库中的产品库存库存。Mysql 和 MSSQL 实时

> ID：10380018
> 
> 赞同：0
> 
> 时间：2012-04-30T07:30:40.777
> 
> 标签：mysql, sql-server-2005, magento, synchronize

我有带有 Mysql 的 Magento 电子商务系统和基于 Windows 的 POS 系统，使用 MSSQL 数据库编写.net，

实时管理股票的最佳方式是什么？

解决方案1编写一个cron作业将事务导出到xml文件然后发送数据，也可以通过ftp从POS读取更新数据。并在 POS 系统上创建 widows 服务器以读取 xml 文件以更新数据库，并在导出 xml 后在有销售或手动更改库存时更新 Magento。

解决方案 2 我可以创建一个 Web 服务来更新两端的库存吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:11:50.280

实时几乎总是一个棘手的问题。

我要做的是利用 Magento API 来获取和设置您需要的有关股票的信息。您可能会发现 Magento API 有点慢。Alan Storm 在他的博客 alanstorm.com 上有一些很好的文章来解释 API 的来龙去脉。如果您想了解更多信息，我会去那里看看。

Alan Storm 还发布了他自己的 API，称为 MercuryAPI。这可能对您有所帮助。

否则，您可以为需要处理的内容创建自己的 API 端点。我发现有时这是你最好的选择。您必须记住的一件事是，您将独自负责保护您自己制作的任何东西（请小心）。在您的情况下，您可能会处理 Magento 的 Stock Item 模型。您不一定需要处理整个产品模型来更新库存水平。

# php - 如何安全地转义 php for mysql 中的输入数据

> ID：10380019
> 
> 赞同：11
> 
> 时间：2012-04-30T07:30:56.953
> 
> 标签：php, mysql

这意味着，目前，在 php 中筛选数据以将它们发送到 mysql 数据库是最安全的。

谢谢 ）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T07:32:44.220

我相信~~[mysql_real_escape_string()](http://uk3.php.net/mysql_real_escape_string)~~ [mysql **i** _real_escape_string()](http://uk3.php.net/manual/en/mysqli.real-escape-string.php)是转义输入数据的最佳方式

稍后编辑，因为现在所有内容都已弃用并且信息必须有效：

如果您确实需要使旧代码保持最新，请尝试使用[PDO](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)，因为准备好的语句更安全，或者使用[mysqli_*() 函数。](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T08:27:54.483

目前，确保您的安全的最首选方式是准备好的声明。

例子：

```
$preparedStatement = $db->prepare('SELECT * FROM memebers WHERE username = :username');

$preparedStatement->execute(array(':username' => $username));

$rows = $preparedStatement->fetchAll(); 
```

然后在显示您的数据使用时`htmlspecialchars()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T08:02:44.070

```
validMySQL($var) {
$var=stripslashes($var);
$var=htmlentities($var);
$var=strip_tags($var);
$var=mysql_real_escape_string($var);
return $var
} 
```

上面的代码有助于清理大多数无效数据，请记住，您必须连接到 mysql 数据库才能使 mysql_real_escape_string 工作......

# jsf - 对 Internet Explorer 6 和 8 的应用程序支持

> ID：10380028
> 
> 赞同：0
> 
> 时间：2012-04-30T07:31:58.747
> 
> 标签：jsf, netbeans, internet-explorer-8, richfaces, internet-explorer-6

我已经成功开发了一些使用 netbeans 作为 IDE 的应用程序。他们目前都在为公司生产。
但是，在这里我遇到了一个问题，即应用程序在 IE-6 中运行得非常好，但是当我将它升级到 IE-8 时，它不支持应用程序的全部功能，而且表现得很尴尬。

所以我想知道，两个版本的 IE 是如何让同一个应用程序表现不同的，这是否与应用程序的某种开发有关，以及我们是否可以让它在所有版本中工作。

我想知道一些幕后的事实。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:51:48.270

如果您使用的是richfaces 3.x，它有已知的IE9 问题，这些问题尚未修复。

如果您的应用程序使用 IE7，则指定[`X-UI-Compatible`](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)元标记以模拟 IE7 行为。

# python - 椭圆曲线和点基数

> ID：10380029
> 
> 赞同：1
> 
> 时间：2012-04-30T07:31:59.263
> 
> 标签：python, cryptography, elliptic-curve

目前正在为 ECDSA 生成椭圆曲线并遇到一些问题：
椭圆曲线：`y**2 = x**3 + ax + b (mod p)`
椭圆曲线上的点：`G = (Gx, Gy)`

1.  如何找到**椭圆曲线的基数**？

2.  如何找到该椭圆曲线上**点 G 的阶数？**

* * *

- 至于`1.`：基数可以在[SEA](http://en.wikipedia.org/wiki/Schoof%E2%80%93Elkies%E2%80%93Atkin_algorithm)中找到（它非常适合大型模块`p`）。在 Python中是否有任何[SEA实现？](http://en.wikipedia.org/wiki/Schoof%E2%80%93Elkies%E2%80%93Atkin_algorithm)
--至于`2`：Python中有什么解决方案吗？

**PS**
对不起我的英语，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:15:08.680

这与这个[话题](https://stackoverflow.com/a/408645/624829)有关。

[Sage](http://www.sagemath.org/)是一个强大的数学包，带有 Python 前端。使用 Sage，您将能够使用[PARI/GP](http://pari.math.u-bordeaux.fr/doc.html)包

您在他们的[常见问题解答](http://www.math.u-bordeaux.fr/~belabas/pari/doc/faq.html#ell)中也有一些关于椭圆曲线的信息

# javascript - javascript中的日期选择器

> ID：10380030
> 
> 赞同：2
> 
> 时间：2012-04-30T07:32:02.913
> 
> 标签：javascript, date, datepicker, mootools

我的网页中没有日期选择器，但它即将到来，我错过了什么？

[http://jsfiddle.net/cBwEK/](http://jsfiddle.net/cBwEK/)

它在小提琴中很好，但我在我的网页中什么也没有。我写了下面的脚本

整个源代码在这里：[http ://www.monkeyphysics.com/mootools/script/2/datepicker](http://www.monkeyphysics.com/mootools/script/2/datepicker)

```
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>     
    <script type="text/javascript" src="datepicker.js"></script>      
    <script type="text/javascript" src="mootools-yui-compressed.js"></script>
    <script type="text/css" src="datepicker.css"></script>        
    <script type="text/javascript">           
        new DatePicker('.picker', {
            pickerClass: 'datepicker ',
            allowEmpty: true
        });           
    </script>        
 </head>
 <body>
     <label>Datepicker starting at and allowing no value:</label>
     <input name='date_allow_empty' type='text' value='' class='date picker' />
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T07:35:14.567

您需要在 DOM 中存在相关元素*后运行 JavaScript 代码。*只需将脚本移动到页面末尾即可。此外，如果日期选择器脚本依赖于 MooTools，您需要将日期选择器包含在 MooTools 包含*之后*。例如：

```
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>     
    <!-- FIRST CHANGE HERE, swapping the order of the script elements -->
    <script type="text/javascript" src="mootools-yui-compressed.js"></script>
    <script type="text/javascript" src="datepicker.js"></script>      
    <link type="text/css" rel="stylesheet" href="datepicker.css">
 </head>
  <body>
   <label>Datepicker starting at and allowing no value:</label>
   <input name='date_allow_empty' type='text' value='' class='date picker' />
   <!-- SECOND CHANGE HERE, moving your script to *after* the elements it operates on -->
   <script type="text/javascript">           
            new DatePicker('.picker', {
     pickerClass: 'datepicker ',
     allowEmpty: true
     });           
   </script>        
  </body>
</html> 
```

[现场复制](http://jsbin.com/ofezog)| [来源](http://jsbin.com/ofezog/edit#html)

我刚刚移动*了您的*脚本，但您可以[按照 YUI 的建议](http://developer.yahoo.com/performance/rules.html)将所有脚本移到那里。

它在 jsFiddle 中工作的原因是您将 fiddle 设置为从`onload`事件中加载 JavaScript 代码，这在过程中很晚才发生；到那时，DOM 元素就在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:37:11.130

尝试在页面加载后加载 DatePicker 初始化。

```
A good programmer always use View Source 
```

如果您看过 Fiddle，您会看到：

```
<script type='text/javascript'>
    window.addEvent('load', function() {
        new DatePicker('.picker', {
             pickerClass: 'datepicker ',
            allowEmpty: true
        });
    });
</script> 
```

那是因为没有加载 HTML 元素并且您的脚本看不到它们。

# android - itemnames 无法显示在 android 的自定义列表视图中

> ID：10380037
> 
> 赞同：1
> 
> 时间：2012-04-30T07:32:39.793
> 
> 标签：android, android-listview

我正在将数组列表项 [x,y,z...] 发送到自定义适配器。我想在列表视图中显示项目。我可以使用 for loop(x,y,z...like).in side getview 方法打印所有项目我可以 pritem itemnames[possition] 意味着它不能打印数组列表...

```
 i try this code
     public class CustomAdapter extends BaseAdapter{
public static ArrayList<String> arr=new ArrayList<String>();
public Context Context;

  private LayoutInflater inflater;

  HashMap<String, String> map = new HashMap<String, String>();
 public CustomAdapter(Context context, ArrayList<String> arr) {
     Context=context;
        //inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //  imageLoader=new ImageLoader(activity);
        inflater=LayoutInflater.from(context);

     arr=arr;
    for(int i=0;i<arr.size();i++)
    {
       arr.get(i);

    }
 }
public int getCount() {
    // TODO Auto-generated method stub
    return arr.size();
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}
  public View getView(int position, View convertView, ViewGroup parent) {
// TODO Auto-generated method stub

View vi=convertView;
vi=inflater.inflate(R.layout.selecteditemlistview, null);
System.out.println(arr.get(position));
TextView text=(TextView)vi.findViewById(R.id.selectedtext);
text.setText(arr.get(position));
return vi;
  }
 } 
```

我在哪里做错了请告诉我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:35:37.843

您需要返回Method 而`arraylist size`不是.`getCount()``return 0`

```
public class CustomAdapter extends BaseAdapter
{
    public static ArrayList<String> arr=new ArrayList<String>();
    public Context Context;
    private LayoutInflater inflater;

    HashMap<String, String> map = new HashMap<String, String>();
    public CustomAdapter(Context context, ArrayList<String> arr) 
    {
        Context=context;
        inflater=LayoutInflater.from(context);
        arrr=arr;
    }
    public int getCount() 
    {
        // TODO Auto-generated method stub
        return arr.size();
    }

    public Object getItem(int position) 
    {
        // TODO Auto-generated method stub
        return arr.get(position);
    }

    public long getItemId(int position) 
    {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
        {
            ViewHolder holder;

            if (convertView == null) 
            {
                convertView = mInflater.inflate(R.layout.selecteditemlistview, null);
                holder = new ViewHolder();

                holder.textViewSelectedText = (TextView)convertView.findViewById(R.id.selectedtext);
                convertView.setTag(holder);
            }
            else 
            {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.textViewSelectedText.setText(arr.get(position));
            return convertView;
        }

        class ViewHolder
        {
            TextView textViewSelectedText = null;
        }
 } 
```

# android - 如何通过代码创建/设置交易账户

> ID：10380041
> 
> 赞同：0
> 
> 时间：2012-04-30T07:32:57.907
> 
> 标签：android, configuration, exchange-server

我现在搜索了几天，我在一个线程中得到的唯一具体答案是它不可能（[这里](https://stackoverflow.com/questions/4056043/android-how-to-add-configure-exchange-setting-programmatically)）。

但是，我发现了一些可以做到这一点的应用程序，所以我想这是可能的，需要某种解决方法。

问题是我在黑暗中，我不知道从哪里开始。我会很高兴任何积分，线索，任何让我开始的事情......

谢谢，

艾坦。

# video - 有没有简单的方法来提取附件b格式的h.264原始流？

> ID：10380045
> 
> 赞同：8
> 
> 时间：2012-04-30T07:33:30.760
> 
> 标签：video, ffmpeg, extract, h.264

当我使用命令行使用 ffmpeg 提取视频流时：

ffmpeg -i {一些文件} -vcodec 复制 -an -f {rawvideo|h264|whatever} out.h264

对于 Adob​​e Media Encoder 生成的某些媒体文件，只有 .m4v（编码为 h.264 蓝光）文件可以产生一些可用的结果。

其他一些格式（如 .f4v）可以生成 h.264 流，但没有 PPS/SPS，并且每个切片都以大小而不是 00 00 00 01 序列开头。

我希望我可以从尽可能多的包含有效 h.264 流的文件中提取附件 b 格式的原始流。我知道我可以自己添加 PPS/SPS 并将大小更改为 00 00 00 01。但是有没有现有的软件可以做到这一点？

* * *

或者可以保证ffmpeg总是可以从.m4v文件中提取附件b格式的流，不管文件是用什么软件编码的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-01T01:44:48.303

您可能正在寻找的是 h264_mp4toannexb 比特流过滤器，使用 -bsf 命令行选项调用：

```
ffmpeg -i {some file} -vcodec copy -bsf h264_mp4toannexb -an -f {rawvideo|h264|whatever} out.h264 
```

请注意，如果您的 FFmpeg 版本有点旧，您可能需要使用 -vbsf 而不是 -bsf（该选项最近已重命名）。

# orbeon - 如何使用 Orbeon Forms 离线保存数据？

> ID：10380050
> 
> 赞同：1
> 
> 时间：2012-04-30T07:34:24.660
> 
> 标签：orbeon

我们已尝试测试 Orbeon eForm 以在填写表格后处理“离线”保存数据。我们尝试了两个版本`PE 3.9.1`和`CE 3.9.0`，但它似乎还不支持“离线”模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:38:27.170

*   Orbeon Forms 不支持**离线模式**，它允许您在没有 Internet 连接的情况下编辑表单。此时，Orbeon Forms 没有“离线模式”，它允许您在没有 Internet 连接的情况下在浏览器中使用它。一些工作是在 2008 年完成的，当时使用的是[Google Gears](http://blog.orbeon.com/2008/08/what-we-have-been-up-to_17.html)，但从那时起，这并不是进一步发展的东西。

    一种可能的解决方案是在用户的计算机上部署 Orbeon Forms 和您的应用程序。这并不总是实用的，因为它要求您提供 Orbeon Forms 以及您的应用程序作为用户安装在他们机器上的可安装包，但这是一些使用 Orbeon 的公司正在做的事情。

*   但是，如果您希望用户能够在**本地保存他们输入的数据**，并且您正在使用 Form Builder 创建表单，您可以允许用户将他们输入的数据保存为 PDF，例如他们可以保留参考。

# php - 如何通过 mail() 使用 Gmail 发送电子邮件？我把密码放在哪里？

> ID：10380051
> 
> 赞同：5
> 
> 时间：2012-04-30T07:34:24.850
> 
> 标签：php, email, gmail

我正在尝试使用我的 gmail 帐户通过邮件向用户发送激活链接。我如何设置它。如何使用 Gmail 发送电子邮件？我把密码放在哪里？

它是古老的还是我应该采用面向对象的方法。

```
// secure the password
$passWord = sha1($passWord);
$repeatPass = sha1($repeatPass);
// generate random number
$random =rand(1200345670,9999999999);

//send activation email
$to = $email;
$subject = "Activate your account";
$headers = "From: ti.asif@gmail.com";
$server = "smtp.gmail.com";
$body = "Hello $username,\n\n You registered and need to activate your account. Click the link below or paste it into the URL bar of your browser\n\nhttp://phpacademy.info/tutorials/emailactivation/activate.php?id=$lastid&code=$code\n\nThanks!";

ini_set("SMTP",$server);

if (!mail($to,$subject,$body,$headers))
    echo "We couldn't sign you up at this time. Please try again later.";
else
{
    // register the user            
    $queryreg = mysql_query("
        INSERT INTO users VALUES ('','$userName','$passWord','$fullName','$date','$random','0','$email')
                            ");

    $lastid = mysql_insert_id();

    die ("You have been registered. <a href='login.php'>Click here</a> to return to the login page.");
    echo "Successfully Registered";
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T07:40:21.817

[下载phpmailer](https://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php5_6/)并尝试以下代码

```
<?php
$mail  = new PHPMailer();   
$mail->IsSMTP();

//GMAIL config
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the server
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port for the GMAIL server
$mail->Username   = "gmailusername";  // GMAIL username
$mail->Password   = "gmailpassword";            // GMAIL password
//End Gmail

$mail->From       = "from@email.com";
$mail->FromName   = "you name";
$mail->Subject    = "some subject";
$mail->MsgHTML("the message");

//$mail->AddReplyTo("reply@email.com","reply name");//they answer here, optional
$mail->AddAddress("address@to.com","name to");
$mail->IsHTML(true); // send as HTML

if(!$mail->Send()) {//to see if we return a message or a value bolean
    echo "Mailer Error: " . $mail->ErrorInfo;
} else  echo "Message sent!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:38:30.940

`mail`内置不是很适合这个，它只支持简单的设置。

看看[pear mail](http://pear.php.net/package/Mail)，示例向您展示如何使用 smtp auth 发送。

# java - 在 Java 中避免超时/饥饿的常见做法？

> ID：10380053
> 
> 赞同：3
> 
> 时间：2012-04-30T07:34:29.227
> 
> 标签：java, multithreading, synchronization, queue

我有一个将文件写入磁盘和将其他内容写入数据库的网络服务。每次写入整个操作需要 1-2 秒。

该服务可以同时从多个客户端调用，但这是不太可能的。假设有 20 个客户端同时调用 web 服务，写操作必须同步。在这种情况下，某些客户端可能会出现超时异常，因为它们必须等待很多秒。

有什么好的做法可以解决这类情况吗？就像现在一样，这些方法是同步的（这可能导致饥饿/超时）。

我是否应该通过删除关键字让所有线程进入 write 方法`synchronized`并将它们的任务放入任务队列以避免超时？这是解决这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:14:18.637

Francis Upton's practice is indeed an accepted practice.

Another one, is making more fine grained synchronization. Instead of synchronizing all read/write methods of a class, you can synchronize access of the exact invariants that should be synchronized.

And yet even better, is to get rid of synchronization altogether. This is possible using the [java.util.concurrent](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html) package. This package introduce new collections that use [Non-Blocking Algorithms](http://en.wikipedia.org/wiki/Non-blocking_algorithm) (implemented in java using [Compare-Ans-Swap](http://Compare-and-swap) atomic instructions). These collections, such as [ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html), enable much better throughput when scaling.

You can read more about it in [this article](http://www.ibm.com/developerworks/java/library/j-jtp11234/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:40:31.867

删除`synchronized`并将其放入任务队列本身对您没有帮助（因为这实际上是同步为您做的）。但是，如果您在将 Web 请求放入队列后立即对其进行响应，那么您将缩短响应时间。但是以牺牲一些可靠性为代价，因为用户将确认工作已完成，而工作实际上并未完成（系统可能在工作完成之前崩溃）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:03:48.947

在这种类型的实现中（负载增加下的缓慢服务），您希望尽可能多地异步，包括超时处理（如果基于服务器）和所需的 I/O。不要让客户端响应线程等待这些耗时的操作，以保持服务器对新请求的响应，而是触发所需的操作（可能是动态线程池）并让回调处理结果，无论是超时、完成 I/O 还是错误。

根据首先发生的情况发送适当的响应，但如果您发送错误/超时消息然后完成的 I/O 到达（由于 I/O 和计时器之间的竞争条件），请准备回滚 I/O。这意味着服务器中需要事务语义。

这是一个随着负载增长而变得越来越复杂的领域，但早期的良好设计应该允许您随着负载的增长而扩展。理想情况下，客户端服务线程根本不应该阻塞。

# cakephp - CakePHP 语法错误或访问冲突

> ID：10380054
> 
> 赞同：3
> 
> 时间：2012-04-30T07:34:36.450
> 
> 标签：cakephp, has-and-belongs-to-many, cakephp-2.1

我有以下关系用户（id，名称，电子邮件，...）电影（id，名称，...） users_watchlists（id，user_id，movie_id）

它是HABTM关系。

**错误**

> 错误：SQLSTATE [42000]：语法错误或访问冲突：1066 不是唯一的表/别名：'UsersWatchlist'
> 
> SQL 查询：选择`UsersWatchlist`。`id`, `UsersWatchlist`. `first_name`, `UsersWatchlist`. `last_name`, `UsersWatchlist`. `display_image`, `UsersWatchlist`. `email`, `UsersWatchlist`. `password`, `UsersWatchlist`. `birthday`, `UsersWatchlist`. `gender`, `UsersWatchlist`. `group_id`, `UsersWatchlist`. `banned`, `UsersWatchlist`. `created`, `UsersWatchlist`. `modified`, `UsersWatchlist`. `id`, `UsersWatchlist`. `first_name`, `UsersWatchlist`. `last_name`, `UsersWatchlist`. `display_image`, `UsersWatchlist`. `email`, `UsersWatchlist`. `password`, `UsersWatchlist`. `birthday`, `UsersWatchlist`. `gender`, `UsersWatchlist`. `group_id`, `UsersWatchlist`. `banned`, `UsersWatchlist`. `created`, `UsersWatchlist`. `modified`从`reelstubs`。`users`作为 `UsersWatchlist`加入`reelstubs`。`users`如`UsersWatchlist`开（`UsersWatchlist`. `movie_id`= 4 和`UsersWatchlist`。`user_id`= `UsersWatchlist`。`id`)
> 
> 注意：如果要自定义此错误消息，请创建 app\View\Errors\pdo_error.ctp

**用户模型**

```
 public $hasAndBelongsToMany = array(
       'UsersWatchlist' => array(
            'className' => 'Movie',
            'joinTable' => 'users_watchlists',
            'foreignKey' => 'user_id',
            'associationForeignKey' => 'movie_id',
            'unique' => 'keepExisting',
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'finderQuery' => '',
            'deleteQuery' => '',
            'insertQuery' => ''
        )
  ); 
```

**电影模特**

```
public $hasAndBelongsToMany = array(
'UsersWatchlist' => array(
        'className' => 'User',
        'joinTable' => 'users_watchlists',
        'foreignKey' => 'movie_id',
        'associationForeignKey' => 'user_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

**用户观察名单**

```
public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Movie' => array(
        'className' => 'Movie',
        'foreignKey' => 'movie_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

不知道为什么它试图从 UsersWatchlist 中获取名称等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:48:56.620

> 不知道为什么它试图从 UsersWatchlist 中获取名称等

因为您有一个名为关系数据表的模型，`UsersWatchlist`并且您将 User 和 Movie 之间的关系命名为相同的名称。

尝试更新这些名称：

**用户模型**

```
public $hasAndBelongsToMany = array(
   'Movie' => array(
   ... 
```

**电影模特**

```
public $hasAndBelongsToMany = array(
   'User' => array(
   ... 
```

这些键在 SQL 查询中用作别名，在这种情况下会失败。

顺便说一句，如果您`users_watchlists`仅使用数据表来维护用户和电影之间的链接（例如，如果您不存储有关关系的任何属性），您可能只是摆脱`UsersWatchlist`模型。

# javascript - 用于匹配括号中的值的正则表达式/Javascript

> ID：10380056
> 
> 赞同：4
> 
> 时间：2012-04-30T07:34:50.277
> 
> 标签：javascript, regex

我的 Web 应用程序需要解析用括号括起来的字符串中的数字范围。我从来没有真正理解过正则表达式，所以我需要一些帮助。下面的代码是我想要做的（然后我将在连字符上拆分字符串并获取最小/最大值）。显然模式是错误的 - 当我想要的结果是 1 个警报说 (10-12) 和下一个说 (5-10) 或更好时，下面的示例会警报“(10-12) foo (5-10) bar”如果可能的话，那些没有括号的值。

任何帮助表示赞赏。

```
var string = "foo bar (10-12) foo (5-10) bar";
var pattern = /\(.+\)/gi;
matches = string.match(pattern);

for (var i in matches) {
    alert(matches[i]);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T07:36:41.727

通过`?`在`+`. 否则，它会贪婪地消耗尽可能多的东西，从你的开头到字符串中`(`的最后一个。`)`

```
var string = "foo bar (10-12) foo (5-10) bar",
    pattern = /\(.+?\)/g,
    matches = string.match(pattern); 
```

[js小提琴](http://jsfiddle.net/rdwAP/)。

如果您不想在匹配项中包含括号，通常您会使用正向前瞻和后向查看括号。JavaScript 不支持lookbehinds（尽管你可以*伪造*它们）。所以，用...

```
var string = "foo bar (10-12) foo (5-10) bar",
    pattern = /\((.+?)\)/g,
    match,
    matches = [];

while (match = pattern.exec(string)) {
    matches.push(match[1]);
} 
```

[js小提琴](http://jsfiddle.net/zmrYw/)。

还...

*   您不需要`i`正则表达式中的标志；你不匹配任何字母。
*   您应该始终使用`var`. 在您的示例中，`matches`将是全局的。
*   您不应该使用 a`for (in)`来迭代数组。您还应该检查`match()`不返回`null`（如果没有找到结果）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T07:38:46.517

问题是您的正则表达式是*Greedy*，这意味着它将匹配第一个括号并继续运行，直到找到最后一个括号。要解决此问题，您有两个选择，您可以在 之后添加`?`符号`+`以使其非贪婪：`\(.+?\)`或者，匹配除右括号之外的任何字符：`\([^)]+\)`。

这两个正则表达式都应该满足您的需求。

# image - 如何从另一个PNG复制一个PNG？

> ID：10380057
> 
> 赞同：10
> 
> 时间：2012-04-30T07:34:56.860
> 
> 标签：image, delphi, png, delphi-7

我的应用程序需要大量 PNG，而我在尝试使用它们时经常弄乱我的代码。为了让我的生活更轻松，我在 Realword Paint 中制作了一张大的 PNG 图像，并将所有这些小的 PNG 图像粘贴到上面。现在我有一个文件。现在我需要的只是将一个PNG透明复制到另一个PNG（顺便说一句，不要问为什么），因为我需要单独处理每个图像。在处理图像方面，我是个糟糕的程序员。我正在使用德尔福 7。

`PGNImage.Resize`

```
procedure TPngObject.Resize(const CX, CY: Integer);
  function Min(const A, B: Integer): Integer;
  begin
    if A < B then Result := A else Result := B;
  end;
var
  Header: TChunkIHDR;
  Line, NewBytesPerRow: Integer;
  NewHandle: HBitmap;
  NewDC: HDC;
  NewImageData: Pointer;
  NewImageAlpha: Pointer;
  NewImageExtra: Pointer;
begin
  if (CX > 0) and (CY > 0) then
  begin
    {Gets some actual information}
    Header := Self.Header;

    {Creates the new image}
    NewDC := CreateCompatibleDC(Header.ImageDC);
    Header.BitmapInfo.bmiHeader.biWidth := cx;
    Header.BitmapInfo.bmiHeader.biHeight := cy;
    NewHandle := CreateDIBSection(NewDC, pBitmapInfo(@Header.BitmapInfo)^,
      DIB_RGB_COLORS, NewImageData, 0, 0);
    SelectObject(NewDC, NewHandle);
    {$IFDEF UseDelphi}Canvas.Handle := NewDC;{$ENDIF}
    NewBytesPerRow := (((Header.BitmapInfo.bmiHeader.biBitCount * cx) + 31)
      and not 31) div 8;

    {Copies the image data}
    for Line := 0 to Min(CY - 1, Height - 1) do
      CopyMemory(Ptr(Longint(NewImageData) + (Longint(CY) - 1) *
      NewBytesPerRow - (Line * NewBytesPerRow)), Scanline[Line],
      Min(NewBytesPerRow, Header.BytesPerRow));

    {Build array for alpha information, if necessary}
    if (Header.ColorType = COLOR_RGBALPHA) or
      (Header.ColorType = COLOR_GRAYSCALEALPHA) then
    begin
      GetMem(NewImageAlpha, CX * CY);
      Fillchar(NewImageAlpha^, CX * CY, 255);
      for Line := 0 to Min(CY - 1, Height - 1) do
        CopyMemory(Ptr(Longint(NewImageAlpha) + (Line * CX)),
        AlphaScanline[Line], Min(CX, Width));
      FreeMem(Header.ImageAlpha);
      Header.ImageAlpha := NewImageAlpha;
    end;

    {$IFDEF Store16bits}
    if (Header.BitDepth = 16) then
    begin
      GetMem(NewImageExtra, CX * CY);
      Fillchar(NewImageExtra^, CX * CY, 0);
      for Line := 0 to Min(CY - 1, Height - 1) do
        CopyMemory(Ptr(Longint(NewImageExtra) + (Line * CX)),
        ExtraScanline[Line], Min(CX, Width));
      FreeMem(Header.ExtraImageData);
      Header.ExtraImageData := NewImageExtra;
    end;
    {$ENDIF}

    {Deletes the old image}
    DeleteObject(Header.ImageHandle);
    DeleteDC(Header.ImageDC);

    {Prepares the header to get the new image}
    Header.BytesPerRow := NewBytesPerRow;
    Header.IHDRData.Width := CX;
    Header.IHDRData.Height := CY;
    Header.ImageData := NewImageData;

    {Replaces with the new image}
    Header.ImageHandle := NewHandle;
    Header.ImageDC := NewDC;
  end
  else
    {The new size provided is invalid}
    RaiseError(EPNGInvalidNewSize, EInvalidNewSize)

end; 
```

`SmoothResize`古斯塔沃·杜德

```
procedure SmoothResize(apng:tpngobject; NuWidth,NuHeight:integer);
var
  xscale, yscale         : Single;
  sfrom_y, sfrom_x       : Single;
  ifrom_y, ifrom_x       : Integer;
  to_y, to_x             : Integer;
  weight_x, weight_y     : array[0..1] of Single;
  weight                 : Single;
  new_red, new_green     : Integer;
  new_blue, new_alpha    : Integer;
  new_colortype          : Integer;
  total_red, total_green : Single;
  total_blue, total_alpha: Single;
  IsAlpha                : Boolean;
  ix, iy                 : Integer;
  bTmp : TPNGObject;
  sli, slo : pRGBLine;
  ali, alo: pbytearray;
begin
  if not (apng.Header.ColorType in [COLOR_RGBALPHA, COLOR_RGB]) then
    raise Exception.Create('Only COLOR_RGBALPHA and COLOR_RGB formats' +
    ' are supported');
  IsAlpha := apng.Header.ColorType in [COLOR_RGBALPHA];
  if IsAlpha then new_colortype := COLOR_RGBALPHA else
    new_colortype := COLOR_RGB;
  bTmp := Tpngobject.CreateBlank(new_colortype, 8, NuWidth, NuHeight);
  xscale := bTmp.Width / (apng.Width-1);
  yscale := bTmp.Height / (apng.Height-1);
  for to_y := 0 to bTmp.Height-1 do begin
    sfrom_y := to_y / yscale;
    ifrom_y := Trunc(sfrom_y);
    weight_y[1] := sfrom_y - ifrom_y;
    weight_y[0] := 1 - weight_y[1];
    for to_x := 0 to bTmp.Width-1 do begin
      sfrom_x := to_x / xscale;
      ifrom_x := Trunc(sfrom_x);
      weight_x[1] := sfrom_x - ifrom_x;
      weight_x[0] := 1 - weight_x[1];

      total_red   := 0.0;
      total_green := 0.0;
      total_blue  := 0.0;
      total_alpha  := 0.0;
      for ix := 0 to 1 do begin
        for iy := 0 to 1 do begin
          sli := apng.Scanline[ifrom_y + iy];
          if IsAlpha then ali := apng.AlphaScanline[ifrom_y + iy];
          new_red := sli[ifrom_x + ix].rgbtRed;
          new_green := sli[ifrom_x + ix].rgbtGreen;
          new_blue := sli[ifrom_x + ix].rgbtBlue;
          if IsAlpha then new_alpha := ali[ifrom_x + ix];
          weight := weight_x[ix] * weight_y[iy];
          total_red   := total_red   + new_red   * weight;
          total_green := total_green + new_green * weight;
          total_blue  := total_blue  + new_blue  * weight;
          if IsAlpha then total_alpha  := total_alpha  + new_alpha  * weight;
        end;
      end;
      slo := bTmp.ScanLine[to_y];
      if IsAlpha then alo := bTmp.AlphaScanLine[to_y];
      slo[to_x].rgbtRed := Round(total_red);
      slo[to_x].rgbtGreen := Round(total_green);
      slo[to_x].rgbtBlue := Round(total_blue);
      if isAlpha then alo[to_x] := Round(total_alpha);
    end;
  end;
  apng.Assign(bTmp);
  bTmp.Free;
end; 
```

非常感谢，祝您有美好的一天！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T16:33:42.127

这是另一个版本（它工作得非常快）：

```
procedure CropPNG(Source: TPNGObject; Left, Top, Width, Height: Integer;
  out Target: TPNGObject);
var
  IsAlpha: Boolean;
  Line: Integer;
begin
  if (Source.Width < (Left + Width)) or (Source.Height < (Top + Height)) then
    raise Exception.Create('Invalid position/size');

  Target := TPNGObject.CreateBlank(Source.Header.ColorType, 
    Source.Header.BitDepth, Width, Height);
  IsAlpha := Source.Header.ColorType in [COLOR_GRAYSCALEALPHA, COLOR_RGBALPHA];
  for Line := 0 to Target.Height - 1 do
  begin
    if IsAlpha then
      CopyMemory(Target.AlphaScanline[Line], 
        Ptr(LongInt(Source.AlphaScanline[Line + Top]) + LongInt(Left)), 
        Target.Width);
    CopyMemory(Target.Scanline[Line], 
      Ptr(LongInt(Source.Scanline[Line + Top]) + LongInt(Left * 3)), 
      Target.Width * 3);
  end;
end; 
```

**注意：**以上代码兼容较新的[`pngimage`](http://theunknownones.googlecode.com/svn/trunk/Libraries/PNGSupport/pngimage.pas)1.56+版本（支持`CreateBlank`构造函数）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-30T11:10:42.353

[这是一个从其他地方](http://vcl-styles-utils.googlecode.com/svn-history/r18/trunk/Extras/PngFunctions.pas)找到的“SlicePNG”（*“此函数将一个大的 PNG 文件（例如，带有工具栏的所有图像的图像）切成更小、大小相同的图片”*）过程修改的示例代码：

```
procedure CropPNG(Source: TPNGObject; Left, Top, Width, Height: Integer;
    out Target: TPNGObject);

  function ColorToTriple(Color: TColor): TRGBTriple;
  begin
    Color := ColorToRGB(Color);
    Result.rgbtBlue := Color shr 16 and $FF;
    Result.rgbtGreen := Color shr 8 and $FF;
    Result.rgbtRed := Color and $FF;
  end;

var
   X, Y: Integer;
   Bitmap: TBitmap;
   BitmapLine: PRGBLine;
   AlphaLineA, AlphaLineB: pngimage.PByteArray;
begin
  if (Source.Width < (Left + Width)) or (Source.Height < (Top + Height)) then
    raise Exception.Create('Invalid position/size');

  Bitmap := TBitmap.Create;
  try
    Bitmap.Width := Width;
    Bitmap.Height := Height;
    Bitmap.PixelFormat := pf24bit;

    for Y := 0 to Bitmap.Height - 1 do begin
      BitmapLine := Bitmap.Scanline[Y];
      for X := 0 to Bitmap.Width - 1 do
        BitmapLine^[X] := ColorToTriple(Source.Pixels[Left + X, Top + Y]);
    end;

    Target := TPNGObject.Create;
    Target.Assign(Bitmap);
  finally
    Bitmap.Free;
  end;

  if Source.Header.ColorType in [COLOR_GRAYSCALEALPHA, COLOR_RGBALPHA] then begin
    Target.CreateAlpha;
    for Y := 0 to Target.Height - 1 do begin
      AlphaLineA := Source.AlphaScanline[Top + Y];
      AlphaLineB := Target.AlphaScanline[Y];
      for X := 0 to Target.Width - 1 do
        AlphaLineB^[X] := AlphaLineA^[X + Left];
    end;
  end;
end; 
```

示例调用：

```
var
  Png: TPNGObject;
  CroppedPNG: TPNGobject;
begin
  PNG := TPNGObject.Create;
  PNG.LoadFromFile('..\test.png');

  CropPNG(PNG, 30, 10, 60, 50, CroppedPNG);
  CroppedPNG.SaveToFile('..\croptest.png'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:39:56.830

我尝试编写代码以使用[libpng](http://www.google.com/url?sa=t&rct=j&q=libpng&source=web&cd=1&ved=0CDUQFjAA&url=http://www.libpng.org/pub/png/libpng.html&ei=q0GeT6O2D8uQiQfthZmuDg&usg=AFQjCNEiBZsLgAdOKVLw_rgsG_81P3Euzg&cad=rja)*加载*png 。与它一起工作非常可怕。

尝试使用[imlib2](http://docs.enlightenment.org/api/imlib2/html/)来处理 PNG 文件的翻译。显然，它有一个[Delphi 绑定](http://www.koders.com/delphi/fid08582865A26A809A6A0B1E0CEE04493F029B2DE0.aspx?s=tlist%20record#L310)。

如果你真的被卡住了，你可以使用[Inage Magick](http://www.imagemagick.org/script/index.php)的单独可执行文件来进行图像裁剪。

# windows - Windows server 2008 IIS 7.5 文件夹或文件找不到 +

> ID：10380058
> 
> 赞同：1
> 
> 时间：2012-04-30T07:34:58.530
> 
> 标签：windows, iis-7.5, special-folders

我的问题是，服务器上有一个网站： - Windows server 2008 - IIS 7.5

并且有一些图像文件的文件夹。

文件夹和文件名是这样的：

```
www.somedomain.com/images/picture+pro/myimage.gif 
```

还

```
www.somedomain.com/images/picture/myimage+pro.gif 
```

有同样的问题。

问题是；特殊字符“+”无法在带有 IIS 7.5 的 Windows Server 2008 上读取，但当我在 Windows 7 机器上使用 Visual Studio 2010 本地开发时读取它。

我可以在 Windows 2008 或 IIS 7.5 上进行一些配置以允许读取包含“+”字符的文件夹和/或文件吗？

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:42:40.113

有趣的是，我今天在使用 IIS ARR 反向代理运行在 Windows 上的 TomCat 应用程序时遇到了这样的事情，该应用程序`+`在其 url 中使用字符。

尝试`allowDoubleEscaping`在网站上允许。如果您有 IIS MMC 访问权限，则可以在请求过滤小程序中进行配置：

![在此处输入图像描述](../Images/aaf23bfc601a1baa2294a9c2b61df220.png)

如果没有并且您的托管服务商允许，您可以在您网站的`web.config`文件中进行设置：

```
<configuration>
  <system.webServer>
    <security>
      <requestFiltering allowDoubleEscaping="true">
      </requestFiltering>
    </security>
  </system.webServer>
</configuration> 
```

如果您得到以下结果应该可以工作：

> HTTP 错误 404.11 - 未找到
> 
> 请求过滤模块用于拒绝包含双转义序列的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:22:07.413

不幸的是，我无法在服务器上解决此问题，而是更改了相关数据库上的引用名称，删除了“+”字符。

因此，我认为可以公平地说，即使“+”字符在本地计算机上使用 Visual Studio 的虚拟 IIS 服务器，也并不意味着它可以在 Windows 服务器上运行。

我要感谢 ta.speot.is 的努力。

# c++ - c++ 概念帮助，指针

> ID：10380064
> 
> 赞同：2
> 
> 时间：2012-04-30T07:35:59.150
> 
> 标签：c++, pointers

所以我对指针有一个合理的理解，但有人问我它们之间的区别是什么：

```
void print(int* &pointer)

void print(int* pointer) 
```

我自己还是个学生，我不是 100%。如果这是基本的，我很抱歉，但我的谷歌搜索技能让我失望了。无论如何你可以帮助我更好地理解这个概念。好久没用过c++了，想帮一个学生辅导一下，也想为她巩固一下我的概念知识。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T07:37:04.110

第一个通过引用传递指针，第二个通过值传递。

如果您使用第一个签名，您可以修改指针指向的内存以及它指向的内存。

例如：

```
void printR(int*& pointer)   //by reference
{
   *pointer = 5;
   pointer = NULL;
}
void printV(int* pointer)    //by value
{
   *pointer = 3;
   pointer = NULL;
}

int* x = new int(4);
int* y = x;

printV(x);
//the pointer is passed by value
//the pointer itself cannot be changed
//the value it points to is changed from 4 to 3
assert ( *x == 3 );
assert ( x != NULL );

printR(x);
//here, we pass it by reference
//the pointer is changed - now is NULL
//also the original value is changed, from 3 to 5
assert ( x == NULL );    // x is now NULL
assert ( *y = 5 ;) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:42:37.893

第一个通过引用传递指针。如果您通过引用传递，该函数可以更改传递参数的值。

```
void print(int* &pointer)
{
  print(*i);  // prints the value at i
  move_next(i);  // changes the value of i. i points to another int now
}

void f()
{
  int* i = init_pointer();
  while(i)
    print(i);  // prints the value of *i, and moves i to the next int.
} 
```

# python - 用大写单词拆分一串单词

> ID：10380065
> 
> 赞同：3
> 
> 时间：2012-04-30T07:36:06.713
> 
> 标签：python, regex, string

我有一组名字，其中姓氏大写，名字和中间名是正常的，例如

```
OBAMA Barack
DEL MONTE Alfredo 
```

我想把这些分成

```
"OBAMA", "Barack"
"DEL MONTE", "Alfredo" 
```

实现这一目标的pythonic方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T07:44:00.330

```
>>> import itertools
>>> [
...    ' '.join(items)
...    for _, items in itertools.groupby('DEL MONTE Alfredo'.split(), str.isupper)
... ]
['DEL MONTE', 'Alfredo'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:43:17.737

```
def split_names(names):
    for s in names:
        last_names = []
        name_parts = s.split()
        while name_parts and name_parts[0].isupper():
            last_names.append(name_parts.pop(0))
        yield ' '.join(last_names), ' '.join(name_parts)

names = ["OBAMA Barack", "DEL MONTE Alfredo"]
for last_name, first_name in split_names(names):
    print last_name
    print first_name
    print 
```

印刷：

```
OBAMA
Barack

DEL MONTE
Alfredo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T09:04:52.570

您可以使用一个简单的正则表达式：

```
import re

a = "DEL MONTE Alfredo"
first, last = re.match(r'([A-Z ]+)\s+(.+)', a).groups() 
```

或遍历单词列表并过滤掉全部大写的单词：

```
first = ' '.join(w for w in a.split() if w.isupper())
last =  ' '.join(w for w in a.split() if not w.isupper()) 
```

在我个人看来，“最pythonic”===“最简单”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T07:44:29.740

试试这个：

```
(?![A-Z][a-z])([A-Z ]+) ([A-Z][a-z]+) 
```

# uiwebview - 我无法在 UIWebview 中加载以下网址

> ID：10380069
> 
> 赞同：2
> 
> 时间：2012-04-30T07:36:33.210
> 
> 标签：uiwebview

请验证为什么下面的 url 没有在 iOS 应用程序中加载

[https://opac.nie.edu.sg/uhtbin/cgisirsi.exe/x/MAIN/0/5?searchdata1=new%20title%202012%20mar%20ebooks](https://opac.nie.edu.sg/uhtbin/cgisirsi.exe/x/MAIN/0/5?searchdata1=new%20title%202012%20mar%20ebooks) {691}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:04:02.293

很可能是花括号导致您的问题：这篇文章应该有所帮助： [NSURL with Curly Braces](https://stackoverflow.com/questions/8335796/nsurl-with-curly-braces)

# groovy - groovy - 是否有任何隐式变量可以访问“每个”方法中的项目索引

> ID：10380074
> 
> 赞同：7
> 
> 时间：2012-04-30T07:36:52.960
> 
> 标签：groovy

有没有办法在以下示例中删除变量“i”并且仍然可以访问正在打印的项目的索引？

```
def i = 0;
"one two three".split().each  {
    println ("item [ ${i++} ] = ${it}");
} 
```

=============== 编辑 ================

我发现一种可能的解决方案是使用“eachWithIndex”方法：

```
"one two three".split().eachWithIndex  {it, i
    println ("item [ ${i} ] = ${it}");
} 
```

请让我知道是否有其他解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T08:16:00.673

您可以使用`eachWithIndex()`

```
"one two three four".split().eachWithIndex() { entry, index ->
      println "${index} : ${entry}" } 
```

这将导致

```
0 : one
1 : two
2 : three
3 : four 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:31:05.973

不确定您正在寻找什么“其他解决方案”......我能想到的唯一其他可以做的事情（使用 Groovy 1.8.6）是这样的：

```
"one two three".split().with { words ->
  [words,0..<words.size()].transpose().collect { word, index ->
    word * index
  }
} 
```

如您所见，这也允许您使用`collect`索引（因为没有`collectWithIndex`方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:02:26.517

另一种方法，如果你想在其他方法上使用集合的索引，而不是`each`定义一个`enumerate`返回 pairs 的方法`[index, element]`，类似于[Python 的 enumerate](http://docs.python.org/library/functions.html#enumerate)：

```
Iterable.metaClass.enumerate = { start = 0 -> 
    def index = start
    delegate.collect { [index++, it] }
} 
```

因此，例如：

```
assert 'un dos tres'.tokenize().enumerate() == [[0,'un'], [1,'dos'], [2,'tres']] 
```

（请注意，我使用`tokenize`而不是`split`因为前者返回 Iterable，而后者返回 a `String[]`）

我们可以使用这个新的集合`each`，如你所愿：

```
'one two three'.tokenize().enumerate().each { index, word ->
    println "$index: $word"
} 
```

或者我们可以将它与其他迭代方法一起使用：D

```
def repetitions = 'one two three'.tokenize().enumerate(1).collect { n, word -> 
    ([word] * n).join(' ')
}
assert repetitions == ['one', 'two two', 'three three three'] 
```

* * *

**注意**：定义该方法的另一种`enumerate`方法，遵循 tim_yates 的[更多功能方法](https://stackoverflow.com/a/10380637/581845)是：

```
Iterable.metaClass.enumerate = { start = 0 -> 
    def end = start + delegate.size() - 1
    [start..end, delegate].transpose()
} 
```

# assembly - x86 中的方向标志

> ID：10380076
> 
> 赞同：7
> 
> 时间：2012-04-30T07:36:54.153
> 
> 标签：assembly, x86, microprocessors, eflags

我无法理解方向标志是如何工作的`x86`。我讲座中的文字说它**增加**或**减少****源**或**目标**寄存器，但它的名称没有意义。有人可以解释它的作用吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T07:39:25.370

此标志用于字符串操作，并指定字符串是否从低地址开始并继续到更高地址，反之亦然。

对于字符串指令，`ECX`具有迭代次数、`DS:ESI`源地址和`ES:EDI`目标地址（因此有*s* in`ESI`和*d* in `EDI`）。

每次迭代后，`ECX`减一，`ESI`并且`EDI`根据`EFLAGS.DF`.

如果`EFLAGS.DF`是`0`,`ESI`并且`EDI`递增，否则递减。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T07:43:46.773

让我们以`rep movsb`依赖于方向标志的指令为例。

当您执行 a`rep movsb`时，您提供源地址 in `esi`、目标地址 in`edi`并计数`ecx`。处理器基本上执行一个循环。在正常情况下（当方向标志被清除时）它会递增`esi`并且`edi`循环的每次迭代，因此您将它们初始化为指向您正在复制的源块和目标块的开始。在执行 时`REP MOVSB`，处理器会递增源地址和目标地址，直到到达被复制块的末尾。

当设置了方向标志时，处理器反而递减寄存器。这意味着您需要从它们指向您正在复制的内存块的*末尾开始。*它不是从头开始复制到结尾，而是从结尾开始并向后复制直到到达开头。

# android - 调用意图“new Intent(MediaStore.ACTION_VIDEO_CAPTURE);”时未正确保存视频录制

> ID：10380082
> 
> 赞同：1
> 
> 时间：2012-04-30T07:37:10.497
> 
> 标签：android, camera

我有简单的标准代码，它记录视频如下

```
 public class TtActivity extends Activity {
    /** Called when the activity is first created. */

        File videoFile;
        Uri fileUri;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newconferencehomelayout);

        videoFile = new File(Environment.getExternalStorageDirectory(),"test.mp4");

        if(!videoFile.exists()){

            try {
                    videoFile.createNewFile();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
        }

        Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(videoFile));
        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
        startActivityForResult(intent, 1);

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        if(requestCode == 1){

            if(resultCode == RESULT_OK){

                Toast.makeText(TtActivity.this, "File saved at "+videoFile.getPath(), Toast.LENGTH_SHORT).show();

            }

            else if (resultCode == RESULT_CANCELED) {

                Toast.makeText(TtActivity.this, "Recording cancelled..", Toast.LENGTH_SHORT).show();

                }

            else{

                Toast.makeText(TtActivity.this, "Capturing failed..", Toast.LENGTH_SHORT).show();

            }

        }

} 
```

在清单中我有

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tt.cc"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-feature android:name="android.hardware.camera" android:required="false" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="TtActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

所以我的问题是在录制完成后创建文件但视频文件的大小为 0 字节...因此无法播放它..所以请帮我解决这个问题..我正在我的 htc 愿望手机上测试它.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:32:22.890

尝试这个...

```
intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);
intent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 200); 
```

有关更多信息，请参阅[此](http://developer.android.com/reference/android/provider/MediaStore.html)链接...

# android - 视频无法在 Android 设备中播放

> ID：10380084
> 
> 赞同：0
> 
> 时间：2012-04-30T07:37:13.503
> 
> 标签：android

我已经使用 videoview 播放来自 url 的视频。在模拟器中尝试时，我收到错误消息为“抱歉无法播放此视频”。我虽然发生错误是因为我试图在模拟器中运行..但即使在安装到 Android 设备后，我也会收到相同的错误消息...请帮助我解决这个问题...

我的代码如下

```
 VideoView vv;
    vv = (VideoView) this.findViewById(R.id.VideoView);
    MediaController mc = new MediaController(this);
    mc.setAnchorView(vv);
    Uri videoUri = Uri
        .parse(d_playurl); //"http://people.sc.fsu.edu/~jburkardt/data/mp4/cavity_flow_movie.mp4"
    vv.setMediaController(mc);

    vv.setVideoURI(videoUri);

    vv.requestFocus();
    vv.start(); 
```

我什至可以在模拟器中播放 mp4 视频，但想知道为什么即使在设备中也无法播放任何其他 url。

注意：playurl 是我从 json 提要中检索并传递该 url 的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:42:27.480

在将实际流 URL 呈现给 VideoView 之前，您的 URL 是否需要重定向？VideoView 无法处理重定向。

**编辑** Android 播放器无法播放所有格式。阅读 [抱歉，无法播放此视频 - 将 mp4 流式传输到 android](https://stackoverflow.com/questions/8012494/sorry-this-video-cannot-be-played-streaming-mp4-to-android) 和[Android videoView 给我警报“抱歉，此视频无法播放”？](https://stackoverflow.com/questions/8714033/android-videoview-gives-me-alert-sorry-this-video-cannot-be-played)

# android - 表格布局间距问题

> ID：10380092
> 
> 赞同：2
> 
> 时间：2012-04-30T07:38:21.870
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/e0f1d32b3e8390a25ac71efb77e654bb.png) 我正在使用表格布局。我想要的是在屏幕左侧的垂直布局（表格布局）中看到的图标等间距，以覆盖整个屏幕的高度。我尝试了不同的方法，例如 layout_weight="1"，将图像宽度设置为 0dp，然后设置权重......但其中没有一个有帮助......

这是xml...

```
 <TableLayout
                android:id="@+id/tableLayout1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"

                android:layout_marginTop="50dp" >

                 <TableRow
                   android:layout_weight="1"
                 >
                   <Button
                 android:id="@+id/button1"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"                                       
                 android:background="@drawable/XXX" />
                 </TableRow>

                 <TableRow
                    android:layout_weight="1"
                    >
                <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Desserts" 
                 />
                    </TableRow>

                    <TableRow
                     android:layout_weight="1"
                  >
                   <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"

                android:background="@drawable/sraberrydrink" />
                   </TableRow>

                   <TableRow
                   android:layout_weight="1"
                    >
                    <TextView
              android:id="@+id/textView2"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"

              android:text="Drinks"
              android:textColor="#000000"            
              android:textSize="10dp" />
                    </TableRow>

                    <TableRow
                    android:layout_weight="1"
                    >

                   <Button
              android:id="@+id/button3"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"

              android:background="@drawable/newsoups" />
                     </TableRow>
                 <TableRow
                     android:layout_weight="1"
                     >
                   <TextView
              android:id="@+id/textView3"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginLeft="45dp"
              android:text="Starters"
              android:textColor="#000000"
              android:textSize="10dp" />

                     </TableRow>
                     <TableRow
                         android:layout_weight="1" >

             <Button
             android:id="@+id/button4"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_marginLeft="40dp"
             android:layout_marginTop="3dp"

             android:background="@drawable/chipa" />
                  </TableRow> 
                  <TableRow
                  android:layout_weight="1"
                  >
                <TextView
             android:id="@+id/textView4"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="Snacks" 
             android:layout_marginLeft="45dp"
             android:textColor="#000000"
             android:textSize="10dp"/> 
                </TableRow>

           </TableLayout> 
```

如果有人可以指出一个解决方案....谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:50:32.610

![在此处输入图像描述](../Images/9f64406f3934ea6cf5e17a96e2374b52.png)

你可以做的是可以使用这样的线性布局

```
!<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <LinearLayout
    android:id="@+id/layout_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:background="#2e8b57" android:layout_weight=".8" android:gravity="center">

    <LinearLayout 
    android:id="@+id/layout_main"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:layout_weight=".5">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout>

         <LinearLayout 
    android:id="@+id/layout_main"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:layout_weight=".5">
    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout>

              <LinearLayout 
    android:id="@+id/layout_main"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:layout_weight=".5">
    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout>

                   <LinearLayout 
    android:id="@+id/layout_main"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:layout_weight=".5">
    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    </LinearLayout>
    </LinearLayout>

        <LinearLayout 
    android:id="@+id/layout_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#8fbc8f" android:layout_weight=".2">
             <LinearLayout
    android:id="@+id/layout_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"  android:layout_weight=".8" android:gravity="center">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    </LinearLayout>

                 <LinearLayout
    android:id="@+id/layout_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"  android:layout_weight=".8" android:gravity="top|center">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    </LinearLayout>
            </LinearLayout>
</LinearLayout> 
```

# javascript - Microsoft JScript 运行时错误：无法获取属性“值”的值：对象为空或未定义

> ID：10380098
> 
> 赞同：1
> 
> 时间：2012-04-30T07:38:36.177
> 
> 标签：javascript, asp.net-mvc-3

我正在处理一个 asp.net 网页，有一个 texbox，我想确保输入的文本少于 3 个字符，我写的代码是

```
<input type="text" name="searchcatid" size="15" onblur="test_length(Index.searchchatid)" />

<script>

function test_length(testcontrol) {

    var teststring = testcontrol.value;

    if (teststring.length >= 3) {
        alert("ID must be 3 or fewer characters!");
        testcontrol.focus();
    }
    else {
    }

} 

</script> 
```

并且我收到错误“Microsoft JScript 运行时错误：无法获取属性'值'的值：对象为空或未定义”，每当我输入某些内容时，我都不知道出了什么问题，因为我在 asp.net 中真的很新，甚至不确定我的代码是否真的有效，希望有人能帮助我，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:44:43.207

以适当的方式传递输入元素：

```
<input type="text" name="searchcatid" size="15" onblur="test_length(this);" /> 
```

[如果您通过 JavaScript](https://developer.mozilla.org/en/DOM/element.addEventListener)而不是使用内联事件注册事件处理程序，那就更好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:42:39.433

是不是有问题，请检查

`name="searchcatid"` `Index.searchchatid` 拼写`searchcatid`不匹配

# jquery - 通过点击事件获取选定的文本

> ID：10380102
> 
> 赞同：1
> 
> 时间：2012-04-30T07:38:52.723
> 
> 标签：jquery, html, jquery-mobile

我想使用点击事件标记我选择的文本。请参阅以下代码：

```
$(function () {

    $('body').bind('taphold', function (e) {
        $(this).addClass('highlighted');
        e.stopImmediatePropagation();
        return false;
    });

}); 
```

但是 $(this) 返回正文，我怎样才能得到选中的内容呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:49:27.040

当您将事件与`body`so绑定时，`$(this)`将返回`body`，但`e.target`将返回您触发事件的目标元素。

```
$(function () {
    $('body').bind('taphold', function (e) {
        $(e.target).addClass('highlighted');   // use e.target instead of this
        e.stopImmediatePropagation();
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:32:22.957

$(document).delegate('这里应该是文本选择器，比如id或者类名', 'taphold', function (e) {

```
 $(this).addClass('highlighted');
             e.stopImmediatePropagation();
             return false;
        }); 
```

希望这会有所帮助。

# javascript - 将 JavaScript 变量传递给 PHP - IE6、IE7 和 IE8 中的错误

> ID：10380107
> 
> 赞同：1
> 
> 时间：2012-04-30T07:39:08.190
> 
> 标签：javascript, php, internet-explorer-7, internet-explorer-6

我正在尝试使用以下代码让浏览器视口区将 Javascript 变量传递给 PHP：

**第一个代码**

```
<?php
if (isset($_GET['width']) AND isset($_GET['height'])) {
  // output the geometry variables
  echo "Screen width is: ". $_GET['width'] ."<br />\n";
  echo "Screen height is: ". $_GET['height'] ."<br />\n";
} else {
  // pass the geometry variables
  // (preserve the original query string
  //   -- post variables will need to handled differently)

  echo "<script language='javascript'>\n";
  echo "  location.href=\"${_SERVER['SCRIPT_NAME']}?${_SERVER['QUERY_STRING']}"
            . "&width=\" + screen.width + \"&height=\" + screen.height;\n";
  echo "</script>\n";
  exit();
}
?> 
```

上面的代码给了我屏幕宽度和高度，这在包括 IE6、7 和 8 在内的所有浏览器中都可以正常工作。

但是当我将它更改为 from `screen.width` **to** `window.innerWidth` **和** `screen.height` **to** `window.innerHeight`

**像这样** `. "&width=\" + window.innerWidth + \"&height=\" + window.innerHeight;\n";`

它在所有浏览器中都可以正常工作，但对于 IE6、7 和 8，它说

```
Screen width is: undefined
Screen height is: undefined 
```

在网上寻找解决方案时，我发现了另一段代码：

**第二代码**

```
<script type="text/javascript">
var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName('body')[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;

document.write('<p>Your viewport size is '+x+' x '+y+'</p>');
</script> 
```

此代码显示浏览器视口，它在包括 IE6、7 和 8 在内的所有浏览器中都可以正常工作。

当我在 php 文件中同时运行这两个代码时，第一个显示为`undefined`abd，第二个完美运行。请看下面的截图

**我不是新手程序员，无法将第二个代码连接到第一个逻辑。请帮我这样做。**

以下是所有浏览器的屏幕截图：

**互联网浏览器 6**

![互联网浏览器 6](../Images/afa092e78397a370058f2a76d3570952.png)

**互联网浏览器 7**

![互联网浏览器 7](../Images/42b8aabea227c0850ddddd8952272e6d.png)

**互联网浏览器 8**

![互联网浏览器 8](../Images/48f732314dd198bf07254b1cdbace361.png)

**互联网浏览器 9**

![互联网浏览器 9](../Images/ae4698ba959d7a564111cfc479e3c223.png)

**狐狸**

![狐狸](../Images/d7453a3d79dafecca316bf9ecb011459.png)

**谷歌浏览器**

![谷歌浏览器](../Images/d9a4996a3596dfa09d5bbb03a74d8570.png)

**歌剧**

![歌剧](../Images/0dbd25b0806b9b16e27d6cdfa611b380.png)

**苹果浏览器**

![苹果浏览器](../Images/1d221596f15afa8c76b16e68db706411.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:55:27.893

IE8 及更低版本不支持 window.innerHeight/Width。尝试使用`document.documentElement.clientHeight/document.documentElement.clientWidth`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:02:23.943

让我们以更漂亮的格式布置第二个代码

```
<script type="text/javascript">
    var w=window;
    var d=document;
    var e=d.documentElement;
    var g=d.getElementsByTagName('body')[0];
    var x=w.innerWidth||e.clientWidth||g.clientWidth;
    var y=w.innerHeight||e.clientHeight||g.clientHeight;

    document.write('<p>Your viewport size is '+x+' x '+y+'</p>');
</script> 
```

Javascript 有一个很好的小技巧，`||`可以将 (or) 运算符用作 if/else

例如，该行`var x=w.innerWidth||e.clientWidth||g.clientWidth;`是以下内容的简写

```
var x = undefined;
if (w.innerWidth) {
    x = w.innerWidth;
} else if (e.clientWidth) {
    x = e.clientWidth;
} else if (g.clientWidth) {
    x = g.clientWidth;
} 
```

所以，这里发生的事情是 IE 没有定义变量`window.innerWidth`，因此你得到了`undefined`. Yout 代码在这里停止，而工作代码尝试其他一些变量，那些是`document.documentElement.clientWidth`（文档的宽度）和`document.getElementsByTagName('body')[0].clientWidth`（页面正文的宽度）

Internet Explorer 定义了其中的 1 个，它为您提供了正确的结果

回到你的代码：

将以下内容放在 HTML 页面中的某处

```
<script type="text/javascript">
    function GetScreenSize() {
        var w=window;
        var d=document;
        var e=d.documentElement;
        var g=d.getElementsByTagName('body')[0];
        var x=w.innerWidth||e.clientWidth||g.clientWidth;
        var y=w.innerHeight||e.clientHeight||g.clientHeight;
        return {x:x, y:y};
    }
</script>

echo "  var sz = GetScreenSize()\n"; //Call the function to get the screen size
echo "  location.href='${_SERVER['SCRIPT_NAME']}?${_SERVER['QUERY_STRING']}&width=' + sz.x + '&height=' + sz.x;\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:56:23.733

只是结合两个脚本？在你的标签中回显这个：

```
echo("var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName('body')[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;")

echo("location.href=\"${_SERVER['SCRIPT_NAME']}?${_SERVER['QUERY_STRING']}"
        . "&width=\" + x + \"&height=\" + y;\n";") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:34:02.290

谢谢安德鲁布洛克，你的代码也为我工作......

```
<?php
        echo "<br /><br />";
        if (isset ($_REQUEST['width'])) {
            $width=$_REQUEST['width'];
        } else {
            $width=0;
        }

        if (isset ($_REQUEST['height'])) {
            $height=$_REQUEST['height'];
        } else {
            $height=0;
        }
    ?>
    <html>
            <head>
                    <title> width=<?echo $width?> & height=<?echo $height?> </title>
                    <script type="text/javascript">
                        function GetScreenSize() {
                            var w=window;
                            var d=document;
                            var e=d.documentElement;
                            var g=d.getElementsByTagName('body')[0];
                            var x=w.innerWidth||e.clientWidth||g.clientWidth;
                            var y=w.innerHeight||e.clientHeight||g.clientHeight;
                            return {x:x, y:y};
                        }
                        var size=GetScreenSize();
                    </script>
            </head>
            <body>
                    <br />
                    width is <?echo $width?>
                    <br />
                    height is <?echo $height?>
            </body>
    </html>
    <?php
        if (!isset($_REQUEST['width'])&& !isset($_REQUEST['height'])){
            echo "<script language='javascript'>\n";
            echo "  var sz = GetScreenSize()\n";
            echo "  location.href=\"${_SERVER['SCRIPT_NAME']}?${_SERVER['QUERY_STRING']}"
                    . "&width=\" + sz.x + \"&height=\" + sz.y;\n";
            echo "</script>\n";
      }
    ?> 
```

尝试“ [http://192.168.0.9:6060/second/temp_1.php](http://192.168.0.9:6060/second/temp_1.php) ”

你会得到

![结果](../Images/d96e63e022bc859e4ddbd5fb27d9600f.png)

谢谢

# java - Perl 与 Java 中的多线程

> ID：10380110
> 
> 赞同：0
> 
> 时间：2012-04-30T07:39:54.950
> 
> 标签：java, multithreading, perl

我是 Perl 的新手，我正在编写一个需要使用线程的程序。我在 Perl 中找到了[线程功能](http://perldoc.perl.org/threads.html)，但我发现我仍然有点困惑。正如这篇文章的标题所述，Java 可能是最常用的线程。我并不是说它是完美的，但我可以使用[Thread](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html)类完成工作。

在 Java 中，我有一个名为 startThreads 的方法，在该方法中我创建了线程，然后启动了它们。启动它们后，有一个 while 循环正在检查踏板是否完成。如果所有线程都已正确退出，则 while 循环退出，但如果没有，则 while 循环正在监视哪些线程已超时，然后安全地中断这些线程并将其关闭标志设置为 true。

问题：在 Perl 中，我想使用与上面所述相同的算法，但是 Perl 中当然存在差异，而且我是 Perl 的新手。是否可以在其他线程运行时运行 while 循环？它是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:10:14.367

您可以`while`使用 Perl 来实现您的循环，`threads->list()`但您应该首先考虑一种不同的方法。

与其等待线程，不如等待结果？

这里的基本思想是，您的代码从队列中获取工作单元，并将工作单元的结果（对象或异常）放入输出队列。

启动几个线程等待输入队列中的工作单元。当一个出现时，运行工作单元并将结果放入输出队列。

在您的主代码中，您只需将所有 N 个工作单元放入输入队列（确保它足够大）。之后，您可以在输出队列中等待 N 个输出，您就完成了，无需担心线程、连接和异常。

**[编辑]**你所有的问题都应该在[http://perldoc.perl.org/perlthrtut.html中回答](http://perldoc.perl.org/perlthrtut.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T17:11:26.883

在 perl 中使用线程时要小心。关于安全访问共享数据有很多细微差别。因为大多数 Perl 代码不执行线程，所以很少有模块是线程安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T05:43:39.183

在阅读了 Michael Slade 提供的链接后，我发现 Cyber​​-Guard Enterprise 是正确的。通过分离线程，主线程仍在执行工作。我尚未对其进行测试，但看起来 $thr->is_running() 可以告诉我线程是否仍在运行。

这是从提供的 url 中获取的，并显示了如何使用 detach。perldoc.perl.org/perlthrtut.html？

```
use threads;
my $thr = threads->create(\&sub1); # Spawn the thread
$thr->detach(); # Now we officially don't care any more
sleep(15); # Let thread run for awhile
sub sub1 {
$a = 0;
while (1) {
$a++;
print("\$a is $a\n");
sleep(1);
}
} 
```

# c# - WPF Flowdocument“更改大小写”功能

> ID：10380112
> 
> 赞同：0
> 
> 时间：2012-04-30T07:39:57.707
> 
> 标签：c#, wpf, flowdocument

我正在为我的 RichTextBox 实现“更改大小写”功能，就像 word 使用 Shift+F3 一样。它所做的只是在小写->大写->标题大小写之间切换，一旦我可以访问我需要的字符串，这非常简单。

我的问题是，如何在流文档中更改（并首先找到它）字符串而不丢失可能包含在字符串中的任何嵌入元素（丢失格式不是问题）。与 word 相同，我在 2 种情况下需要此功能：

1）鼠标选择的文本。我试过了

```
this.Selection.Text = newText; 
```

但这当然失去了我的嵌入元素。

2）插入符号位置之前的最后一个单词。任何非文本元素都是单词分隔符，但是一个单词可以是

```
"He<weird formatting begin>ll<weird formatting end>o". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:54:49.237

**解决方案**

通过这种方式，它模仿了 MS WORD Shift+F3 的行为。在极少数情况下发生的唯一问题是 carret 被移动到单词开头而不是保持其位置。我想在 EditingCommands.MoveLeftByWord.Execute(null, this); 之后短暂睡眠 会解决这个问题，但这将是一个肮脏的黑客，我正在尝试找到一个更好的解决方案。

```
private void ChangeCase()
    {
        try
        {
            TextPointer start;
            TextPointer end;
            FindSelectedRange(out start, out end);
            List<TextRange> textToChange = SplitToTextRanges(start, end);
            ChangeCaseToAllRanges(textToChange);
        }
        catch (Exception ex)
        {
            mLog.Error("Change case error", ex);
        }

    }

    private void FindSelectedRange(out TextPointer start, out TextPointer end)
    {
        if (!this.Selection.IsEmpty)
        {
            start = this.Selection.Start;
            end = this.Selection.End;
        }
        else
        {
            end = this.CaretPosition;
            EditingCommands.MoveLeftByWord.Execute(null, this);
            start = this.CaretPosition;
            this.CaretPosition = end;

        }
    }

    private static List<TextRange> SplitToTextRanges(TextPointer start, TextPointer end)
    {
        List<TextRange> textToChange = new List<TextRange>();
        var previousPointer = start;
        for (var pointer = start; pointer.CompareTo(end) <= 0; pointer = pointer.GetPositionAtOffset(1, LogicalDirection.Forward))
        {
            var contextAfter = pointer.GetPointerContext(LogicalDirection.Forward);
            var contextBefore = pointer.GetPointerContext(LogicalDirection.Backward);
            if (contextBefore != TextPointerContext.Text && contextAfter == TextPointerContext.Text)
            {
                previousPointer = pointer;
            }
            if (contextBefore == TextPointerContext.Text &&  contextAfter != TextPointerContext.Text && previousPointer != pointer)
            {
                textToChange.Add(new TextRange(previousPointer, pointer));
                previousPointer = null;
            }
        }
        textToChange.Add(new TextRange(previousPointer ?? end, end));
        return textToChange;
    }

    private void ChangeCaseToAllRanges(List<TextRange> textToChange)
    {
        var textInfo = (mCasingCulture ?? CultureInfo.CurrentUICulture).TextInfo;
        var allText = String.Join(" ", textToChange.Select(x => x.Text).Where(x => !string.IsNullOrWhiteSpace(x)));
        Func<string, string> caseChanger = GetConvertorToNextState(textInfo, allText);
        foreach (var range in textToChange)
        {
            if (!range.IsEmpty && !string.IsNullOrWhiteSpace(range.Text))
            {
                range.Text = caseChanger(range.Text);
            }
        }
    }

    private static Func<string, string> GetConvertorToNextState(TextInfo textInfo, string allText)
    {
        Func<string, string> caseChanger;
        if (textInfo.ToLower(allText) == allText)
        {
            caseChanger = (text) => textInfo.ToTitleCase(text);
        }
        else if (textInfo.ToTitleCase(textInfo.ToLower(allText)) == allText)
        {
            caseChanger = (text) => textInfo.ToUpper(text);
        }
        else
        {
            caseChanger = (text) => textInfo.ToLower(text);
        }
        return caseChanger;
    } 
```

# android - 按下主页按钮时活动关闭

> ID：10380122
> 
> 赞同：1
> 
> 时间：2012-04-30T07:40:26.863
> 
> 标签：android, android-activity, android-homebutton

我有 2 个活动“A”和“B”，“A”开始“B”。我使用 startActivityForResult() 方法启动活动“B”。当“B”在前台并且按下主页按钮时，应用程序进入后台。当我再次尝试启动应用程序时，它从活动“A”开始，而不是“B”。活动“B”的结果被取消。为什么“B”是封闭的？我认为在清单中使用 launchModes 可以解决问题，但文档说我不能使用 singleTask 和 singleInstanse 模式，因为结果将被取消并且活动将无法启动。

我该如何解决这个问题？

PS 谢谢解答，问题已解决。我尝试在 onStop() 中使用 finish()，所以当活动“B”在前台并且按下主页按钮时，它会完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:01:17.847

使用方法 startActivity(Intent) 以意图启动您的活动 B。

您的意图应该使用参数 A.this 和 B.class 创建，导致代码看起来有点像这样：

意图 i = new Intent(A.this, B.class);

A.this.startActivity(i);

# c# - 使用 log4net 记录多个程序集

> ID：10380123
> 
> 赞同：0
> 
> 时间：2012-04-30T07:40:29.453
> 
> 标签：c#, .net, log4net, .net-assembly, log4net-configuration

经过很多问题，最后我设法为我的窗口服务配置了 log4net。

我对它很陌生，今天我开始配置它。我有以下这些疑问。

1）**我需要在多个程序集中使用它。假设我有一个程序集“A”，它作为引用添加到程序集“B”中，这是我的主要程序集，我有 log4net 的引用。我需要记录程序集“A”和“B”。**

2) 我的应用程序是多线程的并且使用了很多线程。那么 log4net 是线程安全的吗？

3）我在我的 app.config 中使用下面的配置。我不太清楚它有什么用。但我不想使用不必要的参数。

```
<log4net>
     <root>
       <level value="DEBUG"/>
       <appender-ref ref="LogFileAppender"/>
     </root>
     <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
       <param name="File" value="C:\logs\log.txt"/>
       <param name="AppendToFile" value="true"/>
       <rollingStyle value="Size"/>
       <maxSizeRollBackups value="10"/>
       <maximumFileSize value="100KB"/>
       <staticLogFileName value="true"/>
       <layout type="log4net.Layout.PatternLayout">
         <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n"/>
       </layout>
     </appender>   
</log4net> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:16:24.483

`<lockingModel type="log4net.Appender.FileAppender+MinimalLock" />`在 appender 部分下使用。我将提高日志记录性能。

log4net 是线程安全的。

```
<maximumFileSize value="10MB" /> //For 100 Kb configuration there will be lot of files. 
```

`<datePattern value="_yyyyMMdd" />`//它将提示记录器在每个日期创建一个新文件。

为 Logger 创建一个静态类，并从您要使用的每个程序集中调用静态函数。

**日志记录示例类：**

```
public static class Logger
    {
        static Logger()
        {
            XmlConfigurator.Configure();
        }

        public static void Log()
        {
            string methodName = new System.Diagnostics.StackFrame(1, true).GetMethod().Name;
            string moduleName = new System.Diagnostics.StackFrame(1, true).GetMethod().ReflectedType.FullName;

            var appLog = LogManager.GetLogger(loggername);
            appLog.Error(...);

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:55:19.297

1.  这不是问题；只需`ILog`在程序集 B 中照常使用。
    只需确保`Configure()`在应用程序的生命周期中调用一次。
2.  是的。
3.  我建议您熟悉 log4net。一个简单的[谷歌搜索](http://www.google.com/search?q=log4net%20tutorial&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)或查看[文档](http://logging.apache.org/log4net/)应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:19:59.380

```
 <root>
       <level value="DEBUG"/>
       <appender-ref ref="LogFileAppender"/>
     </root> 
```

它只会在调试模式下登录，所以在配置中输入以下条目：

```
 <root>
       <level value="ALL"/>
       <appender-ref ref="LogFileAppender"/>
     </root> 
```

# python - 我收到一个 TypeError: 'int' object is unsubscriptable

> ID：10380125
> 
> 赞同：1
> 
> 时间：2012-04-30T07:40:35.777
> 
> 标签：python, panda3d

我四处阅读以了解此错误的含义。我现在明白它在告诉我什么，但是当我向它传递一个列表时，它实际上没有任何意义。这些列表具有我试图索引它们的正确深度。如果我有更有经验的人告诉我出了什么问题，那真的很有帮助。

```
import direct.directbase.DirectStart
from direct.showbase import DirectObject
from panda3d.core import TextNode, Vec3, Vec4
from direct.interval.IntervalGlobal import *
from direct.gui.DirectGui import *
from direct.showbase.DirectObject import DirectObject
import sys
import math

global masses
global dt
global models
global xcel
global xcel2
xcel = []
xcel2 = []
models = []
masses = []
positions = []
velocities = []
dt = 0.1

class mass(DirectObject):
    def __init__(self):
        base.setBackgroundColor(0, 0, 0)
        camera.setPos ( 0, -100, 0 )         
        camera.setHpr ( 0, 0, 0 )

    def createMass(self, name, mass, pos, vel):
    self.name = name
    self.mass = mass
    self.pos = pos
    positions.append(pos)
    global positions
    self.vel = vel
    velocities.append(vel)
    global velocities

    def scaleRenderTexture(self, scale, tex):
    self.model = loader.loadModel("models/sphere")
    self.model.reparentTo(render)
    texture = loader.loadTexture("models/" + tex)
    self.model.setTexture(texture, 1)
    self.model.setPos(self.pos[0], self.pos[1], self.pos[2])
    self.model.setScale(scale)
    masses.append(self.mass)
    models.append(self.model)

class sun(mass):
def __init__(self):
        mass.__init__(self)
    self.createMass( 'sun', 1988920, [0, 0, 0], [0, 0, 0])
    self.scaleRenderTexture(1, 'sun.jpg')

class mercury(mass):
def __init__(self):
    mass.__init__(self)
    self.createMass( 'mercury', 0.3302, [3.241862599523176, -5.623459942709265, -0.7569237943021074], [3.246868365706273*0.000001, 2.673977456413460*0.000001, -7.943396297475591*0.00000001])
        self.scaleRenderTexture(0.5, 'mercury.jpg')

class venus(mass):
def __init__(self):
    mass.__init__(self)
        self.createMass('venus', 4.8685, [-1.034106071554218*10, -3.026887560710919, 5.553453628782571*0.1], [9.607057270995346*0.0000001, 9.607057270995346*0.000001, -1.017130175803783*0.0000001])
    self.scaleRenderTexture(1, 'venus.jpg')

class earth(mass):
def __init__(self):
    self.createMass('earth', 5.9736, [-1.156305861637755*10, -9.663398491949379, 3.476874978550299*0.0001], [ 1.862492028315679*0.000001, -2.296083935603351*0.000001, 9.235729792600083*0.00000000001])
    self.scaleRenderTexture(1, 'earth.jpg')

class moon(mass):
def __init__(self):
    mass.__init__(self)
    self.createMass('moon', 0.07349, [-1.159098389232509*10, -9.637310345944113, -2.989940894073912*0.001], [1.798178987142885*0.000001, -2.375339761912065*0.000001, -2.207441445869889*0.000000001])
    self.scaleRenderTexture(0.5, 'moon.jpg')

class mars(mass):
def __init__(self):
    self.createMass('mars', 0.64185, [-2.422905158679938*10, -3.744196041373893, 5.164753385142086*0.1], [ 4.606798644725879*0.0000001, -2.187755639279240*0.000001, -5.715066713235196*0.00000001])
    self.scaleRenderTexture(1, 'mars.jpg')

class jupiter(mass):
def __init__(self):
    self.createMass('jupiter', 1898.6, [4.622321051914394*10,  5.871875615908649*10, -1.278226639349561], [-1.043365341857297*0.000001, 8.709856358914491*0.0000001, 1.972500372665064*0.00000001])
    self.scaleRenderTexture(1, 'jupiter.jpg')

class saturn(mass):
def __init__(self):
    self.createMass('saturn', 568.46, [-1.301371599111853*100, -6.476615242349228*10, 6.307409695374766], [3.772024323255900*0.0000001, -8.663132035152103*0.0000001, 5.618951648515438*0.00000000001])
    self.scaleRenderTexture(1, 'saturn.jpg')

class uranus(mass):
def __init__(self):
    self.createMass('uranus', 86.832, [2.992063464452280*100, 2.476994299596707*10, -3.783759032649831], [-6.199323493736431*0.000000001, 6.475569300476019*0.0000001, 3.210008048765792*0.000000001])
    self.scaleRenderTexture(1, 'uranus.jpg')

class neptune(mass):
def __init__(self):
    self.createMass('neptune', 102.43, [ 3.919464564967463*100, -2.185268039220477*100, -4.530872464442687], [2.601721469279150*0.0000001, 4.785231712545664*0.0000001, -1.579822877152521*0.000000001])
    self.scaleRenderTexture(1, 'neptune.jpg')

class pluto(mass):
def __init__(self):
    self.createMass('pluto', 0.0125, [ 6.480526105894912*10, -4.765510811963443*100, 3.226311175584855*10], [5.496347900202217*0.0000001, -3.260693806903501*0.00000001, -1.558804760367132*0.0000001])
    self.scaleRenderTexture(0.5, 'pluto.jpg')

def calcA(bodies):
s = [0,0,0]
me = [0,0,0]
v = [0,0,0]
e = [0,0,0]
mo = [0,0,0]
ma = [0,0,0]
ju = [0,0,0]
s = [0,0,0]
u = [0,0,0]
n = [0,0,0]
p = [0,0,0]
xcel = [s, me, v, e, mo, ma, ju, s, u, n, p]
xcel2 = xcel
aX = 0
aY = 0
aZ = 0
for i in range(len(masses)):
    xcel[i] = [aX, aY, aZ]
    aX = 0
    aY = 0
    aZ = 0
    for j in range(len(masses)):
    if i!=j:
        a = models[i].getPos()
        b = models[j].getPos()
        rx = b[0]-a[0]
        ry = b[1]-a[1]
        rz = b[2]-a[2]
        r = math.sqrt(rx*rx+ry*ry+rz*rz)
        xRatio = rx/(ry+rz)
        yRatio = ry/(rx+rz)
        zRatio = rz/(rx+ry)
        acceleration = (9.81*float(masses[i]))/(r*r)
        aX = aX + acceleration*xRatio
        aY = aY + acceleration*yRatio
            aZ = aZ + acceleration*zRatio

    return(xcel)

def calcNextPos(models, xcel, velocities, dt):
for i in range(len(models)):
    for j in range(3):
        a = xcel[i[j]]*0.5*dt*dt
        v = velocities[i[j]]*dt
    positions[i[j]] = positions[i[j]] + v + a
updatePos(positions)

def calcNextVel(velocities, xcel, xcel2, dt):
for i in range(len(models)):
    for j in range(3):
        velocities[i[j]] = velocities[i[j]] + 0.5*(xcel[i[j]] + xcel2[i[j]])*dt
xcel = xcel2
return vel

def updatePos(positions):
for i in range(models):
    for j in range(3):  
    models[i].setPos(positions[i[0]], positions[i[1]], positions[i[2]])

bodies = []     
sun = sun()
mercury = mercury() 
venus = venus()
earth = earth() 
moon = moon()
mars = mars()   
jupiter = jupiter()
saturn = saturn()
uranus = uranus()
neptune = neptune()
pluto = pluto() 
xcel = calcA(bodies)

print(xcel)
print(positions)
print(velocities)
def mainLoop(xcel, models, masses, velocities):
calcNextPos(models, xcel, velocities, dt)
xcel2 = calcA(bodies)
calcNextVel(velocities, xcel, xcel2, dt)

while True:
mainLoop(xcel, models, masses, velocities)
run() 
```

这是控制台的图像：

![截屏](../Images/03524d8ae9024101c3626628cead13a2.png)

我已经看了很多，我无法弄清楚。任何帮助，将不胜感激。我使用的api是panda3d。

谢谢

凯恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:08:27.763

`xcel`是一个二维列表。访问第th 子列表`j`的第 th 元素的正确语法是`i`

```
xcel[i][j]   # not xcel[i[j]]! 
```

目前，您正在尝试获取`j`integer 的第 th 个元素`i`，这会导致您遇到错误。`velocities`和 也是如此`positions`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:46:46.790

因为我是一个整数

```
for i in range(len(models)): 
```

这使得 i 的值在 0 和 a 之间循环，小于`models`

我不确定您的预期目的是什么，但是您无法访问数组元素，就像在接下来的两行带有`i[j]`. 你也许是说

```
for i in range(len(models)):
    for j in range(3):
        a = xcel[models[j]]*0.5*dt*dt
        v = velocities[models[j]]*dt 
```

注意`i[j]`现在`models[j]`

# c# - 如何在显示后立即安全地关闭表单？

> ID：10380126
> 
> 赞同：1
> 
> 时间：2012-04-30T07:40:36.677
> 
> 标签：c#, winforms

在我的主表单中，我在鼠标单击时打开了其他几个表单，如下所示：

主要形式：

```
...
private void btn_Click(object sender, EventArgs e){
    frmNewForm newForm = frmNewForm();
    newForm.Show();
} 
```

在新表单中，我想检查是否有任何数据要显示，如果没有则立即关闭表单。新形式：

```
...
public frmNewForm(){
    InitializeComponent();

    // check if opening this form makes sense
    if(noData){
        Close();
    }
} 
```

但是，我在以下位置抛出异常`frmNewForm.Show()`：无法访问对象。

如果翻译与 Visual Studio 的不完全相同，我深表歉意：我正在使用另一种语言版本。

无论如何，我该怎么做才能安全关闭`frmNewForm`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:43:26.867

您不想在新表单的构造函数中执行此操作。相反，您需要在`Load`事件上执行此操作，以便在关闭它之前完成加载。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)

```
 private void Form1_Load(object sender, EventArgs e)
    {
        if (noData) this.Close();
    } 
```

或者，如果您知道不需要打开表格，请在显示之前检查！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:46:13.630

如果`noData`是您`frmNewForm`班级的公共布尔属性，您可以这样做：

```
if( !newForm.noData )
{
     newForm.Show();
} 
```

有道理？

# android - 如何在android中获取传出mms的地址

> ID：10380128
> 
> 赞同：4
> 
> 时间：2012-04-30T07:40:47.950
> 
> 标签：android, uri, mms, contentobserver

我花了 5 天时间尝试不同的东西，并在谷歌上搜索了很多，但都没有运气

我有一个广播接收器来监控和备份传入的彩信和短信。短信 - 传出和传入很容易没问题。然而彩信...

我有一个接收彩信的广播接收器，那里没问题。

然而，对于传出的彩信，我使用了一个指向 content://mms 的内容观察器

这是从服务类注册内容观察者的部分

```
mo = new MMSObserver(new Handler(),getApplicationContext());
        try{
            getContentResolver().unregisterContentObserver(mo);
        }
        finally{
            getContentResolver().registerContentObserver(Uri.parse("content://mms"), true, mo);
        } 
```

这是上述内容观察器中的 onchange 部分

```
public void onChange(boolean bSelfChange)
{
    super.onChange(bSelfChange);
    Log.i(TAG,"MMSObserver onChange");
    ContentResolver contentResolver = context.getContentResolver();
    Uri uri = Uri.parse("content://mms");
    Cursor cur = contentResolver.quert("content://mms",null,null,null,null)
    if(cur.moveToNext()){
        String id = cur.getString(cur.getColumnIndex("_id"));
        String date = cur.getString (cur.getColumnIndex ("date"));
            String address = getAddress(id);
    }
}
    private static String getAddress(String id){
          String selectionAdd = new String("msg_id=" + id);
            String uriStr = MessageFormat.format("content://mms/{0}/addr", id);
            Uri uriAddress = Uri.parse(uriStr);
            Cursor cAdd = context.getContentResolver().query(uriAddress, null,
                selectionAdd, null, null);
            String name = null;
            if (cAdd.moveToFirst()) {
                do {
                    String number = cAdd.getString(cAdd.getColumnIndex("address"));
                    if (number != null) {
                        try {
                            Long.parseLong(number.replace("-", ""));
                            name = number;
                        } catch (NumberFormatException nfe) {
                            if (name == null) {
                                name = number;
                            }
                        }
                    }
                } while (cAdd.moveToNext());
            }
            if (cAdd != null) {
                cAdd.close();
            }
            return name;
    } 
```

问题是地址列总是为传出的 mms 返回“插入地址令牌”。有没有什么办法可以得到 mms 的号码？

我还注意到，当消息处于草稿形式而不是发送或待处理消息时，会触发内容观察器。因为依赖这些uris通常是一个坏主意，因为它们不是sdk的一部分，所以我改用了另一种方法。对所有短信和彩信进行编目并存储它们的 _id 列，然后将它们与备份同步。但是我的问题仍然存在。

彩信地址栏始终为“插入地址令牌”

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:02:57.233

您可能想尝试这样的事情：

```
Uri uri = Uri.parse("content://mms-sms/conversations/" + mThreadId);
String[] projection = new String[] {
    "body", "person", "sub", "subject", "retr_st", "type", "date", "ct_cls", "sub_cs", "_id", "read", "ct_l", "st", "msg_box", "reply_path_present", "m_cls", "read_status", "ct_t", "status", "retr_txt_cs", "d_rpt", "error_code", "m_id", "date_sent", "m_type", "v", "exp", "pri", "service_center", "address", "rr", "rpt_a", "resp_txt", "locked", "resp_st", "m_size"
};
String sortOrder = "normalized_date";

Cursor mCursor = getActivity().getContentResolver().query(uri, projection, null, null, sortOrder);

String messageAddress;
int type;
while (mCursor.moveToNext()) {
    String messageId = mCursor.getString(mCursor.getColumnIndex("_id"));

    Uri.Builder builder = Uri.parse("content://mms").buildUpon();
    builder.appendPath(messageId).appendPath("addr");
    Cursor c = mContext.getContentResolver().query(builder.build(), new String[] {
        "*"
    }, null, null, null);
    while (c.moveToNext()) {
        messageAddress = c.getString(c.getColumnIndex("address"));

        if (!messageAddress.equals("insert-address-token")) {
            type = c.getInt(c.getColumnIndex("type"));
            c.moveToLast();
        }
    }
    c.close();
} 
```

我实际上并没有`moveToNext()`在我的代码中调用 mCursor 的方法，而是`getView()`在`SimpleCursorAdapter`.

# xml - 当元素的兄弟出现时，显示元素的属性值

> ID：10380131
> 
> 赞同：1
> 
> 时间：2012-04-30T07:41:09.067
> 
> 标签：xml, xslt

```
<a id='a1' name='a1'/>
<b text='b1'/>
<d test='test0' location='L0' text='c0'/>
<a id='a2' name='a2'/>
<b text='b2'/>
<c test='test1' location='L1' text='c1'/>
<c test='test2' location='L2' text='c2'/>
<a id='a3' name='a3'>
<b text='b3'/>
<c test='test3' location='L3' text='c3'/>
<c test='test4' location='L4' text='c4'/>
<c test='test5' location='L5' text='c5'/> 
```

这些元素都是兄弟姐妹。有些没有`<c>`元素，我不会对这些元素做任何事情。

对于这些有一个或两个或多个`<c>`元素，我只想`a/@name`为每个元素显示一次。我`<a>`应用这样的模板，但它不起作用：

```
<xsl:template match="a">
<xsl:choose>
    <xsl:when test="following-sibling::c[1]">
       <p>
          <u>                                           
             <xsl:value-of select="(preceding-sibling::a[1])/@name"/>
          </u>
       </p>                         
    </xsl:when>
    <xsl:otherwise>
    </xsl:otherwise>
</xsl:choose> 
```

我想要这样的输出：

```
a2:

location:L1
test:test1
text:c1

location:L2
test:test2
text:c2

a3:

location:L3
test:test3
text:c3

location:L4
test:test4
text:c4

location:L5
test:test5
text:c5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:11:41.573

从您的 XSLT 和预期结果来看，对于 XML 中的每个**a**元素，您希望输出有关以下**c**元素的信息，如果在下**一个 a**元素出现之前出现的话。

为此，您可以使用**xsl:key**查找给定元素**的****c**元素

 **```
<xsl:key name="lookup" match="c" use="generate-id(preceding-sibling::a[1])" /> 
```

即通过元素前面的第一个**将所有****c**个元素组合在一起。

 **然后，您可以首先选择**一个**元素，其中有这样的**c**元素：

```
<xsl:apply-templates select="a[key('lookup', generate-id())]" /> 
```

然后，在此模板中，您可以选择**cc**元素进行输出，如下所示：

```
<xsl:apply-templates select="key('lookup', generate-id())" /> 
```

因此，给定以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text" indent="yes"/>

   <xsl:key name="lookup" match="c" use="generate-id(preceding-sibling::a[1])" />

   <xsl:template match="/root">
      <xsl:apply-templates select="a[key('lookup', generate-id())]" />
   </xsl:template>

   <xsl:template match="a">
      <xsl:value-of select="concat(@id, ':&#13;', '&#13;')" />
      <xsl:apply-templates select="key('lookup', generate-id())" />
   </xsl:template>

   <xsl:template match="c">
      <xsl:apply-templates select="@*" />
      <xsl:value-of select="'&#13;'" />
   </xsl:template>

   <xsl:template match="c/@*">
      <xsl:value-of select="concat(local-name(), ':', ., ':&#13;')" />
   </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XML 时

```
<root>
   <a id="a1" name="a1"/>
   <b text="b1"/>
   <d test="test0" location="L0" text="c0"/>
   <a id="a2" name="a2"/>
   <b text="b2"/>
   <c test="test1" location="L1" text="c1"/>
   <c test="test2" location="L2" text="c2"/>
   <a id="a3" name="a3"/>
   <b text="b3"/>
   <c test="test3" location="L3" text="c3"/>
   <c test="test4" location="L4" text="c4"/>
   <c test="test5" location="L5" text="c5"/>
</root> 
```

以下是输出

```
a2:

test:test1:
location:L1:
text:c1:

test:test2:
location:L2:
text:c2:

a3:

test:test3:
location:L3:
text:c3:

test:test4:
location:L4:
text:c4:

test:test5:
location:L5:
text:c5: 
```

请注意，我按照它们在 XML 文档中出现的顺序输出**c元素上的属性。******

# java - 未找到数据源名称且未指定默认驱动程序

> ID：10380134
> 
> 赞同：2
> 
> 时间：2012-04-30T07:41:32.483
> 
> 标签：java, odbc

我正在尝试从我的 Java 应用程序连接到 MS Access 数据库。这是我的代码：

```
try {
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
// set this to a MS Access DB you have on your machine
String filename = "UserInformation.accdb";
String database = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=";
database+= filename.trim() + ";DriverID=22;READONLY=true}"; // add on to the end
// now we can get the connection from the DriverManager
Connection con = DriverManager.getConnection( database ,"","");
Statement st= con.createStatement();
int i=st.executeUpdate("insert into Users(User_Name,User_Password)             values('"+username+"','"+password+"')");
System.out.println("Row is added");
}catch (Exception e) {
System.out.println("Error: " + e);
} 
```

我收到此异常：未找到数据源名称且未指定默认驱动程序 (ODBC)？

我该如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:51:31.400

它可以是几件事。我在 64 位桌面上从 32 位机器上破解数据库时遇到了这个问题。

如果您在 Java 中使用 32 位和 64 位的 odbc 搜索问题，您会看到大量的材料。最终对我有用的是从 Java 5 切换到 6，并确保我的 Eclipse 运行时配置没有设置不兼容的位模式。

抱歉有点含糊，但在花了几个小时试图弄清楚之后，我相信它可能非常依赖于情境。

# javascript - Javascript onclick而不是鼠标悬停

> ID：10380139
> 
> 赞同：-2
> 
> 时间：2012-04-30T07:42:26.957
> 
> 标签：javascript, jquery, html, mouseover, show-hide

```
$(function() {
    $(".popup").hide();
    $(".clickMe").mouseover(function () {       
        $(".popup").show();
    }).mouseout(function() {
        $(".popup").hide();//Set this to default hide
    }); 
});

<script type="text/javascript"src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>

<a class="clickMe" href="#"> Click here to see hidden item.</>
<div class="popup"> You've found me! </div> 
```

我找到了我很想实现但不确定如何实现的代码。而不是鼠标悬停，我怎样才能将它设置为 onclick 调用呢？谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T07:45:17.780

这会做到

```
$(function() { 
  $(".popup").hide();                 //Hide the popup first
  $(".clickMe").click(function () {   //Attach a click event to the .clickMe
        $(".popup").toggle();              //Toggle the visibility of the popup
  });
}); 
```

因此，我所做的只是将`mouseover`和事件更改为具有类的元素`mouseout`的单个事件。然后使用 jQuery效果，它将根据 div 是否已经可见来显示或显示，因此“切换”div。[在这里](http://api.jquery.com/toggle/)查看更多信息`click``.clickMe``toggle`

# html - 如何更改以下链接的样式？

> ID：10380142
> 
> 赞同：1
> 
> 时间：2012-04-30T07:42:29.297
> 
> 标签：html, css

在这里，我有一些来自我正在制作的网站的代码。我在样式化 CSS 中的链接时遇到问题。我不确定为什么他们不会改变。另外，我使用类的原因是因为我将这段代码重复了 4 次（不要担心为什么：P）顺便说一句，我也尝试将 'a' 放在 .profileLinks 前面，但也不起作用 :(

这是外部 CSS 样式表

```
#trends .profileLinks a:link{
    color:#0000FF;
    text-decoration:none;
    background: transparent;
}

#trends .profileLinks a:visited {
    text-decoration: none; 
    color: #0000FF; 
    background: transparent;
} 
```

这是HTML代码

```
<div id="trends">
    <h1> Trends... </h1>
    <a href="#" title="Profile Image"><img src="logo.png" alt="Profile Image" height="59" width="68"> </a>
    <a class="profileLinks" href="#" title="User's Profile Name"> Mark Fonacier </a>
    <a class= "commentLinks" onClick ="javascript:ShowHide('HiddenDiv')" href="javascript:;" ><i>Comment</i></a>
    <br/>
    <p>
        PostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPostPost
    </p>
    <a onClick ="javascript:ShowHide('HiddenDiv')" href="javascript:;" ><i>Comment</i></a>
    <div class="mid" id="HiddenDiv" style="DISPLAY: none" >
        <form method="post" action="">
            <textarea name="comments" cols="60" rows="2" placeholder="Enter your comments here..." maxlength="1000"> 
                </textarea>
            <input type="submit" value="Submit" />
        </form>
    </div>
    <br/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:53:00.817

这个选择器，

```
#trends .profileLinks a:link 
```

仅适用于`<a>`类为 的元素的子标签`profileLinks`，而您`<a>` **的是**应用了该类的元素。像这样改变它：

```
#trends a.profileLinks:link 
```

另一条规则也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:48:30.110

您是否有任何其他样式表被您的样式表覆盖？

试试这个

```
#trends .profileLinks a:link {
    color:#0000FF !important;
    text-decoration:none;
    background: transparent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:40:50.447

嘿，试试[这个](http://jsfiddle.net/libinvbabu/tAZwn/)刚刚为所有链接定义的颜色。将链接颜色更改为您想要的颜色。

# c++ - 使用 GetWindowText 缓冲区中的错误符号

> ID：10380143
> 
> 赞同：1
> 
> 时间：2012-04-30T07:42:35.547
> 
> 标签：c++, winapi

主窗口上有两个项目和按钮的组合框。组合框：

```
HWND hCombo;
hCombo = CreateWindow(L"COMBOBOX", L"combobox",
       WS_CHILD | WS_VISIBLE | CBS_SORT | CBS_DROPDOWNLIST,
       10, 55, 232, 500, hWnd, 0, hInstance, 0);

const wchar_t *langEnglish = L"English";
const wchar_t *langRussian = L"Russian";
SendMessage(hCombo, CB_ADDSTRING, 0, (LPARAM)langEnglish);
SendMessage(hCombo, CB_ADDSTRING, 0, (LPARAM)langRussian);
SendMessage(hCombo, CB_SETCURSEL, 0, 0); 
```

我试图通过单击按钮在**WndProc中获取选定的项目文本：**

```
case WM_COMMAND:                                            
{
    switch(LOWORD(wParam))
    {  
        case IDC_BUTTON_OK:
            wchar_t buf[10];
            hCombo = GetDlgItem(hWnd, IDC_COMBO);
            GetDlgItemText(hCombo, IDC_COMBO, (LPWSTR)buf, 10);
            MessageBox(hWnd, (LPCWSTR)buf, NULL, MB_OK);
            break;
    }

} break; 
```

我在 MSVS2010 中使用断点来查看**buf**变量。里面有**中文**符号！！！消息框显示*空*消息（标题为“**错误**”）。我想看英文文本。怎么了？

这段代码

```
nIndex = SendMessage(hCombo, CB_GETCURSEL, 0, 0);
SendMessage(hCombo, CB_GETLBTEXT, nIndex, (LPARAM)buf); 
```

用相同的中文符号填充**buf**

**解决方案：**
hCombo = CreateWindow(L"COMBOBOX", L"combobox", WS_CHILD | WS_VISIBLE | CBS_SORT | CBS_DROPDOWNLIST, 10, 55, 232, 500, hWnd, **(HMENU)IDC_COMBO** , hInstance, 0);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:47:49.990

为了从`CBS_DROPDOWNLIST`样式组合框中获取当前选定的项目，您需要[`CB_GETCURSEL`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775845%28v=vs.85%29.aspx)获取选择索引，然后[`CB_GETLBTEXT`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775862%28v=vs.85%29.aspx)获取字符串。

# php - 转换数组的结构

> ID：10380144
> 
> 赞同：0
> 
> 时间：2012-04-30T07:42:37.357
> 
> 标签：php, arrays, multidimensional-array

我有以下数组：

```
Array ( 
   [0] => Information.pdf
   [1] => Presentation.pdf
   [2] => Brochure.pdf
) 
```

我想使用 PHP 将其转换为以下格式的嵌套数组，以使其与 CakePHP 2.1.1 电子邮件类兼容：

```
Array (  
   [Information.pdf] => Array ( 
        [file] => /files/Information.pdf 
        [mimetype] => application/pdf  
   ) 
   [Presentation.pdf] => Array ( 
        [file] => /files/Presentation.pdf 
        [mimetype] => application/pdf  
   ) 
   [Brochure.pdf] => Array ( 
        [file] => /files/Brochure.pdf 
        [mimetype] => application/pdf  
   ) 
) 
```

关于如何做到这一点的任何想法？“mimetype”可以硬编码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T07:48:21.877

```
$nested = array();
foreach($flat as $filename) {
    $nested[$filename] = array(
        'file' => '/files/'.$filename,
        'mimetype' => 'application/pdf'
    );
}; 
```

对于 mimetype 猜测，[fileinfo 扩展名将](http://www.php.net/manual/en/function.finfo-file.php)是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:51:29.223

使用 a`foreach`遍历数组项并使用[`mime_content_type()`](http://php.net/manual/en/function.mime-content-type.php)获取 mimetype。

```
$temp = array(); //A temporary array to store new array
foreach($array as $filename) { //Supposing $array is your original array
    $file = '/files/'.$filename;
    $temp[$filename] = array(
        'file' => $file,
        'mimetype' => mime_content_type($file)
    );
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:49:09.910

```
$newArr = array();
foreach($arr as $val) {
    $newArr[$val] = array(
        "file"      =>  "/files/".$val,
        "mimetype"  =>  "application/pdf"
    );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T07:54:09.970

```
<?php
$arr = array('Information.pdf','Presentation.pdf','Brochure.pdf'); //current array
$new_arr = array();
foreach($arr as $key=>$value){
    $val = explode(".",$value);
    $new_arr[$value]=array('file'=>"/files/".$value,'mimetype'=>"application/".$value[1]);
}
?> 
```

# android - 为什么视图掩盖了它们下面的东西，而不是上面的东西？

> ID：10380147
> 
> 赞同：1
> 
> 时间：2012-04-30T07:42:40.913
> 
> 标签：android, android-layout

我不知道为什么如果我在 LinearLayout 的顶部放置一个按钮，然后在其下方放置一个视图，我可以看到该按钮。但是，如果我将按钮放在视图下方，视图会覆盖它。

例如，使用顶部的按钮，一切都是可见的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <View
        android:id="@+id/view1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

但是如果将按钮放在视图下方，则只能看到视图：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <View
        android:id="@+id/view1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

为什么是这样？我怎样才能看到不覆盖放在它下面的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:59:55.320

这是因为您的视图是自定义视图和所有布局/视图的根，例如 LinaerLayout,Relative Layout,Table Layout,Absolute Layout 。所以 child iew （在您的情况下，线性布局不能对视图施加约束），而您的自定义视图没有直到现在还决定了它的宽度和高度，如果你在某个类中自定义它并在 onMeasure 中给出它的宽度和高度，那么在运行时按钮将出现在它的下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:49:27.103

> 我怎样才能看到不覆盖放在它下面的东西？

通过给你`View`一个高度。这

```
<View
    android:id="@+id/view1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

标签定义不明确，无法呈现。看起来Android正在把它变成

```
<View
    android:id="@+id/view1"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" /> 
```

并因此将您推`Button`到窗外。

# sql - 如何附加数据库？

> ID：10380149
> 
> 赞同：4
> 
> 时间：2012-04-30T07:42:43.703
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

当我想附加数据库时，出现错误：

> 无法打开数据库“Almizan”，因为它是 661 版。
> 此服务器支持 655 版及更早版本。不支持降级路径。
> 无法打开新数据库“Almizan”。CREATE DATABASE 已中止。
> （.Net SqlClient 数据提供者）

帮我附上这个数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T07:45:27.400

安装 SQL Server 2008 EXPRESS R2。Web 平台安装程序有一个错误，它仍然认为 EXPRESS R1 是最新版本。

SQL Server 2008 数据库版本为 655。SQL Server 2008 R2 数据库版本为 661。您正在尝试将 2008 R2 数据库 (v. 661) 附加到 2008 实例，但不支持此操作。数据库升级到 2008 R2 版本后，将无法降级。您必须将 2008 SP2 实例升级到 R2，或者您必须将该数据库中的数据复制到 2008 数据库中（例如，使用数据迁移向导或类似的工具）。

该消息具有误导性，至少可以说是 662，因为 SQL Server 2008 SP2 确实支持 662 作为数据库版本，这是在数据库中启用 15000 个分区时，请参阅 Support for 15000 Partitions.docx。启用支持会将 DB 版本提高到 662，禁用它会将其移回 655。但是 SQL Server 2008 SP2 不支持 661（R2 版本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:49:24.823

认为您需要将尝试附加数据库的 SQL Server 2008 实例 (655) 升级到实际创建数据库的版本 SQL Server 2008 R2 (661)。

请参阅[SQL Server：附加不正确的版本 661](https://stackoverflow.com/questions/4257684/sql-server-attach-incorrent-version-661)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:46:21.690

MSDN 上的这个答案似乎告诉我们显而易见的 [http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/01ed3b1c-6f29-4518-a3a4-e4e35decc05f/](http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/01ed3b1c-6f29-4518-a3a4-e4e35decc05f/)

> 当您将数据库附加到 SQL Server 2008 以对其进行压缩时，从磁盘结构的角度来看，数据库已自动从 SQL 2005 升级到 SQL Server 2008。内部升级脚本已运行并将数据库的磁盘结构修改为该新版本。这可以在版本 655 中看到。一旦完成，您就不能再将升级的数据库附加到较低版本的 SQL Server，它将失败并出现您看到的错误。
> 
> 这与数据库的兼容性级别无关。兼容性级别只会阻止引擎使用某些新功能。
> 
> 为了再次在 SQL Server 2005 上获取数据库，您需要重新创建数据库并导出/导入数据，例如使用导出/导入向导。
> 
> 乌尔里克 - MSFT

# facebook - 使用用于上传视频的 app/developer_id 标记视频

> ID：10380151
> 
> 赞同：-1
> 
> 时间：2012-04-30T07:42:51.100
> 
> 标签：facebook, video, tags

Facebook 是否提供任何方式将 [用于上传视频的] 应用程序与视频相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:31:53.270

它会自动记录在 Facebook 端，并且在 Facebook.com 的视频显示页面上附加了一个“通过”链接

如果您要询问其他任何内容，则需要更具体。

# c - 从此字符串中获取第一个值并将其转换为整数

> ID：10380152
> 
> 赞同：-2
> 
> 时间：2012-04-30T07:42:56.513
> 
> 标签：c

```
"123456\000\";\"Bilka\";\"Tilst afdelingen\";\"Ager\370vej 7\";\"Port 39\";\"8381\";\"Tilst\";\"25\";\"100\";\"125\";\"90\";\"Phi" 
```

我需要获取第一个 123456 并将其存储为 int，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:46:16.880

使用[atoi(3)](http://linux.die.net/man/3/atoi "atoi, atol, atol, atoq - 将字符串转换为整数")

```
int n = atoi("123456\000\";\"Bilka\";\"Tilst afdelingen\";\"Ager\370vej 7\";\"Port 39\";\"8381\";\"Tilst\";\"25\";\"100\";\"125\";\"90\";\"Phi" 
```

);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:06:39.140

使用 strtol()，它比 atoi() 更好地报告错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T08:15:50.080

使用`sscanf()`.

```
char *str = "123456\000\";\"Bilka\";\"Tilst afdelingen\";\"Ager\370vej 7\";\"Port 39\";\"8381\";\"Tilst\";\"25\";\"100\";\"125\";\"90\";\"Phi";
int num = 0;

sscanf(str, "%d", &num);
printf(" The extracted number is %d.\n", num); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T07:52:09.877

您可以使用`atoi`以下程序。但是不建议使用以下程序，因为它不可移植，并且假设机器使用`acsii`字符集。

```
#include <stdio.h>

int atoi_1(char a[])
{
    int n=0;

    if (a[0] >= '0' && a[0] <= '9') {
        n = a[0]-'0';
    } else {
        /* exception - a[0] is not an integer */
        printf("exception - a[0] is not an integer \n");
    }

    return n;
}

int main()
{
    char a[] = "123456\000\";\"Bilka\";\"Tilst afdelingen\";\"Ager\370vej 7\";\"Port 39\";\"8381\";\"Tilst\";\"25\";\"100\";\"125\";\"90\";\"Phi";

    printf("a[0] = %d \n", atoi_1(a));
    return 0;
} 
```

输出：

```
$ gcc atoi.c 
$ ./a.out 
a[0] = 1 
$ 
```

# javascript - 消除 HTML 中的警告

> ID：10380162
> 
> 赞同：2
> 
> 时间：2012-04-30T07:43:41.897
> 
> 标签：javascript, html, jsp

我正在创建 3 个 jsp 页面。每页有4个不同id的盒子（即第1页的box1、box2、box3、box 4；第2页的box 5、box6、box7、box8；第3页的box9、box10、box11、box12）。以下是第 1 页中的示例代码：

```
<div class="dragableBox" id="box1">CAT</div>
<div class="dragableBox" id="box2">DOG</div>
<div class="dragableBox" id="box3">HORSE</div>
<div class="dragableBox" id="box4">TIGER</div> 
```

在每一页中还有一个脚本。在脚本中，我故意使用上面所有的 id 作为函数的参数。以下是第 1 页中的示例代码：

```
dragDropObj.addSource('box1',true);
dragDropObj.addSource('box2',true);
dragDropObj.addSource('box3',true); 
dragDropObj.addSource('box4',true); 
dragDropObj.addSource('box5',true); 
dragDropObj.addSource('box6',true); 
dragDropObj.addSource('box7',true); 
dragDropObj.addSource('box8',true); 
dragDropObj.addSource('box9',true); 
dragDropObj.addSource('box10',true);    
dragDropObj.addSource('box11',true);    
dragDropObj.addSource('box12',true); 
```

我必须这样做，因为据我所知，这是我的程序运行的唯一方法。我遇到的问题是每次启动程序都会出现警告：“id为box5的源元素不存在”

尽管该程序在此警告下仍然可以正常工作，但我仍然想消除该警告。

我的问题是：如何阻止此类警告出现？HTML中有一种错误捕获方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:54:05.317

```
if (document.getElementById('box1')){
    dragDropObj.addSource('box1',true);
    dragDropObj.addSource('box2',true);
    dragDropObj.addSource('box3',true); 
    dragDropObj.addSource('box4',true);
}
if (document.getElementById('box5')){
    dragDropObj.addSource('box5',true);
    dragDropObj.addSource('box6',true);
    dragDropObj.addSource('box7',true); 
    dragDropObj.addSource('box8',true);
}
if (document.getElementById('box9')){
    dragDropObj.addSource('box9',true);
    dragDropObj.addSource('box10',true);
    dragDropObj.addSource('box11',true); 
    dragDropObj.addSource('box12',true);
} 
```

编辑：

更好的解决方案：

```
groupFirstMember = 1;
if (document.getElementById('box5')){
    groupFirstMember = 5;
}
else if (document.getElementById('box9')){
    groupFirstMember = 9;
}

for(i=0;i<4;i++){
    dragDropObj.addSource("box"+str(groupFirstMember+i),true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:56:51.563

在添加元素之前检查元素的存在。

```
if (typeof document.getElementById('box5') !== 'undefined'){
    // continue
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:17:14.570

试试这个：这将抓取页面上的所有“dragableBox”并运行“dragDropObj.addSource(...,true);” 如果他们有一个 id=box[x] 而不使用 JQuery：

```
boxes = document.getElementsByClassName('dragableBox');
for (i=0; i < boxes.length; ++i) {
  var id = boxes[i].id;
  if(id.substring(0,3)==='box')
    dragDropObj.addSource(id,true);  
} 
```

# facebook - Magento网站中的Facebook连接失败错误？

> ID：10380169
> 
> 赞同：2
> 
> 时间：2012-04-30T07:44:27.247
> 
> 标签：facebook, magento

我已完成以下步骤：-

1.  创建了一个 facebook 应用程序，其中填写了所有详细信息并获得了 AppID 和 App Secret。

2.  将 facebook 扩展集成到我的 magento 网站，并将 AppID 和 App Secret 填充到 magento 管理员。

当我登录时，它还要求访问 facebook 用户详细信息的权限，但之后它显示错误“Facebook 连接失败”。

我的网站位于 localhost，我在我创建的 facebook 应用程序中填写了 site url = "http://localhost/magento/mywebsite.php"。

我之前也做过这件事。它以前工作但这次不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:52:01.477

配置应用程序时不能使用 localhost URL。该 URL 需要可供 Facebook 访问。要么使用测试服务器的 IP 地址，要么注册一个测试域。

# php - .htaccess 重写问题

> ID：10380172
> 
> 赞同：2
> 
> 时间：2012-04-30T07:44:58.137
> 
> 标签：php, mysql, apache, .htaccess

我下载了 phpmobilizer 脚本并将除 .htaccess 之外的所有文件上传到服务器，因为 htaccess 文件已经像这样在我的服务器上

```
RewriteEngine on

RewriteCond %{HTTP_REFERER} !^http://domainname.com/.*$      [NC]
RewriteCond %{HTTP_REFERER} !^http://domain name.com$      [NC]
RewriteCond %{HTTP_REFERER} !^http://domain name.com.cp-11.webhostbox.net/.*$      [NC]
RewriteCond %{HTTP_REFERER} !^http://domain name.com.cp-11.webhostbox.net$      [NC]
RewriteCond %{HTTP_REFERER} !^http://www.domain name.com/.*$      [NC]
RewriteCond %{HTTP_REFERER} !^http://www.domain name.com$      [NC]
RewriteCond %{HTTP_REFERER} !^http://www.domain name.com.cp-11.webhostbox.net/.*$      [NC]
RewriteCond %{HTTP_REFERER} !^http://www.domain name.com.cp-11.webhostbox.net$      [NC]
RewriteRule .*\.(jpg|jpeg|png|bmp|gif|css|js)$ - [F,NC] 
```

但是 phpmobilizer .htaccess 是

```
DirectoryIndex phpmobilizer.php

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ phpmobilizer.php?url=$1 [qsa] 
```

我结合了所有代码和站点不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:57:36.747

第一个块说 - 在您的域上托管的图像不能在其他域上使用。第二个块说 - 1\. 当文件名没有被提及时 (something/) 打开 something/phpmobilizer.php 2\. 当请求的文件名或目录不存在时打开带有查询字符串的 phpmobilizer.php。第一个块应该存在于文档根目录（public_html/.htaccess）的 .htaccess 中。第二个块应该存在于安装 phpmobilizer 的目录的 .htaccess 中。如果 phpmobilizer 在文档根目录中，那么第一个块之后的第二个块应该可以工作。但它不会让打开 index.php 或 index.html

# jquery - Twitter 请求和 API

> ID：10380189
> 
> 赞同：3
> 
> 时间：2012-04-30T07:46:57.853
> 
> 标签：jquery, html, css, twitter

我对使用 Twitter API 几乎是新手，所以请耐心等待：

我不知道如何在网站上实际使用 API。我不明白它是如何实现的，因为大多数教程都推荐一个单独的 jQuery/Javascript 文件来配合它，但这对我来说只会让事情变得复杂，因为我希望网站显示的只是最新的推文我'已经发布在我的网站上。

回到主题，我刚刚阅读了 GET statuses/user_timeline API 文档，但我如何在网站上实际使用这些文档？

如果我没记错的话，我需要向定义我的 user_id 的 Twitter 服务器发送一个 GET REQUEST，并且只显示计数 1 以在我的网站上显示第一条最新推文（将作为文本返回）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:55:18.460

端点也将`users/show`方便地返回您最新的推文。

[https://dev.twitter.com/docs/api/1/get/users/show](https://dev.twitter.com/docs/api/1/get/users/show)

所以像

```
$.getJSON(
  "http://api.twitter.com/1/users/show.json?screen_name=BarackObama&callback=?",
  function(data) {
    alert(data.status.text);
  }
); 
```

应该为你工作。

用于 JSONP ，`callback=?`能够进行跨域请求。

# sql - 在 SQL 中四舍五入到小数点后两位

> ID：10380197
> 
> 赞同：255
> 
> 时间：2012-04-30T07:48:08.350
> 
> 标签：sql, rounding

我需要将分钟转换为小时，四舍五入到小数点后两位。我还需要在小数点后最多显示两个数字。所以如果我有 650 分钟，那么小时应该是 10.83。

这是我到目前为止所拥有的：

```
Select round(Minutes/60.0,2) from .... 
```

但在这种情况下，如果我的分钟数是 630 - 小时数是 10.5000000。但我只希望它为 10.50（四舍五入后）。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：425
> 
> 时间：2012-04-30T07:51:00.267

您可以将结果转换为`numeric(x,2)`. 哪里`x <= 38`。

```
select
    round(630/60.0,2),
    cast(round(630/60.0,2) as numeric(36,2)) 
```

退货

```
10.500000    10.50 
```

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2012-04-30T07:55:49.937

使用[SQL Server 2012](https://en.wikipedia.org/wiki/History_of_Microsoft_SQL_Server#SQL_Server_2012)，您可以使用内置[*格式*功能](http://msdn.microsoft.com/en-us/library/hh213505.aspx)：

```
SELECT FORMAT(Minutes/60.0, 'N2') 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-08-23T12:15:37.470

您可以使用：

```
select cast((630/60.0) as decimal(16,2)) 
```

在 SQL Server 中

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-05-04T08:46:57.743

```
Declare @number float = 35.44987665;
Select round(@number,2) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-10-25T13:24:34.433

```
CAST(QuantityLevel AS NUMERIC(18,2)) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-06-30T08:48:00.013

以下查询有用且简单-

```
declare @floatExchRate float;
set @floatExchRate=(select convert(decimal(10, 2), 0.2548712))
select  @floatExchRate 
```

输出为 0.25。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-06-30T18:33:29.767

```
DECLARE @porcentaje FLOAT

SET @porcentaje = (CONVERT(DECIMAL,ABS(8700)) * 100) / CONVERT(DECIMAL,ABS(37020))

SELECT @porcentaje 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-12-01T13:24:37.997

试试这个：

```
 SELECT CAST(ROUND([Amount 1]/60,2) AS DECIMAL(10,2)) as TOTAL 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-05-01T09:53:21.473

将您的号码转换为 a`Numeric`或`Decimal`。

将您的查询替换为以下内容。

**[SQL 服务器](https://en.wikipedia.org/wiki/Microsoft_SQL_Server)**

```
Select Convert(Numeric(38, 2), Minutes/60.0) from .... 
```

**[MySQL](https://en.wikipedia.org/wiki/MySQL)：**

```
Select Convert(Minutes/60.0, Decimal(65, 2)) from .... 
```

该`Cast`函数是该函数的包装器`Convert`。再加上 SQL 是一种解释性语言，结果是即使这两个函数产生相同的结果，函数的幕后还有更多的事情发生`Cast`。

使用该`Convert`功能是一个小节省，但小节省成倍增加。[Numeric 和 Decimal (38, 2) 和 (65, 2) 的参数](https://docs.microsoft.com/en-us/sql/t-sql/data-types/decimal-and-numeric-transact-sql?view=sql-server-ver15)表示要使用的最大精度级别和小数位数。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-12-13T16:55:49.350

这适用于[PostgreSQL](https://en.wikipedia.org/wiki/PostgreSQL)和 Oracle：

```
SELECT ename, sal, round(((sal * .15 + comm) /12),2)
FROM emp where job = 'SALESMAN' 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-02-10T05:58:25.887

无论您在面额中使用什么，都应该是十进制的。例如，`1548/100`会给`15.00`.

如果我们在我们的示例中替换`100`为`100.0`，那么我们将得到`15.48`

```
select 1548/100
15.00000

select 1548/100.0
15.4800

0 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-10-12T03:49:12.383

作为以下答案的补充，在公式中使用 INT 或非小数数据类型时，请记住将该值乘以 1 和您喜欢的小数位数。

即 -`TotalPackages`是`INT`，分母也是 `TotalContainers`，但我希望我的结果最多有六位小数。

因此：

```
((m.TotalPackages * 1.000000) / m.TotalContainers) AS Packages, 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-10-06T17:51:41.823

以下代码段可能会对您有所帮助：

```
select SUBSTR(ENDDTTM,1, 9), extract(DAY FROM (ENDDTTM)), ENDDTTM, BEGINDTTM,  (ENDDTTM - BEGINDTTM),substr(BEGINDTTM, 1,15), substr((ENDDTTM - BEGINDTTM), 12, 8),
round((substr((ENDDTTM - BEGINDTTM), 12, 2)* 3600 + substr((ENDDTTM - BEGINDTTM), 15, 2)*60 +  substr((ENDDTTM - BEGINDTTM), 18, 2)),2) as seconds,
round((substr((ENDDTTM - BEGINDTTM), 12, 2)* 60 + substr((ENDDTTM - BEGINDTTM), 15, 2) +  substr((ENDDTTM - BEGINDTTM), 18, 2)/60 ), 2)as minutes,
round((substr((ENDDTTM - BEGINDTTM), 12, 2) + substr((ENDDTTM - BEGINDTTM), 15, 2)/60 +  substr((ENDDTTM - BEGINDTTM), 18, 2)/3600 ),2)  as hours 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-05-08T08:29:32.680

我发现 STR 函数是完成此任务的最干净的方法。

```
SELECT STR(ceiling(123.415432875), 6, 2) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-03-29T00:46:56.750

要*四舍五入*到 x 位小数：

```
SET @Result = CEILING(@Value * POWER(10, @Decimals)) / POWER(10, @Decimals) 
```

其中*@Value*是要四舍五入的项目的值，*@Decimals*是小数位数，例如在本例中为两位。

# java - 如何在 Hadoop 中使用 CombineFileInputFormat？

> ID：10380200
> 
> 赞同：2
> 
> 时间：2012-04-30T07:48:31.903
> 
> 标签：java, hadoop, mapreduce

我想使用 Hadoop 0.20.0 / 0.20.2 的 CombineFileInputFormat，这样它每条记录处理 1 个文件，并且不会影响数据 - 局部性（它通常会处理）。

Tom White 的 Hadoop Definitive Guide 中提到了这一点，但他没有展示如何做到这一点。相反，他转向序列文件。

我对记录阅读器中已处理变量的含义感到非常困惑。任何代码示例都会有很大帮助。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T09:43:44.007

检查以下用于组合文件输入格式的输入格式。

```
import java.io.IOException;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.InputSplit;
import org.apache.hadoop.mapreduce.RecordReader;
import org.apache.hadoop.mapreduce.TaskAttemptContext;
import org.apache.hadoop.mapreduce.lib.input.CombineFileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.CombineFileRecordReader;
import org.apache.hadoop.mapreduce.lib.input.CombineFileSplit;
import org.apache.hadoop.mapreduce.lib.input.FileSplit;
import org.apache.hadoop.mapreduce.lib.input.LineRecordReader;

/**
 * CustomInputformat which implements the createRecordReader of abstract class CombineFileInputFormat
 */

public class MyCombineFileInputFormat extends CombineFileInputFormat {

    public static class MyRecordReader extends RecordReader<LongWritable,Text>{
        private LineRecordReader delegate=null;
        private int idx;

        public MyRecordReader(CombineFileSplit split,TaskAttemptContext taskcontext ,Integer idx) throws IOException {
            this.idx=idx;
            delegate = new LineRecordReader();
        }

        @Override
        public void close() throws IOException {
            delegate.close();
        }

        @Override
        public float getProgress() {
            try {
                return delegate.getProgress();
            }
            catch(Exception e) {
                return 0;
            }
        }

        @Override
        public void initialize(InputSplit split, TaskAttemptContext taskcontext) throws IOException {
            CombineFileSplit csplit=(CombineFileSplit)split;
            FileSplit fileSplit = new FileSplit(csplit.getPath(idx), csplit.getOffset(idx), csplit.getLength(idx), csplit.getLocations());
            delegate.initialize(fileSplit, taskcontext);
        }

        @Override
        public LongWritable getCurrentKey() throws IOException,
                InterruptedException {
            return delegate.getCurrentKey();
        }

        @Override
        public Text getCurrentValue() throws IOException, InterruptedException {
            return delegate.getCurrentValue();
        }

        @Override
        public boolean nextKeyValue() throws IOException, InterruptedException {
            return delegate.nextKeyValue();
        }

    }

    @SuppressWarnings("unchecked")
    @Override
    public RecordReader createRecordReader(InputSplit split,TaskAttemptContext taskcontext) throws IOException {
        return new CombineFileRecordReader((CombineFileSplit) split, taskcontext, MyRecordReader.class);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T22:08:32.977

这是从所谓的“新 API”中使用 CombineFileInputFormat 的最简单方法。假设您的实际输入格式是*MyFormat*，并且它适用于*MyKey的键和**MyValue*的值（例如，可能是 的某个子类`SequenceFileInputFormat< MyKey, MyValue >`）。

```
public class CombinedMyFormat extends CombineFileInputFormat< MyKey, MyValue > {
    // exists merely to fix the key/value types and
    // inject the delegate format to the superclass
    // if MyFormat does not use state, consider a constant instead
    private static class CombineMyKeyMyValueReaderWrapper
    extends CombineFileRecordReaderWrapper< MyKey, MyValue > {
        protected CombineMyKeyMyValueReaderWrapper(
            CombineFileSplit split, TaskAttemptContext ctx, Integer idx
        ) throws IOException, InterruptedException {
            super( new MyFormat(), split, ctx, idx );
        }
    }

    @Override
    public RecordReader< MyKey, MyValue > createRecordReader(
        InputSplit split, TaskAttemptContext ctx
    ) throws IOException {
        return new CombineFileRecordReader< MyKey, MyValue >(
            ( CombineFileSplit )split, ctx, CombineMyKeyMyValueReaderWrapper.class
        );
    }
} 
```

在您的工作驱动程序中，您现在应该可以`CombinedMyFormat`参加`MyFormat`. 您还应该设置一个[最大拆分大小属性](https://stackoverflow.com/questions/18556282/combinefileinputformat-launches-only-one-map-always-hadoop-1-2-1)，以防止 Hadoop 将整个输入组合成一个拆分。

# javascript - 我想用jQuery做一个简单的拖放

> ID：10380203
> 
> 赞同：-3
> 
> 时间：2012-04-30T07:48:48.553
> 
> 标签：javascript, jquery

我在浏览器中有 4 个按钮，我想拖动这些按钮并在鼠标右键单击中选择这些按钮。可能吗。它就像窗户。我想在本地主机中拖动并选择 jquery 中的那些按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T07:52:29.410

看看 jQuery UI：

*   [可拖动](http://jqueryui.com/demos/draggable/)
*   [可丢弃](http://jqueryui.com/demos/droppable/)
*   [可排序](http://jqueryui.com/demos/sortable/)

我认为前两个或最后一个是您正在寻找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:57:09.903

您没有提供太多信息，所以...只是一些链接可以帮助您进行搜索：

*   [http://api.jquery.com/mousedown/](http://api.jquery.com/mousedown/)
*   [http://api.jquery.com/mousemove/](http://api.jquery.com/mousemove/)
*   [http://api.jquery.com/mouseup/](http://api.jquery.com/mouseup/)

*   [http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

# android - 如何用点下的点来实现图库滑动

> ID：10380207
> 
> 赞同：2
> 
> 时间：2012-04-30T07:48:55.617
> 
> 标签：android

如何实现带点的图库滑动？我需要显示当前图像的指示器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T07:54:43.497

您可以使用 Android 支持库中的 View pager 并自行实现该指标，或查看 Jake Wharton 示例[，](https://github.com/JakeWharton/Android-ViewPagerIndicator)它的信息非常丰富。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T07:51:00.113

创建两个单独的视图，一个用于您的画廊，一个用于点。让您的 Activity 为您的 Gallery 添加一个监听器以进行滑动操作。通知您的点视图这些操作。

# java - Java Bean 验证：具有类级约束的 GroupSequence

> ID：10380209
> 
> 赞同：11
> 
> 时间：2012-04-30T07:49:02.297
> 
> 标签：java, bean-validation

我有一个具有多个（自定义）内部约束和一个类级约束的 bean 类。我想在类级约束之前验证内部约束。代码如下所示：

```
@GroupSequence({ Inner.class, NewSlotBean.class })
@TotalBeanValid(groups = NewSlotBean.class)
public class NewSlotBean {

    @DayMonthYearString(groups = Inner.class)
    private String slotDay;

    @TimeString(groups = Inner.class)
    private String slotBegin;

    @LengthString(groups = Inner.class)
    private String slotLength;
} 
```

（`Inner`只是某个地方的空界面）。

但是，当我尝试运行它时，类级别的约束根本没有得到验证。当我尝试定义 GroupSequence 时

```
@GroupSequence({ Inner.class, Outer.class }) 
```

（`Outer`作为一个随机界面），我得到了例外：

```
javax.validation.GroupDefinitionException: ...*.beans.NewSlotBean must be part of the redefined default group sequence. 
```

s/o 是否知道如何确保在内部约束之后验证类级别约束？（这似乎不是默认设置！一段时间后我遇到了随机问题。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T13:59:22.200

试试这个：

```
@GroupSequence({ Inner.class, NewSlotBean.class })
@TotalBeanValid(groups = Default.class)
public class NewSlotBean {

    @DayMonthYearString(groups = Inner.class)
    private String slotDay;

    @TimeString(groups = Inner.class)
    private String slotBegin;

    @LengthString(groups = Inner.class)
    private String slotLength;
} 
```

根据规范*NewSlotBean*只是默认组的替代品。另请参阅 Bean Validation 规范的第 3.4.3 节：

> 由于序列不能具有循环依赖关系，因此在序列的声明中使用 Default 不是一种选择。托管在类 A 上并属于 Default 组（默认或显式）隐式属于组 A 的约束。
> 
> 在类 A 上定义的序列（即重新定义类的默认组）必须包含组 A。换句话说，托管在类上的默认约束必须是序列定义的一部分。如果为类 A 重新定义默认组的 @GroupSequence 不包含组 A，则在对类进行约束声明和验证过程或请求其元数据时引发 GroupDefinitionException。

# javascript - 如何阻止此 setTimeout 函数运行？

> ID：10380219
> 
> 赞同：4
> 
> 时间：2012-04-30T07:49:38.397
> 
> 标签：javascript, jquery

我使用下面的函数来检查 JSON 文件的状态。它每 8 秒运行一次（使用 setTimeout）来检查文件是否已更改。一旦 JSON 的状态变为“成功”，我就不再想继续调用该函数。有人可以告诉我如何做到这一点吗？我怀疑它涉及到 clearTimeout 的使用，但我不确定如何实现这一点。

干杯!

```
 $(function() {
    var checkBookStatus = function() {
       var job_id = "#{@job.job_id}";
       var msg = $('.msg');
       var msgBuilding = $('#msg-building');
       var msgQueuing = $('#msg-in-queue');
       var msgSuccessful = $('#msg-successful-build');
       var msgError = $('#msg-error'); 
       $.ajax({ 
         url: '/jobs/'+job_id+'/status.json',

           datatype: 'JSON',
           success:function(data){
             if (data.status == "failure")  {
               msg.hide();          
               msgError.show();
             }
             else if (data.status == "#{Job.queue}")  {
            msg.hide();          
            msgQueuing.show();
         }
             else if (data.status == "#{Job.building}")  {
            msg.hide();          
            msgBuilding.show();
         }             
         else if (data.status == "#{Job.failure}")  {
             msg.hide();          
             msgError.show();
         }
         else if (data.status == "#{Job.success}")  {
             msg.hide();          
             msgSuccessful.show();

              }                    
           },       
       }).always(function () {
            setTimeout(checkBookStatus, 8000);
      });
    };    
   checkBookStatus();    
  }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T07:52:39.287

`t = setTimeout(checkBookStatus, 8000);`当您决定停止超时时，请使用 this `clearTimeout(t);`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T07:53:38.240

采用`clearTimeout`

例如，您定义：

```
id = setTimeout(checkBookStatus, 8000); 
```

那么您可以通过以下方式删除此功能：

```
clearTimeout(id) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T07:52:16.740

`clearTimeout`使用先前返回的值调用`setTimeout`。这会给你类似的东西：

```
$(function() {
  var timeoutID;
  var checkBookStatus = function () {
      […]
      else if (data.status == "#{Job.success}")  {
          clearTimeout(timeoutID);
      […]
       }).always(function () {
        timeoutID = setTimeout(checkBookStatus, 8000);
      […] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T07:53:13.103

使用时`setTimeout`，请像这样使用：

```
var myTime = setTimeout(checkBookStatus, 8000); 
```

清除它：

```
clearTimeout(myTime); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-30T07:55:54.840

在你`checkBookStatus()`最后的电话之前，再打一个电话：`var interval = setInterval(checkBookStatus, 8000);`。然后就可以成功了`clearInterval(interval)`。

不要`setTimeout`用于迭代。

很多答案都建议只是使用`clearTimeout()`，但是，您正在检查超时后的状态，没有超时可以清除。你不需要调用`setTimeout()`你的`always()`函数而不是清除任何东西。因此，我想您可以重新检查`always()`函数内部的状态，但您的`data`对象不在该范围内。最好只在您的功能`setInterval()` *之外使用。*`checkBookStatus()`

```
$(function() {
    var checkBookStatus = function() {
        var job_id = "#{@job.job_id}";
        var msg = $('.msg');
        var msgBuilding = $('#msg-building');
        var msgQueuing = $('#msg-in-queue');
        var msgSuccessful = $('#msg-successful-build');
        var msgError = $('#msg-error'); 
        $.ajax({ 
            url: '/jobs/'+job_id+'/status.json',
            datatype: 'JSON',
            success:function(data){
                if (data.status == "failure")  {
                    msg.hide();          
                    msgError.show();
                }
                else if (data.status == "#{Job.queue}")  {
                    msg.hide();          
                    msgQueuing.show();
                }
                else if (data.status == "#{Job.building}")  {
                    msg.hide();          
                    msgBuilding.show();
                }             
                else if (data.status == "#{Job.failure}")  {
                    msg.hide();          
                    msgError.show();
                }
                else if (data.status == "#{Job.success}")  {
                    msg.hide();          
                    msgSuccessful.show();
                    clearInterval(interval);
                }                    
            }       
        });
    };    
    var interval = setInterval(checkBookStatus, 8000);    
    checkBookStatus();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T07:56:27.440

以下应该工作......

setTimeout 函数返回 setTimeout 函数的一个实例。当您想防止事件再次触发时，将此值保存在变量中并将其传递给函数 clearTimeout。

IE

```
 var t = setTimeout(1000, someFunction);
...

//after you no longer need the timeout to fire, call

clearTimeout(t); 
```

# c++ - 为什么在赋值运算符重载中返回引用？

> ID：10380222
> 
> 赞同：0
> 
> 时间：2012-04-30T07:50:11.733
> 
> 标签：c++, operator-overloading, chaining, assignment-operator

我读到，从重载的赋值运算符返回引用以启用运算符链接。但是如果没有那个返回，操作符链接似乎也可以工作。

有人可以对此有所了解吗？

```
class A
{
    public:
        int x,y;
        char* str;

        //Default Constructor
        A(){}

        //Constructor
        A(int a, int b, char* s){
            cout<<"initialising\n";
            x = a;
            y = b;
            str = new char[10];
            str = s;
        }

        //Destructor
        ~A(){}

        //Overloaded assignment operator
        const A& operator=(const A& obj)
        {
            cout<<"Invoking Assignment Operator\n";
            x = obj.x;
            y = obj.y;
            str = new char[10];
            str = obj.str;

            //return *this;
        }
};

ostream& operator<<(ostream& os, const A& obj)
{
    os <<"X="<< obj.x<<" Y="<<obj.y<<" Str="<<obj.str<<"\n";
    return os;
}

int main()
{
    A c(3,4,"Object C");
    cout<<c;

    A d, e, f;
    d = e = f = c;  //Assignment operator invoked 3 times
    cout<<e;
} 
```

**输出：**

```
initialising
X=3 Y=4 Str=Object C
Invoking Assignment Operator
Invoking Assignment Operator
Invoking Assignment Operator
X=3 Y=4 Str=Object C 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:54:37.097

您遇到了**未定义的行为**，因为预期的返回类型`operator =`是`const A&`并且您没有返回任何内容。

不幸的是它对你有用。（是的，不走运，因为似乎有效的未定义行为是最糟糕的）

我在 MSVS 中遇到编译错误，并且 ideone.com 遇到运行时错误。

[http://ideone.com/xTDb6](http://ideone.com/xTDb6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T08:20:49.003

这条规则起源于这样的代码：

```
struct Foo { 
    Foo& copy(const Foo& x) { 
        return (*this = x); 
    } 
}; 
```

那时，C++ 有两点不同：

1.  编译器生成的 operator= 默认返回一个右值，并且
2.  编译器允许非常量引用绑定到临时对象。

上面的代码旨在等效于：

```
*this = x;
return *this; 
```

但是，它不是——因为`operator=`返回了一个右值，编译器生成了一个临时值来保存赋值的结果，然后由于函数返回了一个引用，它返回了一个对该临时值的引用。然后，当然，事情很快就变糟了，因为你现在有一个悬空引用，指向一个在创建它的完整表达式结束时被销毁的临时引用。简而言之，这是一个返回对局部变量的引用的类案例——除了需要进行大量分析才能意识到正在生成局部变量，更不用说返回对它的引用了。

如果你定义你`operator=`返回一个值而不是一个引用，它将不得不生成一个临时的，就像编译器在上面的代码中所做的那样。我还没有仔细考虑其余部分，以确定当前语言中的其他更改是否足以在这种情况下保护您，但我的直接反应是，您正在重建那个古老的错误大约一半，所以除非你在这件事上绝对别无选择，否则我会远离。

# html - HTML5：页面折叠效果

> ID：10380223
> 
> 赞同：1
> 
> 时间：2012-04-30T07:50:21.683
> 
> 标签：html, css, mootools

互联网上有很多使用 HTML5 和 CSS3 的翻页/卷曲效果，但我似乎找不到任何页面折叠效果（将页面左右折叠到中间）。

关于使用哪种工具的任何建议/建议？穆工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T08:11:09.527

看看 CSS3 3d-transformations ;)

请参阅[http://2012.beercamp.com/](http://2012.beercamp.com/)（源代码）和开头[http://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)

编辑：要真正实现折叠效果，您必须添加 2`<div>s`以在悬停/其他任何情况下进行 3d 转换。实际上，当您了解基础知识时，这并不难；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:39:47.587

它是一个 js lib - [oriDomi](http://oridomi.com/)，可以帮助您创建折叠效果

[在这里](http://www.gbin1.com/technology/democenter/20120831-fold-up-html-elements-like-paper/)尝试演示

# spring-mvc - org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“springSecurityFilterChain”的bean

> ID：10380228
> 
> 赞同：5
> 
> 时间：2012-04-30T07:51:12.380
> 
> 标签：spring-mvc, spring-security

我正在尝试将 Spring Security 集成到我的 extjs 项目中，但遇到以下错误。整个堆栈跟踪是。

```
 SEVERE: Exception starting filter springSecurityFilterChain
 org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'springSecurityFilterChain' is defined
at           org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:510)
at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1056)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:274)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1049)
at org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:217)
at org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:145)
at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:179)
at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:269)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:250)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:368)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:98)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4211)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4837)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1028)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:773)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1028)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:278)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:429)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:662)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
at org.apache.catalina.startup.Catalina.start(Catalina.java:592)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:290)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:418)
    Apr 30, 2012 1:05:00 PM org.apache.catalina.core.StandardContext startInternal
    SEVERE: Error filterStart 
```

我的 web.xml 如下

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>extjs-crud-grid-spring-hibernate</display-name>

<filter>
 <filter-name>springSecurityFilterChain</filter-name>
     <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

 <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

 <listener>
 <listener-  class>org.springframework.web.context.ContextLoaderListener</listener- class>
 </listener>

<servlet>
<servlet-name>extjs-crud-grid-spring-hibernate</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
 <param-name>contextConfigLocation</param-name>
     <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/applicationContext-security.xml
     </param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>extjs-crud-grid-spring-hibernate</servlet-name>
<url-pattern>*.action</url-pattern>
</servlet-mapping> 
```

**applicationContext.xml 是**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<!-- Scans the classpath of this application for @Components to deploy as beans -->
<!-- Annotated controller beans may be defined explicitly, using a standard Spring bean definition in the 
dispatcher's context. However, the @Controller stereotype also allows for autodetection, aligned with Spring 2.5's 
general support for detecting component classes in the classpath and auto-registering bean definitions for them. -->
<context:component-scan base-package="com.loiane" />

<!-- Configures the @Controller programming model -->
<mvc:annotation-driven />

<!-- misc -->
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="suffix" value=".jsp"/>
</bean>

<!-- Configures Hibernate - Database Config -->
<import resource="db-config.xml" /> 
```

**applicationContext-security.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>

    <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/security  http://www.springframework.org/schema/security/spring-security-2.0.xsd">

<security:global-method-security />
<security:http auto-config="false" entry-point-ref="authenticationProcessingFilterEntryPoint">
    <security:intercept-url pattern="/index.jsp" filters="none" />
    <security:intercept-url pattern="/*.action" access="ROLE_USER" />
</security:http>

<bean id="authenticationProcessingFilter" class="com.loiane.security.MyAuthenticationProcessingFilter">
    <security:custom-filter position="AUTHENTICATION_PROCESSING_FILTER" />
    <property name="defaultTargetUrl" value="/index.jsp" />
    <property name="authenticationManager" ref="authenticationManager" />
</bean>

<security:authentication-manager alias="authenticationManager" />

<bean id="authenticationProcessingFilterEntryPoint"
    class="org.springframework.security.ui.webapp.AuthenticationProcessingFilterEntryPoint">
    <property name="loginFormUrl" value="/index.jsp" />
    <property name="forceHttps" value="false" />
</bean>

<!--
Usernames/Passwords are
    rod/koala
    dianne/emu
    scott/wombat
    peter/opal
These passwords are from spring security app example    
-->
<security:authentication-provider>
    <security:password-encoder hash="md5"/>
    <security:user-service>
        <security:user name="options" password="22b5c9accc6e1ba628cedc63a72d57f8" authorities="ROLE_USER" />
    </security:user-service>
</security:authentication-provider>
 </beans> 
```

我提到了其他线程，但没有解决方案。有人可以纠正我配置中的问题在哪里吗？

谢谢你的时间。

编辑：一个新问题是映射。这是我的控制器类。上面有我的 web.xml。我正在使用**SPring Security**。成功登录后我无法导航到 main.jsp。我在方法上方添加了**@RequestMapping 注释**。

控制器类

```
 @Controller 
```

公共类 ContactController 扩展 MultiActionController {

```
private ContactService contactService;

@RequestMapping(value="/contact/main.action")
public ModelAndView main(HttpServletRequest request,
        HttpServletResponse response) throws Exception {

    return new ModelAndView("main.jsp");

}

@RequestMapping(value="/contact/view.action")
public @ResponseBody Map<String,? extends Object> view() throws Exception {

    try{

        List<Contact> contacts = contactService.getContactList();

        return getMap(contacts);

    } catch (Exception e) {

        return getModelMapError("Error retrieving Contacts from database.");
    }
}

@RequestMapping(value="/contact/create.action")
public @ResponseBody Map<String,? extends Object> create(@RequestParam Object data) throws Exception {

    try{
        List<Contact> contacts = contactService.create(data);

        return getMap(contacts);

    } catch (Exception e) {

        return getModelMapError("Error trying to create contact.");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:14:25.467

关于控制器的问题：您实际上没有映射
`/extjs-crud-grid-spring-hibernate/main.action`

例如，您在该控制器中映射的内容是：
`/extjs-crud-grid-spring-hibernate/contact/main.action`

如果您需要访问第一个 URI，您应该`contact`从控制器中删除“”，并且只使用“”映射它`/main.action`。

关于 Spring Security，我确信本[教程](http://static.springsource.org/spring-security/site/tutorial.html)很有用（或者几乎任何你可以在谷歌上找到的教程），但如果你真的想了解它，我强烈推荐 Spring 书籍：Spring recipes 和 Spring Security 3。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T12:33:46.537

尝试代替：

```
 <param-value>
        /WEB-INF/applicationContext.xml
        /WEB-INF/applicationContext-security.xml
 </param-value> 
```

在 /WEB-INF/applicationContext.xml 中执行以下操作：

```
<import resource="applicationContext-security.xml"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T12:58:49.717

我遇到了同样的问题。我试过 security:intercept-url pattern="/**" access="ROLE_USER"

删除模式标准，我的问题已经解决。Spring security 本身附加 /spring_security_login url 并提供它的登录页面。

尝试一下...

# tsql - T-SQL：条件连接还是复杂的 WHERE 子句？

> ID：10380230
> 
> 赞同：1
> 
> 时间：2012-04-30T07:51:19.393
> 
> 标签：tsql, join

我有一个名为 MapObjects 的表，用于存储有关放置在地图上的对象的信息。我有另一个名为 OrgLocations 的表，用于存储组织所在的所有位置。位置用纬度和经度定义。最后，我还有另一个名为 ObjectLocations 的表，它将地图对象映射到 OrgLocations 表中的组织。它用于指示地图上显示的对象的位置子集。

例如，假设一个组织 (OrgID = 10) 有 4 个位置（存储在 OrgLocations 表中）：达拉斯、亚特兰大、迈阿密、纽约。该组织有 1 个与亚特兰大和迈阿密关联的地图对象 (MapObjects.ID = 5)。

我的数据集必须从 OrgLocations 返回与亚特兰大和迈阿密（但不包括达拉斯或纽约）相对应的记录。但是，我也可以有一个未分配给任何位置的地图对象（ObjectLocations 中没有记录）。这些地图对象仍然属于一个组织，但不与任何特定位置相关联。在这种情况下，我想返回分配给组织的所有位置。

我不确定这是否是通过条件连接或 WHERE 子句中的某些内容来完成的。以下是表格与一些数据的样子：

组织地点

```
ID   OrgID     Latitude      Longitude     Name
0     10        32.780        -96.798      Dallas
1     10        33.7497       -84.394      Atlanta
2     10        25.7863       -80.2270     Miami
3     10        40.712        -74.005      New York
4     11        42.348        -83.071      Detroit 
```

对象位置

```
OrgLocationID      MapObjectID
1                      5
2                      5 
```

地图对象

```
ID      OrgID
5        10
6        11 
```

在此示例中，当 MapObjects.ID 为 5 时，ObjectLocations 中存在此对象的 2 个位置：亚特兰大和迈阿密。当 MapObjects.ID 为 6 时，ObjectLocations 中没有记录，因此返回 OrgLocatons 中属于组织 (OrgID = 11) 的所有位置。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:13:52.127

如果您检查是否存在`MapObjectID`in `ObjectLocations`来决定使用什么查询，我想您将获得最干净的查询。

像这样的东西：

```
declare @MapObjectID int
set @MapObjectID = 5

if exists(select * 
          from ObjectLocations 
          where MapObjectID = @MapObjectID)
begin
  select *
  from OrgLocations
  where ID in (select OrgLocationID 
               from ObjectLocations
               where MapObjectID = @MapObjectID)
end
else
begin
  select *
  from OrgLocations
  where OrgID in (select OrgID
                  from MapObjects
                  where ID = @MapObjectID)
end 
```

作为单个查询。

```
select OL.*
from OrgLocations as OL
  inner join ObjectLocations as OLoc
    on OL.ID = OLoc.OrgLocationID
where OLoc.MapObjectID = @MapObjectID
union all
select OL.*
from OrgLocations as OL
  inner join MapObjects as MO
    on OL.OrgID = MO.OrgID
where MO.ID = @MapObjectID and
      not exists (select *
                  from ObjectLocations
                  where MapObjectID = @MapObjectID) 
```

# django - Initial=True 不能以 django 动态形式工作

> ID：10380231
> 
> 赞同：2
> 
> 时间：2012-04-30T07:51:25.853
> 
> 标签：django, forms, checkbox, customization

我想要预先选中的复选框，我通过了“initial=True”，但它不起作用。下面是代码。

```
class permForm(forms.Form):

    id = forms.CharField(widget=forms.TextInput(attrs={'id':'user_id'}),required=False)

    def __init__(self, data, **kwargs):
        super(permForm, self).__init__(data, **kwargs)
        # offset_arr=data.split('/')
        # menu_id=offset_arr[1]
        # user_id=offset_arr[2]
        # flag=   offset_arr[3]
        # if user.has_perm(permission.codename, task):
        usr  = User.objects.get(id=1)
        task = Site.objects.get_current()

        for item in list(AdminMenu.objects.filter(parent_id=0)):
            permission=Permission.objects.get(id=item.permission_id);
            if usr.has_perm(permission.codename, task):
                checked=False
            else:
                checked=True
            self.fields['menu_%d' % item.id] = forms.BooleanField(initial=True,label=item.title,required=False)
            for childitem in list(AdminMenu.objects.filter(parent_id=item.id)):
                cpermission=Permission.objects.get(id=childitem.permission_id);
                if usr.has_perm(cpermission.codename, task):
                    childchecked=True
                else:
                    childchecked=False

                self.fields['menu_%s' %childitem.id] = forms.BooleanField(initial=True,label=childitem.title+'%s'%(data),required=False) 
```

**但是它适用于静态表单。看下面的代码**

类 MyForm(forms.Form):
option = forms.BooleanField(required=False, initial=True)

**是否有任何技巧可以为动态加载的表单元素传递初始值？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:44:32.290

试试这个：

代替

```
self.fields['menu_%d' % item.id] = forms.BooleanField(initial=True,label=item.title,required=False) 
```

构造字段时删除 initial=True 参数，并在下一步填充其初始值，如：

```
self.fields['menu_%d' % item.id] = forms.BooleanField(label=item.title,required=False)
self.fields['menu_%d' % item.id].initial = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:43:27.410

我在下面尝试过并且有效：

```
self.fields['menu_%d' % item.id] = forms.BooleanField(label=item.title, required=False)
self.fields['menu_%d' % item.id].widget.attrs['checked'] = 'checked' 
```

# cocos2d-iphone - Cocos2D 粒子跟随 b2Body？

> ID：10380234
> 
> 赞同：0
> 
> 时间：2012-04-30T07:51:43.810
> 
> 标签：cocos2d-iphone, box2d-iphone, particle-system

我能够在 cocos2d 中实现粒子系统，现在我想将我的粒子与动态 b2Body 连接起来，这样它就可以跟随身体。

我在 [this site] 找到了关于 Cocos2D Particles Follow b2Body 的教程。但不明白“如何使用”部分。谁能告诉我，我怎样才能将我的粒子与我的 b2Body 连接起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:58:02.530

首先，您应该创建一个包含 b2body 的对象。

其次，您应该将对象连接到 b2body。如果您不知道如何执行此操作，可以阅读[此问题](https://stackoverflow.com/questions/8491450/moving-box2d-bodies-like-ccsprite-objects/10495687#10495687)

最后，您应该将粒子系统添加为对象的子对象。

# ios - 将 UiSlider 间隔设置为 0.5

> ID：10380242
> 
> 赞同：1
> 
> 时间：2012-04-30T07:52:18.833
> 
> 标签：ios, objective-c, ios5, uislider

我有一个`UISlider`with`minimumValue 0`和`maximumValue`。我想做一个`interval`of`0.5`并将其显示在一个`label`（它正在工作）中。

如何设置我的间隔`slider`？我尝试了四舍五入的解决方案......但我失败了。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T07:55:31.747

```
float RoundValue(UISlider * slider) {
  return roundf(slider.value * 2.0) * 0.5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:02:05.457

当我做这样的事情时，我采取如下方法：

```
 #define kSTEPFRACTION .5

 SliderMin = 0
 sliderMax = 20 
```

并获得类似的价值

```
 value = slider.value*kSTEPFRACTION; 
```

这将为您提供 0 到 10 之间的值，步长为 0.5

塞巴斯蒂安

# jquery - 将 Microsoft MVC ajax 和验证助手与本机 jquery ajax 混合使用

> ID：10380245
> 
> 赞同：3
> 
> 时间：2012-04-30T07:52:36.933
> 
> 标签：jquery, ajax, asp.net-mvc, validation, mixing

**介绍**

这篇文章是关于将 Microsoft MVC 助手与本机 jquery ajax 混合使用。一路上我遇到的主要问题是：

1.  双重投稿
2.  @Html.ValidationMessageFor 不输出
    属性

**要求**

1.  我需要验证和发布表单（id = "my-form"）

2.  该表单绑定到一个装饰有验证属性的模型，因此我想使用诸如 @Html.ValidationMessageFor 之类的辅助方法来利用不显眼的好处

3.  我需要客户端和服务器端验证（服务器端我对数据库进行唯一名称检查）

4.  提交表单以添加其他表单数据时，我需要进行一些客户端处理。

**迭代步骤**

**步骤1**

我从没有原生 jquery 开始，并使用 Microsoft 助手来创建 ajax 表单：

```
@using (Ajax.BeginForm( ... 
```

一切都像宣传的那样工作。这给了我不显眼的验证，但它没有满足我自定义的表单数据发布要求。

所以我想我会覆盖提交过程。

**第2步**

在我准备好的文档中，我连接了新的事件处理程序：

```
$(document).ready(function () 
{
    // Rebind validators
    $.validator.unobtrusive.parse('#my-form');

    // Hook up submit event
    $("#my-form").submit(SubmitForm);
}); 
```

在我的提交功能中，我可以进行自己的表单数据处理：

```
function SubmitForm(e) 
{
    // Suppress normal event behaviour
    e.preventDefault();

    // Validate the form
    var valid = $("#my-form").validate();
    if (valid.errorList.length > 0)
        return;

    // Collect up form data manually
    var formData =  ...(code removed for clarity)

    // Display animated gif
    $("#ajax-loader").css("display", "inline")

    // Post Form
    $.post(
            '@Url.Action("MyAction", "MyController")',   // url
            formData,                                   // data
            SuccessFunction                             // success
        )
        .error(ErrorFunction);                         // error
} 
```

好的，现在场景已经设置好了。

**问题**

一个问题是我混合了两种类型的ajax。这会导致双重职位。使用提琴手我可以看到帖子发生了两次。（一次用于 micosoft 表单声明，一次用于 jquery 帖子）这是因为已连接了 2 个处理程序。做了一些谷歌搜索，我发现有些人正在使用 jquery 删除一个处理程序，但这一切看起来有点乱。

**第 3 步**

所以我把 @using (Ajax.BeginForm( ... 语法改为简单的表单标签：

```
<form id = "my-form">
   ...
</form> 
```

**问题**

现在 @Html.ValidationMessageFor 没有做它的事情。使用 firebug 我可以看到我的表单输入不再应用验证属性。

@Html.ValidationMessageFor 似乎只能与表单助手一起使用。

我不能使用 Ajax.BeginForm(... 因为我收到了双重提交。

**第4步**

所以我接下来使用：

```
 @using (Html.BeginForm("MyAction", "MyController", FormMethod.Post, new { id = "my-form" })) 
 {.... 
```

我使用 Html.BeginForm 纯粹是为了让我的 @Html.ValidationMessageFor 做他们的事情。“MyAction”和“MyController”参数都是多余的，因为我的自定义事件处理程序接管了表单提交过程。

**解决**

现在一切似乎都正常了

1.  没有重复提交
2.  使用@Html.ValidationMessageFor 进行不显眼的验证
3.  自定义表单处理/提交
4.  客户端和服务器端验证

**我的问题。**

这是正确的方法吗？我很想听听其他人的这些经历。

问候

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:27:05.063

通常在这种情况下，我喜欢[Fluent Validation](https://github.com/JeremySkinner/FluentValidation)中建议的方法。现在，第一件事它将在客户端为您生成验证，可以使用 JQuery 检查，您也可以在服务器端创建/生成强制验证。意味着您在类中定义规则，如示例所示，然后使用该类检查验证。因此，它将在服务器端进行检查。我通常使用 ajax 只是不写 html，大多数时候我会忘记右括号和一些东西，所以助手很好，但我不支持 Ajax.Beginform。简单的 Beginform 很好。

我通常遵循拇指规则，该视图必须具有简单明了的 HTML 或 Helpers，我尝试减少嵌套的 div 和其他内容。

如果需要有关此主题的任何进一步详细信息，请告诉我。您可以通过网络找到一些关于此的好文章。如果你愿意我可以分享。

# cocoa - 如何绘制一个看起来像 Finder 文件名标签的 NSTextField 背景效果？

> ID：10380248
> 
> 赞同：2
> 
> 时间：2012-04-30T07:52:56.163
> 
> 标签：cocoa

如何绘制`NSTextField`类似于 Finder 文件名标签的背景效果？

![影响](../Images/c7d2fd8794a9014090a9a1a3891d4cc1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:03:55.967

我现在回到了这个问题，并做了一些与 Finder 标签非常相似的东西。
主要思想是：

1.  将 NSString 分成两部分：第一行（适合矩形）和所有尾部（字符串的其他部分）。
2.  计算两条线的矩形的宽度和高度（边界）
3.  使用直线和曲线从点到点创建一个 NSBezierPath，围绕两个矩形的周长
4.  考虑第一行的宽度大于/小于第二行的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:54:42.523

我现在正在实现类似的东西......在我的情况下，我不必让它完全相同，所以我采用了边界文本矩形。

最好的猜测是 Finder 逐行构造带有圆角的 NSBezierPath。

# ruby-on-rails - 从 gem 扩展 ruby on rails activerecord

> ID：10380249
> 
> 赞同：0
> 
> 时间：2012-04-30T07:52:56.337
> 
> 标签：ruby-on-rails, ruby, activerecord, rubygems, gem

我有一个写 gem 的想法，但我没有足够的经验来扩展 ruby​​ on rails。

所以这就是我想要的

例如这里是一个模型文件

```
class Modelname < ActiveRecord::Base
    methodname :columnname
end 
```

所以“方法名”的作用是在数据库创建/更新之前激活钩子并修改“列名”文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:13:46.233

How is this different to

```
Object.update_attribute( :columnname, "value" ) 
```

Or a before_filter that calls a method with the above behaviour?

# mysql - 无法在 MySQL 中授予特定于列的权限

> ID：10380255
> 
> 赞同：0
> 
> 时间：2012-04-30T07:53:39.803
> 
> 标签：mysql

离开[这个答案](https://stackoverflow.com/a/4531456/654789)，我正在执行以下语句

```
CREATE TABLE person
(
   id      INT NOT NULL AUTO_INCREMENT,
   PRIMARY KEY (id)
);
GRANT SELECT ON person(id) TO SomeOne; 
```

但是当我这样做时，我收到以下错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '(id) TO SomeOne' 附近使用正确的语法

有人可以解释为什么我会收到这个错误。

**MySQL 版本：**

> > mysql Ver 14.14 Distrib 5.1.58，适用于使用 readline 6.2 的 debian-linux-gnu (i686)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:00:39.110

尝试：

```
 GRANT select (`id`) ON your_db_name.your_table_name TO SomeOne 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:58:36.440

```
GRANT SELECT (id) ON person TO SomeOne; 
```

[查看此处](http://dev.mysql.com/doc/refman/5.1/en/grant.html)的文档以获取更多详细信息。

# java - System.exit(0) 不起作用时如何关闭应用程序？

> ID：10380257
> 
> 赞同：0
> 
> 时间：2012-04-30T07:53:50.173
> 
> 标签：java, runtime, system

我有一个应用程序。在关闭按钮上单击我正在调用 **System.exit(0)**。但是在机器上，它并没有关闭该应用程序。它发生在少数系统上，而不是全部。

我阅读了一些文档和论坛，发现**带有 0**（零）int 值的 exit() 用于**正常 exit**。通常这个方法永远不会正常返回（意味着关闭应用程序）。但是，如果**存在安全管理器**并且其 checkExit 方法不允许以指定状态退出。

我的应用程序没有创建任何安全管理器，我也知道默认情况下应用程序没有安全管理器。也就是说，Java 运行时系统不会自动为每个 Java 应用程序创建安全管理器。因此，默认情况下，应用程序允许所有受安全限制的操作。

由于安全经理，我也不确定它是否正在发生。

**现在我想知道两件事。**

1.  我可以在系统管理器的存在下成功关闭应用程序，如何？

2.  是否**System.setSecurityManager(null)**；这是正确的方法吗？

我必须以任何方式关闭我的应用程序。有什么建议吗？

谢谢

泰基兰

# mysql - MySql 函数与 kohana ORM

> ID：10380261
> 
> 赞同：1
> 
> 时间：2012-04-30T07:54:14.107
> 
> 标签：mysql, kohana, kohana-3, kohana-orm

我有点困惑如何转换我的查询：

```
> SELECT COUNT(`id`) AS `total_logs`, `userlog`.* FROM `user_log` AS
> `userlog` WHERE `user_id` = '31' AND date(`date_created`) =
> '2012-04-30' 
```

到 Kohana 3.1 ORM？目前我正在使用：

```
> $isLoged = ORM::factory('Userlog')->select(array('COUNT("id")',
> 'total_logs'))
>                 ->where('user_id', '=', $user->id)
>                 ->and_where('Date(date_created)', '=',  date('Y-m-d'))
>                 ->find_all(); 
```

不幸的是，上面的一个给出了错误:(

> Database_Exception [1054]：未知列 'Date(date_created)' in 'where cla....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:57:04.323

`'Date(date_created)'`string 将被转义并被视为列名，除非您首先将其传递给`DB::expr()`. 因此，不要`'Date(date_created)'`尝试以下方法：

```
DB::expr('Date(date_created)') 
```

请参阅[上的文档`DB::expr()`](http://kohanaframework.org/3.2/guide/api/DB#expr)。

# linux - netstat 中奇怪的百分号 (192.168.8.16%31621:5555)

> ID：10380262
> 
> 赞同：0
> 
> 时间：2012-04-30T07:54:36.817
> 
> 标签：linux, bash, netstat

有谁知道下面 netstat 输出中的 %-sign 是什么意思？我在手册页和网络上都找不到任何东西。

```
tcp6       0      0 192.168.8.16%31621:5555 192.168.8.65%3162:47107 TIME_WAIT  
tcp6       0      0 192.168.8.16%31621:5555 192.168.8.65%3162:47083 TIME_WAIT  
tcp6       0      0 192.168.8.16%31621:5555 192.168.8.65%3162:47256 TIME_WAIT 
```

非常感谢任何输入！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T08:09:25.467

这是一个 IPv6[区域索引](http://en.wikipedia.org/wiki/IPv6_address#Link-local_addresses_and_zone_indices)。

# php - 简单的 HTML DOM load() 返回 null

> ID：10380264
> 
> 赞同：0
> 
> 时间：2012-04-30T07:54:38.757
> 
> 标签：php, html-parsing, simple-html-dom

我正在尝试从`<body>`普通 HTML 文档的标签中提取所有内容。

```
function extractHtml($html){

    $doc = new simple_html_dom();
    $html = $doc->load($html);

    return $doc->find("body")->innertext;
} 
```

传递的`$html`是一个完整的 HTML 文档，尽管使用 is 加载它时`load()`返回 null。这显然会导致 find() 产生一个通知

> 注意：试图获取非对象的属性

load() 返回 null 的原因可能是什么？

过去我做过；

```
function extractHtml($html){
    $dom = new DOMDocument();
    @$dom->loadHTML($html);
    $dom->preserveWhiteSpace = false;

    // get everything inside of <body>
    $body = $dom->getElementsByTagName('body');
    if($body && 0<$body->length) {
        $body = $body->item(0);
    }

    $search = array('<body', 'body>');
    $replace = array('<div', 'div>');
    return str_replace($search, $replace, $dom->saveHTML($body));
} 
```

虽然我现在需要这个在旧版本的 PHP 中工作来解决这个错误

> 警告：DOMDocument::saveHTML() 需要 0 个参数，1 个给定

这就是使用简单 html dom 进行测试的原因。

**编辑：** 当我通过如下更改 HTML 来测试我是否从文档中复制示例时，我仍然得到相同的错误。

```
$doc->load("<html><body>Hello!</body></html>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:24:55.820

似乎 find 返回一个`array`，而不是一个对象。

来自：[http ://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

> // 查找所有锚点，**返回元素对象数组**
> $ret =$html->find('a');

（我的）。

# google-docs-api - 无法通过 java api 将嵌入到 HTML 中的本地图像文件作为数据 URI 上传到 google doc

> ID：10380266
> 
> 赞同：3
> 
> 时间：2012-04-30T07:54:44.117
> 
> 标签：google-docs-api, google-drive-api

我需要从本地磁盘上传图像文件。我将图片转换为base64格式，并将html文件也写入本地磁盘，该html文件可以在浏览器中打开并显示图像，但google doc中的文档只是一个空文件，即使我将该html文件拖到google文档图像仍然不存在。我的代码如下：

```
DocsService client = new DocsService("testappv3");
client.setUserCredentials("username", "password");
File file = new File("c:/test.bmp");
ByteArrayOutputStream out = new ByteArrayOutputStream();
BufferedInputStream in = new BufferedInputStream(new FileInputStream(file));

int read;
byte[] buff = new byte[1024];
while ((read = in.read(buff)) > 0)
{
    out.write(buff, 0, read);
}
out.flush();

String base64 = Base64.encode(out.toByteArray());
String mimeType = DocumentListEntry.MediaType.fromFileName(file.getName()).getMimeType();
String html = "<html><body><img src=\"data:" + mimeType + ";base64," + base64 + "\"/></body></html>";

URL destFolderUrl = new URL("https://docs.google.com/feeds/default/private/full/<FOLDER_ID>/contents");
DocumentEntry newDocument = new DocumentEntry();
newDocument.setTitle(new PlainTextConstruct("test"));
newDocument.setMediaSource(new MediaByteArraySource(html.getBytes(), "text/html"));
newDocument = client.insert(destFolderUrl, newDocument); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:05:13.680

这看起来像一个错误，我们正在尝试修复它，当我们修复它时，我会回复您。

谢谢你的耐心。

# asp.net - 我想在 ASP.NET MVC 3 (Razor) 中将值从视图传递到控制器？

> ID：10380267
> 
> 赞同：0
> 
> 时间：2012-04-30T07:54:44.897
> 
> 标签：asp.net, asp.net-mvc

> **可能重复：**
> [如何在 ASP.NET MVC 3 (Razor) 中将值从视图传递到控制器？](https://stackoverflow.com/questions/10374812/how-to-pass-values-from-view-to-controller-in-asp-net-mvc-3-razor)

我在数据库中有这个表：

[http://i.stack.imgur.com/C7CWX.png](https://i.stack.imgur.com/C7CWX.png)

我通过此代码（视图）显示“音乐”中的所有价值，而无需重复：

```
@foreach (var item in Model.Select(m => m.music).Distinct())
{
    <tr>
        <td>
            @Html.ActionLink(item, "Deep", ViewData["item"])
        </td>
    </tr>
} 
```

结果：

```
Jazz
Disko
Rock
Metal 
```

我想当我按下“Jazz”时，结果是“Miles”、“Kirk”等。怎么办？我想我可以将值从 View 传递给 Controller，但我不知道在我的情况下如何做。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:06:47.063

如果我意识到您的问题，您需要类似以下操作来返回对特定类型感兴趣的用户列表。

```
public ActionResult InterestedUser(string id) {
    // TODO: return the list of users
} 
```

并且在视图中

```
<ul>
@foreach (var genre in Model) {
    <li>@Html.ActionLink(genre.Name, "InterestedUser", new { id = genre.Name })</li>
}
</ul> 
```

顺便说一句，我无法从您的图像中了解所有内容，但该`music`列看起来有点奇怪。你可能需要一张`Genres`桌子。

# android - Y 图形布局有时在 eclipse &MOTODev 上不显示？

> ID：10380268
> 
> 赞同：0
> 
> 时间：2012-04-30T07:54:45.153
> 
> 标签：android, eclipse, android-layout

我的图形布局不会同时出现在我的 Eclipse 窗口中 main.xml 也可以可见和可编辑，XML 文件上发生了什么。我试图关闭 xml 并再次打开，但它仍然继续......对此有任何永久解决方案。这也发生在 eclipse &MotoDev 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:32:56.753

听起来 XML 文件是由默认 Android 编辑器以外的编辑器打开的。如果您使用其他处理 XML 文件的插件，这可能是个问题。

1.  关闭所有打开的窗口
2.  右键单击您的 layout.xml 并选择“打开方式”
3.  选择“Android 通用 XML 编辑器”

![Eclipse 或 MOTODEV 中的 Android 通用 XML 编辑器](../Images/640bda7e5bbc290bf8516af4ecfe77b3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:51:10.943

如果您已导入项目。然后确保导入的项目应该在您选择的工作区中。

或者

如果您从另一个平台导入了一些项目，即项目是在 2.2 中制作的，而您只有 4.0，那么它不会显示布局，那么您必须为它下载 2.2 sdk

# xtk - 更改交互器的“配置”属性以禁用某些用户事件

> ID：10380269
> 
> 赞同：0
> 
> 时间：2012-04-30T07:55:10.237
> 
> 标签：xtk

我想显示同一场景的多个视图，其中 1 个是完全交互的，另外 2 个是从顶部和右侧显示的，只能缩放。所以我的问题是禁用渲染上的一些用户交互。

一种替代方法是重载其他事件处理程序方法，如果事件不是鼠标滚轮，则强制渲染器的相机保持相同的视图。它可以工作，但并不漂亮（对于程序员和用户来说都不是）。

所以我想改变我的渲染器的“配置”属性。这是我的代码和解释的问题：

```
var r1 = new X.renderer('r1'); // r1 is created, but its "interactor" attribute is null, see visualization>renderer.js
r1.interactor().config.MOUSEWHEEL_ENABLED = false; // DO NOT work cause the "interactor" attribute of r1 is null
r1.init(); // r1 is initialized : it creates a new interactor, calls interactor.init(), and puts the new interactor in the "interactor" attribute of r1, , see visualization>renderer.js
r1.interactor().config.MOUSEWHEEL_ENABLED = false; // DO NOT work because the interactor.init() has already generated all the event handler methods and associated them to the listeners, see io>interactor.js 
```

我也尝试了以下方法，但结果我的渲染器变成了黑色/空：

```
var r1 = new X.renderer('r1');
r1.init();
r1.interactor().config.MOUSEWHEEL_ENABLED = false;
r1.interactor().init(); 
```

你看到问题了吗？“配置”更改应该在新交互器的创建和它的初始化之间完成。但是，如果我没记错的话，你不能创建一个交互器并将其手动设置为一个渲染器，就像“交互器”属性受到保护一样。

我有什么问题吗？任何想法执行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:36:58.413

这是正确的方法

```
var r1 = new X.renderer('r1');
r1.init();
r1.interactor().config.MOUSEWHEEL_ENABLED = false;
r1.interactor().init(); 
```

但你是对的 - 由于拼写错误和缺少导出符号，到目前为止它没有工作。这已在[https://github.com/xtk/X/commit/f1f80ebb26020f4b13b797993a9008ae07a50195](https://github.com/xtk/X/commit/f1f80ebb26020f4b13b797993a9008ae07a50195)中修复，现在 可在[http://get.goxtk.com/xtk_edge.js](http://get.goxtk.com/xtk_edge.js)中使用。

# objective-c - 如何过滤不包含字符串的 NSMutableArray 对象？

> ID：10380273
> 
> 赞同：0
> 
> 时间：2012-04-30T07:55:28.860
> 
> 标签：objective-c, ios, cocoa-touch

我有 NSMutableArray 和 NSString 对象。如何过滤它以仅获取不包含字符串的对象？我尝试 NSPredicate 过滤包含字符串的对象：

```
NSString *match = @"My text"; 

    NSPredicate *sPredicate = [NSPredicate predicateWithFormat:@"SELF CONTAINS[cd] %@", match];

    [self.filesList setArray:[self.filesList filteredArrayUsingPredicate:sPredicate]]; 
```

有没有类似的东西，但反之亦然？某种“！包含”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:30:50.997

改用这个：

`NSPredicate *sPredicate = [NSPredicate predicateWithFormat:@"NOT (SELF CONTAINS[cd] %@)", match];`

# c++ - SFML 精灵 std::list

> ID：10380276
> 
> 赞同：2
> 
> 时间：2012-04-30T07:55:42.233
> 
> 标签：c++, opengl, segmentation-fault, sfml

我有一些 SFML 2.0 代码，我在其中绘制了一个在网格中移动的机器人。网格使用 OpenGL 绘制，机器人图像使用 sf::Texture 加载。我有一些代码可以在用户左键单击时生成墙壁（无碰撞检测）。我做了一个功能，可以在右键单击时删除它们。墙存储在 sf::Sprite 中，然后放入 std::list 并循环绘制。当我调用 list.erase() 程序段错误时。调试器在 sf::transformable = 运算符中显示了一些问题。如何解决。

这是代码：

```
#include <SFML/Graphics.hpp>
#include <SFML/OpenGL.hpp>
#include <iostream>
#include <list>
using namespace std;
static const size_t WIN_HEIGHT=800, WIN_WIDTH=800;
void drawGrid();
void fixCoords(int & x, int & y);
static list<sf::Sprite> walls;

int main()
{
    // Create the main window
    sf::RenderWindow window(sf::VideoMode(WIN_WIDTH, WIN_HEIGHT), "SFML window");

    /*** Robot code ***/
    sf::Image robotImg;
    robotImg.loadFromFile("robot.png");
    robotImg.createMaskFromColor(sf::Color(89, 167, 45));
    sf::Texture robotTexture;
    robotTexture.loadFromImage(robotImg);
    sf::Sprite robotSpr(robotTexture);
    sf::Sprite t;
    robotSpr.setPosition(sf::Vector2f(400, 405));

    /*****  Wall code  ****/
    int x = 0, y = 0;
    sf::Image wallimg;
    wallimg.loadFromFile("wall.png");
    wallimg.createMaskFromColor(sf::Color(255, 0, 255));
    sf::Texture walltex;
    walltex.loadFromImage(wallimg);
    sf::Sprite wall;
    wall.setTexture(walltex);

    int movex = 0, movey = 0;
    gluOrtho2D(0, WIN_WIDTH, 0, WIN_HEIGHT);
    while (window.isOpen())
    {
        // Process events
        sf::Event event;
        while (window.pollEvent(event))
        {
            // Close window : exit
            if (event.type == sf::Event::Closed)
            {
                window.close();
                return 0;
            }

            if (event.type == sf::Event::MouseButtonPressed )
            {
                if(event.mouseButton.button == sf::Mouse::Left)
                {
                    x = event.mouseButton.x;
                    y = event.mouseButton.y;
                    fixCoords(x, y);
                    wall.setPosition(sf::Vector2f(x, y));
                    walls.push_back(wall);
                }
                if(event.mouseButton.button == sf::Mouse::Right)
                {
                    x = event.mouseButton.x;
                    y = event.mouseButton.y;
                    fixCoords(x, y);
                    for(list<sf::Sprite>::iterator it = walls.begin(); it != walls.end(); it++)
                    {
                        if((it->getPosition().x == x) && (it->getPosition().y == y)) // This line
                            walls.erase(it);
                    }
                }

            }

            if(event.type == sf::Event::KeyPressed)
            {
                if((movex == 0) && (movey == 0))
                {
                    if(event.key.code == sf::Keyboard::Up)
                        movey -= 37;
                    if(event.key.code == sf::Keyboard::Down)
                        movey += 37;
                    if(event.key.code == sf::Keyboard::Left)
                        movex -= 40;
                    if(event.key.code == sf::Keyboard::Right)
                        movex += 40;
                }
            }
        }
        window.pushGLStates();
        window.clear(sf::Color(90, 167, 45));
        // Insert SFML Draws here
        if(movex > 0)
        {
            robotSpr.move(1, 0);
            movex--;
        }
        if(movex < 0)
        {
            robotSpr.move(-1, 0);
            movex++;
        }
        if(movey > 0)
        {
            robotSpr.move(0, 1);
            movey--;
        }
        if(movey < 0)
        {
            robotSpr.move(0, -1);
            movey++;
        }
        window.draw(robotSpr);
        if((x != 0) && (y != 0))
        {
            for(list<sf::Sprite>::iterator it = walls.begin(); it != walls.end(); it++)
            window.draw(*it);
        }

        window.popGLStates();
        // OpenGL Here
        drawGrid();

        // Update the window
        window.display();
    }
}

void drawGrid()
{
    glColor3ub(0, 0, 0);
    glBegin(GL_LINES); // Horizontal lines
    for(int i = 0; i < WIN_HEIGHT; i += WIN_HEIGHT / 20)
    {
        glVertex2i(0, i);
        glVertex2i(WIN_WIDTH, i);
    }
    glEnd();

    glColor3ub(0, 0, 0);
    glBegin(GL_LINES); // Vertical lines
    for(int i = 0; i < WIN_WIDTH; i += WIN_WIDTH / 20)
    {
        glVertex2i(i, 0);
        glVertex2i(i, WIN_HEIGHT);
    }
    glEnd();
}

void fixCoords(int &x, int &y)
{
    /**** Find the nearest x sqare ****/
    for(int i = 1; i < WIN_WIDTH - 1; i += 40)
    {
        if((x >= i) && x <= (i + 40))
        {
            x = i - 1;
            break;
        }
    }
    for(int i = WIN_HEIGHT; i > 0; i -= 40)
    {
        if((y >= i) && y <= (i + 40))
        {
            y = i;
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:17:07.047

这是`list<T>`容器工作方式的烦恼。

一个`list<T>`容器被实现为一个[双向链表](http://en.wikipedia.org/wiki/Linked_list)。因此，迭代器需要访问其当前元素才能到达下一个元素。如果你刚刚删除了它的当前元素，一切都会爆炸。

你可以让它像这样工作：

```
list<sf::Sprite>::iterator it=walls.begin(),next;
while(it!=walls.end()) {
    next = it; next++;
    if((it->getPosition().x == x) && (it->getPosition().y == y))
        walls.erase(it);
    it = next;
} 
```

您也可以将[remove_if](http://en.cppreference.com/w/cpp/container/list/remove)与适当的谓词类一起使用，但这只会更丑陋且更令人费解。

# php - Azure 应用程序（blob 存储）仅在 localhost 上运行

> ID：10380277
> 
> 赞同：0
> 
> 时间：2012-04-30T07:55:43.873
> 
> 标签：php, azure, localhost, blob

我正在尝试运行一个使用 blob 存储的天蓝色应用程序。我尝试使用以下示例工具包： [https ://github.com/Interop-Bridges/Windows-Azure-Sample-Kit-4-PHP/tree/master/GuestBookUsingBlobs](https://github.com/Interop-Bridges/Windows-Azure-Sample-Kit-4-PHP/tree/master/GuestBookUsingBlobs) *（我更改了 index.php 中的存储帐户和密钥）*

所以我的问题是，在我将它部署到天蓝色后，我得到 500 个内部服务器错误，但是在 localhost 上它工作正常！

怎么了？谢谢！

*（一个简单的 phpinfo() 文件在 azure 中也可以正常工作）*

* * *

```
 <?xml version="1.0"?>
<configuration>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
       <httpErrors errorMode="Detailed" />
    <asp scriptErrorSentToBrowser="true"/>
    <defaultDocument>
      <files>
        <clear/>
        <add value="index.php" />
      </files>
    </defaultDocument>
    <staticContent>
      <remove fileExtension=".svg" />
      <remove fileExtension=".eot" />
      <remove fileExtension=".woff" />
      <mimeMap fileExtension=".svg" mimeType="image/svg+xml"  />
      <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
      <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
    </staticContent>
  </system.webServer>
  <system.web>
    <customErrors mode="Off"/>
    <compilation debug="true"/>
</system.web>
</configuration> 
```

以上更改的 web.config

我用这个进行部署：[http ://rhizohm.net/irhetoric/post/2011/04/18/How-To-Do-PHP-Deployment-To-Windows-Azure.aspx](http://rhizohm.net/irhetoric/post/2011/04/18/How-To-Do-PHP-Deployment-To-Windows-Azure.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:19:13.723

根据您上面提供的内容，我猜：

1.  您有一个示例网页 (xyz.php)，其中只有 phpinfo()，它运行良好。这表明您的角色确实正确配置了 PHP。
2.  但是，具有直接与 Azure Blob 存储连接的代码的 index.php 无法正常工作。

要开始调查，我会说 500 Internal Server Error 是一个非常普遍的错误，使用此错误进行调查的机会很小。这里有几件事要检查你的代码：

*   您在代码中使用的是绝对路径还是相对路径？请检查 index.php 和提交表单操作的位置，请确认您确实有正确的相对路径，因为在 Azure VM 上，绝对路径将不起作用
*   在 PHP.ini 中使用 display_errors=On 显示启用的 PHP 错误
*   请使用此链接在您的代码中添加自定义错误消息[如何查看 Azure fastCGI 上的实际错误？](https://stackoverflow.com/questions/4829996/how-to-view-actual-error-on-azure-fastcgi)
*   如果您能够 RDP 到您的 Azure VM，请直接在 Azure VM 实例上登录并调试 PHP 代码
*   最后，如果您需要 RCA 的帮助来解决您的问题，请通过下面的链接联系 Azure 支持团队（24x7 通过网络或电话），他们将能够访问您的实例（在您的许可下）并为您提供根本原因。

[https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn)

联系 Azure 支持时，请提供您的订阅 ID、部署 ID、您的 Azure 真实帐户 ID 和您的问题的简短描述。

# java - Android日历似乎行为不端

> ID：10380286
> 
> 赞同：1
> 
> 时间：2012-04-30T07:56:37.897
> 
> 标签：java, android, junit, calendar

我正在编写一个 Android 应用程序，我从日历中看到了一些奇怪的行为，所以我编写了以下测试：

```
public void testCalendar1(){
    int[] months = {
            Calendar.JANUARY,
            Calendar.FEBRUARY,
            Calendar.MARCH,
            Calendar.APRIL,
            Calendar.MAY,
            Calendar.JUNE,
            Calendar.JULY,
            Calendar.AUGUST,
            Calendar.SEPTEMBER,
            Calendar.OCTOBER,
            Calendar.NOVEMBER,
            Calendar.DECEMBER,
    };
    for(int i = 0; i < months.length; i++){
        assertEquals(months[i], i);
    }
}

public void testCalendar2(){
    Calendar cal = Calendar.getInstance();
    for(int i = 0; i < 12; i++){
        cal.set(Calendar.MONTH, i);
        assertEquals(cal.get(Calendar.MONTH), i);
    }
} 
```

我希望两个测试都能通过，但第二个测试失败并出现错误：

```
junit.framework.AssertionFailedError: expected:<2> but was:<1>
at ... 
```

因此，似乎当日历月设置为 1（二月）时，get 方法返回 2（三月）。有没有人见过这样的行为或知道可能是什么原因造成的？还是我刚刚做了一些愚蠢的事情？

注意：这些测试在 Android 手机上作为 Android junit 测试运行。

编辑：我刚刚意识到它只发生在 2 月，而今天是 4 月 30 日。看来我已经回答了我自己的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:12:14.270

您必须将 设置`DAY_OF_MONTH`为第一个。如果未初始化，则使用当前日期，即今天的 30.04.2012。当您将月份设置为 2 月时，它将是 2012 年 2 月 30 日，因为此日期不存在，日历实施会切换到 3 月。

# sql - 评论系统的结构

> ID：10380295
> 
> 赞同：-2
> 
> 时间：2012-04-30T07:58:29.050
> 
> 标签：sql, sql-server, database-design, blogs

我想管理一个 n-label 评论系统并设计一个这样的数据库结构。![我的数据库结构](../Images/0461994c70c770c0d6018ac7a9f50594.png)

我正在尝试设计一个支持未注册用户评论审核的数据库。我需要的功能是在发表评论时

*   如果用户已注册，它会直接显示。除此以外;
*   帖子在出现之前必须由版主检查。

请建议对我上面的数据库架构进行可能的更改以支持此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:36:43.837

为了做你想做的事，你似乎或多或少地拥有你需要的东西。用户创建新评论的过程如下

```
if the user is registered, and not blocked
  create BlogComment record with:
          IsApproved=true
          IsBlocked=false
          UserId=registered userId
          UserName = null
if the user is registered and blocked
  create BlogComment record with 
          IsApproved=false
          IsBlocked=true
          UserId=registered userId
          UserName = null 
if the user is unregistered
  create BlogComment record with
         IsApproved=false
         IsBlocked=false
         UserId=null
         UserName=user's name 
```

当您拉出评论以显示在帖子下方时，您需要类似的查询

```
SELECT Comment, ISNULL(bc.UserName, ru.UserName) AS UserName
FROM BlogComment bc
LEFT JOIN RegisteredUser ru
   ON bc.UserId = ru.Id
WHERE postId=<current PostId>
AND IsApproved=1 
```

这将提取所有已批准的评论（来自注册用户的评论，或来自已审核的未注册用户的评论）以及他们的用户名（对于注册用户，这将是他们从`RegisteredUser`表中的用户名，对于未注册用户，它将与他们的用户一起保存表中的注释`BlogComment`）

最后，当您想拉出帖子列表供版主审核时

```
SELECT * 
FROM BlogComment
WHERE IsApproved=0 
AND IsBlocked=0 
```

然后，您可以将他们接受的记录更新为`IsApproved=1`.

# safari - 在 safari 和本机应用程序之间共享

> ID：10380296
> 
> 赞同：0
> 
> 时间：2012-04-30T07:58:29.427
> 
> 标签：safari, native, sharing

我知道我可以从本机应用程序`openURL:`打开 Safari，然后在 javascript 中，使用`URL-Scheme`该应用程序打开并发送回任何数据。

我想知道在不实际打开 safari 的情况下是否可以进行这种共享 - safari 和本机应用程序之间的任何类型的公共存储 - cookie 或客户端存储或钥匙串 - 什么？

如果没有这样的公共存储并且必须打开 safari - 那么，我可以对 safari 进行一些小的定制吗，例如隐藏位置栏/工具栏，而无需用户将其添加到主屏幕并像打开它一样一个网络应用程序？

任何形式的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:55:31.137

好吧..因为所有的应用程序都是沙盒的。看起来没有任何官方解决方法。

# javascript - javascript 的调试和生产版本

> ID：10380297
> 
> 赞同：1
> 
> 时间：2012-04-30T07:58:35.287
> 
> 标签：javascript, debugging

我有一个包含大量调试语句的 js 文件。我正在寻找可以跳过这些调试语句并可以提供生产版本的脚本或编译器。

```
function init(){
  console.log('initing the lib');
  ...
  .. some code here ..
  ...
  console.log('init over');
} 
```

我需要一个没有这些console.log 的生产版本。这将允许编写一个调试版本，该版本可用于查看错误发生的确切位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:06:13.130

也许[谷歌关闭编译](http://closure-compiler.appspot.com/home)可以帮助你？

如果您担心`console.log`（似乎这就是您所说的“调试语句”的意思），那么在生产中覆盖它可能是一个想法：

```
var isProduction = true; //or false
if (isProduction){
 window.console = {log: function(){return true;}};
} 
```

# java - NetBeans 平台默认 TopComponent 定位为 anonymousMode_1

> ID：10380300
> 
> 赞同：2
> 
> 时间：2012-04-30T07:58:46.053
> 
> 标签：java, swing, netbeans, netbeans-platform

如何在“编辑器”模式下而不是在选项卡中设置两个 TopComponents 的默认位置，如下所示：

[![标签式](../Images/39314a3149696160b640457b27c36f4a.png)](https://i.stack.imgur.com/8NTUf.png)

但一个挨着一个；像这样：

[![窗格](../Images/f86d36f4dd8a5bdb6cd8b8a60d03af5c.png)](https://i.stack.imgur.com/hkbpi.png)

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T06:25:13.987

解决这个问题的关键是创建两种新的不同模式，它们具有相同的所需类型“编辑器”、相同的垂直和水平“权重”，但不同的水平“数字”。方法如下：

`Mp3PaneLeft.wsmode`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mode PUBLIC "-//NetBeans//DTD Mode Properties 2.3//EN" "http://www.netbeans.org/dtds/mode-properties2_3.dtd">
<mode version="2.3">
    <name  unique="Mp3PaneLeft" />
    <kind  type="editor" />
    <state type="joined" />
    <constraints>
        <path orientation="vertical" number="20" weight="0.2"/>
        <path orientation="horizontal" number="20" weight="0.5"/>
    </constraints>
    <empty-behavior permanent="true" />
</mode> 
```

`Mp3PaneRight.wsmode`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mode PUBLIC "-//NetBeans//DTD Mode Properties 2.3//EN" "http://www.netbeans.org/dtds/mode-properties2_3.dtd">
<mode version="2.3">
    <name  unique="Mp3PaneRight" />
    <kind  type="editor" />
    <state type="joined" />
    <constraints>
        <path orientation="vertical" number="20" weight="0.2"/>
        <path orientation="horizontal" number="40" weight="0.5"/>
    </constraints>
    <empty-behavior permanent="true" />
</mode> 
```

这是 layer.xml 中两个 .wsmode 的注册：

`layer.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE filesystem PUBLIC "-//NetBeans//DTD Filesystem 1.2//EN" "http://www.netbeans.org/dtds/filesystem-1_2.dtd">
<filesystem>
    <folder name="Windows2">
        <folder name="Modes">
            <file name="Mp3PaneLeft.wsmode" url="Mp3PaneLeft.wsmode"/>
            <file name="Mp3PaneRight.wsmode" url="Mp3PaneRight.wsmode"/>
        </folder>
    </folder>
</filesystem> 
```

现在可以使用

```
@TopComponent.Registration(mode = "Mp3PaneLeft", openAtStartup = true, position = 10) 
```

和

```
@TopComponent.Registration(mode = "Mp3PaneRight", openAtStartup = true,position = 20) 
```

分别为左右 TopComponent 窗格添加注释。

也不要忘记在每次更改此默认值时清理构建您的项目 - 它们会被用户轻松地重新定位 TopComponents 持续覆盖。

# gwt - 如何在不设置其高度（以像素为单位）的情况下查看 GWT StackLayoutPanel

> ID：10380301
> 
> 赞同：0
> 
> 时间：2012-04-30T07:58:49.613
> 
> 标签：gwt, gwt2

我正在使用 GWT，我正在动态创建 StackLayoutPanel。例如。我在 VerticalPanel 中有 4 或 5 个 StackLayoutPanel。我以像素为单位设置 StackLayoutPanel 的高度。如果我不设置高度，我只会在视图中看到一个 StackLayoutPanel，而不是 4 或 5 个。我想查看所有面板，但不想以像素为单位设置高度。

我的代码，

```
 StackLayoutPanel stackLayoutPanel = new StackLayoutPanel(Unit.EM);
    stackLayoutPanel.setHeight("300px");
    List<String> list = Lists.newArrayList();
    VerticalPanel vPanel = new VerticalPanel();
    for(String value : list) {
         stackLayoutPanel.add(new Label("Hello"), new Label("Hai"), 4);
    }
    vPanel.add(stackLayoutPanel); 
```

谁能帮我？

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:11:07.730

有时，如果更改了这些 CSS 属性，这些面板有时会消失。所以试着编辑那些，如果这样原谅我，我可能是错的。对于堆叠布局面板的容器，我认为有一个弹性表会很好。

# javascript - 编辑我的信息后获取 html 标签（asp.net）

> ID：10380306
> 
> 赞同：0
> 
> 时间：2012-04-30T07:59:36.650
> 
> 标签：javascript, jquery, asp.net, html

对不起我的语言不好。我是新开发的asp.net。

1-我有一个表有多个行和列通过选择的行数和列数动态创建。

2-当我创建表时，我还为每一行创建了这个控制：-

*A- 一个文本框、一个标签、一个组合框和颜色选择器。
B-单击任何单元格以更改所选单元格的背景颜色时显示的颜色选择器。
C- 点击按钮后，标签显示我在文本框中写的内容。
D-从组合框中选择任何东西。
E-控件、行和单元格具有唯一 ID。*

**我已经用 conrols 创建了这个表，一切正常。**

**问题：**
*1-我试图在标签中显示我在文本中写的内容
2-我想获取创建的表的 html 标签，包括其中包含所选数据的所有内容，颜色更改以及我写的内容之后保存在 mydata 库中的文本框。*

**谢谢，**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:29:19.887

据我所知，您的第一个问题可以在代码隐藏中解决。

C＃：

```
// Fire the text change for whatever event you need. ie a button click.
protected void button1_Click(object sender, EventArgs e) {

Label1.Text = TextBox1.Text;

} 
```

不幸的是，我无法理解您的第二个问题。尝试再次解释您的情况和问题。

如果您需要向/从数据库发送/检索数据，则需要执行几个步骤，具体取决于您运行的服务器。您可以使用数据绑定控件或在后面的代码中手动发送数据。

这是一个可以帮助你的视频。

[http://www.youtube.com/watch?v=CKdQUgrL3Gg](http://www.youtube.com/watch?v=CKdQUgrL3Gg)

这是一篇也可能有所帮助的文章。

[http://weblogs.asp.net/dotnetstories/archive/2010/12/19/retrieve-data-from-an-asp-net-application-using-ado-net-2-0-connected-model.aspx](http://weblogs.asp.net/dotnetstories/archive/2010/12/19/retrieve-data-from-an-asp-net-application-using-ado-net-2-0-connected-model.aspx)

# python - Python pexpect 没有按预期工作

> ID：10380309
> 
> 赞同：1
> 
> 时间：2012-04-30T08:00:02.337
> 
> 标签：python, shell, pexpect

我正在尝试编写一个程序来运行一些带有模拟用户数据的 shell 命令。

问题是，如果代码末尾没有这一行，shell 命令将无法正确运行：

```
raw_input('press <enter> to exit') 
```

我怎样才能摆脱那条线？

```
child = pexpect.spawn('grunt init:gruntfile')
child.logfile_read = sys.stdout

child.expect ('Is the DOM involved in ANY way?')
child.sendline ('y')
child.logfile_read = sys.stdout

child.expect ('Will files be concatenated or minified?')
child.sendline ('y')
child.logfile_read = sys.stdout

child.expect ('Will you have a package.json file?')
child.sendline ('y')
child.logfile_read = sys.stdout

child.expect ('Do you need to make any changes to the above before continuing?')
child.sendline ('n')
child.logfile_read = sys.stdout

raw_input('press <enter> to exit') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T08:13:09.683

问题似乎是，如果没有 raw_input 来减慢程序速度，您的 python 脚本在子进程完成之前退出（并杀死进程中的子进程）。

我认为应该处理这种情况，但是从[文档](http://pexpect.sourceforge.net/pexpect.html)`pexpect.wait()`中听起来，如果子进程退出后有未读的输出，wait() 会挂起，并且在不知道子进程的详细信息的情况下，我不能说是否存在是会发生的风险。read() 和 wait() 的某种组合可能会起作用，或者如果很难弄清楚你可以 time.sleep() 几秒钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-14T17:53:13.820

我知道自从提出这个问题以来已经有一段时间了，但我遇到了它，并认为我会自愿为我工作。

我基本上只是设置了一个 while 循环，询问该过程是否完成，如果它从未完成则会抛出一个错误。这样我就可以有一个更灵活的等待，它会以一种对我更有意义的方式出错，同时又不会把我的自动化搞得太糟糕。

我还应该指出，这是在程序退出之前等待在一系列交互式提示结束时执行的操作。因此，如果您正在等待某个进程中间的某些内容，那么这将无法正常工作。但是，您可能可以对其进行修改以处理不同的情况。

```
import time, sys, pexpect

some_function():
    child = pexpect.spawn('some command here')

    if debugging:  # Just in case you also want to see the output for debugging
        child.logfile = sys.stdout

    # Do stuff
    child expect('some regex')
    child sendline('some response')

    sleep_count = 0  # For tracking how long it slept for.
    acceptable_duration = 120  # The amount of time that I'm willing to wait

    # Note that apparently solaris can take a while to reply to isalive(),
    # so the process may go a lot longer than what you set the duration to.

    while child.isalive():
        if sleep_count > acceptable_duration
            sys.stderr.write("Useful text explaining that the process never exited."
            sys.exit(1)
        time.sleep(1) 
```

# php - 如何访问 facebook 用户的 read_stream 数据？

> ID：10380310
> 
> 赞同：1
> 
> 时间：2012-04-30T08:00:05.403
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我目前正在尝试创建一个 facebook 应用程序'（竞赛应用程序'）。当用户点击图片并分享它时，他的邮件就会被放入数据库中。我通过在share的回调函数中调用一个php页面来做到这一点，我正在阅读他的墙提要，并与图片进行比较。但问题是我似乎无法访问他的数据。谁能帮助我？这是我的代码：

```
<?php

include('../config/config.php');
include('../lib/facebook.php');

//Initialisation SDK PHP Facebook
$facebook = new Facebook (array(
    'appId' => FB_APP_ID,
    'secret' => FB_SECRET_ID,
    'cookie' => true,
));

// Récup si l'user est en session ou non
$user_id = $facebook->getUser();

$me = $facebook->api('/me');
$mail = $me['email'];
$feed = $facebook->api('/me/feed');
$data = $feed['data'];
$link = $data['link'];

$galant="MY_LINK";
$storyboard="MY_LINK";
$tovil="MY_LINK";
$tingapour="MY_LINK";

if($link===$galant)
{
$base=mysql_connect(BDD_HOST,BDD_USER,BDD_PASS);
mysql_select_db(BDD_NAME, $base);

$sql="insert into register(mail,link) values('$mail','$link')";
$req=mysql_query($sql);

}
?> 
```

感谢您的帮助！（对不起，我是法国人^^）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:31:14.740

我相信它运作良好。试试他们的工具：

[http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Ffeed](http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Ffeed)

他们工作正常。请记住，您必须请求很多权限才能获得完整的提要。

此外，[apigee](https://apigee.com/console/facebook)允许您测试所有 Facebook 功能并向您显示确切的请求。

# excel - 使用VBA循环浏览文件夹中的文件？

> ID：10380312
> 
> 赞同：259
> 
> 时间：2012-04-30T08:00:34.367
> 
> 标签：vba循环浏览目录的文件。, excel, vba

我想在 Excel 2010 中使用[vba循环浏览目录的文件。](/questions/tagged/vba "显示标记为“vba”的问题")

在循环中，我需要：

*   文件名，和
*   文件格式化的日期。

如果文件夹不超过 50 个文件，我已经编写了以下代码，它可以正常工作，否则速度会非常慢（我需要它来处理文件超过 10000 个的文件夹）。这段代码的唯一问题是查找操作`file.name`需要非常多的时间。

*有效但 waaaaaay 太慢的代码（每 100 个文件 15 秒）：*

```
Sub LoopThroughFiles()
   Dim MyObj As Object, MySource As Object, file As Variant
   Set MySource = MyObj.GetFolder("c:\testfolder\")
   For Each file In MySource.Files
      If InStr(file.name, "test") > 0 Then
         MsgBox "found"
         Exit Sub
      End If
   Next file
End Sub 
```

* * *

**问题解决了：**

1.  我的问题已通过以下解决方案`Dir`以特定方式解决（15000 个文件为 20 秒）并使用命令检查时间戳`FileDateTime`。
2.  考虑到另一个答案，从 20 秒以下缩短到 1 秒以下。

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-04-30T11:23:17.993

`Dir`带通配符，因此您可以在`test`前面添加过滤器并避免测试每个文件

```
Sub LoopThroughFiles()
    Dim StrFile As String
    StrFile = Dir("c:\testfolder\*test*")
    Do While Len(StrFile) > 0
        Debug.Print StrFile
        StrFile = Dir
    Loop
End Sub 
```

* * *

## 回答 #2

> 赞同：166
> 
> 时间：2012-04-30T08:08:02.347

Dir 似乎非常快。

```
Sub LoopThroughFiles()
    Dim MyObj As Object, MySource As Object, file As Variant
   file = Dir("c:\testfolder\")
   While (file <> "")
      If InStr(file, "test") > 0 Then
         MsgBox "found " & file
         Exit Sub
      End If
     file = Dir
  Wend
End Sub 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2017-08-18T06:09:41.580

这是我作为函数的解释：

```
'#######################################################################
'# LoopThroughFiles
'# Function to Loop through files in current directory and return filenames
'# Usage: LoopThroughFiles ActiveWorkbook.Path, "txt" 'inputDirectoryToScanForFile
'# https://stackoverflow.com/questions/10380312/loop-through-files-in-a-folder-using-vba
'#######################################################################
Function LoopThroughFiles(inputDirectoryToScanForFile, filenameCriteria) As String

    Dim StrFile As String
    'Debug.Print "in LoopThroughFiles. inputDirectoryToScanForFile: ", inputDirectoryToScanForFile

    StrFile = Dir(inputDirectoryToScanForFile & "\*" & filenameCriteria)
    Do While Len(StrFile) > 0
        Debug.Print StrFile
        StrFile = Dir

    Loop

End Function 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2014-06-03T14:59:04.227

Dir 函数是要走的路，但**问题是您不能`Dir`递归地使用该函数**，如此处所述[，朝向底部](http://office.microsoft.com/en-us/access-help/dir-function-HA001228824.aspx)。

我处理此问题的方法是使用该`Dir`函数获取目标文件夹的所有子文件夹并将它们加载到数组中，然后将数组传递给递归函数。

这是我编写的一个实现这一点的类，它包括搜索过滤器的能力。（*你必须原谅匈牙利符号，这是在风靡一时的时候写的。*）

```
Private m_asFilters() As String
Private m_asFiles As Variant
Private m_lNext As Long
Private m_lMax As Long

Public Function GetFileList(ByVal ParentDir As String, Optional ByVal sSearch As String, Optional ByVal Deep As Boolean = True) As Variant
    m_lNext = 0
    m_lMax = 0

    ReDim m_asFiles(0)
    If Len(sSearch) Then
        m_asFilters() = Split(sSearch, "|")
    Else
        ReDim m_asFilters(0)
    End If

    If Deep Then
        Call RecursiveAddFiles(ParentDir)
    Else
        Call AddFiles(ParentDir)
    End If

    If m_lNext Then
        ReDim Preserve m_asFiles(m_lNext - 1)
        GetFileList = m_asFiles
    End If

End Function

Private Sub RecursiveAddFiles(ByVal ParentDir As String)
    Dim asDirs() As String
    Dim l As Long
    On Error GoTo ErrRecursiveAddFiles
    'Add the files in 'this' directory!

    Call AddFiles(ParentDir)

    ReDim asDirs(-1 To -1)
    asDirs = GetDirList(ParentDir)
    For l = 0 To UBound(asDirs)
        Call RecursiveAddFiles(asDirs(l))
    Next l
    On Error GoTo 0
Exit Sub
ErrRecursiveAddFiles:
End Sub
Private Function GetDirList(ByVal ParentDir As String) As String()
    Dim sDir As String
    Dim asRet() As String
    Dim l As Long
    Dim lMax As Long

    If Right(ParentDir, 1) <> "\" Then
        ParentDir = ParentDir & "\"
    End If
    sDir = Dir(ParentDir, vbDirectory Or vbHidden Or vbSystem)
    Do While Len(sDir)
        If GetAttr(ParentDir & sDir) And vbDirectory Then
            If Not (sDir = "." Or sDir = "..") Then
                If l >= lMax Then
                    lMax = lMax + 10
                    ReDim Preserve asRet(lMax)
                End If
                asRet(l) = ParentDir & sDir
                l = l + 1
            End If
        End If
        sDir = Dir
    Loop
    If l Then
        ReDim Preserve asRet(l - 1)
        GetDirList = asRet()
    End If
End Function
Private Sub AddFiles(ByVal ParentDir As String)
    Dim sFile As String
    Dim l As Long

    If Right(ParentDir, 1) <> "\" Then
        ParentDir = ParentDir & "\"
    End If

    For l = 0 To UBound(m_asFilters)
        sFile = Dir(ParentDir & "\" & m_asFilters(l), vbArchive Or vbHidden Or vbNormal Or vbReadOnly Or vbSystem)
        Do While Len(sFile)
            If Not (sFile = "." Or sFile = "..") Then
                If m_lNext >= m_lMax Then
                    m_lMax = m_lMax + 100
                    ReDim Preserve m_asFiles(m_lMax)
                End If
                m_asFiles(m_lNext) = ParentDir & sFile
                m_lNext = m_lNext + 1
            End If
            sFile = Dir
        Loop
    Next l
End Sub 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-28T16:49:37.063

`Dir`当我处理和处理来自其他文件夹的文件时，函数很容易失去焦点。

我使用组件获得了更好的结果`FileSystemObject`。

这里给出了完整的例子：

[http://www.xl-central.com/list-files-fso.html](http://www.xl-central.com/list-files-fso.html)

不要忘记在 Visual Basic 编辑器中设置对*Microsoft 脚本运行时*的引用（通过使用工具 > 引用）

试试看！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-01-10T20:11:42.650

试试这个。([链接](http://snippetcoders.com/Snippet/all-excel-sheets-are-saved-as-separated-excel-workbooks-same-folder-as-current-file/))

```
Private Sub CommandButton3_Click()

Dim FileExtStr As String
Dim FileFormatNum As Long
Dim xWs As Worksheet
Dim xWb As Workbook
Dim FolderName As String
Application.ScreenUpdating = False
Set xWb = Application.ThisWorkbook
DateString = Format(Now, "yyyy-mm-dd hh-mm-ss")
FolderName = xWb.Path & "\" & xWb.Name & " " & DateString
MkDir FolderName
For Each xWs In xWb.Worksheets
    xWs.Copy
    If Val(Application.Version) < 12 Then
        FileExtStr = ".xls": FileFormatNum = -4143
    Else
        Select Case xWb.FileFormat
            Case 51:
                FileExtStr = ".xlsx": FileFormatNum = 51
            Case 52:
                If Application.ActiveWorkbook.HasVBProject Then
                    FileExtStr = ".xlsm": FileFormatNum = 52
                Else
                    FileExtStr = ".xlsx": FileFormatNum = 51
                End If
            Case 56:
                FileExtStr = ".xls": FileFormatNum = 56
            Case Else:
                FileExtStr = ".xlsb": FileFormatNum = 50
        End Select
    End If
    xFile = FolderName & "\" & Application.ActiveWorkbook.Sheets(1).Name & FileExtStr
    Application.ActiveWorkbook.SaveAs xFile, FileFormat:=FileFormatNum
    Application.ActiveWorkbook.Close False
Next
MsgBox "You can find the files in " & FolderName
Application.ScreenUpdating = True

End Sub 
```

# css - 边距：0 自动在 Internet Explorer 中不起作用

> ID：10380313
> 
> 赞同：0
> 
> 时间：2012-04-30T08:00:36.643
> 
> 标签：css, internet-explorer, css-float, margin

margin:0 auto 在 Internet Explorer 中不起作用。它在 Firefox 中运行良好。

请查看网站[http://jobslanda.com/](http://jobslanda.com/)

```
#Body{
    background: none repeat scroll 0 0 #FFFFFF;
    margin:0 auto;
    min-height: 500px;
    padding: 23px 20px 10px;
    width: 1000px;
    background-color:#ffffff;   
}
#wrapper {
    background-color: #FBF8F4;
    border: medium none;
    margin: 0 auto;
    position: relative;

} 
```

请帮我解决这个问题。

真挚地，

苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:04:17.593

我假设您指的是您的第二条规则，`#wrapper`. 自动边距仅在元素具有已知宽度时才有效；`#wrapper`是`width:auto`目前，所以没有剩余的利润来分配。

# python - Mongodb聚合框架和Python

> ID：10380314
> 
> 赞同：0
> 
> 时间：2012-04-30T08:00:36.917
> 
> 标签：python, mongodb

我有下一个集合：

```
{"status": "new", "date": {"$date": 1334841845571}, "_id": {"$oid": "4f901223e4b0c2899fb22da0"}, "description": "description 1", "number": "01"}
{"status": "new", "date": {"$date": 1334841845571}, "_id": {"$oid": "4f90126fe4b0c2899fb22da1"}, "description": "description 1", "number": "02"}
{"status": "new", "date": {"$date": 1334841845571}, "_id": {"$oid": "4f901276e4b0c2899fb22da2"}, "description": "description 1", "number": "03"}
{"status": "blocked", "date": {"$date": 1332163445571}, "_id": {"$oid": "4f901286e4b0c2899fb22da3"}, "description": "description 1", "number": "04"}
{"status": "blocked", "date": {"$date": 1332163445571}, "_id": {"$oid": "4f90128ee4b0c2899fb22da4"}, "description": "description 1", "number": "05"}
{"status": "blocked", "date": {"$date": 1332163445571}, "_id": {"$oid": "4f901292e4b0c2899fb22da5"}, "description": "description 1", "number": "06"} 
```

我正在尝试按“状态”列分组：

```
cursor = db.command('aggregate', table, pipeline=[
            {'$project': {u'date': 1, u'status': 1, u'number': 1, u'description': 1}}
            {'$group': {'_id': u'$status'}}]) 
```

但我明白了：

```
"ok"
"result" 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:43:45.940

您需要将这些额外字段添加到管道中的“$group”命令中，但您需要指定 group 命令应如何聚合它们，因为它不能将它们全部放在一个数组中。请同时提供您期望的输出。

# java - 调整窗口大小时Java Swing绘图消失

> ID：10380317
> 
> 赞同：4
> 
> 时间：2012-04-30T08:00:44.113
> 
> 标签：java, swing, resize

我非常需要你的帮助，因为我自己无法解决这个问题。我正在尝试创建一个 GUI，并希望在按下按钮后在其中绘制一些东西，但我似乎有某种刷新/重新验证或线程问题。这幅画是画的，但是当我调整窗口大小时，画就消失了。此外，当快速移动窗口时，部分绘图会消失。我已经尝试了很多东西，但我无法解决这个问题，也许你可以帮助我。我被指示不要一开始就编写自己的代码，而是使用 NetBeans 设计函数来生成按钮和面板等。也许这会损害绘图过程/功能，但我不知道。我会向您发布相关代码，并非常感谢您的建议（被注释掉的东西只是我之前尝试过的人工制品，所以不要介意）：

```
public class NewJFrame extends JFrame  {
  public NewJFrame() { initComponents(); }

  @SuppressWarnings("unchecked")
  private void initComponents() {
    jButton1 = new javax.swing.JButton();
    jPanel1 = new javax.swing.JPanel();
    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setMinimumSize(new java.awt.Dimension(1200, 1000));
    jButton1.setText("Draw");
    jButton1.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent evt) {
        jButton1ActionPerformed(evt);
      }
    });
    GroupLayout jPanel1Layout = new GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
        .addGap(0, 1000, Short.MAX_VALUE)
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    );
    GroupLayout layout = new GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jPanel1, GroupLayout.DEFAULT_SIZE, 1000, Short.MAX_VALUE)
            .addGap(18, 18, 18)
            .addComponent(jButton1)
            .addGap(33, 33, 33))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(0, 745, Short.MAX_VALUE)
                    .addComponent(jButton1)
                    .addGap(237, 237, 237))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jPanel1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addContainerGap())))
    );

    pack();
  }// </editor-fold>

  private void jButton1ActionPerformed(ActionEvent evt) {
    Graphics g = jPanel1.getGraphics();
    draw(jPanel1, g);
  }

  protected void paintComponent(Graphics g){
    jPanel1.setSize(1000, 1000);
    Dimension d = jPanel1.getSize();
    g.setColor(Color.BLACK);
    for (int i=0; i<=1000;i++){
      if (i%100==0){
        g.setColor(Color.RED);
        g.drawLine(i, d.height/2, i, (d.height/2)+100);
      }
      else if(i%50==0 && i%100!=0){
        g.setColor(Color.BLUE);
        g.drawLine(i, d.height/2, i, (d.height/2)+100);
      }
      else {
        g.setColor(Color.BLACK);
        g.drawLine(i, d.height/2, i, (d.height/2)+100);
      }
    }
    g.setColor(Color.green);
    g.drawLine(0, d.height / 2, d.width, d.height / 2);
  }

  public void draw(JPanel Jpanel1, Graphics g) {
    System.out.println("wuffkowski");
    Jpanel1.setSize(1000,1000);
    Dimension d = Jpanel1.getSize();
    g.setColor(Color.BLACK);
    for (int i=0; i<=1000;i++){
      if (i%100==0){
        g.setColor(Color.RED);
        g.drawLine(i, d.height/2, i, (d.height/2)+100);
      }
      else if(i%50==0 && i%100!=0){
        g.setColor(Color.BLUE);
        g.drawLine(i, d.height/2, i, (d.height/2)+100);
      }
      else {
        g.setColor(Color.BLACK);
        g.drawLine(i, d.height/2, i, (d.height/2)+100);
      }
    }
    g.setColor(Color.green);
    g.drawLine(0, d.height / 2, d.width, d.height / 2);
    Jpanel1.paintComponents(g);
  }

  public static void lala () {
    try {
      for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
        if ("Nimbus".equals(info.getName())) {
          javax.swing.UIManager.setLookAndFeel(info.getClassName());
          break;
        }
      }
    } catch (ClassNotFoundException ex) {
      java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
      java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
      java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
      java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    java.awt.EventQueue.invokeLater(new Runnable() {
      public void run() {
        NewJFrame JF =new NewJFrame();
        JF.setVisible(true);
      }
    });
  }
  private javax.swing.JButton jButton1;
  private javax.swing.JPanel jPanel1;
} 
```

再次感谢您宝贵的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T08:24:02.173

Java 不记得为您绘制命令；当您单击按钮时，您的图形会呈现一次，因为这是唯一一次`draw()`被调用。

如果您想在调整大小后刷新渲染，请覆盖`paint(Graphics)`并`draw()`在那里调用。

如果这与按钮单击有关，则必须在类中添加字段，在其中记住您需要的所有内容，`draw()`包括是否应该绘制任何内容：

```
private boolean drawAtAll = false;

private void jButton1ActionPerformed(ActionEvent evt) {
  drawAtAll = true; // ok to draw now
  draw();
}

@Override
public void paint(Graphics g) {
   super.paint(g);
   draw();
}

public void draw() {
  if( !drawAtAll ) return;

  Graphics g = jPanel1.getGraphics();
  ...
} 
```

进一步阅读：

*   [课程：执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T09:04:10.047

尝试使用此代码，并提出任何可能出现的问题，在 JPanel 的[paintComponent(...)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)方法中进行绘制。而不是每次都为所述组件提供大小，`JComponent`您可以简单地覆盖所述组件的[getPreferredSize() 。](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getPreferredSize%28%29)为了调用你`paintComponent(...)`，你可以简单地编写`repaint()`而不是从你的程序中显式地调用`paintComponent(...)`，Swing 会自动执行此操作。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class PaintingExample
{
    private CustomPanel paintingPanel;
    private Timer timer;
    private int x = 1;
    private int y = 1;
    private ActionListener timerAction = new ActionListener()
    {
        public void actionPerformed(ActionEvent ae)
        {
            x++;
            y++;
            paintingPanel.setPosition(x, y);
        }
    };

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Painting Example");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        paintingPanel = new CustomPanel();
        final JButton startStopButton = new JButton("STOP");
        startStopButton.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                if (timer.isRunning())
                {
                    startStopButton.setText("START");
                    timer.stop();
                }
                else if (!timer.isRunning())
                {
                    startStopButton.setText("STOP");
                    timer.start();
                }
            }
        });

        frame.add(paintingPanel, BorderLayout.CENTER);
        frame.add(startStopButton, BorderLayout.PAGE_END);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        timer = new Timer(100, timerAction);
        timer.start();
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new PaintingExample().createAndDisplayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private int x = 0;
    private int y = 0;

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(800, 600));
    }

    public void setPosition(int a, int b)
    {
        x = a;
        y = b;
        if (x <(getWidth() - 10) && y < (getHeight() - 10))
            repaint();
        else
            System.out.println("Nothing is happening...");
    }

    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.clearRect(0, 0, getWidth(), getHeight());
        g.setColor(Color.MAGENTA);
        g.fillOval(x, y, 10, 10);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T08:08:34.267

我没有浏览您的所有代码，但立即可见的是，您不应该在`paintComponent`不调用`super.paintComponent`. 并且您注释掉的线路调用`super.paintComponents`（注意 s），这是不一样的。

我也不确定“当我调整窗口大小时”是什么意思，以及它如何与`Jpanel1.setSize( 1000, 1000 )`出现在代码中的调用联系在一起。您的布局管理器将处理面板的大小。您不应将其设置为固定大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T08:08:31.943

当您调整面板大小或更改其位置或最小化并最大化它时，`paint(...)`会调用一种方法来重新绘制内容。你必须覆盖这个函数，让它画你的线或任何东西。为此，您可能必须将绘图保存在数据结构中，以便能够在必要时重新绘制它。

[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#paint%28java.awt.Graphics%29)描述了绘制方法。

# ios - 临时安装失败（甚至不启动...）

> ID：10380318
> 
> 赞同：1
> 
> 时间：2012-04-30T08:00:45.583
> 
> 标签：ios, ad-hoc-distribution

我创建了一个 IPA 存档和一个 plist，并将这两个文件放在 Web 服务器上。然后我尝试在 Safari 中打开这个链接：

```
itms-services://?actions=download-manifest&url=https://www.mydomain.de/mydir/HelloWorld.plist 
```

什么也没有发生。控制台只记录“客户端 itunesstored 是后台应用程序”，但经常记录，对我来说似乎没有任何影响。设备包含在配置文件中。

我的印象是，“itms-services”不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:58:44.233

尝试这个：

```
itms-services://?action=download-manifest&url=https%3A%2F%2Fwww.mydomain.de%2Fmydir%2FHelloWorld.plist" 
```

# html - 如何将列表包裹在图像周围并同时缩进列表项？

> ID：10380320
> 
> 赞同：3
> 
> 时间：2012-04-30T08:01:03.977
> 
> 标签：html, css, html-lists

我有[一个 jsFiddle 来](http://jsfiddle.net/CEWsT/)演示这个问题。发生的情况是，如果缩进列表环绕在图像周围（向左浮动），我无法正常看到缩进列表。我尝试添加`margin-left: [some value];`，但只有图像下方的列表显示边距（如可见）。我知道上面的列表也接收边距，但由于它是环绕的，所以图像已经作为它的左边距。

有没有解决的办法？

# android - 实现 Parcelable 的类

> ID：10380323
> 
> 赞同：2
> 
> 时间：2012-04-30T08:01:25.627
> 
> 标签：android, serialization

我想将一个类的数组列表从一个活动传递到另一个活动。要做到这一点，该类正在实现 Parcelable。问题是类中很少有字段为空。如何检查和仅发送不为空的值。我认为这可以通过 writeToParcel() 中的简单 if/else 轻松完成，但如何在将参数作为 Parcel 的类的构造函数中执行相同操作。如下

```
private Student(Parcel in) {
} 
```

发送空值时存在一些问题..

编辑：添加代码

```
 @Override
        public void writeToParcel(Parcel dest, int flags) {
            dest.writeString(id);
            dest.writeString(name);
            dest.writeString(grade);
            dest.writeString(dateOfBirth);
            dest.writeString(place);
                //Like wise there are many other fields
                //We have to write only values which are not null
}

       private Student(Parcel in) {
            id=in.readString();
            name=in.readString();
            grade=in.readString();
            dateOfBirth=in.readString();
            place=in.readString();
            //like wise have to read all other fields
           //we have to make sure we read only values which are not null
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-30T08:04:53.147

最简单的方法是创建一个 Globalclass.java 并声明静态数组列表，如 public static`ArrayList<String> arrayList = new ArrayList<String>();` 以及何时使用`Globalclass.arrayList = value`；并在项目中使用任何软件。

使用意图的另一种传递方式

```
Intent i =new Intent(this,2activity.class);
i.putStringArrayListExtra(name, arrayList); 
```

# c++ - 在不重新链接的情况下更新依赖于 Boost 库的库的 Boost 版本

> ID：10380325
> 
> 赞同：3
> 
> 时间：2012-04-30T08:01:45.563
> 
> 标签：c++, boost, dll, dynamic-linking

我已经构建了一个依赖于多个 Boost 库的库（VC10）。我想在多个应用程序中使用这个库，其中每个应用程序都依赖于不同的 Boost 版本，我希望能够在不为每个 Boost 版本构建库的情况下做到这一点。

我已经使用 BOOST_ALL_DYN_LINK 以及 BOOST_ALL_NO_LIB 构建了我的库，但这两个库似乎都依赖于特定的 Boost 版本。

有人可以解释一下我如何构建一个依赖于 Boost 的库，可以在不重新编译或重新链接库的情况下更新 Boost 版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:33:46.060

“有人能解释一下我如何构建一个依赖于 Boost 的库，可以在不重新编译或重新链接库的情况下更新 Boost 版本吗？”

我不认为这是可能的。任何数量的小更改，例如向类添加新数据成员，都需要重新编译以在版本之间切换。只有当 boost 在版本之间不更改任何此类细节时，才有可能。

如果您无法遵循 @jamesj 坚持使用单一版本的建议，命名空间可能会有所帮助。我会采用每个 boost 版本并对其进行修改，以便将 boost_x_y_z 作为顶级命名空间而不是 boost_x_y_z，其中 xyz 给出了版本号。所以下面的代码

```
namespace acc = boost::accumulators;
typedef acc::features<acc::tag::density> features_t;
typedef acc::accumulator_set<double, features_t> accumulator_t; 
```

可以针对版本 1.47.0：

```
namespace acc = boost_1_47_0::accumulators;
typedef acc::features<acc::tag::density> features_t;
typedef acc::accumulator_set<double, features_t> accumulator_t; 
```

如果您不在乎使用什么版本，您可以在某处放置标题：

```
namespace boost_latest = boost_1_50_0; 
```

所以我的例子会变成：

```
namespace acc = boost_latest::accumulators;
typedef acc::features<acc::tag::density> features_t;
typedef acc::accumulator_set<double, features_t> accumulator_t; 
```

然后当一个新版本出现时，您只需更新一个定义并重新编译。您的库的新版本仍应与旧程序的 ABI 兼容。但是他们不会在不重新编译的情况下利用新的 boost 版本。

# java - Java 线程和垃圾收集器

> ID：10380327
> 
> 赞同：23
> 
> 时间：2012-04-30T08:01:59.583
> 
> 标签：java, multithreading, garbage-collection

> **可能重复：**
> [Java Thread Garbage 是否已收集](https://stackoverflow.com/questions/2423284/java-thread-garbage-collected-or-not)

考虑以下类：

```
class Foo implements Runnable {

  public Foo () {
       Thread th = new Thread (this);
       th.start();
  }

  public run() {
    ... // long task
  }

} 
```

`Foo`如果我们通过做创建几个实例

```
new Foo();
new Foo();
new Foo();
new Foo(); 
```

（请注意，我们不保留指向它们的指针）。

1.  垃圾收集器是否可以在线程结束*之前*删除这些实例`run()`？（换句话说：是否有任何对`Foo`对象的引用？）

2.  另一方面，这些实例会在 `run()' 中的线程结束后被 GC 删除，还是我们在浪费内存（“内存泄漏”）？

3.  如果 1\. 或 2\. 有问题，那么正确的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-30T08:08:24.817

1.  任何被活动线程引用的对象都不能被释放。
2.  是的，实例将在 `run()' 中的线程结束后被 GC 删除。
3.  没问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-30T08:10:31.947

> 1.  垃圾收集器是否可以在 run() 中的线程结束之前删除这些实例？（换句话说：是否有任何对 Foo 对象的引用？）

不会。当构造函数运行时，GC 不会收集对象。否则即使是最简单的：

```
Customer c = new Customer(); 
```

的构造函数`Customer`运行时可能会失败。另一方面，当您启动一个新线程时，该线程对象将成为一个新的*GC 根*，因此该对象引用的所有内容都不是垃圾回收的对象。

> 1.  另一方面，这些实例会在 `run()' 中的线程结束后被 GC 删除，还是我们在浪费内存（“内存泄漏”）？

一旦线程完成，它就不再是 GC 根。如果没有其他代码指向该线程对象，它将被垃圾回收。

> 1.  如果 1\. 或 2\. 有问题，那么正确的方法是什么？

你的代码很好。然而：

*   从单元测试的角度来看，在构造函数中启动一个新线程是一个坏主意

*   如果您想稍后中断这些线程，则保留对所有正在运行的线程的引用可能是有益的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-30T08:14:12.553

在不指定线程组的情况下启动新线程会将[其添加到默认组](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#Thread%28java.lang.ThreadGroup,%20java.lang.Runnable,%20java.lang.String%29)：

> 如果 group 为 null 并且有安全管理器，则该组由安全管理器的 getThreadGroup 方法确定。如果 group 为 null 并且没有安全管理器，或者安全管理器的 getThreadGroup 方法返回 null，则将 group 设置为与正在创建新线程的线程相同的 ThreadGroup。

只要该组还活着，该组就会保留对该线程的引用，因此在此期间不能对其进行 GC。

当线程终止时（=`run()`无论出于何种原因返回时），该线程将从线程组中删除。这发生在`exit()`从本机代码调用的私有方法中。这是对线程的最后一个引用丢失并且符合 GC 条件的时间点。

请注意，代码表明`ThreadGroup`可以，`null`但事实并非如此。各种空值检查只是为了在出现问题的罕见情况下避免 NPE。在`Thread.init()`中，如果 Java 无法确定线程组，您将获得 NPE。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-30T08:08:37.277

1.  该`Foo`对象由线程引用。线程在其运行期间一直被引用。因此它不会被垃圾收集。
2.  没有内存泄漏。线程将结束，并将`Foo`在此过程中被垃圾收集和对象。
3.  它应该可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T08:47:26.933

假设您在 run 方法中创建对象，当 run 方法退出时，对象将超出范围，然后可用于垃圾回收。运行只是另一种方法。是否使用线程不会以任何方式改变这里的垃圾收集行为。您只需要关心对象何时超出范围，这通常与块范围（方法块、while 循环、if 块等）相关联。

因此，由于您没有保留对对象的任何引用，因此您可能希望将创建对象的逻辑提取到其自己的短期方法中。这样，创建的对象就不需要超出该方法的范围。

# c# - 从另一个 C# 程序捕获 C# 可执行输出

> ID：10380330
> 
> 赞同：3
> 
> 时间：2012-04-30T08:02:14.380
> 
> 标签：c#, .net, console-application, outputstream

我正在执行一个 C# 程序，即来自另一个 C# 程序的 .exe。但是 .exe 在其程序中有一些 Console.WriteLine() 。我想把标准输出放到我的 C# 程序中。

例如，

考虑一个 C# 可执行文件，即 1.exe，还有另一个 Program 2.cs。

我从 2.cs 1.exe 打电话。现在控制台从 1.exe 显示一些输出。但我想要我的程序 2.cs 中的输出。用于向用户显示信息。

是否可以？请帮忙

谢谢赛辛杜

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T08:04:56.050

您可以使用 ProcessStartInfo.RedirectStandardOutput 属性

```
Process compiler = new Process();
compiler.StartInfo.FileName = "csc.exe";
compiler.StartInfo.Arguments = "/r:System.dll /out:sample.exe stdstr.cs";
compiler.StartInfo.UseShellExecute = false;
compiler.StartInfo.RedirectStandardOutput = true;
compiler.Start();    

Console.WriteLine(compiler.StandardOutput.ReadToEnd());

compiler.WaitForExit(); 
```

[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:06:23.507

您必须重定向标准输出流，查看[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)了解更多信息。

> 当 Process 将文本写入其标准流时，该文本通常会显示在控制台上。通过重定向 StandardOutput 流，您可以操纵或抑制进程的输出。例如，您可以过滤文本、设置不同的格式，或者将输出写入控制台和指定的日志文件。

# ios - Testflight SDK 和 iOS 模拟器 - 如何使用？

> ID：10380331
> 
> 赞同：5
> 
> 时间：2012-04-30T08:02:19.183
> 
> 标签：ios, testing, logging, testflight

我有点困惑我应该如何将 Testflight 的 SDK jn 与 iOS 模拟器结合使用。

假设我开始将 Testflight 集成到我的项目中，并希望在模拟器上对其进行测试。显然我不会得到任何远程日志或检查点信息，因为我的项目尚未上传（尽管我使用的是正确的团队令牌）。

但是如果我先上传项目，它会说它没有使用 Testflight SDK - 这当然是正确的，所以我也不会得到任何东西。

所以我在这里面临一个鸡蛋问题还是我误解了什么？

Testflight 是否与 Simulator 一起工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-01-21T08:58:52.097

TestFlight SDK 应用程序设计为在设备上的 Arm 架构上运行。该模拟器不被视为有效设备，因此无法用于测试在 Test Flight 上提供的应用程序。您也无法在模拟器上安装 Test Flight 配置文件（有权在 Test Flight 上使用应用程序的帐户）。

一种解决方法是在 Xcode 中本地运行代码（假设您有代码），然后编译应用程序并为 iOS 模拟器构建。

总之，TestFlight 旨在与真实设备一起使用。

其他解决方法；

*   在登录页面上完全发布具有登录要求的应用程序，使其获得商店批准并在包括模拟器在内的任何设备上运行。
*   在线获取 beta 测试人员，以便从以下网站为您试用该应用程序：[https](https://betafamily.com/) : //betafamily.com/ 或 Upwork、Fiverr 等。
*   或者只是购买一堆便宜的旧 iPhone 用于测试。（总是更好地在旧设备上测试向后兼容性:)）

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-05-17T12:49:56.697

TestFlight 在模拟器上运行良好。尽管在我们的例子中用户没有被识别，因为您在模拟器上没有 UDID。但是所有日志和检查点都显示为“匿名”用户。

因此，我会冒险将您的项目上传到 TestFlight。您不必邀请测试人员使用它。

# android - 如何显示应用名称和小部件

> ID：10380335
> 
> 赞同：0
> 
> 时间：2012-04-30T08:02:50.383
> 
> 标签：android, android-widget

我为我的应用程序创建了一个小部件。一切正常，但我唯一想在我的小部件中显示的是我的应用程序的名称，它位于我的小部件底部，具有透明背景。我尝试了很多，但我的应用程序的名称总是只出现在我的小部件中。我正在发送我的代码和描述我想要的屏幕截图。

**我使用的布局：**

**WidgetLayout.xml 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widget"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/appwidget_bg_clickable" >

<ImageView
    android:id="@+id/backgroundImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:contentDescription="@string/tracking_status_faq_imageview_text"
    android:scaleType="fitXY" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:gravity="center_horizontal|center_vertical" >

    <TextView
        android:id="@+id/txt_date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#5f5f5f"
        android:textSize="14dp" >
    </TextView>
</LinearLayout>

</RelativeLayout> 
```

**我的小部件显示为**

![在此处输入图像描述](../Images/2aebb3d731d41c67611c4de9ec923b51.png)

**我希望我的小部件如下图所示，底部的文本显示我的应用程序的名称**

![在此处输入图像描述](../Images/4265adf635dc7c2e2d242e9b402e248b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:21:53.023

尝试：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center"
    android:background="@android:color/transparent">
<RelativeLayout
    android:id="@+id/widget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/appwidget_bg_clickable" >

<ImageView
    android:id="@+id/backgroundImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:contentDescription="@string/tracking_status_faq_imageview_text"
    android:scaleType="fitXY" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:gravity="center_horizontal|center_vertical" >

    <TextView
        android:id="@+id/txt_date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#5f5f5f"
        android:textSize="14dp" >
    </TextView>
</LinearLayout>
</RelativeLayout>
<TextView
   android:id="@+id/txt_label"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="some text">
</TextView>
</LinearLayout> 
```

# html - Css 样式未正确应用，如果使用 DOCTYPE

> ID：10380346
> 
> 赞同：16
> 
> 时间：2012-04-30T08:03:56.573
> 
> 标签：html, css

1）Css 样式未正确应用于我的 HTML 页面，如果我在 html 上添加特定版本，如 HTML5、HTML4.1 strict 等，如果我删除所有 DOCTYPE 语句，它工作正常。

**我的 HTML 代码（在没有 DOCTYPE 的情况下正确显示）：**

```
<html> 
<head>
<title>Test</title>
</head>
<body style="background-color:green;height:100%;width:100%;">
<div>My Test page</div>
<div style="background-color:red;height:100%;width:10%;"></div>
</body>
</html> 
```

**我的 HTML 代码（DOCTYPE 未应用背景颜色红色）：**

```
<!DOCTYPE html>
<html> 
<head>
<title>Test</title>
</head>
<body style="background-color:green;height:100%;width:100%;">
<div>My Test page</div>
<div style="background-color:red;height:100%;width:10%;"></div>
</body>
</html> 
```

另外，我尝试用严格的 XHTML 1.0 代替 HTML5，

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

和，

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd"> 
```

但不适用于任何人。如何正确添加版本。

2）也是现在最好的版本。带有 XHTML 的 HTML5 或 html4.01 或 HTML 4.01？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-30T08:10:29.150

缺少 doctype 会触发[quirks mode](https://stackoverflow.com/questions/6404635/is-quirks-mode-relevant-in-2011)，这只是为了向后兼容在人们开始使用 doctypes 之前创建的“遗留代码”。它几乎不应该被使用。你应该总是声明一个文档类型。

### 选择哪一个？

在这个时代，这就是你所需要的：

```
<!DOCTYPE html> 
```

如果您愿意，您可以继续在此文档类型中使用 XHTML 语法。就 CSS 而言，我知道不同的文档类型没有任何区别，只要你有一个。然而，Doctypes 会改变哪些属性和元素是有效的以及在哪些上下文中。使用[W3C Validator](http://validator.w3.org/)测试您的 HTML。

不幸的是，这意味着您将重写大部分 CSS 以在标准模式下工作。我知道这听起来像是一件苦差事，但你只需要硬着头皮重写它。

**前进的重要说明**：删除内联 CSS 并改用外部样式表，否则（除其他外）您会发现维护完全是一场噩梦。

感兴趣的：http: [//hsivonen.iki.fi/doctype/#choosing](http://hsivonen.iki.fi/doctype/#choosing)

> ### 选择文档类型
> 
> 文本/html
> 
> 简而言之：以下是为新的 text/html 文档选择 doctype 的简单指南：
> 
> 标准模式，前沿验证
> 
> ```
> <!DOCTYPE html> 
> ```
> 
> 这是正确的做法，除非您有特定的理由避免这样做。`<video>`使用此 doctype，您可以验证新功能，例如 `<canvas>`和 ARIA。请务必在最新版本的顶级浏览器中测试您的页面。标准模式，遗留验证目标
> 
> ```
> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
> ```
> 
> 此 doctype 也触发标准模式，但让您坚持使用遗留验证，以防您想要避免新功能或更精确地验证旧功能。您想使用标准模式，但您在表格布局中使用切片图像并且不想修复它们
> 
> ```
> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
> ```
> 
> 这为您提供了几乎标准模式。请注意，如果您稍后迁移到 HTML5（以及因此，完整的标准模式），您基于表格中的切片图像的布局可能会中断。你故意想要 Quirks 模式
> 
> ### 没有文档类型。
> 
> 请不要这样做。为 Quirks 模式进行故意设计将会困扰您、您的同事或您的继任者 — 甚至没有人再关心 Windows IE 6（已经没有人关心 Netscape 4.x 和 IE 5）。为 Quirks 模式设计是个坏主意。相信我。
> 
> 如果您仍想支持 Windows IE 6，最好使用条件注释对其应用特定的 hack，而不是让其他浏览器回归 Quirks 模式。
> 
> 我不推荐任何 XHTML 文档类型，因为将 XHTML 作为 text/html 提供被认为是有害的。如果您仍然选择使用 XHTML 文档类型，请注意 XML 声明使 IE 6（但不是 IE 7！）触发 Quirks 模式。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-30T08:18:10.220

问题是 div 设置为 100% 的 100%（主体），这对我们有意义，但对浏览器没有意义。如果您将 body 位置设置为绝对位置并将其顶部、底部、左侧、右侧设置为 0，您将获得相同的效果，并且 div 的高度设置将按您期望的方式工作。这是代码。

```
<!DOCTYPE html>

<html> 
<head>
<title>Test</title>
</head>
<body style="position:absolute;top:0px;left:0px;right:0px;bottom:0px;background-color:green;">
<div>My Test page</div>
<div style="background-color:red;height:100%;width:10%;"></div>
</body>
</html> 
```

# c# - 如何在 ASP.NET MVC 3 站点中执行后台作业？

> ID：10380350
> 
> 赞同：6
> 
> 时间：2012-04-30T08:04:19.713
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我目前正在开发一个电子商务网站，并且有一个功能我不太确定如何实现。大多数情况下，您只需将产品添加到购物车并购买，这可能是最简单的工作流程。我要问的是有点不同，如果购买产品有时间限制怎么办？我的意思是一些网站给你一个购买产品的确切时间限制（比如足球经理），在那些你不能永远持有产品的网站上，它有 15 分钟的限制，如果你不在那个时期内购买，项目将从您的购物车中释放。（很可能其他人会跳上它）

现在，作为一名 ASP.NET MVC 程序员，我很想实现此功能，但正如我所说，我不知道该怎么做。我认为当我将商品添加到购物车时，我需要保持时间（类似于 ItemAddedAt），并且我需要在 x 分钟内发布该商品，因此需要在 x 分钟后运行某些内容才能发布该产品。全局思考，我认为我需要一项服务，当我添加一个项目时，我还需要将其订阅到该服务，并且服务在后台运行一个计时器/作业。我不知道/没有经验的是这部分，如何在 ASP.NET MVC 项目中做到这一点，是否有示例项目、文章、库或类似的东西？

当然我不知道我的逻辑是否适合这个问题，我需要一些指导，如果可能的话，需要一些源代码来处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:14:55.080

AFAIK 没有在 MVC 项目中声明/编程任务的标准方法。完成您想要的工作的推荐方法是在您的解决方案中创建一个新的控制台应用程序项目，并使用 Windows 任务计划程序每 X 分钟执行一次，在任何购物车中发布超过 X 分钟的任何产品。

为此，您需要从新项目中引用您的 MVC 项目（以访问所有模型），或者更好的是，创建一个类库项目，将您的模型/数据库类移到那里，然后从MVC 和控制台项目。

* * *

话虽如此，实际上有一个小的“hack”可用于在 MVC 项目中获取编程任务。您可以使用以下代码：

```
HttpContext.Current.Cache.Add("Task", "1", null, 
            DateTime.MaxValue, TimeSpan.FromMinutes(5), 
            CacheItemPriority.Normal, new CacheItemRemovedCallback(CheckCarts)); 
```

例如，可以从 Global.asax 调用的那行代码会将“任务”条目添加到缓存中。存储的值（“1”）并不重要，重要的是缓存条目在五分钟后过期，并且在过期时调用“CheckCarts”方法（在 Global.asax 中定义，或者在您执行的类中定义此代码）。

```
public void CheckCarts(string key, object value, CacheItemRemovedReason reason) {
     // Insert your code here to check for expired carts
     (...)

     // We add the entry again to the cache, so that this method will be called again in 5 minutes.
     HttpContext.Current.Cache.Add("Task", "1", null, 
            DateTime.MaxValue, TimeSpan.FromMinutes(5), 
            CacheItemPriority.Normal, new CacheItemRemovedCallback(CheckCarts));
} 
```

当缓存过期时，会调用 CheckCarts 方法，您的代码会执行它必须做的任何事情，最后会再次将自己添加到缓存中，并在另外 5 分钟内调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T13:56:39.250

这种情况只会让 signalR 尖叫。它可以让你以一种简单的方式做你所要求的。

如果您购物车中的商品有过期日期，您可以在任何商品过期时进行投票。如果他们有，您可以运行该项目的删除代码并更新您的 ui。

# css - Skeleton CSS - 如何跨越屏幕的宽度？

> ID：10380351
> 
> 赞同：3
> 
> 时间：2012-04-30T08:04:41.993
> 
> 标签：css, skeleton-css-boilerplate

我在看 www.getskeleton.com。我的页眉和页脚应该跨越 100%。我可以在不“破坏”框架的情况下做到这一点吗？还是我应该将我的布局限制为 960 像素？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T22:57:52.123

我意识到这是一篇较旧的帖子，但我想添加我的解决方案，以防将来其他人需要这些信息：

是的，您仍然可以使用 Skeleton 进行多宽度布局。我采用了 Skeleton 框架，还改编了一些来自“杂志”的 CSS/html。示例站点以满足我的需求。

------ HTML 代码 - 放在“身体”标签之间 -------------

```
<div id="top">
    <div id="top-nav">
        <nav class="top-subnav">
            BUTTON · BUTTON · BUTTON · BUTTON · BUTTON · BUTTON · BUTTON · BUTTON
        </nav>
    </div>
</div>    

<div class="container">

    <header>
       <div class="three columns">
            <!-- LOGO --><img src="#" alt="Description"> 
       </div>
       <div class="thirteen columns">
            <nav class="main-nav">
                <ul class="main-nav">                            
                    <li>BUTTON</li>
                    <li>BUTTON</li>
                    <li>BUTTON</li>
                    <li>BUTTON</li>
                    <li>BUTTON</li>
                </ul>
            </nav>
       </div>
    </header>   

    <div class="sixteen columns">
        <!-- Feature Banner image -->
    </div>

    <!-- ===== MAIN BODY ====== -->    

    <!-- LEFT COLUMN ---------- -->        
    <div class="four columns">
        <!-- Left column content goes here -->    
        <ul>                            
            <li>BUTTON</li>
            <li>BUTTON</li>
            <li>BUTTON</li>
            <li>BUTTON</li>
            <li>BUTTON</li>
        </ul>
    </div>   

    <!-- CENTER COLUMN ---------- -->        
    <div class="eight columns">
        <!-- Center column content goes here -->
        <h3>Main Title</h3>
        <h5 class="eventTitle">Article Title</h5><br />
        <p class="eventDetail">October 8, 2012 · 5pm - 8pm</p>
        <p class="eventDescrip">Skeleton is a small collection of well-organized CSS files that can help you rapidly develop sites that look beautiful at any size, be it a 17" laptop screen or an iPhone.
        </p>                                                                
    </div>

    <!-- RIGHT COLUMN ---------- -->        
    <div class="four columns">
        <!-- Right column content goes here -->
        <form class="search clearfix">
            <input type="search" placeholder="eg: Website Design" value="">
            <button type="submit">Search</button>
        </form>

        <form class="search clearfix">
            <input type="search" placeholder="you@email.com" value="">
            <button type="submit">Sign-up</button>
        </form>
    </div>
</div>

    <!-- ===== FOOTER ====== --> 

<div class="footer">    

        <footer class="container">
            <div class="four columns">
                <header><h6>Sample Title</h6></header>
                    <ul>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                    </ul>
            </div>

            <div class="four columns">
                <header><h6>Sample Title</h6></header>
                    <ul>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                    </ul>
            </div>

           <div class="four columns">
                <header><h6>Sample Title</h6></header>
                    <ul>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                        <li>Link</li>
                    </ul>
            </div>

            <div class="four columns textRight">
                   <span class="contactTitle">Business Name</span> <br />
                   12345 Main Road<br />
                   City, CO 80334<br />
                   (505) 555-5555<br />
                   Contact Us
            </div>

        </footer>
</div>

<div id="Credits">
Website Design by Dominical Design & Development · www.dominicaldesign.com · Indian Hills, Colorado
</div> 
```

====================================================

......然后............将以下CSS代码添加到您的标准骨架“layout.css”文件中

-------- CSS 代码 ---------------------------------

```
* { 
-moz-box-sizing: border-box; 
-webkit-box-sizing: border-box; 
box-sizing: border-box; 
}

body    {
color: #333333;
padding: 0px;   
    }

img {
max-width: 100%;
}

#top    {
width: 100%;
background: #069;
border-bottom: 3px solid #FC6;
padding: 8px;
margin: 0px;
}

nav.main-nav    {
text-align: right;
font-size: 12px;
padding: 110px 0px 0px 0px;
color: #666666;
}

nav.top-subnav  {
font-size: 11px;
color: #f6f6f6;
text-align: center;
}

nav.main-nav ul li {
display: inline;
list-style-type: none;
padding-left: 20px; 
}

#Feature-Banner {
width: 100%;
margin: 0px 0px 20px 0px;
}

.footer {
width: 100%;
background-color: #063;
color: #f6f6f6;
margin: 20px auto 0px auto; 
padding: 20px 0px;
font-size: 10px;
line-height: 18px;
}

.footer ul li   {
margin: 0px 0px 0px 15px;
line-height: 16px;
font-size: 10px;
}

.footer h6 {
color: #CCC;
margin: 0px 0px 5px 0px;    
}

.textRight  {
text-align: right;  
}

.contactTitle   {
font-weight: bold;
font-size: 11px;
}

#Credits    {
width: 100%;
font-size: 11px;
background-color: #033;
color: #cccccc;
text-align: center; 
padding: 20px 10px;
letter-spacing: 0.09em;
border-top: 1px solid #444444;
} 
```

===========================================

那应该为您提供以下信息：

顶部的全宽彩条，可选择在其中添加链接/导航 徽标、主导航、横幅/特色图形的标题区域 正文的 3 列居中布局 全宽页脚和下方的信用栏

希望这可以帮助那里的人！分享知识！:) ≈</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-01T21:34:37.363

这是来自骨架示例页面的代码片段，HTML 将容器包装在另一个 div 中。在示例中，它是一个完整的图像背景，从屏幕的一端到另一端使用

```
background-image: url('../images/values-bg.jpg'); 
background-size: cover; 
```

在`.values` 我将其简化为灰色背景的 css 文件中，但您要做的就是将上面的值与您的图像的链接一起包含在内，您就可以开始使用了。我希望这能更好地回答你的问题。

```
<div class="section values">
<div class="container">
  <div class="row">
    <div class="one-third column value">
      <h2 class="value-multiplier">67%</h2>
      <h5 class="value-heading">Purchase Increase</h5>
      <p class="value-description">Percentage of users more likely to purchase on mobile friendly site.</p>
    </div>
    <div class="one-third column value">
      <h2 class="value-multiplier">90%</h2>
      <h5 class="value-heading">Multi-device Users</h5>
      <p class="value-description">Most of the world accesses the internet on multiple devices.</p>
    </div>
    <div class="one-third column value">
      <h2 class="value-multiplier">66%</h2>
      <h5 class="value-heading">Sad Users</h5>
      <p class="value-description">Percentage of users that are frustrated with page load times.</p>
    </div>
  </div>
</div> 
```

CSS：

```
.values {
background-color: #aaa;
color: #fff;
padding-bottom: 5rem;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:43:39.650

不。即使你给 width=100% 它也行不通。因为网页被垂直分成两部分。您的标题显示在右侧。如果你使用瓷砖会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T14:25:55.160

伪全屏的一种选择是将容器 div 嵌套在语义 html5 标记或更大的 div 中。

跳到[http://lostworldsfairs.com](http://lostworldsfairs.com)以获得一个很好的例子。请参阅下面的说明。

从您的 html 开始：

```
<body>
 <header id="masthead">
  <div class="container sixteen columns">
   <hgroup>
    <img class="scale-with-grid" src="images/logo.png" />
    <h1>Masthead Title</h1>
    <p>Website tag line</p>
   </hgroup>
  </div>
 </header>

 <section id="main">
  <div class="container">
   <div class="two-thirds columns">
    <header>
     <h1>Page Title</h1>
    </header>
    <p>Meat of the page</p>
   </div><!-- close column -->
   <div class="one-third column">
    <p>side column stuff</p>
   </div><!-- close column -->
  </div><!-- close container -->
 </section>

 <footer id="attribution">
  <div class="container">
   <p>attribution</p>
  </div><!-- close container -->
 </footer>
</body> 
```

然后，你的CSS：

```
header,section,footer{
 overflow:auto;
}

header#masthead{
 background:#ccc;
}

footer#attribution{
 background:#ccc;
} 
```

现在，您的较大元素填充了空间，而您的容器 div 定位良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T09:08:12.463

您可能不想要固定元素，但这是使元素全宽而不改变其父级行为的一种方法。

注意：与绝对定位类似，元素会从流中取出，底部的顶部也需要相应更改。填充以适应每个元素的高度应该做到这一点。

```
header,
footer{
  position: fixed;
  width: 100%;
}

header{
  top: 0;
  left: 0;
}

footer{
  bottom: 0;
  left: 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-03T04:11:04.680

好的，对于那些仍在寻找答案的人，就像我 1500 万年前一样，这就是我所做的。我不在我想要的 100% 宽度的元素上使用骨架样板。例如，我想要顶部导航的全宽，但我还想要主要内容和侧边栏。这是一些代码

```
<nav class="navig-bar">
    <ul>
        <li class="pages">Page 1</li>
        <li class="pages">Page 2</li>
        <li class="pages">Page 3</li>
    </ul>
</nav>
<div class="container">
    <section class="eleven columns">Main Content</section>
    <aside class="five columns">Sidebar Content</aside>
</div> 
```

和 CSS

```
.navig-bar{width: 100%;}
    .navig-bar ul{list-style: none;text-align: center; }
        .navig-bar ul li{display: inline-block;} 
```

这将完成工作，至少对我来说效果很好。

# android - WebView 显示白页或空白页

> ID：10380358
> 
> 赞同：17
> 
> 时间：2012-04-30T08:05:55.297
> 
> 标签：android, android-webview

有谁知道为什么webview显示白页？这是代码

```
webView = (WebView) this.findViewById(R.id.webView);
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl(THE_URL);
webView.setWebViewClient(new WebViewClient()); 
```

这个函数也被称为：

```
@Override
public void onPageFinished(WebView view, String url) {
} 
```

我在那里错过了什么吗？当然，错误不是来自 XML，因为 webview 只是不显示某些 URL。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-01-28T00:45:16.647

对于仍然遇到此问题的任何人，如果通过 https 的安全连接失败，WebViewClient 似乎不会警告您。这可能是由于您要连接的服务器上的 SSL 错误造成的。

如果服务器允许，您可以尝试使用 http。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T08:36:28.670

请参阅此[链接](http://asmncl.blogspot.in/2012/04/android-webview-to-load-url.html)。在您的代码中，您同时创建了两个 webview 客户端。

```
mwebview=(WebView)findViewById(R.id.webview);
mwebview.getSettings().setJavaScriptEnabled(true);
mwebview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
mwebview.loadUrl(webUrl);
mwebview.setWebChromeClient(new WebChromeClient() ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T08:55:50.953

而不是你的活动试试这个，

**主要的.xml**

```
<!--?xml version="1.0" encoding="utf-8"?-->
<Linearlayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:orientation="vertical">

   <Textview android:layout_height="wrap_content" android:layout_width="fill_parent" android:text="This is the demo of WebView Client" android:textsize="20sp" android:gravity="center_horizontal">
   </Textview>

   <Webview android:id="@+id/webview01" android:layout_height="wrap_content" android:layout_width="fill_parent" android:layout_weight="1">
   </Webview>

   <Imageview android:src="@drawable/ic_launcher" android:layout_height="wrap_content" android:layout_width="fill_parent">      

</Imageview></Linearlayout> 
```

**WebViewClientDemoActivity.java**

```
 import android.app.Activity;
    import android.graphics.Bitmap;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.webkit.WebView;
    import android.webkit.WebViewClient;

    /*
     * Demo of creating an application to open any URL inside the application and clicking on any link from that URl
    should not open Native browser but  that URL should open in the same screen.
     */
    public class WebViewClientDemoActivity extends Activity {
        /** Called when the activity is first created. */

        WebView web;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            web = (WebView) findViewById(R.id.webview01);
            web.setWebViewClient(new myWebClient());
            web.getSettings().setJavaScriptEnabled(true);
            web.loadUrl("http://www.google.com");
        }

        public class myWebClient extends WebViewClient
        {
            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                // TODO Auto-generated method stub
                super.onPageStarted(view, url, favicon);
            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                // TODO Auto-generated method stub

                view.loadUrl(url);
                return true;

            }
        }

        // To handle "Back" key press event for WebView to go back to previous screen.
       @Override
       public boolean onKeyDown(int keyCode, KeyEvent event)
      {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && web.canGoBack()) {
            web.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
       }
    } 
```

在您的**manifest.xml**中使用这些权限

```
<uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-19T08:11:49.127

调整您的容器视图背景，然后设置

```
webView.setBackgroundColor(Color.TRANSPARENT); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-07T12:19:30.987

这种方式对我有用：

```
 mWebView = (WebView) findViewById(R.id.myWebView);
    WebSettings webSettings = mWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setDomStorageEnabled(true);
    mWebView.setVerticalScrollBarEnabled(true);
    mWebView.setWebViewClient(new WebViewClient());
    mWebView.getSettings().setLoadWithOverviewMode(true);
    mWebView.getSettings().setUseWideViewPort(true);
    mWebView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
    mWebView.setWebChromeClient(new WebChromeClient());
    mWebView.loadUrl(URL); 
```

# css - Safari for facebook like box 的 CSS 设计问题

> ID：10380365
> 
> 赞同：1
> 
> 时间：2012-04-30T08:06:39.187
> 
> 标签：css, safari

我在网站上使用 Facebook likebox，它在所有浏览器上都能很好地出现，即使是英文版也可以在 safari 中使用，但阿拉伯语版本的网站 Facebook likebox 出现在灰色框外，而它应该在里面。这只发生在我使用 safari 5.1.4 的 safari 中。而且我不确定这是否是 CSS 问题或如何使用任何 CSS 属性进行修复，因为我试图更改一些属性但它不起作用

在这方面的帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:27:22.777

我将其解决如下：

当您在[FB page中按](http://developers.facebook.com/docs/reference/plugins/like-box/)*Get Code*时，您有 3 个选择，第 3 个选项最适合我们的问题，即 IFRAME。将其复制/粘贴到您的项目后，添加*位置：相*对于样式属性。

 *例子：

```
<iframe src="..." scrolling="no" frameborder="0" style="position:relative; 
border:none; overflow:hidden; width:240px; height:558px;" 
allowTransparency="true">
</iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:21:12.753

我不太确定是什么原因造成的（因为 iframe 的容器确实有 position:relative），但这似乎是由于 iframe 有一个 position:absolute。从中删除该属性

```
.fb_iframe_widget iframe {
    /* position: absolute; */
} 
```

似乎解决了这个问题（至少，它在 Firefox 和 Safari 中都能正确显示）。*

# javascript - 从字符串中删除软连字符

> ID：10380366
> 
> 赞同：6
> 
> 时间：2012-04-30T08:06:39.260
> 
> 标签：javascript, jquery, regex, soft-hyphen

假设我有一个带有软连字符的字符串（假设下面文本中的连字符是软连字符）：

```
T-h-i-s- -i-s- -a- -t-e-s-t-.- 
```

我想删除软连字符，只返回以下字符串：

```
This is a test. 
```

我正在尝试在 JavaScript 中执行此操作。以下是我到目前为止最远的地方：

```
RemoveSoftHyphen: function (text) {
    var result = text.match(/[^\uA00AD].*/);
    alert (result);
    return result;
} 
```

当警报显示时，我得到的只是一个“-”，我不确定那是软连字符还是硬连字符......但更重要的是，它不起作用。

我试图找出我的正则表达式有什么问题，或者是否有更好的方法来删除我不知道使用 JavaScript 或 jQuery 的软连字符。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T23:49:56.010

假设字符确实是 Unicode 00AD：

```
var result = text.replace(/\u00AD/g,''); 
```

如果您有[许多连字符](http://en.wikipedia.org/wiki/Hyphen#Unicode)要删除，请使用字符类：

```
var result = text.replace(/[\u00AD\u002D\u2011]+/g,''); 
```

# audio - 解码 EVRC 语音编解码器

> ID：10380367
> 
> 赞同：5
> 
> 时间：2012-04-30T08:06:41.490
> 
> 标签：audio, ffmpeg, decoding, cdma

我想解码 EVRC 语音编解码器。我已经检查了 ffmpeg 库，但似乎 ffmpeg 目前不支持 EVRC。

是否有任何替代库可用于解码 EVRC 数据？

或者，如果有人有一些算法或解码机制或代码片段可以这样做，请告诉我。

谢谢尼丁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T16:01:01.570

这里有一些文件声称是 EVRC 代码（在中文网站上）： http: [//www.codeforge.com/article/67387](http://www.codeforge.com/article/67387)

pudn.com 上的相同文件：http: [//en.pudn.com/downloads95/sourcecode/comm/voice_compress/detail389385_en.html](http://en.pudn.com/downloads95/sourcecode/comm/voice_compress/detail389385_en.html)

下载完整的 0.5 MB 存档（需要注册）并不容易，但它看起来像工作的 EVRC 编解码器（可以免费查看此存档中的任何源文件）。

对于比中文网站更官方的东西，3gpp2.org 的 ftp 上有一些巨大的（0.5 GB）文件：[http ://www.mmnt.net/db/0/0/ftp.3gpp2.org/TSGC/Incoming/ SWG11/Software_Published_in_TIA/evrc_rel-B_mps_software](http://www.mmnt.net/db/0/0/ftp.3gpp2.org/TSGC/Incoming/SWG11/Software_Published_in_TIA/evrc_rel-B_mps_software)

[存档ftp://ftp.3gpp2.org/TSGC/Incoming/SWG11/Software_Published_in_TIA/evrc_rel-B_mps_software/Software_Distribution_vB-1.0_for_C.S0018-B_v1.0_EVRC_MPS.zip](ftp://ftp.3gpp2.org/TSGC/Incoming/SWG11/Software_Published_in_TIA/evrc_rel-B_mps_software/Software_Distribution_vB-1.0_for_C.S0018-B_v1.0_EVRC_MPS.zip)中有so3和so68实现

so3 源代码看起来类似于 evrc.rar 中的一些文件：

```
/*     Enhanced Variable Rate Codec - Master C code Specification       */
/*     Copyright (C) 1997-1998 Telecommunications Industry Association. */ 
```

so68 (EVRCB_FX) 用于 EVRC-B（编码器和解码器）：

```
EVRC-B vocoder fixed point c-simulation can be compiled using the standard GNU 
c++ compile tools like g++, make, etc.

/*  EVRC-B - Enhanced Variable Rate Coder - B Speech Service Option for  */
/*  Wideband Spread Spectrum Digital System                             */
/*  C Source Code Simulation                                            */ 
```

这个档案是如此之大，因为它包含许多声音样本，包括编码的和原始的。

根据[http://wiki.multimedia.cx/index.php?title=EVRC](http://wiki.multimedia.cx/index.php?title=EVRC)有规范和参考编解码器的 URL： [http ://www.3gpp2.org/Public_html/specs/tsgc.cfm](http://www.3gpp2.org/Public_html/specs/tsgc.cfm)

一些最近的小型 (1.8MB) 发行版：[http ://www.3gpp2.org/Public_html/specs/C.R0014-D_v1.0_EVRC-D_SoftwareDistribution_100125.zip](http://www.3gpp2.org/Public_html/specs/C.R0014-D_v1.0_EVRC-D_SoftwareDistribution_100125.zip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:30:17.133

如果你可以得到一个商业图书馆，你可以试试[**CouthIT 的 EVRC-B**](http://www.couthit.com/codec-evrc-b.asp)。

### 看来这符合你的要求！从他们的网站：

> **编解码器概述**
> 
> 增强型可变速率编解码器 B (EVRC-B) 于 2006 年由 3GPP2 标准化。EVRC 编解码器对以 8 KHz 采样的 16 位语音信号的每个 20 毫秒帧进行操作，并生成比特率为 8.3、7.57、分别为 6.64、6.18、5.82、5.45、5.08 和 4.0 kbps（源编码率）。EVRC-B 基于代码激励线性预测 (CELP)、原型基音周期 (PPP) 和噪声激励线性预测 (NELP) 编码算法。通过提高对单个语音样本性质的认识，它可以更好地利用中间编码率。这种更复杂的编码方法允许 EVRC-B 提供与 EVRC-A (IS-127) 相当的语音质量，但平均编码比特率要低得多。该编解码器的开发主要是为了替代 CDMA 网络中使用的现有 EVRC-A 编解码器。

另一件事是[**EVRC-B 和 EVRC-WB 4GV™ 声码器**](http://www.compandent.com/products_evrc.htm)（商业）：

> **Compandent Inc.**计划最早在 2008 年初提供高质量的 EVRC-B 包，并在 2008 年上半年提供 EVRC-WB 包。该软件包将包括高度专业和优化的 DSP 代码，降低了复杂性并提高了质量对于选定的平台。Compandent 一直在将 EVRC-B 和 EVRC-WB 声码器移植到德州仪器 (TI) 的各种 DSP，例如 TMS320c54xx、TMS320c55xx、TMS320c64xx、OMAP 和 DaVinci，并且正在考虑其他平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T20:54:52.650

如果要解码 EVRC 编码的比特流，可以使用 3GPP2 标准网站中的 EVRC 源代码进行解码：

[http://www.3gpp2.org/Public_html/specs/index.cfm](http://www.3gpp2.org/Public_html/specs/index.cfm)

选择“C: return all Radio Interface Document”，您将在结果列表的顶部找到源代码 .zip 文件。

# java - java中用户端的HTTP请求和捕获请求和响应的时间

> ID：10380369
> 
> 赞同：0
> 
> 时间：2012-04-30T08:06:43.923
> 
> 标签：java, http, time, request, response

我需要在 java 中创建一个应用程序，在用户端发送 HTTP 请求并捕获请求时间、响应时间和打开整个网页所需的时间（无需显示页面）。即从我发送的请求的最后一个字节到我收到的响应的第一个字节的时间量，其次是直到收到整个响应的时间（完整的网页打开）......请有人帮帮我！ ！

我的意思是开发一个应用程序，就像一个不显示网页但时间响应的网络浏览器！请有人帮帮我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:41:36.567

使用 java.net.HttpURLConnection 提出您的请求；有很多例子。然后您可以使用 System.currentTimeMillis() 来捕获时间。应该很简单。

# azure - 实体读取时的 Windows azure 表存储 indexOutOfRange 异常

> ID：10380370
> 
> 赞同：0
> 
> 时间：2012-04-30T08:06:45.270
> 
> 标签：azure, azure-sql-database, azure-table-storage

我有这个小代码来读取表格存储中的所有条目。这是我的简单模型：

```
public class LineEntity : TableServiceEntity
{
    public XElement Data { get; set; }

    public LineEntity(string rowKey)
    {
        PartitionKey = "Line";
        RowKey = rowKey;
    }

    public LineEntity()
    {
    }
} 
```

这是阅读它的代码：

```
var StorageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("StorageConnectionString"));
var TableClient = StorageAccount.CreateCloudTableClient();
var ServiceContext = TableClient.GetDataServiceContext();
var models = ServiceContext.CreateQuery<LineEntity>("lines").ToList(); 
```

由于某种原因，最后一行将在云中引发以下异常：

```
<?xml version="1.0" encoding="utf-8"?><Error><Code>OutOfRangeInput</Code><Message>One of the request inputs is out of range.
RequestId:8a16121a-237c-4015-99cb-b1bbdb7ab7a7
Time:2012-04-30T07:39:42.6396851Z</Message></Error> 
```

它在开发中工作得非常好。这个有什么线索吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:30:58.850

不应该这条线

```
var models = ServiceContext.CreateQuery<Line>("lines").ToList(); 
```

而是

```
var models = ServiceContext.CreateQuery<LineEntity>("lines").ToList(); 
```

# python - 在文件中打印多行？

> ID：10380372
> 
> 赞同：0
> 
> 时间：2012-04-30T08:06:58.017
> 
> 标签：python, file, printing

好的，我正在尝试制作一个小程序，要求您输入文件名，它将创建具有您想要的名称的文件。在该文件中，它将在两条不同的行上显示成人价格和儿童价格。任何人？

```
packagename = input("Enter package name:")
packagepriceadult = input ("Enter package price per adult:")
packagepricechild = input("Enter package price per child:")
a = open ("output.txt", "a")
a.write (packagename),"\n"
a.write (packagepriceadult)
a.write (packagepricechild) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:56:12.063

python 2.x 中可用的另一个选项是将打印语句重定向到文件

```
print >>a, packagename
print >>a, packagepriceadult
print >>a, packagepricechild 
```

查看这篇文章更多信息 - [slippens 的博客](http://stefaanlippens.net/redirect_python_print)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:17:45.537

只需将换行符写入文件，例如：

```
a.write(packagename)
a.write("\n")
a.write(packagepriceadult)
a.write("\n")
a.write(packagepricechild) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T07:53:04.350

如果您使用的是 python 2.x，您也可以像我在这里所做的那样：

`outlist = [packagename, packagepriceadult, packagepricechild] a.write('\n'.join(outlist))`

# facebook - 尝试注册游戏成就时出错：给定的选择器字符串 \"game:points\" 无效

> ID：10380375
> 
> 赞同：0
> 
> 时间：2012-04-30T08:07:12.147
> 
> 标签：facebook, facebook-graph-api

我一直在尝试注册一个 Facebook 游戏成就（之前已经成功注册了同一个应用的另外两个），但我现在收到此错误：

```
{
  "error": {
    "message": "The given selector string \"game:points\" is invalid for Ent with ID 10150677676736030.", 
    "type": "OGPropertySelectorInvalidException"
  }
 } 
```

有没有其他人遇到过这个问题，或者可能知道是什么原因造成的？就像我说的，在此之前我可以为同一个应用注册另外两个成就。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:57:47.263

当我更改正在使用的自定义对象的名称时，就会发生这种情况。您需要删除使用该对象创建的所有旧帖子。最简单的方法是从您的 Facebook 帐户中删除该应用程序，然后选中“删除所有活动”框。

# svn - 如果提交日志中包含明确的单词，则在 cc.net 上运行构建

> ID：10380377
> 
> 赞同：5
> 
> 时间：2012-04-30T08:07:35.157
> 
> 标签：svn, msbuild, nunit, webdriver, cruisecontrol.net

我有系统：

*   svn - 控制版本
*   cc.net - 作为 ci 服务器
*   msbuild - 作为构建系统
*   nunit - 用于启动测试
*   webdriver - 用于网络测试。

现在我的测试在每次提交后自动运行。但是如果提交有注释#runautotest（或其他），我希望我的测试运行。

我调查了 cc.net 的触发器，但它是为了另一个目标。我试图找到一些关于 cc.net 解析日志的信息，但这并没有积极的结果。

我应该使用什么样的方法来解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:04:53.037

在 ccnet 配置中，在项目中，在任务块的顶部：

```
<modificationWriter>
 <filename>svn_mods.xml</filename>
 <path>c:\modsdir</path>
</modificationWriter> 
```

这会将 SVN 修改写入文件。

接下来在任务块中：

```
<nant>
 <executable>c:\path_to_nant</executable>
 <buildFile>mybuildfile.build</buildFile>
 <targetList>
  <target>conditionally_run_nunit_tests</target>
 </targetList>
</nant> 
```

这将在 modifywriter 任务之后运行 Nant 任务。

在**conditionally_run_nunit_tests**中，在文件**c:\modsdir\svn_mods.xml**中搜索**#runautotest**。如果找到它，请运行测试。如果你没有找到它，那么什么都不做。有多种方法可以解析 mods 文件。您可以使用 C# 脚本将整个文件读入一个字符串，然后调用包含传入#runautotest。

下面的代码是在 Nant 中使用 C# 脚本的示例。SearchFile 打开一个文件，将其读入字符串并检查字符串中是否有值。它返回“是”或“否”。以下脚本未经测试。

```
<property name="yesno" value="${ns::SearchFile("c:\modsdir\svn_mods.xml", "#runautotest")}"/>

<script language="c#" prefix="ns">
    <references>
        <include name="System"/>
        <include name="System.IO"/>
    </references>
    <code>
    <![CDATA[   
    [Function("SearchFile")]
    public static string SearchFile(string filepath, string token) 
    {
        System.IO.StreamReader myFile = new System.IO.StreamReader(filepath);
        string myString = myFile.ReadToEnd();
        myFile.Close();
        if(myString.Contains(token)) return "yes";
        else return "no";
    }               
    ]]>
    </code>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:06:56.443

正如问题的赞成票所表明的那样，这似乎是一个更重要的问题。我会试一试：据我了解设置，CCNET 是[包的领导者](https://de.wikipedia.org/wiki/Leader_of_the_Pack)，监控 SVN 的源代码更改，获取源，触发 MSBuild 构建它们并触发 NUnit 和 WebDriver 执行单元和 Web 测试.

是否执行测试的决定取决于 SVN 修改注释中定义的主题标签。一方面是 SVN，另一方面是 NUnit 和 WebDriver 仅通过 CCNET 耦合。

所以首先我会保证这个包含评论的标签在 CCNET 的某个地方是可用的。我不是 SVN 专家，但我认为所有评论都在 CCNET 修改日志中。你能证实这一点吗？

接下来，测试的执行需要有条件。CCNET 的配置是一个相当静态的事情。随着CCNET 1.5中的[DynamicValues和 CCNET 1.6 中的](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Parameters)[ConditionalTask](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Conditional_Task) ​​s 的出现，配置变得更加动态，您现在也可以在 CCNET 中进行控制流，但是由于我有点过时，我建议将测试执行包装在构建脚本中使用例如 MSBuild 或 NAnt 并将修改日志评估放在那里。

**更新**：看看[亚当的回答](https://stackoverflow.com/a/10420058/38029)。这个例子与我的想法非常接近（尽管我会使用[`<xmlpeek>`](http://nant.sourceforge.net/release/latest/help/tasks/xmlpeek.html)而不是[`<script>`](http://nant.sourceforge.net/release/latest/help/tasks/script.html)）。

# ruby - ruby-amqp 和 rspec 消息清理器

> ID：10380378
> 
> 赞同：2
> 
> 时间：2012-04-30T08:07:39.697
> 
> 标签：ruby, amqp

我目前正在使用 ruby​​-amqp 开发一个消息传递系统，用于测试我正在使用 rspec。如果测试失败，测试完成后我仍有消息在队列中。有没有办法像 database_cleaner gem 一样清理所有队列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:55:50.480

[您可以使用AMQP::Queue#delete 删除](http://rubydoc.info/github/ruby-amqp/amqp/master/AMQP/Queue#delete-instance_method "AMQP::Queue#delete")整个队列

只需获取 AMQP::Queue 实例并调用

```
queue.delete 
```

或者

```
queue.delete do |_|
  puts "Deleted #{queue.name}"
end 
```

# jquery - 如何将动态网址传递到 iframe？

> ID：10380387
> 
> 赞同：0
> 
> 时间：2012-04-30T08:08:33.787
> 
> 标签：jquery, html

我必须传入`Eval("link")`iframe 标签。这`eval("link ")`意味着最近在视频库中上传的视频，我只想在 iframe 中显示最近的项目：

```
<iframe title="YouTube video player" width="525" height="325" src='<%# Eval("link") %>' frameborder="0"  ></iframe> 
```

我的代码在这里不能正常工作：

```
function OpenDialog() {
    var options = {
        url: '/Shared%20Documents/Forms/AllItems.aspx',
        title:Test modal dialogue,
        width: 1100,
        height: 600,
        left: 50,
        top: 50,
        status: 0,
        toolbar: 0,
        menubar: 0,
        resizable: 1,
        dialogReturnValueCallback: CloseCallback
    };

    SP.UI.ModalDialog.showModalDialog(options);
    SP.UI.Modal.OpenPopUpPage('Home.aspx', CloseCallback, 1100, 600);
}

function autoPlayVideo(vcode, width, height) {
    "use strict"; $("#videoContainer").html('<iframe width="' + width + '" height="' + height + '" src="https://www.youtube.com/embed/' + vcode + '?autoplay=1&loop=1&rel=0&wmode=transparent" frameborder="0" allowfullscreen wmode="transparent"></iframe>');
}

jQuery('a.introVid').click(function () { autoPlayVideo('Eval("link")', '450', '350'); });

function CloseCallback(result, returnValue) {
    alert('Result from dialog was: ' + result);
    if (result == SP.UI.DialogResult.Ok) {
        alert('You clicked Ok');
    }
    else if (result == SP.UI.DialogResult.cancel) {
        alert('You clicked Cancel');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:03:06.940

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('a.introVid').live('click', function (e) {
                e.preventDefault();
                autoPlayVideo($(this).data('vcode'), '450', '350');
            });
        });

        function autoPlayVideo(vcode, width, height) {
            $("#videoContainer").html('<iframe width="' + width + '" height="' + height + '" src="https://www.youtube.com/embed/' + vcode + '?autoplay=1&loop=1&rel=0&wmode=transparent" frameborder="0" allowfullscreen wmode="transparent"></iframe>');
        };
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <a class="introVid" href="#test" data-vcode="u1zgFlCw8Aw">Test Ypu Tube Video</a>
        <div id="videoContainer">
        </div>
    </div>
    </form>
</body>
</html> 
```

# x86-16 - 为什么 8085 从 00000 开始，而 8086 从 FFFF0 开始？

> ID：10380388
> 
> 赞同：2
> 
> 时间：2012-04-30T08:08:34.110
> 
> 标签：x86-16, microprocessors, 8085

我无法理解8085-86 中生成的**物理地址的不同起始地址。**`CS:IP`这是因为堆栈吗？我认为堆栈的概念是在 8085 之前出现的。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T06:32:29.913

我认为答案在于中断向量表（IVT）。IVT 是在 8086 处理器中引入的。8085（其设计基于 8080 处理器）使用不同的方法来处理中断。在 8086/8088 上，IVT 占用内存的前 1024 个字节（256 个中断向量，每个包含 4 个字节）。因此，该区域中不能有任何可执行代码。从 80286 开始，x86/x64 处理器具有一个可以更改的中断描述符表寄存器 (IDTR)，以便软件可以将中断向量表重新定位到处理器地址空间中方便的任何位置。

所以从技术上讲： - 8085 没有 CS 寄存器，其地址空间限制为 64KiB - 8085 上电后从地址 0x0000 开始执行 - x86 和 x64 系列处理器上的执行从最后 16 个字节开始可寻址内存。因此，在具有 20 条地址线的 16 位处理器上，这将是线性地址 0xFFFF0。在 32 位处理器上，地址为 0xFFFFFFF0，在 64 位处理器上，地址为 0xFFFFFFFFFFFFFFF0。系统 ROM 必须以能够响应这些地址的方式连接到内存总线。

查看[英特尔处理器手册](http://www.intel.com/p/en_US/support/processors "英特尔处理器手册")以获取官方解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T08:26:21.790

有 3 个原因我可以认为可以将特定值用于 powerup IP：

1.  约定 - 同一家族/品牌中的其他处理器使用相同的位置，并且他们希望给他们的客户一种熟悉感
2.  兼容性
3.  某些区域因某些目的而受到限制或增强。例如，[6502](http://en.wikipedia.org/wiki/6502)具有特殊的更快指令，用于访问从 0x00 到 0xff 的前 256 个内存字节。在那个 CPU 上，让 CPU 在其他地方启动是有意义的。（但我不认为 8086 会特别对待任何内存区域。）

撇开兼容性和约定问题不谈，处理器启动时指令指针获得的值在很大程度上是任意的。对于大多数模型，IP 最初要么非常接近其地址空间的顶部（有足够的空间进行远 JMP 调用以使其到达真正的 init 代码所在的位置），要么位于最底部（即 0）。

维基[百科的](http://en.wikipedia.org/wiki/8085) [文章](http://en.wikipedia.org/wiki/Intel_8086)指出，8086 的设计目的是使以前处理器的汇编源代码很容易*转换*为与 8086 一起使用，但仅此而已。除此之外，没有尝试使其与以前的模型兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T17:19:12.100

1) 在 8085 中，复位后 pc 的值为 0000h。所以唤醒程序应该写在0000h位置，不能留空。

2) 在 8086 中，CS & lP 的复位值分别为 FFFFH & 0000h。所以 20 位物理地址为 FFFF0+0000=FFFF0H。它不应该是空的。唤醒程序（代码）始终在 ROM 中，ROM 应最后连接到 FFFF0H。

# django - 如何添加属性/属性/？？？到查询集（如注释）

> ID：10380392
> 
> 赞同：0
> 
> 时间：2012-04-30T08:08:45.563
> 
> 标签：django

我有两个查询集：

```
category_list_avg =Category.objects.filter(operation__date__gte = year_ago).annotate(podsuma = Sum('operation__value'))
category_list = Category.objects.annotate(suma = Sum('operation__value')) 
```

有没有办法用一个查询集来做到这一点（我的模板中有一个 for 循环）？

**更新**：

模板：

```
{% for category in category_list %}
<tr>
  <td><a href="{{ category.id }}/">{{ category.name }}</a></td>
  <td style="text-align:right{% if category.suma|default:0 < 0 %};color:red{% endif %}">
    {{ category.suma|default:0|currency }}</td>
  {% for monthsum in category.get_month_sum_series %}
  <td style="text-align:right{% if monthsum.1 < 0 %};color:red{% endif %}">{{ monthsum.1|currency }}</td>
  {% endfor %}
  <td style="text-align:right">???</td>
</tr>
{% endfor %} 
```

代替？？？将是平均值（现在我使用 subpart 的总和 - 因为它更容易调试 - 如果我看到 podsuma 小于 suma - 我会知道它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:27:10.163

您需要执行另一个查询以获取平均值并将它们附加到`category_list`视图或模型中：

```
# in view
category_list = Category.objects.annotate(suma = Sum('operation__value'))
one_year_ago_avg = dict(Category.objects.filter(operation__date__gte = year_ago).annotate(avg = Avg('operation__value')).values_list('pk', 'avg'))
for cat in category_list:
    cat.one_year_ago_avg = one_year_ago_avg.get(cat.pk)

# or in model
class Category(models.Model):
    def one_year_ago_avg(self):
        year_ago = ...
        return self.operation_set.filter(date__gte=year_ago).aggregate(Avg('value')).values()[0] 
```

然后`{{ category.one_year_ago_avg }}`在模板中使用

# svn - SVN：在我的 repo 下的任何文件夹中添加/提交 index.php 时提交 faiedl

> ID：10380394
> 
> 赞同：0
> 
> 时间：2012-04-30T08:08:58.510
> 
> 标签：svn, mod-dav-svn

我可以将任何文件/文件夹添加/提交到 repo，但 index.php 。当我将 index.php 添加/提交到我的 repo 下的任何文件夹时，它会给出如下错误：

```
Command  Commit
Adding   D:\svn\projects\myrepo\index.php
Error    Commit failed (details follow):
Error    Repository moved permanently to
Error    'http://mydomain.com/repos/myrepo/!svn/wrk/RANDOM-HASH/';
Error    please relocate
Error    Repository moved permanently to 'http://mydomain.com/repos/myrepo/'; please relocate
Finished! 
```

回购：在：/var/www/svn/myrepo url 下：http://mydomain.com/repos/myrepo [svm](http://mydomain.com/repos/myrepo) mod_dav_svn on Red hat linux，plesk 通过 windows tortoisesvn 提交/添加

我找不到任何线索为什么会这样。我在我的本地 centos 测试服务器上有相同的 svn 配置，我可以在那里提交任何东西，包括 index.php。

可能的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:11:58.730

Perhaps the index.php file is still opened in the browser? Sometimes, in certain files, it causes problems. Try closing the browser, then commit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:27:04.997

哦，我发现了错误。实际上，我正在从主域根目录的 url 中删除 index.php。即我通过.htaccess 删除index.php 并将所有domain.com/index.php 永久重定向到domain.com。

解决方案是在站点上创建一个虚拟主机或子域，现在我在 svn.domain.com/repos 上有了 repos，现在它对一切都很好，因为它不需要规则从主 domain.com 的 url 中删除 index.php但有自己的子域。

# ruby-on-rails - 如何将字符串列更改为 bigint？

> ID：10380399
> 
> 赞同：7
> 
> 时间：2012-04-30T08:09:47.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, heroku, migration

在 Rails 迁移中。如何将字符串类型列更改为 bigint？

我有：

```
t.change :ip_number_from, :integer, :limit => 8 
```

我得到：

```
PG::Error: ERROR:  column "ip_number_from" cannot be cast to type bigint 
```

我什至尝试了两种选择：

```
change_column :ip_to_countries, :ip_number_from, :integer, :limit => 8
change_column :ip_to_countries, :ip_number_from, :bigint 
```

还是同样的错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T08:28:41.683

Postgres 告诉您该列中存在它不知道如何转换的现有数据，因此它需要一个 ALTER 语句，该语句为该列提供一个 USING 子句来指定如何转换现有值。

不幸的是，您将需要下拉特定于数据库的代码来完成此操作，或者使用类似于此处建议的解决方案的内容：

[http://webjazz.blogspot.co.uk/2010/03/how-to-alter-columns-in-postgresql.html](http://webjazz.blogspot.co.uk/2010/03/how-to-alter-columns-in-postgresql.html)

编辑：这是您在迁移中直接在 SQL 中执行此操作的方法：

```
execute <<-SQL
  ALTER TABLE ip_to_countries
  ALTER COLUMN ip_number_from TYPE bigint USING ip_number_from::bigint
SQL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T08:30:33.733

您的 ip_number_from 列中有什么？

无论如何，我可能会：

*   创建一个 bigint 类型的新列，
*   通过 rails 控制台或 rake 任务手动将数据从 ip_number_from 复制到 new_column，
*   删除原始 ip_number_from 列
*   将 new_column 重命名为 ip_number_from

或者您可以像 mjtko 建议的那样使用 SQL，但我不确定它是否会更容易。

### 更新

我查了一下 Yule 的建议。我认为在一次迁移中完成所有这些操作会有点危险，因为您无法真正检查数据的转换/复制是否成功。如果您确实想在一次迁移中执行此操作，则在您的情况下，它看起来像这样：

```
def up
  add_column :table, :new_column, :bigint
  Model.reset_column_information
  Model.all.each do |m|
    m.update_attribute :new_column, Model.bigint_from_ip_number_from(m)
  end
  drop_column :table, :ip_number_from
  rename_column :table, :new_column, :ip_number_from
end 
```

然后，您还应该添加相应的向下迁移。

您始终可以将其拆分为多个迁移，并随时检查进度/成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:32:23.707

我最近读到 - 但不记得在哪里 - 你不能将“字符串”列转换为“int”列，但你可以做相反的事情。从“int”到“string”的转换是一个不可逆的迁移操作。

我将搜索我阅读该文件的文档，并在找到它时编辑我的帖子。

如果可以的话，最简单的做法就是 Jure Triglav 的建议。（他在我之前发布了他的答案，但我提出了同样的建议；））。

[编辑] 我找到了我读到的地方：[不可逆转的迁移 tuto](http://ariejan.net/2008/05/06/the-migration-that-cannot-be-undone-irreversible-migration)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-18T05:49:33.193

`change_column :table_name, :column_name, 'TYPE bigint USING CAST(column_name AS TYPE bigint)'`

# json - 黑莓中的Json发送/发布错误

> ID：10380400
> 
> 赞同：0
> 
> 时间：2012-04-30T08:09:53.780
> 
> 标签：json, blackberry

我想通过 HTTPConnection 发送 JSON 请求，但是当我尝试获取响应代码时出现错误。这是我的代码...

```
public void sendrequest(String url)throws IOException, JSONException
{
        JSONObject postObject = new JSONObject();

        postObject.put("method", method);

        postObject.put("params", Parameters);

        HttpConnection c = (HttpConnection)Connector.open(url);

        c.setRequestMethod(HttpConnection.POST);

            c.setRequestProperty("Content-Type", "application/json;charset=UTF-8");

            c.setRequestProperty("Content-Length", "" + (postObject.toString().length() - 2));
            c.setRequestProperty("method", method);

            c.setRequestProperty("params", Parameters);

            rc = c.getResponseCode();

            if (rc != HttpConnection.HTTP_OK){

                throw new IOException("HTTP response code: " + rc);
            }
} 
```

我从postObject.put("method", method); 中使用的[黑莓发送 JSON 请求中](http://%22https://stackoverflow.com/questions/9339656/send-json-request-from-blackberry-application%22%20but%20never%20understood%20what%20is%20value%20of%20the%20variable "方法")获取此代码；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:55:52.607

的值`method`是`String`指定请求方法`HttpConnection.GET`或`HttpConnection.POST`。

您必须像这样指定它：

```
c.setRequestProperty("method", HttpConnection.GET); 
```

或者

```
c.setRequestProperty("method", HttpConnection.POST); 
```

您可以改用[c.setRequestMethod()](http://www.blackberry.com/developers/docs/5.0.0api/javax/microedition/io/HttpConnection.html#setRequestMethod%28java.lang.String%29)。

[在这里](https://stackoverflow.com/questions/9339656/send-json-request-from-blackberry-application)查看更多

# python - Dynamic runtime method in Python

> ID：10380401
> 
> 赞同：0
> 
> 时间：2012-04-30T08:09:59.667
> 
> 标签：python, django, dynamic-method

```
class Screening(models.Model):
  def get_omitted_1(self):
       return OmittedInformationReason.objects.get(pk=self.omitted_1).name 
  get_omitted_1 = property(get_omitted_1) 
```

I want to have access to screening_instance.get_omitted_1 ,screening_instance.get_omitted_2 upto screening_instance.get_omitted_10\. Is there better way to do this without creating get_omitted_1, get_omitted_2.. methods for each case like get_omitted_%d ??

I tried creating dynamic function at runtime but had some problem with it. I tried something like this:

```
def omitted_list(self,x):
    def omitted_function(self): 
        opk = "omitted_%d" % x
        return OmittedInformationReason.objects.get(pk=self.opk).name

    omitted_name = 'get_omitted_'+ str(x)

    setattr(self.__class__, omitted_name , omitted_function)
    omitted_name = property(omitted_name)

    for x in range(1, 3): 
      omitted_list(x) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:21:46.237

我看不出有任何可能的需要。如果您需要动态访问项目，请使用一种方法：这就是它们的用途。

```
def get_omitted(self, number):
    return OmittedInformationReason.objects.get(pk=number) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:41:00.987

> 通过创建这样的方法，我将无法在 django 视图中将其用于screening.get_omitted.1 因此，动态方法使我能够在视图中使用screening.get_omitted_1

啊哈！您应该在原始问题中提到这一点。如果您有其他人会指导您[创建自定义标签的文档，](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)这是解决您的问题的正确方法。

一旦你创建了你的标签，你就可以在你的模板中做`{% get_omitted 1 %}`，然后`{% get_omitted 2 %}`等等。

# php - Approve first when submit the form

> ID：10380411
> 
> 赞同：5
> 
> 时间：2012-04-30T08:10:51.253
> 
> 标签：php, javascript, jquery, mysql, codeigniter

I'm using the PHP CodeIgniter framework.

The problem is that I want the user to check those fields that they have entered and approved by selecting checkbox then submitting the form.

Like these are the fields.

```
<tr>    
    <td>Remarks </td>
    <td><textarea name="particular" rows="3" class="save_record autosuggestship"></textarea></td>   
    <td>&nbsp;</td>
    <td>&nbsp;</td>                 
</tr>
<tr>
    <td>Custom Reference No.</td>
    <td><input type = 'text' name = 'custom_ref_no' class = 'save_record autosuggestship' id="custom_ref_no" /></td>
    <td>Date</td>
    <td><input name = 'costom_date' type = 'text' class = 'save_record date_class autosuggestship' id="costom_date" /></td>
</tr>
<tr>
    <td>
        <p> Container Information </p>
    </td>
    <td> 
```

* * *

And this the Checkbox to approve.

```
<tr>
    <td>Approve</td>
    <td><input type="checkbox" id="Approve" /></td>
    <td>&nbsp;</td>
    <td align="left">&nbsp;</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:24:29.413

## 如何使用 jQuery 进行操作：

这不是万无一失的，因为浏览器总是可以决定不运行这个 js 片段，但仍然有用，因为它在提交表单（并等待服务器响应）之前通知用户，所以这主要是为了节省一些带宽，因为这可以防止对服务器的无用请求。

`Useless requests`表示此处的 HTTP 请求（表单提交）返回消息，要求用户勾选一个复选框，然后再次提交相同的数据。

```
$(document).ready(function() {

    // Catch submit events:
    $('form').submit(function() {
        // Check if checkbox is checked:
        if ($('#checkme').is(':checked')) {
            // Allow form submit:
            return true; 
        } else {
            // Prevent form submit:
            alert('You must check the Approve checkbox to continue!');
            return false;
        }
    });

}); 
```

### 请参阅*如何使用 PHP*标题`<form>`下的示例。

 *上面的客户端解决方案基于*tomhallam*的答案，将其修改为更小、更简单、更完整，并遵循更好的 jQuery 建议。

## 如何使用 PHP 做到这一点：

在服务器端做同样的检查总是好的，在这种情况下使用 PHP。无论客户端是否缺乏对 Javascript 或服务器定义的任何其他客户端检查方法的支持，服务器端检查都能保证真正检查值。

```
<?php
/* POST($key) returns value of $_POST($key) if set, 
 *  otherwise empty string is returned. */
function POST( $key ) {
    if ( isset( $_POST[$key] )) return $_POST[$key];
    else return '';
}

if ( isset( $_POST['checkme'] )) {
    // Checkme is checked, do something with form data:
    mySql_insert_formdata( $_POST );
    $_POST['error'] = 'Form processed, thanks for your data';
} elseif ( isset($_POST['submitted'])) {
    // Form submitted but checkme not checked, set error message
    $_POST['error'] = 'Checkme must be cheked first!';
}

echo POST('error');
?>

<form action="forms.php" method="post">
    <!-- Hidden field to check at server if form is submitted -->
    <input type="hidden" name="submitted" value="anything" />
    <!-- Some fields for user to fill, POST() inserts previous value if any -->
    <label for="email">eMail</label>
    <input type="email" id="email" name="email" value="<?php echo POST('email'); ?>" /><br/>
    <!-- Checkbox that must be checked -->
    <input type="checkbox" id="checkme" name="checkme" />
    <label for="checkme">Approve</label><br/>
    <!-- And submit button -->
    <input type="submit" value="Submit" />
</form> 
```

## 结合客户端和服务器端解决方案：

Javascript（客户端）解决方案不能保证做任何事情，它取决于浏览器设置和 javascript 支持。
PHP（服务器端）解决方案保证可以正常工作，客户端/浏览器无法更改这一点。

但是，我认为同时拥有它们很好，因此只要支持 Javascript，客户端就会立即收到有关问题的通知，而不必等待服务器处理。
当用户没有 JS 支持时，他必须等待服务器检查表单并使用数据或返回`"try again"`错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:52:49.207

使用 jQuery：尝试在`<script></script>`包含 jQuery 的标签中插入这个页面。

```
$(document).ready(function() {
    $('form input[type=submit]').on('click', function(e) {
      e.preventDefault();
      if($('#Approve').attr('checked') == 'checked') {
        $('form').submit();
      }
      else {
        alert('You must check the Approve checkbox to continue!');
      }
    });
    // if the user presses enter.
    $('form').on('keyup', function(e) {
      if(e.which == 13) {
       $('form').submit();
      }
    });
}); 
```

在 PHP 中（确保你给你的输入一个`name="Approve"`：

```
if(isset($_POST['Approve']) {
  // they have ticked the checkbox.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:55:59.910

使用表单 onsubmit 事件处理程序

```
<form onsubmit="return this.Approve.checked?true:alert('must approve!'),false">
<table>
<tr>
    <td>Approve</td>
    <td><input type="checkbox" id="Approve" /></td>
    <td>&nbsp;</td>
    <td align="left">&nbsp;</td>
</tr>
</table>
<input type="submit"/>
</form> 
```

您可以使用函数代替内联代码，不要忘记保留内联“return myfunc()”，因为表单提交将取决于该返回，如果为 true，则提交表单，否则它只是等待。*

# javascript - 在单个分隔符出现处拆分

> ID：10380417
> 
> 赞同：7
> 
> 时间：2012-04-30T08:11:48.103
> 
> 标签：javascript

我有像这样的字符串

```
A_B_C_D
A_B___C_D 
```

`___`可以在字符串中的任何位置。

将它们拆分为任何单一`_`而不是拆分的最简单方法是什么`___`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T08:18:34.893

```
>>> "A_B_C_D".match(/(?:[^_]|_{2,})+/g)
["A", "B", "C", "D"]

>>> "A_B___C_D".match(/(?:[^_]|_{2,})+/g)
["A", "B___C", "D"] 
```

我们没有找到分隔符，而是找到了组件本身。请注意，字符串必须是非`_`'s（因为分隔符是`_`）或多个`_`s。所以匹配它们的正则表达式就是这样。

请注意，如果输入以开头或结尾`_`（例如`"_a_"`将仅返回`["a"]`.） ，则此正则表达式将忽略空字符串。

# spring - Jetty 与 Spring 不兼容吗？

> ID：10380419
> 
> 赞同：1
> 
> 时间：2012-04-30T08:11:55.267
> 
> 标签：spring, gwt, maven, jetty, smartgwt

我还在那个巨大的 GWT+smartGWT+Selenium+Maven 项目上。刚刚得知持续集成服务器上没有tomcat。
所以我发现在集成服务器上使用 Selenium 的更简单方法是：

*使用嵌入式容器（码头）部署应用程序，然后使用 Selenium RC 对其进行单元测试。*

只剩下一个问题了。当我尝试使用该 web 应用程序（使用 jetty:run-war 或 jetty:run）启动 jetty 时，它给了我很多错误，我认为它来自 Spring。
这是我的错误的 pastebin 的链接：[http](http://pastebin.com/raw.php?i=4Qg4TXBE)
://pastebin.com/raw.php?i=4Qg4TXBE 当我尝试使用浏览器访问码头服务器时，它说：“服务不可用”

我的构建阶段是：
*- 服务器端的单元测试
- 构建战争
- 启动 Jetty 并部署战争
- 启动 Selenium 服务器并单元测试客户端
- 关闭 Selenium 服务器
- 关闭 Jetty 容器
- 将我的测试的可靠报告发送给 Sonar*

所以这是我的问题：**我应该怎么做才能正确启动 Jetty？**
cargo-maven-plugin 会解决这个问题吗？
有没有一种简单的方法让 Jetty 与 Spring 一起工作？

再次感谢您的回答，你们帮了我很多^^
（对不起我的英语不好，仍然不擅长）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:27:59.437

请看这篇文章来声明你的名为“agepro-ds”的 JNDI 数据源：http: [//umanga.wordpress.com/2008/11/07/maven-jetty-plugin-jndi-jdbcdbcp-configuration/](http://umanga.wordpress.com/2008/11/07/maven-jetty-plugin-jndi-jdbcdbcp-configuration/)

# android - Android Static Linking vs Dynamic Linking against glibc

> ID：10380422
> 
> 赞同：10
> 
> 时间：2012-04-30T08:11:59.667
> 
> 标签：android, android-ndk, static-linking, dynamic-linking, libc

I have been cross-compiling some Linux tools (and some of my own C code) to Android and one of the challenges that I face is that Android's libc has some missing/stripped components and I end up patching my code to make it work with Android's libc (for e.g. a problem like this [http://credentiality2.blogspot.com/2010/08/compile-ncurses-for-android.html](http://credentiality2.blogspot.com/2010/08/compile-ncurses-for-android.html))

Q1 : How do I go about statically linking against glibc (and other dependencies) while cross-compiling with the arm toolchain (or ndk-build)?

Q2 : Is it a good idea to statically link against glibc for binaries for Android? Should I expect anything to break if I start statically linking? Are there any performance/memory issues?

I understand most of the pros and cons of static vs dynamic linking from here - [C++ application - should I use static or dynamic linking for the libraries?](https://stackoverflow.com/questions/2095363/c-application-should-i-use-static-or-dynamic-linking-for-the-libraries) and [Static linking vs dynamic linking](https://stackoverflow.com/questions/1993390/static-linking-vs-dynamic-linking)

So I wish to know if I should be statically linking glibc for Android when cross-compiling binaries.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T09:32:38.043

首先是关于 libc 的一个小注释。Android libc 是 Bionic libc ( [https://github.com/android/platform_bionic/](https://github.com/android/platform_bionic/) ) 而不是 GNU libc (glibc)。因此，NDK 中包含的 libc 是 Bionic，Android 设备上可用的 libc 也是如此。

就 glibc 而言，可以使用 NDK 构建它。但是，当它安装在 android 设备上时，它的名称会与系统 libc 冲突。请注意，这仅适用于构建动态库的情况。如果您将 GNU libc 构建为静态库，那么上面的整个问题都可以回避，因为您永远不需要安装静态库。

现在回答你的问题：

1.  Q1：如果您使用 NDK 构建 glibc，那么 Android.mk 使用变量 BUILD_STATIC_LIBRARY 来构建静态库。但是，如果您不使用 NDK，那么您可能需要陷入很多头痛（不知道多少）。我不能告诉你更多关于这方面的信息，因为我还没有尝试过构建 glibc，无论是静态的还是动态的。此外，似乎非常不鼓励使用 glibc 进行静态链接，至少对于非移动平台是这样。

2.  从破坏的角度来看，静态链接和动态链接之间没有区别。从启动的角度来看，静态可执行文件的启动速度更快，因为不需要动态库加载步骤。在静态或动态链接的可执行文件中没有内存或执行速度损失。静态可执行文件的磁盘存储要求更大。

至于仿生 libc 缺少功能的问题，您可以使用大多数 GNU 软件使用的方法，即提供您自己的功能实现，以防系统库中缺少该功能。我已经为 Android 编译了 file-5.11、GNU make 3.82、diffutils-2.8，将 NDK 工具链/includes/libs 传递给了 autotools (./configure ...)。这些程序似乎包含大多数非核心库函数的实现，以防标准库不提供它们（在这种情况下是仿生）。

注意：我将尝试构建一个静态 glibc，并在成功/失败时更新答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T12:37:53.817

如果您打算使用 glibc 而不是仿生，则可能值得考虑使用（兼容内核生成）arm-linux 发行版的工具链而不是 ndk。如果您正在生成命令行可执行文件，则尤其如此。（人们一直在尝试将 chroot debian 环境推到 android 设备上，直到 G1）

对于 jni sub（它仍然是唯一官方认可的本地应用程序代码工具），它可以使用任一工具链变得有点“有趣”，因为您将在一个已经映射并正在持续使用仿生 libc 的进程中运行支持 Dalvik 虚拟机。据推测，如果您静态链接库自己的依赖项，您将不会遇到名称冲突，但我希望您选择的任何路径都将是关于内部工作的学习体验 - 这不一定是一件坏事。

你必须有ncurses吗？我曾经用 ndk 成功地为 android 构建了诅咒。还要考虑程序是否认真地利用了这一点（即，您实际上是否在进行大量文本格式化？），或者只是因为假设它在目标系统上可用而将其用于一些小事情？

# xcode - IPad-App needs to be crashsafe

> ID：10380426
> 
> 赞同：1
> 
> 时间：2012-04-30T08:12:42.687
> 
> 标签：xcode, ipad, crash

I'm developing an IPad-App that needs to be uncrashable, because the home screen with all the apps mustn't appear. The home button is covered by a case. Why I need this? Well, this app will be for promotion and feedback use in some public places.

If the home screen appears, everyone could do with the IPad what he want. It is already restricted by the IPhone-Configuration Tool as much as possible (sadly, internet connection is needed inside the App because there is an inside web browser that access preselected pages) but that isn't enough for me.

Is there a way to do one or more of following things to keep that app on foreground?

*   The app implements inside error handling with a self-reset and self-reinit (something like this is possible in Windows). This is the resolution I like most. Is there such an API?
*   The app crashes or the user quit/minimize it by a magnet, a sender or something like this, it restarts itself
*   The app crashes but nothing inside the Home-Screen can be launched by everyone
*   The app freezes after crash and give an alert, until it is relaunched by the staff member
*   The app is watched by another app in background and gives alert to the staff by passing a call, sms, message etc to it, if it get closed or minimized.
*   Another resolution similar to these

It needn't to be conpliant to the Appstore rules, because it won't be deployed by it. Just internal use. If there is only dirty code to do this, better than nothing.

The staff can push the home button, because it is able to open the case later.

The battery energy won't go out, because it is powered by a powersocket adapter all the time.

# asp.net - asp.net Mention Path name within Local

> ID：10380427
> 
> 赞同：0
> 
> 时间：2012-04-30T08:12:43.753
> 
> 标签：asp.net

I am using Exec `msdb.dbo.sp_send_dbmail` in class file using string builder to append the from and To address.NowI need to attache the file which will be in Local solution folder (Within the solution I have Created the folder)

```
 strSql.Append("Exec msdb.dbo.sp_send_dbmail @profile_name='SLAToolProfile',");strSql.Append("@recipients='");
        strSql.Append(eMailToaddresses);

        strSql.Append("',@file_attachments='");
        string Path = "~/Material/study material.doc";
        strSql.Append(Path); 
```

when I using the above format I got file attached Error .How do I mention the path which should be in local folder within the solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:36:16.053

用这个：

```
string filename = "study material.doc";
string storePath = Server.MapPath("~/Material");
string finalPath = Path.Combine(storePath,filename); 
```

`Server.MapPath()`将您的虚拟路径转换为绝对应用程序路径；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:25:14.097

您需要使用 VirtualPathUtility.ToAbsolute 方法：

```
strSql.Append("Exec msdb.dbo.sp_send_dbmail @profile_name='SLAToolProfile',");strSql.Append("@recipients='");
        strSql.Append(eMailToaddresses);

        strSql.Append("',@file_attachments='");
        string Path = VirtualPathUtility.ToAbsolute("~/Material/study material.doc");
        strSql.Append(Path); 
```

那应该工作

[http://msdn.microsoft.com/en-us/library/ms150160(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms150160(v=vs.90).aspx)

**更新**

好吧，做了更多的挖掘，事实证明，当您使用 sp_send_dbmail 时，附件位置是相对于**数据库服务器**的位置，而不是运行代码的机器。因此，您遇到的第一个问题是使数据库服务器可以访问此文件位置，即使用文件共享和 UNC 位置。所以你不能使用`~`. Db 服务器无法理解您的路线在哪里......！

# sql - 如何在 SSIS 2012 中删除缓存连接管理器？

> ID：10380428
> 
> 赞同：0
> 
> 时间：2012-04-30T08:12:48.700
> 
> 标签：sql, ssis

在尝试在 Sql Server 集成服务中保持整洁的同时，我想删除我在创建不再需要的缓存转换编辑器时创建的缓存连接管理器，但我不知道该怎么做。有人知道方法吗？

***编辑***

澄清一下，当我像这样创建缓存转换时：

![在此处输入图像描述](../Images/880efbe19cfe506794d9be7b9575aa0a.png)

在缓存转换的编辑器中，我单击新建... 按钮以创建一个名为“CCM1”的新缓存连接管理器。这将在同一包中另一个数据流任务的查找转换中可用：

![在此处输入图像描述](../Images/dd6acb7f7a14aeb69ca29c679606fda2.png)

现在我意识到 CCM1 是不对的。所以我创建了一个新的 ADO Net 源并将它连接到一个新的缓存转换。我创建了一个名为 CCM2 的新缓存连接管理器（我没有重用第一个，因为它不再是我想要的了）。现在我删除第一个 ADO 网络源和第一个缓存转换。但是，当我去定义新的查找转换时，我可以选择 CCM1。但这不再维护了，所以我真的不希望它到处乱放：

![在此处输入图像描述](../Images/280461efc7c97ee15190645950c60998.png)

但是在我能看到的任何地方都没有删除 CCM1 的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:26:49.510

只是为了验证我们在谈论同一件事

你像这样模糊地构建了一个包

![在此处输入图像描述](../Images/4b4c40ae3868556c0fd8c4f28fab2d20.png)

现在您要删除缓存连接管理器吗？我左键单击缓存转换，点击删除。

## 删除连接管理器

在`Connection Manager`'s 面板（底部）中，左键单击“缓存连接管理器”，在您的情况下为 CCM1，然后单击删除。

![在此处输入图像描述](../Images/6bdb1aae11ca3f66972facc37b2aa8b4.png)

我想你可能要问的是它是否是一个项目连接 - 前面有 (project) 作为左侧数据源。然后，如果您尝试删除数据源，它会发出警告

```
TITLE: Confirm Deletion
------------------------------

When you delete a project connection manager, packages that use the connection manager might not run. You cannot undo this action. Do you want to delete the connection manager?

------------------------------
BUTTONS:

OK
Cancel
------------------------------ 
```

如果是这种情况，您需要先将其转换为包连接管理器，然后才能将其删除。右键单击 CM 并选择“转换为包连接”此时您可以将其删除，而不会出现上述错误消息。

如果这不能解决您的问题，请尝试澄清您的问题，我很乐意帮助/核对这个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:55:29.673

为什么要删除它？只是不要再使用它了。如果要从系统中清除 .caw 文件，只需使用“文件系统任务”删除该文件

编辑： ![在此处输入图像描述](../Images/67c99178ebef9e4dc33d865da795a213.png)

# android - android：如何检查位置管理器是否有 getLastKnownLocation？

> ID：10380440
> 
> 赞同：0
> 
> 时间：2012-04-30T08:14:09.947
> 
> 标签：android, gps, locationmanager

我有一些代码：

显现

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

活动领域

```
 private LocationManager locationManager;
 private LocationListener mlocListener; 
```

onCreate 初始化

```
locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
mlocListener = new MyLocationListener();
locationManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 
```

MyLocationListener 类

```
 public class MyLocationListener implements LocationListener{

        @Override
        public void onLocationChanged(Location loc){
        }

        @Override

        public void onProviderDisabled(String provider){
            Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
        }

        @Override
        public void onProviderEnabled(String provider){
            Toast.makeText( getApplicationContext(),"Gps Enabled",Toast.LENGTH_SHORT).show();
        }

        @Override

        public void onStatusChanged(String provider, int status, Bundle extras){
        }

    } 
```

我有按钮，onclick = 获取用户 gps 位置

```
public void getUserLocation(View v){
    boolean enabled = locationManager
            .isProviderEnabled(LocationManager.GPS_PROVIDER);

    if (!enabled) {
          Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
              startActivity(intent);
    } else {
            Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            Toast.makeText(getApplicationContext(), String.valueOf(location.getLatitude()) + " " + String.valueOf(location.getLongitude()), Toast.LENGTH_SHORT).show();
    }
} 
```

在 getLastKnownLocation 上我有错误。我如何检查 locationManager 是否有 getLastKnownLocation ？requestLocationUpdates 自动必须获取位置，不是吗？

我很有趣，requestLocationUpdates（minTime 和 minDistance）中的哪些参数应该更好地使用？我不想吃太多用户电池

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:23:19.037

> 我如何检查 locationManager 是否有 getLastKnownLocation ？

只需一个空检查即可完成所需的操作

> requestLocationUpdates 自动必须获取位置，不是吗？

只要您从网络或 Gps 请求。它开始寻找位置更新。但这可能需要一些时间。

Gps 更新速度较慢。需要开阔的天空，但更准确。

网络更新更快。但不如 GPS 准确。如果 wifi 网络的准确度在 50-100 左右，这对大多数情况来说都是好的。

> 我很有趣，requestLocationUpdates（minTime 和 minDistance）中的哪些参数应该更好地使用？我不想吃太多用户电池

一旦您从侦听位置更新中获得所需精度的更新，请立即使用 0,0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:23:50.583

```
Use this..
   /*
     * getting the best location using the location manager
     */
    mLocation = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    mBestProvider = mLocation.getBestProvider(criteria, false);
    Location location = mLocation.getLastKnownLocation(mBestProvider);
    mLocation.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            Constants.MINIMUM_TIME_BETWEEN_UPDATES, 
            Constants.MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new LocationListenerManager()
    );
    if(location!=null) {
    latitude = location.getLatitude();
    longitude = location.getLongitude(); 
           }
            else { // handle by urself

            } 
```

# wolfram-mathematica - Mapping Select of one list over a second list

> ID：10380445
> 
> 赞同：4
> 
> 时间：2012-04-30T08:14:26.243
> 
> 标签：wolfram-mathematica

I have a large multi column data file, but for this question it can simplified as follows:

```
data = {{"a", 2000}, {"a", 2010}, {"b", 1999}, {"b", 2004}, {"b", 
2006}, {"c", 2012}, {"c", 2014}}; 
```

I then have a list of items for which I want to extract the year value from data, e.g:

```
selectedList = {"b", "c"}; 
```

I can do it by using Select[] and then iterating through the selectedList:

```
Table[
        Select[data, #[[1]] == selectedList[[i]] &][[All, 2]],

       {i, 1, Length[selectedList]}  ] 
```

However I want to use Map, which should be faster than Table. I can do this:

```
func[dat_, x_] := Select[dat, #[[1]] == x &][[All, 2]] 
```

and then :

```
func[data, #] & /@ selectedList 
```

I am looking for a more elegant way to do this in one step, preferably mapping Select directly onto selectedList

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T11:17:43.087

```
Cases[data, {#, x_} :> x] & /@ selectedList 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T09:23:35.957

另一种方法是使用`Position`：

```
Map[Function[x, data[[Position[data, x][[All, 1]], 2]]], selectedList]

(* {{1999, 2004, 2006}, {2012, 2014}} *) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T08:52:13.293

我会使用地图和案例：

```
data = {{"a", 2000}, {"a", 2010}, {"b", 1999}, {"b", 2004},
   {"b", 2006}, {"c", 2012}, {"c", 2014}};
selectedList = {"b", "c"};

Map[Part[Cases[data, {#, _}], All, 2] &, selectedList] 
```

{{1999, 2004, 2006}, {2012, 2014}}

但是，如果您真的想使用 Select，您可以按如下方式进行。函数用于避免混淆匿名槽。我逐渐建立了功能来说明：-

```
Select[data, First[#] == "b" &] (* Basic start *) 
```

{{"b", 1999}, {"b", 2004}, {"b", 2006}}

```
Select[data, Function[x, First[x] == "b"]] (* Implement with Function *) 
```

{{"b", 1999}, {"b", 2004}, {"b", 2006}}

```
Part[Select[data, Function[x, First[x] == "b"]], All, 2] 
```

{1999、2004、2006}

```
Map[Part[Select[data,
    Function[x, First[x] == #]], All, 2] &, selectedList] 
```

{{1999, 2004, 2006}, {2012, 2014}}

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T11:08:55.307

对于变化，这里是另一个基于选择的：

```
Last[#\[Transpose]] & /@ (Select[data, Function[x, First[x] == #1]] & ) 
/@ selectedList 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T23:08:30.630

我会使用：

```
Reap[Sow[#2, #] & @@@ data, selectedList][[2, All, 1]] 
```

> ```
> {{1999, 2004, 2006}, {2012, 2014}} 
> ```

这很容易适应其他结构，例如第 10 列： `Sow[#10, #]`

在大型数据集和 long 上，`selectedList`这将比`Cases`因为没有为每个选择元素重新扫描数据而更快。

例子：

```
data = {RandomChoice[CharacterRange["a", "z"], 50000], 
        RandomInteger[100000, 50000]}\[Transpose];

selectedList = RandomSample @ CharacterRange["a", "z"];

Reap[Sow[#2, #] & @@@ data, selectedList][[2, All, 1]]; //AbsoluteTiming

Cases[data, {#, x_} :> x] & /@ selectedList;            //AbsoluteTiming 
```

> ```
> {0.0210012, Null}
> 
> {0.1010057, Null} 
> ```

# c# - How to start a job every day at the same hour in Quartz.net?

> ID：10380450
> 
> 赞同：9
> 
> 时间：2012-04-30T08:14:48.680
> 
> 标签：c#, asp.net-mvc-3, scheduling, quartz.net

I have to execute job every day at midnight Pacific Time. I am using MVC3 with Quartz.NET library.

Here is my code:

```
public static void ConfigureQuartzJobs()
{
    ISchedulerFactory schedFact = new StdSchedulerFactory();

    IScheduler sched = schedFact.GetScheduler();

    DateTime dateInDestinationTimeZone = System.TimeZoneInfo
        .ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, System.TimeZoneInfo.Utc.Id, "Pacific Standard Time").Date;

    IJobDetail job = JobBuilder.Create<TimeJob>()
        .WithIdentity("job1", "group1")
        .Build();

    ITrigger trigger = TriggerBuilder.Create()
        .WithIdentity("trigger1", "group1")
        .StartAt(dateInDestinationTimeZone)
        .WithSimpleSchedule(x => x.WithIntervalInHours(24).RepeatForever())
        .Build();

    sched.ScheduleJob(job, trigger);

    sched.Start();
} 
```

This code makes this job run only once at first midnight(in Pacific Time). I have set there `.WithSimpleSchedule(x => x.WithIntervalInHours(24).RepeatForever())` but it is not working - job is not repeating every day.

What can I do to make it work every day?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T08:25:31.370

您的计划任务是否由 Web 应用程序托管？如果是这样，您可能会遇到此类问题。Web 应用程序不适合运行计划任务。您应该创建托管计划任务的 Windows 服务。

但也有一些事情你可以检查：

1.  尝试使用较短的时间段（即，如果您将时间间隔设置为 1 分钟，请检查这是否有效）。
2.  试试[CronTrigger](http://quartznet.sourceforge.net/tutorial/lesson_6.html) - 我在 Windows 服务中使用它，它工作正常。

有一些文章解释了在 Web 应用程序中托管计划任务的优缺点，即。这个：[http](http://www.foliotek.com/devblog/running-a-scheduled-task/) ://www.foliotek.com/devblog/running-a-scheduled-task/ 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-06-05T08:43:47.540

这个问题已在 7 年前提出，并且已经接受了答复。但我认为 7 年来发生了一些变化，所以我会通过**CronScheduleBuilder**建议这个解决方案。

```
 //Constructing job trigger.
        ITrigger trigger = TriggerBuilder.Create()
                          .WithIdentity("Test")
                          .WithSchedule(CronScheduleBuilder
                          .DailyAtHourAndMinute(16,40))
                      .WithSimpleSchedule(x=>x.WithIntervalInMinutes(number)
                          .WithRepeatCount(number) 
                          .Build(); 
```

此代码每天在特定时间触发作业，在这种情况下为 16:40。以间隔*数次和以**数次*重复计数

# jquery - How to get first element ID from XML in jQuery which works perfectly in IE

> ID：10380451
> 
> 赞同：0
> 
> 时间：2012-04-30T08:15:04.983
> 
> 标签：jquery, element

I have following XML in **this.treeSpec** variable.

```
<root>
    <item id="9PQ0" pathId="08Z" specId="9PQ0" rel="MainRequest">
        <content>
            <name>ABC</name>
        </content>
    <item id="9PQ02" pathId="08Z2X" specId="9PQ0" rel="property">
        <content>
            <name>ABC1</name>
        </content>
    <item id="9PQ02" pathId="08Z2" specId="" ruleId="CYZ3F7WM861" rel="E" >
        <content>
            <name>ABC2</name>
        </content>
    </item> 
```

To get first item ID I am using below code.

```
var rootNode = $(this.treeSpec).find("item").first();
var rootId = rootNode.attr("id"); 
```

It works perfectly in Chrome and Mozilla but it is not working in IE.

Can any one tell me how can we write code to work in IE as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:21:40.007

这可能不是实际的解决方案，但尝试将您的 xml 包装在 div 之类的元素中，然后尝试查找，例如：

```
$("<div>" + this.treeSpec + "</div>").find("item")... 
```

希望能帮助到你

# c# - Automating the CLR profiling i.e. Automating CLR profiler memory dump mechanism

> ID：10380453
> 
> 赞同：1
> 
> 时间：2012-04-30T08:15:22.053
> 
> 标签：c#, .net, compact-framework, clrprofiler

I want to profile one of the application for memory leaks, the application is built up upon compact framework 3.5\. I want to use CLR profiler which comes with Power tools set. Basically, I want to take memory snapshot every half hour for 2-3 days.

Does anybody has idea about how this can be done?

Thanks, Omky

# python - How to set up a windows based front-end developer for contributing to a django based application

> ID：10380454
> 
> 赞同：0
> 
> 时间：2012-04-30T08:15:40.540
> 
> 标签：python, windows, django, web, collaboration

I am working on a project where I am quite comfortable running linux, virtualenv, pip, manage.py runserver, git and so on for back-end development. I work with a front-end developer who needs to collaborate remotely, currently via a Dropbox synced copy of the codebase (also in a git branch) on Windows. A development server on my side lets the developer see their changes semi-live.

Although this has served us fairly well so far, has anyone come across a similar working arrangement with a better setup for collaboration?

I'm mindful that the source control learning curve and environmental management overhead is potentially significant and somewhat unnecessary for front-end work (as long as I commit from time to time). I'm considering a VM based setup such as BitNami's DjangoStack so that the front-end dev has their own server setup, but I thought I'd ask about other experiences.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T10:32:05.180

我建议[vagrant](http://vagrantup.com/)不仅用于快速开发设置（它擅长），还用于共享 VM 配置，因为您可以发布自己的设计师使用的 vagrant 文件。

它依赖于[VirtualBox](http://virtualbox.org/) ~~Sun~~ Oracle 的开源管理程序，可在所有主要平台上免费使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:01:02.190

我在 Rog 之前遇到过非常相似的情况，后端是在 *nix 上运行的 Ruby on Rails 设置，而前端人员需要 windows。我们最初设置了一个 Windows-Apache-MySql+git+RoR（使用 Cygwin 和其他工具），但最终安装我们的应用程序库和 gems 在 windows 设置上变得很痛苦（任何时候我们都会引入一个新的 gem（或 django 术语中的应用程序） ) 设置会在 Windows 上中断)。最后，我们终于让前端人员负责 *nix 设置。

[andLinux](http://www.andlinux.org/)在这些情况下非常有用，它可以让您在 windows 2000 设置下运行 linux 的无缝安装，因此前端人员仍然可以使用 windows 工具。它不像双启动，但这里两个操作系统同时运行。看看它。

# java - Java 中的 64 位媒体框架

> ID：10380457
> 
> 赞同：3
> 
> 时间：2012-04-30T08:15:55.400
> 
> 标签：java, 64-bit, jmf

我尝试在 64 位环境和 64 位 JDK 上使用 JMF，但无济于事。没有可用于 JMF 的 64 位 jmvfw DLL。

我的问题是：是否有任何替代媒体框架是完全 64 位或 Java 媒体框架 64 位？

我需要它来进行相机捕捉和视频流传输，它必须在 64 位环境和 JDK 上运行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:44:41.363

[http://www.xuggle.com/downloads](http://www.xuggle.com/downloads)

[http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/)

[http://build.xuggle.com/](http://build.xuggle.com/)（来源）

他们曾经提供一个安装程序 .exe，现在您必须阅读他们网站上的文档才能自己构建 64 位 Windows 版本，如果您想要 64 位 linux 构建，您可以在第二个 URL 获得它。Xuggle 将让您转换/流式传输视频或音频，我相信它使用 ffmpeg 的 64 位编译和 Java 作为围绕它的包装器，因此您不必考虑 ffmpeg 命令行选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T00:44:19.213

您可以在同一台机器上同时拥有 32 位 jre/jdk 和 64 位。JMF 是 32 位的。但是 java 应用程序仍然可以是 64 位的，请查看 JMStudio 代码并使用 64 位的 java.awt.Image 和 32 位来引入图像。

如果需要，用 C++ 和汇编程序编写的 JNI 代码将是一个可能的解决方案，创建自定义 jar（java 库）并根据需要链接 .d 或 .dll 文件。

# c++ - 在开关盒内使用 std::map

> ID：10380459
> 
> 赞同：0
> 
> 时间：2012-04-30T08:16:02.360
> 
> 标签：c++, map, switch-statement

我有这个：

```
map<string,int> a;
int b; 
```

我想做这个：

```
switch(b)
{
  case a["someStr1"]:
  someCode1();
  break;

  case a["someStr2"]:
  someCode2();
  break;

  etc.
} 
```

但它不编译。如何正确实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T08:17:18.753

`switch`条件需要是常数，所以你想在这里做的事情是不可能的。

你最好使用一些`if`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:22:36.240

`switch/case`用于常量（例如，`enum`、`int`s 等）。
您可以使用`map<>::iterator`来遍历这些值并与 进行比较`b`。

```
for(map<string,int>::const_iterator it = a.begin(), end = a.end(); it != end; it++)
{
  if(it->second == b)
  {
    ...
    break;
  }
} 
```

`a`如果您足够大，这样您就可以避免代码重复进行比较。

此外，您可以探索将`for`循环替换为[`for_each`](http://www.cplusplus.com/reference/algorithm/for_each/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T08:29:01.343

你不能。switch 语句中的表达式`case`必须是整数编译时常量。所以一个字面量 ( `42`) ， const int 变量用字面量 ( `const int x = 66`... `case x:`) 或枚举值初始化。就是这样。

之所以如此严格，是因为效率。编译器通常为每个标签创建标签`case`，如果您在编译时知道每个标签的值，您可以进行一些很好的优化，以避免正常代码分支的大部分开销。

在您的情况下，只需使用 if-else：

```
if(b == a["someStr1"]) {
    //...
} else if(b == a["someStr2"]) {
    //...
}   // and so on 
```

# javascript - 在 json 数组中移动项目

> ID：10380461
> 
> 赞同：0
> 
> 时间：2012-04-30T08:16:04.487
> 
> 标签：javascript, json

我有这样的json对象

```
[
  { "id":"1", "item1":"item1 text","item2":"item2text","item3":"item3text" },
  { "id":"2", "item1":"item1 text","item2":"item2text","item3":"item3text" }
] 
```

我的问题是我想通过传递元素的 id 通过函数将 id 2 移动到第一个位置。喜欢

```
function movetotop(id){
  //Code here to move id 2 to the top position 
} 
```

希望有人帮忙。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T08:23:02.740

```
function moveIdToTop(jsonarray, id) {
 for (var i = 0; i < jsonarray.length; ++i) {
    if (jsonarray[i].id == id) {
       var temp = jsonarray[i];
       jsonarray.splice(i, 1);
       jsonarray.unshift(temp);
       break;
    }
 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T08:20:47.077

如果您有一个对象数组，请使用 sort 方法：

```
var data = [
 { "id":"1", "item1":"item1 text","item2":"item2text","item3":"item3text" },
 { "id":"2", "item1":"item1 text","item2":"item2text","item3":"item3text" }
];

var sorted = data.sort(function(a, b) {
    return a.id < b.id;
}); 
```

这会将 2 移到顶部。调整排序功能以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:24:15.217

假设它们在一个数组中，[这里有一个演示](http://jsfiddle.net/8eezW/3/)：

```
function popTop(arr, id) {
    var i, al = arr.length;
    dance: for (i = 0; i < al; i++) {
        if (arr[i].id == id) {
            arr.unshift(arr.splice(i, 1)[0]);
            break dance;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T08:27:30.403

您需要从数组中提取元素并将其作为第一个元素重新插入。

```
var yourarray = [{ "id":"1", "item1":"item1 text","item2":"item2text","item3":"item3text" }, 
                 { "id":"2", "item1":"item1 text","item2":"item2text","item3":"item3text" }];

function movetotop(id){
    //Code here to move id 2 to the top position
    var index = yourarray.map(function(element){return element.id;}).indexOf(id);
    if (index > -1) {
        var extracted = yourarray.splice( index,1 )[0];
        yourarray.unshift(extracted);
    }
} 
```

与`movetotop('2');`

演示在[http://jsfiddle.net/gaby/NGjXy/](http://jsfiddle.net/gaby/NGjXy/)

# java - Java中的服务器端验证

> ID：10380466
> 
> 赞同：0
> 
> 时间：2012-04-30T08:16:30.833
> 
> 标签：java

谁能解释一下java中服务器端验证的需求和场景。为什么我们不能使用 javascript 在客户端使用验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T08:18:25.577

因为攻击者可以通过简单地禁用 JavaScript 或使用[httpclient](/questions/tagged/httpclient "显示标记为“httpclient”的问题")或[curl](/questions/tagged/curl "显示标记为“卷曲”的问题")等外部工具调用您的服务器来绕过客户端验证。最后，使用像[firebug](/questions/tagged/firebug "显示标记为“萤火虫”的问题")这样的工具，几乎可以提交任何东西。

此外，它使您的 GUI 响应更快，因为您不必每次用户尝试提交表单时都重新加载页面（因此，它减少了网络流量和服务器负载）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T08:18:51.097

**客户端验证**有利于更好的用户体验，如果他犯了错误，则无需发送 HTTP 请求来找出错误。

例如 - 如果用户名至少应该有 3 个字符长，并且用户输入 2，您可以立即告诉用户有问题。

**服务器端验证**保护服务器免受可能由不诚实用户发送的损坏/恶意请求。

例如 - 如果用户尝试执行他不应该使用 SQL 注入的查询，您可以在服务器端阻止它，因为他可能不会通过您的网站发送查询，而是来自不同的客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T08:18:50.643

主要是出于安全原因。如果有人设法修改您的客户端并绕过验证，您可能会严重损害您的服务器。

# ios - 通过情节提要的 Xcode 自定义控件

> ID：10380468
> 
> 赞同：2
> 
> 时间：2012-04-30T08:16:51.827
> 
> 标签：ios, xcode, cocoa-touch, uiview, storyboard

我想在我的项目中使用自定义控件，特别是我在 cocoacontrols.com (http://cocoacontrols.com/platforms/ios/controls/cppickerview) 上找到的水平选择器视图。我已经能够将它包含到我的项目中，加载数据并且它工作得非常好。

pickerView 是在 viewDidLoad 上以编程方式设置的，但我真的很希望能够通过故事板使用它，因为我使用的是静态 tableView。我尝试添加一个 UIView，将类设置为 PickerView 类，然后设置插座。我构建时没有错误或警告，但选择器视图没有出现。它只显示一个白色矩形。

有这方面经验的人吗？有可能还是我应该以编程方式保留它？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:32:18.723

嗯，这很正常。CPPickerView 似乎没有实现`initWithCoder:`...我只`initWithFrame:`在[源代码](https://github.com/cbpowell/CPPickerView/blob/master/PickerView/CPPickerView/CPPickerView.m)中看到一个，这显然意味着您只能从代码中实例化该自定义 UIView。或者你可以改变 CPPickerView 的实现来支持你想要的。它是开源的。

# iphone - 问题 - 插入文本仅适用于第一次，第二次附加到文本末尾

> ID：10380477
> 
> 赞同：0
> 
> 时间：2012-04-30T08:17:21.023
> 
> 标签：iphone, ios, ios4, uitextview, uipickerview

[URL](https://stackoverflow.com/questions/10379333/insert-string-where-the-cursor-is/10379468#comment13381118_10379468)我正在使用 uipickerview 在 uitextview 中添加文本。

目前我正在添加如下文本（选择行方法）

```
self.myTextView.text = [NSString stringWithFormat:@"%@ %@", self.myTextView.text,
            [myTierThreeData objectAtIndex:row]]; 
```

这工作正常，但我想在光标所在的位置插入文本，所以我做了以下

```
-(void) pickerViewShown:(id)sender{
  myCursorPosition = [self.myTextView selectedRange];
} 
```

当显示选择器视图时，将光标位置放在成员变量中。

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

NSString *contentsToAdd = [myData objectAtIndex:row];
NSMutableString *tfContent = [[NSMutableString alloc] initWithString:[self.myTextView text]];
// add content where the cursor was
NSString *contentsToAddPadded = [NSString stringWithFormat:@"%@ ", contentsToAdd];

[tfContent insertString:contentsToAddPadded atIndex:myCursorPosition.location];
[self.myTextView setText:tfContent];
[tfContent release];

myCursorPosition = [self.myTextView selectedRange];
} 
```

上面的代码第一次工作，但是当尝试添加下一个文本时，它会在最后附加文本。

请让我知道上面的代码有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:02:01.873

可能为文本字段设置文本**会将光标位置重置到末尾**，因此您唯一的机会就是自己**计算新的光标位置**：

*   *启动选择器视图时，请记住myCursorPosition*中的原始光标位置（就像现在一样）。
*   每次附加文本时，将文本长度添加到*myCursorPosition*，并使用该值插入下一个文本。

# objective-c - 在节标题中显示返回值

> ID：10380482
> 
> 赞同：1
> 
> 时间：2012-04-30T08:18:03.780
> 
> 标签：objective-c, ios, xcode, core-data, nsdate

我正在开发一种费用跟踪器类型的应用程序。我能够使用 coredata 完美地存储和检索排序数据。

我正在存储日期。我能够按排序顺序检索日期。但我想要节标题中的日期和该表中的相关数据。

例如：2011 年 12 月 31 日 ---------> 节标题
xxxxxxx yyyyyy -----> 带有标签的单元格

2012 年 1 月 1 日------> 部分标题
xxxxxxx yyyyyy ------> 带有标签的单元格。

我能够按排序顺序接收日期。但是如何按排序顺序在节标题中显示它们以及如何在 tableView-noOfSections 方法中声明节数？

//我用于检索数据的代码。

```
- (void)viewDidLoad
{

AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
NSManagedObjectContext *context = [appDelegate managedObjectContext];
NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"NewExpense" inManagedObjectContext:context];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
NSSortDescriptor *date = [[NSSortDescriptor alloc]initWithKey:@"date" ascending:NO];
NSArray *sortDescriptors = [[NSArray alloc]initWithObjects:date,nil];
[fetchRequest setSortDescriptors:sortDescriptors];
[fetchRequest setEntity:entityDesc];
NSError *error;
self.listOfExpenses = [[context executeFetchRequest:fetchRequest error:&error]retain]    [fetchRequest release];
[super viewDidLoad];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{    
return 1;// as of now i have taken one.
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
[self.listOfExpenses count]; 
} 
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  //labels are created and added to the cell's subview.

NSManagedObject *records = nil;
records = [self.listOfExpenses objectAtIndex:indexPath.row];
self.firstLabel.text = [records valueForKey:@"category"];
NSString *dateString = [NSString stringWithFormat:@"%@",[records valueForKey:@"date"]];
NSString *dateWithInitialFormat = dateString;
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss Z"];
NSDate *date = [dateFormatter dateFromString:dateWithInitialFormat];
[dateFormatter setDateFormat:@"dd-MM-yyyy"];
NSString *dateWithNewFormat = [dateFormatter stringFromDate:date];
self.secondLabel.text = dateWithNewFormat;
NSString *amountString = [NSString stringWithFormat:@"%@",[records valueForKey:@"amount"]];
self.thirdLabel.text = amountString;
totalAmount = totalAmount + [amountString doubleValue];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:26:31.383

您可以使用`NSSortDescriptor`：

```
 NSFetchRequest *request = [[NSFetchRequest alloc] init];
    ...
    NSSortDescriptor * sort = [[NSSortDescriptor alloc] initWithKey:sortingKey ascending:ascending];
    NSArray * sortDescriptors = [NSArray arrayWithObject: sort];
    [request setSortDescriptors:sortDescriptors]; 
```

因为`sortingKey`你会通过你的情况`date`。

请参阅`NSSortDecsriptor`此处的文档： [https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:47:54.170

部分标题中的日期有点棘手，但是 Apple 提供了非常好的示例代码，我在我当前的一个应用程序中成功使用了它。查看[DateSectionTitles](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009939)。

简而言之，您需要使用 a`NSFetchedResultsController`并使用实体的单独属性定义`sectionNameKeyPath`（日期本身不会这样做，因为它精确到秒）。在`numberOfSections`你将不得不返回获取的结果控制器给你的任何东西，而不是`1`像上面那样。`numberOfRowsInSection`也必须进行调整，你明白了。

Apple 计算 a`primitive date`并在必须格式化节标题的字符串时重新构建它。一切都很简单。只需按照示例代码进行操作，您就可以立即解决此问题。

# performance - 优化执行时间较长的 SQL 查询

> ID：10380486
> 
> 赞同：2
> 
> 时间：2012-04-30T08:18:15.203
> 
> 标签：performance, sql-server-2012

我有一个简单的数据库，我想做一个简单的查询。

这些是我的数据库表的列：

*   external_id
*   时间戳
*   价值
*   验证
*   原因
*   基准
*   乌尔
*   阿弗龙登

这些列是：

*   `external_id`是某个meter的id
*   `Timestamp`什么也没做
*   `Value`是那个仪表的值
*   `Validation`是或不是
*   `Reason`刚刚得到一个`varchar`有原因的价值
*   `Datum`是日期
*   `Uur`是那个小时
*   `Afronden`是四舍五入所需的列

我要执行的查询以获取每天值总和的最高值和最低值为目标。

如您所见，每一天都以小时为单位，必须检查或数据是否相同或发生变化并由此获得总值。

这是我的查询：

```
Declare @totaal bigInt
Declare @tussentotaal bigint
Declare @Datum varchar
Declare @datumverschil varchar
Declare @hoogste bigint
Declare @laagste bigint
Declare @teller bigint
Declare @tellettotaal bigint

set @tellettotaal = (select count(*) from cresent_opdracht_de_proost_wim.dbo.[test])

Set @teller = 1

SET @datum = (Select top(1) datum 
              from cresent_opdracht_de_proost_wim.dbo.[test] 
              order by afronden asc)

Set @datumverschil = @Datum
set @tussentotaal = 0
set @totaal = 0
set @hoogste = 1775000006856
set @laagste = 1775000006856

while @teller <= @tellettotaal
begin
  if @teller = 1
  Begin
    set @tussentotaal = (select top(1) value 
                         from cresent_opdracht_de_proost_wim.dbo.[test] 
                         order by afronden asc)

    if @tussentotaal != 0
    begin
      Set @tussentotaal = @tussentotaal/100
    end
  End
  Else
  begin
    SET @tussentotaal = (Select top(1) value 
                         from (select top (@teller) * 
                               from cresent_opdracht_de_proost_wim.dbo.[test]) q 
                         order by afronden desc)

    Set @tussentotaal = @tussentotaal/100
  end

  if @tussentotaal != 0 
  Begin
    Set @totaal = @totaal + @tussentotaal
  end

  SET @teller= @teller + 1

  Set @datumverschil = (Select top(1) datum 
                        from (select top (@teller) * 
                              from cresent_opdracht_de_proost_wim.dbo.[test]) q 
                        order by afronden desc)

  if @datum != @datumverschil
  Begin
    if @totaal >= @hoogste
    begin
      set @hoogste = @totaal
    end

    if @totaal <= @laagste
    begin
      if @totaal != 0
      Begin
        set @laagste = @totaal
      end
    end

    Set @datum = @datumverschil
    set @totaal = 0
    select @teller As teller
  end
end

Select @hoogste As hoogste
Select @laagste As laagste 
```

22 分钟后，仅处理了 44000 行。

有人知道我可以如何优化我的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:48:27.090

嗯，有没有想过不使用破碎的程序方法可能是一个想法？

首先，你的逻辑可能被打破了——时间听起来太大了，所以也许你只是有一个死循环。抱歉，大多数人很难理解边缘语言 - 即任何不是英语的东西，所以你的表格和字段名称没有意义。胡说八道很难被不理解它的人调试。

这就是说：我认为你可以通过不在前 1 上运行无意义的循环来减少总的查询次数 - 而是让所有内容按降序排列。残酷地说：摆脱循环并制作一个编译结果集的语句。严重地。这应该是可能的。不要像 20 年前许多人在 dbase 时代所做的那样，试图超越查询优化器并返回编写过程数据库代码。一般来说。您的查询是线性的，这意味着没有并行化，您对条件的微观管理意味着没有查询优化器可以做聪明的事情（因为优化是逐个语句的）。在一个语句中定义结果集，您可能想知道它的效率如何。

我很确定最后你会发现你基本上是在尝试比你编写查询更好的东西。使用 SQL - 定义结果集。

最后，在不知道您的数据分布和 - 哎哟 - 索引的情况下 - 我们真的无能为力。也许您只是错过了任何合理的索引？谁知道——你什么都不告诉我们（没有查询计划输出，没有表定义，没有索引定义）。

它也可能不必滥用数据类型：Declare @Datum varchar - OUCH。听说过 sql server 中的 DATE 数据类型吗？

# cassandra - Reddit 中使用的 Cassandra 数据库架构是什么？

> ID：10380495
> 
> 赞同：8
> 
> 时间：2012-04-30T08:19:26.593
> 
> 标签：cassandra, database-schema, reddit

Reddit 目前正在将其数据库从 PosgreSQL 迁移到 Apache Cassandra。有人知道 Reddit 在 Cassandra 中使用什么数据库模式吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-01-02T06:03:41.407

我也不知道确切的 Reddit 架构，但对于您想要存档的内容，您的方式是正确的，将评论层次结构保存在基于文档的数据库而不是关系数据库中。我建议为每个根评论保留一个文档，然后将所有子项（以及子项的子项）添加到该评论中。

在 CouchDB 和 MongoDB 中，您可以直接存储 JSON 文档。**在 Cassandra 中，我会将 JSON 保存为 String**。所以数据结构只有

```
root-comments
{
    root-comment-id
    root-comment-json-string
} 
```

每个 root-comment-json-string 看起来像这样：

```
{
comment : "hello world"
answers : 
[
    {
    comment : "reply to hello world"
    answers : 
    [
        {
        comment : "thanks for the good reply"
        answers : []
        },
        {
        comment : "yes that reply was indeed awesome"
        answers : []
        }

    ]
    }

]
} 
```

此外，您可能希望在每条评论的结构中添加用户名、用户 ID、时间戳等。

如果您有大量数据，与规范化关系结构相比，这种“非规范化”结构将使查询变得非常快。

在任何情况下，您都必须处理所有例外情况，当您为大规模用户实施这样的系统时可能会发生这种情况，例如。如果有人用评论 B 回复评论 A，但同时（或稍后）评论 A 被删除，会发生什么情况。

如果您在 Internet 上搜索“cassandra 分层数据”，您会发现其他一些方法，但它们都返回到规范化，或者它们对于“无限”层次结构并不完整。

# python - 使用pydoop将文件复制到hdfs

> ID：10380496
> 
> 赞同：2
> 
> 时间：2012-04-30T08:19:27.760
> 
> 标签：python, hadoop, hdfs

我正在尝试编写用于将文件复制到 hdfs 的 python 脚本。我正在使用 ubuntu 并安装了 hadoop 和 pydoop。以下代码是我的脚本：

```
import pydoop.hdfs as hdfs

class COPYTOHDFS():

    local_path = '/home/user/test.txt'
    hdfs_path = '/testfile'
    host = 'master'
    port = 9000
    hdfsobj = hdfs.hdfs(host, port, user='cloudera-user', groups=['supergroup'])
    hdfsobj.copy(local_path, hdfsobj, hdfs_path) 
```

错误在这里：

```
Traceback (most recent call last):
  File "COPYTOHDFS.py", line 3, in <module>
    class COPYTOHDFS():
  File "COPYTOHDFS.py", line 10, in COPYTOHDFS
    hdfsobj.copy(local_path, hdfsobj, hdfs_path)
  File "/usr/local/lib/python2.7/dist-packages/pydoop-0.5.2_rc2-py2.7-linux-x86_64.egg/pydoop/hdfs.py", line 458, in copy
    return super(hdfs, self).copy(from_path, to_hdfs, to_path)
IOError: Cannot copy /home/user/test.txt to filesystem on master 
```

错误没有详细说明。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:54:59.463

在您的 conf/core-site.xml 中，您将为 fs 操作设置 tmp 目录。如果您忘记在这些目录上设置正在运行的用户的所有权和权限，那么就会出现 IO 异常，请检查。

# ios - cocos2d中不同的x和y速度（加速度）？

> ID：10380501
> 
> 赞同：0
> 
> 时间：2012-04-30T08:19:57.400
> 
> 标签：ios, path, cocos2d-iphone, acceleration

我想使用类似于以下的标准操作（CCMoveBy 等）创建具有轨迹的可见对象：

```
x = sin(y) 
```

我的代码：

```
CCMoveBy *moveAction1 = [CCMoveBy actionWithDuration:1.5 position:ccp(300, 0)];
CCEaseInOut *easeInOutAction1 = [CCEaseInOut actionWithAction:moveAction1 rate:2];
CCMoveBy *moveAction2 = [CCMoveBy actionWithDuration:1.5 position:ccp(-300, 0)];
CCEaseInOut *easeInOutAction2 = [CCEaseInOut actionWithAction:moveAction2 rate:2];
CCMoveBy *moveAction3 = [CCMoveBy actionWithDuration:1.5 position:ccp(0, -32)];
CCSpawn *moveActionRight = [CCSpawn actionOne:easeInOutAction1 two:moveAction3];
CCSpawn *moveActionLeft = [CCSpawn actionOne:easeInOutAction2 two:moveAction3];
CCSequence *sequenceOfActions = [CCSequence actionOne:moveActionRight two:moveActionLeft];
CCRepeatForever *finalMoveAction = [CCRepeatForever actionWithAction:sequenceOfActions];
[enemy runAction:finalMoveAction]; 
```

此代码仅显示下移。问题是对象有不同的 x 和 y 加速度，我不知道如何组合它们

**更新**

```
- (void)tick:(ccTime)dt
{
    CGPoint pos = self.position;
    pos.y -= 50 * dt;
    if (pos.y < activationDistance) {
        pos.x = 240 + sin(angle) * 140;
        angle += dt * 360 * 0.007;
        if (angle >= 360) {
            angle = ((int)angle) % 360;
        }
    }
    self.position = pos;
} 
```

这是我目前的解决方案。我可以增加activationDistance来调整物体的轨迹。但我想设置角度变量的初始值。

我使用数字而不是变量，因为它们仅在此函数内部使用。

**解决了**

要更改初始角度：

角度 = point.x < 240 ? -asin((240 - point.x) / 140) : asin((point.x - 240) / 140);

主要问题是我的平铺地图有自己的坐标并且仅覆盖屏幕的 320x320 部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:37:10.620

我认为你在你的框架更新方法中这样做会更容易（我假设你计划更新你的对象。所以为什么不这样做：

```
- (void)tick:(ccTime)dt {
   CGPoint pos = myObject.position;
   pos.x = <desired x> + sin(angle);
   pos.y = pos.y - y_acceleration * dt;
   angle += dt * 360 * x_acceleration;
   if (angle >= 360) 
       angle = ((int)angle) % 360;

   myObject.position = pos;
} 
```

您可以将相同的应用于对象的 y 轴

# c++ - 帧之间的OpenCV平移/旋转位移？

> ID：10380503
> 
> 赞同：0
> 
> 时间：2012-04-30T08:20:09.263
> 
> 标签：c++, opencv, rotation, translation

我目前正在研究使用垂直面向地面（固定高度）的低分辨率相机来测量速度（相机通过表面的速度）。将 OpenCV 2.1 与 C++ 一起使用。

由于整个背景将在连续的帧之间不断移动、平移和/或旋转，在确定“可用值”形式的帧位移时，最合适的方法是什么？（返回帧位移的功能？）然后根据相机的高度和捕获的帧区域（现实世界中帧的尺寸），我将能够根据帧位移计算现实世界中的位移，然后计算测量时间间隔的速度。

试图确定我的方法或是否有任何示例代码可用，将帧位移（或一组像素的位移）转换为基于相机高度的距离位移。

谢谢，乔希。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:55:02.313

这取决于您在计算机视觉方面的知识。首先，我会使用 opencv 可以提供的功能。请查看[feature2d 模块](http://opencv.willowgarage.com/documentation/cpp/features2d__feature_detection_and_descriptor_extraction.html)。

您需要首先提取特征点（例如 sift 或 surf），然后使用其内置的匹配算法来匹配从两帧中提取的点。每场比赛都会给你一些限制，你最终会解决一个过饱和的 Ax=B。

当然，离线进行实验，即先拍摄视频，然后对单个图像进行操作。

更新：

在多摄像头校准的情况下，您的目标是确定每个摄像头的 3D 位置，这正是您所拥有的。想象一下，不是移动单个摄像头，而是拥有与单个摄像头捕获的视频中的图像数量一样多的摄像头，并且您想知道每个摄像头位置的 3D 位置，这表示每个摄像头拍摄的图像的位置您的单个移动相机。

有一个矩阵，您可以将世界上的任何 3D 点映射到图像上的 2D 点，请[参见 wiki](http://en.wikipedia.org/wiki/Camera_matrix)。相机矩阵由两部分组成，内在参数和外在参数。我（可能不准确）将内在参数称为内部矩阵。内在参数包括单个相机的静态参数（例如焦距），而外在参数包括相机的位置和旋转。

现在，一旦您有了相机的内在参数和匹配点，您就可以将许多这些[投影方程](http://en.wikipedia.org/wiki/3D_projection)堆叠在一起，并求解所有匹配点的实际 3D 位置和所有外在参数的系统参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:49:46.320

给定如上所述的兴趣点，您可以使用 opevcv 的[findHomography](http://opencv.willowgarage.com/documentation/python/camera_calibration_and_3d_reconstruction.html#findhomography)找到平移变换。

此外，如果您可以假设转换会有点小且接近线性，您可以只比较两个连续帧的图像像素以找到最佳匹配。通过足够的下采样，这不会花费太长时间，而且根据我的经验，效果相当好。

祝你好运！

# c# - Windows 服务 - 如何使任务在多个特定时间运行？

> ID：10380505
> 
> 赞同：2
> 
> 时间：2012-04-30T08:20:11.947
> 
> 标签：c#, windows-services

我有一个 Windows 服务正在运行。在其中，任务目前每天晚上 7 点运行。例如在上午 9.45、上午 11.45、下午 2 点、下午 3.45、下午 5 点和下午 5.45 点运行它的最佳方式是什么。

我知道我可以安排任务来运行该功能，但我想知道如何在我的 Windows 服务中执行此操作。当前代码如下：

```
private Timer _timer;
private DateTime _lastRun = DateTime.Now;
private static readonly log4net.ILog log = log4net.LogManager.GetLogger
(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

protected override void OnStart(string[] args)
{
    // SmartImportService.WebService.WebServiceSoapClient test = new WebService.WebServiceSoapClient();
    // test.Import();
     log.Info("Info - Service Started");
    _timer = new Timer(10 * 60 * 1000); // every 10 minutes??
    _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
    _timer.Start();
}

private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    log.Info("Info - Check time");
    DateTime startAt = DateTime.Today.AddHours(19);
    if (_lastRun < startAt && DateTime.Now >= startAt)
    {
        // stop the timer 
        _timer.Stop();               

        try
        {
           log.Info("Info - Import");
           SmartImportService.WebService.WebServiceSoapClient test = new WebService.WebServiceSoapClient();
           test.Import();
        }
        catch (Exception ex) {
           log.Error("This is my error - ", ex);
        }
        _lastRun = DateTime.Now;
        _timer.Start();
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T08:29:34.397

考虑使用[Quartz.net](http://quartznet.sourceforge.net/)和[CronTrigger](http://quartznet.sourceforge.net/tutorial/lesson_6.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T08:40:42.227

如果您不想使用 cron 或石英，请编写一个函数来查找现在和下一次运行之间的时间间隔并相应地重置计时器，在服务启动和 timeelapsed 事件时调用此函数。你可以做这样的事情（代码未经测试）

```
 System.Timers.Timer _timer;
    List<TimeSpan> timeToRun = new List<TimeSpan>();
    public void OnStart(string[] args)
    {

        string timeToRunStr = "20:45;20:46;20:47;20:48;20:49";
        var timeStrArray = timeToRunStr.Split(';');
        CultureInfo provider = CultureInfo.InvariantCulture;

        foreach (var strTime in timeStrArray)
        {
            timeToRun.Add(TimeSpan.ParseExact(strTime, "g", provider));
        }
        _timer = new System.Timers.Timer(60*100*1000);
        _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
        ResetTimer();
    }

    void ResetTimer()
    {
        TimeSpan currentTime = DateTime.Now.TimeOfDay;
        TimeSpan? nextRunTime = null;
        foreach (TimeSpan runTime in timeToRun)
        {

            if (currentTime < runTime)
            {
                nextRunTime = runTime;
                break;
            }
        }
        if (!nextRunTime.HasValue)
        {
            nextRunTime = timeToRun[0].Add(new TimeSpan(24, 0, 0));
        }
        _timer.Interval = (nextRunTime.Value - currentTime).TotalMilliseconds;
        _timer.Enabled = true;

    }

    private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        _timer.Enabled = false;
        Console.WriteLine("Hello at " + DateTime.Now.ToString());
        ResetTimer();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:25:05.197

如果你很清楚它应该运行什么时间表..然后在 timeelapsed 事件中更改计时器的时间间隔，以便它按照时间表运行..虽然我从未尝试过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T08:27:36.553

我会使用一个后台线程并让它执行一个无限循环来完成你的工作并休眠 15 分钟。对于服务代码来说，这将比使用计时器更干净、更简单。

请参阅MSDN 上的[这篇](http://msdn.microsoft.com/en-us/library/a9fyxz7d.aspx)文章。

# visual-studio-2012 - Entity Framework 5 空间错误

> ID：10380506
> 
> 赞同：0
> 
> 时间：2012-04-30T08:20:30.993
> 
> 标签：visual-studio-2012, .net-4.5, entity-framework-5

我正在尝试使用 EF5 beta 2、MVC 和 Visual Studio 2011 / .NET 4.5 使用空间类型来保存位置信息。我正在使用代码优先方法，并且一直在关注这些教程：

使用 MVC 开始使用 EF - [http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp -net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)

EF 空间类型演练 - [http://msdn.microsoft.com/en-us/hh859721](http://msdn.microsoft.com/en-us/hh859721)

这是我的模型：

```
public class Location
{   
    public int LocationID { get; set; }
    public string Name { get; set; }
    public DbGeography CGLocation { get; set; }        
    public string LocationNotes { get; set; }
} 
```

但是，当我尝试创建控制器时，出现错误：

```
Unable to retrieve metadata for 'MVCSpatialTest.Models.Location'. One or more validation errors were detected during model generation:

System.Data.Edm.EdmEntityType::EntityType 'DbGeography' has no key defined. Define the key for this EntityType.

System.Data.Edm.EdmEntitySet: EntityType: EntitySet
DbGeographies is based on type DbGeography that has no keys defined. 
```

如果我从我的模型中取出“public DbGeography CGLocation { get; set; }”，一切正常，我的数据库、控制器和视图都已创建。

我的印象是 LocationID 被自动用作密钥，为什么会出现这个错误？

谢谢，

# java - 在 for 循环条件下使用 BigInteger 不起作用。我该怎么办？

> ID：10380507
> 
> 赞同：0
> 
> 时间：2012-04-30T08:20:32.260
> 
> 标签：java, loops, biginteger

另一个 BigInteger 问题。我的代码适用于 int 和 long，但由于 UVa 中的测试用例较大，我需要使用 BigInteger。但我不知道如何使用 BigInteger，它让我发疯！代码甚至没有进入 for 循环。它似乎卡在了条件部分。我尝试使用 for 或 while，他们也有同样的问题。

```
public class Main{
  public static void main(String[] asdf){
    Scanner pp = new Scanner(System.in);
    int testCases = pp.nextInt();
    while(testCases-- > 0){
      //BigInteger a = pp.nextBigInteger();
      BigInteger low = pp.nextBigInteger();
      BigInteger upp = pp.nextBigInteger();
      BigInteger  max = BigInteger.ZERO;
      BigInteger i = low;
      //((i.compareTo(upp)==-1)||
      //(i.compareTo(upp)==0));
      //i.add(BigInteger.ONE))
      while((i.compareTo(upp))<0){
        if(divCount(i).compareTo(divCount(max))==1){
          max = i;
        }
        i.add(BigInteger.ONE);
      }
      System.out.println("Between "+low+" and "+upp+", "+max+" has a maximum of "+divCount(max)+" divisors.");
    }
  }
  public static BigInteger divCount(BigInteger n){
    BigInteger lim = n;
    BigInteger size = BigInteger.ZERO;
    BigInteger i = BigInteger.ONE; 
    while(i.compareTo(lim)<0){
      if((n.mod(i).compareTo(BigInteger.ZERO))==0){
        lim = n.divide(i);
        if(!(lim.equals(i))){
          size.add(BigInteger.ONE);
        }
        size.add(BigInteger.ONE);
      }
      i.add(BigInteger.ONE);
    }
    //return size;
    return BigInteger.ONE;
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T08:22:23.837

`i.add(BigInteger.ONE)`不修改 i。相反，它返回一个新对象。将值分配给 i 以获得您想要的效果。代码中的其他类似调用也是如此。

# php - 每 8 个实例去新的 tr

> ID：10380508
> 
> 赞同：1
> 
> 时间：2012-04-30T08:20:35.030
> 
> 标签：php, foreach, html-table

我正在用 PHP 构建一个日历。

在控制器中，我检测到给定月份的天数，并将该范围设置为数组：`daysInMonthArray`。

在视图中，我将`foreach`这个数组输出到每个数字中`<td>`：

```
<tr>
    <?php 
    // output the number of days in the month
        foreach($this->daysInMonthArray as $days1){
            foreach($days1 as $key => $object){
                echo "<td>"  . $object . "</td>"; 
            }
        } ?>
</tr> 
```

我想`<tr>`每隔 8 个号码开始一个新号码，因为一周有 7 天，需要开始新的一行才能开始新的一周。

我尝试封闭一个 if 语句，如果除以 8，则检测输出的剩余部分。如果输出为 0，则换行，如果不是，则继续。但是，这不起作用，因为`<tr>`标签在 php 语句之外。

根据答案和评论，我已将代码更新为：

```
<tr>
        <?php 
        // output the number of days in the month

        foreach($this->daysInMonthArray as $days1){
            foreach($days1 as $key => $object){
                if($object % 8 == 0){
                    echo "</tr><tr><td>" . $object . "</td>";
                }else {
                echo "<td>"  . $object . "</td>"; 
                }
            }
        } ?>
        </tr> 
```

除了一个月的中间两周外，这几乎可以正常工作。它在中间 2 周放置 8 天，但在第一周和最后一周放置 7 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:32:15.813

您自己已经通过以下方式回答了这个问题：

> 这不起作用，因为标签在 php 语句之外

`<tr>`您必须在循环内获取标签。

```
<?php
    $daysInRow = 0;
    // output the number of days in the month
    foreach($this->daysInMonthArray as $days1)
    {
        foreach($days1 as $key => $object)
        {
            if($daysInRow % 7 === 0)
            {
                echo '<tr>';
            }

            echo "<td>"  . $object . "</td>"; 

            if($daysInRow % 7 === 0)
            {
                echo '</tr>';
            }

            if($daysInRow % 7 === 0)
            {
                $daysInRow = 0;
            }
            else
            {
                $daysInRow++;
            }
        }
    }
?> 
```

这是未经测试的代码，可能更简洁，但希望你能明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:42:08.543

您将遇到的一个问题是您将表格嵌套在现有表格中。尝试：

```
<tr><td>
    <?php
      // output the number of days in the month
      foreach($this->daysInMonthArray as $days1){
        echo "<table>";

        $dayofweek = 0;
        foreach($days1 as $key => $object){
          if($dayofweek%7 == 0)
            echo "<tr>";

          echo "<td>" . $object . "</td>";

          if($dayofweek%7 == 0)
            echo "</tr>";

          $dayofweek++;               
        }

        if($dayofweek%7 != 0) //last tr
          echo "</tr>";

        echo "</table>";
      }
    ?>
</td></tr> 
```

# scala - Casbah Scala MongoDB 驱动程序 - 一个奇怪的错误

> ID：10380509
> 
> 赞同：1
> 
> 时间：2012-04-30T08:20:39.993
> 
> 标签：scala, mongodb, casbah

我正在尝试使用 Casbah，一开始我在这一行遇到了一个奇怪的错误：

```
val mongoDB = MongoConnection("MyDatabase") 
```

MongoConenction 上的错误说：

> MongoConnection 所需的类文件丢失。com.mongodb 包的引用类型 MongoOptions 引用不存在的符号。

我不知道该怎么办。我附加到我的项目的罐子是：

```
casbah-commons_2.9.1-3.0.0-SNAPSHOT.jar
casbah-core_2.9.1-3.0.0-SNAPSHOT.jar
casbah-gridfs_2.9.1-3.0.0-SNAPSHOT.jar
casbah-query_2.9.1-3.0.0-SNAPSHOT.jar
casbah-util_2.9.1-3.0.0-SNAPSHOT.jar 
```

这看起来像是 Casbah 的完整设置，我不明白它可能渴望什么。所以有第一个问题 - 我必须做些什么来解决这个问题？

第二个问题是 - Casbah[教程](http://api.mongodb.org/scala/casbah/2.1.5.0/tutorial.html#import-the-driver)说我可以只导入一件事，然后获取`mongoConn()`方法，这也不是事实。如果我按照说明进行操作，`mongoConn()`根本找不到。那么，我怎样才能让每个人都能像教程中那样工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:20:19.943

我不知道您设置的详细信息，但您似乎没有引用 casbah-commons 模块的依赖项。

根据[文档](http://api.mongodb.org/scala/casbah/2.1.5.0/setting_up.html#id1)，这些是：

> mongo-java-driver, scalaj-collection, scalaj-time, JodaTime, slf4j-api

# android - 任何替代方法来获取存储图片的文件路径

> ID：10380515
> 
> 赞同：0
> 
> 时间：2012-04-30T08:21:04.963
> 
> 标签：android, camera

此路径适用于某些设备来获取捕获图像的路径，但这不适用于所有设备，因为有些设备不包含`dcim`它自己的文件。所以我需要动态获取所有设备的路径有没有办法使用任何 api 来做到这一点。谢谢。

```
 File path = Environment
                .getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM
                        + "/Camera"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:47:19.353

您可以使用 managedQuery 查询内容解析器。它将返回一个光标，您可以通过该光标访问图像/视频/声音文件。

# php - 将在 android 应用程序中捕获的文件上传到桌面上的远程服务器

> ID：10380516
> 
> 赞同：0
> 
> 时间：2012-04-30T08:21:06.183
> 
> 标签：php, android

我刚刚完成了我的 android 应用程序，它使用本机手机摄像头拍照并录制视频。我现在想用我的手机在我的本地网站上远程上传这些项目（Apache 作为网络服务器，MySQL 作为数据库脚本语言是 php）。但是，该网站在本地运行。我希望创建一个临时的。有人可以帮我用正确的参数在我的手机上编程我的提交按钮，以便成功地将我的数据上传到我的本地 Web 应用程序上。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:41:51.297

正如@Antrromet 所说，您必须使用 HttpPost 和[Multipart](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)发送文件。

`Bitmap`这是使用[httpmime](http://hc.apache.org/httpcomponents-client-ga/httpmime/dependencies.html) apache 库以多部分方式发送 a 的方法示例（查看[MultipartEntity](http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/MultipartEntity.html)）：

```
public String doHttpMultipart(String url, 
                              List<NameValuePair> pairs,
                              Bitmap bitmap,
                              String fileName) throws IOException, 
                                            ClientProtocolException,
                                            UnsupportedEncodingException {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();        
        bitmap.compress(CompressFormat.PNG, 100, bos);
        byte[] imageData = bos.toByteArray();
        ByteArrayBody byteArrayBody = new ByteArrayBody(imageData, fileName);
        MultipartEntity reqEntity = 
                    new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        reqEntity.addPart("image", byteArrayBody);

        for(NameValuePair p : pairs) {
            reqEntity.addPart(p.getName(), new StringBody(p.getValue()));
        }

        HttpPost request = new HttpPost(url);
        request.setEntity(reqEntity);

        HttpClient client = new DefaultHttpClient();
        HttpResponse httpResponse = client.execute(request);

        String response = "";
        BufferedReader in = null;

        try {
            response = super.readHttpStream(response, in, httpResponse);    
        } catch(IllegalStateException e) {
            throw new IllegalStateException();
        } catch(IOException e) {
            throw new IOException();
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        return response;
    } 
```

在这种方法中，我还随请求发送了一个参数列表，并从服务器读取响应。

在后端，您将收到[$_FILES](http://www.php.net/manual/en/reserved.variables.files.php)变量中的二进制数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:53:14.510

要在 android 中上传图像或视频，通常会使用 Multipart 请求，请查看该请求。 [此链接](http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/)对 android 中的 multipart 进行了基本介绍。

# spring - 用于非 Web Spring/Hibernate 应用程序的应用程序服务器

> ID：10380517
> 
> 赞同：2
> 
> 时间：2012-04-30T08:21:09.620
> 
> 标签：spring, hibernate, algorithmic-trading, non-web

我们正在开发一个基于 Springframework 和 Hibernate 的开源交易平台[http://code.google.com/p/algo-trader/](http://code.google.com/p/algo-trader/)和[http://www.algotrader.ch](http://www.algotrader.ch)。该应用程序由一个交易框架和几个可以独立启动的策略组成。到目前为止，这些不同的部分一直运行在不同的 JVM 中，通过 RMI 和 JMS 进行通信。

为了避免不必要的序列化和网络开销，我们希望在某种容器（可能是应用程序服务器）中运行整个应用程序。然而，我们确实有要求，应用程序的各个部分可以独立部署、启动和停止。

我们已经研究过 OSGi，但是我们使用的很多库还没有准备好 OSGi，所以目前这不是一个选项。另请注意，我们的应用程序中没有 web-GUI。

对此有何建议？谢谢安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:29:37.440

如果 OSGI 不是一个选项，则可以将功能分解为更小的单元，然后将它们部署为实用程序 jar，如果部署为实用程序 jar，它们可以独立管理。

对于应用程序服务器，我觉得 glassfish 或 Jboss 都是一个不错的选择，因为它们是开源和免费的。

尽管稍后您可以使用 Weblogic（免费开发）进行检查。

因此，在您的情况下，您希望将静态数据配置（交易对手、货币）、交易（定价、报价、预订）作为两个独立的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:33:56.390

对于您选择的应用程序服务器，我建议您使用 Jboss，特别是在他的 7.1 版中，它更快、更稳定！

# android - Android中的色调效果

> ID：10380518
> 
> 赞同：3
> 
> 时间：2012-04-30T08:21:13.820
> 
> 标签：android, image, tint

我需要**在 Android 中对图像应用色调效果**。但色调效果只会有**橙色**色调。如果有人做过这种效果，请帮助我。

我已经看到通过搜索色调效果找到的所有网络链接，但所有链接和资源都应用了所有颜色色调。

我需要在搜索栏进度上实现这种效果。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T08:08:24.257

我已经做到了，这是代码。它在搜索栏进度上完成并在图像上生成黄色效果。

```
skTint.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar arg0) {
        }

        @Override
        public void onStartTrackingTouch(SeekBar arg0) {
        }

        @Override
        public void onProgressChanged(SeekBar arg0, int progress,
                boolean arg2) {
            skTint.setProgress(progress);
            String hex = Integer
                    .toHexString((progress - 255 < 0 ? (progress - 255)
                            * -1 : (progress - 255)));
            hex = (hex.length() == 1 ? "0" + hex : hex);
            hex = (hex.length() > 2 ? hex.substring(0, 1) : hex);

            String g_factor = Integer
                    .toHexString((int) (255 - (progress / 3)));
            g_factor = (g_factor.length() == 1 ? "0" + g_factor : g_factor);

            String colorcode = "#FFFF" + g_factor + hex;

            Bitmap alteredBitmap = Bitmap.createBitmap(
                    resized_bitmap.getWidth(), resized_bitmap.getHeight(),
                    resized_bitmap.getConfig());
            Canvas canvas = new Canvas(alteredBitmap);
            Paint paint = new Paint();
            ColorFilter cf = new PorterDuffColorFilter(Color
                    .parseColor(colorcode), Mode.MULTIPLY);
            paint.setColorFilter(cf);
            Matrix matrix = new Matrix();
            canvas.drawBitmap(resized_bitmap, matrix, paint);
            imgeffect.setImageBitmap(alteredBitmap);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-26T04:13:07.063

`SeekBar`默认情况下使用应用程序的`R.attr.colorAccent`主题属性作为小部件的色调颜色。为了更改小部件的强调色，您可以使用主题覆盖，如下所示：

```
<style name="SeekBarLightTheme" parent="ThemeOverlay.AppCompat.Light">
    <item name="colorAccent">@color/seek_bar_color</item>
</style> 
```

然后在您的布局 XML 中：

```
<SeekBar
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    ...
    android:theme="@style/SeekBarLightTheme"/> 
```

# javascript - Firefox中的onchange被触发而不改变

> ID：10380522
> 
> 赞同：3
> 
> 时间：2012-04-30T08:21:32.667
> 
> 标签：javascript, firefox, select, dom-events, onchange

我有一个选择，为其`onchange`设置了一个事件。
问题是，仅在 Firefox（FF v. 12）中，`onchange`即使用户没有单击任何选项，也会触发事件；只需悬停该选项就足以触发它。

即：如果用户单击选择，悬停选项之一，然后他在选择之外单击，则选择的值会更改（即使显示的值没有）因此触发事件。

如果选择的元素之一已被选中，则不会发生这种情况。该行为与此 Mozilla 错误中的行为或多或少相同： [https ://bugzilla.mozilla.org/show_bug.cgi?id=265047](https://bugzilla.mozilla.org/show_bug.cgi?id=265047)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:11:24.893

这肯定是 Firefox 中的一个错误，当没有定义选定的索引时，它会在悬停项目时分配选定的值和选定的索引。

虽然我无法修复该错误，但一个非常简单且有效的解决方法是将空的和隐藏的项目添加到列表中作为第一项并将其分配为选定的项目。

例如：

```
<select id="mySelect">
    <option value="" style="display: none;"></option>
    <option value="1">first</option>
    <option value="2">second</option>
</select> 
```

用户不会看到任何变化，当您“清除”选择时，将所选索引分配为 0 而不是 -1，例如

```
var oDDL = document.getElementById("mySelect");
oDDL.selectedIndex = 0; 
```

[实时测试用例](http://jsfiddle.net/BRLT9/3/)- 现在即使在 Firefox 上也能正常运行。

**更新**- 上面的代码在 IE8 中无法正常工作，因为它仍然显示第一个空选项。为了解决这个问题，当浏览器不是 Firefox 时，可以简单地在所有支持它的浏览器中*删除该选项。*更新的代码将是：

```
navigator.sayswho = (function(){
    var N = navigator.appName, ua= navigator.userAgent, tem;
    var M = ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
    if (M && (tem = ua.match(/version\/([\.\d]+)/i)) != null) M[2] = tem[1];
    M = M? [M[1], M[2]]: [N, navigator.appVersion, '-?'];
    return M;
})();

window.onload = function() {
    var oDDL = document.getElementById("mySelect");
    oDDL.selectedIndex = 0;
    var blnFirefox = (navigator.sayswho[0].toLowerCase().indexOf("firefox") >= 0);
    if (!blnFirefox && oDDL.remove) {
        oDDL.remove(0);
        oDDL.selectedIndex = -1;
    }
    oDDL.onchange = function() {
        alert("hello");
    };
}; 
```

识别浏览器的功能取自[this answer](https://stackoverflow.com/a/5918791/447356)。

[更新小提琴](http://jsfiddle.net/BRLT9/5/)- 在 Firefox、Chrome、IE9 和 IE8 中工作。

# php - cookie_httponly 和闪存？

> ID：10380524
> 
> 赞同：1
> 
> 时间：2012-04-30T08:21:39.040
> 
> 标签：php, flash, cookie-httponly

`cookie_httponly`如果我在 PHP 中设置选项，flash 会不会有问题？

Flash 是否仍会通过会话向其发送 POST 请求？

我知道这是您可以轻松尝试的东西，但我对 Flash 了解不多，我担心我可能会破坏某些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:38:55.663

好吧，我认为这是一个愚蠢的问题。

`cookie_httponly`确实会改变浏览器的行为，并且不应以任何方式影响 Flash。会话 id 仍将在 http 标头中传输。

# facebook - Facebook 上的添加到时间线弃用。如何更换它？

> ID：10380525
> 
> 赞同：3
> 
> 时间：2012-04-30T08:21:43.303
> 
> 标签：facebook, facebook-graph-api, button, user-interface, facebook-timeline

根据[文档](https://developers.facebook.com/docs/reference/plugins/add-to-timeline/)，“添加到时间线”按钮将于 2012 年 8 月弃用。不幸的是，没有关于如何实现相同功能的指导。令人困惑的是，[Open Graph 教程](http://hhttps://developers.facebook.com/docs/opengraph/tutorial/ttp://)使用了该按钮（这似乎是不明智的，因为它将在几个月内被破坏）。由于我现在正在编写一个新的操作/时间线实现，因此我不会包含我必须在几个月内删除的内容。AJAX 和 PHP-SDK 一切正常，只有两个问题仍未解决（我想按钮可以处理）：

1.  无法判断一个动作是否已经发布。我已经启用了“唯一”，但如果“添加到时间线”选项已经发布，我无法隐藏它。

2.  没有很好的视觉效果。我可以渲染当前（即将被弃用）按钮并窃取图像，但我更喜欢使用看起来与其他网站相同的东西，让用户感到舒适，因为他们知道点击时会发生什么。

Facebook 有这个按钮的替代品吗？还是所有时间线帖子都应该在初始许可授予后静默发生？我认为 Facebook 鼓励更多用户对时间线操作的认可——该控制应该去哪里？第三方 UI 元素？这难道不会削弱 Facebook 生态系统的一些力量——事实上，它是在网络上随处具有相同行为的相同按钮？它现在呈现的方式有点令人沮丧 - 在教程中将您推向一个方向只是告诉您该功能将在几个月内被弃用。我基本上已经放弃了对问题 #1 的希望，但是是否有一个官方不弃用的按钮可以给我一个舒适的视觉效果？

此外，此按钮是否还有其他功能正在/已经过渡到其他插件？

编辑：将“喜欢”按钮链接到时间线事件是否有意义？从语义上讲，这似乎是有道理的，但似乎没有任何内置的方法可以做到这一点。

# iphone - OpenAL 在循环声音时出现故障

> ID：10380530
> 
> 赞同：6
> 
> 时间：2012-04-30T08:22:09.637
> 
> 标签：iphone, ios, openal

我正在使用 openAL 为我的游戏播放声音，但我遇到了一些问题，有时循环播放时会出现小故障。同样没有循环我得到一个小流行......有时但不是全部。

我认为这与缓冲区有点太长有关，所以最后会有一些未定义的数据。我只是不知道如何改变这一点。我正在用这个函数加载一个caf文件：

```
void* MyGetOpenALAudioData(CFURLRef inFileURL, ALsizei *outDataSize, ALenum *outDataFormat, ALsizei *outSampleRate, ALdouble *duration) {
OSStatus                        err = noErr;    
SInt64                          theFileLengthInFrames = 0;
AudioStreamBasicDescription     theFileFormat;
UInt32                          thePropertySize = sizeof(theFileFormat);
ExtAudioFileRef                 extRef = NULL;
void*                           theData = NULL;
AudioStreamBasicDescription     theOutputFormat;

// Open a file with ExtAudioFileOpen()
err = ExtAudioFileOpenURL(inFileURL, &extRef);
if(err) { printf("MyGetOpenALAudioData: ExtAudioFileOpenURL FAILED, Error = %ld\n", err); goto Exit; }

// Get the audio data format
err = ExtAudioFileGetProperty(extRef, kExtAudioFileProperty_FileDataFormat, &thePropertySize, &theFileFormat);
if(err) { printf("MyGetOpenALAudioData: ExtAudioFileGetProperty(kExtAudioFileProperty_FileDataFormat) FAILED, Error = %ld\n", err); goto Exit; }
if (theFileFormat.mChannelsPerFrame > 2)  { printf("MyGetOpenALAudioData - Unsupported Format, channel count is greater than stereo\n"); goto Exit;}

// Set the client format to 16 bit signed integer (native-endian) data
// Maintain the channel count and sample rate of the original source format
theOutputFormat.mSampleRate = theFileFormat.mSampleRate;
theOutputFormat.mChannelsPerFrame = theFileFormat.mChannelsPerFrame;

theOutputFormat.mFormatID = kAudioFormatLinearPCM;
theOutputFormat.mBytesPerPacket = 2 * theOutputFormat.mChannelsPerFrame;
theOutputFormat.mFramesPerPacket = 1;
theOutputFormat.mBytesPerFrame = 2 * theOutputFormat.mChannelsPerFrame;
theOutputFormat.mBitsPerChannel = 16;
theOutputFormat.mFormatFlags = kAudioFormatFlagsNativeEndian | kAudioFormatFlagIsPacked | kAudioFormatFlagIsSignedInteger;

// Set the desired client (output) data format
err = ExtAudioFileSetProperty(extRef, kExtAudioFileProperty_ClientDataFormat, sizeof(theOutputFormat), &theOutputFormat);
if(err) { printf("MyGetOpenALAudioData: ExtAudioFileSetProperty(kExtAudioFileProperty_ClientDataFormat) FAILED, Error = %ld\n", err); goto Exit; }

// Get the total frame count
thePropertySize = sizeof(theFileLengthInFrames);
err = ExtAudioFileGetProperty(extRef, kExtAudioFileProperty_FileLengthFrames, &thePropertySize, &theFileLengthInFrames);
if(err) { printf("MyGetOpenALAudioData: ExtAudioFileGetProperty(kExtAudioFileProperty_FileLengthFrames) FAILED, Error = %ld\n", err); goto Exit; }

// Read all the data into memory
UInt32      dataSize = theFileLengthInFrames * theOutputFormat.mBytesPerFrame;;
theData = malloc(dataSize);
if (theData)
{
    AudioBufferList     theDataBuffer;
    theDataBuffer.mNumberBuffers = 1;
    theDataBuffer.mBuffers[0].mDataByteSize = dataSize;
    theDataBuffer.mBuffers[0].mNumberChannels = theOutputFormat.mChannelsPerFrame;
    theDataBuffer.mBuffers[0].mData = theData;

    // Read the data into an AudioBufferList
    err = ExtAudioFileRead(extRef, (UInt32*)&theFileLengthInFrames, &theDataBuffer);
    if(err == noErr)
    {
        // success
        *outDataSize = (ALsizei)dataSize;
        *outDataFormat = (theOutputFormat.mChannelsPerFrame > 1) ? AL_FORMAT_STEREO16 : AL_FORMAT_MONO16;
        *outSampleRate = (ALsizei)theOutputFormat.mSampleRate;
    }
    else 
    { 
        // failure
        free (theData);
        theData = NULL; // make sure to return NULL
        printf("MyGetOpenALAudioData: ExtAudioFileRead FAILED, Error = %ld\n", err); goto Exit;
    }   
}

// Alex(Colombiamug): get the file duration...
// first, get the audioID for the file...
AudioFileID audioID;
UInt32 audioIDSize = sizeof(audioID);
err = ExtAudioFileGetProperty(extRef, kExtAudioFileProperty_AudioFile, &audioIDSize, &audioID);
if(err) { printf("MyGetOpenALAudioData: ExtAudioFileGetProperty(kExtAudioFileProperty_AudioFile) FAILED, Error = %ld\n", err); goto Exit; }

//now the duration...
double soundDuration;
UInt32 durationSize = sizeof(soundDuration);
err = AudioFileGetProperty(audioID, kAudioFilePropertyEstimatedDuration, &durationSize, &soundDuration);
if(err) { printf("MyGetOpenALAudioData: AudioFileGetProperty(kAudioFilePropertyEstimatedDuration) FAILED, Error = %ld\n", err); goto Exit; }

*duration = soundDuration;
//printf("Audio duration:%f secs.\n", soundDuration); 
```

Exit: // 释放 ExtAudioFileRef，不再需要 if (extRef) ExtAudioFileDispose(extRef); 返回数据；}

它是这个声音引擎的一部分：[SoundEngine](http://homepage.mac.com/alexrestrepo/files/SoundEngine.zip)

我试图将我的 caf 文件直接放入示例代码中，这是同样的小故障。（这个 caf 文件在旧的 Apple SoundEngine.cpp 上运行良好，但我有其他问题，所以我决定改变）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T21:16:51.387

回答我自己的问题；）

幸运的是，我必须承认我试图从这一行中删除 kAudioFormatFlagIsPacked 标志：

```
theOutputFormat.mFormatFlags = kAudioFormatFlagsNativeEndian | kAudioFormatFlagIsPacked | kAudioFormatFlagIsSignedInteger; 
```

并修复了它。

如果有人能告诉我为什么很高兴知道..或者如果删除该标志有一些问题，我也想听听。

# c# - C# 在线程中创建新表单

> ID：10380531
> 
> 赞同：0
> 
> 时间：2012-04-30T08:22:14.957
> 
> 标签：c#, multithreading, forms

我有一个 TCP 服务器应用程序，并且有一个用于与 TCP 客户端通信的线程。当我从客户端收到数据时，我想使用此数据创建一个新表单，但我无法在线程中创建表单。我可以使用按钮单击事件轻松创建表单。

我哪里错了？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:28:45.003

为了避免这种情况，最好让应用程序的原始 UI 线程来处理新表单的创建，而不是有多个 UI 线程。幸运的是，您可以在该线程上调用操作。

请参阅[此处](https://stackoverflow.com/questions/2367718/c-automating-the-invokerequired-code-pattern)了解如何在 WinForms 上执行此操作或[在此处](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)在 WPF/Silverlight 中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:40:44.473

完成这项工作的示例代码：

```
 private void Button1_Click(object sender, EventArgs e)
{
    Thread t1 = new Thread(StartMe);
    t1.Name = "Custom Thread";
    t1.IsBackground = true;
    t1.Start();
}

private void StartMe()
{
    //We are switching to main UI thread.
    TextBox1.Invoke(new InvokeDelegate(InvokeMethod), null); 
}

public void InvokeMethod()
{
    //This function will be on main thread if called by Control.Invoke/Control.BeginInvoke
    MyForm frm = new MyForm();
    frm.Show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:35:28.080

您必须在某处将上下文更改为 GUI 线程以创建新表单 - 在某处，您将需要 BeginInvoke() 一些东西。

这是什么类型的服务器 - 是一个“经典”同步服务器，其中每个客户端连接都有一个侦听线程和一个服务器<>客户端线程？

您不想在客户端连接时创建表单，您只想在连接的客户端特别询问时创建此表单，是吗？

# python - 创建时 Python 奇怪的文件名

> ID：10380537
> 
> 赞同：1
> 
> 时间：2012-04-30T08:22:48.523
> 
> 标签：python

我有一个包含 html/doc 文件列表的 txt 文件，我想使用 python 下载它们并将它们保存为 1.html、2.doc、3.doc、...

```
http://example.com/kran.doc
http://example.com/loj.doc
http://example.com/sks.html 
```

我已经设法创建了功能齐全的脚本，除了 python 总是会在新创建的文件的末尾添加问号（如果你从 linux 看），如果你从 windows 看，文件名将类似于**5CFB43~X**

```
import urllib2
st = 1;
for line in open('links.txt', 'r'):
        u = urllib2.urlopen(line)
        ext = line.split(".")
        imagefile = str(st)+"."+ext[-1]
        #file created should be something.doc but its something.doc? -> notice question mark
        fajl = open(imagefile, "w+")
        fajl.write(u.read())
        fajl.close()
        print imagefile
        st += 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:24:35.393

行终止符是*两个*字符，而不是一个。

```
for line in open('links.txt', 'rU'): 
```

但现在不是了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:28:03.933

工作`line.strip()`而不是`line`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T08:26:22.197

那是因为以这种方式读取的行将`'\n'`在最后结束，因此`?`

只需在循环的开头添加以下内容：

```
if line.endswith('\n'):
    line = line[:-1] 
```

或者正如 AKX 在评论中指出的那样，只是：

```
line = line.rstrip('\r\n') 
```

所以你涵盖了任何类型的行尾。

# spring - Spring 和 Java EE 中的 @PersistenceContext EntityManager 线程安全

> ID：10380539
> 
> 赞同：14
> 
> 时间：2012-04-30T08:22:52.750
> 
> 标签：spring, thread-safety, jpa-2.0, java-ee-6, entitymanager

`EntityManager`根据定义，它**不是线程安全的。**Servlets 规范说，在非分布式环境中并且没有实现`SingleThreadModel`，**每个定义只有一个 servlet 实例**。

因此，在 Java EE 中，当您`EntityManager`通过`@PersistenceContext`Servlet 的字段注入一个 - 它不是线程安全的：

```
public class MyServlet extends HttpServlet {

    // Not thread-safe, should be using EMF instead.
    @PersistenceContext
    private EntityManager em;
} 
```

1.  这是正确的说法，即使 Spring bean 的默认范围是单例的，它`EntityManager`是线程安全的，因为 Spring 使用它`ThreadLocal`来绑定它的事务和`EntityManager`它？

2.  上面的 Servlets 示例在 Spring 中仍然有效吗？它仍然不是线程安全的吗？

3.  该方法是否`ThreadLocal`仅适用于 Spring 托管 bean，而普通 servlet 不是其中之一？

4.  据我记得，注入`EntityManager`. 在 Glassfish Java EE 实现中，发现`@PersistenceContext`as 注入点的是应用服务器。
    春天的时候是什么样子的？Spring Framework 是负责发现这些注释还是由 JPA 实现者负责？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T08:35:23.230

问题 2、3 和 4——Spring 不关注任何不是 Spring Bean 的类。因此 Spring 不关注你的`MyServlet`类。因此答案为

*   2) 没有
*   3) 只有 Spring 托管的 Bean
*   4）这是Springs的责任，因为Spring是Container

对于问题 1）。它以这种方式工作，因此使用 Spring Injected Entity Manager 可以有效地节省线程。

# opengl-es - OpenGL ES glPushClientAttrib

> ID：10380543
> 
> 赞同：2
> 
> 时间：2012-04-30T08:23:07.960
> 
> 标签：opengl-es

我正在考虑将一些 OpenGL 代码移植到 OpenGL ES，并且想知道这段代码到底做了什么：

```
glPushClientAttrib(GL_CLIENT_VERTEX_ARRAY_BIT) 
```

因为 OpenGL ES 中不存在 glPushClientAttrib。我知道它保存了 OpenGL 状态机的状态，但我似乎无法找到`GL_CLIENT_VERTEX_ARRAY_BIT`标志的确切机制。

我猜它保存了最后一个顶点数组指针？

进一步调查显示 VBO（顶点缓冲区对象）是常用的。这会将指针字段更改为`glVertexPointer`偏移量。`glPushClientAttrib(GL_CLIENT_VERTEX_ARRAY_BIT)`这个（和相关的功能`glBindBuffer`， ）的行为如何`glBufferData`？

编辑：只是为了澄清：

```
gl*Pointer() #1
glPushClientAttrib(*)
gl*Pointer() #2
glPopClientAttrib() <-- this is effectively calling #1 again or resetting to whatever #1 was 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:30:02.220

glPushClientAttrib(GL_CLIENT_VERTEX_ARRAY_BIT) 保存所有顶点数组属性的所有客户端状态。因此，您使用 glEnableClientState/glDisableClientState 和 gl*Pointer 函数设置的所有内容。它不会复制实际数据。它也不会保存使用 glBindBuffer/glBufferData 设置的任何内容，因为这些将是服务器端状态。在普通的OpenGL中可能有一个glPushAttrib的枚举（OpenGL ES中也没有glPushAttrib）。

我猜这里 VBO 和顶点数组之间的区别在于 VBO 将它们的实际数据存储在图形内存中，而顶点数组在绘制它们时必须流式传输到图形卡。但是，当您使用 VBO 时，指针和启用的标志仍将与 glPushClientAttrib 一起保存。

对于 OpenGL ES，如果您想返回上一个状态，您必须自己跟踪状态。或者更好的是，在完成后将所有内容设置为默认值（为所有启用的顶点数组调用 glDisableClient 就足够了）。

# iphone - 应用程序在后台时获取屏幕截图？（允许私有 API）

> ID：10380553
> 
> 赞同：4
> 
> 时间：2012-04-30T08:23:58.460
> 
> 标签：iphone, objective-c, ios, ipad, iphone-privateapi

我正在为 iPad 开发一个监控应用程序。它已经使用私有框架来发送人工事件和模拟用户输入，而我的应用程序在后台，另一个应用程序在前台。

现在我的问题是，我需要以编程方式获取 iPad 的屏幕截图作为图像。我知道 UIGetScreenImage 方法，并且还渲染屏幕上的每个视图以获取图像。但是，不能从后台调用 UIGetScreenImage。（当我从后台尝试时，我收到一条错误消息）而且我无法从另一个应用程序渲染视图，因为我只知道我的应用程序的视图。

选项 1 我可以模拟点击主页和锁定键，以便 iPad 生成屏幕截图。之后，我使用私有 API 从相册访问此图像，使用 [PLPhotoLibrary](https://github.com/nst/iOS-Runtime-Headers/blob/3686717e107fa36a990fac20c30da2da9a25b698/PrivateFrameworks/PhotoLibrary.framework/PLPhotoLibrary.h) 、[PLPhotoAlbum](https://github.com/nst/iOS-Runtime-Headers/blob/3686717e107fa36a990fac20c30da2da9a25b698/PrivateFrameworks/PhotoLibrary.framework/PLPhotoAlbum.h)和[PLPhoto](https://github.com/nst/iOS-Runtime-Headers/blob/3686717e107fa36a990fac20c30da2da9a25b698/PrivateFrameworks/PhotoLibrary.framework/PLPhoto.h)。

```
id lib = [PLPhotoLibrary sharedPhotoLibrary];
id allPhotosAlbum = [lib allPhotosAlbum];
id contents = [lib albumContents];
id lastPhoto = [contents objectAtIndex:[contents count] -1];
UIImage *screenshot = [lastPhoto newFullSizeImage]; 
```

这种方法的唯一问题是截图会堆积在相册上，填满 iPad 的内存。所以要么我需要另一种方法，要么我需要一种方法来删除这些图片。但是，当我调用相册和照片库中的删除方法时，我得到一个“SQLITE 错误 8 [尝试写入只读数据库]

任何有关如何以更好的方式实现此屏幕截图的建议将不胜感激。

我不会将此应用程序上传到应用程序商店。它是供私人使用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-01T11:24:04.393

过去，您可以使用 IOSurface 从前景或背景捕获整个设备屏幕的屏幕截图。Apple 在 iOS 9 中阻止了该 API。如果不越狱您的设备，无论是否为私有 API，都不再可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:52:49.127

越狱你的设备可能是唯一的办法，我不建议这样做。

但是，Apple 从未打算让人们（无论是否为开发人员）以您描述的方式使用他们的 iPad。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T14:07:01.067

经过大量测试和尝试，我得出结论，即使使用私有 API 从相册中删除照片也是一个太大的问题，甚至是不可能的。我最终编写了一个脚本来模拟用户输入并删除照片。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T23:01:19.887

您可以使用以下私有 API： [[UIWindow class] performSelector:@selector(createScreenIOSurface)];

# c# - 将列表添加到系统属性中

> ID：10380563
> 
> 赞同：2
> 
> 时间：2012-04-30T08:24:38.287
> 
> 标签：c#, mef

我创建了作为 MEF 一部分的自定义属性，我想在其中定义与类相关的 id 列表，以便可以查询它们。

此外，该类必须在其自身中包含定义，这很重要，这就是我考虑使用的原因：

```
[SignalSystemData("ServiceIds", new List<int>(){1})] 
```

我该如何进行？

我的搜索实现如下：

```
 var c = new Class1();
        var v = c.EditorSystemList;

        foreach (var lazy in v.Where(x=>x.Metadata.LongName=="ServiceIds"))
        {
            if (lazy.Metadata.ServiceId.Contains(serviceIdToCall))
            {
                var v2 = lazy.Value;
                // v2 is the instance of MyEditorSystem
                Console.WriteLine(serviceIdToCall.ToString() + " found");

            }else
            {
                Console.WriteLine(serviceIdToCall.ToString() + " not found");
            }
        } 
```

我的带有定义的导出类应该如下所示：

```
[Export(typeof(IEditorSystem))]
[SignalSystemData("ServiceIds", new List<int>{1})]
public class MyEditorSystem1 : IEditorSystem
{
    void test()
    {
        Console.WriteLine("ServiceID : 1");
    }
}

public interface IEditorSystem
{
}

[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class SignalSystemDataAttribute : ExportAttribute
{
    public SignalSystemDataAttribute(string longName, List<int> serviceId)
        : base(typeof (IEditorSystem))
    {
        LongName = longName;
        ServiceId = serviceId;
    }

    public string LongName { get; set; }
    public List<int> ServiceId { get; set; }

}

public interface IEditorSystemMetadata
{
    string LongName { get; }
    List<int> ServiceId { get; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:58:50.943

要解决编译时间常数问题，您有以下选择：

*   使用特殊格式的字符串（即逗号分隔的整数列表，正如您已经建议的那样）。
*   使用多个重载，每个重载都有不同数量的 ID 参数。如果您要传递的 ID 太多，这将变得一团糟。
*   用作`params int[] ids`构造函数的最后一个参数。这将起作用，但不符合 CLS - 如果这对您很重要。
*   最容易使用数组`int []`参数。

当然，您也可以使用上述组合。有几个带有 1 到 5 个 ID 参数的重载，并`params int[]`为那些（希望如此）极端情况提供字符串参数或参数，其中重载参数不够用。

**更新**：刚刚找到[这个](https://stackoverflow.com/q/270187/21567)问题/答案。可能不会重复，但处理相同的问题（大部分）。

# spring - Persistence 1.0/2.0 XSD 宕机了？

> ID：10380565
> 
> 赞同：0
> 
> 时间：2012-04-30T08:24:50.477
> 
> 标签：spring, persistence

我创建了一个 spring 项目，后来我将其部署在 glassfish 上，该应用程序最初正在运行。但是当我添加persistence.xml 时，需要几分钟才能完成错误。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="sidoPU" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>myDatasource</jta-data-source>
        <properties>
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect" />
            <property name="hibernate.hbm2ddl.auto" value="create-drop" />
            <property name="hibernate.transaction.manager_lookup_class"
                value="org.hibernate.transaction.SunONETransactionManagerLookup" />
            <property name="hibernate.transaction.factory_class"
                value="org.hibernate.transaction.JTATransactionFactory" />
        </properties>
    </persistence-unit>
</persistence> 
```

浏览时：http: [//java.sun.com/xml/ns/persistence](http://java.sun.com/xml/ns/persistence) http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd，加载不出来。

关于这个问题的任何想法或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:22:13.757

我认为这与整个 java.net、java.sun.com、Kenai 项目等由于维护原因而停机有关。

[https://blogs.oracle.com/theaquarium/entry/outage_on_java_net_apr](https://blogs.oracle.com/theaquarium/entry/outage_on_java_net_apr)

# php - 如果 POST 变量等于然后重定向

> ID：10380566
> 
> 赞同：1
> 
> 时间：2012-04-30T08:24:51.627
> 
> 标签：php

我试图获取表单帖子值，如果它们符合某些条件，则仅重定向我的页面似乎不...

我有一个包含多个输入字段的表单

***HTML***

```
<form method="post" action="?page_id=151">

  <div style="display: block;" id="Q1">
                    <label for="vehicleType">1\. What type of vehicles do you have?</label>
                    <select id="vehicleType" name="vehicleType">
                        <option selected="selected" value="choose">Please choose</option>
                        <option value="hgv">HGV</option>
                        <option value="psv">PSV</option>
                        <option value="lgv">LGV</option>
                        <option value="car">Car</option>                            
                        <option value="mixed">Mixed Fleet</option>
                    </select>
                </div>

                <div id="Q2group1">
                    <label for="coverageRegion">2\. Do you require national or international coverage?</label>
                    <select id="coverageRegion" name="coverageRegion">
                        <option selected="selected" value="choose">Please choose</option>
                        <option value="national">National</option>  
                        <option value="international">International</option>
                    </select>
                </div>

                <div id="Q2others">
                    <label for="pricing">2\. Do you prefer a fixed weekly price or a pump-related price?</label>
                    <select id="pricing" name="pricing">
                        <option selected="selected" value="choose">Please choose</option>
                        <option value="fixed">Weekly fixed price</option>  
                        <option value="pump">Pump-related price</option>
                    </select>
                </div>

                <div id="Q3group1">
                    <label for="locationType">3\. What type of site do you prefer?</label>
                    <select id="locationType" name="locationType">
                        <option selected="selected" value="choose">Please choose</option>
                        <option value="truckstops">Truck stops at lowest price</option>  
                        <option value="motorway">Branded motorway sites</option>
                    </select>
                </div>

             <div id="Q3others">
                    <label for="siteCoverage">3\. What site coverage do you need?</label>
                    <select id="siteCoverage" name="siteCoverage">
                        <option value="choose">Please choose</option>
                        <option value="countysites">County</option>
                        <option value="nationalsites">National</option>
                    </select>
                </div>

                <div id="Q4others">
                    <label for="county">4\. Select your county:</label>
                    <select id="county" name="county">
                        <option value="choose">Please choose</option>
                        <optgroup label="England">
                            <option>Bedfordshire</option>
                            <option>Berkshire</option>
                            <option>Bristol</option>
                            <option>Tyrone</option>
                        </optgroup>
                    </select></div>

                <div id="searchbuttondiv"> <input type="submit" id="searchbutton" onclick="_gaq.push(['_trackEvent', 'Fuel Card Search', 'Homepage Select Criteria'])">    </div>   

            </form> 
```

***PHP***

```
if ($_POST['vehicleType'] == 'car' && $_POST['pricing'] == 'fixed' && $_POST['coverageRegion'] == 'national') {
        echo '<script>alert("hi");</script>';
        // header('Location: /car-weekly-national/');
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:33:40.110

您的条件之一是下降（并且因为它们都受 AND 约束，所以所有 if 语句都失败了。

有一个 else 语句，你 var_dump 所有相关变量，看看有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:46:47.590

对不起大家，我的疏忽，我正在检查是否发布了错误的变量，如果不是为了添加else语句的建议，我不会找到它，谢谢！

# java - 将 byte[] 转换为 AES 密钥

> ID：10380570
> 
> 赞同：2
> 
> 时间：2012-04-30T08:25:07.253
> 
> 标签：java

我有一个用公钥加密的 AESkey，然后用私钥解密

```
 Cipher cipher = Cipher.getInstance("RSA");
    PrivateKey privateKey = keyPair.getPrivate();
    // decrypt the ciphertext using the private key 
    cipher.init(Cipher.DECRYPT_MODE, privateKey); 
    byte[] decryptedText = cipher.doFinal(theBytes); 
```

theBytes 是一个包含加密 AESkey 的 byte[]，问题是如何将 decryptedText 转换回 AESkey？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T08:33:46.577

我*相信*您会收到一个 RSA 加密的 AES 密钥以及一些 AES 加密的数据，您仍然需要执行 2 次加密中的第二次。对？

因此，无论如何，您都可以从字节数组中加载一个键。

```
SecretKeySpec secretKeySpec = new SecretKeySpec(decryptedText, "AES"); 
```

随后你会做这样的事情，解密AES加密的数据，“加密”：

```
Cipher cipherAes = Cipher.getInstance("AES/CBC/PKCS7Padding");
cipherAes.init(Cipher.DECRYPT_MODE, secretKeySpec);
byte[] decryptedBytes = cipherAes.doFinal(encrypted);
String decryptedString = new String(decryptedBytes); 
```

规范可能会有所不同，`/CBC/PKCS7Padding`具体取决于加密期间的指定方式。

希望这可以帮助。

# jquery - 我发现的这个随机 Datetimepicker 插件的最小日期和时间设置是什么？

> ID：10380572
> 
> 赞同：2
> 
> 时间：2012-04-30T08:25:24.630
> 
> 标签：jquery, datetimepicker

jQuery 的**datepicker**插件的设置器是

```
$( ".selector" ).datepicker( "option", "minDate", new Date(2007, 1 - 1, 1) ); 
```

但是我发现的这个随机**[datetimepicker插件的设置是什么？](http://trentrichardson.com/examples/timepicker/)**

这仅设置最短日期，而不是最短时间。

```
$( "#datepicker" ).datetimepicker( "option", "minDate", new Date(2012, 11, 20, 8, 30)); 
```

这个插件的最小**日期和时间**的设置器是什么？

**编辑**

我想在我初始化 datetimepicker**之后**设置 mindate 和 mintime ，而不是在初始化期间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T08:28:07.553

在您链接到它的页面中，显示了如何在加载时设置这些选项：

```
$('#example14').datetimepicker({
    minDate: new Date(2010, 11, 20, 8, 30),
    maxDate: new Date(2010, 11, 31, 17, 30)
}); 
```

您使用的插件不允许您在初始化后更改这些设置。

# regex - 使用 Perl 搜索两个文件之间的匹配项

> ID：10380575
> 
> 赞同：0
> 
> 时间：2012-04-30T08:25:46.753
> 
> 标签：regex, string, perl, file, list

我有两个文件：`file1.txt`和`file2.txt`. 两者都包含以下格式的行：

**文件 1**

```
name1:value1 
```

**文件2**

```
name2:value2 
```

我想检查是否`value1`在`list2`（在`name2`字符串中）找到

我有这个功能：

```
#!/usr/bin/perl
use warnings;
use Parallel::ForkManager;

sub loadf($);

print "Starting main program\n";
my @list1 = loadf("list1.txt");
my @list2 = loadf("list2.txt");

my $workernum = 10; 
open(OK, '>>', 'valid.txt');
open(ER, '>>', 'invalid.txt');
$pm = new Parallel::ForkManager($workernum);

my $cnt = 0;
foreach $line (@list1) {
    $cnt++;
    my $pid = $pm->start and next;
    my @data1 = split(":", $line);
    my $name1 = $data1[0];
    my $value1 = $data1[1];
    my @data2 = split(":", $list2);
    my $name2 = $data2[0];
    my $value2 = $data2[1];

    if (/$value1/i ~~ @list2) 
    {
        print OK $name1 . " - " . $value2 . "\n";
        print " [+] Found: " . $name1 . " - " . $value2 . "\n";
    }
    else
    {
        print ER $name1 . "\n";
        print " [x] Unknown: " . $name1 . " - " . $value1 . "\n";
    }
    $pm->finish;
}

close(OK);
close(ER);
print "\n*** Finished ***\n";

sub loadf($) {
    my @file;
    open(FILE, $_[0] . "\n") or die("[+] Couldn't open " . $_[0] . "\n");
    @file = <FILE>;
    close(FILE);
    return @file;
}

__END__ 
```

这是行不通的。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:12:23.080

```
#!/usr/bin/perl

open(F,'list1.txt');
my @list1=<F>;
close(F);
open(F,'list2.txt');
my @list2=<F>;
close(F);
chomp(@list1,@list2);
foreach my $line (@list1)
{
    if ($line=~/.+\:.+/)
    {
        my @data1 = split(":", $line);
        if (my @d2=grep /$data1[1]\:/i,@list2){print " [+] Found: " . $data1[0] . " - " . [split(':',$d2[0])]->[1] . "\n";   }
        else { print " [x] Unknown: " . $data1[0] . " - " . $data1[1] . "\n"; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:03:46.433

呃...我真的不明白你的算法，对不起。首先，您将比较文件中的所有行读入两个数组，然后分叉处理器循环，但正如我所见，没有尝试将这些工作人员的工作分成块（以并行处理）。

我建议尝试一些不同的方法：只吃第二个文件，然后逐行处理第一个文件。您没有提到第二个文件的名称和值是否唯一；我想他们不是，但如果他们是，程序可以变得更简单。

```
open my $caf, '<', 'list2.txt' or die $!, "\n";
my $checkedAgainst = do { local $/;  <$caf>; };

open my $cf, '<', 'list1.txt' or die $!, "\n";

my $workernum = 10; 
$pm = new Parallel::ForkManager($workernum);

while (<$cf>) {
  my $pid = $pm->start and next;
  my ($nameToCheck, $valueToCheck) = split /:/;
  if ($checkedAgainst =~ /^\Q$valueToCheck\E:(.+)$/m) {
    print " [+] Found: $nameToCheck - $1", "\n";
  }
  else {
    print " [x] Unknown: $nameToCheck - $valueToCheck", "\n";
  }
}
$pm->finish; 
```

换句话说，我首先将第二个文件加载到一个大字符串中，然后尝试将它与第一个文件中的行匹配（逐行）。我不知道，你的值中会出现什么符号，这就是为什么在那里使用 \Q-\E （quotemeta 运算符）。

**更新：**试图制作这个代码分支，但我无法在我所在的地方测试它。

# html - 我可以在用 html 4 构建的网页中使用 itemdata(microdata)

> ID：10380578
> 
> 赞同：0
> 
> 时间：2012-04-30T08:26:14.807
> 
> 标签：html

在我用这样的 HTML 4 代码构建的网页中使用微数据（itemdata）是否有用或可能？

```
<div itemscope>
  <h1>Avatar</h1>
  <span>Director: James Cameron (born August 16, 1954) </span>
  <span>Science fiction</span>
  <a href="../movies/avatar-theatrical-trailer.html">Trailer</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:49:21.597

这将取决于微数据消费者是否想通过 doctype 或其他方式检查 HTML5 特性，然后如果页面不是 HTML5，则禁止微数据。但是很难想出这样一个消费者为什么愿意去这么麻烦的原因。这样做有什么好处？

话虽如此，使用`itemscope`没有任何`itemprop`s 可能不会取得很大的成就。

# jquery - 使用 jQuery 控制默认滚动条

> ID：10380579
> 
> 赞同：0
> 
> 时间：2012-04-30T08:26:15.990
> 
> 标签：jquery, scrollbar

我一直在寻找一个 jquery 插件来控制像 facebook 一样的默认浏览器滚动条。[http://i45.tinypic.com/i71s88.jpg](http://i45.tinypic.com/i71s88.jpg)所以geay滚动条控制右边的默认滚动条。我不需要 jquery 插件来模拟滚动或某种自定义滚动条。

先感谢您 ：）

# javascript - 对于移动 webkit，如何在触摸/拖动时使水平菜单栏可滚动？

> ID：10380585
> 
> 赞同：0
> 
> 时间：2012-04-30T08:26:37.647
> 
> 标签：javascript, jquery, html, mobile, webkit

假设我使用的是标准 iPhone 4。

我的菜单栏宽度为 2000 像素。当用户触摸并按住菜单 div 时，可以左右移动手指，菜单栏也会随之移动。这允许用户使用他的手指浏览所有菜单项。（向左/向右滚动）

我怎样才能在 javascript/jquery 中做到这一点？

这就像谷歌图片网络视图（在你的手机上去那里）。您可以左右滑动浏览每个图像。

除了......我希望它是一个菜单栏，没有“捕捉”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:07:12.147

这是一个非常非常基本的例子。它应该让你朝着正确的方向前进。

```
$('body').bind({
    'touchmove': function(e){

        $('.menu_bar').css({
            'left': e.originalEvent.touches[0].pageX
        });

    }
}); 
```

要到达您要去的地方，您还需要存储 touchstart 坐标、.menu_bar 起始位置，然后使用一些数学运算来相对于它的位置移动栏，而不是像每次都捕捉到手指位置上面的例子就可以了。

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:09:25.223

我对这个问题仍然有些困惑，但我相信答案只是为了使用

```
 -webkit-overflow-scrolling: touch; 
```

这适用于 iOS5 设备，并在活动时（即滚动时）为您提供一个小滚动条

否则你可以试试这个插件：[http ://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

或者：[http](http://chris-barr.com/index.php/entry/scrolling_a_overflowauto_element_on_a_touch_screen_device/) ://chris-barr.com/index.php/entry/scrolling_a_overflowauto_element_on_a_touch_screen_device/ （多设备）

# c# - 我怎么知道控制器中控制文本框/复选框等的类型是什么？

> ID：10380590
> 
> 赞同：0
> 
> 时间：2012-04-30T08:27:01.983
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我需要通过发出 Ajax 请求并下载 HTML 来动态构建文本框、复选框、单选按钮等控件。但是，一旦屏幕上有足够的控件并且用户提交了表单，我需要所有控件并且它是发布的值。在 Asp.Net MVC 中使用非顺序索引很容易获得发布的值。但是，我如何获得它是哪个控件的值？简单地说，如果表单提交了值“Hello World”。我需要能够知道 Hello World 是从哪里来的。是提交此值的文本框还是文本区域？

我不需要其他任何东西，如 ID、名称等。只需要知道控件的类型是 texbox、textarea、select 还是哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:04:02.840

当你动态构建这些客户端元素时，你给它们一个名字，这样它们就会发布到服务器上。
只需遵循如下命名约定：
textarea1,textarea2...
txt1,txt2,...
然后在服务器上收集值 - 获取所有以 textarea 开头的键来收集 textAreas 的值...

更好的方法是为每种类型创建一个包含列表的模型，当您生成客户端元素时，构建它们的名称，以便 ModelBinder 将值映射到正确的列表，
这些名称的语法有点讨厌所以工作使用客户端模板 [，当我需要构建这样的东西时，我使用了这个帖子](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:48:55.057

您需要了解更多关于 http get 或 post 的信息。

# c# - 基于不同 XAML 的样式继承

> ID：10380597
> 
> 赞同：13
> 
> 时间：2012-04-30T08:27:31.343
> 
> 标签：c#, .net, wpf, xaml, resourcedictionary

如何将样式中的 BasedOn 标记指定为其他文件中定义的样式。

例子，

Dictionary1.xaml 定义

```
 <Style x:Key="basicStyle" TargetType="TextBlock" >
       <Setter Property="FontSize" Value="24"></Setter>
       <Setter Property="Foreground" Value="DarkGray"></Setter>
       <Setter Property="FontWeight" Value="Bold"></Setter>
    </Style> 
```

在 Dictionary2.xaml 我需要类似的东西

```
 <Style x:Key="headerStyle" TargetType="TextBlock" >
       <Setter Property="FontSize" Value="46"></Setter>
       <Setter Property="Foreground" Value="DarkGray"></Setter>
       <Setter Property="FontWeight" Value="Bold"></Setter>
    </Style> 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T15:58:18.553

简单的方法：

在`Dictionary2.xaml`定义 MergedDictionaries 中（就在开始`ResourceDictionary`标签之后）：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="/Path/to/Dictionary1.xaml" />
</ResourceDictionary.MergedDictionaries> 
```

进而

```
<Style x:Key="headerStyle" TargetType="TextBlock" BasedOn="{StaticResource basicStyle}" >
    .....
</Style> 
```

这将解决问题，但与所有简单的解决方案一样，有一个问题：每次合并字典时，您都会有效地创建合并字典的副本。它是递归的 - 如果您有 Dict3.xaml 和 Dict4.xaml 都加载 Dictionary2.xaml，您将创建 Dictionary1.xaml 的三个实例。通过复杂的依赖结构，您可以在应用程序启动时在内存中拥有 19,000 多个字典对象，并且内存占用量从 180MB 到 1200MB (TrueStory™ :( )。

解决方案是[SharedResourceDictionary](http://www.wpftutorial.net/MergedDictionaryPerformance.html)。本教程中的实现应该被视为一个起点，并且可能需要进行一定程度的调整 - 取决于使用场景。谷歌“wpf SharedResourceDictionary”了解一些问题和解决方案。

# php - 使用 PHP/MYSQL 即时导出/下载 CSV

> ID：10380603
> 
> 赞同：1
> 
> 时间：2012-04-30T08:28:28.253
> 
> 标签：php, mysql, csv, download, dynamically-generated

我想知道解决以下问题的最佳方法是什么。我需要为客户提供从 CSV 格式的数据库中下载各种记录范围的选项。我正在考虑做以下事情。

1.  为用户提供一个网络表单以确定从数据库中提取哪些行。
2.  拉取适当的记录并从返回数据中创建一个大字符串。
3.  将字符串发布到创建 CSV 以供下载的脚本。

在我尝试上述方法之前，我想知道是否有更好的方法来做到这一点？

谢谢^_^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:35:02.557

您可以使用 MySQL[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/refman/5.5/en/select-into.html)立即以 CSV 格式获取结果。然后，您只需将该 CSV 文件的内容读回给用户。

这比尝试自己构建 CSV 安全得多（您必须考虑如何正确转义字段分隔符等）；但是，如果您想这样做，我建议您使用它[`fputcsv(STDOUT, $results)`](http://php.net/manual/en/function.fputcsv.php)来避免常见的陷阱。

# javascript - 打印带有已单击 div 的 HTML 页面并隐藏其余部分

> ID：10380605
> 
> 赞同：0
> 
> 时间：2012-04-30T08:28:36.193
> 
> 标签：javascript, html, printing

我有一个包含许多不同 DIV 的 HTML 页面，我想打印出用户单击的 DIV 并隐藏所有其余部分。

有人可以告诉我如何在 Javascript 中执行此操作吗？

```
<html>
  <head>
    <title>Print Demo</title>

    <script type="text/javascript">
       <!-- MY JAVASCRIPT FUNCITON -->

    </script>

  </head>
  <body>

    <div id="div1">
       <a href="<JSMethod>">Print the page with this div</a>
    </div>

    <div id="div2">
       <a href="<JSMethod>">Print the page with this div</a>
    </div>

    <div id="div3">
       <a href="<JSMethod>">Print the page with this div</a>
    </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:00:35.137

这只是为了扩展[pimvdb 的答案](https://stackoverflow.com/a/10380683/887539)。

jQuery：

```
$("a").on("click", function(){
    $("div").hide();
    $(this).parent().show();
}); 
```

或按照建议：

```
$("a").on("click", function(){
    $("div").hide();
    $(this).closest("div").show();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T08:34:51.310

隐藏元素意味着将其`style.display`属性设置为`"none"`. 显示意味着将其设置`"block"`为 div 元素。

结合`getElementsByTagName`，您可以完成此操作：http: [//jsfiddle.net/b9cgM/](http://jsfiddle.net/b9cgM/)。

```
function show(elem) {
  // hide all divs initially
  var allDivs = document.getElementsByTagName("div");
  for(var i = 0; i < allDivs.length; i++) {
    allDivs[i].style.display = "none";
  }

  // show the appropriate div
  elem.parentNode.style.display = "block";  // parent of the <a> is the <div> to show
} 
```

您可以绑定事件，如`<a href="#" onclick="show(this); return false;">`. 然后将元素 ( `this`) 传递给`show`。

附带说明一下，诸如 jQuery 之类的库使这变得更加容易；您可能想检查一下（尽管如果唯一的用例是这个，我不建议包括它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T09:16:54.707

抱歉，js中只有window.print()可以打印，也就是说只能打印整个窗口。如果您希望某些人能够打印您的文档，请使用 CSS 使其可打印。例如，也许您希望您的导航消失以进行打印，但将页面标题和网站名称以及页面 URL 保留在那里（有时像 firefox 这样的浏览器会在它们太长时将其截断）。有时有些网站会取消浏览器控件并错误地让您没有打印按钮 - 它是一个在线购买网站......以前发生过。

```
<style type="text/css">
@media print {
    .boxGreen {
    padding:10px;
    border-color:green;
    border-style:dashed;
    border-width:thin;
    }

}
@media screen {
    .boxGreen {
    padding:10px;
    border-color:green;
    border-style:dashed;
    border-width:thin;
    }
}
</style> 
```

你可以做一个`onclick="switchtodiv('someid')"`然后在div之后这样做：

```
<div onclick="switchtodiv('span1')">ClickMe<span id="span1">some content</span></div>
<div onclick="switchtodiv('span2')">ClickMe<span id="span2">some content</span></div>
<div onclick="switchtodiv('span3')">ClickMe<span id="span3">some content</span></div>
<!--you can generate these divs using a for statement...-->
<script type="text/javascript">
//switchdiv allows only 1 div tobe 
function switchdiv(id) {
    var ids=new Array('span1','span2','span3');
    var i;
    for (i=0; i < ids.length; i++) {
        if (ids[i] == id) {
            document.getElementById(ids[i]).style.visibility='visible';
            document.getElementById(ids[i]).style.display='block';
        } else {
            document.getElementById(ids[i]).style.visibility='hidden';
            document.getElementById(ids[i]).style.display='none';
        }
    }
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T08:38:44.177

您可以使用像 document.getElementById(id) 这样的 javascript 函数来隐藏另外两个 div

所以在你的功能中你可以使用

```
function hide1() {
document.getElementById(div2).style.display = "none";
document.getElementById(div3).style.display = "none";
} 
```

# c# - 在应用程序安装期间创建 SQL Server 数据库

> ID：10380609
> 
> 赞同：0
> 
> 时间：2012-04-30T08:28:56.377
> 
> 标签：c#, .net, visual-studio-2010, sql-server-2008

在安装我的 Winforms 应用程序期间，我已经按照[此链接](http://msdn.microsoft.com/en-us/library/49b92ztk%28v=vs.100%29.aspx)创建我的 SQL Server 数据库。但我收到了这个错误：

> 值不能为空。参数名称：流

注意：我的连接字符串是

```
Data Source=MyServerName\SQLEXPRESS;Initial Catalog=master;Integrated Security=SSPI; 
```

我的数据库也应该在服务器上创建。

请问有什么不清楚的地方...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:46:31.787

我敢打赌，这一行会引发错误：

```
Stream strm = Asm.GetManifestResourceStream(Asm.GetName().Name + "." + Name); 
```

您需要在项目中有一个名为 sql.txt 的文件，您需要编辑其属性并将其构建操作设置为嵌入式资源

![在此处输入图像描述](../Images/3e81711e45994b96a0f823529b66e8d0.png)

# c++ - MySet(20,100) = "abcd"; 复制和/或分配？

> ID：10380613
> 
> 赞同：1
> 
> 时间：2012-04-30T08:29:18.550
> 
> 标签：c++, operator-keyword, compound-assignment

抱歉，如果这个答案应该是显而易见的，也许这有一个模式名称，如“笨拙的分配重载”，并且没有按正确的主题搜索 - 重定向最受欢迎的代码摘录：

```
class MySet {
        private:
                int lower;
                int upper;
                char *data;
        public:
                MySet( int l, int u, const char *val = 0 );

                MySet &operator=( MySet &rhs );
                MySet &operator=( const char *val );
};

int main(int i, const char *argv[])
{
        MySet A(1,10);
        A = "hello";

        MySet B(1,10, "hello");
        MySet C(1,10) = "hello";

} 
```

A 和 B 的分配工作，但 C 然后 g++ 抱怨....：myset.cxx:19:16: error: expected ',' or ';' 在'='标记之前

不是什么大问题，但一直试图理解为什么无效。

感谢您提供任何有用的回复。

更多信息...猜我是要编辑我的操作？

关于为什么上述被认为是非法的令人费解，一直在寻找一个明确的原因......当然还有一个技巧可以让编译器接受这种符号。

考虑到合法的类似用途

```
struct toons {
     char first[10];
} flintstone[] = {
     "fred",
     "wilma",
     ""
}; 
```

来自几十年的 C 编译器，如下所示：

```
typedef struct {
    char family[10];
    struct {
            char name[10];
    } members[6];
} toongroup;

toongroup rubble = {
    "rubble",
    {
            "barney",
            "wilma",
            ""
    }
}

toongroup rubble = {
    "rubble",
    {
            "barney",
            "wilma",
            "", "", "", ""
    }
};

toongroup jetsons = { "jetson", { "george", "jane", "", "", "", "" } }; 
```

都受到 c++ 编译器的尊重。可以在结构上具有成员函数，它仍然可以工作：

```
typedef struct toongroup {
    public:
            bool add( const char *newbaby ) {
                    for(int i; i<6; i++) {
                            if(strlen(members[i].name) == 0) {
                                    strcpy(members[i].name, newbaby);
                                    return true;
                            }
                            if(strcmp(members[i].name, newbaby) == 0)
                                    return false;
                    }
                    return false;
            }
    char family[10];
    struct {
            char name[10];
    } members[6];
} toongroup;

toongroup jetsons = { "jetson", { "george", "jane", "", "", "", "" } };

jetsons.add( "elroy" ); 
```

添加构造函数时开始反对：

```
typedef struct toongroup {
    toongroup( const char *f, const char *m, ... ) {
    }

error: in C++98 ‘rubble’ must be initialized by constructor, not by ‘{...}’
error: could not convert ‘{"rubble", {"barney", "wilma", "", "", "", ""}}’ from ‘&lt;brace-enclosed initializer list>’ to ‘toongroup‘ 
```

想知道是否可以使用正确的初始化程序，以便编译器可以匹配构造函数

```
 toongroup empty;
    toongroup nobody = empty;
    toongroup rubble( "rubble", "barney", "wilma", "" ); 
```

甚至

```
 toongroup empty;
    toongroup cancelled;
    toongroup nobody = empty;
    toongroup rubble( "rubble", "barney", "wilma", "" );
    toongroup jetsons( "jetson", "george", "jane", "" );

    jetsons.add( "elroy" ); 
```

添加

```
 toongroup &operator=( toons &t ); 
```

允许

```
 jetsons = cancelled; 
```

但不是

```
 toongroup jetsons( "jetson", "george", "jane", "" ) = cancelled; 
```

为这个结束了一个很长的帖子道歉，但我正在寻找一些关于**为什么**构造函数+赋值被拒绝以及如何/是否可以容纳的任何想法的参考。

在 MySet 的符号中，这将是一个熟悉的声明，在我宣布它非法之前，我想检查一下是否错过了一个技巧。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:32:59.497

因为

```
MySet C(1,10) = "hello"; 
```

是非法的。初始化变量时不能调用赋值或其他任何东西。

如果它确实有效，`=`则将代表初始化，而不是赋值。

就像：

```
int x = 5;  //initialization, not assignment 
```

相当于

```
int x(5); 
```

并不是

```
int x;
x = 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:35:34.173

问题是当你写：

```
MySet C = "hello"; 
```

实际上调用了字符数组的构造函数（如果存在），而不是赋值运算符。因此，您的代码会使编译器感到困惑：要调用两个构造函数中的哪一个。

基本上声明行上的相等转换为构造函数调用。从那时起使用赋值运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:35:42.553

记住2点：

1.  声明变量时，后续`=`不是*赋值*运算符，而是用于构造对象。
2.  C++ 编译器一次只允许 1 个构造函数。

记住这些，看看有问题的代码：

```
MySet C(1,10) = "hello"; 
```

这声明和对象`MySet`并用`(1,10)`.
现在没有必要再使用**另一个结构**`= "hello"`来压倒现有的结构。
这就是错误的原因。

# android - 网络响应解析结束时的通知

> ID：10380616
> 
> 赞同：0
> 
> 时间：2012-04-30T08:29:22.310
> 
> 标签：android, web-services, messages

我主要是一名 iOS 开发人员，但我正在创建我的一个应用程序的 Android 版本，所以我的问题可能会有一个简单的答案......

我的应用程序主要基于我从 SOAP 请求中获得的数据，并且我经常需要根据这些请求更新 UI 元素，因此我需要通知一类请求何时结束......在 iOS 中，这很容易做到通过使用 NSNotificationCenter 发送通知，我正在寻找类似的东西（或者实际上任何可以实现相同的东西）..

一个小例子：当应用程序打开时，主活动启动一个类（该类向服务器发送请求以验证用户身份），当该类完成解析获取的信息时，它应该通知主活动它已经完成...

由于执行 SOAP 请求的类不是活动，因此我不能使用“StartActivityForResults/onActivityResult” - 那么我将如何在 Android 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:43:17.747

您可以使用 AsyncTask 完成此操作。您可以使用 onPostExecute 通知您喜欢的任何内容。这是一个小教程：

[http://droidapp.co.uk/?p=177](http://droidapp.co.uk/?p=177)

希望能帮助到你

# xcode4.2 - 加载新视图后如何阻止声音再次播放？(Xcode4.2)

> ID：10380621
> 
> 赞同：0
> 
> 时间：2012-04-30T08:29:55.927
> 
> 标签：xcode4.2

我有一个在主视图加载时播放的声音文件，以及一些具有到其他视图的模式链接的按钮。当我打开应用程序时，声音文件播放得很好，但每次我导航回主视图时它都会播放。我通过声明一个带有值的整数变量并将音频文件放在 if 语句中来停止这一点，然后我在按下按钮时更改了变量值，但那是 xcode 3 没有任何很酷的故事板......显然该方法不适用于 4.2，因为情节提要覆盖了 -(IBAction) 代码块，但无论如何我都尝试过（无济于事）。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:41:56.087

您可以在 viewWillDisappear 委托中设置您的标志。

*   (void)viewWillDisappear:(BOOL)动画

这应该工作

# php - AJAX 帖子返回具有特定值的 HTML 标记

> ID：10380622
> 
> 赞同：-1
> 
> 时间：2012-04-30T08:29:57.520
> 
> 标签：php, jquery, json, post

我正在尝试编写一个使用 jquery 的帖子添加用户评论的代码。我将参数传递给 ajax.php 并接收到 josn 数据，如下所示：

```
var formObjectData = $('#' + form_id).serialize() + '&flag=add_comment'; // all 
$.post(
    'http://192.168.3.3/myblog/ajax.php',formObjectData,
    function(data) {
        if (!data)
            alert("No data");
        else {
            if (data.msg!='')
                $("#add_comment").html(data.msg);
        }
    },
    'json'
); 
```

在 ajax.php 上

```
$cid = $classobj->add_comment($comment,$id); // to add the comment in db and return the comment id
$ajax['msg'] = $msg ? $msg : '';
if ($cid) {
    $ajax['cid'] = $cid;
}
echo json_encode($ajax); 
```

我的问题是 jquery 返回许多带有 json 数据的不敬的 html 标签，如下所示

```
<html>
    <head>
        <style type="text/css">
        </style>
    </head>
</html>{"msg":"hello","cid":"600"} 
```

解决这个问题的最简单方法是什么？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:42:50.837

如果您的 ajax.php 文件包含任何样式或 HTML，您将在执行 AJAX 请求时返回该数据。从您的 ajax 端点中删除任何样式或 HTML。一种简单的方法是在 JSON 编码之后`exit()`或`die()`之后（如果它后面有 HTML）或完全删除它。

另外，请记住在之前包含以下代码`json_encode($ajax)`：

`header('Content-Type: application/json');`- 这将确保它始终被识别为 JSON 对象。我知道 Chrome 在推断您发回的内容实际上是 JSON 时肯定有问题！

# facebook - 与facebook评论链接分享

> ID：10380626
> 
> 赞同：3
> 
> 时间：2012-04-30T08:30:10.293
> 
> 标签：facebook, comments, sharing, facebook-comments, facebook-sharer

所以，我在我的博客上发布一些东西，然后我在 Facebook 上分享。目前，我在 Facebook 上发布的帖子比在博客上获得的反馈更多。有什么方法可以在我的博客上使用 Facebook 自己的评论功能并将其链接到我墙上的共享项目？

即我在我的博客上发布“Hello World”，我将它分享到我的 facebook 墙上，获得 20 条评论。在我的博客上，我使用 Facebook 评论小部件，它允许任何人对我的“Hello World”帖子发表评论，但它也会显示来自我的 Facebook 墙贴的 20 条评论，反之亦然 - 如果有人在我的博客上发表评论发布后，它也显示在我的 facebook 墙上（但不那么重要）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:59:31.040

Facebook 评论插件允许用户将评论发布到他们的墙上，只要他们处于顶层。

![发布到 Facebook](../Images/7bc4728d91716dc13efe88c531bc3fd2.png)

如果未选择“发布到 Facebook”，则帖子不会出现在用户的墙上。如果被选中，任何回复评论都将出现在插件和用户在 Facebook 上的帖子中。

![贴在墙上](../Images/99c9fd52f4eda2cb086e1f32b14e2efe.png)

![在插件上发帖](../Images/ba3ae44ac734fcef6c873d96a40524a4.png)

现在假设您希望*每个帖子*都存储在两者上，您需要禁用取消选择“发布到 Facebook”的选项，我认为这相当于隐藏插件。所以这不是一个好的选择。

*选项 2*

分享到您的墙的链接，启用公共评论并获取帖子 ID。然后，您可以对具有权限的`POST_ID/comments`端点执行 HTTP POST 。`publish_stream`

这里的问题是回复只会在您的帖子下，合并可能出现在官方 Facebook 插件上的任何单独的线程。此外，您还需要征求用户的许可才能添加您的应用程序，从而增加了额外的摩擦层。

*选项 3*

`FB.Event.subscribe`使用事件构建插件`comment.create`。响应应该为您提供评论 ID，您可以使用它来获取用户名和消息。然后，您使用选项 2 中的相同方法使用您的页面或个人资料发布该消息。看起来不真实，因为它不是用户发布自己，但它不会增加任何摩擦。

请参阅[http://facebook.stackoverflow.com/questions/9873608/posting-comment-to-facebook-from-javascript](http://facebook.stackoverflow.com/questions/9873608/posting-comment-to-facebook-from-javascript)以了解选项 3 如何工作

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T20:12:52.317

如果您使用 WordPress，请尝试 WordBooker 插件。 [WordBooker 主页](http://www.wordbooker.tty.org.uk)

我认为这是最接近您正在寻找的东西。[请先阅读这篇文章](http://wordbooker.tty.org.uk/supportforums/topic/problems-with-the-use-of-facebook-comment-box/#post-10976)，了解它如何处理评论。祝你好运:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T18:41:53.987

如果您使用 facebook 评论插件，您的所有评论都可以从双方转移并存储在 facebook 上。

对于 Wordpress 博客，请参阅以下帖子以将 Facebook 评论添加到您的博客。

1.  [你管搜索结果添加 wordpress 博客](http://www.youtube.com/results?search_query=Facebook+Comment+Box+to+WordPress+Blog&oq=Facebook+Comment+Box+to+WordPress+Blog&gs_l=youtube-reduced.3...575210.575210.0.575869.1.1.0.0.0.0.379.379.3-1.1.0...0.0...1ac.1.owobmbJX2k4)
2.  [http://www.youtube.com/watch?v=vBwbvpqy_Ds](http://www.youtube.com/watch?v=vBwbvpqy_Ds)
3.  [http://techmell.com/blogging-tips/how-to-add-facebook-comments-box-to-wordpress/](http://techmell.com/blogging-tips/how-to-add-facebook-comments-box-to-wordpress/)
4.  [http://wordpress.org/extend/plugins/facebook-comments-plugin/](http://wordpress.org/extend/plugins/facebook-comments-plugin/)

对于任何博客，

1.  [http://www.youtube.com/watch?v=BrP9gsqsTF0](http://www.youtube.com/watch?v=BrP9gsqsTF0)
2.  [http://www.youtube.com/watch?v=t7GfE5SrKPM](http://www.youtube.com/watch?v=t7GfE5SrKPM)
3.  [http://www.blogger.webaholic.co.in/2011/09/facebook-comment-box-for-blogger.html](http://www.blogger.webaholic.co.in/2011/09/facebook-comment-box-for-blogger.html)
4.  [http://www.allblogtools.com/tricks-and-hacks/exclusive-integrate-facebook-comments-box-for-blogger-in-very-easy-and-simple-steps-full-guide/](http://www.allblogtools.com/tricks-and-hacks/exclusive-integrate-facebook-comments-box-for-blogger-in-very-easy-and-simple-steps-full-guide/)

您需要根据您的博客采取适当的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T07:28:35.190

[Facebook AWD](http://facebook-awd.ahwebdev.fr/features/comments-box/) 是 WordPress 的社交插件，其中一个功能允许用户在您的网站上发表评论。功能包括审核工具和分发。该插件可以自动在您的页面、文章和自定义帖子类型上添加评论框。

希望这个插件能解决你的问题。

# c++ - CPU时间测量

> ID：10380634
> 
> 赞同：1
> 
> 时间：2012-04-30T08:30:53.890
> 
> 标签：c++, c, linux, timing

我有以下代码片段，我正在尝试评估 CPU 花费的时间

但是我得到了一些奇怪的结果

```
struct timeval begin, end;
double cpu_time=0.0;
gettimeofday(&begin, NULL);
long cpu_sum = 0;

for (i = 0; i < size; i++) {
 cpu_sum += array[i] * array[i];
}    
 gettimeofday(&end, NULL);
 cpu_time = end.tv_sec - begin.tv_sec * 1000;
 cpu_time += (end.tv_usec - begin.tv_usec) / 1000;

 printf("calculated sum: %d using CPU in %lf ms \n", cpu_sum, cpu_time); 
```

样本结果 = 1296217442.000000 毫秒

我不认为这是以毫秒为单位的正确时间值。任何人都可以帮助这里有什么问题吗？

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T08:32:59.967

您需要修复运算符优先级：

```
cpu_time = (end.tv_sec - begin.tv_sec) * 1000;
cpu_time += (end.tv_usec - begin.tv_usec) / 1000; 
```

在原始文件中，您乘以`begin.tv_sec`1000，*然后*从中减去`end.tv_sec`；

此外，不是`gettimeofday()`衡量“挂钟时间”，而不是严格意义上的 CPU 时间，后者是衡量进程花费多少“CPU 工作量”的更好衡量标准。如果另一个进程与您的进程同时使用 CPU，那么结果将不准确。

对于“正确”的 CPU 时间，您应该使用（POSIX 标准）`getrusage()`系统调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:50:06.730

如果你想要**CPU**时间，你可能想用参数来[`clock_gettime`](http://man7.org/linux/man-pages/man2/clock_gettime.2.html)代替`CLOCK_PROCESS_CPUTIME_ID`。

这可能是使用相同功能获得实时和 CPU 时间的最方便（和准确）的方法，只需更改一个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T16:54:21.520

Pentium 类 cpu 有一条指令将当前时间戳计数器变量（一个 64 位变量）读入寄存器（edx:eax）。如果你想得到真正的 CPU 时间，你可以使用这个指令。你可以得到 CPU打钩。详细信息...这个链接，请。 [rdtsc](http://www.mcs.anl.gov/~kazutomo/rdtsc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T10:25:38.737

Alnitak 回答的一个小补充：

您定义`cpu_time`为`double`，我假设它是为了处理可能的溢出（运行时间大于~2M 秒）。但在这条线上：

```
cpu_time = (end.tv_sec - begin.tv_sec) * 1000; 
```

右侧被评估为`unsigned integer`，并将在大约 4M 秒后溢出。将其分配给`double`之后将无济于事。
因此，如果您真的关心长期运行时间，请执行以下操作：

```
cpu_time = (double)(end.tv_sec - begin.tv_sec) * 1000; 
```

# php - 数组被php中的最后一个元素覆盖

> ID：10380636
> 
> 赞同：0
> 
> 时间：2012-04-30T08:31:03.250
> 
> 标签：php, arrays, foreach, codeigniter-datamapper

存储的结果`$g`是 1 和 2。我在下面编写的以下代码，我`$array['music']`只存储最后一个元素 2。但我想要的是在 foreach 下执行我的 sql 查询 2 次并匹配其值为`$g`1和2 `mu_id`（`mu_id`是另一个表的列名`music`）并将第1行和第2行的所有行数据存储到`$array['music']`。

它仅存储第二行 (2) 而不是 1，或者在循环内第二次执行时覆盖它。如果有任何逻辑使它起作用，请告诉我。

```
 foreach($genre as $g)
    {
        echo $g;
        echo "<br>";
        $array['music'] = $m -> where('mu_id', $g ) -> get();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T08:32:54.087

您每次都重新声明整个数组而不是添加它，而是使用它：

```
foreach($genre as $g)
{
    $array['music'][] = $m->where('mu_id', $g)->get();
} 
```

甚至更好，更少的查询：

```
$array['music'] = $m->where_in('mu_id', $genre)->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:33:06.817

如果要将所有数据存储在数组中，则应使用 `$array['music'][]`而不是 `$array['music']`

# eclipse - 在 Eclipse 中从 Scala Swing 项目创建可运行的 Jar 文件

> ID：10380640
> 
> 赞同：0
> 
> 时间：2012-04-30T08:31:29.703
> 
> 标签：eclipse, scala

我在 Scala 中使用 Swing 创建了一个简单的 GUI 应用程序，Eclipse 中的“作为 Scala 应用程序运行”运行良好。我使用 SBT 作为构建工具，并为应用程序逻辑创建了一些类文件 + 在与对象同名的文件中创建了一个单例对象，该文件具有启动应用程序的 main() 方法。

正如我所说，只需从 Eclipse 内部开始即可。但是不会生成 JAR 文件（导出 -> ...）。有没有一种简单的方法可以做到这一点？

由于我有最新的稳定 scala 版本，来自 internetz 的许多提示似乎已经过时。甚至本博客的最后一条评论

[http://garyboone.com/2009/06/creating-single-file-runnable-jars-in-scala-and-eclipse/?wscr=1280x1024](http://garyboone.com/2009/06/creating-single-file-runnable-jars-in-scala-and-eclipse/?wscr=1280x1024)

不起作用。我只想要一个独立的可执行 JAR 文件，我可以在没有技术知识的情况下与其他人分享...有什么想法吗？

编辑：我终于解决了这个问题。问题是 Eclipse 在构建路径上显示了 Scala 库，但并没有*真正*导出它们。可能是bug，不知道。最后，我将 scala-library.jar 和 scala-swing.jar 作为外部 jar 直接添加到构建路径中，忽略了 eclipse 将它们显示为已包含的事实 -> 一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:46:03.377

看看retronyms onejar SBT 插件：[https](https://github.com/retronym/sbt-onejar) ://github.com/retronym/sbt-onejar 。看起来很简单，描述也很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:04:37.813

我找到了解决方案，请参阅问题中的编辑。我很快就会使用可能的替代方案，但是与 eclipse 相关的东西现在对我有用。也许 Scala IDE 的人可以看看 Eclipse 中的 Scala 应用程序的包装，还有一些障碍需要跳过。:)

# mfc - CDockablePane - 滑动 - 重绘

> ID：10380651
> 
> 赞同：2
> 
> 时间：2012-04-30T08:32:17.460
> 
> 标签：mfc, mdi, dock, cview

我有一个使用新 MFC 功能包的 MFC MDI 应用程序。我有一个启用了自动隐藏选项的 CDockablePane。我的 CView 驱动类需要花费大量时间来绘制。我面临的问题是，当窗格滑动（自动隐藏或自动出现）时，滑动中的每一步都会使 CView 重绘自身！这使得滑动需要花费大量时间并且应用程序显得非常沉重。有没有办法避免这些不必要的重绘并只绘制一次 CView 驱动的对象？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:01:53.473

```
CDockablePane::m_bDisableAnimation = TRUE; 
```

在您的大型机构造函数上。

# jquery - jQuery Spy (vertical ticker)：在第 4 次迭代后，列表项向下动画，增加容器的高度

> ID：10380660
> 
> 赞同：3
> 
> 时间：2012-04-30T08:32:53.993
> 
> 标签：jquery, spy

我们正在使用 Remy Sharp 的 jQuery spy 插件来构建一个垂直的间谍代码。该模块在前 4 次迭代中运行良好，之后表现奇怪 - 列表元素最终会向下爬（增加实际高度）父容器（底部看到的黄色边框是父 div 的实际边框）。

我们在这个插件网站 (http://jqueryfordesigners.com/demo/simple-spy.html) 提供的原始演示中没有看到这个问题。

但它只**发生在我们的页面上**，有一些棘手的问题需要修复 - 请查看我们的页面，网址： http: [//www.jean.net16.net/](http://www.jean.net16.net/)

非常感谢您的支持，提前！

PS。供您参考间谍插件源：http: [//jqueryfordesigners.com/simple-jquery-spy-effect/](http://jqueryfordesigners.com/simple-jquery-spy-effect/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:48:30.287

```
 $(function () {
    $('ul.spy').simpleSpy();
    });

    (function ($) {

    $.fn.simpleSpy = function (limit, interval) {

    limit = limit || 4;
    interval = interval || 4000;

    return this.filter(function(){ return typeof $(this).data("simpleSpy") == "undefined" }).each(function () {

        $(this).data("simpleSpy",true);

        var $list = $(this),
            items = [], // uninitialised
            currentItem = limit - 1,
            total = 0, // initialise later on
            height = $list.find('> li:first').height();

        $list.css({"position":"relative","overflow":"hidden"});
        $list.find('> li').each(function () {
            items.push('<li>' + $(this).html() + '</li>');
        });

        total = items.length;

        $list.find('> li').filter(':gt(' + (limit - 1) + ')').remove();

        $list.wrap('<div class="spyWrapper" />').parent().css({ height : $list.parent().height() });

        // 2\. effect        
        function spy() {
            // insert a new item with opacity and height of zero
            var $insert = $(items[currentItem]).css({
                height : 0,
                opacity : 0
            }).prependTo($list);

            // fade the LAST item out
            $list.find('> li:last').animate({ opacity : 0}, 1000, function () {
                // increase the height of the NEW first item
                  $insert.animate({ height : height }, 1000).animate({ opacity : 1 }, 1000);

                // AND at the same time - decrease the height of the LAST item
                 //$(this).animate({ height : 0 }, 1000, function () {
                    //finally fade the first item in (and we can remove the last)
                    $(this).remove();
                //});
            });

            currentItem++;

            if (currentItem >= total) {
                currentItem = 0;
            }

            setTimeout(spy, interval)
        }

        spy();
    });
};

})(jQuery);

//end of JS 
```

# python - xl.Workbook() (pyvot) 不打开 Excel 工作簿

> ID：10380665
> 
> 赞同：2
> 
> 时间：2012-04-30T08:33:10.610
> 
> 标签：python, windows, excel

我想在[本教程中使用](http://www.youtube.com/watch?v=Oi3QKuFugWk&hd=1)[pyvot](http://packages.python.org/Pyvot/tutorial.html)创建一个 excel 工作簿。Pyvot 安装正确，因为我可以毫无错误地导入它。但是当我这样做时：

```
import xl
xl.Workbook() 
```

我收到此错误：

```
Traceback (most recent call last):
  File "", line 1, in 
AttributeError: 'module' object has no attribute 'workbook'
>>> xl.Workbook()
Traceback (most recent call last):
  File "", line 1, in 
  File "C:\Python27\lib\site-packages\pyvot-0.1.2-py2.7.egg\xl\sheet.py", line 91, in     __init__
    excel = win32.gencache.EnsureDispatch('Excel.Application')
  File "C:\Python27\lib\site-packages\win32com\client\gencache.py", line 529, in EnsureDispatch
    disp = win32com.client.Dispatch(prog_id)
  File "C:\Python27\lib\site-packages\win32com\client\__init__.py", line 95, in Dispatch
    dispatch, userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,clsctx)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 108, in _GetGoodDispatchAndUserName
    return (_GetGoodDispatch(IDispatch, clsctx), userName)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 85, in _GetGoodDispatch
    IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch)
com_error: (-2147221005, 'Invalid class string', None, None) 
```

我没有安装 Visual Studio 的 Python 工具。

1.  我是否需要用于 Visual Studio (PTVS) 的 Python 工具才能使用 pyvot？

2.  较低版本的 excel 然后 excel 2010（例如 excel 2007）可以与 pyvot 一起使用吗？

3.  我是否需要在 excel 中进行任何设置才能使其与 pyvot 一起使用？

如果上述问题之一的答案不能解释为什么我不能使该代码片段工作，我应该怎么做才能让它正常工作？

* * *

我已经安装了 excel 2010。 Pyvot 安装正确，因为我在安装时没有收到任何错误`import xl`。当我在 pywin32 中键入以下内容时：

```
import xl
xl.Workbook() 
```

我得到这个名称错误：

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
NameError: name 'xl' is not defined 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:07:37.813

从[Pyvot](http://pytools.codeplex.com/wikipage?title=Pyvot)主页：

> Pyvot 需要安装了 Python for Windows 扩展 (pywin32) 的 CPython 2.6 或 2.7 以及 Office 2010。如果干净的 Python 会话可以导入 win32com 模块，则可以安装 Pyvot。

因此，根据描述，不需要 PTVS，需要 Excel 2010，并且您需要`win32com`在当前解释器中启动并运行模块。我使用这个配置没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:03:29.957

我也遇到了同样的情况，我今天刚试过。
试试：xl.workbooks()

这与VBA代码一致。

# c# - 使用 ajax 时会话过期

> ID：10380668
> 
> 赞同：1
> 
> 时间：2012-04-30T08:33:39.937
> 
> 标签：c#, ajax, asp.net-mvc

我有以下问题：当我的会话到期并且用户单击 Ajax.Actionlink 时，登录页面返回为部分页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:52:20.987

创建一个实现 IAuthorizationFilter 的 ActionFilterAttribute
并在 OnAuthorization 检查用户是否已注销，
如果他已注销并且这是一个 Ajax 请求(filterContext.HttpContext.Request.IsAjaxRequest()) - 将 filterContext.Result 设置为不同的结果。我返回一个带有 HttpStatusCode.Unauthorized 的结果，这样我就可以在客户端连接它并做出相应的反应

从未使用过 Ajax.Actionlink，我对所有 Ajax 调用都使用 jQuery，并且有一个全局挂钩来捕获带有错误状态代码的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:49:08.417

您将在您的操作方法的顶部需要这样的东西

```
 if (Session["UserID"] == null && Request.IsAjaxRequest())
        {
                return Content("<div class=\"error\">Your session was expired. Press Logout and then login again to continue</div>");
        } 
```

**更新** （您需要在检查授权时指定它，无论您创建了什么机制）

```
 public ActionResult Index()
    {
        try
        {
            List<string> rights = objAuthorization.CheckMemberRightsOnPage("page1");
            if (!rights.Contains("View"))
            {
                if (Session["UserID"] == null && Request.IsAjaxRequest())
                {
                    return Content("<div class=\"error\">Your session was expired. Press Logout and then login again to continue</div>");
                }
                return RedirectToAction("Restricted", "UserLogin", new { url = HttpUtility.HtmlEncode(Request.Url.AbsolutePath.Substring(1)) });
            }
            ViewData["objAuthorization1"] = rights;

        //  your other things here
        }
        catch(Exception ex){
           ViewData["ErrorMessage"] = "An error occurred: " + ex.Message;
            return View();   } 

    } 
```

# php - 重组数组

> ID：10380671
> 
> 赞同：-2
> 
> 时间：2012-04-30T08:33:53.493
> 
> 标签：php, arrays

我有许多值的多维数组，这是它的最小化版本：

```
$test = array(
    array(
       'name'   => 'test',
       'date'   => '2012-04-30 11:06:01'
    ),

    array(
       'name'   => 'test2',
       'date'   => '2012-04-30 11:07:00'
    )
); 
```

它只是继续......

现在日期是随机顺序的，所以我需要对这个数组进行排序，以便从最小日期到最大日期，更清楚地说，我这里是我的全尺寸数组转储： http: [//pastebin.com/EzTNJpUx](http://pastebin.com/EzTNJpUx)和 as你可以看到`sent`是日期，它是随机顺序的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:38:15.130

**使用[排序](http://php.net/usort)**

从手册：

> 此函数将使用用户提供的比较函数按数组的值对数组进行排序。如果您要排序的数组需要按照一些重要的标准进行排序，您应该使用此函数。

```
function cmp($a, $b){
     return strtotime($a['date'])-strtotime($b['date']);
}

usort($test, 'cmp'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:42:18.077

猜猜你可以使用这样的东西，

usort() 和 DateTime 类（如果您使用 PHP5 或更高版本）。

您需要定义一个函数来比较两个元素（在这种情况下也是数组）。

```
function cmp($array1, $array2)
{
  $date1 = new DateTime($array1['sent']);
  $date2 = new DateTime($array2['sent']);

  if($date1 == $date2)
    return 0;

  return ($date1 < $date2) ? -1 : 1;
} 
```

然后你打电话：

```
usort($test, 'cmp'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T08:43:41.460

我会去[`array_multisort()`](http://php.net/manual/function.array-multisort.php)。

# javascript - 仅在元素完全加载时执行一次的函数

> ID：10380678
> 
> 赞同：0
> 
> 时间：2012-04-30T08:34:42.243
> 
> 标签：javascript, element, execute, exists

我很难让 JavaScript 函数执行*一次*且仅在 DOM 元素完全加载时执行。我尝试了无数的`setInterval`s、`seTimeout`s、`FOR`循环、`IF`语句、`WHILE`循环等的组合，但一无所获。

我确实设法让它工作了一次，但它是命中注定的，因为我只能通过将功能延迟 2 秒来让它工作（这不好，因为没有确切说明加载需要多长时间) 并一遍又一遍地快速重新启动相同的功能，这也不好。

我只需要一些东西来不断地扫描页面以判断元素是否存在并具有内容（`innerHTML != undefined`或其他内容），一旦加载（并且仅一次）执行一段代码，然后停止扫描页面。

有没有人找到办法做到这一点？另外，我需要 JavaScript，而不是 jQuery。

谢谢。

**原始代码**

```
function injectLink_Bridge(){
    setTimeout(function(){
        injectLink();
    }, 2000);
}

function injectLink(){
    var headerElement = document.getElementsByClassName("flex-module-header");

    if (headerElement.innerHTML == undefined) {
        console.log("Element doesn't exist. Restarting function");

        setTimeout(function(){
            injectLink_Bridge(); //I can't remember if the bridge is necessary or not
        }, 2000); 
    } else {
        console.log("Element exists. Injecting");

        setTimeout(function(){
            headerElement[1].innerHTML += "code" //Inject code into the second instance of the class-array
        }, 2000);
    }
} 
```

**完成的代码**

```
function injectLink(){
    var headerElement = document.getElementsByClassName("flex-module-header")[1]; //Get the second instance

    if(headerElement && headerElement.innerHTML != ""){
        console.log("Element exists and has content. Injecting code...");
        headerElement.innerHTML += "code"; //Currently revising, due to T.J. Crowder's side-note
    } else {
        console.log("Element doesn't exist or has no content. Refiring function...");
        setTimeout(injectLink, 250);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:38:49.077

**发布代码后**更新答案：****

 **`getElementsByClassName`返回 a [`NodeList`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-536297177)，而不是元素；`NodeList`没有`innerHTML`财产。如果您想要第二个匹配元素，请使用`[1]`它来获取它，然后测试您是否得到了一些东西（或者如果您愿意，您可以`.length > 1`先检查，但`NodeList`记录为返回`null`不存在的索引）。此外，将现有函数传递给`setTimeout`. 所以：

```
function injectLink(){
    var headerElement = document.getElementsByClassName("flex-module-header")[1];

    if (!headerElement) {
        console.log("Element doesn't exist. Restarting function");

        setTimeout(injectLink, 2000); 
    } else {
        console.log("Element exists. Injecting");

        // Do you really want a further two second delay?
        setTimeout(function(){
            headerElement.innerHTML += "code"; //Inject code into the second instance of the class-array
        }, 2000);
    }
} 
```

旁注：使用`.innerHTML += "markup";`通常不是将内容附加到元素的好方法。当您这样做时，浏览器会执行以下操作：

1.  遍历元素和它所具有的任何后代元素，构建一个 HTML 字符串以提供给 JavaScript 层。
2.  从元素中删除所有内容，这具有删除后代元素上的任何事件处理程序的副产品。
3.  解析 HTML 字符串并为其构建新的节点和元素。

所以需要做一些工作，还有可能消除事件处理程序。如果您要添加新的子元素，请查看使用[`createElement`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-2141741547)and [`appendChild`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-184E7107)。如果您要添加更多文本内容，请查看[`createTextNode`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1975348127)和`appendChild`。

* * *

**原始答案**：

如果你给你的元素一个`id`（尽管无论你如何找到元素，相同的概念都有效），你可以这样做：

```
(function() {
    setTimeout(check, 0);
    function check() {
        var elm = document.getElementById('theId');
        if (!elm) {
            setTimeout(check, 250); // Check again in a quarter second or so
            return;
        }

        // Use the element
    }
})(); 
```

在那里，我们几乎立即启动第一次检查，如果我们没有找到该元素，我们会在 250 毫秒后再次安排检查。因为我们只安排下一次检查，如果前一个没有找到元素，我们只循环必要的次数来找到元素。

如果该元素没有`id`, 大概是您*以某种方式*找到它（`querySelector`、`querySelectorAll`等），因此将知道您是否找到它并能够安排下一次检查。

可能值得对其进行限制，例如：

```
(function() {
    var start = new Date();
    setTimeout(check, 0);
    function check() {
        var elm = document.getElementById('theId');
        if (!elm) {
            if (new Date() - start > 5000) { // More than five seconds
                throw "Couldn't find the element";
            }
            setTimeout(check, 250); // Check again in a quarter second or so
            return;
        }

        // Use the element
    }
})(); 
```

...因此，如果您更改 HTML 并且该元素不再存在，您会在测试时看到错误并被提醒更新您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:42:27.187

编辑：既然您已经展示了您的代码，那么它存在一些问题。

例如，`getElementsByClassName()`返回一个数组，所以你不能这样做：

```
var headerElement = document.getElementsByClassName("flex-module-header");
if (headerElement.innerHTML == undefined) 
```

你必须这样做：

```
var headerElement = document.getElementsByClassName("flex-module-header");
if (!headerElement || headerElement.length == 0 || headerElement[0].innerHTML == undefined) 
```

* * *

问题中提供代码之前的原始答案：

如果你向我们展示了整个问题，我们可能会想出更优雅的东西，但根据你告诉我们的，我们现在只能建议钝力方法：

```
(function() {
    var item, cnt = 0; 
    var pollTimer = setInterval(function() {
        ++cnt;
        if (!item) {
            // cache the item if found so future checks will be faster
            item = document.getElementById("testObject");
        }
        if (item && item.innerHTML != "") {
            // the item has innerHTML now, you can process it
            // with code here
            clearInterval(pollTimer);
        } else {
            if (cnt > 100) {
               // if not found after 100 checks (20 seconds)
               // then stop looking so we don't keep going forever
               clearInterval(pollTimer);
            }
        }
    }, 200);
}){}; 
```**

# hibernate - JPA Hibernate MappingException：未知实体

> ID：10380680
> 
> 赞同：0
> 
> 时间：2012-04-30T08:34:44.237
> 
> 标签：hibernate, jpa, mapping

我创建了一个使用 JPA 和 Hibernate 的简单 CRUD 应用程序。

我有实体注释的 JPA`javax.persistence.@entity`注释和休眠配置文件`(hibernate.cfg.xml)`。

我不使用 JPA 实体管理器，而是使用 Hibernate Native API `(Session, Session Factory, HibernateUtil)`。我没有休眠映射文件和`persistence.xml`.

任何问题。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:39:39.837

当您使用 JPA 注释时，您不需要映射文件。但当然，除非您使用 Spring 3.1 LocalContainerEntityManagerFactoryBean 类，否则您必须拥有 persistence.xml。

# android - 在android中从ftp下载xml

> ID：10380682
> 
> 赞同：0
> 
> 时间：2012-04-30T08:34:47.877
> 
> 标签：android, filesystems

我正在从 ftp 下载一个 xml 文件并使用以下代码进行存储：

```
FileOutputStream stream = openFileOutput("emp.xml", MODE_WORLD_WRITEABLE);

cd = ftp.retrieveFile("emp.xml", stream); 
```

我想稍后读取此文件以在我的应用程序中解析。以前我使用此代码，因为我将其存储在 res/xml 文件夹中：

```
XmlResourceParser parser = this.getResources().getXml(R.xml.employees); 
```

我应该如何替换上面的代码来获取 emp.xml 文件。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:26:45.887

使用[`XmlPullParser`](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html). 您可以使用 a[`FileReader`](http://developer.android.com/reference/java/io/FileReader.html)或 a[`FileInputStream`](http://developer.android.com/reference/java/io/FileInputStream.html)作为解析器的输入。

您可以查看教程[“使用 XmlPullParser 解析 XML 数据”](http://xjaphx.wordpress.com/2011/10/16/android-xml-adventure-parsing-xml-data-with-xmlpullparser/)。

# .net - 队列 与列表

> ID：10380692
> 
> 赞同：53
> 
> 时间：2012-04-30T08:35:37.957
> 
> 标签：.net, performance, list, queue, difference

我目前正在使用 a`List<T>`作为队列（使用`lst[0]`then `lst.removeAt(0)`）来保存对象。在给定时间最多大约有 20 个项目。我意识到有一个真正的`Queue<T>`课程。我想知道使用类似于队列`Queue<T>`的行为是否有任何好处（性能、内存等）？`List<T>`

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-04-30T08:37:32.427

可以分析性能。尽管在这种项目很少的情况下，您可能需要运行代码数百万次才能真正获得有价值的差异。

我会这样说：`Queue<T>`会更明确地暴露你的***意图***，人们知道队列是如何工作的。

像队列一样使用的列表不是很清楚，特别是如果您有很多不必要的索引和`RemoveAt(magicNumber)`代码。`Dequeue`从代码维护的角度来看，它更具消耗性。

如果这会给您带来可衡量的性能问题，您可以解决它。不要预先解决所有*潜在的性能问题。*

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-06-08T06:17:47.457

*简短的回答：*
`Queue<T>`比`List<T>`像队列一样使用时更快。`List<T>`比`Queue<T>`像列表一样使用时更快。

*长答案：*
A`Queue<T>`对于出队操作更快，这是一个 O(1) 操作。数组后续项的整个块不会向上移动。这是可能的，因为`Queue<T>`不需要方便从随机位置移除，而只是从顶部移除。所以它保持了一个头部（项目被拉到的`Dequeue`位置）和尾部位置（项目被添加到的位置`Enqueue`）。另一方面，从 a 的顶部移除`List<T>`需要自己将每个后续项目的位置向上移动。这是 O(n) - 如果您从顶部移除，这是最坏的情况，这就是出队操作。如果您在循环中出队，则速度优势可能会很明显。

`List<T>`如果您需要索引访问、随机检索等，A 的性能会更高。 A必须`Queue<T>`完全枚举才能找到合适的索引位置（它不暴露`IList<T>`）。

也就是说，a `Stack<T>`vs`List<T>`更接近，推送和弹出操作没有性能差异。它们都推送到数组结构的末尾并从末尾删除（两者都是 O(1)）。

* * *

*当然，您应该使用揭示意图的正确结构。*在大多数情况下，它们的性能也会更好，因为它们是为此目的量身定制的。我相信，如果根本没有性能差异，微软就不会仅仅为了不同的语义而在框架中包含`Queue<T>`和。`Stack<T>`如果是这样的话，它会很容易扩展。想想`SortedDictionary<K, V>`和`SortedList<K, V>`，两者的作用完全相同，但仅通过性能特征来区分；他们在 BCL 中找到了一席之地。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-30T08:46:47.770

`Queue<T>`除了类实现队列和类实现列表这一事实之外，`List<T>`还存在性能差异。

每次从`List<T>`队列中的所有元素中删除第一个元素时，都会被复制。队列中只有 20 个元素，它可能并不明显。但是，当您将下一个元素从`Queue<T>`没有发生此类复制的情况中出列时，这总是会更快。如果队列很长，则差异可能很大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T17:31:05.680

我想强调一下 HugoRune 已经指出的内容。 `Queue`明显快于，在此用例中`List`，内存访问`1`与`n`for相比。`List`我有一个类似的用例，但我有数百个值，我会使用`Queue`它，因为它快一个数量级。

关于`Queue`在 之上实现的说明`List`：关键字是“已实现”。它不会在出队时将每个值都复制到新的内存位置，而是使用循环缓冲区。这可以在“顶部`List`”上完成，而不会受到直接使用的副本的惩罚`List`。

# cocoa - 隐藏自定义窗口上的标题栏

> ID：10380698
> 
> 赞同：0
> 
> 时间：2012-04-30T08:36:10.577
> 
> 标签：cocoa, fullscreen, titlebar

我在用：

```
toggleFullScreen: 
```

使用自定义窗口：

```
self = [super initWithContentRect:contentRect styleMask:NSResizableWindowMask backing:bufferingType defer:flag]; 
```

我已经从 NSView 创建了一个自定义标题栏。当我进入全屏时，一切都很顺利，除了自定义标题栏显然仍然可见。有什么方法可以定义全屏矩形或其他东西，以便当我全屏显示标题栏时不可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:15:22.813

您需要将对象注册为窗口`delegate`，然后实现一个或多个与全屏相关的委托方法：

```
- (void)windowWillEnterFullScreen:(NSNotification *)notification;
- (void)windowDidEnterFullScreen:(NSNotification *)notification;
- (void)windowWillExitFullScreen:(NSNotification *)notification;
- (void)windowDidExitFullScreen:(NSNotification *)notification; 
```

在您的实现中，您应该从窗口中删除自定义标题栏，然后在窗口退出全屏模式时将其添加回来。

[Lion Application Kit Release Notes](https://developer.apple.com/library/mac/releasenotes/Cocoa/AppKit.html#10_7FullScreen)中有更多关于全屏模式的信息。

# hibernate - JPA/Hibernate 中键“PRIMARY”的重复条目

> ID：10380706
> 
> 赞同：6
> 
> 时间：2012-04-30T08:36:46.380
> 
> 标签：hibernate, jpa, many-to-many

我`many-to-many`在 mysql 数据库 ( `Module - <Module_has_Subject> - Subject`) 中有一个关系。实体是由 Eclipse 生成的，我`add`在两个类中都添加了该方法。我使用 JBoss AS7/Hibernate。`persist`当我在 EJB 中调用该方法时，我得到

```
org.hibernate.exception.ConstraintViolationException: Duplicate entry '3' for key 'PRIMARY' 
```

我知道这一定是一个微不足道的错误，但我只是不明白。我在 StackOverflow 和 RoseIndia 上遇到了大多数相关问题（我添加了`cascade`, `targetEntity`,...），但仍然没有成功。表的实体如下：

模块.java

```
@Entity
@Table(name="Module")
public class Module implements Serializable {

@Id
@Column(unique=true, nullable=false)
private int idModule;

//bi-directional many-to-many association to Subject
@ManyToMany(mappedBy="modules", fetch=FetchType.EAGER,targetEntity=entity.Subject.class,cascade=CascadeType.ALL)
private List<Subject> subjects;

public void addSubject(Subject subject) {
    if(subject.getModules() == null) {
        subject.setModules(new ArrayList<Module>());
    }
    if(getSubjects() == null) {
        setSubjects(new ArrayList<Subject>());
    }
    if (!getSubjects().contains(subject)) {
        getSubjects().add(subject);
    }
    if (!subject.getModules().contains(this)) {
        subject.getModules().add(this);
    }
}
...} 
```

主题.java

```
@Entity
@Table(name="Subject")
public class Subject implements Serializable {

    @Id
    @Column(unique=true, nullable=false)
    private int idSubject;

    //bi-directional many-to-many association to Module
    @ManyToMany(fetch=FetchType.EAGER, targetEntity=entity.Module.class,cascade=CascadeType.ALL)
    @JoinTable(
        name="Module_has_Subject"
        , joinColumns={
            @JoinColumn(name="Subject_idSubject", nullable=false, referencedColumnName="idSubject")
            }
        , inverseJoinColumns={
            @JoinColumn(name="Module_idModule", nullable=false, referencedColumnName="idModule")
            }
        )
    private List<Module> modules;

    public void addModule(Module module) {
        if(getModules() == null) {
            setModules(new ArrayList<Module>());
        }
        if(module.getSubjects() == null) {
            module.setSubjects(new ArrayList<Subject>());
        }

        if (!getModules().contains(module)) {
            getModules().add(module);
        }
        if (!module.getSubjects().contains(this)) {
            module.getSubjects().add(this);
        }
    }
    ...} 
```

主题EJB.java

```
...
Subject subject = new Subject();
for(Module module : subjectModules) {
  subject.addModule(module);
}
em.persist(subject);
em.flush();
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T08:15:17.897

我不知道您是否设法解决了您的问题，但我刚刚遇到了完全相同的问题。

在我`@OneToMany`使用的映射`CascadeType.ALL`中，当我尝试保存实体时会保存 2 条记录。（重复数据，不同的ID）

在网上滚动后，我发现了这个[http://forums.codeguru.com/showthread.php?t=511992](http://forums.codeguru.com/showthread.php?t=511992)，所以我从 更改`CascadeType.ALL`为`{CascadeType.PERSIST, CascadeType.MERGE}`，导致您遇到的错误：

```
"ConstraintViolationException: Duplicate entry '9-2-2012-05-30' for key 'PlayerId'" 
```

最后我删除`CascadeType.MERGE`并留下了`CascadeType.PERSIST`它修复了重复输入错误和重复记录。

作为一点，如果我使用 just`CascadeType.MERGE`或 just `CascadeType.PERSIST`，我不会收到任何错误，也不会出现重复数据

也许尝试使用`CascadeType.MERGE`and `CascadeType.PERSIST`，如果出现错误，尝试使用 just `CascadeType.MERGE`。

这并不理想，但希望它有所帮助。

克里斯

# jquery - 对 .live 与 jQuery 一起工作的方式感到困惑

> ID：10380711
> 
> 赞同：1
> 
> 时间：2012-04-30T08:37:21.320
> 
> 标签：jquery

我有以下代码不在文档内准备好了吗？

```
$('a[href^="content/"]').live('click', function(event)
{
    event.preventDefault();
    .... 
```

此代码位于结束正文标记的正上方。

如果我的 HTML 的正文包含具有匹配 href 的地址链接，那么即使在执行此代码时它们尚未在 DOM 中，它们是否也会获得点击？我对 .live 的工作方式有点困惑。我认为通常您不会在实际元素上使用 .live ，而是在将来要填充元素的包含块上使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:38:32.587

> 我认为通常您不会在实际元素上使用 .live ，而是在将来要填充元素的包含块上使用。

这就是代表所做的。然而，现场活动非常相似——它们只是将文档本身用作“包含块”。这具有 jQuery 必须检查页面上发生的给定类型的**所有事件的缺点。**因此，如果可能，您应该始终使用委托（通常是可能的！）

* * *

然而，从 jQuery 1.7 开始，各种事件注册方法被统一到[`.on()`](http://api.jquery.com/on/)其中，根据参数注册常规事件和委托。对于现场活动，您只需在其上创建一个委托`document`。

下面是一些关于注册 live/delegate 事件的旧/新方法的示例（我将省略常规方法，因为它们与 with`.bind()`但具有新函数名称`.on()`）：

```
// live events
$('.foo').live('click', function(e) {}); // old
$(document).on('click', '.foo', function(e) {}); // new

// delegates
$('#container').delegate('.foo', 'click', function(e) {}); // old
$('#container').on('click', '.foo', function(e) {}); // new 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:58:06.137

该`live`方法的语法有点混乱，使用起来也很棘手。这就是为什么它已被更灵活`delegate`的方法所取代，并且最近也被纳入了该`on`方法。

您的代码相当于：

```
$(document).delegate('a[href^="content/"]', 'click', function(event) { ... 
```

因此，该事件确实与文档元素相关联。

您使用包含块描述的内容与该方法无关`live`。它总是将事件连接到文档元素。您使用`delegate`or`on`方法将事件连接到包含元素。

# php - 如何通过php发送群发邮件

> ID：10380716
> 
> 赞同：-1
> 
> 时间：2012-04-30T08:37:33.867
> 
> 标签：php, sendmail

我通读了几页，但无法理解电子邮件发送的工作原理。我所知道的是，我可以使用 php`mail()`函数发送电子邮件。它连接到电子邮件服务器本身并发送电子邮件。它不知道电子邮件是否真的到达了目的地。

我想知道的是，

1.  MTA在这一切中的作用是什么，它的作用是什么？

2.  我可以使用 php`mail()`函数一次向 1000 人发送电子邮件，而无需在我的服务器上使用任何其他软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:40:44.757

MTA的作用：

1.  从客户的 MUA 接收电子邮件
2.  将电子邮件传递给 MDA 以进行最终交付
3.  使用 SMTP 在服务器之间路由电子邮件

查看更多：[http ://en.wikipedia.org/wiki/Message_transfer_agent](http://en.wikipedia.org/wiki/Message_transfer_agent)

请参阅此链接以发送多封电子邮件：

1.  [使用 PHP 发送大量电子邮件](https://stackoverflow.com/questions/1118154/sending-mass-email-using-php)
2.  [在 PHP 中发送批量电子邮件](https://stackoverflow.com/questions/1320512/sending-bulk-email-in-php)

# 更新：

邮件传输代理 (MTA) 从另一个 MTA、邮件提交代理 (MSA) 或邮件用户代理 (MUA) 接收邮件。传输细节由简单邮件传输协议 (SMTP) 指定。当邮件的收件人邮箱不在本地托管时，邮件将被中继，即转发到另一个 MTA。每次 MTA 收到一封电子邮件时，它都会在邮件标题的顶部添加一个 Received 跟踪标题字段，从而构建处理该邮件的 MTA 的顺序记录。为下一跳选择目标 MTA 的过程也在 SMTP 中进行了描述，但通常可以通过使用特定路由配置 MTA 软件来覆盖。

MTA 在后台工作，而用户通常直接与邮件用户代理交互。可以将初始提交区分为首先通过 MSA——端口 587 用于 MUA 和 MSA 之间的通信，而端口 25 用于 MTA 之间或从 MSA 到 MTA 的通信；这种区别首先在 RFC 2476 中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:33:23.070

你一次问两个问题：

> MTA在这一切中的作用是什么，它的作用是什么？

MTA 的角色是 MTA（邮件传输代理）。请查阅 Internet 上与您需要的详细程度相匹配的任何有关 MTA 的文档。

> 我可以使用 php mail() 函数一次向 1000 人发送电子邮件，而无需在我的服务器上使用任何其他软件。

这取决于您的操作系统。严格来说，这只能在具有外部 smtp 服务器的 Windows 上实现，而在 linux 上，你总是有 php 使用的 sendmail，这意味着，在没有程序的情况下`mail()`，你不能在 linux 上发送一封邮件（因此不能发送一千封邮件）`mail()`在*您的*服务器上（发送邮件）。

# ios - Sybase SUPQuery 测试标准问题 [iOS]

> ID：10380718
> 
> 赞同：1
> 
> 时间：2012-04-30T08:37:39.797
> 
> 标签：ios, ipad, sup, supquery

我正在开发一个在日历中显示活动的 iPad 应用程序，并且我有 2 个与此活动相关的 MBO。我能够通过查询+连接获得结果集。但我无法使用 testcriteria 句子获得“where”查询。在我添加 testcriteria 行之前，查询是可以的。这是代码：

```
SUPQuery *oneActivitiesQuery = [SUPQuery getInstance];
[oneActivitiesQuery select:@"c.DATE_FROM, d.DESCRIPTION"];
[oneActivitiesQuery from:@"GetCalendar" :@"c"];
[oneActivitiesQuery join:@"GetActivityDetail" :@"d" :@"d.GUID" :@"c.GUID"];
oneActivitiesQuery.testCriteria = [SUPAttributeTest match:@"c.DATE_FROM" :d];
SUPQueryResultSet* calendarResultSet = [MBOCRM_MOBILE_MBOCRM_MOBILEDB executeQuery:oneActivitiesQuery ];

if (calendarResultSet  == nil) {
    MBOLog(@"executeQuery failed");
    return;
}

for (SUPDataValueList* result in calendarResultSet ){

    MBOLog(@"Date --> %@", [[SUPDataValue getNullableDate:[result item:0]] description]);  
    MBOLog(@"Description --> %@", [SUPDataValue getNullableString:[result item:1]]);

} 
```

第 5 行中的“d”是一个 NSDate 变量。

这是错误消息：

```
Terminating app due to uncaught exception 'SUPPersistenceException', reason: 'unexpected null value for '"b"' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T06:08:32.530

```
SUPDateValue *thedatevalue = [SUPDateValue newInstance];
[thedatevalue setValue:d];
oneActivitiesQuery.testCriteria = [SUPAttributeTest match:@"c.DATE_FROM" : thedatevalue]; 
```

SUP 不知道某些 NSObjects，您需要转换或包装为 SUP 对象。尝试这个 ：）

# kml - 如何在我的网站上将 KML 文件解析为 Google Earth API？

> ID：10380740
> 
> 赞同：0
> 
> 时间：2012-04-30T08:39:54.753
> 
> 标签：kml, google-earth, google-earth-plugin

我创建了一个 KML 文件，并希望在我的网站上的 Google Earth API 上展示它。我浏览了[Google 代码游乐场](http://code.google.com/apis/ajax/playground/?exp=earth#parse_kml)

但我不知道应该使用哪一个来将 KML 解析为 Google Earth API。这是我创建的 KML 文件的链接：http: [//g.co/maps/6zp5a](http://g.co/maps/6zp5a)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T00:52:20.007

下面是“Hello Earth”演示，其中包含您的 kml 的 fetch 功能。您很可能必须为您的 kml 中的图标设置样式以使用蓝色桨叶。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <head>
<!--
Copyright 2008 Google Inc.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
    <title>Hello Google Earth!</title>
    <script src="http://www.google.com/jsapi"></script>
    <script>
google.load("earth", "1");

var ge = null;

function init() {
  google.earth.createInstance("map3d", initCallback, failureCallback);
}

function initCallback(object) {
  ge = object;
  ge.getWindow().setVisibility(true);
  function finished(object) {
    if (!object) {
      // wrap alerts in API callbacks and event handlers
      // in a setTimeout to prevent deadlock in some browsers
      setTimeout(function() {
        alert('Bad or null KML.');
      }, 0);
      return;
    }
    ge.getFeatures().appendChild(object);
  }
  // fetch the KML
  var url = 'http://maps.google.com/maps/ms?ie=UTF8&authuser=0&msa=0&output=kml&msid=201182140457027399871.0004bee0c7348bce68977';
  google.earth.fetchKml(ge, url, finished);

  document.getElementById('installed-plugin-version').innerHTML =
    ge.getPluginVersion().toString();
}

function failureCallback(errorCode) {
}
  </script>
  </head>
  <body onload='init()' id='body'>
    <center>
      <div>
        Hello, Earth!
      </div>
      <div id='map3d' align="left" style='border: 1px solid silver; height: 600px; width: 800px;'></div>
    </center>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:37:02.240

您应该改用 fetchKml。

[http://code.google.com/apis/ajax/playground/?exp=earth#fetch_good_kml](http://code.google.com/apis/ajax/playground/?exp=earth#fetch_good_kml)

您还需要提供有效的网址，因此您需要使用完整的网址，而不是您的“短”网址，并在末尾添加“&output=kml”

[http://maps.google.com/maps/ms?msid=201182140457027399871.0004bee0c7348bce68977&msa=0&ll=9.438,39.5105&spn=130.55749,316.054688&output=kml](http://maps.google.com/maps/ms?msid=201182140457027399871.0004bee0c7348bce68977&msa=0&ll=9.438,39.5105&spn=130.55749,316.054688&output=kml)

将该网址放入示例代码页并运行它，它可以工作

# tsql - SQL Server 查询，在视图中运行总计，当 A 列更改时重置

> ID：10380741
> 
> 赞同：4
> 
> 时间：2012-04-30T08:39:57.763
> 
> 标签：tsql, sql-server-2005, cumulative-sum

我的一位同事有一个问题，我正试图帮助他解决。

他有一个 SQL 视图，其中包含以下数据（示例数据）：-

```
Category          Value
Cat A             10
Cat A             20
Cat A             30
Cat B             15
Cat B             15
Cat C             10
Cat C             10 
```

他想在视图中添加一列，以保持 Value 列的运行总计。

当类别更改时，此列必须重置运行总计。

所以输出数据必须是这样的：-

```
Category          Value       Running
Cat A             10          10
Cat A             20          30
Cat A             30          60
Cat B             15          15
Cat B             15          30
Cat C             10          10
Cat C             10          20 
```

我们可以通过像这样将表格连接到自身来获得运行总数：-

```
select t1.id, t1.[count], SUM(t2.[count]) as sum
from TableA t1
inner join TableA t2 on t1.id >= t2.id
group by t1.id, t1.[count]
order by t1.id 
```

问题是我们没有 ID 列，当类别更改时，我们将如何指示累计重置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T08:58:15.830

这在较大的桌子上不会表现得特别好，但会完成工作！

```
 select 'Cat A' as class,10 as value into #x
UNION ALL SELECT 'Cat A',20 
UNION ALL SELECT 'Cat A',30 
UNION ALL SELECT 'Cat B',15 
UNION ALL SELECT 'Cat B',15 
UNION ALL SELECT 'Cat C',10 
UNION ALL SELECT 'Cat C',10 

;WITH running_total AS
(
select *
,ROW_number() OVER (PARTITION BY class order by value ASC) as row 
from #x 
)
SELECT 
r1.class
,MAX(r1.value) as value
,SUM(r2.value) as running_total
FROM running_total r1
LEFT OUTER JOIN running_total r2 on r2.class = r1.class
                AND r2.row <= r1.row
GROUP BY 
r1.class
,r1.row 
```

这通过使用公用表表达式 (CTE) 和窗口函数来工作。CTE 的工作方式与子查询类似，其中第一部分（称为 running_total）根据值向每个类添加基于行的 ID。

Row_number() 按[此处](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.90%29.aspx)记录的方式工作， 但基本上它会根据您定义分区的方式（与 group by 基本相同，但不必在主查询中分组）和按类的内置顺序自动递增。

在此示例中，按类划分确保每个新类别名称的最小值设置为 1 - 如果您想要一个不基于特定类别的总运行总数，您将删除该子句的这一部分。

CTE 的第二部分从 CTE 的第一部分中选择结果，并在类匹配的地方加入自身。通过加入 r2.row <= r1.row 这确保了第二个连接包括所有值 <= 当前行 - 即 R1 中的第 3 行将包括 R2 连接中的第 1、2、3 行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T09:00:20.560

您可以将该`ROW_NUMBER()`功能与`OUTER APPLY`

```
DECLARE @T TABLE (Category VARCHAR(5), Value INT)
INSERT INTO @T VALUES 
    ('Cat A', 10),
    ('Cat A', 20),
    ('Cat A', 30),
    ('Cat B', 15),
    ('Cat B', 15),
    ('Cat C', 10),
    ('Cat C', 10)

;WITH T AS
(   SELECT  Category, Value, ROW_NUMBER() OVER(PARTITION BY Category ORDER BY Value) [RowNumber]
    FROM    @T
)
SELECT  T1.Category,
        T1.Value,
        RunningTotal
FROM    T T1
        OUTER APPLY
        (   SELECT  SUM(Value) [RunningTotal]
            FROM    T T2
            WHERE   T2.Category = T1.Category
            AND     T2.RowNumber <= T1.RowNumber
        ) RunningTotal 
```

# mysql - 返回空结果集。不明白为什么

> ID：10380742
> 
> 赞同：2
> 
> 时间：2012-04-30T08:40:03.673
> 
> 标签：mysql

这是桌子。 ![在此处输入图像描述](../Images/02f7a40c6fffe8d4e65962f64da8e8fe.png)

在 phpmyadmin 中执行的查询是

`SELECT * FROM users WHERE hashed_password = '8c1017982b2032cc059203e3d83dd0ee2e7a86b3'`

结果是一个空的结果集。如果查询是 `SELECT * FROM users WHERE username='tt'` Then 它按预期工作。

为什么 ？我有什么明显的遗漏吗？使用 php 的 sha1() 对密码进行哈希处理

`SELECT * FROM users WHERE hashed_password LIKE '8c1017982b2032cc059203e3d83dd0ee2e7a86b3%'`给出空结果集。

“show create table users”的输出

```
 CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `hashed_password` varchar(255) NOT NULL,
  `favourites` text,
  `ip_address` varchar(40) DEFAULT NULL,
  `enabled` tinyint(1) NOT NULL DEFAULT '1',
  `trust_level` int(11) NOT NULL DEFAULT '0',
  `time_stamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (`id`)
  ) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1 
```

的输出`select hashed_password, length(hashed_password) from users` ![在此处输入图像描述](../Images/53838f10196112d753bab7d32a2da7f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:39:56.160

您的散列长度为 40 个字符（类似于 SHA-1），而您的数据库字段包含 42 个字符。显然，任何 42 字符的哈希都不会与您提供的 40 字符的文字相比较。此外，这两个额外的字符似乎位于哈希的开头（否则该`LIKE`技巧应该奏效）。

找出为什么那里还有两个字符——插入哈希的代码可能对此有所了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:10:35.520

您可能想尝试以下方法：

```
SELECT * FROM users WHERE SHA1(hashed_password) = '8c1017982b2032cc059203e3d83dd0ee2e7a86b3' 
```

# java - 聚合和滑动窗口实现的java框架

> ID：10380743
> 
> 赞同：9
> 
> 时间：2012-04-30T08:40:15.150
> 
> 标签：java, architecture, aggregate, data-processing

我有一个事件流和一个 key-val 存储。值大小受 4Kb 限制。事件发生率不是很高——一天最多几百个。

在这个值中，我需要存储一个数据结构的序列化表示，它提供了一种有效的机制来读取、存储和更新为期 3 个月的聚合事件计数，每天和每周聚合以及每小时 1/2 的滑动窗口。

该解决方案需要针对简单的事件计数聚合和事件计数标准偏差有效地执行以下任务。（以下所有任务的最长期限为**3 个月**）：

1.  不断更新（以惰性方式 - 随着相应事件的到来） - 如果最新计算的聚合太旧 - 抛出过时的数据并创建新的聚合
2.  由读取请求触发的更新（用户请求一些信息，例如特定用户的事件计数，单个用户的事件计数标准偏差等），以防最新计算的聚合太旧 - 抛出它们

我想知道：**是否有任何 java 开源框架可以帮助实现上述内容**？

我也很欣赏设计建议：设计模式等。

使用标准 java API 从头开始​​实施该解决方案并不难，但在这样做之前，我会很感激一些开源框架建议（如果有的话）。

[除了一些理论文章、基于 SQL 的解决方案和 IBM（称为SPL](http://publib.boulder.ibm.com/infocenter/streams/v2r0/topic/com.ibm.swg.im.infosphere.streams.product.doc/doc/IBMInfoSphereStreams-SPLStandardToolkitReference.pdf)的非开源工具包）之外，谷歌搜索解决方案并没有将我带到任何地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:34:48.907

看看[埃斯珀](http://esper.codehaus.org/)。

或[StreamCruncher](http://www.streamcruncher.com/)。

# c++ - 如何直接有效地访问非常大的文本文件？

> ID：10380745
> 
> 赞同：20
> 
> 时间：2012-04-30T08:40:37.653
> 
> 标签：c++, c, file-io, mpi

我有一个非常大的文本文件（+10GB），我想阅读一些数据挖掘技术。为此，我将并行技术与 MPI 一起使用，因此许多进程可以一起访问同一个文件。
事实上，我希望每个进程读取 N 行。由于文件不是结构化的（相同数量的字段，但每个字段可以包含不同数量的字符），我有义务解析文件并且这不是并行的并且需要很多时间。有什么方法可以直接访问特定数量的行而不解析和计算行数？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-30T08:47:31.460

如果您的文件没有被索引，则没有直接的方法。

索引它可能是值得的（扫描一次以找到所有行结尾，并存储每行或行块的偏移量）。如果您需要多次处理文件，并且它没有改变，那么索引它的成本可以通过使用索引进行进一步运行来抵消。

否则，如果您不需要所有工作都具有*完全相同*数量的行/项目，则可以捏造它。
寻找给定的偏移量（比如 1G），并寻找最近的行分隔符。在偏移 2G 等处重复，直到找到足够的断点。

然后，您可以在已识别的每个块上启动并行任务。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-30T09:05:18.700

除了此处提到的其他一些选项，不需要扫描整个文件：

1.  创建一个主进程，通过管道/fifos 将线路推送到执行实际处理的子进程。这可能会慢一点，但如果说在子流程中花费的 90% 时间是实际处理文本，那应该没问题。

2.  一个愚蠢但有效的技巧：假设您有 N 个进程，您可以通过 argv 或“序列号”告诉每个进程，例如`processor -serial_number [1|2|3...N] -num_procs N`，它们都可以读取相同的数据，但只处理具有 `lineno % num_procs == serial_number`. 它的效率有点低，因为它们都会读取整个数据，但同样，如果它们只在每 N 行上工作，而这是大部分时间消耗的，你应该没问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T08:47:33.377

不，没有：除非您不阅读未知数据，否则没人会知道有多少换行符。这个问题的复杂性是 O(n) 因此意味着*至少一次*你必须阅读整个文件。然后，您可能想要构建一个索引表，在其中记录文件中换行符的位置：这可以被所有进程使用，并且使用 fseek 您可以大大加快进一步的访问速度。

# android - 视图将在 onItemClick 获得两次

> ID：10380750
> 
> 赞同：0
> 
> 时间：2012-04-30T08:41:16.793
> 
> 标签：android, listview

我正在尝试通过单击 ListView 来更改背景颜色。我的代码如下所示：

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {          
        arg1.setBackgroundColor(Color.GREEN);
    } 
```

奇怪的是，如果我点击第 7 项，第 7 项的背景发生了变化，而且从第 6 项开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:45:27.323

这是因为 ListView***回收***了内部使用的视图（行项）。**`getView`**最好的解决方案是通过覆盖适配器中的方法来更改所需行/项目的背景颜色。这样，您将可以更好地控制列表项，并且可以为其他不需要的视图重置背景颜色。有关更多信息，请阅读[此](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)

# jquery - jQueryUI 多个主题在同一页面中

> ID：10380752
> 
> 赞同：0
> 
> 时间：2012-04-30T08:41:35.657
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有以下场景：我在站点中使用修改后的 JQuery UI 主题（在文件夹 tmob_theme 中），并且我需要根据 date_pick 主题（在同名文件夹中）设置不同样式的 datepicker。但是，我不知道为什么我不能让它工作。我尝试用具有 date_pick 类的 div 包装文本字段，将“date_pick”类或“ui-datepicker date_pick”类直接应用于文本字段......但它仍然拒绝工作并且只使用原始 css......

您可以从这里下载文件 [http://dl.dropbox.com/u/6134026/test_html.zip](http://dl.dropbox.com/u/6134026/test_html.zip)

任何提示都会很棒，一直在通过谷歌搜索答案，但没有找到......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:22:53.437

我建议您将 date_pick 方案合并到 jQuery UI 主题中，或者将提取的 date_pick 主题的 datepicker 相关样式保存到单独的文件中，然后在 jQuery UI 主题之后将其导入。

# node.js - 构建 Node.js 模块化 Web 应用程序

> ID：10380753
> 
> 赞同：2
> 
> 时间：2012-04-30T08:41:41.570
> 
> 标签：node.js, module, express

如何使用 Node.js 构建模块化 Web 应用程序？我应该使用哪些模块来编写它？我正在使用 express MVC 这是否被视为模块化系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:22:51.073

您需要查看 Express “Route Separation” 示例：

[https://github.com/visionmedia/express/tree/master/examples/route-separation](https://github.com/visionmedia/express/tree/master/examples/route-separation)

# security - 安全问题：仅在 cookie 中维护 HTTP 会话

> ID：10380756
> 
> 赞同：0
> 
> 时间：2012-04-30T08:41:54.563
> 
> 标签：security, web-applications, session-cookies

如果我仅在 cookie 中维护 HTTP 会话，有人可以向我解释可能出现的安全问题（以及如何出现）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:41:07.410

您可以仅使用 cookie 对会话管理进行编码。管理会话信息需要很多部分。如果管理 cookie 过期时间戳、安全 cookie、会话 ID 生成等任何流程都可能导致以下问题 -

*   cookie 可以被盗并重复使用
*   操纵 cookie 可能导致权限升级和未经授权的访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:30:41.957

好吧，会话本身是不安全的，您在应用程序中为拥有共享密钥的人打开了一个漏洞。但这是可以忍受的。当有人获得您的 Session id 时，就会出现问题。为避免这种情况，您的 id 应具有 uuid 质量（真正随机）并且尽可能短。

还要考虑：如果有人能够将 JS 插入您的域（cookie 对其有效），他/她能够读取您的 cookie 并获得对某人会话的访问权限。

对于涉及安全相关内容的操作（转账、更改电子邮件/密码），您应该再次要求输入密码，以验证用户会话。

单击锁定按钮不仅会破坏您的本地 cookie，还会破坏服务器的会话，因此即使 cookie 已被读取，会话也可以被破坏。

# javascript - Codemirror - 最小行数

> ID：10380759
> 
> 赞同：4
> 
> 时间：2012-04-30T08:42:08.887
> 
> 标签：javascript, css, codemirror

有人确实有一个最小行数的解决方案 - 在[Codemirror](http://codemirror.net)中？

min-height 对我有用，但不要为高度插入空行。

**JS**

```
var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
    lineNumbers: true,
    gutter: true,
    lineWrapping: true
}); 
```

**CSS**

```
.CodeMirror-scroll {
  overflow: auto;
  height: auto; overflow: visible;
  position: relative;
  outline: none;
  min-height: 300px; /* the minimum height */
} 
```

也许有一个简单的解决方案可以为此插入空行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T08:47:56.230

删除`min-height: 300px;`并使用新行作为起始值初始化编辑器：

```
var minLines = 3;
var startingValue = '';
for (var i = 0; i < minLines; i++) {
    startingValue += '\n';
}

var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
    lineNumbers: true,
    gutter: true,
    lineWrapping: true,
    value: startingValue
}); 
```

目前，CodeMirror 的`value`选项似乎对最高版本 2.21 没有影响。这可以通过`setValue()`在初始化后使用来轻松绕过：

```
///...
// initialize as before, omitting the value option

editor.setValue(startingValue); 
```

**注意：** 确保不要设置`autoClearEmptyLines: true`，因为它会冲突并取消插入的空行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T09:41:18.420

所以伙计们，我得到了解决方案。出于任何原因，编辑器没有`value`从配置选项中获取，所以我在它之后设置了值。@Eliran 谢谢，我用你的方法来设置值。

```
editor.setValue(startingValue); 
```

**演示**

[http://jsfiddle.net/vujLv/1/](http://jsfiddle.net/vujLv/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-30T21:57:04.120

```
editor.setValue( value + "\n".repeat(10) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-17T21:13:05.637

在这里，我定义了一个 CodeMirror 选项“minLines”并操作了一些键绑定和历史记录。

这将禁止 CodeMirror 实例的行低于 minLines 值，而不仅仅是在 init 上设置这么多行。

您只需将其弹出一个名为“minLines.js”的文件并将其放入*/addons*即可使用。

这是我的[Codepen 示例](https://codepen.io/Souleste/pen/ExYygxN)。

```
// set minimum number of lines CodeMirror instance is allowed to have
(function (mod) {
    mod(CodeMirror);
})(function (CodeMirror) {
    var fill = function (cm, start, n) {
        while (start < n) {
            let count = cm.lineCount();
            cm.replaceRange("\n", { line: count - 1 }), start++;
            // remove new line change from history (otherwise user could ctrl+z to remove line)
            let history = cm.getHistory();
            history.done.pop(), history.done.pop();
            cm.setHistory(history);
            if (start == n) break;
        }
    };
    var pushLines = function (cm, selection, n) {
        // push lines to last change so that "undo" doesn't add lines back
        var line = cm.lineCount() - 1;
        var history = cm.getHistory();
        history.done[history.done.length - 2].changes.push({
            from: {
                line: line - n,
                ch: cm.getLine(line - n).length,
                sticky: null
            },
            text: [""],
            to: { line: line, ch: 0, sticky: null }
        });
        cm.setHistory(history);
        cm.setCursor({ line: selection.start.line, ch: selection.start.ch });
    };

    var keyMap = {
        Backspace: function (cm) {
            var cursor = cm.getCursor();
            var selection = {
                start: cm.getCursor(true),
                end: cm.getCursor(false)
            };

            // selection
            if (selection.start.line !== selection.end.line) {
                let func = function (e) {
                    var count = cm.lineCount(); // current number of lines
                    var n = cm.options.minLines - count; // lines needed
                    if (e.key == "Backspace" || e.code == "Backspace" || e.which == 8) {
                        fill(cm, 0, n);
                        if (count <= cm.options.minLines) pushLines(cm, selection, n);
                    }
                    cm.display.wrapper.removeEventListener("keydown", func);
                };
                cm.display.wrapper.addEventListener("keydown", func); // fires after CodeMirror.Pass

                return CodeMirror.Pass;
            } else if (selection.start.ch !== selection.end.ch) return CodeMirror.Pass;

            // cursor
            var line = cm.getLine(cursor.line);
            var prev = cm.getLine(cursor.line - 1);
            if (
                cm.lineCount() == cm.options.minLines &&
                prev !== undefined &&
                cursor.ch == 0
            ) {
                if (line.length) {
                    // add a line because this line will be attached to previous line per default behaviour
                    cm.replaceRange("\n", { line: cm.lineCount() - 1 });
                    return CodeMirror.Pass;
                } else cm.setCursor(cursor.line - 1, prev.length); // set cursor at end of previous line
            }
            if (cm.lineCount() > cm.options.minLines || cursor.ch > 0)
                return CodeMirror.Pass;
        },
        Delete: function (cm) {
            var cursor = cm.getCursor();
            var selection = {
                start: cm.getCursor(true),
                end: cm.getCursor(false)
            };

            // selection
            if (selection.start.line !== selection.end.line) {
                let func = function (e) {
                    var count = cm.lineCount(); // current number of lines
                    var n = cm.options.minLines - count; // lines needed
                    if (e.key == "Delete" || e.code == "Delete" || e.which == 46) {
                        fill(cm, 0, n);
                        if (count <= cm.options.minLines) pushLines(cm, selection, n);
                    }
                    cm.display.wrapper.removeEventListener("keydown", func);
                };
                cm.display.wrapper.addEventListener("keydown", func); // fires after CodeMirror.Pass

                return CodeMirror.Pass;
            } else if (selection.start.ch !== selection.end.ch) return CodeMirror.Pass;

            // cursor
            var line = cm.getLine(cursor.line);
            if (cm.lineCount() == cm.options.minLines) {
                if (
                    cursor.ch == 0 &&
                    (line.length !== 0 || cursor.line == cm.lineCount() - 1)
                )
                    return CodeMirror.Pass;
                if (cursor.ch == line.length && cursor.line + 1 < cm.lineCount()) {
                    // add a line because next line will be attached to this line per default behaviour
                    cm.replaceRange("\n", { line: cm.lineCount() - 1 });
                    return CodeMirror.Pass;
                } else if (cursor.ch > 0) return CodeMirror.Pass;
            } else return CodeMirror.Pass;
        }
    };

    var onCut = function (cm) {
        var selection = {
            start: cm.getCursor(true),
            end: cm.getCursor(false)
        };
        setTimeout(function () {
            // wait until after cut is complete
            var count = cm.lineCount(); // current number of lines
            var n = cm.options.minLines - count; // lines needed
            fill(fm, 0, n);
            if (count <= cm.options.minLines) pushLines(cm, selection, n);
        });
    };

    var start = function (cm) {
        // set minimum number of lines on init
        var count = cm.lineCount(); // current number of lines
        cm.setCursor(count); // set the cursor at the end of existing content
        fill(cm, 0, cm.options.minLines - count);

        cm.addKeyMap(keyMap);

        // bind events
        cm.display.wrapper.addEventListener("cut", onCut, true);
    };
    var end = function (cm) {
        cm.removeKeyMap(keyMap);

        // unbind events
        cm.display.wrapper.removeEventListener("cut", onCut, true);
    };

    CodeMirror.defineOption("minLines", undefined, function (cm, val, old) {
        if (val !== undefined && val > 0) start(cm);
        else end(cm);
    });
}); 
```

# java - 集合包含 @Query

> ID：10380764
> 
> 赞同：10
> 
> 时间：2012-04-30T08:43:12.293
> 
> 标签：java, spring, spring-data-jpa

有没有办法在`@Query`标签中使用“包含”功能？如果不是，那么实现这一点的最佳方法是什么？

例子：

```
@Query("From User u  where u.roles contains :role")
List<User> findByRole(@Param("role") Role role); 
```

该类`User`确实有一个`Collection`包含它们的`Roles`.

编辑：正如我所建议的那样，我尝试过，应用程序启动了，但是当这个方法被执行时，会发生“不匹配预期类型”的异常。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-11T07:26:09.907

只需使用以下查询即可完成：

```
@Query("From User u where :role member u.roles") 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-30T08:49:01.580

使用like 关键字。

```
@Query("From User u  where u.roles like :role") 
```

# java - 黑莓模式文本输入

> ID：10380770
> 
> 赞同：1
> 
> 时间：2012-04-30T08:43:26.797
> 
> 标签：java, api, user-interface, blackberry, dialog

BlackBerry OS (v. 4 - 6) 是否有带有文本输入字段的模式对话框？

我有一个图形应用程序，我想避免在它的画布上绘画，只需在用户的脸上扔一个模态并要求一小段文字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T09:12:33.703

试试下面的代码：

```
Dialog dialog = new Dialog(Dialog.D_OK, "Title", 0, null, 0);
EditField ef = new EditField("Input: ", "");
((DialogFieldManager)dialog.getDelegate()).getCustomManager().add(ef);

// show modal dialog, wait for response
dialog.doModal();

// get the input text
Dialog.alert(ef.getText()); 
```

对于更多的定制`net.rim.device.api.ui.component.Dialog`需要扩展。下面的代码将执行与上面相同的操作。

```
class InputDialog extends Dialog {
    private EditField inputField;

    public InputDialog() {
        super(Dialog.D_OK, "Input Dialog", 0, null, 0);
        Manager delegate = getDelegate();
        if (delegate instanceof DialogFieldManager) {
            DialogFieldManager dfm = (DialogFieldManager) delegate;
            Manager manager = dfm.getCustomManager();
            inputField = new EditField("Input: ", "", 50, EditField.EDITABLE);
            if (manager != null) {
                manager.insert(inputField, 0);
            }
        }
    }

    public String getInputText() {
        return (inputField == null) ? "" : inputField.getText();
    }
} 
```

**示例用法：**

```
InputDialog seaerchDialog = new InputDialog();
// show modal dialog, wait for response
seaerchDialog.doModal();        
// get the input text
Dialog.alert(seaerchDialog.getInputText()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T09:34:16.237

试试下面的代码：

保持这些全局：

```
Dialog dialog;    
BasicEditField bEditField = new BasicEditField(); 
```

然后像这样制作自定义对话框：

```
dialog = new Dialog(Dialog.OK, "Enter Value:", Dialog.OK, null, Dialog.DEFAULT_CLOSE);
dialog.add(bEditField); 
```

`dialog.doModal()`从某个按钮或菜单操作调用：

```
int i = dialog.doModal();
if(i == Dialog.OK) {
    Dialog.inform("The Input Text is : " + bEditField.getText());
} 
```

# ruby - Ruby：如何搜索所有文件并忽略一些不需要的文件？

> ID：10380771
> 
> 赞同：2
> 
> 时间：2012-04-30T08:43:35.297
> 
> 标签：ruby

我在 Ruby 目录搜索时遇到问题。我想实现 gitignore 文件之类的东西。当某些文件列在忽略文件中时，将不会对其进行搜索。

例如这里是一个目录列表，如果我想忽略 /bar （及其所有子文件）

```
/bar    (directory)
/bar/a.txt
/bar/b.txt
/foo
/foo/c.txt
/foo/d.txt 
```

如果我使用 `Dir["/**/*"]` 每个文件都会被搜索。我怎样才能只搜索 foo 目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:49:01.407

```
Dir["/**/*"].reject{|f|f["/bar/"]}.each do |file|
  puts file
end
=>
/foo
/foo/c.txt
/foo/d.txt 
```

如果你有多个 subs 过滤掉使用 Regexp.union，例如我所有的没有 subs \docs 和 \ruby 的谷歌驱动器文件

```
pattern = Regexp.union("C:/Users/peter/Google Drive/ruby", "C:/Users/peter/Google Drive/docs")
Dir["C:/Users/peter/Google Drive/**/**"].reject{|f|f[pattern]}.each do |file|
  p file
end 
```

# java - 在 Eclipse 中添加带有快捷方式的按钮，或仅用于 ant 任务的快捷方式

> ID：10380774
> 
> 赞同：5
> 
> 时间：2012-04-30T08:43:44.077
> 
> 标签：java, eclipse, ant

我正在开发一个项目，该项目具有适用于所有生命周期阶段的 Ant 脚本。该项目分为多个小项目，旨在使用 Eclipse 开发。常见的版本是 Indigo One。

基本上，我有兴趣放置一系列按钮，每个按钮都有一个快捷方式，或者至少只有一个快捷方式，以执行一些主要任务。相关任务是：

*   快速构建：这仅涉及前端类和jsps，我在构建器面板中通过添加调用任务的Ant构建轻松解决了这个问题，以便稍后查看按钮问题，因为“项目->”没有快捷方式建设项目”
*   完整构建：有时我需要启动一个完整构建的任务，这对于简单构建来说需要相当长的时间
*   部署：这个任务只是打包war文件并部署到本地jboss位置，目前我正在通过shell脚本手动启动jboss服务器，但我正在考虑一种方便的方法让Eclipse启动它（如果尚未启动）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:30:39.400

您可以添加几个“ant build”启动配置来运行具有指定 ant 目标和配置的 ant 脚本。

运行>外部工具...>外部工具配置...然后选择“ant build”并按“新启动配置”。在“主”选项卡上指定构建文件和“目标”上的目录，选择要在“属性”上运行的目标，添加其他属性或指定属性文件。

给每个启动配置一个描述性的名称也是一个好主意。

稍后您可以将定义的配置添加到收藏夹，并从工具栏上的外部工具（向下箭头）使用它们（请参阅：运行>外部工具...>组织收藏夹...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T08:50:18.400

您可以使用集成到 Eclipse 中的 Ant 视图。按 Ctrl+3（我认为在 mac 上为 cmd+3）并键入 Ant，然后打开视图。单击“添加构建文件”并添加相关的构建文件。然后它将在视图中列出您可以从那里运行的 ant 任务。

# c# - 如何比较 Sharepoint 列表项值？

> ID：10380777
> 
> 赞同：1
> 
> 时间：2012-04-30T08:43:54.730
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-2007

![在此处输入图像描述](../Images/5b6f9206529fe8fbe84d2dfc6d01aa6d.png)

各位，

我的列表包含日期/时间项目，我想获得最大的日期值。例如，2012 年 5 月 1 日是今天最近的一天？如何比较这些值并使用 C# 获得最新的值？我访问了代码中的列表和项目；

```
using (SPWeb web = SPContext.Current.Site.RootWeb)
{
      SPList alertList = web.Lists["Alert Status"];
      if (alertList != null)
      {
          foreach (SPListItem alertItem in alertList.Items)
          {
              DateTime startDate = (DateTime)alertItem["Alert Date"];

          }
      }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T09:12:13.460

我建议使用[CAML 查询](http://msdn.microsoft.com/en-us/library/ms467521.aspx)检索和排序项目。您可以使用[SPQuery 类](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spquery.aspx)：

```
SPList list = web.Lists["Alert Status"];

SPQuery query = new SPQuery();
query.Query = @"<OrderBy><FieldRef Name='Alert_x0020_Date' Ascending='FALSE' /></OrderBy>";
query.RowLimit = 1;

SPListItemCollection items = list.GetItems(query);
return items.Count == 0 ? DateTime.MinValue : (DateTime) items[0]["Alert Date"]; 
```

如果您的列表中有很多项目，`SPList.Items`则非常慢，因为所有项目都是从数据库中获取的。

**更新：**

你不应该处置`SPContext.Current.Site.RootWeb`. 稍后可能会被其他代码引用。使用规则*仅处理您自己打开的对象*作为指导。有关详细信息，请参阅[处置对象](http://msdn.microsoft.com/en-us/library/ee557362.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:59:21.107

如果您像这样收集日期：

```
List<DateTime> dates;
using (SPWeb web = SPContext.Current.Site.RootWeb)
{
  SPList alertList = web.Lists["Alert Status"];
  if (alertList != null)
  {
      dates = alertList.Items.Select(alertItem => (DateTime)alertItem["Alert Date"]).ToList();
  }
} 
```

这将为您提供最新的绝对日期：

`dates.OrderByDescending(date => date).First();`

这将为您提供*最接近现在*的日期：

`dates.OrderBy(date => Math.Abs((date - DateTime.Now).TotalMilliseconds)).First();`

# php - php权限在执行C exe文件时被拒绝

> ID：10380779
> 
> 赞同：-1
> 
> 时间：2012-04-30T08:44:08.130
> 
> 标签：php, apache, selinux

我使用 Fedora 14 并尝试使用反引号运算符在 php 脚本中执行 C 程序。

它说`permission denied`，但它适用于其他 bash 命令，例如`test.sh`；它只包含`ls -lrt`.

两者都`test.sh`具有`a.out`权限，并且都属于 apache 用户。

注意：它在命令行上运行良好，从浏览器访问时我得到权限被拒绝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:47:44.807

您需要为您的可执行文件创建一个新的文件上下文，以及一个允许 httpd 执行带有此上下文标记的文件的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:04:21.163

感谢您的回答。我通过禁用 SELinux 来修复它。

# servlets - java.lang.ClassNotFoundException: org.apache.catalina.loader.WebappClassLoader.loadClass 的 HelloServlet

> ID：10380782
> 
> 赞同：3
> 
> 时间：2012-04-30T08:44:18.247
> 
> 标签：servlets, web.xml, classnotfoundexception

我有一个 Hello World servlet `webapps/hello/WEB-INF/class/HelloServlet.class`，我将其注册如下`web.xml`：

```
<servlet>
    <servlet-name>helloServlet</servlet-name>
    <servlet-class>HelloServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>helloServlet</servlet-name>
    <url-pattern>/HelloServlet</url-pattern>
</servlet-mapping> 
```

但是，Tomcat 无法启动并出现以下异常：

```
Apr 30, 2012 1:50:10 PM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet HelloServlet as unavailable
Apr 30, 2012 1:50:10 PM org.apache.catalina.core.ApplicationContext log
java.lang.ClassNotFoundException: HelloServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process
(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Unknown Source)

Apr 30, 2012 1:50:10 PM org.apache.catalina.core.StandardWrapperValve invoke 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T08:47:17.247

主要问题是您的 servlet 类没有包。宣布一个。

```
package com.example;

public class HelloServlet extends HttpServlet { 
```

并且在注册时`web.xml`，请确保包含以下软件包：

```
<servlet-class>com.example.HelloServlet</servlet-class> 
```

此外，您的类文件应该在`/WEB-INF/classes`目录中，而不是`/WEB-INF/class`.

```
webapps/hello/WEB-INF/classes/com/example/HelloServlet.class 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T08:48:18.787

尝试将 HelloServlet 类保留在某个包中（不在默认包中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T01:26:30.147

现在您可以只使用注释，它会更容易：

```
package com.yourpackage;

import java.io.IOException;
import java.util.ResourceBundle;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * Servlet implementation class HelloWorldServlet
 */
@WebServlet("/HelloWorldServlet")
public class HelloWorldServlet extends HttpServlet { 
```

请参阅[WebServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebServlet.html)

干杯！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-05T10:07:20.207

我遇到了同样的问题（我使用老式的 servlet 进行“学习”），我通过重建 maven 项目（在 eclipse maven-->Update Project 中）并在 eclipse 和 tomcat 中清理项目来解决。我假设错误是由于该类不是由 maven 编译的，因此不包含在 tomcat 的编译包中。

# iphone - 如何集成 iPhone 日历 SDK

> ID：10380785
> 
> 赞同：-1
> 
> 时间：2012-04-30T08:45:02.783
> 
> 标签：iphone, sdk, calendar

我是 IOS 开发的新手，我想在我的项目中实现 iPad 日历 SDK。是否可以实现 iPad 日历 SDK。

提前致谢， Magesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:57:28.633

如果您指的是苹果在 iPhone 和 iPad 上的 Calendar.app 中使用的日历 UI 组件，那么答案很遗憾是否定的。由于人类或野兽不知道的原因，它们是私人的。:( 有大量的开源实现，其中一些可以在这里找到：

[Cocoa Controls - 日历搜索](http://cocoacontrols.com/search?utf8=%E2%9C%93&q=Calendar)

但是我不能推荐一个，到目前为止我还没有找到一个简单且适合我需要的。YMMV。有关访问日历事件的信息，[此 SO 问题](https://stackoverflow.com/questions/3941719/is-it-possible-to-accessing-iphone-notes-calendar-in-ios)可能会有所帮助。

# iphone - 肥皂请求正在返回此数据

> ID：10380786
> 
> 赞同：0
> 
> 时间：2012-04-30T08:45:19.307
> 
> 标签：iphone, soap

当我在肥皂网络服务中点击此链接时，第 1 行上的“soap:Envelope”开始标记与“soapody”的结束标记不匹配。

[http://74.54.137.138:3052/Service.asmx?op=GetFlightDetailforSQAR](http://74.54.137.138:3052/Service.asmx?op=GetFlightDetailforSQAR)

2:10 PMrecevedstring--->sooperverServer 无法处理请求。--->

第 1 行的“soap:Envelope”开始标签与“soapody”的结束标签不匹配。第 1 行，位置 343。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:20:13.640

将此代码替换为您的代码：

> -（无效）创建连接{

```
 NSAutoreleasePool *pool = [NSAutoreleasePool new];

   NSString *soapMsg = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                     "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                     "<soap:Body>"
                     "<GetFlightDetailforSQAR xmlns=\"http://tempuri.org/\">"
                     "<FlightNo>100</FlightNo>"
                     "<UserBadgeNo>500</UserBadgeNo>"
                     "</GetFlightDetailforSQAR>"
                     "</soap:Body>"
                     "</soap:Envelope>"];

   NSURL *url = [NSURL URLWithString: @"http://74.54.137.138:3052/Service.asmx?op=GetFlightDetailforSQAR"];

   NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

   NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMsg length]];
   [req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
   [req addValue:@"http://tempuri.org/GetFlightDetailforSQAR" forHTTPHeaderField:@"SOAPAction"];
   [req addValue:msgLength forHTTPHeaderField:@"Content-Length"];
   [req setHTTPMethod:@"POST"];
   [req setHTTPBody: [soapMsg dataUsingEncoding:NSUTF8StringEncoding]];

   conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
   if (conn) {
    webData = [[NSMutableData data] retain];
  } 
      [pool release];
} 
```

*   (void)parserDidStartDocument:(NSXMLParser *)parser {

    NSLog(@"找到文件并开始解析");

}

*   (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURIqualifiedName:(NSString *)qName 属性:(NSDictionary *)attributeDict

{

NSLog(@"起始元素：%@",elementName);

}

*   (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string

{

```
NSLog(@"String %@",string); 
```

}

*   (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURIqualifiedName:(NSString *)qName

{

NSLog(@"END ELEMENT :%@",elementName);

}

# javascript - 页面加载后加载 iFrame

> ID：10380787
> 
> 赞同：7
> 
> 时间：2012-04-30T08:45:19.663
> 
> 标签：javascript, iframe, html, load

我有一个带有一些 iFrame 的 PHP 页面，这些 iFrame 导致页面加载速度相当慢。页面完全加载后，如何仅加载这些 iFrame？我假设我需要使用 JavaScript，但我还没有找到有效的代码。

非常感谢。

编辑 - iFrame 需要出现在 PHP 回显中。

这是代码：

```
<?php
            while($i = mysql_fetch_array($e))
            {
        ?>

    <div class='dhtmlgoodies_question'>
        <div style='float:left'><img src='../images/categories/<?=$i[Category]?>.png'></div>
        <div class='name'><?=$i[Name]?></div>
        <div class='location'><?=$i[Area]?></div>
    </div>

    <div class='dhtmlgoodies_answer'>
    <div>

        <div style='background-color:#FFF; margin-left:248px; padding:10px; color:#666'>
        <?=$i[Address]?><br>
        <?=$i[Area]?><br>
        <a href='http://maps.google.com/maps?q=<?=$i[Postcode]?>'><?=$i[Postcode]?></a><
        <p>
        <?=$i[ContactName]?><br>
        <?=$i[TelephoneNumber]?>
        </div>
        <p>
        <a href='http://crbase.phil-howell.com/view.php?Employer=<?=$i[Employer]?>'>
        Edit this entry
        </a>
        <br>

    //HERE IS WHERE I WANT TO LOAD THE iFRAME

    </p>
        </div>

    </div>
</div>
        <?php
            }
        ?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T10:07:55.833

正如@Sudhir 和@Richard 所展示的，您可以通过延迟加载`iframe`内容来解决这个问题，并且只需要几行javascript 行。

不过，有时将`iframe`元素放入源代码比在运行时创建元素更方便。好吧，您也可以拥有它，通过最初创建`iframe`指向`about:blank`并在运行时更改其源的元素：

```
<html>
<head>
<script>
    function loadDeferredIframe() {
        // this function will load the Google homepage into the iframe
        var iframe = document.getElementById("my-deferred-iframe");
        iframe.src = "./" // here goes your url
    };
    window.onload = loadDeferredIframe;
</script>
</head>    
<body>
    <p>some content</p>

    <!-- the following iframe will be rendered with no content -->
    <iframe id="my-deferred-iframe" src="about:blank" />

    <p>some content</p>
</body>
</html> 
```

为@PhilHowell 编辑：我希望这个想法现在更清楚了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T08:53:15.557

尝试在你的身体末端添加：

```
 window.onload = function() {
    var iframe = document.createElement('iframe');
    iframe.style.display = "none";
    iframe.src = your_iframe_source_url;
    document.body.appendChild(iframe);
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T08:54:06.270

如果您愿意，您可以在页面加载后加载您的 iframe，如下所示：

为了简单起见，我在这里使用了 jquery：

```
$(function() {

   $('<iframe />').attr('src', 'http://www.google.com').appendTo('#yourelementId'); 

}); 
```

在这里查看更多：

[http://jquery-howto.blogspot.co.uk/2010/02/dynamically-create-iframe-with-jquery.html](http://jquery-howto.blogspot.co.uk/2010/02/dynamically-create-iframe-with-jquery.html)

[JS iframe 加载器](https://stackoverflow.com/questions/5194679/js-iframe-loader)

所以对于 PHP Echo：

```
<?php

  echo "<div id='yourelementId'></div><script>$(function() { $('<iframe />').attr('src', 'http://www.google.com').appendTo('#yourelementId');});</script>"; 

?> 
```

哦，请确保您已将 jQuery 链接到或使用 Sudhir 提供的代码。

# html - Twig 删除缩进空格

> ID：10380789
> 
> 赞同：5
> 
> 时间：2012-04-30T08:45:27.200
> 
> 标签：html, whitespace, twig

我有以下[代码](http://jsfiddle.net/junior87/8UrLY/)。为了获得 html 标记的可读性，我对每个内联元素进行了换行并缩进（1 个制表符 = 4 个空格）。每个元素都附加了一个空白字符`&nbsp;`。当我使用 Chrome v18.0.1025.162 浏览器查看 DOM 时，我注意到有一个我期望使用的空格，`&nbsp`但是还有另一个空格字符。据我所知，浏览器应该只显示`&nbsp;`下一行缩进的 和一个空格（例如，两个缩进制表符是 8 个空格折叠成一个 -> 我不想要）。

当我使用时`{ % spaceless %} ... {% endspaceless %}`没有任何变化。文档说：

> 自动删除模板标签后的第一个换行符（如在 PHP 中）。模板引擎不会进一步修改空格，因此每个空格（空格、制表符、换行符等）都将原封不动地返回。

似乎只有内联元素的空白选项卡才*不会*被忽略和显示。是因为它在块元素中并且保留了空格吗？

**那么如何删除空格（从缩进中）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:32:43.457

好的，我只需删除额外的`&nbsp;`实体就可以了。使用空格（1 个制表符 = 4 个空格）对元素进行缩进的新行仍然会创建一个空格，但是因为我想要它，所以到目前为止它还可以，并且可以保持标记的可读性。感觉不对，或者说如果我在这个问题上有更多的意见会感觉更好。

# modelica - 如何覆盖默认方程？

> ID：10380792
> 
> 赞同：1
> 
> 时间：2012-04-30T08:45:45.967
> 
> 标签：modelica

所有派生类都应从其基类继承一些默认方程式。当默认方程对派生类无效时，它应该重新声明它。下面这个简约的例子有点傻。

我是否走在实现上述目标的正确轨道上？或者有没有更好的方法来用 Modelica 语言表达这一点？

```
package Pkg

  partial class Equations
    Real x;
  end Equations;

  class DefaultEquations
    extends Equations;
    equation
      x = 0.0;
  end DefaultEquations;

  class Base
    replaceable class T = DefaultEquations;
    replaceable T equations extends Equations;
  end Base;

end Pkg;

model TestEquations

  import Pkg.*;

  class CustomEquation
    extends Equations;
    equation
      x = 3;
  end CustomEquation;

  class CustomizedClass
    extends Base(redeclare class T = CustomEquation);
  end CustomizedClass;

  CustomizedClass customized;

end TestEquations; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:48:07.677

如果我了解您的目标，则有一种非常简单的方法可以实现这一目标。考虑这个替代方案：

```
package Pkg
  partial class Equations
    Real x;
  end Equations;

  class DefaultEquations
    extends Equations(x=0);
  end DefaultEquations;

  class Base
    replaceable class T = DefaultEquations;
    replaceable T equations extends Equations;
  end Base;
end Pkg;

model TestEquations
  import Pkg.*;

  class CustomEquation
    extends Equations(x=3);
  end CustomEquation;

  class CustomizedClass
    extends Base(redeclare class T = CustomEquation);
  end CustomizedClass;

  CustomizedClass customized;
end TestEquations; 
```

但是，如果您愿意消除所有重新声明，则可以进一步简化它：

```
package Pkg
  class Equations
    Real x;
  end Equations;

  class Base
    Equations equations;
  end Base;
end Pkg;

model TestEquations
  import Pkg.*;

  class CustomizedClass
    extends Base(equations(x=3));
  end CustomizedClass;

  CustomizedClass customized;
end TestEquations; 
```

...如果您不需要所有继承层，则更进一步：

```
package Pkg
  class Equations
    Real x;
  end Equations;
end Pkg;

model TestEquations
  import Pkg.*;

  Equations equations(x=3);
end TestEquations; 
```

这些修改（`x=3`部分）对变量的作用与对参数的作用相同。因此，您可以为任何变量（出现在变量声明之后的部分）采用“初始化方程”并覆盖。这种方法的局限性在于它不允许您覆盖一般方程，而只能覆盖显式求解单个变量的方程。

**更新（2012 年 5 月 2 日）**

如果您需要处理一般方程（包括引入内部状态的可能性），那么您还必须处理“平衡”方程的问题。也就是说，Modelica (v 3+) 包括关于被认为是部分（不可实例化）模型与非部分模型的某些语义。关键是，您需要向编译器提供足够的信息，说明内部计算的内容以及外部提供的内容，以便它确定定义是否真的是部分的。

一般来说，您应该定义一个部分模型/块来描述潜在的外部交互，然后使用可替换的组件来替换方程式。根据您的原始示例，它可能看起来像这样：

```
package Pkg
  partial block Equations
    input Real y; // Input for any information it will need in the calculation
    output Real x; // Output to indicate something the model will compute
  end Equations;

  block DefaultEquations
    extends Equations;
  equation
    x = 0;
  end DefaultEquations;

  class Base
    replaceable DefaultEquations equations constrainedby Equations;
  end Base;
end Pkg;

model TestEquations
  import Pkg.*;

  block CustomEquation
    extends Equations
  equation
    x*x + y*y = 25.0; // example of non explicit equation
  end CustomEquation;

  class CustomizedClass
    extends Base(redeclare CustomEquation equations);
  end CustomizedClass;

  CustomizedClass customized;
end TestEquations; 
```

我应该补充一点（至少在你上面的例子中），你可以完全消除`Base`and `CustomizedClass`。但我把它们留在里面是因为我认为它们以某种方式映射到你的实际问题。最后，我从不`class`在实际代码中使用（我尝试更具体），所以我将您的一些定义更改为`block`定义。

# spring - 显示了纯配置 xml

> ID：10380801
> 
> 赞同：0
> 
> 时间：2012-04-30T08:46:34.557
> 
> 标签：spring, tiles

请理解我的英语不好。

我负责维护一个带有 Spring 和 MVC 和 VIEW 的磁贴的网站。

Tiles 没有向我显示正确的输出，并且控制台上没有打印 java 错误消息。而不是正确输出图块，而是显示纯 xml 文件......

这是我在网络浏览器上打印的来源和输出。

**web.xml**

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring-root-applicationContext.xml
        /WEB-INF/spring-security-applicationContext.xml
    </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <servlet-class>DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-child-applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

* * *

**控制器.java**

```
@RequestMapping(value = "/home/login", method = RequestMethod.GET)
public String login(Map modelMap, HttpServletRequest request) {
    return "/home/member/login.htiles";
} 
```

* * *

**瓷砖-layouts.xml**

```
<definition name="layouts_home_tiles" template="/WEB-INF/views/layouts/layouts_home_tiles.jsp">
    <put-attribute name="header"    value="/WEB-INF/views/layouts/home_header.jsp" />
    <put-attribute name="content"   value="" />
    <put-attribute name="footer"    value="/WEB-INF/views/layouts/home_footer.jsp" />
</definition>

<definition name="*.htiles" extends="layouts_home_tiles">
    <put-attribute name="content"   value="/WEB-INF/views/{1}.jsp" />
</definition>
<definition name="*/*.htiles" extends="layouts_home_tiles">
    <put-attribute name="content"   value="/WEB-INF/views/{1}/{2}.jsp" />
</definition>
<definition name="*/*/*.htiles" extends="layouts_home_tiles">
    <put-attribute name="content"   value="/WEB-INF/views/{1}/{2}/{3}.jsp" />
</definition>
<definition name="*/*/*/*.htiles" extends="layouts_home_tiles">
    <put-attribute name="content"   value="/WEB-INF/views/{1}/{2}/{3}/{4}.jsp" />
</definition> 
```

* * *

**layouts_sub_tiles.jsp**

```
<%@ page language="java" contentType="text/html; charset=EUC-KR"
pageEncoding="EUC-KR"%>
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="t"%>

<t:insertAttribute name="header"/>
<t:insertAttribute name="content"/>
<t:insertAttribute name="footer"/> 
```

* * *

**网页浏览器输出**

```
<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="t"%>

<t:insertAttribute name="header"/>
<t:insertAttribute name="content"/>
<t:insertAttribute name="footer"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:19:14.847

`TilesViewResolver`除了用于 jsp 的解析器（通常`InternalResourceViewResolver`）之外，您需要在您的上下文中定义。

这是一个适合我的配置片段：

```
 <bean id="tilesViewResolver"
            class="org.springframework.web.servlet.view.tiles2.TilesViewResolver">
            <property name="order" value="0" /> <!-- you need to tell spring to use this resolver first, hence order=0 -->
    </bean>

    <bean id="tilesConfigurer"
            class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
            <property name="definitions" value="PATH_TO_YOUR_TILES_XML_CONFIG" />
    </bean>

    <bean id="viewResolver"
            class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="order" value="1" /><!-- this resolver will be used if the view can't be resolved by tiles resolver  hence order=1-->

            <property name="prefix" value="/WEB-INF/jsp/" />
            <property name="suffix" value=".jsp" />
    </bean> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:49:16.277

@soulcheck 这是 DEBUG LEVEL Log 的输出，我不太明白。谢谢你的关心

```
 INFO annotation.ClassPathScanningCandidateComponentProvider[registerDefaultFilters(186)] : JSR-330 'javax.inject.Named' annotation found and supported for component scanning
DEBUG support.PathMatchingResourcePatternResolver[doFindMatchingFileSystemResources(552)] : Looking for matching resources in directory tree [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\admin] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\config] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\login] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\monitor] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\monitor_demo] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\json] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\mobile] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\sqlmap] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\sqlmap\admin] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\sqlmap\home] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\sqlmap\monitor] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\sqlmap\monitor_demo] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\sqlmap\note] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\sqlmap\project] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[doRetrieveMatchingFiles(614)] : Searching directory [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\project] for files matching pattern [D:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/cyoz/WEB-INF/classes/com/byto/**/*.class]
DEBUG support.PathMatchingResourcePatternResolver[_findPathMatchingResources(353)] : Resolved location pattern [classpath*:com/byto/**/*.class] to resources [file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\admin\AdminController.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\admin\AdminService.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\admin\AdminServiceImpl.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\config\BytoSendmail.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\config\Constant.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\config\encodeCookie.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\config\PageNavigation.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\config\StringUtil.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\config\Unescape.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\login\LoginCheck.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\login\LoginFailure.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\login\LoginSuccess.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\login\LoginUser.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\login\LogoutCheck.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\login\RememberMe.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\login\RememberMeAuth.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\MainController.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\MainService.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\home\MainServiceImpl.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\HomeController.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\HomeService.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\HomeServiceImpl.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\monitor\MonitorController.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\monitor\MonitorService.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\monitor\MonitorServiceImpl.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\monitor_demo\MonitorDemoController.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\monitor_demo\MonitorDemoService.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\monitor_demo\MonitorDemoServiceImpl.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\json\ErrorMessage.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\json\GetXMLData.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\json\JsonController.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\json\JsonService.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\json\JsonServiceImpl.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\json\Sync.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\mobile\NoteController.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\mobile\NoteService.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\openapi\note\mobile\NoteServiceImpl.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\project\ProjectController.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\project\ProjectService.class], file [D:\dev\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\cyoz\WEB-INF\classes\com\byto\project\ProjectServiceImpl.class]]
DEBUG support.DefaultListableBeanFactory[doGetBean(242)] : Returning cached instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
DEBUG web.FilterChainProxy[getFilters(195)] : Converted URL to lowercase, from: '/home/'; to: '/home/'
DEBUG web.FilterChainProxy[getFilters(202)] : Candidate is: '/home/'; pattern is /**; matched=true
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 1 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
DEBUG context.HttpSessionSecurityContextRepository[readSecurityContextFromSession(130)] : No HttpSession currently exists
DEBUG context.HttpSessionSecurityContextRepository[loadContext(88)] : No SecurityContext was available from the HttpSession: null. A new one will be created.
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 2 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 3 of 11 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 4 of 11 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 5 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 6 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 7 of 11 in additional filter chain; firing Filter: 'RememberMeAuthenticationFilter'
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
DEBUG authentication.AnonymousAuthenticationFilter[doFilter(67)] : Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
DEBUG session.SessionManagementFilter[doFilter(87)] : Requested session IDE5DEEABF96803AAC5BA0A76B61C2769F is invalid.
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
DEBUG web.FilterChainProxy[doFilter(375)] : /home/ at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
DEBUG expression.ExpressionBasedFilterInvocationSecurityMetadataSource[lookupAttributes(173)] : Converted URL to lowercase, from: '/home/'; to: '/home/'
DEBUG expression.ExpressionBasedFilterInvocationSecurityMetadataSource[extractMatchingAttributes(200)] : Candidate is: '/home/'; pattern is /admin/**; matched=false
DEBUG expression.ExpressionBasedFilterInvocationSecurityMetadataSource[extractMatchingAttributes(200)] : Candidate is: '/home/'; pattern is /home/board/**; matched=false
DEBUG expression.ExpressionBasedFilterInvocationSecurityMetadataSource[extractMatchingAttributes(200)] : Candidate is: '/home/'; pattern is /project/**; matched=false
DEBUG expression.ExpressionBasedFilterInvocationSecurityMetadataSource[extractMatchingAttributes(200)] : Candidate is: '/home/'; pattern is /monitor/; matched=false
DEBUG expression.ExpressionBasedFilterInvocationSecurityMetadataSource[extractMatchingAttributes(200)] : Candidate is: '/home/'; pattern is /monitor/reg_app; matched=false
DEBUG expression.ExpressionBasedFilterInvocationSecurityMetadataSource[extractMatchingAttributes(200)] : Candidate is: '/home/'; pattern is /monitor/reg_app_check; matched=false
DEBUG intercept.FilterSecurityInterceptor[beforeInvocation(182)] : Public object - authentication not attempted
DEBUG web.FilterChainProxy[doFilter(362)] : /home/ reached end of additional filter chain; proceeding with original chain
DEBUG servlet.DispatcherServlet[doService(693)] : DispatcherServlet with name 'dispatcher' processing GET request for [/home/]
DEBUG annotation.DefaultAnnotationHandlerMapping[getHandlerInternal(221)] : Mapping [/home/] to HandlerExecutionChain with handler [com.byto.openapi.home.MainController@1c869e8f] and 2 interceptors
DEBUG servlet.DispatcherServlet[doDispatch(769)] : Last-Modified value for [/home/] is: -1
DEBUG support.HandlerMethodInvoker[invokeHandlerMethod(173)] : Invoking request handler method: public java.lang.String com.byto.openapi.home.MainController.main(java.util.Map,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
DEBUG ibatis.SqlMapClientTemplate[execute(168)] : Opened SqlMapSession [com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl@5629626a] for iBATIS operation
DEBUG sql.Connection[debug(27)] : {conn-100006} Connection
DEBUG ibatis.SqlMapClientTemplate[execute(185)] : Obtained JDBC Connection [Transaction-aware proxy for target Connection  from DataSource [org.apache.commons.dbcp.BasicDataSource@1e0c386d]] for iBATIS operation
DEBUG sql.Connection[debug(27)] : {conn-100006} Preparing Statement:   SELECT wr_id,wr_subject,wr_content,  DATE_FORMAT(wr_idate, '%Y.%m.%d') AS wr_idate,  wr_del_flag,wr_hit,wr_category,wr_notice,wr_file1,wr_file2,wr_file1_count,wr_file2_count  FROM byto_board_notice WHERE wr_del_flag=0  ORDER BY wr_id DESC LIMIT 7   
DEBUG datasource.DataSourceUtils[doGetConnection(110)] : Fetching JDBC Connection from DataSource
DEBUG sql.PreparedStatement[debug(27)] : {pstm-100007} Executing Statement:   SELECT wr_id,wr_subject,wr_content,  DATE_FORMAT(wr_idate, '%Y.%m.%d') AS wr_idate,  wr_del_flag,wr_hit,wr_category,wr_notice,wr_file1,wr_file2,wr_file1_count,wr_file2_count  FROM byto_board_notice WHERE wr_del_flag=0  ORDER BY wr_id DESC LIMIT 7   
DEBUG sql.PreparedStatement[debug(27)] : {pstm-100007} Parameters: []
DEBUG sql.PreparedStatement[debug(27)] : {pstm-100007} Types: []
DEBUG sql.ResultSet[debug(27)] : {rset-100008} ResultSet
DEBUG sql.ResultSet[debug(27)] : {rset-100008} Header: [wr_id, wr_subject, wr_content, wr_idate, wr_del_flag, wr_hit, wr_category, wr_notice, wr_file1, wr_file2, wr_file1_count, wr_file2_count]
DEBUG sql.ResultSet[debug(27)] : {rset-100008} Result: [9, 공지입니다, 공지입니다, 2011.11.07, 0, 18, 일반공지, 0, , , 0, 0]
DEBUG sql.ResultSet[debug(27)] : {rset-100008} Result: [8, 공지입니다, 공지입니다, 2011.11.07, 0, 3, 일반공지, 0, , , 0, 0]
DEBUG sql.ResultSet[debug(27)] : {rset-100008} Result: [7, 공지입니다 공지입니다 공지입니다 공지입니다, 공지입니다 , 2011.11.07, 0, 5, 일반공지, 0, , , 0, 0]
DEBUG sql.ResultSet[debug(27)] : {rset-100008} Result: [6, 공지입니다 공지입니다, 공지입니다공지입니다공지입니다공지입니다공지입니다 , 2011.11.07, 0, 7, 일반공지, 0, , , 0, 0]
DEBUG sql.ResultSet[debug(27)] : {rset-100008} Result: [5, 공지입니다, 공지입니다, 2011.11.07, 0, 3, 일반공지, 0, , , 0, 0]
DEBUG sql.ResultSet[debug(27)] : {rset-100008} Result: [4, 공지입니다, 공지입니다, 2011.11.03, 0, 5, 일반공지, 0, login_201111031845341.gif, , 4, 0]
DEBUG sql.ResultSet[debug(27)] : {rset-100008} Result: [3, 공지사항 입니다, 공지사항 입니다, 2011.11.03, 0, 6, 일반공지, 0, , , 0, 0]
DEBUG datasource.DataSourceUtils[doReleaseConnection(332)] : Returning JDBC Connection to DataSource
DEBUG servlet.DispatcherServlet[render(1045)] : Rendering view [org.springframework.web.servlet.view.tiles2.TilesView: name 'home/index.htiles'; URL [home/index.htiles]] in DispatcherServlet with name 'dispatcher'
DEBUG tiles2.TilesView[exposeModelAsRequestAttributes(328)] : Added model object 'mainNoticeList' of type [java.util.ArrayList] to request in view with name 'home/index.htiles'
DEBUG impl.BasicTilesContainer[render(615)] : Render request recieved for definition 'home/index.htiles'
DEBUG servlet.DispatcherServlet[doService(693)] : DispatcherServlet with name 'dispatcher' processing GET request for [/WEB-INF/views/layouts/layouts_home_tiles.jsp]
DEBUG handler.SimpleUrlHandlerMapping[lookupHandler(266)] : Matching patterns for request [/WEB-INF/views/layouts/layouts_home_tiles.jsp] are [/**]
DEBUG handler.SimpleUrlHandlerMapping[lookupHandler(290)] : URI Template variables for request [/WEB-INF/views/layouts/layouts_home_tiles.jsp] are {}
DEBUG handler.SimpleUrlHandlerMapping[getHandlerInternal(221)] : Mapping [/WEB-INF/views/layouts/layouts_home_tiles.jsp] to HandlerExecutionChain with handler [org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler@3789346e] and 2 interceptors
DEBUG servlet.DispatcherServlet[doDispatch(769)] : Last-Modified value for [/WEB-INF/views/layouts/layouts_home_tiles.jsp] is: -1
DEBUG servlet.DispatcherServlet[doDispatch(824)] : Null ModelAndView returned to DispatcherServlet with name 'dispatcher': assuming HandlerAdapter completed request handling
DEBUG servlet.DispatcherServlet[processRequest(674)] : Successfully completed request
DEBUG servlet.DispatcherServlet[processRequest(674)] : Successfully completed request
DEBUG access.ExceptionTranslationFilter[doFilter(100)] : Chain processed normally
DEBUG context.HttpSessionSecurityContextRepository[saveContext(338)] : SecurityContext is empty or anonymous - context will not be stored in HttpSession. 
DEBUG context.SecurityContextPersistenceFilter[doFilter(89)] : SecurityContextHolder now cleared, as request processing completed
DEBUG servlet.DispatcherServlet[doService(693)] : DispatcherServlet with name 'dispatcher' processing GET request for [/favicon.ico]
DEBUG handler.SimpleUrlHandlerMapping[lookupHandler(266)] : Matching patterns for request [/favicon.ico] are [/**]
DEBUG handler.SimpleUrlHandlerMapping[lookupHandler(290)] : URI Template variables for request [/favicon.ico] are {}
DEBUG handler.SimpleUrlHandlerMapping[getHandlerInternal(221)] : Mapping [/favicon.ico] to HandlerExecutionChain with handler [org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler@3789346e] and 2 interceptors
DEBUG servlet.DispatcherServlet[doDispatch(769)] : Last-Modified value for [/favicon.ico] is: -1
DEBUG servlet.DispatcherServlet[doDispatch(824)] : Null ModelAndView returned to DispatcherServlet with name 'dispatcher': assuming HandlerAdapter completed request handling
DEBUG servlet.DispatcherServlet[processRequest(674)] : Successfully completed request 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:01:20.500

我修改**了 web.xml**

/* 到 /

这解决了。

# ruby-on-rails-3 - Rails 3.1 - 在 routes.rb 中，使用通配符，匹配 '*' 没有捕获任何路线

> ID：10380805
> 
> 赞同：1
> 
> 时间：2012-04-30T08:46:52.643
> 
> 标签：ruby-on-rails-3, exception-handling, routing, wildcard

在我的`pages_controller.rb`文件中，我有一个`not_found`动作。我想要任何与我的`routes.rb`文件中的条目不匹配的路线去`pages#not_found`。为了利用通配符，我将其作为 routes.rb 文件的最后一行：

```
match '*' => 'pages#not_found' 
```

我是基于我在 ruby​​ 路由指南 (http://guides.rubyonrails.org/v3.1.0/routing.html) 中读到的关于通配符的内容。但是它不起作用。我没有去`pages#not_found`，而是得到：（`AcctionController::RoutingError (No route matches [GET] "*"`不幸的是，它被 ActionDispatch 捕获了，所以我没有办法处理异常。）

故障排除，我把它放在我的 routes.rb 文件中：

```
match 'foobar' => 'pages#not_found' 
```

not_found 操作`http://localhost:3000/foobar`按预期执行。我尝试了部分通配符：

```
match 'foo*' => 'pages#not_found' 
```

根据 Rails 指南，这应该与[http://localhost:3000/foobar](http://localhost:3000/foobar)匹配，但事实并非如此。您是否需要做一些特别的事情才能让通配符在路线中起作用？我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T08:52:51.873

也许试试这个：

```
match '*path' => 'pages#not_found' 
```

# php - 用于支持管理员模块的 Joomla 2.5 的 ACL

> ID：10380807
> 
> 赞同：-1
> 
> 时间：2012-04-30T08:47:11.897
> 
> 标签：php, joomla

我需要有关 Joomla ACL 的帮助。我正在使用 Joomla 2.5。我需要授予基于组件的用户权限。请让我知道这怎么可能？或者是否有任何免费的扩展可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:19:45.767

你的问题有点含糊。如果您说您想让您的管理员访问某些组件和模块，那么是的，这绝对是可能的。查看用户访问级别 - [http://docs.joomla.org/User_Group_Access_levels_explained_in_simple_terms](http://docs.joomla.org/User_Group_Access_levels_explained_in_simple_terms)。

或者，您可以使用 Joomla！扩展，这里有一个很好的列表 - [http://extensions.joomla.org/extensions/access-a-security/site-access/backend-a-full-access-control](http://extensions.joomla.org/extensions/access-a-security/site-access/backend-a-full-access-control)。

如果您想使用标准的 Joomla！ACL 或自定义扩展，我不记得 ACL 可以自定义的程度。

# java - TreeSet 和 HashSet 中的 addAll 是如何工作的？

> ID：10380808
> 
> 赞同：5
> 
> 时间：2012-04-30T08:47:16.960
> 
> 标签：java, hashset, treeset

当我在 treeSet 上添加数据时，我几乎丢失了所有数据。看来我只有我的集合的第一个元素。

我阅读了这个问题[Hashset vs Treeset](https://stackoverflow.com/questions/1463284/hashset-vs-treeset)以进行代码优化，并尝试做类似的事情。但我并没有真正成功。

输入 ：

```
int iValue = 0;

    HashSet<TagResult> results = new HashSet<TagResult>();
    for(Document doc : docs) {
        NodeList nList = doc.getElementsByTagName("TEXT");

        for (int temp = 0; temp < nList.getLength(); temp++) {
            Node nNode = nList.item(temp);
            if (nNode.getNodeType() == Node.ELEMENT_NODE) {
                Element eElement = (Element) nNode;
                iValue = searchWords.searchOnTag(eElement, szSearch);
                if(iValue > 0) {
                    results.add(new TagResult(eElement, iValue));
                }
            }
        }
    }
    System.out.println("Set :\n-------------------------");
    for(TagResult result : results) {
        System.out.println(getTagValue("Tag",result.getElement()));
    }
    Set<TagResult> sortedResult = new TreeSet<TagResult>(new Comparator<TagResult>() {

        public int compare(TagResult e1, TagResult e2) {
            return e2.getValue() - e1.getValue();
        }
    });

    sortedResult.addAll(results);

    System.out.println("Sorted Result :\n-------------------------");
    for(TagResult result : sortedResult) {
        System.out.println(getTagValue("Tag",result.getElement()));
} 
```

执行结果告诉我：

输出

放 ：

```
TXT_KEY_RELIGION_POSITIF_MEDIAN_05
TXT_KEY_RELIGION_POSITIF_MEDIAN_02
TXT_KEY_RELIGION_POSITIF_04
TXT_KEY_RELIGION_POSITIF_06
TXT_KEY_RELIGION_POSITIF_05
TXT_KEY_RELIGION_POSITIF_03
TXT_KEY_RELIGION_POSITIF_MEDIAN_06
TXT_KEY_RELIGION_POSITIF_MEDIAN_01
TXT_KEY_RELIGION_POSITIF_MEDIAN_04
TXT_KEY_RELIGION_POSITIF_MEDIAN_08
TXT_KEY_RELIGION_POSITIF_MEDIAN_03
TXT_KEY_RELIGION_POSITIF_02
TXT_KEY_RELIGION_POSITIF_07
TXT_KEY_RELIGION_POSITIF_01
TXT_KEY_RELIGION_POSITIF_MEDIAN_09
TXT_KEY_RELIGION_POSITIF_MEDIAN_07 
```

排序结果：

```
TXT_KEY_RELIGION_POSITIF_MEDIAN_05 
```

我不明白为什么我有这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T08:52:13.093

我会想象

```
e2.getValue() - e1.getValue(); 
```

为您的集合中的所有项目返回 0，然后将其视为相等。尝试打印`tag.getValue()`您的标签以检查是否是这种情况。

[`TreeSet`从javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)中提取（强调我的）：

> 请注意，如果要正确实现 Set 接口，集合维护的顺序（无论是否提供显式比较器）必须与 equals 一致。（参见 Comparable 或 Comparator 以了解与 equals 一致的精确定义。）这是因为 Set 接口是根据 equals 操作定义的，但**TreeSet 实例使用其 compareTo**（或 compare）方法执行所有元素比较，所以**两个从集合的角度来看，此方法认为相等的元素是 equal**。一个集合的行为是明确定义的，即使它的顺序与equals不一致；它只是不遵守 Set 接口的一般约定。

# android - 根据android sqlite数据库中的id选择时不获取数据

> ID：10380812
> 
> 赞同：0
> 
> 时间：2012-04-30T08:47:30.400
> 
> 标签：android, sqlite

我在**DBAdater.java**类中尝试了这个查询：

```
 public Cursor getUserName(int userId) {

    Cursor c = db.query(REGISTER_TABLE, new String[] { REGISTER_ID,
            REGISTER_UN }, REGISTER_ID + " = " +userId,null,  null, null,
            null, null);
    if (c != null) {
        c.moveToFirst();
    }
    return c;
} 
```

**或者**

```
public Cursor get_user(int id) {
    return db.query(REGISTER_TABLE,
            new String[] { REGISTER_ID, REGISTER_UN }, REGISTER_ID + "="

            + "'" + id + "'", null, null, null, null, null);
} 
```

**Test.java** 获取用户名

```
Cursor clogin = db.getUserName(userId);
Log.i("user name  with repect to user id ", ""+clogin.getString(clogin.getColumnIndex(DBAdapter.RID))); 
```

当我运行这个时，我得到这个错误：

```
04-30 14:18:52.925: E/AndroidRuntime(639): FATAL EXCEPTION: main
04-30 14:18:52.925: E/AndroidRuntime(639): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.linkplus/com.android.Hello.test.test}: java.lang.NullPointerException
04-30 14:18:52.925: E/AndroidRuntime(639):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
......
......
04-30 14:18:52.925: E/AndroidRuntime(639): Caused by: java.lang.NullPointerException
04-30 14:18:52.925: E/AndroidRuntime(639):  at com.android.Hello.test.Profiles.getUserName(Profiles.java:63)
04-30 14:18:52.925: E/AndroidRuntime(639):  at com.android.Hello.test.Profiles.onCreate(Profiles.java:51)
04-30 14:18:52.925: E/AndroidRuntime(639):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
```

请指出此代码的错误是什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:16:23.473

尝试修改您的查询，例如

```
Cursor c = db.query(REGISTER_TABLE, new String[] { REGISTER_ID,
            REGISTER_UN }, REGISTER_ID + "=?", new String[]{userId},  null, null,
            null, null); 
```

同样在**text.java**检查空光标

```
Cursor clogin = db.getUserName(userId);
if(clogin != null) {
Log.i("user name  with repect to user id ", ""+clogin.getString(clogin.getColumnIndex(DBAdapter.RID)));

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:50:28.837

显然查询没有返回任何值，它必须是数据库中的一些错误，或者很可能是查询字符串中的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:12:24.550

试试这个可能有效

```
 Cursor c = db.query(REGISTER_TABLE, 
                     new String[] { REGISTER_ID, REGISTER_UN }, 
                     REGISTER_ID + " = " +userId, 
                     null,
                     null, 
                     null, 
                     null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T06:30:33.333

取而代之的是，您可以使用此方法

```
Cursor c = db.rawQuery("Your Query without semicolon", selectionargs); 
```

在你的情况下

```
Cursor c = db.rawQuery("select REGISTER_ID,REGISTER_UN from REGISTER_TABLE where REGISTER_ID="+userId,null); 
```

# actionscript-3 - 为什么 Actionscript 对大值的模数显示不同的值？

> ID：10380824
> 
> 赞同：4
> 
> 时间：2012-04-30T08:48:31.397
> 
> 标签：actionscript-3, flash

将 Flash CS4 与 Actionscript 3 一起使用，我键入以下内容：

```
 trace(Math.pow(97,83) % 205); 
```

结果为 86。但是，如果我输入 Wolfram-Alpha：

```
 97^83 mod 205 
```

我得到 13 这是正确的答案。为什么 actionscript 显示错误的值？

谢谢，Y_Y

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T09:49:53.203

这是由于 Number 类型的浮点精度。Flash 仅使用 64 位来表示 Math.pow(97,83) 的结果，其中 53 位用于描述浮点数的尾数部分。使用 53 位，在需要舍入之前，您只能获得大约 15-16 位的精度。由于 Math.pow(97,83) 是一个大约 164 位长的数字，因此 Flash 保留了 7.98093813043768e+164 形式的近似值

由于精度损失，这不是 Math.pow(97,83) 的确切值，因此在计算 mod 时会产生不好的结果。

Wolfram-Alpha 可能使用专门的库来计算大数而不损失精度。我不知道 Actionscript 3 有任何此类库，但谷歌可能会在那里提供帮助；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T09:51:09.553

因为结果`97^83`太大而无法在 AS3 中正确计算。见[http://en.wikipedia.org/wiki/IEEE_754-2008](http://en.wikipedia.org/wiki/IEEE_754-2008)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:16:00.767

虽然您在上面有@Godfather 的正确答案，但这是我的 5 美分。

```
var test:String = "";

// a binary number with bit 53 up
test += "10000000"; // 8
test += "00000000"; // 16
test += "00000000"; // 24
test += "00000000"; // 32
test += "00000000"; // 40
test += "00000000"; // 48
test += "00000";    // 53

trace("test", test);
trace(parseInt(test, 2).toString(2) == test); // true

test += "1"; // bit 0 and 54 up, the rest -- down

var chck:String = parseInt(test, 2).toString(2);
trace("test", test);
trace("chck", chck);
trace(chck == test); // false 
```

这产生：

```
test 10000000000000000000000000000000000000000000000000000
true
test 100000000000000000000000000000000000000000000000000001
chck 100000000000000000000000000000000000000000000000000000
false 
```

因此，您最多可以使用整数

```
dec: 9007199254740991
hex: 1FFFFFFFFFFFFF
bin: 11111111111111111111111111111111111111111111111111111 
```

这是另一个示例：

```
trace(parseFloat("9007199254740993") == parseFloat("9007199254740992"));
// output: true 
```

# spring - 使用 Spring 自动装配

> ID：10380825
> 
> 赞同：1
> 
> 时间：2012-04-30T08:48:40.037
> 
> 标签：spring

我正在尝试使用一些 @Autowire 运行我的 Web 应用程序，所以我有这个上下文 xml：

**应用上下文.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context/
           http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config /> 
    <context:component-scan base-package="com.abc" />
</beans> 
```

但是我收到了这个错误：

```
WARNING: Nested in org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 10 in XML document from ServletContext resource [/WEB-INF/context.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 31; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'context:annotation-config'.:
org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 31; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'context:annotation-config'. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T08:52:16.543

从 URL 中删除尾部斜杠`schemaLocation`：

```
xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd"> 
```

它必须与命名空间声明一致：

```
xmlns:context="http://www.springframework.org/schema/context" 
```

# cocoa-touch - 我如何知道 UIPasteboard 中图像数据的 MIME 类型？

> ID：10380827
> 
> 赞同：0
> 
> 时间：2012-04-30T08:48:42.203
> 
> 标签：cocoa-touch, uiimage, uipasteboard

我想从`UIPasteboard`. 该`dataForPasteboardType:`方法为我`NSData`提供了图像，但我不知道那是 GIF、PNG、JPEG 还是什么。我可以在不知道精确图像类型的情况下从数据中创建一个`UIImage`，但我希望使用 MIME 类型进行进一步处理。有没有办法在不分析原始字节的情况下获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:16:05.880

也许这会有所帮助，是一种从文件路径获取 MIME 类型的方法： [确定从文件加载的 NSData 的 MIME 类型](https://stackoverflow.com/questions/5996797/determine-mime-type-of-nsdata-loaded-from-a-file)

# windows-7 - 带有 SP1 和 VB6 的 ADO 窗口

> ID：10380829
> 
> 赞同：0
> 
> 时间：2012-04-30T08:48:48.740
> 
> 标签：windows-7, vb6, ado, mdac

我一直在阅读有关 VB6 应用程序的 Windows 7 service pack1 中 ADO/MDAC 更改的 GUID。我需要重新复制我的组件并用新组件替换已弃用的组件。我的问题是，如果我的 VB6 应用程序只安装在带有 service pack 1 的 windows 7 或带有最新 service pack 的 windows 2008 上，我的 VB6 应用程序仍然可以工作，还是我还需要安装其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:49:57.087

解决此问题所需的更新[在这里](http://support.microsoft.com/kb/2640696)。

[这篇博客文章](http://blogs.msdn.com/b/psssql/archive/2011/10/03/yes-we-made-a-mistake-and-are-finally-going-to-fix-it.aspx)详细解释了发生的事情以及他们如何**严重**（微软的重点）低估了将在 Win7 SP1 上重新编译 ADO 应用程序的开发人员数量。

# objective-c - 如何在 Objective-C 中更改 MacOS 中文件的图标？

> ID：10380830
> 
> 赞同：2
> 
> 时间：2012-04-30T08:48:52.613
> 
> 标签：objective-c, macos, cocoa, icons, alias

我的 MacOS 程序正在为另一个文件创建别名，我希望这个别名有一些指定的图标。我怎么能用 Objective-C 来做呢，最好是在 Cocoa 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T09:11:15.517

您可以使用`NSWorkspace`，它有一种方法可以做到这一点：

```
//anImage is an NSImage object and
//pathToFile is a path string
[[NSWorkspace sharedWorkspace] setIcon:anImage forFile:pathToFile options:0]; 
```

这会将图标数据保存到文件的资源叉中。如今，Mac OS 不使用实际的资源分叉，因此图像存储在名为`com.apple.ResourceFork`.

扩展属性是附加到文件的文件系统元数据。[`xattr`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xattr.1.html)您可以使用相关命令查看附加到文件的扩展属性。

请注意，扩展属性仅保证在 HFS+ 文件系统上可靠，如果文件位于不支持文件元数据的文件服务器或具有非 HFS 文件系统的外部驱动器上，则可能不会写入图标.

# java - 可以将 Gson 实例用作模型 bean 中的静态字段（重用）吗？

> ID：10380835
> 
> 赞同：156
> 
> 时间：2012-04-30T08:49:20.897
> 
> 标签：java, static, thread-safety, gson

这是我实现的模型：

```
public class LoginSession {
    private static final Gson gson = new Gson();

    private String id;
    private String name;
    private long timestamp;

    public LoginSession(String id, String name) {
        this.id = id;
        this.name = name;
        this.timestamp = System.currentTimeMillis();
    }

    public String toJson() {
        return gson.toJson(this);
    }

    public static LoginSession fromJson(String json) {
        checkArgument(!isNullOrEmpty(json));
        return gson.fromJson(json, LoginSession.class);
    }
} 
```

我认为为每个 LoginSession 实例创建新的 Gson 实例是没有用的。

但我担心的是线程安全问题。将创建大约 1000+ 个实例/秒。

可以将 Gson 实例用作静态字段吗？

感谢您的任何建议/更正。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-04-30T08:51:10.723

这对我来说似乎很好。GSON 实例中没有任何内容使其与 的特定实例相关`LoginSession`，因此它应该是静态的。

GSON 实例[应该是线程安全的](http://groups.google.com/group/google-gson/browse_thread/thread/563bb51ee2495081?pli=1)，并且有一个[关于](http://code.google.com/p/google-gson/issues/detail?id=63)已修复的错误。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-02-03T23:25:00.487

核心`Gson`类是线程安全的。我刚刚遇到了一个据称与 GSON 相关的线程安全问题。使用自定义`JsonDeserializer`以及解析和格式化`JsonSerializer`时会出现此问题。`Date`事实证明，线程安全问题在于我的方法使用了`SimpleDateFormat`非线程安全的静态实例。一旦我将静态包装`SimpleDateFormat`在一个`ThreadLocal`实例中，一切都很好。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-13T08:36:11.233

根据评论，现有的单元测试并没有真正测试太多，小心与线程安全相关的任何事情......

有一个检查线程安全的[单元测试：](https://github.com/google/gson/blob/master/gson/src/test/java/com/google/gson/functional/ConcurrencyTest.java#L33)

```
/**
 * Tests for ensuring Gson thread-safety.
 *
 * @author Inderjeet Singh
 * @author Joel Leitch
 */
public class ConcurrencyTest extends TestCase {
  private Gson gson;
  ... 
```

您可能想知道这个单元测试是否足以发现每个可能的机器配置上的每个可能的问题？对此有何评论？

[文档](https://sites.google.com/site/gson/gson-user-guide#TOC-Using-Gson)中也有这句话：

> Gson 实例在调用 Json 操作时不保持任何状态。因此，您可以自由地为多个 Json 序列化和反序列化操作重用同一个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-21T08:53:19.320

不久前我们遇到了线程安全问题，我们通过在 apache commons 中使用 FastDateFormat 解决了这个问题。

刚刚[为 Gist 创建了一个 gist 链接，](https://gist.github.com/aarengee/e3ea670f64497b9140358a7db8077a24)以帮助人们想知道是否可以重用 Gson 实例。他们没有设置器，所有变量都是私有的。

因此，除了 SimpleDateFormat 问题之外，我看不到它们在其他任何地方保持状态。

一定要检查[一下](https://gist.github.com/aarengee/e3ea670f64497b9140358a7db8077a24)。这是我第一次回复其中一个。乐于回馈一次。:)

# php - 修剪散列密码（用于用户识别）

> ID：10380837
> 
> 赞同：0
> 
> 时间：2012-04-30T08:49:39.557
> 
> 标签：php, sql, hash

[http://www.vidyasocks.com/forums.php?id=1&id=1](http://www.vidyasocks.com/forums.php?id=1&id=1)

正如您在底部看到的那样，我使用哈希作为识别用户的一种方式。10个字符后如何修剪其余部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:50:16.887

使用[`substr()`](http://php.net/substr)：

```
echo substr($str, 0, 10); 
```

**演示：**

```
>>> $hash = md5('whatever');
>>> echo $hash;
008c5926ca861023c1d2a36653fd88e2
>>> echo substr($hash, 0, 10);
008c5926ca 
```

如果您想在选择哈希时在数据库中执行此操作，可以使用 MySQL 的[LEFT](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_left)函数：

```
mysql> SELECT LEFT('008c5926ca861023c1d2a36653fd88e2', 10);
+----------------------------------------------+
| LEFT('008c5926ca861023c1d2a36653fd88e2', 10) |
+----------------------------------------------+
| 008c5926ca                                   |
+----------------------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:51:17.727

使用[`substr()`](http://php.net/substr)：

```
$hash = substr($hash,0,10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:55:41.760

修剪存在哈希冲突的风险，其中两个用户可能共享相同的修剪部分。

[http://en.wikipedia.org/wiki/Collision_(computer_science](http://en.wikipedia.org/wiki/Collision_(computer_science) )

散列算法竭尽全力避免这种可能性，因此不建议以任何方式修改散列结果。

# java - 降低循环复杂性的方法

> ID：10380838
> 
> 赞同：0
> 
> 时间：2012-04-30T08:49:39.783
> 
> 标签：java, cyclomatic-complexity

我在一个大型 Java 项目（移动应用程序）上工作，并且由于性能不佳（高复杂性）而获得了审查和优化/重构代码的“感谢”工作。注意：我对 Java 完全陌生（我的背景是 C/C++），因此我申请任何愚蠢的问题。我做的第一件事是使用 Findbugs 并修复所有报告的问题。之后我使用了度量工具Understand来大致了解一下哪些方法的圈复杂度很高。不幸的是，有很多方法的圈复杂度高于 2^20 范围 :-( 其中之一是我需要一些帮助或好主意的地方......

简短描述：对于与服务器的通信，数据必须被序列化。此移动框架上没有可用的 Serializable 接口。因此，编写所有代码（单独）的同事实现了一个包含一个名为的方法的 Serializable 接口`toByteArray()`。例如`class Customer`：

```
class Customer
{
    Address address;
    AttributeCollection attributes;
    LocationCollection locations;
    int recId;
    int recStatus;
    DateTime recCreated;
    String recCreatedBy;
    String recCreatedByProg;
    DateTime recChanged;
    String recChangedBy;
    String recChangedByProg;
    int refAddressesId;
    int refMandatorsId;
    CustomerPropertyUsage usage;

    /**
    * Serialize the properties of a class into a byte array.
    * @param destData Byte array, where the serialized data should be stored. Minimum 2 bytes.
    * @param serializationIndex Offset within the passed byte array, from which the serialized data of the class
    * should be entered. The offset is increased by the registered number of bytes so that after this method the
    * next call points to the serialized data subsequent byte.
    */
    void toByteArray(byte[] destData, IntClass serializationIndex)
    {
        if (this.address == null)
            this.usage.value &= ~CustomerPropertyUsage.ADDRESS;
        if (this.attributes == null)
            this.usage.value &= ~CustomerPropertyUsage.ATTRIBUTES;
        if (this.locations == null)
            this.usage.value &= ~CustomerPropertyUsage.LOCATIONS;

        this.usage.toByteArray(destData, serializationIndex);

        CatrString catrString = null;

        if ((this.usage.value & CustomerPropertyUsage.RECORD_HEADER) != CustomerPropertyUsage.NONE)
        {
            // Call static method getBytes from SerializationHelper class
            SerializationHelper.getBytes(this.recId, 4, destData, serializationIndex.value);
            serializationIndex.value += 4;

            SerializationHelper.getBytes(this.recStatus, 4, destData, serializationIndex.value);
            serializationIndex.value += 4;

            // recChanged is a DateTime object. For the serialization we need minimum a 7 bytes array,
            // Call method toByteArray() from DateTime class.
            this.recChanged.toByteArray(destData, serializationIndex);

            // call toByteArray of CatrString class
            catrString = new CatrString(this.recChangedBy);
            catrString.toByteArray(destData, serializationIndex);

            catrString.setValue(this.recChangedByProg);
            catrString.toByteArray(destData, serializationIndex);

            // Same as recChanged
            this.recCreated.toByteArray(destData, serializationIndex);

            catrString = new CatrString(this.recCreatedBy);
            catrString.toByteArray(destData, serializationIndex);

            catrString.setValue(this.recCreatedByProg);
            catrString.toByteArray(destData, serializationIndex);

            SerializationHelper.getBytes(this.refAddressesId, 4, destData, serializationIndex.value);
            serializationIndex.value += 4;

            SerializationHelper.getBytes(this.refMandatorsId, 4, destData, serializationIndex.value);
            serializationIndex.value += 4;
        }

        if (next property...)
        {
            ... Serialization ...
        }

        if (next property...)
        {
            ... Serialization ...
        }
    }
} 
```

为了保持较低的 GPRS 费用，服务器在 this.usage.value 中设置了一个值，因此只有一个特定的属性将被序列化并传输回服务器 --> 传输的消息很小。这种方法会创建很多 if-case，具体取决于类中有多少属性，因此路径计数会越来越高。我认为这不是一个完美的解决方案，但没关系。我想改变的是 if-cases 中的序列化调用。目前它们看起来像这样：

```
---- class SerializationHelper ----

    static void getBytes(long valueToConvert, int numOfBytesToConvert, byte[] destinationBytes, int destinationBytesOffset)
    {
        destinationBytes[destinationBytesOffset] = (byte)(valueToConvert & 0x000000FF);
        destinationBytes[destinationBytesOffset + 1] = (byte)((valueToConvert & 0x0000FF00) >> 8);

        if (numOfBytesToConvert > 2)
        {
            destinationBytes[destinationBytesOffset + 2] = (byte)((valueToConvert & 0x00FF0000) >> 16);
            destinationBytes[destinationBytesOffset + 3] = (byte)((valueToConvert & 0xFF000000) >> 24);

            if (numOfBytesToConvert > 4)
            {
                destinationBytes[destinationBytesOffset + 4] = (byte)((valueToConvert & 0x000000FF00000000L) >> 32);
                destinationBytes[destinationBytesOffset + 5] = (byte)((valueToConvert & 0x0000FF0000000000L) >> 40);
                destinationBytes[destinationBytesOffset + 6] = (byte)((valueToConvert & 0x00FF000000000000L) >> 48);
                destinationBytes[destinationBytesOffset + 7] = (byte)((valueToConvert & 0xFF00000000000000L) >> 56);
            }
        }
    }

---- class CatrString  ----

    void toByteArray(byte[] destData, IntClass serializationIndex)
    {
        //  Number of unicode characters
        SerializationHelper.getBytes(this.textLength, 2, destData, serializationIndex.value);
        serializationIndex.value += 2;

        // Text UTF-16 unicode characters
        for (int charIndex = 0; charIndex < this.textLength; charIndex++)
        {
            destData[serializationIndex.value] = (byte)(this.charCodes[charIndex] & 0x00FF);
            serializationIndex.value++;
            destData[serializationIndex.value] = (byte)((this.charCodes[charIndex] & 0xFF00) >> 8);
            serializationIndex.value++;
        }

        // Code End of string as UTF-16 unicode character
        destData[serializationIndex.value] = 0x00;
        serializationIndex.value++;
        destData[serializationIndex.value] = 0x00;
        serializationIndex.value++;
    }

---- class DateTime  ----

    void toByteArray(byte[] destData, IntClass serializationIndex)
    {
        destData[serializationIndex.value + 0] = (byte) (m_year % 0x0100);  // year low-Byte.
        destData[serializationIndex.value + 1] = (byte) (m_year / 0x0100);  // year high-Byte.
        destData[serializationIndex.value + 2] = (byte) (m_month);
        destData[serializationIndex.value + 3] = (byte) m_day;

        destData[serializationIndex.value + 4] = (byte) m_hour;
        destData[serializationIndex.value + 5] = (byte) m_minute;
        destData[serializationIndex.value + 6] = (byte) m_second;

        serializationIndex.value += 7;
    } 
```

应该可以编写一个更“通用”的类来完成所有序列化工作，我说序列化 xy 字节就是这样。但我不明白的是“特殊”`toByteArray()`方法，如字符串（UTF-16 编码）或日期和时间？如果我把它们放在一个班级里，这是一个好的解决方案吗？我有什么收获吗？可维护代码？高性能代码？？你的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:09:43.540

为每个类创建一个属性映射可能会更好。默认情况下，该集合是空的，但在调用时，例如 setAddress(address) 我们调用 fieldsMap.put(ADDRESS_KEY_STRING,address) 而不是分配给类的字段。

要存储所有访问（现有）属性，我们只需通过存储每个条目的 fieldsMap。

# java - 为什么这段代码没有用 javac 编译，但在 eclipse 中没有错误？

> ID：10380839
> 
> 赞同：6
> 
> 时间：2012-04-30T08:49:58.990
> 
> 标签：java, eclipse, compiler-construction, javac

以下代码：

```
@Retention(RetentionPolicy.RUNTIME)
@Target( { ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE })
@Constraint(validatedBy = {
        MinTimeIntCoConstraintValidator.class, 
        MinTimeIntCoListConstraintValidator.class,
        MinTimeDoubleCoConstraintValidator.class, 
        MinTimeDoubleCoListConstraintValidator.class,
        })
@Documented
public @interface MinTimeValueCo
{
    int value();
    String message() default "value does not match minimum requirements";
    Class<?>[] groups() default { };
    Class<? extends Payload>[] payload() default {};
} 
```

在eclipse中编译但在sun/oracle编译器中编译失败：

```
> MinTimeValueCo.java:19: illegal start of expression
>     [javac]       })
>     [javac]       ^
>     [javac] 1 error 
```

这是因为逗号之后发生的`MinTimeDoubleCoListConstraintValidator.class,`。

当我删除逗号时，它工作正常：

```
@Constraint(validatedBy = {
        MinTimeIntCoConstraintValidator.class, 
        MinTimeIntCoListConstraintValidator.class,
        MinTimeDoubleCoConstraintValidator.class, 
        MinTimeDoubleCoListConstraintValidator.class
        }) 
```

我正在使用 jdk 1.6.0.10。
你知道为什么这是非法的并且在 Eclipse 中编译吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T09:16:11.820

这是 Java 6 中的一个错误`javac`。[JLS 允许](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)在某些地方使用尾随逗号，而 Eclipse 编译器遵循此处的标准，而 Java 6 不允许在任何地方使用尾随逗号。

您可以尝试使用`javac`带有选项的 Java 7编译您的代码`-source 6 -target 6`（以获得与 Java 6 兼容的字节码）。如果错误仍然存​​在，[请将其归档](http://openjdk.java.net/groups/web/bugzilla.html)。它可能会得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:52:37.243

您在它`,`的末尾有一个`MinTimeDoubleCoListConstraintValidator.class,`正在寻找列表中的另一个表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:52:31.920

通过在 后面加上逗号`MinTimeDoubleCoListConstraintValidator.class`，java 编译器认为应该有另一个值。Eclipse 接受结尾的逗号，但 javac 不接受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T08:53:20.270

看起来您正在声明某种约束数组。您在最后一个约束之后放置了一个额外的逗号 ( `,`)，从而使编译器期望一些其他值以及您已经拥有的值。尝试这样做：

```
@Constraint(validatedBy = {
        MinTimeIntCoConstraintValidator.class, 
        MinTimeIntCoListConstraintValidator.class,
        MinTimeDoubleCoConstraintValidator.class, 
        MinTimeDoubleCoListConstraintValidator.class
        }) 
```

# javascript - 在 jQuery Mobile 上禁用 data-role="header" 上的页面转换

> ID：10380840
> 
> 赞同：2
> 
> 时间：2012-04-30T08:50:00.440
> 
> 标签：javascript, jquery, mobile, jquery-mobile

是否可以在 data-role="header" 上禁用页面转换？

目标是仅在 data-role="content" 处使用页面转换。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T09:54:41.987

是的，您可以通过固定所有标题并添加相同的 data-id 属性来做到这一点。

```
<div data-role="page">

    <div data-role="header" data-id="persistent" data-position="fixed">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content">    
        <p>Hello world</p> 
        <a href="#page2" data-transition="slide">link</a>        
    </div><!-- /content -->

</div>
<div data-role="page" id="page2">

    <div data-role="header" data-id="persistent" data-position="fixed">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content">    
        <p>Page 2</p>
        <a href="#page3" data-transition="slide">Page 3</a>        
    </div><!-- /content -->

</div><!-- /page -->
<div data-role="page" id="page3">

    <div data-role="header" data-id="persistent" data-position="fixed">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content">    
        <p>page 3</p>        
    </div><!-- /content -->

</div><!-- /page --> 
```

[http://jsfiddle.net/codaniel/7uJfv/1/](http://jsfiddle.net/codaniel/7uJfv/1/)

​</p>

# iphone - UIImage imageNamed 需要 pathForResource？

> ID：10380842
> 
> 赞同：16
> 
> 时间：2012-04-30T08:50:12.187
> 
> 标签：iphone, objective-c, uiimage, nsbundle

创建using时使用该`NSBundle`方法搜索图像路径的必要性有多大？我看到的教程代码只是直接指定图像的名称，然后代码会更加努力地首先找到路径。`pathForResource``UIImage``imageNamed`

以我的经验，我总是直接使用这个名字，而且它总是很好用。我假设它自动知道如何找到图像。有必要做更多的事情或在什么情况下需要做更多的事情？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-17T10:43:15.423

**根本不是**......是原始问题的答案：

> 使用 imageNamed 创建 UIImage 时，使用 NSBundle 方法 pathForResource 搜索图像路径的必要性有多大？

**Zoul**和 Ranga 接受的答案有多*正确。*公平地说：如果您谈论的是应用程序包目录结构，或者图像位于 Xcode 中的“蓝色”文件夹中的（罕见）情况（稍后会详细介绍），它们是正确的，但不是大多数常见案例

无论如何，找到一个真实的答案。

像往常一样，我在尝试自己寻找答案时发现了这个问题。我从来没有找到令人满意的文档或这个问题的其他答案，所以我决定测试一下。

我的测试细节都在下面，但让我在这里总结一下结果。简而言之，当使用 imageNamed: 加载图像时，这取决于您将它们放在哪里：

1.  如果您的图像位于项目的根目录中，即使组织在一个纯粹的逻辑 Xcode 组中，那么不，您不需要考虑路径：只需考虑图像名称。

2.  如果您的图像位于附加到文件系统目录的组中，通过“为添加的文件夹创建组”，那么您*仍然*不需要担心名称。

3.  如果您的图像位于“蓝色”组中，该组通过“为添加的文件夹创建文件夹引用”附加到文件系统中的目录，那么您可以使用 imageNamed: 通过指定建议的相对路径来加载它（巧合？）通过上面接受的答案。

4.  如果您使用 imageNamed:、imageWithContentsOfFile: 的主要替代方法，您确实需要包含包路径的文件的完整路径，这意味着您需要知道 Xcode 导航器结构如何转换为包目录结构中的路径。

这两种方法之间的其他重要区别：

*   imageNamed 不需要您指定文件类型扩展名，因此只需“icon”而不是“icon.png”，而 imageWithContentsOfFile 确实需要完整的文件名
*   这第一点有助于第二个功能： 如果有图像，imageNamed 将通过在文件名中添加@2x 来*自动加载图像的视网膜版本。*因此，如果您要求“图标”，在视网膜显示器上它会尝试加载“icon@2x.png”。imageWithContentsOfFile 没有
*   imageNamed 缓存图像：其中存在很多争议：如果您搜索 SO 或整个网络，您会发现很多帖子建议您避免使用它，因为它没有正确清除其缓存。但是，这在几年前就已修复，因此您不必担心它无法清除缓存。不过，您仍然*需要*担心它会缓存这一事实。如果您的图像*很大*并且不经常加载，您可以通过从文件中加载它们而不是缓存它们来节省内存。这与泄漏无关：即使您没有泄漏，设备上的内存仍然有限，并且您不想进行不必要的缓存。这是经典的缓存权衡：什么 在你的情况下更重要吗？内存性能或cpu性能（时间）。

继续我的测试。

我所做的是创建一个简单的 UITableView 应用程序，其中包含 3 个简单的图标文件，使用不同的方法显示在表格的行中。图标在*Xcode中的位置不同*项目结构。请注意对 Xcode 的强调。理解原始问题答案的关键在于，iOS 应用程序中存在三种完全不同的项目目录结构：一种是您在 Xcode 导航器中看到的，另一种是您在 Finder 中看到的同一项目的文件系统（右键单击 Xcode 导航器中的任何项目并选择“在 Finder 中显示”）以及您很少看到的已部署应用程序的“捆绑”目录结构。您也可以在 Finder 中看到最后一个 - 通过在 ~/Library/Application Support/iPhone Simulator 中找到您的应用程序，然后深入到 .app 目录。一会儿我给你看一张我的照片。

所以在我的应用程序中，我以不同的方式将所有三个图标 png 图像文件拖到 Xcode 中：

1.  icon1.png（一个时钟），我作为文件拖入 Xcode 项目的根目录，然后我在 Xcode*中*创建了一个新组并将其拖入其中。该组不由文件系统中的任何目录表示：它是一个纯 Xcode 组。因此它的名字是：“JustGroup”

2.  icon2.png（一只眼睛），我最初将我的文件系统放在名为“RealDir”的目录中，然后我将整个目录拖到 Xcode 中，当被问到时，我选择了“为任何添加的文件夹创建组”选项。这意味着 Xcode 中的 RealDir 组附加到文件系统中名为 RealDir 的真实目录（在我的项目目录中），并且 icon2.png 在那里。

3.  icon3.png （一个目标），我也有一个单独的目录，我也将它拖到 Xcode 中。只有这一次我选择了第二个单选选项“为任何添加的文件夹创建文件夹引用”。这在 Xcode 中创建了一个所谓的“蓝色”组。更多关于这一切的内容稍后。我称这个组（和目录）为“FolderReference”

这是 Xcode 为您提供的选择的截图： ![拖动目录时 Xcode 的对话框](../Images/881a9c9959a4970a2f30f641391d6241.png)

这是我的项目结构在 Xcode 中的样子： ![Xcode 导航器项目结构](../Images/d683ab8a75b4748bfae1201e25737071.png)

现在，在我的应用程序中，我使用了两种方法来加载每个图标：UIImage imageNamed: 和 UIImage imageWithContentsOfFile。我在我的表中创建了一堆行，每个单元格的标题是包含图标的组的名称：JustGroup、RealDir 或 FolderReference，加上使用的方法的名称：imageNamed vs *fromFile*（我用作imageWithContentsOfFile 的缩写）

单元格的详细标签（标题下较暗的文本）显示了我为该方法指定的文件或路径名。

需要明确的是，在“fromFile”的情况下，我将捆绑路径添加到您看到的“相对”名称中。所以对于“fromFile”，我实际上使用的是这段代码：

```
NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
NSString *imagePath = [NSString stringWithFormat:@"%@/%@", bundlePath, filePath];
UIImage *image = [UIImage imageWithContentsOfFile:imagePath]; 
```

其中“filePath”是您在表格单元格详细信息标签中看到的路径。另一方面，对于 imageNamed:，单元格详细信息中的 filePath 是逐字传递的。

行*图像*自然是加载的图像。所以对于表中没有图片的行，*图片加载失败*。

简而言之，这里是结果。如果你没有阅读这篇文章，至少看一眼这张图片就会告诉你所有你需要知道的。

![应用程序显示加载了哪些图标](../Images/3deee9dd44fd91005f68ec058b5fc3cd.png)

以下是易于理解的基本解释：

*   正如官方文档中所述， imageNamed: 方法从应用程序包中加载图像。这意味着您不需要指定捆绑位置，只需指定文件名。即使这样，也只是文件的基本名称。这里的文档有点薄，它应该清楚地说明它从*相*对于应用程序包根目录的给定文件路径加载图像。

*   （这是踢球者，注意这一点）关于捆绑目录的规则，指的是您部署的应用程序捆绑包中的根目录。如果你去探索，那意味着在“.app”目录本身。和Xcode navigator中Xcode项目的根目录不一样，也不*和**finder中Xcode项目的根目录一样*

*   这是因为，在将您的应用程序部署到设备（或模拟器）时，由“*添加文件夹的组*”表示的所有项目目录都被*展平*. 也就是说，该目录将被忽略，并且其所有内容都会毫不客气地转储到捆绑包的根目录中。（我说“毫不客气”，因为如果不同文件夹中有同名文件，它们会在这里发生冲突，您将无法解决导致的问题。）在我的示例中，RealDir 就是这种情况：部署的应用程序，RealDir 不再存在，icon2.png 与普通人群混在一起（可怕）。几乎不用说，“JustGroup”，纯粹的逻辑 Xcode 组，也被忽略了——它从来都不是一个真正的目录，只是 Xcode 用户的视觉帮助——而且 icon1.png 也在包根目录中。

    *   **这就是为什么 imageNamed: 能够加载 icon2。**

    *   **还有为什么 imageWithContentsOfFile 无法在“RealDir/image2.png”中找到它：因为*部署的应用程序中没有 RealDir 目录***。

*   另一方面，“蓝色文件夹”，即“*添加文件夹的文件夹引用*”表示的目录，*实际上保留在 app bundle 目录结构*中。这显然是蓝色文件夹的重点：它们为您提供了一种在部署的应用程序中创建目录结构的方法。我不确定最初的存在理由，但一个很好的用例是您有多个目录，其中包含具有相同名称的资源文件的替代版本，并且您希望您的应用程序能够在运行时在它们之间切换通过更改目录。无论如何，我的 FolderReference 中的 icon3.png 仍保留在已部署应用程序的我的 FolderReference 目录中。

    *   **这就是为什么 imageNamed: 无法使用“icon3”找到它，但*可以*使用“FolderReference/icon3”找到它**
    *   **imageWithContentsOfFile 也能够使用 FolderReference 找到它**，但只有在附加时，请记住使用上面的代码找到完整的包路径。（这里的关键区别：在这种情况下，imageNamed 使用相对路径，imageWithContentsOfFile 始终使用绝对路径）。

为了澄清，这是我的文件夹结构：

您在上面看到了我的 Xcode 项目导航器结构，这是它下面的文件系统目录： ![Finder Xcode 项目目录结构](../Images/1f52fdea0d5652ec15df8dffe2b7882a.png)

最后，也许是最重要的，部署的包文件系统目录结构： ![部署的bundle目录结构](../Images/640e4a0419ba0e63908f62dadb088239.png)

注意：我在我的 Mac 上的这个位置找到了这个：你会在一个类似的位置找到你的 - 你可能需要搜索一下才能找到哪个丑陋的 GUID 命名的子目录包含你的应用程序。

```
 ~/Library/Application Support/iPhone Simulator/5.1/Applications/4EB386B2-CD7E-4590-9757-18DDDEE6AF4F/ImageLoadingTest.app 
```

我希望这有帮助。测试、探索并最终*描述*它确实对我有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T08:54:20.703

文档说“该方法在应用程序的主包中查找具有指定名称的图像”，所以我想说你总是可以只使用名称。唯一的例外可能是存储在子文件夹中的图像，尤其是当您拥有`foo/image.png`和`bar/image.png`. 我不知道是否`[UIImage imageNamed:@"foo/image"]`会奏效，但尝试起来很简单。

（在这些情况下有点令人困惑的是 Xcode 树中的组不对应于生成的应用程序包中的文件夹。它们的内容被一起粉碎到包的根目录，除非您使用蓝色文件夹引用而不是常规团体。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T14:49:15.513

我创建了一个新的 Xcode 项目（单视图、AppDelelgate、ViewController 类、情节提要等）。创建了一个图像组。使用 Paintbrush 创建一个 16x16 png 文件 Wall1.png 并将其放入 Xcode 中的 Images 组（让 Xcode 复制文件）。

在 ViewController viewDidLoad 方法中添加了代码：

```
UIImageView* imageView=[[UIImageView alloc] initWithFrame:CGRectMake(50, 100, 16, 16)];
UIImage *image = [UIImage imageWithContentsOfFile: [[NSBundle mainBundle] pathForResource:@"Images/Wall1" ofType:@"png"]];
imageView.image = image;
    UIImageView* imageView=[[UIImageView alloc] initWithFrame:CGRectMake(50, 100, 16, 16)];
UIImage *image = [UIImage imageWithContentsOfFile: [[NSBundle mainBundle] pathForResource:@"Wall1" ofType:@"png"]];
imageView.image = image;
[self.view addSubview:imageView]; 
```

在我的手机上运行应用程序，图像不会出现

在 [self.view addSubview:imageView] 处添加断点；

图像为空

打开终端并将目录更改为我的项目，Wall1.png 不是组文件夹图像。从项目中删除了 png，创建了一个 Images 文件夹，将 Wall1.png 移动到该文件夹​​中。将现有文件 Wall1.png 添加到图像组。

运行应用程序，图像仍然没有出现。

图像为空

将图像/Wall1 更改为 Wall1

运行应用程序，显示景气图像1

如果为图像创建组，Xcode 不会创建相应的目录。如果您愿意，可以手动创建一个（我更喜欢将图像保存在单独的文件夹中）。使用 UIImage imageWithContentsOfFile 时不要指定图像文件的完整路径。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T09:13:54.770

尝试这个。

```
[UIImage imageNamed:@"your directory path of image"] 
```

[UIImage imageNamed:@"Dir1/folder1/folder2/imagename.jpeg"]

# php - php在打包前删除file.pdf

> ID：10380843
> 
> 赞同：0
> 
> 时间：2012-04-30T08:50:13.170
> 
> 标签：php, ajax, unlink

如何从临时目录中删除 instructions.pdf？

我的 Web 脚本创建具有唯一 ID 的临时文件夹，并从另一台服务器请求一些文件。一个这样的文件是“instructions.pdf”。我想在临时文件夹打包成 zip 文件之前删除此文件。

我认为最简单的方法是在从 API 下载包之后但在为用户压缩包之前使用一些 PHP 代码覆盖这些文件。了解过程中的步骤可能会使这更容易概念化。

a) 用户点击“打包源代码”

b) 自托管面板联系人 API

c) API 返回一个项目包（包含说明.pdf）这是一个 zip 存档

d) 自托管面板解压缩存档以进行处理

e) 自托管面板添加插件和其他资产并对包进行一些调整

f) 自托管面板在 /files/temp 文件夹中创建一个 zip 存档供用户下载。

这意味着我将在 f) 之前添加一个额外的步骤。“在创建 zip 存档之前，从包中删除 instructions.pdf 并替换为“我的服务器上的这个文件”。”

我想在它读取“进程插件”的地方添加新的逻辑。我需要在两个地方执行此操作（相同的逻辑，但每个平台略有不同）一次用于 iOS，一次用于 Android。同一个文件处理两个包。

我试过取消链接，但它没有删除任何东西。这是我没有成功使用的代码：

```
 // delete pdf...
    if($fh = fopen($rootFolder . "instructions.pdf", 'w')){
    fclose($fh);
    unlink('instructions.pdf');
    } 
```

完整的 php 代码是：

```
<?php   require_once("../../config.php");
        require_once("../../includes/zip.php");

    //who's logged in
    $guid = "";
    if(isset($_SESSION[APP_LOGGEDIN_COOKIE_NAME])) $guid = fnFormInput($_SESSION[APP_LOGGEDIN_COOKIE_NAME]);

    //init user object
    $thisUser = new User($guid);
    $thisUser -> fnLoggedInReq($guid);
    $thisUser -> fnUpdateLastRequest($guid, "1");

    //try to increase max execution time..This is only necessary on painfully slow servers!
    if(!ini_get('safe_mode')){ 
        @set_time_limit(120);
    }       

    //project vars posted in AJAX request...
    $appGuid = fnGetReqVal("appGuid", "", $myRequestVars);
    $whatPlatform = fnGetReqVal("whatPlatform", "", $myRequestVars);
    $saveToPath = "";
    $packageURL = "";

    //init some variables for the json result...        
    $bolPassed = true;
    $strMessage = "";

    //must have an app id...
    if(strlen($appGuid) < 5 || strlen($guid) < 5){
        $bolPassed = false;
        $strMessage .= "<br>No app id found";
    }       

    //must have a platoform selected...
    if(strlen($whatPlatform) < 1){
        $bolPassed = false;
        $strMessage .= "<br>There was a problem figuring out what platform to package the project for?";
    }       

    //create an app object so we can get the project name...
    if($bolPassed){

        //ceate an app object...
        $objApp = new App($appGuid);

        //make sure user can manage this app...
        $objApp->fnCanManageApp($thisUser->infoArray["guid"], $thisUser->infoArray["userType"], $appGuid, $objApp->infoArray["ownerGuid"]);

        //appAPIKey and project name comes from objApp
        $appAPIKey = $objApp->infoArray["apiKey"];
        $appAPISecret = $objApp->infoArray["appSecret"];
        $appName = $objApp->infoArray["name"];
        $projectName = $objApp->infoArray["projectName"];
        $projectName = fnCleanProjectName($projectName);
        $projectName = strtolower($projectName);
        $appIconURL = $objApp->infoArray["iconUrl"];
        $appVersion = $objApp->infoArray["version"];

    }//bolPassed

    /////////////////////////////////////////////////
    //start functions

    //replace in text file function
    function fnReplaceText($filePath, $replaceWhat, $replaceWith){
        if(is_file($filePath)){
            if(is_readable($filePath)){
                $str = file_get_contents($filePath);
                if(strlen($str) > 0){   
                    //echo "<br> Replacing text in: " . $filePath;
                    $fp = fopen($filePath,"w");
                    $str = str_replace($replaceWhat,$replaceWith,$str);
                    if(fwrite($fp, $str, strlen($str))){
                        //echo " ~ SUCCESS";
                    }else{
                        //echo " ~ ERROR!";
                    }

                }else{
                    //echo "<br>This file is empty: " . $filePath;
                }
            }else{
                //echo "<br>File not readable: " . $filePath;
            }
        }else{
            //echo "<br>Not a file: " . $filePath;
        }
    }

    //delete a directory and all of it's contents..
    function delete_directory($dirname) {
       if (is_dir($dirname))
          $dir_handle = opendir($dirname);
       if (!$dir_handle)
          return false;
       while($file = readdir($dir_handle)) {
          if ($file != "." && $file != "..") {
             if (!is_dir($dirname."/".$file))
                unlink($dirname."/".$file);
             else
                delete_directory($dirname.'/'.$file);    
          }
       }
       closedir($dir_handle);
       rmdir($dirname);
       return true;
    }

    //copies directory and all it's sub-directories
    function copy_directory($source, $destination){
        if(is_dir($source)){
            @mkdir($destination);
            chmod($destination, 0755);
            $directory = dir($source);
            chmod($directory, 0755);

            while(FALSE !== ($readdirectory = $directory->read())){
                if($readdirectory == '.' || $readdirectory == '..'){
                    continue;
                }
                $PathDir = $source . '/' . $readdirectory; 
                if(is_dir($PathDir)){
                    copy_directory($PathDir, $destination . '/' . $readdirectory );
                    chmod($destination . '/' . $readdirectory, 0755);
                    continue;
                }
                copy($PathDir, $destination . '/' . $readdirectory);
                chmod($destination . '/' . $readdirectory, 0755);
            }
            $directory->close();
        }else {
            copy($source, $destination);
            chmod($destination, 0755);
        }
    }   

    //calls buzztouch.com's API to build project. Returns a download URL for the .zipped up package
    function fnGetBuzztouchPackageUsingAPI($appGuid, $projectName, $appName, $iconURL, $platform, $version){

        //we'll be returning a download URL or an errors[] array...
        $errors = array();
        $packageURL = "";

        //key/value pairs to send in the request...
        $postVars = "";
        $fields = array(

            //needed by the buzztouch.com api to validate this request
            "apiKey" => urlencode(APP_BT_SERVER_API_KEY),
            "apiSecret" => urlencode(APP_BT_SERVER_API_KEY_SECRET),
            "command" => urlencode("packageProject"),

            //required by "packageProject" command...
            "appGuid" => urlencode($appGuid),
            "projectName" => urlencode($projectName),
            "appName" => urlencode($appName),
            "iconURL" => urlencode($iconURL),
            "platform" => urlencode($platform),
            "version" => urlencode($version)

        );

        //prepare the data for the POST
        foreach($fields as $key => $value){ 
            $postVars .= $key . "=" . $value . "&"; 
        }

        //setup api url
        $apiURL = rtrim(APP_BT_SERVER_API_URL, "/");

        //init a cURL object, set number of POST vars and the POST data
        $ch = curl_init($apiURL . "/app/");
        curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_POST, count($fields));
        curl_setopt($ch, CURLOPT_POSTFIELDS, $postVars);

        //get JSON result from buzztouch API
        $jsonResult = curl_exec($ch);

        //close connection
        curl_close($ch);

        //decode json vars
        if($jsonResult != ""){
            $json = new Json; 
            $decoded = $json->unserialize($jsonResult);
            if(is_object($decoded)){

                //init status and pacakgeURL
                $status = "";
                $packageURL = "";

                //must have a result...
                if(array_key_exists("result", $decoded)){
                    $results = $decoded -> result;

                    //must have a status...
                    if(array_key_exists("status", $results)){
                        $status = $results -> status;
                    }else{
                        $errors[] = "API result does not contain a required field: status missing.";
                    }

                }else{
                    $errors[] = "API result does not contain a required field: result missing.";
                }//key exists..

                //still no errors?
                if(count($errors) < 1){

                    //success means we'll get a package URL from the API...
                    if(strtoupper($status) == "SUCCESS"){
                        if(array_key_exists("packageURL", $results)){
                            $packageURL = $results -> packageURL;
                        }
                    }else{

                        //show the errors...
                        if(array_key_exists("errors", $results)){

                            $errorList = $results -> errors;
                            for($e = 0; $e < count($errorList); $e++){
                                $errors[] = $errorList[$e] -> message;
                            }

                        }else{
                            $errors[] = "buzztouch API returned an error but no details were provided";
                        }

                    }//success

                }//errors...

            }else{
                $errors[] = "buzztouch API return invalid JSON";
            }
        }else{
            $errors[] = "buzztouch API return invalid JSON";
        }

        //did we have errors?
        if(strlen($packageURL) > 0){
            return $packageURL;
        }else{
            return $errors;
        }

    }//fnPackageUsingAPI

    //downloads and saves a .zip from buzztouch.com so it can be processed locally.
    function fnDownloadAndSaveZip($packageURL, $saveAsLocalFileName){

        //create a file pointer for cURL to save to...
        $fp = fopen($saveAsLocalFileName, 'w');

        //init a cURL session to download the zip
        $ch = curl_init($packageURL);
        curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_FILE, $fp);

        $zipData = curl_exec($ch);

        //close cURL and file pointer...
        curl_close($ch);
        fclose($fp);                    

        //make sure .zip project was downloaded and saved!
        if(is_file($saveAsLocalFileName)){
            return true;
        }else{
            return false;
        }

    }

    //gets config data from this server's API
    function fnGetConfigData($appGuid, $appAPIKey, $appAPISecret){

        //post vars to using CURL to make an API call to the same box.
        $postVars = "";
        $fields = array(
            "apiKey" => urlencode($appAPIKey),
            "apiSecret" => urlencode($appAPISecret),
            "command" => urlencode("getAppData"),
            "appGuid" => urlencode($appGuid)
            );

        //prepare the data for the POST
        foreach($fields as $key => $value){ 
            $postVars .= $key . "=" . $value . "&"; 
        }

        //init a cURL object to this UR
        $ch = curl_init(rtrim(APP_URL, "/") . "/api/app/");
        curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_POST, count($fields));
        curl_setopt($ch, CURLOPT_POSTFIELDS, $postVars);

        //get JSON result from buzztouch API
        $configDataString = curl_exec($ch);

        //close connection
        curl_close($ch);    

        return $configDataString;
    }

    //end functions
    /////////////////////////////////////////////////

    //validate...
    if($bolPassed){

        if(strlen($appAPIKey) < 1){
            $bolPassed = false;
            $strMessage .= "<br>No API key found for this project?";
        }
        if(strlen($appAPISecret) < 1){
            $bolPassed = false;
            $strMessage .= "<br>No App Secret found for this project?";
        }

        if(strlen($appName) < 1){
            $bolPassed = false;
            $strMessage .= "<br>No application name found for this project?";
        }

        if(strlen($projectName) < 1){
            $bolPassed = false;
            $strMessage .= "<br>No project name found for this project?";
        }           

        if(strlen($appIconURL) < 1){
            $bolPassed = false;
            $strMessage .= "<br>No Icon URL found for this project?";
        }

        if(strlen($appVersion) < 1){
            $bolPassed = false;
            $strMessage .= "<br>No version found for this project?";
        }       

    }//bolPassed

    //if we have an API key then fetch project from buzztouch.com's API
    if($bolPassed){

        //temp directory path...
        $temp_directory = APP_PHYSICAL_PATH . APP_DATA_DIRECTORY . "/temp";                     

        //remove previous .folders if they are still hanging around from last attempt...
        fnRemoveDirectory(APP_PHYSICAL_PATH . APP_DATA_DIRECTORY . "/temp/" . $projectName . "-iOS-BTv2.0-" . $appGuid);
        fnRemoveDirectory(APP_PHYSICAL_PATH . APP_DATA_DIRECTORY . "/temp/" . $projectName . "-Android-BTv2.0-" . $appGuid);

        //remove previous zip's if they are still hanging around from last attempt...
        if(is_file(APP_PHYSICAL_PATH . APP_DATA_DIRECTORY . "/temp/" . $projectName . "-iOS-BTv2.0-" . $appGuid . ".zip")){
            @unlink(APP_PHYSICAL_PATH . APP_DATA_DIRECTORY . "/temp/" . $projectName . "-iOS-BTv2.0-" . $appGuid . ".zip");
        }
        if(is_file(APP_PHYSICAL_PATH . APP_DATA_DIRECTORY . "/temp/" . $projectName . "-Android-BTv2.0-" . $appGuid . ".zip")){
            @unlink(APP_PHYSICAL_PATH . APP_DATA_DIRECTORY . "/temp/" . $projectName . "-Android-BTv2.0-" . $appGuid . ".zip");
        }

        //file names for the .zip we will be preparing...
        if(strtoupper($whatPlatform) == "IOS"){
            $saveToFolderName = $projectName . "-iOS-BTv2.0-" . $appGuid . ".zip";
        }
        if(strtoupper($whatPlatform) == "ANDROID"){
            $saveToFolderName = $projectName . "-Android-BTv2.0-" . $appGuid . ".zip";
        }

        //save the folder in the /files/temp directory
        $saveToPath = "../../" . ltrim(APP_DATA_DIRECTORY, "/") . "/temp/" . $saveToFolderName;

        //root folder is where we are saving the all the unzipped files to...
        $rootFolder = str_replace(".zip", "", $saveToPath);

        //make sure we have a writable temp directory...
        if(is_dir("../../" . ltrim(APP_DATA_DIRECTORY, "/") . "/temp")){
            if(!is_writable("../../" . ltrim(APP_DATA_DIRECTORY, "/") . "/temp")){
                $bolPassed = false;
                $strMessage .= "The ../../" . ltrim(APP_DATA_DIRECTORY, "/") . "/temp directory is not writable by PHP. This folder needs write access.";
            }
        }else{
            $bolPassed = false;
            $strMessage .= "The ../../" . ltrim(APP_DATA_DIRECTORY, "/") . "/temp directory does not exist. This folder needs to exist and PHP needs write access to it. ";
        }

        //good so far...
        if($bolPassed){

            //packageURL comes form the buzztouch API
            $packageURL = fnGetBuzztouchPackageUsingAPI($appGuid, $projectName, $appName, $appIconURL, $whatPlatform, $appVersion);

            if(is_array($packageURL)){

                //flag as no good
                $bolPassed = false;

                //show the errors...
                for($e = 0; $e < count($packageURL); $e++){
                    $strMessage .= $packageURL[$e];
                }

            }else{

                //all good, download and save the file from the packageURL...
                if(!fnDownloadAndSaveZip($packageURL, $saveToPath)){
                    $bolPassed = false;
                    $strMessage .= "<br>An error occurred trying to download a package from the buzztouch API";
                }else{
                    //extract the .zip to the /temp directory..
                    if(is_file($saveToPath)){

                        $archive = new PclZip($saveToPath);
                        $list = $archive->extract(PCLZIP_OPT_PATH, $rootFolder);
                        if(count($list) < 5 || !is_dir($rootFolder)){
                            $bolPassed = false;
                            $strMessage .= "There was a problem unzipping the package delivered by the buzztouch API. This can be caused by a few things. Is it possible that this is a Windows Server? This software does not run on Windows powered servers.";
                        }               

                    }else{

                        $bolPassed = false;
                        $strMessage .= "<br>There was a problem finding the downloaded package";
                    }

                }

            }//is_array errors

        }//bolPassed

        //at this point we should have a folder to use to create our new project...It may already be full of the 
        //contents from the project returned by the buzztouch API...
        if($bolPassed){

            if(is_dir($rootFolder)){

                //array holds all the files we've already added to the project - no duplicates allowed!
                $existingFiles = array();

                //get the BT_config.txt data from this server's API...
                $configDataString = fnGetConfigData($appGuid, $appAPIKey, $appAPISecret);
                if(strlen($configDataString) > 10){

                    ////////////////////////////////////////////////////////////////////////////////////
                    //iOS project...                
                    if(strtoupper($whatPlatform) == "IOS"){
                        $originalDelegateName = "BT_appDelegate";
                        $newDelegateName = $projectName . "_appDelegate";

                        //build directories if they don't exist already...
                        $makeFolders = array("BT_Config", "BT_Art", "BT_Video", "BT_Sound", "BT_Images", "BT_Docs", "BT_Plugins");
                        for($d = 0; $d < count($makeFolders); $d++){
                            if(!is_dir($rootFolder . "/" . $makeFolders[$d])){
                                @mkdir($rootFolder . "/" . $makeFolders[$d]);
                            }
                        }

                        //over-write the config data...
                        if($fh = fopen($rootFolder . "/BT_Config/BT_config.txt", 'w')){
                            fwrite($fh, $configDataString);
                            fclose($fh);        
                        }

                        //download app icon from remote server...Could be .jpg or .png
                        if(strtolower(substr($appIconURL, -4)) == ".jpg"){
                            $icon = @imagecreatefromjpeg($appIconURL);
                        }else{
                            if(strtolower(substr($appIconURL, -4)) == ".png"){
                                $icon = @imagecreatefrompng($appIconURL);
                            }
                        }
                        if($icon){

                            //get icons original size...
                            list($width_orig, $height_orig) = @getimagesize($appIconURL);
                            if($width_orig > 0 && $height_orig > 0){

                                //create a few new sizes...
                                $sizes = array(57, 72, 114);
                                for($s = 0; $s < count($sizes); $s++){
                                    $thisSize = $sizes[$s];
                                    $width = $thisSize;
                                    $height = $thisSize;

                                    $ratio_orig = $width_orig / $height_orig;
                                    if($width / $height > $ratio_orig){
                                       $width = $height * $ratio_orig;
                                    }else{
                                       $height = $width / $ratio_orig;
                                    }

                                    //resample
                                    $icon_scaled = @imagecreatetruecolor($width, $height);
                                    @imagecopyresampled($icon_scaled, $icon, 0, 0, 0, 0, $width, $height, $width_orig, $height_orig);

                                    //output
                                    @imagepng($icon_scaled, $rootFolder . "/BT_Art/Icon_" . $thisSize . ".png");

                                }//end for each size

                            }//if original width / height > 0
                        }//if icon...

                        //process plugins...
                        $strSql = " SELECT webDirectoryName FROM " . TBL_BT_PLUGINS;
                        $res = fnDbGetResult($strSql, APP_DB_HOST, APP_DB_NAME, APP_DB_USER, APP_DB_PASS);
                        while($row = mysql_fetch_array($res)){
                            $tmpPath = APP_PHYSICAL_PATH . APP_DATA_DIRECTORY . "/plugins" . $row["webDirectoryName"];
                            if(is_dir($tmpPath)){
                                if(is_readable($tmpPath)){

                                    //copy all the files from the source-ios directory into the BT_plugins folder...
                                    $iosFolder = $tmpPath . "/source-ios";
                                    if(is_dir($iosFolder)){
                                        $newFolder = $rootFolder . "/BT_Plugins/" . ltrim($row["webDirectoryName"], "/");
                                        @mkdir($newFolder, 0755);

                                        //copy / merge every file in the /source-ios folder to this newly created folder...
                                        if($handle = opendir($iosFolder)){
                                            while(false !== ($file = readdir($handle))){
                                                if(strlen($file) > 5){
                                                    if(is_file($iosFolder . "/" . $file)){
                                                        if($file != ".DS_Store" && $file != "__MACOSX"){

                                                            //don't include if it's already been added
                                                            if(!in_array($file, $existingFiles)){

                                                                //copy the file...
                                                                copy($iosFolder . "/". $file, $newFolder . "/" . $file);

                                                                //if this is a .m or .h file, replace the app delegate name...
                                                                $lastTwoChars = substr($file, strlen($file) - 2, 2);
                                                                if(strtoupper($lastTwoChars) == ".H" || strtoupper($lastTwoChars) == ".M"){
                                                                    fnReplaceText($newFolder . "/" . $file, $originalDelegateName, $newDelegateName);
                                                                }

                                                            }//existing files

                                                            //remember file...
                                                            $existingFiles[] = $file;

                                                        }//not .DS_Store                                                                    
                                                    }
                                                }
                                            }//end while    
                                        }//if open source-ios
                                    }//is_dir /source-ios
                                }//is_readable for this plugin...
                            }//is_dir for this plugin...
                        }//end while plugins..
                    }
                    //end iOS
                    ////////////////////////////////////////////////////////////////////////////////////

                    ////////////////////////////////////////////////////////////////////////////////////
                    //Android project...                
                    if(strtoupper($whatPlatform) == "ANDROID"){
                        $originalDelegateName = "BT_appDelegate";
                        $newDelegateName = $projectName . "_appDelegate";
                        $originalPackageName = "com.buzzTouch";
                        $newPackageName = "com." . $projectName;

                        //build directories if they don't exist already...
                        $makeFolders = array("assets", "bin", "gen", "jar", "res", "src");
                        for($d = 0; $d < count($makeFolders); $d++){
                            if(!is_dir($rootFolder . "/" . $makeFolders[$d])){
                                @mkdir($rootFolder . "/" . $makeFolders[$d]);
                            }
                        }

                        //make /assets sub-directories if they don't exist already...
                        $makeFolders = array("BT_Video", "BT_Audio", "BT_Docs");
                        for($d = 0; $d < count($makeFolders); $d++){
                            if(!is_dir($rootFolder . "/assets/" . $makeFolders[$d])){
                                @mkdir($rootFolder . "/assets/" . $makeFolders[$d]);
                            }
                        }

                        //make /res sub-directories if they don't exist already...
                        $makeFolders = array("anim", "drawable", "drawable-hdpi", "drawable-ldpi", "drawable-mdpi", "layout", "values");
                        for($d = 0; $d < count($makeFolders); $d++){
                            if(!is_dir($rootFolder . "/res/" . $makeFolders[$d])){
                                @mkdir($rootFolder . "/res/" . $makeFolders[$d]);
                            }
                        }

                        //make /src sub-directories if they don't exist already...
                        if(!is_dir($rootFolder . "/src/com")) @mkdir($rootFolder . "/src/com");
                        if(!is_dir($rootFolder . "/src/com/" . str_replace("com.", "", $newPackageName))) @mkdir($rootFolder . "/src/com/" . str_replace("com.", "", $newPackageName));

                        //over-write (or create) the config data...
                        if($fh = fopen($rootFolder . "/assets/BT_config.txt", 'w')){
                            fwrite($fh, $configDataString);
                            fclose($fh);        
                        }

                        //get app's icon, could be .jpg or .png
                        if(strtolower(substr($appIconURL, -4)) == ".jpg"){
                            $icon = @imagecreatefromjpeg($appIconURL);
                        }else{
                            if(strtolower(substr($appIconURL, -4)) == ".png"){
                                $icon = @imagecreatefrompng($appIconURL);
                            }
                        }
                        if($icon){

                            //get icons original size...
                            list($width_orig, $height_orig) = @getimagesize($appIconURL);
                            if($width_orig > 0 && $height_orig > 0){

                                //create a few new sizes...
                                $sizes = array(36, 48, 57, 72);

                                //save them here...
                                $drawableFolders = array("drawable-ldpi", "drawable-mdpi", "drawable", "drawable-hdpi");

                                for($s = 0; $s < count($sizes); $s++){
                                    $thisSize = $sizes[$s];
                                    $width = $thisSize;
                                    $height = $thisSize;

                                    $ratio_orig = $width_orig / $height_orig;
                                    if($width / $height > $ratio_orig){
                                       $width = $height * $ratio_orig;
                                    }else{
                                       $height = $width / $ratio_orig;
                                    }

                                    //resample
                                    $icon_scaled = @imagecreatetruecolor($width, $height);
                                    @imagecopyresampled($icon_scaled, $icon, 0, 0, 0, 0, $width, $height, $width_orig, $height_orig);

                                    //output
                                    @imagepng($icon_scaled, $rootFolder . "/res/" . $drawableFolders[$s] . "/icon.png");

                                }//end for each size

                            }//width / height
                        }//if icon...

                        /*
                            Android Activitites: The AndroidManifest.xml file has a line that reads:
                            <!-- replace this with list of activity includes -->
                            We'll end up replacing that line with a list of activity files included in 
                            the project. It's important that each .java class in the Plugin be an Android Activity. 
                            If another .java class is needed to support the plugin it needs to be a child-class
                            within the main activity class. In other words, it's assumed that all .java class
                            files found in the source-android folder are Android Activities.                                                        
                        */
                        $activitiesList = "";

                        /* 
                            Using Maps: The AndroidManifest.xml file has a line that reads:
                            <!-- <uses-library android:name="com.google.android.maps"/> -->
                            We'll end up replacing that line with an uncommented version like this:
                            <uses-library android:name="com.google.android.maps"/>
                            if the application is using a BT_screen_map plugin.
                        */
                        $bolUsingMaps = false;

                        //process all the plugins...
                        $strSql = " SELECT webDirectoryName FROM " . TBL_BT_PLUGINS;
                        $res = fnDbGetResult($strSql, APP_DB_HOST, APP_DB_NAME, APP_DB_USER, APP_DB_PASS);
                        if($res){
                            while($row = mysql_fetch_array($res)){
                                $tmpPath = APP_PHYSICAL_PATH . APP_DATA_DIRECTORY . "/plugins" . $row["webDirectoryName"];
                                if(is_dir($tmpPath)){
                                    if(is_readable($tmpPath)){

                                        //look for source code...For Android we don't make any folder, we just copy the 
                                        //contents of the source-android to the appropriate directory in the Android project

                                        $audioDir = $rootFolder . "/assets/BT_Audio";
                                        $videoDir = $rootFolder . "/assets/BT_Video";
                                        $docsDir = $rootFolder . "/assets/BT_Docs";
                                        $srcDir = $rootFolder . "/src/com/" . str_replace("com.", "", $newPackageName);
                                        $layoutDir = $rootFolder . "/res/layout";
                                        $drawableDir = $rootFolder . "/res/drawable";

                                        $androidFolder = $tmpPath . "/source-android";
                                        if(is_dir($androidFolder)){

                                            //copy every file in the /source-android folder to the proper Android folder...
                                            if($handle = opendir($androidFolder)){
                                                while(false !== ($file = readdir($handle))){
                                                    if(strlen($file) > 5){
                                                        if(is_file($androidFolder . "/" . $file)){
                                                            if($file != ".DS_Store" && $file != "__MACOSX"){ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:57:22.497

您的 PHP 代码太大，这里的任何人都无法阅读。

也许你从这里做错了：

```
// delete pdf...
if($fh = fopen($rootFolder . "instructions.pdf", 'w')){
    fclose($fh);
    unlink('instructions.pdf');
} 
```

将其更改为（使用[file_exists](http://php.net/file_exists)因为您不需要读取文件）：

```
// delete pdf...
if(file_exists($rootFolder . "instructions.pdf"){
    unlink($rootFolder . "instructions.pdf");
} 
```

您应该对该文件具有权限。

# android - 如何制作具有某种图像的按钮（我需要一个细节）

> ID：10380844
> 
> 赞同：0
> 
> 时间：2012-04-30T08:50:15.823
> 
> 标签：android, image, button, icons, drawable

我想知道如何制作包含有点图标的按钮。我先编了一个LinearLayout，按钮就属于里面了。我尝试使用 'android:drawableLeft="@drawable/ *** " 将图标放在 Button 中，该图标对我来说太靠左了。按钮有点长，文本和图标很小，所以有一些空间是空的。我的意思是，我希望图标比原来更接近文本。现在，图标位于左侧，文本位于中心。我希望它们与一点填充物在一起。

我尝试使用 'android:drawablePadding=7dip' 但它没有用。我非常希望有人让我知道该怎么做。

祝你有美好的一天。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:54:29.617

您可以使用自定义按钮调整按钮拉伸图像大小和自定义按钮教程链接下面的链接

[http://www.thesecretpie.com/2010/07/creating-custom-fancy-buttons-in.html](http://www.thesecretpie.com/2010/07/creating-custom-fancy-buttons-in.html)

谢谢..！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:54:45.170

有两种技术。我建议你调查一下：

1.  [图像按钮](http://developer.android.com/reference/android/widget/ImageButton.html)
2.  [图像视图](http://developer.android.com/reference/android/widget/ImageView.html)

使用图像视图，您可以使用 onclick 侦听器创建一个按钮，该侦听器可以从您的活动中或从您的 xml 布局文件中创建。

# c - 函数根本没有执行或没有正确执行

> ID：10380853
> 
> 赞同：2
> 
> 时间：2012-04-30T08:50:53.937
> 
> 标签：c, embedded, firmware, 8051, sdcc

我正在开发一个嵌入式 C 程序，即使调用 killnoise 函数并且程序总是到达它，它也不会执行，但是当我检查这个函数输出的值时，我发现没有发生任何事情：

```
void KillNoise( int* array, int size )
{
  int k;

    for (k=0;k<size;k++)
    {
       if (array[k] < 20)
           array[k] = 0;
    }

} 
```

这是我称之为的地方和方式：

```
void UX_zswDecide( void )
{
    float __xdata centerOfMass[UX_NUM_SENSORS];
    float __xdata vectx, vecty, module, tg;
    int __xdata i,j;

    KillNoise( UX_bigUpArray,    NUMPOINTS );
    KillNoise( UX_bigDownArray,  NUMPOINTS );
    KillNoise( UX_bigLeftArray, NUMPOINTS );
    KillNoise( UX_bigRightArray,  NUMPOINTS );

/* the rest of the function */ 
} 
```

其中 NUMPOINTS、biguparray、bigleftarray ... 是先前声明的全局变量：

```
int   __xdata UX_bigUpArray[100];

int   __xdata UX_bigDownArray[100] ;

int   __xdata UX_bigLeftArray[100];
int   __xdata UX_bigRightArray[100] ;

#define NUMPOINTS 100 
```

非常感谢您的帮助，（我在使用另一个功能时遇到了同样的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:11:33.930

我认为你需要`__xdata`在`array`参数的声明中`KillNoise`

```
void KillNoise( int* __xdata array, int size ) 
```

或类似的东西。

# macos - 终端似乎没有自动通过 .profile

> ID：10380855
> 
> 赞同：14
> 
> 时间：2012-04-30T08:51:00.363
> 
> 标签：macos, terminal

我最近一直在添加一些别名和 .bash_profile 函数。但我注意到我的 mac 终端没有自动加载 .profile 文件，因此别名不起作用。

我已经重新启动了终端和 mac 本身。

我可以通过这样做来让它工作，但这是一个糟糕的工作：

```
. .profile 
```

任何人以前都有过这个/知道我该如何解决它。

我的 .profile 文件包含以下内容：

```
export CLICOLOR=1
export LSCOLORS=GxFxCxDxBxegedabagaced

alias testsite="cd /Applications/MAMP/htdocs/testsite/"
alias mamp="cd /Applications/MAMP/"
alias htdocs="cd /Applications/MAMP/htdocs/"
alias deploy="git push"
alias deploymaster="git push parent master"
alias pullmaster="git pulll parent master" 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-30T13:16:54.153

.bash_profile 覆盖 .profile 所以我添加的内容必须添加到 .bash_profile 中，这样可以完美地完成。

# wpf - 拉伸 ItemsControl 的项目

> ID：10380861
> 
> 赞同：2
> 
> 时间：2012-04-30T08:51:44.900
> 
> 标签：wpf, datatemplate, itemscontrol

我在这里构建了一个小型 WPF 应用程序。这一切都严格使用 MVVM 构建，只使用链接到视图模型类型的 DataTemplates。

我已经看到很多关于如何拉伸和剪辑`ListBox`es 的内容以便项目填充其父项的问题。经过大量试验后，我设法解决了这个问题，但现在我发现自己处于相同的场景中，`ItemsControl`但相同的技巧似乎不起作用。

这是`DataTemplate`正在使用的 s 之一（一个简单的`TextBox`）。请注意我如何尝试设置`HorizontalAlignment`...

```
<DataTemplate DataType="{x:Type vm:OneOfMyViewModelTypes}">
    <TextBox 
        Text="{Binding Path=Value}"
        HorizontalAlignment="Stretch"
        />
</DataTemplate> 
```

这是`ItemsControl`里面`Grid`...

```
<Grid Background="Gray">
            <Grid.Margin>
                <Thickness 
                    Left="{StaticResource ConfigurationDefaultMargin}" 
                    Right="{StaticResource ConfigurationDefaultMargin}" 
                    Bottom="{StaticResource ConfigurationDefaultMargin}" 
                    Top="{StaticResource ConfigurationDefaultMargin}" 
                    />
            </Grid.Margin>
            <Grid.ColumnDefinitions>
                <ColumnDefinition SharedSizeGroup="_key" Width="Auto"/>
                <ColumnDefinition SharedSizeGroup="_value" Width="*"/>
            </Grid.ColumnDefinitions>

            <ItemsControl 
                Background="DimGray" 
                Grid.IsSharedSizeScope="True"
                ItemsSource="{Binding Path=Configuration, Mode=OneWay}" 
                HorizontalAlignment="Stretch" 
                HorizontalContentAlignment="Stretch"
                >
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition SharedSizeGroup="_key"/>
                                <ColumnDefinition SharedSizeGroup="_value"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock
                                Style="{StaticResource ExtensionConfigurationLabel}"
                                Grid.Column="0"
                                Margin="5,5,5,0"
                                Text="{Binding Path=Caption}" 
                                />
                            <ContentPresenter 
                                Grid.Column="1"
                                HorizontalAlignment="Stretch"
                                Margin="5,5,5,0"
                                Content="{Binding}" 
                                />
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid> 
```

我已经使用颜色来查看控件的大小。`Grid`是灰色的，而是`ItemsControl`深灰色的。

这是结果...

![这是结果](../Images/4e4f096c493bdfd5d9078381b2c3a772.png)

正如您从颜色中看到的那样，包含`Grid`延伸而`ItemsControl`没有延伸。我确实将其`HorizontalAlignment`属性设置为，`Stretch`但似乎没有效果。我还有什么需要做的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:09:04.550

您的主（外部）网格中有两列，但您只使用第一列。第二列使用所有剩余空间。

# wpf - 如何放大 wpf 图表工具包？

> ID：10380870
> 
> 赞同：1
> 
> 时间：2012-04-30T08:52:13.777
> 
> 标签：wpf, charts, wpftoolkit

我需要放大 wpf 工具包图表。

我有两种选择来实现这一方法，即通过使用 UserControl，我觉得这不太好，因为它需要付出很多努力。其次，我尝试扩展它的 Chart 和 LineSeries 类，但它们是密封类。

知道如何实现此功能。提前致谢。

DJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:02:34.153

当我想用 wpf 进行缩放时，只需使用 ScaleTransform。这对你有用吗？

```
 <Slider x:Name="zoomer" Width="100" Value="{Binding Source={x:Static Properties:Settings.Default}, Path=Zoomer, Mode=TwoWay}"  Minimum="0.8" Maximum="2.2" TickFrequency="0.1" IsSnapToTickEnabled="True" />

    <YourChartControl>
        <YourChartControlLayoutTransform>
            <ScaleTransform ScaleX="{Binding ElementName=zoomer, Path=Value}" ScaleY="{Binding ElementName=zoomer, Path=Value}"></ScaleTransform>
        </YourChartControlx:Name.LayoutTransform>
     </YourChartControl> 
```

# perl - Perl：从 SOAP::WSDL 对象获取完整请求

> ID：10380873
> 
> 赞同：3
> 
> 时间：2012-04-30T08:52:31.300
> 
> 标签：perl, soap, wsdl, http-request

我正在使用`SOAP::WSDL`另一家公司的自定义 WSDL 文件。每次他们为我做出改变并且我重新创建我的模块时，都会出现一些问题。查找问题相当繁琐，因为我找不到正确的方法来访问发送到 SOAP 服务器的实际请求。

到目前为止，获取请求的唯一方法是结合使用 tcpdump 和 wireshark 来提取请求和结果。那行得通，但是由于我在开发机器上没有root权限，所以每次我想这样做时都必须让管理员过来。我觉得必须有另一种方法可以到达事物`HTTP::Request`内部的对象`SOAP::WSDL`。但是如果服务器返回一个错误，我什至没有响应对象，而是一个`SOAP::WSDL::SOAP::Typelib::Fault11`与请求没有可见关系的对象。

我也尝试过使用调试器，但我无法找到实际的请求部分。我还不明白如何告诉调试器跳到复杂数量的包深处的特定部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T19:14:10.130

我偶然发现了这个，我自己也有同样的问题。我发现答案是使用raina77ow 列出的两个选项。

```
$service->outputxml(1); 
```

返回整个 SOAP 信封 xml，但这需要与

```
$service->no_dispatch(1); 
```

设置 no_dispatch 后，将打印 SOAP 请求，而不是来自请求的回复。希望这可以帮助其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T09:32:01.370

您是否尝试过使用[SOAP::WSDL::Client](https://metacpan.org/module/SOAP%3a%3aWSDL%3a%3aClient)跟踪方法——尤其是[outputxml](https://metacpan.org/module/SOAP%3a%3aWSDL%3a%3aClient#outputxml)？它返回要发送到服务器的原始 SOAP 信封。

您还可以使用[SOAP::WSDL](https://metacpan.org/module/SOAP%3a%3aWSDL)包的[no_dispatch](https://metacpan.org/module/SOAP%3a%3aWSDL#no_dispatch)配置方法：

> 设置后，call() 返回纯请求 XML，而不是将 SOAP 调用分派给 SOAP 服务。便于测试/调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:17:07.503

我找到了一种至少打印出生成的 XML 代码的方法。

首先，我按照 raina77ow 的建议查看了[SOAP::WSDL::Client 。](http://search.cpan.org/~mkutter/SOAP-WSDL-2.00.10/lib/SOAP/WSDL/Client.pm)不过，这不是我需要的。但后来我遇到了[SOAP::WSDL::Factory::Serializer](http://search.cpan.org/~mkutter/SOAP-WSDL-2.00.10/lib/SOAP/WSDL/Factory/Serializer.pm)。在那里，它说：

> 序列化器对象也可以通过使用 set_serializer 方法直接传递给 SOAP::WSDL::Client。

有点烦躁，我想出了一个[SOAP::WSDL::Serializer::XSD的包装类，它是](http://search.cpan.org/~mkutter/SOAP-WSDL-2.00.10/lib/SOAP/WSDL/Serializer/XSD.pm)[SOAP::WSDL](http://search.cpan.org/~mkutter/SOAP-WSDL-2.00.10/lib/SOAP/WSDL.pm)使用的默认序列化程序。查看代码也有帮助。

这是我写的模块。它`SOAP::WSDL::Serializer::XSD`用作基类并重载`new`and`serialize`方法。虽然它只将参数传递给`new`，但它会从中获取返回的 XML`serialize`并打印出来，这足以进行调试。我不确定是否有办法将它放在我可以轻松获取它的地方。

```
package MySerializer;
use strict;
use warnings;
use base qw(SOAP::WSDL::Serializer::XSD);

sub new {
  my $self = shift;
  my $class = ref($self) || $self;
  return $self if ref $self;

  # Create the base object and return it
  my $base_object = $class->SUPER::new(@_);
  return bless ($base_object, $class);
}

sub serialize {
  my ($self, $args_of_ref) = @_;

  # This is basically a wrapper function that calls the real Serializer's
  # serialize-method and grabs and prints the returned XML before it
  # giving it back to the caller

  my $xml = ref($self)->SUPER::serialize($args_of_ref);
  print "\n\n$xml\n\n"; # here we go
  return $xml;
}

1; 
```

这就是我所说的：

```
my $serializer = MySerializer->new();
$self->{'_interface'} = Lib::Interfaces::MyInterface->new();
$self->{'_interface'}->set_serializer($serializer); # comment out to deactivate 
```

很容易停用。仅在该`set_serializer`行中添加注释。

当然，将一段 XML 打印到命令行不是很漂亮，但它可以完成工作。我只是偶尔需要它为什么编码/测试，所以我猜这很好。

# web-services - 当用户注销时，我们是否需要在 Windows Identity Foundation 的 SecurityTokenService 中实现一些逻辑？

> ID：10380877
> 
> 赞同：1
> 
> 时间：2012-04-30T08:52:38.227
> 
> 标签：web-services, wcf-security, wif, wse, sts-securitytokenservice

我正在实现自己的 SecurityTokenService ，它源自[WIF 的 STS](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.securitytokenservice.securitytokenservice.aspx)。我是否需要强制执行[Cancel方法？](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.securitytokenservice.securitytokenservice.cancel.aspx)

默认情况下，如[本文](http://msdn.microsoft.com/en-us/library/ee517265.aspx)所述，每次调用都会实例化[Windows Identity Foundation 的 SecurityTokenService](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.securitytokenservice.securitytokenservice.aspx)。如果我没有明确地缓存任何东西（或做类似的事情）， **你是否看到任何应该通过实现 Cancel 方法来处理的事情？****STS 或 WIF 是否在后台执行用户注销时应处理的操作（调用取消方法）？** 例如，如果我一直在缓存令牌，那么当用户注销时，我必须在 Cancel 方法中将其从缓存中删除。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:46:48.630

这取决于您的实施。如果您的 STS 没有实现[Validate](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.securitytokenservice.securitytokenservice.validate)方法，那么实现 Cancel 是没有意义的。

Validate 的目的是收件人可以通过您的 STS 检查是否在其到期窗口内的令牌已被撤销（可能通过取消）。

FWIW，我认为 AD FS 不支持取消和验证。很少有现实世界的架构使用它们。

请注意，当用户在 AD FS 中注销时，他们与 AD FS 服务器的会话将被撤销。但是，AD FS 代表他们发行的任何代币仍将被依赖方接受。**

# mysql - 在形成 sql 查询时需要帮助

> ID：10380879
> 
> 赞同：3
> 
> 时间：2012-04-30T08:52:48.800
> 
> 标签：mysql, sql, sql-server-2008

我有一张主表和两张表，一张是向内表，另一张是 issue_return_broken 表。所有 3 个表都使用 ITEM_CODE（主键）关联。如果我运行以下 3 个查询，

## 主查询：

```
 select item_code, item_name , item_spec, item_quantity,item_unitprice,item_value from      
 ven_inv_partmaster
 where item_code ='NAVTES13' 
```

## 查询一：

```
select entry_date, quantity_in from ven_inv_inwardmaster    
 where item_code ='NAVTES13'
 group by entry_date,quantity_in 
```

## 查询2：

```
 select issue_date, issue_qnty,rtn_qnty,brkn_qnty from ven_inv_ibrmaster_log ibrlog  
   where ibrlog.item_code ='NAVTES13' and issue_dateid !=0
   group by issue_date,issue_qnty,rtn_qnty,brkn_qnty 
```

## 查询 3：

```
 select rtn_date, rtn_qnty,brkn_qnty from ven_inv_ibrmaster_log ibrlog   
   where ibrlog.item_code ='NAVTES13' and issue_dateid =0
   group by rtn_date,rtn_qnty,brkn_qnty 
```

我得到如下输出，

```
 item_code item_name   item_spec  item_quantity    item_unitprice  item_value
  NAVTES13    NAVIN         TEST13       175               15.00    2175.00 
```

输出1：

```
 entry_date               quantity_in
   2012-04-01 00:00:00.000      50
   2012-04-05 00:00:00.000        50 
```

输出 2：

```
 issue_date             issue_qnty    rtn_qnty    brkn_qnty
   2012-04-02 00:00:00.000    25             0           0
   2012-04-10 00:00:00.000    10             0           0 
```

输出 3：

```
 rtn_date             rtn_qnty    brkn_qnty
  2012-04-05 00:00:00.000     10            0   
  2012-04-10 00:00:00.000     9         6 
```

我需要将所有这些查询组合成一个查询，并且需要这样的结果集..

```
 Date        Quantity_Inward   Quantity_Issued   Return_Quantity   Broken_Quantity
  1/4/2012          50                  0                0               0
  2/4/2012           0                 25                0               0
  5/4/2012           0                  0               10               0 
  5/4/2012          50                  0                0               0
  10/4/2012          0                  0                9               6
  10/4/2012          0                 10                0               0 
```

请帮我解决这个问题..

向内和 ibr 主表：

![在此处输入图像描述](../Images/e1ba2829fe63475a4a2c7c794b01bdec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:16:27.797

要以所示方式组合查询结果，请在[`UNION`](http://dev.mysql.com/doc/refman/5.5/en/union.html)外部查询中使用 with ordering：

```
SELECT
  DATE_FORMAT(logdate, '%e/%c/%Y') AS `Date`,
  quantity_in AS Quantity_Inward,
  issue_qnty  AS Quantity_Issued,
  rtn_qnty    AS Return_Quantity,
  brkn_qnty   AS Broken_Quantity
FROM (
  select date(entry_date) as logdate, quantity_in,
    0 as issue_qnty, 0 as rtn_qnty, 0 as brkn_qnty
  from ven_inv_inwardmaster
  where item_code ='NAVTES13'
UNION ALL
  select date(issue_date), 0, issue_qnty, rtn_qnty, brkn_qnty
  from ven_inv_ibrmaster_log
  where item_code ='NAVTES13' and issue_dateid != 0
UNION ALL
  select date(rtn_date), 0, 0, rtn_qnty, brkn_qnty
  from ven_inv_ibrmaster_log
  where item_code ='NAVTES13' and issue_dateid  = 0
) AS t
ORDER BY logdate ASC 
```

如果需要，您甚至可以在外部查询中进行聚合（您的示例输出不这样做）：

```
SELECT
  DATE_FORMAT(logdate, '%e/%c/%Y') AS `Date`,
  SUM(quantity_in) AS Quantity_Inward,
  SUM(issue_qnty)  AS Quantity_Issued,
  SUM(rtn_qnty)    AS Return_Quantity,
  SUM(brkn_qnty)   AS Broken_Quantity
FROM (
  ...
) AS t
GROUP BY logdate
ORDER BY logdate ASC 
```

您可以通过组合查询 2 和 3 来稍微提高性能，如下所示：

```
 select
    date(if(issue_dateid = 0, rtn_date, issue_date)),
    if(issue_dateid = 0, 0, issue_qnty),
    rtn_qnty,
    brkn_qnty
  from ven_inv_ibrmaster_log
  where item_code = 'NAVTES13' 
```

注意我已经`GROUP BY`从您的查​​询中删除了这些条款，因为您上面的评论表明它们不是必需的。

# lync-2010 - UCMA 3.0 API 会议错误：收到会议邀请或会议升级请求后无法加入其他会议

> ID：10380883
> 
> 赞同：0
> 
> 时间：2012-04-30T08:52:55.227
> 
> 标签：lync-2010, ucma

我们有一个基于 UCMA 3.0 的应用程序/机器人，可以将最终用户与专家相匹配。它将来自最终用户的传入一对一聊天请求迁移到多用户会议中，然后邀请专家参加由此产生的多用户会议。应用程序本身仍然是会议的参与者。在任何给定时间，我们的应用程序可能会代理多个此类会议，但每个最终用户只有一个。但是，一位专家可能同时参加多个会议。在我们的应用程序日志中，我们偶尔会看到以下异常。

Conference Migration conf call # 63809878 中的错误，地址：sip:xxxxxx@xxx.com;gruu;opaque=app:conf:focus:id:TQRREACE System.InvalidOperationException：收到会议邀请或会议升级请求后无法加入其他会议. 在 Microsoft.Rtc.Collaboration.ConferenceSession.VerifyAndGetConferenceAddress(String meetingUri, String parameterName) 在 Microsoft.Rtc.Collaboration.ConferenceSession.BeginJoinCommon(String meetingUri, ConferenceJoinOptions options, AsyncCallback userCallback, Object state) 在 Microsoft.Rtc.Collaboration.ConferenceSession.BeginJoin （字符串 ConferenceUri，ConferenceJoinOptions 选项，AsyncCallback userCallback，对象状态）在（字符串 A_0，字符串 A_1，字符串 A_2，布尔 A_3，布尔 A_4）

```
Below is the code snippet used to make conference. Previously this site was an OCS 2007 R2 Installation and was migrated to Lync 2010 Server.
Site is running in mixed mode. It occurs only on production server and we are not able to generate this exception on dev server, we 
have tested it after generating more than 15 conferences simultaniously but no luck. 
```

private void CreateAdHohConf(string user1Uri, string user2uri, string subject) { Exception exception = null;

```
 // Create conference scheduling details for the conference.
            ConferenceScheduleInformation scheduleInfo = new ConferenceScheduleInformation();

            // Restrict the conference to invited users only.
            scheduleInfo.AccessLevel = ConferenceAccessLevel.Everyone;

            // Set a subject for the conference.
            scheduleInfo.Subject = subject;
            scheduleInfo.Description = subject;
            scheduleInfo.ConferenceId = ConferenceServices.GenerateConferenceId();
            scheduleInfo.ExpiryTime = System.DateTime.Now.AddHours(8);
            scheduleInfo.IsPasscodeOptional = true;
            scheduleInfo.PhoneAccessEnabled = false;

            // Don't automatically assign a leader.
            scheduleInfo.AutomaticLeaderAssignment = AutomaticLeaderAssignment.Everyone;

            // Add the caller and recipient as participants.
            scheduleInfo.Participants.Add(new ConferenceParticipantInformation("sip:" + user1Uri, ConferencingRole.Leader));
            scheduleInfo.Participants.Add(new ConferenceParticipantInformation("sip:" + user2uri, ConferencingRole.Leader));

            scheduleInfo.Mcus.Add(new ConferenceMcuInformation(McuType.ApplicationSharing));
            scheduleInfo.Mcus.Add(new ConferenceMcuInformation(McuType.InstantMessaging));
            scheduleInfo.Mcus.Add(new ConferenceMcuInformation(McuType.AudioVideo));
            scheduleInfo.Mcus.Add(new ConferenceMcuInformation(McuType.Meeting));

             //Scheduling conference

            ConferenceServices objLocalConfSvc = lyncAgent.LocalEndpoint.ConferenceServices;
            Conference confSession = null;
            objLocalConfSvc.BeginScheduleConference(scheduleInfo,
                result =>
                {
                    try
                    {
                        confSession = objLocalConfSvc.EndScheduleConference(result);

                    }
                    catch (RealTimeException rtex)
                    {
                        exception = rtex;

                    }
                    catch (Exception ex)
                    {
                        exception = ex;

                    }
                    finally
                    {
                        _waitForConferenceScheduling.Set();
                    }
                }, objLocalConfSvc);

            _waitForConferenceScheduling.WaitOne();

            //Begin Join conference
           ConferenceSession objLocalConfSession=this.call.Conversation.ConferenceSession;
            try
            {
                ConferenceJoinOptions joinOptions = new ConferenceJoinOptions() { CanManageLobby = false, JoinMode = JoinMode.Default };
                objLocalConfSession.BeginJoin(new RealTimeAddress(confSession.ConferenceUri).Uri, joinOptions,
                    result => {
                        try
                        {
                            objLocalConfSession.EndJoin(result);
                        }
                        catch (Exception ex)
                        {
                            exception = ex;

                        }
                        finally
                        {
                            //Again, for sync. reasons.
                            _waitForConferenceJoin.Set();
                        }
                    }
                , this.call.Conversation.ConferenceSession);
                // Wait until join completes.new RealTimeAddress(this._conference.ConferenceUri).Uri,
                _waitForConferenceJoin.WaitOne();
            }
            catch (InvalidOperationException ioex)
            {
                exception = ioex;

            }
            catch (Exception ex)
            {
                exception = ex;

            }

            //Begin Escalation
          Conversation objLocalConv= this.call.Conversation;
          try
          {
              objLocalConv.BeginEscalateToConference(
                  result =>
                  {
                      try
                      {
                          objLocalConv.EndEscalateToConference(result);
                      }
                      catch (Exception ex)
                      {
                          exception = ex;

                      }
                      finally
                      {
                          //Sync It
                          _waitForEscalation.Set();
                      }
                  }
                      , objLocalConv);
              // Wait until escalation completes.
              _waitForEscalation.WaitOne();
          }
          catch (InvalidOperationException ioex)
          {
              exception = ioex;
          }
          catch (Exception ex)
          {
              exception = ex;
          }
          finally
          {
              if (exception != null)
              {
                  lyncAgent.Logger.Error( "Error in Conference Migration conf call # " + GetHashCode() + " , Address :" + confSession.ConferenceUri  , exception);
              }
          }
        } 
```

请建议优先考虑可能存在的问题。

```
 Thanks in advance. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:47:04.993

我们设法查明了原因。如果参与者列表中的任何人已经添加了任何联系人以与我们的端点进行对话，就会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:33:29.460

此方法是否驻留在一个可能被多个源同时调用的对象中？

如果是这样，使用像 _waitForConferenceScheduling 这样的类级别变量可能会出现问题。在线程 B 的异步操作实际完成之前，线程 A 可能会意外地让线程 B 继续进行。所以线程 B 可以在调用 .EndJoin 之前调用 .BeginEscalate。

当我编写 UCMA 代码时，我通常使用嵌套回调来防止此类事情发生。

除此之外，我建议您在应用程序服务器和 Lync 前端服务器上运行 OCSLogger 以收集 SIPStack、S3 和协作日志。详细查看实际的 SIP 消息将提供一些线索。

您将寻找参加会议的邀请以及对该邀请的回复。

# android - Android：支持多屏

> ID：10380885
> 
> 赞同：8
> 
> 时间：2012-04-30T08:53:04.497
> 
> 标签：android

我正在尝试在 Android 中制作应用程序。我希望它应该能够在不同屏幕尺寸的多部手机上运行，​​所以我研究[了开发人员对多屏幕的支持](http://developer.android.com/guide/practices/screens_support.html)，据此我必须创建 3 个不同的 xml 文件来支持三种不同的屏幕尺寸以及 3 种不同类型的图像对于每种类型的 xml 文件。但是在博客上，我想到了通过使用当前屏幕尺寸方法来做到这一点。所以我很困惑我应该做什么。意味着优化和提高性能的方式。以及哪一款会更完美支持所有类型的屏幕（超大屏幕除外）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T12:13:48.357

在 XML 文件中定义高度、宽度和其他参数是更好的选择，而不是在运行时。因为 XML 文件作为活动的元数据（数据载体），并且在调用 onCreate 方法时避免了很多混乱。另外，为图像质量创建不同的文件夹（hdpi、xhdpi、ndpi、ldpi）

7 英寸设备使用 mhpi 10 英寸设备使用 hdpi 和 xhdpi 而 NEXUS 选项卡使用 hdpi 和 xhdpi 而不管它们的大小。手机使用 ldpi 和 ndpi。

美妙之处在于android设备在找到时会自动选择合适的内容，即布局和图像。如果没有找到，它将首先搜索其他布局文件夹，例如在 x-large 文件夹中找不到布局，然后它将搜索大、中、小，其中一个最适合，（如果在其中找不到布局相应的文件夹）。

Nexus会给你带来很多麻烦。要检查您的布局在不同设备上的外观，请尝试使用选项，该选项会告诉您在具有这些高度宽度的设备上的外观，呈现在图形（a 视图）布局中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:04:02.577

您可以为不同的屏幕尺寸使用三种不同的布局，android 会选择合适的布局，但是为每种类型的屏幕格式使用三种不同的布局并不是一个好主意，因为如果屏幕是少于它的罚款，但如果屏幕数量增加，它会变得困难。就像如果您忘记在其中一个屏幕尺寸中添加更改一样，它会崩溃，但有任何异常。您可以做的是将不同大小的图像保存在不同的文件夹中，并通过在 dp 中使用布局权重和边距来练习布局以在一个布局中形成标准。

看我这个答案

[表格布局间距问题](https://stackoverflow.com/questions/10380092/table-layout-spacing-issues/10380225#10380225) 并检查此布局是否适用于所有屏幕尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:03:44.220

如果所有屏幕尺寸的设计都相同，则可以使用 dp 并且所有屏幕只有一个 xml。但是您应该支持所有屏幕的图标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:17:39.917

我认为 David Ohanyan 的方式不那么令人困惑，但忘了说点什么......只要有可能，就在 xx_layout、图像等中使用样式，这样文件夹内就会有 1 个 layout.xml 和 3 个样式文件：值、值-小，布局大。

至少对我来说，它比打开 30 个不同的布局文件更容易混淆。

# r - R：绘制为pdf时丢失方形绘图区域

> ID：10380892
> 
> 赞同：1
> 
> 时间：2012-04-30T08:54:11.723
> 
> 标签：r

以前肯定有人问过这个问题，但我找不到解决方案。我想用一个*完美*的正方形作为边界框绘制一些数据。这样做很容易，但是一旦我将`par(pty="s")`绘图保存为 pdf 文件，正方形就会丢失。据我了解，这是因为`pdf()`用作`paper="special"`默认值，因此尊重`width`和`height`（由于我们有轴标签，因此不会给出完美的正方形）。但是指定其他`paper`选项并没有帮助。

```
## the bounding rectangle in the following plot is a perfect square...
U <- matrix(runif(1000), ncol=2)
par(pty="s")
plot(U, type="p", xlab="U_1", ylab="U_2")

## ... however, not anymore if the plot is generated as a .pdf
pdf(file="U.pdf", width=6, height=6)
par(pty="s")
plot(U, type="p", xlab="U_1", ylab="U_2")
dev.off() 
```

# objective-c - 目标 C：使用 UIScrollview 改变方向

> ID：10380896
> 
> 赞同：0
> 
> 时间：2012-04-30T08:54:37.773
> 
> 标签：objective-c, xcode, uiscrollview, uiinterfaceorientation

我正在尝试使用 UIScrollView (pagingEnabled) 制作一个应该适应设备界面方向的应用程序。

为此，我制作了两个加载了 UIImageviews 和 UIButtons 的 UIScrollViews 和动画 (CA)。一个用于纵向，另一个用于横向（您将在我的代码中看到它）。

现在我的问题是每当我旋转设备时，是的！它响应方向变化，但它会回到第一页。

好的图片这个...您已经在纵向滚动视图的第 10 页上，然后当您切换到横向时，它又在第一页上。

我希望解释清楚。

并且...当我旋转它时它在 iPad 上崩溃。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown || interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown){
        //self.view = portraitView;
        [self changeTheViewToPortrait:YES andDuration:duration];

    }
    else if(toInterfaceOrientation == UIInterfaceOrientationLandscapeRight || toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft){
        //self.view = landscapeView;
        [self changeTheViewToPortrait:NO andDuration:duration];
    }
}

- (void) changeTheViewToPortrait:(BOOL)portrait andDuration:(NSTimeInterval)duration{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:duration];

    if(portrait){
        //change the view and subview frames for the portrait view
        [self forPortrait];
        [self removeMainSVLContents];
    }
    else{   
        //change the view and subview  frames for the landscape view
        [self forLandscape];
        [self removeMainSVPContents];
    }

    [UIView commitAnimations];
} 
```

“forPortrait”中的内容与“forLandscape”中的内容相同，它们只是有不同的框架，并且它也有不同的图像，可以适应纵向和横向的屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:00:15.663

在动画使用`**scrollRectToVisible:animated:**`方法显示或停留在滚动视图的期望位置时，这可能对您有用。

# coldfusion - 尝试学习 ColdFusion 但无法访问管理员

> ID：10380898
> 
> 赞同：2
> 
> 时间：2012-04-30T08:54:55.153
> 
> 标签：coldfusion, wamp

我安装了 WAMP 和 ColdFusion，但是当我转到[http://localhost/cfide/administrator](http://localhost/cfide/administrator)时，它会出现 404 错误。CFML 显示正常，因此 ColdFusion 服务器必须正确运行。

我正在使用 WAMP ServerVersion 2.2 ColdFusion 9 和 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:54:55.233

Seybsen 和 Jason 都提到了无法攻击管理员的两个最常见的原因。鉴于您在 Windows 上，它不太可能区分大小写。但是没有 index.cfm 作为默认文档将是一个问题。您可以将其添加到 http.conf：

```
<IfModule dir_module>
DirectoryIndex dex index.html index.cfm default.cfm
</IfModule> 
```

如果击中包括 index.cfm 在内的整个字符串不起作用，那么很可能是 Mark 的解决方案。详细说明，您需要检查 http.conf 或 mod_jk.conf 以确保别名存在：

```
Alias /CFIDE "C:\[full path to CFIDE]\CFIDE"
<Directory "C:\[full path to CFIDE]\CFIDE">
Options Indexes FollowSymLinks
AllowOverride None
Order allow,deny
Allow from all
</Directory> 
```

该别名也应该适用于所有虚拟主机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:30:09.937

检查您的 httpd.conf 文件以确保有 CFIDE 的别名（并记住区分大小写）。如果您仍然无法使其工作，请尝试运行 cfusion9/bin 中的 apache 连接器脚本 ... 或运行 wsconfig 以获得 gui 以尝试连接它。还记得以管理员身份运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:00:49.130

如果您的服务器设置默认没有设置 localhost，请尝试您的实际 IP 地址。

在 Windows 中 - 运行 CMD 或命令提示符...然后 ipconfig

你应该得到你的IP地址...

用该 IP 地址替换 localhost - 我过去遇到过这个问题......

然后创建一个具有正确地址的快捷方式

# css - 固定 div 居中 div 左侧

> ID：10380899
> 
> 赞同：2
> 
> 时间：2012-04-30T08:54:55.993
> 
> 标签：css, layout, html

我这辈子都做不到。我想要一个固定的 div （菜单）在一个居中的 div （内容）的左边。当窗口变小时，页面应该能够像往常一样调整大小，固定 div 接触左窗口墙。

我画了一张我想做的图：

[我想要完成的图像](http://postimage.org/image/swy7lic8l/)

**编辑**我希望能够调整窗口大小，并且内容和菜单不应该从左侧浏览器墙上掉出来。而且菜单应该始终相对于内容固定......**编辑**

**EDIT2**以下正是我想要的（来自 xFortyFourx 的扩展解决方案）：

```
#body{width: 1200px; border: 1px solid #000; margin: 0 auto;}
#wrap {width: 800px;min-width: 800px;min-height: 1800px;margin: 0px auto;border: 2px #000 solid;position: relative;}
#sidebar {width: 160px;height: 100px; border: 2px #000 solid;position: absolute;top: 0;left: -180px;}
#fixed{position: fixed; width: 160px; height: 50px; background-color: #234324;}
<div id="body"><div id="wrap"><p>Content</p><div id="sidebar"><div id="fixed"><p>Sidebar</p></div></div></div></div> 
```

**编辑2**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:59:31.293

HTML

```
<div id="wrap">
<div id="sidebar"> </div>
</div> 
```

CSS：

```
#wrap {
    width: 950px;
    min-height: 400px;

    margin: 50px auto;
    border: 2px #000 solid;

    position: relative;
}
    #sidebar {
        width: 50px;
        height: 100px;
        border: 2px #000 solid;
        position: absolute;
        top: 0;
        left: -70px;
    } 
```

编辑：这是一个示例[http://jsfiddle.net/XWkBw/](http://jsfiddle.net/XWkBw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:04:45.097

HTML：

```
<div class="main-container">
    <div class="navigation">
        nav    
    </div>
    <div class="content">
        content        
    </div>
</div> 
```

CSS：

```
.main-container {
    width: 400px;
    margin: 0 auto;        
}

.navigation {
    width: 100px;
    float: left;
}

.content {
    margin-left : 110px;
} 
```

jsFiddle 示例：http: [//jsfiddle.net/5ZUrF/](http://jsfiddle.net/5ZUrF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:10:31.770

你可以通过这个例子：

[左侧固定框](http://jsfiddle.net/XWkBw/3/)

**HTML**

```
<div id="wrap">
<div id="sidebar"> </div>
</div> 
```

**CSS**

```
#wrap {
    width: 500px;
    min-height: 500px;

    margin: 50px auto;
    border: 2px #000 solid;

    position: relative;
}
    #sidebar {
        width: 50px;
        height: 100px;
        border: 2px #000 solid;
        position: fixed;
        top: 50px;
        left: 60px;
    } 
```

# facebook - 如何使用 JSP 代码自动提交 Spring Security 登录表单？

> ID：10380902
> 
> 赞同：1
> 
> 时间：2012-04-30T08:55:08.447
> 
> 标签：facebook, jsp, spring-security, form-submit

我在普通登录表单中使用spring security，用户在其中注册，然后输入他们的用户名和密码进行登录。我使用 facebook 登录并使用 google 选项登录，我能够验证用户并最终获取用户的信息，如电子邮件、名字、姓氏等，登录到 fb/google 后，我正在使用 fb/google 用户电子邮件（唯一）作为用户名和系统生成的密码作为登录凭据，以便这些值将自动输入到 Spring Security 登录表单，然后如果我单击提交按钮，他/她将能够登录，然后将进行会话处理像在我的网站上注册的普通用户一样，由 spring security 照顾。

因为，上述所有步骤都是自动化的，除了最后一步，即提交表单我想自动化最后一步也使用 javascript 或 JSP。我尝试在 JSP 中使用 javascript 提交表单，但无法提交

```
 <%
    if(Success_login_with_facebook/Success_login_with_google)
    {
    email = fb_email/google_email;
    Sql query to get username and password from db using email;//unique row will be returned

    uname_db = username;
    uname_pass = password;

    out.println("<script>document.forms('login').submit();</script>");
    }

    %>

<div id="autologin" style="display:none">
    <form name="f" id='login' action="<c:url value='j_spring_security_check'/>" method="POST" >

        User ID  <input size=35 type='text' id="first" name='j_username' value='<%=uname_db %>'/>
        Password<input size=35 type='password' name='j_password' value='<%=pass_db %>'>

        <input type="hidden" name="_spring_security_remember_me" value=true>

        <input style="height:30px"  name="submit" type="submit" value="Sign In">

        </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:48:23.110

您的解决方案应该有效，但它缺少一件事。在尝试使用 JavaScript 提交表单之前，您需要确保表单存在。在您的示例中，您正在表单上方执行 out.println 。将它移到表单下方，JavaScript 应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:30:17.390

它不起作用的原因是因为html表单的**提交按钮名称为“提交”，**如果我们尝试运行javascript **document.forms['login'].submit();** 它不会提交表单。如果表单提交按钮名称不是“提交”，那么它将起作用。

# asp.net - 为 GridButtonColumn 添加页脚

> ID：10380903
> 
> 赞同：0
> 
> 时间：2012-04-30T08:55:13.793
> 
> 标签：asp.net, footer, telerik-grid

我正在使用 Radgrid，我想将 GridButtonColumn 单元格的总和放在页脚中，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:15:42.180

您应该使用 OnCustomAggregate 网格事件并在那里汇总您的值，这是一篇关于 summing 的知识库文章：

[http://www.telerik.com/help/aspnet-ajax/grid-totals-in-footers.html](http://www.telerik.com/help/aspnet-ajax/grid-totals-in-footers.html)

和使用示例：

[http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/aggregates/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/aggregates/defaultcs.aspx)

查看后面的代码，方法 RadGrid1_CustomAggregate，这是该示例中布尔列“Discontinued”的自定义总和。

# cpu-architecture - CPU指令集背后的基本原理是什么？

> ID：10380907
> 
> 赞同：2
> 
> 时间：2012-04-30T08:55:39.437
> 
> 标签：cpu-architecture

在检查 Intel x86 处理器的指令集时，我注意到有一些“直观”的指令，如“mov”、“add”、“mul”……而其他指令似乎有点不自然，比如“sete”。这个问题更多是出于好奇而不是实际问题：为什么设计人员会选择在单个指令中实现特定的执行场景？您知道任何可以解释此类设计决策的阅读材料吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T04:37:09.900

设计人员用来决定“特定执行场景”是否是指令的合理候选者的一些标准：

1.  **无状态行为- 操作在***执行*时必须仅依赖于操作数或其他可见的机器状态（例如算术标志）。不允许隐藏状态。此限制排除了在指令似乎已完成后仍处于忙碌状态的非阻塞指令。

2.  **有限的内存接触**- 内存访问通常是速率限制器。除了提高代码密度之外，如果由于内存瓶颈而导致两者执行相同的操作，那么将离散操作组合成一条大指令是没有意义的。

3.  **计算上有趣**- 新指令应该比其他方式更有效地执行某些操作。x86 AES 指令是极端的例子。相对简单的操作（如 bit swizzles）如果经常发生也很重要。

4.  **商业价值**——执行指令的硅片面积和验证工作是否能收回成本？

5.  **兼容性值**——最后但并非最不重要的一点是，存在许多指令只是为了支持旧版软件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T09:05:58.920

在 的情况下`sete`，这可能是在指令集中编写代码的实际经验问题。至少如果内存服务，`sete`从 386 开始添加，所以到那时指令集已经活跃使用了几年。猜测一下，他们可能花了一些时间查看代码，以找到已经做了很多但指令集中不直接支持的事情。他们可能会筛选那些，通过直接在 CPU 中支持它们来找到那些容易提高效率的。

很多情况都与此类似——工作基本上是在软件中进行原型设计，以找到一个相当灵活、高效且易于实现的设计。然后，当设计相对完善时，CPU 设计人员会检查它，看看他们是否不能通过在硬件中实现（至少部分）它来使其至少更有效率。

大多数所谓的 RISC 处理器都是通过在现有处理器上使用现有编译器收集源代码生成的代码的统计数据而设计的。然后他们查看了指令使用的频率，并（试图）优化那些经常使用的指令，并简单地删除那些不常用的指令。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-09T10:40:01.343

至少有两种可能的序列来实现代码。这是我对它们的分析

```
; "classic" code

cmp edx,15
jne past
mov al,20
past: 
```

和

```
; "evolved" code

cmp edx,15
sete al,20 
```

有条件的简单赋值“应该”涉及在相反条件下的条件跳转，即使它只围绕一条指令跳转，这是一种心态。但是，用您自己的话说，它是一个经常发生的特定执行场景，所以如果有更好的替代方案，为什么不呢？

当代码执行时，影响执行速度的因素有很多。其中两个是比较/算术/布尔运算的结果到达标志寄存器所需的时间，另一个是执行跳转时的执行惩罚（我有点过于简化了）。

所以经典代码要么执行移动，要么跳转。前者可能会与其他代码并行执行，而后者可能会导致预取器从新位置加载数据，从而导致等待状态。可能涉及处理器的分支预测，并且可能 - 取决于许多因素 - 预测不正确，这会导致额外的惩罚。

在进化的情况下，preftecher 完全不受影响，这有利于执行速度。此外，与 mov+jne 组合相比，sete 序列可能适合更少的字节，这意味着执行中将涉及相对较少的代码缓存行容量/工作，这意味着将释放相对更多的数据缓存容量/工作好。如果不需要立即分配的内容，则可以将 sete 重新安排到与周围代码更好地（执行方面）融合的位置。这种重新调度可以显式（由编译器）或隐式（由 CPU 本身）执行。

对于正常（通常未调整）、臃肿的应用程序代码，使用此类指令对整体性能影响不大。在高度专业化、手动调整且循环非常紧凑的代码中，在三个而不是四个或五个缓存行内执行之间的差异可能会产生巨大的差异，尤其是如果代码的多个副本在不同的内核上运行时。

# c# - 为什么过时会导致错误？

> ID：10380916
> 
> 赞同：9
> 
> 时间：2012-04-30T08:56:26.150
> 
> 标签：c#, .net, visual-studio, visual-studio-2010

我用：

```
[Obsolete("Use AnotherMethod() insted.", false)] 
```

第二个参数是`false`，但 Visual Studio 将警告显示为每个过时方法调用的错误，从而阻止项目编译。如何让 VS 将这些调用标记为警告而不是错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T09:06:41.777

在过时的方法上定义：

```
#pragma warning disable 0618
        [Obsolete("test",false)]
        private void myMethod() 
```

然后转到项目属性，在构建下，在抑制警告类型类型 0618 中，现在它将忽略该特定方法和项目将编译

# jquery - 使用 jQuery 从 DIV 类动态创建 LI 项

> ID：10380918
> 
> 赞同：2
> 
> 时间：2012-04-30T08:56:30.003
> 
> 标签：jquery

我有多个 DIV 用于列出如下项目：

```
<div class="project-item Video">
    <p>Test</p>
</div> 
```

每个 DIV 都添加了一组类别（例如，视频）。

我想从类中自动创建列表项，但忽略 .project-item。

我面临的问题是确保类别不会重复。将列出多个 DIV。例如：

```
<div class="project-item Video">
    <p>Test</p>
</div>
<div class="project-item Photography">
    <p>Test</p>
</div>
<div class="project-item Video Photography">
    <p>Test</p>
</div> 
```

DIV 上方有一个 UL，带有以下标记：

```
<ul id="filters" class="option-set clearfix" data-option-key="filter">
    <li><a href="#filter" data-option-value="*" class="selected">Show all</a></li>
</ul> 
```

在“全部显示”LI 下方，我想列出每个类别，例如：

```
<ul id="filters" class="option-set clearfix" data-option-key="filter">
    <li><a href="#filter" data-option-value="*" class="selected">Show all</a></li>
    <li><a href="#filter" data-option-value="Video">Video</a></li>
</ul> 
```

这是一个 jsFiddle，它显示了没有所需列表的示例 HTML 标记：http: [//jsfiddle.net/GaExx/1/](http://jsfiddle.net/GaExx/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:58:47.473

[appendTo](http://api.jquery.com/appendTo/)是你的朋友。

```
$('<li><a href="#filter" data-option-value="*" class="selected">Show all</a></li>').appendTo('.option-set'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:06:53.603

试试这个：

```
var categories = [];
$(".project-item").each(function() {
    var cats = $(this).attr("class").split(" ");
    for(var i = 0; i < cats.length; i++) {
        if (cats[i] != "project-item" && $.inArray(cats[i], categories) == -1)
            categories.push(cats[i]);
    }        
});

for (var i = 0; i < categories.length; i++) {
    var $li = $("<li></li>").appendTo("#filters");
    var $a = $("<a></a>").attr("href", "#").data("option-value", categories[i]).text(categories[i]).appendTo($li);
}; 
```

[**示例小提琴**](http://jsfiddle.net/GaExx/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:54:59.640

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.project-item').each(function () {
                var obj = $(this);

                $.each(obj.attr('class').split(' '), function (i, value) {
                    if (value !== 'project-item' && $('#filters').find('[data-option-value="' + value + '"]').length === 0) {
                        $('ul#filters').append($('<li />').append($('<a />', { 'href': '#filter', 'data-option-value': value }).text(value)));
                    }
                });
            });
        });
    </script>
</head>
<body>
    <ul id="filters" class="option-set clearfix" data-option-key="filter">
        <li><a href="#filter" data-option-value="*" class="selected">Show all</a></li>
    </ul>
    <div class="project-item Video">
        <p>
            Test
        </p>
    </div>
    <div class="project-item Photography">
        <p>
            Test
        </p>
    </div>
    <div class="project-item Video Photography">
        <p>
            Test
        </p>
    </div>
</body>
</html> 
```

# python - 带有heroku的Django社交网站

> ID：10380922
> 
> 赞同：1
> 
> 时间：2012-04-30T08:57:40.143
> 
> 标签：python, django, apache, heroku, social-networking

**我计划在*python/django**中开发一个社交网站。*我决定使用以下技术来实现这一点。我对我计划使用的这些技术有一些疑问。如果有人可以在这方面帮助我，那将很有帮助。我想在扩展到数千个连接时避免瓶颈。

*   Apache 作为网络服务器
*   Mailgun 基于云的电子邮件服务（Heroku 插件）
*   如果需要，将 RabbitMQ 作为消息队列（Heroku 插件）
*   MySQL 5.1 作为数据库系统。（Xeround 插件）
*   Git 作为文件内容管理
*   Memcache 以减少数据库负载（可选）
*   Heroku 作为基于云的平台（登台和直播）

我必须使用哪个存储来交付静态文件，或者有任何 heroku 插件用于静态或内容交付？

请指教。

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:08:04.870

用于快速索引的 apache Solr、virtual-env、提供连接池 (SQLAlchemy) 的库、django-evolution 或用于迁移的 south。

# mongodb - PHP，Mongo 查询使用或和点符号

> ID：10380923
> 
> 赞同：2
> 
> 时间：2012-04-30T08:57:40.223
> 
> 标签：mongodb, mongodb-query, mongodb-php, notation

我有一个让我抓狂的问题！

我需要在 PHP 中翻译以下 Mongo 查询：

`db.mycollection.find({$or: [ {'field.a': 45.4689, 'field.b': 9.18103}, {'field.a' : 40.71455, 'field.b': -74.007124} ]})`

它可以从外壳完美运行。

我认为查询应该通过以下方式（var_dump）翻译成 PHP：

```
Array
    (
        [$or] => Array
            (
                [0] => Array
                    (
                        [field.a] => 45.468945
                        [field.b] => 9.18103
                    )

                [1] => Array
                    (
                        [field.a] => 40.71455
                        [field.b] => -74.007124
                    )

            )

    ) 
```

但我在 PHP 中没有得到任何结果！

为什么？怎么了？什么是正确的语法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:31:48.440

你的语法对我来说似乎很好，我认为主要问题是你使用的浮点数并不总是像你想象的那么准确 - 特别是如果你自己混淆了 45.4689 和 45.468945。对于浮点数的直接比较，您应该始终添加一个小的模糊因子。

在这种情况下，您似乎正在使用坐标？如果是这种情况，我建议你：

*   交换 a 和 b 字段（这样你得到经度，然后是纬度）
*   在“field”上创建一个二维索引： ensureIndex(array('field' => '2d'));
*   使用最大距离较小且限制为 1 的[geoNear](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-geoNearCommand)，

这应该提供一种更好的扫描点的方法。不过，您必须运行两次查询，因为 geoNear 命令不能执行 $or。

如果您只有一组离散的点（就像您的评论似乎表明的那样），那么我建议不要查询浮点数，而只需添加一个命名城市的字段。

# java - 如何将 GIT 导入 ECLIPSE 3.7.2

> ID：10380925
> 
> 赞同：2
> 
> 时间：2012-04-30T08:58:01.550
> 
> 标签：java, android, eclipse

我正在关注一个需要将 GIT 导入 Eclipse 的教程，在教程中它只需通过 File/Import/Git/ProjectfromGit 完成......但是在导入下我没有“Git”，我在最新版本 3.7.2。

任何想法我从哪里得到它？我需要一些插件还是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:00:18.987

是的，安装[EGit](http://www.eclipse.org/egit/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:01:10.253

有一个名为[EGit](http://www.eclipse.org/egit/)的 eclipse 插件，下载的详细信息可以在[这里](http://www.eclipse.org/egit/download/)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T09:09:31.497

检查另一个基于[JavaGit的 Eclipse](http://javagit.sourceforge.net/) [GitEclipse](http://gitclipse.sourceforge.net/index.php)插件。似乎死了请检查

# ios - UINavigationitem 自定义 rightBarButtonItems

> ID：10380930
> 
> 赞同：2
> 
> 时间：2012-04-30T08:58:29.727
> 
> 标签：ios, cocoa-touch, uinavigationbar, uinavigationitem

我有 2 个自定义右栏按钮项目，在纵向模式下，它们相互重叠，只有一个可见，但在横向模式下，两者都是可见的。项目是使用自定义视图创建的，该视图是带有背景图像的 UIButton。

```
optionsBUtton=[UIButton buttonWithType:UIButtonTypeCustom];
[optionsBUtton setImage:[UIImage imageNamed:@"optionsIcon.png"] forState:UIControlStateNormal];
[optionsBUtton setBackgroundImage:[UIImage imageNamed:@"optionsBtn.png"] forState:UIControlStateNormal];
[optionsBUtton sizeToFit];
UIBarButtonItem* btnOptions=[[UIBarButtonItem alloc] initWithCustomView:optionsBUtton];

searchButton=[UIButton buttonWithType:UIButtonTypeCustom];
    [searchButton setImage:[UIImage imageNamed:@"searchIcon.png"] forState:UIControlStateNormal];
    [searchButton setBackgroundImage:[UIImage imageNamed:@"optionsBtn.png"] forState:UIControlStateNormal];
    [searchButton sizeToFit];
    UIBarButtonItem* btnSearch=[[UIBarButtonItem alloc] initWithCustomView:searchButton]; 

rightButtonItems=[[NSArray alloc] initWithObjects:btnOptions,btnSearch, nil];
    navItem.rightBarButtonItems=rightButtonItems; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:09:29.360

您必须使用工具栏并使用按钮设置工具栏这里是示例代码

```
// create a toolbar where we can place some buttons
UIToolbar* toolbar = [[UIToolbar alloc]
                        initWithFrame:CGRectMake(0, 0, 100, 45)];
[toolbar setBarStyle: UIBarStyleBlackOpaque];

// create an array for the buttons
NSMutableArray* buttons = [[NSMutableArray alloc] initWithCapacity:3];

// create a standard save button
UIBarButtonItem *saveButton = [[UIBarButtonItem alloc]
    initWithBarButtonSystemItem:UIBarButtonSystemItemSave
    target:self
    action:@selector(saveAction:)];
saveButton.style = UIBarButtonItemStyleBordered;
[buttons addObject:saveButton];
[saveButton release];

// create a spacer between the buttons
UIBarButtonItem *spacer = [[UIBarButtonItem alloc]
    initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace
    target:nil
    action:nil];
[buttons addObject:spacer];
[spacer release];

// create a standard delete button with the trash icon
UIBarButtonItem *deleteButton = [[UIBarButtonItem alloc]
    initWithBarButtonSystemItem:UIBarButtonSystemItemTrash
    target:self
    action:@selector(deleteAction:)];
deleteButton.style = UIBarButtonItemStyleBordered;
[buttons addObject:deleteButton];
[deleteButton release];

// put the buttons in the toolbar and release them
[toolbar setItems:buttons animated:NO];
[buttons release];

// place the toolbar into the navigation bar
self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc]
                                           initWithCustomView:toolbar] autorelease];
[toolbar release]; 
```

谢谢..！

# php - PHP Warning "Warning: ob_start(): function '' not found or invalid function name" in Symfony 1?

> ID：10380932
> 
> 赞同：23
> 
> 时间：2012-04-30T08:58:37.327
> 
> 标签：php, symfony1

Why am I getting:

> Warning: ob_start(): function '' not found or invalid function name in /symfony-1.3\lib\config\sfApplicationConfiguration.class.php on line 155

This occurs with Symfony 1.x projects. I am using Apache 2.2 and PHP 5.4.1.

The mentioned line has:

```
ob_start(sfConfig::get('sf_compressed') ? 'ob_gzhandler' : ''); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-30T09:01:15.003

Try using a `null` value instead of the empty string.

```
ob_start(sfConfig::get('sf_compressed') ? 'ob_gzhandler' : null); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-19T15:02:40.460

-`ob_start(sfConfig::get('sf_compressed') ? 'ob_gzhandler' : '');`

+`ob_start(sfConfig::get('sf_compressed') ? 'ob_gzhandler' : null);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-13T09:14:41.153

## This was fixed in symfony 1.4.16

See [symfony 1.4.16 changelog](https://github.com/symfony/symfony1/blob/v1.4.16/CHANGELOG):

> *   [...]
> *   [33214] fixed ob_start() behavior on CLI (closes #9970)
> *   [33208] fixed ob_start usage (to avoid warning in PHP 5.4, closes #9970)

So simply make sure to use at least that version.

**Preferably use the latest/last/final symfony 1.x version released, which is 1.4.20.**

You can grab them at [the official Git mirror for symfony 1.x](https://github.com/symfony/symfony1/releases) .

# javascript - 检查字符串是否仅包含数字，否则显示消息

> ID：10380937
> 
> 赞同：4
> 
> 时间：2012-04-30T08:58:50.187
> 
> 标签：javascript, validation

我有一个简单的表格，它在按下数字时执行计算，但是这只应该在输入数字时发生，如果添加了一个字母，我希望出现一个通知。有一个简单的功能可以做到这一点吗？

形式

```
 <input onKeyPress="return onlyNumbers()" onKeyUp="calc()" id="value1" type="text" name="value1">
    <select onChange="calc()" id="manipulator" name="manipulator">
        <option value="commission">Commission</option>
        <option value="cost">Return</option>
    </select>
</form> 
```

计算函数

```
function calc(){
    if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    val1 = document.getElementById("value1").value;
    mani = document.getElementById("manipulator").value;

    if (val1 != ""){
        document.getElementById("resp").innerHTML="Calculating...";
        queryPath = "comCalcServ.php?value1="+val1+"&manipulator="+mani;

        xmlhttp.onreadystatechange=function(){
            if (xmlhttp.readyState==4 && xmlhttp.status==200){
                document.getElementById("resp").innerHTML=xmlhttp.responseText;
            }
        }

        xmlhttp.open("GET",queryPath);
        xmlhttp.send();
    }
} 
```

我目前正在查看 isNaN 函数，但不熟悉 JS 语法，因此不确定在哪里使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T09:04:06.613

你的意思是：

```
 //add inside your calc function
val1 = document.getElementById("value1").value;
if(/^\d+$/.test(val1)) {
 //proceed with rest of code
}
else {
 alert("Invalid");
 return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-06T07:53:16.387

试试这个简单的

```
if(val1.match(/^\d+$/)) {
    // your code
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-11T06:46:08.157

上面的代码在我的情况下不起作用。所以我做了一些改变。我只是将正则表达式更改为`/^[0-9]*$/.test(val1)`并且它有效。

# java - 使用 html / css 设置异常堆栈跟踪样式的 Java 库

> ID：10380938
> 
> 赞同：3
> 
> 时间：2012-04-30T08:58:52.670
> 
> 标签：java, html

我将异常的主体转换为字符串，然后将该异常通过电子邮件发送到 java 中的给定地址。我想用 html 格式化我的异常字符串，使其成为人类可读的格式，类似于它在堆栈溢出时的显示方式。我想知道Java中是否有任何库可以做到这一点？

```
StringWriter stringWriter = new StringWriter();
PrintWriter printWriter = new PrintWriter(stringWriter);
t.printStackTrace(printWriter);
String body = stringWriter.toString();
//add html to body here
setMessageBody(body); 
```

详细地说，我的意思是用 分隔行`<br/>`，用不同颜色的字体显示类名，用不同颜色的字体显示行号。这可以通过一些正则表达式来完成，但我想知道是否有一个开箱即用的库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-28T07:28:02.333

它不做颜色，但一个非常简单的方法是将堆栈跟踪包装在 HTML`<pre>`元素中。这至少会保留空格和新行。

例如

```
<pre>
java.lang.ClassCastException: java.lang.Double cannot be cast to java.math.BigDecimal
        at org.hibernate.type.descriptor.java.BigDecimalTypeDescriptor.unwrap(BigDecimalTypeDescriptor.java:36)
        at org.hibernate.type.descriptor.sql.DecimalTypeDescriptor$1.doBind(DecimalTypeDescriptor.java:65)
        at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:90)
        at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:286)
</pre> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:27:31.190

是的，有几个，它们甚至带有“免费”邮件后端：使用 Java 日志框架，如[slf4j](http://www.slf4j.org/)或[log4j](https://logging.apache.org/log4j/1.2/)。

所有这些框架都可以通过一些配置生成 HTML 电子邮件。一般的做法是这样的：

*   为所有异常创建一个记录器或为每个类创建一个记录器。前者更容易配置，后者给你更多的自由
*   向此记录器添加一个附加程序，该记录器被配置为发送电子邮件

如果您不想在您的应用程序中使用日志记录，您可以编写自己的附加程序来重用现有的格式化程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T01:10:00.617

我写了这个，[https://github.com/StefanLiebenberg/html-exception-formatter](https://github.com/StefanLiebenberg/html-exception-formatter)

它是一个将异常格式化为可读 html 的简单实用程序。

```
String html = new HtmlExceptionFormatter().toString(exception); 
```

# html - 我遇到了由|分隔的类。这到底是做什么的？

> ID：10380948
> 
> 赞同：1
> 
> 时间：2012-04-30T08:59:41.737
> 
> 标签：html, jstree

在工作时，`jstree`我遇到了这行代码-

```
<!-- one of the three classes will be applied depending on node structure -->

<li class="[ jstree-open | jstree-closed | jstree-leaf ]"> 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:03:49.187

这不是生成的 HTML 将是什么样子的逐字示例——它只是一个伪 HTML，以帮助开发人员了解运行时会发生什么。代码或生成的 HTML 中没有方括号，也没有管道。这只是*文档*。

这意味着当渲染树时，三个类中的*一个*将根据其状态和树的结构应用于每个元素。

# android - 带有FRAME的jquery mobile和带有滚动条的内框

> ID：10380949
> 
> 赞同：2
> 
> 时间：2012-04-30T08:59:42.503
> 
> 标签：android, jquery-mobile

```
 i have used nested frames, 

    <!DOCTYPE html>
    <html>
    <head>

    </head>

    <frameset rows="200px,500px">

    <frame src="topBar.html" > <!-- top frame -->
    <frameset cols="30%,70%">
        <frame src="leftBar.php" noresize /> <!-- left frame-->

       <frame src="rightBar.php" name="rightBar"  id="rightBar" frameborder="yes"  style="overflow:scroll"/> <!-- left frame-->  <!-- right frame-->

     </frameset>
     </frameset>

    </html>

the rightBar.php is

<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>jQuery Mobile Web App</title>
<link href="jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"/>
<link href="style/jquery.mobile.scrollview.css" rel="stylesheet" type="text/css"/>
<script src="jquery-1.5.min.js" type="text/javascript"></script>
<script src="jquery.mobile-1.0a3.min.js" type="text/javascript"></script>
<script src="js/jquery.mobile.scrollview.js" type="text/javascript"></script>

<!-- This reference to phonegap.js will allow for code hints as long as the current site has been configured as a mobile application. 
     To configure the site as a mobile application, go to Site -> Mobile Applications -> Configure Application Framework... -->
<script src="/phonegap.js" type="text/javascript"></script>
<script>
$(document).ready(function()
{
    $('#page').scroll();

    var data = 'cat=drinks' ;
    $.ajax
        (

            {
                url:'rgh.php',
                type: "POST",
                data:data,

                success: function (data)
                {       

                $("#loadContent").html(data);

                }
            }
        )

        $(".closeBtn").click(function(){            
            $(".QTPopup").css('display', 'none');
        })
});
</script>
</head> 
<body> 

<div data-role="page" id="page" data-rel="dialog"  data-transition="pop">

    <div data-role="content" data-position="fixed"> 

        <ul data-role="listview" id="loadContent"  data-filter="true"  data-scroll="true">

        </ul>       
    </div>

</div>

</body>
</html> 
```

当用户单击 leftBar.php 的选项时，它反映在 rightBar.php 上并动态显示内容，浏览器仅显示 rightBar 框架的滚动条，这在 PC 上很好，但在 Android 设备上不显示，它显示整个滚动条到 webview，我只需要 rightBar 框架在 Android webview 中显示滚动条吗？那么有人可以帮助我吗？

# javascript - 在画布上移动两个以上的箭头线

> ID：10380950
> 
> 赞同：0
> 
> 时间：2012-04-30T08:59:45.293
> 
> 标签：javascript, jquery, html5-canvas, kineticjs

这是我使用 kinetic.js 的代码，我画了三条线并使用鼠标移动。

```
$(document).ready(function(){   

 var y1=50;
 var stage = new Kinetic.Stage({
          container: "container",
          width: 578,
          height: 200
    });

 var layer = new Kinetic.Layer();

 var group=new Kinetic.Group({
          draggable: true,
          dragConstraint : 'horizontal'
    });

var lineme =function(pts){
var line1 = new Kinetic.Line({
      points: pts,
      stroke: "black",
      strokeWidth: 4,
      lineCap: 'round',
      lineJoin: 'round',
    });
    group.add(line1);
   }
 for(a=0;a<=2;a++)
 {
     var points1 = [{
          x: 73,
          y: y1
        }, {
          x: 300,
          y: y1
        }];

      lineme(points1);
      y1=y1+50;
  }

   group.on("mouseover", function(){
          document.body.style.cursor = "pointer";
        });
   group.on("mouseout", function() {
      document.body.style.cursor = "default";
    });

    // add the shape to the layer       
    layer.add(group);
    // add the layer to the stage
    stage.add(layer);

 }); 
```

我想画箭头线我尝试了更多时间，但我找不到正确的解决方案。他们在动力学 js 中是否有任何箭头功能有人可以帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:28:58.340

您必须创建一个组并将两条线都添加到该组中。

检查以下示例： [http ://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-a-group-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-a-group-with-kineticjs/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:06:07.030

```
var line2 = .....
// add another line to the layer before adding it to the stage
layer.add(line2); 
```

一定？

# ajax - Primefaces 的 IE-8 兼容问题？

> ID：10380954
> 
> 赞同：0
> 
> 时间：2012-04-30T09:00:14.390
> 
> 标签：ajax, jsf-2, internet-explorer-8, primefaces

嗨，我遇到了 IE -8 的问题，因为当我在 Chrome 和 mozilla 中执行我的代码时，它很好！但在 IE-8 中它没有正确执行。说 dialog.show 没有定义

```
<p:calendar value="#{bean.method}" mode="inline">
<p:ajax update="@all" event="dateSelect" listener="#{Bean.method1}" oncomplete="dialog.show()" /> 
```

```
<p:schedule id="dialog" initialDate="#{Bean.method3}"/> 
```

显示错误。当我单击日期日历时，将显示日程表中的日期。但是在 IE-8 中，当我单击日历和日程表消失的日期时，当我刷新页面时，我看到我的选定日期已被选中，并且我还发现了一个错误，如上所示..（如果有任何问题，对不起整齐地解释是错误的:))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T09:11:13.657

我遇到了很多关于 IE 和 primefaces 组件的问题，直到我有一个一次性解决所有问题的修复程序。我意识到，如果我把下面的代码放在头脑中的第一行，一切都会像魅力一样。

```
<?xml version='1.0' encoding='UTF-8' ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:p="http://primefaces.org/ui"
          xmlns:f="http://java.sun.com/jsf/core">
        <h:head>

        <f:facet name="first">
          <meta http-equiv="X-UA-Compatible" content="IE=edge" />
         <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
        </f:facet>
       // other head code goes here

       </h:head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:08:32.540

尝试添加和`widgetVar="myschedule"`更改`<p:schedule`

```
oncomplete="dialog.show()" 
```

进入

```
oncomplete="myschedule.update();" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:48:11.143

试着把它放在文件 xhtml.xml 的第一行。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

# php - 单击按钮时调用php函数

> ID：10380955
> 
> 赞同：-1
> 
> 时间：2012-04-30T09:00:14.467
> 
> 标签：php

我有一个表单……当我单击插入按钮时，值必须存储在数据库中……但是在我的表单中，当我打开表单时，默认值存储在 db 中。我在 php mvc 架构中开发所有这些。

这是我的控制器：

```
 <?php
        class ControllerSaleAd extends Controller {
private $error = array();

         public function index() {

    $this->load->language('sale/ad');

    $this->document->setTitle($this->language->get('heading_title'));

$this->data['heading_title']=$this->language->get('heading_title');
$this->data['entry_customer_name'] = $this->language->get('entry_customer_name');
$this->data['column_name']=$this->language->get('column_name');
$this->data['column_place'] = $this->language->get('column_place');
$this->data['column_date'] = $this->language->get('column_date');

$this->data['column_units'] = $this->language->get('column_units');
$this->data['column_price'] = $this->language->get('column_price');
$this->data['button_insert'] = $this->language->get('button_insert');

$this->data['breadcrumbs'] = array();

$this->data['breadcrumbs'][] = array(
            'text'      => $this->language->get('text_home'),
            'href'      => $this->url->link('sale/ad', 'token=' . $this->session->data['token'], 'SSL'),
            'separator' => false
);

$url='';
$this->data['action'] = $this->url->link('sale/ad', 'token=' . $this->session->data['token'] . $url, 'SSL');

$this->template='sale/ad.tpl';
$this->children = array(
            'common/header',
            'common/footer'
);

$this->load->model('sale/ad');

$this->insert();

$this->response->setOutput($this->render());
      }

public function insert() {

    $customer = $_POST['entry_customer_name'];
    $adtype = $_POST['column_name'];
    $adplace=$_POST['column_place'];
    $date=$_POST['column_date'];
    $units=$_POST['column_units'];
    $price=$_POST['column_price'];

    $data=array();

    $data = array (

     'customer' => $customer,
     'adtype'  =>  $adtype,
     'adplace'  => $adplace,
     'date'     => $date,
     'units'    => $units,
     'price'    => $price,
    );

$this->model_sale_ad->insert($data);
    }

}

      ?> 
```

当我单击插入按钮时，必须调用 insert() 函数....帮助我如何编写这样的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:20:40.090

你的想法似乎有点混乱。您不能在客户端运行 PHP 代码（即：当用户单击按钮时）

您可以做的是对您的 php 页面的 AJAX 调用，该页面将插入您的记录。
许多当前的框架都有库来轻松管理 AJAX 操作。

您可以在此处进一步阅读：[http](http://en.wikipedia.org/wiki/Ajax_(programming) ://en.wikipedia.org/wiki/Ajax_(programming )

# google-chrome - 如何在网络浏览器中通过语音识别实现下拉条目选择？

> ID：10380957
> 
> 赞同：1
> 
> 时间：2012-04-30T09:00:17.113
> 
> 标签：google-chrome, drop-down-menu, speech-recognition, levenshtein-distance, speech

我正在寻找一种使用语音识别从网页的下拉列表中选择条目的方法。

我最初的想法是在一个`input type="text"`元素中使用 Google 的 x-webkit-speech。然后在`onwebkitspeechchange`触发事件时，计算每个下拉条目的[Levenshtein 距离- 然后选择最小值。](https://en.wikipedia.org/wiki/Levenshtein_distance)

一个细节是我希望隐藏文本框，这样看起来您正在为选择元素选择麦克风。（还没有尝试过，但我假设它可以完成......）

这样做的几个缺点是 Levenshtein 距离可能并不总是一种准确的选择方式，并且在可预见的将来它只会在 Google Chrome 中工作。

任何人都可以提出任何替代建议或充实任何细节吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:55:32.527

使用语法将用户语音输入限制为下拉列表中的内容，然后将语法中的结果标记与下拉列表中的项目列表相匹配，以确定所选项目。如果下拉列表是静态的，您可以拥有一个静态语法文件。如果此列表是动态的，请使用[此答案中定义](https://stackoverflow.com/questions/9848979/html5-speech-recognition-is-there-a-way-to-set-what-the-user-is-expected-to)的方法。

# linux - 如何在 Ubuntu 11.10 上正确配置 Oracle Java JDK 7（不是 Open JDK）并使用引用的 JAR 文件运行 Java 程序？

> ID：10380962
> 
> 赞同：0
> 
> 时间：2012-04-30T09:00:45.820
> 
> 标签：linux, jar, compilation, java

我在这里可能有多个问题，但最终我试图编译和运行一个引用 3rd 方 JAR 文件（在 Ubuntu Linux 上）的 Java 程序，所以我认为将其保留在一个问题上是合适的。

我正在尝试正确安装和配置 Java JDK 7，以便在 Ubuntu Linux 上运行一个简单的程序。我想从专家那里得到指导，至少可以帮助我从命令行运行一个简单的 Java 程序（也许是“Hello World”应用程序？）。我过去只在 Windows 上编译和运行 Java 程序，所以这对我来说是新的。昨晚，我读到你必须小心不要安装 Open JDK，而要安装 Oracle JDK。安装操作系统时，Ubuntu 11.10 似乎会为您安装 Java Open JDK。

我正在运行 32 位 Ubuntu，而不是 64 位。所以我下载了这个 Linux JDK 文件：
jdk-7u4-linux-i586.tar.gz

我将 tarball 解压到 /usr/java 中，然后删除 *.gz 文件以节省磁盘空间。有些教程说安装到 /usr/java 中，有些说安装到 /usr/lib/jvm 中，所以我只选择了一个并使用它。如果您对适当的安装目录有任何建议，请告诉我您的建议。

然后，我使用“java -version”命令检查了安装的 Java 版本（如下）。它没有找到 Oracle JDK。

**（1）**为什么命令没有列出我刚安装的Oracle JDK包？

```
mac@UBUNTU:/usr/lib$ java -version
The program 'java' can be found in the following packages:
 * gcj-4.4-jre-headless
 * gcj-4.6-jre-headless
 * openjdk-6-jre-headless
 * gcj-4.5-jre-headless
 * openjdk-7-jre-headless
Try: sudo apt-get install <selected package>
mac@UBUNTU:/usr/lib$ 
```

**(2)**你能帮我完成配置这台 Linux 机器以编译 Java 程序的必要步骤吗（完成我刚刚开始的工作）？

**(3)**你能帮我编译一个 *.java 文件以创建 *.class 文件的步骤吗？

**(4)**你能帮我运行一下我们刚刚编译的Java程序吗？

**(5)**假设我想在我的 Java 程序中包含多个 *.jar 文件（第 3 方程序集）。如果这些文件不在运行引用它们的 Java 程序的目录中，Java 怎么知道在 Linux 上哪里可以找到这些文件？（我只熟悉 Windows 中的 CLASSPATH）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:14:47.420

1.  Ubuntu 基于 Debian 及其 apt-get 实用程序。apt-get 将仅列出已知的软件包。您安装的只是一个位于您系统上的文件夹，而 apt-get 甚至不知道它。
2.  它看起来`java`不在你的路径上。因此，要么在路径的一个文件夹中创建指向 java 二进制文件的符号链接（键入`env`以查看路径变量中的内容），要么将 JDK bin 目录添加到路径中（参见命令`export`）。作为最后的手段，您可以键入 java 二进制文件的绝对路径，但这很痛苦。
3.  要编译，您只需使用 javac（Java 编译器）。例如`javac Test.java`. 确保 javac 也在您的路径上（或使用 java 编译器的绝对路径）
4.  要运行它，请键入`java -cp . Test`（如果将其放在包中，请不要忘记键入类的完全限定名称，这是推荐的）
5.  When you compile or when you run, use the argument -cp followed by the list of jars you want to use (separated by a ':' on Linux and by a ';' on Windows). You may use wildcards in your classpath (like lib/*.jar) but you may also have to escape the wildcard to avoid shell expansion (like this `lib/\*.jar`).

# javascript - 不使用 Flash 浏览网页中的 PDF

> ID：10380963
> 
> 赞同：0
> 
> 时间：2012-04-30T09:00:51.763
> 
> 标签：javascript, pdf, jquery-plugins

我的网页中有一个 N 页 PDF 链接。

我希望能够使用下一个和上一个箭头、页码等浏览 PDF

我希望能够在不使用任何 Flash 插件的情况下浏览 PDF。

我还想规范浏览行为，所以我不想使用浏览器的默认 PDF 插件。

我正在寻找一个 JS 插件，但我没有找到有趣的解决方案。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:05:29.977

你可以这样试试：

请参阅下面的代码：

```
 $("a[href*=.pdf]").click(function(){
    window.open(this.href);
    return false;
}); 
```

或者，您可以改为应用 target="_self" 属性：

```
 $("a[href*=.pdf]").click(function(){
    $(this).attr({"target":"_self"});
    return false;
}); 
```

**编辑：**

如果你在这里需要一个插件，它是[https://github.com/andreasgal/pdf.js](https://github.com/andreasgal/pdf.js)

插件演示[http://deanhume.com/content/postimages/pdfjs/pdfjs.htm#1](http://deanhume.com/content/postimages/pdfjs/pdfjs.htm#1)

# php - 计算每天的最大登录次数

> ID：10380964
> 
> 赞同：2
> 
> 时间：2012-04-30T09:00:55.580
> 
> 标签：php, mysql, database, time

`time();`当用户登录时，我有一个存储满 php 的数据库。

我知道我应该为他们的用户名创建一个值并更新登录计数，但我有一个充满 php 的数据库`time();`和他们的`username`

以下是我如何找到单个用户的登录数量：

```
<?php
function to_date($timestamp) {
    return date('Y-m-d', $timestamp);
}
$days = array();
$occurences = array();
$zero = array();
$query = mysql_query("SELECT `login_time` FROM `stats` WHERE `userid`='$someuserid' ORDER BY `login_time` ASC");
while($rows = mysql_fetch_array($query)) {
    $days[] = to_date($rows['login_time']);
}
$days[] = to_date(time());
$occurences = array_count_values($days);
$days = array_unique($days);
sort($days);
for($i = 0; $i < count($days); $i++) {
    $difference = isset($days[$i+1]) ? strtotime($days[$i+1]) - strtotime($days[$i]) : 0;
    if($difference > 86400) {
        $difference = ceil(abs($difference/86400));
        $fill = $days[$i];
        for($k = 0; $k < $difference-1; $k++) {
        $fill += strtotime('+1 day', strtotime($fill));
            $zero[] = to_date($fill);
        }
    }
}
echo "[";
for($i = 0; $i < count($zero); $i++) {
    echo "[\"".$zero[$i]."\",0], ";
}
for($i = 0; $i < count($occurences); $i++) {
    if($i == count($occurences)-1)
        echo "[\"".$days[$i]."\",".($occurences[$days[$i]]-1)."]";
    else {
        echo "[\"".$days[$i]."\",".$occurences[$days[$i]]."], ";
    }
}
echo "]";
?> 
```

我如何将其应用于所有用户并找出数据库中每天登录次数最多的用户？输出为 jqplot 编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:50:36.223

```
SELECT
    userid,
    DATE(FROM_UNIXTIME(login_time-MOD(login_time,86400)+1)) as logindate,
    count(*) as logincount
FROM stats 
GROUP BY userid, logindate 
```

使用上面的查询直接从数据库中获取所有需要的数据，这将帮助您避免使用 PHP 进行后处理

此外，如果您只想获取一个（任何）一天内最多登录的记录，请使用以下查询并为上述查询添加 SQL 包装器：

```
SELECT * FROM (
    SELECT
        userid,
        DATE(FROM_UNIXTIME(login_time-MOD(login_time,86400)+1)) as logindate,
        count(*) as logincount
    FROM stats 
    GROUP BY userid, logindate
) tmptable 
ORDER BY logincount DESC, logindate DESC LIMIT 1 
```

让我知道这是否对您有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:11:40.303

SELECT `userid`, COUNT(userid) AS 'login_count' FROM `stats`GROUP BY`userid`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T11:58:53.623

所有的答案可能是正确的或不正确的。但是我知道我的答案不正确的一件事。但是在 Max logins 的情况下，不需要这样的答案。这是我知道的全部。

# objective-c - CGContextDrawImage 导致 EXC BAD ACCESS

> ID：10380965
> 
> 赞同：1
> 
> 时间：2012-04-30T09:00:56.583
> 
> 标签：objective-c, ios, xcode, exc-bad-access, cgcontext

那几行代码会导致 EXC BAD ACCESS。显然 self.thumbnailimage 不是 nil（我检查一下）。那会是什么？

```
 CGContextRef context = UIGraphicsGetCurrentContext();
    if(self.thumbnailImage)
    {
        CGContextDrawImage(context,CGRectMake(14, 5, 58, 58), self.thumbnailImage);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:28:32.003

嗯，问题解决了。我最终使用了 uiimage 方法 drawInRect

# python - MongoDB 中的 Mod 运算符

> ID：10380966
> 
> 赞同：1
> 
> 时间：2012-04-30T09:00:57.230
> 
> 标签：python, mongodb, pymongo, mongodb-query

MongoDB 中返回满足以下条件的所有查询的正确语法是什么：

```
a % 4 >= 2 
```

我尝试使用以下命令，但它返回空

```
db.data.find( { a : { $mod : [ 4, { $gte : 2 } ] } } ); 
```

另一种选择是使用 Javascript 表达式，如下所示：

```
db.data.find( "this.a % 4 >= 2" ); 
```

Javascript 表达式可以工作并返回预期的文档，但它不能在 PyMongo 中工作。

MongoDB 2.0.4
版 PyMongo 2.1.1 版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:38:27.450

要在 PyMongo 中使用 where 表达式，试试这个：`{ $where: "this.a % 4 >= 2" }`

`$mod`运算符根本不适用于这样的条件。你有三个选择：

1.  使用 where 表达式
2.  使用如下表达式：

    ```
    db.data.find( { $or : [ { a : { $mod : [ 4, 2 ] } },
                            { a : { $mod : [ 4, 3 ] } }
                          ] } );

    db.data.find( { $and : [ { a : { $not : { $mod : [ 4, 0 ] } } },
                             { a : { $not : { $mod : [ 4, 1 ] } } }
                           ] } ); 
    ```

3.  存放`a % 4`在自己的领域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T09:40:18.017

我认为您目前无法通过简单的查询来执行此操作，您必须改用您的 javascript 版本。您应该能够使用 PyMongo 使用创建的光标上的[where方法来做到这一点。](http://api.mongodb.org/python/current/api/pymongo/cursor.html#pymongo.cursor.Cursor.where)铁：

```
cursor = collection.find().where( "this.a % 4 >= 2" ); 
```

# cakephp-1.3 - 建模两个不同的表

> ID：10380968
> 
> 赞同：0
> 
> 时间：2012-04-30T09:01:04.703
> 
> 标签：cakephp-1.3

我有访问和咨询表都通过表患者相关。即访问和咨询表有外键patent_id。我必须在单个编辑操作中编辑这两个表（访问和咨询）。即在编辑视图中，两个表数据都应该显示。我必须使用什么型号？谢谢.........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:37:33.783

这三个表应该有单独的模型，并通过[Cake PHP Associations](http://book.cakephp.org/1.3/en/view/1039/Associations-Linking-Models-Together)相关联。

在您的情况下（据我了解），您有以下关联：

```
Patient hasMany Visit     (via Visit.patient_id)
Patient hasMany Consult   (via Consult.patient_id)
Visit belongsTo Patient   (via Visit.patient_id)
Consult belongsTo Patient (via Consult.patient_id) 
```

当您在三个模型（Patiend、Visit 和 Consult）的适当位置定义了这些，并且如果您已遵循[CakePHP 约定](http://book.cakephp.org/1.3/en/view/901/CakePHP-Conventions)，如果您想查看所有这些数据，例如在患者控制器的 edit() 操作中，您可以执行以下操作：

```
public function edit($id = null) {
    $this->Patient->id = $id;
    if ($this->Patient->exists()) {
        $patient = $this->Patient->find('first', array('conditions' => array('id' => $id)));
    }
} 
```

现在 $patient 将包含来自 Visit 和 Consult 模型的 Patient 记录及其所有相关记录，采用一个很好的数组结构（当然前提是存在具有此 id 的 Patient）。

根据您所说的，我不确定您是否了解 CakePHP 模型关联。查看链接。

希望这可以帮助。

干杯，鲍里斯拉夫。

# iphone - 如何在 TabBarViewController 中动态交换视图控制器？

> ID：10380975
> 
> 赞同：1
> 
> 时间：2012-04-30T09:01:55.647
> 
> 标签：iphone, objective-c, ios4, uitabbarcontroller

所以这是相当先进的，我不确定它在 iOS SDK 中是否可行，但这里是（请仔细阅读，我不希望撇油器在他们知道细节之前抢先回答这个问题）：

我有一个带有两个选项卡的选项卡栏视图控制器。一个选项卡（视图控制器 1）包含一个数据呈现视图控制器，另一个（视图控制器 2）是一个设置视图。在设置视图中，我允许用户指定他们是要查看视图控制器 1 界面的简化版还是高级版。

我需要做的是基于这些设置，为视图控制器 1 呈现所选视图，并且我希望能够即时执行此操作（用户不必关闭然后重新打开应用程序）。我试图在其中重新创建标签栏的视图控制器数组

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController 
shouldSelectViewController:(UIViewController *)viewController 
```

但它只是导致我的应用程序崩溃（SIGABRT 崩溃），去看看......

我正在考虑制作一个“空心”视图控制器，它能够指向适当的类类型，但我所面临的挑战是让它对我应该选择放置在其中的任何视图完全透明（`UITableViewController`,`UIViewController`等）。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:14:00.013

您是否尝试过查看所有[UITabBarController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)的文档？

```
- (void)setViewControllers:(NSArray *)viewControllers animated:(BOOL)animated 
```

# perl - git add -i 在 Mac OSX Lion 上不断返回 perl no user error

> ID：10380976
> 
> 赞同：1
> 
> 时间：2012-04-30T09:01:59.237
> 
> 标签：perl, git, osx-lion

`git add -i`给我以下错误

> perl：没有用户 502

它一直运行良好，但现在，出乎意料的是，我收到了这个错误。所有其他命令（如`git add <filename>`, `git status`, ）`git commit`都工作正常。

这里发生了什么？

这是命令的输出`id`

> > $ 标识
> 
> uid=502(andy) gid=20(staff) groups=20(staff),402(com.apple.access_ssh),403(com.apple.sharepoint.group.2),401(com.apple.access_screensharing), 12(所有人),33(_appstore),61(localaccounts),79(_appserverusr),80(admin),81(_appserveradm),98(_lpadmin),100(_lpoperator),204(_developer)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:58:28.650

根据[http://community.zenoss.org/thread/15807](http://community.zenoss.org/thread/15807)，这是 Apple 的 perl 的问题。很难说，提出的解决方案是否也适用于您的案例，但请考虑尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:18:10.037

一个简单的重启解决了这个问题。

# android - 如何在脸书墙上发消息，我可以登录但不能发任何东西？

> ID：10380980
> 
> 赞同：0
> 
> 时间：2012-04-30T09:02:15.667
> 
> 标签：android, facebook

我可以登录，但在 Facebook 墙上发布消息时遇到困难。有人可以给我可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:04:48.143

查看下面的链接： [http](http://www.android10.org/index.php/articleslibraries/290-facebook-integration-in-your-android-application) ://www.android10.org/index.php/articleslibraries/290-facebook-integration-in-your-android-application 只是，不要忘记在您的代码中添加应用程序 ID。它是您可以获得的高效代码...... :)

# asp.net - MVC 还是 Web 表单？

> ID：10380986
> 
> 赞同：2
> 
> 时间：2012-04-30T09:02:39.320
> 
> 标签：asp.net, asp.net-mvc, webforms

我一个普遍的问题。当我想开发一些新的 Web 项目（不是简单的页面——更大且相当复杂的页面）时，我应该选择什么技术——MVC 或 Web 表单？

我试图自己找到它，但关于这个话题有很多不同的看法。是否有任何一般规则或方法可以帮助我做出决定？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T09:06:53.617

不，没有一般规则。这只是一个偏好问题。有人喜欢 MVC，有人喜欢 webforms。微软将同样支持两者。

不要根据别人说“这更好”的经验来选择 MVC 与 Webforms，因为他完全错了，而是基于你的直觉或如何最好地描述它。您需要对所使用的技术感到满意，而不是与之抗争。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T09:06:24.317

基本上两者都有各自的优点和缺点，以概述如何决定查看此博客

[http://blogs.microsoft.co.il/blogs/gilf/archive/2009/01/16/deciding-when-to-use-asp-net-mvc-framework.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/01/16/deciding-when-to-use-asp-net-mvc-framework.aspx)

请参阅这些已经询问您正在寻找什么的问题

[何时使用 ASP.NET MVC 与 ASP.NET Web 窗体？](https://stackoverflow.com/questions/1144153/when-to-use-asp-net-mvc-vs-asp-net-web-forms)

[传统 ASP .NET Web 窗体与 MVC](https://stackoverflow.com/questions/41712/traditional-asp-net-web-forms-vs-mvc)

# c - 与 POSIX 系统上的调度有关的互斥锁和线程优先级

> ID：10380988
> 
> 赞同：2
> 
> 时间：2012-04-30T09:02:59.080
> 
> 标签：c, pthreads, posix, mutex, thread-priority

在 POSIX 系统（linux 等）中，当多个线程锁定一个公共互斥体时 - 是***始终***观察到的锁定顺序，还是在调度临界区中的下一个线程时线程优先级偏向更高优先级的线程？

标准是否提到了有关行为的任何内容？因为据我所见，它似乎只提到了所需的接口。

请注意，我正在寻找任何符合 POSIX 的系统（不仅仅是 linux）的指导，所以请随意建议其他操作系统（QNX、Minix 等）的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T09:59:46.153

当多个线程**等待**锁定同一个互斥体时，当互斥体可用时，优先级最高的线程将首先被解除阻塞。如果多个线程具有相同的优先级，则解锁哪个线程将取决于所使用的调度算法，例如使用 FIFO 策略，等待时间最长的线程将首先被唤醒。

线程优先级和同步是一个相当棘手的领域，您需要非常小心，不要最终导致优先级反转并导致死锁。

Butenhof 的*Programming with POSIX Threads*第 5.5 章涉及实时调度。

# android - 如何获取 Android 设备的当前方向 (ActivityInfo.SCREEN_ORIENTATION_*)？

> ID：10380989
> 
> 赞同：57
> 
> 时间：2012-04-30T09:02:59.997
> 
> 标签：android, screen-orientation

我想找出设备的详细方向，最好是`SCREEN_ORIENTATION_LANDSCAPE`, `SCREEN_ORIENTATION_PORTRAIT`, `SCREEN_ORIENTATION_REVERSE_LANDSCAPE`, `SCREEN_ORIENTATION_REVERSE_PORTRAIT`from`ActivityInfo`或等价物之一。

StackOverflow 上的一些答案包括

```
getWindowManager().getDefaultDisplay().getRotation() 
```

但这并不能真正告诉我设备是处于纵向还是横向模式，只能告诉我它是如何参照其自然位置转动的——这反过来又可以是横向或纵向。

```
getResources().getConfiguration().orientation 
```

返回以下三个之一：`ORIENTATION_LANDSCAPE`, `ORIENTATION_PORTRAIT`, `ORIENTATION_SQUARE`，然后它并不能真正告诉我手机的转动方向（无论是倒置还是转向哪一侧）。

我知道我可以结合使用后者`DisplayMetrics`来找出设备的自然方向，但真的没有更好的方法吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-04-30T11:45:49.467

我最终使用了以下解决方案：

```
private int getScreenOrientation() {
    int rotation = getWindowManager().getDefaultDisplay().getRotation();
    DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);
    int width = dm.widthPixels;
    int height = dm.heightPixels;
    int orientation;
    // if the device's natural orientation is portrait:
    if ((rotation == Surface.ROTATION_0
            || rotation == Surface.ROTATION_180) && height > width ||
        (rotation == Surface.ROTATION_90
            || rotation == Surface.ROTATION_270) && width > height) {
        switch(rotation) {
            case Surface.ROTATION_0:
                orientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
                break;
            case Surface.ROTATION_90:
                orientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
                break;
            case Surface.ROTATION_180:
                orientation =
                    ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;
                break;
            case Surface.ROTATION_270:
                orientation =
                    ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE;
                break;
            default:
                Log.e(TAG, "Unknown screen orientation. Defaulting to " +
                        "portrait.");
                orientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
                break;              
        }
    }
    // if the device's natural orientation is landscape or if the device
    // is square:
    else {
        switch(rotation) {
            case Surface.ROTATION_0:
                orientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
                break;
            case Surface.ROTATION_90:
                orientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
                break;
            case Surface.ROTATION_180:
                orientation =
                    ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE;
                break;
            case Surface.ROTATION_270:
                orientation =
                    ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;
                break;
            default:
                Log.e(TAG, "Unknown screen orientation. Defaulting to " +
                        "landscape.");
                orientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
                break;              
        }
    }

    return orientation;
} 
```

**注意**：一些用户（下面评论中的 Geltrude 和 holtaf）指出，此解决方案不适用于所有设备，因为从自然方向开始的旋转方向未标准化。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-05-01T20:35:13.767

简单的方法是使用

```
getResources().getConfiguration().orientation 
```

1 代表肖像，2 代表风景。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-25T11:32:01.010

```
public static int getScreenOrientation(Activity activity) {
        int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
        int orientation = activity.getResources().getConfiguration().orientation;
        if (orientation == Configuration.ORIENTATION_PORTRAIT) {
          if (rotation == Surface.ROTATION_0 || rotation == Surface.ROTATION_270) {
            return ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
          } else {
            return ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;
          }
        }
        if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
          if (rotation == Surface.ROTATION_0 || rotation == Surface.ROTATION_90) {
            return ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
          } else {
            return ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE;
          }
        }
        return ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED;
      } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-30T09:10:42.340

`getResources().getConfiguration().orientation`是了解当前使用方向的标准方法。但是，如果它不能满足您的需求，那么也许您可以使用传感器根据角度来计算它。阅读[这个](http://www.ibm.com/developerworks/opensource/library/os-android-sensor/)和[这个](http://marakana.com/forums/android/examples/43.html)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-04-30T09:47:48.667

我认为您的问题是您可以检测横向和纵向，但不能检测反向横向和反向纵向，因为旧版本不支持它们。要检测您可以做什么，您可以同时使用定向和旋转。我给你一个想法，它可能对你有用。

试试这个我认为它可以解决你的问题。

```
 int orientation = getResources().getConfiguration().orientation;
            int rotation = getWindowManager().getDefaultDisplay().getRotation();
            int actual_orientation = -1;
            if (orientation == Configuration.ORIENTATION_LANDSCAPE
            &&  (rotation == Surface.ROTATION_0 
            ||  rotation == Surface.ROTATION_90)){
                orientation = Configuration.ORIENTATION_LANDSCAPE;
            } else if (orientation == Configuration.ORIENTATION_PORTRAIT
                  &&  (rotation == Surface.ROTATION_0 
                   ||  rotation == Surface.ROTATION_90)) {
                orientation = Configuration.ORIENTATION_PORTRAIT;
            } else if (orientation == Configuration.ORIENTATION_LANDSCAPE
                  &&  (rotation == Surface.ROTATION_180 
                   ||  rotation == Surface.ROTATION_270)){
                orientation = //any constant for reverse landscape orientation;
            } else {
                if (orientation == Configuration.ORIENTATION_PORTRAIT
                        &&  (rotation == Surface.ROTATION_180 
                         ||  rotation == Surface.ROTATION_270)){
                      orientation = //any constant for reverse portrait orientation;
                }
            } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-17T17:45:29.740

我最终使用了上面 Zoltán 的答案，效果很好，除非我在平板电脑（三星 P6210 Galaxy Tab 7.0 Plus）上尝试过。在纵向模式下，它返回 SCREEN_ORIENTATION_REVERSE_PORTRAIT。因此，在 else 语句中（如果自然方向是横向），我将案例换成了 ROTATION_90 和 ROTATION_270，一切似乎都正常。（我没有足够的声誉将其发布为对 Zoltán 答案的评论。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-13T10:29:10.703

您可以通过一种非常简单的方式做到这一点：获取屏幕`widht`和`height`. 当设备处于横向时，屏幕宽度总是会更高。

```
Display display = getWindowManager().getDefaultDisplay();
    int width = display.getWidth(); 
    int height = display.getHeight();
    Toast.makeText(getApplicationContext(), "" + width + "," + height,
            Toast.LENGTH_SHORT).show();
    if (width > height) {
        Toast.makeText(getApplicationContext(), "LandScape",
                Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-30T09:13:26.143

这能解决你的问题吗？

```
public static int getscrOrientation(Activity act)
{
    Display getOrient = act.getWindowManager()
            .getDefaultDisplay();

    int orientation = getOrient.getOrientation();

    // Sometimes you may get undefined orientation Value is 0
    // simple logic solves the problem compare the screen
    // X,Y Co-ordinates and determine the Orientation in such cases
    if (orientation == Configuration.ORIENTATION_UNDEFINED) {

        Configuration config = act.getResources().getConfiguration();
        orientation = config.orientation;

        if (orientation == Configuration.ORIENTATION_UNDEFINED) {
            // if height and widht of screen are equal then
            // it is square orientation
            if (getOrient.getWidth() == getOrient.getHeight()) {
                orientation = Configuration.ORIENTATION_SQUARE;
            } else { // if widht is less than height than it is portrait
                if (getOrient.getWidth() < getOrient.getHeight()) {
                    orientation = Configuration.ORIENTATION_PORTRAIT;
                } else { // if it is not any of the above it will defineitly
                            // be landscape
                    orientation = Configuration.ORIENTATION_LANDSCAPE;
                }
            }
        }
    }
    return orientation; // return value 1 is portrait and 2 is Landscape
                        // Mode
} 
```

# mysql - 在两个字段上使用 group by 并在 SQL 中计数

> ID：10380990
> 
> 赞同：94
> 
> 时间：2012-04-30T09:03:03.277
> 
> 标签：mysql, sql

我的 mysql 数据库中有一个表，它有两列：组和子组。见下文。

```
 group, subGroup
 grp-A, sub-A
 grp-A, sub-A
 grp-A, sub-B      
 grp-B, sub-A
 grp-B, sub-B
 grp-B, sub-B 
```

我正在尝试获取每个唯一夫妇组/子组的记录数。

这是我所期望的：

```
group, subGroup, count
grp-A, sub-A, 2
grp-A, sub-B, 1
grp-B, sub-A, 1
grp-B, sub-B, 2 
```

在阅读了一些帖子后，我尝试了几个使用 group by、count() 的 sql 查询，但我没有设法得到预期的结果。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-04-30T09:05:38.790

我想你正在寻找：`SELECT a, b, COUNT(a) FROM tbl GROUP BY a, b`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-30T09:07:22.227

```
SELECT group,subGroup,COUNT(*) FROM tablename GROUP BY group,subgroup 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-16T08:58:20.883

您必须对列、组和子组进行分组，然后使用聚合函数`COUNT()`。

```
SELECT
  group, subgroup, COUNT(*)
FROM
  groups
GROUP BY
  group, subgroup 
```

# javascript - 重定向完成时执行 javascript

> ID：10380991
> 
> 赞同：0
> 
> 时间：2012-04-30T09:03:11.087
> 
> 标签：javascript, redirect, sencha-touch

在 Javascript 的某个时刻，我需要重定向到另一个页面。我这样做。

```
window.location.href='http://localhost:3000/m/debug'; 
```

然后，当该页面完成加载时，我需要访问这个新页面的 window.Ext 对象。我尝试执行以下操作，但它不起作用。

```
window.onload = function(){alert(typeof window.Ext);}; // returns 'undefined'
window.location.href='http://localhost:3000/m/debug#settings'; 
```

或者

```
setTimeout(function(){ alert(typeof window.Ext); },5000); // is never called
window.location.href='http://localhost:3000/m/debug#settings'; 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:06:45.773

一旦您设置`window.location.href`浏览器导航离开当前页面 -将**不会**执行进一步的 JavaScript ......甚至没有使用设置的函数`setTimeout/setInterval`

如果您想在目标页面上执行 JavaScript，您需要使用 JavaScript 添加更新目标页面！

# python - 从包含键值对的字符串中获取python字典

> ID：10380992
> 
> 赞同：9
> 
> 时间：2012-04-30T09:03:29.623
> 
> 标签：python, string, dictionary

我有一个格式为的python字符串：

```
str = "name: srek age :24 description: blah blah" 
```

有什么方法可以将它转换为看起来像的字典

```
{'name': 'srek', 'age': '24', 'description': 'blah blah'} 
```

其中每个条目都是取自字符串的 (key,value) 对。我尝试将字符串拆分为列表

```
str.split() 
```

然后手动删除`:`，检查每个标签名称，添加到字典中。这种方法的缺点是：这种方法很讨厌，我必须`:`为每一对手动删除，如果字符串中有多个单词“值”（例如`blah blah`for `description`），每个单词将是列表中的一个单独条目不可取。是否有任何获取字典的 Pythonic 方式（使用 python 2.7）？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-30T09:07:56.457

```
>>> r = "name: srek age :24 description: blah blah"
>>> import re
>>> regex = re.compile(r"\b(\w+)\s*:\s*([^:]*)(?=\s+\w+\s*:|$)")
>>> d = dict(regex.findall(r))
>>> d
{'age': '24', 'name': 'srek', 'description': 'blah blah'} 
```

**解释：**

```
\b           # Start at a word boundary
(\w+)        # Match and capture a single word (1+ alnum characters)
\s*:\s*      # Match a colon, optionally surrounded by whitespace
([^:]*)      # Match any number of non-colon characters
(?=          # Make sure that we stop when the following can be matched:
 \s+\w+\s*:  #  the next dictionary key
|            # or
 $           #  the end of the string
)            # End of lookahead 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T09:07:22.740

没有`re`：

```
r = "name: srek age :24 description: blah blah cat: dog stack:overflow"
lis=r.split(':')
dic={}
try :
 for i,x in enumerate(reversed(lis)):
    i+=1
    slast=lis[-(i+1)]
    slast=slast.split()
    dic[slast[-1]]=x

    lis[-(i+1)]=" ".join(slast[:-1])
except IndexError:pass    
print(dic)

{'age': '24', 'description': 'blah blah', 'stack': 'overflow', 'name': 'srek', 'cat': 'dog'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T03:32:48.697

以原始顺序显示字典的 Aswini 程序的其他变体

```
import os
import shutil
mystr = "name: srek age :24 description: blah blah cat: dog stack:overflow"
mlist = mystr.split(':')
dict = {}
list1 = []
list2 = []
try:
 for i,x in enumerate(reversed(mlist)):
    i = i + 1
    slast = mlist[-(i+1)]
    cut = slast.split()
    cut2 = cut[-1]
    list1.insert(i,cut2)
    list2.insert(i,x)
    dict.update({cut2:x})
    mlist[-(i+1)] = " ".join(cut[0:-1])
except:
 pass   

rlist1 = list1[::-1]
rlist2= list2[::-1]

print zip(rlist1, rlist2) 
```

输出

`[('name', 'srek'), ('age', '24'), ('description', 'blah blah'), ('cat', 'dog'), ('stack', 'overflow')]`

# mysql - 通过组合三个不同的sql查询的数据得到公共数据

> ID：10380995
> 
> 赞同：1
> 
> 时间：2012-04-30T09:03:46.097
> 
> 标签：mysql, subquery

```
SELECT STATNO FROM ENQUIRY  WHERE ID=12; 
```

回报：100,102,110

```
SELECT STATNO FROM ENQUIRY  WHERE ID=16; 
```

回报：102,112,118

```
 SELECT STATNO FROM ENQUIRY  WHERE ID=21; 
```

回报：101,102,120

我需要一个结合上述内容并返回公共数据的查询：102。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:34:44.930

You can use JOIN in your query:

```
SELECT a.STATNO FROM ENQUIRY a
JOIN (
   SELECT x.STATNO FROM ENQUIRY x WHERE ID=16
) b ON a.STATNO = b.STATNO
JOIN (
   SELECT y.STATNO FROM ENQUIRY y WHERE ID=21
) c ON b.STATNO = c.STATNO
 WHERE a.ID=12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:35:59.750

```
drop table if exists enquiry;
create table enquiry (id integer, statno integer);
insert into enquiry values 
(12,100),(12,102),(12,110),
(18,102),(18,112),(18,118),
(21,101),(21,102),(21,120);

select distinct statno from enquiry where 
statno in (select statno from enquiry where id=12)
and statno in (select statno from enquiry where id=18)
and statno in (select statno from enquiry where id=21)
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:32:52.543

Unfortunately `INTERSECT` doesnt work with MySQL. You could do this instead..

```
SELECT     a.STATNO
FROM       ENQUIRY AS a 
INNER JOIN ENQUIRY AS b ON b.STATNO = a.STATNO 
INNER JOIN ENQUIRY AS c on c.STATNO = a.STATNO 
WHERE a.id = 12 and b.id = 16 and c.id =21 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:50:55.360

嗨，您可以使用 group by 和有声明

```
SELECT STATNO FROM ENQUIRY  WHERE ID IN (12 ,16 , 21) group by STATNO having count(*)  = 3; 
```

这种方法只有在`combination of (ID, STATNO) is unique`. 在这里`count(*) would be equal to total number of values in IN statement in query like here is 3`。

谢谢