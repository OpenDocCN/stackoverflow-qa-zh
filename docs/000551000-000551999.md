# StackOverflow 问答 000551000-000551999

# c++ - C++ fstream 错误

> ID：551001
> 
> 赞同：1
> 
> 时间：2009-02-15T15:08:12.253
> 
> 标签：c++, file-io

我学习c++，今天开始学习文件处理。但是在运行此代码时出现错误

```
#include <iostream>
#include <fstream.h>

using namespace std;

    int main()
    {
        fstream file;
        file.open("test.txt",ios::in|ios::out)

        file.close();

        return 0;
    } 
```

得到错误

```
Cannot open include file: 'fstream.h': No such file or directory 
```

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-15T15:09:51.017

将您的包含更改为：

```
#include <fstream> 
```

它是一个标准库，您试图将它指向一个不存在的头文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-15T15:31:17.863

缺少分号：

```
 file.open("test.txt",ios::in|ios::out) 
```

应该是：

```
 file.open("test.txt",ios::in|ios::out); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-15T15:10:01.923

对于标准 C++ 包括，不要使用 .h 扩展名：

```
#include <fstream> 
```

# database - 比较 Hibernate 和 Active Record 的最佳参考在哪里？

> ID：551004
> 
> 赞同：0
> 
> 时间：2009-02-15T15:09:52.470
> 
> 标签：database, hibernate, architecture, activerecord

我喜欢 Active Record，但很多人说它的性能不如 Hibernate。那里应该有一些好文章，但谷歌无法帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T15:44:50.107

如果您想要比较[Active Record](http://martinfowler.com/eaaCatalog/activeRecord.html) (Rails) 和[Data Mapper (Hibernate)，](http://martinfowler.com/eaaCatalog/dataMapper.html)[企业应用程序架构模式中](https://rads.stackoverflow.com/amzn/click/com/0321127420)的“数据源架构模式”一章是一个不错的起点。

它清楚地解释了这些模式背后的概念以及何时使用每种模式，但没有讨论 Rails 或 Hibernate 等具体实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T15:16:57.723

我不确定你是什么意思？Active Record 是一种设计模式，而 Hibernate 是一种框架。

您的意思是将rails与带有java的hibernate进行比较？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T15:51:52.180

我认为他指的是 NHibernate 和 Castle ActiveRecord。Castle ActiveRecord 建立在 NHibernate 之上，应该会产生类似的性能。

# java - 对属性键使用常量有什么意义？

> ID：551009
> 
> 赞同：5
> 
> 时间：2009-02-15T15:13:06.953
> 
> 标签：java, properties, constants

最近，我遇到了很多依赖“属性文件”进行配置的 Java 代码。但是代码使用常量（静态最终字符串）来检索属性值，而不是普通的旧字符串文字。

我发现这种额外的间接级别很烦人，因为我需要在**任一方向执行****两次**查找。如果我从配置文件中观察到的属性开始，我必须先搜索属性名称以找到 Java 常量，然后再次搜索以找到代码中对该常量的引用。如果我从代码开始，我必须先找到常量的实际值，然后才能确定配置文件中属性的值！

 ****重点是什么？**

我理解使用常量来引用资源包中的键的价值，通常是为了支持 i18n。我指的是简单的、非面向用户的配置值。我能想到的**唯一**原因是以后可以轻松更改属性名称，但是这种好处远不及恕我直言的烦恼，尤其是考虑到全局搜索和替换的简便性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-15T15:20:51.380

一方面，您不能在使用常量时错误地键入键而不会出现编译器错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-15T15:20:57.870

即使在简单的全局搜索和替换（这不是新事物）的日子里，使用常量也可以让您知道 String 仅用于该属性文件。这很好，因为：

*   常量意味着拼写错误会导致编译器错误，而字符串不会
*   常量允许您将一个属性文件的键“ID”与另一个 XML 文件的键“ID”分开。相同的字符串，不同的含义。
*   全局搜索和替换可能会破坏很多事情，而您的 IDE 将让您非常轻松地搜索常量的所有用法，并且只更改相关的。

在很多情况下，程序员养成的习惯只是一个好习惯，但好习惯的存在是有原因的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-15T15:38:20.747

如果需要在不重新编译的情况下更改值，则不可避免地需要进行一些重定向，但是再做另一个是非常愚蠢的，除非需要在多个地方引用键（这本身可能是关注点分离不佳的标志）。

关键字符串应该具有足够的描述性，以至于它们不能与超出其范围（通常是类）的其他内容发生冲突，并且在单个类中保持唯一的文字既不复杂，也不可能成为值得在单个块中声明的严重问题。因此（IMO）这种做法只是在不了解规则的初衷的情况下盲目遵守规则的人。

如果您需要向他们引用替代指南来证明放松这一点的合理性，我建议您使用 KISS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T15:19:49.793

我以前也见过这种做法，事实上，有一次我在一个项目中必须搜索一个常量文件，这导致我找到一个 XML 文件，该文件最终会给出我正在寻找的属性名称。然后我也必须查看属性文件，因为值是我真正想要的。

[我认为这是 Jeff 和 Joel在上次播客](https://blog.stackoverflow.com/2009/02/podcast-41/)中谈论的内容的一个示例，开发人员盲目地遵循他们听说过的做法（在这种情况下，在代码中永远不要使用字符串文字的做法）没有考虑考虑到手头的事情是否真的合适。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T16:48:31.733

因为自动完成在常量标识符上效果更好，但是如果您所有的键值都是“com.foo.bar.whatever”，您将得不到任何反馈。

# javascript - 基于标签或手风琴的页面 - 它是如何在服务器端完成的？

> ID：551015
> 
> 赞同：0
> 
> 时间：2009-02-15T15:16:04.810
> 
> 标签：javascript, html, css

我有一个带有标签或手风琴的网页，由 YUI 或 jquery 或其他 javascript+css 框架生成。

假设在一个选项卡中处理 HTML 表单。服务器应该怎么做？发回所有选项卡，提交表单的选项卡具有结果并且所有其他选项卡未修改？要不然是啥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T15:29:35.777

当您选择每个新选项卡时，您可以只针对您需要的内容发送一个 jQuery AJAX 请求，例如，如果您的用户单击标题为“Sports”的选项卡，您可以向服务器上的“sports.html”发出请求，并且在选项卡中显示它。

[这里](http://jetlogs.org/2008/03/17/jquery-ajax-tabs/)有一个很好的演练，描述了如何实现这一点，所有这些都建立在一个基本功能上，比如：

```
// Clicked on "sports" tab
$("#sports").click(function() 
{ 
    // Make ajax call
    $.ajax( 
    { 
        url: "sports.html",     // page to be called
        cache: false, 
        success: function(message) 
        { 
            // Success code returned, clear sports
            // content area and inject server response
            $("#sportscontent").empty().append(message); 
        } 
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T15:24:26.740

当 JavaScript 支持不可用时，您应该始终发送仍然可用的文档。由于大多数此类导航使用 URI 的片段标识符来标识应显示的文档部分，因此您也可以使用它并将表单定位到该片段：

```
<form action="#tab3" method="post"> 
```

或者您使用 JavaScript 发送数据、获取响应并将其显示在当前选项卡中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-15T15:21:14.813

您可以使用[Jquery 的 $.get](http://docs.jquery.com/Ajax/jQuery.get#urldatacallbacktype)函数在点击时获取项目。

# javascript - Greasemonkey 脚本和函数作用域

> ID：551028
> 
> 赞同：7
> 
> 时间：2009-02-15T15:20:57.403
> 
> 标签：javascript, firefox, scope, greasemonkey

这是我的脚本代码：

```
 // ==UserScript==
    // @name          test 
    // @description   test
    // @include       http://*
    // @copyright     Bruno Tyndall
    // ==/UserScript==

    var main = function() {
        var b = document.getElementsByTagName('body')[0];
        var t = document.createElement('div');
        t.innerHTML = '<a href="javascript:void(0);" style="color:white;">Hello World</a>';
        t.style.position = 'absolute';
        t.style.zIndex = 1000;
        t.style.bottom = '5px';
        t.style.right = '5px';
        t.firstChild.setAttribute('onclick', 'test();');
        b.appendChild(t);

    }

    var test = function() {
        alert("Hello World");
    }
    main(); 
```

我唯一的问题是单击 Hello World 时页面找不到 test() 函数。请告诉我，我不必像这样通过将函数innerHTML'ing 到页面上来解决[它](http://userscripts.org/scripts/review/40443)。还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-15T17:17:10.867

Greasemonkey 在沙箱中执行脚本——出于安全原因，页面无权访问它。对 dom 和 window 的所有访问都是通过包装器进行的。

如果你想访问不安全的对象，你可以使用`wrappedJSObject`属性。

对于您的情况，您可以使用`unsafeWindow`（或`window.wrappedJSObject`）：

```
unsafeWindow.test = function() { .... 
```

这有一些安全问题，请参阅：[http ://wiki.greasespot.net/UnsafeWindow](http://wiki.greasespot.net/UnsafeWindow)

此外，greasemonkey 在 DOMContentLoaded （当 dom 准备好时）事件之后执行脚本，所以你不需要那个 onload 废话。

此外，您不能使用属性来设置事件侦听器或属性 - 您必须为此使用 dom api。例如：

```
t.firstChild.addEventListener('click', test, false); 
```

或者：

```
t.firstChild.addEventListener('click', function(event){ blabla }, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T15:33:18.450

iirc，greasemonkey 在它自己的范围内运行，所以 test 不会在全局命名空间中。

与其污染全局，为什么不通过 DOM 操作来创建锚元素呢？这将为您返回一个引用，您可以绑定一个匿名函数（或greasemonkey 范围测试）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T15:24:24.867

尝试将功能测试添加到窗口对象

```
window.test = function ... 
```

**编辑**

此外，最好从“加载”事件处理程序运行代码，而不是仅在脚本末尾调用它。例如：

```
window.addEventListener("load", function(e) {
 // Your main() here
}, false); 
```

# mysql - 例如，使用 MySQL 获取 JDBC 连接是否比使用 Derby 慢？

> ID：551034
> 
> 赞同：6
> 
> 时间：2009-02-15T15:25:06.270
> 
> 标签：mysql, jdbc, ehcache, derby, c3p0

我用

*   雄猫
*   C3p0（在 Tomcat 中配置的 JNDI）
*   MySQL (InnoDB) / Derby (not embedded) 作为数据库
*   EHCache（内存中）
*   休眠
*   测试机运行 WinXP

我使用 Derby 进行开发并想切换到 MySQL。我惊讶地发现，使用 MySQL 我的测试比使用 Derby 慢了大约 50%。

我的测试场景：

*   大约 2000 个选择，复杂程度各不相同，但没有一个使用超过一个连接。所有 SQL 都使用索引
*   Ehcache 充满了设置运行。之后，我至少运行了 50 倍的 Testscenario 以克服优化器/GC 效应

我确认缓存正在使用中。没有真正的 SQL 进入数据库。所以我只是猜测是连接创建时间减慢了 MySQL 测试的速度。

# python - Python中的“私有”（实现）类

> ID：551038
> 
> 赞同：134
> 
> 时间：2009-02-15T15:29:40.173
> 
> 标签：python, access-modifiers

我正在编写一个由两部分组成的小型 Python 模块：

*   一些定义公共接口的函数，
*   上述函数使用的实现类，但在模块外没有意义。

起初，我决定通过在使用它的函数中定义它来“隐藏”这个实现类，但这会妨碍可读性，并且如果多个函数重用同一个类，则无法使用。

那么，除了注释和文档字符串之外，是否还有一种机制可以将类标记为“私有”或“内部”？我知道下划线机制，但据我了解，它仅适用于变量、函数和方法名称。

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2009-02-15T15:34:03.643

使用单个下划线前缀：

```
class _Internal:
    ... 
```

这是“内部”符号的官方 Python 约定；"from module import *" 不导入带下划线前缀的对象。

参考[单下划线约定](https://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2009-02-15T18:31:49.783

简而言之：

1.  **您不能强制执行隐私**。Python 中没有私有类/方法/函数。至少，不像 Java 等其他语言那样严格的隐私。

2.  **您只能表明/建议隐私**。这遵循一个约定。将类/函数/方法标记为私有的 Python 约定是在其前面加上 _（下划线）。例如，`def _myfunc()`或`class _MyClass:`。`__foo`您还可以通过在方法前加上两个下划线（例如， ）来创建伪隐私。您不能直接访问该方法，但您仍然可以使用类名通过特殊前缀调用它（例如，`_classname__foo`）。所以你能做的最好的就是表明/建议隐私，而不是强制执行。

Python 在这方面就像[Perl](https://en.wikipedia.org/wiki/Perl)。套用 Perl 书中关于隐私的一句名言，哲学是你应该呆在客厅外面，因为你没有被邀请，而不是因为它被猎枪保护了。

了解更多信息：

*   [私有变量](http://docs.python.org/tutorial/classes.html#private-variables) *Python 文档*
*   [为什么 Python 的“私有”方法实际上不是私有的？](https://stackoverflow.com/questions/70528/why-are-pythons-private-methods-not-actually-private) *堆栈溢出问题 70528*

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2009-02-15T15:36:03.030

定义`__all__`，您要导出的名称列表（[请参阅文档](http://docs.python.org/tutorial/modules.html#importing-from-a-package)）。

```
__all__ = ['public_class'] # don't add here the 'implementation_class' 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-02-15T15:58:49.027

我有时使用的模式是这样的：

定义一个类：

```
class x(object):
    def doThis(self):
        ...
    def doThat(self):
        ... 
```

创建类的实例，覆盖类名：

```
x = x() 
```

定义公开功能的符号：

```
doThis = x.doThis
doThat = x.doThat 
```

删除实例本身：

```
del x 
```

现在您有了一个只公开您的公共功能的模块。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-02-15T15:33:48.260

约定是在内部类、函数和变量前面加上“_”。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-02-15T16:37:01.340

使用两个下划线作为“私有”标识符名称的前缀。对于模块中的类，使用单个前导下划线，它们不会使用“from module import *”导入。

```
class _MyInternalClass:
    def __my_private_method:
        pass 
```

（在 Python 中没有真正的“私有”这样的东西。例如，Python 只是自动将带有双下划线的类成员的名称修改为`__clssname_mymember`. 所以说真的，如果你知道被修改的名称，你无论如何都可以使用“私有”实体.[见这里。](http://docs.python.org/tutorial/classes.html#private-variables)当然，如果您愿意，您可以选择手动导入“内部”类）。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-02-15T18:09:59.727

为了解决设计约定的问题，正如[chroder 所说](https://stackoverflow.com/questions/551038/private-implementation-class-in-python/551169#551169)，Python 中确实没有“私有”这样的东西。对于来自 C/C++ 背景的人（就像我不久前一样）来说，这听起来可能有些扭曲，但最终，您可能会意识到遵循约定就足够了。

看到前面有下划线的东西应该是一个很好的暗示，不要直接使用它。如果您关心混乱的`help(MyClass)`输出（这是每个人在搜索如何使用类时都会看到的），那么下划线的属性/类不包括在那里，因此您最终只会描述您的“公共”接口。

另外，让所有东西都公开有它自己很棒的好处，例如，你可以从外部对几乎任何东西进行单元测试（你不能用 C/C++ 私有结构真正做到这一点）。

# asp.net - 您使用的 HTML 助手列表

> ID：551050
> 
> 赞同：1
> 
> 时间：2009-02-15T15:35:05.467
> 
> 标签：asp.net, asp.net-mvc, html-helper

我发现 Html Helpers 对简化视图页面代码非常有用。

除了最新版本的 Asp.Net Mvc 中包含的那些之外，您还使用哪一个？

您可以在不同的项目中重用它们多少，它们是否仅与 html 生成相关联，或者您是否在其中放置了一些自定义逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-16T00:47:53.420

查看[MvcContrib](http://www.codeplex.com/MVCContrib)。[流利](http://lunaverse.wordpress.com/2008/11/24/mvcfluenthtml-fluent-html-interface-for-ms-mvc/)的HTML 。

# winforms - Windows 窗体中是否有与 Qt 的 QCanvas 类似的东西？

> ID：551051
> 
> 赞同：1
> 
> 时间：2009-02-15T15:35:10.007
> 
> 标签：winforms, qt, canvas

我编写了一个 Windows 窗体应用程序来解决[Shikaku](http://www.nikoli.co.jp/en/puzzles/shikaku/index_text.htm)难题。目前，拼图网格是使用 PaintEventHandler 在应用程序主窗口的面板上绘制的。PaintEventHandler 调用的方法每次调用时都会重绘整个网格。虽然这种方法有效，但它闪烁且效率低下，我想用更平滑的方法替换它。

我在 Qt 中编写了许多类似的应用程序。使用 Qt，我会创建一个 QCanvas 和一个 QCanvasView。然后我可以向 QCanvas 添加对象或从中删除对象，并调用`update()`QCanvasView 上的方法以查看更改生效而不会闪烁。

我尝试过的另一种方法是保留对`Graphics`用于绘制面板的对象的引用，并尝试在 Paint 事件之外对其进行绘制。这不起作用：我遇到了一个相当无用的`ArgumentException: Parameter is not valid`异常，我只能假设它是由 Windows 抛出的，因为它并不期望应用程序在那时进行任何绘画。

有没有类似于 QCanvas for Windows Forms 的东西？如果不是，我应该使用什么方法来更新拼图网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T23:52:24.803

WindowsForms 控件的`Paint`事件通常具有设置为仅重绘控件的必要部分的上下文区域。这与设置`DoubleBuffered`为 true 通常足以解决大多数重绘问题。

此外，您会收到异常，因为`Graphics`您正在缓存的对象在绘制事件完成时已处置。

一种可行的方法（假设 DoubleBuffering 不够用）是`Bitmap`在您在 Paint 事件中在屏幕上绘画时将您的绘图绘制到屏幕外。或者，将位图托管在 a 中`PictureBox`并让重绘自动发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-11T15:03:40.627

一个快速的想法 - 尝试 PyQt 怎么样？QCanvas 和 QCanvasView 应该可以在任何平台上正常工作

# apache-flex - Flex：树组件：在数据提供者更新时保持状态

> ID：551058
> 
> 赞同：1
> 
> 时间：2009-02-15T15:38:28.173
> 
> 标签：apache-flex, actionscript-3, flex3

我将如何保持树控件的状态？我想在树的数据提供者更新时保持树的状态，而不是崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T18:25:39.987

How about something like this :

```
    var openItems:Object = tree.openItems;
    tree.dataProvider = myNewDataProvider;
    tree.openItems = openItems;
    tree.validateNow();

```

I'm not sure how well this will work if the new dataProvider is radically different from the old one, but it works when you're lazy loading tree nodes.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-07-29T02:04:36.673

这是我如何让它工作的。关键是调用

```
*yourTreeInstance*.validateDisplayList(); 
```

更新树的数据提供者后。我的代码如下：

```
<fx:Script>
    <![CDATA[
        [Bindable]
        var treeDataProvider:XML;

        private function onTreeCreated(event:FlexEvent):void{

            // update value with new XML here;
            treeDataProvider = <node name="root">
                                   <node name="child 1">
                                       <node name = "grand child 1"/>
                                   </node>
                                </node>;

            myTree.openItems = treeDataProvider..node;
            myTree.validateDisplayList();
        }

    ]]>
</fx:Script>

<mx:Tree id="myTree" labelField="@name" dataProvider={treeDataProvider} 
         creationComplete="onTreeCreated(event)"/> 
```

这将使您的整个树保持打开状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-29T17:00:34.153

For a Project with BlazeDS I had to work with updating and reloading Tree component data without breaking the User Experience (all nodes closed when data reloaded). Instead of keeping tabs on “which node was opened before?” and “what was the scroll-position?” I found a way to inject the new state of the Tree component data into the existing data provider.

[Read the article here if you are interested](http://flashworks.wordpress.com/2010/08/29/blazeds-and-smooth-data-injection-dynamically-refreshing-a-flex-tree-view-data-provider/).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-25T05:35:31.440

这实际上很容易做到。您只需要确保组件绑定到它的 dataProvider，而不仅仅是引用它。因此，在 mxml 中，这是用于分配 dataProvider 的花括号语法。此外，DP 必须是 [Bindable]。

如果你这样做，任何时候你更新（添加节点，删除，重命名，等等）你的数据提供者，它都会在你的控制中自动更新。无需手动失效或更新。

如果您需要实际的代码示例，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-04T11:55:22.280

Inferis 的答案涉及存储 openItems，然后在更新数据提供程序后再次设置它们，并结合在 dataprovider 数组集合中的对象上实现 IUID 接口对我有用。

有关 IUID 的更多信息：http://livedocs.adobe.com/flex/3/html/help.html?content= [about_dataproviders_8.html](http://livedocs.adobe.com/flex/3/html/help.html?content=about_dataproviders_8.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-15T16:29:42.403

我认为没有办法自动执行此操作（尽管我从未使用过树控件）。我认为您最好的选择是扩展树控件并自己处理状态记录。

例如，我可能会覆盖 data 属性，以便您可以在组件上设置新数据对象之前运行状态检查功能。看帮助有方法

```
isItemOpen(item:Object):Boolean, 
```

和

```
expandItem(item:Object, open:Boolean, animate:Boolean = false, dispatchEvent:Boolean = false, cause:Event = null):void 
```

您需要递归地运行每个节点并检查它是否打开并存储该节点的状态。然后，当它使用新的数据提供者重新绘制时，递归地运行新节点并检查它们中的任何一个是否以前打开过，如果是，则展开它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-12-14T21:12:56.320

您需要在代表节点的数据对象上实现 IUID 接口。UID 是一个唯一标识符，通常只是根据对象中的数据构建的，但有时覆盖它并使其成为在数据提供程序刷新之间保持不变的 GUID 会更准确。因此，如果 UID 匹配，则在使用新的数据提供者时，上述内容将起作用。

希望这是有道理的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-09T08:11:46.363

为了下面的片段

```
var openItems:Object = tree.openItems;
tree.dataProvider = myNewDataProvider;
tree.openItems = openItems;
tree.validateNow(); 
```

或者

```
callLater(keepOpenStateItems);

private function keepOpenStateItems():void {
    tree.openItems = openTreeItems; 
} 
```

要工作，您必须遵循 mattbilson 和 Michelle 的建议。他们是绝对正确的。

刚刚实现了树 dataprovider 中包含的对象的 IUID，瞧！集合刷新使树真正保持在以前的状态。

# ruby-on-rails - 在开发环境中加速 Rails 应用程序。？

> ID：551060
> 
> 赞同：8
> 
> 时间：2009-02-15T15:41:04.873
> 
> 标签：ruby-on-rails, boost, development-environment, performance

我现在有*巨大的*Rails 应用程序正在开发中，在 -e 开发中运行*非常*缓慢。我使用 Mongrel 作为 Web 服务器。有什么办法可以加快一点点吗？因为我必须等待 3-10 秒。重新加载页面。谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-02-15T15:43:18.567

这是您所有问题的答案：

[https://github.com/thedarkone/rails-dev-boost](https://github.com/thedarkone/rails-dev-boost)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T17:49:46.773

获得速度提升的一个非常简单的方法是在开发模式下打开类缓存......

在 config/environments/development.rb 中：config.cache_classes = true

这意味着 Rails 不会重新加载所有模型/控制器/等。在每个请求上，因此它会更快，但这意味着您必须停止/启动服务器才能查看除视图之外的任何内容的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T17:03:41.290

加快开发速度的[最佳方法](http://rubyinrails.com/speed-up-rails-in-development-mode/)是安装`gem`named `active_reload`。

要安装它`gem`，您可以输入命令，

`gem install active_reload`

并且，在您的 rails 项目 gemfile 中，添加

`gem 'active_reload'`

然后，重新启动服务器，您会发现开发模式比以前快得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-17T09:16:45.110

如果您需要 3-10 秒在本地渲染一个动作，也许有些事情需要一些优化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-17T21:38:01.567

我认为如果您使用的是 Vista，则 Mongrel 在绑定到所有地址（0.0.0.0）时会出现性能问题

绑定到 127.0.0.1 或你的真实 IP（mongrel -b 127.0.0.1 -p 3000 -e development），看看它是否有所作为。

此外，如果您当前打开了一个连接密集型软件，例如具有大量打开连接的 bittorent，您的网络接口可能会达到最大连接数并减慢 Mongrel。关闭 bittorent，然后甚至重新启动，可能会解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-12T17:12:39.310

如果您在 Windows 上，请使用 Ruby [http://rubyinstaller.org/downloads/的一些 mingw 构建](http://rubyinstaller.org/downloads/)

如果您使用的是 linux，这可能有助于运行测试

[http://github.com/candlerb/snailgun/tree/master](http://github.com/candlerb/snailgun/tree/master)

# database - 新项目：在线图像搜索，同时保持图像安全

> ID：551061
> 
> 赞同：1
> 
> 时间：2009-02-15T15:41:06.980
> 
> 标签：database, image

我即将为我的另一半开始一个项目；根据某些标准搜索考古图像的能力。

搜索这些标准的能力就在我的街道上，一个与某些元数据相关联的图像数据库（或其文件路径）。该界面将允许搜索元数据，然后使用缩略图视图和摘要元数据显示匹配项。然后，用户可以单击图像以查看全尺寸视图和完整的元数据。（从而促进骨骼分析等）

我不熟悉如何使图像安全（由于版权问题）。

有没有人对从哪里开始，哪种技术可以提供这种安全性等有任何建议？

（需要免费，并且可以在线和在她安装了 IIS 的笔记本电脑上托管。）

**编辑：**

所需的安全级别是：
1\. 公众看不到任何图像
2\. 登录的用户只能看到我允许他们看到的图像（从数据库读取的访问级别）
3\. 如果可能，文件不应下载
4\. 图像需要保持高分辨率和无标记以便分析

即使他们知道我不希望他们看到的图像的 URL，这也应该成立……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T15:43:38.800

你说的安全是什么意思？

我可以在计算机屏幕上看到的任何图像都可以下载并保存到我的硬盘中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T15:49:39.800

这听起来像是一个有趣的项目。

我建议您只将图像访问权限授予经过身份验证的用户。
因此，将它们存储在安全的位置并将它们流式传输给有效用户。

您可能还想查看为每个图像添加水印，并且还可能让每个用户签署某种条款和条件。

在技​​术方面，这取决于您的技能，例如，以上所有内容都可以通过 IIS 和 C# 来实现。

或（略有不同的方法），

您可以将图像上传到 flickr 上的私人档案，酌情添加标签，并酌情授予用户访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T15:51:28.033

正如 jfar 所说，您可以在计算机屏幕上看到的任何图像都可以下载并保存到硬盘驱动器。其中一个选项是使用键盘上的打印屏幕按钮截取屏幕截图。

这一切都归结为您希望图片的安全性。您可以通过让用户在某些专有应用程序中浏览数据库时签署 NDA 来一路走下去。但这是最不切实际的选择（并且最令人悲痛）。

最实用的方法是在图片上加水印或覆盖一些描述来源的文字，并与版权所有者就图片的分发方式达成协议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T15:51:45.347

[这个网站](http://www.naturefocused.com/articles/image-protection.html)上有一些很好的提示。许多技巧会阻止带有“将图像另存为...”选项的右键菜单出现。有些还混淆或隐藏 HTML 源中的图像 URL（例如，将图像 URL 编码为十六进制字符）。我认为后者非常重要。不显示图像保存对话框是不够的。

文章没有提到 Flash：你也可以让[Flash](http://en.wikipedia.org/wiki/Adobe_Flash)显示图像。

无论如何不要以太高的分辨率显示它。人们总是可以截屏。

# c++ - 测试指针的有效性 (C/C++)

> ID：551069
> 
> 赞同：97
> 
> 时间：2009-02-15T15:45:31.277
> 
> 标签：c++, c, validation, pointers, null

有什么方法可以确定（当然，以编程方式）给定的指针是否“有效”？检查 NULL 很容易，但是像 0x00001234 这样的东西呢？当试图取消引用这种指针时，会发生异常/崩溃。

首选跨平台方法，但特定于平台（适用于 Windows 和 Linux）也可以。

**更新澄清：** 问题不在于陈旧/释放/未初始化的指针；相反，我正在实现一个 API，它从调用者那里获取指针（如指向字符串的指针、文件句柄等）。调用者可以（有意或错误地）发送一个无效值作为指针。如何防止崩溃？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-02-15T16:11:26.720

> **更新澄清：**问题不在于陈旧、释放或未初始化的指针；相反，我正在实现一个 API，它从调用者那里获取指针（如指向字符串的指针、文件句柄等）。调用者可以（有意或错误地）发送一个无效值作为指针。如何防止崩溃？

你不能做那个检查。您根本无法检查指针是否“有效”。你必须相信，当人们使用带指针的函数时，这些人知道他们在做什么。如果他们将 0x4211 作为指针值传递给您，那么您必须相信它指向地址 0x4211。如果他们“不小心”撞到了一个物体，那么即使你会使用一些可怕的操作系统功能（IsValidPtr 或其他），你仍然会陷入错误并且不会很快失败。

开始使用空指针来发出这种信号，并告诉库的用户，如果他们倾向于不小心传递无效指针，他们不应该使用指针，认真的:)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-05-12T17:22:16.750

以下是 Linux 下 C 程序自省其运行的内存状态的三种简单方法，以及为什么该问题在某些情况下具有适当的复杂答案。

1.  在调用 getpagesize() 并将指针舍入到页面边界之后，您可以调用 mincore() 来确定页面是否有效以及它是否恰好是进程工作集的一部分。请注意，这需要一些内核资源，因此您应该对其进行基准测试并确定在您的 api 中调用此函数是否真的合适。如果您的 api 将要处理中断，或从串行端口读取到内存，调用它以避免不可预知的行为是合适的。
2.  在调用 stat() 确定是否有 /proc/self 目录可用后，您可以打开并阅读 /proc/self/maps 以查找有关指针所在区域的信息。研究过程信息伪文件系统 proc 的手册页。显然，这是相对昂贵的，但您可能能够摆脱将解析结果缓存到一个数组中，您可以使用二进制搜索有效地查找。还要考虑 /proc/self/smaps。如果您的 api 用于高性能计算，那么程序将想了解 /proc/self/numa 的信息，该文件记录在 numa 的手册页下，非统一内存架构。
3.  get_mempolicy(MPOL_F_ADDR) 调用适用于高性能计算 api 工作，其中有多个执行线程，并且您正在管理您的工作以对非均匀内存具有亲和力，因为它与 cpu 内核和套接字资源相关。这样的 api 当然也会告诉你指针是否有效。

在 Microsoft Windows 下，有记录在 Process Status API 下的函数 QueryWorkingSetEx（也在 NUMA API 中）。作为复杂的 NUMA API 编程的必然结果，此功能还可以让您进行简单的“测试指针的有效性 (C/C++)”工作，因此它在至少 15 年内不太可能被弃用。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2009-02-15T16:05:30.387

防止由于调用者发送无效指针而导致的崩溃是产生难以发现的静默错误的好方法。

对于使用你的 API 的程序员来说，通过崩溃而不是隐藏它来获得一个明确的信息，表明他的代码是伪造的不是更好吗？

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-02-15T15:55:01.800

在 Win32/64 上有一种方法可以做到这一点。尝试读取指针并捕获将在失败时引发的生成的 SEH 异常。如果它没有抛出，那么它是一个有效的指针。

这种方法的问题在于它只返回您是否可以从指针中读取数据。它不保证类型安全或任何数量的其他不变量。一般来说，除了说“是的，我可以在现在已经过去的时间读取内存中的那个特定位置”之外，这种方法几乎没有什么用处。

简而言之，不要这样做；）

Raymond Chen 有一篇关于这个主题的博文：http: [//blogs.msdn.com/oldnewthing/archive/2007/06/25/3507294.aspx](http://blogs.msdn.com/oldnewthing/archive/2007/06/25/3507294.aspx)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2009-02-15T15:48:27.993

AFAIK没有办法。您应该尝试通过在释放内存后始终将指针设置为 NULL 来避免这种情况。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-05-29T22:34:34.730

在 Unix 上，您应该能够利用内核系统调用来进行指针检查并返回 EFAULT，例如：

```
#include <unistd.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>
#include <stdbool.h>

bool isPointerBad( void * p )
{
   int fh = open( p, 0, 0 );
   int e = errno;

   if ( -1 == fh && e == EFAULT )
   {
      printf( "bad pointer: %p\n", p );
      return true;
   }
   else if ( fh != -1 )
   {
      close( fh );
   }

   printf( "good pointer: %p\n", p );
   return false;
}

int main()
{
   int good = 4;
   isPointerBad( (void *)3 );
   isPointerBad( &good );
   isPointerBad( "/tmp/blah" );

   return 0;
} 
```

返回：

```
bad pointer: 0x3
good pointer: 0x7fff375fd49c
good pointer: 0x400793 
```

可能有比 open() [也许是访问] 更好的系统调用，因为这有可能导致实际的文件创建代码路径，以及随后的关闭要求。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-02-15T18:37:51.360

关于这个线程中的答案有点：

> 适用于 Windows 的 IsBadReadPtr()、IsBadWritePtr()、IsBadCodePtr()、IsBadStringPtr()。

我的建议是远离他们，有人已经发布了这个：http: [//blogs.msdn.com/oldnewthing/archive/2007/06/25/3507294.aspx](http://blogs.msdn.com/oldnewthing/archive/2007/06/25/3507294.aspx)

关于同一主题和同一作者（我认为）的另一篇文章是这个：http: [//blogs.msdn.com/oldnewthing/archive/2006/09/27/773741.aspx](http://blogs.msdn.com/oldnewthing/archive/2006/09/27/773741.aspx)（“IsBadXxxPtr 真的应该被称为 CrashProgramRandomly ”）。

如果你的 API 的用户发送了错误的数据，让它崩溃。如果问题是传递的数据直到以后才使用（这使得查找原因变得更加困难），添加一个调试模式，在输入时记录字符串等。如果它们不好，那将是显而易见的（并且可能会崩溃）。如果它经常发生，可能值得将您的 API 移出进程并让它们使 API 进程而不是主进程崩溃。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-02-15T18:03:16.593

首先，我认为保护自己免受故意造成崩溃的呼叫者的影响没有任何意义。他们可以通过自己尝试通过无效指针进行访问来轻松做到这一点。还有很多其他方法——它们可能只是覆盖你的内存或堆栈。如果您需要防止此类事情发生，那么您需要使用套接字或其他 IPC 在单独的进程中运行以进行通信。

我们编写了很多允许合作伙伴/客户/用户扩展功能的软件。不可避免地，任何错误都会首先向我们报告，因此能够轻松地表明问题出在插件代码中是很有用的。此外，还有安全问题，一些用户比其他用户更受信任。

我们根据性能/吞吐量要求和可信度使用多种不同的方法。从最喜欢的：

*   使用套接字分离进程（通常将数据作为文本传递）。

*   使用共享内存分离进程（如果要传递大量数据）。

*   同一进程通过消息队列分离线程（如果是频繁的短消息）。

*   同一个进程分离线程所有传递从内存池分配的数据。

*   通过直接过程调用的相同进程 - 所有传递的数据都是从内存池分配的。

在处理第三方软件时，我们绝不会求助于您尝试做的事情——尤其是当我们将插件/库作为二进制而不是源代码提供时。

在大多数情况下，内存池的使用非常容易，并且不一定是低效的。如果您首先分配数据，那么根据您分配的值检查指针是微不足道的。您还可以存储分配的长度并在数据之前和之后添加“魔术”值，以检查有效的数据类型和数据溢出。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-04-12T13:45:52.650

我对你的问题非常同情，因为我自己也处于几乎相同的位置。我很欣赏很多回复所说的话，它们是正确的——提供指针的例程*应该*提供一个有效的指针。就我而言，他们可能破坏了指针几乎是不可想象的——但如果他们*成功了*，那将是我的软件崩溃，而我会受到指责:-(

我的要求不是我在出现分段错误后继续 - 那会很危险 - 我只想在终止之前报告客户发生的事情，以便他们可以修复他们的代码而不是责怪我！

这就是我发现的方法（在 Windows 上）：[http ://www.cplusplus.com/reference/clibrary/csignal/signal/](http://www.cplusplus.com/reference/clibrary/csignal/signal/)

给出一个概要：

```
#include <signal.h>

using namespace std;

void terminate(int param)
/// Function executed if a segmentation fault is encountered during the cast to an instance.
{
  cerr << "\nThe function received a corrupted reference - please check the user-supplied  dll.\n";
  cerr << "Terminating program...\n";
  exit(1);
}

...
void MyFunction()
{
    void (*previous_sigsegv_function)(int);
    previous_sigsegv_function = signal(SIGSEGV, terminate);

    <-- insert risky stuff here -->

    signal(SIGSEGV, previous_sigsegv_function);
} 
```

现在这*似乎*表现得如我所愿（它打印错误消息，然后终止程序） - 但如果有人能发现缺陷，请告诉我！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-02-15T15:57:59.030

C++ 中没有规定测试指针的有效性作为一般情况。显然可以假设 NULL (0x00000000) 不好，并且各种编译器和库喜欢在这里和那里使用“特殊值”来简化调试（例如，如果我在 Visual Studio 中看到指针显示为 0xCECECECE 我知道我做错了什么）但事实是，由于指针只是内存中的索引，因此仅通过查看指针来判断它是否是“正确的”索引几乎是不可能的。

您可以使用 dynamic_cast 和 RTTI 执行各种技巧，例如确保指向的对象是您想要的类型，但它们都要求您首先指向有效的对象。

如果您想确保您的程序可以检测到“无效”指针，那么我的建议是：在创建时立即将您声明的每个指针设置为 NULL 或有效地址，并在释放它指向的内存后立即将其设置为 NULL。如果您对这种做法很认真，那么检查 NULL 就是您所需要的。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-02-15T16:09:36.380

在使用前后将指针设置为 NULL 是一种很好的技术。如果您在类中管理指针，例如（字符串），这在 C++ 中很容易做到：

```
class SomeClass
{
public:
    SomeClass();
    ~SomeClass();

    void SetText( const char *text);
    char *GetText() const { return MyText; }
    void Clear();

private:
    char * MyText;
};

SomeClass::SomeClass()
{
    MyText = NULL;
}

SomeClass::~SomeClass()
{
    Clear();
}

void SomeClass::Clear()
{
    if (MyText)
        free( MyText);

    MyText = NULL;
}

void SomeClass::Settext( const char *text)
{
    Clear();

    MyText = malloc( strlen(text));

    if (MyText)
        strcpy( MyText, text);
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-03-25T16:24:51.607

确实，可以在特定情况下做一些事情：例如，如果你想检查一个字符串指针 string 是否有效，使用 write(fd, buf, szie) 系统调用可以帮助你做到这一点：让 fd 是临时的文件描述符您为测试创建的文件，并且 buf 指向您正在测试的字符串，如果指针无效，write() 将返回 -1 并且 errno 设置为 EFAULT，这表明 buf 在您可访问的地址空间之外。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-02-15T15:49:51.670

没有任何可移植的方法可以做到这一点，并且为特定平台做这件事可能是困难和不可能之间的任何地方。在任何情况下，您都不应该编写依赖于这种检查的代码——首先不要让指针采用无效值。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-02-15T16:24:02.540

一般来说，这是不可能的。这是一个特别讨厌的案例：

```
struct Point2d {
    int x;
    int y;
};

struct Point3d {
    int x;
    int y;
    int z;
};

void dump(Point3 *p)
{
    printf("[%d %d %d]\n", p->x, p->y, p->z);
}

Point2d points[2] = { {0, 1}, {2, 3} };
Point3d *p3 = reinterpret_cast<Point3d *>(&points[0]);
dump(p3); 
```

在许多平台上，这将打印出来：

```
[0 1 2] 
```

您正在强制运行时系统错误地解释内存位，但在这种情况下它不会崩溃，因为这些位都是有意义的。`struct inaddr`这是语言设计的一部分（用, `inaddr_in`,来查看 C 风格的多态性`inaddr_in6`），因此您无法在任何平台上可靠地防范它。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-02-16T08:20:04.893

在公共 API 中接受任意指针作为输入参数并不是一个很好的策略。最好有像整数、字符串或结构这样的“纯数据”类型（当然，我的意思是内部带有纯数据的经典结构；官方上任何东西都可以是结构）。

为什么？好吧，因为正如其他人所说，没有标准的方法可以知道您是否获得了有效的指针或指向垃圾的指针。

但有时你别无选择——你的 API 必须接受一个指针。

在这些情况下，调用者有责任传递一个好的指针。NULL 可以被接受为一个值，但不能作为一个指向垃圾的指针。

你能以任何方式仔细检查吗？好吧，在这种情况下，我所做的是为指针指向的类型定义一个不变量，并在获得它时调用它（在调试模式下）。至少如果不变量失败（或崩溃），您知道您传递了一个错误的值。

```
// API that does not allow NULL
void PublicApiFunction1(Person* in_person)
{
  assert(in_person != NULL);
  assert(in_person->Invariant());

  // Actual code...
}

// API that allows NULL
void PublicApiFunction2(Person* in_person)
{
  assert(in_person == NULL || in_person->Invariant());

  // Actual code (must keep in mind that in_person may be NULL)
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-02-16T08:48:44.047

正如其他人所说，您无法可靠地检测到无效指针。考虑一些无效指针可能采用的形式：

你可以有一个空指针。那是您可以轻松检查并做一些事情的一个。

您可以有一个指向有效内存之外某处的指针。有效内存的构成取决于系统的运行时环境如何设置地址空间。在 Unix 系统上，它通常是一个虚拟地址空间，从 0 开始，一直到一些兆字节。在嵌入式系统上，它可能非常小。无论如何，它可能不会从 0 开始。如果您的应用程序恰好在超级用户模式或等效模式下运行，那么您的指针可能会引用一个真实地址，该地址可能会或可能不会使用真实内存进行备份。

您可以有一个指向有效内存内某处的指针，甚至在您的数据段、bss、堆栈或堆内，但不指向有效对象。它的一个变体是一个指针，用于在对象发生不良事件之前指向有效对象。这种情况下的坏事包括释放、内存损坏或指针损坏。

您可能有一个完全非法的指针，例如与被引用事物的非法对齐的指针。

当您考虑基于段/偏移量的架构和其他奇怪的指针实现时，问题会变得更糟。这类事情通常通过良好的编译器和明智地使用类型对开发人员隐藏，但如果你想揭开面纱并试图智取操作系统和编译器开发人员，你可以，但没有一种通用的方法这样做可以解决您可能遇到的所有问题。

您能做的最好的事情就是允许崩溃并提供一些好的诊断信息。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2012-04-11T08:17:34.153

本文[MEM10-C。定义和使用指针验证功能](https://wiki.sei.cmu.edu/confluence/display/c/MEM10-C.+Define+and+use+a+pointer+validation+function)表示可以在某种程度上进行检查，尤其是在 Linux OS 下。

链接中描述的方法是跟踪 malloc 返回的最高内存地址，并添加一个函数来测试是否有人尝试使用大于该值的指针。它可能是有限的我们。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-03-11T23:03:22.813

令人难以置信的是，您可以在上面的文章中阅读到多少误导性信息...

甚至在 microsoft msdn 文档中，IsBadPtr 也声称被禁止。哦，好吧 - 我更喜欢工作应用程序而不是崩溃。即使长期工作可能无法正常工作（只要最终用户可以继续使用应用程序）。

通过谷歌搜索，我没有找到任何有用的 windows 示例 - 找到了 32 位应用程序的解决方案，

[http://www.codeproject.com/script/Content/ViewAssociatedFile.aspx?rzp=%2FKB%2Fsystem%2Fdetect-driver%2F%2FDetectDriverSrc.zip&zep=DetectDriverSrc%2FDetectDriver%2Fsrc%2FdrvCppLib%2Frtti.cpp&obid=58895&obtid=2&ovid =2](http://www.codeproject.com/script/Content/ViewAssociatedFile.aspx?rzp=%2FKB%2Fsystem%2Fdetect-driver%2F%2FDetectDriverSrc.zip&zep=DetectDriverSrc%2FDetectDriver%2Fsrc%2FdrvCppLib%2Frtti.cpp&obid=58895&obtid=2&ovid=2)

但我还需要支持 64 位应用程序，所以这个解决方案对我不起作用。

但我已经收获了 wine 的源代码，并设法编写了类似的代码，这些代码也适用于 64 位应用程序——在此处附加代码：

```
#include <typeinfo.h>   

typedef void (*v_table_ptr)();   

typedef struct _cpp_object   
{   
    v_table_ptr*    vtable;   
} cpp_object;   

#ifndef _WIN64
typedef struct _rtti_object_locator
{
    unsigned int signature;
    int base_class_offset;
    unsigned int flags;
    const type_info *type_descriptor;
    //const rtti_object_hierarchy *type_hierarchy;
} rtti_object_locator;
#else

typedef struct
{
    unsigned int signature;
    int base_class_offset;
    unsigned int flags;
    unsigned int type_descriptor;
    unsigned int type_hierarchy;
    unsigned int object_locator;
} rtti_object_locator;  

#endif

/* Get type info from an object (internal) */  
static const rtti_object_locator* RTTI_GetObjectLocator(void* inptr)  
{   
    cpp_object* cppobj = (cpp_object*) inptr;  
    const rtti_object_locator* obj_locator = 0;   

    if (!IsBadReadPtr(cppobj, sizeof(void*)) &&   
        !IsBadReadPtr(cppobj->vtable - 1, sizeof(void*)) &&   
        !IsBadReadPtr((void*)cppobj->vtable[-1], sizeof(rtti_object_locator)))  
    {  
        obj_locator = (rtti_object_locator*) cppobj->vtable[-1];  
    }  

    return obj_locator;  
} 
```

以下代码可以检测指针是否有效，您可能需要添加一些 NULL 检查：

```
 CTest* t = new CTest();
    //t = (CTest*) 0;
    //t = (CTest*) 0x12345678;

    const rtti_object_locator* ptr = RTTI_GetObjectLocator(t);  

#ifdef _WIN64
    char *base = ptr->signature == 0 ? (char*)RtlPcToFileHeader((void*)ptr, (void**)&base) : (char*)ptr - ptr->object_locator;
    const type_info *td = (const type_info*)(base + ptr->type_descriptor);
#else
    const type_info *td = ptr->type_descriptor;
#endif
    const char* n =td->name(); 
```

这从指针获取类名 - 我认为它应该足以满足您的需求。

我仍然担心的一件事是指针检查的性能——在上面的代码片段中，已经进行了 3-4 个 API 调用——对于时间关键的应用程序来说可能是多余的。

如果有人可以测量指针检查的开销，例如与 C#/托管 C++ 调用相比，那就太好了。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-09-01T20:26:17.247

以下在 Windows 中确实有效（之前有人建议过）：

```
 static void copy(void * target, const void* source, int size)
 {
     __try
     {
         CopyMemory(target, source, size);
     }
     __except(EXCEPTION_EXECUTE_HANDLER)
     {
         doSomething(--whatever--);
     }
 } 
```

该函数必须是某个类的静态、独立或静态方法。要测试只读，请复制本地缓冲区中的数据。要在不修改内容的情况下测试写入，请将它们重写。您只能测试第一个/最后一个地址。如果指针无效，控制权将传递给'doSomething'，然后在括号外。只是不要使用任何需要析构函数的东西，比如 CString。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-06-28T14:17:47.407

在 Windows 上，我使用以下代码：

```
void * G_pPointer = NULL;
const char * G_szPointerName = NULL;
void CheckPointerIternal()
{
    char cTest = *((char *)G_pPointer);
}
bool CheckPointerIternalExt()
{
    bool bRet = false;

    __try
    {
        CheckPointerIternal();
        bRet = true;
    }
    __except (EXCEPTION_EXECUTE_HANDLER)
    {
    }

    return  bRet;
}
void CheckPointer(void * A_pPointer, const char * A_szPointerName)
{
    G_pPointer = A_pPointer;
    G_szPointerName = A_szPointerName;
    if (!CheckPointerIternalExt())
        throw std::runtime_error("Invalid pointer " + std::string(G_szPointerName) + "!");
} 
```

用法：

```
unsigned long * pTest = (unsigned long *) 0x12345;
CheckPointer(pTest, "pTest"); //throws exception 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-06-19T22:52:39.243

Peeter Joos 的回答非常好。这是一种“官方”的方法：

```
#include <sys/mman.h>
#include <stdbool.h>
#include <unistd.h>

bool is_pointer_valid(void *p) {
    /* get the page size */
    size_t page_size = sysconf(_SC_PAGESIZE);
    /* find the address of the page that contains p */
    void *base = (void *)((((size_t)p) / page_size) * page_size);
    /* call msync, if it returns non-zero, return false */
    int ret = msync(base, page_size, MS_ASYNC) != -1;
    return ret ? ret : errno != ENOMEM;
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-02-15T15:53:28.340

适用于 Windows 的 IsBadReadPtr()、IsBadWritePtr()、IsBadCodePtr()、IsBadStringPtr()。
这些花费的时间与块的长度成正比，因此为了进行完整性检查，我只检查起始地址。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-02-15T16:12:49.867

我已经看到各种库使用一些方法来检查未引用的内存等。我相信他们只是“覆盖”了内存分配和释放方法（malloc/free），它有一些跟踪指针的逻辑。我想这对于您的用例来说有点过分了，但这将是一种方法。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-02-15T16:26:34.470

从技术上讲，您可以覆盖 operator **new**（和**delete**）并收集有关所有已分配内存的信息，因此您可以有一种方法来检查堆内存是否有效。但：

1.  您仍然需要一种方法来检查指针是否在堆栈上分配（）

2.  您将需要定义什么是“有效”指针：

a) 该地址上的内存已分配

b）该地址的内存是对象的**起始**地址（例如，地址不在大数组的中间）

c) 该地址的内存是**预期**类型对象的**起始地址**

 ****底线**：有问题的方法不是 C++ 方法，您需要定义一些规则以确保函数接收有效指针。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-02-16T01:02:03.013

没有办法在 C++ 中进行检查。如果其他代码传递给你一个无效的指针，你应该怎么做？**你应该崩溃。**为什么？查看此链接：http: [//blogs.msdn.com/oldnewthing/archive/2006/09/27/773741.aspx](http://blogs.msdn.com/oldnewthing/archive/2006/09/27/773741.aspx)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-02-18T20:01:38.170

已接受答案的附录：

假设您的指针只能包含三个值——0、1 和 -1，其中 1 表示有效指针，-1 表示无效指针，0 表示另一个无效指针。您的指针**为**NULL 的概率是多少，所有值的可能性相同？1/3。现在，取出有效案例，因此对于每个无效案例，您都有 50:50 的比率来捕获所有错误。看起来不错吧？将此缩放为 4 字节指针。有 2^32 或 4294967294 个可能的值。其中，只有一个值是正确的，一个是 NULL，还有 4294967292 个其他无效案例。重新计算：您对 (4294967292+ 1) 个无效案例中的 1 个进行了测试。对于大多数实际目的，概率为 2.xe-10 或 0。这就是 NULL 检查的徒劳。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2009-03-09T17:03:19.363

你知道，一个能够做到这一点的新驱动程序（至少在 Linux 上）可能不会那么难写。

另一方面，像这样构建程序是愚蠢的。除非你对这种东西有一些非常具体和单一的用途，否则我不会推荐它。如果你构建了一个加载了常量指针有效性检查的大型应用程序，它可能会非常慢。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2014-03-17T05:59:16.293

> 您应该避免使用这些方法，因为它们不起作用。blogs.msdn.com/oldnewthing/archive/2006/09/27/773741.aspx – JaredPar 2009 年 2 月 15 日 16:02

如果它们不起作用 - 下一次 Windows 更新会修复它吗？如果它们在概念级别上不起作用 - 功能可能会完全从 Windows api 中删除。

MSDN 文档声称它们被禁止，其原因可能是进一步设计应用程序的缺陷（例如，通常你不应该默默地吃无效指针 - 如果你当然负责整个应用程序的设计），以及性能/时间的指针检查。

但是您不应该因为某些博客而声称它们不起作用。在我的测试应用程序中，我已经验证它们确实有效。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2014-04-12T06:32:47.930

这些链接可能会有所帮助

_CrtIsValidPointer 验证指定的内存范围对读写是否有效（仅限调试版本）。 [http://msdn.microsoft.com/en-us/library/0w1ekd5e.aspx](http://msdn.microsoft.com/en-us/library/0w1ekd5e.aspx)

_CrtCheckMemory 确认调试堆中分配的内存块的完整性（仅限调试版本）。 [http://msdn.microsoft.com/en-us/library/e73x0s4b.aspx](http://msdn.microsoft.com/en-us/library/e73x0s4b.aspx)

# architecture - 如何处理需要在数据库中查找数据的值对象

> ID：551071
> 
> 赞同：5
> 
> 时间：2009-02-15T15:46:49.463
> 
> 标签：architecture, domain-driven-design

我刚开始研究领域驱动设计，很可能我对实体/价值划分的理解是错误的，所以如果是这样，请告诉我。

据我了解，由于其身份完全由其属性定义，因此 Address 是典型的值对象。据我了解，这意味着不应该有单独的存储库或地址的数据访问对象。

这给我带来了两难境地，因为在我的例子中，地址包含一个国家，其中一个国家有一个名称和一个国家代码，并且应该从数据库中加载国家代码列表。

我的问题是，我该如何设计这个？我希望人们能够使用 new 运算符创建地址，但我不想为国家/地区创建数据访问对象，如果我这样做了，我当然不想在地址对象中引用它。

我有一些想法，但我想听听任何人可能有的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T16:18:27.063

DDD 中没有任何内容阻止值对象持有对实体的引用。因此，您的地址将引用国家实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T16:03:03.107

首先让我说，我对领域驱动设计的唯一经验是几分钟前阅读了 Wikipedia 文章。话虽如此，以下是我对您的问题的看法：

我同意地址对象不应该需要任何数据访问对象，那么处理国家代码并根据用户输入构建地址对象的地址工厂怎么样？这样，工厂将保存数据访问对象，并且您的地址对象可以保持值唯一。

如果根据 DDD 这不是犹太洁食，请告诉我。我很想知道社区的其他人会想出什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-17T13:46:45.117

采用 DDD 方式，您会首先考虑应用程序的需求，然后从那里构建模型。

您不必担心 Country 仅在 Address 中使用。使其成为实体本身并没有错。主要问题是：您认为国家是具有身份的事物，还是仅由属性定义？如果您有两个具有相同名称（和相同国家代码）的国家/地区，您能看出有什么区别吗？

也许您应该考虑将 Country 设为值对象。它不会阻止您从数据库中加载一些国家/地区的存储库列表，或根据其代码加载国家/地区。在实施方面，您的存储库仍然可以从数据库中加载国家列表一次并将其缓存在内存中。或者它可以对其进行硬编码，或者从 XML 中读取。您的域模型不会在意。

您可能会在 Address 上创建一个工厂方法，该方法接受国家代码以及其他参数。然后它将使用存储库创建一个 Country 实例并返回一个正确的 Address 对象。

考虑聚合也可以产生一些关于存储库布局的想法。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T16:02:37.177

> 这给我带来了两难境地，因为在我的例子中，地址包含一个国家，其中一个国家有一个名称和一个国家代码，并且应该从数据库中加载国家代码列表。

Address 对象不会将国家列表作为其属性。相反，它将具有国家对象的单个实例。表示层将提供 Country 对象列表，可能位于下拉列表中。在加载一个特定地址时，您可以将下拉列表的值设置为与国家对象的国家 ID 相等，该国家对象是地址对象的一个​​属性。换句话说：

myDropDown 的（包含 Country 对象列表）选定对象值 = address.Country 或 myDropDown 的键值 = address.Country.ID

现在，要填充表示层，您的数据访问层应该提供一个函数，该函数返回 Country 对象的原始列表。在 .NET 方式中，它类似于：

```
Namespace Dal

    Public NotInheritable Class Countries
    ...
    Public Shared Function Read(ByVal countryId as Integer) As BusinessObjects.Country
    ...
    Public Shared Function ReadList() As List(Of BusinessObjects.Country)
    ... 
```

# windows - 如何删除windows中的长路径。

> ID：551072
> 
> 赞同：63
> 
> 时间：2009-02-15T15:48:06.963
> 
> 标签：windows, eclipse, path

将项目导入 Eclipse 时，它​​以某种方式开始创建目录的递归版本。

现在，当我尝试删除任何内容时，我收到消息“您指定的文件名太长”。

我无法从命令外壳中删除它。我无法从资源管理器中删除它。我不能用它做任何事情。我不知道 Eclipse 创建了多少副本。Eclipse 运行了大约一分钟，然后我意识到出了点问题，我取消了操作。

我可以得到顶级文件夹的属性，它说它包含 497 个文件夹。

问题1：如何在Windows中删除所有这些东西？

问题2：日食到底在想什么？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2010-07-23T16:36:04.610

```
robocopy empty_dir base_nested_dir /purge 
```

示例：如果您的文件夹路径过长，例如：

`D:\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles\BackupFolder\Copy\MyFiles`

按照这些说明删除它。

1.  创建一个空文件夹，例如`C:\Users\Name\Desktop\temp`.
2.  打开命令提示符窗口。
3.  类型`robocopy C:\Users\Name\Desktop\temp D:\BackupFolder /purge`

注意：如果步骤 3 中任一路径有空格，则路径必须用引号引起来。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2015-01-22T15:39:01.523

如果您对命令行不满意，7Zip 是终极解决方案。

1.  打开 7Zip 文件管理器
2.  导航到您的文件
3.  Shift-删除您的文件

干杯!

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-02-15T16:20:24.123

我在 Eclipse 中遇到了与此类似的问题：尝试使用 Subclipse 导入项目，它生成了一组深度嵌套的目录，我无法删除这些目录。

我做了几件事，首先我将目录名称编辑到尽可能短的长度（实际上我认为这毫无意义）。其次，我尽可能深入地遍历目录树，然后将分支剪切并粘贴出来（这样可以删除原始分支），然后重复该过程。

@Charlie 和 @Tomalek 的解决方案看起来可能更优雅。我不打算重复这种经历来找出答案。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-02-15T15:55:27.150

至于Q1）

使用 subst 对路径进行短路：

```
subst Q: C:\very\long\path\created\by\eclipse
Q:
del *.* 
```

至于Q2）

长路径在其他操作系统中不是什么问题，而且有 Windows API 函数*可以*处理超过 255 个字符的路径，所以我猜他们就这么做了。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-02-15T15:57:56.877

如果您需要处理长于 的路径`MAX_PATH`，则必须使用 Unicode 版本的 Windows 文件 API（例如[`DeleteFileW`](http://msdn.microsoft.com/en-us/library/aa363915(VS.85).aspx)）并使用 \\?\ 前缀。您可以使用这些 API 编写一个简短的程序来枚举这些目录并删除它们。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2010-10-08T04:17:40.930

修复简单且免费！根本不需要重命名文件夹。

1.  免费下载[Cygwin](http://www.cygwin.com/)。

2.  使用命令`rm -f -r <folder-name>`并等待片刻。

我有一个大小为 1.5 GB 的文件夹，里面有许多内部文件夹，而且效果很好！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2011-08-24T19:45:40.823

[maxaha1](http://forum.sysinternals.com/very-deeply-nested-directories-cannot-be-deleted_topic16191.html#79622)在此 Windows Sysinternals 论坛帖子中提到的一种方法有效。

> 我建议你自上而下地工作。只要您留在同一个卷（共享）内，您通常可以将上层目录拖到新的父目录中，而无需考虑被拖曳的目录的内容（即，它可能存在的长度/递归问题）。因此，您将一个目录可能在您的问题路径下 4 或 5 级，然后将其拖到根目录。然后删除现在只包含几个级别的原始路径。理想情况下，尽量保持最长路径少于 250 个字符（包括文件名）。我目前正在做系统迁移，我们有一些用户有 340+ 字符路径，如果没有这种方法，它们不会复制。我尝试过 subst、递归网络使用、递归脚本等。不幸的是，用户似乎能够创造出让最好的编码员、管理员等感到困惑的东西。

创建新文件夹，然后每次从顶部向下拖放几个文件夹（并删除它们），直到将其全部清理干净。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2010-02-19T19:49:16.343

我在使用 eclipse 时遇到了同样的问题..！创建了无数个嵌套文件夹，它占用了超过 500MB 的空间！！！！

我在Windows中尝试了很多东西，但没有任何效果..

最后我刚刚使用 ubuntu 重新启动并删除了那个可怕的文件夹.. 就像那样.. ubuntu 似乎没有像 windows 那样基于文件路径长度的任何此类访问限制.. 让生活变得更轻松.. :)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-04-11T22:24:09.120

前三个响应显然是垃圾邮件（用于付费软件演示）。如果您想要免费的一键式解决方案，请参见此处：

[http://www.osmstudios.com/Display.asp?Page=pathtoolong](http://www.osmstudios.com/Display.asp?Page=pathtoolong)

这可能使用了该线程中的 3 行 Java。

-调频

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2011-02-08T22:01:20.173

以编程方式，您可以使用[DeleteFileW](http://msdn.microsoft.com/en-us/library/aa363915%28VS.85%29.aspx)和`RemoveDirectoryW`,删除`L"\\?\"`文件名。请注意，您必须使用 W 版本而不是 A 版本的 API。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-08-03T17:59:56.823

上面有人已经发布了对“rimraf”的引用，但让我添加更多细节。如果您的系统上安装了 Node，那么只需使用[rimraf](https://github.com/isaacs/rimraf)模块（它可以安装在您的路径上）。这是迄今为止在最重要的情况下删除 Windows 系统上的内容的最简单方法。实际上，rimraf 并不是很棒，而是因为 Node.js 在设备内核级别处理文件系统。如果您查看 Node 的“fs”模块源代码，您会看到类似这样的[代码](https://github.com/joyent/node/blob/c146855f06f7c6ed41b53329a5d814e89b6eaa15/deps/uv/src/win/fs.c#L726)。从本质上讲，Node.js 对文件系统的处理甚至比 Git for Windows 都好得多，即在 Windows 上使用 git clean -fdx 存在一个错误，它不会删除具有长路径名的文件夹。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-08-08T08:05:16.893

`MIR`（镜像完整的目录树）选项在 Windows 和 Windows 网络路径中也适用于我..

> `robocopy empty_dir <foldertobedeleted> /MIR`

*   只需创建一个空目录，并告诉 robocopy 清除目标目录中不在空目录中的所有内容

输出会是这样的..

[![在此处输入图像描述](https://i.stack.imgur.com/C1Jm1.png)](https://i.stack.imgur.com/C1Jm1.png)>

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-02-09T06:40:30.953

哈哈，几年前我也遇到过类似的问题。由于一个错误，我创建了文件夹的无限嵌套，直到文件名变得太长。

IIRC，我通过浏览文件夹结构以编程方式删除了它们。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-12-13T07:55:09.693

我对这里和其他地方（robocopy、7zip、subst、可疑间谍软件）发布的任何解决方案都不满意，所以我推出了自己的小型命令行工具。

它可以递归地删除一个文件或整个目录。也许将来我会添加更多选项。

该工具称为[SuperDelete](https://github.com/marceln/SuperDelete)，您可以从[发布页面页面 GitHub](https://github.com/marceln/SuperDelete/releases)获取它。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-12-22T04:24:07.657

好的，我尝试为此寻找解决方案，并找到了 Windows 用户最简单的解决方案之一

1.  安装[Mobaxterm](http://mobaxterm.mobatek.net/)
2.  打开 mobaxterm。转到您要删除的目录（使用 cd）并运行以下命令

    rm -rf 目录名

Windows抱怨删除的所有文件夹，子文件夹现在将被删除

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-28T01:10:29.417

令人讨厌的是，在 2016 年，这仍然给我们 Windows 用户带来了一个问题，而 Linux 在几年前解决了这个问题。当它在 Java 中很容易做到时，它变得更加烦人。

我们应该使用 Change.org 请求 MS 包含此功能。不可能很难。如果他们担心向后兼容性，为什么不只使用管理员可以打开或关闭的严格模式。至少给我们警告，然后让我们无论如何都删除它。GRRRRR [/咆哮]

如果您在机器上运行 Java，您可能会发现此代码很有帮助：

```
import java.io.File;

public class Delong {

    public static void main(String[] args) {
        File file = new File("F:\\YourDirectory\\YourFile");
        boolean result = deleteDirectory(file);

        if(result)
            System.out.println("Deleted");
        else
            System.out.println("Failed");
    }//end main

    /**
     * Force deletion of directory
     * @param path The path you want to delete
     * @return True if it worked;
     */
    static public boolean deleteDirectory(File path) {
        if (path.exists()) {
            File[] files = path.listFiles();
            for (int x = 0; x < files.length; x++) {
                if (files[x].isDirectory()) 
                    deleteDirectory(files[x]);
                 else 
                    files[x].delete();
            }//end for
        }///end if
        return (path.delete());
    }//endDeleteDirectory

}//end class 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-01-14T10:31:09.637

我遇到了类似的问题，使用 7-zip（第三方软件）帮助了我。

*   安装 7-zip [https://www.7-zip.org/](https://www.7-zip.org/)
*   打开“7-zip 文件管理器”
*   使用它，导航到您的文件夹并将您要删除的文件/文件夹的名称更改为一个简单的名称。
*   使用 Shift + Del 删除文件/文件夹（这可能会让您避免在回收站遇到同样的问题，这可能会再次失败）

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2014-11-13T08:55:34.947

您可以将“Cygwin”与命令“rm --force --recursive PATH”或简称“rm -fr PATH”一起使用。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2016-10-19T10:40:22.233

如果您已`git`在系统上安装，那么删除文件夹及其所有内容的直接方法是打开一个`gitbash`窗口，然后运行此命令。

`$ rm -rf DeleteFolderName`

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2009-02-15T15:56:03.420

尝试使用[解锁](http://www.emptyloop.com/unlocker/)器。它用于杀死持有文件锁的进程，但我认为它可以像你一样强制删除 f-ed 文件。

# .net - 以编程方式修剪 MP3

> ID：551074
> 
> 赞同：1
> 
> 时间：2009-02-15T15:48:30.223
> 
> 标签：.net, audio, mp3, utilities

以编程方式修剪 mp3 文件的最佳方法是什么。例如，假设我想摆脱前 2 分钟或最后 2 分钟或两者兼而有之。有没有从.NET 执行此操作的好方法？还是 .NET 调用命令行工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-17T10:16:52.860

修剪 MP3 文件有两种方法：

首先，转换为 WAV，修剪掉不需要的样本，然后再转换回 MP3。缺点是过程中会有非常轻微的质量损失。优点是您会找到大量命令行工具来为您进行转换，让您只需自己修剪 WAV 文件（[NAudio](http://www.codeplex.com/naudio)会让您这样做）。

其次，解析 MP3 帧本身，并丢弃整个帧。它没有给你那么多的粒度，但在这个过程中没有质量损失。您还需要能够理解 CBR 和 VBR MP3 帧以及 ID3 帧的格式。周围有各种 .NET 库可以读取这些，但您仍然需要自己编写大量代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T15:54:30.677

我的赌注是 CLI 工具。以此[为例](http://www.puchalla-online.de/cutmp3.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-24T19:48:04.590

我包装了 mp3 解码器库，并将其提供给 .net 开发人员。你可以在这里找到它：

[http://sourceforge.net/projects/mpg123net/](http://sourceforge.net/projects/mpg123net/)

包括将 mp3 文件转换为 PCM 和读取 ID3 标签的示例。

也许您可以使用它来查找 mp3 帧并只写出您有兴趣保留的帧？

# c++ - 此代码旨在输出 Hello World。但它输出 0x22fed8

> ID：551082
> 
> 赞同：14
> 
> 时间：2009-02-15T15:52:06.110
> 
> 标签：c++

我正在学习 C++ 中的文件处理，但这里有一个问题。我正在尝试读取文件。此代码旨在输出 Hello World。但它输出 0x22fed8。

```
#include <iostream>
#include <fstream>

using namespace std;

    int main()
    {
        fstream file;
        file.open("test.txt",ios::in|ios::out);
        file << "Hello World";
        cout << file;
        file.close();

        return 0;
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-02-15T16:26:21.053

## 简单的解决方案

正如其他人指出的那样，直接将文件打印到流中是行不通的。打印文件内容需要打开*另一个*从文件读取的流，或者将流的读取指针重新设置为开头，然后再次读取整个文件（如其他人所示）。

C++ 不会自动执行此操作，但您可以手动执行此操作（此处，打开一个新流）：

```
ifstream ifs("filename"); 
```

现在，将文件内容写入另一个流是一个微不足道的补充。而不是写入文件，只需写入文件缓冲区：

```
cout << ifs.rdbuf() << endl; 
```

就这样！无需循环逐行读取文件。

## 测试有效流

当我们讨论循环时，请注意以以下方式在循环中读取文件的代码：

```
while ( !file.eof() ) 
```

当出现读取错误时，此代码会产生无限循环。这在很多很多情况下都会发生。考虑例如文件在您阅读时被删除，或者有人移除了包含该文件的 USB 设备，或者该文件的格式错误。所有这些情况都会在这里创建一个无限循环。*永远不要*只`eof`在流中测试。

幸运的是，这个问题的解决方案也很简单。此外，它解释了为什么您的原始代码会产生如此奇怪的结果。事实上，C++ 中的流具有到类似类型的隐式*`bool`转换*。由于其他地方解释的原因（提示：[**安全布尔成语**](https://stackoverflow.com/questions/263227)），它实际上被转换为`void*`.

这使得测试流是否处于有效的、非结束状态并且可以安全地读取变得容易。因此，我们可以适当地重新构造循环：

```
while (file) … 
```

上面的代码依赖于发生的转换`void*`。任何非`null`指针都表示有效流。现在，您的代码中也会发生同样的情况：

```
cout << file; 
```

由于没有适当的重载`operator <<`，因此 C++ 会查找其他重载并找到指针的重载。所以它隐含地调用这样的东西：

```
cout << static_cast<void*>(file); 
```

## 更好的解决方案

我已经在上面解释了一个简单的工作解决方案。但是，此解决方案需要重新打开文件并再次将其读入内存。这使所需的工作加倍。我们可以通过引入一个像流一样的新类来改善这一点，并且实际上将每个输出一次发送到两个流。这样，您可以同时将数据写入文件和标准流。无需重新读取文件。

类本身非常简单。以下完整代码演示了一般原理：

```
#include <iostream>
#include <fstream>

struct sinkpair {
    sinkpair(std::ostream& a, std::ostream& b) : a(a), b(b) { }

    // Forward all ouputs to both streams.
    template <typename T>
    sinkpair& operator <<(T const& value) {
        a << value;
        b << value;
        return *this;
    }

    // Explicit overload needed for manipulators such as `endl`.
    sinkpair& operator <<(std::ostream& (*manip)(std::ostream&)) {
        a << manip;
        b << manip;
        return *this;
    }

private:
    std::ostream& a;
    std::ostream& b;
};

int main() {
    std::ofstream ofs("test.txt");
    sinkpair sp(std::cout, ofs);
    sp << "Hello" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-02-15T16:06:46.590

**编辑：**根据 mrree 的建议。

```
ifstream fin("file.txt");

if (fin.is_open() == false) {
  // error
}

string line;

while( getline(fin, line) ) {  
  cout << line;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-15T16:00:39.023

让我们检查一下线

```
cout << file; 
```

输出数字的原因是因为 fstream 的深处是一个文件指针。通过将文件传递给 cout，您实际上是在要求 fstream 的 cout。这将默认为文件的基础句柄的值。

如果要输出文件的内容，则需要将其读入并逐行输出。

```
fstream file;
file.open("test.txt",ios::in|ios::out);
file << "Hello World";
file.seekg (0, ios::beg);
while ( !file.eof() ) {
  string temp;
  file >> temp;
  cout << temp << std::eol;
}

file.close(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-15T16:01:25.230

```
#include <iostream>
#include <fstream>

int main(int, char **) 
{
  std::ifstream input("test.txt");
  char c;                                                          
  while (input >> c) {
    std::cout << c;
  }
  return 0;
} 
```

不要包含整个标准命名空间。如果您想要输入文件流，请使用 ifstream。

您要输出文件的内容，而不是文件。

如果要写入文件，则将其读回并将其发送到标准输出，

```
#include <iostream>
#include <fstream>

int main(int, char **)
{
  std::fstream file("test.txt",std::ios::in|std::ios::out);
  file << "Hello" << std::endl;
  file.seekp(std::ios::beg);
  char c;
  while (file >>c) {
      std::cout << c ;
  }
  return 0;
} 
```

康拉德有最好的答案，但请考虑高级方法：

```
#include <algorithm>
#include <iostream>
#include <fstream>
#include <iterator>

int main(int, char **)
{
  std::fstream file("test.txt",std::ios::in|std::ios::out);
  file << "Hello" << std::endl;
  file.seekp(std::ios::beg);
  std::copy(
      std::istream_iterator<char>(file),
      std::istream_iterator<char>(), 
      std::ostream_iterator<char>(std::cout)
      );
  return 0;
} 
```

# iphone - iPhone：从任何比例（变换）级别定位到图像上的一个点

> ID：551083
> 
> 赞同：1
> 
> 时间：2009-02-15T15:52:43.410
> 
> 标签：iphone, image, animation, scale

我有一个简单的 UIImageView，其图像大于显示器（600x1400）。图像以 Fit to Aspect 开始，因此 UIImgageView 报告的边界为 320x750，仍然大于显示，但没关系。我知道我想要缩放和定位到的相对于图像原始尺寸 (600x1400) 的点 (300, 150)。如果我设置一个基本动画来通过核心动画处理位置和缩放（缩放、变换），缩放就会发生，但我永远不会到达我想要的点。相反，看来我必须根据我将立即转换的比例来计算点。

我有什么明显的遗漏吗？我试过使用 convertPoint:toView，但它总是返回我刚刚给它的相同点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-16T04:00:12.383

是的，当您设置视图的原点时，您是在其父视图的坐标空间中设置它。超级视图对子视图的比例一无所知，因此如果您需要移动到相对于图像缩放大小的坐标，则需要缩放坐标以匹配。这样做的数学是微不足道的，但是您可以使用 CGPointApplyAffineTransform () 函数来获取您可能已经用来通过其变换属性缩放 UIImageView 并将其应用于坐标的 CGAffineTransform。（另外，请记住坐标 0,0 在 iPhone 的左上角。）我不确定是否将 UIImageView 设置为缩放以适应是否会通过其变换属性进行缩放，但您可以轻松构建仿射变换以匹配当前视图的比例。

但是，我建议您将图像重新采样为较小的分辨率以节省内存并提高性能。600x1400 是一个相当大的图像，可以在 iPhone 上到处乱扔。 [这篇文章](http://ofcodeandmen.poltras.com/2008/10/30/undocumented-uiimage-resizing/)有一些关于如何缩放 UIImages 的技巧。如果您将已知比例因子应用于图像，您可以简单地将该比例因子应用于所需坐标的 X 和 Y 分量。

# c# - 使用 System.Windows.Forms 破坏 Mono C# 代码

> ID：551096
> 
> 赞同：8
> 
> 时间：2009-02-15T15:58:02.383
> 
> 标签：c#, winforms, compiler-construction, mono

几个月前，我开始使用 Mono 编译一个相对简单的 C# 应用程序。

我今天尝试恢复工作，尽管有一个可执行文件证明它之前编译得很好，但它现在抱怨 System.Windows.Forms

> C:\Program Files\Mono-2.0.1\bin>mcs ../projects/test_1/test.cs
> ../projects/test_1/test.cs(2,14): error CS0234: The type or namespace name '命名空间“系统”中不存在 Windows'。您是否缺少程序集参考？
> 编译失败：1 个错误，0 个警告

我找到了一个有同样错误的人的论坛帖子，建议这样做：

> mcs Program.cs -r:System.Windows.Forms.dll -r:System.Drawing.dll -v2

但是，-v2 参数不起作用，没有它只会出现一系列其他命名空间错误（ToolStripButton 和类似的）。

我已经下载了最新的 Mono 2.2，但这仍然会产生同样的错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-15T16:02:14.557

```
gmcs Program.cs -r:System.Windows.Forms.dll -r:System.Drawing.dll 
```

`gmcs`使用 .NET 2.0 配置文件。

# nhibernate - 流畅的 NHibernate + Lucene 搜索 (NHibernate.Search)

> ID：551101
> 
> 赞同：3
> 
> 时间：2009-02-15T16:01:05.793
> 
> 标签：nhibernate, fluent-nhibernate, lucene, nhibernate.search, event-listener

我正在使用 Fluent NHibernate，我想用 Lucene 实现 NHibernate.Search，但我找不到任何关于如何使用 Fluent NHibernate 来实现的示例。似乎有两个步骤。（根据[城堡](http://using.castleproject.org/display/AR/Using+NHibernate.Search+with+ActiveRecord)）

1.  在配置中设置 Hibernate 属性：

    *   hibernate.search.default.directory_provider
    *   hibernate.search.default.indexBase
    *   hibernate.search.analyzer
2.  初始化事件侦听器以索引持久对象

    *   configuration.SetListener(ListenerType.PostUpdate, new FullTextIndexEventListener());
    *   configuration.SetListener(ListenerType.PostInsert, new FullTextIndexEventListener());
    *   configuration.SetListener(ListenerType.PostDelete, new FullTextIndexEventListener());

我想出了如何将属性添加到 Fluent NHibernate 源配置，但**我找不到设置事件侦听器的位置。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-16T10:01:45.307

如果您使用的是[Fluent Configuration](http://wiki.fluentnhibernate.org/show/FluentConfiguration) API，那么您只需要使用该`ExposeConfiguration`方法获取 NHibernate Configuration 实例。

```
Fluently.Configure()
  .Database(...)
  .Mappings(...)
  .ExposeConfiguration(cfg =>
  {
    cfg.SetListener(...);
    cfg.SetListener(...);
  })
  .BuildSessionFactory(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-14T15:04:43.930

我正在[为 Lucene 开发 Fluent API，](http://github.com/trullock/Fluent-NHibernate-Search)它消除了对属性的需求并与 FNH 很好地集成

它仍然是 Alpha 版，欢迎投稿！

# sql-server - asp.net 中 GetDate() 的问题

> ID：551111
> 
> 赞同：2
> 
> 时间：2009-02-15T16:04:12.540
> 
> 标签：sql-server, datetime

GetDate() 方法有问题。当我创建任何新用户时，在 DateTime 字段中日期正确时间未正确出现，它应该始终显示生成系统日期和时间。例如：2/6/2009 12:00 :00 AM、2/7/2009 12:00:00 AM、2/8/2009 12:00:00 AM 等。我的意思是这里的日期在改变，但系统时间没有改变。这是我的代码：

```
CREATE PROCEDURE dbo.NewUser
(
@UserName varchar(50),
@Password varchar(50),
@EmailId varchar(50),
@DateTime Date
)
AS
insert into Login(UserName,Password,EmailId,DateTime)
       values(@UserName,@Password,@EmailId,GetDate())

com.Parameters.Add("@DateTime", DateTime.Now.ToShortTimeString()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-15T16:11:46.440

我建议进行两个更改：

*   将存储过程的参数更改为，[`datetime2`](http://msdn.microsoft.com/en-us/library/bb677335.aspx)而不仅仅是[`date`](http://msdn.microsoft.com/en-us/library/bb630352.aspx). （还有其他选项，例如[`datetimeoffset`](http://msdn.microsoft.com/en-us/library/bb630289.aspx)。）日期类型*仅*存储日期，因此您没有看到任何时间也就不足为奇了 :) 如果表的架构使用`date`列，您还需要更改表.
*   调用时不要将参数值转换为字符串。利用

    ```
    com.Parameters.Add("@DateTime", DateTime.Now); 
    ```

您可能还需要考虑使用 UTC 而不是服务器上的本地时间。

编辑： splattne 绝对正确 - 通过在存储过程中调用 GetDate，您的参数值是无关紧要的。假设您实际上想要使用该参数，请将存储过程的主体更改为：

```
 insert into Login(UserName, Password, EmailId, DateTime)
   values(@UserName, @Password, @EmailId, @DateTime) 
```

仔细检查类型`Login.DateTime`！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-15T16:17:07.550

如果您在存储过程中使用 getdate()，则参数 @`DateTime`已过时。根据您的代码示例，它将被忽略。

因此，如果我正确解释了您的问题，您的问题的根源一定在其他地方。

我会检查**SQL 表中日期列的数据类型**。表声明应为：

```
UserName varchar(50)
Password varchar(50)
EmailId  varchar(50)
DateTime DateTime  /* not "Date" */ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-15T16:15:26.383

您必须使用 Sql 2008，它是新的 Date 数据类型。

> 创建过程 dbo.NewUser（@UserName varchar(50)、@Password varchar(50)、@EmailId varchar(50)、@DateTime 日期）

将 Sql 代码更改为使用 DateTime（和表，如有必要），您应该进行设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T16:20:14.437

使用 DateTime.Now 的日期

```
com.Parameters.Add("@DateTime", DateTime.Now.Date) 
```

我的建议也是使用 UTC instaed

```
com.Parameters.Add("@DateTime", DateTime.UtcNow.Date) 
```

# r - 为 BRCAPRO 癌症基因风险计算引擎编写 GUI

> ID：551113
> 
> 赞同：3
> 
> 时间：2009-02-15T16:05:33.630
> 
> 标签：r, genetics

我认为这是 Stack Overflow 上一个完全独特的问题。首先是一些背景：

我被要求在名为 BRCAPRO (brack-a-pro) 的计算引擎之上编写一个新的 GUI。BRCAPRO 基于名为 BayesMendel 的软件实现了孟德尔计算模型。BRCAPRO 计算被专门从事癌症治疗的医生和外科医生用来向患者展示：

*   根据他们的遗传和家族史被诊断出患有癌症的可能性。
*   基于不同治疗形式和/或这些治疗开始年龄的预期寿命变化。

我已经做了足够的研究，知道 BRCAPRO 公式太复杂了，无法在我自己的代码中合理地实现。

现有一个众所周知的（癌症医生）软件包，称为 CancerGene：[http](http://www8.utsouthwestern.edu/utsw/cda/dept47829/files/65844.html) ://www8.utsouthwestern.edu/utsw/cda/dept47829/files/65844.html 。这个程序很旧，在 Windows 95 上运行，包括计算引擎，用于我的客户端无法使用的几种癌症。理想情况下，我的客户希望他的应用程序在网络上运行，以便他可以轻松地与其他医生共享信息。

我的任务是使用基于 BRCAPRO 引擎的 CancerGene 应用程序，并且：

1.  复制 90% 的功能
2.  删除不必要的功能
3.  修改报告的输出
4.  如果可能，使其基于网络

现在我的问题：

有人知道如何针对 BRCAPRO 进行编码吗？我用 Google 搜索了两天，没有发现任何 API 文档或开发信息。维基百科说 BayesMendel 建模软件是用 R 编写的，但我不知道 BRCAPRO 是用什么编写的。我对 R 一无所知。

需要说明的是，我不需要修改 BRCAPRO 的行为或计算引擎。我只需要知道如何输入它，以便它返回数字给我。

-- 编辑以添加更多信息 --

我在上面的链接中下载了 CancerGene 应用程序并安装了它。有少量文档，包括 BRCAPRO 期望接收的数据格式。在不涉及不必要的细节的情况下，BRCAPRO 需要矩阵格式的数据，其中每一列代表一个遗传特征，每一行代表一个家庭成员。现在，我只需要知道从 Web/Windows 表单中收集到该矩阵后如何将其传递给 BRCAPRO 引擎。

希望 Stack Overflow 上有几个医生/开发人员！

KN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-16T09:43:18.207

根据[此链接](http://astor.som.jhmi.edu/BayesMendel/brcapro.html)：

> BRCAPRO 模型现在包含在 R 包 BayesMendel 中，用于载体概率 [原文如此] 预测。

所以看起来你从 R 中使用它。

[BayesMendel](http://astor.som.jhmi.edu/BayesMendel/BayesMendel.pdf)包的文档至少可以帮助您入门。虽然看起来你将不得不学习 R。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-25T12:31:12.673

我认为没有人能够将完整应用程序的代码放入一个小窗口中，但我会根据我的处理方式给你一些想法：

1.  [安装`R`](http://www.r-project.org/)
2.  [安装`BayesMendel`包](http://astor.som.jhmi.edu/BayesMendel/Rpackage.html)——这包括`BRCAPRO`例程
3.  [安装`RPy`](http://rpy.sourceforge.net/)——一个 Python 到 R 的桥
4.  [`RPy`基于`Python`](http://rpy.sourceforge.net/rpy_demo.html)编写的[代码](http://rpy.sourceforge.net/rpy_demo.html)，用于将您的数据导入`R`、将其转换[为数据框](http://fs6.depauw.edu:50080/~harvey/Chem%20351/PDF%20Files/Handouts/RDocs/Using%20Data%20Frames%20and%20Indexing%20in%20R.pdf)，并使用 的[组件](http://astor.som.jhmi.edu/BayesMendel/BayesMendel-manual.pdf)[分析数据框`BRCAPRO``BayesMendel`](http://astor.som.jhmi.edu/BayesMendel/BayesMendel-manual.pdf)
5.  将分析输出桥`BayesMendel`接到[`brcaResults`您编写的类](http://pytut.infogami.com/node11-baseline.html)
6.  [`brcaResults`](http://www.python.org/doc/faq/gui/)使用许多 Python GUI 框架中的任何一种[将访问器包装到](http://www.python.org/doc/faq/gui/)[GUI 中的类中](http://www.python.org/doc/faq/gui/)

这是执行此操作的一种方法的概述。

这种方法的好处是它应该很容易粘合在一起并与新`BRCAPRO`功能保持同步。

# c# - 系统启动延迟服务

> ID：551118
> 
> 赞同：1
> 
> 时间：2009-02-15T16:08:48.693
> 
> 标签：c#, vb.net, multithreading, windows-services, service

我正在使用 VB 9。

我希望我的 Windows 服务（设置为自动）中的唯一线程在 Windows 启动 5 分钟后开始工作。

但是如果用户手动重新启动服务，该线程应该在服务启动时立即开始工作。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T16:13:01.617

我不相信对这种类型的操作有明确的支持。但是您可以创建一个足够好的解决方案。

如果您的服务设置为自动启动，那么可以安全地假设第一个 StartUp 是用于系统启动。任何后续启动都是用户采取特定操作导致服务重新启动的结果。您可以使用这两项来构建解决方案。

```
Public Class MyService 
  ...
  Private m_first as Boolean = True

  Protected Overrides Sub OnStart(args as String()) 
    If m_first Then
      m_first = False
      Thread.Sleep(TimeSpan.FromMinutes(5))
    End If

    ActuallyStart()
  End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T16:20:31.457

您可以查看[System.Environment.TickCount](http://msdn.microsoft.com/en-us/library/system.environment.tickcount.aspx)来查找自 Windows 启动以来的时间，如果低于 5 分钟，则休眠剩余时间。

（请注意 TickCount 可能会溢出。如果您担心，请使用非托管[GetTickCount64 API。）](http://msdn.microsoft.com/en-us/library/ms724411(VS.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-16T02:38:25.747

为什么需要这样做？我的猜测是您正在尝试解决依赖问题，而不是正确解决问题。

如果您确实需要这样做，那么 oefe 就在正确的轨道上，尽管我建议您使用 System - System Up Time 性能计数器以避免整数溢出问题。此外，不要在 OnStart 方法中休眠，而是设置一个计时器以在适当的延迟后开始工作，或者立即启动工作线程并将延迟放在工作线程而不是 OnStart 线程中。

# macos - 乳胶中的 PostScript 文件模糊

> ID：551131
> 
> 赞同：2
> 
> 时间：2009-02-15T16:16:19.797
> 
> 标签：macos, latex, postscript

我使用 Mac OS X 的 Preview 来查看 pdf 和 PostScript 文件。然而，一些用 Latex 生成的 ps 文件看起来很模糊，例如，

[替代文字 http://img261.imageshack.us/img261/4686/picture1ky5.png](http://img261.imageshack.us/img261/4686/picture1ky5.png)

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T17:28:03.650

我也被这个困扰了，所以我刚才查了一下。[任何人：如果错误，请编辑此答案。] 正如其他人所说，

1.  它可能只是查看器（预览），打印它会很好看。然而，如果你想在屏幕上阅读它，“它会在印刷中看起来不错”并不是什么安慰。:)
2.  出现问题是因为预览在显示之前从 PS 转换为 PDF。（这种“模糊”问题在从 PS 生成的 PDF 文件中也很常见。）最好的解决方法是`pdflatex`直接使用。

如果您必须通过 PostScript，请参阅UK TeX FAQ[中 PostScript 的 PDF 质量](http://www.tex.ac.uk/cgi-bin/texfaq2html?label=dvips-pdf)，它指出了导致 PDF 模糊的几个常见原因：

*   [PDF 中错误的字体类型](http://www.tex.ac.uk/cgi-bin/texfaq2html?label=fuzzy-type3)：这显然在旧版本的 PDF 查看器中最常见（例如，在 2003 年中发布的 Adob​​e Reader 6 之前）。问题是 dvips 的默认设置是嵌入 Type 3 字体，而 PDF 查看器可能在显示位图字体方面做得不好。因此，强制 PS 文件使用 Type 1 字体，方法是将其生成为：

    ```
    dvips -Ppdf myfile -o myfile.ps 
    ```

*   [切换到 T1 时字体会变得模糊](http://www.tex.ac.uk/cgi-bin/texfaq2html?label=fuzzy-T1)：如果有`\usepackage[T1]{fontenc}`，那可能是个问题。（“请注意，字体*编码T1 与字体**格式*Type 1没有直接关系”。）有修复。

*   其他几个不太可能的原因，例如[Ghostscript 太旧](http://www.tex.ac.uk/cgi-bin/texfaq2html?label=fuzzy-gs)。

另外，请查看[testflow](http://www.tex.ac.uk/tex-archive/macros/latex/contrib/IEEEtran/testflow/)包，它是一个“诊断套件，旨在测试 LaTeX“打印工作流程”并提供许多有用的信息 [...]”。

当然，如果您不是自己生成 PS，那么简单的答案是 Preview 很糟糕，您应该改用更好的 PostScript 查看器，例如通过 MacPorts 或 Fink 安装 gv，或[从此处](http://pages.cs.wisc.edu/~ghost/macos/index.htm)安装 MacGSView ，或[MacGhostView](http://www.kiffe.com/macghostview.html)，或[（ 22 美元）后视图](http://www.metaobject.com/Products/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-15T22:05:18.337

正如其他人所说，这是源端的问题。简而言之，正在使用位图字体，这些天在 Adob​​e Reader 中渲染得很好，但在过去看起来非常糟糕；Preview 的行为过去更好，但现在比 Reader 的更差。

解决问题的方法是加载拉丁现代字体：

```
\usepackage[T1]{fontenc}
\usepackage{lmodern} 
```

（几年前的解决方案是安装 CM-Super 字体，但较新的拉丁现代字体更好。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T16:46:05.170

这可能是标准`dvips`工作方式导致的问题。如果您自己创建文件，则应确保`dvips`使用 PostScript Type 1 字体。可以在[此处](http://www.math.hawaii.edu/~ralph/MathOnWeb/TeXPDF.html)找到有关此的详细信息。一个可能更简单的替代方法是`pdflatex`完全使用和跳过 PostScript。此外，我相信模糊的演示文稿应该只在屏幕上显示，当为我打印这些文件时通常没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-03T12:36:17.140

字体看起来很模糊，因为大多数查看器不能很好地处理位图字体。只需确保您的文档使用矢量字体即可。

多年来，我不必为获得正确的字体而奋斗（除了一些仍然仅作为位图存在的有趣符号）。我什至认为不再需要指定 T1 了。因此，解决方案的一个好步骤是简单地将您的 LaTeX 发行版升级到最近的发行版（例如 TeXlive 2008）并游说您的同事也这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T16:40:05.747

我相信默认情况下预览抗锯齿。当你把它们炸开一点时，它们看起来如何？打印时它们的外观如何？您是否尝试过在 ghostscript（或 gv 或 ggv，或任何其他查看器）中检查它们？

如果它是您使用的查看器，那么它不是 LaTeX，也不是与编程相关的。

# c# - 命名用于比较两个排序列表的算法？

> ID：551142
> 
> 赞同：0
> 
> 时间：2009-02-15T16:23:21.043
> 
> 标签：c#, linq

我有一个[比较两个排序列表的算法，](https://stackoverflow.com/questions/161432/best-algorithm-for-synchronizing-two-ilist-in-c-2-0/161535#161535)我打算让它更 LINQ-y。

我的第一个问题：在 LINQ 中已经有类似的东西了吗？

如果没有，我打算将其编写为扩展方法，如下所示：

```
public static class SortedCompareExtension
{
    public static IEnumerable<Pair<T, U>>
        CompareTo<T,U>(this IEnumerable<T> left,
                       IEnumerable<U> right,
                       Func<T, U, int> comparison)
    { /* ... */ }
} 
```

`new Pair<T, U>(t, u)`如果两个元素相等，`new Pair<T, U>(t, null)`如果元素仅存在于左侧列表中等，它将返回。

我的第二个问题：`CompareTo`这不是一个好名字。它是什么？是比较、整理、关联吗？什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-15T16:35:17.943

您正在[同步](http://en.wikipedia.org/wiki/Data_synchronization)列表，尽管该名称具有线程同步的不幸含义。

我会说'ReconcileOrdered'（也许是OrderedReconcile）是一个合理的名称（在函数名称中指出必须对参数都进行排序以使其行为正确可能非常重要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T16:35:47.957

怎么样`Diff`？我不相信 LINQ 中已经有任何东西可以做所有事情，但是有[`Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)and [`Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx). 听起来您的代码主要是两者的混合 - 除了那些是*集合*操作，而您有排序列表。这主要是效率问题，还是您的情况存在语义差异？（一个例子是重复条目。）

就我个人而言，我不确定在这种情况下我会使用一对。只涉及一个值，不是吗？不就是Value、PresentInLeft(bool)和PresentInRight(bool)的情况吗？我确信每种表示方式都有其优点和缺点，您当然可以从相同的基础数据中公开任一 API……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T16:34:55.587

该链接的算法非常接近“完全外部合并连接”。它仅在如何处理重复项上有所不同。

> LINQ中已经有这样的东西了吗？
> 
> 如果两个元素相等，它将返回 new Pair(t, u)，如果元素仅存在于左侧列表中，则返回 new Pair(t, null) 等。

仅从左侧看，[GroupJoin](http://msdn.microsoft.com/en-us/library/bb534297.aspx)是相似的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T18:43:29.163

这是我最终得到的代码。我非常喜欢它，特别是选择器，这意味着调用者可以决定在每种情况下返回什么：

```
public static class OrderedReconcileExtension
{
    public static IEnumerable<TResult>
        ReconcileWith<T, U, TResult>(this IEnumerable<T> left,
                                     IEnumerable<U> right,
                                     Func<T, U, int> comparison,
                                     Func<T, U, TResult> selector)
    {
        return ReconcileHelper(new EnumerableIterator<T>(left),
                               new EnumerableIterator<U>(right),
                               comparison, selector);
    }

    private static IEnumerable<TResult>
        ReconcileHelper<T, U, TResult>(EnumerableIterator<T> left,
                                       EnumerableIterator<U> right,
                                       Func<T, U, int> comparison,
                                       Func<T, U, TResult> selector)
    {
        while (left.IsValid && right.IsValid)
        {
            // While left < right, the items in left aren't in right
            while (left.IsValid && right.IsValid && 
                   comparison(left.Current, right.Current) < 0)
            {
                yield return selector(left.Current, default(U));
                left.MoveNext();
            }

            // While right < left, the items in right aren't in left
            while (left.IsValid && right.IsValid &&
                   comparison(left.Current, right.Current) > 0)
            {
                yield return selector(default(T), right.Current);
                right.MoveNext();
            }

            // While left == right, the items are in both
            while (left.IsValid && right.IsValid &&
                   comparison(left.Current, right.Current) == 0)
            {
                yield return selector(left.Current, right.Current);
                left.MoveNext();
                right.MoveNext();
            }
        }

        // Mop up.
        while (left.IsValid)
        {
            yield return selector(left.Current, default(U));
            left.MoveNext();
        }

        while (right.IsValid)
        {
            yield return selector(default(T), right.Current);
            right.MoveNext();
        }
    }
} 
```

`EnumerableIterator`与我在另一个问题中发布的代码完全相同。

*更新：除了 IsValid 之外的“完全相同”更改为 HasCurrent。选一个。*

# c - C语言结构详细教程

> ID：551147
> 
> 赞同：6
> 
> 时间：2009-02-15T16:25:43.160
> 
> 标签：c, structure

谁能给我一个很好的C结构教程？

我已经进行了谷歌搜索，但我找到了正常的信息。我正在寻找详细的结构。请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-15T16:41:28.303

您可以随时阅读[Brian W. Kernighan 的教程](http://www.lysator.liu.se/c/bwk-tutor.html#structure)，非常好。至于“细节”究竟是什么意思？毕竟，结构相当简单。上面的链接涵盖了常见的问题、类型定义、结构指针等。如果您仍然不清楚结构，也许您应该尝试发布一些更具体的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-15T16:52:41.300

使用 C（不是 C++）中的结构要记住的一件事是，在声明它们时必须使用 struct 一词：

```
struct Point location; 
```

正因为如此，你会经常看到它们用如下的 typedef 声明：

```
typedef struct tagPoint {
    int x;
    int y;
    } Point; 
```

然后你可以像其他类型一样声明一个点：

```
Point location; 
```

当你第一次看到这个符号时，它可能会令人困惑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-15T17:19:07.837

我通常建议（并且总是被建议）使用官方指南。对于 ANSI C，您无法获得比[K&R2更](https://rads.stackoverflow.com/amzn/click/com/0131103628)*详细*和*官方*的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T21:31:45.983

正如其他人已经说过的，结构只是一组变量。根据您的目标，如果您想通过低级函数（使用指针算法的 fe）访问元素，您*可能*需要考虑填充或打包：结构元素通常在 4 字节边界处对齐（在 32 位上）。因此，包含不同大小元素的结构可能需要填充

```
struct foo {
    int a;
    char b;
    int c;
    char d;
} 
```

在此示例中（假设 int 为 4 字节，char 为 1 字节并且 CPU 在 32 位边界对齐）您需要 3 个填充字节之后`b`才能使结构对齐。在这种情况下，对结构进行不同的排序会更有效。请注意，这不会更改其用法，因为这不会更改成员名称。并非所有处理器都需要对齐结构成员，但使用压缩结构成员会节省一些空间，但会导致速度下降。在大多数情况下，您不必担心这一点。

至于 struct 周围的 typedef，您甚至可以为 typedef 和 struct 使用相同的名称，即：

```
typedef struct foo {
  int a;
  int b;
} foo; 
```

这使得可以使用

```
struct foo variable; 
```

或者

```
foo variable; 
```

用于声明类型的变量`struct foo`。

从我的角度来看，键入结构是一个坏主意，因为它隐藏了 typedef（如`foo`）是结构的信息，并且编写关键字`struct`并不是真正的额外工作（特别是如果那些 typedef 添加了后缀来指示它们是一种结构——我经常看到这种情况）。

**编辑**`typedef`：在第二个示例中添加了缺失。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-15T16:47:54.027

**结构**基本上是一个或多个变量的集合，**可能**是**不同类型**的。

插图：

```
struct foo {
  int a;
  int b;
}; 
```

*   结构中的变量名称称为**成员**。

### 编辑：

结构的成员被**称为**：

```
structure_variable.member
structure_pointer->member
(*structure_pointer).member    // Fiddly; use -> instead 
```

例如：

```
struct foo test;
struct foo *ptr = &test;
test.a = 1;
ptr->b = 2; 
```

您可以做其他事情，例如：

*   指向结构的指针
*   结构数组

**笔记：**

*   如果结构相当大，传递指向结构的指针而不是结构本身更有效

**好书**：[C 编程语言，第 2 版（Prentice Hall 软件）](http://en.wikipedia.org/wiki/The_C_Programming_Language_(book))

*   优秀的结构介绍

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-17T13:22:47.547

查看 Sedgewick 的《C 语言算法》一书。在那里你会看到很多不同的数据结构在工作。另一个有趣的读物是来自 gtk+ 的 Gobject 模型。因为他们在那里为 C 中的面向对象编程构建了一个基础设施，所以数据结构处理非常多。值得一看的另一件事是 COM 模型，您可以将其转换为具有特定布局的 C 结构。glib 包含大量有用的数据结构，例如 libapr 或 libnspr。

您几乎可以检查任何“脚本”语言，并会看到“工作中的数据结构”；-)

问候弗里德里希

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T12:16:34.423

很难反驳 Nick Parlante 的链表存储库的厉害之处：

[http://cslibrary.stanford.edu/](http://cslibrary.stanford.edu/)

对于链表中使用的结构，上面的链接是无与伦比的。

您不会涉及的是在结构中使用函数的方面，但是如果您能理解上述内容，那么其他任何事情都会变得轻而易举。

# c++ - 编译器未创建模板化 ostream << 运算符

> ID：551156
> 
> 赞同：3
> 
> 时间：2009-02-15T16:29:19.097
> 
> 标签：c++, templates, operator-overloading, operator-keyword, ostream

我有一个类，在头部定义为：

```
template <typename T> class MyClass
{
   template <typename U> friend std::ostream& operator<<(std::ostream& output, const MyClass<U>& p);
   public:
      ...
} 
```

在一个实现文件中，我有：

```
template <typename U> std::ostream& operator<<(std::ostream& output, const MyClass<U>& m)
{
   output << "Some stuff";
   return output;
} 
```

这一切看起来都很犹太。但是，当我尝试使用此运算符（即 std::cout << MyClass()）时，我收到以下链接器错误：

```
Undefined symbols: std::basic_ostream<char, std::char_traits<char> >& operator<< <InnerType>(std::basic_ostream<char, std::char_traits<char> >&, MyClass<InnerType> const&) 
```

我很惊讶编译器没有自动为我生成这个......关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-15T16:31:02.290

> 在一个实现文件中，我有：

那就是问题所在。您不能在头文件和实现文件之间拆分模板定义。由于模板的性质，C++ 编译器在这里很挑剔。定义标题中的所有代码以使其工作。

事实上，这里的问题是所有模板定义必须驻留在同一个编译单元中，因为 C++ 标准没有定义模板信息如何在不同单元之间共享。这些单元由链接器拼接在一起，但泛型是在编译时（更早）而*不是*在链接时解析的。

从理论上讲，C++ 标准定义了一个关键字`export`, 来处理这些情况。实际上，**没有**编译器实现这一点（有一个例外？），并且无意改变这一点，因为成本/实用性的权衡被认为不够好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T16:37:12.807

模板太多 - 这有效：

```
#include <iostream>
using namespace std;
template <typename T> struct MyClass {

    friend ostream & operator << ( ostream & os, MyClass<T> & c ) {
        os << "MyClass\n";
        return os;
    }
};

int main() {
    MyClass <int> c;
    cout << c;
} 
```

# wpf - WPF：在随机点渲染画布

> ID：551159
> 
> 赞同：0
> 
> 时间：2009-02-15T16:30:52.290
> 
> 标签：wpf, math, random

*参考我目前正在构建的[这个编程游戏。](https://stackoverflow.com/questions/505040/developing-a-robocode-type-game-with-net-for-a-school-assignment)*

游戏开始时，我在画布上的随机点生成这些机器人，乍一看（同时添加一个或两个机器人），这似乎可以正常工作。

...但是，当我同时添加大量机器人时，它们是如何“随机”出现在画布上的：

[替代文字 http://img22.imageshack.us/img22/6895/randombotpositionlf7.jpg](http://img22.imageshack.us/img22/6895/randombotpositionlf7.jpg)

毕竟，所谓的随机点似乎并不那么随机......它们只是**一条直线上的点**！

* * *

以下是我计算积分的方式：

```
SetStartingPoint(GetRandomPoint(ArenaWidth, ArenaHeight)); //the width and height are 550, 480 at the moment 

//which calls:

private Point GetRandomPoint(double maxWidth, double maxHeight)
{
        return new Point(new Random().Next(0, (int)(maxWidth-80)), new Random().Next(0, (int)maxHeight));
}

//and ultimately:

private void SetStartingPoint(Point p)
{
        Translate_Body.X = (double)p.X;
        Translate_Body.Y = (double)p.Y;
} 
```

关于上面的代码，`Translate_Body`是`TranslateTransform`机器人（`canvas`）的类型，所以通过分配它的`X`和`Y`属性，它会改变它的位置到新的值

* * *

我在这里想念什么？

* * *

**[更新]解决方案：**

问题就像你们都建议的那样，由于新的实例化，数字没有被正确播种。

我现在将代码更改为使用单个`Random`变量并从中播种所有点。

**但我仍然不明白为什么在看似直线的坐标上生成点。 *有人能解释一下吗？***

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T16:38:11.790

我认为问题在于您的随机数没有正确播种。使用 Random 的单个实例，而不是多个实例，您应该会看到很多改进。

用户添加了“为什么他们在一条直线上”——可能是因为基于种子生成的随机数的默认进展。[维基百科](http://en.wikipedia.org/wiki/Random_number_generator)将是一个很好的起点——我不是数学专家，所以不会试图解释随机数世界的核心。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T16:40:03.140

默认情况下，Random 类使用当前时间作为种子。由于时间每隔几毫秒就会增加一次，因此您的大多数“随机”数字实际上将完全相同。只需构造一次 Random 对象，随后对 Next() 的调用应该会给您更多随机结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T17:04:37.483

问题是您不断创建新的 Random() 对象，然后获取第一个随机数。但是 Random() 对象是随时间初始化的，所以它总是得到相同的值。

而是这样做：

```
private System.Random R = new System.Random();
private Point GetRandomPoint(double maxWidth, double maxHeight)
{
    return new Point(R.Next(0, (int)(maxWidth - 80)), R.Next(0, (int)maxHeight));
} 
```

这将创建一个 Random() 对象，然后重复调用它。这也会表现得更好，因为您没有初始化太多的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T16:41:13.747

除了你应该使用一个实例`Random`而不是一直创建一个新种子之外，从这里看不到任何奇怪的东西。如果您的系统足够快，您可能会两次获得相同的种子。

如果这不能解决它，请检查您的设置器以及受设置/绘图影响的任何内容，`Translate_Body.X`然后`Translate_Body.Y`再一次。我猜当你画它时，你画的是（X，X）或（Y，Y）而不是（X，Y）......

# .net - 他们使用的是什么技术？

> ID：551173
> 
> 赞同：1
> 
> 时间：2009-02-15T16:39:27.917
> 
> 标签：.net, http, web-applications

我们刚刚购买了一个网络摄像头来远程监控一些设备。目前，我们仅通过 Intranet 进行监控。网络摄像头附带的软件安装在与网络摄像头物理连接的计算机上。从 Intranet 上的任何位置，我都可以在浏览器中键入该计算机的地址，例如[http://192.168.1.99](http://192.168.1.99)，然后我会得到一个显示实时视频以及平移和缩放网络摄像头的方法的浏览器页面。但是网络摄像头计算机中没有安装网络服务器！它正在运行 Windows XP，我想知道 IIS 是否可以运行，但事实并非如此。

我的问题是他们可以使用什么技术在没有 IIS 的情况下提供 http 页面？他们可以使用他们自己卷起来的迷你网络服务器吗？我怎样才能知道？

现在，如果我想编写自己的应用程序，通过 Internet 提供网页服务，用户无需安装 Web 服务器即可运行的应用程序，我该怎么做？我应该使用什么技术/.NET 类？

谢谢，这是一个很棒的网站！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T16:44:56.077

如果您想创建自己的 HTTP 服务器，.NET [HttpListener](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)类让这一切变得非常简单。它将围绕请求和响应包装所有细节，您只需担心提供内容。

您也可以使用套接字（或 .NET 提供的抽象之一，例如 TcpClient 类）自己实现它。然后你必须自己实现 HTTP 协议的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T16:45:56.450

编写一个非常基本的 Web 服务器非常容易。.NET 包括[`HttpListener`](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)，但您可以从头开始，没有*太多*问题。如果您知道自己在服务什么并且不需要太多花里胡哨的东西，那么 HTTP 并不是世界上最复杂的协议。

至于您的网络摄像头正在使用什么，您可以安装一个浏览器插件来显示所有标题，或者只是以编程方式连接并查看标题。当然，没有什么可以说它是准确的，但它可能会提供一些线索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T17:01:06.740

顺便说一句，如果您仍然对他们使用的技术感兴趣，请尝试：

```
netstat -ano|find ":80 "|find /i "listening" 
```

这将为您提供为页面提供服务的进程的 ID。然后使用任务管理器的进程选项卡（已添加 PID 列）查找进程的名称。或者使用[Process Explorer](http://live.sysinternals.com/procexp.exe)，它将为您提供有关该程序的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T16:46:38.180

看看[HTTPListener](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)和[Cassini Web 服务器](http://msdn.microsoft.com/en-us/magazine/cc188791.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T16:51:39.120

我们有大约六台 Axis 网络摄像头，如果您通过 FTP 访问它们，它们似乎只是在运行一个真正精简的 Linux 版本。我不知道我们正在运行哪个网络服务器，但有大量非常轻量级的网络服务器可用于几乎任何平台。这是一个链接。

[http://en.wikipedia.org/wiki/Tiny_web_servers](http://en.wikipedia.org/wiki/Tiny_web_servers)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-15T16:54:21.530

使用 WCF，一旦您对底层技术感到满意，大约需要 20 分钟来构建您自己的 Web 服务器。只需在谷歌上搜索 WCF 和 WebHttpBehavior。

# git - Git4Idea 插件没有利用 git 索引

> ID：551176
> 
> 赞同：0
> 
> 时间：2009-02-15T16:40:32.703
> 
> 标签：git, intellij-idea

即使在新的 Intellij IDEA 8.1 版中[改进了 git 支持](http://www.jetbrains.com/idea/features/version_control.html#Git_support)， Git4Idea 插件也会自动添加对索引的更改。

Jetbrains 论坛上甚至有一篇关于此[问题](http://www.jetbrains.net/devnet/thread/277569)的帖子，但没有任何回复。

根据[Embracing the Git Index 的](http://www.jdl.com/papers/Embrace_The_Git_Index.pdf)说法， Linus Torvalds 曾经说过“如果你否认索引，你就真的否认了 git 本身。”

如果你想以原本的方式使用 Git，你必须禁用插件并恢复使用 git 作为外部工具或从命令行使用。

您如何处理抽象 git 接口的怪癖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-26T17:20:36.120

我对 git4idea 的这种行为并没有真正的问题。

虽然在理论上，索引的功能很有用，但在实践中，我很少想只签入我的更改的一个子集。当我需要时，我可以在 intellij 中通过取消选中我不想提交的文件来做到这一点，而 git4idea 会透明地管理它。

这就是说 - 我在命令行上做了很多 git 操作，我只依靠 Intellij 向我提供有关我在使用文件时所做的更改的信息。

你的问题有点开放式。你有什么特别的“怪癖”？

# html - 使 HTML 内容扩展以填充窗口

> ID：551180
> 
> 赞同：11
> 
> 时间：2009-02-15T16:42:24.930
> 
> 标签：html, css, noscript

我有一个 HTML 页面垂直分为

*   标题
*   身体
*   页脚

身体依次水平分成

*   左侧的大 DIV 被滚动条包围，显示图表的一部分
*   右边的表格

页眉和页脚是固定高度的。正文应垂直扩展以填充未被页眉和页脚占据的窗口部分。

同样，表单是固定宽度的，滚动窗格应水平扩展以填充窗口宽度。

该图非常大（最多 10x10 屏幕），因此我无法显示所有内容。相反，我想尽可能多地显示（使用整个窗口），以便用户需要尽可能少地滚动。

我也不能使用 javascript，因为有些用户一定是偏执狂，必须禁用它。

我考虑过的一些选项：

*   滚动窗格单元格的宽度和高度设置为 100% 且所有其他单元格设置为 1% 的表格
    *不起作用。表格（以及页面）扩展为包含整个图表，即使在滚动窗格 DIV 上具有绝对定位。*
*   将窗格从页面底部偏移页脚高度的绝对定位有效
    *但不准确：页脚的高度取决于当前字体大小和文本是否被换行。这意味着我必须留出很大的余量以确保它们不会重叠。*
*   将图表放在 IFRAME
    *禁用脚本时我发现的最佳解决方案，但在启用脚本时限制了我可以在脚本中执行的**操作**。*

我注意到当脚本被禁用时，谷歌地图使用固定大小的地图区域。如果谷歌放弃了这个问题，这是否意味着它不可行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-15T16:58:02.600

使用 height: 100% CSS 属性应该可以正常工作。

看看[Dave Woods 100% Height Layout Using CSS](http://www.dave-woods.co.uk/?p=144)是否适合你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-15T17:03:49.653

这是 CSS 属性的一个鲜为人知的方面`position: absolute;`，它将为您提供您正在寻找的布局。您可以在所有 4 个方向（上、右、下和左）上绝对定位元素。这意味着一个盒子可以像浏览器一样流畅，并且始终与您指定的容器边缘保持相同的距离。

```
div {
    position: absolute;
}
#main {
    top: 8em; // 8em
    left: 0; 
    bottom: 8em; // 8em
    right: 300px;
    overflow: auto;
}
#header {
    top: 0;
    left: 0;
    right: 0;
    height: 8em;
}
#sidebar {
    top: 8em;
    right: 0;
    bottom: 8em;
    width: 300px;
    overflow: auto;
}
#footer {
    bottom: 0;
    left: 0;
    right: 0;
    height: 8em;
} 
```

例如，请查看[http://www.sanchothefat.com/dev/layouts/cssframes.html](http://www.sanchothefat.com/dev/layouts/cssframes.html)，然后查看源代码并拆开 CSS 以查看它在更复杂的示例中是如何完成的。

**如果您采用这种方法，您必须绝对定位所有主容器`<div>`。如果字体大小是一个问题，请使用 ems。**

PS。IE6 搞砸了（震惊！）但是我提供的示例有一个 IE6 后备。不过，只要一个固定的高度就可以了。

# c# - 等效的 vb.net 代码

> ID：551183
> 
> 赞同：0
> 
> 时间：2009-02-15T16:45:31.053
> 
> 标签：c#, vb.net

我是 asp.net 的新手。你能在 C#.net 代码之后发布一个等效的 vb.net 代码吗？谢谢

```
public string  getSecureCookie(HttpRequest Request)
{
    HttpCookie secureCookie = Request.Cookies["Test"];
        if(secureCookie!=null)
    {
        return secureCookie.ToString();
    }
    else
        {
            return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-15T16:50:08.000

运行[http://www.carlosag.net/Tools/CodeTranslator/上提供的代码翻译器](http://www.carlosag.net/Tools/CodeTranslator/)

```
Public Function getSecureCookie(ByVal Request As HttpRequest) As String
    Dim secureCookie As HttpCookie = Request.Cookies("Test")
    If (Not (secureCookie) Is Nothing) Then
        Return secureCookie.ToString
    Else
        Return ""
    End If
End Function 
```

不过，可能想改用`If secureCookie IsNot Nothing`。但是翻译器确实有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T16:48:41.560

试试这个

```
Public Function getSecureCookie(ByVal request as HttpRequest) As String
  Dim cookie = request.Cookies("Test")
  if cookie IsNot Nothing Then
    return cookie.ToString()
  Else
    return ""
  End If
End Function 
```

# c++ - Microsoft Visual Studio (2008) - 解决方案资源管理器中的过滤器

> ID：551200
> 
> 赞同：5
> 
> 时间：2009-02-15T16:55:56.847
> 
> 标签：c++, visual-studio, visual-studio-2008, visual-c++, solution-explorer

在处理 C++ 项目时，在解决方案资源管理器中，有头文件、资源文件和源文件的标准过滤器。我想要完成的基本上是按文件夹过滤。

* * *

可以说文件的结构是这样的：

*   ../Folder1/Source1.cpp
*   ../Folder1/Header1.h
*   ../Folder1/Source2.cpp
*   ../Folder1/Header2.h
*   ../AnotherFolder/Source1.cpp
*   ../另一个文件夹/Header1.h
*   ../AnotherFolder/Source2.cpp
*   ../另一个文件夹/Header2.h
*   ../SomeOtherSource.cpp

在解决方案资源管理器中，它看起来像：

*   头文件/Header1.h
*   头文件/Header1.h
*   头文件/Header2.h
*   头文件/Header2.h
*   源文件/SomeOtherSource.cpp
*   源文件/Source1.cpp
*   源文件/Source1.cpp
*   源文件/Source2.cpp
*   源文件/Source2.cpp

我想让它看起来像这样：

*   头文件/AnotherFolder/Header1.h
*   头文件/AnotherFolder/Header2.h
*   头文件/Folder1/Header1.h
*   头文件/Folder1/Header2.h
*   源文件/AnotherFolder/Source1.cpp
*   源文件/另一个文件夹/Source2.cpp
*   源文件/Folder1/Source1.cpp
*   源文件/Folder1/Source2.cpp
*   源文件/SomeOtherSource.cpp

* * *

这将如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T16:59:34.217

您可以自己手动创建文件夹并移动文件。我同意这是一种更方便的文件排列方式，但 AFAIK 无法让 VS 自动执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T01:11:18.530

您可以创建 Visual Studio 插件来执行此操作。我不确定如何以编程方式访问“解决方案资源管理器”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-16T08:17:44.297

显示所有文件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-10-12T19:58:41.503

我发现这样做的唯一方法是完全手动的。我创建了一个过滤器层次结构来匹配文件夹。然后，我移至“显示所有文件”视图，并选择一个文件夹。我将该文件夹中不在我的解决方案中的所有文件添加到解决方案中。然后我离开“显示所有文件。

此时，VS 似乎没有正确更新我的文件列表。所以我需要“关闭解决方案”并重新打开解决方案。此时，新文件在解决方案中，但不在过滤器中。它们位于项目的顶层，位于项目的底部。此时我将它们拖到正确的过滤器中。

这是乏味的、容易出错的并且浪费时间。但是由于我的项目是使用外部 make 系统构建的，因此这是我可以使项目合理地保持最新并且仍然在 Visual Studio 中获得体面的搜索和浏览行为的唯一方法。时间成本稍后会在生产力中得到回报，但我仍然不喜欢它。

# windows - 远程访问 Windows Vista 到 Mac OSX？

> ID：551208
> 
> 赞同：6
> 
> 时间：2009-02-15T17:01:24.947
> 
> 标签：windows, macos, remote-desktop

有没有办法使用 OSX 进行从 Windows Vista 到 Mac Mini 的远程桌面访问？希望能够远程访问 Mac 以访问系统，因此无需将其放在单独的监视器/kb 上进行测试和开发。

有什么类似于 Windows 远程桌面的东西可以使用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-15T17:06:24.200

[**OS X 的 VNC**](http://macapper.com/2007/03/19/vnc-remote-desktop-for-free/)

*注意*：VNC 服务器已经包含在 OS X 10.4 和更高版本中。请参阅[http://www.wikihow.com/Setup-VNC-on-Mac-OS-X](http://www.wikihow.com/Setup-VNC-on-Mac-OS-X)：

1.  从蓝色苹果菜单中打开系统偏好设置。
2.  单击“Internet 和网络”下的“共享”选项卡。
3.  单击开始以启动远程桌面组件。
4.  单击访问权限以打开更高级的选项。
5.  检查 VNC 查看器可以使用密码控制屏幕并定义密码。
6.  您可以关闭系统偏好设置。你完成了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T17:06:11.270

像[LogMeIn](http://logmein.com)这样的东西有用吗？有一个没有声音或文件传输的免费版本。如果您可以在没有声音的情况下使用另一种发送文件的方式，它可能会起作用。或者您可以购买付费版本...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-10T15:13:01.323

VNC 不会发送 Ctrl+Drag 事件，因此它对诸如 Interface Builder 之类的东西的用处为零……我一直在寻找*可以*发送 Ctrl+Drag 的远程处理程序；如果有人远程使用 Interface Builder 进行开发，我很感兴趣。（Mac Mini，由 XP SP3 控制；已经尝试过 TightVNC、UltraVNC 和其他几个——更喜欢免费的解决方案，但此时愿意付费。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-10T15:20:28.160

您还可以考虑使用[Synergy](http://synergy2.sourceforge.net/)，它可以提供非常无缝的体验，尤其是当系统位于同一内部网络并且您的办公桌上有自己的显示器时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-08T15:59:14.973

logmein 肯定是这里最好的解决方案，否则使用 VNC

# facebook - 为 FB.Connect.showFeedDialog 调用未定义函数 showfeeddialog()

> ID：551212
> 
> 赞同：1
> 
> 时间：2009-02-15T17:04:11.010
> 
> 标签：facebook

我正在开发一个 Facebook 应用程序`fb:iframe`。我不想使用它，`feed_publishUserAction`因为它需要一个会话密钥。因此尝试使用`FB.Connect.showFeedDialog`.

使用后者可以吗？

任何人都可以建议使用它的示例，因为我收到一条错误消息`Call to undefined function showfeeddialog()`。

我应该更新我的图书馆吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-07T05:26:07.700

首先，您需要确保包含客户端库：

```
<script src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php" type="text/javascript"></script> 
```

这不应该在 HTML 页面中，而应该在正文中。从文档：

> *注意：您必须在元素`<script>`的开头包含加载 FeatureLoader 的标签`<body>`。FeatureLoader 可以将 body 元素直接写入到文档中，如果它发生在`<head>`元素中，某些浏览器会报告为错误。*

你是如何调用函数的？它应该看起来像：

```
FB.Connect.showFeedDialog(123456789, data); 
```

（数字是您要发布的模板的模板 ID，在 facebook 中创建或使用 api 注册。“数据”应该是您将填充所述模板的 json）。

需要注意的是，您需要确保客户端库在调用任何函数之前已准备就绪：

```
FB.ensureInit(function () { 
    // -- now library is officially ready
}); 
```

或查看[`Waitable`](https://developers.facebook.com/docs/reference/oldjavascript/FB.Waitable.waitUntilReady/)课程。

请记住：您必须通过 Facebook 连接登录才能使用该`showFeedDialog`表格。此外，整个星期都在使用 Connect API……它仍然*是*测试版，需要大量的变通方法。您应该发布一些代码，以便我们进一步提供帮助。

# delphi - Delphi条码阅读器代码

> ID：551218
> 
> 赞同：5
> 
> 时间：2009-02-15T17:06:40.160
> 
> 标签：delphi, open-source, barcode

有人知道 Delphi 的开源条形码阅读器，它可以从网络摄像头读取条形码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-09-07T11:58:11.727

1.  条码识别：**[J4L](http://www.java4less.com/vision/vision.php?info=GuideDelphi)**
2.  条码生成：**[TurboPower SysTools](http://sourceforge.net/projects/tpsystools/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T17:14:22.340

您需要一个具有良好分辨率的网络摄像头来读取条形码。如果你知道如何从 delphi 调用 C/C++ 代码，你应该研究一下[zebra 条码阅读器](http://zebra.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-16T19:41:58.797

[我使用来自http://www.dtksoft.com/](http://www.dtksoft.com/)的dtk 条形码 sdk 。它既不是免费的也不是开源的，因此它可能不适合您的需求。它以 dll 的形式出现，很容易围绕它编写一个 delphi 包装器。

基本上，您将文件（图像或 pdf）传递给它，它会返回文件中条形码的数量和内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-23T20:56:43.397

这是一个 DLL/ActiveX（虽然不是免费的），显然带有一个从网络摄像头读取的示例。还有一个免费的命令行版本，但它的功能并不丰富。没用过，但它已经在我的雷达上一段时间了。

[http://www.inspirant.de/index.php?ref=prodinbarcodeocr&lg=en](http://www.inspirant.de/index.php?ref=prodinbarcodeocr&lg=en)

科林

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T23:25:04.557

有可能，[barcodepedia](http://en.barcodepedia.com/)有闪存阅读器，可以从网络摄像头读取条形码。

但看看这个网站，他们似乎并不打算放弃读者。

谷歌不断出现的东西是[Eym Barcode Reader](http://www.metois.com/Eymbarcode/eymbcdemo.htm)，它是一个 ActiveX/OCX

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-26T12:38:04.073

您可以从许多 Java BarcodeReader 库中进行选择，并将其与 JIntend 对象一起使用。

# reporting-services - 如何动态更改 SSRS 正文中的列数

> ID：551220
> 
> 赞同：1
> 
> 时间：2009-02-15T17:07:23.653
> 
> 标签：reporting-services

在 SQL Server Reporting Services (SSRS) 中，报表页面上的列数在报表属性中设置（这与随数据变化的字段列数不同）。
默认情况下，这是设置一个，但它可能是两个或更多，然后向下流动。

我希望能够根据我使用的打印机类型（标签卷或纸张）动态设置它。但是，SSRS 不允许您为此值输入表达式。有没有人有办法通过代码做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-22T12:21:25.797

您可以做的是在 rsreportserver.config 中定义几个自定义呈现选项：

```
<Render>
    <Extension Name="PDF (1 column)" 
         Type="Microsoft.ReportingServices.Rendering.ImageRenderer.PdfReport, 
               Microsoft.ReportingServices.ImageRendering"/>
        <OverrideNames>
            <Name Language="en-US">PDF (1 column)</Name>
        </OverrideNames>
        <Configuration>
            <DeviceInfo>
                <OutputFormat>PDF</OutputFormat>
                <PageHeight>11in</PageHeight>
                <PageWidth>8.5in</PageWidth>
                <Columns>1<Columns>
            </DeviceInfo>
        </Configuration>
    </Extension>
    <Extension Name="PDF (2 columns)" 
         Type="Microsoft.ReportingServices.Rendering.ImageRenderer.PdfReport, 
               Microsoft.ReportingServices.ImageRendering"/>
        <OverrideNames>
            <Name Language="en-US">PDF (2 columns)</Name>
        </OverrideNames>
        <Configuration>
            <DeviceInfo>
                <OutputFormat>PDF</OutputFormat>
                <PageHeight>11in</PageHeight>
                <PageWidth>8.5in</PageWidth>
                <Columns>2<Columns>
            </DeviceInfo>
        </Configuration>
    </Extension>
</Render> 
```

[在 RSReportServer.Config 中自定义渲染扩展参数](http://msdn.microsoft.com/en-us/library/ms156281.aspx)
[PDF 设备信息设置](http://msdn.microsoft.com/en-us/library/ms154682.aspx)
然后，在打印之前，只需选择合适的渲染格式。

但是，在报告 url 中指定 thouse 设置会更容易：

```
http://servername/reportserver?/SampleReports/Employee SalesSummary
  &EmployeeID=38&rs:Command=Render&rs:Format=HTML&rc:Columns=1
http://servername/reportserver?/SampleReports/Employee SalesSummary
  &EmployeeID=38&rs:Command=Render&rs:Format=HTML&rc:Columns=2 
```

请参阅[在 URL 中指定设备信息设置](http://msdn.microsoft.com/en-us/library/ms155046.aspx)
您还可以创建一些主报告并在其中放置 thouse 链接。

# c++ - 无法真正理解构造 tcp::resolver::query 的参数是什么

> ID：551226
> 
> 赞同：18
> 
> 时间：2009-02-15T17:12:04.250
> 
> 标签：c++, boost, boost-asio

我正在启动 Boost.Asio 并尝试在官方网站上给出示例。
这是客户端代码：

```
 using boost::asio::ip::tcp;

int _tmain(int argc, _TCHAR* argv[])
{
    try {
        boost::asio::io_service io_service;

        tcp::resolver resolver(io_service);
        tcp::resolver::query query(argv[1], "daytime");
        tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
        tcp::resolver::iterator end;

        tcp::socket socket(io_service);
        boost::system::error_code error = boost::asio::error::host_not_found;
        while(error && endpoint_iterator != end) {
            socket.close();
            socket.connect(*endpoint_iterator++, error);
        }
        if (error)
            throw boost::system::system_error(error);

        for(;;) {
            boost::array buf;
            boost::system::error_code error;

            std::size_t len = socket.read_some(boost::asio::buffer(buf), error);

            if (error == boost::asio::error::eof)
                break; //connection closed cleanly by peer
            else if (error)
                throw boost::system::system_error(error);

            std::cout.write(buf.data(), len);
        }
    }
    catch(std::exception& e) {
        //...
    }
    return 0;
} 
```

问题是 - 我无法找出从命令提示符运行程序的参数是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-15T17:48:12.930

您将使用要连接的服务器的 IP 或主机名运行该程序。tcp::resolver::query 将要解析的主机或 IP 作为第一个参数和服务的名称（如在 Unix 主机上的 /etc/services 中定义的那样） - 您还可以使用数字服务标识符（又名端口数字）。它返回一个可能的端点列表，因为单个主机可能有多个条目。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T10:48:12.593

阅读旧手册！

```
ip::tcp::resolver resolver(my_io_service);
ip::tcp::resolver::query query("www.boost.org", "http");
ip::tcp::resolver::iterator iter = resolver.resolve(query);
ip::tcp::resolver::iterator end; // End marker.
while (iter != end)
{
    ip::tcp::endpoint endpoint = *iter++;
    std::cout << endpoint << std::endl;
} 
```

[http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/overview/networking/protocols.html](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/overview/networking/protocols.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T18:02:12.523

我现在遇到了同样的问题（使用相同的教程）。将服务器代码更改为：

```
tcp::acceptor acceptor(io_service, tcp::endpoint(tcp::v4(), 19876)); 
```

并更改客户端代码：

```
tcp::resolver::query query(argv[1], "19876"); 
```

使相同的服务在不同的端口上工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T17:39:45.557

如果我没记错的话，你正在尝试使用 UNICODE 字符串——tchar。使用**标准**

```
int main(int argc,char **argv) 
```

# c++ - 使用 Python 或其他嵌入式脚本语言部署应用程序

> ID：551227
> 
> 赞同：18
> 
> 时间：2009-02-15T17:12:33.343
> 
> 标签：c++, python, deployment, scripting-language, embedded-language

我正在考虑在一个用**C++**编写的爱好项目中使用 Python 作为**嵌入式脚本语言**。我不想依赖单独安装的 Python 发行版。Python 文档似乎对一般用法非常清楚，但我找不到明确的答案。

 **在我的应用程序中部署 Python 解释器 + 标准库是否可行？像 Lua、Javascript (Spidermonkey)、Ruby 等其他语言会更适合这种用途吗？

以下是我衡量不同语言的标准：

*   对外部安装的包没有/很少依赖
*   具有良好功能集的标准库
*   好语言:)
*   不会产生巨大的安装包

编辑：

我想问题应该是：如何使用我的程序安装程序部署我自己的python库+标准库，这样平台是否已经安装了python都没有关系？

编辑2：

再澄清一件事。我不需要有关链接 C 和 Python 代码的细节的信息。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-02-15T20:28:31.767

将您的应用程序链接到 python 库（Windows 上的 pythonXX.lib）并将以下内容添加到您的 main() 函数中。

```
Py_NoSiteFlag = 1;  // Disable importing site.py
Py_Initialize();    // Create a python interpreter 
```

将您需要的 python 标准库位放入一个 zip 文件（称为 pythonXX.zip）并将其和 pythonXX.dll 放在您分发的可执行文件旁边。查看 zipfile 模块中的 PyZipFile。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-15T17:28:19.920

嵌入过程已完整记录：[在另一个应用程序中嵌入 Python](http://docs.python.org/extending/embedding.html)。这些文件建议了嵌入完成的几个级别，选择最适合您要求的任何级别。

> 嵌入 Python 的简单演示可以在源代码分发的目录 Demo/embed/ 中找到。

[演示在这里](http://svn.python.org/view/python/trunk/Demo/embed/)，应该可以从发行版构建。

> *   非常高级别的嵌入
> *   超越非常高级别的嵌入：概述
> *   纯嵌入
> *   扩展嵌入式 Python
> *   在 C++ 中嵌入 Python

从标准库中，您可以选择不带有太多依赖关系的组件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-15T18:16:30.787

为了通过 gimel 扩展答案，没有什么可以阻止您发送 python.dll、使用它并设置正确的 PYTHONPATH 以使用您自己安装的 python 标准库。它们只是库和文件，您的安装过程可以这样处理它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T17:42:00.887

如果您正在寻找一种简单地部署 Python 应用程序的方法，您可以使用[Py2Exe](http://www.py2exe.org/)。这将允许您的应用程序获得所需的所有依赖项，而无需担心用户计算机上已安装或尚未安装的内容。

[编辑] 如果 Py2Exe 不适合嵌入式应用程序，您能否简单地让您的安装程序检查相关文件并下载/安装缺少的任何内容？[/编辑]

[Edit2] [Elmer](http://elmer.sourceforge.net/)会是你想要的吗？[/编辑2]

# .net - 在父文件夹中加载程序集 - 探测？

> ID：551230
> 
> 赞同：0
> 
> 时间：2009-02-15T17:12:53.390
> 
> 标签：.net, vb.net

我正在开发一个使用非常简单的插件结构的类库 - 开始为每个插件创建新的 appdomains 很简单。这是文件夹结构：

```
Bin
    Modules
        Plugins.dll
    Main.dll
    Library.dll 
```

在运行时，我使用反射加载 Plugins.dll 中的类型。我想将自己在 Library.dll 中创建的对象之一传递给 Plugins.dll 中的类。但是在 MethodInfo 调用行上，例如

```
pMi.Invoke({My Own Objects()}) 
```

它给了我一个 FileNotFound 异常，因为它找不到 Library.dll。告诉我的库在父文件夹中查找程序集的最佳方法是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T18:35:02.477

When constructing you new app domains what are you setting as the ApplicationBase and the PrivateBinPath? Simply keeping the application base as "Bin" and putting Modules as the PrivateBinPath should be sufficient but not knowing how you are doing it I can't give you a definite answer.

As an aside is there any reason you aren't using the basic AddIn model present in [MEF](http://www.codeplex.com/MEF)? (you can use System.AddIn without needing the full MEF bells and whistles)

# c# - 通过 Web 请求在 asp 页面之间传输变量

> ID：551234
> 
> 赞同：0
> 
> 时间：2009-02-15T17:15:01.623
> 
> 标签：c#, asp.net, vb.net

任何人都可以解释如何通过网络请求在asp页面之间传输变量。Web 请求意味着 post 方法，并且还建议在 asp 中用于在 asp.net 页面之间传输变量的最佳方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T17:27:23.323

您可以通过多种方式在 ASP.NET 页面之间传递变量 -

1.  处于会话状态
2.  在查询字符串中
3.  从源页面读取值（作为属性公开）

[MSDN 文章 - 如何在 ASP.NET 页面之间传递值](http://msdn.microsoft.com/en-us/library/6c3yckfw.aspx)

我从来不需要使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)在页面之间传递值。据我了解，这是在 Classic ASP 中传递值的标准方法。虽然您仍然可以在 ASP.NET 中使用此方法（如[Alex 的回答](https://stackoverflow.com/questions/551234/transfer-variable-between-asp-pages-by-web-request/551244#551244)所示），但我认为您会发现上述方法之一更简洁，并且适合不同目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T17:26:59.567

看看 System.Net.WebClient.UploadString() 或 System.Net.WebClient.UploadValues()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T17:33:24.807

您有一些选择，您可以使用[查询字符串](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)、[会话](http://msdn.microsoft.com/en-us/library/system.web.ui.page.session.aspx)、使用[Server.Transfer 和 HttpContext](http://www.dotnetjunkies.com/WebLog/familjones/archive/2004/04/08/11020.aspx)。

您可以进行[跨页回](http://msdn.microsoft.com/en-us/library/ms178139.aspx)发，最后一页由[PreviousPage](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx)属性公开...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T17:24:05.827

网络请求是什么意思？

您可以使用 Web 请求将其发布到另一个页面。

```
string myvar = "abc";
WebRequest request = WebRequest.Create(uri);
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
using(Stream writeStream = request.GetRequestStream())
{
    UTF8Encoding encoding = new UTF8Encoding();
    byte[] bytes = encoding.GetBytes("myvar=" + myvar);
    writeStream.Write(bytes, 0, bytes.Length);
} 
```

并使用在那里检索它

```
string myvar = Request.Post["myvar"]; 
```

但也许你应该考虑其他选择？

您可以使用 Session 或 Application 对象传输它。

您可以通过查询字符串传输它。

# c++ - Symbian OS/C++ 描述符端口？

> ID：551243
> 
> 赞同：2
> 
> 时间：2009-02-15T17:22:37.330
> 
> 标签：c++, symbian

有谁知道是否有 Symbian OS C++ Descriptors 功能到其他操作系统的工作端口？我记得这里有一些代码[，](http://discussion.forum.nokia.com/forum/showpost.php?s=ad278476973d3bb6f589b7cb8a0c4026&p=210806&postcount=10)虽然我上次测试它，但由于一些缺失/未定义的类型，它没有用 G++ 编译。

在此先感谢，泰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T08:44:37.073

我还没有看到这样的端口，但您可能希望等待即将发布的 Symbian Foundation 平台版本，其中大部分操作系统（包括描述符）都是在 EPL 许可下开放的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T10:37:19.253

这里有几件事需要考虑：

*   基本描述符 API 是 10 多年前编写的，用于响应一组特定的资源约束。虽然它们确实使 Symbian OS C++ 成为了今天的一个品种，但将它们移植到更新的操作系统上的理由充其量还是值得商榷的。

*   Symbian（好吧，现在是诺基亚）实际上至少拥有一项涉及描述符的专利。在您花费太多时间处理此问题之前，您可能想询问当描述符源代码开源时究竟应该发生什么。

*   一段时间以来，Symbian 生态系统实际上一直在努力完全摆脱描述符。在 OpenC/C++、QT 和新的 EUserHL 库之间，有非常可行的 C++ 替代描述符。

*   Symbian Developer Library 中的描述符文档实际上相当不错，您绝对可以将其用作将洁净室移植到另一个操作系统的基础。不过，对于大多数开发人员会积极尝试避免的事情来说，这是一项相当多的工作。

*   请记住，完整的描述符 API 依赖于各种 Symbian C++ 惯用语，例如 CBase、CCleanupStack、TReal……一个合适的端口肯定需要大量工作。当然，离开机制可以用标准的 C++ 异常来实现（因为这就是 Symbian 在摆脱中断时所做的），但仍然......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T07:08:15.790

描述符本身并没有特定于平台的特性，一旦开源，您可以轻松地将它们从 Symbian 源代码移植到另一个平台（即重新编译它们）。但是，由于某些描述符函数“离开”，因此您也必须引入 Symbian 清理堆栈功能。

由于这些是 Symbian C++ 中最糟糕的（即最非标准和最令人讨厌的）位，我很好奇您为什么要这样做？

# php - SimpleXML 中的属性值选择

> ID：551246
> 
> 赞同：1
> 
> 时间：2009-02-15T17:24:11.287
> 
> 标签：php, xml

为什么我不能根据属性值而不是索引过滤结果？

这样的事情失败了。

```
foreach ($portfolio->clientGroup[$id]->client['name=foo']->src as $src) {
   echo $src . '<br />';
} 
```

但这有效。

```
foreach ($portfolio->clientGroup[$id]->client[0]->src as $src) {
   echo $src . '<br />';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T17:33:00.830

这不起作用，因为 SimpleXML 是一个轻量级实现。另外，除非您有规范，否则您不能假设**任何事情都有效。**

您正在寻找对象的[xpath 函数](http://php.net/manual/en/function.simplexml-element-xpath.php)，`SimpleXMLElement`即：

```
foreach ($portfolio->clientGroup[$id]->xpath("client[@name='foo']/src") as $src) {
   echo $src . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T17:33:56.193

SimpleXML 以嵌套数组的形式提供对文档的访问。无法将 XPath 表达式作为数组索引。

尝试类似：

```
$query = "client[@name='foo']/src"; // if name is an attribute
$query = "client[name='foo']/src";  // if name is a child element

foreach ($portfolio->clientGroup[$id]->xpath($query) as $src ) {
   echo $src . '<br />';
} 
```

# c++ - 方法链 + 继承不能很好地结合在一起？

> ID：551263
> 
> 赞同：15
> 
> 时间：2009-02-15T17:40:51.873
> 
> 标签：c++, inheritance, method-chaining

考虑：

```
// member data omitted for brevity

// assume that "setAngle" needs to be implemented separately
// in Label and Image, and that Button does need to inherit
// Label, rather than, say, contain one (etc)

struct Widget {
    Widget& move(Point newPos) { pos = newPos; return *this; }
};

struct Label : Widget {
    Label& setText(string const& newText) { text = newText; return *this; }
    Label& setAngle(double newAngle) { angle = newAngle; return *this; }
};

struct Button : Label {
    Button& setAngle(double newAngle) {
        backgroundImage.setAngle(newAngle);
        Label::setAngle(newAngle);
        return *this;
    }
};

int main() {
    Button btn;

    // oops: Widget::setText doesn't exist
    btn.move(Point(0,0)).setText("Hey");

    // oops: calling Label::setAngle rather than Button::setAngle
    btn.setText("Boo").setAngle(.5); 
} 
```

有什么技巧可以解决这些问题？

示例：使用模板魔术使 Button::move 返回 Button& 或其他东西。

**编辑**很明显，第二个问题是通过将 setAngle 设为虚拟来解决的。

**但是第一个问题仍未以合理的方式解决！**

**编辑**：嗯，我想在 C++ 中做正确是不可能的。无论如何感谢您的努力。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-21T10:56:59.033

您可以扩展[CRTP](http://en.wikipedia.org/wiki/Curiously_Recurring_Template_Pattern)来处理这个问题。monjardin 的解决方案朝着正确的方向发展。您现在需要的只是一个默认`Label`实现，以将其用作叶类。

```
#include <iostream>

template <typename Q, typename T>
struct Default {
    typedef Q type;
};

template <typename T>
struct Default<void, T> {
    typedef T type;
};

template <typename T>
void show(char const* action) {
    std::cout << typeid(T).name() << ": " << action << std::endl;
}

template <typename T>
struct Widget {
    typedef typename Default<T, Widget<void> >::type type;
    type& move() {
        show<type>("move");
        return static_cast<type&>(*this);
    }
};

template <typename T = void>
struct Label : Widget<Label<T> > {
    typedef typename Default<T, Widget<Label<T> > >::type type;
    type& set_text() {
        show<type>("set_text");
        return static_cast<type&>(*this);
    }
};

template <typename T = void>
struct Button : Label<Button<T> > {
    typedef typename Default<T, Label<Button<T> > >::type type;
    type& push() {
        show<type>("push");
        return static_cast<type&>(*this);
    }
};

int main() {
    Label<> lbl;
    Button<> btt;

    lbl.move().set_text();
    btt.move().set_text().push();
} 
```

也就是说，请考虑这样的努力是否值得增加少量的语法奖励。考虑替代解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-15T17:51:47.260

对于第二个问题，将 setAngle 设为虚拟应该可以解决问题。

对于第一个，没有简单的解决方案。Widget::move 返回一个 Widget，它没有 setText 方法。您可以制作一个纯虚拟 setText 方法，但这将是一个非常丑陋的解决方案。您可以在按钮类上重载 move() ，但维护起来会很痛苦。最后，您可能可以使用模板做一些事情。也许是这样的：

```
// Define a move helper function
template <typename T>
T& move(T& obj, Point& p){ return obj.move(p); };

// And the problematic line in your code would then look like this:
move(btn, Point(0,0)).setText("Hey"); 
```

我会让你决定哪种解决方案最干净。但是有什么特别的原因需要能够链接这些方法吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-15T18:06:39.017

解决问题的一种简单但烦人的方法是在子类中重新实现所有公共方法。这并不能解决多态性问题（例如，如果您从 Label 转换为 Widget），这可能是也可能不是主要问题。

```
struct Widget {
    Widget& move(Point newPos) { pos = newPos; return *this; }
};

struct Label : Widget {
    Label& setText(string const& newText) { text = newText; return *this; }
    Label& setAngle(double newAngle) { angle = newAngle; return *this; }
    Label& move(Point newPos) { Widget::move(newPos); return *this; }
};

struct Button : Label {
    Button& setText(string const& newText) { Label::setText(newText); return *this; }
    Button& setAngle(double newAngle) {
        backgroundImage.setAngle(newAngle);
        Label::setAngle(newAngle);
        return *this;
    }
    Button& move(Point newPos) { Label::move(newPos); return *this; }
}; 
```

请务必在您的文档中包含这必须完成的链接才能正常工作。

但实际上，现在，为什么还要麻烦方法链呢？很多时候，这些函数的调用将不那么简单，并且需要更长的行。这真的会损害可读性。每行一个动作——这也是一般`++`规则`--`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-15T20:19:25.720

`Button`真的是一个吗`Label`？您似乎违反了[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。或许您应该考虑使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)向小部件添加行为。

如果您坚持原样的结构，您可以像这样解决您的问题：

```
struct Widget {
    Widget& move(Point newPos) { pos = newPos; return *this; }
    virtual ~Widget();  // defined out-of-line to guarantee vtable
};

struct Label : Widget {
    Label& setText(string const& newText) { text = newText; return *this; }
    virtual Label& setAngle(double newAngle) { angle = newAngle; return *this; }
};

struct Button : Label {
    virtual Label& setAngle(double newAngle) {
        backgroundImage.setAngle(newAngle);
        Label::setAngle(newAngle);
        return *this;
    }
};

int main() {
    Button btn;

    // Make calls in order from most-specific to least-specific classes
    btn.setText("Hey").move(Point(0,0));

    // If you want polymorphic behavior, use virtual functions.
    // Anything that is allowed to be overridden in subclasses should
    // be virtual.
    btn.setText("Boo").setAngle(.5); 
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-25T14:52:59.387

我会放弃链接的东西。一方面，如果不做一些相对讨厌的黑客攻击，它实际上是无法完成的。但是，最大的问题是它使阅读和维护代码变得更加困难，而且你很可能最终会被人们滥用，创建一个巨大的代码行来做很多事情（回想一下高中代数和那些巨大的代码行）加法，减法和乘法，你似乎总是在某个时候结束，如果你让他们这样做，人们就会这样做）。

另一个问题是，由于系统中的大多数函数都将返回对自身的引用，因此所有这些函数都应该是合乎逻辑的。当（*不是如果*）你最终开始实现也应该返回值的函数时（不仅是访问器，还有一些修改器以及其他泛型函数），你将面临两难境地，要么打破你的约定（这将滚雪球，不清楚应该如何为其他未来的函数实现事情）或被迫开始通过参数返回值（我相信你会讨厌，就像我认识的大多数其他程序员一样）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-16T01:12:07.420

C++ 确实支持虚拟方法的返回值协方差。所以你可以通过一些工作得到你想要的东西：

```
#include <string>
using std::string;

// member data omitted for brevity

// assume that "setAngle" needs to be implemented separately
// in Label and Image, and that Button does need to inherit
// Label, rather than, say, contain one (etc)

struct Point
{
    Point() : x(0), y(0) {};
    Point( int x1, int y1) : x( x1), y( y1) {};

    int x;
    int y;
};

struct Widget {
    virtual Widget& move(Point newPos) { pos = newPos; return *this; }
    virtual ~Widget() {};

    Point pos;
};

struct Label : Widget {
    virtual ~Label() {};
    virtual Label& move( Point newPos) { Widget::move( newPos); return *this; }

    // made settext() virtual, as it seems like something 
    // you might want to be able to override
    // even though you aren't just yet
    virtual Label& setText(string const& newText) { text = newText; return *this; }
    virtual Label& setAngle(double newAngle) { angle = newAngle; return *this; }

    string text;
    double angle;
};

struct Button : Label {
    virtual ~Button() {};
    virtual Button& move( Point newPos) { Label::move( newPos); return *this; }
    virtual Button& setAngle(double newAngle) {
        //backgroundImage.setAngle(newAngle);
        Label::setAngle(newAngle);
        return *this;
    }
};

int main()
{
    Button btn;

    // this works now
    btn.move(Point(0,0)).setText("Hey");

    // this works now, too
    btn.setText("Boo").setAngle(.5); 

  return 0;
} 
```

请注意，您应该使用虚拟方法来执行此类操作。如果它们不是虚拟方法，那么“重新实现”的方法将导致名称隐藏，并且调用的方法将取决于变量、指针或引用的静态类型，因此如果基指针或引用可能不是正确的方法正在使用参考。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-15T17:46:15.777

[咆哮]

是的。退出此方法链接业务，只需连续调用函数。

说真的，你为允许这种语法付出了代价，而我没有得到它提供的好处。

[/咆哮]

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-15T17:46:45.057

不适用于 C++。

C++ 不支持返回类型的变化，因此即使您覆盖它，也无法将 Widget.move() 返回的引用的静态类型更改为比 Widget& 更具体。

C++ 需要能够在编译时检查事物，所以你不能使用真正从 move 返回的是一个按钮的事实。

充其量，您可以进行一些运行时强制转换，但它看起来并不漂亮。只是单独调用。

**编辑**：是的，我很清楚 C++ 标准说返回值协方差是合法的这一事实。然而，在我教授和练习 C++ 的时候，一些主流编译器（例如 VC++）没有。因此，为了便携性，我们建议不要这样做。最后，当前的编译器可能对此没有任何问题。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-02-16T15:32:51.530

有一段时间，我认为可能会重载稍微不寻常`operator->()`的链接方法而不是`.`，但这步履蹒跚，因为编译器似乎要求 右侧的标识符`->`属于左侧表达式的*静态*类型. 很公平。

## 穷人的方法链

退一步说，方法链接的重点是避免重复输入长对象名称。我会建议以下快速而肮脏的方法：

而不是“速记形式”：

```
btn.move(Point(0,0)); btn.setText("Hey"); 
```

你可以写：

```
{Button& _=btn; _.move(Point(0,0)); _.setText("Hey");} 
```

不，它不像真正的链接那样简洁`.`，但是当需要设置许多参数时它会节省一些输入，并且它确实具有不需要对现有类进行**代码更改的好处。**因为您将整个方法调用组包装起来`{}`以限制引用的范围，所以您始终可以使用相同的短标识符（例如`_`or `x`）来代表特定的对象名称，从而潜在地增加可读性。最后，编译器将毫无问题地优化 away `_`。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-15T17:55:08.937

我认为（我没有测试过）这将使用模板来完成：

```
template<class T> struct TWidget {
    T& move(Point newPos) { pos = newPos; return (T&)*this; }
};

template<class T> struct TLabel : TWidget<T> { ... }

struct Label : TLabel<Label> { ... }

struct Button : TLabel<Button> { ... } 
```

笔记：

*   任何/每个基类都需要是一个模板，顶部有一个单独的非模板叶类（对比`LabelT`和`Label`类）。
*   `dynamic_cast`如果你愿意，演员可以是一个。
*   `return *this`基类可以包含 a`T&`作为数据成员而不是强制转换“ ”（派生类将传递`this`给基类的构造函数），这将是一个额外的数据成员，但它避免了强制转换，我认为可能允许组合代替或与继承一样。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-15T17:58:47.087

这在 gcc 4.3.2 上编译，是一种[混合模式](http://en.wikipedia.org/wiki/Mixin)。

```
#include <string>

using namespace std;

struct Point {
    Point() : x(0), y(0) {}
    Point(int x, int y) : x(x), y(y) {}

    int x, y;
};

template <typename T>
struct Widget {
    T& move(Point newPos) {
        pos = newPos;
        return *reinterpret_cast<T *> (this);
    }

    Point pos;
};

template <typename T>
struct Label : Widget<Label<T> > {
    T& setText(string const& newText) {
        text = newText;
        return *reinterpret_cast<T *> (this);
    }
    T& setAngle(double newAngle) {
        angle = newAngle;
        return *reinterpret_cast<T *> (this);
    }

    string text;
    double angle;
};

struct Button : Label<Button> {
    Button& setAngle(double newAngle) {
        backgroundImage.setAngle(newAngle);
        Label<Button>::setAngle(newAngle);
        return *this;
    }

    Label<Button> backgroundImage;
};

int main() {
    Button btn;

    // oops: Widget::setText doesn't exist
    btn.move(Point(0,0)).setText("Hey");

    // oops: calling Label::setAngle rather than Button::setAngle
    btn.setText("Boo").setAngle(0.0); 
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-02-24T14:34:38.690

其他人遇到了设计问题。您可以使用 C++ 对协变返回类型的支持来解决该问题（尽管以一种非常粗暴的方式）。

```
struct Widget {
    virtual Widget& move(Point newPos) { pos = newPos; return *this; }
};

struct Label : Widget {
    Label& move(Point newPos) { pos = newPos; return *this; }
    Label& setText(string const& newText) { text = newText; return *this; }
    Label& setAngle(double newAngle) { angle = newAngle; return *this; }
};

struct Button : Label {
    Button& setAngle(double newAngle) {
        backgroundImage.setAngle(newAngle);
        Label::setAngle(newAngle);
        return *this;
    }
};

int main() {
    Button btn;

    // oops: Widget::setText doesn't exist
    btn.move(Point(0,0)).setText("Hey");

    // oops: calling Label::setAngle rather than Button::setAngle
    btn.setText("Boo").setAngle(.5); 
} 
```

确实，尽管以您的方式链接方法会产生奇怪的代码，并且会损害可读性而不是帮助。如果您终止了对 self junk 的返回引用，您的代码将变为：

```
struct Widget {
    void move(Point newPos) { pos = newPos; }
};

struct Label : Widget {
    void setText(string const& newText) { text = newText; }
    void setAngle(double newAngle) { angle = newAngle; }
};

struct Button : Label {
    void setAngle(double newAngle) {
        backgroundImage.setAngle(newAngle);
        Label::setAngle(newAngle);
    }
};

int main() {
    Button btn;

    // oops: Widget::setText doesn't exist
    btn.move(Point(0,0));
    btn.setText("Hey");

    // oops: calling Label::setAngle rather than Button::setAngle
    btn.setText("Boo");
    btn.setAngle(.5); 
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-10T06:13:42.187

实际上，由于异常安全性差，方法链接是个坏主意。你真的需要吗？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-02-15T17:45:23.220

好吧，您知道它是 a `Button`，因此您应该能够将返回的转换`Widget&`为 a`Button&`并继续前进。不过看起来确实有点丑。

另一个相当烦人的选择是在你的`Button`类中为`Widget::move`函数（和朋友）创建一个包装器。如果您有多个功能，可能不值得努力包装所有内容。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-02-15T21:14:58.020

setText() 和 setAngle() 真的需要在每个类中返回它们自己的类型吗？如果将它们都设置为返回 Widget&，那么您可以只使用虚函数，如下所示：

```
struct Widget {
    Widget& move(Point newPos) { pos = newPos; return *this; }
    virtual Widget& setText(string const& newText) = 0;
    virtual Widget& setAngle(double newAngle) = 0;
};

struct Label : Widget {
    virtual Widget& setText(string const& newText) { text = newText; return *this; }
    virtual Widget& setAngle(double newAngle) { angle = newAngle; return *this; }
};

struct Button : Label {
    virtual Widget& setAngle(double newAngle) {
        backgroundImage.setAngle(newAngle);
        Label::setAngle(newAngle);
        return *this;
    }
}; 
```

请注意，即使返回类型是 Widget&，按钮或标签级别的函数仍然会被调用。

# linq - 领域模型 + LINQ to SQL 示例

> ID：551266
> 
> 赞同：2
> 
> 时间：2009-02-15T17:45:15.170
> 
> 标签：linq, unit-of-work, domain-model

我想知道是否有一个企业应用程序示例，使用业务逻辑层中的域模型和用于数据映射器的 LINQ 设计？我不太确定如何将 LINQ to SQL 的 UnitOfWork 功能与来自业务层的业务对象结合使用。

谢谢，卢锡安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T18:58:32.730

看看[MVC 店面](http://blog.wekeroad.com/mvc-storefront/mvc-storefront-part-1/)。它使用网络广播和博客文章中介绍的 Linq to Sql、域驱动设计和 ASP.NET MVC。强烈推荐！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-03-14T19:33:11.010

我刚刚发布了一个使用 T4 模板、IoC 和 StructureMap 等的简单示例。[http://daniel.wertheim.se/2010/03/14/linq-to-sql-how-to-separate-the-entities-and-the -数据上下文/](http://daniel.wertheim.se/2010/03/14/linq-to-sql-how-to-separate-the-entities-and-the-datacontext/)

检查评论。我即将对工作联合执行进行更新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-15T18:00:38.440

我建议看看[http://www.dofactory.com/Patterns/Patterns.aspx](http://www.dofactory.com/Patterns/Patterns.aspx)

# .net - 是否应该每次都关闭 LINQ 上下文？

> ID：551276
> 
> 赞同：3
> 
> 时间：2009-02-15T17:48:15.257
> 
> 标签：.net, linq-to-sql, datacontext

在 LINQ to SQL 中，是否需要在对数据库执行选择后（当然，在使用数据后）关闭上下文？如果我让它保持打开状态，是否意味着与服务器的连接保持打开状态？

谢谢，卢锡安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T17:55:27.000

在使用 Dispose 方法关闭 DataContext 之前，不会关闭和释放基础连接。在使用 DataContext 后，您应该始终调用 Dispose。将 DataContext 视为传统的 Connection 对象，或多或少是它的底层。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T18:01:55.923

问：我的数据库连接保持打开状态多久？

A. 在您使用查询结果之前，连接通常保持打开状态。如果您希望花时间处理所有结果并且不反对缓存结果，请将 ToList(TSource) 应用于查询。在每个对象只处理一次的常见场景中，流模型在 DataReader 和 LINQ to SQL 中都表现出色。

连接使用的确切细节取决于以下内容：

使用连接对象构造 DataContext 时的连接状态。

连接字符串设置（例如，启用多个活动结果集 (MARS)。有关详细信息，请参阅多个活动结果集 (MARS)。

* * *

从[MSDN LINQ 到 SQL 常见问题解答](http://msdn.microsoft.com/en-us/library/bb386929.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T17:56:57.950

我对 LiNQ 中所有内容的名称有点不确定。在实体框架中，这意味着对象上下文正在尝试进行更改跟踪，这在断开连接的情况下会导致很多问题。

遗憾的是，如今 ASP.NET 与更改跟踪不太兼容，因此在使用后关闭上下文是在 asp.net 中处理实体框架的最佳方式。如果我尝试让上下文保持打开状态，我有时会在更新实体时遇到问题，我认为这在 Linq 中应该是同一个问题。

在同一台机器上或本地网络上的数据库的 Windows 窗体应用程序中，我将通过外观（更少的代码重复）重用对象上下文，以便能够从更改跟踪和与数据库的直接连接中受益。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T19:35:28.993

简短的回答是肯定的，您应该仅在需要时打开数据上下文并尽快关闭它。如果您不处理它，则底层数据库连接可能会保持打开状态。

已经有很多其他人问过类似的问题。如果您[检查](https://stackoverflow.com/questions/549393/linqtosql-declare-and-instantiate-datacontext-best-practice/549432#549432) [其中](https://stackoverflow.com/questions/543269/inserting-item-in-linq-to-sql-datacontext-doesnt-appear-until-application-rest)[一些](https://stackoverflow.com/questions/1949/are-multiple-datacontext-classes-ever-appropriate)，您会[发现](https://stackoverflow.com/questions/431008/linq-to-sql-is-it-better-to-have-a-small-datacontext-for-each-page-or-a-global-o)一些非常好的讨论。

# asp.net - ASP.NET 和 AJAX 线程

> ID：551277
> 
> 赞同：2
> 
> 时间：2009-02-15T17:49:05.737
> 
> 标签：asp.net, ajax, multithreading, iis, isapi

参考这个问题：[ASP.NET 是多线程的（它如何执行请求）](https://stackoverflow.com/questions/435492/is-asp-net-multithreaded-how-does-it-execute-requests)，这是否是对线程的正确解释：ASP.NET 每个应用程序实例都有一个工作进程。它是多线程的，使用自己的应用程序池。大多数线程用于服务（用户）请求。每个请求（用户会话）都是一个线程。对应的响应可能是另一个线程。用户请求来自 ISAPI 的多个线程，ISAPI 本身就是多线程的。

AJAX 不是多线程的。它使用与非 AJAX 网站相同的线程模型。页面请求（ajax 或非 ajax）可能会导致服务器上使用多个线程，但它仍然是客户端上的一个线程（浏览器使用单个线程）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T18:20:00.373

简而言之，是的。在 ASP.NET 中，请求/响应通常在单个线程中处理......“请求”和“响应”之间没有明显区别，它只是 ISAPI 将请求信息传递给 ASP.NET 处理程序，它将执行适当的代码并编写输出。（虽然当 ASP.NET 处于负载状态并且需要有效利用可用线程时，有一种机制可以将请求从一个线程迁移到另一个线程。但我不能 100% 确定何时或为什么会发生这种情况。 )

浏览器端 JavaScript 和 AJAX 不是多线程的，但对某些人来说可能是这样的，因为 AJAX 调用是异步的并且响应是事件驱动的；也就是说，一旦请求被分派到服务器，JavaScript 线程就不会被阻塞。向服务器发送更多请求是免费的，并且响应可能会或可能不会按照发送的顺序返回。然而，因为在核心实际上只有一个线程，如果两个响应同时返回，一个会阻塞另一个的执行，直到它完成。

# .net - 信号量超时时间

> ID：551282
> 
> 赞同：29
> 
> 时间：2009-02-15T17:53:07.333
> 
> 标签：.net, sql-server, sql-server-2005

我最近擦除并重新安装/配置了我的 Web 和数据库服务器的所有组件。我正在运行 IIS 6、.NET 3.5、SQL Server 2005。这两个服务器是同一域中的不同 VM。我的网络应用程序运行完美...... 90% 的时间。但时不时地我会收到这个错误或一般的运行时错误：

> System.Data.SqlClient.SqlException：从服务器接收结果时发生传输级错误。（提供者：TCP 提供者，错误：0 - 信号量超时期限已过。）

你们能给我一些关于从哪里开始故障排除的线索吗？我真的认为我在 IIS 中遗漏了一些东西。

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-24T19:02:48.607

经过数小时的故障排除并与我的托管组通电话后，他们发现他们的网络配置存在问题。当我在测试期间其中一个虚拟机突然找不到域时，解决方案变得更加清晰，并且从另一个虚拟机到每个盒子的 IP 的简单“ping”偶尔会超时。这完全排除了 DNS。在托管组应用正确的配置后，应用程序已经稳定且快速！

感谢大家的帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-19T06:55:38.847

[**这里**](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/d99b4d8e-feeb-43cb-80af-3d4826340a2c/)有几个指针。基本上网络层正在抛出错误，SQL Server 只是在报告它。

希望有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-19T06:23:01.827

好吧，我首先要确保我正在运行最新版本的虚拟机网络驱动程序。

听起来您的 2 个 VMS 之间的通信失败。尝试在两台机器之间打开一个 TCP 套接字，看看它是否会在一定时间后死掉。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T17:57:41.007

您可以仔细检查数据库服务器上的负载吗？我们确实偶尔会在我们的开发环境中获得它们，但从未在产品环境中获得它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-22T23:50:03.277

我会发布我的经验，以防有一天它可能对某人有所帮助；）

在年底，只是尝试使用我的手机从很远很远的地方远程连接到我们的服务器。我注意到我无法通过远程桌面（黑屏）登录到一台 Windows 服务器，也无法从 Windows 应用程序连接到同一台服务器。

一旦我从手机切换到不同的连接（通过 NightHawk M1 移动路由器），一切都很好。

正如我所读到的，主要是关于网络问题，所以不要惊慌并试图在那里找到有罪的人。

希望有帮助，R

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-03T08:24:34.500

游戏迟到了，但我在使用 .NET Web 应用程序/MS SQL 时遇到了同样的错误。站点托管在 GoDaddy VPS 上的 IIS 中，托管有多个 IP，数据库托管在 Azure。

我相信我的问题是（白痴！），我只是忘记将 GD 站点的专用 IP 地址从 GD 放入 SQL 服务器的 Azure 防火墙。由于某些奇怪的原因，流量在网站的实际 IP 地址（IIS 绑定地址）之外进出 GD/Azure 并正常工作。

但更多情况下，实际的 IIS 绑定地址是调用 Azure 以与 SQL 服务交互的地址。我更正了 Azure 上的防火墙设置，以包含来自 GoDaddy 的正确 IP，并且（敲木头）信号量错误现在似乎消失了。

换句话说，在你开始寻找大问题之前，先从简单的开始，并确保检查网络/防火墙设置等简单的事情。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-07-19T09:18:38.823

检查存储过程是否有任何行 SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED

对我来说，这就是问题

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2022-01-19T07:17:03.817

我只是切换了wifi网络，问题就解决了。

我有一个提供两个连接的家庭 WIFI 网络，

> home_wifi

和

> home_wifi_5g

我已连接到 home_wifi_5g，但出现错误。当我切换到 home_wifi 时，我的 MVC5 应用程序运行了。

# linq-to-sql - LINQ to SQL 作为工作单元

> ID：551283
> 
> 赞同：4
> 
> 时间：2009-02-15T17:54:14.680
> 
> 标签：linq-to-sql, unit-of-work

根据您的经验，LINQ to SQL 是否适合作为工作单元？可以避免吗？我应该更喜欢 NHibernate 还是其他 O/RM 工具？

谢谢，卢锡安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-16T10:09:47.673

Linq to Sql 数据上下文旨在用于单个工作单元。

编辑：添加参考。

[Linq To SQL 常见问题解答：](http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/3ae5e457-099e-4d13-9a8b-df3ed4ba0bab/)

> 问：我应该在每个业务逻辑方法中创建一个新的 DataContext 吗？
> 
> 答：DataContext 符合工作单元设计模式。除非您在每个操作之间的物理层之间移动数据，否则您应该在工作期间保持 DataContext 处于活动状态。

# c - 为 Ruby 1.9.1 构建 dnssd gem 时缺少 hton

> ID：551284
> 
> 赞同：0
> 
> 时间：2009-02-15T17:54:24.990
> 
> 标签：c, ruby, rubygems

我一直在尝试让最新版本的 DNSSD 插件与 Ruby 1.9.1 一起使用，但遇到了一些问题。我已经概述了到目前为止我已采取的步骤，也许这里的某个人将能够弄清楚还有什么问题。

1.  尝试安装当前版本，使用：`sudo gem19 install dnssd`Gem install failed citing htons could not be found。

检查 htons()... 不需要函数 htons

2.  检查了 htons() 的手册页（据我所知，如果需要，htons 会将字符串转换为网络字节顺序 [big-endian]）

3.  根据 Mac OSX 10.5 手册页添加了 htons() #include 的相关包含。

4.  Ran ruby​​19 extconf.rb 和 htons() not found，ruby (1.8) 成功。

DNSSD v0.7.0 github 镜像[http://github.com/jqr/dnssd/tree/master](http://github.com/jqr/dnssd/tree/master)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-16T18:13:30.880

htons 不转换字符串，它将短（16 位）从主机字节顺序转换为网络字节顺序。

它可以（可能）实现为宏。在我的系统（Debian Etch）上，它位于文件 /usr/include/netinet/in.h 中。它由包 libc6-dev 拥有，它是标准 C 库的开发部分。

不确定这在 OSX 上是如何组织的，但您应该验证您是否安装了 C 开发库。

# emacs - 我应该学习使用 Emacs 吗？

> ID：551289
> 
> 赞同：17
> 
> 时间：2009-02-15T17:57:27.497
> 
> 标签：emacs

我使用 IntelliJ IDEA 作为代码编辑器，所以这不是替代它。我使用`vi`or`vim`在我们的服务器上进行简单的文本编辑，并使用标准`unix`命令来查找文件、获取目录列表等。

同事们对emacs发誓，但我想知道是否值得我花时间学习它。*我的生产力会提高多少？*

编辑：有人指出，这个问题[之前已经被问过](https://stackoverflow.com/questions/48006/is-it-worth-investing-time-in-learning-to-use-emacs)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-02-15T18:21:10.137

I've used emacs for more than twenty years. As much as possible, I try to use it for all my typing needs, including, as Fu86 mentioned, reading email, news, etc, as well as notes, to-do lists, writing code, running compiles, etc. Since emacs is much older than the extensible vim (as opposed to the relatively non-extensible vi), it has a much larger collection of extension modes covering almost any purpose you can imagine. That said, it's fair to say that serious use of emacs can be considered a *lifestyle choice*, in that it takes a considerable amount of effort and time to become fluent with the tool.

My real answer is that, as far as editors (and any other category of tool) go, you should find one that is powerful and flexible, and then take the time to become a skilled user of that tool. Your tool of choice can be either vim or emacs, or perhaps something else, but in any event, take the time to learn it well. Personally, I've chosen to master emacs, and I've never been disappointed when I've wanted it to handle some new situation for me.

Having never worked seriously in Java, I can't comment from direct experience on how well it replaces tools like eclipse and intellij. I'm old enough to be skeptical of these highly-integrated tools (even without experience with them), and there are emacs modes that provide some (although by no means all, I'm sure) of the features of these editors.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-02-15T18:54:45.283

1) Should you learn to use Emacs? Probably. 2) Should you try to switch all your development over to Emacs? No. I'll discuss each of these questions in sequence.

1) In this question, Emacs could be replaced with Vim or any other cross-platform editor. I wish to emphasize the fact that it is cross-platform. This, for me, is the primary benefit of being fluent with Emacs (or Vim). No matter what computer I'm on, it will either already have Emacs on it so that I jump right into some development or I'll be able to easily download it in a few minutes. In my university programming labs, rather than trying to use whatever IDEs the computer I was on happened to have, I just opened the terminal and used Emacs. Since I was already somewhat fluent with Emacs (although by no means an expert), I was able to get the work done just fine without having to fight with a different environment.

Further, there are some languages for which decent IDEs simply do not exist. For example, every time I try to find a decent IDE on OS X for Haskell, I always end up falling back on Emacs. If I wasn't fluent with Emacs, I really don't know how I'd write Haskell code.

Finally, using an IDE for very small projects (and especially just simple one file programs) feels clunky and counter-productive; it's nice to have a simple text editor for such tasks (although I'm sure some would argue as to how simple Emacs really is). But this isn't necessarily an argument for Emacs specifically; on OS X, for example, TextMate is an awesome editor for these tasks.

2) Emacs is powerful and wonderfully extensible, but in my experience it is not a substitute for an IDE. When starting a new project in my spare time, one of the first things I think about is whether there's a good IDE for my language and technologies of choice. On OS X, for example, I'll usually look first to see if there's a good way to use Xcode for my project. On Windows, I'll see if I can use Visual Studio. If that fails, I'll look at IDEs such as Eclipse and NetBeans. Only after that do I consider doing serious development using a text editor like Emacs.

I hope this helps!

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-15T19:51:03.323

我认为你也不会更有效率。我自己目前确实使用 Emacs 进行编程，但主要原因是我必须 ssh 进入我正在开发的系统。否则我可能会使用 IntelliJ 或 Eclipse 之类的 IDE。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-15T18:05:46.213

Honestly I don't think you'll be more productive at all. Emacs was fine as an editor a decade ago but a modern IDE--particularly IntelliJ of which I'm a big fan--comes with so much more than an editor, including a debugger, the ability to refactor your code, seamlessly move classes and packages, etc etc etc. A huge part of the productivity benefit of an IDE comes from those features rather than the editor.

If you're not using vi/vim as a primary text editor (meaning using it for significant development effort or just significant time) then whatever you use is ancillary to your IDE.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-15T18:13:11.373

The choice of editor is something that every programmer has to make at least once, but often repeatedly over the course of their career. I was a vi+Eclipse user until about four years ago, which was when I made the transition from being a hobby coder to being a professional, and more or less simultaneously to using emacs.

What I've found is that emacs has rewarded every bit of time I've spent learning it with increased capability. I still cannot recommend it for writing Java -- Eclipse/NetBeans/IntelliJ are so much better than any mere text editor for that -- but for configuration file editing, C coding, scripting emacs provides everything you might want, and more. The latest versions (bleeding edge stuff, sadly, still unreleased) even support TrueType fonts in gnome.

It'll be painful. Changing tools always is. But yes, you should try to learn it. You won't regret it.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-15T18:03:44.580

emacs 和 vim 之间的区别在于 emacs 包含许多功能，并且结合了邮件、新闻、文件管理器，当然还有文本编辑器。Vim 只做文本编辑，而且做得很好（没有插件）。是否喜欢 emacs 取决于你。我个人更喜欢 vim，但请尝试使用 emacs 并找到最适合您的文本编辑器。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-15T18:06:18.677

'emacs' is great but if you are comfortable with 'vi' and wont be heavily using it then you are better off not putting serious time into learning emacs. emacs is fun and gets quite intuitive over time. So, I would say spend 10 to 15 mins everyday and see how it works for you.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-15T18:09:19.137

I've always preferred vim for simple text editing, but I prefer elisp for extending the editor. These days I use emacs for my serious editing and vim for quick things when I'm ssh'd into a server.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-15T19:33:53.817

学习 Emacs 并不是一个坏主意：许多 IDE（例如 Eclipse 和 NetBeans——当我上次使用它时）都支持相同（或相似）的键绑定。虽然这些绑定一开始可能会让人感到困惑，但在我看来，它们可以大大提高你在键盘上的速度，因为你的手永远不会真正离开“home”位置。在更成熟的 IDE 中，这是无价的。

当然，已经*习惯*了 Emacs 键绑定，现在每当它们不可用时，我都会很挣扎。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-15T21:39:39.943

学习emacs还有另一个好处。Emacs 已经以多种方式集成到 unix 操作系统中。例如，您可以在 xterm 中使用基本的 emacs 命令。在 OS X 中，你几乎可以在任何地方使用基本的 emacs 东西。此外，您还可以设置很多 IDE（如 Visual Studio 或 Eclipse）来使用类似 emacs 的命令。所以我会说，即使你不经常使用它，熟悉 emacs 的基础知识也是一件好事。

需要指出的另一件事：emacs 是笔记本电脑上的天赐之物。尤其是苹果笔记本电脑。您无需担心 home 键在什么可怕的位置，因为您只需要 Ca。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-16T00:14:33.050

就个人而言，我喜欢emacs。它广泛可用并且具有许多功能。不像VI/m，它没有插入模式的概念，所以感觉就像一个标准的文本编辑器。

还有，Lisp。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-15T19:38:44.600

如果在阅读[了编辑器与 IDE 的分析](http://osteele.com/archives/2004/11/ides)之后，您认为自己是一个*语言专家*，那么您应该学习 Emacs。否则，你不应该。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-15T21:50:43.237

如果现在使用和喜欢 IDE，并且您已经熟悉 vi/vim，那么不要再考虑 Emacs。Emacs 永远不会取代你的 IDE，如果可以的话，vim 会很好。不要介意 Emacs 与 vi 的圣战……您已经了解 vim，并且 vi/vim 已经安装在您遇到的任何 UNIX 风格上。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-02-15T22:01:57.890

学习使用 Emacs 或 vi 是一个非常好的主意。然后，您将能够自己决定什么最适合您。也许您最终会同时使用两者；一件事的想法；其他情况下的“编辑”。

哪个编辑器（emacs 或 vi）几乎是一个品味问题。有当地专家可以回答“嘿，我如何使用编辑器 Y 做 X”是非常有帮助的。如果您的同事对emacs发誓，那么我会说放手。

# c# - 如何修改位图并在以后使用它而不存储或绘制

> ID：551302
> 
> 赞同：1
> 
> 时间：2009-02-15T18:04:35.870
> 
> 标签：c#, graphics, drawing

我正在尝试在 C# 中自己做一些 ocr。我最初来自 Java，这是我第一个使用 C# 的“项目”

所以我知道，如何制作不同的 ColorMatrizes 以在应用程序中绘制处理过的位图。我也有这些，但我想使用处理后的图片来更好地分析图片。

这些是我获取 ImageAttribute 的方法

```
public static ImageAttributes ToGrayscale(Bitmap b)
public static ImageAttributes ToNegative(Bitmap b)
public static ImageAttributes ToSepia(Bitmap b)
public static ImageAttributes SetBrightness(Bitmap b, float Brightness)
public static ImageAttributes SetContrast(Bitmap b, float Contrast) 
```

这是我的画法

```
Graphics g = this.CreateGraphics();
g.DrawImage(bmp,new Rectangle(0, 0, bmp.Width, bmp.Height), 
            0, 0, bmp.Width, bmp.Height, 
            GraphicsUnit.Pixel, ImageAnalysis.ToGrayscale(bmp));
g.Dispose(); 
```

这就是我要的：

```
FindLines( setConrast(toGrayscale(bmp),200) ) 
```

但我发现没有办法将更改永久保存到位图对象。也许有人以前这样做过并且可以帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T18:29:51.817

而不是用这个绘制到屏幕上

```
Graphics g = this.CreateGraphics(); 
```

您创建一个新位图，然后使用像这样获得的 Graphics 对象在该位图上绘制

```
Bitmap bmpNew = new Bitmap( width, height );
Graphics g = Graphics.FromBitmap( bmpNew ); 
```

# sql - SQL中的交叉外键

> ID：551309
> 
> 赞同：3
> 
> 时间：2009-02-15T18:08:37.937
> 
> 标签：sql, foreign-keys

我正在尝试使用 2 个带有交叉外键的表，但是在创建它们时不允许引用不存在的表。有什么方法可以为mysql创建这样的表，比如同时声明两个表或延迟外键的评估？

错误是 1005: Can't create table blocks.frm (errno 150) on a mysql 5.0

SQL：

```
create table if not exists blocks( 
    id int unsigned not null auto_increment, 
    title varchar(100),
    defaultpage int unsigned not null, 
    foreign key(defaultpage) references pages(pageID), 
    primary key(id)) engine=innodb;

create table if not exists pages( 
    pageID int unsigned not null auto_increment, 
    title varchar(50) not null, 
    content blob,  
    blockid int unsigned not null, 
    foreign key(blockid) references block(id), 
    primary key(pageID) ) engine=innodb; 
```

解决问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-15T18:20:56.643

将 cletus 的答案（完全正确）带到代码中......

```
create table if not exists pages( 
    pageID int unsigned not null auto_increment, 
    title varchar(50) not null, 
    content blob,  
    blockid int unsigned not null, 
    primary key(pageID) ) engine=innodb;

create table if not exists blocks( 
    id int unsigned not null auto_increment, 
    title varchar(100),
    defaultpage int unsigned not null, 
    foreign key(defaultpage) references pages(pageID), 
    primary key(id)) engine=innodb;

alter table pages add constraint fk_pages_blockid foreign key (blockid) references blocks (id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T20:42:29.347

您可以延迟外键检查，直到创建表：

```
SET FOREIGN_KEY_CHECKS = 0;
CREATE TABLE ...;
SET FOREIGN_KEY_CHECKS = 1; 
```

# css - 何时停止关心浏览器

> ID：551313
> 
> 赞同：9
> 
> 时间：2009-02-15T18:10:31.787
> 
> 标签：css, browser, internet-explorer-6, usability

问题真的很简单，什么时候才能最终拔掉浏览器版本的插件，而不再关心支持它？正如可以预料的那样，这是关于 IE6 的，特别是现在。我现在正在开发的一个网站有一个基本完成的设计，需要集成，但大多数后端功能预计要再过 6 或 7 个月才能完成。与跳过它并支持 IE7+ 相比，与 IE6 抗争真的值得吗？此外，该网站专门针对摄影师，据我所知，其中许多人都是 Mac-heads。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-15T18:13:52.153

这个问题当然没有神奇的答案，尽管答案很简单。:)

您需要查看该特定站点上访问者的数据，然后根据支持该浏览器所需的额外努力与您希望使用它的访问者数量进行成本与收益分析。

但是，您还可以做其他事情来让您的生活更轻松。例如：

*   使用框架（例如 jQuery）来抽象出浏览器的差异和错误。
*   不要担心像素完美跨浏览器。
*   向 IE 6 发送更简单的样式表，或者根本不发送样式表。

在这些情况下，您仍然支持浏览器，只是没有给它提供您可能是符合现代标准的浏览器的支持级别。

请参阅[Yahoo 的分级浏览器支持政策](http://developer.yahoo.com/yui/articles/gbs/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-15T18:23:53.860

我认为 jQuery 在处理 IE6 方面有很大帮助。鉴于您的用户群构成，您确实必须权衡支持它的成本与收益。这是 Resig 的成本/收益图表。我发现这看起来很有趣。

[![替代文字](https://i.stack.imgur.com/O3i8S.png)](https://i.stack.imgur.com/O3i8S.png)
[（来源：[ejohn.org](http://ejohn.org/images/cost-benefit.png)）]
[http://ejohn.org/blog/the-browsers-of-2009/](http://ejohn.org/blog/the-browsers-of-2009/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-15T18:15:57.623

IE6的*问题*在于，在很多企业环境中，它仍然是 Windows XP 上的标准浏览器。所以基本上微软必须在我们摆脱可怕的 IE6 之前发布一个可靠的 Windows XP 替代品。

编辑：我曾经有一个“代表 27,000 名用户”（IE6）的错误报告，我们有一个错误导致我们的网站无法用于大型企业客户。在原本缓慢移动的环境中，此错误已修复并在 2 天内部署。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-15T18:19:24.433

您不必担心每个 Web 浏览器的样式表错误和特性 - 没有浏览器的显示/布局引擎是完美的。如果您的网站在一些难以支持的较少使用的网络浏览器上*看起来不是最佳的，那也没关系。*但是，您的网页也应该可以在旧的网络浏览器上*访问*和*使用。*

这表示：

*   编写有效、结构良好的 HTML，使用适当的标记，在没有样式表的情况下也有意义且清晰易读（是的，并非所有浏览器都支持它们，而且您永远不知道您的页面将如何呈现）。您的页面应该在禁用样式表的情况下有意义。

*   尝试编写尽可能简单和结构化的样式表，以达到所需的效果。这将增加不同实现之间布局和表示的可能一致性。

*   使用 Web 浏览器上的样式表和您希望大多数目标受众常用的设置来测试您的页面，看看它们看起来不错。在一些旧的和不太常见的浏览器上测试它们，以确保它们看起来可以接受并且仍然清晰易读，即使字体、间距和布局不是你想要的。

如果它看起来不像您在非常常见的浏览器（例如 Internet Explorer 7 和 Firefox 3 现在，以及更多取决于您的受众）上设计的那样好，那将是一种耻辱 - 即使是因为浏览器错误。找到修复它或解决错误的方法，有时您需要使用一些技巧来解决这些错误。

我不知道 Internet Explorer 的各种版本到底有多常见。但是，一般来说，如果您的网站在 Internet Explorer 6 或不太常见的浏览器上明显无法运行或看起来完全乱码，那就太糟糕了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-15T18:14:32.337

这取决于您的用户群，检查他们正在使用什么。

但是，如果是普通大众，我想 ie6 会存在多年。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-16T19:31:18.993

正如其他人所指出的那样，这个问题非常主观，并且网站受众不同。话虽如此，我使用以下作为一般准则：

1.  支持所有主流浏览器（Internet Explorer、Firefox、Safari、Opera、Chrome）的最新版本。

2.  [尝试支持各种统计网站显示](http://www.w3counter.com/globalstats.php)的 98% 的浏览大众所使用的浏览器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-15T18:16:23.863

[如果您使用诸如jquery](http://docs.jquery.com/Browser_Compatibility)之类的框架来抽象出现代浏览器 DOM 实现之间的差异， 那么您现在可以在很大程度上开始忽略它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-15T18:31:18.007

你可能还有一年左右的时间来支持它——微软表示[服务包支持将于](http://support.microsoft.com/gp/lifesupsps/#Internet_Explorer)2010 年 7 月 13 日结束，所以如果你在此之前支持它，你会没事的——在那之后，我想你可以很高兴地告诉你人们与你无关，怪MS :-)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-15T19:01:50.790

听起来您的网站并不针对为大公司工作的数百万受约束的 IE6 用户，因此他们可能不是您的主要关注点。

但对于那些希望接触到这些用户的人来说，请理解许多大型组织不会很快从 IE6 迁移。这太昂贵了。那里的典型用户在他们的机器上没有管理员并且不能更改浏览器（例如，通过下载 Firefox 或 Chrome）。

这是 IE6 到 IE7 迁移的问题之一： IE7 对某些标签很挑剔。例如，你不能有一个自闭合的 div 或 script 标签。如果您尝试这样做，IE7 会呈现一个空白页面。此外，IE7 拒绝标签中的重复属性。这是 IE6 的一个变化。因此，有很多草率编写的 Intranet 应用程序必须先修复才能在 IE6 中运行。而且很难通过代码搜索找到这些问题。这样做几乎没有投资回报率，所以它只是没有被完成。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-15T19:28:26.340

我要说的唯一一件事是让您的用户清楚，如果您决定不支持 IE 6，您就不支持它。您在 IE 6 上的用户可能会对您感到厌烦，但至少他们会知道如何让它工作。更好的是，他们不太可能认为你只是无能。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-15T19:59:07.983

一切都取决于您的目标用户是谁，以及您是否可以在他们身上推送/指定一组浏览器。如果它是一个内部或基于 SaaS 的模型，这可能更容易销售，如果它是一个公共站点，那么你需要打出更广泛的基础，但它仍然归结为目标受众。例如，如果您的目标是 Windows 开发人员，那么支持旧版本的 Safari 可能不是问题……

# ruby-on-rails - 存储布局实例变量的推荐位置在哪里

> ID：551320
> 
> 赞同：3
> 
> 时间：2009-02-15T18:12:51.623
> 
> 标签：ruby-on-rails, ruby

如果您有一个菜单中的布局，该菜单从数据库中获取其菜单项。在 Rails 应用程序中，建议在哪里放置调用并将其分配给布局使用的实例变量？

```
1\. @menuitems # exists in application.html.erb
2\. @menuitems = MenuItem.find(:all) # code exists somewhere (where should this exist?) 
```

@womble - 是的 before_filter 会有所帮助，但我必须将它包含在使用此布局的所有控制器中，或者这是我可以放在 application_controller.rb 中的东西，子控制器和随附的视图是否能够看到该实例多变的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-16T00:02:24.967

`before_filter`是的，您可以在应用程序控制器中将其定义并设置为 a 。您所有的控制器都会在过滤器之前调用它。以这种方式设置全局实例变量并不少见。

另一种方法是在应用程序控制器中使用 memoization 方法，并将 set is 作为辅助方法，类似于流行的`current_user`方法。然后，实例变量将被您的记忆功能很好地包装。例如：

```
def menu_items
  @menu_items ||= MenuItem.all
end
helper_method :menu_items 
```

现在只需`menu_items`从您的布局中调用，而不是`@menu_items`直接使用。

* * *

我想值得一提的是，把它放在应用程序控制器中是没有必要的。如果你只打算在你的视图/布局中使用它，你可以直接把它放在一个帮助模块中，比如 LayoutHelper。您将需要在您的应用程序控制器中使用`helper :all`（或至少）。`helper :layout`

这有点个人喜好——你可能喜欢也可能不喜欢在你的助手中调用 ActiveRecord。但是，如果有时间这样做，那就是它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T19:45:43.397

Martin Fowler 描述了在模板代码中直接调用活动记录函数是 Rails 的 MVC 结构的弱点之一。为了获得最佳实践，您应该在模型类中创建一个成员函数并从您的模板（包括布局模板）中调用该函数。

*   你想要的功能应该在 app/models 的某个地方定义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T21:04:21.977

这种调用应该存在于系统的控制器层中。由于它看起来需要在全球范围内发生，我可能会把它放在一个 中`before_filter`，并且讨厌自己这样做。在 Rails 中获取布局所需的数据有点麻烦，无论您采用哪种方式。

# iis - 使用 LogParser 查询带有额外字段的 IIS 日志

> ID：551326
> 
> 赞同：13
> 
> 时间：2009-02-15T18:15:25.127
> 
> 标签：iis, logparser

我有带有额外字段“foo”的 IIS 日志。

```
#Fields: foo date s-sitename ...
foo1 2009-02-15 W3SVC1 ...
foo2 2009-02-15 W3SVC1 ... 
```

结果所有 LogParser 查询都被破坏了：

```
logparser -i:IISW3C  "SELECT c-ip, s-ip FROM my.log"

Statistics:
-----------
Elements processed: 0
Elements output:    0
Execution time:     0.00 seconds 
```

是否可以将此类额外字段告知 LogParser，以便它可以解析 IIS 文件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-02-15T19:13:44.240

尝试 W3C 格式 (-i:W3C)。

如果这不起作用并且这是一次性分析，您可以创建一个脚本来删除该列。如果这是一项持续的活动，您可能需要考虑使用标准格式，或者至少将额外字段移到末尾。

顺便说一下，LogParser 确实支持[自定义输入格式](http://www.microsoft.com/technet/scriptcenter/tools/logparser/lpfeatures.mspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-23T22:21:18.233

使用选项 -iHeaderFile 定义您自己的字段。logparser -h 将证明附加信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T18:23:53.907

不了解 LogParser，但如果你没有成功，你可以尝试[splunk](http://splunk.com)，它似乎很容易处理不同的日志格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-03T22:04:26.603

这很容易做到！

只需在字符串周围使用**TRIM函数。**这样，您可以在日志解析器查询中键入任何您想要的字符串作为自定义额外字段。

参考： http: [//logparserplus.com/Functions#function_TRIM](http://logparserplus.com/Functions#function_TRIM)

例如，我在此查询中执行此操作（用于检索平均和最大时间）：

```
logparser -i:IISW3C -rtp:-1 -o:NAT -headers:OFF -iw:ON "SELECT TRIM('my-website-custom-extra-column-name.com') AS siteName, TRIM('foo-bar-custom-extra-column-name') AS fooBar, AVG(time-taken) As AverageTimeTaken, MAX(time-taken) As MaxTimeTaken, COUNT(*) As Hits, TO_LOWERCASE(cs-uri-stem) As Uri FROM C:\inetpub\yourwebsite.com\ex*.log TO c:\myOutputParsedLog.txt WHERE (Extract_Extension(To_Lowercase(cs-uri-stem)) IN ('aspx')) GROUP BY TO_LOWERCASE(cs-uri-stem) ORDER BY AverageTimeTaken DESC" 
```

# asp.net - ASP.NET Additional Partial Classes

> ID：551329
> 
> 赞同：1
> 
> 时间：2009-02-15T18:15:57.200
> 
> 标签：asp.net, viewstate, partial-classes

I have a huge code behind file for one of my ASP.NET pages. It would be easier to maintain the code if I could break it up into multiple partial classes. However this is not well documented for ASP.NET.

I've learned that the additional partial classes must be moved into the App_Code folder. It seems that I need to use Protected WithEvents declarations to reference my web controls (although I'm not sure that will work yet).

My hang up right now is the ViewState. I cannot reference that in the additional partial class file. I need to get an ID number from the query string in the partial class. If I create a public property in the code behind file for the query string value, it cannot be referenced in the partial class file. It does not show up.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T18:36:47.527

Sounds like you need to create some classes to encapsulate some of your logic. You can always import the Web specific assemblies into your custom classes should you need to effect changes to the controls on your page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T18:40:37.033

If your code-behind file is really **that** big, then you probably need to push some of the logic out into other classes. Learn the [Model-View-Controller](http://en.wikipedia.org/wiki/Model-view-controller) pattern and investigate the [ASP.NET MVC framework](http://www.asp.net/mvc/) to see how to better lay out your objects.

It's a big code smell in ASP.NET to drop everything into code-behind files. It leads to non-scalable and unmaintainable applications.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T19:13:06.940

分层思考是一个好方法。考虑您如何与数据库交互以及您正在为哪些对象检索数据，并为它们创建“数据层”类。他们的目的严格来说应该是与数据库交互，并返回可能包含适当数据的数据集（创建一个标准并遵循它！）。然后考虑您对该对象的数据执行哪些业务规则，并创建一个“业务层”类，其中包含调用您的数据层类并在该层中应用这些规则的方法。此时，数据应该已准备好显示，您的“表示层”（代码隐藏）负责执行的位置/时间/方式。

我的解释不是很好，但希望你能明白。

# c++ - Strange char* compile error?

> ID：551350
> 
> 赞同：3
> 
> 时间：2009-02-15T18:27:45.630
> 
> 标签：c++, reference, char

Anything wrong with my code below? I got the compile error!

```
typedef unsigned char BYTE;

void foo(char* & p)
{
 return;
}

int main()
{
  BYTE * buffer;
  // error C2664: 'foo' : cannot convert parameter 1 from 'char *' to 'char *&'
  foo ((char*)buffer);

  return 0;
} 
```

Thanks in advance, George

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-15T18:36:49.523

When you cast the `BYTE*` to `char*` a unnamed temporary entity is created with the type `char*`. The function you call takes a reference to a `char*` but you can't take a reference to such a temporary entity because it is not a real variable.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-15T18:56:30.677

You can perform a `reinterpret_cast<char*&>` instead of a static cast

```
foo (reinterpret_cast<char*&>(buffer)); 
```

Or, you can make the argument a const reference:

```
void foo(char* const & p)
{
    return;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-15T18:39:25.587

The parameter of foo is a reference-to-a-pointer. buffer is a BYTE pointer. Reference require an exact match, assignment-compatible won't do.

Two solutions:

1) you probably don't need the '&' in front of p. Loose it and the code will compile.

2) Use a correctly typed variable so the reference will work:

```
 BYTE * buffer;
 char * b = (char *) buffer;
 foo (b);
 buffer = (BYTE*) b;  // because foo may change b 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T20:06:23.597

指针是一个“`buffer`左值”，但是当对它应用强制转换操作时，表达式：

```
(char*) buffer 
```

是一个“右值”（实际上是一个“可修改的右值”——但我认为这只在即将到来的 C++0x 中很重要）。非常量引用不能绑定到右值。

但是，*const*引用可以绑定到右值。因此，对您的程序的以下修改将编译：

```
void foo(char* const& p)  // added 'const' 
```

Stephan T. Lavavej 最近发布了一篇博客文章，其中包含有关左值、右值和引用的大量信息：

*   [右值参考：VC10 中的 C++0x 特性，第 2 部分](http://blogs.msdn.com/vcblog/archive/2009/02/03/rvalue-references-c-0x-features-in-vc10-part-2.aspx)

这篇文章实际上是关于 C++0x 中的新“右值引用”，但它很好地解释了左值和右值是什么，以及它们如何能够和不能与 C++98 中的引用一起使用。这是一个很长的阅读，但非常值得。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-15T18:38:11.923

You are trying to pass a variable reference, but there is no such variable of type char* you could refer to.

It should work this way if I remember correctly:

```
BYTE * buffer;
char* ptr = (char*)buffer;
foo(ptr); // now you have a matching variable to refer to. 
```

Maybe it would be easier to just pass a value instead of a reference.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-15T18:38:25.230

Firstly, when you say

```
(char)buffer 
```

You are lying to the compiler - buffer is pointer, not a char.

Secondly, even if the cast worked, it would produce a temporary, which cannot be bound to a non-const reference.

So, yes, there are at least two things wrong with your code.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-15T18:39:18.440

Write it like this:

```
int main() { 
  BYTE * buffer; 
  char* pbuf = (char*)buffer;
  foo(pbuf);
} 
```

# php - Web 应用部署最佳实践：如何管理本地和实时文件？

> ID：551357
> 
> 赞同：9
> 
> 时间：2009-02-15T18:31:02.953
> 
> 标签：php, version-control, deployment, ftp, web-deployment-project

我正在编写 php web 应用程序，只需通过 FTP 部署它们。为了使它工作，我经常需要进行一些调整/调试，因为我对托管我的（免费）网络服务器几乎没有控制权，所以在我的本地环境中工作的东西可能无法实时工作。

例如，我保留了一个单独的 php 文件，其中包含 class_db_myapp.php，该文件扩展了带有特定 DB 参数的 class_db.php：db 名称、用户名、密码，它们不会是相同的本地和实时的。（有关信息：最近我开始使用 git 进行版本控制）

随着我的应用程序的发展，一些文件被重命名/删除/创建。当需要上传新版本时，我必须依靠我的记忆来知道我必须上传/删除什么，或者干脆删除所有/上传所有。但在第二种情况下，我需要避免删除 class_db_myapp.php 文件......

我还没有想出一个合适的解决方案。

该领域的最佳实践是什么？

我可能错过了关于这个主题的现有讨论，如果是这样，请指出我。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-15T18:59:47.923

如果 ftp 服务器支持符号链接，您可以使用以下技术：

1.  使 public_html 文件夹成为包含当前版本的文件夹的符号链接。（例如“版本 1”）
2.  将新版本上传到新文件夹中。
3.  上传完成后，修改符号链接以激活新版本。

如果出现问题，您可以通过再次修改符号链接轻松恢复到以前的版本。

对于现场环境中不同的数据库和其他设置，有几个选项：

*   创建一个包含环境的文件：“live”或“local”，并根据环境设置将“if语句”放入代码中。
*   如果您能够在 php 中检测环境，请使用它而不是文件。
*   将所有设置放在“versionX”文件夹之外的文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T19:11:26.710

1）为了解决“开发服务器和实时服务器上的不同配置”问题，我使用了这个：

```
// Change 'localhost' to your dev server's address
define('IS_LIVE', 'localhost' != $_SERVER['HTTP_HOST']);

// Database configuration
$db_cfg = IS_LIVE?
  array(...): // Live server config
  array(...); // Dev server config 
```

2) 为了使开发文件和实时文件保持同步，我使用[Beyond Compare](http://www.scootersoftware.com/moreinfo.php)，这是一个可视化差异工具，可让我比较整个目录，包括通过 (S)FTP 进行的远程目录。

我设置了一个配置文件，以便左侧窗口显示开发服务器上的文件，右侧显示实时服务器上的文件。通过这种方式，我可以查看服务器之间的差异（更改、丢失或添加的文件），并允许我轻松地在它们之间复制整个目录、文件或文件中的特定行。很有用。

它还允许您“忽略”您不想同步的特定目录，例如具有用户生成文件或日志的目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-15T22:19:31.313

### 移动文件

您正在寻找[rsync](http://en.wikipedia.org/wiki/Rsync)或类似 rsync 的东西。Rsync 是一个程序/系统，可让您将一组文件与另一组文件同步。简单来说，它可以查看您的源代码和生产代码，并且只会上传不同的文件。

```
rsync -av --cvs-exclude /soure/dir user@example.com:./source/dir 
```

--cvs-exclude 标志的命名有点误导。它将使 rsync 忽略 rcs 程序 cvs 忽略的文件，而*不仅仅是*.cvs 目录。您可以通过运行获取有关标志的更多信息

```
rsync --help 
```

您托管应用程序的服务器将需要运行 rsync 守护程序，但这对于这些天的课程来说是正常的。

如果你想变得非常聪明，可以使用 SSH 密钥配置 rsync，甚至不需要输入密码。然而，这绝不是必要的。

### 不同的配置信息

将在本地服务器和实时服务器之间变化的任何配置信息分离到一个文件或一组文件中。您可以通过 FTP 将这些文件传输到实时服务器，并使用 --exclude 选项告诉 rsync 忽略这些文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T19:11:11.063

不确定它是否理想，但例如在我的数据库登录配置中，我让它检测代码正在运行的主机（只是下面的部分片段）：

```
$active_group = "default";
if($_SERVER['SERVER_NAME'] == 'argent.local' || 
   $_SERVER['SERVER_NAME'] == 'beta.website.com') 
   $active_group = "development";

$db['default']['hostname'] = "localhost";
$db['default']['username'] = "username";
$db['default']['password'] = "password";
$db['default']['database'] = "dbname";
$db['default']['dbdriver'] = "mysql";

$db['development']['hostname'] = "localhost";
$db['development']['username'] = "username_dev";
$db['development']['password'] = "password_dev";
$db['development']['database'] = "dbname_dev";
$db['development']['dbdriver'] = "mysql"; 
```

（argent.local 这里是我的本地开发箱）我也在其他几个地方这样做，比如在主类中，我根据服务器是生产还是本地开发启用/禁用 PHP 错误输出（因为错误输出在dev，但我从不希望在生产中输出）：

```
if($_SERVER['SERVER_NAME'] == 'argent.local' || 
   $_SERVER['SERVER_NAME'] == 'beta.website.com') 
    error_reporting(E_ALL);
    else error_reporting(0); 
```

这样，我签入 SVN 的代码将在 live 和 dev box 上运行，而无需跟踪将哪个部署在哪里。这样我就可以擦除所有现有文件并重新部署，而不必担心移动任何文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-15T19:39:44.020

由于您没有 ssh 访问权限，因此请在本地计算机上测试并提交所有内容。然后您可以使用 ftp 客户端[filezilla](http://filezilla-project.org)的目录比较功能，让您查看哪些文件已被修改。你不需要记住任何东西。

最佳实践是使用`git push`. 但由于您的选择有限，上述解决方案就可以了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-12-24T18:10:01.703

诸如[phing](http://phing.info)或[ant](http://ant.apache.org)之类的构建工具应该能够完成您想做的事情。通过一些脚本，您应该能够自动执行当前执行的步骤，以获取应用程序配置并使用单个命令上传应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-18T05:29:23.570

我推荐 Capistrano，它是来自 Rails 世界的通用部署工具。它基本上是从头开始设计的，用于管理部署。这是 Capistrano 的主页：

[http://capify.org/](http://capify.org/)

这里有几个网站展示了其他人如何使用 Capistrano 进行 PHP 部署：

[http://www.simplisticcomplexity.com/2006/08/16/automated-php-deployment-with-capistrano/](http://www.simplisticcomplexity.com/2006/08/16/automated-php-deployment-with-capistrano/)

[http://donc.wordpress.com/2006/10/29/deploying-php-with-capistrano/](http://donc.wordpress.com/2006/10/29/deploying-php-with-capistrano/)

注意：您必须编写/自定义您的部署脚本，但 Capistrano 应该让您做您需要的。

# javascript - 让我们使用脚本标签完全在客户端解决跨域 ajax

> ID：551363
> 
> 赞同：0
> 
> 时间：2009-02-15T18:35:25.017
> 
> 标签：javascript, ajax, cross-domain, eval

我知道，有 JSONP，它涉及服务器合作来命名空间数据。

困扰我的是 script 标签的内容`src`被**评估**，但它*不可读*。

```
<script src="http://www.google.com"></script> 
```

我们需要弄清楚的是如何命名数据，仅此而已。当然，我尝试了非常愚蠢的事情，但没有相关结果（我知道这不起作用，但你可以看到我想要实现的目标）：

```
<script>eval('var namespace="');</script>
<script src="http://www.google.com"></script>
<script>eval('";');</script> 
```

由于确实没有关于如何`src`评估内容的相关信息，我知道它是全局范围，但是如果我们可以跟踪评估步骤或者可能以某种方式*链接*评估范围（也没有太多关于此的文档），我们可以解决这个烦人的“*评估但不可读*”的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T18:39:35.397

由于浏览器安全策略，我不确定这是否可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T04:41:05.047

HTML5 提供`window.postMessage`了一种安全的跨域消息传递机制，并受到 Firefox 3、Opera 9.6 和 WebKit nightlies 的支持。

那就是说您上面的建议行不通，因为它需要与 javascript 完全不同的行为`eval`。 `eval`在当前上下文中解析并执行给定的字符串——您要求的是 eval 更改包含函数的实际代码。例如。

```
 for (var i = 0; i < 10; i++) eval("; doSomething();"); 
```

会成为

```
 for (var i = 0; i < 10; i++) ; doSomething();; 
```

这意味着 for 循环变为空，并且`doSomething`只会被调用一次。显然，这将导致难以理解语义，并使其使用安全性大大降低，因为 eval 将获得直接影响控制流的能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T18:40:55.690

我倾向于说离开它。这类问题将得到解决，但不是通过破解我们已有的东西。在这方面，网络从根本上被破坏了。来自一个域的任何脚本都可以在另一个域上执行这一事实是一个严重的安全漏洞，如果不加以检查，它将阻碍 Web 的发展。

[http://www.slideshare.net/webdirections/douglas-crockford-ajax-security-presentation](http://www.slideshare.net/webdirections/douglas-crockford-ajax-security-presentation)

# iphone - How do I put files into the Documents folder in xcode for iPhone development?

> ID：551378
> 
> 赞同：14
> 
> 时间：2009-02-15T18:40:21.840
> 
> 标签：iphone, cocoa-touch

I would like to put some sample images in the applications Documents directory. Can I put these somewhere in my xcode project or do I have to programmatically add them to the Documents folder from the project resources?

Users will be able to add their own images (which will be written to the Documents folder) and I would prefer not to access the sample images separately, I just want them to be pre-seeded in the Documents folder (I'm assuming resources in xcode aren't stored there in the first place?).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T18:58:14.120

我认为您需要将图像添加到您的应用程序中，然后在应用程序第一次启动时将它们复制过来。只需检查它们是否存在（或在设置中设置布尔标志或其他东西）`applicationDidFinishLaunching`并从那里创建您需要的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-17T22:04:41.013

此链接可能对您有所帮助[http://www.iphonedevsdk.com/forum/iphone-sdk-development/12014-save-file-directly-into-documents-directory-xcode.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/12014-save-file-directly-into-documents-directory-xcode.html)

我也在寻找这个问题的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-21T19:39:59.120

我只是调查了同样的事情。当您将文件放入资源中时，它将成为您的应用程序包的一部分。这对我来说很好，因为它是一个数据文件（html）。对您来说，您必须从包中读取它，并在应用程序运行时将其保存到文档文件夹中。

# xcode - Xcode 重复/删除行

> ID：551383
> 
> 赞同：129
> 
> 时间：2009-02-15T18:43:40.940
> 
> 标签：xcode, line, duplicate-data

来自 Eclipse 并且一直习惯于重复行，很奇怪发现 Xcode 没有这样的功能。或者是吗？

我知道可以更改系统范围的键绑定，但这不是我想要的。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2009-02-15T18:50:33.810

*删除一行*： **`Ctrl`-`A`**转到该行的开头，然后**`Ctrl`-`K`**删除它，再一次**`Ctrl`-`K`**删除空行。（我不经常使用 Xcode，但在 Emacs 和其他带有 Emacs 类绑定的文本输入中已经习惯了，而且它似乎也可以在 Xcode 中使用。）

*并复制一行*：我不知道有很多程序有这个命令，但通常我只使用 Copy+Paste - 在 Xcode 中它类似于 CUA： **`Ctrl`+`A`**转到行首，**`Shift`+`↓</kbd>`**选择它，**Command** +`C`复制和**Command** +*`V`粘贴两次（一次覆盖该行，一次附加到它）。

（来自一个一直在输入和编辑文本的人，经常在不同的程序中，偶尔会因为在文本输入中进行一些更正时不得不用一个愚蠢的小部件分散自己的注意力而生气，以至于他无法避免记住这些序列和习惯）

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2009-10-04T14:08:14.383

重点是不要使用`Cmd-C`/`Cmd-V`快捷方式。我有同样的问题来自 IntelliJ，并且能够复制行`Cmd-D`并删除它们可以`Cmd-Y`节省大量时间。

从那以后它就一直困扰着我。但是，看起来其他人已经找到了可行的[解决方案](http://flexgraphix.com/blog/?p=62)。

简而言之，创建一个`~/Library/KeyBindings/PBKeyBinding.dict`包含以下内容的文件并重新启动 Xcode。

```
{
    "^$K" = (
        "selectLine:",
        "cut:"
    );

    "^$D" = (
        "selectLine:",
        "copy:",
        "moveToEndOfLine:",
        "insertNewline:",
        "paste:",
        "deleteBackward:"
    );
} 
```

这将创建两个快捷方式：`Ctrl`-用于删除当前行和- -用于`Shift`复制当前行。请注意，这**仅**在您**不**使用 Xcode 中设置的自定义键绑定时才有效。切换到“XCode Default”，一切都会正常。在 Snow Leopard 上的 XCode 3.2 上测试。`K``Ctrl``Shift``D`

 ****有关 Mac OS X 键绑定的更多信息：http: [//funkworks.blogspot.it/2013/03/republishing-of-wwwerasetotheleftcompos.html](http://funkworks.blogspot.it/2013/03/republishing-of-wwwerasetotheleftcompos.html)

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2012-10-24T12:50:47.980

删除类似 eclipse `CTRL`+的行`D`（在 Xcode 4.5.1 上测试）：

首先，改变这些权利：

```
sudo chmod 666 /Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Resources/IDETextKeyBindingSet.plist

sudo chmod 777 /Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Resources/ 
```

用 Xcode 自己打开`/Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Resources/IDETextKeyBindingSet.plist`并添加这个新条目：

```
deleteToBeginningOfLine:, moveToEndOfLine:, deleteToBeginningOfLine:, deleteBackward:, moveDown:, moveToBeginningOfLine: 
```

![在此处输入图像描述](https://i.stack.imgur.com/IDvrZ.png)

重新启动 Xcode 并打开 Xcode > Preferences > KeyBindings。找到你的宏并定义一个快捷键：

![在此处输入图像描述](https://i.stack.imgur.com/7pR03.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2010-10-27T10:13:33.080

我尝试了键绑定解决方案，但我无法让它工作。然而，编辑我的 XCode 键绑定就像一个魅力。这就是我如何做到的。

此解决方案不会更改剪贴板的内容！

**打开 XCode 键绑定：**

![替代文字](https://i.stack.imgur.com/CqwG3.png)

**在编辑用户脚本对话框中：**

1.  复制“Move Line Down”脚本并重命名
2.  复制“Move Line Down.scpt”文件，重命名脚本，在脚本编辑器中通过（双击）选择文件
3.  编辑脚本（打开“AppleScript 编辑器”）并删除“删除（段落 startLine 到 endLine）”段落。
4.  如果您不想重新启动 XCode，您似乎必须删除并重新添加脚本。确保将“输出”设置为“丢弃输出”，否则源文件中将包含“（空）”
5.  我稍微修改了脚本以选择正确的行：

重复排队：

```
using terms from application "Xcode"
tell first text document
    set {startLine, endLine} to selected paragraph range

    if startLine > 1 then
        set theText to (paragraphs startLine through endLine)
        set theText to (theText as string)
        make new paragraph at beginning of paragraph (startLine) with data theText
        set selected paragraph range to {endLine + 1, endLine + endLine - startLine + 1}
    else
        beep 1
    end if
end tell
end using terms from 
```

重复行向下：

```
using terms from application "Xcode"
tell first text document
    set {startLine, endLine} to selected paragraph range
    if endLine < (count paragraphs) then
        set theText to (paragraphs startLine through endLine)
        set theText to (theText as string)
        (* delete (paragraphs startLine through endLine) *)
        make new paragraph at beginning of paragraph (endLine + 1) with data theText
        set selected paragraph range to {startLine, endLine}
    else
        beep 1
    end if
end tell
end using terms from 
```

![替代文字](https://i.stack.imgur.com/A8O43.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-05-21T13:09:07.143

好的，所以我让这个工作了一段时间，然后突然坏了。现在我结合了这里的不同帖子，找到了适用于 XCode 6.3.1 的解决方案。

1.  `/Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Versions/A/`使用 Finder前往。

2.  找到名为 Resources 的文件夹。右键单击它，按获取信息，解锁共享和权限设置（通过按锁）并将其设置为所有人的读写。

3.  进入文件夹，找到文件IDETextKeyBindingSet.plist。右键单击它，按获取信息，解锁共享和权限设置（通过按锁）并将其设置为所有人的读写。

4.  使用 XCode 打开文件（默认）

5.  找到删除，右键单击并添加新行。例如，将其命名为 Delete Line。在值字段中，键入：`selectLine:, deleteBackward:`。（这也可以用于重复行`selectLine:,copy:,moveToEndOfLine:,insertNewline:,paste:,deleteBackward:`：）

![](https://i.stack.imgur.com/32fx9.png)

6.  启动 XCode，转到首选项/键绑定并搜索删除行。设置快捷方式。享受。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-11-29T11:37:28.187

要在 Xcode 10.1 中删除行，请按照以下屏幕截图的步骤添加快捷键。

[![在此处输入图像描述](https://i.stack.imgur.com/EIAEG.png)](https://i.stack.imgur.com/EIAEG.png)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-11-20T17:06:43.863

由于 Xcode 4 使使用键绑定难以实现这一点，因此我使用了[Keyboard Maestro](http://www.keyboardmaestro.com/main/)（[Quickeys](http://startly.com/products/quickeys/mac/4/)也应该可以很好地工作，但它不完全兼容 Lion）。例如，这是我的键盘大师快捷键（绑定到⌘-⇧-D）：

[http://bit.ly/thC6yf](http://bit.ly/thC6yf)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-02-18T23:12:38.687

我知道这个线程已经很老了，但是我找到了另一种使用[BetterTouchTool](http://www.bettertouchtool.net/)的解决方案，您可以通过在 BTT 中进行这样的配置来在一个快捷方式中执行`Ctrl`+ `A`、`Ctrl`+ `K`、`Ctrl`+序列：`K`

![在此处输入图像描述](https://i.stack.imgur.com/dhOdK.png)

（使用附加附加操作按钮附加第二个和第三个快捷方式）

PS：来自 Eclipse，其中`Cmd`+`D`是删除行 ^^

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-10-17T09:11:22.140

我们在 Xcode 9.0 上，键绑定仍然无法正常工作。叹。

我发现[这个要点](https://gist.github.com/emotality/b1bcb2bb8a07921f9c8cad1c969daedf)很有帮助，所以在这里重新发布以供将来参考：

1.  打开`/Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Versions/A/Resources/IDETextKeyBindingSet.plist`
2.  将以下 XML 片段添加到该文件的底部上方`</dict>`
3.  转到 Xcode 首选项 -> 键绑定 -> 文本选项卡 -> 滚动直到看到重复
4.  单击复制当前行，为其添加快捷方式，例如。Cmnd+D（解决任何重复绑定）
5.  打开 Xcode

`<key>Duplication</key> <dict> <key>Duplicate Current Line</key> <string>moveToBeginningOfLine:, deleteToEndOfLine:, yank:, insertNewline:, moveToBeginningOfLine:, yank:</string> <key>Duplicate Lines</key> <string>selectLine:, copy:, moveToEndOfLine:, insertNewline:, paste:, deleteBackward:</string> <key>Delete Line</key> <string>selectLine:, deleteBackward:</string> </dict>`

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2010-08-22T07:03:03.633

使用用户脚本。

有脚本可以移动和删除行。您必须为这些脚本定义键绑定（菜单*Scripts* -> *Edit User Scripts...*，在 xCode 3.2 下）。

要复制行，您必须制作自己的脚本。但这很简单！复制“下移行”脚本并删除删除选定文本的行：

```
delete (paragraphs startLine through endLine) 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-02-15T18:46:18.830

三击选中整行，command-c 选中，command-v 两次复制。它不是 Xcode 功能，它只是操作系统的一部分。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-04-27T09:07:26.017

[这里](https://stackoverflow.com/questions/10266170/xcode-4-duplicate-line)有一个 XCode4 行重复的解决方案

我还在 plist 中添加了行删除：

`<key>Remove Line</key> <string>selectLine:, deleteBackward:</string>`

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-10-20T15:05:58.143

无需修改 Xcode。你可以只使用 Xcode 扩展[Linex](https://github.com/uchuugaka/Linex)

[![在此处输入图像描述](https://i.stack.imgur.com/Irit6.jpg)](https://i.stack.imgur.com/Irit6.jpg)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2010-08-25T09:48:38.667

[damien.flament](https://stackoverflow.com/questions/551383/xcode-duplicate-delete-line/3540522#3540522)的解决方案效果很好，您可能需要将**输出**设置为“丢弃输出”，请参见下图

![用户脚本设置](https://i.stack.imgur.com/9nTJo.png)

PS：我不知道如何评论他的回答。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-01-15T09:48:07.600

如上所述，关闭 XCode 并 在部分`~/Library/Application Support/Xcode/Key Bindings/ <user>.pbxkeys`内部插入以下内容：`<dict>``<key>text</key>`

```
 <key>^D</key>                                                                                                      
    <array>                                                                                                            
        <string>moveToLeftEndOfLine:</string>                                                                               
        <string>deleteToEndOfLine:</string>                                                                                      
    </array>                                                                                                           
    <key>^K</key>                                                                                                      
    <array>                                                                                                            
       <string>selectLine:</string>                                                                               
       <string>copy:</string>                                                                                     
       <string>moveToEndOfLine:</string>                                                                          
       <string>insertNewline:</string>                                                                            
       <string>paste:</string>                                                                                    
       <string>deleteBackward:</string>                                                                           
    </array> 
```

启动 XCode 并享受`CTRL`- `SHIFT`-`D`和`CTRL`- `SHIFT`- `K`。
如果您想要`CTRL`-`D`和`CTRL`- `K`，请在键定义中使用`^d`和`^k`。确保文件中没有重复的键绑定。

使用 XCode 3.2 对我来说效果很好

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-10-28T09:03:01.003

这可以使用[BetterTouchTool](http://www.bettertouchtool.net/)。CMD+D 将复制一行。像这样创建一个新的快捷方式：

[![在此处输入图像描述](https://i.stack.imgur.com/qbIp8.png)](https://i.stack.imgur.com/qbIp8.png)

使用附加附加操作按钮附加第二个和第三个快捷方式

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2010-06-16T19:14:37.570

如果您已经自定义了 Xcode 键绑定，则必须编辑文件：`~/Library/Application Support/Xcode/Key Bindings/<user>.pbxkeys`. 只需将两个数组（如上所述）添加到`Root/text`字典中。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-09-22T10:05:31.100

三步删除当前行（看太长，但做的很快：D）

`Cmd`+`→</kbd> : move to end of line
`Cmd` + `Delete` : delete to begin of line
`Delete` : delete empty line`

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-01-17T22:58:48.290

对于 Xcode 6.1 到 Xcode > Preferences > KeyBindings > Text 并且有“删除到行尾”并分配你想要的键。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-09-23T11:29:47.860

XCodePlus 删除线插件，是一个为您执行此操作的 XCode。它预装了 Alcatraz 包管理器...

[https://github.com/payliu/XcodePlus](https://github.com/payliu/XcodePlus)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-10-17T12:37:56.610

从 Xcode 9 开始，仍然没有内置的方法来复制行。自定义键绑定似乎有问题。

**更新：** Xcode 10.0 beta 6 (10L232m) 是一样的。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-10-21T10:31:47.453

去这个地址：

/Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Resources/IDETextKeyBindingSet

然后将 IDETextKeyBindingSet.plist 文件复制到某个位置，然后打开复制的文件并插入

selectLine:, copy:, paste:, paste: like this picture [在此处输入图像描述](https://i.stack.imgur.com/0HiFg.png) 并保存并替换此地址中的复制文件 /Applications/Xcode.app/Contents/Frameworks/IDEKit.framework/Resources/IDETextKeyBindingSet

然后重新启动 xcode，打开 xcode 首选项，转到键绑定选项卡，搜索重复行（自定义）并为其定义短键，如下图所示

[[1]：https://i.stack.imgur.com/UTeZu.png](https://i.stack.imgur.com/fCFkX.png)

# css - CSS - 内容仅在 IE 7 中被推到左侧

> ID：551385
> 
> 赞同：1
> 
> 时间：2009-02-15T18:46:06.163
> 
> 标签：css, internet-explorer-7

我的[网站](http://dandoes.net)同时通过了[XHTML](http://validator.w3.org/check?uri=http:%2F%2Fdandoes.net)和[CSS](http://jigsaw.w3.org/css-validator/validator?uri=http:%2F%2Fdandoes.net)的验证。它在 Firefox、Chrome、Safari、Opera 甚至 IE 6 中看起来都不错（唉，不是 IE 5.5，但谁在乎呢？）。那么，为什么在 IE 7 中一切都被推到左边呢？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T19:05:24.930

当我制作居中页面时，我会执行以下操作；

设置“页面”-div 的宽度并固定边距并将内容居中放置在正文中。

```
#page {
  width: 900px;
  margin: 0 auto;
  text-align: left;
}

body {
  text-align: center;
} 
```

在所有浏览器中对我来说一直都很好......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T19:35:19.787

在 div 中的所有内容周围放置另一个 div`<body>`并在该 div 上设置您的边距和宽度样式，而不是 body 本身。设置`text-align: center;`为`<body>`好。

```
<body> <!-- text-align: center -->
    <div id="container"> <!-- width 960px, margin 30px auto, text-align: left, position: relative -->
        <div id="nav"></div>
        <div id="page"></div>
        <div id="preload"></div>
    </div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T19:42:40.380

这很无聊，因为您在 body/html 元素上进行了定位，这是完全错误的，并且在所有浏览器上看起来都不会相同。见：[http ://www.sitepoint.com/blogs/2009/02/11/styling-the-html-and-body-elements/](http://www.sitepoint.com/blogs/2009/02/11/styling-the-html-and-body-elements/)

只需使用包装元素 - 永远不要定位身体。

# .net - DESCryptoServiceProvider .net 和限制加密字符集

> ID：551406
> 
> 赞同：1
> 
> 时间：2009-02-15T19:00:19.530
> 
> 标签：.net, encryption

所以我正在使用.net DESCryptoServiceProvider 加密一个字符串

是否可以限制加密字符串的字符集，使其不包含特定的字符范围？

例如 / 或 \?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T19:43:02.000

你想从纯文本字符串到加密字符串的想法是什么？如果是这样，请使用支持全范围 Unicode 的编码将明文转换为二进制数据，并使用 base64 将加密的二进制转换为“安全”的加密文本。

所以管道的步骤是：

**加密**

*   将明文（字符串）转换为明文（字节） - 例如

    ```
    byte[] plainBinary = Encoding.UTF8.GetBytes(plainText); 
    ```

*   `DESCryptoServiceProvider`使用( `plainBinary`to `encryptedBinary`)以正常方式加密

*   将加密二进制转换为加密文本：

    ```
    string encryptedText = Convert.ToBase64String(encryptedBinary); 
    ```

**解密：**

*   将加密文本转换为加密二进制：

    ```
    byte[] encryptedBinary = Convert.FromBase64String(encryptedText); 
    ```

*   以正常方式解密（`encryptedBinary`to `plainBinary`）

*   将纯二进制转换为纯文本：

    ```
    string plainText = Encoding.UTF8.GetString(plainBinary); 
    ```

`StreamWriter`或者，您可以使用 a （用于将文本转换为二进制）、a `CryptoStream`（用于 DES 加密）和 a对数据进行管道传输，最后`ToBase64Transform`只保留`Encoding.ASCII`加密和 base64 编码数据的转换（例如，使用 ） . 然后，您将使用 a`FromBase64Transform`来反转该过程。

如果 base64 不足以限制创建的字符，您始终可以编写自己的类似 base64 的转换 - 任何需要任意字节并生成可以解码回这些字节的文本（仅使用允许的字符）都应该是美好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T19:05:03.497

不，但您可以使用[base64](http://en.wikipedia.org/wiki/Base64)编码对其进行编码。所以它不会包含任何非文本字符。

```
byte[] encryptedStream = ..
string encryptedString = Convert.ToBase64String(encryptedStream ); 
```

# c# - 检查当前是否没有用户登录到 Windows

> ID：551412
> 
> 赞同：15
> 
> 时间：2009-02-15T19:03:38.927
> 
> 标签：c#, .net, windows-services

我正在编写一个 Windows 服务应用程序，它侦听连接并按照网络上另一台计算机上运行的不同应用程序的指示执行某些任务。

其中一项任务确保当前没有用户登录，锁定工作站，删除一些文件，然后重新启动系统。我考虑使用[此解决方案](https://stackoverflow.com/questions/132620/how-do-you-retrieve-a-list-of-logged-in-connected-users-in-c)来查看正在运行的进程列表并检查用户名，通过将用户名与 SYSTEM、NETWORK 等进行匹配来确定是否没有用户登录。我意识到我正在运行 PostgreSQL，它使用名为的用户帐户postgres 这样就行不通了。检查 explorer.exe 是否正在运行也不起作用，因为 explorer 有时会崩溃，或者我有时会自己结束进程并重新启动它。

确定没有用户使用 C# 登录到工作站的好方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-15T19:11:15.900

用于[`WTSGetActiveConsoleSessionId()`](http://msdn.microsoft.com/en-us/library/aa383835%28VS.85%29.aspx)确定是否有人在本地登录。用于[`WTSEnumerateSessions()`](http://msdn.microsoft.com/en-us/library/aa383833.aspx)确定是否存在任何会话（包括远程终端服务会话）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-09T03:06:06.380

另一种选择，如果您不想处理 P/Invokes：使用[Cassia](https://github.com/danports/cassia)。

```
using Cassia;

public static bool IsSomeoneLoggedOn(string server)
{
    foreach (ITerminalServicesSession session in new TerminalServicesManager().GetSessions(server))
    {
        if (!string.IsNullOrEmpty(session.UserName))
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-20T15:08:08.860

您试图检查是否`explorer.exe`正在运行。为什么不走`winlogon.exe`流程？

```
public bool isLoggedOn()
{
    Process[] pname = Process.GetProcessesByName("winlogon");
    if (pname.Length == 0)
        return false;
    else
        return true;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-15T19:22:36.887

CodeProject 文章“[使用本地安全机构在 .NET 中枚举用户会话](http://www.codeproject.com/KB/system/LSAEnumUserSessions.aspx)”可能是您正在寻找的内容。该代码枚举用户并且可以识别哪些用户（如果有的话）是交互式的（即，哪些用户是真实的人）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-15T19:15:24.733

你可以使用 WMI

```
select UserName from Win32_ComputerSystem 
```

# flash - Flash Transparency：它在 IE 以外的任何地方都能可靠地工作吗？有解决方法吗？

> ID：551441
> 
> 赞同：1
> 
> 时间：2009-02-15T19:26:37.873
> 
> 标签：flash, transparency, wmode

我得到了一个站点布局和一个需要透明度的 Flash 导航来合并。但是，使用 wmode='transparent' 的结果在使用最新 Flash 10 的浏览器之间高度不一致。

在 IE7 中，示例页面运行良好。在 FireFox3 (Win) 中，flash 中的颜色不正确。在 Safari/FF3 (Mac) 中，Flash 根本不透明。

我可以使用 z-index 将其发送到所有内容的后面以获得相同的效果，但是顶部的 div 不允许单击菜单。

我做了一个测试页面来演示：http: [//quietmind.biofeedback.net/test/so.html](http://quietmind.biofeedback.net/test/so.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-15T22:00:02.623

据我所知，wmode 一直很痛苦。尽管我不得不承认我没有在 FP10 中运行测试，但从未正确地跨浏览器工作。

wmode transparent 的已知问题是：

*   在非英文键盘中输入“@”符号。
*   标签索引疯狂。
*   整体性能下降。
*   打印问题（例如[这里](http://www.5etdemi.com/blog/archives/2005/06/firefox-wmodetransparent-is-completely-screwy-and-breaks-textfields/)）。
*   询问[Google](http://www.google.co.uk/search?q=wmode+problems+dowdell)并帮助自己。

所以，不，这不可靠。实际上，对我来说，任何需要 wmode 的设计都不是有效的设计。

您可以在[GPU 加速意味着什么？](http://www.kaourantin.net/2008/05/what-does-gpu-acceleration-mean.html).

祝你好运。

胡安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T22:01:33.273

将 wmode 设置为透明会导致一些奇怪的问题，但这对我来说是新的。我怀疑你对 swf 本身的透明度做了一些奇怪的事情，这会导致插件搞乱计算。从调查开始。但是，如果可能的话，尽量避免 wmode 透明，它充其量是一种性能消耗，并且可能导致一大堆奇怪的行为（尽管可以避免混乱的颜色）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-16T02:36:13.303

这两个答案都很有帮助，但事实证明，原始 SWF 中有一张图片的 jpg。出于某种原因，Flash 的 Windows 实现处理得很好，但 Mac 版本并没有尝试使其透明。

仍然存在 Windows FF3 使用透明设置破坏 Flash 上的颜色的问题，但这是一个单独的问题。

# ruby - 红宝石 TK 下载

> ID：551443
> 
> 赞同：1
> 
> 时间：2009-02-15T19:30:04.560
> 
> 标签：ruby

```
require 'tk'
root = TkRoot.new { title "Hello world" }
TkLabel.new(root) do
text 'Hello world!'
end
Tk.mainloop 
```

我在哪里可以下载 Ruby TK？我用谷歌搜索但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T19:33:06.050

在 linux 上，它包含在**libtcltk-ruby**包中。

```
sudo apt-get install libtcltk-ruby
```

在 Windows 上，绑定包含在一键式 ruby​​ 安装程序中。

-约翰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T08:46:27.937

在 MacOS X 上，使用自制软件：

```
brew install --with-tcltk ruby 
```

如果此命令导致显示 ruby​​ 已安装的消息，并且如果`require 'tk'`失败，则`brew uninstall ruby`.

# database - 扩展 Web 应用程序和标记 - Digg、Del.icio.us、StackOverflow

> ID：551453
> 
> 赞同：4
> 
> 时间：2009-02-15T19:38:51.073
> 
> 标签：database, tags, web-applications, scaling, tagging

Digg、Del.icio.us 和 StackOverflow 等网站如何实现标记？

我知道这个其他问题有一个与交叉引用表的多对多关系的[公认答案。](https://stackoverflow.com/questions/20856/how-do-you-recommend-implementing-tags-or-tagging)但是“大男孩”是怎么做到的呢？一样的方法？它是如何扩展的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-15T19:46:06.347

这是经常被引用的文章，它通过实际性能指标分解标记模式：http: [//tagging.pui.ch/post/37027746608/tagsystems-performance-tests](http://tagging.pui.ch/post/37027746608/tagsystems-performance-tests)

作者指出，delicious 的创始人解释说，使用 RDBMS 进行标记根本无法扩展到负载下的数百万个项目。[在这种情况下，像Lucene](http://lucene.apache.org/java/docs/)这样的替代品可能更适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-10T12:36:58.370

我确信在一个非常大的系统中额外的 JOIN 查询会太昂贵。

标签要么非规范化地存储在主表中，要么可能有一个单独的标签表，每个标签项都有一行。

# database - 这是一个糟糕的表索引策略吗？

> ID：551458
> 
> 赞同：0
> 
> 时间：2009-02-15T19:40:49.743
> 
> 标签：database, sql-server-2005, clustered-index

有问题的表是供应商软件在我们网络上使用的数据库的一部分。该表包含有关文件的元数据。表的架构如下

```
Metadata 
ResultID (PK, int, not null) 
MappedFieldname (char(50), not null) 
Fieldname (PK, char(50), not null) 
Fieldvalue (text, null) 
```

ResultID 和 Fieldname 上有一个聚集索引。该表通常包含数百万行（在一种情况下，它包含 5 亿行）。该表由 24 个工作人员填充，每个工作人员在“处理”数据时运行 4 个线程。这会导致许多非顺序插入。稍后在处理后，我们的一些内部软件将更多数据插入到此表中。给定表的碎片至少为 50%。对于最大的表，它是 90%。我们没有 DBA。我知道我们迫切需要一个数据库维护策略。就我的背景而言，我是一名在这家公司兼职的大学生。

我的问题是，聚集索引是解决这个问题的最佳方法吗？是否应该考虑另一个索引？对于这种类型和类似的临时 DBA 任务，是否有任何好的参考资料？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-15T19:52:05.410

索引策略完全取决于您如何查询表以及从各个查询中获得多少性能。

当进行无序插入时（这称为“页面拆分”），聚集索引可以强制对行进行物理重新排序（在磁盘上）。在索引页上没有可用空间的大表中，这可能需要一些时间。

如果您不是*绝对*需要跨两个字段的聚集索引，那么不要。如果它更像是一种 UNIQUE 约束，那么一定要把它变成一个 UNIQUE 约束。这些不需要重新排序。

确定针对表的典型查询是什么，并相应地放置索引。您拥有的索引越多，数据更改 (INSERTs/UPDATEs/DELETEs) 的速度就越慢。不要创建太多索引，例如在不太可能被过滤/排序的字段上。

*通常，仅在一起*过滤/排序的字段上创建组合索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T22:02:24.753

仔细查看您的查询 - 那些命中数据表的查询。索引会服务吗？如果您在 (ResultID, FieldName) 上有一个按该顺序排列的索引，但您正在查询给定 Fieldname 的可能 ResultID 值，则 DBMS 很可能会忽略该索引。相比之下，如果您在 (FieldName, ResultID) 上有一个索引，它可能会使用该索引 - 当然对于简单的值查找 ( `WHERE FieldName = 'abc'`)。就唯一性而言，任一索引都运行良好；在查询优化方面，（至少可能）存在巨大差异。

使用[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)查看 DBMS 如何处理您的查询。

聚集索引与非聚集索引通常是 DBMS 中的二阶优化效果。如果您的索引正确，则聚集索引和非聚集索引之间存在微小差异（聚集索引的更新惩罚更大，作为对稍小的选择时间的补偿）。在担心二阶效应之前，请确保其他所有内容都已优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T20:02:07.413

据我所知，聚集索引还可以。关于其他索引，您需要提供对该表进行操作的典型 SQL 查询。只是突然创建一个索引绝不是一个好主意。您在谈论碎片和索引，这是否意味着您怀疑查询执行速度变慢？或者您只是想缩小/整理数据库/索引？

在非工作时间不时对索引进行碎片整理是个好主意，尽管您必须考虑到频繁/随机插入，在表中留出一些备用空间以防止页面拆分（这确实会影响性能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T22:39:34.557

> > 我知道我们迫切需要一个数据库维护策略。

+1 用于确定需求

> > 就我的背景而言，我是一名在这家公司兼职的大学生

继续学习，获得经验，但同时获得一位经验丰富的顾问。

> > 该表由 24 个工作人员填充，每个工作人员运行 4 个线程

我认为这在工作日是非常关键的任务，而停机是坏消息？如果是这样，请不要附和它。

> > ResultID 和 Fieldname 上有一个聚集索引

正如您所指出的，ResultID 是 PK 中的第一列吗？

如果是这样，我敢打赌，它的选择性不够，并且根据查询的需求，应该交换 PK 字段的顺序（尽管这个复合键看起来对于集群 PK 来说是一个糟糕的选择）

结果是什么：

从 MyTable 中选择 COUNT(*)、COUNT(DISTINCT ResultID)

例如，如果第一个计数是第二个计数的 4 倍或更多，那么由于 ResultsID 的选择性低，您很可能会优先获得扫描而不是搜索，并且一些简单的更改将带来巨大的性能改进。

此外，Fieldname 非常宽（50 个字符），因此任何二级索引都会在每个索引条目中添加 50 + 4 个字节。这些字段真的是 CHAR 而不是 VARCHAR 吗？

我个人会考虑增加叶页的密度。在 90% 时，您只会留下一些空白 - 可能每页一个。但是对于一个包含 5 亿行的大表，更高的打包密度可能意味着树中的级别更少，因此检索的次数更少。与此相反，对于给定的页面，几乎每个插入都需要页面拆分。这将有利于集群的插入，因此可能不合适（假设您的插入数据可能未集群）。像许多事情一样，您需要进行测试以确定哪种索引键密度最有效。SQL Server 提供了一些工具来帮助分析查询是如何被解析的、它们是否被缓存、它们导致的表扫描次数、哪些查询“运行缓慢”等等。

让顾问进来看看并给你一些建议。这不是一个在这里回答的问题将为您提供一个安全的解决方案来实施。

对于每天有 5 亿行和大量插入的表，您确实需要仔细考虑维护策略。抱歉，但我对进入这种状态的公司感到非常沮丧。

该表需要进行碎片整理（如果您没有聚集索引，您的选项将变得更少，因此请保留它，直到您确定有更好的候选者）。“在线”碎片整理方法将对性能产生适度的影响，并且可能会突然消失 - 如果它们超出时间/CPU限制，可以安全地中止[尽管这很可能需要一些编程]。如果您有一个“安静”插槽，则将其用于表碎片整理和更新索引的统计信息。不要等到周末才尝试一次完成所有桌子 - 在每天的任何安静时间（大概在晚上）尽可能多地做。

对表进行碎片整理可能会导致 Transaction log 使用量大幅增加，因此请确保经常备份任何 TLog（我们有一个 10 分钟的 TLog 备份策略，我们在碎片整理期间将其增加到每分钟一次，以便碎片整理过程不会成为所需 Tlog 空间的定义！）

# python - .NET 开发人员的 Python 或 Ruby？

> ID：551465
> 
> 赞同：12
> 
> 时间：2009-02-15T19:45:36.160
> 
> 标签：python, ruby-on-rails, ruby, comparison

我是一名 C# .NET 开发人员，主要从事 ASP.NET 项目。

我想学习一门新的编程语言，

*   通过体验一门新语言来提高我的编程技能，
*   看到与微软环境不同的东西，
*   也许以不同的方式思考。

为了我的目标，我专注于两种语言。**蟒蛇**和**红宝石**。

*   你给我哪一个？
*   他们彼此的利弊？
*   值得学习它们吗？

**编辑：**对不起，我编辑了我的帖子，但没有在这里通知，

Ruby on Rails 被 Ruby 取代。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-16T09:30:27.860

两种语言都强大而有趣。两者都将是您工具箱的有用补充。

Python 有一个更大的社区，可能还有更成熟的文档和库。它的面向对象有点不一致，感觉（对我来说，恕我直言）就像是固定在语言上的东西。您可以在运行时更改类行为（猴子补丁），但不能更改预编译的类，而且通常不受欢迎。

Ruby 可能与您当前的体验稍有不同：它有一些 Smalltalk 的味道（例如，方法调用更正确地是消息发送）。它的面向对象是从头开始内置的，所有类都可以修改，而且它是一种公认​​的——如果有点吓人的话——实践。社区更小，库不够成熟，文档覆盖面也更少。

两种语言都将在其下一个主要版本中具有一定程度的向后兼容性破坏，两者都有 .Net 实现（IronPython 是生产，IronRuby 到达那里）。两者都有反映其优势的 Web 框架（搜索 Django/Rails 辩论）。

如果我从未见过 Ruby，我会很高兴在 Python 中工作，并且在必要时这样做不会感到痛苦。我总是发现自己希望我能用 Ruby 完成这项工作。但这是我的意见，YMMV。

编辑：想一想，尽管这让我很痛苦，但如果你想利用你对 .Net 框架的知识，你最好看看 IronPython，因为它比 Ruby 等价物更成熟。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-15T19:59:29.137

首先...对你想拓宽你的知识有好处！其次，您将语言 (Python) 与 Web 框架 (Ruby on Rails) 进行比较。

*我认为你最好的选择是在 Python和*Ruby中尝试几个不同的框架，在每个框架中执行相同的相当简单的任务，然后再选择你想了解更多的那个。Rails 非常适合 Ruby，但它并不是唯一的一个。对于 Python，我喜欢 Pylons 和 Django。

优点和缺点：Ruby 在语言方面比 Python 更简洁一些。Python 有更多的模块。

值得学习吗？是的，对于 Python 和 Ruby。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-16T03:29:55.403

如果您是初学者，如果您决定开始学习 Python ，我建议您尝试[Django 。](http://www.djangoproject.com/)当然，如果您决定选择 Ruby，[Rails](http://rubyonrails.org/)是显而易见的选择。无论您选择哪种语言，我都可以向您保证，这将是一个不错的选择。

话虽如此，我个人的选择是 Python。我喜欢这种语言，我喜欢社区，而且我几乎在所有场合都使用 Python。我将它用于命令行应用程序、GUI 应用程序，并将它用于 Web 应用程序 (Django)。哦，我也将它用于 Windows 和 Linux 上的系统管理脚本。

话虽如此，我还是建议你学习一门像 Haskell 或 Lisp 这样的语言。这将真正让您看到编程的新视角。此外，既然你说你最熟悉 .Net 框架，我真的建议你从 F# 开始，因为你已经熟悉了这些库，它会使过渡更加顺畅。不管怎样，祝你好运。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T19:55:07.743

学习一门新的编程语言总是很有价值的。Python 和 Ruby 都是值得了解的。重要的是要注意 Python 是一种语言，而 Ruby on Rails 是一种框架。恕我直言，你应该在学习 Rails**之前**学习 Ruby。

去[试试红宝石吧！](http://tryruby.hobix.com/)看看你喜不喜欢。如果你这样做，那么试试 Rails。否则，请尝试 Python。两者同样有用。对我来说，Ruby 更“有趣”。如果你喜欢 Lisp，你可能会喜欢 Ruby。如果你喜欢 C，你可能更喜欢 Python。试试他们两个！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-16T03:37:58.567

经验法则 - 如果您喜欢严格的规则，则 Python 和讨厌它们的 Ruby。

另一个：如果你喜欢 JavaScript - Ruby 是你的选择 :)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-17T00:36:48.853

什么？没有提到 IronPython？

IronPython is the flagship language of the DLR. It allows you to use all the familiar .NET libraries, but through Python.

I would definitely try Python and IronPython. You'll learn a lot and might even sneak it into your current projects (you can embed an IronPython engine in a .NET application).

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-16T02:49:31.570

如果您正在寻找学习 Ruby on Rails，[指南站点](http://guides.rubyonrails.org)有一个很好的入门指南以及改进您的 rails-fu 的进一步指南。

此外，Tore Darell 还[为 Ruby on Rails 编写了 S urvivor's Guide，](http://tore.darell.no/doc.html)这对您也很有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-16T03:06:52.790

我会加入Ruby。似乎有一个更大（或至少更活跃）的社区，新项目和持续开发的步伐是首屈一指的，学习资源似乎超过和超过了 Python。我可能是错的，但这些是我的印象。

# asp.net-mvc - asp.net mvc - 需要为当前请求存储一些数据

> ID：551468
> 
> 赞同：24
> 
> 时间：2009-02-15T19:46:12.477
> 
> 标签：asp.net-mvc

我正在编写一个用户身份验证类。在请求期间有很多对当前用户的引用，所以我想将它缓存在内存中，而不是调用数据库单例。我正在考虑使用会话并在每个请求结束时清除它。

像：

```
 public static User Current() {
     if (Session["current-user"] == null) {
          Session["current-user"] = GetUserFromDB(); // example function, not real
     }
     return (User)Session["current-user"]; 
```

然后在 app_end 请求中：

```
 Session.Clear(); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-02-15T20:16:12.280

```
HttpContext.Items["user"] = user; 
```

您可以在整个请求期间引用上下文项，并将在请求结束时对其进行清理。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-02-15T19:49:17.257

使用`HttpContext`类。您可以在`HttpContext.Current`.

该`HttpContext.Items`集合是您想要使用的。

# c# - C# 中有 System.IO.BufferedStream 的替代品吗？

> ID：551471
> 
> 赞同：2
> 
> 时间：2009-02-15T19:49:51.110
> 
> 标签：c#, .net, api, bufferedstream

我收到以下异常：

```
System.NotSupportedException : This stream does not support seek operations.
   at System.Net.Sockets.NetworkStream.Seek(Int64 offset, SeekOrigin origin)
   at System.IO.BufferedStream.FlushRead()
   at System.IO.BufferedStream.WriteByte(Byte value) 
```

以下链接显示这是微软的一个已知问题。 [http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=273186](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=273186)

这个堆栈跟踪显示了两件事：

1.  System.IO.BufferedStream 做了一些荒谬的指针移动操作。BufferedStream 应该缓冲底层流而不是更多。如果有这样的查找操作，缓冲区的质量会很差。
2.  对于不支持 Seek 的流，它永远不会稳定工作。

有没有其他选择？我需要一个缓冲区和 C# 中的 NetworkStream 还是已经缓冲了。

编辑：我只想减少对底层套接字流的读/写调用次数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T20:44:45.127

NetworkStream 已被缓冲。接收到的所有数据都保存在缓冲区中，等待您读取。读取调用要么非常快，要么会阻塞等待从网络上的其他对等方接收数据，无论哪种情况，BufferedStream 都无济于事。

如果您担心阻塞，那么您可以考虑将底层套接字切换到非阻塞模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T20:02:39.690

A 的`BufferedStream`作用是减少对底层流（可能是 IO/硬件绑定）的读/写调用次数。它不能提供搜索功能（实际上，缓冲和搜索在许多方面是相互矛盾的）。

为什么需要寻求？也许首先将流复制到可搜索的东西 - a`MemoryStream`或 a `FileStream`- 然后从第二个可搜索的流中进行实际工作。

你有一个特定的目的吗？我也许可以建议更合适的选项，并提供更多详细信息...

特别是：请注意这`NetworkStream`是一个好奇心 - 对于大多数流，读/写与相同的物理流相关；但是，a`NetworkStream`实际上代表两个完全独立的管道；读和写完全不相关。同样，您不能在已经压缩过去的字节中寻找......您可以**跳过**数据，但最好通过执行一些`Read`操作并丢弃数据来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-04T10:20:59.660

**解决方案**是使用两个独立`BufferedStream`的s，一个用于接收，一个用于发送。并且不要忘记`BufferedStream`适当地刷新发送。

* * *

因为即使在 2018 年，似乎也很难得到一个令人满意的答案，为了人性，这里是我的两分钱：

在操作系统`NetworkStream` *端*缓冲。但是，这并不意味着没有理由在 .net 端进行缓冲。TCP 在 Write-Read（重复）上表现良好，但由于延迟 ack 等原因，在 Write-Write-Read 上停滞不前。

如果你和我一样，有一堆低于标准的协议代码要带入 21 世纪，你想缓冲一下。

*或者*，如果您坚持上述做法，您也可以仅缓冲读取/rcvs 或仅写入/发送，并`NetworkStream`直接将其用于另一端，具体取决于代码的损坏程度。*你只需要保持一致！*

`BufferedStream`文档未能充分说明的是，如果您的流是可搜索的，您应该只*切换阅读和写作*。这是因为它在同一个缓冲区中缓冲读取和写入。**`BufferedStream`根本不适合`NetworkStream`。**

正如 Marc 所指出的，这种跛行的原因是将两个流合并为一个 NetworkStream，这不是 .net 最伟大的设计决策之一。

# drupal - 是否有用于导入文本和图像的 Drupal 模块？

> ID：551472
> 
> 赞同：3
> 
> 时间：2009-02-15T19:50:15.977
> 
> 标签：drupal

我对 Drupal 很陌生，想知道是否有外部程序可以调用的 API 将文本和图像直接传输到我的 Drupal 站点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-15T20:17:29.313

是的。在 Drupal 中有几种方法可以做到这一点：

1.  如果您正在进行一次性导入，请尝试使用[Node Import](http://drupal.org/project/node_import)模块 --- 这可以让您从 CSV 文件中导入内容。
2.  如果您希望您的 Drupal 站点提供一个基于 Web 的 API，可以向其发布新内容（例如通过 XMLRPC），请查看[服务](http://drupal.org/project/Services)模块。
3.  如果您希望您的 Drupal 站点定期从其他站点检索内容（例如 RSS 提要），请查看[FeedAPI](http://drupal.org/project/feedapi)。
4.  如果您想编写自己的 PHP 代码来创建新内容，请查看[本文](http://acquia.com/blog/migrating-drupal-way-part-i-creating-node)以获得介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T20:22:24.463

不知道有一个用于导入文本的模块是什么意思，但有一个专门用于图像的模块：[Image](https://www.drupal.org/project/image)模块。以下是其项目页面的摘录：

> ... 允许具有适当权限的用户将图像上传到 Drupal。缩略图和其他尺寸是自动创建的。
> 
> 图像可以单独发布到首页，包含在故事中或在画廊中分组。

导入文本可以直接作为其他现有实体类型之一执行。

# visual-studio-2008 - 使用 Visual Studio 扩展修改 app.config 文件

> ID：551476
> 
> 赞同：3
> 
> 时间：2009-02-15T19:53:22.333
> 
> 标签：visual-studio-2008, visual-studio-addins, vspackage

我正在尝试创建一个 Visual Studio 扩展（加载项或 VSPackage），它将执行以下操作：

1）在当前解决方案中找到所有选定的项目。2) 获取对每个项目的 app.config 或 web.config 文件的访问权限并对其进行修改。

我已经能够为加载项和 VSPackage 找出步骤 1。我还没有设法找到执行步骤 2) 的方法。有没有人指向可以帮助我完成步骤 2) 的博客/文档？

另外，您会为这样的项目推荐哪种可扩展性选项？加载项还是 VSPackage？

谢谢，

阿玛赫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T20:07:32.190

既然你有选定的项目，为什么不检查项目目录是否有 web.config/app.config 文件，如果它们存在然后编辑它们？它们只是 xml 文件。

# html - 基于白名单为 (X)HTML 编写 XSS 过滤器

> ID：551480
> 
> 赞同：3
> 
> 时间：2009-02-15T19:56:53.667
> 
> 标签：html, security, filter, xss, grammar

[我需要在 C++ 中为CppCMS](http://cppcms.sourceforge.net)实现一个简单高效的 XSS 过滤器。我不能使用现有的用 PHP 编写的高质量过滤器，因为它是使用 C++ 的高性能框架。

基本思想是提供一个过滤器，该过滤器具有 HTML 标签的 while 列表和这些标签的选项白名单。例如。典型的 HTML 输入可以由 `<b>`, `<i>`, 标记和`<a>`带有 . 的标记组成`href`。但简单的实现还不够好，因为即使是允许的简单链接也可能包含 XSS：

```
<a href="javascript:alert('XSS')">Click On Me</a> 
```

[那里](http://ha.ckers.org/xss.html)还有很多其他的例子。所以我也想为像 href/src 这样的标签创建一个前缀白名单——所以我总是需要检查它是否以`(https?|ftp)://`

**问题：**

*   这些假设是否足以满足大多数目的？这意味着如果我不提供`style`标签选项并使用前缀白名单检查 src/href 是否可以解决 XSS 问题？是否存在无法通过这种方式解决的问题？
*   为了编写简单的解析器来清除所有不正确的禁止标记，如 HTML/XHTML 的形式语法是否有很好的参考？`<script>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-15T20:18:52.443

你可以看看 Anti Samy 项目，尝试完成同样的事情。虽然它是 Java 和 .NET。

*   [http://www.owasp.org/index.php/Category:OWASP_AntiSamy_Project#.NET_version](http://www.owasp.org/index.php/Category:OWASP_AntiSamy_Project#.NET_version)
*   [http://www.owasp.org/index.php/Category:OWASP_AntiSamy_Project_.NET](http://www.owasp.org/index.php/Category:OWASP_AntiSamy_Project_.NET)

**编辑 1，有点额外：**

您可能会提出一个非常严格的白名单。它应该结构良好，应该非常紧凑且不太灵活。当您结合灵活性、如此多的标签、属性和不同的浏览器时，通常您最终会遇到 XSS 漏洞。

我不知道您的要求是什么，但我会采用严格而简单的标签支持（仅 b li h1 等），然后基于标签的严格属性支持（例如 src 仅在 href 标签下有效），那么您需要按照您所说的 http|https|ftp 或 style="color|background-color" 等在属性值中进行白名单。

考虑这个：

`<x style="express/**/ion:(alert(/bah!/))">`

您还需要考虑一些字符白名单或一些 UTF-8 规范化，因为不同的编码可能会导致尴尬的问题。例如属性中的新行、无效的 UTF-8 序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-09T14:30:56.953

HTML 解析的所有细节都[在 HTML 5 中指定](http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html#syntax)。然而，它的实现需要做很多工作，而且你是否会在所有极端情况下准确地解析 HTML 并不重要。在最坏的情况下，你最终会得到不同的 DOM，但无论如何你都必须清理 DOM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-09T14:33:13.220

正如您所提到的，有各种 PHP 实现，但我不知道 C++ 中的任何实现，因为这不是一种通常应用于 Web 开发的语言。总体而言，这将取决于您想要提出的实现的复杂程度。

一个非常严格的白名单可能是“最简单”的方式，但如果你想真正全面，我会考虑将一个已建立的版本转换为 C++，而不是尝试从头开始编写自己的版本。有很多技巧要担心，我认为你最好站在已经经历过这一切的其他人的肩膀上。

我对使用 C++ 进行 Web 开发一无所知，但是将 PHP 转换为它似乎并不是一项特别困难的任务，PHP 并没有任何 C++ 无法复制的神奇功能。我敢肯定会有一些小问题，但总的来说，如果你想走更复杂的路线，那么进行转换肯定比从头开始的完整设计更快。

[HTML Purifier](http://htmlpurifier.org/)似乎是一个强大的 PHP 实现，仍在积极维护中，有[一个比较文档](http://htmlpurifier.org/comparison.html)，作者讨论了他的方法与其他方法之间的一些差异，可能值得一读。

无论你想出什么，一定要用你链接的所有例子来测试它，并确保它通过了所有这些。祝你好运！

# windows - 编写代码使 CPU 使用率显示正弦波

> ID：551494
> 
> 赞同：25
> 
> 时间：2009-02-15T20:03:52.323
> 
> 标签：windows, cpu-usage, trigonometry

> 用您喜欢的语言编写代码，让 Windows 任务管理器在 CPU 使用历史记录中显示正弦波。

这是来自微软中国的技术面试测验。我认为这是一个很好的问题。尤其值得了解候选人如何理解和找出解决方案。

**编辑**：如果可能涉及多核（cpu）情况，这是一个很好的观点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-15T20:15:47.007

Windows 中的线程时间片是 40 毫秒，iirc，因此这可能是用作 100% 标记的好数字。

```
unsigned const TIME_SLICE = 40;
float const PI = 3.14159265358979323846f;
while(true)
{
    for(unsigned x=0; x!=360; ++x)
    {
        float t = sin(static_cast<float>(x)/180*PI)*0.5f + 0.5f;
        DWORD busy_time = static_cast<DWORD>(t*TIME_SLICE);
        DWORD wait_start = GetTickCount();
        while(GetTickCount() - wait_start < busy_time)
        {
        }
        Sleep(TIME_SLICE - busy_time);    
    }
} 
```

这将给出大约 14 秒的时间。显然，这是假设系统中没有其他重要的 cpu 使用率，并且您仅在单个 CPU 上运行它。这些在现实中都不是很常见。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-02-15T22:06:29.533

这是在 Python 中稍作修改[的@flodin 解决方案：](https://stackoverflow.com/questions/551494/write-code-to-make-cpu-usage-display-a-sine-wave/551516#551516)

```
#!/usr/bin/env python
import itertools, math, time, sys

time_period = float(sys.argv[1]) if len(sys.argv) > 1 else 30   # seconds
time_slice  = float(sys.argv[2]) if len(sys.argv) > 2 else 0.04 # seconds

N = int(time_period / time_slice)
for i in itertools.cycle(range(N)):
    busy_time = time_slice / 2 * (math.sin(2*math.pi*i/N) + 1)
    t = time.perf_counter() + busy_time
    while t > time.perf_counter():
        pass
    time.sleep(time_slice - busy_time); 
```

`time_period`可以使用和`time_slice`参数微调 CPU 曲线。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-15T20:13:02.833

好的，我有一个不同的，可能比我的第一个答案更好的解决方案。

与其尝试操纵 CPU，不如挂钩到任务管理器应用程序，强制它绘制您想要的内容，而不是 CPU 结果。接管绘制图形的 GDI 对象等。有点“作弊”，但他们没有说你必须操纵 CPU

或者甚至挂钩从任务管理器获取 CPU % 的调用，而是返回正弦结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-15T20:10:55.380

今天的 PC 运行了数百（数千？）个线程，我认为甚至接近的唯一方法是尽可能快地轮询 CPU 使用率，并且如果使用百分比低于曲线上的应有位置, 启动一个只搅动数字的简短方法。这至少会在需要的地方带来典型的低使用率，但我想不出一个好的方法来降低它，而不以某种方式控制其他线程，并做一些事情，比如强制降低他们的优先级。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-02-15T20:17:43.803

像这样的东西：

```
while(true)
{
    for(int i=0;i<360;i++)
    {
       // some code to convert i into radians if needed
       ...
       Thread.Sleep(Math.Sin(i)*something_that_makes_it_noticeable_number_of_ms+something_that_makes_it_non_negative)
       // some work to make cpu busy, may be increased to bigger number to see the influence on the cpu.
       for(j=0;j<100;j++);
    }
} 
```

# java - 人们是否提供了多种机制来在 API 中做同样的事情？

> ID：551500
> 
> 赞同：4
> 
> 时间：2009-02-15T20:07:26.373
> 
> 标签：java, api

设计具有多种实现相同结果的方法的 API 是否令人困惑？例如，我有自己的`Date`库（它是 Java `Date`/类的简单包装器，`Calendar`用于区分*year-month-day*和*instant-in-time*，并提供在两者之间转换的机制）。我从一种方法开始创建 a 的实例：`Date`*`Instant``Date`*

 *```
Date.valueOfYearMonthDay(int year, int month, int day); 
```

但后来我发现使用 API 生成的代码不是很可读。所以我补充说：

```
Date.yearMonthDay(int year, int month, int day)
Date.ymd(int year, int month, int day)
Date.date(int year, int month, int day) 
```

然后我开始流利了：

```
Date.january().the(int day).in(int year); 
```

*（我发现 fluent 版本对于进行可读测试非常有用）。*所有这些方法都做相同的事情并具有准确的 JavaDoc。我想我读过的一个优点`perl`是每个程序员都可以准确地选择他/她更喜欢解决问题的方法。一个优点`Java`是通常只有一种做事方式:-)

人们的意见是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-15T20:52:19.807

在过去的 10 年里，我一直在对与 Java 中的 API 可用性有关的不同问题进行学术研究。

我可以告诉你，关于在 Java 中使用一种方式做事的说法是相当不正确的。在 Java中通常有*很多*方法可以做同样的事情。不幸的是，它们通常不一致或没有记录。

使用便捷方法使类的接口膨胀的一个问题是，您使理解该类以及如何使用它变得更加困难。你拥有的选择越多，事情就会变得越复杂。

在对一些开源库的分析中，我发现了冗余功能的实例，由不同的人使用不同的术语添加。显然是个坏主意。

更大的问题是名称所承载的信息不再有意义。例如，swing 中的 putLayer 与 setLayer 之类的事情，其中​​一个只是更新图层，另一个也刷新（猜猜是哪一个？）是一个问题。同样，getComponentAt 和 findComponentAt。在其他方面，做某事的方式越多，你就越会混淆其他所有内容并减少现有功能的“熵”。

这是一个很好的例子。假设您希望在 Java 中用另一个字符串替换字符串中的子字符串。您可以使用 String.replace(CharSequence, CharSequence) ，它可以像您期望的那样完美地工作，文字是文字。现在假设你想做一个正则表达式替换。您可以使用 Java 的 Matcher 并进行基于正则表达式的替换，任何维护者都会理解您所做的。但是，您可以只编写调用 Matcher 版本的 String.replaceAll(String, String)。但是，您的许多维护人员可能不熟悉这一点，也没有意识到后果，包括替换字符串不能包含“$”的事实。因此，用“$”符号替换“USD”在 replace() 中效果很好，但在 replaceAll() 中会引起疯狂的事情。

然而，也许最大的问题是“做同样的事情”很少是使用相同方法的问题。在 Java API 的许多地方（我相信在其他语言中也是如此），您会找到做“几乎相同的事情”的方法，但在性能、同步、状态更改、异常处理等方面存在差异。例如，一个call 会直接工作，而另一个会建立锁，另一个会改变异常类型，等等。这是一个麻烦的秘诀。

所以底线：做同一件事的多种方法不是一个好主意，除非它们是明确的并且非常简单，并且您需要非常小心以确保一致性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-15T20:31:15.690

我会回应其他人所说的便利方法很棒，但会更进一步——**所有“便利”方法最终都应该调用相同的底层方法**。除了代理请求之外，便利方法唯一应该做的就是以不同的方式获取或返回变量。

便利方法中不允许进行计算或处理。如果您需要在其中一个中添加其他功能，请加倍努力并在“主要”/“真实”中实现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-15T20:13:56.357

提供方便的方法很好，真正的问题是每个入口点是否开始以微妙的不同方式表现。那是api不再方便的时候。记住哪种方式是“正确的”只是一种痛苦，并且文档开始说“推荐的方式是......”

如果 Date.yearMonthDay() 开始验证日期而 Date.ymd() 没有，那将是一个问题。如果每个都开始支持不同的“功能”，情况也是如此 - Date.yearMonthDay() 可以采用非公历日期，而 Date.date() 可以采用非公历日期，只要给出第 4 个对象来告诉日历类型。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-15T20:25:05.783

首先，请不要发明自己的日期库。做对太难了。如果您绝对无事可做，请务必阅读 - 并理解 -[日历计算](http://emr.cs.uiuc.edu/home/reingold/calendar-book/index.shtml)。如果不了解日历计算，您将面临在晦涩的角落和边缘情况下做错事情的巨大风险。

其次，对通用底层方法的多次访问是典型的。许多 Java 库 API 方法声明它们只是类的一些其他方法的“包装器”。

此外，由于 Java 语言的限制，您经常使用重载方法名称作为向方法提供“可选”参数的一种方式。

多种访问方法是一个很好的设计。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-15T20:53:35.170

如果这些做完全相同的事情：

```
 Date.yearMonthDay(int year, int month, int day)
    Date.ymd(int year, int month, int day)
    Date.date(int year, int month, int day) 
```

我认为这是不好的形式。当我阅读您的代码时，我不知道该使用哪一个。

像

```
canvas.setClipRegion (int left, int top, int right, int bottom); 
canvas.setClipRegion (Rect r); 
```

不同之处在于它允许调用者访问功能而无需弄清楚如何格式化数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-15T20:15:55.430

我个人的看法是，你应该坚持一种方法来做某事。这 4 种方法最终都调用了相同的方法，然后你只需要它们中的一个。但是，如果他们除了调用他们的方法之外还做了一些事情，那么他们应该存在。

所以：

```
// 这个方法不应该存在
数据 yearMonthDay(final int year, final int month, final int day)
{
    返回（valueOfYearMonthDay（年、月、日））；
}

```

除了流利的版本之外，第一个方法会更有意义。但是应该使用 yearMonthDay、ymd 和 date 方法。

此外，不同的语言有不同的目标。仅仅因为它在 Perl 中“有意义”并不意味着它在 Java（或 C#、C++、C、Basic 或...）中有意义

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-15T20:41:11.627

> 我发现 fluent 版本对于进行可读测试非常有用。

这有点麻烦，因为我担心您可能只是在测试流畅的版本。如果 methodX() 存在的唯一原因是您可以对 methodY() 进行可读测试，那么methodX() 或 methodY() 之一**就没有理由**存在。您仍然需要单独测试它们。你在不必要地重复自己。

TDD 的指导原则之一是在编写代码时强迫自己考虑 API。决定您希望 API 的客户端使用哪种方法并摆脱冗余的方法。用户不会感谢你提供方便的方法，他们会诅咒你用看似无用的冗余方法使你的 API 混乱。

# api - 如何创建写入空闲/活动屏幕的 S60 应用程序？

> ID：551507
> 
> 赞同：2
> 
> 时间：2009-02-15T20:11:18.390
> 
> 标签：api, symbian, s60

我想为 S60 Active Screen（在空闲屏幕中运行的应用程序）编写一个替代品。但我找不到任何关于如何写入/绘制到 S60 第 3 版的空闲/活动屏幕 API 的文档。

我不介意它们是用于 C++ 还是 Python 绑定。

谁能指点我一些文档/示例？

PS 我知道这是可以做到的，因为有一个名为 Handy Shell 的应用程序取代了“Symbian 活动屏幕”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-18T08:10:32.263

一种方法是注册焦点组更改，并在当前空闲屏幕应用程序进入前台时将您的应用程序置于前台。

有几种方法可以做到这一点 - 最简单的是通过`HandleWsEventL()`AppUi 类。覆盖HandleWsEventL [()](http://www.symbian.com/Developer/techlib/v70sdocs/doc_source/reference/cpp/UIControlFramework/CCoeAppUiClass.html#%3a%3aCCoeAppUi%3a%3aHandleWsEventL())并检查`EEventFocusGroupChanged`事件。此时，您可以使用`RWsSession::GetFocusWindowGroup()`将应用程序的 Window Group ID 带到前台。如果是空闲屏幕，请将自己带到前台。

（这假设您已经从之前使用的 Idle UID 中确定了空闲屏幕窗口组`TApaTaskList::FindApp()`ID。S60 3rd FP2 中的 UID 是 0x102750F0。Pre-FP2 它是 0x101fd64c）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T06:49:52.117

我不知道 HandyShell 是如何做到这一点的。但是[诺基亚知识库说](http://wiki.forum.nokia.com/index.php/KIS001196_-_Restrictions_in_developing_customised_Active_Idle_plug-ins)，它受到限制，不适用于第 3 方...

# mysql - mysql，强制限制表中的条目

> ID：551509
> 
> 赞同：1
> 
> 时间：2009-02-15T20:11:19.327
> 
> 标签：mysql, memory-table

我在内存表中保存了一些临时数据。我只需要 20 个最近的条目，并且希望数据始终在堆上。我应该如何做到这一点？我确信我对内存表无能为力，但我应该如何处理条目表？每当我想推入一个新值时，我应该添加一个自动增加键并删除最旧的键吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T00:40:37.720

您能否更详细地描述一下您要做什么？当您可以只使用降序的 SELECT 和`LIMIT 20`. 如果 SELECT 查询过于昂贵，那么只需使用 memcached 或类似方法缓存结果，并在每次插入新数据时清除缓存。

如果确实需要附加表，则有几种方法可以从表中删除旧数据。您要么获取第 20 个最近数据的 id（再次降序`LIMIT 19,1`并删除具有较小 id 的所有内容（如果您有自动递增索引、时间戳等），或者您`SELECT COUNT(*)`然后`DELETE`使用升序和`LIMIT`(所有项目 - 20). 这可以打包到每几分钟运行一次的 cronjob 中。

但我真的建议使用缓存并查看表定义。有一个不错的索引应该没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T20:43:26.847

附加到 20 条目表并删除最旧的元素（即具有最小 ID 的元素？）是可能的。但是，请注意，这会使表格碎片化。

只要你`OPTIMIZE`每隔一段时间跑一次就可以了。

另一种方法是预先分配 20 个条目并保留一个单独的计数器，其中条目是最新的。然后，您将根据计数器更新项目 ID，而不是插入/删除，然后您将递增 (mod 20 + 1) 并再次存储。

但是请注意，这两种模型都只能在“单线程”模型下工作。如果表上运行多个线程，则它们可能会发生冲突。

如果计数器在程序内存中，由线程共享但保护得当，那将是线程安全和高效的。

# javascript - 从脚本动态将 div 附加到正文时如何克服 IE 错误

> ID：551511
> 
> 赞同：0
> 
> 时间：2009-02-15T20:13:19.493
> 
> 标签：javascript, internet-explorer, dom, dhtml

更新：HTML 格式不正确。这导致脚本出现在内部 div 中。请忽略这个问题。

IE ver<8 有一个已知错误（Internet Explorer 无法显示页面。操作中止）如果脚本尝试将某些内容附加到上层块：

该错误在[此处](http://support.microsoft.com/?scid=kb;en-us;927917&x=9&y=18)描述：

更新：我改写了问题并简化了示例：

该错误发生在以下代码中：

```
[end of html file]
<script type="text/javascript" >
if (window.document.body){
    var c_div = window.document.createElement('div');
    window.document.body.appendChild(c_div);    
}
</script>

</body> 
```

问题：在我看来，这与 Microsoft 解决方法中的 example1 Method1 完全相似（[这里又是链接](http://support.microsoft.com/?scid=kb;en-us;927917&x=9&y=18)）。我怎么还有bug？我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-15T20:17:03.073

在 domready/onload 事件处理程序中运行您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T20:20:11.910

这可能是一种有点疯狂的方法，但是您可以将整个`<body>`字符串的 innerHTML 提取出来，然后将`<body>`innerHTML 设置为新值吗？

可能会影响一些以前附加的 JS 事件，除非它是内联 onclick 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T20:52:50.210

页面中的 HTML 格式不正确。请忽略这个问题。

# c# - 将自定义控件字符串放入应用程序资源

> ID：551523
> 
> 赞同：0
> 
> 时间：2009-02-15T20:19:24.737
> 
> 标签：c#, winforms, user-controls, localization

我有一个自定义的 winforms 控件（从 Component 继承），它向用户显示了一些字符串。

如何使这些字符串可访问，以便组件的用户可以自定义它们，并且 - 如果他愿意 - 轻松地将它们放入资源中以进行本地化？

我想将它们公开为可浏览的属性，以便可以自定义它们，但我不确定这是否是“正确的做法”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T20:42:54.103

只需将它们设为 [Localizable(true)] 属性，一切都会得到处理。

请注意 [Browsable(true)] 是默认设置。

# project-management - 你什么时候吹响范围蠕动哨子？

> ID：551527
> 
> 赞同：5
> 
> 时间：2009-02-15T20:24:52.460
> 
> 标签：project-management, scope-creep

大多数人都曾在某个时候来到过这里——在你的项目中，你会收到非常小的请求，你很乐意照顾，但在某些时候，这些小事情会加起来。有时，实施某事所需的时间比重新协商项目计划所需的时间要少。

如果规范/需求计划是体面的，而且它不是一个注定要开始的项目，那么您实际上在什么时候吹哨并开始重新谈判？应**任何**要求？当该请求需要额外的页面/表格时？还是只是感觉出来？很想听听你是怎么打电话的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-15T20:30:06.507

在您的项目计划中预算 N 小时的临时请求。（你知道它会发生，那为什么不在那里呢？）然后跟踪你的临时请求并在预算用完时重新协商。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-15T20:36:13.433

> 应**任何**要求？

真正的目标是让客户开心而不被敲诈，对吧？敏捷方法在很大程度上解决了这些问题。新的需求*总是*会出现，如果你没有在它们出现时解决它们，你最终会构建开箱即用的过时或功能失调的东西。所以你需要的是客户对流程的认可，尽快的工作原型，以及大量的迭代。当然，还有**很多**，但这应该足够继续了。

编辑添加：客户支持意味着他们知道您正在开发新功能，*而不是*您将要做的任何事情，并且他们同意。当您完成了您的日程安排和预算但仍未完成时，他们一直在您身边并且知道原因。没什么大惊喜 “什么？你还没做完？！”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T20:32:53.957

我会说它什么时候会影响时间表/发布日期。如果发生这种情况，那么绝对是时候吹哨了。如果范围蔓延的幅度足够大，或者如果有足够多的累积变化影响您按时发货的能力，那么您应该推迟。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T20:34:11.457

当你的预算被打破的那一刻。你不能继续做所有这些“免费赠品”的附加组件——除非你是为了慈善而做的。

一旦你放下脚，你会发现请求枯竭了！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-15T20:40:10.803

我只在这种情况下使用内部工具，我们的既定目标是在无法提前预测需求的情况下最好地服务于我们“客户”的任何突发奇想。所以，我的回答持保留态度。

我的观点是，这个决定通常是政治性的，除非你是公司的负责人，否则它甚至可能不取决于你。不满意的客户把你交给老板的成本可能更具破坏性。

我非常相信敏捷和持续的需求收集，这确实涉及了解用户如何使用产品，并尝试满足他们的需求。然而，每个用户都有自己的“好东西”，没有办法让每个人都满意。如果你有多个目标用户，民主是一个很好的系统——只执行大多数用户可以从中受益的事情。

如果您的客户是一个有凝聚力的群体（例如，您正在为特定组织中特定部门的用户制作它），请运行一个 Wiki 站点或类似 SO 或其他引擎，他们可以在其中列出然后对可能的功能进行协作投票。明确表示您将优先考虑（但不保证）评级较高的功能，并且您可能不会优先考虑没有得到其他人投票的事情。

这样做，您可以让客户对想法应用一些协作过滤（或同行压力）。您还将获得一些可见性，因此人们可以了解为什么他们的意愿没有得到尊重。一个重要的附带好处是，现在请求某个功能的人都对制定请求及其理由很感兴趣，这样他们就可以让其他人投票给他们。这将消除一些愚蠢的半生不熟的想法。

当然，所有这一切的一个基本假设是，您预算了一些时间来与为项目付费的人“混合功能”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-15T20:35:58.863

估计的完成日期更像是一条概率曲线，而不是一个单一的日期。

任何额外的功能都会降低遇到某个特定日期的可能性。

如果可能性降低变得“显着”或值得一提，您应该“吹哨”。

# iphone - 自定义 UIAlertView

> ID：551530
> 
> 赞同：9
> 
> 时间：2009-02-15T20:26:09.743
> 
> 标签：iphone, uialertview

任何人都有代码可以做到这一点：

[![UIAlertViewHack](https://i.stack.imgur.com/XaJNl.png)](https://i.stack.imgur.com/XaJNl.png)
[（来源：[booleanmagic.com](http://booleanmagic.com/uploads/UIAlertViewHack.png)）]

或者更好的是，使用 UIAlertView 对象的带有图像的 3x2 按钮网格？

我不关心文本字段，它是我想要的网格中的按钮（最好是图像而不是文本）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-02-16T06:15:21.763

我认为您最好的选择是忘记自定义 UIAlert 视图并自己构建自定义视图。

一方面，您所显示的实际上不是“警报”，因此它与 UIAlertView 的设计目的背道而驰。这意味着您正在更改用户的 UI 范例，这绝不是一个好主意。

其次，将自定义视图设置为动画比尝试破解 UIAlertView 让它做你想做的事情要容易得多。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-07-23T06:21:33.703

首先，您需要使警报框更大以容纳您的控件，但它必须放在中心。

为此，您无需设置帧大小，而是将带有“\n”的消息文本作为 necc。例如：

```
alert = [[UIAlertView alloc] initWithTitle:@"Rate this picture."
message:@"Tap a star to rate.\n\n\n\n " /*------ look at here!!----*/
delegate:self
cancelButtonTitle:nil
otherButtonTitles:nil]; 
```

然后使用 UIAlertViewDelegate 作为警报视图。

覆盖其 viewWillAppear：添加您的按钮并将其框架手动设置在所需位置。

或者：使用视图控制器创建整个视图，并将视图添加到警报框中，例如：

```
[myalertview addSubvew:mycomplexalert]; 
```

希望这会对您有所帮助:)

我正在使用警报框对星图、twitter、fb 反馈等进行评级输入。

更新 iOS7：

对于 iOS 7，使用组件创建您自己的视图并将其设置为 alertview 的附件视图：

```
[alert setValue:imageView forKey:@"accessoryView"]; 
```

这很简单:-)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-08-23T15:53:13.517

[本教程](http://iphonedevelopment.blogspot.com/2009/02/alert-view-with-prompt.html)介绍如何继承 UIAlertView 以实现输入文本框。它解释了如何放大视图、添加子视图（如文本框或图像）并进行转换以将框在屏幕上向上移动。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-13T11:43:02.050

我写了一个几乎像素完美的 UIAlertView 替代品，它也是完全可配置的。如果它符合您的需求，请查看[CODialog 。](https://github.com/eaigner/CODialog)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-16T18:20:58.833

没有用于此的内置组件。UIAlertView 应该只有 HIG 文档中的文本和按钮。

您必须创建自己的视图并向其添加控件。SDK 中的 HeadsUpUI 示例展示了如何将自定义的类似菜单的视图显示为叠加层。

希望有帮助。

# jquery - 如何在jQuery中获取元素值

> ID：551538
> 
> 赞同：22
> 
> 时间：2009-02-15T20:34:55.153
> 
> 标签：jquery

为什么它不在'li'中返回值？我究竟做错了什么？

```
$("#list li").click(function() {
    var selected = $(this).val();
    alert(selected);
}) 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-02-15T20:39:07.530

您想要`li`标签内的 HTML 或文本吗？

如果是这样，请使用：

```
$(this).html() 
```

或者：

```
$(this).text() 
```

`val()`仅适用于表单字段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-08-02T13:37:44.063

```
<ul id="unOrderedList">
<li value="2">Whatever</li>
.
.

 $('#unOrderedList li').click(function(){
      var value = $(this).attr('value');
     alert(value); 
  }); 
```

您在“li”标签内寻找属性“value”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-15T20:39:20.633

使用 .text() 或 .html()

```
$("#list li").click(function() {
        var selected = $(this).text();
        alert(selected);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T20:37:33.553

一个 li 没有价值。只有与表单相关的元素，例如 input、textarea 和 select 才有值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-15T20:39:13.817

很可能，你想要这样的东西：

```
$("#list li").click(function() {
        var selected = $(this).html();
        alert(selected);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-23T00:14:53.153

```
 <div class="inter">
      <p>Liste des Produits</p>
      <ul>
          <li><a href="#1">P1</a></li>
          <li><a href="#2">P2</a></li>
          <li><a href="#3">P3</a></li>
      </ul>
  </div>

        $(document).ready(function(){
            $(".inter li").bind(
            "click", function(){
                alert($(this).children("a").text());
            });
        }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-10T06:26:20.257

您可以使用 jQuery [on()](http://api.jquery.com/on/)来做同样的事情。

```
$("#list").on('click','li',(function() {
    var selected = $(this).text();   //or .html()
    alert(selected);
}) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-04-08T08:21:46.280

```
$("#list li").click(function() {
        var selected = $(this).html();
        alert(selected);
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-28T08:48:07.640

要获取 li 的值，我们应该使用 $("#list li").click(function() { var selected = $(this).html();

或者

```
var selected = $(this).text();

alert(selected); 
```

})

# rss - 监控社区驱动的网站（如 stackoverflow、digg 等）的最佳方法是什么？

> ID：551539
> 
> 赞同：3
> 
> 时间：2009-02-15T20:35:24.620
> 
> 标签：rss

我试过 RSS 提要，但这些每天都有大量条目的不断更新的网站只会填满我可怜的读者。我确实保留了我的谷歌阅读器，我监控了很多提要，但它们都是（Lifehacker 和 icanhascheezburger 除外）每天最多有一个或两个条目的提要。

现在，我在我的工具栏中为 Stack Overflow 保留一个书签，并在我什么都不做的时候随机单击它，但我总是觉得我通过随机抽样错过了重要的帖子。

你如何监控stackoverflow？在不必处理我既不关心也没有时间处理的问题的情况下，从中获取最佳信息的最佳方式是什么？

您是如何在 stackoverflow 的海量问题中找到这个问题的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T20:40:52.157

你在 SOF 尝试过“有趣的标签”功能吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T20:56:17.520

我将 Google Reader 与 3 个不同的文件夹一起使用。“个人”适用于每天只更新 1-2 次的网站，我会仔细阅读。“新闻”适用于像纽约时报这样的网站，它们每天有大约 10 次更新，我想至少浏览一下以找到有趣的内容。“浏览”适用于内容泛滥的网站，我有空时会浏览它。

这样，您可以确保跟踪所有重要内容并查看 SO。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-26T13:33:56.603

你听说过[雅虎管道](http://pipes.yahoo.com/pipes/)吗？IMO 这是一个令人难以置信的工具 - 您获取 RSS 提要并通过一些过滤器将其传输。例如，您可以过滤所有包含您感兴趣的关键字的 SO 问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T20:40:44.140

> 您是如何在 stackoverflow 的海量问题中找到这个问题的？

我只是定期查看首页，但我就是那样跛脚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T20:48:01.720

我尝试花 30 分钟浏览 SOF 中的所有新问题。我访问我关注的其他论坛并阅读“新帖子”！

我也订阅[电子邮件]重要的帖子！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-15T21:09:04.820

我使用谷歌阅读器——它会定期更新，我很少错过任何我感兴趣的提要项目。是的，堆栈上有很多问题，但是您将查看器放在“列表视图”中，它可以正常工作。这也比在堆栈上向下滚动主页要好。

# linux - 我应该使用哪个 Linux 发行版作为 Xen 主机？

> ID：551545
> 
> 赞同：13
> 
> 时间：2009-02-15T20:38:54.877
> 
> 标签：linux, sysadmin, xen

我为家庭办公室订购了一台服务器，我想用 Xen 对它进行分区。我认为这将使事情保持清洁并且更易于维护。我将运行 MySQL、PostgreSQL、Tomcat 和我自己的代码之类的东西。

哪个免费提供的 Linux 发行版拥有最好的 Xen 托管设施？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-21T08:18:15.560

对于 domain-0，我**强烈**推荐 Debian 或 Ubuntu（服务器）。原因如下：

1.  设置复杂的网络（网桥、绑定设备等）很简单。一个文件，简单的语法，如果需要的话，很容易让脚本为你做这件事。不要*在*生产机器上使用 Xen 附带的“network-bridge”脚本，您可能需要重新启动 Xend，这会破坏所有网络（dom-0 和 guest）
2.  Debian 和 Ubuntu 使用 apt 包管理器。Apt 以很好地解决依赖关系而臭名昭著，它可以让您搜索为 Xen 编译新工具所需的库（或从源代码中编译 Xen 本身，我推荐）。
3.  Shorewall 在 Xen 社区中非常流行，用于路由配置，在基于 Debian 的系统上非常容易使用。此外，您可以获得 Steve Kemp 的 Xen 工具以及我编写的十几个工具。

我不会向想要桌面虚拟化的人推荐这个，我会推荐 Fedora。然而，作为一个在生产中拥有 300 个 Xen 服务器的 Xen 主机，我强烈推荐一些基于 Debian 的东西。当然，使用你觉得舒服的东西 .. 然而，花时间熟悉基于 Debian 的 dom-0 发行版可能是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T21:16:34.617

任何主要发行版都应该可以正常工作。选择一个你最舒服的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T13:24:14.353

Red Hat EL5（或 Centos）是最容易在 OOB 上设置 Xen 的工具之一，而 RH 作为他们的虚拟化工具完全落后于 xen；debian 和 ubuntu 看起来正在向 KVM 发展。我认为 Fedora 11 默认启用了 pvops 内核。只是我的 2c 价值，我更喜欢基于 Red Hat 但就像他们说的那样，无论你喜欢什么都可以。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T15:57:10.797

Debian 是非常不错的选择。您也可以使用[xen live cd](http://wiki.xensource.com/xenwiki/LiveCD)来测试所有内容，如果一切正常，请将其安装在 HDD 上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T20:55:26.023

定义“最佳”

马上，我会说主要的竞争者是 Debian、Red Hat 和 Gentoo，这取决于管理偏好和需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-02-01T13:26:37.913

opensuse 有用于管理 xen 的特定工具，我没有玩过它，但开箱即用的支持可能会很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-05-28T05:37:56.693

我碰巧看到这个问题。我已经在我们集群中的许多服务器上部署了 Xen 虚拟机。该平台是 Fedora 12。我们已经对其进行了大量测试，并且在这些 VM 上进行了大量计算。它相当稳定。唯一的痛苦是您需要自己编译内核：

[http://fclose.com/b/1535/setting-up-xen-pvops-dom0-on-fedora-xen-3-4-2-kernel-2-6-31-with-paravirt_ops-in-fedora- 12/](http://fclose.com/b/1535/setting-up-xen-pvops-dom0-on-fedora-xen-3-4-2-kernel-2-6-31-with-paravirt_ops-in-fedora-12/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-11-03T10:00:32.633

我想扩展 Tim 的（投票给 Debian）的回应，指出 Xen 社区致力于 Kronos 项目，这将把 XAPI（Xen API）带到 Debian/Ubuntu[看到官方公告](http://blog.xen.org/index.php/2011/07/22/project-kronos/)，是什么让 Debian 更具吸引力的选择。

您可能要考虑的另一个选项是[Xen Cloud Platform](http://xen.org/products/cloudxen.html)（简称 XCP）或 XenServer，尤其是您可以[免费](http://www.citrix.com/lang/English/lp/lp_1688615.asp)获得的基本版本。

# asp.net - ASP.Net 实体框架

> ID：551549
> 
> 赞同：0
> 
> 时间：2009-02-15T20:40:02.580
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我只是在尝试使用 ASP.Net Entity 框架，这是我第一次尝试使用 ORM 框架，所以如果我找错了树，请耐心等待。

为了简化问题，我有以下 2 个表

## 日历

CalendarID 用户 ID 日期 事件名称

## 用户

UserId 用户名

我已将它们都添加到我的实体框架模型中，并建立了表之间的链接。然后，我可以使用类似的东西从我的 MVC 视图中显示日历列表

*   <%= calendarEntry.DateAdded%>

但是，如果我再尝试使用

*   ><%= calendarEntry.Users.Username%> : <%= calendarEntry.DataAdded%>

    它在调用 calendarEntry.Users 时失败，因为它说它为空。为什么实体框架不通过使用细节？我需要在我的模型设计器中进行一些更改吗？

    如果它有助于将数据发送到视图的 MVC 控制器中的代码是这样的

    var Entities = new UnityGamersEntities(); 返回视图（实体。日历）；

    真的希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-16T10:00:35.043

对于任何有兴趣的人，我使用以下代码解决了这个问题

```
 UnityGamersEntities db2 = new UnityGamersEntities();
        ObjectQuery<GameCalendar> gc = db2.GameCalendar.Include("GameTitles"); 
```

似乎确实缺乏实体框架的教程，除非您只想使用单个表，否则我发现很难找到我需要的信息。

希望这将在未来几个月内改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T10:39:23.540

加夫，

还有另一种方法可以让 Linq to Entities 填充用户表。

每个外键和集合都有一个“加载”方法，它将转到数据库，在您的情况下，获取链接到当前日历的用户列表并填充集合。这有点像延迟加载。

如果您要添加此行，它应该可以工作：

```
<!-- Load up Users unless it's already Loaded -->
<% if(!calendarEntry.Users.IsLoaded) calendarEntry.Users.Load(); %>

<!-- Your Line -->
<%= calendarEntry.Users.Username%> : <%= calendarEntry.DataAdded %> 
```

希望能帮助到你。

PS - 我听说你缺乏文件

狡猾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T22:19:20.970

您需要告诉实体框架为日历加载用户。

您可以通过 LINQ 查询执行此操作，只需：

```
Calendar cal = (from c in Calendar
    where c.CalendarID.Equals(input)
    select new 
    {
        c,
        c.Users
    }).FirstOrDefault().c; 
```

也就是说，加载日历及其所有用户。

编辑：可能还有其他加载用户的方法，这只是 LINQ 方式。

# c# - 您可以编译 C#，使其在运行时不需要 .NET Framework 吗？

> ID：551554
> 
> 赞同：29
> 
> 时间：2009-02-15T20:41:13.700
> 
> 标签：c#, .net

是否可以强制 C# 编译器将所有引用的调用拉出框架并将它们打包到 dll 甚至单个可执行文件中？

我喜欢用 C# 编写快速的“一次性”应用程序，但是我不想在目标机器上安装整个框架，一旦它准备好了。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-02-15T20:53:31.317

你问了一个加载的问题。C# 只是一种语言，不需要 .NET Framework。编译它的过程需要一个编译器，它本身可能依赖也可能不依赖 .NET Framework（微软的 C# 编译器不依赖——它是用本机代码编写的）。您的程序将需要引用一些可以找到类型、类和方法供您使用的程序集。您*可以*从引用列表中删除 system.dll 和 mscorlib.dll 并引用您自己的程序集。因此，如果您真的在使用它，您可以避免对 .NET Framework 的依赖。但最后，除非你有一个将程序编译为本机代码的 C# 编译器，否则你仍然依赖于 CLR。

这是一种非常技术性的说法……几乎没有。但它回答了你的问题。:) 然而，更实际有用的是如何让您的 C# 程序以最少的依赖项运行。来自 mono 的 mkbundle 实际上可以让你将它全部编译成一个几乎没有依赖关系的 .exe。

但是，如果您想坚持使用 Microsoft .NET Framework，则可以通过使用 .NET 3.5 SP1 的客户端配置文件来实现更轻的占用空间并更快地安装您通常需要的依赖项。你可以在这里阅读：http: [//msdn.microsoft.com/en-us/library/cc656912.aspx](http://msdn.microsoft.com/en-us/library/cc656912.aspx)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-02-15T20:44:02.523

查看使用 Mono的[mkbundle 。](http://www.mono-project.com/Guide:Running_Mono_Applications)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-10-29T14:50:51.683

现在可以使用 Microsoft .NET Native 将 C# 编译为本机代码： [https ://msdn.microsoft.com/en-us/library/dn584397(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/dn584397(v=vs.110).aspx)

> 它会自动将使用托管代码（C# 或 Visual Basic）编写且以 .NET Framework 和 Windows 10 为目标的应用程序的发布版本编译为本机代码。

...

> 对于您的应用程序的用户，.NET Native 提供以下优势：
> 
> •快速执行时间
> 
> •始终如一的快速启动时间
> 
> • 低部署和更新成本
> 
> •优化应用内存使用

这仅适用于 Visual Studio .NET 2015。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-02-15T20:45:30.027

查看 .NET 客户端配置文件。这将允许您在客户端计算机上打包一个最小安装。稍后将通过 Windows 更新将其更新为完整框架。

当然，这取决于您的应用程序仅使用客户端配置文件中包含的库...

这里有一些信息：http: [//blogs.windowsclient.net/trickster92/archive/2008/05/21/introducing-the-net-framework-client-profile.aspx](http://blogs.windowsclient.net/trickster92/archive/2008/05/21/introducing-the-net-framework-client-profile.aspx)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-02-15T20:48:36.977

据说可以使用第三方工具，例如[http://www.remotesoft.com/linker/](http://www.remotesoft.com/linker/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-15T20:44:04.537

不可能。您的“已编译”C# 应用程序是 .Net CLR 在运行时解释的语言（应该说是 JITed、读取 IL、编译为本机代码，然后调用已编译的本机代码）。

仅供参考 .net 2.0 是 xp SP2 和 vista 上的标准安装，因此您不会支付那么多罚款。

您可以查看单声道，但这仍然涉及在您的目标机器上运行某种框架。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-06T17:38:19.577

不幸的是，这种在现实世界中经常中断或缺失的依赖关系是 C# 没有得到更广泛采用的一个重要原因。另一方面，大多数开发确实有依赖关系.. 以 C++ 和 Java 为例。

我认为我们不会很快真正摆脱这些依赖问题，所以我建议如果你想使用 C#，你制作一个用于安装的包装器，它检查你需要的 .net 框架版本依赖关系，如果缺少通知用户他们需要它来运行您的应用程序。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-02-15T22:31:22.377

一些 C# 功能绑定到 .NET 框架的接口。

例如：

`yield return`需要 IEnumerable 接口

`using (x) {}`需要 IDisposable 接口

# silverlight - Silverlight AutoCompleteBox BorderBrush 运行时颜色变化？

> ID：551563
> 
> 赞同：1
> 
> 时间：2009-02-15T20:46:31.647
> 
> 标签：silverlight, autocomplete, silverlight-toolkit

是否可以在运行时更新模板化 AutoCompleteBox 的 BorderBrush？我似乎无法设置 BorderBrush 或背景。

即使是像 TxtFoodSearch.BorderBrush = new SolidColorBrush(Colors.Red) 这样的基本语句在页面加载后似乎也没有什么不同。

我的 Xaml 如下。

```
 <controls:AutoCompleteBox x:Name="MyAutoCompleteSample" Margin="17,24,58,32" FontSize="12">
                <controls:AutoCompleteBox.Style>
                    <Style TargetType="controls:AutoCompleteBox">
                        <Setter Property="IsTabStop" Value="False" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="controls:AutoCompleteBox">
                                    <Grid Margin="{TemplateBinding Padding}"
                     Background="{TemplateBinding Background}">
                                        <TextBox IsTabStop="True" x:Name="Text" Style="{TemplateBinding TextBoxStyle}" Margin="0"
                                         KeyDown="MyAutoCompleteSample_KeyDown"
                                        />
                                        <Popup x:Name="Popup">
                                            <Border x:Name="PopupBorder" HorizontalAlignment="Stretch" Opacity="0.0" BorderThickness="0" CornerRadius="3">
                                                <Border.RenderTransform>
                                                    <TranslateTransform X="1" Y="1" />
                                                </Border.RenderTransform>
                                                <Border.Background>
                                                    <SolidColorBrush Color="#11000000" />
                                                </Border.Background>
                                                <Border
                               HorizontalAlignment="Stretch"
                               Opacity="1.0"
                               Padding="0"
                               ToolTipService.ToolTip="Select or enter your food selection"
                               BorderThickness="{TemplateBinding BorderThickness}"
                               BorderBrush="{TemplateBinding BorderBrush}"
                               CornerRadius="3">
                                                    <Border.RenderTransform>
                                                        <TransformGroup>
                                                            <TranslateTransform X="-1" Y="-1" />
                                                        </TransformGroup>
                                                    </Border.RenderTransform>
                                                    <Border.Background>
                                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                                            <GradientStop Color="#FFDDDDDD" Offset="0"/>
                                                            <GradientStop Color="#AADDDDDD" Offset="1"/>
                                                        </LinearGradientBrush>
                                                    </Border.Background>
                                                    <ListBox
                                       x:Name="SelectionAdapter"
                                       ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                       ScrollViewer.VerticalScrollBarVisibility="Auto"
                                       ItemContainerStyle="{TemplateBinding ItemContainerStyle}"
                                       ItemTemplate="{TemplateBinding ItemTemplate}" />
                                                </Border>
                                            </Border>
                                        </Popup>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="PopupStates">
                                                <VisualStateGroup.Transitions>
                                                    <VisualTransition GeneratedDuration="0:0:0.1" To="PopupOpened" />
                                                    <VisualTransition GeneratedDuration="0:0:0.2" To="PopupClosed" />
                                                </VisualStateGroup.Transitions>
                                                <VisualState x:Name="PopupOpened">
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetName="PopupBorder" Storyboard.TargetProperty="Opacity" To="1.0" />
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="PopupClosed">
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetName="PopupBorder" Storyboard.TargetProperty="Opacity" To="0.0" />
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </controls:AutoCompleteBox.Style>
            </controls:AutoCompleteBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-16T02:17:49.477

我设法找到如何通过代码解决样式的一种方法如下。

遍历可视化树并获取 AutoCompleteBox，将其转换为文本框，然后调整颜色（边框、背景等）

```
//Cast into textbox
TextBox Temp = VisualTreeHelper.GetChild(VisualTreeHelper.GetChild(MyAutoCompleteControl, 0), 0) as TextBox;

Temp.BorderBrush = new SolidColorBrush(Colors.Red);//Change border color 
```

我确信有更好的方法，但这似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-19T09:04:01.217

如果您使用的是 Silverlight 3（其中可以多次设置样式），那么它更容易：您实际上可以设置`TextBoxStyle`（[在 MSDN 上](http://msdn.microsoft.com/en-us/library/system.windows.controls.autocompletebox.textboxstyle(VS.95).aspx)）。

然后，您可以在代码隐藏中创建新样式（很痛苦），或者可能在代码中更改/应用另一个预定义样式。

# java - 如何打破多个 foreach 循环？

> ID：551578
> 
> 赞同：33
> 
> 时间：2009-02-15T21:01:25.917
> 
> 标签：java, refactoring, foreach

我有四个 foreach 循环遍历集合并根据条件执行某些操作。

这是我现在正在编写的代码：

```
boolean breakFlag = false;
String valueFromObj2 = null;
String valueFromObj4 = null;
for(Object1 object1: objects){
  for(Object2 object2: object1){
    // I get some value from object2
    valueFromObj2 = object2.getSomeValue();
    for(Object3 object3 : object2){
      for(Object4 object4: object3){
       // Finally I get some value from Object4.
       valueFromObj4 = object4.getSomeValue();
       // Compare with valueFromObj2 to decide either to break all the foreach loop
       breakFlag = compareTwoVariable(valueFromObj2, valueFromObj4 );
       if(breakFlag){break;}
      } // fourth loop ends here
      if(breakFlag){break;}
    } // third loop ends here
    if(breakFlag){break;}
  } // second loop ends here
  if(breakFlag){break;}
} // first loop ends here 
```

主要对象（代码中的对象）来自第三方提供商 SDK，因此我无法更改该部分的任何内容。我想问问 Stack Overflow 社区是否有更好的方法来打破所有四个 foreach 循环。或者是否有任何其他方法可以重构此代码以使其更具可读性和可维护性。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2009-02-15T21:06:39.163

`break`在最外面的循环上使用一个标签，当你想跳出所有循环时，在语句中包含这个标签。在下面的示例中，我已修改您的代码以使用标签`OUTERMOST`：

```
String valueFromObj2 = null;
String valueFromObj4 = null;
OUTERMOST: for(Object1 object1: objects){
  for(Object2 object2: object1){
    //I get some value from object2
    valueFromObj2 = object2.getSomeValue();
    for(Object3 object3 : object2){
      for(Object4 object4: object3){
        //Finally I get some value from Object4.
        valueFromObj4 = object4.getSomeValue();
        //Compare with valueFromObj2 to decide either to break all the foreach loop
        if( compareTwoVariable(valueFromObj2, valueFromObj4 )) {
          break OUTERMOST;
        }
      }//fourth loop ends here
    }//third loop ends here
  }//second loop ends here
}//first loop ends here 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-02-15T21:06:20.083

将所有循环提取到函数中并使用 return。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-15T21:09:13.557

您可以使用带标签的 break 语句。这种中断终止外部语句

请参阅[break 语句](http://java.sun.com/docs/books/tutorial/java/nutsandbolts/branch.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T21:31:35.157

有关使用标签的最简单方法，请参阅[分支语句 Java 教程](http://java.sun.com/docs/books/tutorial/java/nutsandbolts/branch.html)。您可以标记任何或所有 for 循环，然后使用这些标签`break`或`continue`与这些标签结合使用。

使用标签的替代方法是使用`return`。只需将您的代码重构为方法调用即可完全绕过使用标签的需要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-16T06:55:09.170

您的示例相当通用，因此很难说出发生了什么，但是我从您提供的代码中得到了如此强烈的代码气味，以至于我不得不认为必须有另一种方法来完全做这件事，很可能是通过将实际的数据结构重构为更有意义的东西。

是什么样的清单`objects`？它包含哪些其他*（最可能重要的）*数据？如果这不是太麻烦的话，如果您提供更多相关的代码，我将不胜感激，因为我的重构器仅仅因为看到那一堆循环就变得头晕目眩。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-15T21:05:31.320

中断或折叠多个语句（实际上是堆栈帧）的一种方法是抛出异常，但不建议这样做，因为运行时展开堆栈非常昂贵，并且可能导致调试未定义行为非常令人讨厌， （记住这一点）。

否则，我建议重写该代码，以便能够以优雅的方式跳出循环。如果您不能以任何其他方式更改此代码，那么您将不得不导致异常...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-15T21:04:16.283

抛出异常并在循环之外捕获它？使用“被认为有害”的东西？

当计算机科学把自己画到一个角落时，这有点好笑;-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-15T21:10:18.530

直接的解决方案是将整个搜索过程放在一个方法中，`return`一旦你有答案。

但是，您的示例代码的抽象形式留下了一些其他可能性。例如，有没有办法“索引”一些内容（例如使用`Map`实例），这样您就不必使用暴力循环？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-15T21:20:41.267

除了 Java 支持标记中断这一事实外，另请参阅[如果达到结束条件，是否可以在 C++ 中退出 for before time？](https://stackoverflow.com/questions/416464/is-it-possible-to-exit-a-for-before-time-in-c-if-an-ending-condition-is-reache)这是与其他一些相关解决方案类似的问题。

# c++ - 从 std::vector 获取字节

> ID：551579
> 
> 赞同：3
> 
> 时间：2009-02-15T21:02:26.177
> 
> 标签：c++, stl

我有类似以下的内容，在用任意数量的位填充它之后，我需要获取要写入文件的字节。我看不到这样做的方法，而且它似乎很有用，所以我一定遗漏了一些东西。有任何想法吗？

```
std::vector<bool> a;

a.push_back(true);
a.push_back(false);
a.push_back(false);
a.push_back(true);

a.push_back(false);
a.push_back(true);
a.push_back(true);
a.push_back(false); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-15T21:06:52.097

`std::vector <bool>`实际上不包含 bools (iebytes) ，它包含位！这主要是一个错误功能，建议您使用`std::deque <bool>`，它没有这个“功能”。

如果您希望存储是连续的，请使用`std::vector <char>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T21:05:54.093

尝试这个

```
void WriteOut(fstream& stream, const vector<bool>& data) {
  for (vector<bool>::const_iterator it = data.begin(); it != data.end(); it++) {
    stream << *it;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T21:06:00.117

bool 通常是一个字节 - 您可以使用 vector::iterator 简单地迭代向量，并以这种方式访问​​每个值。

```
std::vector<bool> a;

a.push_back(true);
a.push_back(false);

for(std::vector<bool>::iterator iter = a.begin(); iter != a.end(); ++iter)
{
    std::cout << *iter << std::endl;
} 
```

将遍历每个布尔值，并将其打印到命令行。打印到文件相对简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T21:18:34.953

做这样的事情

```
std::vector<bool> a;
a.push_back(true);
a.push_back(false);
//...
for (auto it = a.begin(); it != a.end();) // see 0x for meaning of auto
{
    unsigned b = 0;
    for (int i = 0; i < 8*sizeof(b); ++i)
    {
        b |= (*it & 1) << (8*sizeof(b) - 1 - i);
        ++it;
    }
    // flush 'b'
} 
```

所以，你最终要做的是将多块位组合在一起，这里我选择将位组合成本机整数（这对于目标平台来说是最佳的）。我不在这里检查索引，但这是你必须做的事情。我要做的是检查我可以先提取多少完整块，然后处理剩余的部分。

另外，请注意，我是从左到右填充位（假设目标架构是 little-endian），这意味着首先填充 msb。

如果您进行位操作和类似的事情，请为您的位找出一个打包方案，并让它成为您的数据结构。std::bit_vector、std::vector 或 ::dequeue 并不重要。将您的位巧妙地打包到目标平台的本机整数类型中，这将提供最佳性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-08T20:15:11.260

我不记得是否`std::vector<bool>`需要**打包**，很可能不是。如果是，您可以访问其 ::data() 成员以访问原始字节。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-15T23:00:05.723

为什么不使用 STL 位集呢？它具有将位集值转换为等效长值或字符串表示形式的特定方法：

[http://www.cppreference.com/wiki/stl/bitset/start](http://www.cppreference.com/wiki/stl/bitset/start)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-15T21:07:12.890

首先，您想使用 bit_vector 而不是 vector。

其次，没有办法使用 bit_vector 或 vector 来做你想做的事。它们被设计为集合，并且它们的底层格式对您隐藏（因此它可能决定将每个布尔值存储为单个字节，而不是打包为每个字节 8 位。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-07-15T00:04:13.097

其实你可以这样做：

```
copy(yourvector.begin(), yourvector.end(), std::ostreambuf_iterator<char>(outputstream)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-29T21:15:02.580

在查看了上面建议的解决方案之后，我最终只编写了一个完整的工作函数。

```
 // Count number of bytes needed to contain the bits
  // and then copy 8 bit block as bytes.

  void writeAsBytes(const vector<bool> & inBits, vector<uint8_t> & outBytes) {
    int bitOffset = 0;
    const int maxBitOffset = (int) inBits.size();

    const bool emitMSB = true;

    int numBytes = (int)inBits.size() / 8;
    if ((inBits.size() % 8) != 0) {
      numBytes += 1;
    }

    for (int bytei = 0; bytei < numBytes; bytei++) {
      // Consume next 8 bits

      uint8_t byteVal = 0;

      for (int biti = 0; biti < 8; biti++ ) {
        if (bitOffset >= maxBitOffset) {
          break;
        }

        bool bit = inBits[bitOffset++];

        // Flush 8 bits to backing array of bytes.
        // Note that bits can be written as either
        // LSB first (reversed) or MSB first (not reversed).

        if (emitMSB) {
          byteVal |= (bit << (7 - biti));
        } else {
          byteVal |= (bit << biti);
        }
      }

      outBytes.push_back(byteVal);
    }
  } 
```

# c - 打开系统调用

> ID：551586
> 
> 赞同：1
> 
> 时间：2009-02-15T21:05:50.960
> 
> 标签：c, unix

我正在为我的操作系统中期学习，想知道是否可以得到一些帮助。

有人可以解释检查以及内核在 open() 系统调用期间做了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-15T21:20:16.277

很粗略的，你可以想到以下几个步骤：

1.  通过遍历文件系统数据结构，将文件名转换为 inode，它是描述文件内容的实际文件系统对象。
2.  在此遍历过程中，内核将通过目录路径检查您是否有足够的访问文件的权限，并检查文件本身的访问权限。精确的检查取决于通过什么模式打开。
3.  在内核中创建有时称为*打开文件描述符的内容。*内核代表任何进程打开的每个文件都有一个这些对象。
4.  在每个进程的文件描述符表中分配一个未使用的索引，并将其指向打开的文件描述符。
5.  从系统调用返回这个索引作为文件描述符。

这个描述对于打开普通文件和/或目录应该基本上是正确的，但是对于各种特殊文件，特别是对于设备来说，情况是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T21:13:31.470

我会回到教授告诉你的内容——在 open() 期间会发生很多事情，这取决于你正在打开的内容（即设备、文件、目录），除非你写的是教授的内容因为，你会失去积分。

话虽如此，它主要涉及检查这个打开是否有效（即这个文件是否存在，用户是否有读/写权限等），然后分配内核句柄表中的一个条目来跟踪fd 及其当前文件位置（当然还有其他一些东西）

# c# - Using Extensions: Weighing The Pros vs Cons

> ID：551589
> 
> 赞同：4
> 
> 时间：2009-02-15T21:06:17.947
> 
> 标签：c#, extension-methods

Recently I [asked a question](https://stackoverflow.com/questions/550374/checking-for-null-before-tostring) about how to clean up what I considered ugly code. One recommendation was to create an Extension Method that would perform the desired function and return back what I wanted. My first thought was 'Great! How cool are Extensions...' but after a little more thinking I am starting to have second thoughts about using Extensions...

My main concern is that it seems like Extensions are a custom 'shortcut' that can make it hard for other developers to follow. I understand using an Extension can help make the code syntax easier to read, but what about following the voice behind the curtain?

Take for example my previous questions code snippet:

```
if (entry.Properties["something"].Value != null)
  attribs.something = entry.Properties["something"].Value.ToString(); 
```

Now replace it with an Extension:

```
public static class ObjectExtensions
{
    public static string NullSafeToString(this object obj)
    {
        return obj != null ? obj.ToString() : String.Empty;
    }
} 
```

and call using the syntax:

```
attribs.something = entry.Properties["something"].Value.NullSafeToString(); 
```

Definetely a handy way to go, but is it really worth the overhead of another class object? And what happens if someone wants to reuse my code snippet but doesn't understand Extension? I could have just as easily used the syntax with the same result:

```
attribs.something = (entry.Properties["something"].Value ?? string.Empty).ToString() 
```

So I did a little digging and found a couple of articles that talked about the pros/cons of using Extensions. For those inclined have a look at the following links:

[MSDN: Extension Methods](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

[Extension Methods Best Practice](http://blogs.msdn.com/vbteam/archive/2007/03/10/extension-methods-best-practices-extension-methods-part-6.aspx)

[Extension Methods](http://weblogs.asp.net/scottgu/archive/2007/03/13/new-orcas-language-feature-extension-methods.aspx)

I can't really decide which is the better way to go. Custom Extensions that do what I want them to do or more displayed code to accomplish the same task? I would be really interested in learning what 'real' developers think about this topic...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-15T21:10:03.540

Personally I think the "problems" of extension method readability are vastly overstated. If you concentrate on making your code easy to read in terms of *what* it's doing, that's more important most of the time than *how* it's doing it. If the developer wants to trace through and find out what's actually happening behind the scenes, they can always click through to the implementation.

My main problem with extension methods is their discovery method - i.e. via a specified namespace instead of a specified class. That's a different matter though :)

I'm not suggesting that you put in extension methods arbitrarily, but I would seriously consider how often you need to know how every expression in a method works vs skimming through it to see what it does in broader terms.

EDIT: Your use of terminology may be misleading you slightly. There's no such thing as an "extension object" - there are only "extension methods" and they have to exist in static types. So you may need to introduce a new *type* but you're not creating any more *objects*.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-15T21:09:43.197

[OP] Definetely a handy way to go, but is it really worth the overhead of another class object?

No extra class object is created in this scenario. Under the hood, extension methods are called no differently than a static method. There is an extra metadata entry for the extension method container but that is pretty minimal.

[OP] And what happens if someone wants to reuse my code snippet but doesn't understand Extension Objects?

Then it would be a good time to educate them :). Yes, there is the risk that a new developer may not be comfortable with extension methods to start. But this is hardly an isolated feature. It's being used more and more in all of the code samples I'm seeing internally and on the web. It's something that is definitely worth while for a developer to learn. I don't think it fits into the category of "to esoteric to expect people to know"

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-15T21:35:19.593

The only serious weirdness to deal with in Extension methods are:

1.  They do not have to cause a null reference exception if the left hand side (the object on which it appears you are invoking a method) is null.
    *   can sometimes be useful, but is contrary to expectations as such should be used with extreme caution.
2.  They are not accessible through reflection on the classes/interfaces to which they apply.
    *   generally not a problem, but worth keeping in mind.
3.  Name collisions with other extension methods involve a lengthy resolution rule sequence
    *   if you care the sequence is to prefer:
        1.  Extension methods defined inside the current module.
        2.  Extension methods defined inside data types in the current namespace or any one of its parents, with child namespaces having higher precedence than parent namespaces.
        3.  Extension methods defined inside any type imports in the current file.
        4.  Extension methods defined inside any namespace imports in the current file.
        5.  Extension methods defined inside any project-level type imports.
        6.  Extension methods defined inside any project-level namespace imports.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T21:25:16.387

[OP] And what happens if someone wants to reuse my code snippet but doesn't understand Extension Objects?

The extension methods will not show in the intellisense for the object if the assembly that implements them is not references in the project. Your code snippet will also not compile. That could potentially create a bit of a confusion to the other developer.

If the extension method assembly is referenced, it will show in the intellisense, but it will be not mentioned in the documentation for the object. This could potentially cause a bit of confusion as well.

However, as @JaredPar mentioned, the extension methods as a technique are used more and more and I would expect most of the C# programmers to know about them. Thus, I wound't be too worried about any potential confusion.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-16T12:50:02.273

C# Extensions is an additional "tool" provided by .Net in order to help you write your code a little bit nicer. Another advantage of them is, that they handle null. Although they seem very usable, I try to use them only in certain cases that will really tidy up my code, because they are not standard coding methods and they stand a little bit seperate from other classes as they have to be in static classes and are static themselves.

***Let's say their implementation is a little bit untidy, but their use is made tidier***.

It is also important to mention that they only exist in C# and VB.Net (Java doesn't have Extensions). Another important fact is that Extensions have no priority over standard methods, meaning that if a method is implemented in a class with the same name as an extension method on the same class, then the first method is the one that will be called and not the extension method.

Below there are three cases where I often use them, why I use them and alternative solutions that would solve the same problem:

**1\. To implement specific methods for generic classes:** I have a generic type, let's say a collection `List<T>`. I want to do a method that applies only to a specific kind of list. Let's say a method that creates a union from a list of strings using a seperator (`"A", "B", "C", " sep " --> "A sep B sep C"`):

```
public static string union(this List<string> stringList, String seperator)
{
   String unionString = "";
   foreach (string stringItem in stringList) {
      unionString += seperator + stringItem; }
   if (unionString != "") { 
      unionString = unionString.Substring(seperator.Length); }
   return unionString;
} 
```

In case I didn't want to use an extension, I would have to create a new class "`StringCollection : List<string>`" and implement my method there. This is mainly not a problem and it is actually better in most cases, but not in all cases. If for example you are receiving all your data in lists of strings in many cases, you don't have to convert those lists in `StringCollections` each time you want to use union, but use an extension instead.

**2\. To implement methods that need to handle null:** I need a method to convert an object to a string without throwing an exception in case the object is null

```
public static String toStringNullAllowed(this Object inputObject)
{
   if (inputObject == null) { return null; }
   return inputObject.ToString();
} 
```

In case I didn't want to use an extension, I would have to create a class (probably static), for example `StringConverter`, which will do the same job, with more words than a simple `myObject.toStringNullAllowed();`

**3\. To extend value types or sealed classes:** Value types such as int, float, string, etc as well as sealed classes (classes that cannot be inherited) cannot be extended through inheritance. Below you can see an example of extending integers to be able to be converted to x-digit Strings (for example `integer 34, digits 5 --> "00034"`):

```
public static String toXDigit(this int inputInteger, int x)
{
   String xDigitNumber = inputInteger.ToString();
   while (xDigitNumber.Length < x) { xDigitNumber = "0" + xDigitNumber; }
   return xDigitNumber;
} 
```

Again an alternative solution would be a static class (like a toolbox), let's say "Math".

*   In that case you would write: `Math.toXDigit(a, x);`
*   While with the extension method: `a.toXDigit(x);`

The extension method looks better and is more understandable, ***like speaking English***

*To conclude, I guess the disadvantage of extensions is that their implementation is seperated from standard classes and looks a little bit odd or difficult to programmers that are not used to them, while their advantage is that they offer a more understandable, tidier and encapsulated use of the language.*

# c++ - 仅存在于 RAM 中的临时文件？

> ID：551595
> 
> 赞同：5
> 
> 时间：2009-02-15T21:08:37.177
> 
> 标签：c++, temporary-files, ram, one-time-password

我正在尝试使用 OTP 方法编写加密。为了与安全理论保持一致，我需要将纯文本文档仅存储在内存中，并且永远不会写入物理驱动器。tmpnam 命令似乎是我所需要的，但据我所知，它将文件保存在磁盘上而不是 RAM 上。

使用 C++ 是否有任何（平台无关）方法允许文件仅存在于 RAM 中？如果可能，我想避免使用 RAM 磁盘方法。

谢谢

编辑：谢谢，这对我来说只是一个学习的东西，我是加密新手，只是通过不同的方法工作，我实际上并不打算使用其中的许多方法（尤其是 OTP，因为原始文件大小增加了一倍，因为“软垫”）。

如果我完全诚实，我是一个 Linux 用户，所以放弃 Windows 并不会太糟糕，我现在正在考虑使用 RAM 磁盘，因为 FUSE 对于“学习”的东西来说似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-15T21:21:29.860

简单的答案是：不，没有平台独立的方式。即使只将数据保存在内存中，它仍然存在被虚拟内存管理器交换到磁盘的风险。

在 Windows 上，您可以使用**VirtualLock()**强制内存留在 RAM 中。您还可以使用**CryptProtectMemory()**来防止其他进程读取它。

在 POSIX 系统（例如 BSD、Linux）上，您可以使用`mlock()`将内存锁定在 RAM 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-15T21:16:26.643

除非您计算内存中的流（如字符串流），否则不是真的。

没有特别是出于安全目的：任何数据都可以交换到虚拟内存系统上的磁盘。

通常，如果您担心安全性，则必须使用特定于平台的方法来控制访问：如果每个人都可以读取数据，那么将数据保存在 RAM 中有什么好处？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-15T21:26:21.270

您可能想查看[TrueCrypt](http://www.truecrypt.org/)的源代码。在文件系统级别获取代码可能是您最好的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T21:16:52.947

OTP 对任意文件来说是一种糟糕的加密方法，除非您拥有大量可以*保证*永远不会重复的熵（这就是它被称为“一次性”的原因！）

如果你想创建一个只存在于内存中的类文件对象并且你不关心 Windows，我会考虑编写一个自定义 FUSE 文件系统（[http://fuse.sourceforge.net/](http://fuse.sourceforge.net/)）；通过这种方式，您可以保证哪些内容会写入磁盘，哪些不会写入磁盘，并且所有程序都可以访问您的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-16T00:10:26.383

使用其中一个`std::stringstream`or[`fmemopen`](http://kerneltrap.org/man/linux/man3/fmemopen.3)将使您能够像文件一样访问内存块。如果（为了安全）你想避免它被换出，使用`mlock`可能最容易与`fmemopen`' 缓冲区一起使用而不是`std::stringstream`. 结合可能需要`mlock`通过`std::stringstream`自定义分配器（用作模板参数）来完成。

# iphone - （iPhone）UIWebView横向填充宽度？

> ID：551602
> 
> 赞同：0
> 
> 时间：2009-02-15T21:11:03.583
> 
> 标签：iphone, interface-builder, uiwebview, landscape

我正在使用带有文本的 UIWebView。当 iPhone 旋转到横向时，文本不会填充现在更宽的 UIWebView 宽度。我正在使用 P（段落）标签，它不应该影响内容填充横向的宽度。纵向可见的换行符在横向中保持不变。在 Interface Builder 中，我没有改变任何东西。在 IB Inspector 中，Web View Size 在 AutoSizing 下有所有实心条，这意味着它应该填充到横向宽度，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-06-21T08:20:06.297

这是一个调整虽然不是一件好事，但应该由苹果自己处理

正如您所注意到的，当 WebView 以纵向初始化然后您将其转换为横向时，一切正常。所以..你可以做的是总是用纵向边界初始化你的webview，添加一个在2~3秒后回调的选择器，并根据你的要求设置webview的框架。

现在，当您的 webview 的帧大小根据纵向（例如 320,460）时内容开始加载，因此如果您的代码中有此行，将 webview 转换为横向将自动调整您的 web 视图

```
[webViewObjet_ setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight]; 
```

下面是代码片段

```
- (id) initWithFrame:(CGRect)frame
{
    if (self = [super initWithFrame:frame])
    {
        webViewObjet_ = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
        .....
    }
}

- (void) webViewDidStartLoad:(UIWebView *)webView
{
    .....       
    [self performSelector:@selector(chuss) withObject:nil afterDelay:3];
    // call the function chuss after 3 second
}

- (void) chuss
{
    webViewObjet_.frame = CGRectMake(0, 0, self.frame.size.width, self.frame.size.height);
    [webViewObjet setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-10T21:23:59.220

现在尝试解决同样的问题，在详细查看了 Apple 的“WhichWayIsUp”-Sample 之后终于做到了。

为了简短起见：

1) 在视图检查器中禁用 |--| 和 <-->

2)`将视图模式从Webview切换到“Aspect Fill”

等等瞧;)

保持共鸣，疯子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-26T21:01:29.180

我也有同样的问题。重新加载不起作用，唯一似乎有点帮助的是在代码中添加以下行：

> self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth;

（我把它放在 willAnimateFirstHalfOfRotationToInterfaceOrientation 函数中）

它仍然在右侧保留一个小的白色边距，但它比默认值要好得多。注意：你应该在 self.view 而不是 UIWebView 实例上应用这个，那是行不通的。

等待苹果的解决方案。。

彼得

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-30T21:37:53.043

这听起来很奇怪，但它确实有效：

如果 UIWebView 位于 UINavigationController 中，则一切正常。我遇到了同样的问题，所以我只是将它包装在 UINavigationController 中，问题就消失了。

出于某种原因， UINavigationController 使旋转像魅力一样工作。

# vba - 检查活动的互联网连接

> ID：551613
> 
> 赞同：7
> 
> 时间：2009-02-15T21:17:00.840
> 
> 标签：vba, networking, ms-office

编写了一个小应用程序，它可以访问一堆搜索网站并将结果放入 Word 文档中，每天运行数百次。

它将单个搜索结果保存在多个本地文件夹中，因此下次搜索这些单词时，它会在本地抓取它们，而不是再次加载网站。

这工作正常 - 即使它不快。人们之所以印象深刻，是因为直到几周前，他们还是通过手动加载六个不同的搜索网站，进行搜索，然后将结果复制并粘贴到 Word 文档中。

但是，我们办公室的网络不可靠，并且最近半天一直处于关闭状态。这意味着大约 400 个错误搜索已保存在本地文件夹中，并插入到最终文档中。

当一个人在搜索时，他们可以判断互联网是否坏了，他们会在以后进行搜索。显然，这个应用程序无法分辨，而且因为我没有使用 API 或任何东西，而且因为我仅限于使用 VBA 环境（我什至不允许使用 MZ 工具），我需要找到一些方法来在继续程序流程之前检查互联网是否正常工作，不要依赖过多的参考资料，最好不要对短语“404 Page Not Found”进行屏幕截图。

我对VB不是很熟悉，而且VBA在很多方面都毁了我，所以可能有一些简单的方法可以做到这一点，这就是我在这里问的原因。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-02-15T21:35:08.487

显然，你的问题有很多层次。您应该从定义“连接到互联网”开始，然后继续制定后备策略，包括在失败时不写入无效文件。

至于“我连接了吗”的问题，您可以尝试使用 Win32 API：

```
Private Declare Function InternetGetConnectedState Lib "wininet.dll" _
(ByRef dwflags As Long, ByVal dwReserved As Long ) As Long

Public Function GetInternetConnectedState() As Boolean
  GetInternetConnectedState = InternetGetConnectedState(0&,0&)
End Function 
```

尽管取决于您的网络设置（代理/NAT/防火墙限制等），Windows 可能对此有不同的看法。

尝试获取您感兴趣的页面，检查 HTTP 标头中的返回状态（网关超时，404，当它“不起作用”时您期望发生的任何事情）也可能是一种方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-15T21:39:54.917

您可以使用 MSXML 库并使用 XMLHttpRequest 类来检查事物

例如

```
On Error Resume Next
Dim request As MSXML2.XMLHTTP60
request.Open "http://www.google.com"
request.Send
Msgbox request.Status 
```

状态将为您提供请求发生情况的 HTTP 状态代码。根据您的情况，您可能需要进行更多检查。

希望有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-12-26T12:13:27.357

使用以下代码检查 Internet 连接，首先在您的参考文献中启用 XML v6.0

```
Function checkInternetConnection() As Integer
'code to check for internet connection
'by Daniel Isoje
On Error Resume Next
 checkInternetConnection = False
 Dim objSvrHTTP As ServerXMLHTTP
 Dim varProjectID, varCatID, strT As String
 Set objSvrHTTP = New ServerXMLHTTP
 objSvrHTTP.Open "GET", "http://www.google.com"
 objSvrHTTP.setRequestHeader "Accept", "application/xml"
 objSvrHTTP.setRequestHeader "Content-Type", "application/xml"
 objSvrHTTP.Send strT
 If err = 0 Then
 checkInternetConnection = True
 Else
  MsgBox "Internet connection not estableshed: " & err.Description & "", 64, "Additt !"
 End If
End Function 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T21:31:08.263

不幸的是，由于以下几个原因，这是一个有点难以回答的问题：

1.  您如何定义非工作互联网连接？你检查一个有效的IP地址吗？你打出来了吗？你怎么知道你有权限检查这些东西？您怎么知道计算机的防火墙/防病毒软件没有导致异常行为？
2.  一旦您确定连接正常工作，如果连接在运行过程中中断，您会怎么做？

可能有很多方法可以做你想做的事情，但是很多“细节中的魔鬼”类型的事情往往会弹出。您有什么方法可以检查保存的搜索是否有效？如果是这样，那可能是最好的方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-15T23:32:47.767

基于 shakalpesh 的回答及其评论，有（至少）两种方法可以在不解析 XMLHTTP60 对象返回的 XML 的情况下将网页导入 Word。

（注意 HTTP 状态码 200 表示“请求已成功” - 请参见[此处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)）

*   将`XMLHTTP60.ResponseText`输出写入文本文件，然后调用`Documents.Open`该文本文件

> ```
> If (xhr.Status = 200) Then
>     hOutFile = FreeFile
>     Open "C:\foo.html" For Output As #hOutFile
>     Print #hOutFile, xhr.responseText
>     Close #hOutFile
> End If
> 
> // ...
> 
> Documents.Open "C:\foo.html" 
> ```

这样做的缺点是某些链接元素可能会丢失，并且在文件打开时您会收到一个消息框

*   使用 XMLHTTP60 对象检查 URL 状态，然后`Documents.Open`像以前一样使用打开 URL：

> ```
> If (xhr.Status = 200) Then
>     Documents.Open "http://foo.bar.com/index.html"
> End If 
> ```

XMLHTTP60 请求成功而`Documents.Open`失败的可能性很小（反之亦然）。希望这应该是一个相当罕见的事件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-18T19:22:52.970

我在这里和其他地方发现大多数答案令人困惑或不完整，所以这里是如何为像我这样的白痴做的：

```
'paste this code in at the top of your module (it will not work elsewhere)
Private Declare Function InternetGetConnectedState Lib "wininet.dll" (ByRef dwflags As Long, ByVal dwReserved As Long) As Long

Private Const INTERNET_CONNECTION_MODEM As Long = &H1
Private Const INTERNET_CONNECTION_LAN As Long = &H2
Private Const INTERNET_CONNECTION_PROXY As Long = &H4
Private Const INTERNET_CONNECTION_OFFLINE As Long = &H20

'paste this code in anywhere
Function IsInternetConnected() As Boolean
    Dim L As Long
    Dim R As Long
    R = InternetGetConnectedState(L, 0&)
    If R = 0 Then
        IsInternetConnected = False
    Else
        If R <= 4 Then IsInternetConnected = True Else IsInternetConnected = False

    End If
End Function

'your main function/calling function would look something like this
Private Sub btnInternetFunction_Click()
    If IsInternetConnected() = True Then
        MsgBox ("You are connected to the Internet")
        'code to execute Internet-required function here
    Else
        MsgBox ("You are not connected to the Internet or there is an issue with your Internet connection.")
    End If
End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-07T19:18:12.997

这就是我使用的。我更喜欢它，因为它不需要任何外部引用或 DLL。

```
Public Function IsConnected()
    Dim objFS As Object
    Dim objShell As Object
    Dim objTempFile As Object
    Dim strLine As String
    Dim strFileName As String
    Dim strHostAddress As String
    Dim strTempFolder As String

    strTempFolder = "C:\PingTemp"
    strHostAddress = "8.8.8.8"
    IsConnected = True ' Assume success
    Set objFS = CreateObject("Scripting.FileSystemObject")
    Set objShell = CreateObject("Wscript.Shell")

    If Dir(strTempFolder, vbDirectory) = "" Then
      MkDir strTempFolder
    End If

    strFileName = strTempFolder & "\" & objFS.GetTempName
    If Dir(strFileName) <> "" Then
      objFS.DeleteFile (strFileName)
    End If

    objShell.Run "cmd /c ping " & strHostAddress & " -n 1 -w 1 > " & strFileName, 0, True
    Set objTempFile = objFS.OpenTextFile(strFileName, 1)
    Do While objTempFile.AtEndOfStream <> True
        strLine = objTempFile.Readline
        If InStr(1, UCase(strLine), "REQUEST TIMED OUT.") > 0 Or InStr(1, UCase(strLine), "COULD NOT FIND HOST") > 0 Then
            IsConnected = False
        End If
    Loop
    objTempFile.Close
    objFS.DeleteFile (strFileName)
    objFS.DeleteFolder (strTempFolder)

    ' Remove this after testing.  Function will return True or False
    MsgBox IsConnected
End Function 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-17T16:00:32.763

我遇到了同样的问题，在谷歌上搜索了很多之后，我意识到有一种更简单的方法可以做到这一点......它需要用户启用 Microsoft Internet Explorer 控制器库，但仅此而已。这个想法是您的代码导航到一个网站（在本例中为 google），并在获取网页文档 (HTML) 之后。在搜索框中输入一个值。

```
Sub Test1()
On Error GoTo no_internet 'Error handler when no internet
Dim IE As New SHDocVw.InternetExplorer

IE.Visible = False 'Not to show the browser when it runs
IE.navigate "www.google.com" 'navigates to google

Do While IE.ReadyState <> READYSTATE_COMPLETE 'loops until it is ready
Loop

'Here It gets the element "q" from the form "f" of the HTML document of the webpage, which is the search box in google.com
'If there is connection, it will run, quit and then go to the msgbox.
'If there is no connection, there will be an error and it will go to the error handler "no_internet" that is declared on top of the code
IE.document.forms("f").elements("q").Value = "test"
IE.Quit

MsgBox "Internet Connection: YES"
Exit Sub
no_internet:
IE.Quit
MsgBox "Internet Connection: NO" ' and here it will know that there is no connection.
End Sub 
```

# c# - 解释此代码如何工作

> ID：551614
> 
> 赞同：1
> 
> 时间：2009-02-15T21:17:54.097
> 
> 标签：c#, algorithm

我在这里创建一个单独的线程，因为我相信如果我写评论，评论不会将线程推到顶部，因此任何写过该线程的人都会收到通知。

此代码由 Micheal Buen 在将[文本写入文件中间的](https://stackoverflow.com/questions/410324/writing-text-to-the-middle-of-a-file)线程中提供：

```
 LinkedList<string> beatles = new LinkedList<string>();

        beatles.AddFirst("John");
        LinkedListNode<string> nextBeatles = beatles.AddAfter(beatles.First, "Paul");
        nextBeatles = beatles.AddAfter(nextBeatles, "George");
        nextBeatles = beatles.AddAfter(nextBeatles, "Ringo");
        nextBeatles = beatles.AddAfter(nextBeatles, "George");
        nextBeatles = beatles.AddAfter(nextBeatles, "Ringo");

        nextBeatles = beatles.AddAfter(nextBeatles, "George");
        nextBeatles = beatles.AddAfter(nextBeatles, "Ringo");

        nextBeatles = beatles.AddAfter(nextBeatles, "George");
        nextBeatles = beatles.AddAfter(nextBeatles, "Ringo");

        nextBeatles = beatles.AddAfter(nextBeatles, "George");
        nextBeatles = beatles.AddAfter(nextBeatles, "Ringo");

        // change the 1 to your 5th line
        LinkedListNode<string> paulsNode = beatles.NodeAt(6);
        LinkedListNode<string> recentHindrance = beatles.AddBefore(paulsNode, "Yoko");
        recentHindrance = beatles.AddBefore(recentHindrance, "Aunt Mimi");
        beatles.AddBefore(recentHindrance, "Father Jim");

        Console.WriteLine("{0}", string.Join("\n", beatles.ToArray()));

        Console.ReadLine();

public static class Helper
{
    public static LinkedListNode<T> NodeAt<T>(this LinkedList<T> l, int index)
    {
        LinkedListNode<T> x = l.First;

        while ((index--) > 0)
        {
                x = x.Next;
            Console.Write(x.Value);
            Thread.Sleep(10000);
        }

        return x;
    }
} 
```

我想知道的是，扩展方法实现了什么？

在第一次通过时，x = x.Next 意味着我们正在查看 Ringo 而不是 George，依此类推。引擎盖下到底发生了什么，从我调用 NodeAt(6) 开始，代码在做什么？我问这个是因为能够阅读和理解代码而不使用单步执行方法作为帮助很重要（例如，有时在工作中你会阅读打印文档中的代码）。另外，为什么我们在循环中倒数，为什么在进入循环体之前有一个括号减去1？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-15T21:37:13.473

扩展方法仅遍历 LinkedList`n`元素，它`x`使用列表的第一个元素 (l.First) 进行初始化，然后在此期间将索引递减到向前的`n`时间 (look `x = x.Next;`)：

```
指数：1 2 3 4
     _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
    | 约翰 |-> | 保罗 |-> | 乔治 |-> | 林戈 |
     ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾ ‾

```

所以如果你用索引 4 `NodeAt(4)`（ (George)，递减（到 1），获取下一个项目（Ringo），然后递减到 0，这将*退出 while*，并在第 4 位（Ringo）*返回LinkedList 项目。*

此外，您可能需要检查 System.Linq 提供的[ElementAt](http://msdn.microsoft.com/en-us/library/bb299233.aspx)扩展方法以实现相同的目的：

```
var linkedList = new LinkedList<string>(new []{"John", "Paul", "George", "Ringo"});
linkedList.ElementAt(3); // this returns you Ringo, note that 
                         // the index is 0-based! 
```

# php - 如何让 Zend Framework 错误页面看起来更清晰美观？

> ID：551617
> 
> 赞同：1
> 
> 时间：2009-02-15T21:19:33.780
> 
> 标签：php, zend-framework

默认情况下，ZF 中的错误页面如下所示：

```
Fatal error: Uncaught exception 'Zend_Form_Exception' with message 'Method setDeault does not exist' in /usr/home/.../library/Zend/Form.php:2838 
Stack trace: 
#0 [internal function]: Zend_Form->__call('setDeault', Array) 
#1 /usr/home/.../application/admin/controllers/TagsController.php(40): Web_Form_Admintags->setDeault('tagstext', '....') 
#2 /usr/home/.../library/Zend/ 
```

有什么方法可以将这种混乱的错误描述更改为更清晰的形式（类似于 Django 错误页面）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T21:30:35.190

这不是错误页面，而是未捕获异常的标准 PHP 输出。据我所知，Zend Framework 中没有默认的错误页面——您必须通过为 ErrorController 创建适当的视图来创建自己的错误页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T21:32:26.060

AFAICR 这是使用错误控制器吗？该消息基本上是[异常对象](http://www.php.net/exception)的转储。您可以通过单独调用不同的部分来拆分它，而不是将整个批次作为字符串转储。请参阅我链接到的手册页。

`APPLICATION_ENVIRONMENT`确保仅在设置为时才提供异常信息`development`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-03T13:01:38.043

使用新行格式化异常，但不会转换为
html。你有几个选择...

1.  `<pre></pre>`用标签包装错误
2.  创建自定义异常处理程序

```
function exception_handler($exception) {
  echo "Uncaught exception: " , $exception->getMessage(), "\n";
}

set_exception_handler('exception_handler'); 
```

# ruby - 如何使用 Ruby 编写 GNOME 小程序

> ID：551622
> 
> 赞同：3
> 
> 时间：2009-02-15T21:22:59.483
> 
> 标签：ruby, applet, gnome

是否有使用 Ruby 编写 GNOME 小程序的好指南或教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-16T13:38:50.400

如果您需要 ruby​​-gnome2 状态图标，此代码可能很有用：[示例代码](http://github.com/tristil/agile-lamp/blob/60ea296d3721532198faa37f7b805dcdb004cc5f/agilelampclient/lib/agilelamp/statusicon.rb)。这是 Statusicon 的[文档](http://ruby-gnome2.sourceforge.jp/hiki.cgi?Gtk%3A%3AStatusIcon)。我不记得applet和statusicon是什么关系，但是我想说applet只是一个初始化statusicon类的配置文件。

# asp.net - 表单标签之外的asp.net自定义控件呈现

> ID：551623
> 
> 赞同：1
> 
> 时间：2009-02-15T21:23:10.247
> 
> 标签：asp.net, custom-server-controls

我在将其内容（子控件）呈现在标签之外的自定义控件时遇到问题，这会导致运行时错误和问题。为了尽可能简化事情，我创建了下面的控件，但它有同样的问题。我尝试从 Control、WebControl 和 CompositeControl 继承都导致了同样的问题。猜测有一些明显的事情我做错了......感谢您的帮助。

```
using System;
using System.Web.UI.WebControls;

namespace MyControls
{
    public class TestControl : CompositeControl
    {
        protected override void CreateChildControls()
        {
            Controls.Clear();
            Controls.Add(new Button() { Text = "TestControl!" });
            ClearChildViewState();
        }
    }
} 
```

以编程方式添加控件会导致在表单标记之外进行标记。通过标记添加控件是正确的。

```
protected void Page_Load(object sender, EventArgs e)
{
    Controls.Add(new TestControl());
}

...
<body>
    <form name="PageForm" method="post" action="default.aspx" id="PageForm">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTE5MDEwMTE5MWRkg0FopdvLhTPGxHkGm1xCCOVQz6A=" />
</div>

    <div>

    </div>
    </form>
</body>
</html>
<span><input type="submit" name="ctl04$ctl00" value="TestControl!" /></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T23:34:05.393

通过 Page.Form 属性添加控件将在表单内呈现按钮。

```
Page.Form.Controls.Add(new Button() { Text = "TestControl!" }); 
```

但是，由于该按钮不包含在诸如 <div> 之类的块中，因此此按钮可能存在一些布局问题。使用 ScarletGarden 的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-16T00:00:36.903

这与您的自定义控件无关。您的问题是由您将控件添加到页面的方式引起的。

当您调用`Controls.Add`页面的`Page_Load`方法时，这基本上是以下的简写：

```
Page.Controls.Add(new TestControl()); 
```

即，您在整个页面的控件层次结构的末尾添加控件。呈现页面时，您的控件将在所有其他控件之后呈现 - 甚至在结束`</html>`标记之后。

如果您希望您的控件在表单中呈现，那么您需要将其添加到表单的控件层次结构中：

```
Form.Controls.Add(new TestControl()); 
```

如果您需要更细粒度的定位，那么您需要在页面上的所需位置放置一个`placeholder`（或`div`或`span`等）并将您的控件添加到该位置，如 ScarletGarden 的回答中所示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T22:17:33.453

您的控件似乎没问题，我认为您在将控件添加到页面时遇到了问题，

将 placeHolder 添加到您的页面，

```
<body>
    <form id="form1" runat="server">
    <div>
        <asp:PlaceHolder ID="placeHolder" runat="server"></asp:PlaceHolder>
    </div>
    </form>
</body> 
```

然后将您的复合控件添加到此占位符的控件集合中，如下所示：

```
TestControl testCtrl = new TestControl();
placeHolder.Controls.Add(testCtrl); 
```

# php - jQuery - 使用 $.post 接收 $_FILES 数组

> ID：551627
> 
> 赞同：6
> 
> 时间：2009-02-15T21:28:59.670
> 
> 标签：php, jquery, file-upload

我正在尝试通过 jQuery 提交表单。我的表单包含必须上传的字段和文件。它是类型`ENCTYPE="multipart/form-data"`。

我可以使用以下方法接收所有字段值：`post = $('#myForm').serialize();` 但是如何接收`$_FILES`数组？我需要这个来处理上传的文件。

这可以使用 jQuery 吗，如果可以，怎么做？还是我需要为 jQuery 使用特殊的上传插件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-15T21:37:32.600

jquery 表单是最好的方法，您可以将其添加到任何普通表单中，

```
<form method="post" action="URL">
<input type="file" name="file">
<input type="text" name"text">
<input type="submit"> 
</form>

<script type="text/javascript">
$(document).ready(function() { 
  $(form).ajaxForm();
})
</script> 
```

将按预期工作，但使用 ajax。

[http://malsup.com/jquery/form/#code-samples](http://malsup.com/jquery/form/#code-samples)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-02-15T21:30:36.750

您不能通过 javascript 上传文件。

查看这个相关问题：
[Is it possible to use Ajax to do file upload?](https://stackoverflow.com/questions/543926/is-it-possible-to-ajax-a-file-upload/543927#543927)

本质上，“伪造”AJAX 文件上传的两种最流行的方法是使用 Flash 插件（如[SWFUpload](http://swfupload.org/) ）或将表单提交到处理请求的隐藏 iframe。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-11-17T05:56:51.763

表单包含文件输入，但表单上缺少 method=POST 和 enctype=multipart/form-data。文件不会发送

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-12T23:52:44.027

使用表单数据

```
<form>
<label for="imageToSend">Cargar imagen a la galeria</label>
<input type="file" name="imageToSend" id="imageToSend" value="Cargar imagen" />
</form>
<script>
$('#imageToSend').on('change',function(event){
    var dialog = $('#dialog');
    var Data = new FormData();
    Data.append('imageToSend',$('#imageToSend')[0].files);
    $(this).val('');//Clear input file
    $.ajax({
        url: "/upload",
        data: Data,
        processData: false,
        contentType: false,
        type:'POST',
        success: function(data){
            if(data.success){
                //success handler   
            }else if(!data.success){
                //error backend handler
            }
        },
        error: function(data){
            //error handler Ej:404 status
        }
    })
  });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T22:06:40.063

如果您可以控制环境，例如，您正在为您推荐浏览器的 Intranet 编写管理应用程序，那么使用 Firefox 3 及更高版本就可以上传真正的 AJAX 文件。在所有其他情况下，iframe 解决方法或基于 Flash 的上传器是可行的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-02-05T11:53:08.983

这是可能的，但在谷歌浏览器中不起作用）看！

```
...
<form method='post' enctype='multipart/form-data'>
<input type="file" id="imf" name="imf"/>
<input type="button" id="Save"/>
</form>

...

$("#Save").live("click", function(){

var photo = document.getElementById("imf"); 
var file  = photo.files[0];

   $.post('/user/saveNewPhoto', {'imf':file.getAsDataURL(), fname:file.fileName }, function( data ){
   alert ( data );
    });

}); 
```

上传端脚本需要解码base64），仅此而已，但我没有在大文件上测试这个脚本

# database - Pre RTree step：将一组点划分为矩形区域，每个区域包含一个点

> ID：551632
> 
> 赞同：6
> 
> 时间：2009-02-15T21:31:16.593
> 
> 标签：database, algorithm, data-structures, gis, spatial

鉴于我当前的位置（纬度，经度），我想在兴趣点问题中快速找到最近的邻居。因此我打算使用一个 R-Tree 数据库，它允许快速查找。但是，首先必须填充数据库 - 当然。因此，我需要确定覆盖该区域的矩形区域，其中每个区域包含一个兴趣点。

我的问题是如何预处理数据，即如何将区域细分为这些矩形子区域？（我想要矩形区域，因为它们很容易添加到 RTree - 与更一般的 Voronoi 区域相比）。

/约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T22:01:58.843

[Oracle Spatial Cartridge](http://download-uk.oracle.com/docs/cd/A64702_01/doc/cartridg.805/a53264/sdo_intr.htm)文档描述了可以满足您需求的细分算法。简而言之：

*   将您的所有点括在正方形中
*   如果正方形包含 1 个点 - 索引正方形
*   如果正方形不包含点 - 忽略它
*   如果正方形包含多于 1 个点
    *   将正方形分成 4 个相等的正方形，并对每个新正方形重复分析

结果应该是这样的：
[alt text http://download-uk.oracle.com/docs/cd/A64702_01/doc/cartridg.805/a53264/sdo_ina5.gif](http://download-uk.oracle.com/docs/cd/A64702_01/doc/cartridg.805/a53264/sdo_ina5.gif)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T22:10:13.567

**编辑：**下面的方法有效，但忽略了 R-trees 的关键特性——R-tree 节点的分裂行为定义明确，并保持平衡树（通过 B-tree-like 属性）。所以事实上，你所要做的就是：

1.  选择每页的最大矩形数
2.  创建种子矩形（使用彼此相距最远的点、质心等）。
3.  对于每个点，选择一个矩形将其放入
    4.  如果它已经落入一个矩形，把它放在那里
    5.  如果没有，则扩展需要最少扩展的矩形（测量“最少”出口的不同方法——区域有效）
    6.  如果应用多个矩形 - 根据它的填充程度或其他启发式方法选择一个
4.  如果发生溢出 - 使用二次分裂来移动东西......
5.  等等，直接从教科书中使用 R-tree 算法。

我认为下面的方法可以找到你的初始种子矩形；但是您不想以这种方式填充整个 R 树。一直进行拆分和重新平衡可能会有点昂贵，因此您可能希望使用下面的 KD 方法完成大部分工作；只是不是所有的工作。

* * *

KD 方法：将所有内容包围在一个矩形中。

如果矩形中的点数大于阈值，则沿 D 方向扫描，直到覆盖一半的点。

分割成左右（或上下）分割点的矩形。

以下一个方向在新矩形上递归调用相同的过程（如果您从左到右，您现在将从上到下，反之亦然）。

与另一张海报提供的分割成正方形方法相比，它的优势在于它可以更好地适应偏斜的点分布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-16T08:21:32.643

我认为你在问题陈述中遗漏了一些东西。假设您有 N 个点 (x, y)，这样每个点都具有唯一的 x 和 y 坐标。您可以将您的区域划分为 N 个矩形，然后将其划分为 N 个垂直列。但这并不能帮助您轻松解决最近的 POI 问题，不是吗？所以我认为您正在考虑您尚未阐明的矩形结构。

插图：

```
| | | | |5| | |
|1| | | | |6| |
| | |3| | | | |
| | | | | | | |
| |2| | | | | |
| | | | | | |7|
| | | |4| | | | 
```

数字是 POI，垂直线显示细分为 7 个矩形区域。但显然，细分中没有太多“有趣”的信息。您没有提到的细分是否有一些额外的标准？

# ruby-on-rails - 在 Rails 中使用 RSpec 测试扫地机

> ID：551640
> 
> 赞同：2
> 
> 时间：2009-02-15T21:36:51.807
> 
> 标签：ruby-on-rails, caching, rspec, sweeper

我想确保我的清扫器被适当地调用，所以我尝试添加如下内容：

```
it "should clear the cache" do
    @foo = Foo.new(@create_params)
    Foo.should_receive(:new).with(@create_params).and_return(@foo)
    FooSweeper.should_receive(:after_save).with(@foo)
    post :create, @create_params
end 
```

但我只是得到：

```
<FooSweeper (class)> expected :after_save with (...) once, but received it 0 times 
```

我尝试在测试配置中打开缓存，但这没有任何区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-18T14:31:06.217

正如您已经提到的，必须在环境中启用缓存才能使其正常工作。如果它被禁用，那么我下面的示例将失败。在运行时为您的缓存规范临时启用它可能是一个好主意。

'after_save' 是一个实例方法。您为类方法设置了期望，这就是它失败的原因。

以下是我发现设置此期望的最佳方法：

```
it "should clear the cache" do
  @foo = Foo.new(@create_params)
  Foo.should_receive(:new).with(@create_params).and_return(@foo)

  foo_sweeper = mock('FooSweeper')
  foo_sweeper.stub!(:update)
  foo_sweeper.should_receive(:update).with(:after_save, @foo)

  Foo.instance_variable_set(:@observer_peers, [foo_sweeper])      

  post :create, @create_params
end 
```

问题是 Foo 的观察者（sweepers 是观察者的子类）是在 Rails 启动时设置的，所以我们必须使用“instance_variable_set”将我们的sweeper mock 直接插入到模型中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T03:27:57.747

清扫器是单例，并在 rspec 测试开始时被实例化。因此，您可以通过 MySweeperClass.instance() 访问它。这对我有用（Rails 3.2）：

```
require 'spec_helper'
describe WidgetSweeper do
  it 'should work on create' do
    user1 = FactoryGirl.create(:user)

    sweeper = WidgetSweeper.instance
    sweeper.should_receive :after_save
    user1.widgets.create thingie: Faker::Lorem.words.join("")
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T17:26:16.573

假设你有：

*   一个`FooSweeper`班级
*   具有属性的`Foo`类`bar`

`foo_sweeper_spec.rb`：

```
require 'spec_helper'
describe FooSweeper do
  describe "expiring the foo cache" do
    let(:foo) { FactoryGirl.create(:foo) }
    let(:sweeper) { FooSweeper.instance }
    it "is expired when a foo is updated" do
      sweeper.should_receive(:after_update)
      foo.update_attribute(:bar, "Test")
    end
  end
end 
```

# c - 双精度数组上的 SIMD？

> ID：551647
> 
> 赞同：2
> 
> 时间：2009-02-15T21:41:09.377
> 
> 标签：c, floating-point, double, simd

我正在做一些需要 SIMD 的工作，我需要对一个双精度数组进行操作。是否有任何主流架构支持这一点？我只见过浮点运算。

提前致谢， 斯特凡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T21:50:07.203

是的，x86 可以使用 SSE2 指令来完成。一个 CELL 也是，尽管它在进行双精度计算时的性能非常糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T22:24:24.547

ARM VFP 也可以做双打。

新的 NEON SIMD 扩展（顺便说一句。迄今为止我见过的最好的 SIMD 指令集）只能处理 32 位浮点数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T22:47:54.957

[这是](http://msdn.microsoft.com/en-us/library/9b07190d.aspx)VS2008 中 C++ 编译器支持的 SEE2 内部函数。

正如 jalf 所提到的，CELL 处理器对 SIMD 的双精度支持对性能造成了重大影响（我相信 PS3 中未使用的芯片的后续迭代具有很大改进的行为）。

就主流而言，SSE2 于 2001 年出现在 pentium 4 中，因此在 x86 行业中很普遍。根据[Steam 硬件调查](http://store.steampowered.com/hwsurvey/)，95% 的人拥有 SSE2，所以我认为瞄准它是安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T22:29:10.540

以 1.3 或更高计算能力运行的 CUDA 也可以做到这一点。较新的 GTX 2xx 卡可以做到这一点。

# php - 为什么这个使用 CURL 的函数对某些 URL 起作用，而对其他 URL 不起作用？

> ID：551650
> 
> 赞同：4
> 
> 时间：2009-02-15T21:42:24.973
> 
> 标签：php, curl

我正在用 PHP 编写一个网站，该网站聚合来自其他各种网站的数据。我有一个函数“returnPageSource”，它接受一个 URL 并将该 URL 中的 html 作为字符串返回。

```
function returnPageSource($url){
    $ch = curl_init();
    $timeout = 5;   // set to zero for no timeout       

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);     // means the page is returned
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOUT_CONNECTTIMEOUT, $timeout); // how long to wait to connect
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);     // follow redirects
    //curl_setopt($ch, CURLOPT_HEADER, False);          // only request body

    $fileContents = curl_exec($ch); // $fileContents contains the html source of the required website
    curl_close($ch);

    return $fileContents;
} 
```

这适用于我需要的一些网站，例如 [http://atensembl.arabidopsis.info/Arabidopsis_thaliana_TAIR/unisearch?species=Arabidopsis_thaliana_TAIR;idx=;q=At5g02310](http://atensembl.arabidopsis.info/Arabidopsis_thaliana_TAIR/unisearch?species=Arabidopsis_thaliana_TAIR;idx=;q=At5g02310)，但不适用于其他网站，例如[http://www.bar .utoronto.ca/efp/cgi-bin/efpWeb.cgi?dataSource=Chemical&modeInput=Absolute&primaryGene=At5g02310&orthoListOn=0](http://www.bar.utoronto.ca/efp/cgi-bin/efpWeb.cgi?dataSource=Chemical&modeInput=Absolute&primaryGene=At5g02310&orthoListOn=0)。有人知道为什么吗？

**更新**

感谢您的回复。我已将我的用户代理更改为与我的浏览器相同（Firefox 3，可以正常访问网站），将超时更改为 0，但我仍然无法连接，但我会收到一些错误消息。curl_error() 给我错误“无法连接到主机”，并且 curl_getinfo($ch, CURLINFO_HTTP_CODE); 返回 HTTP 代码 0...这两者都不是很有帮助。我也试过 curl_setopt($ch, CURLOPT_VERBOSE, 1);，但什么也没显示。有人有其他想法吗？

**最终更新**

我刚刚意识到我没有解释出了什么问题——我只需要输入我大学的代理设置（我正在使用大学的服务器）。之后一切正常！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-15T22:07:36.317

您应该使用[`curl_error()`](http://www.php.net/curl_error)来检查发生了哪个错误（如果有）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T22:00:04.947

我假设您已尝试将超时设置为 0。

这些站点返回什么 HTTP 状态代码？检查`curl_getinfo($ch, CURLINFO_HTTP_CODE);`。

其他尝试可能是欺骗 User-Agent 标头，可能使用您自己的浏览器的标头，因为您知道可以访问这些页面。他们可能只是试图阻止机器人访问该页面。

调查标头和 http 代码应该可以为您提供更多信息。

**编辑：**

我对此进行了更多研究。一件事是您的连接超时有一个错字 - 应该是`CURLOPT_CONNECTTIMEOUT`.

无论如何，我运行了这个脚本（如下），它返回了你正在寻找的东西（我认为）。检查它和你的有什么不同。如果有帮助，我正在使用 PHP 5.2.8。

```
<?php

$addresses = array(
    'http://atensembl.arabidopsis.info/Arabidopsis_thaliana_TAIR/unisearch?species=Arabidopsis_thaliana_TAIR;idx=;q=At5g02310',
    'http://www.bar.utoronto.ca/efp/cgi-bin/efpWeb.cgi?dataSource=Chemical&modeInput=Absolute&primaryGene=At5g02310&orthoListOn=0'
);

foreach ($addresses as $address) {
    echo "Address: http://www.bar.utoronto.ca/efp/cgi-bin/efpWeb.cgi?dataSource=Chemical&modeInput=Absolute&primaryGene=At5g02310&orthoListOn=0\n";
    // This box doesn't have http registered as a transport layer - pfft
    //var_dump(fsockopen($address, 80));

    $ch = curl_init($address);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);

    $fc = curl_exec($ch);

    echo "Info: " . print_r(curl_getinfo($ch), true) . "\n";

    echo "$fc\n";

    curl_close($ch);
} 
```

它返回以下内容（TL；DR：我的 cURL 可以很好地阅读页面）：

```
C:\Users\Ross>php -e D:\sandbox\curl.php

Address: http://www.bar.utoronto.ca/efp/cgi-bin/efpWeb.cgi?dataSource=Chemical&modeInput=Absolute&primaryGene=At5g02310&orthoListOn=0

Info: Array
(
    [url] => http://atensembl.arabidopsis.info/Arabidopsis_thaliana_TAIR/unisearch?species=Arabidopsis_thaliana_TAIR;idx=;q=At5g02310
    [content_type] => text/html; charset=ISO-8859-1
    [http_code] => 200
    [header_size] => 168
    [request_size] => 151
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 0.654
    [namelookup_time] => 0.004
    [connect_time] => 0.044
    [pretransfer_time] => 0.044
    [size_upload] => 0
    [size_download] => 7531
    [speed_download] => 11515
    [speed_upload] => 0
    [download_content_length] => 0
    [upload_content_length] => 0
    [starttransfer_time] => 0.57
    [redirect_time] => 0
)

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb"  lang="en-gb">
<head>
  <title>AtEnsembl release 49: Arabidopsis thaliana TAIR EnsEMBL UniSearch results</title>
  <style type="text/css" media="all">
    @import url(/css/ensembl.css);
    @import url(/css/content.css);
  </style>
  <style type="text/css" media="print">
    @import url(/css/printer-styles.css);
  </style>
  <style type="text/css" media="screen">
    @import url(/css/screen-styles.css);
  </style>
  <script type="text/javascript" src="/js/protopacked.js"></script>
  <script type="text/javascript" src="/js/core42.js"></script>
  <!-- Snipped for freedom - lots of lines -->
</body>
</html>

Address: http://www.bar.utoronto.ca/efp/cgi-bin/efpWeb.cgi?dataSource=Chemical&modeInput=Absolute&primaryGene=At5g02310&orthoListOn=0

Info: Array
(
    [url] => http://www.bar.utoronto.ca/efp/cgi-bin/efpWeb.cgi?dataSource=Chemical&modeInput=Absolute&primaryGene=At5g02310&orthoListOn=0
    [content_type] => text/html; charset=UTF-8
    [http_code] => 200
    [header_size] => 146
    [request_size] => 155
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 2.695
    [namelookup_time] => 0.004
    [connect_time] => 0.131
    [pretransfer_time] => 0.131
    [size_upload] => 0
    [size_download] => 14156
    [speed_download] => 5252
    [speed_upload] => 0
    [download_content_length] => 0
    [upload_content_length] => 0
    [starttransfer_time] => 2.306
    [redirect_time] => 0
)

<html>
<head>
  <title>Arabidopsis eFP Browser</title>
  <link rel="stylesheet" type="text/css" href="efp.css"/>
  <link rel="stylesheet" type="text/css" href="domcollapse.css"/>
  <script type="text/javascript" src="efp.js"></script>
  <script type="text/javascript" src="domcollapse.js"></script>
</head>
<body>
<!-- SANITY SNIP -->
</body>
</html> 
```

那么这意味着什么？不完全确定。我怀疑他们是否专门阻止了您（因为您可以访问该页面，除非您在网络服务器上运行此脚本）。尝试在上面运行我的代码 - 如果可行，请尝试注释掉部分代码以查看有什么不同（并可能导致停止）。还有你运行的是什么 PHP 版本？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T22:32:21.110

有两件事要考虑。

首先是您将超时设置为低。在这些网站上请求可能需要超过 5 秒的时间。

第二个是，有问题的网站可能故意阻止您的请求。他们制定了规则来阻止来自 curl 的请求，或者他们可能已经注意到来自您的 IP 地址的可疑活动（您的屏幕抓取或其他人​​的网络滥用）并正在阻止/限制请求。

# ruby-on-rails - 无法访问 http://localhost:3000

> ID：551652
> 
> 赞同：2
> 
> 时间：2009-02-15T21:42:57.827
> 
> 标签：ruby-on-rails, networking, localhost

我正在尝试学习 Ruby on Rails，我已按照此[页面](http://www.buildingwebapps.com/articles/6491-setting-up-rails-on-windows-vista)上的说明在我的 PC 上安装 rails。

我也在尝试关注这个[网络广播](http://rubyonrails.org/screencasts)来尝试学习语言和框架。到目前为止一切正常，除了我无法访问

```
http://localhost:3000
http://0.0.0.0:3000
http://127.0.0.1:3000, or
http://<actual IP address>:3000 
```

本地。如果我尝试从我网络上的另一台 PC 上运行，那么效果很好。我在 Chrome、Firefox 和 IE7 中尝试过，但都没有。

有没有其他人有这个问题？

编辑：典型！！它现在开始工作了。我不知道为什么，我在地址栏中输入了完全相同的地址，现在它可以工作了。但只有当我使用`http://127.0.0.1:3000`时，localhost 才起作用。我确实在这台机器上运行 IIS ASP.NET/ASP 网站，它们在 localhost 上运行良好。

编辑 2：如果我尝试 ping localhost 它实际上说

```
Reply from ::1: time<1ms 
```

0.0.0.0 产量...

```
PING: transmit failed, error code 1214 
```

只有 127.0.0.1 似乎有效。我确实打开了 IPv6，所以我禁用了它，明天再试一次，看看重启是否有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-24T00:38:55.803

我对 Vagrant 也有这个问题。秘诀就是跑

```
bin/rails server -b 0.0.0.0 
```

0.0.0.0 的意思是监听所有接口，而不仅仅是本地主机。另一种方法是使用 SOCKS 代理通过 SSH 连接到 vagrant 机器。

```
ssh -C -D 8080 vagrant@localhost 
```

打开您的 Internet Explorer 代理设置并将 SOCKS v5 代理设置为端口 8080。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-07-05T15:47:33.657

为了访问`http://localhost:3000`，您需要在终端窗口中运行本地 Rails 服务器：

```
$ rails server 
```

这[在 Rails 教程的这一部分中进行了](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec%3arails_server)描述。

*注意*：我是相关截屏视频的主持人。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-15T22:10:12.630

你能telnet到端口吗？尝试：

```
telnet localhost 3000 
```

这应该告诉您端口是否在 TCP 级别不可用，或者是否在 HTTP 级别发生了某些事情。

如果禁用 ICMP，Ping 可能不起作用，这可能与您的问题完全无关。

另外，请尝试在您的主机文件中查找任何重定向：

```
c:\Windows\System32\drivers\etc\hosts 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-13T03:47:41.190

一种方法是做简单的

```
 rails s 
```

另一个（更具体地说）是

```
 rails start localhost 0.0.0.0 
```

或者

```
 rails start 0.0.0.0 
```

另一种方法是

```
 rails s 0.0.0.0 
```

所有这些作品

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-03-14T16:36:33.207

我的系统路径（环境变量）没有正确设置，我遇到了一个史诗般的问题。

简单的复制粘贴工作，拔掉了 1 周停滞的 Ruby 安装。

`Control Panel > System > Advanced tab > Environment Variables > System variables > Path... Edit...`

确保它包含这些路径（以及其他路径）......

`%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-26T14:10:13.357

我遇到了同样的问题。你只需要运行

```
$ rails server 
```

从应用程序的文件夹内部，而不是外部......所以，如果你有你的应用程序

*C:\网站\我的应用程序\博客*

blog 是您的应用程序所在的文件夹，必须从此处提示该命令。从 myapp 文件夹启动它不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-15T21:45:29.663

您是否可能使用代理但未将 localhost 列为代理例外？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-15T21:48:48.437

您是否尝试过禁用防火墙？它们有时会引起讨厌的问题。

# c - 使用 Unicode 行分隔符编译 UTF-8 编码源

> ID：551656
> 
> 赞同：1
> 
> 时间：2009-02-15T21:48:45.333
> 
> 标签：c, visual-studio, compiler-construction, utf-8, visual-c++

使用最新版本的 Microsoft 编译器（包含在 Win7 SDK 中），我正在尝试编译使用 UTF-8 和 unicode 行分隔符编码的源文件。

不幸的是，代码无法编译——即使我在文件开头包含了 UTF-8 签名。例如，如果我尝试编译这个：

```
#include <stdio.h>

int main (void)
{
    printf("Hello!");
    return 0;
} 
```

我会看到以下错误：

* * *

提示> cl test.c

Microsoft (R) 32 位 C/C++ 优化编译器版本 15.00.30729.01，适用于 80x86 版权所有 (C) Microsoft Corporation。版权所有。

test.c test.c(1) : 警告 C4067: 预处理指令后出现意外标记 - 需要换行符 Microsoft (R) Incremental Linker Version 9.00.30729.01 版权所有 (C) Microsoft Corporation。版权所有。

/out:test.exe test.obj LINK：致命错误 LNK1561：必须定义入口点

* * *

有没有人遇到过这个问题？有什么解决办法吗？

谢谢！安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T21:58:21.957

当您说“unicode 行分隔符”时，您是指 UTF-16/UCS-2（即 16 位字符）吗？如果是这种情况（文件是不同编码的混合），我会说唯一合理的修复是修复文件。

如果您的意思是行尾是其他一些 Unicode 代码点（仍以 UTF-8 编码），那么您仍然需要修复文件。该标准说明了翻译的第一阶段：

> 如有必要，物理源文件字符以实现定义的方式映射到基本源字符集（为行尾指示符引入换行符）。

显然 MS 不会为“unicode 行分隔符”执行此转换，因此您需要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T22:23:02.583

您指的是[这个字符](http://www.fileformat.info/info/unicode/char/2028/index.htm)，而不是传统的 CR LF 字符。

我猜编译器只期望 CR 和 LF 的某种组合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-15T22:39:16.693

向 Microsoft 提交了 ID 为 414985 的错误报告。嗯。我们会看看它会变成什么样子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T22:06:27.273

对我来说似乎很明显，在 #include 之后需要有一个换行符。

换行符仍然是 unicode，所以添加一个应该没什么大不了的。

# c# - Wpf 托管 Windows 窗体 - 鼠标事件未通过

> ID：551661
> 
> 赞同：3
> 
> 时间：2009-02-15T21:51:05.610
> 
> 标签：c#, wpf, winforms, xaml

我有一个 WPF 应用程序，它有一个 WindowsFormsHost，它托管一个地理基准地图。

我遇到的问题是将鼠标事件传递到地图。我已将 MouseUp 事件处理程序添加到地图中（在代码中），但这不起作用，并且我尝试在包含 WindowsFormsHost 的网格上添加 MouseUp 事件处理程序，但事件也没有被此拾取。

我不确定这是我处理事件的方式的一般 WPF 问题，还是特定于在 WPF 中托管 Windows 窗体应用程序的更具体的问题......

任何指针将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-16T06:13:49.207

据我了解，您需要调用[WindowsFormsHost.EnableWindowsFormsInterop()](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.windowsformshost.enablewindowsformsinterop.aspx)以将事件转发到您的 winforms 代码。

# asp.net - 如何加快 Google Adsense 和分析加载时间？

> ID：551665
> 
> 赞同：3
> 
> 时间：2009-02-15T21:53:16.977
> 
> 标签：asp.net, asp.net-mvc, optimization, performance

这可能属于“你不能”的类别，但我认为至少看看我是否可以对此做些什么可能是谨慎的。

根据 FireBug 的说法，我的页面加载时间的主要瓶颈似乎是加载 html 与加载 Google adsense 和分析之间的差距。请注意，在下面的屏幕截图中，初始 GET 只需要 214 毫秒，而 Adsense + 分析加载加起来大约需要 130 毫秒。但是，由于初始 GET 和 adsense/分析加载之间的大停顿，整个页面加载时间为 1.12 秒。

如果它有任何区别，则该站点正在运行 ASP.NET MVC RC1 堆栈。

[替代文字 http://kevinwilliampang.com/pics/firebug.jpg](http://kevinwilliampang.com/pics/firebug.jpg)

**更新：删除 adsense 和分析后，我仍然看到响应时间很慢。将鼠标悬停在初始 GET 请求上，我看到以下速度：96 毫秒接收数据，736 毫秒 DOMContentLoaded（事件），778 毫秒“加载”（事件）。我猜那性能是我自己的 jQuery javascript 的结果，它的处理与 ($document).ready() 事件相关联？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-15T21:57:20.087

您应该将分析代码放在页面底部，以便首先加载其他所有内容。除此之外，我认为你无能为力。

**编辑**：实际上，我刚刚发现这篇有趣[的博客文章](http://www.askapache.com/webmaster/faster-google-analytics-with-a-local-urchinjs.html)是关于通过托管您自己的 urchin.js 文件来加速分析的方法。也许值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T22:03:31.663

我从未见过在 Stack Overflow 上使用 Firebug，我们也使用 Analytics。

我刚刚运行了一个跟踪，我看到了对

`http://www.google-analytics.com/__utm.gif?...`

直接在**DOMContentLoaded 事件之后发生（蓝线）**。所以我首先怀疑 AdSense。您是否尝试过禁用它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T22:10:14.533

事实上，就在这周，我碰巧对此进行了相当深入的研究。长话短说，*你*完蛋了。正如其他人所说，你能做的最好的事情就是把它放在请求列表的底部，让你的其余代码依赖于 ready 而不是 onload 事件——jQuery在这里真的很好。js 的某些部分是静态的，因此如果您出于维护目的而密切关注它，您可以在本地克隆它。

谷歌代码在这个领域没有那么有用*，但这是他们的球赛，你为改变它所做的任何事情都将既复杂又冒险。理论上，可以在标头中使用非阻塞脚本调用进行包装，但考虑到额外的抽象，不太可能为您带来好处，并且最终使用 adsense，您的有效负载是 html 源，而不是脚本。

** 谷歌可能有充分的理由，但我无法从他们公开的代码中推断出任何东西*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T21:59:01.563

除了将这些包含放在结束正文标记之前，您可能无能为力（如果您还没有的话）。JavaScript 包括块并行 HTTP 请求，这就是为什么它们应该被排除在外的原因`<head>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T22:21:29.013

考虑到您的 ISP 和大多数 ISP 也会有文件的本地缓存，Google 的服务器肯定会是加载速度最快的部分吗？

您也许可以在页面加载时将脚本注入头部，但我不确定这对 urchin.js 有何影响。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-15T23:51:32.310

可能是您的页面只需要这么长时间来解析吗？似乎没有发生与网络相关的事情。它只是等待大约一秒钟，然后才会触发 Adsense/分析请求。我不认为你在页面上有几百个表或什么的？;)

# java - 如何设置默认 Java 安装/运行时 (Windows)？

> ID：551668
> 
> 赞同：52
> 
> 时间：2009-02-15T21:54:51.950
> 
> 标签：java, windows, installation, runtime

我的情况是我已经安装了 JDK，但我无法在浏览器中运行小程序（我可能没有安装 JRE）。

但是，当我安装 JRE 时，它会破坏我的 JDK 作为默认运行时。这几乎破坏了一切（Eclipse、Ant）——因为它们需要服务器 JVM。

这些天没有`JAVA_HOME`环境变量 - 它似乎只是使用了一些注册表魔法（设置系统路径也没有用）。以前，我只是在使用它恢复 JDK 后卸载了 JRE。这次我想正确地修复它。

这也体现在 jre 自动更新程序上——曾几何时，我有一个使用 JDK 和 JRE 的工作设置，但它更新并破坏了一切。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-02-15T22:10:57.527

这在 Windows 上有点痛苦。这就是我所做的。

将最新的 Sun JDK，例如**6u11**安装在类似路径中`c:\install\jdk\sun\6u11`，然后让安装程序将公共 JRE 安装在默认位置 ( `c:\program files\blah`)。这将为大多数事情设置您的默认 JRE。

根据需要安装较旧的 JDK，例如**5u18**，`c:\install\jdk\sun\5u18`但不要安装公共 JRE。

在开发过程中，我有一个小批处理文件，用于为每个 JDK 版本设置命令提示符。基本上只是设置`JAVA_HOME=c:\jdk\sun\JDK_DESIRED`然后设置`PATH=%JAVA_HOME%\bin;%PATH%`。这会将所需的 JDK 放在路径中的首位，并且任何辅助工具（如 Ant 或 Maven）都可以使用该`JAVA_HOME`变量。

该路径很重要，因为大多数公共 JRE 安装都将链接的可执行文件放在`c:\WINDOWS\System32\java.exe`，这通常会*覆盖*大多数其他设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-01-16T02:21:38.290

我已经在属性对话框中修补了我的 eclipse 启动快捷方式的行为

从

```
"E:\Program Files\eclipse\eclipse.exe" 
```

到

```
"E:\Program Files\eclipse\eclipse.exe" -vm "E:\Program Files\Java\jdk1.6.0_30\bin" 
```

如[Eclipse 文档中所述](http://www.google.com.au/url?sa=t&rct=j&q=eclipse%20launcher&source=web&cd=3&ved=0CD4QFjAC&url=http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/misc/launcher_ini.html&ei=tYgTT821O6uTiQe9o4lE&usg=AFQjCNGbNdEYhkI2HTj2PVLG3LIoNkl3Tw&sig2=nk5-P118j3rCEsuU52wf4Q)

它只是一个补丁，因为它取决于修复问题的快捷方式......

另一种方法是在 eclipse 初始化文件中永久设置参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-08T16:25:24.993

我刚刚遇到了这个问题（Java 1.8 与 Windows 7 上的 Java 9），我的发现是：

**简洁版本**

默认似乎是（因为路径条目）

```
c:\ProgramData\Oracle\Java\javapath\java -version 
```

选择您想要的版本（测试，在 cmd 中使用 tab 完成，不确定这些数字代表什么），我有 2 个选项，请参阅更长的版本了解详细信息

```
c:\ProgramData\Oracle\Java\javapath_target_[tab] 
```

删除联结/链接并链接到您的版本（在我的情况下，Java 8 以 181743567 结尾）

```
rmdir javapath
mklink /D javapath javapath_target_181743567 
```

**更长的版本：**

在 Java 9 不起作用后重新安装 Java 1.8。安装顺序是 jdk1.8.0_74、jdk-9.0.4 并尝试使用 jdk1.8.0_162 使 Java 8 默认...

jdk1.8.0_162安装后我还有

```
java -version
java version "9.0.4"
Java(TM) SE Runtime Environment (build 9.0.4+11)
Java HotSpot(TM) 64-Bit Server VM (build 9.0.4+11, mixed mode) 
```

我在路径中看到的是

```
Path=...;C:\ProgramData\Oracle\Java\javapath;... 
```

所以我检查了那是什么，我发现它是一个路口（链接）

```
c:\ProgramData\Oracle\Java>dir
 Volume in drive C is OSDisk
 Volume Serial Number is DA2F-C2CC

 Directory of c:\ProgramData\Oracle\Java

2018-02-07  17:06    <DIR>          .
2018-02-07  17:06    <DIR>          ..
2018-02-08  17:08    <DIR>          .oracle_jre_usage
2017-08-22  11:04    <DIR>          installcache
2018-02-08  17:08    <DIR>          installcache_x64
2018-02-07  17:06    <JUNCTION>     javapath [C:\ProgramData\Oracle\Java\javapath_target_185258831]
2018-02-07  17:06    <DIR>          javapath_target_181743567
2018-02-07  17:06    <DIR>          javapath_target_185258831 
```

那些哈希没有响起，但是当我检查时

```
c:\ProgramData\Oracle\Java\javapath_target_181743567>.\java -version
java version "1.8.0_162"
Java(TM) SE Runtime Environment (build 1.8.0_162-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.162-b12, mixed mode)

c:\ProgramData\Oracle\Java\javapath_target_185258831>.\java -version
java version "9.0.4"
Java(TM) SE Runtime Environment (build 9.0.4+11)
Java HotSpot(TM) 64-Bit Server VM (build 9.0.4+11, mixed mode) 
```

所以要让 Java 8 再次默认，我必须删除[这里描述的链接](https://superuser.com/questions/167076/how-can-i-delete-a-symbolic-link)

```
rmdir javapath 
```

并用我想要的 Java 重新创建

```
mklink /D javapath javapath_target_181743567 
```

测试：

```
c:\ProgramData\Oracle\Java>java -version
java version "1.8.0_162"
Java(TM) SE Runtime Environment (build 1.8.0_162-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.162-b12, mixed mode) 
```

** 更新 (Java 10) **

与 Java 10 类似，只有 javapath 在 c:\Program Files (x86)\Common Files\Oracle\Java\ 这很奇怪，因为我安装了 64 位恕我直言

```
.\java -version
java version "10.0.2" 2018-07-17
Java(TM) SE Runtime Environment 18.3 (build 10.0.2+13)
Java HotSpot(TM) 64-Bit Server VM 18.3 (build 10.0.2+13, mixed mode) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-21T13:35:01.130

经过多次尝试，我发现路口的方法更方便。这与如何在 linux 中解决此问题非常相似。

基本上，它包括在您想要在系统中默认使用的 java 的实际版本和实际版本之间建立一个*链接。*`c:\tools\java\default`

* * *

## 如何设置：

1.  下载[junction](https://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)并确保将其放入 PATH 环境变量中
2.  以这种方式设置您的环境： -**仅**`PATH`指向此 jre -指向 `c:\tools\java\default**`c:\tools\java\default\bin``JAVA_HOME`**
***   将所有 jre-s 存储在一个文件夹中，例如（如果您在 Program FIles 文件夹中这样做，您可能会遇到一些
    *   `C:\tools\Java\JRE_1.6`
    *   `C:\tools\Java\JRE_1.7`
    *   `C:\tools\Java\JRE_1.8`*   打开命令提示符并 cd 到`C:\tools\Java\`*   执行`junction default JRE_1.6`**

 **这将在和之间创建一个[联结](https://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)（或多或少像 linux 中的符号链接）`C:\tools\java\default``C:\tools\java\JRE_1.6`

这样，您将始终在`c:\tools\java\default`.

如果您需要将默认 java 更改为 1.8 版本，您只需执行

```
junction -d default
junction default JRE_1.8 
```

然后你可以在没有命令提示符的情况下使用批处理文件 `set_jdk8.bat` `set_jdk7.bat`

正如@СӏаџԁеМаятіи 所建议的那样

### 编辑：从 Windows Vista 中，您可以使用`mklink /J default JRE_1.8`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-25T17:05:17.530

我只是安装了我需要的所有版本的 JDK，最新安装的成为默认版本，所以如果需要，我只需重新安装我想要默认的版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-15T22:48:15.613

我在他们的 JRE 中安装了几个 JDK（1.4、1.5、1.6）`C:\Java`。然后我让 Sun 在`C:\Program Files\Java`.
最近有一个改进，安装在 jre6 中。以前，每个新版本（1.5.0_4、1.5.0_5 等）都有一个不同的文件夹，这会占用大量空间

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-12T03:28:08.817

运行 .jar 应用程序的另一种方法是为其创建一个 .bat cmd。例如，您的 PC 上安装了 jre10 和 jre8，而 jre10 是您的默认 jre。但是您的 jar 被指定与 jre8 一起使用，以下 cmd 将起作用：

```
"C:\Program Files\Java\jre1.8.0_181\bin\java.exe" -jar JabRef-4.3.1.jar 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-18T14:49:06.893

需要从环境中删除 C:\Program Files (x86)\Common Files\Oracle\Java\javapath 并替换为 JAVA_HOME 这对我来说很好

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-26T09:42:06.713

被这个问题堆积起来，并在*2020 年*的*Windows 10*中解决了这个问题。我正在使用*Java 8 RE*和*14.1 JDK*，它运行良好，直到*Eclipse*升级到版本*2020-09*。之后我无法运行*Eclipse*，因为它需要使用*Java 11*或更高版本，并且只找到了*8*个版本。这是因为“ *Path* ”的环境变量的顺序：

[![环境变量设置](https://i.stack.imgur.com/R5uBI.png)](https://i.stack.imgur.com/R5uBI.png)

我想`C:\Program Files (x86)\Common Files\Oracle\Java\javapath`是链接到已安装的 JRE exe 文件（在我的情况下为*Java 8*）的路径，并且通过在之后下移此链接解决了问题`%JAVA_HOME%`，这导致了*Java 14.1/bin*文件夹。

[![编辑后的EV设置](https://i.stack.imgur.com/4wNXb.png)](https://i.stack.imgur.com/4wNXb.png)

在请求可执行文件时，环境变量的顺序似乎会影响搜索文件夹的顺序。感谢您的评论或更好的解释。

# web-applications - 你知道任何图表管理示例吗？

> ID：551671
> 
> 赞同：1
> 
> 时间：2009-02-15T21:57:38.930
> 
> 标签：web-applications

我一直在设计一个用户界面来定义使用记录集进行数据绑定的动态图表。

我不需要图表应用程序或 API，我需要管理 UI 来控制它们

你知道图表管理应用程序的好例子吗？或开发一个的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-06-03T08:27:14.460

看看这个实时 3D 网络图表： http: [//www.parsec.hu/Chart/](http://www.parsec.hu/Chart/) 它是 Flash，您可以使用丰富的配置设置嵌入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T22:48:51.943

啊......那些“让一切变得简单”的要求之一:)

也许看看谷歌分析？它对它的图表有很多控制......虽然它不是一个开放式图表，无论如何你想要解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T22:55:29.183

我尝试了两种不同的图表系统

[Google Chart API](http://code.google.com/apis/chart/)和[融合图表](http://www.fusioncharts.com/)

Google Charts 动态生成图表的图像，而 fusion 是基于 Flash 的图表。

此外，由于谷歌图表使用 url 作为输入，因此您的数据仅限于 url 的长度。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T22:57:25.607

如果您使用的是 .NET，Telerik 图表控件非常好用且易于绑定数据集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T23:10:18.303

如果您对 Google Chart API 感兴趣但无法访问网络（例如 Intranet 应用程序），您可以查看[Eastwood Charts](http://www.jfree.org/eastwood)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-13T21:22:53.730

弹性图表很好。

谷歌和雅虎也有很棒的图书馆。

# apache - 重定向除白名单之外的所有 IP

> ID：551685
> 
> 赞同：5
> 
> 时间：2009-02-15T22:01:35.770
> 
> 标签：apache, .htaccess

我想保护一些子域不被公众看到。应针对 IP 白名单进行限制。由于重定向导致的无限循环不是问题，因为它不是 www 域。

我试过这个[http://discussions.apple.com/message.jspa?messageID=2411725](http://discussions.apple.com/message.jspa?messageID=2411725)，但无法让它工作。

但是我确实先尝试了这个

```
RewriteEngine on
RewriteCond %{REMOTE_ADDR} !^123\.45\.67\.89$ [OR]
RewriteCond %{REMOTE_ADDR} !^213\.45\.67\.89$
RewriteRule ^/.* http://www.mydomain.com [R] 
```

..但没有工作。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-16T02:11:36.090

这种事情实际上正是 Apache`Allow`和`Deny`指令的目的。在`<VirtualHost>`您要限制访问的域的块内，输入：

```
<Location />
    Order allow,deny
    Allow from all
    Deny from 123.45.67.89
    Deny from 213.45.67.89
</Location> 
```

但是，这会产生 403（禁止）错误，默认情况下不会重定向到您的`www`域。我认为您可以通过添加指令来做到这一点

```
ErrorDocument 403 http://www.example.com 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-15T22:08:50.963

*如果两个条件都为真（因此 IP 地址既不是X*也不是*Y*），您必须将`RewriteCond`指令与 AND 而不是 OR 结合起来，因为您想要重定向。所以试试这个：

 **```
RewriteEngine on
RewriteCond %{REMOTE_ADDR} !^123\.45\.67\.89$
RewriteCond %{REMOTE_ADDR} !^213\.45\.67\.89$
RewriteRule ^ http://www.example.com/ [R] 
```

# javascript - 为 jQuery UI draggable() 设置超时以防止锁定效果

> ID：551698
> 
> 赞同：1
> 
> 时间：2009-02-15T22:06:55.213
> 
> 标签：javascript, jquery, user-interface, timeout, draggable

我正在使用 draggable()，但有时 draggable() 似乎会产生锁定效果，即使在释放鼠标按钮后拖动效果仍然存在。一旦发生这种情况，唯一的解决办法就是刷新页面，这对于基于 ajax 的站点来说是一种糟糕的方式。

因此，使用[UI 文档](http://docs.jquery.com/UI/Draggable#options)，我试图找出一种在拖动开始时设置超时的方法，这样如果拖动未在 x 秒内完成，则将调用 dragstop 事件。

我想这不会很难，但到目前为止我还无法实现它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-15T23:16:07.497

我不想建议这个，但我会花更多的时间试图了解为什么你不能被拖动以正常工作，而不是询问有关在创可贴修复中的黑客行为......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T22:31:04.700

尝试这样的事情：

```
var stopDrag = function() {
    $('.selector').draggable('destroy');
}

$('.selector').draggable({
    start: function(event, ui) { 
        setInterval(stopDrag, 2000); 
    }
}); 
```

# nhibernate - 如何使用 NHibernate 实现 ChangeTime 和 ChangeUser 列？

> ID：551701
> 
> 赞同：14
> 
> 时间：2009-02-15T22:08:46.673
> 
> 标签：nhibernate

我正在尝试将 NHibernate 与现有数据库一起使用。在数据模型中，每个表中都有列，其中包含对行进行的最后一次更新的时间和用户名。我如何使用 NHibernate 做到这一点？

我尝试实现一个拦截器，在实体中设置 ChangeTime 和 ChangeUser，然后使用 IInterceptor.OnSave 方法保存它。这不起作用，因为即使没有修改其他属性，设置这些属性也会触发对行的更新。

如果有任何方法可以告诉 NHibernate 排除 ChangeTime 和 ChangeUser 属性，它可能会起作用，然后它会进行脏检查。但我还没有找到任何方法来实现这一点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-15T23:06:24.570

您应该为预插入和预更新事件注册一个侦听器。您可以通过您的配置来做到这一点，如下所示：

```
<hibernate-configuration>
    ...
    <event type="pre-update">
        <listener class="MyListener, MyAssembly"/>
    </event>
    <event type="pre-insert">
        <listener class="MyListener, MyAssembly"/>
    </event>
</hibernate-configuration> 
```

然后实现一个监听器 - 像这样的东西（可能不完全准确 - 从我的记忆中注销）：

```
public class MyListener : IPreUpdateEventListener, IPreInsertEventListener
{
    public bool OnPreUpdate(PreUpdateEvent evt)
    {
        if (evt.Entity is IHasLastModified)
            UpdateLastModified(evt.State, evt.Persister.PropertyNames);

        return false;
    }

    public bool OnPreInsert(PreInsertEvent evt)
    {
        if (evt.Entity is IHasLastModified)
            UpdateLastModified(evt.State, evt.Persister.PropertyNames);

        return false;
    }

    void UpdateLastModified(object[] state, string[] names)
    {
        var index = Array.FindIndex(names, n => n == "LastModified");

        state[index] = DateTime.Now;
    }
} 
```

并对更新前事件做同样的事情。

编辑：这个负责插入和更新，它似乎工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-30T10:29:39.760

嘿，我只需要在我正在从事的项目中解决这个问题，这是我的答案

```
public interface IDateModified
{
    DateTime Created { get; set; }
    DateTime Modified { get; set; }
}

public class CustomDefaultSaveOrUpdateEventListener 
    : DefaultSaveOrUpdateEventListener
{
    protected override object EntityIsPersistent(SaveOrUpdateEvent evt)
    {
        var entity = evt.Entity as IDateModified;
        if (entity != null)
        {
                entity.Modified = DateTime.Now;
        }

        return base.EntityIsPersistent(evt);
    }

    protected override object EntityIsTransient(SaveOrUpdateEvent evt)
    {
        var entity = evt.Entity as IDateModified;
        if (entity != null)
        {
            entity.Created = entity.Modified = DateTime.Now;
        }

        return base.EntityIsTransient(evt);
    }
} 
```

然后在我的配置中（我使用 Fluent NHibernate 在代码中配置我的单元测试）

```
configuration.EventListeners.SaveOrUpdateEventListeners 
= new ISaveOrUpdateEventListener[]
{
    new CustomDefaultSaveOrUpdateEventListener() 
}; 
```

太棒了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-14T15:30:38.810

Mookid 的回答是正确的，但我想指出，如果使用 S#arp 架构，NHib 配置应设置如下：

```
<hibernate-configuration>
    <session-factory>
    ...
        <event type="pre-update">
            <listener class="MyListener, MyAssembly"/>
        </event>
        <event type="pre-insert">
            <listener class="MyListener, MyAssembly"/>
        </event>
    </session-factory>
</hibernate-configuration> 
```

事件元素进入 session-factory 元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-30T10:36:18.793

除了使用监听器，您还可以使用拦截器： [使用拦截器审核更改](http://fgheysels.blogspot.com/2008/07/nhibernate-iinterceptor.html)

# c# - 从多个数据库表中获取信息的最佳方式

> ID：551708
> 
> 赞同：0
> 
> 时间：2009-02-15T22:10:36.810
> 
> 标签：c#, wpf, sql-server-2008, merge

我有一个医疗数据库，其中保存着不同类型的患者数据：检查、实验室结果、X 射线……每种类型的记录都存在于单独的表中。我需要在一张表上显示这些数据，以显示患者在特定诊所的病史。

我的问题：最好的方法是什么？我是否应该`SELECT`从患者 ID 匹配的每个表中执行一个操作，按日期排序，然后将它们保存在一些人工的类似列表的结构中（按日期排序）？或者有没有更好的方法来做到这一点？

我为此应用程序使用 WPF 和 SQL Server 2008。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-15T22:20:37.987

正如其他人所说，JOIN 是您通常执行此操作的方式。但是，如果患者的一个表中有多行，那么您可能会在某些列中获得跨多行重复的数据，这通常是您不希望的。在这种情况下，有时使用 UNION 或 UNION ALL 会更容易。

假设您有两个表`examinations`和`xrays`，每个表都有一个 PatientID、一个日期和一些额外的详细信息。你可以像这样组合它们：

```
SELECT PatientID, ExamDate [Date], ExamResults [Details]
FROM examinations
WHERE PatientID = @patient

UNION ALL

SELECT PatientID, XrayDate [Date], XrayComments [Details]
FROM xrays
WHERE PatientID = @patient 
```

现在您有了一个包含 PatientID、Date 和 Details 列的大结果集。我发现这对于“合并”具有相似但不相同数据的多个表很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T22:14:51.637

使用[JOIN](http://w3schools.com/sql/sql_join.asp)从多个表中获取数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T22:15:51.180

如果这是您经常要做的事情，我很想在所有患者数据上创建一个非规范化视图（加入适当的表）并[索引视图中的适当列](http://msdn.microsoft.com/en-us/library/dd171921.aspx)。然后使用适当的方法（存储过程等）来检索传入的患者 ID 的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T22:15:56.313

您可以使用连接（不记得确切的类型）从每个表中获取特定患者的所有记录。其工作方式取决于您的数据库设计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T22:28:20.433

我会用单独的 SELECT 语句来做，因为一个简单的 JOIN 可能不会做，因为某些表可能有超过 1 行的病人。

因此，我将在一个简单的 DataSet 中检索多个结果集，添加一个 DalaRelation，缓存对象并逐行查询（按日期、按考试类型、子集......）

要点是您可以方便地使用所有数据，如果需要，甚至可以将其缓存在一个易于查询和过滤的结构中。

# asp.net - asp.net 文本框只记得初始值

> ID：551710
> 
> 赞同：0
> 
> 时间：2009-02-15T22:12:50.347
> 
> 标签：asp.net, textbox

在我的 Page_Load 中，我将文本设置为等于一个值，例如 txtNote.text="note text ex"

如果我将实际表单上的文本更改为其他内容，然后尝试将我的新值写入 db ... textNote.text 仍然是“note text ex”它在 Page_Load 中设置的内容...不是什么我把它改成了表格....这个可以改吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-15T22:19:31.110

像这样将您的任务分配到 IsPostBack 控件中：

```
if (!IsPostBack)
{
    txtNote.Text="note text ex";
} 
```

# database-design - 在数据库中存储论坛主题和回复的最佳方法

> ID：551711
> 
> 赞同：3
> 
> 时间：2009-02-15T22:14:12.620
> 
> 标签：database-design

就模式设计而言，论坛似乎是一个有趣的项目。

我想知道，要获得一个由开放线程和回复组成的记录集，最好的方法是什么？我可以将所有线程（第一个，打开的帖子）存储在一个表中，并有一个带有回复的表。然后我可以使用适当的连接来获取回复表中与线程匹配的所有回复（例如，pk/fk 之间的唯一键匹配）。然后，我可以根据回复数据对该表进行排序，以便从最后一个帖子开始。这是视图还是临时表？为什么？

或者，我可以将所有内容存储在一个表中并使用递归来取回数据。这有点复杂？

最好的方法是什么？或者也许有比这两者更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T22:38:50.847

在数据库中存储分层数据之前已经在 SO 上讨论过几次。 [这是更全面的回应之一](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree/192462#192462)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-15T22:35:34.987

我喜欢带有可为空的 InReplyTo 列的单表方法。

我**不**喜欢两个表的方法，因为帖子和回复共享如此多的结构，拥有两个几乎相同的表是一种耻辱。这导致了第三种可能性……

有一个包含公共元素的“消息”表，以及一个显示各个消息之间关系的“参考”表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T22:26:18.193

我曾经有过这个作为面试问题。

我想我说过这取决于性能、可维护性和其他标准，这是正确的方法，但是我采用了多表方法。
（线程、消息等）

可惜我从来没有得到这份工作。因此，您可能希望采用更复杂的方法。
但是我仍然认为正确的答案是，这取决于。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T22:39:10.267

一种简单的方法是将所有论坛帖子存储在一个表中，如下所示：

```
| id | parent_post | post_content | user | timestamp | 
```

显然简化了一点，因为对于大多数论坛，您还希望存储数据，例如发布它的 IP 地址等。然后要显示一个线程，您需要做的就是

```
SELECT post_content,user [...] FROM posts WHERE 
    parent_post = $id ORDER BY timestamp; 
```

这是伪代码/简化，但你明白了。

**编辑**：我假设你在谈论一个标准论坛，它通常是一个主要帖子，其他帖子都是主要帖子的“孩子”。如果您想将其设计为允许嵌套回复，例如线程化的 usenet/电子邮件对话，那么显然我不会采用这种方法！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T22:40:12.200

Joe Celko 有一本关于如何在 SQL 中表示树结构的书。这是我见过的关于该主题的最权威的指南。谷歌搜索 Joe Celko 和 tree 应该可以找到他关于这个主题的一些在线文章。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-15T22:49:13.020

我同意杰

```
| id | parent_post | post_content | user | timestamp | 
```

但是要获得整个线程，您还需要某种路径或序列列，以逻辑顺序显示帖子。

我们倾向于同时使用两者 - 可以拆分路径以提供层次结构的父级。对给定线程有效的附加序列列可用作简单的 ORDER BY 以按线程顺序检索帖子 - 但它可能需要经常更新，因为回复插入到线程中的其他帖子之间。

出于这个原因，我会将它放在另一个表中 - 与 Posts 表具有 1:1 的关系。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-17T07:28:27.787

存储“父帖子”的问题是您必须在渲染时重复扫描数据集。

鉴于论坛呈现的次数往往多于修改的次数，因此您应该针对读取而不是写入进行优化。

一种绝妙的方法被称为**嵌套集**。这种方法对选择有许多性能改进，包括能够非常轻松地拉回和渲染子树。

*   [理论讨论](http://www.dbazine.com/oracle/or-articles/tropashko4)

*   [实践讨论](http://www.developersdex.com/gurus/articles/112.asp)

我之前[在 Ruby on Rails 中使用过 BetterNestedSet](http://opensource.symetrie.com/trac/better_nested_set/)。这个想法很简单，您可以自己实现它。

# lucene - MultiFieldQueryParser 中的提升因子

> ID：551724
> 
> 赞同：9
> 
> 时间：2009-02-15T22:23:25.500
> 
> 标签：lucene

我可以用不同的因素提升 MultiFieldQueryParser 中的不同字段吗？另外，我可以分配给字段的最大提升因子值是多少？

万分感谢！埃德

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-16T05:59:45.887

`MultiFieldQueryParser`有一个 [constructor][1] 接受一个提升图。您可以将其与以下内容一起使用：

```
String[] fields = new String[] { "title", "keywords", "text" };
HashMap<String,Float> boosts = new HashMap<String,Float>();
boosts.put("title", 10);
boosts.put("keywords", 5);
MultiFieldQueryParser queryParser = new MultiFieldQueryParser(
    fields, 
    new StandardAnalyzer(),
    boosts
); 
```

至于最大提升，我不确定，但无论如何你都不应该考虑绝对提升。只需使用有意义的提升比例即可。另请参阅[此问题](https://stackoverflow.com/questions/342937/maximum-boost-factor)。

[1]：[https](https://lucene.apache.org/core/4_4_0/queryparser/org/apache/lucene/queryparser/classic/MultiFieldQueryParser.html#MultiFieldQueryParser(org.apache.lucene.util.Version) ://lucene.apache.org/core/4_4_0/queryparser/org/apache/lucene/queryparser/classic/MultiFieldQueryParser.html#MultiFieldQueryParser (org.apache.lucene.util.Version, java.lang. String[], org.apache.lucene.analysis.Analyzer, java.util.Map)

# javascript - Django 模板：为 javascript 变量插入值

> ID：551731
> 
> 赞同：5
> 
> 时间：2009-02-15T22:30:46.323
> 
> 标签：javascript, jquery, django, django-templates, flot

我正在尝试在 Django 模板中分配一些 javascript 变量。

我有一个问题，我分配的值被正确写入页面（我可以在页面源代码中看到它们），但仍然显示为`null`.

我正在这样做：

```
<script type="text/javascript">
  var coords = [];
  {% for i in item_list %}
    coords.push([ {{i.x}}, {{i.y}} ]);
  {% endfor %}
</script> 
```

这是生成的页面源：

```
coords.push([ -320.435118373, -149.333637576 ]);
coords.push([ -120.41321373 , -329.312376 ]);
... 
```

它似乎是完全有效的 javascript，但是，使用 Firebug 查看 的值`coords`，这是产生的：

```
[[null, null], [null, null], [null, null]...[null, null]] 
```

所以很明显，每个`push()`调用都正确进行，并且每次都添加一个大小为 2 的新数组。但是，由于某种原因，数字文字都评估为`null`.

有谁知道我怎样才能正确使用这些值？

**更新：**看起来数组中的值很好，直到我将它们传递给 jQuery flot 插件：

```
$.plot($('#mapWrapper'), coords, options); 
```

所以我想这毕竟与我使用 Django 模板的方式没有任何关系。不过，我很好奇问题出在哪里`$.plot`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T23:31:52.793

看起来我错过了一件小事。我正在使用一个数据系列，它是一个数组数组。实际上，jquery flot 插件需要一个系列数组，它们是数组的数组，所以我需要一个三重嵌套数组。

从此改变：

```
$.plot($('#mapWrapper'), coords, options); 
```

对此：

```
$.plot($('#mapWrapper'), [coords], options); 
```

解决了这个问题。

感谢所有看过这个的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T22:48:02.413

我已经在一个测试应用程序中尝试过了，它工作正常（item_list 是一个带有浮点数作为“x”和“y”元素的字典列表）。一定有其他你正在做的事情，你没有在这里展示。

我想知道这是否是一个奇怪的编码问题，也许你在没有意识到的情况下使用了奇怪的 unicode 字符？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T23:12:11.687

plot到底是什么意思？听起来好像它应该以某种方式与坐标一起工作，在这种情况下为点传递数组数组是否正确？

我原以为会采用一组哈希或 Coords 对象，例如：

```
coords.push({ "x":-320.435118373, "y":-149.333637576 });
coords.push({ "y":-120.41321373, "y":-329.312376 }); 
```

只是一个想法。

# php - PHP 没有在 Windows 上加载 php_pgsql.dll

> ID：551734
> 
> 赞同：34
> 
> 时间：2009-02-15T22:31:52.390
> 
> 标签：php, windows, postgresql

PHP 5.2.8 拒绝加载`php_pgsql.dll`，出现以下错误：

> 警告：PHP 启动：无法加载动态库 'D:\PHP\ext\php_pgsql.dll' - 找不到指定的模块。
> 
> 在第 0 行的未知中

.dll 存在于 PHP/ext/ 中。

以前有没有其他人在 Windows 上遇到过 PHP 的这个问题？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2009-10-08T16:48:35.147

查看 PHP PostgreSQL 安装页面上的信息：http: [//us.php.net/manual/en/pgsql.installation.php](http://us.php.net/manual/en/pgsql.installation.php)

> 在配置了 Apache 的 Windows 服务器上，将以下行添加到 httpd.conf 以加载 libpq.dll 可以为您节省大量时间：
> 
> ```
> LoadFile "C:/Program Files/PostgreSQL/8.4/bin/libpq.dll" 
> ```
> 
> 请注意，您必须根据已安装的 PostgreSQL 的安装路径和版本相应地更改您的文件夹。另请注意，不建议将 Apache 和 PostgreSQL 放在生产环境的同一台服务器上。

这立即修复了我的设置。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-05-03T21:27:26.383

PHP 5.4.1 也发生在我身上

到处复制有问题的 DLL 没有用，而且我没有在服务器中安装 PostgreSQL，但我还计划对不同的 Postgres 版本使用 PHP，所以我发现唯一可行的解​​决方案是在 httpd.conf 中放入像这样的行：

```
LoadFile "C:/Program Files/PostgreSQL/8.4/bin/libpq.dll" 
```

并参考与 PHP 捆绑在一起的 libpq.dll，如下所示：

```
LoadFile "C:/php/libpq.dll" 
```

之后它对我来说很好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-02-14T16:13:51.797

对于那些愿意让他们的 PHP 安装只能够访问 PostGres 服务器而不实际安装 PostGres 的人，您需要：

*   在 PHP.INI 中启用 php_pgsql.dll（和 php_pdo_pgsql.dll，如果使用 PDO）扩展，
*   确保 libpq.dll、libiconv-2.dll 和 libintl-8.dll 在路径中。这些是 php_pgsql.dll 依赖项。

这 3 个 DLL 可以在 PostGres 安装中找到。我只是将它们复制到 apache\bin 中，这样我就可以保持一切独立。这样做，apache 可以很好地启动 PHP 引擎，并支持 PostGres。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-16T09:21:27.587

问题在于 php_pgsql.dll 使用的相关库 - 例如 libpq.dll、OpenSLL 等。您需要找到它们（从 Postgres 的 zip 分发中，从已安装的 psqlODBC 驱动程序等中）并将它们放在一个文件夹中这是在PATH中。至于所有 DLL 的列表 - 使用 MS Dependency Walker (depends.exe)。

另一个重要的位 - Apache（如果您使用 Apache）有自己的一组 OpenSSL DLL。替换或重命名这些内容，以免与 Postgres 发行版中的内容发生冲突。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-26T12:54:07.443

您需要将 libpq.dll 从 wamp\bin\php\php5.3.5 复制到 wamp\bin\apache\Apache2.2.17\bin。再次重新启动 Wamp 服务器。至此，我们完成了 php 配置。接下来我们将安装 phpPgAdmin 并使用它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-07-28T19:19:07.933

只是一个想法——确保 Postgres 二进制文件位于 SYSTEM 路径中，而不是您的用户特定路径中。碰巧，这是我机器上的问题。:-)

编辑：

想一想，这就解释了为什么 Dependency Walker 会报告所有 A-OK 但问题仍然存在——您在自己的帐户下运行 DW，而 Apache 以 SYSTEM 身份运行，因此您的个人 PATH 设置不可用.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-20T11:47:28.647

只是为了分享对我有用的东西，而不是处理`libpq.dll`. 我在 php.ini`extension=php_pdo_pgsql.dll`和`extension=php_pgsql.dll`php.ini 中都取消了注释。起初，apache 拒绝启动。

然后，我将`"C:\Program Files (x86)\PostgreSQL\9.4\bin\"`（取决于您的安装）添加到 Windows 环境 PATH 中，成功启动 apache 并运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-10-31T23:04:05.407

特别是对于此处的 WAMP 服务器设置，您需要将 libpg.dll 文件复制到“C:\wamp\bin\apache\Apache2.2.21\bin\”或类似文件中。将它复制到 ..\php\ext\ 并调整 PATH 环境变量是不够的（如果有效的话）。

原始答案来自这里：[http ://www.wampserver.com/phorum/read.php?2,40270,57932](http://www.wampserver.com/phorum/read.php?2,40270,57932)

特别是对于 XAMPP 设置，我发现我只需要将 libpg.dll 文件复制到 ..\php\ext\ 目录中。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-02T07:28:45.977

正如 Ondřej Bouda 所说：设置 Windows 环境变量就足够了。没有 dll 的副本，没有 http-conf 的条目。只需将 php 目录 (C:\xampp\php) 添加到 PATH。如果您使用它，请不要忘记重新启动 XAMPP-Control-Panel，否则它不会知道更改。（并重新启动 Apache。）

> 例如，在 XAMPP 上，将 PHP 目录（即 C:\xampp\php）放入系统 PATH 变量就足够了。——翁德热·布达

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-11T21:35:07.307

这是对@Dayron Armas Peña 答案的更新。php 捆绑的 pgsql 'dll' 位于以下位置：

```
LoadFile "C:/wamp/bin/php/php5.4.12/libpq.dll" 
```

`httpd.conf`除了取消注释文件中所需的行之外，将上述行添加到`php.ini`文件中解决了我的问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-15T22:55:12.210

我唯一一次看到这个错误（文件名和 ext 路径绝对正确）是在我尝试使用不正确版本的 DLL 时，即。我使用了一个针对不同版本的 PHP 编译的版本，而不是我正在运行的版本。

确保您的版本绝对是针对 PHP 5.2.8 编译的版本。

**编辑：**或者，文件的权限设置不正确。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-05T14:12:07.907

Vista 上 php 的 LIBPQ.DLL 问题...

*   检查以确保您确实安装了 postgres。如果您在 windows 上使用 postgres API 安装 php，但未安装 postgres，您可能会收到此警告。只需单击 Windows 安装程序上的所有内容太容易了...

*   注释掉 php.ini 中的相关行。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-04T15:34:27.303

我得到了解决方案：

1) 如果要加载 php_pdo_pgsql 扩展，请同时加载 php_pdo。（在 php.ini 中）

2) php_pgsql.dll 和 php_pdo_pgsql.dll 依赖于 libpq.dll 和 php5ts.dll。libpg.dll 是来自 postgreSQL 的库，但它已被捆绑到 PHP 的二进制包中。将 PHP 配置为与 Apache 一起工作时，它无法正确加载依赖库。所以你需要在 Apache 中加载它。

httpd.conf 中的配置，这两行应该在 LoadModule php5_module 之前

LoadFile "/php5gs.dll 的完整路径" LoadFile "libpg.dll 的完整路径"

希望对您有所帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-12-24T08:10:35.727

您必须将以下行添加到 httpd.conf 文件中：

```
PHPIniDir "c:/PHP/"
Loadfile "C:\php\php5ts.dll"

Loadfile "C:\php\libpq.dll"

LoadModule php5_module "c:/PHP/php5apache2_2.dll" 
```

来源：[http://www.php.net/manual/en/pgsql.setup.php](http://www.php.net/manual/en/pgsql.setup.php)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-07-13T11:29:56.467

我只是这样做了，它在 php.ini 中的 php 文件夹中工作得很好我改变了这一行

```
extension=php_openssl.dll 
```

到

```
extension=C:\php\ext\php_openssl.dll 
```

是`php_openssl.dll`在里面`ext`找不到的文件夹。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-13T06:58:00.593

将文件 libpq.dll 从位置 /bin/php/ 复制到位置 /bin/apache//bin。重新启动 wamp 服务器。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-22T03:47:29.727

我发现这对我有用：

安装 PostgreSQL 后，需要从`libpq.dll`复制`wamp\bin\php\phpX.X.X`到`wamp\bin\apache\Apache2.2*\bin`. 并重新启动 Wampserver。

# regex - 与正则表达式相关的“匹配”的含义

> ID：551735
> 
> 赞同：3
> 
> 时间：2009-02-15T22:32:19.567
> 
> 标签：regex, terminology

我正在写一篇关于正则表达式的学期论文，我对在提到正则表达式时使用“匹配”这个词的方式有点困惑。以下哪项是正确使用的措辞：

*   “正则表达式匹配字符串”

或者

*   “字符串匹配正则表达式”

或者他们都是正确的？欢迎大家对此发表意见！我真的很想把这件事做对，我认为这对我的理解有很大帮助，以澄清这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-15T22:37:51.940

我认为两者都是正确的。这取决于你关注的是什么。如果您的重点是正则表达式本身，以查看它是否适用于给定的字符串或一组字符串，那么您使用第一句话。相反，如果您对查看一组符合特定条件的字符串更感兴趣，则适用第二个。你知道，匹配在某些条件下具有某种等价的含义，所以这两个句子听起来都对我来说是等价的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-15T22:36:32.207

字符串与正则表达式模式匹配，因此我会说后者更准确

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-15T22:43:11.100

当两件事匹配时，（至少从逻辑角度来看）你提到它们的顺序无关紧要。

所以这取决于你想把重点放在什么上面。

字符串匹配正则表达式：焦点在字符串上。

正则表达式匹配字符串：焦点在正则表达式上。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T22:34:33.773

后者对我来说听起来更好。正则表达式指定字符串可能匹配的模式。但两者都没有什么问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-15T22:40:39.657

如果你对我说任何一个，我就会明白你在说什么。我敢肯定，人们都对我说过，我从没想过需要纠正其中任何一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-03T22:08:28.183

由于正则表达式表示一组可能无限的有限字符串，我会说写成“字符串 s 匹配正则表达式 r”是最正确的。您也可以说“字符串 s 是由正则表达式 r 生成的集合的成员”。

此外，您应该考虑使用*接受*和*拒绝*这两个词，特别是如果您打算在论文中讨论有限自动机。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-15T22:41:57.343

我同意字符串匹配（或不匹配）正则表达式。为了弄清楚我为什么要说：正则表达式定义了一个语法，给定的字符串要么根据该语法格式正确，要么不正确。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-15T22:43:10.553

“正则表达式匹配字符串”
如果 RE 匹配整个字符串（例如，使用 ^ $ 或恰好匹配所有内容），则为真。否则，我会写：正则表达式在字符串中有匹配项。

“字符串匹配正则表达式”
同样，如果正则表达式匹配所有内容，则为 true，否则听起来有点奇怪。
但确实，在整个匹配的情况下，这两个句子是等价的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-15T22:43:28.633

由于您要在字符串中查找正则表达式，因此更正确的说法是您找到了正则表达式，因为这是一种单向关系。

但至于哪个匹配哪个，这是一种双向关系，这并不重要（无论如何，用英语 - 我不能保证其他语言），所以任何一个都是正确的。

我的偏好是说字符串与正则表达式匹配，因为 RE 是不变的部分并且字符串会发生变化。但这是个人喜好，不太可能对现实有任何影响:-)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-15T22:46:08.003

“字符串与正则表达式匹配”似乎是“字符串采用正则表达式定义的语言并与正则表达式同构”的简写。

“正则表达式匹配字符串”似乎是“从正则表达式编译的解析器自动机将解析字符串并在最终状态下停止”的简写。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-15T23:53:48.887

我会说：

在**设计时**，用户/开发人员创建一个*匹配字符串的正则表达式*。

在**运行时**，正则表达式引擎会找到*与正则表达式匹配的字符串*。

（不打算作为定义，只是常见用法的示例。）

# database - 使用什么类型的数据库记录 ID：long 还是 guid？

> ID：551766
> 
> 赞同：9
> 
> 时间：2009-02-15T22:54:20.667
> 
> 标签：database, replication, guid, identity

近几年在使用MSSQL数据库，表中所有唯一记录的ID列类型为bigint（long）。它是自动递增的，通常 - 工作正常。

目前我观察到人们更喜欢使用 GUID 来识别记录。

将 bigint 交换为 guid 以获得唯一记录 ID 是否有意义？

我认为这是没有意义的，因为生成 bigint 和排序总是比 guid 快，但是......当使用两个（或更多）分离的应用程序和数据库实例并使它们保持同步时会出现一些麻烦，所以你必须管理 sql 服务器之间的 id 池（例如：sql1 使用从 100 到 200 的 id，sql2 使用从 201 到 300 的 id） - 这是一个薄冰。使用 guid id，您不必关心 id 池。

您对我的镜像应用程序（和数据库）有何建议：继续使用传统 ID 还是转向 GUID？

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-15T23:06:08.050

导游有

好处：

*   能够从数据库离线创建它们而不必担心冲突。
*   你永远不会用完它们

缺点：

*   顺序插入的性能很差（尤其是在聚集索引上）。
    *   [顺序指南](http://msdn.microsoft.com/en-us/library/ms189786.aspx)解决了这个问题
*   每行占用更多空间
*   干净地创造一个并不便宜
    *   但如果客户正在生成它们，这实际上没问题

该列仍应具有唯一约束（作为 PK 或如果它是某些其他关系的一部分，则作为单独约束），因为没有什么可以阻止某人手动提供 GUID 并意外/故意违反唯一性。

如果空间不会打扰您，并且您的表现如果没有受到显着影响，那么它们会使很多问题消失。该决定不可避免地取决于应用程序的个人需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-15T23:03:05.047

我在涉及复制或客户端 ID 生成的任何场景中都使用 GUID。在任何一种情况下，使用 GUID 管理身份都容易得多。

对于像 web 应用程序直接与数据库对话这样的两层场景，或者对于不需要复制的服务器（或者可能只需要在一个方向上复制，pub/sub 样式），那么我认为一个自动递增的 ID 列很好。

至于是继续使用 autoincs 还是转向 GUID……在一个新的应用程序中提倡 GUID 是一回事，您可以在其中预先做出所有这些决定。建议某人迁移现有数据库是另一回事。这可能比它的价值更痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-15T23:03:08.697

发生页面拆分时，GUID 会出现性能和并发性问题。INT 可以以 100% 的速度运行页面填充 - 仅在一端添加，GUIDS 在任何地方添加，因此您可能必须运行较低的填充 - 这会浪费整个索引的空间。

GUIDS可以在应用程序中分配，所以App可以知道它要创建的记录的ID，可以很方便；但是，从技术上讲，可能会生成重复的 GUID（可能性很大，但至少在 GUID 列上放置一个唯一索引）

我同意合并数据库更容易。但对我来说，直接的 INT 更好，然后忍受在实际需要时/如果需要时如何合并 DB 的麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T23:03:18.120

如果您的数据经常移动，那么 GUID 是表键的最佳选择。如果您真的关心性能，请坚持使用 int 或 bigint

如果您想同时利用上述两种方法，请使用 int 或 bigint 作为表的键，并且每行可以有一个 rowguid 列，这样数据也可以轻松移动而不会丢失完整性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-15T23:58:29.267

如果要在查询字符串中显示 id，请使用 Guids，否则使用 long 作为规则。

# sql - T-Sql 中的“Over”子句究竟是做什么的？

> ID：551769
> 
> 赞同：0
> 
> 时间：2009-02-15T22:55:19.480
> 
> 标签：sql, asp.net-mvc, over-clause

我开始弄乱 ASP.NET MVC 并遇到想要做一些基本分页的问题。所以我使用这个简单的 Linq 语句（使用 Northwind 数据库）来获取特定页面的 10 个项目：

```
var q = (from p in db.Orders
                     orderby p.OrderDate descending
                     select p).Skip(currentPage * pageAmount).Take(pageAmount); 
```

它工作得很好，但是当我调试时，我很好奇 Linq to Sql 生成的实际 SQL 是什么。这是输出：

```
SELECT [t1].[OrderID], [t1].[CustomerID], [t1].[EmployeeID], [t1].[OrderDate], [t1].[RequiredDate], [t1].[ShippedDate], [t1].[ShipVia], [t1].[Freight], [t1].[ShipName], [t1].[ShipAddress], [t1].[ShipCity], [t1].[ShipRegion], [t1].[ShipPostalCode], [t1].[ShipCountry]
FROM (
    SELECT ROW_NUMBER() OVER (ORDER BY [t0].[OrderDate] DESC) AS [ROW_NUMBER], [t0].[OrderID], [t0].[CustomerID], [t0].[EmployeeID], [t0].[OrderDate], [t0].[RequiredDate], [t0].[ShippedDate], [t0].[ShipVia], [t0].[Freight], [t0].[ShipName], [t0].[ShipAddress], [t0].[ShipCity], [t0].[ShipRegion], [t0].[ShipPostalCode], [t0].[ShipCountry]
    FROM [dbo].[Orders] AS [t0]
    ) AS [t1]
WHERE [t1].[ROW_NUMBER] BETWEEN @p0 + 1 AND @p0 + @p1
ORDER BY [t1].[ROW_NUMBER] 
```

现在我根本不是 SQL 专家，这就是为什么我从未见过“OVER”子句的原因。我只是从高层次上很好奇它到底做了什么以及什么时候使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-15T23:02:55.280

`ROW_NUMBER() OVER`

> 返回结果集分区内行的序号，每个分区的第一行从 1 开始。

在您的示例中，结果集按降序排序`OrderDate`，然后将`ROW_NUMBER`函数应用于它。返回的结果集只会在哪里`ROW_NUMBER is BETWEEN (@p0 + 1) and (@p0 + @p1)`

正如 DOK 所说，`OVER`从句不是单独使用，而是与聚合和排名窗口函数结合使用。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms189461.aspx) -

> **OVER 子句 (Transact-SQL)**
> 
> 在应用关联的窗口函数之前确定行集的分区和排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T23:01:01.820

它告诉`ROW_NUMBER`函数如何根据括号内的表达式为每一行分配一个数字。但是，这些行实际上并没有根据子查询中的这个数字进行排序。这就是外部查询中的排序的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T23:03:01.833

OVER 不单独使用。它与 RANK、DENSE RANK、NTILE 和 ROW NUMBER 结合使用。在本例中，它与 ROW_NUMBER 一起使用，仅检索当时显示所需的记录，在本例中为该页面的 10 个项目。

# c# - 使用代理类进行自我分析

> ID：551771
> 
> 赞同：0
> 
> 时间：2009-02-15T22:56:16.793
> 
> 标签：c#, performance, profiling

给定一个接口

```
public interface IValueProvider
{
  object GetValue(int index);
} 
```

以及类似于数学表达式树的 IValueProvider 实例的树结构。我想在没有外部分析器的情况下测量运行时每个节点的 GetValue 方法所花费的时间。

GetValue 可以做任何我在设计时不知道的事情：从其他 IValueProvider 收集值、运行 IronPython 表达式甚至是外部插件。我想向用户展示有关节点计时的统计信息。

为此，我可以创建一个包装 IValueProvider 的代理类：

```
public class ValueProviderProfiler : IValueProvider
{
  private IValueProvider valueProvider;

  public object GetValue(int index)
  {
    // ... start measuring
    try
    {
      return this.valuepProvider.GetValue(index);
    }
    finally
    {
      // ... stop measuring
    }
  }
} 
```

什么是衡量节点所花费时间的最佳方法，而不是由外部过程引起的失真，具有良好的准确性并尊重节点并行评估的事实？

仅使用 Stopwatch 类是行不通的，并且查看进程的处理器时间不尊重 cpu 时间可能已在另一个节点上消耗的事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T23:25:31.403

如果您尝试分析性能而不是从给定方法开始，请获取像 Ants profiler 这样的实际配置文件，并查看真正的瓶颈在哪里。很多时候，当您假设您的应用程序为什么没有性能时，您最终会查找和优化所有错误的地方，从而浪费大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-15T23:23:13.280

你没有说你希望每个`GetValue`电话多快完成，所以很难给出任何明确的建议......

对于需要几毫秒的事情（磁盘访问、填写控件、网络传输等），我使用了`DateTime.Ticks.Now`. 它似乎工作得相当好，声称每秒 10,000,000 滴答声的分辨率听起来相当不错。（不过我怀疑它是否真的那么精确；我不知道它支持什么设施。）

我不知道有任何方法可以避免执行其他流程带来的扭曲。我通常只取运行我感兴趣的每个特定部分的平均时间，尽可能多地运行平均（以消除由其他进程和任何计时器不准确引起的变化）。

（在本机代码中，为了分析不需要很长时间执行的事情，我通过`RDTSC`指令使用 CPU 周期计数器。因此，如果您正在计时的东西过早结束，其他计时器无法获得有用的读数，但没有'不要这么快完成调用开销是一个问题，并且您不介意以 CPU 周期而不是任何标准时间单位获取读数，可能值得编写一个小的本机函数来返回 a 中的周期计数器值`UInt64`。我虽然我自己不需要在托管代码中执行此操作...）

# html - IE6 忽略活动链接 CSS 样式

> ID：551778
> 
> 赞同：2
> 
> 时间：2009-02-15T23:01:56.187
> 
> 标签：html, css

CSS 活动链接样式已在 IE7、FF 和 Safari 中正确应用，但在 IE6 中未应用。

```
.side_nav a.active 
{
    color:#FFFFFF;
    background-color:#9F1F63;
} 
```

有趣的是背景颜色（背景颜色：#9F1F63;）在 IE6 中被应用，但不是字体颜色（颜色：#FFFFFF;）

关于为什么会发生这种情况以及如何解决它的任何想法表示赞赏。

下面的导航的完整样式：

```
.side_nav 
{
    text-align : left;
    margin-left: -10px;
}

.side_nav ul 
{
    list-style-type: none;
    list-style-position:inside;
    margin-left:0px;
}
.side_nav li 
{
    margin-top: 10px;
    display: list-item;
    list-style-type:none;   
}
.side_nav a, .side_nav a:visited
{
    text-decoration: none;
    color : #9F1F63;
    font-weight : bold;
    padding: 5px 10px 5px 10px;     
}
.side_nav a:hover 
{
    color:#B26D7F;
}
.side_nav a.active 
{
    color:#FFFFFF;
    background-color:#9F1F63;
} 
```

编辑：谢谢，但建议没有帮助。当我更改为 a:active 时，活动效果在任何浏览器中都不起作用。我认为这可能是由于我在 HTML 中应用样式的方式。

```
 <div class="side_nav">
        <a class="active" href="Page1.aspx">Page1</a><br />
        <a href="Page2.aspx">Page2</a><br />
        <a href="Page3.aspx">Page3</a><br />
    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-15T23:06:58.220

在 IE6 中，指定锚链接的顺序很重要。您应该按此顺序指定它们以达到预期的结果：首先是 a:link，然后是 a:visited、a:hover 和 a:active。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-15T23:17:45.900

您的 CSS 有一个句点应该有一个冒号，在`.side_nav a.active`(应该是`.side_nav a:active`

有了这个修复，它在 IE6 中对我有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-16T11:43:35.187

我尝试复制您的代码，并且格式确实有效。
您的问题是您将链接视为已访问 - 您具有已访问和活动的格式（因此您有紫色背景和紫色文本）。
您应该使用活动类覆盖已访问链接的颜色：

```
.side_nav a.active, .side_nav a.active:visited
{
    color: #FFFFFF;
    background-color: #9F1F63;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T23:06:54.880

尝试添加更具体的选择器，`.side_nav a.active`例如父元素`div .side_nav a.active`在哪里。`div`

颜色可能已被`.side_nav a`规则覆盖。

此外，您可能有错字 - 正在尝试使用 :active 选择器？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T19:21:30.180

尝试使用`!important`. 像这样：

```
.side_nav a.active
{
    color: #FFFFFF !important;
    background-color: #9F1F63;
} 
```

# c# - 速度优化 Windows 窗体应用程序

> ID：551779
> 
> 赞同：4
> 
> 时间：2009-02-15T23:02:18.557
> 
> 标签：c#, .net, winforms, optimization

如何加速优化 Windows 窗体应用程序？

我不是在谈论明显的 .NET 优化技术——比如[NGEN](http://en.wikipedia.org/wiki/Native_Image_Generator) -ing、缓存对象等。我已经尝试过了，我要做的是将表单初始化时间从 1500 毫秒减少到 500 毫秒。

Profiling 已经确定了最慢的代码并且几乎所有的代码都在 中`InitializeComponent`，并且在这个方法中最慢的行是

1.  创建（刚刚新的）WebBrowser 组件
2.  从资源加载图标（可怕的 500 毫秒）
3.  的创建`ContextStripMenu`
4.  几个`this.Controls.Add()`电话也有很大贡献。

目前，我只能看到如何解决第 (2) 点 - 将图标数据从作为嵌入式资源存储到私有字段（例如，[Base64](http://en.wikipedia.org/wiki/Base64)编码的字符串）。

我应该如何处理第 1、3 和 4 点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-15T23:24:22.763

我能想到的唯一可以做的就是重写您想要使用的控件并优化它们以更快地初始化（以及`Form`优化将控件添加到表单的类）。

不过，我看不出这是如何可行的，而且我认为您将被困住，这取决于您对这些控件的依赖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T00:48:43.123

在单独的`InitializeComponentAsync`线程中加载图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-15T23:41:10.353

你可以为你的浏览器控件做延迟加载吗？如果它位于不是主视图的选项卡中，那么您可以在激活该选项卡时加载 webbrowser。

或者您可以加载表单，然后加载网络浏览器（这可能会帮助您先显示某些内容，然后再显示所有内容，就像您在网站中所做的那样）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T05:21:19.090

1.  像我一样上另一门课`ClsAppearance.cs`。

2.  初始化所有控件，例如

    ```
    static Infragistics.Win.Appearance txtBoxMidAppr = null; 
    ```

    我取我自己的名字，`txtBoxMidAppr`而不是`appiarance1`. 由于它可以用于所有文本框，只需初始化一次。

3.  创建一个函数，我们可以在其中初始化外观并在 MDI/Main 窗体加载时调用它一次。

    ```
    public static void LoadAll()
    {
        txtBoxMidAppr = new Infragistics.Win.Appearance();
    } 
    ```

4.  在这里做另一个函数，并从设计窗口中获取外观代码

    ```
    public static Infragistics.Win.Appearance App_txtBoxMidAppr //text_box_small
    {
        get 
        {
            txtBoxMidAppr.ForeColor = System.Drawing.Color.FromArgb(((int)(((byte)(93)))), ((int)(((byte)(93)))), ((int)(((byte)(93)))));
            txtBoxMidAppr.ImageBackground = global::CS_POS.Properties.Resources.text_box_small;
            txtBoxMidAppr.ImageBackgroundStyle = Infragistics.Win.ImageBackgroundStyle.Stretched;
            txtBoxMidAppr.ImageHAlign = Infragistics.Win.HAlign.Right;
            return txtBoxMidAppr;
        }
    } 
    ```

5.  在窗体的设计代码中，注释文本框的所有外观设置，并输入从`ClsAppearance.cs`类中获取外观的函数名

    ```
    //appearance4.ForeColor = System.Drawing.Color.FromArgb(((int)(((byte)(93)))), ((int)(((byte)(93)))), ((int)(((byte)(93)))));
    //appearance4.ImageBackground = global::CS_POS.Properties.Resources.text_box_small;
    //appearance4.ImageBackgroundStyle = Infragistics.Win.ImageBackgroundStyle.Stretched;
    //appearance4.ImageHAlign = Infragistics.Win.HAlign.Right;
    this.uteNABoth.Appearance = CS_POS.App_Appearance.ClsAppearance.App_txtBoxMidAppr; 
    ```

    获取所有控件的外观并在类中创建一个函数并从那里调用它。

所以外观初始化只进行一次，可以使用多次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-17T05:50:25.417

我改变了表单加载的策略，这将对表单加载时间产生很大的改变，现在平均需要 37 毫秒而不是 466 毫秒。

方法：第一次单击顶部选项卡/图标，应用程序加载该选项卡/图标下的所有表单，然后单击表单图标，它只会切换可见性。再次访问顶部选项卡将不会加载该选项卡下的表单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-17T06:01:11.087

我过去使用的一种技术是多线程数据加载，以便它与表单创建同时运行。在这种情况下，数据是从 AD 中加载出来的，它减少了大约 1/3 的加载时间。

# algorithm - 简单的代数问题，对于我正在编写的程序

> ID：551787
> 
> 赞同：3
> 
> 时间：2009-02-15T23:06:49.810
> 
> 标签：algorithm, math

我将如何解决：

> -x^3 - x - 4 = 0

您不能使用二次方，因为它是 3 次方，对吗？

我知道我的结果应该是 ~1.3788，但我不确定我是如何得出的。

我开始：

f(x) = x + (4/(x^2 + 1))。

求解 0，将 x 移到另一边，两边乘以 (x^2 + 1)，我最终得到：

-x(x^2 + 1) = 4,

或者

-x^3 - x - 4 = 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-15T23:17:58.457

使用[牛顿法](http://en.wikipedia.org/wiki/Newton%27s_method)或[定点迭代求方程的根](http://en.wikipedia.org/wiki/Fixed_point_iteration)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-15T23:19:59.967

在代数上，您想使用 Cardano 方法：

[http://www.math.ucdavis.edu/~kkreith/tutorials/sample.lesson/cardano.html](http://www.math.ucdavis.edu/~kkreith/tutorials/sample.lesson/cardano.html)

使用这种方法，它与求解二次方程一样容易。

实际上，这可能更清楚：

[http://en.wikipedia.org/wiki/Cubic_function#Summary](http://en.wikipedia.org/wiki/Cubic_function#Summary)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-15T23:12:02.373

是[三次](http://mathworld.wolfram.com/CubicFormula.html)函数。你是对的，二次公式不适用。

你给了一个根，但通常有三个。

你是如何得出这个单一值的？试错？这是合法的。你不需要“派生”任何东西。

x^3 + a2*x^2 + a1*x + a0 = 0 可以写成 (x-x1)*(x-x2)*(x-x3) = 0，其中 x1、x2 和 x3 是三根。如果您知道您引用的根是正确的，您可以将其除以 (x-x2)*(x-x3) = 0，这是一个可以应用常用技术的二次方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T23:22:51.847

通过使用牛顿迭代找到一个根（见下面的链接）。然后将多项式除以 (x-TheRootYouFound)。结果将是一个二次公式，您可以将其插入您选择的二次根查找器中。

关于牛顿迭代：

[http://en.wikipedia.org/wiki/Newton%27s_method](http://en.wikipedia.org/wiki/Newton%27s_method)

关于多项式除法

[http://en.wikipedia.org/wiki/Polynomial_long_division](http://en.wikipedia.org/wiki/Polynomial_long_division)

这篇文章对你来说可能也很有趣。它涵盖了更强大的方法来解决您的问题，但代价是一些额外的复杂性。

[http://en.wikipedia.org/wiki/Root-finding_algorithm](http://en.wikipedia.org/wiki/Root-finding_algorithm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-15T23:26:51.290

从编程的角度来看，这可能无济于事，但从数学的角度来看......

请注意，在这个特定的三次函数中，您需要考虑虚数，因为当 x = i 时，您的分母为零（在您的原始方程中）。另外，一般来说，当您将变量移到等式的另一边时，您不应该乘以或除以变量（加减也可以），因为您通常会忘记乘以或除以的条件为零。这些答案需要从解决方案集中排除。

x = i 是上述三次中的排除解的示例。在完全操纵方程*之前*，您需要评估排除的解决方案。

# python - 使用 Python 的 timeit 获取“未定义全局名称 'foo'”

> ID：551797
> 
> 赞同：99
> 
> 时间：2009-02-15T23:15:40.383
> 
> 标签：python, scope, timeit

我试图找出执行 Python 语句需要多少时间，所以我在网上查看并发现标准库提供了一个名为[timeit](http://docs.python.org/library/timeit.html)的模块，声称可以做到这一点：

```
import timeit

def foo():
    # ... contains code I want to time ...

def dotime():
    t = timeit.Timer("foo()")
    time = t.timeit(1)
    print "took %fs\n" % (time,)

dotime() 
```

但是，这会产生错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in dotime
  File "/usr/local/lib/python2.6/timeit.py", line 193, in timeit
    timing = self.inner(it, self.timer)
  File "<timeit-src>", line 6, in inner
NameError: global name 'foo' is not defined 
```

我还是 Python 的新手，我并不完全理解它所具有的所有范围问题，但我不知道为什么这个片段不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2009-02-15T23:18:42.247

更改此行：

```
t = timeit.Timer("foo()") 
```

对此：

```
t = timeit.Timer("foo()", "from __main__ import foo") 
```

查看您在最底部提供的链接。

> 要让 timeit 模块访问您定义的函数，您可以传递一个包含导入语句的设置参数：

我刚刚在我的机器上对其进行了测试，并且它适用于这些更改。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-09-05T12:51:41.797

使用 Python 3，您可以使用`globals=globals()`

```
t = timeit.Timer("foo()", globals=globals()) 
```

从[文档](https://docs.python.org/3/library/timeit.html#examples)中：

> 另一种选择是传递`globals()`给`globals`参数，这将导致代码在您当前的全局命名空间内执行。这比单独指定导入更方便

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2011-03-22T11:16:51.940

你可以试试这个技巧：

```
import timeit

def foo():
    print 'bar'

def dotime():
    t = timeit.Timer("foo()")
    time = t.timeit(1)
    print "took %fs\n" % (time,)

import __builtin__
__builtin__.__dict__.update(locals())

dotime() 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-02-15T23:22:16.793

```
t = timeit.Timer("foo()", "from __main__ import foo") 
```

由于 timeit 没有你的东西在范围内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-01T22:45:10.367

添加到您的设置“导入此文件；”

然后当你调用设置函数 myfunc() 使用“thisfile.myfunc()”

例如“thisfile.py”

```
def myfunc():

 return 5

def testable(par):

 pass

t=timeit.timeit(stmt="testable(v)",setup="import thisfile; v=thisfile.myfunc();").repeat(10)

print( t ) 
```

# html - 为什么代码会在代码块中呈现？

> ID：551803
> 
> 赞同：2
> 
> 时间：2009-02-15T23:18:11.483
> 
> 标签：html, tags

我想在网页中显示 HTML。我已经包裹在一个代码块中，但最后两行仍然执行/渲染。我究竟做错了什么？

```
<pre><code>
div {background: brown;}
div.bluebg {background: blue;}
<div>default brown background</div>
<div class="base">blue background</div>
</code></pre> 
```

最后两行包含在 div 标签中。我注意到 stackoverflow 把它们去掉了。我不想剥离它们，但我猜想用`&lt; and &gt;`. 是否有应修改以在网页中呈现它们的标签列表？是否有可以将这些转换为上述语法的在线程序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-16T02:49:48.947

我不认为 [那些标签] 意味着你认为他们的意思。

`<pre>`允许您保留空白和换行符。`<code>`允许您在语义上指示代码正在显示在您的页面上。两者都有一些默认样式（例如应用固定宽度的字体），但都没有对、、 或进行任何转义`<`，因此您在这些标记之间放置的任何未转义的 HTML 代码都将作为 HTML 处理。您必须使用、、和。这是一个页面，您可以在其中粘贴文本并将其转义：[http ://accessify.com/tools-and-wizards/developer-tools/quick-escape/](http://accessify.com/tools-and-wizards/developer-tools/quick-escape/)`>``&``"``&lt;``&gt;``&amp;``&quot;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-15T23:27:55.953

您需要`<`用`&lt;`、`>`和替换`&gt;`，仅此而已。`&``&amp;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T23:22:13.237

从您帖子的内容来看，我假设您正在谈论在 Stack Overflow 上的 Markdown 中显示代码。

不要将代码包装在`<pre>`and中`<code>`，只需将其缩进 4 个空格，如下所示：

```
div {background: brown;}
div.bluebg {background: blue;}
<div>default brown background</div>
<div class="base">blue background</div> 
```

如您所见，Markdown 实际上解析 HTML（至少[这些标签）。](https://stackoverflow.com/questions/31657/what-html-tags-are-allowed-on-stack-overflow)在降价之外，您仍然必须更改`<div>`为`&lt;div&gt;`它才能正确呈现 - 使用 code/pree 不会阻止代码呈现。

# html - 如何使 Form 和 Div 具有最大宽度的子元素

> ID：551814
> 
> 赞同：6
> 
> 时间：2009-02-15T23:24:13.980
> 
> 标签：html, css

我想知道如何使 Form 和 Div 具有最大宽度的子元素。例如，在这个例子中，form 和 outerDiv 都拉伸了页面的整个宽度。我希望 form 和 outerDiv 的宽度为 200px。

当我在 iframe 中有这个页面时，这会成为一个问题，因为页面的宽度大于 iframe 我得到一个水平滚动条。

```
<body>
<form name="myForm" method="post" action="#"  >
    <div id="outerDiv" >
        <div style="width: 200px">
        Both the form and outer div stretch 100%. I am wondering how I
        would get them to wrap tightly around the inner div.
        </div>
    </div>
</form>
</body> 
```

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-16T00:58:24.643

要使块显示像内联元素，您可以使用

```
display: inline-block; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-15T23:43:38.910

我相信“正确”的方法是使它们成为内联元素：

```
style="display: inline;" 
```

div 是块元素并填充其容器，span 是内联元素并缩小以适应其内容。

您可以使用 spans 作为容器，也可以将上述样式添加到您的 div 中。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-18T07:14:54.423

为了防止滚动条，`#outerDiv`您可以设置最大宽度和溢出属性：

```
#outerDiv {
  max-width: 300px;
  overflow: hidden;
} 
```

通过这种方式，您可以确保没有滚动条，并且我假设 iframe 的宽度永远不会超过 300 像素。还要确保`frameborder="0"`在 iframe 上设置并检查包含的 html 正文的边距。

# java - 尝试更改类名时出错

> ID：551838
> 
> 赞同：1
> 
> 时间：2009-02-15T23:33:16.423
> 
> 标签：java, class

```
class HelloObject {
    void speak() {
        System.out.println("Hello (from object)!");
    }
}
class HelloTester {
    public static void main(String[] args) {
        HelloObject object = new HelloObject();
        object.speak();
    }
} 
```

当我将“HelloTester”类名更改为“HelloTester2”之类的名称时，程序突然可以工作了。类文件称为 ClassesBegin.java。

当我尝试更改类的名称时，为什么 java 程序不起作用？

编辑：对不起，我应该澄清更多。我将类名更改为 HelloTestera，这是我得到的错误： 线程“main”中的异常 java.lang.NoClassDefFoundError: HelloTester 但即使文件名与类名无关，它也可以工作。当文件名为 ClassesBegin.java 时，它与 HelloTester 一起使用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-15T23:37:37.787

您需要更改文件名，而不仅仅是类名。

在 Java 中，.java 和 .class 名称必须与类名相同。

因此，每个类都必须使用其名称转到一个单独的文件，以便创建一个单独的 .class 文件。

将两个不同的类放在同一个文件中是一种 C++ 实践，它适用于其编译模型，而不适用于 Java。

编辑：用户最终澄清了导致他的错误的原因，所以显然我在这里的回答是不相关的。以上均适用于公开课。尽管我不得不说我认为这是一种可怕的做法，但您可以将其用于包级课程。如果你的包中有多个类使用的东西，请给它自己的文件。如果它仅由一个类使用，请将其设为内部类...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-16T04:45:27.657

“编辑：对不起，我应该澄清更多。我将类名更改为 HelloTestera，这是我得到的错误：线程“main”中的异常 java.lang.NoClassDefFoundError：HelloTester 但即使文件名无关，它也可以工作具有类名。当文件名为 ClassesBegin.java 时，它与 HelloTester 一起使用"

如果类是公共的，则文件名和类名必须匹配。

如果您将类名更改为“HelloTestera”但运行了“java HelloTester”（这是 java.lang.NoClassDefFoundError: HelloTester 所指示的），那么问题是您将错误的类名传递给了“java”。

但是可以节省大量时间并将类和文件命名为相同的东西，并将其保留在每个文件的一个顶级类中。一种“强制”的简单方法是暂时将所有类公开（每个文件只能有一个公共类）。这将真正使您免于犯一些错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T23:42:55.997

就编译而言，您可以在 ClassesBegin 文件中拥有任意数量的非公共类。但是只有公共（在这种情况下为 ClassesBegin；直到您更改文件名）才能在外部使用。

特别是 main() 方法必须是公共的，并且在公共类中才能被 java 找到。将您的文件重命名为 HelloTester 以使其工作。

或者 - 在您的 IDE 中重命名 HelloTester 类，这可能会自动重命名文件，因为它有一个 main 方法，并且 IDE 知道它需要是公共类......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-15T23:43:43.607

最简单的方法是：

1）每个文件只有一个顶级类 2）类的名称和文件的名称必须匹配（名称和大小写）

这使您更容易找到您的类（类的名称是文件的名称），并且您不会遇到一些奇怪的问题，即编译器无法找到所有要编译的类。

Java 也有一个限制，公共类的名称 100% 必须与文件的名称相同。该限制仅适用于公共类（或接口或枚举）。您可以在文件中拥有任意数量的非公共类型......但不要这样做 - 每个文件坚持一个顶级类/接口/枚举。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-16T00:06:36.983

你写：

> 我将类名更改为 HelloTestera，这是我得到的错误：线程“main”中的异常 java.lang.NoClassDefFoundError: HelloTester

看来您实际上并没有运行重命名的类，而是运行旧的类。您是否使用新更改的类名调用 Java？您在运行类之前是否重新编译了文件？

重命名类后，您应该首先运行：

> javac ClassesBegin.java

接着：

> java HelloTestera

这对我来说产生：

> 你好（来自对象）！

通常，在使用 IDE 时，会为您处理这些问题（在运行前编译）。

# python - 用 Python 实现二十一点

> ID：551840
> 
> 赞同：3
> 
> 时间：2009-02-15T23:34:26.890
> 
> 标签：python

我正在为 python 编写二十一点代码，我希望有人能够告诉我如何制作它：

1.  识别某人输入的内容，即“击中”或“站立”并做出相应的反应。
2.  计算玩家的分数是多少，是否是A和J一起，并自动获胜。

好的，这就是我到目前为止所得到的。

```
"This imports the random object into Python, it allows it to generate random numbers."
import random
print("Hello and welcome to Sam's Black Jack!")
input("Press <ENTER> to begin.")
card1name = 1
card2name = 1
card3name = 1
card4name = 1
card5name = 1

"This defines the values of the character cards."
Ace = 1
Jack = 10
Queen = 10
King = 10

decision = 0

"This generates the cards that are in your hand and the dealer's hand to begin with.
card1 = int(random.randrange(12) + 1)
card2 = int(random.randrange(12) + 1)
card3 = int(random.randrange(12) + 1)
card4 = int(random.randrange(12) + 1)
card5 = int(random.randrange(12) + 1)

total1 = card1 + card2

"This makes the value of the Ace equal 11 if the total of your cards is under 21"
if total1 <= 21:
    Ace = 11

"This defines what the cards are"
if card1 == 11:
    card1 = 10
    card1name = "Jack"
if card1 == 12:
    card1 = 10
    card1name = "Queen"
if card1 == 13:
    card1 = 10
    card1name = "King"
if card1 == 1:
    card1 = Ace
    card1name = "Ace"

elif card1:
    card1name = card1

if card2 == 11:
    card2 = 10
    card2name = "Jack"
if card2 == 12:
    card2 = 10
    card2name = "Queen"
if card2 == 13:
    card2 = 10
    card2name = "King"
if card2 == 1:
    card2 = Ace
    card2name = "Ace"

elif card2:
    card2name = card2

if card3 == 11:
    card3 = 10
    card3name = "Jack"
if card3 == 12:
    card3 = 10
    card3name = "Queen"
if card3 == 13:
    card3 = 10
    card3name= "King"
if card3 == 1:
    card3 = Ace
    card3name = "Ace"

elif card3:
    card3name = card3

if card4 == 11:
    card4 = 10
    card4name = "Jack"
if card4 == 12:
    card4 = 10
    card4name = "Queen"
if card4 == 13:
    card4 = 10
    card4name = "King"
if card4 == 1:
    card4 = Ace
    card4name = "Ace"

elif card4:
    card4name = card4

if card5 == 11:
    card5 = 10
    card5name = "Jack"
if card5 == 12:
    card5 = 10
    card5name = "Queen"
if card5 == 13:
    card5 = 10
    card5name = "King"
if card5 == 1:
    card5 = Ace
    card5name = "Ace"

elif card5:
    card5name = card5
"This creates the totals of your hand"
total2 = card1 + card2
total3 = card1 + card2 + card3

print("You hand is ", card1name," and", card2name)
print("The total of your hand is", total2)
decision = input("Do you want to HIT or STAND?").lower()

"This is the decision for Hit or Stand"
if 'hit' or 'HIT' or 'Hit' in decision:
    decision = 1
    print("You have selected HIT")
    print("Your hand is ", card1name,",",card2name," and", card3name)
    print("The total of your hand is", total3)

if 'STAND' or 'stand' or 'Stand' in decision:
    print("You have selected STAND")

"Dealer's Hand"
dealer = card4 + card5
print()
print("The dealer's hand is", card4name," and", card5name)

if decision == 1 and dealer < total3:
    print("Congratulations, you beat the dealer!")

if decision == 1 and dealer > total3:
    print("Too bad, the dealer beat you!") 
```

* * *

好吧，没关系，我修好了：D

我刚刚将 Hit and Stand 更改为 Yes 或 No

```
if total2 < 21:
    decision = input("Do you want to hit? (Yes or No)")

    "This is the decision for Hit or Stand"
    if  decision == 'Yes':
        print("You have selected HIT")
        print("Your hand is ", card1name,",",card2name," and", card3name)
        print("The total of your hand is", total3)

    if decision == 'No':
            print("You have selected STAND") 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-15T23:42:10.567

这可以让你开始：

[http://docs.python.org/library/random.html](http://docs.python.org/library/random.html)

[http://docs.python.org/library/strings.html](http://docs.python.org/library/strings.html)

[http://docs.python.org/library/stdtypes.html](http://docs.python.org/library/stdtypes.html)

[http://docs.python.org/reference/index.html](http://docs.python.org/reference/index.html)

我看到您添加了一些代码；那挺好的。

想想你的程序中需要存在的部分。您将需要一些“卡片”的表示形式——卡片具有重要的特征，例如它们的价值、花色等。给定一张卡片，您应该能够分辨出它的价值是什么，是 J 还是 A 还是 2的心。阅读 Python 中的“类”以开始使用它。

您还将有一手牌——您的庄家当前持有的牌，以及您的玩家当前持有的牌。“手”是一组卡片，您（程序员）可以向其中添加新卡片（发牌时）。您可能希望使用包含这些数组的“列表”或“数组”或“类”来做到这一点。一手牌也有一个值，通常是牌面值的总和，但如您所知，A 是特殊的（它们可以是 1 或 11），因此您需要使用一些“if 语句”正确处理这种情况。

您还将拥有一个甲板；一副牌是一个特殊的集合——它刚开始时正好有 52 张牌，而且没有一张牌是重复的（当然，你可以使用几副牌来玩，但这是一个你以后可以解决的复杂问题）。你如何填充这样的牌组？您的程序将希望从牌组中“发牌”——因此您需要一种方法来跟踪已发给玩家的牌。

那是很多东西。试着用简单的句子写下你的程序需要做什么的所有逻辑，而不用担心 Python。这称为“伪代码”。这不是一个真正的程序，它只是一个关于你将要做什么的计划——它的用处就像地图的用处一样。如果你要去一个你去过 100 次的地方，你不需要地图，但如果你开车去一个你从未去过的城镇，你要先计划好你的路线，然后再去在方向盘后面。。

用您的伪代码更新您的问题，以及您已经（或将要）将伪代码转换为 Python 的任何尝试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-15T23:42:41.207

我同意 SquareCog 的评论 - 关于您尝试过的内容、无效的内容以及您感到困惑的内容的一些额外信息会很有帮助。

不过，一些可能有用的信息：

关于 1-10、ace、king、queen 和 jack 之间数字的生成：为每张牌分配一个数字索引可能会有所帮助。2-10 很明显，您可以为杰克、皇后、国王和王牌制定自己的值。需要特别注意的一件事是，如果您还生成 ace，则没有 1。分配数字后，[随机模块](http://docs.python.org/library/random.html)可以提供帮助。

有一些标准的比较方法可用于识别“命中”或“站立”之间的区别。尤其是`==` [运营商](http://docs.python.org/library/stdtypes.html#comparisons)。

由于您正在生成手牌，因此应该很容易检查它们是否是某些组合。至于计算分数，一个好的起点是使用加法。

**编辑：**根据您随后的评论，您似乎可能会从一些[“Python for non-programmer”指南](http://wiki.python.org/moin/BeginnersGuide/NonProgrammers)中受益。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-16T04:36:34.090

在您的代码中，您写道：

```
Ace = 1 or 11 
```

恐怕这和你想的不一样。启动 python 解释器，然后输入**`1 or 11`**它。这是我得到的：

```
>>> 1 or 11
1 
```

这意味着当你输入: 时`Ace = 1 or 11`，python 首先评估该`1 or 11`位，然后设置`Ace`为那个。换句话说，您的代码相当于：

```
Ace = 1 
```

我建议您忘记 Ace 的两个可能值；只需将其保留为 1 即可。简化规则，让某些东西发挥作用，然后你就可以考虑制作一个完整的二十一点游戏了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-16T07:44:17.243

这里有一个入门提示：不要画一个 1 到 10 之间的数字并为面卡做一些不同的事情，而是画一个 1 到 13 之间的数字，并定义一个函数（甚至是一个类）将这些数字解释为卡片。例如，1 将映射到 Ace，11 映射到 Jack，2 映射到 deuce，等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T22:36:59.420

检查**所有**输入。作为一个年轻的小伙子，我用 Fortran 编写了我的二十一点程序。我的一位用户指出他可以：

1.  输入负数作为赌注。
2.  故意输。

然后该程序将完全按照它的程序进行操作：

1.  从总赢/输中减去*负赌注。*
2.  这（当然）相当于在总数中添加一个 *正*数。

有时候，输了也能赢……

# windows - 快速创建用于软件测试的全新操作系统安装

> ID：551841
> 
> 赞同：6
> 
> 时间：2009-02-15T23:34:36.157
> 
> 标签：windows, macos, virtualization, imaging, testing

对于快速创建图像以测试软件产品（需要硬件访问 - 完全 USB 端口访问），您有什么建议？虚拟化是否涵盖了这一点？我需要能够快速重新映像系统以再次从头开始测试，并且需要适用于 Windows 和 Mac OS 的良好选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-15T23:54:03.003

只要只有 USB 访问，虚拟化就可以为您工作。

VirtualBox 提供 USB 支持，可用于“私人使用或评估”或商业用途，可在 Win、Mac 和 Linux 上运行。Linux 和 Mac 上的 USB 支持虽然有点零星，但并不适用于所有设备。VBox 支持快照。

VMWare 有一款名为 VMWare Server for Win 和 Linux 的免费产品，但我不确定他们的服务器产品中包含的 USB 支持到什么程度。对于 Mac，有 VMWare Fusion，但不是免费提供的。Fusion 应该适用于大多数 USB 设备。适用于 Windows 的工作站产品更昂贵。我认为所有这些都有一个试用版。都做快照。

我不知道 Parallels (Mac) 对 USB 设备或快照的支持程度。

如果您能够承受重新映像之间的短暂停机时间，则不需要快照功能。您可以关闭虚拟机，然后只复制磁盘映像（除了一个或多个常规文件）并再次启动虚拟机。可以更快地恢复快照（无需重新启动）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-16T00:02:23.373

如果虚拟机适合您，您可以在[Virtual PC](http://www.microsoft.com/downloadS/details.aspx?FamilyID=28c97d22-6eb8-4a09-a7f7-f6c7a1f000b5&displaylang=en)、[VMWare](http://www.vmware.com/)和[VirtualBox](http://www.virtualbox.org/)之间进行选择。

Virtual PC 支持 Win 主机和 Win/linux 来宾。尽管关于 X 分辨率支持有一些注意事项。

VMWare 支持 Win、OS X 和 Linux 主机。它支持 Win 和 Linux 来宾。

VirtualBox 支持与 VMWare 相同的主机和来宾。

三者都没有正式支持 OS X 作为访客。原因是 OS X 仅许可用于 Apple 机器。然而，有一些黑客允许在 VMWare 下安装 OS X。也可以在 VirtualBox 或 Virtual PC 下安装它，虽然我没有看到具体的说明。

如果虚拟化对您来说不够好，您可以使用预先创建的安装映像或磁盘映像程序。

对于 Windows 的预创建安装映像，您可以使用 sysprep 工具（搜索 sysprep 或系统准备工具）。我不知道 Apple 是否有适用于 OS X 的等效工具。

对于磁盘映像程序，我知道很多人都对[Symantec Ghost](http://ghost.com)发誓。我个人没有使用它，所以不能给你太多关于它的信息。Wikipedia上还有一个[磁盘映像程序列表](http://en.wikipedia.org/wiki/List_of_disk_cloning_software)，因此您也可以评估这些程序。

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-15T23:43:36.353

虚拟化是否适合您取决于您​​实际需要多少访问直接访问。

但如果虚拟化有效，那么 vmware 会为 Windows 和 Mac 提供支持快照功能的产品。

或者还有适用于 Linux、Windows 和 Mac 的 VirtualBox，也支持快照并且是免费的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-15T23:50:03.857

我使用 VMWare Player 来处理这类事情。我没有用你讨论的那种访问来测试它（因为我主要做应用程序而不是驱动程序级别的东西）但优点很多，特别是能够在关闭虚拟机时复制虚拟机以便稍后恢复到特定点（有点像穷人的快照）并且能够在不超出硬件预算的情况下进行大量配置。

它当然提供 USB 虚拟化，我会说它是提供完整设备访问的最佳选择。我建议对其进行测试，因为如果它提供了您需要的硬件支持，那么由于给出的其他原因，它是一个非常好的解决方案。我能想到的唯一其他（非虚拟机）建议将与它匹配的是可以随意恢复的硬盘映像备份。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-15T23:46:51.103

我在 Windows 中大量使用[Virtual PC](http://www.microsoft.com/downloadS/details.aspx?FamilyID=28c97d22-6eb8-4a09-a7f7-f6c7a1f000b5&displaylang=en)来处理这类事情，但从未遇到任何问题。它是免费的，这始终是一种奖励；o)

编辑：只需重新阅读问题 - 不确定它是否支持 USB。不过应该勾选所有其他框

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-15T23:51:15.303

[CloneZilla](http://clonezilla.org/)是一种很棒的、免费的重新映像机器的方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-16T10:19:47.040

有一次我在某家公司工作，我们需要为我们的应用程序所依赖的操作系统、SP 和其他一些库的各种版本组合测试我们的软件。对于每个单独识别的组合，我们在 Norton Ghost（DOS 版本）的帮助下创建了一个单独的分区映像。所有图像都放在服务器上。每当测试人员获得系统核心的下一个版本进行测试时，他们都会有条不紊地从所有适用的映像中恢复，安装应用程序，对其进行测试并报告它。

这种方法虽然简单，但可以完全访问硬件，并为您提供 100% 的本地安装。

如今，我仍然将这种方法用于我的私人 PC。我相信您可以尝试 Hyper-V 等最新成就。我们现在在我工作的地方使用它。当我们尝试安装 Team Foundation Server（过程远非简单）时，我们还不得不在某个时候放弃该过程，只从映像中恢复虚拟机，因为我们意识到我们在安装过程中犯了一些错误。从概念上讲，同样的方法可以节省大量时间。我不确定虚拟 PC 在硬件访问方面的兼容性如何。

您可以尝试这两种方法。

PS 今天有两种 Ghost 产品，Symantec Ghost（旧款）供企业使用和 Norton Ghost 供家庭使用（我认为是英国媒体报道软件）。如果您决定尝试此选项，我会推荐 Symantec Ghost（Ghost 解决方案套件的一部分）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-16T09:54:09.770

如果您不能只使用虚拟机并拍摄全新安装的快照，那么请在真实硬件上进行全新安装并使用磁盘映像工具（想到 Ghost）。

如果成本是一个因素，那么有一些 Linux live CD 可以满足您的需求。 [这](http://www.partimage.org/Main_Page)想到了。除非您有快速的网络和网络存储，否则在机器中放入第二个磁盘并从第二个磁盘映像；定期进出网络会很慢。如果您使用的是 Linux live CD，那么您实际上可以将第二个磁盘设置为 EXT3，这样 Windows 就不会检测到它并分配驱动器号。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-16T10:25:36.777

如果您有专用的测试工作站，那么我强烈推荐 Symantec Ghost。只需让工作站进入干净状态，重新启动到 ghost 并为 HD 或分区“拍摄快照”。然后，您可以从 CD 或通过网络连接从另一台 PC 多播的映像中替换 HD 或分区。

我已经使用它多年了，甚至可以自动构建 60 个测试工作站（同时）。

# flash - 在 AIR/AS3 中复制影片剪辑

> ID：551853
> 
> 赞同：3
> 
> 时间：2009-02-15T23:42:30.787
> 
> 标签：flash, actionscript-3, air

有没有人注意到在 AIR 中创建新的 MovieClip 实例（可能还有其他对象）会导致一些奇怪的效果？如果您通过获取对象构造函数并创建一个新的 MovieClip 实例来使用[Senocular 的方法](http://www.senocular.com/flash/actionscript.php?file=ActionScript_3.0/com/senocular/display/duplicateDisplayObject.as)，那么您最终会得到一个具有 0 帧的新 MovieClip。我不想将每一帧的 bitmapData 绘制到一个数组中，有没有人建议制作一个真正的 MovieClip 副本？（即不仅仅是一个强有力的参考）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-16T09:04:02.230

我个人会使用 flash.utils：

```
getQualifiedClassName(value:*):String 
```

和

```
getDefinitionByName(name:String):Object 
```

并使用 Class 对象创建一个实例

我确信 Senocular 使用这种方法可能是有原因的，但可能值得尝试使用这两种方法替换该行，看看它是否解决了您遇到的任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T16:03:33.157

其次，任何涉及 getDefinition/getDefinitionByName/object contructor 技巧的方法在 Adob​​e AIR（3.7，可能还有其他）中都不起作用。

```
var movieClipShallow : MovieClip = loader.getMovieClip(url);
var constructor: Class = (movieClipShallow as Object).constructor;
var anotherInstance: MovieClip = new constructor(); 
```

movieClipShallow 包含不同的宽度/高度/numFrames/等。比另一个实例

我目前没有解决方案:(

# sharepoint-2007 - Sharepoint 2007 - 从 webpart 读取自定义页面字段

> ID：551862
> 
> 赞同：1
> 
> 时间：2009-02-15T23:44:50.233
> 
> 标签：sharepoint-2007, web-parts, field

如何以编程方式从 Web 部件内（从 Web 部件所在的页面）读取自定义页面字段？

谢谢

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-19T22:05:30.673

与非自定义字段类型相同：

```
CustomFieldType customField = (CustomFieldType)page.ListItem["FieldName"]; 
```

只有您转换为自定义字段类型。

# java - 控制对“.internal”包的访问的最佳实践

> ID：551872
> 
> 赞同：10
> 
> 时间：2009-02-15T23:55:40.817
> 
> 标签：java, packages

我编写 Eclipse 插件并将一些类导出为 API，同时希望限制对其他类的访问。

我遵循将这些类分成“.internal”子包的常见 Eclipse 做法。

但是，我不能在这些类上使用“包”或默认级别访问，因为其中许多需要由我正在导出的类使用。

防止或阻止我的 API 用户将这些类用于他们自己的目的的最佳做法是什么？有自动检查器吗？

我承认当我别无选择时，我曾涉足使用 Eclipse 的一些内部类 :)

澄清：我对非插件代码有类似的需求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-16T00:30:56.583

这不仅仅是将 META-INF/MANIFEST.MF 更新为插件 osgi 项目的情况（如果还没有的话？）。它应该看起来像：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: My-plugin
Bundle-SymbolicName: com.mycompany.mypluginname
Bundle-Version: 1.0.0
Bundle-Vendor: MyCompany
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Service-Component: 
Import-Package: org.apache.log4j;version="1.2.14" (, separated etc)
Export-Package: com.mycompany.mypluginname.myapipackage;version="1.0.0" 
```

然后很好地省略 .internal 包。平台应该完成其余的工作。

顺便说一句，然后你使用 Import-Package: 在任何依赖的包、插件等中，而不是依赖于 jar/项目（这是旧的、糟糕的方式，它不起作用 - 正如你所发现的那样）。

这使您可以大量解耦代码依赖项。如果你决定你的插件代码应该属于不同的 jar/bundle，你只需移动单个包，然后让新的 bundle/plug-in 导出它。由于客户端包只是从“云”（云是 OSGi 平台）导入包，因此您可以更自由地移动代码。

**注意**：如评论中所述，您无需在 OSGi 中运行您的应用程序即可获得此“好处”。Eclipse 可以在 OSGi 包限制下编译它的代码，并且您的构建/服务器可以在“不受保护的世界”中运行。例如，OSGi 清单不会对第 3 方（希望使用 .internal）强制执行任何操作，但会向需要它们的人提供“通知”和限制。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2009-02-16T01:44:23.363

除非您必须使用您信任的库来处理其他人的不受信任的代码，否则请不要限制它。

需要内部/包访问有时表明您的 API 设计失败，直到很长一段时间后您才能知道。

将其公开，将其命名为 InternalWhatever，并接受它。

# sql-server - 您推荐的 Windows Server 2003 备份工具是什么？

> ID：551880
> 
> 赞同：-1
> 
> 时间：2009-02-16T00:04:40.560
> 
> 标签：sql-server, windows, backup

你们推荐哪些工具来备份 Windows 2003 上的文件和 SQL Server 数据库？

我正在寻找工具来运行文件和 SQL Server 数据库的每日备份。压缩它们并将它们粘贴在 NAS 驱动器上。

如果可能的话，我正在寻找便宜/免费的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-16T09:34:43.857

在我的公司，我做以下事情。

一天结束时，我使用 SQL Server 作业进行了完整备份。这方面的语法在 BOL 中有很好的记录，但是这里是一个示例：

```
 BACKUP DATABASE [DATABASE]
    TO DISK = '[PATH]\[DATABASE].BAK'
    WITH INIT; 
```

然后我执行一个 .bat 文件，该文件使用免费的 Zip 实用程序运行压缩过程，以使文件在发货前变小。

白天，我有 4 个事务日志备份作业，每 10-12 分钟运行一次。每个备份到一个单独的文件。

然后每小时我运行一次差异备份（这将仅备份自上次备份以来的差异）然后我销毁事务文件并重新开始。

希望能给你一些关于如何在没有任何第三方昂贵工具的情况下在 SQL Server 中完成的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-11-04T07:05:45.720

免费的 sql 备份软件可能不存在。你有没有尝试过 Windows 内置工具？我不太清楚他们能做什么，因为我完全失去了对 MS 的信心。

之前是 NTBackup，然后被 Windows Server Backup 取代。很多人抱怨它有问题，并且总是遇到隐含原因的错误。

所以你最好试试第三方的。现在windows server/ [ms sql 和exchange backup](http://backup-sql-server.com/)发展很快，而且大部分都可以用周围的备份解决方案来负担。尝试做备份，它会帮助你很多。

# objective-c - doxygen 是否支持 Objective-C 中方法参数的内联注释？

> ID：551884
> 
> 赞同：4
> 
> 时间：2009-02-16T00:06:52.520
> 
> 标签：objective-c, comments, inline, doxygen

我曾经在 C++ 中使用 doxygen lot，并且非常喜欢使用`///<`或变体来内联记录函数和方法参数的能力。相反，我真的*不喜欢*在不使用内联样式时必须在注释中重复参数（因为大多数代码文档系统仅支持）。

所以最近我一直在用我的 Objective-C 代码设置 doxygen，并且似乎无法让内联参数记录工作！

使用@param 的离线文档似乎有效——所以我只能得出结论，它不支持内联Objective-C 方法语法。这将是一个真正的耻辱。

有没有人知道有什么不同？我很想让这个工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-24T20:49:21.503

您是否尝试过手册中提到的语法：

```
void foo(int v /**< [in] docs for input parameter v. */); 
```

我对此进行了测试，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-16T11:40:11.823

我记得已经成功地将这种表示法用于类的实例变量，但从未尝试过方法参数。我想这来自于方法参数的 Objective-C 语法。

# iphone - 将 Google Maps API 集成到 iPhone 应用程序中

> ID：551886
> 
> 赞同：14
> 
> 时间：2009-02-16T00:08:49.770
> 
> 标签：iphone, cocoa-touch, google-maps

更新：iPhone SDK 3.0 现在在这里解决了这个问题，但是 NDA 阻止了任何深入的讨论。如果您需要更多信息，请登录 iPhone 开发中心。

好吧，我不得不承认我在这里有点迷路了。

我对 Cocoa 相当满意，但在获取解决此问题所需的一些 JavaScript 时遇到了麻烦。

我正在尝试向 Google 发送反向地理代码的请求。

我查看了我在这里查看的 Google 文档：http: [//code.google.com/apis/maps/documentation/index.html](http://code.google.com/apis/maps/documentation/geocoding/) [http://code.google.com/apis/maps/documentation/geocoding/](http://code.google.com/apis/maps/documentation/index.html)

即使经过粗略阅读，我仍然缺少一个基本概念：

我如何与谷歌交谈？在某些示例中，它们显示了一个正在发送到 google 的 url（这似乎很容易），但在其他示例中，它们显示了 javascript。似乎对于反向地​​理编码，请求可能比发送带有一些参数的 url 更难（但我希望我错了）。

有人可以指出我提出请求的正确方法吗？（在objective-C中，所以我可以绕着它转）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-19T14:49:07.100

更新 - iPhone 0.3 包括 MapKit，它有望比使用 JS API 快得多。简介说它将包括反向地理编码。

您不能直接在 Objective-C 中发出请求，至少不能在 Google API 的条款内。Google API 是用 Javascript 编写的。您可以使用objective-c 到JS 的桥接，就像[Google Maps 组件](http://code.google.com/p/iphone-google-maps-component/)所做的那样，但这并不能真正解决问题——您仍在进行JS 调用！

不幸的是，这意味着您 a) 需要使用 webview b) 需要使用速度较慢的 JS API……与使用完全不同的 OTA 协议的 Google Maps 应用程序相比（尝试数据包嗅探）。

然而，Google Maps 组件是一个有用的教程，介绍了如何对 API 进行简单调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-02-12T02:05:34.683

我创建了[SVGeocoder](https://github.com/samvermette/SVGeocoder) ，这是一个用于 iOS的简单正向**和反向地理编码器类。**它使用 Google Geocoding API，返回 SVPlacemark 对象（`MKPlacemark`具有属性的子类`coordinate`）并使用块。

这是您对地址字符串进行地理编码的方式：

```
[SVGeocoder geocode:addressString
         completion:^(NSArray *placemarks, NSError *error) {
             // do something with placemarks, handle errors
         }]; 
```

您还可以像这样对坐标进行反向地理编码：

```
[SVGeocoder reverseGeocode:CLLocationCoordinate2DMake(45.53264, -73.60518)
                completion:^(NSArray *placemarks, NSError *error) {
                    // do something with placemarks, handle errors
                }]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-20T07:58:06.363

使用 Cocoa 获取 Google 地图的最简单方法是使用“静态地图 API”。在实践中，您需要准备一个用于联系 Google 的 NSURL。您将地图作为 NSData 取回，然后转换为 NSImage。请注意，您可以进行地理编码和反向地理编码。您还可以在地图上嵌入标记。但是，如果您使用他们的 JavaScript API，您将失去可以访问的全部控制权。

在此处查看他们的参考指南：

[http://code.google.com/apis/maps/documentation/staticmaps/](http://code.google.com/apis/maps/documentation/staticmaps/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T07:13:14.860

现在苹果已经发布了 OS 3.0 的 MapKit API，我想你的问题已经得到解答。在查看了 API 文档后，我可以看到巨大的潜力！我仍然希望看到谷歌的反向地理编码网络服务，但雅虎会同时做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-20T08:23:18.487

供您参考：Google 为 XML 请求提供的反向地理编码 API 不公开，因此使用它是非法的。唯一合法的方法是通过他们的 JavaScript-API，正如您发现在 Cocoa 中比简单地发送 HTTP 请求更难做到。

[替代方案： Geonames](http://www.geonames.org/maps/reverse-geocoder.html#findNearestAddress)或[Yahoo](http://developer.yahoo.com/maps/rest/V1/geocode.html)也可以使用简单的 XML/JSON 请求进行反向地理编码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-11-23T09:03:44.993

从 iOS5 开始，我们有以下选项，如开发文档中所述： *“地理编码器对象使用网络服务在纬度和经度值和用户友好的地标之间进行转换，地标是街道、城市等数据的集合，州和国家信息。反向地理编码是将纬度和经度转换为地标的过程。正向地理编码是将地名信息转换为纬度和经度值的过程。反向地理编码在所有版本的 iOS 中都支持，但正向地理编码仅在 iOS 5.0 及更高版本中受支持。"*

您现在可以使用 CLGeocoder 对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-16T09:09:26.743

也试着看看[谷歌地图组件](http://code.google.com/p/iphone-google-maps-component/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-20T10:59:31.827

实际上，我并不是说反向地理编码是“将一个点转换为人类可读的地址”，而是使用谷歌地图可视化一个点（根据准确度，它还可以显示一个人类可读的地址）。这是所需的基本功能。

在实践中，我只是想建议将静态地图 API 作为一种干净且快速的方式来：

1) 给定从 iPhone GPS 传感器获得的坐标，检索显示该点的谷歌地图

2）给定地址，将其转换为相应的地理坐标，然后使用坐标检索显示给定地址的谷歌地图

两者都可以使用涉及静态地图和地理服务的简单 NSURL

[http://maps.google.com/staticmap](http://maps.google.com/staticmap)？ [http://maps.google.com/maps/geo](http://maps.google.com/maps/geo)？

当然传递所需的参数以提供合适的查询字符串。

亲切的问候

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-31T22:20:09.807

当然，最大的问题是 google 和 yahoo 的许可协议都规定您不能在“商业应用程序”中使用这些 API。不愿意在应用商店上发布一个应用，结果却被雅虎或谷歌撤下并起诉。在阅读 iPhone 3.0 地图 api 和相关许可证时，没有提到这一点，但如果您希望应用程序在未升级的手机上运行......

有没有一个不会惹麻烦的答案？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-22T23:42:18.210

[http://blog.cloudmade.com/2009/06/12/how-to-get-forward-geocoding-in-iphone-mapkit/](http://blog.cloudmade.com/2009/06/12/how-to-get-forward-geocoding-in-iphone-mapkit/)

CloudMade 似乎是一个开源地图/位置提供商——上面的博客文章列出了有关如何进行地理编码的详细信息。

# apache-flex - 是否可以使用 imagemagick 作为 Adob e AIR 的库参考？

> ID：551889
> 
> 赞同：0
> 
> 时间：2009-02-16T00:09:51.297
> 
> 标签：apache-flex, air, imagemagick, jpeg

我正在尝试加载高分辨率图像的预览缩略图，并且应用程序需要能够一次加载 100 个高分辨率图像。我知道如何做到这一点的唯一方法是，如果我使用 Loader 类，我必须加载整个文件，然后按比例缩小图像并将数据用作图像预览。

我想做的是使用 imagemagick （或其他一些有效的图像处理库）来压缩图像并将结果（不先将其保存为文件......这将是最佳的）返回到我的 AIR 应用程序，这样我可以用它作为预览。这太棒了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-16T06:02:09.890

迈克钱伯斯的 CommandProxy。查一下（[http://www.mikechambers.com/blog/2008/01/17/commandproxy-net-air-integration-proof-of-concept/](http://www.mikechambers.com/blog/2008/01/17/commandproxy-net-air-integration-proof-of-concept/)）。这个巧妙的技巧让您可以在 AIR 和非 AIR 应用程序之间进行对话。

还有问题吗？让我们知道。

# .net - 混淆的效果如何？

> ID：551892
> 
> 赞同：29
> 
> 时间：2009-02-16T00:11:57.267
> 
> 标签：.net, obfuscation, protection

另一个问题，即[Best .NET obfuscation tools/strategy](https://stackoverflow.com/questions/2525/best-net-obfuscation-tools-strategy)，询问混淆是否易于使用工具实现。

我的问题是，**混淆有效吗？**在回复[这个答案](https://stackoverflow.com/questions/551554/can-you-compile-c-without-using-the-net-framework/551565#551565)的评论中，有人说“*如果你担心源代码被盗......对于真正的破解者来说，混淆几乎是微不足道的*”。

我查看了 Dotfuscator 社区版的输出：它看起来让我感到困惑！我不想保持这种状态！

我知道简单地“破解”混淆软件可能相对容易：因为您只需要找到软件中的任何位置实现您想要破解的任何内容（通常是许可证保护），然后添加一个跳转来跳过它。

如果担心不仅仅是最终用户或“盗版”破解：如果担心是“资源盗窃”，即如果您是软件供应商，而您担心的是另一个供应商（潜在的竞争对手）反向 -设计您的源代码，然后他们可以将其用于或添加到他们自己的产品中……在何种程度上简单的混淆是对这种风险的充分或不充分的保护？

* * *

**第一次编辑：**

有问题的代码大约是 20 KLOC，它在最终用户机器上运行（用户控件，而不是远程服务）。

如果混淆真的“*对真正的破解者来说几乎是微不足道的*”，我想了解它**为什么**无效（而不仅仅是“多少”它无效）。

* * *

**第二次编辑：**

我不担心有人反转算法：更担心他们将算法的实际*实现*（即源代码）重新用于他们自己的产品。

考虑到 20 KLOC 需要几个月的时间来开发，是否需要更多或更少的时间（几个月）才能对所有内容进行去混淆处理？

是否有必要对某些东西进行去混淆以“窃取”它：或者一个理智的竞争对手可能只是将它批发到他们的产品中，同时仍然被混淆，接受它是维护的噩梦，并希望它几乎不需要维护？如果这种情况*是*可能的，那么混淆的 .Net 代码是否比编译的机器代码更容易受到这种攻击？

大多数混淆的“军备竞赛”是否主要旨在防止人们甚至“破解”某些东西（例如查找和删除实现许可保护/执行的代码片段），而不是防止“来源盗窃”？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-02-16T01:26:41.473

我已经讨论了为什么我不认为混淆是防止破解的有效手段：
[Protect .NET Code from reverse engineering](https://stackoverflow.com/questions/506282/protect-net-code-from-reverse-engineering/506301#506301)

但是，您的问题专门针对***源盗窃***，这是一个有趣的话题。在 Eldad Eiliams 的书“[逆向：逆向工程的秘密](https://rads.stackoverflow.com/amzn/click/com/0764574817)”中，作者在前两章讨论了源代码盗窃是逆向工程背后的原因之一。

基本上，归根结底，您成为源盗窃目标的唯一机会是，如果您有一些与您的域相关的非常具体、难以设计的算法，可以让您在竞争中占得先机。这几乎是唯一一次尝试对应用程序的一小部分进行逆向工程具有成本效益。

因此，除非您有一些绝密算法，您不希望您的竞争对手拥有，否则您无需担心来源被盗。从应用程序中撤消大量源代码所涉及的成本很快超过了从头开始重写的成本。

即使您确实有一些您不希望他们拥有的算法，您也无法阻止有决心和熟练的人获得它（如果应用程序正在他们的机器上执行）。

一些常见的防倒车措施有：

*   混淆 - 在保护您的来源或防止其被破解方面没有多大作用。但我们不妨不要让它完全容易，对吧？
*   3rd Party Packers - [Themida](http://www.oreans.com/)是最好的之一。将可执行文件打包到加密的 win32 应用程序中。如果应用程序也是 .NET 应用程序，则防止反射。
*   自定义打包程序 - 如果您有能力编写自己的打包程序，有时会很有效，因为在破解场景中关于如何解压您的应用程序的信息非常少。这可以阻止没有经验的 RE。本[教程](http://www.codebreakers-journal.com/downloads/cbj/2006/CBM_1_2_2006_BigBoote_Own_Packer.pdf)提供了一些关于编写自己的打包程序的好信息。
*   使行业机密算法远离用户机器。将它们作为远程服务执行，因此指令永远不会在本地执行。唯一“万无一失”的保护方法。

但是，打包程序可以被解包，并且混淆并不会真正阻碍那些想要查看您的应用程序正在做什么的人。如果程序在用户机器上运行，那么它很容易受到攻击。

最终，它的代码必须作为机器代码执行，这通常是启动调试器、设置一些断点并监视在相关操作期间正在执行的指令以及花一些时间仔细研究这些数据的问题。

* * *

您提到您花了几个月的时间为您的应用程序编写 ~20kLOC。如果您采取最低限度的预防措施，将那些等效的 20kLOC 从您的应用程序转换为可用源几乎需要一个数量级的时间。

这就是为什么从您的应用程序中反转小型的行业特定算法才具有成本效益。其他任何事情都不值得。

举以下虚构的例子：假设我刚刚为 iTunes 开发了一个全新的竞争应用程序，它有大量的花里胡哨。比方说，它花了几个 100k LOC 和 2 年的时间来开发。我拥有的一个关键功能是一种根据您的音乐聆听品味为您提供音乐的新方式。

Apple（他们是海盗）对此有所了解，并决定他们真的很喜欢您的音乐建议功能，因此他们决定将其撤消。然后，他们将只研究该算法，逆向工程师最终将提出一种可行的算法，该算法在给定相同数据的情况下提供等效的建议。然后他们在自己的应用程序中实现上述算法，称其为“天才”并赚取下一个 10 万亿美元。

这就是*来源盗窃*减少的方式。

没有人会坐在那里并反转所有 100k LOC 来窃取您编译的应用程序的重要部分。这将太昂贵且太耗时。大约 90% 的时间，他们会反转无聊的、非行业机密的代码，这些代码只是处理按钮按下或处理用户输入。相反，他们可以聘请自己的开发人员以更少的钱从头开始重新编写大部分内容，并简单地逆转那些难以设计并为您带来优势的重要算法（即音乐建议功能）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-02-16T00:19:59.340

混淆是一种[通过晦涩难懂的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)形式，虽然它提供了一些保护，但安全性显然非常有限。

出于您描述的目的，模糊性肯定会有所帮助，并且在许多情况下，可以充分防止代码被盗的风险。但是，如果有足够的时间和精力，肯定仍然存在代码“未混淆”的风险。不混淆整个代码库实际上是不可能的，但如果感兴趣的一方只希望确定您是如何完成实现的某些部分的，那么风险会更高。

最后，只有您才能确定风险对您或您的企业是否值得。但是，在许多情况下，如果您希望将产品出售给客户以在他们自己的环境中使用，这是您唯一的选择。

关于“为什么它无效” - 原因是破解者可以使用调试器查看您的代码在哪里运行，无论使用什么混淆技术。然后，他们可以使用它来解决您设置的任何保护机制，例如序列号或“电话回家”系统。

我不相信评论真的是在引用“代码盗窃”，因为您的代码将被盗并用于另一个项目。因为他们使用了“破解者”这个词，我相信他们在谈论软件盗版方面的“盗窃”。Crackers 专门研究保护机制；他们对将您的源代码用于其他目的不感兴趣。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-16T00:38:23.147

大多数人倾向于编写看似模糊的代码，但这并没有阻止破解者，那么有什么区别呢？

编辑：

好吧，严肃的时候。如果你真的想做一些难以破解的东西，请研究多态编码（不要与多态混淆）。编写可以自我变异的代码，破解它是一件非常痛苦的事情，并且会让他们继续猜测。

[http://en.wikipedia.org/wiki/Polymorphic_code](http://en.wikipedia.org/wiki/Polymorphic_code)

最后，逆向工程没有什么是不可能的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-16T02:45:00.317

您担心人们会窃取您产品中使用的特定算法。要么你是[Fair Isaac](https://en.wikipedia.org/wiki/FICO)，要么你需要使用比 x++ 更多的方式来区分自己；。如果您在代码中解决了一些其他人费解几个小时无法解决的问题，您应该拥有计算机科学博士学位和/或专利来保护您的发明。99% 的软件产品*不成功**或*不特别是因为算法。他们之所以成功，是因为他们的作者做了繁重的工作，将众所周知且易于理解的概念整合到一个产品中，该产品可以满足客户的需求，并以比支付其他人重新做同样事情的成本更低的价格出售。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-16T01:37:21.523

这样看；您输入问题的 WMD 编辑器由 SO 团队进行了逆向工程，以修复一些错误并进行一些增强。该代码被混淆了。你永远不会阻止聪明的人破解你的代码，你能希望的最好的就是让诚实的人保持诚实，让它有点难以破解。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-16T03:20:43.367

如果您曾经看过反汇编程序的输出，您就会明白为什么混淆总是会失败。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-16T00:17:58.720

我倾向于认为，如果你想保护你的源代码，混淆确实不是很有效。对于真正的领域专家（我不是指软件专家或破解者，我是指代码功能领域的专家），通常他或她不需要看代码，只需查看它对特殊输入、边缘情况等的反应，以了解如何实现与受保护功能等效的副本或代码。因此，对保护您的专有技术没有多大帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-16T00:18:28.033

如果您的代码中有 IP 必须不惜一切代价加以保护，那么您应该在安全的远程服务器上将您的软件功能作为服务提供。

良好的混淆可以在一定程度上保护您，但这完全取决于破解它所需的努力，而不是拥有代码的“奖励”。如果您要阻止普通业务用户，那么商业混淆器就足够了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-16T00:35:42.280

简短的回答是肯定的和否定的；这完全取决于您要防止什么。[安全编程手册](http://books.google.ca/books?id=dbocXYHcUAUC&dq=secure+programming+cookbook&source=bl&ots=y17Md2Rejj&sig=x1MRgRTzaiAsiTuYCFkgAsOE3iA&hl=en&ei=7bCYSbDdGqH4NKb4zf4L&sa=X&oi=book_result&resnum=3&ct=result#PPA647,M1)第十二节在第 653 页上对此有一些有趣的评论（这在谷歌图书预览中很方便）。它将防篡改分为四类：零日（减缓攻击者的速度，因此他们需要很长时间才能完成他们想要的事情），保护专有算法以防止逆向工程，“因为我可以”攻击，我可以'不记得第四个了。您必须问我要防止什么，如果您真的担心有人会查看您的源代码，那么混淆具有一定的价值。单独使用它通常只会让试图弄乱您的应用程序的人感到烦恼，并且与任何良好的安全措施一样，它在与其他防篡改技术结合使用时效果最佳。

# sql-server - 在 SQL Server 中存储坐标（经度/纬度，来自谷歌地图）的最佳方式是什么？

> ID：551894
> 
> 赞同：105
> 
> 时间：2009-02-16T00:13:15.050
> 
> 标签：sql-server, sql-server-2008, latitude-longitude, spatial

我正在 SQL Server 2008 中设计一个表，该表将存储用户列表和谷歌地图坐标（经度和纬度）。

我需要两个字段，还是可以用 1 个字段完成？

用于存储此类数据的最佳（或最常见）数据类型是什么？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2010-11-14T01:32:36.763

**公平警告！**在接受使用 GEOGRAPHY 类型的建议之前，请确保您不打算使用 Linq 或实体框架来访问数据，因为它不受支持（截至 2010 年 11 月），您会很难过！

> **2017 年 7 月更新**
> 
> 对于那些现在阅读这个答案的人来说，它已经过时了，因为它指的是过时的技术堆栈。有关更多详细信息，请参阅评论。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2009-02-16T00:19:13.240

看看 SQL Server 2008 中引入的新空间数据类型。它们专为此类任务而设计，使索引和查询更加容易和高效。

更多信息：

*   [MS TechNet：SQL Server 2008 空间数据类型](http://blogs.technet.com/andrew/archive/2007/11/26/sql-server-2008-spatial-data-types.aspx)，

*   [MSDN：使用空间数据（数据库引擎）](http://msdn.microsoft.com/en-us/library/bb933876(v=sql.105).aspx)。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-05-20T14:23:11.823

*我不知道 SQL Server 的答案，但是......*

在**MySQL**中另存为**`FLOAT( 10, 6 )`**

这是来自[Google 开发者文档](https://developers.google.com/maps/documentation/javascript/mysql-to-maps#createtable)的官方推荐。

```
CREATE TABLE `coords` (
  `lat` FLOAT( 10, 6 ) NOT NULL ,
  `lng` FLOAT( 10, 6 ) NOT NULL ,
) ENGINE = MYISAM ; 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-09-24T18:05:16.720

我这样做的方式：我存储*纬度*和*经度*，然后我有第三列，它是第一列的自动派生地理类型。该表如下所示：

```
CREATE TABLE [dbo].[Geopoint]
(
    [GeopointId] BIGINT NOT NULL PRIMARY KEY IDENTITY, 
    [Latitude] float NOT NULL, 
    [Longitude] float NOT NULL, 
    [ts] ROWVERSION NOT NULL, 
    [GeographyPoint]  AS ([geography]::STGeomFromText(((('POINT('+CONVERT([varchar](20),[Longitude]))+' ')+CONVERT([varchar](20),[Latitude]))+')',(4326))) 
) 
```

这使您可以灵活地对 geoPoint 列进行空间查询，并且您还可以根据需要检索纬度和经度值以用于显示或提取以用于 csv 目的。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2011-03-04T17:53:00.357

我讨厌与那些说“这是一种新型，让我们使用它”的人相反。新的 SQL Server 2008 空间类型有一些优点 - 即效率，但您不能盲目地说总是使用该类型。这实际上取决于一些更大的问题。

例如，集成。这种类型在 .Net 中有一个等价的类型——但是互操作呢？支持或扩展旧版本的 .Net 怎么样？将这种跨服务层的类型暴露给其他平台怎么样？数据的规范化怎么样 - 也许您对 lat 或 long 作为独立的信息片段感兴趣。也许您已经编写了复杂的业务逻辑来处理 long/lat。

我并不是说你不应该使用空间类型——在很多情况下你应该。我只是说你应该在走这条路之前问一些更关键的问题。为了让我最准确地回答你的问题，我需要更多地了解你的具体情况。

单独存储 long/lat 或以空间类型存储都是可行的解决方案，根据您自己的情况，一种可能比另一种更可取。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2009-11-10T00:49:14.003

您要做的是将纬度和经度存储为新的 SQL2008 空间类型 -> 地理。

这是一张桌子的屏幕截图，我有。

[替代文字 http://img20.imageshack.us/img20/6839/zipcodetable.png](http://img20.imageshack.us/img20/6839/zipcodetable.png)

在此表中，我们有两个存储地理数据的字段。

*   边界：这是作为邮政编码边界的多边形
*   CentrePoint：这是表示该多边形视觉中点的纬度/经度点。

您想将其作为 GEOGRAPHY 类型保存到数据库的主要原因是，您可以利用它的所有 SPATIAL 方法 -> 例如。多边形中的点、两点之间的距离等。

顺便说一句，我们还使用 Google 的 Maps API 来检索经纬度数据并将其存储在我们的 Sql 2008 DB 中——所以这种方法确实有效。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2009-02-16T00:19:21.447

SQL Server 支持空间相关信息。您可以在[http://www.microsoft.com/sqlserver/2008/en/us/spatial-data.aspx](http://www.microsoft.com/sqlserver/2008/en/us/spatial-data.aspx)查看更多信息。

或者，您可以将信息存储为两个基本字段，通常浮点数是大多数设备报告的标准数据类型，并且在一英寸或两英寸内足够准确 - 对于谷歌地图来说已经足够了。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-12-08T21:34:30.857

> **注意**：这是基于最近的 SQL 服务器、.NET 堆栈更新的最新答案

谷歌地图中的纬度和经度应在地理数据类型下存储为 SQL 服务器中的点（注意大写 P）数据。

假设您当前的数据`Sample`以 varchar的形式存储在表`lat`中`lon`，下面的查询将帮助您转换为地理

```
alter table Sample add latlong geography
go
update Sample set latlong= geography::Point(lat,lon,4326)
go 
```

**PS：**下次当您使用地理数据在此表上进行选择时，除了“结果”和“消息”选项卡外，您还将获得如下所示的“空间结果”选项卡以进行可视化

[![SSMS 地理结果选项卡](https://i.stack.imgur.com/lsYVn.png)](https://i.stack.imgur.com/lsYVn.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-11T20:46:39.763

如果您使用的是 Entity Framework 5 < 您可以使用`DbGeography`. 来自 MSDN 的示例：

```
public class University  
{ 
    public int UniversityID { get; set; } 
    public string Name { get; set; } 
    public DbGeography Location { get; set; } 
}

public partial class UniversityContext : DbContext 
{ 
    public DbSet<University> Universities { get; set; } 
}

using (var context = new UniversityContext ()) 
{ 
    context.Universities.Add(new University() 
        { 
            Name = "Graphic Design Institute", 
            Location = DbGeography.FromText("POINT(-122.336106 47.605049)"), 
        }); 

    context. Universities.Add(new University() 
        { 
            Name = "School of Fine Art", 
            Location = DbGeography.FromText("POINT(-122.335197 47.646711)"), 
        }); 

    context.SaveChanges(); 

    var myLocation = DbGeography.FromText("POINT(-122.296623 47.640405)"); 

    var university = (from u in context.Universities 
                        orderby u.Location.Distance(myLocation) 
                        select u).FirstOrDefault(); 

    Console.WriteLine( 
        "The closest University to you is: {0}.", 
        university.Name); 
} 
```

[https://msdn.microsoft.com/en-us/library/hh859721(v=vs.113).aspx](https://msdn.microsoft.com/en-us/library/hh859721(v=vs.113).aspx)

然后我开始使用`DbGeography`的东西是`coordinateSystemId`. 有关以下代码的出色解释和来源，请参见下面的答案。

```
public class GeoHelper
{
    public const int SridGoogleMaps = 4326;
    public const int SridCustomMap = 3857;

    public static DbGeography FromLatLng(double lat, double lng)
    {
        return DbGeography.PointFromText(
            "POINT("
            + lng.ToString() + " "
            + lat.ToString() + ")",
            SridGoogleMaps);
    }
} 
```

[https://stackoverflow.com/a/25563269/3850405](https://stackoverflow.com/a/25563269/3850405)

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2009-02-16T16:15:03.613

如果您只是要将它替换为一个 URL，我想一个字段会这样做 - 所以您可以形成一个类似的 URL

```
http://maps.google.co.uk/maps?q=12.345678,12.345678&z=6 
```

但由于它是两条数据，我会将它们存储在单独的字段中

* * *

## 回答 #11

> 赞同：-10
> 
> 时间：2009-02-16T16:19:50.623

将两者都存储为浮点数，并在它们上使用唯一的关键字.i.em

```
create table coordinates(
coord_uid counter primary key,
latitude float,
longitude float,
constraint la_long unique(latitude, longitude)
); 
```

# ruby - 使用哪种群消息技术？

> ID：551900
> 
> 赞同：6
> 
> 时间：2009-02-16T00:18:15.787
> 
> 标签：ruby, xmpp, amqp, haxe, stomp

我感到有点困惑——大约 24 小时以来，我一直在考虑在我的项目中使用哪种组广播技术。

基本上，我需要的是：

*   创建组（通过一些后端进程）
*   任何客户端广播消息（1：N，N：N）
*   （可能）直接消息（1:1）
*   （重要）使用我自己的后端对客户端进行身份验证/授权（例如，通过某种 HTTP API）
*   能够通过后端进程（或服务器插件）踢特定客户端

这是我将拥有的：

1.  Ruby 或 Haxe 中的后端相关进程
2.  JS+Haxe(Flash9) 中的前端——在浏览器中，*理想情况下*通过 80/443 进行通信，但不一定。

因此，这项技术必须在 Haxe for Flash 中易于访问，最好是 Ruby。

我一直在考虑：RabbitMQ（或OpenAMQ）、RabbitMQ+STOMP、ejabberd、ejabberd+BOSH、juggernaut（需要为它写一个Haxe lib）。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-16T07:38:21.437

尤里，

RabbitMQ、Haxe 和 as3：[http ://geekrelief.wordpress.com/2008/12/15/hxamqp-amqp-with-haxe/](http://geekrelief.wordpress.com/2008/12/15/hxamqp-amqp-with-haxe/)

RabbitMQ、Ruby 和 ACL： http: [//pastie.org/pastes/368315](http://pastie.org/pastes/368315)

您可能还想看看将 Nanite 与 RabbitMQ 一起使用来管理后端组：[http ://brainspl.at/articles/2008/10/11/merbcamp-keynote-and-introducing-nanite](http://brainspl.at/articles/2008/10/11/merbcamp-keynote-and-introducing-nanite)

你说你需要：

```
* broadcast messages by any client (1:N, N:N)
* (potentially) direct messages (1:1) 
```

您可以使用 RabbitMQ 轻松完成这两项工作。RabbitMQ 支持两种情况，1:N pubsub 和 1:1 消息传递，以及“直接”交换。

直接交换模式如下：

任何发布者（组成员）使用“路由密钥”（例如“yurii”）向代理发送消息。RabbitMQ 将此键与路由表（也称为“交换”）中的订阅绑定相匹配。每个绑定代表一个队列的订阅，表示对具有给定路由键的消息的兴趣。当路由键和绑定键匹配时，消息会被路由到队列以供客户端（组成员）后续使用。这适用于 1:N 和 1:1 的情况；N:N 建立在 1:N 上。

路由模型介绍：http: [//blogs.digitar.com/jjww/2009/01/rabbits-and-warrens/](http://blogs.digitar.com/jjww/2009/01/rabbits-and-warrens/)

一般介绍：http: [//google-ukdev.blogspot.com/2008/09/rabbitmq-tech-talk-at-google-london.html](http://google-ukdev.blogspot.com/2008/09/rabbitmq-tech-talk-at-google-london.html)

您还需要：

```
* (important) authenticate/authorize clients with my own backend (say, through some kind of HTTP API) 
```

请参阅此 ACL 代码（上面的链接）。RabbitMQ 还有一个 HTTP 接口，但我们还没有将 HTTP 前端与 ACL 代码结合起来。不过，这不应该阻止oyu。请来到最近讨论这个话题的rabbitmq-discuss列表。

您还需要：

```
* create groups (by some backend process)
* to be able to kick specific clients by backend process (or server plugin) 
```

我建议看看像 Nanite 和 Workling 这样的工具是如何做到这一点的。组创建通常不是消息系统的一部分，相反，在 RabbitMQ 中，您使用订阅创建路由模式。您可以通过使用他们用来将其消费队列绑定到交换的任何键向他们发送消息来踢特定客户端。

希望这可以帮助！

亚历克西斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T00:51:00.293

小组**交流**与简单的消息传递/排队稍有不同。

大多数群组通信系统都是商业的，但有两个（我知道的）开源/免费的，你可以看看：

*   [传播工具包](http://www.spread.org/)
*   [开放式AIS](http://www.openais.org/doku.php)

不过，这两者可能都很难找到 Ruby 绑定。传播，可能是 OpenAIS，将客户端视为受信任的，因此基于浏览器的客户端没有意义。您需要让浏览器前端与后端的组客户端通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-16T01:05:26.047

如果你打算做 Flash 开发，你看过 SmartfoxServer 吗？它拥有您想要的一切，并拥有原生 Flash 客户端库。我曾在一个项目中管理过成千上万的连接用户。

[http://www.smartfoxserver.com/](http://www.smartfoxserver.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-16T01:25:14.067

我们一直在使用 ActiveMQ。为我们的 HR 系统提供服务的供应商正在使用 Ruby/ActiveMQ 来广播和接收更新。

[http://activemq.apache.org/cross-language-clients.html](http://activemq.apache.org/cross-language-clients.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-16T16:55:39.470

其他支持 Stomp 协议的开源消息代理是 OpenMQ，它包含在 GlassFish V3 和 GlassFish 2.1.1 中，但也可以独立工作，很快就会出现 JBoss 消息代理 HornetQ V2.1。OpenMQ 支持对 RPC 风格的通信有用的临时队列，但 ActiveMQ 在 Stomp 适配器中也提供了一些有趣的功能。

# .net - 是否有允许重复的 Dictionary/SortedList 的替代方法？

> ID：551901
> 
> 赞同：22
> 
> 时间：2009-02-16T00:18:21.043
> 
> 标签：.net, dictionary, priority-queue, multimap

> **可能重复：**
> [允许重复键的 C# 可排序集合](https://stackoverflow.com/questions/5716423/c-sharp-sortable-collection-which-allows-duplicate-keys)

基本上，我想让 Dictionary 使用重复的键，而不需要进入自定义比较器实现。有一个想法：

```
 Dictionary<key, List<value>> 
```

但它仍然有一些开销。我希望字典有“AllowDuplicates”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-16T00:24:04.850

如果您使用的是 .NET 3.5，那么[Lookup](http://msdn.microsoft.com/en-us/library/bb460184.aspx)可能就是您所追求的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-16T00:23:50.517

.NET 2.0：[PowerCollections](http://www.codeplex.com/PowerCollections/Release/ProjectReleases.aspx?ReleaseId=6863)包含`OrderedMultiDictionary`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-10-14T15:00:16.453

您仍然可以使用 SortedList 并尝试通过将您的值和 Guid 组合到一个类中来创建唯一键。在这种情况下，您必须`IComparer<NewKey>`为您的新密钥实现 ，例如：

```
class MyKey
{
    public Guid Guid { get; set; }
    public float Value { get; set; }
}

class MyComparer : IComparer<MyKey>
{

    public int Compare(MyKey x, MyKey y)
    {
        if (x == null || y == null)
            throw new InvalidOperationException("both of parameters must be not null");
        if (x.Value < y.Value) return -1;
        if (x.Value > y.Value) return 1;
        return 0;
    }
} 
```

进而

```
var mySortedList = new SortedList<MyKey, MyValue>(new MyComparer()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-16T00:21:19.460

不在 Fx < 3.5 中。显然，您可以使用 IList 对象的 Dictionary 来实现。但是你有封装问题/责任。

如果您使用的是 .NET 3.5，请使用[Lookup](http://msdn.microsoft.com/en-us/library/bb460184.aspx)类。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-10-28T13:04:26.310

那是行不通的。一旦你从比较器返回 0，它就会抛出“重复”异常。

您不需要类封装或任何东西，只需制作一个不返回 0（相等）结果的比较器。`int`这是密钥类型的示例

```
class MyComparer : IComparer<int>
{

  public int Compare(int x, int y)
  {
    if (x < y)
      return -1;
    else return 1;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-16T00:22:00.973

根据定义，字典包含唯一键。您上面的示例实际上是一种二维键控数组，这是我多次使用过的结构。为什么要拥有重复的密钥？如果你这样做了，词典将如何唯一地称呼它的成员？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-11-22T16:41:49.953

我遇到了同样的问题..我需要一个可以允许重复键的 sortedList ..

```
var sortList = new SortedList<string, IDictionary<string, object>>(); 
```

但这没有用..所以我用

```
var list = new List<KeyValuePair<string, IDictionary<string, object>>>(); 
```

将新数据添加到它作为..

```
list.Add(new KeyValuePair<string, IDictionary<string, object>>>(value, Dictionary)); 
```

使用 linq 我对它进行了排序没有问题..

尝试`List<KeyValuePair<TKey, List<TValue>>>();`

# delphi - Delphi 2007 或更高版本有什么好的 XPath 库吗？

> ID：551907
> 
> 赞同：8
> 
> 时间：2009-02-16T00:20:14.970
> 
> 标签：delphi, xpath

我已经为 Delphi 2006 创建了自己的 XPath 库，并且从那时起就一直在使用它。它工作正常，但可以有更多的性能，我真的没有时间再维护它了。

我还可以使用什么其他库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-16T00:49:32.840

[OmniXML](http://www.omnixml.com/)具有良好的 XML 和 XPath 支持，并且它是免费的源代码。也适用于许多版本的 Delphi，包括 2007 和 2009。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-16T14:51:09.807

我导入 MSXML 库并直接使用它。奇迹般有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-18T13:40:17.477

Open XML, Alternative Document Object Model ( **ADOM** ) 也是一个很棒的（100% Delphi）XML 库，包括 XPath 支持。它支持 DTD 验证，但遗憾的是不支持 XSD。

[http://www.philo.de/xml/downloads.shtml](http://www.philo.de/xml/downloads.shtml)

# .net - 跨不同 SQL 读取器共享 SQL 临时表

> ID：551915
> 
> 赞同：2
> 
> 时间：2009-02-16T00:25:43.990
> 
> 标签：.net, sql, sql-server-2005, ado.net, dynamic-sql

我正在尝试对创建时间*非常长的结果集进行许多不同的查询。*为了获得性能提升，我希望使用一个临时表并在这个临时表上做很多查询。

看起来很标准。然而，我正在努力在动态 SQL 中共享这个临时表。据我了解，每个 SqlCommand 对象都在其自己的线程中执行，因此临时表位于不同的范围内 - 从而使其无法从查询线程中访问。

我尝试使用全局临时表，效果很好，但不理想？

如何在动态 SQL 查询之间共享本地临时表？

我的意图：

```
using (var conn = new SqlClient.SqlConnection("..."))
{
    // Creation involes many table joins in reality
    String creationScript = "SELECT * FROM FooTable INTO #MyTemp";
    SqlCommand createTempTbl = new SqlCommand(creationScript, conn);
    createTempTbl.ExecuteNonQuery();

    String query1 = "SELECT * FROM #MyTemp where id=@id";
    SqlCommand query1Comm = new SqlCommand(query1, conn);
    query1Comm.Parameters.Add("@id", ...);

    String query2 = "SELECT * FROM #MyTemp where name=@name";
    SqlCommand query2Comm = new SqlCommand(query2, conn);
    query2Comm.Parameters.Add("@name", ...);

    // And so on the queries go

} // Now want #MyTemp to be destroyed 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-09-02T09:43:48.163

我知道这个帖子发布已经有一段时间了，但我相信答案很简单。

我猜您正在使用 MS 企业库来访问数据库，这解释了为什么命令之间不存在临时表。当命令完成时，企业库明确关闭与数据库的连接（将其放回池中）。也就是说，除非您将命令放入事务中。如果您直接使用 ADO.NET（通过打开连接、构建和执行命令，然后关闭连接），您不会遇到此问题（连接关闭时由您自己决定——风险更大）。这是一些使用 MS 企业库和事务（对不起，VB.NET）编写的代码：

```
' Get a reference to the database
Dim sqlNET As New Sql.SqlDatabase("*Your Connection String Here...*")

' Specify the transaction options
Dim oTranOpt As TransactionOptions = New TransactionOptions
' What type of isolation the transaction should have (V. Important):
oTranOpt.IsolationLevel = IsolationLevel.ReadUncommitted ' This one doesn't place locks on DB but allows dirty reads
' How long the transaction has to complete before implicitly failing (h,m,s):
oTranOpt.Timeout = New TimeSpan(0, 0, 30)

' Start the scope of the transation
Using oTranScope As TransactionScope = New TransactionScope(TransactionScopeOption.Required, oTranOpt)

    ' Create the connection to the DB. Not abs. necessary. EL will create one but best to do so.
    Using Conn As Common.DbConnection = sqlNET.CreateConnection

        ' Create a Temp Table
        sqlNET.ExecuteNonQuery(CommandType.Text, "SELECT * INTO #MyTemp FROM FooTable")

        ' Get results from table, e.g.
        Dim intCount As Integer = sqlNET.ExecuteScalar(CommandType.Text, "Select Count(*) from #MyTemp")

        MsgBox(intCount)

        ' Flag transaction as successful (causes a commit when scope is disposed)
        oTranScope.Complete()

    End Using ' Disposes the connection

End Using ' If this point is reached without hitting the oTranScope.Complete - the transaction is rolled back and locks, if any, are released. 
```

如果您要取出事务范围，代码将在 Select count(*) 上失败，因为表不再存在。指定范围使命令调用之间的连接保持打开状态。

我希望这可以帮助别人。

尼尔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-16T00:31:43.257

您可以尝试使用全局临时表（即，使用`##MyTemp`而不是`#MyTemp`在查询中），[但需要注意的是](http://msdn.microsoft.com/en-us/library/ms174979.aspx)：

> 当创建表的会话结束并且所有其他任务停止引用它们时，将自动删除全局临时表。任务和表之间的关联仅在单个 Transact-SQL 语句的生命周期内维护。这意味着在创建会话结束时主动引用该表的最后一个 Transact-SQL 语句完成时将删除全局临时表。

* * *

**编辑：**哎呀，错过了您已经尝试过全局临时表的事实。

如何将所有逻辑移动到一个存储过程中，该存储过程创建/填充临时表，然后运行查询并将多个结果集返回给客户端代码？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-16T00:46:55.217

您的问题缺少的是创建表的生命周期。如果你让它停留一段时间，那么它就不是一个临时表，它是一个你填充和使用的工作表。我根本不会使用临时表，只是一个由 SELECT INTO 创建并由其他人使用的常规表，直到它被删除（如果有的话）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T18:54:28.437

我成功使用的另一种方法是在 TempDb 中创建一个工作表，并像使用全局临时表一样使用它（例如，“TempDb.dbo.MyTable”）。请记住，SQL Server 重新启动时会删除用户表。

# android - 当我的自定义小部件有焦点时如何指定不同的图像？

> ID：551925
> 
> 赞同：6
> 
> 时间：2009-02-16T00:33:50.087
> 
> 标签：android, android-imageview

我正在尝试在我的资产文件中设置一个可绘制的选择器，如下所示： * 休息模式下的 'on'/'off' 模式的 2 个不同图像（即它没有焦点） * 'on'/' 的另外 2 个不同的图像焦点模式下的“关闭”模式（即它有焦点）。

就我而言，“休息”模式有效，但“焦点”模式无效。

你能告诉我在焦点模式中我缺少什么吗？谢谢你。

```
<!-- these 2 images works --->
<item android:state_checked="false" android:drawable="@drawable/off" />
<item android:state_checked="true" android:drawable="@drawable/on" />

<!-- these 2 images does not work -->

 <item android:state_focused="true" android:state_checked="false"
android:drawable="@drawable/off_focus" />

 <item android:state_focused="true" android:state_checked="true"
android:drawable="@drawable/on_focus" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-01-07T06:17:53.433

我不相信 ImageView 的实例默认情况下是可聚焦的，这意味着它们永远不会获得焦点，并且您的选择器永远不会被触发。在您定义 ImageView 的地方，您需要将其设置为可聚焦，请参阅以下方法：[setFocusable](http://developer.android.com/reference/android/view/View.html#setFocusable%28boolean%29)和[setFocusableInTouchMode](http://developer.android.com/reference/android/view/View.html#setFocusableInTouchMode%28boolean%29)。它可以从 XML 或代码中设置。

# .net - 为什么简单的实体数据模型关系返回 null 而不是对对象的引用？

> ID：551931
> 
> 赞同：7
> 
> 时间：2009-02-16T00:38:28.310
> 
> 标签：.net, entity-framework

我有 2 个简单的表和 SQL Server Express 中定义的外键：

* * *

产品

*   产品 ID [auto-inc]
*   姓名
*   公司 ID [非空]

公司

*   公司 ID [auto-inc]
*   姓名

FK_产品_公司

*   Product.CompanyID = 公司.CompanyID

* * *

我创建了一个 ADO.NET 实体数据模型并将所有表添加到其中。.edmx 文件显示设计器中的一对多关系。我用可以确保每个产品都有一家公司的数据手动填充数据库。但是，每当我尝试访问产品的公司时，它总是返回 null 而不是公司的实例。

例如，在 C# 中运行以下代码，返回 null：

```
var _db = new MyDBEntities();
var product = (from p in _db.Product
               where p.ProductID == 3
               select p).First();
product.Company // == null 
```

我是否缺少任何步骤来使其正常工作？

谢谢

* * *

## 我尝试过的事情：

* * *

运行以下 SQL，正确返回公司记录。

```
SELECT Company.*
FROM Product
  LEFT JOIN Company ON (Product.CompanyID = Company.CompanyID)
WHERE Product.ProductID = 3 
```

* * *

调试此问题的下一件事是运行以下代码：

```
var _db = new MyDBEntities();
var product = (from p in _db.Product
               where p.ProductID == 3
               select p).First();
var company = (from c in _db.Company
               where c.CompanyID == product.CompanyID
               select c).First(); 
```

但是，这不会编译，因为字段 Product.CompanyID 被 ORM 生成器隐藏，我在设计器中看不到添加它的选项。

* * *

我猜下一个最好的运行方式如下，它确实返回了一家公司：

```
var _db = new MyDBEntities();
var company = (from c in _db.Company
               where c.CompanyID == 2
               select c).First(); 
```

需要明确的是，ID 为 3 的产品对应于 ID 为 2 的公司。

* * *

*我尝试使用LINQ to SQL 类*创建完全相同的关系，它工作正常。

当然，我没有使用 DB Entities 类，而是使用了 Data Context 类。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-16T12:48:25.810

您需要将 .Include 方法添加到您的查询中。

```
var _db = new MyDBEntities();
var product = (from p in _db.Product.Include("Company")
               where p.ProductID == 3
               select p).First(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-18T07:35:28.713

实体框架支持深度加载，但不支持延迟加载（实体框架 2.0 将支持延迟加载）。

使用 Load() 或 .Include("Company") 就像之前的帖子说它会起作用。

以下是如何使实体框架变得惰性的演练：http: [//blogs.msdn.com/jkowalski/archive/2008/05/12/transparent-lazy-loading-for-entity-framework-part-1.aspx](http://blogs.msdn.com/jkowalski/archive/2008/05/12/transparent-lazy-loading-for-entity-framework-part-1.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-17T03:14:04.327

您可以按照上面的建议使用包含。

或者尝试调用

product.Company.Load() 来检索对象。

实体框架使用延迟加载来避免不必要的查询，直到实际需要对象为止。

这里有一些关于延迟加载的更多信息：http: [//www.code-magazine.com/article.aspx? quickid=0711051&page=4](http://www.code-magazine.com/article.aspx?quickid=0711051&page=4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-12-02T07:04:35.967

使用“包含”需要字符串参数，这使得重构变得困难。更好的选择是在 select 子句本身中提及您的关系：

```
var product = (from p in _db.Product
     where p.ProductID == 3
     select new {p.Name, Company = p.Company.Name}) 
```

只要在 LINQ 表达式中提到“Product.Company”，EF 编译器就会看到它并加载所有提到的列。额外的好处是生成的 SQL 将只包含你真正需要的列（更少的流量）

如果您需要读写您的对象，它不会工作。

# wpf - 是否可以使用 WPF 和 Delphi 2007/09 win32？

> ID：551932
> 
> 赞同：6
> 
> 时间：2009-02-16T00:42:25.120
> 
> 标签：wpf, delphi

是吗？！可能的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-16T00:53:37.573

是的，您可以使用 RemObjects 的名为“Hydra”的产品：

[http://www.remobjects.com/hydra.aspx](http://www.remobjects.com/hydra.aspx)

他们有一个演示，展示了在 Win32 应用程序中嵌入 WPF 图。

正如 Ken White 所说，您可以在 Delphi Prism 中开发所有 .Net 内容。然后，如果您愿意，可以使用 Hydra 在 Win32 中利用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-16T08:48:29.397

您可以查看[TMS .NET Interop Tools Pack](http://www.tmssoftware.com/site/xv.asp)。它包含在您的 delphi 应用程序中显示 xaml 和 xps 文件的组件。这有多好 - 如果它足够好从 vcl 切换到 xaml，我不知道......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-16T00:45:30.947

不，Delphi 2009 根本不支持 .NET，Delphi 2007 也不支持 .NET 框架的 3.x 版。不过，您可以将 WPF 与 Delphi Prism 一起使用。

# web-services - 你能解释一下 RESTful 的 Web 概念吗？

> ID：551933
> 
> 赞同：32
> 
> 时间：2009-02-16T00:42:33.513
> 
> 标签：web-services, rest

寻找对这个概念的清晰和简洁的解释。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-02-16T01:09:01.687

RESTful 应用程序是将其状态和功能公开为一组资源的应用程序，客户端可以操作这些资源并符合一定的原则：

*   所有资源都是唯一可寻址的，通常通过 URI；不过，也可以使用其他寻址方式。
*   所有资源都可以通过一组受限制的众所周知的动作进行操作，通常是 CRUD（创建、读取、更新、删除），最常通过 HTTP 的 POST、GET、PUT 和 DELETE 表示；它可以是不同的集合或子集 - 例如，某些实现将集合限制为仅读取和修改（GET 和 PUT）
*   所有资源的数据通过任何有限数量的众所周知的表示形式传输，通常是 HTML、XML 或 JSON；
*   客户端和应用程序之间的通信是通过无状态协议执行的，该协议允许多层中介可以为客户端和应用程序透明地重新路由和缓存请求和响应数据包。

Tim Scott 指出的[Wikipedia 文章](http://en.wikipedia.org/wiki/Representational_State_Transfer)给出了更多关于 REST 的起源、详细原理、示例等的详细信息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-02-17T20:11:51.197

我找到的最好的解释是在这个[REST 教程](http://learn-rest.blogspot.com/)中。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-07-04T07:22:01.720

以 REST 为例：

```
POST /user
fname=John&lname=Doe&age=25 
```

服务器响应：

```
200 OK
Location: /user/123 
```

将来，您可以检索用户信息：

```
GET /user/123 
```

服务器响应：

```
200 OK
<fname>John</fname><lname>Doe</lname><age>25</age> 
```

更新：

```
PUT /user/123
fname=Johnny 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-16T01:13:13.703

坦率地说，答案取决于上下文。REST 和 RESTful 的含义取决于您使用的语言或框架或您要完成的任务。由于您已在“Web 服务”下标记了您的问题，我将在 RESTful Web 服务的上下文中回答，这仍然是一个广泛的类别。

RESTful Web 服务可以是任何东西，从严格的 REST 解释（所有操作都以严格的“RESTful”方式完成）到纯 XML 协议，这意味着它不是 SOAP 或 XMLRPC。在后一种情况下，这是用词不当：这样的 REST 协议实际上是[“普通的旧 XML”（或“POX”）协议](http://en.wikipedia.org/wiki/Plain_Old_XML)。虽然 REST 协议通常使用 XML，因此是 POX 协议，但这不一定是这种情况，反之亦然（仅仅因为协议使用 XML 并不使其成为 RESTful）。

不用多说，真正的 RESTful API 由对对象执行的操作组成，由使用的 HTTP 方法和该对象的 URL 表示。这些操作是关于数据的，而不是关于方法的作用。例如，CRUD 操作（创建、读取、更新和删除）可以映射到一组特定的 URL 和操作。假设您正在与照片 API 进行交互。

*   要创建照片，您需要通过 POST 请求将数据发送到 /photos。它会通过 Location 标题让您知道照片在哪里，例如 /photos/12345
*   要查看照片，您可以使用 GET /photos/12345
*   要更新照片，您需要通过 PUT 请求将数据发送到 /photos/12345。
*   要删除照片，您可以使用 DELETE /photos/12345
*   要获取照片列表，您可以使用 GET /photos。

可能会实施其他操作，例如通过 COPY 请求复制照片的能力。

通过这种方式，您使用的 HTTP 方法直接映射到您的调用意图，而不是发送您希望作为 API 的一部分执行的操作。相比之下，非 RESTful API 可能会使用更多 URL，并且仅使用 GET 和 POST 操作。因此，在此示例中，您可能会看到：

*   要创建照片，请将 POST 发送到 /photos/create
*   要查看照片，请将 GET 发送到 /photos/view/12345
*   要更新照片，请发送 POST 到 /photos/update/12345
*   要删除照片，请发送 GET 到 /photos/delete/12345
*   要获取照片列表，请发送 GET 到 /photos/list

您将注意到在这种情况下 URL 是如何不同的，并且仅出于技术需要选择方法：要发送数据，您必须使用 POST，而所有其他请求都使用 GET。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-02-16T06:41:22.777

只是几点：

*   RESTFul 不依赖于您使用的框架。这取决于它所描述的建筑风格。如果你不遵守约束，你就不是 RESTful。约束在 Roy Fielding 的文档第 5 章的半页中定义，我鼓励您去阅读它。
*   标识符是不透明的，*并且不*携带任何超出资源标识的信息。这是一个 nmae，不是输入数据，只是名称。就客户端而言，除了知道如何从表单标签构建查询字符串之外，它没有任何逻辑或价值。如果您的客户端使用您预先确定的模式构建自己的 URI，那么您就不会安宁。
*   使用或不使用所有 http 动词并不是真正的约束，设计一个只支持 POST 的架构是完全可以接受的。
*   缓存、高度解耦、缺乏会话状态和分层架构是很少有人谈论但对 RESTful 架构成功最重要的要点。

如果您没有花费大部分时间来制作文档格式，那么您可能没有使用 REST。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-16T00:47:39.693

这意味着使用名称来标识命令和参数。

名称本身不仅包含句柄或绰号，还包含信息。具体来说，有关请求内容、请求参数等的信息。

名称不是“根”，而是动作加上输入数据。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-21T11:21:01.067

我从 InfoQ.com 上发表的文章中学到了最多的东西：http: [//www.infoq.com/rest](http://www.infoq.com/rest)和 RESTful Web Services 书 ( [http://oreilly.com/catalog/9780596529260/](http://oreilly.com/catalog/9780596529260/) )。

./亚历克斯

免责声明：**我**与 InfoQ.com 相关联，但此推荐是基于我自己的学习经验。

# time - GPS时间同步

> ID：551951
> 
> 赞同：5
> 
> 时间：2009-02-16T00:51:34.333
> 
> 标签：time, gps, nmea

我正在从一个发送时间戳的设备解析 NMEA GPS 数据，该设备无需毫秒即可发送时间戳。据我所知，这些设备将在发送带有 .000 时间戳的句子时使用特定的触发点 - afaik GGA 句子中的 $。

所以我正在解析 GGA 语句，并在收到 $ 时获取时间戳（我使用串行端口波特率补偿在同一操作中读取的任何其他字符）。

根据这些信息，我计算了用于更正系统时间的偏移量，但是当我将设置的时间与某些 NTP 服务器进行比较时，我会得到 250 毫秒的恒定差异——当我手动更正时，我的偏差在 20 毫秒之内，这适合我的申请。

但当然我不确定这个偏移来自哪里，以及它是否特定于我正在使用的 GPS 鼠标或我的系统。我使用了错误的 $ 字符，还是有人知道应该如何处理？我知道这个问题非常模糊，但是任何可能导致这种偏移的提示都会非常有帮助！

这是来自我的设备的一些示例数据，我将使用 $ 字符作为标记的时间偏移量：

```
$GPGSA,A,3,17,12,22,18,09,30,14,,,,,,2.1,1.5,1.6*31
$GPRMC,003538.000,A,5046.8555,N,00606.2913,E,0.00,22.37,160209,,,A*58
-> $ <- GPGGA,003539.000,5046.8549,N,00606.2922,E,1,07,1.5,249.9,M,47.6,M,,0000*5C
$GPGSA,A,3,17,12,22,18,09,30,14,,,,,,2.1,1.5,1.6*31
$GPGSV,3,1,10,09,77,107,17,12,63,243,30,05,51,249,16,14,26,315,20*7E
$GPGSV,3,2,10,30,24,246,25,17,23,045,22,15,15,170,16,22,14,274,24*7E
$GPGSV,3,3,10,04,08,092,22,18,07,243,22*74
$GPRMC,003539.000,A,5046.8549,N,00606.2922,E,0.00,22.37,160209,,,A*56
-> $ <- GPGGA,003540.000,5046.8536,N,00606.2935,E,1,07,1.5,249.0,M,47.6,M,,0000*55
$GPGSA,A,3,17,12,22,18,09,30,14,,,,,,2.1,1.5,1.6*31
$GPRMC,003540.000,A,5046.8536,N,00606.2935,E,0.00,22.37,160209,,,A*56
-> $ <- GPGGA,003541.000,5046.8521,N,00606.2948,E,1,07,1.5,247.8,M,47.6,M,,0000*5E 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-16T01:26:56.510

您必须考虑 GPS 设备中发生的事情：

*   接收卫星信号并计算位置、速度和时间。
*   准备 NMEA 消息并放入串口缓冲区
*   发送消息

GPS 设备的 CPU 相对较慢（与现代计算机相比），因此您观察到的这种延迟是设备在位置生成和开始传输数据之间必须进行的处理的结果。

[Here is one analysis](http://gpsd.berlios.de/performance.html) of latency in consumer grade GPS receivers from 2005\. There you can find measurement of latency for specific NMEA sentences.

# asp.net - Telerik RADGrid - 最有效的使用

> ID：551953
> 
> 赞同：1
> 
> 时间：2009-02-16T00:52:31.913
> 
> 标签：asp.net, controls, telerik, radgrid

您通常使用设计器还是在 ASPX 中做所有事情？

您发现的资源是否特别有助于快速了解如何使用此控件？我注意到此控件的智能感知注释很少。

我继续浏览 Telerik 网站上的文档，我想知道是否有更快的文章——“如何在 15 秒内使用模板绑定数据集和自定义网格”类型的文章。试图减少我使用此控件的学习曲线。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-16T01:29:21.030

我们最近开始在我的团队中使用 RADGrid。我们发现他们的 LiveExamples 提供了非常丰富的信息。简化 RADGrid 使用的最大部分不是网格本身，而是数据的填充方式。如果您最初只是想测试网格的布局，那么您可以使用任何实现 IEnumerable（以及其他几个）的集合作为数据源。

```
void RadGrid1_NeedDataSource(object sender, EventArgs e)
{
    List<Stuff> things = new List<Stuff>();
    /// fill the list
    RadGrid1.DataSource = things;
} 
```

这将使您专注于网格中集合的呈现。我会参考安装中包含的 LiveExamples 以获得对这些的完整解释并查看它们的实际效果。LiveExamples 真的很不错。

当需要插入数据时，使用 ORM 框架（如 NHibernate 或 Linq2SQL）来获取对象集合并将这些集合绑定到 DataSource，如上所述。

您也可以使用普通的 DataTables 和 DataSets 来绑定到 DataSource，但它们只适用于非常小的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-16T01:42:37.113

浏览现场示例，因为它们非常好。论坛也非常好，人们在那里反应非常迅速。开发人员维护带有额外代码示例的博客，这些示例在很多领域都有帮助。

关于将 IEnumerable 对象与数据源一起使用，请务必查看有关 OnNeedDataSource 事件的内容，因为这对于您了解何时希望网格进行排序和过滤至关重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-26T21:10:14.353

我已经使用 Telerik 大约 2 年了。这些示例可以用来找出您可以做什么......但是它们几乎没有实际的代码可以提供帮助。使用知识库了解详情。

[http://www.telerik.com/help/aspnet-ajax/gridoverview.html](http://www.telerik.com/help/aspnet-ajax/gridoverview.html)

如果您遇到困难并且没有支持或不能等待 24 小时以上才能得到回复，这些表格很好。

此外，使用设计器会创建一些带有 Telerik 控件的非常混乱的代码（很像其他控件）。我曾经在设计器中进行所有更改，但大多数时候它弄乱了我的 .aspx 代码。相反，我创建主题和皮肤，以便可以在我的应用程序中设置标准选项。这减少了我们的很多代码并有助于标准化。

```
<%-- GridView --%>
<telerik:RadGrid 
    skinID="defaultGridView" 
    runat="server" 
    Skin="Web20"
    AutoGenerateColumns="false" 
    GridLines="None" 
    AllowPaging="True" 
    AllowSorting="True" 
    EnableAJAX="False" 
    ShowGroupPanel="False"
    PagerStyle-Mode="NumericPages" />  

<telerik:RadGrid 
    skinID="defaultGridView2" 
    runat="server" 
    Skin="Green"
    AutoGenerateColumns="false" 
    GridLines="None" 
    AllowPaging="True" 
    AllowSorting="True" 
    EnableAJAX="True" 
    ShowGroupPanel="False" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-26T21:14:25.920

我发现他们的帮助方法也很有帮助。 [http://www.telerik.com/help/aspnet-ajax/ajxajax.html](http://www.telerik.com/help/aspnet-ajax/ajxajax.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T21:17:51.870

我们在大多数内部/外部应用程序中使用 Telerik ASP.NET 用户控件，发现它们非常有用。

此外，他们有一个非常好的支持站点：[Telerik Support](http://www.telerik.com/support.aspx)。

# .net - 如何将项目添加到 SqlDataSource 数据绑定列表

> ID：551957
> 
> 赞同：2
> 
> 时间：2009-02-16T00:56:01.217
> 
> 标签：.net, asp.net, data-binding, asp.net-3.5, sqldatasource

我很懒——我正在使用 SQLDataSource 来填充我的下拉列表。

数据绑定对象的 Databind 事件在 Page.PreRender 之前调用，所以我在 PreRender eventHandler 中执行类似的操作：

```
private void InitializeDropDown()
        {
            this.myDropDown.Items.Insert(0, new ListItem("-- Select something --"));
        } 
```

我知道我可以将 AppendDataBound 项目设置为 true 并在标记中对我的自定义项目进行硬编码，但在恢复之前，我想了解为什么我正在做的事情不起作用。

当我像这样动态绑定东西时，它通常会起作用：

```
myDropDown.DataTextField = "whatever";
myDropDown.DataValueField = "ID";
myDropDown.DataSource = GetStuff();
myDropDown.DataBind();
myDropDown.Items.Insert(0, "-- Select something --"); 
```

我所做的应该是等效的——唯一的区别是我使用的是 SQLDataSource。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-16T01:09:49.187

将插入行放在数据源的 OnSelected 方法上

myDropDown.Items.Insert(0, "-- 选择一些东西 --");

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.selected.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.selected.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-16T18:27:44.123

我`AppendDataBoundItems="true"`为 dropDwonList 设置了它，它就像魅力一样！我认为它应该只在标记中存在硬编码列表项的情况下使用。我错了。

# apache - 通过一个脚本与 apache 一起服务域下的所有路径

> ID：551965
> 
> 赞同：2
> 
> 时间：2009-02-16T01:07:42.047
> 
> 标签：apache, url, path

我正在通过托管公司 [1] 在 linux/apache 服务器上托管网站。到目前为止，我通过一个带有参数的脚本来提供不同的内容。一个示例网址是

```
www.mydomain.com/pages.php?date=1-10-2008 
```

现在我想将 url 组成的方案更改为看起来完全像路径 url 的东西。例如。：

```
www.mydomain.com/pages/date/2008/20/1 
```

为此，我需要*关闭*url 路径到 apache 中目录文件夹的正常映射：对所有路径的所有请求都应该转到一个中央脚本（pages.php），然后分析 url 的路径组件。

我如何为此调整apache？我希望一些 .htaccess 规则可以解决问题。

[1] 顺便说一句，托管公司是[godaddy.com](http://www.godaddy.com/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-16T01:26:46.543

就像是：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . pages.php 
```

应该重写对 pages.php 不存在的文件或目录的每个请求。这将允许您将静态文件（图像、样式表等）保存在同一个文档根目录中。

（无耻地从 WordPress 中窃取 :) ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T01:17:05.300

您正在寻找[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)。示例 htaccess 文件：

```
RewriteEngine On
RewriteBase /
RewriteRule ^pages/([^/]*)/(.*)$ pages.php?$1=$2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-16T01:12:20.820

您应该能够使用 Apache 的 ModRewrite 模块处理上面的特定示例，而不是解析脚本中的 url。

[http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html)

您可以在 .htaccess 文件中使用这些，假设您的主机允许这样做。

# c# - 带有实体的 TDD，模拟生成的实体类？

> ID：551978
> 
> 赞同：0
> 
> 时间：2009-02-16T01:16:12.557
> 
> 标签：c#, tdd, mocking, entity

抱歉，我读了这篇文章：

[TDD 和 ADO.NET 实体框架](https://stackoverflow.com/questions/316897/tdd-and-ado-net-entity-framework)

但我不认为它涵盖了我正在寻找的内容，并且其他类似的问题似乎没有答案。所以，如果这已经得到回答，请原谅我。

我有一个正在编写的应用程序。我创建了一些实体类。我想在单元测试期间模拟这一点，因为我相信 MS 的实现足以保证跳过它的测试。=-}

所以，我的第一个猜测：

获取生成的 ObjectContext 派生类并从中生成一个接口，用于返回 ObjectQuery 和 Add 方法的读取属性（此时我不担心更新现有对象，只是读取）。但是，我在测试过程中很快遇到了问题，因为我无法轻松地让 ObjectQuery 属性正常工作。

我看到了 The Wayward Weblog 的帖子，关于做一些与此类似的事情，但使用 Linq to SQL 并且它只是引出了一个问题，没有人想出比这更好的方法来模拟实体框架吗？！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-04T10:00:43.430

等待 EF v2.0（可能更多年）或切换到 NHibernate。我选择了第二个选项（不容易，但完全支持 TDD 并且没有数据库限制）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-25T17:12:19.550

所以我认为没有答案。不幸的是，在进行了大量谷歌搜索之后，我认为 EF 并不真正支持 TDD 开发方法，这绝对是一种耻辱。是时候采用 nHibernate 了，听起来不错。

# oracle - 如何阅读 Oracle 事务日志

> ID：551987
> 
> 赞同：4
> 
> 时间：2009-02-16T01:19:43.017
> 
> 标签：oracle, transaction-log

除了在 Oracle 数据库中的所有表上放置触发器之外，是否有一个 Java API 可以用来从 Oracle 事务日志中读取事务？

我的目的是能够检测进入专有（供应商）数据库的交易并做出相应的反应。我们不能修改数据库，以免我们的维护合同无效。

请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-16T02:25:36.930

有基于 SQL 的 LogMiner（因此您可以通过 JDBC 访问）。

```
http://download.oracle.com/docs/cd/B19306_01/server.102/b14215/logminer.htm#sthref1875 
```

或者您可以查看 Oracle Streams，它读取日志并根据日志内容将“逻辑更改消息”生成到队列中。

```
http://download.oracle.com/docs/cd/B19306_01/server.102/b14229/strms_over.htm#i1006309 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-02-16T01:54:03.840

如果您在 *nix 中运行，则可以使用 perl 模块来跟踪文件；然后自己分解线。

# asp.net-mvc - 有人为 ASP.NET MVC 应用程序的静态分析编写了工具吗？

> ID：551990
> 
> 赞同：7
> 
> 时间：2009-02-16T01:22:41.857
> 
> 标签：asp.net-mvc, static-analysis

有没有人编写过一个工具来对 ASP.NET MVC 应用程序进行静态分析？

免责声明：我不确定我真正想要的是[静态分析](http://en.wikipedia.org/wiki/Static_code_analysis)——它只是我能想到的最接近的术语。

我想要的是获得所有控制器的列表，我的操作，显示它们是响应 GET 还是 POST，它们的缓存设置是什么等。

我相信您可以继续进行下去 - 并继续解决更高级的问题，例如是否每个操作实际上都可以通过路线访问。

如果没有人这样做——这是人们认为有用的东西吗？它还应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-16T23:37:44.987

为了测试路线，您可以使用[MvcContrib](http://www.codeplex.com/MVCContrib)。它包含许多很酷的功能，路由调试处理程序就是其中之一。目前，这就是我所看到的。很难创建一个好的工具来显示您描述的所有信息，因为 asp.net mvc 的体系结构非常灵活，并且项目的体系结构可能非常不同。但是如果你在你的项目中使用 NHibernate，你应该看看[NHibernate Profiler](http://nhprof.com/)。

# c# - 如何在 XNA ContentReader 中使用枚举？

> ID：551995
> 
> 赞同：0
> 
> 时间：2009-02-16T01:27:24.840
> 
> 标签：c#, visual-studio-2008, .net-3.5, xna

例如，我正在考虑替换这个：

```
var.StringAttribute = input.ReadString(); 
```

像这样：

```
var.EnumAttribute = input.ReadExternalReference<EnumName>(); 
```

然而，这并不*完全*正确。以及如何获取输入以读取自定义枚举的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-16T03:17:35.167

[`ReadExternalReference`](http://msdn.microsoft.com/en-us/library/bb198588.aspx)读取指向外部文件的链接 - 这不是您想要做的。

如果我理解正确，您想读取一个字符串，并将其[解析](http://msdn.microsoft.com/en-us/library/essfb559.aspx)为枚举。

尝试这个：

```
string value = input.ReadString();
var.EnumAttribute = Enum.Parse(typeof(EnumName), value); 
```

请注意，这适用于数字（枚举基础类型范围内的任何内容 - 通常为`Int32`）和字符串值，但会为无效值引发异常。

# asp.net - JS中的多个用户控件实例和ClientID

> ID：551996
> 
> 赞同：1
> 
> 时间：2009-02-16T01:29:03.260
> 
> 标签：asp.net, javascript

我在 javascript 中使用 <%= ClientID %> 来获取动态加载的用户控件的 ID。

在加载同一控件的多个实例之前，一切正常。ID 指向最后添加的用户控件的 ClientID。

我该如何解决这个问题？

**编辑：我正在做一个：var clID = <%= ClientID %> in javascript。问题是每次加载相同的 UC 时都会覆盖 clID**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-16T01:42:49.030

使用完全限定的 clientID，您将不会遇到此问题。

而不是使用以下客户端 ID：**lnkLogo**

你应该指定**ctl00_SplashPageHeader_pres_lnkLogo**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-16T02:32:36.417

听起来在您的控件中呈现对 JS 函数的调用并将 ID 或引用传递给 JS 函数会更容易。***************