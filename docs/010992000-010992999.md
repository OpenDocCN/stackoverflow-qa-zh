# StackOverflow 问答 10992000-10992999

# php - PHP：在foreach循环中从数组中获取键

> ID：10992005
> 
> 赞同：34
> 
> 时间：2012-06-12T07:13:43.923
> 
> 标签：php, arrays, foreach

print_r($samplearr) 为包含 3 个项目的数组打印以下内容：

```
Array ( [4722] => Array ( [value1] => 52 [value2] => 46 )
Array ( [4922] => Array ( [value1] => 22 [value2] => 47 )
Array ( [7522] => Array ( [value1] => 47 [value2] => 85 ) 
```

我想把这些放到一个 HTML 表中，所以我正在做一个 foreach 但它没有达到我的预期：

```
foreach($samplearr as $item){
     print "<tr><td>" . key($item) . "</td><td>" . $samplearr['value1'] . "</td><td>" . $samplearr['value2'] . "</td></tr>";
} 
```

哪个正在返回：

```
<tr><td>value1</td><td>52</td><td>46</td></tr> 
```

这将是我想要的第一个输出：

```
<tr><td>4722</td><td>52</td><td>46</td></tr> 
```

我需要使用什么函数而不是 key($item) 来获取 4722？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-12T07:14:50.057

试试这个：

```
foreach($samplearr as $key => $item){
  print "<tr><td>" 
      . $key 
      . "</td><td>"  
      . $item['value1'] 
      . "</td><td>" 
      . $item['value2'] 
      . "</td></tr>";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T07:16:07.933

将[foreach](http://php.net/manual/en/control-structures.foreach.php)与键和值一起使用。

例子：

```
foreach($samplearr as $key => $val) {
     print "<tr><td>" 
         . $key 
         . "</td><td>" 
         . $val['value1'] 
         . "</td><td>" 
         . $val['value2'] 
         . "</td></tr>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:22:40.293

你需要嵌套的 foreach 循环

```
foreach($samplearr as $key => $item){
   echo $key;
    foreach($item as $detail){
       echo $detail['value1'] . " " . $detail['value2']
     }
 } 
```

# asp.net-mvc - 如何在控制器扩展中制作 RedirectToAction

> ID：10992006
> 
> 赞同：1
> 
> 时间：2012-06-12T07:13:46.250
> 
> 标签：asp.net-mvc, model-view-controller

我正在尝试进行扩展

```
public static ActionResult RedirectToIndexAction(this Controller controller)
        {
            return RedirectToAction("Index");
        } 
```

为`RedirectToAction("Index")`使`RedirectToIndexAction();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:54:14.470

怎么样像下面这样：

```
public static RedirectToRouteResult RedirectToAction<TController>(this Controller controller, Expression<Action<TController>> action, object routeValues) where TController : Controller
    {
        RouteValueDictionary routeValuesFromExpression = ExpressionHelper.GetRouteValuesFromExpression(action); 

        var routeValueDictionary = new RouteValueDictionary(routeValues); 
        foreach (KeyValuePair<string, object> keyValuePair in routeValueDictionary)
        {
            routeValuesFromExpression.Add(keyValuePair.Key, keyValuePair.Value);
        }
        return new RedirectToRouteResult(routeValuesFromExpression);
    }

     private RedirectToRouteResult RedirectToIndex()
    {
        return this.RedirectToAction<MyController>(c => c.Index(), new { Area = "" });
    } 
```

# django - Django 中的 Jquery Datepicker dd-mm-yy

> ID：10992011
> 
> 赞同：1
> 
> 时间：2012-06-12T07:14:49.467
> 
> 标签：django, jquery-ui-datepicker

我在 django 中使用 jquery datepicker 作为我的代码：

```
$(".datepicker").datepicker({dateFormat: 'dd-mm-yy'}); 
```

我想要 dd-mm-yy 格式的日期。通过使用`DATE_INPUT_FORMATS = ('%d-%m-%Y','%Y-%m-%d')`

在表格中，`date_of_birth = DateField(input_formats=settings.DATE_INPUT_FORMATS)`我可以保存日期而不会出现任何错误。但是当编辑它以 yy-mm-dd 格式显示的日期时。如何将日期保存为数据库中的 dd-mm-yy 或从数据库中检索为 dd-mm-yy 格式？

有人好心建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:56:07.743

我得到了我正在寻找的东西。我将设置中的语言代码更改为 LANGUAGE_CODE = 'eng'。（欧洲日期格式）它工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:27:23.907

use input_formats keyword argument of [DateField](http://docs.djangoproject.com/en/dev/ref/forms/fields/#datefield)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:46:36.020

如果您使用 django 模型表单，请使用 input_formats

# c# - 更改文件扩展名 SPListItem SharePoint 2007

> ID：10992013
> 
> 赞同：2
> 
> 时间：2012-06-12T07:14:54.067
> 
> 标签：c#, sharepoint, sharepoint-2007, sharepoint-workflow, workflow-activity

我在 SharePoint 2007 中有表单库。我创建了一个自定义工作流活动，可以将 InfoPath 文档转换为 PDF。但是，当我尝试将原始 InfoPath 文件替换为新的 PDF 文件时，它会一直引用 InfoPath 文件。如何将 InfoPath 列表项重命名为 PDF？

它不能手动更改（需要自动更改）。我现在唯一的问题是我需要将 PDF 文件存储在同一个 SPListItem 中。因为我想保留文件的元数据和历史信息（要求）。

我的代码：

```
//new url = file.pdf
//old url = file.xml
//pdf doc = byte[] of pdf file

file.MoveTo(newUrl);
file.ReplaceLink(oldUrl, newUrl);
file.SaveBinary(pdfdoc);

file.Update();
file.CheckIn("File Converted to PDF - V1.0");
file.Update(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:09:05.523

通过为 PDF 文件创建新的 SPListItem 来修复它。然后，我将每个字段的内容复制到新的 SPListItem。之后，您可以删除旧文件或将其存档以备后用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:05:15.693

您可以设置*FileLeafRef*字段`SPListItem`以重命名 a `SPFile`：

```
file.Item[SPBuiltInFieldId.FileLeafRef] = newUrl;
// UpdateOverwriteVersion() in order to prevent duplicated version histroy entries...
file.Item.UpdateOverwriteVersion(); 

file.SaveBinary(pdfDoc); 
```

# unix - 将文件从本地 FTP 到 Unix 服务器的 VBA 脚本

> ID：10992015
> 
> 赞同：0
> 
> 时间：2012-06-12T07:15:00.843
> 
> 标签：unix, vba, ftp

我在本地系统中有一个文件，我想将（FTP）传输到 unix 位置。我有 Unix IP 、用户名和密码。如何使用 excel VBA 脚本 FTP 文件？请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:21:02.543

阅读此线程：

[http://www.access-programmers.co.uk/forums/showthread.php?t=178371](http://www.access-programmers.co.uk/forums/showthread.php?t=178371)

# rest - 实现 RESTful 字段查询字符串参数

> ID：10992017
> 
> 赞同：0
> 
> 时间：2012-06-12T07:15:08.127
> 
> 标签：rest, jersey, jackson, pojo

根据[APIGEE](http://www.apigee.com)在其[RESTful API 设计](http://blog.apigee.com/detail/restful_api_design/)博客文章中的建议，我希望实现字段查询字符串参数，以允许移动应用程序客户端限制从单个 RESTful API 调用返回的内容。例如：

```
domain.site.com/rest/accounts/{id}?fields=name,id,age 
```

如果省略 fields 参数，`account`则将返回完整的资源。我的问题是我将如何使用 Jersey（例如）在服务器上实现它。由于 Jersey 可以轻松返回 Account POJO，但我不确定如何根据“字段”查询字符串参数限制生成的 JSON 对象的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:29:10.300

没有一种自动的方法可以做到这一点。您的服务应该加载整个对象，然后将您不想要的字段清空。确保 bean 被注释为忽略 json 序列化中的空字段，然后在您修改它以删除您不想要的字段后返回该对象。

# java - 在Android中调用多个Activity

> ID：10992018
> 
> 赞同：0
> 
> 时间：2012-06-12T07:15:14.610
> 
> 标签：java, android

我开发了一个应用程序，我需要在 SIP 帐户和聊天帐户中注册用户。要注册用户，我需要通过三个类：`setting.java`（sharedpreferences）、`sipchat.java`（注册到 SIP 帐户）、`xmppclient.java`（在聊天中注册）。

现在我打电话在我打电话和我打电话`settings.class`的应用程序中注册用户**。****`settings.java`**`siochat.java`**`sipchat.java`****`xmppclient.java`**

这是用户在应用程序中注册的方式：

**代码：**

```
Intent i = new Intent(Welcome_screen.this, Settings.class);
startActivity(i);
finish(); 
```

使用此应用程序时，注册需要花费大量时间，并且在通过不同活动时会闪烁。

那么我如何在一个活动中调用所有这三个类？（因为在主屏幕上应用程序闪烁三次非常奇怪。）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:32:11.490

我不明白你为什么需要开始所有这些活动。难道不能只在目标活动中调用静态函数吗？

否则，您能否进一步解释为什么启动所有这些不同的活动而不只是处理一项活动中的功能至关重要？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:43:44.673

我给你一些解决方案：

1.  使用 startActivityForResult()，通过 3 个活动并在您的主要活动中处理结果。示例：[http: //rahulonblog.blogspot.com/2010/05/android-startactivityforresult-example.html](http://rahulonblog.blogspot.com/2010/05/android-startactivityforresult-example.html)

2.  更改一项活动的内容视图。在这种情况下，我们有 3 个视图。示例：[如何使用具有三种布局的视图翻转器？](https://stackoverflow.com/questions/6869180/how-to-use-view-flipper-with-three-layouts)

# mongodb - MongoDB 将数据复制到所有分片

> ID：10992025
> 
> 赞同：1
> 
> 时间：2012-06-12T07:15:42.473
> 
> 标签：mongodb, sharding, replicate

我在测试环境中有 4 台服务器，用于测试 MongoDB 副本和分发：RepSetA 包含 RepSetA1 和 RepSetA2。RepSetB 拥有 RepSetB1 和 RepSetB2。所有服务器都充当路由器，RepSetA1 充当单个配置服务器。

我有一个“播放器”数据（10,000 条记录，该对象由一个“Id”和一个“Name”字段组成），我希望它在副本集之间分片（或分布），并在相同的服务器之间克隆副本集。因此，仅举一个简单的示例： Player1-5000：存在于 RepSetA1 和 RepSetA2 中，但不存在于 RepSetB1 和 RepSetB2 中。Player5000-10000：RepSetB1 和 RepSetB2 中都存在，但 RepSetA1 和 RepSetA2 中不存在。

**相反，我得到的是所有 4 个服务器中的所有玩家。**

如果我打印分片状态，我会得到以下信息：

```
mongos> db.printShardingStatus();

--- Sharding Status ---
  sharding version: { "_id" : 1, "version" : 3 }
  shards:

        {  "_id" : "RepSetA",  "host" : "RepSetA/MongoRepSetA1:27018,MongoRepSetA2:27018" }
        {  "_id" : "RepSetB",  "host" : "RepSetB/MongoRepSetB1:27018,MongoRepSetB2:27018" }
  databases:
        {  "_id" : "admin",  "partitioned" : false,  "primary" : "config" }
        {  "_id" : "GamesDB",  "partitioned" : true,  "primary" : "RepSetA" }
                GamesDB.Player chunks:
                                RepSetA 2
                        { "_id" : { $minKey : 1 } } -->> { "_id" : 0 } on : RepSetA { "t" : 1000, "i" : 1 }
                        { "_id" : 0 } -->> { "_id" : { $maxKey : 1 } } on : RepSetA { "t" : 1000, "i" : 2 }
        {  "_id" : "test",  "partitioned" : false,  "primary" : "RepSetB" }
        {  "_id" : "EOO",  "partitioned" : false,  "primary" : "RepSetB" } 
```

我使用以下命令来构建分片：

```
db.adminCommand( { addShard : "RepSetA/MongoRepSetA1:27018,MongoRepSetA2:27018" } )
db.adminCommand( { addShard : "RepSetB/MongoRepSetB1:27018,MongoRepSetB2:27018" } )
db.runCommand( { enablesharding : "GamesDB" } );
db.runCommand( { shardcollection : "GamesDB.Player", key : { _id :1 } , unique : true} ); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:24:42.813

如果您通过 mongos 进程连接到您的节点，它将看起来都包含数据。从您的输出来看，并非所有节点上的所有数据都可用。RepSetA 包含 2 个块，而 RepSetB 应该不包含任何块。您可以通过直接连接您的节点而不是通过 mongos 来验证这一点。
顺便说一句，如果您使用 MongoDBs ObjectId 作为您的 _id（shard key），请考虑在另一个 key 上进行分片，因为这将导致所有插入都进入一个节点，因为 key 会发生单调变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:00:37.750

这可以。它并不表明所有数据都在所有服务器上。输出显示 GamesDB.Player 的所有块（数据）都在分片 RepSetA 上

```
 GamesDB.Player chunks:
                            RepSetA 2
                    { "_id" : { $minKey : 1 } } -->> { "_id" : 0 } on : RepSetA { "t" : 1000, "i" : 1 }
                    { "_id" : 0 } -->> { "_id" : { $maxKey : 1 } } on : RepSetA { "t" : 1000, "i" : 2 } 
```

这意味着平衡器尚未开始平衡您的块。平衡器仅在有 8 个块差异时才起作用。 [http://www.mongodb.org/display/DOCS/Sharding+Administration#ShardingAdministration-Balancing](http://www.mongodb.org/display/DOCS/Sharding+Administration#ShardingAdministration-Balancing)

您可以通过手动拆分块（如果您愿意）来强制平衡 [http://www.mongodb.org/display/DOCS/Splitting+Shard+Chunks](http://www.mongodb.org/display/DOCS/Splitting+Shard+Chunks)

或者，如果您想更快地看到平衡，您可以减小块大小。 [http://www.mongodb.org/display/DOCS/Sharding+Administration#ShardingAdministration-ChunkSizeConsiderations](http://www.mongodb.org/display/DOCS/Sharding+Administration#ShardingAdministration-ChunkSizeConsiderations)

# html - 标记以显示 MONTH 和 DAY

> ID：10992026
> 
> 赞同：1
> 
> 时间：2012-06-12T07:16:03.160
> 
> 标签：html, blackberry

我们是否有任何标签可以在移动浏览器中仅显示月份和日期？它应该由用户选择吗？

或者对于黑莓设备，我们有什么替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:47:50.737

使用`<time>`元素。有关信息，请参阅[此摘要](http://www.webmonkey.com/2012/02/the-html5-time-element-is-back-and-better-than-ever/)，或[阅读规范](http://developers.whatwg.org/text-level-semantics.html#the-time-element)

# java - 独立 Java SE 应用程序的项目目录结构是什么？

> ID：10992028
> 
> 赞同：18
> 
> 时间：2012-06-12T07:16:19.920
> 
> 标签：java, deployment, software-packaging

独立 Java SE（基于命令行）应用程序的标准项目目录结构是什么？

`src`文件夹将包含我`.java`在正确组织的包中的所有文件。除此之外，我还有`bin`包含我的文件的`.class`文件夹。

我的项目中有属性文件和 XML 配置文件。我应该将它们放在哪个目录中？我应该创建一个名为`com.myproject.config`并将所有`.xml`配置文件放在其中的包吗？

我希望将依赖的 jar 与我的最终包一起打包。那么我应该创建一个文件夹（比如名称`lib`）来保存所有这些`.jar`文件吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-12T07:20:48.777

我建议坚持使用默认的[Maven](http://maven.apache.org)布局（并且还使用 Maven 作为构建工具）

生产类/资源：

```
src/main/java
src/main/resources 
```

测试数据和类：

```
src/test/java
src/test/resources 
```

Maven 还可以使用所有必要的 jar 正确打包您的应用程序（查找 maven 程序集插件）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-29T12:37:48.063

**src/com.enterprise_name.project_name。**Main.java（主类）

**src/com.enterprise_name.project_name.model。**（这里所有模型类）

**src/com.enterprise_name.project_name.view。**（这里所有的视图类，JFrame，Jdialog 等）

**src/com.enterprise_name.project_name.view.resources。**（这里是视图中使用的所有文件和图像***note**）

**src/com.enterprise_name.project_name.controller。**（这里所有的控制器类）

**lib/**（这里是所有外部库 - 不要忘记添加到构建路径）

***请注意**，如果您需要一些资源文件（xml、配置文件等），请创建一个包 .resources。在您需要的特定位置（模型、控制器、视图）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T07:23:00.147

据我所知，Java 本身没有标准的项目结构。但是，各种工具和 IDE（例如 Eclipse）确实具有标准结构。

另一方面，Java 的构建工具[Maven具有非常明确定义的（默认）项目结构。](http://maven.apache.org/)在那里，所有 Java 源文件都放在`src/main/java`文件夹中，所有资源文件（如您的配置文件）都放在`src/main/resources`.

如果您还不了解 Maven，这里有一个非常快速的介绍：[Maven in 5 Minutes](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

* * *

关于您关于使用依赖项打包的问题，​​以下是我的一个 Maven POM 文件的片段，该文件使用[Assembly Plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)创建包含所有依赖项的 JAR 文件：

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <configuration>
        <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
        <archive>
            <manifest>
                <mainClass>...</mainClass>
            </manifest>
        </archive>
    </configuration>
    <executions>
        <execution>
            <id>make-assembly</id>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-12T07:26:38.017

一个常用的结构如下：

*   src - 包含您所有的源文件，可能还有以下内容（可能在文件夹树的下方）：
    *   资源 - 包含资源，例如属性文件
    *   config - 与配置相关的所有内容
*   lib - 包含您的库的文件夹，可能放置在单独的子文件夹中
*   bin - 包含已编译的类

# php - 如何获取magento数据库详细信息

> ID：10992036
> 
> 赞同：13
> 
> 时间：2012-06-12T07:17:07.970
> 
> 标签：php, magento

我想在 magento 的任何文件中获取 magento 的数据库配置。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-12T07:25:55.213

Magento 连接详细信息您可以通过以下方法了解......

```
require_once ('../app/Mage.php');
$app = Mage::app('default');

$config  = Mage::getConfig()->getResourceConnectionConfig('default_setup');

$dbinfo = array('host' => $config->host,
            'user' => $config->username,
            'pass' => $config->password,
            'dbname' => $config->dbname
);

$hostname = $dbinfo['host'];
$user = $dbinfo['user'];
$password = $dbinfo['pass'];
$dbname = $dbinfo['dbname']; 
```

# android - java代码中的getString()

> ID：10992037
> 
> 赞同：0
> 
> 时间：2012-06-12T07:17:09.150
> 
> 标签：android, string

我正在尝试从 java 代码中访问我的 strings.xml，但由于某种原因，我只能访问一些默认的 android 字符串。这就是我所做的：

```
private static Context context;
context = getApplicationContext();

context.getString(R.string.somthing); 
```

R.string 包含一些字符串，但不包含我在 strings.xml 中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:18:39.713

你是导入 android.R 还是你生成的 R 文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:25:22.703

我认为您已导入`android.R`，因此只需将其删除并将您的`R.class`喜欢导入为

```
import your.package.name.R; 
```

这`your.package.name`是您在`Manifest.xml`文件中写入的包名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:19:52.470

请改用此代码

```
Resources resources = context.getResources();
resources.getString(R.string.something) 
```

# android - 在 Android 3.1+ 停止的应用程序中使用 BroadcastReceiver

> ID：10992040
> 
> 赞同：0
> 
> 时间：2012-06-12T07:17:21.900
> 
> 标签：android

有没有办法在停止的应用程序中接收广播（如短信通知）？实际上它只在低于 Android 3.1 的情况下工作。

编辑 1：感谢@Squonk 的评论。所以我的问题是，这真的不可能吗？您可以在市场上查看 PlanB 应用程序，它会执行此操作。

编辑 2：这是我的广播接收器。onReceive 函数永远不会被调用（当应用程序停止时）。

```
public class SmsReciever extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        Log.e("kpav", "kpav");
        String url = "http://www.google.com";
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.addFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        i.addFlags(32);
        i.setData(Uri.parse(url));

        arg0.startActivity(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:30:51.300

对于 Android v3.1 及更高版本，任何已由用户手动启动至少一次的应用程序，即使在重新启动后也会收到它已在清单中注册的广播。

但是......用户必须手动启动该应用程序 - 安装应用程序并让它自动接收广播是不可能的。

此外，如果用户在设备的设置中手动使用“强制停止”，它将不再接收广播，直到用户再次手动启动应用程序。

所以基本上，回答你的问题......

> 有没有办法在停止的应用程序中接收广播（如短信通知）？

...答案是否定的，除非在我上面描述的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:44:27.467

您可以通过简单地将以下标志添加到广播意图来包含已**停止的包来接收广播。**

```
intent.addFlags(32); 
```

其中 as`32`指的是**API 级别 12**[`Intent.FLAG_INCLUDE_STOPPED_PACKAGES`](http://developer.android.com/reference/android/content/Intent.html#FLAG_INCLUDE_STOPPED_PACKAGES)中可用的。

# html - Rails 路由 - 如何向路由规则添加 .html 扩展名？

> ID：10992041
> 
> 赞同：0
> 
> 时间：2012-06-12T07:17:25.553
> 
> 标签：html, ruby-on-rails, routing

我有这个规则：

```
 match '*urlnames' => 'home#searching_names' 
```

URL 地址类似于**website.com/john.html**。问题是，在我看到的日志中

```
 Parameters: {"urlnames"=>"john"} 
```

没有`.html`扩展名。文本扩展很重要，我需要在控制器中对其进行测试。我尝试将此部分添加到路由规则中：

```
 match '*urlnames' => 'home#searching_names', :defaults => { :format => "html" } 
```

但还是一样，在日志中是

```
Parameters: {"urlnames"=>"john"} 
```

如何在控制器中捕获扩展名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:19:01.017

`request.parameters[:format]`您可以通过或（作为 MIME 类型）通过访问请求的格式`request.format`。

但是，您也可以使用`respond_to`块：

```
def show
  file = params[:urlnames]
  respond_to do |format|
    format.html { ... }
    format.txt  { ... }
  end
end 
```

`...`呈现一些文本或发送一些数据或文件的代码在哪里。

如果您只是想显示一些静态文件，只需将它们放在公共目录中，然后完全绕过 Rails。

# php - 无法在 Mac OS Lion 中更新 php.ini

> ID：10992043
> 
> 赞同：1
> 
> 时间：2012-06-12T07:17:31.073
> 
> 标签：php

我在 Mac OS Lion 中的 php/apache 设置出了点问题。

如果我改变了，`/private/etc/php.ini`那么我改变`sudo apachectl -k restart`了，这些改变不会被反映。

完成后`sudo apachectl -k stop`，我仍然可以`localhost`在浏览器中连接，并且我的 php 照常运行。

我什至尝试清空`/private/etc/php.ini`并重新启动 apache 服务器，但仍然没有任何反应。

在 phpinfo 中，Loaded Configuration File 的值为`/private/etc/php.ini`

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:08:10.970

如果您有 MAMP，那么只需将 MAMP 文件夹中的 php.ini 文件更改为您使用的 php 版本。

如果没有，请使用 sudo vim 命令尝试 /etc/php.ini。如果您不以 sudo 身份访问 ini，您将无法进行更改。

这是我之前试图让 xdebug 工作时遇到的问题，我必须以超级用户身份编辑 php。

# java - Spring webflow + CAS：不调用AuthenticationViaFormAction类

> ID：10992045
> 
> 赞同：1
> 
> 时间：2012-06-12T07:17:46.857
> 
> 标签：java

我的应用程序使用 CAS 3.4.11、Spring 3.1 和 Hibernate 4。我的 login-webflow.xml 使用 spring-webflow-2.0.xsd，登录流程如下所示，

```
<var name="credentials" class="org.jasig.cas.authentication.principal.UsernamePasswordCredentials" />

   <on-start>
     <evaluate expression="initialFlowSetupAction" />
   </on-start>

   <view-state id="viewLoginForm" view="casLoginView" model="credentials">
     <binder>
       <binding property="username" />
       <binding property="password" />
     </binder>
     <on-entry>
       <set name="viewScope.commandName" value="'credentials'" />
     </on-entry>
     <transition on="submit" bind="true" validate="true" to="realSubmit">
        <evaluate expression="authenticationViaFormAction.doBind(flowRequestContext, flowScope.credentials)" />
     </transition>
   </view-state> 
```

bean“initialFlowSetupAction”和“authenticationViaFormAction”在 cas-servlet.xml 中定义为，

```
<bean id="initialFlowSetupAction" class="org.jasig.cas.web.flow.InitialFlowSetupAction"
        p:argumentExtractors-ref="argumentExtractors"
        p:warnCookieGenerator-ref="warnCookieGenerator"
        p:ticketGrantingTicketCookieGenerator-ref="ticketGrantingTicketCookieGenerator"/>

  <bean id="authenticationViaFormAction" class="org.jasig.cas.web.flow.AuthenticationViaFormAction"
        p:centralAuthenticationService-ref="centralAuthenticationService"
        p:warnCookieGenerator-ref="warnCookieGenerator"/> 
```

这里的问题是，在启动登录页面时会调用 InitialFlowSetupAction。单击“登录”按钮时，应调用 AuthenticationViaFormAction 类的绑定/提交方法。但始终调用 InitialFlowSetupAction 并重新显示表单，没有任何异常。至少我可以跟踪是否有异常。

将表单的属性设置为 UsernamePasswordCredentials 是否可能是表单的用户名和密码字段的绑定问题？

基本上我想知道为什么在单击“登录”按钮时会调用 InitialFlowSetupAction？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:21:08.117

可能是因为您的表单不包含“_flowExecutionKey”字段的值。它应该包含下一个输入元素，以便能够恢复流执行。

```
<form>
    ...
    <input type="hidden" name="_eventId" value="submit" />
    <input type="hidden" name="_flowExecutionKey" value="${flowExecutionKey}" />
</form> 
```

[http://static.springsource.org/spring-webflow/docs/2.0-m1/reference/flow-executor.html](http://static.springsource.org/spring-webflow/docs/2.0-m1/reference/flow-executor.html)

在 CAS 3.5.2 中，出于某种原因，使用字段“execution”而不是“_flowExecutionKey”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T14:55:53.500

尝试将验证设置为 false：

`<transition on="submit" bind="true" validate="false" to="realSubmit">`

# c - 有人知道atolf c函数吗？

> ID：10992052
> 
> 赞同：1
> 
> 时间：2012-06-12T07:18:34.443
> 
> 标签：c, string, double, type-conversion, atof

我正在寻找一个类似于`atol`(char * to long int) 但`atofl`(char to long double) 的函数，有没有人知道这样做的库或执行此操作的简单方法，因为 `atof`在“0.00000005”上使用会消除5? 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:35:20.950

我认为你使用了错误的 printf 参数，所以你只看到控制台给你“0.000000”，你可以试试

```
printf("%0.10f", atof(str_num)); 
```

显示你的号码，你会找到你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:23:41.160

有一个名为的函数[`strtod`](http://www.cplusplus.com/reference/clibrary/cstdlib/strtod/)可以满足您的需求。

# calendar - CRM 2011，服务日历延迟刷新

> ID：10992055
> 
> 赞同：0
> 
> 时间：2012-06-12T07:18:42.380
> 
> 标签：calendar, dynamics-crm, dynamics-crm-2011, crm

在 CRM 2011 中，如果我创建一个新服务并为其分配资源，然后我更改服务上的资源并刷新，我仍然会看到旧版本的服务日历。

简而言之 - 它不会立即更新。

这是 CRM 2011 服务日历的普遍问题还是我们组织特有的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:19:32.110

你正在经历什么样的时滞？它会刷新吗？

从记忆中，我认为刷新是由异步服务处理的。您应该检查该服务是否已启动并正在运行。如果它正在运行，您应该检查服务器上的负载是否表明异步服务太忙（例如，您是否有很多工作流在运行？）。

# json - Asp.net MVC Post JSon 数据从一个到另一个？

> ID：10992061
> 
> 赞同：0
> 
> 时间：2012-06-12T07:19:04.397
> 
> 标签：json, asp.net-mvc-3, post, acceptverbs

我在一个解决方案中有三个项目（两个是 asp.net MVC 类型，最后一个是类类型）；称它为 EmployeeMVC Proj 和 TimeSheetMVC Proj（用于管理视图）和第三个 EntityLib 项目。

现在来自 EmployeeMVC Proj；我想从 TimeSheetMVC Proj 中弹出一个页面并执行一些操作。假设从 EmployeeMVC Proj 以 JSON 格式将 Time-Sheet Data 发布到 TimeSheetMVC Proj 并返回结果。

我们怎样才能做到这一点？

非常感谢， 吉加尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:25:04.683

大概这两个 MVC 项目将托管在它们自己的 Web 应用程序中，因此 EmployeeMVC 应用程序可以将表单发布到 TimesheetMVC 应用程序中控制器上的操作。

# c - 输入/输出问题

> ID：10992062
> 
> 赞同：0
> 
> 时间：2012-06-12T07:19:04.377
> 
> 标签：c, input, flush

```
#define MAX_COMMAND_LEN 32

char command[MAX_COMMAND_LEN];
while (1) {
    if (fgets(command, MAX_COMMAND_LEN, stdin) == NULL) {
        perror("Error: standard function fgets has failed\n");
        break;
    }

    if (command[strlen(command) -1] != '\n') {
        printf("Error: command length must be less than or equal to 30 characters\n");
        continue;
    }
    else {
         printf("Error: command not found\n");
    }

}
quit(); 
```

我有几个我无法处理的问题：

1.  当我按下`Enter`时，它会停止循环并且不打印`command not found`消息。
2.  当我输入一个大小超过 30 个字符的命令时，它会同时打印 the`command not found`和`command length must be less than or equal to 30 characters`消息。
3.  当我输入一个 64 大小的命令时，它会打印两倍 30 长度的消息。

我相信它将输入分成30个长度的段并输入每个段，我该如何克服它？我试图冲洗`stdin`，它不起作用。我想摆脱其余的输入。我如何克服所有这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:34:59.057

对于您的第二个问题，这是因为`fgets`获取 31 ( `MAX_COMMAND_LEN`，减去终止`'\0'`字符的空格) 第一个字符，您注意到它不是换行符，并且下一次循环`fgets`获取剩余的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:01:23.910

> 当我输入一个大小大于 30 个字符的命令时，它会同时打印“找不到命令”和“命令长度必须小于或等于 30 个字符”消息。

`fgets`读取最多`MAX_COMMAND_LEN - 1`字符，因为它为 a 留出空间`'\0'`。
这就是为什么对于任何超过 30 个字符的消息，`fgets`读取的前 31 个字符不包含 a `'\n'`，因此会显示 30 个长度的消息。
由于命令的第二部分`'\n'`末尾有 a，因此`command not found`也打印了 the。

> 当我输入一个 64 大小的命令时，它会打印两倍 30 长度的消息。

`fgets`此命令被调用 3 次。读取第一个 31 长度的块，然后读取第二个 31 长度的块，然后读取剩余的字符。两个 31 长度的块都不包含`'\n'`字符，因此 30 长度的消息显示两次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T07:36:28.003

您可能误解了`fgets`实际的[工作原理](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)：

> `char * fgets ( char * str, int num, FILE * stream );` 从流中读取字符并将它们作为 C 字符串存储到 str 中，直到已读取 (num-1) 个字符或到达换行符或文件结尾，以先到者为准。换行符使 fgets 停止读取，但它被认为是有效字符，因此它包含在复制到 str 的字符串中。在读取的字符之后会在 str 中自动附加一个空字符，以表示 C 字符串的结束。

所以，

1.  当您按“Enter”时 - 它输入换行符，这在您的代码中并不是例外情况。
2.  当您输入一个大于 30 个字符的字符串时`fget`，会多次读取它。
3.  与 60 个字符相同 - 换行符不是字符串的最后一个字符，因此您会收到两次错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T07:49:50.097

对于问题（i），对不起，我不知道为什么，因为我的程序给出了正确的输出。

对于问题（ii），您给 fgets 的第二个参数是 32，该函数将最多读取 32 个字符，包括 '\n' 和 '\0'；剩下的仍然在标准输入缓冲区中，当您的程序在打印错误后继续执行时，fgets 将读取标准输入缓冲区中的剩余字符，直到它读取“\n”。

如果要刷新标准输入，则需要`fpurge(stdin)`清除标准输入缓冲区的函数。

# asp.net - 将 XML 标记的值传递到另一个页面

> ID：10992064
> 
> 赞同：0
> 
> 时间：2012-06-12T07:19:08.603
> 
> 标签：asp.net

这是我从 XML 页面检索并通过将其存储在 cookie 中的页面，我想在另一个页面中检索它。

```
public partial class shopping : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        HttpCookie userCookie = new HttpCookie("user");
        userCookie["quantity"] = TextBox1.Text;

        XmlDocument doc = new XmlDocument();
        doc.Load(Server.MapPath("shopping_cart.xml"));
        XmlNode root = doc.DocumentElement;

        if (RadioButton1.Checked)
        {
            string str1 = doc.GetElementsByTagName("cost").Item(0).InnerText;
            userCookie["cost"] = str1;
            //Label3.Text = str1;
            Response.Redirect("total.aspx");
        }

    }
} 
```

这是我试图检索它的其他页面（total.aspx.cs）：

```
public partial class total : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        **Label2.Text = Request.Cookies["user"]["quantity"];**

    }
} 
```

我在粗体字的行上得到一个空引用。关于我该怎么做的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:20:41.423

您在第一部分创建了 cookie，但忘记将其附加到`Response`.

```
 Response.Cookies.Add(userCookie); // place before your Response.Redirect 
```

此外，请注意 cookie 的最大有用大小为 4000 字节，否则可能不是您所做工作的最佳选择。您可能希望`Session`在页面之间的访问中存储临时会话信息，而不是使用 cookie。

```
 Session["quantity"] = TextBox1.Text

 // ...

 Session["cost"] = str1; 
```

在第二页

```
Label2.Text = Session["quantity"] as string; 
```

# javascript - javascript 检查是否存在特定元素（iframe），如果不存在，则 appendchild

> ID：10992065
> 
> 赞同：0
> 
> 时间：2012-06-12T07:19:13.247
> 
> 标签：javascript

我想实现这样的一些功能：

```
var el = document.createElement("iframe");
el.setAttribute('id', 'ifrm');
document.body.appendChild(el);
el.setAttribute('src', 'http://www.example.com'); 
```

如果“ifrm”存在，jt 不会创建新的 iframe。如果它不存在，它将创建该框架。我想这样做以避免在用户不断单击同一按钮以生成框架时创建重复的框架。有没有办法检查特定的 iframe 是否存在？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:20:37.217

您可以使用 getElementById('ifrm') 检查具有该 id 的框架是否已经存在。如果没有，请创建它。像这样：

```
if(!document.getElementById("ifrm")) 
   // Create the damn thing 
```

如果你想检查是否有任何 iframe，你可以使用 getElementsByTagName('iframe')。

为了让生活更轻松，您可以看一下[jQuery](http://jquery.com/)。这是一个 Javascript 库，可帮助您创建 DOM 对象和/或在 DOM 树中找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:21:01.760

```
if(document.getElementById("ifrm"))
   //then it exists
else
   //it doesn't exist yet 
```

# sample - 我似乎无法在 Eclipse 中运行 playn-showcase-android

> ID：10992066
> 
> 赞同：2
> 
> 时间：2012-06-12T07:19:19.980
> 
> 标签：sample, playn

我目前正在尝试在 Eclipse 上设置 playn 以在 android 上制作游戏我按照此处的安装步骤操作：http: [//0-code.google.com.precise.petronas.com.my/p/playn/wiki/入门](http://0-code.google.com.precise.petronas.com.my/p/playn/wiki/GettingStarted)

我安装了 Android 开发工具和 Maven natives 插件，甚至完成了所有 android 特定步骤，包括添加与 Android Maven 插件兼容的 Maven 安装（在我的例子中是 Maven 3.0.4）。

我导入了示例文件并尝试为 android 运行 playn 展示，这就是我得到的：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building PlayN Showcase Android 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
    Downloading: http://snapshots.repository.codehaus.org/org/apache/maven/plugins/maven-install-plugin/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/org/apache/maven/plugins/maven-resources-plugin/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/org/apache/maven/plugins/maven-surefire-plugin/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/org/apache/maven/plugins/maven-jar-plugin/maven-metadata.xml
Downloading: http://snapshots.repository.codehaus.org/org/apache/maven/plugins/maven-deploy-plugin/maven-metadata.xml
Downloading: http://forplay.googlecode.com/svn/mavenrepo/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/maven-metadata.xml
Downloading: https://oss.sonatype.org/content/repositories/snapshots/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/maven-metadata.xml
Downloading: http://forplay.googlecode.com/svn/mavenrepo/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/playn-showcase-core-1.0-SNAPSHOT.pom
Downloading: https://oss.sonatype.org/content/repositories/snapshots/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/playn-showcase-core-1.0-SNAPSHOT.pom
[WARNING] The POM for com.googlecode.playn:playn-showcase-core:jar:1.0-SNAPSHOT is missing, no dependency information available
Downloading: http://forplay.googlecode.com/svn/mavenrepo/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/playn-showcase-core-1.0-SNAPSHOT.jar
Downloading: https://oss.sonatype.org/content/repositories/snapshots/com/googlecode/playn/playn-showcase-core/1.0-SNAPSHOT/playn-showcase-core-1.0-SNAPSHOT.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 6.687s
[INFO] Finished at: Tue Jun 12 00:05:36 PDT 2012
[INFO] Final Memory: 10M/109M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project playn-showcase-android: Could not resolve dependencies for project com.googlecode.playn:playn-showcase-android:apk:1.0-SNAPSHOT: Could not find artifact com.googlecode.playn:playn-showcase-core:jar:1.0-SNAPSHOT in forplay-legacy (http://forplay.googlecode.com/svn/mavenrepo) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

所以显然我缺少 com.googlecode.playn:playn-showcase-core:jar:1.0-SNAPSHOT 的 POM。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:05:05.347

尝试从项目的顶级目录而不是某个子目录运行 Maven 命令。在某处读到这个。Maven似乎很愚蠢。对我来说，它使它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:14:49.603

好的。在对您的问题写完最后一条评论后，我想出了解决方案：

*   右键单击 playn-showcase：**运行方式 -> Maven 构建...**
*   在编辑配置窗口集上：
    *   目标：集成测试
    *   简介：安卓

我在构建 html 时遇到问题，但我得到的错误是一样的，所以在我的情况下，解决方案是在 Profiles 下设置*html 。*

# linux - linux 手册页是否有（RESTful）API？

> ID：10992068
> 
> 赞同：7
> 
> 时间：2012-06-12T07:19:23.083
> 
> 标签：linux, api, rest, manpage

我正在寻找一种通过 API 查询 linux 手册页的方法，我发现最接近的是[http://linux.die.net/man](http://linux.die.net/man)，但是命令分为 8 个部分，例如 gcc 在第 1 部分：[http://linux.die.net/man/1/gcc](http://linux.die.net/man/1/gcc)，因为它实际上不是一个 API，所以你得到一个完整的 html 页面（包括侧边栏和广告）作为回报。

在我继续努力并尝试制作之前，这样的东西是否已经存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T15:16:11.867

为什么不直接使用本地手册页？手册页只是 nroff 源代码的压缩文本文件。nroff 令人困惑和奇怪，但应该是可行的。手册页[创建指南](http://www.fnal.gov/docs/products/ups/ReferenceManual/html/manpages.html)应该清楚地说明。

对于文件的位置，使用`man -w COMMAND`. 在我的机器上`man -w man`给了我`/usr/share/man/man1/man.1.gz`。所以我的 man 文件存储在`/usr/share/man`. 可能很容易从那里索引。

如果你仔细看，可能有人已经写了一个手册页解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:12:08.107

是的，这似乎有效。

```
[root@test~]# man -w ls
/var/cache/man/cat1/ls.1.lzma (<-- /usr/share/man/man1/ls.1.gz)
[root@test ~]# 
```

您还可以在[http://www.go2techschool.com/linux-all-commands.php查看在线手册页](http://www.go2techschool.com/linux-all-commands.php)

# mysql - Mysql 从第二个表中计数

> ID：10992070
> 
> 赞同：0
> 
> 时间：2012-06-12T07:19:26.160
> 
> 标签：mysql, codeigniter-2

我有一个查询，它根据 $oneid 从等待表中获取所有用户。这工作得很好，但我想计算一个用户留下了多少条消息。这些在另一个表 one_msg 中。

```
function waiting_users($oneid)
    {

    $query_str ="SELECT a.user_id, b.email, b.username, b.fbook, c.user_id as saved_user, d.type as user_type,
                    FROM wait a 
                    LEFT JOIN users b ON a.user_id=b.id
                    JOIN user_profiles d ON a.user_id=d.user_id
                    LEFT JOIN save_one c ON a.user_id=c.user_id AND c.one_id=?
                    WHERE a.post_id = ? 
                    ORDER BY a.date ASC";
}
            $query = $this->db->query($query_str, array( $oneid, $oneid ) ); 
```

one_msg 表

```
+----+--------+---------+---------+---------------------+
| id | one_id | host_id | user_id | date                |
+----+--------+---------+---------+---------------------+
|  3 |    127 |     268 |     270 | 2012-06-11 18:57:58 | 
|  4 |    127 |     268 |     270 | 2012-06-11 21:45:11 | 
|  5 |    127 |     268 |     270 | 2012-06-12 09:10:01 | 
+----+--------+---------+---------+---------------------+ 
```

所以我试图像这样计算来自 one_msg 的消息，但它为所有用户返回相同的值。

```
function waiting_users($oneid)
    {

    $query_str ="SELECT a.user_id, b.email, b.username, b.fbook, c.user_id as saved_user, d.type as user_type,
                    (SELECT COUNT(id) FROM one_msg WHERE post_id = ?) AS count
                    FROM wait a 
                    LEFT JOIN users b ON a.user_id=b.id
                    JOIN user_profiles d ON a.user_id=d.user_id
                    LEFT JOIN save_one c ON a.user_id=c.user_id AND c.one_id=?
                    WHERE a.post_id = ? 
                    ORDER BY a.date ASC";

}
            $query = $this->db->query($query_str, array( $oneid, $oneid, $oneid ) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:27:47.957

Your sub-query should check for the `user_id` instead of `post_id` (which does not exist in `one_msg`, so it is taken from `wait`:

```
(SELECT COUNT(id) FROM one_msg m WHERE m.user_id = a.user_id) AS count 
```

instead of

```
(SELECT COUNT(id) FROM one_msg WHERE post_id = ?) AS count 
```

# .htaccess - 有没有办法重写这个 URL？

> ID：10992072
> 
> 赞同：1
> 
> 时间：2012-06-12T07:19:28.690
> 
> 标签：.htaccess, mod-rewrite

我需要从以下位置重写 URL：

```
www.example.com/John.Connor/my-first-post/42 
```

至：

```
www.example.com/post.php?postid=42&userid=19 
```

表：

```
USER:
id, name, surname, email, password

POST:
id, title, post, userid 
```

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:26:27.610

那么 mod_rewrite 无法查询您的数据库，因此它不能完全通过 .htaccess 本身完成。你可以做的是在 .htaccess 中有这个规则：

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^[^/]+/[^/]+/([0-9]+)/?$ post.php?postid=42 [L,QSA] 
```

然后在你的`post.php`脚本里面有这样的代码：

```
$postid = mysql_real_escape_string($_GET['postid']); 
$userid = mysql_real_escape_string($_GET['userid']);

if (empty($userid)) {
   $userid = mysql_result(mysql_query("SELECT userid FROM POST WHERE id=$posid"), 
              0, "userid");
   // now redirect by appending &userid=49 in the current URL
   header("Location: " . $_SERVER["REQUEST_URI"] . "&userid=" . $userid);
   exit;
} 
```

# c# - Mdiparent 和 SplitContainer

> ID：10992075
> 
> 赞同：-2
> 
> 时间：2012-06-12T07:19:50.213
> 
> 标签：c#, parent-child, mdichild, mdiparent, splitcontainer

我正在使用`SplitContainter`MDI 父表单。

我的问题是我在`panel1`名为*First Form*中加载了一个表单。在第一个表单中，我`SecondForm`在 panel2 中加载了一个按钮。

我正在使用这段代码：

```
 Form In_but = new SecondForm();
        In_but.MdiParent = this.ParentForm;
        In_but.TopLevel = false;
        this.splitContainer1.Panel2.Controls.Add(In_but);
        In_but.Show(); 
```

但它不起作用。错误是：`does not contain definition splitContainer1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:07:46.977

尝试这个

```
frmChild frmChild = new frmChild();
        frmChild.TopLevel = false;
        frmChild.Parent = this.splitContainer3.Panel2;
        frmMasterlistAdministrationAdd.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:18:12.303

通过查看您的代码示例，我怀疑您的问题是当您提到 时`this.splitContainer`，`this`是面板 1 上的“第一个表单”，而您的 SplitContainer 是 on `this.ParentForm`。

我建议将该行更改为`this.(ParentForm as <whatever class your parent form is>).splitContainer1.Panel2.Controls.Add(In_but);`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T17:25:21.500

```
frmTest fs = new frmTest();  //frmTest is the form that you going to call 

fs.MdiParent = this; //the main form is a mdiform and have a splitcontainer with 
                     //two panels

this.splitContainer1.Panel2.Controls.Add(fs); //add the fs form to the panel2

fs.Show(); //show the form 
```

# javascript - 选择框计数器

> ID：10992077
> 
> 赞同：2
> 
> 时间：2012-06-12T07:19:54.003
> 
> 标签：javascript, jquery, jquery-ui

我有这个小提琴，我想让它计算被选中的盒子的数量。现在它显示了盒子的数量。

知道怎么做吗？

```
 $(function() {
    $(".selectable").selectable({
 filter: "td.cs",

      stop: function(){
        var result = $("#select-result").empty();
        var result2 = $("#result2");
      $('.ui-selecting:gt(31)').removeClass("ui-selecting");

          if($(".ui-selected").length>90)
          {
     $(".ui-selected", this).each(function(i,e){
         if(i>3)
         {
         $(this).removeClass("ui-selected");
         }
     });   
return;              
          }

     $(".ui-selected", this).each(function(){

          var cabbage = this.id + ', ';
          result.append(cabbage);
        });

        var newInputResult = $('#select-result').text(); 
            newInputResult = newInputResult.substring(0, newInputResult.length - 1);
            result2.val(newInputResult); 
      }
    });
  }); 
```

**jsfiddle：http:** [//jsfiddle.net/dw6Hf/44/](http://jsfiddle.net/dw6Hf/44/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:22:40.847

试试这个`stop()`：

```
$(".ui-selected").length 
```

**[演示](http://jsfiddle.net/dw6Hf/46/)**

### 笔记

要获取所有选定的 div，您需要放置上面的代码，如下所示：

```
 alert($(".ui-selected").length); // here to place

 if ($(".ui-selected").length > 4) {
      $(".ui-selected", this).each(function(i, e) {
       if (i > 3) {
             $(this).removeClass("ui-selected");
       }
      });
      return;  // because you've used a return here
 }

 alert($(".ui-selected").length); // so not to place here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:23:26.163

```
...
stop: function(){
    console.log('you selected %d cells', $('.ui-selected').length);
... 
```

# iphone - 如何以编程方式创建 UI，如“设置 UI”iPad？

> ID：10992078
> 
> 赞同：1
> 
> 时间：2012-06-12T07:19:58.050
> 
> 标签：iphone, xcode, ipad, user-interface

我正在开发 iPad 应用程序，并希望创建像 iPad 一样具有所有方向的设置 UI。

也就是说，左侧是设置列表（常规、邮件、Wifi、视频等），右侧是所选设置选项的详细信息。以下是图片：

![人像模式](../Images/607107ceffc46ed923ba30a672542be0.png)

![横向模式](../Images/2bc3a5023af2d614ef03133a9c63db89.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:05:03.337

iPad 中设置应用程序的布局是使用[UISplitViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html)完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:00:14.713

```
UIView *view = [[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
[view setAutoresizingMask:UIViewAutoresizingFlexibleHeig ht|UIViewAutoresizingFlexibleWidth];
[view setBackgroundColor:[UIColor blueColor]]; 
```

创建**uiview**后，将您的控件添加到此 uiview 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:07:09.527

遍历 UISplitViewController 类和 UITableView 类

[UISplitViewController 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISplitViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009277)

[UITableView 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

# php - PHP Curl 获取下载文件大小

> ID：10992079
> 
> 赞同：5
> 
> 时间：2012-06-12T07:20:02.940
> 
> 标签：php, cookies, curl, filesize

我在两个不同的服务器上使用这个脚本：

```
function curlGetFileInfo($url, $cookies="default"){
global $_config;
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_COOKIEFILE, 'serverpath/cookies/'.$cookies.'.txt');
$data = curl_exec($ch);
curl_close($ch); 
if ($data === false) { 
    return 0;
}
//echo $data;   
$info['filename'] = get_between($data, 'filename="', '"');
$info['extension'] = end(explode(".",$info['filename']));
if (preg_match('/Content-Length: (\d+)/', $data, $matches)) {
  $info['filesize'] = (int)$matches[1];
}
return $info;
} 
```

这些服务器具有相同的 PHP 版本和相同的 PHP-Curl 版本。这些是 curl 结果的两个不同标题：

**工作一：**

> HTTP/1.1 302 发现日期：2012 年 6 月 12 日星期二 07:04:35 GMT 服务器：Apache/2.2.16 (Debian) X-Powered-By：PHP/5.3.3-7+squeeze13 过期：1981 年 11 月 19 日，星期四08:52:00 GMT 缓存控制：无存储，无缓存，必须重新验证，后检查 = 0，预检查 = 0 编译指示：无缓存位置： [http ://stor1076.uploaded.to/ dl/b3411ded-0f45-4efc-b705-8c8ac89b5e41](http://stor1076.uploaded.to/dl/b3411ded-0f45-4efc-b705-8c8ac89b5e41) 变化：接受编码连接：关闭内容类型：文本/html HTTP/1.1 200 OK 服务器：nginx/1.0.5 日期：2012 年 6 月 12 日星期二 07:04:35 GMT Content-Type: video/x-msvideo Content-Length: 733919232 Last-Modified: Tue, 29 May 2012 15:10:07 GMT Connection: keep-alive Content-Disposition: attachment; filename="Saw.[Spanish.DVDRip].[XviD-Mp3].by.SDG.avi" 接受范围：字节

**非工作一：**

> HTTP/1.1 302 发现日期：2012 年 6 月 12 日星期二 07:05:26 GMT 服务器：Apache/2.2.16 (Debian) X-Powered-By：PHP/5.3.3-7+squeeze13 过期：1981 年 11 月 19 日，星期四08:52:00 GMT 缓存控制：无存储，无缓存，必须重新验证，后检查 = 0，预检查 = 0 编译指示：无缓存位置： [http ://stor1164.uploaded.to/ dl/22c3d242-365d-4e1e-b903-f1e2b81812c2](http://stor1164.uploaded.to/dl/22c3d242-365d-4e1e-b903-f1e2b81812c2) 变化：接受编码连接：关闭内容类型：文本/html

Cookie 设置正常（通过登录），其他简单的 Curl 功能运行良好。

另外，我做了一个`curl_getinfo($ch, CURLINFO_HTTP_CODE)`并给了我这个结果：

**工作一：** 200

**非工作一：** 302

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:39:24.760

在工作中，您似乎正在运行 Apache 和**nginx**。您可以看到有两个 HTTP 响应：

> HTTP/1.1 302 发现日期：2012 年 6 月 12 日星期二 07:04:35 GMT 服务器：Apache/2.2.16 (Debian) HTTP/1.1 200 OK 服务器：nginx/1.0.5

因此，您的设置有所不同。我不知道它们究竟是如何一起运行的，但这提供了一些见解并可能帮助您解决它： http: [//kbeezie.com/view/apache-with-nginx/](http://kbeezie.com/view/apache-with-nginx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:25:15.773

好的，这是一个 open_basedir 问题。多谢你们。

# javascript - 变量和框架的 JavaScript 范围

> ID：10992082
> 
> 赞同：0
> 
> 时间：2012-06-12T07:20:24.860
> 
> 标签：javascript, scope, frames

我有不同的 javascript 文件和一个带框架的网站。一般来说Javascript.js我写了这个

```
console.log("BP0 - generalJavaScript.js eingebungen;");
top.window.clickedNewForm = false; 
function setClickedNewForm(booleanobj){
    console.log("BP5 - setClickedNewForm(); top.window.clickedNewForm: " + top.window.clickedNewForm + ";");
    top.window.clickedNewForm = booleanobj;
    console.log("BP6 - top.window.clickedNewForm: " + top.window.clickedNewForm + ";");
}
function getClickedNewForm(){
    console.log("BP7 - getClickedNewForm();");
    return top.window.clickedNewForm;
} 
```

在 Firefox-Console 中，我可以看到如下消息：

```
Permission denied to access property 'clickedNewForm'
generalJavaScript.js()genera...ript.js (Zeile 11)
[Bei diesem Fehler anhalten]    
top.window.clickedNewForm = false; 
```

怎么了 ？我想如果我在顶级对象上声明了一个全局变量，它将可以从所有帧访问？！

更新：尝试使用 parent.myvar 而不是 top.window，不幸的是没有任何改变，FF-Console：

```
BP0 - generalJavaScript.js eingebungen;
genera...ript.js (Zeile 10)
Permission denied to access property 'clickedNewForm'
generalJavaScript.js()genera...ript.js (Zeile 12)
[Bei diesem Fehler anhalten]    
parent.clickedNewForm = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:23:48.090

您需要使用父对象从父框架访问值。

```
console.log("BP0 - generalJavaScript.js eingebungen;");
parent.clickedNewForm = false; 
function setClickedNewForm(booleanobj){
    console.log("BP5 - setClickedNewForm(); parent.clickedNewForm: " + parent.clickedNewForm + ";");
    parent.clickedNewForm = booleanobj;
    console.log("BP6 - parent.clickedNewForm: " + parent.clickedNewForm + ";");
}
function getClickedNewForm(){
    console.log("BP7 - getClickedNewForm();");
    return parent.clickedNewForm;
} 
```

# ruby - 在 UBUNTU 中从 TTF 文件中查找 FontName

> ID：10992084
> 
> 赞同：4
> 
> 时间：2012-06-12T07:20:27.293
> 
> 标签：ruby, ubuntu, fonts, truetype

我需要为我的应用程序（在 Ruby on rails 中开发）以编程方式安装（在 Ubuntu 中）数百种字体，并在安装时跟踪安装的字体名称。

所以我需要一个工具或 UBUNTU 中的一些库，它将**TTF 文件作为输入并提供字体名称**作为输出。

即使在 ruby​​ 中有某种方法（GEM 或任何可以提供帮助的东西）用给定的 TTF 文件找到字体名称，也会有很大的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:45:16.393

我想应该有某种 ruby​​ 字体解析器可以做到这一点，但如果你有一点技巧，你可能会很容易地制作自己的字体。你需要两条重要的信息：

*   [TTF 文件头的数据结构](http://www.microsoft.com/typography/otspec/otff.htm)
*   [“名称”表的数据结构](http://www.microsoft.com/typography/otspec/name.htm)（存储字体名称的位置）

阅读标题，找到“name”表，在“name”表中搜索 nameID 4 条目（“全名”，例如“My Cool Font Bold Italic”）。或者如果您只想要姓氏（“我的酷字体”），也许 nameID 1。

数据结构非常简单，即使是初学者也可以理解和解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T04:56:10.013

基本上我使用 fop-ttfreader 从 TTF 文件中获取详细信息..

```
fop-ttfreader fontfile.ttf xmlfile.xml 
```

[http://manpages.ubuntu.com/manpages/natty/man1/fop-ttfreader.1.html](http://manpages.ubuntu.com/manpages/natty/man1/fop-ttfreader.1.html)

所以现在可以解析这个 xml 文件并获取字体详细信息。

这看起来像是增加了 2 个步骤，而不是像 djangodude 所建议的那样，它可以通过我们自己解析在一个简单的代码中完成。在我的情况下，这将是一个像耙子一样的一次性过程。所以这帮助我完成了我的工作..：P

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-12T03:12:37.950

ttfunk [gem](https://github.com/prawnpdf/ttfunk)将完成大部分繁重的工作，而无需您自己进行任何解析：

```
require 'ttfunk'

file = TTFunk::File.open("some/path/myfont.ttf")
puts "name: #{file.name.font_name.join(', ')}" 
```

（摘自所述 gem 中的自述文件）

# c# - C# 测试中两个字符串 [] 和 AreEqual 的错误

> ID：10992089
> 
> 赞同：3
> 
> 时间：2012-06-12T07:20:44.890
> 
> 标签：c#, unit-testing, mstest

我对 ac# 测试方法有疑问。

看起来像：

```
public void GetRolesTest()
{
    RoleProvider target = new RoleProvider(); 
    string username = "FOO"; 
    string[] expected = new string[2];
    expected[0] = "Admin";
    expected[1] = "User";
    string[] actual;
    actual = target.GetRoles(username);
    Assert.AreEqual<string[]>(expected, actual);
} 
```

被测试的方法只是做以下事情：

```
public override string[] GetRoles(string username)
{
    string[] output = new string[2];
    output[0] = "Admin";
    output[1] = "User";
    return output;
} 
```

运行测试后，我收到以下错误：

```
Error in "Assert.AreEqual". Expected:<System.String[]>. Acutally:<System.String[]>. 
```

有人能告诉我那里有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:47:35.200

你得到你的例外的原因是`Assert.AreEqual`它将使用默认的比较器类型，在这种情况下`string[]`将是简单的引用比较（`actual`并且`expected`是不同的对象 - 不同的引用）。

您可以改用集合断言：

```
CollectionAssert.AreEquivalent(expected, actual); 
```

或者，`true`使用 LINQ 进行验证：

```
Assert.IsTrue(actual.SequenceEqual(expected)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T07:27:22.727

What you're testing here is whether `actual` and `expected` are the same array instance, which it is not the case. I would recommend testing the array contents explicitly, like this:

```
Assert.Contains( "Admin", actual );
Assert.Contains( "User", actual );
Assert.Equals( 2, actual.Length ); 
```

Depending on your unit testing lib the code may look slightly different, but I hope you see what I'm getting at.

# django - Django-tables2 不排序

> ID：10992090
> 
> 赞同：3
> 
> 时间：2012-06-12T07:20:45.470
> 
> 标签：django, django-tables2

我使用 django-tables2 显示一个数据库表。一切似乎都正常，但单击列标题不会按该列排序。标题是可点击的，但在它们的 html 中没有 url 文本，例如：

```
<div class="table-container">
<table class="paleblue"><thead><tr><th class="id orderable sortable"><a href="">ID</a>
</th><th class="orderable sortable system"><a href="">System</a></th> ... 
```

我检查了 django-tables2 模板源，它是这样的：

```
... <a href="{% querystring table.prefixed_order_by_field=column.order_by_alias.next %}"> ... 
```

我不明白。

我只能通过在 view.py 中设置 order_by 来进行排序：

```
class ResultsTable(tables.Table):
    class Meta:
        model = Performance
        attrs = {'class': 'paleblue'}
        order_by_field = True

def result(request, system):
    results = Performance.objects.filter(system__name=system)
    table = ResultsTable(results, order_by=('<any column name from Performance>',))
    RequestConfig(request).configure(table)
    return render_to_response('result.html', {'table': table}) 
```

但这显然只适用于一列，我想单击列以选择要排序的列。

我从[文档](http://django-tables2.readthedocs.org/en/latest/)中了解到，按列排序应该“开箱即用”，这是正确的，还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T14:08:14.670

遇到了同样的问题，只是我错过了

```
django.core.context_processors.request 
```

来自 settings.py 中的 TEMPLATE_CONTEXT_PROCESSORS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T22:37:29.237

经过一夜的睡眠和我的代码与 django-tables2 文档中的示例的全新外观和逐字比较，找到了我自己问题的答案。

对于我使用的结果函数：

```
return render_to_response('result.html', {'table': table}) 
```

如果我将其替换为：

```
return render(request, 'result.html', {'table': table}) 
```

排序按预期工作。不要问我为什么...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-30T01:02:14.343

此页面上的其他响应指向正确的方向，但只是想包含在一个地方进行此工作所需的所有内容。在视图中：

1.  *无需*排序即可定义您的查询集
2.  将查询集传递到表实例中
3.  在表 obj 上设置任何自定义项，例如默认排序
4.  把它全部包起来`RequestConfig`（必不可少 - 没有这个就无法订购！）
5.  将完全配置的表传递到模板上下文中

```
# views.py
from django_tables2 import RequestConfig
...
data = MyModel.objects.all()
my_table = MySummariesTable(data)
my_table.order_by = "-name"
RequestConfig(request).configure(my_table)
ctx = {"my_table": my_table}

return render(request, "path/mytemplate.html", ctx) 
```

如果您的任何列需要通过外键关系排序，请在表列定义中定义这些列，例如

```
col1 = tables.Column(verbose_name="Some Col", order_by="mycol.foobar.name") 
```

# php - ckeditor 在 p 标签的开头和结尾显示额外的空间

> ID：10992094
> 
> 赞同：3
> 
> 时间：2012-06-12T07:20:59.197
> 
> 标签：php, javascript, mysql, html, ckeditor

我在我的小型 Web 项目中使用 ckeditor，但是当我编辑内容或创建新内容时，它会在打开 p 标签和文本后自动添加空格，当我删除空格并保存它的内容时我再次编辑，它再次添​​加空间，我如何删除它。我认为打开 p 标签和文本之间的空格应该无关紧要，但是当我从数据库中检索这些内容时它会显示空格并且它会弄乱我的设计。我该如何解决这个问题？

这是我想说的图片：

![在此处输入图像描述](../Images/1ac13bbd97de65e73d26fe9cc27c7422.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:27:56.630

我认为这只是一个设置：这是来自一个旧资源，但我认为它仍然适用，具体取决于您使用的版本可能：

似乎有添加中断和缩进的设置（我猜是你的问题）来打开`p`标签：

```
this.dataProcessor.writer.setRules( 'p',
                    {
                        indent : false,
                        breakBeforeOpen : true,
                        breakAfterOpen : false,
                        breakBeforeClose : false,
                        breakAfterClose : true
                    }); 
```

资料来源：[http](http://cksource.com/forums/viewtopic.php?t=18067) ://cksource.com/forums/viewtopic.php?t=18067 （但在谷歌上可以找到很多其他关于这个问题的提及）

# android - xml 文件中的 Inneractive 广告集成错误

> ID：10992096
> 
> 赞同：0
> 
> 时间：2012-06-12T07:21:10.557
> 
> 标签：android

我试图将内部活动集成到我的应用程序中。我下载了示例项目，但在 xml 文件中出现错误...

```
 Multiple annotations found at this line:
    - error: No resource identifier found for attribute 'adType' in package        'com.inneractive.api.ads.sample'
    - error: No resource identifier found for attribute 'refreshInterval' in package 
     'com.inneractive.api.ads.sample'
    - error: No resource identifier found for attribute 'keywords' in package 
     'com.inneractive.api.ads.sample'
    - error: No resource identifier found for attribute 'appID' in package         'com.inneractive.api.ads.sample' 
```

XML

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <com.inneractive.api.ads.InneractiveAd
        android:id="@+id/ad"
        xmlns:inneractive="http://schemas.android.com/apk/res/com.inneractive.api.ads.sample"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        inneractive:appID="Android_IA_Test"
        inneractive:adType="Banner"
        inneractive:keywords="android,test"
        inneractive:refreshInterval="120"
        android:layout_alignParentBottom="true"
    /> 
```

顺便说一句，对于原生 android 应用程序来说，inner-active 是一个正确的选择吗？TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:44:45.390

我已经使用 inneractive 大约 6 个月了，并且每个月都能产生可观的收入（每月大约 1500 美元）。这完全取决于您拥有的下载量以及放置横幅的方式。不要让它对用户造成太大的干扰，但要确保他们确实看到它并能够点击它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:44:05.557

问题是由于线

`xmlns:inneractive="http://schemas.android.com/apk/res/com.inneractive.api"`

可以试试

```
<?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <view class="com.inneractive.api.ads.InneractiveAd"
        android:id="@+id/ad"

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        inneractive:appID="Android_IA_Test"
        inneractive:adType="Banner"
        inneractive:keywords="android,test"
        inneractive:refreshInterval="120"
        android:layout_alignParentBottom="true"
    />
    </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T13:55:16.020

我叫 Nirit，是 Inneractive 的支持经理。

您是否正在尝试编译我们的示例应用程序？还是你自己的项目？

请确保将“xmlns:inneractive”设置为您的应用程序包。此外，请注意`attrs.xml`文件 (InneractiveAdSample\res\values\attrs.xml) 应添加到您的项目中。

如果您有任何问题或意见，请随时通过仪表板上的“联系支持”链接与我联系。最好的问候，尼里特。

# c# - 如何处理包含事件的局部变量

> ID：10992100
> 
> 赞同：1
> 
> 时间：2012-06-12T07:21:30.930
> 
> 标签：c#

> **可能重复：**
> [事件处理程序是否会阻止垃圾收集的发生？](https://stackoverflow.com/questions/298261/do-event-handlers-stop-garbage-collection-from-occuring)

我有一个这样的 wp7 应用程序：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    GeoCoordinateWatcher watcher = new GeoCoordinateWatcher();
    watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);
    watcher.Start();
}

void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
{
    Debug.WriteLine(e.Position.Timestamp.ToString());
} 
```

单击两次按钮后，控制台将输出两次时间戳。但是观察者是一个局部变量！它出什么问题了？我怎么能破坏它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T07:30:03.877

`watcher` is a local variable, but that doesn't affect the *object* necessarily. You've asked the `GeoCoordinateWatcher` to start - I'd expect it to maintain a reference to itself, effectively, or stash one somewhere appropriate.

It sounds like *either* you ought to disable the button once it's clicked, *or* you need to keep the watcher in an instance variable so that you can dispose of the old one and create a new one. (I'm not sure why that would be useful though.)

EDIT: As there are two incorrect answers here, let me just clear something up... an event *publisher* (the watcher in this case) has references to the handler delegates. If those delegates refer to *instance* methods (as it does in this case) then there's a reference to an instance of the type containing that method:

```
 Event publisher => delegate => instance of type with handler method 
```

That means that as long as the publisher isn't garbage collected (and the event handler still exists), the instance associated with the delegate can't be collected. It *doesn't* prevent the publisher itself from being garbage collected.

In other words, if `GeoCoordinateWatcher` didn't do something "special" (probably in the `Start` method) it *could* be garbage collected. There's no implicit reference from an event handler *to* the event publisher which prevents it from being garbage collected that way round.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-12T07:34:53.313

GC 实际上不会收集`watcher`，因为事件仍然被分配（这意味着`GeoCoordinateWatcher`实例仍然被引用，因此没有被 GC 收集）。即使局部变量超出范围，实例仍然存在。

分离事件处理程序`watcher_PositionChanged`，事情按预期工作。如果不这样做，则`GeoCoordinateWatcher`每次单击按钮时都会有一个新实例，并且每个按钮都会在位置更改时调用该事件。

这是在本地创建实例/分配事件时有时会出现各种奇怪问题的原因。在像您这样的情况下，有两种可能的解决方案：

1.  创建一个实例变量，并确保只做一次
2.  确保在创建新实例之前正确处理旧实例（*不*依赖垃圾收集器）

# html - 示例 Web 套接字连接

> ID：10992108
> 
> 赞同：0
> 
> 时间：2012-06-12T07:22:09.003
> 
> 标签：html, websocket

我想知道一个简单的示例示例，它使用 Web 套接字发送和接收 JSON 消息。我知道如何使用 Web Socket 编写客户端程序。但是如何使用 c 或 java Web 服务编写客户端程序（[运行 Web Socket 客户端编程](https://stackoverflow.com/questions/10907927/running-web-socket-client-side-programming/10908019#comment14223890_10908019)）并将其托管在 tomcat（localhost）Web 服务器上？
在客户端，我想提供我自己的本地主机地址而不是“echo ...”

这些系统要求和安装/插件是什么？
帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:30:32.273

I don't fully understand why you want to do that, but maybe you should have a look at "websocketpp" if you're looking for a C++ implementation of both - client and server side.

# ruby-on-rails - 在 Rails 中创建候选清单

> ID：10992113
> 
> 赞同：0
> 
> 时间：2012-06-12T07:22:31.677
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

关于如何在 Rails 中创建候选名单，我有一个相当普遍的问题。

我目前拥有的是一个用户和工作模型，用户可以在其中注册和创建/编辑工作等。我想做的是让用户能够将他们感兴趣的工作添加到“候选名单”中，以便他们可以轻松返回他们 - 然后我想将这些入围工作添加到我的用户仪表板。

我想知道实现这样的设置的最佳方法是什么？最好为候选名单创建一个单独的控制器并使其成为用户的嵌套资源，然后将我的作业表与我的数据库中的候选名单链接起来？

从以前实施过类似方法的人那里获得一些想法会很棒吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:34:09.957

[`has_and_belongs_to_many`](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many)如果我理解正确，就建模而言，听起来您希望在这里建立关系-

用户：

```
has_and_belongs_to_many :shortlisted_jobs, :class_name => 'Job' 
```

工作：

```
has_and_belongs_to_many :shortlisting_users, :class_name => 'User' 
```

至于控制器设置，我会将作业 CRUD 放入`JobsController`没有命名空间的`UsersController`.

我所做的一个假设是，作为您应用程序中的用户，我可以将您创建的工作添加到我的候选名单中。如果是这种情况，我会按照我刚刚描述的方式进行设置。

# php - 变量可以是要打开的文件名的一部分吗？

> ID：10992120
> 
> 赞同：1
> 
> 时间：2012-06-12T07:22:48.177
> 
> 标签：php, arrays

PHP中有什么方法可以根据文件名的变量打开文件吗？基本上我想要的是：

```
$file = file('data.txt');
$needle = array("one", "two", "three");
$haystack = array("one", "three");

foreach($needle as $value){
  $pos = strpos($haystack, $value);

if($pos !== false){
  $filename = "$value.txt";
  file_put_contents($filename, $file);
} 
```

$needle 的值是 .txt 文件的名称。它一直工作到 file_put_contents。$filename 无效，我已经到处寻找解决方案并尝试了我能想到的一切。我想加载数组值，说“一个”，扩展名为 .txt 作为文件名，具体取决于是否在大海捞针中找到了该值。有没有办法在不为每个文件名做 if 语句的情况下做到这一点？如果可能的话，我宁愿用循环来处理它。

编辑以交换参数。

编辑，新代码：

```
$data = file_get_contents('data.txt');
$needle = array("one", "two", "three");
$haystack = array("one", "three");
$files = array_intersect($needle, $haystack);
foreach ($files as $value) {
  $newfilename = "$value.txt";
  var_dump($newfilename);
  file_put_contents($newfilename, $data);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:28:26.717

您混淆了 file_put_contents() 的参数：

> int file_put_contents ( string $filename , mixed $data [, int $flags = 0 [, resource $context ]] )

所以你需要交换它们：

```
file_put_contents($filename, $file); 
```

第二件事是，您正在对数组执行 strpos()，但该函数（如其名称所示）用于字符串 - 您想要的是 in_array()：

```
foreach ($needle as $value) {
    if (in_array($value, $haystack) {
        $filename = "$value.txt";
        file_put_contents($filename, $file);
    }
} 
```

您甚至可以通过使用 array_intersect() 进一步增强这一点 - 它为您提供了一个包含来自 $needle 的所有值的数组，这些值也在 $haystack 中。我认为这就是您要求避免使用 if 语句的原因：

```
$files = array_intersect($needle, $haystack);
foreach ($files as $value) {
    $filename = "$value.txt";
    file_put_contents($filename, $file);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:27:53.050

file_put_contents 文件名是第一个参数，第二个是数据。[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)

```
file_put_contents($filename, $file); 
```

# sql - SSIS 部署：任务 无法在此版本的集成服务上运行。它需要更高级别的版本

> ID：10992121
> 
> 赞同：2
> 
> 时间：2012-06-12T07:22:48.090
> 
> 标签：sql, service, ssis, integration, bids

我的 SQL Server 数据库引擎安装在远程计算机上，而开发工具（BIDS 和 SQL Server Management Studio）安装在我的本地计算机上。

使用 BIDS，我创建了一个 SSIS 包。从 BIDS（按 F5）执行时，它运行没有任何问题。但是，当我将此包部署到 SQL Server 并尝试从 SQL Server Management Studio 执行它时，它给了我以下错误：

**该任务`<task name>`无法在此版本的集成服务上运行。它需要更高级别的版本。**

经过一番研究，我发现在远程机器上安装数据库引擎的集成服务版本与使用 Dev 安装的版本不同。本地机器上的工具。

此外，SQL Server 是企业版，而本地计算机上的 BIDS 是专业版。

1）上述两个事实是否可能导致此错误？2）有什么方法（除了工具升级）来摆脱这个错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:58:42.657

在远程服务器上，使用 ssms 中的向导创建一个愚蠢的导入导出 pkg 并将 pkg 保存在某个位置...在开发机器上执行相同操作并使用记事本打开 pkg 并查看标头中的差异（通常是问题在那儿）。

2008 pkg 的前

```
<?xml version="1.0"?><DTS:Executable xmlns:DTS="www.microsoft.com/SqlServer/Dts" DTS:ExecutableType="SSIS.Package.2">
<DTS:Property DTS:Name="PackageFormatVersion">3</DTS:Property>
<DTS:Property DTS:Name="VersionComments"></DTS:Property> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:09:55.473

你从哪里运行包？请记住，包是在调用它的盒子上运行的，而不是在它存储的那个盒子上运行的。

您还说：`that the version of Integration Services installed with Database Engine on remote machine is different from what is installed with Dev` 我认为这就是问题所在，您不能在 2005 服务器上运行基于 2008 构建的软件包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T06:41:28.853

感谢大家！！！

这对我有用：

当我们通过在对象资源管理器（在 SSMS 中）中右键单击该包来运行该包时，该包将在我们启动它的机器上运行。它不在服务器机器上运行包。我们要么需要在我们尝试运行包的机器上安装 SSIS，要么直接在服务器机器上运行包。

[参考](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2009/12/11/you-get-error-code-dts-e-productleveltolow-while-running-package-outside-business-intelligence-development-studio.aspx)

我在另一台开发机器上执行了这个包（安装了 SSIS），它成功了！！！

# css - 使用 :after 时奇怪的 1px 偏移

> ID：10992125
> 
> 赞同：1
> 
> 时间：2012-06-12T07:23:00.503
> 
> 标签：css

[代码在这里](http://dabblet.com/gist/2915854)

很奇怪，不知道为什么会这样，我似乎来自中心元素（h9），但不知道为什么......有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:28:54.063

just replace `left:100%;` with `right:2px;` to solve the problem (and `right:106%;` with `left:-11px` on your `:before`). [see it working](http://dabblet.com/gist/2915891).

this solves the problem, but sadly i can't really expain (jet) whats causing the gap in your initial layout.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:32:42.330

h1 到 h6 是有效的 html 标签，h9 不是。

这可能是导致您的问题的原因。

# c++ - regsvr32 没有在 Windows 7 上注册我的 DLL

> ID：10992128
> 
> 赞同：0
> 
> 时间：2012-06-12T07:23:18.153
> 
> 标签：c++

我在 C++ 中使用“DllRegisterServer”函数。当我在 cmd "regsvr32 MyDll.dll" 中使用时，我总是收到操作成功的消息，但实际上 DLL 文件没有在注册表中注册。它仅在 Windows 7 中发生。

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:27:38.560

If you're working on a 64 bit OS, you need to be aware that 64bit applications can not "see" 32 bit DLLs. Also, things are stored in different places in the registry. You need to look at the `Wow6432Node` nodes to see the 32bit components.

# web-services - 如何从 windows phone 7 中的多个 Web 服务中获取数据？

> ID：10992132
> 
> 赞同：0
> 
> 时间：2012-06-12T07:23:26.993
> 
> 标签：web-services, windows-phone-7, callback

我是 windows phone7 的新手。

我有 3 个 Web 服务。来自三个 Web 服务，我正在获取数据并存储到我的本地数据库中。

我在应用程序中放置了一个进度条，它将显示从这 3 个 Web 服务获取数据的进度。

我不知道如何使用从服务中获取数据来更新进度条。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:31:27.447

你如何加载这些数据？

您使用的是 WebClient 还是包含了 WebReference？

编辑：

为所有 3 个 WebClient 注册事件并执行以下操作：

```
// proptery to bind to the progress bar
public int ProgressBarPercentage 
{
    get { 
        return (_request1Percentage + _request2Percentage + request3Percentage)/3
    }
}
private int _request1Percentage;
private int _request2Percentage;
private int _request3Percentage; 
```

在事件处理程序中，您只需设置此处理程序的字段并为 ProgressBarPercentage 触发 NotifyPropertyChanged（如果您使用的是 VM）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:45:36.933

我采用了一个全局静态变量。

```
 public static int progress = 0; 
```

我有三个网络方法，所以我有三个下载字符串完成的 argumnet。

在我写的每个下载字符串完成的 evnt 函数中

```
 progress++; 
```

在构造函数中，我使用了一个计时器来检查每一秒的进度状态

```
 DispatcherTimer timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromSeconds(1);
        timer.Tick += delegate(object s, EventArgs args) { if (progress == 3) { NavigationService.Navigate(new Uri("/Home.xaml", UriKind.Relative)); timer.Stop(); } };
        timer.Start(); 
```

所以在下载完所有内容后，我转到了我的下一页谢谢

# mercurial - 关于与远程差异文件同步的任何建议

> ID：10992137
> 
> 赞同：0
> 
> 时间：2012-06-12T07:23:45.877
> 
> 标签：mercurial, synchronization, dropbox, rsync, syncml

我的要求与 Dropbox 相似。我被告知要研究[Mercurial](http://mercurial.selenic.com)，但它将所有历史记录存储在每个存储库中，并将差异文件存储在本地，仅传输还原。

但我必须使用远程差异（[rsync](http://librsync.sourceforge.net/)）。我觉得用 rsync 替换 Mercurial 的 diff 算法并不容易，它必须改变 Mercurial 的大部分代码。

如果我仅基于`librsync`. [syncML](http://en.wikipedia.org/wiki/SyncML)是否会有帮助？但是因为我只同步文件，是不是也太复杂了？

因为我的同步不是分布式的，也许SVN会更适合我的要求？但是 SVN 也没有使用 rsync。

# session - ActiveMQ 会话 AUTO_ACKNOWLEDGE 属性影响

> ID：10992139
> 
> 赞同：11
> 
> 时间：2012-06-12T07:23:51.643
> 
> 标签：session, configuration, connection, jms, activemq

谁能解释一下 Session.AUTO_ACKNOWLEDGE 对 ActiveMQ JMS 配置的影响是什么

```
session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T10:02:16.623

我相信默认情况下 ActiveMQ 设置为自动确认消息。这只是意味着当消息到达时，它将自动确认消息已到达。这与从 JMS 对象调用 .acknowledge() 相同。

关闭自动确认的一个原因是，如果您构建了一个服务器并假设您正在处理每个 JMS 消息并正在执行某种 DB 事务。如果事务失败，您会希望重新发送 JMS 消息，以便您可以修复错误并再次处理它。因此，从这个意义上说，您只会在处理后才确认 JMS 对象。

# javascript - 你如何让这个基本的立方体演示以恒定的速度旋转？

> ID：10992142
> 
> 赞同：0
> 
> 时间：2012-06-12T07:24:06.000
> 
> 标签：javascript, opengl-es, 3d, webgl, three.js

我开始学习 Three.js。你如何在[这个演示](http://mrdoob.github.com/three.js/examples/canvas_geometry_cube.html)中以恒定速度旋转立方体而不是用鼠标旋转它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:35:57.573

代替：

```
plane.rotation.y = cube.rotation.y += ( targetRotation - cube.rotation.y ) * 0.05; 
```

尝试类似：

```
plane.rotation.y = cube.rotation.y += ROTATION_STEP; 
```

通过`ROTATION_STEP`您可以控制立方体旋转的速度和方向。

# database - Hive 中选择语句的最大长度

> ID：10992143
> 
> 赞同：1
> 
> 时间：2012-06-12T07:24:14.607
> 
> 标签：database, linux, unix, hadoop, hive

我正在尝试做一个

```
select
  count(distinct(col_name1  )),
  count(distinct(col_name2  )),
  count(distinct(col_name3  )),
      .......... 
  count(distinct(col_name804))
from 
  tab_name; 
```

该查询似乎没有在配置单元上运行。它抛出内存不足异常错误。hive 可以处理的最大列数是否有限制？或者对为什么会出现错误有任何帮助？

谢谢

错误日志如下

```
java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row {"rhive_row":"1138","f16":43,"f17":"S","f18":43,"f19":null,"f20":"","f21":0,"f22":"H","f23":null,"f24":"","f25":3,"f26":"F","f27":"01","f28":null,"f29":null,"f30":null,"f31":null,"f32":null,"f33":null,"f34":"","f35":null,"f36":null,"f37":null,"f38":"","f39":"","f40":null,"f41":null,"f42":null,"f43":"","f44":null,"f45":null,"f46":"","f47":"","f48":"","f49":null,"f50":null,"f51":null,"f52":null,"f53":null,"f54":null,"f55":null,"f56":null,"f57":null,"f58":null,"f59":null,"f60":null,"f61":null,"f62":null,"f63":"","f64":"","f65":"","f66":null,"f67":null,"f68":null,"f69":null,"f70":null,"f71":"","f72":null,"f73":null,"f74":"","f75":"","f76":"","f77":null,"f78":null,"f79":"","f80":null,"f81":null,"f82":null,"f83":"","f84":null,"f85":"","f86":null,"f87":null,"f88":null,"f89":"","f90":null,"f91":null,"f92":null,"f93":null,"f94":null,"f95":null,"f96":null,"f97":null,"f98":null,"f99":null,"f100":null,"f101":"","f102":"","f103":null,"f104":null,"f105":null,"f106":null,"f107":"","f108":"","f109":null,"f110":"","f111":"","f112":"","f113":null,"f114":null,"f115":null,"f116":null,"f117":"","f118":null,"f119":"","f120":null,"f121":null,"f122":null,"f123":null,"f124":null,"f125":null,"f126":null,"f127":null,"f128":null,"f129":null,"f130":null,"f131":"","f132":null,"f133":null,"f134":null,"f135":null,"f136":null,"f137":"","f138":"","f139":null,"f140":"","f141":null,"f142":"","f143":null,"f144":"","f145":null,"f146":null,"f147":null,"f148":null,"f149":null,"f150":null,"f151":null,"f152":null,"f153":null,"f154":null,"f155":null,"f156":null,"f157":null,"f158":null,"f159":null,"f160":"","f161":"","f162":null,"f163":"","f164":null,"f165":"","f166":null,"f167":null,"f168":"","f169":null,"f170":null,"f171":"","f172":"","f173":"","f174":null,"f175":null,"f176":"","f177":null,"f178":null,"f179":null,"f180":null,"f181":null,"f182":"","f183":"","f184":null,"f185":null,"f186":null,"f187":null,"f188":"","f189":"","f190":"","f191":"","f192":"","f193":null,"f194":"","f195":null,"f196":null,"f197":null,"f198":null,"f199":"","f200":null,"f201":"","f202":null,"f203":"","f204":"","f205":"","f206":null,"f207":null,"f208":"","f209":null,"f210":null,"f211":null,"f212":"","f213":null,"f214":"","f215":null,"f216":null,"f217":null,"f218":null,"f219":null,"f220":null,"f221":null,"f222":null,"f223":null,"f224":null,"f225":null,"f226":"","f227":null,"f228":null,"f229":"","f230":null,"f231":"","f232":"","f233":null,"f234":"","f235":null,"f236":"","f237":null,"f238":"","f239":"","f240":"","f241":null,"f242":null,"f243":"","f244":"","f245":"","f246":null,"f247":"","f248":"","f249":null,"f250":"","f251":null,"f252":"","f253":"","f254":null,"f255":"","f256":"","f257":null,"f258":"","f259":"","f260":null,"f261":"","f262":"","f263":"","f264":null,"f265":"","f266":null,"f267":null,"f268":"","f269":"","f270":"","f271":"","f272":"","f273":null,"f274":null,"f275":"","f276":null,"f277":"","f278":"","f279":null,"f280":"","f281":"","f282":"","f283":null,"f284":null,"f285":"","f286":"","f287":null,"f288":null,"f289":"","f290":"","f291":"","f292":null,"f293":"","f294":null,"f295":"","f296":null,"f297":"","f298":null,"f299":null,"f300":null,"f301":null,"f302":null,"f303":null,"f304":null,"f305":null,"f306":null,"f307":null,"f308":null,"f309":null,"f310":null,"f311":null,"f312":null,"f313":null,"f314":null,"f315":null,"f316":null,"f317":null,"f318":null,"f319":null,"f320":null,"f321":null,"f322":null,"f323":null,"f324":null,"f325":null,"f326":null,"f327":null,"f328":null,"f329":null,"f330":null,"f331":null,"f332":null,"f333":null,"f334":null,"f335":null,"f336":null,"f337":null,"f338":null,"f339":null,"f340":null,"f341":null,"f342":null,"f343":null,"f344":null,"f345":null,"f346":null,"f347":null,"f348":null,"f349":null,"f350":null,"f351":null,"f352":null,"f353":null,"f354":null,"f355":null,"f356":null,"f357":null,"f358":null,"f359":null,"f360":null,"f361":null,"f362":null,"f363":null,"f364":null,"f365":null,"f366":null,"f367":null,"f368":null,"f369":null,"f370":null,"f371":null,"f372":null,"f373":null,"f374":null,"f375":null,"f376":null,"f377":null,"f378":null,"f379":null,"f380":null,"f381":null,"f382":null,"f383":null,"f384":null,"f385":null,"f386":null,"f387":null,"f388":null,"f389":null,"f390":null,"f391":null,"f392":null,"f393":"","f394":"","f395":null,"f396":"","f397":null,"f398":null,"f399":null,"f400":"","f401":"","f402":null,"f403":null,"f404":null,"f405":null,"f406":null,"f407":null,"f408":null,"f409":"S","f410":"N","f411":"","f412":"K","f413":0,"f414":350,"f415":"N","f416":"N","f417":null,"f418":"N","f419":"","f420":7,"f421":1940,"f422":null,"f423":0,"f424":0,"f425":null,"f426":"","f427":1,"f428":2,"f429":"1920-09-07","f430":0,"f431":3,"f432":6,"f433":null,"f434":0,"f435":"","f436":"","f437":"N","f438":5,"f439":1,"f440":0,"f441":"","f442":"E","f443":5,"f444":1,"f445":2,"f446":80,"f447":null,"f448":"I","f449":"N","f450":"A","f451":"","f452":"N","f453":null,"f454":"Y","f455":14,"f456":"","f457":"","f458":0,"f459":null,"f460":5,"f461":9,"f462":2,"f463":2,"f464":1,"f465":"","f466":0,"f467":0,"f468":0,"f469":0,"f470":0,"f471":0,"f472":4,"f473":5,"f474":1,"f475":1,"f476":0,"f477":0,"f478":0,"f479":0,"f480":19,"f481":0,"f482":2,"f483":0,"f484":0,"f485":52,"f486":627092,"f487":4,"f488":14,"f489":4,"f490":3,"f491":7,"f492":520,"f493":3,"f494":704678,"f495":74,"f496":281,"f497":520,"f498":0,"f499":390,"f500":945,"f501":2,"f502":3,"f503":2,"f504":107966,"f505":6,"f506":5,"f507":0,"f508":0,"f509":0,"f510":0,"f511":0,"f512":0,"f513":0,"f514":0,"f515":0,"f516":0,"f517":0,"f518":0,"f519":0,"f520":0,"f521":0,"f522":0,"f523":0,"f524":0,"f525":0,"f526":0,"f527":0,"f528":0,"f529":0,"f530":0,"f531":"","f532":"","f533":"","f534":"","f535":"","f536":"","f537":"N","f538":0,"f539":0,"f540":1,"f541":1,"f542":null,"f543":null,"f544":null,"f545":null,"f546":null,"f547":null,"f548":null,"f549":null,"f550":null,"f551":null,"f552":null,"f553":null,"f554":null,"f555":null,"f556":null,"f557":null,"f558":null,"f559":null,"f560":0,"f561":5,"f562":1,"f563":2,"f564":0,"f565":0,"f566":null,"f567":"","f568":"N","f569":null,"f570":null,"f571":null,"f572":null,"f573":null,"f574":"H","f575":"","f576":null,"f577":0,"f578":0,"f579":0,"f580":0,"f581":0,"f582":0,"f583":0,"f584":0,"f585":0,"f586":"","f587":"","f588":"","f589":"","f590":null,"f591":null,"f592":null,"f593":null,"f594":null,"f595":null,"f596":"","f597":"","f598":null,"f599":"","f600":"","f601":null,"f602":"","f603":"","f604":null,"f605":0,"f606":5,"f607":1,"f608":"Y","f609":"","f610":"","f611":"S","f612":3,"f613":1,"f614":null,"f615":"","f616":"","f617":0,"f618":0,"f619":null,"f620":null,"f621":null,"f622":null,"f623":"","f624":"U","f625":"K","f626":0,"f627":196608,"f628":43,"f629":"F","f630":"H","f631":43,"f632":null,"f633":"","f634":3,"f635":null,"f636":"","f637":"01","f638":"P","f639":"S","f640":null,"f641":0,"f642":"01","f643":"","f644":"Y","f645":"","f646":"","f647":"","f648":"","f649":"","f650":null,"f651":null,"f652":"","f653":"","f654":"","f655":"","f656":"","f657":"","f658":null,"f659":null,"f660":"","f661":null,"f662":"","f663":"","f664":"","f665":null,"f666":null,"f667":null,"f668":null,"f669":"","f670":null,"f671":"","f672":"","f673":null,"f674":"","f675":"","f676":null,"f677":"","f678":"","f679":"","f680":"","f681":null,"f682":null,"f683":"","f684":null,"f685":"","f686":"","f687":null,"f688":null,"f689":"","f690":"","f691":null,"f692":null,"f693":null,"f694":"","f695":null,"f696":"","f697":"","f698":"","f699":"","f700":"","f701":null,"f702":"","f703":"","f704":null,"f705":"","f706":"","f707":"","f708":"","f709":null,"f710":null,"f711":"","f712":null,"f713":"","f714":null,"f715":0,"f716":1,"f717":0,"f718":0,"f719":0,"f720":1,"f721":0,"f722":0,"f723":1,"f724":0,"f725":0,"f726":0,"f727":0,"f728":0,"f729":null,"f730":null,"f731":null,"f732":null,"f733":null,"f734":null,"f735":null,"f736":null,"f737":null,"f738":null,"f739":null,"f740":null,"f741":null,"f742":null,"f743":null,"f744":null,"f745":null,"f746":null,"f747":null,"f748":null,"f749":null,"f750":null,"f751":null,"f752":null,"f753":null,"f754":null,"f755":null,"f756":null,"f757":null,"f758":null,"f759":null,"f760":null,"f761":null,"f762":null,"f763":null,"f764":null,"f765":null,"f766":null,"f767":null,"f768":null,"f769":null,"f770":null,"f771":15,"f772":"Y","f773":"N","f774":null,"f775":"N","f776":"N","f777":null,"f778":"N","f779":"N","f780":"NY","f781":10021,"f782":3518,"f783":36,"f784":11,"f785":47229,"f786":"A04","f787":"B","f788":2,"f789":5,"f790":67,"f791":32,"f792":9969,"f793":0,"f794":65,"f795":"9","f796":74,"f797":2,"f798":100,"f799":61,"f800":"","f801":501,"f802":52,"f803":11,"f804":10,"f805":3,"f806":"N","f807":"N","f808":"N","f809":"C291","f810":"S","f811":1,"f812":550425,"f813":94,"f814":46,"f815":36,"f816":1,"f817":"A","f818":0,"f819":41,"f820":"W","f821":5600}
                at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:161)
                at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
                at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:435)
                at org.apache.hadoop.mapred.MapTask.run(MapTask.java:371)
                at org.apache.hadoop.mapred.Child$4.run(Child.java:259)
                at java.security.AccessController.doPrivileged(Native Method)
                at javax.security.auth.Subject.doAs(Subject.java:416)
                at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
                at org.apache.hadoop.mapred.Child.main(Child.java:253)
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row {"rhive_row":"1138","f16":43,"f17":"S","f18":43,"f19":null,"f20":"","f21":0,"f22":"H","f23":null,"f24":"","f25":3,"f26":"F","f27":"01","f28":null,"f29":null,"f30":null,"f31":null,"f32":null,"f33":null,"f34":"","f35":null,"f36":null,"f37":null,"f38":"","f39":"","f40":null,"f41":null,"f42":null,"f43":"","f44":null,"f45":null,"f46":"","f47":"","f48":"","f49":null,"f50":null,"f51":null,"f52":null,"f53":null,"f54":null,"f55":null,"f56":null,"f57":null,"f58":null,"f59":null,"f60":null,"f61":null,"f62":null,"f63":"","f64":"","f65":"","f66":null,"f67":null,"f68":null,"f69":null,"f70":null,"f71":"","f72":null,"f73":null,"f74":"","f75":"","f76":"","f77":null,"f78":null,"f79":"","f80":null,"f81":null,"f82":null,"f83":"","f84":null,"f85":"","f86":null,"f87":null,"f88":null,"f89":"","f90":null,"f91":null,"f92":null,"f93":null,"f94":null,"f95":null,"f96":null,"f97":null,"f98":null,"f99":null,"f100":null,"f101":"","f102":"","f103":null,"f104":null,"f105":null,"f106":null,"f107":"","f108":"","f109":null,"f110":"","f111":"","f112":"","f113":null,"f114":null,"f115":null,"f116":null,"f117":"","f118":null,"f119":"","f120":null,"f121":null,"f122":null,"f123":null,"f124":null,"f125":null,"f126":null,"f127":null,"f128":null,"f129":null,"f130":null,"f131":"","f132":null,"f133":null,"f134":null,"f135":null,"f136":null,"f137":"","f138":"","f139":null,"f140":"","f141":null,"f142":"","f143":null,"f144":"","f145":null,"f146":null,"f147":null,"f148":null,"f149":null,"f150":null,"f151":null,"f152":null,"f153":null,"f154":null,"f155":null,"f156":null,"f157":null,"f158":null,"f159":null,"f160":"","f161":"","f162":null,"f163":"","f164":null,"f165":"","f166":null,"f167":null,"f168":"","f169":null,"f170":null,"f171":"","f172":"","f173":"","f174":null,"f175":null,"f176":"","f177":null,"f178":null,"f179":null,"f180":null,"f181":null,"f182":"","f183":"","f184":null,"f185":null,"f186":null,"f187":null,"f188":"","f189":"","f190":"","f191":"","f192":"","f193":null,"f194":"","f195":null,"f196":null,"f197":null,"f198":null,"f199":"","f200":null,"f201":"","f202":null,"f203":"","f204":"","f205":"","f206":null,"f207":null,"f208":"","f209":null,"f210":null,"f211":null,"f212":"","f213":null,"f214":"","f215":null,"f216":null,"f217":null,"f218":null,"f219":null,"f220":null,"f221":null,"f222":null,"f223":null,"f224":null,"f225":null,"f226":"","f227":null,"f228":null,"f229":"","f230":null,"f231":"","f232":"","f233":null,"f234":"","f235":null,"f236":"","f237":null,"f238":"","f239":"","f240":"","f241":null,"f242":null,"f243":"","f244":"","f245":"","f246":null,"f247":"","f248":"","f249":null,"f250":"","f251":null,"f252":"","f253":"","f254":null,"f255":"","f256":"","f257":null,"f258":"","f259":"","f260":null,"f261":"","f262":"","f263":"","f264":null,"f265":"","f266":null,"f267":null,"f268":"","f269":"","f270":"","f271":"","f272":"","f273":null,"f274":null,"f275":"","f276":null,"f277":"","f278":"","f279":null,"f280":"","f281":"","f282":"","f283":null,"f284":null,"f285":"","f286":"","f287":null,"f288":null,"f289":"","f290":"","f291":"","f292":null,"f293":"","f294":null,"f295":"","f296":null,"f297":"","f298":null,"f299":null,"f300":null,"f301":null,"f302":null,"f303":null,"f304":null,"f305":null,"f306":null,"f307":null,"f308":null,"f309":null,"f310":null,"f311":null,"f312":null,"f313":null,"f314":null,"f315":null,"f316":null,"f317":null,"f318":null,"f319":null,"f320":null,"f321":null,"f322":null,"f323":null,"f324":null,"f325":null,"f326":null,"f327":null,"f328":null,"f329":null,"f330":null,"f331":null,"f332":null,"f333":null,"f334":null,"f335":null,"f336":null,"f337":null,"f338":null,"f339":null,"f340":null,"f341":null,"f342":null,"f343":null,"f344":null,"f345":null,"f346":null,"f347":null,"f348":null,"f349":null,"f350":null,"f351":null,"f352":null,"f353":null,"f354":null,"f355":null,"f356":null,"f357":null,"f358":null,"f359":null,"f360":null,"f361":null,"f362":null,"f363":null,"f364":null,"f365":null,"f366":null,"f367":null,"f368":null,"f369":null,"f370":null,"f371":null,"f372":null,"f373":null,"f374":null,"f375":null,"f376":null,"f377":null,"f378":null,"f379":null,"f380":null,"f381":null,"f382":null,"f383":null,"f384":null,"f385":null,"f386":null,"f387":null,"f388":null,"f389":null,"f390":null,"f391":null,"f392":null,"f393":"","f394":"","f395":null,"f396":"","f397":null,"f398":null,"f399":null,"f400":"","f401":"","f402":null,"f403":null,"f404":null,"f405":null,"f406":null,"f407":null,"f408":null,"f409":"S","f410":"N","f411":"","f412":"K","f413":0,"f414":350,"f415":"N","f416":"N","f417":null,"f418":"N","f419":"","f420":7,"f421":1940,"f422":null,"f423":0,"f424":0,"f425":null,"f426":"","f427":1,"f428":2,"f429":"1920-09-07","f430":0,"f431":3,"f432":6,"f433":null,"f434":0,"f435":"","f436":"","f437":"N","f438":5,"f439":1,"f440":0,"f441":"","f442":"E","f443":5,"f444":1,"f445":2,"f446":80,"f447":null,"f448":"I","f449":"N","f450":"A","f451":"","f452":"N","f453":null,"f454":"Y","f455":14,"f456":"","f457":"","f458":0,"f459":null,"f460":5,"f461":9,"f462":2,"f463":2,"f464":1,"f465":"","f466":0,"f467":0,"f468":0,"f469":0,"f470":0,"f471":0,"f472":4,"f473":5,"f474":1,"f475":1,"f476":0,"f477":0,"f478":0,"f479":0,"f480":19,"f481":0,"f482":2,"f483":0,"f484":0,"f485":52,"f486":627092,"f487":4,"f488":14,"f489":4,"f490":3,"f491":7,"f492":520,"f493":3,"f494":704678,"f495":74,"f496":281,"f497":520,"f498":0,"f499":390,"f500":945,"f501":2,"f502":3,"f503":2,"f504":107966,"f505":6,"f506":5,"f507":0,"f508":0,"f509":0,"f510":0,"f511":0,"f512":0,"f513":0,"f514":0,"f515":0,"f516":0,"f517":0,"f518":0,"f519":0,"f520":0,"f521":0,"f522":0,"f523":0,"f524":0,"f525":0,"f526":0,"f527":0,"f528":0,"f529":0,"f530":0,"f531":"","f532":"","f533":"","f534":"","f535":"","f536":"","f537":"N","f538":0,"f539":0,"f540":1,"f541":1,"f542":null,"f543":null,"f544":null,"f545":null,"f546":null,"f547":null,"f548":null,"f549":null,"f550":null,"f551":null,"f552":null,"f553":null,"f554":null,"f555":null,"f556":null,"f557":null,"f558":null,"f559":null,"f560":0,"f561":5,"f562":1,"f563":2,"f564":0,"f565":0,"f566":null,"f567":"","f568":"N","f569":null,"f570":null,"f571":null,"f572":null,"f573":null,"f574":"H","f575":"","f576":null,"f577":0,"f578":0,"f579":0,"f580":0,"f581":0,"f582":0,"f583":0,"f584":0,"f585":0,"f586":"","f587":"","f588":"","f589":"","f590":null,"f591":null,"f592":null,"f593":null,"f594":null,"f595":null,"f596":"","f597":"","f598":null,"f599":"","f600":"","f601":null,"f602":"","f603":"","f604":null,"f605":0,"f606":5,"f607":1,"f608":"Y","f609":"","f610":"","f611":"S","f612":3,"f613":1,"f614":null,"f615":"","f616":"","f617":0,"f618":0,"f619":null,"f620":null,"f621":null,"f622":null,"f623":"","f624":"U","f625":"K","f626":0,"f627":196608,"f628":43,"f629":"F","f630":"H","f631":43,"f632":null,"f633":"","f634":3,"f635":null,"f636":"","f637":"01","f638":"P","f639":"S","f640":null,"f641":0,"f642":"01","f643":"","f644":"Y","f645":"","f646":"","f647":"","f648":"","f649":"","f650":null,"f651":null,"f652":"","f653":"","f654":"","f655":"","f656":"","f657":"","f658":null,"f659":null,"f660":"","f661":null,"f662":"","f663":"","f664":"","f665":null,"f666":null,"f667":null,"f668":null,"f669":"","f670":null,"f671":"","f672":"","f673":null,"f674":"","f675":"","f676":null,"f677":"","f678":"","f679":"","f680":"","f681":null,"f682":null,"f683":"","f684":null,"f685":"","f686":"","f687":null,"f688":null,"f689":"","f690":"","f691":null,"f692":null,"f693":null,"f694":"","f695":null,"f696":"","f697":"","f698":"","f699":"","f700":"","f701":null,"f702":"","f703":"","f704":null,"f705":"","f706":"","f707":"","f708":"","f709":null,"f710":null,"f711":"","f712":null,"f713":"","f714":null,"f715":0,"f716":1,"f717":0,"f718":0,"f719":0,"f720":1,"f721":0,"f722":0,"f723":1,"f724":0,"f725":0,"f726":0,"f727":0,"f728":0,"f729":null,"f730":null,"f731":null,"f732":null,"f733":null,"f734":null,"f735":null,"f736":null,"f737":null,"f738":null,"f739":null,"f740":null,"f741":null,"f742":null,"f743":null,"f744":null,"f745":null,"f746":null,"f747":null,"f748":null,"f749":null,"f750":null,"f751":null,"f752":null,"f753":null,"f754":null,"f755":null,"f756":null,"f757":null,"f758":null,"f759":null,"f760":null,"f761":null,"f762":null,"f763":null,"f764":null,"f765":null,"f766":null,"f767":null,"f768":null,"f769":null,"f770":null,"f771":15,"f772":"Y","f773":"N","f774":null,"f775":"N","f776":"N","f777":null,"f778":"N","f779":"N","f780":"NY","f781":10021,"f782":3518,"f783":36,"f784":11,"f785":47229,"f786":"A04","f787":"B","f788":2,"f789":5,"f790":67,"f791":32,"f792":9969,"f793":0,"f794":65,"f795":"9","f796":74,"f797":2,"f798":100,"f799":61,"f800":"","f801":501,"f802":52,"f803":11,"f804":10,"f805":3,"f806":"N","f807":"N","f808":"N","f809":"C291","f810":"S","f811":1,"f812":550425,"f813":94,"f814":46,"f815":36,"f816":1,"f817":"A","f818":0,"f819":41,"f820":"W","f821":5600}
                at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:550)
                at org.apache.hadoop.hive.ql.exec.ExecMapper.map(ExecMapper.java:143)
                ... 8 more
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.ArrayIndexOutOfBoundsException: -128
                at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:737)
                at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
                at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
                at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)
                at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
                at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
                at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:83)
                at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
                at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
                at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:531)
                ... 9 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: -128
                at java.util.ArrayList.elementData(ArrayList.java:338)
                at java.util.ArrayList.get(ArrayList.java:351)
                at org.apache.hadoop.hive.serde2.binarysortable.BinarySortableSerDe.serialize(BinarySortableSerDe.java:661)
                at org.apache.hadoop.hive.serde2.binarysortable.BinarySortableSerDe.serialize(BinarySortableSerDe.java:485)
                at org.apache.hadoop.hive.ql.exec.ReduceSinkOperator.processOp(ReduceSinkOperator.java:276)
                at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
                at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
                at org.apache.hadoop.hive.ql.exec.GroupByOperator.forward(GroupByOperator.java:959)
                at org.apache.hadoop.hive.ql.exec.GroupByOperator.flush(GroupByOperator.java:926)
                at org.apache.hadoop.hive.ql.exec.GroupByOperator.processHashAggr(GroupByOperator.java:779)
                at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:722)
                ... 18 more 
```

# jfreechart - Jfree 使用自定义名称来分类

> ID：10992144
> 
> 赞同：1
> 
> 时间：2012-06-12T07:24:18.653
> 
> 标签：jfreechart, jspx, jfreereport

我对 Jfreechart 很陌生，请帮我找到解决方案，我正在使用 jfree 为具有特定代码名称（如 563,258.855 等）的类别绘制图表...所以我想将这些值分配为标签到域轴，但默认情况下它将 value1、value2、value3 等分配给类别。![现在看起来像这样](../Images/feadb83065ce79c76a5418a08d4b47e9.png)

但我想让它像下面这样 ![在此处输入图像描述](../Images/e719e1fabae706f79b42b16ff312a360.png)

这是我的代码，

```
final CategoryDataset dataset1 = DatasetUtilities.createCategoryDataset("Month to Date Occurences","value", data);  

JFreeChart dualchart = ChartFactory.createBarChart(
    "Top Ten Diagnostic Occurences",         // chart title
    "Category",                 // domain axis label
    "Score",                // range axis label
    dataset1,                    // data
    PlotOrientation.HORIZONTAL, // orientation
    true,                       // include legend
    true,
    false
);

CategoryPlot plot = dualchart.getCategoryPlot();
plot.setRangeAxisLocation(AxisLocation.BOTTOM_OR_LEFT);
plot.setBackgroundPaint(Color.WHITE);
plot.setRangeGridlinePaint(Color.black); 

BarRenderer renderer= (BarRenderer) plot.getRenderer();
renderer.setItemMargin(0.0);

CategoryAxis domainAxis = plot.getDomainAxis ();
domainAxis.setCategoryMargin(0.30); //distance between series
NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
rangeAxis.setRange(0.0, 100.0);
rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

return dualchart; 
```

非常欢迎您的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:17:55.683

您还没有包含代码，`dataset1`因此很难说出问题所在，但如果您使用这样的东西：

```
private static CategoryDataset createDataset() {
    DefaultCategoryDataset dataset = new DefaultCategoryDataset();
    dataset.addValue(15, "1", "451");
    dataset.addValue(12, "1", "851");
    dataset.addValue(10, "2", "362");
    dataset.addValue(5,  "2",  "142");   
    return dataset;
} 
```

你会得到一个这样的图表：

![在此处输入图像描述](../Images/948fe39dcbaa50c72dbf90541e015eae.png)

# iphone - 如何提高 NSXMLParser 性能

> ID：10992145
> 
> 赞同：1
> 
> 时间：2012-06-12T07:24:22.843
> 
> 标签：iphone

我正在开发一个`NSXMLParser`用于解析 XML 文件的应用程序。目前这需要 8 秒。但我的要求是在 5 秒内完成解析。如何提高解析器的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:30:33.340

任何一个：

1.  使用速度更快的手机
2.  使用更小的 XML
3.  使用更快的解析器： [XML 处理器的基准](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

我会说从简单的阅读 TBXML 似乎值得一试

# iphone - 找不到 -lidn 的库

> ID：10992147
> 
> 赞同：3
> 
> 时间：2012-06-12T07:24:24.770
> 
> 标签：iphone, xcode

我在项目的 Build Properties 中进行了一些更改，只是为了设置 libxml2 库的使用。我终于做到了，但是当我回来编译我的应用程序时，出现了这个错误：

找不到 -lidn 的库

我在我的项目中使用 XMPPFramework，并且需要 libdn。似乎找不到图书馆。有什么建议吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-05T09:30:05.733

如果你通过 CocoaPods 安装 XMPPFramework

1.  选择**构建设置**

2.  搜索**库搜索路径**

3.  添加**“$(PODS_ROOT)/XMPPFramework/Vendor/libidn”**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T16:27:44.370

单击`project target -> Build Settings`并搜索名为“ *Library Search Paths* ”的部分，单击并`+`添加`XMPPFramework Path/Vendor/libidn`并`Debug``Release`

# java - 即时压缩和序列化字符串

> ID：10992149
> 
> 赞同：3
> 
> 时间：2012-06-12T07:24:32.037
> 
> 标签：java, serialization, compression

我需要在键值存储中存储一个二进制对象（其中包含多个集合的 java 类）。该值的大小限制为 4K。我创建了基于[XStream](http://xstream.codehaus.org/)的序列化器和反序列化器，所以当我完成填充我的类成员时，我可以将它序列化为字符串或文件。在最坏的情况下，序列化的字符串/文件大小约为 30K。我设法获得良好的压缩率，因此压缩后我的文件约为 2K，符合要求。

**我的问题**：是否有任何有用的 java API\library\technique 可以：

1.  压缩字符串并序列化压缩对象。
2.  解压缩先前压缩的对象并从中创建一个常规字符串

我正在寻找不需要将序列化对象中间存储到文件以供以后压缩的单行程序。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:45:45.743

尝试`GZIPOutputStream`压缩字符串：

```
ByteArrayOutputStream out = new ByteArrayOutputStream();
Writer writer = new BufferedWriter(new OutputStreamWriter(new GZIPOutputStream(out)));
writer.write(string);
byte[] zipped = out.toByteArray(); 
```

并再次解压缩：

```
ByteArrayInputStream in = new ByteArrayInputStream(zipped);
BufferedReader reader = new BufferedReader(new InputStreamReader(new GZIPInputStream(in)));
string = reader.readLine(); 
```

# java - 将整数值保存到数据库中

> ID：10992152
> 
> 赞同：0
> 
> 时间：2012-06-12T07:24:50.280
> 
> 标签：java, database, sqlite

如何将`Integer`类型（不是`int`）保存到数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:42:16.293

使用普通的 JDBC，我会使用以下内容：

```
 Integer myInteger = ...;
 PreparedStatement ps = ...;
 if (myInteger == null) {
     ps.setNull(1, Types.INTEGER);
 } else {
     ps.setInt(1, myInteger); // will be autounboxed
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:37:23.680

[http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setInt(int](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setInt(int) , int)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:28:47.747

I think just use `Integer` is OK.Or use `intValue()` to convert it.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-12T07:33:31.447

根据您的数据库系统（mysql、postgre、...），整数类型将或不存在于您的数据库中。然后最好使用 java Integer 函数从您的数据库值中生成一个 Integer，这可能是 int 甚至 bigint，这取决于需要什么。

正如我在评论中所说，类似的东西`Integer myinteger = new Integer(yourdatabasevalue)`应该可以正常工作。

# javascript - 动态地将数据放入选择选项下拉列表（jQuery）

> ID：10992153
> 
> 赞同：3
> 
> 时间：2012-06-12T07:24:51.183
> 
> 标签：javascript, jquery, android, drop-down-menu

这是代码：这是我从 XML 中获取数据（这有效，已经在没有 jQuery 的情况下对其进行了测试）：

```
 <script>
        $(document).ready(function(){
            var select = $('#mySelect');

            $.ajax({
                type: "GET",
                url: "http://mobile.qmschrysant.nl/keuzemenu/keuzemenu.xml",
                dataType: "xml",
                success: function(xml) {
                $(xml).find('menuitem').each(function(){
                    var title = $(this).find('title').text();
                    select.append("<option/><option class='ddheader'>"+title+"</option>");
                        $(this).find('value').each(function(){
                        var value = $(this).text();
                        select.append("<option class='ddindent' value='"+ value +"'>"+value+"</option>");

                        });
                    });
                    select.children(":first").text("please make a selection").attr("selected",true);
                    select.trigger('updatelayout');
                }
            });
        });
     </script> 
```

这是我的选择选项（HTML）：

```
<label for="selectmenu" class="select">Kies planning:</label>
          <form>
            <select id="mySelect" >

                <option>loading</option>
            </select>
          </form> 
```

现在奇怪的是，当我包含这个 jQuery 脚本时：

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script> 
```

然后下拉列表看起来很棒，但不包含任何信息。
当我注释掉该行时，下拉列表看起来很正常，但现在它确实包含信息（所以这是证明，它确实有效）。

但是为什么当我包含 jQuery 行时它不起作用？我找不到问题。

（请参见图片以获得更好的解释） ![在此处输入图像描述](../Images/8c88a6abeb3ec193b14aa6e6806ec263.png)

编辑：所有包括我使用的：

```
<link href="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:06:16.500

你有两倍的 jquery 导入：

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script> 
```

删除最旧的（第二行）。

或者，更好的是，将两行都替换为：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

（在包含 jquery mobile 之前）

所以 ：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<link href="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css">
<script src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:46:53.283

OP“使用了最新的 jquery mobile.js，现在一切正常”。

这似乎是一个兼容性问题。

改变：

```
<script src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js" type="text/javascript"></script>
<link href="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"> 
```

到：

```
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js" type="text/javascript"></script>
<link href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" rel="stylesheet" type="text/css"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:55:56.700

这对我来说没有意义:(

第一个脚本需要 jQuery 才能工作，所以你已经包含了 jQuery。

和

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script> 
```

行不会改变下拉列表的外观。

# c# - 从具有相同列表的孩子的列表中查找 Max Id

> ID：10992157
> 
> 赞同：1
> 
> 时间：2012-06-12T07:24:57.300
> 
> 标签：c#, lambda

我有一个有孩子 [相同类型] 的人员列表。我从 xml 文件中获取列表。

**设想 ：**

Person : Id, Name, Gender, Age, Children [Class with fields]

如果 personList 有 1,2,5 个 ID，则
2 和 5 分别带有子 3,4 和 6,7,8。
我必须将最大 ID 设为 8。

如何使用 lambda 表达式从 PersonList 中获取 ID 的最大值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:27:59.500

您可以尝试使用[`Concat`](http://msdn.microsoft.com/en-us/library/bb302894.aspx)and的组合[`SelectMany`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)（假设它只嵌套了一层）：

```
var maxId = personList.Concat(personList.SelectMany(p => p.Children)).Max(p => p.Id); 
```

**更新**
如果您有多个嵌套级别，您还可以编写一个扩展方法来进行`SelectMany`递归：

```
public static IEnumerable<T> SelectManyRecursive<T>(this IEnumerable<T> source, Func<T, IEnumerable<T>> selector) {
    if (source == null) { yield break; }
    foreach (var item in source) {
        yield return item;
        foreach (var selected in selector(item).SelectManyRecursive(selector)) {
            yield return selected;
        }
    }
} 
```

这不处理循环引用，并且它的行为与`SelectMany`返回源集合本身中的项目不同（因此您可能想要更改名称），但否则我认为它可以完成工作。你可以很容易地使用它：

```
var maxId = personList.SelectManyRecursive(p => p.Children).Max(p => p.Id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:28:30.310

我通过添加另一个级别来稍微切换您的场景。如果这没有帮助，请发布您的数据对象的示例。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace App
{
    public enum ID{
        one, two, three, four, five, six, seven, eigth, nine, ten
    }

    public class Person
    {
        public ID id;
        public List<Person> children;
        public Person(ID id, List<Person> children)
        {
            this.id = id;
            this.children = children;
        }
    }

    class Program
    {
        private static List<Person> BuildScenario()
        {
            return new List<Person>{
                new Person(ID.one, new List<Person>()),
                new Person(ID.two, new List<Person>{
                    new Person(ID.three, new List<Person>{
                        new Person(ID.ten, new List<Person>())
                    }),
                    new Person(ID.four, new List<Person>())
                }),
                new Person(ID.five, new List<Person>{
                    new Person(ID.six, new List<Person>()),
                    new Person(ID.seven, new List<Person>()),
                    new Person(ID.eigth, new List<Person>())
                })
            };
        }

        static void Main(string[] args)
        {
            List<Person> scenario = BuildScenario();
            Console.WriteLine(CountIDs(scenario).ToString());
            Console.WriteLine(GetMaxID(scenario).ToString());
            while(true);
        }

        private static int CountIDs(List<Person> scenario)
        {
            int count = 0;
            foreach (Person person in scenario)
            {
                count += 1 + CountIDs(person.children);
            }
            return count;
        }

        private static ID GetMaxID(List<Person> scenario)
        {
            ID maxid = 0;
            foreach(Person person in scenario)
            {
                ID childmax = GetMaxID(person.children);
                if (person.id > maxid) maxid = person.id;
                if (childmax > maxid) maxid = childmax;

            }
            return maxid;
        }
    }
} 
```

# iphone - 需要从 iPhone 中的照片中移除红眼的示例代码

> ID：10992161
> 
> 赞同：-2
> 
> 时间：2012-06-12T07:25:21.753
> 
> 标签：iphone, ios, xcode

![在此处输入图像描述](../Images/f4f5fc71d289a5b5ad2a5482138d3eec.png)

我需要那样。给我一些示例代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:45:32.530

[Red-iGone](https://github.com/teamdevify/Red-iGone.git)

希望。它对你有用。！！

# c# - 使用互操作创建 Excel 文件时防止 Excel 打开

> ID：10992163
> 
> 赞同：2
> 
> 时间：2012-06-12T07:25:27.823
> 
> 标签：c#, excel, office-interop

大家好，我正在使用 Microsoft office interop 创建一个 excel。它成功创建了文件。但问题是，当它创建一个文件时，它只是打开 excel 将值添加到 excel 中并将其保存在指定的名称中。任何意外键入时间结果导致异常。我从数据库中创建了近 75 个包含许多行的文件，因此需要时间。在处理过程中我无法执行任何任务，因为如果在 excel 中键入它会创建异常。有什么方法可以运行该过程在后台，以便不会为每个文件创建打开 excel 应用程序。

```
Excel.Application oXL;
Excel.Workbook oWB;
Excel.Worksheet oSheet;
Excel.Range oRange;

// Start Excel and get Application object. 
oXL = new Excel.Application();

// Set some properties 
oXL.Visible = true;
oXL.DisplayAlerts = false;

// Get a new workbook. 
oWB = oXL.Workbooks.Add(Missing.Value);

// Get the active sheet 
oSheet = (Excel.Worksheet)oWB.ActiveSheet;
oSheet.Name = "Sales";

// Process the DataTable 
// BE SURE TO CHANGE THIS LINE TO USE *YOUR* DATATABLE 
DataTable dt = dtt;

int rowCount = 1;
foreach (DataRow dr in dt.Rows)
{
    rowCount += 1;
    for (int i = 1; i < dt.Columns.Count + 1; i++)
    {
        // Add the header the first time through 
        if (rowCount == 2)
        {
            oSheet.Cells[1, i] = dt.Columns[i - 1].ColumnName;
        }
        oSheet.Cells[rowCount, i] = dr[i - 1].ToString();
    }
}

// Resize the columns 
//oRange = oSheet.get_Range(oSheet.Cells[1, 1],
//              oSheet.Cells[rowCount, dt.Columns.Count]);

oRange = oSheet.Range[oSheet.Cells[1, 1], oSheet.Cells[rowCount, dt.Columns.Count]];
oRange.EntireColumn.AutoFit();

// Save the sheet and close 
// oSheet = null;
oRange = null;

oWB.SaveAs("" + username + " .xls", Excel.XlFileFormat.xlWorkbookNormal,
    Missing.Value, Missing.Value, Missing.Value, Missing.Value,
    Excel.XlSaveAsAccessMode.xlExclusive,
    Missing.Value, Missing.Value, Missing.Value,
    Missing.Value, Missing.Value);
oWB.Close(Missing.Value, Missing.Value, Missing.Value);
oWB = null;
oXL.Quit();

// Clean up 
// NOTE: When in release mode, this does the trick 
GC.WaitForPendingFinalizers();
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:57:04.897

默认情况下，通过 Interop 的 Excel 打开为不可见。
是您的代码改变了 Excel 的可见性。删除线

```
oXL.Visible = true; 
```

或设置为假

```
oXL.Visible = false; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T07:41:20.727

试试这个...

// 启动 Excel 并获取 Application 对象。oXL = 新 Excel.Application { **Visible = false** };

*   OR - // 设置一些属性 oXL.Visible = **false** ;

# php - 将具有多个日期的字符串转换为 dd-mm-YYYY 格式

> ID：10992166
> 
> 赞同：0
> 
> 时间：2012-06-12T07:25:36.390
> 
> 标签：php, javascript, sql

我有一个关系为 1: N 的数据库表，其中`N`表示一个事件的多个日期。带有日期的列是`DateTime`类型，我想保留该`Time`选项以供以后使用，但如果我必须将其更改为类型，它不会那么糟糕`Date`。

当我必须在某些`GUI`. 我使用该函数获取日期，`GROUP_CONCAT`这意味着在 JavaScript 中，我使用一个以逗号分隔的值表示不同日期的字符串进行操作，该字符串现在采用默认 SQL`DateTime`格式 - `YYYY-mm-dd hh:mm:ss`。

我使用该`split(',')`函数来获取每个日期时间值，我可以做的是将 SQL 列的类型更改为`Date`so 当我在 JavaScript 中拆分字符串以得到`YYYY-mm-dd`值时。`dd-mm-YYYY`对于`GUI`. _

我不知道如何在这里进行。我有两个主要选择：

第一：也许有一种`dd-mm-YYYY`在 SQL 中使用格式的方法可以解决所有问题。

第二：JavaScript中的某种（复杂？！？）字符串操作将日期字符串拆分为具有多个元素的数组，然后尝试按照我需要的方式格式化每个元素。

老实说 - 我想避免第二种选择，但不知道第一种是否可能，也许还有另一种我没有想到的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:36:18.570

尝试这个..

```
SELECT GROUP_CONCAT(DATE_FORMAT( date_time_column, '%d-%m-%Y' )) FROM test_table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:45:02.747

首先，我建议在代码中的任何地方都使用本机日期/日期时间格式，并且仅在您真正想要显示它的地方使用本地化变体，例如 dd-mm-yyyy。第一个原因：它在您的代码中是一致的。第二个原因：排序。

例子：

```
2012-03-01    >    01-03-2012
2012-05-12    >    12-05-2012
2012-01-03    >    03-01-2012 
```

按您将获得的本机格式排序...

```
1: 2012-01-03
2: 2012-03-01
3: 2012-05-12 
```

按输出格式 dd-mm-yyyy 排序，它看起来像这样......

```
1: 01-03-2012
2: 03-01-2012
3: 12-05-2012 
```

...我怀疑这是大多数人想要的。

**通过 SQL 调整输出**

您可以更改 SELECT-query 中的输出，大多数 RDBMS 都为此提供功能。例如，在 MySQL 中它是[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)，它看起来像这样：

```
SELECT DATE_FORMAT(NOW(), '%d-%m-%Y'); 
```

**通过 SQL 调整输出**

您还可以使用 php 更改输出，[此处](https://stackoverflow.com/questions/4358143/change-the-format-of-a-date-in-php)对此进行了说明。

**通过 JavaScript 调整输出**

在 JavaScript 中也不难做到这一点：[这](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)是一篇很棒的 SO 帖子，详细解释了它。

# extjs - ExtJs 4 - 在同一个网格中拖放

> ID：10992180
> 
> 赞同：7
> 
> 时间：2012-06-12T07:26:53.533
> 
> 标签：extjs, extjs4

您如何通过拖放对 ExtJs 4 中的网格行进行重新排序？这可能吗？我看到 ExtJs 示例页面中有一个在 2 个网格之间拖放网格行的示例，但我似乎无法弄清楚如何使用它并使其仅在一个网格中工作。

我会感谢你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T08:22:16.243

好的，所以我刚刚想通了。实际上很简单......我所需要的只是简单地添加

```
plugins: {
    ptype: 'gridviewdragdrop'
} 
```

到网格的 viewConfig ，它工作得很好。

请不要低估这个问题。很抱歉，在此处发布问题之前我没有更多地搜索答案，不得不回答我自己的问题，但希望如果寻找相同问题的解决方案，答案将对其他人有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T21:25:46.357

```
plugins: {
    ptype: 'gridviewdragdrop',dragText:'Reorder Rows'
},
// to save position  
listeners:{
    drop:function(){
        Ext.Ajax.request({
            url:'url-to-save-position',
            params:{
                value:Ext.encode(Ext.pluck(grid.getStore().data.items, 'data'))
            }
        })
    }
} 
```

# c# - 32/64 位进程的 int 行为？

> ID：10992182
> 
> 赞同：5
> 
> 时间：2012-06-12T07:27:06.553
> 
> 标签：c#, .net, .net-4.0, int

我是一个 64 位的进程，我的`int`大小是 8 个字节。

我正在引用一个编译为 32 位的 dll。

这个dll有一个接受`int`参数的函数。

会发生什么？

我要发送`8 byte`到`4 byte`“容器”？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T07:31:06.743

不，在 64 位/C# 中，an`int`仍然是 4 个字节。

**在**C# 中，`int`总是只是一个别名**`global::System.Int32`**

 **将改变的是*参考*大小和*指针*大小，但这一切都被 IL 抽象出来了——什么都不需要改变。但请注意，CLI 只会是 32 位**xor** (nand?) 64 位。您可能需要其中之一成为“任何 CPU”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T07:32:25.577

它总是映射到`System.Int32`因此只需要 4

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T07:32:38.977

在 c# 中，int 在 32 位和 64 位程序集中的大小相同。`int`or`Int32`始终为 32 位，而`long`or`Int64`始终为 64 位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T07:51:57.680

`int`在 C# 中总是 32 位（4 字节），但在 C++ 等其他一些语言中则不是。 `System.IntPtr`在 x86 机器上是 4 个字节，在 64 位操作系统上是 8 个字节。如果您想要操作系统依赖的整数类型，请使用此选项。**

# asp.net-mvc-3 - RequiredIf validation in asp.net mvc3

> ID：10992191
> 
> 赞同：0
> 
> 时间：2012-06-12T07:27:51.183
> 
> 标签：asp.net-mvc-3

I had a view model in that viewmodel i created two different instances using same model like this:

```
 public ClaimViewModel()
    {
        engineClaim = new ClaimModel();

        boatClaim = new ClaimModel();
    }

    public ClaimModel engineClaim { get; set; }

    public ClaimModel boatClaim { get; set; } 
```

I had properties in ClaimModel like this:

```
 [Required]
    public string Complaint { get; set; }

    [RequiredIf("isEngineClaim", true , ErrorMessage = "Required")]
    public string Cause { get; set; }

     [Required]
    public string Correction { get; set; }

    public bool isEngineClaim { get; set; } 
```

And in controller i am loading the index page like this

```
 public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        ClaimViewModel claim = new ClaimViewModel();

        claim.engineClaim = new Models.ClaimModel();

        claim.engineClaim.isEngineClaim = true;

        claim.boatClaim = new Models.ClaimModel();

        claim.boatClaim.isEngineClaim = false;

        return View("Index", claim);
    } 
```

Now my problem is the requiredif validation is not working though the 'isEngineClaim' property is different for two instances. I am [following this link](http://blogs.msdn.com/b/simonince/archive/2011/02/04/conditional-validation-in-asp-net-mvc-3.aspx) And moreover i had placed the hidden field of 'isEngineClaim' in my view also. But the requiredifvalidation is not working can anyone suggest me the solution.

# php - 使用递归 PHP 组织 mySQL 数据

> ID：10992200
> 
> 赞同：1
> 
> 时间：2012-06-12T07:28:05.577
> 
> 标签：php, mysql, recursion, if-statement, adjacency-list

我正在为客户创建一份问卷，要求将问题按 3 层级别组织。我已经成功创建了 UI，但是在过去的 3 个小时里我一直在尝试从数据库中提取数据，以使所有内容都加载到正确的位置。数据库是由客户端组织的，所以我无法控制它：

```
id    description    parentId    about
1      Level 1        0           This is the top level or in my case tab1
2      Level 2        0           This is the next tab in the top level
3      Level 1a       1           This is the first category under tab1
4      Level 1b       1           This is the next category under tab1
5      Level 1a1      3           This is the content under the first category of tab1 
```

因此，任何 parentId 为 0 的内容都是顶层，并且将包含 parentId 为 1 的任何第二级内容，依此类推。令人困惑的是，我几乎无法理解这一点，但这就是我被告知这样做的方式。

什么方法是执行这样的事情的最佳方式？下面附上了我用作参考的另一个问题的示例（尽管不起作用）

```
foreach (mysql_query("SELECT * FROM pB_test ORDER BY id ASC") as $row) {
  $menuitem = array_merge(array(), $row);
  $menuLookup[$menuitem['id']] = $menuitem;
  if ($menuitem['parent'] == null) {
    $menuitem['path'] = "/" . $menuitem['name'];
    $menu[] = $menuitem[];
  } else {
    $parent = $menuLookup[$menuitem['parent']];
    $menuitem['path'] = $parent['path'] . "/" . $menuitem['name'];
    $parent['menu'][] = $menuitem;
  }
} 
```

任何帮助将不胜感激。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:35:56.960

如果你正好有 3 个级别，那么你可以试试这个：

[http://sqlfiddle.com/#!2/70e96/16](http://sqlfiddle.com/#!2/70e96/16)

```
(
  SELECT 1 AS lvl,
         top_level.description AS o1, top_level.id AS id1,
                          NULL AS o2,         NULL AS id2,
                          NULL AS o3,         NULL AS id3,
         top_level.*
  FROM   node AS top_level
  WHERE  top_level.parentId = 0
)UNION ALL(
  SELECT 2 AS lvl,
         top_level.description      AS o1, top_level.id      AS id1,
         category_level.description AS o2, category_level.id AS id2,
                               NULL AS o3,              NULL AS id3,
         category_level.*
  FROM       node AS top_level
  INNER JOIN node AS category_level ON category_level.parentId = top_level.id
  WHERE      top_level.parentId = 0
)UNION ALL(
  SELECT 3 AS lvl,
         top_level.description      AS o1, top_level.id      AS id1,
         category_level.description AS o2, category_level.id AS id2,
         last_level.description     AS o3, last_level.id     AS id3,
         last_level.*
  FROM       node AS top_level
  INNER JOIN node AS category_level ON category_level.parentId = top_level.id
  INNER JOIN node AS last_level ON last_level.parentId = category_level.id
  WHERE      top_level.parentId = 0
)
ORDER BY o1,o2,o3; 
```

我`lvl`在选择中添加了一个字段，每个级别都有不同的值。还添加了 o1,o2,o3 以便很好地排序嵌套级别，当然您可能还有其他需求。您可以在 PHP 中处理所有行，例如将它们分成 3 个数组（每个级别一个），或者可以通过 id 创建一个查找表等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:06:47.203

我也有同样的问题，但经过大量的谷歌搜索和stackoverflowing :-) 我找到了我的答案......这是我的编码方式。

```
function showComments($parent = 0)
{
$commentQuery = "SELECT * FROM comment WHERE parent = ".mysql_real_escape_string($parentId);
$commentResult = mysql_query($commentQuery)

while ($row = mysql_fetch_array($commentResult))
{
echo '[Table containing comment data]';
showComments($row['commentID']);
}
}

showComments(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:21:41.490

如果您正在使用外部数据库，那么在 PHP 中这样做可能是值得的，而不是 SQL。我没有对以下内容进行基准测试，因此请尝试使用您的数据，看看性能是否有问题。

您可以自己选择如何处理孤立记录（引用不再存在的 parentID）。

像这样在 PHP 中进行排序要求您事先拥有所有数据，因此请使用类似 PDO 的`fetchAll(PDO::FETCH_ASSOC)`方法，这应该会产生如下结果：

```
$data_from_database = array(
    array("id" => 1, "parentId" => 0, "description" => "Level 1"),
    array("id" => 2, "parentId" => 1, "description" => "Level 1a"),
    array("id" => 3, "parentId" => 1, "description" => "Level 1b"),
    array("id" => 4, "parentId" => 0, "description" => "Level 2"),
    array("id" => 5, "parentId" => 2, "description" => "Level 1a1"),
    array("id" => 6, "parentId" => 5, "description" => "Level 1a11a"),
    array("id" => 7, "parentId" => 5, "description" => "Level 1a11b"),
    array("id" => 8, "parentId" => 9, "description" => "Level 3"),
); 
```

首先，您需要将主键 (ID) 作为数组的键。下面还将键“children”和“is_orphan”添加到每条记录。

```
$data_by_id = array();
foreach($data_from_database as $row)
    $data_by_id[$row["id"]] = $row + array(
        "children" => array(), 
        "is_orphan" => false
    ); 
```

这看起来像这样：

```
$data_from_database = array(
    1 => array("id" => 1, "parentId" => 0, "description" => "Level 1", 
               "children" => array(), "is_orphan" => false),
    ...
 ); 
```

现在，它变得很棘手：我们将遍历数组并添加引用。

```
foreach($data_by_id as &$row)
{
    if($row["parentId"] > 0)
    {
        if(isset($data_by_id[$row["parentId"]]))
            $data_by_id[$row["parentId"]]["children"][] = &$row;
        else
            $row["is_orphan"] = true;
    }
}
unset($row); // Clear reference (important). 
```

最后一步是清理数组的“根”。它将包含对重复行的引用。

```
foreach($data_by_id as $id => $row)
{
    // If you use this option, you'll remove
    // orphaned records.
    #if($row["parentId"] > 0)
    #    unset($data_by_id[$id]);

    // Use this to keep orphans:
    if($row["parentId"] > 0 AND !$row["is_orphan"])
        unset($data_by_id[$id]);
} 
```

在每一步之后使用`print_r($data_by_id)`，看看会发生什么。

如果这被证明是一项耗时的操作，请尝试通过仅执行`SELECT id, parentId FROM ...`然后获取元数据（例如`description`. 您还可以将结果存储在 Memcache 中或序列化到数据库中。

# excel - Write Excel Addin with VBA and then Put a button that trigger it

> ID：10992205
> 
> 赞同：4
> 
> 时间：2012-06-12T07:28:55.430
> 
> 标签：excel, vba, add-in, ribbon

I have written a simple excel add-in with VBA, it contains a form and related codes. after saving it as add-in and then installing it in Excel, nothing happened!

I need to put a button somewhere in ribbons that trigger my add-in, you know like "Solver". I really need it, pleas tell me how.

I really appreciate any suggestions.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T01:56:11.027

试试这个，需要添加到您的加载项中，无论是在模块中还是在 ThisWorkbook 中。

```
Private Const Button as String = "SomeName"

Sub Auto_Open   'Or Private Sub Workboo_Open() in ThisWorkbook
Dim CmdBar as CommandBar
Dim CmdBarMenu as CommandBarControl
Dim CmdBarMenuItem as CommandBarControl

Set CmdBar = Application.CommandBars("Worksheet Menu Bar")
Set CmdBarMenu = CmdBar.Controls("Tools")   ' Index 6

On Error Resume Next
   Application.DisplayAlerts = False
   CmdBarMenu.Controls(Button).Delete 'Just in case a button with same name already exists
   Application.DisplayAlerts = True
On Error GoTo 0

Set CmdBarMenuItem = CmdBarMenu.Controls.Add(Type:=msoControlButton)
With CmdBarMenuItem
     .Caption = Button
     .OnAction = "MainSub"    'Name of the sub it will call when button is pushed
End With

End Sub 
```

确保删除关闭 Excel 的按钮，否则每次打开插件时都会添加一个额外的按钮。

```
Sub Auto_Close 'Or Private Sub Workbook_BeforeClose(Cancel As Boolean) in ThisWorkbook
Dim CmdBar as CommandBar
Dim CmdBarMenu as CommandBarControl

Set CmdBar = Application.CommandBars("Worksheet Menu Bar")
Set CmdBarMenu = CmdBar.Controls("Tools")   ' Index 6

On Error Resume Next
   Application.DisplayAlerts = False
   CmdBarMenu.Controls(Button).Delete
   Application.DisplayAlerts = True
On Error GoTo 0

End Sub 
```

您创建的想要从按钮运行的子。

```
Public Sub MainSub
MsgBox("Hello")
End Sub 
```

您还可以在加载项功能区中添加一个列表框以容纳多个按钮。首先创建一个 MenuItem 作为 type:=msoControlPopup 然后在弹出窗口中添加上面的按钮。

除了这个 VBA 代码之外，您还可以更轻松地转到文件 -> 选项 -> 自定义功能区并添加带有新组的新选项卡并将宏分配给该组。但这仅对您有用，上面的代码将允许任何人安装插件并在打开时自动设置一个按钮。

希望这能回答你的问题。

# java - 可定制的静态 Java 调用图生成器？

> ID：10992207
> 
> 赞同：2
> 
> 时间：2012-06-12T07:29:03.550
> 
> 标签：java, profile, graphviz, dfa, call-graph

我必须重构和维护一堆看起来很糟糕的 Java 类。许多具有以下实现模式

```
class Machine {
    public int advance(int state) {
        switch(state) {
        case 7:  return step_7();
        case 13: return step_13();
        case 4:  return step_4();
        }
    }
    private int step_7() {
        if(something) return 13; else return 4;
    }
    private int step_13() {
        ...
        return 4;
    }
    private int step_4() {
        if(miep) return 7;
        ...
        return 13;
    }
} 
```

从这里我想生成一个图（使用 Graphviz 和`dot`）——有点像“静态调用图”，但不完全是。

除了使用 Perl 或 Python 自己解析 Java 代码之外，我在这里玩游戏如何自动执行此操作。

我真正想要的是拥有一个*抽象语法树*（AST）或类似的东西，我可以浏览并同时打印`dot`-code。

*   **如何在这里生成可遍历的 AST？**我想遍历将在 Java 中完成，但如果输出是任何文本表示形式，那就没问题（`gprof`想到这里）。
*   **任何其他方法，不使用 AST？**也许我只是个盲人，有一种更好、更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T11:52:30.497

周围有多种 Java 解析器可以生成 AST：

*   [日食 JDT](http://www.eclipse.org/jdt/)
*   [ANTLR](http://www.antlr.org)
*   （我们的）[DMS 软件再造工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)

但是在处理真正的计算机语言时，AST 是远远不够的。例如，要确定调用站点可能调用的方法，您需要全名和类型解析，以便您可以准确地确定源文件中的数千个*foo中的**哪个* **foo**可能被调用。由于其复杂的查找规则，这对于 Java 来说并不容易计算。有关此主题的更多详细信息，请参阅我关于[解析后的生活](http://www.semanticdesigns.com/Products/DMS/LifeAfterParsing.html)的文章。除非您不关心答案的准确性，否则您不太可能仅通过使用 Python 或 Perl 来轻松复制这些功能。Eclipse JDT 可能有名称解析；我不知道。ANTLR Java 解析器没有；他们只是解析。

 *DMS 的 Java 前端具有 Java 的全名和类型解析。要静态确定您的调用图，您基本上需要一个[指向](https://stackoverflow.com/a/10986814/120163)分析；每个包含任何类型对象的字段本质上都是一个指针，您想知道每个指针，特别是它可能选择哪些对象，然后您需要构造一个（全局）调用图来获取您想要的基本信息。DMS 为计算各种[控制和数据流分析提供支持](http://www.semanticdesigns.com/Products/DMS/FlowAnalysis.html); Java 前端提供基本的流事实，它将计算本地数据流分析。要获得指向分析，您必须在 DMS 的帮助下组装这些事实，然后构建该调用图。我们还没有为 Java 使用 DMS，但我们为 C 大规​​模使用（一个系统中有 2600 万行），Java 的类似物将非常相似，并使用大多数相同的 DMS 机制；一旦您进行了指向分析，调用图的构建就相当容易了。我们已将此类图导出为 DOT 图；您需要过滤它们以获得 DOT 实际负担得起的子图。

您可能能够从类二进制分析文件（例如[Wala](http://wala.sourceforge.net) ）中收集流分析事实。您仍将面临构建指向分析和全局调用图的问题。我记得瓦拉在这里有某种帮助，但我不记得是什么。

您也许可以使用[分析器工具](http://www.semanticdesigns.com/Products/Profilers/JavaProfiler.html)收集动态构建的调用图。除非您在分析过程中仔细运用所有系统功能，否则这样的调用图可能非常不完整；这很难做到。

最终，您可能想要更改您的代码。也许你想内联你的**stepN**函数。也许你想手工完成，但如果你的代码充满了这样的东西，也许你想要自动化。在这里，像 DMS 这样的工具提供了源到源的转换，从而实现了这种自动代码更改。瓦拉在这里帮不了你。*

# c# - 使用 itextsharp 以 pdf 格式打印 icard

> ID：10992216
> 
> 赞同：1
> 
> 时间：2012-06-12T07:29:37.847
> 
> 标签：c#, asp.net, pdf, itextsharp

我想创建一个显示 Icard 的 PDF 文件。

以下是代码：

```
iTextSharp.text.Font custFont = new iTextSharp.text.Font() { Size=6f};
int borderSize = 1;
Document IcardDoc = new Document(PageSize.HALFLETTER);
PdfWriter.GetInstance(IcardDoc, Response.OutputStream);
IcardDoc.Open();

PdfPTable icardTable = new PdfPTable(2);
iTextSharp.text.Image logoImage = iTextSharp.text.Image.GetInstance(Server.MapPath("~/images/logo.jpg"));
logoImage.WidthPercentage = 15f;
PdfPCell cell = new PdfPCell(logoImage, false);
cell.PaddingLeft = 10f;
cell.PaddingTop = 10f;
cell.PaddingBottom = 10f;
cell.PaddingRight = 10f;
cell.Colspan = 2;
cell.Border = 0;
cell.HorizontalAlignment = 1;
icardTable.AddCell(cell);
icardTable.AddCell(new PdfPCell(new Phrase("Name:", custFont)) { Border = borderSize });
icardTable.AddCell(new PdfPCell(new Phrase(student.firstname + " " + student.lastname, custFont)) { Border = borderSize }); 
```

打印文档尺寸为高 8.5 厘米，宽 5.4 厘米。

所以需要以这种方式适应它，是否有任何解决方案，因为上面的代码不适合页面上的表格并且尺寸合适？

任何其他格式也可以像 word 等一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:30:56.387

想出了解决方案：

```
Document IcardDoc = new Document(new Retangele(200f, 315f),35f,35f,0f,0f); 
```

并相应地调整表格的宽度：

```
PdfPTable icardTable = new PdfPTable(2);
icardTable.WidthPercentage = 140f; 
```

将表格完全放在页面上，如果减小矩形`width`则增加表格`WidthPercentage`，反之亦然。`Document`您还需要注意在类构造函数中定义为 35f 的左右边距

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-02T09:01:14.703

```
var pgSize = new iTextSharp.text.Rectangle(1042, 651);
var doc = new iTextSharp.text.Document(pgSize, 0, 0, 0, 0); 
```

# php - 查询字符串中的“http://”不起作用

> ID：10992219
> 
> 赞同：0
> 
> 时间：2012-06-12T07:30:07.717
> 
> 标签：php, .htaccess, mod-rewrite

更新：

我在子域中进行了测试 - 没有 .htaccess 和 PHP。我创建了一个`index.html`并尝试访问`/?p=http:/`和`/?p=http://`。我得到了这个错误`/?p=http://`

```
Forbidden

You don't have permission to access / on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.

Apache Server at test.example.com Port 80 
```

这排除了任何 PHP 或 mod_rewrite 问题。阿帕奇有什么问题？

案例 1（不起作用）：mysite.com?p=http://

案例2（作品）：mysite.com?p=http://

如果查询字符串中有`http://`或`https://`或`ftp://`，即使我对其进行了编码，也会出现错误。我有一个`index.php`（入口脚本）和一个`test.php`（用于测试此错误）。如果我在查询字符串中访问 URL（通过`index.php`），即使有其他参数，该变量也会为空。如果我访问，我会被重定向（URL 没有变化）并出现错误（框架处理无效请求）。用其他东西替换后，一切正常 -显示它的含义，所有其他请求都被填充。`http://``$_GET``test.php?p=http://``index.php``http://``test.php``index.php``$_GET`

我只是在移动到新主机（hostdime 到 hostgator）后才注意到这个错误。我无法在其他任何地方（旧主机，本地服务器）重现这个。

谢谢你。

我的 .htaccess 文件，去掉了一些不相关的代码。

```
# Use PHP 5.3
AddType application/x-httpd-php53 .php

# ----------------------------------------------------------------------
# Start rewrite engine
# ----------------------------------------------------------------------

<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On

    # removes www.
    # ------------------------------------------------------------------
    RewriteCond %{HTTPS} !=on
    RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
    RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]

    # rewrite "domain.com/foo -> domain.com/foo/"
    # ------------------------------------------------------------------
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/|#(.*))$
    RewriteRule ^(.*)$ /$1/ [R=301,L]

    # Yii specific rewrite
    # ------------------------------------------------------------------
    # if a directory or a file exists, use it directly
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    # otherwise forward it to index.php
    RewriteRule . index.php 
</IfModule>

# without -MultiViews, Apache will give a 404 for a rewrite if a folder of the same name does not exist 
# ------------------------------------------------------------------
Options -MultiViews 

# ----------------------------------------------------------------------
# UTF-8 encoding
# ----------------------------------------------------------------------

# Use UTF-8 encoding for anything served text/plain or text/html
AddDefaultCharset utf-8

# Force UTF-8 for a number of file formats
AddCharset utf-8 .html .css .js .xml .json .rss .atom

# ----------------------------------------------------------------------
# Gzip compression
# ----------------------------------------------------------------------

<IfModule mod_deflate.c>
...
</IfModule>

<IfModule mod_expires.c>
...
</IfModule>

<IfModule mod_autoindex.c>
    Options -Indexes
</IfModule>

# Block access to "hidden" directories whose names begin with a period. This
# includes directories used by version control systems such as Subversion or Git.
<IfModule mod_rewrite.c>
    RewriteCond %{SCRIPT_FILENAME} -d
    RewriteCond %{SCRIPT_FILENAME} -f
    RewriteRule "(^|/)\." - [F]
</IfModule>

# Increase cookie security
<IfModule php5_module>
    php_value session.cookie_httponly true
</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:04:08.000

所以显然这是主机的问题。我联系了 HostGator 寻求帮助，他们说这是一个 mod_security 问题。如果您在尝试解释时遇到困难，请告诉他们在您提供的链接上运行 apachetail 命令。

这些链接可能会对您有所帮助

[http://forums.hostgator.com/mod-security-and-403-errors-t71394.html](http://forums.hostgator.com/mod-security-and-403-errors-t71394.html)

[http://www.codingforums.com/showthread.php?t=233958](http://www.codingforums.com/showthread.php?t=233958)

[http://www.codingforums.com/showthread.php?t=244525](http://www.codingforums.com/showthread.php?t=244525)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T01:41:55.360

我对 HostGator 也有类似的问题。您可以通过实时聊天询问他们的技术支持，将您想要将 url 放在查询字符串中的域名列入白名单。Dalton Tan 提供的资源很好读，尤其是来自 HG 论坛的第一个资源。

# java - 使用gradle构建spring3框架时失败

> ID：10992221
> 
> 赞同：1
> 
> 时间：2012-06-12T07:30:16.870
> 
> 标签：java, spring, ubuntu, gradle

我尝试在 ubuntu 12.04 中使用 gradle 构建 Spring 3 框架。但是在构建方面进行时出现错误。错误如下：

```
spring-aspects:compileJava
Download http://repo.springsource.org/libs-release/org/aspectj/aspectjtools/1.6.12/aspectjtools-1.6.12.jar
[ant:iajc] <Unknown> [warning] Found @DeclareAnnotation while current release does not support it (see 'org.aspectj.weaver.bcel.AtAjAttributes')
[ant:iajc]  
:spring-aspects:classes
:spring-aspects:jar
:spring-expression:javadoc
/home/hendri/spring-framework/spring-expression/src/main/java/org/springframework/expression/spel/ast/OpMultiply.java:28: error: unmappable character for encoding UTF8
 * <p>If any of the operands is of a reference type, unboxing conversion (�5.1.8) is performed. Then:<br>
                                                                          ^
1 error

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':spring-expression:javadoc'.
> Javadoc generation failed.

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 24 mins 10.5 secs 
```

有人可以帮我解决这个错误并构建 spring 3 框架吗？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:25:48.253

尝试更新 Spring 代码。如果这不起作用，请查看您编译的编码是什么。

# javascript - 如何解决时间正则表达式

> ID：10992223
> 
> 赞同：0
> 
> 时间：2012-06-12T07:30:31.047
> 
> 标签：javascript, regex, validation

在审查[了 Amra 的时间验证问题后](https://stackoverflow.com/questions/2048460/javascript-function-to-validate-time-0000-with-regular-expression)

我已经为我的需要创建了一个正则表达式

> var re = /^\s*([01]?\d|1[0-2]):?([00,30]\d)\s*$/;

我的意图是只允许一个小时和半小时的间隔时间

即：“12:00”、“01:00”、“12:30”、“01:30”等

这个正则表达式几乎可以工作，它在“01:10”时返回假，但当我输入“01:01”......“01.09”时它返回值，它必须是假的。

请帮我

请详细描述这个正则表达式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:32:56.857

`[00,30]`不做你认为它做的事。`[]`正则表达式中的组是*字符类*- 可以匹配的字符集，例如`[a-z]`匹配单个小写字母，而不是字符串“az”。

试试这个：

```
var re = /^\s*(0?\d|1[0-2]):?(00|30)\s*$/; 
```

`(00|30)`匹配其中一个`00`或`30`没有其他 -`|`是正则表达式“或”运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:51:16.820

如果您想允许 24 小时的时间，您可以将 Amber 的答案稍微更改为：

```
/^\s*([0-1]?\d|2[0-3]):?(00|30)\s*$/ 
```

# windows - 使用 Windows 线程时，是否可以指定一个缓冲区用于线程的堆栈，类似于 pthread_attr_setstack()？

> ID：10992231
> 
> 赞同：2
> 
> 时间：2012-06-12T07:30:43.897
> 
> 标签：windows, multithreading, winapi, pthreads

pthreads 允许用户提供一块内存用于线程堆栈：

```
size_t stack_size = 1024*1024*4;
void *stack = malloc( stack_size );
pthread_attr_t attributes;
pthread_attr_init( &attributes );
pthread_attr_setstack( &attributes, stack, stack_size );
pthread_t thread_id;
pthread_create( &thread_id, &attributes, worker_function, NULL 
```

Windows 线程是否提供类似的功能？[CreateThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453%28v=vs.85%29.aspx)的第二个参数允许指定堆栈的最小大小，但我看不到指定要使用的缓冲区地址的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:24:41.067

您不能像 Jerry Coffin 在评论中提到的那样为堆栈指定内存，您只能指定堆栈的大小作为[CreateThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453%28v=vs.85%29.aspx)调用的第二个参数。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686774%28v=vs.85%29.aspx)。

# facebook - spring-security-facebook，s2-init-facebook 未生成默认 Dao

> ID：10992235
> 
> 赞同：2
> 
> 时间：2012-06-12T07:30:52.087
> 
> 标签：facebook, grails, spring-security

我已将 spring-security-facebook 安装到测试圣杯应用程序中。这是在安装 spring-security-core 并运行 s2-quickstart 之后完成的。

我只是一个新手，正在尝试将 facebook 登录按钮集成到我的测试应用程序中。但是，问题是当我运行 s2-init-facebook 时，插件没有生成默认的 Dao，正如[http://grails.org/plugin/spring-security-facebook中的文档中所说的那样](http://grails.org/plugin/spring-security-facebook)

> 使用您自己的身份验证 dao
> 
> 插件调用 s2-init-facebook@ 后生成一个 Dao，并将其放入您的 @conf/spring/resources.groovy 和 @Config.groovy@。实际上它是一个“愚蠢”的 dao 实现，你必须重写它以遵循你的数据结构：

我的应用程序目录的缩短树输出如下所示：

```
.
├── application.properties
├── grails-app
│   ├── conf
│   │   ├── ApplicationResources.groovy
│   │   ├── BootStrap.groovy
│   │   ├── BuildConfig.groovy
│   │   ├── Config.groovy
│   │   ├── DataSource.groovy
│   │   ├── hibernate
│   │   ├── spring
│   │   │   └── resources.groovy
│   │   └── UrlMappings.groovy
│   ├── controllers
│   │   ├── LoginController.groovy
│   │   └── LogoutController.groovy
│   ├── domain
│   │   └── com
│   │       └── fbtest
│   │           └── webapp
│   │               └── auth
│   │                   ├── FacebookUser.groovy
│   │                   ├── SecRole.groovy
│   │                   ├── SecUser.groovy
│   │                   └── SecUserSecRole.groovy
│   ├── i18n
│   │   ├── ...
│   ├── services
│   ├── taglib
│   ├── utils
│   └── views
│       ├── error.gsp
│       ├── index.gsp
│       ├── layouts
│       │   └── main.gsp
│       └── login
│           ├── auth.gsp
│           └── denied.gsp
├── lib
├── scripts
├── src
│   ├── groovy
│   └── java
├── test
│   ├── integration
│   └── unit
└── web-app
    ├── ... 
```

resource.groovy 文件也是空的。

```
// Place your Spring DSL code here
beans = {
} 
```

请帮助我理解我是否做错了什么。

我正在使用 Grails 版本：2.0.4，spring-security-facebook 的版本是 0.8。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:59:28.983

哦，它应该从文档中删除。对于上一个版本，不需要拥有自己的 DAO，现在它具有默认的非常灵活的 DAO。现在它不是在安装过程中生成的。尝试运行您的应用程序，如果一切配置正确，它应该可以工作。

如果您自己实现了它，您仍然可以使用自己的 DAO。但是对于自 0.7 以来的版本，几乎所有内容都可以使用 optional 进行扩展，`FacebookAuthService`如果您愿意，您可以实现（它也在文档中进行了描述）。

# objective-c - 已弃用：圆形纹理分段控制

> ID：10992237
> 
> 赞同：3
> 
> 时间：2012-06-12T07:31:05.737
> 
> 标签：objective-c, xcode, macos, cocoa

如何在针对 10.7 及更高版本的可可项目中消除警告“已弃用：Mac OS X 10.7 及更高版本上的圆形纹理分段控制样式”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-12T10:31:55.653

您可以通过转到项目或目标设置并查找标题中包含“已弃用”的设置来关闭“弃用”警告。它看起来像这样：

![已弃用的警告关闭](../Images/05354efa2120e68534922a94d61660ba.png)

当然，我需要警告你***不***要这样做。不推荐使用的 API 可能会在未来版本的 MacOS 中意外开始工作，或者更糟糕的是，完全被拉出（在这种情况下，您的应用程序将完全崩溃）。最好查看您控制的替代方案，以摆脱这些警告。

# jquery - 可以依赖 jQuery 吗？

> ID：10992240
> 
> 赞同：7
> 
> 时间：2012-06-12T07:31:08.040
> 
> 标签：jquery

我正在编写一段 jQuery 代码，它将更改数百个 HTML 元素中的属性。

可以完全依赖 jQuery 来执行这些任务吗？

jQuery 代码是否有可能使我的页面不一致？

例如。由于没有完成我期望的任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:36:41.093

我个人认为，即使在关键任务应用程序中，我也会相信 jQuery。它非常稳定，在大型 Web 应用程序中从未让我失望。

您只需要在更新时非常小心，就好像您使用的是 3rd Party 插件一样，它们可能不稳定或与新的 jQuery 版本不完全兼容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T07:35:31.783

是的，它将执行完整的任务。但是，由于您正在谈论数百个元素，因此它可能会有点慢。这可能会导致浏览器进入某种安全模式（告诉用户脚本运行缓慢等）。

因此，您可能想要测试您可以使用它多远或使用不同的方法。也许是一些超时结构，你可以一块一块地做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:39:24.493

它可能会完成任务并高度信任 jQuery。最后，性能也是浏览器速度和[选择器速度](https://stackoverflow.com/questions/4047977/compare-jquery-selectors-performance)的问题。始终检查您是否使用了正确的选择器。

# android - 在代码中设置图像按钮的高度和宽度

> ID：10992241
> 
> 赞同：1
> 
> 时间：2012-06-12T07:31:09.217
> 
> 标签：android

这是我的代码

```
ImageButton btnPlayVideo = (ImageButton) findViewById(R.id.btnPlayVideo);
btnPlayVideo.setBackgroundResource(R.drawable.play_icon_grey);
btnPlayVideo.setAdjustViewBounds(true);
btnPlayVideo.setMaxHeight(10);
btnPlayVideo.setMaxWidth(10); 
```

在我的 xml

```
<ImageButton
android:id="@+id/btnPlayVideo"
android:layout_width="90dp"
android:layout_height="90dp"
android:background="@android:color/transparent"
android:layout_span="2" /> 
```

但似乎 setmaxheight 和 layout_height 和 width 甚至不起作用。那么如何设置图像按钮的尺寸？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T07:40:42.357

您将需要使用`android:scaleType`它来调整大小以适应。

```
<ImageButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"
        android:scaleType="fitXY" /> 
```

产生以下输出。

![在此处输入图像描述](../Images/55476cf53ebc707e9d592f86f088001a.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T07:43:27.863

您可以通过代码通过

```
android.view.ViewGroup.LayoutParams params = btnPlayVideo.getLayoutParams();
params.height = myHeight;
params.width = myWidth;
btnPlayVideo.setLayoutParams(params); 
```

，但可能您的问题不在于代码，而在于布局-我看到您正在使用`android:layout_span="2"`-这是否意味着`btnPlayVideo`在`TableLayout`？如果是这样，您必须调节 this`TableLayout`的尺寸，因为它的子项将始终具有`fill_parent`宽度和高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-10T14:00:23.293

我使用了指标：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

btnPlayVideo.setMinimumHeight(metrics.heightPixels / (amount));
btnPlayVideo.setMinimumWidth(metrics.widthPixels/ (amount)); 
```

# ruby-on-rails - 没有成员 ID 的资源路由

> ID：10992242
> 
> 赞同：18
> 
> 时间：2012-06-12T07:31:16.893
> 
> 标签：ruby-on-rails, rest, routes

我开发了一个 Rails 应用程序并添加了简单的路线：

```
Name::Application.routes.draw do
  resource :categories
end 
```

问题是生成的 URL 中没有成员 ID：

```
$ rake routes
categories      POST   /categories(.:format)      categories#create
new_categories  GET    /categories/new(.:format)  categories#new
edit_categories GET    /categories/edit(.:format) categories#edit
                GET    /categories(.:format)      categories#show
                PUT    /categories(.:format)      categories#update
                DELETE /categories(.:format)      categories#destroy 
```

我使用 Rails 3.2.3。我不在应用程序中使用 ActiveRecord（但我不知道它是否相关）。我有一个模型`Category`和`CategoriesController`.

可能是什么问题？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-12T07:34:14.033

你忘`s`了最后添加：

```
resources :categories 
```

`resources`并且`resource`是不同的东西：[资源](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)和[资源](http://guides.rubyonrails.org/routing.html#singular-resources)。

# c++ - 根据模板参数调用不同版本的模板成员函数

> ID：10992243
> 
> 赞同：0
> 
> 时间：2012-06-12T07:31:17.310
> 
> 标签：c++, templates

我需要根据模板参数的某些静态成员调用具有相同参数的不同版本的模板成员函数。这是我需要做的一种简化版本：

```
 class A {
public:
    //...
    static const char fooString[];
};
const char A::fooString[] = "This is a Foo.";

class B {
public:
    //...
    static const char barString[];
};
const char B::barString[] = "This is a Bar.";

class C {
public:
    //...
    static const char fooString[];
};
const char C::fooString[] = "This is also a Foo.";

//Many other classes which have either a fooString or a barString

void doFoo(const char*s) { /*something*/ }
void doBar(const char*s) { /*something else*/ }

template<class T>
class Something {
public:
    //This version should be called if T has a static member called "fooString",
    //so it should be called if T is either class A or C
    void doSomething() { doFoo(T::fooString); }

    //This version should be called if T has a static member called "barString", 
    //so it should be called if T is class B
    void doSomething() { doBar(T::barString); }
};

void someFunc()
{
    Something<A> a;
    Something<B> b;
    Something<C> c;

    a.doSomething();    //should call doFoo(A::fooString)
    b.doSomething();    //should call doBar(B::barString)
    c.doSomething();    //should call doFoo(C::fooString)
} 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:50:40.203

一个可能的解决方案：

```
#include <iostream>
#include <type_traits>

class A {
public:
    //...
    static const char fooString[];
};
const char A::fooString[] = "This is a Foo.";

class B {
public:
    //...
    static const char barString[];
};
const char B::barString[] = "This is a Bar.";

class C {
public:
    //...
    static const char fooString[];
};
const char C::fooString[] = "This is also a Foo.";

void doFoo(const char*s) { std::cout << "doFoo: " << s << "\n"; }
void doBar(const char*s) { std::cout << "doBar: " << s << "\n"; }

template<class T>
class Something {
public:
    //This version should be called if T has a static member called "fooString",
    //so it should be called if T is either class A or C
    template <typename TT = T, typename std::enable_if<TT::fooString != 0, bool>::type = false>
    void doSomething() { doFoo(T::fooString); }

    //This version should be called if T has a static member called "barString", 
    //so it should be called if T is class B
    template <typename TT = T, typename std::enable_if<TT::barString != 0, bool>::type = false>
    void doSomething() { doBar(T::barString); }
};

int main()
{
    Something<A> a;
    Something<B> b;
    Something<C> c;

    a.doSomething();    //should call doFoo(A::fooString)
    b.doSomething();    //should call doBar(B::barString)
    c.doSomething();    //should call doFoo(C::fooString)
} 
```

输出：

```
doFoo: This is a Foo.
doBar: This is a Bar.
doFoo: This is also a Foo. 
```

# jquery - .clone() 无法正常工作

> ID：10992245
> 
> 赞同：-2
> 
> 时间：2012-06-12T07:31:20.873
> 
> 标签：jquery

当我克隆某些东西时，我想将其克隆为重复的连续元素并为其添加单独的标识符。

不起作用：`$(".selecter").clone().after(".selecter").addClass('.selecter2');`

jQuery应该做一个`.cloneAs()`或什么..

我们能做些什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:35:37.377

从你的问题我可以看出，你似乎想使用`.insertAfter`而不是`.after`.

另请注意，它`addClass`应该只包含类名，大概不包含点。

```
$(".selecter").clone().insertAfter(".selecter").addClass('selecter2'); 
```

[演示](http://jsfiddle.net/PyeMx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:34:16.440

`.after`在每个项目之后插入内容（如参数所示），所以我认为上面的代码会克隆`.selector`，并且不希望地在每个项目之后添加文本“.selecter”。

也许你想要

```
 $('.selecter').clone().addClass('selecter2'); 
```

但是，虽然`clone`会克隆选定的元素，但您现在必须将它们添加到某处。

```
 $('.destination-for-selecter').append($('.selecter').clone().addClass('selecter2')); 
```

您还没有明确克隆元素的去向。

# android - Android-使用openCV进行人脸识别？

> ID：10992247
> 
> 赞同：2
> 
> 时间：2012-06-12T07:31:30.537
> 
> 标签：android, opencv, login, face-recognition

在我的应用程序中，我将实现人脸识别登录...所以我使用 openCV 库来识别人脸...请通过示例代码和教程帮助我做到这一点...。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:48:12.860

好吧，我和我的同事去年对人脸识别进行了一些调查，这些是我们关于使用集成识别工具与 JavaCV（OpenCV 的 Java 绑定）的一些考虑：

请查看以下教程

1.  [Andriod Part-I 上的人脸检测](http://www.smallscreendesign.com/2011/01/25/about-face-detection-on-android-part-1/)（[Wayback 链接](http://web.archive.org/web/20120418110445/http://www.smallscreendesign.com/2011/01/25/about-face-detection-on-android-part-1)）
2.  [Andriod Part-II 上的人脸检测](http://www.smallscreendesign.com/2011/02/07/about-face-detection-on-android-%E2%80%93-part-1/)（[Wayback 链接](http://web.archive.org/web/20120418105847/http://www.smallscreendesign.com/2011/02/07/about-face-detection-on-android-%E2%80%93-part-1)）

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:37:59.500

您可以使用 NDK 来使用 C/C++ OpenCV API

[文档](http://opencv.willowgarage.com/documentation/cpp/index.html)
[初学者教程](http://niksonpaul.wordpress.com/2011/04/25/face-detection-using-opencv-c/)

```
 void DetectMyFace ()
{
    // image structure in opencv
    IplImage *inImg = 0;
    // face detector classifer 
    CvHaarClassifierCascade *clCascade = 0;
    CvMemStorage *mStorage = 0;
    CvSeq *faceRectSeq;

    inImg = cvLoadImage("2.jpg");

    mStorage = cvCreateMemStorage(0);
    clCascade = (CvHaarClassifierCascade *)cvLoad("haarcascade_frontalface_default.xml", 0, 0, 0);

    if ( !inImg || !mStorage || !clCascade ) 
    {
        printf("Initilization error : %s" , (!inImg)? "cant load image" : (!clCascade)? 
            "cant load haar cascade" : 
            "unable to locate memory storage");

        return;
    }

    faceRectSeq = cvHaarDetectObjects(inImg,clCascade,mStorage,
        1.2,
        3,
        CV_HAAR_DO_CANNY_PRUNING,
        cvSize(25,25));

    const char *winName = "Display Face";
    cvNamedWindow(winName,CV_WINDOW_AUTOSIZE);  

    for ( int i = 0; i < (faceRectSeq ? faceRectSeq -> total:0); i++ )
    {

        CvRect *r = (CvRect*)cvGetSeqElem(faceRectSeq,i);
        CvPoint p1 = { r->x, r->y };
        CvPoint p2 = { r->x + r->width, r->y + r->height };

        cvRectangle(inImg,p1,p2,CV_RGB(0,255,0),1,4,0);     
    }

    cvShowImage(winName, inImg);
    cvWaitKey(0);   

    cvDestroyWindow(winName);

    // release the variables 
    cvReleaseImage(&inImg);
    if(clCascade) cvReleaseHaarClassifierCascade(&clCascade);
    if(mStorage)  cvReleaseMemStorage(&mStorage);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-13T12:58:38.957

我已经使用 OpenCV 制作了一个用于人脸识别的 Android 应用程序。你可以看看：[https ://github.com/yaylas/AndroidFaceRecognizer](https://github.com/yaylas/AndroidFaceRecognizer)

# php - IE 中的下拉菜单反对 FF 和 Chrome

> ID：10992248
> 
> 赞同：0
> 
> 时间：2012-06-12T07:31:31.893
> 
> 标签：php, html, css, url-rewriting

我注意到我的下拉菜单在 chrome、ff 和 opera 中完美运行，但在 IE 中却一团糟——**但是！**它适用于我的 404 页面。

示例： [http](http://www.raal.co.il/) ://www.raal.co.il/ 它适用于： [http ://www.raal.co.il/asd](http://www.raal.co.il/asd)

最奇怪的是：我把 404 页面的代码复制到了一个空白页，然后放到了首页——还是不行！！就像地址是如何相关的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:42:21.077

[http://www.raal.co.il/](http://www.raal.co.il/)在 IE 中的默认文档模式是 Quirks，对于[http://www.raal.co.il/asd](http://www.raal.co.il/asd)，它是 IE9 标准。（开发者工具按 F12。）如果您手动将其更改为 IE9 标准，您将看到菜单正常工作。

这是与文档类型相关的。所以我检查了源代码，我在 doctype 中发现了一些奇怪的东西。第一个字符看起来不对。不幸的是，我无法以某种方式将其复制并粘贴到此处，因此您必须自己检查。

我猜与希伯来语有关..

**编辑：** 在 Firebug Net 选项卡中，我在 doctype 前面找到了这个：

ï»¿ï»¿

# php - 如何将二维数组从php发送到android

> ID：10992250
> 
> 赞同：0
> 
> 时间：2012-06-12T07:31:40.307
> 
> 标签：php, android, json, parsing

我想将 php 中的结果过程发送到 android 然后我想在模拟器中显示结果..

但我不能将结果从 php 发送到 android cz 结果是一个数组 2Dimension

```
1      2        3
4      5        6
7      8        9
10    11       12 
```

如何在android中解析结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:36:58.700

我会在 PHP 中使用[json_encode()](http://php.net/manual/en/function.json-encode.php)，然后在 Android 中对其进行解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:45:24.837

JSON 是一个好方法，这是一个例子 [https://stackoverflow.com/a/4692780/719212](https://stackoverflow.com/a/4692780/719212) 或[http://fahmirahman.wordpress.com/2011/04/21/connection-between-php-server-and -android-client-using-http-and-json/](http://fahmirahman.wordpress.com/2011/04/21/connection-between-php-server-and-android-client-using-http-and-json/)

对于 2D 数组：[JSON 中的 2D 数组被转换为 1D 对象数组](https://stackoverflow.com/questions/9397772/2d-arrays-in-json-getting-converted-into-a-1d-array-of-objects)

# php - 命令行工具应用 PHP Codesniffer 提供的建议

> ID：10992251
> 
> 赞同：3
> 
> 时间：2012-06-12T07:31:48.910
> 
> 标签：php, command-line, codesniffer

我正在寻找一个命令行工具，它将 PHP 代码嗅探器提供的代码格式化建议应用到我的代码库中。

有一些很酷的工具，例如 Eclipse 的 PHP CodeSniffer 插件，但在我的用例中，我需要将其作为批处理而不是手动任务来执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T22:25:06.827

虽然没有任何东西可以直接解决 PHP_CodeSniffer 报告的所有问题，但还有另一个不相关的项目试图解决问题而不是报告问题。特别是，它试图使您的代码符合新的 PSR-1 和 PSR-2 标准，而 PHP_CodeSniffer 目前只是添加了对这些标准的支持。

它不会解决所有问题，但它可能与解决一些问题一样接近：[https ://github.com/fabpot/PHP-CS-Fixer](https://github.com/fabpot/PHP-CS-Fixer)

但是，我强烈建议不要在您的代码库上运行批处理修复工具。如果您希望您的代码符合编码标准，您真的需要学习它并随着时间的推移修复错误。没有理由一键修复所有问题，根据我的经验，使用自动化工具是破坏代码库的最佳方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-13T03:59:12.340

版本 2 中的 CodeSniffer 引入了自动错误修复。您所要做的就是将您的 CodeSniffer 升级到版本 2 并使用以下命令运行它：

`phpcbf`

而不是只列出错误的旧 phpcs

更多信息： [自动修复错误](https://github.com/squizlabs/PHP_CodeSniffer/wiki/Fixing-Errors-Automatically)

# java - 在android中使用带有图像的gridview

> ID：10992252
> 
> 赞同：1
> 
> 时间：2012-06-12T07:32:01.127
> 
> 标签：java, android

这是有问题的代码：

```
public class Level1 extends Activity {

int[] logos = {
        R.drawable.arutz8,
        R.drawable.channel1,
        R.drawable.doctor_gav,
        R.drawable.foxgroup3,
        R.drawable.careline,
        R.drawable.golfnew,
        R.drawable.haaretz,
        R.drawable.hafenix,
        /*R.drawable.hando,
        R.drawable.bankleumi,
        R.drawable.jerusalempostred,
        R.drawable.laisha,
        R.drawable.logo,
        R.drawable.logodelta,
        R.drawable.maariv,
        R.drawable.pelephone,
        R.drawable.ravbariah,
        R.drawable.renuar,
        R.drawable.reshet_tv,
        R.drawable.sano,
        R.drawable.shilav,
        R.drawable.sport5,
        R.drawable.srigamish,
        R.drawable.steimatzky,
        R.drawable.superpharm,
        R.drawable.supersal,
        R.drawable.tambur,
        R.drawable.tzometsfarim,
        R.drawable.walla,
        R.drawable.yediot,*/
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.level1);
    ListAdapter adapter = (new ArrayAdapter<Integer>(this, R.layout.level1));

    GridView grid = (GridView) findViewById(R.id.gridview1);
    grid.setAdapter(new ImageAdapter(this));
}

private class ImageAdapter extends BaseAdapter 
{
    private Context context;

    public ImageAdapter(Context c) 
    {
        context = c;
    }

    //---returns the number of images---
    public int getCount() {
        return logos.length;
    }

    //---returns the ID of an item--- 
    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    //---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(context);
            imageView.setLayoutParams(new GridView.LayoutParams(90, 90));
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            imageView.setPadding(5, 5, 5, 5);
        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageResource(logos[position]);
        return imageView;
    }
} 
```

}

只要所有图像的大小约为每张图像 60 像素，该程序就可以完美运行。这种尺寸的图像的问题是每个图像都被压缩并且它的丑陋！我尝试在更大的图像中使用，由于某种原因，只有前五个图像出现在屏幕上，当我尝试加载其余图像时，应用程序崩溃。我认为这是因为图像的大小而发生的，但后来我意识到所有图像的大小都相同，其中仍有 5 个被绘制在屏幕上。有任何想法吗？

这些是来自 logCat 的日志：

[日志](http://i.imgur.com/xhM3I.png)

这是我按下 1 级按钮时的结果：

[结果](http://i.imgur.com/eHUln.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:26:55.773

ImageAdapter 中的公共 View getView(...) 方法存在问题。当 convertView == null 时，您永远不会将 convertView 链接到您的 imageView。所以else语句会有问题。您可以通过两种方式做到这一点：

*   通过像您一样在代码中定义您的 ImageView，在您的情况下，这将是最佳选择：

    ```
    ImageView imageView = (ImageView) convertView;

    if (convertView == null) {
           convertView = new ImageView(context);
           imageView = (ImageView) convertView;
           // Set other parameters
     }

    // Set resource

    return convertView; 
    ```

`*   By defining your layout in a xml-layout file an using a layout inflater:` 

 `Handler handler;

```
 if (convertView == null) {
        LayoutInflater li = (LayoutInflater) c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = li.inflate(yourLayoutResourceId, parent, false);
        handler = new Handler();
        handler.itemIV = (ImageView) convertView.findViewById(imageViewLayoutId);

        convertView.setTag(handler);
    } else {
        handler = (Handler) convertView.getTag();
    }

     handler.imageView.setImageResource(...);
     return convertView; 
```

Where yourLayoutResourceId is the id of the created xml-layout file (R.layout.exmaple), and imageViewLayoutId is the id of your imaeView in the layout (R.id.exmapleIV). As last step define an inner class Handler in your ImageAdapter:

class Handler { ImageView imageView; }`

祝你好运！有好的发展。

氪

# c++ - 如何在 Eclipse 调试模式下打印 C++ 集的元素？

> ID：10992255
> 
> 赞同：0
> 
> 时间：2012-06-12T07:32:13.640
> 
> 标签：c++

知道向量的元素可能会使用以下命令在调试模式下打印

```
p *(myVector._M_impl._M_start)@myVector.size() 
```

我正在寻找一个类似的命令来打印集合的元素（集合中元素的唯一性在我的代码中非常有用）

提前致谢

# javascript - 如何使用 javascript 向 html 表单下拉列表中添加选项

> ID：10992261
> 
> 赞同：3
> 
> 时间：2012-06-12T07:32:44.580
> 
> 标签：javascript, html, forms

我希望这个脚本在列表中添加一个选项。

`test`当您打开列表时，我希望选项是`hello`

我究竟做错了什么？

```
<SCRIPT>
function runList(){
    document.getElementById('list').value = "<option>hello</option>";
}
</SCRIPT>

<FORM NAME="myform" ACTION="" METHOD="GET">
Your Options:
<INPUT TYPE="button" NAME="button" VALUE="Click" onClick="runList()"/>
<SELECT NAME="list" ID="list">
<OPTION>test</OPTION>
</SELECT> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T07:38:05.437

您需要将选项对象实际添加到 dom。我已经链接到您的示例工作的小提琴：http: [//jsfiddle.net/DS8TG/](http://jsfiddle.net/DS8TG/)

将 runList 更改为以下内容：

```
function runList(){
  var select = document.getElementById('list');
  select.options[select.options.length] = new Option('Hello', 'Hello');
}​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T07:37:13.457

试试这个

```
var element = document.getElementById('list');
element.options[element.length] 
   = new Option('yourText', 'yourValue'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:40:35.387

```
var select = document.getElelmentById('test');
var option = document.createElement('option');
option.value = 'value';
select.appendChild(option) 
```

# hash - 带有 md5 哈希的旧版应用程序：如何添加盐和 SHA1？

> ID：10992262
> 
> 赞同：2
> 
> 时间：2012-06-12T07:32:44.983
> 
> 标签：hash, md5, salt, sha

我有一个旧版应用程序，其中使用不加盐的 MD5 对密码进行哈希处理。我想用盐切换到 SHA1，但我想保留当前用户的密码。

我的计划是将散列函数更改为`sha1(md5(password) + salt)`. 我将能够使用`sha1(<existing_pass> + salt)`.

1.  在这种情况下保留 md5 是否安全？
2.  可以为所有用户使用一种盐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:52:34.730

*   至于问题1，我不太确定，但似乎没问题。

*   对于问题 2：对所有用户使用相同的盐是绝对不行的。盐有两个功能。防止使用预先生成的散列/彩虹表来搜索泄露的数据库，并防止生成基于字典的散列和使用它们搜索数据库。普通盐在第一种情况下会起作用，使彩虹表无法使用，但不会阻止饼干受到字典攻击。如果破解者知道全局盐，他可以生成频繁的密码，对它们进行哈希处理并 grep 整个数据库。如果为每个用户生成盐，则这种情况是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:55:15.820

1.  保留 md5 不是一个好主意，请阅读这个问题：[Use SHA-512 and salt to hash an MD5 hashed password?](https://stackoverflow.com/q/10028308/1073063) .

2.  最好为每个用户准备一种盐。使用相同的盐，具有相同密码的用户将具有相同的哈希，并且可以同时为您的所有密码创建彩虹表。

# entity-framework - 我可以对 REST 服务、数据层、服务层和模型进行单元测试吗？

> ID：10992265
> 
> 赞同：0
> 
> 时间：2012-06-12T07:33:02.427
> 
> 标签：entity-framework, unit-testing, asp.net-web-api

我有一个项目，我非常积极地将其划分为不同的层。我有

*   REST 服务 (asp.net Web API)
*   服务层
*   数据层
*   过滤器（数据层之上的扩展方法）
*   多个模型和单独的 DTO
*   数据库上下文

我应该进行什么单元测试？

从技术上讲，我的 REST 服务指向我的服务。因此，如果我测试我的 REST，我也在测试我的服务。

模型，我不知道如何测试这些？

DBContext，有必要测试这些吗？

如果我测试我的服务，我正在测试我的 DataLayer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:13:02.677

一个好的经验法则是任何包含业务逻辑的东西都应该能够进行单元测试。理想情况下，您的所有层都将由接口分隔，并且您应该能够将模拟接口注入各个层。任何访问外部组件（磁盘、数据库、网络等）的东西也应该被抽象掉。例如，在您的数据层中，负责打开与数据库的连接、运行 SQL 语句和关闭连接的代码应该被抽象出来。然后你可以模拟数据访问接口和你要测试的代码，可以进行测试。在此示例中，模拟了数据访问层方法

```
var mockAdapter = new Mock<IDataAdapter>();
var repo = new Mock<RepositoryObject> (mockAdapter.Object) { CallBase = true };

var param = new Mock<IDbDataParameter>();
param.Setup(mock => mock.Value).Returns("TEST RESPONSE");

var bindParam = new DynamicParameters.ParamInfo { Name = "strResponse", AttachedParam = param.Object };
var paramList = new DynamicParameters();
paramList.Parameters.Add("strResponse", bindParam);

repo.Setup(mock => mock.GetParameters(It.IsAny<string>(), It.IsAny<string>(), It.IsAny<int>(), It.IsAny<string>())).Returns(paramList);

string actual = repo.Object.ExecuteSomeSqlStatement(string.Empty, string.Empty, int.MinValue, string.Empty);

Assert.AreEqual("TEST RESPONSE", actual); 
```

就您的模型而言，如果它们仅包含属性，那么它在测试它们时毫无用处。

在某些情况下，单元测试是零意义的，例如创建一个 TCP 服务器打开侦听点。希望这些很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:47:27.007

测试DataLayer的时候尽量mock REST Service层，其他的也一样。

单元测试只测试逻辑，与其他系统或计算机交互的代码不应包含在单元测试范围内（如网络IO、数据库访问、磁盘IO、调用其他系统的接口等）

# c - 我的程序有什么问题？

> ID：10992266
> 
> 赞同：0
> 
> 时间：2012-06-12T07:33:08.277
> 
> 标签：c

我编写了一个程序，它可以对您输入的 5 个字符串从小到大进行排序。但是，它无法工作。我已经工作了将近一个小时，但我找不到问题所在。这是代码。

```
 #include <stdio.h>
    #include <string.h>

    main() {
    char *sz[5], *temp;
    int i, j;
    for(i = 0; i < 5; i++) {
        gets(sz[i]);
        fflush(stdin);
    }
    for(i = 0; i < 5; i++) {
        for(j = i+1; j < 5; j++) {
            if(strcmp(sz[i], sz[j]) > 0) {
                temp = sz[i];
                sz[i] = sz[j];
                sz[j] = temp;
            }
        }
        puts(sz[i]);
        puts("");
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:39:40.443

第一个大问题是您正在使用一个本不应该存在的例程，并且使用不当：

```
char *sz[5], *temp;
int i, j;
for(i = 0; i < 5; i++) {
    gets(sz[i]); 
```

您没有分配任何存储`gets()`来存储，所以它只是在不相关的内存上涂鸦。（这通常会导致[安全问题](http://en.wikipedia.org/wiki/Buffer_overflow)。）

您应该特别注意手册页中的`BUGS`部分：

```
BUGS
   Never use gets().  Because it is impossible to tell without
   knowing the data in advance how many characters gets() will
   read, and because gets() will continue to store characters
   past the end of the buffer, it is extremely dangerous to use.
   It has been used to break computer security.  Use fgets()
   instead. 
```

现在忘掉学习`gets(3)`，做一个更快乐的程序员。

用于`malloc()`为这些字符数组分配一些内存。

[Ignacio 直截了当地解决了另一个问题](https://stackoverflow.com/a/10992299/377270)——您在排序完成之前打印。排序后添加另一个循环打印。（更好的是，将输入、排序和输出放在三个单独的函数中。也许你还没有，但最好早点而不是晚点这样做，因为它使测试你的程序变得更容易拥有打印功能您可以用于调试。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T07:37:45.113

> ```
> char *sz[5], *temp;
> int i, j;
> for(i = 0; i < 5; i++) {
>     gets(sz[i]); /* Tries to write data to random location. */
>     fflush(stdin);
> } 
> ```

至少3个问题：

*   您正在写入未初始化的指针。您需要`sz[i]`在使用它之前进行初始化（可能使用`malloc`）
*   `fflush(stdin)`是未定义的行为，放弃它
*   `gets`不安全并已从标准中删除，也将其删除并`fgets`改用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T07:38:06.933

您将未初始化的指针传递给`gets`，将数据存储在随机位置。这是未定义的行为。您应该为数据分配内存，并使用`fgets`限制来读取字符串。

```
char *sz[5], *temp;
int i, j;
char buf[100];
for(i = 0; i < 5; i++) {
    fgets (buf , 100 , stdin);
    sz[i] = strdup(buf);
}
... sort your strings...
// Free the strings before exiting the program
for (i = 0 ; i < 5 ; i++) free(sz[i]); 
```

# c# - 使用 iTextSharp.dll 将 HTML 转换为 PDF

> ID：10992267
> 
> 赞同：3
> 
> 时间：2012-06-12T07:33:09.900
> 
> 标签：c#, itextsharp

我正在使用 C# 中的 itextsharp.dll 将 HTML 页面转换为 PDF 文件格式。我正在阅读 HTML 页面中的内容并动态添加到 PDF 文件中。当我将数据添加到 PDF 文件时，我需要检查以下场景。

案例 1：由于无法获取 PDF 书写光标的当前位置，我应该何时向 PDF 文档添加新页面？

案例 2：HTML 文件可以由单个文件中的多个页面组成。添加到 PDF 文件时如何决定其拆分。

上述问题的代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:06:29.167

案例 1：使用 iText 自动添加新页面。您可以使用[Document#newPage()](http://api.itextpdf.com/itext/com/itextpdf/text/Document.html#newPage%28%29)强制创建新页面。请注意，此链接指向 Java API，但在 iTextSharp 中几乎相同。

*案例2： HTML文件可以由单个文件中的多个页面组成是*什么意思？

# mysql - 构建动态无失败 where 子句

> ID：10992268
> 
> 赞同：1
> 
> 时间：2012-06-12T07:33:20.593
> 
> 标签：mysql, sql, where-clause, boolean-logic, relational-algebra

我建立了一个界面，用户从数据库中获取记录。用户可以选择指定 0 个或多个过滤器。有四个过滤器A，B，C，D（假设这些是某个表中的字段）

这是我的查询应该是这样的：

```
select * from table 
where (A = v1 or B = v2 or C = v3) and D = v4 
```

我试图用一种方法来制定查询，而当指定一个特定的过滤器时，它会被应用，如果不是，它会被忽略。但这应该适用于所有 16 种情况。

到目前为止，我能够想出的是这些方法：

```
select * from table
where (
    (A = v1 and 1)
    or (B =  v2 and 1)
    or (C = v3 and 1)
    )
    and D = v4 
```

`v1`或其他值在未指定时设置为 -1。因此，如果未指定它们，它们将被简单地忽略，因为随后会使用另一个过滤器（来自 A、B、C）。但是在没有指定 A、B 和 C 的情况下，这将失败。在这种情况下，false 与 D 进行 Anded，并且不应用 D。

有没有办法为这种情况提供 where 子句？我也对这个程序的解决方案持开放态度，我通过代码添加或不添加子句，但我更喜欢这种方式。而且我真的不想有很多 if-else 语句。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:38:06.077

`case`使用构造怎么样

```
 select * 
  from table
  where (A = CASE WHEN v1 IS NOT NULL THEN v1 else '' END)
            OR (B =  CASE WHEN v2 IS NOT NULL THEN v2 else '' END)
            OR (C = CASE WHEN v3 IS NOT NULL THEN v3 else '' END)
            OR (CASE WHEN v1 is null and v2 is null and v3 is null then 1 else 0 end)
  and D = v4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:39:10.093

数据库很难优化动态 where 子句。通常，他们会制定一个最适合第一次调用的计划。因此，如果您的第一次搜索是过滤器 A 和 B，则查询计划将为此进行优化。下一个查询也将使用该计划，即使它使用过滤器 C 和 D。在代码中添加 where 子句往往会执行得更好。

但这是可能的，例如：

```
where  (
           A = @FilterAValue
           or B = @FilterBValue
           or C = @FilterCValue
       )
       and D = coalesce(@FilterDValue, D) 
```

然后您可以使用参数切换过滤器`FilterXValue`。如果 A、B 或 C 的过滤器是，则仍将评估 `null`的其他部分。与which is only true when相同。`or``A = null or B = 1``unknown or B = 1``B = 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:40:51.207

if `v1`-`v4`是您正在搜索的值，`-1`如果未指定所有这些值，您可以这样做：

```
SELECT
  *
FROM
  table
WHERE
  (
    (A = v1 OR -1 = v1)
  or 
    (B =  v2 OR -1 = v2)
  or 
    (C = v3 OR -1 = v3)
  )
AND
  (D = v4 OR -1 = v4) 
```

# java - 根据到达日期对 Imap 邮件进行排序

> ID：10992269
> 
> 赞同：0
> 
> 时间：2012-06-12T07:33:23.100
> 
> 标签：java, jakarta-mail

我正在使用 IMAP 协议使用 java 邮件从 Google 服务器获取邮件。我检索到的邮件按降序排列。如何根据到达日期首先检索最近的邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:37:54.457

消息在到达时被存储。编号最高的消息应该是最新的。只需以相反的顺序访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-10T11:39:43.213

您可以简单地反转 for 循环顺序，将 for 循环启动为

```
for(int i=messages.length -1; i>=0;  i--){} 
```

希望能帮助到你

# jasper-reports - 整合所有子报告后未生成主报告

> ID：10992270
> 
> 赞同：1
> 
> 时间：2012-06-12T07:33:25.517
> 
> 标签：jasper-reports, ireport, subreports

我有 4 个子报表正在尝试集成到主报表中。

*   第一个子报表有 7 页
*   第二个有2页
*   第三有2页
*   第四有2页

每个jasper文件的大小分别为：

*   131 KB
*   58 KB
*   85 KB
*   174 KB

所有子报表的内容大多是静态文本。

* * *

我面临的问题是当我将这些子报表与主报表集成并以 Excel 格式预览时

*   iReport 工具（4.1.3 版）停止运行
*   经过很长时间（大约 10 分钟）后，它会给出以下错误消息

    ```
    java.lang.OutOfMemoryError: Java heap space null 
    ```

你能告诉我可能是什么原因吗？我已经尝试了所有选项。我也尝试将第一个子报表设置为主报表，但我仍然面临同样的问题。如果您能在这里帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:14:24.403

我开始将此作为评论，但意识到它太多了。这不会真正回答您的问题，但会为您提供一些故障排除步骤来帮助您找到问题。

1.  从主报表中删除所有子报表，然后运行预览到 excel 以确保它正常工作。如果它不起作用，请尝试仅包含文本的完全空白报告以确保它有效，如果没有，那么我将卸载并重新安装 iReport。

2.  隔离每个子报表并运行预览到 excel 以确保它们独立工作。这可能需要对报告进行一些临时更改以允许它们运行并且不依赖于数据或参数的主报告。

3.  一次将一个子报表添加回主报表，检查预览以确保它仍然有效。如果在添加报告后它停止工作，您现在找到了故障报告。然后，我会删除所有没有导致问题的报告并自行尝试，以确保将报告组合在一起没有问题。如果你无法弄清楚，你至少应该能够在这里形成一个更具体的问题以获得一些帮助。

4.  如果您将所有这些都添加并且它仍然有效，那么恭喜您以某种方式修复它。出于某种原因，这通常对我来说就是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:03:11.937

在excel中导出时我遇到了同样的问题

我的问题是在我的 jrxml 中放置了分页符

当我尝试在没有分页的情况下导出 excel 时，我遇到了同样的错误。

解决方案将此条件放在我的分页符中：

```
 <break>
            <reportElement positionType="FixRelativeToBottom" x="0" y="106" width="100" height="1">
                <printWhenExpression><![CDATA[!$P{IS_IGNORE_PAGINATION}]]></printWhenExpression>
            </reportElement>
        </break> 
```

看 printWhenExpression

# c# - windows服务：从不同的服务器读取不同的设置

> ID：10992274
> 
> 赞同：0
> 
> 时间：2012-06-12T07:33:48.907
> 
> 标签：c#, .net, windows-services

**场景**：

*   从不同的服务器读取文件。每个服务器都提供不同**格式**、**扩展名**和**数据**的文件。
*   每个服务器的读取过程**定期不同**（每分钟、每小时、每周、每月）。
*   应该有配置文件（或其他）来设置与“文件格式”、“文件扩展名”、“服务器凭据”相关的配置。

* * *

**我的实施**：

我编写了一个应用程序来根据配置集读取这些不同的文件，如下所示：

```
interface IServer
{
    // Common implementation
}

[ServerPath("anyLocation")]
[FileDelimiter(",")]
[FileSearchPattern("*.txt")]
class Server2 : IServer
{
    // Specific implementation
}

[ServerPath("anyLocation")]
[FileDelimiter("|")]
[FileSearchPattern("*.csv")]
class Server1 : IServer
{
    // Specific implementation
} 
```

**问题**：

*   我应该使用 Windows 服务来运行这个应用程序吗？
*   我设置为属性的设置应该作为用户可以访问的设置存在，怎么办？
*   最重要的是，考虑到阅读时间可能会干扰（在这种情况下会发生什么？），我不知道是否应该为每个服务器使用单独的服务。我还是更喜欢单一服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:02:44.317

我不会为此类问题创建 Windows 服务。

创建一个简单的控制台应用程序，该应用程序接受命令行参数以指定所需的目标（服务器）并从简单的 App.config 读取相应的配置，而不是将其硬编码到您的应用程序中。

使用计划任务运行您的控制台应用程序 - 这将为您提供细粒度的计划控制，内置监控和错误跟踪，无需任何额外代码。

# c++ - C++ 变量数组

> ID：10992277
> 
> 赞同：0
> 
> 时间：2012-06-12T07:33:57.223
> 
> 标签：c++, arrays, sockets, variables, buffer

我正在尝试编写一个处理极长消息的套接字系统（它处理一个聊天系统）。我正在尝试使用 const int 来初始化一个可以编译的数组，但我被警告 ISO C++ 禁止它。有人可以说明情况吗？

这是一个如何使用它的示例（这是为了避免编写一个字节剩余的多接收系统（我已经有了，但我觉得这样会更有效率））。

```
 const int BUFFERLEN = atoi(api_GETVALUE(1,inbuffer).c_str()); //that is my API call
       if(BUFFERLEN != -1) { //it returns "-1" on error
          char INBUFFER[BUFFERLEN];
          recv(SOCK,INBUFFER,sizeof(INBUFFER),0);
       } 
```

这完全可以接受吗，还是我应该坚持使用多次接收直到完成的方法？

谢谢，科林

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:39:43.670

```
 const int BUFFERLEN = atoi(api_GETVALUE(1,inbuffer).c_str()); //that is my API call
       if(BUFFERLEN != -1) { //it returns "-1" on error
          std::vector<char> INBUFFER(BUFFERLEN);
          recv(SOCK,INBUFFER.data(),INBUFFER.size(),0);
       } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T07:40:20.350

当您使用 C++ 数组时，必须在编译时知道大小。否则，您需要使用动态分配。`const`并不一定意味着这`BUFFERLEN`是一个编译时间常数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T07:41:32.760

> 我正在尝试使用 const int 来初始化一个可以编译的数组，但我被警告 ISO C++ 禁止它。有人可以说明情况吗？

这是因为`const int`您的程序中的实际不是常量表达式（编译时已知的值），这意味着您程序中声明的数组是可变长度数组（VLA），这在 ISO C++ 中是不允许的。您的程序可以编译，因为您的编译器提供 VLA 作为扩展。

您可以使用的称为`std::vector<char>`.

所以，而不是，

```
char INBUFFER[BUFFERLEN];  //old code 
```

您可以使用

```
std::vector<char> INBUFFER(BUFFERLEN); //new code 
```

而不是，

```
recv(SOCK,INBUFFER,sizeof(INBUFFER),0); //old code 
```

你可以写：

```
recv(SOCK, &INBUFFER[0], INBUFFER.size(),0); //new code 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T07:42:50.810

C++ 98 不允许变长数组。您的 int 是“const”并不重要，因为无法提前确定大小。围绕 char* 创建一个包装器来管理其自身内存的分配和取消分配是一种可接受的解决方案。

# python - 正则表达式过滤器数字可被 3 整除

> ID：10992279
> 
> 赞同：1
> 
> 时间：2012-06-12T07:34:04.077
> 
> 标签：python, regex

我有一个逗号分隔的 ids(digits) 列表。我只需要得到能被 3 整除的那些。

`Example: i = "3454353, 4354353, 345352, 2343242, 2343242 ..."`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T07:52:36.497

只是为了它：

```
reobj = re.compile(
    r"""\b            # Start of number
    (?:               # Either match...
     [0369]+          # a string of digits 0369
    |                 # or
     [147]            # 1, 4 or 7
     (?:              # followed by
      [0369]*[147]    # optional 0369s and one 1, 4 or 7
      [0369]*[258]    # optional 0369s and one 2, 4 or 8
     )*               # zero or more times,
     (?:              # followed by
      [0369]*[258]    # optional 0369s and exactly one 2, 5 or 8
     |                # or
      [0369]*[147]    # two more 1s, 4s or 7s, with optional 0369s in-between.
      [0369]*[147]
     )
    |                 # or the same thing, just the other way around,
     [258]            # this time starting with a 2, 5 or 8
     (?:
      [0369]*[258]
      [0369]*[147]
     )*
     (?:
      [0369]*[147]
     |
      [0369]*[258]
      [0369]*[258]
     )
    )+                # Repeat this as needed
    \b                # until the end of the number.""", 
    re.VERBOSE)
result = reobj.findall(subject) 
```

将查找字符串中所有能被 3 整除的数字。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T07:39:17.680

如果你真的是指*数字*（不是*数字*），这就像

```
 re.findall(r'[369]', my_str) 
```

*对于数字列表，没有*正则表达式很容易：

```
lst = "55,62,12,72,55"
print [x for x in lst.split(',') if int(x) % 3 == 0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T08:02:33.710

使用[这个问题](https://stackoverflow.com/questions/867279/regular-expression-to-define-some-binary-sequence)的想法，我得到：

```
i = "1, 2, 3, 4, 5, 6, 60, 61, 3454353, 4354353, 345352, 2343241, 2343243"

for value in i.split(','):
    result = re.search('^(1(01*0)*1|0)+$', bin(int(value))[2:])
    if result:
        print '{} is divisible by 3'.format(value) 
```

但是您不想为此任务使用正则表达式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-12T23:35:27.423

一个有希望的完整版本，来自减少 DEA[1]：

```
^([0369]|[147][0369]*[258]|(([258]|[147][0369]*[147])([0369]|[258][0369]*[147])*([147]|[258][0369]*[258])))+$ 
```

[1:] [Converting Deterministic Finite Automata to Regular Expressions', C. Neumann 2005](https://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.85.2597)
注意：图 4 中有一个错字：从`q_i`到自身的转换应该读`ce*b`作`ce*d`.

# image - 为什么这些图像在 Opera 中加载如此缓慢？

> ID：10992283
> 
> 赞同：0
> 
> 时间：2012-06-12T07:34:11.320
> 
> 标签：image, webserver, opera, page-load-time

在 FireFox 和 IE 中，[此页面](http://www.triangelos.no/members)上的图像几乎会立即加载（尤其是当它们被浏览器缓存时）。

但是在 Opera 中，它们的加载速度非常慢。甚至不得不选择其中一个来“重新加载”以使其出现。谁能明白为什么会这样？是网页有问题还是图片的提供方式有问题，还是 Opera 设置有问题？一直在寻找图像缓存设置，但还没有真正发现任何看起来异常的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:54:25.227

在这里，它们在 Chrome 中的加载速度差不多，但动画在 Opera 中似乎有点慢。我认为它们加载缓慢的原因是所有图像都重定向到其他地方 - 例如[http://www.triangelos.no/u/10/thumb](http://www.triangelos.no/u/10/thumb)重定向到[http://www.triangelos.no/uploads/2012/05/ 4fc4028947b4b_875e059c43d1aaafab4db5afe569f10c.jpg_thumb.jpeg](http://www.triangelos.no/uploads/2012/05/4fc4028947b4b_875e059c43d1aaafab4db5afe569f10c.jpg_thumb.jpeg)。浏览器不愿意缓存重定向，因为它们下次可能会重定向到其他地方，因此在从缓存加载实际图像之前，您必须等待重新检查每个 URL。

# iphone - 如何在ios中创建自己的面具

> ID：10992290
> 
> 赞同：8
> 
> 时间：2012-06-12T07:34:31.717
> 
> 标签：iphone, ios, uiimage, masking

![在此处输入图像描述](../Images/c6499a1e59feb92d70206b416852c365.png)

[复制](https://stackoverflow.com/questions/5757386/how-to-mask-an-uiimageview)

所以不要否定我的名声。

我的面具图像是： ![在此处输入图像描述](../Images/a05fa076d6050c24b57b1864a6127373.png)

我的输出是：![在此处输入图像描述](../Images/6d39056f56b77aa049300a15a2d48031.png)

```
- (UIImage*)maskImage:(UIImage *)image withMask:(UIImage *)maskImage {

    CGImageRef maskRef = maskImage.CGImage;

    CGImageRef mask = CGImageMaskCreate(
                                        CGImageGetWidth(maskRef),
                                        CGImageGetHeight(maskRef),
                                        CGImageGetBitsPerComponent(maskRef),
                                        CGImageGetBitsPerPixel(maskRef),
                                        CGImageGetBytesPerRow(maskRef),
                                        CGImageGetDataProvider(maskRef), NULL, false
                                        );

    CGImageRef masked = CGImageCreateWithMask(image.CGImage, mask);
    CGImageRelease(mask);
    return [UIImage imageWithCGImage:masked];
} 
```

那么如何创建自己的蒙版图像呢？

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:47:21.423

尝试将图像转换为没有 alpha 的灰度图像。

*   将其另存为 .jpg 以删除 alpha。然后你可以把它保存回png。该图像应该已经可以使用。

*   通过 image->mode->greyscale 将其转换为灰度（因为在这种掩蔽中丢弃了颜色信息）。

![在此处输入图像描述](../Images/cdee000982bda834346ed9da62d30f04.png)

# memory-management - Glassfish 上的内存管理

> ID：10992294
> 
> 赞同：0
> 
> 时间：2012-06-12T07:34:40.583
> 
> 标签：memory-management, glassfish

我的 Glassfish 服务器上运行了几个由`@TimerService`实例实现的后台任务。这些服务的目标是从文件中提取数据并将该数据插入数据库。

我最初尝试在 JPA 中执行此操作，但系统很容易停滞不前，我现在已将进程转换为响应速度更快的 JDBC。但是，沿途的某个地方仍然存在巨大的内存泄漏，我无法确定。

每个文件都以管理自己的事务的方法提取（1 个文件 = 1 个事务）。我认为一旦这种方法最终确定所有变量松散范围并被 GC'ed，但事实并非如此。经过很短的时间，我正在经历`OutOfMemoryException`。

我想知道 Glassfish 是否、如何以及为什么会保留对我的变量（它们是非常重的对象）的引用。我可以应用哪些设置或方法来最大程度地减少这些内存泄漏？

作为参考，我正在使用库存的 Glassfish 设置并进行了一些修改：

```
-XX:+CMSPermGenSweepingEnabled 
-XX:+CMSClassUnloadingEnabled 
-XX:MaxPermSize=256m
–XmX1024m 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:50:14.147

您可能正在处理类加载器泄漏。JAXB 可以在您解组时执行此操作。要确定您应该使用内存分析器。我强烈推荐使用[Eclipse Memory Analyzer Tool](http://www.eclipse.org/mat/)。只需遵循一些教程，您就应该能够弄清楚。

# java - 在单个 JFrame 中添加多个 JPanel

> ID：10992295
> 
> 赞同：-1
> 
> 时间：2012-06-12T07:34:50.130
> 
> 标签：java, swing, user-interface, netbeans, layout-manager

我创建了一个`JFrame`- 现在我想`JPanel`在该框架中的特定位置添加 4。如何设置面板在框架中的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:38:03.567

为逻辑使用（可能嵌套¹）布局。有关详细信息，请参阅[在容器中布置组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/)。他们能：

*   在构造函数中包含默认间距（通常）
*   计算 GUI 需要多大才能显示组件（在任何 PLAF 中，在应用程序部署的任何系统上）。

额外的间距可以通过添加`EmtpyBorder`到子组件来组织。

1.  查看[嵌套布局示例](https://stackoverflow.com/a/5630271/418556)

    ![](../Images/60a0b7bf612456f6f55341b1fa72d330.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T07:39:57.787

将组件放置在容器中是 Swing 中相当复杂的主题。您通常会使用以某种方式排列它们的布局管理器，而不是为您的组件定义确切的位置。

这是您应该阅读的教程，以获得有关不同布局管理器的（视觉）线索：布局管理器[的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

但是，对于更复杂的布局，Swing 的标准布局管理器可能会很麻烦。或者，您可以使用嵌套布局来获得所需的结果，或者您可以使用非常强大的第三方库：[JGoodies Forms](http://www.jgoodies.com/freeware/libraries/forms/)。当然，缺点是您必须学习另一个库。因此，我只推荐它用于更大的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:37:55.480

对我来说，为框架的容器设置 GridbagLayout 是个好方法。有几个可视化的摆动 GUI 编辑器可以轻松地做到这一点。您可以使用 NetBeans GUI 编辑器或 GWT Designer (https://developers.google.com/web-toolkit/tools/gwtdesigner/) 来完成复杂的 GUI 设计任务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T07:43:18.167

如果它有 4 个位置，您可以使用`BorderLayout`，默认情况下它的 CENTRE，但它也有 EAST、WEST、NORTH、SOUTH 位置用于放置组件。如果. `setLocation`_`layout isn't used`

最好使用`GroupLayout`我在 2005 年开发的 NetBeans 团队，使用现在由 google 免费提供的 Windows Builder Pro。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-12T07:40:06.747

1.  通过将 Frame 的布局设置为 null`setLayout(null)`
2.  创建4个JPanel并使用`setLocation`方法设置它们的位置
3.  `add`使用 JFrame 的方法添加这些面板

# php - 用户定义的数字范围

> ID：10992303
> 
> 赞同：0
> 
> 时间：2012-06-12T07:35:41.990
> 
> 标签：php

我有一个函数，对于特定的数字范围，必须应用百分比：

*   0-100 欧元：5%
*   >100 欧元：3%

这个数字范围和百分比应该是**用户定义的**。

实现应该尽可能简单。

您对指定范围和计算结果有何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:06:34.333

这是我用数组中定义的规则计算结果的简短方法

```
$rules = array(
  5 => '0-100 EUR', // here the percentages and their corresponding values
  3 => '> 100 EUR'
);

$rand = mt_rand(0, 100); // calculate a random percent value
$lastPercentage = 0;

foreach($rules as $percentage => $val) {

  // create a range from 0-5 (in the first iteration)
  // every next iteration it is lastPercentage + 1 (5 + 1 in this case) to lastPercentage + current percentage
  $range = range($lastPercentage, $percentage + $lastPercentage);

  // yep, it is in the percentage range
  if (in_array($rand, $range)) {
    echo $lastPercentage,' < '.$rand.' > '.($percentage + $lastPercentage);
  }

  $lastPercentage = $percentage + 1; // +1 so that there are no overlapping ranges
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:55:48.427

假设您可以访问某种数据库，我会将值存储在那里。您至少需要 3 张桌子：

*范围*

*   id_range
*   from_number
*   直到号码
*   百分比

*用户*

*   id_user

*用户范围*

*   id_range
*   id_user

使 from_number 和 until_number 列可为空，以表示 X 之前的任何内容以及 Y 之后的任何内容。

# php - 每次用户使用 Facebook 应用程序时如何在 Facebook 用户的墙上发帖

> ID：10992308
> 
> 赞同：-3
> 
> 时间：2012-06-12T07:36:01.470
> 
> 标签：php, facebook, facebook-graph-api

> **可能重复：**
> [当用户使用我网站上的应用程序时，如何发布到 Facebook 用户的墙上？](https://stackoverflow.com/questions/11003779/how-to-publish-to-a-facebook-users-wall-when-user-uses-the-app-from-my-website)

我从我的网站使用 PHP 开发了一个 Facebook 应用程序。我希望每次此类用户使用该应用程序时都可以在他/她的墙上发布一条帖子，说明他们正在使用该应用程序以及指向我网站的链接。

这可以做到吗？如果是，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:51:05.090

如果您必须这样做，那么您*应该*使用对话框 API：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

如果您自动执行此操作，用户可能会举报您的应用，这可能会导致 Facebook 将其删除。当您**提示**用户发布消息而不是为他们执行消息时，使用对话框要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:59:53.690

您可能正在寻找 Open Graph 功能，该功能包含使用情况并允许您发布自定义故事，例如“安娜听了 Spotify”。请注意，您必须有额外的权限才能在没有对话框的情况下发布，称为“publish_stream”。

至于每次使用的发布，请获取 jQuery 的 document.ready() 方法并将您的 Javascript 对话框发布位放在那里。

不建议这样做——这很烦人。通常，您让用户根据他们想要分享的某些操作或活动进行发布。不只是使用。顺便说一句，这就是我提到 Open Graph 的原因。这现在更被接受了。

（更新）通过 PHP 做，获取访问令牌，这意味着形成身份验证 url。让用户“登录”，这会将他们发送到 Facebook 进行身份验证。当他们重新访问 yoru 网站时，他们将拥有一个“代码”，您可以用它来交换访问令牌（在 Facebook 网站上记录）。因此，您必须使用某种会话状态变量来跟踪用户是否处于初次访问状态。当他们在身份验证后回来时，存储他们的访问令牌，并检查他们是否仍在第一次访问，然后显示一张表格以张贴到他们的墙上。当他们填写完表单后，使用表单提交给 Facebook 的发布信息用于提要帖子。

这也不推荐——即使是 Facebook 网站上的示例也使用 PHP 和 Javascript 的混合来创建相同的功能。

最好的办法：使用 Javascript SDK，并使用 Open Graph。

# iphone - tableview不显示数据

> ID：10992330
> 
> 赞同：0
> 
> 时间：2012-06-12T07:37:13.160
> 
> 标签：iphone

我正在将数据从 Web 服务传递到表格视图。Web 服务工作正常，但表格视图并非每次都显示数据。

在第一次或第二次之后，表格视图为空白。这是代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath   
{
    static NSString *CellIdentifier=@"Cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    NSLog(@"%@",appdelegate.LongeListArray);
    NSDictionary *dics = [appdelegate.LongeListArray objectAtIndex:indexPath.row];

    if(cell==nil)
    {
        cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];

        UIImageView *img=[[UIImageView alloc] init];
        img.image=[UIImage imageNamed:@"image_clipart.gif"];
        img.tag=1;
        [cell.contentView addSubview:img];

        UILabel *lblName=[[UILabel alloc] init];
        lblName.tag=2;
        lblName.backgroundColor=[UIColor clearColor];
        lblName.font=appdelegate.FontSmall;
        lblName.textAlignment=UITextAlignmentLeft;
        lblName.textColor=appdelegate.BlueColor;
        [cell.contentView addSubview:lblName];

        UIView *imgView=[[UIView alloc] init];
        imgView.tag=3;
        imgView.backgroundColor=[UIColor clearColor ];
        imgView.autoresizingMask=UIViewAutoresizingFlexibleLeftMargin;

        [cell.contentView addSubview:imgView];
        UILabel *lblComments=[[UILabel alloc] init];
        lblComments.tag=4;
        lblComments.backgroundColor=[UIColor clearColor];
        lblComments.font=appdelegate.FontSmall;
        lblComments.textAlignment=UITextAlignmentLeft;
        lblComments.numberOfLines=4;
        lblComments.autoresizingMask=UIViewAutoresizingFlexibleWidth;
        lblComments.textColor=appdelegate.CaptionColor;
        [cell.contentView addSubview:lblComments];

        UILabel *lblDateTime=[[UILabel alloc] init];
        lblDateTime.tag=5;
        lblDateTime.backgroundColor=[UIColor clearColor];
        lblDateTime.font=appdelegate.FontSmall;
       // lblDateTime.textAlignment=UITextAlignmentRight;
        lblDateTime.autoresizingMask=UIViewAutoresizingFlexibleLeftMargin;
        lblDateTime.autoresizingMask=YES;
        lblDateTime.textColor=appdelegate.DataColor;
        [cell.contentView addSubview:lblDateTime];

        if(appdelegate.isiPad)
        {
            img.frame=CGRectMake(10, 10, 75, 75);
            lblName.frame=CGRectMake(100, 5, 450, 25);
            lblComments.frame=CGRectMake(100, 25, 600, 100);
            lblDateTime.frame=CGRectMake(110, 80, 600, 100);
            imgView.frame=CGRectMake(125, 10, 160, 32);
        }
        else
        {
            img.frame=CGRectMake(10, 10, 50, 50);
            lblName.frame=CGRectMake(70, 5, 130, 25);
            lblComments.frame=CGRectMake(70, 25, 240, 100);
            lblDateTime.frame=CGRectMake(70, 80, 240, 100);
            imgView.frame=CGRectMake(200, 10, 110, 25);
        }

        if(appdelegate.selectedLanugage == ArabicLanguage)
        {
            [appdelegate ChangeUIForArabic:cell.contentView];
            imgView.autoresizingMask=UIViewAutoresizingFlexibleRightMargin;
            img.autoresizingMask=UIViewAutoresizingFlexibleLeftMargin;
        }
        [img release];
        [lblName release];
        [imgView release];
        [lblComments release];
        [lblDateTime release];
    }
    UILabel *lblName=(UILabel *)[cell viewWithTag:2];
    UILabel *lblComments=(UILabel *)[cell viewWithTag:4];
    UILabel *lblDateTime=(UILabel *)[cell viewWithTag:5];
    UIView *ratingView=(UIView*)[cell.contentView viewWithTag:3];

    int x=0;
    int rating=[[dics valueForKey:@"lounge_rating"] intValue];
    for(int i=0;i<rating;i++)
    {
        UIImageView *imgRating=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"rating_orange.png"]];
        if(appdelegate.isiPad)
        {
            imgRating.frame=CGRectMake(x, 0, 25, 26);
            x+=27;
        }
        else 
        {
            imgRating.frame=CGRectMake(x, 0, 17, 17);
            x+=19;
        }

        imgRating.backgroundColor=[UIColor clearColor];
        [ratingView addSubview:imgRating];

    }
    for(int i=0;i<(5-rating);i++)
    {
        UIImageView *imgRating=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"rating_grey.png"]];
        if(appdelegate.isiPad)
        {
            imgRating.frame=CGRectMake(x, 0, 25, 26);
            x+=27;
        }
        else 
        {
            imgRating.frame=CGRectMake(x, 0, 17, 17);
            x+=19;
        }
        imgRating.backgroundColor=[UIColor clearColor];
        imgRating.autoresizingMask=UIViewAutoresizingFlexibleRightMargin;
        [ratingView addSubview:imgRating];
        [imgRating release];
        imgRating = nil;

    }

    if(!SearchFlag)
    {
        lblName.text=[dics valueForKey:@"Name"];
        lblComments.text=[dics valueForKey:@"lounge_Title"];
        lblDateTime.text=[appdelegate getDateTimeServerFormatted:[dics valueForKey:@"Start_Date"]];
    }
    else 
    {
        lblName.text=[dics valueForKey:@"Name"];
        lblComments.text=[dics valueForKey:@"discussion_title"];
        lblDateTime.text=[appdelegate getDateTimeServerFormatted:[dics valueForKey:@"added_date"]];
    }

    UIImage *imgTemp =(UIImage*)[dics valueForKey:@"UserImage"];
    UIImageView *imgView=(UIImageView*)[cell.contentView viewWithTag:1];
    if(imgTemp)
        imgView.image=imgTemp;
    else 
        imgView.image=[UIImage imageNamed:@"image_clipart.gif"];

    cell.selectionStyle=UITableViewCellSelectionStyleNone;    

    return cell;
} 
```

# android - 我的光标没有显示下一个数据行？

> ID：10992333
> 
> 赞同：0
> 
> 时间：2012-06-12T07:37:13.537
> 
> 标签：android, sqlite

我正在构建一个 Android 应用程序。我正在使用 Sqlite 数据库、四个单选按钮和一个文本视图。当我单击每个单选按钮时，它应该显示数据库中的下一组数据。现在，它只显示数据库中的第一个数据行。如何更改我的代码以使其显示适当的行？

**编码**

```
 db.open();
    try{

        final Cursor c = db.getAllQue();
        if(c != null)
        {
        if (c.moveToFirst())
        {
            int size = c.getCount();
            for(int i=0;i<=size;i++)

                quen = (TextView) findViewById(R.id.textView1);
                anss1 = (RadioButton) findViewById(R.id.radio0);
                anss2 = (RadioButton) findViewById(R.id.radio1);
                anss3 = (RadioButton) findViewById(R.id.radio2);
                anss4 = (RadioButton) findViewById(R.id.radio3);
                rgp1 = (RadioGroup) findViewById(R.id.radioGroup1);
                String ques = c.getString(0);
                String anes1 = c.getString(1);
                String anes2 = c.getString(2);
                String anes3 = c.getString(3);
                String anes4 = c.getString(4);
                String anes = c.getString(5);

                rgp1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                    public void onCheckedChanged(RadioGroup group, int checkedId) { 
                        RadioButton radioButton = (RadioButton)          findViewById(checkedId);
                         Toast.makeText(SqlliteActivity.this, "" + radioButton.getText(), 2000).show(); 
                        c.moveToNext();
                    }
        });

                    quen.setText(ques);
                anss1.setText(anes1);
                anss2.setText(anes2);
                anss3.setText(anes3);
                anss4.setText(anes4);

            }

        }

    }catch(Exception e){
        System.out.println(e);
    }
    db.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:47:44.763

你不是只迭代这条线吗？`quen = (TextView) findViewById(R.id.textView1);`

此外，您正在寻找光标迭代中的每个 UI 元素和 for...

但是，即使您将大括号添加到 for：

```
 db.open();
try{

    final Cursor c = db.getAllQue();
    if(c != null)
    {
    if (c.moveToFirst())
    {
        int size = c.getCount();
        for(int i=0;i<=size;i++) {

            quen = (TextView) findViewById(R.id.textView1);
            anss1 = (RadioButton) findViewById(R.id.radio0);
            anss2 = (RadioButton) findViewById(R.id.radio1);
            anss3 = (RadioButton) findViewById(R.id.radio2);
            anss4 = (RadioButton) findViewById(R.id.radio3);
            rgp1 = (RadioGroup) findViewById(R.id.radioGroup1);
            String ques = c.getString(0);
            String anes1 = c.getString(1);
            String anes2 = c.getString(2);
            String anes3 = c.getString(3);
            String anes4 = c.getString(4);
            String anes = c.getString(5);

            rgp1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                public void onCheckedChanged(RadioGroup group, int checkedId) { 
                    RadioButton radioButton = (RadioButton)          findViewById(checkedId);
                     Toast.makeText(SqlliteActivity.this, "" + radioButton.getText(),    2000).show(); 
                    c.moveToNext();
                }
         } 
```

您将多次设置 OnchangeListener，但是当您真正单击按钮时，如果光标未关闭，您将移至下一条记录，但您的信息不会更新。

您应该区分什么是 UI 设置、按钮 clic 事件和光标或数据管理。

我认为最好的方法可能是：

*   进行查询。
*   制作一个 CursorAdaptor。
*   单击按钮/单选按钮时，向适配器询问新位置，这可以检索包含所有信息的对象。
*   调用填充视图的方法。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:06:03.967

在循环之外启动您的对象元素。

```
 quen = (TextView) findViewById(R.id.textView1);
        anss1 = (RadioButton) findViewById(R.id.radio0);
        anss2 = (RadioButton) findViewById(R.id.radio1);
        anss3 = (RadioButton) findViewById(R.id.radio2);
        anss4 = (RadioButton) findViewById(R.id.radio3);
        rgp1 = (RadioGroup) findViewById(R.id.radioGroup1); 
```

使用 while 循环获取下一条记录。

```
db.open();
try{
    final Cursor c = db.getAllQue();
    if(c != null)
    {
       c.moveToFirst();
       do{
             //All your operations
             //everytime you will get next record.

         }while(moveToNext());
}
}catch(Exception e){
    e.printstack();
} 
```

# matlab - Matlab删除循环计算PT1

> ID：10992335
> 
> 赞同：0
> 
> 时间：2012-06-12T07:37:23.507
> 
> 标签：matlab, vectorization

我正在使用输入向量 u 在 Matlab 中计算 PT1 行为：

```
u(20:50,1) = 2;
k = 0.8;
x=zeros(50,1);
for i=2:size(u,1)
    x(i) = k*x(i-1) + (1-k)*u(i);
end 
```

如何删除 for 循环以获得相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:13:41.680

这实际上是一个一阶 IIR 滤波器，因此您可以使用[`filter`](http://www.mathworks.com/help/techdoc/ref/filter.html)它：

```
u(20:50, 1) = 2;
k = 0.8;
x = filter(1 - k, [1, -k], u); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:14:15.950

如果你为几个值写出 x(i)，你会在其中看到一个模式：

```
x(1) = 0; % since the loop starts at i=2
x(2) = k*x(1) + (1-k)*u(2)
     = 0      + (1-k)*u(2)
x(3) = k*x(2) + (1-k)*u(3)
     = k*(1-k)*u(2) + (1-k)*u(3)
x(4) = k*x(3) + (1-k)*u(4)
     = k^2*(1-k)*u(2) + k*(1-k)*u(3) + (1-k)*u(4)
... 
```

所以你会很容易发现模式是：

```
x(i) = (1-k) * sum(k^(i-j)*u(j), j=2..i) 
```

现在是一个显式函数。

你可以应用它来删除你的循环，但实际上这个显式函数本身必须计算一个很大的总和。对 x 的每个索引执行此操作可能比循环和重用先前结果花费更多时间。

# javascript - 如何在IOS上拦截UIWebview内的按钮点击？

> ID：10992339
> 
> 赞同：32
> 
> 时间：2012-06-12T07:37:39.463
> 
> 标签：javascript, iphone, ios, uiwebview, onclick

我有一个 HTML 表单，其中包含我在 UIWebview 中打开的某些字段。单击特定按钮时，我想做一个应用内操作。

我现在使用的方法是单击将页面重定向到虚拟 URL 的按钮。我使用委托方法“shouldStartLoadWithRequest”嗅探 URL 并停止重定向。然后我执行我的自定义事件（捕获图像并上传），然后继续。这似乎是一个丑陋的黑客。无论如何，我可以直接挂钩按钮单击事件而不是页面重定向？

**更新** 似乎没有办法设置在单击按钮时调用 JS 函数时触发的委托方法。唯一的方法是使用上面提到的 URL 嗅探方法。joern在下面已经详细解释了这一点，所以我会接受他的回答。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-12T11:42:10.517

您可以执行以下操作：

在您的 HTML 中

```
<a class="yourButton" href="inapp://capture">Button Text</a> 
```

在你的 UIWebViewDelegate

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
   if ([request.URL.scheme isEqualToString:@"inapp"]) {
      if ([request.URL.host isEqualToString:@"capture"]) {
         // do capture action
      }  
      return NO;
   }  
   return YES;
} 
```

我在按钮的 URL 中添加了“捕获”，以便您可以区分应该触发不同操作的几个按钮（如果您愿意的话）：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-22T08:29:06.347

这段代码：

```
<a class="yourButton" href="inapp://capture">Restart</a> 
```

对我不起作用。

我在我的 javascript 代码中为事件函数添加了**“inapp://capture”**

```
KeyboardInputManager.prototype.restart = function (event) {
  window.location.href = "inapp://capture";
  //other code
}; 
```

我也使用 UIWebViewDelegate 它适用于 iOS 8、9。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-22T10:40:01.833

对于 Swift 4.2

HTML端的按钮代码：

```
<a class="catch-iOS" href="inapp://home">Продолжить покупки</a> 
```

UIWebViewDelegate 方法：

```
func webView(_ webView: UIWebView, shouldStartLoadWith request: URLRequest, navigationType: UIWebView.NavigationType) -> Bool {
    if request.url?.scheme == "inapp" {
        if request.url?.host == "home" {
            // do something
        }
    }
    return true
} 
```

# data-structures - 哪个是精确字符串模式匹配的完美数据结构？

> ID：10992342
> 
> 赞同：0
> 
> 时间：2012-06-12T07:37:53.393
> 
> 标签：data-structures, pattern-matching

我正在研究网页内容过滤，其中有 10000 个单词出现在页面上。我必须将它与我的 1500-2500words 词典相匹配。我必须找出页面中是否存在任何单词。

请建议我最好的数据结构来存储我的模式更快的搜索。我研究过树结构。但是让我们取一个可能有 26 种可能的下一个字符的单词 (abc)。我必须为下一个节点保留 26 个指针。（它消耗 26x4 字节）。我不能花那么多内存来存储每个单词的模式。

建议我最好的搜索和最好的记忆。

我是这个领域的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:31:09.723

最好的搜索是 trie [http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie) 为了最好的记忆和搜索的复杂性，我建议你使用[http://en.wikipedia.org/wiki/Suffix_array](http://en.wikipedia.org/wiki/Suffix_array)或[http： //en.wikipedia.org/wiki/Suffix_tree](http://en.wikipedia.org/wiki/Suffix_tree) 另一种方法是通过对字典（O（NlogN））和单词 O（MlogM）进行排序，然后通过一次遍历检查每个元素是否匹配 O（N + M）。您从 2 个索引开始，并且在每一步中，您根据将一个索引处的字典字符串与您在第二个索引处的单词进行比较的结果来增加其中一个索引，如果它们匹配，则您有一个匹配项并转到下一个。您拥有的单词，否则如果您的单词低于字典单词，则转到下一个单词（因为您之前已经浏览了所有字典单词并且没有找到匹配项）否则您转到字典中的下一个元素（尝试在字典中找到一个不低于您的单词的单词）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:41:25.560

[Aho-Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)完全解决了您的问题。经过一些预处理后，您可以在 O(n) 时间内处理每个网页，其中 n 是该页面的大小。您将需要与您的字典大致一样大的辅助存储量。

您的内存限制似乎非常严重，但如果您确实需要减少内存占用，您可以使用在给定状态下存在的所有字符的列表，而不是在每个状态下使用 26 个字符的数组。在处理网页时，您将需要扫描这些字符，这会大大降低您的速度，但您会节省空间。

# html - 从本地主机查看网页并使用 IP 地址

> ID：10992343
> 
> 赞同：0
> 
> 时间：2012-06-12T07:37:55.330
> 
> 标签：html, internet-explorer, webserver, weblogic

**大家好，我有一个在 localhost [base_domain] 上**使用 Oracle WebLogic Server 11gR1 PatchSet 2 的应用程序。如果我使用 localhost 访问 url，我在 IE 浏览器中遇到了这个问题，但如果我使用 IP 地址访问 url，它有页面中的元素正在改变其原始位置的问题 为什么会这样？

在 Mozilla firefox 中，如果我使用 localhost 或 IPaddress 访问 url，一切正常。问题仅出在 IE 使用 IP 地址访问时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:54:51.310

在 IE 8 中，微软为本地服务器和 Internet 服务器引入了不同的渲染模式，以至于 Web 开发人员会泪流满面。通过通过不同的 IP 地址访问，您将导致服务器被视为位于不同的区域。

> 如果没有 X-UA-Compatible 值并且站点在本地 Intranet 安全区域，它将默认以 EmulateIE7 模式呈现。

添加 X-UA-Compatible 标头或 META 以强制使用完整的 IE8（或更高版本）标准模式。

另请参阅[http://sharovatov.wordpress.com/2009/05/18/ie8-rendering-modes-theory-and-practice/](http://sharovatov.wordpress.com/2009/05/18/ie8-rendering-modes-theory-and-practice/)

# javascript - 如何在 Visual Studio 2010/2012 中将自定义文件扩展名注册到 JavaScript 编辑器？

> ID：10992352
> 
> 赞同：4
> 
> 时间：2012-06-12T07:38:08.400
> 
> 标签：javascript, editor, file-extension

（另请参阅MSDN 上的[原始帖子）](http://social.msdn.microsoft.com/Forums/en-US/scripting/thread/31700c7a-e640-473c-b5d8-2b77ea6d5dd6)

我有一个非常简单的要求，即在 Visual Studio 2010/2012 中使用 JavaScript 编辑器编辑我自己的文件扩展名（例如 xsjs、xsapp ...）。当然，这些文件扩展名完全兼容 ECMA 标准。

当我来到工具 -> 选项 -> 文本编辑器 -> 文件扩展名并添加我自己的扩展名时，根本没有 JavaScript 编辑器：（然后我选择了最有可能的选项“脚本编辑器”（见下图）并应用了更改. 但它不适用于任何已注册的扩展。

我在这里错过了什么吗？有人告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:14:14.267

1.  脚本编辑器是您所需要的。Afaik，没有“javascript 编辑器”。

2.  它对我有用。你能解释一下“没用”是什么意思吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:33:53.850

目前无法在任何版本的 Visual Studio 中执行此操作。我刚刚从 [http://connect.microsoft.com/VisualStudio/feedback/details/748574/cannot-register-custom-file-extension-to-javascript-editor-in-visual-studio-2010-2012](http://connect.microsoft.com/VisualStudio/feedback/details/748574/cannot-register-custom-file-extension-to-javascript-editor-in-visual-studio-2010-2012)得到确认 我' m 考虑使用其他编辑器（例如 Eclipse）来完成任务。

# html - 如何为html中的所有粗体文本赋予不同的字体？

> ID：10992355
> 
> 赞同：3
> 
> 时间：2012-06-12T07:38:13.590
> 
> 标签：html, css

我不认为有一种简单的方法可以做到这一点，而且对我来说这似乎是 CSS 的一个缺点。

无论如何，这是问题所在：

我想在我的网页中使用*`different font`*所有**粗体文本。**

例如，看看下面的标记：

```
<span>Hello</span> <strong>world</strong> 
```

和CSS：

```
span { font-weight: bold } 
```

现在有没有一种简单或推荐的方法来让粗体字（使用标签的单词和使用 css 规则的单词）使用不同的字体？

就像是：

```
*[font-weight:bold] { font-family: 'Comic Sans'} 
```

编辑：

我想要的是为页面中的所有粗体文本设置字体的全局选项。鉴于通常 CSS 文件会随着时间的推移而变得更大，因此为所有使用粗体文本的地方提供一个特殊的类并不是一个可行的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:17:03.367

这涉及到一点谎言，但这似乎适用于 Firefox 13、Chrome 最新版、Opera 11.64 甚至 IE9：

```
<h1>This is Bold!</h1>
<p>This is <span id="bold">text</span> that is <strong>bolded</strong>.</p>
<p>Something <span style="font-style: italic;">here</span> is <i>Italicized</i>!</p>

@font-face {
    font-family: 'Merriweather';
    font-weight: regular;
    src: local('Unkempt'), url('http://themes.googleusercontent.com/static/fonts/unkempt/v4/MsFMwD9wD1OCzqw3trD0PA.woff') format('woff');
}
@font-face {
    font-family: 'Merriweather';
    font-weight: bold;
    src: local('Merriweather Bold'), local('Merriweather-Bold'), url('http://themes.googleusercontent.com/static/fonts/merriweather/v4/ZvcMqxEwPfh2qDWBPxn6nnl4twXkwp3_u9ZoePkT564.woff') format('woff');
}
@font-face {
  font-family: 'Merriweather';
  font-style: italic;
  src: local('Cousine Bold Italic'), local('Cousine-BoldItalic'), url('http://themes.googleusercontent.com/static/fonts/cousine/v4/y_AZ5Sz-FwL1lux2xLSTZXhCUOGz7vYGh680lGh-uXM.woff') format('woff');
}
* {
    font-family: 'Merriweather', serif;
}
strong, #bold {
    font-weight: bold;
} 
```

[http://jsfiddle.net/userdude/vF9Qr/4](http://jsfiddle.net/userdude/vF9Qr/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:31:27.130

除非在 CSS 规范中另有说明，否则属性彼此独立工作是 CSS 的一个设计特性，而不是缺点。没有办法将两个属性耦合在一起。即使您将它们设置在相同的规则中，如在 中`.foo { font-weight: bold; font-family: Awkward }`，它们也会独立运行（并且它们中的任何一个或两者都可能被其他样式表规则覆盖）。

所以你只需要设计你对标记和 CSS 的使用，以便为所有粗体文本使用特定的字体，如果这是你想要的。（这在印刷上非常有问题，让我想知道是什么设计错误导致了这种假设的需要。）请注意，通常浏览器样式表可以加粗他们想要的任何内容，并且他们通常希望加粗标题元素和`th`元素等。因此，如果您想防止除您的命令之外的任何内容都变粗，您可以从`* { font-weight: normal; }`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T08:41:17.153

在您的代码中，所有这些`span`都是粗体，为什么您不只是更改标签`font-family`的？`span`

将您的 html 更改为

```
<span>Hello <strong>world</strong></span> 
```

和你的CSS

```
span {font-weight:bold;}
strong {font-family:'Comic Sans';} 
```

您也可以使用`strong`标签，它是使用粗体文本的完美标签。 [http://www.w3.org/wiki/HTML/Elements/strong](http://www.w3.org/wiki/HTML/Elements/strong)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T07:42:03.030

向跨度（粗体）添加一个类，而不是样式，然后执行以下操作：

```
span.Bold { font-weight: bold }
strong, span.Bold { font-family: 'Comic Sans' } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T07:43:44.917

我没有看到这里的问题？由于加粗文本将包含在 a `b`or`strong`元素中（取决于您的标记），您可以简单地使用`font-family`规则定位它吗？

# mysql - 插入数据库

> ID：10992356
> 
> 赞同：5
> 
> 时间：2012-06-12T07:38:16.397
> 
> 标签：mysql, insert

我必须以每秒大约 5 次的速度将大量数据写入 MySQL 数据库。最快的方法是什么：每 1/5 秒插入一次或创建一个队列并每 5 秒插入一次所有存储的数据？如果第二种方法更好 - 是否可以使用 1 个请求插入 1 个表几行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:45:46.510

将多个缓冲池与`innodb_buffer_pool_instances`. 它可以取决于机器上的核心数量。表的使用`Partitioning`。
您可以使用`XML`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T07:46:38.570

由于每笔交易都有固定成本，我会说每隔几秒进行一次多行插入会更好。对于我们在工作中使用的一些系统，我们会缓存数百行，然后一次性将它们全部插入。

从[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/insert.html)中，您可以像这样进行多行插入：

```
INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T07:51:32.797

考虑到插入的频率**最好**使用第二种方法，即排队而不是一次性添加。！

但是您应该首先考虑这些情况：

1.  你的系统是实时的吗？是的，那么您可以承受的最大延迟是多少（因为下一次插入和数据保持/可用大约需要 5 秒）？

2.  数据中出现不正确值/错误的可能性有多大，好像一个数据不正确，如果查询必须失败，您将失去一切。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T07:45:52.300

您可以使用所有数据进行插入，而无需像这样：

```
INSERT INTO table (field1, field2,... , fieldN )
VALUES 
(value1_1', value1_2,... , value1_N),
(value2_1', value2_2,... , value2_N),
...
(valueM_1', valueM_2,... , valueM_N); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T07:47:36.293

我的经验是，将数据插入 MySQL 数据库时，使用批处理会更快。

所以**较慢**的选项是执行多个插入查询：

```
    插入 my_table 值（1，“a”）；
    插入 my_table 值（2，“b”）；

```

**更快**的选择是：

```
    INSERT INTO my_table VALUES (1, "a"), (2, "b");

```

# ant - Ant - 1.8.3 和 Junit @Ignore

> ID：10992358
> 
> 赞同：1
> 
> 时间：2012-06-12T07:39:07.817
> 
> 标签：ant, junit, junit4

Ant 1.8.3 没有忽略带有 @Ignore 注释的 junit 测试类。Ant 1.8.1 完美地忽略了测试类。

这就是我的测试类的样子：

```
....
import org.junit.Ignore
import org.junit.Test      
....

@Ignore("Want to ignore this class tests")
public class TestClass extends ABCDTestCase {

@Test
public void testAbcd(){
....
}

} 
```

挣扎了一天，发现ant-1.8.3中的ant-junit.jar是罪魁祸首。当这个 ant-1.8.3 的 ant-junit.jar 被 1.8.1 的 ant-junit.jar 替换时，它工作得非常好。

我在这里错过了什么吗？或者是解决这个问题的唯一调整？

# mysql - mysql中的存储过程语法

> ID：10992360
> 
> 赞同：2
> 
> 时间：2012-06-12T07:39:12.727
> 
> 标签：mysql, sql, stored-procedures, syntax

我是编写存储过程的新手，我似乎在这个过程中找不到错误。错误标记在 where 部分附近。

我尝试寻找一个基于 if 条件完成设置的示例，但我似乎找不到这样的示例。谁能指出我的错误？

```
DELIMITER $$

CREATE PROCEDURE `incubation`.`bt_voice_modification` 
    (in input_slot varchar(45),in input_port varchar(45))
BEGIN
    SET @SVLAN_STH:=1000;
    SET @SVLAN_DTH:=999;
    SET @CVLAN_DTH:=1000;
    SET @FLOW_INSTANCE:=1;

    UPDATE one_2_one_table
        SET  L2S_USER_FLOW_INSTANCE = @FLOW_INSTANCE := @FLOW_INSTANCE+1;
        SET  L2S_NW_SLOT = input_slot;
        SET  L2S_NW_PORT = input_port;
        IF STH_DTH = 'STH' then
            set  L2S_NW_SVLAN = @SVLAN_STH :=@SVLAN_STH + 1;
        ELSE 
            set  L2S_NW_SVLAN = @SVLAN_DTH ;
            set  L2S_NW_CVLAN = @CVLAN_DTH :=@CVLAN_DTH + 1;
        END if;
        WHERE IPDSLAM_USER_SLOT = 2 AND L2S_USER_TYPE like "%gplt%";

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:11:43.713

`UPDATE`您的代码表明您对语句的工作方式或确切语法没有非常清楚的了解。当您放置 a`;`时，它标志着 (UPDATE) 语句的结束。语法是 - 对于一个表：

```
UPDATE tableX

  SET columnA = what_value_should_columnA-get ,
      columnB = what_value_should_columnB_get ,
      ...
      columnX = what_value_should_columnX_get 

WHERE (conditions that restrict the rows that will be affected)

ORDER BY SomeColumn ;   --- this can be used in MySQL only. Standard SQL 
                        --- (and most DBMS) do not allow ORDER BY clause in
                        --- UPDATE statements. Since you are using variables
                        --- and the order of updating affects the updated values,
                        --- it's essential that you include an ordering. 
```

所以，你`UPDATE`会是这样的：

```
UPDATE one_2_one_table
    SET  L2S_USER_FLOW_INSTANCE = @FLOW_INSTANCE := @FLOW_INSTANCE+1 ,
         L2S_NW_SLOT = input_slot,
         L2S_NW_PORT = input_port,
         L2S_NW_SVLAN = CASE WHEN STH_DTH = 'STH'
                               THEN @SVLAN_STH := @SVLAN_STH + 1
                               ELSE @SVLAN_DTH 
                        END ,
         L2S_NW_CVLAN = CASE WHEN STH_DTH = 'STH'
                               THEN L2S_NW_CVLAN
                               ELSE @CVLAN_DTH := @CVLAN_DTH + 1
                        END

WHERE IPDSLAM_USER_SLOT = 2 
  AND L2S_USER_TYPE like '%gplt%' 

ORDER BY SomeColumn ; 
```

# ruby - 在本地服务器启动后启动 Web 浏览器

> ID：10992362
> 
> 赞同：0
> 
> 时间：2012-06-12T07:39:12.803
> 
> 标签：ruby, pipe, thin

我使用瘦服务器运行本地服务器。当它连续启动时，它会返回如下消息：

```
>> Thin web server (v1.3.1 codename Triple Espresso)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop 
```

我想在服务器成功启动后立即运行 Web 浏览器。我觉得应该可以使用某种管道从薄中捕获消息，并在收到该消息后立即启动 Web 浏览器，但不确定细节。我怎样才能做到这一点？启动 Thin 的代码类似于：

```
Rack::Handler::Thin.run(...) 
```

所以我认为那段代码应该以某种方式嵌入到管道中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:59:36.463

在您的 shell 中，键入以下内容：

```
alias thin='/usr/bin/thin && firefox http://localhost:3000/ &' 
```

（或者，无论服务器的路径`thin`是什么。）

现在，从该 shell 中键入`thin`，您的服务器将启动，一旦成功，`firefox`将启动。

如果您喜欢这样，请将其添加到您的 shell 的启动文件中，例如`~/.bashrc`. （启动文件可能很复杂；有关详细信息，请参阅`bash(1)`手册页。）

# java - 对于 PagerAdapter 类型，方法 getPageTitle(int) 未定义

> ID：10992366
> 
> 赞同：3
> 
> 时间：2012-06-12T07:39:37.547
> 
> 标签：java, viewpagerindicator

我正在尝试使用 Jake Wharton 的 TitlePageIndicator 并遇到此问题。

在 TitlePageIndicator.java 中的 getTitle() 方法中，getPageTitle 带有红色下划线，并带有一条错误消息，指出“方法 getPageTitle(int) 对于 PagerAdapter 类型未定义”。

```
private CharSequence getTitle(int i) {
     CharSequence title = mPagerAdapter.getPageTitle(i);
     if (title == null) {
         title = EMPTY_TITLE;
     }
     return title.toString();
 } 
```

但是，该项目中附加的 android-support-v4.jar 中的 PagerAdapter.class 中确实定义了 getPageTitle 方法。（见下文）

```
public CharSequence getPageTitle(int position) {
    return null;
} 
```

请帮我解决这个问题。提前致谢。

编辑：奇怪的是，当我从支持库中打开 PageAdapter.java 的源代码时，下划线（和错误）消失了。问题可能会在稍后再次出现，但我现在还好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:39:34.887

您的问题可能是范围。当它说未定义类型 - 在此处插入类型 - 时，您可以假设在您正在工作的任何项目的范围内都无法识别它的任何类型。由于打开源代码有效，因此它必须已移动或导入它。很难说，因为你给的就是那个。

# jsf - 使用 在分页中使用地图 抛出 NullPointerException

> ID：10992369
> 
> 赞同：0
> 
> 时间：2012-06-12T07:39:47.647
> 
> 标签：jsf, primefaces

我正在使用`<p:dataTable>`带有分页的 PrimeFaces。我使用`<h:selectBooleancheckbox>`一个`Map`属性来进行相应的行选择。我面临的问题是当我选择并提交值时，有一个`NullPointerException`. 仅检查特定行的值。我正在使用 JSF 2.0 和 PrimeFaces 3.0。

我的页面是：

```
<p:dataTable id="ngoPhotoTab" paginator="true" rows="10" value="#  {photoApprovelBean.lstNgoPhotos}" var="ngoPhoto">
    <p:column headerText="NgoName">
        #{ngoPhoto.ngoName}
    </p:column>
    <p:column headerText="Select">
        <h:selectBooleanCheckbox id="ngoSelect" layout="pageDirection" value="#{photoApprovelBean.checked[ngoPhoto.photo_id]}" />
    </p:column>
    <f:facet name="footer"> 
        <p:commandButton onclick="deletePhoto();" value="Delete" />
    </f:facet>
</p:dataTable> 
```

支持bean逻辑：

```
public class PhotoApprovelBean {

    public String deleteActPhoto() {
        List checkedItems = new ArrayList();

        try {
            for (Iterator<PhotoApprovelBean> itr = disAppPhotoList.iterator(); itr.hasNext();) {
                PhotoApprovelBean item = (PhotoApprovelBean) itr.next();

                if (checked.get(item.getPhotoId())) {
                    checkedItems.add(item.getPhotoId());
                }
            }

            toDeletePhoto(checkedItems);
        }catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    public Map<Long, Boolean> checked = new HashMap<Long, Boolean>();

    public Map<Long, Boolean> getChecked() {
        return checked;
    }
} 
```

`NullPointerException`是线路造成的`if (checked.get(item.getPhotoId()))`。The`Map`仅填充第一页的值。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:24:02.290

你得到了 a `NullPointerException`，因为该`if`语句需要 a `boolean`，但只`Map`包含`Boolean`可能是的值`null`。它们将`null`用于其他页面。的`Boolean`值`null`不能自动装箱为`boolean`. 您需要添加一个空检查。

```
Boolean itemChecked = checked.get(item.getPhotoId());

if (itemChecked != null && itemChecked) {
    // ...
} 
```

然而，更好的是使用 PrimeFaces 自己的`<p:column selectionMode="multiple">`代替。它会记住其他页面上的选择。该`Map`方法仅适用于不使用分页的情况。另请参见[展示示例](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)。以下是它的外观：

```
<p:dataTable id="ngoPhotoTab" paginator="true" rows="10" 
    value="#{photoApprovelBean.lstNgoPhotos}" var="ngoPhoto"
    selection="#{photoApprovelBean.selectedNgoPhotos}" rowKey="#{ngoPhoto.photoId}"
>
    <p:column headerText="NgoName">
        #{ngoPhoto.ngoName}
    </p:column>
    <p:column headerText="Select" selectionMode="multiple" />
    <f:facet name="footer"> 
        <p:commandButton onclick="deletePhoto();" value="Delete" />
    </f:facet>
</p:dataTable> 
```

和

```
private PhotoApprovelBean[] selectedNgoPhotos; 
```

# amazon-s3 - 如何在 AmazonS3 中创建对象的下载链接？

> ID：10992373
> 
> 赞同：2
> 
> 时间：2012-06-12T07:40:10.457
> 
> 标签：amazon-s3, amazon-web-services, amazon

我在我的项目开发中使用以下第三方 API
[http://undesign.org.za/2007/10/22/amazon-s3-php-class](http://undesigned.org.za/2007/10/22/amazon-s3-php-class)

我已经使用此 API 完成了所有任务，例如上传、删除、存储桶列表、对象列表，但是从存储桶创建对象下载链接的主要任务之一是模糊的。

亚马逊官方 API 有 : `get_object_url ( $bucket, $filename, $preauth, $opt )`
获取任何对象的 URL，但上述 API 缺乏方法和文档。

当我单击下载链接时，它显示此代码出现以下错误：

**代码**

```
<h1>All uploaded files</h1>
<?php
    // Get the contents of our bucket
    $contents = $s3->getBucket("mybucket");
    foreach ($contents as $file){

        $fname = $file['name'];
        $furl = "http://mybucket.s3.amazonaws.com/".$fname;

        //output a link to the file
        echo "<a href=\"$furl\">$fname</a><br />";
    }
?> 
```

**错误**

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.
<Error>
 <Code>AccessDenied</Code>
 <Message>Access Denied</Message>
 <RequestId>5A23C56B55611736</RequestId>
 <HostId>m2V2NlI19zgGPq0o4lXmIfod2BeQZIkuH4Yu651372cE/hfa9BkLdV8y3LlYjtw1</HostId>
</Error> 
```

如果有人对此 API 有任何想法或经验，请建议我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:22:59.383

因此，您正在使用：[http](http://undesigned.org.za/2007/10/22/amazon-s3-php-class) ://undesign.org.za/2007/10/22/amazon-s3-php-class S3 类，并希望从存储桶创建对象的下载链接

你应该试试这个：

```
$s3 = new S3($aws_access_key, $aws_secret_key);

$url = $s3->getAuthenticatedURL($aws_bucket_name, $file_name, 3600));

echo "<a href='$url' target='_blank'>Download</a>"; 
```

此下载链接将在 1 小时（3600 秒）后过期，您可以通过最后一个参数延长过期时间以增加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:38:41.473

是否所有文件都具有所有用户读取权限（可公开访问）？

如果您想在没有经过身份验证的情况下访问该文件，那么您必须授予该文件的读取权限。否则，您还可以创建签名的 url。

# c# - C#在打印中覆盖上一页

> ID：10992374
> 
> 赞同：0
> 
> 时间：2012-06-12T07:40:15.243
> 
> 标签：c#, winforms, reporting

大家好，我有一个应用程序可以为员工的每日时间记录创建报告。问题是打印预览对话框中的所有页面都被打印中可用的每个页面覆盖。我怎么可能解决这种问题？第 1 页的内容适用于第 1 页，第 2 页仅适用于第 2 页，反之亦然。这是我的打印代码：

```
 private void simpleButtonOk_Click(object sender, EventArgs e)
    {
        try
        {
            countPage = 0;
            CoolPrintPreviewDialog printPreview = new CoolPrintPreviewDialog();
            PrintDocument doc = new PrintDocument();
            doc.PrintPage += new PrintPageEventHandler(doc_PrintPage);
            printPreview.Document = doc;
            Form p = (Form)printPreview;
            p.WindowState = FormWindowState.Maximized;
            p.ShowDialog();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    void doc_PrintPage(object sender, PrintPageEventArgs e)
    {
        try
        {
            for (int i = 1; i <= countEmployee; i++)
            {
                Font fontName = new Font("Calibri", 12, FontStyle.Bold);
                Font fontPosition = new Font("Calibri", 12, FontStyle.Regular);
                Brush colorBrush = new SolidBrush(Color.Black);

                e.Graphics.DrawString(empName, fontName, colorBrush, new Point(80, 120));
                e.Graphics.DrawString(empPosition, fontPosition, colorBrush, new Point(80, 140));
                e.Graphics.DrawString(empId, fontPosition, colorBrush, new Point(680, 120));
                DataManipulation.PrintSelectEmployeeByMonth(i, e, comboBoxMonth, comboBoxYear, comboBoxDayFrom, comboBoxDayTo);
                countPage++;
                MessageBox.Show(countPage.ToString());
            }
            if (countPage <= countEmployee)
            {
                e.HasMorePages = true;
            }
            else
            {
                e.HasMorePages = false;
            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:04:06.823

`PrintPage`每页触发一次事件；您的`for`循环表明您正在尝试在引发事件时打印所有页面。

您需要删除`for`循环并将索引变量`i`提升为可用于跟踪当前页码的实例级变量。

您的代码的其余部分似乎是正确的；您必须继续请求更多页面，直到事件被触发`countEmployee`次数。

# facebook - Facebook 文章应用程序

> ID：10992376
> 
> 赞同：-3
> 
> 时间：2012-06-12T07:40:26.593
> 
> 标签：facebook

最近我注意到许多新闻网站在 facebook 上创建了新的应用程序来分享文章。

类似于 facebook 平台内网站的迷你站点。

即华盛顿邮报申请。

我试图在 facebook 开发人员中心找到操作方法，但找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:01:15.367

您在这里谈论的是**Open Graph 操作**。应用程序可以定义对象和可以对其执行的操作（尽管现在阅读文章必须使用内置类型），然后代表用户发布这些操作。

请熟悉这个概念，从这里开始阅读：[https ://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)

# asp.net - 让 Visual Studio 2010 Profiler 与 ASP.Net 一起工作？

> ID：10992380
> 
> 赞同：3
> 
> 时间：2012-06-12T07:40:37.873
> 
> 标签：asp.net, visual-studio-2010, profiler

我正在尝试使用内置的 Visual Studio 2010 分析器来分析[EPiServer (cms) 解决方案。](http://world.episerver.com/)

开始分析时，我遇到了可怕的**VSEnterpriseHelper.axd 500 错误**。

> 网站无法正确配置；获取 ASP.NET 进程信息失败。服务器可能未运行 ASP.NET 2.0 或更高版本。请求“http://localhost:17000/VSEnterpriseHelper.axd”返回错误：远程服务器返回错误：(500) 内部服务器错误。

我已经手动将分析器设置添加到 web.config 并将 Microsoft.VisualStudio.Enterprise.AspNetHelper.dll 添加到项目中。

我可以在分析之前，甚至在发生 500 错误时浏览到路径`http://localhost:17000/VSEnterpriseHelper.axd`
，它会返回
`ProcessId=9252;ImpersonatedIdentity=IIS APPPOOL\MyAppPool;ProcessIdentity=IIS APPPOOL\MyAppPool;CanInstrument=True;IsWin32=False`

我试图用

```
protected void Application_Error(object source, EventArgs e)
{
    Exception exc = Server.GetLastError();
    Debug.WriteLine(exc.ToString());
} 
```

但似乎错误发生在我的应用程序之外，因为没有写入[DebugView](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)。

我怎样才能找出问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T15:32:14.590

到达这里有点晚了，但我在 Visual Studio 2012 中的性能分析中遇到了这个问题。

在事件查看器中查看日志向我显示了异常详细信息 - 这是 .net 中的一个错误，这为我提供了有关它的更多信息并让我能够找出原因。

在我的情况下，错误是由于[此链接](https://github.com/andrewdavey/cassette/issues/154)中提到的 Cassette Bundling 错误引起的：

> 异常类型：TinyIoCResolutionException
> 
> 异常消息：无法解析类型：Cassette.Views.BundlesHelper

根据 Amthi 1 月 23 日发布的专门为我修复的帖子，我的解决方案是将以下内容添加到 web.config 中的盒式磁带节点：

```
<cassette cacheDirectory="~/app_data" /> 
```

然后再次启动性能分析工具表明它已为我修复。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T11:02:27.040

尝试将 .config 文件合并到 web.config 中，并在重试之前删除 web.config.backup。还要确保 web.config 没有写保护。

# c# - 将断开连接的 nHibernate 实体附加到会话并从数据库中读取

> ID：10992389
> 
> 赞同：0
> 
> 时间：2012-06-12T07:41:16.803
> 
> 标签：c#, .net, nhibernate

我是 nHibernate 的新手。我有一个接收断开连接的 nHibernate 实体列表的方法。在每个实体中，我都有主键集（主键始终是一个名为 Id 的字段，它是一个 int）。

我现在想要实现的是连接到数据库并用它的主键值填充每个实体。我正在使用流利的映射。

我不确定，但是否可以将实体附加到会话/连接，以及一般如何根据 id 获取数据？

编辑：更具体的信息。

我有几个从基类（例如 EntityBase）继承的休眠实体（例如用户、帐户）。这个基类包含一个公共主键。

我正在传递这些实体的列表，其中填充了主键。

```
public void RetrieveEntities(List<EntityBase> entities) 
```

此时，我想循环遍历这些实体并从数据源中获取完整的实体。是否有可能或正在以错误的方式解决这个问题？

如果需要对问题进行任何澄清，请发表评论。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:45:28.660

使用 .Merge，这将返回您传入实体的附加版本。

就像是：

```
List<EntityBase> attachedEntities = new List<EntityBase>();

foreach(EntityBase entity in entities) 
{
    attachedEntities.Add(session.Merge(entity));
} 
```

# php - 通过ajax拆分输出值，

> ID：10992392
> 
> 赞同：0
> 
> 时间：2012-06-12T07:41:26.017
> 
> 标签：php, javascript, mysql, html

在我的页面内，我有一个带有 datalist 属性的输入（“模型”）和一个选择菜单（“品牌”）。当用户从模型中选择数据列表的选项之一时，它将从品牌选择菜单中动态更改选项值。模型和品牌的两个选项值都是从数据库中调用的。到目前为止，这是我编写的代码；

```
<input type="text" name="type" id="type" list="datalist1" onchange="fw();"/>

    <datalist id="datalist1">

         <?php 

      $query9 = "SELECT DISTINCT model FROM server ORDER BY model ASC";
      $result9 = mysql_query($query9);

      while($row9 = mysql_fetch_assoc($result9)) 
      {

      echo '<option value="'.$row9['model'].'">';

     }              ?>

    </datalist>

 <select name="brand" id="test2"><option value="">-- Select Brand--</option></select> 
```

脚本;

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
function fw()
{
var selname = $("#type").val();  
$.ajax({ url: "getBrand.php",

    data: {"brand":brand},

    type: 'post',

    success: function(output) {      

     document.getElementById('test2').options.length = 0;

     document.getElementById('test2').options[0]=new Option(output,output);
        // document.getElementById('test2').options[1]=new Option(output,output);       
    }

 });
}

</script> 
```

获取品牌.php

```
<?php
define('DB_HOST1', 'localhost');
define('DB_NAME1', 'standby');
define('DB_USER1', 'root');
define('DB_PASS1', '');
$link = mysql_connect(DB_HOST1, DB_USER1, DB_PASS1);
if(!$link)
{
    exit('Cannot connect to server "' . DB_HOST1 . '"');
}

mysql_select_db(DB_NAME1, $link) or die('Cannot use database "' . DB_NAME1 . '"');

if (isset($_POST['brand'])) {   
$selname = $_POST['brand'];

$query = "SELECT * FROM server WHERE model='$brand'";
$res = mysql_query($query);
$aBrand= array();
while($rows = mysql_fetch_assoc($res)) {

$brand= $rows['brand'];

$aBrand[] = $brand; 

echo $aBrand[0];
echo $aBrand[1];
}

}    ?> 
```

根据我的编码，我已经成功地动态更改了选择菜单，但存在一个问题。当从 getBrand.php 调用多个数据时，选择菜单中的“输出”会将所有数据合并为一行。例如，如果数据为“M3000”和“M4000”，则显示为“M3000M4000”。现在，我如何拆分它并使其成为正常的选择选项？

我还在学习 Javascript，希望这里的任何人都可以指导我。

注意：由于 datalist 属性，该代码仅适用于 Firefox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:50:04.633

在从 php 返回的字符串中添加一个特殊字符

PHP

```
 elementcount=0;
  while($row9 = mysql_fetch_assoc($result9)) 
  {
   if(elementcount>0)
   echo '$<option value="'.$row9['model'].'">';//place a $ sign in start or you can for any special character
   else
   echo '<option value="'.$row9['model'].'">';

 } 
```

现在在 javascript

```
success: function(output) {      
     output = output.split("$");
     document.getElementById('test2').options.length = 0;
     //here now loop through the elements and add
     for(var i=0,i<output.length-1)
     document.getElementById('test2').options[0]=new Option(output[i],output[i]);
        // document.getElementById('test2').options[1]=new Option(output,output);       
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:51:03.623

从 getBrand.php 发送您的数据为

回声内爆（“；”，$aBrand）；

这将生成一个字符串，如 M3000;M4000;M5000;M6000

并在您的 java 脚本代码中使用此代码将字符串分解为数组。

StrArr = Str.split (";");

这里'Str'是getBrand.php给出的输出，'StrArr'是包含你的品牌的数组。

# javascript - 将两组选择器合二为一

> ID：10992406
> 
> 赞同：0
> 
> 时间：2012-06-12T07:42:39.003
> 
> 标签：javascript, jquery

我想将一组选择器添加到一组中。

*例如：*

`$("div")`给了我所有的 div 集并`$("span")`给了我所有的跨度集。

现在我想添加它们以形成一组包含所有跨度和 div 的选择器。

避免建议添加类，我只需要合并这两组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:43:24.557

您可以像这样在它们之间使用逗号组合多个选择器

```
$("div, span") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:43:32.620

jQuery 选择器基本上是 css 选择器。您通过逗号分隔组合两个选择器：

```
$("span, div"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T07:43:34.373

您可以只运行组合选择器：

```
jQuery('div, span') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T07:43:53.480

怎么样：

```
$('div, span') 
```

应该给你一组包含 div 和 span 的元素

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T08:52:38.697

您可以使用[添加](http://api.jquery.com/add/)方法。

```
$('div').add('span').DoYourStuffWithBoth(); 
```

或者

```
var divs = $('div');
var spans = $('span');
divs.add(spans).DoYourStuffWithBoth(); 
```

# c++ - 可能是 rapidxml 中的错误 - 但我不确定如何修复

> ID：10992408
> 
> 赞同：2
> 
> 时间：2012-06-12T07:42:45.480
> 
> 标签：c++, xml, rapidxml

我注意到 rapidxml 将非法解析`<<element/>`为名为 的元素`<element`，而不是产生错误。

我认为问题在于`lookup_node_name`. 评论是

```
//  Node name (anything but space \n \r \t / > ? \0) 
```

我从[w3.org 规范](http://www.w3.org/TR/2008/REC-xml-20081126/#NT-Name)中了解到，名称可以包含字母、数字和其他一些字符。

我不确定什么是正确的解决方法。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:11:08.940

从 rapidxml 代码来看，`lookup_node_name`是一个有效名称字符的查找表，正如评论所说，只有特定的几个是被禁止的。

我会尝试通过将 ASCII 字符 0x3C 的查找条目从 0 设置为 1 来将 '< 添加到禁止字符列表中。即，在与字符 0x30..0x3f 相关的行上，将其更改为...

```
 // 0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
...
         1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0,  0,  // 3 
```

对此：

```
 1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0,  1,  0,  0,  // 3 
```

这可能对你有用，但我还没有尝试过。我看到您已尝试通过 sourceforge 联系开发人员，这可能是最好的方法...

# android - TextView 换行导致相邻的 ImageView 消失

> ID：10992409
> 
> 赞同：0
> 
> 时间：2012-06-12T07:42:45.630
> 
> 标签：android, textview, imageview, android-linearlayout

我对一个我无法弄清楚的简单问题感到困惑。得到一个显示按钮，其中包括一个图像（标志）、一个文本和另一个图像（插入符号）。这三个在一个布局容器中，它被分配了一个权重，因为它旁边还有另一个按钮。这是布局容器的外观：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/countryselect"
     android:orientation="horizontal"
     android:layout_width="0dp"
     android:layout_height="wrap_content"
     android:layout_weight=".88"
     android:gravity="center_vertical"
     android:clickable="true" 
     android:onClick="clickHandler" >
       <ImageView
         android:id="@+id/countryflag"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
         android:paddingRight="8dp"        
         android:src="@drawable/flag_argentina" />
       <TextView
         android:id="@+id/countryname"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
         android:text="@string/app_title"
         android:textStyle="bold"
         android:textColor="#4898c0" />
       <ImageView
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
         android:paddingLeft="4dp"
         android:src="@drawable/corner" />
   </LinearLayout> 
```

如果 TextView 中的文本适合一行，那么整个事情就可以正常工作。如果不是这样，即如果文本换成两行，插入符号图像将完全消失（而标志显示为垂直居中）。标志图像和插入符号具有相同的像素高度。请注意，此 LinearLayout 右侧的另一个按钮（上述代码中未显示）仍然显示正常，因此问题不在于插入符号图像被推离屏幕右侧。

知道为什么会发生这种情况/我可以做些什么来保持插入符号图像可见？感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:59:59.997

随着文本的扩展，它使 2md 图像超出屏幕，因此使用 wieght 修复 TextView 的宽度

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/countryselect"
     android:orientation="horizontal"
     android:layout_width="0dp"
     android:layout_height="wrap_content"
     android:layout_weight=".88"
     android:gravity="center_vertical"
     android:clickable="true" 
     android:onClick="clickHandler" 
     android:weightSum="1">
       <ImageView
         android:id="@+id/countryflag"
         android:layout_width="0dp"
         android:layout_height="fill_parent"
         android:paddingRight="8dp"        
         android:src="@drawable/launcher_icon"
         android:layout_weight=".3" />
       <TextView
         android:id="@+id/countryname"
         android:layout_width="0dp"
         android:layout_height="fill_parent"
         android:text="@string/app_title"
         android:textStyle="bold"
         android:textColor="#4898c0" 
          android:layout_weight=".4"/>
       <ImageView
         android:layout_width="0dp"
         android:layout_height="fill_parent"
         android:paddingLeft="4dp"
         android:src="@drawable/launcher_icon" 
          android:layout_weight=".3"/>
   </LinearLayout> 
```

# android - 如何将分页线添加到 android 中的 EditText？

> ID：10992411
> 
> 赞同：4
> 
> 时间：2012-06-12T07:42:52.687
> 
> 标签：android, android-layout, android-edittext, underline

是否可以在 a 中显示页面行`EditText`？

我的意思是这些行：

![在此处输入图像描述](../Images/108f34a03bfc4c330847b46033a9de40.png)

假设我`EditText`的大小为 500 x 500 像素。我希望这些线条在 500 x 500 平方范围内可见。

有没有办法做到这一点？我已经尝试过谷歌，但我找不到答案。我想我的另一个选择是根据 textheight 和 linepacing 动态创建图形，这是一个丑陋的解决方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T09:18:22.177

来自 android 开发网站的记事本应用程序示例向您展示了如何执行此操作。

[http://developer.android.com/resources/samples/NotePad/index.html](http://developer.android.com/resources/samples/NotePad/index.html)

看起来像这样（向下滚动查看代码）：

> ![记事本](../Images/b0c61df8b4273ab10ee4b2b20538dabe.png)

大部分相关代码都在[这个文件](http://developer.android.com/resources/samples/NotePad/src/com/example/android/notepad/NoteEditor.html)中。注意`LinedEditText`内部类。它在活动中定义。它绘制所需的线条。

在活动`onCreate()`方法内部，设置为视图[，](http://developer.android.com/resources/samples/NotePad/res/layout/note_editor.html)`setContentView(R.id.note_editor)`定义如下

[从这里](http://developer.android.com/resources/samples/NotePad/src/com/example/android/notepad/NoteEditor.html)提取的片段。**更新**：@Pieter888 修改代码以在整个`EditText`控件上绘制线条。

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.EditText;

public class LinedEditText extends EditText 
{
    private Rect mRect;
    private Paint mPaint;

    public LinedEditText(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
        mRect = new Rect();
        mPaint = new Paint();
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setColor(0xFF000000);
    }

    /**
     * This is called to draw the LinedEditText object
     * @param canvas The canvas on which the background is drawn.
     */
    @Override
    protected void onDraw(Canvas canvas) 
    {
        int height = canvas.getHeight();
        int curHeight = 0;
        Rect r = mRect;
        Paint paint = mPaint;
        int baseline = getLineBounds(0, r);
        for (curHeight = baseline + 1; curHeight < height; 
                                                 curHeight += getLineHeight())
        {
            canvas.drawLine(r.left, curHeight, r.right, curHeight, paint);
        }
        super.onDraw(canvas);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-01T08:43:10.117

@gideon 上面的答案效果很好，但是当您在其中输入更多文本时会出现问题，`edittext`因为没有相应地绘制更多行。为了解决这个问题，我写了一个覆盖`onMeasure()`并调用`invalidate()`. 当文本增加时，将绘制更多的线条。

```
 @Override
  protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec,heightMeasureSpec);
    invalidate();
  } 
```

现在的代码是：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.EditText;

public class LinedEditText extends EditText 
{
    private Rect mRect;
    private Paint mPaint;

    public LinedEditText(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
        mRect = new Rect();
        mPaint = new Paint();
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setColor(0xFF000000);
    }

    /**
     * This is called to draw the LinedEditText object
     * @param canvas The canvas on which the background is drawn.
     */
    @Override
    protected void onDraw(Canvas canvas) 
    {
        int height = canvas.getHeight();
        int curHeight = 0;
        Rect r = mRect;
        Paint paint = mPaint;
        int baseline = getLineBounds(0, r);
        for (curHeight = baseline + 1; curHeight < height; 
                                                 curHeight += getLineHeight())
        {
            canvas.drawLine(r.left, curHeight, r.right, curHeight, paint);
        }
        super.onDraw(canvas);
    }

 @Override
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
   super.onMeasure(widthMeasureSpec,heightMeasureSpec);
   invalidate();
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-05T11:28:55.100

@gideon 的代码有效，但未绘制更多行

您必须更改`canvas.getHeight()`为`getHeight()`如下：

```
public class LinedEditText extends EditText
 {
private Rect mRect;
private Paint mPaint;

public LinedEditText(Context context, AttributeSet attrs)
{
    super(context, attrs);
    mRect = new Rect();
    mPaint = new Paint();
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setColor(ResourcesCompat.getColor(getResources(), R.color.blue,null));
}

@Override
protected void onDraw(Canvas canvas)
{
    int height = getHeight();
    int curHeight = 0;
    Rect r = mRect;
    Paint paint = mPaint;
    int baseline = getLineBounds(0, r);
    for (curHeight = baseline + 1; curHeight < height;
         curHeight += getLineHeight())
    {
        canvas.drawLine(r.left, curHeight, r.right, curHeight, paint);
    }
    super.onDraw(canvas);
} 
```

# php - 根据排序二维数组

> ID：10992413
> 
> 赞同：2
> 
> 时间：2012-06-12T07:42:56.637
> 
> 标签：php, arrays

我想根据字段年份对以下二维数组进行排序？

```
Array
(

[0] => Array
(
    [from] => 44.91
    [to] => 53.56
    [next] => 108.88
    [year] => 2011

), 
[1] => Array
(
    [from] => 44.44
    [next] => 53.16
    [year] => 2010

), 
[2] => Array
(
    [from] => 42.83
    [next] => 51.36
    [year] => 2012
)
); 
```

所以想要的结果是：

```
Array
(
[1] => Array
(
    [from] => 44.44
    [next] => 53.16
    [year] => 2010

), 
[0] => Array
(
    [from] => 44.91
    [to] => 53.56
    [next] => 108.88
    [year] => 2011

),
[2] => Array
(
    [from] => 42.83
    [next] => 51.36
    [year] => 2012
)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:47:25.200

你试过使用[`uasort()`](http://us3.php.net/manual/en/function.uasort.php)吗？

```
function cmp_year($a, $b) {
    if($a['year'] == $b['year']) return 0;
    return ($a['year'] < $b['year']) ? -1 : 1;
}

uasort($your_array, 'cmp_year'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:51:40.817

您可以使用[`array_multisort()`](http://php.net/array_multisort).

```
foreach ($arr as $k => $v) {
  $years[$k] = $v['year'];
}

array_multisort($years, SORT_DESC, $arr); 
```

# javascript - Javascript 对象自动排序

> ID：10992417
> 
> 赞同：0
> 
> 时间：2012-06-12T07:43:15.510
> 
> 标签：javascript, sorting, object

```
// mechanics
MECHANICS_ISOLATION : 1,
MECHANICS_NA : 2,
MECHANICS_COMPOUND : 3,

// mechanics
Exercise.mechanics = {};
Exercise.mechanics[Exercise.MECHANICS_COMPOUND] = 'Compound';
Exercise.mechanics[Exercise.MECHANICS_ISOLATION] = 'Isolation';
Exercise.mechanics[Exercise.MECHANICS_NA] = 'N/A'; 
```

当我循环通过`Exercise.mechanics`时，键出来排序。如何让未排序的键循环遍历？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:46:37.290

哈希图中的键不可靠。给你钥匙一个订单。例如，将您的键放入一个数组并迭代这些键。

```
var keys = [MECHANICS_ISOLATION, MECHANICS_NA, MECHANICS_COMPOUND];
for (var i = 0; i < keys.length; i++) {
    console.log(Exercise.mechanics[keys[i]]);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T07:53:48.837

你期望的顺序是什么？我让它们在 Fx 和 IE 中未排序

```
3:Compound
1:Isolation
2:N/A 
```

使用此代码[演示](http://jsfiddle.net/mplungjan/4L8r8/)

```
Exercise = {
// mechanics
MECHANICS_ISOLATION : 1,
MECHANICS_NA : 2,
MECHANICS_COMPOUND : 3,
    }

// mechanics
Exercise.mechanics = {};
Exercise.mechanics[Exercise.MECHANICS_COMPOUND] = 'Compound';
Exercise.mechanics[Exercise.MECHANICS_ISOLATION] = 'Isolation';
Exercise.mechanics[Exercise.MECHANICS_NA] = 'N/A';

for (ex in Exercise.mechanics) document.write("<hr>"+ex+":"+Exercise.mechanics[ex]) 
```

# jquery - 调用了 2 个 JSONP 请求。1 有效，但另一个返回 Parsererror

> ID：10992421
> 
> 赞同：2
> 
> 时间：2012-06-12T07:43:27.507
> 
> 标签：jquery, ajax, json, jsonp

参考链接：http: [//jsfiddle.net/LS8zs/](http://jsfiddle.net/LS8zs/)

我尝试使用来自 Kongregate.com 的 api 的**jQuery .ajax()获取 JSON 数据**

“获取用户徽章”有效。（请点击尝试）

但是“**获得所有徽章**”没有。代码基本相同。但是出现错误：

```
parsererror : Error: jQuery17209025343011599034_1339162861022 was not called 
```

我也尝试添加`?callback=foo`到 URL 的末尾，但没有运气。

有人能帮帮我吗？

我是编程新手。我想我想念一些关于*同源政策*的东西，对吧？

或者 api 只是不支持通过 javascript/jQuery 进行 ajax 调用？

请注意，我使用**Ruby On Rails 3.2**来开发 Web 应用程序。我应该使用 ROR 来获取 JSON 数据吗？*（在最佳实践中）*

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:30:04.830

只需键入：

[http://www.kongregate.com/badges.json?callback=foo](http://www.kongregate.com/badges.json?callback=foo)

进入浏览器不会返回 JSONP。但它适用于：

[http://www.kongregate.com/accounts/andrew/badges.json?callback=foo](http://www.kongregate.com/accounts/andrew/badges.json?callback=foo)

所以我猜第一个 URL 根本不支持 JSONP 回调。

如果 jQuery 正确处理 JSONP 请求，同源策略应该无关紧要。

# ruby - 这是 Ruby 中一组数组的预期行为吗？

> ID：10992423
> 
> 赞同：4
> 
> 时间：2012-06-12T07:43:32.480
> 
> 标签：ruby, set, concat

我们在 Ruby 1.8.7 中做了一些工作，需要遍历和分区一个无向图，这在生产中已经奇怪地失败了。当我将失败的代码提取到最简单的组件时，我得到了这个奇怪的失败测试：

```
it 'should be able to clear a ruby set of arrays' do
  a = ["2", "b", "d"]
  b = ["1", "a", "c", "e", "f"]
  set = Set.new([a, b])
  a.concat(b)

  p "before clear: #{set.inspect}"
  set.clear
  p "after clear: #{set.inspect}"
  set.size.should == 0
end 
```

测试失败，输出如下：

```
"before clear: #<Set: {[\"1\", \"a\", \"c\", \"e\", \"f\"], [\"2\", \"b\", \"d\", \"1\", \"a\", \"c\", \"e\", \"f\"]}>"
"after clear: #<Set: {[\"2\", \"b\", \"d\", \"1\", \"a\", \"c\", \"e\", \"f\"]}>"

expected: 0
     got: 1 (using ==) 
```

从集合中删除的尝试也以奇怪的方式表现。我猜 Ruby 在 concat() 下更改的数组中键的哈希值被挂断了，但我当然应该仍然能够清除 Set。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:37:58.853

有一个解决方法，如果您在修改密钥后复制集合，新集合将具有更新的密钥并正确清除。所以设置`set = set.dup`将解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T00:47:49.880

.dup 方法确实是我的第一个解决方法，并且按照宣传的方式进行。

我最终将以下猴子补丁添加到 Set：

```
class Set
  def rehash
    @hash.rehash
  end
end 
```

这允许我在更改其哈希值的任何操作后重新哈希集合的键。

这似乎都在 Ruby 1.9 中得到修复。

# html - Envolve IM 更改网站布局

> ID：10992430
> 
> 赞同：0
> 
> 时间：2012-06-12T07:43:53.810
> 
> 标签：html

我正在为我的网站使用名为 envolve 的 facebook 之类的聊天工具。它工作得很好，除了它改变了我网站的一些布局属性，特别是一些字体和链接的大小，以及嵌入在自定义“课程”类中的 pre 标签中的字体背景 ()

我在他们的网站上问过这个问题，其他几个人提到他们有一些类似的问题，但不知道如何解决。我联系了他们的支持，大约一周后，他们给我发了一封电子邮件，说他们没有足够的资源来进一步研究这个问题，这是可以理解的，因为我什至无法弄清楚；）

我只是在这里问，以防有人对此有答案。

要查看启用聊天时 pre 标签内的字体背景如何变化，请访问此处： [http ://braynzarsoft.net/index.php?p=D3D11OBJMODEL](http://braynzarsoft.net/index.php?p=D3D11OBJMODEL)

您必须登录才能启用聊天并查看更改。登录：

```
username: guest
password: pass 
```

先在没有登录的情况下查看页面，然后登录后查看，看看有什么区别。我真的没有想法，所以我希望这里有人能够对此有所了解

编辑：我应该提到在我的网站上启用 envolve，我只需要 php 中的一行，它连接到 envolve 服务器，所以我真的不能用他们提供的文件来启用服务。它附带了一个名为 envolve_api_client.php 的文件，但这个文件所做的只是连接到他们的服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:37:14.110

我会做以下事情：

*   确保所有样式都在样式表中。
*   删除您的样式表。
*   确认他们的部分看起来没问题。
*   开始逐个（或成组）添加您的样式，然后查看哪些冲突。
*   决定要保留什么以及要添加什么。

# blackberry - 在后台运行时收听 BlackBerry 键盘事件

> ID：10992431
> 
> 赞同：1
> 
> 时间：2012-06-12T07:43:57.633
> 
> 标签：blackberry, java-me

我如何创建一个后台应用程序，它不断地听组合键，例如 1234# 或 5678#，以在 BlackBerry 中启动另一个应用程序。

# html - 无法在 chrome、IE8 的选择元素中使用卢比字体

> ID：10992434
> 
> 赞同：1
> 
> 时间：2012-06-12T07:44:13.907
> 
> 标签：html, css

无法在 chrome、IE8 的选择元素中使用卢比字体

我使用 WebRupee 来显示印度卢比货币。如果字体在标签内，则字体显示正常，`<p>`但如果我将其放在选择选项元素中，则卢比仅在 Firefox 中正确显示，但在 chrome 和 IE8 中不正确显示（仅显示 R）。

```
<select >
   <option>$</option>
   <option>£</option>
   <option>€&lt;/option>
   <option style="font-family:WebRupee;">R</option>
</select>​ 
```

演示 [http://jsfiddle.net/WEJbc/3/](http://jsfiddle.net/WEJbc/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:57:48.253

印度卢比标志 U+20B9，这显然是关于，还没有准备好在互联网上的黄金时段。最近添加到 Unicode 的 6.0 版中，预计在未来十年左右的时间里，它将以几种常用字体提供。然后，您可以在 UTF-8 编码的文档中使用它，或者作为字符引用使用它`&#x20b9;`。

同时，使用货币名称、货币缩写、货币代码或现有的特殊符号，如 RUPEE SIGN U+20A8 (₨)。在货币的下拉菜单中，最好使用本地化名称（例如“美元”）；例如，符号“$”用于表示世界上的几十种货币。

使用`<option style="font-family:WebRupee;">R</option>`是一种完全错误的方法，因为它试图通过使用特技字体将字符 (R) 的含义更改为其他含义。参见例如[http://www.alanflavell.org.uk/charset/fontface-harmful.html](http://www.alanflavell.org.uk/charset/fontface-harmful.html)和[http://alis.isoc.org/web_ml/html/fontface.en.html](http://alis.isoc.org/web_ml/html/fontface.en.html)

从技术上讲，`option`即使在某些情况下它似乎有效的情况下，这个技巧也会失败。原因是浏览器可能会`option`以固定字体呈现元素，不允许内部进行任何字体更改。

可以通过设置将诡计扩展到`option`元素`select { font-family: WebRupee; }`，因为 IE 允许您更改整个下拉菜单的字体，而不是单个选项。但除了字体欺骗的所有问题之外，这将失败，因为 WebRupee 字体的设计使其缺少美元符号 ($)，因此该选项将显示为空。

# mysql - MySQL 性能 - 带有 Where 子句的大表随机行

> ID：10992437
> 
> 赞同：0
> 
> 时间：2012-06-12T07:44:16.927
> 
> 标签：mysql, performance, random, where-clause

我有一个 MySQL 表，目前存储了大约 330,000 条记录。我需要编写一个快速有效的查询来提取 15 条随机记录，但使用基于标志的 where 子句。

例如，我尝试过的几个选项（我可能会添加效率低下）：

**SELECT col1, col2, col3 FROM tbl WHERE flag IN ('opt1', 'opt2', 'opt3') ORDER BY RAND() LIMIT 15;**

这个查询大约需要 3 秒，太慢了。我正在使用的另一个选项是获取返回的所需行数（在本例中为 15）并除以请求标志的总行数（等于 $x），然后运行此查询：

**SELECT col1, col2, col3 FROM tbl WHERE RAND()<= '$x' AND flag IN ('opt1', 'opt2', 'opt3');**

这通常返回 14-16 行，所以这没什么大不了的。我不需要它准确地返回 15，但关闭。此选项将查询时间缩短了一秒，但对于生产用途来说仍然太长了。

我应该注意所有记录都有一个分配的 ID #，从 1 开始。没有漏洞。

也许我只是想多了。有没有人有他们使用过的任何好的替代品？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:16:01.117

在调用查询之前在内存中生成 15 个整数 ID……您已向其中添加了一个不错的`IN`子句。当然，您必须首先获得最大 ID。

# ruby - DataMapper 中字符串属性的最小长度

> ID：10992441
> 
> 赞同：0
> 
> 时间：2012-06-12T07:44:51.390
> 
> 标签：ruby, sinatra, datamapper

我在我的 Sinatra 应用程序中使用 DataMapper。我定义了一个名为“to”的属性，我希望它的最小长度为 10

```
property :to,String,:required => true,:min => 10 
```

这会导致我的应用程序因错误而崩溃

> assert_valid_options'：选项：min 未知（ArgumentError）

我是否以正确的方式指定最小长度？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:32:19.643

尝试

```
validates_length_of :to, :min => 10 
```

如果你知道你的字符串的最大长度，你可以做

```
property :to,String,:required => true,:min => 10 ,:length => 10..20  #length must be between 10 to 20 char 
```

# python - 如何修改 Poly3DCollection 对象的 zdata？

> ID：10992442
> 
> 赞同：4
> 
> 时间：2012-06-12T07:44:53.637
> 
> 标签：python, matplotlib

我目前正在修改 Line2D 对象的 xdata 和 ydata 属性，如下所示：

```
plt.setp(ph, xdata=event.xdata,ydata=event.ydata);
thisline.figure.canvas.draw(); 
```

我想对 Poly3DCollection 类型的曲面图做同样的事情，但是，Poly3DCollection 没有 zdata 属性，所以

```
plt.setp(surf,zdata=z_surface); 
```

不起作用。目前，我正在使用 plot_surface 重新创建绘图，但它非常慢并且会产生其他问题。这样做有更好的说法吗？我想实时更改绘图 zdata。

# c# - 从存储过程中获取一些价值不能

> ID：10992443
> 
> 赞同：0
> 
> 时间：2012-06-12T07:44:56.137
> 
> 标签：c#, sql-server, c#-4.0

我输入用户名 & 我想得到所有细节作为输出。首先我用 php 代码向你展示，

```
$strSQLUSER="SELECT * FROM User WHERE username='".addslashes($MessageArray[0])."' AND state!='1' AND state!='4'";

$result_user=odbc_exec($conn,$strSQLUSER) or die("Could not connect to database");

$huntername   = stripslashes(odbc_result($result_user,"name"));
$huntlicense = stripslashes(odbc_result($result_user,"license")); 
```

然后我使用我的 .net 编码。这里是编码的一部分。

```
 private void MooseSeenInput(string MobileNo, string Date, string odd, params Array[] msg_arr)
    {

        controller = new UnitsController();

        DataSet ds = controller.GetUserDetails(username);
        if (ds.Tables[0].Rows.Count > 0)
        {
            //get username & License
            string user=ds.Tables[0].Rows[0]["name"].ToString();
            string license= ds.Tables[0].Rows[0]["license"].ToString();
        } 
```

然后我为此编写了存储过程......但我不适合这个过程，

```
ALTER PROCEDURE dbo.

 @UserName varchar(50),
 @License  varchar(50) OUTPUT
 AS
 BEGIN

 Select * FROM
 Users
Where UserName = @UserName & State ='1' & State= '4'

END 
```

--exec GetSMSUserDetails_SP

另外在这里我添加了 sqldataprovider 部分

```
 public override DataSet GetSMSUserDetails(string UserName)
    {
        return SqlHelper.ExecuteDataset(ViltraConnectionString, GetFullyQualifiedName("GetSMSUserDetails_SP"),UserName);
    }
     #endregion SMS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:48:50.630

在 sql server 中使用`And`代替`&`字符串 concat。

从 SP 中删除`Out Parameter`，因为您要返回记录。

```
ALTER PROCEDURE dbo.GetSMSUserDetails_SP

 @UserName varchar(50)
 AS
 BEGIN

     Select * FROM
     Users
    Where UserName = @UserName and State Not IN ('1' ,'4')

END 
```

SP 带输出参数。

```
 ALTER PROCEDURE dbo.Getsmsuserdetails_sp @UserName varchar(50), 
                                         @License  varchar(50) output,
                                         @name  varchar(50) output
AS 
  BEGIN 
      SELECT TOP 1 @License = License, @name = name 
      FROM   Users 
      WHERE  UserName = @UserName 
             AND State NOT IN ( '1', '4' ) 
  END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:03:58.777

你不希望查询是..

并**声明不在**（'1'，'4'）？因为，您在发布的第一个代码中使用了**!='1' ？**

此外，请考虑仅返回您需要的字段，而不是使用返回所有字段的“ **SELECT * ”。**

# asp.net-mvc - ASP.NET MVC WebAPI 中的自定义类型序列化问题

> ID：10992445
> 
> 赞同：0
> 
> 时间：2012-06-12T07:45:14.483
> 
> 标签：asp.net-mvc, model-view-controller

我想从我的 ASP.NET MVC WebAPI 应用程序中的方法返回具有以下签名的结果：

```
public class Result
{
    public int ResultCode { get; set; }
    public MapFeatureViewModel Params { get; set; }
    public string Message { get; set; }
} 
```

MapFeatureViewModel 类型签名是

```
public class MapFeatureViewModel
{
    public long Id { get; set; }
    public string Uuid { get; set; }
    public string Feature { get; set; }
    public long MapId { get; set; }
} 
```

到目前为止一切正常；但是，如果我尝试将 Result 类中的 Params 类型更改为“对象”或“动态”，以便将其用于所有其他方法，则会收到以下错误消息：

“您必须在使用本地名称'__type'编写属性之后编写属性'type'='object'。”

知道如何让 WebAPI 序列化非强类型属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:55:58.690

内置格式化程序不知道如何处理动态或对象。但是，您可以创建一个自定义格式化程序 (MediaTypeFormatter)，它可以使用自定义逻辑将它们写出来。在格式化程序中，将“application/json”和“text/json”的 MediaTypeHeaderValue 实例添加到 SupportedMediaTypes 集合中。您还需要覆盖 CanWriteType 以将格式化程序限制为仅适用于您正在序列化的类型，即 MapFeatureViewModel。您需要在集合的开头插入该格式化程序，以便它运行而不是默认格式化程序。您可以通过访问配置对象上的格式化程序集合来完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:17:43.510

有几个替代方案需要考虑。在 Web API 中，您可以使用强类型 CLR 对象作为模型，它们会自动为客户端序列化为 XML 或 JSON。[访问以获取更多信息](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations)

但是，您可以将 JSON 反序列化为 C# 动态对象。如何做到这一点，关于这个主题有一个很好的帖子。[访问以获取更多信息](https://stackoverflow.com/q/3142495/1437962)

# php - 图像未在网站中加载

> ID：10992449
> 
> 赞同：-2
> 
> 时间：2012-06-12T07:45:33.953
> 
> 标签：php, html, image

我在网页上显示图片时遇到问题。图片的 URL 是正确的，但它不显示图片，而是显示替代文本。

这是IMG代码：

```
<img scr="../../images/badges/<?php echo $blog_post['content']; ?>" alt="" /> 
```

html输出是这样的：

```
<img scr="../../images/badges/acht.png" alt="received-badge" /> 
```

我仔细检查了图像的 URL，但这是正确的。代码也没有错，PHP 变量总是用默认值填充。这些图像确实存在。

我知道它应该可以工作，因为我在 PHP 中使用 URL 中的“../../”结构包含了更多文件。

我真的觉得很愚蠢，不能让它工作。

编辑：我忘了提到，我在 FireFox 中检查了 FireBug，在“Net”选项卡中它应该显示所有应该加载的图像，并且那里什么都没有。

有人有想法吗？

提前致谢，马克 Dijkema

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T07:47:34.760

更改`scr`为`src`，您有错字:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T07:48:04.963

`<img scr...`应该是`<img src...`。

# azure - 具有不同配置的多个站点中的相同项目

> ID：10992450
> 
> 赞同：0
> 
> 时间：2012-06-12T07:45:42.297
> 
> 标签：azure, azure-web-roles

我想将相同的 Web 应用程序部署到具有不同域和不同 Web ui 和数据库的多个站点。

在我的 ServiceDefinition 我有这个：

```
<Sites>
  <Site name="Web">
    <Bindings>
      <Binding name="Endpoint1" endpointName="Endpoint1" />
    </Bindings>
  </Site>
  <Site name="Web2" physicalDirectory="..\WebRole1">
    <Bindings>
      <Binding name="Endpoint1" endpointName="Endpoint1" />
    </Bindings>
  </Site>
</Sites> 
```

如何为每个站点加载不同的 css/images/js 和数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:55:35.690

根据您提供的信息，您可能会问两个非常不同的问题。

您提供的服务定义实际上是创建两个独立的网站，它们可能没有任何共同点，它们是从两个独立的文件夹启动的。当您在服务定义中使用多个站点时，您的目标是拥有多个不同的站点，这些站点之间可能共享也可能不共享任何代码。并且根据主机头，您可以决定将显示哪些物理文件夹内容。这是一个很好的例子，[说明如何使用 Windows Azure Web Role 使用多个网站](http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/)。

正如您还提到要加载不同的 css/images/js，您可能只想要一个网站，但是您有不同的资源取决于不同的标题。通过在页面加载事件（或全局）期间解析 URL 中的主机头，然后创建一个基于路径，重定向到包含所有静态资源的特定资源文件夹，这可以在单个网站中非常容易地完成。当您部署您的网站时，您可以将所有静态资源包含在具有相同文件结构的不同文件夹中。您可能不需要多个网站来实现此类目标。

# sql-server - 后端和前端数据库不同时的性能

> ID：10992457
> 
> 赞同：0
> 
> 时间：2012-06-12T07:46:17.917
> 
> 标签：sql-server, ms-access

嗨专家我想知道在哪种情况下我有更多的性能（运行查询的时间）：

1.  如果后端是 MS SQL Server 和 Fontend MS Access
2.  如果后端和前端在 MS Access 上相同
3.  如果后端和前端都相同并且在 MS Sql 服务器上

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:01:56.910

SQL Server 总是比 Access 快（除其他外还有更好的查询优化器），所以只需完全取消 Access...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:23:29.060

只要 MS SQL 的实例运行在数据库服务器上而不是独立的 PC 上，那么这应该提供针对 Access 的卓越查询性能。访问受到您从中访问它的机器的处理能力的限制，因为它是一个基于文件的系统，它没有自己的处理能力，一切都必须在本地运行。

就前端而言，这实际上取决于您要执行的其他任务，使用 Access 前端和 MS SQL 后端是完全可以接受的，因为您仍然可以在服务器端加载任何查询处理因此不会降低性能。

# php - 从 codeigniter url 中删除 index.php

> ID：10992462
> 
> 赞同：4
> 
> 时间：2012-06-12T07:46:57.637
> 
> 标签：php, .htaccess, codeigniter

我是codeigniter的新手。我在 localhost/path/learn_ci 安装了我的 codeigniter。

我已按照 codeigniter wiki 中给出的所有步骤进行操作。这是我的 .htaccess 文件。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /learn_ci/index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
ErrorDocument 404 /index.php
</IfModule> 
```

我还根据需要更改了配置文件。但是当我尝试访问

我收到这个错误

> “在此服务器上找不到请求的 URL /learn_ci/index.php/welcome”

我已经仔细检查了... Apache 中的 mod_rewrite 模块已打开。

RewriteBase 解决方案也不起作用。难道我做错了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:03:44.823

正如其他人所说，确保在您的 apache 配置或虚拟主机文件中将 AllowOverride 设置为 All。鉴于您设置了 codeigniter 的路径，您的 htaccess 应该如下所示：

```
RewriteEngine On
RewriteBase /path/learn_ci

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /path/learn_ci/index.php/$1 [L] 
```

另外，请记住，您正在使用的任何资产（img、css、js 等）都是通过`base_url()`函数或使用相对路径引用的。您项目的根目录将是 /path/learn_ci。

我发现创建虚拟主机并在本地向我的主机文件添加一个条目更容易。这更好地模仿了现实生活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:58:44.033

尝试：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T19:58:39.057

您可以执行以下操作：

首先在 config.php 文件集中

```
$config['index_page'] = ''; 
```

接下来，在 codeigniter 根文件夹中创建一个 .htaccess 文件并添加以下内容：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|public|\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 
```

保存文件。它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T07:56:39.173

您将 htaccess 文件放在与 index.php 相同的目录中的根 public_html 文件夹中

然后从您的 htaccess 文件中删除 /learn_ci，只需将其设为 /index.php/$1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T09:42:49.607

检查你的 apache 配置，它应该是这样的：

```
Options Indexes FollowSymLinks MultiViews
AllowOverride all
Order allow,deny
allow from all 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T06:46:09.060

我想添加我的答案。我的项目基本网址是`http://localhost/newproject/` 我在 newproject 文件夹中包含 htacess 文件。

这是代码。

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

然后我更改配置文件。

```
$config['index_page'] = '';
$config['uri_protocol'] = 'REQUEST_URI'; 
```

一切都开始起作用了。现在不再有 index.php 文件。

# asp.net - System.Web.Providers 与 aspnet_regsql

> ID：10992463
> 
> 赞同：0
> 
> 时间：2012-06-12T07:47:05.777
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-4

我正在尝试实现 system.web.providers 会员提供程序。我是否需要更改我的数据库，如果需要，是否有更新的 aspnet_regsql 工具可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:06:27.627

system.web.providers 会在首次使用时自动创建数据库。

# c++ - 能够访问索引大于数组长度的元素

> ID：10992464
> 
> 赞同：1
> 
> 时间：2012-06-12T07:47:06.243
> 
> 标签：c++, arrays

以下代码似乎在不应该运行时运行。在这个例子中：

```
#include <iostream>
using namespace std;
int main()
{
    char data[1];
    cout<<"Enter data: ";
    cin>>data;
    cout<<data[2]<<endl;
} 
```

输入长度大于 1 的字符串（例如，“Hello”），将产生输出，就好像数组大到足以容纳它（例如，“l”）。当它尝试存储比数组长的值或尝试检索索引大于数组长度的值时，这是否应该引发错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:48:54.357

> 以下代码似乎在**不应该运行时**运行。

这与*“应该”*或*“不***应该**”无关。它是关于*“可能”*或*“可能不是”*。

 ***也就是说，您的程序可能会运行，也可能不会。

这是因为您的程序调用了[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。访问超出数组长度的数组元素会调用未定义的行为，这意味着*任何事情都*可能发生。

编写代码的正确方法是`std::string`用作：

```
#include <iostream>
#include <string>

//using namespace std;  DONT WRITE THIS HERE

int main()
{
    std::string data;
    std::cout<<"Enter data: ";

    std::cin>>data; //read the entire input string, no matter how long it is!

    std::cout<<data<<std::endl; //print the entire string

    if ( data.size() > 2 ) //check if data has atleast 3 characters
    {
         std::cout << data[2] << std::endl; //print 3rd character 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:50:50.953

它可能会在编译或在其他机器上编译的不同参数下崩溃，因为根据文档运行该代码会给出未定义的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T07:53:15.403

这样做是不安全的。它正在做的是覆盖恰好位于缓冲区之后的内存。之后，它会将其读回给您。

这只是因为你的`cin`和`cout`操作没有说：这是一个指向一个字符的指针，我只会写一个字符。相反，它说：分配了足够的空间供我写入。`cin`and操作会一直读取数据，`cout`直到遇到空终止符`\0`。

要解决此问题，您可以将其替换为：

```
std::string data; 
```

C++ 会让你犯很大的内存错误。

一些“规则”可以为您节省大部分时间：

1：**不要**使用`char[]`。而是使用`string`.

2：**不要**使用指针来传递或返回参数。按引用传递，按值返回。

3：**不要**使用数组（例如`int[]`）。使用`vectors`. 您仍然必须检查自己的界限。

只需这三个，您将编写一些“安全”代码和非 C 类代码。***

# javascript - 无法在asp.net中使用Json将数据保存在数据库中

> ID：10992465
> 
> 赞同：1
> 
> 时间：2012-06-12T07:47:11.780
> 
> 标签：javascript, jquery, asp.net, json

我想用 json 将我的数据保存在数据库中。我正在使用以下代码，它既没有给我任何错误，也没有能够将数据保存在数据库中。请帮我。我是json的新手。

```
function myfun() {
        var name = $('[id$=txt1]').val();
        var email = $('[id$=txt2]').val();
        var address = $('[id$=txt3]').val();
        var salary = $('[id$=txt4]').val();
        var data = { name: name, email: email, address: address, salary: salary };
        alert(data.val());
        $.ajax({
            type: "POST",
            url: "Default.aspx/save",
            // data: "{'name':'" + name + "','email':'" + email + "','address':'" + address + "','salary':'" + salary + "'}",
            data: data,
            contentType: "application/json;charset=utf-8",
            datatype: "json",
            async: true,
            success: function(data) {
                $('[id$=lbl1]').val(data.d)
            },
            error: function(msg) {
                alert("failed: " + msg);
            }

        });

    } 
```

---------------服务器端代码--------

```
[System.Web.Services.WebMethod]
    public String save(String name, String email, String address, Int32 salary)
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["cn"].ConnectionString);
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;
        con.Open();
        cmd.CommandText="insert tbfirst values(@name, @email, @address, @salary)";
            cmd.Parameters.Add("@name",System.Data.SqlDbType.VarChar,50).Value = name;
        cmd.Parameters.Add("@email", System.Data.SqlDbType.VarChar,50).Value = email;
        cmd.Parameters.Add("@address", System.Data.SqlDbType.VarChar,50).Value = address;
        cmd.Parameters.Add("@salary", System.Data.SqlDbType.Int).Value = salary;

        cmd.ExecuteNonQuery();
        cmd.Dispose();
        return "Success";

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:11:12.537

请尝试对您的数据进行字符串化：

```
$.ajax({ 
....,
data: JSON.stringify(data),
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:17:02.440

您的问题很可能与 ajax 请求无关，而是与上面的行有关

```
var data = { name: name, email: email, address: address, salary: salary };
alert(data.val()); 
```

由于数据对象没有`val`方法，因此带有警报的行应该会失败。如果您查看浏览器的调试控制台，如果没有显示类似“TypeError：Object # has no method 'val'”的错误消息，我会感到惊讶

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T05:51:27.427

[System.Web.Services.WebMethod] public static String save(String name, String email, String address, Int32 Salary) { SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["cn"].ConnectionString); SqlCommand cmd = 新的 SqlCommand(); cmd.Connection = con; con.Open(); cmd.CommandText="插入 tbfirst 值(@name, @email, @address, @salary)"; cmd.Parameters.Add("@name",System.Data.SqlDbType.VarChar,50).Value = name; cmd.Parameters.Add("@email", System.Data.SqlDbType.VarChar,50).Value = email; cmd.Parameters.Add("@address", System.Data.SqlDbType.VarChar,50).Value = address; cmd.Parameters.Add("@salary", System.Data.SqlDbType.Int).Value = 工资；

```
 cmd.ExecuteNonQuery();
    cmd.Dispose();
    return "Success";

} 
```

你只使用公共字符串，用户公共静态字符串

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T08:02:29.250

如果您使用的是 ASP.NET（不是 MVC），则必须将此*保存*WebMethod 用作静态方法。我在这个线程[Click](https://stackoverflow.com/questions/8890554/jquery-ajax-call-does-not-call-the-function-in-cs-file/8891033#8891033)中写了类似的答案。检查此答案中提供的链接，它真的很有帮助。

此外，您应该开始使用诸如 Firebug（在 Firefox 中）或特定浏览器提供的其他一些 WebDeveloper 工具之类的工具。检查您的请求和响应非常有用。

# symfony - 如何以通用方式处理过滤器的会话存储，避免“必须管理实体”

> ID：10992471
> 
> 赞同：0
> 
> 时间：2012-06-12T07:47:26.600
> 
> 标签：symfony, doctrine-orm

我们都遇到过这个问题：“**必须管理实体**”当我们试图`setFilters()`/`getFilters()`

那么如何以通用方式处理过滤器的会话存储，以避免`merging`和`detaching`/或`re-hydrating`手动实体？

请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:47:27.177

好吧，工作中的一些同事（@benji07）写了这个：

```
/**
 * Set filters
 * @param string $name    Name of the key to store filters
 * @param array  $filters Filters
 */
public function setFilters($name, array $filters = array())
{
    foreach ($filters as $key => $value) {
        // Transform entities objects into a pair of class/id
        if (is_object($value)) {
            if ($value instanceof ArrayCollection) {
                if (count($value)) {
                    $filters[$key] = array(
                        'class' => get_class($value->first()),
                        'ids' => array()
                    );
                    foreach ($value as $v) {
                        $identifier = $this->getDoctrine()->getEntityManager()->getUnitOfWork()->getEntityIdentifier($v);
                        $filters[$key]['ids'][] = $identifier['id'];
                    }
                }
            }
            elseif (!$value instanceof \DateTime) {
                $filters[$key] = array(
                    'class' => get_class($value),
                    'id'    => $this->getDoctrine()->getEntityManager()->getUnitOfWork()->getEntityIdentifier($value)
                );
            }
        }
    }

    $this->getRequest()->getSession()->set(
        $name,
        $filters
    );
}

/**
 * Get Filters
 * @param string $name    Name of the key to get filters
 * @param array  $filters Filters
 *
 * @return array
 */
public function getFilters($name, array $filters = array())
{
    $filters = array_merge(
        $this->getRequest()->getSession()->get(
            $name,
            array()
        ),
        $filters
    );

    foreach ($filters as $key => $value) {
        // Get entities from pair of class/id
        if (is_array($value) && isset($value['class']) && isset($value['id'])) {
            $filters[$key] = $this->getDoctrine()->getEntityManager()->find($value['class'], $value['id']);
        } elseif (isset($value['ids'])) {
            $data = $this->getDoctrine()->getEntityManager()->getRepository($value['class'])->findBy(array('id' => $value['ids']));
            $filters[$key] = new ArrayCollection($data);
        }
    }

    return $filters;
} 
```

**它适用于基本实体和多值选择**

PS：不要忘记为`ArrayCollection`

**免责声明**，我们不知道这是否是一种好的做法，并且我们知道至少有一个限制：您必须确保您尝试在会话中保存的对象具有`id`（99.9% 的情况）

# qtwebkit - QWebPage 无法加载完整的 js 人员

> ID：10992477
> 
> 赞同：2
> 
> 时间：2012-06-12T07:47:35.557
> 
> 标签：qtwebkit

我正在使用 QWebPage 下载一些页面，包括 js 渲染的内容。但是我发现有时，缺少一些js。应该被js渲染结果替换的内容保持为空。

我检查了 QWebPage 的文档，我想我得到了答案，“最后，当页面内容完全加载时，会发出 loadFinished() 信号，与脚本执行或页面渲染无关。”</p>

但是我怎么能等到所有脚本渲染完成。

# opencv - 检测不同照明或背景中的红色

> ID：10992479
> 
> 赞同：0
> 
> 时间：2012-06-12T07:47:38.663
> 
> 标签：opencv, colors, computer-vision

我找不到在不同照明或背景下检测红色的最佳方法。

我发现有[YCbCr 颜色空间](http://en.wikipedia.org/wiki/YCbCr)对红色或蓝色检测很有用（实际上我也需要检测蓝色）。问题是我不知道在不同的闪电中使用哪个阈值。例如，在晴天这个阈值等于 210（从 255），在阴天这个阈值等于 130。

我使用 OpenCV 库来实现这一点。

感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:39:38.767

是的，[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)通常用于此目的。在 HSV 中，您可以看出无论亮度等是什么，都需要红色。我还建议研究两个地方。一个是简单的教程[http://aishack.in/tutorials/tracking-colored-objects-in-opencv/](http://aishack.in/tutorials/tracking-colored-objects-in-opencv/)另一个是拿一本书[学习 OpenCV](https://rads.stackoverflow.com/amzn/click/com/0596516134) 并从那里使用直方图示例。他们完全按照您的需要做。使用 HSV 和直方图可以使您的解决方案更加可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:37:04.167

HSV 颜色空间应该对光照变化更加鲁棒。

# javascript - 如何加载内容（包括内容的图像）然后淡入？

> ID：10992489
> 
> 赞同：1
> 
> 时间：2012-06-12T07:48:11.987
> 
> 标签：javascript, jquery, fadein

为什么内容已加载，但图像仍在加载？如何加载内容（包括内容的图像）然后淡入？

**js**

```
$(document).ready(function(){
    $('#contents').fadeOut('slow', function(){
        $(this).load("url", {}, function(){

            $("#contents").fadeIn('slow', function(){

                alert('Faded in!');

            });

        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:13:54.777

这不是那么简单。您需要将加载处理程序加载到动态加载的图像上，但如果不修改源 HTML，则在它们已经开始加载之前您不能这样做，这使得它有点复杂，因为有些可能在您检查之前实际上已经完成。因此，您可以执行类似的操作，获取动态加载内容中的所有图像对象，然后检查每个对象是否已完成加载。如果它还没有完成加载，则安装一个 onload 处理程序，以便我们可以计算最后一个完成加载的时间。全部加载完成后，我们可以执行以下操作`fadeIn()`：

```
$(document).ready(function(){
    $('#contents').fadeOut('slow', function(){
        var self = $(this);

        function fadeIn() {
            $("#contents").fadeIn('slow', function(){
                alert('Faded in!');
            });
        }

        self.load("url", {}, function() {
            var imgs = self.find("img");
            var imgsRemaining = imgs.length;
            imgs.each(function() {
                // if the image isn't already loaded, then attach an onload handler
                if (!img.complete || !this.height || !this.width) {
                    this.onload = this.onerror = this.onabort = function() {
                        // decrement imgsRemaining
                        --imgsRemaining;
                        // if no more images to finish loading, then start the fade
                        if (imgsRemaining == 0) {
                            fadeIn();
                        }
                    });
                } else {
                    // this image already loaded
                    --imgsRemaining;
                }
            });
            // if there were no images that weren't loaded yet
            if (imgsRemaining == 0) {
                fadeIn();
            }
        });
    });
}); 
```

* * *

或者，对于解决问题的更通用的方法，这里有一个通用的 jQuery 方法，它加载内容，然后在内容和内容中的所有图像都完成加载时调用回调。这将更加可重用，并且可能使您的代码更具可读性。您可以像使用它一样使用它`.load(url, data, fn) method`：

```
jQuery.fn.loadComplete = function(url, data, fn) {
    // check if optional data argument is missing
    if (typeof data == "function") {
        fn = data;
        data = {};
    }
    // dynamically load the content
    this.load(url, data, function() {
        var self = this;
        // when content is parsed, check to see when all images are loaded
        var imgs = $(this).find("img");
        var imgsRemaining = imgs.length;
        imgs.each(function() {
            if (this.complete) {
                // if image is already loaded, just decrement the count
                --imgsRemaining;
            } else {
                // image not loaded yet, install onload handler
                this.onload = this.onerror = this.onabort = function() {
                    // when img has finished loading, check to see if all images are now loaded
                    if (--imgsRemaining == 0) {
                        fn.call(self);
                    }
                };
            }
        });
        if (imgsRemaining == 0) {
            fn.call(self);
        }
    });
} 
```

因此，使用这种新方法，您的代码将是这样的：

```
$(document).ready(function(){
    $('#contents').fadeOut('slow', function(){
        $(this).loadComplete("url", {}, function(){
            $("#contents").fadeIn('slow', function(){
                alert('Faded in!');
            });
        });
    });
}); 
```

# jquery - 使用 JQuery 加载的 MVC 应用程序出现奇怪的“缓存问题”

> ID：10992490
> 
> 赞同：0
> 
> 时间：2012-06-12T07:48:12.550
> 
> 标签：jquery, asp.net-mvc

我有一个使用 JQuery Load 事件调用控制器方法并检索数据的操作，这工作正常，我单击一个按钮，新内容又回来了。但是，在第三次单击后，它会停止获取数据。我在方法的顶部添加了一个断点，并注意到它被命中 3 次，然后没有被命中。这是我的jQuery代码：

```
function callAction() {
    var url = '@Url.Action("Method", "Controller", new { type = "test" })';
    $("#divToLoadData").load(url);
} 
```

正如我所说，这会加载数据，每次我单击链接以调用该函数时，但在第三次检索后，它无法调用该方法并检索数据。我也尝试过使用 $.ajax，并且得到了类似的结果。

有人遇到过类似的吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:04:19.150

由于`jQuery.load()`执行 GET 浏览器可能会缓存请求的结果并提供它而不是访问服务器。您可以通过设置内容过期标头强制浏览器始终将请求发送到服务器。用这个属性装饰你的动作：

```
public class NoCacheAttribute : ActionFilterAttribute
{
    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        if (filterContext.IsChildAction)
            return;

        filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
        filterContext.HttpContext.Response.Cache.SetValidUntilExpires(false);
        filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        filterContext.HttpContext.Response.Cache.SetNoStore();

        base.OnResultExecuting(filterContext);
    }
} 
```

# iphone - 如何在iphone应用程序中为pdf文件添加背景颜色

> ID：10992492
> 
> 赞同：3
> 
> 时间：2012-06-12T07:48:22.297
> 
> 标签：iphone, xcode, pdf, background, uiimage

我正在使用这种方式生成pdf文件现在它工作正常但背景是白色我想给背景一些颜色所以可以给背景颜色。

```
 - (void) generatePdfWithFilePath: (NSString *)thefilePath

  {
  UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);

 NSInteger currentPage = 0;
 BOOL done = NO;
 do 
  {

    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

    currentPage++;
    [self drawPageNumber:currentPage];

    //Draw a border for each page.
    [self drawBorder];

    //Draw text fo our header.
    [self drawHeader];

    //Draw a line below the header.
    [self drawLine];

    //Draw some text for the page.
    [self drawText];

    //Draw an image
    [self drawImage];
    done = YES;

     } 
  while (!done);

 UIGraphicsEndPDFContext();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T09:57:05.563

在 do while 循环中使用此代码

```
CGContextRef currentContext = UIGraphicsGetCurrentContext();
CGContextSetFillColorWithColor(currentContext, [UIColor redColor].CGColor );
CGContextFillRect(currentContext, pdfpageFrame); 
```

这将解决您的问题

# ios - iOS6 beta 和继续开发

> ID：10992493
> 
> 赞同：4
> 
> 时间：2012-06-12T07:48:33.467
> 
> 标签：ios, app-store, ios6

我想知道是否可以在我的设备上试用 iOS6 测试版，但仍然能够开发我的应用程序（在运行 iOS6 测试版的设备上测试它）并将其提交到 AppStore。

我不打算安装 Xcode 4.5 来开发 iOS6 测试版。我只想在我的设备上试用 iOS6 测试版。

编辑：

我在 SuperUser 上注意到了[这个帖子。](https://superuser.com/q/435456/139822)当我下班回家时，我会尝试这种方法，如果可能的话，我会告诉你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:12:02.233

You can easily have two versions of XCode installed in your system (I have installed both XCode 4.4 and XCode 4.5 beta 3) and my iPad is updated to iOS 6\. I can test current apps on my iPad (this is, apps we're working in now) and deploy them, using XCode 4.4 of course. These apps must have a target of iOS 5.5.1 or under and mustn't use any iOS 6 additions.

Installing both XCode versions is quite easy, as the release one ( 4.4) is installed by Mac App Store and beta one (4.5) is installed as a .app file which you can drag & drop into your Application folder. It has a different name so it won't overwrite your 4.4 version.

For XCode to recognize your iOS 6 device you have to open 4.5 version, let Organizer collect data of your device and later you can open XCode 4.4, it will recognize that device image and use it (although you can't develop on iOS 6 with XCode 4.4, you CAN test an iOS 5 app on a iOS 6 device)

Hope this helps you

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:02:09.560

如果您在 xcode 4.3.3 和设备用户 iOS6 beta 上开发。您可以在管理器菜单中添加 iOS6 软件图像，以便在设备 iOS6 beta 上进行应用测试。

但你不能在 xcode 4.3.3 中开发 iOS6

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T07:53:30.207

您将无法使用当前 Xcode 在 iOS 6 设备上调试代码。为此，您需要 Xcode 4.5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T10:51:00.223

此版本的 iOS 仅适用于在注册了 Apple 开发人员计划的开发设备上安装。尝试以未经授权的方式安装此版本的 iOS 可能会使您的设备处于无法使用的状态，这可能需要进行保修期外的维修。更新到 iOS 6 测试版的设备无法恢复到早期版本的 iOS。注册的开发设备将能够升级到未来的 beta 版本和最终的 iOS 6 软件。

Xcode 4.5 Developer Preview 不能用于向 iOS 或 Mac App Store 提交应用程序。继续使用公开发布的 Xcode 版本编译应用并将其提交到 App Store。

Xcode 4.5 开发者预览版和 iOS 6 测试版是预发布软件，被视为 Apple 机密信息，并受您的 iOS 开发者计划许可协议条款的约束。禁止未经授权分发或披露 Apple 机密信息。

检查此以获取更多详细信息[https://developer.apple.com/devcenter/ios/index.action#betadownloads](https://developer.apple.com/devcenter/ios/index.action#betadownloads)

# css - 页面宽度的 100% 处的 div，减去右侧固定 div 的宽度（但不设置 margin-right）

> ID：10992500
> 
> 赞同：4
> 
> 时间：2012-06-12T07:49:24.810
> 
> 标签：css, html, width, inline, placement

我正在拔头发，因为我无法弄清楚这一点。我正在开发一个维基。典型的页面右侧有一个固定宽度的侧边栏。此侧边栏的左侧是文本、div、表格等（页面的内容）。基本上，我希望所有内容都是全宽的——这意味着如果它在侧边栏旁边，它应该是全宽减去侧边栏的长度。如果它不在侧边栏旁边，它应该是页面的整个宽度。像这样：

```
 _______________________________
|                          ___  |
| text text text text te- |   | |
| xt text text text text. | S | | 
| ______________________  | B | |
| |                     | |   | |
| |        table        | |___| |
| |          or         |       |
| |         div         |       |
| |_____________________|       |
|                               |
| more text text text text tex- |
| t text text text text text t- |
| ext text text text text text  |
| ____________________________  |
| |        another table      | |
| |             or            | |
| |            div            | |
| |___________________________| |
|_______________________________| 
```

在文本的情况下，它都完美地环绕在侧边栏上。如果我有一个超长的句子，它会一直到侧边栏的左侧，然后换行。如果我有一个超长的段落，所有的文本都会在侧边栏旁边出现，也会在它的正下方。

但是，我遇到的问题是当我想将 div 放在侧边栏的左侧时。当设置为 100% 时，div 不考虑侧边栏的宽度，而是扩展到页面的全宽，从而与侧边栏重叠。通常我只会将 div 设置为侧边栏宽度的右边距。但是，出于我的目的，这是不可行的，因为在不同的屏幕分辨率上，侧边栏下方的页面上的 div 可能较低，因此 div 右侧会有一个空白间隙（加上它只是为了编码目的更容易解决这个问题，因此页面的 div 知道它们自己应该有多宽）。例如，在我上面的文字图片中，如果页面因为屏幕分辨率较低而变得更窄，第一个框可能在侧边栏下方。对于侧边栏的右边距，这意味着框的右侧会有一个很大的间隙，并且它不会是页面的整个宽度。

这是我正在使用的代码。

```
<html>
<head>
<style type="text/css">#sidebar {
float: right;
width: 250px;
height: 200px;
border: 1px solid red;
}

#la {
border: 1px solid green;
width: 100%;
}
</style>
</head>
<body>

<div id="content">

    <div id="sidebar">Sidebar with fixed width</div>

    <p>The sun is a star.</p>
    <p>It's yellow.</p>
    <p>It's very hot.</p>

    <div id="la">This div is next to the sidebar and should bump up right next to its left side, as in, 100% of the page minus the width of the sidebar. It should not overlap the sidebar. This is not something that can just be done automatically with margin-right using the width of the sidebar because it might not actually be next to the sidebar on certain screen resolutions.</div>

    <p>The sun is a star.</p>
    <p>It's yellow.</p>
    <p>It's very hot.</p>

    <div id="la">This div is NOT next to the sidebar on most screen resolutions - it is under it where there is nothing to the right of it, so it should be the full width of the page.</div>

</div>

</body>
</html> 
```

我希望有一种方法可以做到这一点，如果侧边栏旁边有东西，例如 div 中的表格，它将是页面的最大宽度减去侧边栏的宽度。如果它不在侧边栏旁边，则它是页面的整个宽度。我想我只是希望其他所有内容都像文本一样 - 它会一直上升到它右侧的任何内容（如果它存在则为侧边栏，如果侧边栏不存在则为页面右侧）。

先感谢您！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T08:10:59.743

像这样写：

**CSS**

```
.right{
    float:right;
    width:60px;
    height:60px;
    background:green;
}
.left{
    overflow:hidden;
    border:2px solid yellow;
    background:red;
    height:60px;
} 
```

**HTML**

```
<div class="right">right</div>
<div class="left">left</div> 
```

检查这个[http://jsfiddle.net/rq5WX/](http://jsfiddle.net/rq5WX/)

# android - Android：如何在带有looper的后台线程和服务之间进行选择

> ID：10992501
> 
> 赞同：-1
> 
> 时间：2012-06-12T07:49:37.680
> 
> 标签：android

根据我对 Looper 的理解，它可以是任何请求通过消息中的处理程序运行的中心，Service 也可以这样做。那么决定使用的每个（线程的优先级，可靠，资源，...）的出现是什么。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:03:02.520

与`Handler`我一起工作是基本的方法，创建`Thread`和实现`Handler`，但如果你在更复杂的应用程序上工作，你应该决定`AsyncTask`更复杂，更安全，更快，并提供更多选项。您可以将其声明为内部类或分离类。

`Services`更复杂，您应该知道当时只有一个`Service`可以在内存中，只有一个实例，一个 Service 副本以及更多`Activities`尝试连接到`Service`. 服务通常在您有很长的时间`Tasks`并且您希望它们在未连接任何设备时也继续运行`Activity`，例如音乐播放器、RSS、保持聊天状态等。但这一切都不是免费的，因此您必须关心 CPU例如，防止电池过早耗尽。

如果我向你推荐，那么首先尝试使用`AsyncTask`它，什么时候它不适合你，或者你需要我上面写的东西，用`Service`.

有关[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的更多信息并查看[本教程](http://www.vogella.com/articles/AndroidPerformance/article.html)

# maps - 如何使用 BB10 网络向 Blackberry Maps 添加信息？

> ID：10992504
> 
> 赞同：1
> 
> 时间：2012-06-12T07:49:57.917
> 
> 标签：maps, blackberry-webworks, blackberry-10

我是 blackberry 10 webworks 的新手，我希望能够使用它的纬度和经度来定位一个城市。单击位置后，我想显示有关该位置的一些信息。如何在黑莓 10 网络作品中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:23:20.187

[Geolocation API](https://developer.blackberry.com/html5/apis/navigator.geolocation.html)允许您获取或查看位置（纬度/经度）。[此示例](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Using-HTML5-Geolocation-in-your-Web-or-BlackBerry-WebWorks/ta-p/630406)展示了如何使用它。

您可以使用 lat/lon 作为参数调用*Maps 应用程序，以显示位置。*在文档的*Invoke* API 中查找*MapsArgument 。*

 *如果您想找到离纬度/经度最近的城市，我不确定 WebWorks 是否（还）有这样的 API，但您可以使用*地名词典*（有关它的信息，请参阅 Wikipedia）。会有很多免费的。我建议尝试通过网络服务查询在线。

同样，我会尝试查找在线材料以显示有关该位置的信息。比如在维基百科中查找城市。

祝你好运。*

# web-applications - SmartGWT 进入 gradle

> ID：10992507
> 
> 赞同：2
> 
> 时间：2012-06-12T07:50:14.000
> 
> 标签：web-applications, smartgwt, gradle

我正在开发 java web-app，我正在使用 GWT。但是我需要 GWT 上的 SmartGWT 包装器，并且我正在使用 gradle 依赖项管理。这是我的 build.gradle 文件：

```
apply plugin: 'war'
apply plugin: 'eclipse-wtp'

configurations { gwtCompile }

dependencies {
             // your own dependencies

             // the gwt servlet dependency for the war file 
    compile     'com.google.gwt:gwt-servlet:2.4.0'
    compile     'org.springframework:spring-jdbc:3.1.1.RELEASE'

             // dependencies for the gwt compiler
    gwtCompile (
        [group: 'com.google.gwt', name: 'gwt-user', version: '2.4.0'],          
        [group: 'com.google.gwt', name: 'gwt-dev', version: '2.4.0']          
    )

}

repositories {
    mavenCentral()
}

gwtBuildDir = 'war'

task gwtCompile << {  
    created = (new File(gwtBuildDir)).mkdirs()  
    ant.java(classname:'com.google.gwt.dev.Compiler', failOnError: 'true', fork: 'true') 
    {    
        jvmarg(value: '-Xmx184M')    
        arg(line: '-war ' + gwtBuildDir)
        arg(line: '-logLevel INFO')    
        arg(line: '-style PRETTY')    
        arg(value: 'com.trader.TestGWTGradle')    
        classpath {      
            pathElement(location: 'src')      
            pathElement(path: configurations.compile.asPath)      
            pathElement(path: configurations.gwtCompile.asPath)    
        }  
    }
}

war.dependsOn gwtCompile

war {
    baseName = 'TestGWTGradle'
    archiveName = "${baseName}.${extension}"
    from gwtBuildDir 

    manifest {
        attributes 'Implementation-Title': 'TestGWTGradle Version'
        attributes 'Implementation-Version': '1.0'
        attributes provider: 'gradle'
    }
} 
```

你能告诉我如何在这里进行 SmartGWT 导入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:46:35.447

我不知道 gradle，但与您包含 GWT 的方式相同，并且可以包含 SmartGWT。基本上你需要包括两个 SmartGWT 罐子（如果你想要所有的皮肤）：

`smartgwt-skins.jar` `smartgwt.jar`

您还可以从 Maven 中心检索 SmartGWT 依赖项：

```
<dependency>
    <groupId>com.smartgwt</groupId>
    <artifactId>smartgwt</artifactId>
    <version>2.4</version>
</dependency>

<dependency>
    <groupId>com.smartgwt</groupId>
    <artifactId>smartgwt-skins</artifactId>
    <version>2.4</version>
</dependency> 
```

## 编辑

按照逻辑，它会像

```
SmartGWTdeps (
    [group: 'com.smartgwt', name: 'smartgwt', version: '2.4.0'],          
    [group: 'com.smartgwt', name: 'smartgwt-skins', version: '2.4.0']          
) 
```

# php - 从数据库中获取值后如何删除重复值

> ID：10992514
> 
> 赞同：1
> 
> 时间：2012-06-12T07:50:59.753
> 
> 标签：php, mysql

这是我的代码。

```
$sql   = "select id from user";
$users = mysql_query($sql);
while($urow = mysql_fetch_row($users))
{ 
  echo urow[0];
} 
```

当我运行此代码时，我得到的值是 2、2、33、6、6。我想从中删除重复的值。我需要值 2、33、6 作为输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:53:10.500

您可以`DISTINCT`在查询中使用来获取唯一值：

```
$sql = "select DISTINCT(id) from user" 
```

[http://www.sql-tutorial.com/sql-distinct-sql-tutorial/](http://www.sql-tutorial.com/sql-distinct-sql-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:53:24.510

我认为您甚至可以尝试`SELECT DISTINCT id FROM user`，这将使您在 SQL 级别本身停止重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T07:52:22.827

将结果作为数组获取，然后使用[array_unique()](http://php.net/manual/en/function.array-unique.php)函数

> array_unique — 从数组中删除重复值

# javascript - 如何从此 XRayWrapper 获取内容？

> ID：10992517
> 
> 赞同：1
> 
> 时间：2012-06-12T07:51:19.300
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

在 Firefox 附加组件中，我想向此网站中按钮的 URL 发送 HTTPRequest：[www.google.com/ads/preferences](http://www.google.com/ads/preferences)。我尝试做的是获取包含按钮的表单并向操作属性发出 HTTP 请求（目标是获取服务器发送的双击 cookie，如果您这样做）。问题是，当我得到表单时，我得到一个 XRayWrapper 并且我不知道如何检索该属性（我已经尝试过这样做：

```
// unwrap is not available on older branches (3.5 and 3.6) - Bug 533596
if (XPCNativeWrapper && "unwrap" in XPCNativeWrapper) {
try {
  return XPCNativeWrapper.unwrap(thing);
} catch(e) {
  // Unwrapping will fail for JS literals - numbers, for example. Catch
  // the exception and proceed, it will eventually be returend as-is.
}
}

if (thing['wrappedJSObject']) {
return thing.wrappedJSObject;
} 
```

另外，我发现当我得到 id="content-pane" 的 div 包含表单和对 innerHTML 的访问时，我得到一个空字符串。但这一定是可能的，因为我可以用另一个附加组件firebug查看这些内容....

我真的迷路了，谢谢你的帮助！

**编辑**：我正在使用附加 SDK，所以我创建了一个页面工作者来处理所有这些：

```
createDoubleClick: function() {
    new PageWorker.Page({
      contentURL: "http://www.google.com/ads/preferences",
      contentScriptFile: data.url('contentScripts/getCookie.js'),
      contentScriptWhen: "end",
      onMessage: function(message) {    
        console.log(message);                                   
      }                                       
    });                 
} 
```

然后，在 contetScript 中，我尝试获取 DOM：

```
// Get button 
var idPanel = "content-pane";

// Get content panel
var panel = document.getElementById(idPanel);

console.log(panel.innerHTML); 
```

结果：

```
info: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:08:15.683

您想要删除该包装器的唯一情况是想要与网页的 JavaScript 代码交互的扩展 - 即使这样，您是否*应该*这样做也是值得怀疑的。在这种特殊情况下，您绝对不应该这样做。XrayWrapper（以前称为 XPCNativeWrapper）是一个[安全层，旨在保护您的扩展](https://developer.mozilla.org/en/XPCNativeWrapper)。您仍然可以通过它访问任何 DOM 方法和属性，就像您通常那样：

```
var url = form.getAttribute("action"); 
```

如果此调用未返回任何内容，则很可能`action`在您尝试访问该属性时未设置该属性。您可能需要等待更长时间，例如在`load`事件处理程序中运行您的代码，而不是`DOMContentLoaded`（显然，我不知道您当前在做什么）。

# visual-c++ - MFC 搜索编辑框

> ID：10992521
> 
> 赞同：0
> 
> 时间：2012-06-12T07:51:36.367
> 
> 标签：visual-c++, mfc, cedit

我正在寻找类似这样的搜索框控件 ![在此处输入图像描述](../Images/caddeaaf2292704d16cf43f5edaa4720.png)

MFC 中是否有可用的控件，或者我们需要创建自己的控件，

我们可以参考任何示例/参考代码，我尝试使用谷歌搜索，但我更多的是获得 CEditComboBox 示例而不是这种类型的控件。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:46:43.953

如果您使用的是 VS2008 SP1 或更高版本，则您有[CMFCEditBrowseCtrl](http://msdn.microsoft.com/en-us/library/bb983421)。

这是一个带有按钮的编辑控件。当您按下按钮时，它具有内置的“浏览文件”或“浏览文件夹”操作，但您可以创建自己的自定义操作（搜索），也可以自定义按钮图像。

查看有关[EnableBrowseButton](http://msdn.microsoft.com/en-us/library/bb984186)和[OnBrowse](http://msdn.microsoft.com/en-us/library/bb983762)的文档以了解如何自定义操作，并[查看 SetBrowseButtonImage](http://msdn.microsoft.com/en-us/library/bb983721)以自定义图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T13:48:10.040

除了在 CListBox 中进行搜索外，我还需要一个像这样的功能。这是当用户在编辑框中键入时我使用 EN_CHANGE 通知所做的事情：

*   m_sSearch 是与 CEdit 控件关联的 CString
*   m_lbRequest 是与同一个控件关联的 CListBox

> ```
> void CRequestDlg::OnEnChangeEditSearch()
> {   
>     UpdateData(TRUE);
>     string sEdit = m_sSearch.GetBuffer(m_sSearch.GetLength());
>     string sTmp;
>     for ( int n_pos = 0; n_pos < m_lbRequest.GetCount(); n_pos++ )
>     {
>         CString temp;
>         m_lbRequest.GetText(n_pos, temp);
>         sTmp = string(temp);
>         if ( sTmp.find(m_sSearch) != string::npos )
>         {
>             m_lbRequest.SetCurSel(n_pos);
>             break;
>         }
>     } 
>     UpdateData(FALSE);
> } 
> ```

# maven-3 - 哪些版本的 cobertura 和 surefire 插件在 maven3 下可以协同工作？

> ID：10992522
> 
> 赞同：1
> 
> 时间：2012-06-12T07:51:40.280
> 
> 标签：maven-3, cobertura, maven-surefire-plugin

哪些版本的**cobertura**和**surefire**插件在**maven3**下可以协同工作？

切换到 maven3 后，我发现`mvn cobertura:cobertura`不再生成有关测试覆盖率的报告（显示的覆盖率为 0%）。它在maven2下工作......

然而，在发现其他项目之一的报告仍在工作后，我分析了有效的 pom.xml 文件。在发现我正在使用其他版本的插件后，我已经`maven-surefire-plugin`从 2.8 版本降级到 2.4.3 版本。我`maven-cobertura-plugin`在 2.5.1 版中使用。

这是一个可行的解决方案，但是我使用的插件版本已经很旧了，但是在找到有效的版本对之前，我不想进行试验。所以，我的问题是，是什么导致这两个插件之间不兼容？是错误还是插件的行为在版本之间发生了变化，导致它们不兼容？在哪里可以找到有关插件兼容性的信息，而不是插件本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:18:27.550

[请参阅我对此](https://stackoverflow.com/questions/11010428/is-the-surefires-forkmode-never-working-with-cobertura-under-maven-3/11952132#11952132)的回答。基本上`forkMode=never`不能保证与 cobertura 一起工作，并且只是在旧版本的 Maven 中偶然工作。

# c# - 使用 C# 将数据绑定到许多文本框

> ID：10992528
> 
> 赞同：0
> 
> 时间：2012-06-12T07:52:01.580
> 
> 标签：c#, asp.net, sql, visual-studio-2010, visual-studio

我有一个由分号分隔的数据绑定，ef (1;3;4;3;) 我将如何分隔它们以便在单独的文本框中显示每个数字？用户还需要能够使用 add 函数（已经实现），以便当数据被添加回文本框时，它们会以分号分隔符存储在 sql 中。

```
 {

        textBox1.DataBindings.Add(new Binding("Text", sudokuDataSet, "puzzle.puzzle"));
        textBox2?
        textBox3?

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:55:13.460

据我了解，您将一些数字存储在数据库中，以“；”分隔 像 1;2;3;5;7
如果这是你的问题，那么在一个字符串中获取它并使用**string.Split()**并在你的情况下将分隔字符传递给这个方法“;” . 返回一个字符串数组。从数组中获取值并应用于文本框。
欲了解更多信息，请访问[链接](http://www.dotnetperls.com/split)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:37:08.637

第一步。

如果您需要在文本框中显示逗号分隔的数字。您必须将数字存储在字符串中，然后使用 string.split(,) 它将拆分数字并在数组中返回给您。现在您将每个数字都放在单独的数组位置。您现在将这些数字放入文本框中数组的位置。

第二步

如果您需要通过用分隔符将它们从多个文本框分隔到数据库中。您必须创建一个字符串，然后添加文本框，例如

`String str = textbox1.Text;
str = str + ',' + textbox2.text;
str = str + ',' + textbox3.text;`

并继续。

希望这对您有所帮助。

# objective-c - 在转发类中找不到属性

> ID：10992530
> 
> 赞同：7
> 
> 时间：2012-06-12T07:52:17.367
> 
> 标签：objective-c, ios, xcode, properties

我遇到了一个困扰我一段时间的问题——尤其是因为它对我没有任何意义。

Xcode 似乎找不到我的对象的某些属性，即使它们已正确声明。这里有一些代码：

.h 文件

```
@interface Start1ViewController : UIViewController {
    NSString *updatedStatus;
    NSString *updatedTime;
}
@property (retain, nonatomic) NSString *updatedTime;
@property (retain, nonatomic) NSString *updatedStatus; 
```

以及 .m 中的相应合成

```
#import "Start1ViewController.h"

@implementation Start1ViewController
@synthesize updatedStatus, updatedTime; 
```

我想从持有上述类实例的对象访问这些属性：

```
#import <UIKit/UIKit.h>
@class Start1ViewController;

@interface PartyPickerViewController : UIViewController {

IBOutlet UIDatePicker *datePicker;
Start1ViewController *start1ViewController;
} 
```

.m

```
-(IBAction)buttonPressed:(id)sender{

NSDate *selected =[datePicker date];
NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
[timeFormatter setDateFormat:@"HH:mm"];
NSString *dateString = [timeFormatter stringFromDate:selected];
[start1ViewController setUpdatedStatus:@"Party"];
[start1ViewController setUpdatedTime:dateString];
[self.navigationController popViewControllerAnimated:YES];
} 
```

Xcode 告诉我 setUpdatedStatus 和 setUpdatedTime 不存在......而且它们不起作用。我尝试使用 start1ViewController.updatedStatus=@"Party"; 相反，但这根本不会说“在 Start1ViewController 类的对象上找不到属性更新状态”

我之前遇到过这个问题，那次我通过在使用 .-notation 和显式使用 setter 方法之间多次切换，以某种方式让它工作，但即使在它确实工作的其他情况下，我仍然收到有关方法和使用 .notation 时“找不到属性”

有问题的属性是简单的 NSString，所以我怀疑其他类不知道 NSString 类可能是一个问题？

提前感谢您的帮助！=)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T07:53:58.333

你是导入的`Start1ViewController.h`吗`PartyPickerViewController.m`？因为当您在接口中使用@class 时，您只需向编译器承诺有一个名为`Start1ViewController`. 但在那之后，您需要`Start1ViewController.h`在您的实现中导入以使其`Start1ViewController.h`, 它的属性和方法对其他类可见。

# z3 - 将公式转换为 CNF

> ID：10992531
> 
> 赞同：4
> 
> 时间：2012-06-12T07:52:20.517
> 
> 标签：z3

有没有办法使用 z3 将公式转换为 CNF（使用 Tseitsin 样式编码）？我正在寻找类似`simplify`命令的东西，但保证返回的公式是 CNF。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:19:30.610

您可以使用该`apply`命令来执行此操作。我们可以为这个命令提供任意的战术/策略。有关 Z3 4.0 中的战术和策略的更多信息，请查看教程[http://rise4fun.com/Z3/tutorial/strategies](http://rise4fun.com/Z3/tutorial/strategies)

该命令`(help-tactic)`可用于显示 Z3 4.0 中所有可用的战术及其参数。程序化使用更方便，更灵活。这是一个基于新 Python API 的教程：[http](http://rise4fun.com/Z3Py/tutorial/strategies) ://rise4fun.com/Z3Py/tutorial/strategies 。.Net 和 C/C++ API 中提供了相同的功能。

以下脚本演示了如何使用此框架将公式转换为 CNF：

[http://rise4fun.com/Z3/TEu6](http://rise4fun.com/Z3/TEu6)

# c# - 在紧凑的框架中动态增长和缩小 DataGrid？

> ID：10992547
> 
> 赞同：1
> 
> 时间：2012-06-12T07:53:58.913
> 
> 标签：c#, datagrid, windows-mobile, compact-framework

我在 Compact Framework 中有一个 DataGrid，我需要填写数万条记录，这被证明是一个问题，因为我尝试这样做时内存不足。

有没有一种方法可以动态地只显示和加载用户正在查看的行，而不是将所有行一次性转储到网格中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T07:39:23.417

下面的代码将自动调整数据源为数组的数据网格的列宽。

```
 public static void AutosizeColumnsWithArray(DataGrid grid, PaintEventArgs e)
    {
        Font dataFont = grid.Font;
        Font headerFont = GetHeaderFont(dataFont);
        IList list = null;
        if (grid.DataSource is IList)
        {
            list = (IList) grid.DataSource;
        }
        else if (grid.DataSource is IListSource)
        {
            list = ((IListSource) grid.DataSource).GetList();
        }

        if (list == null || list.Count < 0)
        {
            return;
        }

        if (grid.TableStyles.Count == 0)
        {
            return;
        }

        var pdc = TypeDescriptor.GetProperties(list[0]);
        var dataGridTableStyle = new DataGridTableStyle();
        dataGridTableStyle.MappingName = GetMappingName(list);
        int totalWidth = 0;

        for (int i = 0; i < pdc.Count; i++)
        {
            var columnName = pdc[i].Name;

            bool validColumn = grid.TableStyles[0].GridColumnStyles.Contains(columnName);
            if (!validColumn)
            {
                continue;
            }

            var gridColumnStyle = grid.TableStyles[0].GridColumnStyles[columnName];
            var indexToEdit = grid.TableStyles[0].GridColumnStyles.IndexOf(gridColumnStyle);

            var headerText = grid.TableStyles[0].GridColumnStyles[columnName].HeaderText;
            var maxSize = e.Graphics.MeasureString(headerText, headerFont);
            int maxLength = headerText.Length;

            int rowCount = 0;
            const int maxRowsToCompare = 200;
            foreach (object o in list)
            {
                if (rowCount == maxRowsToCompare)
                {
                    break;
                }
                object result = pdc[i].GetValue(o);

                string value = result == null ? string.Empty : result.ToString().Trim();

                if (ValueCannotBeLongest(value, maxLength))
                {
                    rowCount++;
                    continue;
                }

                SizeF size = e.Graphics.MeasureString(value, dataFont);
                if (size.Width > maxSize.Width)
                {
                    maxSize = size;
                    maxLength = value.Length;
                }
                rowCount++;
            }
            var newWidth = (int) (maxSize.Width + 5);
            grid.TableStyles[0].GridColumnStyles[indexToEdit].Width = newWidth;
            totalWidth += newWidth;
        }
    }

    private static bool ValueCannotBeLongest(string value, int maxLength)
    {
        return (value.Length == 0) || (value.Length + 3 < maxLength);
    }

    private static string GetMappingName(IList list)
    {
        string result;

        if (list is ITypedList)
        {
            result = ((ITypedList) list).GetListName(null);
        }
        else
        {
            result = list.GetType().Name;
        }

        return result;
    }

    private static Font GetHeaderFont(Font dataFont)
    {
        string FontName = dataFont.Name;
        float FontSize = dataFont.Size;
        return new Font(FontName, FontSize, FontStyle.Bold);
    } 
```

# java - 如何使用 Twitter4j 在 Twitter 中获取 via 字段？

> ID：10992550
> 
> 赞同：1
> 
> 时间：2012-06-12T07:54:24.790
> 
> 标签：java, android, twitter4j

我正在使用 Twitter4j 库将 Twitter 与 android 集成。我有用户访问令牌和秘密，我还能够获取用户名，他/她的推文下面是此代码。

```
AccessToken a = new AccessToken(tokens[0], tokens[1]);
        Twitter twitter = new TwitterFactory().getInstance();
        twitter.setOAuthConsumer(Constants.CONSUMER_KEY,
                Constants.CONSUMER_SECRET);
        twitter.setOAuthAccessToken(a);
        // twitter.updateStatus(msg);

        List<Status> statuses = twitter.getFriendsTimeline();
        System.out.println("Showing friends timeline.");
        for (Status status : statuses) {
             System.out.println(status.getUser().getName() + ":"
             + status.getText() + ":" + status.);

        } 
```

现在我想获取一些推文中出现的**Via 字段消息**，但无法执行此操作，请帮助我执行此操作我还附上了我想要获取的屏幕截图，请查看此内容并给我任何建议。

![在此处输入图像描述](../Images/b236bd4fefb83eb389ce4a7be69e7adc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:35:31.113

转推状态的人现在在 Twitter 主页上的显示略有不同。

![转推](../Images/4f105f13d25279e40e76c4f6a86ae425.png)

当我使用以下方法在 Java 中获取并打印上述状态时：

```
System.out.println(status.getUser().getName() + ":" + status.getText()); 
```

我得到以下结果：

> Stack Exchange：RT @StackGameDev：Vector3 是否应该从 Vector2 继承？[http://t.co/JZXXB6kr](http://t.co/JZXXB6kr) #architecture

因此，可以使用该方法`User`直接读取转发状态的人。`status.getUser()`

最初发布推文的用户有点难以获得。没有方法（我可以找到）直接阅读原始海报，但您可以从上面的示例中看到 Twitter 将用户名添加到消息文本中（示例中为“RT @StackGameDev:”）。

# c++ - 如何填充 Vec3b 数组

> ID：10992551
> 
> 赞同：4
> 
> 时间：2012-06-12T07:54:45.197
> 
> 标签：c++, image, opencv, colors

我正在使用 OpenCV 处理 C++ 中的图像。

我用二维的 uchar 数组编写了代码，我可以在其中读取图像的像素值，使用 imread 以灰度方式上传`.at< uchar>(i,j)`。

但是我想对彩色图像做同样的事情。因为我知道要访问我现在需要的像素值，`.at< Vec3b>(i,j)[0]`所以我制作了一个类似的二维数组。`.at< Vec3b>(i,j)[1]``.at< Vec3b>(i,j)[2]``Vec3b`

但我不知道如何用像素值填充这个数组。它必须是一个二维数组。

我试过：

```
array[width][height].val[0]=img.at< Vec3b>(i,j)[0] 
```

但这没有用。

在 OpenCV 文档或这里都没有找到答案。

有人有想法吗？

我已经包含了我的一些代码。我需要一个数组，因为我已经让我的整个算法使用数组来处理只有一个通道的灰度图像。

灰度代码是这样的：

```
for(int i=0;i<height;i++){
    for(int j=0;j<width;j++){
        image_data[i*width+j]=all_images[nb_image-1].at< uchar>(i,j);
    }
} 
```

我从哪里读到：

```
std::vector< cv::Mat> all_images 
```

每个图像（我有一个长序列），检索 uchar 数组中的像素值`image_data`，并处理它们。

我现在想做同样的事情，但对于 RGB 图像，我无法读取每个通道的数据像素并将它们放入数组中。

这次 image_data 是一个 Vec3b 数组，我正在尝试的代码如下所示：

```
for(int i=0;i<height;i++){
    for(int j=0;j<width;j++){
        image_data[0][i*width+j]=all_images[nb_image-1].at<cv::Vec3b>(i,j)[2];
        image_data[1][i*width+j]=all_images[nb_image-1].at<cv::Vec3b>(i,j)[1];
        image_data[2][i*width+j]=all_images[nb_image-1].at<cv::Vec3b>(i,j)[0];
    }
} 
```

但这不起作用，所以我现在不知所措我不知道如何成功地`image_data`用所有三个通道的值填充数组，而不改变代码结构，因为这个数组随后用于我的图像处理算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:47:09.167

我不明白你到底想做什么。您可以使用以下命令直接读取彩色图像：

`cv::Mat img = cv::imread("image.jpeg",1);`

您的矩阵 ( `img`) 类型将是 CV_8UC3，然后您可以像您所说的那样访问每个像素：

`img.at<cv::Vec3b>(row,col)[channel]`.

如果你有一个 as 的二维数组，`Vec3b`你`Vec3b myArray[n][m];` 可以像这样访问这些值：

`myArray[i][j](k)`其中 k={1,2,3} 因为 Vec3b 是行矩阵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:25:33.907

这是我刚刚测试的代码，它可以工作。

```
#include <iostream>
#include <cstdlib>
#include <opencv/cv.h>
#include <opencv/highgui.h>

int main(int argc, char**argv){

  cv::Mat img = cv::imread("image.jpg",1);
  cv::imshow("image",img);
  cv::waitKey(0);
  cv::Vec3b firstline[img.cols];
  for(int i=0;i<img.cols;i++){
    // access to matrix
    cv::Vec3b tmp = img.at<cv::Vec3b>(0,i);
    std::cout << (int)tmp(0) << " " << (int)tmp(1) << " " << (int)tmp(2) << std::endl;
    // access to my array
    firstline[i] = tmp;
    std::cout << (int)firstline[i](0) << " " << (int)firstline[i](0) << " " << (int)firstline[i](0) << std::endl;
  }
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:06:21.960

在您编辑的第一条消息中，这一行很奇怪：

```
image_data[0][i*width+j]=all_images[nb_image-1].at<cv::Vec3b>(i,j)[2]; 
```

如果图像数据是你的彩色图像，那么它应该这样写：

```
image_data[i][j] = all_images[nb_image-1].at<cv::Vec3b>(i,j); 
```

# asp.net-mvc - Asp.net Mvc3 应用程序中的多个 Web.config

> ID：10992552
> 
> 赞同：0
> 
> 时间：2012-06-12T07:54:50.780
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我的项目规范是带有实体框架的 ASP.net MVC3 应用程序。

问题是客户明智的数据库将被创建。个人应用程序个人数据库对我来说工作正常。

但我想要一个应用程序，并且应该使用多个数据库。

如何达到同样的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:18:14.817

您无需使用默认构造函数和 web.config 驱动的连接字符串创建实体连接，而是需要手动构建实体连接字符串并在使用其他构造函数之一进行构造时将其输入。通常有一个接受字符串，另一个也接受一个`EntityConnection`实例。

如果唯一改变的是数据库的名称，那么您可能会使用格式字符串 - 您可能会在其中使用当前在 web.config 中的那个 - 看起来像这样：

`metadata=res://*;provider=System.Data.SqlClient;provider connection string="Data Source=[server];Initial Catalog=[db];User ID=[user];Password=[password]"`

*注意 - `[server]`、`[db]`和`[user]`这里`[password]`是占位符。*

并简单地将 替换`[db]`为`{0}`。

然后 - 假设您可以从用户派生数据库名称，您可能会执行以下操作：

```
public string BaseConnectionString {
  get{
    //TODO: Get base connection string - can just bake in the constant string with
    //with the format placeholder.  A better thing would be to add it as an 
    //AppSetting in web.config
  }
}

//this now becomes you're primary way of getting a database connection for a user.
public MyEntities GetEntities(User user)
{
  var eConnectionString = GetConnectionString(user);

  return new MyEntities(eConnectionString);
}

public string GetConnectionString(User user)
{
   var dbName = get_db_name_for_user(user);
   return string.Format(BaseConnectionString, dbName);
} 
```

这只是实现这一目标的一种方法。在 IOC 环境中，可以将所有这些隐藏在一个简单的`Resolve<>`调用后面。

# java - 在正则表达式中，我们如何匹配字符“。” 本身？

> ID：10992554
> 
> 赞同：-3
> 
> 时间：2012-06-12T07:54:52.230
> 
> 标签：java, regex

> **可能重复：**
> [DOT 的正则表达式](https://stackoverflow.com/questions/3862479/regular-expression-for-dot)

假设我有一个字符串：

```
String domain =  "www.example.com"; 
```

为了提取单词“example”，我在 java 中使用 split 函数

```
String[] keys = domain.split(".");
String result = keys[1]; 
```

显然这是错误的，因为“。” 是一个错误的正则表达式，因为它匹配任何字符。

什么是专门匹配字符“.”的转义序列？

虽然这个问题似乎微不足道，但我似乎找不到任何快速参考或以前的答案。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T07:55:19.983

通过如下方式转义它

```
\\. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T07:55:25.867

使用`\\.`. 你需要逃避它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T07:56:30.240

`.`你可以通过在它前面加上前缀来逃避`\\`。因此，使用`\\.`原因是文字字符串`\\`是单个反斜杠。在正则表达式中，反斜杠也是转义字符。正则表达式`\\`匹配单个反斜杠。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T08:06:16.703

您可以使用 Pattern.quote() 获取任何文字字符串的正则表达式。

Pattern.quote(".") 计算结果为 "\\."

在这种情况下，使用 \\.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T08:05:14.207

您可以通过使用或使用方括号来转义`.`字符。`\\.``[.]`

因此您的代码变为：

```
String[] keys = domain.split("\\."); // or domain.split("[.]");
String result = keys[1]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T08:09:42.363

**或者您可以创建一个包含 的类`dot`，而无需转义：**

```
[.] 
```

# php - 用户是否可以访问 $_SESSION 变量？

> ID：10992556
> 
> 赞同：0
> 
> 时间：2012-06-12T07:55:14.977
> 
> 标签：php, session-variables

我为受密码保护的页面制作了一个用户身份验证脚本。

在我的脚本的第一个版本中，我首先检查用户名和密码是否与数据库中的匹配，如果是，则将 $_SESSION['user_connected'] 变量和 $_COOKIE['user_connected'] 变量设置为真的。我的 index.php 文件首先验证是否设置了 $_COOKIE['user_connected']，然后绕过数据库检查是否为真。

然后我意识到用户可以访问 cookie，并且有人可以在访问该站点之前简单地将 $_COOKIE['user_connected'] 设置为 TRUE，然后就会出现混乱。但是 $_SESSION 变量呢？如果用户已连接，我可以安全地使用它们来检查整个网站吗？

tl;dr：用户可以修改 $_SESSION 变量吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T07:56:34.820

不。

它们存储在服务器上，只能由服务器上运行的脚本编辑。

用户只会获得一个令牌，用于标识与他们关联的数据包。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T07:56:25.617

> 可能重复：[恶意用户是否可以编辑 $_SESSION？](https://stackoverflow.com/questions/1976821/is-it-possible-to-edit-session-by-hacker)

`$_SESSION`是服务器端，一旦设置就不能更改（由用户）

另外，看看这个[问题](https://stackoverflow.com/questions/1976821/is-it-possible-to-edit-session-by-hacker)

# ios - 归档 iOS 项目时找不到文件

> ID：10992561
> 
> 赞同：1
> 
> 时间：2012-06-12T07:55:27.053
> 
> 标签：ios, xcode

我正在尝试使用 Xcode 4.3.2 将我的应用程序存档到 .ipa 文件中以发送到应用商店，但在尝试存档时出现此错误：

> 'KKGridView/KKGridView.h' 文件未找到

KKGridView 是我工作区中的另一个项目，它生成一个静态库目标。

在执行常规构建时，它运行良好，在部署到设备时也是如此。

我已经阅读了很多关于这个问题的内容，我尝试`Skip Install`在静态库项目上设置为 YES 但这没有帮助。我遇到了一些关于用户标头或其他东西的提示，但对我来说不是很清楚，因为我对 Xcode 的整个标头概念不是很熟悉。

我应该更改工作区的设置还是缺少一些配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:52:26.397

最终我只是将库的整个源代码复制到我的项目中并删除了第二个项目。

# android - Android服务在取消后没有停止

> ID：10992570
> 
> 赞同：0
> 
> 时间：2012-06-12T07:56:11.607
> 
> 标签：android, android-widget, android-service, alarmmanager, repeatingalarm

我有使用 AlramManager 启动 2 个服务并重复运行它们的小部件：

```
public static final String TAG = "RotterWidgetProvider";
public static ArrayList<SubjectObject> subjectsList;
public static boolean isUpdated=true;
public static int currentSubject=0;
private PendingIntent serviceShowNextSubject = null;  
private PendingIntent serviceDownloadSubjects = null;
Intent i=null;
Intent i2=null;

@Override
public void onUpdate(final Context context, final AppWidgetManager appWidgetManager,int[] appWidgetIds) 
{
  RemoteViews remoteView = new RemoteViews(context.getPackageName(), R.layout.rotter_appwidget_layout);
  Intent launchAppIntent = new Intent(context, WidgetSettings.class);
  PendingIntent launchAppPendingIntent = PendingIntent.getActivity(context,
           0, launchAppIntent, PendingIntent.FLAG_UPDATE_CURRENT);
     remoteView.setOnClickPendingIntent(R.id.imgWidgetSettings, launchAppPendingIntent);
  if(subjectsList==null)
  {
     remoteView.setTextViewText(R.id.txtSubject,"נא לחכות, טוען נתונים");
     ComponentName RotterListWidget = new ComponentName(context,
                RotterWidgetProvider.class);
        appWidgetManager.updateAppWidget(RotterListWidget, remoteView);

       final AlarmManager m = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);  

        final Calendar TIME = Calendar.getInstance();  
        TIME.set(Calendar.MINUTE, 0);  
        TIME.set(Calendar.SECOND, 0);  
        TIME.set(Calendar.MILLISECOND, 0);  

        if(i==null)
        {
           i = new Intent(context, UpdateRotterWidgetService.class); 
           Log.v(TAG,"UpdateRotterWidgetService Created");
        }
        if(i2==null)
        {
           i2 = new Intent(context, DownloadSubjectsService.class); 
           Log.v(TAG,"DownloadSubjectsService Created");
        }

        if (serviceShowNextSubject == null)  
        {  
           serviceShowNextSubject = PendingIntent.getService(context, 0, i, PendingIntent.FLAG_CANCEL_CURRENT); 
           Log.v(TAG,"serviceShowNextSubject initialized");
        }  
        if(serviceDownloadSubjects==null)
        {
           serviceDownloadSubjects=PendingIntent.getService(context, 0, i2, PendingIntent.FLAG_CANCEL_CURRENT); 
           Log.v(TAG,"serviceDownloadSubjects initialized");
        }

        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context.getApplicationContext());
        String subjectsDownloadInterval=settings.getString("SubjectsDownloadInterval", "10");
        String subjectsUpdateInterval=settings.getString("SubjectsUpdateInterval", "10");
        int down=10;
        int upd=10;
        try
        {
           down=Integer.parseInt(subjectsDownloadInterval);
           upd=Integer.parseInt(subjectsUpdateInterval);
        }
        catch(Exception e)
        {

        }
        m.setRepeating(AlarmManager.RTC, TIME.getTime().getTime(), 1000 * 60*down, serviceDownloadSubjects);
        m.setRepeating(AlarmManager.RTC, TIME.getTime().getTime(), 1000 * upd, serviceShowNextSubject); 

  }
} 
```

从屏幕上删除小部件后，我将取消服务：

```
@Override  
public void onDisabled(Context context)  
{  
    final AlarmManager m = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);  
    m.cancel(serviceShowNextSubject);  
    m.cancel(serviceDownloadSubjects); 

} 
```

但服务不会取消并继续在后台运行。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:03:06.937

取消警报不会停止服务。您必须手动停止他们，或者在他们完成工作后有时间停止自己。

# excel - 在 Excel 的 sum 函数中使用 30 多个参数

> ID：10992571
> 
> 赞同：0
> 
> 时间：2012-06-12T07:56:13.890
> 
> 标签：excel, excel-2007, excel-formula

我想在 Excel 的求和公式中使用 30 多个参数，我使用以下公式：-

```
=SUM(IF(AND(ISNUMBER($F$73),ISNUMBER($J$73)),PRODUCT($F$73,$J$73/100),0),IF(AND(ISNUMBER($G$74),ISNUMBER($J$74)),PRODUCT($G$74,$J$74),0)) 
```

上面的公式适用于 30 个 argumnets，但对于超过 30 个 argummts，excel 将返回 error( `#VALUE`)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:30:41.700

这个版本会更短，你可以添加任意数量，唯一的限制是最大公式长度

`=(COUNT(F73,J73)=2)*(F73*J73/100)+(COUNT(G74,J74)=2)*(G74*J74/100)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:21:13.607

您可以像这样将较小的组分批成子 SUM `=SUM(SUM(1,2), SUM(3,4),...)`：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T15:31:30.863

也许您可以像这样在公式中保存更多字符：

```
=(N(F73)*N(J73)+N(G74)*N(J74))/100 
```

可以进一步扩展，但为了清楚起见，我建议编写自定义 UDF：

```
=SPRange((F73,G74),(J73,J74))% 
```

SPRange 将像 SUMPRODUCT 一样工作，但在多个范围内运行：

```
Function SPRange(Range1 As Range, Range2 As Range) As Double

Dim i As Long, n As Long, rng As Range, Arr() As Double

n = Range1.Count
ReDim Arr(1 To n) As Double

i = 1
For Each rng In Range1
    If IsNumeric(rng.Value2) Then Arr(i) = rng.Value2
    i = i + 1
Next rng

i = 1
SPRange = 0
For Each rng In Range2
    If IsNumeric(rng.Value2) Then SPRange = SPRange + Arr(i) * rng.Value2
    i = i + 1
Next rng

End Function 
```

如果要扩展到多个范围，可以通过代码定义名称：

```
names.Add "Range1",Range("f73,g74")
names.Add "Range2",Range("j73,j74") 
```

在我的测试中允许超过 1000 个细胞。然后只需输入公式：

```
=SPRange(Range1,Range2)% 
```

# java - 如何加入地图

> ID：10992573
> 
> 赞同：-2
> 
> 时间：2012-06-12T07:56:20.267
> 
> 标签：java, collections, map

如何`newMap`在`custMap`.

```
 Map<String, Customer> custMap= new HashMap<String,Customer>();   
 Map<String, DoCustomer> newMap= new HashMap<String,DoCustomer>();
     for (Map.Entry<String, DoCustomer> cust: newMap.entrySet()) {   
     custMap.put(cust.getKey(),cust.getValue()); 
 }

public class DoCustomer {
private Long id;

private String custName;

private String description;
    private String status;
    private List<DoCustomerBranch> doCustomerBranch=new ArrayList<DoCustomerBranch>
public Long getId() {
    return id;
}
public void setId(Long id) {
    this.id = id;
}
public String getCustName() {
    return custName;
}
public void setCustName(String custName) {
    this.custName = custName;
}
public String getDescription() {
    return description;
}
public void setDescription(String description) {
    this.description = description;
}
public String getStatus() {
    return status;
}
public void setStatus(String status) {
    this.status = status;
}
getter/setters of doCustomerBranch
}

  @Entity
  @Table(name = "CUSTOMER")
  public class Customer implements Serializable{

private static final long serialVersionUID = 1L;
private Long id;

private String custName;

private String description;

private String createdBy;
private Date createdOn;

private String updatedBy;
private Date updatedOn;

private Set<CustomerBranch> customerBranch=new HashSet<CustomerBranch>

@Id
@GeneratedValue(generator = "CUSTOMER_SEQ")
@SequenceGenerator(name = "CUSTOMER_SEQ", sequenceName = "CUSTOMERN_SEQ",   allocationSize = 1)
@Column(name = "ID")
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

@Column(name = "CUST_NAME",nullable=false)
public String getCustName() {
    return custName;
}

public void setCustName(String custName) {
    this.custName = custName;
}

@Column(name = "DESCRIPTION")
public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description;
}

@Column(name = "CREATED_BY", length = 50)
public String getCreatedBy() {
    return createdBy;
}

public void setCreatedBy(String createdBy) {
    this.createdBy = createdBy;
}

@Temporal(TemporalType.TIMESTAMP)
@Column(name = "CREATED_ON")
public Date getCreatedOn() {
    return createdOn;
}

public void setCreatedOn(Date createdOn) {
    this.createdOn = createdOn;
}

@Column(name = "UPDATED_BY", length = 50)
public String getUpdatedBy() {
    return updatedBy;
}

public void setUpdatedBy(String updatedBy) {
    this.updatedBy = updatedBy;
}

@Temporal(TemporalType.TIMESTAMP)
@Column(name = "UPDATED_ON")
public Date getUpdatedOn() {
    return updatedOn;
}

public void setUpdatedOn(Date updatedOn) {
    this.updatedOn = updatedOn;
}
    @OneToMany(cascade = { CascadeType.PERSIST, CascadeType.REMOVE }, fetch =         FetchType.LAZY, mappedBy = "customer")
public Set<CustomerBranch> getCustomerBranch() {
    return customerBranch;
}

public void setCustomerBranch(Set<CustomerBranch> customerBranch) {
    this.customerBranch = customerBranch;
}

 } 
```

客户分行

```
@Entity
@Table(name = "CUSTOMER_BRANCH")
public class CustomerBranch implements Serializable{

   @Id
@GeneratedValue(generator = "CUSTOMER_BRANCH_SEQ")
@SequenceGenerator(name = "CUSTOMER_BRANCH_SEQ", sequenceName =   "CUSTOMER_BRANCH_SEQ", allocationSize = 1)
@Column(name = "ID")
private Long id;
private String branchName;

private String branchAddress;

private Customer customer;

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

@Column(name = "BRANCH_NAME",nullable=false)
public String getBranchName() {
    return branchName;
}

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "MOBEE_CUSTOMER")
public Customer getCustomer() {
    return customer;
}

public void setCustomer(Customer customer) {
    this.customer = customer;
}

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:59:49.317

您的代码的问题是您想将 a`DoCustomer`放入`Customer`容器中。它仅在`DoCustomer`是 的子类时才有效`Customer`。

编辑 1：您可以使用`BeanUtils`将 a`DoCustomer`转换为`Customer`. [这](http://www.avajava.com/tutorials/lessons/how-do-i-copy-properties-from-one-bean-to-another.html)是一个很好的教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T07:59:06.627

你的意思是：

```
custMap.putAll(newMap) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:04:39.360

正如其他人所指出的那样，我们需要知道 DoCustomer 能够提供帮助。

但是，根据您给我们的信息，我建议将每个 DoCustomer 转换为 Customer，或者更准确地说，从每个 DoCustomer 的字段中创建一个新客户。

就像是：

```
custMap.put(cust.getKey(), new Customer(cust.getValue().getId(), cust.getValue().getCustName(), and so on..)); 
```

在你的 for 循环中。

我可以看到您提供的定义的客户类没有构造函数，因此您自然必须向其中添加一个

# powershell - PowerShell中拆分的对面（非cmdlet）

> ID：10992577
> 
> 赞同：4
> 
> 时间：2012-06-12T07:56:37.773
> 
> 标签：powershell

下面的反函数是什么？

```
 $tmp = $domain.split(".") 
```

换句话说，如何将数组转换为字符串。我听说过“加入”，但我无法让它发挥作用。

非 cmdlet，非任务，这必须与 PowerShell v1 和所有旧系统一起使用！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T08:08:46.917

Powershell中有一个连接运算符：

```
$tmp -join "." 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T08:05:03.257

```
$result = [string]::join(".", $array) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T08:46:19.620

除了 Join 运算符（在 v2 中引入）和 .NET Join 方法之外，您还可以将特殊变量[$OFS](http://blogs.msdn.com/b/powershell/archive/2006/07/15/what-is-ofs.aspx)（输出字段分隔符）的值更改为点（默认值为空格）并将 tmp 括在引号：

```
PS> $tmp = "foo.domain.com".split(".")
PS> & {$ofs='.';"$tmp"}
foo.domain.com 
```

在上面的示例中，我在脚本块中更改了 $OFS 以防止它在全局范围内更改（脚本块创建嵌套范围）

# colors - 更改 xamDataGrid 单元格中的颜色

> ID：10992579
> 
> 赞同：0
> 
> 时间：2012-06-12T07:56:42.997
> 
> 标签：colors, drag-and-drop, infragistics, xamdatagrid

我已经`xamDataGrid`绑定到`DataTable`第一列包含参考值的位置。所有其他列的颜色取决于单元格中的值是否等于参考列的值。逻辑使用转换器。

我想要实现的是，当我将另一列移动到第一个位置时，它将成为参考列，并且所有其他列中的颜色都应该改变。

我正在听`FieldPositionChanged`事件并使网格布局无效，但它不起作用：

```
grid.UpdateLayout();
grid.InvalidateVisual(); 
```

转换器中的断点被命中，但并非针对所有记录（仅 2 或 3 个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:51:08.500

如果在字段移动时设置 CellValuePresenterStyle，它们应该会正确更新。以下逻辑将执行此操作：

```
void XamDataGrid1_FieldPositionChanged(object sender, Infragistics.Windows.DataPresenter.Events.FieldPositionChangedEventArgs e)
{
    FieldLayout layout = e.Field.Owner;
    Field first = null;
    foreach (Field f in layout.Fields)
    {
        if (f.ActualPosition.Column == 0)
            first = f;
    }
    if (first != null)
    {
        SetCellValuePresenterStyle(e.Field.Owner, first);
    }
}

void XamDataGrid1_FieldLayoutInitialized(object sender, Infragistics.Windows.DataPresenter.Events.FieldLayoutInitializedEventArgs e)
{
    SetCellValuePresenterStyle(e.FieldLayout, e.FieldLayout.Fields[0]);
}

void SetCellValuePresenterStyle(FieldLayout layout, Field sourceField)
{
    Binding sourceValueBinding = new Binding("DataItem[" + sourceField.Name + "]");
    foreach (Field f in layout.Fields)
    {
        if (f != sourceField)
        {
            Style cellValuePresenterStyle = new Style(typeof(CellValuePresenter));
            Binding compareValueBinding = new Binding("DataItem[" + f.Name + "]");
            MultiBinding styleBinding = new MultiBinding();
            styleBinding.Bindings.Add(sourceValueBinding);
            styleBinding.Bindings.Add(compareValueBinding);
            styleBinding.Converter = new EqualMultiValueConverter();
            DataTrigger trigger = new DataTrigger();
            trigger.Value = true;
            trigger.Binding = styleBinding;
            cellValuePresenterStyle.Triggers.Add(trigger);
            Setter backgroundSetter = new Setter(Control.BackgroundProperty, Brushes.Green);
            trigger.Setters.Add(backgroundSetter);
            f.Settings.CellValuePresenterStyle = cellValuePresenterStyle;
        }
        else
        {
            f.Settings.CellValuePresenterStyle = null;
        }
    }
} 
```

# c# - 在 ASP .NET MVC 中，敲除 html 绑定不起作用（绑定到调用局部视图的函数）

> ID：10992584
> 
> 赞同：4
> 
> 时间：2012-06-12T07:57:10.687
> 
> 标签：c#, asp.net-mvc, razor, knockout.js

我有一个 ASP .NET MVC 应用程序，另外我正在使用 Knockout 2.0.0。我创建了一个局部视图，我想使用敲除渲染到页面。部分需要在 Knockout foreach 语句中呈现。我无法让淘汰赛 HTML 绑定工作，因此我目前正在使用 hack 将 html 放入使用 JQuery 的 div 中。

这个页面有很多html，所以无法贴出所有的源代码，所以我会尝试贴出相关代码：

```
<div data-bind="foreach:issues">
    @* SNIP - A lot of other html here*@
    <div id="myPartialDiv" data-bind="html: $parent.getHtml(issueId())">
    </div>  
</div> 
```

再往下，我的 KO 视图模型上有以下 javascript 函数（我已注释掉我的 hack 并包含返回 HTML 的代码）：

```
 var getHtml = function (issueId) {
              var baseUrl = '@Url.Action("GetHtmlAction","MyController")';
              $.ajax(
                {
                    type: "POST",
                    url: baseUrl,
                    data: "&issueId=" + issueId,
                    success: function (data) {
                        //$('#mypartialDiv').html(data);                          
                        return data;
                    },
                    error: function (req, status, error) {
                        //$('#myPartialDiv').html('Something went wrong.');
                        return 'Something went wrong.'
                    },
                    dataType: "text"
                });
         } 
```

上面的代码导致没有数据呈现到页面。使用 Chrome 调试工具，我看到没有发生 javascript 错误，并且敲除根本没有将 div 的 html 绑定到 getHtml 函数返回的结果。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:10:28.417

正如 Miroslav Popovic 解释的那样，问题在于 AJAX 请求是异步的，因此`return data`被忽略并且您的调用没有返回值`getHtml`.

我建议使用处理异步 HTML 加载的自定义绑定（我在[这里](http://jsfiddle.net/9CkHd/)放了一个工作示例）。

这通过将 2 个参数传递给 asyncHtml 来工作：一个要调用的函数，它接受一个成功回调作为它的最终参数（加上任何其他参数），以及一个需要传递给该函数的参数数组。

```
<div id="myPartialDiv" data-bind="asyncHtml: { source: getHtml, params: [123] }">Loading...</div> 
```

然后自定义绑定获取这些值，将自定义回调连接到传递给它的参数上，并调用指定的函数：

```
ko.bindingHandlers.asyncHtml = {
    init: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        var parameters = value.params.concat([function(data) {
           $(element).html(data); 
        }]);
        value.source.apply(null, parameters);
    }
}; 
```

最后，我们可以重新实现我们的视图模型 HTML 检索方法来进行 POST 调用并调用新的成功处理程序：

```
var ViewModel = function() {
    this.getHtml = function(issueId, callback) {
        $.ajax(
            {
                type: "POST",
                url: "/echo/html/",
                data: {
                        html: "<p>server response " + issueId + "</p>",
                        delay: 1
                    },
                success: callback,
                dataType: "text"
            });            
    };
}; 
```

注意：对于这个例子，我使用 jsFiddle`echo`来回发一个随机响应

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T09:42:12.143

`$.ajax`是一个异步调用。当你调用它时，执行将继续到`getHtml`函数中的下一条语句。由于这是最后一条语句，该`getHtml`函数将返回`undefined`.

关于您的`return data;`... 此返回在成功回调函数中。数据将是**该**函数的结果，而不是父`getHtml`函数。此外，`getHtml`已经完成。您无法从中返回结果。

在你的视图模型中有一个可观察的属性怎么样`html`，然后找到一些其他触发`getHtml`函数的方法（按钮单击，其他一些成功回调，issueId属性更改......），这将反过来设置'html'属性值. 然后，您可以简单地将数据绑定到该属性`data-bind="html: html"`。

# caching - 如何在 symfony2 中缓存数据

> ID：10992593
> 
> 赞同：3
> 
> 时间：2012-06-12T07:58:17.270
> 
> 标签：caching, symfony

是否有任何内置的可能性（或外部包）可以在 Symfony2 中缓存数据？

我不想缓存页面本身，而是应用程序内部的数据，例如使用文件系统上的简单键-> 值存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:27:31.793

没有内置解决方案，但我建议您尝试[APC](http://www.php.net/manual/en/intro.apc.php)、[Redis](http://redis.io/)或[Memcache](http://php.net/manual/en/book.memcache.php)（它们都是内存数据存储）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:19:30.600

您可以使用[LiipDoctrineCacheBundle](https://github.com/liip/LiipDoctrineCacheBundle)将 Doctrine common 中的缓存驱动程序集成到您的 Symfony 项目中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:04:37.440

我正在使用[winzouCacheBundle](https://github.com/winzou/CacheBundle)。它在不同的后端（apc、file、memcache、array、xcache、zenddata）上为您提供了一个简化的缓存 api。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T08:15:41.917

目前，在 Symfony2 中没有唯一的缓存解决方案。框架的某些部分使用[Doctrine Common](http://docs.doctrine-project.org/en/latest/reference/caching.html)。

如果 Symfony2 有关于“标准”缓存解决方案的讨论，但我们将不得不等待一段时间......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-15T21:07:39.013

我认为**DoctrineCacheBundle**目前是要走的路。

> DoctrineCacheBundle 允许您的 Symfony 应用程序通过 Doctrine Cache 库使用不同的缓存系统。

[文档@ Symfony.com](https://symfony.com/doc/current/bundles/DoctrineCacheBundle/index.html)

[代码@Github](https://github.com/doctrine/DoctrineCacheBundle)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-12T10:00:28.357

如果我理解得很好，您想存储数据（附加到会话）并在同一会话再次调用新控制器时重新加载它们，以避免多次执行相同的过程（例如从一个数据库）。

您可以在控制器中使用会话系统：

```
<?php
namespace YourStuff\YourBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

class YourController extends Controller
{
    $session = $this->get("session");
    $variabile = 4;
    $session->set("variableName",$variable); // setter
    if ($session->has("variableName") // to check if the variable exists
    {
        $variableName = $session->get("variableName"); // getter
    }
} 
```

这是一个例子；如果会话的生命周期尚未到期，则可以在下次调用同一会话时访问“变量名称”。

“会话”使用 PHP 的 __SESSION 变量，因此请务必正确设置 session.cookie_lifetime 和 session.gc_maxlifetime，以提供所需的生命周期。

# c# - AnkhSVN & 网站

> ID：10992594
> 
> 赞同：1
> 
> 时间：2012-06-12T07:58:22.293
> 
> 标签：c#, visual-studio, svn, ankhsvn

我有一个有 3 个项目的解决方案。这些项目不在同一个文件夹中，因此 AnkhSVN 无法打开这些项目并显示*projectname(unavailable)*。

![缺少项目的解决方案资源管理器](../Images/1a712031842431f00394e46d553fe38b.png)

那么如何解决这个问题呢？

我今天下载了最新版本的 AnkhSVN，但问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:49:27.230

尝试关闭解决方案，然后删除解决方案目录中的**projectname.suo**文件。

# iphone - 我还能在 iOS 6 及更高版本中使用 Google 地图吗？

> ID：10992595
> 
> 赞同：35
> 
> 时间：2012-06-12T07:58:22.627
> 
> 标签：iphone, objective-c, google-maps, mkmapview, ios6

正如您可能知道的那样，Apple 最近发布了 iOS 6 以及他们自己的新地图。我刚刚在新版本的 iOS 上运行了我的应用程序，它在`MKMapView`新的 Apple 地图中用作标准地图。这可能很棒，但我的应用程序*依赖*于谷歌地图，因为我使用他们的数据和路线。有什么办法我仍然可以使用谷歌地图而不是苹果自己的版本？

# android - 进度对话框在 Activity Resume 上永远旋转

> ID：10992598
> 
> 赞同：1
> 
> 时间：2012-06-12T07:58:43.397
> 
> 标签：android, android-activity, android-dialog, android-lifecycle, android-progressbar

我正在使用 Handler 调用 WebServices 并在

* * *

```
// Create Progress dialogs
    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case mDialogProgress:
            dataLoadProgress = new ProgressDialog(this);
            dataLoadProgress.setMessage("Loading...");
            dataLoadProgress.setIndeterminate(true);
            dataLoadProgress.setCancelable(false);
            dataLoadProgress
                    .setProgressStyle(android.R.attr.progressBarStyleSmallTitle);
            return dataLoadProgress;
        default:
            return null;
        }
    } 
```

* * *

我已经在调用下面的方法 onStop 来停止它的显示。

```
 @Override
        public void onStop() {
            if (dataLoadProgress != null && dataLoadProgress.isShowing())
                stopThread();
            super.onStop();
        }

        private synchronized void stopThread() {
        try {
            if (getServerData != null) {
                if (dataLoadProgress != null && dataLoadProgress.isShowing())
                    dismissDialog(mDialogProgress);
                getServerData = null;
                // // mHandler = null;
            }
        } catch (Exception e) {
            CommonFunctions.DoCatchOperation(e);
        }
        } 
```

现在，当我的应用程序进入后台模式并恢复时，它会显示进度对话框并且它会永远旋转，我无法使用后退按钮作为它的**setCancelable(false) 来停止它；**

我尝试在**onResume()中调用我的****stopThread(** ) ，如果显示进度，那么它将停止，但是我在 onCreate 中调用 webservice 并开始显示 ProgressDialog 并且在 onCreate onResume 调用之后的下一个实例中我的 ProgressDialog 是被解雇。

 ****所以我想在后台永远停止这种旋转。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:45:00.480

我在这里只添加了一行条件。
**if(dataLoadProgress == null)** 它对我有用。

```
// Create Progress dialogs
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case mDialogProgress:
        if(dataLoadProgress == null)
            dataLoadProgress = new ProgressDialog(this);
        dataLoadProgress.setMessage("Loading...");
        dataLoadProgress.setIndeterminate(true);
        dataLoadProgress.setCancelable(false);
        dataLoadProgress
                .setProgressStyle(android.R.attr.progressBarStyleSmallTitle);
        return dataLoadProgress;
    default:
        return null;
    }
} 
```**

# algorithm - 如何拆分列表以获得其元素的幂集？

> ID：10992606
> 
> 赞同：2
> 
> 时间：2012-06-12T07:59:23.117
> 
> 标签：algorithm, partitioning, powerset

我有一个列表，我想将其拆分为包含 +/- 1 个项目的子列表。

例子

我有一个包含 17 个项目的列表。我想要的是把它分成4个像这样的子列表

```
1.List = 5 elements
2.List = 4 elements
3.List = 4 elements
4.List = 4 elements 
```

我怎样才能做到这一点？我应该在这里使用什么算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:01:21.370

使用整数除法得到每个组中的项目，然后使用模除法得到前 n 组将有 +1 项目的数量。例如：17 项分为 4 组：

*   `17 / 4 = 4`- 所以会有 4 个组有 4 个元素。
*   `17 % 4 = 1`- 所以前 1 个组将有一个额外的 1 个元素。

另一个例子：

*   `18 / 4 = 4`- 所以会有 4 个组有 4 个元素。
*   `18 % 4 = 2`- 所以前 2 个组将有一个额外的 1 个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:06:52.163

您想要的是原始列表的**Power Set**。检索幂集和相应属性的更通用方法[在 Wikipedia 的 Power Set 页面中给出](http://en.wikipedia.org/wiki/Power_set)

# ruby-on-rails - 将蜻蜓与全球化一起使用

> ID：10992611
> 
> 赞同：0
> 
> 时间：2012-06-12T07:59:49.420
> 
> 标签：ruby-on-rails, dragonfly-gem, globalize3

我正在尝试在我的模型中使用 image_uid 属性，以便我可以使用不同语言的不同图像。我正在使用 globalize3 和蜻蜓。

问题是它根本不起作用。它通常会上传西班牙图像（这是我的应用程序中的默认语言环境），但它不适用于其他语言环境。我没有收到任何错误或跟踪，它只是不起作用。

该模型非常简单：

```
image_accessor :image  
translates :image_uid 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:17:39.870

`:image_uid`是识别图像的唯一 id，因此不适合翻译。但如果存在`:image_name`属性，Dragonfly 会将其用作文件名。

如果您想为每种语言使用不同的图像，例如插入文本，您必须注意名称或更准确地说是 url 总是不同的，例如，您可以将语言环境附加到 url:`?locale=en`或命名您的文件`translation.en.jpg`。要指定名称，您可以使用辅助方法`@model.image.name`、`.basename`和`.ext`。

如果您只想更改文件名并始终提供相同的图像，则需要一个 url 重写引擎并在缓存之前删除文件名。否则将创建相同图像的不需要的副本，并浪费您的磁盘空间和处理能力。

使用`rack-rewrite`and `rack-cache`gems 它看起来像这样：

```
require 'dragonfly/rails/images'

Rails.application.middleware.insert_before(Rack::Cache, Rack::Rewrite) do
  rewrite %r{/media/([^/]+)/[^?]*(.*)}, '/media/$1$2'
end 
```

# internet-explorer - 选择 textrange IE，开始位置已更改

> ID：10992615
> 
> 赞同：0
> 
> 时间：2012-06-12T07:59:58.507
> 
> 标签：internet-explorer, contenteditable, textselection

当我用“shift + arrow_left”选择一些文本时，我的起始位置发生了变化，让我举例说明：

**示例：** - contenteditable div - 我自己插入的 charcode 0182 (¶) = 变量：hardReturn

**div 中的文本：** 测试¶ abc

**向上键 + arrow_left 上的代码：**

```
 var myRange = document.selection.createRange(); 
myRange.moveStart('character', -1); 
var charVoor = myRange.text.substring(0, 1);

if(charVoor == hardReturn){
    myRange.moveEnd('character', -1);
    myRange.select();   
}else{
} 
```

**所以我的问题：** 我的光标在“b”和“c”之间，我开始选择......我在选择下得到了“ab”，然后我在左边做另一个选择，我的选择会在“¶”之前自动跳转，但在那之后，我选择的开始位置在“¶”之前，而不是在我开始的“b”和“c”之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:58:05.403

您可以使用`TextRange`对象的克隆来检查`hardReturn`：

```
var myRange = document.selection.createRange();
var chkRange = myRange.duplicate();
chkRange.moveStart('character', -1); 
var charVoor = chkRange.text.substring(0, 1);

if(charVoor == hardReturn){
    chkRange.moveEnd('character', -1);
    ....  
} 
```

我不确定您在选择中想要的最终文本是什么。如果需要，您可以移动与 with方法`myRange`相关的原件，或用于折叠 and 之间的范围。`chkRange``setEndPoint()``collapse()``a``b`

您可以在 MSDN 中找到其他`setEndPoint()`方法和属性[：遍历和范围](http://msdn.microsoft.com/en-us/library/ie/hh772120%28v=vs.85%29.aspx)`TextRange`

# http - 在手机上下载mp3文件不起作用

> ID：10992616
> 
> 赞同：1
> 
> 时间：2012-06-12T07:59:59.373
> 
> 标签：http, mobile, download, http-headers, mobile-browser

我有一个网页，可以通过手机动态下载 mp3 文件。练习是，将动态生成的链接发送到您的手机，例如[http://mysvr.com/downloads/676877897/](http://mysvr.com/downloads/676877897/)，您单击链接，服务器使用链接参数获取适当的文件，并将文件提交回用于下载的浏览器。

下载在台式机或笔记本电脑浏览器上运行良好，即弹出下载对话框，点击保存，继续下载正确的文件。到那里为止，一切都很酷。

当我在移动浏览器上尝试相同的链接时，问题就来了。我收到文本提示以下载带有下载链接的文件，但它只下载 16kb 的文件，之后我收到一条尖叫消息“文件格式无效”。

当我尝试从手机直接下载文件时，它工作正常！例如[http://mysvr.com/ringtones/myfile.mp3](http://mysvr.com/ringtones/myfile.mp3)，文件播放良好。

这是正在发送的标头。移动浏览器是否缺少某些东西？提前致谢。

```
header("Content-Type: application/force-download"); 
header('Content-type: audio/mpeg');
header('Content-Description: File Download');
header('Content-Disposition: attachment; filename=' . $mp3);
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit; 
```

# qt - 如何在 qt 中使用 post()？

> ID：10992618
> 
> 赞同：2
> 
> 时间：2012-06-12T08:00:07.813
> 
> 标签：qt, post

这是我的程序。在这个程序中，我想向一个网站发送请求（例如： http: [//www.adobe.com/products/muse.html](http://www.adobe.com/products/muse.html)）
我想在纯文本框中显示返回我的 html 代码。

```
QUrl url("http://www.adobe.com/products/muse.html") 
```

我想在“thisfile”中给出 html 代码

```
file.setFileName("thisfile.html");

if (!file.open(QIODevice::WriteOnly))
{
    std::cerr << "Error: Cannot write file "
    << qPrintable(file.fileName()) << ": "
    << qPrintable(file.errorString()) << std::endl

    return false;
}

http.setHost(url.host(),80);
http.post(url.toString(),"term=yyyy&loc=en_us&siteSection=products%3Amuse",&file); 
```

此代码无法正常工作，当我显示文件时给我错误的 html 代码。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:03:03.820

使用`http.get()`而不是`http.post()`作为`POST`方法需要设置`Headers`服务器使用的其他方法。

`QHttp::get()`方法也是**异步**的。

由于您的情况很简单，只需检索`HTML`响应，您应该选择`HTTP GET`恕我直言。[请参阅和](https://stackoverflow.com/questions/2080863/what-is-the-difference-between-a-http-get-and-http-post-and-what-is-http-post-se)[方法](https://stackoverflow.com/questions/2080863/what-is-the-difference-between-a-http-get-and-http-post-and-what-is-http-post-se)[之间的区别`GET``POST`](https://stackoverflow.com/questions/2080863/what-is-the-difference-between-a-http-get-and-http-post-and-what-is-http-post-se)。

如果您只能使用`HTTP POST`，[请检查此](https://stackoverflow.com/questions/2214595/how-can-i-create-a-http-post-request-with-qt-4-6-1).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:39:06.137

```
 QNetworkRequest request;
 request.setUrl(QUrl("thisfile.html"));

 QNetworkReply *reply = manager->post(request, "term=yyyy&loc=en_us&siteSection=products%3Amuse");
 connect(reply, SIGNAL(readyRead()), this, SLOT(slotReadyRead())); 
```

[在qt 文档](http://doc.qt.nokia.com/4.7-snapshot/qnetworkaccessmanager.html)中查看 QNetworkAccessManager

您必须阅读信息并将其保存到`readyRead`函数中的文件

# python - PyGobject 应用程序图标

> ID：10992620
> 
> 赞同：1
> 
> 时间：2012-06-12T08:00:17.477
> 
> 标签：python, pygobject

> **可能重复：**
> [如何将图标添加到 ubuntu 应用程序](https://stackoverflow.com/questions/10979412/how-to-add-an-icon-to-an-ubuntu-app)

我正在尝试为 PyGObject 应用程序创建一个基本应用程序代码。我不确定如何更改应用程序图标。

我有这个代码。

```
from gi.repository import Gtk

win = Gtk.Window()
win.connect("delete-event", Gtk.main_quit)
win.show_all()
Gtk.main() 
```

我检查了一些示例代码，但没有找到方法。任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:20:19.923

使用相对于脚本的文件：

```
win.set_icon_from_file("logo.png") 
```

使用主题图标：

```
win.set_icon_name("logo.png") 
```

PyGObject 仍然没有像样的 API 文档（我上次检查时），现在你可以使用 C API 和旧的 PyGtk 文档和“猜测并尝试”你需要的东西：http: [//developer.gnome.org/gtk3 /3.0/](http://developer.gnome.org/gtk3/3.0/) & [http://developer.gnome.org/pygtk/stable/](http://developer.gnome.org/pygtk/stable/)

# javascript - 保存变量的选定数据以在另一个页面中使用

> ID：10992623
> 
> 赞同：1
> 
> 时间：2012-06-12T08:00:34.270
> 
> 标签：javascript, jquery, html, dom

我有一个动态填充的项目列表：

```
 function ViewData(data) {
        var SI = (typeof data) == 'string' ? eval('(' + data + ')') : data;
        $('#ListContainer').empty();
        for (var i = 0; i < SI.length; i++) {
            var text = '<a href="Page.htm" rel="external" onclick= "SaveData();"
                         class="lesson" LessonID="' + SI[i].lessonID 
                         '"><span class="lesson_subject">' + SI[i].sbj_Name + 
                         '</span></b></a>
            $('#ListContainer').append(text).trigger("create");
        }
    } 
```

当其中一个项目被点击时，页面应该导航到另一个带有该链接数据的页面。

我做了这个函数来保存在链接中找到的值：

```
function SaveData() {
        localStorage["LessonID"] = $('#ListContainer').find('.lesson').attr('LessonID'); 
        localStorage["SubjectName"] = $('#ListContainer').find('.lesson_subject').text();
        } 
```

但它保存了“所有数据”。我只想保存所选项目的数据。你有什么想法 ？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T08:04:54.340

它保存了所有数据，因为您`find('.lesson')`会在其中找到每个链接`#ListContainer`。我建议删除您的内联事件处理程序并通过以下方法利用事件委托[`on`](http://api.jquery.com/on/)：

```
$("#ListContainer").on("click", ".lesson", function() {
    localStorage["LessonID"] = $(this).data("lessonid");
    localStorage["SubjectName"] = $(this).data("subject");
}); 
```

请注意，我使用的是`data`方法而不是`attr`. 这将需要对您的标记进行另一次更改：

```
<a href="Page.htm" rel="external" class="lesson" data-lessonid="someID" data-subject="someSubject"> 
```

这使用 HTML5`data-*`属性，这是在元素上存储任意数据时推荐的方法。

* * *

为什么要使用事件委托？它更有效，因为它导致绑定到元素的事件处理程序更少。不是每个`a.lesson`元素上都有一个，而是元素上只有一个`#ListContainer`。

因为大多数 DOM 事件会在树中冒泡，所以单击 的后代`#ListContainer`会在 DOM 树中冒泡，最终到达`#ListContainer`. jQuery`on`方法将在该元素处获取事件，并检查它是否源自匹配的元素`.lesson`。如果是这样，它将执行事件处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T08:06:28.823

改变这个

```
onclick= "SaveData();" 
```

至

```
onclick= "SaveData(this);" 
```

然后将`saveData`函数更改为

```
function SaveData(elem) {
        localStorage["LessonID"] = $(elem).attr('LessonID'); 
        localStorage["SubjectName"] = $(elem).find('.lesson_subject').text();
        } 
```

或者更好的是，您可以`$.on`像@James Allardice 在他的回答中显示的那样使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T08:05:41.023

您正在混合旧世界的 JavaScript 和 jQuery。

用于`$("<a ...")`创建您的元素，附加它，然后附加一个可以`$(this)`在触发时使用的 .click 处理程序。当您添加 .click 处理程序可以使用的元素时，使用 .data 向元素添加数据。

# magento - 管理服务器不应提供商店页面

> ID：10992625
> 
> 赞同：2
> 
> 时间：2012-06-12T08:00:42.587
> 
> 标签：magento

我有一个多服务器单商店 Magento 设置，如下所示：

*   *负载均衡器后面的*n 个网络服务器位于*`www.mydomain.com`*
**   为管理面板提供服务的管理服务器在`admin.mydomain.com`*

 *设置工作正常，当我去时，`www.mydomain.com/admin`我最终会被重定向到`admin.mydomain.com/index.php/admin`. 我的问题是，如果您转到产品`admin.mydomain.com/store-page.html`、`store-page.html`类别或其他页面的位置，则会提供该页面。出于 SEO 原因（我们发现这是因为有人在管理服务器上发布了指向我们商店的链接）和负载平衡原因，我不希望这种情况发生。Magento 有没有办法告诉特定服务器不提供商店页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:38:03.717

很多可能性：

1.  使用 http 基本身份验证保护管理员
2.  制定一个 mod_rewrite 规则以将所有请求重定向到管理页面
3.  使用 ip 访问规则等保护管理域*

# java - 将测试套件设置为忽略

> ID：10992626
> 
> 赞同：7
> 
> 时间：2012-06-12T08:00:45.570
> 
> 标签：java, junit, junit4, test-suite

我有很多测试套件，每个测试套件都包含许多测试类。以下是它们的样子：

```
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.runner.RunWith;
import org.junit.runners.Suite;
import org.junit.runners.Suite.SuiteClasses;

@RunWith(Suite.class)
@SuiteClasses( {ATest.class, BTest.class})
public class MyFirstTestSuite {

    @BeforeClass
    public static void beforeClass() throws Exception {
                // load resources
    }

    @AfterClass
    public static void afterClass() throws Exception {
        // release resources

    }
} 
```

有时我想完全禁用整个测试套件。我不想将每个测试类设置为，因为每个测试套件都使用and`@Ignore`加载和释放资源，并且我想在忽略测试套件时跳过此加载/释放。`@BeforeClass``@AfterClass`

所以问题是：有什么类似于`@Ignore`我可以在整个测试套件上使用的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T12:30:55.520

您可以使用`@Ignore`.

```
@RunWith(Suite.class)
@SuiteClasses({Test1.class})
@Ignore
public class MySuite {
    public MySuite() {
        System.out.println("Hello world");
    }

    @BeforeClass
    public static void hello() {
        System.out.println("beforeClass");
    }
} 
```

不产生任何输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-24T10:55:37.373

SlowTest 是一个由用户定义的类。它可以是空的（没有任何功能或属性）。你可以随意命名它：

[![在此处输入图像描述](../Images/01074f5da39447affdef61c351beaac7.png)](https://i.stack.imgur.com/6D6P1.png)

[![在此处输入图像描述](../Images/ecc3726ac04e689f32aedae579cfe41a.png)](https://i.stack.imgur.com/2TUvt.png)

# ruby - Ruby 浏览器自动化

> ID：10992628
> 
> 赞同：1
> 
> 时间：2012-06-12T08:01:02.980
> 
> 标签：ruby, macos, automation, ruby-1.9

我想编写运行浏览器（例如，firefox）、打开网址、单击链接、选中/取消选中框和其他东西的 ruby​​ 脚本。我可以使用什么宝石？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:30:12.257

检查 watir 和 watir_webdriver，它们用于自动 Web 浏览器测试，但它可用于来自 ruby[​​ http://watir.com/的浏览器脚本](http://watir.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:37:39.710

[Selenium](http://seleniumhq.org/) / [Selenium Ruby](http://selenium.rubyforge.org/getting-started.html)是另一种选择，还有用于编写 Firefox 脚本的[Selenium IDE](http://seleniumhq.org/projects/ide/)。

> “它是作为 Firefox 扩展实现的，允许您记录、编辑和调试测试。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:12:47.497

你可以使用 rb-appscript 框架来自动化 macosx

[http://appscript.sourceforge.net/rb-appscript/index.html](http://appscript.sourceforge.net/rb-appscript/index.html)

它是一个使用 applescript 接口与 macos 应用程序交互的 ruby​​ 框架。

我不确定是否有可以用来安装的 gem，但上面的链接中有安装说明。

[http://www.aeth.com/rbappscript/00intro.html](http://www.apeth.com/rbappscript/00intro.html)上有一篇不错的文章，展示了如何使用 rb-appscript 将 applescript 替换为 ruby

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:03:27.183

查看 watir、watir-webdriver 或 firewatir。它非常易于使用，尤其是在您刚开始的时候。您可以查看有关如何设置它的快速教程，它非常简单。

[http://webmites.org/watir-automated-tests-for-everyone/](http://webmites.org/watir-automated-tests-for-everyone/)

# gwt - 在 GWT + MGWT 中水平和垂直居中小部件

> ID：10992630
> 
> 赞同：1
> 
> 时间：2012-06-12T08:01:14.270
> 
> 标签：gwt, layout, mobile, vertical-alignment, tablet

我正在尝试使用 GWT + MGWT 为移动/平板电脑应用程序创建以下布局。我希望中央小部件保持水平和垂直居中，但徽标和下部文本填充剩余空间。

![手机/平板电脑布局](../Images/681981ca8f5db01609fc987ddee8d107.png)

这似乎应该是一件很简单的事情，但我就是无法让它工作！任何帮助将不胜感激。

干杯，

乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:13:14.193

您尝试过 VerticalPanel 吗？

```
VerticalPanel   vp = new VerticalPanel();

logo = new Label( "" );
vp.add( logo );
vp.setCellHorizontalAlignment(  logo , HasHorizontalAlignment.ALIGN_CENTER) ;
vp.setCellVerticalAlignment(    logo , HasVerticalAlignment.ALIGN_MIDDLE) ;

 ... 
 and so on for others. 
```

# oop - Matlab面向对象的组合，聚合

> ID：10992634
> 
> 赞同：3
> 
> 时间：2012-06-12T08:01:25.653
> 
> 标签：oop, matlab, uml, code-generation

我正在编写我的第一个 MATLAB OO 应用程序，我对组合、聚合和关系的一般实现感到困惑。

我的问题是：如何在matlab中实现聚合或关联一对多？我可以在哪里举一些例子？

此外，我正在使用 ArgoUml 来设计我的应用程序，是否有任何插件可以在 matlab 中自动生成代码？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:24:35.773

这是一个类关联的简单示例。该场景包含一门可以招收许多学生的课程：

### 学生.m

```
classdef Student < handle
    properties
        name
    end
    methods
        function obj = Student(name)
            if nargin > 0
                obj.name = name;
            end
        end
        function delete(obj)
            fprintf('-- Student Destructor: %s\n',obj.name);
        end
    end
end 
```

### 课程.m

```
classdef Course < handle
    properties
        name        %# course name
        std         %# cell array of students
    end
    properties(Access = private)
        lastIdx = 1;
    end
    methods
        function obj = Course(name, capacity)
            obj.name = name;
            obj.std = cell(capacity,1);
        end
        function addStudent(obj, std)
            if obj.lastIdx > numel(obj.std)
                fprintf(2, 'Sorry, class is full\n');
                return
            end
            obj.std{obj.lastIdx} = std;
            obj.lastIdx = obj.lastIdx + 1;
        end
        function printClassRoster(obj)
            fprintf('Course Name = %s\n', obj.name);
            fprintf('Enrolled = %d, Capacity = %d\n', ...
                obj.lastIdx-1, length(obj.std));
            for i=1:obj.lastIdx-1
                fprintf('ID = %d, Name = %s\n', i, obj.std{i}.name);
            end
        end
    end

end 
```

这是测试上述类的代码：

```
c = Course('CS101', 3);
for i=1:4
    name = sprintf('amro%d',i);
    fprintf('Adding student: %s\n', name)
    c.addStudent( Student(name) )
end

fprintf('\nClass Roster:\n=============\n')
c.printClassRoster()

fprintf('\nCleaning up:\n')
clear c 
```

输出：

```
Adding student: amro1
Adding student: amro2
Adding student: amro3
Adding student: amro4
Sorry, class is full
-- Student Destructor: amro4

Class Roster:
=============
Course Name = CS101
Enrolled = 3, Capacity = 3
ID = 1, Name = amro1
ID = 2, Name = amro2
ID = 3, Name = amro3

Cleaning up:
-- Student Destructor: amro1
-- Student Destructor: amro2
-- Student Destructor: amro3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:05:51.003

您可以查看[MATLAB 中的 Object-Oriented Programming ，](http://www.mathworks.ch/discovery/object-oriented-programming.html)并在文档中参阅[Object-Oriented Programming](http://www.mathworks.ch/help/techdoc/matlab_oop/ug_intropage.html)。

我建议仔细看看[Value or Handle Class — which to Use](http://www.mathworks.nl/help/matlab/matlab_oop/which-kind-of-class-to-use.html) 。简而言之，句柄类允许您传递引用，而值类始终是原始对象的副本。

我会惊讶地发现 ArgoUml 的插件，因为 MATLAB 主要由工程师使用，而不是软件开发人员。

# git - 当 origin/dev 已经存在时，我可以创建 origin/staging 的 origin/dev 分支吗？

> ID：10992635
> 
> 赞同：1
> 
> 时间：2012-06-12T08:01:32.773
> 
> 标签：git

我想收回`dev`分支，但它充满了我们不想保留的东西。我可以让它不再是现在的样子，而是基于分期而不删除其中的历史记录吗？我想这样设置：

```
staging __________________________________
dev     _________  \______/    \____/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:06:17.087

取决于“基于暂存”和“不删除历史记录”的含义。

如果您的意思是您想表现得像合并`dev`在一起一样`staging`，但实际上最终结果与当前正在分阶段的结果完全相同，那很容易。从存储库的根目录：

```
git checkout origin/dev -b dev
git merge --no-commit origin/staging
git checkout --theirs .
git commit -m "Revert back to the contents of staging"
git push origin dev 
```

这里的关键线是第三条。`origin/staging`这就是用分支的确切内容覆盖合并结果的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:16:29.443

您的问题有点令人困惑，因为它说的是“我们不想保留的东西”，然后是“不删除历史记录”。为了谨慎起见，我建议：

```
git checkout staging #switch away from dev branch
git branch -m dev olddev #rename old dev branch so we don't delete history
git checkout -b dev staging # start a new dev branch where staging is currently 
```

如果您想在不同的点启动新分支，只需在最后一个命令中`dev`替换适当的 SHA1 或分支名称即可。`staging`如果你想`dev`成为一个没有父母的全新分支，你需要`--orphan`选择`git checkout`.

`dev`完成此操作后，请参阅有关将新内容推送到上游存储库的 kostix 说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:59:23.923

分支只是对提交的引用。如果您想摆脱`dev`分支，那么在您的本地存储库中执行

```
$ git branch -D dev
$ git branch dev staging 
```

第一个命令删除分支“dev”，第二个命令再次创建它，将其从“staging”分支出来，以便“dev”分支最终指向相同的提交“staging”。

如果您与远程仓库同步，​​您将需要*强制*推送新的“dev”分支：

```
$ git push --force origin dev 
```

如果您现在仍需要保留“dev”包含的历史记录，请将其重命名而不是删除：

```
$ git branch -m dev ex-dev 
```

在这种情况下，强制推动新的“开发”的观点显然仍然成立。

请注意，强制替换远程存储库中的分支对那些在替换之前克隆存储库并将其本地分支基于现在替换分支的原始内容的人产生重大影响。这在文献中被广泛报道。例如参见`git-rebase`手册。

# c# - 站点地图删除节点

> ID：10992643
> 
> 赞同：0
> 
> 时间：2012-06-12T08:02:04.470
> 
> 标签：c#, asp.net, sitemap

我有一个 web.sitemap，对于特定情况，我需要从中删除节点 `<siteMapNode url="~/mainv.aspx" title="MainV" description="">` 。但我得到 SiteMapNode Collection 是只读异常。有没有办法做到这一点。

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0">
  <siteMapNode url="~/default.aspx" title="Home" description="">
    <siteMapNode url="~/main.aspx" title="Main" description="">
      <siteMapNode url="~/mainv.aspx" title="MainV" description="">        
      <siteMapNode url="~/last.aspx" title="Last" description="">
      </siteMapNode>
      </siteMapNode>
    </siteMapNode>
  </siteMapNode>
</siteMap> 
```

编码

```
protected void SiteMapPath1_ItemDataBound(object sender, SiteMapNodeItemEventArgs e)
{
e.Item.SiteMapNode.ReadOnly = false;
e.Item.SiteMapNode.ChildNodes.RemoveAt(2);
} 
```

**编辑：**

```
protected void SiteMapPath1_ItemDataBound(object sender, SiteMapNodeItemEventArgs e)
    {

SiteMapNodeCollection modifiableCollection = new SiteMapNodeCollection(e.Item.SiteMapNode.RootNode.ChildNodes);
                        modifiableCollection.RemoveAt(2);
    } 
```

现在我得到索引超出范围。必须为非负数且小于集合的大小。\r\n参数名称: index

# java - validateJarFile(servlet-api.jar) - jar 未使用 eclipse 在 tomcat 中加载

> ID：10992644
> 
> 赞同：14
> 
> 时间：2012-06-12T08:02:09.577
> 
> 标签：java, tomcat, servlets

> [Tomcat] validateJarFile(servlet-api.jar) - 未加载 jar。违规类：javax/servlet/Servlet.class org.apache.catalina.loader.WebappClassLoader validateJarFile 信息：validateJarFile(\WEB-INF\lib\servlet-api.jar) - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class。

我搜索了这个，我知道我在我的项目 WEB-INF/lib 中使用了 servlet-api.jar，而且我在 tomcat/lib 文件夹中有相同的 servlet-api.jar。所以我必须删除 servlet-api.jar，但是如果我删除了那个 jar，我会在 import javax.servlet.* 中得到错误；那么我该如何解决这个问题，请帮我解决这个错误。在此先感谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T08:05:52.617

您得到的错误是因为 servlet-api 需要在编译时构建路径上，在运行时您的应用程序将具有从 tomcat/lib 可用的 servlet-api

因此，只需将其添加到您的构建路径中，简而言之，`servlet-api`在编译和运行时都需要

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-07T12:48:40.060

试试这个来删除你收到的警告信息。

*   Servlet 规范说你不能`servlet.jar`在你的 webapps`lib`目录中拥有。
*   如果您想摆脱警告，只需从中删除 servlet.jar

* * *

```
C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\YOUR_project\WEB-INF\lib 
```

# java - 在 JPA 中使用 MAX() 的 SELECT 查询无法获得正确的值

> ID：10992645
> 
> 赞同：6
> 
> 时间：2012-06-12T08:02:12.177
> 
> 标签：java, jpa, derby, jpql, toplink

我是 JPA 的新手，当我尝试使用 MAX() 函数查询数据库时遇到问题。我的功能代码如下。谁能帮我？谢谢你。

```
public int getMaxId(){

    entityManager = this.entityManagerFactory.createEntityManager();

    Query query = entityManager.createQuery("SELECT * FROM user WHERE id = (SELECT MAX(u.id) FROM user u)");
    User user = (User) query.getSingleResult();

    int id = user.getId();
    return id;
} 
```

我正在使用 JPA、TopLink 和 Apache Derby。我的方法应该返回表用户的最大 id。

编辑：我从服务中调用该函数：

```
try {
        int id = userDAO.getMaxId();
        logger.info("Max id: " + id);
        user.setId(id+1);

    }
    catch (Exception ex){
        logger.error("Unable to get the max id.");
    } 
```

的值`user.setId()`始终为“0”。

编辑（2）：日志

```
 Caused by: Exception [EclipseLink-8034] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Error compiling the query [SELECT u FROM user u WHERE u.id = (SELECT MAX(uu.id) FROM user uu)]. Unknown entity type [user].
    at org.eclipse.persistence.exceptions.JPQLException.entityTypeNotFound(JPQLException.java:483)
    at org.eclipse.persistence.internal.jpa.parsing.ParseTreeContext.classForSchemaName(ParseTreeContext.java:138)
    at org.eclipse.persistence.internal.jpa.parsing.SelectNode.getClassOfFirstVariable(SelectNode.java:327)
    at org.eclipse.persistence.internal.jpa.parsing.SelectNode.getReferenceClass(SelectNode.java:316)
    at org.eclipse.persistence.internal.jpa.parsing.ParseTree.getReferenceClass(ParseTree.java:436)
    at org.eclipse.persistence.internal.jpa.parsing.ParseTree.adjustReferenceClassForQuery(ParseTree.java:75)
    at org.eclipse.persistence.internal.jpa.parsing.JPQLParseTree.populateReadQueryInternal(JPQLParseTree.java:103)
    at org.eclipse.persistence.internal.jpa.parsing.JPQLParseTree.populateQuery(JPQLParseTree.java:84)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:219)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:190)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:142)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:126)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1475)
    ... 35 more 
```

我的实体`User`声明如下：

```
@Entity
@Table(name = "user")
public class User {

@Id
private int id;
private String name;
private String lastName;
private String city;
private String password; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-12T08:13:37.990

可以直接使用更简单的JPQL

```
return (Integer)entityManager.createQuery("select max(u.id) from User u").getSingleResult(); 
```

或者使用[TypedQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createQuery%28java.lang.String,%20java.lang.Class%29)

```
return entityManager.createQuery("select max(u.id) from User u", Integer.class).getSingleResult(); 
```

**编辑：**

```
Unknown entity type [user] 
```

您应该使用`User`而不是`user`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T08:14:28.980

好吧，很难从您的评论中说出来，而且您还没有发布任何日志记录。

这个怎么样：

```
Query query = entityManager.createQuery("SELECT u FROM users u WHERE u.id = (SELECT MAX(u.id) FROM users u)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T18:07:57.523

我使用该代码：

```
 Query qry = em.createQuery("SELECT MAX(t.column) FROM Table t");
    Object obj = qry.getSingleResult();
    if(obj==null) return 0;
    return (Integer)obj; 
```

因为如果表“t”上没有元素，则抛出 NullpointerException。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-02-20T14:21:58.387

这是一个很好的解决方案，但是您必须在 sql 的两个部分中使用不同的名称。像这样：“SELECT u FROM users u WHERE u.id = (SELECT MAX(u2.id) FROM users u2)”

# unix - 如何在 sed 中获得第 10 个分组值？

> ID：10992650
> 
> 赞同：5
> 
> 时间：2012-06-12T08:02:35.623
> 
> 标签：unix, sed

这是我的sed。

```
sed 's/\([a-z]\)\([A-Z]\)\([0-9]\)\([a-z]\)\([A-Z]\)\([0-9]\)\([a-z]\)\([A-Z]\)\([0-9]\)\([a-z]\)/\10/g' 
```

我试图获得第 10 个分组值。但是，它给出了第一个分组值为 0（零）。

如何获得第 10 个分组值？

是否有可能得到第10个分组值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T08:56:14.773

`sed`仅支持 10 个组（从`\0`到`\9`），不支持非捕获组。

您可以将命令重写为：

```
sed 's/[a-z][A-Z][0-9][a-z][A-Z][0-9][a-z][A-Z][0-9]\([a-z]\)/\1/g' 
```

# javascript - 如何仅获取集合中所有模型的属性

> ID：10992657
> 
> 赞同：0
> 
> 时间：2012-06-12T08:03:13.810
> 
> 标签：javascript, backbone.js

我有一个如下所示的集合

```
window.courses = new Courses(); 
```

在我的代码中的一些地方，我试图访问集合的属性。我用 pluck 只获得了一个属性，即 courseName

例如：

```
var courseName = window.courses.pluck('Name'); 
```

我可以在我的集合中获取所有课程名称（单个属性），但是有没有一种方法可以从 Courses 集合中获取每个项目的名称和 ID，例如

```
var courseList = window.courses.pluck('Id','Name'); 
```

使用下面的代码

```
var courseList = window.courses; 
```

我得到了我不需要的所有额外细节，所以有人可以建议如何获取集合中所有模型的必需属性

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:15:58.103

标准的 Backbone [pluck 函数](http://backbonejs.org/docs/backbone.html#section-96)只支持读取一个属性值。

你可以自己写，例如：

```
Backbone.Collection.prototype.pluckMany = function (attrs) {
    return _.map(this.models, function (model) {
        return _.pick(model.attributes, attrs);
    });
}

var courseList = window.courses.pluckMany(['Id', 'Name']); 
```

注意：未经测试的代码！

# bash - 查找不包含特定目录的目录

> ID：10992664
> 
> 赞同：1
> 
> 时间：2012-06-12T08:03:42.947
> 
> 标签：bash, shell, command-line, find

一直在寻找，找不到解决方案。我想我正在按名称寻找叶目录。在此示例中，我想获取一个名为“modules”的目录列表，这些目录没有名为 module 的子目录。

```
modules/package1/modules/spackage1
modules/package1/modules/spackage2
modules/package1/modules/spackage3/modules
modules/package1/modules/spackage3/modules/spackage1
modules/package2/modules/ 
```

我想要的清单将包含

```
modules/package1/modules/spackage3/modules/
modules/package2/modules/ 
```

没有名为 module 的子目录的所有名为 module 的目录

我开始尝试这个没有运气的东西

```
find . -name modules \! -exec sh -c 'find -name modules' \; 
```

-exec 适用于退出代码，好的，让我们将计数作为退出代码传递

```
find . -name modules -exec sh -c 'exit $(find {} -name modules|grep -n ""|tail -n1|cut -d: -f1)' \; 
```

这应该计算每个名为 modules 的子目录的数量并退出。没有这样的爱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:38:28.067

这假设 GNU `find`。查找仅包含一次“模块”的所有叶目录：

```
find -regex '.*/modules\(/.*\|$\)' \! -regex '.*/modules/.*/modules\(/.*\|$\)' -type d -links 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:32:29.347

```
find . -name modules |\
awk '{gooddir[$1]=1}\
 END {\
    for(i in gooddir){\
        for(j in gooddir){\
            if(i!=j&&substr(i,0,length(j))==i)\
            {gooddir[i]=0;break}\
        }\
    }\
    for(i in gooddir){if(gooddir[i]==1){print i}}}' 
```

尝试这个？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T10:00:04.947

你的开始

```
find . -name modules \! -exec sh -c 'find -name modules' \; 
```

还不错，只是需要一些改进。

```
find . -name modules \! -exec sh -c 'find {} -mindepth 1 -name modules|read' \; -print 
```

*   `{}`在找到的模块目录中搜索，而不是再次在顶级目录中搜索
*   `-mindepth 1`仅在找到的模块目录下搜索，而不是再次找到自己
*   `|read`如果没有找到文件，则设置退出状态（不幸的是，find 不这样做）
*   `-print`打印找到的目录

# android - Android：如何将 AsyckTask 的结果传递给主线程？

> ID：10992668
> 
> 赞同：0
> 
> 时间：2012-06-12T08:04:10.590
> 
> 标签：android, multithreading, asynchronous

我有一个实现 AsyncTask 的类。

它计算一个对象（用户），我想将该对象返回给主（UI）线程以传递给一个新的活动。

我知道它是用**Activity.runOnUiThread()**完成的，但我不明白要传递给这个函数等什么？（我想在主线程中设置一个变量**User usr = value**）

我应该怎么做？

谢谢

**编辑：使用“Vipul Shah”代码我得到“无例外关闭”。这是日志（来自 logcat）：**

```
06-12 10:28:05.404: E/AndroidRuntime(1475): FATAL EXCEPTION: AsyncTask #1
06-12 10:28:05.404: E/AndroidRuntime(1475): java.lang.RuntimeException: An error occured while executing doInBackground()
06-12 10:28:05.404: E/AndroidRuntime(1475):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at java.lang.Thread.run(Thread.java:856)
06-12 10:28:05.404: E/AndroidRuntime(1475): Caused by: java.lang.NullPointerException
06-12 10:28:05.404: E/AndroidRuntime(1475):     at org.ksoap2.serialization.SoapSerializationEnvelope.getResponse(SoapSerializationEnvelope.java:513)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at es.es.ValidacionThread.doInBackground(ValidacionThread.java:65)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at es.es.ValidacionThread.doInBackground(ValidacionThread.java:1)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
06-12 10:28:05.404: E/AndroidRuntime(1475):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-12 10:28:05.404: E/AndroidRuntime(1475):     ... 4 more 
```

ValidacionTask 完整源代码：

```
package es.es;

import java.io.IOException;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Handler;

public class ValidacionThread extends AsyncTask<String, Object, Usuario> {

    private final String NAMESPACE = "http://webservices.pcp/";
    private final String URL = "http://127.0.0.1:8080/webServices/pcpWS?wsdl";
    private final String SOAPACTION = "";
    private final String METHOD = "ValidarUsuario";
    private AccesoCuentaActivity act;

    //Handler handler;

    private Context context;

    public ValidacionThread(Context context){
        this.context = context;
    }

    protected Usuario doInBackground(String[] pars) {

                 String user = pars[0];
                 String password = pars[1];
                SoapObject request = new SoapObject(NAMESPACE, METHOD); 
                SoapSerializationEnvelope sobre = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                sobre.dotNet = false;       
                request.addProperty("login", user);        
                request.addProperty("password", password); 
                sobre.setOutputSoapObject(request); 

                HttpTransportSE transporte = new HttpTransportSE(URL);        
                try {
                    transporte.call(SOAPACTION, sobre);
                } catch (IOException e) {
                //  JOptionPane.e.printStackTrace();
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                SoapObject resultado = null;
                try {
                    resultado = (SoapObject)sobre.getResponse();
                } catch (SoapFault e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                Usuario usu = new Usuario();
                usu.IdUsuario= resultado.getProperty(0).toString();
                usu.Nombre = resultado.getProperty(1).toString();
                usu.Apellidos = resultado.getProperty(2).toString();
                usu.Rol = resultado.getProperty(3).toString();   
                usu.Centro=resultado.getProperty(4).toString();
                return usu;     

}
       protected void onPostExecute(Usuario usu) {
          Intent intent = new Intent(context, MainActivity.class);
           intent.putExtra("result", usu);
           context.startActivity(intent);
           super.onPostExecute(usu);

        }

       protected void onProgress(Usuario usu) {

        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:19:40.893

我希望您了解我们提供的 onPostExecute 和 onProgressUpdate 来执行 UI 线程工作。

如果仍然想要您在 AsyncTask 中的活动，则可以在构造函数中传递它

```
public class MyAsyncTaskextends AsyncTask<String, Void, String> {
private <YOUR>Activity mActivity;

 public MyAsyncTaskextends (<YOUR>Activity activity){
          super();
         mActivity = activity;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:20:03.030

> 它计算一个对象（用户），我想将该对象返回给主（UI）线程以传递给一个新的活动。

对象的计算应该发生在`doInBackground`方法中，一旦完成，就使用`onPostExceute`方法来做 UI 部分。

下面的片段会帮助你。

**示例活动类。**

```
 public class HelloActivity extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        new MyTask(this).execute("");
    }

} 
```

**我的任务.java**

```
class MyTask extends AsyncTask<String, Object, String> {

        private Context context;

        public MyTask(Context context) {
            this.context = context;
        }

        @Override
        protected String doInBackground(String... params) {
            // Do background operations here and once done return the result.

            return result;
        }

        @Override
        protected void onPostExecute(String result) {

            // Here you will receive that result.

            Intent intent = new Intent(context, SecondActivity.class);
            intent.putExtra("result", result);
            context.startActivity(intent);
            super.onPostExecute(result);
        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T08:12:19.803

最好的办法是使用 Handle 对象。

```
final Handler handler = new Handler() {
        public void handleMessage(Message msg) {
      User user = (User) msg.obj;
    // here is your code 
      }
}; 
```

在你的线程中

```
msg = handler.obtainMessage();
msg.obj = user;
handler.sendMessage(msg); 
```

不要忘记在 Tasks 构造函数中提供指向您的处理程序的链接

# iphone - 如何在aes128解密中从字符串中删除垃圾字符

> ID：10992669
> 
> 赞同：0
> 
> 时间：2012-06-12T08:04:16.217
> 
> 标签：iphone, objective-c, aes, encryption

问题是服务器端的加密，他们正在使用 ISO10126d2Padding 并且正在解密，但是在解密后它显示了一些垃圾值，任何人都请帮助删除：

**实际结果 = 印度 ismy**
***解密值 = 印度 ismyg~²t**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:01:31.707

我不会说这是从 NSString 中删除不需要的字符的最佳方法，但我这样做了......而且它很棒。

```
NSString * str = @"your string";
NSMutableString * newString;
int j = [str length];
for (int i=0; i<j; i++) {       
    if (([str characterAtIndex:i] >=65 && [str characterAtIndex:i] <=90) || ([str characterAtIndex:i] >=97 && [str characterAtIndex:i] <=122) ||[str characterAtIndex:i] == 32 ) {
        [newString appendFormat:@"%c",[str characterAtIndex:i]];
    }               
}

//([str characterAtIndex:i] >=65 && [str characterAtIndex:i] <=90) this is ASCII limit for A-Z
//([str characterAtIndex:i] >=97 && [str characterAtIndex:i] <=122) this is ASCII limit for a-z
//and [str characterAtIndex:i] == 32 is for space. 
```

现在，打印新字符串

```
NSLog(@"%@",newString); 
```

让我知道它是否适合你！

谢谢你！

# jquery - 使用jQuery突出显示位于窗口中心的唯一div

> ID：10992677
> 
> 赞同：2
> 
> 时间：2012-06-12T08:04:46.580
> 
> 标签：jquery, html, css

我有几个 id="scroll_1"、"scroll_2"、"scroll_3" 等的 div...当这些 div 中的任何一个位于窗口的中心时，我想使用 jQuery 突出显示和/或更改背景颜色无论哪个 div 位于窗口的中心。目前，背景颜色一旦位于屏幕中心就会发生变化，但是一旦它不再位于中心，我就会遇到将其更改回原始背景颜色的问题（即用户向下/向上滚动到另一个 scroll_x id。

**编辑**我拥有的唯一相关的 CSS 代码是：

```
[id^=scroll_]{
background-color:white;
} 
```

谢谢您的帮助！

```
<script>
$(document).ready(function() {      
    var window_height = $(window).height();
var obj_height = $('#scroll_1').height(); //height of object we are scrolling past
var top = $('#replyer').offset().top + (obj_height /2); //position on screen to start highlighting #scroll_x

    $(window).scroll(function() {
    var scrollMiddle = $(window).scrollTop() + ((window_height/2) - (obj_height /2));

    if (scrollMiddle >= top) {
        var scrollPosition = $(document).scrollTop()+ ((window_height/2) - (obj_height /2)),
                currentPosition = 0;
    $('div[id^="scroll_"]').each(function() {//iterate over #scroll_x and only change background until another #scroll_x is in the middle of the screen
            currentPosition = $(this).offset().top;
            if (currentPosition >= scrollPosition) {
            $(this).prev(function(){
                $(this).css('background-color',"#aaa"); //change previous #scroll_x back to original background color - Not Working Currently
            });

                return false; // break the loop
                }

                $(this).css('background-color',"#ccc"); //currently changes background of #scroll_x once in middle of screen but stays highlighted when scrolling up/down to previous/next iteration of #scroll_x
            });
        }
    });
});
</script> 
```

html:

```
<div id="replyer">
    Top line before repeating divs
</div>
<div id="scroll_1">
    First object to scroll over.
</div>
<div id="scroll_2">
    Want to highlight div currently in the middle of screen
</div>
<div id="scroll_3">
    Only div in middle of screen should be highlighted (background change)
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:00:29.957

我不确定它是否正是您所追求的，但这里有一个演示，它将与浏览器中间重叠的对象更改为绿色。

小提琴：http: [//jsfiddle.net/j2ULW/1/](http://jsfiddle.net/j2ULW/1/)

完整来源：

```
<html>
<head>
  <title>Scroll test</title>
</head>
<style type="text/css">
  body {
    background: #000;
  }
  [id^=scroll_]{
    background-color:#aaa;
    height: 600px;
  }
  #replyer {
    height: 400px;
    background: white;
  }
</style>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<body>
  <div id="replyer">
    Top line before repeating divs
  </div>
  <div id="scroll_1">
      First object to scroll over.
  </div>
  <div id="scroll_2">
      Want to highlight div currently in the middle of screen
  </div>
  <div id="scroll_3">
      Only div in middle of screen should be highlighted (background change)
  </div>
<script>
$(document).ready(function() {      
  var window_height = $(window).height();
  $(window).scroll(function() {
    var scrollMiddle = $(window).scrollTop() + (window_height/2);
    $('div[id^="scroll_"]').each(function() {
      elTop = $(this).offset().top;
      elBtm = elTop + $(this).height();
      if (elTop < scrollMiddle && elBtm > scrollMiddle) {
        $(this).css('background-color',"#00ff00");
      } else {
        $(this).css('background-color',"#aaa");
      }
    });
  });
});
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:06:14.597

默认情况下，您的容器 div 需要具有以下 CSS 属性：

```
div.container { overflow:auto; height:auto; } 
```

要阻止 470*180px 大小的容器，请添加以下内容：

```
div.container-closed { overflow:hidden; width:470px; height:180px; } 
```

之后，单击，删除类 .container-close 以删除溢出：

jQuery代码：

```
// by default we block the size with JS
$("#div").addClass("container-closed");
// click event
$("#trigger").click( function() {
      $("#div").toggleClass("container-closed");
}); 
```

# ios - Iphone 4s 中的奇怪通知

> ID：10992684
> 
> 赞同：1
> 
> 时间：2012-06-12T08:05:29.763
> 
> 标签：ios

目前我正在申请拨打和接听电话。一切正常，不包括 iPhone 4s 中的一个错误。

产生问题的步骤：

第 1 步：当用户 A 呼叫用户 B（拥有 iPhone 4s）时。

第2步：用户B不接听或拒接电话，从设置切换到wifi网络的飞行模式。

第 3 步：现在用户 B 回来并发现警报要打开 wifi。因此他按下OK。

所以在这个阶段用户 B 断开连接。现在，当我强制我的应用程序作为背景时，在主屏幕上它会在顶部显示一些红色通知器。

我在这里附上一张图片，请看一下![一些奇怪的通知图片](../Images/dfffde42cfd2c30062e8e85155b32896.png)

所以不知道这个通知是为了什么。以及如何避免此类通知。

此通知仅适用于 iPhone 4s，特别是在您非常快速地执行所有操作或步骤时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:42:47.687

通常，红色状态栏表示您的应用程序（在后台）正在录制音频。你在 AVEngineering 中这样做吗？

# javascript - 在左侧显示子列表的 CSS 属性

> ID：10992688
> 
> 赞同：1
> 
> 时间：2012-06-12T08:05:43.897
> 
> 标签：javascript, jquery, css, drop-down-menu

我有一个看起来[像这样](http://jsfiddle.net/wEExT/)的菜单，将鼠标悬停在“tanfa 演示示例”上时，子列表出现在 RHS

问题是，在我的情况下，整个菜单都在[最右边](http://jsfiddle.net/wEExT/2/)。我希望子列表出现在 LHS 上。

我尝试过使用 CSS “left: 0; top: 0;” 属性，但这只会在其父元素的左上角显示子列表，它重叠如下，

![在此处输入图像描述](../Images/ec9c92ede310a51ae750663099bddae1.png)

我希望菜单从其父级的“左：0；上：0”开始，然后向左滑动。我更喜欢通过 CSS 的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:09:12.443

尝试`right: 100%`代替`left: 0`，它基本上告诉您的菜单它应该将其左边缘定位到其父级的最左边缘。`right: 100%`应该告诉它把它的最右边与你的父菜单的最左边对齐。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:11:20.930

如果我理解正确，要使子列表出现在父级的左侧，请将其`left`属性设置为`-100%`.

```
#menu ul ul ul {
position: absolute;
top: 0;
left: -100%;
width: 100%;
} 
```

[http://jsfiddle.net/G5yQx/1/](http://jsfiddle.net/G5yQx/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T08:12:23.257

可以试试这个：为子（弹出列表）设置负边距= 2 x父列表的边距

即：添加类似这样的内容以弹出列表。

```
{
    margin: 0 -300px; /* 0 denotes top and bottom margin : 0 */
} 
```

PS：尽管查看您的代码，但不建议这样做。将需要对代码进行更多更改才能正常工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T08:29:30.560

**left:0**表示你定义它的位置。那么，解决方案是什么，而不是**left:0**你可以定义**left:auto;** . 像这样写：

```
#menu ul ul ul {
position: absolute;
top: 0;
left:auto;
right:100%;
width: 100%;
} 
```

或删除**left:0**正如 jakee 已经解释的那样。

检查这个[http://jsfiddle.net/wEExT/9/](http://jsfiddle.net/wEExT/9/)

# jquery - 如何将文本放置在 svg 路径的中心

> ID：10992691
> 
> 赞同：7
> 
> 时间：2012-06-12T08:06:15.673
> 
> 标签：jquery, svg, jquery-svg

为了渲染 SVG，我使用了 jQuery SVG 插件。而且，现在我想为每个路径和多边形添加文本。在[jsFiddle 上](http://jsfiddle.net/FhFZt/)，您可以看到插件生成的标记。

为了创建文本，我编写了以下代码：

```
var svgg = $("#rsr").svg('get');
var texts = svgg.createText();
svgg.textpath($("#Layer_x0020_1"),id, texts.string('We go ').
   span('up', { dy: -30, fill: 'red' }).span(',', { dy: 30 }).
   string(' then we go down, then up again')); 
```

在[jsFiddle](http://jsfiddle.net/FhFZt/)上的代码中，您可以看到`textpath`标签存在，但不可见。如何在每条路径的中心添加文本？
谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T10:32:12.433

要将文本沿直线放置在形状顶部，在边界框的中间，请参阅：

[http://jsfiddle.net/dYuAA/114/](http://jsfiddle.net/dYuAA/114/)

它只是添加了一些 javascript 来放置文本。

```
function addText(p)
{
    var t = document.createElementNS("http://www.w3.org/2000/svg", "text");
    var b = p.getBBox();
    t.setAttribute("transform", "translate(" + (b.x + b.width/2) + " " + (b.y + b.height/2) + ")");
    t.textContent = "a";
    t.setAttribute("fill", "red");
    t.setAttribute("font-size", "14");
    p.parentNode.insertBefore(t, p.nextSibling);
}

var paths = document.querySelectorAll("path");
for (var p in paths)
{
    addText(paths[p])
} 
```

以上仅查看路径元素，但您可以调整选择器以包含您需要的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:38:54.293

这里有几个问题。

a) SVG 区分大小写，因此它是 textPath 而不是 textpath。

b) textPath 必须包含在一个`<text>`元素中才有效

这是你的[jsFiddle 修复了](http://jsfiddle.net/longsonr/dYuAA/120/)。

# lua - 拉伸物体

> ID：10992704
> 
> 赞同：3
> 
> 时间：2012-06-12T08:06:51.947
> 
> 标签：lua, coronasdk

我有一个大小为 12*30 的字符串的图像。我想创建一个动画，让它给人一种拉伸字符串的感觉。我通过缩放图像来做到这一点，但我面临的问题是缩放图像没有发生碰撞。它仅出现在原始图像大小的 12*30 区域中。我希望碰撞发生在字符串的长度之外。有没有比缩放更好的方法来做到这一点。谢谢。

```
image_rect = display.newImage("string.png")
image_rect.x = frog_jump_SheetSet.x + 10
image_rect.y = frog_jump_SheetSet.y + 10
physics.addBody(image_rect )
image_rect.yScale = 0.1
localGroup:insert(image_rect)

image_rect .collision = onStretch
image_rect :addEventListener("collision",image_rect )

tr1 = tnt:newTransition(image_rect,{time = 50,yScale = string_length })

tr2 = tnt:newTransition(image_rect,{delay = 100,time = 50,yScale = 0.1}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:48:25.907

Corona Physics 引擎不直接支持缩放，您唯一可以做的就是向对象添加矩形或根据需要删除它们以适应新形状......

一般来说，在使用物理时，您应该避免使用图像的缩放或旋转，而只需将物理 API 更改为旋转（使用扭矩），并且您无法对缩放进行任何操作。

# php - 在其他函数中使用 SQL 处理类中的 SQL 函数

> ID：10992707
> 
> 赞同：1
> 
> 时间：2012-06-12T08:07:00.713
> 
> 标签：php, sql, class, function

我`SQLquery`在一个名为`SQLHandling` It 的类中创建了一个 SQL 函数，如下所示：

```
 /***********************************************************
    * SQLquery takes a full SQL query and runs it
    * If it fails it will return an error otherwise it will return
    * the SQL query as given.
    ************************************************************/   
    function SQLquery($query)  { 

        $q = mysql_query($query);

        if(!$q) {
            die(mysql_error());
            return false;
        } else {
            return $q;          
        }
    } 
```

无论如何我可以在其他类函数中使用这个函数而不添加

```
$db = new SQLHandling();
$db->SQLquery($sql); 
```

在我将使用它的每个功能中。

我知道我可以跑步`SQLHandling::SQLquery($sql);`，但我试图避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:09:37.717

使用继承

参考： http: [//php.net/manual/en/language.oop5.inheritance.php](http://php.net/manual/en/language.oop5.inheritance.php)

但是您仍然需要使用 parent::fun() 或 $this->fun() 或将其作为公共函数然后在任何地方使用。

例子：

```
<?php

function c()
{
        echo "moi";
}    

class b extends a
{       
   public function d(){

    parent::c();//Hai
    $this->c();//Hai
    c();//moi

    }   

}

class a{    

    public function c(){
        echo "Hai";

    }       
} 

$kk = new b();
$kk -> d();

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:13:49.713

您可以在类级别实例化 SQLHandling，如下所示：

```
 private $db;

    public function __construct()
    {
        $this->db = new SQLHandling();
    }

    public function x()
    {
        $this->db->query('X');
    } 
```

# android - Android中的透视谷歌地图

> ID：10992708
> 
> 赞同：0
> 
> 时间：2012-06-12T08:07:02.863
> 
> 标签：android, google-maps, map

我需要在android中获得一张带有简单透视图的地图。就像普通地图一样，但旋转了几度，就像我们可以在谷歌地图应用程序中用两根手指拖动地图一样。据我了解，在 API 中不可能做到这一点。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:53:46.717

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:14:49.037

现在可以使用新的 Google Maps Android API。当然，它是一个全新的 API，需要一个新的 API 密钥并调整显示标记的方式。您可以免费获得透视相机以及其他一些很酷的东西。一探究竟。

[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

# visual-studio-2010 - 在 Visual Studio 2010 中的 cvQueryFrame 执行

> ID：10992710
> 
> 赞同：0
> 
> 时间：2012-06-12T08:07:33.333
> 
> 标签：visual-studio-2010, opencv

我将运行这个非常简单的代码，它将在 Visual Studio 中编译并使用 opencv 库。

```
 #include <opencv2/opencv.hpp>

int main()
{
    CvCapture *capture=cvCaptureFromFile("sample_1.avi");
    IplImage *FirstFrame=cvQueryFrame(capture);
    cvShowImage("first",FirstFrame);
    cvWaitKey();
} 
```

编译过程正常但是当调试器到达

```
IplImage *FirstFrame=cvQueryFrame(capture); 
```

发生以下异常：

```
Unhandled exception at 0x715f6a7e in VideoTest.exe: 0xC0000005: Access violation reading location 0x01bc4000. 
```

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:59:13.737

`cvQueryFrame()`崩溃，因为`cvCaptureFromFile()`可能失败。当它无法打开/找到文件或 OpenCV 不支持视频的容器/编解码器时，就会发生这种情况。

每当函数返回某些内容时，测试返回内容的有效性是一种很好的做法，在这种情况下，因为它是一个指针，您应该这样做：

```
CvCapture *capture=cvCaptureFromFile("sample_1.avi");
if (!capture)  // same as: if (capture == NULL)
{
  // print error message and abort execution
} 
```

# c++ - ntdll.dll [下面的帧可能不正确/丢失，没有为 ntdll.dll 加载符号]

> ID：10992712
> 
> 赞同：4
> 
> 时间：2012-06-12T08:07:41.533
> 
> 标签：c++, visual-studio-2010, boost, shared-ptr

几个星期以来，我遇到了这种情况，非常令人不安，

我的程序调试得很好，没有错误，当我运行程序时，它完成了工作的初始部分，几秒钟后它终止到“中断继续”选项，当我查看时在调用堆栈中，它变成发现它来自 ntdll.dll 和 msvcr100d.dll 的错误，这似乎是与 Windows 相关的 SDK 问题，它似乎也是一个错误的指针。我不知何故无法控制这一点。我将 Windows SDK 安装到 7.0 但似乎没有任何改变，

使用：Windows 7 64 位，Boost 1.48，Visual Studio 编译器（完整版），openCV2.3，c++。

我尝试了很多选择，

例如。转到任务管理器，然后右键单击 devenv.exe 并在“设置亲和力”中仅选择一个重新安装 Windows SDK，重新安装我自己的项目几次。

没有什么对我有帮助，请有人建议我一个好的解决方案。

为了更清楚，这里是我的调用堆栈

```
ntdll.dll!77e615de()    
[Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll] 
ntdll.dll!77e615de()    
ntdll.dll!77e5014e()    
msvcr100d.dll!_getptd_noexit()  Line 500    C
ntdll.dll!77eb73bc()    
ntdll.dll!77ea3c48()    
ntdll.dll!77e5016e()    
msvcr100d.dll!_getptd_noexit()  Line 500    C
ntdll.dll!77eb74df()    
ntdll.dll!77eb73bc()    
ntdll.dll!77ea3c48()    
ntdll.dll!77e5016e()    
msvcr100d.dll!_getptd_noexit()  Line 500    C
ntdll.dll!77eb74df()    
ntdll.dll!77eb73bc()    
ntdll.dll!77ea3c48()    
ntdll.dll!77e5016e()    
msvcr100d.dll!_getptd_noexit()  Line 500    C
ntdll.dll!77eb74df()    
ntdll.dll!77eb73bc()    
ntdll.dll!77ea3c48()    
kernel32.dll!770012ea()     
kernel32.dll!77001314()     
msvcr100d.dll!_getptd_noexit()  Line 500    C
ntdll.dll!77eb74df()    
ntdll.dll!77eb73bc()    
ntdll.dll!77ea3c48()    
ntdll.dll!77e5016e()    
msvcr100d.dll!_getptd_noexit()  Line 500    C
ntdll.dll!77e9b459()    
ntdll.dll!77e9b42b()    
bowExample.exe!std::_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >::clear()  Line 1415  C++
bowExample.exe!std::_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >::erase(std::_Tree_const_iterator<std::_Tree_val<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> > > _First, std::_Tree_const_iterator<std::_Tree_val<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> > > _Last)  Line 1383 C++
bowExample.exe!std::_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >::_Tidy()  Line 1866 + 0x5d bytes C++
bowExample.exe!std::_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >::~_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >()  Line 792 C++
bowExample.exe!std::set<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >::~set<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >()  + 0x2b bytes   C++
bowExample.exe!set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >::~set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >()  + 0x63 bytes  C++
bowExample.exe!set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >::`scalar deleting destructor'()  + 0x2b bytes   C++
bowExample.exe!boost::checked_delete<set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> > >(set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> > * x)  Line 34 + 0x2b bytes C++
bowExample.exe!boost::scoped_ptr<set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> > >::~scoped_ptr<set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> > >()  Line 80 + 0xb bytes  C++
bowExample.exe!bowTest(CBoWIMUParams & BOWIMUPARAMS)  Line 192 + 0xf bytes  C++
bowExample.exe!main(int argc, char * * argv)  Line 225 + 0xc bytes  C++
bowExample.exe!__tmainCRTStartup()  Line 555 + 0x19 bytes   C
bowExample.exe!mainCRTStartup()  Line 371   C
kernel32.dll!7700339a()     
ntdll.dll!77e79ef2()    
ntdll.dll!77e79ec5() 
```

* * *

这是加载符号后的调用堆栈

```
ntdll.dll!_ZwRaiseException@12()  + 0x12 bytes  
ntdll.dll!_ZwRaiseException@12()  + 0x12 bytes  
msvcr100d.dll!__getptd_noexit()  + 0xae bytes   

bowExample.exe!std::_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >::clear()  Line 1415  C++
bowExample.exe!std::_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >::erase(std::_Tree_const_iterator<std::_Tree_val<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> > > _First, std::_Tree_const_iterator<std::_Tree_val<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> > > _Last)  Line 1383 C++
bowExample.exe!std::_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >::_Tidy()  Line 1866 + 0x5d bytes C++
bowExample.exe!std::_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >::~_Tree<std::_Tset_traits<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128>,0> >()  Line 792 C++
bowExample.exe!std::set<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >::~set<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >()  + 0x2b bytes   C++
bowExample.exe!set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >::~set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >()  + 0x63 bytes  C++
bowExample.exe!set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> >::`scalar deleting destructor'()  + 0x2b bytes   C++
bowExample.exe!boost::checked_delete<set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> > >(set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> > * x)  Line 34 + 0x2b bytes C++
bowExample.exe!boost::scoped_ptr<set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> > >::~scoped_ptr<set2<CBoWMatch<int>,CBoWMatch<int>::MatchSort,CIndividualPool_NoFree_Allocator<CBoWMatch<int>,128> > >()  Line 80 + 0xb bytes  C++
bowExample.exe!bowTest(CBoWIMUParams & BOWIMUPARAMS)  Line 193 + 0xf bytes  C++
bowExample.exe!main(int argc, char * * argv)  Line 216 + 0xc bytes  C++
bowExample.exe!__tmainCRTStartup()  Line 555 + 0x19 bytes   C
bowExample.exe!mainCRTStartup()  Line 371   C
kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T08:58:03.620

右键单击包含 ntdll.dll 的堆栈行（在堆栈跟踪中）并从 Microsoft 服务器加载调试符号（从...加载符号），然后堆栈跟踪可能会发生一些变化。对每个带有未定义符号的 dll 重复该操作。

在您下载调试符号之前，您可能正在查看错误的堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-01T17:03:16.317

这开始发生在我身上，没有明显的原因。查看项目属性后，我注意到工作目录以某种方式被删除（它只是空白），在将其设置回正确的目录后，一切又开始工作了。

显然我的简单修复可能对你不起作用，我很幸运。

# c# - 使用错误字符集呈现的 asp.net sql 查询文本

> ID：10992715
> 
> 赞同：1
> 
> 时间：2012-06-12T08:08:00.223
> 
> 标签：c#, asp.net, html, sql, character-encoding

我正在改造一个旧的 .net 2 网站，以获得我们新 CI 的外观和感觉。由于有剩余的钱，我被告知也要查看背后的代码。

到目前为止，我遇到了字符集的一个严重问题：在几乎所有页面上，像 ß ä ö ü 这样的德语“特殊”字符都被正确渲染。但是在一页上，每个特殊字符都像普通字符一样呈现。在这种情况下 ö --> o; ä--> 一个；ß --> ?

查询从数据库中获取的文本在调试器中正确呈现，但在浏览器中呈现后立即变得混乱。

我已将母版页和 config.web 中的字符集设置为 ISO-8859-1。

非常感谢您的帮助 - 在此先感谢。

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:39:32.790

您是否在呈现的 HTML 的 head 部分中设置了元标记？

即 <meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">

啊，对不起！我误读了有关母版页的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:09:43.063

问题根本与代码无关。设置机器的管理员没有使用我们通常使用的普通 Oracle 客户端。相反，他只是复制了即时客户端，设置了 TNS_NAMES.ORA 并完成了它。

这就是为什么，注册表中从来没有 Oracle 条目，告诉客户端使用哪个字符集。

而不是打扰它，我只是把它作为一个环境变量

```
 NLS_LANG = German.Germany.Charset. 
```

问题解决了。

# django - 在 Django 中缓存 MongoDB 连接

> ID：10992718
> 
> 赞同：7
> 
> 时间：2012-06-12T08:08:12.397
> 
> 标签：django, caching, mongodb, database-connection

我在 Apache + mod_wsgi 之上使用连接到 PostgreSQL 的标准（而不是 NonRel）版本的 Django。此设置还连接到 MongoDB（一些数据保存在外部）。现在我必须为每个 Django 请求创建一个新的 MongoDB 连接，并将其通过调用堆栈传递给所有需要访问 MongoDB 的函数。有没有办法缓存请求之间的连接？

**编辑**

冒着亵渎的风险，在这种情况下全局变量会起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:26:28.703

有几种方法可以解释 pymongo 如何与 mod_wsgi 一起工作（或失败），这里建议：[http ://api.mongodb.org/python/current/faq.html?highlight=wsgi#does-pymongo-work-with-mod -wsgi](http://api.mongodb.org/python/current/faq.html?highlight=wsgi#does-pymongo-work-with-mod-wsgi)

此外，您可以使用某种池解决方案，如下所述：[http ://www.mongodb.org/display/DOCS/Notes+on+Pooling+for+Mongo+Drivers](http://www.mongodb.org/display/DOCS/Notes+on+Pooling+for+Mongo+Drivers)

我已经知道有一个池化项目是[MongoEngine](http://mongoengine.org/)，它是一个非常简单的 ORM，它在幕后使用 pymongo。您可能想与上面的 pymongo 常见问题解决方案一起研究它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T14:01:14.363

`pymongo.connection.Connection()`您可以在某处实例化 MongoDB 连接并将其导入，而不是每次需要时都调用它。或者您可以创建一个 Singleton 来执行此操作。像这样的东西`settings.py`。

```
class ConnectionSingleton(object):
    """Represents a MongoDB connection"""
    conn=None
    def __new__(cls,*args,**kwds):
        if cls.conn is None:
            cls.conn=pymongo.connection.Connection()
        return cls.conn 
```

这不能解决你的问题吗？

# .net - 在 PropertyGrid 中设置 ReadOnly 属性将所有属性设置为只读

> ID：10992719
> 
> 赞同：2
> 
> 时间：2012-06-12T08:08:12.453
> 
> 标签：.net, vb.net, reflection, attributes, propertygrid

我正在使用`PropertyGrid`控件来编辑我的类属性，并且我正在尝试根据其他属性设置将某些属性设置为只读。

这是我班的代码：

```
Imports System.ComponentModel
Imports System.Reflection

Public Class PropertyClass

    Private _someProperty As Boolean = False

    <DefaultValue(False)>
    Public Property SomeProperty As Boolean
        Get
            Return _someProperty
        End Get
        Set(value As Boolean)
            _someProperty = value
            If value Then
                SetReadOnlyProperty("SerialPortNum", True)
                SetReadOnlyProperty("IPAddress", False)
            Else
                SetReadOnlyProperty("SerialPortNum", False)
                SetReadOnlyProperty("IPAddress", True)
            End If
        End Set
    End Property

    Public Property IPAddress As String = "0.0.0.0"

    Public Property SerialPortNum As Integer = 0

    Private Sub SetReadOnlyProperty(ByVal propertyName As String, ByVal readOnlyValue As Boolean)
        Dim descriptor As PropertyDescriptor = TypeDescriptor.GetProperties(Me.GetType)(propertyName)
        Dim attrib As ReadOnlyAttribute = CType(descriptor.Attributes(GetType(ReadOnlyAttribute)), ReadOnlyAttribute)
        Dim isReadOnly As FieldInfo = attrib.GetType.GetField("isReadOnly", (BindingFlags.NonPublic Or BindingFlags.Instance))
        isReadOnly.SetValue(attrib, readOnlyValue)
    End Sub
End Class 
```

这是我用来编辑值的代码：

```
 Dim c As New PropertyClass
    PropertyGrid1.SelectedObject = c 
```

问题是，当我设置`SomeProperty`为时`True`，什么也没有发生，当我`False`再次将其设置为时，它会将**所有**属性设置为只读。有人可以在我的代码中看到错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:32:05.193

尝试使用属性装饰所有类`ReadOnly`属性：

```
<[ReadOnly](False)> _
Public Property SomeProperty As Boolean
  Get
    Return _someProperty
  End Get
  Set(value As Boolean)
    _someProperty = value
    If value Then
      SetReadOnlyProperty("SerialPortNum", True)
      SetReadOnlyProperty("IPAddress", False)
    Else
      SetReadOnlyProperty("SerialPortNum", False)
      SetReadOnlyProperty("IPAddress", True)
    End If
  End Set
End Property

<[ReadOnly](False)> _
Public Property IPAddress As String = "0.0.0.0"

<[ReadOnly](False)> _
Public Property SerialPortNum As Integer = 0 
```

从这个代码项目中找到它：[在运行时在 PropertyGrid 中启用/禁用属性](http://www.codeproject.com/Articles/152945/Enabling-disabling-properties-at-runtime-in-the-Pr)

> 为了使所有这些正常工作，重要的是静态地将类的每个属性的 ReadOnly 属性定义为您想要的任何值。如果不是这样，那么在运行时更改属性将错误地修改类的每个属性的属性。

# android - 如何查找手机内部存储路径、个人数据、内部 SD 卡、外部 SD 卡和内存大小？

> ID：10992722
> 
> 赞同：1
> 
> 时间：2012-06-12T08:08:19.400
> 
> 标签：android

我是android的初学者。我想知道如何以编程方式在 android 中找到内部 SD 卡、外部 SD 卡、内部电话存储和个人数据的路径。我还想知道如何找到它们的内存大小（已用和可用空间）。
如果可以，请发送信息。否则发送原因。请回复您的答案和意见对我很有价值。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:25:43.760

```
 File sdCardDirectory = Environment.getExternalStorageDirectory(); 

 This is to find sdcard path

 File path = Environment.getDataDirectory();
 StatFs stat = new StatFs(path.getPath()); 
 long blockSize = stat.getBlockSize(); 
 long availableBlocks = stat.getAvailableBlocks(); 
 return Formatter.formatFileSize(this, availableBlocks * blockSize); 

 This is to find Internal Phone Storage 
```

# forms - 如何在纯css中的选择标签中给出背景图像？

> ID：10992723
> 
> 赞同：1
> 
> 时间：2012-06-12T08:08:22.960
> 
> 标签：forms, css

我想做这个

![在此处输入图像描述](../Images/bceebee323247dedc07b49230b90f447.png)

这是表单的选择下拉菜单

我的代码是

**HMTL**

```
<select>
                        <option>Country</option>
                        <option>India</option>
                        <option>USA</option>
                    </select> 
```

**CSS**

```
select{
    width:197px;
    height:45px;
    border:solid 1px #13669b;
    box-shadow:0 5px 2px 0px rgba(0,0,0,0.06) inset;
    background:rgba(256,256,256,0.7);
    color:#13669b;
    font-size:16px;
    font-family: 'LatoBold';
    padding:0 14px;
    line-height:45px;
} 
```

我想要这个只有**纯 css**。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:15:53.717

没有办法用纯 css 创建一个像这样的下拉框（还）。

您可以创建自己的 js/css 下拉插件或使用现有的众多 jQuery/css 插件之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:12:02.410

我不确定是否有简单的*跨浏览器*方式来做到这一点，但如果你结合 CSS + jQuery，你可以让它在所有正在使用的浏览器中工作：

*   [使用 CSS 和 jQuery 重塑下拉菜单](http://www.jankoatwarpspeed.com/post/2009/07/28/reinventing-drop-down-with-css-jquery.aspx)

请参阅有关如何操作的教程并修改 CSS 以获得所需的外观。

**截屏：**

![在此处输入图像描述](../Images/d9f9a71e41bd02b1a32a92a8e8dffb19.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:37:45.503

此解决方案适用于纯 CSS，但与 Chrome 相关。请参见以下示例：

```
select {
  -webkit-appearance: button;
  -webkit-border-radius: 2px;
  -webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);
  -webkit-padding-end: 20px;
  -webkit-padding-start: 2px;
  -webkit-user-select: none;
  background-image: url(../images/select-arrow.png), 
    -webkit-linear-gradient(#FAFAFA, #F4F4F4 40%, #E5E5E5);
  background-position: center right;
  background-repeat: no-repeat;
  border: 1px solid #AAA;
  color: #555;
  font-size: inherit;
  margin: 0;
  overflow: hidden;
  padding-top: 2px;
  padding-bottom: 2px;
  text-overflow: ellipsis;
  white-space: nowrap;
} 
```

没有尝试将`-webkit`前缀替换为`-moz`一个前缀以使其与 Firefox 浏览器兼容，它实际上可能也可以工作，你应该试一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T08:47:06.047

下拉菜单在不同浏览器中的实现方式不同，并且样式未得到广泛支持。这是有原因的。一方面：考虑 iPad/iPhone 上的下拉菜单。它们的工作方式与桌面应用程序下拉菜单完全不同。

如果你想要一个样式化的下拉菜单，你必须自己用列表和 javascript 构建它。或者使用众多可用的库之一（这进一步证明没有可用的纯 CSS 解决方案）。

# objective-c - MFMailComposeViewController：取消不会退出到我的应用程序？

> ID：10992725
> 
> 赞同：5
> 
> 时间：2012-06-12T08:08:34.580
> 
> 标签：objective-c, ios, email, mfmailcomposeviewcontroller

我正在尝试使用 MFMailComposeViewController 发送邮件。当我单击应用程序上的按钮时会发生这种情况。当然，当我单击邮件控制器的取消按钮时，我想返回我的应用程序视图，但它不起作用。该怎么办 ？这是我的代码：

```
MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
controller.mailComposeDelegate = self;
[controller setSubject:@"Subject"];
[controller setMessageBody:@"<html>Test</html>" isHTML:YES];
[controller setToRecipients:nil];
if(controller) [self presentModalViewController:controller animated:YES]; 
```

感谢您的建议

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-12T08:17:03.797

你实现了这个委托方法吗？在用户退出作曲家后调用它。

```
- (void)mailComposeController:(MFMailComposeViewController*)controller 
      didFinishWithResult:(MFMailComposeResult)result
                    error:(NSError*)error 
{ 
    [self dismissViewControllerAnimated:YES completion:nil];
    return;
} 
```

# android - Android 设计 - 如何删除我的图像和编辑文本之间的空间？

> ID：10992726
> 
> 赞同：0
> 
> 时间：2012-06-12T08:08:42.530
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/b5f7ceea2a3a240bbd5be850da67b1ca.png)

我在下面给出了我的布局 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:stretchColumns="1" >

    <TableRow>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:src="@drawable/no_image" />

        <TableLayout
            android:layout_width="match_parent"
            android:layout_gravity="left"
            android:stretchColumns="0" >

            <TableRow>

                <EditText
                    android:id="@+id/editText1"
                    android:layout_width="match_parent"
                    android:layout_weight="1"
                    android:background="@drawable/backwithborder"
                    android:ems="5" />
            </TableRow>

            <TableRow android:layout_height="match_parent" >

                <EditText
                    android:id="@+id/editText1"
                    android:layout_weight="1" 
                    android:layout_height="35dip"
                    android:background="@drawable/backwithborder" />

                <ImageView
                    android:layout_width="wrap_content"
                    android:layout_gravity="right"
                    android:src="@drawable/ic_menu_down" />
            </TableRow>
        </TableLayout>
    </TableRow>

    <View
        android:layout_height="2dip"
        android:background="@color/list_seperator" />

    <TableRow>

        <Button
            android:id="@+id/xBtnContacts"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Pick Contacts" />
    </TableRow>

    <View
        android:layout_height="2dip"
        android:background="@color/list_seperator" />

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:18:12.390

尝试移动重力并将宽度和高度设置为 fill_parent

```
 android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="right"
        android:src="@drawable/no_image" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:18:33.657

图像和编辑文本之间的间距是由于“选择联系人”，如表格布局中一行的宽度取决于其他......（尝试将宽度 40dp 赋予按钮以进行测试）

我会建议使用线性布局和相对布局来制作这个 UI....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:37:21.790

试试这样的东西

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:src="@drawable/ic_launcher" />

<TableLayout
    android:id="@+id/table"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/imageView1" >

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="5" />
    </TableRow>

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="35dip"
            android:layout_weight="1" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:src="@android:drawable/ic_menu_add" />
    </TableRow>
</TableLayout>

<Button
    android:id="@+id/xBtnContacts"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/table"
    android:text="Pick Contacts" />
<View
    android:layout_height="2dip"
    android:layout_width="fill_parent"
    android:layout_below="@id/xBtnContacts"
    android:background="#ff0000"/>

</RelativeLayout> 
```

# php - Symfony2：在子布局模板中使用资产

> ID：10992729
> 
> 赞同：0
> 
> 时间：2012-06-12T08:08:51.383
> 
> 标签：php, symfony, twig

我正在开发一个 Symfony2 应用程序，我正在尝试在 specifig twig 模板中导入资源（此处为 css 和 js），而不是在布局模板中。但是，当我使用 extends 属性时，我尝试过的方法似乎不起作用。然而，当没有布局继承时它**确实有效。**

这是我使用的代码：

```
{% block stylesheets %}
    {% stylesheets 'bundles/mybundlename/css/style.css'
                    filter='cssrewrite' %}
        <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
    {% endstylesheets %} 
{% endblock %}

{% block javascripts %}
    {% javascripts 'bundles/mybundlename/js/jquery-1.7.2.min.js'
                'bundles/mybundlename/js/jquery-ui-1.8.20.custom.min.js'
                        %}
        <script src='{{ asset_url }}' type='text/javascript'></script>
    {% endjavascripts %}
{% endblock %}

{% extends "MyBundle::layout.html.twig" %}

... the rest of my template ... 
```

底线，我将如何在我的继承模板中导入这些资源？或者只是在一般布局中导入它们更好（但它会为每个页面加载：/）？

编辑：我也使用了@MyBundle 路由类型，并且它们正在被引擎搜索（如果路径错误，我会收到错误消息），但是资源没有添加到 html 部分。

第二次编辑：它不起作用的原因可能是我没有`{{% blocks %}}`在我的顶级布局中声明。我在我的子布局和页面中做了并使用了 {{ parent() }} （作为“清洁度”的问题），它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:15:09.943

`{% extends ... %}`必须先来。

您可能还想使用该[`parent`](http://twig.sensiolabs.org/doc/functions/parent.html)函数附加到布局中定义的样式表和 javascript，而不是覆盖它们。

# java - 如何在迭代器中实现随机数。请帮忙

> ID：10992732
> 
> 赞同：-5
> 
> 时间：2012-06-12T08:09:03.363
> 
> 标签：java, random, iterator

嗨，任何人都可以帮助我使用下面的代码。我正在尝试在它下面的迭代器中实现一个随机数，其中数字“100”将是 1 到 100 之间的随机数。

任何帮助都会非常感谢

丹尼尔

```
Random randomGenerator = new Random();
    for (int idx = 1; idx <= 100; ++idx){
      int randomInt = randomGenerator.nextInt(100);

    }

      Iterator<Rectangle> iter = clouds.iterator();
      while(iter.hasNext()) {
         Rectangle cloud = iter.next();
        //this effects the speed of downward movement
         cloud.x -= 100 * Gdx.graphics.getDeltaTime();
         if(cloud.x + 80 < 0) iter.remove();

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:32:00.310

这很微不足道。

```
Random r = new Random();

Iterator<Rectangle> iter = clouds.iterator();

while(iter.hasNext()) {
  Rectangle cloud = iter.next();
  //this effects the speed of downward movement
  cloud.x -= (r.nextInt(100) + 1) * Gdx.graphics.getDeltaTime();

  if(cloud.x + 80 < 0) iter.remove();
} 
```

请参阅[java.util.Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)的文档。

# c# - 如何知道设备实例 id 是否唯一？

> ID：10992733
> 
> 赞同：1
> 
> 时间：2012-06-12T08:09:08.510
> 
> 标签：c#, .net, usb, device-instance-id

我正在使用 .NET Framework v3.5 开发 C# windows 应用程序。

每个 USB 设备都应该有一个唯一的实例 id，将它与计算机上相同类型的其他设备区分开来。

在设备InstanceID不唯一的情况下，PnP管理器修改InstanceID，并将其与对应的DeviceTypeID结合，创建一个在系统中唯一的设备实例ID。

我需要确定 USB[设备实例 ID](https://docs.microsoft.com/windows-hardware/drivers/install/device-instance-ids)在系统范围内是否唯一。

我可以使用[IRP_MN_QUERY_CAPABILITIES](https://docs.microsoft.com/windows-hardware/drivers/kernel/irp-mn-query-capabilities)来检索设备功能，然后检查[DEVICE_CAPABILITIES](https://docs.microsoft.com/windows-hardware/drivers/ddi/content/wdm/ns-wdm-_device_capabilities)的 UniqueID 成员 以指示实例 ID 在系统中是否唯一。

我的问题是：

1.  如何在 c# 中使用[IRP_MN_QUERY_CAPABILITIES](https://docs.microsoft.com/windows-hardware/drivers/kernel/irp-mn-query-capabilities)
2.  是否有关于如何使用此查询的 C++ 示例代码？
3.  有没有其他方法可以知道实例 ID 是否不唯一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:17:16.843

我找到了一个解决方案，我使用[了 SetupDiGetDeviceRegistryProperty](http://www.emmet-gray.com/Articles/USB_SerialNumbers.htm%20%28http://www.emmet-gray.com/Articles/USB_SerialNumbers.htm)并要求提供[DEVICE_CAPABILITIES 结构](http://msdn.microsoft.com/en-us/library/windows/hardware/ff543095%28v=vs.85%29.aspx)

```
 private static bool IsDeviceIdUnique(IntPtr usbDev, NativeMethods.SP_DEVINFO_DATA devInfoData,string deviceId)
    {
        uint bufferSize;
        uint propertyRegDataType;
        var buffer = new byte[WinConstants.MAX_PATH];
        NativeMethods.SetupDiGetDeviceRegistryProperty(usbDev, ref devInfoData, WinConstants.SPDRP_CAPABILITIES, out propertyRegDataType, buffer, WinConstants.MAX_PATH, out bufferSize);
        var capabilities = BitConverter.ToUInt32(buffer, 0);
        return (capabilities & WinConstants.CM_DEVCAP_UNIQUEID) == WinConstants.CM_DEVCAP_UNIQUEID;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:18:17.727

设备实例 ID 不是唯一的，因为世界范围内没有标准。我曾在 USB 闪存驱动器上工作过。然而，设备实例可以显示公司的名称，从而将设备与一家公司与另一家公司区分开来。我知道的唯一唯一数据是长设备序列号，从随机数生成器中检索。如果您使用的是 Windows，您可以了解 WMI 及其访问 USB 设备的能力。

# mysql - mysql查询批量增量

> ID：10992741
> 
> 赞同：0
> 
> 时间：2012-06-12T08:09:41.837
> 
> 标签：mysql

我有一个大型数据表，其中添加了一个名为`uniq_id`我正在寻找的新字段是我可以运行的查询，它将为每一行更新和增加该字段，而无需编写脚本来执行此操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:17:01.067

一些这样的想法（没有你的结构很难做得更好）

```
SET @rank = 0;
UPDATE <your table> JOIN (SELECT @rank:= @rank+ 1 AS rank, <your pk> FROM <your table> ORDER BY rank DESC)
AS order USING(<your pk>) SET <your table>.uniq_id = order.rank; 
```

或更简单

```
SET @rank=0;
UPDATE <your table> SET uniq_id= @rank:= (@rank+1) ORDER BY <anything> DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:23:10.440

该表还有哪些其他列？如果你用[`AUTO_INCREMENT`](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)MySQL 定义新列，它将用从 1 开始的顺序值填充它。但是有一个问题：列必须是键，或者至少是键的一部分（有关详细信息，请参阅[文档](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)）。如果表中还没有主键，则可以简单地执行以下操作：

```
alter table MyTable add uniq_id int auto_increment, add primary key (uniq_id); 
```

如果您无法更改表中的键并且只想一次性填充新列的值，则可以使用以下`update`语句：

```
update MyTable set uniq_id = (@count := coalesce(@count+1, 1)); 
```

（[`coalesce`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)返回它的第一个非空参数；它有效地为第一行建立列的值。）

# xslt - 使用 XSLT 连接相同类型的数据

> ID：10992744
> 
> 赞同：1
> 
> 时间：2012-06-12T08:10:05.627
> 
> 标签：xslt

我想用 XSLT 加入所有相同类型的数据。我有以下 XML：

```
<ZE1MARAM>
        <ZE1KONDM SEGMENT="1">
            <VKORG>NL01</VKORG>
            <KONDART>VKP0</KONDART>
            <BEGINDATUM>99991231</BEGINDATUM>
            <ENDDATUM>20120605</ENDDATUM>
            <KONDWERT>NL01</KONDWERT>
            <MENGE> 70.00</MENGE>
            <CURRENCY>EUR</CURRENCY>
        </ZE1KONDM>
        <ZE1KONDM SEGMENT="1">
            <VKORG>NLWS</VKORG>
            <KONDART>VKP0</KONDART>
            <BEGINDATUM>99991231</BEGINDATUM>
            <ENDDATUM>20120605</ENDDATUM>
            <KONDWERT>NLWS</KONDWERT>
            <MENGE> 70.00</MENGE>
            <CURRENCY>EUR</CURRENCY>
        </ZE1KONDM>
        <ZE1KONDM SEGMENT="1">
            <VKORG>NLWS</VKORG>
            <KONDART>VKA0</KONDART>
            <BEGINDATUM>99991231</BEGINDATUM>
            <ENDDATUM>20120605</ENDDATUM>
            <KONDWERT>NLWS</KONDWERT>
            <MENGE> 33.00</MENGE>
            <CURRENCY>EUR</CURRENCY>
        </ZE1KONDM>
    </ZE1MARAM> 
```

因此必须将结果 xml 中具有相同 VKORG 值的每个 ZE1KONDM 附加到相同的元素。所以结果会是这样的：

```
<result>
<prices value="NL01">
    <price type="VKP0">
        70.00
    </price>
</prices>
<prices value="NLWS">
    <price type="VKP0">
        70.00
    </price>
    <price type="VKA0">
        55.00
    </price>
</prices> 
```

我尝试使用键，并执行以下操作：

```
 <xsl:key name="myKey" match="ZE1KONDM" use="normalize-space(VKORG)" />

                <xsl:for-each select="ZE1KONDM">

                    <xsl:choose>

                        <xsl:when test="KONDART='VKP0'">
                            <xsl:element name="prices">

                                <xsl:element name="price">
                                    <xsl:value-of select="key('myKey', normalize-space(VKORG))/MENGE"/>
                                </xsl:element>

                            </xsl:element>
                        </xsl:when>

                    </xsl:choose>

                </xsl:for-each> 
```

但它不起作用，因为它只需要一个键..

有什么方法可以用 xslt 解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:03:27.567

可能有更好的方法，但试试这个：

[http://www.xmlplayground.com/2A3C7H](http://www.xmlplayground.com/2A3C7H)

（见输出源）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:30:41.367

**一、XSLT 1.0 解决方案：**

**这是[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)的经典应用：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kZByM" match="ZE1KONDM" use="VKORG"/>

 <xsl:template match="/*">
     <result>
       <xsl:apply-templates select=
       "*[generate-id() = generate-id(key('kZByM', VKORG)[1])]"/>
     </result>
 </xsl:template>

 <xsl:template match="ZE1KONDM">
  <prices value="{VKORG}">
   <xsl:apply-templates select="key('kZByM', VKORG)" mode="inGroup"/>
  </prices>
 </xsl:template>

 <xsl:template match="ZE1KONDM" mode="inGroup">
   <price type="{KONDART}">
     <xsl:value-of select="MENGE"/>
   </price>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<ZE1MARAM>
    <ZE1KONDM SEGMENT="1">
        <VKORG>NL01</VKORG>
        <KONDART>VKP0</KONDART>
        <BEGINDATUM>99991231</BEGINDATUM>
        <ENDDATUM>20120605</ENDDATUM>
        <KONDWERT>NL01</KONDWERT>
        <MENGE>70.00</MENGE>
        <CURRENCY>EUR</CURRENCY>
    </ZE1KONDM>
    <ZE1KONDM SEGMENT="1">
        <VKORG>NLWS</VKORG>
        <KONDART>VKP0</KONDART>
        <BEGINDATUM>99991231</BEGINDATUM>
        <ENDDATUM>20120605</ENDDATUM>
        <KONDWERT>NLWS</KONDWERT>
        <MENGE>70.00</MENGE>
        <CURRENCY>EUR</CURRENCY>
    </ZE1KONDM>
    <ZE1KONDM SEGMENT="1">
        <VKORG>NLWS</VKORG>
        <KONDART>VKA0</KONDART>
        <BEGINDATUM>99991231</BEGINDATUM>
        <ENDDATUM>20120605</ENDDATUM>
        <KONDWERT>NLWS</KONDWERT>
        <MENGE>33.00</MENGE>
        <CURRENCY>EUR</CURRENCY>
    </ZE1KONDM>
</ZE1MARAM> 
```

**产生了想要的正确结果：**

```
<result>
   <prices value="NL01">
      <price type="VKP0">70.00</price>
   </prices>
   <prices value="NLWS">
      <price type="VKP0">70.00</price>
      <price type="VKA0">33.00</price>
   </prices>
</result> 
```

**请注意**：**Muenchian 分组方法可能是最快的 XSLT 1.0 分组方法**，因为它使用键。其他方法（例如比较兄弟值）太慢（O（N ^ 2）），这对于在大数据量上使用它们是禁止的。

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <result>
       <xsl:for-each-group select="*" group-by="VKORG">
          <prices value="{VKORG}">
           <xsl:apply-templates select="current-group()"/>
          </prices>
       </xsl:for-each-group>
     </result>
 </xsl:template>

 <xsl:template match="ZE1KONDM">
   <price type="{KONDART}">
     <xsl:value-of select="MENGE"/>
   </price>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
<result>
   <prices value="NL01">
      <price type="VKP0">70.00</price>
   </prices>
   <prices value="NLWS">
      <price type="VKP0">70.00</price>
      <price type="VKA0">33.00</price>
   </prices>
</result> 
```

**说明**：

正确使用**[`xsl:for-each-group`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#element-for-each-group)**with`group-by`属性，和**[`current-group()`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#dt-current-group)**函数。

# regex - 查找任何不以点结尾的摘要

> ID：10992745
> 
> 赞同：4
> 
> 时间：2012-06-12T08:10:06.563
> 
> 标签：regex, visual-studio, summary

我在我的项目中寻找一致性。但是当我打字时，我并不总是记得它。当我评论了我的项目的一半并且我不知道我是否以 .

所以，我想找到所有不以点结尾的摘要来解决这个问题。这方面的一个例子是：

```
 /// <summary>
    /// This is my summary
    /// </summary> 
```

这意味着有起始空格，总是三个`/`，它们都包含在一个`<summary>`标签内。

我开始研究它并得到了这个：

```
^///$[^\.] 
```

基于

```
^ start of line
/// the three slashes
$ end of line
[^\.] that doesn't end with a dot. 
```

但我无法让它发挥作用。如何找到所有不以 . 结尾的摘要行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T08:14:15.187

您不需要锚定到字​​符串的开头，因为它是标记注释行开头的“///”

```
///.*[^\.]$ 
```

我们如何建立这个。

我们知道我们正在寻找的评论以'///'开头并且不以'.'结尾，这两个字符串可以匹配为'///'和'[^.]'在我们之间我们可以有任何东西，所以 '。*'

您不需要在开头使用“^”，因为注释不必从字符串/行的开头开始。

您可能还想考虑尾随空格，所以

```
///.*[^\.]\s*$ 
```

我可能错过了其他几点，所以请大声喊叫

**是什么`$`意思**

正则表达式中的“$”符号是字符串结尾的锚点。它有点匹配新行，除了（可能取决于实现）它可以简单地匹配输入的结尾。它的工作原理与匹配输入开头的 '^' 相同

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:14:23.220

您可能需要考虑行的实际开头（col 0）和`///`. 也许这会奏效`^\s*///.*[^.]$`。

*   `^`- 行首（即第 0 列，不是第一个可见字符）
*   `\s*`- 可选空格
*   `///`- 评论开始
*   `.*`- 任何文字
*   `[^.]`- 除了一个`.`
*   `$`- 行尾（在最后一个字符之后）

**编辑**
Visual Studio 搜索正则表达式显然不同于常规正则表达式：http: [//msdn.microsoft.com/en-us/library/2k3te2cs.aspx](http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx)

似乎您需要 a`:Zs`而不是 a`\s`来匹配空格（或完全跳过它并使用 just `///.*[^.]$`，如建议的那样）。

# ruby-on-rails - ebxm 红宝石客户端

> ID：10992749
> 
> 赞同：4
> 
> 时间：2012-06-12T08:10:32.653
> 
> 标签：ruby-on-rails, ruby, workflow, webdav, ebxml

ruby 是否有 ebxml 实现？我见过[hefeweizen](http://rubyforge.org/projects/hefeweizen/)，但我认为这个项目几年前就死了。我有一个需要支持工作流、ebxml 和 webdav 的项目。我更喜欢 ruby​​ on rails 而不是带有 jaxr 和 jbpm 的 java。

# extjs - 检查 ExtJs 页面的任何功能（或方式）都已完全呈现

> ID：10992750
> 
> 赞同：0
> 
> 时间：2012-06-12T08:10:38.603
> 
> 标签：extjs, selenium, selenium-rc, extjs3

我正在使用 selenium 来自动化 ExtJs(Ver 3) Web 应用程序。我的主要挑战是，等待页面（元素）被渲染。是否有任何带有 Extjs 的内置函数或任何 javascript 函数来验证页面是否完全呈现。目前我正在使用 thread.sleep 进行管理。但它会耗费大量的执行时间。我需要一个动态等待处理程序。谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:42:14.210

使用javascript我们可以做到。这里有两种方法：

1.  一个是：document.readyState
2.  另一个是：document.body.readyState

# java - 我可以在地图中应用 A-star 算法吗？

> ID：10992751
> 
> 赞同：0
> 
> 时间：2012-06-12T08:10:45.503
> 
> 标签：java, google-maps

我正在尝试在 Java 应用程序中使用 Google 地图 API。我只想找到两个节点之间的最短路径。我可以在其中应用A-star算法吗？

# robotics-studio - Microsoft Robotics Developer Studio 入门及其教程和示例

> ID：10992760
> 
> 赞同：1
> 
> 时间：2012-06-12T08:11:29.190
> 
> 标签：robotics-studio

我是使用 Microsoft Robotics Developer studio 的新手，我想使用 Microsoft Robotics Developer studio 和它的模拟器制作一个高级跟随器。谁能告诉我如何进行此设置和示例程序来检查我的模拟器？现在我已经在我的笔记本电脑上下载并安装了机器人开发工作室，但我不知道如何使用它来查看模拟。我还需要一些例子和教程。我搜索了它，但我没有得到好的材料。谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:10:44.197

这里有一个 line follower 示例

[http://www.microsoft.com/robotics/#Learn](http://www.microsoft.com/robotics/#Learn)

还可以查看[http://www.helloapps.net](http://www.helloapps.net)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T07:38:50.537

我可以帮助您列出[Robotics Developer Studio 的模拟教程](http://www.intorobotics.com/robotics-developer-studio-simulation-tutorials/)

# php - Zend 静态助手

> ID：10992761
> 
> 赞同：2
> 
> 时间：2012-06-12T08:11:29.837
> 
> 标签：php, zend-framework

在我的 Bootstrap.php 文件中，我有以下代码

```
$viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('viewRenderer');
    if (null === $viewRenderer->view) 
    {
        $viewRenderer->initView();
    }

    $view = $viewRenderer->view;

    $view->assign('CSS_PATH', 'path/to/css'); 
```

在 layout.phtml 我可以访问 $this->CSS_PATH 但在控制器中不能。那么如何在任何控制器中访问它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:30:21.437

在控制器中

```
echo $this->view->CSS_PATH ; 
```

# android - Android如何管理屏幕？

> ID：10992764
> 
> 赞同：0
> 
> 时间：2012-06-12T08:11:37.553
> 
> 标签：android, screen

我只是好奇看看[这里](http://developer.android.com/guide/practices/screens_support.html)

Galaxy Note 低于正常尺寸和 XHDPI 索尼 Xperia S 低于正常尺寸和 XHDPI

但是，在真实设备中，每个设备上的布局如何看起来不同呢？我如何为每个 Android 设备提供布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:34:38.280

我认为您永远无法制作适合所有 Android 设备的布局。我发现最好的结果是：
(1) 使用`RelativeLayout`s
(2) 避免使用任何硬编码的尺寸，而是尽可能使用`wrap_content`and`fill_parent`

我构建了三种主要布局：`normal`、`small`和`large`，并且针对不同的屏幕密度和尺寸使用了多达五组图形。

这是一个挑战！

# javascript - indexOf 不是 Firefox、Opera 中的函数，但适用于 IE，javascript 中的 indexOf 替代测试字符串包含？

> ID：10992766
> 
> 赞同：8
> 
> 时间：2012-06-12T08:11:49.657
> 
> 标签：javascript, jquery, string, testing, indexof

在 Firefox 和 Opera 上的 Javascript 中使用 indexOf 调用时出错。在 IE 中运行良好。

以下是错误信息：

行动

```
function anonymous(Grid, Row, Col, Event) { 
    return Grid.ActionShowPopupMenu(); 
} 
```

对于事件 OnRightClick 失败并出现异常：row.id.indexOf 不是函数

我正在测试一个字符串是否包含另一个 Javascript 字符串并使用字符串的 indexOf 函数。然而，这些调用是在 JQuery 函数中进行的。也许这就是问题的原因？是否有替代在 Javascript 中使用 indexOf 来测试字符串是否包含另一个字符串的方法？有解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T08:21:51.787

String.indexOf 在所有浏览器中都可以。我假设你的*行对象的**id*属性不是字符串（也不是数组，顺便说一句，因为 indexOf 也在数组上定义（IE除外））

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T15:31:58.100

indexOf 不适用于 IE9 之前的 IE。如果您希望您的代码在 ie < 9 中工作，您应该在一个可以拖放到每个页面中的通用 js 文件中定义不兼容浏览器的方法。有关更多详细信息，请参阅[此线程](https://stackoverflow.com/questions/1744310/how-to-fix-array-indexof-in-javascript-for-ie-browsers)。代码取自[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

```
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {
        "use strict";
        if (this == null) {
            throw new TypeError();
        }
        var t = Object(this);
        var len = t.length >>> 0;
        if (len === 0) {
            return -1;
        }
        var n = 0;
        if (arguments.length > 1) {
            n = Number(arguments[1]);
            if (n != n) { // shortcut for verifying if it's NaN
                n = 0;
            } else if (n != 0 && n != Infinity && n != -Infinity) {
                n = (n > 0 || -1) * Math.floor(Math.abs(n));
            }
        }
        if (n >= len) {
            return -1;
        }
        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);
        for (; k < len; k++) {
            if (k in t && t[k] === searchElement) {
                return k;
            }
        }
        return -1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:01:21.727

indexOf() 适用于所有浏览器。它是为字符串和数组设计的，请参见：http: [//jsfiddle.net/SquTp/](http://jsfiddle.net/SquTp/)

您的 dom 选择可能有问题，或者您可能以错误的方式使用它。*

# c# - 如何通过c#在outlook中创建一组联系人文件夹

> ID：10992768
> 
> 赞同：3
> 
> 时间：2012-06-12T08:11:56.913
> 
> 标签：c#, outlook, add-in, addressbook, contact

我一直在寻找，如何在通讯簿的 Outlook 视图中创建**联系人组。**在这种情况下，我指的不是向很多人发送电子邮件的联系人组（*即不是邮件列表*）。它只是 Outlook 中通讯簿的视图。一个组可以包含多个**联系人文件夹**。

有没有人有想法或一些信息来通过 c# 解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:25:20.903

您需要通过 Contacts [`NavigationModule`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.navigationmodule.aspx)( *[`ContactsModule`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.contactsmodule.aspx)*)[`Explorer.NavigationPane`](http://msdn.microsoft.com/en-us/library/ff868233.aspx)来控制**联系人组**。

```
Outlook.Folder contacts = Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
Outlook.ContactsModule module = Application.ActiveExplorer().NavigationPane.Modules.GetNavigationModule(Outlook.OlNavigationModuleType.olModuleContacts) as Outlook.ContactsModule;
Outlook.NavigationGroup group = module.NavigationGroups.Create("Custom Group"); // creates contact group
group.NavigationFolders.Add(contacts.Folders.Add("Business Contacts")); // adds folders to group 
```

# mysql - mysql join 值之间差异最小的地方？

> ID：10992769
> 
> 赞同：2
> 
> 时间：2012-06-12T08:11:57.937
> 
> 标签：mysql, join, left-join, minimum

原则上，我有 2 个表 T1 和 T2，每个表都包含一个日期字段，我们称之为日期：

```
T1: date | somekey  | data ... 
T2: date | somekey  | data ... 
```

我想要`(left)join T1 and T2`，这样结果就包含 T1 中的所有行。

现在对于来自 T1 的每一行，我需要来自 T2 的（恰好一个）行的值，其中`ABS(DATEDIFF(T1.date,T2.date))`最小并且`T1.somekey=T2.somekey`（如果 T2 中没有这样的行，则为 null）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:27:34.573

不要在`JOIN`从句中做，直接放在`WHERE`从句中。

```
SELECT
*
FROM
T1
LEFT JOIN T2 ON T1.somekey = T2.somekey
WHERE
ABS(DATEDIFF(T1.date,T2.date)) = 1 /*or whatever "minimal" means for you*/
/*or like this:*/                < $yourMinimalValue 
```

编辑：

我想我得到了你想要做的，但子查询是去这里的方式：

```
SELECT
*
FROM
T1
LEFT JOIN T2 ON T1.somekey = T2.somekey
WHERE
ABS(DATEDIFF(T1.date,T2.date)) = (SELECT MIN(DATEDIFF(TT1.date, TT2.date)) FROM  T1 AS TT1 LEFT JOIN T2 AS TT2 ON TT1.somekey = TT2.somekey) 
```

# java - 将 JasperReports 1.3.1 升级到 JasperReports 4.6

> ID：10992777
> 
> 赞同：3
> 
> 时间：2012-06-12T08:12:45.957
> 
> 标签：java, pdf, jasper-reports, report

如标题中所述，我正在升级我的*JasperReports版本。**关于JasperReports*版本升级我不太了解。我必须改变所有的东西才能让它工作。我有最新的*.jar*文件。但是当我打印我的*.PDF*报告时，它给了我这个错误。

```
error:could not open file because its damaged or not supported. 
```

在eclipse中它显示了这个异常

```
java.lang.NoSuchFieldError: PRINTSCALING at 
net.sf.jasperreports.engine.export.JRPdfExporter.exportReportToStream(JRPdfExpor‌​ter.java:532) at 
net.sf.jasperreports.engine.export.JRPdfExporter.exportReport(JRPdfExporter.java‌​:396) at 
net.sf.jasperreports.engine.JasperExportManager.exportToPdf(JasperExportManager.‌​java:212) at 
net.sf.jasperreports.engine.JasperExportManager.exportReportToPdf(JasperExportMa‌​nager.java:536) at 
com.sibisoft.northstar.util.JasperReportGenerator.getPdfByteArray(JasperReportGe‌​nerator.java:679) 
```

请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T02:57:59.903

问题不在于 JasperReports，而在于您正在使用的 iText 库的版本。您需要下载版本 2.1.7 才能使用该版本的 JasperReports。你可以从[这里](http://mvnrepository.com/artifact/com.lowagie/itext/2.1.7)得到它。

* * *

我碰巧知道了这个，因为我过去遇到过它，但作为将来的有用说明，这是我最初用来弄清楚它的过程。

由于 JasperReports 是开源的，因此可以很容易地在网上找到代码。所以我谷歌：

> 站点：grepcode.com net.sf.jasperreports.engine.export.JRPdfExporter.exportReportToStream

网上找代码。（GrepCode 基本上提供了一个很酷的站点来浏览许多开源项目的源代码。）

在 GrepCode 页面的顶部，他们有项目的版本，因此请确保它指向您正在使用的版本。

然后在错误信息中找到方法或行号。

从这里开始就像调试本地代码一样。您可以看到有问题的类是什么，以及它属于哪个包。在这种情况下，它指向 itext 库作为罪魁祸首。

希望以后能帮到你，祝你报道愉快。

# sencha-touch-2 - 如何知道嵌套列表中点击了哪个叶子项？

> ID：10992779
> 
> 赞同：0
> 
> 时间：2012-06-12T08:12:50.207
> 
> 标签：sencha-touch-2

谁知道是否有可能知道 NestedList 中的哪个叶子项被点击并在 Store 中使用这个值？可能我`leafitemtap`不仅可以在 NestedList 的侦听器中使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:55:18.973

根据这个：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.NestedList-event-leafitemtap](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.NestedList-event-leafitemtap)

侦听器函数为`leafitemtap`您提供以下参数：

`leafitemtap( Ext.dataview.NestedList this, Ext.List list, Number index, Ext.dom.Element target, Ext.data.Record record, Ext.event.Event e, Object eOpts )`

其中：

*   `this`指向您当前的嵌套列表
*   `index`是被点击项目的索引
*   `target`是被点击项目的 DOM 元素
*   `record`是被点击项目的模型对象

假设您的模型有一个`id`字段。然后：

`record.get('id')`将返回被点击项目的 id。您可以使用它稍后在您的商店中查找它。

# sql - 构建特定的 SQL 查询

> ID：10992786
> 
> 赞同：1
> 
> 时间：2012-06-12T08:13:31.727
> 
> 标签：sql

我有三张桌子

```
 Employee    
    SSN Name
    1   a
    2   b
    3   c

    Projects    
    Pno Name
    1   x
    2   y
    3   z

    Works_On    
    ESSN    Pno
    1       1
    1       2
    2       1
    3       1
    3       2
    3       3 
```

好的，问题是，我怎么知道（通过查询）哪个员工在所有项目中工作。我似乎无法将多与多进行比较。

谢谢你，很抱歉提出一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:20:28.303

一种方法是计算所有项目，计算员工的项目数量，然后选择从事相同项目数量的所有员工：

```
DECLARE @ProjectCount int
SELECT @ProjectCount = Count(*) FROM Projects

SELECT e.* 
FROM Employee e
WHERE (SELECT COUNT(1) FROM Works_On w WHERE w.ESSN = e.SSN) = @ProjectCount 
```

`ProjectCount`变量可以跳过每个员工的计数项目。

**更新：它是如何工作的：**

对于每个员工，计算表中有多少记录的`Works_On`字段`ESSN`等于当前员工的字段`SSN`，然后将该数字与项目总数进行比较。询问：

```
SELECT COUNT(1) FROM Works_On 
```

将为您提供表中的记录总数`Works_On`（在您的情况下为 6）。我们想计算每个员工有多少条记录，这就是为什么我们将该查询嵌入到我们的主查询中，条件是只从`Works_On`表中选择具有当前员工的记录`SSN`。如果您必须用某种编程语言编写它，这在逻辑上等同于`foreach`在员工集合上循环，在循环的主体中，您从`Works_On`表中选择当前员工的所有记录，然后将其与项目总数进行比较。如果当前员工的项目数等于项目总数，则计算它。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:21:25.167

我会继续努力`count`。

```
SELECT e.SSN
FROM Employee e,
     (SELECT w.ESSN, COUNT(*) AS count FROM Works_On w WHERE w.ESSN = e.SSN GROUP BY w.ESSN) wcount,
     (SELECT COUNT(*) AS count FROM Projects) p -- you can avoid this by calculating it before. 
WHERE wcount.ESSN = e.SSN
AND p.count = wcount.count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:56:52.183

试试这个：

```
SELECT Employee.Name, Projects_On
FROM (
    SELECT Works_On.ESSN, COUNT(*) AS [Projects_On] 
    FROM [Works_On] INNER JOIN [Projects] ON Projects.Pno = Works_On.PNO 
    GROUP BY [ESSN]) A 

INNER JOIN Employee ON Employee.SSN = Essn
WHERE Projects_On = (SELECT COUNT(*) FROM Projects) 
```

这不是有史以来最漂亮的查询，但它似乎有效。

# javascript - 如何使用javascript一键显示确认警报？

> ID：10992788
> 
> 赞同：3
> 
> 时间：2012-06-12T08:13:40.837
> 
> 标签：javascript

在我的应用程序中，我需要使用 OK 按钮在警报中显示消息。

在该按钮单击事件中，我想使用 javascript 执行一些功能。

那么，我怎样才能在我的应用程序中做到这一点？

请告诉我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T08:15:59.597

我不完全确定您要做什么，但您可能正在寻找该[`window.confirm`](https://developer.mozilla.org/en/DOM/window.confirm)函数，它是一个内置函数`alert`，可让您捕获用户的响应（真或假）：

```
if(confirm("Some message")) {
    //Clicked ok
} else {
    //Clicked cancel
} 
```

如果您想要更多的功能，恐怕您将不得不寻找其他地方。有无穷无尽的模态脚本和库可用，所以只需搜索一个适合您需要的。

* * *

重新阅读您的问题标题后，也许您只想要正常[`window.alert`](https://developer.mozilla.org/en/DOM/window.alert)功能？这将显示一个带有一个按钮的对话框，并且通常会阻止执行后面的代码，直到用户关闭它：

```
alert("Some message"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:24:41.797

如果您将使用 alert() ，则 javascript 的执行将在写入警报的位置停止。按下 OK 按钮后，代码将继续执行。所以，做一个警报（消息）；在该行之后，输入您想要在按下 OK 按钮后执行的代码。

如果你想要更多的控制，你可以使用 jQuery UI Dialog。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:17:13.750

忘记内置弹出窗口。即使你让它工作，你也可能会遇到一些跨浏览器的问题，你将无法入睡（相信我：我知道我在说什么，我去过那里）。:)

我已经使用 jQuery UI ([链接](http://jqueryui.com/demos/dialog/#modal-confirmation)) 有一段时间了，我真的很满意。试试看！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T08:18:47.727

这是一个简单的例子

```
if (confirm("Select a button")){
    alert("You selected OK");
}else{
    alert("You selected Cancel");
} 
```

但是，如果您只是在寻找带有一个按钮的弹出窗口，我会选择`alert()`

```
alert("Press OK to close!"); 
```

[有关更多弹出示例，请访问 w3schools](http://www.w3schools.com/js/js_popup.asp)

# winapi - XP 样式不适用于 Windows XP 中的 ListView 或 ComboBox

> ID：10992791
> 
> 赞同：0
> 
> 时间：2012-06-12T08:13:46.990
> 
> 标签：winapi, windows-7, windows-xp

我正在为 XP 样式使用 Manifest，所以我的所有控件都使用新外观。但是，如果我在 Windows XP 中运行我的程序，那么我的 ListView 控件将显示旧样式的平面标题。HDS_NOSIZING 样式也不适用于标题。这似乎暗示 XP 正在使用旧的 Common Controls 5.0 版本的列表视图，而不是 6.0。

我对这整件事感到非常困惑。我读到 Common Controls 6.00 随 XP 一起提供，那么为什么我不能在 XP 中使用最新的 ListView？

我在另一页上读到 XP-Styles 仅适用于 XP 的 Common Controls 5.0 ListViews 但不适用于 6.0。因此，如果它确实使用 5.0，那么它不应该将新的 XP-Styles 应用于列表视图吗？

是否真的可以使用某些控件的 Common Controls 6.0 版本和其他控件的 5.0 版本？

还有另一件事。在 XP 中，我的 ComboBox 下拉列表看起来像常规的 Combo 框，而不是像 Win7 中那样的按钮。这是正常的吗？

感谢您的帮助，因为我发现整个 Common Controls 6.0 + XP Styles 概念非常混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:05:11.173

您希望在 Windows XP 上重新看到 Windows 7 样式。那是行不通的。XP*将*显示扁平标题，HDS_NOSIZING 仅在 Vista 及更高版本中受支持。同样，带有 CBS_DROPDOWNLIST 的组合框仅在 Vista 及以上版本中显示为按钮。

很可能，您的程序完全按照应有的方式运行，并且显示了正确的 XP 样式。您可以使用调试器仔细检查。Debug + Windows + Modules 并查看加载的 comctl32.dll 的版本号

# xml - 使用 xslt 动态解析 xml

> ID：10992796
> 
> 赞同：-1
> 
> 时间：2012-06-12T08:14:02.690
> 
> 标签：xml, parsing, xslt

我想要一些帮助用 xslt 解析动态 (folder.subfolders) xml，我尝试了一些东西，但我还没有。这是我拥有的xml的结构：

```
<FOLDERS>
    <FOLDER>
      <FOLDERID>2edfb864-5693-4e7f-8f98-4ef6e032d8a5</FOLDERID>
      <NAME>bla</NAME>
      <FOLDERSIZE>33Kb</FOLDERSIZE>
      <LASTMODIFIED>2012-06-07 11:11:02</LASTMODIFIED>
      <SUBFOLDERS />
      <FILES>
        <FILE>
          <FILEID>1825</FILEID>
          <NAME>IMG_15052012_142711.png</NAME>
          <SIZE>33Kb</SIZE>
          <EXTENSION>png</EXTENSION>
          <LASTMODIFIED />
        </FILE>
      </FILES>
    </FOLDER>
    <FOLDER>
      <FOLDERID>c9c5e2b2-ee93-49a2-b8be-d86e41528071</FOLDERID>
      <NAME>TestFolder</NAME>
      <FOLDERSIZE>0Kb</FOLDERSIZE>
      <LASTMODIFIED>2012-06-05 00:00:00</LASTMODIFIED>
      <SUBFOLDERS>
        <FOLDER>
          <FOLDERID>3b43fe58-db85-43e6-b541-77ce250afc78</FOLDERID>
          <NAME>SubFolder</NAME>
          <FOLDERSIZE>362Kb</FOLDERSIZE>
          <LASTMODIFIED>2012-06-05 00:00:00</LASTMODIFIED>
          <SUBFOLDERS>
            <FOLDER>
              <FOLDERID>ac1d35d0-80fd-4d97-8101-4de408f24dbd</FOLDERID>
              <NAME>subsub</NAME>
              <FOLDERSIZE>0Kb</FOLDERSIZE>
              <LASTMODIFIED>2012-06-05 00:00:00</LASTMODIFIED>
              <SUBFOLDERS />
              <FILES />
            </FOLDER>
            <FOLDER>
              <FOLDERID>7cfdc199-9d0e-4f86-904d-eda3521f3e87</FOLDERID>
              <NAME>SUBSUB1</NAME>
              <FOLDERSIZE>0Kb</FOLDERSIZE>
              <LASTMODIFIED>2012-06-05 00:00:00</LASTMODIFIED>
              <SUBFOLDERS />
              <FILES />
            </FOLDER>
          </SUBFOLDERS>
          <FILES>
            <FILE>
              <FILEID>1833</FILEID>
              <NAME>Untitled.png</NAME>
              <SIZE>121Kb</SIZE>
              <EXTENSION>png</EXTENSION>
              <LASTMODIFIED />
            </FILE>
            <FILE>
              <FILEID>1834</FILEID>
              <NAME>Untitled.png</NAME>
              <SIZE>121Kb</SIZE>
              <EXTENSION>png</EXTENSION>
              <LASTMODIFIED />
            </FILE>
            <FILE>
              <FILEID>1839</FILEID>
              <NAME>Untitled.png</NAME>
              <SIZE>121Kb</SIZE>
              <EXTENSION>png</EXTENSION>
              <LASTMODIFIED />
            </FILE>
          </FILES>
        </FOLDER>
      </SUBFOLDERS>
      <FILES />
    </FOLDER>
    <FOLDER>
      <FOLDERID>1ead58e2-a412-4318-9629-d5c70d8681bc</FOLDERID>
      <NAME>TestFolder1</NAME>
      <FOLDERSIZE>241Kb</FOLDERSIZE>
      <LASTMODIFIED>2012-06-05 00:00:00</LASTMODIFIED>
      <SUBFOLDERS />
      <FILES>
        <FILE>
          <FILEID>1832</FILEID>
          <NAME>Untitled.png</NAME>
          <SIZE>121Kb</SIZE>
          <EXTENSION>png</EXTENSION>
          <LASTMODIFIED />
        </FILE>
        <FILE>
          <FILEID>1837</FILEID>
          <NAME>Untitled.png</NAME>
          <SIZE>121Kb</SIZE>
          <EXTENSION>png</EXTENSION>
          <LASTMODIFIED />
        </FILE>
      </FILES>
    </FOLDER>
  </FOLDERS>
  <FILES>
    <FILE>
      <FILEID>1836</FILEID>
      <NAME>Untitled.png</NAME>
      <SIZE>121Kb</SIZE>
      <EXTENSION>png</EXTENSION>
      <LASTMODIFIED />
    </FILE>
    <FILE>
      <FILEID>1869</FILEID>
      <NAME>WallPaper.png</NAME>
      <SIZE>7.1Mb</SIZE>
      <EXTENSION>png</EXTENSION>
      <LASTMODIFIED />
    </FILE>
  </FILES> 
```

问题是我不知道文件夹/子文件夹树的深度。我已经做了一些事情，但它仍然是静态的，它也需要是动态的，尤其是在 xslt 条件下的选择部分。

你们认为在这种情况下解析 xml 的最佳方法是什么？

这是我想要的结构：

```
Folders
     Subfolders       
          Subfolders 
               Subfolders
               Files
          Files
     Files 
Files 
```

这就是我现在所拥有的：

```
<xsl:variable name="folderRoot" select="$xml/ROOT/FOLDERS/FOLDER" />
<xsl:variable name="fileRoot" select="$xml/ROOT/FILES/FILE" />

//Loop through the root folder
<xsl:if test="count($folderRoot) &gt; 0">
  <xsl:call-template name="folder"/>
</xsl:if>

//Loop through the root files    
<xsl:if test="count($fileRoot) &gt; 0">
   <xsl:call-template name="files"/>
</xsl:if>

//files template
 <xsl:template name="files">
    <xsl:for-each select="$fileRoot">
      <tr>
        <td class="defaultIcon {EXTENSION}">
        </td>
        <td>
          <xsl:value-of select="NAME" />
        </td>
      </tr>
    </xsl:for-each>
  </xsl:template>

//Folder template
 <xsl:template name="folder">
    <xsl:for-each select="$folderRoot">
      <tr>
        <td>
          <img src="/default/components/bestandsbeheer/images/folder.png" width="16" height="16" />
        </td>
        <td>
          <xsl:value-of select="NAME"/>
        </td>
        <td> </td>
        <td>Map</td>
        <td>
          <xsl:value-of select="LASTMODIFIED" />
        </td>
      </tr>
      <!--SUBFOLDER 1 -->
      <xsl:if test="count(SUBFOLDERS/FOLDER) &gt; 0">
        <xsl:for-each select="SUBFOLDERS/FOLDER">
         <!--SUBFOLDER 2 -->
          <xsl:if test="count($folderRoot/SUBFOLDERS/FOLDER/SUBFOLDERS/FOLDER) &gt; 0">
            <xsl:for-each select="$folderRoot/SUBFOLDERS/FOLDER/SUBFOLDERS/FOLDER">
            </xsl:for-each>
          </xsl:if>
          <xsl:if test="count($folderRoot/SUBFOLDERS/FOLDER/FILES) &gt; 0">
            <xsl:for-each select="$folderRoot/SUBFOLDERS/FOLDER/FILES">
            </xsl:for-each>
          </xsl:if>
        </xsl:for-each>
      </xsl:if>

      //Files belong to a sub folder
      <xsl:if test="count(FILES) &gt; 0">
        <xsl:for-each select="FILES/FILE">

        </xsl:for-each>
      </xsl:if>

    </xsl:for-each>
  </xsl:template> 
```

如果有不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:12:33.680

目前尚不清楚您想要什么输出，但您需要学习如何使用 xsl:apply-templates，它非常适合使用递归下降来处理这种递归数据。我希望您的样式表包含执行以下操作的模板规则：

```
<xsl:template match="FOLDER">
  <xsl:apply-templates select="FILES"/>
  <xsl:apply-templates select="SUBFOLDERS"/>
</xsl:template>

<xsl:template match="FILES">
  <xsl:apply-templates select="FILE"/>
</xsl:template>

<xsl:template match="SUBFOLDERS">
  <xsl:apply-templates select="FOLDER"/>
</xsl:template> 
```

尽量避免使用 xsl:for-each 和 xsl:if。它们可以发挥有效的作用，但在您首先使用模板规则和匹配模式尝试之前不要使用它们：这就是 XSLT 方式，正是这种结构才真正发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:53:50.153

像这样的东西？这是一个骨架结构，但你明白了。

[http://www.xmlplayground.com/c848Vl](http://www.xmlplayground.com/c848Vl)

# php - php错误处理中的错误（文件上传）

> ID：10992798
> 
> 赞同：0
> 
> 时间：2012-06-12T08:14:10.510
> 
> 标签：php, mysql, parsing, if-statement, error-handling

当上传的图像大小超过 3MB 时，我想发出错误消息。这是我当前的代码。当图像超过 3MB 时，它应该会发出一条错误消息，但它什么也不做。我的代码有什么问题？

```
if ( $_FILES['file']['size'] != 0 ) 
{
 //image check start
 if ((($_FILES["file"]["type"] == "image/gif")
 || ($_FILES["file"]["type"] == "image/jpeg")
 || ($_FILES["file"]["type"] == "image/png")
 || ($_FILES["file"]["type"] == "image/pjpeg"))
 && ($_FILES["file"]["size"] < 3072000))
 //image check end
 {
      if (file_exists($upload_path."/".$_FILES["file"]["name"])) 
      {
           $file_tmp = $_FILES["file"]["name"];
      } //Link if there is already a file with identical file name
      else
      {
           $photoid = $upfile_idx.".".substr($_FILES['file']['name'],-3);
           move_uploaded_file($_FILES["file"]["tmp_name"], $upload_path."/".$photoid);
           $file_tmp = $photoid ;
      } //Upload the image file into upload folder and generate an id for the image
  }
  else
  {
      error("Maximum image size exceeded or invalid file format.");
  }
}

//insert $file_tmp into database here

----------
Error code (added later)
function error($msg)
{
  echo "<script>alert(\"$msg\");history.go(-1);</script>";
  exit;
} 
```

* * *

我发现出了什么问题。在我的 php.ini 文件中，有“upload_max_filesize = 3M”，显然这就是导致所有问题的原因。当我将其更改为“upload_max_filesize = 4M”时，一切正常。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:35:40.263

以下内容应该对您有好处。

```
<?php
if ( $_FILES['file']['size'] != 0 )
{
 //图像检查开始

 if(!in_array($_FILES["file"]["type"], array("image/gif", "image/jpeg", "image/png", "image/pjpeg")))
 {
    error("文件只能是 JPG/JPEG/PNG/PJEPG");
    返回;
 }
 if($_FILES["file"]["size"] > 3145728)
 {
    error("文件应该小于 3 MB");   
    返回;
 }
 #您的上传代码的其余部分应在此处下方。
}
?>
```

3145728 转换为以字节为单位的 3 MB，因为 $_FILES["file"]["size"] 给出了以字节为单位上传的文件的大小。

# android - 如何在 android 中有一个移动图形或图表？

> ID：10992806
> 
> 赞同：2
> 
> 时间：2012-06-12T08:14:41.923
> 
> 标签：android, memory, charts

我是 android 新手，我需要知道如何使图形或图表（例如折线图）移动，即从右到左。

基本上我会按照手机的RAM Memory Usage来绘制图表。我需要在 Windows 的任务管理器中绘制一个类似的图形。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:47:17.043

看看这堂课。

它简单实用。

原作者是 Arno den Hond，谷歌一下。

我重新设计了这个类。

```
import android.content.Context; 
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Align;
import android.view.View;

/**
 * GraphView creates a scaled line or bar graph with x and y axis labels. 
 * @author Arno den Hond
 * @redesign Reinhard & kimkmkm
 *
 */
public class GraphView extends View {

public static boolean BAR = true;
public static boolean LINE = false;

private Paint paint;
private float[] values;
private String[] horlabels;
private String[] verlabels;
private String title;
private boolean type;

/**
 *  Generate Graph
 *  Variable Array for GraphView
 *  verlabel : Background Height Values
 *  horlabel : Background Width Values
 *  values : Max Values of Foreground Active Graph
 *  
 *  basic draw rule
 *  if Array is not null
 *  Draw Background width, height & active Graph all time
 *  or Array is null
 *  Draw Background width, height
 *  active Graph fixed 0
 *    
 */
public GraphView(Context context, float[] values, String title, String[] horlabels, String[] verlabels, boolean type) {
    super(context);
    if (values == null)
        values = new float[0];
    else
        this.values = values;
    if (title == null)
        title = "";
    else
        this.title = title;
    if (horlabels == null)
        this.horlabels = new String[0];
    else
        this.horlabels = horlabels;
    if (verlabels == null)
        this.verlabels = new String[0];
    else
        this.verlabels = verlabels;
    this.type = type;
    paint = new Paint();
}
/**
 *  Graph for Background
 *  &
 *  Value for Background
 */
@Override
protected void onDraw(Canvas canvas) {
    float border = 20;
    float horstart = border * 2;
    float height = getHeight();
    float width = getWidth() - 1;
    float max = 700;
    float min = 0;
    float diff = max - min;
    float graphheight = height - (2 * border);
    float graphwidth = width - (2 * border);

    paint.setTextAlign(Align.LEFT); 
    /** vers : BackGround Height Values length*/
    int vers = verlabels.length - 1; 
    for (int i = 0; i < verlabels.length; i++) {

        paint.setColor(Color.LTGRAY);
        // Width Line of background

        float y = ((graphheight / vers) * i) + border;
        // float y : ((getHeight / Height values length) * Height values length ) + 20

        canvas.drawLine(horstart, y, width, y, paint);
        // drawLine ( 40, y, getWidth()-1, y, paint)

        paint.setColor(Color.WHITE);
        // Left Height of background

        canvas.drawText(verlabels[i], 0, y, paint);
    }

    /** hors : BackGround width Values length*/
    int hors = horlabels.length - 1;
    for (int i = 0; i < horlabels.length; i++) {
        // Height Line of background
        paint.setColor(Color.DKGRAY); 
        float x = ((graphwidth / hors) * i) + horstart;
        canvas.drawLine(x, height - border, x, border, paint);
        paint.setTextAlign(Align.CENTER);
        if (i==horlabels.length-1)
            paint.setTextAlign(Align.RIGHT);
        if (i==0)
            paint.setTextAlign(Align.LEFT);
         // Value of Width
        paint.setColor(Color.WHITE); 
        canvas.drawText(horlabels[i], x, height - 4, paint);
    }

    paint.setTextAlign(Align.CENTER);
    canvas.drawText(title, (graphwidth / 2) + horstart, border - 4, paint);

    /**
     * Yellow Line Graph
     * continue Repaint....
     * 
     */
    if (max != min) {
        paint.setColor(Color.YELLOW);
        if (type == BAR) {
            float datalength = values.length;
            float colwidth = (width - (10 * border)) / datalength;
            for (int i = 0; i < values.length; i++) {
                float val = values[i] - min;

                float rat = val / diff;
                //diff : max - min

                float h = graphheight * rat;
                canvas.drawRect((i * colwidth) + horstart, (border - h) + graphheight, ((i * colwidth) + horstart) + (colwidth - 1), height - (border - 1), paint);
            }
        } else {
            float datalength = values.length;
            float colwidth = (width - (2 * border)) / datalength;
            float halfcol = colwidth / 2;
            float lasth = 0;
            for (int i = 0; i < values.length; i++) {
                float val = values[i] - min;
                float rat = val / diff;
                float h = graphheight * rat;
                if (i > 0)
                    canvas.drawLine(((i - 1) * colwidth) + (horstart + 1) + halfcol, (border - lasth) + graphheight, (i * colwidth) + (horstart + 1) + halfcol, (border - h) + graphheight, paint);
                lasth = h;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:35:28.223

这是我的示例代码。

我还没有测试。

但我认为这段代码工作正常。

```
public class DrawGraph extends Activity{
    /**
     * Variable Array for GraphView
     * verlabel : Background Height Values
     * horlabel : Background Width Values
     * values : Max Values of Foreground Active Graph
     */
    private float[] values = new float[60];
    private String[] verlabels = new String[] { "600","500","400","300","200","100","80","60","40","20","0", };
    private String[] horlabels = new String[] { "0","10", "20", "30", "40", "50", "60"};
    private GraphView graphView;
    private LinearLayout graph;
    private boolean runnable = false;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        graph = (LinearLayout)findViewById(R.id.graph);
        graphView = new GraphView(DrawGraph.this, values, "TEST GRAPH", horlabels, verlabels, GraphView.LINE);
        graph.addView(graphView);
        runnable = true;
        startDraw.start();
    }

    @Override
    public void onDestroy(){
        super.onDestroy();
        runnable = false;
    }

    public void setGraph(int data){
        for(int i=0; i<values.length-1; i++){
            values[i] = values[i+1];
        }

        values[values.length-1] = (float)data;
        graph.removeView(graphView);
        graph.addView(graphView);
    }        

    public Handler handler = new Handler(){
        @Override
        public void handleMessage(android.os.Message msg){
            switch(msg.what){

            case 0x01:
               int testValue = (int)(Math.random() * 600)+1;
               setGraph(testValue);
               break;
            }
        }
    }

    public Thread startDraw = new Thread(){
        @Override
        public void run(){
            while(runnable){
                handler.sendEmptyMessage(0x01);
                try{
                    Thread.sleep(1000);
                } catch (Exception e){
                     e.printstacktrace();
                }
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:57:14.570

试试[AndroidPlot](http://androidplot.com/)，这是一个简单易用的库！

另请参阅[chartengine](http://www.achartengine.org/content/demo.html)。

# linux - 将 grep 传递给 bash 中的变量

> ID：10992814
> 
> 赞同：18
> 
> 时间：2012-06-12T08:15:28.260
> 
> 标签：linux, bash, grep

我有一个名为 email.txt 的文件，如下所示：

```
Subject:My test
From:my email <myemail@gmail.com>

this is third test 
```

我想使用 bash 脚本只取出这个文件中的电子邮件地址。所以我把这个脚本放在名为 myscript 的 bash 脚本中：

```
#!/bin/bash

file=$(myscript)

var1=$(awk 'NR==2' $file)

var2=$("$var1" | (grep -Eio '\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b'))

echo $var2 
```

但是我没有运行这个脚本。当我在 bash 中手动运行这个命令时，我可以获得电子邮件地址：

```
echo $var1 | grep -Eio '\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b' 
```

我需要将电子邮件地址存储在一个变量中，以便我可以在其他功能中使用它。有人可以告诉我如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-12T08:34:01.933

我认为这是一种过于复杂的处理方式，但如果你只是想让你的脚本工作，试试这个：

```
#!/bin/bash

file="email.txt"

var1=$(awk 'NR==2' $file)

var2=$(echo "$var1" | grep -Eio '\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b')

echo $var2 
```

我不确定`file=$(myscript)`应该做什么，但在下一行你想要一个文件名作为 的参数`awk`，所以你应该只将`email.txt`字符串值分配给`file`，而不是执行一个名为`myscript`. `$var1`不是命令（它只是文本文件中的一行），所以你必须给`echo`它提供`grep`任何有用的东西。周围的附加括号`grep`是多余的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-12T08:29:45.167

正在发生的事情是这样的：

```
var2=$("$var1" | (grep -Eio '\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b'))
       ^^^^^^^ Execute the program named (what is in variable var1). 
```

你需要做这样的事情：

```
var2=$(echo "$var1" | grep -Eio '\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b') 
```

甚至

```
var2=$(awk 'NR==2' $file | grep -Eio '\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T08:32:15.900

bash 有非常有用的标志：-xv

该行与

```
var2=$("$var1" | (grep... 
```

应该

```
var2=$(echo "$var1" | (grep... 
```

我的 grep 版本也没有 -o 标志。

而且，即使在以下代码运行时 grep 模式是“贪婪的”，它的输出也不完全是您想要的。

```
#!/bin/bash -xv
file=test.txt
var1=$(awk 'NR==2' $file)

var2=$(echo "$var1" | (grep -Ei '\b[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}\b'))

echo $var2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T09:14:44.927

使用`Bash parameter expansion`,

```
var2="${var1#*:}" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-26T15:00:45.383

有一个更粗暴的方法：

```
cat $file | grep @ | tr '<>' '\012\012' | grep @ 
```

也就是说，提取带有@ 符号的行，将尖括号转换为换行符，然后再次使用grep 查找带有@ 符号的任何内容。

根据需要细化...

# android - android 地图视图与 pin 上的按钮

> ID：10992816
> 
> 赞同：0
> 
> 时间：2012-06-12T08:15:37.137
> 
> 标签：android, button, android-mapview

在我的 iphone 应用程序中，我有一个`MapView`有别针的。当您点击一个图钉时，您会看到一个标题和一个`Button`打开该项目的详细视图的 。现在我正在做同样的应用程序`Android`，我想在`Android's MapView`.

谁能指导我如何放置一个有标题和一个的图钉`Button`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:24:40.897

请考虑使用这个开源库：[android mapview balloons](https://github.com/jgilfelt/android-mapviewballoons)。它具有您需要的所有功能。

# c# - 为什么我不能实例化 Win32_PowerMeter WMI 类？

> ID：10992819
> 
> 赞同：1
> 
> 时间：2012-06-12T08:15:49.133
> 
> 标签：c#, wmi, power-management

我见过很多实例化 WMI 子类的例子`Win32 Classes`。例如，尝试查询 Win32_Battery 类：

```
using System.Management.Instrumentation;
...
ManagementClass mgmt = new ManagementClass("Win32_Battery");
ManagementObjectCollection o = mgmt.getInstances(); 
```

但是，此查询失败，它告诉我它是一个未知类，无法实例化。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:25:51.177

Win32_PowerMeter 不在默认命名空间中。[WMI Code Creator 实用程序](http://www.microsoft.com/en-us/download/details.aspx?id=8572)生成的示例代码显示了正确的命名空间：

```
 ManagementObjectSearcher searcher = 
        new ManagementObjectSearcher("root\\CIMV2\\power", 
        "SELECT * FROM Win32_PowerMeter"); 

    foreach (ManagementObject queryObj in searcher.Get())
    {
        Console.WriteLine("-----------------------------------");
        Console.WriteLine("Win32_PowerMeter instance");
        Console.WriteLine("-----------------------------------");
        Console.WriteLine("DeviceID: {0}", queryObj["DeviceID"]);
    } 
```

# sql-server - Excel 只读和 Microsoft Query/ADO Query

> ID：10992820
> 
> 赞同：2
> 
> 时间：2012-06-12T08:15:50.210
> 
> 标签：sql-server, excel, ado, vba

我开发了一个 Excel 2007/2010 工作簿，它将数据（由 SqlServer 存储过程通过 VBA 和 ADO 返回）导入到工作簿中名为“数据”的工作表的多个 Excel 表中。然后我使用 ADO（指向工作簿本身的连接）来检索其他工作表中的数据。我喜欢这个 ADO 层，因为它可以让我清楚地将数据访问层（数据工作表）和应用程序（所有其他工作表）分开。在我的情况下，数据透视表不是一个选项，因为我需要向检索到的数据添加一些公式。这就是我为 WorkBook 设置连接字符串的方式

```
Private Function GetThisWorkbookCN() As String
   Dim fileFullPath As String
   fileFullPath = ThisWorkbook.FullName
   GetThisWorkbookCN = "DSN=Excel Files;DBQ=" & fileFullPath  
End Function 
```

我的问题是，只要工作簿不是只读的，一切都可以正常工作：在这种情况下，连接指向已保存的工作簿而不是打开的文件。您认为是否可以建立连接以从打开的文件中获取数据？目前，我强迫每个用户在本地保存工作簿的每个版本，但我想避免这种情况。

编辑：作为一种解决方法，Remou 建议将数据保存在本地文件（csv 或其他格式）中，并将 ADO 用于该文件而不是工作簿本身。这避免了维护问题，因为主文件可以以只读模式打开。

# c++ - 为什么我的 C++ 类定义失败？

> ID：10992827
> 
> 赞同：2
> 
> 时间：2012-06-12T08:16:05.997
> 
> 标签：c++, gcc, g++

主文件

```
#include <iostream>
#include "Burrito.h"

using namespace std;

int main(){
  Burrito b;
  return 0;
} 
```

墨西哥卷饼.h

```
#ifndef BURRITO_H
#define BURRITO_H

class Burrito{
    public:
      Burrito();
};

#endif 
```

墨西哥卷饼.cpp

```
#include "Burrito.h"
#include <iostream>

Burrito::Burrito(){

} 
```

编译和链接：

```
lzsb$ g++ main.cpp -o main
Undefined symbols for architecture x86_64:
  "Burrito::Burrito()", referenced from:
      _main in ccVpCr0z.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
lzsb$ 
```

平台：

```
Mac OS 10.6.8

G++ : i686-apple-darwin10 --with-gxx-include-dir=/usr/include/c++/4.2.1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T08:17:59.123

您还需要编译该`Burrito.cpp`文件。编译器从每个 .cpp 文件创建目标文件，然后链接它们。这是您的调用失败的地方，因为链接器在您的任何目标文件中都找不到引用的`Burrito`类。要修复您的编译器调用，只需添加`Burrito.cpp`

```
g++ main.cpp Burrito.cpp -o main 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T08:19:55.807

你的编译行应该是：

g++ Burrito.cpp main.cpp -o main

# php - facebook登录magento网站重定向到空白页面的可能原因是什么？

> ID：10992830
> 
> 赞同：0
> 
> 时间：2012-06-12T08:16:18.447
> 
> 标签：php, facebook, magento

我安装了一个名为 inchoo 的 facebook 登录扩展程序。它第一次在 localhost 中完美运行，即。我通过它成功登录到我的magento网站。然后，出现了两个问题：-

1.在我的网站登录facebook后，我成功登录了，但我的名字没有显示在主页上，但它显示在网站的其他页面中。

2.有时，登录后会显示一个空白页面。

我在我的实时网站中尝试过，但它也在那里产生了同样的问题。

我需要任何帮助。我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:51:29.983

如果您在安装 magento 时出现空白页，则表示后台存在 php 错误。默认情况下，在 index.php 中为 Magento 禁用错误报告，以便了解其背后的真正原因：

1.  从 index.php 启用错误日志记录`ini_set('display_errors', 1);`
2.  检查您的服务器 php 错误日志

做所有这些，你可以问一个更好的问题，也许在你问之前回答这个问题。

# php - 从表#1 中获取最后一个 ID 以确定表#2 上的新 ID

> ID：10992831
> 
> 赞同：1
> 
> 时间：2012-06-12T08:16:27.013
> 
> 标签：php, mysql, auto-increment, multiple-tables

我有一个旧的注册系统和一个新的系统。（两张表）。
旧系统包含一个旧类别，而新系统包含一些尚无法在旧系统中实现的新类别。
因此，目前将所有内容都转移到其中一个系统不是一种选择。

**我的问题：**
我需要连接这两个表，以便 ID 以“自动增量”的方式运行，并且会以某种方式相互跟随。

**这是一个场景：**
*// table#1 = 旧系统（汽车）
// table#2 = 新系统（拖拉机、卡车、船舶）*

一辆新车在*表#1*中注册并获得ID：13579，
然后其他车辆在*表#2*中注册并应获得ID：13580，
当新车再次在*表#1*中注册时，它应该获得ID : 13581.
等等...

**在我看来，它是这样的：**
在将新车添加到其中一个表之前，始终在另一个表中查找并检查哪个是最后/最高 ID，并在设置新 ID 之前执行*+1* .. .

**更新 20120614：**
这是我想出的一个解决方案：

```
$qry_tbl1 = mysql_query('SELECT MAX(id) AS tbl1_max_id FROM tbl1');
$get_tbl1 = mysql_fetch_assoc($qry_tbl1); extract($get_tbl1);

$qry_tbl2 = mysql_query('SELECT MAX(id) AS tbl2_max_id FROM tbl2');
$get_tbl2 = mysql_fetch_assoc($qry_tbl2); extract($get_tbl2);

$new_max_id = max(array($tbl1_max_id,$tbl2_max_id)) + 1; 
```

这不是一个好的解决方案，但我必须工作的唯一一个。
用户点击提交按钮后，我立即执行此操作并插入新记录。然后，进一步向下脚本，基于`$new_max_id`我用其他数据更新该记录......

这是一个可接受的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:27:30.360

我认为您可以使用这种方法。

或者您可以使用以下字段创建新表：

`id (auto increment), table_id, table_name`

并保存到其中`table_id`- 是您的表实体的 id，`table_name`- 是一些属性，它确定该 id 属于哪个表。在选择期间，您必须使用此表来确定要使用的 id。这将避免 id 计算。

# silverlight - 更新对象属性上的 ObservableCollecttion 已更改

> ID：10992832
> 
> 赞同：0
> 
> 时间：2012-06-12T08:16:30.610
> 
> 标签：silverlight, data-binding, observablecollection, inotifypropertychanged

希望有人可以帮助我解决这个问题。我正在创建一个用于编辑图像的 Silverlight 应用程序。用户有一个项目，其中包含包含元素的层。（元素是文本和图像元素）。

我有一个代表项目的类。它包含一个 ObservableCollection，每个层都有一个 ObservableCollection。元素是一个抽象类。有一个继承自 Element 的 TextElement 和 ImageElement 类。

我的问题是，当我更改集合中的元素时，UI 永远不会更新。我在我的所有属性上使用 INotifyPropertyChanged 并且我在集合上捕获 CollectionChanged 但仍然没有成功。ObservableCollection 的 CollectionChanged 事件永远不会在更新其元素之一时受到影响。

这是我最初拥有的代码：

```
void Elements_CollectionChanged(
    object sender,     
    System.Collections.Specialized.NotifyCollectionChangedEventArgs e) 
{ this.NotifyChange("Elements"); } 
```

这是绑定：

```
<!-- Workspace -->
        <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Margin="5" DataContext="{Binding Project}">
            <Canvas x:Name="Canvas" Background="LightGray" Width="{Binding Path=CanvasWidth}" Height="{Binding Path=CanvasHeight}">
                <ItemsControl ItemsSource="{Binding Path=Layers, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Canvas />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>

                        <DataTemplate>                                
                            <ItemsControl ItemsSource="{Binding Path=Elements, Mode=OneWay}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <Canvas Background="{Binding Path=BackgroundColor}"
                                                Visibility="{Binding Path=Visible, Converter={StaticResource BoolConverter}}"
                                                Opacity="{Binding Path=Opacity}"
                                                Width="{Binding ElementName=Canvas, Path=DataContext.CanvasWidth}" 
                                                Height="{Binding ElementName=Canvas, Path=DataContext.CanvasHeight}">
                                        </Canvas>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Canvas>
                                            <ContentControl Content="{Binding Converter={StaticResource ElementConverter}}"
                                                            Canvas.Top="{Binding Path=Top, Mode=TwoWay}"
                                                            Canvas.Left="{Binding Path=Left, Mode=TwoWay}"
                                                            Opacity="{Binding Path=Opacity}"
                                                            MouseLeftButtonDown="ContentControl_MouseLeftButtonDown">
                                                <interactivity:Interaction.Behaviors>
                                                    <behaviors:DragInCanvasBehavior />
                                                </interactivity:Interaction.Behaviors>
                                            </ContentControl>
                                        </Canvas>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>                                
                        </DataTemplate>

                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Canvas>
        </ScrollViewer> 
```

这是我的转换器：

```
public class LayerElementToFrameworkElementConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        Element element = value as Element;
        if (element is ImageEditor.Client.BLL.TextElement)
        {
            ImageEditor.Client.BLL.TextElement txt = element as ImageEditor.Client.BLL.TextElement;
            return CreateTextBlock(txt);
        }
        else if (element is ImageElement)
        {
            ImageElement imgEle = element as ImageElement;
            return CreateImage(imgEle);
        }
        else
            return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        FrameworkElement frameworkElement = value as FrameworkElement;
        if (frameworkElement is TextBlock)
        {
            TextBlock txtBlock = value as TextBlock;
            return CreateTextElement(txtBlock);
        }
        else if (frameworkElement is Image)
        {
            Image img = value as Image;
            return CreateImageElement(img);
        }
        else
            return null;
    }

    private TextBlock CreateTextBlock(TextElement textElement)
    {
        TextBlock text = new TextBlock();
        text.Text = textElement.Text;
        text.Cursor = Cursors.Hand;
        text.SetValue(Canvas.ZIndexProperty, textElement.Order);

        ColorHexToBrushConverter converter = new ColorHexToBrushConverter();
        SolidColorBrush brush = (SolidColorBrush)converter.Convert(textElement.Color, null, null, null);
        text.Foreground = brush;

        return text;
    }

    private TextElement CreateTextElement(TextBlock textBlock)
    {
        TextElement textElement = new TextElement();
        textElement.Text = textBlock.Text;
        textElement.Top = (double)textBlock.GetValue(Canvas.TopProperty);
        textElement.Left = (double)textBlock.GetValue(Canvas.LeftProperty);
        textElement.Order = (int)textBlock.GetValue(Canvas.ZIndexProperty);

        ColorHexToBrushConverter converter = new ColorHexToBrushConverter();
        textElement.Color = (string)converter.ConvertBack(textBlock.Foreground, null, null, null);

        return textElement;
    }

    private Image CreateImage(ImageElement imageElement)
    {
        Image img = new Image();
        img.Width = imageElement.Width;
        img.Height = imageElement.Height;
        img.Source = imageElement.Source;
        img.Opacity = imageElement.Opacity;
        img.Cursor = Cursors.Hand;

        img.SetValue(Canvas.ZIndexProperty, imageElement.Order);
        img.SetValue(Canvas.TopProperty, imageElement.Top);
        img.SetValue(Canvas.LeftProperty, imageElement.Left);

        return img;
    }

    private ImageElement CreateImageElement(Image image)
    {
        ImageElement imageElement = new ImageElement();
        imageElement.Width = image.Width;
        imageElement.Height = image.Height;
        imageElement.Source = (BitmapImage)image.Source;
        imageElement.Order = (int)image.GetValue(Canvas.ZIndexProperty);

        return imageElement;
    }
} 
```

这是包含集合的类：

```
public class Layer : BaseBLL
{
    private int numberOfElements;

    #region Properties
    public int Order
    {
        get { return this.GetValue<int>("Order"); }
        set { this.SetValue<int>("Order", value); }
    }

    public string BackgroundColor
    {
        get { return this.GetValue<string>("BackgroundColor"); }
        set { this.SetValue<string>("BackgroundColor", value); }
    }

    public double Opacity
    {
        get { return this.GetValue<double>("Opacity"); }
        set { this.SetValue<double>("Opacity", value); }
    }

    public bool Visible
    {
        get { return this.GetValue<bool>("Visible"); }
        set { this.SetValue<bool>("Visible", value); }
    }

    public ObservableCollection<Element> Elements { get; set; }

    public Element SelectedElement
    {
        get { return this.GetValue<Element>("SelectedElement"); }
        set { this.SetValue<Element>("SelectedElement", value); }
    }
    #endregion

    #region Commands
    public ICommand AddTextElementCommand { get; set; }
    public ICommand AddImageElementCommand { get; set; }
    public ICommand DeleteElementCommand { get; set; }
    public ICommand SetSelectedElementCommand { get; set; }
    #endregion

    #region Methods
    public Layer()
        :this("Untitled", 0, "#ffffff", 1, true, new ObservableCollection<Element>())
    {
    } 

    public Layer(string name, int order, string backgroundColor, double opacity, bool visible, ObservableCollection<Element> elements)
        : base(name)
    {
        this.Order = order;
        this.BackgroundColor = backgroundColor;
        this.Opacity = opacity;
        this.Visible = visible;
        this.Elements = elements;

        this.Elements.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(Elements_CollectionChanged);

        this.AddTextElementCommand = new DelegateCommand(AddTextElement, CanAddTextElement);
        this.AddImageElementCommand = new DelegateCommand(AddImageElement, CanAddImageElement);
        this.DeleteElementCommand = new DelegateCommand(DeleteElement, CanDeleteElement);
    }

    private void Elements_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        foreach (Element element in e.NewItems)
            element.PropertyChanged += new System.ComponentModel.PropertyChangedEventHandler(element_PropertyChanged);
    }

    void element_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
    {
        this.NotifyChange("Elements");
    }

    private bool CanAddTextElement(object param) { return true; }
    private void AddTextElement(object param)
    {
        TextElement text = new TextElement();
        text.Order = this.numberOfElements;
        this.Elements.Add(text);

        numberOfElements++;
        this.SelectedElement = text;
    }       

    private bool CanAddImageElement(object param) { return true; }
    private void AddImageElement(object param)
    {
        var dialog = new OpenFileDialog()
        {
            Filter = "Image Files (*.bmp;*.jpg;*.gif;*.png;)|*.bmp;*.jpg;*.gif;*.png;",
            Multiselect = false
        };

        bool? userClickedOK = dialog.ShowDialog();
        if (userClickedOK == true)
        {
            string fileName = dialog.File.Name;
            FileStream stream = dialog.File.OpenRead();

            var imageSource = new BitmapImage();
            using (FileStream fileStream = stream)
            {
                imageSource.SetSource(fileStream);
                byte[] data = new byte[fileStream.Length];
                fileStream.Read(data, 0, data.Length);
                fileStream.Flush();
                fileStream.Close();
            }

            ImageElement img = new ImageElement();
            img.Name = fileName;
            img.Order = this.numberOfElements;
            img.Source = imageSource;
            img.Height = imageSource.PixelHeight;
            img.Width = imageSource.PixelWidth;
            this.Elements.Add(img);

            this.numberOfElements++;
            this.SelectedElement = img;
        }
    }

    private bool CanDeleteElement(object param)
    {
        if (this.SelectedElement != null)
            return true;
        else
            return false;
    }

    private void DeleteElement(object param)
    {
        throw new NotImplementedException();
    }      
    #endregion
} 
```

这是元素之一的代码：

```
public class TextElement : Element
{
    public string Text
    {
        get { return this.GetValue<string>("Text"); }
        set { this.SetValue<string>("Text", value); }
    }

    public int FontSize
    {
        get { return this.GetValue<int>("FontSize"); }
        set { this.SetValue<int>("FontSize", value); }
    }

    public bool Bold
    {
        get { return this.GetValue<bool>("Bold"); }
        set { this.SetValue<bool>("Bold", value); }
    }

    public bool Italic
    {
        get { return this.GetValue<bool>("Italic"); }
        set { this.SetValue<bool>("Italic", value); }
    }

    public string Color
    {
        get { return this.GetValue<string>("Color"); }
        set { this.SetValue<string>("Color", value); }
    }

    public FontFamily Font
    {
        get { return this.GetValue<FontFamily>("Font"); }
        set { this.SetValue<FontFamily>("Font", value); }
    }

    public TextElement()
        : this("Untitled", 1, 5, 5, 0, 0, 0, "New text", 12, false, false, "#aaaaaa", new FontFamily("Arial"))
    {
    }

    public TextElement(string name, double opacity, double top, double left, double rotateAngle, double centerX, double centerY, 
        string text, int fontSize, bool bold, bool italic, string color, FontFamily font)
        : base(name, opacity, top, left, rotateAngle, centerX, centerY)
    {
        this.Text = text;
        this.FontSize = fontSize;
        this.Bold = bold;
        this.Italic = italic;
        this.Color = color;
        this.Font = font;
    }
} 
```

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:42:25.660

您是否从 SetValue 内部触发 PropertyChanged 事件？否则，您应该为 Element 的每个属性执行此操作。

```
public string Text
    {
        get { return this.GetValue<string>("Text"); }
        set { this.SetValue<string>("Text", value); this.InvokePropertyChanged("Text"); }
    }

private void InvokePropertyChanged( string propertyName )
{
  if( this.PropertyChanged != null )
    this.PropertyChanged( this, new PropertyChangedEventArgs( propertyName ) );
} 
```

# github - 将问题从最终用户导入 github

> ID：10992833
> 
> 赞同：1
> 
> 时间：2012-06-12T08:16:31.153
> 
> 标签：github, end-user

我有一些最终用户网络项目并使用 github 作为错误跟踪器。

我的最终用户不是程序员，他们不喜欢 github。

从此类最终用户向 github 导入错误的服务器或其他可能的东西是什么？

还需要为他们从 github 导出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:36:47.237

他们可以将他们的错误输入到您将为您的网络用户设置的[bugzilla 服务器中。](http://www.bugzilla.org/)

存在一些脚本，例如“ [github问题导出](https://github.com/mcepl/github-issues-export)”，它们从 GitHub 问题导出回所述 bugzilla 服务器。

# dynamic - 如何在 ColdFusion 中动态输出变量

> ID：10992834
> 
> 赞同：1
> 
> 时间：2012-06-12T08:16:34.390
> 
> 标签：dynamic, properties, coldfusion, replace

我正在尝试使用javascript或coldfusion用传递的值替换一个值。这个想法是我们有一个在网格中输出值的模板。但是显示的值需要由查询动态确定。到目前为止，我还没有提出任何好的想法。

这是我认为可行（但不可行）的示例。它可以解释我想要做什么：

```
<cfset StaticValue="DynamicValue">

<cfset DynamicValue="What I Want To Show">

<script type="text/javascript">
   document.getElementById("demo").innerHTML="<cfoutput>#StaticValue#</cfoutput>";
</script>

<cfoutput>#<span id="demo"></span>#</cfoutput> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:41:51.497

要将现有字符串/变量用作变量名，您需要使用括号表示法。

在 CF 中，如果您没有显式地确定变量的范围，它会在`Variables`范围内创建，因此您可以执行以下操作：

```
<cfset StaticValue="DynamicValue">

<cfset DynamicValue="What I Want To Show">

<!--- outputs value of Variables.DynamicValue --->
<cfoutput>#Variables[StaticValue]#</cfoutupt> 
```

*（这适用于所有范围/结构/查询/等）*

**注意：**如果要在 JavaScript 字符串中输出变量，则需要将其包装起来`JsStringFormat(...)`以确保对适当的字符进行转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:42:24.057

首先，这是错误的：

```
<cfoutput>#<span id="demo"></span>#</cfoutput> 
```

您建议有一个名为的 CF 变量

```
<span id="demo"></span> 
```

你的问题不清楚，所以也不是我的答案，但我怀疑你正在尝试这样做：

```
<script type="text/javascript">
    <cfoutput>
        document.getElementById("demo").innerHTML="#StaticValue#";
    </cfoutput>
</script>

<span id="demo"></span> 
```

当此 JavaScript 在页面上运行时，字符串“DynamicValue”将被写入 span#demo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:00:07.590

您是否尝试比较它们是否相同，然后显示是否相同？

```
<cfset StaticValue="DynamicValue"> 

<cfif staticvalue is dynamicvalue>
   <cfset DynamicValue="What I Want To Show"> 

   <script type="text/javascript">
   <cfoutput>
   document.getElementById("demo").innerHTML="#DynamicValue#"; 
   </cfoutput>
   </script> 
</cfif> 
```

不知道你在这里要做什么 - 因为这会在你的内部错误变量上出错`#` `#`

```
<cfoutput>#<span id="demo"></span>#</cfoutput> 
```

应该：

```
<cfoutput>
<span id="demo">
#dynamicvalue#
</span>
</cfoutput> 
```

如果您只是想显示一个 url：

```
<cfoutput>
<span id="demo">
<a href="#dynamicvalue#">#dynamicvalue#</a>
</span>
</cfoutput> 
```

# facebook - 应用程序 - 在页面选项卡和登录页面上显示不同的页面

> ID：10992836
> 
> 赞同：0
> 
> 时间：2012-06-12T08:16:41.253
> 
> 标签：facebook

我正在尝试制作一个执行以下操作的 FB 应用程序：

i) 该应用程序出现在页面选项卡上。当用户单击 pageTab 时，她会看到一个屏幕[A1]，她可以在其中邀请她的朋友加入这个应用程序。

ii) 当朋友收到通知时，她会看到另一个屏幕 [A2]，其中介绍了该应用程序。

有什么方法可以做到这一点？

我想知道是否有一种方法可以识别请求的来源（除了浏览器上的 url）来区分对应用程序的两个请求，以便我可以根据是否呈现适当的屏幕 [A1] 或 [A2]它是从 PageTab 或直接在邀请通知中单击的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:31:28.643

请参阅[https://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)的“接受用户请求”部分 - 您的应用将获取请求 ID，然后可以读出请求的详细信息。

如果在您的场景中，用户在请求通知之后来到您的应用程序这一纯粹事实对您来说还不够，您还可以在发出请求时传递一个额外的*数据*参数，在处理请求时读出它，然后让您的应用程序做出相应的反应。

请记住，一旦用户对请求采取了行动，*您*就有责任删除请求。（也在文档中详细描述。）

# android - 片段和广播接收器

> ID：10992846
> 
> 赞同：6
> 
> 时间：2012-06-12T08:17:04.187
> 
> 标签：android, broadcastreceiver, android-fragments

我有`activity`两个`fragments`。我没有使用`<fragment/>`标签，我有两个扩展类`Fragment`，在那个片段中，我有：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.bfragment, container, false); // this will inflate the Fragment in activity.
    } 
```

现在的问题是，我在活动中接收到一些广播接收器，一些接收器从第一个片段更新 UI，一些接收器从第二个片段更新 UI。

我的主要活动中定义的广播接收器之一是：

```
private BroadcastReceiver bcReceived = new BroadcastReceiver() {

        @Override
        public void onReceive(Context arg0, Intent intent) {
            Log.d("", "BC Object Received");

            ActionBar actionbar = getActionBar();
            actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
            ActionBar.Tab bTab = actionbar.newTab().setText("B");
            Fragment fragment = new BFragment();
            bTab.setTabListener(new MyTabsListener(fragment));
            actionbar.addTab(bTab, true);

            final LinearLayout linearLayout = (LinearLayout) findViewById(R.id.bTable);  // Getting null pointer exception here. linearLayout is not getting initialized. 
```

我想使用上面的 linearLayout 并用它来膨胀其中的视图。但是得到NPE。

在这里，当一些广播接收器更新第一个片段时，它可以正常工作，但是当广播接收器从活动更新第二个片段时，我得到 NPE。

**我的问题是：**我应该如何以及在哪里更新片段？它应该在我的活动中吗？如果是，那么用哪种方法？如果没有，那么我应该在哪里更新片段？

请帮我！！！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-12T08:44:02.360

您的活动逻辑应该与您的片段逻辑分开。

您的活动应该处理如下逻辑：

> 我需要显示这个片段而不是那个片段

但是您的活动**不**应该处理这种逻辑：

> 我需要更新片段内的内容

更新其内容是片段的责任。另一方面，活动可能会告诉片段它需要更新自己。

考虑到这一点，您的片段应该公开方法，例如

```
updateContent(With Blabla) 
```

或者

```
updateContent() 
```

在您的活动中，当`BroadcastReceiver`收到一些东西时，您应该：

*   检查当前显示的是哪个片段
*   准备片段中要更新的内容
*   要求片段使用该`updateContent(With Blabla)`方法进行更新。

或者

*   检查当前显示的是哪个片段
*   要求片段使用该`updateContent()`方法更新自身。

根据你的应用业务逻辑选择最简单的方法。

# gwt - 列表 CellTable/ Pager 顶部的特定元素

> ID：10992850
> 
> 赞同：0
> 
> 时间：2012-06-12T08:17:18.163
> 
> 标签：gwt, pager, celltable

是否可以在列表顶部有一个特定元素？

背景：我有一个事件应用程序，其中不断添加新事件。事件按日期排序。如果事件通过，它仍然在页面顶部。现在过了一段时间，第一个元素都结束了，所以第一个页面不再显示任何必要的数据。要获得将要发生的事件，用户必须单击寻呼按钮。我希望这些事件显示在顶部，如果用户想查看以前的事件，他必须单击寻呼机的后退按钮。

我尝试了什么：

```
cellTable.setVisibleRange(overElements, (overElements + totalEementCount)); 
```

这混淆了整个寻呼机逻辑，用户不能再从寻呼机切换到页面。

```
SingleSelectionModel<JSEvents> selectionModel = new SingleSelectionModel<JSEvents>();
...
selectionModel.setSelected(nextEvent, true); 
```

这会选择正确的元素，并将寻呼机移动到它，但其他元素仍然可见，所以如果我有一些“结束”事件，在最坏的情况下，表中只有一个“comming”事件。此外，可用性很差，因为用户必须查看下一个事件并且没有在页面顶部...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:59:42.703

如果您使用的是`ListDataProvider`，则可以将新事件添加到列表的前面。取决于该数据提供者的所有内容都将被通知并应重绘。

如果您使用的是不同类型的数据提供者，您可能需要`CellTable.redraw`自己打电话，但我认为`AbstractDataProvider`会为您解决这个问题。

作为第一个调查步骤，您可能只是`cellTable.redraw()`在记录新事件后尝试调用，看看是否可以让您到达任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:45:44.937

找到了解决方案： celltable 有一个方法`setVisibleRange`。在涉及寻呼机的示例中使用此方法：

```
 int start = display.getVisibleRange().getStart();
            int end = start + display.getVisibleRange().getLength();
            end = end >= data.size() ? data.size() : end;
            List<JSEvents> sub = data.subList(start, end);
            updateRowData(start, sub); 
```

updateRowData 告诉单元格表，显示哪些数据以及这些数据从哪个位置开始。

现在，如果我们想在页面顶部有一个特定的元素，我们可以使用相同的功能。这就是我最终使用它的方式：

```
 int end = start + PAGESIZE;
        end = (end >= data.size()) ? data.size() : end;
        List<JSEvents> sub = data.subList(start, end);

        dataProvider.updateRowData(start, sub);
        cellTable.setVisibleRange(start, sub.size()); 
```

# xml - 如何定期处理 XML 到数据库？

> ID：10992851
> 
> 赞同：1
> 
> 时间：2012-06-12T08:17:19.320
> 
> 标签：xml, database, scheduled-tasks

我创建了一些脚本，它们会每隔一段时间生成数据。比如说，每小时都会生成一组数据。生成的数据以文本/XML 的形式表示。我没有选择要存储的格式。但目前我认为是 XML。如果每小时根据测试结果生成一个 XML 文件，我想将小时实例存储在数据库表行中。如果是 TXT 格式，那么我必须解析文档。最好是 XML。如果我将每个 horu 实例作为新节点添加到 XML，那么一天结束时，我想将完整的一天结果移动到数据库中。如果没有，我必须每小时创建一个新的 XML 文件并将数据推送到数据库中。你能建议我最好的方法吗？我很困惑是在小时实例还是在一天结束时推送数据。我不 脚本中没有任何受支持的 API 可直接连接数据库。我打算编写一个java程序并在一天结束时触发它以将完整的一天数据推送到数据库中。我希望这个话题会引起其他人的兴趣。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:21:10.220

您当然可以使用脚本来做到这一点。

在这里查看我的其他答案：[如何为 Windows 和 Unix 制作 php 自动化后台脚本？](https://stackoverflow.com/questions/10895729/how-to-make-a-php-automation-background-script-for-windows-and-unix/10895838#10895838)

阿卡。

**评论后编辑**：然后你必须有一个脚本（PHP，BATCH，BASH（Cygwin）），它将由任务调度程序启动。

Personnaly，我还使用“AutoIT”来制作非常强大的 Windows 脚本：[http ://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:24:45.713

任务的描述听起来像是收集日志数据并存储到数据库中。应该根据以后查询数据库的需要来决定每小时推送还是每天推送。如果您想针对收集的数据创建每日报告 - 将其存储为 1 行 = 1 天可能是可以的。但是，如果您想按小时获取报告 - 那么存储 1 行 = 1 小时是更好的方法，否则您必须另外解析数据以提取小时使用情况。

无论如何，以后处理存储的 XML 可能会很困难（尽管有数据库服务器支持）。如果这真的是一个日志数据数据库，那么在这种情况下，NoSQL 解决方案可能会更好。

# go - 对于实现函数式语言的虚拟机有哪些明显的优化？

> ID：10992852
> 
> 赞同：12
> 
> 时间：2012-06-12T08:17:28.553
> 
> 标签：go, functional-programming, interpreter, vm-implementation, intermediate-language

我正在研究一种中间语言和一个虚拟机来运行一种具有几个“有问题”属性的功能语言：

*   词法命名空间（闭包）
*   动态增长的调用栈
*   一个慢整数类型（bignums）

中间语言是基于堆栈的，具有当前命名空间的简单哈希表。为了让您了解它的外观，这里是[McCarthy91](http://en.wikipedia.org/wiki/McCarthy_91_function)函数：

```
# McCarthy 91: M(n) = n - 10 if n > 100 else M(M(n + 11))
.sub M
    args
    sto n

    rcl n
    float 100
    gt
    .if
        .sub
            rcl n
            float 10
            sub
        .end
        .sub
            rcl n
            float 11
            add
            list 1
            rcl M
            call-fast
            list 1
            rcl M
            tail
        .end
    call-fast
.end 
```

“大循环”很简单：

*   取指令
*   增加指令指针（或*程序计数器*）
*   评估指令

除了 之外`sto`，`rcl`还有更多函数调用指令：

*   `call`复制命名空间（深拷贝）并将指令指针压入调用堆栈
*   `call-fast`是一样的，但只会创建一个浅拷贝
*   `tail`基本上是一个'goto'

实现非常简单。为了给你一个更好的主意，这里只是“大循环”中间的一个随机片段（更新，见下文）

```
 } else if inst == 2 /* STO */ {
        local[data] = stack[len(stack) - 1]
        if code[ip + 1][0] != 3 {
            stack = stack[:len(stack) - 1]
        } else {
            ip++
        }
    } else if inst == 3 /* RCL */ {
        stack = append(stack, local[data])
    } else if inst == 12 /* .END */ {
        outer = outer[:len(outer) - 1]
        ip = calls[len(calls) - 1]
        calls = calls[:len(calls) - 1]
    } else if inst == 20 /* CALL */ {
        calls = append(calls, ip)
        cp := make(Local, len(local))
        copy(cp, local)
        outer = append(outer, &cp)
        x := stack[len(stack) - 1]
        stack = stack[:len(stack) - 1]
        ip = x.(int)
    } else if inst == 21 /* TAIL */ {
        x := stack[len(stack) - 1]
        stack = stack[:len(stack) - 1]
        ip = x.(int) 
```

问题是这样的：用 -10000 的值调用 McCarthy91 16 次，几乎没有区别，3 秒（在优化掉深层复制后，增加了近一秒）。

我的问题是：优化这种语言的解释有哪些常用技术？有没有低垂的果实？

我在列表中使用了切片（参数、各种堆栈、命名空间的映射切片......），所以我到处都在做这种事情：`call_stack[:len(call_stack) - 1]`. 现在，我真的不知道是什么代码让这个程序变慢了。任何提示将不胜感激，尽管我主要是在寻找一般的优化策略。

在旁边：

通过规避我的调用约定，我可以大大减少执行时间。该`list <n>`指令获取堆栈的 n 个参数并将它们的列表推回堆栈，该`args`指令从该列表中弹出并将每个项目推回堆栈。这首先是检查是否使用正确数量的参数调用函数，其次是能够调用具有可变参数列表（即`(defun f x:xs)`）的函数。删除它，并添加一个`sto* <x>`替换的指令`sto <x>; rcl <x>`，我可以将它缩短到 2 秒。仍然不聪明，无论如何我必须有这个`list`/生意。`args`:)

另一个问题（我知道这是一个很长的问题，抱歉）：

用 pprof 分析程序告诉我的很少（我是 Go 新手，以防不明显）:-)。这些是 pprof 报告的前 3 项：

```
 16   6.1%   6.1%       16   6.1% sweep               pkg/runtime/mgc0.c:745
   9   3.4%   9.5%        9   3.4% fmt.(*fmt).fmt_qc   pkg/fmt/format.go:323
   4   1.5%  13.0%        4   1.5% fmt.(*fmt).integer  pkg/fmt/format.go:248 
```

这些是我到目前为止所做的更改：

*   我删除了哈希表。相反，我现在只传递指向数组的指针，并且只在需要时有效地复制本地范围。
*   我用整数操作码替换了指令名称。以前，我浪费了相当多的时间来比较字符串。
*   指令消失了（在`call-fast`其他更改之后加速不再可测量）
*   我没有“int”、“float”和“str”指令，而是只有一个`eval`，我在编译时评估常量（即编译字节码）。然后`eval`只是推送对它们的引用。
*   更改 的语义后`.if`，我可以摆脱这些伪函数。现在是`.if`,`.else`和`.endif`, 隐式 goto 和块语义类似于`.sub`. （[一些示例代码](http://paste.ubuntu.com/1038153/)）

在实现了词法分析器、解析器和字节码编译器之后，速度下降了一点，但不是很严重。计算 MC(-10000) 16 次使其在 1.2 秒内评估 420 万条字节码指令。这是[它生成的代码示例](http://paste.ubuntu.com/1038503/)（来自[this](http://paste.ubuntu.com/1038504/)）。

[整个东西都在github上](https://github.com/sfstpala/nil/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T12:55:25.040

对于可以优化的事物，已有数十年的研究：

*   [实现函数式语言：教程](http://research.microsoft.com/en-us/um/people/simonpj/papers/pj-lester-book/)，Simon Peyton Jones 和 David Lester。普伦蒂斯·霍尔出版，1992 年。
*   [编程语言实践基础](http://www.cs.cmu.edu/~rwh/plbook/book.pdf), Robert Harper

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T17:33:02.583

您应该对解释器的各种概念有有效的算法表示。在哈希表上进行深度复制看起来是个糟糕的主意，但我看到您已经删除了它。

（是的，您使用数组切片的堆栈弹出操作看起来很可疑。您应该确保它们确实具有预期的算法复杂性，或者使用专用的数据结构（......堆栈）。我通常对使用 all- 持谨慎态度用于这种用途的数据结构，例如 Python 列表或 PHP 哈希表，因为它们不一定被设计为很好地处理这个特定的用例，但切片可能在所有情况下都保证 O(1) 的推送和弹出成本。）

处理环境的最佳方法，只要它们不需要被具体化，就是使用数字索引而不是变量（de Bruijn 索引（0 表示变量界限最后），或 de Bruijn 级别（0 表示变量界限首先）。这样你只能为环境保留一个动态调整大小的数组并且访问它非常快。如果你有一流的闭包，你还需要*捕获*环境，这将更加昂贵：您必须将它的一部分复制到专用结构中，或者为整个环境使用非可变结构。只有实验才能证明，但我的经验是，选择一个快速可变的环境结构并为闭包构建支付更高的成本，比拥有一个一直有更多簿记的不可变结构要好；当然，您应该进行使用分析以仅捕获闭包中的必要变量。

最后，一旦您根除与您的算法选择相关的低效率来源，热门领域将是：

*   垃圾收集（绝对是一个很难的话题；如果你不想成为 GC 专家，你应该认真考虑重用现有的运行时）；您可能正在使用宿主语言的 GC（您的解释语言中的堆分配被翻译成您的实现语言中的堆分配，具有相同的生命周期），在您显示的代码片段中并不清楚；这种策略非常适合以简单的方式获得相当有效的东西

*   数字实现；当您操作的整数实际上很小时，有各种技巧可以提高效率。最好的办法是重用为此投入大量精力的人的工作，因此我强烈建议您重用例如[GMP 库](http://gmplib.org/)。再说一次，你也可以重用你对 bignum 的宿主语言支持，如果它有的话，在你的情况下是 Go 的[math/big](http://golang.org/pkg/math/big/)包。

*   解释器循环的低级设计。在诸如您的具有“简单字节码”的语言中（每个字节码指令都被翻译成少量的本机指令，而不是具有高级语义的复杂字节码，例如 Parrot 字节码），实际的“循环和分派字节码" 代码可能是一个瓶颈。关于编写这种字节码调度循环的最佳方式，避免 if/then/else（跳转表）的级联，受益于主机处理器分支预测，简化控制流等，已经有相当多的研究。这被称为[线程代码](http://en.wikipedia.org/wiki/Threaded_code#Threading_models)，有很多（相当简单）不同的技术：直接线程，间接线程......如果你想研究一些研究，例如 Anton Ertl 的工作，[The Structure and Performance of Efficient Interpreters](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.58.26) in 2003, and later [Context threading: 一种灵活高效的虚拟机解释器调度技术](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.127.414)。这些技术的好处往往对处理器相当敏感，因此您应该自己测试各种可能性。

虽然 STG 的工作很有趣（Peyton-Jones 关于编程语言实现的书也很出色），但它在某种程度上倾向于惰性求值。关于为严格的函数式语言设计高效字节码，我的参考是 Xavier Leroy 1990 年在 ZINC 机器上的工作：[ZINC 实验：ML 语言的经济实现](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.43.6772&rank=1)，这是实现 ML 语言的开创性工作，并且是在 OCaml 语言的实现中仍在使用：既有字节码也有本机编译器，但字节码仍然使用美化的 ZINC 机器。

# php - 如果一次上传多个文件，如何验证文件上传的文件类型？

> ID：10992855
> 
> 赞同：0
> 
> 时间：2012-06-12T08:17:40.223
> 
> 标签：php, cakephp, file-upload, logic

我的要求是一次上传多个jpeg文件，问题是当有人上传任何其他扩展文件以及jpeg时，在这种情况下，文件到达服务器后会发出警报，即有15mb mp3文件，如果我们上传它， 15mb 数据传输到服务器后出现错误...

在实际数据传输之前，我可以做些什么来检查文件扩展名。我正在使用蛋糕 php。

感谢您的帮助和支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:52:09.493

如果您想在提交数据之前捕获文件格式（如果这是使用 Cake 生成的标准 HTML 表单），则只能使用客户端脚本来实现此目的。这是因为 HTML 表单和浏览器正在处理数据发布。

确实，您可以调用一些复杂的 PHP WITH 脚本来进行扩展检查，但这里可能没有必要，您需要编写脚本来响应用户按下的“提交”按钮

看看 jQuery Validation 插件，尤其是[这里](http://docs.jquery.com/Plugins/Validation/Methods/accept)的“Accept”属性，或者使用一个简单的自定义构建的 JS 扩展检查器。

```
$("#myform").validate({
   rules: {
   myfield: {
     required: true,
     accept: "jpg"
} 
```

} });

# php - 组合与继承。我应该为我的数据库交互库使用什么？

> ID：10992857
> 
> 赞同：18
> 
> 时间：2012-06-12T08:17:49.233
> 
> 标签：php, inheritance, dependency-injection

考虑一个用 PHP 编写的数据库交互模块，其中包含用于与数据库交互的类。我还没有开始编写课程，所以我无法提供代码片段。

每个数据库表将有一个类，如下所述。

**User** - 与用户表交互的类。该类包含createUser、updateUser等函数。

**Locations** - 用于与位置表交互的类。该类包含searchLocation、createLocation、updateLocation等函数。

另外，我正在考虑创建另一个类，如下所示：-

**DatabaseHelper**：一个类，该类将具有一个表示与数据库的连接的成员。此类将包含用于执行 SQL 查询的较低级别的方法，例如 executeQuery(query,parameters)、executeUpdate(query,parameters) 等。

此时，我有两个选项可以在其他类中使用 DatabaseHelper 类：-

1.  User 和 Locations 类将扩展 DatabaseHelper 类，以便它们可以在 DatabaseHelper 中使用继承的 executeQuery 和 executeUpdate 方法。在这种情况下，DatabaseHelper 将确保在任何给定时间只有一个与数据库的连接实例。
2.  DatabaseHelper 类将通过 Container 类注入到 User 和 Locations 类中，该 Container 类将创建 User 和 Location 实例。在这种情况下，容器将确保在任何给定时间应用程序中只有一个 DatabaseHelper 实例。

这是我很快想到的两种方法。我想知道采用哪种方法。可能这两种方法都不够好，在这种情况下，我想知道我可以用来实现数据库交互模块的任何其他方法。

**编辑：**

请注意，Container 类将包含一个类型为 DatabaseHelper 的静态成员。它将包含一个私有静态 getDatabaseHelper() 函数，该函数将返回现有的 DatabaseHelper 实例或创建一个新的 DatabaseHelper 实例（如果不存在），在这种情况下，它将填充 DatabaseHelper 中的连接对象。Container 还将包含名为 makeUser 和 makeLocation 的静态方法，它们将分别将 DatabaseHelper 注入到 User 和 Locations 中。

在阅读了几个答案后，我意识到最初的问题几乎已经得到了回答。但在我接受如下最终答案之前，仍有一个疑问需要澄清。

当我有多个数据库要连接而不是单个数据库时该怎么办。DatabaseHelper 类如何结合这一点以及容器如何在 User 和 Location 对象中注入适当的数据库依赖项？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T08:51:01.113

让我们从上到下回答您的问题，看看我可以在您所说的内容中添加什么。

> 每个数据库表将有一个类，如下所述。
> 
> User - 与用户表交互的类。该类包含createUser、updateUser等函数。
> 
> Locations - 用于与位置表交互的类。该类包含函数>如searchLocation、createLocation、updateLocation等。

基本上你必须在这里选择。您描述的方法称为[活动记录](http://en.wikipedia.org/wiki/Active_record_pattern)模式。对象本身知道它的存储方式和存储位置。对于与数据库交互以创建/读取/更新/删除的简单对象，这种模式非常有用。

如果数据库操作变得更广泛且不那么容易理解，那么使用数据映射器（例如[这个实现](http://www.jasonlotito.com/programming/object-oriented-programming-data-mapping/)）通常是一个不错的选择。这是处理所有数据库交互的第二个对象，而对象本身（例如用户或位置）仅处理特定于该对象的操作（例如登录或 goToLocation）。如果你想存储你的对象，你只需要创建一个新的数据映射器。您的对象甚至不知道在实现中发生了某些变化。这加强了关注点的[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)和[分离](http://en.wikipedia.org/wiki/Separation_of_concerns)。

还有其他选项，但这两种是实现数据库交互的最常用方法。

> 另外，我正在考虑创建另一个类，如下所示：-
> 
> DatabaseHelper ：一个类，它有一个静态成员，表示与数据库的连接。此类将包含用于执行 SQL 查询的较低级别的方法，例如 executeQuery(query,parameters)、executeUpdate(query,parameters) 等。

您在此处描述的内容听起来像是[单例](http://en.wikipedia.org/wiki/Singleton_pattern)。通常这不是一个好的设计选择。你真的，真的确定永远不会有第二个数据库吗？可能不会，因此您不应该将自己局限于只允许一个数据库连接的实现。除了使用静态成员创建 DatabaseHelper 之外，您还可以使用一些方法更好地创建 Database 对象，这些方法允许您连接、断开连接、执行查询等。这样，如果您需要第二个连接，您可以重用它。

> 此时，我有两个选项可以在其他类中使用 DatabaseHelper 类：-
> 
> 1.  User 和 Locations 类将扩展 DatabaseHelper 类，以便它们可以在 DatabaseHelper 中使用继承的 executeQuery 和 executeUpdate 方法。在这种情况下，DatabaseHelper 将确保在任何给定时间只有一个与数据库的连接实例。
> 2.  DatabaseHelper 类将通过 Container 类注入到 User 和 Locations 类中，该 Container 类将创建 User 和 Location 实例。在这种情况下，容器将确保在任何给定时间应用程序中只有一个 DatabaseHelper 实例。
> 
> 这是我很快想到的两种方法。我想知道采用哪种方法。可能这两种方法都不够好，在这种情况下，我想知道我可以用来实现数据库交互模块的任何其他方法。

第一种选择实际上并不可行。如果你阅读了[继承的描述](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)，你会看到继承通常用于创建现有对象的子类型。用户不是 DatabaseHelper 的子类型，也不是位置。MysqlDatabase 将是 Database 的子类型，或者 Admin 将是 User 的子类型。我建议不要使用此选项，因为它没有遵循面向对象编程的最佳实践。

第二种选择更好。如果您选择使用活动记录方法，您确实应该将数据库注入到用户和位置对象中。这当然应该由处理所有这些交互的第三个对象来完成。您可能想看看[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)和[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)。

否则，如果您选择数据映射器方法，则应将数据库注入数据映射器。这样，仍然可以使用多个数据库，同时分离所有关注点。

有关活动记录模式和数据映射器模式的更多信息，我建议您获取Martin Fowler[的企业应用程序架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)一书。它充满了这些模式以及更多！

我希望这会有所帮助（如果那里有一些非常糟糕的英语句子，我很抱歉，我不是母语人士！）。

== 编辑 ==

使用数据映射器模式的活动记录模式也有助于测试您的代码（如 Aurel 所说）。如果您将所有代码分开来只做一件事，那么检查它是否真的在做这件事会更容易。通过使用[PHPUnit](http://pear.phpunit.de/)（或其他一些测试框架）来检查您的代码是否正常工作，您可以非常确定每个代码单元中都不会出现错误。如果您混淆了这些问题（例如当您选择选项 1 时），这将变得更加困难。事情变得非常混乱，你很快就会得到一大堆[意大利面条代码](https://stackoverflow.com/questions/2573704/what-are-the-characteristics-of-spaghetti-code)。

== 编辑2 ==

活动记录模式的示例（非常懒惰，并不是真正的活动）：

```
class Controller {
    public function main() {
        $database = new Database('host', 'username', 'password');
        $database->selectDatabase('database');

        $user = new User($database);
        $user->name = 'Test';

        $user->insert();

        $otherUser = new User($database, 5);
        $otherUser->delete();
    }
}

class Database {
    protected $connection = null;

    public function __construct($host, $username, $password) {
        // Connect to database and set $this->connection
    }

    public function selectDatabase($database) {
        // Set the database on the current connection
    }

    public function execute($query) {
        // Execute the given query
    }
}

class User {
    protected $database = null;

    protected $id = 0;
    protected $name = '';

    // Add database on creation and get the user with the given id
    public function __construct($database, $id = 0) {
        $this->database = $database;

        if ($id != 0) {
            $this->load($id);
        }
    }

    // Get the user with the given ID
    public function load($id) {
        $sql = 'SELECT * FROM users WHERE id = ' . $this->database->escape($id);
        $result = $this->database->execute($sql);

        $this->id = $result['id'];
        $this->name = $result['name'];
    }

    // Insert this user into the database
    public function insert() {
        $sql = 'INSERT INTO users (name) VALUES ("' . $this->database->escape($this->name) . '")';
        $this->database->execute($sql);
    }

    // Update this user
    public function update() {
        $sql = 'UPDATE users SET name = "' . $this->database->escape($this->name) . '" WHERE id = ' . $this->database->escape($this->id);
        $this->database->execute($sql);
    }

    // Delete this user
    public function delete() {
        $sql = 'DELETE FROM users WHERE id = ' . $this->database->escape($this->id);
        $this->database->execute($sql);
    }

    // Other method of this user
    public function login() {}
    public function logout() {}
} 
```

以及数据映射器模式的示例：

```
class Controller {
    public function main() {
        $database = new Database('host', 'username', 'password');
        $database->selectDatabase('database');

        $userMapper = new UserMapper($database);

        $user = $userMapper->get(0);
        $user->name = 'Test';
        $userMapper->insert($user);

        $otherUser = UserMapper(5);
        $userMapper->delete($otherUser);
    }
}

class Database {
    protected $connection = null;

    public function __construct($host, $username, $password) {
        // Connect to database and set $this->connection
    }

    public function selectDatabase($database) {
        // Set the database on the current connection
    }

    public function execute($query) {
        // Execute the given query
    }
}

class UserMapper {
    protected $database = null;

    // Add database on creation
    public function __construct($database) {
        $this->database = $database;
    }

    // Get the user with the given ID
    public function get($id) {
        $user = new User();

        if ($id != 0) {
            $sql = 'SELECT * FROM users WHERE id = ' . $this->database->escape($id);
            $result = $this->database->execute($sql);

            $user->id = $result['id'];
            $user->name = $result['name'];
        }

        return $user;
    }

    // Insert the given user
    public function insert($user) {
        $sql = 'INSERT INTO users (name) VALUES ("' . $this->database->escape($user->name) . '")';
        $this->database->execute($sql);
    }

    // Update the given user
    public function update($user) {
        $sql = 'UPDATE users SET name = "' . $this->database->escape($user->name) . '" WHERE id = ' . $this->database->escape($user->id);
        $this->database->execute($sql);
    }

    // Delete the given user
    public function delete($user) {
        $sql = 'DELETE FROM users WHERE id = ' . $this->database->escape($user->id);
        $this->database->execute($sql);
    }
}

class User {
    public $id = 0;
    public $name = '';

    // Other method of this user
    public function login() {}
    public function logout() {}
} 
```

== 编辑 3：由机器人编辑后 ==

> 请注意，Container 类将包含一个类型为 DatabaseHelper 的静态成员。它将包含一个私有静态 getDatabaseHelper() 函数，该函数将返回现有的 DatabaseHelper 实例或创建一个新的 DatabaseHelper 实例（如果不存在），在这种情况下，它将填充 DatabaseHelper 中的连接对象。Container 还将包含名为 makeUser 和 makeLocation 的静态方法，它们将分别将 DatabaseHelper 注入到 User 和 Locations 中。
> 
> 在阅读了几个答案后，我意识到最初的问题几乎已经得到了回答。但在我接受如下最终答案之前，仍有一个疑问需要澄清。
> 
> 当我有多个数据库要连接而不是单个数据库时该怎么办。DatabaseHelper 类如何结合这一点以及容器如何在 User 和 Location 对象中注入适当的数据库依赖项？

我认为不需要任何静态属性，Container 也不需要那些 makeUser 的 makeLocation 方法。让我们假设您有一些应用程序的入口点，您可以在其中创建一个类来控制应用程序中的所有流程。你似乎称它为容器，我更喜欢称它为控制器。毕竟，它控制着你的应用程序中发生的事情。

```
$controller = new Controller(); 
```

控制器必须知道它必须加载哪个数据库，以及是单个数据库还是多个数据库。例如，一个数据库包含用户数据，另一个数据库包含位置数据。如果给出了上面的活动记录 User 和类似的 Location 类，那么控制器可能如下所示：

```
class Controller {
    protected $databases = array();

    public function __construct() {
        $this->database['first_db'] = new Database('first_host', 'first_username', 'first_password');
        $this->database['first_db']->selectDatabase('first_database');

        $this->database['second_db'] = new Database('second_host', 'second_username', 'second_password');
        $this->database['second_db']->selectDatabase('second_database');
    }

    public function showUserAndLocation() {
        $user = new User($this->databases['first_database'], 3);
        $location = $user->getLocation($this->databases['second_database']);

        echo 'User ' . $user->name . ' is at location ' . $location->name;
    }

    public function showLocation() {
        $location = new Location($this->database['second_database'], 5);

        echo 'The location ' . $location->name . ' is ' . $location->description;
    }
} 
```

将所有回声移动到 View 类或其他东西可能会很好。如果您有多个控制器类，则可能有一个不同的入口点来创建所有数据库并将它们推送到控制器中。例如，您可以将其称为前端控制器或入口控制器。

这是否回答了您开放的问题？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T08:24:46.357

我会使用依赖注入，原因如下：如果在某些时候你想为你的应用程序编写测试，它会允许你用一个存根类替换 DatabaseHelper 实例，实现相同的接口，但并不真正访问一个数据库。这将使测试模型功能变得更加容易。

顺便说一句，为了真正有用，您的其他类（用户、位置）应该依赖于 DatabaseHelperInterface 而不是直接依赖于 DatabaseHelper。（这是能够切换实现所必需的）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T18:51:55.533

至少在您的具体示例中，依赖注入与继承的问题归结为以下几点：“是”或“有”。

class foo 是 class bar 的一种吗？是酒吧吗？如果是这样，也许继承是要走的路。

foo 类是否使用类 bar 的对象？您现在处于依赖注入领域。

在您的情况下，您的数据访问对象（在我的代码方法中这些是 UserDAO 和 LocationDAO）不是数据库助手的类型。例如，您不会使用 UserDAO 来提供对另一个 DAO 类的数据库访问。相反，您在 DAO 类中使用数据库助手的功能。现在，这并不意味着从技术上讲，您无法通过扩展数据库助手类来实现您想要做的事情。但我认为这将是一个糟糕的设计，并且会随着您的设计发展而导致麻烦。

另一种思考方式是，您的所有数据都将来自数据库吗？如果在路上的某个地方，您想从 RSS 提要中提取一些位置数据，该怎么办。你的 LocationDAO 本质上定义了你的接口——可以说是你的“合同”——关于你的应用程序的其余部分如何获取位置数据。但是如果你扩展了 DatabaseHelper 来实现你的 LocationDAO，你现在会被卡住。没有办法让您的 LocationDAO 使用不同的数据源。但是，如果 DatabaseHelper 和您的 RSSHelper 都有一个通用接口，您可以将 RSSHelper 直接插入您的 DAO，并且 LocationDAO 甚至根本不需要更改。*

如果您已将 LocationDAO 设为 DatabaseHandler 的类型，则更改数据源将需要更改 LocationDAO 的类型。这意味着不仅 LocationDAO 必须更改，而且您使用 LocationDAO 的所有代码都必须更改。如果您从一开始就将数据源注入到 DAO 类中，那么无论数据源如何，LocationDAO 接口都将保持不变。

（* 只是一个理论示例。要让 DatabaseHelper 和 RSSHelper 拥有类似的界面，还有很多工作要做。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T08:56:16.460

您使用 User 和 Location 类描述的内容称为[Table Data Gateway](http://martinfowler.com/eaaCatalog/tableDataGateway.html)：

> 充当数据库表网关的对象。一个实例处理表中的所有行。

通常，您希望[组合优于继承](https://en.wikipedia.org/wiki/Composition_over_inheritance)，而[编程则倾向于接口](http://www.artima.com/lejava/articles/designprinciplesP.html)。虽然组装对象似乎需要付出更多努力，但这样做将有利于维护和从长远来看更改程序的能力（我们都知道更改是项目中唯一不变的）。

在这里使用依赖注入最明显的好处是当您想要对网关进行单元测试时。使用继承时，您不能轻易地模拟与数据库的连接。这意味着您将始终需要为这些测试建立数据库连接。使用依赖注入允许您模拟该连接并仅测试网关与数据库助手的正确交互。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-13T18:32:40.233

尽管这里的其他答案非常好，但我想从我使用[CakePHP](http://cakephp.org/)（一个[MVC](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)框架）的经验中提出一些其他想法。基本上，我只会向您展示他们的[API](http://api20.cakephp.org/)中的一两页；主要是因为 - 对我来说 - 它似乎定义明确且经过深思熟虑（可能是因为我每天都使用它）。

```
class DATABASE_CONFIG { // define various database connection details here (default/test/externalapi/etc) }

// Data access layer
class DataSource extends Object { // base for all places where data comes from (DB/CSV/SOAP/etc) }
// - Database
class DboSource extends DataSource { // base for all DB-specific datasources (find/count/query/etc) }
class Mysql extends DboSource { // MySQL DB-specific datasource }
// - Web service
class SoapSource extends DataSource { // web services, etc don't extend DboSource }
class AcmeApi extends SoapSource { // some non-standard SOAP API to wrestle with, etc }

// Business logic layer
class Model extends Object { // inject a datasource (definitions are in DATABASE_CONFIG) }
// - Your models
class User extends Model { // createUser, updateUser (can influence datasource injected above) }
class Location extends Model { // searchLocation, createLocation, updateLocation (same as above) }

// Flow control layer
class Controller extends Object { // web browser controls: render view, redirect, error404, etc }
// - Your controllers
class UsersController extends Controller { // inject the User model here, implement CRUD, this is where your URLs map to (eg. /users/view/123) }
class LocationsController extends Controller { // more CRUD, eg. $this->Location->search() }

// Presentation layer
class View extends Object { // load php template, insert data, wrap in design }
// - Non-HTML output
class XmlView extends View { // expose data as XML }
class JsonView extends View { // expose data as JSON } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-12T09:01:50.190

如果您有不同类型的服务，并且一个服务想要使用另一个服务，则首选依赖注入。

您的类 User 和 Locations 听起来更像是与数据库交互的 DAO (DataAccessObject) 层，因此对于您的给定情况，您应该使用 In Inheritance。继承可以通过扩展类或实现接口来完成

```
public interface DatabaseHelperInterface {
  public executeQuery(....);
}

public class DatabaseHelperImpl implemnets DatabaseHelperInterface {
  public executeQuery(....) {
     //some code
  }

public Class UserDaoInterface extends DatabaseHelperInterface {
   public createUser(....);
}

public Class UserDaoImpl extends DatabaseHelperImpl {
   public createUser(....) {
    executeQuery(create user query);
   } 
```

这样，您的数据库设计和代码将是分开的。

# url - 谷歌搜索结果到我的网站将我带到错误的网址

> ID：10992859
> 
> 赞同：1
> 
> 时间：2012-06-12T08:17:50.893
> 
> 标签：url, redirect

我是一名网络开发人员，我们的一个客户网站遇到了一个我无法弄清楚的问题，当您搜索“leather repair sandy Utah”时，该网站的网址是“www.theleatherdoc.com”，它排在前 3 个谷歌的结果，但是当您点击搜索结果时，它会将您重定向到一些错误或广告网址，但您可以直接访问该网站，任何建议或想法可能是什么问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:21:44.700

我在谷歌美国搜索发现你的问题，我从根上分析了整个问题，发现在搜索引擎中显示的结果是“谷歌列表结果”的形式

所以在我看来，请重新检查您的 Google 列表设置并验证您的实际链接。

我相信你的问题将从那里得到解决。

# eclipse - 创建 VerticalRuler 并添加信息

> ID：10992863
> 
> 赞同：0
> 
> 时间：2012-06-12T08:18:08.413
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我对 Eclipse 插件很陌生，我想创建一个 VerticalRuler，我发现这张 Subeclipse 的图片启发了我将信息添加到特定的代码行。 ![日食差异](../Images/f4df8421932a2a341d8eb624c2252f5d.png) 现在我不知道从哪里开始添加这样的列。我的第一次尝试是在我的编辑器插件中创建一个列，但什么也没发生。我对每一个帮助我开始的提示感到高兴。干杯

```
CompositeRuler ruler2;    
ruler2= new CompositeRuler();
ruler2.addDecorator(0, new AnnotationRulerColumn(100)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:25:36.690

我不确定您要做什么，但是如果您要创建新编辑器，则可以覆盖该`createVerticalRuler(...)`方法。标尺列还有一个扩展点。见[这里](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_workbench_texteditor_rulerColumns.html)。

# c# - 使用 MONO C# 'ShutDown' 或 'Reboot' linux 系统？

> ID：10992870
> 
> 赞同：2
> 
> 时间：2012-06-12T08:18:23.447
> 
> 标签：c#, mono

我正在开发一个使用 MONO C# 在 LINUX 上运行的应用程序。我需要在 Linux 上关闭并重新启动系统。在 Windows 中，我们可以通过 Process.Start() 方法调用“shutdown.exe”来轻松完成。我想知道如何在 Linux 上做同样的事情。提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:29:58.833

有几种方法。您可以通过以下方式调用一些可能的命令`Process.Start()`：

*   停
*   关机
*   重启
*   关闭

查看[此处](http://www.computerhope.com/issues/ch000606.htm)或其他几个网站或阅读命令手册以获取更多信息。

考虑到您的应用程序/运行它的用户可能没有重新启动/关闭机器的必要权限，并且这些命令可能不在您的`PATH`.

# php - CodeIgniter：使用 result_array() 将信息从模型传递到控制器

> ID：10992871
> 
> 赞同：1
> 
> 时间：2012-06-12T08:18:30.460
> 
> 标签：php, sql, codeigniter, model, controller

我有以下模型，`print_r`显示`Array ( [id] => 1 [cms_name] => Content Mangement System )` 当前在我的控制器中，`$data['contentMangement'] = $this->model->function`但我不确定如何将上面的数组带入其中。

```
function systemOptions($options)
    {   
        $this->db->select($options);

        $query = $this->db->get('options');

        if($query->num_rows() > 0)
        {
            $row = $query->row_array();

            $row['cms_name'];
        }
                print_r($row);

        return $query->result_array();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:55:56.060

如果你想要所有的选项，你可以这样做：

```
function systemOptions($options)
{   
    $this->db->select($options);

    return $this->db->get('options')->result_array();// will return empty array if there are no results

} 
```

或者，如果您只想要第一行（这就是您的问题的样子），您可以这样做：

```
function systemOptions($options)
{   
    $this->db->select($options);

    $result = $this->db->get('options')->result_array();

    if(!empty($result))
    {
      return $result[0];
    }else{
      return null; //or false or array(), or whatever you want
    }
} 
```

# c++ - 如何在算术编码中将双精度数转换为其二进制形式？

> ID：10992873
> 
> 赞同：2
> 
> 时间：2012-06-12T08:18:33.530
> 
> 标签：c++, math, compression

我现在正在做算术编码，我得到了最终的起始位置和距离，然后我添加它们。如何将结果转换为二进制模式？

例如，如何在 C++ 中转换`0.125 decimal`为？`0.001 binary`

```
void CArithmeticCoding::Encode()
{
    if ( 0 == m_input )
        return;
    printf("The input is [%s].\n", this->m_input);

    while (*m_input)
    {
        if ( *m_input == m_MPS )
        {
            DOMPS();
        }
        else
        {
            DOLPS();
        }
        ++m_input;
    }
    double ret = m_start + m_dis;

    return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:33:57.613

算术编码是使用整数数据类型完成的，以提高效率和可预测性。使用浮点类型没有优点，只有缺点。您可以简单地将 n 位的整数视为 n 位小数。当您从顶部取出位时，您重新规范化分数以使用这些位。

请参阅[算术编码的实际实现和算术编码](http://www.gvu.gatech.edu/~jarek/courses/7491/Arithmetic2.pdf)简介[- 理论与实践](http://www.hpl.hp.com/techreports/2004/HPL-2004-76.pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:26:17.597

将任何东西转换为二进制意味着找出每种 2 的幂的数量。在十进制数的情况下，所涉及的幂是负数。

对于`.125`，顺序如下：

```
.125 x 2 =  .250 (< 1)
.250 x 2 =  .500 (< 1)
.500 x 2 = 1.000 (>= 1)
.000     = 0     done 
```

所以，二进制表示是`0`x `2^-1`+ `0`x `2^-2`+ `1`x `2^-3`=`.001`二进制。作为练习，将此技术与将普通整数转换为二进制表示进行对比。

正如常规小数可以具有非终止模式（如 1/3 或 pi/4），二进制表示也可能发生同样的情况。在这些情况下，您必须在达到所需精度时停止计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T08:30:37.503

您应该调查[IEEE 754](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)

这是浮点格式的二进制表示标准，单精度和双精度

# firebug - 如何在下面的代码中为关闭按钮编写 xpath？

> ID：10992876
> 
> 赞同：0
> 
> 时间：2012-06-12T08:18:40.917
> 
> 标签：firebug

我为此使用了萤火虫工具：

我试过 "//table[@class='x-btn-medium x-btn-icon-medium-left']/em/button" ，但它不起作用。这是正确的方法吗？如果错了，请让我知道这是正确的吗？

此命令中的 ext-gen251 是动态的。

```
<button id="ext-gen251" class=" x-btn-text" type="button">Close</button> 
```

下面是代码：

```
<div id="ext-comp-1089" class=" x-window" style="position: absolute; z-index: 9003; visibility: visible; left: 500px; top: -39px; width: 600px; display: block;">
        <div class="x-window-tl">
        <div class="x-window-tr">
        <div class="x-window-tc">
        <div id="ext-gen192" class="x-window-header x-unselectable x-window-draggable" style="-moz-user-select: none;">
        <div id="ext-gen198" class="x-tool x-tool-close">&nbsp;</div>
        <span id="ext-gen203" class="x-window-header-text">Details</span>
        </div>
        </div>
        </div>
        </div>
        <div id="ext-gen193" class="x-window-bwrap">
        <div class="x-window-ml">
        <div id="ext-gen196" class="x-window-bl">
        <div class="x-window-br">
        <div class="x-window-bc">
        <div id="ext-gen195" class="x-window-footer x-panel-btns" style="width: 576px;">
        <div id="ext-comp-1090" class="x-panel-fbar x-small-editor x-toolbar-layout-ct" style="width: auto;">
        <table class="x-toolbar-ct" cellspacing="0">
        <tbody>
        <tr>
        <td class="x-toolbar-left" align="left">
        <td class="x-toolbar-right" align="right">
        <table class="x-toolbar-right-ct" cellspacing="0">
        <tbody>
        <tr>
        <td>
        <table cellspacing="0">
        <tbody>
        <tr class="x-toolbar-right-row">
        <td id="ext-gen250" class="x-toolbar-cell">
        <table id="ext-comp-1091" class="x-btn jxCancelBtn x-btn-noicon" cellspacing="0" style="width: 75px;">
        <tbody class="x-btn-medium x-btn-icon-medium-left">
        <tr>
        <tr>
        <td class="x-btn-ml">
        <td class="x-btn-mc">
        <em class="" unselectable="on">
        <button id="ext-gen251" class=" x-btn-text" type="button">Close</button>
        </em>
        </td>
        <td class="x-btn-mr">
        </tr>
        <tr>
        </tbody>
        </table>
        </td>
        </tr>
        </tbody>
        </table>
        </td>
        <td>
        </tr>
        </tbody>
        </table>
        </td>
        </tr>
        </tbody>
        </table>
        </div>
        <div id="ext-gen200" class="x-clear"></div>
        </div>
        </div>
        </div>
        </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:34:46.687

你很接近，但看起来`//table[@class='x-btn-medium x-btn-icon-medium-left']/em/button`你应该有`//`**tbody**`[@class='x-btn-medium x-btn-icon-medium-left']//em/button`，因为那是tbody `class = x-btn-medium x-btn-icon-medium-left`。

我还将结尾部分从 更改`/em/button`为`//em/button`，因为 html 中似乎有很多垃圾。

# xcode - 二维码可以执行objective-c-data吗？

> ID：10992880
> 
> 赞同：1
> 
> 时间：2012-06-12T08:19:02.680
> 
> 标签：xcode, qr-code

互联网上的大多数二维码生成器都让您可以选择使用二维码作为网站链接、一些文本或电话号码。但是是否有可能实现一个带有二维码扫描器的应用程序，它扫描一个二维码，然后这个二维码作为一个按钮，链接到同一个应用程序中的另一个“页面”？

更准确地说，我的意思是：例如：有人扫描二维码，这会执行一个按钮，该按钮链接到我的应用程序中的特定站点（不是网络链接）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:23:54.073

您的应用程序可以按照您希望的任何方式自由解释 QR 码中的数据。如果您想要文本：“Add Button: HELLO”来添加一个标有 的新按钮`HELLO`，您当然可以这样做——尽管不要指望它会添加新的可执行代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:25:25.243

是的，考虑到它是您的应用程序，这是可能的。例如，您可以实现一个 lua 解释器并从一个特殊的网站运行代码，与一个 url 链接，但我不完全确定它是否被苹果批准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T08:24:55.447

我认为您可以在 QRcode 中使用简单的文本，这些文本是您的应用程序执行按钮的“特定代码”。

或者，如果您希望其他“扫描仪”可以读取您的二维码，请在末尾添加一些代码：像这样：

```
http://normal.url.for/reader#your-specific-code 
```

# java - 根据按键旋转图像

> ID：10992882
> 
> 赞同：2
> 
> 时间：2012-06-12T08:19:21.290
> 
> 标签：java, swing, rotation, keylistener, key-bindings

我试图修改现有代码以根据按键旋转图像。到目前为止，我已经设法做到以下几点，但我被困住了。我第一次使用仿射变换。当它应该旋转与按下 RIGHT 键一样多的次数时，图像只旋转一次。

```
package aircraftPackage;

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.MediaTracker;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;

public class RotateImage extends JFrame implements KeyListener {
    private static final long serialVersionUID = 1L;
    private Image TestImage;
    private BufferedImage bf;
    private int cordX = 100;
    private int cordY = 100;
    private double currentAngle;

    public RotateImage(Image TestImage) {
     this.TestImage = TestImage;
     MediaTracker mt = new MediaTracker(this);
     mt.addImage(TestImage, 0);
     try {
       mt.waitForID(0);
     }
     catch (Exception e) {
       e.printStackTrace();
     }
        setTitle("Testing....");
        setSize(500, 500);
        imageLoader();
        setVisible(true);
    }
public void rotate() {
     //rotate 5 degrees at a time
     currentAngle+=5.0;
     if (currentAngle >= 360.0) {
       currentAngle = 0;
     }
     repaint();
   }

    public void imageLoader() {
        try {
            String testPath = "test.png";
            TestImage = ImageIO.read(getClass().getResourceAsStream(testPath));

        } catch (IOException ex) {
            ex.printStackTrace();
        }

        addKeyListener(this);
    }

    public void update(Graphics g){
           paint(g);
    }

    public void paint(Graphics g){

        bf = new BufferedImage( this.getWidth(),this.getHeight(), BufferedImage.TYPE_INT_RGB);

    try{
    animation(bf.getGraphics());
    g.drawImage(bf,0,0,null);
    }catch(Exception ex){

    }
}

    public void animation(Graphics g) {
        super.paint(g);
        Graphics2D g2d = (Graphics2D)g;
        AffineTransform origXform = g2d.getTransform();
        AffineTransform newXform = (AffineTransform)(origXform.clone());
        //center of rotation is center of the panel
        int xRot = this.getWidth()/2;
        int yRot = this.getHeight()/2;
        newXform.rotate(Math.toRadians(currentAngle), xRot, yRot);
        g2d.setTransform(newXform);
        //draw image centered in panel
        int x = (getWidth() - TestImage.getWidth(this))/2;
        int y = (getHeight() - TestImage.getHeight(this))/2;
        g2d.drawImage(TestImage, x, y, this);
        g2d.setTransform(origXform);
        g.drawImage(TestImage, cordX, cordY, this);
    }

    public static void main(String[] args) {

        new RotateImage(null);
    }

    public void keyPressed(KeyEvent ke) {
            final RotateImage ri = new RotateImage(TestImage);

        switch (ke.getKeyCode()) {
        case KeyEvent.VK_RIGHT: {
            cordX += 5;

           ri.rotate();
        }
            break;
        case KeyEvent.VK_LEFT: {
            cordX -= 5;
        }
            break;
        case KeyEvent.VK_DOWN: {
            cordY += 5;
        }
            break;
        case KeyEvent.VK_UP: {
            cordY -= 3;
        }
            break;
        }
        repaint();
    }

    public void keyTyped(KeyEvent ke) {
    }

    public void keyReleased(KeyEvent ke) {
    }
} 
```

如果有人能纠正我在哪里犯了错误，那将会很有帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:33:38.640

您在每个事件键上创建新的旋转图像的问题，因此看起来不起作用尝试将此行的位置更改为在每个键事件上不可修改

```
public static void main(String[] args) {

        new RotateImage(null);
    }

    public void keyPressed(KeyEvent ke) {
            final RotateImage ri = new RotateImage(TestImage); 
```

**更新：**

原因是构造函数的值为 null 你应该传递图像

```
new RotateImage(null); 
```

在你的代码上修改这个

1）使其静态

```
private static Image TestImage; 
```

2）定义

```
private static RotateImage ri; 
```

3）像这样调用main

```
public static void main(String[] args) {
         ri = new RotateImage(TestImage);
    } 
```

第 4 步（已删除）

**更新：**

[阅读有关堆栈溢出的这些问题](https://stackoverflow.com/questions/7517688/rotate-a-java-graphics2d-rectangle) [另一个问题](https://stackoverflow.com/questions/10219088/java-move-a-rotated-shape)

**更新2：**

这是它完美工作的完整代码（右键）不要忘记将您的图像包含在同一个包中，并且它的类型相同.png这里是代码

```
package aircraftPackage;

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.MediaTracker;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;

public class RotateImage extends JFrame implements KeyListener {
    private static final long serialVersionUID = 1L;
    private static Image TestImage;
    private static RotateImage ri;
    private BufferedImage bf;
    private int cordX = 100;
    private int cordY = 100;
    private double currentAngle;

    public RotateImage(Image TestImage) {
     this.TestImage = TestImage;
     MediaTracker mt = new MediaTracker(this);
     mt.addImage(TestImage, 0);
     try {
       mt.waitForID(0);
     }
     catch (Exception e) {
       e.printStackTrace();
     }
        setTitle("Testing....");
        setSize(500, 500);
        imageLoader();
        setVisible(true);
    }
public void rotate() {
     //rotate 5 degrees at a time
     currentAngle+=5.0;
     if (currentAngle >= 360.0) {
       currentAngle = 0;
     }
     repaint();
   }

    public void imageLoader() {
        try {
            String testPath = "test.png";
            TestImage = ImageIO.read(getClass().getResourceAsStream(testPath));

        } catch (IOException ex) {
            ex.printStackTrace();
        }

        addKeyListener(this);
    }

    public void update(Graphics g){
           paint(g);
    }

    public void paint(Graphics g){

        bf = new BufferedImage( this.getWidth(),this.getHeight(), BufferedImage.TYPE_INT_RGB);

    try{
    animation(bf.getGraphics());
    g.drawImage(bf,0,0,null);
    }catch(Exception ex){

    }
}

    public void animation(Graphics g) {
        super.paint(g);
        Graphics2D g2d = (Graphics2D)g;
        AffineTransform origXform = g2d.getTransform();
        AffineTransform newXform = (AffineTransform)(origXform.clone());
        //center of rotation is center of the panel
        int xRot = this.getWidth()/2;
        int yRot = this.getHeight()/2;
        newXform.rotate(Math.toRadians(currentAngle), xRot, yRot);
        g2d.setTransform(newXform);
        //draw image centered in panel
        int x = (getWidth() - TestImage.getWidth(this))/2;
        int y = (getHeight() - TestImage.getHeight(this))/2;
        g2d.drawImage(TestImage, x, y, this);
        g2d.setTransform(origXform);
        g.drawImage(TestImage, cordX, cordY, this);
    }

    public static void main(String[] args) {
         ri = new RotateImage(TestImage);

    }

    public void keyPressed(KeyEvent ke) {

        switch (ke.getKeyCode()) {
        case KeyEvent.VK_RIGHT: {
            cordX += 5;

           ri.rotate();
        }
            break;
        case KeyEvent.VK_LEFT: {
            cordX -= 5;
            ri.rotate();
        }
            break;
        case KeyEvent.VK_DOWN: {
            cordY += 5;
            ri.rotate();
        }
            break;
        case KeyEvent.VK_UP: {
            cordY -= 3;
            ri.rotate();
        }
            break;
        }
        repaint();
    }

    public void keyTyped(KeyEvent ke) {
    }

    public void keyReleased(KeyEvent ke) {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:38:14.210

```
 public void keyPressed(KeyEvent ke) {
            final RotateImage ri = new RotateImage(TestImage);

        switch (ke.getKeyCode()) {
        case KeyEvent.VK_RIGHT: {
            cordX += 5;

           ri.rotate();
        } 
```

似乎您每次都在旋转相同的图像，所以它总是只旋转 5 度。

编辑：哼哼太晚了。. 见 shareef 帖子。

# java - JSR 303 - 验证多个内部列表

> ID：10992884
> 
> 赞同：4
> 
> 时间：2012-06-12T08:19:31.277
> 
> 标签：java, bean-validation

我正在使用 JSR 303 并编写了许多注释，因此我熟悉使自定义约束起作用的过程。

我刚刚遇到了一个我不确定我能否优雅地解决的问题。这里的对象是为了说明！所以我有一个包含孩子列表的祖父母对象。每个孩子都有自己的孩子名单（显然是祖父母的孙子）。这个列表的大小可以用@Size 来限制。但是我需要限制祖父母的（孙）子数量的总大小，以便如果我验证祖父母实例，他们的所有孩子的孙子数量限制为 50 个。奇怪的例子，我知道:-)

我首先在祖父母中创建一个方法，该方法简单地计算 GrandParent 中子列表的子列表中的所有元素，并为其添加一个简单的 @Size 注释。这感觉有点难看 - 添加这样的方法只是为了进行一些验证。这不是 JSR 应该解决的部分吗？

或者 - 创建一个像这样的自定义注释：

```
@CustomListSize(listName="children.children", min=0, max=50)
Grandparent
    --> List<Child> children
        @Size(min=0, max=5)
        -->List<Child> children
    --> List<Object> list1
        -->List<Object> list2 
```

我显然可以通过反射/属性描述符得到这个并检查最小值/最大值。这听起来不错，还是在我缺少的 JSR 303 中有更好的方法。这也有效，但需要更多代码并且仍然不理想。

最后，如果我想对 list2 中的条目数做同样的检查怎么办？我不能重复 CustomListSize 所以怎么做 - 有一个内部列表？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:16:14.147

我认为您的祖父母对象的自定义验证器将是一个好方法。

```
@InnerListSize(lists = {"list1", list2"}, min=0, max=50)
class GrandParent{
   List list1;
   List list2;

} 
```

反射可用于获取列表。一旦我们有了它们，就很容易计算整体大小。验证器类不会特别复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:47:02.250

为祖父母创建自定义验证器

公共类 GrandParentValidator 实现 ConstraintValidator {

```
@Override
public boolean isValid(GrandParent bean,
        ConstraintValidatorContext ctx) {            
          //Count the number of Grandkids
          int noOfGrandKids  = 0 ;
          for (Children child :bean.getAllChild() ){
              noOfGrandKids += child.getAllChild().size ;
          }

          if (int noOfGrandKids  > 50){ 
            ctx.disableDefaultConstraintViolation();
            ctx.buildConstraintViolationWithTemplate("Invalid -More than 50 Grandkids found").addConstraintViolation();
            return false ;
          }
         return true ;
      } 
```

}

# c# - 函数在评估时返回 false

> ID：10992889
> 
> 赞同：-3
> 
> 时间：2012-06-12T08:19:46.783
> 
> 标签：c#, c#-4.0

知道为什么 func 返回 false 吗？Equals 也不会触发！！！

```
class Program
{
    static void Main(string[] args)
    {          
        Func<Person, SomethingElse, bool> matchNested = 
            (p, s) => p.Nested == s.Nested;

        var matched = matchNested(new Person()
            {
                Age = 10, 
                Nested = new Nested()
                    {
                        Validity = DateTime.Today
                    }
            },
            new SomethingElse()
            {
                Age = 10, 
                Nested = new Nested()
                    {
                        Validity = DateTime.Today
                    }
            });

        Console.WriteLine(matched);
    }
}

internal class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
    public Nested Nested { get; set; }
}

internal class SomethingElse
{
    public string Name { get; set; }
    public int Age { get; set; }
    public Nested Nested { get; set; }
}

internal class Nested
{
    public DateTime Validity { get; set; }

    public override bool Equals(object obj)
    {     
        if (obj == null || GetType() != obj.GetType())
        {
            return false;
        }

        if (!this.Validity.Equals((obj as Nested).Validity))
            return false;

        return base.Equals(obj);

    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:22:40.283

[我不会费心去弄清楚你的`Equals`代码试图做什么，我只是说为什么它没有被调用以及为什么你总是出错。]

[根据文档](http://msdn.microsoft.com/en-us/library/53k8ybth.aspx)，默认情况下，`==`对于指向*同一*对象的引用类型，运算符返回 true 。

因此，您可以做的是[重载类中的运算符](http://msdn.microsoft.com/en-us/library/aa288467%28v=vs.71%29.aspx)，`Nested`或调用`p.Nested.Equals(s.Nested)`. 如果你走超载路线，你也需要超载`!=`。

如果你走这`Equals`条路，你可以让你的`Nested`类实现[`Equatable<T>`接口](http://msdn.microsoft.com/en-us/library/ms131187.aspx)，这样你就会得到一个强类型的`Equals`方法，而不是一个采用`object`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:27:14.823

如果你想让它工作，你需要确保你也覆盖了嵌套上的 == 运算符 - 你只覆盖了 Equals 但你正在调用 Nested == Nested

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:31:52.543

如果它们的 Validity 属性相等，您似乎希望两个嵌套类型相等。如果是这样，请从 Equals() 中删除“return base.Equals(obj)”并将其上方的行更改如下：

return (this.Validity.Equals((obj as Nested).Validity));

此外，除非您也像这样更改 Func<> ，否则不会调用 Equals() ：

Func matchNested = (p, s) => p.Nested.Equals(s.Nested);

# android - 适合屏幕所有小部件

> ID：10992891
> 
> 赞同：0
> 
> 时间：2012-06-12T08:19:59.037
> 
> 标签：android, android-layout

这是屏幕截图。我希望此按钮适合所有设备的屏幕显示。

我想在**Button6**之后删除空间并将所有按钮都放在屏幕上。

![图片](../Images/6b1a79435c4515712f4153d781f5880a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:37:07.193

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:16:21.963

利用 ：

res/values-ldpi/dimens.xml

res/values-mdpi/dimens.xml

res/values-hdpi/dimens.xml

设置按钮高度

```
<!-- in values-ldpi/dimens.xml -->
<dimen name="height">25dip</dimen>

<!-- in values-mdpi/dimens.xml -->
<dimen name="height">30dip</dimen>

<!-- in values-hdpi/dimens.xml -->
<dimen name="height">40dip</dimen> 
```

# database - 只读数据库的单元测试

> ID：10992892
> 
> 赞同：0
> 
> 时间：2012-06-12T08:20:01.027
> 
> 标签：database, unit-testing, readonly

我们正在编写一个访问 erp 解决方案数据库的应用程序。当然我们是不允许写入数据库的（database = readonly）。

这会在为访问/读取数据库的 daos 编写测试时导致冲突。

生成测试数据的最佳实践是什么？

任何建议都会很重要，在此先感谢托比

更新：也许很重要，我们不会映射 erp 数据库中表的所有属性，因为我们不需要它们。一些未映射的列不为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:24:21.050

过去，我在一个事务中都使用了 NUnit 测试，然后在测试完成后回滚。begin tran insert .... select .... 检查单元测试 ... rollback tran。这是您的选择吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:26:29.143

使用非生产数据库。如果可能的话，使用内存数据库，使用 DB Unit 之类的东西来创建模式和常备数据，并在测试包完成时让实例自行关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:42:02.840

您应该创建两个数据库，一个用于您的实时数据，一个用于测试数据。然后你可以精确地测试这个测试数据，你也可以通过探测写入数据库来测试只读特性。如果这失败了，你就成功了。

出于安全原因，您始终应该拥有一个测试和生产系统。如果写入测试失败并且您的所有生产数据都丢失了怎么办？正如 Jeff Watkins 之前所说，您可以使用内存 DB，它会动态填充测试数据，然后设置为只读，然后进行测试。最简单的方法仍然是将另一个数据集作为普通数据库（但我不知道你在使用什么，所以你必须自己弄清楚什么最适合你的目的）。

# ruby-on-rails-3 - Rails 资产管道测试通过了生产中断

> ID：10992893
> 
> 赞同：9
> 
> 时间：2012-06-12T08:20:02.890
> 
> 标签：ruby-on-rails-3, testing, asset-pipeline

我在资产管道中遇到了以下问题。

*   我有一封带有图片的 HTML 电子邮件。
*   我有测试涵盖成功发送电子邮件的情况。
*   所有测试通过。
*   投入生产时，要求发送电子邮件的功能被破坏，因为 HTML 布局引用了不存在的图像。

这显然适用于所有预编译资产。

在我看来，突然测试不再可靠。有什么办法可以避免这种情况再次发生？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T15:24:08.413

我从自己的案例中找到了完美的解决方案。如果你设置

```
 config.assets.compile = false 
 config.assets.digest = true 
```

在测试环境中，您的测试将依赖于预编译的资产。

由于在快速开发和测试阶段每次都预编译资产很烦人，在我的情况下，仅在 CI 上进行此配置就足够了。

您可以使用以下内容设置一个名为 ci_config.rb 的初始化程序：

```
if ENV['CI'] 
  class YourApp::Application
    config.assets.compile = false
    config.assets.digest = true 
  end
end 
```

并配置您的 CI 以运行 rake assets:precompile on start 和 rake assets:clean on end。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:23:18.033

比较 application.rb、production.rb 和 development.rb 中的默认配置选项，并阅读[在 Ruby on Rails 指南中配置 Rails 应用程序](http://guides.rubyonrails.org/configuring.html)以了解选项。

重要的选项如下：

`config.serve_static_assets`：将此设置为 false （生产默认值），然后，rails 将不会提供静态内容。

`config.assets.compile`: 如果需要，是否使用资产管道编译资产。

如果您将以上两个选项设置为`false`（这是生产的默认设置），那么您需要 1）预编译并将静态内容放置在适当的位置，2）配置 Web 服务器（可能是 apache 或 nginx）以根据需要提供静态内容。

因此，对于生产，您不仅需要放置文件，还需要配置 Web 服务器来为它们提供服务，或者您可以配置`serve_static_assets`为即时创建资产。您可能需要调整测试配置，但测试`serve_static_assets`是正确的，除非您更改它。

# webdriver - 如何在 Selenium Grid linux 和 firefox 中运行 webdriver 测试

> ID：10992895
> 
> 赞同：1
> 
> 时间：2012-06-12T08:20:15.543
> 
> 标签：webdriver, selenium-grid

如何在 Selenium Grid linux 和 firefox 中运行 webdriver 测试。在设置 selenium Grid 并在集线器上注册节点后，当我尝试运行以下代码时会抛出类未找到错误，任何想法。

```
 URL server = new URL("http://127.0.0.1:4444/wd/hub");

    DesiredCapabilities capabilities = new DesiredCapabilities();
    capabilities.setBrowserName("firefox");

    System.out.println("Connecting to " + server);

    RemoteWebDriver driver = new RemoteWebDriver(server, capabilities);

    driver.get("http://www.google.com");

    driver.quit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:23:45.760

Satish，检查堆栈跟踪中的错误。它说

`Caused by: java.lang.ClassNotFoundException: com.app.tests.RemoteTest`

这不是硒例外。您的类文件**RemoteTest**不在类路径中。您需要在类路径中设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:09:19.960

你可以试试：

```
DesiredCapabilities capabilities = DesiredCapabilities.firefox(); 
```

我假设 Firefox 已正确安装并且您的节点具有匹配的 Firefox 实例？你能发布你的配置文件吗？

# php - 如何将 PHP 输出捕获到变量中

> ID：10992910
> 
> 赞同：1
> 
> 时间：2012-06-12T08:21:18.540
> 
> 标签：php, http-get

我一直想要这样做，因为我的网站每次加载页面大约执行 3 个 HTTP 请求，因为每个 PHP 的输出都是使用 cURL 检索的。这太慢了，我想避免使用 cURL。我在 Stack Overflow 上找到[了这个问题](https://stackoverflow.com/questions/171318/how-do-i-capture-php-output-into-a-variable)，它基本上可以满足我的要求。接受的答案的建议是使用`ob_start();`开始获取输出，然后使用`ob_get_clean();`将输出放入变量中。我现在的问题是我试图从需要使用 HTTP Get 传递给它们的变量中捕获输出的 PHP 脚本。像这样访问这些变量：

```
$term = $_GET['term']; 
```

我不想改变这一点，因为虽然我要从另一个 PHP 脚本访问这些 PHP 脚本的输出，但我也计划从其他地方访问它们。那么，有没有办法让这些 PHP 脚本通过 Get 接受一些参数，然后用上面建议的方法捕获它们的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:28:28.783

如果已设置，您可以从任何 php 脚本中 $_GET 变量（使用[isset](http://php.net/manual/en/function.isset.php)进行检查）。然后只需 cURL 到这样的 url 就可以了。

如果您之前已将方法更改为 POST，则可以使用`CURLOPT_HTTPGET`. 有关详细信息，请参阅 curl_setopt 函数页面 ( [http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php) )。

对于非 cURL 方法，使用`jQuery ajax`. 使用起来非常简单，只需阅读[此处](http://api.jquery.com/jQuery.ajax/)的文档即可。

**编辑：这就是你想要**的（虽然没有检查代码）

```
<?php

function get_include_contents($filename, $get) {
 if (is_file($filename)) {
    ob_start();
    $_GET = array();
    while (list($key, $val) = each($get)) {
      $_GET[$key]=$val;
    }
    include $filename;
    return ob_get_clean();
 }
 return false;
}

$string = get_include_contents('somefile.php', array('param1'=>'x', 'param2'=>'y'));

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:46:16.887

> 我不想改变这一点，因为虽然我要从另一个 PHP 脚本访问这些 PHP 脚本的输出，但我也计划从其他地方访问它们。那么，有没有办法让这些 PHP 脚本通过 Get 接受一些参数，然后用上面建议的方法捕获它们的输出？

你的问题有点不清楚你*为什么*首先使用 cURL。如果您的脚本在同一台服务器上，您可以简单地设置正确的`$_GET`变量并使用：

```
<?php
ob_start( );
// include the file.
$_GET['foo'] = 'bar';
include 'the_file.php';

$output = ob_get_clean( ); 
```

如果您的脚本位于另一台服务器上，其中 include 不可行，您将**始终**需要执行 HTTP 请求来获取其内容，无论您的 this 使用 cURL 还是 Ajax，或者我所关心的套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:24:50.987

好吧，只要它在 URI 中，您就可以从加载的任何脚本访问 $_GET，变量 $term 可以在任何脚本中使用。您还可以包含脚本。

当您包含一个脚本时，您可以在包含后访问它的一些内容。

# ios - 核心数据子查询

> ID：10992914
> 
> 赞同：0
> 
> 时间：2012-06-12T08:21:36.320
> 
> 标签：ios, core-data, subquery, datamodel

我有一个包含两个可选对多关系的实体（childA <<-> parent <->> childB）。这两个子实体中的每一个都包含一个我有兴趣查询的可选字符串。

使用相同的格式，我得到了我期望的结果，但不是另一个。我明白这意味着我不了解我正在使用的工具；并希望有一些见解。这是两个查询的样子：

```
childA.@count != 0 AND (0 == SUBQUERY(childA, $a, $a.string != NIL).@count)
childB.@count != 0 AND (0 == SUBQUERY(childB, $a, $a.string != NIL).@count) 
```

只有当每个实体实例的字符串也为 nil 时，我才希望从 childA 和 childB 的非 nil 实例中获取结果。我的问题是，为什么要给出我期望的结果？而另一个没有？

澄清：我正在尝试解决我正在寻找两件事之一的一般问题。我要么在属性中搜索默认值。当属性是可选的时，我还在搜索 nil 属性。当仅在填充可选关系时才应考虑可选关系时，问题会更加复杂。如果没有关系计数！= 0，我会以零关系返回所有父母。在一种情况下，这是期望的行为。在另一种情况下，这似乎减少了返回的父计数（结果为 0）。

对于可选属性情况，查询可能如下所示：

```
parent.@count != 0 AND (parent.gender == -1) OR (parent.gender == NIL) 
```

如果键路径中存在可选关系，则查询采用第一个示例中示例的形式。

再一次，我得到了我所期望的结果，除了一个案例，它的关系或属性特征似乎没有任何独特之处。或者我应该说，这个异常在数据模型结构或查询格式中没有什么独特之处......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:56:30.880

也许你在第二个子句中混淆了`==`，`!=`它应该是

```
childA.@count != 0 AND (SUBQUERY(childA, $a, $a.string != NIL).@count != 0) 
```

如果您可以先用简单的英语制定查询，那么您想要实现的目标会更清楚。

顺便说一句，您可以使用[NSExpression](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSExpression_Class/Reference/NSExpression.html#//apple_ref/occ/clm/NSExpression/expressionForSubquery%3ausingIteratorVariable%3apredicate%3a)`expressionForSubquery:usingIteratorVariable:predicate:`类为您构建子查询。那时您可能会更轻松地获得有用的错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:25:55.807

我现在明白了这个问题。
就我而言，首先过滤掉计数为 0 的 NSSet 通常是合乎逻辑的。但是，在有问题的情况下，返回计数为 0 的 NSSet 和计数大于 0 的 NSSet 的结果在逻辑上是正确的，其中属性为 nil（当可选时），或者属性设置为其默认值。换句话说，在有问题的情况下，需要去除left条件，导致以下格式：

```
(0 == SUBQUERY(childA, $a, $a.string != NIL).@count) 
```

看来我需要让托管对象根据具体情况指示哪种场景是合适的......哎呀！

# javascript - 如何使用 javascript 删除表情符号代码？

> ID：10992921
> 
> 赞同：46
> 
> 时间：2012-06-12T08:22:05.360
> 
> 标签：javascript, unicode, emoji

如何使用 JavaScript 删除表情符号代码？我以为我已经使用下面的代码处理了它，但我仍然有像 .

```
function removeInvalidChars() {
    return this.replace(/[\uE000-\uF8FF]/g, '');
} 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2017-01-09T08:20:36.980

对我来说，没有一个答案完全删除了所有表情符号，所以我必须自己做一些工作，这就是我得到的：

```
text.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g, ''); 
```

此外，应该考虑到，如果稍后将字符串插入数据库，用空字符串替换可能会暴露安全问题。而是用替换字符 U+FFFD 替换，请参阅：[http ://www.unicode.org/reports/tr36/#Deletion_of_Noncharacters](http://www.unicode.org/reports/tr36/#Deletion_of_Noncharacters)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-06-12T15:32:06.723

您选择的范围是私人使用区域，包含非标准字符。运营商用于将表情符号编码为该范围内不同的、不一致的值。

最近，表情符号被赋予了标准化的“统一”代码点。其中许多位于基本多语言平面之外，位于 U+1F300–U+1F5FF 块中，包括您的示例 U+1F534 大红圈。

`[\U0001F300-\U0001F5FF]`您可以在支持非 BMP 字符的正则表达式引擎中检测这些字符，但 JavaScript`RegExp`并不是这样的野兽。不幸的是，JS 字符串模型基于 UTF-16 代码单元，因此您必须在正则表达式中使用 UTF-16 代理：

```
return this.replace(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g, '') 
```

但是，请注意，基本多语言平面中还有其他字符被手机用作表情符号，但早于表情符号。例如，U+2665 是传统的 Heart Suit 字符♥，但它可能会在某些设备上呈现为表情符号图形。是否将其视为表情符号并尝试将其删除取决于您。有关更多示例，请参阅[此列表](http://code.iamcal.com/php/emoji/)。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2020-08-18T08:03:56.960

我通过使用带有[Unicode 属性转义](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes)的正则表达式来解决它。我从这篇文章中得到它，它适用于 Java，但仍然非常有用 - [Remove Emojis from a Java String](https://www.baeldung.com/java-string-remove-emojis)。

```
'Smile'.replace(/[^\p{L}\p{N}\p{P}\p{Z}^$\n]/gu, ''); 
```

它删除所有符号，除了：

*   \p{L} - 任何语言的所有字母
*   \p{N} - 数字
*   \p{P} - 标点符号
*   \p{Z} - 空格分隔符
*   ^$\n - 添加您想要保留的任何符号

这个应该更正确并且有效，但对我来说，它在字符串中留下了一些垃圾符号：

```
 'Smile'.replace(/\p{Emoji}/gu, ''); 
```

编辑：从评论中添加符号

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-12-15T12:32:16.663

我发现了很多建议，但解决了我的问题的正则表达式是：

```
/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g 
```

一个简短的例子

```
function removeEmojis (string) {
  var regex = /(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;
  return string.replace(regex, '');
} 
```

希望它可以帮助你

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-08-17T02:26:23.200

@bobince 的解决方案对我不起作用。表情符号要么留在那里，要么被不同的表情符号交换。

这个解决方案对我有用：

```
var ranges = [
  '\ud83c[\udf00-\udfff]', // U+1F300 to U+1F3FF
  '\ud83d[\udc00-\ude4f]', // U+1F400 to U+1F64F
  '\ud83d[\ude80-\udeff]' // U+1F680 to U+1F6FF
];

$('#mybtn').on('click', function() {
  removeInvalidChars();
})

function removeInvalidChars() {
  var str = $('#myinput').val();

  str = str.replace(new RegExp(ranges.join('|'), 'g'), '');
  $("#myinput").val(str);
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="text" id="myinput"/>
<input type="submit" id="mybtn" value="clear"/>
```

**[来源](http://codepen.io/akinorikul/pen/OVLXPV)**

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-11-08T15:46:56.677

我知道这篇文章有点老了，但我在工作中偶然发现了这个问题，一位同事想出了一个有趣的想法。基本上不是剥离表情符号字符，而是只允许有效字符。参考这个 ASCII 表：

[http://www.asciitable.com/](http://www.asciitable.com/)

像这样的函数只能保留合法字符（范围本身取决于你所追求的）

```
function (input) {
            var result = '';
            if (input.length == 0)
                return input;
            for (var indexOfInput = 0, lengthOfInput = input.length; indexOfInput < lengthOfInput; indexOfInput++) {
                var charAtSpecificIndex = input[indexOfInput].charCodeAt(0);
                if ((32 <= charAtSpecificIndex) && (charAtSpecificIndex <= 126)) {
                    result += input[indexOfInput];
                }
            }
            return result;
        }; 
```

在您希望保留英文字母 + 数字 + 特殊字符的情况下，这应该保留 Alphabet 的所有数字、字母和特殊字符。希望它可以帮助某人:)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-27T03:08:38.640

这里没有一个答案适用于我测试的所有 unicode 字符（特别是杂项范围内的字符，例如⛽或☯️）。

这是一个对我有用的，（很大）灵感来自[这个 SO PHP 答案](https://stackoverflow.com/a/20208095/1319878)：

```
function _removeEmojis(str) {
  return str.replace(/([#0-9]\u20E3)|[\xA9\xAE\u203C\u2047-\u2049\u2122\u2139\u3030\u303D\u3297\u3299][\uFE00-\uFEFF]?|[\u2190-\u21FF][\uFE00-\uFEFF]?|[\u2300-\u23FF][\uFE00-\uFEFF]?|[\u2460-\u24FF][\uFE00-\uFEFF]?|[\u25A0-\u25FF][\uFE00-\uFEFF]?|[\u2600-\u27BF][\uFE00-\uFEFF]?|[\u2900-\u297F][\uFE00-\uFEFF]?|[\u2B00-\u2BF0][\uFE00-\uFEFF]?|(?:\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])[\uFE00-\uFEFF]?/g, '');
} 
```

（我的用例是在数据网格中排序，其中表情符号可以在字符串中排在第一位，但用户希望文本按实际单词排序。）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-10-12T11:09:37.993

[sandre89 的回答](https://stackoverflow.com/a/38987183/2111193)很好，但并不完美。我花了一些时间在这个主题上，并有一个可行的解决方案。

```
var ranges = [
  '[\u00A0-\u269f]',
  '[\u26A0-\u329f]',
  // The following characters could not be minified correctly
  // if specifed with the ES6 syntax \u{1F400}
  '[-]'
  //'[\u{1F004}-\u{1F9C0}]'
];

$('#mybtn').on('click', function() {
  removeInvalidChars();
});

function removeInvalidChars() {
  var str = $('#myinput').val();
  str = str.replace(new RegExp(ranges.join('|'), 'ug'), '');
  $("#myinput").val(str);
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="text" id="myinput" />
<input type="submit" id="mybtn" value="clear" />
```

这是[我的 CodePen](https://codepen.io/Spyryto/pen/XeqPmb)

不过，有几点需要注意。

1.  Unicode 字符`U+1F000`需要一个特殊的符号，所以你可以使用 sandre89 的方式，或者选择`\u{1F000}`ES6 符号，它可能适用于你的 minificator，也可能不适用。我成功地将表情符号直接粘贴到 UTF-8 编码脚本中。

2.  不要忘记`u`正则表达式中的标志，否则您的 Javascript 引擎可能会抛出错误。

请注意，由于文件编码、字符集或缩小器，事情可能无法正常工作。就我而言，直到我将脚本从`.isml`文件（Demandware）中取出并将其粘贴到`.js`文件中之前，都没有任何效果。

您可以参考[Wikipedia Emoji 页面](https://en.wikipedia.org/wiki/Emoji#Unicode_blocks)和[一个 Unicode 字符占用多少字节？](https://stackoverflow.com/a/39181061/2111193)，并像我一样修补这个[在线 Unicode 转换器。](https://r12a.github.io/apps/conversion/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-02T03:35:49.837

```
var emoji =/([#0-9]\u20E3)|[\xA9\xAE\u203C\u2047-\u2049\u2122\u2139\u3030\u303D\u3297\u3299][\uFE00-\uFEFF]?|[\u2190-\u21FF][\uFE00-\uFEFF]?|[\u2300-\u23FF][\uFE00-\uFEFF]?|[\u2460-\u24FF][\uFE00-\uFEFF]?|[\u25A0-\u25FF][\uFE00-\uFEFF]?|[\u2600-\u27BF][\uFE00-\uFEFF]?|[\u2900-\u297F][\uFE00-\uFEFF]?|[\u2B00-\u2BF0][\uFE00-\uFEFF]?|(?:\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])[\uFE00-\uFEFF]?|[\u20E3]|[\u26A0-\u3000]|\uD83E[\udd00-\uddff]|[\u00A0-\u269F]/g;

str.replace(emoji, ""); 
```

我添加了这个 '\uD83E[\udd00-\uddff]'

这些表情符号于 2018 年 6 月更新

如果你想在其他更新后阻止表情符号然后使用这个

```
str.replace(/[^0-9a-zA-Zㄱ-힣+×÷=%♤♡☆♧)(*&^/~#@!-:;,?`_|<>{}¥£€$◇■□●○•°※¤《》¡¿₩\[\]\"\' \\]/g ,""); 
```

你可以屏蔽所有表情符号，你只能使用 eng、num、hangle 和一些字符 thx :)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-05T09:36:12.217

您可以使用此功能将表情符号替换为空：

```
function msgAfterClearEmojis(msg)
{
    var new_msg = msg.replace(/([#0-9]\u20E3)|[\xA9\xAE\u203C\u2047-\u2049\u2122\u2139\u3030\u303D\u3297\u3299][\uFE00-\uFEFF]?|[\u2190-\u21FF][\uFE00-\uFEFF]?|[\u2300-\u23FF][\uFE00-\uFEFF]?|[\u2460-\u24FF][\uFE00-\uFEFF]?|[\u25A0-\u25FF][\uFE00-\uFEFF]?|[\u2600-\u27BF][\uFE00-\uFEFF]?|[\u2900-\u297F][\uFE00-\uFEFF]?|[\u2B00-\u2BF0][\uFE00-\uFEFF]?|(?:\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])[\uFE00-\uFEFF]?|[\u20E3]|[\u26A0-\u3000]|\uD83E[\udd00-\uddff]|[\u00A0-\u269F]/g, '').trim();
    return new_msg;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-03-15T18:18:57.157

这是@hababr 答案的迭代。
他的回答删除了许多标准字符，例如,`$`等等。 这个版本保留了所有这些*（除了**反斜杠 - 不知道如何正确地转义它）*。`+``<`
*`\`*

```
"hey hau ahoy‍☠️ !@#$%^&*()-_=+±§;:'\|`~/?[]{},.<>".replace(/[^\p{L}\p{N}\p{P}\p{Z}{^$=+±\\'|`\\~<>}]/gu, "")
// "hey hau ahoy !@#$%^&*()-_=+±§;:'|`~/?[]{},.<>" 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-11T07:31:58.643

在搜索并尝试了很多 unicode 正则表达式之后，**我建议你试试这个，它可以覆盖所有的表情符号**：

```
function removeEmoji(str) {
  let strCopy = str;
  const emojiKeycapRegex = /[\u0023-\u0039]\ufe0f?\u20e3/g;
  const emojiRegex = /\p{Extended_Pictographic}/gu;
  const emojiComponentRegex = /\p{Emoji_Component}/gu;
  if (emojiKeycapRegex.test(strCopy)) {
    strCopy = strCopy.replace(emojiKeycapRegex, '');
  }
  if (emojiRegex.test(strCopy)) {
    strCopy = strCopy.replace(emojiRegex, '');
  }
  if (emojiComponentRegex.test(strCopy)) {
    // eslint-disable-next-line no-restricted-syntax
    for (const emoji of (strCopy.match(emojiComponentRegex) || [])) {
      if (/[\d|*|#]/.test(emoji)) {
        continue;
      }
      strCopy = strCopy.replace(emoji, '');
    }
  }

  return strCopy;
}
let a = "1️⃣aa‍♂️b#️⃣✅❎23#!^*bb‍♀️ccc";
console.log(removeEmoji(a))
```

[参考：Unicode Emoij 文档](https://unicode.org/reports/tr51/#Emoji_Properties)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-10-21T11:29:29.540

只是对@hababr 答案的补充。

If you need to get rid of complicated emojis, you have to remove also additional things like modifiers and etc:

```
'‍'.replace(/[\p{Emoji}\p{Emoji_Modifier}\p{Emoji_Component}\p{Emoji_Modifier_Base}\p{Emoji_Presentation}]/gu, '').charCodeAt(0) 
```

**update:**

`*#0-9` - are Emoji characters with a text representation by default, per the Unicode Standard.

so, my current solution is next:

```
'‍'.replace(/(?![*#0-9]+)[\p{Emoji}\p{Emoji_Modifier}\p{Emoji_Component}\p{Emoji_Modifier_Base}\p{Emoji_Presentation}]/gu, '').charCodeAt(0) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-30T14:26:11.250

```
var emojiRegex = /\uD83C\uDFF4(?:\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74)\uDB40\uDC7F|\u200D\u2620\uFE0F)|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|\uD83D\uDC69\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83D\uDC69\u200D[\u2695\u2696\u2708])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC68(?:\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDD1-\uDDDD])/g;
console.log(text.replace(emojiRegex,''); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-08-19T13:50:35.823

```
<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
function isEmoji(str) {
    var ranges = [       
       '[\uE000-\uF8FF]',
       '\uD83C[\uDC00-\uDFFF]',
       '\uD83D[\uDC00-\uDFFF]',
       '[\u2011-\u26FF]',
       '\uD83E[\uDD10-\uDDFF]'         
    ];
    if (str.match(ranges.join('|'))) {
        return true;
    } else {
        return false;
    }
}
$(document).ready(function(){
 $('input').on('input',function(){
    var $th = $(this);
    console.log("Value of Input"+$th.val());
    emojiInput= isEmoji($th.val());
    if (emojiInput==true) {
        $th.val("");
    }
});
});
</script>
</head>
<body>
Enter your name: <input type="text">
</body>
</html> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-21T07:30:03.210

**你可以在这里查看表情符号..**

```
 ,   , 
```

```
function removeEmoji() {
  var y = document.getElementById('textbox_id1');
  y.value = y.value.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g, '');
}
```

```
input {
  padding: 5px;
}
```

```
<input type="text" id="textbox_id1" placeholder="Remove emoji..." oninput="removeEmoji()">
```

您可以从这里获取更多表情符号：[在线表情符号键盘](https://coolsymbol.com/emojis/emoji-for-copy-and-paste.html)

# objective-c - 通过 CATransition 添加子视图时屏幕闪烁

> ID：10992923
> 
> 赞同：0
> 
> 时间：2012-06-12T08:22:18.250
> 
> 标签：objective-c, addsubview, caanimation, catransition

许多人使用这种方法在切换视图时添加动画。当我尝试在添加子视图时添加动画效果时，视图总是闪烁一次。原因是视图在开始时立即添加子视图，然后动画开始。

```
CATransition *transition = [CATransition animation];
transition.duration = 0.35;
transition.removedOnCompletion = NO;
transition.fillMode = kCAFillModeForwards;
transition.type = kCATransitionFade;
transition.subtype = kCATransitionFromBottom;
transition.delegate = self;
[[animationView layer] addAnimation:transition forKey:@"switchView"];
OtherViewController *otherController = [[OtherViewController alloc]init:cityID];
self.myOtherViewController = otherController;
[otherController release];
[self.view insertSubview:myOtherViewController.view atIndex:1]; 
```

出现问题的原因是什么？如何实现不使用flash加载新视图的动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:22:30.970

将fillMode修改为kCAFillModeBoth后，就可以了。

transition.fillMode = kCAFillModeForwards;

# android - 异步任务完成后如何添加 ListView？

> ID：10992929
> 
> 赞同：0
> 
> 时间：2012-06-12T08:23:17.287
> 
> 标签：android

如何在 AsyncTask 的 onPostExecute() 方法之后向我的活动添加列表视图？我正在 AsyncTask 的 doInBackground() 方法中准备列表视图项目。所以，我想在 AsyncTask 完成后添加列表视图。请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:29:41.173

```
protected void onPostExecute(Void result) {

            listview.setAdapter(dealAdapter);//Set your listview adapter Here

            if (progDialog.isShowing()) {
                progDialog.dismiss();
            }

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:40:16.780

在 Listview 中优化显示过程的另一个提示 akka 建议：

1.  当您在内部为 listview 准备数据时`doInBackground()`，请调用`publishProgress((yourData)`.

    // 这里 'yourdata' 可以是**int**或**JSONObject**或**String**或任何一个。

2.  调用`publishProgress()`后，就到了**`onProgressUpdate()`**AsyncTask的方法，可以在adapter中添加数据，调用notifyDatasetChanged()通知adapter有新的数据添加。

这样您就可以一一准备数据和发布数据。

# php - 如何通过 Post 从动态变量中提取值

> ID：10992930
> 
> 赞同：2
> 
> 时间：2012-06-12T08:23:20.317
> 
> 标签：php, forms, post

我正在使用要通过 post 方法提交到下一页的值。输入类型字段具有这样创建的动态名称`name="fob-$id"`。现在通过 post 提交时，有 4 - 5 个变量，例如 fob-89、fob-29、fob-65 等...如何将这些值分配给新变量？

注意：我知道 fob 会附加哪些数字，所以这不会是一个问题，我面临的唯一问题是如何将这些值分配给一个变量。

```
$fob=$_POST['fob-$id']; 
```

上面的代码不起作用。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:31:33.323

最好的方法是命名您的 HTML 字段，以便它们在发送回 PHP 时创建一个数组：

```
echo "<input type='text' name='fob[$id]' />"; 
```

然后在 PHP 中你可以迭代`$_POST['fob']`：

```
foreach ($_POST['fob'] as $id => $value) {
  // Do stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:34:23.463

您应该在输入名称上使用数组。像这样：`name="fob[$id]"`

然后你可以简单地做一个`foreach($_POST["fob"] as $id => $value)`来获取值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T08:37:51.587

根据评论更新，假设`$id`是从 var 获得的整数`$_SESSION`，您可以将其存储到数组中：

```
$fob[$id] = $_POST['fob-' . $id]; 
```

# c# - 如何每 20 天启动一些方法（Windows Phone）

> ID：10992935
> 
> 赞同：1
> 
> 时间：2012-06-12T08:24:09.050
> 
> 标签：c#, silverlight, windows-phone-7

在我的 Windows Phone Applicarion 中，我需要每 20 天实现一次启动某个方法的逻辑，我该如何实现呢？

```
public void Method()
{
//some logic

} 
```

**更新** 例如我可以修复某些方法的第一次启动，然后每次启动应用程序我都会修复当前日期时间并计算差异，如果某些方法的最后一次和第一次启动之间的差异将超过 30 天我将启动 Method()。那么如何计算差异（天）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:29:53.463

不容易！

最适合此操作的是使用计划代理 - 但这大约每 30 分钟运行一次 - 因此您需要跟踪上次运行时间并采取相应措施。

另一个问题是，如果与计划任务关联的应用程序至少每 14 天都没有运行，则该任务将被禁用。

HTH，鲁珀特。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:00:56.660

因此，您想知道距您上次在应用中执行操作是否已过去 20 天（或更多？）。

假设您将要计算的日期保存为`DateTime`被调用的`savedDate`. （我假设您可以毫无问题地将其放入并从 IsolatedStorage 中检索。）
然后您可以针对当前日期进行简单测试：

```
if (saveddate.Date.AddDays(20) <= DateTime.UtcNow.Date)
{
    // Do your every 20 days action here 
    // and then probably reset savedDate to the current date?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:34:19.887

推送通知怎么样。你让服务器来处理这个。当时间准备好时，它会向手机发送通知，手机会做相应的事情。

编辑：要找到差异，您可以执行以下操作

```
TimeSpan span = endTime.Subtract(startTime);  
if(span.Days >= 20)
   Method(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T09:02:03.687

您可以将上次运行该方法的时间存储在[隔离存储](http://msdn.microsoft.com/en-us/library/ff402541%28v=vs.92%29.aspx)中，然后使用计划代理每 30 分钟运行一次：

```
if (DateTime.Now.Subtract(LastTimeRanFromIsolatedStorage) > TimeSpan.FromDays(20))
{
   Method();
} 
```

# c# - XML list creation based on a model class in c#

> ID：10992948
> 
> 赞同：0
> 
> 时间：2012-06-12T08:25:00.873
> 
> 标签：c#, xml-serialization

Hai All i want to create an XML file with following format

```
<myFiles>
<name>myname</name>
<place>myplace</place>
<mydata>
    <today>1-1-2011</today>
    <time>1 PM</time>
    <driving>
       <car>audi</car>
       <bus>volvo</bus>
    </driving>
</mydata>
<mydata>
    <today>1-1-2011</today>
    <time>1 PM</time>
    <driving>
      <car>audi</car>
      <bus>volvo</bus>             
    </driving>
</mydata>
</myFiles> 
```

For creating this i am using

```
class myfile
{
public string name {get;set;}
public string place {get;set;}
public list<mydata> mydata {get;set;}
} 
```

then also public claa mydata { ...... } fro XML building i am using

```
static public void SerializeToXMLList(List<Movie> movies)
{
XmlSerializer serializer = new XmlSerializer(typeof(List<Movie>));
TextWriter textWriter = new StreamWriter(@"C:\movie.xml");
serializer.Serialize(textWriter, movies);
textWriter.Close();
} 
```

But it will give me output like

```
<myFiles>
<name>myname</name>
<place>myplace</place>
<mydata>
   <mydata>
   <today>1-1-2011</today>
   <time>1 PM</time>
   <driving>
     <car>audi</car>
     <bus>volvo</bus>
   </driving>
   </mydata>
   <mydata>
   <today>1-1-2011</today>
   <time>1 PM</time>
   <driving>
      <car>audi</car>
      <bus>volvo</bus>
   </driving>
</mydata>
</mydata>
</myFiles> 
```

so there was number of list with in mydata list with class name

How can i avoid that..., If any one knw pls help me..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:37:25.720

The reason for that is your have a property called 'mydata', and the objects within it are of type 'mydata'.

It's actually good practice to contain an array in an element like this so to be honest I think the layout you're getting is better, although you should probably choose a better name for the property, such as 'mydatacollection' or 'mydatalist'.

However, there's more information here on the attributes you can use to control the serialization: [http://msdn.microsoft.com/en-us/library/2baksw0z%28v=vs.80%29.aspx#Y570](http://msdn.microsoft.com/en-us/library/2baksw0z%28v=vs.80%29.aspx#Y570)

@Totero posted a link to another good question on this subject if you really do want to do this.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:38:09.530

The reason it is creating nested containers is becuase you have an array mydata of mydata objects.

```
<mydata>
   <mydata>
   ....
   </mydata>
</mydata> 
```

is the correct way of representing this. The quickest way to get the file in the exact format you want is to rename the array to something like "EraseTag". Open the XML file as a text file and remove all instances of `"<EraseTag>"`.

However I want to reiterate the 2nd serialized example you gave is correct and as such can be reverted back to the object form by deserialization.

If you want to leave these tags out of the serialisation phase then you need to look at the following post:

[XML Deserialization and Loose Array Items](https://stackoverflow.com/questions/534451/xml-deserialization-and-loose-array-items)

and add a `[Serializable]` tag around your class.

# java - Java中的serialVersionUID

> ID：10992949
> 
> 赞同：-1
> 
> 时间：2012-06-12T08:25:22.513
> 
> 标签：java, serialization

> **可能重复：**
> [Java 中的序列化版本 uid](https://stackoverflow.com/questions/10241554/serialization-version-uid-in-java)

我们知道Java序列化机制忽略静态字段。如果是这样，那么反序列化器如何知道序列化器的serialVersionUID。serialVersionUID 始终是要序列化的类的静态字段。感谢您的帮助。

程

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T08:29:16.553

被`serializedVersionUID` *写入流*，即使它是静态的。

然后将其用于反序列化，以将其与当前可用版本的类进行比较。

请注意，它不是作为每个实例的一部分编写的，而是作为“ObjectStreamClass”的一部分，它为流中想要使用它的所有实例定义类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:26:53.213

`Class`被反序列化的是所有`Classpath`数据都是已知的。

更新（感谢@Thilo）：

```
"and equally importantly, the serializedVersionUID is written to the stream, even though it is static." – Thilo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:38:23.723

`serialVersionUID`从“序列化”对象的未存储实例的类中检索。如果已定义，则将其“存储”在已编译的字节码中，否则将使用某种算法进行计算。

请参阅下面实现`Serializable`接口的类的字节码。

# duplicates - 一键打印页面函数调用不止一次jquery

> ID：10992950
> 
> 赞同：0
> 
> 时间：2012-06-12T08:25:22.543
> 
> 标签：duplicates, live, jquery, die

```
$(document).ready(function() {

   $('#posHold tbody tr').die();
   $('#posHold tbody tr').live('click', function () {

   $(".btnPrint").printPage({
        url: "receipts/void.jsp?ID=111",
        message:"Your document is being created"
    });

    $('.btnPrint').trigger('click');

    });
 }); 
```

当我单击 tr 一次时，它会打印到打印机一次。当我再次单击 tr 时，它会打印到打印机 2 次，然后单击 3 次，依此类推.....即使我也在 .live() 之前调用 .die()

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:35:02.150

尝试这个：

```
$(document).ready(function() {
   $('a.btnPrint').printPage({
        url: "receipts/void.jsp?ID=111",
        message:"Your document is being created"
    });
 }); 
```

# visual-studio-2010 - 包含“.com”的 Visual Studio 项目名称

> ID：10992959
> 
> 赞同：1
> 
> 时间：2012-06-12T08:25:57.020
> 
> 标签：visual-studio-2010, project, naming

我使用 Visual Studio 2010。我想创建一个项目（Windows 窗体应用程序），其名称为：

MyCompany.MyApplication.CommunicationConfiguration.Test

如果我想运行这个项目，我会收到错误消息：

```
Error while trying to run project: Unable to start program '...\bin\Debug\MyCompany.MyApplication.CommunicationConfiguration.Test.exe'. Access is denied. 
```

在尝试使用不同的名称和选项后，我发现如果项目名称包含“.Com”，Visual Studio 就会出现问题。

因此，像 '.Com.Test' 、 'HelloWorld.Communication' 等名称会引发异常。但如果 '.com' 是名称的结尾，则没有问题。

我现在的问题是，如果有人知道是否有一条规则说项目名称中不允许使用“.com”，除非在名称的末尾。我在互联网上没有找到任何规则，而且 Visual Studio 也不会通过在名称中创建一个带有“.com”的项目来发出警告。

在此先感谢您的帮助！

问候

rhe1980

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:05:07.020

Windows 7 x64，我根本没有对此进行复制。这几乎肯定是环境问题，很可能与您的反恶意软件有关。看起来它可能会摸索文件名的解析，当它包含多个点时放弃幽灵。问题的 .com 部分有点重要，它是 MS-DOS 时代 16 位不可重定位程序的文件扩展名。

在另一台机器上试试这个。您可以尝试使用Taskmgr.exe 逐个杀死进程以找到麻烦制造者。

# hibernate - 如何在hibernate中实现对两个表的查询数据？

> ID：10992960
> 
> 赞同：-6
> 
> 时间：2012-06-12T08:26:16.027
> 
> 标签：hibernate

如何在休眠中实现此查询？

```
select tab1.name from table1 tab1, table2 tab2 where table1.id = table2.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:32:51.587

你必须使用投影api

```
Criteria criteria = session.createCriteria(table1.class);
criteria.setFetchMode("table2", FetchMode.JOIN).add(Restrictions.eq("id", 2));
ProjectionList proList = Projections.projectionList();
proList.add(Projections.property("name"), name);
criteria.setProjection(proList);
List list = criteria.list(); 
```

上面的例子中也没有使用别名，但是你可以使用别名，它使用起来非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:39:37.233

很好的解决方案：

两个表之间存在关系。这种关系是一对一、一对多、多对一或多对多。在您的映射中创建此关系。例如，如果 table2 是 table1 的子级，则在 table1 类和映射中，您创建一个具有上述关系之一的属性，您只需使用 HQL 语句“from table1”加载 table1（带有可选的 where 条件；也可以选择您可以指定两个表之间的内连接），并且您使用`table1.getTable2()`（1:1 或 n:1 关系）或`table1.getTable2List()`（1:n 或 n:m 关系）访问 table2。

马虎的解决方案（但如果仅在特殊情况下使用 select 绝对可以）：

在 HQL`select table1.col1, table1.col2, table2.col1 from table1 inner join table2 where ...`中执行并评估对象数组列表，或者执行`select new Tabble1Table2Pojo(table1.col1, table1.col2, table2.col1) from table1 inner join table2 where ...`并评估 Tabble1Table2Pojo 列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T08:53:13.090

我想这会对你有所帮助。

```
Criteria criteria = session.createCriteria(table1.class);
criteria.setFetchMode("table2", FetchMode.JOIN).add(Restrictions.eq("id", 2));
ProjectionList proList = Projections.projectionList();
proList.add(Projections.property("name"), name);
criteria.setProjection(proList);
List list = criteria.list(); 
```

# html - HTML5 Canvas 绘制一条方向和尺寸发生变化的线

> ID：10992963
> 
> 赞同：0
> 
> 时间：2012-06-12T08:26:23.917
> 
> 标签：html, canvas, html5-canvas

首先，我不是 HTML5 的专家。几天前我开始用 HTML5 做一些事情。

其次，对不起我的英语，我不是很擅长，可能会犯一些错误。

这是我的问题...

我可以用两次鼠标点击画一条线，这条线从第一个点击点开始，到第二个点击点结束。

但我想创建一条从第一个点击点开始的线，根据鼠标的位置改变它的方向和尺寸，然后在第二个点击点结束。（就像 Android 中的图形密码系统。）

这可能吗？

我发现一些代码只能通过两次鼠标单击来绘制一条线，我对其进行了一些更改并自己添加了一些代码。这是我的最终代码：

```
<!DOCTYPE HTML>
<html>

  <head>

    <style>
        body {
            margin: 0px;
            padding: 0px;
        }
            #myCanvas {
            border: 1px solid #9C9898;
        }
    </style>

    <script src="jquery.js"></script>
    <script type="text/javascript">

        $(function(){

            var canvas = document.getElementById("myCanvas");
            var context = canvas.getContext("2d");

            var point1 = new Array();
            point1['x'] = false;
            point1['y'] = false;
            var point2 = new Array();
            point2['x'] = false;
            point2['y'] = false;

            $(document).click(function(event){

                if ( false === point1['x'] || false === point1['y']) {

                    var posX1 = event.pageX;
                    var posY1 = event.pageY;

                    point1['x'] = posX1;
                    point1['y'] = posY1;

                }

                else if ( false === point2['x'] || false === point2['y'] ) {

                    var posX2 = event.pageX;            
                    var posY2 = event.pageY;

                    point2['x'] = posX2;
                    point2['y'] = posY2;
                    console.log("second");

                    context.moveTo(point1['x'], point1['y']);
                    context.lineTo(point2['x'], point2['y']);
                    context.stroke();

                    point1['x'] = point2['x'];
                    point1['y'] = point2['y'];  
                    point2['x'] = false;
                    point2['y'] = false;

                }

            });

        });

    </script>

  </head>

  <body>
    <canvas id="myCanvas" width="500" height="500"></canvas>
  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:04:05.047

当您移动鼠标时，您将需要某种动画循环来绘制从第一次单击到鼠标坐标的线（每隔几毫秒清除画布并使用鼠标的新位置更新画布上的线），然后一旦发生第二次单击，在最终绘制后停止动画循环，将线条留在画布上。

将两个画布放在彼此的顶部可能也是值得的（一个用于绘制动画线“未来”，另一个用于实际存储图像）。这样，当您完成绘制第一条线并开始第二条线时，随后的清除不会影响下方画布上存储的线。

希望这可以帮助。

问候，加里

# java - 在每个不扩展 OrmLiteBaseActivity 或 Activity 的类中使用 OrmLite

> ID：10992973
> 
> 赞同：0
> 
> 时间：2012-06-12T08:27:11.173
> 
> 标签：java, android, ormlite

我使用 OrmLite，我想在一个不扩展 OrmLiteBaseActivity 的类中获取帮助类（然后获取一个 dao 类）。

我阅读了有关[使用 Android](http://ormlite.com/docs/android)的文档，并查看了他们的[无基类示例](http://goo.gl/5Bmfw)。

因为我的课不是 Activity ：

1.  它不是上下文，因此 OpenHelperManager.getHelper 无法工作。

    我知道我可以使用应用程序从应用程序的每个部分获取上下文，但有更好的方法吗？

2.  它没有要覆盖的 onDestroy 。

    我可以将逻辑放在函数的末尾：

    ```
    if (databaseHelper != null) {
        OpenHelperManager.releaseHelper();
        databaseHelper = null;
    } 
    ```

    但是，如果我的班级变得更复杂，那么好的行为是什么？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:30:15.393

一般的经验法则是，您应该创建一个单独的帮助对象，然后在程序的所有部分都使用它时释放它。这意味着如果您有不同的线程正在使用帮助程序，您将需要保留某种使用计数器——也许使用`AtomicInteger`. 当每个班级都要求帮助者时，第一次创建它，但之后每次都会增加计数器。当他们使用助手完成时，他们递减计数器。当计数器变为 0 时，您将其从`OpenHelperManager`.

> 它不是上下文，因此 OpenHelperManager.getHelper 无法工作。

您将需要以`Context`某种方式获得。只要它有效，使用该应用程序就应该没问题。

> 它没有要覆盖的 onDestroy

但是你的程序的一部分*确实*有`onDestroy`. 您将不得不从已有的地方应用应用程序的其他部分——*也许*`onDestroy`通过调用静态`destroy()`方法。

> 但是，如果我的课程变得更复杂，那么好的行为是什么？

即使使用复杂的应用程序，我也没有看到上述任何问题。如果您想设置一个注册/注销类型的配置，以便您的类构造它们向某个中心类注册，然后在最后将它们关闭。

希望有些帮助。

# matlab - 如何在 MATLAB 中有效地编码位串？

> ID：10992974
> 
> 赞同：2
> 
> 时间：2012-06-12T08:27:12.857
> 
> 标签：matlab, encoding, bit-manipulation

我想在 MATLAB 中尽可能高效地将整数向量（uint8）存储为（空间）。到目前为止，我正在使用[arithenco](http://www.mathworks.ch/help/toolbox/comm/ref/arithenco.html)对向量进行编码：

```
bits = arithenco(z, counts); 
```

好消息是它返回一个位向量。坏事是这些位以双精度形式存储。这意味着返回的向量大约是原始 uint8 向量的 64 倍，而整个想法是使事物更小。

那么是否有一种简单（且运行时高效）的方法来编码这些伪位，以便我真正获得空间改进？

我想出的唯一解决方案是使用[bitset](http://www.mathworks.ch/help/techdoc/ref/bitset.html)将所有这些位再次存储在 uint32 的向量中，但这似乎很麻烦而且速度不是很快，因为我必须遍历整个位向量明确地。

注意：我不能为此使用 Java API，否则这会相对容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:09:46.810

与您的解决方案类似，但仅使用核心 MATLAB 函数：

```
%# some random sequence of bits
bits = rand(123,1) > 0.5;

%# reshape each 8 bits as a column (with zero-padding if necessary)
numBits = numel(bits);
bits8 = false(8, ceil(numBits/8));
bits8(1:numBits) = bits(:);

%# convert each column to uint8
bits_packed = uint8( bin2dec(char(bits8'+'0')) ); 
```

比较尺寸：

```
>> whos bits bits_packed
  Name               Size            Bytes  Class      Attributes

  bits             123x1               123  logical              
  bits_packed       16x1                16  uint8 
```

* * *

解压/恢复原始位：

```
%# unpack
b = logical(dec2bin(bits_packed)' - '0');
b = b(:);

%# sanity check
isequal(bits, b(1:numBits)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:42:52.997

经过一番搜索和尝试，我终于想出了这个解决方案：

```
bitCount = size(bits, 2);
bits8 = zeros(ceil(bitCount/8), 8);
bits8(1:bitCount) = bits;           % Reshape to (pseudo-)8-bit representation
comp = uint8(bi2de(bits8));         % Convert to efficient byte representation 
```

这里的关键部分是[bi2de](http://www.mathworks.ch/help/toolbox/comm/ref/bi2de.html)函数，它“将二进制行向量 b 转换为非负十进制整数”。要再次获取这些位，可以使用[de2bi函数。](http://www.mathworks.ch/help/toolbox/comm/ref/de2bi.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:29:35.973

您可以将它们转换为`logical`：

```
 bitsLogical = logical(bits); 
```

这在内存中应该更有效。但是你仍然会有转换步骤。因此，最好的办法是深入`arithenco`研究并将其更改为首先返回逻辑。

* * *

**编辑** 正如 OP 所说的那样，这不会被打包为位，而是作为字节。仍然是一个改进`double`。

# python - python项目特定模块安装方法

> ID：10992976
> 
> 赞同：2
> 
> 时间：2012-06-12T08:27:15.180
> 
> 标签：python, module

我在 PHP 方面经验丰富，最近开始学习 Python，现在我正在使用 django 创建一个小型 Web 项目。我有一个关于在 Python 和 django 中安装模块的方法的概念性问题。

示例：根据我的项目的预期需求，我搜索并下载了 django_openid 模块。显然我想将它安装到我的项目中。但是，当我按照规定的方式（python setup.py install）进行操作时，它会将其作为 python 模块安装到 python 目录中。因此，这个模块变得不是项目特定的，而是系统范围的。

那么，在 python 中安装项目特定模块的一般正确方法是什么？根据我的 PHP 经验，将高级功能模块安装到 python 本身看起来很奇怪。我宁愿期望它安装在项目库中并在运行时包含在项目中。

还是我在这里丢失了一些重要的东西？

我已经用谷歌搜索了，但只要这是一个概念性方法问题 - 在这种情况下，关键字搜索效果不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:39:39.853

正确的方法是使用[virtualenv](http://www.virtualenv.org/en/latest/index.html)，它允许您在每个项目的隔离环境中安装模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:34:37.237

从技术上讲，要“安装”任何 Python 模块，您只需将其添加到`sys.path`变量中，以便 Python 可以找到并导入它。

django 应用程序也是如此，它们是 Python 模块。只要 Python 可以找到并导入 django 应用程序，您只需将其添加到设置中的 INSTALLED_APPS （可能还有一些通常在应用程序中描述的步骤，例如添加 url 等）。

# intellisense - Intellisense 和代码建议在 Visual Studio 2012 Ultimate RC 中不起作用

> ID：10992983
> 
> 赞同：229
> 
> 时间：2012-06-12T08:27:49.610
> 
> 标签：intellisense, visual-studio-2012, logfile

`Ctrl`我刚刚下载并安装了 Visual Studio 2012 Ultimate RC，但我遇到了智能感知问题：在我按下+之前它不起作用`Space`。代码建议也被禁用（例如方法参数）。

我认为问题出在 VS 安装上，因为在该过程结束时会显示以下消息：“**事件日志文件已满**”。

为什么我有这个问题，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-12-24T18:40:43.660

去

`Tools->Options->Text Editor->C# (or All Languages)->General`

并在右侧窗格中启用`Auto List Members`和。`Parameter Information`

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2013-02-25T17:04:42.523

重新启动 VS2012 应该可以解决问题。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-10-25T20:21:13.643

看看这个帖子[在这里](https://stackoverflow.com/questions/8902232/how-to-turn-intellisense-on-in-visual-studio-2010)。

这对我有用：

删除此文件夹中的文件。与2010：

```
 %AppData%\Microsoft\VisualStudio\10.0\ReflectedSchemas 
```

对比2012；

```
%AppData%\Microsoft\VisualStudio\11.0\ReflectedSchemas 
```

**VS终极2013；**

```
%AppData%\Microsoft\VisualStudio\12.0\ReflectedSchemas 
```

**VS 专业 2015；**

```
%AppData%\Microsoft\VisualStudio\14.0\ReflectedSchemas 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-01-16T08:35:57.967

另一种可能的解决方案是完全重置设置。这就是为我解决的问题：

`Tools->Import and Export settings->Reset all settings.`

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-05-23T19:57:18.633

A. 保存或导出您的导入/导出设置：

**工具->导入和导出设置**

B. 执行导入/导出重置：

**工具->导入和导出设置->重置所有设置。**

C. 返回并重新加载您的原始设置！Intellisense 有效，您恢复了原始设置！

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-02-17T01:34:51.987

我用这个来解决它，去 cmd 行

```
devenv.exe /setup /resetuserdata /resetsettings 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-07T10:52:42.937

这里的基本思想是强制重新同步 Intellisense 正在使用的数据库。

如果引用是针对您的解决方案中的项目。删除项目。然后使用浏览选项从您刚刚删除的项目的确切路径中添加引用。快速构建并检查以确保正确获取参考。现在将旧项目添加回解决方案并删除旧引用并将其添加为解决方案的一部分。

这种强制重新同步数据库的想法也可以通过其他方式完成。例如，使用绝对文件夹路径。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-02-02T13:07:09.497

[![在此处输入图像描述](../Images/fde8265c86ece9a15d78a613b91a7407.png)](https://i.stack.imgur.com/e1qIP.png)

1.  转到工具-> 选项。
2.  确保选中上述复选框。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-01-30T09:49:39.657

Resharper->Options->IntelliSense->General 设置为 'Visual Studio native IntelliSense...'

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-20T21:55:49.617

这也让我感到沮丧，但我想出了自己的答案。重新启动确实有帮助，但我找到了遇到麻烦的原因：我复制并粘贴了一个 ASP 面板，其中包含我需要重新使用的控件。我只有第一个 Div 标签中的那些工作。所有其他的都需要设置，所以我说“啊哈......让我注释掉剩余的未设置的 Div 标签......”果然，智能感知又回来了。

因此，如果光标位于代码错误下方，它不仅无法工作，而且如果你是像我这样的复制/粘贴类型，它也可能无法工作。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-05T16:37:44.690

我的解决方案（VS 2013）是以管理员身份运行

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-07-20T16:49:41.430

我的快速解决方案是关闭文本编辑器区域中所有打开的文件，然后从解决方案资源管理器中再次重新打开它们。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-12-02T12:04:30.367

它非常简单，

1.  关闭visual studio（有解决方案）（记住配置和解决方案类型并启动项目）
2.  转到解决方案路径
3.  删除解决方案名称.suo
4.  再次打开解决方案
5.  设置配置和解决方案类型并启动项目（如果已更改）
6.  构建和检查

发生的原因在我的情况下，我更改了某些项目的引用

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-11-12T16:37:46.747

在我的情况下`.csproj`，文件已损坏，Visual Studio 从解决方案中排除了一些类文件（但它们在 Visual Studio 中仍然可见，因此乍一看问题并不明显）。在这些文件中，智能感知不可用。所以解决方法是将文件添加回解决方案。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-14T14:11:55.057

没有一个解决方案对我有用。我注意到问题只发生在一个 xaml 文件中，而不是其他 xaml 或 c# 文件中。

我有一个名为 QuickConverter 的扩展，它允许使用内联转换器创建自定义绑定。这与 Intellisense 混淆了，并且在构建或运行应用程序时未将其检测为错误。

我的建议是：

*   检查 Intellisense 是否停止在所有文件中工作或仅在特定文件中停止工作
*   如果只是一个文件，寻找红色或蓝色的波浪线，你会找到罪魁祸首

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-08-23T14:40:38.547

我偶尔会遇到与OP相同的问题。

不幸的是，上述解决方案都不适合我。-- 我还从互联网上搜索了其他可能的解决方案，包括微软的 VS/windows 论坛，但没有找到答案。

但是当我关闭VS解决方案时，有一条消息要求我下载并安装“ [Microsoft SQL Server Compact 4.0](http://www.microsoft.com/en-US/download/details.aspx?id=17876) ”；根据这个提示，我终于解决了这个问题。

我希望这一发现对可能遇到同样问题的其他人有所帮助。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-02-27T11:41:34.230

两周以来我一直面临这个问题，最后使用一个名为 Process Monitor (ProcMon.exe) 的 Sysinternal 工具解决了这个问题。问题与自动更新设置有关。我应用了以下解决方案并使其正常工作

解决方法：工具->选项->环境->扩展和更新->（取消勾选）自动检查更新->确定

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-08-26T15:59:45.487

一种解决方案是禁用 resharper 或拼写检查扩展并重新启动。当然，这并不理想。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-01-21T06:10:45.037

通常，当我从互联网上复制一些带有破坏 Intellisense 的特殊字符的片段时，我会遇到同样的问题。

我发生了几次，我在删除文件并创建一个新文件后发现了问题，现在当我遇到同样的问题时，我首先重新启动Visual Studio，如果这不能解决问题，我删除最后一个我从互联网上复制并手动完成的片段，他们的问题就消失了。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-08-13T02:46:28.647

有时你的代码语法有错误，比如你使用“in”，它必须是“...'....” 为了帮助你快速发现问题，你点击**设计按钮**，vs尝试渲染，它会显示线条错误的

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-10-26T08:51:33.607

我刚刚遇到过这种情况——而且（虽然不是很明显）这是由于 Resharper (R#) 在许可问题期间被禁用。

启用 Resharper 为我解决了这个问题！

# javascript - jQuery data() 返回未定义，attr() 返回整数

> ID：10992984
> 
> 赞同：55
> 
> 时间：2012-06-12T08:28:00.923
> 
> 标签：javascript, jquery, jquery-attributes

我有以下代码：

```
alert($embellishment.data("embellishmentId"));
alert($embellishment.attr("data-embellishmentId")); 
```

第一个警报返回`undefined`，而第二个警报返回一个整数`3`。

[**-- 看演示 --**](http://jsfiddle.net/6Pdj6/)

我正在使用 jQuery 1.7.2 版（`data`我相信是在 1.4 版中添加的）

为什么是这样？`data()`如果它没有返回正确的值，我应该使用它吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-06-12T08:43:45.267

好的。我通过解释[jQuery docs](http://api.jquery.com/data/#data-html5)发现了问题。

当你写：

```
$embellishment.data("embellishmentId"); 
```

它由 jQuery 作为复合属性处理：

```
<div data-embellishment-id="3"></div> 
```

因此，要解决问题，您可以在数据键中使用小写字母，否则它只会解决不同的属性。

```
<!-- HTML -->
<div data-embellishmentid="3"></div>

// JavaScript
$embellishment.data("embellishmentid"); 
```

# wpf - WPF 树视图 ItemTemplate 和 ItemTemplateSelector 被忽略

> ID：10992985
> 
> 赞同：4
> 
> 时间：2012-06-12T08:28:04.463
> 
> 标签：wpf, vb.net, treeview, itemtemplate, itemtemplateselector

在我的应用程序中，每次 treeView 加载它的项目时，我都会收到此错误。此错误使我的应用程序加载速度变慢，并且至少需要两分钟才能加载。

错误是：`System.Windows.Data Error: 26 : ItemTemplate and ItemTemplateSelector are ignored for items already of the ItemsControl's container type; Type='TreeViewItem'`

我的树视图的 xaml 代码是：（我在我的 ViewModel 上使用 VB.net）

```
<TreeView ScrollViewer.VerticalScrollBarVisibility="Hidden" 
          ItemContainerStyle="{DynamicResource tviStyle}" 
          Background="#FFF0F0F0" BorderBrush="#FFE5E2DB" 
          IsEnabled="{Binding isTreeEnable}" 
          ItemsSource="{Binding PostcodeLijst}" 
          Margin="0" Name="dgStamOverzichtPostcode" /> 
```

ItemsSource 的绑定是从数据库填充的 ObservableCollection(Of TreeViewItem)。

我已经在谷歌中寻找答案，但到目前为止我一直无法找到它！有谁知道如何解决这个问题？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:39:35.613

与其在视图模型中创建 TreeViewItems 列表，不如创建一个对象列表来简单地描述您想要显示的数据，即使它很简单

```
class Item
{
   public string Header { get;set; }
} 
```

TreeViewItem 已经有一个与之关联的模板。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T08:43:43.427

您正在绑定已经是 UI 元素的元素（此处为：TreeViewItems）。通常，您将任何对象绑定到您的 itemsSource 和 ItemsContainerGenerator 然后为每个绑定项目创建 TreeViewItems。

这在您的情况下无法完成，您已经拥有 TreeViewItems，因此无法应用模板，这就是您收到此错误消息的原因。

你可以这样解决它：

a) 将 DataObjects 绑定到您的树，而不是 TreeViewItems，它们将自动创建

b) 将您的样式直接分配给您已有的 treeviewItems

另请参阅此[链接](https://stackoverflow.com/questions/2749060/wpf-custom-control-itemscontrol-template-not-being-applied)

# php - 使用向上和向下按钮向上或向下滚动页面横幅

> ID：10992987
> 
> 赞同：0
> 
> 时间：2012-06-12T08:28:24.947
> 
> 标签：php, javascript, html, scroll

我在标题“向上箭头”和“向下箭头”处放置了两个按钮。在内容区域，我放置了多个包含横幅图像的表格。如果我单击向上按钮，是否有可能第一个表将向上滚动并显示第二个表，如果它是最后一个表，它将向上滚动第一个表。我希望隐藏表格的其余部分，因为我仍然希望页脚图像位于表格下方的相同位置。

这是我的表格代码：

```
<div id="banner">
    <table width="750px" height="600px">
    <tr>
    <td><a href="sale_1.php"><img src="banner1.png"/></a></td>
    </tr>
    </table>

    <table width="750px" height="600px">
    <tr>
    <td><a href="sale_2.php"><img src="banner2.png"/></a></td>
    </tr>
    </table>

    <table width="750px" height="600px">
    <tr>
    <td><a href="sale_3.php"><img src="banner3.png"/></a></td>
    </tr>
    </table>
</div> 
```

按钮：

```
<table>
<tr>
<td><img src="images/up_arrow.png"/></td>
<td><img src="images/down_arrow.png"/></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:35:55.893

一种可能的方法：

1) 将要在其上进行脚本滚动的表格放入 div 中。

2）给div一个id

3) 您的按钮将调整 yourDiv.scrollTop 的值以向上或向下移动内容。

够清楚还是你需要一个例子？

# c# - 在 wp7 启动时显示联系人

> ID：10992990
> 
> 赞同：0
> 
> 时间：2012-06-12T08:28:50.143
> 
> 标签：c#, windows-phone-7

我正在为 wp7 创建一个电话拨号器。实际上我有一个样本 - [https://www.dropbox.com/s/hlqyhrx9aw6jwpq/Employees.zip](https://www.dropbox.com/s/hlqyhrx9aw6jwpq/Employees.zip)。但在这个示例中，它实际上下载了一些数据。但我需要的不是下载数据，而是需要在启动应用程序时自动显示默认**联系人。**联系人视觉必须像 PhoneCallTask​​ 即，就像默认的 windows phone 7 一样。例如见下图——

![在此处输入图像描述](../Images/cf57a637a7605b3fce261ad58497e11f.png)

谁能帮我？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:52:46.863

[AddressChooserTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.addresschoosertask%28v=VS.92%29.aspx)不会在这里帮助您吗？

它将启动联系人应用程序并允许用户选择联系人。完成任务后会引发一个事件。

开始任务：

```
var addressTask = new AddressChooserTask();
addressTask.Completed += AddressTaskCompleted;
addressTask.Show(); 
```

[处理接收AddressResult](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.addressresult%28v=VS.92%29.aspx) EventArgs的 Completed 事件。

```
private void AddressTaskCompleted(object sender, AddressResult e)
{
    if (e.TaskResult == TaskResult.OK)
    {
        this.displayName = e.DisplayName;
        //...etc.
    }
} 
```

另一种选择是使用[Contacts 类型](http://msdn.microsoft.com/en-us/library/microsoft.phone.userdata.contacts%28v=vs.92%29.aspx)。允许交互/查询用户的联系数据。更多信息可以在 MSDN 上找到：

[访问 Windows Phone 的联系人数据](http://msdn.microsoft.com/en-us/library/hh286416%28v=VS.92%29.aspx)

如果您可以查询数据，您可以自己构建这样的屏幕，从头开始。

查询联系人数据：

```
Contacts contacts = new Contacts();
contacts.SearchCompleted += ContactsSearchCompleted;
contacts.SearchAsync(String.Empty, FilterKind.None, "Contacts Test #1"); 
```

处理 SearchCompleted 事件。

```
private void ContactsSearchCompleted(object sender, ContactsSearchEventArgs e)
{       
    MessageBox.Show(e.Results.Count().ToString());
    //...
} 
```

使用获取的数据构建您自己的自定义屏幕。

# javascript - 在 envjs 中设置一个相对的 window.location.href

> ID：10992991
> 
> 赞同：4
> 
> 时间：2012-06-12T08:28:51.607
> 
> 标签：javascript, jenkins, jasmine, envjs

我正在使用 java 来运行 Envjs，以便在 Jasmine 中运行 javascript 单元测试。这将允许我在没有浏览器的情况下运行测试，并且更容易集成到 Jenkins（一个持续集成构建服务器）中。

我有一个 LoadSpecRunner.js 文件（Envjs 运行），它使用如下代码加载实际的 jasmine 测试运行器。

```
window.location.href = 'file:///c:/source/JasmineTest/SpecRunner.html'); 
```

问题是设置文件的完整 url 工作正常，而我设置相对路径的所有尝试都失败了。以下是我在返回的输出中设置相对 url 的一些尝试

```
window.location.href = Envjs.uri('../JasmineTest/SpecRunner.html'); 
```

或者

```
window.location.href = '../JasmineTest/SpecRunner.html'; 
```

> 无法打开文件 file://c/source/JasmineTest/SpecRunner.html
> Java 异常：java.net.UnknownHostException：c

```
window.location.href = window.location.href; 
```

> 无法打开文件 file://c/:/Source/jasmine-reporters/about:blank
> JavaException: java.net.UnknownHostException: c

有人有什么想法吗？

谢谢

切德

PS。进一步阅读我正在尝试做的事情：

[http://skaug.no/ingvald/2010/10/javascript_unit_testing/](http://skaug.no/ingvald/2010/10/javascript_unit_testing/)

[http://www.build-doctor.com/2010/12/08/javascript-bdd-jasmine/](http://www.build-doctor.com/2010/12/08/javascript-bdd-jasmine/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T10:07:29.213

我遇到了同样的问题并通过修改 *env.rhino.1.2.js*解决了它：

```
if (!base) {
    base = 'file://' +  Envjs.getcwd() + '/';
} 
```

->

```
if (!base) {
    base = 'file:///' +  Envjs.getcwd() + '/';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:11:16.810

希望我正确理解了您的查询 - 下面看起来如何？（如果我稍微偏离了一点，您可能需要调整 baseURL）。

功能;

```
function resolvePath (relativePath) {
  var protocol = "file:///c:/";
  var baseUrl = "source/JasmineTest";
  var reUpward = /\.\.\//g;
  var upwardCount = (relativePath.match(reUpward) || []).length;
  return protocol + (!upwardCount ? baseUrl : baseUrl.split("/").slice(0, -upwardCount).join("/")) + "/" + relativePath.replace(reUpward, "");
} 
```

示例调用；

```
resolvePath("SpecRunner.html");
// "file:///c:/source/JasmineTest/SpecRunner.html"
resolvePath("path/SpecRunner.html");
// "file:///c:/source/JasmineTest/path/SpecRunner.html"
resolvePath("../../SpecRunner.html");
// "file:///c://SpecRunner.html"
resolvePath("../SpecRunner.html");
// "file:///c:/source/SpecRunner.html"
resolvePath("SpecRunner.html");
// "file:///c:/source/JasmineTest/SpecRunner.html" 
```

这里还有一个较长的版本，应该更容易理解，和resolvePath一样；

```
function longerVersionOfResolvePath (relativePath) {
  var protocol = "file:///c:/";
  var baseUrl = "source/JasmineTest";
  var reUpward = /\.\.\//g;
  var upwardCount = (relativePath.match(reUpward) || []).length;

  var walkUpwards = upwardCount > 0;
  var relativePathWithUpwardStepsRemoved = relativePath.replace(reUpward, "");
  var folderWalkedUpTo = baseUrl.split("/").slice(0, -upwardCount).join("/");

  if (walkUpwards) {
    return protocol + folderWalkedUpTo + "/" + relativePathWithUpwardStepsRemoved;
  }
  else {
    return protocol + baseUrl + "/" + relativePath;
  }
} 
```

# internet-explorer - 无法通过 IE 上的跨域检索我的 XML

> ID：10992993
> 
> 赞同：0
> 
> 时间：2012-06-12T08:29:03.387
> 
> 标签：internet-explorer, cross-browser, xmlhttprequest, cross-domain

我从 W3C School 获取了这段代码，它可以在 Ie 和 Chrome 上完美运行而无需更改，但是当我用我的 url 更改 'url' 参数时，它只适用于 Chrome 而不是 IE：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function loadXMLDoc(url)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    txt="<table border='1'><tr><th>Title</th><th>Artist</th></tr>";
    x=xmlhttp.responseXML.documentElement.getElementsByTagName("produits");
    for (i=0;i<x.length;i++)
      {
      txt=txt + "<tr>";
      xx=x[i].getElementsByTagName("produit");
        {
        try
          {
          txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";
          }
        catch (er)
          {
          txt=txt + "<td> </td>";
          }
        }
      xx=x[i].getElementsByTagName("nomprod");
        {
        try
          {
          txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";
          }
        catch (er)
          {
          txt=txt + "<td> </td>";
          }
        }
      txt=txt + "</tr>";
      }
    txt=txt + "</table>";
    document.getElementById('txtCDInfo').innerHTML=txt;
    }
  }
xmlhttp.open("GET",url,true);
xmlhttp.send();
}
</script>
</head>
<body>

<div id="txtCDInfo">
<button onclick="loadXMLDoc('http://www.sosmalus.tm.fr/fexpat/webservices/choix_produits.php?dev_statut=1&dev_fdpaysid=AF&dev_fddeffet=2012-06-07&dev_fdnbadu=1&dev_fdnbenf=0&dev_fadnaiss_a_1=1952-06-19')">Get CD info</button>
</div>

</body>
</html> 
```

你知道这有什么问题吗？谢谢！

**PS：我已经`<?php header("Access-Control-Allow-Origin: *"); ?>`在远程页面中添加了**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:49:15.650

我不认为 IE 在 IE10 之前支持 CORS。原始代码适用于 W3Schools 可能是因为它们的来源相同。

# .net - 使用 WebDav 协议和 VB.NET 将文件上传到共享点

> ID：10992995
> 
> 赞同：1
> 
> 时间：2012-06-12T08:29:08.657
> 
> 标签：.net, vb.net, upload, webdav

我正在尝试将文件上传到共享点。授权工作正常，但最终以 status`OK`而不是`CREATED`. 最终不会创建文件。我不明白为什么会这样，因为我使用了似乎对其他人有用的方法（没有抱怨）。这是我正在使用的代码：

```
Public Sub Create()
    Dim szURL1 = "http://host.domain.com/p/projects/4/Proposal/cze.txt"

    Dim szContent = String.Format("Date/Time: {0} {1}", DateTime.Now.ToShortDateString(), DateTime.Now.ToLongTimeString())

    'Define username and password strings.
    Dim domain = "DOMAIN_NAME"
    Dim szUsername = "USER_NAME"
    Dim szPassword = "PASSWORD"

    Dim httpPutRequest As HttpWebRequest = DirectCast(WebRequest.Create(szURL1), HttpWebRequest)
    httpPutRequest.Credentials = New NetworkCredential(szUsername, szPassword, domain)
    httpPutRequest.PreAuthenticate = True
    httpPutRequest.Method = "PUT"
    httpPutRequest.Headers.Add("Overwrite", "T")
    httpPutRequest.ContentLength = szContent.Length

    'Optional, but allows for larger files.
    httpPutRequest.SendChunked = True

    Dim requestStream = httpPutRequest.GetRequestStream()

    'Write the string to the destination as a text file.
    requestStream.Write(System.Text.Encoding.UTF8.GetBytes(DirectCast(szContent, String)), 0, szContent.Length)

    'Close the request stream.
    requestStream.Close()

    'Retrieve the response.
    Dim httpPutResponse As HttpWebResponse = DirectCast(httpPutRequest.GetResponse(), HttpWebResponse)
    Debug.WriteLine("PUT Response #1: {0}", httpPutResponse.StatusDescription)
End Sub 
```

这产生：`PUT Response #1: OK`而不是`PUT Response #1: CREATED`

我把代码从： http: [//blogs.iis.net/robert_mcmurray/archive/2010/02/09/sending-webdav-requests-in-net.aspx](http://blogs.iis.net/robert_mcmurray/archive/2010/02/09/sending-webdav-requests-in-net.aspx)翻译成VB，但我不认为翻译是问题所在。

有任何想法吗？

编辑：我检查了原始 C# 代码，结果是一样的。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:38:01.717

刚刚用另一种语言处理过这个问题，我建议禁用**SendChunked**。两者不应混用，SharePoint 2010 似乎不喜欢上传未知大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:06:52.337

我不知道为什么上述方法不起作用。我写了这个简单的代码，它可以工作：

```
var client = new WebClient();
client.Credentials = new NetworkCredential(username, password, domain);
client.UploadData("http://host.domain.com/p/projects/4/Proposal/cze.txt", "PUT", Encoding.UTF8.GetBytes(DateTime.Now.ToString())); 
```

如果有人可以回答原始问题，我会投票并接受它作为答案。

# php - Yii 奇怪行为：CGridView + group + with

> ID：10992997
> 
> 赞同：4
> 
> 时间：2012-06-12T08:29:17.207
> 
> 标签：php, mysql, gridview, yii

我有一个奇怪的行为，我将尝试解释。

我正在构建一个报告系统，每个用户都可以让其他用户报告他们的个人资料、图片或消息。

在后端，我想显示一个[CGridView](http://www.yiiframework.com/doc/api/1.1/CGridView)，其中每个用户都出现在一行中，并且报告了总次数。

为此，我正在添加`group`标准并且效果很好。

但是，如果我想按任何相关字段过滤视图，我必须添加`with`到条件中，它适用于过滤或搜索，但结果的总显示不正确，**显示 15 个结果中的 1-2 个**当它应该显示在报告表中**显示 2 个结果中的 1-2 个**时，我有 15 行但只有两个用户，还添加了一个不存在的分页。

模型/报告.php

```
public function relations()
{
    return array(
        'reported' => array(self::BELONGS_TO, 'User', 'reported_id'),
    );
}

public function search()
{
    $criteria = new CDbCriteria();
    $criteria->select = array(
        '*',
        'count(*) as reports_count',
    );
    $criteria->group = 't.reported_id';
    $criteria->with = array('reported');

    return new CActiveDataProvider($this, array(
        'criteria' => $criteria,
        'sort'=>array(
            'attributes'=>array(
                'status_search'=>array(
                    'asc'=>'reported.user_status_id',
                    'desc'=>'reported.user_status_id DESC',
                ),
                'reports_count' => array(
                    'asc' => 'reports_count ASC',
                    'desc' => 'reports_count DESC',
                ),
                '*',
            ),
        ),
        ));
} 
```

**更新：**我找到了使用 join 而不是 with 并选择我需要的字段而不是使用 * 选择所有字段的解决方案：

```
$criteria->select = array(
        't.id, t.reported_id',
        'count(*) as reports_count',
    );
$criteria->group = 't.reported_id';
$criteria->join = 'LEFT JOIN user u on u.id = t.reported_id'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:54:39.600

当使用 CActiveDataprovider 时，YII 不使用标准中建立的“with”来执行“totalItemCount”，所以它会说没有 with 的结果总数。我建议您手动添加连接条件来克服这个问题:)

```
$criteria->join = 'left join User u on u.id=t.reported_id' 
```

并删除 $criteria->select 并使用 CActiveDataProvider 的“totalItemCount”方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T13:12:59.597

我在 yii 的论坛上找到了它，由一个名为“bennouna”的用户发布。它对我有用。

```
public function groupedSearch() {
  $criteria = new CDbCriteria;
  $criteria->select = '…';
  $criteria->with = array(…);
  $criteria->group = '…';
  $dp = new CActiveDataProvider($this, array('criteria'=>$criteria));
  $dp->setTotalItemCount(count($this->findAll($criteria)));
  return $dp;
} 
```