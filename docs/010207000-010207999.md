# StackOverflow 问答 10207000-10207999

# html - 单击元素时父元素的活动状态

> ID：10207000
> 
> 赞同：0
> 
> 时间：2012-04-18T09:55:28.257
> 
> 标签：html, css

我正在创建一个按钮（实际上只是一个链接），其设计相当复杂，并且由于我正在针对 IE8 进行优化，因此无法使用 CSS3 制作。因此，我在`<span>`内部放置了一个`<a>`，并在两者上放置了一个背景图像。

图像在`:hover`和上变化`:active`。它在所有浏览器中都非常好用，但在 IE 中则不然。`:hover`工作正常，但是单击 时，不会触发父级`<span>`的状态。这有点道理，但我以前见过它工作，所以我想一定有一些解决方法？`:active``<a>`

这是一个小提琴：http: [//jsfiddle.net/TheNix/EtjL3/](http://jsfiddle.net/TheNix/EtjL3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:43:22.437

您可以尝试使用以下 jQuery 在单击时添加 css 内联。

```
 $("a, span").click(function(){
                  $(this).css("background", "green")
                  $(this).find("span").css("background", "lime")    
              }); 
```

这是一个 jsFiddle [http://jsfiddle.net/ollie/r5NDw/1/](http://jsfiddle.net/ollie/r5NDw/1/)

[或者，您可以使用addClass()](http://api.jquery.com/addClass/)在单击时添加类；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:10:58.183

您可以使用或`css class`为活动状态设置 a 。`jquery``javascript`

**编辑**

你可以像这样设置一个css类......

```
$(document).ready(function() {
    $("a span").click(function() {
      $(this).addClass("active");
      $(this).parent().addClass("active");
    });     
}); 
```

和 CSS 样式...

```
a.active { background:green; }
a.active span { background:lime; } ​ 
```

# c++ - sizeof 成员计算错误

> ID：10207002
> 
> 赞同：12
> 
> 时间：2012-04-18T09:55:29.920
> 
> 标签：c++

我有这样的结构（出于某种原因，我不能只使用数组）：

```
 struct OperatorData 
  {
    char m_record_0[RIX_OPERATOR_CONFIG_SIZE];
    char m_record_1[RIX_OPERATOR_CONFIG_SIZE];
    //....
    char m_record_9[RIX_OPERATOR_CONFIG_SIZE];
  }; 
```

我正在尝试在编译时计算字段数量：

```
enum {fieldsAmount = sizeof(OperatorData) / sizeof(OperatorData::m_record_0)}; 
```

编译器会报告这样的消息：

```
Error:  #245: a nonstatic member reference must be relative to a specific object
  enum{fieldsAmount = sizeof(OperatorData) / sizeof(OperatorData::m_record_0)};
                                                                  ^ 
```

我使用keil uVision3 V3.60。我将枚举声明放在结构内部或外部的哪个位置都没有关系。为什么编译器不能接受这个成员的大小？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T10:01:16.163

It looks like your compiler doesn't support C++11 that allows the use of `Type::member` in unevaluated expressions. You'll have to manufacture an expression of the correct type, something like:

```
OperatorData* noImpl();

enum{fieldsAmount = sizeof(OperatorData) / sizeof(noImpl()->m_record_0)}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T10:01:42.717

Use typedefs:

```
typedef char RecordType[RIX_OPERATOR_CONFIG_SIZE];

struct OperatorData 
{
   RecordType m_record_0;
   RecordType m_record_1;
   //....
   RecordType m_record_9;
}; 
```

Then:

```
enum {fieldsAmount = sizeof(OperatorData) / sizeof(RecordType)}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T10:00:21.990

我认为这不安全；可以在成员之间或之后添加填充，这将包含在`sizeof (OperatorData)`但不包含在任何特定成员的大小中。

Of course you could use the already-available `RIX_OPERATOR_CONFIG_SIZE` value to get an approximation:

```
const size_t num_records = sizeof (OperatorData) / RIX_OPERATOR_CONFIG_SIZE; 
```

assuming it's only used for `char` arrays, and that it dwarves any padding.

You can also use `[offsetof()](http://www.cplusplus.com/reference/clibrary/cstddef/offsetof/)`, this has the benefit of including at least padding between the members:

```
const size_t num_records = sizeof (OperatorData) /
       (offsetof(OperatorData, m_record_1) - offsetof(OperatorData, m_record_0)); 
```

Note, again, that this also is just an approximation. Hopefully, any padding will be much smaller than the members themselves so that their contribution will be rounded away.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-18T10:01:01.427

A non-static member cannot be accessed using `::` operator.

In C++11, you can do this ([quick demo](http://ideone.com/3U3Bv)):

```
#include <utility>

size = sizeof(OperatorData)/sizeof(std::declval<OperatorData>().m_record_0); 
```

And in C++03, do this:

```
size = sizeof(OperatorData) / sizeof(((OperatorData*)(0))->m_record_0); 
```

The type of the expression `((OperatorData*)(0))` is `OperatorData*`, so I use `((OperatorData*)(0))->m_record_0` to get the size which is roughly equivalent to this:

```
OperatorData*  od = ((OperatorData*)(0));
size_t size = sizeof(od->m_record_0); 
```

But it is not exactly same, as the above statement will be executed, but the expression in `sizeof()` will not be executed.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-18T10:07:11.020

You first have to set the correct alignment using compiler pragmas ( [http://msdn.microsoft.com/en-us/library/2e70t5y1(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/2e70t5y1(v=vs.80).aspx) in Visual Studio, [http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html](http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html) in gcc) otherwise `sizeof(OperatorData)` may be anything.

Then you have to have an instance of OperatorData from which you pick up the records and use them in sizeof()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T09:59:00.610

这是因为`m_record_0`它不是 struct 的静态成员`OperatorData`。只有当它是静态成员时，您才能这样做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T09:59:16.463

创建结构的对象并`sizeof()`在其上使用运算符。

# android - popupwindow : 窗口在后退按钮上泄露

> ID：10207006
> 
> 赞同：2
> 
> 时间：2012-04-18T09:55:32.997
> 
> 标签：android

我正在创建`popupwindow`如下，

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
        LinearLayout linearLayout = new LinearLayout(TimerGameActivity.this);
        TextView textView = new TextView(TimerGameActivity.this);
        textView.setText("Quit? Score will be lost....");
        linearLayout.addView(textView);
        PopupWindow popupWindow = new PopupWindow(linearLayout, 200, 100,true);
        popupWindow.showAtLocation(linearLayout, Gravity.BOTTOM, 10, 10)
} 
```

但我面临以下问题。当我按下后退按钮时，它不允许我显示弹出窗口并破坏活动，它给了我以下错误：

```
04-18 15:04:55.457: E/WindowManager(590): Activity has leaked window android.widget.LinearLayout@44f88be8 that was originally added here 
```

帮帮我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:00:08.810

您需要删除：

```
super.onBackPressed(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:07:27.407

很明显会出现异常，因为当您按下后退按钮时`super.onBackPressed();`，您的 Activity 将完成，同时您试图显示一个 PopupWindow。因此，没有用于显示 PopupWindow 的 UI。因此，只需删除`super.onBackPressed();`并尝试显示`PopupWindow`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:01:50.610

`onBackPressed()`将破坏您的活动，同时您参考同一活动进行 UI 操作，那么它将如何工作？

参考[Android 上的后退按钮/后退键会触发哪些操作？](https://stackoverflow.com/questions/7290019/which-actions-does-the-back-button-on-android-trigger)

# c# - 如何设计一个 Windows 窗体以在树视图中的选择中动态使用

> ID：10207007
> 
> 赞同：0
> 
> 时间：2012-04-18T09:55:37.827
> 
> 标签：c#, winforms, dynamic, treeview

我对 C# 编程相当陌生，但我会解释我正在尝试做什么。

我有一个带有拆分容器的 Windows 窗体。在左侧，我有一个带有多个节点的树视图，单击这些节点时，右侧应显示完全不同的视图。例如，将有一个显示计算机列表的计算机节点和一个显示不同类型页面的配置节点。

**我的问题：** 有没有办法设计各种右侧表单的内容，以便在单击树节点时动态交换？当我说设计时，我的意思是实际上使用 GUI 来设计可能出现在右侧的每种类型的视图，而不是在代码中创建它。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:01:09.127

是的，您可以使用一个`UserControl`包含您`views`的一个节点的节点。

单击此类型的节点时，您可以将此用户控件分配到表单的右侧。

单击另一个节点时，您可以简单地使用不同的用户控件。

这个用户控件的外观可以在 WinForms GUI 设计器中完全设计。

可以在[msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol)上找到有关用户控件的更多信息。

# windows - VB.Net - 提醒 - 启动

> ID：10207008
> 
> 赞同：0
> 
> 时间：2012-04-18T09:55:39.283
> 
> 标签：windows, vb.net, startup

我设计了一个应用程序，我希望它运行当我打开我的膝盖并应该执行一些我配置的提醒时。我还需要提醒上的“贪睡”和“完成”按钮。我希望它每 1 小时提醒我一次，直到我点击提醒上的“完成”按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:21:33.347

使用任务计划程序服务来计划任务。

对于 Visual Basic 6，您应该使用任务计划程序脚本对象：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383607(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383607(v=vs.85).aspx)

# vb.net - 以特定顺序将项目添加到列表视图

> ID：10207009
> 
> 赞同：0
> 
> 时间：2012-04-18T09:55:39.960
> 
> 标签：vb.net, listview

```
 If Not m_Batchs Is Nothing Then
        For Each Batch In m_Batchs
            newListItem = lstWsJobs.Items.Add(Batch.Id.ToString)
            With newListItem
                .Name = Batch.Id.ToString()
                .SubItems.Add(Batch.JobId.ToString)
                .SubItems.Add(Batch.Complete.ToString)
                .SubItems.Add(Batch.User)
                .SubItems.Add(Batch.Time.ToString)
            End With
        Next
    End If 
```

我有这个列表视图（工作正常），我想找到一种按特定顺序填充它的有效方法，即按日期、按身份等。

我知道我可以使用 linq，但据我所知，这是低效的。如果 m_batchs 是一个很大的对象列表，那么我将多次循环遍历这个列表（因为 linq 在幕后循环遍历对象集合）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:13:31.743

LINQ 总体上不是低效的，但几乎总是更容易阅读，并且可以更快地实现、更改和扩展。此外，如果一种方法在 1000 次迭代中快 1 毫秒，这真的很重要吗？

所以我假设这`Batch`是一个自定义类型并且`m_Batchs`是`List<Batch>`：

```
// order by date 
var query = m_Batchs.OrderBy(b => b.Time);
// order by identity 
query = m_Batchs.OrderBy(b => b.ID);
// ... 
```

衡量这个简单的 LINQ 查询与您的自定义实现之间的差异。

编辑：对不起，那是 C#

```
Dim batchByTime = m_Batchs.OrderBy(Function(b) b.Time);
Dim batchByID = m_Batchs.OrderBy(Function(b) b.ID); 
```

# android - 无法在 Android 设备上从 Arduino 接收超过 255 的值

> ID：10207010
> 
> 赞同：0
> 
> 时间：2012-04-18T09:55:44.777
> 
> 标签：android, arduino

我正在开发一个应用程序来从 Arduino 接收 Android 设备上的数据。当我将其转换为整数时，它仅显示高达 255 的值，但我想要那些由 Arduino 板发送的值。我曾尝试将它们转换为字符串，但这也不起作用。

我怎么解决这个问题？

这是在 Android 设备上运行的代码：

```
package pkg.MultipleDataReceiveFromArduinoArray;

import java.io.FileDescriptor;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

import pkg.MultipleDataReceiveFromArduino.R;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.os.ParcelFileDescriptor;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import com.android.future.usb.UsbAccessory;
import com.android.future.usb.UsbManager;

public class MultipleDataReceiveFromArduinoActivity extends
    Activity implements  Runnable {

    private TextView txtReceivedBytes;
    private TextView txtWaterLitres;
    private TextView txtSensor1;
    private TextView txtSensor2;
    private TextView txtSensor3;
    private EditText etCallibrationValue;
    private Button btnSetCallibrationValue;
    private static final String ACTION_USB_PERMISSION =
        "com.google.android.DemoKit.action.USB_PERMISSION";
    private UsbManager mUsbManager;
    private PendingIntent mPermissionIntent;
    private boolean mPermissionRequestPending;
    private UsbAccessory mAccessory;
    private ParcelFileDescriptor mFileDescriptor;
    private FileInputStream mInputStream;
    private FileOutputStream mOutputStream;
    int countWaterVol = 0;
    private int intCallibrationValue = 270;

    private static final int MESSAGE_TEMPERATURE = 1;
    private static final int MESSAGE_HUMIDITY = 2;
    private static final int MESSAGE_WATERLEVEL = 3;
    private static final byte COMMAND_OPEN_DOOR = 0x01;
    private static final byte COMMAND_CLOSE_DOOR = 0x02;

    protected class TelemetryPacket {
        private int value;

        public TelemetryPacket(int value) {
            this.value = value;
        }

        public int getValue() {
            return value;
        }
    }

    private int composeInt(byte hi, byte lo) {
        int val = (int) hi & 0xff;
        val *= 256;
        val += (int) lo & 0xff;
        return val;
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        txtReceivedBytes=(TextView)findViewById(R.id.txtReceivedBytes);
        txtWaterLitres =(TextView)findViewById(R.id.txtWaterLitres);
        txtSensor1 = (TextView) findViewById(R.id.txtSensor1);
        txtSensor2 =(TextView)findViewById(R.id.txtSensor2);
        txtSensor3 =(TextView)findViewById(R.id.txtSensor3);
        etCallibrationValue = (EditText)findViewById(R.id.etCallibrationValue);
        btnSetCallibrationValue =
            (Button)findViewById(R.id.btnSetCallibrationValue);
        setupAccessory();

        btnSetCallibrationValue.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                intCallibrationValue =
                    Integer.parseInt(etCallibrationValue.getText().toString());
                    Toast.makeText(getApplicationContext(), 
                        "Callibration Value:" + intCallibrationValue, 
                        Toast.LENGTH_SHORT).show();
            }
        });
    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        if (mAccessory != null) {
            return mAccessory;
        } else {
            return super.onRetainNonConfigurationInstance();
        }
    }

    @Override
    public void onResume() {
        super.onResume();

        if (mInputStream != null && mOutputStream != null) {
            // streams were not null");
            return;
        }

        // streams were null");
        UsbAccessory[] accessories = mUsbManager.getAccessoryList();
        UsbAccessory accessory = (accessories == null ? null : accessories[0]);
        if (accessory != null) {
            if (mUsbManager.hasPermission(accessory)) {
                openAccessory(accessory);
            } else {
                synchronized (mUsbReceiver) {
                    if (!mPermissionRequestPending) {
                        mUsbManager.requestPermission(
                            accessory, mPermissionIntent);
                        mPermissionRequestPending = true;
                    }
                }
            }
        } else {
            // null accessory
        }
    }

    @Override
    public void onPause() {
        super.onPause();
    }

    @Override
    public void onDestroy() {
        unregisterReceiver(mUsbReceiver);
        super.onDestroy();
    }

    Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            //TelemetryPacket p = (TelemetryPacket) msg.obj;
            ValueMsg t = (ValueMsg) msg.obj;
            txtReceivedBytes.setText("Received Bytes: "+t.getRet());
            if (t.getReading4()==1) {
                countWaterVol = countWaterVol+1;
                txtWaterLitres.setText("Water Produced in Litres:"+
                    (countWaterVol+"\n"+"Interrupt Signal"+t.getReading3());
            } else {

            }

            txtSensor1.setText("S 1: "+t.getReading1()+","+
                "Reading 2: "+t.getReading2());
            txtSensor2.setText("S 3: "+t.getReading3()+","+
                "Reading 4: "+t.getReading4());
            txtSensor3.setText("S 5: "+t.getReading5()+","+
                "Reading 6: "+t.getReading6());
            Alets alerts = new Alets();
        }
    };

    private void setupAccessory() {
        mUsbManager = UsbManager.getInstance(this);
        mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(
            ACTION_USB_PERMISSION), 0);
        IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
        filter.addAction(UsbManager.ACTION_USB_ACCESSORY_DETACHED);
        registerReceiver(mUsbReceiver, filter);
        if (getLastNonConfigurationInstance() != null) {
            mAccessory = (UsbAccessory) getLastNonConfigurationInstance();
            openAccessory(mAccessory);
        }
    }

    private void openAccessory(UsbAccessory accessory) {
        mFileDescriptor = mUsbManager.openAccessory(accessory);
        if (mFileDescriptor != null) {
            mAccessory = accessory;
            FileDescriptor fd = mFileDescriptor.getFileDescriptor();
            mInputStream = new FileInputStream(fd);
            mOutputStream = new FileOutputStream(fd);
            Thread thread = new Thread(null, this, "OpenAccessoryTest");
            thread.start();
            // Accessory opened
        } else {
            // failed to open accessory
        }
    }

    private void closeAccessory() {
        try {
            if (mFileDescriptor != null) {
                mFileDescriptor.close();
            }
        } catch (IOException e) {

        } finally {
            mFileDescriptor = null;
            mAccessory = null;
        }
    }

    public void run() {
        int ret = 0;
        //byte[] buffer = new byte[16384];
        byte[] buffer = new byte[65536];
        int i;

        while (true) { // read data
            try {
                ret = mInputStream.read(buffer);
                //ret= ret/3;

            } catch (IOException e) {
                break;
            }

            i = 0;

            while (i < ret) {
                int len = ret - i;
                //    if (len >= 1) {
                int value = (int) buffer[0];
                Message m = Message.obtain(mHandler);
                m.obj = new ValueMsg('f',value,ret,buffer[1],buffer[2],
                buffer[3],buffer[4],buffer[5]);
                mHandler.sendMessage(m);

                i += 1;
            }
        }
    }

    public static final long unsignedIntToLong(byte[] b)
    {
        long l = 0;
        l |= b[0] & 0xFF;
        l <<= 8;
        l |= b[1] & 0xFF;
        l <<= 8;
        l |= b[2] & 0xFF;
        l <<= 8;
        l |= b[3] & 0xFF;
        return l;
    }

    public static int unsignedByteToInt(byte b) {
        return (int) b & 0x10;
    }

    private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if (ACTION_USB_PERMISSION.equals(action)) {
                synchronized (this) {
                    UsbAccessory accessory = UsbManager.getAccessory(intent);
                    if (intent.getBooleanExtra(
                        UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                            openAccessory(accessory);
                    } else {
                        // USB permission denied
                    }
                }
        } else if (UsbManager.ACTION_USB_ACCESSORY_DETACHED.equals(action)) {
                UsbAccessory accessory = UsbManager.getAccessory(intent);
                if (accessory != null && accessory.equals(mAccessory)) {
                    // accessory detached
                    closeAccessory();
                }
            }
        }
    };
} 
```

这是Arduino代码（草图）：

```
#include <Usb.h>
#include <adk.h>

uint8_t b;
USB Usb;
ADK adk(&Usb,
    "Ashok Kateshiya", // Manufacturer Name
    "analog TEST", // Model Name
    "TDS test ", // Description (user-visible string)
    "0.1", // Version
    "http://www.ashokkateshiya.co.cc", 
    "123456789"); // Serial Number (optional)

#define tds_pin A15
#define flow_pin 22
#define LLS_pin 49

float avg[10];
float value = 0;

int count;
int pin_state = 0, pin_old_state = 0;
int pulse_counter = 0;
int LLS_state;
int LLS_flag = 0;
int sensor_flag = 0;
int timer_flag = 0;

uint8_t msg[7] = { 0x00 };
uint16_t len = sizeof(msg);
uint8_t rcode;

void setup()
{
    Serial.begin(115200);
    Serial.print("\r\nADK demo start");

    if (Usb.Init() == -1)
    {
        Serial.print("\r\nOSCOKIRQ failed to assert");
        while(1); // halt
    }

    pinMode(tds_pin, INPUT);
    pinMode(flow_pin, INPUT);
    pinMode(LLS_pin, INPUT);
    digitalWrite(LLS_pin, HIGH);
    digitalWrite(flow_pin, HIGH);
    TIMSK1 = 0x01;
    TCCR1A = 0x00;
    TCNT1 = 0x85EF;
    TCCR1B = 0x05;
}

void loop()
{
    Usb.Task();

    if (adk.isReady() == false)
    {
        return;
    }

    TDS();
    flow();
    LLS();
}

void TDS()
{
    for (count = 0; count < 10; count++)
    {
        avg[count] = analogRead(tds_pin);
    }

    for (count = 0; count < 10; count ++)
    {
        if (count == 0)
        {
            value = avg[count];
        }
        else
        {
            value = value + avg[count];
        }
    }

    if (len > 0)
    {
        msg[0] = 0x1;
        msg[1] = value/10;
        rcode = adk.SndData (6, msg );
        Serial.print("TDS 0 : ");
        Serial.println(msg[0]);
        Serial.print("TDS 1 : ");
        Serial.println(msg[1]);
        delay(10);
    }

    if (rcode && rcode != hrNAK)
        USBTRACE2("DATA rcv :", rcode);
}

void flow()
{
    pin_state = digitalRead(flow_pin);

    if (pin_state == LOW)
    {
        pin_old_state = pin_state;
    }

    if ((pin_state == HIGH) && (pin_old_state == LOW))
    {
        pin_old_state = pin_state;
        pulse_counter = (pulse_counter + 1);
        sensor_flag = 1;
    }

    if ((pulse_counter / 25 == 1) && (sensor_flag == 1))
    {
        pulse_counter = 0;
        sensor_flag = 0;
        msg[2] = 0x2;
        msg[3] = 1;
        rcode = adk.SndData (6, msg );
        Serial.print("value :");
        Serial.println(msg[3]);

        if (rcode && rcode != hrNAK)
        {
            USBTRACE2 ("USB DATA : ", rcode);
        }
    }
    else
    {
        msg[2] = 0x2;
        msg[3] = 0;
        rcode = adk.SndData (6, msg );
        Serial.print("value :");
        Serial.println(msg[3]);

        if (rcode && rcode != hrNAK)
        {
            USBTRACE2 ("USB DATA : ", rcode);
        }
    }

    delay(10);
}

void LLS()
{
    LLS_state = digitalRead(LLS_pin);

    if (LLS_state != 0)
    {
        if (len > 0)
        {
            msg[4] = 0x3;
            msg[5] = 0x0;
            rcode = adk.SndData (6, msg );
            Serial.print("LLS 4 : ");
            Serial.println(msg[4]);
            Serial.print("LLS 5 : ");
            Serial.println(msg[5]);
        }
    }
    else
    {
        msg[4] = 0x3;
        msg[5] = 0x1;
        rcode = adk.SndData (6, msg );
        Serial.print("LLS 0 : ");
        Serial.println(msg[4]);
        Serial.print("LLS 2 : ");
        Serial.println(msg[5]);
    }

    if (rcode && rcode != hrNAK)
    USBTRACE2("DATA rcv :", rcode);
    delay(10);
}

/****** timer overflow *******/
ISR(TIMER1_OVF_vect)
{
    TCNT1 = 0x85EF;

    if (pin_state == pin_old_state )
    {
        timer_flag = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:51:06.287

看起来问题出在Arduino草图中。该`msg`数组包含（无符号）字节，最大值为 255。

该行：

```
msg[1] = value/10 
```

隐式截断`value/10`（这是一个介于 0 和 1023 之间的整数 - 请参阅[http://arduino.cc/en/Reference/analogRead](http://arduino.cc/en/Reference/analogRead)）最多为 255。

要发送`value/10`，您需要将其拆分为 2 个字节。例如：

```
msg[1] = (uint8_t) (i & 0xFF);
msg[2] = (uint8_t) ((i >> 8) & 0xFF); 
```

并且`msg`必须长一个字节才能容纳。

在 Android (Java) 方面，您需要执行以下操作：

```
int value = (int) buffer[0];
// ...
int tds = buffer[1] + (buffer[2] << 8);
m.obj = new ValueMsg('f', value, ret, tds,
    buffer[3], buffer[4], buffer[5], buffer[6]); 
```

这将需要更改 的定义`ValueMsg`以适应。

`SndData`此外，调用（假设这里使用的库是[USB_Host_Shield_2.0](https://github.com/felis/USB_Host_Shield_2.0) ）可能存在问题，因为它们总是发送 6 个字节，即使在第一次通过`loop`所有 6 个字节时`msg`都不会被初始化。

# javascript - JSF h:outputScript 排序和 PrimeFaces jQuery

> ID：10207011
> 
> 赞同：8
> 
> 时间：2012-04-18T09:55:47.013
> 
> 标签：javascript, jsf-2, primefaces

我想使用（[Primefaces 和 TwitterBootstrap](https://stackoverflow.com/questions/10205318)）。当前，如果存在例如 a，则 DropDown 菜单不起作用`p:dataTable`。我发现，如果我有以下顺序，它就可以工作（没有任何 Primefaces 组件）`h:head`：

```
<h:head>
  <h:outputScript library="js" name="bootstrap.js"/>
  <h:outputScript library="primefaces" name="jquery/jquery.js"/>
  ...
</h:head> 
```

如果我交换排序（首先是 jquery.js，而不是 bootstrap.js），则 DropDown 菜单会损坏。我的问题是，在呈现的 HTML 输出中使用 PrimeFaces 组件时，PrimeFaces 使用的脚本（jquery.js 和 primefaces.js）总是在`h:head`.

```
<script src="/javax.faces.resource/jquery/jquery.js.jsf?ln=primefaces"></script>
<script src="/javax.faces.resource/primefaces.js.jsf?ln=primefaces"></script>
<script src="/javax.faces.resource/bootstrap.js.jsf?ln=js"></script> 
```

`bootstrap.js`之前如何导入`jquery.js`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T10:21:07.603

如果问题与您的资源的包含顺序有关，您应该查看 PrimeFaces 团队的以下博客文章：[Customizable Resource Ordering](https://www.primefaces.org/resource-rendering/)。

您可以在元素内定义一个`first`方面。`h:head`放置在那里的元素将在 PrimeFaces 资源之前加载。

```
<h:head>
    <f:facet name="first">
        <h:outputScript library="js" name="bootstrap.js"/>
    </f:facet>
</h:head> 
```

# javascript - onhover 如何使用 jquery 获取图像的宽度和高度

> ID：10207020
> 
> 赞同：0
> 
> 时间：2012-04-18T09:56:05.207
> 
> 标签：javascript, jquery

我在我的网页中显示了一个 div 中的许多图像，这些 div 和图像是通过循环动态创建的。

**我需要使用 jquery 来获取每个图像的宽度和高度，而不使用像这样的 id**

```
 document.getElementById('Image/div id'); 
```

因为循环会根据条件动态创建很多图像，所以当用户悬停/单击图像时，有什么方法可以获取图像的高度和宽度

我对此很感兴趣，终于来到这里希望我能找到解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:59:25.303

我建议，如果您想在页面上显示此信息：

```
$('img').hover(
    function(){
        var h = $(this).height(),
            w = $(this).width();
        $('<div />').insertAfter($(this)).text('height: ' + h + '; width: ' + w +'.');
    },
    function(){
        $(this).next('div').remove();
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uReTm/)。

* * *

**`$(this)`通过减少对某些 CSS 的调用并将其耦合到一些 CSS，**几乎毫无意义的编辑**使其更漂亮：**

 **```
$('img').hover(
    function(){
        var that = $(this),
            h = that.height(),
            w = that.width();
        $('<div />')
            .css('width',w)
            .text('height: ' + h + '; width: ' + w +'.')
            .insertAfter(that);
    },
    function(){
        $(this).next('div').remove();
    });​ 
```

CSS：

```
div {
    display: block;
    position: relative;
}

div > div {
    position: absolute;
    top: 0;
    left: 0;
    color: #f90;
    background-color: #000;
    background-color: rgba(0,0,0,0.6);
} 
```

​JS [Fiddle 演示](http://jsfiddle.net/davidThomas/uReTm/1/)。

* * *

**编辑**是因为 jQuery 对于这种效果并不是真正必要的（尽管它确实简化了实现），所以：一个普通的 JavaScript 替代方案：

```
var img = document.getElementsByTagName('img');

for (var i=0,len=img.length;i<len;i++){
    img[i].onmouseover = function(){
        var that = this,
            h = that.offsetHeight,
            w = that.offsetWidth,
            p = that.parentNode,
            d = document.createElement('div');
        d.style.width = w + 'px';
        d.textContent = 'Width: ' + w + '; height: ' + h + '.';
        p.appendChild(d);

    };
    img[i].onmouseout = function(){
        var that = this;
        that.parentNode.removeChild(that.nextSibling);
    };
}​ 
```

​JS [Fiddle 演示](http://jsfiddle.net/davidThomas/uReTm/2/)。

* * *

**最终编辑（我认为）**，因为我不记得兼容性了`node.textContent`，我认为这个修改可能有助于与较低版本的 IE 兼容（使用`document.createTextNode()`而不是依赖`node.textContent`/`node.innerText`等等......）：

```
var img = document.getElementsByTagName('img');

for (var i=0,len=img.length;i<len;i++){
    img[i].onmouseover = function(){
        var that = this,
            h = that.offsetHeight,
            w = that.offsetWidth,
            p = that.parentNode,
            d = document.createElement('div'),
            text = document.createTextNode('Width: ' + w + '; height: ' + h + '.');
        d.appendChild(text);
        d.style.width = w + 'px';
        p.appendChild(d);

    };
    img[i].onmouseout = function(){
        var that = this;
        that.parentNode.removeChild(that.nextSibling);
    };
}​ 
```

​JS [Fiddle 演示](http://jsfiddle.net/davidThomas/uReTm/3/)。

虽然我没有 IE 7 或更低版本，但上述内容至少在 IE 8 中有效。如果有人对 IE 6 或 7 中的功能有意见，我会很感兴趣..！

参考：

*   '普通' JavaScript：

    *   [`document.createElement`](https://developer.mozilla.org/en/DOM/document.createElement).
    *   [`document.createTextNode()`](https://developer.mozilla.org/en/DOM/document.createTextNode).
    *   [`element.offsetHeight`](https://developer.mozilla.org/en/DOM/element.offsetHeight).
    *   [`element.offsetWidth`](https://developer.mozilla.org/en/DOM/element.offsetWidth).
    *   [`element.style`](https://developer.mozilla.org/en/DOM/element.style).
    *   [`node.appendChild`](https://developer.mozilla.org/en/DOM/node.appendChild).
    *   [`node.parentNode`](https://developer.mozilla.org/en/DOM/element.parentNode).
    *   [`node.removeChild`](https://developer.mozilla.org/en/DOM/node.removeChild).
    *   [`node.textContent`](https://developer.mozilla.org/en/DOM/node.textContent).
*   jQuery：

    *   [`height()`](http://api.jquery.com/height/).
    *   [`hover()`](http://api.jquery.com/hover/).
    *   [`insertAfter()`](http://api.jquery.com/insertAfter/).
    *   [`next()`](http://api.jquery.com/next/).
    *   [`remove()`](http://api.jquery.com/remove/).
    *   [`text()`](http://api.jquery.com/text/).
    *   [`width()`](http://api.jquery.com/width/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:03:08.110

您可以使用 jQuery`on()`将处理程序附加到*最近的公共父容器*。这样，您至少可以控制您希望此功能生效的图像子集。

```
$('#container').on('mouseover','img',function(){
    var width = $(this).width();
    var height = $(this).height();
}); 
```

喜欢：

```
<div>
    <img> //will not affect this one since it's not under "#container"
</div>
<div id="container">
   <img> //the handler affects this one
   <div>
      <img> //the handler also affects this one
   </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:57:58.270

这能解决您的问题吗？

```
$('img').hover(function() {
  console.log($(this).width());
  console.log($(this).height());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:59:12.810

用于`$(this)`指代悬停的图像。

```
$("#div_id").hover(function(){
  alert("H:" + $(this).height() + " W:" + $(this).width() );
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T10:21:42.050

```
$(".img").mouseover(function() {

    var $div = $(this);
    var $item = $div.find("img");

    var width = $item.width();
    var height = $item.height();
} 
```

尝试这个。**

# java - 组合框动作监听器 Java

> ID：10207021
> 
> 赞同：2
> 
> 时间：2012-04-18T09:56:14.683
> 
> 标签：java, swing, oop, combobox, actionlistener

我有这个组合框，我想要的是每当我更改选择时，将与选择对应的数字放置在文本字段中。最初，文本字段是空白的，当我选择某些内容时，它会很好地显示它，但它不会根据我的选择而改变。

这是操作方法：

```
 private void jComboBox2ActionPerformed(java.awt.event.ActionEvent evt) 
{
    jTextField1.setText("");
    Iterator<Product> it = warehouse.getStock().iterator();
    if(!warehouse.getStock().isEmpty())
    {
    x:  while(it.hasNext())
        {
            Product temp = it.next();
            if(temp.getName().equals(jComboBox5.getSelectedItem()))
            {
                jTextField1.setText(Integer.toString(temp.getQuantity()));
                break x;
            }

        }
    }
} 
```

如果需要，我会添加额外的代码。我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:06:04.197

如果您想对选择的更改做出反应，您会收到一段`ActionEvent`时间，您应该`ItemEvent`通过注册收到一个。`ItemListener`然后，您可以检查是否有类似（未测试）的代码：

```
if ( event.getStateChange() == ItemEvent.SELECTED ){
  jTextField1.setText( Integer.toString( (Product) event.getItem() ) );
} 
```

# c# - 可空对象必须有一个值 - 为什么？

> ID：10207023
> 
> 赞同：5
> 
> 时间：2012-04-18T09:56:23.370
> 
> 标签：c#, linq, linq-to-sql

我有以下 LINQ 查询

```
from p in dc.Purchases
where invoiceNumber == null || p.InvNumber == invoiceNumber.Value
select p; 
```

'invoiceNumber' 是一个可为 null 的 int - 当它为 null 时，程序会抛出一个 'Nullable object must have a value error'。当它首先明确检查它是否为空时，为什么会这样？有没有解决的办法？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:42:36.327

我认为您的查询有问题。从您提供的代码中，我假设这`invoiceNumber`是一个局部变量或参数。如果是这种情况，那么你为什么还要检查`invoiceNumber == null`你的查询？此类检查应与查询分开进行：

```
if(invoiceNumber == null)
{
    return dc.Purchases; 
    // the query would evaluate to this because invoiceNumber == null will allways return true.
}
else
{
    return 
        from p in dc.Purchases 
        where p.InvNumber == invoiceNumber.Value
        select p;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:00:03.247

尝试这个：

```
from p in dc.Purchases
where invoiceNumber == null ||(invoiceNumber!=null && p.InvNumber == invoiceNumber.Value)
select p; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:08:19.747

检查这个

```
from p in dc.Purchases
where (invoiceNumber == null ? p.InvNumber == null : p.InvNumber == invoiceNumber.Value)
select p; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:41:59.707

问题可能出在 Linq-to-Sql 中——它试图将 where 语句转换为 SQL，因此即使它为 null，也可以调用 invoiceNumber.Value。

请尝试在哪里`invoiceNumber == null || p.InvNumber == invoiceNumber`。

希望它会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T10:09:32.473

关于什么

```
from p in dc.Purchases 
where (invoiceNumber ?? p.InvNumber) == p.InvNumber
select p; 
```

但是，我会提出一个问题，如果`invoiceNumber`是`null`为什么要运行此语句？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T10:09:39.023

使用 HasValue 属性检查 Nullable 是否具有值。

```
from p in dc.Purchases
where !invoiceNumber.HasValue || p.InvNumber == invoiceNumber.Value
select p; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T10:12:01.743

你不说，但我怀疑这`p.InvNumber`也是可以为空的。在这种情况下，不要使用`.Value`：

```
from p in dc.Purchases
where invoiceNumber == null || p.InvNumber == invoiceNumber
select p; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-18T10:15:55.343

您不需要明确检查 null 。可空值可能有两种情况，要么为空，要么具有某些值。

例如

情况1-

```
 int ? invoiceNumber = null;
 var prods = from p in dc.Purchases 
             where p.InvNumber == invoiceNumber
             select p; 
```

案例2-

```
 int ? invoiceNumber = 100;
 var prods = from p in dc.Purchases 
             where p.InvNumber == invoiceNumber
             select p; 
```

相同的 linq 语句在这两种情况下都适用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-18T10:16:38.297

类型的基本概念`nullable`是......底层类型将具有在其范围内指定的所有值+一个`null`值，以增加数据库编程的灵活性。

可空类型有两个只读属性 1) `HasValue`2)`Value`

`HasValue`是`boolean`类型，如果 Value 中有一些值，它会自动设置为 true。因此，对于比较，您必须先使用`HasValue`，然后再使用`Value`. 如果你`Value`直接使用，如果是`null`，则会抛出上述异常。

记住这些，我也怀疑这个片段。`invoiceNumber == null` 您应该尝试的地方`invoiceNumber.Value==null`（不是 invoiceNumber）

或者

```
where invoiceNumber.HasValue && p.InvNumber == invoiceNumber.Value 
```

谢谢

# java - 在 servlet 中使用静态类

> ID：10207024
> 
> 赞同：1
> 
> 时间：2012-04-18T09:56:24.530
> 
> 标签：java, servlets

Servlet 不是线程安全的。所以如果我使用一个类的静态函数，当多个请求同时到来时会发生什么。他们将如何处理静态函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:58:30.660

如果访问共享的可变数据，则必须对其进行同步。如果数据是不可变的或只读的或在堆栈上，你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:09:10.400

这取决于你有什么样的静态方法，它是否是无状态的。如果它是无状态的，并且不引用您方法范围之外的任何内容，它将是线程安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:04:53.223

如果您在 servlet 中使用静态方法，则需要通过仅在变量状态可能更改时使用局部变量来使它们成为线程安全的，或者如果它们不更改或使用同步访问方法则使用静态变量

并且您可以通过实现 SingleThreadModle 接口或“同步”构造来确保函数线程安全。

# zend-framework - ZendX Jquery 表单自动完成

> ID：10207027
> 
> 赞同：0
> 
> 时间：2012-04-18T09:56:31.703
> 
> 标签：zend-framework, zendx

嗨，我正在使用 zendx_jquery_form_autocomplete。我有一个带有表用户的 mysql 数据库。用户有一个 ID 和一个名称。我的问题是我不知道我可以在 Name 列中进行研究并获得正确行的 id。在我看到的教程中，有一个数组研究并且工作正常，但现在我应该传递我的研究的 id ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:06:16.753

使用 mysql like 运算符按行搜索。

```
$param =  $this->_getParam('param'); //send from autocomplete

$result = Zend_Db_Table::getDefaultAdapter()->select()->from('users','user_id')->where('name like =?',"%$param")->query()->fetchAll(); 
```

# eclipse - HTTP 状态 404 描述 请求的资源 () 不可用。Apache Tomcat/7.0.27

> ID：10207033
> 
> 赞同：5
> 
> 时间：2012-04-18T09:56:54.653
> 
> 标签：eclipse, tomcat7

当我尝试通过[http://localhost:7080/first/](http://localhost:7080/first/)或[http://localhost:7080/first/start-page.html](http://localhost:7080/first/start-page.html)访问我的项目主页时，我收到以下消息：

HTTP 状态 404 - 类型状态报告消息描述 请求的资源 () 不可用。Apache Tomcat/7.0.27

但是如果我要求 localhost:7080/ 正确找到了tomcat的主页。

有人能帮我吗？

为什么我无法从 eclipes 获取我的 start-page.html？但是当我从 C:\Users\Mohsen\workspace.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\first\WEB-INF\start-page.html 运行时，它运行正常。

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>first page</title>
</h:head>
<h:body>
<fieldset>
<legend>Random Results Page</legend>
<h:form>
Press button to get one of three possible results pages.
<br/>
<h:commandButton value="Go to Random Page"
/>
</h:form>
</fieldset>
…
</h:body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:10:10.457

请查看“服务器”选项卡，如图所示： ![在此处输入图像描述](../Images/f46b5a59f7d8e1b137faffd550d66252.png)

如果您在服务器中看不到您的项目，您需要先“发布”您的项目。//右键单击服务器->“添加和删除”->将您的项目从“可用”添加到“已配置”->单击“完成”我希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:09:48.160

我不认为如果您右键单击服务器并选择“发布”会立即发布您的项目。我认为您需要先将项目添加到服务器（我可能是错的）。

通常在服务器上运行项目最简单的方法是右键单击项目，选择“运行方式”并选择“在服务器上运行”。

这将使您可以选择要使用的服务器（或者如果您当时还没有创建一个，则创建一个新的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:07:08.833

尝试将您的移动`start-page.html`到您的本地主机。就我而言，我试试这段代码

```
sudo mv start-page.html /etc/tomcat7/Catalina/localhost 
```

然后检查你的本地主机是否有 start-page.html。

然后你会看到 4 `.xml`like `docs.xml`、 the`examples.xml,`等`manager.xml`，你必须看到`start-page.html`then 尝试重新启动你的 tomcat7。

因为 404 错误意味着无法确定您的位置`start-page.html`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-12T15:05:17.670

我认为您创建了“xhtml 文件”，创建了一个“文件”并更改了文件扩展名。这是错误的。您应该创建一个 html 文件并再次配置扩展。然后单击下一步按钮。之后，您应该选择“新建 Facelet 模板”。然后完成。

# jquery - jQuery Traversing - 最好的使用方法？

> ID：10207035
> 
> 赞同：0
> 
> 时间：2012-04-18T09:56:56.690
> 
> 标签：jquery, traversal, jquery-traversing

我一直致力于做一些简单的事情..但不确定最好的方法。我已经准备好通过 jQuery 文档，但由于这个地方提供了合理的建议 - 我将在这里提出问题。

基本上是穿越。

假设我有这个最小的代码作为一个简单的例子（同一页面上有多个元素）：

```
<div class='collab'>
<div class='collab_text'>text</div><!--close collab_text-->
</div><!--close_collab-->

<div class='collab'>
<div class='collab_text'>text</div><!--close collab_text-->
</div><!--close_collab--> 
```

在 jQuery 中，我只想`collab_text`在悬停时淡出。所以我有：

```
$(".collab").hover(function(){
        $(".collab_text").fadeTo(700, 1.0);
    },function(){
        $(".collab_text").fadeTo(300,0.00001);                          
    }); 
```

`collab_text`当我将鼠标悬停在 1 个项目上时，这显然会显示所有元素的所有内容。所以我的问题是什么是只让悬停`collab_text`显示的正确方法。 `.next()`?, `.find()`?

我知道我的代码应该是：

```
$(".collab").hover(function(){
            $(this).XXX(".collab_text").fadeTo(700, 1.0);
        },function(){
            $(this).XXX(".collab_text").fadeTo(300,0.00001);                            
        }); 
```

任何信息将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:58:40.850

您可以使用任何一个`find`，或`$()`与上下文一起使用

```
$(this).find(".collab_text").fadeTo(700, 1.0); 
```

或者

```
$('.collab_text', this).fadeTo(700, 1.0); 
```

他们都是平等的：

> 在内部，选择器上下文是用 .find() 方法实现的，所以 $('span', this) 等价于 $(this).find('span')。

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:00:52.730

在你的情况下，我会使用`children('.collab_text')`：

```
$(".collab").hover(function(){
    $(this).children(".collab_text").fadeTo(700, 1.0);
},function(){
    $(this).children(".collab_text").fadeTo(300,0.00001);                          
});​ 
```

示例 - [http://jsfiddle.net/edjQ7/](http://jsfiddle.net/edjQ7/)

# delphi - 优化 TWebBrowser 的绘制以减少总 CPU 使用率

> ID：10207037
> 
> 赞同：5
> 
> 时间：2012-04-18T09:56:59.710
> 
> 标签：delphi, optimization, delphi-2009, twebbrowser

我有一个表单，它有一个`TWebBrower`加载 HTML 文档的组件。HTML 文档上的数据每隔几秒更新一次，有时每秒更新多次，我使用以下命令更新 Delphi 中的值：

```
DOMDocument.getElementById(elementID).innerHTML := someValue; 
```

问题是我想锁定窗口/网络浏览器以防止它绘制/更新，直到我的所有更新完成。有没有办法做到这一点？会打电话给

```
SendMessage(WebBrowser.Handle,WM_SETREDRAW,0,0); 
```

我需要一些帮助来优化此代码，以便我的总 CPU 使用率不会持续高。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:49:15.373

由于您的主要问题是更新频率，因此您需要降低它。为此，您可以简单地存储上次更新 HTML 文档的时间，并在下一次数据更改时检查自该时间以来是否经过了一段时间。

这是显示如何执行此操作的代码。以下`FUpdatePeriod`示例中的更新周期以毫秒为单位。然后，如果您`UpdateChanges`定期调用，`innerHTML`（此处的伪代码）将仅在自上次更改后至少经过 1000 毫秒时更新。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, MSHTML, OleCtrls, SHDocVw;

type
  TForm1 = class(TForm)
    WebBrowser1: TWebBrowser;
    procedure FormCreate(Sender: TObject);
  private
    FLastUpdate: Cardinal;
    FUpdatePeriod: Cardinal;
    procedure UpdateChanges(const AData: WideString);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  FUpdatePeriod := 1000;
end;

procedure TForm1.UpdateChanges(const AData: WideString);
begin
  if (GetTickCount - FLastUpdate > FUpdatePeriod) then
  begin
    (WebBrowser1.Document as IHTMLDocument2).body.innerHTML := AData;
    FLastUpdate := GetTickCount;
  end;
end;

// now remains to call the UpdateChanges periodically

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:20:06.433

这是一个侧面的答案；但是当我们遇到 TWebBrowser 闪烁问题时，我们通过切换到使用嵌入到我们的应用程序中的[Google Chrome (DCEF)来修复它们。](http://code.google.com/p/delphichromiumembedded/)

虽然我最初也觉得我可以“优化” TWebBrowser，并减少它的闪烁，但我发现问题只是 Internet Explorer 的原生问题。除了安装新版本的 Internet Explorer，或重写所有 JavaScript 以使您的网页永远不会闪烁，因为它在 HTML 布局中没有活动元素（100% javascript free = 无闪烁），唯一的解决方法是停止使用 Internet Explorer ，从而停止使用 TWebbrowser。

其次，如果您的 TWebBrowser 网页正在访问 Delphi 本机方法作为来自 javascript 的回调，也会导致闪烁。这些回调，如果它们花费很多时间，也总是会导致嵌入式 TWebBrowser 闪烁，即使正在执行的唯一 javascript 是调用 delphi 回调。我正在谈论的技术（回调）记录[在这里](http://www.delphidabbler.com/articles?article=22)。

# .net - Set default value of RadDatePicker to NULL when date is not set

> ID：10207038
> 
> 赞同：0
> 
> 时间：2012-04-18T09:57:00.987
> 
> 标签：.net, silverlight-4.0, telerik, telerik-grid

I'm binding the RadDatePicker to a viewModel dateTime property. when the property is null in database i get 01/01/0001\. How to i change this behavior to just leave the date field blank.. example:

In database ===> experiation_date : NULL In View(GUI) ===> experation_date : 01/01/0001

Expected Result ===> experation_date : {Blank}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T08:05:09.353

并非总是可以将数据类型从 DateTime 更改为 DateTime？实际上可能需要 DateTime 对象。（一个典型的场景是当您的控件绑定到具有 DateTime 类型的数据库对象但您正忙于在控件中创建新记录，因此此时该值仍然为空。）在这种情况下，可以像 Paulo 在以下链接中那样编写一个值转换器：[http](http://www.telerik.com/forums/default-date-value-01-01-001) ://www.telerik.com/forums/default-date-value-01-01-001 （参见他的 EditDateConverter 代码。它按原样工作。 ..）我在这里粘贴他的代码以供参考，以防该链接将来停止工作：

```
public class EditDateConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null && value.GetType().FullName == "System.DateTime")
        {
            var dt2 = (DateTime)value;
            if (dt2 != DateTime.MinValue)
                return value;
        }
        DateTime dt;
        if (!DateTime.TryParse(value as string, CultureInfo.InvariantCulture, DateTimeStyles.AssumeLocal, out dt))
            return dt != DateTime.MinValue ? value : null;
        return dt;
    }
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null && targetType.FullName == "System.DateTime")
            return DateTime.MinValue;
        return value;
    }
} 
```

要在 RadDatePicker 的绑定中使用它，只需将转换器作为资源添加到 XAML 中，然后将转换器添加到绑定中。

在您的 XAML 命名空间声明中，您必须添加转换器的命名空间，例如：

```
xmlns:converters="clr-namespace:MyNamespace.Converters" 
```

然后在 XAML 的 Resources 部分中，您将拥有：

```
<UserControl.Resources>
    <converters:EditDateConverter x:Name="NullableDate"/>
</UserControl.Resources> 
```

然后，您可以简单地将以下行添加到控件上的绑定中：

```
Converter={StaticResource NullableDate} 
```

如果您现在有一个空日期，控件将显示水印（例如“输入日期”）而不是 01/01/0001。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:07:08.330

将 SelectedDate 设置为 null（而不是 DBNull）：

```
RadDatePicker1.SelectedDate = null; 
```

并在 xaml 中将 DateTimeWatermarkContent 设置为空字符串：

```
<telerik:RadDatePicker x:Name="RadDatePicker1" DateTimeWatermarkContent="" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:57:59.830

如果您绑定不可为​​空的日期时间变量，即 (DateTime) 来控制，那么它将使用默认的 01/01/001 日期而不是 Empty...。因此，如果您希望默认值为 Empty，那么只需更改变量的数据类型这势必控制到（DateTime？）.....

日期时间 ===> 日期时间？

它工作正常...

谢谢。！！！

# jailbreak - 如何使用私有 API CTCallDial() 直接拨打电话？

> ID：10207042
> 
> 赞同：1
> 
> 时间：2012-04-18T09:57:36.900
> 
> 标签：jailbreak

在 Iphone 中，如何使用私有 API CTCallDial() 直接拨打电话？主要是不知道CTCallDial的具体参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:10:28.277

1) 链接到 CoreTelephony.framework

2）定义像

```
extern "C" id CTCallDial(NSString * number); 
```

并使用：

```
CTCallDial(@"0123456789"); 
```

（返回创建的 CTCallRef，可以安全地转换为 id (CTCall *)）

# android - 如何获得加速度计轴和运动矢量之间的旋转？

> ID：10207044
> 
> 赞同：1
> 
> 时间：2012-04-18T09:57:49.910
> 
> 标签：android, algorithm, rotation, orientation, accelerometer

我正在开发 Android 上的行人导航系统。我目前正在尝试获取 3 轴加速度计参考和应用于设备的运动之间的旋转矩阵。

假设您手持设备向前直走，但加速度计的 Y 轴（因此设备的 Y 轴）与您自己前进的方向不同（基本上您拿着设备以一种尴尬的方式）。然后，如果我想应用距离（基于步数检测），将它们应用到加速度计参考（我知道方向）是错误的：它必须根据运动方向旋转。

这就是为什么我想知道您是否可以告诉我一种计算加速度计读数以将其转换为旋转角度（或矩阵）的方法。这种方法必须避免对加速度进行一次积分，因为在廉价的加速度计上误差非常大（否则我认为它很容易执行）。

**编辑：**磁力计和陀螺仪即使在静止时也能帮助您找到设备的方向，但不允许您知道设备在哪个方向移动。我有第一个，我正在寻找第二个。基本上 ：

人体参考（运动方向）-> 设备参考（或加速度计参考）-> 地球参考

我正在寻找找到旋转矩阵以计算从 HR 到 DR 的距离的方法，然后我将其应用于我发现从 DR 到 ER 的旋转矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:35:00.010

我找到了一篇可能有用的文章，这里是 [链接](http://www.ocf.berkeley.edu/~xuanyg/IndoorMap_UPINLBS2010.pdf)。
该想法基于获取 3 轴上的加速度计数据（这是一个 n 乘 3 矩阵）并找到矩阵的 PCA（主成分分析）。PCA 是矩阵中能量最高的 3 个向量）。
理想情况下，主矢量（能量最高）方向是向上的，其次是航向。您可以在文章中阅读所有内容。我尝试在 matlab 中实现该算法，结果还可以（不是很好）希望你能做得更好（我想听听好的结果）。

希望这可以帮助

爱丽儿

# javascript - 在 HTML 和 Javascript 中选择

> ID：10207050
> 
> 赞同：1
> 
> 时间：2012-04-18T09:58:32.483
> 
> 标签：javascript, html

如何识别用户在网页中选择了哪些文本？

示例：我想构建一个类似于在线翻译的应用程序：

*   用户正在阅读一些html（通过我的服务器提供给用户）
*   然后他/她在该页面中选择一个句子（要求翻译）
*   所以javascript应该处理这个事件并发送回服务器请求翻译......

任何想法如何知道用户当前正在选择什么文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:00:14.603

您需要使用[selection rage](https://developer.mozilla.org/en/DOM/Selection)来做到这一点。

例如使用[getSelection()](https://developer.mozilla.org/en/DOM/window.getSelection)方法。

# visual-studio - 当在 vs 中运行项目时，它们只会出现并立即消失

> ID：10207057
> 
> 赞同：-2
> 
> 时间：2012-04-18T09:58:58.707
> 
> 标签：visual-studio

我的天啊！当在 vs 中运行项目时，它们会立即显示并立即消失，所有项目都是 c# 控制台应用程序，我之前运行过它们，没关系，我尝试重置所有设置，但没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:04:21.723

如果您希望您的控制台应用程序输入，您可以将其放在`main`方法的末尾

```
Console.ReadLine(); 
```

然后你需要点击`enter`退出控制台应用程序。

调试时的另一种可能性是在方法的末尾添加一个断点`main`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:26:24.033

它被设置为错误的东西。

项目启动设置为**单个项目**，而不是**当前项目**。

# javascript - 从javascript函数返回数组到objective-c xcode

> ID：10207059
> 
> 赞同：1
> 
> 时间：2012-04-18T09:59:02.390
> 
> 标签：javascript, iphone, xcode, arrays

是否可以从 Javascript 获取字符串数组。我的意思是我在我的 iPhone 应用程序代码中调用 javascript。现在，在函数完成后，我想将字符串数组返回给目标 C 代码。如何返回数组以及我的 Objective-C 代码如何读取该数组？

谢谢阿坎莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:16:21.320

你必须使用 webview 的

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

委托方法。在这里查看我的答案。

[iOS UIWebView Javascript - 插入数据 - 接收回调？](https://stackoverflow.com/questions/7681918/ios-uiwebview-javascript-insert-data-receive-callbacks/7682794#7682794)

更新评论：

和这个，

[在 UIWebView 中提交表单](https://stackoverflow.com/questions/7466875/submit-a-form-in-uiwebview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T17:05:07.917

这是一种更直接的方法。调用要从函数返回`JSON.stringify`的对象。`JSON`然后将该字符串转换为 NSDictionary，类似于[this](https://stackoverflow.com/questions/8356842/how-to-use-nsjsonserialization)。

# sql - 连接表复杂

> ID：10207068
> 
> 赞同：-2
> 
> 时间：2012-04-18T09:59:23.593
> 
> 标签：sql, join, left-join

我有这些桌子

```
Person
ID_PRS   Name
------   -----
1        John
2        Brian
3        Mike

Con_PRS_Fonc
    ID_PRS  ID_FONCT  
    -----   -------
     1       17
     1       18
     3       17

   Fonction
       ID_FONCT   LABEL  ID_CATEG  ID_MET ID_ANA
       -------    -----  --------  ------ ------
         17       Boss      1        56     78
         18       Junior    1        45     56

Category
 ID_CATEG  LABEL
 --------  -----
    1      Cleaning
    2      Wahsing

MEtir
 ID_MET   LABEL
 ------   -----
  56       Go
  45       Come

Analys
 ID_ANA  LABEL
 ------  -----
  78     Think
  56     Drink 
```

我怎样才能得到：

```
ID_PRS  NOM  ID_FONCT   LABEL_FONCT  ID_CATEG  LAB_CAT   ID_MET   LAB_MET   ID_AN   LAB_ANA
------  ---- --------   -----------  --------  -------    ------   -------   -----   -------
   1    John  17         Boss           1      Cleaning   56        GO        56     Think 
```

我知道只有我可以加入表人与表 Con_PRS_Fonc，但我怎样才能加入其他人？

```
SELECT * FROM PERSON
LEFT JOIN Con_PRS_Fonc ON PERSON.ID_PRS = Con_PRS_Fonc .ID_PRS 
```

提前谢谢你，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:08:47.330

像这样的东西：

```
SELECT * FROM person as P
INNER JOIN Con_PRS_Fonc AS CPF ON P.ID_PRS = CPF.ID_PRS 
INNER JOIN FONCTION AS FON ON FON.ID_FONCT = CPF.ID_FONCT
INNER JOIN CATEGORY AS C ON FON.ID_CATEG = C.ID_CATEG
INNER JOIN MEtir AS MEt ON Fon.ID_MET = MEt.ID_MET
INNER JOIN Analys AS ANA ON Fonc.ID_ANA = ANA.ID_ANNA 
```

我无法确认它 100% 正确，但只是加入关系表:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:19:22.710

这应该让你得到你想要的：

```
 SELECT 
Person.ID_PRS, 
Person.Name, 
Fonction.ID_FONCT, 
Fonction.LABEL AS LABEL_FONCT,
Fonction.ID_CATEG,
Category.LABEL AS LAB_CAT,
MEtir.ID_MET,
MEtirLABEL AS LAB_MET, 
Analys.ID_ANA,
Analys.LABEL AS LAB_ANS
FROM PERSON
INNER JOIN Con_Prs_Fonc ON Person.ID_PRS = Con_Prs_Fonc.ID_PRS
INNER JOIN Fonction ON Fonction.ID_FONCT = Con_Prs_Fonc.ID_FONCT
INNER JOIN Category ON Category.ID_CATEG = Fonction.ID_CATEG
INNER JOIN MEtir ON MEtir.ID_MET = Fonction.ID_MET
INNER JOIN Analys ON Analys.ID_ANA = Fonction.ID_ANA 
```

# .net - IRepository 与 ISession

> ID：10207073
> 
> 赞同：1
> 
> 时间：2012-04-18T09:59:31.857
> 
> 标签：.net, asp.net-mvc, repository, castle-windsor

我有一些存储库。与它们的工作是通过一个接口来实现的`IRepository`。
在使用 ISession 实现的[示例项目构造函数中。](http://stw.castleproject.org/Windsor.Windsor-tutorial-ASP-NET-MVC-3-application-To-be-Seen.ashx) `HomeController`当我写这个时：

```
public class TestingController : Controller
{
    private ISession session;

    public TestingController(ISession session)
    {
        this.session = session;
    }
//Some code here with this.session
} 
```

它运作良好。当我决定使用`IRepository`：

```
public class TestingController : Controller
{
    private IRepository repository;

    public TestingController(IRepository repository)
    {
        this.repository = repository;
    }
//Some code here with this.repository
} 
```

它在其他类的这个方法中不起作用`WindsorControllerFactory`：

```
protected override IController GetControllerInstance(System.Web.Routing.RequestContext requestContext, Type controllerType)
    {
        if (controllerType == null)
        {
            throw new HttpException(404, string.Format("The controller for path {0} culd not found!", requestContext.HttpContext.Request.Path));
        }

        return (IController)this.kernel.Resolve(controllerType);
    } 
```

我有例外

> 无法创建组件“MvcApplication1.Controllers.ResultsController”，因为它需要满足依赖关系。
> 
> 'MvcApplication1.Controllers.ResultsController' 正在等待以下依赖项： - 未注册的服务 'dal.Repository.IRepository'。

如何解决？

PS 大会`dal.Repository`正在工作。如果我到处写`new dal.Repository.Repository()`而不是`this.repository`- 它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:02:52.810

看起来您缺少`IRepository`.

你必须有具体的类来实现`IRepository`接口，比如说`MyRepository`。然后你应该配置 Windsor，以了解它`IRepository`是关于什么的。

就像是，

```
container.Register(Component.For<IRepository>().ImplementedBy<MyRepository>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T00:22:05.507

我可以通过遵循本[文档来解决相同的问题](https://github.com/castleproject/Windsor/blob/master/docs/mvc-tutorial-part-9-diagnosing-missing-dependency-issues.md)

另一件事是，如果我们从 github 下载这个项目的新版本，我们将看不到这个异常[链接](https://github.com/kkozmic/ToBeSeen)

# c# - 推特流媒体 API 位置

> ID：10207076
> 
> 赞同：1
> 
> 时间：2012-04-18T09:59:37.373
> 
> 标签：c#, twitter

我正在尝试在 C# 中实现一个 twitter 流查看器，我的问题不在于 C# 本身。

我只是想使用 twitter 的流 API 的地理位置装箱功能。我正在尝试以这种形式发送请求

```
private string url = @"https://stream.twitter.com/1/statuses/filter.json?track="; 
```

然后我附加我的参数

```
 for (int i = 0; i < keywords.Count; i++)
        {
            url += keywords[i].ToString() + "%2C";
        } 
```

到此为止，查询工作正常，当我添加它时它停止工作

```
 url += @"&amp;locations=" + location; 
```

其中，位置变量具有值

```
-121.75,36.8,-122.75,37.8 
```

所以我最终得到的查询看起来像这样

```
https://stream.twitter.com/1/statuses/filter.json?track=twitter%2Cfacebook%2Ciphone&amp;locations=-121.75,36.8,-122.75,37.8 
```

我收到了 406 Not Acceptable 的回复，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:05:39.493

尝试用`&amp;`标准的＆符号替换。

# jquery - jMyCarousel - 不能在一页上查看超过 1 个此轮播实例

> ID：10207080
> 
> 赞同：1
> 
> 时间：2012-04-18T09:59:46.337
> 
> 标签：jquery

嗨，我是新手，所以要友善；）

我使用 jquery idtabs，它在同一页面中包含 2 个单独的轮播（id 喜欢最终将其增加到 4 个）。

不幸的是，当单击第二个链接时，轮播不会像在链接 1 中那样执行。您可以在此处查看示例：[http ://www.ipdesign.com/bp/carousel_example.html](http://www.ipdesigned.com/bp/carousel_example.html)

我完全不知道为什么会这样。我已经替换了 jMyCarousel 类并将它们称为 jMyCarousel2 - 我还是一个新手，所以如果这篇文章不是很清楚，任何帮助 y= 将不胜感激，也道歉。

干杯伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:08:01.493

在您拥有的代码中`$(".jMyCarousel2").jMyCarousel2({ ...`，正确的功能是`.jMyCarousel({...`.

此外，因为您使用的是类选择器，您只需要定义一次插件。尝试这个：

```
<script type="text/javascript">
    $(function() {
        $(".jMyCarousel").jMyCarousel({
            visible: '4',
            eltByElt: true,
            evtStart: 'mousedown',
            evtStop: 'mouseup'
        });
    });
</script> 
```

`div`然后将每个轮播的包装更改为具有`jMyCarousel`该类：

```
<div class="jMyCarousel"> 
```

# python - 如果我在 mod_python 上有一些网页，在 mod_wsgi 上有一些网页，则维护用户身份验证

> ID：10207087
> 
> 赞同：0
> 
> 时间：2012-04-18T10:00:08.870
> 
> 标签：python, django, apache, mod-wsgi, mod-python

我有一个用原始 python 编写并使用 mod_python 托管在 apache 上的 Web 应用程序。我正在构建另一个基于 django 的 Web 应用程序，它将使用 mod_wsgi 托管在同一台服务器上。

现在，场景是这样的，用户将从使用 mod_python 的网页登录，并且链接会将他发送到我将使用 mod_wsgi 的应用程序。我的问题是如何保持会话？我需要相同的身份验证才能为我的应用程序工作。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:15:24.887

从概念上讲：使用您在“欢迎”视图或 Django 中的自定义中间件类中处理的原始 python 网页存储一个 cookie，并将它们插入会话数据库中。这基本上是hungnv的建议。

最荒谬的方法是弄清楚 Django 如何处理会话和会话 cookie，将正确的行从原始 python 应用程序插入到 Django 的会话数据库中，然后使用 Django 的身份验证函数自定义设置会话 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:20:29.127

如果您使用带有 mod_wsgi 的 django 和仅提供 django 应用程序链接的原始 python 页面，则不需要在两个页面上都维护会话。当用户单击第一个链接并到达 django 应用程序时，只需检查那里的会话。

Django 有使用 memcache 的 session_db。更多信息可以在这里找到： [Django Sessions](https://stackoverflow.com/questions/50568/django-sessions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:01:52.077

对跨 Web 应用程序的 SSO 的支持很差。您可以查看的一件事是：

[http://www.openfusion.com.au/labs/mod_auth_tkt/](http://www.openfusion.com.au/labs/mod_auth_tkt/)

您可以做的实际上取决于您当前在 mod_python 应用程序中使用的身份验证数据库以及您如何记住某人已登录。如果您可以提供该信息，也许可以提出其他建议。

# sql - SQL/参数：位置和（然后）命名？

> ID：10207094
> 
> 赞同：2
> 
> 时间：2012-04-18T10:00:46.273
> 
> 标签：sql, oracle, parameter-passing, named-parameters

在 Oracle 中调用过程/函数时，位置和命名（和默认）类型的参数序列是否有规则？
...就像位置参数排在第一位...
...或者命名出现在列表的最后？任何例子（它不在文档中）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T10:05:16.613

假设您使用的是支持混合命名参数和位置参数的 Oracle 版本（如果内存服务，这是 11g 中的新功能，但我不能保证），位置参数需要放在第一位。从逻辑上讲，如果您尝试使用位置参数，则位置需要正确。

这肯定是有记录的。查看PL/SQL 用户指南的[实际参数的位置、命名和混合表示法部分](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/subprograms.htm#LNPLS00825)

# ruby-on-rails - 将自定义列添加到 ruby 集合

> ID：10207111
> 
> 赞同：0
> 
> 时间：2012-04-18T10:01:50.583
> 
> 标签：ruby-on-rails, ruby, activerecord, collections

好的，这就是我所拥有的

**wines 表**中的列-> ID，**价格表**中的名称
列-> ID，wine_id，价格

 **```
@query = Wine.find(:all) 
```

现在如何向@query 哈希添加自定义价格列？这可以做到吗？

这就是我最终想要的

```
<% @query.each do |e| %>
  <%= e.price %>
<% end %> 
```

* * *

**编辑：**

*实际表结构*

> 葡萄酒有很多库存
> 
> 库存有一个葡萄酒
> 库存有一个区域
> 库存有很多可用性
> 
> 可用性有一个库存
> 可用性有一个 Markupprofile_id
> 可用性有一个 Discountprofile_id

这是我遵循的过程

```
#special offers
@q_array = Array.new
@q = SpecialOffers.find(:all, :conditions => ["client_id = ? AND application_id = ?", @client_id, @app_id])
@q.each do |e|
    @q_array << e.availability_id
end

#filter, Special Offers, Client App Id, Zone, Available
@special_offers = Wine.find(:all, :include => [:availabilities, :zones], :conditions => ["availabilities.available = ? AND availabilities.id IN (?) AND availabilities.client_application_id = ? AND zones.id = ?", true, @q_array, @client_app_id, session[:zone_id]], :order => 'wines.name ASC')
#search page = 1, new arrivals = 2, special offers = 3, best sellers = 4, show page = 5
add_markup(@special_offers, 3) 
```

现在**我有了我想要的葡萄酒**，我通过**add_markup()运行它们**

```
def add_markup(collection, unique)

@price_array ||= [] #if null create blank array

collection.each do |e|
e.inventories.each do |f|
if session[:zone_id] == f.zone_id

@availability = Availability.find_by_inventory_id_and_client_application_id(f.id, @client_app_id)
@price = f.price

if @availability
if @availability.discount == true
price = Pricingmodel.find_by_discountprofile_id(@availability.discountprofile_id)
if price
was_price = Pricingmodel.find_by_markupprofile_id(@availability.markupprofile_id)

f.price = ((price.markup.to_f / 100) + 1) * @price * 6 #this is the normal price
f.stock = ((was_price.markup.to_f / 100) + 1) * @price * 6 #this is the discounted price
else
price = Pricingmodel.find_by_markupprofile_id(@availability.markupprofile_id)

f.price = ((price.markup.to_f / 100) + 1) * @price * 6 #this is the normal price
f.stock = ((price.markup.to_f / 100) + 1) * @price * 6 #this is the discounted price
end
else
price = Pricingmodel.find_by_markupprofile_id(@availability.markupprofile_id)

f.price = ((price.markup.to_f / 100) + 1) * @price * 6 #this is the normal price
f.stock = ((price.markup.to_f / 100) + 1) * @price * 6 #this is the discounted price
end
end

end
end
end
end 
```

**f.price 还可以**，正常价格。**问题是，我还想在**

某个位置显示折扣 价)**有什么办法可以“添加”一个 of_type 浮点列到这个集合中**？可以说float类型的discounted_price列？这可以做到吗？

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:10:43.940

让我们假设您在 Wine 和 Price 之间有 has_one 关联

然后

```
class Wine < ActiveRecord::Base
  has_one :price
end 
class Price < ActiveRecord::Base
   belongs_to :wine
end 
```

然后在您的视图中显示如下价格。

```
<% @query.each do |e| %>
  <%= e.price.price %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:30:55.590

我认为您可以使用 attr_accessor 来实现这一点！

看一眼：

[在 Rails 中使用 attr_accessor](https://stackoverflow.com/questions/2793098/usage-of-attr-accessor-in-rails)

[为什么要使用 Ruby 的 attr_accessor、attr_reader 和 attr_writer？](https://stackoverflow.com/questions/5046831/why-use-rubys-attr-accessor-attr-reader-and-attr-writer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:39:01.073

我建议你使用`delegate`.

```
class Wine < ActiveRecord::Base
  has_one :price
  delegate :rate, :to => :price # Notice 'rate' instead of 'price'. So that you could still get the associated price record.
end

class Price < ActiveRecord::Base
  belongs_to :wine
end 
```

你可以简单地做

```
<% @query.each do |e| %>
  <%= e.rate %>
<% end %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:11:36.577

你有两个类之间的关联吗？

```
class Wine < ActiveRecord
  has_one :price
end

class Price < ActiveRecord
  belongs_to :wine
end 
```

然后你可以简单地调用：

```
<% @query.each do |e| %>
  <%= e.price.price %>
<% end %> 
```******

# windows-phone-7 - wp7中长列表选择器的实现

> ID：10207114
> 
> 赞同：0
> 
> 时间：2012-04-18T10:02:00.570
> 
> 标签：windows-phone-7, windows-phone-7.1

长列表选择器是否需要使用 Grouping 类？在我的应用程序中，我使用一个简单的列表控件来保存大量数据。现在我觉得普通列表存在一些性能问题（内存和加载）问题。所以我决定将我的列表更改为长列表选择器。我怀疑是否可以使用相同的项目模板和项目源来实现长列表。在一个例子中，我找到了一个分组类。这个分组有必要吗？？如果不是，我如何用我现有的数据来实现它。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:08:15.203

您确实需要按某种类型的字段对数据进行分组，因此您将拥有一个组列表，并且在每个组内，该组的项目列表！

我认为[这](http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part2-data-binding-scenarios)是解释如何使用 LongListSelector 的最佳文章之一！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:59:27.527

如果您不需要组数据，只需设置：`IsFlatList = true`

# facebook - Facebook 应用程序重定向到外部网站

> ID：10207118
> 
> 赞同：1
> 
> 时间：2012-04-18T10:02:24.423
> 
> 标签：facebook, redirect

我正在尝试让应用程序重定向到外部网站。我找到了一家已经做到的公司（见图[）](http://www.freeimagehosting.net/nk86o)。如果您输入他们的名称“Safarinow”，则会出现第一个结果，即一个应用程序。当您单击该应用程序时，您将被重定向到“http://www.safarinow.com”。

有人知道如何实现这一目标吗？

ps 我实际上不是开发人员，而是社交媒体经理，所以我对编码等的理解有限。我刚刚被要求找出如何为懒惰的开发团队做这件事。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:19:33.330

这可以通过在您的应用程序 iframe 中使用 Javascript 来完成。该javascript可以像这样更改顶级网址：

```
window.top.location = 'http://www.my-website.com/'; 
```

您只需在网站加载时运行此代码。例如通过使用 jQuery：

```
jQuery(window).load(function() { window.top.location = 'http://www.my-website.com/'; }); 
```

# ios5 - 从动态原型单元格显示弹出视图

> ID：10207123
> 
> 赞同：5
> 
> 时间：2012-04-18T10:02:40.617
> 
> 标签：ios5, storyboard, cell, segue, popover

我正在开发一个带有自定义拆分视图的 Ipad 应用程序。在主视图中，我有一个 tableViewController。我使用导航栏中的添加按钮在其中添加项目。此按钮通过弹出框链接（我使用情节提要）链接到另一个 tableViewController，其中包含一些用于输入数据的单元格。一个“保存”按钮关闭弹出视图，并在 masterView 列表中添加项目。我接下来要做的是将主视图的原型单元格链接到另一个视图，以使用户能够编辑所选项目。我想将此视图与弹出框链接（就像添加按钮一样），问题出在哪里：我从 xcode 收到一个红色问题：无法编译连接：=> anchorView => >。

这是我的代码示例，可以正常工作。当我点击一个单元格进行编辑时，我也想做同样的事情。

masterSplitView 表

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"assetCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    // Configure the cell...
    AssetModel *myAssetModel = [self.arrayAsset objectAtIndex:indexPath.row];
    cell.textLabel.text = myAssetModel.name;
   // cell.textLabel.text = @"test";

    return cell;

}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if([segue.identifier isEqualToString:@"addAssetSegue"]){
        AddAssetTVC *addAssetTVC = segue.destinationViewController;
        addAssetTVC.delegate = self;

        UIStoryboardPopoverSegue* popoverSegue = (UIStoryboardPopoverSegue*)segue;
        [addAssetTVC setPopoverController:[popoverSegue popoverController]];

    }

}

- (void) theSaveButtonOnTheAddAssetTVCWasTapped:(AddAssetTVC *)controller{
    [controller.navigationController popViewControllerAnimated:YES];
    [self reloadCache];
    [self.tableView reloadData];
    [self viewDidLoad];
} 
```

以及添加视图的保存方法：

```
- (IBAction)save:(id)sender{
    [popoverController dismissPopoverAnimated:YES];
    NSLog(@"Telling the ADDASSET Delegate that Save was tapped on the AddAssetTVC");

    {...unrevelant coredata methods}

    [self.delegate theSaveButtonOnTheAddAssetTVCWasTapped:self];
} 
```

谢谢你的阅读，

亚历山大

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:39:30.500

我有同样的问题。通过使用自定义 segue 解决了它。在类的`prepare`方法中：

1.  获取源视图控制器，它是自定义控制器或`UITableViewController`
2.  抓取目标控制器
3.  使用目标控制器创建一个`UIPopoverController`初始化
4.  获取当前选中行的单元格
5.  将弹出框作为属性存储在目标控制器上（这样您可以将其关闭并且不会被释放）
6.  使用单元格`frame`作为弹出窗口`CGRect`
7.  设置弹出框的大小，否则它将是最大大小

这是一些示例代码：

```
UITableViewController *tvc = (UITableViewController *)self.sourceViewController;
DetailsViewController *details = (DetailsViewController *)self.destinationViewController;    
UITableViewCell *cell = [tvc.tableView cellForRowAtIndexPath:[tvc.tableView indexPathForSelectedRow]];

UIPopoverController *pop = [[UIPopoverController alloc] initWithContentViewController:details];

details.popoverController = pop;

CGSize size = CGSizeMake(640, 460);
pop.popoverContentSize = size;

[pop presentPopoverFromRect:cell.frame
                     inView:tvc.tableView 
   permittedArrowDirections:UIPopoverArrowDirectionUp | UIPopoverArrowDirectionDown 
                   animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:32:27.303

我已经能够用最少的编码做到这一点。尝试这个：

1.  我在工具栏或导航栏上添加了一个按钮。这是一个虚拟按钮，将成为 Popover 的锚点。禁用按钮（取消选中启用）。您对多个表格视图使用相同的按钮。我使用按钮中的 Organizer 图标图像来模拟向下钻取，或者您可以在调用 performSegueWithIdentifier 之前在 didSelectRowAtIndex 方法中为每个设置自定义图像或标题...稍后解释...
2.  然后将按钮连接到您的 Popover 视图。显然将类型设置为 Popover
3.  点击 Segue 箭头并命名 Segue，例如：“SegToDetail”。
4.  现在在带有 tableview 的 Master / Parent 代码中添加方法 didSelectRowAtIndex... 在该方法中，您可以设置按钮的外观。最重要的是，您调用： [self performSegueWithIdentifier:@"SegToDetail"... 就是这样...
5.  现在您可以在 prepareForSegue 方法中传递任何信息，就像在任何 segue 转换中一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-08T03:30:31.137

基于@Rich 的回答，但`PopoverPresentationController`在 Swift 中使用和使用。

```
override func perform() {
    let svc = self.sourceViewController as! yourSourceViewController
    let pvc = self.destinationViewController as! yourPresentedViewController

    // Present the view controller using the popover style
    pvc.modalPresentationStyle = UIModalPresentationStyle.Popover
    svc.presentViewController(pvc, animated: true, completion: nil)

    // Get the popover presentation controller and configure it
    let cell = svc.tableView.cellForRowAtIndexPath(svc.tableView.indexPathForSelectedRow!)
    let presentationController = pvc.popoverPresentationController
    presentationController!.permittedArrowDirections = .Any
    presentationController!.sourceView = svc.tableView
    presentationController!.sourceRect = cell!.frame
} 
```

# android - 无法在 Netbeans 上编译 Android hello world

> ID：10207124
> 
> 赞同：2
> 
> 时间：2012-04-18T10:02:44.367
> 
> 标签：android, netbeans

这是我在这个非常有用的网站上的第一篇文章！

经过 30 分钟的谷歌搜索并在您输入问题名称时发现了非常有用的自动搜索功能，我想我终于可以注册一个帐户并提出问题了！

好吧，这是我第一次弄脏我的手，我看到直接在我脸上打了一个错误，形式如下：

我了解一些编码概念，但是我仍然非常陌生，我想从本网站上乐于助人的人那里了解导致这种情况发生的原因，谢谢！

```
clean:
Deleting directory C:\Users\User\Documents\NetBeansProjects\AndroidApplication1\bin
Deleting directory C:\Users\User\Documents\NetBeansProjects\AndroidApplication1\gen
Creating output directories if needed...
Created dir: C:\Users\User\Documents\NetBeansProjects\AndroidApplication1\bin
Created dir: C:\Users\User\Documents\NetBeansProjects\AndroidApplication1\bin\res
Gathering info for AndroidApplication1...
Android SDK Tools Revision 19
Project Target: Google APIs
Vendor: Google Inc.
Platform Version: 2.3.3
API level: 10
------------------
Resolving library dependencies:
No library dependencies.

------------------
API<=15: Adding annotations.jar to the classpath.

------------------
WARNING: No minSdkVersion value set. Application will install on all Android versions.
Created dir: C:\Users\User\Documents\NetBeansProjects\AndroidApplication1\gen
Created dir: C:\Users\User\Documents\NetBeansProjects\AndroidApplication1\bin\classes
----------
Handling aidl files...
No AIDL files to compile.
----------
Handling RenderScript files...
No RenderScript files to compile.
----------
Handling Resources...
Generating resource IDs...
----------
Handling BuildConfig class...
Generating BuildConfig class.
Compiling 3 source files to C:\Users\User\Documents\NetBeansProjects\AndroidApplication1\bin\classes
Converting compiled files and external libraries into C:\Users\User\Documents\NetBeansProjects\AndroidApplication1\bin\classes.dex...
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
Error occurred during initialization of VM
Could not reserve enough space for object heap
C:\Program Files\Android\android-sdk\tools\ant\build.xml:818: The following error occurred while executing this line:
C:\Program Files\Android\android-sdk\tools\ant\build.xml:820: The following error occurred while executing this line:
C:\Program Files\Android\android-sdk\tools\ant\build.xml:832: The following error occurred while executing this line:
C:\Program Files\Android\android-sdk\tools\ant\build.xml:278: null returned: 1
BUILD FAILED (total time: 3 seconds) 
```

以及发生错误的行：

C:\Program Files\Android\android-sdk\tools\ant\build.xml

```
<!-- Converts this project's .class files into .dex files -->
    <target name="-dex" depends="-compile, -post-compile, -obfuscate">
818     <do-only-if-manifest-hasCode elseText="hasCode = false. Skipping...">
            <!-- only convert to dalvik bytecode is *not* a library -->
820         <do-only-if-not-library elseText="Library project: do not convert bytecode..." >
                <!-- special case for instrumented builds: need to use no-locals and need
                     to pass in the emma jar. -->
                <if condition="${build.is.instrumented}">
                    <then>
                        <dex-helper nolocals="true">
                            <external-libs>
                                <fileset file="${emma.dir}/emma_device.jar" />
                            </external-libs>
                        </dex-helper>
                    </then>
                    <else>
832                     <dex-helper />
                    </else>
                </if>
            </do-only-if-not-library>
        </do-only-if-manifest-hasCode>
    </target>

<!-- Configurable macro, which allows to pass as parameters output directory,
         output dex filename and external libraries to dex (optional) -->
    <macrodef name="dex-helper">
        <element name="external-libs" optional="yes" />
        <attribute name="nolocals" default="false" />
        <sequential>
            <!-- sets the primary input for dex. If a pre-dex task sets it to
                 something else this has no effect -->
            <property name="out.dex.input.absolute.dir" value="${out.classes.absolute.dir}" />

            <!-- set the secondary dx input: the project (and library) jar files
                 If a pre-dex task sets it to something else this has no effect -->
            <if>
                <condition>
                    <isreference refid="out.dex.jar.input.ref" />
                </condition>
                <else>
                    <path id="out.dex.jar.input.ref">
                        <path refid="project.libraries.jars" />
                    </path>
                </else>
            </if>

            <dex executable="${dx}"
                    output="${intermediate.dex.file}"
                    nolocals="@{nolocals}"
278                 verbose="${verbose}">
                <path path="${out.dex.input.absolute.dir}"/>
                <path refid="out.dex.jar.input.ref" />
                <external-libs />
            </dex>
        </sequential>
    </macrodef> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:07:03.300

听起来像是内存问题？

> VM 初始化期间发生错误
> **无法为对象堆保留足够的空间**

（我的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-15T10:22:54.557

[好吧，当我尝试运行示例 vs-android ( https://code.google.com/p/vs-android/](https://code.google.com/p/vs-android/) ) 应用程序时，我遇到了完全相同的错误。

经过大量的捣乱后，我实际上并不知道是什么原因造成的，但我确实找到了解决方法。

显然由于某种原因，JVM 无法初始化，因为它觉得系统中没有足够的内存。解决方法是将 JVM 设置为使用 512MB 的堆大小而不是 1024MB 的默认大小进行初始化。为此，请执行以下操作：

```
Go to Start->Control Panel->System->Advanced->Environment Variables->System Variables->New:

Variable name: _JAVA_OPTIONS <br>
Variable value: -Xmx512M 
```

尽管我仍然无法部署到我的设备，但这为我解决了错误，但这是一个不同的问题，至少它编译并创建了一个 apk - 我可以将其复制到设备上并运行它。

# php - 应用程序页面未在 IE 中重定向

> ID：10207132
> 
> 赞同：0
> 
> 时间：2012-04-18T10:03:12.097
> 
> 标签：php, facebook

我有一个 Facebook 应用程序，它基本上是一个工作应用程序。职位标题链接到职位详细信息页面。对我来说，该页面在 Firefox、chrome 和 IE 中完美打开。但是，我们的一位客户指出该页面无法在 IE 中打开。这个问题的可能原因是什么？如果页面被刷新，页面就会正常显示。请找到下面的链接以获取屏幕截图...

[https://myparichay.in/myparichay/images/image.png](https://myparichay.in/myparichay/images/image.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:16:10.213

我看到 FB 正在以安全模式运行，这意味着 https 已激活。您有目标域的 SSL 证书吗？

# html - 这种验证码方法的缺点是什么

> ID：10207135
> 
> 赞同：3
> 
> 时间：2012-04-18T10:03:15.383
> 
> 标签：html, css, captcha, spam-prevention

我在很多网站的所有表单上都使用了这种验证码方法，基本前提是我有一个被css隐藏的文本框，如果服务器端代码确定该框中有任何内容，那么表单没有完全的。

客户端：

```
<li id="li-cap"><label>Leave this field blank</label><input type="text" maxlength="30" id="cap" name="cap" /></li> 
```

CSS：

```
#li-cap{display:none} 
```

服务器端伪代码：

```
if(!nullOrEmpty(input#cap))
{
    return post back to form with error
}
else
{
    process form
} 
```

**这暂时忽略了任何客户端验证**

我一直在使用这种形式的验证码（我相信它有一个名字，但不记得了，认为它以 p 开头）有一段时间了，我看到了很多不同类型的验证码：数学和，图像上的随机字母，问题。

我的版本不需要用户输入，而且我根本没有收到垃圾邮件表单。这实际上是一个好方法，还是我有点幸运？我应该使用更强的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:07:42.137

This type of captcha is relatively strong for typical spambots, that fill all the fields. However, it is completely inefficient for site-based floodbots, and this is why it will not be used on high-audience websites.

# iphone - locationManager didFailWithError 反复调用

> ID：10207138
> 
> 赞同：0
> 
> 时间：2012-04-18T10:03:24.347
> 
> 标签：iphone, objective-c, ios, ios4

当位置管理器无法找到当前位置时，我会显示 alertViews。我是这样做的

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {

[manager stopUpdatingLocation];

switch([error code])
{
    case kCLErrorNetwork: // general, network-related error
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Please check your network connection or that you are not in airplane mode" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    }
        break;
    case kCLErrorDenied:{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"User has denied to use current Location " delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    }
        break;
    default:
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Unknown network error" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    }
        break;
}

} 
```

我的问题是**locationManager didFailWithError 方法被反复调用**。所以我的警报视图反复显示。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T10:10:09.823

苹果文档指出：

> 如果定位服务无法立即检索位置，它会报告*kCLErrorLocationUnknown*错误并继续尝试。在这种情况下，您可以简单地忽略错误并等待新事件。
> 
> 如果用户拒绝您的应用程序使用定位服务，此方法将报告*kCLErrorDenied*错误。收到此类错误后，您应该停止定位服务。

因此，您可能会跳过一些停止更新并显示警报的情况，尤其是默认情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:14:47.173

对于可以由正在进行的后台进程（如位置管理器）触发的错误消息，一个好的开始是将引用存储到`UIAlertView`. 当代理收到`alertView:clickedButtonAtIndex:`时，将此引用重置为`nil`. 在显示新错误之前，请检查一个是否已经可见。

更好的是，不要显示来自后台进程的模态错误消息。只是四处走动，你偶尔会失去接收，并且在发生这种情况时不得不忽略错误是很乏味的。如果您的应用具有配置或帮助屏幕，请在其中包含来自位置管理器（或游戏中心，或 iCloud，或其他任何偶尔失去连接的东西）的最新错误消息的空间。

# c++ - 在 C++ 中实现相关类型之间自动类型转换的最佳方法是什么？

> ID：10207139
> 
> 赞同：3
> 
> 时间：2012-04-18T10:03:36.123
> 
> 标签：c++

我正在实现 5 个坐标系（我们称它们为 A、B、C、D、E），每个坐标系都有自己独特的类型`Coordinates<System>`来保存坐标。我希望 C++ 编译器能够在不同系统的坐标之间自动正确转换。坐标变换形成一个图形：ABCD 和 CE。因此，我们只需要指定 8 个基本转换，编译器将生成其余的：

```
enum CoordSys { A,B,C,D,E };
template<CoordSys System> struct Coordinates;
template<> struct Coordinates<A> {  // specialisation for system A
   // ...
   operator Coordinates<B>() const; // implements transformation A -> B
};
template<> struct Coordinates<B> {  // specialisation for system B
   // ...
   operator Coordinates<A>() const; // implements transformation B -> A
   operator Coordinates<C>() const; // implements transformation B -> C
};
template<> struct Coordinates<C> {  // specialisation for system C
   // ...
   operator Coordinates<B>() const; // implements transformation C -> B
   operator Coordinates<D>() const; // implements transformation C -> D
   operator Coordinates<E>() const; // implements transformation C -> E
};
template<> struct Coordinates<D> {  // specialisation for system D
   // ...
   operator Coordinates<C>() const; // implements transformation D -> C
};
template<> struct Coordinates<E> {  // specialisation for system E
   // ...
   operator Coordinates<C>() const; // implements transformation E -> C
}; 
```

编译器会计算出任意两个系统坐标之间的转换，例如

```
double radiusE(Coordinates<E> const&x); // radius is best computed from system E

template<CoordSys Sys> double radius(Coordinates<Sys> const&x)
{ return radiusE(x); }       // implicit type conversion to system E 
```

然而，专业化是乏味的，因为这些`// ...`部分可能很长而且大致相同（如果我从一个共同的基础继承仍然很乏味）。理想情况下，我想避免专业化并且只定义一个类模板`Coordinates<>`——我该怎么做？或者还有其他有用的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:54:59.803

我会在构造函数中进行隐式转换，而不是转换为成员函数。

这样，您可以在坐标类型上使用模板构造函数，如果您不需要全速转换，则可以将所有内容转换为笛卡尔（或其他），然后转换为特殊表示：

```
 template<class X>
 class Coordinate {
     template <class Y>
     Coordinate(Coordinate<Y> that) { setFromCartesian(that.toCartesian()); }

     Coordinate<Cartesian> toCartesian() { ... }

     ....
 } 
```

然后，您可以将该 ctor 专门用于那些需要专用代码速度的转换，但为大多数其他代码保留上述版本。

您还可以使用 enable_if 和 free 函数来确保构造函数正确失败：

```
 Coordinate<A> convert(Coordinate<B> that) { return ... }       

   template<class X, class Y>
   struct ConvertCheck {
        static const bool ok = False;
   };

   template<>
   struct ConvertCheck<A, B> {
        static const bool ok = True
   };

   ..

   template<class X>
   class Coordinate {  
         typedef Coordinate<X> this_type;

         template <class Y>
         Coordinate(Coordinate<Y> that, boost::enable_if(ConvertCheck<X,Y>::ok) { 
             *this = convert<this_type>(that);
         }

         ...
   } 
```

另一种方法是使用元编程定义转换链并调用正确的序列（使用 boost::mpl 或类似的东西）。那将是一个很好的练习，我现在没有时间充实......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:11:15.177

你如何选择一个简单的`Coordinate`类型，它具有一些可转换为所有系统的内部表示（例如，它将数据存储在 system 中`A`），然后有一些方法可以转换为专门的类型？就像是

```
class Coordinate {
public:
  CoordinateA toSystemA();
  CoordinateB toSystemB();
  // ..
}; 
```

我什至不确定你为什么首先需要模板。这个想法是，您有一个可以转换为特化的规范表示，而不是链接转换（假设您想为每个坐标系使用专门的类型，以便您的函数签名更具描述性）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:40:52.480

既然你说它基本相同，我的想法如下：

```
enum CoordSys { A,B,C,D,E };

template<CoordSys System>
struct Coordinates
{
    template<CoordSys XformSystem>
    operator Coordinates<typename
                         std::enable_if<!std::is_same<System, XformSystem>::value,
                                        XformSystem>::type
                        >() const
    {
        // implementation according to System -> XformSystem
    }
}; 
```

未经测试的想法，请随时编辑。

# jquery-mobile - jQuery Mobile：调用 JavaScript 函数 ReferenceError：找不到变量

> ID：10207144
> 
> 赞同：2
> 
> 时间：2012-04-18T10:03:53.003
> 
> 标签：jquery-mobile

如果使用此代码，我的代码将起作用：

```
for(i=0; i<listUsers.length; i++){
   if(listUsers[i] != usr){
      $( "#listHisUser" ).append('<li><a href="#hist_cont" onclick="getChatContent()">'+listUsers[i]+'</a></li>').listview('refresh');
   }
}

function getChatContent(){
   alert("data");
} 
```

但如果我把它改成这样：

```
for(i=0; i<listUsers.length; i++){
   if(listUsers[i] != usr){
      $( "#listHisUser" ).append('<li><a href="#hist_cont" onclick="getChatContent('+listUsers[i]+')">'+listUsers[i]+'</a></li>').listview('refresh');
      }
}

function getChatContent(data){
      alert(data);
      alert("data");
} 
```

它出现错误：我单击的列表视图项目`ReferenceError: Can't find variable: tqminh at file:///android_asset/www/index.html#hist:1`在哪里。`tqminh`

```
<!-- History -->
<div data-role="page" id="hist" data-title="HISTORY">
   <div id="a" data-role="header" data-theme="b">
   <h1 style="text-align: left;font-size: 20px">History Chat</h1>
   </div>       
   <div data-role="content" data-inset="true">
   <ul data-role="listview" data-theme="c">
   <li><a href="#" onclick="getChatContent('tqminh')">tqminh</a></li>
   </ul>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:48:43.033

您的函数参数未呈现为字符串。尝试更换

```
<a href="#hist_cont" onclick="getChatContent('+listUsers[i]+')">'+listUsers[i]+'</a> 
```

和

```
<a href="#hist_cont" onclick="getChatContent(\''+listUsers[i]+'\')">'+listUsers[i]+'</a> 
```

# xml - 在 Eclipse 之外创建的 xml 文件将无法验证

> ID：10207147
> 
> 赞同：0
> 
> 时间：2012-04-18T10:04:02.620
> 
> 标签：xml, eclipse, xml-validation

我有 2 个包含完全相同的 XML 数据的 XML 文件（或者至少现在有），第一个是我在 eclipse 之外创建的并将其复制到工作区中。

第二个是使用 eclipse XML 向导创建的。

在第一个文件中，XML 始终无法通过此错误验证...

> 引用的文件包含错误（文件：/X:/GLUCODEX/BaseDevel/DB_Logic.xsd）。

当我单击显示详细信息时，我得到了这个....

> 通过文件“GlucodexDCheck.xml”验证文件“DB_Logic.xsd”时检测到以下错误。在大多数情况下，可以通过直接验证“DB_Logic.xsd”来检测这些错误。但是，只有在 GlucodexDCheck.xml 的上下文中验证 DB_Logic.xsd 时，才会发生错误。

如果内容相同，我如何链接第一个文件以使其验证，请记住 2 个文件的内容完全相同。除了一个链接到单独位置的文件外

错误消息显示在正确的位置找到该文件。当我在 Eclipse 中验证 XSD 时，它验证正常。

我猜它在某种程度上与创建 XSD 等链接的向导有关，但我找不到如何将它添加到我的原始文件中。

在此先感谢您的帮助。

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:13:13.043

所以我终于找到了解决方案。

我在 Eclipse 中创建了一个新项目，仅用于开发静态网页和我可能需要的任何 XSD 模式。

然后我将当前的 XSD 文件复制到这个项目中，然后使用 <窗口-首选项-XML-XML 目录>将这些文件添加为用户指定的条目。

我现在可以在需要时将这些文件作为条目包含在其他项目中。

Brill，所有的验证工作，现在我把我所有的 CSS、XSD 和其他公用的东西放在一个合理的位置......

现在我所需要的就是让 Maven 再次工作......

成为风滚草很有趣，而它持续了！

大卫

# java - 没有pom的声纳？

> ID：10207148
> 
> 赞同：1
> 
> 时间：2012-04-18T10:04:07.287
> 
> 标签：java, maven, sonarqube

我在搞乱声纳，关于如何在没有 pom.xml 的情况下启动和运行声纳的教程和指南数量有限。

当我使用 Maven 时，它非常简单，只需 2 个命令，您就可以开始运行了！

但是，让我们考虑一下您想在一个不使用 maven 的项目上使用 Sonar，或者出于这个原因的 pom.xml-files。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:49:26.523

如果您想运行声纳分析，您不必使用 Maven。您还可以使用 Ant（[请参阅 doc](http://docs.codehaus.org/display/SONAR/Analyse+with+Ant+Task)）或简单地使用 Java Runner（[请参阅 doc](http://docs.codehaus.org/display/SONAR/Analyse+with+a+simple+Java+Runner)）。

Java Runner 确实是最简单的方法，在分析使用除 Java 之外的其他语言（例如 C#、PHP、Groovy、Python、Cobol、C/C++ 等）构建的应用程序时，这实际上是首选方法

将 Maven 用于 Java 项目的主要优点是它可以编译项目并为您运行单元测试。

使用 Ant 肯定会更复杂一些，但是我们提供了[示例应用程序](https://github.com/SonarSource/sonar-examples/tree/master/projects)，您可以使用它来开始使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:20:57.463

虽然我没有亲自尝试过，但我认为你肯定可以。请参阅此链接[http://docs.codehaus.org/display/SONAR/Analyse+with+Ant+Task+1.0](http://docs.codehaus.org/display/SONAR/Analyse+with+Ant+Task+1.0)

但是要准备好花一些时间让它工作，因为它不会像 mvn sonar:sonar 那样简单

# java - Eclipse Java 中的 Scala 对象嵌套类

> ID：10207149
> 
> 赞同：4
> 
> 时间：2012-04-18T10:04:14.383
> 
> 标签：java, scala, eclipse-jdt, scala-java-interop

使用 Eclipse IDE 时，我无法从 Java 代码中引用 Scala 类。有问题的 Scala 类嵌套在 Scala 对象结构中。当尝试在 Java 代码中使用该类时，Eclipse 抱怨使用二进制名称。

下面是定义感兴趣的类 ( ) 的 Scala 代码示例`Inner`：

```
package mypackage;

object Outer {
  object Middle {
    class Inner {
      def msg() {
        println("Running");
      }
    }
  }
} 
```

要在 Java 代码中使用该类`Inner`，我使用以下代码：

```
mypackage.Outer$Middle$Inner inner = new mypackage.Outer$Middle$Inner();
inner.msg(); 
```

但是，Eclipse (Indigo) 编译器在第一行抱怨以下消息：

> 嵌套类型 mypackage.Outer$Middle$Inner 无法使用其二进制名称引用

有趣的是，上面的 Java 代码在与 NetBeans 6.9.1 一起使用时有效。

这是 Eclipse 编译器的问题吗？是否有任何标志允许使用二进制名称？或者，或者，这是 Scala 的问题还是我使用它的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:59:11.263

无法从 Java 访问深度嵌套的对象。既不来自 Eclipse，也不来自命令行或任何构建工具。字节码翻译会丢失嵌套信息。

Eclipse 不允许你使用`$`名字，所以它会报错。如果您关心 Java 互操作，则应该在边界处坚持使用类似 Java 的 Scala。顶级类，纯特征或抽象类，没有高阶方法等。

# android-sensors - 如何在手机和平 板电脑上设置不同的方向更改设置？

> ID：10207152
> 
> 赞同：0
> 
> 时间：2012-04-18T10:04:31.943
> 
> 标签：android-sensors, android, android-orientation

我为手机和银河标签制作了一个应用程序。我只想在手机上成为纵向模式，在标签中也是纵向和横向模式。

到目前为止，我得到了这个代码片段：

```
 public void onCreate(Bundle savedInstanceState)
        {
            DisplayMetrics dm = new DisplayMetrics();
            getWindowManager().getDefaultDisplay().getMetrics(dm);

            int width = dm.widthPixels;
            int height = dm.heightPixels;

            if(!(width>=800 && height>=1280))
            {
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
            }

            super.onCreate(savedInstanceState);
            setContentView(R.layout.mylayout);

            //... more code below 
```

所以我只是检查屏幕尺寸，如果它是平板电脑的 800x1280，我什么也不做，并且方向更改处于活动状态。如果不是 800x1280，我会这样做：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT); 
```

我认为它会正常工作，但对于一些随机错误，它不是每次都工作.. 可以说大约十次，方向只是在手机上变为横向到一秒钟，然后又变为纵向。所以有点错误。

这是另一种更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:53:29.257

您可以在 mainfest 中设置 screenOrientation

```
<activity
            android:name=".Dis"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity> 
```

# php - JQGrid：删除 jqgrid 中的一行不起作用

> ID：10207156
> 
> 赞同：1
> 
> 时间：2012-04-18T10:04:57.567
> 
> 标签：php, jquery, mysql, jqgrid

我的 php 文件中有一个 jqgrid。我想在该网格中执行添加、编辑、删除功能。以下是 JQGrid 的代码

```
 <script type="text/javascript">
            $(function() {

                $("#list1").jqGrid({
                    url:'testJson.php',
                    datatype: 'json',
                    colNames:['sno','occasion','greeting'],
                    colModel :[ 

                        {name:'sno', index:'sno',width: 100,searchoptions: { sopt: ['eq', 'ne','cn']},edittype:'text',edit:true,editable:true}, 
                        {name:'occasion', index:'occasion',search: false,width: 120,edittype:'text',edit:true,editable:true}, 
                        {name:'greeting', index:'greeting',width: 120,edittype:'text',edit:true,editable:true,searchoptions: { sopt: ['eq', 'ne','cn']}}, 

                    ],
                    pager: '#pager',
                    rowNum: 5,
                    rowList:[5,20,30],
                    sortname: 'id',
                    sortorder: 'desc',
                    viewrecords: true,
                    height: 'auto',
                    width: 725, 

                    shrinkToFit: false,
                    gridview: true,
                    caption: 'Members',
                    editurl:"update.php"

                });
                jQuery("#list1").jqGrid('navGrid','#pager',{edit:true,add:true,del:true});

            });

        </script> 
```

在 Editurl 页面，即 update.php 文件中，我编写了以下代码来添加、编辑、删除一行。

```
mysql_connect($dbserver, $dbuser, $dbpassword);
mysql_select_db($dbname);
$sno = $_POST['sno'];
$occ = $_POST['occasion'];
$gr = $_POST['greeting'];
if ($_POST['oper'] == 'add') {
    $q = mysql_query("insert into t1 values('$sno','$occ','$gr')") or die(mysql_error());
}
if ($_POST['oper'] == 'edit') {
    $q = mysql_query("update t1 set sno='$sno',occasion='$occ',greeting='$gr' where sno='$sno'")or die(mysql_error());
}
if ($_POST['oper'] == 'del') {

    $q = mysql_query("delete from t1 where rowid='$_POST[id]'")or die(mysql_error());
} 
```

所有添加和编辑功能都在工作，只有删除查询不起作用。首先我尝试过

```
$q = mysql_query("delete from t1 where sno='$sno'")or die(mysql_error()); 
```

该查询不起作用，我收到类似 sno、occasion、greetings are undefined 之类的错误。因为 post 属性是 oper,id only 。而且我不知道如何使用该 ID 删除一行。

请给我正确的方法

# .net - 使用 dotNetInstaller 检查是否安装了 SQL Server 2008

> ID：10207157
> 
> 赞同：0
> 
> 时间：2012-04-18T10:04:57.457
> 
> 标签：.net, installation, bootstrapper, dotnetinstaller

我正在尝试使用[dotNetInstaller](http://dotnetinstaller.codeplex.com/)为需要*Microsoft SQL Server 2005 Backward Compatibility Components*的应用程序创建引导程序。我已经使用预构建的组件添加了一个检查。

一切都很好，直到我意识到我需要在安装*Microsoft SQL Server 2005 Backward Compatibility Components*之前检查 SQL Server 2008 安装。

这就是我卡住的地方，在微软的下载页面中，我仔细检查了*Microsoft SQL Server 2005 Backward Compatibility Components*的系统要求，它没有说明机器需要安装 SQL Server 2008。

如果需要为*Microsoft SQL Server 2005 向后兼容性组件*安装 SQL Server 2008，那么我想检查是否安装了 SQL Server 2008，如果没有，则跳过*Microsoft SQL Server 2005 向后兼容性组件*的安装并继续为我的产品安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:08:12.280

我还没有使用过 dotNetInstaller，但是您可以从注册表中获取已安装 SQL Server 的当前版本：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\90\Tools\ClientSetup\CurrentVersion 
```

如果该条目存在，则表示已安装 SQL Server 2008。

如果未安装 SQL Server 2008，则不应存在注册表项。不过，您可能想检查卸载时会发生什么。我不知道该条目是否仍然存在。

从一些环顾四周，我认为您可以通过`check_registry_value`安装检查检查 dotNetInstaller 中的注册表值。

# java - 如何解析java中的命令参数？

> ID：10207161
> 
> 赞同：0
> 
> 时间：2012-04-18T10:05:18.353
> 
> 标签：java

例如，用户像这样运行我的程序

`myprogram -p1 my_name, -p2 my_address, -p3 my_gender`

但是用户可以输入这个，它仍然有效：

`myprogram -p2 my_address, -p1 my_name,-p3 my_gender`

如何在 Java 中解析它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:40:37.730

你可以使用这样的东西：

```
public static void main (String[] args) {
      for(int i = 0; i < args.length; i++) {

                if(args[i].equals("-p1")) {
                    // args[i+1] contains p1 argument

                } else if(args[i].equals("-p2")) {
                    // args[i+1] contains p2 argument
                }

      }
} 
```

一定要检查是否有 i+1 参数，否则会抛出异常。

有更高级的方法可以做到这一点，例如，您可以使用散列将标志映射到处理函数。但是，为了这个目的，我想这会做。

我不明白的是您的示例中使用了逗号。它们是用来做什么的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:16:09.530

如果您正在寻找 DIY，那么也许这可能是起点。

```
public class Foo
{
  private static final String[] acceptedArgs = { "-p1", "-p2", "-p3" };

  public void handleCommandArgs(String... args)
  {
    if (args != null)
    {
      for (int argIndex = 0; argIndex < args.length; argIndex++)
      {
        for (int acceptedIndex = 0; acceptedIndex < acceptedArgs.length; acceptedIndex++)
        {
          if (args[argIndex] != null && args[argIndex].equals(acceptedArgs[acceptedIndex]))
          {
            String arg = args[argIndex], param = args[argIndex + 1];
            performRoutine(arg, param);
          }
        }
      }
    }
  }
  private void performRoutine(String arg, String param)
  {
    System.out.println(arg + " ->" + param.replace(",", ""));
  }

  public static void main(String[] args)
  {
    (new Foo()).handleCommandArgs(args);
  }
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-18T10:07:46.083

[Java 教程@Oracle 中](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)的示例

```
public static void main (String[] args) {
    for (String s: args) {
        System.out.println(s);
    }
} 
```

参数来自字符串的向量。

# s#arp-architecture - 部署在 AppHarbor 上的 S#arpArchitecture 站点的响应时间激增

> ID：10207162
> 
> 赞同：1
> 
> 时间：2012-04-18T10:05:19.217
> 
> 标签：s#arp-architecture, appharbor

Pingdom 报告的我在 AppHarbor 上部署的站点的响应时间通常是在 Discount.ASP 上部署时的一半左右，但是有一些峰值，响应时间会跳到 26 秒左右，是什么导致了这些峰值？我的猜测是这是由于应用程序池回收，减少或消除这些峰值的最佳方法是什么？

该站点使用 ASP.Net MVC 和 S#arpArchitecture。

![Pingdom 的响应时间](../Images/ef53980ed7281f187e5436f2bdcd2e25.png)

# python - SOAP请求中的python suds错误的命名空间前缀

> ID：10207167
> 
> 赞同：7
> 
> 时间：2012-04-18T10:05:34.957
> 
> 标签：python, soap, xsd, wsdl, suds

我使用 python/suds 来实现客户端，但在发送的 SOAP 标头中，`element ref=`对于 wsdl 中定义的特定类型的参数，我得到了错误的命名空间前缀。

.wsdl 引用数据类型 .xsd 文件，见下文。问题在于函数`GetRecordAttributes`及其类型的第一个参数`gbt:recordReferences`。

**文件：browse2.wsdl**

```
<xsd:schema targetNamespace="http://www.grantadesign.com/10/10/Browse" xmlns="http://www.grantadesign.com/10/10/Browse" xmlns:gbt="http://www.grantadesign.com/10/10/GrantaBaseTypes" elementFormDefault="qualified" attributeFormDefault="qualified">
<xsd:import schemaLocation="grantabasetypes2.xsd" namespace="http://www.grantadesign.com/10/10/GrantaBaseTypes"/>
<xsd:element name="GetRecordAttributes">
      <xsd:complexType>
          <xsd:sequence>
              <xsd:element ref="gbt:recordReferences">
              </xsd:element> 
```

**参考文件：grantabasetypes2.xsd**

```
<element name="recordReferences">
  <complexType>
    <sequence>
      <element name="record" minOccurs="0" maxOccurs="unbounded" type="gbt:MIRecordReference"/>
    </sequence>
  </complexType>
</element> 
```

**由 suds 发送的 SOAP 请求：**

```
<SOAP-ENV:Envelope xmlns:ns0="http://www.grantadesign.com/10/10/GrantaBaseTypes" xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns2="http://www.grantadesign.com/10/10/Browse" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <ns1:Body>
      <ns2:GetRecordAttributes>
         <ns2:recordReferences>
            <ns0:record>
            </ns0:record>
         </ns2:recordReferences>
      </ns2:GetRecordAttributes>
   </ns1:Body>
</SOAP-ENV:Envelope> 
```

**问题**： `<ns2:recordReferences>`前缀错误，应该是 `<ns0:recordReferences>`因为它属于`...GrantaBaseTypes` .xsd 中定义的命名空间。

这发生`ref=`在 wsdl 中定义的所有参数上。如何自动修复？

注意：我通过 curl 手动发送 xml SOAP 请求来检查服务是否接受了“好”前缀。

**更新**

我干预了 SUDS 源代码，下面的经验修复强制所有具有`ref=`属性的元素假定 ref-ed 命名空间（以前，它们采用模式根命名空间或其他任何东西`tns`）：

文件：/suds/xsd/sxbase.py

```
class SchemaObject(object):
....
    def namespace(self, prefix=None):

        ns = self.schema.tns

#FIX BEGIN
        if self.ref and self.ref in self.schema.elements.keys():
            ns = self.ref
#FIX END 
```

适用于我的服务，但我不确定它是否会破坏其他东西。我更喜欢不更改 SUDS 源代码的更智能的解决方案。

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T20:37:15.017

编写一个[Suds 插件](https://fedorahosted.org/suds/wiki/Documentation#PLUGINS)以在发送 XML 之前对其进行修改。

```
from suds.client import Client
from suds.plugin import MessagePlugin

class MyPlugin(MessagePlugin):
    def marshalled(self, context):
        #modify this line to reliably find the "recordReferences" element
        context.envelope[1][0][0].setPrefix('ns0')

client = Client(WSDL_URL, plugins=[MyPlugin()]) 
```

引用 Suds 文档：

> **marshalled()**
> 为插件提供在发送前检查/修改信封文档的机会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:35:33.280

使用 suds 访问 BizTalk/IIS SOAP 服务时，我遇到了完全相同的问题。从我从 WSDL 中可以看出，当有一个“complexType”不属于“targetNamespace”（它有它自己的）时，就会发生这种情况，它有一个也是 complexType 的子项，但没有设置命名空间。在 BizTalk 中，这意味着子级应该与父级属于同一个命名空间，但 Suds 似乎认为它应该是 targetNamespace 的一部分......

源代码中的修复“正确”地解决了这个问题，但是因为我希望能够在每次我寻求另一个解决方案时不应用修复的情况下进行升级......

我的解决方案是跳过 Suds，只复制原始 XML，将其用作模板并将值复制到其中……不漂亮，但至少简单。在我看来，添加插件的解决方案同样是硬编码的，而且可能更难维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:58:59.373

您可以自己构建肥皂消息并用于`SoapClient`发送消息：

```
sc = SoapClient(cli.service.XXXMethod.client,cli.service.XXXMethod.method)
sc.send(some_soap_doc) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-25T09:37:04.357

我更喜欢正则表达式:)

```
import re

class EnvelopeFixer(MessagePlugin):
    def sending(self, context):
        # rimuovi i prefissi
        context.envelope = re.sub( 'ns[0-9]:', '', context.envelope )
        return context.envelope 
```

# iphone - 获取视图的 X 和 Y 坐标

> ID：10207175
> 
> 赞同：2
> 
> 时间：2012-04-18T10:06:07.410
> 
> 标签：iphone

我的视图中有一个 UITableView。我的 UITableView 的名称是 tblTask​​。
我正在使用 touchesBegan 方法来获取我的视图的 x 和 y 坐标。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.view];

    NSLog(@"point........ %f .. %f",location.x,location.y);

} 
```

但是当我从 tbltask 开始触摸事件时。即使 tbltask 是主视图的子视图，它也不会返回 location.x 和 location.y。

我也尝试禁用表格的滚动视图，但没有任何反应。
当我设置这个。

```
tbltask.userInteractionEnabled=NO; 
```

然后它会给出坐标，但即使启用了 tbltask 交互，我也想要视图的坐标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:39:59.907

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
     UITouch *touch ;
     touch = [[event allTouches] anyObject];
     if ([touch view] == self.view){
         CGPoint location = [touch locationInView:touch.view];
         NSLog(@"point........ %f .. %f",location.x,location.y);
      }
} 
```

# css - 使用 css3 转换显示/隐藏表格行

> ID：10207176
> 
> 赞同：22
> 
> 时间：2012-04-18T10:06:10.683
> 
> 标签：css, css-transitions

在我页面的一部分上，我使用 css3 过渡来显示/隐藏一些具有良好滑动效果的 div

```
.service_status {
        max-height: 0;
    -webkit-transition: max-height 1s ease-in-out;
    -moz-transition: max-height 1s ease-in-out;
    -ms-transition: max-height 1s ease-in-out;
    -o-transition: max-height 1s ease-in-out;
    transition: max-height 1s ease-in-out;
}

.service_status.open {
    max-height: 500px;
    -webkit-transition: max-height 1s ease-in-out;
    -moz-transition: max-height 1s ease-in-out;
    -ms-transition: max-height 1s ease-in-out;
    -o-transition: max-height 1s ease-in-out;
    transition: max-height 1s ease-in-out;
} 
```

我想在某些表格行上使用相同的技术，但 max-height 和 height 没有任何效果（我猜是由于表格的 CSS 规范）。有没有一种方法可以仅使用 CSS3 过渡而不使用 js 来显示/隐藏带有动画的表格行？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-05T20:34:55.680

**更新：**

事实上，我之前的回答确实回答了这个问题！但不是绝对明确。这就像：“嘿，想法就在这里，只要将它应用到任何你想要的地方”。我认为解决方案的本质很清楚，任何人都可以使用它......但无论如何，我会以最清晰的方式公开整个想法，并将解决方案应用于一个简单的表（因为 OP 没有显示任何结构）。

**解决方案：**

***精简版：***

使用 Div 将内容包装到单元格中，我们可以使用 max-height 属性以及 max-height 转换。使用自定义过渡曲线，我们可以“屏蔽”使用高最大高度的延迟。

在这里演示：http: [//jsfiddle.net/1rnc9bbm/4/](http://jsfiddle.net/1rnc9bbm/4/)

***长版：***

整个问题是表格单元格的高度是适合其内容的最小值，而表格行的高度是所有单元格所需的最小高度（因此，表格行的高度是其最高单元格所需的最小高度）。

从 W3（关于表格单元格高度）：

> 在 CSS 2.1 中，单元格框的高度是内容所需的最小高度。

从 W3（关于表行高度）：

> 'table-row' 元素框的高度是在用户代理拥有该行中的所有单元格可用时计算的：它是该行计算的“高度”的最大值，该行中每个单元格的计算“高度”，以及**单元格所需的最小高度 (MIN)**。

在这种情况下，我们唯一的选择是使用内部标记间接限制高度，通常是 div 元素。因为 Div 元素尊重最大高度，它会拉伸我们的内容，并且我们的表格单元格也将尊重“div 的最大高度”，因为这是它所需的所有高度。

最大高度转换的问题只是延迟，由转换的计算方式引起。在表格中，通常您显示的动态内容具有动态且不可预测的长度（变为表格单元格高度），因此我们不知道我们的表格需要精确的最大高度才能完全适合展开的内容。因此，我们需要设置一个更高的最大高度，这将超过某些单元格的需要。当它发生时，我们的过渡计算错误（基于最大高度而不是将显示/动画的总高度），并且动画变得奇怪和不精确。为了向用户展示一个漂亮而平滑的过渡，我找到了一个使用自定义过渡曲线的绝妙解决方案。有关此问题及其解决方案的更多详细信息在此答案的末尾。

好吧，我们有我们的“最大高度尊重元素”，我们最大高度动画的平滑过渡，以及我们的桌子......现在是时候把所有东西放在一起了：

html:

```
<table>
    <tr>
        <td>
            <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris ac lorem ante. Vestibulum quis magna pretium, lacinia arcu at, condimentum odio. Ut ultrices tempor metus, sit amet tristique nibh vestibulum in. Pellentesque vel velit eget purus mollis placerat sed sit amet enim. Sed efficitur orci sapien, ac laoreet erat fringilla sodales.
            </div>
        </td>
    </tr>
</table> 
```

CSS：

```
table{
    border: 1px solid #ddd;
}

div{
    background-color: #ddd;
    width: 400px;

    overflow: hidden;
    -webkit-transition: max-height 1.5s cubic-bezier(0, 1.05, 0, 1);
    -moz-transition: max-height 1.5s cubic-bezier(0, 1.05, 0, 1);
    transition: max-height 1.5s ease cubic-bezier(0, 1.05, 0, 1);

    max-height: 38px;
}

div:hover{
    -webkit-transition: max-height 2s ease;
    -moz-transition: max-height 2s ease;
    transition: max-height 2s ease;

    max-height: 400px;
} 
```

这里的简单演示（上面显示的代码）：http: [//jsfiddle.net/1rnc9bbm/3/](http://jsfiddle.net/1rnc9bbm/3/)，这里有一个更完整（和常见）的表格演示：http: [//jsfiddle.net/1rnc9bbm/4/](http://jsfiddle.net/1rnc9bbm/4/)

我不认为反对票是公平的，但我同意这个版本现在更加完整，并且确实以明确的方式回答了 OP 的问题。**如果您有任何问题或需要我澄清的观点，您无需投票（请），只需在上方提问/评论即可。如果可以的话，我会很乐意提供帮助。**

Obs：OP没有提供Html，也没有提供他想要扩展的表格的详细信息，所以我的整个解决方案都是基于通常的表格使用。

**上一个（原始）答案：**

我只是在这里的另一个问题中回答了这种确切的情况。在我的具体情况下，我需要完全按照你所说的去做。我有一个表格，当用户悬停它时想要**展开一个表格行。**

同样的答案适用于您的问题：
[https ://stackoverflow.com/a/27773588/3395460](https://stackoverflow.com/a/27773588/3395460)

**链接答案（具有高于容器需要的最大高度值的平滑过渡）：**

正如@maskacovnik 所指出的，如果它还包含我的第一个答案的代码以及解释我更新答案的部分解决方案的代码，它将是一个更完整（和完整）的答案。就这个：

> [...] 当用户悬停单元格时，我需要在单元格表中显示产品描述的模式详细信息。在没有用户悬停的情况下，最多只显示 2 行描述。一旦用户悬停它，所有行（文本可以是 1 到 8 行，动态且不可预测的长度）必须以某种高度动画显示。
> 
> 我遇到了同样的困境，并选择使用最大高度过渡（设置一个高最大高度，我确信这不会削减我的文本），因为在我看来这种方法是最干净的动画解决方案高度。
> 
> 但我对“上滑”动画的延迟不满意，就像你一样。那时我在这里找到了关于过渡曲线的评论：http: [//css3.bradshawenterprises.com/animating_height/](http://css3.bradshawenterprises.com/animating_height/)。
> 
> 这家伙的idea很牛逼，但光是这个解决方案就“截断”了“滑下”动画的效果。所以稍微想了想，我就得出了最终的解决方案。
> 
> 所以这是我使用 Rhys 的想法的解决方案（上面链接的人）：
> 
> 向下滑动动画（悬停），带有“平滑增长”，向上滑动动画没有（实际上）“延迟”：

```
div {
  background-color: #ddd;
  width: 400px;
  overflow: hidden;
  -webkit-transition: max-height 1.5s cubic-bezier(0, 1.05, 0, 1);
  -moz-transition: max-height 1.5s cubic-bezier(0, 1.05, 0, 1);
  transition: max-height 1.5s cubic-bezier(0, 1.05, 0, 1);
  max-height: 38px;
}
div:hover {
  -webkit-transition: max-height 2s ease;
  -moz-transition: max-height 2s ease;
  transition: max-height 2s ease;
  max-height: 400px;
}

<div>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris ac lorem ante. Vestibulum quis magna pretium, lacinia arcu at, condimentum odio. Ut ultrices tempor metus, sit amet tristique nibh vestibulum in. Pellentesque vel velit eget purus mollis
  placerat sed sit amet enim. Sed efficitur orci sapien, ac laoreet erat fringilla sodales.
</div> 
```

> 这是一个完美的（在我看来）菜单、描述和一切不是非常不可预测的解决方案，但是正如你之前指出的那样，需要设置一个高的最大高度，并且可能会切断一个令人惊讶的高度动态内容。在这种特定情况下，我将使用 jQuery/JavaScript 来为高度设置动画。由于内容的更新已经使用某种 JavaScript 完成，所以我看不出使用 Js 动画方法有什么害处。

希望我有所帮助！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-27T15:51:47.680

您不能将高度过渡应用于`<td>`或`<tr>`元素。但是，如果您可以`<td>`用 a 包裹元素的内容，则`<div>`可以将 CSS 转换应用于`<div>`元素。

HTML：

```
<tr>
  <td><div>Contents</div></td>
  <td><div>Contents</div></td>
</tr> 
```

CSS：

```
tr div {
  max-height:0;
  transition: max-height 1s ease-in-out;
}
tr.open div {
  max-height: 500px;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-09T00:15:31.920

`Line Height`： 干得好。

```
var doc = document;
var myElements = doc.querySelectorAll("[data-row='047384']");

if(myElements.length > 0){
  myElements[0].addEventListener("click", function(){
    showRows(myElements);
  });
}

function showRows(elements){
  for (var i = 0; i < elements.length; i++) {
    if(elements[i].tagName.toLowerCase() !== 'button'){
      elements[i].classList.toggle('show');
    }
  }
}
```

```
.table-part-row{
  line-height:0;
  transition: 1s;
  opacity: 0;
}
.table-part-row.show {
  line-height:1em;
  opacity: 1;

}
```

```
<br>
<table>
  <tr>
    <th></th>
    <th>Firstname</th>
    <th>Lastname</th> 
    <th>Age</th>
  </tr>
  <tr data-row="047384">
    <td><button data-row="047384"></button></td>
    <td>Jill</td>
    <td>Smith</td> 
    <td>50</td>
  </tr>
  <tr class="table-part-row" data-row="047384">
    <td></td>
    <td>Jill</td>
    <td>Smith</td> 
    <td>50</td>
  </tr>
  <tr class="table-part-row" data-row="047384">
    <td></td>
    <td>Eve</td>
    <td>Jackson</td> 
    <td>94</td>
  </tr>
</table>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-01T13:37:06.453

我找到了一种方法来隐藏带有 css 的表格行，它适用于纯文本，而无需添加那些讨厌的 div。这不是“解决*所有问题，解决所有问题”*的解决方案，但如果您只处理表格中的文本，您可能想尝试一下。

（它也可能适用于其他内容，但我还没有测试过）

```
 // just used to toggle the hide class - use what every you fancy
$('button').click(function(){ $('.toggle').toggleClass('hide'); });
```

```
td {
  opacity: 1;
  padding: 10px;
  line-height: 20px;
  transition: all 0.2s ease-in-out;
} 
.hide td {
  opacity: 0;
  line-height: 0px;
  padding: 0 10px;
}

/* just some basic setup */
table {
  border-collapse: collapse;
}
td {
  background: #f1f1f1;
}
tr:nth-child(odd) td {
  background: #f9f9f9;
}
```

```
<button>Toggle Table Row</button>
<br /><br />

<table>
<tr>
  <td>foo</td>
</tr>
<tr class="toggle">
  <td>Hide Me!</td>
</tr>
<tr>
  <td>foo</td>
</tr>
</table>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-14T19:35:56.513

我刚遇到同样的事情，我的解决方案也是在单元格中使用 div，但是为了制作动画，我使用了内部 div 和 margin-bottom 而不是 max-height。剪断将是：

html:

```
<tr><td colspan="7">
  <div class="content">
    <div class="amin">
        multi line text
    </div>
   </div>
</td></tr> 
```

CSS：

```
.content {
    overflow: hidden:
    margin: 0;
    float: left;
}
.anim {
    margin-bottom: -50%; /*use calc() to whatever suits you*/
    transition: all 5s;
}
.content:hover anim {
    margin-bottom: 0;
} 
```

我只在FF中测试过。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-18T12:15:55.190

像这样的东西是你需要的最低限度。工作版本：http: [//jsfiddle.net/GCJrd/](http://jsfiddle.net/GCJrd/)

**头**

```
<style>
.togglebox {
background-color:#CCC;
height: 100px;
max-height: 100px;
-webkit-transition: max-height 1s ease-in-out;
-moz-transition: max-height 1s ease-in-out;
-ms-transition: max-height 1s ease-in-out;
-o-transition: max-height 1s ease-in-out;
transition: max-height 1s ease-in-out;
}
</style>

<script src="js/jquery-1.7.1.min.js"></script>
<script>
  $(document).ready(function(){
    //Hide the toggle-area when page load
    $(".togglebox").hide();
    //slide up and down when click over id #one
    $("#one").click(function(){
    // slide toggle effect set to 600 you can set it faster too.
    $(".togglebox").slideToggle(600);
    return true;
  });
});
</script> 
```

**身体**

```
<button id="one">showLine1</button>
<table id="my_table">
<tbody>
  <tr>
  <td>1</td>
  <td>2</td>
 </tr>
 <tr class="togglebox">
  <td>hidden 1</td>
  <td>hidden 2</td>
  </tr>
</tbody>
</table> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-02-21T12:42:18.547

在表格行上添加动画，例如：

```
@keyframes show-row {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
} 
```

并像这样应用它：

```
animation: show-row .5s forwards; 
```

# ios - 如何从 itunes connect 或 xcode 中关闭 NewsStand 功能？

> ID：10207180
> 
> 赞同：3
> 
> 时间：2012-04-18T10:06:49.577
> 
> 标签：ios, xcode, app-store-connect

我在 iTunes 连接中创建了应用程序。在创建应用程序时，我错误地打开了 NewsStand 功能。现在，当我将二进制文件上传到 iTunes 时，我收到错误消息，告诉我要创建自动续订产品。我不想在我的应用程序中添加任何不必要的产品。那么如何从 iTunes 或通过 xcode 关闭或禁用 NewsStand？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:04:20.033

在 itune connect 中，选择应用程序详细信息，然后有一个按钮/链接可以禁用它。

# javascript - 放置可滚动 div 中心视图的子项

> ID：10207188
> 
> 赞同：1
> 
> 时间：2012-04-18T10:07:27.027
> 
> 标签：javascript, html

我在屏幕上的某个地方有一个可滚动的 div。

我在它的某个地方有那个 div 的孩子。

如何滚动 div 以将此子项放置在可见区域的中心？

（如何确定 div 的可见宽度和高度，以及如何滚动以将矩形控件放置在此居中？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:15:14.143

`element.scrollIntoView()`可能是你要找的。

[http://jsfiddle.net/a9s2G/](http://jsfiddle.net/a9s2G/)

[scrollIntoView 文档](https://developer.mozilla.org/en/DOM/element.scrollIntoView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:16:18.963

如果你使用 jQuery，你可以试试[scrollTo](http://demos.flesler.com/jquery/scrollTo/)插件。

在纯 js 中，这可以使用[element.scrollTop](https://developer.mozilla.org/en/DOM/element.scrollTop)来完成。您将需要获取元素在内部的位置，`<div>`而不是使用该值滚动主 div。

要计算内部元素位置，您需要使用[offsetTop](https://developer.mozilla.org/en/DOM/element.offsetTop)和[offsetLeft](https://developer.mozilla.org/en/DOM/element.offsetLeft)属性获取与父元素相关的偏移顶部和左侧属性。

要使元素居中，您可能还需要使用[element.scrollLeft](https://developer.mozilla.org/en/DOM/element.scrollLeft)

# php - 如何通过php按修改日期对文件进行排序

> ID：10207191
> 
> 赞同：5
> 
> 时间：2012-04-18T10:07:38.173
> 
> 标签：php, ftp

背景：我有一个匿名登录的 ftp 服务器，ftp_nlist 仅按字母顺序列出文件，我想根据上次修改日期获取文件列表，最近的在前。我尝试了 ftp_exec($conn, "ls -t") 但出现 Permission Denied 错误，不知道为什么它不起作用。好吧，我正在使用 php-cli 并且文件数量为数千，我只想使用最近的文件。获取原始列表并找到数组元素的日期部分可能会有所帮助，但我希望有简单的出路。当我通过终端命令登录时 ls -t 工作得很好。所以想知道为什么 ftp_exec 不起作用。

寻求一个简单的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T10:18:07.693

如果您只想按上次修改日期对文件进行排序，您可以使用

```
ftp_nlist($conn, '-t .'); 
```

但是，这不会告诉您*每个*文件的日期。

如果您还想获取修改后的日期，您可以使用`ftp_rawlist`并解析输出。这是我拼凑的一个简单示例：

```
$list = ftp_rawlist($ftp, '.');

$results = array();
foreach ($list as $line) {
    list($perms, $links, $user, $group, $size, $d1, $d2, $d3, $name) =
        preg_split('/\s+/', $line, 9);
    $stamp = strtotime(implode(' ', array($d1, $d2, $d3)));
    $results[] = array('name' => $name, 'timestamp' => $stamp);
}

usort($results, function($a, $b) { return $a['timestamp'] - $b['timestamp']; }); 
```

此时`$results`包含一个按上次修改时间升序排序的列表；反转排序函数以获取最近修改的第一种格式的列表。

**注意：** `ftp_rawlist`不提供*确切的*修改时间戳，因此此代码可能并不总是准确地工作。您还应该验证 FTP 服务器的输出是否与此算法一致，并包括一些健全性检查以确保将来保持这种状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:21:11.677

试试我为这样的任务编写的这个函数。它是为与本地文件系统一起工作而设计的，但`ftp://`只要您的系统已`allow_url_fopen`启用，它就可以与 URL 一起工作（尽管`DIR_SORT_ATIME`并且`DIR_SORT_CTIME`不会工作）：

```
// Constants to make usage more reader-friendly
define('DIR_SORT_NAME',  1);
define('DIR_SORT_SIZE',  2);
define('DIR_SORT_ATIME', 3);
define('DIR_SORT_MTIME', 4);
define('DIR_SORT_CTIME', 5);

function readdir_sorted_array ($dir, $sortCol = DIR_SORT_NAME, $sortDir = SORT_ASC) {

  // Validate arguments
  $dir = rtrim(str_replace('\\', '/', $dir), '/');
  $sortCol = (int) ($sortCol >= 1 && $sortCol <= 5) ? $sortCol : 1;
  $sortDir = ($sortDir == SORT_DESC) ? SORT_DESC : SORT_ASC;
  $name = $size = $aTime = $mTime = $cTime = $table = array();

  // Open the directory, return FALSE if we can't
  if (!is_dir($dir) || (!$dp = opendir($dir))) return FALSE;

  // Fetch a list of files in the directory and get stats
  for ($i = 0; ($file = readdir($dp)) !== FALSE; $i++) {
    if (!in_array($file, array('.','..'))) {
      $path = "$dir/$file";
      $row = array('name'=>$file,'size'=>filesize($path),'atime'=>fileatime($path),'mtime'=>filemtime($path),'ctime'=>filectime($path));
      $name[$i] = $row['name'];
      $size[$i] = $row['size'];
      $aTime[$i] = $row['atime'];
      $mTime[$i] = $row['mtime'];
      $cTime[$i] = $row['ctime'];
      $table[$i] = $row;
    }
  }

  // Sort the results
  switch ($sortCol) {
    case DIR_SORT_NAME:
      array_multisort($name, $sortDir, $table);
      break;
    case DIR_SORT_SIZE:
      array_multisort($size, $sortDir, $name, SORT_ASC, $table);
      break;
    case DIR_SORT_ATIME:
      array_multisort($aTime, $sortDir, $name, SORT_ASC, $table);
      break;
    case DIR_SORT_MTIME:
      array_multisort($mTime, $sortDir, $name, SORT_ASC, $table);
      break;
    case DIR_SORT_CTIME:
      array_multisort($cTime, $sortDir, $name, SORT_ASC, $table);
      break;
  }

  // Return the result
  return $table;

} 
```

返回给定路径中文件的排序关联数组`$dir`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:18:02.150

似乎“ftp_nlist”第二个参数与linux“ls”命令采用相同的参数（OP不应该使用'ls'，只是开关）

```
$dir_list = ftp_nlist($ftp_conn_id, '-rtla .');
print_r($dir_list); 
```

# jquery - 将 fancybox 添加到 ruby on rails 项目指南

> ID：10207192
> 
> 赞同：1
> 
> 时间：2012-04-18T10:07:38.680
> 
> 标签：jquery, ruby, ruby-on-rails-3, fancybox

我找到了显示图像的好工具。这正是我的项目所需要的，但我是编程新手，我不明白他们主页上的指南：http: [//fancybox.net/howto](http://fancybox.net/howto)

我一直在互联网上寻找分步指南，但没有运气。

如果有人能告诉我该怎么做，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:25:37.537

[使用这个fancybox-rails](https://github.com/hecticjeff/fancybox-rails) gem将 Fancybox 集成到 Rails 很有趣。

# mysql - SQL 从表中选择最后 3 个日期

> ID：10207193
> 
> 赞同：-2
> 
> 时间：2012-04-18T10:07:42.070
> 
> 标签：mysql, sql

我在 mysql 中有一个包含很多字段的表

我需要一个查询来返回（**以相同的原始格式！**）最后 3 个日期（日期之间可能有很大的差距）

IE：

```
2012/01/20
2012/01/18
2012/01/12
2012/01/10
2012/01/04 
```

ETC...

任何帮助将不胜感激

我必须让他们在同一排！

这是我尝试使用但没有成功的查询：

```
SELECT a.id, a.thedate, b.id AS id1, b.thedate AS thedate1, c.id AS id2, c.thedate as thedate2
FROM mytable AS a INNER JOIN mytable AS b ON a.id = b.id INNER JOIN mytable AS c ON b.id=c.id
WHERE c.thedate = SELECT MAX(thedate) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:09:54.250

编辑 ：

```
SELECT group_concat(date) FROM (SELECT date FROM my_table ORDER BY date DESC LIMIT 3) AS temp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:18:35.010

**更正-**

```
 SELECT group_concat(date) FROM ( select date from table_name order by date desc limit 3) as a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:32:44.900

```
SELECT GROUP_CONCAT(a.date ) 
FROM (
SELECT date
FROM my_table
ORDER BY date DESC 
LIMIT 3
) AS a 
```

# android - Android 片段转换回调

> ID：10207197
> 
> 赞同：4
> 
> 时间：2012-04-18T10:07:55.690
> 
> 标签：android, android-fragments, android-ui

有没有办法检测片段已经开始转换（进或出）。我想要达到的目标：

我有一个片段，其中有一个带有复杂图形的 SurfaceView。当我点击一个按钮时，我希望这个片段从屏幕上滑开。但是我们都知道，SurfaceView 是不能动画的。所以我想在开始过渡之前用绘图缓存位图替换它。

因此，我需要知道片段何时开始转换。这对于开放式过渡尤其重要，因为我在输出过渡之前手动调用替换图像例程，但我需要知道开放式过渡何时完成。有没有比计时器更好的方法（这对我来说似乎很糟糕）。

谢谢。

PS 兼容性库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T20:26:29.967

在我的脑海中，我会说将动画侦听器附加到您正在使用的动画（请参阅[Android 文档中的动画侦听器](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)）..根据您的情况，这可能意味着您需要在代码中创建和附加动画，或者您可以在创建组件（活动/片段）时检索动画并附加侦听器。这取决于您当前实现的工作方式，但基本思想是将侦听器附加到即将运行的动画。动画侦听器会告诉您动画何时实际开始和实际结束。

# php - 将多个变量传递给 AJAX onchange select

> ID：10207202
> 
> 赞同：0
> 
> 时间：2012-04-18T10:08:05.627
> 
> 标签：php, mysql, ajax

我正在查看来自 W3schools.com（Ajax、PHP 和 Mysql） [http://www.w3schools.com/php/php_ajax_database.asp的这个脚本](http://www.w3schools.com/php/php_ajax_database.asp)

```
<html>
<head>
<script type="text/javascript">
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br />
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

这显示了一个具有 4 个值的简单选择。

这是 PHP 脚本。

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', '*', '*');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ajax_demo", $con);

$sql="SELECT * FROM user WHERE id = '".$q."'";

$result = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
<th>Hometown</th>
<th>Job</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Hometown'] . "</td>";
  echo "<td>" . $row['Job'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

现在我了解了它的作用和工作原理，但是假设我想将另外 3 个变量传递给 PHP 脚本，当有人更改选择框的值时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:20:03.053

为了发送多个值，您已经相应地更改了查询字符串。

```
xmlhttp.open("GET","getuser.php?q="+str,true); 
```

到，像

```
xmlhttp.open("GET","getuser.php?q="+str+"&nextvar="+value1,true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:28:33.483

根据我的评论，这是一个示例，它从 2 个选择中获取值，并在两者都填写时提交一个 ajax 调用

```
// Notice the arguments are gone at the moment
function showUser() {
    // Retrieve values from the selects
    var u = document.getElementByID('userSelect').value;
    var g = document.getElementByID('groupSelect').value;

    if (u=="" || g == "") {
        document.getElementById("txtHint").innerHTML="";
        return;
    } 

    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
    }

    xmlhttp.open("GET","getuser.php?u="+u+"&g="+g,true);
    xmlhttp.send();
} 
```

然后是基本形式

```
<form>
    <select name="users" id="userSelect" onchange="showUser()">
        <option value="">Select a person:</option>
        <option value="1">Peter Griffin</option>
        <option value="2">Lois Griffin</option>
        <option value="3">Glenn Quagmire</option>
        <option value="4">Joseph Swanson</option>
    </select>
    <select name="groups" id="groupSelect" onchange="showUser()">
        <option value="">Select a group:</option>
        <option value="a">Aerosmith</option>
        <option value="k">Kiss</option>
        <option value="l">Led Zeppelin</option>
        <option value="m">Metallica</option>
    </select>
</form> 
```

不过，这不是一个很好的选择，并且如前所述，建议您使用诸如 jQuery ( [http://jquery.com/](http://jquery.com/) ) 之类的框架，因为您将能够在逻辑上花费更多时间，而不是确保浏览器兼容性

不管你怎么做，尝试一下并没有什么坏处，所以只需尝试一些事情，看看会发生什么（只要你不删除实时数据，无论如何）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-12T10:00:19.687

希望这有助于更好

```
 <script>function showUser(str) {  if (str == "") {
document.getElementById("txtHint").innerHTML = "";
return;  } else {    var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    document.getElementById("txtHint").innerHTML = this.responseText;
  }
};
xmlhttp.open("GET","getuser.php?q="+str,true);

xmlhttp.send();  }}function shUser(str1) {  if (str1 == "") { document.getElementById("txtHint").innerHTML = "";
return;  } else {
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    document.getElementById("txtHint").innerHTML = this.responseText;
  }
};
xmlhttp.open("GET","getuser.php?p="+str1,true); 
xmlhttp.send();  }}function sheUser(str2) {  if (str2 == "") {    document.getElementById("txtHint").innerHTML = "";    return;  } else {   var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {   if (this.readyState == 4 && this.status == 200) {
    document.getElementById("txtHint").innerHTML = this.responseText;
  }
};
xmlhttp.open("GET","getuser.php?r="+str2,true);

xmlhttp.send();  }} 
```

# java - 如何在片段中显示 AlertDialog？

> ID：10207206
> 
> 赞同：65
> 
> 时间：2012-04-18T10:08:18.763
> 
> 标签：java, android, fragment, android-alertdialog, android-context

我想在我的应用程序中显示一个警报对话框。我正在使用片段。我尝试了下面的代码来做到这一点：

```
 AlertDialog ad = new AlertDialog.Builder(context)
            .create();
    ad.setCancelable(false);
    ad.setTitle(title);
    ad.setMessage(message);
    ad.setButton(context.getString(R.string.ok_text), new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();
        }
    });
ad.show(); 
```

但它崩溃了，logcat 中的错误是：

> 04-18 15:23:01.770: E/AndroidRuntime(9424): android.view.WindowManager$BadTokenException: 无法添加窗口 -- 令牌 null 不适用于应用程序

从互联网上我知道崩溃是由于上下文问题。我给出了上下文

```
context = this.getActivity().getApplicationContext(); 
```

我不知道这有什么问题。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-04-18T10:12:44.330

替换`context`为`getActivity()`。

`ApplicationContext`不应用于创建对话框等任务。当您在片段中时，您可以通过调用 Fragments`getActivity()`方法来获取 Activity-Context。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-24T12:34:35.563

**有关此问题的更多信息（片段中的 AlertDialog，在事件中管理）：**

如果您在 onClick(View v) 或 onLongClick(View v) 等事件中调用 AlertDialog，您可以使用

```
public boolean onClick(View v) {
    ...
    AlertDialog.Builder alertBuilder = new AlertDialog.Builder(v.getContext());
    ...
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-18T10:12:25.760

尝试使用DialogFragment，使用Fragments时DialogFragment更好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-24T12:50:42.483

我有类似的问题，我试图从片段创建一个 AlertDialog。NullPointerException 从中产生。最初我做了如下：

```
AlertDialog alertDialog = new AlertDialog.Builder(getActivity()).create(); 
```

稍后在代码中调用时特别`NullPointerException`发生。`alertDialog.show()`但是在搜索文档之后`AlertDialog.Builder()`，似乎还有另一种初始化它的方法[[AlertDialog.Builder Doc]](https://developer.android.com/reference/android/app/AlertDialog.Builder.html)，即包含一个主题/resId，如下所示：

```
AlertDialog alertDialog = new AlertDialog.Builder(getActivity(), R.style.Theme_AppCompat_Dialog_Alert).create(); 
```

这解决了`NullPointerException`手头的问题。希望这对您也有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-19T08:56:17.253

我在 listView 内的适配器中使用它，因此无法使用`getActivity()`. 为了使它工作，我`getActivity()`在片段中的适配器实例化中使用了上下文：

```
this.adapter = new myAdapter(getActivity(), factory); 
```

后来在另一个类（适配器类）中，我能够使用`getContext()`它并且它起作用了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-03T09:50:14.430

AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-09-23T07:14:07.270

```
 AlertDialog alert= null;
                        AlertDialog.Builder build= new AlertDialog.Builder(getActivity());
                        build.setTitle("title");
                        build.setItems(stringarrayname, new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                // TODO Auto-generated method stub
                            //Toast.makeText(getActivity(), "hi", Toast.LENGTH_SHORT).show();   

                            }
                        });
                        build.create().show(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-05-18T11:13:02.843

你可以试试这个或使用 DialogFragment

```
private void showAlert(final int position) {
        new AlertDialog.Builder(getActivity().getApplicationContext())
                .setTitle("Delete entry")
                .setMessage("Are you sure you want to delete this entry?")
                .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                      //  deleteSuggestions(position);
                    }
                })
                .setNegativeButton(android.R.string.no, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        // do nothing
                    }
                })
                .setIcon(android.R.drawable.ic_dialog_alert)
                .show();
    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-04-27T03:17:05.663

解决方案是替换为`getActivity()`

```
AlertDialog.Builder alert = new AlertDialog.Builder(getActivity(),R.style.MaDialog); 
```

# c# - 将网址转换为有效的 href 值

> ID：10207210
> 
> 赞同：3
> 
> 时间：2012-04-18T10:08:29.513
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, url

首先，这似乎是以前应该问过的问题，但我找不到任何可以回答我的问题的东西。

我的任务的基本概述是在基于用户定义的网址的网页上呈现锚链接。由于地址是用户定义的，因此可以是任何格式，例如：

*   [http://www.example.com](http://www.example.com)
*   [https://www.example.com](https://www.example.com)
*   www.example.com
*   例子.com

我需要对这个值做的是将它设置为`href`锚标记的属性。现在，问题是（至少在 Chrome 中）只有前两个示例可以工作，因为它们被识别为绝对 URL 路径。最后两个示例将重定向到同一个域（即视为相对路径）

所以最终的问题是：格式化这些值以确保使用一致的绝对路径的最佳方法是什么？我可以检查 http/https 并在丢失时添加它，但我希望可能有一个开箱即用的 .Net 类，它会更可靠。

此外，由于这是一个用户定义的值，它可能是完全的垃圾，所以验证 URL 的功能也将是一个不错的奖励。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:13:01.693

几个月前我们遇到了这个问题，需要一种一致的方法来确保 URL 是绝对的。我们还想要一种删除`http(s)://`在网页上显示 URL 的方法。

我想出了这个功能：

```
public static string FormatUrl(string Url, bool IncludeHttp = null)
{

    Url = Url.ToLower();

    switch (IncludeHttp) {
        case true:
            if (!(Url.StartsWith("http://") || Url.StartsWith("https://")))
                Url = "http://" + Url;
            break;
        case false:
            if (Url.StartsWith("http://"))
                Url = Url.Remove(0, "http://".Length);
            if (Url.StartsWith("https://"))
                Url = Url.Remove(0, "https://".Length);
            break;
    }

    return Url;

} 
```

我知道您正在寻找“开箱即用”的库，但这可能会有所帮助。

我认为“开箱即用”解决方案的问题在于该函数不知道 URL 是否应该`http://`是`https://`. 使用我的功能，我假设它会是`http://`，但对于某些 URL，您需要`https://`。如果微软要在框架中构建这样的东西，它从一开始就是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:14:51.447

您可以尝试使用 Uri 类的这个重载：

[Uri 构造函数（字符串）](http://msdn.microsoft.com/en-us/library/z6c2z492.aspx)

> 此构造函数从 URI 字符串创建一个 Uri 实例。它解析 URI，将其置于规范格式，并进行任何所需的转义编码。
> 
> 此构造函数不确保 Uri 引用可访问的资源。
> 
> 此构造函数假定字符串参数引用绝对 URI，并且等效于调用 Uri 构造函数并将 UriKind 设置为 Absolute。如果传递给构造函数的字符串参数是相对 URI，则此构造函数将抛出 UriFormatException。

这将尝试从用户输入构造一个规范的 Uri。而且您有很多属性可以检查和提取您需要的 URL 部分。

# ios - HTML 输入 jQuery UI datepicker vs iOS 原生日期输入

> ID：10207214
> 
> 赞同：4
> 
> 时间：2012-04-18T10:08:51.773
> 
> 标签：ios, html, jquery-ui, mobile, webkit

我有一个页面，其中包含一些输入 type="text" 并附加了 jQuery UI 日期选择器，该页面以“2012 年 2 月 14 日”格式输入日期到字段中。伟大的。现在我需要为移动/小屏幕调整界面。我遇到的问题是，当 iPhone 用户点击文本输入时，会出现 jQuery 日期选择器，并且 iOS 还显示它是本机文本输入键盘。

我尝试使用 Modernizr 来检测 html5 inputtype=date 可用性并禁用 jQuery 日期选择器（如果可用）并将输入类型切换为“日期”，以便了解这一点的设备可以使用其本机输入。但是，这会以后端系统不理解的格式“2012-02-14”输入日期。根据格式为“2012 年 2 月 14 日”的日期，已经完成了大量工作。

因此，如果有人可以提供帮助，我正在寻找一种仅让 jQuery UI 日期选择器出现在所有系统上的方法，或者寻找一种意味着可以强制本地日期/文本输入输入格式“2012 年 2 月 14 日”的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T18:51:10.377

不幸的是，日期选择器格式不能被覆盖，因为它与用户的系统设置相关联。

实际上，您可以做的是让您的脚本根据可用技术（例如 Modernizr.inputtypes.date）进行从 type="text" 到 type="date" 的动态切换。

从那里您可以嵌入一个隐藏字段并将当前日期字段的名称转换为该隐藏字段，然后将本地日期选择器中的日期格式解析为您想要的格式并设置该隐藏字段的值。

```
<input type="date" name="userSetDate"/> 
```

对此：

```
<input type="date"/>
<input type="hidden" name="userSetDate" value="mm/dd/yyyy"/> 
```

由于格式的变化，困难在于将用户定义的格式解析为您想要的格式：

10-06-13 --> 是 2013 年 10 月 6 日还是 2013 年 6 月 10 日？

* * *

现在，您可以通过将标签设置为看起来像按钮的样式、应用准确的 [for] 属性并将 datepicker 字段设置为 type="hidden" 并将 datepicker 应用到该选项来执行与顶级解决方案相结合的操作。

```
<label for="fooDate">test</label>
<input type="hidden" name="fooDate" id="fooDate">

<script>
$('#fooDate').datepicker();
</script> 
```

希望您（是，注意到发布日期）能够弄清楚！

# java - 如何在 JSF 表中加载动态内容

> ID：10207215
> 
> 赞同：0
> 
> 时间：2012-04-18T10:08:53.953
> 
> 标签：java, jsp, jsf, javabeans

我有一个使用 JSF 开发的带有表格布局的网页。表内的数据，包括标题和内容值，应该是动态加载的。我目前的挑战是进入这个 JSF 页面的不同来源将有不同的记录行。我可以知道如何做到这一点吗？我需要 Java Bean 来实现我的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:04:15.117

您可以轻松地为此使用 bean。通常表的内容将来自数据库。所以在数据表中你可以使用`value="#{yourbean.contentList}"`. 并且`contentList`将根据可以由请求参数设置的所需数据的 id 来检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:28:49.020

JSF 数据表对行数没有限制。如果行数很多浏览器可能处理不好，使用分页限制行数[http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html](http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html)

如果数据中有不同数量的列（不是行），则动态生成数据表 [http://balusc.blogspot.com/2006/06/using-datatables.html#PopulateDynamicDatatable](http://balusc.blogspot.com/2006/06/using-datatables.html#PopulateDynamicDatatable)

感谢 BalusC！

# android - 3G 连接设备和 WiFi PC 之间的 UDP

> ID：10207224
> 
> 赞同：1
> 
> 时间：2012-04-18T10:09:18.077
> 
> 标签：android, networking, basic4android

是否可以通过 3G 网络使用 UDP？我尝试过但失败了，我的电脑上有一个读取 UDP 数据包的应用程序，我正在尝试使用我的 3G 连接手机将 UDP 数据包发送到该“服务器”。

这些场景有效： 本地到本地通过 Wifi 外部到外部通过 Wifi

这不起作用：3G 到 PC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:55:01.177

我找到了以下[来源](http://sourceforge.net/projects/open-dis/forums/forum/683284/topic/4058262)。对我来说最重要的是：

> *   iPhone 可以向 AT&T 网络外的主机发送 UDP 数据包
> *   iPhone 无法接收从 AT&T NAT 网络之外的主机发送给它的 UDP 数据包
> *   iPhone 应该能够向 AT&T 网络上的其他 iPhone 发送和接收 UDP 数据包。
> *   我们应该能够将 DIS 从 iPhone 发送到服务器
> *   我们应该能够在 WiFi 接口上进行多播，并向同一 WiFi 网络上的其他主机发送和接收

这也应该适用于所有其他智能手机。如果您无法从手机接收 UDP 数据包，则数据包可能被您的网络提供商阻止，或者您的设置有问题。

在我看来，更大的问题是您无法将数据发送回手机。这使得所有 UDP 调用都是单向路由，并可能使您的服务器无用。

# database - 从非本地连接到 ec2 数据库而不使用隧道

> ID：10207225
> 
> 赞同：0
> 
> 时间：2012-04-18T10:09:22.300
> 
> 标签：database, amazon-ec2, amazon-web-services

我正在制作一些应用程序，我需要连接到亚马逊服务器上的数据库。它在本地工作正常，但我需要直接访问数据库而无需 ssl 隧道。在 AWS 控制台上打开 3306 端口

# jsf - JSF 转发和重定向

> ID：10207226
> 
> 赞同：0
> 
> 时间：2012-04-18T10:09:26.707
> 
> 标签：jsf, icefaces

目前我正在研究一个 JSF ( [ICEfaces](http://www.icesoft.org/java/projects/ICEfaces/) ) 项目。我有一个菜单，其中菜单数据来自数据库。我的意思是标签和网址来自数据库。我正在执行查询并为菜单编写逻辑。到目前为止，JSF 是好的。

假设我点击了菜单链接。我有一个页面。在那个页面中，我有 3 个按钮。添加、更新和删除按钮。对于我使用的添加导航

```
<ice:outputLink/> 
```

剩下的我用

```
<ice:commandLink/> 
```

我可以使用上述内容从一个页面导航到另一个页面。我遇到的问题是返回上一页时，页面不走。谷歌搜索后，我注意到页面导航默认为转发。

当导航前进时，为什么上一页没有来......

请帮忙，

谢谢 vipul

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:57:41.397

我并不完全理解您的问题，但我认为您可能正在寻找的是当您单击链接时浏览器中的 url 发生变化。

为此，只需将“ `?faces-redirect=true`”添加到您的链接。

例子：

```
<ice:outputLink value="mylink?faces-redirect=true" /> 
```

附带说明一下，当 Icefaces 完全抄袭 Primefaces 时，为什么还要使用它？为什么不直接使用原始代码（primefaces）？请参阅此链接以获取解释 - [http://blog.primefaces.org/?p=1692](http://blog.primefaces.org/?p=1692)。

# asp.net - Ninject 注入不适用于子类

> ID：10207230
> 
> 赞同：0
> 
> 时间：2012-04-18T10:09:31.540
> 
> 标签：asp.net, repository, ninject, ninject.web

我正在尝试在第三级子类上添加绑定，但找不到合适的方法。我正在使用 Ninject 3.0，我有以下场景：

```
public class ClassBase 
{
  [Inject]
  public IRepository RepositoryInstance { get; set; }
}

public class ClassA : ClassBase {} 
public class ClassB : ClassA {}

public class RepA : IRepository {}
public class RepB : IRepository {} 
```

如何将 RepA 绑定到 ClassBase 以便 ClassA 可以拥有该存储库，而 ClassB 应该绑定到 RepB ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:15:54.347

您可能会使用`WhenInjectedInto()`ninject`IBindingWhenSyntax<T>`接口。

所以，绑定代码看起来像

```
kernel.Bind<IRepository>().To<RepA>().WhenInjectedInto<ClassA>();
kernel.Bind<IRepository>().To<RepB>().WhenInjectedInto<ClassB>(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T10:15:15.423

据我记得， Inject 属性已被弃用，不应使用。我会使用构造函数来注入它，或者在特定的类中我会使用这种方法 IKernel kernel = new StandardKernel(); var 武士 = kernel.Get();

如此处所示：[https ://github.com/ninject/ninject/wiki/Dependency-Injection-With-Ninject](https://github.com/ninject/ninject/wiki/Dependency-Injection-With-Ninject)

# ios - NSFetchResultController 对非常大的 coredata 数据库没有那么敏感

> ID：10207236
> 
> 赞同：0
> 
> 时间：2012-04-18T10:09:48.653
> 
> 标签：ios, core-data

我正在设计一个字典应用程序，它的数据库至少有 220,000 个条目。首先，我使用单个实体来存储我的数据，然后在搜索数据库性能不佳之后，我将数据库设计更改为具有基于每个字母表的实体。

再说一次，因为我使用的方法是将所有与搜索对象匹配的数据提取到一个 NSArray 中，所以我的性能是不可接受的（每次击键都使我的 UIView 冻结大约 3 秒），所以我改为 NSFetchResultController。FRC 使我的应用程序响应速度更快（每次击键 1-1.5 秒），但这仍然不是可接受的结果。

如果您能进一步指导我，我将不胜感激，这样我就可以提高性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:22:40.200

用于在字典中存储和查找条目的良好数据结构是[Trie](http://www.eecs.harvard.edu/~ellard/Q-97/HTML/root/node24.html "特里")（或 Knuth 卷 3 p492）。如果你想在使用这个结构时继续使用 Core Data 来存储你的数据，你应该在`NSAtomicStore`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:08:44.200

由于 CoreData 是一个对象图，您可以实现任何您想要的排序/搜索算法。在这里尝试肯定会很好......并且尝试很容易实现。

但是，在我这样做之前，我会使用 CoreData 的新功能，并在您用于搜索的属性上添加一个索引。

使用 Xcode，调出您的模型，然后选择您的实体。然后，在最右侧，在属性检查器中，在您为实体命名的正下方，有一个设置搜索索引的地方。令人惊讶的是，它被称为“索引”。

将您进行所有搜索的属性添加到该属性。然后数据库将在该字段上维护一个索引，当您搜索它时，您不必线性搜索整个数据库。

# javascript - 向代码镜像添加动态提示

> ID：10207240
> 
> 赞同：2
> 
> 时间：2012-04-18T10:10:06.687
> 
> 标签：javascript, codemirror

我正在为 Javascript 语言使用带有代码提示（智能感知）的代码镜像。我的问题是，我可以在创建代码编辑器后在代码编辑器中添加动态提示（变量、函数名称等）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:11:42.170

是的，你可以，但你必须在提示代码中挖掘一下。最简单的方法是使用您自己的函数将分发包中的 JavaScript 提示函数包装起来，该函数调用它，然后在返回结果之前添加一些额外的自定义词。

# blackberry - 显示 Pdf 文件选项

> ID：10207249
> 
> 赞同：1
> 
> 时间：2012-04-18T10:10:43.007
> 
> 标签：blackberry

如何在 BlackBerry 应用程序中显示 pdf 文件。我正在尝试在 browserField 中显示 pdf 文件，但它是

显示错误“加载页面错误”我尝试了很多但没有得到任何解决方案。请帮助我卡住了

从很久

这是我的 pdf 网址：

[http://iphone.imagescreations.eu/apps/salmson/fichiers/AQUASON-AL-PAP_NT_ENG_50Hz.pdf](http://iphone.imagescreations.eu/apps/salmson/fichiers/AQUASON-AL-PAP_NT_ENG_50Hz.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:23:14.910

我们无法在黑莓浏览器中显示 pdf。因为，黑莓不为此提供api。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:54:14.153

我想知道是否没有办法，只是找到了这个库：

[适用于 BlackBerry 的 PDF 渲染器。](http://pdfrend4bb.codeplex.com/)

检查这是否是您正在寻找的东西。

# java - Android 将变量从公共 void 传递给 onCreate

> ID：10207253
> 
> 赞同：0
> 
> 时间：2012-04-18T10:10:57.220
> 
> 标签：java, android, public, void, oncreate

我想将一个字符串从公共空间中取出并放入我的 onCreate 中，这样我就可以记录它以检查哈希是否正常工作。但我不知道该怎么做

这是我的代码

```
public class ChooseTeamActivity extends ListActivity {

    private static final String apiKey = "4545ggg454hfnf7557kfdkgg454"; 
    private static final String apiUser = "AndroidUser"; 

    long unixTimeStamp = System.currentTimeMillis() / 1000L;

    String newFeedRequest = "1.0/evoStructure?timestamp=" + unixTimeStamp;
    String fixturesFeedURL = "https://secure.TestSite.com/_services/api/" + newFeedRequest;

    public void hash() throws NoSuchAlgorithmException, UnsupportedEncodingException{

        MessageDigest md = MessageDigest.getInstance("SHA-256");
        md.update(fixturesFeedURL.getBytes("UTF-8"));
        byte[] digest = md.digest();
        String strhash = new String(digest);

    }   

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

    setContentView(R.layout.chooseact);

     Log.v("myApp", fixturesFeedURL);
     Log.v("myApp", strhash);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:16:18.630

试试这个 ：

```
 public class ChooseTeamActivity extends ListActivity {

    private static final String apiKey = "4545ggg454hfnf7557kfdkgg454"; 
    private static final String apiUser = "AndroidUser"; 

    long unixTimeStamp = System.currentTimeMillis() / 1000L;

    String newFeedRequest = "1.0/evoStructure?timestamp=" + unixTimeStamp;
    String fixturesFeedURL = "https://secure.TestSite.com/_services/api/" + newFeedRequest;
    String strHash = null;
    public void hash() throws NoSuchAlgorithmException, UnsupportedEncodingException{

        MessageDigest md = MessageDigest.getInstance("SHA-256");
        md.update(fixturesFeedURL.getBytes("UTF-8"));
        byte[] digest = md.digest();
        strHash = new String(digest);

    }   

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

    setContentView(R.layout.chooseact);

     hash();
     Log.v("myApp", fixturesFeedURL);
     Log.v("myApp", strhash);

    }

} 
```

或者 ：

```
public class ChooseTeamActivity extends ListActivity {

    private static final String apiKey = "4545ggg454hfnf7557kfdkgg454"; 
    private static final String apiUser = "AndroidUser"; 

    long unixTimeStamp = System.currentTimeMillis() / 1000L;

    String newFeedRequest = "1.0/evoStructure?timestamp=" + unixTimeStamp;
    String fixturesFeedURL = "https://secure.TestSite.com/_services/api/" + newFeedRequest;

    public String hash() throws NoSuchAlgorithmException, UnsupportedEncodingException{

        MessageDigest md = MessageDigest.getInstance("SHA-256");
        md.update(fixturesFeedURL.getBytes("UTF-8"));
        byte[] digest = md.digest();
        return new String(digest);

    }   

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

    setContentView(R.layout.chooseact);

     String strhash = hash();
     Log.v("myApp", fixturesFeedURL);
     Log.v("myApp", strhash);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:14:21.007

只需将 Log 行放入 hash() 方法并从 onCreate 调用它：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        hash();

}

public void hash(){
   Log.v("myApp", "HelloWorld");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:15:33.533

我想你想这样做...

```
public class ChooseTeamActivity extends ListActivity {

    private static final String apiKey = "4545ggg454hfnf7557kfdkgg454"; 
    private static final String apiUser = "AndroidUser"; 

    long unixTimeStamp = System.currentTimeMillis() / 1000L;

    String newFeedRequest = "1.0/evoStructure?timestamp=" + unixTimeStamp;
    String fixturesFeedURL = "https://secure.TestSite.com/_services/api/" + newFeedRequest;

    public void hash() throws NoSuchAlgorithmException, UnsupportedEncodingException{

        MessageDigest md = MessageDigest.getInstance("SHA-256");
        md.update(fixturesFeedURL.getBytes("UTF-8"));
        byte[] digest = md.digest();
        String strhash = new String(digest);

     Log.v("myApp", fixturesFeedURL);
     Log.v("myApp", strhash);
    }   

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

    setContentView(R.layout.chooseact);
    try{ 
     hash();
      }catch(Exception e){
       }

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:25:50.550

我从你的问题中得到的尝试使用这种方式

```
private static final String apiKey = "4545ggg454hfnf7557kfdkgg454"; 
private static final String apiUser = "AndroidUser"; 
String strhash="";
long unixTimeStamp = System.currentTimeMillis() / 1000L;

String newFeedRequest = "1.0/evoStructure?timestamp=" + unixTimeStamp;
String fixturesFeedURL = "https://secure.TestSite.com/_services/api/" + newFeedRequest;

public void hash() throws NoSuchAlgorithmException, UnsupportedEncodingException{

    MessageDigest md = MessageDigest.getInstance("SHA-256");
    md.update(fixturesFeedURL.getBytes("UTF-8"));
    byte[] digest = md.digest();
    strhash = new String(digest);

}   

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

setContentView(R.layout.chooseact);

 Log.v("myApp", fixturesFeedURL);
 Log.v("myApp", strhash);

}} 
```

# php - Mysql添加并将它们添加为新列

> ID：10207255
> 
> 赞同：0
> 
> 时间：2012-04-18T10:10:58.950
> 
> 标签：php, mysql, count, case

我想获取 2 列计数并将它们的总数作为一个新列。我怎样才能做到这一点？

我写了这个查询，但这返回了错误的总数。

```
SELECT count(case when `status`='1' then 1 else 0 end) AS HOT,
count(case when `status`='5' then 1 end) 
AS Special_Case,count(case when 1=1 then 1 end) AS TOTAL 
FROM `tbl_customer_conversation` group by 
date(`dt_added`),user_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:16:48.950

COUNT 只会给出匹配记录的时间，在您的查询中将始终返回 1。因为值可以是`1`或`0`。所以`count(1)`也是 1`count(0)`也是`1`。

`HOT`AS，您想要案例总数，`SPECIAL_CASE`您必须使用 SUM。

```
SELECT 
    SUM(case when `status`='1' then 1 else 0 end) AS HOT,
    SUM(case when `status`='5' then 1 end) AS Special_Case,
    SUM(case when `status` = '1' or `status` = '5' then 1 end) AS TOTAL 
FROM `tbl_customer_conversation` 
group by date(`dt_added`),user_id 
```

# html - 为什么我的 HTML5 标签在 Chrome 中有效，但在 Firefox 中无效？

> ID：10207263
> 
> 赞同：0
> 
> 时间：2012-04-18T10:11:33.537
> 
> 标签：html, video

我在 Google Chrome 中使用此代码并且视频运行良好，但在 Firefox（版本 11）中它无法正常工作。

我怎样才能让它在 Firefox 中工作？

```
<!DOCTYPE html>
<html>
<body>
<video width="300" height="200" controls="controls">
<source src="http://localhost/javascript/test.mp4" type="video/mp4" />
</video>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:15:36.297

Firefox 不支持将 mp4 作为视频编码。查看[MDN](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements#Browser_compatibility)以获取兼容性表。

您必须为 Firefox 提供额外的编码才能工作（就像这个示例也取自 MDN）：

```
<video controls>  
  <source src="somevideo.webm" type="video/webm">  
  <source src="somevideo.mp4" type="video/mp4">  
  I'm sorry; your browser doesn't support HTML5 video.  
  <!-- You can embed a Flash player here, to play your mp4 video in older browseres -->  
</video> 
```

* * *

**2016 年 1 月 19 日更新：**

现在 Firefox 支持 mp4 视频格式。所以这个问题应该会因为火狐浏览器的更新而自动回答。如果您的视频仍然无法播放，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:17:02.800

从版本 4 开始，Firefox 仅支持 WebM、VP8 和 Vorbis 视频格式。（Firefox 3.5 支持 Ogg、Theora 和 Vorbis。）

看：

*   [https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements)。
*   [http://diveintohtml5.info/video.html#what-works](http://diveintohtml5.info/video.html#what-works)

您需要以 Firefox 支持的格式创建视频的另一个版本，并`<source>`为其添加另一个元素。

例如，请参见：

*   [http://diveintohtml5.info/video.html#example](http://diveintohtml5.info/video.html#example)

# php - Wikipedia 使用 PHP 获取信息框

> ID：10207265
> 
> 赞同：1
> 
> 时间：2012-04-18T10:11:52.663
> 
> 标签：php, parsing, wikipedia-api

所以我试图从维基百科页面中的 infoboxe 模板中解析内容。但是我必须使用 PHP，因为我不能单独配置我的服务器，而且我没有权限这样做。（所以我不能使用框架 Dbpedia）

我需要帮助，因为我试图了解如何解析这个对象 Infoboxe。此网址的示例： http://fr.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&rvsection=0&titles= [Roger_Federer](http://fr.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&rvsection=0&titles=Roger_Federer)

请不要告诉我看文档，它很无聊而且不是很有用。我一直在尝试解析这些内容，但我不明白如何使用 PHP？

THhhhhxxxx 来帮助我！:)))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:17:16.797

您可以使用以下命令调用此 python 脚本`exec()`：

[https://stackoverflow.com/a/9208881/956397](https://stackoverflow.com/a/9208881/956397)

`exec()`手册：[http ://www.php.net/manual/en/function.exec.php](http://www.php.net/manual/en/function.exec.php)

# jquery-mobile - jQuery Mobile v1.1.0 加载器/进度条在安卓互联网浏览器上不显示

> ID：10207268
> 
> 赞同：0
> 
> 时间：2012-04-18T10:12:23.240
> 
> 标签：jquery-mobile, progress-bar

您好，我对 jQuery Mobile v1.1.0 有疑问。当我尝试使用此功能时。

```
$.mobile.showPageLoadingMsg(); 
```

进度指示器未显示。进度指示器（加载器）显示在常规浏览器中，如 FF，但在 Android 互联网浏览器中，现在显示 PI。你知道为什么加载器隐藏在android浏览器中吗？我在三星nexus手机上测试过，安卓版本v2.3.4。我试图用这样的参数调用函数

```
$.mobile.showPageLoadingMsg("b", "test message test", false); 
```

但这仅适用于我的 PC 网络浏览器 FF、Chrome IE 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:47:39.630

您是否尝试过文档中的[示例？](http://jquerymobile.com/demos/1.1.0/docs/config/loadingMessageTextVisible.html)

在我的 android 2.3.3 上显示了加载器，但加载器图像没有动画。

如果这些示例对您有用，请确保您使用 1.1.0 版本（css、js、图像）替换/删除了所有旧 JQM 文件，并且它们在文档中正确链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:54:56.403

当为 v1.1.0 部署 themeroller 时，zipfile 和样式表中的加载器图像出现了一个小错误。

这在几个小时内就[修复](https://github.com/jquery/web-jquery-mobile-theme-roller/issues/84)了，但可能是您下载的版本尝试加载 ajax-loader.gif，而 ajax-loader.png 在 zipfile 中。

从[themeroller](http://jquerymobile.com/themeroller/)再次获取您的主题可能会为您修复它

问候， 卡斯帕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:34:05.520

我有同样的问题。之后进行 ajax 调用时未显示进度对话框。我在超时函数调用中封装了除了 showPageLoading 调用之外的所有内容。

```
$.mobile.showPageLoadingMsg();  
setTimeout(function() {  
...[here your code goes]...  
},200); 
```

对我有用，虽然动画只在函数执行之前有效（这里：200ms），但这对我来说并不重要。

# c# - PetaPoco：获取复合对象

> ID：10207269
> 
> 赞同：3
> 
> 时间：2012-04-18T10:12:23.973
> 
> 标签：c#, petapoco

我对 PetaPoco 很熟悉（顺便说一句，它看起来很棒），但这里有一个拦截器，我很好奇我是否可以在 PetaPoco 中做到这一点。

我想做的是将数据库中的一行映射到一个复合对象中。我认为这个例子会让事情变得清晰。

假设我们在数据库中有一个名为“Customers”的表，行看起来像这样：

```
ID | Name     | City     | Street           | 
1  | John Doe | New York | Some Street Name | 
```

我想使用这样的模型：

```
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Address Address { get; set; }
}

public class Address
{
    public string City{ get; set; }
    public string Street { get; set; }
} 
```

所以我们必须在c#中使用不同的对象，但它只有一个实体（一个Id，数据库中的一行）。

我可以使用 PetaPoco 实现这样的映射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:04:27.790

是的，你可以，它很简单：

```
var customers = db.Fetch<customer, address>(@"
        SELECT * FROM customers
        LEFT JOIN adresses ON customers.customerID = adresses.customerID 
        ORDER BY customers.customerID
        "); 
```

[在http://www.toptensoftware.com/blog/posts/115-PetaPoco-Mapping-One-to-Many-and-Many-to-One-Relationships](http://www.toptensoftware.com/blog/posts/115-PetaPoco-Mapping-One-to-Many-and-Many-to-One-Relationships)中有关该和其他多重映射的更多信息

# ios - 如何知道哪个popover被解雇了

> ID：10207273
> 
> 赞同：2
> 
> 时间：2012-04-18T10:12:43.550
> 
> 标签：ios

我有一个可以显示多个弹出框的视图控制器。不是同时。哪个是知道哪个弹出窗口被解雇的最佳方法`popoverControllerDidDismissPopover`？

我必须对被解雇的弹出框采取不同的行动。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:57:37.773

像这样的东西应该工作。（这段代码不完整——我假设你知道基本的内存和类管理以及其他东西，所以我专注于实际问题）

在您的班级中保留一些 ivars 来存储对您创建的 popovercontrollers 的引用

```
@interface MyClass : NSObject <UIPopoverControllerDelegate> {
    UIPopoverController *popover1;
    UIPopoverComtroller *popover2;
} 
```

像往常一样初始化你的 popovercontrollers 并在 popover1 和 popover2 中保存对它们每个的引用。

然后在 UIPopoverDelegate 协议的实现中：

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
    if(popoverController == popover1) {
        //popover1 was dismissed
    } else if (popoverController == popover2) {
        //popover2 was dismissed
    }
} 
```

编辑：查看您的评论，似乎您的意思是您只使用一个 popovercontroller，并用不同的 UIViewControllers 替换它的内容视图。

如果是这种情况，我建议您执行这些特定 UIViewController 中的任何操作，以影响您的应用程序的状态。

然后，一旦弹出框被关闭，您就可以使用新的刷新状态重新加载原始视图。

或者您将其更改为使用两个不同的 UIPopoverController 实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-08T21:06:22.293

这就是从 Xcode 6.3 beta 3 开始的 Swift 中的方式，在 Objective-C 中应该是*类似的。*

1.  您呈现的视图应该有`ViewController`自己的。

    ```
     import UIKit

     class MenuBookmarksViewController: UITableViewController  {
     } 
    ```

2.  `UIViewController`向该类添加扩展或将**代码（如下）**放在`UIViewController`将显示您的弹出框的内部：

    ```
    extension UIViewController: UIPopoverPresentationControllerDelegate {
      public func popoverPresentationControllerDidDismissPopover(popoverPresentationController: UIPopoverPresentationController) {
           if popoverPresentationController.presentedViewController as? MenuBookmarksViewController != nil {
              ///do your stuff
           }
      }
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:15:43.443

您通过了哪个弹出框正在被解雇`popoverControllerDidDismissPopover:`。使用它来确定您在每种情况下要做什么。

您可能希望将您的`UIPopoverController`实例存储为呈现它们的任何对象的 ivars，然后与您在委托方法中传递的值进行比较。

# ruby-on-rails - 将 RoR 应用程序部署到 Blacknight

> ID：10207275
> 
> 赞同：0
> 
> 时间：2012-04-18T10:12:57.687
> 
> 标签：ruby-on-rails, deployment

有谁知道如何将 RoR 应用程序部署到 blacknight，即我需要对路线进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:39:52.913

Blacknight 在共享主机计划中不提供 Ruby on Rails。如果你想使用 Ruby on Rails，你需要一个云服务器（参见： http: [//www.blacknight.com/cloud-hosting.html](http://www.blacknight.com/cloud-hosting.html)）

# android - 在 ubuntu 11.10 上编译 Android 时出错

> ID：10207280
> 
> 赞同：0
> 
> 时间：2012-04-18T10:13:20.850
> 
> 标签：android, android-ndk

在 ubuntu 11.10 上编译 Android 时出现以下错误

```
target arm C: libc <= bionic/libc/bionic/pthread.c
arm-linux-androideabi-gcc: error trying to exec 'cc1': execvp: No such file or directory
make: *** [out/target/product/generic/obj/SHARED_LIBRARIES/libc_intermediates/bionic/pthread.o] Error 1 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:25:05.677

它找不到cc1。在我全新安装的 Ubuntu 11.10 中，它已安装但不在我的路径中。尝试手动将其添加到您的路径中。

```
export PATH=<pathtoitgoeshere>:$PATH 
```

在我的 Ubuntu 上，它位于

```
/usr/lib/gcc/i686-linux-gnu/4.6.1/cc1 
```

但是您可以使用

```
gcc -print-prog-name=cc1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T09:51:28.430

我花了大约一天的时间来找到这个的根本原因：`arm-linux-androideabi-gcc: error trying to exec 'cc1': execvp: No such file...`以及其他问题。问题是我用 7z 解压了 NDK 和 SDK，这删除了所有二进制文件的可执行权限，并且 Eclipse 无法启动 cc1。一旦我使用 tar 解压了 SDK 和 NDK 的 tar 文件，一切都开始运行良好。

PS。我希望对其他人来说，这一天是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T04:34:46.827

我从 Ubuntu 12.04 => 14.04 升级后遇到了这个问题。

Seems like the build-essential package wasn't upgraded properly. For me, I was able to fix by doing

```
sudo apt-get purge gcc
sudo apt-get install gcc 
```

# mysql - 在跨多列的全文索引中匹配的列

> ID：10207281
> 
> 赞同：0
> 
> 时间：2012-04-18T10:13:23.020
> 
> 标签：mysql, full-text-search, matching, full-text-indexing

我正在使用最新版本的 MySQL 5.5。

我有一个全文索引，跨越专门为全文搜索生成的表中的多个列（数据库中的其他表使用 innodb）：

```
somedata_search
========
id
name
about
note
dislike 
```

除了 ID 之外，我对所有列都有全文索引。我可以使用以下命令运行全文搜索：

```
 SELECT * FROM account_search WHERE MATCH(name, about, note, dislike) AGAINST('mykeyword*' IN BOOLEAN MODE); 
```

这一切都很好，但是有没有办法确定每一行的匹配来自哪一列？如果一行中有跨列匹配，我很高兴只有第一列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:05:30.243

我不认为有任何“本地”的方式来获得它，但无论如何都有可能做到这一点。

我不确定这是否很快，但它会返回正确的数据

```
select text_test.*,
       match(name) against ('dude' in boolean mode) as name_match, 
       match(info) against ('dude' in boolean mode) as info_match 
  from text_test 
 where match(name, info) against ('dude' in boolean mode); 
```

[http://sqlfiddle.com/#!2/5159c/1](http://sqlfiddle.com/#!2/5159c/1)

# emacs - emacs 的 cedet ede 项目

> ID：10207283
> 
> 赞同：4
> 
> 时间：2012-04-18T10:13:27.637
> 
> 标签：emacs, project, cedet

我正在尝试学习如何使用 CEDET。我没有任何项目要搞砸，所以我想拍摄 Emacs 本身。

当我在 dir 中打开 Emacs 存储库时，似乎 CEDET 会自动将 Emacs 检测为项目。但是当我这样做时`M-x ede-find-file`，没有文件可以打开。

问题是，我怎样才能在 CEDET 中准确地将 Emacs 设置为一个项目，以利用 EDE 和 CEDET 的其他优点。？

似乎这方面的[文档](http://www.randomsample.de/cedetdocs/ede/ede/ede_002demacs.html#ede_002demacs)还没有完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T01:56:19.967

该命令`ede-find-file`不提供完成。如果您正在访问 Emacs 源中的某个文件（如 INSTALL）并执行以下操作：

```
M-x ede-find-file RET emacs.c RET 
```

它应该弹出emacs.c。

不同的 CEDET 功能都有不同类型的依赖关系，因此很难具体回答这个问题，但一般来说，您所要做的就是访问 Emacs 项目中的文件，并且应该启用其他功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:45:11.550

我认为，应该以与其他 EDE 项目相同的方式添加它，例如：

```
(setq emacs-project
      (ede-emacs-project "emacs-head"
           :file "/home/ott/work/emacs-head/README")) 
```

至少这对我有用......

# javascript - 使用 % 模数理解此 Javascript 代码

> ID：10207290
> 
> 赞同：0
> 
> 时间：2012-04-18T10:14:09.583
> 
> 标签：javascript

我目前正在学习 Javascript。我看过下面的代码，这让我很困惑。

**代码描述：**
从第 1 行开始，函数 isOdd 接受一个数字 n 并返回一个布尔值（真或假），说明该数字是否为奇数。

**代码**

```
var isOdd = function (n) {
      if (n % 2 === 0) {
        return false;
      } else {
        return true;
      }
    };

    var isEven = function(n) {
        if(n % 2 === 0) {
            return true;
        } else {
            return false;
        }
    }; 
```

**我感到困惑的地方。**
编码：

```
n % 2 === 0 
```

我一直将以下内容作为 % 的描述：

```
% Is the modulus operator. It returns the remainder of dividing number1 by number2. 
```

这意味着函数 isOdd 中的 if 语句返回 false 是 n 和 2 之间的差为 0。但它的意思是如果 n 可被 2 整除（偶数）返回 false。

我只是不明白它是如何做到的。

在我看来，如果我们取偶数 30。将其应用于 n % 2。我们得到 15，这是 30 除以 2 的余数。15 不等于 0，但 30 是偶数，并且使用此代码会被视为奇怪。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:16:28.583

有问题的行：

```
 if (n % 2 === 0) {
    return false;
  } 
```

意思是“如果你将 n 除以 2 余数为零，则返回 false（即 n 不是奇数）”。

“余数”是减去最接近的倍数时剩下的，例如“64 % 10”是 4，因为 10 的最接近倍数是 60，剩下 4。

以你的例子，换一种说法，30/2 是 15，30%2 是零（即 30/2 之后剩下的任何东西）。[这是有关除法后剩余部分](http://en.wikipedia.org/wiki/Remainder)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:32:15.163

你混淆了[Quotient](http://en.wikipedia.org/wiki/Quotient)和[Remainder](http://en.wikipedia.org/wiki/Remainder)。当您将 30 除以 2 时，整数商为 15，余数为 0。您还可以通过将整数商乘以除数并从被除数中减去它来计算余数。所以这个除法的余数是 30（除数）- 15（商）* 2（除数）= 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:17:20.940

如果 n 可以除以 2，则表示它是偶数 ->
表示它不是奇数 ->
isOdd 为假

# macos - 如何获取活动空间上每个可见窗口的框架（原点，大小）？

> ID：10207291
> 
> 赞同：1
> 
> 时间：2012-04-18T10:14:15.447
> 
> 标签：macos, cocoa

我试图弄清楚如何获取所有可见窗口的框架。我尝试了以下代码，但它仅适用于应用程序本身其他窗口报告 {0,0,0,0}

```
 NSArray *windowArray =  [NSWindow windowNumbersWithOptions:NSWindowNumberListAllApplications | NSWindowNumberListAllSpaces];
for(NSNumber *number in windowArray){
    NSLog(@"Window number: %@", number);
    NSWindow *window = [[NSApplication sharedApplication] windowWithWindowNumber:[number intValue]];
    NSLog(@"Window: %@", NSStringFromRect( [[window contentView] frame]));
} 
```

示例代码表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:14:57.393

我想到了：

```
 NSMutableArray *windows = (__bridge NSMutableArray *)CGWindowListCopyWindowInfo(kCGWindowListOptionOnScreenOnly | kCGWindowListExcludeDesktopElements, kCGNullWindowID);

for (NSDictionary *window in windows) {
    NSString *name = [window objectForKey:@"kCGWindowName" ];
    CGRect bounds;
    CGRectMakeWithDictionaryRepresentation((CFDictionaryRef)[window objectForKey:@"kCGWindowBounds"], &bounds);
    NSLog(@"%@: %@",name,NSStringFromRect(bounds));            
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:37:13.667

您不能`NSWindow`为另一个应用程序的窗口创建一个。通常，您无法访问其他应用程序的对象，除非通过与它们合作的接口（例如脚本）。

您可以使用[Quartz Window Services (aka CGWindowList) API](https://developer.apple.com/library/mac/#documentation/Carbon/reference/CGWindow_Reference/Reference/Functions.html)获得所需的内容。

我完全不确定 Cocoa 返回的窗口编号是否与该 API 使用的窗口编号相同。实际上，文档`-[NSWindow windowNumber]`专门说“请注意，这与窗口服务器分配的全局窗口编号不同”。我确定您可以将返回的窗口编号`+[NSWindow windowNumbersWithOptions:]`用于您的应用程序窗口的用途。

# asp.net - 数据绑定中继器。未找到物业

> ID：10207295
> 
> 赞同：0
> 
> 时间：2012-04-18T10:14:23.503
> 
> 标签：asp.net, repeater, datasource

为什么我收到 DataBinding 的错误：`_Default+Student does not contain a property called name.`

这是我的代码隐藏：

```
public class Student
{
       public string name ="Name";
       public string favouriteFood = "Favourite food";
       public string hobby = "Hobby";

}

protected void Page_Load(object sender, EventArgs e)
{

     Student nino = new Student();
     nino.name = "nino";
     nino.favouriteFood = "nachos";
     nino.hobby = "dancing son";

     Student madelene = new Student();
     madelene.name = "madelene";
     madelene.favouriteFood = "sushi";
     madelene.hobby = "dancing casino";

     Student baiba = new Student();
     baiba.name = "baiba";
     baiba.favouriteFood = "bitch soup";
     baiba.hobby = "complaining";

     ArrayList students = new ArrayList();

     students.Add(madelene);
     students.Add(nino); 
     students.Add(baiba); 

     testRepeater.DataSource = students;
     testRepeater.DataBind();

} 
```

这是前面：

```
 <asp:Repeater runat="server" ID="testRepeater" >
    <ItemTemplate>
        <asp:Label ID="Label1" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "name") %>' />"></asp:Label>
    </ItemTemplate>

</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:20:59.883

将公共变量`name`转换为如下属性：

```
private string _name;
public string name
{
   get
   {
      return _name??"Name";
   }
   set
   {
      _name = value;
   }
} 
```

如果您不需要默认值 ( `"Name"`)，它可以是自动属性，例如：

```
public string name {get;set;} 
```

# c++ - 带有 NameFullyQualifiedDN 的 GetUserNameEx 在 3-4 秒内没有返回，为什么？

> ID：10207296
> 
> 赞同：0
> 
> 时间：2012-04-18T10:14:31.260
> 
> 标签：c++, winapi, active-directory, distinguishedname

我有一个非常奇怪的问题和一个关于可能解决方案的问题。我需要从用 C++ 编写的程序（使用本机 WinAPI）在 Windows 计算机上获取完全限定的专有名称。为此，我使用以下 API：

```
TCHAR buff[256];
DWORD dwSz = 256;
GetUserNameEx(NameFullyQualifiedDN, buff, &dwSz); 
```

如果我从用户模式进程（从用户桌面）运行上面的代码，它在任何时候都无法工作。但是当我从系统服务调用该 API 时，它不会在 3-4 秒内返回！（我应该说上面的代码可能会在不是 Active Directory 域成员的系统上调用。）

所以我的第一个问题是，为什么从服务调用它会是一个问题？

第二个问题，如果我在我的服务启动时调用该 API，然后将结果缓存在一个全局变量中，然后再使用它，那么该系统上的专有名称发生变化的可能性有多大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:12:06.220

如果系统不是域的成员，API 调用将会失败。

当您将其作为本地系统与用户上下文运行时，究竟发生了什么很难说 - 我可能会从网络跟踪开始，看看发生了什么。

我不会假设用户的 DN 是静态的。这是管理员可以随时更改的内容。

添加 DsCrackNames 工作流程：

1.  调用`DsBind`- 将 NULL 传递给前两个参数以获取句柄
2.  `DsCrackNames`使用#1 中的句柄`DS_NAME_NO_FLAGS`、`DS_FQDN_1779_NAME`、 和计算机名称进行调用。您可能必须在机器名称上附加一个 $。
3.  打电话`DsFreeNameResult`这样你就不会泄露结果
4.  打电话`DsUnBind`这样你就不会从 #1 泄漏句柄

# javascript - 将 json 数据存储在代理模式内的变量中

> ID：10207297
> 
> 赞同：0
> 
> 时间：2012-04-18T10:14:33.193
> 
> 标签：javascript, jquery, ajax

我有这个代码：

```
var my = {};

(function () { 
    var self = this;
    this.sampleData = { };

    this.loadData = function() {
       $.getJSON('http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?', 
          {tags: "cat", tagmode: "any", format: "json"},
          function(data){
             self.sampleData = data;
          }
       );
    };
}).apply(my);

my.loadData();
console.log(my.sampleData); // {} 
```

问题是 my.sampleData 没有任何东西。

在此处尝试此示例：http: [//jsfiddle.net/r57ML/](http://jsfiddle.net/r57ML/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:16:52.187

原因是`getJSON`调用是**异步**的，因此您在数据返回之前查找数据。相反，直接或间接地将使用数据的代码*放入回调中。*

例如，您可以让您的`loadData`呼叫接受回调：

```
var my = {};

(function () { 
    var self = this;
    this.sampleData = { };

    this.loadData = function(callback) {
       $.getJSON('http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?', 
          {tags: "cat", tagmode: "any", format: "json"},
          function(data){
             self.sampleData = data;
             callback(); // <==== Call the callback
          }
       );
    };
}).apply(my);

my.loadData(function() { // <=== Pass in a callback
    console.log(my.sampleData); // Now the data is htere
}); 
```

* * *

旁注：由于您的`my`对象是单例，因此您可以稍微简化该代码，不需要`apply`,`this`或`self`，因为您的匿名函数`my`是定义的上下文的闭包：

```
var my = {};

(function () { 
    my.sampleData = { };

    my.loadData = function(callback) {
       $.getJSON('http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?', 
          {tags: "cat", tagmode: "any", format: "json"},
          function(data){
             my.sampleData = data;
             callback();
          }
       );
    };
})();

my.loadData(function() {
    console.log(my.sampleData); // Now the data is htere
}); 
```

当然，如果您使用的是构造函数或其他东西（您不在引用的代码中，但是......），那么您当然可能需要更复杂的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:17:09.347

```
(function () { 
        var self = this;
        this.sampleData = {};

        this.loadData = function() {
           $.getJSON('http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?', 
              {tags: "cat", tagmode: "any", format: "json"},
              function(data){
                 self.sampleData = data;
                 console.log(my.sampleData); // you get sample data after ajax response
              },
           'json');
        };
    }).apply(my);

    my.loadData(); 
```

# asp.net - 网页设计在不同浏览器中的一点点变化

> ID：10207298
> 
> 赞同：-1
> 
> 时间：2012-04-18T10:14:35.687
> 
> 标签：asp.net, css

我正在使用 asp.net 开发一个 Web 应用程序。如果我在其中运行我的网页，`IE7` 那么与`IE8`. 你能指导我为什么会出现这种差异以及这个问题的解决方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:40:52.607

IE7 和 IE8 呈现页面有点不同。就那么简单。就像 IE8 的呈现方式与 Firefox 或 FF3 与 FF2 的呈现方式略有不同。造成差异的最大原因是古怪的 CSS，但即使使用完全标准的样式，也存在一些差异。在 IE7 和 IE8 之间，出现了向更符合标准的渲染的巨大推动，包括对盒子模型的细微更改等。

首先，确保您的页面以标准模式呈现。Quirks 模式的基本意思是“按你的感觉渲染”，在 IE 中的意思是“像 IE5 那样渲染”。添加`<!DOCTYPE html>`一行作为文件中的第一行应该触发标准模式，如果它不存在的话。之后，解决布局差异。

理想的解决方案：如果一切都不是像素完美的，那么布局看起来不会像废话。这并不难，特别是因为布局表已被有效弃用。

次优但实用的解决方案：

```
<!--[if IE 7]>
 <link href="ie7.css" rel="stylesheet">
<![endif]--> 
```

在`ie7.css`中，将可以将内容轻推到 IE7 中正确位置的小调整。如果你的 CSS 做得正确，其他浏览器往往不需要这样的调整。

# c# - 找不到字段：“Microsoft.Windows.Controls.DataGrid.DeleteCommand”

> ID：10207303
> 
> 赞同：1
> 
> 时间：2012-04-18T10:14:55.577
> 
> 标签：c#, wpf, wpfdatagrid, wpftoolkit

在客户端机器上，我收到了这个错误。有人可以建议我可能是什么问题吗？

这是该问题的完整堆栈跟踪：

```
Error Message
Field not found: 'Microsoft.Windows.Controls.DataGrid.DeleteCommand'.
Stack Trace 
  at ABC.MyNameSpace.DataGridGridUserControl.OnCanExecuteDelete(Object sender, CanExecuteRoutedEventArgs e)
   at System.Windows.Input.CanExecuteRoutedEventArgs.InvokeEventHandler(Delegate genericHandler, Object target)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
 at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
       at System.Windows.Input.RoutedCommand.CriticalCanExecuteWrapper(Object parameter, IInputElement target, Boolean trusted, CanExecuteRoutedEventArgs args)
       at System.Windows.Input.RoutedCommand.CanExecuteImpl(Object parameter, IInputElement target, Boolean trusted, Boolean& continueRouting)
       at System.Windows.Input.RoutedCommand.CriticalCanExecute(Object parameter, IInputElement target, Boolean trusted, Boolean& continueRouting)
       at System.Windows.Input.RoutedCommand.CanExecute(Object parameter, IInputElement target)
       at MS.Internal.Commands.CommandHelpers.CanExecuteCommandSource(ICommandSource commandSource)
       at System.Windows.Controls.Primitives.ButtonBase.UpdateCanExecute()
       at System.Windows.Controls.Primitives.ButtonBase.HookCommand(ICommand command)
       at System.Windows.Controls.Primitives.ButtonBase.OnCommandChanged(ICommand oldCommand, ICommand newCommand)
       at System.Windows.Controls.Primitives.ButtonBase.OnCommandChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
       at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
       at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
       at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
       at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, OperationType operationType)
       at System.Windows.StyleHelper.ApplyTemplatedParentValue(DependencyObject container, FrameworkObject child, Int32 childIndex, FrugalStructList`1& childRecordFromChildIndex, DependencyProperty dp, FrameworkElementFactory templateRoot)
       at System.Windows.StyleHelper.InvalidatePropertiesOnTemplateNode(DependencyObject container, FrameworkObject child, Int32 childIndex, FrugalStructList`1& childRecordFromChildIndex, Boolean isDetach, FrameworkElementFactory templateRoot)
       at System.Windows.StyleHelper.LoadOptimizedTemplateContent(DependencyObject container, ParserContext parserContext, OptimizedTemplateContent optimizedTemplateContent, FrameworkTemplate frameworkTemplate, IComponentConnector componentConnector, IStyleConnector styleConnector, List`1 affectedChildren, UncommonField`1 templatedNonFeChildrenField)
       at System.Windows.FrameworkTemplate.LoadContent(DependencyObject container, List`1 affectedChildren, UncommonField`1 templatedNonFeChildrenField)
       at System.Windows.StyleHelper.ApplyTemplateContent(UncommonField`1 dataField, DependencyObject container, FrameworkElementFactory templateRoot, Int32 lastChildIndex, HybridDictionary childIndexFromChildID, FrameworkTemplate frameworkTemplate)
       at System.Windows.FrameworkTemplate.ApplyTemplateContent(UncommonField`1 templateDataField, FrameworkElement container)
       at System.Windows.FrameworkElement.ApplyTemplate()
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Border.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Control.MeasureOverride(Size constraint)
       at Microsoft.Windows.Controls.DataGrid.MeasureOverride(Size availableSize)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at MS.Internal.Helper.MeasureElementWithSingleChild(UIElement element, Size constraint)
       at System.Windows.Controls.ContentPresenter.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Border.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Control.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at MS.Internal.Helper.MeasureElementWithSingleChild(UIElement element, Size constraint)
       at System.Windows.Controls.ScrollContentPresenter.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.ScrollViewer.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at MS.Internal.Helper.MeasureElementWithSingleChild(UIElement element, Size constraint)
       at System.Windows.Controls.ContentPresenter.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Border.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Control.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at MS.Internal.Helper.MeasureElementWithSingleChild(UIElement element, Size constraint)
       at System.Windows.Controls.ContentPresenter.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Border.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Control.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Border.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
       at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at MS.Internal.Helper.MeasureElementWithSingleChild(UIElement element, Size constraint)
       at System.Windows.Controls.ContentPresenter.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Decorator.MeasureOverride(Size constraint)
       at System.Windows.Documents.AdornerDecorator.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Controls.Border.MeasureOverride(Size constraint)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.Window.MeasureOverrideHelper(Size constraint)
       at System.Windows.Window.MeasureOverride(Size availableSize)
       at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
       at System.Windows.UIElement.Measure(Size availableSize)
       at System.Windows.ContextLayoutManager.UpdateLayout()
       at System.Windows.ContextLayoutManager.UpdateLayoutCallback(Object arg)
       at System.Windows.Media.MediaContext.InvokeOnRenderCallback.DoWork()
       at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
       at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
       at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Boolean isSingleParameter)
       at System.Windows.Threading.ExceptionWrapper.TryCatchWhen(Object source, Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler) 
```

这是一个 WPF 桌面应用程序，我们使用的是 2009 年 6 月的 WPFToolkit。我怀疑 wpf 工具包在安装过程中没有正确安装在客户端计算机上，因此找不到 datagrid 的删除命令。有人可以帮我解决这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:30:08.673

This happen when something is changed the assembly and create a or even worse rename a .ddl file. I suggest you to download the [Reflector](http://www.reflector.net/) (is free to try) and inspect the .dll files.

# ipad - iPad 和 Safari 桌面上的非工作 cache.manifest

> ID：10207305
> 
> 赞同：2
> 
> 时间：2012-04-18T10:15:08.073
> 
> 标签：ipad, html, caching, safari, mime-types

我正在尝试创建测试网络应用程序的离线版本。到目前为止，它在我进行大部分测试的 Chrome 和 Firefox 上运行良好。这意味着我可以进入页面，控制台一切正常，然后当我拔下以太网电缆（我是这样的铁杆）时，我仍然可以在浏览器和 chrome://appcache-internals 中看到我的所有页面内容

当我尝试在 iPad 上测试它时出现问题，我转到我的网页，但是当进入飞行模式时，它拒绝访问说我需要互联网连接的页面。所以我决定在我最接近的 Safari (mac) 上进行测试，我确实在 cache.manifest mime-type 的控制台中看到了一个错误：`Application Cache manifest had an incorrect MIME type: text/plain.`

问题是，我确实有一个 .htaccess 并且它确实指定了`AddType text/cache-manifest appcache manifest`，但没有。即使我在我的 cache.manifest 文件上使用网络嗅探器，它也会以 text/plain 的形式出现，我认为这可能是它没有在 iPad/Safari 上读取的原因。

任何人都可以在这件事上帮助我吗？我现在完全被困住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:56:29.873

添加到您的清单文件 NETWORK 和 FALLBACK 块，使其看起来像这样：

```
CACHE MANIFEST

# Version 1.0

NETWORK:
*

CACHE:
index.html

FALLBACK: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:37:26.333

检查您是否在 iPad 上的 Safari 中启用了隐私浏览：

设置 -> Safari -> 隐私浏览

如果已启用，请禁用它。启用隐私浏览后，所有 cookie 和其他缓存都将被禁用。

我有一个类似的问题。我的应用程序在 iMac 上运行的 Safari 和 Firefox 上，甚至在飞行模式下的 iPhone 上都断开了互联网连接时运行良好。但是当我试图以飞行模式将它加载到 iPad 上时，它就无法正常工作。当我关闭隐私浏览时，它起作用了！仍然收到关于关闭飞行模式的通知。但是可以浏览应用程序。

# java - 设置文件的只读属性

> ID：10207317
> 
> 赞同：1
> 
> 时间：2012-04-18T10:15:59.420
> 
> 标签：java, readonly

我正在尝试设置文件的只读属性，但它似乎不起作用。有人可以帮我理解为什么。

这是我的代码...

```
public class Main {
    public static void main(String[] args) {
        File f = new File("c:/ulala.txt");
        if (!f.setReadOnly()) {
            System.out.println("Grrr! Can't set file read-only.");
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:19:41.800

该文件必须存在*并且*用户必须有权更改该文件的权限。您可以使用`f.exists()`.

# c# - 在 WPF 中使用具有多个值的 DataTrigger

> ID：10207318
> 
> 赞同：6
> 
> 时间：2012-04-18T10:16:04.740
> 
> 标签：c#, wpf, xaml, triggers, multidatatrigger

我正在使用 XAML 代码，其中一部分是

```
<DataTrigger Binding="{Binding Path=Name}" Value="1">
    <Setter Property="Header" TargetName="expanderHeader" Value="Course Text"/>
</DataTrigger>
<DataTrigger Binding="{Binding Path=Name}" Value="2">
    <Setter Property="Header" TargetName="expanderHeader" Value="Media Lecture"/>
</DataTrigger>
<DataTrigger    Binding="{Binding Path=Name}" Value="3">
    <Setter Property="Header" TargetName="expanderHeader" Value="Assessment"/>

<DataTrigger Binding="{Binding Path=Name}" Value="4">
    <Setter Property="Header" TargetName="expanderHeader" Value="Question"/>
</DataTrigger>
<DataTrigger Binding="{Binding Path=Name}" Value="5">
    <Setter Property="Header" TargetName="expanderHeader" Value="General"/>
</DataTrigger> 
```

现在我想使用一个 dataTrigger，它的值可以是 3、301、302 或 303。我该怎么做。我尝试使用 Multidatatrigger，但它不起作用。我尝试使用 Multidatatrigger 的代码是：

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding Path=Name}" Value="301"/>
        <Condition Binding="{Binding Path=Name}" Value="301"/>
        <Condition Binding="{Binding Path=Name}" Value="302"/>
        <Condition Binding="{Binding Path=Name}" Value="303"/>
        </MultiDataTrigger.Conditions>
    <Setter Property="Header" TargetName="expanderHeader" Value="Assessment"/>
</MultiDataTrigger> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T10:23:46.387

MultiDataTrigger 适用于*所有*条件不满足*时*，这就是 MultiDataTrigger 不起作用的原因。

要么有四个单独的触发器，要么将条件放入单独的布尔属性中，例如

```
bool ShowAssessment
{
    return Value == 301 || Value == 302 ...
} 
```

当值更改时，为 ShowAssessment 引发属性更改通知

例如

```
int Value { 
    get{ return _value; } 
    set { 
        _value = value; 
        RaisePropertyChanged("Value");
        RaisePropertyChanged("ShowAssessment");
    }
} 
```

然后触发 ShowAssessment。

可能更好的解决方案是添加一个带有 switch 语句的 HeaderText 属性，该语句基于`Value`. 然后只需将标题的文本绑定到那个。不需要触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:29:09.317

MultidataTrigger 将在所有条件都满足时执行。所以

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding Path=Prop1}" Value="301"/>
        <Condition Binding="{Binding Path=Prop2}" Value="301"/>
        <Condition Binding="{Binding Path=Prop3}" Value="302"/>
        <Condition Binding="{Binding Path=Prop4}" Value="303"/>
    </MultiDataTrigger.Conditions>
    <Setter Property="Header" TargetName="expanderHeader" Value="Assessment"/>
</MultiDataTrigger> 
```

您将需要一个 DataTrigger

```
<DataTrigger Binding="{Binding Path=ConditionEnum}" Value="1">
    <Setter Property="Header" TargetName="expanderHeader" Value="Course Text"/>
</DataTrigger> 
```

在代码中使用定义的逻辑设置枚举的值...

# 例子 ：

```
Validate()
{
    if(Value == 301 || Value == 302|| ....)
    {
        ConditionEnum = MyEnum.Assessment;
    }
    //Other Conditions
} 
```

我要离开`INotifyPropertyChanged`. 使用它来提供更改通知。

# mysql - 关于worklight的sql适配器中的缓存

> ID：10207320
> 
> 赞同：0
> 
> 时间：2012-04-18T10:16:11.040
> 
> 标签：mysql, ibm-mobilefirst

我浏览了worklight的培训材料。了解到worklight中的适配器具有可伸缩性。我看到工作灯适配器使用缓存来减少对数据库的访问次数。这个缓存如何减少命中次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T13:55:21.387

Worklight 不再支持 SQL 适配器的可伸缩性。

在以前的 Worklight 版本中，您可以使用 Worklight 服务器来缓存查询和结果。

在将查询发送到后端之前，您可以检查过去是否发送了确切的查询（有一个参数表明要保留此缓存多长时间）并在不调用后端的情况下从缓存中返回结果。

# git - Git将所有提交作为带有自定义消息的单个提交推送

> ID：10207321
> 
> 赞同：9
> 
> 时间：2012-04-18T10:16:13.880
> 
> 标签：git, git-push, git-commit

我想知道是否可以将我所有的本地提交（当天所有“未推送”提交）作为带有自定义消息的单个提交推送到远程存储库。Stack Overflow 上的帖子似乎都没有回答这个问题。我在 Windows 上使用 Git Bash。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T10:19:56.747

你想做的就是所谓的“壁球”。看看这里：

[https://makandracards.com/makandra/527-squash-several-git-commits-into-a-single-commit](https://makandracards.com/makandra/527-squash-several-git-commits-into-a-single-commit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T10:20:57.303

使用`git rebase -i HEAD~N`where `N`is `<the number of your commits> + 1`（为了安全起见）。您需要将除第一个之外的所有提交标记为`s`（代表“壁球”）并保存/退出编辑器。它会询问您最终压缩提交的提交消息 - 指定一个，您就完成了。

# jquery - 使用 JQuery 在单击提交按钮时使文本输入可编辑和不可编辑

> ID：10207322
> 
> 赞同：1
> 
> 时间：2012-04-18T10:16:14.143
> 
> 标签：jquery, html

我有一个要求，我需要在使用“提交”按钮提交表单时从数据库中填充文本输入字段的结果，同时**使输入字段不可编辑**。我目前有一个 JQuery 函数来执行此操作：

```
$(function(){
    $(".makeEditable").click(function(){
        $('input:text').removeAttr("readonly");    
    });
    $(".makeNonEditable").click(function(){
        $('input:text').attr("readonly", "readonly");    
    });               
}) 
```

当我用一个按钮测试它时，这个功能可以正常工作：

```
<input type="button" value="Make Non Editable" class="makeNonEditable" /> 
```

但是，这不适用于提交按钮：

```
<input type="submit" value="Search" class="makeNonEditable"/> 
```

所以，我不明白为什么它不适用于提交按钮但适用于普通按钮。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:18:22.530

从您的帖子看来，您的两个按钮都具有相同的类`makeNonEditable`

您可以将`readonly`文本字段的属性设置为默认值

```
<input type="text" value="" readonly="readonly"> 
```

提交按钮应更改为：

```
 $(function() {
       $(".makeEditable").click(function() {
            $('input:text').removeAttr("readonly");
       });
       $(".makeNonEditable").click(function(e) {

                // If you submit the for without ajax
                // then just make the text field default readonly="readonly"

            // OR

                // If you submit the form using ajax then use
                // $('input:text').removeAttr("readonly");
                // within success function
       });
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:30:47.610

我不知道是不是这样，但是提交类型发送一个表单的数据并重新加载页面。尝试使用：

```
$('#yourForm').submit(function(){
  // do something...
}); 
```

# php - 我有一个 javascript 倒计时，但我需要倒计时才能从我的 sql 数据库中获取日期

> ID：10207327
> 
> 赞同：0
> 
> 时间：2012-04-18T10:16:22.343
> 
> 标签：php, javascript, database, echo

我的页面从 mysql 数据库中的某个日期开始倒计时但是我不知道如何从数据库中获取日期到 javascript 上，我已经将日期回显到网页上，只需将其放入从那里开始的代码和倒计时。任何帮助都会很棒。谢谢

这是我的 javascript

```
function calcage(secs, num1, num2) {
s = ((Math.floor(secs/num1))%num2).toString();
if (LeadingZero && s.length < 2)
s = "0" + s;
return "<b>" + s + "</b>";
}

function CountBack(secs) {
if (secs < 0) {
document.getElementById("cntdwn").innerHTML = FinishMessage;

return;
}
DisplayStr = DisplayFormat.replace(/%%D%%/g, calcage(secs,86400,100000));
DisplayStr = DisplayStr.replace(/%%H%%/g, calcage(secs,3600,24));
DisplayStr = DisplayStr.replace(/%%M%%/g, calcage(secs,60,60));
DisplayStr = DisplayStr.replace(/%%S%%/g, calcage(secs,1,60));

document.getElementById("cntdwn").innerHTML = DisplayStr;
if (CountActive)
setTimeout("CountBack(" + (secs+CountStepper) + ")", SetTimeOutPeriod);
}

function putspan(backcolor, forecolor) {
document.write("<span id='cntdwn' style='background-color:" + backcolor +
            "; color:" + forecolor + "'></span>");
}

if (typeof(BackColor)=="undefined")
BackColor = "white";
if (typeof(ForeColor)=="undefined")
ForeColor= "black";
if (typeof(TargetDate)=="undefined")
TargetDate = "12/31/2020 5:00 AM";
 if (typeof(DisplayFormat)=="undefined")
 DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds.";
 if (typeof(CountActive)=="undefined")
 CountActive = true;
 if (typeof(FinishMessage)=="undefined")
 FinishMessage = "";
 if (typeof(CountStepper)!="number")
 CountStepper = -1;
 if (typeof(LeadingZero)=="undefined")
 LeadingZero = true;
 CountStepper = Math.ceil(CountStepper);
 if (CountStepper == 0)
 CountActive = false;
 var SetTimeOutPeriod = (Math.abs(CountStepper)-1)*1000 + 990;
 putspan(BackColor, ForeColor);
 var dthen = new Date(TargetDate);
 var dnow = new Date();
 if(CountStepper>0)
 ddiff = new Date(dnow-dthen);
 else
 ddiff = new Date(dthen-dnow);
 gsecs = Math.floor(ddiff.valueOf()/1000);
 CountBack(gsecs); 
```

这是我在 HTML 中的代码

```
<script language="JavaScript">
 TargetDate = "4/17/2012 23:41";
 BackColor = "white";
 ForeColor = "black";
 CountActive = true;
 CountStepper = -1;
 LeadingZero = true;
 DisplayFormat = "%%D%% Day, %%H%% Hour, %%M%% Minute, %%S%% Second ";
 FinishMessage = "Auction Ended";
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:22:19.360

您的 html 文件实际上应该是您首先调用查询的 php 文件：

```
$sql = "SELECT enddate FROM property WHERE propertyID = '1'"; 
$queryresult = mysql_query($sql) or die (mysql_error()); 
while ($row = mysql_fetch_assoc($queryresult))
{ $enddate=$row['enddate']; } 
```

然后您将日期格式化为：

```
$enddate = date("j/m/Y H:i",strtotime($enddate)); 
```

然后在php代码之后你有你的html代码并将日期打印为：

```
<script language="JavaScript">
 TargetDate = "<?php echo $enddate; ?>";
 BackColor = "white";
 ForeColor = "black";
 CountActive = true;
 CountStepper = -1;
 LeadingZero = true;
 DisplayFormat = "%%D%% Day, %%H%% Hour, %%M%% Minute, %%S%% Second ";
 FinishMessage = "Auction Ended";
 </script> 
```

# jquery - 悬停时jQuery在下拉菜单上闪烁

> ID：10207330
> 
> 赞同：1
> 
> 时间：2012-04-18T10:16:30.707
> 
> 标签：jquery, css, menu

我有一个正在开发的网站，当您将鼠标悬停在它们上时，下拉菜单会闪烁（大多数情况下）。

网站在这里：[http ://www.wya.hardingweb.net](http://www.wya.hardingweb.net)

子菜单的 CSS 如下所示：

```
#nav ul {
  position: absolute;
  left: 0;
  display: none;
  margin: 0 0 0 -1px;
  margin-top: 5px;
  padding: 0;
  list-style: none;
  background-color: rgba(221, 221, 221, 0.7);
  border: 1px solid #cccccc;
}

#nav ul li {
  width: 150px;
  float: left;
  border-top: 1px solid white;
}

#nav ul li.long {
  height: 50px;
}

#nav ul a {
  font-family: helvetica;
  font-size: 15px;
  display: block;
  line-height: 18px;
  padding: 6px 0px;
  color: #252060;
}

#nav ul a:hover {
  text-decoration: underline;
} 
```

这是由以下 jQuery（摘录）触发的：

```
$(document).ready(function() {

//Menu system
$('#nav li').hover(function() {
    //show its submenu
    $('ul', this).slideDown(100);

}, function() {
    //hide its submenu
    $('ul', this).slideUp(100);
});

}); 
```

我也有一个幻灯片正在运行，如果我为幻灯片禁用了 jQuery，那么菜单闪烁问题仍然是可重复的。

我最初使用 Firefox 11 和 Chrome 进行测试。

有没有人有任何想法？

谢谢奈杰尔 H

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:37:53.713

您闪烁的原因是下拉菜单的主要列表项中有 5px 的间隙。

如果您删除`margin-top: 5px;`上的`#nav ul`，那么它应该可以正常工作。

但是，这会使下拉菜单`0px`远离列表项。所以我建议删除`padding-bottom`on`ul#nav`并将其添加到`ul#nav li`.

在这些更正之后，您应该得到代码：

```
#nav {
  display: inline;
  float: left;
  margin-right: 10px;
  width: 950px;
  margin: 0;
  margin-top: 50px;
  margin-left: 100px;
  padding: 0;
  list-style: none;
}

#nav li {
  font-size: 28px;
  font-family: code-bold, helvetica, sans-serif;
  letter-spacing: -1px;
  padding-left: 20px;
  padding-right: 20px;
  color: #d1181e;
  float: left;
  display: block;
  position: relative;
  z-index: 500;
  margin: 0 1px;
  padding-bottom: 5px;
}

#nav ul {
  position: absolute;
  left: 0;
  display: none;
  margin: 0 0 0 -1px;
  padding: 0;
  list-style: none;
  background-color: rgba(221, 221, 221, 0.7);
  border: 1px solid #cccccc;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:50:36.433

尝试这个：

CSS

```
#nav ul {
    margin-top: 0;
} 
```

JS

```
//Menu system
$('#nav > li').hover(function() {
    //show its submenu
    $('ul', this).slideDown(100);
}, function() {
    //hide its submenu
    $('ul', this).slideUp(100);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:22:31.833

尝试过滤可见和隐藏的ul：

```
$('#nav li').hover(function() {
//show its submenu
$('ul:hidden', this).slideDown(100);

}, function() {
//hide its submenu
$('ul:visible', this).slideUp(100);
});

}); 
```

# amazon-web-services - Amazon AWS DynamoDB 桌面客户端 - 是否存在？

> ID：10207334
> 
> 赞同：82
> 
> 时间：2012-04-18T10:16:42.633
> 
> 标签：amazon-web-services, desktop-application, amazon-dynamodb

一直在网上寻找其中之一，但我只找到 node.js/ruby 托管的实现。

我渴望拥有一个 DynamoDB 应用程序，类似于带有 msi 安装程序的 navicat 之类的应用程序，以便快速运行。

也许有一个正当的理由说明为什么其中一个还不存在？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2015-06-23T11:52:14.663

如果您使用 DynamoDB local 进行开发，您可以使用内置的 DynamoDB shell：[http ://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Tools.DynamoDBLocal.Shell.html](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Tools.DynamoDBLocal.Shell.html)

http://localhost:8000/shell

更新：亚马逊也提供官方客户端：[https ://docs.aws.amazon.com/amazondynamodb/latest/developerguide/workbench.html](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/workbench.html)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-18T11:14:09.170

我还不知道用于从 Windows使用[Amazon DynamoDB的专用桌面应用程序。](http://aws.amazon.com/dynamodb/)

但是，AWS Toolkits for [Eclipse](http://aws.amazon.com/eclipse/)和[Visual Studio](http://aws.amazon.com/visualstudio/)都允许您直接从本地开发环境创建表、插入和编辑数据、启动表扫描等（请参阅介绍性文章[AWS Toolkits for Eclipse and Visual Studio Now Support DynamoDB](http://aws.typepad.com/aws/2012/01/aws-toolkits-for-eclipse-and-visual-studio-now-support-dynamodb.html)）。

因此，根据您的用例，这可能就是您所需要的（或者甚至更好，如果这是针对开发场景）。

* * *

### 更新

AWS 团队刚刚宣布了[使用 AWS 管理控制台探索您的 DynamoDB 表](http://aws.typepad.com/aws/2012/05/explore-your-dynamodb-tables-using-the-aws-management-console.html)的选项：

> 您现在可以从 AWS 管理控制台中查看和修改 DynamoDB 表的内容。通过添加此新功能，您可以边做边学——无需编写任何代码即可试用许多 DynamoDB 功能。您可以通过一个非常干净和简单的用户界面创建一个表格、添加一些项目并在表格中查看它们。

这显然是对上面我最初回答中提到的富客户端选项的一个非常方便的补充，请查看帖子本身以获得简短的插图*之旅，以帮助您入门*。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-11-22T21:26:55.770

适用于 Amazon DynamoDB 的 RazorSQL 数据库 GUI 工具

[http://razorsql.com/articles/razorsql_amazon_dynamodb.html](http://razorsql.com/articles/razorsql_amazon_dynamodb.html)

* * *

## 回答 #4

> 赞同：-10
> 
> 时间：2013-09-19T08:42:58.740

Amazon 为 DynamoDb 提供本地客户端。它是一个 java jar，可以在 Linux 和 Windows 上运行。

它启动一个绑定到 localhost 端口 8000 的服务器（或者您可以在启动服务器时指定另一个端口）。

下载并解压桌面客户端，将应用程序内的端点更改为 localhost:8000，然后您可以使用桌面客户​​端进行 DynamoDb。

[在这里](http://aws.typepad.com/aws/2013/09/dynamodb-local-for-desktop-development.html)您可以下载并阅读有关安装 dynamodb 桌面客户端的信息。

# ruby-on-rails - Rails Oauth：无法获取 request_token，过滤器链停止

> ID：10207341
> 
> 赞同：2
> 
> 时间：2012-04-18T10:17:13.177
> 
> 标签：ruby-on-rails, api, oauth

尝试从我的 Rails OAuth API 获取 request_token 时得到这个：

```
Started POST "/oauth/request_token" for 127.0.0.1 at 2012-04-18 13:09:18 +0300
Processing by OauthController#request_token as */*
  Rendered text template (0.0ms)
Filter chain halted as #<OAuth::Controllers::ApplicationControllerMethods::Filter:0x00000001c82d68 @options={:interactive=>false, :strategies=>:two_legged}, @strategies=[:two_legged]> rendered or redirected
Completed 401 Unauthorized in 26ms (Views: 25.1ms | ActiveRecord: 0.0ms) 
```

使用以下宝石：

*   oauth 0.4.5
*   oauth2 0.5.2
*   oauth 插件 0.4.0

此 API 在 Rails 3.0 中运行良好，但在迁移到 Rails 3.2 并更新所有 gem 后停止工作。我想知道会出什么问题。

这是我获取 request_token 的方式：

```
consumer2 = OAuth::Consumer.new("kwqAtXlMn5hhpmL1AnaDb2L9qXwI6qK4dgiWcKAh", "H51lKIleX4IymCdbdkWLO5ooPM3SWVTjtnhiqhGz", :site => "http://localhost:3000")

url = "http://localhost:3000/callback"

request_token = consumer2.get_request_token(:oauth_callback => url) 
```

密钥已检查并正确。

这是 oauth_controller.rb （我想它负责授予 request_token ？）

```
require 'oauth/controllers/provider_controller'
class OauthController < ApplicationController
  include OAuth::Controllers::ProviderController

  def login_required
    authenticate_user!
  end

  protected
  # Override this to match your authorization page form
  # It currently expects a checkbox called authorize
  # def user_authorizes_token?
  #   params[:authorize] == '1'
  # end

  # should authenticate and return a user if valid password.
  # This example should work with most Authlogic or Devise. Uncomment it
  def authenticate_user(username,password)
     user = User.find_by_email params[:username]
     if user && user.valid_password?(params[:password])
       user
     else
       nil
     end
   end

end 
```

更新：我已经深入研究了 Oauth-plugin gem，我认为问题出在此处：

provider_controller.rb：

```
module ProviderController
      def self.included(controller)
        controller.class_eval do
          before_filter :login_required, :only => [:authorize,:revoke]
          oauthenticate :only => [:test_request]
          oauthenticate :strategies => :token, :interactive => false, :only => [:invalidate,:capabilities]
          oauthenticate :strategies => :two_legged, :interactive => false, :only => [:request_token]
          oauthenticate :strategies => :oauth10_request_token, :interactive => false, :only => [:access_token]
          skip_before_filter :verify_authenticity_token, :only=>[:request_token, :access_token, :invalidate, :test_request, :token]
        end
      end 
```

请求 request_token 时，由于某种原因，身份验证出错。我想知道解决这个问题的聪明方法是什么。

# iphone - 自定义导航控制器

> ID：10207348
> 
> 赞同：0
> 
> 时间：2012-04-18T10:17:23.147
> 
> 标签：iphone, uinavigationcontroller

我在导航控制器中有问题。我无法在导航栏上创建动态按钮。我用过导航栏。在这里面，我有一个 TabBar。在 TabBar 内部，我还有一个导航控制器。

我可以在上面创建按钮。但我想要 TabBar 的父导航控制器上的动态按钮。

对于按钮它不起作用。我的代码：

```
UIBarButtonItem *searchBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemSearch target:self action:@selector(btnClick:)];

//[self.navigationItem setRightBarButtonItem:searchBtn];

[app.navigationController.navigationItem setRightBarButtonItem:searchBtn];
[searchBtn release]; 
```

对于隐藏父导航控制器，它正在工作。

```
app.navigationController.navigationBarHidden =YES; 
```

我怎么解决这个问题。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:34:50.047

如果我理解正确你应该改变这个

```
 [app.navigationController.navigationItem setRightBarButtonItem:searchBtn];
[searchBtn release]; 
```

进入

```
[app.navigationItem setRightBarButtonItem:searchBtn];
[searchBtn release]; 
```

# google-maps - 如何在为谷歌地图编码折线时修复丢失的精度

> ID：10207351
> 
> 赞同：1
> 
> 时间：2012-04-18T10:17:34.830
> 
> 标签：google-maps, google-maps-api-3

我找到了这个引用良好的页面[Encoding polylines for Google Maps](http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/)。我已经在我的应用程序中实现了他们用于编码和解码折线的算法，但是我在保持坐标精度方面遇到了一些问题。

我的折线有这些坐标：

```
57.012415241636155, 9.99178024863532
57.012422477487256, 9.991334773101812
57.01190974033057, 9.99068645350514 
```

如果我使用[他们的编码器对它们进行编码](http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/encodeForm.html)，我会得到这个编码的折线：

```
qf~zIso~{@AxAfB`C 
```

如果我之后尝试使用[他们的解码器](http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/decode.html)解码这个编码字符串，我会得到这些坐标：

```
57.01241, 9.99178
57.012420000000006, 9.991330000000001
57.011900000000004, 9.990680000000001 
```

为什么我失去了坐标的精度？我需要我的编码折线更精确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:41:11.423

您正在失去精度，因为编码会这样做。

但是，您肯定不需要那种精度。(57.012410, 9.991780) 和 (57.012411, 9.991781) 之间的距离（小数点后 6 位为 1）为 12 厘米。小数点后第五位的每个数字大约是一米。地图不是那么准确。

# c# - c# UpdatePanel 按钮单击不起作用

> ID：10207352
> 
> 赞同：1
> 
> 时间：2012-04-18T10:17:40.060
> 
> 标签：c#, asp.net, c#-2.0

为什么我的按钮在更新面板中不起作用，但如果我按“enter”键它就起作用了？

```
 <asp:ScriptManager ID="Sqrpt1" runat="server"></asp:ScriptManager>
        <asp:UpdatePanel UpdateMode="Always" ChildrenAsTriggers="true"  ID="updpan" runat="server"><ContentTemplate>
        <fieldset>
        <asp:Panel runat="server" ID="ClientSearchPa" DefaultButton="SearchClientPopup">
        <asp:TextBox ID="SearchClientBox" runat="server"></asp:TextBox>
&nbsp;<asp:Button ID="SearchClientPopup" runat="server" Text="Search" 
                onclick="SearchClientPopup_Click" /></asp:Panel>
        <br />
        <asp:ListBox ID="Clients" runat="server" Height="341px" Width="682px"></asp:ListBox>   

        <br />
        <br />
            <asp:Label ID="Label3" runat="server" Text="Label"></asp:Label>
           <asp:Button ID="ClientSelect" runat="server" OnClick="ClientSelect_Click" Text="button" /> 
           </fieldset> 
        </ContentTemplate>
        </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:30:23.443

您的代码完全没问题，并且按钮正在服务器端触发事件，更改您在服务器事件中的一些控制值。您可能没有注意到 ajax 调用的快速响应

```
 protected void SearchClientPopup_Click(object sender, EventArgs e)
    {
        SearchClientBox.Text = "Hello ajax SearchClient clicked";
    }
    protected void ClientSelect_Click(object sender, EventArgs e)
    {
        SearchClientBox.Text = "Hello ajax ClientSelect cliecked ";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:05:53.130

```
<asp:Panel runat="server" ID="ClientSearchPa" DefaultButton="SearchClientPopup"> 
<asp:TextBox ID="SearchClientBox" runat="server"></asp:TextBox> &nbsp;
<asp:Button ID="SearchClientPopup" runat="server" Text="Search" onclick= 
```

"SearchClientPopup_Click" />

```
 </asp:Panel> 
```

这里 DefaultButton 设置为 SearchClientPopup。因此，如果焦点位于面板内的任何控件上，则 Enter 键将起作用，SearchClientPopup 将触发单击事件。

```
 <asp:Button ID="ClientSelect" runat="server" OnClick="ClientSelect_Click" Text="button" /> 
```

此按钮不在面板控件内。因此您必须通过单击显式触发它

# bash - 如何从文件中删除所有变音符号？

> ID：10207354
> 
> 赞同：46
> 
> 时间：2012-04-18T10:17:45.220
> 
> 标签：bash, sed, replace

我有一个包含许多带有变音符号的元音的文件。我需要进行这些替换：

*   将 ā、á、ǎ 和 à 替换为 a。
*   将 ē、é、ě 和 è 替换为 e。
*   将ī、í、ǐ 和ì 替换为i。
*   将 ō、ó、ǒ 和 ò 替换为 o。
*   将 ū、ú、ǔ 和ù 替换为 u。
*   将 ǖ、ǘ、ǚ 和 ǜ 替换为 ü。
*   将 Ā、Á、Ǎ 和 À 替换为 A。
*   将 Ē、É、Ě 和 È 替换为 E。
*   将 Ī、Í、Ǐ 和 Ì 替换为 I。
*   将 Ō、Ó、Ǒ 和 Ò 替换为 O。
*   将 Ū、Ú、Ǔ 和 Ù 替换为 U。
*   将 Ǖ、Ǘ、Ǚ 和 Ǜ 替换为 Ü。

我知道我可以一次更换一个：

```
sed -i 's/ā/a/g' ./file.txt 
```

有没有更有效的方法来替换所有这些？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-04-18T10:35:36.997

If you check the man page of the tool `iconv`:

> //TRANSLIT
> When the string "//TRANSLIT" is appended to --to-code, transliteration is activated. This means that when a character cannot be represented in the target character set, it can be approximated through one or several similarly looking characters.

so we could do :

```
kent$  cat test1
    Replace ā, á, ǎ, and à with a.
    Replace ē, é, ě, and è with e.
    Replace ī, í, ǐ, and ì with i.
    Replace ō, ó, ǒ, and ò with o.
    Replace ū, ú, ǔ, and ù with u.
    Replace ǖ, ǘ, ǚ, and ǜ with ü.
    Replace Ā, Á, Ǎ, and À with A.
    Replace Ē, É, Ě, and È with E.
    Replace Ī, Í, Ǐ, and Ì with I.
    Replace Ō, Ó, Ǒ, and Ò with O.
    Replace Ū, Ú, Ǔ, and Ù with U.
    Replace Ǖ, Ǘ, Ǚ, and Ǜ with U.

kent$  iconv -f utf8 -t ascii//TRANSLIT test1
    Replace a, a, a, and a with a.
    Replace e, e, e, and e with e.
    Replace i, i, i, and i with i.
    Replace o, o, o, and o with o.
    Replace u, u, u, and u with u.
    Replace u, u, u, and u with u.
    Replace A, A, A, and A with A.
    Replace E, E, E, and E with E.
    Replace I, I, I, and I with I.
    Replace O, O, O, and O with O.
    Replace U, U, U, and U with U.
    Replace U, U, U, and U with U. 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-18T13:30:43.313

这可能对您有用：

```
sed -i 'y/āáǎàēéěèīíǐìōóǒòūúǔùǖǘǚǜĀÁǍÀĒÉĚÈĪÍǏÌŌÓǑÒŪÚǓÙǕǗǙǛ/aaaaeeeeiiiioooouuuuüüüüAAAAEEEEIIIIOOOOUUUUÜÜÜÜ/' file 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-09-02T15:56:35.907

我喜欢`iconv`它处理所有重音变化：

```
cat non-ascii.txt | iconv -f utf8 -t ascii//TRANSLIT//IGNORE > ascii.txt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T10:27:57.787

为此，*tr(1)*命令适用。例如：

```
tr 'āáǎàēéěèīíǐì...' 'aaaaeeeeiii...' <infile >outfile 
```

您可能必须检查/更改您的`LANG`环境变量以匹配正在使用的字符集。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-22T08:58:42.133

```
#!/bin/bash
INPUT="$1"
declare -a acc
declare -a noa
acc=('$' 'Ã¨' 'Ãª' 'Ã©' 'À' 'Á' 'Â' 'Ã' 'Ä' 'Å' 'Æ' 'Ç' 'È' 'É' 'Ê' 'Ë' 'Ì' 'Í' 'Î' 'Ï' 'Ð' 'Ñ' 'Ò' 'Ó' 'Ô' 'Õ' 'Ö' 'Ø' 'Ù' 'Ú' 'Û' 'Ü' 'Ý' 'ß' 'à' 'á' 'â' 'ã' 'ä' 'å' 'æ' 'ç' 'è' 'é' 'ê' 'ë' 'ì' 'í' 'î' 'ï' 'ñ' 'ò' 'ó' 'ô' 'õ' 'ö' 'ø' 'ù' 'ú' 'û' 'ü' 'ý' 'ÿ' 'Ā' 'ā' 'Ă' 'ă' 'Ą' 'ą' 'Ć' 'ć' 'Ĉ' 'ĉ' 'Ċ' 'ċ' 'Č' 'č' 'Ď' 'ď' 'Đ' 'đ' 'Ē' 'ē' 'Ĕ' 'ĕ' 'Ė' 'ė' 'Ę' 'ę' 'Ě' 'ě' 'Ĝ' 'ĝ' 'Ğ' 'ğ' 'Ġ' 'ġ' 'Ģ' 'ģ' 'Ĥ' 'ĥ' 'Ħ' 'ħ' 'Ĩ' 'ĩ' 'Ī' 'ī' 'Ĭ' 'ĭ' 'Į' 'į' 'İ' 'ı' 'Ĳ' 'ĳ' 'Ĵ' 'ĵ' 'Ķ' 'ķ' 'Ĺ' 'ĺ' 'Ļ' 'ļ' 'Ľ' 'ľ' 'Ŀ' 'ŀ' 'Ł' 'ł' 'Ń' 'ń' 'Ņ' 'ņ' 'Ň' 'ň' 'ŉ' 'Ō' 'ō' 'Ŏ' 'ŏ' 'Ő' 'ő' 'Œ' 'œ' 'Ŕ' 'ŕ' 'Ŗ' 'ŗ' 'Ř' 'ř' 'Ś' 'ś' 'Ŝ' 'ŝ' 'Ş' 'ş' 'Š' 'š' 'Ţ' 'ţ' 'Ť' 'ť' 'Ŧ' 'ŧ' 'Ũ' 'ũ' 'Ū' 'ū' 'Ŭ' 'ŭ' 'Ů' 'ů' 'Ű' 'ű' 'Ų' 'ų' 'Ŵ' 'ŵ' 'Ŷ' 'ŷ' 'Ÿ' 'Ź' 'ź' 'Ż' 'ż' 'Ž' 'ž' 'ſ' 'ƒ' 'Ơ' 'ơ' 'Ư' 'ư' 'Ǎ' 'ǎ' 'Ǐ' 'ǐ' 'Ǒ' 'ǒ' 'Ǔ' 'ǔ' 'Ǖ' 'ǖ' 'Ǘ' 'ǘ' 'Ǚ' 'ǚ' 'Ǜ' 'ǜ' 'Ǻ' 'ǻ' 'Ǽ' 'ǽ' 'Ǿ' 'ǿ');
noa=('S' 'e' 'e' 'e' 'A' 'A' 'A' 'A' 'A' 'A' 'AE' 'C' 'E' 'E' 'E' 'E' 'I' 'I' 'I' 'I' 'D' 'N' 'O' 'O' 'O' 'O' 'O' 'O' 'U' 'U' 'U' 'U' 'Y' 's' 'a' 'a' 'a' 'a' 'a' 'a' 'ae' 'c' 'e' 'e' 'e' 'e' 'i' 'i' 'i' 'i' 'n' 'o' 'o' 'o' 'o' 'o' 'o' 'u' 'u' 'u' 'u' 'y' 'y' 'A' 'a' 'A' 'a' 'A' 'a' 'C' 'c' 'C' 'c' 'C' 'c' 'C' 'c' 'D' 'd' 'D' 'd' 'E' 'e' 'E' 'e' 'E' 'e' 'E' 'e' 'E' 'e' 'G' 'g' 'G' 'g' 'G' 'g' 'G' 'g' 'H' 'h' 'H' 'h' 'I' 'i' 'I' 'i' 'I' 'i' 'I' 'i' 'I' 'i' 'IJ' 'ij' 'J' 'j' 'K' 'k' 'L' 'l' 'L' 'l' 'L' 'l' 'L' 'l' 'l' 'l' 'N' 'n' 'N' 'n' 'N' 'n' 'n' 'O' 'o' 'O' 'o' 'O' 'o' 'OE' 'oe' 'R' 'r' 'R' 'r' 'R' 'r' 'S' 's' 'S' 's' 'S' 's' 'S' 's' 'T' 't' 'T' 't' 'T' 't' 'U' 'u' 'U' 'u' 'U' 'u' 'U' 'u' 'U' 'u' 'U' 'u' 'W' 'w' 'Y' 'y' 'Y' 'Z' 'z' 'Z' 'z' 'Z' 'z' 's' 'f' 'O' 'o' 'U' 'u' 'A' 'a' 'I' 'i' 'O' 'o' 'U' 'u' 'U' 'u' 'U' 'u' 'U' 'u' 'U' 'u' 'A' 'a' 'AE' 'ae' 'O' 'o');

i=0
length=${#INPUT}
while [[ $i -lt $length ]]; do
    char=${INPUT:$i:1};
    #echo $i:$char
    j=0
    for letter in "${acc[@]}"
    do
        if [[ "$letter" == "$char" ]]; then
            char="${noa[$j]}"
        fi
        ((j++))
    done
    ((i++))
    OUTPUT=$OUTPUT$char
done
echo $OUTPUT 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T10:36:26.633

You can use something like this:

```
 sed -e 's/[àâ]/a/g;s/[ọõ]/o/g;s/[í,ì]/i/g;s/[ê,ệ]/e/g' 
```

just add more characters to [..] for your need.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-09T21:57:44.067

您可以使用`man iso_8859_1`（或您的字符集）或`od -bc`识别变音符号的八进制表示。然后用`gawk`做更换。

```
{ gsub(/\344/,"a"; print $0 } 
```

这替换`ä`为`a`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-29T16:05:14.087

如果您像我一样需要在文件文本的某些特殊位置替换重音符号，您可以使用这种正则表达式

```
echo '{"doNotReplaceKey":"bábögêjírù","replaceValueKey":"bábögêjírù","anotherNotReplaceKey":"bábögêjírù"}' \
    | sed -e ':a;s/replaceValueKey":"\([a-zA-Z0-9 -_]*\)[áâàãä]/replaceValueKey":"\1a/g;ta' \
    | sed -e ':a;s/replaceValueKey":"\([a-zA-Z0-9 -_]*\)[éêèë]/replaceValueKey":"\1e/g;ta'  \
    | sed -e ':a;s/replaceValueKey":"\([a-zA-Z0-9 -_]*\)[íîìï]/replaceValueKey":"\1i/g;ta'  \
    | sed -e ':a;s/replaceValueKey":"\([a-zA-Z0-9 -_]*\)[óôòõö]/replaceValueKey":"\1o/g;ta' \
    | sed -e ':a;s/replaceValueKey":"\([a-zA-Z0-9 -_]*\)[úûùü]/replaceValueKey":"\1u/g;ta' 
```

输出

```
{"doNotReplaceKey":"bábögêjírù","replaceValueKey":"babogejiru","anotherNotReplaceKey":"bábögêjírù"} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-02T16:23:00.343

这可能行不通。只是因为必须设置您的语言环境！

使用 locale 设置 LC_ALL，例如：

```
export LC_ALL=en_US.iso88591 
```

请注意，完整的语言环境列表可通过以下方式获得：

```
locale -a 
```

# c++ - 如何知道文件何时被编辑？

> ID：10207361
> 
> 赞同：0
> 
> 时间：2012-04-18T10:18:15.047
> 
> 标签：c++, windows, winapi

有没有办法（或 API）知道文本文件何时被编辑（由程序或人）并执行特定操作？

例如：我想在文件 c:\Users\john\free.txt 被编辑时显示一个 MessageBox。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T10:28:06.493

取决于你什么时候想知道它。

*   您的应用程序是否持续运行，您是否希望尽快看到任何变化？
*   您的应用程序是需要检查更改一次的简单命令行应用程序吗？

在第二种情况下，您可以检查文件的修改日期（如 PoweRoy 和 Michal 所建议）或使用哈希（如 PoweRoy 所建议）。

如果您的应用程序连续运行，您应该使用 FindFirstChangeNotification 和 ReadDirectoryChanges 函数。您可以在以下页面上阅读有关它的更多信息：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/aa364417(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364417(v=vs.85).aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465(v=vs.85).aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:21:04.433

最简单：比较修改日期。但这可以被操纵。

或者对原始文件进行哈希处理并将其与当前文件进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:23:05.933

GetFileTime 应该可以帮助您。

[http://msdn.microsoft.com/en-us/library/ms724320%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms724320%28v=vs.85%29.aspx)

还有 GetFileAttributesEx。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:24:47.320

检查文件的最后修改日期时间。此方法检索与给定 CFile 对象实例或给定文件路径相关的状态信息。

BOOL GetStatus(CFileStatus& rStatus) 常量；static BOOL PASCAL GetStatus(LPCTSTR lpszFileName, CFileStatus& rStatus);

参数 rStatus 对将接收状态信息的用户提供的 CFileStatus 结构的引用。CFileStatus 结构具有以下字段：

CTime m_ctime 创建文件的日期和时间。

CTime m_mtime 上次修改文件的日期和时间。

CTime m_atime 上次访问文件以进行读取的日期和时间。

ULONGLONG m_size 文件的逻辑大小（以字节为单位），由 DIR 命令报告。

BYTE m_attribute 文件的属性字节。

char m_szFullName[_MAX_PATH] Windows 字符集中的绝对文件名。

lpszFileName Windows 字符集中的字符串，它是所需文件的路径。路径可以是相对的或绝对的，也可以包含网络路径名。

返回值 如果成功获取指定文件的状态信息，则为 TRUE；否则，错误。PS：资料来自MSDN

# sql - 在 SQL 中创建查询时需要一些帮助吗？

> ID：10207362
> 
> 赞同：0
> 
> 时间：2012-04-18T10:18:21.653
> 
> 标签：sql, postgresql

我有 2 个下表：

```
Ticket(ID, Problem, Status,Priority, LoggedTime,CustomerID*, ProductID*);
TicketUpdate(ID,Message, UpdateTime,TickedID*,StaffID*); 
```

这里有一个问题需要回答：

关闭至少 24 小时未更新的所有支持票证。这将是至少在 24 小时内从一名员工那里收到至少一次更新并且没有来自客户（或员工）的进一步更新的记录。

我的查询是：

```
UPDATE Ticket SET Status = 'closed' FROM TicketUpdate 
WHERE(LoggedTime - MAX(UpdateTime))> 24 
     AND Ticket.ID = TicketUpdate.TicketID; 
```

当我在 mysql 上运行此查询时，它说“<”不存在。

你能告诉我我的查询权是否可以计算至少 24 小时未更新的记录，如果是正确的，我应该用什么来代替“<”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:31:33.527

If you are working with postgreSQL then this should work

```
UPDATE Ticket SET Status = 'closed' FROM TicketUpdate 
WHERE abs(extract(epoch from LoggedTime - MAX(UpdateTime))) >24
     AND Ticket.ID = TicketUpdate.TicketID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:35:19.860

> ... 至少在 24 小时内收到了来自工作人员的至少一次更新并且没有来自客户（或工作人员）的进一步更新的记录。

因此，有效地，最后一次更新必须由工作人员完成并且超过 24 小时。这涵盖了一切。

（顺便说一句，你有一个错字：`TickedID`-> 我`ticketid`在这里使用。）

```
UPDATE ticket t
SET    status = 'closed'
FROM (
    SELECT DISTINCT ON (1)
           ticketid
          ,first_value(updatetime) OVER w AS last_up
          ,first_value(staffid)    OVER w AS staffid
    FROM   ticketupdate
    -- you could join back to ticket here and eliminate 'closed' ids right away
    WINDOW w AS (PARTITION BY ticketid ORDER BY updateTime DESC)
    ) tu
WHERE  tu.ticketid = t.id
AND    tu.last_up < (now()::timestamp - interval '24 hours')
AND    tu.staffid > 1 -- whatever signifies "update from a staff member"
AND    t.status IS DISTINCT FROM 'closed'; -- to avoid pointless updates 
```

请注意，如果没有双引号，PostgreSQL[会将标识符折叠为小写。](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)我建议一开始就远离混合大小写标识符。

# c# - 将多个文件从列表框中复制到指定文件夹

> ID：10207364
> 
> 赞同：0
> 
> 时间：2012-04-18T10:18:23.140
> 
> 标签：c#, listbox

在我的列表框的文件中有我想要复制文件这些指定的路径，例如 c:\ 或任何路径，但错误是（值不能是空参数名称路径）错误如何复制指定的路径我写这个代码

```
string source, fileToCopy, target;
string sourcefolder1;
string destinationfolder;
DirectoryInfo di = new DirectoryInfo(destinationfolder);
FileInfo[] annfiles;

foreach (string s in listBox1.Items)
{
     fileToCopy = s;
     source = Path.Combine(sourcefolder1, fileToCopy);
     target = Path.Combine(destinationfolder, fileToCopy);
     File.Copy(source, target);

     annFiles = di.GetFiles();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:37:32.093

I think the problem is here:

```
string destinationfolder; 
```

You declare an empty string and after try to get DirectoryInfo from what? And Empty string? This thrown an Exception. You can see your code like this:

```
DirectoryInfo di = new DirectoryInfo(""); 
```

This code throw always an Exception. The question is: what you need in "destinationFolder" parameter?

This is a sample file copy:

```
string sourceFolder = @"C:\Documents";
string destinationFolder = "@"C:\MyDocumentsCopy";

DirectoryInfo directory = new DirectoryInfo(sourceFolder);
FileInfo[] files = directory.GetFiles();
foreach(var file in files)
{
    string destinationPath = Path.Combine(destinationFolder, file.Name);
    File.Copy(file.Fullname, destinationPath);
} 
```

# c# - c# combobox DrawItem - 刷新问题

> ID：10207366
> 
> 赞同：0
> 
> 时间：2012-04-18T10:18:39.523
> 
> 标签：c#, combobox

我在组合框中创建了一个字体列表。我将它的 DrawMode 设置为 OwnerDrawFixed 并且 DrawItem 方法很简单：

```
void cmbFonts_DrawItem(object sender, DrawItemEventArgs e)
{
    if (e.Index < 0) return;
    e.DrawBackground();

    Font newFont =
        new Font(cmbFonts.Items[e.Index].ToString(), this.DefaultFontSize);
    e.Graphics.DrawString(cmbFonts.Items[e.Index].ToString(),
                          newFont,
                          new SolidBrush(Color.Black),
                          new Rectangle(e.Bounds.Location, e.Bounds.Size));
    e.DrawFocusRectangle();
} 
```

一般来说，它可以正常工作。问题出现在鼠标滚动上。然后一些项目看起来像随机图形，直到它们被聚焦。有人知道问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:01:48.173

*无论索引如何，始终*调用 e.DrawBackground()。使固定：

```
void cmbFonts_DrawItem(object sender, DrawItemEventArgs e)
{
    e.DrawBackground();
    if (e.Index >= 0) {
       // etc...
    }
} 
```

# c++ - 组框外观

> ID：10207368
> 
> 赞同：1
> 
> 时间：2012-04-18T10:18:44.020
> 
> 标签：c++, c, windows, winapi

我正在使用 Visual Studio 2008 专业版。我在对话框编辑器中设计了以下对话框： ![我设计的对话框](../Images/cda412d64cc83e916c7e57bf5c3b6e7d.png)

请密切注意名为“任务”的对话框中的组框。在这里看起来不错，但是当我从我的应用程序中将其显示为无模式对话框时，该 GroupBox 的外观突然变为 -： ![从应用程序显示时的对话框](../Images/97c332b0d8d5211adccd313ddbc8d8e4.png)

突然，对话框编辑器中指定的原始蓝色标题和圆形边缘消失了，取而代之的是黑色前景和方形边缘。**我想知道为什么会突然发生这种情况，我希望它以对话框编辑器中指定的外观显示。**

以下代码存在于我的资源文件（Timer.rc）中，用于对话框：

```
IDD_FORMVIEW DIALOGEX 0, 0, 204, 118
STYLE DS_ABSALIGN | DS_SETFONT | DS_SETFOREGROUND | DS_CENTER | WS_MINIMIZEBOX | WS_VISIBLE | WS_CAPTION | WS_SYSMENU
EXSTYLE WS_EX_APPWINDOW | WS_EX_NOACTIVATE
CAPTION "SR-Timer(Work in Progress)"
FONT 10, "Verdana", 400, 0, 0x0
BEGIN
    CONTROL         "Shutdown",IDC_RADIO1,"Button",BS_AUTORADIOBUTTON,73,37,48,10
    CONTROL         "Restart",IDC_RADIO2,"Button",BS_AUTORADIOBUTTON,73,54,39,10
    CONTROL         "Stand By",IDC_RADIO3,"Button",BS_AUTORADIOBUTTON,73,70,44,10
    CONTROL         "Hibernate",IDC_RADIO4,"Button",BS_AUTORADIOBUTTON,73,87,47,10
    GROUPBOX        "Tasks",IDC_STATIC,59,28,90,78
END 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:33:34.913

您应该启用 XP 通用控件样式。

最简单的方法是将其包含在清单文件中，例如通过将其添加到链接器中，或在代码中添加编译指示，如下所示：

```
#pragma comment(linker,"\"/manifestdependency:type='win32' \
name='Microsoft.Windows.Common-Controls' version='6.0.0.0' \
processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"") 
```

**编辑：**可能还需要显式初始化公共控件（不是 100% 确定），如下所示：

```
INITCOMMONCONTROLSEX    InitStr;
InitStr.dwSize = sizeof(InitStr);
InitStr.dwICC  = ICC_WIN95_CLASSES|ICC_DATE_CLASSES|ICC_COOL_CLASSES;
// Other classes are: ICC_COOL_CLASSES, ICC_INTERNET_CLASSES, ICC_PAGESCROLLER_CLASS, ICC_USEREX_CLASSES
InitCommonControlsEx(&InitStr); 
```

可能还需要使用正确的 Windows 版本定义进行编译。我使用这些命令行选项进行编译：

```
/D_WIN32_WINNT#0x0501 /DWINVER#0x0501 /D_WIN32_IE#0x0500 
```

但这总是意味着应用程序至少需要 Windows XP。

**EDIT2（作为对 sreyan 评论的回答）：**

我尝试编译以下源文件（称为 test.cpp）：

```
#include <iostream>

#pragma comment(linker,"\"/manifestdependency:type='win32' \
name='Microsoft.Windows.Common-Controls' version='6.0.0.0' \
processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"") 

void main()
{
std::cout << "Hello World" << std::endl;
} 
```

使用以下命令：

```
cl /EHsc /MD /c test.cpp
link test.obj 
```

并生成了以下文件：

```
23-04-12  10:49             9 728 test.exe
23-04-12  10:49               638 test.exe.manifest
23-04-12  10:49            16 812 test.obj 
```

test.exe.manifest 文件包含以下内容：

```
<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0'>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level='asInvoker' uiAccess='false' />
      </requestedPrivileges>
    </security>
  </trustInfo>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*' />
    </dependentAssembly>
  </dependency>
</assembly> 
```

所以这似乎工作正常。

重新检查您在 Visual Studio 中填写的选项以及您添加的编译指示。首先尝试使用一个小应用程序（如上面的应用程序），直到它正常工作。然后继续您的大型应用程序。如果还不行，对比一下小程序有什么不同。

成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T10:24:49.443

显然，这需要清单和/或调用`InitCommonControls()`. 有关更多信息，请参阅[启用视觉样式](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773175%28v=vs.85%29.aspx)。

# java - Java - 线程状态异常

> ID：10207369
> 
> 赞同：3
> 
> 时间：2012-04-18T10:18:44.073
> 
> 标签：java, multithreading

当我尝试重新开始我的线程时出现以下错误。

```
Exception in thread "Thread-1" java.lang.IllegalThreadStateException
     at java.lang.Thread.start(Unknown Source)
     at com.jrat.server.Server.run(Server.java:159) 
```

这是行：

```
if (!t.isAlive()) t.start(); 
```

代码可以在循环中执行多次（套接字处理程序）。据我所知，这个错误意味着它无法启动一个新线程，因为它已经在运行。奇怪的是我之前有一个 isAlive 。

知道为什么会这样吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T10:20:52.263

> 据我所知，这个错误意味着它无法启动一个新线程，因为它已经在运行。

不，这意味着您无法启动已经启动的线程。

您无法*重新启动*线程，这就是您正在尝试做的事情。从[文档中`start()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start%28%29)：

> 抛出： IllegalThreadStateException - 如果线程已经启动。

猜测您可能应该使用 an`ExecutorService`代替 - 但目前还不清楚您要做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:22:39.177

您不能在先前已启动的线程上调用 start。即使线程运行方法已经终止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:49:48.407

您要实现的是，如果您的线程不存在，请启动它。但它在概念上是错误的。

即使您的线程不存在，您也无法调用 start 方法。如果你已经启动过一次，那么即使它已经执行完毕，你也不能再次启动它。

如果您打算重新运行一个任务，那么您可以尝试 ExecutorService。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T12:20:01.123

Vodemki，每次有任务时创建一个新线程很昂贵。您应该使用线程池。基本上它的作用是你有一个 n 线程池并向它提交任务。如果某个线程是空闲的，它将执行您的任务。如果某个线程完成了它的任务，它就会回到池中等待其他任务。

尝试使用 ExecutorService 来池化线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T12:12:59.440

我找到了最简单的方法：

每次我需要启动一个新线程时，我都会创建一个新线程：

```
Thread t = new Thread()
{
    public void run()
    {
        // Do your deal here
    }
};
t.start(); 
```

# ios - 旋转 UIImage 或 UIImageView 自定义度数

> ID：10207374
> 
> 赞同：1
> 
> 时间：2012-04-18T10:19:14.110
> 
> 标签：ios, uiimageview, uiimage, image-rotation

我想旋转 UIImage 或 UIImageView，我尝试了很多代码，到处搜索，但我找不到有效的解决方案，我正在解释问题，我从网上下载了一张图片，然后我调整了它的大小这样：

```
- (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
//UIGraphicsBeginImageContext(newSize);
UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
[image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
UIGraphicsEndImageContext();
return newImage;
} 
```

并且调整大小工作得很好，然后我将我的 UIImage 附加到我的 UIImageView 上，然后我以这种方式旋转我的 UIImageView：

```
self.myImageView.transform = CGAffineTransformMakeRotation(degreesToRadian(-2)); 
```

但是这样边框是像素化的并且有锯齿，所以我尝试先旋转 UIImage，然后将图像提供给我的 UIImageView，我发现了很多类似的代码，特别是我使用这个类扩展：

[http://www.catamount.com/forums/viewtopic.php?f=21&t=967](http://www.catamount.com/forums/viewtopic.php?f=21&t=967)

并且通过这种方式，边界被抗锯齿，而是损失了图像质量，它更加模糊，并且不像第一次旋转它那样锐利，有人有好的解决方案吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T11:19:26.730

用于旋转图像..您可以使用此 IBAction ...每次单击按钮，图像将旋转 90 度...

```
-(IBAction)rotateImageClick:(id)sender{

UIImage *image2=[[UIImage alloc]init];
image2 = [self imageRotatedByDegrees:self.roateImageView.image deg:(90)]; //Angle by 90 degree
self.roateImageView.image = image2;
imgData= UIImageJPEGRepresentation(image2,0.9f); 
```

}

对于旋转图像，您只需为以下方法传递 UIimage 和旋转度数

```
- (UIImage *)imageRotatedByDegrees:(UIImage*)oldImage deg:(CGFloat)degrees 
```

//------------------------------------------------ ----------------------

```
#pragma mark - imageRotatedByDegrees Method

- (UIImage *)imageRotatedByDegrees:(UIImage*)oldImage deg:(CGFloat)degrees{

    // calculate the size of the rotated view's containing box for our drawing space
    UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0,oldImage.size.width, oldImage.size.height)];

    CGAffineTransform t = CGAffineTransformMakeRotation(degrees * M_PI / 180);
    rotatedViewBox.transform = t;

    CGSize rotatedSize = rotatedViewBox.frame.size;
    // Create the bitmap context
    UIGraphicsBeginImageContext(rotatedSize);
    CGContextRef bitmap = UIGraphicsGetCurrentContext();

    // Move the origin to the middle of the image so we will rotate and scale around the center.
    CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

    //   // Rotate the image context
    CGContextRotateCTM(bitmap, (degrees * M_PI / 180));

    // Now, draw the rotated/scaled image into the context
    CGContextScaleCTM(bitmap, 1.0, -1.0);
    CGContextDrawImage(bitmap, CGRectMake(-oldImage.size.width / 2, -oldImage.size.height / 2, oldImage.size.width, oldImage.size.height), [oldImage CGImage]);

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;

} 
```

我认为这个链接会有所帮助.......！通过单击Objective C中的按钮旋转原始图像

[http://adrianmobileapplication.blogspot.com/2015/03/rotate-original-image-by-clicking.html](http://adrianmobileapplication.blogspot.com/2015/03/rotate-original-image-by-clicking.html)

# r - 通过加载 .rda 文件生成的打开文件

> ID：10207377
> 
> 赞同：1
> 
> 时间：2012-04-18T10:19:27.013
> 
> 标签：r

我听从了你关于创建一个在 R 中加载文件的循环的建议，并做了：

```
dataFiles<-lapply(Sys.glob("kwo*.rda*"), load) 
```

现在我有我的数据文件，其中包含我想要加载的文件

```
head(dataFiles)

[[1]]
[1] "kw"

[[2]]
[1] "kw"

[[3]]
[1] "kw" 
```

现在我需要处理我加载的文件中包含的信息，我应该怎么做才能打开文件并“识别”它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:46:48.790

在这种循环中加载的标准行为是创建一个临时环境，将数据加载到其中，然后再次丢弃这个临时环境。如果您希望它们在全局环境中，则需要将它们显式加载到全局环境中，请参阅[此 SO 帖子](https://stackoverflow.com/questions/3764292/loading-many-files-at-once)以获取更多信息。这会将所有文件中包含的所有对象加载`.Rda`到您的全局环境中，也就是工作区。

你能提供更多关于你在做什么的信息吗？是什么生成了 Rda 文件，您想对读入的数据做什么？更多信息可以帮助我们，帮助你。而且您参考了您之前的 SO 问题（我遵循了您关于创建在 R 中加载文件的循环的建议），我在您的个人资料中找不到这个问题。

# java - 静态初始化程序的代码超出 java 中的 65535 字节限制错误？

> ID：10207388
> 
> 赞同：4
> 
> 时间：2012-04-18T10:20:05.687
> 
> 标签：java, static, initialization

您好我正在尝试初始化 4 个长度为 10,100,1000,10000 的字符串数组，这些数组就像

```
array1={"0","1",..."9"} 
array2={"00","01",..."99"} 
array3={"000","001",..."999"} 
array4={"0000","0001",..."9999"} 
```

但是我收到了**静态初始化程序的代码超出了 65535 字节限制的错误**

如何初始化我的数组？

另请注意，从文件加载它不是我的选择:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T10:21:42.033

使用`for`循环。例如：

```
for (int i = 0; i <= 9; i++)
    array1[i] = String.valueOf(i); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T10:40:53.817

常量数组 in 在 java 字节码中通过从常量池中加载每个值并将其分配给相应的数组索引来初始化。每个数组元素需要几个字节的代码。jvm 方法的大小限制为 65535 字节，因为它的长度使用 16 位数字存储在类文件中。

在无法在循环中轻松计算值的情况下，您可以将初始化分解为单独的静态函数：

```
static {
    array1 = getValuesForArray1();
    ...
}

private static String[] getValuesForArray1() {
    ...
} 
```

如果初始化值有模式，那么动态计算值当然更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T10:47:24.577

通过编写一个采用 int 参数并返回该数组索引处的字符串值的方法可能会更好地解决它。这里它使用 String.format 并指定左侧填充长度：

```
private static String getValue(int index, int stringLength) {
    return String.format("%0" + stringLength + "d", index);
} 
```

# asp.net - C# MVC3 DropDownList - 在表单帖子中找不到 ID

> ID：10207390
> 
> 赞同：0
> 
> 时间：2012-04-18T10:20:21.743
> 
> 标签：asp.net, asp.net-mvc-3, devexpress

我刚刚制作了一个包含 DropDownList 的表单，它完美地显示了选项名称，但没有将所选选项的 ID 发布到控制器中。

这是控制器的代码：

```
 [HttpGet]
    public ActionResult Insert(int id)
    {

            TemplateRepository repo = new TemplateRepository();
            List<Template> templateList = repo.ListAll().ToList<Template>();

            ViewData["Template"] = new SelectList(templateList, "Id", "Omschrijving");
            return View();
        }

        [HttpPost]
        public ActionResult InsertOrEditSubmit(Klant klant)
        {
            KlantRepository repo = new KlantRepository();
            klant.Naam = Request["Naam"];
            klant.Adres = Request["Adres"];
            klant.Postcode = Request["Postcode"];
            klant.Woonplaats = Request["Woonplaats"];
            klant.Email = Request["Email"];
            klant.Telefoon = Request["Telefoon"];

            repo.SaveOrUpdate(klant);

            return RedirectToAction("Index");
        } 
```

这是视图中的代码：

```
@using (Html.BeginForm("InsertOrEditSubmit", "Klant", FormMethod.Post))
{

@Html.DevExpress().Label(
    settings =>
    {
        settings.ControlStyle.CssClass = "label";
        settings.Text = "Template";
        settings.AssociatedControlName = "Template";
    }
).GetHtml() <br />
@Html.DropDownList("Template", ViewData["Template"] as SelectList);

@Html.DevExpress().Button(
    settings =>
    {
        settings.ControlStyle.CssClass = "button";
        settings.Name = "Insert";
        settings.Text = "Toevoegen";
        settings.UseSubmitBehavior = true;
    }
).GetHtml()
@Html.DevExpress().Button(
    settings =>
    {
        settings.ControlStyle.CssClass = "button";
        settings.Name = "Cancel";
        settings.Text = "Terug";
        settings.ClientSideEvents.Click = "function(s, e){ document.location='" + DevExpressHelper.GetUrl(new { Controller = "Gebruiker", Action = "Index" }) + "'; }";
    }
).GetHtml()
} 
```

希望有人能解释为什么它不发布ID..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:49:31.710

尝试：请求[“模板”]；

尝试一个简单的测试：

（控制器）

```
ViewData["Test"] = new SelectList(new[] {new {Id = 1, Text = "Test 1"}, new {Id = 2, Text = "Test 2"}, new {Id = 3, Text = "Test 3"}}, "Id", "Text"); 
```

（看法）

```
@Html.DropDownList("Test", ViewData["Test"] as SelectList) 
```

现在 Request["Test"] 应该返回所选值的 Id。

但是，如果您的视图是强类型的，在您的情况下是对象“Klant”，您不需要用请求填充值，该对象将自动填充，如果您的对象有一个属性 Template 它会也被填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:16:28.470

我发现有时有一个`name`与`id`输入一起解决这个问题。

您为**模板**控件呈现的 html 是什么样的？

# javascript - javascript中对象的“异步”循环

> ID：10207395
> 
> 赞同：8
> 
> 时间：2012-04-18T10:20:33.313
> 
> 标签：javascript, asynchronous

通常，我们可以对数组和对象进行循环以遍历属性/值。但是循环正在阻塞。但是，超时可用于模拟异步循环。[我设法为数组做到了](http://jsfiddle.net/LHhy2/)。

```
//do stuff

(function asyncLoop(i){

    //do stuff in the current iteration

    if(++i < array.length){
        setTimeout(function(){asyncLoop(i);}, 1);
    } else {
        callback();
    }
}(0));

//do stuff immediately after, while looping 
```

但是这个模型只在数组中循环时才有效，其中有一个限制器 -`i`会被传递。有没有办法在一个对象上做到这一点？假设该对象有 50k 个键可以迭代，使其长得不合理。

我已经知道这一点`setImmediate`（afaik，只有较新的 IE）和[WebWorkers](http://caniuse.com/#search=web%20wor)（还没有在 IE 中），但我只想知道是否可以在对象上使用相同的策略。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T10:22:45.340

没有支持异步的属性迭代器，因为除了`for (key in obj)`循环之外，没有其他方法可以保存迭代器中的状态，并且您已经知道它不兼容异步。

因此，只需将对象的所有键收集到一个数组中，并使用您已经必须遍历键数组的相同机制。数组的优点是它们确实有一种方法可以通过跟踪数组索引来保存迭代中的状态。

可以使用`Object.keys(obj)`ES5 方法（如果需要，通过内置方法或 ES5 垫片）获取所有密钥，或者如果您不使用 ES5 垫片，您可以自己收集它们：

```
var keys = [];
for (var i in obj) {
    if (obj.hasOwnProperty(i)) {
        keys.push(i);
    }
} 
```

# jquery - 如何完全消除moodular（jquery幻灯片）上的小轻松效果？

> ID：10207404
> 
> 赞同：0
> 
> 时间：2012-04-18T10:20:54.060
> 
> 标签：jquery, slideshow, easing

我想一切都在标题中。即使没有指定缓动方法，滑动元素也会在完成滑动之前减速。我想删除它。你知道我怎么能做到吗？

情绪化网址：[http ://www.gougouzian.fr/projects/jquery/moodular/index.php](http://www.gougouzian.fr/projects/jquery/moodular/index.php)

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:29:59.563

这是您链接中的文档：

```
var moodular = jQuery("#myCarousel").moodular({
        controls        : 'keys',
        effects         : 'fade',
        speed           : 500,
        dispTimeout     : 1000,
        auto            : false,
        api             : true
}); 
```

自定义您的缓动 (http://jqueryui.com/demos/effect/easing.html)

```
var moodular = jQuery("#myCarousel").moodular({
        easing          : 'linear',
        effects         : 'fade',
        speed           : 500

}); 
```

# javascript - 使用 javascript 打印预览

> ID：10207409
> 
> 赞同：2
> 
> 时间：2012-04-18T10:21:03.050
> 
> 标签：javascript, asp.net, css

在这里，我有**用于打印和打印预览的工作代码，但它在****Mozilla 中**不起作用。请让我知道我是如何让它在 mozilla 中工作的。我希望打印**预览与 irctc 网站一样**。

```
<html>
<head>
<title>Print Preview</title>
<style type="text/css">
 @media print {
.noPrint {
    display:none;
  }
}
</style>
<script>
function printpr()
{
var OLECMDID = 7;
/* OLECMDID values:
* 6 – print
* 7 – print preview
* 1 – open window
* 4 – Save As
*/

var PROMPT = 1; // 2 DONTPROMPTUSER
var WebBrowser = '<OBJECT ID="WebBrowser1" WIDTH=0 HEIGHT=0 CLASSID="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2"></OBJECT>';
document.body.insertAdjacentHTML('beforeEnd', WebBrowser);

WebBrowser1.ExecWB(OLECMDID, PROMPT);
WebBrowser1.outerHTML = "";
}
</script>
</head>
<body>
<form runat="server">
<asp:radiobutton ID="Radiobutton1" class="noPrint" runat="server"></asp:radiobutton>
<asp:textbox ID="Textbox1" runat="server"></asp:textbox>
<asp:checkboxlist ID="Checkboxlist1" class="noPrint" runat="server">
    <asp:ListItem>gsdghsg</asp:ListItem>
    <asp:ListItem>ggsgh</asp:ListItem>
    <asp:ListItem Value="gdfgg">gfghghgf</asp:ListItem>
    <asp:ListItem></asp:ListItem>
    </asp:checkboxlist>
<div class="noPrint"><asp:textbox ID="Textbox2" runat="server"></asp:textbox></asp:checkboxlist></div>
<input type='button'class="noPrint" value="Print Preview" onclick="printpr();">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:27:56.807

在 mozilla 中，因为最近有一些 id 的项目不会自动暴露在全局命名空间（窗口对象）中。

您需要定义一个变量：

```
var PROMPT = 1; // 2 DONTPROMPTUSER
var WebBrowser = '<OBJECT ID="WebBrowser1" WIDTH=0 HEIGHT=0 CLASSID="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2"></OBJECT>';
document.body.insertAdjacentHTML('beforeEnd', WebBrowser);

var WebBrowser1 = document.getElementById('WebBrowser1');

WebBrowser1.ExecWB(OLECMDID, PROMPT);
WebBrowser1.outerHTML = ""; 
```

# amazon-ec2 - 所有地区的单一密钥对

> ID：10207416
> 
> 赞同：30
> 
> 时间：2012-04-18T10:21:29.593
> 
> 标签：amazon-ec2, amazon-web-services

我可以在所有地区使用相同的密钥对文件吗？我想让 ssh 访问尽可能简单。

我为每个区域设置了一个文件。我试图在不同的区域上传相同的文件，但它没有按预期工作。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-18T10:51:37.683

同时，这已通过导入您自己的密钥对启用，请参阅介绍性帖子[新 Amazon EC2 功能：自带密钥对](http://aws.typepad.com/aws/2010/09/new-amazon-ec2-feature-bring-your-own-keypair.html)：

> 您现在可以**导入自己的 RSA 密钥对**（准确地说是公共密钥对）以用于您的[Amazon EC2](http://aws.amazon.com/ec2/)实例。
> 
> 你为什么想做这个？这里有几个原因：
> 
> 1.  信任 - 通过导入您自己的密钥对，您可以确保您完全控制您的密钥。
> 2.  安全性——您可以确信您的私钥从未通过网络传输过。
> 3.  **多个区域的管理 - 您可以跨多个 AWS 区域使用相同的公钥。** *[强调我的]*

这种方法确实非常有益/方便 - 我已经使用了一段时间，它大大简化了跨多个区域和帐户的 EC2 使用。

[Eric Hammond 在他的文章Uploading Personal ssh Keys to Amazon EC2](http://alestic.com/2010/10/ec2-ssh-keys)中提供了更多详细信息和简短教程：

> 亚马逊最近推出了将您自己的 ssh 公钥上传到 EC2 的功能，以便在启动时将其传递给新实例。在此之前，您必须始终使用由 Amazon 生成的 ssh 密钥对。

因此，我建议阅读他的文章，了解实现此目标所需的（少数且简单的）步骤。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-03T22:53:34.553

如果您可以导入自己的 RSA 公钥，那么您可以跨区域共享 Amazon 生成的密钥：

1.  使用您要共享的密钥，登录到生成它的区域中的实例。
2.  打开 ~/.ssh/authorized_keys
3.  找到您要共享的密钥所在的行（行尾应显示您在生成密钥时指定的密钥对名称）
4.  将所有行复制到密钥对名称的第一个字符。应该是 382 个字符。
5.  将复制的数据保存到本地文件（例如，保存到您启动 SSH 会话*FROM*的机器）。
6.  登录 EC2 控制台并切换到您要与之共享密钥的区域。
7.  选择“密钥对”管理
8.  单击“导入密钥对”并将其指向在步骤 5 中创建的文件。您可能希望为密钥对提供与您在将其导入表单的区域中相同的名称。
9.  使用此密钥对启动实例。您应该能够使用与生成它的区域相同的私钥登录到新区域中的实例。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-19T04:52:57.410

如果您想在 AWS 控制台中创建 ssh 密钥对并将此密钥对上传到所有其他区域。

1.  在控制台中创建一个新的 ssh 密钥对或使用您已经拥有的密钥对。

2.  从 ssh 私钥生成 ssh 公钥（pem > pub）

    `$ ssh-keygen -y -f ~/.ssh/MySSHKeyPair.pem >> ~/.ssh/MySSHKeyPair.pub`

3.  将 ssh 公钥上传到所有区域。（从列表中删除已经拥有 ssh 密钥的区域）

    `$ for region in us-east-1 us-east-2 us-west-1 us-west-2 ap-south-1 ap-northeast-2 ap-southeast-1 ap-southeast-2 ap-northeast-1 eu-central-1 eu-west-1 eu-west-2 ; do aws ec2 import-key-pair --key-name MySSHKeyPair --public-key-material file://~/.ssh/MySSHKeyPair.pub --region $region ; done`

4.  获取所有区域中所有 ssh 密钥对的列表。

    `$ for region in us-east-1 us-east-2 us-west-1 us-west-2 ap-south-1 ap-northeast-2 ap-southeast-1 ap-southeast-2 ap-northeast-1 eu-central-1 eu-west-1 eu-west-2 ; do aws ec2 describe-key-pairs --region $region ; done`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-31T12:37:16.503

AWS 生成的密钥可以转移到另一个区域：

*   登录到使用您要传输的密钥创建的实例。
*   如果不存在，请安装 ec2-api-tools (sudo apt-get install ec2-api-tools)

使用此命令

```
ec2-import-keypair keypair-name --public-key-file ~/.ssh/authorized_keys --region aws-region 
```

通过上述步骤，我将 AWS 创建的密钥从新加坡地区转移到俄勒冈地区，同样的密钥对我来说非常好用。

请同时访问此链接：

[https://forums.aws.amazon.com/thread.jspa?threadID=52654](https://forums.aws.amazon.com/thread.jspa?threadID=52654)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-07T21:26:08.210

您还可以使用 将`aws cli`密钥对传输到另一个区域。

```
aws ec2 import-key-pair --key-name my-key --public-key-material file://~/.ssh/id_rsa.pub --region my-region 
```

有关更多信息，请参阅GitHub 上的[此问题](https://github.com/aws/aws-cli/issues/41)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-26T11:19:55.367

1.  在控制台中创建一个新的 ssh 密钥对或使用您已经拥有的密钥对。
2.  从 ssh 私钥生成 ssh 公钥 (pem > pub) $ ssh-keygen -y -f ~/.ssh/rainman_key.pem >> ~/.ssh/rainman_public.pub
3.  将 ssh 公钥上传到除了它存在的区域之外的所有区域。然后使用 python 导出它。下面是代码：

```
import os

regions=["us-east-1","us-east-2","us-west-1","us-west-2","ap-east-1","ap-south-1","ap-northeast-2","ap-southeast-1","ap-southeast-2","ap-northeast-1","ca-central-1" ,"eu-central-1","eu-west-1","eu-west-2","eu-west-3","eu-north-1","sa-east-1"]

for region in regions:
    os.system("aws ec2 import-key-pair --key-name rainman_key --public-key-material file://rainman_public.pub --region "+region)** 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-14T23:16:41.963

您也可以通过扩展来执行区域列表以动态获取区域列表...

```
for region in $(aws ec2 describe-regions --all-regions --query "Regions[].{Name:RegionName}" --output text | tr '\n' ' '); do
aws ec2 import-key-pair --key-name MYKEYNAME --public-key-material file://~/.ssh/MY_PUB_KEY.pub --region $region; done 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-28T13:36:13.857

将我需要复制的pem文件上传到其他区域然后...

```
# chmod 400 /home/ec2-user/mydec15a.pem

# ssh-keygen -y -f /home/ec2-user/mydec15a.pem >> ~/.ssh/MySSHKeyPair.pub

#  aws ec2 import-key-pair --key-name mydec15a --public-key-material file://~/.ssh/MySSHKeyPair.pub --region us-west-2 
```

# php - 提交表单时不会再次添加选项 +zendFramework

> ID：10207418
> 
> 赞同：-2
> 
> 时间：2012-04-18T10:21:34.297
> 
> 标签：php, zend-framework, jquery, combobox, zend-form

我必须依赖组合框

```
 $this->addElement('Select', 'Category',array(
         'label'      => 'Category:',
         'AutoComplete'=> true,              
         'multiOptions' => array('0' => '-Category-',$a->GetCategories(),'2' => '-Add             category-'),
         'required' => true ));

  $this->addElement('Select', 'SubCategory',array(
          'label'      => 'Sub Category:',
          'AutoComplete'=> true, 
          //'multiOptions' => array('0' => '-Select Category-'),
          'required' => true )); 
```

第二个使用ajax填充

```
<script type="text/javascript">
  //for send data i'll use jquery library
  $(document).ready( function(){
    $('#Category').change(function() {
      var message=$('#Category option:selected').text();
      if (message != '') {
        $.ajax({
          type: "GET",
          dataType : 'json',
          url: 'http://localhost/EverTags1/Authentification1/public/Product/add', 
          async: false,
          data:{"message" : message}, 
          success: function (respond) {
            var json=JSON.stringify(respond);
            var  objet = eval('(' + json + ')');
            e=objet.length;
            var str = "";
            for ( var count = 0 ; count < e; count++ ) { 
              str += "<option value='" + count + "'>" + objet[count].name+ "</option>"
            } 
            $("#SubCategory").empty().append(""+str);
          }
        }); 
      }
    });
  });
</script> 
```

元素已正确加载到第二个组合框中。但是当我提交第二个组合框的内容时消失了。我怎样才能让它们显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:37:37.747

您需要在每个 ajax 请求后更新多选项。我用会话来做到这一点

```
public function getsubcategoriesAction()
{
   if($this->_request->isXmlHttpRequest())
    {
        $session = new Zend_Session_Namespace('mySession');
        $this->getRequest()->param('id',1)
        $model = new Application_Model_DbTable_Subcategory();
        $result = $model->getSubcategories($category);
        // save the result to session
        $session->result = $result;
        $this->_helper->json($result);

    }
} 
```

并在呈现表单的操作中

```
 public function createAction()
 { 
    //some code here

    if($this->getRequest()->isPost()){
        $session = new Zend_Session_Namespace('mySession');
        $subCategory = $form->getelement('subCategory');
        $subCategory->addMultiOptions($session->result); // get the result back from session

      //some code here
   }
} 
```

您还需要在 application.ini 中启用会话

```
 resources.session.save_path = APPLICATION_PATH "/../data/session"
 resources.session.use_only_cookies = true
 resources.session.remember_me_seconds = 864000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:41:21.027

将 `selected='selected'`属性添加到#SubCategory 的第一个选项是否修复它？

# c++ - 分析 pcap 文件的代码

> ID：10207423
> 
> 赞同：3
> 
> 时间：2012-04-18T10:21:43.687
> 
> 标签：c++, shell, wireshark, pcap

我正在尝试分析包含使用 tcpdump 捕获的数据包的文件。我首先想使用 5 元组将数据包分类为流。然后我需要获取每个流中每个数据包的大小和到达间隔时间。我在wireshark中尝试了对话列表，但它只给出了流中数据包的数量，而不是关于流中每个数据包的信息。对任何可以完成这项工作的代码（c++ 或 shell 脚本）的建议？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:31:53.520

乌姆尼奥贝，

如果您还没有听说过 Scapy，我相信您正在尝试做的事情将是一个近乎完美的选择。例如，我编写了这个小片段来解析 pcap 字段，并给我一些类似你所说的使用 Scapy 的内容。

```
#!/usr/bin/python -tt

from scapy import *
import sys
from datetime import datetime

'''Parse PCAP files into easy to read NETFLOW like output\n
   Usage:\n
   python cap2netflow.py <[ pcap filename or -l ]>\n
   -l is live capture switch\n
   ICMP packets print as source ip, type --> dest ip, code'''

def parse_netflow(pkt):  
    # grabs 'netflow-esqe' fields from packets in a PCAP file
    try:
        type = pkt.getlayer(IP).proto
    except:
        pass

    snifftime = datetime.fromtimestamp(pkt.time).strftime('%Y-%m-%d %H:%M:%S').split(' ')[1]

    if type == 6:
        type = 'TCP'
    if type == 17:
        type = 'UDP'
    if type == 1:
        type = 'ICMP'

    if type == 'TCP' or type == 'UDP':
        print( ' '.join([snifftime, type.rjust(4, ' '), str(pkt.getlayer(IP).src).rjust(15, ' ') , str(pkt.getlayer(type).sport).rjust(5, ' ') , '-->' , str(pkt.getlayer(IP).dst).rjust(15, ' ') , str(pkt.getlayer(type).dport).rjust(5, ' ')]))

    elif type == 'ICMP':
        print(' '.join([snifftime, 'ICMP'.rjust(4, ' '),  str(pkt.getlayer(IP).src).rjust(15, ' ') , ('t: '+ str(pkt.getlayer(ICMP).type)).rjust(5, ' '), '-->' , str(pkt.getlayer(IP).dst).rjust(15, ' '), ('c: ' + str(pkt.getlayer(ICMP).code)).rjust(5, ' ')]))

    else:
        pass
if '-l' in sys.argv:
    sniff(prn=parse_netflow)
else:
    pkts = rdpcap(sys.argv[1])
    print(' '.join(['Date: ',datetime.fromtimestamp(pkts[0].time).strftime('%Y-%m-%d %H:%M:%S').split(' ')[0]]))
    for pkt in pkts:
        parse_netflow(pkt) 
```

安装 Python 和 Scapy，然后使用它来帮助您入门。如果您需要任何帮助来弄清楚这一切，请告诉我，如果您知道 C++，那么这对您来说已经很有意义了。

在这里获取 Scapy

[http://www.secdev.org/projects/scapy/](http://www.secdev.org/projects/scapy/)

此页面上有大量有用教程的链接，请记住，Scapy 做得更多，但在讨论 pcap 解析的领域也有所改进。

我希望这有帮助！

直流

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:26:10.623

我在一个库上工作来分析 tcp 转储，但它是为企业服务的，所以我不能只给你。如果你没有找到你要找的东西，那么我的回答会有所帮助。tcpdump 只是嵌套的网络数据，如[俄罗斯套娃](http://en.wikipedia.org/wiki/Matryoshka_doll)，其中 pcap 层由 tcpdump 添加。

如果您只想处理捕获，则转储的格式在[Libpcap File Format](http://wiki.wireshark.org/Development/LibpcapFileFormat)中指定。要获取每个数据包的大小和到达时间，您需要使用此规范处理转储。

如果您必须深入分析，这些是按顺序排列的以下层

1.  链路层
2.  互联网层
3.  传输层
4.  应用层

每一层都有一个标题定义。因此，您需要找到您的 pcap 数据包含的协议栈并解析标头以获取信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:55:50.460

5元组的成员是什么？如果流是 TCP 或 UDP，则源和目标 IP 地址和端口号，再加上一个用于区分两个端点之间随时间推移的多个流的数字可能会起作用；对于 SCTP，情况类似，但如果流是流，您可能需要更多。

如果 5 元组的成员都是 Wireshark 中的“命名字段”，您可以使用带有`-T fields`选项的 TShark，并使用`-e`选项指定要打印的字段，并选择一个带有时间戳的字段（`frame.time_epoch`会给你时间自 UN*X 纪元以来的秒数和几分之一秒），一个适当大小的字段（`frame.len`为您提供链路层数据包中的原始字节数以及任何元数据，例如 802.11 无线电信息的 radiotap 标头）*，*和其他字段，然后将 TShark 的输出提供给执行您想要执行的处理的脚本或程序。这让 TShark 可以处理协议层，因此您的程序只需要处理结果数据。

# python - Python EasyGUI：如何在多输入框中获取滚动条

> ID：10207424
> 
> 赞同：0
> 
> 时间：2012-04-18T10:21:44.497
> 
> 标签：python, scrollbar, easygui

我想要一个简单的 gui 程序来编辑 python 字典，所以[EasyGUI](http://easygui.sourceforge.net/)自然是我的首选。我的问题是我的字典很长，`{key1:v1,key2:v2,...,keyn:vn}`当我输入以下代码时：

```
multienterbox(label,title,[key1,key2,...,keyn]) 
```

窗户不够大，无法显示我所有的钥匙。

有没有办法向窗口添加滚动条或任何解决方法是可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:14:57.840

使用`choicebox`显示键及其值的 a 。然后用户可以选择他们想要更改的键，您可以使用 an`enterbox`来获取新值。

更多信息[在这里](http://easygui.sourceforge.net/tutorial/index.html#contents_item_11.3)。

# flash - MXML 主类可以实现另一个吗？

> ID：10207426
> 
> 赞同：1
> 
> 时间：2012-04-18T10:21:46.807
> 
> 标签：flash, apache-flex, mxml

我有一个加载到另一部电影中的 mxml 应用程序。这需要它实现某些功能。是否可以让 mxml 应用程序的主类来实现接口？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:45:04.113

每个 mxml 组件（以及`Application`）都有`implements`可以添加接口的属性。这是示例：

应用程序.mxml：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955" minHeight="600"
               implements="IInterface">
    <s:layout>
        <s:VerticalLayout />
    </s:layout>
    <fx:Script>
        <![CDATA[

            public function one():void
            {
                // TODO Auto Generated method stub

            }

            public function get prop():String
            {
                // TODO Auto Generated method stub
                return null;
            }

            public function set prop(value:String)
            {
                // TODO Auto Generated method stub
                return null;
            }

        ]]>
    </fx:Script>

</s:Application> 
```

IInterface.as：

```
package
{
    public interface IInterface
    {
        function one():void;

        function get prop():String;
        function set prop(value:String);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:11:56.643

请尝试这样的事情： - 希望下面的代码可以帮助你 -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               implements="pkgCom.IAlpha">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[

            public function updateName():void {
                //code
            }
            public function updateValue():void {
                //code
            }
            public function updateValue1():void {
                //code
            }

        ]]>
    </fx:Script>
</s:Application> 
```

接口名称：- IAlpha 包名称：- pkgCom

```
package pkgCom
{
    public interface IAlpha {
        function updateName():void;
        function updateValue():void;
        function updateValue1():void;
    }
} 
```

# wpf - WPF 中的两种方式绑定不适用于静态成员

> ID：10207427
> 
> 赞同：4
> 
> 时间：2012-04-18T10:21:52.340
> 
> 标签：wpf, binding, staticresource, two-way-binding

Matt Hamilton 告诉我一个关于 WPF 的有趣事实：在 4.5 版本中可以使用静态变量以双向模式绑定。不幸的是，V4.5 仍然是测试版，我决定更改我的代码以使我的应用程序最终运行正确。

但是 - 我仍然有类似的问题，我们开始吧：

我有一个非常简单的类“RecallConnectionSettings”。这个类的成员应该可以从代码中的任何地方访问，所以我决定将它们设为静态（像这样）：

```
public class RecallConnectionSettings
    {
            private static string Server {get;set;} 
    } 
```

如您所见：只有一个变量“服务器”。现在我想要的是从 TextBox 文本属性到该“服务器”值的 2WayMode 绑定。

所以我尝试了这个：

```
<UserControl....>
    <UserControl.Resources>
            <local:RecallConnectionSettings x:Key="recallConf"/>
    </UserControl.Resources>
    <TextBox Text="{Binding Source={StaticResource recallConf}, Path=Server,  
Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ... Name="txtServerAdress" />
</UserControl> 
```

当我更改文本框中的值时，这很有效 - 但不是从另一边。如果我（手动）更改“服务器”值，我的文本框中的文本属性将不会更新。

当然不是——我现在知道我必须在我的 RecallConnectionSettings 类中实现 INotifyProperty。然后它看起来像这样：

```
 public class RecallConnectionSettings : INotifyPropertyChanged
    {
    public  event PropertyChangedEventHandler PropertyChanged;
    private static string s_server; 

    public static string Server
            {
                get { return s_server; }
                set
                {
                    s_server = value;
                    OnPropertyChanged("Server");
                }
            }

public static event PropertyChangedEventHandler PropertyChanged;

protected static void OnPropertyChanged(string name)
            {
                PropertyChangedEventHandler handler = PropertyChanged;
                if (handler != null)
                {
                    PropertyChanged(this, new PropertyChangedEventArgs(name));
                }
            }
    } 
```

好吧 - 这也行不通。因为只有静态方法，所以不能使用类实例来调用事件：

```
PropertyChanged(this, new PropertyChangedEventArgs(name)); 
```

那么 - 现在该怎么办？我考虑过使用单例，所以我这样做了：

```
public class RecallConnectionSettings : INotifyPropertyChanged
    {
        private static RecallConnectionSettings instance;

        private RecallConnectionSettings(){}

        public static RecallConnectionSettings Instance
        {
            get
            {
                if(instance == null)
                {
                    instance = new RecallConnectionSettings();
                }
                return instance;
            }
        }
// ... here comes the other stuff
} 
```

为了使它工作，我还必须准备我的 UserControl，所以我这样做了：

```
...    
<UserControl.DataContext>
            <local:RecallConnectionSettings/>
</UserControl.DataContext>
... 
```

此时无需继续尝试，因为要这样做，默认构造函数必须是公共的。

不管我在做什么：它不起作用。在我看来，我仍然不明白它是如何工作的 - 你会这么好心并告诉我诀窍吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:01:13.067

保留单例解决方案并替换它：

```
...    
<UserControl>
    <UserControl.DataContext>
        <local:RecallConnectionSettings/>
    </UserControl.DataContext>
    ...
</UserControl>
... 
```

这样：

```
...    
<UserControl DataContext="{x:Static local:RecallConnectionSettings.Instance}">
   ...
</UserControl>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:50:58.910

哇-谢谢尼古拉斯，那行得通！

对于其他读者 - 这是您现在必须为文本框编写的代码：

```
<TextBox Text="{Binding Path=Server, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  Name="txtServerAdresse"/> 
```

# iphone - 更新本地通知 BadgeNumber

> ID：10207433
> 
> 赞同：1
> 
> 时间：2012-04-18T10:22:14.543
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我试图用应用程序徽章编号显示今天的日期，这个日期应该在应用程序触发本地通知时更新，但问题是本地通知不更新日期！并仅显示我的项目创建日期！这是我的代码：

```
- (void) viewDidLoad {

[self notification];

}

    - (void) notification  {

        NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
        NSDate *now = [NSDate date];    
        NSDateComponents *componentsForFireDate = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit| NSSecondCalendarUnit ) fromDate: now];

        [componentsForFireDate year];
        [componentsForFireDate month];
        [componentsForFireDate day];
        [componentsForFireDate setHour:1];
        [componentsForFireDate setMinute:2];
        [componentsForFireDate setSecond:1];

        NSDate *fireDateOfNotification = [calendar dateFromComponents: componentsForFireDate];

                UILocalNotification *notification = [[UILocalNotification alloc]init];
                notification.fireDate = fireDateOfNotification;
                notification.timeZone = [NSTimeZone localTimeZone];                    notification.repeatInterval= NSDayCalendarUnit; 

                NSString *date = [self showGregorianFullDate];

                notification.alertAction = @"View";
                notification.soundName = UILocalNotificationDefaultSoundName;

        //updating badge number :

                NSCalendar* Calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
                NSDateComponents *Components = [Calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit )fromDate:[NSDate date]];

                int a = [Components day];
                notification.applicationIconBadgeNumber = a; 

            [[UIApplication sharedApplication] scheduleLocalNotification:notification];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:38:13.417

您是否只安排这一项通知？当通知触发时，它们不会运行任何代码。如果您的应用程序已打开，您可以处理通知，如果用户对您的通知采取行动，您将再次有机会处理它。

此通知被编程为将徽章编号设置为特定日期编号。这个数字是一个固定的数字。触发通知后，它不会自动更改。

应用程序徽章旨在显示许多未处理的通知（[根据人机界面指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/TechnologyUsage/TechnologyUsage.html)），因此可能不是显示日期的最佳位置。此外，如果您查看[应用商店审查指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)，任何以人机界面指南中未描述的方式使用系统提供的项目的应用都可能被应用商店拒绝。

如果您继续沿着这条路走，那么您可能需要查看[本地通知编程指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html)。它显示每个应用程序可以安排 64 个本地通知，并且您需要每天安排一个以将徽章编号更新到第二天。这意味着如果用户 65 天未打开您的应用程序，则徽章编号将是错误的，并且您也将没有本地通知留给用户警报。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T08:57:45.080

只是从`componentsForFireDate`你的一天开始`notification.applicationIconBadgeNumber`，就像这样......

```
//updating badge number :
        int a = [componentsForFireDate day];
        notification.applicationIconBadgeNumber = a; 
```

问题是`applicationIconBadgeNumber`必须在您创建通知时预先确定。如果您从 获取日期`[NSDate date]`，它将显示您创建通知的日期，而不是通知触发的日期。

# objective-c - 如何在 MacOS 上创建 JSONP？

> ID：10207435
> 
> 赞同：1
> 
> 时间：2012-04-18T10:22:27.843
> 
> 标签：objective-c, json, cocoa, jsonp, nsjsonserialization

我使用以下代码创建一个 JSON 文件。

```
// Some data in keys and vals.
NSDictionary* dictionary = [NSDictionary dictionaryWithObjects:vals forKeys:keys];
NSError* writeError = nil;
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:dictionary 
                   options:NSJSONWritingPrettyPrinted error:&writeError];   
NSString* path = @"json.txt";
[jsonData writeToFile:path atomically:YES]; 
```

如何输出[JSONP](http://en.wikipedia.org/wiki/JSONP)文件？有我可以使用的 Cocoa 框架吗？

***更新：**与此同时，我使用了一个快速而简单的解决方案：我读入了刚刚写入光盘的 JSON 文件，并将缺少的 JSONP 函数添加到字符串中。然后，我第二次写文件。我认为这不值得作为我问题的答案。所以我会把这个问题留给更聪明的解决方案。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T22:47:57.537

您可以将 JSON 数据转换为字符串，将其包装在函数调用中，然后将其写入文件。例子：

```
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:dictionary 
                                                   options:NSJSONWritingPrettyPrinted 
                                                     error:NULL];
NSMutableString *jsonString = [[[NSMutableString alloc] initWithData:jsonData 
                                                            encoding:NSUTF8StringEncoding] autorelease];
[jsonString insertString:@"functionCall(" atIndex:0];
[jsonString appendString:@");"];
[jsonString writeToFile:path atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

（我在这里使用可变字符串以获得更好的内存效率。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:38:03.567

我不知道objective-c 或Cocoa。（我在 MacOS 上使用 python 来创建 JSNOP 响应），但这是一件简单的事情。基本思想是将 JSON 数据包装在 javascript 函数调用中：

```
functionCall({"Name": "Foo", "Id" : 1234, "Rank": 7}); 
```

棘手的部分是函数名称“functionCall”是由浏览器设置的，AFAIK 查询参数的名称不是标准化的。jQuery 使用 jsonCallback。其他的使用 json 或回调。因此，必须检查请求 url 中的回调名称，并且必须使用该函数名称来包装 json 数据。

# javascript - 比较 url 字符串和菜单字符串，然后使用 jquery 添加类

> ID：10207437
> 
> 赞同：2
> 
> 时间：2012-04-18T10:22:37.663
> 
> 标签：javascript, jquery, css

我有一个如下所示的 URL：

```
http://www.website.co.uk/en-us/aboutus/thegroup/test.aspx 
```

我在页面上有一个 UL LI 菜单：

```
<ul>
    <li><a href="/aboutus/thegroup/test.aspx">Test</a></li>
    <li>Hello</li>
    <li>Bye</li>
    <li>Something</li>
    <li>Cars</li>
</ul> 
```

我在每个页面上都有菜单，并想使用 jquery 检查该页面上的即时消息。如果我是然后将 A/li 加粗，以便用户知道他们在页面上。

我尝试了以下方法：

```
$(document).ready(function () {
  if(window.location.href.indexOf("test")) // 
     {
        alert("your url contains the name test");
     }
}); 
```

但是 id 喜欢不涉及对 URL 字符串的值进行硬编码的东西。就好像用户决定向 UL/LI 添加更多链接一样，jquery 需要自动检查链接和 url 并向 LI 添加一个类（以便我可以设置它的样式）。

希望那是足够的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:25:47.553

问题是因为找不到该值时该`indexOf()`方法返回。`-1`您需要检查该值，而不是像当前那样将结果强制为布尔值。尝试这个：

```
$(document).ready(function () {
    var loc = window.location.href;
    $("ul a").each(function() {
        if (loc.indexOf($(this).attr("href")) != -1) {
            $(this).addClass("current");
        }
    });
}); 
```

您需要使选择器更具体一些，例如`#menu a`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:26:17.040

`indexOf`如果不包含字符串，则返回 -1：

```
(document).ready(function () {
  if(window.location.href.indexOf("test") != -1) // 
     {
        alert("your url contains the name test");
     }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T10:25:15.070

这个？

```
$('ul#menu a').each(function() {
   if(window.location.href.indexOf($(this).attr('href')) !== -1) {
      $(this).closest('li').addClass('yourClass');
   }
}); 
```

`menu`我为您添加了一个 id ，`ul`以基本上将您的菜单栏与`ul`可能在同一页面中的其他 s 区分开来。如果找不到在参数中搜索的字符串，也返回`!== -1`-1 。`indexOf`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T10:26:08.017

```
$(document).ready(function () {
  var liTest = $('ul > li'); // ' was missing
  liTest.each(function() {
     if(window.location.href == $('a', this).attr('href')) // 
     {
        $(this).css('font-weight', 'bold');
        return;
     }
  });
}); 
```

# r - 在 RGTK2 的数据框中选择一行

> ID：10207439
> 
> 赞同：1
> 
> 时间：2012-04-18T10:22:39.937
> 
> 标签：r, gtk2

我想执行类似以下的操作：

*   在 RGTK2 窗口中显示数据框，右侧有滚动条
*   用户可以通过单击选择数据框中的特定行，我可以“获取”用户实际单击的行

我想知道这是否可以使用 RGtk2 来完成。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:51:26.633

是的当然。看看：[https](https://github.com/jverzani/gWidgets2RGtk2/blob/master/R/gtable.R) ://github.com/jverzani/gWidgets2RGtk2/blob/master/R/gtable.R 。`initialize`您可以在方法中提取大部分第一个请求，在`set_selected`and`get_selected`方法中提取第二个请求。Michael Lawrence 的构造函数使这项任务变得更容易（而且更快！），`rGtkDataFrame`将数据帧转换为 RGtk2 的视图可以更容易使用的模型。

# android - RSA 数字签名验证

> ID：10207446
> 
> 赞同：0
> 
> 时间：2012-04-18T10:23:16.200
> 
> 标签：android, rsa, chilkat

有谁知道如何在 android 中使用 CHILKAT 进行 RSA 数字签名验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:34:48.770

[http://www.example-code.com/android/rsa_generateKeyAndSign.asp](http://www.example-code.com/android/rsa_generateKeyAndSign.asp) [http://www.cknotes.com/?p=283](http://www.cknotes.com/?p=283) 这个链接是解决方案......

# c# - 从字符串中删除空格

> ID：10207447
> 
> 赞同：4
> 
> 时间：2012-04-18T10:23:21.113
> 
> 标签：c#

我有很多看起来像这样的字符串：

```
current            affairs 
```

我想让字符串成为：

```
current affairs 
```

我尝试使用`Trim()`，但它不会完成这项工作

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T10:25:51.237

正则表达式可以完成这项工作

```
string_text = Regex.Replace(string_text, @"\s+", " "); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T10:25:38.660

您可以为此使用正则表达式，请参阅[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)：

```
var normalizedString = Regex.Replace(myString, " +", " "); 
```

如果您想要所有类型的空格，请使用`@"\s+"`而不是`" +"`只处理空格。

```
var normalizedString = Regex.Replace(myString, @"\s+", " "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:27:12.710

使用正则表达式。

```
yourString= Regex.Replace(yourString, @"\s+", " "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:27:28.780

您可以使用正则表达式：

```
public string RemoveMultipleSpaces(string s) 
{
    return Regex.Replace(value, @"\s+", " ");
} 
```

后：

```
string s = "current            affairs  ";
s = RemoveMultipleSpaces(s); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T11:37:15.773

在这里使用正则表达式是一种方式，

```
System.Text.RegularExpressions.Regex.Replace(input, @”\s+”, ” “); 
```

这将删除所有空白字符，包括制表符、换行符等。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-18T10:29:39.083

首先，您需要拆分整个字符串，然后将修剪应用于每个项目。

```
 string [] words = text.Split(' ');
  text="";
  forearch(string s in words){
    text+=s.Trim();
  }
  //text should be ok at this time 
```

# mongodb - $elemMatch 的 MongoDB 索引

> ID：10207448
> 
> 赞同：18
> 
> 时间：2012-04-18T10:23:30.170
> 
> 标签：mongodb, indexing

[http://www.mongodb.org/display/DOCS/Indexes](http://www.mongodb.org/display/DOCS/Indexes)上的索引帮助页面没有提到 $elemMatch ，因为它说要在我的 2M+ 对象集合上添加索引，所以我想我会问这个：

我正在做如下查询：

```
{ lc: "eng", group: "xyz", indices: { $elemMatch: { text: "as", pos: { $gt: 1 } } } } 
```

如果我添加索引

```
{lc:1, group:1, indices.text:1, indices.pos:1} 
```

这个带有 $elemMatch 组件的查询是否能够完全通过索引运行？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-18T16:58:56.463

根据您的查询，我想您的文档看起来像这样：

```
{
    "_id" : 1,
    "lc" : "eng",
    "group" : "xyz",
    "indices" : [
        {
            "text" : "as",
            "pos" : 2
        }, 
        {
            "text" : "text",
            "pos" : 4
        }
    ]
} 
```

我使用这种格式的文档创建了一个测试集合，创建了索引，并运行了您使用 .explain() 选项发布的查询。

该索引正在按预期使用：

```
> db.test.ensureIndex({"lc":1, "group":1, "indices.text":1, "indices.pos":1})
> db.test.find({ lc: "eng", group: "xyz", indices: { $elemMatch: { text: "as", pos: { $gt: 1 } } } }).explain()
{
    "cursor" : "BtreeCursor lc_1_group_1_indices.text_1_indices.pos_1",
    "isMultiKey" : true,
    "n" : NumberLong(1),
    "nscannedObjects" : NumberLong(1),
    "nscanned" : NumberLong(1),
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : NumberLong(0),
    "millis" : 0,
    "indexBounds" : {
        "lc" : [
            [
                "eng",
                "eng"
            ]
        ],
        "group" : [
            [
                "xyz",
                "xyz"
            ]
        ],
        "indices.text" : [
            [
                "as",
                "as"
            ]
        ],
        "indices.pos" : [
            [
                {
                    "$minElement" : 1
                },
                {
                    "$maxElement" : 1
                }
            ]
        ]
    },
    "server" : "Marcs-MacBook-Pro.local:27017"
} 
```

.explain() 功能的文档可以在这里找到：[http ://www.mongodb.org/display/DOCS/Explain](http://www.mongodb.org/display/DOCS/Explain)

.explain() 可用于显示有关查询的信息，包括使用了哪个（如果有）索引。

# file - 在文件的交替行中插入不同的前缀

> ID：10207449
> 
> 赞同：0
> 
> 时间：2012-04-18T10:23:41.253
> 
> 标签：file, unix

我在创建 2 个命令时遇到问题，这些命令在 step = 2 的每一行的开头插入一个单词（命令之间不同）。

例如：

之前：
10
10
10
10

之后：
group1 10
group2 10
group1 10
group2 10

所以我想要的是 1 个命令开始将单词“group1”插入每个奇数行，而第二个命令将单词“group2”插入每个偶数行。

随机选择数字 10 作为我的数据编号的替代品

希望你能帮我解决这个问题。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:35:00.843

您可以使用 sed 执行此操作，这里分别处理奇数行和偶数行：

```
sed '1~2 s/^/group1 /' original.txt | sed '2~2 s/^/group2 /' >modified.txt 
```

1~2 从 first 开始每隔一行匹配一次，2~2 从 second 开始每隔一行匹配一次。"s" 替换，"^" 匹配行首

# android - 如何在改变方向时处理视图？以及如何在不重新创建的情况下在新方向中显示以前的方向数据？

> ID：10207452
> 
> 赞同：-2
> 
> 时间：2012-04-18T10:23:50.037
> 
> 标签：android

嗨伙计，我为纵向模式和横向创建了不同的 UI，如何在运行时加载。？我的意思是在更改方向重新创建活动时我不想重新创建它，如何获取以前的数据并以更改的方向显示它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:25:19.397

将您的纵向 UI 放在`res/layout`文件夹中，将横向 UI 放在`res/layout-land`文件夹中。文件名必须相同。Android 系统会在运行时处理布局的自动切换。

有关这方面的更多详细信息，请阅读 android developer 中的文章。[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

# actionscript - 如何仅在动作脚本中为 fl.controls.Slider 创建具有自定义高度的皮肤？

> ID：10207454
> 
> 赞同：0
> 
> 时间：2012-04-18T10:23:55.473
> 
> 标签：actionscript, flash-cs5, skin

我在 Adob​​e Flash CS5.5 的图形编辑器中创建了一个名为 customSliderTrack 的皮肤。此滑块现在位于 FLA 文件的“库”中。

我可以使用以下代码应用此皮肤：

```
var cls:Class = getDefinitionByName("CustomSliderTrack") as Class;
var tmpTrack:Sprite = new cls();
slider.setStyle("sliderTrackSkin",tmpTrack); 
```

然而，由于 FLA 文件的二进制性质和不同版本的 Adob​​e Flash 缺乏兼容性，我需要在 Actionscript 中实现它。

我知道 cls 是一个 MovieClip 对象，但我无法使用`new MovieClip()`. 我认为这可能与图形编辑器中的虚线有关（我修改了默认的 SliderTrack_skin）。我还没有发现它们的含义以及如何用 Actionscript 代码替换它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:28:03.407

根据您的轨道资产的复杂性，您可以使用绘图 API 完成此操作：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html)

一个非常简单的例子是：

```
var track:Sprite = new Sprite();
track.graphics.lineStyle(2, 0xcccccc);
track.graphics.beginFill(0x000000, 1);
track.graphics.drawRect(0, 0, 400, 20);
track.graphics.endFill();
track.scale9Grid = new Rectangle(2, 2, 396, 16);
slider.setStyle("sliderTrackSkin",track); 
```

这将创建一个只有黑色矩形的轨道，大小为 400x20 像素。您可以在代码中设置[scale9grid](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#scale9Grid)来控制皮肤的缩放方式。在上面的示例中，矩形的边框不会缩放，但里面的黑色矩形会。试验绘图 API 中的方法可能就是您所需要的。

如果您需要更复杂的资产，我建议您加载图像，然后将其传递给 slider.setStyle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:23:17.347

`setStyle`自动设置`track.height`and `track.width`。如果`track.height`该`slider.height`属性似乎没有任何效果。要解决此问题，只需将 设置`track.height`为最佳值。

要访问`track`扩展 Slider 类并覆盖`configUI`函数：

```
public class CustomSlider extends Slider
{
    override protected function configUI():void
    {
        // Call configUI of Slider
        super.configUI();
        // The sprite that will contain the track
        var t:Sprite = new Sprite();
        // Draw the content into the sprite
        t.graphics.beginFill(0x000000, 0.1);
        t.graphics.drawRect(0, -15, width, 30);
        t.graphics.endFill();
        // Set the Sprite to be the one used by the Slider
        this.setStyle("sliderTrackSkin",t);
        // Reset the height to the value that it should be
        track.height = 30;
    }
} 
```

# php - PHP XMLWriter，如何插入换行符？

> ID：10207455
> 
> 赞同：3
> 
> 时间：2012-04-18T10:24:06.853
> 
> 标签：php, xml, xmlwriter

我正在使用 XMLWriter [http://www.php.net/manual/en/book.xmlwriter.php](http://www.php.net/manual/en/book.xmlwriter.php)让我的网络客户端创建一个 XML 文件。一开始必须有一个具有很多属性的元素，如下所示：

```
$xml->startElement('registry-request');
$xml->writeAttribute('att1', 'long text');
$xml->writeAttribute('att2', 'long text');
$xml->writeAttribute('att3', 'long text');
$xml->writeAttribute('att4', 'long text'); 
```

所以 XML 文件中的那部分看起来像这样：

```
<registry-request att1="long text" att2="long text" att3="long text" att4="long text"> 
```

实际输入看起来很糟糕。

我宁愿这样：

```
<registry-request att1="long text" att2="long text" 
att3="long text" att4="long text"> 
```

我在 XMLWriter php.net 文档中没有找到解决方案，有人知道如何做到这一点吗？只需添加典型的换行命令，例如：

```
$xml->writeAttribute('att2', 'long text\n'); 
```

没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T15:28:06.867

实际上`$xml->setIndent(1);`正是这样做的。出奇！

# ios - 如何在 UIViewController 中添加多个 UITableView？

> ID：10207456
> 
> 赞同：0
> 
> 时间：2012-04-18T10:24:08.173
> 
> 标签：ios, uitableview, scrollview

这是我的应用程序。

[http://www.flickr.com/photos/baozhiqiang/6943921630/](http://www.flickr.com/photos/baozhiqiang/6943921630/) [http://www.flickr.com/photos/baozhiqiang/6943921900/](http://www.flickr.com/photos/baozhiqiang/6943921900/)

您可以在主屏幕顶部看到三个按钮。当您单击它时，图库将更改为下一个。它们不是相同的布局样式。我通过在一个大的 ScrollView 中制作三个 ScrollView 来创建它。像这样的代码：

```
[backgroundScrollView addSubview:innerNewsScrollView];
[backgroundScrollView addSubview:innerHotScrollView];
[backgroundScrollView addSubview:innerLinkScrollView]; 
```

当单击按钮时，我更改了 ScrollView 的框架。

现在有一个问题，当我向 ScrollView 添加 100 多张图片（带有图像的 UIButton）时，它已经崩溃了。我想用 UITableView 代替 ScrollView。但是如何在一个 UIViewController 中控制多个 UITableView？

任何人都可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:30:10.073

Two possibilities:

*   All the table view delegate methods include the table in question as one of the paramters, so it would simply be a case of checking which table is requesting data/information
*   You don't *have* to point your table views to the view controller. Your view controller could store two objects whose only purpose is to repond to table view delegate methods

Unless the tables are trivial, I think the second option is the cleanest.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:32:59.447

在 UIViewController 的视图中添加所有 UITableView，将它们的`tag`属性设置为可以区分它们的属性，并设置它们的委托（通常`self`如果你的 UIViewController 实现了`UITableViewDelegate`协议）。`UITableViewDelegate`pass引用中的每个方法都`UITableView`作为参数，通过 tag 属性的值，您可以找出处理了哪个表视图。

# python - 从python上的qpid获取消息量

> ID：10207459
> 
> 赞同：2
> 
> 时间：2012-04-18T10:24:27.143
> 
> 标签：python, message-queue, amqp, qpid

如何使用**python**上的**qpid 库**接收存储在队列中的消息量？

 **我试过这样：

```
from qpid.messaging import *

broker_rcv = connect_address 
address_rcv = queue_name  + "; { node: { type: queue }, assert: never , create: never, mode: " + "browse" + " }"
connection_rcv = Connection(broker_rcv)
connection_rcv.open()
session_rcv = connection_rcv.session()
receiver = session_rcv.receiver(address_rcv)
print receiver.available() 
```

它总是给我返回 0 条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:19:27.803

我已经通过添加来解决这个问题`receiver.capacity = 250`。但是，如果我在队列中有更多消息并调用`receiver.available()`我会收到 250。但现在这不是一个大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T07:16:09.507

我一直面临同样的问题。但我的最后一个目标是停止和恢复队列中的消息。我找到了这个：

```
qpidd --default-flow-stop-threshold=90 --default-flow-resume-threshold=75 
```

或查看此链接：[https ://qpid.apache.org/releases/qpid-cpp-0.34/cpp-broker/book/producer-flow-control.html](https://qpid.apache.org/releases/qpid-cpp-0.34/cpp-broker/book/producer-flow-control.html)

这可能会对您有所帮助。**

# actionscript-3 - Flex 动态组件运行时创建

> ID：10207468
> 
> 赞同：1
> 
> 时间：2012-04-18T10:24:58.460
> 
> 标签：actionscript-3, apache-flex, dynamic, components, flex4.5

我只是想知道，如何在 Flex 运行时创建动态组件。

例如：创建一个组合框，动态更改处理程序，动态文本框，

现在，组合框和文本框的值应该放在一个 VO 类中，并且 VO 类也可以动态创建，

用户必须提供他们需要多少个字段，需要的组件是多少，根据 tat Dynamic VO 必须在运行时创建，

希望这很清楚，请给我一个例子，提前谢谢xxx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:38:23.797

创建动态类很棘手。

根据您的要求，您需要一些带有更改处理程序、文本框等的组合框。一旦您知道必须根据动态创建的 vo 显示哪些组件。

您可以创建一个包含所有必需组件的自定义组件（即组合框、文本框等）

或者

可以创建不同的自定义组件。选择是你的。

应该有一个参数/条件，它将决定在运行时应该显示哪个组件。就像添加开关盒或您自己的逻辑一样。

在创建组合框时，您可以在 actionscript 中添加 addEventListner 以处理更改，甚至可以调度自定义事件或执行您定义的操作。

以同样的方式，您可以将Eventlistner 添加到您的自定义组件（例如 - 文本框、复选框等）。

如果用户想要创建组合框唯一键应该是 1（样本/任何动态值可以从 VO 中检索），文本框唯一键应该是 2，等等，都应该有唯一键。它将在创建动态组件时为您提供帮助。

确保在创建组件时必须使用 set 和 get 方法的概念来传递参数。

使用适当的 Flex 组件生命周期仅创建所需的组件。

希望这可以帮助您大致了解..或者可以寻找更好的方法..

# javascript - 移动版 YouTube 如何播放视频？

> ID：10207469
> 
> 赞同：0
> 
> 时间：2012-04-18T10:25:04.123
> 
> 标签：javascript, html, html5-video

我正在寻找将一些视频添加到我的移动 web 应用程序。为了最好的用户体验，我想避免使用简单的静态视频标签。（因为它在 webkit 动画元素中，而视频 + webkit 动画在我的经验中并不总是很好地一起播放。）

相反，我想要一张图片（上面有一个播放图标）来“链接”到视频。[移动 YouTube](http://m.youtube.com)（如在 iOS 上看到的）已经很好地做到了这一点，当您单击图像时，视频似乎“弹出”到全屏并播放。他们怎么做到的？是链接吗？以前隐藏的视频标签？一些 webkit 动画来做“弹出”？

我使用 Chrome Inspector（+user agent switcher to iphone4）四处窥探，但视频不能在桌面浏览器上播放，而且代码整体看起来很复杂..

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:28:16.767

我相信你可以在某些浏览器（例如 WebKit）上做类似的事情[。](https://developer.mozilla.org/en/DOM/Using_full-screen_mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:33:50.813

您可以做的是点击视频缩略图，您可以使用对象/嵌入标签加载视频网址。在 IOS 中，每当视频开始播放时，它都会自动全屏播放（IOS 本身的功能）

# structuremap - SignalR 和 AspNetHost.DependencyResolver

> ID：10207477
> 
> 赞同：5
> 
> 时间：2012-04-18T10:25:21.317
> 
> 标签：structuremap, signalr

我正在编写的应用程序中使用 SignalR，但我对[https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)上的最后一个示例等示例感到困惑，特别是使用 AspNetHost.DependencyResolver

```
IConnectionManager connectionManager = AspNetHost.DependencyResolver.Resolve<IConnectionManager>();
dynamic clients = connectionManager.GetClients<MyHub>(); 
```

如果我没记错的话，这是一个依赖注入工具？问题是我将 StructureMap 用于其他一切，我宁愿没有两个依赖注入框架。

是否需要 AspNetHost.DependencyResolver？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T19:01:56.840

SignalR 有一堆需要运行的依赖项/服务，它通过 DependencyResolver 获取这些依赖项/服务。

您可以用您自己的解析器（例如 StructureMap、Ninject 等）替换该解析器，但如果您不这样做，SignalR 将使用它的默认解析器。

# ios5 - IOS Storyboard 何时使用导航控制器？

> ID：10207478
> 
> 赞同：4
> 
> 时间：2012-04-18T10:25:23.807
> 
> 标签：ios5, uinavigationcontroller, storyboard

嗨，我是新的 IOS，一直在使用故事板功能，我按照[本](http://maybelost.com/2011/10/tutorial-storyboard-in-xcode-4-2-with-navigation-controller-and-tabbar-controller-part1/)教程制作了一个工作应用程序。我对何时使用导航控制器感到有些困惑。在上面的教程中，每个选项卡都有一个导航控制器。这是必要的吗？

我正在创建一个新应用程序，无论我是否向每个选项卡添加导航控制器似乎都有效（见图）。

![故事板](../Images/2862d20ebbb2144f8d1b1a51cbbc8815.png)

我只是好奇什么是正确的过程？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:16:16.060

当您的应用程序使用`UITabBarController`每个选项卡时，将显示一个单独的视图“分支”。如果这些“分支”中的任何一个需要将其视图包含在导航功能中（或者只是显示带有标题等的导航栏），那么您可以在选项卡栏之间添加一个“UINavigationController”作为该选项卡的主视图控制器控制器和您希望为该选项卡显示的第一个视图控制器。

如果您希望选项卡仅显示不需要分层导航或导航栏的视图控制器，那么您不需要使用`UINavigationController`并且可以直接将视图控制器设置为该选项卡的控制器。

# ruby-on-rails - rspec rails 3.2.3, and ruby 1.9.3 getting cannot load such file 错误

> ID：10207479
> 
> 赞同：2
> 
> 时间：2012-04-18T10:25:30.310
> 
> 标签：ruby-on-rails, ruby, rspec2

当我运行时：

`bundle exec rspec spec/requests/static_pages_spec.rb`：

我得到：

```
c:\Sites\sample_app>bundle exec rspec spec/requests/static_pages_spec.rb
C:/Rails/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.9.0/lib/rspec/core/conf
iguration.rb:746:in `load': cannot load such file -- c:/Sites/spec/requests/stat
ic_pages_spec.rb (LoadError)
    from C:/Rails/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
    from C:/Rails/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `map'
    from C:/Rails/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load_spec_files'
    from C:/Rails/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.9.0/lib/rspec/core/command_line.rb:22:in `run'
    from C:/Rails/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:69:in `run'
    from C:/Rails/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

我遇到了与这篇文章中包含的错误类似的错误，但是提出的解决方案对我不起作用。

[带有保护、rails 3.1.1 和 ruby​​ 1.9.3 的规范无法加载此类文件错误](https://stackoverflow.com/questions/8024031/spec-with-guard-rails-3-1-1-and-ruby-1-9-3-getting-cannot-load-such-file-error)

我已经跑了`bundle install`，`rails generate rspec:install`但错误仍然存​​在。所有文件都在正确的位置，自昨晚以来没有任何变化，所以我不确定发生了什么。

任何有关情况的线索将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:32:46.963

rspec 似乎不在乎您是否站在 c:\sites\sample_app 中，因为它会尝试加载

```
c:/Sites/spec/requests/static_pages_spec.rb 
```

尝试使用绝对路径运行 rspec：

```
 bundle exec rspec c:/Sites/sample_app/spec/requests/static_pages_spec.rb 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:21:22.000

确保您正在`bundle exec rspec spec/....`从应用程序根目录执行命令。如果从子目录运行命令，则会收到此错误。

# javascript - wikimedia api 从 json 字符串中获取相关数据

> ID：10207480
> 
> 赞同：0
> 
> 时间：2012-04-18T10:25:30.673
> 
> 标签：javascript, jquery, json, mediawiki-templates

这是我昨天问的[问题。](https://stackoverflow.com/questions/10196222/parse-json-string-from-wikimedia-using-jquery)我能够获得所需的数据。最终的数据是这样的。请点击此[链接](http://pastebin.com/hGEvmAV4)。

我尝试使用以下代码获取所有信息框数据

```
 content = content.split("}}\n");
                                for(k in content)
                                {
                                    if(content[k].search("Infobox")==2)
                                    {
                                        var infobox  = content[k];
                                        alert(infobox); 
                                        infobox = infobox.replace("{{","");
                                        alert(infobox);
                                        infobox = infobox.split("\n|");
                                        //alert(infobox[0]);
                                        var infohtml="";
                                        for(l in infobox)
                                        {
                                            if(infobox[l].search("=")>0)
                                            {
                                                var line = infobox[l].split("=");

                                                infohtml = infohtml+"<tr><td>"+line[0]+"</td><td>"+line[1]+"</td></tr>";

                                            }
                                        }
                                        infohtml="<table>"+infohtml+"</table>";
                                        $('#con').html(infohtml);
                                        break;
                                    }
                                } 
```

我最初认为每个元素都包含在 {{ }} 中。所以我写了这段代码。但我看到的是，我无法用这个获得整个信息框数据。有这个元素

```
{{Sfn|National Informatics Centre|2005}} 
```

发生这会结束我的信息框数据。

不使用 json 似乎要简单得多。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:56:21.473

你试过[DBpedia](http://en.wikipedia.org/wiki/DBpedia)吗？Afaik 他们提供模板使用信息。还有一个名为[Templatetiger](http://toolserver.org/~kolossos/templatetiger/)的工具服务器工具，它从静态转储（非实时）中提取模板。

但是，我曾经写了一个小片段来从 javascript 中的 wikitext 中提取模板：

```
var title; // of the template
var wikitext; // of the page
var templateRegexp = new RegExp("{{\\s*"+(title.indexOf(":")>-1?"(?:Vorlage:|Template:)?"+title:title)+"([^[\\]{}]*(?:{{[^{}]*}}|\\[?\\[[^[\\]]*\\]?\\])?[^[\\]{}]*)+}}", "g");
var paramRegexp = /\s*\|[^{}|]*?((?:{{[^{}]*}}|\[?\[[^[\]]*\]?\])?[^[\]{}|]*)*/g;
wikitext.replace(templateRegexp, function(template){
    // logabout(template, "input ");
    var parameters = template.match(paramRegexp);
    if (!parameters) {
        console.log(page.title + " ohne Parameter:\n" + template);
        parameters  = [];
        }
    var unnamed = 1;
    var p = parameters.reduce(function(map, line) {
        line = line.replace(/^\s*\|/,"");
        var i = line.indexOf("=");
        map[line.substr(0,i).trim() || unnamed++] = line.substr(i+1).trim();
        return map;
    }, {});
    // you have an object "p" in here containing the template parameters
}); 
```

它具有一级嵌套模板，但仍然很容易出错。用正则表达式解析 wikitext 就像试图在 html 上做一样邪恶 :-)

[从 api 查询解析树](http://www.mediawiki.org/wiki/API%3aProperties#Revisions%3a_Parameters)可能更容易：[api.php?action=query&prop=revisions&rvprop=content& **rvgeneratexml=1** &titles=...](http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&rvgeneratexml=1&format=jsonfm&titles=Main%20Page)。从该分析树中，您将能够轻松地提取模板。

# java - 为什么我不能在 eclipse.ini 中将 -Xmx 设置为 1024m？

> ID：10207481
> 
> 赞同：2
> 
> 时间：2012-04-18T10:25:32.230
> 
> 标签：java, eclipse, memory, jvm

当我尝试设置 -Xmx1024m 时，我收到消息：

```
cannot create VM 
```

但在我的电脑上接近 1500m 是免费的。怎么可能？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:20:55.293

我相信关于内存空间过于碎片化而无法分配足够大的内存块的评论是正确的。

请参阅 Eclipse 错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=188968](https://bugs.eclipse.org/bugs/show_bug.cgi?id=188968)。

碎片通常归咎于 Windows dll 被加载到地址空间的中间。特别是，启动画面需要加载 user32.dll，这反过来又可以根据您机器上安装的内容拉入 3rd 方库。

获得更多内存的一种方法是将 JVM 分叉到第二个进程中，而不是在 eclipse 进程中运行（这是默认设置）。此[wiki 页面](http://wiki.eclipse.org/Equinox_Launcher)详细介绍了 eclipse.ini 文件的 -vm 设置。您可以通过将 -vm 设置为指向 javaw.exe 来强制将 vm 在第二个进程中分叉。

这应该会有所帮助，因为在第二个进程中分叉 jvm 会在加载图形 dll 以显示启动屏幕之前启动 vm。

# shell - pexpect - 通过 ssh 运行 script.sh

> ID：10207486
> 
> 赞同：4
> 
> 时间：2012-04-18T10:25:50.207
> 
> 标签：shell, ssh, pexpect, splunk

我在通过 ssh 以编程方式运行本地脚本时遇到问题。
我不确定这是否是本地主机上的 shell 变量替换的问题。

手动运行时，

```
ssh monit@server1 'bash -s' < /u02/splunk/splunk/etc/apps/Splunk_TA_nix/bin/cpu.sh 
```

我得到了预期的输出，

> CPU pctUser pctNice pctSystem pctIowait pctIdle
> 全部 11.21 0.00 1.50 0.31 86.98
> 0 0.00 0.00 0.00 0.00 100.00
> 1 3.00 0.00 1.00 0.00 96.00 ....

但我明白了

> bash：/u02/splunk/splunk/etc/apps/Splunk_TA_nix/bin/cpu.sh：没有这样的文件或目录

运行以下代码时，

```
splunk_bin_dir = '/u02/splunk/splunk/etc/apps/Splunk_TA_nix/bin'
hostname = 'server1'
username = 'monit'
password = 'monit#_'

command = "/usr/bin/ssh %(username)s@%(hostname)s 'bash -s' < %(splunk_bin_dir)s/cpu.sh" % locals()
print command

ssh_new_conn = 'Are you sure you want to continue connecting'

p = pexpect.spawn(command, timeout=360)
# Handles the 3 possible connection outcomes:
# a) Ssh to the remote host for the first time, triggering 'Are you sure you want to continue connecting'
# b) ask you for password
# c) No password is needed at all, because you already have the key.
i = p.expect([ssh_new_conn,'[pP]assword:',pexpect.EOF])
print ' Initial pexpect command output: ', i
if i == 0:
    # send 'yes'
    p.sendline('yes')
    i = p.expect(['[pP]assword:',pexpect.EOF])
    print 'sent yes. pexpect command output', i
    if i == 0:
        # send the password
        p.sendline(password)
        p.expect(pexpect.EOF)
elif i == 1:
    # send the password
    p.sendline(password)
    p.expect(pexpect.EOF)
elif i == 2:
    print "pexpect faced key or connection timeout"
    pass

print p.before 
```

这些是打印输出，

> /usr/bin/ssh monit@server1 'bash -s' < /u02/splunk/splunk/etc/apps/Splunk_TA_nix/bin/cpu.sh
> 初始 pexpect 命令输出：1
> bash: /u02/splunk/splunk/etc/ apps/Splunk_TA_nix/bin/cpu.sh：没有这样的文件或目录

pexpect 撞到了 [pP] 密码行，所以我猜密码被正确传递了，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:02:09.737

这是 pexpect 手册中的注释：

> 请记住，Pexpect 不会解释 shell 元字符，例如重定向、管道或通配符（>、| 或 *）。这是一个常见的错误。如果你想运行一个命令并通过另一个命令传递它，那么你还必须启动一个 shell。

这是工作线

```
command = """/bin/bash -c "/usr/bin/ssh  %(username)s@%(hostname)s 'bash -s' < %(splunk_bin_dir)s/cpu.sh" """ % locals() 
```

# javascript - 谷歌在 IE 中映射不需要的白线

> ID：10207489
> 
> 赞同：5
> 
> 时间：2012-04-18T10:25:54.803
> 
> 标签：javascript, internet-explorer, google-maps, google-maps-api-3

我在使用 Google 地图 API v3 时遇到问题，我创建了一个带有自定义样式器的地图，并且在 IE9（Windows 7）上出现了白色水平线，这些线不会出现在任何其他浏览器/操作系统组合中。

只是想知道是否有其他人以前遇到过这个问题，并且可以给我任何提示。

谢谢。

截图：[http ://tinypic.com/view.php?pic=kbeyqq&s=5](http://tinypic.com/view.php?pic=kbeyqq&s=5)

![在此处输入图像描述](../Images/9fcb466ce2b32baacc3349993dcc5178.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T20:34:27.733

据谷歌称：“这是一个与用户可选择缩放级别相关的浏览器错误。”

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4120#makechanges](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4120#makechanges)

他们没有提供有关原因的进一步信息。听起来如果您可以处理设置的缩放级别，您就不会遇到问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T20:48:52.727

我知道这是一个老话题，但今天下午我遇到了类似的问题。我设法通过按`CTRL`+删除了这些行`0`。希望有帮助。

# c++ - googlemock - 模拟返回复杂数据类型的方法

> ID：10207490
> 
> 赞同：7
> 
> 时间：2012-04-18T10:25:58.687
> 
> 标签：c++, googletest, googlemock

我想模拟一个返回复杂数据类型的方法

```
class aClass
{
public:
   virtual const QMap<QString, QString> aMethod() const;
}

class MockaClass : public aClass
{
public:
   MOCK_CONST_METHOD0(aMethod, const QMap<QString, QString>());
} 
```

此代码无法编译：“宏“MOCK_CONST_METHOD0”传递了 3 个参数，但只需要 2 个”

我认为 googlemock 宏不理解 QMap 并将逗号解释为参数分隔符。

有没有办法告诉 googlemock QMap 是返回值？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T10:37:24.973

只需使用`typedef`这样的：

```
class aClass
{
public:
   typedef const QMap<QString, QString> MyType;
   virtual MyType aMethod() const;
}

class MockaClass : public aClass
{
public:
   MOCK_CONST_METHOD0(aMethod, MyType());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T10:28:53.990

你是对的，逗号被解释为参数分隔符。您可以定义一个预处理器宏来保护逗号不被这种方式解释。

```
#define COMMA ,
MOCK_CONSTANT_METHOD0(aMethod, const QMap<QString COMMA QString>()); 
```

请注意，这不一定适用于嵌套宏调用。例如，如果`MOCK_CONSTANT_METHOD0`将第二个参数传递给另一个宏，您将再次遇到麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-22T07:07:06.190

只`()`用于复杂的参数，

```
class MockaClass : public aClass
{
public:
   MOCK_METHOD((const QMap<QString, QString>), aMethod, (), (const));
} 
```

# c# - 在哪种情况下我可以处理网格视图中的超链接？

> ID：10207498
> 
> 赞同：0
> 
> 时间：2012-04-18T10:26:13.453
> 
> 标签：c#, asp.net, gridview, hyperlink, templatefield

我有一个`gridview`包含作为模板字段的超链接，现在我想使用行命令来处理对此超链接的单击，但是，没有超链接的命令名称或命令参数。如何做到这一点？

* * *

```
<asp:TemplateField>

<ItemTemplate>
<asp:HyperLink ID="HyperLink3" runat="server" Target="_blank" Font-Names="Tahoma"
 Font-Size="Small">[HyperLink3]</asp:HyperLink>
</ItemTemplate>

</asp:TemplateField> 
```

注意：我需要使用超链接，而不是链接按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:36:54.537

GridView's RowDataBound Event .

you can find the link control and add an arribute to it.

```
HyperLink lnkObj = (HyperLink)e.Row.FindControl("HyperLink3");
lnkObj.Attributes.Add("onclick", <write your code> ); 
```

# android - 蓝牙socket.connect（）上的连接被拒绝 - android

> ID：10207500
> 
> 赞同：2
> 
> 时间：2012-04-18T10:26:15.833
> 
> 标签：android, bluetooth, connection

首先，我知道这个问题之前已经出现过，但是我发现的所有建议的解决方案都没有解决我的问题......

与设备配对后

```
Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
tmp = (BluetoothSocket) m.invoke(device, 1); 
```

我尝试使用连接

```
boolean connected = false;
String cause = "";
for(int i=0; i<3; i++){
    try {
        mmSocket.connect(); 
    } catch (IOException e) {
        Log.e("btact","fail"+i+" - "+e.getMessage());
        cause = e.getMessage();
        continue;
    }
    connected = true;
}

if(!connected){
    try {
        mmSocket.close();
    } catch (IOException e2) {
        Log.e(TAG, "unable to close() " + mSocketType +
                " socket during connection failure", e2);
    }

    Log.e("----btact----", cause);
    connectionFailed();
    return;             
} 
```

这给了我失败0 - 连接被拒绝失败1 - 文件描述符处于错误状态 fail2 - 文件描述符处于错误状态 文件描述符处于错误状态

为什么会导致这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:00:43.240

@Radu，对于 API 10 及更高版本，我们可以使用 createInsecureRfcommSocketToServiceRecord 和 listenUsingInsecureRfcommWithServiceRecord，它工作正常！对于 API 9，我被迫将其用作 API 中的方法不起作用 - [http://mobisocial.stanford.edu/news/2011/03/bluetooth-reflection-and-legacy-nfc/](http://mobisocial.stanford.edu/news/2011/03/bluetooth-reflection-and-legacy-nfc/)

# iphone - 使用 nspredicate 进行快速研究

> ID：10207502
> 
> 赞同：0
> 
> 时间：2012-04-18T10:26:25.793
> 
> 标签：iphone, objective-c, ios, nspredicate

在我的应用程序中，我有一个包含大约 20.000 个项目的大表。我在tableview上显示它。但是在进行动态搜索时搜索栏太慢了。我读过 NSPredicate 方法的性能比 NSRange 高。我不知道如何应用这种方法。

我的代码是：

```
- (void)filterContentForSearchText:(NSString*)searchText
{
    [self.filteredListContent removeAllObjects]; 

    for (Book *book in listContent)
    {
        NSRange range = [book.name rangeOfString:searchText options:NSCaseInsensitiveSearch];
        // is very very slow
        if (range.location != NSNotFound) 
        {
           [self.filteredListContent addObject:book];
        }
    }
 } 
```

我必须在哪里插入 NSPredicate 到我们的“for”中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:35:34.477

```
- (void)filterContentForSearchText:(NSString*)searchText
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name contains %@", searchText ];
    self.filteredListContent  = [NSMutableArray arrayWithArray:[listContent filteredArrayUsingPredicate:predicate]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:37:01.887

如果过滤实例 NSArray，您可以使用

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"job == 'Programmer'"]
[listOfItems filterUsingPredicate:predicate]; 
```

如果您想发出获取请求，请使用

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"title == %@", aTitle];
[request setEntity:[NSEntityDescription entityForName:@"DVD" inManagedObjectContext:moc]];
[request setPredicate:predicate];

NSError *error = nil;
NSArray *results = [moc executeFetchRequest:request error:&error];
// error handling code
[request release]; 
```

编辑：

ssteinberg 的示例既简单又好，只有一个注意事项 - 您可以使用方括号内的关键字符 c 和 d 来修改运算符，以分别指定不区分大小写和变音符号。例子`[NSPredicate predicateWithFormat:@"name contains[cd] %@", searchString];`

# java - 在 Java EE Web 应用程序中使用 JPL (Java + Prolog)

> ID：10207511
> 
> 赞同：3
> 
> 时间：2012-04-18T10:27:16.080
> 
> 标签：java, database, jakarta-ee, prolog, jpl

我想通过 JPL 开发一个 Java EE Web 应用程序，该应用程序需要 Prolog 来完成某些与搜索相关的任务。Web 应用程序将部署在 JBoss 应用程序服务器中。Prolog 引擎可以是 YAP 或 SWI（afaik 目前唯一与 JPL 兼容的 Prolog 引擎）。Prolog 查询依赖于存储在（可能很大的）数据库中的信息。

如果有人尝试过这个或类似的东西，您能否就以下问题给我反馈？：

*   管理需要访问 Prolog 引擎的并发 http 会话的最佳方法是什么？是否有可能 - 可取？ - 为每个单独的会话分配其自己的 Prolog 引擎？如果这个解决方案有效，是否可以实现类似于“Prolog 引擎池”的东西来快速将 Prolog 引擎分配给新会话？. 或者最好的解决方案是拥有一个同步管理所有查询请求的 Prolog 引擎？（慢慢地）。
*   如何管理 Prolog 与数据库的交互？如果数据库中的数据经常变化，Prolog 需要这些数据来解决它的查询，那么让 Prolog 引擎中的事实与数据库中的数据保持同步的最佳策略是什么？如果数据库变大，在每个新会话中从头开始的海军选项（例如，将数据库中的所有数据作为 Prolog 事实重新加载）似乎不是一个好主意。
*   在实施期间与 java-prolog-database 交互相关的任何其他预期问题/困难？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:41:54.563

> 管理需要访问 Prolog 引擎的并发 http 会话的最佳方法是什么？

如果我查看 JPL 的源代码，它看起来像使用引擎池。查询数据类型实现了枚举模式加上一个 close() 操作。我猜只要引擎处于活动状态，它就会自动分配给查询。

所以每个http请求都可以通过新的查询对象独立访问Prolog系统。如果您不想在 http 请求期间关闭查询对象，我想您也可以将其附加到 http 会话。并在另一个请求中重用它。

> 如何管理 Prolog 与数据库的交互？

这取决于数据库中数据的使用模式和可用的访问路径。可能是您可以在请求期间快速访问非常大的数据库并在每次请求期间重新获取数据。例如，如果需要的匹配数据集很小，如果数据库有良好的索引，那么可以快速访问匹配的数据。

否则，您将需要实现一些智能缓存。我目前正在研究一种使用某种签入/签出模式的解决方案。但这不适用于有多个用户的 Web 服务器。我将此模式用于一个独立的解决方案，其中一个用户和一个签出内存中的数据垃圾。对于具有不同多个用户的 Web 服务器，垃圾可能会溢出 Web 服务器内存。

所以缓存只有在你可以限制和限制垃圾或者你有一个非常大的网络服务器内存时才有效。也许您可以为您的应用程序找到这样的不变量。否则，结论可能是你不能独立于你是否使用 Prolog 去 Java EE。

# shell - 在没有空格的 shell 脚本中使用“cut”作为分隔符

> ID：10207512
> 
> 赞同：1
> 
> 时间：2012-04-18T10:27:17.437
> 
> 标签：shell, delimiter, cut

我正在尝试编写一个脚本来读取下面的文件内容并提取每行第 6 列中的值，然后打印没有第 6 列的每一行。逗号用作分隔符。

输入：

```
123,456,789,101,145,5671,hello world,goodbye for now
223,456,789,101,145,5672,hello world,goodbye for now
323,456,789,101,145,5673,hello world,goodbye for now 
```

我所做的是

```
#!/bin/bash
for i in `cat test_input.txt`
do
    COLUMN=`echo $i | cut -f6 -d','`
    echo $i | cut -f1-5,7- -d',' >> test_$COLUMN.txt
done 
```

我得到的输出是

test_5671.txt：

```
123,456,789,101,145,hello 
```

test_5672.txt：

```
223,456,789,101,145,hello 
```

test_5673.txt：

```
323,456,789,101,145,hello 
```

“世界，现在再见”的其余部分没有写入输出文件，因为看起来“你好”和“世界”之间的空格被用作分隔符？

如何获得正确的输出

```
123,456,789,101,145,hello world,goodbye for now 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:35:56.690

It's not a problem with the *cut* command but with the *for* loop you're using. For the first loop run the variable *i* will only contain `123,456,789,101,145,5671,hello`.

If you insist to read the input file line-by-line (not very efficient), you'd better use a read-loop like this:

```
while read i
 do
  ...
 done < test_input.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:50:32.980

```
echo '123,456,789,101,145,5671,hello world,goodbye for now' | while IFS=, read -r one two three four five six seven eight rest
do
    echo "$six"
    echo "$one,$two,$three,$four,$five,$seven,$eight${rest:+,$rest}"
done 
```

印刷：

```
5671
123,456,789,101,145,hello world,goodbye for now 
```

请参阅语法`man bash` `Parameter Expansion`部分`:+`（基本上它输出一个逗号，并且`$rest`if`$rest`已定义*且*非空）。

此外，[您不应该使用`for`循环文件内容](http://mywiki.wooledge.org/BashFAQ/001)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:09:12.347

正如[ktf 提到](https://stackoverflow.com/questions/10207512/use-cut-in-shell-script-without-space-as-delimiter/10207634#10207634)的，您的问题不`cut`在于您将线路传递到`cut`. 他/她提供的解决方案应该有效。

或者，您可以使用以下行实现相同的行为`awk`：

```
awk -F, '{for(i=1;i<=NF;i++) {if(i!=6) printf "%s%s",$i,(i==NF)?"\n":"," > "test_"$6".txt"}}' test_input.txt 
```

为清楚起见，这是一个详细的版本：

```
awk -F, '  # "-F,": using comma as field separator
{ # for each line in file

  for(i=1;i<=NF;i++) {  # for each column

    sep = (i == NF) ? "\n" : ","  # column separator
    outfile = "test_"$6".txt"     # output file

    if (i != 6) {  # skip sixth column
      printf "%s%s", $i, sep > outfile
    }

  }

}' test_input.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:32:01.903

an easy method id to use **[tr](http://fr.wikipedia.org/wiki/Tr_%28Unix%29)** commende to convert the espace carracter into # and after doing the cat commande retranslate it into the espace.

# c++ - Qt：为什么 connect() 只在主窗口类中起作用？

> ID：10207519
> 
> 赞同：0
> 
> 时间：2012-04-18T10:27:49.437
> 
> 标签：c++, qt, events, signals, slots

这是一个创建按钮并分配 onclick 处理程序的简单代码：

```
auto btn = new QPushButton("CLICK ME");
connect(btn, SIGNAL(clicked()), this, SLOT(btn_Click()));

private slots:
void btn_Click() {
    alert("clicked!");
} 
```

如果在主窗口类中调用它，它应该可以正常工作。但是，当我尝试在子窗口中执行此操作时，单击该按钮不会执行任何操作。子窗口如下所示：

```
auto settingsWindow = new SettingsWindow();
settingsWindow->show(); 
```

我猜它以某种方式与现在是不同窗口的接收器对象相关联。但是我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T10:41:40.113

为了能够在您自己的类中声明信号/插槽，您应该在您的类中包含 Q_OBJECT 指令：

```
class SettingsWindow {
        Q_OBJECT

        ...
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:54:21.830

您应该在类 SettingsWindow 中添加一个 MACRO 以启用信号接收。添加“Q_OBJECT”，如下所示。

```
class MainWidget : public QWidget
{
    Q_OBJECT
    public:
    MainWidget();
.... 
```

# php - 页面加载时的弹出框

> ID：10207520
> 
> 赞同：0
> 
> 时间：2012-04-18T10:27:53.077
> 
> 标签：php, javascript, jquery, codeigniter

我在我的项目中使用了弹出框的功能。当用户访问该站点时，页面顶部会出现一个弹出框，隐藏其余内容。在该弹出表单中，用户必须提供下载密钥。如果用户有钥匙，他可以继续前进，否则他看不到其他任何东西。当用户提供密钥时，他会转到主页。现在的问题是，一旦用户在提供密钥后进入主页，并且当他再次单击标题时，页面将重新加载，并且弹出表单再次出现。如果某些用户已经给出了下载密钥，我怎样才能防止它再次出现。我正在使用带有代码点火器的php。我的代码

```
<?php if($download_key != null && !isset($_POST['popup'])){?>
    <script type="text/javascript">
        $(document).ready(function(){  
                loadPopup();    
        });  
    </script>
<?php } ?> 
```

downlaod 键是数据库列，popup 是在弹出框上提交表单时设置的隐藏输入。弹出框上出现的表格如下

```
<form name="form" method="post" onsubmit="return validateForm('<?php echo $download_key ?>')"> 
 <div style="width:530px;">
     <input style="display:none; height:25px;" id="downloadkey" name="downloadkey" type="text" />
     <input style="display:none;" type="submit" id="submit" name="submit" value="<?php echo $variable['QUESTION_BUTTON']['value']?>"/>
  </div>
</form> 
```

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:35:54.353

你应该`session_start()`在页面加载的开头有一个

编辑：改变了一点

```
session_start();

//check if key has already been seen:

if(isset($_SESSION['download_key']) && $_SESSION['download_key'] != null ...

// then if not check if the key is submitted

else if ( isset($_POST['popup']) ... // and other checks

   // set session variable
   $_SESSION['download_key'] = $key;

else

   // load the ask for key page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:37:49.227

设置一个会话变量，并检查它是否存在，因为它将在后续的页面加载中，然后跳过弹出窗口等。

```
<?php 
    session_start();
    if ($download_key != null && !isset($_POST['popup'])) {
       if ($_SESSION['key_ok']!=true) {  //you should check if it's set first with isset()
          echo '<script type="text/javascript">';
          echo '$(document).ready(function(){';
          echo 'loadPopup();';
          echo '});';
          echo '</script>';
       }
       if (key_is_correct) {$_SESSION['key_ok']=true}
    } 
?> 
```

# java - Java 用对象填充 ArrayList？

> ID：10207522
> 
> 赞同：0
> 
> 时间：2012-04-18T10:27:55.190
> 
> 标签：java, arraylist

嗨，我一直在关注一个在线示例，但该网站已关闭（典型）。我在用我创建的对象填充我的数组列表时遇到了麻烦，我不确定我是否错过了示例中的某些内容。

问题是我的日志每次都会产生 0 大小？

```
m_excersizes = new ArrayList<Excersize>();
Excersize e1 = new Excersize();
e1.setExcersizeOn("no 1");
e1.setExcersizeTitle("title 1");

Excersize e2 = new Excersize();
e2.setExcersizeOn("no 1");
e2.setExcersizeTitle("title 1");

Log.i("ARRAY", "This many: "+ m_excersizes.size()); 
```

为任何帮助欢呼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:29:05.960

You forgot to add the element to the list: `mExcersizes.add(e1);`

(Note: underscore-separated variables names are not the accepted convention in Java. Use camelCase)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:32:39.610

You never add anything to your list. Add the following lines:

m_excercizes.add(e1); m_excercizes.add(e2);

And please stick to the Java naming conventions: `exercises` instead of `m_excercizes`. Moreover, the `setExcercizeTitle()` method is part of the class `Excersize`. Naming it this way is redundant. `setTitle()` is sufficient.

Here's the link of the documentation of J2SE: [http://docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T14:44:49.813

您还没有将对象添加到集合中，通过实例化对象并不意味着它们将被添加到列表中。

add() 方法用于将对象添加到列表中。

所以，应该使用这个：m_excersizes.add(e1); m_excersizes.add(e2);

# c# - 在 DataGridView 中显示和编辑 HTML 代码

> ID：10207527
> 
> 赞同：0
> 
> 时间：2012-04-18T10:28:07.453
> 
> 标签：c#, .net, winforms, datagridview, richtextbox

我有一个绑定到数据集的 DataGridView。DataSet 的数据来自 XML 文件。在 XML 文件中有一个元素包含基本的 html 数据（只有`<p>`和`<strong>`）：

```
<?xml version="1.0" encoding="utf-8"?>
<entries>
    <entry>
        <desc><![CDATA[[<p>Some <strong>text.</strong></p>]]></desc>
    </entry>
</entries> 
```

当我有一个绑定到该字段`desc`的列的 DataGridView 时，html 将显示为带有标签 ( `<p>Some <strong>text.</strong></p>`) 的字符串。当我保存这个 xml 时，标签被转换为它们的 html 实体。

如何在文本框中将 html 代码显示为富文本（“Some **text** .”）？我想我需要在这里制作一个自定义的 Richtextbox 列类型，但作为初学者我有点卡住了。此外，文本应该可以使用富文本编辑器进行编辑。

有人可以给我一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:03:34.913

我最终没有这样做。在 DataGridView 中有一个 RichTextBox 并不是一个好的用户体验。我终于把它变成了一个可以在单独的表单中编辑的常规文本字段。

# php - PHP 中的目标 RSS 值

> ID：10207529
> 
> 赞同：1
> 
> 时间：2012-04-18T10:28:08.470
> 
> 标签：php, rss

我正在使用 PHP 制作 RSS 提要阅读器，并且我获得了所有提要内容，但我无法确定目标 RSS 值的热点，因此我可以回显它们、设置它们的样式等！

[这是饲料](http://www.riga.lv/rss/lv/PressRelease/)

到目前为止我的脚本：

```
foreach($feed_list as $from => $feeds) {
    $xml = simplexml_load_file($feeds);

    echo "<pre>";
    print_r($xml);
    echo "</pre>";
} 
```

[代码执行后我把它弄出来](http://pastebin.com/N4EJECp2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:35:33.353

抱歉麻烦，但我发现了如何

```
<?php
$rss = simplexml_load_file('http://www.riga.lv/rss/lv/PressRelease/');
?>
<h1><?php echo $rss->channel->title; ?></h1>
<ul>
<?php
foreach($rss->channel->item as $e) {
    echo "<li><a href=\"".$e->link['href']."\">";
    echo $e->title;     
    echo "</a></li>\n";
}    
?> 
```

[多亏了这个:)](https://stackoverflow.com/questions/1464543/rss-feeds-in-php) - 感谢堆栈溢出 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:01:49.417

您需要遍历`$xml`返回的对象并获取每个节点的值...查看[http://www.php.net/manual/en/class.simplexmlelement.php](http://www.php.net/manual/en/class.simplexmlelement.php)了解更多信息。

# asp.net-mvc-3 - Dynamically set the disabled html attribute for TextBoxFor HtmlHelper

> ID：10207534
> 
> 赞同：8
> 
> 时间：2012-04-18T10:28:22.303
> 
> 标签：asp.net-mvc-3

I'm trying to dynamically set the `disabled` attribute for the `TextBoxFor` HtmlHelper

```
@Html.TextBoxFor(model => model.Street, 
                 new
                 {
                    @class = "", 
                    disabled = (Model.StageID==(int)MyEnum.Sth) ? "disabled" : "" 
                 }) 
```

but even if there is `disabled=""` it is the same as `disabled="disabled"`. How to get around of this ?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-18T10:34:04.580

大约一个月前我有同样的问题，我通过使用这个扩展方法完成了它

```
public static class AttributesExtensions
{
    public static RouteValueDictionary DisabledIf(
        this object htmlAttributes, 
        bool disabled
    )
    {
        var attributes = new RouteValueDictionary(htmlAttributes);
        if (disabled)
        {
            attributes["disabled"] = "disabled";
        }
        return attributes;
    }
} 
```

之后你可以像这样使用它

```
@Html.TextBoxFor(
    model => model.Street, 
    new { @class = "" }.DisabledIf(Model.StageID==(int)MyEnum.Sth)
) 
```

**编辑**（在[保罗](https://stackoverflow.com/users/3508468/paul)的[评论](https://stackoverflow.com/questions/10207534/dynamically-set-the-disabled-html-attribute-for-textboxfor-htmlhelper/10207597#comment35073920_10207597)之后）：

html属性的使用可以通过[System.Web.Routing.RouteValueDictionary](https://msdn.microsoft.com/en-us/library/system.web.routing.routevaluedictionary.aspx)`data-xxx`类的构造函数来挖掘，因为下划线不会自动转换为减号。

改用[System.Web.Mvc.HtmlHelper.AnonymousObjectToHtmlAttributes](https://msdn.microsoft.com/en-us/library/system.web.mvc.htmlhelper.anonymousobjecttohtmlattributes.aspx)方法：将解决此问题。

**更新的代码**（仅限扩展方法主体）

```
var attributes = HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes);
if (disabled)
{
    attributes["disabled"] = "disabled";
}
return attributes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T04:57:49.757

Probably your stage Id is not getting set

```
@{ 
    if(Model.StageID != null &&   Model.StageID > 0)
    {
        @Html.TextBoxFor(model => model.Street, 
             new
             {
                @class = "", 
                disabled = (Model.StageID==(int)MyEnum.Sth) ? "disabled" : "" 
             })
    }else{

        @Html.TextBoxFor(model => model.Street, 
             new
             {
                @class = ""
             })
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T10:49:29.117

使用下面的扩展方法会产生类似的结果，但这可能更脆弱：

```
@Html.TextBoxFor(
     model => model.Street, 
     new { @class = "form-control" }
).DisabledIf(Model.IsReadOnly) 
```

扩大：

```
using System.Text.RegularExpressions;
using System.Web.Mvc;

namespace xxx.HtmlHelpers
{
    public static class MvcHtmlStringExtensions
    {

        private static readonly Regex OpeningTagPattern;

        static MvcHtmlStringExtensions()
        {
            OpeningTagPattern = new Regex("<[a-zA-Z]*");
        }

        public static MvcHtmlString DisabledIf(this MvcHtmlString controlHtml, bool isDisabled)
        {
            if (!isDisabled) return controlHtml;
            return
                new MvcHtmlString(OpeningTagPattern.Replace(controlHtml.ToString(),
                    x => string.Format("{0} disabled=\"disabled\"", x.Groups[0])));
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T18:46:37.510

我们实际上只是遇到了同样的问题。我们最终实现了一个带有重载参数的扩展方法，它接受一个布尔值，指示我们是否要禁用控件。我们只是在适当的时候添加“禁用”属性，让内置的 HtmlHelper 处理繁重的工作。

扩展类和方法：

```
using System;
using System.Collections.Generic;
using System.Linq.Expressions;
using System.Web.Mvc;
using System.Web.Mvc.Html;
using System.Web.Routing;
public static class OurHtmlHelpers
{
    public const string DisabledAttribute = "disabled";

    public static MvcHtmlString TextBoxFor<TModel, TProp>(this HtmlHelper<TModel> htmlHelper, 
                                                            Expression<Func<TModel, TProp>> expression, 
                                                            object htmlAttributes, 
                                                            bool canEdit)
    {
        var htmlAttributeDictionary = SetDisabledAttribute(htmlAttributes, canEdit);

        return htmlHelper.TextBoxFor(expression, htmlAttributeDictionary);
    }        

    private static RouteValueDictionary SetDisabledAttribute(object htmlAttributes, bool canEdit)
    {
        var htmlAttributeDictionary = new RouteValueDictionary(htmlAttributes);

        if (!canEdit)
        {
            htmlAttributeDictionary.Add(DisabledAttribute, DisabledAttribute);
        }

        return htmlAttributeDictionary;
    }
} 
```

然后你只需要引用你的新类并调用`@Html.TextBoxFor(m => m.SomeValue, new { @class = "someClass" }, <Your bool value>)`

值得注意的是，您必须为您想使用的任何 TextBoxFor 重载定义这些扩展，但这似乎是一个合理的权衡。您还可以将大部分相同的代码用于您想要添加功能的其他 HtmlHelper。

# java - mongo db insert big collections

> ID：10207537
> 
> 赞同：2
> 
> 时间：2012-04-18T10:28:37.987
> 
> 标签：java, performance, mongodb

I have a mongo (version 2) in production in replicaset configuration (the next step is to add sharding).

I need to implement the following:

*   Once a day i'll receive a file with millions rows and i shall load it into mongo.
*   I have a runtime application that always read from this collection - very large amount of reads, and their performance is very important. The collection is indexed and all read perform readByIndex operation.

My current implementation of loading is:

1.  drop collection
2.  create collection
3.  insert into collection new documents

One of the thing I see is that because of mongoDB lock my total performance getting worst during the loading. I've checked the collection with up to 10Million entries. For more that that size I think I should start use sharding

What is the best way to love such issue? Or maybe should I use another solution strategy?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:58:50.100

你可以使用两个集合:)

*   collectionA 包含今天的数据
*   新数据到来
*   创建一个新集合（collectionB）并插入数据
*   现在使用 collectionB 作为您的数据

然后，第二天，重复上述只是交换 A 和 B :)

这将让 collectionA 在更新 collectionB 时仍然服务请求。

PS刚刚注意到我回答这个问题大约晚了一年:)

# ios - iOS app - architecture/sample for synchronizing CoreData against Web-Service

> ID：10207539
> 
> 赞同：7
> 
> 时间：2012-04-18T10:28:52.747
> 
> 标签：ios, web-services, core-data, sync, iphonecoredatarecipes

I am looking for either a sample app or a more architectural discussion to build an app, which maintains a local persistent store (CoreData) and keeps it sync against a Web-Service like Flickr. In my case it is Salesforce, but the pattern should be similar to many apps for Flickr, Twitter, IMAP and so on.

Sample questions: where are the best points to invoke the syncing? what are proven datastructures to maintain local changes - maintain a "changed" BOOL in the local store for every unsynched change; I would prefer a field level flag against a record level flag)?

Of course I have to optimize this on my own, knowing the amount of records (100's) and changes (10's per day) and the probability of conflicts (low in my case on a field level).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T03:23:12.110

以下是我将如何处理这个问题：

1.  首先对反映在线数据库的本地 CoreData/Sqlite 数据库进行建模。
2.  将 NSDate lastModified 属性添加到每个表的每一行。这将允许我在记录级别而不是字段级别跟踪更改。这有助于降低同步复杂性，并且在大多数现实世界的场景中，记录级同步就足够了。
3.  应用程序启动时执行自动同步，并在导航栏中提供突出的“同步”按钮。这样，当应用程序在很长一段时间后启动时，用户始终拥有更新的数据集，并且可以同步一天中的最新更改。我会避免在使用应用程序时进行后台同步。当您尝试处理其他事情时，这将使您的应用程序更加复杂且容易出错。所以推迟后台/自动同步的工作，直到你有剩下的工作。
4.  一旦我的同步在启动和按需时工作得相当好，我会尝试支持后台同步。我还会尝试消除“同步”按钮，这样用户就不必考虑同步 - （就用户而言，它始终是最新的）。但这将是一个长期的增强，只有在我“按需”同步工作坚如磐石之后，我才会尝试。

希望这可以帮助您入门。如果您对此有不同的看法，我很想听听。

# jquery - I want to make selectable only those td where unselectable="off"

> ID：10207541
> 
> 赞同：0
> 
> 时间：2012-04-18T10:29:04.550
> 
> 标签：jquery, jquery-ui, jquery-selectors

I am creating a room reservation system. So i want to make selectable only those td where unselectable="off". Please help me do this.

This is my html code and here is my script that I am using to select them.

```
<script>
$(function() {
    $( "table" ).selectable(
    {
        filter: 'tbody td unselectable:off '
    }
    );
});
</script> 
```

But nothing is happening. Please help me out with this problem.

```
 <tr>
                <td unselectable="on" resource="B" style="width: 79px; border-right: 1px solid #000000;
                    border-left: 1px solid #000000; border-bottom: 1px solid #000000; background-color: #ECE9D8;
                    font-family: Tahoma; font-size: 8pt; color: #000000; cursor: default;">
                    <div unselectable="on" style="margin-left: 4px; height: 19px; line-height: 19px;
                        overflow: hidden;">
                        Room B</div>
                </td>
                <td valign="top" unselectable="on" style="width: 1px; border-bottom: 1px solid black;
                    background-color: #FFF4BC;">
                    <div unselectable="on" style="position: relative; height: 19px; overflow: none;">
                        <div unselectable="on" onclick="javascript:event.cancelBubble=true;alert('2');" style="position: absolute;
                            left: 200px; top: -1px; width: 398px; height: 19px; border: 1px solid #000000;
                            background-color: #FFFFFF; white-space: nowrap; overflow: hidden; font-family: Tahoma;
                            font-size: 11px; cursor: pointer;">
                            <div unselectable="on" style="width: 400px; margin-left: -1px; height: 2px; background-color: Blue;
                                font-size: 1px; position: relative;">
                            </div>
                            <div unselectable="on" style="width: 398px; height: 1px; background-color: #000000;
                                font-size: 1px; position: relative;">
                            </div>
                            <div unselectable="on" style="display: block; padding-left: 1px;">
                                Event 3
                            </div>
                        </div>
                    </div>
                </td>
                <td unselectable="off" onclick="javascript:alert('2012-04-01T00:00:00, B');" onmouseover="this.style.backgroundColor='#FFED95';"
                    onmouseout="this.style.backgroundColor='#FFF4BC';" style="border-bottom: 1px solid #000000;
                    width: 19px; background-color: #FFF4BC; cursor: pointer;">
                    <div unselectable="on" style="display: block; width: 18px; height: 19px; border-right: 1px solid #EAD098;">
                        <!-- -->
                    </div>
                </td>
                <td unselectable="off" onclick="javascript:alert('2012-04-02T00:00:00, B');" onmouseover="this.style.backgroundColor='#FFED95';"
                    onmouseout="this.style.backgroundColor='#FFFFD5';" style="border-bottom-width: 1px;
                    border-bottom-style: solid; border-bottom-color: rgb(0, 0, 0); width: 20px; cursor: pointer;
                    background-color: rgb(255, 255, 213);">
                    <div unselectable="on" style="display: block; width: 19px; height: 19px; border-right: 1px solid #EAD098;">
                        <!-- -->
                    </div>
                </td>
                <td unselectable="off" onclick="javascript:alert('2012-04-03T00:00:00, B');" onmouseover="this.style.backgroundColor='#FFED95';"
                    onmouseout="this.style.backgroundColor='#FFFFD5';" style="border-bottom: 1px solid #000000;
                    width: 20px; background-color: #FFFFD5; cursor: pointer;">
                    <div unselectable="on" style="display: block; width: 19px; height: 19px; border-right: 1px solid #EAD098;">
                        <!-- -->
                    </div>
                </td> 
```

'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:33:17.520

看起来您刚刚弄错了过滤器的语法。您需要使用[“属性等于”选择器](http://api.jquery.com/attribute-equals-selector/)：

```
$( "table" ).selectable({
    filter: 'tbody td[unselectable="off"]'
}); 
```

目前，您正在寻找任何类型的元素，`unselectable`它是元素的后代`td`，并使用名为 的伪选择器`:off`，这两者都不存在。

# sharepoint - How to create triggers in sharepoint?

> ID：10207544
> 
> 赞同：2
> 
> 时间：2012-04-18T10:29:09.527
> 
> 标签：sharepoint

I am new to sharepoint. I have a requirement to create a trigger for every document created in a documentation library. I have a documentation library and for every folder added to this library (not for the subfolders inside each of these folders) the trigger should get activated and should create an item on a list which is maintained in an other subsite. Is this doable?

Thanks and any help would be greatly appreciated.

Thanks, Siva

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:33:00.920

绝对可行。您正在寻找的是所谓的事件接收器。

# asp.net - 使用 Google 货币转换 API 时输入字符串格式错误

> ID：10207553
> 
> 赞同：5
> 
> 时间：2012-04-18T10:30:33.410
> 
> 标签：asp.net, asp.net-mvc-3

我的应用程序在用 C#.Net 编码的 Asp.Net MVC3 中。我使用谷歌货币转换 API 来获取转换。

[Google Currency Conversion API](http://www.google.com/ig/calculator?hl=en&q=1USD=?GBP) 我将**From Currency**和**To Currency**值以及金额传递给我的控制器。下面是我的 C# 代码。

```
 WebClient web = new WebClient();
    string url = string.Format("http://www.google.com/ig/calculator?hl=en&q={2}{0}%3D%3F{1}", CurrenctCurr.ToUpper(), DestinationCurr.ToUpper(), TotCurrentPay);
    string response = web.DownloadString(url);
    Regex regex = new Regex("rhs: \\\"(\\d*.\\d*)");
    Match match = regex.Match(response);
    decimal rate = Convert.ToDecimal(match.Groups[1].Value); 
```

我在网上遇到错误

```
decimal rate = Convert.ToDecimal(match.Groups[1].Value.ToString()); 
```

错误是**输入字符串格式不正确**。没有内部异常。

我尝试将其转换为 toString()

```
 decimal rate = Convert.ToDecimal(match.Groups[1].Value.ToString()); 
```

我也尝试在字符串变量中获取**匹配**值，然后尝试对其执行 SubString 逻辑。但它也不起作用

```
string test = match.ToString();
test=test.substring(0,test.Indexof(""")); 
```

有一个引号（“），所以我试图将字符串的值取到“。建议我如何解决这个问题。或者我还能在正确的方向尝试什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:15:45.203

试试这个来获取网址。

```
 Uri uri = new Uri(string.Format("http://www.google.com/ig/calculator?hl=en&q={2}{0}%3D%3F{1}", CurrenctCurr.ToUpper(), DestinationCurr.ToUpper(), TotCurrentPay));
    string url = uri.AbsoluteUri + uri.Fragment;
    string response = web.DownloadString(url); 
```

# c# - How to Migrate Azman store data from XML to SQL?

> ID：10207554
> 
> 赞同：1
> 
> 时间：2012-04-18T10:30:42.020
> 
> 标签：c#, asp.net, azman

I have implemented AzMan Store in my application using XML. But now I want to migrate it to SQL.

I have already lot of user roles and data in AzMan XML, can anyone tell me some utility or method through which I can migrates that data to SQL.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:25:41.573

我用[NETSQLAZMAN](http://netsqlazman.codeplex.com/)做到了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-31T22:28:26.873

您可以使用[AZMigrate](http://blogs.technet.com/b/askds/archive/2009/07/22/how-to-migrate-the-azman-store.aspx)。您需要编译并运行它。这一切都在博客中进行了解释。

# google-app-engine - How to do optimal query Google App Engine Data store about overlapping time ranges

> ID：10207555
> 
> 赞同：2
> 
> 时间：2012-04-18T10:30:54.923
> 
> 标签：google-app-engine, google-cloud-datastore

I have some **reservation with start and end** (reference to resource is remove to make example more clear):

```
class Reservation(db.Model):
  fromHour = db.DateTimeProperty()
  toHour = db.DateTimeProperty()
  fromToRange = db.ComputedProperty(lambda x: [x.fromHour, x.toHour]) 
```

And want to **add another reservation** with check if it not **overlaps** previous one - how to express such query in Google App Engine.

**1st** I try this query with **list property** but **double inequality filters** not works. It should do two matches from1 < to2 and from1 >= from2 and one results - whatever it could be costly if there will be more data.

```
fromHour = datetime.datetime(2012, 04, 18, 0, 0, 0)
toHour = datetime.datetime(2012, 04, 18, 2, 0, 0)

reservation = Reservation(fromHour = fromHour, toHour = toHour, colors = ['white', 'black'])
reservation.put()

self.response.out.write('<p>Both %s</p>' % fromHour)    
self.response.out.write('<ol>')    
for reservation in Reservation.all()\
  .filter('fromToRange >', fromHour)\
  .filter('fromToRange <=', fromHour):
  self.response.out.write('<li>%s</li>' % (reservation.fromToRange))
self.response.out.write('</ol>') 
```

I found **another solution** that I could use additional property containing days (this will be list of days in range per reservation) than I could hit days need to be checked to narrow scan of data and check every record if not overlapping new reservation.

Please help and provide some answer how to do optimal query to detect overlapping reservations - maybe there is quick 3rd solution for time ranges queries in Google App Engine or is not supported.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:31:52.773

是的，对查询的多个不等式过滤器限制使某些事情非常难以/次优。例如地理搜索。

我会采用您提出的解决方案：量化属性值并将所有量化值保存在列表属性中，例如将持续时间包含在内的所有天数保存到列表属性中。棘手的部分是选择正确的量化级别：天、小时等。

就我个人而言，我会从通用时间尺度开始：Unix 时间（纪元），然后将其四舍五入到秒，然后对其进行十进制量化。例如，从中删除三个零（1000 秒量化器，跨度 ~ 16 分钟）并将从开始时间到结束时间的所有量化值保存在列表中。

如果量化器太细，则使用更大的一个：10000 秒。

然后，您可以使用相等过滤器简单地查询列表属性，并另外过滤内存中的结果以说明确切的持续时间开始和结束时间。

# javascript - How to pass variable to anonymous function

> ID：10207556
> 
> 赞同：6
> 
> 时间：2012-04-18T10:31:11.873
> 
> 标签：javascript

I want to pass variable `setTimeout`function and do something with that. When I alert value of `i` it shows me numbers that i did not expected. What i m doing wrong? I want log values from 1 till 8.

```
var end=8;
for (var i = 1; i < end; i ++) {
       setTimeout(function (i) {
           console.log(i);   

       }, 800);
   } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T10:37:33.737

The standard way to solve this is to use a factory function:

```
var end=8;
for (var i = 1; i < end; i ++) {
       setTimeout(makeResponder(i), 800);
   }

function makeResponder(index) {
    return function () {
        console.log(index);   
   };
} 
```

[Live example](http://jsbin.com/udopag) | [source](http://jsbin.com/udopag/edit)

There, we *call* `makeResponder` in the loop, and it returns a function that closes over the argument passed into it (`index`) rather than the `i` variable. (Which is important. If you just removed the `i` argument from your anonymous function, your code would partially work, but all of the functions would see the value of `i` as of when they *ran*, not when they were initially scheduled; in your example, they'd all see `8`.)

* * *

**Update** From your comments below:

> ...will it be correct if i call it in that way `setTimeout(makeResponder(i),i*800);`?

Yes, if your goal is to have each call occur roughly 800ms later than the last one, that will work:

[Live example](http://jsbin.com/oxarik) | [source](http://jsbin.com/oxarik/edit)

> I tried `setTimeout(makeResponder(i),setInterval(i));function setInterval(index) { console.log(index*800); return index*800; }` but it's not work properly

You don't use `setInterval` that way, and probably don't want to use it for this at all.

* * *

**Further update**: You've said below:

> I need first iteration print 8 delay 8 sec, second iteration print 7 delay 7 sec ........print 2 delay 2 sec ...print 0 delay 0 sec.

You just apply the principles above again, using a second timeout:

```
var end=8;
for (var i = 1; i < end; i ++) {
       setTimeout(makeResponder(i), i * 800);
   }

function makeResponder(index) {
    return function () {
        var thisStart = new Date();
        console.log("index = " + index + ", first function triggered");
        setTimeout(function() {
            console.log("index = " +
                        index +
                        ", second function triggered after a further " +
                        (new Date() - thisStart) +
                        "ms delay");
        }, index * 1000);
   };
} 
```

[Live example](http://jsbin.com/oxarik/2) | [source](http://jsbin.com/oxarik/2/edit)

I think you now have all the tools you need to take this forward.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T10:59:25.963

您的问题是您`i`稍后在`setTimeout()`函数触发时引用变量，到那时，值`i`已经改变（它已经到`for`循环的末尾。为了使每个 setTimeout 保持适当的值`i`，您必须捕获该值`i`分别为每个`setTimeout()`回调。

上一个使用工厂函数的答案很好，但我发现自执行函数比工厂函数更容易键入和遵循，但两者都可以工作，因为两者都可以在闭包中捕获你想要的变量，这样你就可以引用它们的静态值在 setTimeout 回调中。

以下是自执行函数如何解决此问题：

```
var end=8;
for (var i = 1; i < end; i ++) {
       (function (index) {
           setTimeout(function() {
               console.log(index);
           }, 800);
       })(i);
   } 
```

要设置与 的值成比例的超时延迟`i`，您可以这样做：

```
var end=8;
for (var i = 1; i < end; i ++) {
    (function (index) {
        setTimeout(function() {
            console.log(index);
        }, index * 800);
    })(i);
} 
```

自执行函数被传递了值，`i`并且包含该值的函数内部的参数被命名`index`，因此您可以参考`index`以使用适当的值。

* * *

**在 ES6 中使用 let**

使用 Javascript 的 ES6（2015 年发布），您可以`let`在`for`循环中使用它，它将为循环的每次迭代创建一个新的、单独的变量`for`。这是解决此类问题的一种更“现代”的方法：

```
const end = 8;
for (let i = 1; i < end; i++) {            // use "let" in this line
     setTimeout(function() {
         console.log(i);
     }, 800);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:46:31.410

这不起作用的主要原因是，`setTimeout`其中设置为`800`在`i`.

到它执行的时候，它的值`i`已经改变了。因此无法收到明确的结果。就像 TJ 说的那样，解决这个问题的方法是通过处理函数。

```
function handler( var1) {
    return function() {
      console.log(var1);  
    }        
}

var end = 8;
for (var i = 1; i < end; i++) {     
   setTimeout(handler(i), 800);
} 
```

[演示](http://jsfiddle.net/jnGUd/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-18T10:33:22.420

`setTimeout` accepts variables as additional arguments:

```
setTimeout(function(a, b, c) {
    console.log(a, b, c);
  }, 1000, 'a', 'b', 'c'); 
```

[Source](https://developer.mozilla.org/en/DOM/window.setTimeout).

EDIT: In your example, the effective value of `i` will likely be `8`, since the function is merely to be called after the loop has finished. You need to pass the current value of `i` for each call:

```
var end=8;
for (var i = 1; i < end; i ++) {
  setTimeout(function (i) {
      console.log(i);   
   }, 800, i);
} 
```

# mongodb - clojure datastructure for mongodb document updating issue

> ID：10207561
> 
> 赞同：1
> 
> 时间：2012-04-18T10:31:46.663
> 
> 标签：mongodb, clojure

I have a mongodb document with below structure..

```
{

    "key4" : 

         [
           {"k1":"v1", "k2":"va1", "k3":"value1"},         
           {"k1":"v2", "k2":"va2", "k4":"name"},
           {"k1":"v3", "k2":"va3"}
         ]
} 
```

when i was updating this document with given structure..

```
{

    "key4" : 

         [
           {"k1":"v1", "k3":"val1"},         
           {"k1":"v2", "k3":"val2"},
           {"k1":"v3", "k3":"val3"},
           {"k1":"v4", "k3":"val4"}
         ]
} 
```

i need output as..

```
{

"key4" : 

         [
           {"k1":"v1", "k2":"va1", "k3":"val1"},         
           {"k1":"v2", "k2":"va2", "k3":"val2", "k4":"name"},
           {"k1":"v3", "k2":"va3", "k3":"val3"},
           {"k1":"v4", "k3":"val4"}
         ]
} 
```

which means that if value of 'k1' exist in the new array, it should merge the only object of array into new. i am implementing this structure in clojure map.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T22:15:26.250

您可以通过 、 和 的组合`merge-with`非常`map`接近`merge`

```
user> a
{"key4" [{"k1" "v1", "k2" "va1", "k3" "value1"} 
         {"k1" "v2", "k2" "va2", "k4" "name"} 
         {"k1" "v3", "k2" "va3"}]}
user> b
{"key4" [{"k1" "v1", "k3" "val1"} 
         {"k1" "v2", "k3" "val2"} 
         {"k1" "v3", "k3" "val3"} 
         {"k1" "v4", "k3" "val4"}]}
user> (merge-with #(map merge %1 %2) a b)
{"key4" 
    ({"k1" "v1", "k2" "va1", "k3" "val1"} 
     {"k1" "v2", "k2" "va2", "k3" "val2", "k4" "name"} 
     {"k1" "v3", "k2" "va3", "k3" "val3"})}
user> 
```

那么您需要合并较长集合中的任何项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:01:43.533

在您最初的问题中，尚不清楚您是在寻找主要针对 Clojure 还是针对 MongoDB 答案的答案。我将接受针对 MongoDB 的答案的挑战。

根据您是否关心读取或更新性能，有一些权衡

您提供的架构嵌入了一个数组，该数组读取速度快但更新复杂，并且需要检查结果和随后的第二次更新以推送/追加。

如果您想利用 MongoDB upsert 进行单个更新/插入请求，则可以取消嵌入/展平模式，但随后您将不得不阅读多个文档。

请在下面找到这两种方法的 Clojure/monger 代码，使用 monger [com.novemberain/monger "1.0.0-beta4"] 和 Leiningen。

```
(ns FREE-10649-clojure.test.core
  (:use [FREE-10649-clojure.core])
  (:use [clojure.test])
  (:require [monger.core] [monger.collection] [monger.query])
  (:use [monger.operators])
  (:import [org.bson.types ObjectId] [com.mongodb DB WriteConcern]))

;; some operators are missing from monger
(defmacro ^{:private true} defoperator
  [operator]
    (let [op# (str operator)
       op-sym# (symbol op#)]
      `(def ~op-sym# ~op#)))

(defoperator $exists)
(defoperator $mod)
(defoperator $size)
(defoperator $type)
(defoperator $not)

(deftest mytest

    (def initial_doc {
        "key4" [
                { "k1" "v1", "k2" "va1", "k3" "value1" }
                { "k1" "v2", "k2" "va2", "k4" "name" }
                { "k1" "v3", "k2" "va3" }
            ]
        }
    )
    (def data_to_update {
        "key4" [
                { "k1" "v1", "k3" "val1" }
                { "k1" "v2", "k3" "val2" }
                { "k1" "v3", "k3" "val3" }
                { "k1" "v4", "k3" "val4" }
            ]
        }
    )
    (def expected_doc {
        "key4" [
                { "k1" "v1", "k2" "va1", "k3" "val1" }
                { "k1" "v2", "k2" "va2", "k3" "val2", "k4" "name" }
                { "k1" "v3", "k2" "va3", "k3" "val3" }
                { "k1" "v4", "k3" "val4" }
            ]
        }
    )

    (monger.core/connect!)
    (monger.core/set-db! (monger.core/get-db "test"))
    (def coll-name "free10649")

    ;; user-supplied schema
    (monger.collection/remove coll-name)
    (is (= 0 (monger.collection/count coll-name)))

    (monger.collection/insert coll-name initial_doc)
    (is (= 1 (monger.collection/count coll-name)))

    (doseq [outer_key (keys data_to_update)]
      (def array_of_updates (data_to_update outer_key))
      (doseq [object_of_updates array_of_updates]
        (def k1 "k1")
        (def k3 "k3")
        (def v1 (object_of_updates k1))
        (def v3 (object_of_updates k3))
        (def query { outer_key { $elemMatch { k1 v1 } } })
        (def update { $set { (str outer_key ".$." k3) v3 } })
        (monger.collection/update coll-name query update)
        (if (false? (monger.result/updated-existing? (monger.core/get-last-error)))
          (monger.collection/update coll-name { outer_key { $exists true } } { $push { outer_key object_of_updates } })
        )
      )
    )
    (prn "user-supplied-schema updated document")
    (prn (monger.collection/find-maps coll-name))

    ;; flattened schema
    (monger.collection/remove coll-name)
    (is (= 0 (monger.collection/count coll-name)))

    (doseq [outer_key (keys initial_doc)]
      (def array_of_docs (initial_doc outer_key))
      (doseq [doc array_of_docs]
        (monger.collection/insert coll-name (merge { outer_key true } doc))
      )
    )
    (prn "flattened-schema initial documents")
    (prn (monger.collection/find-maps coll-name))

    (monger.collection/ensure-index coll-name { "key4" 1 "k1" 1 })
    ;;(monger.collection/explain (monger.collection/find coll-name { "key4" { $exists true } })) ;; missing explain in monger(?)

    (doseq [outer_key (keys data_to_update)]
      (def array_of_updates (data_to_update outer_key))
      (doseq [object_of_updates array_of_updates]
        (def k1 "k1")
        (def v1 (object_of_updates k1))
        (def query { outer_key { $exists true } k1 v1 })
        (def update { $set (merge { outer_key true } object_of_updates) })
        (monger.collection/update coll-name query update :upsert true)
      )
    )

    (prn "flattened-schema updated documents")
    (prn (monger.collection/find-maps coll-name))
) 
```

# r - 使用 roxygen2 和 BibTeX 引用 R 包中的文章？

> ID：10207564
> 
> 赞同：21
> 
> 时间：2012-04-18T10:32:05.413
> 
> 标签：r, documentation, bibtex, roxygen2, citations

我使用 roxygen2 作为记录我的 R 包的工具，我发现 roxygen2 中有一个 @references 标记，但这似乎只接受自由格式的文本。我发现了一些关于 roxygen 的演示文稿，其中有标签 @bibliograph 和 @cite，但我是否正确地说 roxygen2 中没有这样的东西？

然后我应该以某种方式从 bibtex 文件中取出引用并直接在 @references 标记之后使用适当的格式手动编写它们，还是有一些更聪明的方法来做到这一点？我有大约七篇不同的文章需要引用，涉及多个函数/rd 文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T11:02:30.673

似乎有一个提供此功能的全新拉取请求： [https ://github.com/klutometis/roxygen/pull/90](https://github.com/klutometis/roxygen/pull/90)

所以希望我们很快就会有这个功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-22T10:06:16.253

在 cbeleites 提到的功能与 roxygen2 集成之前（五年后还没有），Rdpack 包提供了在 R 中使用 Bibtex 的最佳方式。

有关详细信息，请参阅[使用 roxygen2 引用文章](https://stackoverflow.com/questions/28190868/citing-articles-using-roxygen2/47473974#47473974)。

# java - JAXB not able to parse xinclude tag in xml

> ID：10207565
> 
> 赞同：0
> 
> 时间：2012-04-18T10:32:09.393
> 
> 标签：java, xml, jaxb

I am using JAXB to parse xml's under specific directory say test1\. Directory test1 have a.xml and child directory test2\. Directory test2 have b.xml.

In a.xml, I have a entry

```
<xi:include href="test2/b.xml"> 
```

At run time, JAXB is not able to parse it and gives this object-tag as null. Though its not throwing any error.

Can anyone help me on this.

# nhibernate - 如何使用 fluentnhibernate 删除表的内容？

> ID：10207566
> 
> 赞同：0
> 
> 时间：2012-04-18T10:32:12.483
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在为我的映射使用流利的 nHibernate，如下所示：

```
public class ContentTagMap: ClassMap<Employee>
{
    public EmployeeMap()
    {
        Id(t => t.Id);
        Map(t => t.Name);
        HasManyToMany(t => t.Company);
    }
}

public class CompanyMap: ClassMap<Company>
{
    public HelpMap()
    {
        Id(h => h.Id);
        Map(h => h.CompanyName).Length(6000);
        Map(h => h.address).Length(6000);
        HasManyToMany(h => h.Employee);
    }
} 
```

这些映射产生 Employee Table 、Company Table 和 EmployeeToCompany Table

**员工表**

```
Id    Name
1     John
2     MAX 
```

**公司表**

```
Id    CompanyName   address
1      HTC           ABC
2      HTC2          India 
```

**EmployeeToCompany 表**

```
Employee_Id     Company_Id
1               1
2               1 
```

如何删除 ID 为 1 的员工？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:01:43.990

除非我误解了你的问题，否则你应该问：

### 如何使用 NHibernate 删除表格的内容？

Fluent NHibernate 只是帮助映射实体的工具。 **NHibernate**是您用来创建、读取、更新和删除数据的工具。在任何情况下：

> 9.5。删除持久对象
> 
> ISession.Delete() 将从数据库中删除对象的状态。当然，您的应用程序可能仍然持有对它的引用。因此，最好将 Delete() 视为使持久实例瞬态。

来自[NHibernate 文档](http://www.nhforge.org/doc/nh/en/index.html#manipulatingdata-deleting)

您可能还想`HasManyToMany`在映射中的多对多关系 ( ) 上定义级联样式。

如果您`Cascade.SaveUpdate`在删除关系一侧的实体时使用多对多，它将删除该实体和任何关系。如果您删除关联（例如，如果您`Employee`从 a中删除 an `Company`），则只会删除关系 ( `EmployeeToCompany`)。这是我通常发现在多对多关系的情况下起作用的方法。

Look at this article for more details on mapping and using a many to many relationship in Fluent NHibernate.

[how to keep many to many relationships in sync with nhibernate?](https://stackoverflow.com/questions/10090918/how-to-keep-many-to-many-relationships-in-sync-with-nhibernate/10098851#10098851)

# jquery - position element on another with jQuery UI position

> ID：10207569
> 
> 赞同：1
> 
> 时间：2012-04-18T10:32:20.790
> 
> 标签：jquery, jquery-ui, position

Heyho again, I have two elements and want to position one of it relative to the second one :-) I found and would like to use "jquery ui .position()" for that. Here is what I got:

```
<div id="testparent">Parent</div>
<div id="testchild">Child</div>
#testparent{
    position: absolute;
   margin:100px auto auto auto;
   width:300px;
   height:120px;
   background:lime; 
}
#testchild{
    margin:auto;
    width:60px;
    height:90px;
    background:yellow;
}
$('#testchild').position({
    of: $('#testparent'),
    my: "left top",
    at: "left bottom",
    offset: "0 3"
}); 
```

I want the testchild to be positioned above/under the testparent. The problem is, that I do NOT want to position it horizontally relative to the parent but just vertically!! Is that possible :-)??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:56:29.493

`my`仅使用and选项是不可能的`at`，因为指定单个值将同时应用于`left`and `top`。

但是，您可以在[using](http://jqueryui.com/demos/position/#option-using)选项中指定一个函数，该函数将被调用以执行定位。如果您忽略该`left`属性而只更新`top`，您可以实现您想要的：

```
$("#testchild").position({
    my: "left top",
    at: "left bottom",
    of: "#testparent",
    offset: "0 3",
    using: function(props) {
        $(this).css("top", props.top);
    }
}); 
```

# .net - 查看两个对象是否属于同一类型的最快方法

> ID：10207571
> 
> 赞同：0
> 
> 时间：2012-04-18T10:32:24.480
> 
> 标签：.net, vb.net, types

查看对象是否属于同一类型的最快方法是什么？

我现在正在使用`obj1.GetType.Equals(obj2.GetType)`，但我希望有更快的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:39:09.410

好吧，这种方式是最快的:)

但是你可以写：

```
If obj1.GetType Is obj2.GetType Then

End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:37:36.410

**注意，我只知道 C#，但希望这个想法会有所帮助**

或者你可以这样做：

```
obj1.GetType() == obj2.GetType() 
```

此外，如果您发现自己经常使用它，您可以制作一个[扩展方法](http://msdn.microsoft.com/en-us/library/bb384936.aspx)。像这样

```
public static bool IsSameTypeAs(this object source, object comparator)
{
    return source.GetType().Equals(comparator.GetType();
}

// usage
obj1.IsSameTypeAs(obj2) 
```

# javascript - Open HTML file in Mac's Text Edit from a web browser

> ID：10207572
> 
> 赞同：0
> 
> 时间：2012-04-18T10:32:28.847
> 
> 标签：javascript, html, macos, edit, textedit

I'd like to use Javascript (or perhaps some more suitable script?) to open an HTML file in **Text Edit** (I'm on a mac)

I have a local web page made using Text Edit with different tabs that link to more Text Edit files on the page.

I'd like some way of quickly opening the tabs in Text Edit from my browser, then I could edit the HTML files easily in Text Edit and when I refresh the browser it will display my newly edited tab.

Pretty sure this should be simple but I'm a total beginner at Javascript and apart from going through the W3Schools tutorials, I have no knowledge of JScript per se.

Thank you for any help with this in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:38:58.890

……什么？只要得到一个好的文本编辑器。我推荐 Sublime Text 2 或 Espresso。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:36:17.013

I don't think TextEdit has a web listener of that sort, like Twitter for Mac has for Safari. I think you would need AppleScript to be able to do this, and that would only be on your local machine.

# php - 什么时候 tag is loaded with ajax, it fails to initialize I've got a page with a preview image on it, and when you click the preview image, JQuery replaces it with a Java applet using the ajax load() function. The applet comes up alri 问问题 问问题 2012-04-18T10:33:11.170 519 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I've got a page with a preview image on it, and when you click the preview image, JQuery replaces it with a Java applet using the ajax load() function. The applet comes up alright (it's netlogo) and seems to find the .nlogo file it's looking for. This .nlogo filename is passed to the applet with a <param> tag. The applet is generic, and it will load any .nlogo file and run it just like the NetLogo desktop application. It doesn't display anything however. I know it's finding the file, because when I pass it a bad filename, it throws an error, and right now it's not throwing one. It works fine if the code is just placed in the html normally, but when it is loaded with ajax the applet does not initialize correctly. I'm guessing that the applet is waiting for some kind of page-finished-loading event that's not ever going to happen. Is there any way I can fake that message? The code is distributed all over the place but here are the relevant parts The div I'm messing withClick the image to run the netlogo applet in your browser.
![](<?php echo($modelPath . $previewFile); ?>)The JQuery that replaces the preview image with the applet $(document).ready(function(){ $("#previewImage").click(function(){ $("#previewDiv").load("appletcode.php?mid="); }); }); The applet code that get's sent down for the ajax request
".mysql_error()); $row = mysql_fetch_array($result); $version = $row['netlogoVersionStr']; $nlogocode = $row['netlogoFile']; $appletWidth = $row['appletWidth']; $appletHeight = $row['appletHeight']; $modelPath = "/complexityexplorer/netlogo/userfiles/$mid/"; $nlogoFilePath = $modelPath . rawurlencode($nlogocode); ?> <applet code="org.nlogo.lite.Applet" archive="/complexityexplorer/netlogo/<?php echo rawurlencode($version) ?>/NetLogoLite.jar" width="<?php echo $appletWidth ?>" height="<?php echo $appletHeight ?>"><param name="DefaultModel" value="<?php echo $nlogoFilePath ?>"> <param name="java_arguments" value="-Djnlp.packEnabled=true"> </applet> God I hope someone has a shred of knowledge about this :/ It looks like you have just got the syntax of your filter a bit wrong. You need to use an "attribute equals" selector: $( "table" ).selectable({ filter: 'tbody td[unselectable="off"]' }); Currently you are looking for any element of type unselectable that is a descendant of a td element, and using a pseudo-selector called :off, neither of which exists. phpjqueryajaxappletnetlogo 4 0 回答 0 Related 2 linux - pid真的是独一无二的吗 2 javascript - 根据所依赖的复选框添加和删除 div 的函数 1 model-view-controller - node.js express 路由和控制器有什么区别？ 1 jquery - 使用 .slideDown 打开或关闭 div，同时调整箭头 1 c++ - 在 C++ 中生成证书请求 0 cocos2d-iphone - 升级后模板选择器中缺少 cocos2d v2.x 2 c# - 将外部项目包含为 dll 2 asp.net-mvc-3 - MVC3 路由混淆 2 assembly - 在 x86 (NASM) 中为变量赋值 1 ruby-on-rails - 如何在 Heroku 上更改 Rails 应用程序的用户名和密码？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10207582
> 
> 赞同：2
> 
> 时间：
> 
> 标签：php, jquery, ajax, applet, netlogo

I've got a page with a preview image on it, and when you click the preview image, JQuery replaces it with a Java applet using the ajax load() function. The applet comes up alright (it's netlogo) and seems to find the .nlogo file it's looking for.

This .nlogo filename is passed to the applet with a `<param>` tag. The applet is generic, and it will load any .nlogo file and run it just like the NetLogo desktop application.

It doesn't display anything however. I know it's finding the file, because when I pass it a bad filename, it throws an error, and right now it's not throwing one.

It works fine if the code is just placed in the html normally, but when it is loaded with ajax the applet does not initialize correctly.

I'm guessing that the applet is waiting for some kind of page-finished-loading event that's not ever going to happen. Is there any way I can fake that message?

The code is distributed all over the place but here are the relevant parts

The div I'm messing with

```
 <div id="previewDiv">
        Click the image to run the netlogo applet in your browser.<br>
        <img id="previewImage" src='<?php echo($modelPath . $previewFile); ?>' style="margin: 8px;" />
    </div> 
```

The JQuery that replaces the preview image with the applet

```
$(document).ready(function(){
    $("#previewImage").click(function(){
        $("#previewDiv").load("appletcode.php?mid=<?php echo $mid; ?>");
    });
}); 
```

The applet code that get's sent down for the ajax request

```
<?php
error_reporting(E_ALL);
ini_set("display_errors", 1);
include "library.php";
connectdb();

$mid = mysql_real_escape_string($_GET['mid']);
$sql = "SELECT * FROM models WHERE modelId=$mid;";
$result = mysql_query($sql) or die($sql."<br/><br/>".mysql_error());
$row = mysql_fetch_array($result);

$version            = $row['netlogoVersionStr'];
$nlogocode          = $row['netlogoFile'];
$appletWidth        = $row['appletWidth'];
$appletHeight       = $row['appletHeight'];

$modelPath = "/complexityexplorer/netlogo/userfiles/$mid/";
$nlogoFilePath = $modelPath . rawurlencode($nlogocode);

?>

<applet code="org.nlogo.lite.Applet"
    archive="/complexityexplorer/netlogo/<?php echo rawurlencode($version) ?>/NetLogoLite.jar"
    width="<?php echo $appletWidth ?>" height="<?php echo $appletHeight ?>">
    <param name="DefaultModel"
        value="<?php echo $nlogoFilePath ?>">
    <param name="java_arguments"
        value="-Djnlp.packEnabled=true">
</applet> 
```

God I hope someone has a shred of knowledge about this :/

# svn - How to ignore/resolve svn tree conflicts when merging to branch with folders deleted on purpose?

> ID：10207585
> 
> 赞同：2
> 
> 时间：2012-04-18T10:33:21.930
> 
> 标签：svn, merge, tortoisesvn, branching-and-merging, tree-conflict

In one of my branches I deleted some folders on purpose which contain plug-in sources that shouldn't be available for most of the developers using this branch. When merging new revisions from trunk to branch, i am always getting tree conflicts which i just resolve.

How can I tell svn (TortoiseSVN 1.7.6) to just ignore these deleted folders and tree conflicts in the future to speed up my merging process?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:40:59.390

你不能，至少不能自动。

但是，您可以将包含从您的分支中删除的修订合并到主干中，以便主干知道这些文件夹已被删除。然后，当您从主干向上合并到其他分支时，变化将波及它们。

当您需要将原始分支合并回主干时，您将需要挑选要合并的修订，除了包含删除的修订（顺序合并）或执行差异合并。第三种选择是进行重新集成合并，但是（如果您打算继续在分支上工作）您应该在合并后删除并重新创建分支，以避免稍后涉及该分支的奇怪合并问题。

希望这可以帮助。

# php - 未捕获的肥皂错误

> ID：10207587
> 
> 赞同：1
> 
> 时间：2012-04-18T10:33:34.120
> 
> 标签：php, zend-framework, soap, zend-soap

我正在从 try...catch 块内拨打肥皂电话，

```
 $request->l_Request->Year = $year;      
//      $request->l_Request->Period = $period;      
        try {
            /**
             * 
             * perform getMake request
             * @var stdClass
             */
            $response = $client->getSeries($request);    
            $series = $response->getSeriesResult->Lookup_Struc;                                                                                
            return $series;                      
        } catch (SoapFault $exception) {                        
            /**
             * log exception on soap request
             */
            $this->getLogger()->log($exception->getMessage(), Zend_Log::ERR);
            $this->getLogger()->log($exception->getTraceAsString(), Zend_Log::INFO);
            return false;           
        }  catch (Exception $exception) {                           
            /**
             * log exception on soap request
             */
            $this->getLogger()->log($exception->getMessage(), Zend_Log::ERR);
            $this->getLogger()->log($exception->getTraceAsString(), Zend_Log::INFO);
            return false;           
        } 
```

这是我的输出/错误的样子

> ( ! ) 致命错误：SOAP-ERROR: Encoding: object has no 'Period' property in C:\wamp\www\FHH\library\Zend\Soap\Client.php on line 1121

但是我无法使用 try catch 捕获肥皂错误，是否有特殊的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:07:22.693

我在我的应用程序中使用以下类将错误转换为异常：

```
class ErrorHandler
{
    public function __construct()
    {
        set_error_handler( array( __CLASS__, 'handleError' ));
    }

    static public function handleError( $errno, $errstr, $errfile,
                                        $errline, array $errcontext )
    {
        throw new ErrorException( $errstr, 0, $errno, $errfile, $errline );
    }
} 
```

您只需要创建它的一个实例：

```
$errorHandler = new ErrorHandler(); 
```

如果您使用的是 ZF1 MVC，另一种方法是将构造函数重命名为`__initErrorHandler()`并将这两个方法添加到您的引导程序类中。

我已经在使用 的代码中成功地使用了这种方法`Zend_Soap_Server`，所以希望它也对你有用。

# user-agent - 分析用户代理字符串

> ID：10207589
> 
> 赞同：0
> 
> 时间：2012-04-18T10:33:39.440
> 
> 标签：user-agent

我最近继承了一个在线产品的大型代码库。我试图确定的一件事是人们用来在线访问产品的最主要客户是什么（*例如浏览器、移动设备、iPad 等...*）。从好的方面来说，我有一个包含所有用户代理字符串（*大约 1000 万条记录*）的数据库表。谁能推荐一个可以分析和总结用户代理数据的工具？

***注意**：请记住，这些不是 IIS 日志。这是一个仅包含使用各种其他进程捕获的用户代理字符串的表。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:29:44.013

从来没有听说过这种软件。我可能会建议以下选项。您可以将此表（带有用户代理日志）导出到可以重现 IIS 或 Apache 日志结构（模拟）的文本文件，然后将此日志文件提供给标准的 Web 日志分析工具。

# c# - 从包括格式的字符串中解析 TimeSpan

> ID：10207592
> 
> 赞同：5
> 
> 时间：2012-04-18T10:33:52.573
> 
> 标签：c#, .net, parsing, timespan

我确定这一定很简单，但我不知道如何在 Google 中正确表达它......

我有一个配置，它有一个字段：

```
TimeToPoll="1d" 
```

现在我想做类似的**事情**：

```
TimeSpan.Parse(TimeToPoll); 
```

返回一天的时间跨度。

在 C# 中

编辑：我正在寻找一种允许解析“1d”以及“1s”或“1y”等的方法。这可能吗？

意义：

```
 "1d" parses to {1.00:00:00}
     "1h" parses to {0.01:00:00}
     "1m" parses to {0.00:01:00}
     "1s" parses to {0.00:00:01} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:26:15.903

这是我的决议：

```
 public static TimeSpan ConvertToTimeSpan(this string timeSpan)
    {
        var l = timeSpan.Length - 1;
        var value = timeSpan.Substring(0, l);
        var type = timeSpan.Substring(l, 1);

        switch (type)
        {
            case "d": return TimeSpan.FromDays(double.Parse(value));
            case "h": return TimeSpan.FromHours(double.Parse(value));
            case "m": return TimeSpan.FromMinutes(double.Parse(value));
            case "s": return TimeSpan.FromSeconds(double.Parse(value));
            case "f": return TimeSpan.FromMilliseconds(double.Parse(value));
            case "z": return TimeSpan.FromTicks(long.Parse(value));
            default: return TimeSpan.FromDays(double.Parse(value));
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:14:05.893

`d`不需要，这是您的解析失败的原因。

```
var oneDay = TimeSpan.Parse("1"); 
```

* * *

更新：

对于您要执行的操作，没有内置支持。您需要编写自己的解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:19:48.170

您应该将值以[TimeSpan.Parse](http://msdn.microsoft.com/en-us/library/se73z7b9.aspx)可以使用的格式之一存储在配置文件中。该页面上有几个示例。

编辑：示例位于页面底部的代码中。

# jquery - JQuery：除了单击之外，如何选择具有相同类的所有元素？

> ID：10207593
> 
> 赞同：10
> 
> 时间：2012-04-18T10:33:53.887
> 
> 标签：jquery, class, selector, this, next

我想我正在寻找与 $(this) 相反的东西。

如果我有 3 个具有相同类的元素，我怎么能只选择我没有点击的元素。例如：

```
<div class="test"></div>
<div class="test"></div>
<div class="test"></div> 
```

而我点击中间的div，怎么只对第一个和最后一个元素实现效果呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T10:35:53.700

你可以使用[`not()`](http://api.jquery.com/not)：

```
$('div.test').click(function(){
    var notClicked =  $('.test').not(this);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:36:01.000

试试这个：

```
$('.test').bind('click', function() {
  var not_clicked_elements = $(this).siblings('.test');
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:36:04.587

您可能可以使用[“非”选择器](http://api.jquery.com/not-selector/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-25T10:21:44.873

你可以使用这个：

```
$(document).on("click",".test ",this,function(e){ 

   alert($(this).text());

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="test">nicole</div>
<div class="test">charlize</div>
<div class="test">megan</div>
```

# android - 为 android 模拟 MPEG-DASH

> ID：10207595
> 
> 赞同：0
> 
> 时间：2012-04-18T10:34:02.887
> 
> 标签：android, apache, mpeg-dash

我正在研究提到的项目。需要为要发送到 android 的媒体剪辑创建索引文件，客户端通过解析索引文件下载媒体剪辑。如何将此索引文件 (.mpd) 放在 Apache 服务器上？我也不清楚如何通过android客户端解析索引文件来下载媒体剪辑的概念？如果有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:45:07.507

我已经用 PC 而不是 Android 做到了这一点，但我认为它们应该是相似的。您可以使用标准的 Apache 安装和类似于此处[http://www-itec.uni-klu.ac.at/dash/?page_id=207](http://www-itec.uni-klu.ac.at/dash/?page_id=207)的 DASH 数据集，当然您的 Android 上需要一个 DASH 客户端

# xcode - NSURLConnection sendAsynchronousRequest:queue:completionHandler: 不调用委托方法 - didReceiveAuthenticationChallenge

> ID：10207596
> 
> 赞同：4
> 
> 时间：2012-04-18T10:34:04.297
> 
> 标签：xcode, rest, delegates, nsurlconnection, digest

我有一个受摘要保护的 REST API。我想下载我的 JSON 响应，但首先我必须针对其余 api 进行身份验证。我正在使用 sendAsynchronousRequest:queue:completionHandler: 处理我的请求。但我不知道如何处理摘要身份验证。我认为使用 NSURLConnectionDelegate 的委托方法 didReceiveAuthenticationChallenge 这应该是可能的？我在 .h 文件中声明了 NSURLConnectionDelegate 并在实现中添加了该方法。但什么也没有发生。有什么建议如何用 "sendAsynchronousRequest:queue:completionHandler:" 处理这个问题？

```
NSURL *url = [NSURL URLWithString:@"http://restapi/"];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
 {
     if ([data length] > 0 && error == nil)
         [self receivedData:data];
     else
         NSLog(@"error");
 }];

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
NSLog(@"did get auth challenge"); } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:54:36.930

仅当您将实例指定为连接的*委托*`connection:didReceiveAuthenticationChallenge:`时才会调用。为此，您需要使用不同的方法来启动请求，例如：

 *```
NSURL *url = [NSURL URLWithString:@"http://restapi/"];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:urlRequest delegate:self] 
```

您将需要实现进一步的委托方法才能接收响应。

请注意，`connection:didReceiveAuthenticationChallenge:`不赞成使用其他委托方法（请参阅此[页面](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T12:30:14.503

看看这个问题链集可能会有所帮助：

[使用完成处理程序使用 NSURLConnection sendAsynchronousRequest 进行身份验证](https://stackoverflow.com/questions/12828060/authentication-with-nsurlconnection-sendasynchronousrequest-with-completion-hand)*

# css - 在下拉菜单中保持顶部菜单项突出显示

> ID：10207598
> 
> 赞同：4
> 
> 时间：2012-04-18T10:34:05.040
> 
> 标签：css, list, drop-down-menu

只需将此站点放在一起，并希望当您将鼠标悬停在下拉菜单项上时，带有下拉菜单项的菜单项仍以白色突出显示。 [http://dl.dropbox.com/u/7086475/Paul%20Day/index.html](http://dl.dropbox.com/u/7086475/Paul%20Day/index.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T10:38:23.367

而不是使用`#nav a:hover`选择器，您可以使用它`#nav li:hover`。

与锚不同，当您在子菜单中时，li 将保持悬停状态。

它在 IE6 中不起作用，因为悬停伪类仅适用于锚点。

```
#nav li:hover{
 color: #fff;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:48:20.133

您可以`css class`使用 为父 li 的悬停状态设置`jquery or javascript`。

**编辑**

你可以像这样设置一个css类......

```
$(document).ready(function() {
    $("#nav li li").mouseenter(function() {
      $(this).parent().parent().addClass("test");
    });

    $("#nav li li").mouseleave(function() {
      $(this).parent().parent().removeClass("test");
    });
}); 
```

和 CSS 样式...

```
.test { font-weight:bold; color:#fff; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:37:25.383

使用这个jquery，它将解决你的问题

```
$(function() {
        $('#nav li ul').hover(function() {
           $(this).prev('#nav li a').css('color', '#FF6600');
        }, function() {
            $(this).prev('#nav li a').css('color', '#fff');
        });
    }); 
```

# python - 获取退出状态后如何让Fabric继续运行下一条命令：1？

> ID：10207600
> 
> 赞同：16
> 
> 时间：2012-04-18T10:34:26.240
> 
> 标签：python, fabric, exitstatus

我将通过编写一个简单的 fabfile来安装[check_mk插件，如下所示：](http://mathias-kettner.de/check_mk.html)

```
from fabric.api import env, run, roles, execute, parallel

env.roledefs = {
    'monitoring': ['192.168.3.118'],
    'mk-agent': ['192.168.3.230', '192.168.3.231', '192.168.3.232']
}

@roles('monitoring')
def mk():
    run('[ -f check_mk-1.1.12p7.tar.gz ] || wget http://mathias-kettner.de/download/check_mk-1.1.12p7.tar.gz')
    run('[ -d check_mk-1.1.12p7 ] || tar zxvf check_mk-1.1.12p7.tar.gz')
    run('cd check_mk-1.1.12p7 && sudo ./setup.sh')

@parallel    
@roles('mk-agent')
def mk_agent():
    run('[ `rpm -qa | grep -c xinetd` -eq 0 ] && sudo yum -y install xinetd.x86_64')
    run('sudo rpm -ivh http://mathias-kettner.de/download/check_mk-agent-1.2.0b2-1.noarch.rpm') 

def check_mk():
    execute(mk)
    execute(mk_agent) 
```

但是，你可以猜到，如果`xinetd`包已经安装，Fabric 将停止并出现以下错误：

```
Fatal error: run() received nonzero return code 1 while executing!

Requested: [ `rpm -qa | grep -c xinetd` -eq 0 ] && sudo yum -y install xinetd.x86_64
Executed: /bin/bash -l -c "[ \`rpm -qa | grep -c xinetd\` -eq 0 ] && sudo yum -y install xinetd.x86_64"

Aborting. 
```

在这种情况下有什么解决办法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-04T04:17:27.917

由于 stackoverflow 不允许我在没有更多代表的情况下支持 Morgan 的答案，我将从[http://docs.fabfile.org/en/1.4.1/api/core/context_managers.html#fabric.context_managers.settings提供更多详细信息](http://docs.fabfile.org/en/1.4.1/api/core/context_managers.html#fabric.context_managers.settings)

在下面代码中的“with settings”之外，行为将恢复正常：

```
def my_task():
    with settings(
        hide('warnings', 'running', 'stdout', 'stderr'),
        warn_only=True
    ):
        if run('ls /etc/lsb-release'):
            return 'Ubuntu'
        elif run('ls /etc/redhat-release'):
            return 'RedHat' 
```

这是可取的，因为您基本上可以“捕获”一个部分中的错误而不致致命，但在其他地方留下致命错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-14T07:56:10.607

也许在 2020 年它会很有用。在 Fabric 2.5 中，您只需`warn=True`在命令中添加 以避免中断。

例如：`connection.run('test -f /path/to/file && tail /path/to/file, warn=True)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T21:47:39.307

您只需将“env.warn_only = True”添加到 def mk_agent(): 任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-05T01:41:31.360

# ninject - 如何扩展 Ninject 绑定语法

> ID：10207601
> 
> 赞同：1
> 
> 时间：2012-04-18T10:34:30.547
> 
> 标签：ninject

有没有办法扩展现有的绑定语法（例如扩展方法），让我们有这样的东西：

```
Bind<IRepository>().ToProvider<MyProvider<MyRepository>>().WhenCustom<SomeType>() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:59:50.333

编写一个扩展方法`IBindingWhenSyntax<T>`并使用现有的`When`重载来实现你的逻辑：

```
class BindingWhenExtensions
{
   public IBindingInNamedWithOrOnSyntax<T> WhenCustom<T>(
       this IBindingWhenSyntax<T> syntax)
   { 
        return syntax.When(r => true); 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T08:02:37.077

重新构建您想要创建具有类似于以下签名的扩展的问题（以与您的评论保持一致）；

```
public static IBindingInNamedWithOrOnSyntax<T> WhenCustom<TParent>(
            this IBindingWhenSyntax<T> binding) 
```

据我所知，我们不能像使用 Ninject 那样干净地扩展，因为正如您正确提到的，`T`这里是在我们的扩展不知道[的接口上定义的。](https://github.com/ninject/Ninject/blob/005e6f9e38414a38ae7c6aaf346c74ec64212609/src/Ninject/Syntax/IBindingWhenSyntax.cs)

所以我们的扩展签名必须是；

```
public static IBindingInNamedWithOrOnSyntax<T> WhenCustom<T>(
            this IBindingWhenSyntax<T> binding) 
```

在这一点上，我看到我们能够成功传递的唯一方法`TParent`是删除泛型参数并将其作为标准类型参数传递（或传递多种类型）；

```
 public static IBindingInNamedWithOrOnSyntax<T> WhenCustom(
            this IBindingWhenSyntax<T> binding, params Type[] parents) 
```

这还是和 Ninjects 自己的绑定语法方法一致；

```
/// <summary>
/// Indicates that the binding should be used only for injections on the specified types.
/// Types that derive from one of the specified types are considered as valid targets.
/// Should match at lease one of the targets.
/// </summary>
/// <param name="parents">The types to match.</param>
/// <returns>The fluent syntax.</returns>
IBindingInNamedWithOrOnSyntax<T> WhenInjectedInto(params Type[] parents); 
```

不幸的是，我们没有使用“纯”泛型进行扩展的奢侈。

# c# - 用 \r\n 替换文本文件中的文本

> ID：10207603
> 
> 赞同：0
> 
> 时间：2012-04-18T10:34:32.830
> 
> 标签：c#, regex, string, text

目前我正在建立一个带有额外选项的议程。

出于测试目的，我将数据存储在一个简单的 .txt 文件中（之后它将连接到虚拟助手的议程。）

要更改或删除此 .txt 文件中的文本，我遇到了问题。尽管需要替换的部分内容和搜索字符串完全相同，但它不会替换内容中的文本。

代码：

改变方法

```
public override void Change(List<object> oldData, List<object> newData)
    {
        int index = -1;
        for (int i = 0; i < agenda.Count; i++)
        {
            if(agenda[i].GetType() == "Task")
            {
                Task t = (Task)agenda[i];

                if(t.remarks == oldData[0].ToString() && t.datetime == (DateTime)oldData[1] && t.reminders == oldData[2])
                {
                    index = i;
                    break;
                }
            }
        }

        string search = "Task\r\nTo do: " + oldData[0].ToString() + "\r\nDateTime: " + (DateTime)oldData[1] + "\r\n";
        reminders = (Dictionary<DateTime, bool>) oldData[2];
        if(reminders.Count != 0)
        {
            search += "Reminders\r\n";

            foreach (KeyValuePair<DateTime, bool> rem in reminders)
            {
                if (rem.Value)
                    search += "speak " + rem.Key + "\r\n";
                else
                    search += rem.Key + "\r\n";
            }
        }

        // get new data
        string newRemarks = (string)newData[0];
        DateTime newDateTime = (DateTime)newData[1];
        Dictionary<DateTime, bool> newReminders = (Dictionary<DateTime, bool>)newData[2];

        string replace = "Task\r\nTo do: " + newRemarks + "\r\nDateTime: " + newDateTime + "\r\n";
        if(newReminders.Count != 0)
        {
            replace += "Reminders\r\n";
            foreach (KeyValuePair<DateTime, bool> rem in newReminders)
            {
                if (rem.Value)
                    replace += "speak " + rem.Key + "\r\n";
                else
                    replace += rem.Key + "\r\n";
            }
        }

        Replace(search, replace);

        if (index != -1)
        {
            remarks = newRemarks;
            datetime = newDateTime;
            reminders = newReminders;
            agenda[index] = this;
        }
    } 
```

替换方法

```
 private void Replace(string search, string replace)
    {
        StreamReader reader = new StreamReader(path);
        string content = reader.ReadToEnd();
        reader.Close();

        content = Regex.Replace(content, search, replace);
        content.Trim();

        StreamWriter writer = new StreamWriter(path);
        writer.Write(content);
        writer.Close();
    } 
```

在调试中运行时，我得到正确的信息：

```
 content "-- agenda --\r\n\r\nTask\r\nTo do: test\r\nDateTime: 16-4-2012 15:00:00\r\nReminders:\r\nspeak 16-4-2012 13:00:00\r\n16-4-2012 13:30:00\r\n\r\nTask\r\nTo do: testing\r\nDateTime: 16-4-2012 9:00:00\r\nReminders:\r\nspeak 16-4-2012 8:00:00\r\n\r\nTask\r\nTo do: aaargh\r\nDateTime: 18-4-2012 12:00:00\r\nReminders:\r\n18-4-2012 11:00:00\r\n"    string

    search  "Task\r\nTo do: aaargh\r\nDateTime: 18-4-2012 12:00:00\r\nReminders\r\n18-4-2012 11:00:00\r\n"  string

    replace "Task\r\nTo do: aaargh\r\nDateTime: 18-4-2012 13:00:00\r\nReminders\r\n18-4-2012 11:00:00\r\n"  string 
```

但它不会改变文本。如何确保 Regex.Replace 找到正确的内容？

PS。我确实检查了几个主题，但那里提到的解决方案都不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:42:00.707

您可以尝试使用 StringBuilder 来构建您想要写入文件的内容。

刚刚在控制台应用程序中敲了一个简单的例子，但这似乎对我有用，我认为这可能是你正在寻找的。

```
 StringBuilder sb = new StringBuilder();

        sb.Append("Tasks\r\n");
        sb.Append("\r\n");
        sb.Append("\tTask 1 details");

        Console.WriteLine(sb.ToString());

        StreamWriter writer = new StreamWriter("Tasks.txt");
        writer.Write(sb.ToString());
        writer.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:42:33.463

你错过了一个`:`之后`Reminders`。再检查一遍:)

# mfc - CBitmap::GetBitmap Failure

> ID：10207606
> 
> 赞同：0
> 
> 时间：2012-04-18T10:34:40.640
> 
> 标签：mfc, gdi, cbitmap

What could be the possible reasons of getting return code as 0 from `GetBitmap()`?

```
BITMAP bmInfo;
int rc = bitmap->GetBitmap (&bmInfo);
int ec = GetLastError(); 
```

The value returned by `GetLastError()` is also 0\. MSDN doesn't give any help and all the forums where similar questions have been asked are silent.

To give you some context, I have an instance of CBitmap and I am attaching a second instance of CBitmap to the same HBITMAP using code similar to the following:

```
CBitmap first;
:
:
CBitmap second;
second.Attach ((HBITMAP)first);

BITMAP bmInfo;
second.GetBitmap (&bmInfo); 
```

The call to `GetBitmap()` fails for `second` and not for `first`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:46:40.790

> The call to GetBitmap() fails for second and not for first.

If so, there is no way the two class instances hold the same handle, and your code snippet suggests exactly this. You can break with debugger to check your `first` and `second` to find out what they are actually holding inside.

# android - Android：文本和图像的列表视图以及奇怪的滚动行为

> ID：10207607
> 
> 赞同：1
> 
> 时间：2012-04-18T10:34:42.610
> 
> 标签：android, android-layout, exception-handling, android-listview

在我的应用程序中，我需要创建两个列表，每个列表都有不同的数据。我设计的 UI 就像在 LinearLayout 中的 TableLayout 中一个接一个地添加两个列表视图。我已将数据存储在两个字符串数组中，并使用 arrayadapter 填充到列表视图中。我的列表视图包含一个文本视图和一个图像。问题是
1。代码中没有显示错误，但列表以奇怪的方式填充。显示第 1 个列表项，第 2、3、4 个列表项未显示，第 5 个显示第 6 个未显示，从第 7 个开始很好。当我向上滚动时，列表显示所有列表项。2.每个列表都应该有自己的滚动控件。就像我滚动列表“A”一样，它应该只滚动而不是列表“B”，反之亦然。我在这里附上了代码。提前致谢。

主屏幕.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_LinearLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableLayout
        android:id="@+id/request_Table"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:background="@color/black"
        android:orientation="vertical"
        android:padding="20dp" >

        <TableRow
            android:id="@+id/request_Row1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/blue"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/request_TextView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:gravity="center"
                android:text="REQUESTS"
                android:textColor="@color/white"
                android:textStyle="bold" />

            <ImageView
                android:id="@+id/widget163"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />
        </TableRow>

        <TableRow
            android:id="@+id/request_Row2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/gray"
            android:orientation="horizontal" >

            <ListView
                android:id="@+id/request_ListView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:scrollbarAlwaysDrawVerticalTrack="true" />
        </TableRow>
    </TableLayout>

    <TableLayout
        android:id="@+id/offered_Table"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:background="@color/black"
        android:orientation="vertical"
        android:padding="20dp" >

        <TableRow
            android:id="@+id/offered_Row1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/blue"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/offered_TextView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:gravity="center"
                android:text="OFFERED"
                android:textColor="@color/white"
                android:textStyle="bold" />
        </TableRow>

        <TableRow
            android:id="@+id/offered_Row2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <ListView
                android:id="@+id/offered_ListView"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:background="@color/gray"
                android:padding="5dp"
                android:scrollbars="vertical"
                android:smoothScrollbar="true" />
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

主屏.java

```
 public class MainMenu extends Activity  {

     RequestAdapter mRequestAdapter;
     ListView mListView_req ;
    public class RequestData {
        int icon;
        String list_text;

        public RequestData( String mText) {
            super();
            //this.icon=image;
            this.list_text=mText;
        }

    }
    private RequestData[] getListItems(){
        Resources mRes = getResources();
        String[] sListItems= mRes.getStringArray(R.array.request_list);
        int listsize = sListItems.length;
        RequestData[] obj = new RequestData[listsize];
        int size = obj.length;
        for(int i=0; i<size; i++){
            obj[i] = new RequestData(sListItems[i]);
        }
        return obj;     
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainmenu_screen);
        mListView_req= (ListView)findViewById(R.id.request_ListView) ;
        mRequestAdapter = new RequestAdapter(this,R.layout.listitem, getListItems());
          mListView_req.setAdapter(mRequestAdapter);

    }
    class RequestAdapter extends ArrayAdapter{

        private RequestData rList[]= null;
        Context context;

        public RequestAdapter(Context context, int textViewResourceId,
                RequestData[] data) {
            super(context, textViewResourceId, data);
            // TODO Auto-generated constructor stub
            this.rList= data;
        }

        @Override
        public RequestData getItem(int position){

            return rList[position];
        }

        @Override
        public View getView(int pos, View convertView, ViewGroup parent) {
            View row= convertView;
            if (row== null){
                row = getLayoyutinflater().inflate(R.layout.listitem,null);
            }
            else {
                RequestData items = getItem(pos);
                TextView text= (TextView) row.findViewById(R.id.List_Text);
                if(text!= null){
                    text.setText(items.list_text);
            }

        }
            return row;

        } 
```

listitem.xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
         android:layout_height="150dp">    
    <TextView  
        android:layout_width="100dp" 
        android:layout_height="wrap_content" 
        android:layout_marginLeft="5dp" 
        android:id="@+id/text"/>
    <ImageView> 
        android:layout_width="40dp" 
        android:layout_height="wrap_content"
        android:src="@drawable/arrow" 
        android:layout_marginRight="10dp"/>
    </LinearLayout> 
```

# android - 如何进入全志 A10 平板电脑 (ICS) 的快速启动模式？

> ID：10207609
> 
> 赞同：5
> 
> 时间：2012-04-18T10:34:49.533
> 
> 标签：android, android-4.0-ice-cream-sandwich, fastboot

有谁知道如何为运行 ICS 的 allwinner a10 平板电脑进入 fastboot 模式？

```
adb reboot fastboot 
```

似乎只能正常重启。

是否有一个组合键可以将其带入快速启动？

# android - Android：定期执行代码

> ID：10207612
> 
> 赞同：34
> 
> 时间：2012-04-18T10:34:54.530
> 
> 标签：android, multithreading

我需要定期执行一些代码（连接到服务器并每分钟从 MySQL 数据库中提取数据）。为此，我有一个 Sync 类：

```
public class Sync {

    static private Handler handler = new Handler();
    Runnable task;

    public Sync(Runnable task, long time) {
        this.task = task;
        handler.removeCallbacks(task);
        handler.postDelayed(task, time);
    }
} 
```

在我的活动中，我有：

```
public void onCreate(Bundle savedInstanceState) {
    ...
    Sync sync = new Sync(call,60*1000);
    ...
}

final private Runnable call = new Runnable() {
    public void run() {
    //This is where my sync code will be, but for testing purposes I only have a Log statement
    Log.v("test","this will run every minute");
    }
}; 
```

我已经尝试过用更短的时间进行测试，但它只运行一次。当它第一次记录消息时，它也是最后一次。有谁看到我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-18T10:44:33.833

您可以使用以下代码执行此操作，希望对您有所帮助！

```
final Handler handler = new Handler(); 
Runnable runnable = new Runnable() { 

    @Override 
    public void run() { 
        try{
            //do your code here
        }
        catch (Exception e) {
            // TODO: handle exception
        }
        finally{
            //also call the same runnable to call it at regular interval
            handler.postDelayed(this, 1000); 
        }
    } 
}; 

//runnable must be execute once
handler.post(runnable); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T10:53:23.330

首先，您必须全局声明处理程序其次，您必须在 runnable 中再次使用 post Delay 方法才能再次触发它。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Sync sync = new Sync(call,60*1000);

    }
    final private Runnable call = new Runnable() {
        public void run() {
        //This is where my sync code will be, but for testing purposes I only have a Log statement
        Log.v("test","this will run every minute");
        handler.postDelayed(call,60*1000);
        }
    };
    public final Handler handler = new Handler();
    public class Sync {

        Runnable task;

        public Sync(Runnable task, long time) {
            this.task = task;
            handler.removeCallbacks(task);
            handler.postDelayed(task, time);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T10:45:45.697

`handler.postDelayed(task, time);`只会执行一次，如果您希望代码定期触发，我建议 a `Timer`and a`TimerTask`而不是 a `Handler`and a `Runnable`。

`TimerTasks`可以设置为每 x 秒运行一次，或以固定周期（例如 x 秒）运行 - 不管上次运行所花费的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-26T13:31:44.090

```
 private void doSomethingRepeatedly() {
      timer.scheduleAtFixedRate( new TimerTask() {
            public void run() {

                  try{

                   //Your code

                  }
                  catch (Exception e) {
                      // TODO: handle exception
                  }

             }
            }, 0, 10000);
                     } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-06T15:42:04.870

另一种方法，使用 ScheduledExecutorService 的[scheduleAtFixedRate](https://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate(java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit))：

```
private final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);

public void beepEvery10Seconds() {
     final Runnable beeper = new Runnable() {
       public void run() { System.out.println("beep"); }
     };
     final ScheduledFuture<?> beeperHandle = scheduler.scheduleAtFixedRate(beeper, 0, 10, SECONDS);
} 
```

# c# - 如何通过 id 在 asp.net 中的超链接中重定向某些内容？

> ID：10207613
> 
> 赞同：0
> 
> 时间：2012-04-18T10:34:57.287
> 
> 标签：c#, asp.net, hyperlink

这个东西有一个按钮可以做到这一点，但我决定使用超链接，在代码中你会看到我使用的按钮将我重定向到团队页面，其中 id 将提供将填充的信息其他领域。基本上我在玩家页面中，我希望它通过 id 重定向到玩家团队页面。

```
protected void Button4_Click(object sender, EventArgs e)
{
    int playerId = Convert.ToInt32(Request.QueryString["Id"]);

        DBLPlayers players = new DBLPlayers();
        Player player = players.SelectById(playerId);

    Response.Redirect("DetalhesClube.aspx?Id=" + player.Team.ID.ToString());
}
protected void CheckBoxList1_SelectedIndexChanged(object sender, EventArgs e)
{

} 
```

}

我怎样才能使用超链接来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:04:23.807

如果您不使用 Button 则设置 PostBackUrl 属性，您将保存一个服务器请求，如下所示：

```
Button4.PostBackUrl = "DetalhesClube.aspx?Id=" + player.Team.ID.ToString(); 
```

但是正如我所见，您不会发布任何值只是链接到另一个页面，因此最好使用普通的旧 href 或 HyperLink ASP.NET 控件，您可以将其装饰为看起来并充当[css](http://www.cssbuttongenerator.com/)中的按钮.

```
HyperLink1.NavigateUrl = "DetalhesClube.aspx?Id=" + player.Team.ID.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:43:46.750

只是 UI 可视化的问题吗？改用 a `LinkButton`... 后面的代码将保持不变。

您更喜欢有一个指向新页面的直接 HTML 链接吗？对于每个玩家，还在您的 aspx 页面中加载相关团队的 ID，并使用它来组成`<a>`超链接。

如果您发布 aspx 代码，我们可能会更精确。

# frameworks - 如何使“SBAwayController * controller = [objc_getClass("SBAwayController") sharedAwayController]”工作？

> ID：10207614
> 
> 赞同：0
> 
> 时间：2012-04-18T10:34:57.550
> 
> 标签：frameworks, private

我想检查屏幕是否被私有 api 锁定。

我从谷歌得到一些代码：

```
#import <SpringBoard/SpringBoard.h>  
#import <SpringBoard/SBAwayController.h>

Class clsAway = objc_allocateClassPair(clsAlert, "SBAwayController", 0);
objc_registerClassPair(clsAway);

Class clsAwayController = objc_getClass("SBAwayController");
SBAwayController * controller = [clsAwayController sharedAwayController];

if ([controller isLocked]){
    NSLog(@"double check Home ,now YES Lock");
}
else{
    NSLog(@"double check Home ,now NO Lock");
} 
```

为了使这些代码正常工作，我从 kennytm 的 github 下载私有头文件并导入 SpringBoard.h 和 SBAwayController.h 编译好并在我的 iPhone 4S 上运行它，似乎我可以使用 objc_getClass("SBAwayController "); 但是程序崩溃了：

```
SBAwayController * controller = [clsAwayController sharedAwayController]; 
```

出现错误：'+[SBAwayController sharedAwayController]：无法识别的选择器发送到类 0x1456c0'

我需要任何其他工作才能使这些代码正常工作吗？我知道私有 api 的使用会导致 Apple 的拒绝，但我只想知道如何使它工作。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:03:36.100

SBAwayController 在 iOS 5 中没有被删除。你怎么能期望从另一个进程中使用 SpringBoard 方法？SpringBoard 不是框架。它是一个可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T22:49:37.490

我相信 SBAwayController 在 iOS 5 中被删除了。我检查了 SpringBoard，它只有这个类的回忆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:49:08.703

维克多错了。该类仍然存在于 iOS 6 中

```
cy# c = SBAwayController.sharedAwayController;
@"<SBAwayController: 0x1c510580> <SBActivationContext: 0x1c50be50> activate:  deactivate: "

cy# printMethods(SBAwayController);
[{selector:@selector(hasEverBeenLocked),implementation:0x109c49},{selector:@selector(activateLostModeForRemoteLock:),implementation:0x116505},{selector:@selector(unlockWithSound:),implementation:0x110835},{selector:@selector(frontLocked:animate:automatically:),implementation:0x1120d5},{selector:@selector(cancelDimTimer),implementation:0x11291d},{selector:@selector(activeAwayPluginController),implementation:0x116885},{selector:@selector(shouldShowInCallUI),implementation:0x116111
... 
```

# user-interface - 设计一个 GUI 框架

> ID：10207619
> 
> 赞同：12
> 
> 时间：2012-04-18T10:35:20.217
> 
> 标签：user-interface, framework-design

我需要为项目创建自定义 GUI 框架。我实际上创建了一个非常原始的 GUI 框架，其中包含按钮、图像、文本等。但它非常简单，而且我没有任何设计 GUI 框架的先验知识。我们正在进行的项目有点严肃，我需要做得更好。那么，您可以为我推荐哪些书籍或任何类型的文档？

注意：我可能想以面向对象的方式创建框架，我可能会使用 C#，但文档不需要使用 C#。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T13:00:14.143

好吧，我远非专家，但我会尝试写一些有用的东西。我对您的经历了解不多，如果看起来很愚蠢，请见谅。

过去我一直在使用多种 GUI 框架，使用各种语言（wxpython、gtk+、swing ......）。从来没有作为专家，但这是我可以说的：

*   **保持简单**。如果你想从头开始设计，我想没有必要疯狂复杂的东西。通过减少元素中的输入和选项的数量，尽量保持简单。

*   湾。我所知道的所有成功框架的一个主要共同点是抽象。每个单独的元素都可以轻松处理，但它仍然具有所有父母的力量。这使您的对象可以在简单的同时真正多才多艺。

*   **阅读大量其他框架文档**。我喜欢花时间阅读 GUI 框架的文档，因为它可以帮助您理解抽象级别。我发现[pygtk](http://developer.gnome.org/pygtk/stable/class-gtkbutton.html)文档易于阅读。

*   **使用其他框架**。大多数框架或多或少都以相同的方式做事。对于 GUI 框架尤其如此。包含布局的框架；菜单栏和状态栏；我敢打赌，你想使用的 95% 的概念都可以在其他框架中找到。通过这种方式，了解如何开发它的最好方法是知道您需要什么以及如何去做。[每当我在 GUI 上工作时，我都会在此处](http://zetcode.com/)开始阅读相应的系列文章。作者以简单的方式解释了所有内容，因此您可以快速理解这些概念。

*   **保持开放**。我越来越多地看到使用高级语法来描述 GUIS。例如，GTk 可以将 XML 文件作为输入并从中创建一个完整的界面。我发现它非常适合抽象和重用。而且我还大大减少了所需的代码量。

我真的找不到关于你想要的确切主题的书。我想你也已经在网上搜索过了。我希望这些小想法对你有所帮助。

# visual-studio-2010 - Visual Studio 可以用某些属性来颜色/突出显示方法吗

> ID：10207620
> 
> 赞同：4
> 
> 时间：2012-04-18T10:35:24.087
> 
> 标签：visual-studio-2010, resharper, syntax-highlighting

是否可以获得 Visual Studio (2010) 或 ReSharper，使用这些方法上的自定义属性使用不同的颜色呈现方法调用。例如：

```
[Arrange]
private void ArrangeSomeVariablesAndSetup()
{
    ...
}

[Act]
private void ActOnThoseVariablesOrDoSomethingInteresting()
{
    ...
}

[Assert]
private void AssertThatSomethingHappeningThatWasExpecting()
{
    ...
} 
```

然后在调用这些方法时，Visual Studio 应该根据属性以颜色呈现它们，

```
[Test]
public void MyTest()
{
    ArrangeSomeVariablesAndSetup(); <-- Renders in green
    ActOnThoseVariablesOrDoSomethingInteresting(); <-- Renders in blue
    AssertThatSomethingHappeningThatWasExpecting(); <-- Renders in yellow
} 
```

（属性名称和颜色仅用作示例，我也不一定将其限制为单元测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-13T00:17:06.990

如果您正在寻找可以突出显示测试方法的东西（就像我一样），我编写了一个扩展，[Stay Frosty Method Block Highlighter](https://visualstudiogallery.msdn.microsoft.com/91cb9cc4-13a3-41fe-a3fe-545786a0ceab)，其中包括测试方法的方法块突出显示规则，允许您根据可配置在它们周围放置一个半透明框属性。

默认情况下，它包括通常出现在 NUnit 或 MSTest 单元测试方法中的属性，但是，您可以使用任何您想要的属性。我将其配置为在我的个人配置中突出显示基准类。唯一的缺点是“属性方法”都是相同的（可配置的）颜色。

我希望在假期期间扩展它，以允许您根据方法的属性定义无限数量的规则/颜色对——数据部分已经完成，我只需要围绕渲染重构一些位。

您已经特别询问了 Visual Studio 2010（尽管这是在 2012 年，所以那是当时最有可能的版本）。该扩展支持 2013 和 2015，但是，基于属性的方法块仅在 Visual Studio 2015 中受支持，因为它依赖于 Roslyn 进行解析。我已经将它向后移植到 2013 版本，但是，它的解析器的性能是不可接受的。作为一个周末项目，我没有时间整理它，因此以前的版本无法使用该功能。

# android - Javah 缺少 android.os.Parcelable

> ID：10207624
> 
> 赞同：1
> 
> 时间：2012-04-18T10:35:42.343
> 
> 标签：android, header, java-native-interface, javah

当我尝试使用 javah 创建头文件时，我收到一个错误，他找不到 Parcelable 类。

在我创建标题之前：

**从 %PROJECTDIR%/bin/classes/**

```
javah -classpath com.my.project 
```

但是现在我将 Parcelable 添加到本机调用中，我将 android.jar 包含到命令行调用中： **来自 %PROJECTDIR%/bin/classes/**

```
javah -classpath :~/shared/android.jar:~/shared/MyProject/bin/classes com.my.project 
```

我会收到这个错误：

```
Error: Class android.os.Parcelable could not be found. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:30:27.883

我有相同的错误消息，但有不同的问题（在 Windoze 下）。出于某种原因，尽管路径中没有空格，但我不得不引用类路径：

```
C:\myProjectPath>javah -jni -classpath "C:\Users\myUserName\android-sdks\platforms\android-15\android.jar";bin\classes -d jni package1.package2.myInterestingClass 
```

这没有用：

```
C:\myProjectPath>javah -jni -classpath C:\Users\myUserName\android-sdks\platforms\android-15\android.jar;bin\classes -d jni package1.package2.myInterestingClass 
```

它在使用相对路径时起作用：

```
C:\myProjectPath>javah -jni -classpath ..\..\..\..\..\Users\myUserName\android-sdks\platforms\android-15\android.jar;bin\classes -d jni package1.package2.myInterestingClass 
```

花了几个小时在这上面，窗户大部分时间真的很奇怪。也许这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:20:02.807

发现了问题……我有一个冒号。

```
javah -classpath ~/shared/android.jar:. com.my.project 
```

# java - 在java android中杀死一个线程

> ID：10207626
> 
> 赞同：4
> 
> 时间：2012-04-18T10:35:47.267
> 
> 标签：java, android, multithreading, thread-safety, deprecated

我有一个应用程序，我需要在 3 个单独的线程中调用 3 个方法，然后将它们杀死。根据Javadoc，我注意到该线程`stop()`甚至`destroy()`已被弃用。就像我一个接一个地启动一个线程，然后一个接一个地杀死。有没有一种特殊的方法可以杀死线程，因为我不能使用不推荐使用的方法

非常感谢任何帮助。再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:08:19.050

你不会杀死线程。您调用[Thread.interrupt()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#interrupt%28%29)，然后对`interrupted`状态或被`InterruptedException` *中断的线程*做出反应。或者，您使用`volatile`标志。有关背景和更多信息，请参阅[官方文档](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html)。

更好的是，按照评论中的建议，使用线程池/执行器而不是原始线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:07:26.583

以一种随时随地都能正常工作的方式终止流氓线程几乎是不可能的。

如果您可以控制正在运行的线程的源代码，则必须添加一个方法，以便在需要时停止线程。基本上，此方法更改一个布尔变量，线程定期检查该值以查看它是否可以继续。

```
public class MyTask implements Runnable {
    // Set this to true when thread must stop.
    private boolean mStopRequested = false;
    public void run() {
        while (mStopRequested == false) {
            // ...
        }
    }
} 
```

如果您调用不提供这种方法的 3rd 方库，那么您就不走运了，不得不求助于丑陋的工具。一旦我不得不通过删除库访问的文件来终止长时间运行的第 3 方库调用（它抛出 FileNotFoundException 并退出）。而且这只适用于 Unix 系统。

您的里程会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:22:18.513

使用 join 方法，直到接收者完成其执行并死亡或指定的超时到期，无论先发生什么。

```
thread1.join(1);
thread2.join(2);
thread3.join(3); 
```

您必须处理异常。

# python - Python module ftplib FTP_TLS - Error 530

> ID：10207628
> 
> 赞同：4
> 
> 时间：2012-04-18T10:35:47.677
> 
> 标签：python, ftplib

I'm using Python 2.7 on ubuntu 11.10 distribution.

I have a problem with ftplib module and FTP_TLS connection. On my ftp server there is vsftp

When try a connection I receive this error:

**ftplib.error_perm: 530 Please login with USER and PASS.**

This is my code:

```
from ftplib import FTP_TLS
ftp =  FTP_TLS( '192.168.1.5' )
ftp.login( 'user' , 'password') 
ftp.close() 
```

Anyway if I use the simple FTP connection, ftp = FTP('192.168.1.5') , it works!

But I need FTP_TLS connection. I tried also to insert param ftp.auth() and ftp.prot_p() but nothing happens.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-22T20:30:57.277

该类`FTP_TLS`现在似乎不能很好地处理登录。不幸的是，您必须自己明确地将这些命令发送到服务器。

```
from ftplib import FTP_TLS

# Do *not* specify the user and password in the FTP_TLS constructor arguments.
# Doing so will cause ftplib to try to login, resulting in the 530 error.
ftp = FTP_TLS('ftp.somewhere.com')
ftp.sendcmd('USER myusername') # '331 Please specify the password.'
ftp.sendcmd('PASS mypassword') # '230 Login successful.' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:44:08.857

尝试[TLS Lite](http://trevp.net/tlslite/)或[M2Crypto](http://chandlerproject.org/bin/view/Projects/MeTooCrypto)两者都是 FTP/TLS 客户端和服务器。

# ruby-on-rails - Rails how to populate dropdown from DB. Herlp or ivar?

> ID：10207631
> 
> 赞同：1
> 
> 时间：2012-04-18T10:35:50.233
> 
> 标签：ruby-on-rails, drop-down-menu

My rails app has a number of forms that use select tags. To date, to populate these selects I've been initialising an ivar(s).

But it is becoming bit of a maintenance issue. It's easy to remember to populate an ivar when you are in a `new` or `edit` action. It's the `create` and `update` actions that are more problematic. Those ivars required by the form only need to be populated when there is an validation (or error) issue with the model.

Considering that the ivars are not needed when responding to xml or json requests, I'm questioning is there a better way.

Is this a case where I should be using helpers within my _form partial? To date I've always considered database access within a helper to be a code smell - but now I'm not so sure.

Just in case my post isn't clear:

```
def create
  @user = User.new(params[:user])

  # this is what i do now - but is there a better way
  unless @user.save
    load_form_required_ivars # here I'm unnecessarily 
                             # hitting the db for json/xml requests
  end

  respond_with(@user)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:24:13.553

您可以使用`attr_accessor`和`attr_accessible`来保存您正在填充的下拉列表的这些值。当您在创建中进行验证时，如果存在验证问题，则将它们的值传回。

但是，我没有得到关于 xml 和 json 不同的部分，但这也应该适用。

# objective-c - Changing music files auto next giving error and crashes the application?

> ID：10207638
> 
> 赞同：3
> 
> 时间：2012-04-18T10:36:08.283
> 
> 标签：objective-c

I have set the songs array to play one by one.And I call a method described below.

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(moviePlayerPlaybackStateChanged:) 
                                                 name:MPMoviePlayerPlaybackStateDidChangeNotification
                                               object:player];

-(void) moviePlayerPlaybackStateChanged:(NSNotification*) sender
{
    NSLog(@"in state changed = %d and isPause = %d", player.playbackState, isPause);
    if (player.playbackState == MPMoviePlaybackStatePlaying) {
        [activityIndicator stopAnimating];
    }

    if (player.playbackState == MPMoviePlaybackStateInterrupted) {
        isPause =YES;
    }
} 
```

playing 5 or 6 songs the app get crashed and last log values are as follows:

```
2012-04-18 15:54:45.026 SymphonyProject[2896:207] in state changed = 1 and isPause = 0
2012-04-18 15:54:45.027 SymphonyProject[2896:207] in state changed = 2 and isPause = 0
[Switching to process 2896 thread 0x603b]
[Switching to process 2896 thread 0x603b]
sharedlibrary apply-load-rules all

and go to the file objc_mesgSend and pointing the line:
0x0164a09b  <+0015>  mov    0x8(%edx),%edi 
```

I m not getting the error whatever it is? Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T00:41:15.180

一个问题，您直接访问`player`对象`moviePlayerPlaybackStateChanged`- 它是类属性吗？因为您使用此通知发送对象，所以您应该**`player`**通过从`sender.userInfo`字典中检索对象来获取该对象。

# facebook - Re-Displaying Facebook Data

> ID：10207639
> 
> 赞同：0
> 
> 时间：2012-04-18T10:36:14.717
> 
> 标签：facebook, facebook-graph-api, facebook-social-plugins

Suppose user A gives access permission to all of their FB data to my site.

Suppose user B comes to my site and tries to view user B's info.

Scenario #1: Suppose I store all of user A's FB data (with user A's permission of course). What can user B see of User A's data? Only public info?

Scenario #2: Suppose I do not store user A's FB data, although user A has granted full permission to their FB data. What can user B see of user A's data? I'm guessing if user B is logged in to FB, then they would see the same amount of data as when they are on facebook.com?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:48:11.257

对于这两种情况，相同的功能：

1-用户 A 向您的网站授予一些权限（图片、个人资料信息、发布消息......和/或**离线权限**）

2-如果您的站点有离线权限，您可以随时获取用户A的数据并显示给任何您想要的人

3-如果您没有离线权限，您可以在连接时获取用户A数据并将其显示给您想要的任何人

另一种选择是在用户 A 连接时存储数据，并在用户 N 连接到您的站点时将其显示（未更新）。

希望它有所帮助，问候。

# macos - 何时使用辅助 DNS 服务器？

> ID：10207640
> 
> 赞同：13
> 
> 时间：2012-04-18T10:36:14.930
> 
> 标签：macos, dns, router, system-preferences

在我们的路由器上，我们将主 DNS 设置为本地 IP，该 IP 运行 Windows Server 2008 和内置 DNS 服务器。我们使用它来将域解析为本地服务器，如果在本地找不到域，我们会设置转发器来查询外部名称服务器。

路由器上的辅助 DNS 设置为我们 ISP 的主 DNS，以防本地 DNS 服务器关闭。

我们办公室的 mac 客户端正确地从路由器中获取 DNS 服务器，但它使用的 DNS 服务器似乎非常随机。例如，本地站点会加载，但某些图像不会。如果我将我的 DNS 地址硬编码为本地 DNS 服务器，一切都会正常工作。

所以我的问题是，mac 客户端什么时候会使用辅助 DNS 服务器？我虽然只有在主 DNS 不可用时才使用它？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T18:06:27.807

我用谷歌搜索[了这篇文章](https://discussions.apple.com/thread/2227251?start=0&tstart=0)，它解释了更新的 MacOS DNS 搜索顺序。[这个](http://reviews.cnet.com/8301-13727_7-10471471-263.html)解释了如何调整它以获得你想要的结果。

尽管一般的想法是（在任何操作系统中）从未打算使用第一台服务器，而第二台服务器是备份。（即使在 Windows 上，如果第一个服务器由于某种原因没有快速响应，则会查询第二个服务器。）将服务器查询顺序视为未指定更为明智。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-29T18:49:34.500

辅助 DNS 服务器的一般想法是，如果主 DNS 服务器没有回复（例如，它离线、无法访问、重新启动等），系统可以回退到辅助 DNS，因此不会在此期间无法解析 DNS 名称。不回复的意思是“根本不回复”，当primary说名字不详时，它不会问secondary。回答姓名未知**是**回复。

这里的问题是 DNS 使用 UDP，而 UDP 是无连接的。因此，如果 DNS 服务器处于脱机状态，系统将不会因为没有收到来自它的回复而注意到其他服务器。由于 UDP 数据包可能会丢失并且往返时间 (RTT) 未知，因此它必须重新发送请求几次，每次等待几秒钟，然后才能最终得出该服务器的结论死了。这意味着如果第一台 DNS 服务器死机，解析 DNS 名称可能需要整整一分钟或更长时间。

由于这似乎是不可接受的，不同的操作系统开发了不同的策略来更好地处理这个问题。由于两个 DNS 服务器都应该为同一个域提供相同的结果（如果不是，您的设置实际上是有缺陷的，因为辅助服务器应该是主服务器的一对一替换），哪个是无关紧要的正在使用。一些系统可能会向主系统发送请求，但如果在几秒钟内没有回复，它们不会重新发送，而是先尝试辅助系统（然后重新发送到主系统，依此类推）。有些人也可能同时查询两者，使更快的一方获胜，然后继续使用该一方一段时间（直到他们开始另一场比赛，看看它是否仍然是更快的一方）。有些人也可能更喜欢主服务器，但如果当前有超过一定数量的查询在主服务器上挂起，则进行某种负载平衡并切换到辅助服务器。有些只是在它们之间交替作为穷人的负载平衡。这一切实际上都是允许的。

但是，在您的情况下，恐怕您的主服务器有问题，因为[默认情况下，macOS 只会使用](https://apple.stackexchange.com/questions/157245/why-wont-os-x-query-multiple-dns-servers)主服务器。如果它不断地回退到次要的，它可能会认为主要的太慢了。每次发生这种情况时，辅助服务器都会成为主服务器，[请参阅这篇较早的知识库文章](https://support.apple.com/en-us/HT4030)。[这篇 cnet 文章](https://www.cnet.com/news/os-x-10-6-3-and-dns-server-priority-changes/)解释了如何禁用它，但我不确定这在当前系统中是否仍然可行。我无法找到任何关于此的参考，但 IIRC 从我的脑海深处，Apple 曾经在 WWDC 上提到他们现在在 DNS 查询方面更加积极，甚至可能尝试以最快的速度一次联系多个 DNS 服务器在某些情况下获胜，但我可能错了（也许这只是 iOS 左右）。

# facebook-graph-api - how to get all facebook comments for a domain?

> ID：10207648
> 
> 赞同：2
> 
> 时间：2012-04-18T10:37:05.733
> 
> 标签：facebook-graph-api

For example I use Facebook comment for my website like:

[http://i.imgur.com/jAcIs.jpg](http://i.imgur.com/jAcIs.jpg)

Couple post has Facebook comments area comments too.

Now I wanna display recent 10 Facebook comments on on my sidebar ?

How can I do it ?

is that possible ?

the example with commented post:

[http://fatihtoprak.com/usb-disk-flash-ten-format-atmak.html](http://fatihtoprak.com/usb-disk-flash-ten-format-atmak.html)

Thanks.

# javascript - 跳过使用 javascript 选择输入的通常行为

> ID：10207651
> 
> 赞同：1
> 
> 时间：2012-04-18T10:37:22.653
> 
> 标签：javascript, events, select, preventdefault

我有一个表单，在下拉选项列表中选择了带有一些选项的输入。

要求：单击选择输入时，我需要检查表单的验证。如果表单不完整，我需要跳过选择输入的行为，即不显示选项列表。但是，如果表单完成，则选择输入应该向我显示选项（即正常行为）。

问题：我确实尝试了 event.preventDefault() 来跳过进一步的操作，假设如果表单不完整，选择输入不会显示选项。但这不起作用

找到代码：

```
$('selectInput').addEvent('click', function(event){
  if(!validateForm()){
    if(event.preventDefault){
      event.preventDefault();
    } else {
      //IE
      event.returnValue = false;
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:48:40.817

您可以在每次更改验证参数时禁用/启用选择？

否则，我注意到您正在使用 jQuery，因此您可以实现自己的或已经使用您的功能制作的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:02:06.180

我的建议是在您的 onclick 中添加选项。如果验证通过，则添加选项，否则不执行任何操作。

# php - 在 PHP 中从输入计算值

> ID：10207657
> 
> 赞同：1
> 
> 时间：2012-04-18T10:37:37.933
> 
> 标签：php

我正在为期末考试而学习，我遇到了这个问题：

> 编写一个php脚本从输入框中读取一个正整数n并计算1+2+--n的值...

我已经尝试了很长时间并进行了足够的研究，但到目前为止我还没有完成这项工作：

```
<html>
  <head>
    <title>
     </title>
 </head>
 <body>
  <form action="inputnum.php" method="post" >
   num:<input type="text" name="num" size ="5"/>
  <input type = "submit" value = "Submit Order" />

       <?php
        $num=$_POST["num"];
        if ($num==0)$num=="";
         for($i=0; $i<=$num; $i++){
         }
            echo"($num+$i)";
       ?>

  </form> 
```

谁能帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:40:07.470

```
<?php
  $num   = (int)$_POST["num"];
  $total = 0;

  for ($i=0; $i <= $num; $i++) {
     $total = $total + $i;
  }

  echo $total;
?> 
```

如果您的代码期望处理一个数字，最好通过`(int)`发布的值进行显式转换

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:43:31.183

你混合了括号，你也混合`=`了`==`. 无论如何，存在一种计算此类总和的更快方法，即`n * (n + 1) / 2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:41:26.900

```
<?php
    $num=$_POST["num"];
    if ($num==0)$num="";
    else
    {
     for($i=0; $i<=$num; $i++){
       $sum=$sum+$i;
       }
    }
    echo $sum;
   ?> 
```

更准确地说，在计算总和之前，您必须首先检查是否设置了提交按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:43:39.023

首先，这`if ($num==0)$num=="";`是错误的。`$num="";`应该是这样。无论如何，这会破坏你的`if`陈述。

我建议将`for`-loop 放在`if`-statement 中并将条件更改为`$num>0`.

让我们`$i`从 1 开始，而不是 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T10:43:53.763

你可以使用这样的东西（未经测试，这里没有可用的 PHP 解释器）：

```
<html>
    <head>
        <title></title>
    </head>
    <body>

        <?php

            $num = (int)$_POST['num'];

            if(!$num) {

        ?>

        <form action="inputnum.php" method="post" >

            num: <input type="text" name="num" size ="5"/>
            <input type = "submit" value = "Submit Order" />

        </form>

        <?php

            } else {

                $total = 0;
                for($i=1; $i<=$num; $i++){

                    $total = $total + $i;

                }
                echo $num;

            }

        ?>

    </body>
</html> 
```

# c# - 如何将 DataGridViewColumn 绑定到组合框？

> ID：10207658
> 
> 赞同：1
> 
> 时间：2012-04-18T10:37:42.547
> 
> 标签：c#, winforms, data-binding, combobox, datagridviewcolumn

我有`dataGridView`很多列和行。

现在我想将第一个`column`（文本）的内容绑定到`comboBox`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:44:41.963

您可以像这样设置组合框的数据源：

```
private void BindComboBox()
{
  comboBox1.DataSource = dataGridView.DataSource;
  comboBox1.DisplayMember = "The column Name you want to bind";
} 
```

# windows-phone-7 - 相当于 Windows Phone 7 中的 setidletimerdisabled 以防止手机屏幕被锁定

> ID：10207659
> 
> 赞同：0
> 
> 时间：2012-04-18T10:37:43.230
> 
> 标签：windows-phone-7, wifi, disconnected, screen-lock

有没有办法防止屏幕在应用程序运行时被锁定（基本上是在下载时）？

使用 ApplicationIdleDetectionMode 可让应用程序在屏幕锁定时运行，但在屏幕锁定时，wi-fi 也会断开连接，这对于应用程序运行至关重要！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:44:43.210

您也许可以使用 PhoneApplicationService.UserIdleDetectionMode ：-

[http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.useridledetectionmode(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.useridledetectionmode(v=vs.92).aspx)

有关其他信息，以下线程可能会有所帮助：-

[http://social.msdn.microsoft.com/Forums/is/windowsphone7series/thread/c38d897f-afb6-48ab-a2d0-57ebbb632dae](http://social.msdn.microsoft.com/Forums/is/windowsphone7series/thread/c38d897f-afb6-48ab-a2d0-57ebbb632dae)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:36:47.233

与其阻止手机进入锁定屏幕，不如使用新的 (7.1) BackgroundTransfer-Agent。有一些限制（*最大 5MB 上传，大于 20MB 的文件需要 WiFi 而不是移动数据，大于 100MB 的文件需要手机连接到外部电源*），但推荐上传/下载更大的方法Windows Phone 的文件。此外，使用此服务时，您的应用程序不必在前台运行。

**更多信息：**

*   [Windows Phone 的后台文件传输概述](http://msdn.microsoft.com/en-us/library/hh202955%28v=vs.92%29.aspx)
*   [BackgroundTransferRequest 类文档](http://msdn.microsoft.com/en-us/library/hh220722%28v=vs.92%29.aspx)

# .net - 自定义 ToString 扩展不起作用 - VB.NET

> ID：10207665
> 
> 赞同：1
> 
> 时间：2012-04-18T10:38:02.187
> 
> 标签：.net, extension-methods, tostring

我有以下代码

```
Module StringExtensions

<Extension()>
Public Function ToString(ByVal e As Elements) As String
    Return e(0).ToString()
End Function

<Extension()>
Public Function ToString(ByVal e As List(Of Element)) As String
    e.ToString("|")
End Function

<Extension()>
Public Function ToString(ByVal e As List(Of Element), ByVal delim As String = "|") As String
    Dim s As String = ""
    For Each e1 As Element In e
        s = String.Join(delim, s, IIf(e1.Terminal, "!", "") & e1.Name)
    Next e1
    Return s.TrimStart(delim).TrimEnd(delim)
End Function

End Module

Class Elements
Inherits List(Of Element)
'...Various properties and methods
End Class
Class Element
'...Various Properties and methods
End Class 
```

## 我的问题：

由于某种原因，只能调用带有 delim 变量的 ToString 扩展。VS2010 甚至不会显示还有其他的。我试过只有两个 ToString 之一没有变量输入

为什么是这样？

我正在使用具有不同类的类似设置，并且效果很好。据我所知，我没有在语法方面做任何错误的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:44:50.387

.NET 中的每个类都继承`ToString()`自根基类`object`。与成员方法具有完全相同签名的扩展方法不会显示，也不能使用扩展方法语法调用。

# ruby-on-rails - Rails ActiveRecord：如何通过两个多态关联预先加载对象

> ID：10207666
> 
> 赞同：0
> 
> 时间：2012-04-18T10:38:06.320
> 
> 标签：ruby-on-rails, activerecord

`Comment`在查询我的`Activity`表时，我试图预先加载s。

```
# Activity (basic FB-style news feed)
#   user_id
#   primary_source_id (polymorphic object, like "Post", that can have comments)
#   primary_source_type

# Comment (acts as commentable w/ threading gem)
#   user_id
#   commentable_id
#   commentable_type

# WHAT GOES HERE?!
# How do I eager-load comments?
activities = Activity.includes(???).joins(???)

# Display code
activities.each do |activity|
  render ... # render activity
  activity.root_comments.each do |comment|
    render ... # render activity's comments
  end
end 
```

看，我通过遍历`Activity`s 并抓取每个`primary_source`（如 a `Post`）及其`Comment`s 来呈现我的页面。现在s`primary_source`正在被急切加载，但`Comment`s 不是；每个循环都打到`Comment`桌子上。`Activity`这对我来说是一个巨大的性能冲击，它与我展示的 s 数量成线性关系。

如何急切加载我`Comment`的 s？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:38:51.680

假设您所有的 primary_sources 都是可评论的，

```
activities = Activity.includes(:user, :primary_source => :comment_threads).where... 
```

...为我工作。为了避免访问数据库（并破坏包含的目的），您必须将任何对 root_comments 的引用替换为 comment_threads （其中确实包括子评论）。这是因为 root_comments 实际上在 gem (lib/acts_as_commentable_with_threading.rb) 中定义为辅助方法：

```
def root_comments
  self.comment_threads.where(:parent_id => nil)
end 
```

资料来源：关于嵌套关联的[Rails 指南](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)部分，以及在acts_as_commentable_with_threading gem 内部的窥视以及控制台中的一些试验和错误:)

# android - 如何获取上下文

> ID：10207667
> 
> 赞同：0
> 
> 时间：2012-04-18T10:38:11.200
> 
> 标签：android, junit

如何获取正在测试的项目的上下文。我有一个单例类，要为此创建对象，我需要在测试用例类的 setUp() 方法中调用此类的一个构造函数，但我需要传递一些上下文作为调用该构造函数的参数，但我不知道如何获取此测试用例类的上下文。我很困惑是否应该传递测试用例类的上下文或正在测试的类。请有人帮忙.任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:48:12.023

你可以得到**`getApplicationContext()`**或**`getBaseContext`**或干脆**`this`**！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:53:26.963

MockContext 不是一个好的选择，因为没有实现任何方法。每个方法调用都会给你一个例外。

有一个 IsolatedContext 实现了一些存根方法，但仍然抛出一些异常。

如果您的类正在扩展 AndroidTestCase，您可以简单地调用 getContext() 来接收 Context 的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:41:59.407

自己从未使用过，但答案可能在这里：http: [//developer.android.com/reference/android/test/mock/MockContext.html](http://developer.android.com/reference/android/test/mock/MockContext.html)

# php - 从 PHP 的下拉框中获取选定的值

> ID：10207671
> 
> 赞同：6
> 
> 时间：2012-04-18T10:38:37.487
> 
> 标签：php

我正在使用以下代码填充下拉框。

```
<select id="select_catalog">
<?php 
$array_all_catalogs = $db->get_all_catalogs();
foreach($array_all_catalogs as $array_catalog){?>
<option value="<?= $array_catalog['catalog_key'] ?>"><?= array_catalog['catalog_name'] ?></option> 
```

现在如何使用`PHP`（我有使用`Javascript`and获取选定项目的代码`jQuery`）获取选定的选项值，因为我希望选定的值在数据库中执行查询。

任何帮助都感激不尽。非常感谢...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-18T10:42:00.060

您需要在`<select>`标签上设置一个名称，如下所示：

```
<select name="select_catalog" id="select_catalog"> 
```

你可以用这个在 php 中得到它：

```
$_POST['select_catalog']; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T10:42:39.450

你不能只传递一个名称属性并将其包装在一个表单中吗？

```
<form id="form" action="do_stuff.php" method="post">
    <select id="select_catalog" name="select_catalog_query">
    <?php <<<INSERT THE SELECT OPTION LOOP>>> ?>
    </select>
</form> 
```

然后寻找`$_POST['select_catalog_query']`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:42:02.820

你必须给`name`你的元素一个属性`<select />`，然后在 PHP 的`$_POST`or `$_GET`（取决于你传输数据的方式）数组中使用它。不过，请务必清理用户输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-29T11:34:30.157

从我的项目中发布它。

```
<select name="parent" id="parent"><option value="0">None</option>
<?php
 $select="select=selected";
 $allparent=mysql_query("select * from tbl_page_content where parent='0'");
 while($parent=mysql_fetch_array($allparent))
   {?>
   <option value="<?= $parent['id']; ?>" <?php if( $pageDetail['parent']==$parent['id'] ) { echo($select); }?>><?= $parent['name']; ?></option>
  <?php 
   }
  ?></select> 
```

# java - 如何停止在服务器中运行的程序？

> ID：10207672
> 
> 赞同：1
> 
> 时间：2012-04-18T10:38:38.817
> 
> 标签：java, eclipse, eclipse-plugin

我正在做一个 Eclipse 插件项目来为特定语言创建一个 IDE。为了运行，我连接到服务器并询问用户命令，连接类型......

程序开始执行后 停止程序执行的唯一方法是在命令提示符下按“ctrl+C”。我通过向服务器发送以下命令来运行程序：“probevue filename.e >output.txt”

当我给出这个命令时，它正在运行，但我无法停止程序......即当我按下 Ctrl+C 时，程序应该停止执行。

我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:43:22.050

常见的 eclipse 服务器插件（如[JBoss Tools](http://www.jboss.org/tools)）调用随服务器提供的服务器脚本来启动和停止。应用程序的部署/取消部署和启动/停止是通过管理端口完成的。

所以要么你有一个可管理的服务器来控制你的程序，要么你可以通过自己编写脚本来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:10:10.990

在阅读了有关probevue 的这篇文章后，您似乎已经开始了一个动态会话。我认为您正在调用的程序永远不会自行终止。

[http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=%2Fcom.ibm.aix.cmds%2Fdoc%2Faixcmds4%2Fprobevue.htm](http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=%2Fcom.ibm.aix.cmds%2Fdoc%2Faixcmds4%2Fprobevue.htm)

您应该首先阅读如何正确调用命令。例如-> [http://www.javalobby.org/java/forums/t53333.html](http://www.javalobby.org/java/forums/t53333.html)

那么您应该考虑如果没有 ctrl+c 选项，您将如何终止命令，例如找出您之前执行的 shell 命令的进程 ID（例如： ps -ef | grep ）并通过以下方式终止它使用另一个 shell 命令（例如： kill -9 ）

希望这可以帮助您找到解决方案。

# apache-flex - 将 enable = "false" 设置为该字段后更改字段外观？

> ID：10207673
> 
> 赞同：0
> 
> 时间：2012-04-18T10:38:39.783
> 
> 标签：apache-flex, flex3

我正在尝试将 enabled="false" 设置为我的 flex 应用程序中的一个表单字段。但是禁用它后该字段的外观看起来很愤怒。我想在以我的方式禁用它后更改该字段的外观。那么我可以在禁用字段后更改字段的外观和感觉吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:17:53.840

我认为您必须`skin`为您的组件编写一个。

每个皮肤都有不同`states`的皮肤。在您的情况下，您必须为`disabled`状态编写皮肤。

要开始使用，本教程可能会很有用 - [http://www.adobe.com/devnet/flex/articles/flex4_skinning.html](http://www.adobe.com/devnet/flex/articles/flex4_skinning.html)

有关蒙皮的详细信息，请访问[http://help.adobe.com/en_US/flex/using/WSC8DB0C28-F7A6-48ff-9899-7957415A0A49.html](http://help.adobe.com/en_US/flex/using/WSC8DB0C28-F7A6-48ff-9899-7957415A0A49.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:52:15.407

是的。概念： - 使用基于约束的布局概念。如果您使用的是动作脚本，请使用 move()

```
Ex: - 
button.move(100,100);
if(button.visible)
{
    button1.move(button.x + button.height + 5,button.y);
}

so on.... 
```

请添加一些代码，以便我们可以建议您到底在寻找什么。

# asp.net-mvc-3 - ASP.NET MVC3 Dropdownlist 从不选择编辑视图中的值

> ID：10207675
> 
> 赞同：0
> 
> 时间：2012-04-18T10:38:47.497
> 
> 标签：asp.net-mvc-3, drop-down-menu, edit

我有一个在 ASP.NET MVC 中填充创建下拉列表的函数。

```
 public static MvcHtmlString countryDropDown(this HtmlHelper helper, string name, string optionLabel, object selectedValue)
    {
        XmlDocument doc = new XmlDocument();
        doc.Load(HttpContext.Current.Server.MapPath("~/App_Data/countries.xml"));

        StringBuilder b = new StringBuilder();

        b.Append(string.Format("<select name=\"{0}\" id=\"{0}\">", name));
        if (!string.IsNullOrEmpty(optionLabel))
            b.Append(string.Format("<option value=\"\">{0}</option>", optionLabel));

        foreach (XmlNode node in doc.SelectNodes("//country"))
        {
            string selected = string.Empty;
            if (node.Attributes["name"].Value == selectedValue as string)
            {
                selected = "selected=\"selected\"";
            }
            b.Append(string.Format("<option value=\"{0}\" {2}>{1}</option>", node.Attributes["name"].Value, node.Attributes["name"].Value, selected));
        }
        b.Append("</select>");

        return MvcHtmlString.Create( b.ToString());
    } 
```

我在创建和编辑视图中使用此功能：

```
 @Html.countryDropDown("Country"," ", ViewData["Country"]) 
```

它完美地显示了国家列表，但问题是我从未在编辑页面中选择保存的值。如何修改代码以便它可以在编辑页面中选择值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:07:55.407

使用解决

```
 @Html.countryDropDown("Country"," ", ViewData.Eval("Country")) 
```

代替

```
 @Html.countryDropDown("Country"," ", ViewData["Country"] 
```

# sql - 融合表中的“IN”查询

> ID：10207676
> 
> 赞同：0
> 
> 时间：2012-04-18T10:38:55.177
> 
> 标签：sql, google-maps-api-3, google-fusion-tables

在下面的代码中，我想添加“IN”+Village+。在代码中的何处添加此条件。变量村从下拉列表中获取值，基于该过滤器应该发生。请帮助我。村名是我的融合表中的一列。
即从 querypass > textvalue IN villagename='madurai' 的表中选择'geometry',villageName

```
function querymape()
        {
        /*variable holds the value*/ 
        var village =document.getElementById('village').value.replace(/'/g, "\\'");
        var operatore=document.getElementById('operatorstringe').value.replace(/'/g, "\\'");
        var textvaluee=document.getElementById("text-valuee").value.replace(/'/g, "\\'");
        var querypasse=document.getElementById('query-passe').value.replace(/'/g, "\\'");

            {
             layer.setQuery("SELECT 'geometry'," + querypasse + " FROM " + tableid + " WHERE " + querypasse + " " + operatore + " '" + textvaluee + "'"+"AND 'VillageName=+village+'");
            }

    }

/*This is my new code.But its not working.Please help me*/
function querymap()
{
//var villagename='';
var operator=document.getElementById('operatorstring').value.replace(/'/g, "\\'");
var textvalue=document.getElementById("text-value").value.replace(/'/g, "\\'");
var querypass=document.getElementById('query-pass').value.replace(/'/g, "\\'");
var searchStringe = document.getElementById('Search-stringe').value.replace(/'/g, "\\'");
    {
     layer.setQuery("SELECT 'geometry'," + querypass + " FROM " + tableid + " WHERE " + querypass + " " + operator + " '" + textvalue + "'"+"AND 'VillageName'="+ searchStringe+"");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:54:10.253

1.  可以使用关键字“**和**”组合多个条件？
2.  您扭曲了 IN 语法，当您想要匹配多个值时使用它，如果您只想与单个值进行比较，请使用“ **=** ”代替

应用于您的查询（使用 IN 语法）：

```
 select 'geometry',villageName from table where querypass > textvalue and villagename IN ('madurai','another village') 
```

使用 = 语法：

```
 select 'geometry',villageName from table where querypass > textvalue and villagename = 'madurai' 
```

# java - 将标准输出重定向到 swt。

> ID：10207677
> 
> 赞同：0
> 
> 时间：2012-04-18T10:38:55.910
> 
> 标签：java, swt, system.out

```
Display disp = Display.getCurrent();    
    disp.asyncExec(new Runnable() {
        public void run(){
            try {

                PipedOutputStream pos = new PipedOutputStream();
                System.setErr( new PrintStream(pos, true) );
                System.setOut( new PrintStream(pos, true) );

                PipedInputStream pis = new PipedInputStream( pos );
                BufferedReader reader = new BufferedReader( new InputStreamReader(pis) );

                String line = null;

                while (true){

                    line = reader.readLine(); // != null)

                    console.append(line);
                    System.out.println("moo" + line);
                    parent.layout(true,true);
                }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }); 
```

我正在尝试捕获 System.err 的内容以在我的应用程序的调试窗口中打印出来。我可以运行上面的代码，但是 System.err 的内容没有显示在我的应用程序中，它只是被打印到控制台，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:01:36.977

问题是你无限地回响到`System.out`. 您可能想要做的是将旧的存储`System.out`在 的开头`run()`，并在此处回显，而不是`System.out`在读取循环中的新的。

```
PrintStream oldOut = System.out;

// ... set out and err

while(true) {
    ...
    oldOut.println("moo" + line);
} 
```

**编辑：**

此外，您想启动一个新线程而不是调用`asyncExec()`，它在 EDT 上运行，因此会导致您的 GUI 挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:52:10.820

我不熟悉 swt 编程。但我记得重定向标准输出的方法是设置输出流，就像你在调用 System.setErr 时所做的那样，为实现 PrintStream 的自定义对象。该对象的`print`方法将知道如何更新 GUI

# jquery - 双导航 jquery 手风琴

> ID：10207684
> 
> 赞同：1
> 
> 时间：2012-04-18T10:39:12.820
> 
> 标签：jquery, navigation, double, accordion, slide

我的主要问题是我想在 jquery 中创建一个基于手风琴的网站，当点击手风琴按钮时，它会打开它的内容。

但我不知道我该如何实现，什么时候为它创建一个顶部菜单，它也控制它的滑动。

例如：在主要内容上，我单击工作手风琴按钮 - 它向下滑动并显示工作的附加内容......但我不知道如何链接顶部菜单的“工作”按钮以向下滑动相同内容。

html:

```
<div id="wrapper">
    <div class="accordionButton"><img src="work.png" width="666" height="84"></div>
    <div class="accordionContent"><img src="7.jpg" width="900"></div> 
```

jQuery：

```
$(document).ready(function() {

//ACCORDION BUTTON ACTION (ON CLICK DO THE FOLLOWING)
$('.accordionButton').click(function() {

    //REMOVE THE ON CLASS FROM ALL BUTTONS
    $('.accordionButton').removeClass('on');

    //NO MATTER WHAT WE CLOSE ALL OPEN SLIDES
    $('.accordionContent').slideUp('normal');

    //IF THE NEXT SLIDE WASN'T OPEN THEN OPEN IT
    if($(this).next().is(':hidden') == true) {

        //ADD THE ON CLASS TO THE BUTTON
        $(this).addClass('on');

        //OPEN THE SLIDE
        $(this).next().slideDown('normal');
     } 

 });

/*** REMOVE IF MOUSEOVER IS NOT REQUIRED ***/

//ADDS THE .OVER CLASS FROM THE STYLESHEET ON MOUSEOVER 
$('.accordionButton').mouseover(function() {
    $(this).addClass('over');

//ON MOUSEOUT REMOVE THE OVER CLASS
}).mouseout(function() {
    $(this).removeClass('over');                                        
});

$('.accordionContent').hide(); 
```

CSS：

```
#wrapper {
width: 1100px;
margin-left: auto;
margin-right: auto;
}
.accordionButton {  
    width: 900px;
    float: left;
    _float: none;

border-bottom: 1px solid #FFFFFF;
cursor: pointer;
}

.accordionContent { 
    width: 1000px;
    float: left;
    padding:20px;
    _float: none; 
    background: #fff;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:30:57.483

我将上面的代码设置到这个 jsFiddle - [http://jsfiddle.net/SZ9pE/](http://jsfiddle.net/SZ9pE/)中。你有手风琴工作，我不知道你为什么不将另一个事件连接到你的菜单元素，也可以上下滑动手风琴。

我会为你所有的手风琴设置一个共同的类，这样你就可以一起控制它们。当你点击一个菜单项时，你可以先用这样的东西关闭所有打开的手风琴......

```
$('.accordionContent').is(":visible").slideUp(); 
```

接下来，我会将打开给定手风琴的代码移动到一个通用函数中......

```
function openContent(btn){
    $('.accordionButton').removeClass('on');
    $('.accordionContent').slideUp('normal');

    $(btn).addClass('on');
    $(btn).next('.accordionContent').slideDown('normal');
}
​ 
```

然后，更改按钮单击事件以使用常用功能...

```
$('.accordionButton').click(function(e) {
    openContent(this);                
 }); 
```

然后，将菜单元素的单击事件连接到相同的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:23:08.353

您还可以使用 Jquery 触发器功能。它在您传递给它的选择器上模拟给定事件。

假设您有五个手风琴 div，因此您将有 5 个菜单元素。

只需连接菜单元素即可执行以下操作：

```
$("#menuitem1").click(function(e){
    $("#accordionLi1").trigger("click");
}); 
```

理想情况下，您应该遍历所有可用元素并将触发器附加到它们。就像是：

```
for(var i=0;i<n;i++)
{
    $("#menuitem"+i).click(function(e){
        $("#accordionLi"+i).trigger("click");
    });
} 
```

# php - PHP - 如何将全局变量传递给函数

> ID：10207686
> 
> 赞同：5
> 
> 时间：2012-04-18T10:39:18.697
> 
> 标签：php, function, global

我有一个函数填充在函数启动之前创建的数组。为了使人口工作，我在我的功能中使用了“全球”。在以下情况下一切正常：

```
$parameter = 'something';  
$listOne = array();

my_function($parameter);

function my_function($para) {
     global $listeOne;
     ...some code  
     $listeOne[0] = 'john';
     $listeOne[1] = 'lugano';
} 
```

我想要的是在调用函数时传递应该在函数中使用的数组。这个想法是做这样的事情：

```
$parameter = 'something';  
$listOne = array();
$listTwo = array();

my_function($listOne, $parameter);
...some code
my_function($listTwo, $parameter);

function my_function($list, $para) {
     ...some code
     $list[0] = 'john';
     $list[1] = 'lugano';
} 
```

除了根据我读到的内容外，使用 global 可能不是最好的方法......我看到有些人在某处使用 & 符号并说它更好。但我不明白，也没有找到有关该“方法”的信息......希望我很清楚。预先感谢您的回复。干杯。马克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T10:41:05.350

它被称为[引用](http://php.net/manual/en/language.references.php)：

```
$listOne = array();

function my_function(&$list, $para) {
     ...some code
     $list[0] = 'john';
     $list[1] = 'lugano';
}
my_function($listOne, $parameter);

print_r($listOne); // array (0 => 'john', 1 => 'lugano'); 
```

现在将更改省略的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T10:44:20.307

也许您需要“参考参数”之类的东西[http://www.php.net/manual/en/functions.arguments.php](http://www.php.net/manual/en/functions.arguments.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:43:53.897

使用`&`方式[通过引用传递](http://php.net/manual/en/language.references.pass.php)。

例如：

```
$x = '123';

function changeX(&$data){
   $data = '1';
}

echo $x; //x should print out as 1. 
```

在您的情况下，您可以使用：

```
$parameter = 'something';     
$listOne = array();   
$listTwo = array();   

my_function($listOne, $parameter);   
my_function($listTwo, $parameter);   

function my_function(&$list, $para) {   
     $list[0] = 'john';   
     $list[1] = 'lugano';   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T10:57:12.407

你可以这样写你的函数：

```
$listOne = array();
my_function($list = array())
{
array_push($list, 'john');
array_push($list, 'lugano');
return $list;
}  

$listOne = my_function($listOne);
print_r($listOne); 
```

# java - 休眠缓存技术

> ID：10207689
> 
> 赞同：5
> 
> 时间：2012-04-18T10:39:48.640
> 
> 标签：java, hibernate, caching, struts, in-memory-database

我有一个包含 200 个表的应用程序 - 分为 4 组

1.  非事务性（50 个表）- 诸如部门、名称等表，有时由管理员更新一次（100000 次读取：1 次写入率和 1 次写入/月）

2.  较少事务（50 个表）- 诸如设置、产品、税率之类的表读取更多，插入频率很低，但每天都会发生写入（1000 次读取：1 次写入率和 1 次写入/天）

3.  事务性（50 个表）- 订单、收据等表，写入和读取几乎相同（10 次读取：1 次写入和 1 次写入/小时）

4.  繁重事务（50 个表）- 任务、历史记录等表，这些表写得更多，读得更少，但被服务和报告使用（1 次读取：1 次写入和 1 次写入/分钟）

我正在使用 hibernate、struts2 和 spring 并寻找缓存策略以获得最佳性能和效率。

如果您观察到我在写入和读取最多的表中有更多数据，因此将它们缓存在更关键的位置。

我可以缓存第 4 组表吗？如果是怎么办？

我可以缓存第 3 组表吗？如果是怎么办？

我可以缓存第 2 组表吗？如果是怎么办？

我可以缓存第 1 组表吗？如果是怎么办？

我可以在内存数据库中使用某些表吗？

在某些情况下视图会帮助我吗？哪些情况？

**好吧，我最终想要的是从内存数据库中快速读取访问，一些东西会随着数据库的变化而更新我的内存数据库。比如说我有产品列表，内存中有订单列表，但是当添加任何新产品或订单时，这个列表必须重新加载。通常，所有读取都从某个内存数据库中读取，而所有写入直接 db 并带有触发器以更新列表或列表项。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:46:39.323

让我们从缓存的经验法则开始，

**缓存频繁读取且很少更改的非事务性数据**。

Hibernate 可以让你非常安全地到达那里。从这一点开始，即使您仍然可以使用缓存，但实际上并不推荐它，因为您可能会遇到多个问题。因此，最好谨慎行事。看看下面的文章列表，它会给你更多的洞察力。

1.  [Hibernate：真正了解二级缓存和查询缓存](http://www.javalobby.org/java/forums/t48846.html)
2.  [理解 Hibernate 中的缓存——二级缓存](http://blog.dynatrace.com/2009/03/24/understanding-caching-in-hibernate-part-three-the-second-level-cache/)
3.  [提高 Hibernate 的性能](http://www.informit.com/articles/article.aspx?p=353736)

因此，当我们将此规则应用于您的场景时，只有第一组应该被缓存。首先，**测量您的应用程序以提高性能。**如果一切顺利，您也可以考虑缓存第二组。不建议缓存事务表，因此排除了集合 3 和 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:54:21.193

尽管 ManuPk 已经以非常详细的方式回答了这个问题，但我只想补充一些内容，Hibernate 提供了一个本地 InProc 缓存，它不能在多服务器环境中使用。所以在负载高峰期，如果响应时间不好，你觉得性能是个问题，你最好选择 2 级缓存。因为它允许使用 NHibernate 的应用程序现在可以扩展到多服务器环境并消除任何数据库瓶颈。请阅读以下文章以获得进一步参考，虽然它是关于 NHibernate(.NET)，但它会解释 L1 和 L2 缓存的概念。

[二级缓存，性能更上一层楼](http://distributedcaching.blog.com/2012/04/26/secondary-l2-cache-with-nhibernate-%E2%80%93-taking-performance-to-the-next-level/)

您可以将[NCache](http://www.alachisoft.com/ncache/index.html)用作二级缓存，因为它现在与 Java 和 .NET 应用程序完全兼容。干杯

# scala - Scala - 如何避免关闭？

> ID：10207690
> 
> 赞同：0
> 
> 时间：2012-04-18T10:39:49.113
> 
> 标签：scala, closures

将函数作为参数传递给类构造函数时如何避免关闭？

我的类构造函数接受 type 的函数`() => Unit`。在程序工作过程中，我想从可变映射中访问一个键值对，该映射在使用构造函数创建对象时未定义

```
val cats = scala.collection.mutable.Map[String, Cat]

class Trigger(period: Long, f: () => Unit) {

  //pseudocode:
  when period passes, f()

}

someWonderfulObject += new Trigger (1000, () => cats("Hershy").meow)

cats += ("Hershy" -> Cat()) 
```

然后，当美妙的对象触发它的触发器时，我得到没有像“Hershy”这样的键的错误。我得出的结论是，显然，这是由于在没有“Hershy”的状态下关闭`f`了缺点。`Trigger`

我现在的问题是 - 如何避免 Scala 在此处使用闭包，而是查看 的实际状态`cats`？

**更新：**

“当周期过去”的代码是这样的：

```
def update(tpf: Float) {
  timePassed += tpf
  if(timePassed > period) f()
} 
```

该`tpf`值来自上面，所以这一切似乎都可以。

**更新：**

我发现问题出在另一个完全不相关的地方，我混淆了所有这些东西的容器。但是，谢谢大家，我从答案中学到了一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T11:01:50.377

闭包不会做这样的事情（这将很难指定，性能很差，并使整个事情变得无用）。闭包可能包含对猫的引用，或对包含猫的实例的引用，而不是副本。

此代码按预期工作：

```
val cats = collection.mutable.Map[String, String]()

class Trigger(name: String, f: () => Unit) {
  def fire = {
    println("Fire " + name)
    f()
  }
}

val trigger = new Trigger("calling Hershy", () => println(cats("Hershy")))
cats += "Hershy" -> "meow"
trigger.fire // prints Fire calling Hershy 
```

关闭没有错，我怀疑这是您的样本中没有出现的东西。

# wpf - 在 WPF 中刷新 Crystal Report 时出现异常

> ID：10207692
> 
> 赞同：1
> 
> 时间：2012-04-18T10:40:04.727
> 
> 标签：wpf, crystal-reports

我正在使用 Crystl Report XI 和 WFP 查看器在窗口上查看报告。

我正在尝试使用 RefreshReport() 方法刷新我的 Crystal Report。但它得到了一个`NULLReferanceException`在线`Me.irRapportViewer.ViewerCore.RefreshReport()`。

如果我删除此行，报告会被加载，但它不是最新的。要获得最新的，我必须单击`Refresh`查看器上的按钮。这就是为什么我需要从代码中刷新它。

下面是代码。我找不到我做错了什么。

```
Private Sub Window_Loaded(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles MyBase.Loaded

        Dim cryRpt As New ReportDocument()
        Dim crtableLogoninfos As New TableLogOnInfos()
        Dim crtableLogoninfo As New TableLogOnInfo()
        Dim crConnectionInfo As New ConnectionInfo()
        Dim CrTables As Tables

        Dim startupPath As String = Directory.GetParent(Directory.GetCurrentDirectory()).Parent.FullName
        cryRpt.Load(startupPath & "\Reports\IrReport2.rpt")

        Dim connectionString As String = ConfigurationManager.ConnectionStrings("ReportConnStr").ConnectionString
        Dim conn = New SqlConnectionStringBuilder(connectionString)

        crConnectionInfo.ServerName = conn.DataSource
        crConnectionInfo.DatabaseName = conn.InitialCatalog
        crConnectionInfo.UserID = conn.UserID
        crConnectionInfo.Password = conn.Password

        CrTables = cryRpt.Database.Tables
        For Each CrTable As CrystalDecisions.CrystalReports.Engine.Table In CrTables
            crtableLogoninfo = CrTable.LogOnInfo
            crtableLogoninfo.ConnectionInfo = crConnectionInfo
            CrTable.ApplyLogOnInfo(crtableLogoninfo)
        Next

        Me.irRapportViewer.ViewerCore.ReportSource = cryRpt
        Me.irRapportViewer.ViewerCore.ReuseParameterWhenRefresh = True
        Me.irRapportViewer.ViewerCore.RefreshReport()

    End Sub 
```

XAML 如下

```
<Window x:Class="IrRptWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cr="clr-namespace:SAPBusinessObjects.WPF.Viewer;assembly=SAPBusinessObjects.WPF.Viewer"
    Title="IrRptWindow" Height="700" Width="800" WindowStartupLocation="CenterScreen">
    <Grid>
        <cr:CrystalReportsViewer Name="irRapportViewer" ToggleSidePanel="None"></cr:CrystalReportsViewer>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:14:11.857

经过几个小时的到处寻找后，我终于想到为什么不尝试刷新它`ReportDocument`并且令人惊讶的是它的工作原理。我`cryRpt.Refresh()`在将报告设置给查看器之前尝试过。以下是修改后的我的窗口加载事件的最后三行。

```
cryRpt.Refresh()
Me.irRapportViewer.ViewerCore.ReportSource = cryRpt

'Me.irRapportViewer.ViewerCore.ReuseParameterWhenRefresh = True (No Need)
'Me.irRapportViewer.ViewerCore.RefreshReport() (No Need) 
```

在此答案下感谢评论。

# django - 如何使用 Django/python 优化搜索结果

> ID：10207697
> 
> 赞同：1
> 
> 时间：2012-04-18T10:40:19.747
> 
> 标签：django

我正在使用自定义的 mysql 查询，即（在查询中使用多个表并使用“JOIN”）然后我得到了结果。但现在我想改进给定的结果。这怎么可能 ？。如果你知道，请回答我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:36:10.140

您可以尝试使用[`extra()`](https://docs.djangoproject.com/en/1.0/ref/models/querysets/#extra-select-none-where-none-params-none-tables-none-order-by-none-select-params-none)执行自定义 SQL，因为它将返回可以进一步过滤的 QuerySet。如果您正在使用[`raw()`](https://docs.djangoproject.com/en/dev/topics/db/sql/#performing-raw-queries)，您将无法对结果执行任何其他操作。

这是解决该问题的类似问题：[Django: filter a RawQuerySet](https://stackoverflow.com/questions/9135678/django-filter-a-rawqueryset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:46:15.833

返回的结果应该是一个带有字段名称的查询集，所以试试这个

```
result = some_query...
result = result.filter(field_name__lte=value)
result = result.exclude(field_name='EXPIRED') 
```

您可以将**field_name**替换为实际的 field_name。它在这里突出显示。

[Django 查询集](https://docs.djangoproject.com/en/1.4/topics/db/queries/#retrieving-specific-objects-with-filters)

但本质上，当您有一个查询集时，您可以在其上运行过滤器或排除以优化查询集。

# c# - 微软翻译 XML 解析

> ID：10207700
> 
> 赞同：0
> 
> 时间：2012-04-18T10:40:23.437
> 
> 标签：c#, parsing, azure, xml-parsing, translation

我在解析来自 Microsoft Translator (Windows Azure) 的翻译文本时遇到问题。我按照[此处](http://code.msdn.microsoft.com/windowsazure/Walkthrough-Translator-in-7e0be0f7)的示例进行操作，但是，当我尝试在 VS XAML 文本框中显示翻译后的文本时，输出为：System.Data.Services.Client.QueryOperationResponse`1[Microsoft.Translation]。

提交的查询是正确的，但是当我在浏览器中输入它时，它不会在屏幕上返回翻译（它只显示文本“翻译”和提交的时间），但是页面源给出了一个 XML 文档，并且翻译正确`Text`标签内。

这是我的 C# 代码：

```
var serviceRootUri = new Uri("https://api.datamarket.azure.com/Bing/MicrosoftTranslator/");
var accountKey = "correct account key";
TranslatorContainer tc = new TranslatorContainer(serviceRootUri);
tc.Credentials = new NetworkCredential(accountKey, accountKey);

var translationQuery = tc.Translate(NameInput.Text, "en", "es");
textBox1.Text = translationQuery.Execute().ToString(); 
```

页面源（XML 输出）：

```
> <feed xmlns:base="https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/Translate"
> xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices"
> xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"
> xmlns="http://www.w3.org/2005/Atom">
> <title type="text" />
> <subtitle type="text">Microsoft Translator</subtitle>
> <id>https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/Translate?Text='Mundo'&amp;To='en'&amp;From='es'&amp;$top=100</id>
> <rights type="text" />
> <updated>2012-04-18T10:02:42Z</updated>
> <link rel="self" href="https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/Translate?Text='Mundo'&amp;To='en'&amp;From='es'&amp;$top=100"/>
> <entry>
> <id>https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/Translate?Text='Mundo'&amp;To='en'&amp;From='es'&amp;$skip=0&amp;$top=1</id>
> <title type="text">Translation</title>
> <updated>2012-04-18T10:02:42Z</updated> 
> <link rel="self" href="https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/Translate?Text='Mundo'&amp;To='en'&amp;From='es'&amp;$skip=0&amp;$top=1"/>   
> <content type="application/xml"> 
> <m:properties> <d:Text m:type="Edm.String">World</d:Text> </m:properties>
> </content>
> </entry>
> </feed> 
```

我尝试从 XML 中提取翻译后的文本，遵循[此处](https://stackoverflow.com/questions/2635618/parse-xml-from-string)、[此处](https://stackoverflow.com/questions/8194155/c-sharp-parse-xml-file)和[此处](https://stackoverflow.com/questions/642293/how-do-i-read-and-parse-an-xml-file-in-c)以及 Linq 中的改编代码，但它不会从未保存的文件中读取。使用已弃用的 Bing 翻译器，我设法使用命令获取已解析的文本，但该`XElement.Parse(translatedText).Value`命令现在不起作用。有没有办法从这个文档中读取（从页面源解析），或者任何其他方式来获取翻译文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:37:28.917

你得到的输出看起来像一个提要。.NET 框架已经有一个类可以让您轻松使用源，即**SyndicationFeed**类。在自己构建解析器之前，我建议你先看看这个类，看看它是否已经满足你的需求。

资源：http: [//msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)

**更新：使用 SyndicationFeed 解析 XML 输出的示例**

```
 var settings = new XmlWriterSettings
        {
          Indent = true,
          IndentChars = " ",
          OmitXmlDeclaration = true,
          Encoding = new UTF8Encoding(false),
        };

        using (var textReader = new StringReader(<YOUR STRING HERE>))
        {
            var xmlReader = XmlReader.Create(textReader);
            var feed = SyndicationFeed.Load(xmlReader);

            foreach (var item in feed.Items)
            {
                using (var tempStream = new MemoryStream())
                {
                    using (var tempWriter = XmlWriter.Create(tempStream, settings))
                    {
                        item.Content.WriteTo(tempWriter, "Content", "");
                        tempWriter.Flush();

                        // Get the content as XML.
                        var contentXml = Encoding.UTF8.GetString(tempStream.ToArray());
                        var contentDocument = XDocument.Parse(contentXml);

                        // Find the properties element.
                        var propertiesName = XName.Get("properties", "http://schemas.microsoft.com/ado/2007/08/dataservices/metadata");
                        var propertiesElement = contentDocument.Descendants(propertiesName)
                                                               .FirstOrDefault();

                        // Find all text elements.
                        var textName = XName.Get("Text", "http://schemas.microsoft.com/ado/2007/08/dataservices");
                        var textElements = propertiesElement.Descendants(textName);

                        foreach (var textElement in textElements)
                        {
                            Console.WriteLine("Translated word: {0}", textElement.Value);
                        }
                    }
                }
            }
        } 
```

# java - jstl if-else 循环参数传递

> ID：10207706
> 
> 赞同：1
> 
> 时间：2012-04-18T10:40:58.390
> 
> 标签：java, jstl

我正在使用jstl。

我如何将参数用于测试用例。

```
<c:when test="${myBean.method=='1'}">

</c:when> 
```

我想通过像这样的方法传递参数

```
<c:when test="${myBean.method('para')=='1'}">

</c:when> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-18T11:07:44.650

您可以在 JSTL 2.0 中调用带有参数的函数。但为此，您应该创建一个如下所示的 TLD：

```
<function>
   <name>method</name>
   <function-class>MyBean</function-class>
   <function-signature>
      java.lang.String method(java.lang.String)
   </function-signature>
 </function> 
```

然后你可以访问

```
<c:when test="${cx:method('para')} eq '1'}">
</c:when> 
```

通过此链接获取完整示例。[JSTL 2.0 示例](http://www.javaworld.com/javaworld/jw-05-2003/jw-0523-calltag.html?page=2)

# wpf - 为什么我在 wpf 的 xaml 查看器中出现此异常？

> ID：10207709
> 
> 赞同：3
> 
> 时间：2012-04-18T10:41:10.550
> 
> 标签：wpf

我在 xaml 文件中有这个：

```
<Window x:Class="TestTool.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:RecoConfigTool="clr-namespace:TestTool" Title="Window1" Height="300" Width="300">
<Grid>
        <ItemsControl ItemsSource="{Binding Parents}">
        </ItemsControl>
    </Grid>

    <Window.Resources>
        <DataTemplate DataType="{x:Type RecoConfigTool:Parent}">
            <StackPanel>
                <TextBox Text="{Binding Name}"/>
                <ListView ItemsSource="{Binding Childs}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate DataType="{x:Type RecoConfigTool:Child}">
            <StackPanel Orientation="Horizontal">
                <TextBox Text="{Binding Name}"/>
                <TextBox>,</TextBox>
                <TextBox Text="{Binding Age}"/>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>

</Window> 
```

在设计模式下，我总是看到 xaml 文件的错误，但我可以运行它：

> System.Reflection.TargetInvocationException 调用的目标已引发异常。在 System.RuntimeMethodHandle._InvokeMethodFast（IRuntimeMethodInfo 方法，对象目标，Object[] 参数，SignatureStruct& sig，MethodAttributes methodAttributes，RuntimeType typeOwner）在 System.RuntimeMethodHandle.InvokeMethodFast（IRuntimeMethodInfo 方法，对象目标，Object[] 参数，签名 sig，MethodAttributes methodAttributes , RuntimeType typeOwner) 在 System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfo 文化, Boolean skipVisibilityChecks) 在 System.Delegate.DynamicInvokeImpl(Object[] args) 在 System.Windows。 Threading.ExceptionWrapper.InternalRealCall（委托回调，对象参数，
> 
> System.ArgumentNullException 值不能为空。在 System.RuntimeType.MakeGenericType(Type[] 实例化) 在 Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkUtil.GetRuntimeType(Type type) 在 Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkType.TryGetRuntimeType() 在 Microsoft.VisualStudio.Shell.Design .VsTargetFrameworkUtil.EnsureRuntimeType(Type type) 在 Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkProvider.GetRuntimeType(Type reflectionType) 在 MS.Internal.Package.VSIsolationProviderService.RemoteReferenceProxy.VsReflectionResolver.GetRuntimeType(Type reflectionType) 在 Microsoft.Windows.Design.Metadata Microsoft.Windows.Design.Metadata.ReflectionMetadataContext.Microsoft.Windows.Design 中的 .ReflectionMetadataContext.CachingReflectionResolver.GetRuntimeType（类型反射类型）。`1.Microsoft.Windows.Design.Metadata.Reflection.IReflectionMember.get_MemberInfo() at MS.Internal.Metadata.ClrType.Equals(Object obj) at System.Collections.Generic.ObjectEqualityComparer`1.Equals(T x, T y)
> 在 System.Collections.Concurrent.ConcurrentDictionary `2.TryGetValue(TKey key, TValue& value) at Microsoft.Windows.Design.Metadata.Xaml.XamlExtensionImplementations.XamlMemberFor[TMember,TXaml](TMember member, Factory`2 工厂）在 MS.Internal.Design.Metadata.Xaml.XamlType.d_ *7.MoveNext() 在 MS.Internal.Design.Metadata.Xaml .XamlType.d* _0.MoveNext() 在 Microsoft.Windows.Design.Metadata.Xaml.XamlExtensionImplementations.d_ *7.MoveNext() 在 MS.Internal.VirtualModel.VirtualModelPropertyCollection.d* _0.MoveNext() 在 System.Linq.Buffer`1..ctor(IEnumerable`1 来源）在 System.Linq.Enumerable.ToArray[TSource]（IEnumerable`1 来源）在 MS.Internal.VirtualModel.VirtualModelPropertyCollection.GetEnumerator() 在 MS.Internal.Designer.PropertyEditing.Model.Properties.ModelPropertyMerger.d__0.MoveNext () 在 MS.Internal.Designer.PropertyEditing.PropertyInspector.UpdateCategories 的 MS.Internal.Designer.PropertyEditing.PropertyInspector.UpdateCategories(IPropertyViewManager viewManager, 选择选择, Boolean attachOnly, IEventCodeBehindProxy eventCodeBehindProxy, CategoryList categoryList) , IEntryReader entryReader) 在 MS.Internal.Designer.PropertyEditing.PropertyInspector.RefreshPropertyList(Boolean attachOnly) 在 MS.Internal.Designer.PropertyEditing.PropertyInspector.OnSelectionChangedIdle()

*   更新：

    ```
    public class Parent
    {
        public string Name { get; set; }
        public List<Child> Childs { get; set; }
    }

    public class ParentFactory
    {
        public List<Parent> Parents { get; set; }

        public ParentFactory()
       {
          var child1 = new Child{Name="Peter", Age=10, Married = true};
          var child2 = new Child{ Name = "Mary", Age = 9, Married = false };
          var child3 = new Child{ Name = "Becky", Age = 12, Married = false };

          var parent1 = new Parent{Name="Adam", Childs = new List<Child>(){child1, child2}};
          var parent2 = new Parent{Name="Kevin", Childs = new List<Child>(){child3}};

          Parents = new List<Parent>{parent1, parent2};
       }
    }

    public class Child
    {
        public string Name { get; set; }
        public int Age { get; set; }
        public bool Married { get; set; }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:16:18.767

这是一个 M$[已经确认](http://connect.microsoft.com/VisualStudio/feedback/details/680777/wpf-designer-unhalted-invalidoperationexception-all-over)Visual Studio SP1 错误的问题。卸载 SP1 并在为我解决它之后愉快地工作。这是非常不令人满意的，也是微软礼服的另一个耻辱，但是有什么选择呢？

# visual-studio-2010 - Crystal Report Service Packs 发行说明

> ID：10207713
> 
> 赞同：1
> 
> 时间：2012-04-18T10:41:24.363
> 
> 标签：visual-studio-2010, crystal-reports

我想知道在哪里可以找到最新 Crystal Report SP 的发行说明，例如 13.0.1、13.0.2 和 13.0.3 我想知道修复的错误和新功能是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:31:06.297

试试这个网站：[http](http://www.crystaladvice.com/crystalreports/crystal-reports-2010-sp3) ://www.crystaladvice.com/crystalreports/crystal-reports-2010-sp3好像比较新。

SAP/BusinessObjects 有一些主要的文档问题...试图在他们的支持站点上找到您正在寻找的东西就像跳进一个装满破旧手册和潦草的酒吧餐巾纸的游泳池。

# android - 使用 WebView 或外部浏览器在 Android 上对 InApp 内容进行 PayPal 付款

> ID：10207716
> 
> 赞同：0
> 
> 时间：2012-04-18T10:41:28.767
> 
> 标签：android, paypal, payment-gateway, payment-processing

如果我使用 WebView 或外部浏览器在 Android 上为 InApp 内容收取 PayPal 付款，是否可以使用 Google 的 TOS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:20:15.817

我不确定是否有其他简单的方法可以创建指向贝宝捐赠页面的链接。但是，我相信只要您在捐赠后不提供任何额外功能（即您的应用程序没有更改），就可以这样做。

如果您希望应用程序在捐赠后提供额外的功能，那么您应该在应用程序计费中使用谷歌或创建应用程序的专业版。

# c# - 计算文件中有多少行，不包括某些行

> ID：10207717
> 
> 赞同：0
> 
> 时间：2012-04-18T10:41:36.597
> 
> 标签：c#, streamreader

我有一个包含很多行的文件，我正在使用流式阅读器来读取文件。我需要做的是计算该文件中有多少行，但在某些点，该文件包含一行文本，例如：“-----”。所以我需要做的是计算文件中的行数，不包括包含“-----”的行。

我不想像这样使用流式阅读器：

```
StreamReader reader = new StreamReader();
var x = reader.ReadLine() 
```

并检查 x 是否包含“-----”以及它是否增加了一个计数器，因为这是非常密集的，因为文件将是一个巨大的文件。

任何帮助深表感谢。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:42:55.817

尝试

```
File.ReadLines("path").Count (l => !l.Contains("-----")); 
```

ReadLines 返回 IEnumerable。由于 Linq 的惰性评估，整个文件不会被读入内存以计算行数。

使用

```
File.ReadAllLines(...) 
```

这是我在我的答案中错误地使用的，最初*会将*整个文件读入内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:43:17.993

我会使用：

```
var count = File.ReadLines("foo.txt")
                .Count(line => !line.Contains("-----")); 
```

请注意，[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)以流方式读取，因此实际上一次只会读取一个。

然而，这将*有效地*做你描述自己*不想*做的事情......只是以一种更漂亮的方式。你说这是“非常密集的”——但这在*固有*的工作中。如果您要计算包含特定模式的行数，您显然*必须*阅读每一行。我不明白你认为这是可以避免的。

# php - PHP反序列化数组

> ID：10207720
> 
> 赞同：0
> 
> 时间：2012-04-18T10:41:41.527
> 
> 标签：php, arrays, serialization

所以我正在处理客户购物篮。我发现适合我的目的的最佳方法是将对象（为每个项目属性设置属性）存储在一个数组中。所以我最终得到了一个 ItemObject 类型的对象数组。

我阅读了将这个对象数组存储在 MySQL 表中的最佳方法，即对其进行序列化，从而将其转换为字符串然后存储。然后当我需要它时，我可以使用 php 函数 unserialize() 它。

我就是这样做的……现在我反序列化它，我收到一个错误……下面是 ItemObject 和反序列化部分的代码。如何将该字符串反序列化回 ItemObjects 类型的对象数组，以便可以迭代并打印出每个项目的详细信息？

```
<?php
$dateSelected = $_GET['date'];
echo "Date: ".$dateSelected . "<br>";
mysql_connect();
mysql_select_db("dashjkd");
$result = mysql_query("SELECT order_object FROM orders WHERE orderDate = '".$dateSelected."'");
if(mysql_num_rows($result) > 0){
    $temp;
    while($row = mysql_fetch_assoc($result)){
        $temp = $row['order_object'];
        //print_r($temp);
    }
    echo "Array: <br>";

    $basketObjArray = array();
    $basketObjArray = unserialize($temp);
    print_r($basketObjArray);
    foreach($basketObjArray as $key => $value)
    {
        echo "Key: " . $key;
        echo "Value: ". $value;
    }

}else{
    echo "Something went horribly wrong..try again!";
}
?> 
```

而这个反序列化代码会导致这个错误和奇怪的输出：

```
Date: 2012-04-18
Array:
Array ( [0] => __PHP_Incomplete_Class Object ( [__PHP_Incomplete_Class_Name] => ItemObject [itemNameVar] => whitethoab [itemQtyVar] => 12 [itemPriceVar] => 10 ) [1] => stdClass Object ( [itemNameVar] => woolthoab [itemPriceVar] => 10 [itemQtyVar] => 2 ) [2] => stdClass Object ( [itemNameVar] => shemag [itemPriceVar] => 4 [itemQtyVar] => 1 ) [3] => stdClass Object ( [itemNameVar] => jacket [itemPriceVar] => 12 [itemQtyVar] => 2 ) ) Key: 0
Catchable fatal error: Object of class __PHP_Incomplete_Class could not be converted to string in /home/sdsds/public_html/laundry/customerorder.php on line 21 
```

我设计的 itemObject 非常简单，并且在我尝试在序列化之前显示数组之前工作过：

```
class ItemObject{
                            public $itemNameVar;
                            public $itemQtyVar;
                            public $itemPriceVar;

                        } 
```

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:39:56.970

> 我阅读了将这个对象数组存储在 MySQL 表中的最佳方法

你在哪里读到的？有很多争论为什么这可能是最糟糕的数据存储方式。

顺便说一句，当您尝试反序列化在范围​​内没有类定义的对象时，通常会发生此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:51:00.383

确保您尝试序列化/反序列化的类同时具有`__sleep`魔术`__wakeup`功能。

在这些函数中，您可以定义如何序列化此类或其实例以及如何使用序列化数据重新初始化它们。例如 __wakeup 可用于为对象创建新的数据库连接，因为序列化之前的连接可能不再可用。

[http://www.php.net/manual/en/language.oop5.magic.php#object.sleep](http://www.php.net/manual/en/language.oop5.magic.php#object.sleep)

# jquery - 在 jQuery 中选择下一张图片

> ID：10207721
> 
> 赞同：3
> 
> 时间：2012-04-18T10:41:46.067
> 
> 标签：jquery, image, slider, next

我有以下 HTML 标记。

```
<div class="caption">
    <img class='active' alt='My Caption' src='path/to/image' />
    <div>My Caption</div>
</div>
<div class="caption">
    <img alt='My Caption 2' src='path/to/image' />
    <div>My Caption 2</div>
</div> 
```

标题被放置在带有一些 JS 的 alt 标签的那些 DIV 中。

```
 $('#slider img').each(function() {
            $(this).wrap('<div class="caption"></div>').after('<div>' + $(this).attr('alt') + '</div>');
            $('.caption').width($(this).width()).children('div').each(function() {
                $(this).css({width: $(this).siblings('#slider img').width() -10, opacity: 0.5, display: 'block'});
            });
        }); 
```

我遇到的问题是当我试图让我的图像“滑动”时，它以前工作得很好，但现在我添加了我遇到问题的标题。

这是应该发生的事情：
它遍历每个图像，将类设置为活动并淡入图像，它在没有标题的情况下工作正常，但现在我有标题，它将活动类放在有标题的 div 上.

这是我的 JS

```
function simpleSlider(){
    var $active = $('#slider img.active');

    if($active.length == 0) $active = $('#slideshow img:last');

    var $next = $active.next('img').length ? $active.next()
        : $('#slider img:first');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active');
            $active.css({opacity: 0.0});
        })
} 
```

我如何让它选择下一个图像，而不是 div 说我的标题？

对不起，如果这没有多大意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:54:08.440

当你说：

```
var $next = $active.next('img').length ? $active.next()
        : $('#slider img:first'); 
```

它假定`next`图像是直接邻居（因此`$active.next('img').length`在您的情况下始终为 0，因为周围没有图像）。但是由于您已将图像包装在容器元素中，因此您现在必须使用不同的方法进行遍历。

我会这样做：

```
function simpleSlider() {

    var $active = $('.caption.active');

    if ($active.length == 0) $active = $('.caption:last');

    var $next = $active.next('.caption').length ? $active.next() : $('.caption:first');

    $next.css({
        opacity: 0.0
    }).addClass('active').animate({
        opacity: 1.0
    }, 1000, function() {
        $active.removeClass('active');
        $active.css({
            opacity: 0.0
        });
    })
} 
```

查看**[工作演示](http://jsfiddle.net/b9PF4/)**

**编辑**：

如果这些图像被覆盖并且隐藏的图像应该总是淡出已经显示的图像，您可以通过执行以下操作轻松解决此问题：

一种。将行移到`$active.removeClass('active')`回调之外

和

湾。添加以下CSS：

```
.caption{
z-index: 100;
}
.caption:not(.active){
z-index: 0;
} 
```

请注意，`:not()`伪选择器并不适用于所有浏览器（即旧的 IE），但您会明白的。

这是**[另一个小提琴](http://jsfiddle.net/b9PF4/2/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T10:53:56.823

您将不得不`.next()`在 .caption 级别而不是在`img`级别进行操作。有几种方法可以做到这一点。这是与您使用的逻辑保持一致的一种方式：

```
function simpleSlider(){
    var $active = $('#slider img.active');
    if ($active.length == 0) $active = $('#slideshow img:last');
    var $parent = $active.closest(".caption");

    var $nextParent = $parent.next(".caption");
    if (!$nextParent.length) {
        $nextParent = $parent.siblings(".caption").eq(0);
    }
    var $next = $nextParent.find("img");

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active');
            $active.css({opacity: 0.0});
        })
} 
```

# sorting - vbscript如何按修改日期对子文件夹中的文件进行排序（并用文件的绝对路径打印）

> ID：10207723
> 
> 赞同：0
> 
> 时间：2012-04-18T10:41:50.387
> 
> 标签：sorting, vbscript, batch-file, directory

我需要创建一个 vbs 以在具有子文件夹的文件夹中按修改日期对可设置数量的文件（仅文件）进行排序，并使用绝对路径打印文件，如下所示：

VB：

```
Dim MAX
Dim Folder
MAX = 100
Folder = "C:\Test"
vbscript functions to group all files of all subfolders, and sort them by MOD date... ok
vbscript funciont to make a text file output (This i can't do it by myself)
end 
```

文本文件输出（100 个最新文件）：

```
c:\newest 1st file.txt
c:\subfolder1\newest 2nd file.txt
c:\subfolder7\newest 3rd file.txt
c:\subfolder2\newest 4 file.txt
c:\subfolder8\newest 5 file.txt
c:\subfolder4\newest 6 file.txt
c:\subfolder2\newest 7 file.txt
c:\newest 8 file.txt
c:\subfolder3\newest 9 file.txt
etc... 
```

真的不管解决方案是否可以用批处理来完成，我同意，但我试过这个：

```
Dir /S /TC /O-D 
```

唯一的问题是不要告诉我绝对路径......

**编辑**：哦，当然我试过了：

```
Dir / B / S / TC / O-D 
```

但是 /B 参数意味着我之前所说的命令有很大的不同......

我是说：

```
Dir / S / TC / O-D 
```

该命令将所有子目录中的所有文件（一起）分组并按日期对它们进行排序。（好的！）

```
Dir / B / S / TC / O-D 
```

该命令逐个文件夹处理并排序每个文件并显示它。（坏的！）

所以，如果我只需要对 neswest 100 个文件进行排序，并且如果我使用带有“/B”参数的批处理 dir 命令，我会得到这个：

输出：

```
(Position 1) c:\subfolder1\Newest 1st file of this folder.txt
(Position 2) c:\subfolder1\Newest 2nd fil eof this folder.txt
(Position 3) c:\subfolder1\Old file of this folder.txt
(Position 3) c:\subfolder1\Older file of this folder.txt
(Position 4) c:\subfolder1\Oldest file of this folder.txt
(Position 5) c:\subfolder2\Newest 1st file of this folder.txt
(Position 6) c:\subfolder2\Newest 2nd file of this folder.txt
(Position 7) c:\subfolder2\Old file.txt
etc ... 
```

所以请不要告诉我任何关于使用 /B 参数的 dir，我知道这很好:(。

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T03:54:02.640

这是一个仅使用本机命令的纯批处理解决方案 - 它实际上表现良好:-)

我不确定在 WMIC 命令中是否可能需要转义其他字符，因为我对 WMIC 没有太多经验。但除此之外，我认为这是相当防弹的。

```
::treeNewestFiles FileCount [RootFolder]
::
::  Searches the directory tree rooted at RootFolder and prints
::  the most recently modified files. The number of files printed
::  is limited to a maximum of FileCount. If RootFolder is not
::  specified then the root is the current directory.
::
@echo off
setlocal disableDelayedExpansion

::define base temp file name
set "tempFile=%temp%\fileDates%random%.txt"

::Loop through all folders rooted at %2 (current directory if not specified), and use
::WMIC to list last modified timestamp and full path of each file in each folder.
::The last modified timestamp is in UTC ISO 8601 format, so it sorts properly.
(
  for /r %2 %%F in (.) do (
    set "folder=%%~pnxF"
    set "drive=%%~dF"
    setlocal enableDelayedExpansion
    2>nul wmic datafile where (path='!folder:\^=\\!\\' and drive='%%~dF'^) get lastmodified, name
    endlocal
  )
)>"%tempFile%"

::Convert unicode to ansii
type "%tempFile%" >"%tempFile%2"

::Preserve only data rows
findstr "^[0-9]" "%tempFile%2" >"%tempFile%3"

::Sort the results in descending order
sort /r "%tempFile%3" >"%tempFile%4"

::Print first %1 files in results
set n=0
for /f "usebackq tokens=1*" %%A in ("%tempFile%4") do (
  echo %%B
  set /a "n+=1, 1/(%1-n)" 2>nul || goto finish
)

:finish
del "%tempFile%*" 
```

***新的更快的版本***

我的原始代码为每个目录重新调用了 WMIC。WMIC 每次调用都需要花费大量时间进行初始化。通过构建命令脚本并仅调用一次 WMIC，我将执行时间减少了 45%。性能增益量是树中目录数量的函数。目录数量越多，这个新版本的帮助就越大。我确信通过转换为 VBS 可以获得更多的性能提升，但我认为这不值得付出努力。我相信这个过程现在已经非常优化了。

```
::treeNewestFiles FileCount [RootFolder]
::
::  Searches the directory tree rooted at RootFolder and prints
::  the most recently modified files. The number of files printed
::  is limited to a maximum of FileCount. If RootFolder is not
::  specified then the root is the current directory.
::
@echo off
setlocal disableDelayedExpansion

::define temp folder for temp files
set "tempFolder=%temp%\fildates%random%"
md "%tempFolder%"

::define base path\name for temp files
set "tempFile=%tempFolder%\tempFile.txt"

::Loop through all folders rooted at %2 (current directory if not specified),
::and build a script of WMIC commands that will list last modified timestamps
::and full path of files for each folder. The last modified tamestamp will
::be in ISO 8601 format, so it sorts properly.
(
  echo /append:"%tempFile%1"
  for /r %2 %%F in (.) do (
    set "folder=%%~pnxF"
    set "drive=%%~dF"
    setlocal enableDelayedExpansion
    echo datafile where (path='!folder:\^=\\!\\' and drive='%%~dF'^) get lastmodified, name
    endlocal
  )
  echo quit
)>"%tempFile%"

::Execute the WMIC script
::WMIC creates a temporary file in current directory,
::so change directory 1st so it doesn't interfere with results.
pushd "%tempFolder%"
cmd /c ^<"%tempFile%" wmic ^>nul 2^>nul

::Convert unicode to ansii
type "%tempFile%1" >"%tempFile%2"

::Preserve only data rows
findstr "^[0-9]" "%tempFile%2" >"%tempFile%3"

::Sort the results in descending order
sort /r "%tempFile%3" >"%tempFile%4"

::Print first %1 files in results
set n=0
for /f "usebackq tokens=1*" %%A in ("%tempFile%4") do (
  echo %%B
  set /a "n+=1, 1/(%1-n)" 2>nul || goto finish
)

:finish
popd
rd /q /s "%tempFolder%" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T05:48:55.367

我遵循上面 KH1 的建议：“您需要将所有文件路径和名称与 DateModified 一起加载到一个数组中，对数组进行排序，然后遍历数组并输出文件路径和名称”，但是在批处理文件。下面的程序使用文件的 YYYYMMDDHHMM 修改时间戳作为数组的索引。通过这种方式，数组保持由 Batch SET 命令*自动排序。*参数与上述 dbenham 程序相同：FileCount 和可选的 RootFolder。

```
@echo off
setlocal EnableDelayedExpansion

rem Get order of FileTimeStamp elements independent of regional settings
for /F "skip=1 tokens=2-4 delims=(-)" %%a in ('date^<NUL') do (
   set timeStampOrder=%%a %%b %%c ho mi ap
)

rem For each file in the folder given by %2 (default current one)
for /R %2 %%F in (*.*) do (
   rem Extract FileTimeStamp data (yy mm dd ho mi ap)
   for /F "tokens=1-6" %%a in ("%timeStampOrder%") do (
      for /F "tokens=1-6 delims=/-.: " %%i in ("%%~tF") do (
         set %%a=%%i
         set %%b=%%j
         set %%c=%%k
         set %%d=%%l
         set %%e=%%m
         set %%f=%%n
      )
   )
   rem Adjust hour if needed
   if !ap! equ p set /A "ho=10!ho! %% 100 + 12
   rem Create the array element with proper index
   set "file[!yy!!mm!!dd!!ho!!mi!]=%%~fF"
)

rem At this point the array is automatically sorted

rem Show the first %1 array elements
set n=0
for /F "tokens=2 delims==" %%a in ('set file[') do (
   echo %%a
   set /A n+=1
   if !n! equ %1 goto finish
)

:finish 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T13:53:09.133

让您入门的三步演示：

```
Option Explicit

' ADO Constants needed in this demo
Const adDBTimeStamp      =        135 ' 00000087
Const adVarWChar         =        202 ' 000000CA
Const adClipString       =          2 ' 00000002

' Globals
Dim goFS   : Set goFS = CreateObject("Scripting.FileSystemObject")
Dim gsSDir : gsSDir   = "..."

' Dispatch using comments or re-order
WScript.Quit demoTraversal()
WScript.Quit demoDirWalker()
WScript.Quit demoAdoDirWalker()

' Step00: Understanding recursive traversal
Function demoTraversal()
  walkDir00 goFS.GetFolder(gsSDir)
End Function ' demoTraversal

' Minimal recursive traversal: do something for each file in folder and
' then call same Sub for each subfolder
Sub walkDir00(oDir)
  Dim oElm
  For Each oElm In oDir.Files
      WScript.Echo oElm.DateLastModified, oElm.Path
  Next
  For Each oElm In oDir.SubFolders
      walkDir00 oElm
  Next
End Sub ' walkDir00

' Step01: Recursive traversal with Class
' Use an object to abstract the 'something' action(s) and to augment
' state (count)
Function demoDirWalker()
  Dim oDirWalker : Set oDirWalker = New cDirWalker01.init()
  walkDir01 goFS.GetFolder(gsSDir), oDirWalker
  WScript.Echo oDirWalker.Count, "files seen"
End Function ' demoTraversal

Class cDirWalker01
  Private m_nCount
  Public Function init()
    Set init    = Me
    m_nCount    = 0
  End Function ' init
  Public Sub processFile(oFile)
    ' add bool expression or function to filter
    WScript.Echo oFile.DateLastModified, oFile.Path
    m_nCount = m_nCount + 1
  End Sub ' processFile
  Public Property Get Count()
    Count = m_nCount
  End Property ' Count
End Class ' cDirWalker01

Sub walkDir01(oDir, oDirWalker)
  Dim oElm
  For Each oElm In oDir.Files
      oDirWalker.processFile oElm
  Next
  For Each oElm In oDir.SubFolders
    ' add bool expression or DirWalker.method to filter
      walkDir01 oElm, oDirWalker
  Next
End Sub ' walkDir00

' Step02: Solution (POC)
Function demoAdoDirWalker()
  Dim oDirWalker : Set oDirWalker = New cAdoDirWalker.init()
  walkDir01 goFS.GetFolder(gsSDir), oDirWalker
  oDirWalker.sort "sPath ASC, dtLM ASC"
  WScript.Echo oDirWalker.getResultString()
  oDirWalker.sort "dtLM DESC, sPath ASC"
  WScript.Echo oDirWalker.getResultString()
End Function ' demoAdoDirWalker

Class cAdoDirWalker
  Private m_oRS
  Public Function init()
    Set init  = Me
    Set m_oRS = CreateObject("ADODB.Recordset")
    m_oRS.Fields.Append "dtLM" , adDBTimeStamp
    m_oRS.Fields.Append "sPath", adVarWChar, 255
    m_oRS.Open
  End Function ' init
  Public Sub processFile(oFile)
    m_oRS.AddNew
    m_oRS.Fields("sPath").Value = oFile.Path
    m_oRS.Fields("dtLM" ).Value = oFile.DateLastModified
    m_oRS.Update
  End Sub ' add
  Public Sub sort(sWhat)
    m_oRS.sort = sWhat
  End Sub ' sort
  Public Function GetResultString()
    m_oRS.MoveFirst
    GetResultString = m_oRS.GetString(adClipString, , " | ", vbCrLf, "NULL")
  End Function ' GetResultString
End Class ' cAdoDirWalker 
```

主要思想是使用断开连接的 ADO 记录集来存储和排序文件夹树中的文件集合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T18:00:46.483

您可以使用`for`命令和 ~ 语法来完成它（请参阅 参考资料`for /?`）：

```
(for /r %A in (*) do @echo %~tA %A ) | sort /r 
```

括号的使用允许单个重定向 od whole `for`to `sort`。没有括号 each`echo`将被重定向到 individual `sort`，因此不会进行排序。

编辑：正如 Ekkehard.Horner 指出的那样，上述代码仅适用于日期以 yyyy-mm-dd 格式打印的区域。在以 mm/dd/yyyy 格式打印日期的区域中，您可以使用以下批处理文件：

```
@Echo Off
setlocal enabledelayedexpansion

if "%1"=="list" goto :list
%0 list | sort /r

endlocal
goto :EOF

:list
for /r %%A in (*) do (
  set t=%%~tA
  echo !t:~6,4!-!t:~0,2!-!t:~3,2! %%A
)
goto :EOF 
```

我没有设法在批处理文件中使用括号重复该技巧，因此脚本使用参数调用自身，使其打印文件列表，然后对输出进行排序。通过使用`%variable~:start-length%`语法（请参阅`set /?`）和延迟变量扩展将日期转换为 yyyy-mm-dd 格式。它不像 dbenham 的解决方案那样防弹，但它确实有效。

# linux - -b 参数在 csh 中有什么作用？

> ID：10207736
> 
> 赞同：0
> 
> 时间：2012-04-18T10:42:29.793
> 
> 标签：linux, shell, csh, tcsh

我正在查看具有以下 shebang 行的 tcsh 脚本：

```
#!/bin/tcsh -fb

# then executes some commands 
```

-b 有什么作用？

从手册页：

> -b 从选项处理中强制“中断”，导致任何进一步的 shell 参数被视为非选项参数。其余参数不会被解释为 shell 选项。这可用于将选项传递给 shell 脚本，而不会造成混淆或可能的诡计。如果没有此选项，shell 将不会运行设置用户 ID 脚本。

但是我真的不明白这是什么意思...

一个例子会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:40:48.893

例如，假设您有一个名为的脚本，`--help`并且您想使用以下命令执行它`tcsh`：

```
tcsh --help 
```

这显然行不通。`-b`强制`tcsh`停止查找参数并将命令行的其余部分视为文件名或脚本的参数。因此，要运行上述奇怪命名的脚本，您可以这样做

```
tcsh -b --help 
```

# php - 将链接值传递给 ajax 函数 onclick 事件

> ID：10207741
> 
> 赞同：0
> 
> 时间：2012-04-18T10:42:48.350
> 
> 标签：php, javascript, html, ajax

我有一个包含一些数据的链接

例如

```
<li><a href="" onclick="getcategory(this);"><?php echo $result22['category']; ?></a></li> 
```

我希望这个链接将此`$result22['category'];`值传递给 ajax 函数我正在尝试这个

```
<script type="text/javascript">
function getcategory(cat)
{
var id = cat.value;
alert("hi" + id);
}
</script> 
```

但它在警报框中显示 hi undefined

做错了什么？`$result22['category'];`在警告框中没有得到正确的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:46:33.940

由于`cat`是一个`a`元素，它不会有一个`value`属性。使用[`textContent`](https://developer.mozilla.org/En/DOM/Node.textContent)or `innerText`（或者`innerHTML`如果可能有子元素）：

```
function getcategory(cat) {
    var id = cat.textContent;
    alert("hi" + id);
} 
```

通常只有具有 value 属性的表单控件（`input`例如元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:49:15.890

为什么不这样做呢？

```
<li><a href="" onclick="getcategory('<?= $result22['category']; ?>');"><?php echo $result22['category']; ?></a></li>

<script type="text/javascript">
function getcategory(content) {
  alert(content);
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:49:53.673

试试这个..

```
<li><a href="" id=<?php echo $result22['category']; ?> onclick="getcategory(this.id);"><?php echo $result22['category']; ?></a></li>

 <script type="text/javascript">
  function getcategory(cat)
  {
       //var id = cat.value;
       alert("hi" + cat);
  }
  </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:49:58.590

如果您不使用单独的 javascript 文件来绑定 onClick 处理程序，我会建议您输出到函数中：

```
<li>
    <a href="" onclick="getcategory('<?php echo $result22['category']; ?>');">
        <?php echo $result22['category']; ?>
    </a>
 </li> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T10:51:43.953

```
<a href="" onclick="getcategory(this); return false;">hello</a>
<script type="text/javascript">
    function getcategory(ele) {
        var id = ele.innerHTML;
        alert(id);
    }
</script> 
```

# java - 如何最小化我的应用程序使用的内存？

> ID：10207742
> 
> 赞同：3
> 
> 时间：2012-04-18T10:42:49.513
> 
> 标签：java, optimization, memory-management

我正在编写一个具有 ~30 类的 Java/Swing 应用程序，我的问题是当我运行我的程序时，它会加载超过**150 M**的内存，这正常吗？由于应用程序有 4 个线程，解析一些 XML 文件，加载一些图标文件，并绘制一些 Jfreechat 图表。如果不是，我该怎么做才能最大程度地减少应用程序使用的内存量，是否会影响某些变量为空帮助？是加载一次 XML 文件以在所有应用程序生命周期帮助中使用它们，还是每次需要它们时都必须加载它们？还有其他一些对我有帮助的提示吗？

PS：我使用 8G 内存计算机进行开发，以防影响我的程序使用的内存。

**编辑：**似乎该程序没有占用所有 150MB，因为我通过在我的应用程序中运行此代码从 linux 上的 top 命令获取此值，正如[vilmantas](https://stackoverflow.com/users/11662/vilmantas-baranauskas)建议我的那样：

```
 long free = Runtime.getRuntime().freeMemory();
   long total = Runtime.getRuntime().totalMemory();
   long max = Runtime.getRuntime().maxMemory();
   long used = total - free; 
```

我发现他占用的内存要少得多（~40MB），所以我决定使用**“-Xmx40M”**参数运行它，并且在 Top 命令中减少了 40% 以上的内存使用量。自从JVM *（据我所知）*有自己的进程以来，谁占用了其余内存的问题**？**以及如何使此操作自动**？**，因为在选择不合适的值时，您可以像我一起使用**“ -XMX30M”**参数来获得内存异常：

```
 Exception in thread "Thread-2" java.lang.OutOfMemoryError: Java heap space 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:47:49.883

这是。这是 Java，通常您的 VM/GC 会为您完成这项工作。担心内存使用何时以及是否成为问题。
如果您愿意，有几种工具可以帮助您分析正在发生的事情。[如何监控 Java 内存使用情况？](https://stackoverflow.com/questions/1058991/how-to-monitor-java-memory-usage)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T10:51:52.643

`null`如果引用变量的生命周期大于引用实例，则将变量设置为有助于防止内存泄漏。因此，应该在整个应用程序生命周期中保持不变的变量最好不要保持对短期使用的临时对象的引用。

如果您擅长仅加载一次 XML 信息，则仅加载一次 XML 会有所帮助。这意味着，如果不是通过您的应用程序更改了 XML，并且您需要获取更新 - 您将不得不重新加载 XML（并且如果不再需要已弃用的 XML 信息 - 摆脱它）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T10:52:47.207

您可以使用[http://www.eclipse.org/mat/](http://www.eclipse.org/mat/)之类的 java 内存堆分析器来识别应用程序中占用大部分内存的部分。然后，您可以优化您的数据结构，或者通过将所有对数据的引用设置为 null 来决定释放部分数据。

对不再需要的数据的意外引用也称为“内存泄漏”。设置那些对 null 的引用将导致垃圾收集器将其从 java 内存堆中删除。

沿着这条线，您可能会发现[WeakReference](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html "弱引用")很有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T13:18:19.750

你在哪里观察到那些 150M？这是你的 JVM 进程占用了多少（例如在 linux/unix 上的*top*命令中可见）还是你的应用程序真正使用（和必要）的内存？

当您的应用程序运行时，尝试编写以下 4 个值：

```
 long free = Runtime.getRuntime().freeMemory();
    long total = Runtime.getRuntime().totalMemory();
    long max = Runtime.getRuntime().maxMemory();
    long used = total - free; 
```

如果“used”的值远低于 150M，您可以添加 java 启动参数，例如“-Xmx30M”，将应用程序的堆大小限制为 30MB。请注意，在这种情况下，JVM 进程仍将占用 30MB 以上的空间。

JVM 的内存使用有些棘手。

# audio - 如何通过 gstreamer 将 pcap 转换为带有视频和音频的 avi 文件？

> ID：10207752
> 
> 赞同：1
> 
> 时间：2012-04-18T10:43:35.533
> 
> 标签：audio, video, gstreamer, pcap, avi

我需要读取一个 pcap 文件并使用 gstreamer 将其转换为带有音频和视频的 avi 文件。

如果我尝试以下命令，它仅适用于生成视频文件。

# 仅视频

**gst-launch-0.10 -m -v filesrc location=h264Audio.pcap ！pcapparse src-port=44602 \ !"application/x-rtp, payload=96" ！rtph264depay！“视频/x-h264，宽度=352，高度=288，帧率=（分数）30/1”\！ffdec_h264 ！视频速率！ffmpeg色彩空间\！！文件接收器位置=testh264.avi**

# 仅音频

如果我使用以下命令，它仅适用于生成音频文件。

**gst-launch-0.10 -m -v filesrc location=h264Audio.pcap ！pcapparse src-port=7892 \ ! “应用程序/x-rtp，有效载荷=8”！rtppcmadepay！阿拉法德！音频转换！音频重采样！！文件接收器位置=test1audio.avi**

# 视频+音频

当我如下组合两个命令时，我遇到了错误消息——错误：来自元素/GstPipeline：pipeline0/GstFileSrc：filesrc1：内部数据流错误。

**gst-launch-0.10 -m -v filesrc location=h264Audio.pcap ！pcapparse src-port=44602 \ !"application/x-rtp, payload=96" ！rtph264depay！“视频/x-h264，宽度=352，高度=288，帧率=（分数）30/1”\！ffdec_h264 ！视频速率！ffmpeg色彩空间\！队列 ！多路复用器。\ filesrc location=h264Audio.pcap pcapparse src-port=7892 \ ! “应用程序/x-rtp，有效载荷=8”！rtppcmadepay！阿拉法德！音频转换！音频重采样！队列 ！avimux 名称=多路复用器！文件接收器位置=testVideoAudio.avi**

请就这个问题给我一些解决方案或建议。先感谢您。埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:02:09.283

而不是第二个“filesrc！pcapparse”给第一个 pcapparse 一个 name=demux，删除 src-port arg 并从 demux 启动第二个分支。

# tapestry - Tapestry5：不选择单选按钮

> ID：10207755
> 
> 赞同：0
> 
> 时间：2012-04-18T10:43:42.157
> 
> 标签：tapestry

我的 first.tml 页面上有两个单选按钮，当页面呈现时，默认情况下会选择第一个按钮。我不是这样，我的要求是用户选择的单选按钮不是默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:33:58.497

单选按钮是否被选中取决于它的`value`绑定`RadioGroup`：

```
<t:radiogroup t:value="myProperty">
    <t:radio t:value="myRadioButtonValue"/>
</t:radiogroup> 
```

当单选组的值 ( `myProperty`) 等于为按钮指定的值 (`myRadioButtonValue` ) 指定的值时，单选按钮将呈现为选中状态，否则呈现为取消选中状态，就像您所期望的那样。

如果您不希望选择作为默认值，则需要将支持 bean ( `myProperty`) 中的值设置为 null。

# ruby-on-rails - ruby中的条件参数，如何检查nil？

> ID：10207758
> 
> 赞同：1
> 
> 时间：2012-04-18T10:43:48.397
> 
> 标签：ruby-on-rails, ruby, optional-parameters

尝试了以下

```
def pkill(process_name, *host)  
         puts host.nil? # =>  false
         puts host.empty? # =>  true
         puts host # =>  nil
         puts host[0].nil? # => true
    end 
```

现在如果我打电话`send("pkill", blah, nil)`，怎么/为什么是`host`假的？

对红宝石来说很新，所以保持流畅:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:45:09.043

因为它不是 nil，它是一个空数组。

```
def pkill(process_name, *host)  
  host.nil? # => false
  host # => []
  host.empty? # => true
end

pkill 'blah' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:16:55.457

你只是想让主机参数可选吗？的预期用途`*host`是如果您有可变数量的参数。例如，您的方法可以被称为`pkill('blah')`、 或`pkill('blah', 'bloo')`或`pkill('blah', 'bloo', 'bar')`等。

如果你只是想说这`host`不是必需的参数，你应该给它一个默认值。例如，您的方法可能变成

```
def pkill(process_name, host=nil)  
     puts host.nil?
     puts host
end 
```

# android - EditTextView 的单元测试。我该怎么做？

> ID：10207759
> 
> 赞同：4
> 
> 时间：2012-04-18T10:43:52.240
> 
> 标签：android, junit

```
public class LoginActivityTest extends ActivityInstrumentationTestCase2<Login> {

        Login mActivity;
        private EditText username;
        private EditText password;

          @SuppressWarnings("deprecation")
        public LoginActivityTest()
          {
              super("com.main.account.Login",Login.class);
          }

          @Override
        protected void setUp() throws Exception {
              super.setUp();
              mActivity = this.getActivity();

              username = (EditText) mActivity.findViewById(R.id.username);
              password = (EditText) mActivity.findViewById(R.id.password);
                      }

          public void testPreconditions() { 
              assertNotNull(username);
              assertNotNull(password);
            }

          public void testText() {
              assertEquals("hello",username.getText());
              assertEquals("hello123", password.getText());
            }

} 
```

我得到的错误是这样的：

```
04-18 16:03:47.132: I/TestRunner(12376): junit.framework.AssertionFailedError: expected:<hello> but was:<>
04-18 16:03:47.132: I/TestRunner(12376):    at junit.framework.Assert.fail(Assert.java:47)
04-18 16:03:47.132: I/TestRunner(12376):    at junit.framework.Assert.failNotEquals(Assert.java:282)
04-18 16:03:47.132: I/TestRunner(12376):    at junit.framework.Assert.assertEquals(Assert.java:64)
04-18 16:03:47.132: I/TestRunner(12376):    at junit.framework.Assert.assertEquals(Assert.java:71)
04-18 16:03:47.132: I/TestRunner(12376):    at com.crumbs.main.test.LoginActivityTest.testText(LoginActivityTest.java:46)
04-18 16:03:47.132: I/TestRunner(12376):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 16:03:47.132: I/TestRunner(12376):    at java.lang.reflect.Method.invoke(Method.java:507)
04-18 16:03:47.132: I/TestRunner(12376):    at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:204)
04-18 16:03:47.132: I/TestRunner(12376):    at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:194)
04-18 16:03:47.132: I/TestRunner(12376):    at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:186)
04-18 16:03:47.132: I/TestRunner(12376):    at junit.framework.TestCase.runBare(TestCase.java:127)
04-18 16:03:47.132: I/TestRunner(12376):    at junit.framework.TestResult$1.protect(TestResult.java:106)
04-18 16:03:47.132: I/TestRunner(12376):    at junit.framework.TestResult.runProtected(TestResult.java:124)
04-18 16:03:47.132: I/TestRunner(12376):    at junit.framework.TestResult.run(TestResult.java:109)
04-18 16:03:47.132: I/TestRunner(12376):    at junit.framework.TestCase.run(TestCase.java:118)
04-18 16:03:47.132: I/TestRunner(12376):    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
04-18 16:03:47.132: I/TestRunner(12376):    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
04-18 16:03:47.132: I/TestRunner(12376):    at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
04-18 16:03:47.132: I/TestRunner(12376):    at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448) 
```

那我该如何测试呢？如在，我如何设置 EditText 的值，以便我可以在这里测试它？

文档有点分散。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T11:30:34.747

> 那我该如何测试呢？如在，我如何设置 EditText 的值，以便我可以在这里测试它？

虚拟测试 EditText.setText() 方法没有多大意义，但是，如果您坚持，请执行以下操作：

```
public void testText() {
  // simulate user action to input some value into EditText:
  final EditText mUsername = (EditText) mActivity.findViewById(R.id.username);
  final EditText mPassword = (EditText) mActivity.findViewById(R.id.password);
  mActivity.runOnUiThread(new Runnable() {
    public void run() {
      mUsername.setText("hello");
      mPassword.setText("hello123");
    }
  });

  // Check if the EditText is properly set:
  assertEquals("hello", mUsername.getText());
  assertEquals("hello123", mPassword.getText());
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:46:58.120

它工作得很好..它只是说你的测试用例失败了，因为 EditText 中的文本不等于你比较的文本..试试这个/..

```
 @Override
            protected void setUp() throws Exception {
                  super.setUp();
                  mActivity = this.getActivity();

                  username = (EditText) mActivity.findViewById(R.id.username);
                  password = (EditText) mActivity.findViewById(R.id.password);

                          }

              public void testPreconditions() { 
                  assertNotNull(username);
                  assertNotNull(password);
                }

              public void testText() {
//now that it will pass the test case without Exception..
//but if you want to compare text then you may have to set it in xml and then compare it.. doing it in onCreate() of Login may also work.. 
                  assertEquals("",username.getText());
                  assertEquals("", password.getText());
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-01T11:52:14.540

这种技术的好处是能够在测试运行时看到正在输入的测试字符串。

此方法会将字符串写入 editText 元素，其中密码是您的测试字符串。它应该被添加到仪器测试类（它扩展了 ActivityInstrumentationTestCase2）

```
private void addPassword(final String password) {
    final EditText pw = (EditText) activity.findViewById(R.id.someId);
    // Send string input value
    getInstrumentation().runOnMainSync(new Runnable() {
        @Override
        public void run() {
            pw.requestFocus();
        }
    });
    getInstrumentation().waitForIdleSync();
    getInstrumentation().sendStringSync(password);
    getInstrumentation().waitForIdleSync();
} 
```

然后，您可以使用检索文本

```
 EditText pw = (EditText)findViewById(R.id.someId);
    final String entry = pw.getText().toString().trim(); 
```

并比较它们是否相等

```
 assertEquals(TEST_STRING, entry); 
```

希望这可以帮助。更多信息在这里[http://developer.android.com/training/activity-testing/activity-functional-testing.html](http://developer.android.com/training/activity-testing/activity-functional-testing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-31T00:42:51.823

您可以使用与`TouchUtils`. 这是我所做的：

使用静态方法创建一个`TextUtil`类，使其易于使用

```
package org.dashee.venus;

import android.app.Activity;
import android.widget.TextView;

/**
 * Provide a Text utility where a view text can be changed
 * by running inside a thread
 */
public class TextUtils
{
    public static void setText(Activity activity, final TextView view, final String text)
    {
        activity.runOnUiThread(
                new Runnable()
                {
                    @Override
                    public void run ()
                    {
                        view.setText(text);
                    }
                }
        );
    }
} 
```

然后你可以在你的 testMethod 中调用它

```
public void testText()
{
    TextView email = this.getActivity().findViewById(R.id.email);
    TextUtil.setText(this.getActivity(), email, "example@hello.com");
    assertEquals("example@hello.com", email.getText());
} 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-19T21:40:38.360

我知道这是一个非常古老的帖子，这个解决方案怎么样：

```
 @Before
public void init() {
    MockitoAnnotations.initMocks(this);

    when(rootView.findViewById(R.id.button_logout)).thenReturn(buttonLogout);
    when(rootView.findViewById(R.id.button_unlock)).thenReturn(buttonUnlock);
    when(rootView.findViewById(R.id.ScreenLock_PasswordTextField)).thenReturn(passwordField);

    when(passwordField.getText()).thenReturn(Editable.Factory.getInstance().newEditable("asd"));
    when(application.getPassword()).thenReturn("asd");

    sut = new ScreenLockPresenterImpl(application, rootView, screenLockListener,
            logoutButtonClickListener);
}

@Test
public void testOnClickWhenOk() {
    sut.onClick(null);

    verify(passwordField).getText();
    verify(screenLockListener).unLock();
} 
```

我认为这就是您要寻找的内容： **when(passwordField.getText()).thenReturn(Editable.Factory.getInstance().newEditable("asd"));**

# http - 如何使用 request 或 http 模块将 gzip 页面读入字符串

> ID：10207762
> 
> 赞同：15
> 
> 时间：2012-04-18T10:43:55.770
> 
> 标签：http, node.js, request, zlib

我发现 js 中的请求模块无法正确处理 gzip 或膨胀格式的 http 响应。

例如：

```
request({url:'some url'}, function (error, response, body) {
   //if the content-encoding is gzip, the body param here contains binaries other than readable string. And even worse after you convert the body to buffer, u even can not gunzip it.
} 
```

所以我想使用官方文档中的示例代码。

```
var request = http.get({ host: 'izs.me',
                         path: '/',
                         port: 80,
                         headers: { 'accept-encoding': 'gzip,deflate' } });
request.on('response', function(response) {
  var output = fs.createWriteStream('izs.me_index.html');

  switch (response.headers['content-encoding']) {
    // or, just use zlib.createUnzip() to handle both cases
    case 'gzip':
      response.pipe(zlib.createGunzip()).pipe(output);
      break;
    case 'deflate':
      response.pipe(zlib.createInflate()).pipe(output);
      break;
    default:
      response.pipe(output);
      break;
  }
}); 
```

问题是代码正在将网页写入文件，我希望它可以将页面写入字符串，以便我可以处理页面。我找不到像'StringStream'这样的类。

如果有人对此有任何想法，那就太好了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-15T14:33:39.893

将响应通过管道传输到 gzip 流并像使用原始响应对象一样使用它。

```
var req = http.request(options, function(res) {
    var body = "";

    res.on('error', function(err) {
       next(err);
    });

    var output;
    if( res.headers['content-encoding'] == 'gzip' ) {
      var gzip = zlib.createGunzip();
      res.pipe(gzip);
      output = gzip;
    } else {
      output = res;
    }

    output.on('data', function (data) {
       data = data.toString('utf-8');
       body += data;
    });

    output.on('end', function() {
        return next(false, body);
    });
 });

req.on('error', function(err) {
   next(err);
}) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-21T16:00:54.683

简化示例：

```
var https = require('https');
var gunzip = require('zlib').createGunzip();

var options = {
    host: 'api.stackexchange.com',
    path: '/2.1/info?site=stackoverflow'
};

https.get(options, function(res) {
  var body = '';

  res.pipe(gunzip);

  gunzip.on('data', function (data) {
      body += data;
  });

  gunzip.on('end', function() {
      console.log(JSON.parse(body));
  });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-04T02:06:49.857

我遇到了类似的问题，想继续使用该`request`库而不是内置的 http 模块。我在这里讨论了两种工作方法：http: [//nickfishman.com/post/49533681471/nodejs-http-requests-with-gzip-deflate-compression](http://nickfishman.com/post/49533681471/nodejs-http-requests-with-gzip-deflate-compression)。其中一个类似于@Teemu 的答案，而另一个使用流。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-26T07:04:44.720

request 模块处理 gzip 响应。我们所要做的就是在 opts 中设置 'gzip' 属性。有关详细说明，请访问以下链接。那里我已经用例子清楚地解释了。

[https://stackoverflow.com/a/38582506/5878471](https://stackoverflow.com/a/38582506/5878471)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-10T13:46:46.740

在 utf-8 编码的情况下，@Dawid 和 @Teemu 的答案有时会破坏答案中的字符。这段代码效果更好：

```
function getGzipped(url, cb) {
    // downloads gzipped file
    http.get(url, function(res) {

        let chunks = [];

        res.on('data', function(chunk) {
            chunks.push(chunk);
        });
        res.on('end', function() {
            let buffer = Buffer.concat(chunks);
            zlib.gunzip(buffer, function(err, decoded) {
                if (err) throw err;
                cb(decoded && decoded.toString());
            });
        });
    });
} 
```

# pdf - 如何生成可在 Mac Preview 和 Adob e Reader 中使用的 PDF 表单？

> ID：10207764
> 
> 赞同：2
> 
> 时间：2012-04-18T10:44:03.827
> 
> 标签：pdf, adobe, pdf-generation, preview, pdf-form

我之前有一个 Elance 承包商为我生成了一个 PDF 表格，用于开具发票。

我喜欢这个表格，但我只能使用 Adob​​e Reader(Mac) 而不是 Preview 打开它。

最近，我遇到了一个可以使用 Preview 和 Adob​​e Reader 打开和填写的表格。

看[这里](http://cl.ly/Fx0d)

我的问题是，如何生成可以在 Preview 和 Adob​​e Reader 中打开的 PDF 表单？

我要求两者：

*   手动生成（使用软件或应用程序，如 Word 或 Adob​​e Professional PDF）

*   以编程方式（使用代码或库，最好是开源的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:50:40.217

PDF 表单有两种主要类型，[AcroForms](http://en.wikipedia.org/wiki/Acroforms#Interactive_elements)和[XFA 表单](http://en.wikipedia.org/wiki/XFA)。虽然我没有对此进行测试，但我怀疑如果您希望 PDF 表单与 Preview 应用程序一起使用，那么如果您避免使用 XFA 表单（通常是由 Adob​​e LiveCycle 生成的 PDF 表单）和在 PDF 文件中嵌入 javascript 代码就足够了. 例如，使用“清除表单”、“打印”和“提交”等操作按钮的 PDF 表单将始终涉及一些 javascript 代码。

允许您创建这些表单的库的建议将取决于您要用于创建它们的操作系统、编程语言等。这个[问题](https://stackoverflow.com/questions/210029/pdf-libraries)似乎有一个广泛的此类库列表。

# hibernate - 休眠条件：havin count(.), in

> ID：10207768
> 
> 赞同：2
> 
> 时间：2012-04-18T10:44:13.250
> 
> 标签：hibernate, many-to-many, hibernate-criteria

我有文章和标签之间的多对多关系，现在需要做这样的事情：

```
 select * from article where count(article.tags in someListOfTags ) >= n 
```

我怎么能用休眠标准做到这一点？

感谢所有提示:)

我正在使用休眠 4.1.1

# java - Java DOM getElementByID

> ID：10207774
> 
> 赞同：2
> 
> 时间：2012-04-18T10:44:30.393
> 
> 标签：java, xml, dom, xml-parsing, domparser

我在 Java 中使用 DOM 解析器将子节点添加到现有节点中。

我的 XML 是

```
<?xml version="1.0" encoding="iso-8859-1"?>
 <chart> 
<chart renderTo="pieContainer" defaultSeriesType="pie" zoomType="xy" plotBackgroundColor="null" plotBorderWidth="null"  plotShadow="false"></chart>
<legend id="legendNode">
  <align>center</align>
  <backgroundColor>null</backgroundColor>
  <borderColor>#909090</borderColor> 
  <borderRadius>25</borderRadius>
</legend>
 </chart> 
```

有没有办法直接在现有节点下添加子节点？我可以使用这样的东西吗？

```
Node myNode = nodesTheme.item(0);
this.widgetDoc.getElementById("/chart/legend").appendChild(myNode); 
```

**我的代码**

```
import org.w3c.dom.*;
import javax.xml.parsers.*;
public class TestGetElementById {
    public static void main(String[] args) throws Exception {

        String widgetXMLFile = "piechart.xml";
        DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();

        domFactory.setNamespaceAware(true);
        DocumentBuilder docBuilder = domFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(widgetXMLFile);
        Node n = doc.getElementById("/chart/legend");
        //Node n = doc.getElementById("legendTag");

        Element newNode = doc.createElement("root");
        n.appendChild(newNode);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T11:58:09.800

编辑：对原始问题：是的，appendChild 的工作方式与您计划的方式相同，问题在于 getElementById。

NullPointerException 表示没有具有该 ID 的元素。javadoc给出了它：

[http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Document.html#getElementById(java.lang.String)](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Document.html#getElementById(java.lang.String))

> DOM 实现应使用属性 Attr.isId 来确定属性是否属于 ID 类型。

并进一步在 Attr 的文档中：

[http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Attr.html#isId()](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Attr.html#isId())

所以基本上你的文档需要一个 DTD 或一个模式，并且需要设置

```
DocumentBuilderFactory.setValidating(true) 
```

或手动设置 IsId 属性。

我个人使用：（dirty&scala 表示懒惰）

```
import org.w3c.dom.{Document,Node,Attr,Element}

def idify ( n:Node ) {
  if ( n.getNodeType() == Node.ELEMENT_NODE ){
        val e = n.asInstanceOf[Element ]
        if (e.hasAttributeNS(null , "id" ) )e.setIdAttributeNS(null , "id" , true )
  }
  val ndlist = n.getChildNodes()
  for ( i <- 0 until ndlist.getLength ) idify(ndlist.item(i) )
} 
```

肯定有更专业的方法可以做到这一点，而不涉及起草完整的 DTD/模式。如果有人知道，我也很好奇。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:07:49.687

`getElementById`专门用于通过`id`属性检索 DOM 元素。试试这个：

```
this.widgetDoc.getElementById("legendNode").appendChild(myNode); 
```

有关检索 DOM 节点的其他方法，请查看[`querySelector`](https://developer.mozilla.org/en/DOM/Document.querySelector)和[`querySelectorAll`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll).

# django - Django：在一组用户之间隔离数据的提示

> ID：10207776
> 
> 赞同：0
> 
> 时间：2012-04-18T10:44:38.077
> 
> 标签：django, multiple-databases, django-users, django-orm

我想构建一个 Django 应用程序，其中每个“用户集”可以看到不同的数据，因为他们使用不同的数据库。有没有最佳实践来实现这一目标？

例如，用户A在登录后可以看到和管理自己的数据，而无法看到其他人的数据。

我可以使用 Django 多数据库功能来定义多个数据库并创建一个[自动路由器](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#automatic-database-routing)以根据当前请求的用户指向正确的数据库（将 auth_user 保存在一个公共数据库上）。

最后一次机会，我可以为每个组创建一个不同的应用程序文件夹（唯一的区别是数据库名称），但我更喜欢更智能的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:41:56.207

您可以考虑重用[django 的众多每个对象权限应用程序之一](http://djangopackages.com/grids/g/perms/)。

另一种可能性是制作不同的设置文件。例如，settings_groupA.py：

```
from settings import *
DATABASES = ... 
```

然后你可以使用管理命令，如 syncdb 或 runserver 等...与 --settings 选项：

```
--settings=SETTINGS   The Python path to a settings module, e.g.
                        "myproject.settings.main". If this isn't provided, the
                        DJANGO_SETTINGS_MODULE environment variable will be
                        used. 
```

例子：

```
./manage.py syncdb --settings=settings_groupA
./manage.py runserver --settings=settings_groupA 
```

每组用户使用一个数据库的优点是您可以使您的代码更容易，并让他们对 django.contrib.admin 有本机支持而无需 hack。但是，如果无论如何您要在组中拥有每个对象的权限，那么您最好直接采用第一个解决方案。

# c++ - 删除另一个堆对象时如何删除堆上的对象

> ID：10207780
> 
> 赞同：0
> 
> 时间：2012-04-18T10:44:42.640
> 
> 标签：c++, qt, delete-operator

我有以下源代码：

```
void Processmethod()
{
    QDialog *ProcessMessage = new QDialog;      
    Ui::DialogProcessMessage *Dialog = new Ui::DialogProcessMessage();              
    Dialog->setupUi(ProcessMessage);              //polymorphy
    ProcessMessage->setModal(true);
    ProcessMessage->setAttribute(Qt::WA_DeleteOnClose);
    connect(Dialog->pushButtonAbort, SIGNAL(clicked()), &Prozess, SLOT(kill()));  
    connect(&Prozess6, SIGNAL(finished(int, QProcess::ExitStatus)),  this, SLOT(helper()));
    connect(&Prozess6, SIGNAL(error(QProcess::ProcessError)),  this, SLOT(helper()));
 connect(this,SIGNAL(enablePushButton(bool)),Dialog->pushButtonClose, SLOT(setEnabled(bool)));
    Prozessmeldung->setModal(true);
    ProcessMessage->show();

    processmethodONE();
} 
```

当堆对象 ProcessMessage 被删除（关闭时被删除）时，如何最好地删除堆对象对话框？这两个对象都必须在堆上创建。此外，“Ui::DialogProcessMessage”类是由 ui 文件直接创建的，因此每次更改 ui 文件时都会删除其中的任何更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:50:25.140

您需要对 QDialog 进行子类化，在新类中为您的子对象添加字段，在创建时分配它并添加析构函数，当您的 CustomNewSubclassedQDialog 被销毁时，该析构函数将释放子对象的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:47:20.917

您可以`delete`将`Dialog`对象放在`ProcessMessage`的析构函数中。

您必须对此进行记录，以明确`ProcessMessage`负责`Dialog`. 请注意，这似乎不是一个好主意。最好的方法是在完成后手动删除这两个对象。没有什么限制任何人`Dialog`在自动存储中创建一个，当试图删除它时可能会导致未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:41:02.887

`destroyed(QObject*)`QObject 的所有实例在被删除时都会发出一个信号。Connect`ProcessMessage`的信号到其他一些持久对象的槽，并`Dialog`从那里删除你的堆对象。

参考：[QObject 的 Qt 文档](http://qt-project.org/doc/qt-4.8/qobject.html#destroyed)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T11:44:14.990

是`Ui::DialogProcessMessage`你自己的班级吗？它是从`QObject`? 如果是这样，将`ProcessMessage`指针传递给`Dialog`构造函数作为它的`parent`. 这样`ProcessMessage`就成为负责删除`Dialog`. 即你的`Ui::DialogProcessMessage`类声明应该是这样的：

```
namespace Ui
{
class DialogProcessMessage: public QDialog
{
  Q_OBJECT
public:
  DialogProcessMessage(QObject* parent=0) :
    QDialog(parent)
  { /* ... */ }

  /*
   * more stuff ...
   */
};
} 
```

然后，构造`Dialog`如下：

```
Ui::DialogProcessMessage *Dialog = new Ui::DialogProcessMessage(ProcessMessage); 
```

您可能需要参考[Qt 文档](http://qt-project.org/doc/qt-4.8/objecttrees.html)以获取更多信息。

# database - 存储过程或代码

> ID：10207787
> 
> 赞同：6
> 
> 时间：2012-04-18T10:45:15.457
> 
> 标签：database, stored-procedures, data-mining, database-performance, data-processing

我不是在征求意见，而是在寻求文件方面的更多信息。

我们有很多数据文件（XML、CSV、Plantext 等），需要对它们进行处理、数据挖掘。

首席数据库人员建议使用存储过程来完成任务。基本上，我们有一个临时表，文件在其中被序列化，并保存到一个 clob 或 XML 列中。然后从那里他建议进一步使用存储过程来处理文件。

我是具有 db 背景的应用程序开发人员，在应用程序开发方面更是如此，我可能有偏见，但在数据库中使用这种逻辑似乎是个坏主意，我无法找到任何文档来证明或反对我所指的内容就像将汽车放在火车轨道上以拉动货物一样。

所以我的问题是：当我们谈论正则表达式搜索、搜索和替换 clob 中的数据、dom 遍历、递归时，数据库（Oracle、DB2、MySQL、SqlServer）的性能如何？在相同的问题上，与 Java、PHP 或 C# 等编程语言相比。

**编辑**

所以我正在寻找的是关于特定编程语言与 DBMS 的比较/运行时分析的文档，特别是字符串搜索和替换、正则表达式搜索和替换。XML Dom 遍历。递归方法调用的内存使用情况。尤其是在遇到 10 到 100 GB 的数据时，它们的扩展能力如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:03:59.693

It is better to pull the processing logic out of data layer.Profiling your implementation in Database will be difficult.

You get the freedom and option to choose between libraries and comparing their performance if the implementation is done with any language. Moreover you can choose frameworks like (Spring-Batch for Java) to process bulk volume of data as batch process.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:27:56.650

听起来您要将业务逻辑扔到存储层中。对于您描述的操作，您不应该使用数据库。由于缺乏灵活性，您最终可能会试图为表演者寻找解决方法或创建古怪的解决方案。

还要牢记可维护性。以后有多少人能够维护解决方案？

谈到速度，选择正确的编程语言，您将能够在多个线程中处理数据。最后，您对火车上汽车的感觉是正确的；）

# c# - 使用 object[] 将数据添加到数据表不起作用？

> ID：10207788
> 
> 赞同：0
> 
> 时间：2012-04-18T10:45:21.913
> 
> 标签：c#, .net, datatable

DataTable 的 Add 方法包含使用对象数组将数据添加到表的重载。

我想要一个数组数组，我可以循环并插入到 DataTable 中。下面的代码创建了一个大小为 4000 的数组，并将一个包含 4 个“列”的数组放入外部数组 (ContiguousTradeMem) 的第 0 个元素中。

但是，当我调试 testObject 中（以及缓存中 - ContiguousTradeMem [] ）中的所有数据下方的最后一行时，不会将其复制到 DataTable() 中？

```
//The "array" which we wish to insert into the DataTable
object[] testObject = new object[4];

//Inserts some test data
for (int m = 0; m < 4; m++)
{
    testObject[m] = "test";
}

//A test DataTable
DataTable test = new DataTable();
test.Columns.Add("Col1");
test.Columns.Add("Col2");
test.Columns.Add("Col3");
test.Columns.Add("Col4");

//Put the test "array" into the cache
ContiguousTradeMem[0] = testObject; //The data of testObject is fine here

//Write the cache element to the DataTable
test.Rows.Add(ContiguousTradeMem[0]); //The data is not fine in test.Rows 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:55:26.293

实际上，重载[`DatarowCollection.Add`](http://msdn.microsoft.com/en-us/library/07wwak56.aspx)需要一个`param`类似于参数列表的数组。您可以通过以下方式从数组中初始化和添加 DataRow：

```
var row = test.NewRow();
row.ItemArray = (Object[])ContiguousTradeMem[0];
test.Rows.Add(row); 
```

[参数 C#](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:01:43.587

test.Rows.Add 将现有的 DataRow 对象添加到您的表中。首先，您必须创建新行，然后用您的数据填充它，然后 - 将其添加到您的数据表中。这是VB中的代码，很简单，所以你可以把它翻译成C#:)

```
Dim t As New DataTable
Dim r As DataRow
r = t.NewRow()
r.ItemArray = testObject
t.Rows.Add(r) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:48:48.210

我认为您正在尝试将 4 行（数组）添加到 4 个列式表中。

逻辑上应该是：

```
DataRow newRow = test.NewRow();

newRow [0] = testObject[0];
newRow [1] = testObject[1];
newRow [2] = testObject[2];
newRow [4] = testObject[3];

test.Rows.Add(newRow ); 
```

您也可以传入一个对象数组，如下所示：

```
DataTable dt = new DataTable();
dt.Clear();
dt.Columns.Add("Name");
dt.Columns.Add("Marks");
object[] o = { "Ravi", 500 };
dt.Rows.Add(o); 
```

甚至：

```
dt.Rows.Add(new object[] { "Ravi", 500 }); 
```

# scala - Play 2.0 中的默认配置导致 IOException？

> ID：10207794
> 
> 赞同：3
> 
> 时间：2012-04-18T10:45:47.227
> 
> 标签：scala, playframework, playframework-2.0

这是 Play 2.0 默认配置的错误吗？我刚刚安装了 Play 2.0，当我第一次创建应用程序时，我得到了这个：

```
Error during sbt execution: java.io.IOException: Cannot write parent directory: Path(/home/hanxue/play/myFirstApp/app) of /home/hanxue/play/myFirstApp/app/views 
```

app 子目录没有写权限：

```
hanxue@ubuntu-dev:~/play$ ls -l myFirstApp/
total 16
dr-xr-xr-x 2 hanxue hanxue 4096 2012-03-13 11:22 app 
```

似乎**$PLAY/framework/sbt/boot/**目录需要是全局可写的，否则 play 会抛出一个关于无法创建**/opt/play-2.0/framework/sbt/boot/sbt.boot的 IOException .lock**。这是设计使然吗？

我通过授予它世界可写权限来解决它

```
chmod -R o+w /opt/play-2.0/framework/sbt/boot/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:53:37.020

这不是错误，它只是 sbt 的工作方式（并且 play-2.0 使用 sbt）。Sbt 在启动时第一次下载所有必要的部分，并且 play 的默认行为是所有依赖项都转到同一目录，这是您提取 play-2.0 的地方，因此该目录需要写权限。您可能还需要对 /opt/play-2.0/repository 的写入权限。

# php - $_GET 显示空值

> ID：10207796
> 
> 赞同：2
> 
> 时间：2012-04-18T10:46:08.467
> 
> 标签：php

我有一个`test.php`并且我有以下代码

```
<?php

    if(isset($_GET['p']) or $_GET['p'] != null) {
        echo $_GET['p'];
    } else {
        echo "Not found";
    }

?> 
```

我在下面列出了 url，然后显示了所需的输出

```
Test 1 : http://localhost/example/test.php
output : Notice: Undefined index: p in R:\xampp\htdocs\example\test.php on line 3
        Not found

Test 2 : http://localhost/example/test.php?p
output : blank page

Test 3 : http://localhost/example/test.php?p=
output : blank page

Test 4 : http://localhost/example/test.php?p=1
output : 1 
```

我接受这一点`Test 1`并且`Test 2`是`true` 但何时`Test 2`以及`Test 3`失败的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T10:49:40.770

```
<?php

if(!empty($_GET['p']))
    echo $_GET['p'];
else
    echo "Not found";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:47:44.317

```
if(isset($_GET['p']) and $_GET['p'] != null) {
    echo $_GET['p'];
} else {
    echo "Not found";
} 
```

您需要`and`检查它是否已设置且不为空。

就像其他人指出的那样-您可以使用[`empty()`](http://php.net/manual/en/function.empty.php)：

```
if(!empty($_GET['p'])) {
    echo $_GET['p'];
} else {
    echo "Not found";
} 
```

这将`true`在值为空时返回，以下被认为是空的：

*   `""`（一个空字符串）
*   `0`（0 为整数）
*   `0.0`（0 作为浮点数）
*   `"0"`（0 作为字符串）
*   `NULL`
*   `FALSE`
*   `array()`（一个空数组）
*   `var $var;`（声明的变量，但在类中没有值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:47:43.380

```
<?php

    if(isset($_GET['p']) and $_GET['p'] != null) {
        echo $_GET['p'];
    } else {
        echo "Not found";
    }

?> 
```

您提到的上述代码`or`将采用以下任何一项作为`true` 尝试`and`

```
<?php

    if(isset($_GET['p']) and $_GET['p'] != null) {
        echo $_GET['p'];
    } else {
        echo "Not found";
    }

?> 
```

它会完美运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:47:50.180

您正在使用 OR，因此第二个测试将始终运行。意思是，如果它没有设置，它仍然会尝试访问它。您可以使用 AND 代替 ( `&&`)，因此它只会检查该值是否存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T10:50:07.920

您应该使用`empty()`而不是`isset()`.

```
<?php

if(empty($_GET['p'])) {
    echo "Not found";
} else {
    echo $_GET['p'];
} 
```

# c# - 调试到 .net 源代码对我不起作用

> ID：10207798
> 
> 赞同：2
> 
> 时间：2012-04-18T10:46:27.043
> 
> 标签：c#, asp.net-mvc, debugging

我正在使用 MVC 4 (beta)，并且在尝试测试我编写的 auth 属性时遇到了一些问题。

为了更深入地了解这一点，我正在尝试将调试用于 .net 框架源调试选项，以查看到底出了什么问题。我已按照此处的设置说明进行操作：[http ://weblogs.asp.net/gunnarpeipman/archive/2010/07/04/stepping-into-asp-net-mvc-source-code-with-visual-studio-debugger .aspx](http://weblogs.asp.net/gunnarpeipman/archive/2010/07/04/stepping-into-asp-net-mvc-source-code-with-visual-studio-debugger.aspx)

完成所有这些之后，当我调试我的测试以查看发生了什么时，当我进入调用 .net fw 的代码行时，测试只是终止并给了我正在尝试的异常调试。为了完整起见，这是我的代码：

```
var controller = new MyController();
controller.SetFakeAuthenticatedControllerContext("foo"); // Set up a fake http context for the user

var actionDescriptor = new Mock<ActionDescriptor>();
actionDescriptor.SetupGet(x => x.ActionName).Returns("AddedForTest");

var context = new AuthorizationContext(controller.ControllerContext, actionDescriptor.Object);

var auth = new SamCommandAuthenticationAttribute();
auth.OnAuthorization(context); // On this line the test will just terminate

Assert.Pass(); // This line would never be called. 
```

有谁知道为什么我无法调试到 .net 源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:04:13.683

Microsoft 符号服务器为 .net 框架程序集的子集提供符号。

我不认为 Mvc4 beta 是其中之一......

- - 添加 - -

正如 Bond 在评论中指出的那样，如果您想进入 MVC4 Beta 源，您必须在您的解决方案中包含 mvc 项目并从那里引用它，首先删除对您已安装的 GAC 版本的引用

# c# - 将大数更改为小的标准化数

> ID：10207803
> 
> 赞同：0
> 
> 时间：2012-04-18T10:46:44.783
> 
> 标签：c#, .net, c#-4.0, c#-3.0

这是我的代码 -

```
private void button1_Click(object sender, EventArgs e)
    {

        double number =Convert.ToDouble( textBox1.Text);
        string s = (Math.Round(number, 3)*1000).ToString();

        int norm=1;
        for(int i=0;i<=s.Length-1;i++)
        {
            norm*=10;
        }
        label1.Text =Math.Round((Convert.ToDouble(s)/norm),3).ToString() ;

    } 
```

这实际上应该将 21234,34532 到 2,123 或 75898331 到 7,589（理论上）等数字。当我尝试 75898331 时，它给了我一个意想不到的结果（24.328）。谁能告诉我我在哪里搞砸了？Double 不足以处理如此大的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:49:15.780

不，它没有。当我尝试相同时，

```
double number = Convert.ToDouble("75898331");
string s = (Math.Round(number, 3) * 1000).ToString(); 
```

它给 s 作为“75898331000”所以你试图创建一个溢出的 int（32 位）。尝试制作`norm`一个 Int64 代替。

# php - Xcode 4.1 iOS 咨询 Joomla 通过 PHP 生成数据库

> ID：10207813
> 
> 赞同：2
> 
> 时间：2012-04-18T10:47:25.750
> 
> 标签：php, mysql, ios, xcode, joomla

我正在开发一个 iPhone 应用程序，它需要使用位于我自己的服务器上的 Joomla 生成的数据库。
有很多解决方案，所以为了提高安全性，我决定通过 PHP 与数据库“对话”。

我有一个这样的 PHP 页面：

> www.mypage.com/iphonelogin.php ?username=USER1&password=XXX&option=login

`option`可以是：, `getuserinfo`, `login`,`reset password`等等。

问题是存储在数据库中的密码是加密的。( `MD5(password+Salt):Salt`)

所以，我想知道如何通过以下方式做到这一点：

*   低安全方式：PHP从APP获取纯文本密码，从de DB获取全加密密码。然后 PHP 使用 salt，加密密码并进行比较，然后返回 YES 或 NO 给 APP。

*   其他方式：PHP从APP获取密码REVERSIBLE加密并解密，然后同上。

*   不错的安全方式（很慢）：PHP 从数据库中获取完全加密的密码，然后将 Salt 显示给 APP。APP以Joomla方式对密码进行加密，并将完整的加密密码发送给PHP，由PHP进行比较并返回YES或NO给APP。

我需要高安全性和快速连接，因为每次应用程序需要数据库中的某些内容时，都必须确认登录。

请告诉我要使用什么或其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T05:31:00.427

您应该在客户端 <=> Joomla 服务器设置中编写会话管理功能集。

此工作流程将看到用户只输入一次电子邮件和（普通）密码，然后从服务器请求会话令牌。

然后可以在每次客户端需要来自服务器的数据时验证此令牌。

正如您所指出的，永远不要将数据库直接暴露给客户端。对于任何设置来说，这都是一个坏主意。您应该始终在客户端和服务器之间保留一个接口/API 缓冲区，以消除潜在的安全风险。

# php - Drupal 服务模块 3.x 与 PHP 5.3.2 版本不兼容

> ID：10207817
> 
> 赞同：-1
> 
> 时间：2012-04-18T10:47:38.480
> 
> 标签：php, drupal

我已经安装了 DRUPAL 版本 6.X 。当我安装服务模块 3.X 时，它说这个模块与 PHP 版本 5.3.2 不兼容。由于我升级 PHP 版本的选择有限，所以请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:39:42.067

根据[其 .info 文件](http://drupalcode.org/project/services.git/blob/refs/heads/6.x-3.x:/services.info)，Services 3.x 需要 PHP 5.x。它`hook_requirements()`不包括额外的 PHP 版本检查。所以它应该适用于 PHP 5.2.x。

最好的方法可能是[在 Drupal.org 上报告支持问题](https://drupal.org/node/add/project-issue/services)。首先询问 Service 6.x-3.x 是否设计为与 PHP 5.2.x 兼容。如果是，但安装被拒绝，那么，你有一个错误。如果不是，那么它是一个功能请求。请在服务问题队列中寻求指导。

# linux - 通知远程机器上的工作何时完成

> ID：10207818
> 
> 赞同：-1
> 
> 时间：2012-04-18T10:47:39.417
> 
> 标签：linux

我有两台机器：`my`我正常工作的 PC（GUI 等）和`remote`我运行一些耗时进程的 PC。我想知道当前运行的作业何时`remote`完成。

我有一些简单的解决方案，比如定期检查进程是否`remote`仍在运行

```
# at my:
ssh remote 'ps aux | grep process' | inform_if_finished
# inform_if_finished pops up a notification at the desktop 
```

或完成后ping`my`机器`remote`

```
# at remote:
sh long_job.sh ; ping my 
```

并且 ping 被一个简单的本地守护进程捕获......

但所有这些都是黑客而不是真正的解决方案。有没有标准的方法来处理这种信号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:10:59.903

如果您准备投入（阅读浪费 :)）您的时间，您可以使用 sendmail 程序在程序完成后向您发送邮件。同样可以扩展到在您的手机上发送短信。

# backbone.js - 骨干历史开始不起作用

> ID：10207822
> 
> 赞同：1
> 
> 时间：2012-04-18T10:47:47.133
> 
> 标签：backbone.js

我试图从骨干开始历史，但是我得到了错误：

> 无法调用未定义的方法“开始”

这是完整代码的链接：http: [//pastebin.com/pNsYghgE](http://pastebin.com/pNsYghgE)

我在这段代码之前包含了 jquery、下划线和主干 js，所以我想这应该根据文档工作。我正在使用主干 0.9.2。我在这里拧干什么呢？

**编辑：答案**

我不想创建我的路由器实例，所以我在调用 Backbone.history.start() 之前添加了这段代码：

```
//initialize all routes
_(this.modules()).each(function(module, moduleName)
{
    _(module.routers).each(function(router, routerName)
    {
        new router();
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:04:47.210

`Backbone.history`只能在使用路由定义一个或多个路由器后启动：

[http://backbonejs.org/docs/backbone.html#section-113](http://backbonejs.org/docs/backbone.html#section-113)

您可以在这里看到，`Backbone.history`对象是在定义路由时创建的。我没有看到发布的代码中定义了任何路由器或路由，所以我猜这就是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:22:33.987

执行该行时，骨干仍未加载..

使用

```
$(function() {
  // ...
}); 
```

对于这部分代码，就像您对其他块所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:59:06.447

它接缝很好，您能否提供更多代码，以及您加载 jquery、undescore 和主干的 html 部分。

之前检查主干对象：Backbone.history.start(this.options.historyOptions);

您是否在尝试开始历史记录之前创建了路由器？（德里克·贝利）

# log4j - 带有文件 url 的 log4j appender

> ID：10207825
> 
> 赞同：0
> 
> 时间：2012-04-18T10:47:51.503
> 
> 标签：log4j, appender

我有一个问题，log4j 没有记录到我的文件之一，我不知道为什么。我有一些运行脚本的代码，这些脚本可以添加使用 log4j 记录到文件中的日志记录，我正在尝试创建一个仅记录特定脚本的附加程序。

```
log4j.logger.com.my.class=INFO, JS_LOG
log4j.appender.JS_LOG.layout=org.apache.log4j.PatternLayout
log4j.appender.JS_LOG.Encoding=UTF-8
log4j.appender.JS_LOG.File=${log.outputdir}/js_service.log
log4j.appender.JS_LOG.MaxFileSize=2MB
log4j.appender.JS_LOG.MaxBackupIndex=10
log4j.appender.JS_LOG.Append=true
log4j.appender.JS_LOG=org.apache.log4j.RollingFileAppender
log4j.appender.JS_LOG.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n 
```

上面的附加程序有效，我在我的日志文件中得到了这个

```
2012-04-18 11:25:52,043 [<MD> Inc Msg Dispatch-1 New] INFO  com.my.class.file:/myfile  - info 
```

`com.my.class.file:/myfile`当脚本记录某些内容时，它会使用我的 log4j.properties 文件中的上述配置将其记录到表单的记录器中 。

如果我将以上内容更改为：

```
log4j.logger.com.my.class.file:/myfile=INFO, JS_LOG
log4j.appender.JS_LOG.layout=org.apache.log4j.PatternLayout
log4j.appender.JS_LOG.Encoding=UTF-8
log4j.appender.JS_LOG.File=${log.outputdir}/js_service.log
log4j.appender.JS_LOG.MaxFileSize=2MB
log4j.appender.JS_LOG.MaxBackupIndex=10
log4j.appender.JS_LOG.Append=true
log4j.appender.JS_LOG=org.apache.log4j.RollingFileAppender
log4j.appender.JS_LOG.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n 
```

没有任何内容记录到文件中。我会认为这应该工作？我检索文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:02:55.437

我设法解决了这个问题，它与文件有关：在我的 log4j.properties 中，我将 appender 更改为 file_ 然后在我的代码中，我对文件 url 进行了一些操作以使其与 appender 匹配。

# jquery - 使用 jQuery fadeIn/fadeOut 复制的内容

> ID：10207826
> 
> 赞同：0
> 
> 时间：2012-04-18T10:47:51.567
> 
> 标签：jquery

我目前有一个关于 jQuery 动画的问题......这就是我目前正在做的......我有四个多选菜单，当更改时我希望将选定的值放在一个具有 4 个不同 tbody 标签（区域）的表中我用 ID 制作了独一无二的。我需要 4 个不同的 tbody 区域的原因是由于我显示的数据的性质，它必须按一定的顺序排列。无论如何，我真正的问题是，当用户更改或修改我希望捕获事件的菜单的值时，确定单击了哪个菜单，获取其值（或值）并将其显示在表的适当部分。现在为了时髦（并且由于与选择相关的规则），我希望淡出以前的菜单选择并淡入新的选择。

我已经剥离了我的代码和我所拥有的工作，但是每次我运行该功能（或单击其中一个选择菜单）时，新内容都会被复制两次。旧内容只是消失了，然后新内容消失了......但是我有 2 行而不是 1 行。我运行它的新时间我的内容淡出然后创建了 4 个新行。这是我所拥有的最小化版本......为什么内容重复，我是愚蠢还是什么？

```
$(document).ready(function() {
    changeTable();
});

  function changeTable(){

    var selectArray = ["cat", "catOpt", "tariff", "tariffOpt"], // these are the IDs of the select menus...
        i;

    for(i=0;i<selectArray.length;i++){
        $("#" + selectArray[i]).click(function () {
            if(this.id == "cat"){
                $('#dynamicTableHolder #dtCats').find("td").fadeOut(1000, function(){ 
                    $(this).parent().remove(); // due to problems with jQuery we have to fadeOut the TDs then remove the TR
                    $('#dynamicTableHolder #dtCats').append('<tr><td>'  + $("#cat").val() + '</td><td></td></tr>').hide().fadeIn(1000); // Now let's fade in some new content
                });
            }
        }); 
    }       
  } 
```

这是一个 JSfiddle，所以你可以看到这个问题......

[http://jsfiddle.net/itakesmack/xKZfr/1/](http://jsfiddle.net/itakesmack/xKZfr/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:10:30.590

您的问题出在这一行：

```
$('#dynamicTableHolder #dtCats').find("td") 
```

这是找到多个`td`s 所以你的代码正在执行`td`...

您可以尝试这种方法 - 这将替换表中的当前行：http: [//jsfiddle.net/xKZfr/2/](http://jsfiddle.net/xKZfr/2/)

# android - 如何从包含中引用 id

> ID：10207830
> 
> 赞同：0
> 
> 时间：2012-04-18T10:48:13.423
> 
> 标签：android, android-layout

问题是如何从包含标签中引用 id？

我们来看例子：

我有这样的观点，我想在很多地方重用：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/first_el"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Some txt 1" />
</merge> 
```

现在我想包含这个视图并在下面添加一些其他视图，如下所示：

```
<RelativeLayout>
    <include layout="@layout/above_view"/>
    <TextView
        android:id="@+id/third_el"
        android:layout_alignRight="@id/first_el"
        android:layout_below="@id/first_el"
        android:text="Some txt 2" />
</RelativeLayout> 
```

在这种情况下，我收到错误：

```
Description Resource Path Location Type error: Error: 
No resource found that matches the   given name (at 'layout_alignRight' with value '@id/first_el'). 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:01:45.230

问题可能是因为您在 layout_alignRight 属性中缺少“+”。

我想你可能需要改变 `android:layout_alignRight="@id/first_el"`

到

```
 android:layout_alignRight="@+id/first_el" 
```

# ios - Objective-c - 地图更新时停止集中用户位置

> ID：10207831
> 
> 赞同：0
> 
> 时间：2012-04-18T10:48:16.733
> 
> 标签：ios

我使用 MapKit 框架创建了一个简单的应用程序。当它启动时，用户位置被放大并显示。但是当我缩小并滚动地图时，它会在几秒钟后自动将其自身集中到用户位置。我怎样才能阻止这个？

在 m 文件中：

```
#import "APPNAMEViewController.h"
#import <MapKit/MapKit.h>

@synthesize mapview;

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)aUserLocation     {
    mapView.scrollEnabled = YES;
    mapView.zoomEnabled = YES;
    MKCoordinateRegion region;
    MKCoordinateSpan span;
    span.latitudeDelta = 0.005;
    span.longitudeDelta = 0.005;
    CLLocationCoordinate2D location;
    location.latitude = aUserLocation.coordinate.latitude;
    location.longitude = aUserLocation.coordinate.longitude;
    region.span = span;
    region.center = location;
    [mapView setRegion:region animated:NO];
    [mapView setUserTrackingMode:MKUserTrackingModeNone animated:NO];
}
- (void)viewDidLoad
{
     [super viewDidLoad];
     mapview = [[MKMapView alloc]
           initWithFrame:CGRectMake(0,
                                    44,
                                    self.mapview.bounds.size.width,
                                    self.mapview.bounds.size.height)
           ];
     mapview.showsUserLocation = YES;
     mapview.mapType = MKMapTypeStandard;
     mapview.delegate = self;
     [mapview setUserTrackingMode:MKUserTrackingModeNone animated:NO];

     [self.view addSubview:mapview];
} 
```

请帮我 ：）

最好的问候米哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:50:33.983

删除`[mapView setRegion:region animated:NO];`_ `- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)aUserLocation`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:52:27.120

```
[mapView setRegion:region animated:NO]; //Changes the currently visible region and optionally animates the change. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T20:02:17.703

删除：[mapView setUserTrackingMode:MKUserTrackingModeNone animated:NO];

这使得地图以当前位置为中心。

# sql - 以下是可接受的外键用法吗

> ID：10207833
> 
> 赞同：2
> 
> 时间：2012-04-18T10:48:33.130
> 
> 标签：sql, database-design

我有以下数据库，第一个表 users 是包含我的用户的表，userid 是主键。

![用户表](../Images/990e39bab8023152ecc4664a660720e6.png)

接下来是我的结果表，现在对于每个用户，可以有一个带有 id 的结果，并且可以针对考试。在这种情况下使用“id”作为主键和“userid”作为外键是否可以？有没有更好的方法可以模拟这种情况？

![结果表](../Images/27485e0931ad26faea4002f01893284c.png)

然后这些链接到相应的考试......

![在此处输入图像描述](../Images/b6f8573ae7bcc809591818442722b5ff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:55:41.547

我可能不会有`userid`一个`varchar`. 我也会这样`int`。

所以用户表是这样的：

```
userId int
userName varchar
firstName varchar
lastName varchar 
```

然后结果表中的前键将是`int`. 像这样：

```
userId int
result varchar
id int
examid INT 
```

因为如果你`JOIN`把桌子放在一起，那么在 a 上 ing`JOIN`不如`varchar`在`JOIN`a 上快`INT`

**编辑**

这取决于您计划存储多少数据。因为你知道有一个`GUID`s 不是唯一的最小通道。[GUID 不是唯一的简单证明](https://stackoverflow.com/questions/1705008/simple-proof-that-guid-is-not-unique)。我想如果我要设计这个数据库，我会选择一个 int。`GUID`因为使用 a作为用户 ID感觉有点矫枉过正

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:55:18.180

假设每个用户/考试只会产生一个结果，那么您可以使用结果表中的`userid`and`exam`列创建一个复合键。

不过就个人而言，我会采用任意`id`字段方法，因为我不喜欢将多个值传递给参考记录。但这只是我:)。

此外，`exam`结果表中的字段也应该是外键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:12:08.110

另一种方法是从考试中抽象出成绩等级，并使考试成为其自己表上的唯一实体（和主键）。因此，这将创建一个等级表（pkey1 = A、pkey2 = B 等），其中等级充当第二个表中的外键，从而删除整个字段。

您还可以规范化另一个级别并为主题制作一个表，这将是专用考试代码表的外键。您可以使用 ENG101、ENG102 等进行考试，对于该科目的其他考试代码也是如此。这样做的好处是将您的考试、科目、学生和年级水平保持为独特的实体。每个的主键和外键都很明显，您可以保持简单的维护未来并有扩展空间。

您可以考虑使用复合键，但这是一种很好且简单的开始方式，您可以根据需要合并表以进行索引和压缩。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T11:45:40.120

请确保您首先了解[范式](http://en.wikipedia.org/wiki/Database_normalization#Normal_forms)，然后才能真正规范化您的架构。

# java - 在 Java 中需要递归方法的帮助

> ID：10207839
> 
> 赞同：1
> 
> 时间：2012-04-18T10:48:50.503
> 
> 标签：java, recursion, arraylist, multidimensional-array

我对编程有点陌生，需要帮助做一个递归方法。我有一个方法可以在二维数组中选择一个随机空间，然后我想检查空间是否空闲。如果空间是空闲的，我想使用它空间，但如果不是，我想在二维数组中选择一个新的随机空间。谢谢

```
import java.io.* ;
import java.util.ArrayList ;
public class WordSearchPuzzle
{
    private char[][] puzzle ;
    private ArrayList<String> puzzleWords ;
    private int letterCount = 0 ;
    private int gridDimensions;

    public WordSearchPuzzle(ArrayList<String> userSpecifiedWords)
    {
        this.puzzleWords = userSpecifiedWords ;

    }

    private void createPuzzleGrid()
    {
        int i, itemLength;
        String item;
        for (i = 0; i < puzzleWords.size(); i++) {
            item = puzzleWords.get(i);
            itemLength = item.length();
            letterCount = letterCount + itemLength;
        }
        gridDimensions = letterCount * 2;
        puzzle = new char[gridDimensions][gridDimensions] ;
    }

    private void generateWordSearchPuzzle()
    {

    }

    public void firstSpace(String Word) 
        {  
            int row, column;
            row = (int)(Math.random() * gridDimensions +1);
            column = (int)(Math.random() * gridDimensions +1);
            if(puzzle[row][column] != ' '){
                firstSpace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:58:00.193

您在评论中提到的具体问题是因为 firstSpace 方法需要有一个字符串作为参数。你应该使用：

```
firstSpace(word); 
```

另请注意，此方法当前不返回任何内容，因此您无法知道它选择了哪个空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:07:41.010

我认为在索引计算中添加 1 是不必要的，并且可能会导致数组越界异常。虽然，这取决于您对 gridDimensions 的定义。

您在评论中指定的问题是因为 Java 编译器试图找到一个名为“void firstSpace()”的方法，这是与“void firstSpace(String word)”不同的方法。

```
public void firstSpace(String word) 
{  
    int row, column;

    // No need to add 1, Java arrays are accessed with the first index 
    // being 0\. Math.random() returns from 0 up to but not including 1.0.
    // e.g. array size = 50, min index = 0, max index = 49
    // Lets say you get very close to 1 e.g. 0.9999, then 
    // 0.9999 * 50 = 49.995 (after integer truncating you have 49)
    row = (int)(Math.random() * gridDimensions);
    column = (int)(Math.random() * gridDimensions);

    if(puzzle[row][column] != ' ') { 
        // If this element is not "empty" then run the method again 
        // using recursion. null might be a better choice to compare
        // to depending on how you initialized the array.
        firstSpace(word);
    } else {
        // Otherwise we're finished and we can set the array element
        // to the new word.

        // (Assumed post condition (you might want to do something else once you
        // find a blank index))
        puzzle[row][column] = word;
    }
} 
```

# c - 使用 send() 两次发送不同类型的数据

> ID：10207844
> 
> 赞同：0
> 
> 时间：2012-04-18T10:49:23.800
> 
> 标签：c, winsock, send, recv

我有一个连接到服务器并尝试访问`send()`一些数据的客户端。但是，我需要发送两种类型的数据，比如说关于天气和当前时间的信息（只是示例）。

**问题是**：在客户端中我调用`send()`了两次，一次发送天气信息，一次发送当前时间，而在服务器中我正在循环`recv()`。

我所期望的（并构建了我的代码）是服务器第一次调用`recv()`它只会获取天气信息和第二次调用`recv()`时间，但是只有一次调用`recv()`就足以接收到两个数据同一个缓冲区。

虽然这可能不是问题，但我已经围绕这个假设构建了我的程序，我只是想知道是否有办法实现我想要的（我想到了`sleep()`两者之间的一个，`send()`但这可能不可靠） ，这样我就可以节省重写代码的时间。

如果有人知道一种方法，它将为我节省很多时间，所以我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:57:20.147

除了 TCP 之上的适当消息协议之外，别无选择。TCP 只传输八位字节流（字节）。TCP 不能传输消息、结构、对象。

如果您围绕 TCP 可以自行传输消息的假设构建了一个大型程序，那么您就有麻烦了。

Sleep() 和计时器不会以任何可靠或高性能的方式工作。您必须正确执行并在 TCP 之上实现协议，例如。通过发送包含数据长度的标头或使用开始/结束字节并转义出现在数据中的任一字节。

# iphone - NSPredicate 过滤器数组，用于 NSDate

> ID：10207846
> 
> 赞同：0
> 
> 时间：2012-04-18T10:49:31.163
> 
> 标签：iphone, ios, nsdate, nspredicate

我有一个从我的核心数据中获取的 NSManagedObject 数组，我想用 >= 今天的日期过滤数组，所以我这样做：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"(firstAired >= %@)", [NSDate date]]; 
```

但是只找到今天的日期>，而今天的日期却没有，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:11:27.960

您应该像这样创建午夜日期，并将其传递给谓词

```
 NSDateComponents *currentComponents = [[NSCalendar currentCalendar]components:NSMinuteCalendarUnit|NSHourCalendarUnit|NSSecondCalendarUnit fromDate:[NSDate date]];
[currentComponents setMinute:0];
[currentComponents setHour:0];
[currentComponents setSecond:0];
NSCalendar *calendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
NSDate *dateToCheck = [calendar dateFromComponents:currentComponents]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:40:41.100

```
 NSDate *now = [NSDate date];
        NSCalendar *calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
        calendar.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"]; 
        NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:now];
        [components setHour:00];
        NSDate *today = [calendar dateFromComponents:components]; 
```

以这种方式有效，感谢所有人...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:53:11.270

`[NSDate date]`是当前时间。所以这个谓词将只获取 firstAired 是今天晚些时候或之后的记录，而不是今天更早的记录。`NSDate`用时间 00:00:00构造一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:57:02.283

因为 [NSDate date] 返回执行时的确切日期，包括小时、分钟、秒 ....。如果要搜索每个“今天”项目，则必须在午夜将 [NSDate date] 更改为今天的 NSDate 对象。也就是说，从 NSDate.date 中提取日期组件，然后使用组件年、月和日构建一个带有小时：00:00AM 的新日期对象。

# https - Qt4.8：QWebView 和 HTTPS

> ID：10207858
> 
> 赞同：1
> 
> 时间：2012-04-18T10:50:18.107
> 
> 标签：https, qt4, qtwebkit

在花了很长时间使 SSL 在 Windows 上的 Qt 上工作之后，大多数 HTTPS 网站似乎都在工作。现在在需要时添加了不受信任的证书等，一切都很好……但由于某些奇怪的原因，我无法登录 reuters.com。

拿一个 QWebView，添加一些魔法来处理出现的 ssl 错误，继续访问 reuters 然后单击登录。然后发生了一些奇怪的事情。首先，它要求接受不受信任的证书，这并不奇怪。但是，一旦完成，什么也不会发生。QWebView 等待并且永远不会发送 loadFinished(bool) 信号。更多显示的网页不会改变。

当我尝试在 Firefox 或 IE 上执行此操作时，它告诉我网页上有混合内容。会不会是问题？

# c# - GDI+渐变效果

> ID：10207859
> 
> 赞同：1
> 
> 时间：2012-04-18T10:50:20.423
> 
> 标签：c#, gdi+

在下面的代码中：

```
void f13(Graphics g)
{
  g.FillRectangle(new SolidBrush(Color.Black), pictureBox1.ClientRectangle);
  g.InterpolationMode = InterpolationMode.HighQualityBicubic;
  var zf = .0143;
  const int w = 6000, h = 10, margin = 40;
  var bmp = new Bitmap(w + 2 * margin, h + 2 * margin);
  var bmpG = Graphics.FromImage(bmp);
  bmpG.FillRectangle(new SolidBrush(Color.White), 0, 0, bmp.Width, bmp.Height);

  var srcRect = new RectangleF(margin - .5f, margin - .5f, w, h);
  zf = (float)Convert.ToInt32(w * zf) / w;
  var destRect = new Rectangle(0, 0, Convert.ToInt32(w * zf), Convert.ToInt32(w * zf));
  g.DrawImage(bmp, destRect, srcRect, GraphicsUnit.Pixel);
  destRect.X += destRect.Width;
  g.DrawImage(bmp, destRect, srcRect, GraphicsUnit.Pixel);
}

private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
  f13(e.Graphics);
} 
```

我得到两个矩形之间的差距：

[微 http://www.uploadup.com/di-0HXM.png](http://www.uploadup.com/di-0HXM.png) [宏 http://www.uploadup.com/di-G1O5.png](http://www.uploadup.com/di-G1O5.png)

这是为什么？

如果差距线不是很清楚，您可以减少保证金。如果将其设置为 10，您将获得：

[宏，少保证金 http://www.uploadup.com/di-P2ZT.png](http://www.uploadup.com/di-P2ZT.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:05:25.190

如果您的矩形边界不是整数，就会发生这种情况。梯度与它无关。

考虑：假设您正在绘制一个矩形，其右侧位于 X=100.5，并且您正在用白色填充它（现有背景为黑色）。所以图形库（这不是特定于 GDI+）将用白色“半填充”那些最右边的像素（在 X=100 处），这意味着它们将现有的黑色与 50% 的白色混合，作为灰色的结果.

然后绘制另一个矩形，其左侧位于 X=100.5。现在您再次用白色填充 X=100 处的像素，因此图形库将采用现有颜色（灰色）并将其与 50% 的白色混合，留下 75% 的白色。

如果你不想要这种接缝，你必须（a）确保你的矩形重叠一点，或者（b）手动将你的坐标四舍五入到最近的像素，所以所有像素都被完全写入而不是与已经存在的东西融合在一起。

# php - SimpleImage.php（再次）没有错误但无法正常工作

> ID：10207866
> 
> 赞同：0
> 
> 时间：2012-04-18T10:51:05.437
> 
> 标签：php, file-upload

好的，我看过很多关于这个脚本的帖子。哪个可以找到.....

[http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

但是，我仍然无法使用我所拥有的。所以这就是问题所在。首先，我上传图像并将名称保存到数据库中。然后我将其 ID 传递到下一页以从数据库中检索图像及其路径。这就是脚本的用武之地。然后我通过脚本运行图像并将您发送到成功页面。

现在图像没有被调整大小！代码没有出错（即使有错误报告）。看起来它只是被完全忽略的代码。图像仍然存在并显示它是如何上传的，但大小没有改变。我假设我以正确的方式使用它。这是图片上传后的代码。

```
$Fetchq = mysql_query("SELECT * FROM images WHERE imageID ='".$_GET['image']."' ") or die('error stuff here');
$fetched = mysql_fetch_array($Fetchq);

$path = "/members/images/members/merseyside/{$fetched['imagename']}";

include('SimpleImage.php');
$image = new SimpleImage();
$image->load('$path');
$image->resize(60,60);   
$image->save('$path');

 $url = "/activity-photos.php?uploaded=true";        
header("Location: $url"); 
```

任何帮助将不胜感激，因为我已经受够了将头撞在这堵代码墙上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:58:29.380

`$image->save('$path');`

如果您在单引号内使用变量，它会将其视为实际字符串而不是变量值。

解决方案：

`$image->save( $path ); // Remove the quotes`

或者

`$image->save( "$path" ); // Replace with double quotes`

编辑：

`$image->load()`另外，一定要改变

```
...
$image = new SimpleImage();
$image->load( $path ); // Removed quotes
$image->resize(60,60);   
$image->save( $path ); // Removed quotes
... 
```

您可以在此处了解有关字符串插值的更多信息：

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

# ruby - Ruby rails - ajax form_tag 没有进行 ajax 调用

> ID：10207867
> 
> 赞同：0
> 
> 时间：2012-04-18T10:51:09.870
> 
> 标签：ruby, ajax, ruby-on-rails-3

我有一个适用于 html 的表单，我正在尝试将其转换为 ajax。这是我的代码，我认为问题在于我的表单没有提交 ajax 请求，它仍在发送正常的 html 请求。我得到了一个带有部分的新页面（项目/创建）。如何解决这个问题？

```
<%= form_tag ( :action => :create, :remote => true, :method => :post ) do %>
... #stuff
<% end %> 
```

控制器 -

```
def create
...
    respond_to do |format|
            format.html { render :partial => 'view_item', :item_num => @t[:item_num], :flag => "new" }
            format.js
            end
end 
```

JS-

```
# cat view.js.erb
$('#item').html(<%= (render :partial => 'view_item').to_json.html_safe %>); #I have "item" div in my view 
```

日志 -

```
Started POST "/item/create" for 10.10.23.12 at 2012-04-18 06:41:23 -0400
Processing by ItemController#create as HTML
  Parameters: {"utf8"=>"â", "authenticity_token"=>"GRNJAx2ePzRIOaJjr2w4F6WwueRq7FL9tIDaKtIPZSQ=", 
.......#long log here
"
   (0.1ms)  COMMIT
  Rendered item/_view_item.html.erb (1.6ms)
Completed 200 OK in 3261ms (Views: 2.4ms | ActiveRecord: 4.1ms) 
```

# cocoa - glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_BORDER, 0); 抛出 GL_INVALID_ENUM？

> ID：10207869
> 
> 赞同：0
> 
> 时间：2012-04-18T10:51:19.303
> 
> 标签：cocoa, opengl

我正在从 NSImage（可可桌面）创建 2D openGL 纹理。我从互联网上获取了一些代码，它似乎可以工作。

但是，我开始在这里和那里插入对 glGetError() 的调用以跟踪其他渲染错误，因此我跟踪到上述调用的 GL_INVALID_ENUM 错误。根据 glTexParameteri 上的文档， GL_TEXTURE_2D 和 GL_TEXTURE_BORDER 似乎都是有效参数......？

任何线索？

这是代码：

```
- (void) createOpenGLTexture
{
[_openGLContext makeCurrentContext];

if (_textureID != 0) {
    glDeleteTextures(1, &_textureID);
    _textureID = 0;
}

NSSize imageSize = [_originalImage size];

// .............................................................
// Flip Image Vertically

NSImage* image = [[NSImage alloc] initWithSize:imageSize];

NSRect rect = NSMakeRect(0, 0, imageSize.width, imageSize.height);

[image lockFocus];

NSAffineTransform* transform = [NSAffineTransform transform];
[transform translateXBy:0 yBy:rect.size.height];
[transform scaleXBy:+1.0 yBy:-1.0];
[transform concat];
[_originalImage drawAtPoint:NSZeroPoint 
                   fromRect:rect 
                  operation:NSCompositeCopy 
                   fraction:1];
[image unlockFocus];

// Then we grab the raw bitmap data from the NSBitmapImageRep that is 
// the ‘source’ of an NSImage

NSBitmapImageRep* bitmap = [[NSBitmapImageRep alloc] initWithData:[image TIFFRepresentation]];
[image release];

GLenum   imageFormat = GL_RGBA;

imageSize = [bitmap size];  // Needed?

long sourceRowBytes = [bitmap bytesPerRow];

//  This SHOULD be enough but nope
GLubyte* sourcePic = (GLubyte*) [bitmap bitmapData];

//  We have to copy that raw data one row at a time….yay
GLubyte* pic = malloc( imageSize.height * sourceRowBytes );
GLuint  i;
GLuint intHeight = (GLuint) (imageSize.height);

for (i = 0; i < imageSize.height; i++) {
    memcpy(pic + (i * sourceRowBytes), 
           sourcePic + (( intHeight - i - 1 )*sourceRowBytes), 
           sourceRowBytes);
}

[bitmap release];

sourcePic = pic;

// .........................................................................
// Create the texture proper

glEnable(GL_TEXTURE_2D);
checkOpenGLError();

glEnable(GL_COLOR_MATERIAL);
checkOpenGLError();

glGenTextures (1, &_textureID);
checkOpenGLError();

glBindTexture (GL_TEXTURE_2D, _textureID);
checkOpenGLError();

glPixelStorei(GL_UNPACK_ALIGNMENT,1);
checkOpenGLError();

//  Here we set the basic properties such as how it looks when resized and if it's bordered
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_BORDER, 0);
checkOpenGLError();

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
checkOpenGLError();

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
checkOpenGLError();

//  Not really necessary all the time but we can also define if it can be tiled (repeating)
//  Here GL_TEXTURE_WRAP_S = horizontal and GL_TEXTURE_WRAP_T = vertical
//  This defaults to GL_REPEAT so we're going to prevent that by using GL_CLAMP
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
checkOpenGLError();

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
checkOpenGLError();

//  And.....CREATE
glTexImage2D(GL_TEXTURE_2D, 
             0, 
             imageFormat, 
             rect.size.width, 
             rect.size.height, 
             0, 
             imageFormat, 
             GL_UNSIGNED_BYTE, 
             sourcePic);
checkOpenGLError();

glDisable(GL_TEXTURE_2D);
checkOpenGLError();

glDisable(GL_COLOR_MATERIAL);

checkOpenGLError();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:03:28.623

GL_TEXTURE_BORDER 不是 glTexParameter() 的有效枚举。参考：[http ://www.opengl.org/sdk/docs/man/xhtml/glTexParameter.xml](http://www.opengl.org/sdk/docs/man/xhtml/glTexParameter.xml)

您不能（也不需要）指定边框大小。GL_TEXTURE_BORDER 只是 glGetTexLevelParameter() 用于检索分配给特定纹理级别的 opengl 驱动程序的边框大小的有效枚举。据我所知，这不再使用，并且该函数在所有较新的系统上都返回 0。

不要将它与 GL_TEXTURE_BORDER_COLOR 混淆，后者用于设置使用 GL_CLAMP_BORDER 环绕模式时呈现的颜色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T11:01:55.557

调用 glTexParameteri 时，GL_TEXTURE_BORDER 不是 pname 的有效值。边框在调用 glTexImage2D 时指定。

[http://www.opengl.org/sdk/docs/man/xhtml/glTexParameter.xml](http://www.opengl.org/sdk/docs/man/xhtml/glTexParameter.xml)

# python - rdbms API 不可用，因为无法加载 MySQLdb 库

> ID：10207881
> 
> 赞同：2
> 
> 时间：2012-04-18T10:52:21.863
> 
> 标签：python, mysql, google-app-engine, mysql-python

我尝试使用本地Mysql调试google-app-engine应用程序，因为经过一些编码然后将其部署到google-app-engine，访问该网站，然后从应用程序引擎控制台的日志中查看日志，这需要相当多的时间而且不方便。但是我安装了Mysql和mysql-python之后，总是有问题，我上网查了一下，有很多老帖子讨论这种类似的问题，但没有一个能解决我的问题。

我的开发环境：

```
 Mac 10.7.3, App-Engine 1.6.4, Python 2.7.1,  Mysql  5.5.23 
```

启动 app-engine 开发服务器并记录：

```
INFO     2012-04-18 08:45:36,212 py_zipimport.py:148] zipimporter('/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg', 'MySQLdb/')
WARNING  2012-04-18 08:45:36,350 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.

INFO     2012-04-18 08:45:36,484 appengine_rpc.py:160] Server: appengine.google.com
INFO     2012-04-18 08:45:36,488 appcfg.py:582] Checking for updates to the SDK.
DEBUG    2012-04-18 08:45:36,490 appengine_rpc.py:365] Sending HTTPS request:
POST /api/updatecheck?release=1.6.4&timestamp=1330713524&runtime=python27&api_versions=%5B%271%27%5D HTTPS/1.1
Host: appengine.google.com
X-appcfg-api-version: 1
Content-type: application/octet-stream
User-agent: appcfg_py/1.6.4 Darwin/11.3.0 Python/2.7.1.final.0

INFO     2012-04-18 08:45:38,001 appcfg.py:616] This SDK release is newer than the advertised release.
INFO     2012-04-18 08:45:38,075 dev_appserver_multiprocess.py:647] Running application dev~myapp on port 8080: http://localhost:8080
INFO     2012-04-18 08:45:38,076 dev_appserver_multiprocess.py:649] Admin console is available at: http://localhost:8080/_ah/admin 
```

访问[http://localhost:8080](http://localhost:8080)，并记录：

```
DEBUG    2012-04-18 08:48:19,608 dev_appserver.py:656] Matched "/" to CGI dispatcher with path main.app
DEBUG    2012-04-18 08:48:19,622 dev_appserver.py:1624] Executing CGI with env:
{'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_CONNECTION': 'keep-alive', '_AH_THREADSAFE': '1', 'REQUEST_ID_HASH': 'B6589FC6', 'CURRENT_VERSION_ID': '1.1', 'SERVER_SOFTWARE': 'Development/1.0', 'SCRIPT_NAME': '', 'USER_ORGANIZATION': '', 'REQUEST_METHOD': 'GET', 'HTTP_HOST': 'localhost:8080', 'PATH_INFO': '/', 'SERVER_PROTOCOL': 'HTTP/1.0', 'QUERY_STRING': '', 'TZ': 'UTC', 'USER_EMAIL': '', 'CONTENT_LENGTH': '', 'USER_ID': '', 'APPENGINE_RUNTIME': 'python27', 'APPLICATION_ID': 'dev~myapp', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.55.3 (KHTML, like Gecko) Version/5.1.5 Safari/534.55.3', 'SERVER_NAME': 'localhost', 'REMOTE_ADDR': '127.0.0.1', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT_LANGUAGE': 'en-us', 'SDK_VERSION': '1.6.4', 'PATH_TRANSLATED': '/Users/Dajie/Workspace/Python/myapp/main.app', 'SERVER_PORT': '8080', '_AH_ENCODED_SCRIPT_NAME': '/', 'AUTH_DOMAIN': 'gmail.com'}
WARNING  2012-04-18 08:48:19,625 py_zipimport.py:139] Can't open zipfile /Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg: IOError: [Errno 13] file not accessible: '/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg'
WARNING  2012-04-18 08:48:19,626 py_zipimport.py:139] Can't open zipfile /Library/Python/2.7/site-packages/WebOb-1.2b3-py2.7.egg: IOError: [Errno 13] file not accessible: '/Library/Python/2.7/site-packages/WebOb-1.2b3-py2.7.egg'
ERROR    2012-04-18 08:48:19,863 wsgi.py:189] 
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1850, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "/Users/Dajie/Workspace/Python/myapp/main.py", line 22, in <module>
    import MySQLdb
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1850, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1647, in LoadModuleRestricted
    return source_file.load_module(submodule_fullname)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/dist/py_zipimport.py", line 246, in load_module
    submodname, is_package, fullpath, source = self._get_source(fullmodname)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/dist/py_zipimport.py", line 207, in _get_source
    source = self.zipfile.read(relpath.replace(os.sep, '/'))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/zipfile.py", line 867, in read
    return self.open(name, "r", pwd).read()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/zipfile.py", line 882, in open
    zef_file = open(self.filename, 'rb')
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 592, in __init__
    raise IOError(errno.EACCES, 'file not accessible', filename)
IOError: [Errno 13] file not accessible: '/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg'
INFO     2012-04-18 08:48:19,882 dev_appserver.py:2884] "GET / HTTP/1.1" 500 - 
```

任何人都知道如何解决这个问题，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:13:44.667

导入 MySQLdb 时

```
ImportError: dlopen(/Users/Dajie/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg-tmp/_mysql.so, 2): Library not loaded: libmysqlclient.18.dylib
  Referenced from: /Users/Dajie/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg-tmp/_mysql.so
  Reason: image not found 
```

解决方案：

```
$ sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib 
```

# spring - 推荐在 Spring3.1.1 (hibernate4) 中打DAO 内的数据库的方法？

> ID：10207884
> 
> 赞同：0
> 
> 时间：2012-04-18T10:52:27.993
> 
> 标签：spring, hibernate

我正在将我的项目从**spring 3.0.5 & hibernate 3**升级到**spring 3.1.1 & hibernate 4.1**

我广泛使用**org.springframework.orm.hibernate3.support.HibernateDaoSupport**。在具体**的 HibernateTemplate**中；就像在这个片段中：

```
public class MenuDaoImpl extends HibernateDaoSupport implements MenuDao, Serializable {

public List<Menu> getMenus() {
    return getHibernateTemplate().find("from Menu menu");
}

//etc

} 
```

但我读到 HibernateTemplate**不再推荐使用**。

那么，在 Spring3.1.1 中，在 DAO 中访问数据库的推荐方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:02:25.457

注入一个 EntityManager 并直接使用它。

```
public class MenuDaoImpl implements MenuDao {

@PersistenceContext
private EntityManager entityManager;

...

} 
```

这是[SpringSource 博客上的一个很好的例子](http://blog.springsource.org/2006/08/07/using-jpa-in-spring-without-referencing-spring/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T20:01:03.897

从 Hibernate 3.0.1 开始，Spring 建议使用 .`SessionFactory`而不是`HibernateTemplate`.

来自[Spring 3.0 HibernateTemplate API 文档](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/)：

> 注意：从 Hibernate 3.0.1 开始，事务性 Hibernate 访问代码也可以用普通的 Hibernate 样式编码。因此，对于新开始的项目，请考虑采用基于 SessionFactory.getCurrentSession() 的标准 Hibernate3 编码数据访问对象的风格。

例子：

```
public class MenuDao {

    @Autowired
    private SessionFactory sessionFactory;

    public List<Menu> getMenus() {
        return (List<Menu>) sessionFactory.getCurrentSession.createQuery("from Menu").list();
    }
} 
```

# gwt - GWT 小部件库和 MVP 模式

> ID：10207885
> 
> 赞同：0
> 
> 时间：2012-04-18T10:52:42.550
> 
> 标签：gwt

有人可以推荐一个与 GWT 的 MVP 模式兼容/易于使用的好小部件库吗？我对具有良好图表支持的库特别感兴趣。谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-18T11:05:43.323

我使用[http://code.google.com/p/gwt-mvp/](http://code.google.com/p/gwt-mvp/)添加 MVP。不是最简单的解决方案，但拥有您所需要的一切，并手动添加了图表支持。

在 GWT 中查看[独立图表](https://stackoverflow.com/questions/5251/stand-alone-charts-in-gwt)

# .net - 在 Windows 服务中运行 DirectoryInfo.getfiles 时找到的文件比在控制台应用程序中少

> ID：10207886
> 
> 赞同：0
> 
> 时间：2012-04-18T10:52:45.233
> 
> 标签：.net, windows-services, directoryservices

我正在收集文件共享上的文件列表。文件共享具有以下格式：
`\\<machinename.domain>\Global$\Folder\Documentation\ARCHIVE`

我正在使用以下代码获取文件：

```
Dim di As New IO.DirectoryInfo(_archiveRootPath)
Dim files As IO.FileInfo() = di.GetFiles("*", IO.SearchOption.AllDirectories) 
```

当我在服务器上的 WinForm 测试应用程序中运行它时，我发现 3502 个文件。
当我右键单击该文件夹时，我找到了 3502 个文件
当我将代码添加到服务中并运行它时，我找到了 1811 个文件。

**问：这怎么可能？**

该服务在完全相同的帐户下运行。

该文件夹包含大约 80G 的数据。

感谢您的任何建议！

拉尔西

# wpf - WPF ListView - 检测何时单击所选项目

> ID：10207888
> 
> 赞同：65
> 
> 时间：2012-04-18T10:52:48.673
> 
> 标签：wpf, listview

我正在使用显示数据绑定项目列表的 WPF ListView 控件。

```
<ListView ItemsSource={Binding MyItems}>
    <ListView.View>
        <GridView>
            <!-- declare a GridViewColumn for each property -->
        </GridView>
    </ListView.View>
</ListView> 
```

我正在尝试获得与`ListView.SelectionChanged`事件类似的行为，只是我还想检测是否单击了当前选定的项目。`SelectionChanged`如果再次单击相同的项目（显然），则不会触发该事件。

解决此问题的最佳（最干净）方法是什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-04-18T22:41:27.860

使用 ListView.ItemContainerStyle 属性为您的 ListViewItems 提供一个 EventSetter，它将处理 PreviewMouseLeftButtonDown 事件。然后，在处理程序中，检查是否选择了单击的项目。

XAML：

```
<ListView ItemsSource={Binding MyItems}>
    <ListView.View>
        <GridView>
            <!-- declare a GridViewColumn for each property -->
        </GridView>
    </ListView.View>
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <EventSetter Event="PreviewMouseLeftButtonDown" Handler="ListViewItem_PreviewMouseLeftButtonDown" />
        </Style>
    </ListView.ItemContainerStyle>
</ListView> 
```

代码隐藏：

```
private void ListViewItem_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    var item = sender as ListViewItem;
    if (item != null && item.IsSelected)
    {
        //Do your stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-12-06T23:25:40.887

您可以处理 ListView 的 PreviewMouseLeftButtonUp 事件。不处理 PreviewMouseLeftButtonDown 事件的原因是，当您处理该事件时，ListView 的 SelectedItem 可能仍为 null。

XAML：

```
<ListView ... PreviewMouseLeftButtonUp="listView_Click"> ... 
```

后面的代码：

```
private void listView_Click(object sender, RoutedEventArgs e)
{
    var item = (sender as ListView).SelectedItem;
    if (item != null)
    {
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-04-27T00:44:52.767

这些都是很好的建议，但如果我是你，我会在你的视图模型中这样做。在您的视图模型中，您可以创建一个中继命令，然后您可以将其绑定到项目模板中的单击事件。要确定是否选择了相同的项目，您可以在视图模型中存储对所选项目的引用。我喜欢使用 MVVM Light 来处理绑定。这使您的项目将来更容易修改，并允许您在 Blend 中设置绑定。

一切都说完了，您的 XAML 将看起来像 Sergey 建议的那样。我会避免在您的视图中使用后面的代码。我将避免在此答案中编写代码，因为那里有大量示例。

这是一个： [如何将 RelayCommand 与 MVVM Light 框架一起使用](https://stackoverflow.com/questions/6754630/how-to-use-relaycommand-with-the-mvvm-light-framework)

如果您需要示例，请发表评论，我会添加一个。

~干杯

我说我不打算做一个例子，但我是。干得好。

1.  在您的项目中，仅添加 MVVM Light Libraries。

2.  为您的视图创建一个类。一般来说，每个视图都有一个视图模型（视图：MainWindow.xaml && viewModel: MainWindowViewModel.cs）

3.  这是非常非常基本的视图模型的代码：

所有包含的命名空间（如果它们出现在这里，我假设您已经添加了对它们的引用。MVVM Light 在 Nuget 中）

```
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.CommandWpf;
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks; 
```

现在添加一个基本的公共类：

```
/// <summary>
/// Very basic model for example
/// </summary>
public class BasicModel 
{
    public string Id { get; set; }
    public string Text { get; set; }

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="text"></param>
    public BasicModel(string text)
    {
        this.Id = Guid.NewGuid().ToString();
        this.Text = text;
    }
} 
```

现在创建您的视图模型：

```
public class MainWindowViewModel : ViewModelBase
{
    public MainWindowViewModel()
    {
        ModelsCollection = new ObservableCollection<BasicModel>(new List<BasicModel>() {
            new BasicModel("Model one")
            , new BasicModel("Model two")
            , new BasicModel("Model three")
        });
    }

    private BasicModel _selectedBasicModel;

    /// <summary>
    /// Stores the selected mode.
    /// </summary>
    /// <remarks>This is just an example, may be different.</remarks>
    public BasicModel SelectedBasicModel 
    {
        get { return _selectedBasicModel; }
        set { Set(() => SelectedBasicModel, ref _selectedBasicModel, value); }
    }

    private ObservableCollection<BasicModel> _modelsCollection;

    /// <summary>
    /// List to bind to
    /// </summary>
    public ObservableCollection<BasicModel> ModelsCollection
    {
        get { return _modelsCollection; }
        set { Set(() => ModelsCollection, ref _modelsCollection, value); }
    }        
} 
```

在您的视图模型中，添加一个中继命令。请注意，我做了这个异步并让它传递了一个参数。

```
 private RelayCommand<string> _selectItemRelayCommand;
    /// <summary>
    /// Relay command associated with the selection of an item in the observablecollection
    /// </summary>
    public RelayCommand<string> SelectItemRelayCommand
    {
        get
        {
            if (_selectItemRelayCommand == null)
            {
                _selectItemRelayCommand = new RelayCommand<string>(async (id) =>
                {
                    await selectItem(id);
                });
            }

            return _selectItemRelayCommand;
        }
        set { _selectItemRelayCommand = value; }
    }

    /// <summary>
    /// I went with async in case you sub is a long task, and you don't want to lock you UI
    /// </summary>
    /// <returns></returns>
    private async Task<int> selectItem(string id)
    {
        this.SelectedBasicModel = ModelsCollection.FirstOrDefault(x => x.Id == id);
        Console.WriteLine(String.Concat("You just clicked:", SelectedBasicModel.Text));
        //Do async work

        return await Task.FromResult(1);
    } 
```

在您查看的代码中，为您的视图模型创建一个属性并将您的视图的数据上下文设置为视图模型（请注意，还有其他方法可以做到这一点，但我试图将其作为一个简单的示例。）

```
public partial class MainWindow : Window
{
    public MainWindowViewModel MyViewModel { get; set; }
    public MainWindow()
    {
        InitializeComponent();

        MyViewModel = new MainWindowViewModel();
        this.DataContext = MyViewModel;
    }
} 
```

在您的 XAML 中，您需要在代码顶部添加一些命名空间

```
<Window x:Class="Basic_Binding.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:Custom="clr-namespace:GalaSoft.MvvmLight;assembly=GalaSoft.MvvmLight"
    Title="MainWindow" Height="350" Width="525"> 
```

我添加了“我”和“自定义”。

这是列表视图：

```
<ListView 
        Grid.Row="0" 
        Grid.Column="0" 
        HorizontalContentAlignment="Stretch"
        ItemsSource="{Binding ModelsCollection}"
        ItemTemplate="{DynamicResource BasicModelDataTemplate}">
    </ListView> 
```

这是 ListView 的 ItemTemplate：

```
<DataTemplate x:Key="BasicModelDataTemplate">
        <Grid>
            <TextBlock Text="{Binding Text}">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="MouseLeftButtonUp">
                        <i:InvokeCommandAction 
                            Command="{Binding DataContext.SelectItemRelayCommand, 
                                RelativeSource={RelativeSource FindAncestor, 
                                        AncestorType={x:Type ItemsControl}}}"
                            CommandParameter="{Binding Id}">                                
                        </i:InvokeCommandAction>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </TextBlock>
        </Grid>
    </DataTemplate> 
```

运行您的应用程序，然后查看输出窗口。您可以使用转换器来处理所选项目的样式。

这可能看起来很复杂，但是当您需要将视图与 ViewModel 分开时（例如，为多个平台开发 ViewModel），它会使生活变得更加轻松。此外，它还使在 Blend 10x 中的工作变得更加容易。一旦你开发了你的 ViewModel，你就可以把它交给一个可以让它看起来很有艺术感的设计师 :)。MVVM Light 添加了一些功能以使 Blend 识别您的 ViewModel。在大多数情况下，您可以在 ViewModel 中执行几乎所有您想要影响视图的操作。

如果有人读到这篇文章，我希望你觉得这很有帮助。如果您有任何问题，请告诉我。我在这个例子中使用了 MVVM Light，但是你可以在没有 MVVM Light 的情况下做到这一点。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-03T09:14:12.523

您可以像这样处理单击列表视图项：

```
<ListView.ItemTemplate>
  <DataTemplate>
     <Button BorderBrush="Transparent" Background="Transparent" Focusable="False">
        <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <i:InvokeCommandAction Command="{Binding DataContext.MyCommand, ElementName=ListViewName}" CommandParameter="{Binding}"/>
                </i:EventTrigger>
        </i:Interaction.Triggers>
      <Button.Template>
      <ControlTemplate>
         <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
    ... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-01T16:12:53.997

这对我有用。

单击一行会触发代码隐藏。

XAML：

```
<ListView x:Name="MyListView" MouseLeftButtonUp="MyListView_MouseLeftButtonUp">
    <GridView>
        <!-- Declare GridViewColumns. -->
    </GridView>
</ListView.View> 
```

代码隐藏：

```
private void MyListView_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    System.Windows.Controls.ListView list = (System.Windows.Controls.ListView)sender;
    MyClass selectedObject = (MyClass)list.SelectedItem;
    // Do stuff with the selectedObject.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-06T18:34:26.233

我无法按照我想要的方式获得公认的答案（请参阅 Farrukh 的评论）。

我想出了一个稍微不同的解决方案，它也感觉更原生，因为它选择了鼠标按钮按下的项目，然后你可以在鼠标按钮被释放时对其做出反应：

XAML：

```
<ListView Name="MyListView" ItemsSource={Binding MyItems}>
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <EventSetter Event="PreviewMouseLeftButtonDown" Handler="ListViewItem_PreviewMouseLeftButtonDown" />
        <EventSetter Event="PreviewMouseLeftButtonUp" Handler="ListViewItem_PreviewMouseLeftButtonUp" />
    </Style>
</ListView.ItemContainerStyle> 
```

后面的代码：

```
private void ListViewItem_PreviewMouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    MyListView.SelectedItems.Clear();

    ListViewItem item = sender as ListViewItem;
    if (item != null)
    {
        item.IsSelected = true;
        MyListView.SelectedItem = item;
    }
}

private void ListViewItem_PreviewMouseLeftButtonUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    ListViewItem item = sender as ListViewItem;
    if (item != null && item.IsSelected)
    {
        // do stuff
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-29T14:12:56.407

我还建议在单击某个项目后取消选择它并使用 MouseDoubleClick 事件

```
private void listBox_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    try {
        //Do your stuff here
        listBox.SelectedItem = null;
        listBox.SelectedIndex = -1;
    } catch (Exception ex) {
        System.Diagnostics.Debug.WriteLine(ex.Message);
    }
} 
```

# sql - 消息 102，级别 15，状态 1，第 1 行 '(' 附近的语法不正确

> ID：10207889
> 
> 赞同：1
> 
> 时间：2012-04-18T10:52:56.333
> 
> 标签：sql, sql-server, sql-server-2005

我正在尝试查询以插入表中，但我不断收到此消息：

查询是：

```
INSERT INTO A_USER(PK,status,login_id,HASHBYTES('md5', password),fk_role,last_update_ts,last_update_by,created_by)
VALUES (2,1,'abc', 'abc',2,'3/15/2012 12:21:46 PM','abc','abc') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:58:56.060

```
INSERT INTO EMP_USER(PK,status,login_id,password,fk_role,last_update_ts,last_update_by,created_by)
VALUES (2,1,HASHBYTES('md5', password),'abc','abc',2,'3/15/2012 12:21:46 PM','abc','abc') 
```

insert 语句就是这样工作的

```
insert into table (col1, col2) values (val1, val2) 
```

放入`HASHBYTES('md5', password)`值部分并在列部分中命名该列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:59:55.260

你的问题是这条线`HASHBYTES('md5', password)`，你想`HASHBYTES`在`VALUES`你的`INSERT`.

```
INSERT INTO A_USER
(
    PK
    ,status
    ,login_id
    ,[password] -- change to the name of your column.
    ,fk_role
    ,last_update_ts
    ,last_update_by
    ,created_by
)
VALUES 
(
    2
    ,1
    , 'abc'
    ,HASHBYTES('md5', 'abc') -- place your password to be hashed where 'abc' is.
    ,2
    ,'3/15/2012 12:21:46 PM'
    ,'abc'
    ,'abc'
) 
```

# vba - VBA - 检查某个时间段是否完全包含在某个月份

> ID：10207890
> 
> 赞同：1
> 
> 时间：2012-04-18T10:53:03.113
> 
> 标签：vba, excel, iso, date-formatting

我有一些关于开始和结束周的时间段的信息（定义为 ISO 周，因此它们可能不仅从星期一开始）。

关于 ISO 定义，一个月可能[在 wikip 上包含 4 或 5 周的描述](http://en.wikipedia.org/wiki/ISO_week_date#Weeks_per_month)。我想检查某些时间段是否完全包含在几个月中以及在它执行下一个命令之后。

如何在 Excel VBA 中执行此操作？是否有任何特殊功能可以帮助我实现上述检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:25:34.573

这有帮助吗？

```
Function ContainedInMonth(OriginalStartDate As String, _
    OriginalEndDate As String) As Boolean

    Dim MonthSet As Variant
    Dim AryCounter As Integer, ISOOffset As Integer
    Dim StartYear As Integer, EndYear As Integer
    Dim StartWeek As Integer, EndWeek As Integer
    Dim StartDay As Integer, EndDay As Integer
    Dim FormattedStartDate As Date, FormattedEndDate As Date

    ' This section may (will) vary, depending on your data. 
    ' I'm assuming "YYYY-WW" is passed...
    ' Also, error/formatting checking for these values is needed
    ' and wil differ depending on that format.
    StartYear = Val(Left(OriginalStartDate, 4))
    StartWeek = Val(Right(OriginalStartDate, 2))
    EndYear = Val(Left(OriginalEndDate, 4))
    EndWeek = Val(Right(OriginalEndDate, 2))

    If StartYear <> EndYear Or StartWeek > EndWeek Then
        ContainedInMonth = False
    ElseIf StartWeek = EndWeek Then
        ContainedInMonth = True
    Else

        ' Using the calculation from wikipedia. Honestly, I'm not sure that
        ' I understand this bit, but it seemed to work for my test cases.
        ISOOffset = Weekday(CDate("1/4/" & StartYear), vbMonday) + 3 
        StartDay = (StartWeek * 7) - ISOOffset ' Adding 0 for start of week
        EndDay = (EndWeek * 7) + 6 - ISOOffset ' Adding 6 for end of week

        ' Set the starting day for each month, depending on leap year.
        If StartYear Mod 4 = 0 Then
            MonthSet = Array(0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335)
        Else
            MonthSet = Array(0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334)
        End If

        FormattedStartDate = 0:FormattedEndDate = 0

        For AryCounter = 11 To 0 Step -1
            If StartDay > MonthSet(AryCounter) And FormattedStartDate = 0 Then
                ' Using MM/DD/YYYY format - this may be different for you
                FormattedStartDate = CDate(AryCounter + 1 & _
                    "/" & StartDay - MonthSet(AryCounter) & "/" & StartYear)  
            End If

            If EndDay > MonthSet(AryCounter) And FormattedEndDate = 0 Then
                FormattedEndDate = CDate(AryCounter + 1 & _
                    "/" & EndDay - MonthSet(AryCounter) & "/" & EndYear)
            End If
        Next AryCounter

        ContainedInMonth = IIf(Month(FormattedStartDate) = Month(FormattedEndDate), True, False)
    End If

End Function 
```

这是基于我自己的一些假设的测试代码（作为工作表函数或通过 VBA 工作）。（需要您的数据来确定测试...）如果您确实有特定的格式示例，我将更改此代码以匹配。

这假设您将正确的变量传递到函数中的正确位置。尽管您至少不应该收到任何错误，但没有对开始/结束日期顺序进行适当的检查。

此外，可能有更有效的方法来执行此操作，而不是循环遍历这些数组，但这是可行的。

简单地说，它的作用是计算给定开始周的第一天和给定结束周的最后一天的日期。如果这两个日期都在同一月份，则该函数返回 true。

通过细微的调整，我们可以报告第一周和上周的开始日期，以防您担心一周的开始而不是整周。

使用的测试用例：

```
Start   End     Result  
2012-01 2012-05 FALSE  
2012-01 2012-04 TRUE  
2012-05 2012-07 FALSE  
2012-25 2012-26 TRUE  
2012-52 2012-01 FALSE  
2012-28 2012-25 FALSE 
```

**编辑：**

按照您提供的示例，这是一个更新的函数。这将作为 VBA 函数按原样工作，返回您正在寻找的格式化日期/月份的数组（变体）。要将其转换为工作表函数，只需进行一些小的调整即可返回字符串（已在函数中创建 - 请参阅注释）。

我假设您的示例是错误的（请参阅我的测试用例），但是如果是我错了，则可以对其进行修改以使其正常工作。

```
Function ContainsWhatMonths(OriginalStartDate As String, _
    OriginalEndDate As String) As Variant

    Dim MonthSet As Variant
    Dim AryCounter As Integer, ISOOffset As Integer
    Dim StartYear As Integer, EndYear As Integer
    Dim StartWeek As Integer, EndWeek As Integer
    Dim StartDay As Integer, EndDay As Integer
    Dim StartWeekStartDate As Date, StartWeekEndDate As Date
    Dim EndWeekStartDate As Date, EndWeekEndDate As Date
    Dim FormattedStartDate As Date, FormattedEndDate As Date
    Dim TotalMonths As Integer, OutputMonths As String

    StartYear = Val(Right(OriginalStartDate, 4))
    StartWeek = Val(Left(OriginalStartDate, 2))
    EndYear = Val(Right(OriginalEndDate, 4))
    EndWeek = Val(Left(OriginalEndDate, 2))

    If StartYear <= EndYear Then

        ' Using the calculation from wikipedia. Honestly, I'm not sure that
        ' I understand this bit, but it seemed to work for my test cases.
        ISOOffset = Weekday(CDate("1/4/" & StartYear), vbMonday) + 3
        StartDay = (StartWeek * 7) - ISOOffset ' Adding 0 for start of week
        EndDay = (EndWeek * 7) + 6 - ISOOffset ' Adding 6 for end of week

        ' Set the starting day for each month, depending on leap year.
        If StartYear Mod 4 = 0 Then
            MonthSet = Array(0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335)
        Else
            MonthSet = Array(0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334)
        End If

        For AryCounter = 11 To 0 Step -1
            If StartDay > MonthSet(AryCounter) Then
                ' Using MM/DD/YYYY format - this may be different for you
                StartWeekStartDate = CDate(AryCounter + 1 & _
                    "/" & StartDay - MonthSet(AryCounter) & "/" & StartYear)
                StartWeekEndDate = StartWeekStartDate + 6

                If Month(StartWeekStartDate) <> Month(StartWeekEndDate) Then
                    FormattedStartDate = DateSerial(StartYear, Month(StartWeekEndDate), 1)
                Else
                    FormattedStartDate = DateSerial(StartYear, Month(StartWeekEndDate) + 1, 1)
                End If

                Exit For
            End If
        Next AryCounter

        If EndYear Mod 4 = 0 Then
            MonthSet = Array(0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335)
        Else
            MonthSet = Array(0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334)
        End If

        For AryCounter = 11 To 0 Step -1
            If EndDay > MonthSet(AryCounter) Then
                EndWeekStartDate = CDate(AryCounter + 1 & _
                    "/" & EndDay - MonthSet(AryCounter) & "/" & EndYear)
                EndWeekEndDate = EndWeekStartDate + 6

                If Month(EndWeekStartDate) <> Month(EndWeekEndDate) Then
                    FormattedEndDate = CDate(Month(EndWeekEndDate) & "/1/" & EndYear) - 1
                Else
                    FormattedEndDate = CDate(Month(EndWeekEndDate) & "/1/" & EndYear)
                End If

                Exit For
            End If
        Next AryCounter

        ' Switch the commenting on these two lines to return the string
        ContainsWhatMonths = Array()
        'ContainsWhatMonths = vbNullString

        TotalMonths = (Year(FormattedEndDate) - Year(FormattedStartDate)) * 12 + _
            Month(FormattedEndDate) - Month(FormattedStartDate)

        If TotalMonths >= 0 Then

            For AryCounter = 0 To TotalMonths
                OutputMonths = OutputMonths & "," & _
                    Format(DateAdd("m", AryCounter, FormattedStartDate), "MM/YYYY")
            Next

            OutputMonths = Right(OutputMonths, Len(OutputMonths) - 1)

            ' Switch the commenting on these two lines to return the string
            ContainsWhatMonths = Split(OutputMonths, ",")
            'ContainsWhatMonths = OutputMonths
        End If

    End If

End Function 
```

测试用例：

```
"18-2010", "20-2010"  'Null
"17-2010", "20-2010"  'Null
"17-2010", "21-2010"  '05/2010
"18-2010", "25-2010"  '06/2010
"17-2010", "25-2010"  '05/2010,06/2010
"19-2010", "26-2010"  '06/2010 
```

# c++ - 如何在 KeyEventArgs...VC++2010 中同时处理两个函数？

> ID：10207892
> 
> 赞同：1
> 
> 时间：2012-04-18T10:53:15.000
> 
> 标签：c++, visual-c++, c++-cli

下面将详细介绍

我有一堂课

```
//MyDataHeaders.h
public ref class MyGlobalData {
//blah...blah...blah...
public: static System::Void Pty_NameCell( System::Object^ Sender, System::Windows::Forms::KeyEventArgs^ e) {
//blah..blah...
}
}; 
```

在Form2中我有一个Sub ...如下所示..

```
//Form2.h
public: static System::Void MySupplier_LstVew() {
//blah..blah..
}
Form2_load() {
textBox2->KeyDown += gcnew KeyEventHandler(MyGlobalData::Pty_NameCell); //OK
}; 
```

但是在这里我想使用

```
textBox2->KeyDown +=delegate { gcnew KeyEventHandler(MyGlobalData::Pty_NameCell); MySupplier_LstVew(); }; 
```

如何一起申报`textBox2-> Keydwon`事件`(MyGlobalData::Pty_NameCell),MySupplier_LstVew()`？可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:01:57.303

是的，你可以

```
textBox2->KeyDown += gcnew KeyEventHandler(MyGlobalData::Pty_NameCell);
textBox2->KeyDown += gcnew KeyEventHandler(MySupplier_LstVew); 
```

# php - 奇怪的行为：带有 FSockopen 的 Apache PHP Windows

> ID：10207895
> 
> 赞同：0
> 
> 时间：2012-04-18T10:53:27.480
> 
> 标签：php, windows, apache, fsockopen

考虑这个简单的代码：

```
 <?php
   error_reporting(E_ALL);
   //error_reporting(E_STRICT);
   date_default_timezone_set('Asia/Calcutta');
   $smtp_server = fsockopen("onelocalserver.com", 25, $errno, $errstr, 120);
   if(!$smtp_server)
     {
  // We have an error, do something
  echo " Error found! <br>$errno <br>$errstr";
  exit;
     }
  ?> 
```

在 Windows XP + php5.3.8 + apache 2.2 上，我收到一个错误：警告：fsockopen(): 无法连接到 onelocalserver.com:25（无法连接，因为目标机器主动拒绝它。）

但是，在安装了 Apache 和 PHP 的同一系统上，如果我从命令提示符前运行 php：c:\php\php.exe filename.php （上面的代码在文件名中），那么我不明白错误！

服务器 onelocalserver.com 正在侦听端口 25：那里运行着一个 SMTP 服务器。

有任何想法吗？这真的很奇怪

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:48:09.607

在多次尝试使用不同的 IP 地址后，我意识到唯一的问题是端口 25 上的 fsockopen。它适用于命令行界面，但无法通过 Web 浏览器运行。PHP 早期作为 CGI 安装在 Windows 中。我想我会看看它在设置为 Apache 处理程序时是否仍然无法工作并且它可以工作！[http://www.php.net/manual/en/install.windows.apache2.php](http://www.php.net/manual/en/install.windows.apache2.php)。

希望这对某人有帮助！

# ruby-on-rails - 活动记录复杂关系查询

> ID：10207899
> 
> 赞同：0
> 
> 时间：2012-04-18T10:53:39.960
> 
> 标签：ruby-on-rails, activerecord

我有以下情况：

```
User->HABTM->businesses

Suppliers->HABTM->businesses

Suppliers->HAS_MANY->Payments 
```

我很难弄清楚如何通过描述业务->供应商和用户->业务关系的 HABTM 关系为用户获得所有付款。

我毕竟是通过供应商业务关系属于用户的付款。

我可以很容易地用 SQL 做到这一点，但在使用 rails 方式时遇到了麻烦。

这类似于通过帖子模型获取属于用户的所有评论的帖子。

任何帮助，将不胜感激。

甚至可能吗？

我现在正在这样做：

```
has_many :payments,:finder_sql => Proc.new {
  %Q{
    SELECT DISTINCT *
    FROM payments 
    INNER JOIN businesses_users ON businesses_users.user_id
    INNER JOIN businesses_suppliers ON businesses_suppliers.business_id        
    WHERE payments.supplier_id = businesses_suppliers.supplier_id AND businesses_users.user_id = #{id}
    ORDER BY payments.created_at
  }} 
```

这让我可以做 user.payments

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:55:30.617

有点时间紧迫，但想插话。首先，您的模型似乎表明用户和供应商之间可能存在 IS A 关系，在这种情况下，您可以使用多态关联。如果不是这种情况，我会查看 activerecord 查询界面中的包含选项。以这种方式，您基本上可以强制 AR 将关系急切地加载到链中。一个示例可能如下所示：

all_users_and_their_pmts = User.includes(:businesses => {:suppliers => :payments })

另一种但效率极低的方法是：

user_record.businesses.map {|b| b.suppliers.map {|s| s.payments}}.flatten

这将为您提供一系列付款。像上面那样使用原始 sql 会比这更有效，因为 activerecord 不能在 map{} 中链接调用。我认为 :include 对你来说是一种更惯用的方式，但你的解决方案并不可怕。

# sql - 在 SQL Server 中将 nvarchar ISO-8601 日期转换为日期时间

> ID：10207900
> 
> 赞同：8
> 
> 时间：2012-04-18T10:53:48.337
> 
> 标签：sql, sql-server, sql-server-2008, type-conversion

希望快一点。

以下不起作用：

```
DECLARE @stringDate nvarchar(50)
SET @stringDate = '0001-01-01T12:00:00'

SELECT 
    @stringDate AS StringDate,
    CONVERT(datetime, @stringDate, 126) AS ConvertedDate 
```

产生错误：将 nvarchar 数据类型转换为 datetime 数据类型导致值超出范围。

实现转换的最简单方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T10:59:39.547

类型`Datetime`不支持 0001 年。支持的范围是 1753 到 9999。
作为一种解决方法，您可以改用`DateTime2`类型

```
SELECT 
    @stringDate AS StringDate,
    CONVERT(datetime2, @stringDate, 126) AS ConvertedDate 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T11:00:45.177

它不起作用，因为对于数据[`DATETIME`类型](http://msdn.microsoft.com/en-us/library/ms187819.aspx)

> 日期范围 [is] 1753 年 1 月 1 日到 9999 年 12 月 31 日。

您必须使用[新的数据类型`DATETIME2`](http://msdn.microsoft.com/en-us/library/bb677335.aspx)：

```
SET ANSI_WARNINGS OFF;  --Not recommended
SET ARITHABORT OFF;     --Not recommended
DECLARE @stringDate nvarchar(50)
SET @stringDate = '0001-01-01T12:00:00'

SELECT 
    @stringDate AS StringDate,
    CONVERT(datetime, @stringDate, 126) AS Converted_DATETIME,
    CONVERT(datetime2, @stringDate, 126) AS Converted_DATETIME2_A,
    CONVERT(datetime2(0), @stringDate, 126) AS Converted_DATETIME2_B 
```

结果：

```
StringDate          Converted_DATETIME Converted_DATETIME2_A  Converted_DATETIME2_B
------------------- ------------------ ---------------------- ----------------------
0001-01-01T12:00:00 NULL               0001-01-01 12:00:00.00 0001-01-01 12:00:00
Arithmetic overflow occurred. 
```

`DATETIME2`注意：如果您的日期/时间值没有“小数秒精度” ，您可以更改数据类型的默认精度： `DATETIME2(0)`.

# php - 仅在我的网站中将所有页面重写为页面名称

> ID：10207901
> 
> 赞同：0
> 
> 时间：2012-04-18T10:53:49.477
> 
> 标签：php, html, url-rewrite-module

我创建了一个 php 网站。在这里，我在 .htaccess 文件中实现了干净的 URL。我需要显示 mu 链接 `mydomain/index.php`到`mydomain/index`

所以我用过

```
RewriteRule index index.php 
```

但是我有很多文件。那么我将如何为整个页面编写一个通用规则呢？

例如

```
RewriteRule hotels hotels.php 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:04:56.147

尝试这个：

```
#Setup
Options +FollowSymLinks
RewriteEngine On

#Remove trailing slashes
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=permanent,QSA]

#Your thing
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L,QSA] 
```

# php - 如果语句显示带有右括号的错误

> ID：10207903
> 
> 赞同：-1
> 
> 时间：2012-04-18T10:54:02.200
> 
> 标签：php, syntax-error

您好，我正在尝试制作一些随机数并进行简单的 mysql 更新，但由于某种原因，Dreamweaver 在右括号上显示错误。

```
<?php

if (isset($_POST['battle_move'])) {

$battle_move= mysql_real_escape_string($_POST['battle_move']);
$battle_move22 = strip_tags($battle_move);
$random_number = rand(1, 50); 
$a = $random_number ;
$b = 5;
$random_number1 = ($a * $b) ;

$random_number2 = rand(1, 50); 
$c = $random_number2 ;
$d = 5;
$random_number22 = ($c * $d) ;

mysql_query("UPDATE maplog SET wildpokemonhp=wildpokemonhp+".$random_number1." WHERE username = '".$_SESSION['username']."'")
mysql_query("UPDATE maplog SET userpokemonhp=userpokemonhp+".$random_number22." WHERE username = '".$_SESSION['username']."'")

    }
?> 
```

我将它上传到我的服务器并得到一个白页。我从来没有遇到过这是因为......它说最后一个}是问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:56:01.863

```
mysql_query("UPDATE maplog SET wildpokemonhp=wildpokemonhp+".$random_number1." WHERE username = '".$_SESSION['username']."'")
mysql_query("UPDATE maplog SET userpokemonhp=userpokemonhp+".$random_number22." WHERE username = '".$_SESSION['username']."'") 
```

你需要`;`在每个 mysql_query 之后有一个

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T10:56:05.280

缺少似乎是问题所在`;`。`mysql_query`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T10:55:58.993

你离开了 ; 在查询更新中。请纠正他们。

```
mysql_query("UPDATE maplog SET wildpokemonhp=wildpokemonhp+".$random_number1." WHERE username = '".$_SESSION['username']."'");
mysql_query("UPDATE maplog SET userpokemonhp=userpokemonhp+".$random_number22." WHERE username = '".$_SESSION['username']."'"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T10:56:14.140

在语句`;`末尾尝试终止符 ( )：`mysql_query()`

```
mysql_query("UPDATE maplog SET wildpokemonhp=wildpokemonhp+".$random_number1." WHERE username = '".$_SESSION['username']."'");
mysql_query("UPDATE maplog SET userpokemonhp=userpokemonhp+".$random_number22." WHERE username = '".$_SESSION['username']."'"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T10:56:45.930

失踪 ; 上：

```
mysql_query("UPDATE maplog SET wildpokemonhp=wildpokemonhp+".$random_number1." WHERE username = '".$_SESSION['username']."'") 
```

.

```
mysql_query("UPDATE maplog SET userpokemonhp=userpokemonhp+".$random_number22." WHERE username = '".$_SESSION['username']."'") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T10:59:14.260

请。写 ”;” 在每个 php 命令之后。

# database - 为什么我的 PostgreSQL 计划中的行数为 0？

> ID：10207905
> 
> 赞同：6
> 
> 时间：2012-04-18T10:54:06.777
> 
> 标签：database, postgresql, sql-execution-plan

我有一个查询，它使用嵌套循环对两个表 TableA 和 TableB 进行等值连接。由于“equi”-join 约束，结果中返回的所有行因此将对应于这两个表中的每一个中的至少一行。但是，根据计划 (EXPLAIN ANALYZE)，TableB 中的实际行数为 0，即使最终结果中返回了一行。*实际行*数如何在这里等于零？

这是执行计划：

```
=> explain analyze select p.id, p.title, s.count from products p, stock s where p.id = s.p_id and s.w_id = 6 and p.type = 9 and s.count > 0 order by p.title;
                                                          QUERY PLAN                                                          
------------------------------------------------------------------------------------------------------------------------------
 Sort  (cost=42.42..42.42 rows=2 width=36) (actual time=0.198..0.199 rows=1 loops=1)
   Sort Key: p.title
   Sort Method: quicksort  Memory: 25kB
   ->  Nested Loop  (cost=0.00..42.41 rows=2 width=36) (actual time=0.170..0.181 rows=1 loops=1)
         ->  Seq Scan on products p  (cost=0.00..9.25 rows=4 width=32) (actual time=0.068..0.106 rows=4 loops=1)
               Filter: (type = 9)
         ->  Index Scan using stock_pk on stock s  (cost=0.00..8.28 rows=1 width=8) (actual time=0.015..0.015 rows=0 loops=4)
               Index Cond: ((w_id = 6) AND (p_id = p.id))
               Filter: (count > 0)
 Total runtime: 0.290 ms 
```

以及两个表定义......产品表首先：

```
=> \d products
           Table "public.products"
 Column |          Type          | Modifiers 
--------+------------------------+-----------
 id     | integer                | not null
 title  | character varying(100) | 
 type   | integer                | 
 price  | double precision       | 
 filler | character(500)         | 
Indexes:
    "products_pkey" PRIMARY KEY, btree (id)
    "products_type_idx" btree (type)
Referenced by:
    TABLE "orderline" CONSTRAINT "orderline_p_id_fkey" FOREIGN KEY (p_id) REFERENCES products(id)
    TABLE "stock" CONSTRAINT "stock_p_id_fkey" FOREIGN KEY (p_id) REFERENCES products(id) 
```

库存表：

```
=> \d stock
     Table "public.stock"
 Column |  Type   | Modifiers 
--------+---------+-----------
 w_id   | integer | not null
 p_id   | integer | not null
 count  | integer | 
Indexes:
    "stock_pk" PRIMARY KEY, btree (w_id, p_id)
    "stock_p_id_idx" btree (p_id)
Foreign-key constraints:
    "stock_p_id_fkey" FOREIGN KEY (p_id) REFERENCES products(id)
    "stock_w_id_fkey" FOREIGN KEY (w_id) REFERENCES warehouses(id) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T08:23:37.713

内部索引扫描的实际行数是每次调用它时返回的平均行数。

查看[http://www.postgresql.org/docs/current/static/using-explain.html](http://www.postgresql.org/docs/current/static/using-explain.html)：

> 在某些查询计划中，可能会多次执行子计划节点。例如，在上述嵌套循环计划中，每个外部行执行一次内部索引扫描。在这种情况下，循环值报​​告节点的执行总数，显示的实际时间和行值是每次执行的平均值。这样做是为了使数字与成本估算的显示方式具有可比性。乘以循环值以获得在节点中实际花费的总时间。

我不确定它是如何四舍五入的（我猜测到最近的 int，在平均之后），但可能是大多数`products`行在`stock`.

# string - Unix在ksh中解析管道分隔的格式字符串

> ID：10207908
> 
> 赞同：2
> 
> 时间：2012-04-18T10:54:19.040
> 
> 标签：string, parsing, shell, unix, ksh

我正在编写 ksh 脚本来解析管道分隔的字符串

```
export dummy="abc"  
echo "123|456|789" | awk '{split($0,output,"|"); print output[3] output[2] output[1]}' 
```

上面的代码似乎有效，但我无法将 output[3] 的值分配给 dummy。

有没有办法进行这种解析，但我想将解析结果分配给 ksh 空间内的一个变量，即虚拟变量（在上面的示例中）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T13:43:02.190

外壳可以做到这一点：

```
line="123|456|789"
IFS='|' read a b c <<END
$line
END
echo $c  # => 789 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T11:02:38.147

您不能将 awk 变量（ie `output[3]`）分配给 shell 变量（ie `dummy`），您只能将 awk 的输出分配给一个变量，例如

```
export dummy=`echo "123|456|789" | awk -F'|' '{ print $3; }'` 
```

但是， awk 在这里有点矫枉过正，`cut`也可以正常工作：

```
export dummy=`echo "123|456|789" | cut -d'|' -f3` 
```

# ios - 检查 EKEvent 是否已经存在 iPhone

> ID：10207910
> 
> 赞同：0
> 
> 时间：2012-04-18T10:54:33.150
> 
> 标签：ios, ekevent

我正在尝试从我的应用程序将事件添加到日历中，但似乎我可以根据需要多次添加它。我只想添加一次，那么如何检查事件是否已经存在？我试图设置 eventIdentifier 属性，但它似乎是只读的。

# java - android以编程方式从字符串更改背景图像

> ID：10207912
> 
> 赞同：0
> 
> 时间：2012-04-18T10:54:38.417
> 
> 标签：java, android

> **可能重复：**
> [从字符串值设置 Android 图像](https://stackoverflow.com/questions/4313007/setting-android-images-from-string-value)

我需要使用我拥有的源字符串在 Android 上以编程方式更改背景图像。例如，我有一个从 XML 文件“source1”、“source2”等中获取的字符串数组，那么如何将它们设置为背景作为图像？我看到了类似的示例 `mTextView.setBackgroundResource(R.drawable.myResouce);`，但我不明白如何从字符串设置 mySource。可能通过可绘制对象有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:07:56.593

将您的图像名称保留在可绘制对象中，与 String.xml 中的名称相同。

**比如说：images.png**它应该是String.xml中的**图像**

如果您将此名称传递给**getResourceId()**，它将返回带有该字符串变量的 Drawable。

```
public static int getResourceId(Context context, String name, String resourceType) {
    return context.getResources().getIdentifier(name, resourceType, context.getPackageName());
}

int iconId = getResourceId(Activity.this, image, "drawable");    

ImageView categoryIcon = (ImageView) v.findViewById(R.id.category_icon);
categoryIcon.setImageResource(iconId); 
```

# git - gitolite问题

> ID：10207919
> 
> 赞同：1
> 
> 时间：2012-04-18T10:55:11.037
> 
> 标签：git, gitolite

我已将 gitolite 安装在充当 git 服务器的机器中。我已经在我的本地机器中克隆了那个 gitolite。配置了一些存储库和用户权限。在 gitolite.conf 中进行任何更改并推送它时，这些更改不会被纳入 gitolite.conf-compiled.pm 文件。每次我手动更正该文件中的更改（gitolite.conf-compiled.pm）。这里有什么问题。请澄清

# php - 我如何检查是否有标志 - 出现在 php 中的正则表达式？

> ID：10207925
> 
> 赞同：-4
> 
> 时间：2012-04-18T10:55:46.293
> 
> 标签：php, regex

如果条件：

```
if (preg_match('/^[a-zA-Z_]+\z/', $network_path)) 
```

跳过字符串，例如：bla-bla-bla-bla

我怎样才能改进这个正则表达式，让它接受像上面这样的字符串..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:07:07.830

这`[a-zA-Z_]`是一个[字符类](http://de2.php.net/manual/de/regexp.reference.character-classes.php)。此构造匹配方括号内定义的字符中的一个字符。

所以这个类匹配 a 到 z、A 到 Z 和下划线。如果你还想匹配一个破折号，你只需要将它添加到类中。但要小心，`-`是字符类中的特殊字符，所以如果你想从字面上匹配它，你需要将它转义或将它放在类的开头或结尾。

```
if (preg_match('/^[-a-zA-Z_]+\z/', $network_path)) 
```

或者

```
if (preg_match('/^[a-zA-Z_-]+\z/', $network_path)) 
```

或者

```
if (preg_match('/^[a-zA-Z\-_]+\z/', $network_path)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:59:26.437

```
if (preg_match('/^[-a-zA-Z_]+\z/', $network_path)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:09:42.727

（不是 PHP 人，所以 ymmv，但是......）

The characters inside the [] are treated as a character class by most perl compatible regex engines. Character classes can be followed my modifiers like the +, which will accept 1 or more characters from within that class. So if you simply add the dash inside the character class, you should get what you're looking for (or at least, you do in ruby!)

# php - 如何将javascript变量值分配给php变量

> ID：10207926
> 
> 赞同：4
> 
> 时间：2012-04-18T10:55:47.870
> 
> 标签：php, javascript

> **可能重复：**
> [如何将 JavaScript 变量传递给 PHP？](https://stackoverflow.com/questions/1917576/how-to-pass-javascript-variables-to-php)

我想将 javascript 变量分配给 php 变量

```
$msg = "<script>document.write(message)</script>";
$f = new FacebookPost;
$f->message  = $msg; 
```

但它不工作......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T10:57:47.673

PHP 在 javascript 之前执行。你不能那样做。PHP 是基于服务器的，JavaScript 是基于客户端的。

当 PHP 完成执行时，它会输出 HTML。在 HTML 中也可以有 JavaScript 代码。因此，PHP 可以通过将 JavaScript 代码输出到页面来“控制”JavaScript，但反之则不行。为此，您必须使用 Ajax-call。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T10:58:42.317

Javascript 在用户的计算机上运行，​​PHP 在您的服务器上运行。为了将变量从 JS 发送到 PHP，反之亦然，您需要诸如页面加载之类的通信。

看看这里你能做什么：[如何将 JavaScript 变量传递给 PHP？](https://stackoverflow.com/questions/1917576/how-to-pass-javascript-variables-to-php)或更具体地说，第一个答案（[https://stackoverflow.com/a/1917626/1311593](https://stackoverflow.com/a/1917626/1311593)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:59:37.980

Javascript，是客户端脚本，`PHP`服务器端脚本。

向 PHP 发送数据的唯一方法是通过`redirection`或`ajax`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T10:58:51.720

你不能这样做。*在*客户端执行脚本后，您必须*通过* 或传输值。`$_GET``$_POST``$_COOKIE`

# c# - GridView通过id获取数据

> ID：10207930
> 
> 赞同：1
> 
> 时间：2012-04-18T10:56:00.757
> 
> 标签：c#, asp.net, gridview

我无法得到答案，我非常需要它！

问题真的是我可以通过gridview上的选择通过id获取数据，但是然后我使用我在页面上实现的搜索选项，gridview显示它获得的与结果匹配的选项，但如果我按下选择它将重定向到具有错误 id 的页面，而不是获取我选择的那个的 id，而是获取位于单元格第一个位置的字段的 id。

这是代码：

```
protected void Page_Load(object sender, EventArgs e)
{

    TeamGest.DBLayer.DBLTeams dbl = new TeamGest.DBLayer.DBLTeams();
    GridView1.DataSource = dbl.List();
    GridView1.DataBind();

    TeamGest.DBLayer.DBLPlayers dbl1 = new TeamGest.DBLayer.DBLPlayers();
    GridView2.DataSource = dbl1.List();
    GridView2.DataBind();
}

protected void MyMenu_MenuItemClick(object sender, MenuEventArgs e)
{
    {
        MyMultiView.ActiveViewIndex = Int32.Parse(e.Item.Value);
        int i;
        for (i = 0; i <= MyMenu.Items.Count - 1; i++)
        {
            if (i == Convert.ToInt32(e.Item.Value))
            {
                MyMenu.Items[i].Text = MyMenu.Items[i].Text;
            }
            else
            {
                MyMenu.Items[i].Text = MyMenu.Items[i].Text;
            }
        }
    }
}

protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow row = GridView1.SelectedRow;

    Response.Redirect("DetalhesClube.aspx?Id="+row.Cells[0].Text);

}
protected void Button1_Click1(object sender, EventArgs e)
{
    string searchStringTeam = TextBox1.Text;
    GetTeamResults(searchStringTeam);
}
protected void GridView2_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow row = GridView2.SelectedRow;
    Response.Redirect("DetalhesJogador.aspx?Id=" + row.Cells[0].Text);
}

protected void Button2_Click(object sender, EventArgs e)
{
    string searchStringPlayer = TextBox2.Text;
    GetPlayerResults(searchStringPlayer);    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:54:50.100

不是在查询字符串中追加，而是`row.Cells[0].Text`在网格视图的项目模板中使用标签控件，在脚本端使用 eval 来填充控件。一旦填充了网格视图，标签也将填充 eval 脚本中给出的值。

现在使用 findcontrol c# 函数获取网格内标签的值并将该值附加到查询字符串中。

参考：[如何在 GridView 的 TemplateField 中找到控件？](https://stackoverflow.com/questions/6873973/how-to-find-control-in-templatefield-of-gridview)

# css - 在水平滚动父 div 时使子 DIv 保持固定

> ID：10207935
> 
> 赞同：0
> 
> 时间：2012-04-18T10:56:12.503
> 
> 标签：css, html, scroll

我有一个父 div 溢出，因此水平滚动，它包含一个网格和一些数据，它的分页控件位于它下面的另一个 div

问题是我希望即使滚动父 div 也能修复分页 div（仅 x 滚动）

```
<div style="overflow:scroll">
<table>data</table>
<div id="bottom">Paging</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:09:49.813

最简单的方法就是将底部 div 从容器中取出。这个 div 必须在容器内吗？

[http://jsfiddle.net/ollie/rTjB3/](http://jsfiddle.net/ollie/rTjB3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:20:53.363

你有几个选择：

1.  将您的分页对象[放在可滚动元素之外](http://jsfiddle.net/ppzCA/2/)
2.  使用`position:fixed;`. 但是请注意，具有固定位置的元素是根据浏览器视口而不是父元素定位的。这意味着，您必须知道元素的尺寸才能将寻呼机放置在正确的位置。

编辑： [固定位置的小提琴](http://jsfiddle.net/ppzCA/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-17T21:59:16.700

**可滚动 div 中的固定 div**

```
#container {
    position:absolute;
     top:150px;
    left:150px;
    width:500px;
    height:500px;
    overflow:hidden;
     border:3px dashed #ffff00;
     padding:0px;
    }

#this_scroll {
    position:absolute;
    top:0px;
    right:0px;
    width:99%;
    height:99%;
    overflow:scroll;
    border:2px solid #000;
    margin:1px;
    background:#B0BDCE;
    }

#close {
     position:absolute;
    top:2px;
     right:21px;
    width:90px;
    height:30px;
    overflow:none;
    border:2px solid #660099;
    z-index:10;
    background:#8C8C8C;
    }

<div id="container">

    <div id="this_scroll">
    <p> some </p> <p> some </p> <p> some </p>
    </div>

    <div id="close">
        close
    </div>

</div> 
```

# frame-rate - 估计帧速率

> ID：10207937
> 
> 赞同：1
> 
> 时间：2012-04-18T10:56:14.637
> 
> 标签：frame-rate

我正在开发一个稍微动画的应用程序（在 c++ 中使用 opengl）。为此，我需要知道系统能够达到的帧速率。我现在要做的是计算最后一个显示动作的帧率，然后将其与历史平均。这有点作用：平均速率仍然相当跳跃。这个问题必须至少解决一次（例如文件复制进度对话框），所以我在想：应用低通滤波器会有所帮助吗？那我应该使用什么值？我的猜测是我应该删除所有高于 60Hz 左右的频率？（我的显示器以 60Hz 的频率刷新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:37:20.183

奇怪的是平均帧速率是跳跃的，除非你禁用垂直同步（好吧，我猜你做到了，因为你的频率首先高于你的刷新率;））

只是一个预感：也许你应该得到 x 帧历史的第二个[四分位数](http://en.wikipedia.org/wiki/Quartile)（= 中位数）（用 x 进行实验；））而不是平均值 :)

# drupal - 与drupal相关的netbeans电子邮件服务器

> ID：10207947
> 
> 赞同：0
> 
> 时间：2012-04-18T10:57:03.017
> 
> 标签：drupal, netbeans

我正在使用一个drupal 网站，该网站在windows 的apache 上使用netbeans，因此通过glassfish 进行部署。每次我尝试发送电子邮件时，我都会收到以下消息：

> 无法发送电子邮件。如果问题仍然存在，请联系站点管理员。

卖给我们服务器的公司，也给了我们邮件服务器（mirodinero.com 是网站）。我不明白的是我们在netbeans项目上设置了一个不同的服务器（在netbeans的配置属性中，它是smtp.mirotele.com），而我们有

`POP server: mail.mirodinero.com` `SMTP server: smtp.mirodinero.com` `IMAP server: mail.mirodinero.com`

我应该放哪一个而不是 smtp.mirotele.com？

然后，仍然在配置属性中，它要求我输入电子邮件的用户名和密码。我应该在哪里搜索这些数据？不应该是公司给我必要的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:09:15.410

好的，由于您的建议，我修复了 smtp 模块，现在至少 drupal 会发送通知电子邮件，例如更改密码等。现在不起作用的是联系表，我在查看 drupal 的 dblog 时收到此消息：

`从 cl----e@mirodinero.com 向 st---s@hotmail.it 发送电子邮件时出错：错误 SMTP：Los siguientes destinatarios fallaron: stokks@hotmail.it

SMTP 服务器错误：5.7.1：发件人地址被拒绝：不属于用户 bed513c`

现在有什么问题？我在互联网上搜索并没有找到解决方案，因为例如 bed513c 是我在 smtp 模块管理页面中设置的 cl----e@mirodinero.com 的实际用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:35:37.817

要通过 SMTP 发送带有身份验证的电子邮件，您需要 PHPMailer 或 SMTP 模块。据我所知，他们做同样的事情。是的，您的提供商**绝对应该**为您提供 SMTP 服务器的登录信息。否则，它可能会成为开放中继（垃圾邮件发送者使用的服务器）。

1.  [http://drupal.org/project/phpmailer](http://drupal.org/project/phpmailer)
2.  [http://drupal.org/project/smtp](http://drupal.org/project/smtp)

# asp.net-mvc-3 - ASP.Net MVC 3 EditorFor CheckBoxList

> ID：10207951
> 
> 赞同：3
> 
> 时间：2012-04-18T10:57:30.850
> 
> 标签：asp.net-mvc-3, viewmodel, checkboxlist, editorfor

我正在使用 Entity Framework 4.1 开发一个 ASP.Net MVC 3 Web 应用程序。我无法显示 CheckBoxList。让我解释。

我有两个 ViewModel

```
public class ViewModelShiftSubSpecialties
{
    public IEnumerable<ViewModelCheckBox> SpecialtyList { get; set; }
}

public class ViewModelCheckBox
{
    public string Id { get; set; }
    public string Name { get; set; }
    public bool Checked { get; set; }
    public string Specialty { get; set; }
} 
```

在我的控制器中，我填充了我的 ViewModels

```
 IList<RelationshipGradeSub> gradeSubSpecialties = GetSubSpecialtiesForGrade(firstShiftGrade.gradeID);

        ViewModelShiftSubSpecialties viewModel = new ViewModelShiftSubSpecialties();

        var checkBoxList = new List<ViewModelCheckBox>();

        foreach (var item in gradeSubSpecialties)
        {
            ViewModelCheckBox chkBox = new ViewModelCheckBox { Id = item.subID.ToString(), Name = item.ListSubSpecialty.description, Checked = false, Specialty=item.ListSubSpecialty.ListItemParent.description };
            checkBoxList.Add(chkBox);
        }

        viewModel.SpecialtyList = checkBoxList;

        return View(viewModel); 
```

我还有一个部分视图，它用作 EditorTemplate 来显示我的复选框

```
@Html.HiddenFor(x => x.Id)        
@Html.CheckBoxFor(x => x.Checked)
@Html.LabelFor(x => x.Name, Model.Name)<br /> 
```

然后在我的视图中，我尝试过滤 Model.Specialty 并根据它们的专业将项目分类为三个复选框列表，即：

```
@foreach (var sub in Model.SpecialtyList)
{
if (sub.Specialty.Equals("Medicine"))
{
    @Html.EditorFor(m => m.SpecialtyList)
}
else if (sub.Specialty.Equals("Surgery"))
{
    @Html.EditorFor(m => m.SpecialtyList)
}
else if (sub.Specialty.Equals("Pathology"))
{
    @Html.EditorFor(m => m.SpecialtyList)
}

} 
```

但这似乎根本不起作用，这给我的是第一个或第二个复选框列表中的任何内容，然后是第三个复选框列表中的所有列表项。基本上我想要实现的是这样的

![在此处输入图像描述](../Images/e22ce1720da7932619e9a53feca74f19.png)

有人可以给我一些指示以使其正常工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:10:04.037

我猜您用于显示复选框的 EditorTemplate 是用于类型`ViewModelCheckBox`：

```
@Html.HiddenFor(x => x.Id)        
@Html.CheckBoxFor(x => x.Checked)
@Html.LabelFor(x => x.Name, Model.Name)<br /> 
```

在这种情况下，您在`List<ViewModelCheckBox>`使用时发送`@Html.EditorFor(m => m.SpecialtyList)`，但您应该发送的是 ViewModelCheckBox：

```
@Html.EditorFor(m => sub) 
```

我希望我正确地理解了你。

# iphone - 使用 xcrun PackageApplication 退出 ipa 会阻止 IPA 安装

> ID：10207954
> 
> 赞同：1
> 
> 时间：2012-04-18T10:57:41.740
> 
> 标签：iphone, ios, ipad

我正在使用 xcodebuild 以非常标准的方式构建我的 AD Hoc 分发应用程序。在构建配置文件 (profileA) 的过程中，应用程序使用证书 (certA) 进行签名 - SDKSettings.plist 中的 CODE_SIGNING_REQUIRED 设置为 YES。构建后，我想嵌入不同的配置文件（profileB）并使用不同的证书（certB）为我的应用程序签名。为此，我正在使用：

```
SIGNING_IDENTITY=certB
PROVISIONING_PROFILE=full/path/to/profileB

/usr/bin/xcrun  PackageApplication -v "${CONFIGURATION_BUILD_DIR}/${PROJECT_NAME}.app" -o "${CONFIGURATION_BUILD_DIR}/${IPAFILE}" --sign "${SIGNING_IDENTITY}" --embed "${PROVISIONING_PROFILE}" 
```

IPA 包已成功创建，配置文件 (profileB) 已嵌入并使用新证书 (certB) 签名，但不幸的是我无法在设备上安装包。安装过程中安装进度条挂在4/5，并弹出错误消息“无法下载程序。您现在无法安装'XXX'。” 带有关闭和重试按钮。（这是我的翻译，所以可能不是 100% 准确）。当然，设备 UDID 包含在配置文件中。如果我不退出包，则应用程序可能会安装在设备上（使用 profielA 和 certA），如果我在 XCODE 设置中设置使用 certB 和 profileB，也可能会安装包。你知道可能是什么问题吗？看起来好像有什么东西阻止我的包安装在设备上，但我没有

问候！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-23T06:47:02.420

Xcrun PackageApplication 不处理权利，因此不能以这种方式使用完全不同的证书/配置文件对包进行签名。

# internet-explorer - Highcharts / highstock 如何在 IE 中更改图表标题？

> ID：10207957
> 
> 赞同：0
> 
> 时间：2012-04-18T10:57:49.863
> 
> 标签：internet-explorer, highcharts, highstock

我想动态更改图表标题。使用不同于 IE 的浏览器，它很简单：

```
$('.highcharts-title>tspan','#container').text('some text'); 
```

如何在 IE 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:51:46.153

如果您有图表对象，则可以使用 setTitle 方法，详情请参阅[http://www.highcharts.com/ref/#chart-object](http://www.highcharts.com/ref/#chart-object)。

否则，您将需要一个不同的 IE 选择器，因为您不需要子 tspan，因为标题只是一个跨度。（这是用 IE8 的，其他版本可能会有不同的呈现方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:22:05.213

适用于所有浏览器：

```
$('.highcharts-title','#container').text('some text'); 
```

# oracle - 使用 rman 备份 oracle 数据库时出错

> ID：10207958
> 
> 赞同：0
> 
> 时间：2012-04-18T10:57:51.190
> 
> 标签：oracle, rman

这就是我在不登录 oracle 10g 数据库的情况下尝试备份数据库的方式。谁能告诉我为什么会出现此错误以及我应该如何尝试解决它？

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\sunanda>cd C:\oraclexe

C:\oraclexe>cd app

C:\oraclexe\app>cd oracle

C:\oraclexe\app\oracle>cd product

C:\oraclexe\app\oracle\product>cd 10.2.0

C:\oraclexe\app\oracle\product\10.2.0>cd server

C:\oraclexe\app\oracle\product\10.2.0\server>cd bin

C:\oraclexe\app\oracle\product\10.2.0\server\BIN>dir rman.exe
Volume in drive C has no label.
Volume Serial Number is 40EF-0556

Directory of C:\oraclexe\app\oracle\product\10.2.0\server\BIN

02/02/2006  12:43 AM         1,552,384 rman.exe
           1 File(s)      1,552,384 bytes
           0 Dir(s)  14,177,832,960 bytes free

C:\oraclexe\app\oracle\product\10.2.0\server\BIN>set ORACLE_SID=demo

C:\oraclexe\app\oracle\product\10.2.0\server\BIN>echo %ORACLE_SID%
demo

C:\oraclexe\app\oracle\product\10.2.0\server\BIN>rman target / 
```

执行此操作后，我收到如下错误：

```
 Recovery Manager: Release 10.2.0.1.0 - Production on Wed Apr 18 14:46:35 2012

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-00554: initialization of internal recovery manager package failed
RMAN-04005: error from target database:
ORA-12560: TNS:protocol adapter error

C:\oraclexe\app\oracle\product\10.2.0\server\BIN> 
```

我尝试搜索此错误，但无法确切了解如何解决。 [http://www.youtube.com/watch?v=8dA6BYxF_YE&feature=related](http://www.youtube.com/watch?v=8dA6BYxF_YE&feature=related)。这是我在执行此操作时提到的视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:02:46.017

您已将其设置`ORACLE_SID`为`demo`- 但没有这样的 SID。检查安装数据库时配置的 SID 并相应地设置。

如果您需要查找 SID，请打开服务列表 ( `Win`+ `R`) 类型`services.msc`。搜索类似`OracleServiceXYZ123`. 后面的字符`OracleService`将是 SID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T10:26:28.593

刷新您的共享池；它肯定会奏效。尝试这个：

SQL> 改变系统刷新共享池；

系统变了。

# sql - SQL Server 嵌套报告结构/分层

> ID：10207960
> 
> 赞同：1
> 
> 时间：2012-04-18T10:58:01.830
> 
> 标签：sql, sql-server-2008

我有一张这样的桌子

```
Id       Name        ReportingId
==
1        Stala       Null
2        Coma        1
3        Rita        1
4        Rosy        2
5        sss         4 
```

我想要一个递归查询来查找单列中的所有报告 ID。

例如，对于 id 5，输出应始终为 null

```
4
2
1
null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:05:16.913

下面是一个使用递归公用表表达式 (CTE) 的示例：

```
; with  cte as
        (
        select  ReportingID
        from    YourTable
        where   id = 5
        union all
        select  yt.ReportingID
        from    YourTable yt
        join    cte
        on      cte.ReportingID = yt.id
        )
select  *
from    cte 
```

[SQL Fiddle 上的示例。](http://sqlfiddle.com/#!3/4d501/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:06:28.917

像这样的东西：

**测试数据**

```
DECLARE @T TABLE(Id int,Name VARCHAR(5),ReportingId INT)

INSERT INTO @T
VALUES
    (1,'Stala',Null),
    (2,'Coma',1),
    (3,'Rita',1),
    (4,'Rosy',2),
    (5,'sss',4) 
```

**询问**

```
;WITH CTE
AS
(
    SELECT
        NULL AS Id,
        t.ReportingId
    FROM
        @T AS t
    WHERE
        t.Id=5
    UNION ALL
    SELECT
        t.Id,
        t.ReportingId
    FROM
        @T AS t
        JOIN CTE
            ON t.Id=CTE.ReportingId
)
SELECT
    CTE.Id
FROM
    CTE 
```

**结果**

```
NULL
4
2
1 
```

# tfs - TFS 项目路径

> ID：10207962
> 
> 赞同：0
> 
> 时间：2012-04-18T10:58:24.967
> 
> 标签：tfs, tfs-sdk

我的要求是在远程机器上自动部署我的项目。目前我的项目驻留在 TFS 服务器中。

在我的项目中，我有一个名为*Database*的文件夹，我曾经将 sql 脚本添加到该文件夹​​并签入 TFS 的完整解决方案。为了运行远程机器的脚本，我需要从 TFS 获取最新的脚本。那么如何获取 *数据库*文件夹和关联文件（.sql 文件）的路径。我正在使用 tfs api 从 tfs 检索有关项目的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:16:12.250

我建议使用 Visual Studio DB 专业版来执行此操作，而不仅仅是源代码管理中的文件夹。

看到这个帖子

[如何与 TFS 共享数据库？](https://stackoverflow.com/questions/6826759/how-do-i-share-a-database-with-tfs/6828347#6828347)

但如果您仍想对您的文件夹执行此操作，您可以使用 Workspace.Get() 和适当的选项

```
Workspace.Get() 
```

有关更多信息，请参阅本文

[http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workspace.get.aspx](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workspace.get.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:52:11.673

[SQL Server Data Tools 2012](http://msdn.microsoft.com/en-us/data/gg427686)是 Microsoft 套件的最新成员，用于自动部署和同步 SQL Schema。

Visual Studio 附带的数据库开发工具现在只是 Visual Studio 2010 Premium 和 Ultimate 的一部分。

# php - 正在显示 PHP 中允许的目录

> ID：10207964
> 
> 赞同：-1
> 
> 时间：2012-04-18T10:58:34.333
> 
> 标签：php, mysql, file, upload

我正在做一个系统，允许工作人员上传文件让学生查看/下载它。我已经设法在页面上显示该特定模块的内容（所有文件），用户可以查看或下载它，但我只是想知道是否可以允许工作人员创建一个文件夹并上传一个文件在那里然后管理该文件夹，例如删除该文件夹并进入该文件夹并删除该特定文件夹中的选定文件。

所以类似于网页上的文件管理器。我正在尝试实现一个基本的黑板类型系统。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:00:57.570

您可以使用`mkdir( $pathname )`PHP 中的方法来创建目录。

[http://php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)

在文件上传方面，我创建了一个简单易用的 PHP 类，您可以使用它来上传图片：

[https://github.com/tehlulz/PHP-上传](https://github.com/tehlulz/PHP-Upload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:01:44.683

我可以这样做：

1.  创建一个表，该表将存储员工有权限的目录
2.  在控制面板上，使用 WHERE 子句显示允许的所有目录
3.  让他们做事……删除、编辑等

# matlab - matlab：关于eps范围错误

> ID：10207965
> 
> 赞同：0
> 
> 时间：2012-04-18T10:58:39.177
> 
> 标签：matlab, eps

我对matlab中的eps有疑问。我需要知道 eps（舍入误差）是否是一个像统一误差一样定义的错误，它是定义为半范围还是全范围？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:17:06.937

来自[matlab 文档](http://www.mathworks.com/help/techdoc/ref/eps.html)。

Eps 定义为从 1.0 到下一个最高浮点数的距离。它不会给你一个舍入误差，而是两个数字之间的确切距离。

# objective-c - 试图让这个从 Objective-C 到 MonoMac 的移植工作

> ID：10207967
> 
> 赞同：1
> 
> 时间：2012-04-18T10:58:42.203
> 
> 标签：objective-c, mono, port, dllimport

谁能帮我把这个从 Objective-C 移植到 MonoMac 的工作？

```
CGEventSourceRef eventSource = CGEventSourceCreate(kCGEventSourceStateHIDSystemState);

CGEventRef keyEventDown = CGEventCreateKeyboardEvent(eventSource, 0, true); 

NSString * characters = @"ABCD";

UniChar buffer;

for (int i = 0; i < [characters length]; i++)
{
    [characters getCharacters:&buffer range:NSMakeRange(i, 1)];

    keyEventDown = CGEventCreateKeyboardEvent(eventSource, 1, true);

    CGEventKeyboardSetUnicodeString(keyEventDown, 1, &buffer);

    CGEventPost(kCGHIDEventTap, keyEventDown);

    CFRelease(keyEventDown);
}

CFRelease(eventSource); 
```

我使用以下代码导入了 DLL，但我不知道如何处理 Objective-C 的 UniChar。我不知道我应该在 Objective-C 更改的 C# 中使用哪种类型。这是一个 Obj-C 需要更改的指针，我可以再次在我的 C# 代码中访问它。

```
using System;

using System.Runtime.InteropServices;

using MonoMac;

namespace SomeNameSpace
{

public unsafe static class Native
{
    [DllImport(Constants.CoreGraphicsLibrary)]
    public static extern IntPtr CGEventCreateKeyboardEvent(IntPtr source, ushort virtualKey, bool keyDown);

    [DllImport(Constants.CoreGraphicsLibrary)]
    public static extern void CGEventKeyboardSetUnicodeString(IntPtr @event, ulong stringLength, char* unicodeString);

    [DllImport(Constants.CoreGraphicsLibrary)]
    public static extern IntPtr CGEventSourceCreate(CGEventSourceStateID stateID);

    [DllImport(Constants.CoreGraphicsLibrary)]
    public static extern void CGEventPost(CGEventTapLocation tap, IntPtr @event);

    [DllImport(Constants.CoreFoundationLibrary)]
    public static extern void CFRelease (IntPtr cf);
}

public enum CGEventTapLocation:uint
{
    kCGHIDEventTap = 0,

    kCGSessionEventTap,

    kCGAnnotatedSessionEventTap
}

public enum CGEventSourceStateID:int
{
    kCGEventSourceStatePrivate = -1,

    kCGEventSourceStateCombinedSessionState = 0,

    kCGEventSourceStateHIDSystemState = 1
}
}

public unsafe void SomeMethod()
{
    IntPtr eventSource = Native.CGEventSourceCreate(CGEventSourceStateID.kCGEventSourceStateHIDSystemState);

IntPtr keyEventDown = Native.CGEventCreateKeyboardEvent(cgEventSource,0,true);

string characters = @"ABCD";

char buffer;

for (int i = 0; i < characters.Length; i++)
{
    buffer = characters[i];

    keyEventDown = Native.CGEventCreateKeyboardEvent(eventSource, 1, true);

    Native.CGEventKeyboardSetUnicodeString(keyEventDown, 1, &buffer);

    Native.CGEventPost(CGEventTapLocation.kCGHIDEventTap, keyEventDown);

    Native.CFRelease(keyEventDown);
}

Native.CFRelease(eventSource);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:20:50.743

`unichar`是用于保存单个 UTF-16 代码单元的无符号 16 位类型。一个 UTF-16 字符由 1 个或 2 个 unichars（通常是 1 个）组成。在 C# 中，它就像`char`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-23T23:44:04.413

我找到了解决方案！

只需这个小小的改动，它就对我有用：

```
public static extern void CGEventKeyboardSetUnicodeString(IntPtr @event, uint stringLength, char* unicodeString); 
```

代替

```
public static extern void CGEventKeyboardSetUnicodeString(IntPtr @event, ulong stringLength, char* unicodeString); 
```

祝你有美好的一天 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:18:49.963

在 C 中， a`UniChar`等价于 a `unsigned short`。

# perl - 使用Perl在句子中匹配单词边界的正则表达式？

> ID：10207973
> 
> 赞同：1
> 
> 时间：2012-04-18T10:59:06.853
> 
> 标签：perl

他们是一种将以下句子中的单词与单词边界匹配的方法，并且应该在单词的右侧或左侧匹配带有破折号、bracket、逗号、句号等的单词。

例如：

```
 $str = "The quick brown fox (jump) over the lazy dog yes jumped, fox is quick jump, and jump-up and jump."; 
```

如何使用 perl 正则表达式匹配示例句子中单词“jump”的 4 次出现？

注意：我不想匹配“跳跃”这个词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T11:17:39.100

```
my @words = $str =~ m{\bjump\b}g;
print "@words\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T11:07:12.163

> 单词边界 ("\b") 是两个字符之间的一个点，它的一侧有一个“\w”，另一侧有一个“\W”（以任意顺序），计算虚构字符字符串的开头和结尾与“\W”匹配。

-- [perldoc perlre > 断言](http://perldoc.perl.org/perlre.html#Assertions)

```
foreach($str=~/\b(jump)\b/g){
    print "$1\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:54:14.980

```
print "$_\n" for $str =~ /\bjump\b/g; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T06:36:36.990

```
my @arr = $string =~ m{\bjump\b}g;
print "@arr\n"; 
```

# svn - 如何将组访问添加到 SVN+LDAP 访问？

> ID：10207976
> 
> 赞同：0
> 
> 时间：2012-04-18T10:59:18.380
> 
> 标签：svn, apache

我已经使用 ldap 设置了一个系统来控制对 svn repos 的访问。

目前 ldap 用户可以获得对存储库的完全访问权限。

我想要实现的目标：在 ldap 中为一个 svn 存储库设置 2 个组：

*   项目开发者

*   project_guest

在哪里

*   project_developer 具有读写权限

*   project_guest 具有只读访问权限。

有谁知道如何使这项工作？或任何提示将不胜感激

提前致谢。

环境

*   CentOS 4.9 版（最终版）
*   阿帕奇 2
*   颠覆版本 1.4.6 (r28521)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-09T06:33:46.053

```
<Location />
      AuthBasicProvider ldap
      AuthType Basic
      AuthName "SVN Server"
      #general user for ldap requests which password never expire
      AuthLDAPBindDN insertLdapUserHere
      AuthLDAPBindPassword insertPasswordForLdapUserHere
      AuthLDAPURL ldap://ldapServerHostName.companyXYZ.com:3268/?userPrincipalName?sub?(objectClass=user)
      Require valid-user

    </Location>
    <Location /path/to/repo/which/apear/in/webbrowser>

      # Uncomment this to enable the repository
      DAV svn

      # Set this to the path to your repository
      SVNPath /absolute/path/to/the/repo

      #set order of authentification
      Order Deny,Allow
      #generally disallow for all
      Deny from all
      #only allow for Germany and Amerika
      Allow from GER.companyXYZ.com US.companyXYZ.com
      # allow read and write access to ldap modify group
      # IMPROTANT: User full qualified name for group
      Require ldap-group CN=Modiy-GroupName,OU=Groups,OU=DomainName,DC=companyXYZ,DC=com
      # for read request allow all users in the read group
      # Limit handle only the read access commands, if such a command will be received, it checks the Read-Group
      <Limit OPTIONS PROPFIND GET REPORT>
        Require ldap-group CN=Read-GroupName,OU=Groups,OU=DomainName,DC=companyXYZ,DC=com
      </Limit>
    </Location> 
```

# osgi - 在 Apache Felix 中部署战争文件？

> ID：10207977
> 
> 赞同：5
> 
> 时间：2012-04-18T10:59:19.123
> 
> 标签：osgi, war, apache-felix, pax, pax-runner

我正在尝试将应用程序部署到 Apache Felix。这是一个 gwt 应用程序，但我一直在简化问题，直到只是一个 hello world html 文件，所以我的问题是在 war 文件中部署任何类型的 Web 应用程序。我还尝试在 Apache Karaf 中部署生成的战争，并且它们可以正常工作（一旦您[安装了功能 war](http://karaf.apache.org/manual/latest-2.2.x/users-guide/web-applications.html)）。

所以，现在我有这个：

```
blaxter@duffman:~/devel/webapp $ tree
.
├── pom.xml
├── src
    └── main
        ├── resources
        └── webapp
            ├── foobar.html
            └── WEB-INF
                └── web.xml 
```

pom.xml 非常简单，有趣的部分与 felix 插件有关，但对于这场没有任何编译代码的战争来说，这并不重要......

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.mycompany</groupId>
<artifactId>webapp</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>webapp Maven Webapp</name>
<url>http://maven.apache.org</url>
<dependencies>
    <dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>provided</scope>
    </dependency>
</dependencies>
<build>
    <finalName>webapp</finalName>

    <plugins>
    <plugin>
        <groupId>org.apache.felix</groupId>
        <artifactId>maven-bundle-plugin</artifactId>
        <version>2.3.7</version>
        <extensions>true</extensions>
        <executions>
        <execution>
            <id>bundle-manifest</id>
            <phase>process-classes</phase>
            <goals>
            <goal>manifest</goal>
            </goals>
        </execution>
        </executions>
        <configuration>
        <supportedProjectTypes>
            <supportedProjectType>jar</supportedProjectType>
            <supportedProjectType>bundle</supportedProjectType>
            <supportedProjectType>war</supportedProjectType>
        </supportedProjectTypes>
        <instructions>
            <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
            <Bundle-Version>${project.version}</Bundle-Version>
            <Embed-Dependency>*;scope=compile|runtime</Embed-Dependency>
            <Embed-Directory>WEB-INF/lib</Embed-Directory>
            <Embed-Transitive>true</Embed-Transitive>
            <Import-Package>*;resolution:=optional</Import-Package>
            <Web-ContextPath>/sample</Web-ContextPath>
            <Webapp-Context>/sample</Webapp-Context>
            <_wab>src/main/webapp</_wab>
        </instructions>
        </configuration>
    </plugin>

    <plugin>
        <groupId>org.ops4j</groupId>
        <artifactId>maven-pax-plugin</artifactId>
        <configuration>
        <provision>
            <param>--platform=felix</param>
            <param>--profiles=compendium,web,war,log</param>
            <param>--log=debug</param>
        </provision>
        </configuration>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        <executions>
        <execution>
            <phase>compile</phase>
            <goals>
            <goal>exploded</goal>
            </goals>
        </execution>
        </executions>
        <configuration>
        <webappDirectory>${webappDirectory}</webappDirectory>
        <archive>
            <!-- add the generated manifest to the war -->
            <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
        </archive>
        </configuration>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
        <source>1.6</source>
        <target>1.6</target>
        </configuration>
    </plugin>
</plugins>
</build>
</project> 
```

pax 插件也在那里，因为我尝试使用它运行应用程序，但我得到了相同的结果。web.xml 是一个空的：

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
  <display-name>Archetype Created Web Application</display-name>
  <welcome-file-list>
    <welcome-file>foobar.html</welcome-file>
  </welcome-file-list>
</web-app> 
```

一旦你执行*mvn package*来生成 war 文件，如果我在 Apache Felix 中部署它，我不会收到任何错误，捆绑状态是活动的，但我在尝试访问 /sample 路径时只会收到 404 错误。我尝试将 sample 和 /sample 作为上下文路径值。*运行mvn pax:run 也会*发生相同的行为。如果我在 Apache karaf 中部署战争，它会起作用，所以我会假设我对 felix 做错了什么。

我目前的捆绑清单是：

```
g! lb
START LEVEL 1
ID|State      |Level|Name
 0|Active     |    0|System Bundle (4.0.2)
 1|Active     |    1|JXSE (2.7.0)
 2|Active     |    1|Apache Felix Bundle Repository (1.6.6)
 3|Active     |    1|Apache Felix Configuration Admin Service (1.2.8)
 4|Active     |    1|Apache Felix EventAdmin (1.2.14)
 5|Active     |    1|Apache Felix File Install (3.2.0)
 7|Resolved   |    1|Apache Felix Security Provider (2.0.1)
 8|Active     |    1|Apache Felix Gogo Command (0.12.0)
 9|Active     |    1|Apache Felix Gogo Runtime (0.10.0)
10|Active     |    1|Apache Felix Gogo Shell (0.10.0)
11|Active     |    1|Apache Felix Http Api (2.2.0)
12|Active     |    1|Apache Felix Http Base (2.2.0)
13|Active     |    1|Apache Felix Http Bridge (2.2.0)
14|Active     |    1|Apache Felix Http Bundle (2.2.0)
15|Active     |    1|Apache Felix Http Jetty (2.2.0)
16|Active     |    1|Apache Felix Log Service (1.0.1)
17|Active     |    1|Apache Felix Shell Service (1.4.2)
18|Active     |    1|OPS4J Pax Logging - API (1.6.3)
19|Active     |    1|OPS4J Pax Logging - Service (1.6.3)
20|Active     |    1|OPS4J Pax Url - mvn: (1.2.8)
21|Active     |    1|OPS4J Pax Url - war (1.2.8)
22|Active     |    1|OPS4J Pax Url - wrap: (1.2.8)
23|Active     |    1|OPS4J Pax Web - API (1.0.9)
24|Active     |    1|OPS4J Pax Web - FileInstall Deployer (1.0.9)
25|Active     |    1|OPS4J Pax Web - Extender - WAR (1.0.9)
26|Active     |    1|OPS4J Pax Web - Extender - Whiteboard (1.0.9)
27|Active     |    1|OPS4J Pax Web - Jetty Bundle (1.0.9)
28|Active     |    1|OPS4J Pax Web - Jsp Support (1.0.9)
29|Active     |    1|OPS4J Pax Web - Runtime (1.0.9)
30|Active     |    1|OPS4J Pax Web - Service SPI (1.0.9) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:20:55.867

做这项工作的包是 OPS4J-* 的，但运行码头的包是 org.apache.felix.http.*。一旦我删除了**org.apache.felix.http.***捆绑包，一切都开始工作了。

# c# - C# 泛型约束：不能从使用中推断类型

> ID：10207978
> 
> 赞同：1
> 
> 时间：2012-04-18T10:59:19.767
> 
> 标签：c#, generics

> **可能重复：**
> [没有使用泛型扩展方法进行类型推断](https://stackoverflow.com/questions/7171067/no-type-inference-with-generic-extension-method)

我有一个带有约束的通用函数，它返回集合中的第一个对象：

```
static T first<T, L>(L list) 
where L : ICollection<T>            
where T : SomeType
{
        T r = default(T);
        if (list != null && list.Count>0)
        {
            if (list.Count == 1)
            {
                r = list.First();
            }
            else
            {
                //throw some exception ...
            }
        }
        return r;
 } 
```

但是当我对集合使用它时，代码将无法编译并给我一个“无法从使用中推断出类型”错误：

```
ICollection<SomeType> list = funcReturnCollectionOfSomeType();
SomeType o = first(list); 
```

不知道为什么，有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:08:45.367

它不能从类型 L 向后推断类型 T。使用单个泛型参数：

```
static T first<T>(ICollection<T> list) 
where T : SomeType
{
  ... 
```

# jquery - Fancybox 2 水平动画

> ID：10207979
> 
> 赞同：0
> 
> 时间：2012-04-18T10:59:24.717
> 
> 标签：jquery, fancybox

似乎一个简单的要求，使 Fancybox 2 水平动画幻灯片，而不是垂直。但我找不到任何关于如何做到这一点的资源，或者它是否可能。

有人对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:01:04.553

我认为没有任何选项可以让您这样做（如果我错了，请任何人纠正我），但这很容易实现。在第 1289 行将“.top”的所有实例更改为“.left”

```
if (elastic) {
    startPos.left = getValue(parseInt(startPos.left, 10) - 200);
    endPos.left = '+=200px';
} 
```

在第 1314 行做同样的事情

```
if (effect === 'elastic') {
    endPos.left = '+=200px';
} 
```

这将从左侧滑入画廊项目。干杯您不能使用文件的缩小版本。

# javascript - HTML 拒绝包含 Javascript [UIWebView]

> ID：10207982
> 
> 赞同：0
> 
> 时间：2012-04-18T10:59:29.820
> 
> 标签：javascript, jquery, ios, uiwebview

这是怎么回事？我正在尝试为颜色属性设置动画，所以我有 jQuery 1.7.1 和 jquery color plugin from [here](https://github.com/jquery/jquery-color)。这些文件都包含在内，我验证它们是构建目标的成员，所以它们都被复制了。这是HTML：

```
<html>
<body>
    <div id="content" class="changesColor" contenteditable="false" style="font-family:New Century Schoolbook; font-size:20; color:black; line-height:200%">
        ...Content...
    </div>
    <script type="text/javascript" src="jQuery.js"></script>
    <script type="text/javascript" src="jquery.color.js"></script>
    <script type="text/javascript" src="textOps.js"></script>
</body>
</html> 
```

为简洁起见，我对其进行了编辑，但这就是结构。我对颜色属性的动画调用都不起作用。 ***但是***，如果我复制 jquery.color.js 的内容并将其粘贴到 jQuery.js 的底部，那么它工作得很好。是什么导致该文件无法加载（也不只是该文件......每当我包含两个以上包含 jQuery 内容的 javascript 文件时，UIWebView 似乎会生气）。Javascript 在这样的事情上对我不利……或者我可能对 Javascript 对这种事不利……嗯，这很烦人 -_-;

*编辑*：我想我应该提到 textOps.js。它只是我制作的一堆函数，它不会以任何方式与 jQuery 混淆，只是使用它（我从 obj-c 调用的函数 {} 的大长列表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:11:18.393

好吧，原来问题在于 jquery.color.js 文件找到了进入项目的编译源部分而不是捆绑资源的方式。我认为 XCode 4.3 解决了这个问题，但显然我错了。

# c++ - 从套接字读取到 basic_filebuf

> ID：10207983
> 
> 赞同：0
> 
> 时间：2012-04-18T10:59:34.353
> 
> 标签：c++, sockets, client

这是来自客户端部分的代码（使用**)**

 **```
 struct sockaddr_in stSockAddr;
   int Res;
   int SocketFD;
   SocketFD = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
   if (-1 == SocketFD)
   {
      perror("cannot create socket");
      exit(EXIT_FAILURE);
   }

    memset(&stSockAddr, 0, sizeof(stSockAddr));

    stSockAddr.sin_family = AF_INET;
    stSockAddr.sin_port = htons(8182);
    Res = inet_pton(AF_INET, "127.0.0.1", &stSockAddr.sin_addr); 
```

我得到服务器的响应，使用

```
 char buffer[4096] = "";
   n = read(aSocketFD, buffer, 4096); 
```

我的问题是：
我能得到像**std::basic_filebuf**这样的响应吗？或者我可以回复 FILE * 吗？Socket 是一个文件处理程序，所以我可以做到，但是怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:04:23.623

For **C code**, you can use a descriptor like FILE* calling fdopen(): associates a stream with a file descriptor (POSIX.1 standard).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:10:13.150

如果你问这个是因为你想要好的性能：

在 linux 上你可以使用`sendfile`，这适用于简单的文件描述符（fd）：

```
ssize_t sendfile(int out_fd, int in_fd, off_t *offset, size_t count); 
```

其他一些 unix 系统也支持这个 API 调用，但它不是 POSIX 的一部分，所以它不是可移植的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:18:08.183

我认为你需要子类`std::streambuf`来实现你想要的。**

# ruby - 用于更新 Facebook 状态的 Ruby 命令行应用程序

> ID：10207987
> 
> 赞同：1
> 
> 时间：2012-04-18T10:59:48.060
> 
> 标签：ruby, facebook, facebook-graph-api, command-line

我有兴趣使用 ruby​​ 开发命令行应用程序来更新 Facebook 状态。为此，我需要进行身份验证。Facebook Api 是否使用命令行应用程序提供身份验证？我检查了 facebook api，不支持命令行应用程序。那么我应该如何进行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:29:30.283

目前，没有用户与浏览器的交互，就无法授权用户。

> 我们的 OAuth 2.0 实施不包括对为桌面操作系统构建的应用程序的明确支持。但是，如果您的应用程序可以嵌入 Web 浏览器（大多数桌面框架，如 .NET、AIR 和 Cocoa 都支持嵌入浏览器），您可以使用客户端流程并进行一项修改：特定的 redirect_uri。

请参阅[身份验证文档的](http://developers.facebook.com/docs/authentication/)*Windows、OS X 和 Linux 本机应用程序*部分

还有一种无需浏览器即可使用的[**身份验证方法，称为设备身份验证，**](http://developers.facebook.com/docs/authentication/devices/)目前仅支持**有限数量的合作伙伴**，**不适用于一般用途**。

# r - rfc 3339 时间戳解码使用 r

> ID：10207988
> 
> 赞同：0
> 
> 时间：2012-04-18T10:59:50.367
> 
> 标签：r

我有 rfc 3339 时间戳

```
 example("2012-04-17T04:58:50.470Z") 
```

有没有可以帮助解码这个值的包

如何使用 r 语言将其转换为小时和分钟

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:03:20.113

As Joshua said, `as.POSIXct` and a couple related functions with "POSIX" in their names do a lot. If you're going to be wrangling date/time strings a lot, take a look at the `lubridate` package.

# c# - CTE 查询在 asp.net 中使用 c# for webform 在数据集中生成错误

> ID：10207991
> 
> 赞同：3
> 
> 时间：2012-04-18T11:00:00.063
> 
> 标签：c#, asp.net, sql, webforms, common-table-expression

解决..

这已解决，因为我犯了一个愚蠢的错误。我没有初始化字符串生成器 **StringBuilder sb = new StringBuilder();**

我在我的网站中使用以下 CTE 查询来使用 c# 获取数据。但它在 for 循环中的 if 语句中给出了错误

**错误信息**

System.NullReferenceException 未被用户代码处理 Message=Object 引用未设置为对象的实例。

```
 String strSqlCTE;

    strSqlCTE= " DECLARE @PageId int ";
    strSqlCTE += " SET @PageId =" + pageid + "; ";
    strSqlCTE += " WITH RecursiveTable (PageId, PageName, PageInternalLink, PageInternalLinkUrl, PageInheritance, Level) ";
    strSqlCTE += " AS(SELECT      tt.PageId,  tt.PageName, tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance,  0 AS Level ";
    strSqlCTE += " FROM pg_Pages AS tt WHERE PageId = @PageId ";
    strSqlCTE += " UNION ALL ";
    strSqlCTE += " SELECT tt.PageId,  tt.PageName, tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance, Level + 1 ";
    strSqlCTE += " FROM pg_Pages AS tt ";
    strSqlCTE += " INNER JOIN RecursiveTable rt ON rt.PageInheritance = tt.PageId  ) ";
    strSqlCTE += " SELECT * FROM RecursiveTable ORDER BY Level DESC ";

    DataSet dsBC = new DataSet();
    dsBC = DataProvider.Connect_Select(strSqlCTE);
    if (dsBC.Tables[0].Rows.Count > 0)
    {
        int RowCount = dsBC.Tables[0].Rows.Count;
        StringBuilder sb = null;
        for ( int i = 0; i <= RowCount; i++)
        {
            if (i == RowCount)
            {
                sb.Append("<a href='" + dsBC.Tables[0].Rows[0]["PageInternalLinkUrl"].ToString() + "'>" + dsBC.Tables[0].Rows[0]["PageName"].ToString().ToUpper() + "</a>");
            }
            else
            {
                sb.Append("<a href='" + dsBC.Tables[0].Rows[0]["PageInternalLinkUrl"].ToString() + "'></a> ● ");
            }

        }

        ltrBreadCrumb.Text = sb.ToString();

    } 
```

我的 CTE 查询正在运行，下面是实际查询

```
DECLARE @PageId int
SET @PageId = 31;
WITH RecursiveTable (PageId, PageName, PageInternalLink, PageInternalLinkUrl, PageInheritance, Level)
AS(
   --Anchor
    SELECT      tt.PageId,  tt.PageName, tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance,  0 AS Level
    FROM pg_Pages AS tt
    WHERE PageId = @PageId
    UNION ALL
   --Recursion
    SELECT tt.PageId,  tt.PageName , tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance, Level + 1
    FROM pg_Pages AS tt
    INNER JOIN RecursiveTable rt ON rt.PageInheritance = tt.PageId
)
SELECT * FROM RecursiveTable ORDER BY Level DESC 
```

这在管理工作室中运行时效果很好，但以下语句会生成错误

```
sb.Append("<a href='" + dsBC.Tables[0].Rows[0]["PageInternalLinkUrl"].ToString() + "'></a> ● "); 
```

dsBC.Tables[0].Rows.Count 语句根据输入返回正确的行号。问题似乎在于它无法识别 CTE 查询中存在的列名。

我做错了什么请纠正我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:21:08.920

这已解决，因为我犯了一个愚蠢的错误。我错过了初始化字符串生成器

```
StringBuilder sb = new StringBuilder();

String strSqlCTE;

    strSqlCTE= " DECLARE @PageId int ";
    strSqlCTE += " SET @PageId =" + pageid + "; ";
    strSqlCTE += " WITH RecursiveTable (PageId, PageName, PageInternalLink, PageInternalLinkUrl, PageInheritance, Level) ";
    strSqlCTE += " AS(SELECT      tt.PageId,  tt.PageName, tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance,  0 AS Level ";
    strSqlCTE += " FROM pg_Pages AS tt WHERE PageId = @PageId ";
    strSqlCTE += " UNION ALL ";
    strSqlCTE += " SELECT tt.PageId,  tt.PageName, tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance, Level + 1 ";
    strSqlCTE += " FROM pg_Pages AS tt ";
    strSqlCTE += " INNER JOIN RecursiveTable rt ON rt.PageInheritance = tt.PageId  ) ";
    strSqlCTE += " SELECT * FROM RecursiveTable ORDER BY Level DESC ";

    DataSet dsBC = new DataSet();
    dsBC = DataProvider.Connect_Select(strSqlCTE);
    if (dsBC.Tables[0].Rows.Count > 0)
    {
        int RowCount = dsBC.Tables[0].Rows.Count;
        StringBuilder sb = new StringBuilder();
        for ( int i = 0; i <= RowCount; i++)
        {
            if (i == RowCount)
            {
                sb.Append("<a href='" + dsBC.Tables[0].Rows[i]["PageInternalLinkUrl"].ToString() + "'>" + dsBC.Tables[0].Rows[i]["PageName"].ToString().ToUpper() + "</a>");
            }
            else
            {
                sb.Append("<a href='" + dsBC.Tables[0].Rows[i]["PageInternalLinkUrl"].ToString() + "'></a> ● ");
            }

        }

        ltrBreadCrumb.Text = sb.ToString();

    } 
```

# css - 两个 inline-block元素之间的间隙

> ID：10207992
> 
> 赞同：17
> 
> 时间：2012-04-18T11:00:02.270
> 
> 标签：css

我在 html 中一起创建了两个元素，并将每个元素都设为内联块。我发现这两个元素之间总是存在差距，但实际上我没有为它们设置任何填充/边距属性。有人能告诉我为什么以及如何解决这个差距吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-18T11:03:37.757

CSS：

```
span {
  display: inline-block;
} 
```

HTML：

```
<span>This will have</span>
<span>a gap between the elements</span>

<span>This won't have</span><span>a gap between the elements</span> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-29T02:35:17.677

您可以使用 HTML 注释删除空格并保持良好的代码格式。

```
 <span>1</span><!--
--><span>2</span><!--
--><span>3</span> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-18T11:09:34.897

当您使用`inline-blocks`, 来删除边距时，只需将`word-spacing: -3px;`和`letter-spacing: -3px;`应用于**父容器**，然后使用 和 恢复内联块元素上的这些`word-spacing: normal;`规则`letter-spacing: normal;`

例如，使用这个基本标记

```
<div>
   <span>...</span>
   <span>...</span>
   <span>...</span>
</div> 
```

最小的 CSS 代码是

```
div {
   word-spacing: -3px;
   letter-spacing: -3px;
}

span {
   word-spacing: normal;
   letter-spacing: normal;
   display: inline-block;
} 
```

另一种可能性（我不推荐，但无论如何它可能对您有用）是设置`font-size: 0;`为父容器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T11:03:25.407

这是一种奇怪的行为，可以修复，将您的标记更改为类似的内容。

```
<div class="inline">
   first
</div><div class="inline">
   second
</div> 
```

在定义另一个内联元素时不要放置任何空格。

# dos - 将字符串放在 Dos 脚本中的特定位置

> ID：10207993
> 
> 赞同：0
> 
> 时间：2012-04-18T11:00:17.940
> 
> 标签：dos

如何将特定字符串插入到 Dos 脚本中的特定位置？

我搜索它不成功，所以如果我之前错过了类似的主题，我很抱歉，无论如何：非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:04:42.683

好吧，这在很大程度上取决于您的意思。通常会使用批处理文件的参数，因此

```
myscript.cmd parm1 parm2 
```

您可以使用`%1`获取 parm1 和`%2`获取 parm2

# .net - WPF 将 ObservableCollection 绑定到 ListBox

> ID：10207996
> 
> 赞同：2
> 
> 时间：2012-04-18T11:00:54.737
> 
> 标签：.net, wpf, data-binding, wpf-controls

我正在尝试将 ObservableCollection 绑定到 ListBox。调试的输出没有显示任何绑定错误，但由于某种原因它不起作用。

xml:

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:nwsfeed"
x:Class="nwsfeed.MainWindow"
DataContext="{Binding RelativeSource={RelativeSource Self}}"
x:Name="Window">

    <ListBox x:Name="listBoxChannels" 
    ItemsSource="{Binding ElementName=Window, Path=App.ActiveProfile.Feeds}"
    DisplayMemberPath="Title"/>

</Window> 
```

代码：

```
public partial class MainWindow : Window {
    public NwsfeedApp App { get; set; }
    // ..
}

public sealed class NwsfeedApp {
    public UserProfile ActiveProfile { get; set; }
    //..
}

public class UserProfile {
    private ObservableCollection<RSSFeed> feeds;
    public ObservableCollection<RSSFeed> Feeds { get { return feeds; } }
    //..
} 
```

**编辑**：问题是，当我将 ObservableCollection 作为 MainWindow 的公共属性并像这样绑定它时，它可以工作：

```
ItemsSource="{Binding ElementName=Window, Path=Items, Mode=OneWay}" 
```

但是当我这样做时，它不会：

```
ItemsSource="{Binding ElementName=Window, Path=App.ActiveProfile.Feeds, Mode=OneWay}" 
```

**edit2** 我在 App、ActiveProfile 和 Feeds 属性中实现了 INotifyPropertyChanged。ListBox 仍然不能反映集合的变化，除非我在它上面调用 .Items.Refresh() 。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:09:43.540

在您的类上实施[INotifyPropertyChanged 。](http://msdn.microsoft.com/en-us/library/ms743695.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:18:23.913

由于缺乏信息，这里有一个在黑暗中的镜头：

您正在尝试访问`App`哪个是静态应用程序属性，它不是窗口隐藏代码中的实例化变量。未评估绑定中的其余属性路径，因为找不到 App。

你可能想要这个：

```
ItemsSource="{x:Static local:App.ActiveProfile.Feeds}" 
```

对于缺少的输出，请尝试`Tools->Options->Debugging->Output window->WPF Trace Settings`在此处查看有关可用 WPF 跟踪的更多或更少信息的选项。

高温下，

呸。