# StackOverflow 问答 10675000-10675999

# c# - 预可视化图像

> ID：10675003
> 
> 赞同：0
> 
> 时间：2012-05-20T16:04:35.817
> 
> 标签：c#, asp.net

在将图像保存到目录之前，我想在图像框中**预先可视化图像。**我该如何做到这一点，我使用一个复选框来查看用户是否想要预可视化，因为我没有找到另一种方法来做到这一点没有复选框。我使用文件上传来上传图像。

```
string serverFileName = "";
serverFileName = Path.GetFileName(Upload.PostedFile.FileName);
Upload.PostedFile.SaveAs(MapPath("~/fotosPerfil/") + serverFileName); 
```

我使用这段代码来保存图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T02:44:36.083

我认为[这篇文章](https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded)正是您需要实施的。查看 Ivan 的解决方案。

是的，您确实可以读取用户选择的路径并在`<img>`标签中显示图像，所有客户端在上传之前。

# objective-c - CLLocation 纬度是否为零？

> ID：10675004
> 
> 赞同：1
> 
> 时间：2012-05-20T16:04:37.263
> 
> 标签：objective-c, mkmapview

如何检查 _mapView.userLocation.location.coordinate.latitude 是否等于 0？

纬度是一种双精度`typedef double CLLocationDegrees;`

我尝试将它与 0、-0.000000、0.000000 和 0.00 进行比较，但没有运气。

我试过把它转换成这样的字符串

```
NSLog(@" lat %@", ([NSString stringWithFormat:@"%f", _mapView.userLocation.location.coordinate.latitude] == @"0.000000") ? @"yes" : @"NO" );
string  0.000000 
lat NO 
```

但这也不起作用。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:20:08.417

它被存储为一个[双](http://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CoreLocationDataTypesRef/Reference/reference.html)所以简单的数字比较就足够了：

```
if (coordinate.latitude == 0) 
```

但是，如果您处理的是真实位置，则它实际上不太可能为 0，因此您可能需要先四舍五入该值。

从评论看来，您假设坐标 0,0 表示位置错误。不是这种情况。如果坐标无效，则[`horizontalAccuracy`属性将为负数](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)。这是检查无效坐标的正确方法：

```
if (coordinate.horizontalAccuracy < 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:13:13.660

我不确定为什么，但如果我将引用存储为浮点数，它会按预期工作。

```
float lat = _mapView.userLocation.location.coordinate.latitude;
float lon = _mapView.userLocation.location.coordinate.longitude;  

if (lat == 0 || lon == 0) {
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-01T15:52:59.823

使用 swift，但您可以使用类别的objective-c 执行相同的操作：

```
extension CLLocation {

    func isZero() -> Bool {
        return self.coordinate.latitude == 0.0 && self.coordinate.longitude == 0.0
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T17:48:44.370

您会认为上述答案会起作用，但我最终将纬度/经度存储为浮点数，然后正常比较按预期工作。

# reverse - 一台服务器，一个域 许多反向 DNS

> ID：10675006
> 
> 赞同：0
> 
> 时间：2012-05-20T16:04:37.487
> 
> 标签：reverse

我有一台专用服务器来托管一个域。我有很多ip。这些 ips 可以反向 dns 吗？

例子 ：

```
On One Server, and domain
127.0.0.1  Reverse DNS : a1.xyz.com
127.0.0.2  Reverse DNS : a2.xyz.com
127.0.0.3  Reverse DNS : a3.xyz.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:10:31.513

根据[http://en.wikipedia.org/wiki/RDNS](http://en.wikipedia.org/wiki/RDNS)，您可以拥有多个具有不同主机名的反向 DNS IP 地址。“虽然大多数 rDNS 条目只有一个 PTR 记录，但 DNS 不限制数量。”。据说不推荐，因为它取决于程序来真正阅读所有回复。wiki 页面上有关于该主题的讨论[http://en.wikipedia.org/wiki/Talk:Reverse_DNS_lookup](http://en.wikipedia.org/wiki/Talk:Reverse_DNS_lookup) “多个记录”。我可能在未来，程序应该适应这一点，因为在同一主机上拥有许多虚拟主机/网络服务器是很常见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:08:26.990

**是的，您可以为每个 IP 地址**设置一个反向 DNS 名称。如果您有多个 IP，那么您可以设置多个反向 DNS 名称。

# android - 在 android 中播放 youtube 视频

> ID：10675009
> 
> 赞同：0
> 
> 时间：2012-05-20T16:05:05.147
> 
> 标签：android, youtube, video-streaming, android-mediaplayer

我正在开发一个 android 应用程序，我想播放来自 youtube 的流媒体视频。我读过这样的帖子：[如何在我的 Android 应用程序中播放 YouTube 视频？](https://stackoverflow.com/questions/4654878/how-to-play-youtube-video-in-my-android-application) 我尝试使用该来源：

```
 startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("http://www.youtube.com/watch?v=tsDYIgX_gDs"))); 
```

我在 WebView 中有视频，我可以听到声音但没有图片。这也不是我想要的，因为我希望视频在活动开始时自动开始，而不是单击按钮播放（因为我还想添加一些计数器、计时器。 . 用于其他治疗）。然后，我尝试了 MediaPlayer：

```
 String FILE_PATH="http://www.youtube.com/watch?v=tsDYIgX_gDs";
    MediaPlayer mp = new MediaPlayer();
    mp.setDataSource(FILE_PATH);
    mp.prepare();
    mp.start(); 
```

跳到这里来控制视频开始`mp.start();`。但我有这些错误：

```
05-20 15:36:36.279: ERROR/HTTPStream(33): recv failed, errno = 11 (Try again)
05-20 15:36:36.808: ERROR/HTTPDataSource(33): HTTP request failed w/ http status 303
05-20 15:36:36.808: ERROR/HTTPDataSource(33): retrying connection failed
05-20 15:36:41.834: ERROR/HTTPStream(33): recv failed, errno = 11 (Try again)
05-20 15:36:48.389: ERROR/HTTPStream(33): recv failed, errno = 11 (Try again)
05-20 15:36:54.913: ERROR/HTTPStream(33): recv failed, errno = 11 (Try again)
05-20 15:36:54.913: ERROR/HTTPStream(33): recv failed, errno = 9 (Bad file number)
05-20 15:36:54.918: ERROR/HTTPStream(33): recv failed, errno = 9 (Bad file number)
05-20 15:36:54.918: ERROR/HTTPStream(33): recv failed, errno = 9 (Bad file number)
05-20 15:36:54.918: ERROR/MediaPlayer(6392): error (1, -2147483648)
05-20 15:36:55.219: ERROR/MediaPlayer(6392): start called in state 0
05-20 15:36:55.219: ERROR/MediaPlayer(6392): error (-38, 0)
05-20 15:36:55.228: ERROR/MediaPlayer(6392): Error (-38,0) 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:27:30.077

尝试将 Start 意图更改为：

```
 startActivity(new Intent(Intent.ACTION_VIEW, 
Uri.parse(String.format("http://www.youtube.com/v/%s", 
url.substring("vnd.youtube:".length(),n))); 
```

要进行更深入的学习，请尝试以下问题：[This](https://stackoverflow.com/questions/2292086/play-youtube-video-in-webview)和[This](https://stackoverflow.com/questions/574195/android-youtube-app-play-video-intent)。

# javascript - 显示双按钮和三按钮 (DOMNodeInserted)

> ID：10675013
> 
> 赞同：1
> 
> 时间：2012-05-20T16:05:58.483
> 
> 标签：javascript, jquery, dom, google-chrome-extension

我有一个奇怪的问题：

我正在开发一个 chrome 扩展，在 facebook 中的“like”按钮旁边添加一个自定义按钮。到目前为止，在很多帮助下，我找到了一种运行脚本的方法，即使将帖子添加到新闻提要（无需刷新页面）也是如此。但问题在于，在时间线/自动收报机（右侧的实时提要窗口）中，按钮会随着时间的推移而自我复制。

我当前的脚本：

```
$(document).ready(function(){
    $(".like_link,.cmnt_like_link").after(
        '<span class="dot"> · </span>' +
        '<button class="taheles_link stat_elem as_link" title="תגיד תכל&acute;ס" type="submit" name="taheles" onclick="apply_taheles()" data-ft="{&quot;tn&quot;:&quot;&gt;&quot;,&quot;type&quot;:22}">' +
            '<span class="taheles_default_message">תכל&acute;ס</span><span class="taheles_saving_message">לא תכלס</span>' +
        '</button>'
    );

    $(".taheles_saving_message").hide();

    $(document).bind('DOMNodeInserted', function(event) {
        $(event.target).find(".like_link,.cmnt_like_link").after(
            '<span class="dot"> · </span>' +
            '<button class="taheles_link stat_elem as_link" title="תגיד תכל&acute;ס" type="submit" name="taheles" onclick="apply_taheles()" data-ft="{&quot;tn&quot;:&quot;&gt;&quot;,&quot;type&quot;:22}">' +
                '<span class="taheles_default_message">תכל&acute;ס</span><span class="taheles_saving_message">לא תכלס</span>' +
            '</button>'
        );
        $(event.target).find(".taheles_saving_message").hide();
    });
}); 
```

`like_link`是在新闻提要/任何其他地方的帖子/评论中显示的按钮。`cmnt_like_link`是评论中显示的按钮。

如果我`#contentArea`在选择器中使用，自定义按钮甚至不会添加到代码中。如果我使用`document`（当前），它会显示在股票行情中，但会自我复制。我想知道问题是什么。我试图查看 chrome 开发人员面板，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:47:13.967

好的，我自己找到了答案：

只需`$(event.target).find(".tickerDialogContent .taheles_link, .tickerDialogContent .dot, .fbTimelineUnit .taheles_link, .fbTimelineUnit .dot, .fbPhotoSnowliftPopup .taheles_link, .fbPhotoSnowliftPopup .dot").remove();`在事件处理程序中添加，如下所示：

```
$(document).ready(function(){
$(".like_link,.cmnt_like_link").after(
    '<span class="dot"> · </span>' +
    '<button class="taheles_link stat_elem as_link" title="תגיד תכל&acute;ס" type="submit" name="taheles" onclick="apply_taheles()" data-ft="{&quot;tn&quot;:&quot;&gt;&quot;,&quot;type&quot;:22}">' +
        '<span class="taheles_default_message">תכל&acute;ס</span><span class="taheles_saving_message">לא תכלס</span>' +
    '</button>'
);

$(".taheles_saving_message").hide();

$(document).bind('DOMNodeInserted', function(event) {

    $(event.target).find(".tickerDialogContent .taheles_link, .tickerDialogContent .dot, .fbTimelineUnit .taheles_link, .fbTimelineUnit .dot, .fbPhotoSnowliftPopup .taheles_link, .fbPhotoSnowliftPopup .dot").remove();

    $(event.target).find(".like_link,.cmnt_like_link").after(
        '<span class="dot"> · </span>' +
        '<button class="taheles_link stat_elem as_link" title="תגיד תכל&acute;ס" type="submit" name="taheles" onclick="apply_taheles()" data-ft="{&quot;tn&quot;:&quot;&gt;&quot;,&quot;type&quot;:22}">' +
            '<span class="taheles_default_message">תכל&acute;ס</span><span class="taheles_saving_message">לא תכלס</span>' +
        '</button>'
    );
    $(event.target).find(".taheles_saving_message").hide();
}); 
```

});

如果有人需要，我已添加它以供将来参考。

干杯:)

# orchardcms - Orchard CMS 多租户崩溃当心

> ID：10675019
> 
> 赞同：2
> 
> 时间：2012-05-20T16:06:52.790
> 
> 标签：orchardcms

我正在使用启用多租户的 Orchard 1.4。我今天早上添加了一个新租户，其名称以数字 4 开头，“4wdcarsandtrucks”。好吧，在创建新租户后，我所有的网站都开始抛出 404 错误。查看日志，我发现我的每个租户都获得了以下条目：

> 2012-05-20 08:59:22,795 [6] Orchard.Environment.DefaultOrchardHost - 无法启动租户：默认 System.Xml.XmlException：名称不能以“4”字符开头，十六进制值 0x34。第 16 行，位置 4。在 System.Xml.XmlTextReaderImpl.ParseQName(Boolean isQName, Int32 startOffset, Int32&colonPos) 处 System.Xml.XmlTextReaderImpl.Throw(String res, String[] args) 处 System.Xml.XmlTextReaderImpl.ParseElement( ) 在 System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc) 在 System.Xml.XmlDocument.Load(XmlReader reader) 在 System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace) 在 System.Xml.XmlTextReaderImpl.ParseElementContent() 在 System. C 中 Orchard.Environment.Descriptor.ShellDescriptorCache.Fetch(String name) 中的 Xml.XmlDocument.LoadXml(String xml)：

根据手动删除租户的说明，我删除了 App_Data\Sites 中的站点文件夹，但问题仍然存在。

我在果园根文件夹下搜索了“4wdcarsandtrucks”，并在 Media 中找到了另一个文件夹。删除了租户名称的唯一剩余痕迹后，问题仍然存在。我已经回收了应用程序池并重新启动了站点。太奇怪了！

以前有没有人遇到过这个问题或有人有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T16:32:27.567

问题解决了！好的，万一其他人遇到这个问题，围绕这个问题会有一些奇怪的缓存。以下步骤应立即清除它：

1.  停止应用程序池。
2.  删除 App_Data\cache.dat
3.  启动应用程序池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-06T15:02:52.213

我有服务器端 Orchard CMS 的本地副本，并且我的天蓝色服务器上有一个未初始化的租户。下载后，它要么想设置一个新网页（已经运行的系统上的默认设置屏幕），要么它抛出

> 无法启动租户

`cache.dat`但是在`App_Data`我的果园目录的文件夹中删除（本地）解决了这个问题。

# sql-server - SQL Server 2008 r2 - T-SQL LIKE 或 PATINDEX 匹配 AZ、0-9、连字符、句点、下划线和波浪号以外的字符

> ID：10675020
> 
> 赞同：5
> 
> 时间：2012-05-20T16:06:55.880
> 
> 标签：sql-server, sql-server-2008, tsql, pattern-matching, user-defined-functions

**请帮我写一个 PATINDEX 或 LIKE 语句来**匹配以下字符：

*   AZ、0-9、连字符 (-)、句点 (.)、下划线 (_) 和波浪号 (~)

我计划在带有 nvarchar(200) 输入的标量 UDF 中使用它，它通过以下方式处理输入：

1.  用连字符 (-) 替换不匹配的字符
2.  将出现的两次连字符 (--) 替换为单个 (-)
3.  删除前导和尾随连字符 (-)
4.  返回处理后的输入

这将用于创建对 SEO 友好的 URL 的一部分，例如`/my-seo-friendly-url-1`. 除了模式匹配部分，我对做这个 UDF 很有信心。类似正则表达式的东西让我感到困惑！请帮忙。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T16:22:27.737

可能最好在您的应用程序中完成，但是

```
SELECT PATINDEX('%[^-a-zA-Z0-9.~_]%', @YourString COLLATE Latin1_General_BIN) 
```

应该在 TSQL 中做

# python - Clipboard.Flush() 在 wxpython 应用程序中总是失败

> ID：10675023
> 
> 赞同：2
> 
> 时间：2012-05-20T16:07:22.503
> 
> 标签：python, wxpython, clipboard

在 wxpython 应用程序的 EVT_CLOSE 处理程序中，我试图刷新剪贴板以使复制的文本可用于其他应用程序。但是，Flush() 方法总是返回 false。

例子：

```
cp = wx.Clipboard.Get()
print cp.Flush() 
```

回报：

```
False 
```

我在 Fedora 16（Gnome 3 默认旋转）上使用 python 2.7.3 并且 wx.VERSION 返回 (2, 8, 12, 0, '')

感谢你给与我的帮助

更新：显然它自 2009 年以来一直是“已知错误”。不知道会发生什么。如果您正在使用 WX，请添加解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:19:36.113

我刚刚完成了一个简单的演示应用程序和我的工作。这是我的代码：

```
import wx

########################################################################
class ClipboardPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        lbl = wx.StaticText(self, label="Enter text to copy to clipboard:")
        self.text = wx.TextCtrl(self, style=wx.TE_MULTILINE)
        copyBtn = wx.Button(self, label="Copy")
        copyBtn.Bind(wx.EVT_BUTTON, self.onCopy)
        copyFlushBtn = wx.Button(self, label="Copy and Flush")
        copyFlushBtn.Bind(wx.EVT_BUTTON, self.onCopyAndFlush)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(lbl, 0, wx.ALL, 5)
        sizer.Add(self.text, 1, wx.EXPAND)
        sizer.Add(copyBtn, 0, wx.ALL|wx.CENTER, 5)
        sizer.Add(copyFlushBtn, 0, wx.ALL|wx.CENTER, 5)
        self.SetSizer(sizer)

    #----------------------------------------------------------------------
    def onCopy(self, event):
        """"""
        self.dataObj = wx.TextDataObject()
        self.dataObj.SetText(self.text.GetValue())
        if wx.TheClipboard.Open():
            wx.TheClipboard.SetData(self.dataObj)
            wx.TheClipboard.Close()
        else:
            wx.MessageBox("Unable to open the clipboard", "Error")

    #----------------------------------------------------------------------
    def onCopyAndFlush(self, event):
        """"""
        self.dataObj = wx.TextDataObject()
        self.dataObj.SetText(self.text.GetValue())
        if wx.TheClipboard.Open():
            wx.TheClipboard.SetData(self.dataObj)
            wx.TheClipboard.Flush()
        else:
            wx.MessageBox("Unable to open the clipboard", "Error")

        self.GetParent().Close()

########################################################################
class ClipboardFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Clipboard Tutorial")
        panel = ClipboardPanel(self)
        self.Show()

if __name__ == "__main__":
    app = wx.App(False)
    frame = ClipboardFrame()
    app.MainLoop() 
```

我在 Windows 7、wxPython 2.8.12 和 Python 2.6.6 上。你在做什么？这些代码在你那正常吗？

# javascript - 如何在 motools 中使用 Element Method morph 或 tween 延迟或设置持续时间？

> ID：10675024
> 
> 赞同：1
> 
> 时间：2012-05-20T16:07:29.483
> 
> 标签：javascript, mootools

使用 Fx.Morph 或 Fx.Tween 可以很清楚地延迟效果和添加持续时间，但是如何使用 morph 或 tween 方法延迟或添加持续时间？

例如将其延迟 3 秒并将持续时间设置为 500

```
mouseleave: function() {
     el1.tween("margin-bottom","-280px");
     el.morph({'opacity': [0.2,1]});
} 
```

任何帮助表示赞赏。谢谢！

已编辑：这里是示例[http://jsfiddle.net/UungE/17/](http://jsfiddle.net/UungE/17/) 信息有更多行，因为我正在变形信息中的另外 4 个元素（因此尝试缩短代码）但我只添加了基础知识并且我让它工作很好，但我想用 info2 和更少的代码实现相同的结果。可能吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T17:05:29.790

这是一个两部分的问题。

### 第1部分

具有元素原型的类实例的特殊访问器可用于 mootools 类，如 fx.tween/morph 以及请求、验证器等。

```
el.set('tween', {
    duration: 500
}).tween(something); 
```

如果没有找到，set 将创建一个 Fx.Tween 实例 - 或者`setOptions()`将您的新选项添加​​到现有实例中。

同样适用于`.get`只有它可以返回实际的 Fx.something 实例：

```
var instance = el.get('morph', { duration: 600 });
instance.start({marginBottom:[0,-280]}); 
```

在这里查看自定义设置/获取的真正作用：[https ://github.com/mootools/mootools-core/blob/master/Source/Fx/Fx.Tween.js#L45-61](https://github.com/mootools/mootools-core/blob/master/Source/Fx/Fx.Tween.js#L45-61)

对于与作为模式的单个 dom 元素相关的类非常有用。

### 第2部分

添加延迟将很简单。

```
mouseleave: function() {
    clearTimeout(this.retrieve('handle')); // reset.
    this.store('handle' (function() {
        el1.tween(); ....

    }).delay(3000));

} 
```

如果他们离开并在 3 秒内回来，它将重置计时器。

### 用你的小提琴整理例子：

```
$$('.info').each(function(el) {
    el.set('morph', {
        duration: 300,
        'link': 'cancel'
    }).addEvents({
        mouseenter: function() {
            clearTimeout(this.retrieve('handle'));
            this.morph({
                'margin-left': 70
            });
        },
        mouseleave: function() {
             this.store('handle', (function() {
                this.morph({
                    marginLeft: 0
                });
            }).delay(500, this));
        }
    });
}); 
```

如果您希望设置中的代码更少，您可以使用我为 hoverIntent 编写的延迟伪钩子之类的东西 - 但也适用于任何延迟事件，真的：http: [//jsfiddle.net/dimitar/xAJ5f/](http://jsfiddle.net/dimitar/xAJ5f/)

然后你可以这样做：`mouseleave:delay(500): function() {}`

# python - 如何找到真实的客户端 IP 地址？

> ID：10675029
> 
> 赞同：0
> 
> 时间：2012-05-20T16:08:58.547
> 
> 标签：python, ip-address

如何在python中找到客户端的IP地址？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T16:17:27.637

一般来说，你不能。如果某人有另一台计算机代表他们的计算机发出请求，那么您只会获得有关您从中接收连接的计算机的网络信息。

HTTP 代理可能会添加 X-Forwarded-For 标头。

# android - Android - 如何使标题按钮后面没有空间？

> ID：10675030
> 
> 赞同：0
> 
> 时间：2012-05-20T16:08:59.453
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/86c67d87bfb339da8ad34bda2e11bce0.png)![在此处输入图像描述](../Images/e7d4b7b24918403dfd412e1bdbdd07ba.png)我的标题有这个布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
 android:orientation="horizontal"
>

 <Button android:id="@+id/home"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:text="Home"
  android:background="@drawable/ic_menu"
  android:textSize="11dp"
/>

<Button android:id="@+id/questions"
 android:layout_width="0dp" 
 android:layout_height="wrap_content"
 android:layout_weight="1"
 android:text="Questions"
 android:textSize="11dp"
   android:background="@drawable/ic_menu"
android:layout_toRightOf="@+id/home"  />  

 <Button android:id="@+id/businesses"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:textSize="11dp"
  android:text="Businesses"
    android:background="@drawable/ic_menu"
  android:layout_toRightOf="@+id/questions"
 />  

 <Button android:id="@+id/learn"
  android:layout_width="0dp" 
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:text="Learn"
  android:textSize="11dp"
  android:background="@drawable/ic_menu"
  android:layout_toRightOf="@+id/businesses"
 />  

</LinearLayout> 
```

我的想法是，如果我用图像制作按钮背景，那么这将使我在按钮之间没有空间。现在，标题按钮渲染得很好，但它们之间有一个厚厚的空白背景空间。我怎样才能摆脱那个空白并使它们之间的空间只有 1px？

我刚刚上传了模拟器的照片。看到屏幕顶部的 4 个黑框了吗？那是带有空格的标题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:11:58.650

问题是图像包含边框颜色。从图像中移除边框，或使用纯色#868686，即图像中心颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T16:48:21.727

这里有一个类似问题的潜在解决方案，[有没有办法完全消除包含按钮的 LinearLayout 中的填充？](https://stackoverflow.com/questions/4113753/is-there-a-way-to-completely-eliminate-padding-in-a-linearlayout-containing-butt)

您的可绘制 ic_menu 可能有填充，如果您为该图像使用 9-patch，当您创作它时，请确保沿右侧和底部的黑线符合您的预期，因为这是用于在您的 9- 中指定内容区域补丁并可能有助于填充。

此外，尝试为按钮上的边距和填充添加 0dp。

希望有帮助。

# r - 哪些重塑问题无法一步解决？

> ID：10675031
> 
> 赞同：4
> 
> 时间：2012-05-20T16:08:59.607
> 
> 标签：r, reshape2

`reshape2`是一个包，它允许通过其两部分熔化/铸造方法进行强大的数据转换阵列。然而，像所有工具一样，它嵌入了限制它可以处理的案例的假设。

哪些数据重塑问题`reshape2`无法以当前形式处理？

理想的答案将包括：

*   描述通常可以找到此数据形状的用例类型
*   样本数据
*   完成转换的代码（理想情况下尽可能多地使用转换`reshape2`）

**例子**

“宽”数据在面板应用程序中很常见。

```
melt.wide <- function(data, id.vars, new.names, sep=".", variable.name="variable", ... ) {
  # Guess number of variables currently wide
  colnames(data) <- sub( paste0(sep,"$"), "",  colnames(data) )
  wide.vars <- colnames(data)[grep( sep, colnames(data) )]
  n.wide <- str_count( wide.vars, sep )
  stopifnot(length(new.names)==unique(n.wide))
  # Melt
  data.melt <- melt(data,id.vars=id.vars,measure.vars=wide.vars,...)
  new <- stack.list(str_split(data.melt$variable,sep))
  colnames(new) <- c(variable.name,new.names)
  data.melt <- subset(data.melt,select=c(-variable))
  cbind(data.melt,new)
}

choice.vars <- colnames(res)[grep("_",colnames(res))]
melt.wide( subset(res,select=c("WorkerId",choice.vars)), id.vars="WorkerId", new.names=c("set","option"), sep="_") 
```

新函数返回一个熔化的对象，然后可以是`*cast`.

数据在哪里：

```
so <- structure(list(WorkerId = c(12L, 13L, 27L, 25L, 30L, 8L), pio_1_1 = structure(c(2L, 
1L, 2L, 1L, 2L, 2L), .Label = c("No", "Yes"), class = "factor"), 
    pio_1_2 = structure(c(1L, 2L, 2L, 2L, 1L, 1L), .Label = c("No", 
    "Yes"), class = "factor"), pio_1_3 = structure(c(1L, 1L, 
    1L, 1L, 2L, 1L), .Label = c("No", "Yes"), class = "factor"), 
    pio_1_4 = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = "No", class = "factor"), 
    pio_2_1 = structure(c(1L, 2L, 2L, 1L, 1L, 2L), .Label = c("No", 
    "Yes"), class = "factor"), pio_2_2 = structure(c(1L, 1L, 
    1L, 2L, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), 
    pio_2_3 = structure(c(2L, 2L, 2L, 2L, 2L, 1L), .Label = c("No", 
    "Yes"), class = "factor"), pio_2_4 = structure(c(1L, 1L, 
    1L, 1L, 1L, 1L), .Label = "No", class = "factor"), pio_3_1 = structure(c(2L, 
    2L, 2L, 2L, 2L, 1L), .Label = c("No", "Yes"), class = "factor"), 
    pio_3_2 = structure(c(2L, 1L, 1L, 1L, 2L, 1L), .Label = c("No", 
    "Yes"), class = "factor"), pio_3_3 = structure(c(2L, 1L, 
    2L, 1L, 1L, 2L), .Label = c("No", "Yes"), class = "factor"), 
    pio_3_4 = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = "No", class = "factor"), 
    pio_4_1 = structure(c(2L, 1L, 2L, 2L, 1L, 2L), .Label = c("No", 
    "Yes"), class = "factor"), pio_4_2 = structure(c(2L, 2L, 
    2L, 1L, 2L, 1L), .Label = c("No", "Yes"), class = "factor"), 
    pio_4_3 = structure(c(1L, 2L, 1L, 1L, 2L, 2L), .Label = c("No", 
    "Yes"), class = "factor"), pio_4_4 = structure(c(1L, 1L, 
    1L, 1L, 1L, 1L), .Label = "No", class = "factor"), caremgmt_1_1 = structure(c(2L, 
    2L, 1L, 2L, 1L, 2L), .Label = c("No", "Yes"), class = "factor"), 
    caremgmt_1_2 = structure(c(1L, 2L, 2L, 2L, 1L, 1L), .Label = c("No", 
    "Yes"), class = "factor"), caremgmt_1_3 = structure(c(1L, 
    1L, 1L, 1L, 2L, 1L), .Label = c("No", "Yes"), class = "factor"), 
    caremgmt_1_4 = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = "No", class = "factor"), 
    caremgmt_2_1 = structure(c(2L, 2L, 2L, 2L, 2L, 2L), .Label = c("No", 
    "Yes"), class = "factor"), caremgmt_2_2 = structure(c(1L, 
    2L, 1L, 2L, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), 
    caremgmt_2_3 = structure(c(2L, 1L, 2L, 1L, 1L, 1L), .Label = c("No", 
    "Yes"), class = "factor"), caremgmt_2_4 = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L), .Label = "No", class = "factor"), caremgmt_3_1 = structure(c(2L, 
    1L, 2L, 1L, 2L, 2L), .Label = c("No", "Yes"), class = "factor"), 
    caremgmt_3_2 = structure(c(2L, 1L, 2L, 2L, 2L, 1L), .Label = c("No", 
    "Yes"), class = "factor"), caremgmt_3_3 = structure(c(2L, 
    2L, 2L, 2L, 2L, 2L), .Label = c("No", "Yes"), class = "factor"), 
    caremgmt_3_4 = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = "No", class = "factor"), 
    caremgmt_4_1 = structure(c(1L, 1L, 2L, 1L, 2L, 1L), .Label = c("No", 
    "Yes"), class = "factor"), caremgmt_4_2 = structure(c(2L, 
    2L, 2L, 2L, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), 
    caremgmt_4_3 = structure(c(1L, 1L, 1L, 1L, 1L, 2L), .Label = c("No", 
    "Yes"), class = "factor"), caremgmt_4_4 = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L), .Label = "No", class = "factor"), prev_1_1 = structure(c(1L, 
    1L, 2L, 1L, 2L, 2L), .Label = c("No", "Yes"), class = "factor"), 
    prev_1_2 = structure(c(1L, 2L, 1L, 2L, 1L, 1L), .Label = c("No", 
    "Yes"), class = "factor"), prev_1_3 = structure(c(2L, 1L, 
    1L, 2L, 2L, 2L), .Label = c("No", "Yes"), class = "factor"), 
    prev_1_4 = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = "No", class = "factor"), 
    prev_2_1 = structure(c(1L, 1L, 2L, 1L, 2L, 2L), .Label = c("No", 
    "Yes"), class = "factor"), prev_2_2 = structure(c(2L, 2L, 
    1L, 2L, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), 
    prev_2_3 = structure(c(1L, 2L, 1L, 1L, 2L, 2L), .Label = c("No", 
    "Yes"), class = "factor"), prev_2_4 = structure(c(1L, 1L, 
    1L, 1L, 1L, 1L), .Label = "No", class = "factor"), prev_3_1 = structure(c(1L, 
    2L, 1L, 1L, 2L, 1L), .Label = c("No", "Yes"), class = "factor"), 
    prev_3_2 = structure(c(1L, 1L, 2L, 1L, 2L, 2L), .Label = c("No", 
    "Yes"), class = "factor"), prev_3_3 = structure(c(2L, 2L, 
    1L, 2L, 2L, 2L), .Label = c("No", "Yes"), class = "factor"), 
    prev_3_4 = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = "No", class = "factor"), 
    prev_4_1 = structure(c(1L, 2L, 2L, 1L, 2L, 2L), .Label = c("No", 
    "Yes"), class = "factor"), prev_4_2 = structure(c(1L, 1L, 
    2L, 1L, 2L, 2L), .Label = c("No", "Yes"), class = "factor"), 
    prev_4_3 = structure(c(1L, 1L, 1L, 2L, 2L, 1L), .Label = c("No", 
    "Yes"), class = "factor"), prev_4_4 = structure(c(1L, 1L, 
    1L, 1L, 1L, 1L), .Label = "No", class = "factor"), price_1_1 = structure(c(30L, 
    12L, 1L, 16L, 28L, 17L), .Label = c("$2,500", "$2,504", "$2,507", 
    "$2,509", "$2,512", "$2,513", "$2,515", "$2,526", "$2,547", 
    "$2,548", "$2,578", "$2,588", "$2,594", "$2,605", "$2,607", 
    "$2,617", "$2,618", "$2,622", "$2,635", "$2,649", "$2,670", 
    "$2,672", "$2,679", "$2,681", "$2,698", "$2,704", "$2,721", 
    "$2,782", "$2,851", "$2,884", "$2,919", "$2,925", "$2,935", 
    "$3,022"), class = "factor"), price_1_2 = structure(c(1L, 
    19L, 5L, 17L, 7L, 1L), .Label = c("$2,500", "$2,501", "$2,502", 
    "$2,504", "$2,513", "$2,515", "$2,517", "$2,532", "$2,535", 
    "$2,558", "$2,564", "$2,571", "$2,575", "$2,578", "$2,608", 
    "$2,633", "$2,634", "$2,675", "$2,678", "$2,687", "$2,730", 
    "$2,806", "$2,827", "$2,848", "$2,891", "$2,901", "$2,923", 
    "$2,933", "$2,937", "$2,958", "$2,987"), class = "factor"), 
    price_1_3 = structure(c(11L, 1L, 1L, 8L, 19L, 14L), .Label = c("$2,500", 
    "$2,504", "$2,507", "$2,513", "$2,516", "$2,518", "$2,564", 
    "$2,579", "$2,580", "$2,583", "$2,584", "$2,592", "$2,604", 
    "$2,608", "$2,639", "$2,643", "$2,646", "$2,665", "$2,667", 
    "$2,695", "$2,698", "$2,709", "$2,710", "$2,713", "$2,714", 
    "$2,750", "$2,757", "$2,876", "$2,978", "$2,984", "$3,024", 
    "$3,059"), class = "factor"), price_1_4 = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L), .Label = "$2,500", class = "factor"), 
    price_2_1 = structure(c(27L, 32L, 19L, 22L, 4L, 26L), .Label = c("$2,500", 
    "$2,504", "$2,505", "$2,510", "$2,511", "$2,512", "$2,515", 
    "$2,517", "$2,518", "$2,529", "$2,533", "$2,537", "$2,551", 
    "$2,553", "$2,574", "$2,593", "$2,600", "$2,605", "$2,608", 
    "$2,612", "$2,613", "$2,618", "$2,639", "$2,657", "$2,714", 
    "$2,730", "$2,747", "$2,764", "$2,771", "$2,773", "$2,813", 
    "$2,859", "$2,901", "$3,019", "$3,037"), class = "factor"), 
    price_2_2 = structure(c(12L, 2L, 1L, 27L, 1L, 7L), .Label = c("$2,500", 
    "$2,502", "$2,510", "$2,514", "$2,515", "$2,516", "$2,517", 
    "$2,518", "$2,520", "$2,521", "$2,523", "$2,536", "$2,544", 
    "$2,575", "$2,583", "$2,592", "$2,602", "$2,624", "$2,644", 
    "$2,652", "$2,662", "$2,677", "$2,720", "$2,761", "$2,765", 
    "$2,770", "$2,772", "$2,835", "$2,873", "$2,911", "$2,950", 
    "$2,962"), class = "factor"), price_2_3 = structure(c(32L, 
    1L, 8L, 33L, 29L, 11L), .Label = c("$2,500", "$2,506", "$2,507", 
    "$2,510", "$2,511", "$2,512", "$2,515", "$2,517", "$2,527", 
    "$2,528", "$2,540", "$2,554", "$2,562", "$2,565", "$2,568", 
    "$2,581", "$2,597", "$2,611", "$2,616", "$2,631", "$2,652", 
    "$2,663", "$2,671", "$2,672", "$2,685", "$2,727", "$2,731", 
    "$2,742", "$2,771", "$2,778", "$2,781", "$2,970", "$2,984", 
    "$2,986", "$3,030"), class = "factor"), price_2_4 = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L), .Label = "$2,500", class = "factor"), 
    price_3_1 = structure(c(24L, 1L, 28L, 7L, 18L, 21L), .Label = c("$2,500", 
    "$2,501", "$2,503", "$2,505", "$2,509", "$2,512", "$2,535", 
    "$2,537", "$2,542", "$2,553", "$2,556", "$2,560", "$2,561", 
    "$2,574", "$2,584", "$2,618", "$2,624", "$2,629", "$2,637", 
    "$2,664", "$2,761", "$2,840", "$2,875", "$2,883", "$2,891", 
    "$2,933", "$2,953", "$2,978", "$3,039", "$3,043", "$3,067"
    ), class = "factor"), price_3_2 = structure(c(3L, 1L, 5L, 
    19L, 25L, 9L), .Label = c("$2,500", "$2,501", "$2,503", "$2,504", 
    "$2,512", "$2,517", "$2,540", "$2,543", "$2,546", "$2,560", 
    "$2,567", "$2,573", "$2,586", "$2,592", "$2,594", "$2,603", 
    "$2,604", "$2,606", "$2,628", "$2,633", "$2,635", "$2,693", 
    "$2,696", "$2,714", "$2,734", "$2,739", "$2,770", "$2,791", 
    "$2,797", "$2,936", "$2,967", "$3,021", "$3,024"), class = "factor"), 
    price_3_3 = structure(c(26L, 7L, 5L, 32L, 10L, 24L), .Label = c("$2,500", 
    "$2,501", "$2,502", "$2,505", "$2,506", "$2,507", "$2,508", 
    "$2,509", "$2,512", "$2,515", "$2,519", "$2,547", "$2,556", 
    "$2,574", "$2,587", "$2,592", "$2,608", "$2,616", "$2,621", 
    "$2,635", "$2,638", "$2,667", "$2,671", "$2,688", "$2,694", 
    "$2,700", "$2,717", "$2,759", "$2,809", "$2,864", "$2,891", 
    "$2,912", "$3,011", "$3,012"), class = "factor"), price_3_4 = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L), .Label = "$2,500", class = "factor"), 
    price_4_1 = structure(c(29L, 13L, 16L, 24L, 33L, 19L), .Label = c("$2,500", 
    "$2,505", "$2,506", "$2,508", "$2,511", "$2,525", "$2,549", 
    "$2,562", "$2,577", "$2,582", "$2,586", "$2,591", "$2,621", 
    "$2,636", "$2,654", "$2,670", "$2,722", "$2,726", "$2,733", 
    "$2,744", "$2,745", "$2,755", "$2,768", "$2,805", "$2,817", 
    "$2,827", "$2,835", "$2,888", "$2,925", "$2,959", "$3,001", 
    "$3,027", "$3,061", "$3,071"), class = "factor"), price_4_2 = structure(c(33L, 
    31L, 21L, 16L, 25L, 13L), .Label = c("$2,500", "$2,502", 
    "$2,503", "$2,505", "$2,506", "$2,511", "$2,513", "$2,516", 
    "$2,529", "$2,539", "$2,547", "$2,554", "$2,557", "$2,562", 
    "$2,567", "$2,579", "$2,581", "$2,583", "$2,585", "$2,591", 
    "$2,612", "$2,629", "$2,640", "$2,670", "$2,695", "$2,726", 
    "$2,737", "$2,788", "$2,790", "$2,798", "$2,852", "$3,031", 
    "$3,063"), class = "factor"), price_4_3 = structure(c(4L, 
    30L, 4L, 19L, 1L, 27L), .Label = c("$2,500", "$2,504", "$2,507", 
    "$2,509", "$2,511", "$2,512", "$2,514", "$2,516", "$2,543", 
    "$2,552", "$2,562", "$2,575", "$2,578", "$2,581", "$2,594", 
    "$2,614", "$2,615", "$2,617", "$2,636", "$2,640", "$2,641", 
    "$2,652", "$2,749", "$2,755", "$2,805", "$2,812", "$2,867", 
    "$2,906", "$2,910", "$2,917", "$2,924", "$2,927", "$2,961", 
    "$3,028", "$3,053", "$3,054"), class = "factor"), price_4_4 = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L), .Label = "$2,500", class = "factor"), 
    plan_1_1 = structure(c(2L, 2L, 2L, 1L, 1L, 2L), .Label = c("", 
    "X"), class = "factor"), plan_1_2 = structure(c(1L, 1L, 1L, 
    2L, 1L, 1L), .Label = c("", "X"), class = "factor"), plan_1_3 = structure(c(1L, 
    1L, 1L, 1L, 2L, 1L), .Label = c("", "X"), class = "factor"), 
    plan_1_4 = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = c("", 
    "X"), class = "factor"), plan_2_1 = structure(c(1L, 2L, 1L, 
    2L, 2L, 2L), .Label = c("", "X"), class = "factor"), plan_2_2 = structure(c(1L, 
    1L, 2L, 1L, 1L, 1L), .Label = c("", "X"), class = "factor"), 
    plan_2_3 = structure(c(2L, 1L, 1L, 1L, 2L, 1L), .Label = c("", 
    "X"), class = "factor"), plan_2_4 = structure(c(1L, 1L, 1L, 
    1L, 1L, 1L), .Label = c("", "X"), class = "factor"), plan_3_1 = structure(c(1L, 
    2L, 1L, 1L, 2L, 1L), .Label = c("", "X"), class = "factor"), 
    plan_3_2 = structure(c(1L, 1L, 1L, 2L, 1L, 1L), .Label = c("", 
    "X"), class = "factor"), plan_3_3 = structure(c(2L, 1L, 1L, 
    1L, 1L, 2L), .Label = c("", "X"), class = "factor"), plan_3_4 = structure(c(1L, 
    1L, 2L, 1L, 1L, 1L), .Label = c("", "X"), class = "factor"), 
    plan_4_1 = structure(c(2L, 2L, 1L, 1L, 1L, 1L), .Label = c("", 
    "X"), class = "factor"), plan_4_2 = structure(c(2L, 1L, 1L, 
    2L, 1L, 1L), .Label = c("", "X"), class = "factor"), plan_4_3 = structure(c(1L, 
    1L, 1L, 1L, 2L, 2L), .Label = c("", "X"), class = "factor"), 
    plan_4_4 = structure(c(1L, 1L, 2L, 1L, 1L, 1L), .Label = c("", 
    "X"), class = "factor")), .Names = c("WorkerId", "pio_1_1", 
"pio_1_2", "pio_1_3", "pio_1_4", "pio_2_1", "pio_2_2", "pio_2_3", 
"pio_2_4", "pio_3_1", "pio_3_2", "pio_3_3", "pio_3_4", "pio_4_1", 
"pio_4_2", "pio_4_3", "pio_4_4", "caremgmt_1_1", "caremgmt_1_2", 
"caremgmt_1_3", "caremgmt_1_4", "caremgmt_2_1", "caremgmt_2_2", 
"caremgmt_2_3", "caremgmt_2_4", "caremgmt_3_1", "caremgmt_3_2", 
"caremgmt_3_3", "caremgmt_3_4", "caremgmt_4_1", "caremgmt_4_2", 
"caremgmt_4_3", "caremgmt_4_4", "prev_1_1", "prev_1_2", "prev_1_3", 
"prev_1_4", "prev_2_1", "prev_2_2", "prev_2_3", "prev_2_4", "prev_3_1", 
"prev_3_2", "prev_3_3", "prev_3_4", "prev_4_1", "prev_4_2", "prev_4_3", 
"prev_4_4", "price_1_1", "price_1_2", "price_1_3", "price_1_4", 
"price_2_1", "price_2_2", "price_2_3", "price_2_4", "price_3_1", 
"price_3_2", "price_3_3", "price_3_4", "price_4_1", "price_4_2", 
"price_4_3", "price_4_4", "plan_1_1", "plan_1_2", "plan_1_3", 
"plan_1_4", "plan_2_1", "plan_2_2", "plan_2_3", "plan_2_4", "plan_3_1", 
"plan_3_2", "plan_3_3", "plan_3_4", "plan_4_1", "plan_4_2", "plan_4_3", 
"plan_4_4"), row.names = c(NA, 6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:03:49.160

……差不多一年后……

前几天想到了这一点，我偷偷怀疑这是您试图在示例中显示的内容，但不幸的是，您的示例代码没有运行！

`melt`在使我的数据“长”时，有时对我来说有点太过分了。有时，即使它不一定被称为“整洁的数据”，我更喜欢有一个“半长” `data.frame`。这很容易使用基础 R 实现`reshape`，但需要使用“reshape2”包进行一些额外的步骤，如下所示：

先决条件：样本数据。

```
set.seed(1)
myDf <- data.frame(
  ID.1 = sample(letters[1:5], 5, replace = TRUE),
  ID.2 = 1:5,
  V.1 = sample(10:14, 5, replace = TRUE),
  V.2 = sample(5:9, 5, replace = TRUE),
  V.3 = sample(3:14, 5, replace = TRUE),
  W.1 = sample(LETTERS, 5, replace = TRUE),
  W.2 = sample(LETTERS, 5, replace = TRUE),
  W.3 = sample(LETTERS, 5, replace = TRUE)
)
myDf
#   ID.1 ID.2 V.1 V.2 V.3 W.1 W.2 W.3
# 1    b    1  14   6   8   Y   K   M
# 2    b    2  14   5  11   F   A   P
# 3    c    3  13   8  14   Q   J   M
# 4    e    4  13   6   7   D   W   E
# 5    b    5  10   8  12   G   I   V 
```

我正在寻找的“半长”输出。使用基础 R 轻松实现`reshape`。

```
reshape(myDf, direction = "long", idvar=1:2, varying = 3:ncol(myDf))
#       ID.1 ID.2 time  V W
# b.1.1    b    1    1 14 Y
# b.2.1    b    2    1 14 F
# c.3.1    c    3    1 13 Q
# e.4.1    e    4    1 13 D
# b.5.1    b    5    1 10 G
# b.1.2    b    1    2  6 K
# b.2.2    b    2    2  5 A
# c.3.2    c    3    2  8 J
# e.4.2    e    4    2  6 W
# b.5.2    b    5    2  8 I
# b.1.3    b    1    3  8 M
# b.2.3    b    2    3 11 P
# c.3.3    c    3    3 14 M
# e.4.3    e    4    3  7 E
# b.5.3    b    5    3 12 V 
```

`melt`如果您想要 的等价物，那就太好了`stack`，尤其是因为`stack`丢弃了所有`factor`变量，这在`read.table`和家庭默认为. 时令人沮丧`stringsAsFactors = TRUE`。（您可以使其工作，但您需要将相关列转换为`character`才能使用`stack`）。但是，这不是我想要的，特别是因为它如何处理“变量”列。

```
library(reshape2)
myDfL <- melt(myDf, id.vars=1:2)
head(myDfL)
#   ID.1 ID.2 variable value
# 1    b    1      V.1    14
# 2    b    2      V.1    14
# 3    c    3      V.1    13
# 4    e    4      V.1    13
# 5    b    5      V.1    10
# 6    b    1      V.2     6 
```

要解决此问题，需要首先拆分“变量”列，然后使用`dcast`获取与从`reshape`.

```
myDfL <- cbind(myDfL, colsplit(myDfL$variable, "\\.", names=c("var", "time")))
dcast(myDfL, ID.1 + ID.2 + time ~ var, value.var="value")
#    ID.1 ID.2 time  V W
# 1     b    1    1 14 Y
# 2     b    1    2  6 K
# 3     b    1    3  8 M
# 4     b    2    1 14 F
# 5     b    2    2  5 A
# 6     b    2    3 11 P
# 7     b    5    1 10 G
# 8     b    5    2  8 I
# 9     b    5    3 12 V
# 10    c    3    1 13 Q
# 11    c    3    2  8 J
# 12    c    3    3 14 M
# 13    e    4    1 13 D
# 14    e    4    2  6 W
# 15    e    4    3  7 E 
```

# javascript - 当我们可以添加一个属性时为什么要使用原型

> ID：10675033
> 
> 赞同：0
> 
> 时间：2012-05-20T16:09:20.817
> 
> 标签：javascript

我有这个 javasctipt 类

```
function employee(name, jobtitle, born)
{
    this.name = name;
    this.jobtitle = jobtitle;
    this.born = born;
}

var fred = new employee("Fred Flintstone", "Caveman", 1970);
employee.prototype.salary = null;
fred.salary = 20000;
fred.notprototype = 1239;
console.log(fred); 
```

现在你可以看到我使用原型添加了薪水属性，但是我只是通过使用`fred.notprototype = 1239;`而不使用原型添加了一个属性。

当我在对象 fred 上执行 console.log 时，我在那里看到了 notprototype。那么不添加原型有错吗？如果是，那么它有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:15:14.340

比方说，在你添加了所有代码之后：

```
var john = new employee("John Carson", "Philantropist", 2015);
console.log(john); 
```

它将显示`john`有一个`salary`属性（值`null`）。这不是你自己设置的，它来自原型链。

通过添加到 的原型`X`，您可以更改由`new X()`.

另一个例子：

```
function School(name)
{
    this.name = name;
}

School.prototype.getName = function() {
    return this.name;
}

var school_one = new School('one');

console.log(school_one.getName()); // prints "one" 
```

在这个例子中，一个方法`getName`被添加到原型中。在创建`school_one`对象时，它继承自`School.prototype`您添加到它的所有对象（在这种情况下，只是一种方法）。

这可用于声明对象的接口（用于访问它的方法）或与构造函数分开的默认值。

为了更深入地了解 JavaScript 及其独特功能，我强烈建议您观看[Douglas Crockford](http://www.yuiblog.com/blog/2010/02/24/video-crockonjs-3/)的一些视频；他是一位出色的演讲者，知识渊博，喜欢听他讲话：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T16:14:28.007

原型上的属性做两件事：

1.  对于“普通”变量，它们可以提供默认值，当您第一次将同名属性写入对象时，该默认值将被隐藏

2.  对于成员函数，它们减少了包含该函数自己的副本的对象的每个实例的开销。

# c++ - 匹配“|” （垂直线）C++ 中的字符

> ID：10675036
> 
> 赞同：1
> 
> 时间：2012-05-20T16:09:42.097
> 
> 标签：c++, c, escaping

我在匹配包含“|”的字符串时遇到了很大的困难 (ascii 124) C++ 中的字符。在下面的代码方法中，每次运行它总是匹配最后一个 if 语句：

```
if (strComp == "D|A" || "D|M" || "A|D" || "M|D") {c = "010101";} 
```

我试过逃避'|' 带有'\|'的符号 这没有用。令人惊讶的是，我在四处搜索时发现关于这个问题的信息很少。我忽略的代码是否还有其他问题？这是一个正常的ASCII字符，我的一部分认为这应该更容易......

```
string Code::comp(string strComp) {
string a = "0";
string c = "000000";

if (strComp.find('M') != -1) { a = "1"; }

if (strComp == "0") {c = "101010";}
if (strComp == "1") {c = "111111";}
if (strComp == "-1") {c = "111010";}
if (strComp == "D") {c = "001100";}
if (strComp == "A" || "M") {c = "110000";}
if (strComp == "!D") {c = "001101";}
if (strComp == "!A" || "!M") {c = "110001";}
if (strComp == "-D") {c = "001111";}
if (strComp == "-A" || "-M") {c = "110011";}
if (strComp == "D+1" || "1+D") {c = "011111";}
if (strComp == "A+1" || "M+1" || "1+A" || "1+M") {c = "110111";}
if (strComp == "D-1") {c = "001110";}
if (strComp == "A-1" || "M-1") {c = "110010";}
if (strComp == "D+A" || "D+M" || "A+D" || "M+D") {c = "000010";}
if (strComp == "D-A" || "D-M") {c = "010011";}
if (strComp == "A-D" || "M-D") {c = "000111";}
if (strComp == "D&A" || "D&M" || "A&D" || "M&D") {c = "000000";}
if (strComp == "D|A" || "D|M" || "A|D" || "M|D") {c = "010101";} // This matches every time

return a+c;
} 
```

非常感谢您的帮助！贾斯汀

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T16:11:42.047

代替

```
strComp == "D|A" || "D|M" 
```

你需要：

```
strComp == "D|A" || strComp == "D|M" 
```

因为表达式`strComp == "D|A"`在运算符之前被评估，`||`所以你得到`false || "D|M"`或者`true || "D|M"`不是你想要的。

# javascript - 如何在不触发更改事件的情况下设置选择元素的选定选项？

> ID：10675041
> 
> 赞同：1
> 
> 时间：2012-05-20T16:10:59.577
> 
> 标签：javascript, jquery, events, select, options

我目前在选择上使用它：

```
var sortNo = $('select[name=anzahl_eintraegeSEL]');

sortNo
    // set selected based on hidden input default value
    .find('option[value="'+ $('input[name=anzahl_eintraege]').val() +']')
    .attr('selected', 'selected').attr('set',true)
    // set up change listener
    .on('change', function(){
        // do sth
        }); 
```

我想在不触发初始更改事件的情况下将默认选项设置为选中。

我怎样才能让它工作？以上似乎立即触发了更改事件。

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:12:30.603

你可以试试：

```
 sortNo
  .on('change', function(){
    // do sth
  })
  .val($('input[name=anzahl_eintraege]').val()); // set the default value get from hidden field 
```

[**演示**](http://jsfiddle.net/thecodeparadox/nWwkY/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T16:24:30.283

一次：在这一行：

```
.find('option[value="'+ $('input[name=anzahl_eintraege]').val() +']') 
```

你错过了结束的'"'。应该是：

```
.find('option[value="'+ $('input[name=anzahl_eintraege]').val() +'"]') 
```

接下来你的 .on() 被执行，而 jQuery 将你的标签放在上面......我猜你想要改变 .on() ，而不是 .

而且你不需要自己找到选项标签，jQuery 可以为你做到这一点，使用 sortNo.val()。

我相信这就是你想要的？： http: [//jsfiddle.net/KadrG/](http://jsfiddle.net/KadrG/)

# url - 通过 Greasemonkey/Tampermonkey/Userscript 向 URL 添加参数（重定向）

> ID：10675049
> 
> 赞同：5
> 
> 时间：2012-05-20T16:12:15.800
> 
> 标签：url, redirect, greasemonkey, tampermonkey, userscripts

我想编写一个 Greasemonkey/userscript，它会自动添加到以[https://pay.reddit.com/](https://pay.reddit.com/)`.compact`开头的 URL，因此它会自动将我重定向到移动版本。

我一直在研究类似的用户脚本，尤其是这个：[https](https://userscripts.org/scripts/review/112568) ://userscripts.org/scripts/review/112568试图弄清楚如何编辑替换模式，但我缺乏这个领域的技能。

如何编写将我从 重定向`https://pay.reddit.com/*`到的 Greasemonkey 脚本`https://pay.reddit.com/*.compact`？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T23:16:13.350

脚本应该做这些事情：

1.  检测当前 URL 是否已经指向压缩站点。
2.  如有必要，加载页面的精简版本。
3.  当心“锚”URL（它们以[“片段”或“哈希”（`#...`）](http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax)结尾）并说明它们。
4.  将不需要的页面排除在浏览器历史记录之外，以便后退按钮正常工作。只有`.compact`URL 会被记住。
5.  通过运行 at `document-start`，脚本可以在这种情况下提供更好的性能。

为此，此脚本有效：

```
// ==UserScript==
// @name        _Reddit, ensure compact site is used
// @match       *://*.reddit.com/*
// @run-at      document-start
// @grant       none
// ==/UserScript==

var oldUrlPath  = window.location.pathname;

/*--- Test that ".compact" is at end of URL, excepting any "hashes"
    or searches.
*/
if ( ! /\.compact$/.test (oldUrlPath) ) {

    var newURL  = window.location.protocol + "//"
                + window.location.host
                + oldUrlPath + ".compact"
                + window.location.search
                + window.location.hash
                ;
    /*-- replace() puts the good page in the history instead of the
        bad page.
    */
    window.location.replace (newURL);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:30:42.427

您展示的示例脚本使用正则表达式来操作窗口的位置：

```
replace(/^https?:\/\/(www\.)?twitter.com/, 'https://mobile.twitter.com'); 
```

不出所料，这将`https://www.twitter.com`等替换`http://twitter.com`为`https://mobile.twitter.com`.

您的情况略有不同，因为如果它与某个正则表达式匹配，您想将一个字符串附加到您的 url。尝试：

```
var url = window.location.href;
var redditPattern = /^https:\/\/pay.reddit.com\/.*/;
// Edit: To prevent multiple redirects:
var compactPattern = /\.compact/;
if (redditPattern.test(url)
    && !compactPattern.test(url)) {
    window.location.href = url + '.compact';
} 
```

有关测试用例，请参见：http: [//jsfiddle.net/RichardTowers/4Vjd​​Z /3。](http://jsfiddle.net/RichardTowers/4VjdZ/3)

# android - 是支持单一语言 strings.xml 还是支持多种语言更好，但很糟糕？

> ID：10675052
> 
> 赞同：1
> 
> 时间：2012-05-20T16:12:35.543
> 
> 标签：android, internationalization

我有耐心使用 Google Translation Toolkit 将我的 strings.xml 文件和我的 HTML 帮助文件转换为其他语言。

但是，翻译并非“100%”正确。

我会说德语和英语，所以我的 strings.xml 等使用了 Eng -> Ger 翻译。

译者的一些“失态”非常糟糕。

所以，最好是把一种语言做得好（即英语）还是提供多语言支持，但对于我不知道的语言。

我也想涵盖“大男孩”，例如普通话、印地语、日语、俄语等，但我担心糟糕的翻译会使我的应用看起来质量低下。

有没有人对这个话题有任何经验和建议。

非常感谢。

保罗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:32:06.500

您可能应该聘请非常擅长英语和目标外语的翻译。

最重要的事情之一是翻译人员必须了解您的应用程序的用法、概念和约定——了解并理解它。否则，你最终会在你的应用程序上下文中得到语法正确但毫无意义的翻译——我可以在很多情况下看到这一点，因为我的母语不是英语。

而且，是的，如果你的应用程序的翻译没有抓住重点，那么它对某些人来说会显得“质量低下”和“敌对”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:31:02.393

德语和英语属于同一个语系，谷歌有充足的数据。任何其他语言，尤其是那些在语言上更遥远的语言（中文、日语、印地语），翻译得比德语还要糟糕。我不相信以这些语言为母语的人可以从机器翻译中获得任何价值。

使用机器翻译可以准确地向您的外国客户展示您对他们的重视程度：没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:33:13.243

哇 ！。

那时它看起来像一个大拇指向下。

就像生活中的所有事情一样，我认为“妥协”是赢家。

我的应用程序基本上只有一个设置屏幕，其中包含大约 15 个字符串和一些单选按钮、复选框等。

游戏本身非常明显，但低估“要点”总比不了解要好。

我将专注于获取“完美”设置页面的字符串，并添加交叉手指的 HTML“帮助”屏幕翻译。

我的观点是去一个国家至少应该学习一些语言。我的经验是，“当地人”欣赏“尝试说语言”，而不是简单地假设“他们”应该懂英语。同样的道理，如果“主要”点翻译得好，通过“所有提供的帮助文本”的翻译过程，我至少应该为“尊重他们的语言和文化”多赚几分。

正如我所说，知道该做什么是一个棘手的领域。如果我的应用程序真的起飞了，我会毫不犹豫地完成专业翻译，但最初的费用，比如 20 次翻译很可能会抹去任何回报。2 个月后，我会变得更老、更聪明（如果只是那些被翻译侮辱的人的咒骂）。

我很想听听那些有同样困境的人的任何其他回应，并了解他们在这一领域的真实生活“应用程序”体验。

真诚的感谢那些到目前为止写的人。

保罗

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T18:07:01.203

如果您的应用程序面向懂英语的人（极客、系统管理员、其他计算机人员），那么您最好使用仅英语的 UI。

换句话说，如果您针对“普通”受众，您必须决定您想要什么 - 更大的“客户群”或更高的应用评分（因为没有恼人的人会因为糟糕的 l10n 给您的应用评分 1 星）。

我自己是俄罗斯人，我可以告诉你，对我来说，本地化严重的应用程序比英文应用程序更烦人。但是不懂英语的人（有很多）永远不会安装仅限英语的应用程序。

# java - CaptureDeviceManager.getDeviceList() 返回 null

> ID：10675053
> 
> 赞同：4
> 
> 时间：2012-05-20T16:12:48.280
> 
> 标签：java, ubuntu, webcam, jmf

我编码`java`了`ubuntu 11.10`

笔记本电脑网络摄像头运行正常并找到它`/dev/v4l/`。Skype 应用程序可以使用网络摄像头运行。

我安装了 JMF，但我无法添加环境变量。`

```
Vector deviceList = CaptureDeviceManager.getDeviceList(new RGBFormat());
System.out.println(deviceList.toString());
if(!deviceList.isEmpty()){
    System.out.println("1");
    device = (CaptureDeviceInfo) deviceList.firstElement();
}
device = (CaptureDeviceInfo) deviceList.firstElement();
ml = device.getLocator(); 
```

我只想在java中捕获图像。

我应该怎么做才能解决问题或使用 JMF 来代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-31T20:26:47.437

在调用 CaptureDeviceManager.getDeviceList() 之前，必须先将可用设备加载到内存中。

您可以在安装 JMF 后通过运行 JMFRegistry 手动完成。

[![在此处输入图像描述](../Images/f211a89fa8bf405fec1207167b255f79.png)](https://i.stack.imgur.com/6OcbA.png)

或者借助扩展库 FMJ（Java 中的免费媒体）以编程方式进行。这是代码：

```
import java.lang.reflect.Field;
import java.util.Vector;
import javax.media.*;
import javax.media.format.RGBFormat;
import net.sf.fmj.media.cdp.GlobalCaptureDevicePlugger;

public class FMJSandbox {
    static {
        System.setProperty("java.library.path", "D:/fmj-sf/native/win32-x86/");
        try {
            final Field sysPathsField = ClassLoader.class.getDeclaredField("sys_paths");
            sysPathsField.setAccessible(true);
            sysPathsField.set(null, null);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    public static void main(String args[]) {
        GlobalCaptureDevicePlugger.addCaptureDevices(); 
        Vector deviceInfo = CaptureDeviceManager.getDeviceList(new RGBFormat());
        System.out.println(deviceInfo.size());
        for (Object obj : deviceInfo ) {
            System.out.println(obj);
        }
    }
} 
```

# python - 如何使用 importlib.import_module 在 Python 中导入模块

> ID：10675054
> 
> 赞同：97
> 
> 时间：2012-05-20T16:12:51.383
> 
> 标签：python, import, module, python-importlib

我正在尝试[`importlib.import_module`](https://docs.python.org/2/library/importlib.html)在 Python 2.7.2 中使用并遇到奇怪的错误。

考虑以下目录结构：

```
    一种
    |
    + - __init__.py
      - b
        |
        + - __init__.py
          -c.py

```

`a/b/__init__.py`有以下代码：

```
    导入导入库

    mod = importlib.import_module("c")

```

（在实际代码`"c"`中有一个名字。）

尝试`import a.b`，产生以下错误：

```
    >>> 导入 ab
    回溯（最近一次通话最后）：
      文件“”，第 1 行，在
      文件“a/b/__init__.py”，第 3 行，在
        mod = importlib.import_module("c")
      import_module 中的文件“/opt/Python-2.7.2/lib/python2.7/importlib/__init__.py”，第 37 行
        __import__（名称）
    ImportError：没有名为 c 的模块

```

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-05-20T16:17:07.467

对于相对进口，您必须：

*   a) 使用相对名称
*   b) 明确提供锚点

    ```
    importlib.import_module('.c', 'a.b') 
    ```

当然，你也可以只做绝对导入：

```
importlib.import_module('a.b.c') 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-07-08T07:03:38.813

我认为最好使用`importlib.import_module('.c', __name__)`，因为您不需要了解`a`and `b`。

我也想知道，如果你必须使用`importlib.import_module('a.b.c')`，为什么不直接使用`import a.b.c`？

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-06-21T09:52:51.717

并且不要忘记为`__init__.py`每个文件夹/子文件夹创建一个（即使它们是空的）

# c# - tabControl 上的控件问题 - 单击所有 tabPages 之前没有数据刷新

> ID：10675057
> 
> 赞同：1
> 
> 时间：2012-05-20T16:13:08.070
> 
> 标签：c#, winforms, datagridview, tabcontrol

我对嵌套在 TabControl 中的控件有疑问。我有一个带有 n 个 TabPages 的 TabControl，每个 TabPage 上有一个 DataGridView。每个 DataGridView 都有一个 CheckBoxC 列。我使用不同的数据源填充所有数据网格视图（因此每个数据源都有不同类型的数据）。这工作正常！

* * *

我添加了一个 ComboBox 列，因此我可以选择所有 DataGridViews 上的所有行。我以编程方式执行此操作（单击按钮），并且选择的计数是可以的，除了刻度没有添加到 DataGridViews 的复选框单元格中，除了 TabPage #1（我可以在启动时看到的那个）。

* * *

**如果我在去之前**单击所有 tabPages并选择 DataGridViews 中的所有行，则代码可以正常工作，并且刻度会添加到所有行中（就像我想要的那样）。

但是为什么不点击所有的tabPages就不行呢？TabControl 是否有任何错误或某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-20T17:40:19.420

我的解决方法是在表单的加载事件中添加它。

```
this.tabcontrol1.BindingContext = this.BindingContext; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:27:46.340

我知道这个答案对 WPF 是正确的，但对 WinForms 并不积极。至少使用 WPF，它是一个基于视觉的界面，因此程序不会在其他选项卡上加载任何对象/控件/等，直到它们被单击。所以它不会是一个错误，它是设计的一部分。

我在尝试使用单个按钮清除多个选项卡上的所有文本框时遇到了类似的问题。我从来没有让它工作，但我知道应该有一种方法可以使用`VisualTreeHelper`和`foreach`语句的组合。

同样，这是基于 WPF 而不是 WinForms，但希望它可以为您指明如何解决它的正确方向。

# javascript - 检测 div 的高度。然后从 126 中减去值以设置绝对定位 div 的“顶部”值

> ID：10675059
> 
> 赞同：1
> 
> 时间：2012-05-20T16:13:28.247
> 
> 标签：javascript, jquery, math, position, height

*使用 jQuery 的 jquery 插件和 easing 插件。*

我有一系列锚点，在一个列表中，它们都是固定的高度和宽度。在每个 div 中都有另一个我称为“内容”的内容，它是绝对定位的，当鼠标进入包含的 div 时，它会从底部滑入视图。当鼠标离开包含的 div 时，“内容”div 会滑出视图。

我有这个工作，使用顶部和底部值的组合，但这不能跨浏览器工作（据我所知，只能在 Firefox 中正常工作）。代码如下（html、css 和 javascript）：

```
<!doctype html>

<head>

    <style>

        .index {
            float: left;
            margin: 0 0 30px 0;
            margin-left: 0;
            padding: 0;
            position: relative;
            }
        .index li {
            border: 2px solid #f3f3f3;
            float: left;
            list-style: none;
            font-family:"Helvetica";
            font-size:14px;
            font-weight:normal;
            margin: 0 10px 10px 0;
            padding: 1px;
            position: relative;
            }
        .index li a {
            float: left;
            height: 126px;
            overflow: hidden;
            position: relative;
            width: 224px;
            }
        .index li img {
            display: block;
            }
        .index li .content {
            background: #f7f7f7;
            bottom: auto;
            display: block;
            margin: 0;
            padding: 10px 0 3px;
            position: absolute;
            top: 132px;
            width: 224px;
            }
        .index li a:hover .content {
            bottom: 0;
            top: auto;
            }
        .index .content h3 {
            background: url(../img/content/arw-sma.png) no-repeat 0 -100px;
            color: #666;
            margin: 0 10px 1px;
            padding-left: 20px;
            }   
        .index .content p {
            color: #999;
            display: block;
            float: left;
            font-size: 12px;
            margin: 0 10px 2px;
            padding: 0;
            }

    </style>

    <script src="js//jquery-1.6.2.min.js"></script>
    <script src="js/jquery.easing.js"></script>

    <script type="text/javascript">
        $(function(){
        $('.index .content').css( {'top':'132px', 'bottom':'auto'});
        $('.index li a').hover(
                function(){
                    $(this).find('img').animate({'opacity': '.7'}, 200);        
                    $(this).find('.content').animate({'bottom':'0'}, 150).css({'top':'auto'});      
                }, 
                function(){
                    $(this).find('img').animate({'opacity': '1.0'}, 200);                   
                    $(this).find('.content').animate({'top':'132px'}, 150);
                }       
            );
        });
    </script>

</head>

<body>

    <ul class="index panel">
        <li>
            <a href="#" title="TITLE TEXT.">
                <img src="thumb-1.jpg" alt="ALT TEXT." />
                <div class="content">
                    <h3>Title Here</h3>
                    <p>Other content goes here</p>
                </div>
            </a>
        </li>
        <li>
            <a href="#" title="TITLE TEXT.">
                <img src="thumb-1.jpg" alt="ALT TEXT." />
                <div class="content">
                    <h3>Title Here</h3>
                    <p>Other content goes here</p>
                </div>
            </a>
        </li>
        <li>
            <a href="#" title="TITLE TEXT.">
                <img src="thumb-1.jpg" alt="ALT TEXT." />
                <div class="content">
                    <h3>Title Here</h3>
                    <p>Other content goes here</p>
                </div>
            </a>
        </li>
    </ul>

</body> 
```

不同的浏览器不喜欢同时使用顶部和底部值。所以理想情况下，我猜我只需要使用'top'。问题是，我不知道'content div'会有多高，所以我不能设置一个明确的值，好像它更高，它会切断一些内容。

因为我知道锚点的高度为 126 像素。我一直在尝试使用 .height() 来检测“内容 div”的高度。然后从 126 中减去这个值——这将留下我需要将“top”设置为的值，以将其定位在 div 中。

这听起来合理吗，我说得通吗？希望这不是冗长的，只是想尽可能详细。

希望有人可以提供帮助，我喜欢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:35:13.847

## *[演示 jsBin](http://jsbin.com/elapon/edit#javascript,html,live)*

*   使用`SPAN`而不是`DIV`（DIV 是块级元素，AFAIK 它不会验证您的文档。）
*   您可以设置一个初始底部值，例如 -132...-150 ...或任何您喜欢的`.content`

    ```
    .index li .content {
        background: #f7f7f7;
        bottom: -132px;
        display: block;
        margin: 0;
        padding: 10px 0 3px;
        position: absolute;
        top: 132px;
        width: 224px;
    } 
    ```

问：

```
 $(function(){
    $('.panel li a').hover(
            function(){
                $(this).find('img').animate({'opacity': '.7'}, 200);        
                $(this).find('.content').animate({'bottom':'0'}, 150).css({'top':'auto'});      
            }, 
            function(){
                $(this).find('img').animate({'opacity': '1.0'}, 200);                   
                $(this).find('.content').animate({'bottom':'-132px'}, 150);
            }       
        );
    }); 
```

我将使用的另一个解决方案是：在 DOM 准备就绪时，计算每个内容高度 ( `var outerH = $(this).outerHeight(true)`) 并将该值设置`data-height`为每个元素的 a。( `$(this).data('height', outerH);`)。比您可以在悬停时为存储在该元素中的确切N设置*动画*。`px``data-height`

# php - Mysql语法错误问题

> ID：10675060
> 
> 赞同：0
> 
> 时间：2012-05-20T16:13:29.537
> 
> 标签：php, mysql

我在运行以下 sql 查询时收到一条消息...

“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'group = 'dfdfd' WHERE id = '39'' 附近使用正确的语法”

**sql查询：**

```
$sql_update = mysql_query("UPDATE addcontacts SET surename = '$surname_g', group = 
'$g_g' WHERE id = '$id'"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T16:18:34.683

`group by`请使用`括起来，它被mysql视为特殊（ SQL关键字）

使用以下内容：

```
 UPDATE addcontacts SET surename = '$surname_g', `group` = '$g_g' WHERE id = '$id' 
```

注意`组`而不是组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:17:32.250

尝试：

```
$sql_update = mysql_query("UPDATE addcontacts SET surename = '".$surname_g."', `group` = '".$g_g."' WHERE id = '".$id."'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T16:25:09.537

您的 id 可能是一个整数，并且您用两个单引号 (') 将其括起来，这确实会产生错误。

```
$sql_update = mysql_query("UPDATE addcontacts SET surename = '{$surname_g}', group = 
'{$g_g}' WHERE id = {$id}"); 
```

谢谢 ：）

# java - 防止应用程序在获取网页时挂起

> ID：10675062
> 
> 赞同：2
> 
> 时间：2012-05-20T16:14:02.983
> 
> 标签：java, swing

我的 Swing 应用程序中有以下代码：

```
URL url = new URL("http://stackoverflow.com/");
InputStream is = url.openStream(); 
```

但是使用 openStream 方法下载网页会使 swing 应用程序挂起，直到网页完全下载。如何防止这种情况/有哪些替代方法，以便在网页完全下载之前显示加载图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:18:23.047

在单独的线程中加载：

```
InputStream is = null;

Thread worker = new Thread() {
    // show "loading..."
    public void run() {
        try {
            URL url = new URL("http://stackoverflow.com/");
            is = url.openStream();
        } catch (InterruptedException ex) { ... }
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // show "done" or remove "loading..."
            }
        });
    }
};
worker.start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T16:16:12.897

您可以使用多个线程，它们相互等待。

# java - 查找向量的重复项并删除，保留并行向量的顺序

> ID：10675064
> 
> 赞同：0
> 
> 时间：2012-05-20T16:14:51.257
> 
> 标签：java, vector, duplicates

此代码只是一个测试，用于查找向量的重复项并删除它们，同时删除其他 2 个向量的对应对象

这在第 3 行给出了一个 Arrayoutofindex 作为输出。你有什么建议吗？

```
 for (int k = 0 ; k < vA.size() ; k++)
            {                       
                Object a = vA.elementAt(0);
                Object b = vA.elementAt(k);
                if(a == b && k!=0)
                {
                int duplicate = vA.indexOf(b);
                vA.removeElementAt(duplicate);
                vB.removeElementAt(duplicate);
                vC.removeElementAt(duplicate);                    
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:20:03.297

根据[这个](https://stackoverflow.com/questions/357421/what-is-the-best-way-to-remove-duplicates-in-an-array-in-java)问题，我建议您阅读，因为它解释了从数组中删除重复项的投注方法，

您可以使用以下方法： removeDuplicate 方法：

```
 /** List order not maintained **/
public static void removeDuplicate(ArrayList arlList)
{
 HashSet h = new HashSet(arlList);
 arlList.clear();
 arlList.addAll(h);
} 
```

和 removeDuplicateWithOrder 方法：

```
 /** List order maintained **/
public static void removeDuplicateWithOrder(ArrayList arlList)
{
   Set set = new HashSet();
   List newList = new ArrayList();
   for (Iterator iter = arlList.iterator(); iter.hasNext();) {
      Object element = iter.next();
      if (set.add(element))
         newList.add(element);
   }
   arlList.clear();
   arlList.addAll(newList);
} 
```

希望这些能以某种方式帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T16:20:45.413

您在**for**条件下执行 vA.size()，然后尝试从循环内的 vA 中删除元素。这导致了异常。

将 vA.size 存储在单独的变量中

```
int size = vA.size();
for (int k = 0 ; k <= size ; k++) 
```

然后，在循环内部，无论你在哪里

```
vA.removeElementAt(duplicate); 
```

相反，将其存储为单独的新列表。

```
toBeRemoved.add(b);//b is the element to be removed later 
```

并在循环后从 vA 中删除所有 toBeRemoved。

```
vA.removeAll(toBeRemoved ); 
```

编辑：

您的新代码将如下所示 -

```
int vASize = vA.size();
List vAToBeRemoved = new ArrayList();
for (int k = 0 ; k < vASize; k++)
            {                       
                Object a = vA.elementAt(0);
                Object b = vA.elementAt(k);
                if(a == b )
                {
                int duplicate = vA.indexOf(b);
                vAToBeRemoved.add(b);//elements to be removed later.
                vA.removeElementAt(duplicate);
                vB.removeElementAt(duplicate);
                vC.removeElementAt(duplicate);                    
                }
             }
vA.removeAll(vAToBeRemoved); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T16:18:00.460

`for (int k = 0 ; k <= vA.size() ; k++)` k 应该只从`0`to运行，`va.size() - 1`因为它是从零开始的，即第一个索引是`0`。将循环语句重写为：

`for (int k = 0 ; k < vA.size() ; k++)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-07T07:16:58.040

使用以下方法从向量中删除重复元素

公共静态向量removeDuplicateResults（向量结果向量）{

```
for(int i=0;i<resultsVector.size();i++){        
    for(int j=0;j<resultsVector.size();j++){            
            if(i!=j){                                            
                Object resultsVectorObject1 = resultsVector.elementAt(i);
                Object resultsVectorObject2 = resultsVector.elementAt(j);
                Object[] resultsObjectArray1 = (Object[]) resultsVectorObject1;
                Object[] resultsObjectArray2 = (Object[]) resultsVectorObject2;
                if(Arrays.equals(resultsObjectArray1, resultsObjectArray2))
                {
                    resultsVector.removeElementAt(j);
                }
            }
    }
}
return resultsVector; 
```

}

# .htaccess - 重写动态url

> ID：10675069
> 
> 赞同：0
> 
> 时间：2012-05-20T16:15:29.707
> 
> 标签：.htaccess

我有以下问题：

`http://www.mydomain.com/articles.php?artid=89`

应该变成：`http://www.mydomain.com/mykeyword`

我不介意 id 是否保留在 url 中......比如：`http://www.mydomain.com/89/mykeyword`

我目前有以下 .htaccess ：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(mydomain\.com)$ [NC]
RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L] 

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+news\.php [NC]
RewriteRule ^ mykeyword [R=301,L]

RewriteRule ^mykeyword/?$ news.php [L,NC] 
```

上面的部分就像一个魅力。

任何帮助将不胜感激。

问候，佐兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:17:41.440

将这些规则附加到 .htaccess 的底部：

```
RewriteEngine On
RewriteBase /turkexpo/

RewriteCond %{HTTP_HOST} ^(webone\.gr)$ [NC]
RewriteRule ^(.*)$ http://www.%1/turkexpo/$1 [R=302,L] 

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+turkexpo/news\.php [NC]
RewriteRule ^ mykeyword [R=302,L]

RewriteRule ^mykeyword/?$ news.php [L,NC]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+turkexpo/articles\.php\?artid=([0-9]+) [NC]
RewriteRule ^ %1/mykeyword? [R=302,L]

RewriteRule ^([0-9]+)/mykeyword/?$ articles.php?artid=$1 [L,NC,QSA]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+turkexpo/companies\.php\?fairid=([0-9]+)&ehallid=([0-9]+) [NC]
RewriteRule ^ companies/%1/%2? [R=302,L]

RewriteRule ^companies/([0-9]+)/([0-9]+)/?$  companies.php?fairid=$1&ehallid=$2 [L,NC,QSA] 
```

`/89/mykeyword`这将转发一个to的 URI`/articles.php?artid=89`并在外部重定向它的反面。

一旦您确定它正在工作，请更改`R=302`为`R=301`.

# java - 单个 TextView 中的多个 TypeFace

> ID：10675070
> 
> 赞同：41
> 
> 时间：2012-05-20T16:15:48.760
> 
> 标签：java, android

我想`TextView`用 a 设置第一个字符，用`TypeFace`不同的 Type face 设置第二个字符，依此类推。
我读了这个例子：

```
Spannable str = (Spannable) textView.getText();
str.setSpan(new StyleSpan(android.graphics.Typeface.ITALIC), 0, 7  
                             ,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

但这对我没有帮助，因为我想设置多个`TypeFace (external TTFs)`
任何想法？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-05-24T15:39:53.517

## 使用以下代码：（我使用的是孟加拉语和泰米尔语字体）

```
 TextView txt = (TextView) findViewById(R.id.custom_fonts);  
        txt.setTextSize(30);
        Typeface font = Typeface.createFromAsset(getAssets(), "Akshar.ttf");
        Typeface font2 = Typeface.createFromAsset(getAssets(), "bangla.ttf");   
        SpannableStringBuilder SS = new SpannableStringBuilder("আমারநல்வரவு");
        SS.setSpan (new CustomTypefaceSpan("", font2), 0, 4,Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
        SS.setSpan (new CustomTypefaceSpan("", font), 4, 11,Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
        txt.setText(SS); 
```

* * *

结果是：

![在此处输入图像描述](../Images/c4933febeef66f9703b0f0684b64deff.png)

* * *

这使用了`CustomTypefaceSpan`类，取自[How can I use TypefaceSpan or StyleSpan with a custom Typeface?](https://stackoverflow.com/questions/4819049/how-can-i-use-typefacespan-or-stylespan-with-custom-typeface) ：

* * *

```
package my.app;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.text.TextPaint;
import android.text.style.TypefaceSpan;

public class CustomTypefaceSpan extends TypefaceSpan {

private final Typeface newType;

public CustomTypefaceSpan(String family, Typeface type) {
    super(family);
    newType = type;
}

@Override
public void updateDrawState(TextPaint ds) {
    applyCustomTypeFace(ds, newType);
}

@Override
public void updateMeasureState(TextPaint paint) {
    applyCustomTypeFace(paint, newType);
}

private static void applyCustomTypeFace(Paint paint, Typeface tf) {
    int oldStyle;
    Typeface old = paint.getTypeface();
    if (old == null) {
        oldStyle = 0;
    } else {
        oldStyle = old.getStyle();
    }

    int fake = oldStyle & ~tf.getStyle();
    if ((fake & Typeface.BOLD) != 0) {
        paint.setFakeBoldText(true);
    }

    if ((fake & Typeface.ITALIC) != 0) {
        paint.setTextSkewX(-0.25f);
    }

    paint.setTypeface(tf);
}
} 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-01T08:24:46.503

**Kotlin 开发人员**可以使用它为单个按钮或文本视图使用两个或多个字体。

**1.复制粘贴这个类：**

```
class CustomTypefaceSpan(family: String?, private val newType: Typeface) : TypefaceSpan(family) {

    override fun updateDrawState(ds: TextPaint) {
        applyCustomTypeFace(ds, newType)
    }

    override fun updateMeasureState(paint: TextPaint) {
        applyCustomTypeFace(paint, newType)
    }

    companion object {
        private fun applyCustomTypeFace(paint: Paint, tf: Typeface) {
            val oldStyle: Int
            val old = paint.typeface
            oldStyle = old?.style ?: 0
            val fake = oldStyle and tf.style.inv()
            if (fake and Typeface.BOLD != 0) {
                paint.isFakeBoldText = true
            }
            if (fake and Typeface.ITALIC != 0) {
                paint.textSkewX = -0.25f
            }
            paint.typeface = tf
        }
    }
} 
```

**2\. 通过以下方式使用它：**

```
val buttonText = "Get it for 100 Points"

//making text yellow
    buttonText.setSpan(
        ForegroundColorSpan(
            ContextCompat.getColor(
                this, R.color.yellow_FFC001
            )
        ),
        11, 14,
        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE
    )

//changing text size of yellow portion i.e. "100"
    val sp20 = resources.getDimensionPixelSize(R.dimen.sp_20)
    buttonText.setSpan(AbsoluteSizeSpan(sp20), 11, 14, Spannable.SPAN_INCLUSIVE_INCLUSIVE)

//setting button fonts
    buttonText.setSpan(
        CustomTypefaceSpan("", ResourcesCompat.getFont(this, R.font.roboto_condensed_bold)!!),
        0,
        buttonText.length,
        0
    )

//finally setting this text to my button
btGetPoints.text = buttonText 
```

**3.最终的输出是这样的**

[![在此处输入图像描述](../Images/2d6892ef9135e41e64b3b66d4480eefc.png)](https://i.stack.imgur.com/TeWs4.png)

# c++ - 是否有一个库（跨平台）来处理操作系统日期？

> ID：10675071
> 
> 赞同：1
> 
> 时间：2012-05-20T16:15:56.700
> 
> 标签：c++, c, date, operating-system

我正在寻找一个跨平台（适用于类 UNIX 和 Windows）库来处理操作系统日期。C程序员有吗？或 C++，如果真的没有 C。在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T16:18:10.547

也许您应该尝试[Boost.Date_Time](http://www.boost.org/doc/libs/1_49_0/doc/html/date_time.html)。

# c++ - register 关键字还在使用吗？

> ID：10675072
> 
> 赞同：11
> 
> 时间：2012-05-20T16:16:04.453
> 
> 标签：c++, performance, caching, latency

刚刚在 C++ 中遇到了 register 关键字，我想知道这似乎是一个好主意（将某些变量保存在寄存器中），编译器是否默认会这样做？

所以我想知道这个关键字还在使用吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T16:20:28.517

大多数实现只是忽略`register`关键字（除非它强加了句法或语义错误）。

该标准也没有说任何东西都必须保存在登记簿中。只是它暗示了该变量将经常使用的实现。它的使用甚至被弃用。

> ## 7.1.1 存储类说明符 [dcl.stc]
> 
> 3) 寄存器说明符是对实现的提示，即如此声明的变量将被大量使用。[ 注意：提示可以被忽略，并且在大多数实现中，如果变量的地址被获取，它将被忽略。这种用法已被弃用（见 D.2）。——尾注]

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-20T16:21:30.030

标准这样说（7.1.1（2-3））：

> 寄存器说明符仅应用于块中声明的变量名称（6.3）或函数参数（8.4）。它指定命名变量具有自动存储持续时间（3.7.3）。在块范围内声明的没有存储类说明符的变量或声明为函数参数的变量默认具有自动存储持续时间。
> 
> 寄存器说明符是对实现的提示，即如此声明的变量将被大量使用。[ 注意：提示可以被忽略，并且在大多数实现中，如果变量的地址被获取，它将被忽略。这种用法已被弃用（见 D.2）。——尾注]

总而言之：`register`是无用的，退化的，返祖的和弃用的。它的主要目的是让那些试图实现自注册类并想要命名 main 函数的人的生活更加艰难~~`register(T *)`~~。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-20T16:25:28.953

`register`可能关键字 left的唯一远程严重用途是[GCC 扩展](http://gcc.gnu.org/onlinedocs/gcc/Global-Reg-Vars.html)，它允许您使用硬编码硬件寄存器而无需内联汇编：

```
register int* foo asm("a5"); 
```

这将意味着任何`foo`对 CPU 寄存器的访问都会受到影响`a5`。

当然，这个扩展在非常低级的代码之外几乎没有用处。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-20T16:18:47.113

对于任何 C++ 程序，只有特定数量的寄存器可用。

此外，这只是对编译器的建议，大多数编译器可以自己进行此优化，因此使用关键字等并没有太多使用，`register`因为编译器可能会也可能不会遵循建议。

~~因此，关键字对现代编译器所做的唯一事情`register`就是阻止您使用`&`来获取变量的地址。~~

使用`register`关键字只会阻止您在 C 中获取变量的地址，而在 C++ 中获取变量的地址只会使编译器忽略该`register`关键字。

底线是，**不要使用它！**

Herb 很好地解释了：
**[不是的关键字（或其他名称的评论）](http://www.drdobbs.com/184403859)**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-20T16:20:56.717

不，它没有被使用。这只是一个提示，而且非常微弱。编译器具有寄存器分配器，它们可以确定哪些变量应该保存在寄存器中（并说明您可能从未想过的事情）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-16T14:02:53.557

自 2011 年 C++ 标准以来，关键字“register”已被弃用；请参阅[“删除不推荐使用的 register 关键字”](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4340.html)。因此不应使用它。

在我自己的实验中，我发现如果使用“register”关键字，由 gcc (v8.1.1) 生成的调试代码确实会有所不同；生成的汇编代码将指定的变量分配给寄存器。基准测试甚至表明此代码运行得更快（比没有“注册”的代码）。然而，这无关紧要，因为发布（优化）代码没有显示任何差异（即，使用“注册”没有效果）。Vacbob[在这里](https://arstechnica.com/civis/viewtopic.php?t=225464)指出，如果启用了任何优化，则 gcc 将忽略“注册”。我自己的测试证实了这一点。

所以，总而言之，不要使用“注册”，如果使用“注册”时调试代码运行得更快，请记住优化的发布代码不会。

# java - inline::java 和草莓 perl

> ID：10675073
> 
> 赞同：3
> 
> 时间：2012-05-20T16:16:08.603
> 
> 标签：java, perl, cpan, perl-module

我尝试安装此模块： Inline::Java with strawberry perl 5.10 我收到以下错误消息：

```
dmake:  Error code 129, while making '..\blib\arch\auto\Inline\Java\JNI\JNI.dll'
dmake.EXE:  Error code 255, while making 'subdirs'
  PATL/Inline-Java-0.53.tar.gz
  C:\strawberry\c\bin\dmake.EXE -- NOT OK
Running make test
  Can't test without successful make
Running make install
  Make had returned bad status, install seems impossible
Failed during this command:
 PATL/Inline-Java-0.53.tar.gz                 : make NO 
```

其中以下环境变量定义如下：

PERL_INLINE_JAVA_J2SDK =C:\jdk1.7.0 PERL_INLINE_JAVA_JNI =1

还将所有 jdk1.7.0 子目录添加到路径环境变量中。

有人可以提示这个错误可能是什么吗？

如果可能的话，我该如何纠正？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-20T18:04:44.777

此常见问题解答中涵盖了该问题： [Strawberry Perl - Win32 Wiki](http://win32.perl.org/wiki/index.php?title=Strawberry_Perl)

请编辑您的帖子标题以表明您需要有关构建问题的帮助。

# javascript - Google Maps V3，包裹在第二个div中时地图不会显示

> ID：10675075
> 
> 赞同：1
> 
> 时间：2012-05-20T16:16:22.303
> 
> 标签：javascript, google-maps, google-maps-api-3

我是谷歌地图的新手。我从他们的“Hello World”代码开始，它有以下内容：

```
<body onload="initialize()">
<div id="map_canvas" style="width:100%; height:100%"></div>
</body> 
```

这当然可以正常工作。但是，如果我想将他们的 div 包装在另一个 div 中（这样我可以设置各种容器样式），则地图根本不会显示：

```
<body onload="initialize()">
<div>
<div id="map_canvas" style="width:100%; height:100%"></div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T16:18:43.097

适用于：`width`_`height``div`

```
<div style="width:100%; height:100%;">
   <div id="map_canvas" style="width:100%; height:100%"></div>
</div> 
```

内部 div 的 ( `id="map_canvas"`div ) 大小由百分比设置。这意味着内部`div`将适合其父尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:03:35.287

检查 SCRIPT src URL 是否以 http:// 开头。我花了大约半天的时间调试才意识到这一点。

早些时候...

```
<script src="//maps.google.com/maps?file=api&amp;v=2&amp;key.... 
```

现在

```
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key.... 
```

它现在在本地工作......

# java - Java构造函数扩展

> ID：10675076
> 
> 赞同：5
> 
> 时间：2012-05-20T16:16:26.013
> 
> 标签：java

当我扩展一些类时，例如：

```
public class First {
    int id;
    public First(int _id) {
        id = _id;
    }
} 
```

和

```
public class Second extends First {

} 
```

当我只需要做同样的事情时，我必须重新声明 Second class 的构造函数。我可以：

```
public Second(int _id) {
    super(_id);
} 
```

但是每次我更改父构造函数时，都需要编辑所有扩展类的构造函数。

如何完全扩展构造函数？

**该死的，不要告诉我电话和天线，我用过很多次OOP。**

**现在我只问 - 我不能在扩展类上编写 public Class(){} 并使用父构造函数吗？**

**好像我做不到。好的。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T16:30:27.743

定义子类时，它不会从超类继承构造函数。对于默认超类构造函数以外的任何内容，您都需要在每个子类构造函数中显式调用超类构造函数。（这意味着，除其他外，如果基类没有默认构造函数，~~则任何子类也不能~~每个子类构造函数都必须显式调用超类构造函数——并且任何子类都不能仅具有编译器生成的默认构造函数。有一个例外；请参阅下面的^([*])。）

继承构造函数可能会导致各种问题。想象一下这样的事情：

```
class Base {
    private int mId;
    public Base(int id) {
        mId = id;
    }
    . . .
} 
```

现在我们要派生一个具有第二个属性的类——一个标签——我们要确保它是 never `null`。所以我们写如下：

```
class Derived extends Base {
    private Object mTag;
    public Derived(Object tag, int id) {
        super(id);
        if (tag == null) {
            throw new IllegalArgumentException("tag cannot be null");
        }
        mTag = tag;
    }
    . . .
} 
```

现在想象构造一个`Derived`这样的实例：

```
Derived derived = new Derived(3); 
```

如果构造函数被继承，这可能是合法的。这意味着什么？一方面，`mTag`将设置为其默认值`null`. 没有办法`Derived`强制执行所有实例都`Derived`必须具有非空标记的规则。

以需要更多输入为代价，Java 精确地排除了继承构造函数，以允许每个类完全控制其实例的创建方式。

^([*])在一种情况下，编译器会自动生成一个非默认构造函数。考虑`Base`上面的类和这段代码：

```
Base foo = new Base(3) {
    . . . // some extended functionality
}; 
```

现在`foo`正在初始化为`Base`. 为了方便参考，我们称这个子类`Base$Anon`。编译器将生成等效于：

```
class Base$Anon extends Base {
    Base$Anon(int id) {
        super(id);
    }
    . . . // some extended functionality
}

Base foo = new Base$Anon(3); 
```

如果您不指定自己的任何构造函数，这是编译器生成非默认构造函数的唯一情况。事实上，语言语法甚至不允许您为匿名类声明构造函数。您必须依靠编译器为您生成一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T16:24:56.533

这个限制是我更喜欢组合而不是继承的原因之一。考虑改用这样的代码：

```
public class Second {
    private final First first;

    public Second(final First first) {
         this.first=first;
    }

    public int getId() {
        return first.getId();
    }
} 
```

在我看来，这种结构还使您的两个类的耦合度降低，并使类之间的关系更加清晰。有关组合优于继承的更全面讨论，请参见例如这个问题：[Prefer composition over inheritance？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)

# c++ - VS2008 C++“接口”作为参数名编译失败

> ID：10675077
> 
> 赞同：1
> 
> 时间：2012-05-20T16:16:43.200
> 
> 标签：c++, visual-c++

正如标题所说，我在 VS2008 C++ 程序中遇到编译器错误。我不确定如何更好地描述我的问题而不是在代码中。除非我取消注释 TEST 行，否则以下编译。

```
#include <windows.h>
#include <iostream>
using namespace std;

//#define TEST //<-- uncomment for error
#ifdef TEST
void test(void* interface)
{
    return;
}
#endif
int main()
{
    cout << "Hello World" << endl;
    system("PAUSE");
    return(0);
} 
```

取消注释时，我收到以下错误：

```
1>main.cpp(7) : error C2332: 'struct' : missing tag name
1>main.cpp(7) : error C2144: syntax error : '<unnamed-tag>' should be preceded by ')'
1>main.cpp(7) : error C2144: syntax error : '<unnamed-tag>' should be preceded by ';'
1>main.cpp(7) : error C2059: syntax error : ')'
1>main.cpp(8) : warning C4094: untagged 'struct' declared no symbols
1>main.cpp(8) : error C2143: syntax error : missing ';' before '{'
1>main.cpp(8) : error C2447: '{' : missing function header (old-style formal list?) 
```

这是非托管代码，所以我不确定接口这个词的问题是什么。有没有办法让这个代码按原样编译，还是我必须将术语接口的每个实例更改为其他东西？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:37:03.947

如果您的代码需要包含，`Windows.h`那么您应该避免使用该名称`interface`，因为它是为 Windows SDK 为其保留的用途而保留的（本质上它是关键字的同义词`struct`）。可能有一些技巧可以解决该问题（您可以`#undef interface`在包含 SDK 标头之后），但您应该避免使用该标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T16:21:09.267

这个词`interface`是MSVC++保留的，因为它是微软编译器添加的一个非标准，用于在MSVC++`keyword`中定义*接口。*

因此，为参数使用不同的名称，如下所示：

```
#ifdef TEST
void test(void* test_interface)
{
    return;
}
#endif 
```

# jquery - 在定义的时间之前使用 .animate scrollTop 滚动到底部

> ID：10675080
> 
> 赞同：0
> 
> 时间：2012-05-20T16:17:00.180
> 
> 标签：jquery, jquery-animate, scrolltop

我正在使用 jQuery .animate 来单击滚动到页面的某个部分。我有 3 次，1 次用于滚动回顶部（工作正常），1 次用于滚动到第 2 节（工作正常）和 1 次用于滚动到第 3 节。

当滚动到第 3 部分（页面底部）时，它似乎比定义的时间更快地完成。所以最终发生的是它直接滚动到底部，但它仍在运行，所以你不能再次向上滚动，直到时间过去。

它运行的站点是 new.pudle.co.uk（尝试单击“获取联系”以查看实际问题）

我正在使用的 jQuery 代码是：

```
// JavaScript Document
$(document).ready(function() {  

$('.proj-tile').click(function()   {
if($(window).scrollTop() >= 300) { //has scrolled considerably to animate
    $('html, body').animate({ scrollTop: '+0'   }, 1200);
}
});

$('#a-u').click(function()  {
    $('html, body').animate({ scrollTop: '+800' }, 1200);
});

$('#c-u').click(function()  {
    $('html, body').animate({ scrollTop: '+1500' }, 3000);
});

}); 
```

# jquery - 更新内容时弹出jquery气泡不起作用

> ID：10675091
> 
> 赞同：0
> 
> 时间：2012-05-20T16:18:27.507
> 
> 标签：jquery

我正在使用jquery气泡弹出，代码如下，

```
 $(document).ready(function(){
           //create bubble popups for each element with class "button"
           $('.button').CreateBubblePopup({
                  selectable: true,
              innerHtmlStyle: {
               color:'#333333', 
              'text-align':'center'
              },

              themeName:    'green',
                  position: 'right',
                  themePath:    'images/jquerybubblepopup-theme'
        });
     }); 
```

和显示气泡弹出窗口的元素是普通的 div 元素，类为按钮（检查上面的代码）

所以假设我有三个 div 元素，其中类为按钮，三个不同的 id 为

_1 _2 _3

我为它们设置气泡弹出的代码如下

```
$('#_1').SetBubblePopupInnerHtml('Hi Bubble 1');
$('#_2').SetBubblePopupInnerHtml('Hi Bubble 2');
$('#_3').SetBubblePopupInnerHtml('Hi Bubble 3'); 
```

这工作正常，

但现在的问题是，当页面获得 jquery 响应时，我使用更新的内容重新创建 div 元素（类为按钮，id 为 _1、_2、.._n），并且我还需要更新它们各自的气泡弹出窗口的内容，

所以现在要获取气泡弹出窗口的更新内容，我修改了代码如下

```
var bcontents = new Array();

bcontents[0] = 'Hi Bubble 1';
bcontenst[1] = 'Hi Bubble 2';
bcontenst[2] = 'Hi Bubble 3'; 
```

进而

```
 $('#_1').SetBubblePopupInnerHtml(bcontents[0]);
 $('#_2').SetBubblePopupInnerHtml(bcontents[1]);
 $('#_3').SetBubblePopupInnerHtml(bcontents[2]); 
```

因此，当我得到 jquery 响应时，我将 divs 类重新创建为按钮，并将 ids 重新创建为 _1,_2 ...。与此同时，我也在修改 bcontents 数组的内容，但我没有弹出 jquery 气泡以获取更新的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:46:09.957

重新创建 div.button 后再次调用**CreateBubblePopup 。**

# java - 在 Android 的运行时创建一个类

> ID：10675095
> 
> 赞同：3
> 
> 时间：2012-05-20T16:18:36.203
> 
> 标签：java, android, class, runtime

我需要在 Android 的运行时创建一个扩展抽象类的类。我真正需要的是生成这样的东西：

```
Class A extends AbstractClass{

    A(){
         super("A name that is saved on AbstractClass");
         fieldFromAbstractClass =...
    }

    @Override
    public void aMethodFromAbstractClass(){
       //some code....
    }
} 
```

我想在**运行时**生成它。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T16:35:59.697

在“传统”Java 中，您可以在运行时创建和编译类，或者使用 ASM 等字节码生成器来扩充或生成类文件。

但是，您需要记住，Android*不是*Java 虚拟机。当您创建一个 APK 时，类文件被转换成专门的字节码，由 Android 的 Dalvik 虚拟机处理。

~~我不知道 Dalvik 特定的运行时字节码生成器，所以我不相信（目前）可以做你描述的事情。~~

**编辑**

有一个名为[Dexmaker](https://github.com/linkedin/dexmaker)的库可以完成此任务。我从[这个相关的答案](https://stackoverflow.com/a/9527831/67063)中发现了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:35:43.440

您可以创建`A`一个匿名内部类。但是，您不能提供新的构造函数。对于您的示例，请定义`fieldFromAbstractClass`并`AbstractClass`提供 getter 和 setter。

```
 AbstractClass a = new AbstractClass() {
        @Override
        public void aMethodFromAbstractClass() {
           // ...
        }
    }
    a.setFieldFromAbstractClass( someValue );
// do something with A 
```

如果声明为 final，您还可以从内部类的包含块中引用变量。有关更多信息，我建议阅读一些 Java 教程或书籍。

# c# - 正确使用与 C# 和 MySQL 的连接

> ID：10675102
> 
> 赞同：3
> 
> 时间：2012-05-20T16:19:48.820
> 
> 标签：c#, mysql

C#/MySQL 交互的典型示例涉及这样的代码（为了简单起见，我跳过了 try/catch 和错误检查）：

```
conn = new MySqlConnection(cs);
conn.Open();
string stm = "SELECT * FROM Authors";
MySqlCommand cmd = new MySqlCommand(stm, conn);
rdr = cmd.ExecuteReader(); 
```

该方案是一个用于独立应用程序和 WCF Web 服务的类库。那么，每当我进行查询时，我应该打开连接吗？还是我应该在打开程序时打开一次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:44:03.700

要扩展 HackedByChinese 的建议，请考虑以下内容。您有一个主要的协调方法来处理创建连接、打开它、设置事务，然后调用执行不同类型工作（查询）的工作方法。

```
 public static void UpdateMyObject(string connection, object myobject)
        {
        try
        {
            using (SqlConnection con = new SqlConnection(connection))
            {
                con.Open();
                using (SqlTransaction trans = con.BeginTransaction())
                {
                    WorkingMethod1(con, myobject);
                    WorkingMethod2(con, myobject);
                    WorkingMethod3(con, myobject);
                    trans.Commit();
                }
                con.Close();
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("SOMETHING BAD HAPPENED!!!!!!!  {0}", ex.Message);
        }
    }

    private static void WorkingMethod1(SqlConnection con, object myobject)
    {
        // Do something here against the database
    }

    private static void WorkingMethod2(SqlConnection con, object myobject)
    {
        // Do something here against the database
    }

    private static void WorkingMethod3(SqlConnection con, object myobject)
    {
        // Do something here against the database
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T17:07:12.770

您通常希望为每个[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)打开一个连接。MySQL ADO.NET 驱动程序可以为您池连接，但是，我建议不要让每个查询都打开一个连接。可能发生的情况是您开始使用多种方法来为一项业务事务提供服务，并且由于每个方法都在打开一个连接，您最终可能会导致该一项业务事务耗尽您的可用连接。这当然会导致超时、性能不佳等。

相反，请考虑定义一个`IUnitOfWork`/ `UnitOfWork`API 来创建和打开连接和事务，并让您的数据访问层请求 current `IUnitOfWork`，这将提供当前的连接和事务。

当然，诀窍在于知道一个工作单元何时开始以及何时结束。它们与完整的、有意义的操作（“业务交易”）相关联。例如，当您为您的 WCF 服务之一上的方法的请求提供服务时。当服务实例启动时，为了响应请求，应该创建一个工作单元。然后你的 DAL 组件可以请求当前的工作单元并使用它。然后当请求完成时，应该提交工作单元（应该提交事务并关闭连接）。

# css - 如何重构我的 CSS？

> ID：10675103
> 
> 赞同：21
> 
> 时间：2012-05-20T16:19:50.483
> 
> 标签：css, refactoring

> **可能的重复：**
> [如何管理 CSS 爆炸](https://stackoverflow.com/questions/2253110/how-to-manage-css-explosion)

我打算用一致的样式和连贯的 CSS 方案构建我的网站。但是当我微调各个页面（尤其是主搜索表单）时，样式已经失控了。

我已经经历了一次打破风格并几乎从头开始重建的过程，现在看起来是时候再做一次了。我怎样才能有效地做到这一点？我正在寻找一种方法，而不是软件实用程序（尽管我愿意接受那里的建议......除非他们花钱......）。

**补充说明：** 我使用的是 CSS 框架，很难保持`padding`和`margin`协调。

**添加注释 2：** 对这篇文章的最初回复是关于 CSS 的最佳实践。假设我已经尝试遵循最佳实践（事实上，我确实这样做了）。现在是我正在寻找的清理程序。

**添加注释 3：** 截至 6 月 14 日，[将此回复](https://stackoverflow.com/questions/3720174/how-to-remove-css-spaghetti-in-legacy-web-app?rq=1)（我刚刚找到）与我在下面的帖子结合起来可能是一个全面的答案。

**关闭说明：**

我了解到我的问题太笼统了，因此我希望我没有发布它。（也许这就是它被否决的原因......如果没有评论来解释原因，我永远不会知道。）另一方面，我得到了我需要的东西，所以我很高兴我确实发布了它。

我很惊讶我的回答没有得到支持——即使其他人的无价投入，我认为它站得很好。

从我的角度来看，我的接受将主要基于答案的可用性——可悲的是，这种观点无法消化一些更令人兴奋和更全面的回答。

**完全重复关闭**

我只是尝试再次发布此内容（主题、正文、标签）以查看 SO 是否会建议发布“如何管理 CSS 爆炸”。有趣的是，它没有。`refactoring`我在该帖子中添加了标签。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T21:32:16.437

将您的 css 拆分为单独的文件。

1.  将 CSS 重置文件放入一个文件（如果您使用一个）
2.  然后创建一个 global.css 文件，您将在其中放置适用于所有页面的全局样式
3.  然后为您的各个页面创建单独的文件

然后开始为您的页面设置样式。每次您找到可在许多页面上重复使用的样式规则时，将其设为*CSS 类*并将其放入 global.css 文件中。避免使用 css ID。你会发现自己更经常重复使用的东西或者将来会重复使用。在这种情况下，您当然会使用 CSS 类。

最终你会发现在你的 global.css 中你会发现主要是 CSS 类规则和 html 标签规则。

在您的单个页面 CSS 文件中，您将找到每个页面的特定样式。

这应该为您的 CSS 提供良好的第一级组织。您可以尝试在整个开发过程中保持这种分离，并在发布时将 CSS 文件合并为一个并缩小它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-17T22:04:21.610

我对 css 清理的价值 2p，来自之前的一个类似问题： [清理和维护大 css 文件的提示](https://stackoverflow.com/questions/10786319/tips-for-cleaning-and-maintaining-a-big-css-file/10786695#10786695)

希望这可以帮助您与其他人的答案一起！

1.  开始分支项目（这里我假设您正在使用版本控制工具） - 这将允许您独立使用代码并标记您将达到的任何里程碑。

2.  使用美化器格式化您的 CSS - 它会增加可读性，并有助于搜索特定声明而不会丢失任何实例。

3.  尝试识别未使用/冗余的 css 并摆脱它。

4.  您可以尝试使选择器更短（例如 .main .foo .bar 可能与 .bar 一样好） - 它会提高可读性并提高性能，但请稍加注意，并准备好在事情开始时返回在你迈出的每一步都打破。

5.  如果可能，尝试消除任何 !important - 如果需要，使选择器更具体。如果大多数 !important 语句用于修复特定于浏览器的问题，则 css 重置可能会有所帮助，否则现在引入 css 重置可能会增加比解决问题更多的问题 - 如果您的应用程序中没有 css 重置全部。

6.  将 css 分解并重新组合成不同的模块（如果有帮助，还有文件） - 面向对象的 CSS 是一种使事情更易于维护的可能技术，如果你从它开始它效果最好，但它也可以帮助你重构。[https://github.com/stubbornella/oocss/wiki](https://github.com/stubbornella/oocss/wiki)是有效的，但您可以考虑其他替代方案，例如 SMACSS。

7.  之后，您可以考虑使用 CSS 预处理器，例如 Less 或 Sass，允许您定义变量和 mixin（类似于函数）、模块化等等——尽管这最终可能是一项非常昂贵的任务，因此请仔细评估是否这样会给你带来比痛苦更多的好处。

8.  尽可能多地进行测试，考虑单元测试以确保您所做的任何更改都不会破坏其他地方的任何东西。

9.  有时，重写所有内容最终可能比重构更耗时，所以如果您的评估表明重构不会带来足够的好处，请不要害怕保持原样。

编辑

事情永远改变和发展；关于 OOCSS/SMACSS 方法，我很高兴地关注了一段时间，[Yandex 的](https://en.bem.info/method/definitions/)CSS BEM 方法，我想将它作为附加推荐添加到上面

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-20T16:23:04.167

我要做的第一件事是根据用途分离 CSS。可能首先是一般的页面布局（DIV、框...），然后是样式（字体、H1/H2/.../Hn 标题），然后是一些更专业的 CSS（用于表格、表单、特定组件的 CSS网站）。

这种分离有助于组织变化；如果您必须更改或添加字体，您知道您会在样式部分找到它。如果您必须更改页面布局，则相同，依此类推。

当您拥有“单个页面”时，事情往往会变得混乱；他们的布局*有那么*不同吗？您可能必须尽可能抽象出页面的共同特征（例如，主要内容容器框）。然后考虑更多地专注于布局（1-column，2-column）等等。如果您有程序员背景，只需考虑类和继承，这个概念 - 是的，我知道这是一个完全不同的领域...... - 但这个概念在设计你的 CSS 时很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T07:54:30.767

我看到人们已经建议使用 OOCSS 等方法，所以我将提供不同/额外的思路。我相信这个问题比你的 CSS 和你编写它的方式更深。我相信您的 CSS 失控的原因是您问题中的这句话：

> ...当我微调各个页面时...

这让我认为**问题在于你的设计**，而不是你的 CSS，所以让我详细说明一下。在我看来，一个伟大的设计是不需要为每个单独的页面定制的设计——这有几个原因。主要原因是，正如您自己提到的，您的 CSS 失控了。**对单个元素的小调整和修复**，取决于它们的放置位置，**通常会导致混乱**这是一个痛苦的维护和工作。这里还有一个可用性原因。我相信如果用户熟悉 UI 并在页面之间识别自己，而不会有太多变化，那么 UI 会变得更容易使用。当然，您可能有一些元素不在每个页面上，或者在页面之间有所不同，但我总是努力将它们保持在最低限度。

我的建议是，如果你打算重写你的 CSS，这无论如何都是耗时和艰苦的工作，那么**为什么不同时重新评估你的设计**。您可能会发现有些元素可以修改以使它们看起来相同。目标是在不影响设计的情况下尽可能多地去除 UI 元素。当您尽可能地统一设计时，是时候重构您的 CSS 甚至您的标记了？

在这一点上，最好**摆脱所有的 CSS 并重新开始**。如果您继续使用旧代码，很容易变得懒惰并被一些效率较低的旧代码卡住。

对于编码，我相信其他答案包含许多好的建议和最佳实践。我个人会投票支持**OOCSS**，这也是我自己的一个新发现，但它极大地改进了我构建 CSS 的方式。所以看看那个！这也将帮助您在重用元素和它们的 CSS 方面进行思考，这对于简化您的 CSS 大有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-24T16:30:01.757

基于当前这一轮工作，这是我到目前为止所得到的：

## 规划

1.  拥有一个系统来处理 HTML 和 CSS 中的待办事项符号。许多 IDE 直接支持这一点，或者全局搜索功能就可以了。除了标记问题之外，您还需要注意优先级，甚至可能是功能区域（但要保持简单，而不是负担）。
2.  不要开始修改你的代码。首先使用您的待办事项系统进行计划。
3.  列出你的总体目标的简明清单。

    *   考虑整体风格变化，例如颜色或字体方案。
    *   查看 CSS 的最佳实践。确定您的方法无效的领域，或者可以更一致地应用好的方法的领域。例子：
        *   巩固课程
        *   消除随意使用内联样式
        *   删除未使用、冗余或冲突的样式
        *   提高总体一致性；应用一组约定
        *   改进计量单位
        *   使用反映内容而不是格式的类和 id 名称
    *   决定您想要支持多少浏览器市场，以及在多大程度上接受或依赖最新标准。
    *   确定您是否要采用任何新方法。例子：
        *   使用重置样式表来标准化浏览器显示
        *   CSS框架的使用
        *   使用专门的图书馆，例如帮助处理表格
        *   动态 CSS *（我最近遵循了使用 PHP 处理我的 CSS 的建议，因此我可以动态控制我的配色方案。但我回到了纯 CSS，因为我喜欢在我的 IDE 中呈现 CSS 代码，而混合方法把它搞砸了。 )*
4.  查看您的目标列表并决定现在应该追求的目标。如果可能的话，任何大规模的变化都应该被单独对待。如果您的列布局一团糟，那么现在不是学习 CSS 如何优雅地替代您的 javascript 的时候。最佳实践、风格变化等也是如此。
5.  如果您为速度配置了 CSS 文件（例如，压缩足迹或单个文件中的所有 CSS），请更改它。将代码分解为人工可管理的格式。稍后，当您完成后，尝试进行基准测试，看看更清晰的版本是否也足够高效以供生产使用。
6.  将您的 CSS 提交给[验证器](http://jigsaw.w3.org/css-validator/)。记下您要修复的任何违规行为。
7.  在 HTML 中查找内嵌样式的实例（搜索`style`属性）。请注意任何应该移动到样式表的内容。

    ## 工作

8.  关注您的待办事项经理。做常识性的备份。在您进行的过程中，在多个浏览器上测试您的工作。

9.  如果您喜欢正则表达式，请注意：正则表达式通常对重写 CSS 无效或安全。（不像 HTML 那样危险，但仍然如此）。正则表达式可能有助于将 CSS 更改发送到 HTML，但请再次小心。
10.  如果您对边距和填充有很多调整，请尝试将它们全部重置为`0px`（好的，在此处使用正则表达式）。然后系统地建立它们备份。你可以通过这种方式解决很多困惑。当然，不要在此过程中包含任何库或框架样式表。
11.  再次，将您的 CSS 提交给[验证器](http://jigsaw.w3.org/css-validator/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T20:41:34.193

这个答案是关于注释的；“我使用的是 CSS 框架，很难保持内边距和边距的协调。” 只要。

使用 css 预处理器将解决这个问题。因为 css 无法分配继承，因此我们必须一遍又一遍地重复 'margin:10px'。

使用你刚刚做的预处理器

```
@margin {10px}
@padding {10px} 
```

然后

```
.mySelector{
    margin: @margin;
    padding: @padding;
} 
```

* * *

对于更广泛的问题，重新考虑/简化您的设计，因为您的 css 与设计的复杂性成正比，您对此无能为力。

另见[http://www.stubbornella.org/content/2011/04/28/our-best-practices-are-killing-us/](http://www.stubbornella.org/content/2011/04/28/our-best-practices-are-killing-us/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T14:56:48.023

这比如何管理流程的 Q 更多关于使您的 css 可维护的建议。

我创建了一堆单独的 css 文件，每个文件都针对特定属性（颜色、字体、边距、角）或功能（导航、表单）进行了严格定制。然后我使用编译阶段将这些文件组合并缩小为一个或多个文件以发送给客户端。我在构建/测试过程中执行此操作，但可以通过 CGI 脚本动态完成。

在采用预编译器之前，请考虑经常被忽视的多选择器语法：

```
element,
otherlement
{
  margin:10px;
} 
```

在这个例子中，每当我想要一个元素有 10px 的边距时，我都会将它添加到列表中。我以这种方式分隔不同的属性集 - 我可能在我的 css 中列出相同的元素 5 次 - 将它与 5 个不同的属性集相关联。

也不要忽视向 body 标签添加各种类以创建类似 OO 的继承 - 假设您的网站有 3 个主要部分 - 根据这些部分为 body 标签分配一个类。同样，如果您有 1000 个产品页面，您可以为 body 标签指定一个类，如“product485”，然后创建仅适用于该页面的样式。例如：

```
h1 {
  margin: 10px;
}
.product485 h1,
.product484 h1
{
  margin: 5px;
}
.contact h1 {
  margin: 15px;
} 
```

这可能都在一个名为“margins.css”的文件中，该文件仅指定边距。

# wcf - 使用 Microsoft.Data.Services.Client.dll 而不是 System.Data.Services.Client.dll 会导致 Azure.StorageClient 出现问题

> ID：10675104
> 
> 赞同：4
> 
> 时间：2012-05-20T16:19:54.047
> 
> 标签：wcf, azure, odata

我们有一个使用 WCF 5.0 和 WindowsAzure SDK 的项目。

有两个引用 Microsoft.Data.Services.Client.dll 和 System.Data.Services.Client.dll 并且它们存在冲突。如果我删除系统 DLL（根据[这个](https://stackoverflow.com/questions/5773011/microsoft-data-services-client-dll-vs-system-data-services-client-dll)），我将无法使用 windowsAzure SDK。如果我删除 Microsoft DLL，我将无法利用 WCF 的新功能，特别是 OData 3.0 版。

删除系统 DLL 引用后：

> 无法从 'System.Data.Services.Client.SaveChangesOptions [c:\Program Files (x86)\Microsoft WCF Data Services\5.0\bin.NETFramework\Microsoft.Data.Services.Client.dll]' 转换为 'System.Data .Services.Client.SaveChangesOptions'

附加信息：

> 'Microsoft.WindowsAzure.StorageClient.TableServiceContext.SaveChangesWithRetries(System.Data.Services.Client.SaveChangesOptions)' 的最佳重载方法匹配有一些无效参数
> 
> 'System.Data.Services.Client.DataServiceContext' 类型在未引用的程序集中定义。您必须添加对程序集“System.Data.Services.Client, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的引用。

如果我删除对 Microsoft.Data.Services.Client 的引用并添加对 System.Data.Services.Client 的引用，那么我们不会收到任何错误 - 我们也不会收到 WCF 5.0！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:48:46.323

我能够很快地重现这个问题。Microsoft.WindowsAzure.StorageClient.Dll 对 System.Data.Service.Client.Dll 具有直接引用依赖关系，如下所示，因此如果要使用 Azure 存储客户端 API，则必须引用 System.Data.Service.Client.Dll在您的应用程序中，并确保您不能使用 WCF 5.0 SDK 提供的 oData 3.0。更多信息发布在下面的 SO 问题中：

[WCF 5.0 和 oData 3.0 API 不适用于 azure 表存储](https://stackoverflow.com/questions/10889274/wcf-5-0-and-odata-3-0-api-not-work-with-azure-table-storage/10889397#10889397)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T22:35:44.180

您可以使用**外部别名**来区分两个相同的类型名称，除了它们所在的程序集之外。

1.  为 System.Data.Services.Client 设置别名 - 比如 SystemDataV4

    （请参阅[MSDN 博客 - Extern Alais 演练](http://blogs.msdn.com/b/ansonh/archive/2006/09/27/774692.aspx)）

2.  在 .cs 文件的最顶部使用

    外部别名 SystemDataV4；

然后你可以有

```
using SystemDataV4.System.Data.Services.Client; 
```

或者

```
serviceContext.SaveChangesWithRetries(SystemDataV4.System.Data.Services.Client.SaveChangesOptions.ReplaceOnUpdate); 
```

注意命名空间的前缀和别名，例如**SystemDataV4** .System.Data.Services...

# c# - 使用 linq2xml 读取自定义标签

> ID：10675107
> 
> 赞同：0
> 
> 时间：2012-05-20T16:20:07.380
> 
> 标签：c#, xml, linq-to-xml

如何使用 linq2xml 读取标签？

```
var q = (from c in xDocument.Descendants("colecciones").Descendants("BoTblPacientes")
                    select c).ToList(); 
```

但不工作。

```
<?xml version="1.0" ?>
<DalClassObject xmlns="http://www.asd.com">
  <objeto class="BoTblPacientes"></objeto>
  <validador>true</validador>
  <mensaje>El paciente  existe en el sistema .</mensaje>
  <colecciones>
    <BoTblPacientes>
      <tblpacientesmotivoconsulta>5</tblpacientesmotivoconsulta>
      <tblpacientestlfcasa>5</tblpacientestlfcasa>
      <tblpacientescelular>5</tblpacientescelular>
      <tblpacientesoficina>5</tblpacientesoficina>
      <tblpacientescorreo>5</tblpacientescorreo>
      <tblpacientesdireccion>5</tblpacientesdireccion>
      <tblpacientesapellidos>5</tblpacientesapellidos>
      <tblpacientesdocumento>5</tblpacientesdocumento>
      <tblpacientessexoid>0</tblpacientessexoid>
      <tblpacientesfechanacimiento class="sql-date">2012-05-13</tblpacientesfechanacimiento>
      <tblpacientesnombres>5</tblpacientesnombres>
      <tblpacientesid>2</tblpacientesid>
      <tblpacientesestadocivil>0</tblpacientesestadocivil>
      <tblpacientesfecharegistro class="sql-date">2012-05-13</tblpacientesfecharegistro>
      <tblpacienteidmaster>0</tblpacienteidmaster>
    </BoTblPacientes>
    <BoTblPacientes>
      <tblpacientesmotivoconsulta>23232</tblpacientesmotivoconsulta>
      <tblpacientestlfcasa>2332</tblpacientestlfcasa>
      <tblpacientescelular>23</tblpacientescelular>
      <tblpacientesoficina>23</tblpacientesoficina>
      <tblpacientescorreo>23</tblpacientescorreo>
      <tblpacientesdireccion>2323</tblpacientesdireccion>
      <tblpacientesapellidos>ewr</tblpacientesapellidos>
      <tblpacientesdocumento>5</tblpacientesdocumento>
      <tblpacientessexoid>0</tblpacientessexoid>
      <tblpacientesfechanacimiento class="sql-date">2012-03-29</tblpacientesfechanacimiento>
      <tblpacientesnombres>wer</tblpacientesnombres>
      <tblpacientesid>3</tblpacientesid>
      <tblpacientesestadocivil>0</tblpacientesestadocivil>
      <tblpacientesfecharegistro class="sql-date">2012-05-13</tblpacientesfecharegistro>
      <tblpacienteidmaster>0</tblpacienteidmaster>
    </BoTblPacientes>
  </colecciones>
</DalClassObject> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:54:36.793

您最初的“但不起作用”语句不是很有帮助，因为您并没有真正澄清什么不起作用，但是从我看到的错误中，我猜您的查询没有选择任何东西。

您的 xml 根元素声明了一个命名空间，但您没有在查询中指定该命名空间，因此没有任何内容与您在`Descendants()`方法中提供的字符串匹配。

您需要改为按本地名称查找

```
var q = (from c in xDocument.Descendants()
         where c.Name.LocalName == "BoTblPacientes"
         select c).ToList() 
```

只是为了完整起见，正如 OP 在评论中提到的那样，另一种选择是将命名空间添加到查询中：

```
XNamespace ns = "http://www.asd.com";
var q = (from c in xDocument.Descendants(ns + "colecciones") 
         select c).ToList(); 
```

# python - 方法解析顺序错误

> ID：10675108
> 
> 赞同：1
> 
> 时间：2012-05-20T16:20:07.387
> 
> 标签：python, multiple-inheritance, method-resolution-order

这更像是一个好奇的问题，而不是一个严肃的问题：

我正在玩多重继承并遇到了这个问题：

```
>>> class A(object):
...     def __init__(self): print "A.__init__() called"
...
>>> class B(object, A): pass
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Cannot create consisten method resolution
order (MRO) for bases object, A 
```

我得到一个`TypeError`. 但是，当我颠倒多重继承的顺序时：

```
>>> class B(A, object): pass
>>> b = B()
A.__init__() called 
```

它工作正常。我假设在第一个例子中，`object`before的继承`A`会产生某种名称歧义。有人愿意解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T16:28:43.867

`A`继承自`object`或子类`object`，它不起作用。MRO 保证最左边的碱基在最右边的碱基之前被访问——但它也保证在祖先中，如果 x 是 y 的子类，那么 x 在 y 之前被访问。在这种情况下，不可能同时满足这两个保证

**这是一个类似的问题**

[Python：元类与多重继承结合的问题](https://stackoverflow.com/questions/2203947/python-problem-with-metaclasses-in-conjunction-multiple-inheritance)

# php - 标准表单元素，代码在 MVC 架构中的放置位置

> ID：10675113
> 
> 赞同：2
> 
> 时间：2012-05-20T16:20:36.507
> 
> 标签：php, model-view-controller

我正在创建自己的 CMS。我在 MVC 框架的帮助下做到了这一点。我认为 CMS 应该使用一组标准元素构建。例如，所有表单元素所在的按钮、文本字段和 div 容器等。

例如，当我想创建一个基本页面时，我想在视图中执行以下操作：

```
$cmsForm->beginTab('tab name');
$cmsForm->textfield('name', 'default value');
$cmsForm->textfield('email', '');
$cmsForm->textarea('info', '');
$cmsForm->submit('Save');
$cmsForm->endTab(); 
```

问题是，我不确定将这些方法放在哪里。我显然不能将这些方法放在控制器中。但也许模型是个好地方？另一方面，模型层用于从持久层存储/检索数据，而不是用于返回 HTML...

对于这种事情，在 MVC 架构中什么是好地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:25:24.023

这种类型的代码属于您的视图层。请记住，没有规定说您的视图层只能是模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T16:28:18.483

没有规定你必须做什么。

如果我是你，我会编写自己的类并在框架中实现它，因为以后如果你需要它会更容易重构。此外，您不会意外更改框架的逻辑（一切都可能发生）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T19:59:03.187

> 另一方面，模型层用于从持久层存储/检索数据，而不是用于返回 HTML

实际上模型层是用于业务逻辑的。

* * *

这显然是与表示逻辑相关的代码，因此应该在视图中。我认为，与其编写这种奇怪的生成器脚本，不如编写一个[模板](http://codeangel.org/articles/simple-php-template-engine.html)，然后由哪个视图处理。

此外，您的 API 很糟糕。您甚至没有听说过[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。

如果有这样的东西会更好（但仍然被误导，恕我直言）：

```
$foo = new HTML\Form();

$name = new HTML\Input('name');
$name->setValue('default value');
$name->setRules(array('required'));
$foo->addField( $name );

$email = new HTML\Input('email');
$email->setRules(array('required', 'email'));
$foo->addField( $email )

// other fields added

$template = new Template('/path/to/template.something');
$template->bind('form', $foo);
$output = $template->render(); 
```

# vb.net - 新手 - 日期选择器和字符串 VB

> ID：10675123
> 
> 赞同：0
> 
> 时间：2012-05-20T16:21:32.020
> 
> 标签：vb.net, datepicker, tostring

我知道这是一个非常基本的问题，但我只是从 VB Studio 开始，这完全是书本之外的。

```
 MsgBox("Your birth date was " & DateTimePicker1.Text)
    MsgBox("Day of the year: " & DateTimePicker1.Value.DayOfYear.ToString()) 
```

我希望 ToString 将整数值转换为日期的文本值，但它仍然返回数值。如果我看它实际上是返回数值作为字符串，例如“20”。我试图在网上找到一些信息，但我得到了与我正在使用的相同的代码。

日期选择器和 Win7（64 位）是否存在兼容性问题，或者我缺少一些简单的配置。

对于这个简单的问题，我将不胜感激。

谢谢达米安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:31:43.193

ToString 函数不会将整数转换为文字字符串。它用于将对象或字段转换为适合显示的字符串。因此它将整数 2 转换为字符串“2”。

尝试使用自定义格式以正确格式获取您的日期

[查看此链接以开始](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.customformat.aspx)

# workflow - FDT：如果我正在使用 FDT 构建 Haxe / NME 项目，是否有一个好的工作流程可以遵循

> ID：10675126
> 
> 赞同：1
> 
> 时间：2012-05-20T16:22:06.667
> 
> 标签：workflow, haxe, fdt

自 FDT 5.5 发布以来，FDT 是 Haxe 的出色编辑器，但我仍在学习编译和测试项目的最佳工作流程。

使用 NME / NMML 文件使跨平台编译和测试更容易，有一种嗡嗡声。

我发现当使用 sublime text 2 时，我可以在我的 hxml 配置中执行以下操作。

```
-cmd nme test build.nmml flash 
```

如果我将 nmml 文件添加到我的 FDT 项目中，我想知道是否有一种简单的方法可以让 nmml 命令到那里并启动 swf，因为我通常首先在 Flash 播放器中测试代码。如果这可以在调试配置中以某种方式完成，那就太好了，因为我仍然想使用断点和其他东西，比如控制台跟踪语句。

如果真的没有办法，我想最好的选择是使用 swf 编译正常测试，然后希望转到命令行运行 nmml 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:02:49.203

到目前为止，我发现最好的事情是 FDT 中确实没有“本机”NME 支持。

[https://github.com/matthewswallace/FDT-Haxe-project-templates](https://github.com/matthewswallace/FDT-Haxe-project-templates)

# jquery - Android + Phonegap + XML 数据

> ID：10675127
> 
> 赞同：0
> 
> 时间：2012-05-20T16:22:20.997
> 
> 标签：jquery, android, xml, sqlite, cordova

我正在开发一个 Phonegap Android 应用程序，它是某种目录和产品搜索。它与提供所有数据的服务器 Intranet 同步。

问题是应用程序都已开发，除了同步崩溃。我注意到问题在于 XML 解析。

同步是一个带有按钮的 HTML。单击按钮后，它将启动一个 JS 函数，如下所示：

```
$.ajax({
     url : "file:///android_asset/xml/produtos.xml",
     data : "{}",
     async : false,
     cache : false,
     dataType : "xml",
}).error(function (xhr, ajaxOptions, thrownError){
     alert(xhr.status);
     alert(thrownError);
}).done(function(data) {
     // search all data, download all files from XML URL tag (used this: https://github.com/phonegap/phonegap-plugins/tree/master/Android/Downloader), construct SQLite statements and throw it in an Array for late DB transaction
     if($(data).find("produtos").length > 0 && $(data).find("produtos").eq(0).find("produto").length > 0) {
          $(data).find("produtos").eq(0).find("produto").each(function() {
               i++;
               produtos[i] = "CONSTRUCT SQL STATEMENT WITH XML PARSED DATA LIKE $(this).find('nome').text()";
          }
     }
}); 
```

XML 文件非常大，大约 700kb，大约有 1800 个产品。每个产品内部有大约 10 个直接节点和大约 5 个子节点，内部有其他 10 个节点（细节、图像、相关产品等）。因此，每个产品大约有 80 个节点。我的 XML 中有 1800 * 80 = 144000 个节点。此外，每个产品都有大约 5 个 URL 节点，它们是要下载的文件（我使用的是[https://github.com/phonegap/phonegap-plugins/tree/master/Android/Downloader](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Downloader)插件）。

如果我开始与下载同步，它会因内存泄漏而停止（大约 512mb，不记得正确的消息，但我可以明天发布）。如果我在没有下载的情况下开始同步（只是 XML 解析），则大约需要 30 分钟并且什么都不做（感觉像是在处理，但什么也不做）。我不知道是否有其他选项可以同步此初始数据（其他同步是通过参数传递最后一个同步时间戳来进行的）。你们有什么问题或（可能的）解决方案吗？如果你需要更多信息，问我，我需要你的帮助。

谢谢你们！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:58:35.950

我认为您必须将您的 xml 文件拆分为更易消化的块。144,000 个节点对于移动/JS 应用程序来说是不合理的 :-) 当然问题是，您是否控制 xml 目录的生成？

# mysql - MySQL 多个连接和最大日期

> ID：10675132
> 
> 赞同：1
> 
> 时间：2012-05-20T16:22:56.307
> 
> 标签：mysql, sql

我似乎正在为此苦苦挣扎，我希望有人冷冷地为我提供一些启示。

petevents 将有多个重复的事件，但日期会不同。我只想要每个 petevent 中最新的一个。

```
SELECT name,
       pets.id petid,
       petroutineschedules.id,
       petroutineschedules.eventid,
       timeunit,
       dateunit,
       petevents.startdate
FROM   pets
       LEFT OUTER JOIN petroutineschedules
         ON pets.id = petroutineschedules.petid
       LEFT OUTER JOIN petevents
         ON pets.id = petevents.petid
            AND petevents.eventid = petroutineschedules.eventid
WHERE  ( pets.id = 1025 )
       AND ( pets.deletedat IS NULL )
GROUP  BY petevents.startdate,
          name,
          pets.id,
          petroutineschedules.id,
          petroutineschedules.eventid,
          timeunit,
          dateunit 
```

来自@aleroot 的更新查询

```
SELECT name, pets.id petid,  petroutineschedules.id prsid, petroutineschedules.eventid,    timeunit,  dateunit,  petevents.startdate,  petevents.id peid
FROM
pets

LEFT OUTER JOIN
    petroutineschedules ON pets.id = petroutineschedules.petid

LEFT OUTER JOIN
(
    SELECT * 
    FROM petevents p1 
    WHERE p1.startdate = 
        (
            SELECT MAX(startdate) FROM petevents p2 
            WHERE p1.petid = p2.petid
        ) 
) AS petevents
    ON pets.id = petevents.petid 
        AND petevents.eventid = petroutineschedules.eventid    

WHERE (pets.id = 1025) AND (pets.deletedat IS NULL)
GROUP BY petevents.startdate , name , pets.id , petroutineschedules.id ,petroutineschedules.eventid , timeunit , dateunit
ORDER BY eventid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:30:46.733

如果您可以有重复的事件，您必须获得最新的事件，请尝试以下方式：

```
SELECT 
name,
pets.id petid,
petroutineschedules.id,
petroutineschedules.eventid,
timeunit,
dateunit,
petevents.startdate
FROM
pets
    LEFT OUTER JOIN
petroutineschedules ON pets.id = petroutineschedules.petid
    LEFT OUTER JOIN
(SELECT * FROM petevents p1 WHERE p1.startdate = 
(SELECT MAX(startdate) FROM petevents p2 WHERE p1.petid = p2.petid) ) ON pets.id = petevents.petid and petevents.eventid = petroutineschedules.eventid
WHERE
(pets.id = 1025) AND (pets.deletedat IS NULL)
GROUP BY petevents.startdate , name , pets.id , petroutineschedules.id , petroutineschedules.eventid , timeunit , dateunit 
```

基本上修改后的部分是这个：

```
LEFT OUTER JOIN
    (SELECT * FROM petevents p1 WHERE p1.startdate = 
    (SELECT MAX(startdate) FROM petevents p2 WHERE p1..petid = p2.petid) ) ON pets.id = petevents.petid and petevents.eventid = petroutineschedules.eventid 
```

我加入了一个获取最新事件的子查询......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T16:30:26.227

创建一个视图并左连接其他表。

```
CREATE VIEW  PETEVNT_VW AS SELECT PETID,EVENTID, MAX(STARTDATE) AS MAXSTARTDATE GROUP BY PETID,EVENTID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T16:44:44.387

```
Select 
name,
pets.id petid,
petroutineschedules.id,
petroutineschedules.eventid,
timeunit,
dateunit,
petevents.startdate
from (
SELECT 
name,
pets.id petid,
petroutineschedules.id,
petroutineschedules.eventid,
timeunit,
dateunit,
petevents.startdate,
Rank() over (Partition BY petevents.startdate order by petevents.startdate DESC) as Rank
FROM
pets
    LEFT OUTER JOIN
petroutineschedules ON pets.id = petroutineschedules.petid
    LEFT OUTER JOIN
petevents ON pets.id = petevents.petid and petevents.eventid = petroutineschedules.eventid
WHERE
(pets.id = 1025) AND (pets.deletedat IS NULL)
GROUP BY petevents.startdate , name , pets.id , petroutineschedules.id , petroutineschedules.eventid , timeunit , dateunit
)
where rank = 1 
```

# python - 如何从左到右打印字典的值？

> ID：10675136
> 
> 赞同：0
> 
> 时间：2012-05-20T16:23:17.823
> 
> 标签：python, printing, dictionary

我有一本字典：

```
a = {"w1": "wer", "w2": "qaz", "w3": "edc"} 
```

当我尝试打印它的值时，它们是从右到左打印的：

```
>>> for item in a.values():
    print item,

edc qaz wer 
```

我希望它们从左到右打印：

```
wer qaz edc 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T16:25:22.360

你不能。字典没有您可以使用的任何顺序，因此对于字典文字没有“从左到右”的概念。决定排序，并坚持下去。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T16:49:44.847

您可以使用`collections.OrderedDict`（python 2.7 或更高版本——某处有一个 ActiveState 配方为 python 2.4 或更高版本（我认为）提供此功能）来存储您的项目。当然，您需要以正确的顺序将项目插入字典（`{}`语法将不再有效 - 也不会将 key=value 传递给构造函数，因为正如其他人所提到的，那些依赖于具有没有顺序的概念）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-20T16:36:22.467

假设您希望它们按字母顺序排列，您可以执行以下操作：

```
a = {"w1": "wer", "w2": "qaz", "w3": "edc"}  # your dictionary

keylist = a.keys()   # list of keys, in this case ["w3", "w2", "w1"]
keylist.sort()       # sort alphabetically in place, 
                     #  changing keylist to ["w1", "w2", w3"]

for key in keylist:
    print a[key]     # access dictionary in order of sorted keys 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T16:36:31.867

正如@IgnacioVazquez-Abrams 提到的，这不是字典中的东西，但是您可以通过使用来自[http://pypi.python.org/pypi/odict](http://pypi.python.org/pypi/odict)`order`的有序字典来实现类似的效果`odict`

还可以查看[PEP372](http://www.python.org/dev/peps/pep-0372/)以获取更多讨论和 odict 补丁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T19:05:36.150

字典使用哈希值来关联值。对字典进行排序的唯一方法如下所示：

```
dict = {}
x = [x for x in dict]
# sort here
y = []
for z in x: y.append(dict[z]) 
```

我有一段时间没有在 python 中做过任何真正的工作，所以我可能有点生疏。如果我错了，请纠正我。

# android - 安卓壁纸背景

> ID：10675138
> 
> 赞同：0
> 
> 时间：2012-05-20T16:23:23.837
> 
> 标签：android, background, wallpaper

我目前正在使用以下代码片段来设置我的墙纸背景。我的问题是完整的图像没有出现在壁纸上。它总是从墙纸的底部和侧面视图中被剪裁和丢失对象。我尝试裁剪照片，调整图像大小，还尝试更改分辨率以匹配我的模拟器。这些都不起作用。你们有谁知道如何使用下面的代码显示完整的图像：

```
Bitmap background = BitmapFactory.decodeResource(getResources(), R.drawable.testimg2);
try {
      wpm.setBitmap(background);
}catch(...){
....
} 
```

更新的代码（仍然裁剪图像）：

```
int width = display.getWidth();
 int height = display.getHeight();
 Log.v("WALLPAPER", "width and height are " + width + " " + height);
 Bitmap background = BitmapFactory.decodeResource(getResources(), R.drawable.testimg2);
 Bitmap scaled = Bitmap.createScaledBitmap(background, width, height, true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:31:41.263

The problem is probably the resolution the wallpaper manager desires. It's probably double the width of the screen, and it resizes the wallpaper so it fits the desired parametres. Try this to find out what the desired wallpaper resolution is, using

```
int minH, minW;
WallpaperManager myWallpaperManager  = WallpaperManager.getInstance(getApplicationContext());
minH = myWallpaperManager.getDesiredMinimumHeight();
minW = myWallpaperManager.getDesiredMinimumWidth();
Log.d("TAG", "The desired wallpaper height is: " + minH + "; and the desired width is:" + minW); 
```

After that make a Bitmap.createScaledBitmap with minH and minW. And remember to put this when you create the bitmap:

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inScaled = false; 
```

# android - 对于 2.0 项目，Android 模拟器不会从 eclipse 启动

> ID：10675139
> 
> 赞同：0
> 
> 时间：2012-05-20T16:23:26.810
> 
> 标签：android, eclipse

我的电脑崩溃了，我不得不重新安装我的所有程序。我的旧项目都运行良好。

如果我基于 sdk 2.0 创建项目，模拟器会启动，但我的程序永远不会被加载。在 Eclipse 的控制台上，最后一条消息是 [2012-05-20 11:00:13 - testrun] Waiting for HOME ('android.process.acore') to belaunched... 并且模拟器有一个空白的灰色屏幕和电源顶部的条形图和一条写着 NO NOTIFICATION 的行。

我以为可能有点慢，但是 30 分钟后我放弃了我的旧项目运行良好，基于 sdk 3.0 或更高版本的新项目运行良好。

-泰德

# prototyping - 快速应用程序开发？

> ID：10675140
> 
> 赞同：0
> 
> 时间：2012-05-20T16:23:49.550
> 
> 标签：prototyping

我正在准备星期四的考试，在笔记中，增量开发和原型设计是有区别的。笔记中的 RAD 据说是一种增量方法，但在我之前研究过它的任何时候，我都将它称为更多的原型开发方法。

我只是想知道其他人是否将其视为原型设计方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:15:53.573

即使是原型设计，也应该可以使用增量方法。快速应用程序开发非常适合原型设计。这个想法是尽快在屏幕上创建一些“工作”的东西，而文档比其他开发实践少。

有一个关于此 RAD 的维基百科页面，其中说明了定义和使用。

我发现快速应用程序开发适合开发较小的项目，当您不确定几个因素时，例如语言选择，最终产品的编程语言可能与原型使用的不同。

顺便说一句，您在此处发布的 RAD 标记代表 IBM Rational Application Developer，它是一个集成开发环境，其缩写也是 RAD。

# java - 一个应用程序在被 JVM 终止之前可以生成多少个线程

> ID：10675141
> 
> 赞同：2
> 
> 时间：2012-05-20T16:24:06.823
> 
> 标签：java, multithreading

问：

1）在多线程应用程序中，应用程序可以产生多少线程是有限制的。

2）如果存在这样的限制，JVM 是否终止应用程序以及错误代码是什么。

**编辑**

3）如果应用程序以非常快的速度生成，JVM 是否会将其检测为“粗糙”应用程序

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T18:47:38.800

您应该针对您的设置对其进行测试。我为我的：

```
import static java.lang.Thread.currentThread;
import java.util.concurrent.CountDownLatch;

public class Test {
  static final Thread t = currentThread();
  public static void main(String[] args) throws Exception {
    int i = 0;
    try {
      while (true) {
        final CountDownLatch l = new CountDownLatch(1);
        new Thread() { public void run() { l.countDown(); park(); }}.start();
        l.await();
        i++;
      }
    } finally { System.out.println("Started " + i + " threads."); }
  }
  private static void park() {
    try { t.join(); } catch (InterruptedException e) {
      System.out.println("Unparked");
    }
  }
} 
```

输出：

```
Started 2030 threads.
Exception in thread "main" java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Thread.java:658)
    at test.Test.main(Test.java:10) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T16:32:02.030

JVM 规范没有指定限制。操作系统可能（可能）像往常一样限制每个进程等。每个线程还将分配一个堆栈等，因此可能需要大量内存，因此取决于计算机首先达到的限制..

请注意：过多的线程通常是低效的。您的程序可以/应该以另一种方式更好地扩展。根据您的需要使用线程池（执行器服务）、异步 I/O、fork/join 等。

也可以看看：

[Java中的线程数量是否有硬性限制？](https://stackoverflow.com/questions/5437770/is-there-any-hard-limit-to-a-number-of-threads-in-java)

[Java VM 可以支持多少个线程？](https://stackoverflow.com/questions/763579/how-many-threads-can-a-java-vm-support)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T16:27:50.280

1）。不，没有限制。至少不是那样。当然，你会耗尽内存。

2）。内存不足异常。

3）。你的意思是像[叉子炸弹](http://en.wikipedia.org/wiki/Fork_bomb)？不。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T01:32:56.047

> 一个应用程序在被 JVM 终止之前可以生成多少个线程

这个问题是基于一个错误的前提。当 JVM 无法创建新线程时，它只会向试图创建额外线程的代码抛出异常。该应用程序没有“被 JVM 终止”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T16:26:30.067

归结为你对我感觉的每个单独线程做了多少。您可以使用环境变量为 JVM 提供资源，所以我想有很多。并且错误代码很可能是 OutOfMemoryException，Heap Space 问题。

它还归结为您是制作手动线程还是使用线程池。每次制作手动线程时，都需要一个核心。线程池没有。

# php - PHP将对象数组传递给Javascript

> ID：10675155
> 
> 赞同：-2
> 
> 时间：2012-05-20T16:25:39.970
> 
> 标签：php

> **可能重复：**
> [将 php 数组转换为 javascript 数组](https://stackoverflow.com/questions/5618925/convert-php-array-to-javascript-array)
> [，将 PHP 对象传递给 javascript](https://stackoverflow.com/questions/6351949/passing-php-objects-to-javascript)

问候 Stackoverflow

我遇到了很大的问题，我想将一组对象从 PHP 传递到 Javascript 进行处理。我怎么能这样。提前 Tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:28:28.973

这通常是通过对 PHP 应用程序的 Ajax 调用来完成的，并让 PHP 生成 JSON 并发送数据进行处理（请参阅[json_encode()](http://php.net/manual/en/function.json-encode.php)）。

我还看到 PHP 程序使用直接在脚本中编码的数据生成 JavaScript，但我*不*推荐这种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T16:28:36.323

在视图中回显 javascript 时，您可以使用`echo json_encode($array)`将 PHP 数组转换为 JSON，然后可以将其插入到 javascript 变量中。

# magento - 在 Magento 模块中使用对象接口

> ID：10675157
> 
> 赞同：0
> 
> 时间：2012-05-20T16:26:45.433
> 
> 标签：magento

是否可以或建议在自定义 Magento 模块中使用对象接口，如果可以，这将如何与 Magento 工厂模式等相适应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T00:54:57.497

任何被子类化的类/接口都不会通过 Magento 工厂方法解析；定义将通过自动加载器加载。

除此之外，抽象类、接口和通用超类的规则和指南是相同的。

# c - 头文件中声明的外部变量的链接器出错

> ID：10675158
> 
> 赞同：0
> 
> 时间：2012-05-20T16:26:47.947
> 
> 标签：c, linker-errors

我有一个头文件 ah，它包含在 2 个 .c 文件 ac 和 bc 中

啊

```
#ifndef A_H_INCLUDE
#define A_H_INCLUDE
extern int g;
void chk(int f);
#endif 
```

交流

```
# include <stdio.h>
# include "a.h"

void chk(int f)
{
    if(g==1) printf("\n CORRECT\n");
    else printf("\n INcorrect::%d: \n",f);
} 
```

公元前

```
# include <stdio.h>
# include "a.h"

int main()
{
  int g;
  printf("\n ENTER::");
  scanf("%d",&g);
  chk(56);
  return 0;
} 
```

在编译代码时它给了我错误

```
gcc a.c b.c a.h -o j
/tmp/ccEerIPj.o: In function `chk':
a.c:(.text+0x7): undefined reference to `g'
collect2: ld returned 1 exit status 
```

我已经检查[了头文件中的变量声明，](https://stackoverflow.com/questions/1164167/variable-declaration-in-a-header-file)我想我正在做同样的事情。

任何关于代码问题的建议或指针都将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:28:05.580

添加`int g;`到文件的全局范围`a.c`以提供变量的定义。

（如果您想知道，函数内的*局部*变量*没有*链接，因为它是块范围内的自动变量。它与您的问题无关。）`main()`

# php - Cakephp 关于安全组件和 CSRF 保护

> ID：10675159
> 
> 赞同：2
> 
> 时间：2012-05-20T16:26:58.517
> 
> 标签：php, ajax, cakephp

启用安全组件时似乎存在问题，我无法让我的 AJAX 在启用它的同一控制器上工作！

我收到以下错误：

```
The Request has Been Blackholed 
```

有没有办法确保 AJAX 实际处理启用了安全组件的 POST 请求？

我不想为此创建另一个 AJAX 控制器

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:43:17.333

```
<?php

 class AppController extends Controller {

 public function beforeFilter() {

    $this->Security->blackHoleCallback = 'blackhole';
   }
}

 ?> 
```

# windows-phone-7 - windows phone 7 wrappanel 不工作

> ID：10675160
> 
> 赞同：0
> 
> 时间：2012-05-20T16:27:01.260
> 
> 标签：windows-phone-7, xaml, silverlight-toolkit

我想在 wp7 应用程序中水平包装我的控件。这就是我使用 Silverlight 工具包 Wrap Panel 的原因。它在第一行之前工作正常，但在第一行之后，我的第二个控件进入第二行。

![http://s13.postimage.org/8oxnxxcef/First.png](../Images/9a4e8eeab84ff07ce26c1cd8ff17b4e6.png)

在第一行之后，我的文本框控件低于它在包装面板中的错误，因此它必须直接进入我的列表框项目。

![在此处输入图像描述](../Images/0ef9a09bccb8150c898ed96b75d82970.png)

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,0,0">
            <StackPanel>
                <toolkit:WrapPanel Orientation="Horizontal">
                <ListBox Name="lstDemo" SelectionChanged="lstDemo_SelectionChanged">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel>
                        </toolkit:WrapPanel>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}" Margin="5,0,0,0"></TextBlock>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
                    <TextBox Name="txtHello" Margin="5,0,0,0" FontSize="20" />
            </toolkit:WrapPanel>

            </StackPanel>
        </Grid> 
```

请告诉我如何解决这个问题，所以我的第二个控件总是在列表框项目之后，因为它在包装面板中，并且控件水平包装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:29:46.407

我可能误解了这个问题，但你为什么不能使用 StackPanel？

只需使用 StackPanel 并将其 Orientation 属性设置为 Horizo​​ntal。WrapPanel 不适合您尝试做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:54:57.663

您想在包含控件列表的元素中使用 Horizo​​ntalAlignment="Right"。就像是

```
<Grid HorizontalAlignment="Right">
    <StackPanel>...items...</StackPanel>
</Grid> 
```

可能会成功。但是请注意，我还没有尝试过这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T05:32:47.227

包装面板按预期工作。wrap 面板获取它的孩子并并排显示它们。因此，在您的示例中，外部面板并排显示两个子 [ListBox][TextBox]。因为您将 ListBox.ItemsPanel 作为 WrapPanel，所以它会尝试向左收缩。当您的列表框有足够的项目来换行时，列表框的宽度现在是控件的宽度。所以 WrapPanel 仍然并排显示孩子，但现在第一个孩子 (ListBox) 有更大的宽度。

因此，您的第一个示例看起来像（使用上面的并排示例_ [ListBox width:300][TextBlock] 第二个示例：[ListBox width:480][TextBlock]

我很抱歉地说，没有简单的*方法来做你所要求的。

*我总是说在 xaml 中一切皆有可能。如果您愿意编写自定义控件，则可以完成此操作。

# c# - 使用 C# 制作 SQL Server 插件

> ID：10675165
> 
> 赞同：1
> 
> 时间：2012-05-20T16:27:36.563
> 
> 标签：c#, sql-server-2008, plugins

是否可以在 C# 中为 SQL Server 做一个插件？

我想对数据库中的项目执行字符串匹配算法，而不将对象加载到我的 c# 应用程序中。有谁知道这是否可以在 c# 中完成（可能是 SQL 插件或类似的东西）。

我认为它类似于 MongoDB 中的 Map Reduce。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T16:30:52.483

听起来您正在寻找[SQL Server 的 CLR 集成](http://msdn.microsoft.com/en-us/library/ms131089(SQL.100).aspx)。它允许您直接在 SQL Server 进程中运行 .NET 代码，执行从添加类型和函数到修改表和行的任何操作。例如，您可以编写一个自定义[聚合函数](http://msdn.microsoft.com/en-us/library/ms173454.aspx)来执行与“reduce”非常相似的计算，所有这些都在 MSSQL 中。

# iphone - 删除多个表格视图部分，每个部分带有单独的动画

> ID：10675166
> 
> 赞同：0
> 
> 时间：2012-05-20T16:27:37.563
> 
> 标签：iphone, ios, uitableview

就像 iPhone“设置”应用程序中的“Wi-Fi”一样，我有一个表格视图，其中第一部分中的开关切换是否显示以下部分。

`insertSections: withRowAnimation:`通过使用和`deleteSections: withRowAnimation:`更新后，我已经成功地工作了`tableView: numberOfRowsInSection:`。但是，与“设置”中的“Wi-Fi”不同，所有已删除的部分在消失之前会*一起折叠。*

我想达到与“Wi-Fi”相同的效果，当部分从视图中移除时，它们会*单独折叠。*

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:11:48.323

我能够`deleteSections`按部分进行调用：

```
static int nos = 4;

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return nos;
}

-(IBAction)onFadeTableButton:(id)sender
{
    NSMutableIndexSet *sectionsToDelete = [NSMutableIndexSet indexSet];
    [sectionsToDelete addIndex:3];

    nos = 3;
    [self.tableView deleteSections:sectionsToDelete
                  withRowAnimation:UITableViewRowAnimationTop];

    [sectionsToDelete addIndex:2];
    [sectionsToDelete removeIndex:3];
    nos = 2;
    [self.tableView deleteSections:sectionsToDelete
                  withRowAnimation:UITableViewRowAnimationMiddle];

    [sectionsToDelete addIndex:1];
    [sectionsToDelete removeIndex:2];
    nos = 1;
    [self.tableView deleteSections:sectionsToDelete
                  withRowAnimation:UITableViewRowAnimationMiddle];

    [sectionsToDelete addIndex:0];
    [sectionsToDelete removeIndex:1];
    nos = 0;
    [self.tableView deleteSections:sectionsToDelete
                  withRowAnimation:UITableViewRowAnimationMiddle];

} 
```

代码很丑，因为我很快就使用了一个现有的项目（有 4 个部分的表格视图），但这个想法必须清楚。不要照原样使用它，请让它美丽。

# wpf - 面板调整大小行为

> ID：10675169
> 
> 赞同：2
> 
> 时间：2012-05-20T16:27:50.113
> 
> 标签：wpf, layout, panel

我需要一个面板，其中有 3 个水平排列的项目，一个左对齐，一个右对齐，最后一个**在剩余空间中居中**。我可以得到这个：

```
<DockPanel LastChildFill="True">
    <TextBlock DockPanel.Dock="Left" Text="TextLeft" FontSize="40" Foreground="DarkOrange"/>
    <TextBlock DockPanel.Dock="Right" Text="TextRight" FontSize="40" Foreground="DarkOrange"/>
    <TextBlock Text="TextMiddle" FontSize="40" HorizontalAlignment="Center"/>
</DockPanel> 
```

![在此处输入图像描述](../Images/5cd929d84ac5b4177a07de439a84698c.png)

但是我希望当宽度小于项目宽度的总和时，“TextRight”会被“TextMiddle”吃掉，如下所示：

![在此处输入图像描述](../Images/58c7c53a61f64ebae3e91f6671bf09f5.png)

注意我尝试在 TextMiddle 上添加 MinWidth - 但这**不会**改变行为 - 因为 TextMiddle 是 LastChildFill="True" DockPanel 的最后一个孩子。

下面的 XAML 让我**在调整大小时得到正确**的行为（TextRight 在空间有限时被吃掉）但是当有足够的宽度时，**“TextMiddle”不在可用空间的中心：**

```
<DockPanel LastChildFill="False" >
    <TextBlock DockPanel.Dock="Left" Text="TextLeft" FontSize="40" Foreground="DarkOrange"/>
    <TextBlock DockPanel.Dock="Left" Text="TextMiddle" FontSize="40" HorizontalAlignment="Center" />
    <TextBlock DockPanel.Dock="Right" Text="TextRight" FontSize="40" Foreground="DarkOrange"/>
</DockPanel> 
```

![在此处输入图像描述](../Images/85724646a8d1094e4faf095fee089e12.png) ![在此处输入图像描述](../Images/b821cc6727a0488fa75748656d703127.png)

我确信有一个简单的解决方案 - 也许通过在其中一个项目中使用子面板 - 但我无法确切地了解如何。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:45:43.570

也许就是这样？

```
<Grid>
  <Grid.RowDefinitions>
    <RowDefinition />
  </Grid.RowDefinitions>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="2*" MinWidth="350"/>
    <ColumnDefinition Width="*"/>
  </Grid.ColumnDefinitions>
  <UniformGrid HorizontalAlignment="Stretch" Rows="1">  
       <TextBlock Name="TextLeft" Text="TextLeft" FontSize="40" Foreground="DarkOrange"/>  
       <TextBlock Name="TextMiddle" Text="TextMiddle" FontSize="40" HorizontalAlignment="Center" />  
  </UniformGrid>
  <TextBlock Grid.Column="1" HorizontalAlignment="Right" Text="TextRight" FontSize="40" Foreground="DarkOrange"/>  
</Grid> 
```

# java - 将列表转换为其他类型

> ID：10675172
> 
> 赞同：1
> 
> 时间：2012-05-20T16:28:10.537
> 
> 标签：java

我有这个接口和类：

```
interface I {
    void method1();
}
class A implements I  {
    void method1(){
    ....
    }
} 
```

假设我有这个列表：`List<A> aslist`填充了 A 项，并且我有一个类型的变量，`List<I> vari=null;`
我需要做`vari=aslist`什么？我怎样才能用最少的转换来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T16:32:20.947

你不能。A`List<Car>`不是`List<Vehicle>`. 如果是，您可以执行以下操作：

```
List<Car> cars = new ArrayList<Car>();
List<Vehicle> vehicles = (List<Vehicle>) cars;
cars.add(new Bicycle()); 
```

因此它将完全破坏集合的类型安全性。

您可以执行以下操作：

```
List<? extends Vehicle> vehicles = cars; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T16:32:56.517

不，你不应该施放`List<A>`. 您应该`List<I>`从头开始定义列表。然后，您可以将 的实例添加`A`到此列表中，因为`A`实现`I`：

```
List<I> list = new ArrayList<I>();
list.add(new A()); 
```

其他代码可以在不知道具体实现的情况下将此列表视为`List<I>`及其每个元素。`I`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T16:33:26.710

如果您不愿意更改列表的类型，则必须创建一个浅拷贝：

```
List<I> vari = new ArrayList<I>(aslist); 
```

您还可以使用[`Collections.unmodifiableList`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html?is-external=true#unmodifiableList%28java.util.List%29)：

```
List<I> vari = Collections.<I>unmodifiableList(aslist); 
```

这样，您不需要副本，但结果列表是不可变的（以防止 JB 描述的有问题的用法）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-20T16:35:27.230

```
// If you don't care about some compiler warnings and know about the possible side effects that might arise if you continue to use "aslist" then:

List<A> aslist = ....;
List<I> vari = (List<I>)((List)aslist);

//Otherwise every single element must be copied. Is a one-liner though:
List<A> aslist = ....;
List<I> vari = new ArrayList(aslist); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-20T16:36:57.730

你可以使用这个：

```
java.util.Collections.copy(vari, asist); 
```

# ruby-on-rails-3 - Backbone.js 不发送带有模型名称的请求

> ID：10675173
> 
> 赞同：0
> 
> 时间：2012-05-20T16:28:13.257
> 
> 标签：ruby-on-rails-3, backbone.js

我在rails 3中有一个使用backbone.js的应用程序

当我使用@model.save 时，我收到了这样的 ajax 调用：

```
{"_id"=>"4fb8febe7d552d0a5e000010", 
"email"=>"toto@test.com", 
"invited_by_id"=>nil, 
"invited_by_type"=>nil, 
"role"=>"2", 
"id"=>"4fb8febe7d552d0a5e000010"} 
```

我没有我的模型名称作为我的帖子参数的关键。我期待：

{“用户”=>

```
 {"_id"=>"4fb8febe7d552d0a5e000010", 
    "email"=>"toto@test.com", 
    "invited_by_id"=>nil, 
    "invited_by_type"=>nil, 
    "role"=>"2", 
    "id"=>"4fb8febe7d552d0a5e000010"
    } 
```

}

我怎么解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:43:49.897

这就是[url & urlRoot](http://documentcloud.github.com/backbone/#Model-url)的作用。设置您的模型`urlRoot`并`/users`相应地配置您的服务器端路由可以完成这项工作。

# image - NSUserDefaults 和 .hidden 状态

> ID：10675177
> 
> 赞同：0
> 
> 时间：2012-05-20T16:28:36.533
> 
> 标签：image, nsuserdefaults, hidden, boolean

我无法弄清楚以下内容。我的应用程序在启动时默认隐藏 5 张图像，稍后将在代码中取消隐藏。他们中有一些。我试图在退出应用程序以存储信息时为 NSUserDefaults 设置 BOOL，哪些图片仍然隐藏，因此下次启动应用程序假设检查从上次启动中显示了多少图片并将这些图片的 .hidden 方法设置为 NO on发射。意思是，如果 5 个中的 3 个被显示，我下次需要显示相同的 3 张图片。

这是我所拥有的：

应用程序.h

```
BOOL doneState; 
```

应用程序.m

```
- (void)viewDidLoad
{
[super viewDidLoad];

doneState = TRUE;

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
done.hidden = [defaults boolForKey:@"hiddenDone"];
}

...
..
.

//---- When quitting app, save defaults (one example)

-(IBAction)flipBack:(id)sender{

doneState = TRUE;

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setBool:doneState forKey:@"hiddenDone"];
[defaults synchronize];
NSLog(@"Data Saved");

[self dismissModalViewControllerAnimated:NO];
} 
```

NSLog在退出应用程序时打印“数据已保存”，但再次启动应用程序时，所有图片都被隐藏...

谁能指出我正确的方向，我在这里做错了什么？

谢谢！一种。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:56:13.490

好的，我自己管理。如果有人需要，下面有代码：

控制器.h

```
BOOL doneState; 
```

控制器.m

```
//------ save data
if (img.hidden == NO) {
    doneState = NO;
}
else {
    doneState = YES;
}

[[NSUserDefaults standardUserDefaults] setBool:doneState forKey:@"hiddenDone"];
NSLog (@"Value of BOOL 1  = %@", doneState ? @"YES" : @"NO");

//display on load
BOOL saved = [[NSUserDefaults standardUserDefaults] boolForKey:@"hiddenDone"];
NSLog (@"Value of my saved BOOL = %@", saved ? @"YES" : @"NO");
img.hidden = saved; 
```

希望有帮助！一种。

# c# - 在 Windows Phone 的应用程序中使用任务并行库会引发 ThreadAbortException

> ID：10675180
> 
> 赞同：3
> 
> 时间：2012-05-20T16:28:45.550
> 
> 标签：c#, windows-phone-7, exception, task-parallel-library

我在我的 wp7 应用程序中使用 TPL 进行一些后台操作。

该应用程序启动一个任务：

```
var task =
    Task.Factory.StartNew(
        () =>
        {
            // Some sort of operations
        }); 
```

在此之后，应用程序运行 UI 的更新：

```
task.ContinueWith(
    obj =>
    {
        // UI updates
    },
    new CancelationSource.Token,
    TaskContinuationOptions.None,
    TaskScheduler.FromCurrentSynchronizationContext()); 
```

但有一个问题。如果我按下后退按钮关闭应用程序，并且任务尚未完成，应用程序会抛出带有内部 ThreadAbortException 的 AggregateException。据我所知，这是因为背景线程错误地结束了。

我怎样才能防止这种情况？也许有某种正确的方法来取消任务？

我只有一个想法——抓住这个异常并假装什么都没发生。这样对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:07:24.227

当您点击后退按钮退出应用程序时，框架会等待一小段时间，然后中止所有正在进行的线程。正是中止导致了异常。

如果您想避免异常，您必须处理主页上的 BackKeyPress 事件（或其他检测回压的方法）并取消您的 Task 对象。当然，这意味着您需要跟踪取消令牌。

# r - 在 R data.table 中，如何将变量参数传递给表达式？

> ID：10675182
> 
> 赞同：18
> 
> 时间：2012-05-20T16:29:24.147
> 
> 标签：r, parameter-passing, data.table

我遇到了一个小的 R 问题`data.table`。非常感谢您的帮助。我该怎么做呢：

```
getResult <- function(dt, expr, gby) {
  e <- substitute(expr)
  b <- substitute(gby)
  return(dt[,eval(e),by=b])
}

v1 <- "Sepal.Length"
v2 <- "Species"

dt <- data.table(iris)
rDT <- getResult(dt, sum(v1, na.rm=TRUE), v2) 
```

我收到以下错误：

> sum(v1, na.rm = TRUE) 中的错误：参数的“类型”（字符）无效

现在，两者都`v1`作为`v2`字符变量从其他程序传递，所以我不能这样做`v1<- quote(Sepal.Length)`，这似乎可行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-20T18:44:12.637

弗洛德尔在评论中的答案的替代方案可能是

```
e <- parse(text = paste0("sum(", v1, ", na.rm = TRUE)"))

b <- parse(text = v2)

rDT2 <- dt[, eval(e), by = eval(b)]

#               b    V1
# [1,]     setosa 250.3
# [2,] versicolor 296.8
# [3,]  virginica 329.4 
```

**编辑：**

并将其放入一个函数中，

```
getResult <- function(dt, expr, gby){
  return(dt[, eval(expr), by = eval(gby)])
}

(dtR <- getResult(dt = dt, expr = e, gby = b))
# gives the same result as above 
```

**来自 Matthew 的编辑：** 还有一个微妙的原因，为什么`paste0`and `eval`\`quote`方法也比`get`某些情况下更快。分组速度很快的原因之一是`data.table`检查`j`它使用了哪些列，然后只对那些使用的列进行子集化（FAQ 1.12 和 3.1）。它用来`base::all.vars(j)`做到这一点。在使用`get()`的`j`列中使用时，会隐藏`all.vars`并`data.table`回退到对所有列进行子集化，以防`j`表达式需要它们（很像在 中`.SD`使用符号时`j`，`.SDcols`添加用于求解）。如果无论如何都使用了所有列，那么它没有任何区别，但是如果`DT`说 1e7x100 那么分组`j=sum(V1)``j=sum(get("V1"))`由于这个原因，应该比分组快得多。至少，这是应该发生的，如果没有，那么它可能是一个错误。另一方面，如果许多查询是动态构建并重复的，那么时间`paste0`可能`parse`会进入它。一切都取决于。设置`verbose=TRUE`应该打印出一条消息，说明哪些列已被 检测到`j`，以便可以检查。

# java - JPQL 连接 2 个表：编写 jpql

> ID：10675184
> 
> 赞同：1
> 
> 时间：2012-05-20T16:29:41.043
> 
> 标签：java, sql, hibernate, jpa, jpql

我有 2 个表 第一个表 - 事件 第二个表 - 类别

```
@Entity
public class Event {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long eventId;
private String name;
@ManyToOne
@JoinColumn(name = "category_id")
private EventCategory category;
//getters and setters
}

@Entity
@Table(uniqueConstraints = @UniqueConstraint(columnNames = { "CATEGORY" }))
public class EventCategory {
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long categoryId;
@NotNull
private String category;
@OneToMany(mappedBy = "category", cascade = CascadeType.ALL)
private List<Event> events;
} 
```

现在我想要所有类别具有某种价值的事件。我对 jpa 很陌生。很难为此编写查询。如果你能帮助我，那将是有帮助的。

编辑：我将 categoryId 存储在事件表中。我希望能够按类别名称搜索。类别名称仅保存在类别表中。所以我想我需要加入类别表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T16:39:02.650

使用这样的查询：

```
final String query = "SELECT e FROM Event e WHERE e.category = :category"; 
```

您可以通过多种方式检索记录，但这里有一个：

```
final EventCategory category = ...;
TypedQuery<Event> query = entityManager.createQuery(query, Event.class);
query.setParameter("category", category);
final List<Event> events = query.getResultList(); 
```

* * *

*** 编辑 ***

默认情况下，我上面说明的方法将根据为您的类别对象定义的主键进行搜索。如果您想按其他属性进行搜索，则需要在 JPQL 中指定：

```
final String query = "SELECT e FROM Event e WHERE e.category.name = :categoryName";

final String categoryName = ...;
TypedQuery<Event> query = entityManager.createQuery(query, Event.class);
query.setParameter("categoryName", categoryName);
final List<Event> events = query.getResultList(); 
```

# android - Android 屏幕关闭动画

> ID：10675186
> 
> 赞同：0
> 
> 时间：2012-05-20T16:30:06.313
> 
> 标签：android, android-animation

我想创建一个屏幕关闭动画。

我已经实现了我的 BroadcastReceiver 来接收 SCREEN_OFF 动作，所以任何人都可以向我提供如何实现的想法或链接吗？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:39:10.287

根据[Android 文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_SCREEN_OFF)：

> 公共静态最终字符串**ACTION_SCREEN_OFF**
> 
> 自：*API 级别 1*
> 
> 广播动作：*屏幕关闭后发送。*
> 
> ```
>  This is a protected intent that can only be sent by the system.
> 
> Constant Value: "android.intent.action.SCREEN_OFF" 
> ```

这意味着您不会使用此方法来实现您正在寻找的内容，因为在屏幕关闭之前**它不会做任何事情。**

# javascript - 我们可以在css“背景”中使用“javascript”代码吗？

> ID：10675195
> 
> 赞同：1
> 
> 时间：2012-05-20T16:31:11.697
> 
> 标签：javascript, css, background

> **可能重复：**
> [在 CSS 中使用 Javascript](https://stackoverflow.com/questions/476276/using-javascript-in-css)

是否可以`javascript`在 css 中使用代码`background`？
意思是这样的：

> 样式=“背景：网址（javascript：---javascript代码---）；” 这种语法是否有效？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:34:49.437

你不能在 CSS 中使用 JavaScript。但是，如果您想使用 JavaScript 更改背景图像，则以下行将起作用，

```
document.getElementById("<element ID>").style.backgroundImage = "url(<url of image>)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T16:34:47.327

### 使用 JavaScript 访问样式属性

你不能*在*你的 CSS 中使用 JavaScript，但你可以使用 JavaScript 来*设置*你的 CSS 规则。例如：

```
// Create CSS BackgroundImage Rule
var bg = "url('http://placekitten.com/200/300)";

// Apply Rule
document.getElementById("foo").style.backgroundImage = bg; 
```

### 使 CSS 中的变量和函数成为可能

此外，还有一系列框架和工具允许您在 CSS 中使用函数和变量，例如[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)。

### IE 的旧（自 2008 年以来已死）动态属性

*在*CSS 中最接近 JavaScript的是[动态属性](http://msdn.microsoft.com/en-us/library/ms537634%28v=vs.85%29.aspx)（在 IE5 中引入），它对跨浏览器的支持非常差，并且在现代版本的 IE 中[不再支持。](http://blogs.msdn.com/b/ie/archive/2008/10/16/ending-expressions.aspx)

### 使用 jQuery 快速轻松地修改 CSS

如果您需要使用 JavaScript 对您的样式进行大量修改，总的来说，人们正在转向采用框架来帮助您解决这个问题。例如，一个流行的框架是 jQuery，它允许执行以下操作：

```
$("#foo").css('background-color', 'red'); 
```

以及通过对象的质量分配：

```
var color  = "#ffe", 
    border = "5px solid #ccc";

$("#foo").css({ 'background-color': color, 'border-left': border }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T16:36:20.453

从技术上讲是的，有一个表达式：

```
background: expression(JS code resulting in a vali background image string here) 
```

但是我认为它只适用于 IE，这是非常糟糕的做法，因为它可能必须每秒重新评估代码数百次。

相反，您应该在那里有一个合适的默认值，然后稍后在页面上使用 JavaScript 来更改它。

# python - prevent sphinx from executing inherited doctests

> ID：10675198
> 
> 赞同：5
> 
> 时间：2012-05-20T16:32:02.613
> 
> 标签：python, numpy, python-sphinx, doctest

We've made a library which uses massively (with inheritance) numpy's MaskedArrays. But I want to run sphinx's `make doctest` without testing the inherited methods from numpy, because they make round about 100 failures.

This lookls like this:

```
class _frommethod:
    """
    Adapted from numpy.ma._frommethod
    """

    def __init__(self, func_name):
        self.__name__ = func_name
        self.__doc__ = getattr(MaskedArray, func_name).__doc__
        self.obj = None

    def __get__(self, obj, objtype=None):
        self.obj = obj
        return self

    def __call__(self, a, *args, **params):
        # Get the method from the array (if possible)
        method_name = self.__name__
        method = getattr(a, method_name, None)
        if method is not None:
            return method(*args, **params)
        # Still here ? Then a is not a MaskedArray
        method = getattr(MaskedTimeData, method_name, None)
        if method is not None:
            return method(MaskedTimeData(a), *args, **params)
        # Still here ? OK, let's call the corresponding np function
        method = getattr(np, method_name) 
```

And now that our library also supports numpy's functions, therefore we use:

```
min = _frommethod('min')
max = _frommethod('max')
... 
```

If I disable `self.__doc__ = getattr(MaskedArray, func_name).__doc__`, the failures of `make doctest` disappear. But I'd like to retain the inherited documentation; so that the users can still use `mylibrary.min?` in ipython.

Anyone an idea how I can prevent sphinx from executing this "inherited" doctests?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:06:51.163

**I've use this solution now:**

```
def _dont_doctest_inherited_docstrings(docstring):
    docstring_disabled = ""
    for line in docstring.splitlines():
        docstring_disabled += line + "#doctest: +DISABLE"
    return docstring_disabled

class _frommethod:
    """
    Adapted from numpy.ma._frommethod
    """

    def __init__(self, func_name):
        self.__name__ = func_name
        docstring = getattr(MaskedArray, func_name).__doc__
        self.__doc__ = _dont_doctest_inherited_docstrings(docstring)
        self.obj = None 
```

Maybe someone has a smarter way!

# sql - SQL Server 连接错误：实例失败

> ID：10675202
> 
> 赞同：7
> 
> 时间：2012-05-20T16:32:20.027
> 
> 标签：sql

我正在尝试将 excel 文件中的数据插入到 sql 数据库的列中。

```
protected void Button1_Click(object sender, EventArgs e)
    {
        using (OleDbConnection con = new OleDbConnection(ConfigurationManager.ConnectionStrings["ExcelCon"].ConnectionString))
        {
            con.Open();
            OleDbCommand com = new OleDbCommand("Select * from [Sheet1$]", con);
            OleDbDataReader dr = com.ExecuteReader();
            using (SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["Sql"].ConnectionString))
            {
                sqlcon.Open();
                using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlcon))
                {
                    bulkCopy.ColumnMappings.Add("ExcelColumnHeaderName", "SqlColumnName");
                    bulkCopy.DestinationTableName = "tableName";
                    bulkCopy.WriteToServer(dr);
                }
            }
            dr.Close();
            dr.Dispose();
        }
        Response.Write("Upload Successfull!");
    } 
```

网络配置：

```
 <connectionStrings>
  <add name="ExcelCon" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\John\\Desktop\\ExcelFile.xlsx;Extended Properties=Excel 12.0"/>
  <add name="Sql" connectionString="Data Source=.\\SQLEXPRESS;AttachDbFilename='c:\\users\\John\\documents\\visual studio 2010\\Projects\\WebApplication3\\WebApplication3\\App_Data\\Database1.mdf';Integrated Security=True;User Instance=True;"/>
  <add name="ConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database1.mdf;Integrated Security=True;User Instance=True"
        providerName="System.Data.SqlClient" />
</connectionStrings> 
```

问题是我收到了这个错误，我不知道为什么：

```
Exception Details: System.InvalidOperationException: Instance failure.
here:sqlcon.Open(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-22T19:58:13.767

从连接字符串中删除双斜杠。

# c# - 在c#中生成不重复的随机数

> ID：10675211
> 
> 赞同：0
> 
> 时间：2012-05-20T16:33:13.857
> 
> 标签：c#, random, numbers

如何在 C# 中生成不重复的随机数。我有一个数组，我想用 0 到 9 的随机数填充每个房间。每个房间应该有不同的数字。我用这个：

```
for (int i = 0; i < 20; i++)
{
    Random rnd = new Random();
    int temp = 0;
    temp = rnd.Next(0, 9);
    page[i] = temp;
} 
```

但我在每个房间的阵列中得到相同的数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T16:34:47.070

有了这么小的数字列表可供选择，您可以简单地生成一个包含所有数字的列表，然后将它们[随机](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)排列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T23:52:02.400

您的问题是您在每个循环中都创建了 Random 对象。Random 对象只能创建一次。试试这个：

```
Random rnd = new Random(); // <-- This line goes out of the loop        
for (int i = 0; i < 20; i++) {
    int temp = 0;
    temp = rnd.Next(0, 9);
    page[i] = temp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T17:33:02.800

这将创建一个从 1 到 rangeEx 的唯一范围。接下来的两行创建一个随机数生成器，并使用随机数对 IEnumerable 范围进行排序。然后用 ToArray 调用 this 并返回！

```
 private int[] RandomNumber(int rangeEx)
    {
        var orderedList = Enumerable.Range(1, range);
        var rng = new Random();
        return orderedList.OrderBy(c => rng.Next()).ToArray();
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-15T16:09:59.507

```
 public Form1()
    {
        InitializeComponent();
    }
    int A, B;
    string Output;
    private void Form1_Load(object sender, EventArgs e)
    {
        for (int i = 0; i < 20; i++)
        {
            while (A == B)
            {
                Random r = new Random();
                A = r.Next(1, 6);
            }
            Output = Output + A;
            B = A;
        }
        textBox1.Text = Output;
    } 
```

Output: 24354132435213245415 (not repeating)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-23T19:18:47.593

```
 ArrayList page=new ArrayList();
        int random_index;            
        random rnd = new Random();

        for (int i = 0; i < 20; i++)
        {
            do                            
            {
                random_index = rnd.Next(10);
                if (!(page.Contains(random_index)))
                                break;
            } while (page.Contains(random_index));
            page.Add(random_index);
        } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-01-14T16:22:04.427

```
using System;

using System.Collections.Generic;

using System.Linq;

namespace nonRepeatableRndm
{

    class Program
    {
        //variable with the Values
        List<string> RandomVal = new List<string>();
        //variable to compare the randomly genarated Values
        List<string> CompaerbyString = new List<string>();
        //Variable that gets Value from  the list Values
        string DisplayVal;
        //instantiates the Random Class
        Random r;
        //this Method gives Value to the list and initializes th the Random Class
        void setVal()
        {
            //Adding to the list
            RandomVal.Add("A");
            RandomVal.Add("b");
            RandomVal.Add("c");
            RandomVal.Add("d");
            RandomVal.Add("e");
            RandomVal.Add("f");
            RandomVal.Add("g");
            RandomVal.Add("h");
            RandomVal.Add("i");
            RandomVal.Add("j");
            RandomVal.Add("k");
            RandomVal.Add("l");
            RandomVal.Add("m");
            RandomVal.Add("n");
            RandomVal.Add("o");
            RandomVal.Add("p");
            RandomVal.Add("q");
            RandomVal.Add("r");
            RandomVal.Add("s");
            RandomVal.Add("t");
            RandomVal.Add("u");
            RandomVal.Add("v");
            RandomVal.Add("w");
            RandomVal.Add("x");
            RandomVal.Add("y");
            RandomVal.Add("z");

            //Instantiating the Random Method
            r = new Random();
        }
        //This method Gives Out the Random Values
        public void DisplayRand()
        {

           //Setting Random Index 
           int getIndex =  r.Next(0, RandomVal.Count - 1);
            //Now we are trying to pass a random value to the String 
            DisplayVal = RandomVal.ElementAt<string>(getIndex);
            //we are testing to see if String in Display is contained in the List that will used Compare
            if (!CompaerbyString.Contains(DisplayVal))
                Console.WriteLine(DisplayVal.ToUpper());
            else
            {
                try
                {
                    this.DisplayRand();
                }
                catch(Exception e)
                {
                    Console.WriteLine("You have Reached the End of the list...");
                    Environment.Exit(0);
                }
            }
            //Adding Corrent DisplayVal's Value to the List for Comparison
            CompaerbyString.Add(DisplayVal);
        }
        //This is Simple method that Calls the Display
        void Call()
        {
            //This For loop is to Ensure we have no Stack Overflow
            for ( int i = 0; i < RandomVal.Count-1;i++)
            {
                this.DisplayRand();

            }
        }
        static void Main(string[] args)
        {
            Console.WriteLine("Random Values With Out Repeatating Any Value");
            //Simple Instantiation
            Program dis = new Program();
            //Simple Call
            dis.setVal();
            //Simple Call
            dis.Call() ;
            Console.ReadLine();   
        }
    }
} 
```

[![这是输出](../Images/667b14c2a691019129136de498836937.png)](https://i.stack.imgur.com/FaFTU.png)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-12-01T08:07:49.470

100% 正确

```
 public int[] UniqeRandomArray(int size , int Min , int Max ) {

        int [] UniqueArray = new int[size];
        Random rnd = new Random();
        int Random;

        for (int i = 0 ; i < size ; i++) {

            Random = rnd.Next(Min, Max);

            for (int j = i; j >= 0 ; j--) {

                if (UniqueArray[j] == Random)
                { Random = rnd.Next(Min, Max); j = i; }

            }

            UniqueArray[i] = Random;

        }

        return UniqueArray;

    } 
```

// 注意是唯一的 [Max - Min > size] 不等于

# php - 在我的查询中捕获日期问题

> ID：10675212
> 
> 赞同：0
> 
> 时间：2012-05-20T16:33:14.587
> 
> 标签：php, mysql, syntax

我有一个带有查询的函数，需要将当前日期保存到 MySQL 数据库中，但是，当我在查询中放置“CURDATE()”时，表单中输入的日期都不会保存到数据库中。我很确定我的语法不太正确。

这是用于将所有内容保存到数据库的查询功能

```
 function insert_campaign($userID, $campaign_name,$date_created) {
    $campaign_name = $this->real_escape_string($campaign_name);      
       $this->query("INSERT INTO campaigns (userid, campaign_name,date_created)" .
            " VALUES (" . $userID . ", '" . $campaign_name . "', CURDATE()");
} 
```

任何想法这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:39:54.663

更改此行

```
 $this->query("INSERT INTO campaigns (userid, campaign_name,date_created)" .
            " VALUES (" . $userID . ", '" . $campaign_name . "', CURDATE()"); 
```

到

```
 $this->query("INSERT INTO campaigns (userid, campaign_name,date_created)" .
            " VALUES (" . $userID . ", '" . $campaign_name . "', CURDATE())"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:51:11.513

您在 . 之后缺少最后的右括号`CURDATE()`。

您可以通过检查`mysql_query()`. 它`false`在发生错误时返回。

发生这种情况时，您可以使用`mysql_error()`来确定发生错误的原因。

最后，尝试使用 PDO 或 mysqli；mysql_xx 将被弃用，所以现在是切换的好时机:)

# javascript - 将 XML 文件加载到 JavaScript 数组中

> ID：10675216
> 
> 赞同：7
> 
> 时间：2012-05-20T16:33:31.093
> 
> 标签：javascript, xml, arrays

我知道这已经被问了大约一百万次，但是我发现的所有脚本要么是为提出问题的人定制的，要么根本不起作用！基本上，我仅限于使用普通的 JavaScript 而不是像 JQuery 这样的库作为 uni 分配，但是希望存储以供将来使用，因为有时 JQuery 并不总是一种选择。

无论如何切入正题。我有一个名为“profiles.xml”的 XML 文件，其中包含一个相当简单的结构：

```
 <?xml version="1.0" encoding="iso-8859-1"?>
 <profiles>
 <profile id="1">
     <pic>images/profiles/person1/x.jpg</pic>
     <name>Joe Bloggs</name>
     <nickname>J-Bloggs</nickname>
     <age>21</age>
     <email>j.blogs@me.com</email>
     <role>Web Site Manager</role>
     <likes>
           <like1>Food</like1>
           <like2>Drink</like2>
           <like3>Computing</like3>
           <like4>Music</like4>
     </likes>
     <dislikes>
           <dislike1>Rude People</dislike1>
           <dislike2>Rude People</dislike2>
     </dislikes>
     <favwebsite>http://www.facebook.com</favwebsite>
 </profile>
</profiles> 
```

所以基本上我想在每次需要访问时将每个配置文件加载到一个单独的新数组中，但除此之外还想根据“id”属性值来做。这可能吗？如果有怎么办？我已经没有时间学习 XPATH 等东西了……这需要使用 JavaScript 来完成，仅此一项就不允许使用服务器端脚本。

同样如前所述，某些脚本根本不起作用，因为当我尝试将其放入函数时，它会说某些变量即使已设置也未定义，因此需要脚本从 XML 传递所有信息将文件放入新的 Array 中，并使其在整个 HTML 文档中易于访问。

请有人帮忙，在过去的 4-5 周里，我一直在尝试自己解决这个问题，并且在网上搜索了许多不眠之夜，寻找可能给我线索的脚本！

非常感谢任何帮助！谢谢 ：-）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T17:00:24.543

除非我不完全理解您的问题，否则下面的 JSFiddle/代码应该会有所帮助。我使用了一个二维数组。

```
var profiles = xml.getElementsByTagName("profile");
var arr = [];
for (var key in profiles){
    arr.push([]);
    var nodes = profiles[key].childNodes;
    for (var ele in nodes){  
        if(nodes[ele]){
          arr[key].push(nodes[ele]);
        }
    }
}
console.log(arr); 
```

# c# - 如何将光标移动到 ScintillaNet 控件中特定行的特定位置？

> ID：10675217
> 
> 赞同：0
> 
> 时间：2012-05-20T16:33:49.447
> 
> 标签：c#, .net, scintilla

我需要通过代码将光标移动到某一行的所需位置，任何可以使其工作的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:58:33.697

这是你想要的？

> **SCI_GOTOLINE(int line)**这将删除任何选择并将插入符号设置在行号行的开头并滚动视图（如果需要）使其可见。锚点位置设置为与当前位置相同。如果行在文档中的行之外（第一行为 0），则行集是第一行或最后一行。

取自[http://www.scintilla.org/ScintillaDoc.html](http://www.scintilla.org/ScintillaDoc.html)

# c++ - 未定义的符号，在 iOS 中使用 C++

> ID：10675223
> 
> 赞同：0
> 
> 时间：2012-05-20T16:35:07.170
> 
> 标签：c++, ios

我收到一个我无法解决的错误。

```
Undefined symbols for architecture i386:  
"ObjSurface::ObjSurface(std::string const&)", referenced from:
  -[RootViewController testObj] in RootViewController.o ld: 
       symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

对象表面.hpp

```
#include "Interfaces.hpp"

class ObjSurface : public ISurface {
public:
    ObjSurface(const string &name);
    int GetVertexCount() const;
    int GetLineIndexCount() const { return 0; }
    int GetTriangleIndexCount() const;
    void GenerateVertices(vector<float>& vertices, unsigned char flags) const;
    void GenerateLineIndices(vector<unsigned short>& indices) const {}
    void GenerateTriangleIndices(vector<unsigned short>& indices) const;
private:
    string m_name;
    vector<ivec3> m_faces;
    mutable size_t m_faceCount;
    mutable size_t m_vertexCount;
    static const int MaxLineSize = 128;
}; 
```

对象表面.cpp

```
ObjSurface::ObjSurface(const string &name) :
    m_name(name),
    m_faceCount(0),
    m_vertexCount(0)
{
    m_faces.resize(GetTriangleIndexCount() / 3);
    ifstream objFile(m_name.c_str());
    vector<ivec3>::iterator face = m_faces.begin();
    while (objFile) {
        char c = objFile.get();
        if (c == 'f') {
            assert(face != m_faces.end() && "parse error");
            objFile >> face->x >> face->y >> face->z;
            *face++ -= ivec3(1, 1, 1);
        }
        objFile.ignore(MaxLineSize, '\n');
    }
    assert(face == m_faces.end() && "parse error");
} 
```

ViewController.mm 中的用法：

```
#include "ObjSurface.hpp"
    surfaces[0] = new ObjSurface(path + "/Ninja.obj"); 
```

我的构建设置：

![在此处输入图像描述](../Images/6da3d64878c3458c376b26a2c84318c3.png)

我是否必须在我的 iOS 类（std）中定义某种命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:54:14.133

ObjSurface.cpp 是否实际上正在编译和链接？即它在“编译源”构建阶段？听起来好像不是。

# php - PHP Red Bean ORM Performance issue

> ID：10675227
> 
> 赞同：8
> 
> 时间：2012-05-20T16:35:40.913
> 
> 标签：php, performance, orm, redbean

I am making a *WebService* in php which my website will use to query for information with *Ajax* calls.

At first i just did it the standard way with the built in php mysql lib, and wrote all the query's manually and made the whole data model in *MySQL Workbench* and so forth. This was VERY time consuming and if i had to change the data model afterwards everything would start to become very complicated so i decided to look for a **PHP ORM**, and i found **RedBean** which seems to me to be pure magic and joy.

Except i struggle very much with performance issues. My site is a site for users to create their own lists of tv series. i query an external source for a serie and insert it into my database if its not already there otherwise i get it from my own database ofc.

the xml i get back from this external source lists the serie, seasons, episodes and so on and i store it all like this.

```
function InsertSerie($serie) {
    $serieBean = $this->CreateSerieBean($serie->Series);
    $genreBeans = $this->CreateGenreBeans($serie->Series->Genre);
    $actorBeans = $this->CreateActorBeans($serie->Series->Actors);
    $episodeBeans = array();
    foreach ($serie->Episode as $episode) {
        $episodeBean = $this->CreateEpisodeBean($episode);
        $seasonBean = $this->CreateSeasonBean($episode);
        $writerBeans = $this->CreateWriterBeans($episode->Writer);
        $guestBeans = $this->CreateActorBeans($episode->GuestStars);
        $directorBeans = $this->CreateDirectorBeans($episode->Director);
        R::associate($episodeBean, $seasonBean);
        foreach ($writerBeans as $bean) {
            R::associate($episodeBean, $bean);
        }
        foreach ($guestBeans as $bean) {
            R::associate($episodeBean, $bean);
        }
        foreach ($directorBeans as $bean) {
            R::associate($episodeBean, $bean);
        }
        $episodeBeans[] = $episodeBean;
    }
    foreach ($genreBeans as $bean) {
        R::associate($serieBean, $bean);
    }
    foreach ($actorBeans as $bean) {
        R::associate($serieBean, $bean);
    }
    foreach ($episodeBeans as $bean) {
        R::associate($serieBean, $bean);
    }
}

function CreateGenreBeans($genres) {
    if(empty($genres)) { return; }
    $genre = explode("|", $genres);
$genreBeans = array();
foreach ($genre as $g) {
    if($g != '') {
            $genreBeans[] = $this->CreateGenreBean($g);
        }
    }
    return $genreBeans;
}

function CreateGenreBean($genre) {
    $bean = R::dispense('genre');
    $bean->name = (string)$genre;
    return $bean;
}

function CreateDirectorBeans($directors) {
    if(empty($directors)) { return; }
    $director = explode("|", $directors);
$directorBeans = array();
foreach ($director as $d) {
    if($d != '') {
            $directorBeans[] = $this->CreateDirectorBean($d);
        }
    }
    return $directorBeans;
}

function CreateDirectorBean($director) {
    $bean = R::dispense('director');
    $bean->name = (string)$director;
    return $bean;
}

function CreateActorBeans($actors) {
    if(empty($actors)) { return; }
    $actor = explode("|", $actors);
$actorBeans = array();
foreach ($actor as $a) {
    if($a != '') {
            $actorBeans[] = $this->CreateActorBean($a);
        }
    }
    return $actorBeans;
}

function CreateActorBean($actor) {
    $bean = R::dispense('actor');
    $bean->name = (string)$actor;
    return $bean;
}

function CreateWriterBeans($writers) {
    if(empty($writers)) { return; }
    $writer = explode("|", $writers);
$writerBeans = array();
foreach ($writer as $w) {
    if($w != '') {
            $writerBeans[] = $this->CreateWriterBean($w);
        }
    }
    return $writerBeans;
}

function CreateWriterBean($writer) {
    $bean = R::dispense('writer');
    $bean->name = (string)$writer;
    return $bean;
}

function CreateSerieBean($serie) {  
    $bean = R::dispense('serie');
    $bean->serie_id = (string)$serie->id;
    $bean->airs_day_of_week = (string)$serie->Airs_DayOfWeek;
    $bean->airs_time = (string)$serie->Airs_Time;
    $bean->content_rating = (string)$serie->ContentRating;
    $bean->first_aired = (string)$serie->FirstAired;
    $bean->imdb_id = (string)$serie->IMDB_ID;
    $bean->language = (string)$serie->Language;
    $bean->network = (string)$serie->Network;
    $bean->overview = (string)$serie->Overview;
    $bean->rating = (string)$serie->Rating;
    $bean->rating_count = (string)$serie->RatingCount;
    $bean->run_time = (string)$serie->Runtime;
    $bean->serie_name = (string)$serie->SeriesName;
    $bean->status = (string)$serie->Status;
    $bean->last_updated = (string)$serie->lastupdated;
    $bean->thumbnail = (string)$serie->thumbnail;
    return $bean;
}

function CreateSeasonBean($episode) {
    $bean = R::dispense('season');
    $bean->season_id = (string)$episode->seasonid;
    $bean->season_number = (string)$episode->SeasonNumber;
    return $bean;
}

function CreateEpisodeBean($episode) {
    $bean = R::dispense('episode');
    $bean->episode_id = (string)$episode->id;
    $bean->episode_name = (string)$episode->EpisodeName;
    $bean->episode_number = (string)$episode->EpisodeNumber;
    $bean->first_aired = (string)$episode->FirstAired;
    $bean->imdb_id = (string)$episode->IMDB_ID;
    $bean->language = (string)$episode->Language;
    $bean->overview = (string)$episode->Overview;
    $bean->rating = (string)$episode->Rating;
    $bean->rating_count = (string)$episode->RatingCount;
    $bean->last_updated = (string)$episode->lastupdated;
    return $bean;
} 
```

The problem is it takes around 5 minutes to insert one serie and it inserts duplicates as well, doing `R::freeze();` doesn't help performance either.

**Q: How can i fix this issue, what can i do to make redbean perform better, what can i do with my own code to make it work better, or should i simply use a different solution/approach framework etc?**

Tried shared lists like suggested but with the same result.

```
function InsertSerie($serie) {
    $serieBean = $this->CreateSerieBean($serie->Series);
    ...
    foreach ($serie->Episode as $episode) {
        $episodeBean = $this->CreateEpisodeBean($serieBean ,$episode);
        ...
        $this->CreateDirectorBeans($serieBean, $episode->Director);
        $serieBean->sharedEpisode[] = $episodeBean;
    }
    R::store($serieBean);
}

function CreateDirectorBeans($bean, $directors) {
    if(empty($directors)) { return; }
    $director = explode("|", $directors);
    foreach ($director as $d) {
        if($d != '') {
            $bean->sharedDirector[] = $this->CreateDirectorBean($d);
        }
    }
}

function CreateDirectorBean($director) {
    $bean = R::dispense('director');
    $bean->name = (string)$director;
    return $bean;
}
    .... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T22:15:12.543

I finally found out how to lower the execution time from 5 minutes to about 11sec, still takes allot of time but considering the amount of data and work it has to do i think its good for that hardware.

I added these code lines

```
R::Begin();
R::associate($bean1, $bean2);
...
R::commit(); 
```

Now it gathers all the work and performs it in one big transaction like the unit of work pattern. Also to prevent inserting duplicates i switched to using

```
$bean = R::findOrDispense($type, $sql, $values); 
```

Then i just return the bean if it already exists if not i create a new one and return it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:58:00.217

Have you tried using shared lists instead of looping through relations?

```
$serieBean->sharedActor[] = $actorBeans;
$serieBean->sharedEpisode[] = $episodeBeans; 
```

[http://www.redbeanphp.com/manual/shared_lists](http://www.redbeanphp.com/manual/shared_lists)

# .net - Exchange Web 服务 API - Contact.ItemProperties 等效项

> ID：10675233
> 
> 赞同：1
> 
> 时间：2012-05-20T16:36:45.943
> 
> 标签：.net, vb.net, vb6, exchange-server, exchangewebservices

我有一个旧的 VB6 应用程序，它使用 MAPI 创建 Outlook 联系人，我正在将其转换为 VB .NET 2010。

VB6 应用程序允许我使用属性按名称访问属性`ItemProperties`，例如：

```
objContact.ItemProperties(strPropertyName) = "Accountant" 
```

我可以`ItemProperties`在[扩展属性列表](http://msdn.microsoft.com/en-us/library/gg274394%28v=exchg.80%29)中看到，但我不知道如何访问它。其他[帖子](https://stackoverflow.com/questions/10385948/how-to-read-extended-properties-from-outlook-contacts-using-ews)显示了如何访问现有联系人的扩展属性，但我正在尝试创建新的联系人。

是否可以像在 MAPI 中那样动态设置属性？如果不是，我最终会得到一个非常大的 CASE 语句，即

```
Select Case strPropertyName
 Case "JobTitle"
  ...
 Case "Title"
  ...
End Select 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:29:39.113

这是一个[`Contact`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.contact%28v=exchg.80%29)在 EWS 中创建并使用[`ExtendedProperties`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.item.extendedproperties%28v=exchg.80%29). 您需要使用该[`SetExtendedProperty`](http://msdn.microsoft.com/en-us/library/ee693716%28v=exchg.80%29)方法，传入适当的[`ExtendedPropertyDefinition`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.extendedpropertydefinition%28v=exchg.80%29).

```
var titleDef = new ExtendedPropertyDefinition(0x3A45, MapiPropertyType.String);

Contact contact = new Contact(service);
contact.GivenName = "George";
contact.Surname = "Washington";
contact.FileAsMapping = FileAsMapping.SurnameSpaceGivenName;
contact.CompanyName = "U.S.A";
contact.PhoneNumbers[PhoneNumberKey.BusinessPhone] = "555-234-1231";
contact.EmailAddresses[EmailAddressKey.EmailAddress1] = "asdfas@dafasd.com";
contact.EmailAddresses[EmailAddressKey.EmailAddress1].Name = "G. Washington";
contact.SetExtendedProperty(titleDef, "President");
contact.Save();
var contactID = contact.Id; 
```

# c# - 想要在 wp7 的网络浏览器应用程序中隐藏文本框

> ID：10675239
> 
> 赞同：0
> 
> 时间：2012-05-20T16:37:38.080
> 
> 标签：c#, windows-phone-7

我使用 Web 浏览器控件为 Windows Phone 7 创建了一个 Web 浏览器应用程序。我只想在用户触摸 Web 浏览器控件（名为**“browsers”** ）时隐藏名为**“UrlTextBox”的文本框（用于****输入 URL** ） ，如果用户再次**点击**Web 浏览器控件，则文本框应该是可见的。谁能帮我这个？？？提前感谢您的辛勤工作！！！

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:48:21.847

您可能无法按照您想要的方式执行此操作。WebBrowser 控件不通过手势，因为它本身需要它们，因此点击 Web 浏览器不会做任何事情。

您可能想要研究的是使用`ApplicationBar`或创建“类似”的东西`ApplicationBar`来处理点击事件。那，结合在文本框`Visibility`之间切换`Visible`，`Collapsed`应该可以得到你需要的东西。******

# c# - 从 EventTrigger 调用方法

> ID：10675240
> 
> 赞同：0
> 
> 时间：2012-05-20T16:37:57.127
> 
> 标签：c#, wpf, xaml, eventtrigger

我有以下 XAML 代码（用于测试，所以它不是一个“好”的代码）：

```
<Style TargetType="{x:Type MenuItem}">
    <Style.Triggers>
        <EventTrigger RoutedEvent="Click">
            <EventTrigger.Actions>
                <BeginStoryboard>                                    
                    <Storyboard Storyboard.TargetProperty="Width" >
                        <DoubleAnimation From="70" To="100"></DoubleAnimation>
                    </Storyboard>
                </BeginStoryboard>
           </EventTrigger.Actions>
       </EventTrigger>                        
    </Style.Triggers>
</Style> 
```

现在，当此触发器运行时，我想在我的 C#-Project 中调用一个方法。刚刚添加了 DoubleAnimation-Thing 以查看触发器是否在单击时被激活。如何调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:41:31.427

本机触发器不支持这一点，如果您使用[Blend 中的`Interactivity`](http://www.microsoft.com/download/en/details.aspx?id=10801)触发器，则`CallMethodAction`可以使用。

# php - 使用简单 PHP 代理的跨域 getJson 请求

> ID：10675241
> 
> 赞同：2
> 
> 时间：2012-05-20T16:38:01.083
> 
> 标签：php, json, proxy, jsonp, cross-domain-proxy

您好我正在尝试从仅返回 JSON 而不是 JSONP 的 api 获取数据。每次我尝试将数据连接为 JSONP 时它都不起作用，因为我不期待 JSON。所以，我想我必须使用 PHP 代理来解决跨域问题，这样我才能解释 JSON 请求。[简单的 PHP 代理][1] 是我正在尝试使用的代理，但我正在努力让最基本的功能正常工作。当我在示例页面上将要查询的 url 输入到他的示例中时，它可以工作。当我这样做时，它不会，有时我会收到“缺少命令”（API 告诉我争论太多或太少的方式）或 httpcode/jsoncode 404。

Expensify 是我正在查询的 API。我首先尝试 Authenticate 命令。如果您在浏览器中键入此 URL，您会得到我想要的结果： [https ://api.expensify.com?command=Authenticate&partnerName=applicant&partnerPassword=d7c3119c6cdab02d68d9&partnerUserID=expensifytest%40mailinator.com&partnerUserSecret=hire_me](https://api.expensify.com?command=Authenticate&partnerName=applicant&partnerPassword=d7c3119c6cdab02d68d9&partnerUserID=expensifytest%40mailinator.com&partnerUserSecret=hire_me)

使用简单 PHP 代理我的请求 URL 原来是： [http ://people.rit.edu/~cjs6948/exp/ba-simple-proxy.php?url=https://api.expensify.com?command= Authenticate&partnerName=applicant&partnerPassword=d7c3119c6cdab02d68d9&partnerUserID=expensifytest%40mailinator.com&partnerUserSecret=hire_me](http://people.rit.edu/~cjs6948/exp/ba-simple-proxy.php?url=https://api.expensify.com?command=Authenticate&partnerName=applicant&partnerPassword=d7c3119c6cdab02d68d9&partnerUserID=expensifytest%40mailinator.com&partnerUserSecret=hire_me)

这是我非常简单的 jQuery 代码：

```
var proxy = 'ba-simple-proxy.php';
url = proxy + '?' + "url=" + "https://api.expensify.com?    command=Authenticate&partnerName=applicant&partnerPassword=d7c3119c6cdab02d68d9&partnerUserID=expensifytest%40mailinator.com&partnerUserSecret=hire_me";
$.getJSON( url, function(data){}); 
```

“ba-simple-proxy.php”可以在 [这里][3] 找到。有没有人有尝试通过代理连接到跨域 API 的经验？甚至可能是这个？有更好的想法吗？任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:03:59.270

您需要对 URL 进行编码，因为参数“partnerName”将传递给您的 ba-simple-proxy.php 脚本，而不是 api.expensify.com 网站。我相信你正在寻找的功能是：encodeURI(uri)

# visual-studio - Visual Studio 11 (BETA) 上的解决方案加载错误

> ID：10675242
> 
> 赞同：0
> 
> 时间：2012-05-20T16:38:11.430
> 
> 标签：visual-studio, cmake, projects-and-solutions, visual-studio-2012

我知道[Visual Studio 11](http://www.microsoft.com/visualstudio/11/en-us)仍处于测试阶段，但我想在报告此潜在错误之前提出一个问题。

当我将一个巨大的解决方案（近 21 个项目及更多）加载到 Visual Studio 11 中时，每个项目都会出现此错误：

```
The object of type Microsoft.VisualStudio.Project.ConfiguredProjectCache`1[Microsoft.VisualStudio.Project.Immutables.ImmutableHashMap`2[System.String,System.Threading.Tasks.Task`1[Microsoft.VisualStudio.Project.PropertyPages.PropertyPagesCatalog]]]"
could not be converted into "Microsoft.VisualStudio.Project.ConfiguredProjectCache`1[Microsoft.VisualStudio.Project.Immutables.ImmutableHashMap`2[System.String,Microsoft.VisualStudio.Project.PropertyPages.PropertyPagesCatalog]]". 
```

一条重要信息是这个解决方案是用[CMake](http://www.cmake.org/) for [Visual Studio 2010](http://www.microsoft.com/visualstudio/en-us/products/2010-editions)生成的，也许这是问题的原因？

有谁知道这个问题的问题或解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:11:12.853

如果您使用的是 VS11，则应从 VS11 命令提示符运行 cmake，并分别使用`-G"Visual Studio 11"`or`-G"Visual Studio 11 Win64"`用于 32 位或 64 位版本。

如果您的 CMake 版本不支持这些生成器选项，则需要更新 CMake。

要查看您的 CMake 版本支持的生成器的完整列表，只需`cmake`不带参数运行即可。

# google-maps - 一个位置上的多个标记

> ID：10675243
> 
> 赞同：2
> 
> 时间：2012-05-20T16:38:15.420
> 
> 标签：google-maps, google-maps-markers, infowindow

我有以下问题：我有三个指向同一位置的谷歌地图标记，我需要显示所有这些标记及其信息窗口，而不仅仅是一个。我已经看到了标记在单击时分支出来的示例，在同一位置显示多个信息窗口，但我找不到它的代码。谁能帮我？

先感谢您...

# ios - iOS - 计算区域中颜色的百分比

> ID：10675245
> 
> 赞同：0
> 
> 时间：2012-05-20T16:38:37.220
> 
> 标签：ios, ipad, graphics

我可能并不总是理解 API 中的每个函数，但通常我至少可以开始解决问题。这次我什至不知道这是否可能或如何攻击它......

我在屏幕上有一个用户可以绘制的区域。这工作正常。他们用三种不同的颜色绘制，表示三种不同的情况。我需要检测该区域中三种不同颜色的百分比覆盖率。似乎没有任何方法可以获取单个屏幕像素的颜色值。你会如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:48:51.803

您可以通过使用您分配并传递给的内存块创建位图图形上下文来做到这一点`CGBitmapContextCreate`。

然后您可以简单地将您的视图或图像绘制到该上下文中（例如使用`CALayer`方法`renderInContext:`）。然后，您分配的内存块将包含您在上下文中绘制的像素数据。字节顺序取决于您在创建上下文时指定的选项，通常是 RGBA（一个字节代表红色，下一个字节代表绿色，等等）。

# c# - C# 锁对调用的方法不起作用

> ID：10675246
> 
> 赞同：0
> 
> 时间：2012-05-20T16:38:44.530
> 
> 标签：c#, synchronization, locking

我刚开始用 C# 编程，偶然发现了一个小问题 -**锁**似乎不起作用，我得到一个“**在枚举数被实例化后修改了集合。** ”异常。

我的代码基本上是这样工作的：

```
private static object myLock = new object();

private Stack<MyObject> myObjects;

....

// Method that throws an exception
public void Update()
{
    lock(myLock)
    {
        foreach (MyObject ob in myObjects)
        {
            ob.Update(); // has a foreach loop of it's own
        }
    }

}

// Method invoked by a click event
public void InvokedMethod()
{
    lock(myLock)
    {
        myObjects.Push(new MyObject());
    }

} 
```

我究竟做错了什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:41:45.137

这很可能与您未包含在 foreach 块中的代码有关 - 您在错过的代码中做了什么？如果您正在修改屏幕集合（添加或删除），这将导致您看到的异常。

# html - GWT + HTML5 轻量级移动库，支持动画

> ID：10675248
> 
> 赞同：5
> 
> 时间：2012-05-20T16:39:04.040
> 
> 标签：html, gwt, mobile, mgwt

我正在研究用 GWT 编写移动应用程序，我需要一个轻量级的移动库。

该应用程序将包含动画和移动外观。有没有办法在 HTML 5 之上使用 GWT 创建更多“游戏”，如动画（如模糊、运动效果）？

我找到了以下库，但我不确定哪个是最好的。

[http://code.google.com/p/mgwt/](http://code.google.com/p/mgwt/)

[http://code.google.com/p/gwtmobile/](http://code.google.com/p/gwtmobile/)

[http://code.google.com/p/gwt-phonegap/](http://code.google.com/p/gwt-phonegap/)

[http://mobilegwt.appspot.com/showcase/](http://mobilegwt.appspot.com/showcase/)

[https://play.google.com/store/apps/details?id=com.gwtmobile.phonegap&hl=en](https://play.google.com/store/apps/details?id=com.gwtmobile.phonegap&hl=en)

[https://github.com/dennisjzh/GwtMobile](https://github.com/dennisjzh/GwtMobile)

[http://www.gwt4touch.appspot.com/](http://www.gwt4touch.appspot.com/)

您能否向我提供库列表器的任何建议、优点和缺点，或者您可能使用过的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T18:26:30.647

我是 mgwt 的创建者（在您的列表中有 3 次）[http://www.m-gwt.com](http://www.m-gwt.com)将是正确的网址。

mgwt 的编写方式与 GWT 相同，因为我是 GWT 的贡献者，我当然希望我知道我在说什么。

mgwt 花了 3 年的时间来构建，现在是用 Java 编写跨平台应用程序的好方法。它使用 GWT 的许多不同方面（MVP、ClientBundles、Editor Framework、UiBinder 等等）但是您的问题暗示您想要编写某种游戏，这取决于您的游戏 HTML5 目前可能不是正确的选择。

gwt4touch 是 sencha touch 之上的一个薄包装。这意味着编译器无法以任何方式优化 sencha 部分。您可能会问为什么首先使用 GWT。

gwt mobile 是纯 GWT，但不使用许多核心 GWT 概念。因此编译器无论如何都无法帮助优化 CSS，因为这是外部的。

当然，我作为 mgwt 的创建者的选择是有偏见的，但我只能鼓励您查看 mgwt 并查看一个“真正的”GWT 库，用于工作中的移动设备。

比较不同展示柜在不同设备（iOS、Android）上的性能，并亲自查看性能。

您可能还对整个主题的一般介绍感兴趣：[http ://www.youtube.com/watch?v=0V0CdhMFiao&feature=plcp](http://www.youtube.com/watch?v=0V0CdhMFiao&feature=plcp)

# google-maps - 为什么 Google Maps API 不添加标记？

> ID：10675253
> 
> 赞同：-1
> 
> 时间：2012-05-20T16:40:15.360
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在使用以下代码尝试将地图添加到 a`div`并在用户的当前位置放置一个标记。这是我第一次尝试这样的事情，过去几天我一直在玩它，遵循不同的教程和谷歌网站上的东西，但我就是无法让它工作。地图会出现，但无论我尝试什么，标记都不会出现。我也尝试使用坐标添加静态标记，但地图上不会显示任何内容。它开始让我有点发疯。任何帮助将不胜感激。

```
function initialize() {
    var myOptions = {
        center: new google.maps.LatLng(53.36652, -2.29855),
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map =
        new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var myLatlng = new google.maps.LatLng(53.36652,-2.29855);

    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title:"Hello World!"
    });
}

marker.setMap(map); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:51:38.543

您的线路
`marker.setMap(map);`
在功能之外。您应该已收到一条消息，表明`marker`未定义。

将该行移到函数中 - 在最后一个`}`.

请注意，`var map...`在函数内部使用会限制该函数的范围`map`：一旦该函数完成，该变量将不存在。如果你想用地图做其他事情，你需要
`var map;`
在全局范围内声明（在任何函数之外），然后在函数内部使用该变量
`map = ...`（no `var`）。

# java - 使用 iText 和 htmlWorker 的希腊字符和图像

> ID：10675255
> 
> 赞同：1
> 
> 时间：2012-05-20T16:40:31.160
> 
> 标签：java, playframework, itext

我在 Web 应用程序中有以下用于 PDF 导出的代码，该应用程序创建带有 2x2 表格单元格的 PDF。

```
public static void myexport2() throws IOException{
    try {
        com.itextpdf.text.Document document = new com.itextpdf.text.Document(PageSize.A4);
        PdfWriter pdfWriter = PdfWriter.getInstance(document, new FileOutputStream("C://Users/gkarapatis/Desktop/testpdf.pdf"));
        document.open();
        document.addAuthor("Author of the Doc");
        document.addCreator("Creator of the Doc");
        document.addSubject("Subject of the Doc");
        document.addCreationDate();
        document.addTitle("This is the title");
        HTMLWorker htmlWorker = new HTMLWorker(document);
        String str="<table height=300, border=\"1\"><tr><td></td><td></td></tr><tr><td>1</td><td></td></tr></table>"     

        htmlWorker.parse(new StringReader(str));
        document.close();
    } catch(DocumentException e) {
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

当我将希腊字符添加到 HTML 单元格时，它不会出现在导出的 PDF 文件中。我应该怎么做才能将 Unicode 添加到我的导出中。这是 HTMLWorker 的问题吗？

当我尝试将图像添加到单元格时，添加

```
img src=\"file://C:/Webapp/dsp/public/images/dsp1.jpg\" width=\"80\" height=\"81\" alt=\"\" border=\"0\" 
```

它给我一个例外。我正在使用播放框架，它抛出的异常是“InvocationTargetException发生：null”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:47:45.367

到目前为止，您可以更好地使用 PdfPTable 创建表格。创建单元格更简单，就像您逐个单元格添加单元格（每个单元格都是 PdfPCell）一样。现在关于您的两个问题

1.  使用特定字体来显示希腊字符。当您将其嵌入为 unicode 时，最好使用 Arialuni.ttf 进行尝试。然后，如果您发现特定字体，请使用它。
2.  将图像添加到单元格也很简单，只需使用 PdfPCell 的 add 方法。创建字体以实现，您必须使用 BaseFont 类创建字体。（只需谷歌搜索每个部分，以便更好地理解。）导出的 pdf 不显示那些希腊字符，因为其中找不到由代码点（Unicode）表示的字形。

如果您可以附上预期输出的图像，我们可以提供一些见解。

# ruby-on-rails - 如何从照片集中检查 current_user 喜欢哪张照片？

> ID：10675260
> 
> 赞同：0
> 
> 时间：2012-05-20T16:40:46.503
> 
> 标签：ruby-on-rails

我有这样的多态关联：

```
class Likes < ActiveRecord::Base  
  belongs_to :likeable, :polymorphic => true  
end

class Photos < ActiveRecord::Base  
  has_many :likes, :as => :likeable
end 
```

在照片#index 视图中，我每页显示 10 张照片（带有点赞数和点赞按钮）。我想检查当前用户喜欢哪张照片，以及是否喜欢禁用“点赞按钮”。如何做到这一点，最好的方法是什么？

最好的问候，乔治。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:22:53.937

Likes belongs_to :user photo.likes.detect { |l| l.user_id == current_user.id}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:19:35.920

您可以采用几种方法，在速度、易用性等方面进行各种权衡。我假设您的用户模型有`has_many :likes`关联。

你可以做类似的事情

```
current_user.likes.where(:likeable_type => 'Photo', :likeable_id => photo).exists? 
```

尽管这会为每张显示的照片触发一个数据库查询（尽管只要您在 likes 表上有正确的索引，它们将是非常快速的查询）。

另一种选择是一次性加载所有喜欢的用户，并将它们放入由 likeable_id 和 likeable_type 索引的哈希中。每页只需要一个查询，但如果用户有很多喜欢，这会变慢 - 您可能加载 3000 个喜欢只是为了确定您正在显示的照片的状态

另一种选择是只为您正在显示的照片加载那些喜欢的照片。如果那个数组是`photos`你可以做的

```
likes = current_user.likes.where(:likeable_type => 'Photo', :likeable_id => photos) 
```

这会产生一个应该很快的查询（再次假设您有正确的索引），并且您永远不会获取比您需要的更多的喜欢。

```
liked = likes.inject({}) {|hash,like| hash[like.likeable_id]=true; hash} 
```

然后给你一个哈希值，它会告诉你一张照片（由它的 id 标识）是否被喜欢：只需检查`liked[photo.id]`

# c# - 为 XML 序列化添加前缀和命名空间

> ID：10675266
> 
> 赞同：6
> 
> 时间：2012-05-20T16:42:23.150
> 
> 标签：c#, xml, visual-studio-2010, xml-serialization, xml-namespaces

我在墨西哥税收计算程序中工作，政府提供了以下 XSD 文件[http://www.sat.gob.mx/cfd/3/cfdv32.xsd](http://www.sat.gob.mx/cfd/3/cfdv32.xsd)，在 xsd.exe 的帮助下，我已将其转换为 C#这个类很大，所以我只提供一个链接，以免用代码使这篇文章变得臃肿：http: [//pastebin.com/r3VCgFMU](http://pastebin.com/r3VCgFMU)。

在填充了一些类字段后（所以示例不会太大），我尝试按如下方式序列化 XML：

```
XmlSerializerNamespaces xmlNameSpace = new XmlSerializerNamespaces();
xmlNameSpace.Add("xsi", "http://www.w3.org/2001/XMLSchema-instance");
xmlNameSpace.Add("schemaLocation", "http://www.sat.gob.mx/cfd/3/cfdv32.xsd");
xmlNameSpace.Add("cfdi", "www.sat.gob.mx/cfd/3");
XmlTextWriter xmlTextWriter = new XmlTextWriter("c:\\temp\\pruebas.xml", Encoding.UTF8);
xmlTextWriter.Formatting = Formatting.Indented;
XmlSerializer xs = new XmlSerializer(typeof(Comprobante));

xs.Serialize(xmlTextWriter, comprobante, xmlNameSpace);
xmlTextWriter.Close(); 
```

这给了我这个输出：

```
<?xml version="1.0" encoding="utf-8"?>
<Comprobante xmlns:cfdi="www.sat.gob.mx/cfd/3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:schemaLocation="http://www.sat.gob.mx/cfd/3/cfdv32.xsd" version="3.2" fecha="0001-01-01T00:00:00" subTotal="0" total="0" tipoDeComprobante="ingreso" xmlns="http://www.sat.gob.mx/cfd/3">
  <Emisor rfc="DERH9145202V4">
    <DomicilioFiscal calle="Calle1" colonia="Colonia" municipio="municipio" estado="estado" pais="pais" codigoPostal="07000" />
    <RegimenFiscal Regimen="Peque" />
  </Emisor>
</Comprobante> 
```

正如我们在政府提供的示例（ftp://ftp2.sat.gob.mx/asistencia_servicio_ftp/publicaciones/solcedi/ejemlo1%20cfdv3.xml）中看到的那样，我生成的文件缺少一些要点：

```
<Comprobante... should be <cfdi:Comprobante 
<Emisor.. should be <cfdi:Emisor 
and so on and so forth with all elements...
xmlns:schemaLocation should be xsi:schemaLocation  
I'm getting and additional xmlns="http://www.sat.gob.mx/cfd/3" at the end of the Comprobante declaration 
```

如何在我的 xml 中实现这种更改？:D

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T20:06:34.847

该问题已由 MSDN 工作人员解决，如果有人遇到相同问题，请添加：

```
[XmlAttribute(Namespace = XmlSchema.InstanceNamespace)]
public string schemaLocation = "http://www.sat.gob.mx/cfd/3 cfdv32.xsd"; 
```

到 xsd.exe 生成的根类或部分类

（在这个例子中

```
public partial class Comprobante {

        [XmlAttribute(Namespace = System.Xml.Schema.XmlSchema.InstanceNamespace)]
        public string schemaLocation = "http://www.sat.gob.mx/cfd/3 cfdv32.xsd";
...
} 
```

# google-maps - 带有自定义地图图像的 Google Maps API v3 - 水平重复的标记

> ID：10675268
> 
> 赞同：0
> 
> 时间：2012-05-20T16:42:41.290
> 
> 标签：google-maps, google-maps-api-3

我有与 Google Maps API v3 一起使用的自定义地图图像图块。当我在地图上放置标记时，标记会水平重复，就好像地图也重复一样。这是正在发生的事情的图片：http: [//puu.sh/vN7b](http://puu.sh/vN7b)

如何解决这个问题？我不想限制地图边界来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:45:04.530

两件事情：

1/ 在函数 convertCoords(nx,ny,map) 你做：

```
x = (((nx + (6000 / 2)) / 6000) * cor1)
y = ((((ny * -1) + (6000 / 2)) / 6000) * cor2) 
```

那不应该是这样的：

```
x = (((nx + (6000 / 2)) / 6000) * cor1.lat());
y = ((((ny * -1) + (6000 / 2)) / 6000) * cor2.lng()) 
```

在我的测试中，x 和 y 是`NaN`.

2/ 您的地图处于缩放级别 1。如果您不限制地图的边界，这不是预期的吗？

# iphone - 阻止回调崩溃

> ID：10675275
> 
> 赞同：1
> 
> 时间：2012-05-20T16:44:37.710
> 
> 标签：iphone, objective-c, ios, objective-c-blocks

我在 viewControllers 之间使用 Blocks 而不是委托进行回调，但我无法弄清楚为什么这种情况不起作用：

所以我有一个调用detailViewController的mainViewController，当返回作为mainViewController属性的tableView时需要重新加载。

```
DetailViewController *actionDetail = [[DetailViewController alloc]initWithSaveBlock:^{
        [self.tableView reloadData]  //app crashes here
}]; 
```

当用户点击“保存按钮”时，在 detailViewController 中调用“保存”

```
- (void)save
{
    if (self.saveBlock)
        self.saveBlock();

    [self dismissModalViewControllerAnimated:YES];
} 
```

出于某种原因，`[self.tableView reloadData]`不符合`[self dismissModalViewControllerAnimated:YES]`. 如果我删除这两个应用程序之一，应用程序似乎工作正常，显然比我错过了预期的行为。

当应用程序崩溃时，控制台中的消息是：

```
Previous frame inner to this frame (gdb could not unwind past this frame) 
```

任何人都知道为什么这不起作用？

**更新：** SaveBlock 是这样定义的

```
typedef void (^SaveBlock)();

@interface DetailViewController : UIViewController
{

}
@property(nonatomic,assign)SaveBlock saveBlock; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T17:10:19.660

您需要将您的块属性声明为`copy`：

```
@property(nonatomic, copy) SaveBlock saveBlock; 
```

您不能使用`assign`或`strong`。原因是您需要确保拥有自己的块副本。传入的那个可能在一个堆栈帧上，当你开始运行该块时它可能已经消失了。因此，您需要触发 a`Block_copy()`以确保将块复制到堆中（或者如果它已经存在则保留）。

[注意：这个解释非常简洁。如果您想完全理解它，我建议您阅读有关块运行时的信息。]

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-20T20:34:05.377

**仅适用于 ARC**

您需要将您的块属性声明为`strong`，将其声明为`copy` **不是必需**的。所以声明应该是：

```
@property (nonatomic, strong) SaveBlock saveBlock; 
```

**为什么不`copy`呢？**

当传递给您`initWithSaveBlock:`的块时，可能是堆栈分配的，*也可能不是*. 无论哪种情况，您都需要*保留*它。如果块在堆栈上，那么保留它会*导致它被复制*到堆上。如果块已经在堆上，则不需要复制它。因此 using`copy`将起作用，但*可能*包含冗余副本， using`strong`避免了这种情况。

另请参阅[此答案](https://stackoverflow.com/questions/4824038/how-to-simplify-callback-logic-with-a-block)以获取解释。

# ruby-on-rails - 用于 cassandra 的 Rails 宝石

> ID：10675276
> 
> 赞同：1
> 
> 时间：2012-05-20T16:44:39.340
> 
> 标签：ruby-on-rails, orm, cassandra

有没有更好的带有 Cassandra 的 Rails 的 ORM？我看了很多，发现很多没有更新的 cassandra 的 ORM。那么谁能帮我确定哪个最适合 Cassandra 和 Rails 3.2 使用？

# uinavigationcontroller - 如何将数据从详细视图传递到 iOS 中的主视图

> ID：10675287
> 
> 赞同：1
> 
> 时间：2012-05-20T16:45:52.727
> 
> 标签：uinavigationcontroller, segue

我正在研究*您的第二个 iOS 应用程序*示例：[https ://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318- CH1-SW1](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318-CH1-SW1)

它使用 segue 从主视图过渡到详细视图。如何将数据从详细视图传递到主视图？我知道我应该使用推荐的委托，但是详细视图何时调用委托方法？

# php - iOS <-> PHP 加密

> ID：10675289
> 
> 赞同：1
> 
> 时间：2012-05-20T16:46:34.193
> 
> 标签：php, iphone, ios, encryption

我在我的 php 代码中使用了这个加密函数：

```
function _encrypt($key,$string){
$string = ' '.$string.' ';
return  base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key)
, $string, MCRYPT_MODE_CBC, md5(md5($key))));
    }

function _decrypt($key,$encrypted){
    return rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($key),
    base64_decode($encrypted),
    MCRYPT_MODE_CBC, md5(md5($key))), "\0");
} 
```

我想知道可能支持 iPhone 端与服务器协商的 iOS 等效功能。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:07:11.773

我不知道它是否仍然相关，但我创建了一个 git 项目，它使您能够将 NSDictionary、加密或未加密从 iOS 发送到 PHP

看看：[Github：JNKTransmitter](https://github.com/JNK/JNKTransmitter)

# android - 第二次调用此活动时保留活动实例

> ID：10675290
> 
> 赞同：0
> 
> 时间：2012-05-20T16:46:55.940
> 
> 标签：android

我有一个主要活动。主要活动通过startActivityForResult调用其他活动（A）。转到 A。我搜索了一些东西并有一个列表项。然后单击 A 中的一项返回 Main。然后第二次打电话给A。一个列表消失。我认为创建了一个 A 的新实例。我想调用 A 的旧实例并保留列表项。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:43:30.243

您应该在开始活动 A 之前在 Intent 上设置标志`Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`。这样，如果活动堆栈上存在一个实例，它将使用现有实例

# wpf - 在 WPF 中使用数据库部署项目

> ID：10675291
> 
> 赞同：1
> 
> 时间：2012-05-20T16:47:18.110
> 
> 标签：wpf, sql-server

我正在尝试使用数据库（sql server）部署一个 WPF 项目，但是当我在互联网上遵循一些教程时，当另一台计算机安装并运行它时，它会导致与连接字符串相关的错误。请帮助我，并为我的英语不好感到抱歉。:(

# c# - 如何在 C# 中从谷歌地图中获取海拔点？

> ID：10675292
> 
> 赞同：2
> 
> 时间：2012-05-20T16:47:23.973
> 
> 标签：c#, google-maps-api-3, elevation

我正在尝试获取特定谷歌地图中所有点的高度，无论是在英国还是美国，或者只是在世界各地随机，然后将高度数据存储到 C# 中的 Array[x,y] 中？

我知道谷歌有一个叫做高程地图的东西，但似乎每个人都在尝试使用它来获取经度/纬度，所以.. 任何人都可以提供一个链接到我可以找到如何获取海拔高度的链接或提供一个示例程序它在 C# 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T00:58:44.470

您需要调用 google 的其余服务，它会根据方向或坐标返回海拔高度这里有一些代码可以指导您以正确的方式

```
 //builds the URL of the service
 String url = "http://maps.google.com/maps/api/elevtation/xml?address=example"; 
 //gets the xml returned by the service
 XmlTextReader xml = new XmlTextReader(url); 
```

从这里您需要解析 xml 并存储在您想要的任何元素中，可以是数据库、列表、数组。等等

[在这里，您将了解如何调用服务](https://developers.google.com/maps/documentation/elevation/)以及使用服务的所有不同方式，并查看您需要哪个部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T03:37:31.663

```
using Newtonsoft.Json.Linq;

    public double getElevation(DbGeography point)
    {
        //https://developers.google.com/maps/documentation/elevation/intro
        var request = (HttpWebRequest)WebRequest.Create(string.Format("https://maps.googleapis.com/maps/api/elevation/json?locations={0},{1}", point.Latitude, point.Longitude));
        var response = (HttpWebResponse)request.GetResponse();
        var sr = new StreamReader(response.GetResponseStream() ?? new MemoryStream()).ReadToEnd();

        var json = JObject.Parse(sr);
        return (double)json.SelectToken("results[0].elevation");
    } 
```

# ruby-on-rails - 带有 Spork、Guard、RSpec 的 Rails 引擎测试/假人？

> ID：10675295
> 
> 赞同：3
> 
> 时间：2012-05-20T16:47:40.570
> 
> 标签：ruby-on-rails, ruby, rspec, spork, guard

我有一个正在使用 RSpec 测试的 Rails gem。我的 gem 的代码在 lib/my_gem 中，并且在我创建 gem 时 Rails 为我生成了一个测试应用程序，在文件夹 test/dummy 中。我在 test/dummy/spec/models/task_spec.rb 中有我的规格。我可以使用 rspec 命令很好地运行这些规范。

现在我想使用 Spork 和 Guard 进行测试。我按照 RailsCasts [http://railscasts.com/episodes/285-spork](http://railscasts.com/episodes/285-spork)在我的测试/虚拟应用程序中安装 spork。它确实有效，但我有两个问题：

*   如何让 spork 重新加载我的 lib/my_gem/* 文件？我尝试将 ../../lib/my_gem/... 之类的路径放在我的 Guardfile 中，但它不会监视/重新加载文件。
*   出于某种原因，rspec 忽略了我在 spec_helper 中的选项，例如“config.filter_run :focus => true”行。我确实将这些正确地放入了 Spork.prefork。当我使用 rspec spec/models/task_spec.rb 手动运行 rspec 时，此设置有效，但当我使用 guard/spork 时，它被忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T22:10:37.283

通常在开发环境`config.cache_classes`中设置为`true`. 当您使用 spork 时，您应该禁用此选项，有关详细信息，请参阅：`./config/environments/test.rb`file.

而是`config.filter_run :focus => true`尝试使用 RSpec 的标签：[https ://www.relishapp.com/rspec/rspec-core/v/2-4/docs/command-line/tag-option](https://www.relishapp.com/rspec/rspec-core/v/2-4/docs/command-line/tag-option)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:21:59.313

我终于能够解决这个问题。关键是从根目录而不是从 test/dummy 运行测试。如果您克隆我的 gem [https://github.com/mrbrdo/has_moderated](https://github.com/mrbrdo/has_moderated) ，您可以看到我的设置rb 文件（一个在 spec/ 中，一个在 test/dummy/spec 中）。如果您发现需要其他内容，请随时发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T18:11:03.393

Spring 现在有关于在开发 Rails 引擎时如何使用的文档。[https://github.com/rails/spring#application-root](https://github.com/rails/spring#application-root)

只需指定在哪里可以找到测试应用程序的根目录：

```
Spring.application_root = './test/dummy' 
```

# mysql - 创建表时是否需要指定关系的基数？

> ID：10675297
> 
> 赞同：0
> 
> 时间：2012-05-20T16:47:57.670
> 
> 标签：mysql, sql, database

当我们在数据库中物理创建 SQL 模式时，是否需要指定表是一对一的，还是多对一的，还是一对多的，还是多对多的？我们可以在 E/R 图中显示这一点...

如果是这样，我们添加哪些关键字`CREATE TABLE....`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:51:28.473

不，这不是您需要指定的内容，可以通过定义外键的字段上的索引/约束来推断。例如，如果它基于它们的主键连接两个表，这显然是一对一的关系。如果它是一对多关系，那么“多”端不会有任何独特的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:04:38.860

不是您的意思，而是我们通过创建诸如外键之类的关系来定义它，以识别和指定表之间的关系。更多信息[在这里](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)。

# python - OpenCv (Leopard) 中的“mach-o, but wrong architecture”

> ID：10675298
> 
> 赞同：4
> 
> 时间：2012-05-20T16:47:58.093
> 
> 标签：python, opencv

我已经使用 CMake从这个[文档安装了 OpenCV。](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)我的 ~/.profile 文件是：

```
export DYLD_LIBRARY_PATH=/usr/local/mysql/lib/
export ARCHFLAGS="-arch i386 -arch x86_64"
export ARCHFLAGS="-arch i386" 
export VERSIONER_PYTHON_PREFER_64_BIT=yes
export VERSIONER_PYTHON_PREFER_32_BIT=no
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
export PYTHONPATH=/Library/Python/2.6/site-packages:$PYTHONPATH    
export DYLD_FALLBACK_LIBRARY_PATH=/opt/local/lib 
```

我有`import cv`这个错误：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.6/site-packages/cv.py", line 1, in <module>
    from cv2.cv import *
ImportError: dlopen(/usr/local/lib/python2.6/site-packages/cv2.so, 2): no suitable image found.  Did find:
    /usr/local/lib/python2.6/site-packages/cv2.so: mach-o, but wrong architecture 
```

我的python架构：

```
file "$( "$(which python)" -c "import sys;print(sys.executable)" )"
/usr/bin/python: Mach-O universal binary with 3 architectures
/usr/bin/python (for architecture x86_64):  Mach-O 64-bit executable x86_64
/usr/bin/python (for architecture i386):    Mach-O executable i386
/usr/bin/python (for architecture ppc7400): Mach-O executable ppc 
```

我已阅读并运行 stackoverflow 中有关 OpenCV 和 Leopard 的所有答案，但仍高于错误。对此的任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:53:03.003

Leopard（和雪豹）是一种杂交品种，它包含两个二进制文件：32 位和 64 位......并且将它们混合在一起......这是一场噩梦。据我所知，您不能在同一个运行程序中混合使用 32 位和 64 位库。

我用过这个技巧：[如何强制 /usr/bin/gcc -> /usr/bin/gcc -m32？](https://stackoverflow.com/questions/4369765/how-to-force-usr-bin-gcc-usr-bin-gcc-m32)

它使一切都在 i386（32 位）中编译。您也可以将其强制为 64（不推荐）。它还修复了许多其他编译问题。**请记住，这是一个 hack。**

备份 /usr/bin/，做 hack，编译 open cv 并删除 hack。

其他解决方案是升级到（到目前为止）似乎没有 32/64 位问题的狮子。

有用的命令还有：

```
lipo -info /usr/local/lib/python2.6/site-packages/cv2.so
arch -i386 /usr/bin/python 
```

Lipo 检查共享对象的体系结构以及后者[如何在 Snow Leopard 和其他 32 位/64 位问题上强制 Python 为 32 位](https://stackoverflow.com/questions/2088569/how-do-i-force-python-to-be-32-bit-on-snow-leopard-and-other-32-bit-64-bit-quest)。也许你可以通过强制 python 与 cv2 相同的拱门来解决这个问题......

**编辑**

我注意到您正在使用 macport cv2 和 apple python。`/opt/local/bin/python2.6`运行代码时尝试。

# ruby-on-rails - 如何处理rails 3.1中一个表和其他2个互斥表之间的关系？

> ID：10675300
> 
> 赞同：1
> 
> 时间：2012-05-20T16:48:21.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我们的 rails 3.1.4 应用程序中有一张发票。发票可以从一个报价或一个或多个租赁预订项目生成，但不能同时从这两者生成。因此，一张发票要么有一个报价，要么有许多租赁使用项目。现在我们正在考虑创建一个带有发票 ID 和人工字段 invoice_item_id（可以是报价 ID 或租赁使用项目 ID）的中间表来存储发票的报价或租赁使用项目。但是，我们不确定发票和报价之间以及发票和租赁使用项目之间的关系。我们不能说 invoice has_one 报价，因为有些发票没有报价。另一方面，我们不能说发票 has_many 租赁使用项目，因为有些可能没有。在 rails 3.1.4 中处理这种关系的更好方法是什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:34:57.990

如上所述，IMO 使用 has_one/has_many 关系应该没问题。即使没有填充引用，使用这些关系也是有效的。

您可以通过 ActiveRecord 验证处理互斥部分：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#validations-overview](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validations-overview)

```
class Invoice < ActiveRecord::Base

  has_one :quote 
  has_many :lease_usage_items

  validates :cannot_have_quote_and_lease_usage_items 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:13:25.047

看看[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)：“使用多态关联，一个模型可以在一个关联上属于多个其他模型”，因此在您的情况下`invoce_item_id`属于可开票（报价或租赁使用项目）。

# xamarin.ios - Zxing 二维码阅读器异常

> ID：10675301
> 
> 赞同：1
> 
> 时间：2012-05-20T16:48:41.120
> 
> 标签：xamarin.ios, zxing

使用相机拍照后，我正在使用以下代码。

* * *

```
UIimage img = e.Info[UIImagePickerController.OriginalImage] as UIImage;
imagePicker.DismissModalViewControllerAnimated(true);
try
{

    var srcbitmap = new System.Drawing.Bitmap(img);

     Reader barcodeReader = new MultiFormatReader();
     LuminanceSource source = new RGBLuminanceSource(srcbitmap,(int)image.Size.Width, (int)image.Size.Height);
  BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
  var result = barcodeReader.decode(bitmap); 
```

* * *

我从 Zxing 库中得到一个例外。有没有人遇到过这样的问题？如果是这样，请帮忙。

我从[https://github.com/JohnACarruthers/zxing.MonoTouch获取了 Zxing 库](https://github.com/JohnACarruthers/zxing.MonoTouch)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:45:14.683

我得到了这个工作:)

这是因为图像尺寸大而发生的。我将图像尺寸缩小如下

```
 UIGraphics.BeginImageContext(new SizeF(480,320));
            image.Draw(new RectangleF(0,0,200,200));
            UIImage smallImage = UIGraphics.GetImageFromCurrentImageContext();
            UIGraphics.EndImageContext(); 
```

它奏效了:)

# javascript - 显示另一个图像的 div

> ID：10675302
> 
> 赞同：2
> 
> 时间：2012-05-20T16:48:48.390
> 
> 标签：javascript, css

我需要一个 div 来显示另一个图像的部分（按 z 顺序在其下方）。

换句话说，当我的 div 位于某个位置时，只有 div 正下方的背景图像部分应该是可见的（并且图像中的其他所有内容都应该隐藏）。

我制作了一个动画 gif 以更好地说明问题： [http](http://whattaclick.com/illustrate.gif)
://whattaclick.com/illustrate.gif 编辑：嗯.. gif 似乎只在 chrome 中开始动画，除非先保存在计算机上，否则使用 firefox 它将无法工作。

关于什么是好方法的任何想法？我首先考虑使用 css 剪辑来隐藏背景图像，但要继续手动插入剪辑值需要做很多工作。如果我能以某种方式告诉浏览器隐藏除 div 的内部区域之外的所有内容，那就更容易了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:56:29.520

这个应该做。

[图像区域选择](http://odyniec.net/projects/imgareaselect/)

# c# - 如何获取 Window 实例的 hWnd？

> ID：10675305
> 
> 赞同：59
> 
> 时间：2012-05-20T16:48:56.030
> 
> 标签：c#, wpf

我的 WPF 应用程序有多个窗口，我需要能够获取每个 Window 实例的 hWnd 以便我可以在 Win32 API 调用中使用它们。

我想做的例子：

```
Window myCurrentWindow = Window.GetWindow(this);
IntPtr myhWnd = myCurrentWindow.hWnd; // Except this property doesn't exist. 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-05-20T17:02:36.943

[`WindowInteropHelper`](http://msdn.microsoft.com/en-us/library/ms618134)是你的朋友。它有一个接受`Window`参数的构造函数和一个`Handle`返回其窗口句柄的属性。

```
Window window = Window.GetWindow(this);
var wih = new WindowInteropHelper(window);
IntPtr hWnd = wih.Handle; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-10-06T12:18:10.290

扩展道格拉斯的答案，如果`Window`尚未显示，它可能没有 HWND。您可以使用以下命令强制在窗口显示之前创建一个[`EnsureHandle()`](https://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.ensurehandle%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)：

```
var window = Window.GetWindow(element);

IntPtr hWnd = new WindowInteropHelper(window).EnsureHandle(); 
```

注意`Window.GeWindow`can return `null`，所以你也应该真正测试一下。

# python - 如何将继续 url 传递给登录所需的装饰器

> ID：10675307
> 
> 赞同：1
> 
> 时间：2012-05-20T16:49:04.760
> 
> 标签：python, google-app-engine, decorator, login-required

我有`login_required`如下装饰器：

```
def login_required(function):
  """ Decorator to check Logged in users."""
  def check_login(self, *args, **kwargs):
    if not self.auth.get_user_by_session():
      self.redirect('/_ah/login_required')
    else:
      return function(self, *args, **kwargs)
  return check_login 
```

现在我有一个`Page`（由单独的 呈现`Handler`），我可以选择让用户上传可以由来宾和用户查看的图像。一旦表单被发布，它就会由另一个`Handler`使用`@login_required`装饰器的人处理。

我想要实现的是传递一个`continue_url`变量，我可以在`check_login`重定向时在函数中使用该变量，以便用户在登录后被重定向回同一页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:04:57.047

该`create_login_url`函数将目标 url 作为其第一个参数。您可以从请求对象中获取 dest_url。

```
def login_required(func):

    def _wrapper(request, *args, **kw):
        user = users.get_current_user()
        if user:
            return func(request, *args, **kw)
        else:
            return request.redirect(users.create_login_url(request.get_url()))

    return _wrapper 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T17:05:01.977

所以基本上，听起来你想在使用装饰器时将参数传递给它。Python 确实支持这一点。基本思想是`@decorated(argument) def foo(...)`等价于`def foo(...); foo = decorated(argument)(foo)`。

所以你需要做`decorated`一些`decorated(argument)`可以装饰的东西`foo`。有几个食谱。这是一个 -`decorated`使用方法创建一个类`__call__`，因此这`decorated(argument)`是一个可调用对象，在调用`argument`时存储和使用它：

```
class decorator(object):
    def __init__(argument):
        self.argument = argument

    def __call__(self, wrapped):
        def wrapper(args_for_wrapped):
            do_something_with(self.argument)
            wrapped(args_for_wrapped)
            whatever_else_this_needs_to_do()
        return wrapper 
```

这也可以通过一个普通的函数（和一个额外的嵌套级别）来实现，包括技巧`functools.partial`等。

# android - Android，Parcelable，我这样做是否正确

> ID：10675308
> 
> 赞同：0
> 
> 时间：2012-05-20T16:49:06.363
> 
> 标签：android, parcelable

好的，今天开始了我的第一个 Android 项目，我有点卡住了。我会很感激任何帮助。

我有一个类，它基本上是其他类的列表容器。我在主要活动中创建了这个类的一个实例，并计划将它或它包含的类传递给其他要处理的活动。这听起来合理吗，还是最好有一个静态并从每个活动中调用它？

我的第二点是，我已经读到最好实现 parcelable 来打包数据。但是，如果您的类包含非原始类型的成员变量怎么办？

```
`class MyClassList {
    private SomeClass _one;
    private AnotherClass _two;
}` 
```

他们也必须实施 parcelable 吗？如果是这样，这对我自己的类来说很好（虽然听起来很难实现），但是我没有代码访问的类是什么？

如果其中任何一个没有意义，请道歉，但希望你能理解我来自哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:51:58.450

是的，他们也必须`Parcelable`如此。

如果您在上面编写的代码是您的实际类，那么它必须扩展 Parcelable 是不好的。

如果这对您来说太痛苦了，您可以使该类扩展[Application](http://developer.android.com/reference/android/app/Application.html) 使其成为静态的。关于哪个更好用，每个人都有自己的看法。

另一种选择是使用`Serializable`，但是使用它会有性能损失。

我建议扩展 Parcelable，因为这是正确的做法，而且一旦你掌握了窍门，就不难了。

# servlets - 如何将请求参数传递给 Backbone.js 中 model.save() 上的 Servlet 中的 dopost() 方法

> ID：10675310
> 
> 赞同：0
> 
> 时间：2012-05-20T16:49:18.870
> 
> 标签：servlets, backbone.js

我正在尝试将我的 Backbone 前端集成到 Servlet 后端。我在 Servlet 中使用了 emulateHTTP 和 emulateJSON 来访问我的 doPost 方法。我能够获得 fetch 的 JSON 响应（来自 Servlet 中的 doGet）。

现在我想将模型保存到我的后端。我对如何将请求参数或模型属性传递给 post 方法感到困惑。我在这里错过了什么吗？有什么想法请...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:20:27.113

Backbone 的 model.save() 调用 Backbone.sync 对象，最终调用 jQuery.ajax。Backbone.sync 所做的只是为 $.ajax 设置输入参数，其中包括请求参数。可以想象，如果您将发布 bean 设置为可调用 URL，那么 $.ajax 将处理所有参数，包括您的模型属性，这些参数将在保存期间传递。

# java - Java Paint 组件不工作

> ID：10675311
> 
> 赞同：0
> 
> 时间：2012-05-20T16:49:25.423
> 
> 标签：java, swing, graphics, paint

这是代码，正方形渲染但不会移动，即使它应该渲染每个循环。问题似乎出在核心类中，在 run()

```
 package com.game;

import java.awt.*;
import javax.swing.*;

public class Core implements Runnable{
    private static boolean running = true;
    public static JFrame frame = new JFrame();
    public static void main(String[] args) {
        frame.setResizable(false);
        frame.setBounds(100,100,600,400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        start();
    }

package com.game;

import java.awt.Graphics;

import javax.swing.JPanel;

public class Paint extends JPanel{
    public static int x = 10;
    public void paintComponent(Graphics g){
        super.paintComponent(g);

        g.fillRect(x,10,100,100);
    }
}

        private static void start() {
            running = true;
            Thread thread = new Thread(new Core());
            thread.setPriority(Thread.MAX_PRIORITY);
            thread.start();
        }

        @Override
        public void run() {
            Paint p = new Paint();
            Container pane = frame.getContentPane();
            while(running){
                pane.add(p);
                pane.show();

                System.out.println(Paint.x);
            try {
                Thread.sleep(100);
            } catch (Exception e){}
        }
        }
    } 
```

抱歉，如果代码以任何方式令人讨厌，我不知道应该如何格式化它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:15:38.007

你是`while (running)`循环：

```
while(running){
   pane.add(p);
   pane.show();
   //....
} 
```

正在踩踏 Swing 事件线程并阻止该线程执行其操作——绘制 GUI 并与用户交互。如果您想在 Swing 应用程序中重复行为，请不要使用 while (true) 循环，而是使用 Swing 计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T16:52:38.230

你没有改变`x`，为什么它要移动？

此外，您不断（每秒十次）将 Paint（您的`JPanel`子类）添加到框架并显示它。

您可能想添加并显示一次，也许在您的 main 方法（或更好的地方）中，`repaint()`然后在该循​​环中调用它。

并且请不要使用`thread.setPriority(Thread.MAX_PRIORITY);`它很少完成任何事情，并且可能不是您想要的。

# asp.net-mvc - 无法 Ajax 以 XML 格式发布淘汰赛 (KO) 数据

> ID：10675312
> 
> 赞同：0
> 
> 时间：2012-05-20T16:49:26.827
> 
> 标签：asp.net-mvc, jquery, knockout.js

我正在开发 .NET 4.0 MVC 项目。我正在尝试 Ajax 从我的 KO 模型中发布一条数据。该数据是以下 XML 格式的字符串。

```
<SearchCriteria><Criteria SearchOn="Name" SearchValue="test 3" /></SearchCriteria> 
```

我正在尝试像这样发布它。

```
$.ajax({
        url: destUrl,
        data: ko.toJSON(DataToPost()),
        type: "POST",
        success: function (result) {
            // I am doing my stuff here.
            }
        },
        error: function (request, textStatus, errorThrown) {
            alert(request.statusText);
        }
    }); 
```

在这里您会注意到正在发送的数据是`"ko.toJSON(DataToPost())"`. `DataToPost()`返回包含在我的数据成员中的`XML`字符串。用于将数据转换为.`KO model``DataToPost``ko.toJSON()``KO model``JSON`

这会引发运行时异常，通常`thrown`在我们发布任何包含`javascript`或`html`标签的内容时。这是`.NET`. 以下是例外。

```
A potentially dangerous Request.Form value was detected from the client.

&lt;SearchCriteria&gt;&lt;Criteria SearchOn=&quot;...est 3\&quot; /&gt;&lt;/SearchCriteria&gt; 
```

我有时会遇到类似的情况（尽管我没有使用`KO`那个时间，而且这是正常的帖子，即非`Ajax`）。我当时通过使用克服了这个问题，`javascript` `escape()`但这次是它`failed`。我使用它如下

```
$.ajax({
    url: destUrl,
    **data: ko.toJSON(escape(SearchCriteria()))**,
    type: "POST",
    success: function (result) {
        // I am doing my stuff here.
        }
    },
    error: function (request, textStatus, errorThrown) {
        alert(request.statusText);
    }
}); 
```

其他流行的修复方法是在页面级别或应用程序级别禁用此安全性。可以按如下方式进行。

**页面级别。**

```
<%@ Page validateRequest="false" %> 
```

**应用层。**

```
<configuration>
   <system.web>
      <pages validateRequest="false" />
   </system.web>
</configuration> 
```

但是取消这种安全性并不好。我认为这不是明智之举。现在我不知道该怎么办。需要建议。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:55:33.660

我意识到格式化字符串很难，`serialize`因此`XML`我`XML`决定发布 List of`Key value pair`而不是格式化字符串。这种方法运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:16:13.970

嘿，只需将该 xml 作为字符串传递并在服务器端对其进行解码，而不是在客户端对其进行序列化。您也可以发布您的 html，因为我相信您可以在按钮提交时做错事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T00:09:50.160

这不是一个真正的淘汰赛问题。这实际上是关于将 xml 数据发布到 asp.net。请求验证在 beginRequest 之前在 .NET 4.0 中启动。将您的 web.config 更改为此。

```
<httpRuntime requestValidationMode="2.0"/> 
```

现在将该`ValidateInput`属性添加到您的特定操作方法中。

```
[ValidateInput(false)] 
```

这应该允许数据通过而不会影响您的整个站点请求验证。

希望这可以帮助。

# python - 使用 Heroku 设置 PYTHONPATH 和 PYTHONHOME

> ID：10675315
> 
> 赞同：9
> 
> 时间：2012-05-20T16:50:08.747
> 
> 标签：python, django, heroku

我正在尝试设置我的`PYTHONPATH`和`PYTHONHOME`变量，但无法弄清楚！

尝试运行时`python`，我收到错误消息`No module named site`。

经过一番研究，似乎这是因为这些`PYTHONPATH`和`PYTHONHOME`环境变量设置不正确。

`python`当我在取消设置这两个变量后尝试运行时，它能够正常运行。但问题是这只会持续我的一生`virtualenv`。在我停止`virtualenv`并再次运行它后，问题又回来了。

好吧，我是说`virtualenv`，但实际上这是我在 Heroku 上的环境。

如何永久取消设置这些变量？

* * *

更新：我按照[这里的教程](http://tomatohater.com/2012/01/17/custom-django-management-commands-on-heroku/)进行操作，似乎可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-31T00:01:32.770

你为什么需要这样做？

在 Heroku 中，当您选择 python Buildpacks 时，这些变量会自动设置，您可以在您的 dyno 中从 Heroku CLI 运行任何 python 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-27T23:26:04.547

来自作为解决方案提到的[博客文章的](http://tomatohater.com/2012/01/17/custom-django-management-commands-on-heroku/)参考：

> 在 Heroku 上，您的主目录通常是“/app”。您应该通过运行来确认这一点：
> 
> ```
> $ heroku run env | grep HOME
> HOME=/app 
> ```
> 
> 在 Heroku 环境中调整 Python 路径（而不是与应用程序混淆）的一种简单方法是设置 PYTHONPATH env 变量，如下所示：
> 
> ```
> $ heroku config:add PYTHONPATH=/app 
> ```
> 
> 要确认设置正确，请运行：
> 
> ```
> $ heroku run env | grep PYTHONPATH
> PYTHONPATH=/app 
> ```
> 
> 现在您可以运行您的自定义管理命令。这也允许您将这些作为 cron（计划）任务运行：
> 
> ```
> $ heroku run python your_app/manage.py your_custom_command
> Success! 
> ```

请注意，添加（或创建）PythonPath 对大多数 Python 环境都有效，不仅仅是 Heroku，但您需要确定如何为给定的环境添加到它。

一种方法是将`PYTHONPATH`变量添加到本地用户或系统环境。在 Python 文档中阅读有关`PYTHONPATH`、`PYTHONHOME`和其他[Python 相关环境变量的](https://docs.python.org/3.3/using/cmdline.html?highlight=pythonpath#environment-variables)更多信息。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-04-13T01:25:49.610

> 尝试运行 python 时，出现错误 No module named site. 经过一番研究，似乎这是因为这些 PYTHONPATH 和 PYTHONHOME 环境变量设置不正确。

这听起来像是正确的答案。您需要弄清楚这些变量当时具有什么值，它们*应该**具有*什么值，以及您环境中的哪些现有过程*将*这些变量设置为错误的值。

所有这些只能通过检查您的环境来回答，祝您好运:-)

# c# - 从适配器名称获取当前 IP？

> ID：10675320
> 
> 赞同：0
> 
> 时间：2012-05-20T16:51:07.190
> 
> 标签：c#, .net-4.0

我需要按名称从适配器获取当前 IP，我知道如何查找有关该给定适配器的信息，但不知道是否可以使用该信息获取该适配器的 IP：

```
foreach (NetworkInterface adapter in networks)
{
    if (adapter.Name == "DataServer")
        break;
} 
```

适配器被命名为“DataServer”现在我想知道是否有一种方法可以使用该信息来获取适配器所分配的实际 IP 地址，而无需使用互联网，并且我可以确保它已连接到给定的适配器名称。

或者，如果有其他方法可以通过适配器名称获取 IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:58:06.417

称呼

```
adapter.GetIPProperties().UnicastAddresses.Single(a => a.Address.AddressFamily == AddressFamily.InterNetwork).Address 
```

# java - 使用 php 驱动的 web 服务的结果填充 autocompletetextview

> ID：10675325
> 
> 赞同：0
> 
> 时间：2012-05-20T16:51:26.910
> 
> 标签：java, android, android-asynctask, autocompletetextview

我正在尝试开发一个应用程序，它使用来自 web 服务的 json 数据更新自动完成视图。

使用 textwatcher，我签入 ontextchanged 回调并创建一个异步任务对象，该对象对 web 服务进行非阻塞调用以获取结果。输入文本时，任何正在运行的 asynctask 对象都将被取消并生成一个新对象（因为 asynctask 是一种单例，我无法重新运行它）。

然后通过清除其 ArrayAdapter 并添加每个新项目，将结果添加到自动完成视图中。

问题是数据几乎永远不会从服务器中检索到，无论是由于不断取消还是其他原因。

是否有这样做的正确解决方案，或者有没有人成功地完成了这样的任务？

以下是相关的代码片段。文本观察器，

```
public void onTextChanged(CharSequence s, int start, int before, int count) {
    Log.i("Text watcher", suggestsThread.getStatus().toString());
    if(s.length() >= suggestions.getThreshold() && suggestsThread.getStatus() != AsyncTask.Status.RUNNING) {
  suggestsThread.cancel(true);
  suggestsThread = new WertAgentThread();
  suggestsThread.execute(s.toString());
} 
```

}

更新自动完成任务，

```
public void updateSuggestions(String[] suggestions) {
if( suggestions != null) {  
  try {
    for(int ctr = 0; ctr < suggestions.length; ctr++) {
      this.logger.append(suggestions[ctr]);
    }
    suggestAdapter = new ArrayAdapter<String>(this, R.layout.suggestions, suggestions);
    this.suggestions.setAdapter(suggestAdapter);
  } catch(NullPointerException ex) {
    Log.e("Updating adapter", ex.toString());
  }
} 
```

updateSuggestions 在 Asynctask 的 onPostExecute 回调中调用。提前感谢您的帮助，

罗兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:31:56.170

忘记我什至问过这个问题。我发现错误实际上在其他地方，我将 http 超时设置为毫秒而不是秒。常见错误:(。

对于任何试图实现相同目标的人来说，上述方法确实有效。

# symfony - 在 Twig 中自定义渲染来自 Symfony 2 的“重复”字段

> ID：10675329
> 
> 赞同：31
> 
> 时间：2012-05-20T16:52:13.900
> 
> 标签：symfony, twig

我刚开始使用 Twig，我正在尝试构建一个注册表单。要添加密码/重新输入密码字段，我使用“重复”文件类型：

```
->add('password', 'repeated', array(
    'type' => 'password',
    'invalid_message' => 'Passwords have to be equal.',
    'first_name'      => 'Password',
    'second_name'     => 'Re-enter password',
)); 
```

按预期工作。然而，我遇到的问题是我想在我的表单中添加一些自定义类等。所以我的模板看起来像这样：

```
<form action="{{ path('register') }}" method="post" {{ form_enctype(form) }}>
    {{ form_errors(form) }}
    {{ form_errors(form.username) }}
    <div class="form-field">
        {{ form_label(form.username, null, { 'attr': {'class': 'form-label'} }) }}
        {{ form_widget(form.username, { 'attr': {'class': 'form-input'} }) }}
    </div>
    {{ form_errors(form.email) }}
    <div class="form-field">
        {{ form_label(form.email, null, { 'attr': {'class': 'form-label'} }) }}
        {{ form_widget(form.email, { 'attr': {'class': 'form-input'} }) }}
    </div>
    {{ form_errors(form.password) }}
    <div class="form-field">
        {{ form_label(form.password, null, { 'attr': {'class': 'form-label'} }) }}
        {{ form_widget(form.password, { 'attr': {'class': 'form-input'} }) }}
    </div>

    {{ form_rest(form) }}

    <input type="submit" class="contact-submit" />
</form> 
```

除了密码部分之外，这对所有内容都适用。我想在那里分别渲染两个字段，现在它们都在同一个 div 中渲染。

我该如何解决？有没有办法在 Twig 中选择单独的字段？或者我只是做错了什么，因为我首先遇到了这个问题。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-20T17:01:16.330

经过随机猜测，我解决了自己的问题。我会把它贴在这里，以便其他可能通过搜索找到这个问题的人也知道答案：

```
{% for passwordField in form.password %}
    <div class="form-field">
        {{ form_label(passwordField, null, { 'attr': {'class': 'form-label'} }) }}
        {{ form_widget(passwordField, { 'attr': {'class': 'form-input'} }) }}
    </div>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-18T07:22:55.793

如果您想将两个密码字段与树枝模板中的重复方法分开，您只需调用它们各自的名称，例如：

```
{{ form_label(form.password.pass, "Password :") }}
{{ form_widget(form.password.pass) }}

{{ form_label(form.password.confirm, "Confirm :") }}
{{ form_widget(form.password.confirm) }} 
```

当然在你的功能中：

```
/..
->add('password', 'repeated', array(
'first_name' => 'pass',
'second_name' => 'confirm',
'type' => 'password'
)) 
```

问候。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-07-06T10:00:19.887

这对我有用：

```
....
{{ form_errors(form.password.first) }}
<div class="form-field">
    {{ form_label(form.password.first, null, { 'attr': {'class': 'form-label'} }) }}
    {{ form_widget(form.password.first, { 'attr': {'class': 'form-input'} }) }}
</div>

{{ form_errors(form.password.second) }}
<div class="form-field">
    {{ form_label(form.password.second, null, { 'attr': {'class': 'form-label'} }) }}
    {{ form_widget(form.password.second, { 'attr': {'class': 'form-input'} }) }}
</div>
.... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-20T10:47:01.367

如果您使用的是用户包，他们会使用 password.first 和 password.second，最好尝试使用您的分析器来查看哪些变量来自视图和控制器；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T00:54:33.170

如果您想为您的标签和输入提供应用程序范围的类，您可以自定义标签和小部件的呈现方式。检查[http://symfony.com/doc/current/cookbook/form/form_customization.html](http://symfony.com/doc/current/cookbook/form/form_customization.html)

如果您查看此文件：

```
vendor/symfony/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig 
```

您可以查看所有小部件的默认设置。为了具体实现您所需要的，您可以覆盖 generic_label 块以添加表单标签类：

```
{% block generic_label %}
{% spaceless %}
    {% if required %}
        {# We add form-label class in the next line! #}
        {% set attr = attr|merge({'class': attr.class|default('') ~ ' required form-label'}) %}
    {% endif %}
    <label{% for attrname,attrvalue in attr %} {{attrname}}="{{attrvalue}}"{% endfor %}>{{ label|trans }}</label>
{% endspaceless %}
{% endblock %} 
```

和 widget_attributes 块添加表单输入类：

```
{% block widget_attributes %}
{% spaceless %}
    {# We add form-input class in the next line! #}
    {% set attr = attr|merge({'class': attr.class|default('') ~ ' form-input'}) %}
    id="{{ id }}" name="{{ full_name }}"{% if read_only %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }}"{% endif %}
    {% for attrname,attrvalue in attr %}{{attrname}}="{{attrvalue}}" {% endfor %}
{% endspaceless %}
{% endblock widget_attributes %} 
```

使用这两个模板，您的所有输入都应该使用您需要的类进行渲染，而不必在整个表单中重复“attr”参数。

我还没有尝试过，但这应该可以解决重复的字段问题。即使没有，您也可以创建一个重复的小部件和/或重复的行模板来自定义重复小部件的呈现方式，从而为所有使用它的表单修复该小部件。

# html - 有什么方法可以让 HTML Audio 标签在 Firefox 中播放 mp3

> ID：10675332
> 
> 赞同：0
> 
> 时间：2012-05-20T16:52:38.323
> 
> 标签：html, firefox

有什么办法可以让`HTML`Audio 标签`mp3`在`Firefox`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:15:21.033

FF 当前仅支持`ogg`格式，因此您还必须包含 ogg 格式的副本：

```
<audio controls="controls"> 
    <source src="music.ogg" type="audio/ogg" />
    <source src="music.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
</audio> 
```

为了方便起见，请使用旧`object`标签嵌入您的 mp3 文件，如下所示：

```
<object data="music.mp3" type="application/x-mplayer2" width="xxx" height="xxx">
    <param name="filename" value="music.mp3">
</object> 
```

或`embed`用作：

```
<embed type="application/x-mplayer2" src="music.mp3" height="xxx" width="xxx" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:05:17.500

似乎 Firefox 在其音频标签中不支持 .mp3。有关更多详细信息，请参阅此[StackOverflow 帖子](https://stackoverflow.com/questions/4923136/why-doesnt-firefox-support-mp3-file-format-in-audio)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T02:07:21.253

你所要做的就是再等5年，直到剩下的MP3专利到期……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:41:36.857

奇怪的是，firefox 3.6x 和 4.x 完美地播放了 mp3，

```
<EMBED src="music.mp3" autostart=true loop=true volume=100 hidden=true> 
```

在我的 linuxbox 上有两个实例：Firefox 4.0.1 和 Firefox 20.0-> 同一页面在 4.0.1 版本中播放其 mp3，而在 Firefox 20.0 中没有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-29T02:09:38.767

对于那些现在仍在寻找 FF v21（我认为）mp3 和 HTML 5 音频标签的人来说

# android - android存储持久性SharedPreferences vs localstorage

> ID：10675336
> 
> 赞同：0
> 
> 时间：2012-05-20T16:52:48.573
> 
> 标签：android, html, cordova, sencha-touch, extjs

我正在开发一个基于 HTML5 的 webapp，并计划使用 phonegap 或 sencha 将其发布为本机应用程序。

我需要一些东西来存储我的本地应用程序数据 ~2MB（可以是名称值对），但存储需要是持久的，并且不应在手机重启或重置为出厂默认值时删除。

Andriod 中 SharedPreferences 和 localstorage 的范围是什么，用户可以清除它们，或者它们的生命周期是什么，以及它们在什么条件下被清除。

我的另一个问题是关于sqlite，如果用户恢复手机并且用户可以清除sqlite db，andriod backup mgr 是否会备份并恢复它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:03:58.997

SharedPreferences 和 localStorage 只能从原始应用程序访问。localStorage 通常有 5MB 的限制，但并非在所有手机上都有，有些会允许更多。此外，localStorage 仅适用于 API 级别 7。

当用户进入应用程序设置并手动清除数据时，SharedPreferences 和 localStorage 都会被清除。

如果您的 API 级别为 8 或更高，您可以使用外部文件目录，该目录也是应用程序独有的。用户清除此目录中数据的唯一方法是卸载应用程序。您可以像这样获得它的路径：

```
context.getExternalFilesDir(null).getAbsolutePath(); 
```

如果您的 API 级别 < 8，那么您仍然可以使用标准 sdCard 位置进行存储，但在用户卸载应用程序后文件将在那里。

因此，如果 API 最低级别 < 8，最好将 SQLite 数据库存储在外部文件目录或 sdCard 上。

# c - setsockopt(...) 在 Ubuntu 上无法识别 IPPROTO_IP 的 IP_TTL

> ID：10675337
> 
> 赞同：2
> 
> 时间：2012-05-20T16:52:54.010
> 
> 标签：c, sockets

我在 OS X 上编写了一个 traceroute 程序。我正在尝试将它移植到 GNU/Linux。

```
[@osx]
>> sudo bin/traceroute www.google.com

Warning: www.google.com has multiple addresses; using 173.194.69.99
... 
```

为了让它在 GNU/Linux 上编译，我添加了`_GNU_SOURCE`特性测试宏。

```
[@ubuntu]
>> sudo bin/traceroute www.google.com

error setting socket options: Invalid argument 
```

问题在：

```
 85     send_socket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
 86     if(send_socket == -1){
 87        fprintf(stderr, "\ncannot create send socket");
 88        freeaddrinfo(dest_addrinfo_collection);
 89        return EXIT_FAILURE;
 90      }
 91     error = setsockopt(send_socket, IPPROTO_IP, IP_TTL, &ttl, sizeof(int));
 92     if(error != 0){
 93        perror("\nerror setting socket options");
 94        freeaddrinfo(dest_addrinfo_collection);
 95        return EXIT_FAILURE;
 96      } 
```

看起来`setsockopt(...)`无法识别`IP_TTL`为套接字选项。
但是，我将`IP_TTL`其视为`IPPROTO_IP`级别的套接字选项。

我`SOCK_DGRAM`用作我的发送套接字以避免准备我自己的`ICMP`数据包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T18:03:28.933

这就是为什么你应该使用 sizeof(variable) 来代替 sizeof(type)，因为如果类型改变了，你又被搞砸了。强烈建议这样做，不仅在这种情况下，而且在您使用 malloc() 等时也是如此。

```
error = setsockopt(send_socket, IPPROTO_IP, IP_TTL, &ttl, sizeof(ttl)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:30:17.097

我的错误，我的`ttl`变量是无符号短。

```
-    error = setsockopt(send_socket, IPPROTO_IP, IP_TTL, &ttl, sizeof(int));
+    error = setsockopt(send_socket, IPPROTO_IP, IP_TTL, &ttl, sizeof(unsigned short)); 
```

* * *

## 更新

此外，`option_len`对于不同的平台，我必须有所不同。

```
-    error = setsockopt(send_socket, IPPROTO_IP, IP_TTL, &ttl, sizeof(unsigned short));
+#if defined(__APPLE__)
+    error = setsockopt(send_socket, IPPROTO_IP, IP_TTL, &ttl, sizeof(&ttl));
+#elif defined(__linux)
+    error = setsockopt(send_socket, IPPROTO_IP, IP_TTL, &ttl, sizeof(ttl));
+#endif 
```

* * *

## 更新

```
-  unsigned short          ttl = 1;
+  socklen_t               ttl = 1;

-#if defined(__APPLE__)
-    error = setsockopt(send_socket, IPPROTO_IP, IP_TTL, &ttl, sizeof(&ttl));
-#elif defined(__linux)
     error = setsockopt(send_socket, IPPROTO_IP, IP_TTL, &ttl, sizeof(ttl));
-#endif 
```

# javascript - jQuery 可排序边距问题

> ID：10675338
> 
> 赞同：0
> 
> 时间：2012-05-20T16:53:04.650
> 
> 标签：javascript, jquery, jquery-ui, margin, jquery-ui-sortable

我有两个可排序的列表，我可以将第一个列表中的项目添加到第二个列表中。默认行为会从源列表中删除元素，但这不是我想要的（我希望将其复制到目标列表中），因此我进行了一些调整以在源列表中克隆移动的元素之前将其删除。

它有效，但我对克隆元素的边距有奇怪的问题。你自己看：

**这是之前的：**

![在此处输入图像描述](../Images/a2a3128eaca842c95aa17e5cdb5d0ce2.png)

**一些拖动后，出现边距不一致：**

![在此处输入图像描述](../Images/add5144089101e10c72d556bccd5e064.png)

我在这里有一个问题的 jsfiddle：http: [//jsfiddle.net/JNbsX/](http://jsfiddle.net/JNbsX/)

我已经在 Chrome 和 Firefox 上对其进行了测试，这两种浏览器都存在问题。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:18:38.960

不完全确定为什么会发生这种情况，但是`display: list-item;`尽管`display: inline-block;`您的 css.

设置`ul > li`为`li`似乎可以解决问题：http: [//jsfiddle.net/RichardTowers/rZuRt/](http://jsfiddle.net/RichardTowers/rZuRt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T10:06:21.880

您仍然可以使用`display: inline-block`，但您需要在所有项目之前和之后添加空格。

```
$('ul#source').sortable({
    助手：'克隆'，
    连接：'ul#dest'，
    开始：函数（事件，用户界面）{
        $("ul#source > li").eq($(ui.item).index()).after(
            $(ui.item).clone().addClass('clone').show()
        );
        $('.sortable-placeholder').before(' ').after(' '); // 在此处添加空格
    },
    更改：函数（事件，用户界面）{
        $('.sortable-placeholder').before(' ').after(' '); // 在此处添加空格
        ui.item.before(' ').after(' '); // 在此处添加空格
    },
    删除：函数（事件，用户界面）{
        $("ul#source > li").removeClass('clone');
    },
    停止：函数（事件，用户界面）{
        $("ul#source > li.clone").remove();
    },
    占位符：'可排序占位符'，

});

```

# json - 在 php 中使用 if 检查 json 输出状态

> ID：10675340
> 
> 赞同：1
> 
> 时间：2012-05-20T16:53:20.850
> 
> 标签：json, api, cpanel

我正在使用 cPanel xml-api 类，它的 json 输出在创建用户帐户时为我提供了以下信息，

我在这里传递了一个无效的用户名。

我需要的是将输出存储在一个变量中并检查它是否成功，

输出 ：

```
{"result":[{"status":0,"statusmsg":"Sorry, that username is reserved.","rawout":null,"options":null}]} 
```

if($result->status=1) 那么它将打印成功，否则打印失败也可以打印带有失败消息的错误消息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:59:23.683

您需要从`decoding`响应字符串开始转换为 PHP 类型：

```
$result = json_decode($result); 
```

然后，您可以提取第一个结果的状态，就好像它嵌套在数组中一样：

```
$status = $result[0]['status'];
if ($status === 1) {
  echo 'OK';
} 
```

# mongodb - 计算 MongoDB 中的值集

> ID：10675342
> 
> 赞同：1
> 
> 时间：2012-05-20T16:53:32.003
> 
> 标签：mongodb, count, set

我有一个 MongoDB 数据库，其中包含包含用户字段的文档。文件如下所示：

```
{"_id" : ObjectId("4f98a564590f22a8b13e7df0"), "user" : ['pete', 'joe', 'sally'] ... }

{"_id" : ObjectId("4f981426590f22a8b13e6b62"), "user" : ['tim', 'joe', 'sam'] ... } 
```

如何构造一个查询来计算我的数据库中所有用户的集合。对于上述两个文档，查询将返回计数 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:17:22.830

您可以使用[distinct()](http://www.mongodb.org/display/DOCS/Aggregation)函数；它是 MongoDB 提供的用于聚合数据的功能之一：

```
> db.test.insert({ "user": ["pete", "joe", "sally"]})
> db.test.insert({ "user": ["tim", "joe", "sam"]})
> db.test.find()
{ "_id" : ObjectId("4fb933d5e5d47740efd09ae4"), "user" : [ "pete", "joe", "sally" ] }
{ "_id" : ObjectId("4fb933e9e5d47740efd09ae5"), "user" : [ "tim", "joe", "sam" ] }
> db.test.distinct("user")
[ "joe", "pete", "sally", "sam", "tim" ]
> db.test.distinct("user").length
5 
```

# php - 如何在 PHP 中将数组转换为数字？

> ID：10675343
> 
> 赞同：3
> 
> 时间：2012-05-20T16:53:35.553
> 
> 标签：php, arrays, numbers, integer

我想在 PHP 中转换一个大数的数组。

例如，我有一个数组 $array：

```
$array[0] = 10;
$array[1] = 20;
$array[2] = 30;
$array[3] = 40; 
```

我希望这是：

```
$one_large_number = 10203040; 
```

我在某处读到了将数组转换为字符串的方法，但这不允许我执行数学运算，对吗？

那么有人知道如何将数组转换为一个连续数字吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:56:46.193

```
join("", $array); 
```

更多关于它的信息：http: [//www.w3schools.com/php/func_string_join.asp](http://www.w3schools.com/php/func_string_join.asp)

[http://codepad.org/Dv0zdtaJ](http://codepad.org/Dv0zdtaJ) - 活生生的例子。如您所见，您可以使用该数字轻松执行进一步的数学函数:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:03:47.077

尝试[`implode()`](http://php.net/manual/en/function.implode.php)功能为：

```
$array = array(10, 20, 30, 40);
$one_large_number = implode("", $array);
// Output: 10203040 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T17:03:56.490

嗨，您可以使用 implode 它是 join 的别名

```
$array[0] = 10;
$array[1] = 20;
$array[2] = 30;
$array[3] = 40;
$one_large_number = implode('',$array); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T17:04:09.050

为了确保你会得到一个号码：

```
intval(implode('', $array)); 
```

# android - Android - 处理应用程序标题上的按钮点击的良好做法是什么

> ID：10675345
> 
> 赞同：1
> 
> 时间：2012-05-20T16:53:45.827
> 
> 标签：android

我正在开发一个应用程序的标题。标题将有 4 个按钮。每个按钮都会有一个监听器和一些代码将其发送到该按钮的主页。

按钮的 Java 代码将是相同的，所以我想知道我能做些什么，以便我可以将这些代码放在一个地方并在我的所有屏幕中重用它。人们通常如何处理这种情况？我应该/可以创建一个实用程序类并导入它吗？如果我这样做了，那么我该如何处理这样的代码，以便它知道我的意图是什么？

```
 Intent myIntent = new Intent(CurrActivity.this, NextActivity.class);
          CurrActivity.this.startActivity(myIntent); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:01:41.140

嗯，据我所知，操作栏可能会对您有所帮助？

我建议您检查操作栏的良好实现之一。（开源）

> ActionBarSherlock ActionBarSherlock 是一个独立的库，旨在通过单个 API 促进在所有版本的 Android 中使用操作栏设计模式。
> 
> 该库将自动使用 Android 4.0 或更高版本上的本机 ActionBar 实现。对于不包含 ActionBar 的先前版本，基于 Ice Cream Sandwich 源的自定义操作栏实现将自动包裹在布局周围。这使您可以轻松地为 2.x 及更高版本的每个版本的 Android 开发带有操作栏的应用程序。
> 
> 有关详细信息，请参阅[http://actionbarsherlock.com](http://actionbarsherlock.com)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:01:48.503

我能想到的几个选择：-

*   有一个 ActivityBase 类或 FragmentBase 类，您将所有导航逻辑都放入其中，您的所有活动/片段都将从该类中继承，因此共享相同的导航逻辑
*   创建基于 LinearLayout 或 ViewGroup 的自定义视图，将此自定义视图的每个子视图视为导航项，根据您的经验，这可能有点繁重，但绝对是我这些天的做法，有关自定义视图的信息[http ://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

使用这两个选项，您应该查看**包含**标签，该标签将允许您共享定义跨布局导航的 xml。

[http://developer.android.com/resources/articles/layout-tricks-reuse.html](http://developer.android.com/resources/articles/layout-tricks-reuse.html)

希望有帮助。

# javascript - 客户端集群：有人能解释一下这条线的作用吗？

> ID：10675349
> 
> 赞同：2
> 
> 时间：2012-05-20T16:54:23.417
> 
> 标签：javascript, maps, cluster-analysis, marker

以下 JavaScript 函数取自[http://sg.openrice.com/js/en/sdmap.js](http://sg.openrice.com/js/en/sdmap.js) （包含此外部 JS 文件的网页： http: [//sg.openrice.com/singapore/restaurant/advancesearch。 htm?mapType=1](http://sg.openrice.com/singapore/restaurant/advancesearch.htm?mapType=1) ):

```
function showAllMarkers(data, options) {
    var markerGroups = {};
    var getcs = function (lat, lng) {
        return '' + Math.round(lat * 32768) + Math.round(lng * 32768);
    }
    for (var i = 0; i < data.length; i++) {
        if (markerList[data[i].id]) continue;
        if (!(data[i].lat == 0 && data[i]['long'] == 0)) {
            var xy = getcs(data[i].lat, data[i]['long']);
            if (markerGroups[xy]) {
                markerGroups[xy].push(data[i]);
            } else {
                markerGroups[xy] = [data[i]];
            }
        }
    }
    for (var i in markerGroups) {
        updateGroupMarker(markerGroups[i], options);
    }
} 
```

脚本运行后，该函数用于对重叠的标记进行聚类。我完全理解 javascript 语法，但我不明白这一行的作用：

```
return '' + Math.round(lat * 32768) + Math.round(lng * 32768); 
```

乘以 32768 有什么特殊用途吗？谁能给我解释一下？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:20:45.927

该行只是为数组 markerGroups 生成字符串索引（“散列”）的某种方式。您应该从中学到的是“getcs”是一个不具描述性的名称，它使源代码的阅读更加困难，并且您应该给函数起更清晰的名称以使含义清晰。

不管怎样：四舍五入去掉了一些数字。由于作者可能不想剪掉很多位数，因此他必须将 lat/long 乘以足够大的值以减少影响。看起来 32768 或多或少是一个随机选择（它是 2^15，似乎仍然是随机的）。

好的，现在到碰撞：彼此非常接近的两个坐标......说 0.000001,0.000001 和 0.000002,0.000002 将导致生成相同的哈希。然后，作者使用这些散列对具有相同散列的所有标记进行分组。

这是一个非常简单的算法。它接受，如果您有两个标记彼此相邻（例如它们之间的毫米距离），但它只是在哈希值会改变的边界处，算法不会将它们分组。

用更具说明性的话：该算法在您的地图上放置一个网格，网格的每个单元格的大小为 1°/32768 * 1°/32768（赤道上每平方*大约*最多 3,4*3,4 米, 3,4m * 2,2m 在德国/如果坐标系是 WGS84，则在美国/加拿大之间的边界。正方形的大小会因地球上的位置而有很大差异），并且一个网格单元内的每个标记都相同哈希值，因此被组合在一起。

# asp.net - 在下拉列表中创建第一项“--select--”

> ID：10675350
> 
> 赞同：2
> 
> 时间：2012-05-20T16:54:34.140
> 
> 标签：asp.net, vb.net, drop-down-menu

我想让我的下拉列表在第一次加载页面时选择第一个值“--select--”，因为我需要强制用户从列表中选择一个事件。我很模糊，因为我需要在 page_load 执行其他功能来检查复选框启用属性，所以我不确定应该将编码放在哪里，以将空值添加到下拉列表。

我确实在页面加载中放入了以下代码，但没有任何反应，“-select-”也没有出现在下拉列表中。

```
If Not Page.IsPostBack Then

        ddlEventTitle.Items.Insert(0, New ListItem("-select-", String.Empty))

    End If 
```

我应该怎么做才能修改我的编码？

客户端代码：

```
<%@ Page Language="VB" MasterPageFile="~/MasterPageAdmin.master" AutoEventWireup="false" CodeFile="addbooth.aspx.vb" Inherits="addbooth" title="Untitled Page" %>
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>

<asp:Content ID="ContentPlaceHolder2" runat="server" 
contentplaceholderid="ContentPlaceHolder2">

 <table class="style8" cellpadding="3">
 <tr>
 <td class="style9">Add New Booth</td>
 <td>&nbsp;</td>
 </tr>
 <tr>
 <td class="style9">&nbsp;</td>
 <td>&nbsp;</td>
 </tr>
 <tr>
 <td class="style9">Event Title:</td>
 <td>
 <asp:SqlDataSource ID="SqlDataSourceEventTitle" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" SelectCommand="SELECT DISTINCT [eventID], [eventTitle] FROM [eventinfo]">
 </asp:SqlDataSource>
 <asp:DropDownList ID="ddlEventTitle" runat="server" DataSourceID="SqlDataSourceEventTitle" DataTextField="eventTitle" DataValueField="eventID" Width="240px" AutoPostBack="True">
 </asp:DropDownList>
 </td>
 </tr>
 <tr>
 <td class="style9">Booth Alias:</td>
 <td>
 <asp:TextBox ID="txtBoothAlias" runat="server" Width="235px"></asp:TextBox>
 </td>
 </tr>
 <tr>
 <td class="style9"> Booth Type:</td>
 <td>
 <asp:DropDownList ID="ddlBoothType" runat="server" Width="240px" AutoPostBack="True">
 <asp:ListItem Value="7">8&#39;x8&#39;</asp:ListItem>
 <asp:ListItem Value="10">9&#39;x8&#39;</asp:ListItem>
 <asp:ListItem Value="11">12&#39;x50&#39;</asp:ListItem>
 <asp:ListItem Value="12">16&#39;x10&#39;</asp:ListItem>
 <asp:ListItem Value="13">20&#39;x16&#39;</asp:ListItem>
 <asp:ListItem Value="15">32&#39;x10&#39;</asp:ListItem>
 <asp:ListItem Value="17">32&#39;x14.5&#39;</asp:ListItem>
 </asp:DropDownList>
 </td>
 </tr>
 <tr>
 <td class="style10" valign="top" colspan="2">Booth Duration:<br />
 <font size="2">Tick to activate availability</font></td>
 </tr>
 <tr>
 <td class="style10" valign="top" colspan="2" align="center">
 <asp:Panel ID="Panel1" runat="server" Width="328px" Direction="LeftToRight" HorizontalAlign="Center">
 <table cellpadding="5" class="style8">
 <tr>
 <td>
 <asp:CheckBox ID="cbWeek1" runat="server" Text="Week 1" TextAlign="Left" OnCheckedChanged="cbWeek1_CheckedChanged" AutoPostBack="true"/>
  </td>
  <td>
 <asp:CheckBox ID="cbWeek2" runat="server" Text="Week 2" TextAlign="Left" OnCheckedChanged="cbWeek2_CheckedChanged" AutoPostBack="true"/>
   </td>
   <td>
  <asp:CheckBox ID="cbWeek3" runat="server" Text="Week 3" TextAlign="Left" OnCheckedChanged="cbWeek3_CheckedChanged" AutoPostBack="true"/>
   </td>
    <td>
 <asp:CheckBox ID="cbWeek4" runat="server" Text="Week 4" TextAlign="Left" OnCheckedChanged="cbWeek4_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>
                                                                                             <asp:CheckBox ID="cbWeek5" runat="server" Text="Week 5" TextAlign="Left" OnCheckedChanged="cbWeek5_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                                <td>
                                                                                              <asp:CheckBox ID="cbWeek6" runat="server" Text="Week 6" TextAlign="Left" OnCheckedChanged="cbWeek6_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                                <td>
                                                                                              <asp:CheckBox ID="cbWeek7" runat="server" Text="Week 7" TextAlign="Left" OnCheckedChanged="cbWeek7_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                                <td>
                                                                                              <asp:CheckBox ID="cbWeek8" runat="server" Text="Week 8" TextAlign="Left" OnCheckedChanged="cbWeek8_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                            </tr>
                                                                        </table>

  </asp:Panel>
  <asp:RoundedCornersExtender ID="Panel1_RoundedCornersExtender"runat="server" Enabled="True" TargetControlID="Panel1" BorderColor="CadetBlue" Color="ButtonFace">
 </asp:RoundedCornersExtender>
       </td>
       </tr>
       <tr>
        <td class="style11">
         </td>
         <td class="style11">
 <asp:Button ID="ButtonAddNewBooth" runat="server" Text="Add New Booth"  Height="50px" />
 </td>
 </tr>
   <tr>
    <td class="style9"> &nbsp;</td>
     <td>&nbsp;</td>
       </tr>
         <tr>
 <td class="style9" colspan="2">
 <asp:GridView ID="GridViewBoothAdded" runat="server" AutoGenerateColumns="False" CellPadding="4" DataSourceID="SqlDataSourceBoothAdded" Font-Size="Small" ForeColor="#333333" GridLines="None" AllowPaging="True" PageSize="5" Visible="False">
 <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
 <Columns>
  <asp:BoundField DataField="boothAlias" HeaderText="Booth Alias" SortExpression="boothAlias" />
 <asp:BoundField DataField="week1" HeaderText="week1" SortExpression="week1" />
 <asp:BoundField DataField="week2" HeaderText="week2" SortExpression="week2" />
 <asp:BoundField DataField="week3" HeaderText="week3" SortExpression="week3" />
 <asp:BoundField DataField="week4" HeaderText="week4" SortExpression="week4" />
 <asp:BoundField DataField="week5" HeaderText="week5" SortExpression="week5" />
 <asp:BoundField DataField="week6" HeaderText="week6" SortExpression="week6" />
 <asp:BoundField DataField="week7" HeaderText="week7" SortExpression="week7" />
 <asp:BoundField DataField="week8" HeaderText="week8" SortExpression="week8" />
  </Columns>
  <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
  <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
  <EmptyDataTemplate>
        No booth record
  </EmptyDataTemplate>
  <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
  <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" Font-Size="Small" ForeColor="White" />
  <EditRowStyle BackColor="#999999" />
  <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
   </asp:GridView>
   <asp:RoundedCornersExtender ID="GridViewBoothAdded_RoundedCornersExtender" runat="server" Enabled="True" TargetControlID="GridViewBoothAdded">
    </asp:RoundedCornersExtender>
    <asp:SqlDataSource ID="SqlDataSourceBoothAdded" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
    SelectCommand="SELECT [week1], [week2], [week3], [week4], [week5], [week6], [week7], [week8], [eventID], [boothAlias], [eventTitle] FROM [booth_eventinfo] WHERE ([eventID] = @eventID)">
   <SelectParameters>
    <asp:ControlParameter ControlID="ddlEventTitle" Name="eventID" PropertyName="SelectedValue" Type="Int32" />
   </SelectParameters>
   </asp:SqlDataSource>
                                                                </td>
                                                            </tr>
   </table> 
```

服务器代码：

```
Imports System
Imports System.Data
Imports System.Data.SqlClient
Imports System.Threading
Imports System.Object
Partial Class addbooth
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Not Page.IsPostBack Then

        ddlEventTitle.Items.Insert(0, New ListItem("-select-", String.Empty))

    End If

    Dim eventID As String = ddlEventTitle.SelectedValue
    Dim connString As String = ConfigurationManager.ConnectionStrings("ConnectionString1").ConnectionString
    ' Dim connString As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\CikguTube3.mdf;Integrated Security=True;User Instance=True"
    Dim con As SqlConnection = New SqlConnection(connString)

    Dim cmdQuery As String = "SELECT * FROM eventinfo WHERE eventID = '" + eventID + "'"
    Dim cmd As SqlCommand = New SqlCommand(cmdQuery)
    Dim myReader As SqlDataReader

    cmd.Connection = con
    cmd.CommandType = CommandType.Text
    con.Open()

    myReader = cmd.ExecuteReader()

    While myReader.Read()

        Label1.Text = myReader("totalDay").ToString()

    End While

    myReader.Close()

    cmd.ExecuteNonQuery()
    cmd.Parameters.Clear()
    con.Close()

    If Label1.Text = "7" Then
        cbWeek1.Enabled = True
        cbWeek2.Enabled = False
        cbWeek3.Enabled = False
        cbWeek4.Enabled = False
        cbWeek5.Enabled = False
        cbWeek6.Enabled = False
        cbWeek7.Enabled = False
        cbWeek8.Enabled = False

    ElseIf Label1.Text = "14" Then

        cbWeek1.Enabled = True
        cbWeek2.Enabled = True
        cbWeek3.Enabled = False
        cbWeek4.Enabled = False
        cbWeek5.Enabled = False
        cbWeek6.Enabled = False
        cbWeek7.Enabled = False
        cbWeek8.Enabled = False

    End If

End Sub

Protected Sub ButtonAddNewBooth_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ButtonAddNewBooth.Click

    Dim connString As String = ConfigurationManager.ConnectionStrings("ConnectionString1").ConnectionString
    '"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\eventdb.mdf;Integrated Security=True;User Instance=True"
    Dim con As SqlConnection = New SqlConnection(connString)

    Dim cmdQuery As String = "INSERT INTO booth(eventID,boothAlias,boothType,week1,week2,week3,week4,week5,week6,week7,week8) VALUES (@eventID,@boothAlias,@boothType,@week1,@week2,@week3,@week4,@week5,@week6,@week7,@week8)"

    Dim cmd = New SqlCommand(cmdQuery)
    cmd.Connection = con
    cmd.CommandType = CommandType.Text
    con.Open()
    cmd.Parameters.AddWithValue("@eventID", ddlEventTitle.SelectedValue)
    cmd.Parameters.AddWithValue("@boothAlias", txtBoothAlias.Text)
    cmd.Parameters.AddWithValue("@boothType", ddlBoothType.SelectedValue)

    If (cbWeek1.Checked = True) Then
        cmd.Parameters.AddWithValue("@week1", "1")
    Else
        cmd.Parameters.AddWithValue("@week1", "0")
    End If

    If (cbWeek2.Checked = True) Then
        cmd.Parameters.AddWithValue("@week2", "1")
    Else
        cmd.Parameters.AddWithValue("@week2", "0")
    End If

    If (cbWeek3.Checked = True) Then
        cmd.Parameters.AddWithValue("@week3", "1")
    Else
        cmd.Parameters.AddWithValue("@week3", "0")
    End If

    If (cbWeek4.Checked = True) Then
        cmd.Parameters.AddWithValue("@week4", "1")
    Else
        cmd.Parameters.AddWithValue("@week4", "0")
    End If

    If (cbWeek5.Checked = True) Then
        cmd.Parameters.AddWithValue("@week5", "1")
    Else
        cmd.Parameters.AddWithValue("@week5", "0")
    End If

    If (cbWeek6.Checked = True) Then
        cmd.Parameters.AddWithValue("@week6", "1")
    Else
        cmd.Parameters.AddWithValue("@week6", "0")
    End If

    If (cbWeek7.Checked = True) Then
        cmd.Parameters.AddWithValue("@week7", "1")
    Else
        cmd.Parameters.AddWithValue("@week7", "0")
    End If

    If (cbWeek8.Checked = True) Then
        cmd.Parameters.AddWithValue("@week8", "1")
    Else
        cmd.Parameters.AddWithValue("@week8", "0")
    End If

    GridViewBoothAdded.DataBind()

    cmd.ExecuteNonQuery()
    cmd.Parameters.Clear()
    con.Close()

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:23:52.660

我不喜欢编写这样的代码。就我个人而言，我不喜欢将与数据库相关的信息和查询保存在 aspx 文件中。我会将该代码移动到代码隐藏文件中的函数中。

所以我会像这样更新我的 UI（.aspx 文件）。只是简单的下拉列表声明

```
<asp:DropDownList ID="ddlEventTitle" runat="server"></asp:DropDownList> 
```

在你后面的代码中，写一个这样的方法

```
Private Sub LoadEvents()

    Dim cmdString As String = "SELECT DISTINCT eventID, eventTitle FROM eventinfo"
    Dim connStr As String = "Data Source=Localhost\SQLEXPRESS;Initial Catalog=Flash2;Integrated Security=True;"
    Using conn As New SqlConnection(connStr)
        conn.Open()
        Using cmd As New SqlCommand(cmdString, conn)
            Dim rdr As SqlDataReader = cmd.ExecuteReader()
            ddlEventTitle.DataValueField = "eventID"
            ddlEventTitle.DataTextField = "eventTitle"
            ddlEventTitle.DataSource = rdr
            ddlEventTitle.DataBind()
            ddlEventTitle.Items.Insert(0, New ListItem("Select Event", "0"))
        End Using
    End Using

End Sub 
```

现在在页面加载事件中调用此方法

```
Protected Sub Page_Load(sender As Object, e As EventArgs)
    If Not IsPostBack Then
        LoadFromDataReader()
    End If
End Sub 
```

这应该会为您带来带有事件的下拉列表，其中第一个元素“选择事件”的值为“0”。

# php - 在 PHP 上加载新表单时如何维护包含引用？

> ID：10675354
> 
> 赞同：3
> 
> 时间：2012-05-20T16:55:10.770
> 
> 标签：php, html

首先，我真的很抱歉，因为我的问题并没有清楚地解释我想要做什么。我希望我的英语更好。

也就是说，解释：

我有一个名为“index.php”的网络表单。在它上面我包含了一些“参考路径”（我称之为），它们是：

```
<script>jqueryUI</script>
<?php include_once('a path.php'); ?>
<link href="<'my.css' rel="stylesheet" type="text/css" /> 
```

在我看来，它们都是内含物。

我还有另一个表单，比如说“popup.php”，当我单击 index.php 上的链接时应该加载它。

我需要做的是，新的 popup.php 在加载时自动“继承”这些包含路径（我称之为它们）。换句话说，由于不兼容问题，我不想将这些文件包含两次。

怎么做？

如果您不理解我的问题，请让我知道，这样我可以想另一种方式来解释它。

提前，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:09:14.207

据我所知，没有简单的方法可以完成您在 PHP 中提出的要求。但是，将所有此类包含在单独的文件“include.php”中可能是一种解决方案。然后只需将其包含在每个文档的开头即可。

# java - JPA 2 中的复合外键和 DDL 生成

> ID：10675358
> 
> 赞同：0
> 
> 时间：2012-05-20T16:55:49.630
> 
> 标签：java, foreign-keys, jpa-2.0, composite-primary-key

我正在尝试使用外部复合键创建一个类，并且一切正常，除了 DDL 生成没有按预期创建索引。

我会用一些代码更好地解释；我试图实现的代码部分是功能区奖励：a`User`可以有很多`Ribbon`s，a`Ribbon`可以有很多`User`s（多对多）。

`Ribbon`班级：

```
@Entity
@Table(name = "ribbon")
public class Ribbon
{
    @AttributeOverrides({
            @AttributeOverride(
                    name = "id",
                    column = @Column(name = "id", nullable = false, length = 4)
            ),
            @AttributeOverride(
                    name = "level",
                    column = @Column(name = "level", nullable = false)
            )
    })
    @EmbeddedId
    RibbonId id;

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true, mappedBy = "ribbon")
    private Set<UserHasRibbon> userHasRibbonSet;

    // ...
} 
```

`RibbonId`班级：

```
@Embeddable
public class RibbonId implements Serializable
{
    public int id;

    @Enumerated(EnumType.STRING)
    public UserLevel level;

    @Override
    public boolean equals(Object o)
    {
        // ...
    }

    @Override
    public int hashCode()
    {
        // ...
    }
} 
```

`UserHasRibbon`班级：

```
@Entity
@Table(name = "user_has_ribbon")
public class UserHasRibbon
{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id", nullable = false, length = 16)
    private int id;

    @ManyToOne(optional = false)
    @JoinColumn(name = "user_id", nullable = false)
    private User user;

    @ManyToOne(optional = false)
    @JoinColumns({
            @JoinColumn(name="ribbon_id", referencedColumnName="id", nullable = false),
            @JoinColumn(name="ribbon_level", referencedColumnName="level", nullable = false)
    })
    private Ribbon ribbon;

    @Column(name = "earned_date", nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Date earnedDate;

    // ...
} 
```

这非常简单，一切都运行良好。唯一的问题是我注意到自动 DDL 生成没有在`user_has_ribbon`表中创建索引：

*   `ribbon_id`有索引但未链接到`ribbon`.`id`
*   `ribbon_level`根本没有索引
*   `user_id`是正确的，有一个链接到的索引`user`。`id`

我知道应该为生产禁用 DDL 生成，我只是想知道为什么它的行为不符合预期。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:23:16.890

我刚刚意识到 JPA**确实**在两列 (`ribbon_id`和`ribbon_level`) 上创建了一个复合索引，并且工作正常。我很困惑，因为 phpMyAdmin 在涉及复合索引时无法正确显示关系...

# android - 触摸屏手势列表和名称

> ID：10675359
> 
> 赞同：29
> 
> 时间：2012-05-20T16:55:51.340
> 
> 标签：android, c++, ios, ipad, gesture

我在哪里可以找到所有（许多）触摸屏手势的列表，包括适用于 iPad 的复杂 4 指和 5 指手势，以及合理的技术实施指南和代码（C++/Java）示例？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-21T08:43:54.897

经过两天的搜索，我找到了这些链接：

[http://en.wikipedia.org/wiki/Multi-touch#Multi-touch_gestures](http://en.wikipedia.org/wiki/Multi-touch#Multi-touch_gestures) - 简单的手势

[http://blogs.computerworld.com/18672/the_lion_multitouch_gesture_guide](http://blogs.computerworld.com/18672/the_lion_multitouch_gesture_guide) - Apple 设备上更复杂的多指手势

[http://medialoot.com/item/40-vector-multitouch-gestures](http://medialoot.com/item/40-vector-multitouch-gestures/) - 40 种多点触控手势

不幸的是，在苹果的手势专利中没有发现任何可用的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T08:29:16.557

这些链接可能有用：

[http://www.codeproject.com/Articles/27354/Implementing-Mouse-Gestures-in-Java-Swing-Step-by](http://www.codeproject.com/Articles/27354/Implementing-Mouse-Gestures-in-Java-Swing-Step-by)

[http://www.igesture.org/impl_gesturerepresentation.html](http://www.igesture.org/impl_gesturerepresentation.html)

[http://britg.com/2011/05/14/complex-gesture-recognition-in-ios-part-1-the-research](http://britg.com/2011/05/14/complex-gesture-recognition-in-ios-part-1-the-research)

带有手势的图片：http: [//graffletopia.com/stencils/432](http://graffletopia.com/stencils/432)

Apple 的描述和视频参考：http: [//www.apple.com/osx/what-is/gestures.html](http://www.apple.com/osx/what-is/gestures.html)

Dan Rodney 的 MacOS X 多点触控手势列表：[http ://www.danrodney.com/mac/multitouch.html](http://www.danrodney.com/mac/multitouch.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T06:07:55.013

尽管这可能无济于事，但您可以查看以下内容： [Gesture Coder: A Tool for Programming Multi-Touch Gestures by Demonstration](http://yangl.org/pdf/gcoder.pdf)

有一个教程将 iOS 开发人员指南中的这些文章连接起来：[An iPhone iOS 5 Gesture Recognition Tutorial](http://www.techotopia.com/index.php/An_iPhone_iOS_5_Gesture_Recognition_Tutorial)

* * *

这些是 iOS 开发者库中的相关文章。

*   [事件处理指南](https://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html#//apple_ref/doc/uid/TP40009541-CH3-SW1)：
    *   [UIGestureRecognizer](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009279)
        *   [UITapGestureRecognizer](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITapGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UITapGestureRecognizer)
        *   [UIPinchGestureRecognizer](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIPinchGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIPinchGestureRecognizer)
        *   [UIRotationGestureRecognizer](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIRotateGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIRotationGestureRecognizer)
        *   [UISwipeGestureRecognizer](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UISwipeGestureRecognizer)
        *   [UIPanGestureRecognizer](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIPanGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIPanGestureRecognizer)
        *   [UILongPressGestureRecognizer](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILongPressGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UILongPressGestureRecognizer)

# r - R中的UTF-8文件输出

> ID：10675360
> 
> 赞同：13
> 
> 时间：2012-05-20T16:56:06.260
> 
> 标签：r, unicode, cjk

我在 Windows 7 64 位上使用 R 2.15.0。我想将 unicode (CJK) 文本输出到文件中。

以下代码显示了发送以写入 UTF-8 文件连接的 Unicode 字符如何无法按 (I) 预期工作：

```
rty <- file("test.txt",encoding="UTF-8")
write("在", file=rty)
close(rty)
rty <- file("test.txt",encoding="UTF-8")
scan(rty,what=character())
close(rty) 
```

如scan的输出所示：

```
Read 1 item 
[1] "<U+5728>" 
```

该文件不是用 UTF 字符本身编写的，而是某种符合 ANSI 的回退。我可以让它第一次正常工作（即使用一个包含“在”的文本文件），还是我可以使用一些额外的魔法将输出转换为 Unicode，并用正确的字符替换代码字符串？

谢谢。

[更多信息：相同的代码在 Cygwin，R 2.14.2 中*正常运行，而 Win7 上的 2.14.2 也被破坏。*这是在我的尽头吗？]

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-08-26T13:25:42.480

**问题是**由于一些**R-Windows 特殊行为**（使用默认系统编码/或使用一些系统写入函数；我不知道具体情况，但行为实际上是已知的）

要在 Windows 上编写文本 UTF8 编码，必须使用`useBytes=T`writeLines 或 readLines 等函数中的选项：

```
txt <- "在"
writeLines(txt, "test.txt", useBytes=T)

readLines("test.txt", encoding="UTF-8")
[1] "在" 
```

[在这里可以找到Kevin Ushey](https://stackoverflow.com/users/1342082/kevin-ushey)写的一篇非常好的文章： [http](http://kevinushey.github.io/blog/2018/02/21/string-encoding-and-r/) : //kevinushey.github.io/blog/2018/02/21/string-encoding-and-r/更详细。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-05T15:11:58.160

在文本文件中保存 UTF-8 字符串：

```
kLogFileName <- "parser.log"
log <- function(msg="") {
  con <- file(kLogFileName, "a")
  tryCatch({
    cat(iconv(msg, to="UTF-8"), file=con, sep="\n")
  },
  finally = {
    close(con)
  })
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-30T14:23:58.110

对于以后遇到此问题的任何人，请参阅`stringi`包（[https://cran.r-project.org/web/packages/stringi/index.html](https://cran.r-project.org/web/packages/stringi/index.html)）。它包括许多函数来在 R 中启用一致的、跨平台的 UTF-8 字符串支持。与这个线程最相关的是`stri_read_lines()`，`stri_read_raw()`、 和`stri_write_lines()`函数可以一致地输入/输出 UTF-8，即使在 Windows 上也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T21:31:45.170

我认为您遇到了问题，因为`write`它的构造是使用对象的*名称*，而您似乎没有构建这样的命名对象。试试这个：

```
txt <- "在"
rty <- file("test.txt",encoding="UTF-8")
write(txt, file=rty)
close(rty)
rty <- file("test.txt",encoding="UTF-8")
 inp <- scan(rty,what=character())
#Read 1 item
 close(rty)
 inp
#[1] "在" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T10:41:13.857

我对来自 DB 的 UTF-8 字符串有这样的问题。

我发现正确保存它们的唯一方法是以二进制模式保存文件。

```
 F <- file(file.name, "wb")
  tryCatch({
    writeBin(charToRaw(the_utf8_str), F)
  },
  finally = { 
    close(F)
  }) 
```

# jquery - jQuery 不能在 IE 中工作 AHHH？

> ID：10675361
> 
> 赞同：4
> 
> 时间：2012-05-20T16:56:18.347
> 
> 标签：jquery, internet-explorer

我为客户制作的网站在这里：http: [//vicewebdesign.com/resonantlight_com/](http://vicewebdesign.com/resonantlight_com/)

它在 chrome 和 firefox 中完美运行，但在 IE 中没有插件（jquery）工作，有 3 个 diff jquery 插件，主页 hre 有一个 nivo 滑块在 IE 中不起作用：http: [//vicewebdesign.com/resonantlight_com/](http://vicewebdesign.com/resonantlight_com/)

此页面上的 tabify 插件在 IE 中不起作用：http://vicewebdesign.com/resonantlight_com/perl

并且在同一页面上，quovolver 插件无法正常工作。

我已经搜索了很多，我找到的所有分析器都是特定于插件的，我的问题是我的 jquery 没有工作。我尝试了 diff 库代码脚本，例如不同版本以及所有和最新版本。但没有任何工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:09:54.803

问题是 IE9 现在正在遵守标准，这给试图规避 IE9 之前的问题的插件带来了问题。

一种可能的解决方案是使用此元标记强制 IE9 进入 IE8 标准模式：

```
 <meta http-equiv="X-UA-Compatible" content="IE=8"></meta> 
```

另一种选择是修复代码：

大多数 UI 插件驻留在`$.browser.msie`检查我们是否在 IE 中，但它们不检查版本。在我的情况下，解决方案（jquery.ui.checkbox.js）是`$.browser.msie`用这个变量替换所有调用：

```
var isIEAndVersionIsLowerThan9 = $.browser.msie && (parseInt($.browser.version, 10) < 9); 
```

此解决方案比添加元标记更好，因为它将启用所有 IE9 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:33:21.753

试试这个，这会奏效

```
<meta http-equiv="X-UA-Compatible" content="IE=8"></meta> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T11:40:18.037

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>jQuery from Microsoft AJAX CDN</title>
    </head>
    <body>

        <button id="btn">Show Message</button>

        <div id="message" style="display:none">

            <h1>Hello from jQuery!</h1>

        </div>

        <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.min.js"></script>
        <script>
            // Fallback to loading jQuery from a local path if the CDN is unavailable
            (window.jQuery || document.write('<script src="/scripts/jquery-1.9.0.min.js"><\/script>'));
        </script>
        <script>

            function domReady() {
                $('#btn').click( showMessage );
            }

            function showMessage() {
                $('#message').fadeIn('slow');
            }

            $( domReady );

        </script>
    </body>
</html> 
```

# css - 如何使用 Gzip 文件作为链接

> ID：10675362
> 
> 赞同：4
> 
> 时间：2012-05-20T16:56:19.633
> 
> 标签：css, gzip

我只是压缩了我的 css 文件，现在我无法理解如何将它用作外部 css 文件，因为它最后有一个 .gz 而不是 .css 这是链接 files.cryoffalcon.com/bloghuts/Compressed/ BlogHuts%20COMPRESSED%20CSS.css.gz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:08:14.550

有很多方法可以向用户发送压缩的 css 文件而不是整个文档，您可以通过简单的 Google 搜索找到答案。

[http://www.fiftyfoureleven.com/weblog/web-development/css/the-definitive-css-gzip-method](http://www.fiftyfoureleven.com/weblog/web-development/css/the-definitive-css-gzip-method)

# computer-science - 两个确定性有限自动机的并集？

> ID：10675368
> 
> 赞同：0
> 
> 时间：2012-05-20T16:57:08.290
> 
> 标签：computer-science, finite-automata

我正在尝试解决一个问题，我必须为两种语言的联合创建一个 DFA。

它们是： {s 是 {a, b, c}*| s 中的每个 "a" 后面紧跟一个 "b"} 和

{ s 是 {a, b, c}*| s 中的每个 "c" 前面都紧跟着一个 "b"}

我认为我在正确的轨道上，但不确定它是否完全正确。有人可以看看吗？

![](../Images/c99684a56f12bf756383565ee5d615dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:59:10.270

这是一篇类似[的文章](https://stackoverflow.com/q/4449950/844882)，解释了如何找到两个 DFA 的并集。

要理解的关键是您必须同时运行两个 DFA，或者通常您必须在联合 DFA 中维护两个 DFA 的状态。

* * *

编辑：

您得到不正确结果的原因是因为**您的 DFA 不是确定性的**，并且因为它们实际上并不能决定您描述的语言。我认为您对联盟的计算是正确的，但您应该在继续之前修复您的 DFA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:07:37.770

两种语言的交集由`L1 ∩ L2 = not(not(L1) ∪ not(L2))`（根据德摩根定律）给出。

DFA的补码 ( `"not"`) 是通过将所有接受状态更改为不接受来给出的，反之亦然。这将为您提供一个非确定性有限自动机 (NFA)。

联合是通过将您的两个 DFA 或 NFA 组合成一个同时接受两种语言的新 NFA 来创建的。这是通过引入一个启动状态来完成的，您可以从该状态进入两个 NFA 的启动状态，而无需消耗任何东西（仅消耗 ε）。

完成所有这些后，您就获得了 NFA。您可以使用常用方法将其简化为 DFA。

# hibernate - Hibernate - 将通用对象保存到数据库的问题

> ID：10675376
> 
> 赞同：1
> 
> 时间：2012-05-20T16:58:55.597
> 
> 标签：hibernate

我有以下使用 Hibernate 将对象保存到数据库的方法，但保存时我不断收到“org.hibernate.MappingException：未知实体：java.lang.Class”错误。

```
System.out.println("transientInstance:" + transientInstance);
System.out.println("transientInstance:" + transientInstance.getClass());  
getSession().save(transientInstance);  

System.out.println statements are printing below information.
transientInstance:class com.mypkg.pojo.Details
transientInstance:class java.lang.Class 
```

请问有什么问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:27:56.017

您正在尝试存储一个`java.lang.Class`对象，而不是一个实体实例。`transientInstance`不是实体实例。是`com.mypkg.pojo.Details.class`。

错误出现在您未显示的代码中，在调用`save()`.

# javascript - 递归获取第一个空选择框

> ID：10675378
> 
> 赞同：1
> 
> 时间：2012-05-20T16:58:59.787
> 
> 标签：javascript, jquery

我的文档中有多个`select`框，其中一些是通过页面加载加载的，其中一些是动态创建的。例如：

```
<select>
    <option>select one</option>
</select>

<select></select>

<select>
    <option>select two</option>
</select>

<select>
    <option>select three</option>
</select>

<select>
</select> 
```

还有更多是动态创建的，有些是用的，有些是空的。

我想`select`在页面加载时获得其中的第一个空框，然后再次单击一个按钮想要***从我得到的最后一个***`select`空框中获取第一个空框并继续此操作，直到不再存在这样的框为止。**`select`**

 **### 注意*最后一个意味着*，

如果我`select`从第一个获得第一个空框，则`button`单击搜索将从该`select`框开始并继续直到再次获得空框`select`，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:01:02.560

试试这个：

```
$('select:empty:first'); 
```

但要注意的是，上面的选择器只有在你的`select`盒子像         

```
<select></select> // even without any newline 
```

因为`:empty`没有子元素的点元素，而不是带有换行符或文本节点的事件。

所以如果你`select`看起来像：       

```
<select>
</select> 
```

上面的选择器将失败。要获得`select` 两种类型，您可以使用

```
$('select').filter(function() {
  return !this.innerHTML.replace(/\s/g,'').length;
}).first(); 
```

或如@gdoron 提到的

```
$('select').filter(function() {
  return !$.trim(this.innerHTML);
}).first(); 
```

在我的选择中，第二个是可靠的。

```
// solution to your recursive search

$('select')
    .filter(function() { // filtering for empty select
        return !this.innerHTML.replace(/\s/g,'').length;
     })
    .first() // taking the first
    .addClass('lastIndentified'); // adding a class to keep track

$('button#search').on('click', function() {
  // reference for last empty select
  var lastIndentified = $('select.lastIndentified');

  lastIndentified
      .nextAll('select') // searching for all select
      .filter(function() { // making filtering
           return !this.innerHTML.replace(/\s/g,'').length;
      })
      .first() // taking first one from lastIndetified
      .addClass('lastIndentified');
    lastIndentified.removeClass('lastIndentified'); // remove class from last empty select and pass it to new empty select

    // for example
    // calling function to process with last empty select
    processWithLastEmptySelect($('select.lastIndentified'));
});

function processWithLastEmptySelect(lastSelect) {
   // your code if needed
   lastSelect.css('border', '1px solid green');
} 
```

**[工作演示](http://jsfiddle.net/thecodeparadox/QStkd/48/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T17:10:29.050

正如@thecodeparadox 已经回答你的那样，这是一个有效的选项：

```
$('select:empty:first') 
```

但是`:empty` 只选择没有任何子节点的元素，包括**textnodes**，所以

```
<select> </select>
        ^------------------text node 
```

或者

```
<select> <--------- text node
</select> 
```

不为空，`:empty`选择器不会抓取它们。

如果您有其中之一，则可以使用此选择器：

```
// Select the first <select> that doesn't have an option as a child.
$('select:not(:has(option))').first().... 
```

* * *

`jQuery(':empty')` [**文档**](http://api.jquery.com/empty-selector/)

> **描述**：选择所有没有子元素的元素（**包括文本节点**）。**

# c# - 数据库在 EditorTemplate 中填充 DropDownList

> ID：10675381
> 
> 赞同：0
> 
> 时间：2012-05-20T16:59:21.657
> 
> 标签：c#, .net, asp.net-mvc-3, drop-down-menu

我有一个包含动态交易数量的导入页面。对于每笔交易，我都有几个纯文本数据标签和一个 DropDownList（类别）。我试图通过将类别模型作为附加视图数据传递给我的 EditorTemplate，`Category`用我的 ViewModel () 中的数据填充这个 DropDownList 。`Categories`

当我使用下面的示例时，我在 EditorTemplate 页面上收到以下错误：编译器错误消息：CS0411：方法的类型参数 'System.Web.Mvc.Html.SelectExtensions.DropDownListFor(System.Web.Mvc.HtmlHelper, System .Linq.Expressions.Expression>, System.Collections.Generic.IEnumerable)' 无法从用法中推断出来。尝试明确指定类型参数。

有想法该怎么解决这个吗？

视图模型：

```
public class ImportViewModel
{
    public List<AbnAmroTransaction> AbnAmroTransactions { get; set; }
    public IEnumerable<SelectListItem> Categories { get; set; }
} 
```

模型：

```
public class AbnAmroTransaction
{
    public string Currency { get; set; }
    public int DateTime { get; set; }
    public string Description { get; set; }
    public int CategoryId { get; set; }
} 
```

形式：

```
@using (Html.BeginForm("ImportPreview", "Home", FormMethod.Post))
{
    <table>
    @Html.EditorFor(m => m.AbnAmroTransactions, new { Categories = Model.Categories });
    </table>
    <input id="btnSave" type="submit" value="Save data" />
} 
```

编辑器模板：

```
<tr>
    <td style="width: 80px;">
        @Html.Raw(CurrencyHelper.GetHtmlCurrency(Model.Currency, Model.Amount))
    </td>
    <td>@Model.DateTime</td>
    <td>@Model.Description</td>
    <td>@Html.DropDownListFor(Model.CategoryId, ViewData["Categories"])</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:19:25.123

您可以将类别作为附加视图数据提供给编辑器，例如

```
@Html.EditorFor(m => m.AbnAmroTransactions, {Categories = Model.Categories}); 
```

但请注意这意味着您必须在使用该编辑器的任何地方都这样做。

使用编辑器可能会更好，您可以在其中将类别与模型表达式一起传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:33:19.893

它的类型不是太强，但是在您的控制器中，您可以填充类别列表并将其放置在 ViewBag 中。然后你可以在你可能拥有的每个事务中使用它，并且它只存储在内存中一次。

如果您将类别集合放在列表中的每个事务中，您可以多次使用它。

# android - Android - 如何从内存手机访问 sqlite 数据库？

> ID：10675384
> 
> 赞同：1
> 
> 时间：2012-05-20T16:59:33.943
> 
> 标签：android, sqlite, root

我创建了一个使用 Eclipse + ADT 读取和写入 sqlite db 的应用程序，它在 Android 终端模拟器上运行良好，但是，从手机本身运行，它不会从 db 填充 Spinner，这意味着它没有找到db 在内部存储器中，我已经用 adb shell 检查了 db 是否在手机上并且它在那里，所以我想我需要授予应用程序 root 权限以允许它使用 db，我该怎么做？我的手机是摩托罗拉 Defy，它已经植根，谢谢，祝你有美好的一天。

编辑：这是我创建表并添加方法 onCreate 和 onUpdate 的类：

```
public class passwordSQLiteHelper extends SQLiteOpenHelper{

String SqlCreate = "CREATE TABLE password(id INTEGER, name TEXT, password TEXT)";

public passwordSQLiteHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL(SqlCreate);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS password");
    db.execSQL(SqlCreate);

}

} 
```

当活动开始时，我从主类调用它：

```
passwordSQLiteHelper passUserDb = new passwordSQLiteHelper(this, "/data/data/com.project.otto/databases/password", null, 1); 
```

在终端上效果很好，但在手机上似乎找不到数据库，我用 adb 查了一下，它就在那里，请帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:16:45.050

首先，我不会在构造函数中指定数据库的完整路径。只是文件名应该没问题（因为 Android 会自动在您的应用程序私有数据区域中创建它）。

```
public PasswordDatabase(Context context {
    super(context, "password.db", null, 1);
} 
```

并通过以下方式创建它：

```
PasswordDatabase db = new PasswordDatabase(this); 
```

如果您查看[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#SQLiteOpenHelper%28android.content.Context,%20java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory,%20int%29)`getReadableDatabase()`的文档，它会声明在调用或调用之前不会创建数据库`getWriteableDatabase()`。所以，我会尝试调用其中一种方法，然后检查数据库是否已创建。

# vnc - 使用多台显示器全屏运行 VNC

> ID：10675386
> 
> 赞同：9
> 
> 时间：2012-05-20T16:59:54.380
> 
> 标签：vnc, monitors

我正在使用 VNC（客户端上的tigervnc-1.1.0，服务器上的 RealVNC-4.1.2）连接到远程系统。客户端系统有两个使用 Nvidia twinview 的显示器，有效分辨率为 3200x1200。

当我告诉 vncviewer 使用全屏时，远程系统窗口 (1600x1200) 位于两台显示器的中心，两侧都有大的黑色空间。我还尝试在客户端系统上运行 Xinerama 而不是 twinview，但这没有任何区别。

有没有办法在全屏模式下运行 vncviewer，没有 VNC 框架，但将其限制为单个监视器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-26T19:00:20.067

**是**的。获取更新版本的 Tigervnc（1.3.0 或更高版本）。或者使用 Realvnc（不幸的是，它是专有的，因此不包含在大多数 GNU/Linux 发行版中）。

这个错误跟踪器 [http://sourceforge.net/p/tigervnc/feature-request-tracker/37/](http://sourceforge.net/p/tigervnc/feature-request-tracker/37/) 暗示它已在更新的tigervnc 版本中得到修复。

此外，Cameron Ton 的最佳回答并没有完全回答这个问题：Tigervnc 客户端在原始问题中没有询问“专家”选项卡（*Realvnc 客户端**中*有这样一个选项卡，在我的版本中（5.1.0 ) 没有参数 UseAllMonitors，但全屏选项仅出现在一个监视器上）。（道歉：我会直接评论他的答案，但显然这需要更多的声誉，而不是写一个答案）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T23:01:39.973

有没有办法在全屏模式下运行 vncviewer，没有 VNC 框架，但将其限制为单个监视器？

**是**的。转到选项 -> 专家选项卡并将 UseAllMonitors 设置为 False。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-07T10:25:59.117

我正在使用 TigerVNC 1.7.1（32 位）。

```
启动查看器。
按 F8
选择选项。
选择屏幕选项卡。
选中/取消选中在所有显示器上启用全屏模式。

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T17:07:46.897

从“我也尝试过运行 Xinerama 而不是 twinview”我推断您​​使用的是 Linux。我不知道tigervnc，但大多数X 程序都支持-geometry 选项，它的工作原理如下：

```
myprogram -geometry <width>x<height>+<xoffset>+<yoffset> 
```

所以你可能想通过你的tigervnc

```
-geometry 1600x1200+0+0 
```

实际上我认为每个与 Xlib 链接的程序都有这个功能，所以你的tigervnc 支持几何选项的机会非常好。

# r - R：如何使用 direct.label 标记特定轮廓

> ID：10675387
> 
> 赞同：11
> 
> 时间：2012-05-20T17:00:04.900
> 
> 标签：r, ggplot2, contour

我对 比较陌生`ggplot2`，并且在为轮廓添加适当的标签时遇到了麻烦。

使用经典的火山示例，我可以将标签添加到默认等值线图：

```
library(plyr)
library(ggplot2)
library(directlabels)
library(reshape)
volcano<-melt(volcano)
v<-ggplot(volcano, aes(x,y,z=z))
e<-v + stat_contour(aes(colour=..level..))
direct.label(e) 
```

在上面的例子中，标签被适当地添加了，但是如果我尝试为轮廓指定我自己的断点，事情会变得更加复杂：

```
e<-v + stat_contour(aes(breaks=c(160, 170, 180), colour=..level..))
direct.label(e) 
```

现在，轮廓由我提供的中断指定，但所有默认轮廓仍然显示标签。如何仅绘制图形轮廓的标签？

一个相关的问题，我将如何绘制不包含在默认值中的等高线级别的标签？说休息165：

```
e<-v + stat_contour(aes(breaks=c(165), colour=..level..))
direct.label(e) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-21T01:46:49.987

我无法忍受看到如此简单的解决方案没有回答一个老问题。

简单的问题是里面的映射`stat_contour()`。你的电话应该是：

```
v<-ggplot(volcano, aes(x=X1,y=X2,z=value))  # specify the mapping properly
e<-v + stat_contour(aes(colour=..level..), breaks=c(160, 170, 180))
direct.label(e) 
```

中断不包括在 aes 映射中，并且`colour=..level..`包括在内。

![在此处输入图像描述](../Images/2389856745d40b1543c79003170994e9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-10T09:59:50.953

使用 ggplot > 2.0.0 您需要将 method="bottom.pieces" （或 top.pieces）添加到 direct.label 调用

```
library(directlabels)
direct.label(e, method="bottom.pieces") 
```

# iphone - iPhone iOS 如何将 UIColor 序列化/保存到 JSON 文件？

> ID：10675390
> 
> 赞同：5
> 
> 时间：2012-05-20T17:00:52.227
> 
> 标签：iphone, objective-c, ios, json, uicolor

当我需要将颜色保存到核心数据时，我只需使用 NSKeyedArchiever，然后在需要加载实体时取消归档颜色。但是，当我尝试序列化核心数据实体时，该过程会失败，因为它不知道如何将密钥归档的 NSData 转换为字符串。

将 UIColor 转换为字符串表示以在 JSON 文件中发送的最佳方法是什么？一种解决方案是将 r,g,b,a 值存储为浮点数。一种解决方案是将其保存为十六进制字符串。这两者似乎都使色彩恢复的过程复杂化

我错过了什么吗？有没有更简单的方法在 JSON 中序列化 UIColor？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T17:33:54.160

那个怎么样：

```
NSDictionary *colorData = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithFloat:100.f], @"Red",
                               [NSNumber numberWithFloat:24.f], @"Green",
                               [NSNumber numberWithFloat:23.f], @"Blue",
                               [NSNumber numberWithFloat:1.f], @"Alpha", nil];

NSDictionary *color = [NSDictionary dictionaryWithObject:colorData forKey:@"Color"]; 
```

结果是这样的：

```
{"Color":{"Green":24,"Alpha":1,"Blue":23,"Red":100}} 
```

您可以轻松地创建一个方法，将`UIColor`其作为参数并返回一个可以直接序列化的 NSDictionary。逆过程是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T17:35:50.540

由于在 JSON 中放置一个（更不用说通用“颜色”）没有定义的标准，`UIColor`你将不得不自己动手。

我建议最好的方法是有一个类别，`UIColor`它为您提供 RGB 颜色空间中颜色的标准十六进制代码，并且还接受这样的十六进制代码并吐出 s `UIColor`。然后以 JSON 格式传输该十六进制代码。

我知道这可能看起来有点矫枉过正，但它是迄今为止最便携和最紧凑的解决方案。

`UIColor`可以在我的[MJGFoundation`UIColor`类别](https://github.com/mattjgalloway/MJGFoundation/blob/master/Source/Categories/UIColor/UIColor-MJGAdditions.m)中找到hex to 方法的示例。一个类似的从`UIColor`到十六进制值不会太难写，但要知道必须首先在 RGBA 颜色空间中获取它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-31T06:13:14.060

这取决于颜色的“私有”格式的自由度。有些颜色对被要求输入 RGBA 反应不佳（因此这些`get...`方法为什么返回 a `BOOL`——它们并不总是成功），所以这个实现包括颜色类型和值。

```
@implementation UIColor (JSON)

- (NSString *)json_stringValue
{
    CGFloat r, g, b, a, h, s, w;
    if ([self getRed:&r green:&g blue:&b alpha:&a]) 
        return [NSString stringWithFormat:@"rgba:%f,%f,%f,%f", r,g,b,a];
    else if ([self getHue:&h saturation:&s brightness:&b alpha:&a])
        return [NSString stringWithFormat:@"hsba:%f,%f,%f,%f", h,s,b,a];
    else if ([self getWhite:&w alpha:&a]) 
        return [NSString stringWithFormat:@"wa:%f,%f", w, a];

    NSLog(@"WARNING: unable to serialize color %@", self);
    return nil;
}

@end

@implementation NSString (JSON)

- (UIColor *)json_color
{
    NSArray *comps = [self componentsSeparatedByString:@":"];
    NSArray *colors = [comps[1] componentsSeparatedByString:@","];
    NSUInteger count = colors.count;
    CGFloat values[4] = {0,0,0,0};
    for (NSUInteger i = 0; i < count; i++) values[i] = [colors[i] floatValue];

    if ([comps[0] isEqualToString:@"rgba"]) 
        return [UIColor colorWithRed:values[0] green:values[1] blue:values[2] alpha:values[3]];
    else if ([comps[0] isEqualToString:@"hsba"])
        return [UIColor colorWithHue:values[0] saturation:values[1] brightness:values[2] alpha:values[3]];
    else if ([comps[0] isEqualToString:@"wa"])
        return [UIColor colorWithWhite:values[0] alpha:values[1]];

    NSLog(@"WARNING: unable to deserialize color %@", self);
    return nil;
}

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-06T05:54:32.553

我发现的解决方案是从 UIColor 创建 CIColor 然后转换回来：

转换为字符串：

```
CIColor(color: UIColor.blue).stringRepresentation 
```

转换为颜色：

```
UIColor(ciColor: CIColor(string: databaseColorString)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T12:14:54.130

结合这两个答案，结果如下：

保存：

```
#import "UIColor-HSVAdditions.h"
#import "JSONKit.h"

UIColor* color = textView.textColor;
            NSDictionary *colorData = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithFloat:color.hue], @"Hue",
                                       [NSNumber numberWithFloat:color.saturation], @"Saturation",
                                       [NSNumber numberWithFloat:color.brightness], @"Brightness",
                                       [NSNumber numberWithFloat:color.alpha], @"Alpha", nil];

            NSString* jsonString = [colorData JSONString]; 
```

装载：

```
 NSDictionary* dictionary = [coreDataEntity.fontColor objectFromJSONString];

                    NSNumber* hue =[dictionary objectForKey:kHueKey];
                    NSNumber* saturation =[dictionary objectForKey:kSaturationKey];
                    NSNumber* brightness =[dictionary objectForKey:kBrightnessKey];
                    NSNumber* alpha =[dictionary objectForKey:kAlphaKey];

                    UIColor* color = [UIColor colorWithHue:hue.floatValue saturation:saturation.floatValue brightness:brightness.floatValue alpha:alpha.floatValue];

                    textView.textColor = color; 
```

# java - 需要请求和框架上下文的单元测试代码

> ID：10675394
> 
> 赞同：0
> 
> 时间：2012-05-20T17:01:20.730
> 
> 标签：java, http, testing, junit, request

我在基于 Apache sling 的环境中工作。我的大部分代码库可以在使用 Junit 测试编译时“正常”进行单元测试。

有一个功能子集需要通过框架传入的 HTTP 请求的上下文才能正常工作，而模拟我所依赖的所有框架提供的对象的工作太困难了。

在我的测试构建周期中，我当前的方法是：1）Junit 使用标准 JUnit 测试测试我能做的所有事情 2）编译代码并将其部署到我的本地实例 3）向我的本地实例上运行的特定“测试”资源发出 HTTP 请求“测试”并返回一些值 4）根据预期值检查返回值（重复 3-4）

我试图弄清楚如何最有效地在平台之外定义我的测试（从我发出 HTTP 请求的地方）并从我的本地实例的上下文中执行它们。

关于构建和执行测试套件的最佳方式的想法是否满足了这些要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:19:48.903

我相信你试图做的是运行通常称为“集成测试”或“验收测试”的东西。尽管界限很模糊，但集成测试/验收测试通常涉及多个组件，而单元测试应该只关注一个组件并模拟所有内容。

我最好的建议是您创建一个单独的测试套件，该套件将启动您的 sling 服务器（在预定义的端口上），然后运行一组测试，对您的服务器进行 RESTful 调用。

我建议您将[Spring Rest Template 或 Jersey's Rest Client](https://stackoverflow.com/a/221763/318174)与 JUnit 一起使用。您的构建脚本必须启动服务器。许多人使用[Cargo](http://cargo.codehaus.org/)（不幸的是，货物站点现在已关闭）来做到这一点。

慢慢地，您将制作一个库和便利装置/方法/对象，以便它变得更容易。

# java - 比正则表达式更好的系统

> ID：10675397
> 
> 赞同：3
> 
> 时间：2012-05-20T17:01:48.193
> 
> 标签：java, web-crawler

我制作了一个可以从特定网站提取一些特定信息的应用程序。为此，我使用了正则表达式，它给了我想要的输出。对于那个简单的爬虫，有没有比正则表达式更有效的过程或想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:24:01.593

如果您说它是一个简单的正则表达式来解决您的问题，那么没有其他更有效的解决方案。当涉及到爬虫时，替代方法是将整个 html 页面加载到内存中，在 DOM 文档中并使用 XPath 甚至 XQuery 进行搜索。但实际上，如果可以使用正则表达式轻松提取信息，那么请不要打扰，特别是如果您不熟悉 XPath。

当您想要进行复杂的搜索时，XPath 的强大功能就派上用场了。对于这个任务，它比正则表达式更优雅（至少在 w3c 的意见中）。但是，如果您想要一个快速的解决方案，您已经找到了它，而且它在 RAM 方面也更有效。

# c - 为什么静态数组的大小不能可变？

> ID：10675399
> 
> 赞同：20
> 
> 时间：2012-05-20T17:01:56.003
> 
> 标签：c, arrays, gcc, static

> **相关但不完全重复，因为它讨论了 C++：**
> [我们可以给静态数组的大小一个变量吗](https://stackoverflow.com/questions/7696591/can-we-give-size-of-static-array-a-variable)

我在其中一个子文件中定义一个数组，如下所示。

```
static int arr[siz]; 
```

这`siz`是子文件可用的全局变量。但是 gcc 编译器会产生以下错误：

```
<filename>: <line_num> : error : storage size of ‘arr’ isn’t constant 
```

为什么我不能定义一个`static`可变大小的数组？

编辑：这似乎只是`static int`类型的问题。如果我将变量类型`arr`from更改为`static int`to `int`，错误就会消失，即使数组的大小仍然取决于 variable `siz`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-20T18:04:55.400

由于您声明的数组的大小不是恒定的，因此您拥有的是一个**可变长度数组（VLA）**。C99 标准允许 VLA，但有一些限制。您不能拥有带有`static`或`extern`存储类说明符的可变长度数组。

你有一个带有`static`存储规范的 VLA，它是 C99 标准不允许的。

参考：

c99 标准：6.7.5.2/8

> 示例 4 所有可变修改 (VM) 类型的声明必须在块范围或函数原型范围内。**使用 static 或 extern 存储类说明符声明的数组对象不能具有可变长度数组 (VLA) 类型**。但是，使用静态存储类说明符声明的对象可以具有 VM 类型（即，指向 VLA 类型的指针）。最后，所有使用 VM 类型声明的标识符都必须是普通标识符，因此不能是结构或联合的成员。

因此，如果您想要一个带有`static`存储说明符的动态大小数组，则必须使用在堆上分配的动态数组。

```
#define MAX_SIZE 256
static int* gArr;
gArr = malloc(MAX_SIZE * sizeof(int)); 
```

**编辑：**
回答您更新的问题：
当您`static`从声明中删除关键字时，声明数组的存储说明符从`static`全局更改为，请注意上面的标准引用，它清楚地提到了不允许使用 VLA`static`和`extern`存储规范的限制。显然，您可以拥有具有全局存储规范的 VLA，这就是您删除`static`关键字后所拥有的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T17:09:21.767

您在编译时分配数组，因此编译器必须提前知道数组的大小。您必须在声明`siz`之前声明为常量表达式`arr`，例如：

```
#define siz 5 
```

或者

```
enum ESizes
{
    siz = 5
}; 
```

或者，如果您需要在运行时确定它的大小，您可以使用以下命令在堆上分配它`malloc`：

```
static int* arr;
arr = (int*)malloc(siz * sizeof(int)) 
```

**编辑**：正如 eddieantonio 所提到的，我的回答对 C89 有效。在 C99 中，允许声明可变大小的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T17:14:17.110

您不能定义任何可变大小的数组。那是因为`arr[siz]`让编译器（！）为您的数组分配内存（好吧，编译器创建了一个程序，那个..，但我们不要误入歧途）。但是，变量可以在运行时更改（！），这意味着编译器没有机会知道要分配多少内存。

你能做的是

```
static int* arr;
arr = (int*) calloc(siz,sizeof(int)) 
```

这些行导致程序在运行时分配内存，因此它的确切大小也可以在运行时定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T21:24:58.993

您不能声明一个`static`可变大小的数组，因为它的空间是在[数据段](https://en.wikipedia.org/wiki/Data_segment)（或[bss 段](https://en.wikipedia.org/wiki/.bss)，如果是未初始化的变量）中分配的。因此，编译器需要在编译时知道大小，如果大小不是常量，编译器会报错。

其根本原因是数据段大小会影响正在生成的可执行文件的大小，这显然是在编译时创建的，因此必须固定。

# c# - 没有锁的线程安全集合

> ID：10675400
> 
> 赞同：14
> 
> 时间：2012-05-20T17:01:58.483
> 
> 标签：c#, multithreading, collections

我正在准备自己的面试，我遇到了以下问题。我试过了，但我找不到任何东西可以创建一个包含没有“锁”的线程安全集合的类。如果知道任何解决方案，请提供帮助。

创建一个从 Object 派生的 C# 类并实现以下方法：

*   AddString – 此方法应将给定字符串添加到内部集合
*   ToString – 覆盖此方法并返回一个以逗号分隔的字符串，其中包含内部集合中的所有字符串

要求：

*   必须是线程安全的
*   必须支持多个并发阅读器
*   不得使用任何预先存在的线程安全集合
*   奖励：不要使用任何类型的锁

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T17:35:45.853

这是一种实现集合的无锁修改的方法，方法是处理本地副本，然后在检查竞争时尝试以原子方式将其与全局集合交换：

```
public class NonLockingCollection
{
    private List<string> collection;

    public NonLockingCollection()
    {
        // Initialize global collection through a volatile write.
        Interlocked.CompareExchange(ref collection, new List<string>(), null);
    }

    public void AddString(string s)
    {
        while (true)
        {
            // Volatile read of global collection.
            var original = Interlocked.CompareExchange(ref collection, null, null);

            // Add new string to a local copy.
            var copy = original.ToList();
            copy.Add(s);

            // Swap local copy with global collection,
            // unless outraced by another thread.
            var result = Interlocked.CompareExchange(ref collection, copy, original);
            if (result == original)
                break;
        }
    }

    public override string ToString()
    {
        // Volatile read of global collection.
        var original = Interlocked.CompareExchange(ref collection, null, null);

        // Since content of global collection will never be modified,
        // we may read it directly.
        return string.Join(",", original);
    }
} 
```

**编辑**：由于使用`Interlocked.CompareExchange`隐式执行易失性读取和写入引起了一些混乱，因此我在等效代码下方发布了`Thread.MemoryBarrier`调用。

```
public class NonLockingCollection
{
    private List<string> collection;

    public NonLockingCollection()
    {
        // Initialize global collection through a volatile write.
        collection = new List<string>();
        Thread.MemoryBarrier();
    }

    public void AddString(string s)
    {
        while (true)
        {
            // Fresh volatile read of global collection.
            Thread.MemoryBarrier();
            var original = collection;
            Thread.MemoryBarrier();

            // Add new string to a local copy.
            var copy = original.ToList();
            copy.Add(s);

            // Swap local copy with global collection,
            // unless outraced by another thread.
            var result = Interlocked.CompareExchange(ref collection, copy, original);
            if (result == original)
                break;
        }
    }

    public override string ToString()
    {
        // Fresh volatile read of global collection.
        Thread.MemoryBarrier();
        var original = collection;
        Thread.MemoryBarrier();

        // Since content of global collection will never be modified,
        // we may read it directly.
        return string.Join(",", original);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T19:36:03.167

根据问题，您应该能够在对象中添加一个并发集合，该集合将为您处理线程安全要求。他们没有指定使用哪种类型的内部集合。

您应该能够从 concurrentcollection 命名空间实现其中一个集合并实现这一点。

[http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T17:29:27.940

您可以创建一个非阻塞链表。例如像[这样](http://www.cse.yorku.ca/~ruppert/papers/lfll.pdf)的东西。

.net 框架提供了类似的方法[`CompareExchange(Object, Object, Object)`](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)，允许您编写安全代码而无需锁定整个列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-07T04:27:38.597

我的解决方案。基本上使用 Interlocked.Exchange 和 AutoResetEvents 模拟锁定。做了一些简单的测试，它似乎工作。

```
 public class SharedStringClass
    {
        private static readonly int TRUE = 1;
        private static readonly int FALSE = 0;

        private static int allowEntry;

        private static AutoResetEvent autoResetEvent;

        private IList<string> internalCollection;

        public SharedStringClass()
        {
            internalCollection = new List<string>();
            autoResetEvent = new AutoResetEvent(false);
            allowEntry = TRUE;
        }

        public void AddString(string strToAdd)
        {
            CheckAllowEntry();

            internalCollection.Add(strToAdd);

            // set allowEntry to TRUE atomically
            Interlocked.Exchange(ref allowEntry, TRUE);
            autoResetEvent.Set();
        }

        public string ToString()
        {
            CheckAllowEntry();

            // access the shared resource
            string result = string.Join(",", internalCollection);

            // set allowEntry to TRUE atomically
            Interlocked.Exchange(ref allowEntry, TRUE);
            autoResetEvent.Set();
            return result;
        }

        private void CheckAllowEntry()
        {
            while (true)
            {
                // compare allowEntry with TRUE, if it is, set it to FALSE (these are done atomically!!)
                if (Interlocked.CompareExchange(ref allowEntry, FALSE, TRUE) == FALSE)
                {
                    autoResetEvent.WaitOne();
                }
                else
                {
                    break;
                }
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T17:47:07.027

最简单的解决方案是拥有一个 type 字段`string[]`。每当调用者想要添加一个字符串时，创建一个新数组并附加新项并将其交换为旧项。

此模型不需要同步。它不容忍并发写入者，但它允许并发读取。

# java - 无法连接到 MySql 数据库

> ID：10675403
> 
> 赞同：0
> 
> 时间：2012-05-20T17:02:38.037
> 
> 标签：java, mysql, database, jdbc

我正在尝试测试与我的数据库的连接，但我不断收到以下错误

```
java.sql.SQLException: Access denied for user 'db'@'localhost' (using password: YES)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2975)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:798)
at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3700)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1203)
at com.mysql.jdbc.Connection.createNewIO(Connection.java:2572)
at com.mysql.jdbc.Connection.<init>(Connection.java:1485)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:266)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at ConnectingToDB.main(ConnectingToDB.java:18) 
```

我的代码如下。错误发生在“conn = DriverManager.getConnection(url+dbName,userName,password);”行

```
public class ConnectingToDB
{
  public static void main(String[] args) 
  {
    System.out.println("MySQL Connect Example.");
    Connection conn = null;
    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "steven";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "db"; 
    String password = "db";
    try 
    {
      Class.forName(driver).newInstance();
      conn = DriverManager.getConnection(url+dbName,userName,password);
      System.out.println("Connected to the database");
      conn.close();
      System.out.println("Disconnected from database");
    } 
    catch (Exception e) {
    e.printStackTrace();
   }
 } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:52:19.503

如您所见，您的凭据由 MySql 处理，但被拒绝，这意味着问题可能与凭据没有直接关系，因为如果凭据错误，则错误会有所不同，然后被拒绝。当凭据被拒绝时，问题主要与：

1.  权限问题 - 解决方案>>授予使用“本地主机”中的“db”的权限
2.  您的连接字符串看起来不错，但有时字符串编码会导致此错误
3.  一些已安装的组件正在干扰 MySql -> 检查组件安装

尝试逐一排除上述步骤..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:41:24.697

LOCALHOST 和“机器名”与 MySQL 不同。我会从命令行检查您是否可以连接到本地主机：

`mysql -hlocalhost -udb -pdb steven`

如果失败，请使用适当的权限连接并运行它：

```
create user db@localhost identified by 'db';
grant select on steven.* to db@localhost; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T17:08:47.457

你应该检查你的mysql中是否存在**db@localhost 。**否则，使用必要的权限创建此用户配置文件。

```
CREATE USER user_specification
    [, user_specification] ...

user_specification:
    user [IDENTIFIED BY [PASSWORD] 'password'] 
```

有关详细信息，请查看[CREATE USER 语法](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)

# sql - 在查询的其他部分使用 where 变量的值

> ID：10675412
> 
> 赞同：0
> 
> 时间：2012-05-20T17:04:00.187
> 
> 标签：sql, postgis

无论如何，我可以在查询的其他地方使用 where 选项的值吗？我想做的是用postgis在地图中获取点并在视图中返回距离，所以我有这个工作

```
SELECT name, 
       ST_Distance(ST_GeographyFromText('SRID=4326;POINT(-110 29)')::geography, location:: geography) 
FROM global_points 
WHERE ST_DWithin(location, ST_GeographyFromText('SRID=4326;POINT(-110 29)'), 1000000); 
```

虽然这对单个查询有好处，但我想使用一个视图来连接其他表中的一些其他信息，这样我就可以做到

```
SELECT * FROM view WHERE currLoc = POINT(50 50) 
```

这样我就可以在视图的其余部分使用 currLoc 我正在尝试的是这样的

```
CREATE VIEW testDis 
AS
SELECT name, ST_Distance(currPos::geography, latlong::geography) 
FROM global_points; 
```

这可能是完全错误的，但我不确定我还能做什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:09:16.303

视图不能有参数，但您可以创建一个可以执行此操作的集合返回函数：

类似的东西：

```
create function testDis(currPos geography, latlong geography)
   returns table(text, float)
as $$
  SELECT name, ST_Distance($1, $2) 
  FROM global_points;
$$
language sql; 
```

（对不起，我不知道 PostGIS，所以我可能弄错了数据类型）

使用上述定义，您可以执行以下操作：

```
select * from testDis(foo, bar); 
```

其中 foo 和 bar 是适当键入的值。

# iphone - 将子视图添加到 AppDelegate

> ID：10675413
> 
> 赞同：2
> 
> 时间：2012-05-20T17:04:06.337
> 
> 标签：iphone, subview, addsubview

我想将两个子视图添加到`AppDelegate`一个 for`mainviewController`和另一个子视图 for `UIToolbar`.

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]autorelease];
// Override point for customization after application launch.
self.mainViewController = [[[MainViewController alloc]init]autorelease];
self.window.rootViewController = self.mainViewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:30:29.263

只需将其添加到您的应用程序委托`window`（我建议以相同的方式显示 rootViewController 以支持 iOs 3）：

```
[self.window addSubview:myToolBar];
[self.window addSubview:self.mainViewController.view]; 
```

请注意，在顶部 viewController 上使用一些动画不会为工具栏设置动画，因为在这种情况下它不是此 viewController 的视图子视图。

# java - 在android中发送电子邮件的响应

> ID：10675418
> 
> 赞同：0
> 
> 时间：2012-05-20T17:04:23.057
> 
> 标签：java, android, email

我正在尝试使用默认方法发送电子邮件

```
eml.setType("message/rfc822");
                            startActivityForResult(Intent.createChooser(eml, "Choose an Email client :"), RESULT_EMAIL_SEND); 
```

现在我正在使用`startActivityForResult`. 我发现它实际上从不发回任何响应，因此它的默认值为 Activity_Cancel。

现在我的问题是，

我想做以下

> 主页->活动->电子邮件>成功->主页主页->活动->电子邮件>失败（如果没有互联网或任何其他问题）->返回活动

我怎样才能做到这一点？最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:21:44.297

> 我怎样才能做到这一点？

一般来说，您不能，除非您自己发送电子邮件（例如，通过 JavaMail JAR）。

# asp.net - 更新面板中的中继器未正确显示行

> ID：10675420
> 
> 赞同：1
> 
> 时间：2012-05-20T17:04:30.843
> 
> 标签：asp.net, .net, updatepanel, repeater

我有一张有 500 行的表。首先，我在负载上绑定了中继器以测试表格的输出，表格显示完美。但我的主要目的是在更新面板中使用中继器，所以一旦用户点击显示，更新面板显示显示 500 行表。该表显示，但由于某种原因，某些列在 Internet Explorer 9 中随机排列错误。我在 Firefox 中进行了测试，它似乎渲染得很好。

有任何想法吗？

这是我使用的一些片段代码..

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:LinkButton ID="lnkbreakdown" runat="server" OnClick="lnkbreakdown_Click">Show Breakdown</asp:LinkButton>
        <asp:Repeater ID="tblstatementhistory" runat="server">
            <FooterTemplate>
                </table>
                <br />
            </FooterTemplate>
            <HeaderTemplate>
                <table cellpadding="5" cellspacing="0" id="tblstatementhistory" style="margin-left: 3px;">
                    <tr>
                        <th>
                            Worker Name
                        </th>
                        <th>
                            Reference No.
                        </th>
                        <th class="smallcolumn">
                            Method
                        </th>
                        <th>
                            Sent On
                        </th>
                        <th class="largecolumn">
                            Delivery Status
                        </th>
                    </tr>
            </HeaderTemplate>
            <ItemTemplate>
                <tr>
                    <td><%# Container.DataItem("fullname")%>&nbsp;</td><%# vbCrLf%>
                    <td><%# Container.DataItem("xxh")%>&nbsp;</td><%# vbCrLf%>
                    <td><%# getMethod(CheckDBNull(Container.DataItem("EMAILID"), enumObjectType.IntType), CheckDBNull(Container.DataItem("POSTEDID"), enumObjectType.IntType))%>&nbsp;</td><%# vbCrLf%>
                    <td><%# getStatus(CheckDBNull(Container.DataItem("email_ts")), CheckDBNull(Container.DataItem("post_ts")))%>&nbsp;</td><%# vbCrLf%>
                    <td><%# getdelivery(CheckDBNull(Container.DataItem("status"), enumObjectType.IntType), CheckDBNull(Container.DataItem("timestampupdate")), CheckDBNull(Container.DataItem("email_ts")), CheckDBNull(Container.DataItem("post_ts")))%>&nbsp;</td><%# vbCrLf%>
                 </tr>
            </ItemTemplate>
        </asp:Repeater>
    <ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:59:54.673

好吧，在运行回发时，它似乎是 IE 的渲染/开销。我现在已经将我的方法从使用 asp.net updatepanel 更改为使用带有 JSON 的 jquery。这现在检索我的数据，并且没有任何未对齐的行/列。

# c# - 需要用于 Web 浏览器控制的默认搜索引擎

> ID：10675421
> 
> 赞同：0
> 
> 时间：2012-05-20T17:04:34.730
> 
> 标签：c#, windows-phone-7

我使用 Web 浏览器控件为 Windows Phone 7 创建了一个 Web 浏览器应用程序。我想添加一个默认搜索引擎（即用于 Google 搜索或 Bing 搜索的文本框）。而且，如果用户键入任何内容（如技术等字词），则搜索应重定向到上述默认搜索引擎。谁能帮我这个？？？我用于输入 URL 的文本框被命名为“UrlTextBox”，我的 Web 浏览器控件被命名为“浏览器”。用于搜索引擎的文本框被命名为“SearchTextBox”。提前感谢您的辛勤工作！！！

```
 public void browsers_Navigating(object sender, NavigatingEventArgs e)
    {
        UrlTextBox.Text = e.Uri.ToString();
        if (navigationcancelled)
        { e.Cancel = true; }

        SearchEngine[] availableSearchEngines = new SearchEngine[]
        {new SearchEngine(){ Name = "Google", URLPattern = "http://www.google.com/search?q={0}" }};
         new SearchEngine(){ Name = "Yahoo", URLPattern = "http://search.yahoo.com/search?p={0}" };
         new SearchEngine(){ Name = "Bing", URLPattern = "http://www.bing.com/search?q={0}" };
    } 
```

UrlTextBox-:

```
 private void UrlTextBox_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            Uri url;
            if (Uri.TryCreate(UrlTextBox.Text, UriKind.Absolute, out url))
            {
                this.urls[this.currentIndex] = UrlTextBox.Text;
                this.browsers[this.currentIndex].Navigate(url);
            }

            if (!Uri.TryCreate(UrlTextBox.Text, UriKind.Absolute, out url))
            {
                SearchEngine defaultSearchEngine = availableSeachEngines[0];
                String URL = String.Format(defaultSearchEngine.URLPattern, UrlTextBox.Text);
            }

            else
            {
                Navigate(UrlTextBox.Text);
            }
        }
    } 
```

但是有一个错误说**“availableSeachEngines”** --->当前上下文中不存在名称**availableSeachEngines 。**

现在我已经添加了我在我的程序中使用的代码，并且还在其中添加了 Muaz Othman 代码。但它对我不起作用，也显示错误。我认为我在其中犯了一些错误。有人可以纠正吗？？？提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:04:42.677

您可以像这样创建一个类：

```
public class SearchEngine {

    public string Name {set; get}
    public string URLPattern { get; set;}

    public override string ToString(){
        return Name;
    }
} 
```

在你的代码中你可以有这个数组：

```
SearchEngine[] availableSearchEngines = new SearchEngine[]{
    new SearchEngine(){ Name = "Google", URLPattern = "http://www.google.com/search?q={0}" };
    new SearchEngine(){ Name = "Yahoo", URLPattern = "http://search.yahoo.com/search?p={0}" };
    new SearchEngine(){ Name = "Bing", URLPattern = "http://www.bing.com/search?q={0}" };
} 
```

但在您的代码中，您应该只有一个`SearchEngine`对象：

```
SearchEngine defaultSearchEngine; 
```

因此，当用户输入文本并选择“Go”时，您会检查输入的文本是否是有效的 URL（可能使用正则表达式），如果不是，请执行以下操作：

```
String url = String.Format(defaultSearchEngine.URLPattern, SearchTextBox.Text); 
```

# c++ - “按值”与“按引用”的 C++ 速度差异

> ID：10675426
> 
> 赞同：-1
> 
> 时间：2012-05-20T17:04:44.213
> 
> 标签：c++, performance, pass-by-reference, pass-by-value

我想测试 C++ 中按值传递和按引用传递的速度：

```
class MyAddress{
    char *name;
    long int number;
    char *street;
    char *town;
    char state[2];
    long zip;
    std::vector<int> v_int;
public:
    MyAddress(int i){
        v_int.resize(1000000);
        std::fill(v_int.begin(),v_int.end(),i);
    }
    MyAddress& assign1(MyAddress const& x)
    { 
        MyAddress tmp(x);       // copy construction of tmp does the hard work
        std::swap(*this, tmp);  // trade our resources for tmp's
        return *this;           // our (old) resources get destroyed with tmp 
    }
    MyAddress& assign2(MyAddress x)//x is a copy of the source 
    {                              //hard work already done

        std::swap(*this, x);  // trade our resources for x's
        return *this;         // our (old) resources get destroyed with x 
    }
    void f1(MyAddress v){int i=v.v_int[3];}
    void f2(MyAddress const &ref){int i=ref.v_int[3];}

};

MyAddress get_names(MyAddress& ref){return ref;} 
```

主要的：

```
int _tmain(int argc, _TCHAR* argv[])
{
    float time_elapsed1=0;
    float time_elapsed2=0;

    for(int i=0;i<100;i++){
        {
            MyAddress a1(1);
            MyAddress a2(2);
            MyAddress a3(3);
            clock_t tstart=std::clock();
            a1.f1(a2);
            a1.f1(a3);
            clock_t tend=std::clock();
            time_elapsed1+=((float)tend-(float)tstart);
        }
        {
            MyAddress a1(1);
            MyAddress a2(2);
            MyAddress a3(3);
            clock_t tstart=std::clock();
            a1.f2(a2);
            a1.f2(a3);
            clock_t tend=std::clock();
            time_elapsed2+=((float)tend-(float)tstart);
        }
    }
    std::cout<<std::fixed<<"\nassign1 time elapsed : "
         <<time_elapsed1/CLOCKS_PER_SEC;
    std::cout<<std::fixed<<"\nassign2 time elapsed : "
         <<time_elapsed2/CLOCKS_PER_SEC;
    system("pause");
    return 0;
} 
```

时差结果令人震惊：

分配1时间过去：81.044998

assign2 已用时间：0.002000

它是否正确？

“按价值”的速度怎么能比“按参考”高得多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:18:35.277

您的输出的措辞有些混乱：您没有在代码中的任何地方使用`assign1`和`assign2`，但您在输出中提到了它们。

无论如何，在看到你实际在做什么之后，我只能说按*值*`f1`获取参数，这意味着它调用了复制构造函数，而复制构造函数又复制了太大的成员向量。向量的这种复制花费了很多时间，当您调用它时您可以节省时间，因为它通过引用获取参数，因此在这种情况下不会复制向量。*`f2`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:34:44.450

除了已经说过的昂贵的复制构造函数之外，我想提一下，您只是将计算结果丢弃在`f1`and中`f2`。这意味着理论上（假设向量的实现方式使得这成为可能）编译器可以决定在仅读取值时删除整个方法调用，并且很明显删除它们不会导致副作用。这意味着，您最终可能只测量启动和停止计时器本身所需的时间。

无论如何，您应该期望引用调用在所有情况下都更快，但在少数情况下，至少如果您正在传递一个大对象。*

# html - 如何将 td 元素居中对齐

> ID：10675427
> 
> 赞同：35
> 
> 时间：2012-05-20T17:04:56.813
> 
> 标签：html, css, html-table

我创建了一个简单的表格，并希望将 td 元素居中对齐，但 css 中的 align:center 似乎不起作用

```
.cTable td{
align:center;
}

<table border='1' id='mytable' class="cTable">
<tbody>
<tr><th>Claim ID</th><th>Status</th></tr> 
<tr><td align="center">22</td><td>333</td></tr>    
<tr><td>22</td><td>333</td></tr>
<tr><td>22</td><td>333</td></tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-20T17:06:33.183

应该是`text-align`，不是`align`

[https://developer.mozilla.org/en/CSS/text-align](https://developer.mozilla.org/en/CSS/text-align)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-10-30T12:54:48.407

对我有用的是以下内容（鉴于其他答案的混乱）：

```
<td style="text-align:center;">
    <input type="radio" name="ageneral" value="male">
</td> 
```

建议的解决方案 ( `text-align`) 有效，但必须在样式属性中使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T17:29:16.950

`margin:auto;` 文本对齐，如果这不起作用 - 尝试添加`display:block;`并设置在那里`width:200px;`（以防你的 TD 太小）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-13T05:14:34.383

在`<td>`元素内部或 CSS 文件中指定样式，如下所示： `vertical-align: middle;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-22T13:58:58.500

我个人认为这些答案没有任何帮助。在我的案例中起作用的是给出元素`float:none`和`position:relative`. 之后，元素以`<td>`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-16T21:57:04.230

在表格中居中内容的最佳方法（例如`<video>`或`<img>`）是执行以下操作：

```
<table width="100%" border="0" cellspacing="0" cellpadding="100%">
<tr>
<td>Video Tag 1 Here</td>
<td>Video Tag 2 Here</td>
</tr>
</table>
```

# eclipse - 在 Eclipse 3.7 中安装 Google App Engine SDK 时出错

> ID：10675430
> 
> 赞同：0
> 
> 时间：2012-05-20T17:05:02.390
> 
> 标签：eclipse, google-app-engine, installation

我正在尝试在 eclipse 3.7(Indigo) 中安装 Google App Engine SDK，并且我一直在出现以下错误，如图所示。我正在使用 Windows 7。任何人都可以指导我如何解决这个问题。 ![在此处输入图像描述](../Images/476d4fe9353540c3aee83e9bfbab9d3a.png)

# android - 在listview android顶部添加项目

> ID：10675437
> 
> 赞同：3
> 
> 时间：2012-05-20T17:06:27.407
> 
> 标签：android, listview

我有一个列表视图，我正在使用 list.add(mylist) 和 adapter.notifydatasetchanged() ，它在现有列表下方添加项目，如何在列表顶部添加项目。

例如：如果我收到新的消息它应该在现有列表的顶部。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-20T17:10:54.073

使用`add(int index, E object)`. 哪里`index = 0`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-23T21:05:14.047

实际上，如果您将适配器绑定到您的 ListView，您也可以将项目插入到您的适配器的位置（在本例中为 0）

```
list.setAdapter(adapter); 
```

...

```
adapter.insert(data, 0); 
```

它应该自行更新，因为您绑定了它

# python - 将英里转换为公里时出错

> ID：10675442
> 
> 赞同：2
> 
> 时间：2012-05-20T17:07:21.290
> 
> 标签：python

我正在尝试学习 python，并尝试创建一个简单的公式，将英里转换为公里，并在转换后返回一些文本。

这是我所拥有的：

```
def mile(x):
    z = x * 1.609344
    print "%.2f" % z

x = float(raw_input("How many miles are you traveling? "))  

z = mile(x)

print "That's about % kilometers." % z 
```

有人可以解释为什么这不起作用吗？我绝对可以设置 mile 函数来打印带有转换的句子，但我不想这样做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T17:09:19.427

您的函数需要返回结果。

```
def mile(x):
    z = x * 1.609344
    return z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:46:17.690

你有几个问题。首先是您的函数不返回值。运行该行时`z = mile(x)`，该`mile(x)`部分将被 . 返回的任何内容替换`mile`。你想要的代码是：

```
def mile(x):
    z = x * 1.609344
    return z 
```

请注意，将其分配给哪个变量无关紧要；它不必与返回的变量匹配。例如，两者都`y = mile(x)`将`z = mile(x)`正确分配给给定的变量。

其次，您的字符串格式不起作用。这是看起来像的那部分`"That's about % kilometers." % z`。字符串格式替换`%<identifier>`为给定的变量，其中`<identifier>`告诉变量是什么类型（可能还有一些关于如何显示它的信息）。您将需要标识符`f`，或者像前面的打印语句一样`.2f`，给出`"That's about %.2f kilometers." % z`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T17:24:15.560

作为一种解释：

您需要从函数返回计算/转换的值，以便可以将结果分配给 variable `z`。*然后*，您可以将其打印出来。

以前，您在*函数*中打印值，而不返回任何内容，这导致`z`被分配`None`，这就是为什么底部的打印不起作用。

一般来说，最好在函数内部进行工作/计算，然后返回一个您可以决定如何使用的值。

@wim 显示该函数的正确代码。如果你现在这样做

```
z = mile(x)
print "That's about %.2f kilometers." % z 
```

你会得到你期望的结果。（请注意@Aaron Dufour 指出的正确格式，当您打印结果时，您将在小数点后得到 2 个数字）顺便说一句，您的第一个`print`语句是正确的，只有第二个语句缺少完整的格式指令。

# php - 有拇指的画廊，太多的 foreach 循环（？）（PHP）

> ID：10675444
> 
> 赞同：0
> 
> 时间：2012-05-20T17:07:45.727
> 
> 标签：php, loops, foreach, gallery, thumbnails

我对 PHP 中的相册有疑问。画廊有以下结构：

```
 <div class="imageElement">
                <h3>Item 1 Title</h3>
                <p>Item 1 Description</p>
                <a href="open/1.jpg" title="open image" class="open"></a>
                <img src="big/1-gallery.jpg" class="full" />
                <img src="thumb/1-mini.jpg" class="thumbnail" />
            </div>
      and so on 
```

我有三个文件夹：大 - 带有普通图像，拇指 - 带有拇指，打开 - 带有大图像。

我创建了一个 foreach 循环：

```
<?php foreach(glob("images/folder/images/".$id."/big/*.jpg") as $filename) : ?>

<div class="imageElement">
<h3>Item 1 Title</h3>
<p>Item 1 Description</p>
<a href="path-to-large-image" title="open image" class="open"></a>
<? echo '<img src="'.$filename.'" class="full">'?>

<?php foreach(glob("images/folder/images/".$id."/thumb/*.jpg") as $filename2) : ?    >
<? echo '<img src="'.$filename2.'" class="thumbnail">';break;?>
 <?php endforeach ?>
</div>
<?php endforeach ?> 
```

不幸的是，我只得到了第一个 - 每个图像都使用相同的拇指。在这种情况下我应该如何使用 foreach 循环？我应该如何使用下一个循环从打开的文件夹中获取图像？

感谢您的回答。

编辑：

我在 html 中的输出看起来：

```
<div class="imageElement">
<h3>title</h3>
<p>text</p>
<a href="/images/folder/4/open/1.jpg" title="open image" class="open"></a>
<a href="/images/folder/4/open/2.jpg" title="open image" class="open"></a>
<a href="/images/folder/4/open/3.jpg" title="open image" class="open"></a>
<a href="/images/folder/4/open/4.jpg" title="open image" class="open"></a>

<img src="images/folder/images/4/big/1.jpg" class="full">

<img src="/images/folder/images/4/thumb/1.jpg" class="thumbnail">
<img src="/images/folder/images/4/thumb/2.jpg" class="thumbnail">
<img src="/images/folder/images/4/thumb/3.jpg" class="thumbnail">
<img src="/images/folder/images/4/thumb/4.jpg" class="thumbnail">
</div>

<div class="imageElement">
<h3>title</h3>
<p>text</p>
<a href="/images/folder/4/open/1.jpg" title="open image" class="open"></a>
<a href="/images/folder/4/open/2.jpg" title="open image" class="open"></a>
<a href="/images/folder/4/open/3.jpg" title="open image" class="open"></a>
<a href="/images/folder/4/open/4.jpg" title="open image" class="open"></a>

<img src="images/folder/images/4/big/2.jpg" class="full">

<img src="/images/folder/images/4/thumb/1.jpg" class="thumbnail">
<img src="/images/folder/images/4/thumb/2.jpg" class="thumbnail">
<img src="/images/folder/images/4/thumb/3.jpg" class="thumbnail">
<img src="/images/folder/images/4/thumb/4.jpg" class="thumbnail">
</div> 
```

等等。

它应该看起来：

```
<div class="imageElement">
<h3>title</h3>
<p>text</p>
<a href="/images/folder/4/open/1.jpg" title="open image" class="open"></a>
<img src="images/folder/images/4/big/1.jpg" class="full">
<img src="/images/folder/images/4/thumb/1.jpg" class="thumbnail">
</div>

<div class="imageElement">
<h3>title</h3>
<p>text</p>
<a href="/images/folder/4/open/2.jpg" title="open image" class="open"></a>
<img src="images/folder/images/4/big/2.jpg" class="full">
<img src="/images/folder/images/4/thumb/2.jpg" class="thumbnail">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:38:43.637

您构建代码的方式，混合 PHP 和 HTML，可能会混淆 PHP。尝试这个：

```
<?php
foreach(glob("images/folder/images/".$id."/big/*.jpg") as $filename) {

  echo '<div class="imageElement">
<h3>Item 1 Title</h3>
<p>Item 1 Description</p>
<a href="path-to-large-image" title="open image" class="open"></a>
<img src="'.$filename.'" class="full">';

  foreach(glob("images/folder/images/".$id."/thumb/*.jpg") as $filename2) {
    echo '<img src="'.$filename2.'" class="thumbnail">';
  }
  echo '</div>';
} 
```

编辑：

这会产生您正在寻找的东西：

```
foreach($x as $filename) {
  $chunks=explode("/", $filename);
  $file=$chunks[count($chunks)-1];

  echo '<div class="imageElement">
  <h3>Item 1 Title</h3>
  <p>Item 1 Description</p>
  <a href="./images/folder/images/'.$id.'/open/'.$file.'" title="open image" class="open"></a>
  <img src="./images/folder/images/'.$id.'/big/'.$file.'" class="full">
  <img src="./images/folder/images/'.$id.'/thumb/'.$file.'" class="thumbnail">

  </div>

  ';

} 
```

输出：

```
<div class="imageElement">
<h3>Item 1 Title</h3>
<p>Item 1 Description</p>
<a href="./images/folder/images/4/open/1.jpg" title="open image" class="open"></a>
<img src="./images/folder/images/4/big/1.jpg" class="full">
<img src="./images/folder/images/4/thumb/1.jpg" class="thumbnail">

</div>

<div class="imageElement">
<h3>Item 1 Title</h3>
<p>Item 1 Description</p>
<a href="./images/folder/images/4/open/2.jpg" title="open image" class="open"></a>
<img src="./images/folder/images/4/big/2.jpg" class="full">
<img src="./images/folder/images/4/thumb/2.jpg" class="thumbnail">

</div>

<div class="imageElement">
<h3>Item 1 Title</h3>
<p>Item 1 Description</p>
<a href="./images/folder/images/4/open/3.jpg" title="open image" class="open"></a>
<img src="./images/folder/images/4/big/3.jpg" class="full">
<img src="./images/folder/images/4/thumb/3.jpg" class="thumbnail">

</div>

<div class="imageElement">
<h3>Item 1 Title</h3>
<p>Item 1 Description</p>
<a href="./images/folder/images/4/open/4.jpg" title="open image" class="open"></a>
<img src="./images/folder/images/4/big/4.jpg" class="full">
<img src="./images/folder/images/4/thumb/4.jpg" class="thumbnail">

</div> 
```

唯一需要修复的是第 1 项的标题/描述。

# java - 列出维护排序的实现

> ID：10675446
> 
> 赞同：16
> 
> 时间：2012-05-20T17:07:52.670
> 
> 标签：java, list, collections, insertion-order

Java 中是否有现有的`List`实现基于提供的顺序来维护`Comparator`？

可以通过以下方式使用的东西：

```
Comparator<T> cmp = new MyComparator<T>();
List<T> l = new OrderedList<T>(cmp);
l.add(someT); 
```

以便`someT`插入，以便列表中的顺序根据`cmp`

（根据@andersoj 的建议，我又提出了一个要求来完成我的问题）

此外，我希望能够在不删除元素的情况下按排序顺序遍历列表，即：

```
T min = Const.SMALLEST_T;
for (T e: l) {
  assertTrue(cmp.compare(min, e) >= 0);
  min = e;
} 
```

应该通过。

欢迎所有建议（除了告诉我`Collections.sort`在无序的完整列表中使用），不过，我更喜欢其中`java.*`或最终的东西，`org.apache.*`因为此时很难引入新的库。

***注意：（UPDATE4）***我意识到这种列表的实现会性能不足。有两种通用方法：

1.  使用链接结构（某种）B-tree 或类似的
2.  使用数组和插入（使用二分查找）

1\. CPU 缓存未命中有问题 2\. 数组中的元素移位有问题。

***UPDATE2：*** `TreeSet`不起作用，因为它使用提供的比较器 (`MyComparator`) 来检查是否相等，并基于它假定元素相等并排除它们。我只需要比较器进行排序，而不是“唯一性”过滤（因为元素的自然排序不相等）

***UPDATE3：*** `PriorityQueue`不工作`List`（因为我需要），因为没有办法按“排序”的顺序遍历它，要按排序顺序获取元素，您必须将它们从集合中删除。

更新：

类似的问题：
[A good Sorted List for Java](https://stackoverflow.com/questions/2661065/a-good-sorted-list-for-java)
[Sorted array list in Java](https://stackoverflow.com/questions/4031572/sorted-array-list-in-java)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-20T17:09:20.443

您可能应该使用[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)：

> 元素使用它们的自然顺序或在集合创建时提供的 Comparator 进行排序，具体取决于使用的构造函数。

例子：

```
Comparator<T> cmp = new MyComparator<T>();
TreeSet<T> t = new TreeSet<T>(cmp);
l.add(someT); 
```

请注意，这是一个**set**，因此不允许重复条目。这可能适用于您的特定用例，也可能不适用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-20T17:09:58.993

响应新要求。我看到了两个潜力：

*   按照 JavaDoc`PriorityQueue`所说的去做：

    > 此类及其迭代器实现了 Collection 和 Iterator 接口的所有可选方法。方法中提供的 Iterator`iterator()`不能保证以任何特定顺序遍历优先级队列的元素。如果您需要有序遍历，请考虑使用`Arrays.sort(pq.toArray())`.

    我怀疑这将根据您的要求产生最佳性能。如果这是不可接受的，您需要更好地解释您要完成的工作。

*   构建一个在添加新元素时简单地对自身进行排序的*列表。*这是一个真正的痛苦......如果您使用链接结构，您可以进行有效的插入排序，但局部性很差。如果您使用数组支持的结构，则插入排序会很痛苦，但遍历会更好。如果迭代/遍历不频繁，您可以保留未排序的列表内容并仅按需排序。

*   考虑使用我建议的*PriorityQueue*，如果您需要按顺序迭代，请编写一个包装迭代器：

    ```
    class PqIter implements Iterator<T>
    {
       final PriorityQueue<T> pq;
       public PqIter(PriorityQueue <T> source)
       {
         pq = new PriorityQueue(source); 
       }

       @Override
       public boolean hasNext()
       {
         return pq.peek() != null
       }

       @Override
       public T next()
       { return pq.poll(); }

       @Override
       public void remove()
       { throw new UnsupportedOperationException(""); }
    } 
    ```

*   使用番石榴的[`TreeMultiSet`](http://guava-libraries.googlecode.com/svn/tags/release02/javadoc/com/google/common/collect/TreeMultiset.html). 我测试了以下代码，`Integer`它似乎做了正确的事情。

    ```
    import com.google.common.collect.TreeMultiset;

    public class TreeMultiSetTest { 
      public static void main(String[] args) {
        TreeMultiset<Integer> ts = TreeMultiset.create();
        ts.add(1);  ts.add(0); ts.add(2);
        ts.add(-1); ts.add(5); ts.add(2);

        for (Integer i : ts) {
          System.out.println(i);
        } 
      } 
    } 
    ```

下面解决了您在使用`SortedSet`. 我看到你也想要一个迭代器，所以这行不通。

如果你真正想要的是一个类似有序*列表的*东西，你可以使用[`PriorityQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html).

```
Comparator<T> cmp = new MyComparator<T>();
PriorityQueue<T> pq = new PriorityQueue<T>(cmp);
pq.add(someT); 
```

请注意 API 文档中关于各种操作的时间属性的说明：

> 实现说明：此实现为入队和出队方法（ 、和）提供*O(log(n))*时间；和方法的*线性*时间；检索方法（、和）的*固定*时间。`offer``poll``remove()``add`*`remove(Object)``contains(Object)`*`peek``element``size`**

 **您还应该知道，由 生成的迭代器的`PriorityQueue`行为并不像人们预期的那样：

> 提供的`Iterator`in 方法`iterator()`不能保证以任何特定顺序遍历优先级队列的元素。如果您需要有序遍历，请考虑使用`Arrays.sort(pq.toArray())`.

我刚刚注意到 Guava 提供了一个[`MinMaxPriorityQueue`](http://docs.guava-libraries.googlecode.com/git-history/v10.0/javadoc/com/google/common/collect/MinMaxPriorityQueue.html). 此实现是由数组支持的，而不是 JDK 中提供的链接形式`PriorityQueue`，因此可能具有不同的计时行为。如果您正在做一些对性能敏感的事情，您不妨看看。虽然注释给出的大 O 时间略有不同（线性和对数），但所有这些时间也应该是有界的，这可能很有用。

本身并没有`List`维护顺序的实现，但您可能正在寻找的是[`SortedSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html). A[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)是最常见的。另一个实现， a`ConcurrentSkipListSet`用于更具体的用途。请注意， a`SortedSet`提供排序，但不允许重复条目， a 也是如此`List`。

参考：

*   博客文章[`PriorityQueue`迭代器未排序](http://blog.dpdearing.com/2011/04/iterating-over-a-priorityqueue-is-not-ordered/)
*   [关于PQ 有序迭代器](https://stackoverflow.com/questions/2277430/the-built-in-iterator-for-javas-priorityqueue-does-not-traverse-the-data-struct)的 SO 问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-26T08:29:05.200

我有一个类似的问题，我正在考虑使用 TreeSet。为了避免排除“相等”元素，我将修改比较器，因此它不会返回 0，而是返回一个介于 (-1,1) 之间的随机数，或者它将始终返回 1。

如果您无法控制比较器，或者您将其用于与插入此解决方案不同的其他用途，则对您不起作用。**

# java - 在 Java 中连接多个 .txt 文件

> ID：10675450
> 
> 赞同：18
> 
> 时间：2012-05-20T17:08:29.777
> 
> 标签：java, concatenation

我有很多`.txt`文件。我想将它们连接起来并生成一个文本文件。
我将如何在 Java 中做到这一点？

* * *

### 以下是案例

```
file1.txt file2.txt 
```

连接结果为

```
file3.txt 
```

这样 的内容*后面*`file1.txt`跟着`file2.txt`。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-20T17:55:04.923

## *使用*Apache Commons IO

您可以使用[Apache Commons IO](http://commons.apache.org/io/)库。这有[`FileUtils`](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html)课。

```
// Files to read
File file1 = new File("file1.txt");
File file2 = new File("file2.txt");

// File to write
File file3 = new File("file3.txt");

// Read the file as string
String file1Str = FileUtils.readFileToString(file1);
String file2Str = FileUtils.readFileToString(file2);

// Write the file
FileUtils.write(file3, file1Str);
FileUtils.write(file3, file2Str, true); // true for append 
```

此类中还有其他方法可以帮助以更优化的方式完成任务（例如使用*流*或*列表*）。

## *使用*Java 7+

如果您使用的是 Java 7+

```
public static void main(String[] args) throws Exception {
    // Input files
    List<Path> inputs = Arrays.asList(
            Paths.get("file1.txt"),
            Paths.get("file2.txt")
    );

    // Output file
    Path output = Paths.get("file3.txt");

    // Charset for read and write
    Charset charset = StandardCharsets.UTF_8;

    // Join files (lines)
    for (Path path : inputs) {
        List<String> lines = Files.readAllLines(path, charset);
        Files.write(output, lines, charset, StandardOpenOption.CREATE,
                StandardOpenOption.APPEND);
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-20T17:19:44.277

逐个文件读取并将它们写入目标文件。类似于以下内容：

```
 OutputStream out = new FileOutputStream(outFile);
    byte[] buf = new byte[n];
    for (String file : files) {
        InputStream in = new FileInputStream(file);
        int b = 0;
        while ( (b = in.read(buf)) >= 0)
            out.write(buf, 0, b);
        in.close();
    }
    out.close(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T17:29:57.637

这对我来说很好。

```
// open file input stream to the first file file2.txt
InputStream in = new FileInputStream("file1.txt");
byte[] buffer = new byte[1 << 20];  // loads 1 MB of the file
// open file output stream to which files will be concatenated. 
OutputStream os = new FileOutputStream(new File("file3.txt"), true);
int count;
// read entire file1.txt and write it to file3.txt
while ((count = in.read(buffer)) != -1) {
    os.write(buffer, 0, count);
    os.flush();
}
in.close();
// open file input stream to the second file, file2.txt
in = new FileInputStream("file2.txt");
// read entire file2.txt and write it to file3.txt
while ((count = in.read(buffer)) != -1) {
    os.write(buffer, 0, count);
    os.flush();
}
in.close();
os.close(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T17:16:31.417

您的意思是您需要一个包含其他文本文件内容的文件？然后，读取每个文件（您可以循环执行），将它们的内容保存在 StringBuffer/ArrayList 中，并通过将 StringBuffer/ArrayList 中保存的文本刷新到最终的 .txt 文件来生成最终的 .txt 文件。

别担心，这是一件容易的事。只要习惯给定的系统，就可以了:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T17:16:07.267

听起来像家庭作业...

1.  打开文件 1
2.  打开文件 2
3.  创建/打开文件 3
4.  从文件 1 读取并写入文件 3
5.  关闭文件 1
6.  从文件 2 读取并写入文件 3
7.  关闭文件 2
8.  关闭文件 3

如果您需要知道如何在 Java 中创建/打开/读取/写入/关闭文件，请搜索文档。[这些信息](http://docs.oracle.com/javase/tutorial/essential/io/)应该被广泛使用。

# c# - IObservable 按下的键

> ID：10675451
> 
> 赞同：3
> 
> 时间：2012-05-20T17:08:30.300
> 
> 标签：c#, .net, system.reactive

所以我可以试验反应式扩展，我想创建一个用户按下的键的 IObservable。我怎样才能做到这一点？

这适用于 C# 控制台应用程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T00:18:42.323

试试这个来获得一个可观察的读键序列：

```
 IObservable<System.ConsoleKeyInfo> keys =
            Observable
                .Defer(() =>
                    Observable
                        .Start(() =>
                            Console.ReadKey()))
                .Repeat(); 
```

我对此进行了测试，它就像一种享受。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T09:48:16.943

ReadKey() 的阻塞版本有一个问题，如果你处理订阅，它仍然会提示你按下一个键。

如果您想彻底取消订阅，即能够取消提示，则（不幸的是）有必要采用轮询方法。

```
Observable.Interval(TimeSpan.FromMilliseconds(100))
          .Where(_ => Console.KeyAvailable)
          .Select(_ => (char)Console.ReadKey(false).Key) 
```

你现在可以做一些很酷的事情，比如`Amb`这个流`Observable.Timer`来设置按键超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T19:23:28.283

我看不出如何异步读取按键，所以我认为你必须[`Console.ReadKey()`](http://msdn.microsoft.com/en-us/library/system.console.readkey)在单独的线程上使用同步，以及[`Subject<T>`](http://msdn.microsoft.com/en-us/library/hh229173%28v=vs.103%29.aspx). 就像是：

```
IObservable<ConsoleKeyInfo> ObserveKeysUntilEscape()
{
    var keys = new Subject<ConsoleKeyInfo>();

    Task.Run(
        () =>
        {
            ConsoleKeyInfo key;
            do
            {
                key = Console.ReadKey();
                keys.OnNext(key);
            } while (key.Key != ConsoleKey.Escape);
            keys.OnCompleted();
        });

    return keys;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T00:19:29.090

@svick 方法的替代方法是将`ReadKey`循环作为一个`Enumerable`，然后转换为一个`Observable`. 这将其置于后台。

```
 static IEnumerable<ConsoleKeyInfo> KeyPresses()
    {
        ConsoleKeyInfo key;
        do
        {
            key = Console.ReadKey();
            yield return key;
        } while (key.Key != ConsoleKey.Escape);
    } 
```

我们可以在线程池上生成 observables：

```
 var keys = KeyPresses().ToObservable(System.Reactive.Concurrency.Scheduler.ThreadPool);
        keys.Subscribe(key => Console.WriteLine("Pressed: {0}", key.Key)); 
```

并在主线程上等待`Escape`密钥：

```
 keys.Where(key => key.Key == ConsoleKey.Escape).First(); 
```

# c - C 在代码中获取编译选项

> ID：10675457
> 
> 赞同：0
> 
> 时间：2012-05-20T17:09:19.753
> 
> 标签：c, compilation, dynamic-compilation

我正在为应用程序编写 GUI，但主要开发人员希望在 Makefile 中设置 GUI 是否与其余部分一起编译。我将所有 GTK+ 代码放在一个单独的文件中，但在主文件中我需要测试应用程序是否正在使用 GUI 编译，那么我该如何测试呢？

例如：

```
if(COMPILED_WITH_GTK)
    #include "my_gtk_stuffs.h" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:16:49.710

假设这`COMPILED_WITH_GTK`是 Makefile 中编译器命令的一个参数（以 的形式`-DCOMPILED_WITH_GTK`），您使用预处理器指令。

```
#ifdef COMPILED_WITH_GTK
#include "my_gtk_stuffs.h"
#endif 
```

这告诉预处理器仅处理已定义的`#include`语句。`COMPILED_WITH_GTK`

看看[这里](http://en.wikipedia.org/wiki/C_preprocessor#Conditional_compilation)，也。

# c# - 为控制台应用程序创建锁

> ID：10675460
> 
> 赞同：1
> 
> 时间：2012-05-20T17:09:32.713
> 
> 标签：c#, locking, console-application

我有一个控制台应用程序，它将由设置 Windows 任务调度程序的不同批处理文件启动。我想对这些命令进行排队，或者在我的应用程序中使用某种锁定机制，让所有命令在队列中等待，以便一次只运行一个命令。我正在考虑做某种文件锁定，但我无法理解它如何用于排队命令。我只需要某种方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:19:12.577

对于进程间同步，您可以使用[`Mutex`](http://msdn.microsoft.com/en-us/library/01985e8f)表示命名系统互斥锁的实例。

```
// Generate your own random GUID for the mutex name.
string mutexName = "afa7ab33-3817-48a4-aecb-005d9db945d4";

using (Mutex m = new Mutex(false, mutexName))
{
    // Block until the mutex is acquired.
    // Only a single thread/process may acquire the mutex at any time.
    m.WaitOne();

    try
    {
        // Perform processing here.
    }
    finally
    {
        // Release the mutex so that other threads/processes may proceed.
        m.ReleaseMutex();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:14:08.843

寻找`Semaphore`对象。

```
_resultLock = new Semaphore(1, 1, "GlobalSemaphoreName");
if (!_resultLock.WaitOne(1000, false))  
{
    //  timeout expired
}
else
{
    //  lock is acquired, you can do your stuff
} 
```

您始终可以将超时设置为 Infinite，但不时控制程序流并能够优雅地中止是很实际的。

# apache - 可以让它工作htpasswd

> ID：10675461
> 
> 赞同：-1
> 
> 时间：2012-05-20T17:09:37.787
> 
> 标签：apache, .htaccess, .htpasswd

我可以让 .htpasswd 与 .htaccess 一起使用

我在 htacess 中有以下几行

```
<Files ".htaccess">
order allow,deny
deny from all
</Files>
AuthUserFile /var/www/example/.htpasswd
AuthName "Restricted Area"
AuthType Basic
Require valid-user  

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.+)$ /index.php/$1

and htpasswd look as it follows

user:passw
<Files ".htpasswd">
order allow,deny
deny from all
</Files> 
```

我正在尝试登录，但没有成功 apache error.log 告诉“/”：密码不匹配，但我已经检查了几次，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:18:00.813

使用 htpasswd 实用程序操作密码

见： http: [//linux.die.net/man/1/htpasswd](http://linux.die.net/man/1/htpasswd)

您的情况可以是：

```
htpasswd -c /var/www/example/.htpasswd user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:18:06.790

尝试使用以下站点生成密码：[htpasswd-generator](http://www.htaccesstools.com/htpasswd-generator/)并将文件放在站点的 Web 根目录之外而不是其中。

# ruby-on-rails - 从 RailsEngine 访问应用程序助手

> ID：10675463
> 
> 赞同：1
> 
> 时间：2012-05-20T17:09:53.153
> 
> 标签：ruby-on-rails, rails-engines

我有安装了引擎的 Rails 应用程序。

```
#{main_app}/config/routes.rb
mount CommentIt::Engine => "/talk", :as => 'comment_it' 
```

并希望在主应用程序布局中打开引擎视图。

```
#{main_app}/app/views/layouts/application.html.erb
<html>
  <body>
    <%= link_to "users", users_path %>
    <%= yield %>
  </body>
</html> 
```

访问引擎视图时（0.0.0.0:3000/talk）我收到错误**“未定义的方法 `users_path' for #<#:0x007f9dbf0f7800>”** users_path 在主应用程序视图中工作正常。访问引擎页面时，如何从主应用程序获取路由助手？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T07:39:33.340

我还不确定这可能是多么（不）明智，但刚刚发现以下内容适用于我正在研究的可安装/隔离引擎：

```
# in app/helpers/my_engine/application_helper.rb
module MyEngine
  module ApplicationHelper
    def method_missing(method, *args, &block)
      main_app.send(method, *args, &block)
    rescue NoMethodError
      super
    end
  end
end 
```

想法？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:30:58.833

从 Rails 3.2 开始，唯一的方法是将引擎转换为“完整”引擎，而不是可安装的引擎。在可挂载引擎中，引擎不了解主机应用程序，并且默认情况下无法访问其路径/url 助手。

[这个答案](https://stackoverflow.com/questions/7588870/engine-routes-in-application-controller#answer-7622755)解释了需要做什么，这对我有用。

另一种方法是遍历宿主应用程序的文件并将适当的视图/应用程序助手包含到您的引擎中。它有效，但对我来说太麻烦了。简单地转换成一个完整的引擎就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T17:25:25.640

如果您想从主应用程序访问引擎助手，您可以使用您在安装应用程序时为应用程序创建的名称。

在主应用程序的 config/routes.rb 中：

```
MyApplication::Application.routes.draw do
  mount MyEngine::Engine => "/some_engine", :as => "some_engine"
  get "/path_i_want_to_reference_from_main_app" => "some_controller#some_action"
end 
```

在主应用程序控制器/视图内部：

```
some_engine.path_i_want_to_reference_from_main_app_path 
```

因此，在您的情况下，您将使用：

```
<%= link_to "users", comment_it.users_path %> 
```

如果您想从引擎访问主应用程序助手，请尝试`main_app.users_path`

[http://edgeapi.rubyonrails.org/classes/Rails/Engine.html](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-15T00:47:12.760

要从我尝试的引擎视图访问主应用程序助手（ApplicationHelper），包括：

**app/helpers/your_engine/application_helper.rb**

```
module YourEngine
  module ApplicationHelper
    include ActionView::Helpers::ApplicationHelper
  end
end 
```

它可以工作，但是有一次，当我重新启动开发服务器时，它会抛出 me `uninitialized constant ActionView::Helpers::ApplicationHelper`，但我无法重现此异常。

**编辑**

删除了这个`include`并做了这个：

**lib/my_engine/engine.rb**（在引擎内部）

```
module MyEngine
  class Engine < ::Rails::Engine
    isolate_namespace MyEngine
    config.to_prepare do
      ApplicationController.helper(ActionView::Helpers::ApplicationHelper)
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-01T09:20:33.737

在我的情况下，我`MyCustomEngineController`在我的宝石里面，它继承了`ApplicationController`，像这样：

```
module MyEngine
  class MyCustomEngineController < ApplicationController

#... 
```

我稍微改变了这个继承：

```
module MyEngine
  class MyCustomEngineController < ::ApplicationController

#... 
```

`::`（提前通知`ApplicationController`）

现在我的所有应用程序的助手都可用于我的引擎视图

# php - 如何包含具有 2 个变量的随机数组

> ID：10675468
> 
> 赞同：0
> 
> 时间：2012-05-20T17:10:21.733
> 
> 标签：php, arrays, random

我的`config.php`包含：

```
$a1="title";
$b1="text";
$a2="title2";
$b2="text2"; 
```

我有`1.php`其中包括`config.php`.

我需要随机包含 ($a1 and $b1) 或 ($a and $b) 。

我怎样才能做到这一点？:)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:21:31.313

如果此数据是相关的，并且您需要一个随机集，请将其存储在一个数组中：

```
$sets = array(
    array(
        'title' => 'Some title',
        'text'  => 'Some text here about the title'
    ),
    array(
        'title' => 'Some other title',
        'text'  => 'Some other text here about the title'
    )
); 
```

有了这个数组，我们有两个索引可供我们选择：

```
$sets[0]; // Title: Some title, Text: Some text here about the title
$sets[1]; // Title: Some other title, Text: Some other text here about the title 
```

如果我们想要其中之一，随机地，我们可以执行以下操作：

```
$index = array_rand( $sets, 1 ); 
```

这将选择`0`或`1`。随着我们数组中的条目越来越多，这个数字变大的可能性也会增加。然后我们可以使用它来获取我们的一组数据：

```
$dataSet = $sets[ $index ]; 
```

然后显示输出：

```
echo $dataSet['title'];
echo $dataSet['text']; 
```

# c++ - C++ 返回类型与函数类型不匹配

> ID：10675470
> 
> 赞同：1
> 
> 时间：2012-05-20T17:10:32.760
> 
> 标签：c++

当我试图在我的函数中返回一个指向玩家的指针时，我收到一个错误“返回类型与函数类型不匹配”。编译器的错误是：

> '&' : 对绑定成员函数表达式的非法操作

```
CPlayer* CLevel::getPlayer()
{
return &player;
} 
```

在头文件中，这被定义为：

```
private:
    CPlayer player(Point p, CGame* game);

public:
    CPlayer* getPlayer(); 
```

关于我为什么会收到此错误以及如何删除它的任何想法？

编辑：

级别构造函数：

```
CLevel::CLevel()
{
Point p;
this->game=game;
p.x=0;
p.y=0;
player(Point p, CGame* game) {};

memset(tiles, GROUND, sizeof(TileType)*GRID_HEIGHT*GRID_WIDTH);
} 
```

Player.cpp 构造函数：

```
 CPlayer::CPlayer(Point pos, CGame* game)
 {
this->game=game;
Point p;
p.x=0;
p.y=0;
setPosition(p);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:12:24.867

因为在您的代码中，`player`是私有函数的名称：

```
private:
    CPlayer player(Point p, CGame* game); 
```

这是一个接受 a `Point`、 a`CGame*`并返回 a的函数`CPlayer`。

要声明`CPlayer`您需要的数据成员

```
private:
    CPlayer player; 
```

然后您可以在构造函数中对其进行初始化，例如：

```
CLevel(Point p, CGame* game) : player(p, game) {} 
```

和：

```
CLevel() : player(Point(), game) {
  this->game = .... ;
} 
```

或者，在 C++11 中，您可以这样做：

```
private:
    CPlayer player{Point(), nullptr}; // I am not sure where you were getting p and game in your original example 
```

# ruby-on-rails - 验证错误 - 未定义的方法“零？”

> ID：10675471
> 
> 赞同：0
> 
> 时间：2012-05-20T17:10:47.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3

每次我在任何模型上调用验证方法时，都会收到以下错误：

```
NoMethodError: undefined method `zero?' for nil:NilClass 
```

看来，如果我从自定义的 Array 类中删除函数 sum ，错误就会消失：

```
class Array
  def sum
    inject( nil ) { |sum,x| sum ? sum+x : x }
  end
.. 
```

为什么会这样？我怎样才能解决这个问题并仍然保留 sum 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:28:43.650

Rails 已经`sum`为数组提供了一个功能（实际上是在 Enumerable 模块上，以便可以在其他集合上使用）

它在两个方面与您的功能不同：

*   `[].sum`默认返回 0 而不是 nil
*   它接受一个块，即`[1,2,3].sum {|x| x * 2}`返回 12。

没有回溯很难判断，但大概 Rails 中的某些代码依赖于这两种行为中的第一种。删除您对`sum`函数的定义，一切都应该没问题。如果您需要将空列表`nil`的总和作为 rails 的 sum 方法，则将其作为可选参数返回空列表的内容

# java - 如何使变量可用于表达式评估器范围？如何添加我自己的？

> ID：10675473
> 
> 赞同：2
> 
> 时间：2012-05-20T17:10:54.047
> 
> 标签：java, jsp, el

我正在尝试了解有关 JSP 表达式评估的更多信息。如何以及哪些变量被确定在表达式访问范围内？

我有一个简单的 JSP（ELEvaluator 是一个方便的包装器）

```
<% String foo = "bar"; %>
<%= ELEvaluator.evaluate("${foo}", request, pageContext) %> //-> blank
<%= ELEvaluator.evaluate("${1 + 1}", request, pageContext %> // -> 2 
```

这些 vars/objs 是否必须存在于请求 obj 中？还是在 pageContext/Evaluator 注册？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T17:18:29.673

`${foo}`方法

*   找到一个名为“foo”的页面范围属性，如果没有找到
*   找到一个名为“foo”的请求范围属性，如果没有找到
*   找到一个名为“foo”的会话范围属性，如果没有找到
*   找到一个名为“foo”的应用程序范围属性

因此，如果您希望某个对象对 EL 可用，请将其存储在适当的范围内：

```
pageContext.setAttribute("foo", theObject);
// or
request.setAttribute("foo", theObject);
// or
session.setAttribute("foo", theObject);
// or
servletContext.setAttribute("foo", theObject); 
```

# c++ - Android OpenGL ES 2.0：GL_FLOAT 纹理可以作为颜色附件分配给 FBO 吗？

> ID：10675479
> 
> 赞同：3
> 
> 时间：2012-05-20T17:12:02.067
> 
> 标签：c++, c, android-ndk, opengl-es-2.0, fbo

我想通过 glReadPixels使用*GL_FLOAT 纹理获取值。*

我的 Android 设备支持*OES_texture_float*。*但是，附加GL_FLOAT*纹理成为错误。

在 Android 的 OpenGL ES 2.0 中，将*GL_FLOAT*纹理附加到 FBO 是不可能的？还是依赖硬件？

我的部分代码是：

在里面：

```
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_2D,texture);
glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,texWidth,texHeight,0,GL_RGB,GL_FLOAT,NULL); 
```

FBO 附加：

```
glBindFramebuffer(GL_FRAMEBUFFER,framebuffer);
glFramebufferTexture2D(GL_FRAMEBUFFER,GL_COLOR_ATTACHMENT0,GL_TEXTURE_2D,texture,0);
checkGlError("FBO Settings");
// glGetError() return 0x502.
status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
// glCheckFramebufferStatus() return 0. 
```

如果有人有一些见识，我会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:53:18.010

未扩展的 OpenGL ES 2.0 不允许这种类型的 FBO，但是有一些扩展（和一些移动 GPU）支持浮点缓冲区。看看[GL_OES_texture_float](http://www.khronos.org/registry/gles/extensions/OES/OES_texture_float.txt)和[GL_NV_fbo_color_attachments](http://www.khronos.org/registry/gles/extensions/NV/GL_NV_fbo_color_attachments.txt)。

nVidia Tegra 3 支持浮点 FBO。

PS 使用 Tegra 2 似乎也是可能的：[http ://forums.developer.nvidia.com/devforum/discussion/1576/tegra-2-slow-floating-point-texture-operations/p1](http://forums.developer.nvidia.com/devforum/discussion/1576/tegra-2-slow-floating-point-texture-operations/p1)

# android - 禁用默认主页启动器

> ID：10675484
> 
> 赞同：2
> 
> 时间：2012-05-20T17:12:29.793
> 
> 标签：android, homescreen

我正在为 android 构建一个主屏幕应用程序，我想禁用（临时）默认主屏幕（TwLauncher）或任何正在运行的应用程序。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T21:25:06.603

您不能禁用其他主屏幕，但您可以通过将适当的意图过滤器添加到清单中来将您的应用注册为主屏幕：

```
<activity android:name="Home"  
        android:theme="@style/Theme"  
        android:launchMode="singleInstance"  
        android:stateNotNeeded="true">  
    <intent-filter>  
        <action android:name="android.intent.action.MAIN" />  
        <category android:name="android.intent.category.HOME"/>  
        <category android:name="android.intent.category.DEFAULT" />  
    </intent-filter>  
</activity> 
```

*不同的主屏幕可以同时存在，用户最终手动*决定将哪个主屏幕设置为默认主屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T21:20:41.903

请在官方网站上查看此示例代码：[Home app sample](http://developer.android.com/resources/samples/Home/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:29:54.217

我在这里也遇到了这个问题，解决方案是转到默认启动器的首选项，寻找ex的退出：exit go launcher ex then ok。这将禁用默认值。

# php - 更改请求的引用者不起作用

> ID：10675486
> 
> 赞同：0
> 
> 时间：2012-05-20T17:12:32.940
> 
> 标签：php

我正在尝试使用以下方法伪造请求的引用者：

```
<?php

$url = "http://www.blabla.com";

function doMagic($url)
{
  $curl = curl_init();

  $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
  $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
  $header[] = "Cache-Control: max-age=0";
  $header[] = "Connection: keep-alive";
  $header[] = "Keep-Alive: 300";
  $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
  $header[] = "Accept-Language: en-us,en;q=0.5";
  $header[] = "Pragma: ";

  curl_setopt($curl, CURLOPT_URL, $url);
  curl_setopt($curl, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.12011-10-16 20:23:00");
  curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
  curl_setopt($curl, CURLOPT_REFERER, "http://www.fakeRef.com");
  curl_setopt($curl, CURLOPT_ENCODING, "gzip,deflate");
  curl_setopt($curl, CURLOPT_AUTOREFERER, true);
  curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($curl, CURLOPT_TIMEOUT, 10);

  $html = curl_exec($curl);
  echo 'Curl error: '. curl_error($curl);
  curl_close($curl);

  return $html;
}

$text = doMagic($url);
print("$text");
?> 
```

我有一个本地 apache 服务器，用于运行这个 PHP 脚本：localhost/script.php。问题是实际的引用者（Piwik 报告的）是 localhost/script.php，而不是[http://www.fakeRef.com](http://www.fakeRef.com)。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:19:08.817

> 问题是实际的引用者（Piwik 报告的）是 localhost/script.php，而不是[http://www.fakeRef.com](http://www.fakeRef.com)。
> 
> 这里有什么问题？

您似乎正在浏览器中查看 curl 操作的输出。然后解释很简单。Piwik 使用跟踪图像来计算您的点击次数。*浏览器*加载跟踪图像；图片的引用者将是您的脚本，而不是您用来获取 HTML 代码的假值。

如果您想测试以这种方式设置引荐来源网址是否有效，请查看您的服务器访问日志。那里的`script.php`请求应该包含伪造的引用者。

# c++ - 关于如何使用 JUCE 托管 VST 插件的教程？

> ID：10675494
> 
> 赞同：2
> 
> 时间：2012-05-20T17:13:09.023
> 
> 标签：c++, vst, juce

我想编写一些代码来在我的 C++ 应用程序中托管 VST 插件。看起来 JUCE 库可能对此有所帮助。有谁知道我在哪里可以找到有关如何在 JUCE 中托管和连接 VST 插件的教程？

我已经构建了 JUCE 代码并使“插件主机”示例正常工作。看起来图书馆将能够做我想做的事。我的问题是我发现示例代码难以理解（评论不多等）。它还使用大量 JUCE 特定的编码来管理 UI 等。我发现很难将管理 VST 插件所需的操作与示例中的其他代码分开。

如果有人知道教程，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-31T22:54:13.703

[本教程](https://artandlogic.com/2013/02/developing-audio-applications-with-juce-part-1/)介绍了使用 JUCE 开发音频应用程序，并[在第 2 部分中介绍了托管 VST 插件](https://artandlogic.com/2013/03/developing-audio-applications-with-juce-part-2/)。

（编辑：我更新了链接，还请注意他们有该系列的第 3 部分）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T08:02:48.487

大多数示例 Juce 代码确实是非常特定于 Juce 的，如果您打算使用该平台，我鼓励您坚持使用它并推动示例，即使它们可能不是很漂亮。

不过，了解更多有关 Juce 之外的 VST 托管的信息可能会对您有所帮助。[这是在 C++ 应用程序中手动托管 VST 的教程](http://teragonaudio.com/article/How-to-make-your-own-VST-host.html)。

# javascript - 在页面最初加载时执行淡入？

> ID：10675497
> 
> 赞同：4
> 
> 时间：2012-05-20T17:13:18.367
> 
> 标签：javascript, jquery, debugging, implementation, fadein

我正在编写一些 jQuery 代码来应用页面转换。我想要jQuery代码做的基本上是应用页面的淡入效果，如下所示：

```
$("body").css("display", "none");
$("body")().fadeIn(400); 
```

一旦页面加载页面重新加载，然后指示淡入效果，但我想要发生的是从一开始就对整个网页产生淡入效果并尝试过：

`$(document).load(function() {`

但是，这不起作用。我也试过这段代码无济于事：

```
$("body").load().css("display", "none");
$("body").load().fadeIn(400); 
```

我的代码块中是否有任何可见的错误可以被纠正以应用所需的行为，或者社区是否可以将我引导到一个指南，该指南展示了我的目标的正确实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:15:44.903

你可以把它放在一个`.css`文件中 -

```
body { display:none; } 
```

或者甚至像这样将它内联 -

```
<body style="display:none;" > 
```

然后在`$(document).ready()`回调中淡入淡出使用它 -

```
$(document).ready(function(){
   $("body").fadeIn(400);
}); 
```

浏览器将首先根据您的`css`文件呈现 HTML。所以当浏览器开始渲染`<body>`标签时，它会看到一个 css 规则说它的`display`属性必须设置为`none`. 只有在加载了所有 HMTL**并且**jQuery 准备就绪（`$(document).ready()`）之后，您才能调用您的`fadeIn()`;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:16:13.203

您可以使用 CSS 将整个页面设置为不可见或隐藏：

```
body {
    display: none;
} 
```

或者：

```
body {
    visibility: hidden;
} 
```

您可以将其设置为`<head>`. 然后在 jQuery 中，你可以让它在加载后淡入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T17:16:42.970

```
//    $("body")().fadeIn(400); // this is incorrect, try with:
$('body').fadeIn(400); 
```

这意味着：

```
$("body").css("display", "none");

$(window).load(function(){  // use "window"
  $('body').fadeIn(400);
}); 
```

或者您可以尝试`display:none;`直接从您的 CSS 设置（取决于您的需要）

```
body{
  display:none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T17:17:08.083

您应该在窗口而不是 DOM 上使用负载。

尝试 ：

```
 $(window).load(function(){

    $("body").css("display", "none");
    $("body").fadeIn(400);

}) 
```

为了进一步解释，请尝试[这里](http://blog.eizesus.com/2009/03/jquery-s-ready-runs-before-load-event/)

# c++ - CSimpleIniA - 包装类的方法不读取配置文件值

> ID：10675500
> 
> 赞同：0
> 
> 时间：2012-05-20T17:13:58.180
> 
> 标签：c++

我将[CSimpleIniA](http://code.jellycan.com/simpleini/)包装在 Config 类中以管理“config.ini”文件中的配置选项。

在我提供的示例中，在构造函数`sample_size`中读取。`Config`调用时`readSampleSize()`，返回配置文件的值。

相比之下，`readInitialPos()`应该（我所期望的）能够读取`config.ini`并返回`inital_pos`. 相反，它返回默认值，即第三个参数`70000`。

我不明白为什么第二种方法不起作用。

配置文件

```
class Config {

private:
    unsigned long int sample_size;  
public:
    unsigned long int readInitialPos ();

    unsigned long int readSampleSize ();

    CSimpleIniA ini;

    Config ();
}; 
```

配置文件

```
#include "../include/config.hpp"

Config::Config () 
{
    CSimpleIniA ini;
    int error_nr = ini.LoadFile("config/config.ini");
    if ( error_nr ) {
        cout << "Error " << error_nr << " opening config.ini file." << endl;
        exit(3);
    }
    sample_size = ini.GetLongValue("Rock", "sample_size", 50);
}

unsigned long int Config::readInitialPos ()
{
    return ini.GetLongValue("Rock", "initial_pos", 70000);
}   

unsigned long int Config::readSampleSize ()
{
    return sample_size;
} 
```

来电者，rock.cpp

```
void Rock::readConfig ()
{
    Config config;

    initial_pos = config.readInitialPos ();

    sample_size = config.readSampleSize ();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:31:16.507

```
Config::Config () 
{
    CSimpleIniA ini;                                     // <== here!
    int error_nr = ini.LoadFile("config/config.ini");
    // etc...
} 
```

那是一个错误。您的局部`ini`变量隐藏了该类的 ini 成员。因此，您的 readInitialPos() 方法使用了一个您从未调用过 LoadFile() 的 CSimpleIniA 对象。

只需将其删除即可修复错误。

Fwiw，避免使用 .ini 文件，它们非常昂贵。读取一个值大约需要 50 毫秒。

# asp.net - 使用带有自定义身份验证的 asp.net 身份验证

> ID：10675504
> 
> 赞同：0
> 
> 时间：2012-05-20T17:14:40.083
> 
> 标签：asp.net, asp.net-mvc

这是我的场景。

我有另一个域公开的身份验证 Web 服务。现在我希望将用户名和密码发送到该外部域进行身份验证。当用户通过身份验证（返回`true`）时，我希望 ASP.net 进一步进行身份验证并让用户进入并为我提供所有可访问的 asp.net 标准实用程序，例如 currentuser、Isauthorized、Roles 等，供用户使用，经过身份验证. 我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:58:16.037

这不是问题。您有多种选择。一种方法是将表单身份验证与您自己的安全模型相结合。

基本思想是让 Forms Auth 为登录用户创建和管理票证（以加密票证的形式）。票证用于确定某人是否已登录，以及他们是谁。然后，您可以在此之上混合任何其他与安全相关的逻辑。

要处理登录请求，您只需像往常一样拥有一个控制器和操作。注意：在下面的示例中，我对`LoginViewModel`、您用于身份验证的服务以及它返回的对象（如果有）进行了一些假设。你必须加入你的实际逻辑。

```
public ActionResult Login(LoginViewModel model)
{
      // make sure the user filled out the login fields correctly
      if (!ModelState.IsValid) return View(model);

      // authenticate the user here
      var authenticatedUser = AuthorizeUserUsingRemoteWebService(model.Username, model.Password);

      if (authenticatedUser.IsAuthenticated) 
      {
         // create forms auth ticket cookie and redirect to the home page
         FormsAuthentication.SetAuthCookie(authenticatedUser.Username);

         return RedirectToAction("Index", "Home");
      }

     // authentication failed, so show the login page again 
     return View(model);
} 
```

除此之外，您可能有一个处理 AuthenticateRequest 事件的 HTTP 模块。您的模块将在 Forms Auth HTTP 模块之后注册，因此它已经处理了用户是否登录。您要做的是查找其他信息（如果他们已登录），以获取角色等。

```
public class CustomAuthHttpModule : IHttpModule
{    
    public void Init(HttpApplication context)
    {
        context.AuthenticateRequest += new EventHandler(OnAuthenticateRequest);
    }

    void OnAuthenticateRequest(object sender, EventArgs e)
    {
        HttpApplication application = (HttpApplication)sender;
        HttpContext context = appObject.Context;

        // user isn't logged in, so don't do anything else
        if (!context.User.Identity.IsAuthenticated) return;

        // look up the roles for the specified user, returning the role names as an array of strings
        string[] roles = LookupUserRolesFromWebService(context.User.Identity.Name);

        // replace the current User principal with a new one that includes the roles we discovered for that user.
        context.User = new GenericPrincipal(new GenericIdentity(context.User.Identity.Name), roles);
    }
} 
```

您将在 web.config 中注册 HTTP 模块：

```
<httpModules>
    <add name="CustomAuthHttpModule" 
       type="MyAssembly.CustomAuthenticationModule, MyAssembly" />
</httpModules> 
```

您现在可以在 MVC 控制器和视图中使用 User 对象`AuthenticatedAttribute`，等等。

但是，我建议您缓存查找用户角色的结果，以免影响您的 Web 服务。我会把它留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T20:39:35.427

您可以为您的应用程序使用安全令牌服务。设置 Windows Identity Foundation SDK 并在 sdk 目录中查找示例（对我来说，它是“C:\Program Files (x86)\Windows Identity Foundation SDK\v4.0\Samples\End-to-end\Federation for Web Apps”） . 其中之一（名为“Federation for Web Apps”）实现了您的 AD 身份验证案例。

# javascript - Javascript 中的错误：未定义对象

> ID：10675505
> 
> 赞同：0
> 
> 时间：2012-05-20T17:15:11.767
> 
> 标签：javascript

我有以下带有 javascript 的 Html 文件。这给了我“testCircle 未定义”的错误。kinldy 帮我解决这个问题。

```
<html>
    <body>
    <h1> Testing Object-based Javascipt </h1>
    <script type="text/javascript">
    function mycircle(x,y,r)
    {
    this.xcoord=x;
    this.ycoord=y;
    this.radius=r;
    this.area = getArea;
    this.getCircumference = function () { return (2 * Math.PI * this.radius ) ; };
    }
   function getArea()
   {
   return (Math.PI * this.radius * this.radius);
   }
        var testCircle = mycircle(3,4,5);

   window.alert('The radius of my circle is ' + testCircle.radius);

   </script>

   </body>
   </html> 
```

提前致谢....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T17:18:12.157

```
var testCircle = mycircle(3, 4, 5); 
```

应该

```
var testCircle = new mycircle(3, 4, 5); 
```

构造函数将使用`new`关键字调用。如果未使用关键字，则您正在分配`mycircle`函数的返回值。由于`mycircle`不包含任何`return`语句，因此返回值是`undefined`- 这就是您`testCircle`在代码中分配的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:27:32.487

我得到的错误是未定义的半径。如果是这种情况。如果您打算在没有新构造函数的情况下使用它，则需要在 mycircle 末尾返回它。

如[更新所见：this fiddle here](http://jsfiddle.net/UZYff/1/)。

修复：断开的链接

# visual-studio-2010 - 我在 Visual Studio 2010 Professional 中找不到“使用母版页的 Web 表单”

> ID：10675506
> 
> 赞同：6
> 
> 时间：2012-05-20T17:15:16.307
> 
> 标签：visual-studio-2010

我正在阅读[Microsoft® ASP.NET 4 Step by Step](http://shop.oreilly.com/product/9780735627017.do)，我在第 148 页。

教程说要添加一个新`Web Form Using Master Page`项目，但我找不到它！

书中截图如下：

![图书截图](../Images/9cbbdeea006d3ddc24ce202a6fa2c7b9.png)

这就是我所看到的：

![我的截图](../Images/c501550280e2da10981cc294e2daa9b9.png)

我怀疑这本书是错的，所以我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T19:01:48.197

回答有点晚了，但是 JMK 从书中发布的屏幕截图可能显示了 Visual Web Developer 的 UI。在 Visual Studio 中，您将选择“Web 窗体”。然后，在名称字段旁边的右下角，有两个复选框（见 JMK 的第二个屏幕截图）。勾选“选择母版页”。单击添加（或按 Enter），您将选择要使用的母版页。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-15T14:07:09.760

“使用母版页的 Web 表单”的名称是Visual Studio 2012 上的**ContentPage**（framwWork 4）只需从“添加 --> 新项目> contentPage”添加一个 ContentPage

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-12T07:18:17.873

右键单击您的母版页并选择“添加内容页”。

![在此处输入图像描述](../Images/5db83f30983103042a133cc0d6e2c81b.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-20T17:35:55.800

如果您非常仔细地比较这些屏幕截图，您会看到在顶部的屏幕中，用户点击了左侧面板中的“Visual C#”。

您使用了不同的方法来导航到您的选择。您似乎在屏幕右上角的搜索框中输入了“master”。在左侧面板中，“搜索​​结果”突出显示。

**我相信如果你点击左边的“Visual C#”，你会看到书中的截图。**

您在搜索中找到的是用于创建母版页的选择。您正在寻找的是如何创建 Web 表单，特别是使用母版页的 Web 表单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-27T04:47:30.157

我发现网站场景中缺少“使用母版页的 Web 表单”。对于网站，您可以通过右键单击您的母版页并选择“添加内容页”来添加“使用母版页的 Web 表单”。而当你制作一个项目时，它会在添加新项目中显示出来。

# php - 在 MVC 中，我在哪里放置数据库查询？

> ID：10675512
> 
> 赞同：8
> 
> 时间：2012-05-20T17:15:49.223
> 
> 标签：php, model-view-controller, oop, design-patterns

最近几天，我广泛阅读了关于 PHP 中的 OOP 和 MVC 的书籍和网页，以便我可以成为一个更好的程序员。我对 MVC 的理解遇到了一个小问题：

**我在哪里放一个`mysql_query`？**

我应该把它放在控制器中并在模型上调用一个方法，该方法根据提供的查询返回数据吗？或者我应该把它放在模型本身？我提供的两个选项都是垃圾吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T12:16:27.293

## 关于 MVC 主题的材料

您可以列出您正在阅读的书籍，因为大多数（如果不是全部）涉及 MVC 的 php 书籍都是错误的。

如果您想成为一名更好的开发人员，我建议您从 Martining Fowler 的文章 - [*GUI Architectures*](http://martinfowler.com/eaaDev/uiArchs.html)开始。其次是同一作者的书- [*“企业应用程序架构的模式”*](https://rads.stackoverflow.com/amzn/click/com/0321127420)。那么下一步就是让你研究[SOLID 原理](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))并了解如何编写遵循[得墨忒耳法则的](http://c2.com/cgi/wiki?LawOfDemeter)代码。这应该涵盖基础知识=]

## 我可以将 MVC 与 PHP 一起使用吗？

并不真地。至少不是[为 Smalltalk 定义](http://www.itu.dk/courses/VOP/E2005/VOP2005E/8_mvc_krasner_and_pope.pdf)的经典 MVC 。

相反，在 PHP 中，您有 4 种其他模式旨在实现相同目标：MVC Model2、MVP、MVVM 和 HMVC。同样，我懒得再写一次差异，所以我将链接到我的[旧评论](https://stackoverflow.com/a/7622038/727208)。

## 什么是模型？

您必须了解的第一件事是 MVC 中的 Model 不是类或对象。它是一个包含多个类的层。基本上模型层是所有层的组合（尽管第二层应该称为“域对象层”，因为它包含“域模型对象”）。如果您想阅读有关模型层每个部分中包含的内容的快速摘要，您可以尝试阅读[这个旧评论](https://stackoverflow.com/a/9685039/727208)（跳到“旁注”部分）。

                            ![模型层由所有 3 个同心圆组成](../Images/df87065c8812f0d35fae4d75ea0d7a67.png)
图片取自Fowler 网站上的[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)文章。

## 控制器做什么？

Controller 在 MVC 中有一个主要职责（我将在这里讨论 Model2 的实现）：

> 从模型层（服务或领域对象）对结构执行命令，这会改变所述结构的状态。

它通常有一个次要的责任：将结构从模型层绑定（或以其他方式传递）到视图，但如果您遵循[SRP ，这将成为一种有问题的做法](http://en.wikipedia.org/wiki/Single_responsibility_principle)

## 我在哪里放置 SQL 相关代码？

信息的存储和检索在数据源层处理，通常作为[DataMapper](http://martinfowler.com/eaaCatalog/dataMapper.html)实现（不要与滥用该名称的 ORM 混淆）。

以下是它的简化用法：

```
$mapper = $this->mapperFactory->build(Model\Mappers\User::class);
$user = $this->entityFactory->build(Model\Entities\User::class);

$user->setId(42);
$mapper->fetch($user);

if ($user->isBanned() && $user->hasBannExpired()){
    $user->setStatus(Model\Mappers\User::STATUS_ACTIVE);
}

$mapper->store($user); 
```

如您所见，域对象甚至都不知道来自它的信息已被存储。而且它也不是关于你把数据放在哪里的情况。它可以存储在 MySQL 或 PostgreSQL 或一些 noSQL 数据库中。或者可能推送到远程 REST API。或者，映射器可能是用于测试的模拟。要替换映射器，您需要做的就是为这种方法提供不同的工厂。

### 另外，请参阅以下相关帖子：

*   [理解 PHP 中的 MVC 视图](https://stackoverflow.com/a/16596704/727208)
*   [具有依赖关系的可测试控制器](https://stackoverflow.com/a/20829238/727208)
*   [服务之间应该如何通信？](https://stackoverflow.com/a/27495720/727208)
*   [适用于高级 PHP 开发人员的 MVC](https://stackoverflow.com/a/16356866/727208)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-20T17:38:17.450

模型和实体类代表应用程序的数据和逻辑，许多人称之为业务逻辑。通常，它负责：

1.  存储、删除、更新应用程序数据。通常它包括数据库操作，但实现调用外部 Web 服务或 API 的相同操作一点也不稀奇。
2.  封装应用程序逻辑。这是应该实现应用程序所有逻辑的层

这是 MVC 序列图，它显示了 http 请求期间的流程：

![在此处输入图像描述](../Images/48f6ab0ee632f6bc29aed5c4edb1ccb4.png)

在这种情况下，模型是实现访问数据库的代码的最佳位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T17:23:19.213

一方面，不要`mysql_query()`和家人一起使用；它们已被弃用，因此请考虑学习 PDO 和/或 mysqli。

该模型负责数据处理；它为控制器提供一个接口，通过该接口检索和/或存储信息。所以这将是数据库操作发生的主要地方。

**更新**

要回答 OP 在评论中提出的问题：“整个数据库的通用模型还是每个表/动作的模型？”

模型旨在抽象出单个表（尽管有些模型专门处理单个表）；例如，与其询问所有文章然后查询作者的用户名，不如使用如下函数：

```
function getArticles()
{
    // query article table and join with user table to get username
} 
```

您将创建多少模型很大程度上取决于项目的规模以及数据的相互关联程度。如果您可以识别独立的数据组，您可能会为每个组创建一个模型；但这不是硬性规定。

数据操作可以是同一个模型的一部分，除非您想要明确区分只读模型和只写模型（我不知道有什么情况值得这样做，但谁知道）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-20T17:28:21.570

模型包含表示应用程序状态的域对象或数据结构。[[维基百科]](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。所以模型将是进行数据库调用的地方。

在“经典”（没有更好的词 atm）MVC 模式中，视图将从模型中获取当前状态。

不要误以为模型是用于访问数据库的。它不仅仅是访问数据库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T17:52:16.707

更进一步，您的模型不应包含数据库访问代码。这属于模型/视图/控制器之外的另一层：这称为**持久层**，可以使用[对象关系映射器](http://en.wikipedia.org/wiki/Object-relational_mapping)（例如流行的 PHP[学说 2 ）来实现。](http://www.doctrine-project.org/)

这样，您就永远不会接触任何（我的）SQL 代码。持久层会为您解决这个问题。我真的建议你看看 Doctrine 教程，这是一种非常专业的创建应用程序的方法。

您无需使用从数据库加载的原始数据，而是创建保存数据的对象以及与之关联的行为。

例如，您可能有一个`User`类，例如：

```
class User
{
    protected $id;
    protected $name;
    protected $privileges;

    public function setName($name) { ... }
    public function getName() { ... }

    public function addPrivilege(Privilege $privilege) { ... }
    public function getPrivileges() { ... }
} 
```

您的控制器只会与对象交互：

```
class UserController
{
    public function testAction()
    {
        // ...

        $user = $em->getRepository('User')->find(123); // load User with id 123
        $user->setName('John'); // work with your objects,
        echo $user->getName();  // and don't worry about the db!
        $em->flush(); // persist your changes
    }
} 
```

在幕后，ORM 负责发出`SELECT`查询、实例化对象、检测对对象的修改以及发出必要的`UPDATE`语句等所有低级工作！

# wordpress - Wordpress：如果类别没有子项显示 single.php 否则显示 archive.php

> ID：10675513
> 
> 赞同：0
> 
> 时间：2012-05-20T17:16:03.513
> 
> 标签：wordpress, templates, if-statement, parent, categories

按照标题，

我正在使用显示我的类别和子类别的手风琴菜单。

如果一个类别有任何孩子，我希望使用我修改后的 archive.php 显示结果。但是，如果没有孩子，我希望帖子显示在 single.php 上。

提前谢谢了。

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:31:30.643

不久前，我写了一个名为[Category Template Hierarchy](http://wordpress.org/extend/plugins/category-template-hierarchy)的插件，它可以让你轻松地完成你想要做的事情，因为它可以让你专门为作为父模板的模板创建模板。

它不会使用`archive.php`，但它允许您创建一个名为`parent-category.php`. 任何不是父级的都将被忽略。

此外，该插件使您可以访问条件标签`is_parent_category()`。

# mysql - 从多个列和行与“X”相交的 2 个表中选择数据

> ID：10675514
> 
> 赞同：0
> 
> 时间：2012-05-20T17:16:05.480
> 
> 标签：mysql

很难解释我要做什么，所以我有 2 个表来自一个 excel 电子表格。电子表格定义了因果关系。它有 3 个参考点，所以我无法将其放入 1 个表中

此电子表格左侧有一个事件列表，顶部有一个效果列表。这些通过在将事件与效果匹配的行/列中插入 X 来相互关联。所以相交的列/行形成一个矩阵。因此，例如一个事件可能是。'打开电灯开关'。沿着这一行直到找到“X”。然后跟随列到效果，它显示“灯亮”（它比现实中的要复杂一点）在同一行中可以有多个由 X 定义的效果

我的想法是在 where 语句中使用 table1.* 和 table2.* 但我正在寻找通配符来搜索行/列，但经过研究，这在 mysql 中是不可能的。对所有进一步的行/列组合使用 OR 将不起作用，因为它只显示带有 X 的所有内容

我有点难过如何查询表的 X 行/列部分，所以在搜索所有 X 之后只显示查询的“示例”结果部分下面的单个查询是成功的，但我需要搜索 table1.1- 60 table2.2-61 只在网页 mysql/php 类型表单中更改查询的 '%example%' 部分，然后在另一个页面上显示结果，出现 'X'

欢迎任何建议/替代方案谢谢

```
SELECT
table1.equipment,
table1.tagno,
table2.equipment,
table2.action,
table2.service,
table2.tagno
FROM
table1 ,
table2
WHERE
table1.tagno LIKE '%example%' AND
table1.1 = 'X' AND
table2.2 = 'X' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:36:45.830

没有自然的方法可以将column in`N`与`table1`column `N+1`in连接起来`table2`；您必须“手动”指定连接（或在程序中，这两者都很难看）。

你要：

```
select * from table1 t1, table2 t2 
where t1.tagno like '%example%' AND t1.1 ='X' and t2.2 = 'X'
UNION
select * from table1 t1, table2 t2 
where t1.tagno like '%example%' AND t1.2 ='X' and t2.3 = 'X'
UNION
-- ... 
```

这可能非常低效。正如评论中所建议的，重塑数据会给你带来更清晰的查询和更幸福的未来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T23:41:14.580

为了更深入地了解我的建议，我将像这样重新建模数据：

```
CREATE TABLE effects (
         id INT,
         name VARCHAR(100)
       );

CREATE TABLE events (
         id INT,
         name VARCHAR(100)
       );

CREATE TABLE effects_events (
         effect_id INT,
         event_id INT
       ); 
```

effects_events 是一个[连接表](http://en.wikipedia.org/wiki/Junction_table)

所以你可以这样查询：

```
SELECT * FROM events WHERE events.id = effects_events.event_id AND effects_events.effect_id = effects.id AND effects.name = 'light turns on'; 
```

或者：

```
SELECT * FROM effects WHERE effects.id = effects_events.effect_id AND effects_events.event_id = events.id AND events.name = 'turn on lightswitch'; 
```

我可能会误解您的问题中的某些内容，但这对我来说似乎是最直接的解决方案。

# php - 用php创建分析图表

> ID：10675520
> 
> 赞同：1
> 
> 时间：2012-05-20T17:16:35.427
> 
> 标签：php, mysql

我正在用 php 和 mysql 开发一个 web 应用程序。我的网站上有视频，用户可以上传他们的视频。

现在，我想通过为视频视图创建简单的分析图表来增加交互性。

图表将包含每个月的视图。问题是我不知道从哪里开始。

谁能告诉我将每个月的视频浏览量存储在数据库中然后以条形图的形式查看的逻辑？（就像谷歌分析说每月或每周的访问者数量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:39:29.977

谷歌图表将非常适合您想要做的事情。我自己使用它们。只需使用 PHP json_encode 输出统计信息。

然后使用 cron 作业来获取当前的 veiws 数量或其他统计信息，并将它们存储在数据类型文本行中。

[https://developers.google.com/chart/](https://developers.google.com/chart/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:26:54.127

有一个包含 video_id、count、month 和 year 列的表。video_id、月份和年份组合为唯一键。

每当观看视频时（按照要求的编程术语）尝试插入 video_id、1、月份和年份。检查您是否收到唯一密钥违规。如果你这样做了，而不是插入你用 count + 1 更新计数。

要获取月份和年份，您可以使用 MYSQL 日期函数。video_id 将从前端发送，并且可以轻松增加计数。

获得此表后，您始终可以获取该月和该年的特定视频的总计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T17:39:41.793

**何时计算观看次数？**

* * *

您必须定义何时计算视图。可能最好的方法是分析某个用户访问视频的时间间隔、播放时间以及可能的一些标识符，例如他的用户代理，以便能够区分 IP 地址后面的多个用户（如果用户不是t 登录）。

**插入视图**

* * *

一旦你决定是否计算一个视图，你就必须将它插入到数据库中。这取决于您使用的数据库和表结构。看看[PHP MySQL](http://www.w3schools.com/php/php_mysql_intro.asp)教程，或者如果你认为你可以做更多，看看[PDO](http://ch2.php.net/manual/en/book.pdo.php)，它可以更安全和有用。

为了能够分析每月统计数据，您必须在每个视图中插入时间戳。最后，您只需选择指定日期的值（在您的情况下为上个月）。

这要求您至少知道如何设置在其中插入数据的数据库表。

**显示视图**

* * *

由于数据库中的每个视图都有一个条目，因此最好的办法是创建一个自动作业，它使用视图总数更新另一个表。这将减少负载，并防止您的用户立即看到查看次数（如果有人试图增加查看次数，这可能会有所帮助——>他无法立即查看他是否成功）。

**创建图表**

* * *

首先，您必须选择值。假设您的用户能够指定他想要查看视图的日期范围，您必须采用该范围，用它查询您的数据库，然后继续处理结果。如何选择它取决于您希望如何显示它。如果您想显示该月的每一天，则必须按天对视图进行分组。

实际显示数据的方式对您开放。它可以是非常简单的东西，带有表格的东西，或者您可以使用[JpGraph](http://jpgraph.net/)之类的东西来创建图形作为图像。我个人将 JpGraph 用于类似的东西。需要一些努力，但值得付出努力。

我希望这能让您以某种方式了解如何解决您的问题。如果您有更具体的问题，请发布一些代码和您正在尝试做的事情，因为**该**解决方案不存在。

# java - 为什么Java中的setProperty会返回Object？

> ID：10675532
> 
> 赞同：11
> 
> 时间：2012-05-20T17:18:29.270
> 
> 标签：java

Java SE 6 中的 Properies 类有一个名为 的方法`setProperty(String key, String value)`，它返回一个`Object`. 此外，先前`Object`存储的此密钥，或者`NULL`如果不存在。既然`setProperty(String key, String value)`只能取 a`String`作为值，为什么该方法不返回 a `String`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-20T17:26:14.243

不幸的是，类`java.util.Properties`被引入 java 1.0，比泛型早很多年。可以存储任何类型的数据的`Properties`扩展。`Hashtable`因此，您可以执行以下操作：

```
Properties props = new Properties();
props.put("key", new Object());  // use Hashtable's put method
props.setProperty("key", "value"); // use Proerties' setProperty method 
```

在此示例`setProperty`中，必须返回存储在此条目中的先前值，即`Object`. 但事实并非如此`String`！为避免`ClassCastException`JDK 创建者不得不将`setProperty()`返回的方法定义为`Object`.

顺便说一句，即使是现在类 Properties 实现`Map<Object, Object>`而不是`Map<String, String>`向后兼容。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-20T17:21:24.117

因为 Properties 从一开始就被误解为扩展 Hashtable，它可以存储任何东西。因此，该设计不尊重 Liskov 替换原则：基类可以做的一切，子类必须能够做。

由于 Properties 扩展了 Hashtable，您实际上可以在其中存储任何类型的 Object。

# javascript - 访问源映射以调试闭包编译器？

> ID：10675539
> 
> 赞同：0
> 
> 时间：2012-05-20T17:18:51.533
> 
> 标签：javascript, google-closure-compiler

我正在整理我的代码库，以便它可以在谷歌的闭包编译器上使用 ADVANCED_OPTIMIZATIONS 进行编译。

在正确设置此任务所需的调试环境（源映射文件、chrome、包装已编译的 js 文件）后，我偶然发现了 try catch 问题。在我的代码库中大量使用 try/catch 语句似乎适得其反。

在几乎所有方法和函数上，我都使用典型的 try { } catch(e) {ss.error(e);} 语句，其中 ss.error() 是一个通用错误处理程序，根据环境打印出调试内容或报告回到例外...

在熨烫我的代码库的过程中，当我遇到需要修复的错误时，会发生什么，而不是让 Chrome 报告有问题的文件和行，而是指向错误处理程序 ss.error()。因此让我无法回溯问题。然而， ss.error() 函数会打印出问题的来源：

> 错误！type:TypeError at Db (/jsc/compiled.js:547:246) msg​​:Cannot call method 'ka' of undefined source:

在我得到这些类型的错误后，我必须做两个步骤： 1\. 摆弄第 547 char 246 行的编译代码，并尝试找出我的未编译代码中的哪一部分是指... 2\. 找到它之后，删除 try/catch 块，这样我就可以直接更清楚地看到导致错误的原因......

我必须说我对这个工作流程不满意，需要找到一个替代方案，既可以让我正确捕获异常，又可以调试我的已编译和未编译代码，同时保持头脑清醒 =)

我正在考虑以某种方式使用 Line:CharPosition 信息来查询源映射并让 ss.error() 函数映射到我的未编译源代码......

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:53:15.930

SourceMaps 有一个 java 接口作为闭包编译器的一部分。还有各种修复状态的JS实现。我尝试在此处使指向它们的链接保持最新：

[http://code.google.com/p/closure-compiler/wiki/SourceMaps](http://code.google.com/p/closure-compiler/wiki/SourceMaps)

对于 Java 实现，您只需使用 SourceMapConsumerFactory 加载源映射，接口非常简单。

# google-maps-api-3 - 地图 api 信息窗口中的 fb like 按钮

> ID：10675545
> 
> 赞同：0
> 
> 时间：2012-05-20T17:19:18.130
> 
> 标签：google-maps-api-3, facebook-like, infowindow

得到了主题中所述的以下问题：如何将点赞按钮放在通过 ajax 加载内容的信息窗口中？

正如我猜测的那样，在带有地图的“主”页面中加载脚本时，不会触发它，因为信息窗口内的内容不是 DOM 元素？

提前谢谢！

# php - 使用php将文本链接替换为图像

> ID：10675546
> 
> 赞同：0
> 
> 时间：2012-05-20T17:19:20.437
> 
> 标签：php, drupal, drupal-7

```
 l(t('Edit'), 'node/' . $node->nid . '/webform/components/' . $cid, array('query' => drupal_get_destination())), 
```

我希望能够用图像替换“编辑”一词，但是当我将图像 src 放在那里时，它会显示为文本。我应该使用其他功能吗？

我使用 Drupal 作为我的框架。

谢谢菜鸟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:21:59.490

最好的方法是结合[l()](http://api.drupal.org/api/search/7/l)和[theme_image()](http://api.drupal.org/api/search/7/theme_image)：

```
print l(theme_image(array('path' => 'edit_button.png', 'attributes' => array('title' => t('Edit')))), 'node/' . $node->nid . '/webform/components/' . $cid, array('query' => drupal_get_destination(), 'html' => TRUE)); 
```

您还应该使用[drupal_get_path()](http://api.drupal.org/api/search/7/drupal_get_path)为图像的路径添加前缀。这样您将完全适用于 Drupal 编码标准，并使您的生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:31:01.637

例如，该按钮应该有自己的类，`action_button`或者一个 id，例如`edit_button`. 现在使用 CSS 隐藏文本并在其位置使用背景图像，如下所示：

```
.action_button, #edit_button {

  /* Hide Text */
  text-indent: -9999px;

  display: block;
  background: url('edit_button.png') no-repeat;

  /* Set width and height equal to the size of your image */
  width: 20px;
  height: 20px;
} 
```

**编辑1：**

使用下面的代码更改您的代码并使用上面的 CSS：

```
l(t('Edit'), 'node/'.$node->nid.'/webform/components/'.$cid, array('attributes' => array('id' => array('edit_button')), 'query' => drupal_get_destination())); 
```

* * *

**编辑 2 [最终]：**

传递`html`as `TRUE`to `array parameter`of`l()`方法可以使我们能够使用`first parameter`as`img`标记，而不仅仅是显示为链接的文本：

```
l('<img src="edit_button.png" alt="Edit" />', 'node/'.$node->nid.'/webform/components/'.$cid, array('query' => drupal_get_destination(), 'html' => 'TRUE')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T06:00:06.150

这是我实施的最佳方式：

```
list($nodeImage) = field_get_items('node', $node, 'uc_product_image');

$style_array = array('path' => $nodeImage['uri'], 'style_name' => 'MY_IMAGE_STYLE');

$render_node_image = theme('image_style', $style_array);   
$render_node_image_WITH_LINK = l($render_node_image, 'node/' . $node->nid, array('html' => TRUE));

print $render_node_image_WITH_LINK 
```

# ruby-on-rails - 使用带钩子的延迟作业的 Carrierwave 进度信息

> ID：10675549
> 
> 赞同：1
> 
> 时间：2012-05-20T17:19:53.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job, carrierwave

我正在为一些可能需要一些时间的载波任务使用延迟工作。

目前，我创建了一个简单的工作，并带有成功的钩子，它看起来像这样：

```
class VideoclipDownloadJob

  def initialize(video_id)
    @video_id = video_id
  end

  def perform
    Videoclip.grab_videoclips(@video_id)
  end

  def success(job)
    Rails.logger.info { "Videoclip downloads for video: #{@video_id} complete" }
    Video.find(@video_id).update_attribute(:videoclips_downloaded, Time.now)
  end

end 
```

它工作正常，我目前在浏览器中实现了一些 AJAX 轮询，以检查作业何时完成并重定向。

但是，我对这种方法有两个问题，很想得到一些建议。

首先，如果用户当前没有 javascript，则在作业完成后无法重定向它们。

因此，理想情况下，我希望`redirect_to`在我的工作中加入一个成功的钩子。我尝试将其直接添加到 success(job) 方法中但没有成功，并在我的模型中创建一个方法来执行此操作。

那时它让我意识到它似乎不是一个好的 MVC 模式。

因此，我应该完全依赖 javascript 还是有更好的选择？

我的第二个问题更多地与使用 Carrierwave 相关。

它对于文件的基本传输工作正常，但文件可能非常大，我真的希望能够不仅显示两种状态......下载和完成，而且还有实际的进度（百分比）转移。

在客户端，我可以像处理工作一样轮询这些信息。

但是 - 我在 Carrierwave 文档中找不到任何提及找出上传者具体进度的方法。

任何有关实现这两件事的最佳方法的建议将不胜感激。

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:12:39.217

redirect_to 是对浏览器/js 请求的响应。当您安排了后台作业并且 JS 被禁用时，如果用户的浏览器没有发出任何新请求，您将无法重定向用户。如果你在他的浏览器发出新请求时重定向他，这可能不是一个好主意，因为你可能会打断他的工作。

# python - 带有 tk 的窗口以获取文本

> ID：10675551
> 
> 赞同：3
> 
> 时间：2012-05-20T17:20:14.737
> 
> 标签：python, window, tk

我正在构建一个小型教育应用程序。

我已经完成了所有代码，我所缺少的只是让一个窗口打开，TK 显示一个文本框、一个图像和一个按钮。

它应该做的就是在单击按钮并关闭窗口后返回插入到文本框中的文本。

那么，我该怎么做呢？

我一直在看代码，但我没有做任何工作，我几乎为这么简单而感到羞耻。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:11:06.333

编写 GUI 的一种简单方法是使用 Tkinter。有一个显示带有文本和按钮的窗口的示例：

```
from Tkinter import*

class GUI:

    def __init__(self,v): 

        self.entry = Entry(v)
        self.entry.pack()

        self.button=Button(v, text="Press the button",command=self.pressButton)
        self.button.pack()

        self.t = StringVar()
        self.t.set("You wrote: ")
        self.label=Label(v, textvariable=self.t)
        self.label.pack()

        self.n = 0

    def pressButton(self):

        text = self.entry.get()
        self.t.set("You wrote: "+text)

w=Tk()
gui=GUI(w)
w.mainloop() 
```

您可以查看 Tkinter 文档，标签小部件还支持包含图片。

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T18:11:08.137

![在此处输入图像描述](../Images/c29bd27e95bc9627c9fdd6cc884e48ba.png)

这是一个从`inputBox`to获取输入的简单代码`myText`。它应该让您朝着正确的方向开始。根据您需要检查或执行的其他操作，您可以为其添加更多功能。请注意，您可能必须使用 line 的顺序`image = tk.PhotoImage(data=b64_data)`。因为如果你把它放在后面`b64_data = ...`。它会给你错误。（我正在使用 Python 3.2 运行 MAC 10.6）。并且该图片目前仅适用于 GIF。如果您想了解更多信息，请参阅底部的参考资料。

```
import tkinter as tk
import urllib.request
import base64

# Download the image using urllib
URL = "http://www.contentmanagement365.com/Content/Exhibition6/Files/369a0147-0853-4bb0-85ff-c1beda37c3db/apple_logo_50x50.gif"

u = urllib.request.urlopen(URL)
raw_data = u.read()
u.close()

b64_data = base64.encodestring(raw_data)

# The string you want to returned is somewhere outside
myText = 'empty'

def getText():
    global myText
    # You can perform check on some condition if you want to
    # If it is okay, then store the value, and exist
    myText = inputBox.get()
    print('User Entered:', myText)
    root.destroy()

root = tk.Tk()

# Just a simple title
simpleTitle = tk.Label(root)
simpleTitle['text'] = 'Please enter your input here'
simpleTitle.pack()

# The image (but in the label widget)
image = tk.PhotoImage(data=b64_data)
imageLabel = tk.Label(image=image)
imageLabel.pack()

# The entry box widget
inputBox = tk.Entry(root)
inputBox.pack()

# The button widget
button = tk.Button(root, text='Submit', command=getText)
button.pack()

tk.mainloop() 
```

如果您想了解更多关于 Tkinter 条目小部件的信息，请参考以下参考：http: [//effbot.org/tkinterbook/entry.htm](http://effbot.org/tkinterbook/entry.htm)

关于如何获取图像的参考：[Stackoverflow Question](https://stackoverflow.com/questions/6086262/python-3-how-to-retrieve-an-image-from-the-web-and-display-in-a-gui-using-tkint)

# php - PHP检查邮政编码在列表中

> ID：10675553
> 
> 赞同：-2
> 
> 时间：2012-05-20T17:20:32.327
> 
> 标签：php, function, postal-code

我有一个邮政编码区域列表（仅限左侧），如下所示：

```
IV1-28,IV30-32,IV36,IV40-49,IV52-56,IV63,KW1-3,KW5-14,PA21-38,PH1-26,PH30-41,PH49-50,LD1-99,SY16-20,SY23-25 
```

我的输入是英国邮政编码，例如。IV21

我需要一个 PHP 函数来检查输入的邮政编码（例如 IV21）是否在列表中。

这很简单，但该列表采用 IV1-28 的形式，而不是诸如`IV1,IV2,IV3,IV4,IV5,IV6...IV26,IV27,IV28`etc之类的“正常”列表。

非常感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:45:25.053

循环遍历代码数组并将它们拆分为数字，然后检查该数字是否在范围内

```
$list = array("IV1-28","AB1-10");
$found = false;
$input = "AB10";
$inputCode = substr($input,0,2);
$inputNumber = substr($input,2);
foreach ($list as $l)
{
    $lCode = substr($l,0,2);
    $lNumber = substr($l,2);
    $listNumbers = explode("-",$lNumber);
    if (($inputNumber >= $listNumbers[0]) && ($inputNumber <= $listNumbers[1]) && ($inputCode==$lCode))
    {
        $found = true;
        break;
        }           
}

var_dump($found); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:25:14.443

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)（将列表拆分为仅左侧），将左侧添加到数组中，然后使用[http://php.net/manual /en/function.in-array.php](http://php.net/manual/en/function.in-array.php) - 应该让你接近你需要的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T18:30:40.267

使用 strpos 函数。如果找到则返回 int，否则返回 false。请注意，即使找到了 IV11，匹配的 IV1 也会为真。所以使用以下脚本

```
$code="IV21";
$list="IV1-..........etc";
if(strpos($list,$code."-") || strpos($list,$code.",") { 
//true
}
else {
//false 
} 
```

"-" 和 "," 是为了确保字符串结束，这样如果我们搜索 IV1，IV11 就不会给出 true

# javascript - 是否有将项目编译为客户端文件的节点模块？

> ID：10675558
> 
> 赞同：0
> 
> 时间：2012-05-20T17:20:58.830
> 
> 标签：javascript, node.js

我是 node 新手，但是有这么多客户端开源项目使用它，我假设有一种方法可以编译 node 项目以压缩成一个可供客户端使用的缩小文件。我正在构建的开源项目正在使用 node，因为它有很好的模块和测试支持，但所有代码都旨在在客户端上运行。

我见过这样的项目：[https ://github.com/mape/connect-assetmanager](https://github.com/mape/connect-assetmanager)

但我不确定，是否删除或支持特定于节点的构造（如导出和模块），以便客户端没有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:34:21.480

您应该查看[http://requirejs.org/](http://requirejs.org/) 它替换并扩展了节点（服务器端）和浏览器端的**require 。**它还支持合并和缩小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:25:16.407

刚遇到这个：

[https://github.com/substack/node-browserify](https://github.com/substack/node-browserify)

很棒的项目！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T17:29:38.443

你不正确。节点仅是服务器端。也许你对 Node 是什么和不是什么有点误解。

Nodejs 基本上是 Google Chrome V8 Javascript 引擎，打包为可以在控制台上运行的可执行文件。*虽然为*node编写的 Javascript 代码可以在客户端上运行，但它并不像您想象的那么简单。

您希望在客户端上运行您当前在服务器上具有的哪些功能？您是否只是在寻找像 yui 压缩器这样的小型机？

# ruby-on-rails - 如何通过 ownkey 找到 rails 中的确切条目

> ID：10675562
> 
> 赞同：0
> 
> 时间：2012-05-20T17:21:33.993
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, routing, findby

我们有一个 show-action 应该通过 own_key 找到正确的条目。own_key 生成为 UUIDTools::UUID.timestamp_create().to_s。下面的问题现在在这里。

```
class ListController < ApplicationController
  respond_to :html, :xml, :json
  def show
    @list = List.find_by_own_key(params[:own_key])
    respond_with(@list)
  end
end 
```

路线在这里所以生成

```
resources :lists
match '/:id' => 'list#show' 
```

如果我们只在 / 之后键入一个简单的字母，为什么我们还会返回一个条目？own_key 看起来如此`f6d47c20-a276-11e1-b127-68a3c454c2b4`。因此，如果我们键入 /lists/fi，则获取带有 f own_key 的条目。我们如何管理我们只获得带有 own_key 的条目？它可以通过约束运行吗？

感谢您的帮助，如果有人可以帮助我们？

马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:50:22.190

从您的路线中，`params[:id]`将包含我要搜索的内容，但是您正在使用`params[:own_key]`的内容将为零。您的代码将始终获取具有 null own_key 的行，而不是搜索具有指定值 own_key 的记录。

更改您的代码以使用 params[:id] ，您应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:23:11.663

你可以使用约束来路由或检查控制器中的 params[:own_key]

`:constraints => {:own_key=> /regexp pattern for uuid/}`

# c# - RavenDB 获取查询不工作的总数

> ID：10675567
> 
> 赞同：2
> 
> 时间：2012-05-20T17:22:27.730
> 
> 标签：c#, ravendb

我在创建分页包装器的扩展方法中有这个逻辑：

```
 int total = 0;
        if (query is IRavenQueryable<T>)
        {
            RavenQueryStatistics stats;
            var rQuery = (IRavenQueryable<T>)query;
            rQuery.Statistics(out stats);
            total = stats.TotalResults;
        }
        else
        {
            total = query.Count();
        } 
```

我的问题是，当我进行 raven 查询时，我的*stats.TotalResults*为零，**除非**我在调试期间将鼠标悬停在*rQuery*上并尝试扩展结果。

我在这里做错了什么？如何让乌鸦始终如一地给我所需的结果？

这是整个方法：

```
 public static PagingModel<T> Page<T>(this IEnumerable<T> query, int page, int count)
    {
        if (page < 1)
            throw new ArgumentOutOfRangeException("Page is one-based and must be greater than zero");

        int total = 0;
        if (query is IRavenQueryable<T>)
        {
            RavenQueryStatistics stats;
            var rQuery = (IRavenQueryable<T>)query;
            rQuery.Statistics(out stats);
            total = stats.TotalResults;
        }
        else
        {
            total = query.Count();
        }

        var results = query
            .Skip((page - 1) * count)
            .Take(count)
            .ToArray();

        return new PagingModel<T>()
        {
            Page = page,
            Rows = results,
            Total = total /count
        };
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T17:28:45.063

我自己想通了。事实证明，*RavenQueryStatistics*通过引用设置*TotalResults*，并且只有在解决结果后才能使用总数。（我原本以为它是单独前往数据库的。）

```
 public static PagingModel<T> Page<T>(this IEnumerable<T> query, int page, int count)
    {
        RavenQueryStatistics stats = null;
        if (page < 1)
            throw new ArgumentOutOfRangeException("Page is one-based and must be greater than zero");

        if (query is IRavenQueryable<T>)
        {
            var rQuery = (IRavenQueryable<T>)query;
            rQuery.Statistics(out stats);
        }

        var results = query
            .Skip((page - 1) * count)
            .Take(count)
            .ToArray();
        var total = stats == null ? query.Count() : stats.TotalResults;
        return new PagingModel<T>()
        {
            Page = page,
            Rows = results,
            TotalPages = (int)Math.Ceiling((double)total / (double)count)
        };
    } 
```

# php - 我的 RESTful 实现有什么问题吗？

> ID：10675571
> 
> 赞同：2
> 
> 时间：2012-05-20T17:23:12.863
> 
> 标签：php, security, rest, restful-architecture

我有一个服务器应用程序，它为我编写的客户端提供了一个 Restful API。到目前为止，这就是我正在做的事情：

1）。提供允许客户端输入用户/密码（通过 SSL）的登录 REST URL

2）。在服务器上对用户进行身份验证，并返回一个 sha1 加密令牌（此时用户已在服务器上登录）。令牌类似于 sha1（user.email + 日期时间等）。

3）。客户端使用令牌发出请求

4）。对于要在服务器上处理的请求，从标头或 URL 中读取令牌，然后与登录的用户 sha1（user.email + 日期时间等）进行比较。

5）。如果匹配，则返回资源，否则返回 401 未登录。

6）。客户端完成后，他们可以注销并摆脱其本地令牌副本。

请告诉我这是否足够，或者如果您认为我在做一些愚蠢的事情，请告诉我，以便我改进它。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T02:18:11.470

是的，这太可怕了。您正在制作自己的会话 ID，而且它非常不安全。会话 id 必须始终是随机值，使用`session_start()`. 当然它并不平静，但它比你正在构建的会话 ID 安全得多。如果您的应用程序存在 sql 注入漏洞，我可以提取为另一个用户构建会话 id 所需的数据。这是非常不安全的。

此外，您可能从未听说过[OWASP a9](https://www.owasp.org/index.php/Top_10_2010-A9-Insufficient_Transport_Layer_Protection)。事实上，你应该阅读整个 owasp top 10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:52:37.663

既然用户可以在第一次通话中发送他们的凭据，为什么还要使用 sha1 令牌方法呢？让他们每次只发送相同的凭据，这样您就无需“登录”以及这种方法所需的所有会话管理。

# java - 在 Java 中执行交互式 shell 命令

> ID：10675573
> 
> 赞同：0
> 
> 时间：2012-05-20T17:23:31.763
> 
> 标签：java, shell

> **可能重复：**
> [在 Java 中重定向标准输入和标准输出](https://stackoverflow.com/questions/10407308/redirect-stdin-and-stdout-in-java)

我知道如何在 Java 中执行 shell 命令，但是如何执行它以便我的应用程序可以写入其输入并从其输出中读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:32:48.063

我认为你甚至解释了你的问题的答案。

当您从 java 运行外部应用程序时，您可以使用`Runtime.exec()`或`ProcessBuilder`访问标准输出和标准输入流。用户输入流读取外部应用程序写入的内容，输出流将命令发送到外部应用程序。

不过要小心。某些应用程序不会从 java 中获取您的命令。例如`ssh`，Unix 系统中的命令旨在避免非人类用户（例如其他应用程序）使用它。出于安全原因，它需要从终端执行，因此您不能例如运行`ssh otherhost`然后从 java 发送用户/密码。如果您需要这个，您必须通过其他名为`expect`模拟终端并由脚本驱动的命令行实用程序运行该命令。

# .net - 使用 Redis 扩展 Web 服务

> ID：10675578
> 
> 赞同：1
> 
> 时间：2012-05-20T17:24:02.823
> 
> 标签：.net, wcf, caching, redis, scalability

在我最新的项目中，我必须编写一个 Web 服务 API 来从数据库中返回数据。

技术是 - SQL Server 08 R2 - WCF

数据主要是键值对，例如用于获取用户 X 最喜欢的颜色。

负载不是很大，但也不是小菜一碟——峰值约为 1,000 个请求/秒。

我最初的想法是使用 Redis 作为缓存，这意味着我们不会经常访问 SQL Server。但是我一直在尝试从这个配置中获得一些基准测试等，但效果并不好，这让我想知道 Redis 是否真的能为我的问题带来任何好处！

架构是 - 单独的数据库服务器 - WCF 应用服务器 - IIS - Linux Redis 服务器

在我的桌面上玩时，Redis 的基准测试速度约为 20K ops / sec。好东西。

但是，考虑到每个调用都将通过一个 Web 服务，当我放置一个 WCF 层时，我只能获得 300 ops / sec。不是很好。诚然，Web 服务客户端、Web 服务和数据库都在同一台机器上，这样可能会导致结果出现偏差！

此外，当迁移到真实环境时，网络延迟将是一个主要因素。

我无法以任何方式批量处理这些请求。

所以-我的问题-我完全赞成将Redis用作缓存-我*知道*在这种情况下我应该使用缓存-但是鉴于我不能将Redis与我的Web服务放在同一个盒子上，那么网络延迟就不会杀死性能？

任何建议都非常感谢！

邓肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:27:33.363

我会尝试分别测试和调整你的图层。使用不涉及数据库但具有相似数据大小和并发连接的虚拟数据测试 Web 服务。与数据库相同，使用实际负载和表大小再次调整查询，使用合成数据（或如果可以的话）以匹配预期用户群的大小。一起测试这两个，进行仔细的测量，以便您可以验证您的更改如何影响整体性能以及瓶颈在哪里。最后，添加缓存层，再次测试有效性。如果数据库是瓶颈，缓存可能会有所帮助，但如果 Web 服务层是问题，缓存可能不会。如果您只使用 Redis 作为缓存，您可能更喜欢更简单的 memcached。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:46:57.317

您还可以检查是否使用 .NET 4，我认为您应该使用[System.Runtime.Caching](http://msdn.microsoft.com/en-us/library/system.runtime.caching.aspx)库。

只要您使用 1 个服务器，就可以为您提供极大的灵活性。如果您需要一个网络农场，或者当事情可能更棘手时，例如同步、失效、过期等，这意味着一些分布式缓存（我认为是内存），支持本地存储（通常在内存中，本地）和分布式存储。您也可以将此命名空间与 AppFabric 一起使用以获得所需的缓存。

希望这对你有用。

# java - 我想避免在我的 jsp 页面上使用 scriptlet。我已经谷歌它并在这里搜索，但我无法解决它

> ID：10675616
> 
> 赞同：3
> 
> 时间：2012-05-20T17:29:41.887
> 
> 标签：java, jakarta-ee, struts

我读过很多帖子说 scriptlet 是一种不好的做法，所以最后我也决定避免这种做法。我使用 struts 框架开发了一个项目，其中大部分 jsp 页面都有 java 代码。现在我想从我的所有页面中删除该代码。

```
<%@page import="java.sql.ResultSet"%>
<%@page import="com.pra.sql.SQLC"%>
<%@page import="java.util.ArrayList"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<table align="left" width="346" border="0">
    <tr><td align="center" colspan="3" style="font-size:20px;">Tests We Provide</td></tr>
    <tr>
        <th width="80" height="38" nowrap>Test ID</th>
        <th width="200" nowrap>Test Name</th>
        <th width="144" nowrap>Test Fee</th>
    </tr>
    <%
        String sql = "Select TestID,tname,tfee from addtest order by tname";
        ResultSet rs = SQLC.getData(sql, null);
        while (rs.next()) {
            String testid = rs.getString("TestID");
            String testname = rs.getString("tname");
            String testfee = rs.getString("tfee");
    %>
    <tr>
        <td width="80" height="34" nowrap><%=testid%></td>
        <td width="200" nowrap><%=testname%></td>
        <td width="144" nowrap><%=testfee%></td>
    </tr>  
    <%
        }
    %>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:38:41.687

1.  将 JSP 与动作相关联，从而与动作类相关联
2.  在 Java 代码中执行查询 - 您可以在操作中执行此操作，但我建议将控制权传递给单独的数据访问层
3.  将查询结果保存到一个 bean 类型的列表中，该列表包含结果中的每一列
4.  将 List 设置为请求的属性
5.  使用类似循环列表的标记库，并打印输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:58:25.517

您可以编写自己的 jsp 标签，也可以使用 JSTL。JSTL是oracle（原sun）提供的标准标签库

# c++ - 基类未定义

> ID：10675618
> 
> 赞同：11
> 
> 时间：2012-05-20T17:29:58.553
> 
> 标签：c++, class, undefined, base

我下面的代码生成错误

> 'WorldObject'：[未定义的基类（从德语翻译）]

为什么是这样？这是产生此错误的代码：

## **ProjectilObject.h：**

```
#pragma once

#ifndef _PROJECTILOBJECT_H_
#define _PROJECTILOBJECT_H_

#include "GameObjects.h"
class WorldObject;
class ProjectilObject: public WorldObject
{
public:
    ProjectilObject(IGameObject* parent,int projectiltype);

    void deleteyourself();
protected:
virtual void VProcEvent( long hashvalue,    std::stringstream &stream);
    virtual void VInit();
    virtual void VInitfromStream( std::stringstream &stream     );
    virtual void VonUpdate();
    virtual void VonRender();
private:
    vec3 vel;

    float lifetime;
    float lifetimeend;

    vec3 target;

    int m_projectiltype;
};

#endif 
```

下面是 WorldObject 类的代码文件：

## **游戏对象.h：**

```
#pragma once

#ifndef _GAMEONJECTCODE_H_
#define _GAMEONJECTCODE_H_

#include "IGameObject.h"
#include "Sprite.h"
#include "GamePath.h"
#include "HashedString/String.h"
#include "IAttribute.h"
#include "CharacterObjects.h"

...

class WorldObject: public IGameObject, public MRenderAble
{
public:
    WorldObject(IGameObject* parent);
    virtual bool IsDestroyAble();
    virtual bool IsMageAble();
    virtual bool IsRenderAble();
protected:
    virtual void VProcEvent( long hashvalue, std::stringstream &stream);
    virtual void VonUpdate();
    virtual void VonRender();
    virtual void VInit() =0;
    virtual void VInitfromStream( std::stringstream &stream ) =0;
    virtual void VSerialize( std::stringstream &stream );

    vec3 poscam;    
};

...

#endif 
```

该文件中还有其他一些类，但我认为它们无关紧要。也许有一个我没有看到的小错误，但我不明白为什么会产生这个错误。当您需要更多代码时，请随意。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T17:45:17.030

如果你有任何源文件包含`GameObjects.h`before`ProjectilObject.h`或不`ProjectilObject.h`直接包含，那么编译器会先`ProjectilObject`通过 include in找到声明，`GameObjects.h`然后才知道是什么`WorldObject`。那是因为`GameObjects.h`首先包含`ProjectilObject.h`然后声明`WorldObject`。在这种情况下，`GameObjects.h`present in的包含`ProjectilObject.h`将不起作用，因为`_GAMEONJECTCODE_H_`已经定义了。

为避免这种情况，请确保包含`ProjectilObject.h`而不是`GameObjects.h`在源文件中，或者使用[前向声明](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T17:42:54.890

如果不查看整个代码，很难回答这个问题。即使是放错位置的支架也可以计算在内。检查您的命名空间 - 您确定 WorldObject 在同一个命名空间中吗？

我建议您通过将 #pragma 消息放置在 WorldObject 定义附近并检查编译器输出来使用它：

> #pragma message（“世界对象已定义”）

如果它没有显示，请将 pragma 移动到父 .h 文件并再次检查编译器输出。有了这个，您可以轻松找到错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-15T09:10:51.407

就我而言：我从基类头文件中删除派生类包含。

例如：

文件 1：#include “Bh”

-> A()

文件 2：

-> B() : A()

解决方案：从 file1 中删除 #include "Bh"

# php - 防止会话过期并导致错误

> ID：10675619
> 
> 赞同：0
> 
> 时间：2012-05-20T17:30:05.607
> 
> 标签：php, codeigniter, authentication, tankauth

我的问题更多是一个概念性的问题，因为我对与用户和会话一起工作相当陌生。

我当前的设置是使用[Tank Auth](http://www.konyukhov.com/soft/tank_auth/)用户库运行的 Codeigniter

我遇到的问题是，用户在使用该站点时被注销，因此当我调用该函数来获取用户 ID 时，它返回一个错误“未定义”。

确保用户在使用网站的过程中不会被踢出的最佳方法是什么？如果会话接近尾声，是否可以“刷新”会话？如果是这样，什么时候会调用“刷新”？它会在坦克身份验证的主要功能之一中吗？

其他网站如何处理这个问题？我注意到一些，比如 GoDaddy，同时弹出一个警告，询问您是否要扩展它。这是一个好方法吗？

# jquery - mouseover 和 mouseout 和 div 图像 1px 分隔

> ID：10675630
> 
> 赞同：3
> 
> 时间：2012-05-20T17:32:53.017
> 
> 标签：jquery

我有 div 和功能鼠标悬停：

```
$('#mydiv').mouseover(function(){
    $('#otherdiv').show('slow');
});

$('#otherdiv').mouseout(function(){
    $('#otherdiv').hide('slow');
}); 
```

但是...`#otherdiv`展览封面`#mydiv`由 5 张`1px`相互分离的图像组成。我想在那`#otherdiv`之后消失，`mouseout`但我眨了眨眼。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T17:34:08.403

```
$('#mydiv').hover(function(){
    $('#otherdiv').stop().show('slow');
}, function(){
    $('#otherdiv').stop().hide('slow');
}); 
```

[演示 jsBin](http://jsbin.com/oneqiy/edit#javascript,html,live)
[http://api.jquery.com/hover](http://api.jquery.com/hover)
[http://api.jquery.com/stop](http://api.jquery.com/stop)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T17:35:05.823

试试看`stop`：

```
$('#mydiv').mouseover(function(){
    $('#otherdiv').stop().show('slow');
});

$('#otherdiv').mouseout(function(){
    $('#otherdiv').stop().hide('slow');
}); 
```

# facebook - 如何设置 Facebook 时间线封面照片网站。对基本的 Web 开发人员来说容易吗？

> ID：10675632
> 
> 赞同：-1
> 
> 时间：2012-05-20T17:33:14.620
> 
> 标签：facebook, facebook-timeline

我见过很多用 wordpress 建立的网站，他们有 facebook 时间线封面照片自动上传。

有人请帮帮我吗？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:51:41.070

时间线是[新的 Facebook 时间线封面](http://www.timelinecovershelp.com/)个人资料。通过照片、友谊和个人里程碑（例如毕业或去新地方旅行）讲述您的生活故事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T03:08:32.710

这一点都不难...您可以使用 facebook graph api 获取页面/用户的封面 url。

即：查询[http://graph.facebook.com/cocacola?fields=cover](http://graph.facebook.com/cocacola?fields=cover)将返回可口可乐粉丝页面的封面图像属性，只需使用“源”字段作为您的图像源。*（这是一个 720px 宽的封面图片）*

当您使用 wordpress 时，您可以用它制作一个小部件，或者在模板中对其进行硬编码（eww ..）。

*（另一方面 - 您可能还想为 facebook grapi api 结果实现某种形式的缓存，这样您就不会在每个页面加载时不断地查询 facebook 以获取封面 url。）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T00:12:09.777

Majid Khan，试试[这个](http://timelinecoverphotos.in/facebookcovers/)，facebook 图片上传器（用于时间线和更多.....）

在 wordpress 等上工作正常……但它不是免费的

# java - SharedPreferences 未阅读

> ID：10675634
> 
> 赞同：2
> 
> 时间：2012-05-20T17:33:47.290
> 
> 标签：java, android, xml, sharedpreferences

我的应用程序出现奇怪的问题。我已经设置了一个 SharedPreference，像这样

```
SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(this);
        flag = prefs.getBoolean("handle_calls", false);
        if (flag) {
            SharedPreferences.Editor editor = prefs.edit();
            editor.clear();
            editor.putBoolean("checkFlag", true);
            editor.commit();
        } 
```

几天前它工作正常，但现在这段代码工作正常，但是当我尝试在我的 SmsReceiver 类中读取这些首选项时，`SharedPreferences`没有读取这些值并且读取了默认值（假）......有时它工作并且大部分时间它根本不起作用！这是我阅读的方式`SharedPreferences`

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
    SmsManager sms = SmsManager.getDefault();

    //flag = prefs.getBoolean("handle_calls", false);
    checkFlag = prefs.getBoolean("checkFlag", false);
    checkDecisionFlag = prefs.getBoolean("checkDecisionFlag", false); 
```

这`checkDecisionFlag`工作正常，但 checkFlag 采用默认值。

真的生气了！请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:38:10.563

删除 editor.clear(); 从 if 条件。as clear 将清除 SharedPreference 中的所有数据。

```
 if (flag) {
        SharedPreferences.Editor editor = prefs.edit();

        editor.putBoolean("checkFlag", true);
        editor.commit();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:42:41.547

解决了！这段代码很好，但问题在于面向生命周期。我有另一个`SharedPreference`，这取决于。那是一次又一次的虚假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T17:38:51.327

我认为您想在第一个代码示例的第三行使用 if (!flag) ( *not flag) 。*

# jquery - 使用 jquery css top 和 left 动态分配图像拇指

> ID：10675641
> 
> 赞同：1
> 
> 时间：2012-05-20T17:34:14.520
> 
> 标签：jquery, html, css

我有一个像这样显示的图像列表：

```
<div id="imgContainer">
    <ul id="thumbs">
        <li class="trns">
            <a class="magnify" href='/uploads/{{ item.pic1 }}' target="_blank"><img class="thumb" src='/uploads/{{ item.pic1 }}'/></a>
        </li>
        <li class="trns">
            <a class="magnify" href='/uploads/{{ item.pic2 }}' target="_blank"><img class="thumb" src='/uploads/{{ item.pic2 }}'/></a>
        </li>
        <li class="trns">
            <a class="magnify" href='/uploads/{{ item.pic3}}' target="_blank"><img class="thumb" src='/uploads/{{ item.pic3 }}'/></a>
        </li>
    </ul>
</div> 
```

我想动态地将负顶部和左侧值分别分配给高度和宽度的一半，这样我的拇指将正好包含图像的中间

像这样的东西（当然它不起作用）

```
$("#imgContainer").find("img.thumb").css({"top":"-"+this.height/2,"left":"-"+this.width/2"}); 
```

我怎样才能做到这一点？

谢谢

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:39:40.923

`top`和`left`属性只能影响定位元素，因此图像的位置应该是`relative`（或`absolute`在`relative`定位的父元素内）。

无论如何，如果所有缩略图都具有相同（已知）大小，则[`clip()`](https://developer.mozilla.org/en/CSS/clip)只能使用 css

关于你的代码，你应该写

```
$("#imgContainer").find("img.thumb").css({
   top : "-"+this.height/2 + 'px' , // note (+'px')
   left: "-"+this.width/2 + 'px' 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:58:33.997

我最终使用了这个，它有效

```
$("#imgContainer").find("img.thumb").each(function(){
    var mtop = $(this).height()/2*-1;
    var mleft = $(this).width()/2*-1;
    $(this).css({"top":mtop,"left":mleft});
}); 
```

后来编辑：它适用于所有浏览器，我有一些 ajax 正在进行，它让我有点困惑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:59:02.543

试试这个：

```
$("#imgContainer ul li a img").css({
    top  : "-" + this.height/2,
    left : "-" + this.width/2
}); 
```

# php - 将 Json 字符串放入 html 标记的最佳方法是什么？

> ID：10675656
> 
> 赞同：1
> 
> 时间：2012-05-20T17:36:40.527
> 
> 标签：php, javascript, json, html

将 json 字符串（编码的 php 数组）放入 html 标签的最佳方法是什么？

```
<?php
$content = array(key1=>'value 1', key2=>'value 2');
?>
<span class="someclass" data="<?php echo(json_encode($content)); ?>">Stuff Here</span> 
```

这是无效的，因为当它被编码时，它将包含破坏 html 的语音标记。

如果我使用 php 函数`htmlentities`就足够了，还是会有一些字符会破坏它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:41:49.607

您可以使用 base64 编码，它可以很容易地被您希望使用的每种语言（如 javascript）解码：

```
<span class="someclass" data="<?php echo base64_encode (json_encode ($content)); ?>">Stuff Here</span> 
```

它只使用 az、AZ 和 0-9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:43:24.103

不要将其放入数据属性中。生成像这样的javascript变量更容易

```
<script>
    var data = <?php echo json_encode() ?>
</script> 
```

# jquery - Jquery MVC3 onvalidation 事件

> ID：10675657
> 
> 赞同：0
> 
> 时间：2012-05-20T17:36:45.847
> 
> 标签：jquery, asp.net-mvc-3

我有一个简单的 for 密码 + 用户名组合，使用 MVC3 并使用来自 jquery 的验证插件。

当我遇到错误时，我想显示一个包含所有错误的特殊容器，目前我正在这样做：

```
$('form').submit(function () {
    $('.message').fadeOut();
    if (!$(this).valid()) {
        $('.message').fadeIn();
    }
}); 
```

只有当您在用户名或密码字段中输入时这不起作用，jquery 将在您输入时进行验证，从而导致一个空的错误容器。

是否有事件让我可以实时监控表单是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:39:25.430

您可以收听该`keyup`事件：

```
$('form input').keyup(function() {
    $('.message').fadeOut();
    if (!$(this).closest('form').valid()) {
        $('.message').fadeIn();
    }
});​ 
```

# svn - 无法使用netbeans将文件导入颠覆

> ID：10675659
> 
> 赞同：0
> 
> 时间：2012-05-20T17:36:49.230
> 
> 标签：svn, netbeans

我是编程新手。我正在我的电脑和笔记本电脑上开发一个程序，并希望在两台机器上保持代码同步。我发现了颠覆。

当我尝试将项目从 netbeans 导入到 subverion 时，它会询问我的存储库 url。

我在网上搜索，但找不到如何使用 subverion 创建存储库以及我必须提供什么 url。

还有一件事。

我只希望代码同步我不需要版本。有没有更简单的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:11:21.973

如果您只想在不同计算机之间进行同步，SVN 可能不是最适合您的工具。SVN 是一个完整的版本控制系统，对团队开发有很多好处，尽管单个程序员也可以从中受益。

如果您有良好的互联网连接，我会考虑使用 Dropbox 等云服务进行同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:29:34.040

[此页面](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.tour.importing)将告诉您如何从本地计算机上的文件创建存储库。您将需要访问 Subversion 服务器。

您最好从[uberSVN 之](http://www.ubersvn.com/)类的东西开始，它会为您完成繁重的工作并为您提供一个简单的导航界面（它将为您安装 Subversion 和 Apache）。然后，您将使用 netbeans 作为客户端来访问存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T19:07:52.073

您需要设置一个不包含在 Netbeans 中的 subversion 服务器。Netbeans 本身只包含一个客户端。只需在谷歌上搜索“设置颠覆”，您就会找到大量适用于您使用的任何系统的教程。

您可能会说目前您不需要这些版本，但是当您第一次遇到本地副本中的所有内容都被搞砸并且您只想从上次提交重新开始的那一刻时，这种情况将会改变。如果您确实确定不需要版本控制，则可以考虑使用 USB 记忆棒。

# llvm - LLVM C++ API 到底是什么

> ID：10675661
> 
> 赞同：13
> 
> 时间：2012-05-20T17:36:58.630
> 
> 标签：llvm, llvm-c++-api

我发现很难理解 LLVM C++ API。
LLVM C++ API 和 LLVM IR 之间有什么关系吗？另外，如何使用 LLVM C++ API？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T06:39:40.360

为了（大大）简化，LLVM 是一个用于编写编译器的 C++ 库。它的 C++ API 是库的用户用来实现他们的编译器的外部接口。

LLVM IR 和 LLVM C++ API 的一部分（用于构建 IR 的部分）之间存在一定程度的对称性。感受这种对称性的一个很好的资源是[http://llvm.org/demo/](http://llvm.org/demo/)。例如，您可以编译以下 C 代码：

```
int factorial(int X) {
  if (X == 0) return 1;
  return X*factorial(X-1);
} 
```

进入 LLVM IR：

```
define i32 @factorial(i32 %X) nounwind uwtable readnone {
  %1 = icmp eq i32 %X, 0
  br i1 %1, label %tailrecurse._crit_edge, label %tailrecurse

tailrecurse:                                      ; preds = %tailrecurse, %0
  %X.tr2 = phi i32 [ %2, %tailrecurse ], [ %X, %0 ]
  %accumulator.tr1 = phi i32 [ %3, %tailrecurse ], [ 1, %0 ]
  %2 = add nsw i32 %X.tr2, -1
  %3 = mul nsw i32 %X.tr2, %accumulator.tr1
  %4 = icmp eq i32 %2, 0
  br i1 %4, label %tailrecurse._crit_edge, label %tailrecurse

tailrecurse._crit_edge:                           ; preds = %tailrecurse, %0
  %accumulator.tr.lcssa = phi i32 [ 1, %0 ], [ %3, %tailrecurse ]
  ret i32 %accumulator.tr.lcssa
} 
```

以及 C++ API 调用（我不会在此处粘贴，因为输出很长，但您可以自己尝试）。这样做，您会看到，例如，`icmp`上面 IR 代码中的指令如下所示：

```
ICmpInst* int1_5 = new ICmpInst(*label_4, ICmpInst::ICMP_EQ, int32_X, const_int32_1, ""); 
```

`ICmpInst`是一个类，它是用于创建`icmp`指令的 C++ API 的一部分。C++ API 的一个很好的参考是[程序员手册](http://llvm.org/docs/ProgrammersManual.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:37:07.903

您可以使用 CPP 后端 ( `llc -march=cpp`) 找出从任何给定 IR 到 C++ API 的映射。

更新：cpp 后端不再可用。

# c# - 将 Json 数组转换为 .Net 列表包装器

> ID：10675664
> 
> 赞同：0
> 
> 时间：2012-05-20T17:37:52.273
> 
> 标签：c#, json, json.net

我想将以下 Json Array 转换为 .net 列表包装器。不知道我该怎么做。

json数组：

```
[{"Name" : "SomeName1", "Age" : "20" },{ "Name" : "SomeName2", "Age" : "21"}] 
```

我的课是：

```
public class Person
{
    public string Name;
    public string Age;
} 
```

如果我`List<Person>`用作我的转换类型，那么一切正常。

但我想做的是将上面的数组转换为下面的类的对象；

```
public class PersonList
{
    public string somefield;
    public List<Person> PersonList;
} 
```

我无法将我的数组转换为 List 包装器对象。我怎样才能做到这一点？

我无法控制转换方法。我正在使用 RestSharp 库来执行我的网络请求。当我调用执行方法时，我想传递 PersionList 类型进行转换而不是 List

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:44:37.807

```
var list = /*deserialize json list here*/;
var result = new PersonList() { PersonList = list }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T00:07:59.810

您想要实现自定义 JSON 转换器。这是一个示例：[如何在 JSON.NET 中实现自定义 JsonConverter 以反序列化基类对象列表？](https://stackoverflow.com/questions/8030538/how-to-implement-custom-jsonconverter-in-json-net-to-deserialize-a-list-of-base)

# jquery - 如何在 jquery bbq 中使用动态加载的内容

> ID：10675673
> 
> 赞同：0
> 
> 时间：2012-05-20T17:39:04.553
> 
> 标签：jquery, back-button, hashchange, jquery-bbq

首先，我是 jQuery 的新手。我发现我的 Web 应用程序面临一个问题，即用户无法导航回上一页，甚至无法刷新页面。它使它重新定向到网络应用程序的第一页。
这是我的脚本的一部分

```
$(function() {
$("#register").click(function(evt) {
    $("#pages").load("register.php")
    evt.preventDefault();
})
}) 
```

基本上，当用户单击 时`<li>`，该页面将从另一个页面加载另一个内容。

```
<li><a id="register" href="">register</a></li> 
```

我知道jQuery BBQ可以解决它，但我不知道如何使用它。谁能给我一些提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:58:46.200

好吧，根据您的评论，我认为您想使用 BBQ 来更改页面并避免刷新和返回带有 jQ​​uery 加载的页面的问题。

我给你做了一个例子。

**下载链接：**

[http://dl.dropbox.com/u/15208254/stackoverflow/jquery-bbq-example.zip](http://dl.dropbox.com/u/15208254/stackoverflow/jquery-bbq-example.zip)

请在您的本地主机中运行它，因为它有 2 个 PHP 文件。

希望这可以帮助 ：-）

# java - 我知道我得到了一个stackoverflow，因为我正在使用递归，但是有没有一种简单的方法来解决这个问题？

> ID：10675681
> 
> 赞同：2
> 
> 时间：2012-05-20T17:40:06.773
> 
> 标签：java, android, stack-overflow

我想根据 0 到 10 之间的数字将图像添加到 ImageButton。我的 getNumber 方法是：

```
 public int getNumber(){
    // get a random number between 0 and 10
    Random randomNumber = new Random();
    num = randomNumber.nextInt(10);
    return num;
} 
```

我希望每个图像都是唯一的，但我遇到的问题是，如果 numList 确实包含 num 它只会将按钮留空。我尝试再次递归调用 permuteButton 直到 num 不包含在我的列表中，但这似乎不起作用。

```
 public void  permuteButton(ImageButton btn){    

        getNumber();

        for(int i=0; i<=numList.size(); i++){
            //check if the number is already being used
            if( numList.contains(num) ){
                permuteButton(btn);
            }
            // else the list doesnt have the number so assign the picture and add number to list
            else{
                numList.add(num);
                assignPictures(btn);
            }
        }
    } 
```

任何帮助，将不胜感激。如果这是一个简单的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T17:44:04.443

这段代码有很多问题：

*   最好有一个实例，`Random`而不是在每次调用时创建一个新实例`getNumber()`
*   *与其在 中更改实例*变量，不如`getNumber()`只返回该值并将其分配给 中的*局部*变量`permuteButton`
*   *您可以*使用`while`循环而不是递归`permuteButton`：

    ```
    int num = getNumber();
    while (numList.contains(num)) {
        num = getNumber();
    }
    numList.add(num);
    assignPictures(btn); // Presumably you'd now want to pass in num too 
    ```

*   将列表打乱可能是一个更好的主意，从中创建一个`Queue`，然后您可以在每次需要时从队列中取出一个项目。（当您全部使用它们时，这也很容易发现）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T18:53:24.480

我的回答类似于 Jon Skeet 的最后一个建议。

```
// might be more than 10 ImageButtons, with only 10 images
for (ImageButton imageButton : imageButtons)  
   imageButton.putImage(randomImage.next());

...

public class RandomImage {
   private final List<Image> shuffledImages;
   private int currentIndex;

   public RandomImage(List<Image> images) {
      shuffledImages = new ArrayList<>(images.size());
      shuffledImages.addAll(images);
      currentIndex = -1;
   }

   public Image next() {
      currentIndex++;
      if (currentIndex % shuffledImages.size() == 0) {
         currentIndex = 0;
         Collections.shuffle(shuffledImages);
      }
      return shuffledImages[currentIndex];
   }
} 
```

# java - 在android java中从互联网上获取txt文件的一部分

> ID：10675683
> 
> 赞同：0
> 
> 时间：2012-05-20T17:40:35.093
> 
> 标签：java, android, html, get, text-files

我正在开发一个从固定网页获取信息并将信息转换为图形的应用程序。我试图接收的网页是一个 txt 文件。问题是txt文件太大，在java中将文件变成String需要一分钟多的时间。我为此使用的代码如下：

```
HttpClient client = new DefaultHttpClient();
HttpGet httpGet = new HttpGet("http://winterberg.dnsalias.net:9000/log.txt");
ResponseHandler<String> handler = new BasicResponseHandler();
response = client.execute(httpGet, handler); 
```

txt 文件表示房屋温度的历史记录。自 2011 年 8 月 11 日以来，每小时都会自动将一行文本添加到文本文件中，因此它包含超过 6000 行。但是，只有上个月的信息与申请相关。有没有办法从文件末尾开始读取，直到它读取了一定数量的行？

还是有另一种方法可以加快读取文件的速度？

我无法更改文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:45:48.483

您可以完全阅读您的文本文件并保存读取的字节数。因此，在下一次调用中，您可以读取从存储它的数字开始的字节范围，并在下载此特定字节后，将其附加到原始文本文件中。并且您拥有使用新行更新的文本文件。

您可以使用以下代码部分来获取字节范围：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet get = new HttpGet(new URI(...));
get.addHeader("Range", "bytes=" + start + "-");
InputStream in = httpClient.execute(get).getEntity().getContent(); 
```

对于附加文件，您可以使用附加模式打开文件，并在其上写入新字节：

```
FileOutputStream fos = new FileOutputStream("file.txt", true); //true means openning file in append mode

byte[] buffer = new byte[1024];
int nread = -1;
while((nread != in.read(buffer, 0, 1024))
    fos.write(buffer, 0, nread);

in.close();
fos.close(); 
```

希望它对你有用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:54:51.687

解决这个问题的最简单方法是在服务器上使用一个非常简单的脚本来读取文件并打印最后 30 行。

您也可以尝试使用范围 HTTP 标头，但许多服务器没有实现（您已经有了另一个答案的示例）。

```
sample usage:  
Range: bytes=500-999 
```

我认为脚本会是一个更好的选择。

# java - 如何从自动居中内面板停止 Java Swing JScrollPane

> ID：10675684
> 
> 赞同：0
> 
> 时间：2012-05-20T17:40:42.753
> 
> 标签：java, swing

我正在尝试将 a 包含`JPanel`在 a`JScrollPane`中。当我设置 的首选大小时`JScrollPane`，它会自动将面板居中放置在其中。我想让它左对齐。我注意到实际的内部面板是 的大小`JScrollPanel`，但由于某种原因，内容现在居中。如果我使用`JScrollPane`and`setMinimum`而`setMaximum`不是`setPreferredSize`.

编辑：从评论迁移的代码：

```
JPanel myStandardPanel = new JPanel();
myStandardPanel.setMinimumSize(new Dimension(width, height));
myStandardPanel.setMaximumSize(new Dimension(width, height));
myStandardPanel.setLayout(new BorderLayout());

JPanel alignHorizontalPanel = new JPanel();
alignHorizontalPanel.setMinimumSize(new Dimension(width, height));
alignHorizontalPanel.setMaximumSize(new Dimension(width, height));
alignHorizontalPanel.setLayout(new BorderLayout());
JScrollPane jscp = new JScrollPane(newPanel,
    JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
    JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

jscp.setPreferredSize(new Dimension(width - 100, height - 100));
newPanel.setMinimumSize(new Dimension(width, height));
newPanel.setMaximumSize(new Dimension(width, height));
mainPanel.add(myStandardPanel, panelIdentifier); 
```

# ios - 转换向量 到 GLfloat

> ID：10675687
> 
> 赞同：0
> 
> 时间：2012-05-20T17:41:32.757
> 
> 标签：ios, opengl-es, opengl-es-2.0

我目前在 iOS 中使用 OpenGL，我想知道是否有任何方法可以将矢量转换为 GLfloat？

由于 glBufferData：

```
void glBufferData(GLenum  target,
    GLsizeiptr      size,
    const GLvoid *  data,
    GLenum      usage); 
```

该向量是 stl_bvector.h 的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:16:53.383

你的意思是这样吗？

```
#include <GL/gl.h>
#include <vector>

template<class T>
void glppBufferData(GLenum target, std::vector<T> const &data, GLenum usage)
{
    glBufferDate( target, 
                  sizeof(data[0]) * data.size(), 
                  reinterpret_cast<GLvoid*>(&data[0]), 
                  usage);
} 
```

# visual-studio-2008 - “多线程调试”（/MTd）的内存泄漏和“多线程调试 DLL”（/MDd）没有泄漏

> ID：10675688
> 
> 赞同：2
> 
> 时间：2012-05-20T17:41:41.790
> 
> 标签：visual-studio-2008, memory-leaks

我在一个解决方案中有一堆库和项目，我改为使用 /MTd 而不是 /MDd。我正在使用VS2008。

我突然得到一大堆 /MDd 开关不存在的内存泄漏。

使用[Visual Leak Detector](https://vld.codeplex.com/)时，我注意到所有泄漏都存在于各种库内部，包括 CRT、VS 库和 boost。

例如，这里是前 3 个泄漏的调用堆栈（项目是 Boost::Test 项目）：

```
---------- Block 1 at 0x02211EA0: 568 bytes ----------
  Call Stack:
    f:\dd\vctools\crt_bld\self_x86\crt\src\tidtable.c (395): FrameworkUnitTests.exe!_mtinit + 0x18 bytes
    f:\dd\vctools\crt_bld\self_x86\crt\src\crt0.c (215): FrameworkUnitTests.exe!__tmainCRTStartup + 0x5 bytes
    f:\dd\vctools\crt_bld\self_x86\crt\src\crt0.c (182): FrameworkUnitTests.exe!mainCRTStartup
    0x7C817077 (File and line number not available): kernel32.dll!RegisterWaitForInputIdle + 0x49 bytes
  Data:
    00 00 00 00    F0 20 21 02    0C 9D B8 00    8A 01 00 00     ......!. ........
    14 02 00 00    02 00 00 00    01 00 00 00    FD FD FD FD     ........ ........
    84 1B 00 00    FF FF FF FF    22 00 00 00    02 00 00 00     ........ ".......
    00 00 00 00    C5 03 8A E6    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    B0 80 8C 03    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    00 00 00 00    00 00 00 00    E8 C9 B8 00     ........ ........
    00 00 00 00    00 00 00 00    B0 4A 21 02    F8 DB C4 00     ........ .J!.....
    01 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    D0 57 99 00    00 00 00 00    00 00 00 00    00 00 00 00     .W...... ........
    00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    00 00 00 00    43 00 00 00    00 00 00 00     ........ C.......
    00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........

---------- Block 2 at 0x022120F0: 2084 bytes ----------
  Call Stack:
    f:\dd\vctools\crt_bld\self_x86\crt\src\ioinit.c (137): FrameworkUnitTests.exe!_ioinit + 0x15 bytes
    f:\dd\vctools\crt_bld\self_x86\crt\src\crt0.c (235): FrameworkUnitTests.exe!__tmainCRTStartup + 0x5 bytes
    f:\dd\vctools\crt_bld\self_x86\crt\src\crt0.c (182): FrameworkUnitTests.exe!mainCRTStartup
    0x7C817077 (File and line number not available): kernel32.dll!RegisterWaitForInputIdle + 0x49 bytes
  Data:
    A0 1E 21 02    90 4A 21 02    A4 C4 B8 00    88 00 00 00     ..!..J!. ........
    00 08 00 00    02 00 00 00    02 00 00 00    FD FD FD FD     ........ ........
    03 00 00 00    C1 0A 00 00    01 00 00 00    00 F8 15 00     ........ ........
    FF FF FF FF    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    A0 0F 00 00    00 0A 0A 00    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    07 00 00 00    C1 0A 00 00    01 00 00 00    38 F8 15 00     ........ ....8...
    FF FF FF FF    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    A0 0F 00 00    00 0A 0A 00    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    0B 00 00 00    C1 0A 00 00    01 00 00 00    70 F8 15 00     ........ ....p...
    FF FF FF FF    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    A0 0F 00 00    00 0A 0A 00    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
    FF FF FF FF    00 0A 00 00    01 00 00 00    D8 FF 15 00     ........ ........
    FF FF FF FF    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........

---------- Block 118 at 0x02212FC0: 60 bytes ----------
  Call Stack:
    f:\dd\vctools\crt_bld\self_x86\crt\src\mlock.c (279): FrameworkUnitTests.exe!_mtinitlocknum + 0x13 bytes
    f:\dd\vctools\langapi\undname\undname.cxx (649): FrameworkUnitTests.exe!__unDName + 0x7 bytes
    f:\dd\vctools\crt_bld\self_x86\crt\prebuild\eh\typname.cpp (124): FrameworkUnitTests.exe!type_info::_Name_base + 0x1F bytes
    f:\dd\vctools\crt_bld\self_x86\crt\prebuild\eh\typinfo.cpp (45): FrameworkUnitTests.exe!type_info::name + 0xD bytes
    c:\...\3rdpartylibs\boost_1_49_0\boost\test\unit_test_suite_impl.hpp (377): FrameworkUnitTests.exe!boost::unit_test::ut_detail::generate_test_case_4_type<boost::unit_test::ut_detail::template_test_case_gen<Bitset_b85_Serialization_Tests::deserialize_from_empty_string_should_fail_invoker,boost::mpl::vector_c<int,5,59,519,1021,1024,1025,1026,3021,7024,11 + 0xF bytes
    c:\...\3rdpartylibs\boost_1_49_0\boost\mpl\for_each.hpp (79): FrameworkUnitTests.exe!boost::mpl::aux::for_each_impl<0>::execute<boost::mpl::v_iter<boost::mpl::vector11<boost::mpl::integral_c<int,5>,boost::mpl::integral_c<int,59>,boost::mpl::integral_c<int,519>,boost::mpl::integral_c<int,1021>,boost::mpl::integral_c<int,1024>,boost::mpl::i
    c:\...\3rdpartylibs\boost_1_49_0\boost\mpl\for_each.hpp (101): FrameworkUnitTests.exe!boost::mpl::for_each<boost::mpl::vector_c<int,5,59,519,1021,1024,1025,1026,3021,7024,11025,22026,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647>,boost::mpl::make_identity<boost::mpl::arg<-1> >,boost::uni + 0x21 bytes
    c:...\3rdpartylibs\boost_1_49_0\boost\test\unit_test_suite_impl.hpp (405): FrameworkUnitTests.exe!boost::unit_test::ut_detail::template_test_case_gen<Bitset_b85_Serialization_Tests::deserialize_from_empty_string_should_fail_invoker,boost::mpl::vector_c<int,5,59,519,1021,1024,1025,1026,3021,7024,11025,22026,2147483647,2147483647,2147483647,2147483647,2 + 0x35 bytes
    c:\...\src\bitset_serialization_test.cpp (31): FrameworkUnitTests.exe!Bitset_b85_Serialization_Tests::`dynamic initializer for 'deserialize_from_empty_string_should_fail_registrar31'' + 0x5D bytes
    f:\dd\vctools\crt_bld\self_x86\crt\src\crt0dat.c (903): FrameworkUnitTests.exe!_initterm
    f:\dd\vctools\crt_bld\self_x86\crt\src\crt0dat.c (307): FrameworkUnitTests.exe!_cinit + 0xF bytes
    f:\dd\vctools\crt_bld\self_x86\crt\src\crt0.c (249): FrameworkUnitTests.exe!__tmainCRTStartup + 0x7 bytes
    f:\dd\vctools\crt_bld\self_x86\crt\src\crt0.c (182): FrameworkUnitTests.exe!mainCRTStartup
    0x7C817077 (File and line number not available): kernel32.dll!RegisterWaitForInputIdle + 0x49 bytes
  Data:
    90 4A 21 02    78 40 21 02    5C 9B B8 00    17 01 00 00     .J!.x@!. \.......
    18 00 00 00    02 00 00 00    76 00 00 00    FD FD FD FD     ........ v.......
    F8 F9 15 00    FF FF FF FF    00 00 00 00    00 00 00 00     ........ ........
    00 00 00 00    A0 0F 00 00    FD FD FD FD                    ........ ........ 
```

有人知道发生了什么吗？

**编辑：**
据我了解，两种开关/模式之间的区别在于两个链接的 DLL 是否将共享相同的 CRT（例如内存管理）或每个都有自己的。当每个人都使用自己的 (/MT[d]) 时，一个人不能释放另一个人分配的资源。
但是，我静态链接所有内容，因此不涉及任何 DLL，至少在我的代码中不涉及。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T13:43:04.217

我看到了类似的事情，我认为它可能只是一次性初始化的事情：

```
---------- Block 119 at 0x007B6AF8: 60 bytes ----------
Call Stack:
f:\dd\vctools\crt\crtw32\startup\mlock.c (276): _mtinitlocknum
f:\dd\vctools\crt\crtw32\stdio\stream.c (72): _getstream
f:\dd\vctools\crt\crtw32\stdio\fopen.c (61): _fsopen
f:\dd\vctools\crt\crtw32\stdio\fopen.c (125): fopen 
```

如果 _mtinitlocknum() 分配了随后使用的缓冲区，这可能是误报。换句话说，它会在此之后重新使用缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T13:20:44.310

我看到了同样的事情。以下代码片段说明了这一点。如果您观察 Visual Studio 内存使用情况，MTd 会稳步上升，但 MDd 会保持稳定。就好像 fclose() 没有做任何事情。我已经通过断言语句证明了返回值都是好的。

```
#include <windows.h>
#include <stdio.h>

int APIENTRY WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow);

int APIENTRY WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
UNREFERENCED_PARAMETER(hPrevInstance);
UNREFERENCED_PARAMETER(lpCmdLine);

while (1) 
{
    FILE* fh = fopen("c:\\temp\\1.txt", "a");
    if (fh != NULL)
    {
        int fc = fclose(fh);
    }
}
return (0);

} // WinMain 
```

# javascript - 页面加载时调用函数

> ID：10675690
> 
> 赞同：1
> 
> 时间：2012-05-20T17:41:51.427
> 
> 标签：javascript, function, function-call

[我的代码](http://jsfiddle.net/dibyaranjan3177/3pNWe/)

这是我写的代码。该`default`函数应在页面加载时调用，无需单击任何按钮。它应该显示一些数据，然后应该显示两个按钮。我需要对该代码进行哪些修改？
我是初学者，所以我可能错过了很多东西，请帮忙。

这是我的 JavaScript 部分，详细的程序在链接中给出。

```
function default(){
var i=7;
j=15;
document.write(i+j);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T17:45:58.820

### 避免使用关键字

您不能使用关键字`default`：

```
Uncaught SyntaxError: Unexpected token default 
```

您需要重命名函数。

### 立即调用的函数表达式

完成后，您可以将其括在括号中以立即执行：

```
(function dflt(){
  var i = 7, j = 15;
  document.write( i + j );
})(); 
```

### 警告：避免`document.write`

请注意，这`document.write`将清除您的文档，从而删除您的文档内容。您应该插入一个新的文本节点，或更新页面上元素的内容：

```
(function dflt(){
  var i = 7, j = 15;
  document.body.appendChild( document.createTextNode( i + j ) );
})(); 
```

您还可以将此文本节点添加到页面上的元素：

```
var tNode = document.createTextNode( i + j );
document.getElementById("foo").appendChild( tNode ); 
```

这会将生成的文本添加到`id`属性为的任何元素中`foo`：

```
<span id="foo"></span> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T17:44:26.847

您可以使用`Immediately Invoked Function Expression`：

```
(function defaults() { // I edited the function name - "default" can not be used
    var i = 7;         // You can also remove the function name, will work either
    j = 15;            // way. "default" is a reserved word
    document.write(i + j);
})(); 
```

但是它在调用它……你不能不调用它就运行一个函数，你想用魔法执行它吗？

您应该阅读以下内容：

[这个“（function（）{}）;”，括号内的函数，在javascript中是什么意思？](https://stackoverflow.com/questions/4043647/what-does-this-function-a-function-inside-brackets-mean-in-javascript)

* * *

正如@stakx 指出的那样，您可以将函数引用传递给在 X 时间后执行函数的函数，例如`setTimeout`：

```
setTimeout(defaults, 1000); // execute "defaults" after one second. 
```

但这就像自己处理一样：

```
function foo(aFunction){
    aFunction();
}

foo(defaults); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T17:55:51.030

如果您不打算使用 jQuery（如 @Photon 严重致命错误所建议的那样），您可以尝试使用[`body`元素的`onload`事件：](http://www.w3schools.com/jsref/event_body_onload.asp)

```
<body onload="default();">
    ...
</body> 
```

尽管这可能无法按预期工作。jQuery 以更可靠的方式处理此问题，因此如果您决定尝试一下，请查看[`$(document).ready(…)`](http://api.jquery.com/ready/)API 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T17:46:12.480

```
function default(){
    var i=7;
    j=15;
    document.write(i+j);
    } 
```

default 是 javascript 中的保留字，您不能使用它。

# c# - Visual Studio 11 Beta ... WPF 模板？

> ID：10675692
> 
> 赞同：0
> 
> 时间：2012-05-20T17:42:07.000
> 
> 标签：c#, wpf, templates, visual-studio-2012

我在我的 Windows 8 VM 中安装了 Visual Studio 11 Beta (Express for Windows 8)。当我按下 New Project 时，我可以看到很多 Metro 应用程序模板……但没有别的。我找不到用于制作任何桌面应用程序的模板。特别是我希望能够在 C# 中制作一个 WPF 项目。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:46:49.937

是的，“Express for Windows 8”版本只允许您创建 Metro 应用程序。从[产品页面](http://msdn.microsoft.com/en-us/windows/apps/hh852659.aspx)：

> 您可以使用适用于 Windows 8 的 Visual Studio 11 Express Beta 中的工具来创建适用于 Windows 8 的 Metro 风格应用程序。这些工具包括功能齐全的代码编辑器、强大的调试器、集中的探查器以及可用于构建的丰富语言支持用 HTML5、JavaScript、C++、C# 或 Visual Basic 编写的应用程序。适用于 Windows 8 的 Visual Studio 11 Express Beta 还包括一个设备模拟器，您可以使用它在多种外形尺寸上测试 Metro 风格的应用程序。

如果要构建其他类型的应用程序，则需要下载[Visual Studio 11 Professional 测试版](http://www.microsoft.com/visualstudio/11/en-us/downloads#professional)。（我预计可能会有一个普通的“Visual C# Express 11”，它允许在非测试版时使用 WinForms 和 WPF 应用程序......很快就会有一个候选发布版，因此可能会有一个合适的 Express 版本。 )

# eclipse - Eclipse RCP ListProvider 调整

> ID：10675693
> 
> 赞同：0
> 
> 时间：2012-05-20T17:42:15.103
> 
> 标签：eclipse, image, list, rcp, provider

我将此图像列表提供程序更改为缩略图提供程序时遇到问题。如有需要，我也会为它发布视图。

```
public Object[] getElements(Object inputElement) {
        if (iDirname == null)
            return null;
        File dir = new File(iDirname);
        FilenameFilter filter = new FilenameFilter() {
            public boolean accept(File directory, String filename) {
                if (filename.endsWith("jpg") || (filename.endsWith("bmp")) || (filename.endsWith("png") || (filename.endsWith("JPG") || (filename.endsWith("BMP")) || (filename.endsWith("PNG")))))
                    return true;
                else
                    return false;
            }
        };
        String[] dirList = null;

        if (dir.isDirectory()) {
            dirList = dir.list(filter);
            for (int i=0; i<dirList.length;++i){

                //dirList2[i] = new Image(device, dirList2[i]); added this to try passing array of Images - failed.
                dirList[i] = iDirname + File.separatorChar + dirList[i];

            }
        }
        return dirList;
    } 
```

和视图

```
public void createPartControl(Composite parent) {
        iViewer = new ListViewer(parent);
        iViewer.setContentProvider(new DirListProvider());

        getSite().setSelectionProvider(iViewer);
        makeActions();
        hookContextMenu();
        contributeToActionBars();

    } 
```

我不知道如何将提供的路径列表更改为缩略图显示。我应该将提供的内容放入 Array 并遍历它以创建图像吗？如果有怎么办？

在此先感谢您的帮助。

编辑：

我添加了

```
ImageDescriptor[] dirList = null;
        if (dir.isDirectory()) {
            String[] dirList2 = dir.list(filter);
            for (int i=0; i<dirList2.length;++i){

                dirList[i] = ImageDescriptor.createFromImageData(new ImageData(iDirname + File.separatorChar + dirList2[i]));
                //dirList[i] = iDirname + File.separatorChar + dirList[i];

            }
        }
        return dirList; 
```

但这根本没有显示任何内容。

当您告诉我使用`Composite`时，它是我的父变量吗？我仍然不知道如何显示经过的路径中的图像`ListProvider`。我在这方面真的很绿色：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:15:55.300

您在这里缺少的是[LabelProvider](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fviewers%2FLabelProvider.html)。您可以使用 a`LabelProvider`为查看器输入中的每个元素提供图像。

但是，弗朗西斯厄普顿是对的，我认为 ListViewer 不会真正满足您的需求，因为您最终会得到一列图像。尽管您无法将图像直接添加到您的`Composite`中，但您需要将它们设置为标签的背景图像。

还有一些其他的事情需要考虑：

*   一旦你用完它们，你就需要`dispose()`你`Images`的，因为它们会用完系统句柄。因此，您需要跟踪您在`getElements(Object)`方法中创建的图像。
*   如果您从中读取图像的目录尚不包含缩略图，则您需要先缩放图像，然后再将它们呈现在您的 UI 上。

请记住，您从 ContentProvider 的 getElements(Object) 方法返回的数组类型定义了将传递给您的 LabelProvider 方法的类型。因此，您开始返回一个表示图像路径的字符串数组。您的 LabelProvider 需要将这些加载到要从提供程序的 getImage 方法返回的图像中 - 但请记住我所说的关于处理这些图像的内容！然后您切换到返回一个图像描述符数组，在这种情况下，您需要将传入的 Object 转换为 ImageDescriptor 并使用它在 getImage 方法中创建 Image。也许一旦你有了这个工作，你可以考虑这是否满足你的需求，然后可能会考虑做一个不同的实现，比如复合/网格布局/标签方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:29:03.873

我不会`ListViewer`为此使用 a 。我只需创建一个`Composite`，然后使用`GridLayout`设置您想要的列数和边距等，然后将图像直接添加到合成中。据我所知，您不能将想象中的任意东西放在 SWT`List`中，因此`ListViewer`不会对您有所帮助。您可以在`createPartControl`方法中完成所有这些操作。

# eclipse - 从eclipse自动发布maven项目

> ID：10675699
> 
> 赞同：1
> 
> 时间：2012-05-20T17:43:59.377
> 
> 标签：eclipse, maven, web, publish

如何设置 Eclipse 以自动发布 Maven Web 项目，就像我们设置常规 Web 项目的方式一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:12:11.553

当你说发布时，我假设你想将它发布到像 Tomcat 这样的嵌入式应用服务器。我遵循以下方法之一。

**选项1：**

1.  安装 m2eclipse。
2.  将 web 项目作为 maven 项目导入。
3.  右键单击项目并运行为`Run on Server`.

**选项 2：**

1.  安装 m2eclipse。
2.  将 Web 项目作为 Java 项目导入。
3.  右键单击 -> 配置 -> 转换为 Maven 项目。
4.  右键单击项目并运行为`Run on Server`.

# css - Wordpress：多次样式化摘录/内容

> ID：10675703
> 
> 赞同：0
> 
> 时间：2012-05-20T17:44:11.370
> 
> 标签：css, wordpress, styles

我是 wordpress 和 PHP 的新手，在尝试使用多个循环编写杂志样式布局后，一位朋友让我使用子项为一个循环设计多个帖子外观。

例子：

```
.hentry:first-child {
background-color: gray;
height: 460px;
} 
```

这使我不必对帖子进行分类和取消分类，以使它们从最近开始出现，但具有正确的样式。

父/子概念效果很好，直到我尝试为应用于所有帖子摘录的 .entry-content 类设置样式。

我试过了：

```
.entry-content:first-child {
<--styles-->
} 
```

但没有运气。唯一似乎有所不同的是 .entry-content 类本身的样式，但这显然不会起作用，因为我要进行的三个外观在大小等方面完全不同。

Wordpress Answers 网站上的一些人似乎认为我在 Stack Overflow 上的运气会更好。

有什么建议么？正在进行中的框架（非常正在进行中）位于： http: [//piquantblog.com](http://piquantblog.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:51:47.263

尝试

```
.hentry:first-child .entry-content{} 
```

如果您想定位第一个条目中的条目内容

# c++ - 如何读取注册表的键值并使用 MessageBox() 将其打印到屏幕上

> ID：10675705
> 
> 赞同：8
> 
> 时间：2012-05-20T17:44:20.677
> 
> 标签：c++, winapi

我是 C++ 和 WinCe 开发的新手。

我想从注册表中读取一个字符串并用`MessageBox()`. 我尝试了以下方法。

```
HKEY key;
if (::RegOpenKeyEx(HKEY_LOCAL_MACHINE, TEXT("System\\CurrentControlSet\\GPS Intermediate Driver\\Drivers\\SiRFStar3HW"), 0, KEY_READ, &key) != ERROR_SUCCESS)
{
    MessageBox(NULL,L"Can't open the registry!",L"Error",MB_OK);
}
char value[5];
DWORD value_length=5;
DWORD type=REG_SZ;
RegQueryValueEx(key,(LPCTSTR)"Baud", NULL, &type, (LPBYTE)&value, &value_length);
wchar_t buffer[5];
_stprintf(buffer, _T("%i"), value);

::MessageBox(NULL,buffer,L"Value:",MB_OK);

::RegCloseKey(key); 
```

所以我知道这里有问题，但我该如何解决？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-20T19:42:43.277

导航 Win32 API 可能是一件棘手的事情。注册表 API 比较复杂。这是一个演示如何读取注册表字符串的简短程序。

```
#include <Windows.h>
#include <iostream>
#include <string>

using namespace std;

wstring ReadRegValue(HKEY root, wstring key, wstring name)
{
    HKEY hKey;
    if (RegOpenKeyEx(root, key.c_str(), 0, KEY_READ, &hKey) != ERROR_SUCCESS)
        throw "Could not open registry key";

    DWORD type;
    DWORD cbData;
    if (RegQueryValueEx(hKey, name.c_str(), NULL, &type, NULL, &cbData) != ERROR_SUCCESS)
    {
        RegCloseKey(hKey);
        throw "Could not read registry value";
    }

    if (type != REG_SZ)
    {
        RegCloseKey(hKey);
        throw "Incorrect registry value type";
    }

    wstring value(cbData/sizeof(wchar_t), L'\0');
    if (RegQueryValueEx(hKey, name.c_str(), NULL, NULL, reinterpret_cast<LPBYTE>(&value[0]), &cbData) != ERROR_SUCCESS)
    {
        RegCloseKey(hKey);
        throw "Could not read registry value";
    }

    RegCloseKey(hKey);

    size_t firstNull = value.find_first_of(L'\0');
    if (firstNull != string::npos)
        value.resize(firstNull);

    return value;
}

int wmain(int argc, wchar_t* argv[])
{
    wcout << ReadRegValue(HKEY_LOCAL_MACHINE, L"SOFTWARE\\Microsoft\\Windows\\CurrentVersion", L"CommonFilesDir");
    return 0;
} 
```

**笔记：**

1.  我没有 CE，所以这是一个普通的 Win32 应用程序，为 Unicode 编译。我选择了这条路线，因为 CE 不使用 ANSI 字符。
2.  我利用了许多 C++ 特性。最显着`std::wstring`。这使得字符串处理变得轻而易举。
3.  我使用异常来处理错误。您可以将其替换为其他一些机制，但这符合我的目的，即在后台保留错误处理问题。
4.  使用异常会使关闭注册表项有点混乱。更好的解决方案是使用 RAII 类来包装注册表项的生命周期。为简单起见，我省略了这一点，但在生产代码中，您需要采取额外的步骤。
5.  通常，`RegQueryValueEx`返回`REG_SZ`以空值结尾的数据。此代码通过截断第一个空字符之外的内容来处理该问题。如果返回的值不是以 null 结尾的，则不会发生截断，但该值仍然可以。
6.  我刚刚打印到我的控制台，但你调用`MessageBox`. 像这样：`MessageBox(0, value.c_str(), L"Caption", MB_OK)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-07T20:09:56.913

这是一个完整的源代码，用于读取 Registry 的键值并将其打印到屏幕上：

```
//Create C++ Win32 Project in Visual Studio
//Project -> "project" Properties->Configuration Properties->C/C++->Advanced->Show Includes : YES(/ showIncludes)
//Project -> "project" Properties->Configuration Properties->General->Project Defaults->Use of MFC : Use MFC in a shared DLL
#include <iostream>
#include <afx.h>
using namespace std;

int ReadRegistryKeyAttributes(CString ConstantKeyPath)
{
    //Here ConstantKeyPath is considered as Registry Key Path to Read
    HKEY MyRegistryKey;
    if (RegOpenKeyEx(HKEY_CURRENT_USER, ConstantKeyPath, 0, KEY_READ, &MyRegistryKey) != ERROR_SUCCESS)
    {
        cout << "KeyOpen Failed" << endl;
        return -1;
    }

    DWORD type = REG_DWORD;
    DWORD cbData;
    unsigned long size = 1024;
    CString csVersionID;

    csVersionID = _T("VersionID"); //Here VersionID is considered as Name of the Key
    if (RegQueryValueEx(MyRegistryKey, csVersionID, NULL, &type, (LPBYTE)&cbData, &size) != ERROR_SUCCESS)
    {
        RegCloseKey(MyRegistryKey);
        cout << "VersionID Key Attribute Reading Failed" << endl;
        return -1; //Error
    }
    else
    {
        cout << "VersionID = " << cbData << endl; //Key value will be printed here.
    }
    return 1; //Success
}
int main()
{
    int iResult;
    CString KeyPath = _T("Software\\RCD_Technologies\\Rajib_Test");
    iResult = ReadRegistryKeyAttributes(KeyPath);
    if (iResult < 0)
    {
        cout << "ReadRegistryKeyAttributes operation Failed" << endl;
        return -1;
    }
    cout << "<--- ReadRegistryKeyAttribute Operation Successfull -->" << endl;
    getchar();
    return 0;
} 
```

希望这个例子对寻求这个问题的人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T22:55:44.513

这是未经测试的（我的设备没有你的键/值），但为 CE 编译并为你提供了你如何做你所追求的要点：#include

```
int _tmain(int argc, _TCHAR* argv[])
{
    HKEY key;

    if(!RegOpenKeyEx(
        HKEY_LOCAL_MACHINE, 
        _T("System\\CurrentControlSet\\GPS Intermediate Driver\\Drivers\\SiRFStar3HW"), 
        0, 
        NULL, 
        &key))
    {
        MessageBox(NULL, _T("Failed to open key"), _T("Error"), 0);
        return -1;
    }

    DWORD length;

    // get the size - it's going to be 4 for a DWORD, but this shows how to deal with REG_SZ, etc
    if(!RegQueryValueEx(
        key, 
        _T("Baud"), 
        NULL, 
        NULL, 
        NULL, 
        &length))
    {
        MessageBox(NULL, _T("Failed to get buffer size"), _T("Error"), 0);
        goto exit;
    }

    // allocate - again, if we know it's a DWORD, this could be simplified
    BYTE *buffer = (BYTE*)LocalAlloc(LPTR, length);

    // query
    if(!RegQueryValueEx(
        key, 
        _T("Baud"), 
        NULL, NULL, 
        buffer, 
        &length))
    {
        MessageBox(NULL, _T("Failed to get value data"), _T("Error"), 0);
        goto exit;
    }

    // assuming "baud" is a DWORD, not a string
    DWORD baud = *(DWORD*)buffer;

    // build an output
    TCHAR message[MAX_PATH];
    _stprintf(message, _T("The baud value is %i"), baud);
    MessageBox(NULL, message, _T("Success"), 0);

    exit:
    RegCloseKey(key);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-20T19:08:42.560

使用 char 数组时，您需要设置的不是缓冲区，而是指向缓冲区的指针，如下所示：

```
MessageBox(0,&buffer,"Value:",MB_OK); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-18T12:34:08.927

只需使用 RegQueryValueEx 并将其放入 buf

# android - Android 连接时在后台发送数据

> ID：10675706
> 
> 赞同：2
> 
> 时间：2012-05-20T17:44:21.587
> 
> 标签：android, service

基本上我需要我的应用程序在建立与网络的连接时向服务器发送一些数据，并且它必须在后台。就是这样。

有没有办法在建立连接时自动启动我的服务？或者我应该使用常规服务来测试连接并以 30 分钟的间隔运行此服务？我应该使用诸如 AlarmManager 之类的东西来检查连接吗？这似乎是对资源的浪费，据我所知，如果需要资源，Android 可以停止服务。

有什么建议甚至更好 - 关于最佳方式的示例？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T17:50:58.070

`broadcast receiver`为此，您可以使用 a 。在 SO 上看到[这个](https://stackoverflow.com/questions/8633704/in-android-to-check-the-internet-connection-is-available-for-frequently)问题。

您可以检查是否已建立互联网连接，无需定期检查。

（引用我之前提到的链接）

```
<receiver android:name=".ReceiverName" >
    <intent-filter >
        <action android:name="android.net.wifi.STATE_CHANGE" />
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
    </intent-filter>
</receiver> 
```

和

```
public class ReceiverName extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        ConnectivityManager cm = ((ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE));
        if (cm == null)
            return;
        if (cm.getActiveNetworkInfo() != null && cm.getActiveNetworkInfo().isConnected()) {
            // Send here
        } else {
            // Do nothing or notify user somehow
        }

    }
} 
```

希望这可以帮助！

# drupal-7 - drupal 7在ubercart 3.x中成功付款的钩子是什么

> ID：10675711
> 
> 赞同：2
> 
> 时间：2012-05-20T17:45:18.267
> 
> 标签：drupal-7, hook, payment, ubercart

我在 drupal 7 上使用 ubercart。ubercart 版本是 3.x。我尝试大量搜索支付成功后运行的钩子。之后我想向数据库插入更多细节。是否有任何完整和成功付款的钩子。我相信大多数项目在付款后都会涉及一些工作，因此必须有一个钩子或方法来完成它。

感谢所有史密斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:01:22.737

使用`hook_uc_order()`（[文档](http://api.ubercart.me/api/drupal/ubercart!uc_order!uc_order.api.php/function/hook_uc_order/7)）与`$op = 'save'`案例。并检查`$order->order_status`订单状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T19:14:21.513

使用 hook_uc_order 确定订单何时成功完成所需的条件是：

1.  $op == '更新'
2.  $order->order_status == 'payment_received'
3.  $arg2 == '完成'

我不确定#2 是否绝对需要，但它似乎并没有受到伤害。

因此，此代码将让您在订单成功完成时采取行动：

```
function MODULE_NAME_uc_order($op, $order, $arg2) {
    if($op == 'update' && $order->order_status == 'payment_received' && $arg2 == 'completed'){
        //do something on successful order completion
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:24:27.410

我认为没有特定的钩子，而是使用规则和操作，只需根据下面的代码创建一个操作，然后转到配置、工作流、规则并将您的操作添加到现有规则“完整更新订单状态”付款”或创建一个单独的规则，确保您添加一个条件来检查价值顺序：付款余额 <= 0。

```
/**
 * Implements hook_rules_action_info().
 *
 * Add rules action to process order after payment
 */
function my_module_rules_action_info() {
  $order_arg = array(
    'type' => 'uc_order',
    'label' => t('Order'),
  );

  $actions['my_module_action_process_order'] = array(
    'label' => t('My Module Process Ubercart Order'),
    'group' => t('My Module'),
    'base' => 'my_module_action_process_order',
    'parameter' => array(
      'order' => $order_arg,
    ),
  );

  return $actions;
}

function my_module_action_process_order($order) {
   // Do Whatever Here
} 
```

# actionscript-3 - 闪存预加载器

> ID：10675712
> 
> 赞同：-1
> 
> 时间：2012-05-20T17:45:18.377
> 
> 标签：actionscript-3, flash

所以我设计了一个圆形预加载器，根据加载帧的百分比来填充。除了预加载器之外，一切都可以与一两帧内容一起使用。当我添加包含十亿帧和电影剪辑的所有站点时，预加载器将无法正常工作，我对此感到非常厌烦，因为我花了大约 4 天时间试图了解哪里出了问题。

不幸的是，我找不到问题，希望专业人士能给我解释一下出了什么问题。谢谢你们。

来自预加载器的代码：

```
import flash.display.*;
import flash.events.ProgressEvent;
import flash.events.Event;

stop();

this.loaderInfo.addEventListener(ProgressEvent.PROGRESS, loading);
this.loaderInfo.addEventListener(Event.COMPLETE, loaded);

function loading(e:ProgressEvent):void{
    var porcent:Number = Math.floor((e.bytesLoaded / e.bytesTotal) * 100);
    porcent_txt.text = String(porcent) + "%";
    loader.gotoAndPlay(porcent);
}

function loaded(e:Event):void{
    this.loaderInfo.removeEventListener(ProgressEvent.PROGRESS, loading);
    this.loaderInfo.removeEventListener(Event.COMPLETE, loaded);
    gotoAndStop("enter");
} 
```

![在此处输入图像描述](../Images/a7e4cbc5a186bbaf8dc288285436c089.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:04:14.727

您需要检查您的库项目是否未导出到第一帧。一个普通的 flash 文件除了第一帧上的预加载器外应该没有任何内容。除了第一帧中的预加载器所需的类之外，不要使用任何其他类。

![在此处查看第一帧和第二帧](../Images/16d1a487d89910d9ef7e85f34ac50f5e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:08:27.273

所以首先，非常感谢你的帮助，这很有帮助

代码没问题 预加载器电影剪辑也没问题 问题出在有一些文本的图层上，事实上我不知道为什么会发生这个问题，我的猜测是它一定与我项目中更深层次的问题有关......不要知道

再次感谢你。

# php - PHP中的MySQL语法错误

> ID：10675716
> 
> 赞同：0
> 
> 时间：2012-05-20T17:45:50.857
> 
> 标签：php, mysql

错误消息：“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'portfolio' 附近使用正确的语法”

这是有问题的代码：

```
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$host="****"; // Host name 
$username="****"; // Mysql username 
$password="****"; // Mysql password 
$db_name="a9307665_br"; // Database name 
$tbl_name="portfolio"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die(mysql_error()); 
mysql_select_db("$db_name")or die(mysql_error());

$query_getPosts = "SELECT post_id, title, updated FROM $tbl_name ORDER BY updated DESC";
$getPosts = mysql_query($tbl_name) or die(mysql_error());
$row_getPosts = mysql_fetch_assoc($getPosts);
$totalRows_getPosts = mysql_num_rows($getPosts);
?> 
```

我认为错误是基于 MySQL 的，这是导致错误的代码行：

```
$query_getPosts = "SELECT post_id, title, updated FROM $tbl_name ORDER BY updated DESC"; 
```

有人可以指出我正确的方向吗？

更新：结果：`echo $query_getPosts;`

```
SELECT post_id, title, updated FROM `portfolio` ORDER BY updated DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:54:36.337

这一行是错误的：

```
$getPosts = mysql_query($tbl_name) or die(mysql_error()); 
```

对此正确：

```
$getPosts = mysql_query($query_getPosts) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:51:33.390

您可以尝试用反引号包裹您的表名 -

```
$query_getPosts = "SELECT post_id, title, updated FROM `$tbl_name` ORDER BY updated DESC"; 
```

您还将表名指定为查询字符串:)

```
mysql_query($tbl_name) 
```

尝试

```
mysql_query($query_getPosts) 
```

# php - 如何压缩 HTML 表单的选定文件

> ID：10675718
> 
> 赞同：0
> 
> 时间：2012-05-20T17:46:03.470
> 
> 标签：php

我有 PHP 页面，其中列出了一些基于专辑年份之类的标准的歌曲。我只是在每首歌曲附近放置了一个复选框。当访问者选中某个复选框并按下提交按钮时，表单会将每个值发送到 php 文件。在 PHP 文件中，值存储在一个数组中。

```
$files_to_zip=array();
for($i=0;$i<count($_POST['song'];i++)
$files_to_zip[]=$_POST['song'][$i];

//'song' is the name of the checkbox in the HTML form 
```

问题是 PHP 文件没有使用我编写的代码创建 zip 文件。

```
function create_zip($files = array(),$destination = '',$overwrite = true) {
//if the zip file already exists and overwrite is false, return false
if(file_exists($destination) && !$overwrite) { return false; }
//vars
$valid_files = array();
//if files were passed in...
if(is_array($files)) {
//cycle through each file
foreach($files as $file) {
//make sure the file exists
if(file_exists($file)) {
$valid_files[] = $file;
}
}
}
//if we have good files...
if(count($valid_files)) {
//create the archive
$zip = new ZipArchive();
if($zip->open($destination,$overwrite ? ZIPARCHIVE::OVERWRITE : ZIPARCHIVE::CREATE) !== true) {
return false;
}
//add the files
foreach($valid_files as $file) {
$zip->addFile($file,$file);
}
//debug
//echo 'The zip archive contains ',$zip->numFiles,' files with a status of ',$zip->status;

//close the zip -- done!
$zip->close();

//check to make sure the file exists
return file_exists($destination);
}
else
{
return false;
}
}

$files_to_zip = array();
foreach($_POST['song'] as $fileabc)
{
$files_to_zip[]=$fileabc;
}
//if true, good; if false, zip creation failed
$result = create_zip($files_to_zip,'my-archive.zip');
if($result==true)echo "Success"; else echo "failed"; 
```

这是我在 PHP 中使用的全部代码。

如果我动态设置 $files_to_zip 的值，例如，

```
$files_to_zip=array('link1','link2','link3'..) 
```

它工作正常。

我的代码中的错误是什么？

# cocoa - 将 NSTimer 链接到 NSProgressIndicator

> ID：10675720
> 
> 赞同：1
> 
> 时间：2012-05-20T17:46:13.103
> 
> 标签：cocoa, nstimer, nsprogressindicator

我需要制作一个`NSTimer`会告诉另一个类在 10 秒内触发，我还想用它来为确定的`NSProgressIndicator`. 我还需要知道如何将我的不确定进度指示器更改为确定。我能够找到有关此的 Apple 文档，但是更深入的解释会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T21:08:41.010

从不确定到确定`NSProgressIndicator`您可以在 IB 中进行更改。选择您的 progressIndicator 并转到属性检查器并取消选中*Indeterminate*复选框，如下所示：

![截屏](../Images/da47cf8e9d66d67a618a231a2a173367.png)

或者它可以以编程方式完成：

```
[progressIndicatorOutlet setIndeterminate:NO]; 
```

**注意：** progressIndicatorOutlet 是你的`NSProgressIndicator`出口，所以不要忘记`IBOutlet`它。

* * *

**确定 NSProgressIndicator**动画：

只需像这样设置和更改值非常简单：

```
[progressIndicatorOutlet setDoubleValue:10]; 
```

**注意：** progressIndicatorOutlet 是你的`NSProgressIndicator`出口，所以不要忘记`IBOutlet`它。

* * *

**NS定时器：**

简单的计时器示例：

```
//Place this where You want to call class after 10 sec. (for example: when button pressed)
//It will call class with name callAfter10sec after 10 sec. Place in there what You need to do. 

[NSTimer scheduledTimerWithTimeInterval:10.0
                                 target:self
                               selector:@selector(callAfter10sec:)
                               userInfo:nil
                                repeats:YES]; 
```

不要忘记添加我在这样的评论中提到的类：

```
-(void)callAfter10sec:(NSTimer *)time {
    // Do what You want here

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T11:24:36.447

希望能帮助到你。

使用以下方式我们可以达到预期的效果

```
NSInteger progressValue;
NSTimer *timerObject;

progressValue = progressMaxValue;

timerObject = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(incrementProgressBar) userInfo:nil repeats:YES];

[timerObject fire];
[self.progressBar setMinValue:progressMinValue]; 
[self.progressBar setMaxValue:progressMaxValue];
[self.progressBar setDoubleValue:progressValue];

- (void)incrementProgressBar {
    // Increment the progress bar value by 1
    [self.progressBar incrementBy:1.0];
    progressValue--;
    [self.progressBar setDoubleValue:progressValue];
} 
```

# python - 将 Django 和 Joomla 站点添加到 Apache

> ID：10675724
> 
> 赞同：0
> 
> 时间：2012-05-20T17:46:27.680
> 
> 标签：python, django, apache, joomla

我试图将 Apache 配置为同时运行 Joomla 站点和 Django 站点。我已经让两个工作都不同时。

我有 2 个从 /var/www/html 运行的 Joomla 站点和一个提供 2 个 URL 输入和输出的 Django 站点。

我的 httpd.conf 是默认的，我的 conf.d 文件是....

```
#
# Django settings.
#
<VirtualHost *:80>
        ServerName tools.website.com
        WSGIScriptAlias / /opt/django/myproject/apache/django.wsgi
</VirtualHost> 
```

从这个配置中，我认为这个虚拟主机只有在主机头设置为 tools.website.com 时才会使用？有谁知道实现这一目标的正确方法？

谢谢，

# rss - 我的网站的谷歌分析报告的输出

> ID：10675729
> 
> 赞同：1
> 
> 时间：2012-05-20T17:47:10.773
> 
> 标签：rss, google-analytics, google-analytics-api

我有一个使用谷歌分析进行统计的网站。我想在我的博客中显示我上个月的热门帖子。我可以输出它的 rss 或 xml 格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:46:56.673

我熟悉实现这一点的两种方法。

1.  您可以实现[Google Analytics API](https://developers.google.com/analytics/devguides/)并以所需格式导出数据
2.  您可以安排以 CSV 格式导出该数据并将其发送到电子邮件收件箱。然后手动或通过一些自动化程序，提取 CSV 附件并将其发布到您的站点。

我希望这有助于你继续前进。

# c# - 如何获取控制台应用程序的屏幕大小？

> ID：10675732
> 
> 赞同：5
> 
> 时间：2012-05-20T17:47:51.793
> 
> 标签：c#, .net, console-application, screen-size

如何在控制台应用程序中获取屏幕尺寸？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T17:52:42.397

```
var w = Console.WindowWidth;
var h = Console.WindowHeight; 
```

**- 编辑 -**

```
Screen.PrimaryScreen.Bounds 
Screen.PrimaryScreen.WorkingArea 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T18:19:35.460

如果你想获得显示大小，你可以使用 WMI（Windows Management Instrumentation）

```
 var scope = new ManagementScope();
        scope.Connect();

        var query = new ObjectQuery("SELECT * FROM Win32_VideoController");

        using (var searcher = new ManagementObjectSearcher(scope, query))
        {
            var results = searcher.Get();
            foreach (var result in results)
            {
                Console.WriteLine("Horizontal resolution: " + result.GetPropertyValue("CurrentHorizontalResolution"));
                Console.WriteLine("Vertical resolution: " + result.GetPropertyValue("CurrentVerticalResolution"));
            }               
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-12T00:59:15.623

如果您希望通过屏幕大小来更改控制台应用程序的大小，我们首先必须获得窗口的最大宽度和高度。

```
var largestWindowX = Console.LargestWindowWidth;
var largestWindowY = Console.LargestWindowHeight; 
```

对于 1920x1080 的屏幕，最大的 X 和 Y 值是 X：240 和 Y：66。通过将值写入屏幕，我们可以手动更改屏幕尺寸以获得相应的 X 和 Y 坐标该屏幕尺寸.

现在我们取本例中最后一个屏幕尺寸的最大值 1600x1024 ，即 X:200 和 Y:62 并检查屏幕是否大于或等于显示器，并使控制台窗口变*大*。

```
if(largestWindowX >= 200 && largestWindowY >= 62)
{
    //The values 200 and 40 can be changed depending on what you are making
    Console.SetWindowSize(200, 40);
}
//add more if else statments depending how you wish to scale it as.
else
{
    //Otherwise any screen size smaller than the sizes added make it this...
    Console.SetWindowSize(/*Your X value*/, /*Your Y value*/);
} 
```

如果您正在寻找一种从操作系统中找到显示大小的方法，我不知道，因为我不是高级程序员，只需要了解一些这种庞大的语言。

不过，从技术上讲，您可以使用上述变量的值。例如：

```
if(largestWindowX == 240 && largestWindowY == 66)
{
     Console.WriteLine("This is a 1920x1080 screen");
} 
```

我不确定这是否是告诉屏幕尺寸的准确方法。否则，如果需要全屏`Alt`+`Enter`工作...

# c# - 如果输入文本是特殊字符，如何检查块添加字符？

> ID：10675736
> 
> 赞同：0
> 
> 时间：2012-05-20T17:48:16.260
> 
> 标签：c#, asp.net

我有一个 gridview，它有一些列。例如：姓名|年龄|生日 我如何过滤文本框，以便如果用户键入特殊字符，则不会添加它。

我知道我需要使用这个： ^[^0-9a-zA-Z]*$ ，但我不知道如何。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:03:21.027

```
var lastValidValue;
input.addEventListener('keydown', function(evt) {
  // before change capture current value;
  lastValidValue = input.value;
}, false);
function onchange(evt) {
  if (/^[^0-9a-zA-Z]*$/.test(input.value))
  // if its valid, update preserved field.
    lastValidValue = input.value;
  else
  // otherwise revert to previous data.
    input.value = lastValidValue;
}
input.addEventLisenter('keyup', onchange, false);
input.addEventListener('change', onchange, false); 
```

其中 input 是对您的文本框的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:17:10.427

`OnBlur`和`OnKeyUp`事件`TextBox`

## JavaScript

```
<script language="javascript" type="text/javascript">
    function validation() {
        var txt = document.getElementById('<%= txt.ClientID%>').value;
        var regex = new RegExp('[^0-9a-zA-Z]+');
        while (txt.match(regex)) {
            if (txt.match(regex)[0] == "") break;
            txt = txt.replace(regex, '');
        }
        document.getElementById('<%= txt.ClientID%>').value = txt;
    }
    function onkeyUpEvent() {
        validation();
    }

    function onBlurEvent() {
        validation();
    }
</script> 
```

## 标记

```
<asp:TextBox ID="txt" runat="server" onkeyup="onkeyUpEvent();" 
                                           onblur="onBlurEvent();"></asp:TextBox> 
```

# git - 如何在 Mercurial 中打印给定分支上的变更集哈希列表？

> ID：10675738
> 
> 赞同：2
> 
> 时间：2012-05-20T17:48:44.007
> 
> 标签：git, mercurial

如果我在 git 存储库的终端中发出此命令，它会给我提交唯一 ID 或我所知的修订列表，如下所示：

```
$ git rev-list --reverse master  

de1ea6c8a9cd195b348562f42c6cef5bd3555748  
2da45a72621e5c611e0d9f47fa7799fc24476c3c 
```

如何在 Mercurial 存储库中获得相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T20:08:52.077

基本上，它是命令的输出自定义`hg log`：

```
$ hg log --template '{node}\n'
75f18c4e5caaa5dd1e82f8a1ef1af8f55659fe15
9f15509b1ec305e688f8d524dc902f82000f5526
3199dde60fae0d9b4f9b674a96297bf6c0eec1a6
b3fcf3e324426dc2b5035df18804e8e8044d4f07
11ea8be87677152e1041ee1437c8cc47f0d96115 
```

您可以`-r`指定要显示的修订集，例如[（](http://www.selenic.com/hg/help/revsets)`-r 100:200`从 #100 到 #200 的变更集）或`-r "ancestors(v1.1)"`（1.1 版中包含的内容）。

请注意，您可以指定其他字段，例如`{desc}`或`{rev}`。另请参阅[Mercurial 书](http://hgbook.red-bean.com/read/customizing-the-output-of-mercurial.html)。

# apache - 防止特定的 css 和 js 文件被缓存 htacesss

> ID：10675739
> 
> 赞同：0
> 
> 时间：2012-05-20T17:48:48.377
> 
> 标签：apache, .htaccess, config

我如何从缓存我的 main.css 和 main.js 文件中使用 htacess。但是我像这样使用多个js文件和css文件

css --- main.css dafault.css new.css

js --- main.js acc.jss new.js

我想要做的是阻止仅缓存 main.css 和 main.js 我该怎么做，但是应该缓存其余的 css 文件以及 js 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:55:18.760

使脚本和 css 引用版本化。在文件扩展名末尾添加日期时间字符串？标记。前任：

```
<script src = "main.js?ver=" + dateTimeNow /> 
```

# java - 玩 2.0 多对多和多对一

> ID：10675742
> 
> 赞同：0
> 
> 时间：2012-05-20T17:49:46.767
> 
> 标签：java, playframework

我尝试保存并显示与 play webframework 2.0 的多对一关系...

我有这些模型：

```
@Entity
public class Project extends Model{

    @Id
    public Long id;

    @Required
    public String name; 

    @ManyToMany
    public List<Worker> workers = 
          new ArrayList<Worker>();

    @ManyToOne
    public Worker head;
...

}

@Entity
public class Worker extends Model{  
    @Id
    public Long id;

    @Required
    public String name;

   ...

    public static Map<String,String> options() {
        LinkedHashMap<String,String> options = new LinkedHashMap<String,String>();
        for(Worker w: Worker.getAll()) {
            options.put(w.id.toString(), w.name);
        }
        return options;
    }       

} 
```

我有这样的看法：

```
@(projects: List[Project], taskForm: Form[Project])

@import helper._

    <h1>@projects.size() Projects(s)</h1>

    <ul>
        @for(project <- projects) {
            <li>
                @project.name
                <b> - head: </b>
                @project.head.name

                <ul>
                @for(worker <- project.workers) {
                    <li>
                        @worker.name
                    </li>
                }
                </ul>

                @form(routes.ProjectController.deleteProject(project.id)) {
                    <input type="submit" value="Delete">
                }

            </li>
        }
    </ul>

    <h2>Add a new task</h2>

    @form(routes.ProjectController.newProject()) {        

        @inputText(taskForm("name"))

        @inputText(taskForm("description"))               

        @select(
            taskForm("head.id"), 
            options(Worker.options), 
            '_label -> "Worker"         
        )       

        <input type="submit" value="Create">

    } 
```

但是当我保存项目时，我的头脑中没有相关的工作人员，也没有找到任何多对多的例子。任何人都可以告诉我如何在 play 2.0 中管理关系或给我一个解释它的链接吗？

感谢所有回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:43:43.020

我使用 getAll 方法获取所有项目并将它们传递给视图...我看到我需要执行“fetch('workers')”才能让工作人员附加到项目...

在控制器中 getAll 后我错过了 fetch 方法......问题解决了......

# android - Android：由于位图，HONEYCOMB 前后堆使用情况？

> ID：10675743
> 
> 赞同：4
> 
> 时间：2012-05-20T17:49:48.093
> 
> 标签：android, memory-management, bitmap, virtual-machine, heap-memory

我正在为 Android 2.2 及更高版本开发图形密集型应用程序。

我知道从 Honeycomb 开始，位图存储在 VM_HEAP 而不是它们的本机位图堆上。

这会影响我的应用程序的有效内存使用吗？我的意思是，例如，如果我的用于预蜂窝设备的应用程序使用 X MB 的 VM 堆，并且有 Y MB 位图（存储在本机堆上），那么我希望它不会开始使用 VM 堆中的 X+Y MB如果它安装在 Honeycomb 或更新的设备上。

这听起来不合逻辑。相反，我猜位图大小甚至在 Honeycomb 之前就已计入 VM 限制，否则为什么会出现“位图大小超出 VM 预算”错误？因此它们存储在其本机堆上，但仍计入 VM_HEAP 大小最大值）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T01:53:23.783

我也很担心，但同时我得到了谷歌的答复，这证实了我的以下假设：

“这听起来不合逻辑。相反，我猜位图大小甚至在 Honeycomb 之前就已计入 VM 限制，否则为什么会出现“位图大小超出 VM 预算”错误？所以它们存储在其本机堆上但仍被计入最大 VM_HEAP 大小）。”

Romain Guy（Android 框架工程师）的回答：

“没错。你的应用程序在 Honeycomb 前后使用相同数量的内存。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:04:18.547

AFAIK 它在蜂窝中发生了变化。位图*现在*存储在您的 dalvik 堆（VM_HEAP）中，而不是像以前版本那样存储在本机堆中。（也许是因为他们不想再依赖 SKia GC）

现在需要更认真地管理位图，因为在 2.2 上运行良好的位图可能会在 3.0 中出现 OOM 异常，因为同一图像在平板电脑上占用更多像素（可能不适用于 4.0，不确定）。

# php - 如何在 2 个不同的 php 页面中包含相同的随机结果？

> ID：10675744
> 
> 赞同：0
> 
> 时间：2012-05-20T17:49:59.857
> 
> 标签：php

```
main.php => include("". rand(1,3) .".php"); 
```

我需要在 main.php 的第二页 main_final.php 中包含相同的结果。

我如何才能`main_final`包含与 main.php 相同的结果？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:53:34.497

你可以使用变量来做到这一点。将结果存储在正确的预定义变量中：http: [//php.net/manual/en/reserved.variables.php](http://php.net/manual/en/reserved.variables.php)

并从两个文件中读取值。例如在`main.php`：

```
$_SESSION["randomvalue"] = rand(1,3); 
```

在第二个文件中：

```
include($_SESSION["randomvalue"] .".php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:04:48.140

```
$_SESSION['page'] = rand(1,3) .".php";
include( $_SESSION['page'] ); 
```

因此您可以在两个页面中使用相同的变量。它可以根据您的服务器处理许多用户。这是最好和最简单的方法。

# javascript - 我可以使用 Facebook Graph API 访问用户的好友状态吗？

> ID：10675745
> 
> 赞同：3
> 
> 时间：2012-05-20T17:50:00.533
> 
> 标签：javascript, facebook, json, facebook-graph-api

我正在制作一个显示经过身份验证的用户的朋友状态的网络应用程序。无论如何我可以使用[Facebook 的图形 API](https://developers.facebook.com/docs/reference/api/)来做到这一点吗？我唯一发现的是`FQL`我不能使用，因为我不允许使用 php。

编辑：我也不需要很多状态。我只需要他们的朋友最新的一个。

编辑：fbID 是 Facebook ID。这是我的代码：

```
<script>
var self;
  (function(d){                                                                             // Load the SDK Asynchronously
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

  window.fbAsyncInit = function() {                                             // Init the SDK upon load
    FB.init({
      appId      : '190843834372497', // App ID
      channelUrl : 'http://people.rit.edu/~cds7226/536/project3/channel.html', // Path to your Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // listen for and handle auth.statusChange events
    FB.Event.subscribe('auth.statusChange', function(response) {
      if (response.authResponse) {                                              // user has auth'd your app and is logged into Facebook
        FB.api('/me', function(me){
          if (me.name) {
            document.getElementById('auth-displayname').innerHTML = me.name;
            //Add rest of code here ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            self=me;
          }
        })
        document.getElementById('auth-loggedout').style.display = 'none';
        document.getElementById('auth-loggedin').style.display = 'block';
      } else {                                                                  // user has not auth'd your app, or is not logged into Facebook
        document.getElementById('auth-loggedout').style.display = 'block';
        document.getElementById('auth-loggedin').style.display = 'none';
      }
    });

    document.getElementById('auth-loginlink').addEventListener('click', function(){ // respond to clicks on the login and logout links
      FB.login(function(response){},{scope: 'friends_status,read_stream'});
    });
  } 
</script> 
```

然后，当您单击该按钮时，此函数将执行。它获取用户的最后一次签到位置，以及包括他们的 Facebook ID 在内的个人信息。

```
function getFriendsCheckin(token)
{
    $.getJSON('https://api.foursquare.com/v2/checkins/recent?oauth_token='+token+'&v='+"20120514",function(results){
    //console.log(results);

    $.each(results['response']['recent'], function(key,value){
        //console.log(key+' : '+value);
        //Friends personal info
        var fullName = value['user']['firstName']+" "+value['user']['lastName'];
        var timeStamp = value['createdAt'];
        var photo = value['user']['photo'];
        var fbID = value['user']['contact']['facebook'];
        //Where they last checked in
        var locName = value['venue']['name'];
        var location = new google.maps.LatLng(value['venue']['location']['lat'],value['venue']['location']['lng']);
        //setMarker(location,fullName+'@'+locName);
        setCustomMarker(location,fullName+'@'+locName,fbID,photo);
    });
}) 
```

}

最后，这就是问题所在。此功能假设在谷歌地图上点击制造商时显示用户的好友最后状态。

```
function setCustomMarker(location,title,fbID,icon)
{
//alert("here");
var marker = new google.maps.Marker({
    position: location,
    draggable: false,
    map: map,
    title: title,
    //icon: icon
    //icon: new google.maps.MarkerImage({url: icon, size: new google.maps.Size({width:10,height:10})})
});

google.maps.event.addListener(marker,'click',function(){
console.log('SELECT status_id,message FROM status WHERE uid='+fbID);
    FB.api(
        {
            method: 'fql.query',
            query: 'SELECT status_id,message FROM status WHERE uid='+fbID
        },
        function(response){
            console.log(response);
        }
    );//*/
}); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:58:25.523

可能你很困惑，但你可以使用`fql`with `javascript sdk`。

例如

```
FB.api(
  {
    method: 'fql.query',
    query: 'SELECT name FROM user WHERE uid=me()'
  },
  function(response) {
    alert('Your name is ' + response[0].name);
  }
); 
```

见[参考](http://developers.facebook.com/docs/reference/javascript/)

如果您使用图形 api，这应该可以工作（未经测试，但您可以检查并更新我）

```
FB.api('/','POST',{
    access_token:'<your_access_token>',
    batch:[
        {
            "method": "GET",  
            "relative_url": "me/friends?limit=5",
            "name": "get-friends"
        },
        {
            "method": "GET",
            "depends_on":"get-friends",
            "relative_url": "{result=get-friends:$.data.*.id}/statuses"
        }
    ]
},function(response){
     console.log(response);

}) 
```

*当然，您需要获得阅读朋友状态更新所需的权限。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:17:58.167

尝试这个：

```
FB.api('user_id/statuses','GET',{
    //friends_status access token
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T00:59:42.400

是的。它可以在[图形 API](https://developers.facebook.com/docs/reference/api/)的帮助下完成。

在参考文档中 - 查看配置文件提要 API 调用。在该示例中，将我替换为您尝试访问其提要的朋友的用户 ID。

但是，要通过应用程序执行此操作，您需要向尝试使用您的应用程序的用户请求 read_stream 和 friends_status 权限。

根据我使用客户端 Facebook js-sdk 处理 OAuth 的经验，这是最简单的事情。

对于托管在 heroku 上的应用程序，它们提供了客户端 OAuth 处理的示例实现，这非常有用。（为了能够在 heroku 上托管您的应用程序 - 在 developers.facebook.com/apps 中创建您的应用程序时，只需确保选择“在 Heroku 上托管项目”选项。

# django - Django：自定义模板标签节点中的“未定义全局名称'xxx'”

> ID：10675748
> 
> 赞同：2
> 
> 时间：2012-05-20T17:51:41.303
> 
> 标签：django, django-templates

我创建了一个自定义模板标签，并希望在我的 template.Node 中有一个辅助方法，但是当我调用辅助方法时出现错误，

```
global name 'prepend_to_some_str' is not defined 
```

这是导致错误的代码。

```
from django import template
from django.template.loader import render_to_string
from easy_maps.models import Address
register = template.Library()

@register.tag
def foo(parser, token):
    params = token.split_contents()
    return FooNode(params[1])

class FooNode(template.Node):
    def __init__(self, some_str):
        self.some_str = template.Variable(some_str)

    def prepend_to_some_str(some_str):
        return "foo" + some_str

    def render(self, context):
        try:
            some_str = self.some_str.resolve(context)

            context.update({
                'full_str': prepend_to_some_str(some_str),
            })
            return render_to_string('foo.html', context_instance=context)
        except template.VariableDoesNotExist:
            return '' 
```

当然，如果我将辅助方法 prepend_to_some_str 移动到全局范围，它就可以正常工作，如下面的代码所示。

```
from django import template
from django.template.loader import render_to_string
from easy_maps.models import Address
register = template.Library()

@register.tag
def foo(parser, token):
    params = token.split_contents()
    return FooNode(params[1])

def prepend_to_some_str(some_str):
    return "foo" + some_str

class FooNode(template.Node):
    def __init__(self, some_str):
        self.some_str = template.Variable(some_str)

    def render(self, context):
        try:
            some_str = self.some_str.resolve(context)

            context.update({
                'full_str': prepend_to_some_str(some_str),
            })
            return render_to_string('foo.html', context_instance=context)
        except template.VariableDoesNotExist:
            return '' 
```

有谁知道为什么 FooNode 在全局范围内寻找 prepend_to_some_str 而不是导致错误的代码中的类范围？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T18:49:56.083

您应该将其定义`self`为第一个参数并调用如下：`self.prepend_to_some_str(some_str)`

# php - jQuery动态网址

> ID：10675757
> 
> 赞同：1
> 
> 时间：2012-05-20T17:52:20.360
> 
> 标签：php, jquery

我有一个表单，提交表单的 url 将动态生成

```
var Var1 = new Array();
var Var2 = new Array();
if(Var1.length === 0)
$(this).attr('action', 'http://localhost/Method' ).submit();
if(Var1.length != 0 && Var2.length === 0)
$(this).attr('action', 'http://localhost/Method/Var1').submit();
if(Var1.length != 0 && Var2.length != 0)
$(this).attr('action', 'http://localhost/Method/Var1/Var2').submit(); 
```

并且所有这些 URL 都会在服务器中触发一种方法，它是

```
public function Method(){}
public function Method(Var1){}
public function Method(Var1 , Var2){} 
```

有没有办法将所有最后 3 种方法作为一种方法？像这样的东西：

```
public function Method(Var1, Var2){
    if(  condition for Var1 ){// doSomthing}
    if(  condition for Var2 ){// doSomthing}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:57:47.573

如果你需要 PHP 的这个函数，你可以使用[`func_get_arg`](http://www.php.net/manual/en/function.func-get-arg.php)and [`func_num_args`](http://www.php.net/manual/en/function.func-num-args.php)：

```
public function Method() {
    $numArguments = func_num_args();

    if ($numArguments >= 1) {
        $argument1 = func_get_arg(0);
        // Do something with argument 1
    }

    if ($numArguments >= 2) {
        $argument2 = func_get_arg(1);
        // Do something with argument 2
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T18:03:40.847

如果所有三个 url 调用服务器中的一个方法，您可以**使用[默认参数](http://www.php.net/manual/en/functions.arguments.php#functions.arguments.default)机制**。

```
public function Method($Var1=null, $Var2=null){
    if(is_null($Var1)){// doSomthing}
    if(is_null($Var2)){// doSomthing}
} 
```

显然，要映射这些 url，您需要使用某种路由器逻辑。并且路由器必须调度对象的正确方法。

例如，如果您的 url 类似于`/index.php/Object/method/param1/param2`，`index.php`则应首先创建正确的对象。

```
$parts = explode('/', $_SERVER['REQEUST_URI']);
array_shift($parts); // emtpy part
array_shift($parts); // index.php
$cls = array_shift($parts) // Object
$obj = new $cls; 
```

然后派发方法。

```
$method = array_shift($parts);
call_user_func_array(array($obj, $method), $parts); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T17:59:48.557

```
public function Method(){
      $root = 'http://localhost/Method/',
      $Var1 = func_get_args(0) || '',
      $Var2 = func_get_args(1) || '';

  if($Var1 && $Var2) $root .= $Var1  + '/' + $Var2;
  else if($Var1 && !$Var2) $root .= '/' + $Var1;
} 
```

# java - 将 keylistener 添加到 CardLayout 中的面板

> ID：10675758
> 
> 赞同：2
> 
> 时间：2012-05-20T17:52:23.090
> 
> 标签：java, swing, cardlayout

我正在编写一个简单的游戏，并且在 CardLayout 中放置了 4 个 JPanel 的主框架。主框架如下所示：

```
private static JPanel[] panele = new JPanel[4];
private static JPanel panel;    
public GameWindow()
{
    super("Sokoban");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());
    panele[0] = new MainMenu();
    panele[1] = new LoadGameMenu();
    panele[2] = new SaveGameMenu();     
    panele[3] = new GameScene();        
    panel = new JPanel(new CardLayout());

    //((MainMenu)panele[0]).setSaveOptionState(false);
    panel.add(panele[0], "MainMenu");
    panel.add(panele[1], "LoadGameMenu");
    panel.add(panele[2], "SaveGameMenu");
    panel.add(panele[3], "GameScene");      
    add(panel, BorderLayout.CENTER);

} 
```

GameScene 面板对键盘输入有反应。首先我尝试了keylistener：

```
public GameScene() {        
    setFocusable(true);
    initWorld(); //Drawing on JPanel takes place here       
    addKeyListener(new Keyboard());         
}
class Keyboard extends KeyAdapter
{
    private int key;
    public void keyPressed(KeyEvent event)
    {
        System.out.println("Tu jestem");
        key = event.getKeyCode();
        if(key == KeyEvent.VK_ESCAPE)
        {
            Game.gra = new GameWindow(MenuAction.MAIN_MENU);
            System.out.println("Escape");
        } 
```

那不起作用......所以我尝试了键绑定（简单实现）：

```
public GameScene() {    

    setFocusable(true);
    initWorld();  //Drawing on JPanel takes place here      
   // requestFocus();
    setInputMap(WHEN_ANCESTOR_OF_FOCUSED_COMPONENT, getInputMap());
    KeyStroke key = KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0);
    getInputMap().put(key, "pressed");      
    getActionMap().put("pressed", new AbstractAction(){         
        public void actionPerformed(ActionEvent arg0) {
            System.out.println("Spacja");
            //Game.gra = new GameWindow(MenuAction.MAIN_MENU);

        }

    });
} 
```

它仍然无法正常工作......我尝试添加 requestFocus 和 requestFocusInWindow() 但没有效果。任何想法如何解决它或做到这一点？

已找到解决方案。在键绑定中，我应该写：

```
getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(key, "pressed"); 
```

安装：

```
getInputMap().put(key, "pressed"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:36:44.617

试试这个：

```
setInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW, getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW)); 
```

编辑：作为[参考](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，“每个 JComponent 都有一个动作映射和三个输入映射。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T19:34:30.867

通过使用`Action`，如图所示[，](https://stackoverflow.com/a/5655843/230513)您可以将一个键（或组合）绑定到它，如此[处](https://stackoverflow.com/a/7457102/230513)`Action`所示。如需更多指导，请编辑您的问题以包含使用其中一个或两个示例的[sscce 。](http://sscce.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T18:52:56.863

我不知道这是否是你**真正**想要的，但如果你想在“GameScene”卡中时简单地对关键事件做出反应，你应该首先切换到这张卡（以抓住焦点）：

```
 CardLayout cl = new CardLayout();
        panel = new JPanel(cl);
        ...
        add(panel, BorderLayout.CENTER);
        cl.show(panel, "GameScene"); 
```

还要查看您的代码 - 考虑使用`JMenu`和/或`JTabbedPane`.

# antivirus - 防病毒：防病毒软件如何检查被病毒感染的文件？

> ID：10675760
> 
> 赞同：-2
> 
> 时间：2012-05-20T17:52:38.230
> 
> 标签：antivirus

我搜索了一个杀毒软件的工作？但无法得到满意的答案.. 除了
1）它通过基于字典的方法，其中任何与数据库中的某些条目匹配的可疑代码都会报告给用户的操作，或者
2）它遵循过程的有害活动，例如。如果文件删除了一些关键文件，则终止它以保证系统的稳定性

**当笔式驱动器插入计算机时，防病毒软件究竟如何检测病毒或被病毒感染的文件？以及防病毒软件在哪一层扫描文件？**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:01:56.333

通常，**防病毒软件会在将文件写入磁盘时对其进行扫描**。

下面是一个比较两种读取电子邮件附件的方法的示例：

1.  如果用户查看电子邮件并单击打开附件，通常会提示保存附件，或者直接打开而不保存附件。这就是有多少用户在他们的机器上感染病毒。如果他们单击打开附件而不保存它，则防病毒软件没有机会扫描文件。
2.  另一方面，如果用户先保存文件，则防病毒软件可以对其进行扫描。

除了文件保存之外，一些安全软件还会执行其他检查。但这基本上是防病毒软件的工作原理。

对于笔式驱动器，防病毒软件可能不会扫描文件（除非用户指示它这样做），因为文件已经保存。但是，某些防病毒软件会对此事件做出反应（连接新设备）并捕获病毒。

# java - 在图中打印路径有什么问题？

> ID：10675762
> 
> 赞同：0
> 
> 时间：2012-05-20T17:53:18.900
> 
> 标签：java, while-loop, do-while

我正在尝试在迷宫中打印解决方案路径。每个单元格都有一个父单元，我们从那里到达该单元格。我正在使用以下代码打印路径。

```
 do{
                System.out.print("The parent of "+index1+","+index2+"=");
                System.out.println(theParents[index1][index2][0]+","+theParents[index1][index2][1]);
                index1=theParents[index1][index2][0];
                index2=theParents[index1][index2][1];
                }while(!(index1==2 && index2==1)); 
```

问题是跳过了一些单元格。我不知道为什么？

7,7=6,7 的父级

6,7=5,7 的父级

5,7=4,7 的父级

4,7=3,7 的父级

3,7=2,7 的父级

2,7=1,7 的父级 // 如您所见，我们现在应该打印 1,7 但它会跳过 1,7 并转到 1,6

1,6=1,5 的父级

1,5=2,5的父级//它跳过2,5直接到2,3

2,4=2,3 的父级

2,3=1,3 的父级

1,2=1,1 的父级

1,1=0,1 的父级

0,0=1,0 的父级

1,0=2,0 的父级

代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:57:12.513

```
index1=theParents[index1][index2][0];
index2=theParents[index1][index2][1]; // the index1 here is already reassigned! 
```

当您在 index2 的分配中使用它时，您已经重新分配了 index1。

你需要类似的东西

```
int newindex1 = theParents[index1][index2][0];
int newindex2 = theParents[index1][index2][1];

index1 = newindex1;
index2 = newindex2; 
```

# h2 - 在 h2 数据库中执行脚本文件

> ID：10675768
> 
> 赞同：70
> 
> 时间：2012-05-20T17:53:57.217
> 
> 标签：h2, sql-scripts

首先，我想说我是 h2 数据库的新手。我需要在 h2 数据库中执行一个 sql 脚本文件。我有一个脚本文件 test.sql，我想在 h2 数据库中执行它。可能吗？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-05-21T04:55:21.050

您可以使用[RUNSCRIPT SQL 语句](http://h2database.com/html/grammar.html#runscript)：

```
RUNSCRIPT FROM 'test.sql' 
```

或者您可以使用[RunScript 独立/命令行工具](http://h2database.com/javadoc/org/h2/tools/RunScript.html)：

```
java -cp h2*.jar org.h2.tools.RunScript -url jdbc:h2:~/test -script test.sql 
```

您还可以在应用程序中使用 RunScript 工具：

```
RunScript.execute(conn, new FileReader("test.sql")); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-03-12T11:48:09.320

如果您在 H2 中使用 spring-boot 和 spring-test，它将自动在您的类路径中查找`schema.sql`并`data.sql`尝试运行它们。因此，如果您将它们放入其中，`src/test/resources`它们应该会被拾取并自动运行

此外，您可以使用属性指定要运行的数据文件。例如，将属性添加到您的`application.properties`喜欢

```
spring.datasource.data=classpath:users.sql, classpath:books.sql, classpath:reviews.sql 
```

将配置spring来运行这三个sql文件而不是运行`data.sql`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-11-21T18:42:21.703

在 OSX（这不应该很重要）上使用 v. 1.4.192 使用以下命令，无论我做什么，我都看不到任何结果：

```
java -cp h2*.jar org.h2.tools.RunScript -url "jdbc:h2:file:~/testdb" -user someusername -password somepass -script select.sql 
```

select.sql 简单的地方：

```
select * from PUBLIC.MYTABLE; 
```

我必须添加`-showResults`之前的输出开始出现。这是完整的命令：

```
java -cp /Users/az/.m2/repository/com/h2database/h2/1.4.192/h2-1.4.192.jar org.h2.tools.RunScript -url "jdbc:h2:file:~/testdb" -user someusername -password somepass -script select.sql -showResults 
```

如果您没有所需的 jar，请从[***此处***](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.h2database%22%20AND%20a%3A%22h2%22)下载（单击`jar`每个版本旁边的链接）。一些 jar 的直接链接如下：

[***1.4.193***](http://search.maven.org/remotecontent?filepath=com/h2database/h2/1.4.193/h2-1.4.193.jar) ^(（2016 年 10 月 31 日更新）)

[***1.4.192***](http://search.maven.org/remotecontent?filepath=com/h2database/h2/1.4.192/h2-1.4.192.jar) ^(（2016 年 5 月 26 日更新）)

[***1.4.191***](http://search.maven.org/remotecontent?filepath=com/h2database/h2/1.4.191/h2-1.4.191.jar) ^(（2016 年 1 月 21 日更新）)

[***1.4.190***](http://search.maven.org/remotecontent?filepath=com/h2database/h2/1.4.190/h2-1.4.190.jar) ^(（2016 年 10 月 11 日更新）)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-22T13:38:45.203

对我来说，系统回应：

> 没有找到 org.h2.tools.RunScript 驱动程序

解决方案是：

```
java -classpath <path_to_your_h2-*.jar> org.h2.tools.RunScript \
-url jdbc:h2:tcp://localhost/~/test -script test.sql 
```

见：[http ://www.h2database.com/html/tutorial.html#using_server](http://www.h2database.com/html/tutorial.html#using_server)

# javascript - 使用 Jama 计算特征值/特征向量？

> ID：10675769
> 
> 赞同：0
> 
> 时间：2012-05-20T17:54:07.140
> 
> 标签：javascript, java, jakarta-ee, jama

我正在开发一个对矩阵执行计算的小型 Java 应用程序。这就是我现在所做的计算方阵的行列式和逆矩阵。但是我想使用Jama类来计算特征值和特征向量，但我不知道如何使用它，有人可以帮我吗？谢谢。

```
import java.util.Scanner;
import Jama.*;

public class matrix {
   public static void main(String[] args) {
      double[][] matrix;
      double det;
      int n;

      Scanner scanner = new Scanner(System.in);

      System.out.println("Dimension of the matrix: ");
      n = scanner.nextInt();

      matrix = new int[n][n];

      // insert values
      for (int i = 0; i < n; i++) {
         for (int j = 0; j < n; j++) {

            System.out.printf("Values: " + i + " - " + j);
            System.out.printf("\n");
            matrix[i][j] = scanner.nextDouble();

         }
      }

      // calculate determinant
      det = dete(matrix, n);
   }

   private static dete(double ai[][], int i) {
      double l = 0;
      if (i == 1)
         l = ai[0][0];
      else if (i == 2) {
         l = ai[0][0] * ai[1][1] - ai[0][1] * ai[1][0];
      } else {
         double ai1[][] = new double[i - 1][i - 1];
         for (int k = 0; k < i; k++) {
            for (int i1 = 1; i1 < i; i1++) {
               int j = 0;
               for (int j1 = 0; j1 < i; j1++)
                  if (j1 != k) {
                     ai1[i1 - 1][j] = ai[i1][j1];
                     j++;
                  }

            }

            if (k % 2 == 0)
               l += ai[0][k] * dete(ai1, i - 1);
            else
               l -= ai[0][k] * dete(ai1, i - 1);
         }

      }
      return l;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:03:46.917

你只需要这样做 -

```
Matrix mat = oldMatrix.eig(); 
```

不要忘记包含 Jama.Matrix.EigenvalueDecomposition。

你可以看看[这里](https://stackoverflow.com/questions/720061/issue-with-jamas-eigenvalue-decomposition-function)

# php - PHP：替换文本区域中的绝对网址

> ID：10675771
> 
> 赞同：0
> 
> 时间：2012-05-20T17:54:13.247
> 
> 标签：php, url

感谢@Mihai Stancu，我得到了一个将相对网址替换为绝对网址的功能。我改进了它，所以它是为 href 和 src 值做的。

我有一个带有一个日历的域，并且我正在将一些事件转移到另一个域，我也使用这些事件。我拥有这两个域，因此创建绝对 URL 没有安全风险。

但是该功能有一个错误 - 它也替换了绝对链接，因此[http://www.example.com/](http://www.example.com/) ... 变为[http://www.example.net/http://www.example.com/](http://www.example.net/http://www.example.com/) ...你能帮我吗？

如果您愿意，请随时改进功能:-)

```
<?php 
$domain = 'http://www.example.net/'; // notice the domain has an end slash
$textarea = 'tester afadf adf <a href="http://www.example.com/folder1/page1.html">do not replace this</a> ... bla bla <a href="/folder2/page2.html">do replace this url</a> bla bla.... <img src="http://www.example.com/somefolder/somepic.jpg" /> <img src="/somefolder/somepic.jpg" />';
$tags = array("href", "src");

foreach ($tags as $tag) { 
    $textarea = preg_replace('/'.$tag.'\s*=\s*(?<'.$tag.'>"[^\\"]*"|\'[^\\\']*\')/e', 'expand_links($tag, $domain, "$1")', $textarea);
}

function expand_links($tag, $domain, $link) {
    return($tag.'="'.$domain.trim($link, '\'"/\\').'"');
}

echo $textarea;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:14:10.677

正则表达式的眼睛仍在流血。

DOMDocument 怎么样？:)

```
$domain = 'http://www.example.net/'; // notice the domain has an end slash
$textarea = 'tester afadf adf <a href="http://www.example.com/folder1/page1.html">do not replace this</a> ... bla bla <a href="/folder2/page2.html">do replace this url</a> bla bla.... <img src="http://www.example.com/somefolder/somepic.jpg" /> <img src="/somefolder/somepic.jpg" />';

// wrap fragment into a full HTML body first (making sure the content type is set properly)
$full_doc = '<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head><body>' . $textarea . '</body></html>';

$d = new DOMDocument;
libxml_use_internal_errors(true); // muffle any errors from libxml
$d->loadHTML($textarea);
libxml_clear_errors(); // clear the errors found

$x = new DOMXPath($d);

// find all tags with either href or src attribute
foreach ($x->query('//*[@href|@src]') as $e) {
    $attr = $e->getAttributeNode('href') ?: $e->getAttributeNode('src');

    if (!preg_match('#^(?:https?://|mailto:)#', $attr->nodeValue)) {
        // not absolute
        $attr->nodeValue = $domain . $attr->nodeValue;
    }
}

echo $d->saveHTML(); 
```

免责声明：这将返回整个 HTML 文档而不是片段；如果你想要一个片段，你可以调用`saveHTML`标签`body`。

# android - 使用 BaseAdapter 过滤自定义列表视图

> ID：10675775
> 
> 赞同：3
> 
> 时间：2012-05-20T17:54:55.540
> 
> 标签：android, android-listview, baseadapter

我正在尝试过滤使用 BaseAdapter 的自定义 Listview 并且到目前为止失败得很惨。我想我需要一双新鲜的眼睛。我已经解决了关于 SO 的各种问题，并且也在 Google 上进行了很多搜索。到目前为止，我尝试过的一切都失败了。

我正在从 Facebook 获取用户好友列表，将结果转换为 Arraylist 并将它们绑定到适配器的 String[] 中。

活动代码：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.friends_list);

        arrayUID = new ArrayList<String>();
        arrayName = new ArrayList<String>();
        arrayPicture = new ArrayList<String>();
        arrayInfo = new ArrayList<String>();

        Bundle extras = getIntent().getExtras();
        apiResponse = extras.getString("API_RESPONSE");
        graph_or_fql = extras.getString("METHOD");

        try {
            JAFriends = new JSONArray(apiResponse);

            for (int i = 0; i < JAFriends.length(); i++) {
                json_data = JAFriends.getJSONObject(i);

//              mainAlbumID = json_data.getString("id");

                if (json_data.has("uid"))   {
                    String getFriendID = json_data.getString("uid");
                    arrayUID.add(getFriendID);
                } else {
                    String getFriendID = null;
                    arrayUID.add(getFriendID);
                }

                if (json_data.has("name"))  {
                    String getFriendName = json_data.getString("name");
                    arrayName.add(getFriendName);
                } else {
                    String getFriendName = null;
                    arrayName.add(getFriendName);
                }

                if (json_data.has("current_location"))  {
                    try {
                        JSONObject location = json_data.getJSONObject("current_location");
                        String friendLocationDetails = location.getString("city") + ", " + location.getString("state");
                        arrayInfo.add(friendLocationDetails);
                    } catch (JSONException e)   {
                        arrayInfo.add("");
                    }
                } else {
                    arrayInfo.add("");
                }

                if (json_data.has("pic_square"))    {
                    String getFriendPhoto = json_data.getString("pic_square");
                    arrayPicture.add(getFriendPhoto);
                } else {
                    String getFriendPhoto = null;
                    arrayPicture.add(getFriendPhoto);
                }
            }
        } catch (JSONException e) {
            return;
        }

        stringUID = new String[arrayUID.size()];
        stringUID = arrayUID.toArray(stringUID);

        stringName = new String[arrayName.size()];
        stringName = arrayName.toArray(stringName);

        stringPicture = new String[arrayPicture.size()];
        stringPicture = arrayPicture.toArray(stringPicture);

        stringInfo = new String[arrayInfo.size()];
        stringInfo = arrayInfo.toArray(stringInfo);

        listofFriends = (ListView)findViewById(R.id.list);
        adapter = new FriendsAdapter(this, stringUID, stringName, stringPicture, stringInfo, arrayName);

        listofFriends.setTextFilterEnabled(true);
        listofFriends.setAdapter(adapter);

        filterText = (EditText) findViewById(R.id.editFilterList);
        filterText.addTextChangedListener(filterTextWatcher);
    }

    private TextWatcher filterTextWatcher = new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            adapter.getFilter().filter(s.toString());
//          adapter.notifyDataSetChanged();
//          listofFriends.setAdapter(adapter);
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    }; 
```

我的适配器类：

```
public class FriendsAdapter extends BaseAdapter implements Filterable {

    Activity activity;
    String[] fetFriendID;
    String[] fetFriendName;
    String[] fetFriendPicture;
    String[] fetFriendInfo;

    List<String> arrayList;
    List<String> mOriginalValues;

    LayoutInflater inflater = null;
    ProfilePictureLoader profileLoader;

    FriendsAdapter(Activity a, String[] stringUID, String[] stringName, 
            String[] stringPicture, String[] stringInfo, ArrayList<String> arrayName) {

        activity = a;
        fetFriendID = stringUID;
        fetFriendName = stringName;
        fetFriendPicture = stringPicture;
        fetFriendInfo = stringInfo;

        arrayList = new ArrayList<String>();
        mOriginalValues = arrayName;

        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        profileLoader = new ProfilePictureLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return mOriginalValues.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        if(convertView == null)
            vi = inflater.inflate(R.layout.friends_item, null);

        ImageView imgProfilePicture = (ImageView)vi.findViewById(R.id.profile_pic);
        TextView txtFriendsName = (TextView)vi.findViewById(R.id.name);
        TextView txtFriendsInfo = (TextView)vi.findViewById(R.id.info);

        // SET THE CUSTOM FONTS
        Typeface nameHeader             = Typeface.createFromAsset(activity.getAssets(), "fonts/museo_slab_700_headers.otf");
        Typeface tfContent              = Typeface.createFromAsset(activity.getAssets(), "fonts/Cabin-Medium-TTF.ttf");
        txtFriendsName.setTypeface(nameHeader);
        txtFriendsInfo.setTypeface(tfContent);

        txtFriendsName.setText(fetFriendName[position]);

        txtFriendsInfo.setText(fetFriendInfo[position]);

        if (fetFriendPicture[position] != null){
            profileLoader.DisplayImage(fetFriendPicture[position], imgProfilePicture);
        }
        else if (fetFriendPicture[position] == null) {
            imgProfilePicture.setVisibility(View.GONE);
        }

        return vi;
    }

    @Override
    public Filter getFilter() {

        Filter filter = new Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                arrayList = (List<String>) results.values;
                notifyDataSetChanged();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {

                FilterResults results = new FilterResults();
                List<String> FilteredArrList = new ArrayList<String>();

                if (constraint == null || constraint.length() == 0) {
                    results.count = mOriginalValues.size();
                    results.values = mOriginalValues;
                } else {
                    constraint = constraint.toString();

                    for (int i = 0; i < mOriginalValues.size(); i++) {
                        String data = mOriginalValues.get(i);
                        if (data.toLowerCase().startsWith(constraint.toString()))   {
                            FilteredArrList.add(data);
                        }
                    }

                    results.count = FilteredArrList.size();
                    results.values = FilteredArrList;
                }

                return results;
            }
        };

        return filter;
    }
} 
```

我知道这是一个很长的问题，其中包含大量代码。因此，如果您花时间阅读整篇文章，谢谢。

我真的希望这里有人可以帮助/指导我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:41:52.077

只需传递`s`给 filter()。

```
adapter.getFilter().filter(s); 
```

还要修正你的`getItem`方法。

```
public Object getItem(int position) {
    return mOriginalValues.get(position);
} 
```

# shell - 从终端读取 pdf 文档属性，如 nautilus 中所示

> ID：10675776
> 
> 赞同：2
> 
> 时间：2012-05-20T17:55:04.557
> 
> 标签：shell, ubuntu, terminal, nautilus

我想从终端访问在右键单击 pdf 文件并选择“文档”时可读的数据。

[示例](https://i.stack.imgur.com/KvflN.png)：![例子](../Images/03f6bcbc42797fade63e7b2c76a4a2b1.png)

我曾尝试使用 mminfo 和 pdftk 等工具读取元数据，但有些文件受密码保护，因此无法向我显示元数据。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:27:10.167

pdfinfo 为我揭示了以下信息：

```
pdfinfo XY.pdf 
Title:          XY Zufriedenheitsbefragung XY: 2012/5
Producer:       Apache FOP Version SVN branches/fop-0_95
CreationDate:   Fri May 18 13:38:45 2012
Tagged:         no
Pages:          8
Encrypted:      no
Page size:      595 x 842 pts (A4)
File size:      33666 bytes
Optimized:      no
PDF version:    1.4 
```

但我不知道它如何处理加密的 PDF。但是如果 nautilus 可以读取它们 - 为什么不应该使用命令行工具？

当我查找 pdfinfo 时，我得到 2 个替代答案：

```
apt-cache search pdfinfo
poppler-utils - PDF-Werkzeuge (basierend auf libpoppler)
xpdf-utils - Portable Document Format (PDF) suite -- utilities 
```

# javascript - 数组中的第一个视频总是第一个或第二个在下一个视频功能上播放

> ID：10675784
> 
> 赞同：1
> 
> 时间：2012-05-20T17:57:11.693
> 
> 标签：javascript, jquery, arrays, html, video

我设置了一个视频数组，以及一组六个拇指，每个拇指对应于数组中的一个视频来播放它，然后是一个调用下一​​个要播放的函数。然而，它不是在结束时播放下一个视频，而是播放数组中的第一个视频，然后遍历列表。

我有[jsfiddle](http://jsfiddle.net/nata2ha/kTuEy/8/)，所以你可以明白我的意思。
然后我怎样才能让它在到达结尾时停止循环。（我确信这很简单，但我患有严重的睡眠不足和最后期限）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:32:18.483

看起来你总是将 0 传递给你的`playArray`回调。

这个小提琴有效，但它将索引存储在您可能试图避免的更高范围内：http: [//jsfiddle.net/RichardTowers/WFT3U/1/](http://jsfiddle.net/RichardTowers/WFT3U/1/)

到达终点时停止循环的一种简单方法，只是不要调用`load`和`play`：http: [//jsfiddle.net/RichardTowers/WFT3U/2/](http://jsfiddle.net/RichardTowers/WFT3U/2/)。

# wix - 在没有蜡烛/灯光的情况下动态创建 WIX MSI

> ID：10675788
> 
> 赞同：1
> 
> 时间：2012-05-20T17:57:47.800
> 
> 标签：wix, windows-installer, wix3.5

如果我想动态创建一个 MSI 安装程序，有没有办法在不包括蜡烛.exe 和 light.exe 等 wix sdk 应用程序的情况下做到这一点？如果我的应用程序是用 C# 编写的，我可以引用 Microsoft.Deployment.WindowsInstaller.Package.dll 或其他一些 wix dll，并创建一个新的 MSI 文件吗？

我基本上想使用控制台应用程序动态创建一个 msi 文件，而不必引用 wix 控制台应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:37:56.737

> 如果我的应用程序是用 C# 编写的，我可以引用 Microsoft.Deployment.WindowsInstaller.Package.dll 或其他一些 wix dll，并创建一个新的 MSI 文件吗？

是的。这些 Microsoft.Deployment.* DLL 被称为“部署工具基础”，它们记录在wix 安装的**doc**文件夹中的**dtf.chm**和**dtfapi.chm**文件中。

 **从头开始创建一个新的 MSI 将像这样开始：

```
string path = "path/to/myinstaller.msi";
using (var db = new Database(path, DatabaseOpenMode.Create))
{
    // lots of SQL queries to put stuff in the database here
} 
```

或者，您可以复制现有的模板 MSI 文件，然后使用 SQL 查询对其进行修改。

您还需要打包二进制文件并将它们添加到数据库中。您可以通过打开`InstallPackage`班级的 msi 来做到这一点。

在任何情况下，以这种方式创建安装程序都需要详细了解[Windows 安装程序数据库表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368259%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:21:00.433

您可以做到：您可以直接使用 WiX API（受 WiX 规定的许可条款约束）以及[Windows Installer API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372860%28v=vs.85%29.aspx)。**

# ios - reloadData 不适用于 UITableView 数据源？

> ID：10675792
> 
> 赞同：0
> 
> 时间：2012-05-20T17:58:09.523
> 
> 标签：ios, uitableview, sorting, nsdictionary

目前我有一个 NSMutableArray，它从我的应用程序中的 NSUserDefaults 加载并将数据提供给我的 UITableView。NSMutableArray 由 NSDictionary 组成，每个包含 5 或 6 个键。

然后在 UITableView 所在的视图中，我有一个 UISegmentedControl，用户可以在其中根据 Date 或其他一些东西对 UITableView 进行排序。

因此，当他们单击日期段时，我执行以下代码：

```
NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"Date" ascending:NO];
[self.cellArray sortUsingDescriptors:[NSArray arrayWithObject:descriptor]]; 
```

排序本身起作用，因为我可以看到 self.cellArray 正在通过 NSLogs 进行排序。虽然当我调用我的 tableview 来重新加载数据时，没有一个 NSDictionarys 实际上在 tableview 本身中重新排序。因此以编程方式对它们进行排序，但不是在非常奇怪的 UI 中。

如果在我上面发布的代码之后使用这个 for 语句：

```
for (NSDictionary *dict in self.cellArray) {
            NSLog(@"DateKey: %@", [dict objectForKey:@"Date"]);
} 
```

如果我进行升序，这就是我的 NSLogs 的样子：YES：

```
2012-05-20 13:48:21.008 App[71308:707] DateKey: 2012-05-13 18:19:22 +0000
2012-05-20 13:48:21.009 App[71308:707] DateKey: 2012-05-13 18:19:29 +0000
2012-05-20 13:48:21.009 App[71308:707] DateKey: 2012-05-15 01:54:13 +0000
2012-05-20 13:48:21.010 App[71308:707] DateKey: 2012-05-15 04:01:15 +0000
2012-05-20 13:48:21.011 App[71308:707] DateKey: 2012-05-16 04:08:20 +0000
2012-05-20 13:48:21.012 App[71308:707] DateKey: 2012-05-16 04:13:59 +0000
2012-05-20 13:48:21.012 App[71308:707] DateKey: 2012-05-16 04:32:29 +0000
2012-05-20 13:48:21.013 App[71308:707] DateKey: 2012-05-16 04:32:38 +0000 
```

如果我升序：不，这就是我的 NSLogs 的样子：

```
2012-05-20 13:56:25.956 App[71468:707] DateKey: 2012-05-16 04:32:38 +0000
2012-05-20 13:56:25.960 App[71468:707] DateKey: 2012-05-16 04:32:29 +0000
2012-05-20 13:56:25.961 App[71468:707] DateKey: 2012-05-16 04:13:59 +0000
2012-05-20 13:56:25.961 App[71468:707] DateKey: 2012-05-16 04:08:20 +0000
2012-05-20 13:56:25.962 App[71468:707] DateKey: 2012-05-15 04:01:15 +0000
2012-05-20 13:56:25.962 App[71468:707] DateKey: 2012-05-15 01:54:13 +0000
2012-05-20 13:56:25.963 App[71468:707] DateKey: 2012-05-13 18:19:29 +0000
2012-05-20 13:56:25.964 App[71468:707] DateKey: 2012-05-13 18:19:22 +0000 
```

如您所见，排序确实可以正常工作，但是一旦我在该代码之后执行 reloadData，我的 UITableView 就不会根据 Date 键对单元格重新排序。

我的 tableview 实际上是在 IB 中连接的，并且不是 nil。如果这很重要，我确实有一个 setter 和 getter。

有谁知道为什么会这样？还是您需要更多上下文/代码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:16:42.820

我倾向于将您的日志记录声明...

```
for (NSDictionary *dict in self.cellArray)
    NSLog(@"DateKey: %@", [dict objectForKey:@"Date"]); 
```

`sortUsingDescriptors`在，就在你在你的方法中调用之后`cellForRowAtIndexPath`。我还会在 cellArray 正在初始化的地方放置一个 NSLog 语句（以确保您不会再次意外调用它......如果您的例程变得复杂，这很容易做到）。

我必须相信输入的顺序`cellForRowAtIndexPath`不会反映您排序后立即获得的顺序。假设是这种情况，要么 cellArray 在某处被重置（即你在哪里填充它？在 viewDidLoad 或其他地方？），或者你的 sortUsingDescriptors 没有像你想象的那样被调用。

只需开始在您的各种例程中放置断点和/或调试消息。它必须是一些简单的东西。我只是在我重新加载时重新加载的地方进行了重新加载测试，并且排序顺序被保留。所以它必须是一些简单的东西。

# iphone - Xcode：在滚动视图中缩放图像

> ID：10675794
> 
> 赞同：1
> 
> 时间：2012-05-20T17:58:16.133
> 
> 标签：iphone, ios, uiscrollview, zooming, pinch

我对此进行了很多研究，但对我没有任何帮助。这是我的问题：

我希望我的名为 bildfraga 的图像可以缩放。它被放置在称为滚动的滚动视图中。我可以滚动图片，但不能缩放它。

这是显示图像时的代码：

```
 bildfraga = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"dtk2.png"]];
scroll.contentSize = bildfraga.frame.size;
[scroll addSubview:bildfraga];
scroll.minimumZoomScale = 0.4;
scroll.maximumZoomScale = 4.0;
[scroll setZoomScale:scroll.minimumZoomScale];

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scroll{
return bildfraga;
 } 
```

但是当我尝试构建它时，我收到一条错误消息，例如：“使用未声明的标识符'viewForZoomingInScrollView'”。

提前致谢！

/一个菜鸟

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:02:02.533

您应该声明您的类将采用协议**UIScrollViewDelegate**，将滚动设置为委托并将该`viewForZoomingInScrollView`方法实现为单独的方法。

这里是您需要查看的文档的[链接](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/ZoomZoom/ZoomZoom.html)，以了解要在滚动视图上实现的缩放功能

# c# - C# BackgroundWorker_DoWork 只做部分工作

> ID：10675800
> 
> 赞同：-2
> 
> 时间：2012-05-20T17:58:38.150
> 
> 标签：c#, .net, backgroundworker

这个让我难住了。我有一个简单的实用程序来帮助企业安装软件。一个组件备份用户当前在其机器上拥有的 AppData 文件并将它们保存到桌面上的文件夹中：

```
private void backupButton_Click(object sender, EventArgs e)
{
    backgroundBackup.RunWorkerAsync();
}

private void backgroundBackup_DoWork(object sender, DoWorkEventArgs e)
{
    ...
}

private static void CopyAll(DirectoryInfo source, DirectoryInfo target)
{
    ...
}

// I removed the message boxes from DoWork, and added a RunWorkerCompleted event, 
// but neither the confirmation nor the error messgae box from RunWorkerCompleted are shown.

private void backgroundBackup_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    ...
} 
```

这有效，但不会产生预期的结果。我将此操作放在后台线程上，因为每个用户备份的总文件大小可能接近一两个 GB。每次运行时，目标中的一些（但不是全部）文件和文件夹都会复制到目标，并且复制的文件夹每次都不同。有时只复制少数文件和文件夹，有时几乎所有内容都被复制，但绝不是整个目标。如果这个操作放在一个简单的控制台应用程序中，它每次都有效。关于导致它无法完成 DoWork 方法中的所有工作的 BackgroundWorker 类，我有什么需要了解的吗？

编辑：

我想我可能过于复杂了 BackgroundWorker 类的问题。我与一位同事交谈，他们提出了一种创建新线程来处理可能冗长的过程的简单方法：

```
 private void backupButton_Click(object sender, EventArgs e)
    {
        Thread backupThread = new Thread(backupThreadJob);
        backupThread.Start();      
    }

    private void backupThreadJob()
    {
        try
        {
            //copy files and stuff
        }

        catch(Exception ex)
        {
            MessageBox.Show("Error: " + ex.Message);
        }
    } 
```

这为我完成了工作；我尝试使用 BackgroundWorker 没有成功，并且永远无法弄清楚为什么只复制了一些文件。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T18:03:24.943

这不是一个完整的答案。但我可以想象以下与该问题有关：

请记住，在另一个非 UI 线程上`BackgroundWorker`执行您的方法，因此在此处调用不是一个好主意。如果你在 UI（“前台”）线程上运行，你应该只做 UI 的东西：`DoWork``MessageBox.Show`

> *您必须小心不要在 DoWork 事件处理程序中操作任何用户界面对象。相反，通过 ProgressChanged 和 RunWorkerCompleted 事件与用户界面进行通信。* —该[课程](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)[的 MSDN 参考页面`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

我可以想象，如果您的方法中某处发生异常，并且您想在块中显示一个消息框，则`catch`此调用会触发另一个异常，该异常没有得到处理......因此您的方法过早中止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:25:18.280

这是一个示例，显示您可以从后台线程调用消息框。MessageBox.Show 是一个静态方法调用，可以从后台线程调用。你永远不应该尝试访问你的 UI 层上的任何东西（包括绑定的支持对象——在这里想想 WPF）。

这是一个用于消息框的示例。

我想复制 10 个文件并在后台启动复制过程。发生错误（文件存在等）并且您想提示用户覆盖 - 您可以显示一个请求用户确认的消息框。

```
private void button1_Click(object sender, EventArgs e)
{
    BackgroundWorker bw = new BackgroundWorker();
    bw.RunWorkerCompleted += BwOnRunWorkerCompleted;
    bw.DoWork += BwOnDoWork;
    bw.RunWorkerAsync();
}

private void BwOnDoWork(object sender, DoWorkEventArgs doWorkEventArgs)
{
    MessageBox.Show("This is a message from a background thread");
}

private void BwOnRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs runWorkerCompletedEventArgs)
{
    MessageBox.Show("Your done");
} 
```

# javascript - d3.js 带有对数缩放的堆积条形图

> ID：10675802
> 
> 赞同：3
> 
> 时间：2012-05-20T17:59:38.223
> 
> 标签：javascript, d3.js

[我正在使用 d3.js 创建类似于http://mbostock.github.com/d3/ex/stack.html](http://mbostock.github.com/d3/ex/stack.html)的堆叠条形图，其中包含一些附加功能。我能够添加标签和网格，但我是在实现对数刻度时遇到一些问题。我在用

```
d3.scale.log().domain([minNum,maxNum]).range([height,0]) 
```

但我不知道如何使用堆叠图来实现它，代码如下：

```
var vis = d3.select("#chart")
.append("svg")
.attr("width", width)
.attr("height", height + margin);

var layers = vis.selectAll("g.layer")
.data(data)
 .enter().append("g")
.style("fill", function(d, i) { return color(i / (n - 1)); })
.attr("class", "layer");

var bars = layers.selectAll("g.bar")
.data(function(d) { return d; })
.enter().append("g")
.attr("class", "bar")
.attr("transform", function(d) { return "translate(" + x(d) + ",0)"; });

bars.append("rect")
.attr("width", x({x: .9}))
.attr("x", 0)
.attr("y", y1)
.attr("height", function(d) { return y0(d) - y1(d); }); 
```

我知道它处理： .attr("height", function(d) { return y0(d) - y1(d); });

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-08-09T11:02:35.030

我遇到了这个超级老线程，[这里有](https://www.graphpad.com/support/faq/graph-tip-dont-use-a-log-scale-on-a-bar-graph/)关于为什么对数刻度几乎对堆叠条没有意义的信息，并且很少用于常规条形图或面积图（即具有底部形状的图表）

[![在此处输入图像描述](../Images/6c401274edb7f8ba359460a20b22c252.png)](https://i.stack.imgur.com/KmpCQ.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T01:48:01.040

我认为从具有对数刻度的基本（非堆叠）条形图开始会对您有所帮助 -

您需要为比例表示命名，例如：

```
var myscale = d3.scale.log().domain([minNum,maxNum]).range([height,0]); 
```

然后稍后使用此比例更改为屏幕空间，例如：

```
.attr("height", function(d) {return myscale(d);}) 
```

这是一个基本示例供您查看：http: [//jsfiddle.net/jsl6906/qAHC2/10/](http://jsfiddle.net/jsl6906/qAHC2/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T07:20:02.493

简短指南。

1.  用于`stack`原始数据集。
2.  使用 D3`scale`的特殊设置创建具有对数值的第二个数据集。
3.  `stack`再次用于结果集。

```
// Original linear data
var linData = [
    [
        { x: 0, y:     0.1 },
        { x: 1, y:     1.0 },
        { x: 2, y:   100.0 },
        { x: 3, y: 10000.0 }
    ],
    [
        { x: 0, y:     0.2 },
        { x: 1, y:     2.0 },
        { x: 2, y:   200.0 },
        { x: 3, y: 20000.0 }
    ],
    [
        { x: 0, y:     0.3 },
        { x: 1, y:     3.0 },
        { x: 2, y:   300.0 },
        { x: 3, y: 30000.0 }
    ]
];

// Calculating y0 for linear data
var stack = d3.layout.stack();
stack(linData);

// Setting conversion values from linear to logarithmic without scaling
var yScaleLog = d3.scale.log()
        .domain([0.01,
            d3.max(linData, function(d) {
                return d3.max(d, function(d) {
                    return d.y0 + d.y;
                });
            })
        ])
        .range([0,
            d3.max(linData, function(d) {
                return d3.max(d, function(d) {
                    return d.y0 + d.y;
                });
            })
        ]);

// Creating new set of data with logarithmized values
var logData = [];
for (var i = 0; i < linData.length; i++) {
    logData[i] = [];
    for (var j = 0; j < linData[i].length; j++) {
        logData[i][j] = {
            x: linData[i][j].x,
            y: yScaleLog(linData[i][j].y)
        };
    }
}

// Calculating y0 for logarithmic data
stack(logData); 
```

**完整代码：http: [//jsfiddle.net/romanshamin/5vF6a/2/](http://jsfiddle.net/romanshamin/5vF6a/2/)**

# sql - Hibernate 查询是否容易受到 SQL 注入的影响

> ID：10675804
> 
> 赞同：1
> 
> 时间：2012-05-20T17:59:49.483
> 
> 标签：sql, hibernate, sql-injection

我知道 Hibernate 使用准备好的语句。但是当我使用`session.createSQLQuery()`.

在这种情况下，无论我是在查询中附加值还是使用 setParameter()，我的查询是否可以避免 SQL 注入？

问候，

萨提亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:16:01.153

使用时是安全的，`session.createSQLQuery().setParameter()`因为 hibernate 使用的参数是安全的，如 JB Nizet 和 couling 所说

# ruby - 在 Rails 中使用自定义标记

> ID：10675805
> 
> 赞同：1
> 
> 时间：2012-05-20T18:00:05.123
> 
> 标签：ruby, ruby-on-rails-3, tags

我花了很多时间在这个上，现在我被卡住了。我目前正在尝试在我的应用程序中设置标记系统。我相信我所有的联想都是正确的，但是我的观点有问题。这些标签是使用它们自己的形式创建的。我想要做的是当用户创建一个新项目时，他们将能够从他们从标签表单创建的标签列表中进行选择。

这是我的模型：

```
class Item < ActiveRecord::Base
  attr_accessible :title, :media, :tag_ids
  belongs_to :user
  has_many :taggings, :dependent => :destroy
  has_many :tags, :through => :taggings
end

class Tag < ActiveRecord::Base
  attr_accessible :name
  belongs_to :user
  has_many :taggings, :dependent => :destroy  
  has_many :items, :through => :taggings
end 
```

以下是我知道有缺陷的观点。物品形式：

```
<%= form_for @item, :html => { :multipart => true } do |f| %>
  <div class="field">
    <%= f.file_field :media %>

    <%= f.text_field :title, placeholder: "Add title..." %>

    <% @tags.each do |tag| %>
        <div>
            <%= check_box_tag "item[tag_ids][]", tag.id, @item.tags.include?(tag) %>
            <%= tag.name %>
        </div>
    <% end %>
</div> 
```

显示项目视图：

```
<li>
  <span class="title"><%= item.title %></span>
  <%= image_tag item.media.url(:small) %>
  <span>
    <% @item.tags.each do |tag| %>
      <% tag.name %>
    <% end %>
  </span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(item.created_at) %> ago.
  </span>
  <%= link_to "delete", item, method:  :delete, confirm: "You sure?", title:   item.title %>
</li> 
```

正在创建标签，并且项目和标签都已正确附加到我的标签数据库中。但是，我需要两件事的帮助：

1.  如何更改 check_box_tag 以仅显示当前用户创建的标签（我正在使用设计）？
2.  为什么项目视图中没有标签显示？

我也是 Rails 的新手，想学习如何在没有插件的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:17:17.303

### 1.你可以改变`@tags`你的控制器。

你可能是这样设置的

`@tags = Tag.all`

将其更改为

`@tags = current_user.tags`

在这里，我假设您的 Devise 模型称为*User*。您可能还需要采取一些预防措施，因为您现在只为经过身份验证的用户显示标签。

### 2.你必须替换`<% tag.name %>`为`<%= tag.name %>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:15:21.080

我终于弄明白了。我发布的 show-item 代码实际上是部分代码。在引用部分的视图中，我正在使用`<% render @item %>`. 所以在我的标签循环中，它应该是

```
<span>
  <% item.tags.each do |tag| %>
    ... 
```

不是`@item.tags.each |tag| %>`

# java - java.lang.OutOfMemoryError：Java 堆空间，我怎样才能释放内存？

> ID：10675806
> 
> 赞同：2
> 
> 时间：2012-05-20T18:00:20.497
> 
> 标签：java, out-of-memory, heap-memory

这是错误

```
Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: Java heap space
at com.sun.media.sound.JavaSoundAudioClip.readStream(JavaSoundAudioClip.java:328)
at com.sun.media.sound.JavaSoundAudioClip.loadAudioData(JavaSoundAudioClip.java:307)
at com.sun.media.sound.JavaSoundAudioClip.<init>(JavaSoundAudioClip.java:93)
at sun.applet.AppletAudioClip.createAppletAudioClip(AppletAudioClip.java:108)
at sun.applet.AppletAudioClip.<init>(AppletAudioClip.java:49)
at java.applet.Applet.newAudioClip(Applet.java:279)
at tetris.TetrisAudioPlayer.<init>(TetrisAudioPlayer.java:31)
at tetris.GamePanel.<init>(GamePanel.java:181)
at tetris.TetrisPanelsController.actionPerformed(TetrisPanelsController.java:155)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:272)
at java.awt.Component.processMouseEvent(Component.java:6375)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6140)
at java.awt.Container.processEvent(Container.java:2083)
at java.awt.Component.dispatchEventImpl(Component.java:4737)
at java.awt.Container.dispatchEventImpl(Container.java:2141)
at java.awt.Component.dispatchEvent(Component.java:4565)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
at java.awt.Container.dispatchEventImpl(Container.java:2127)
at java.awt.Window.dispatchEventImpl(Window.java:2482)
at java.awt.Component.dispatchEvent(Component.java:4565)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:684)
at java.awt.EventQueue.access$000(EventQueue.java:85)
at java.awt.EventQueue$1.run(EventQueue.java:643)
at java.awt.EventQueue$1.run(EventQueue.java:641) 
```

问题描述：在同一帧中，我在 JPanel 之间切换，其中一个有 Audioclip，如果我在这个 JPanel 和另一个 JPanel 之间来回切换，就会出现此错误。我想在退出时使用 Audioclip 从 JPanel 中释放内存，但似乎将 null 分配给它不起作用，知道吗？PS AudioClip 类扩展了 JApplet，也许是问题的原因？

这里要求的是“泄漏”的代码部分：这是 AudioClip

```
import java.applet.*;
import javax.swing.*;
import java.net.*;

public class TetrisAudioPlayer extends JApplet {

private AudioClip song; // Sound player

private URL songPath; // Sound path

private boolean playing;

public TetrisAudioPlayer(String filename) {

    try {

        //songPath = new URL(getCodeBase(),filename); // Get the Sound URL

        songPath= this.getClass().getResource(filename);

        song = Applet.newAudioClip(songPath); // Load the Sound
    }

    catch(Exception e){} // Satisfy the catch

}

public void playSound() {
    song.loop(); // Play
    playing=true;
}

public void stopSound() {
    song.stop(); // Stop
    playing=false;
}

public void playSoundOnce() {
    song.play(); // Play only once
    playing=true;
}

public boolean playing(){
    return playing;
}
} 
```

这就是我更改 JPanel 的方式，gamePanel 是包含 AudioClip 的 JPanel，错误仅发生在 AudioClip 上，没有它，这段代码没有问题。

```
 tetrisFrame.getContentPane().removeAll();
        tetrisFrame.getContentPane().invalidate();

        gamePanel=null;

        mainMenuPanel= new MainMenuPanel(this);
        tetrisFrame.getContentPane().add(mainMenuPanel);
        tetrisFrame.getContentPane().validate();
        tetrisFrame.getContentPane().repaint(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:06:06.497

您是否尝试过将 JVM 参数设置为
1.`-Xms`作为堆的初始大小
2.`-Xmx`这设置了堆的最大大小

根据您的 RAM 增加堆值

**例子：**

```
-Xms512m 
-Xmx1024m

Java -Xmx1024m ...... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T18:07:12.390

您可能需要分配更多内存。将对象分配给 null 只是将其标记为由 gc 清除。

看看这个[链接](https://stackoverflow.com/questions/3841723/exception-in-thread-awt-eventqueue-0-java-lang-outofmemoryerror-java-heap-spa)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T10:04:29.423

在 onDestroy() 或 onPause() 中调用下面的方法

```
Runtime.getRuntime().runFinalization();
Runtime.getRuntime().gc();
System.gc(); 
```

但是java内部调用 System.gc() 方法这不是释放内存的正确方法，但是使用上面的代码内存很清楚

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T22:53:40.073

java释放内存的方法：

```
public void freememory(){
    Runtime basurero = Runtime.getRuntime(); 
    basurero.gc();
} 
```

调用两次以获得更好的结果。

# android - 在android中循环图像帧

> ID：10675807
> 
> 赞同：2
> 
> 时间：2012-05-20T18:00:26.270
> 
> 标签：android, image, animation, loops, wave

我想做一个动画，一个从右到左移动的波浪。我做了一个波浪的图像，它的开始与结束重合

![在此处输入图像描述](../Images/1703d534f51ae67fe77ebd973aad3dd2.png)

我想做一个波浪移动的动画，`animationlist`我需要超过 400 帧，并且应用程序的大小会变大......

我需要一种方法来将这个唯一的框架从右到左移动，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:26:03.870

您可以创建`Drawable`自己的实现`Animatable`，并让图像从右向左移动。拥有它实际上是一件非常有用的事情。但是，您将无法从 XML 中指定它，您必须构建它并以编程方式对其进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:30:56.530

首先，您必须将图像 src 的大小加倍，有 2 个波而不是一个。接下来，您必须使用图像视图的框架边界，您必须*只*适合一个波。这就是线索。

在记下您的图像大小，尤其是宽度之后。

对于动画，使用这个：

```
<?xml version="1.0" encoding="utf-8"?>
<translate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="0%"
    android:toXDelta="-50%"
    android:fromYDelta="0%"
    android:toYDelta="0%"
    android:duration="500"
    android:repeatCount="1000"
    android:interpolator="@android:anim/linear_interpolator"
    android:zAdjustment="top" /> 
```

例如，您可以将其命名为 res/anim/wave.xml

班级活动？）：

```
 ...
    Animation anim = AnimationUtils.loadAnimation( this, R.anim.wave);
    anim.setRepeatMode(Animation.Infinite);
    animatedIm = (ImageView) findviewbyid(<your-id>)
    animatedIm.setAnimation(anim); 
```

您可能需要使用 imageview 大小，才能有连续的波浪移动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:56:41.963

你甚至可以创建一个 gif 并播放这个 GIF：下面是代码：

类 MainActivity：

```
import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(new MYGIFView(MainActivity.this));
    }

} 
```

MYGIFView 类：

```
import java.io.InputStream;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Movie;
import android.view.View;

class MYGIFView extends View {

    Movie movie, movie1;
    InputStream is = null, is1 = null;
    long moviestart;

    public MYGIFView(Context context) {
        super(context);

        // Provide your own gif animation file

        is = context.getResources().openRawResource(R.drawable.animation);
        movie = Movie.decodeStream(is);

    }

    @Override
    protected void onDraw(Canvas canvas) {

        canvas.drawColor(Color.WHITE);
        super.onDraw(canvas);
        long now = android.os.SystemClock.uptimeMillis();
        System.out.println("now=" + now);
        if (moviestart == 0) { // first time
            moviestart = now;

        }
        System.out.println("\tmoviestart=" + moviestart);
        int relTime = (int) ((now - moviestart) % movie.duration());
        System.out.println("time=" + relTime + "\treltime=" + movie.duration());
        movie.setTime(relTime);
        movie.draw(canvas, this.getWidth() / 2 - 20, this.getHeight() / 2 - 40);
        this.invalidate();
    }
} 
```

可绘制文件夹内将是您的 GIF 图像。

# arrays - Powershell：从 get-wmiobject win32_product 中过滤不需要的值

> ID：10675809
> 
> 赞同：1
> 
> 时间：2012-05-20T18:00:52.403
> 
> 标签：arrays, powershell

我正在尝试将机器上已安装应用程序的列表放入列表框中，到目前为止我有这个：

```
function programsinstalled_current
{
$prog = get-wmiobject win32_product -computer summer -Property Name | select Name
foreach($program in $prog)
{
[Void]$program_list_current.items.add($program)
}
} 
```

它在列表框中返回：

![在此处输入图像描述](../Images/fc2c786b7b3b6d07735cb68398970892.png)

我的问题是如何摆脱每个程序名称开头的不需要的“@{name=”和每个名称末尾的“}”？

我已经尝试使用以下代码将机器的 AD 组放入 Listbox，它工作正常，但相同的语法不起作用`get-wmiobject win32_product`：

```
function fill_current_list
{
$processnames_t = (Get-ADComputer -Identity $current_hostname.text -Property MemberOf).MemberOf 
foreach ($processname in $processnames_t)
{
[void]$AD_list_current.Items.Add($processname)
} 
```

如果可能，我宁愿不使用`-replace`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:13:19.807

尝试：

```
[Void]$program_list_current.items.add($program.name) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:01:06.480

您还可以添加所有产品名称而不循环它们：

```
$prog = gwmi win32_product -computer summer -Property Name | select -expand Name
$program_list_current.items.AddRange($prog) 
```

# python - 为什么我不能在 Python 中访问超类的私有变量？

> ID：10675810
> 
> 赞同：5
> 
> 时间：2012-05-20T18:01:11.730
> 
> 标签：python, python-3.x, subclass, private-members

我知道我*应该*使用访问方法。我在`datetime`模块中看到该类`datetime`继承自日期。

```
class datetime(date):
    <some other code here....>
    self = date.__new__(cls, year, month, day)
    self._hour = hour
    self._minute = minute
    self._second = second
    self._microsecond = microsecond
    self._tzinfo = tzinfo
    return self 
```

我还看到 datetime 能够访问 date 的成员，如`__repr__`：

```
def __repr__(self):
    """Convert to formal string, for repr()."""
    L = [self._year, self._month, self._day, # These are never zero
         self._hour, self._minute, self._second, self._microsecond] 
```

我尝试子类化 datetime 以向其中添加一些信息，然后编写一个类似的`__repr__`函数：

```
def __repr__(self):
    """Convert to formal string, for repr()."""
    L = [self._year, self._month, self._day, # These are never zero
         self._hour, self._minute, self._second, self._microsecond,
         self._latitude, self._longitude] 
```

调试器抱怨 self._year 不存在。（`self.year`但是有效。）

我知道我*应该*使用访问功能。我只是想了解为什么`datetime`能够访问私有变量`date`但我的子类不能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T18:19:20.430

如果您查看[结尾`datetime.py`](http://hg.python.org/cpython/file/1bee3da9a305/Lib/datetime.py#l2094)，您会看到：

```
try:
    from _datetime import *
except ImportError:
    pass 
```

这将导入先前定义的 python 类的 C 版本，因此将使用这些类，并且那些没有您要访问的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:38:56.750

> 我尝试子类化 datetime 以向其中添加一些信息

不要那样做。日期时间和纬度/经度信息的组合在逻辑上不是日期时间的子类型。它是两位数据的组合。

因此，创建一个类，该类具有存储日期时间的属性和存储纬度/经度信息的属性（您可能会考虑使用 2 个数字的元组而不是具有两个单独的值）。

# c++ - 用 boost:geometry 翻转多边形

> ID：10675811
> 
> 赞同：1
> 
> 时间：2012-05-20T18:01:19.227
> 
> 标签：c++, boost, computational-geometry, boost-geometry

水平翻转多边形以使其[边界框](http://www.boost.org/doc/libs/1_49_0/libs/geometry/doc/html/geometry/reference/algorithms/envelope/envelope.html)保持不变的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:05:41.820

您可以使用 boost::geometry::for_each_point，提供一个计算翻转坐标的函子（例如使用在使用 boost::geometry::envelope 之前计算的 x 坐标成员变量）。

或者您可以使用矩阵转换器使用 boost::geometry::transform

无论哪种方式都应该有效，没有推荐的方式

# c - 在 ANSI C 中将 Int 值序列化为 char* 缓冲区

> ID：10675813
> 
> 赞同：0
> 
> 时间：2012-05-20T18:01:27.040
> 
> 标签：c, pointers, serialization, segmentation-fault, memcpy

我试图将结构字段（int）序列化为 char* 缓冲区，但我认为我做错了。

这就是我用来复制此字段的内容。

`memcpy(payload + offset, &packet->payload.offset, sizeof(long int));`

packet->payload.offset 是一个 long int 并且包含值“5”（硬编码），请注意：

如果我打印：`printf("offset: %ld \n", packet->payload.offset);` 我得到：`offset: 5`

但是如果我打印: `printf("offset: %ld \n",&packet->payload.offset)`，我会得到：`offset: 167120959`

如果在 memcopy 中我删除了第二个参数的 '&' 以将 '5' 写入缓冲区，则会导致分段错误，但如果我不这样做，它会将 167120959（我认为它是地址）复制到缓冲区而不是实际值。

非常感谢您的帮助！我试图尽可能地描述，希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:03:39.623

> 但是如果我打印: `printf("offset: %ld \n",&packet->payload.offset)`，我会得到：`offset: 167120959`

那是因为您打印的是地址，而不是值。您的“序列化”方法是可以的（除了字节顺序），因为`memcpy`需要地址。

> 我删除了第二个参数的 '&' 以将 '5' 写入缓冲区 [...] 但如果我不这样做，它会将 167120959 （我假设它是地址）复制到缓冲区而不是实际值.

错误的。**它从该地址**复制`sizeof(long int)`字节。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:07:23.830

```
But if I print: printf("offset: %ld \n",&packet->payload.offset), I get: offset: 167120959 
```

错了，它打印的是地址`packet->payload.offset`而不是`packet->payload.offset`它自己。

Memcpy 必须提供变量的地址，否则它不能修改它（在 C 中没有传递 byref 参数）。因此，您传递`memcpy()`了变量的地址，但`printf()`只需要读取它，因此您可以（并且应该）直接传递变量。**

# android - Android - 圆角矩形内的圆角矩形

> ID：10675818
> 
> 赞同：4
> 
> 时间：2012-05-20T18:02:04.490
> 
> 标签：android, rounded-corners, shapedrawable

我目前正在设计一个登录页面，但在使用圆角矩形时遇到了问题。我当前的布局看起来有点像这样：

![在此处输入图像描述](../Images/c7ca25ea8e81eb6db766604e1905389b.png)

它是一个圆角矩形，包含一个较小的圆角矩形。

如您所见，两个矩形的右边缘似乎合并了。但是，我想在两个矩形的边界之间保持恒定的距离，以获得更清晰的外观。有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:02:49.367

`EditText`你可能想在 XML 中尝试一下`layout_marginRight`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:15:59.907

如果您的外部矩形是`outerRect`并且已经包含坐标，那么您可以设置内部矩形的边界相对于`outerRect`的边界。

```
Rect innnerRect = new Rect(outerRect.left+5, outerRect.top+5, 
                           outerRect.right-5, outerRect.bottom-5); 
```

## 更新：

您还可以将图像设为 9-patch drawable。将内部矩形区域的中间定义为可拉伸的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T18:24:31.970

为了做到这一点，矩形需要在每个角上具有相同的半径。

如果外部矩形的角有 10dp 的半径，则内部矩形也应该有 10dp 的半径。

**编辑：**

您还需要在内部矩形的顶部、底部和右侧具有相同的填充/边距。检查您的边距和填充，以便它们加起来相同的值。

# android - 禁用或修改整个手机物理按键的功能

> ID：10675819
> 
> 赞同：3
> 
> 时间：2012-05-20T18:02:09.160
> 
> 标签：android

我想禁用或修改手机物理按键的功能，我知道可能需要root。我发现了许多其他关于如何仅在一个应用程序中执行此操作的 SO 问题，但我想在按下物理按钮时在整个手机中执行此操作。这可能吗？也许通过使用广播接收器或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T23:04:00.510

> 这可能吗？

并不真地。如果您的设备有 CAMERA 按钮，并且前台活动不消耗 CAMERA 按钮单击，则将导致 ACTION_CAMERA_BUTTON 广播。如果您的应用程序包含主屏幕，则当用户选择您的主屏幕作为其默认主屏幕时，该屏幕可以在用户按下 HOME 按钮时获得控制。

除此之外，除了修改操作系统和构建自己的固件之外，没有其他可能。

# data-binding - 带变量的 knockout.js 动态字段绑定

> ID：10675822
> 
> 赞同：1
> 
> 时间：2012-05-20T18:02:58.723
> 
> 标签：data-binding, knockout.js, computed-observable

有没有办法动态替换 ko.computed 中正在写入和读取的字段？例如，使用此函数，我想将 self.JobStartDate 替换为可以传入的变量字段名：

```
function Job(data) {
    var self = this;
    ko.mapping.fromJS(data, {}, this); 

    var computedDateFn = {
        read: function() {
            return formatDate(ko.utils.unwrapObservable(self.JobStartDate), true);
        },

        write: function(value) {
            var jsonDate = "/Date(" + Date.parse(value).getTime();
            self.JobStartDate(jsonDate);
        }
    }

    this.formattedStartDate = ko.computed(computedDateFn);
    this.formattedEndDate = ko.computed(computedDateFn); // this guy would need the field it writes to/reads from to be self.JobEndDate
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:00:02.290

如果您将 computedDateFn 设为接受您的字段名作为字符串并返回定义您计算的 observable 的对象的函数，您可以使用这样的数组表示法......

[http://jsfiddle.net/bczengel/tMTCV/](http://jsfiddle.net/bczengel/tMTCV/)

# php - 许多 MySQL 查询与一个大查询？

> ID：10675833
> 
> 赞同：1
> 
> 时间：2012-05-20T18:04:10.050
> 
> 标签：php, mysql

> **可能重复：**
> [返回一个大查询还是几个较小的查询更好？](https://stackoverflow.com/questions/3910317/is-it-better-to-return-one-big-query-or-a-few-smaller-ones)
> [一个大查询与许多小查询？](https://stackoverflow.com/questions/9855820/one-big-query-vs-many-small-ones)

我有一个包含很多链接表的数据库。

像这样的东西（为了方便而简化）：

```
USERS
|user_id|username|location_id|

EVENTS
|event_id|location_id|description|

BANDS
|band_id|band_name|description|

LOCATIONS
|location_id|location_name|

USERS_EVENTS
|user_id|event_id|

BANDS_EVENTS
|user_id|event_id|

USERS_BANDS
|user_id|band_id|

USERS_LOCATIONS
|user_id|location_id|

EVENTS_LOCATIONS
|event_id|location_id| 
```

当用户登录时，他们会被带到他们的仪表板，其中显示他们正在参加的活动（从`users_events`表格中）和他们所在位置的活动（使用 events_locations 表格）以及他们喜欢的乐队的活动。

考虑到用户可能没有参加任何活动，并且活动可能不会不时出现在他们的位置，那么我检索这些数据的最佳（阅读：最有效）方式是什么？

（一旦查询被执行，它会被缓存 15 分钟，因为用户可能会多次返回他们的仪表板，如果他们“参加”一个事件，缓存文件会得到更新，但他们所在位置的事件将每 15 分钟更新一次。 )

我目前正在做这样的事情（虽然我使用 CodeIgniter 的数据库类，所以查询不像这里写的那样不安全）：

```
$query = mysql_query("
  SELECT *
  FROM users 
  WHERE username = {$username}
  LIMIT 1");
$result = array('events_attending' => array(), 'events_in_area' => array(), 'events_by_bands' => array());

if (mysql_num_rows($query) > 0) {

    while ($row = mysql_fetch_assoc($query)) {
        $query_2 = mysql_query("
          SELECT events.event_id, locations.location_name, events.description
          FROM users_events, events, locations
          WHERE users_events.user_id = {$row['user_id']}
          AND events.event_id = users_events.event_id
          AND locations.location_id = events.location_id
          LIMIT 5");

        $i = 0;
        while ($row_2 = mysql_fetch_assoc($query_2)){
           $query_3 = mysql_query("
             SELECT bands.band_name
             FROM bands_events, bands
             WHERE bands_events.event_id = {$row_2['event_id']}
             AND bands.band_id = bands_events.event_id
           ");
            $result['events_attending'][$i] = $row_2;

            while ($row_3 = mysql_fetch_assoc($query_3)){
                $result['events_attending'][$i]['bands'][] = $row_3['band_name'];
            }
            $i++;         
        }

        $query_4 = mysql_query("
          SELECT events.description, locations.location_name
          FROM events, locations
          WHERE events.location_id = {$row['location_id']}
          AND locations.location_id = {$row['location_id']}
          LIMIT 5");

        $i = 0;
        while ($row_4 = mysql_fetch_assoc($query_4)){
           $query_5 = mysql_query("
             SELECT bands.band_name
             FROM bands_events, bands
             WHERE bands_events.event_id = {$row_4['event_id']}
             AND bands.band_id = bands_events.event_id");
            $result['events_in_area'][$i] = $row_4;

            while ($row_5 = mysql_fetch_assoc($query_5)){
                $result['events_in_area'][$i]['bands'][] = $row_2['band_name'];
            }
            $i++;         
        }

        $query_6 = mysql_query("
          SELECT bands.band_id, bands.band_name
          FROM users_bands, bands
          WHERE users_bands.user_id = {$row['user_id']}
          AND bands.band_id = users_bands.band_id");

        while ($row_6 = mysql_fetch_assoc($query_6)) {
            $query_7 = mysql_query("
              SELECT events.event_id, locations.location_name, events.description
              FROM bands_events, events, locations
              WHERE bands_events.band_id = {$row_6['band_id']}
              AND events.event_id = bands_events.event_id
              AND locations.location_id = events.location_id
              LIMIT 5");
            $i = 0;
            while ($row_7 = mysql_fetch_assoc($query_7)){
                $result['events_by_bands'][$row_6['band_name']][$i] = $row_7;
                $i++;
            }
        } 
    }
    // save return data as json object in cache file,
    // return json object
} else {
    // error handling - user not in database
} 
```

这是一个小例子，对于不同的事物，还有其他具有类似设置的表，总共有 24 个表用于生成用户仪表板。

用大量的 JOIN 查询来做这件事会更好吗？另外，如果我要这样做，查询的正确语法是什么？）

# c#-4.0 - 为什么我必须给它一个名字？

> ID：10675835
> 
> 赞同：2
> 
> 时间：2012-05-20T18:04:26.243
> 
> 标签：c#-4.0, delegates

我正在尝试在 Unity 中进行一些游戏编程，因此我不得不选择 C# 或 Javascript 或 (Boo)。我选择 C# 是因为至少有不错的 IDE，而且实际上它比 Javascript 和面向对象快一点。无论如何，我宣布代表：

```
private delegate Object Instantiate_(Object ,Vector3 ,Quaternion ); 
```

我收到编译器错误，告诉我我应该命名这些参数。有什么合乎逻辑的理由吗？我没有在任何地方使用它们，也没有提到它们，那么命名它们有什么意义呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:08:58.303

参数名称是必需的，以便您可以使用显式指定参数名称的调用语法：

```
public delegate object MakePersonDelegate(string firstName, string lastName, DateTime dateOfBirth);

MakePersonDelegate myDelegate = ...;
myDelegate(lastName: "Smith", firstName: "John", dateOfBirth: new DateTime(1985, 1, 1)); 
```

注意这段代码是如何切换名字和姓氏的；但是，委托*将按*正确的顺序获取它们：`"John"`将传递给委托的第一个形式参数，`"Smith"`并将传递给第二个参数。

# mysql - MYSQL WHERE 条件取决于 SELECT 列

> ID：10675836
> 
> 赞同：1
> 
> 时间：2012-05-20T18:04:37.383
> 
> 标签：mysql, select, where, conditional-statements

是否可以参考您在 WHERE 条件中选择的列？

我什至不知道如何在没有过多冗长的情况下提出这个问题，所以我将尝试将您指向“rated_user = @2User”部分并注意@2User 是我正在选择的。

```
SELECT id, user, minimum 
INTO @1ID, @1User, @minimum 
FROM table1 
WHERE a_or_b = 'a' AND item = itemName 
ORDER BY number DESC LIMIT 1;

SELECT id, user 
INTO @2ID, @2User 
FROM table1 
WHERE a_or_b = 'b' AND item = itemName 
    AND (SELECT IFNULL(AVG(rating),0) AS Rating 
            FROM table2 
            WHERE rated_user = @2User AND completed = 'y'
        ) >= @minimum_seller_rating 
ORDER BY number ASC LIMIT 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:07:27.897

您也应该能够在子查询中使用父表中的原始列名。

```
WHERE rated_user = user 
```

如果存在名称冲突，您可能需要在其前面加上表名或别名。

```
WHERE rated_user = table1.user 
```

# java - 读取 Cell Java POI 空错误

> ID：10675840
> 
> 赞同：0
> 
> 时间：2012-05-20T18:04:51.617
> 
> 标签：java, apache-poi

我试图在电子表格中找到一个带有文本*“期间销售报告”*的单元格，该单元格有更多文本但是*“期间销售报告”*是其中永远不会改变的部分，可以让我找到每个电子表格上的那个特定单元格。

当我尝试读取该单元格的值时，我得到一个空值。

这是该类的代码：

```
package excelreader;

import javax.swing.JOptionPane;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.ss.usermodel.Cell;

/**
 *
 * @author LuisLaptop
 */
public class FileInfo {

    // attributes

    private String date;
    private String fileName;
    private String reportCreator;
    private String sheetName;

    // constructor

    public FileInfo(HSSFSheet sheet) {

    }

    // Methods

    public String getSalesPeriod(HSSFSheet sheet) {

        String period = "Sales report for the period";

        HSSFRow row = sheet.getRow(2);
        HSSFCell cell = row.getCell(0);

        if(cell.getCellType() == Cell.CELL_TYPE_STRING)
        {
            if(cell.getStringCellValue().toString().trim().equals(period))
            {
                date = cell.getStringCellValue().toString().trim();
                return date;
            }

        }
        else
        {
            JOptionPane.showMessageDialog(null, "The report has no period", "Period Error", JOptionPane.ERROR_MESSAGE);
        }

        return date;            
    }

    // Getters and setters 

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public String getFileName() {
        return fileName;
    }

    public void setFileName(String fileName) {
        this.fileName = fileName;
    }

    public String getReportCreator() {
        return reportCreator;
    }

    public void setReportCreator(String reportCreator) {
        this.reportCreator = reportCreator;
    }

    public String getSheetName() {
        return sheetName;
    }

    public void setSheetName(String sheetName) {
        this.sheetName = sheetName;
    }

} 
```

这是主要的：

```
package excelreader;

import java.io.FileInputStream;
import java.io.IOException;
import javax.swing.JOptionPane;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;

/**
 * @author lv10
 */
public class ExcelReader {
    public static void main(String[] args) throws IOException {

        FileManager fm = new FileManager();
        FileInputStream inputFile = new FileInputStream(fm.fileChooser.getSelectedFile());

        HSSFWorkbook wb = new HSSFWorkbook(inputFile);
        HSSFSheet sheet = wb.getSheetAt(0);

        Total t = new Total(sheet);
        FileInfo fi = new FileInfo(sheet);

        String report = "This is a test report"+ t.getTotal() + " from " + fi.getSalesPeriod(sheet) ;

        JOptionPane.showMessageDialog(null, report, "test", JOptionPane.INFORMATION_MESSAGE);

    }
} 
```

这是提供其他值的总类。有了这个类，我没有问题，但我添加了它以提供一些上下文：

```
package excelreader;

import java.text.DecimalFormat;
import javax.swing.JOptionPane;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;

/**
 * @author lv10
 */
class Total {

    // -------------------------------------------------------------- Attributes

    String cellContent[] = {"Total US", "Total DE (EUR)", "Total IT (EUR)"};
    private int rownr = 0;
    private int colnr = 0;
    private double total = 0;
    private double sum = 0;

    // ------------------------------------------------------------- Constructor

    public Total(HSSFSheet sheet)
    {
        for( int i=0; i<cellContent.length; i++)
        {
            total = findTotal(sheet, cellContent[i]);
            sum+= total;

        }
    }

    // ----------------------------------------------------------------- Methods 

    public double findTotal(HSSFSheet sheet, String cellContent){

            for(Row rows : sheet){
            for(Cell cell: rows){

                if(cell.getCellType()== Cell.CELL_TYPE_STRING){
                    if(cell.getStringCellValue().toString().trim().equals(cellContent)){
                        rownr = rows.getRowNum();

                        HSSFRow row = sheet.getRow(rownr);
                        colnr = row.getLastCellNum()-1;
                        cell = row.getCell(colnr);

                        return cell.getNumericCellValue();  
                    }
                }
            } // end of cell loop
        } // end of row loop

         return 0;

        }

    // getters and setters

    public double getSum() {
        return sum;
    }

    public void setSum(double sum) {
        this.sum = sum;
    }

    public double getTotal() {
        return total;
    }

    public void setTotal(double total) {
        this.total = total;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:35:58.133

这个：

```
cell.getStringCellValue().toString().trim().equals(period) 
```

如果单元格内容等于`period`，即完全正确，则返回 true `"Sales report for the period"`。

但是，正如您自己所说，那是“永远不变的*部分”；*这不是*全部*内容。

尝试改用该`indexOf`方法，它将返回该子字符串的位置，或者`-1`如果它不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T16:06:08.350

我使用 contains() 解决了这个问题

```
if(cell.getStringCellValue().toString().trim().contains(period)) 
{ 
     date = cell.getStringCellValue().toString().trim(); return date; 
} 
```

# list - Haskell 中的列表生成

> ID：10675842
> 
> 赞同：0
> 
> 时间：2012-05-20T18:05:20.683
> 
> 标签：list, haskell

我需要生成一个数字列表，其中包含从这样的数字开始的`500`数字`div 23 x == 7`（其中`x`是数字）`51`。我不知道如何完成我的程序，所以如果有人可以帮助我，我会很高兴。程序不能接受参数，我的意思是例如`required xs`不允许。

```
required
   = do
      putStr "Required list is: "
      print [c x m n | c <- what goes here?, x <- [1 ..], div 23 x == 7, n <= 500 && m >= 51] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:29:20.953

你可以使用这个：

```
let theList = take 500 [x | x <- [51..], div 23 x == 7]
print theList 
```

这似乎是一个非常简单的问题，所以我可能没有正确理解您的描述。

此外，只有一个数字`div 23 x == 7`，即 3 （因为`23 / 3 ~= 7`在整数算术中）。因此，您的列表将不包含 500 个元素，并且程序将冻结尝试查找列表中的元素。

（我提供了该问题的完整解决方案，因为提问者可能遇到了他未能描述的不同问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:07:08.770

`take 500 (drop 50 [x | x <- [1..], div 23 x == 7])`：首先生成您想要的数字列表，删除前 50 个（这样您最终得到第 51 个这样的数字），然后取出其中的 500 个。

正如 dflemstr 所说，只有一个数字使得 div 23 x == 7，所以我认为您可能的意思是`mod x 23 == 7`，即除以 23 时留下 7 的数字。在这种特殊情况下，更好的解决方案是`map (\x -> 23 * x + 7) [50 .. 549]`，但这是错误的-易于; 我第一次尝试时出错了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:33:39.660

在这种情况下（包括我自己），通常首选使用**列表理解**作为 dflemstr 的答案生成列表。我假设您是 Haskell 的新手，所以我想详细说明您如何获取列表。结果应该是一样的。

注意：我的代码将无法放入 ghci 提示符，您需要创建 hs 文件并使用**:l** from ghci进行编译或加载

```
-- raw is [51, 52, 53, ... to infinity]
lst_raw = [51..]

-- you want only element that make this predicate True so just filter that do not out
lst_flt = filter (\x -> div 23 x == 7) raw

-- above list is infinite, want only first 500 element
mylist = take 500 lst_flt 
```

或者您可以组合多行以摆脱不使用的中间绑定

```
mylist = take 500 $ filter (\x -> div 23 x == 7) [51..] 
```

**也只是对div 23 x**部分感到好奇，因为**div 23 x**与**div x 23**是不同的，看起来 div 23 x 永远不会得到任何值 == 7

```
> take 100 $ map (\x -> x `div` 23) [1..]
[0,0,0,0,0 ... 4,4,4,4]

> take 100 $ map (\x -> 23 `div` x) [1..]
[23,11,7,5,4,3,3 .... 0,0,0,0] 
```

# msbuild - 错误 MSB4014：构建因内部故障而中止

> ID：10675844
> 
> 赞同：0
> 
> 时间：2012-05-20T18:05:28.733
> 
> 标签：msbuild, xamarin.android

我安装了 Monodroid，创建了一个新项目并点击构建（使用 Sharpdevelop），然后我得到了错误。这是一个Win7 64位系统，也安装了VS 2008 Pro - 附上正常日志：

```
Bereinige: test (Debug)

Build started 20.05.2012 20:04:44.
__________________________________________________
Build succeeded.
     0 Warning(s)
     0 Error(s)

Time Elapsed 00:00:00.0220013

test (Debug) wird erzeugt

Build started 20.05.2012 20:04:44.
__________________________________________________
Project "c:\temp\test\test\test.csproj" (Build target(s)):

    Target _GenerateAndroidAssetsDir:
    Skipping target "_GenerateAndroidAssetsDir" because it has no outputs.

    Target _ComputeAndroidResourcePaths:
        Creating directory "obj\Debug\res\".

    Target _GenerateAndroidResourceDir:
        Creating directory "c:\temp\test\test\obj\Debug\res\layout".
        Copying file from "Resources\layout\Main.axml" to "c:\temp\test\test\obj\Debug\res\layout\main.axml".
        Creating directory "c:\temp\test\test\obj\Debug\res\values".
        Copying file from "Resources\values\Strings.xml" to "c:\temp\test\test\obj\Debug\res\values\strings.xml".
        Creating directory "c:\temp\test\test\obj\Debug\res\drawable".
        Copying file from "Resources\drawable\Icon.png" to "c:\temp\test\test\obj\Debug\res\drawable\icon.png".

    Target _ResolveMonoAndroidSdks:
        MonoAndroid Tools: C:\Program Files (x86)\MSBuild\Novell\
        MonoAndroid Framework: C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v4.0.3\;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\
        MonoAndroid Binaries: C:\Program Files (x86)\MSBuild\Novell\
        Android SDK: C:\Program Files (x86)\android-sdk-windows\
        Java SDK: C:\Program Files (x86)\Java\jdk1.6.0_22\

    Target _ValidateAndroidPackageProperties:
        GetAndroidPackageName Task
          ManifestFile: 
          AssemblyName: test
          PackageName: test.test

    Target _ExtractLibraryProjectImports:
          Assemblies: 
            C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v4.0.3\Mono.Android.dll
            C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.Core.dll
            C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.dll
            C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.Xml.dll

    Target _UpdateAndroidResgen:
    Skipping target "_UpdateAndroidResgen" because all output files are up-to-date with respect to the input files.

    Target CoreCompile:
    Skipping target "CoreCompile" because all output files are up-to-date with respect to the input files.

    Target CopyFilesToOutputDirectory:
        test -> c:\temp\test\test\bin\Debug\test.dll
Done building project "c:\temp\test\test\test.csproj".-- FAILED

c:\temp\test\test\test.csproj: error MSB4014: The build was aborted because of an internal failure.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.Build.BuildEngine.Expander.ExpandPropertiesLeaveTypedAndEscaped(String expression, XmlNode expressionNode)
   at Microsoft.Build.BuildEngine.Expander.ExpandAllIntoStringLeaveEscaped(String expression, XmlNode expressionNode)
   at Microsoft.Build.BuildEngine.Target.Build(ProjectBuildState buildContext)
   at Microsoft.Build.BuildEngine.Project.ExecuteNextActionForProjectContext(ProjectBuildState buildContext, Boolean initialCall)
   at Microsoft.Build.BuildEngine.Project.CalculateNextActionForProjectContext(ProjectBuildState buildContext)
   at Microsoft.Build.BuildEngine.Project.ContinueBuild(ProjectBuildState buildContext, TaskExecutionContext taskExecutionContext)
   at Microsoft.Build.BuildEngine.Project.BuildInternal(BuildRequest buildRequest)
   at Microsoft.Build.BuildEngine.Engine.BuildProjectInternalInitial(BuildRequest buildRequest, Project project)
   at Microsoft.Build.BuildEngine.Engine.BuildProjectInternal(BuildRequest buildRequest, ProjectBuildState buildContext, TaskExecutionContext taskExecutionContext, Boolean initialCall)
   at Microsoft.Build.BuildEngine.Engine.EngineBuildLoop(BuildRequest terminatingBuildRequest)
   at Microsoft.Build.BuildEngine.Engine.PostProjectEvaluationRequests(Project project, String[] projectFiles, String[][] targetNames, BuildPropertyGroup[] globalPropertiesPerProject, IDictionary[] targetOutputsPerProject, BuildSettings buildFlags, String[] toolVersions)

--------------------- Fertig ---------------------

Erzeugung erfolgreich.
Erstellen fehlgeschlagen. MSBuild operation failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:07:42.737

我解决了这个问题，谢谢

[http://connect.microsoft.com/VisualStudio/feedback/details/665199/nullreferenceexception-in-msbuild](http://connect.microsoft.com/VisualStudio/feedback/details/665199/nullreferenceexception-in-msbuild)

我不得不删除（卸载）“代码合同（devlabs_TS）1.4.40314.1 for .NET”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:39:34.517

用于编译的 MsBuild 版本是什么？尝试使用更高版本。

# javascript - 在 Google Fusion 中合并 2 个查询

> ID：10675845
> 
> 赞同：1
> 
> 时间：2012-05-20T18:05:36.637
> 
> 标签：javascript, google-maps, google-fusion-tables

我是查询新手，我想更改下面的代码以查询“日期”列、“人口”和“教育”的数据。在我的代码的延续中，我有 3 个复选框来过滤掉与日期有关的数据，以及选择器来选择我想要表示的颜色编码和数据。当前代码的实时示例：http: [//4vec.com/test/2.html](http://4vec.com/test/2.html)

所以在一个完美的场景中，当我取消选择所有复选框时，什么都不会出现，而当我选择 2006 时，只会出现具有 2006 的多边形。

```
 function initialize() {
    var map = new google.maps.Map(document.getElementById('map-canvas'), {
      center: new google.maps.LatLng(30.64804,31.5023868333333),
      zoom: 5,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var layer = new google.maps.FusionTablesLayer({
      query: {
        select: 'geo',
        from: '1c-imTqDv8SfoEG_dkw41TjpquihqELzTIrs9F88'
            }
    });
    layer.setMap(map);

    initSelectmenu();
    for (column in COLUMN_STYLES) {
      break;
    }
    applyStyle(map, layer, column);
    addLegend(map);

    google.maps.event.addDomListener(document.getElementById('selector'),
        'change', function() {
          var selectedColumn = this.value;
          applyStyle(map, layer, selectedColumn);
          updateLegend(selectedColumn);
    });
    google.maps.event.addDomListener(document.getElementById('2006'),
        'click', function() {
          filterMap(layer, tableId, map);
    });

    google.maps.event.addDomListener(document.getElementById('2007'),
        'click', function() {
          filterMap(layer, tableId, map);
    });

    google.maps.event.addDomListener(document.getElementById('2008'),
        'click', function() {
          filterMap(layer, tableId, map);
    });
  }
  // Filter the map based on checkbox selection.
  function filterMap(layer, tableId, map) {
    var where = generateWhere();

    if (where) {
      if (!layer.getMap()) {
        layer.setMap(map);
      }
      layer.setOptions({
        query: {
          select: 'geo',
          from: tableId,
          where: where
        }
      });
    } else {
      layer.setMap(null);
    }
  }

  // Generate a where clause from the checkboxes. If no boxes
  // are checked, return an empty string.
  function generateWhere() {
    var filter = [];
    var stores = document.getElementsByName('store');
    for (var i = 0, store; store = stores[i]; i++) {
      if (store.checked) {
        var storeName = store.value.replace(/'/g, '\\\'');
        filter.push("'" + storeName + "'");
      }
    }
    var where = '';
    if (filter.length) {
      where = "'Date' IN (" + filter.join(',') + ')';
    }
    return where;
  }

  google.maps.event.addDomListener(window, 'load', initialize);

  // Initialize the drop-down menu
  function initSelectmenu() {
    var selectMenu = document.getElementById('selector');
    for (column in COLUMN_STYLES) {
      var option = document.createElement('option');
      option.setAttribute('value', column);
      option.innerHTML = column;
      selectMenu.appendChild(option);
    }
  }

  // Apply the style to the layer & generate corresponding legend
  function applyStyle(map, layer, column) {
    var columnStyle = COLUMN_STYLES[column];
    var styles = [];

    for (var i in columnStyle) {
      var style = columnStyle[i];
      styles.push({
        where: generateWhere(column, style.min, style.max),
        polygonOptions: {
          fillColor: style.color,
          fillOpacity: style.opacity ? style.opacity : 0.8
        }
      });
    }

    layer.set('styles', styles);
  }

  // Create the where clause
  function generateWhere(columnName, low, high) {
    var whereClause = [];
    whereClause.push("'");
    whereClause.push(columnName);
    whereClause.push("' >= ");
    whereClause.push(low);
    whereClause.push(" AND '");
    whereClause.push(columnName);
    whereClause.push("' < ");
    whereClause.push(high);
    return whereClause.join('');
  }

  // Initialize the legend
  function addLegend(map) {
    var legendWrapper = document.createElement('div');
    legendWrapper.id = 'legendWrapper';
    legendWrapper.index = 1;
    map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(
        legendWrapper);
    legendContent(legendWrapper, column);
  }

  // Update the legend content
  function updateLegend(column) {
    var legendWrapper = document.getElementById('legendWrapper');
    var legend = document.getElementById('legend');
    legendWrapper.removeChild(legend);
    legendContent(legendWrapper, column);
  }

  // Generate the content for the legend
  function legendContent(legendWrapper, column) {
    var legend = document.createElement('div');
    legend.id = 'legend';

    var title = document.createElement('p');
    title.innerHTML = column;
    legend.appendChild(title);

    var columnStyle = COLUMN_STYLES[column];
    for (var i in columnStyle) {
      var style = columnStyle[i];

      var legendItem = document.createElement('div');

      var color = document.createElement('span');
      color.setAttribute('class', 'color');
      color.style.backgroundColor = style.color;
      legendItem.appendChild(color);

      var minMax = document.createElement('span');
      minMax.innerHTML = style.min + ' - ' + style.max;
      legendItem.appendChild(minMax);

      legend.appendChild(legendItem);
    }

    legendWrapper.appendChild(legend);
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:21:18.380

您的代码中有几个小问题：

*   您将变量`tableId`用于点击事件，但从未设置它
*   有两个函数调用`generateWhere()`，我将第二个更改为`generateStyleConditon()`
*   最后我建议让图层一直在地图上，只要确保未选中复选框时不会检索到任何记录。

更新后的`filterMap()`函数`generateWhere()`如下所示：

```
// Filter the map based on checkbox selection.
function filterMap(layer, tableId, map) {
    var where = generateWhere();
    layer.setOptions({
        query: {
            select: 'geo',
            from: tableId,
            where: where
        },
        map: map
    });
}

// Generate a where clause from the checkboxes. If no boxes
// are checked, return an empty string.
function generateWhere() {
    var yearFilter = [];
    var years = document.getElementsByName('years');
    for (var i = 0, year; year = years[i]; i++) {
        if (year.checked) {
            yearFilter.push("'" + year.value + "'");
        }
    }
    //if where clause is not set, make sure no value is selected
    var where = '';
    var yearStr = yearFilter.join(',');
    if (!yearStr) {
        yearStr = "''";
    }
    where = "'Date' IN (" + yearStr + ")";
    return where;
} 
```

我将更新的代码放在 jsFiddle 上：http: [//jsfiddle.net/odi86/sGMSq/](http://jsfiddle.net/odi86/sGMSq/)

如果您想使用更多列进行过滤，只需在`generateWhere()`函数中添加这些列。

# ruby-on-rails - Rails 3.0.10 和 Heroku 的 Paypal IPN 503 错误

> ID：10675847
> 
> 赞同：1
> 
> 时间：2012-05-20T18:05:56.377
> 
> 标签：ruby-on-rails, heroku, paypal, paypal-ipn

我正在尝试将 Paypal IPN 通知集成到部署到 Heroku（bamboo-mri-1.9.2）的 Rails 3.0.10 应用程序中。这不是我第一次将 IPN 集成到 Rails 应用程序中，但我遇到了一个让我发疯的问题，此时我一无所知。

我在 config/routes.rb 中为 IPN 定义了一个特殊的路由：

`match "/paypal_ipn" => "registrations#paypal_ipn", :as => :paypal_ipn`

我在RegistrationController中有相应的动作：

```
class RegistrationsController < ApplicationController
  include ActiveMerchant::Billing::Integrations
  ...
  def paypal_ipn
    // Notification management stuff...
  end
end 
```

问题是，一旦应用程序部署到 Heroku，我就无法向该 URL 发送 IPN 通知，因为服务器总是以 503 错误响应 IPN 模拟器。奇怪的是，我可以使用 CURL 或任何浏览器成功地向该 URL 发送任何 POST 或 GET 请求。

我什至`paypal_ipn`用 a 替换了方法的内容，`raise "It exploded!"`没有任何异常出现在日志中，并跳过了所有之前我见过的过滤器，结果相同。

我在heroku日志上看到的只有这个，但这对我没有多大帮助......

```
2012-05-20T17:32:47+00:00 heroku[router]: Error H13 (Connection closed without response) -
> POST reddeportiva-sta.heroku.com/paypal_ipn dyno=web.1 queue= wait= service= status=503 
bytes=2012-05-20T17:32:47+00:00 app[web.1]: !! Unexpected error while processing request: 
undefined method `include?' for nil:NilClass
2012-05-20T17:32:47+00:00 heroku[nginx]: 173.0.82.126 - - [20/May/2012:17:32:47 +0000] 
"POST /paypal_ipn HTTP/1.0" 503 607 "-" "-" reddeportiva-sta.heroku.com 
```

任何人都知道 Paypal IPN 通知消息是否有任何与可能导致这场噩梦的简单 CURL POST 请求不同的特别内容？

**编辑** 好吧，我已经发现了问题的根源，但我仍在调查解决方案。

我正在使用 rack-iframe ( [http://rubygems.org/gems/rack-iframe](http://rubygems.org/gems/rack-iframe) ) 让我的用户在其网页上的 iframe 内登录和维护会话。

Paypal IPN 消息中似乎有一些东西导致 rack-iframe 崩溃。我将进一步调查并分享我的发现。

那是一个非常奇怪的错误......

* * *

**编辑 2** 我已经向 rack-iframe 创建者发送了一个针对这个问题的小修复的拉取请求，所以我认为这个问题已经解决了:-) [https://github.com/merchii/rack-iframe/pull/1](https://github.com/merchii/rack-iframe/pull/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:16:11.303

“未定义的方法‘包括？’ 对于 nil:NilClass" 很好奇，我会将日志记录级别提升到 DEBUG 并查看其他情况：

[https://devcenter.heroku.com/articles/logging#logging_in_rails](https://devcenter.heroku.com/articles/logging#logging_in_rails)

# python - 将 GAE 模型转换为 JSON

> ID：10675849
> 
> 赞同：3
> 
> 时间：2012-05-20T18:06:19.327
> 
> 标签：python, google-app-engine

我正在使用[此处找到的代码](https://stackoverflow.com/a/2305601/458960)将 GAE 模型转换为 JSON：

```
def to_dict(self):
    return dict([(p, unicode(getattr(self, p))) for p in self.properties()]) 
```

它工作得很好，但是如果一个属性没有值，它会放置一个默认字符串“None”，这在我的客户端设备（Objective-C）中被解释为一个真实值，即使它应该被解释为一个零值。

如何修改上面的代码，同时保持其简洁性以跳过而不将属性写入具有 None 值的字典？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T18:11:26.763

```
def to_dict(self):
    return dict((p, unicode(getattr(self, p))) for p in self.properties()
                if getattr(self, p) is not None) 
```

您不需要先创建列表（周围`[]`），您可以使用[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)即时构建值。

它不是很简短，但是如果您的模型结构变得更复杂，您可能需要查看这个递归变体：

```
# Define 'simple' types
SIMPLE_TYPES = (int, long, float, bool, dict, basestring, list)

def to_dict(model):
    output = {}

    for key, prop in model.properties().iteritems():
        value = getattr(model, key)

        if isinstance(value, SIMPLE_TYPES) and value is not None:
            output[key] = value
        elif isinstance(value, datetime.date):
            # Convert date/datetime to ms-since-epoch ("new Date()").
            ms = time.mktime(value.utctimetuple())
            ms += getattr(value, 'microseconds', 0) / 1000
            output[key] = int(ms)
        elif isinstance(value, db.GeoPt):
            output[key] = {'lat': value.lat, 'lon': value.lon}
        elif isinstance(value, db.Model):
            # Recurse
            output[key] = to_dict(value)
        else:
            raise ValueError('cannot encode ' + repr(prop))

    return output 
```

`elif`这可以通过添加到分支轻松地用其他非简单类型进行扩展。

# java - Java 将 .obj 转换为 Android 的 OpenGL

> ID：10675853
> 
> 赞同：1
> 
> 时间：2012-05-20T18:06:52.197
> 
> 标签：java, android, opengl-es

我有一个 Blender .obj 文件，它被上传到一个 tomcat 网络服务器。

现在我需要将此文件转换并存储到 Oracle 数据库中。

转换后的数据应该可以被 Android OpenGL Viewer 使用（我没有实现那个 Android 应用程序，所以我不能改变它获取数据的方式），它以某种方式从数据库中获取数据。

我的问题是：如何将 .obj 文件转换为 OpenGL 查看器可以理解的内容并将其存储到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T21:58:31.570

好吧，只需将 OBJ 文件转储到可以表示顶点、面和面列表的 SQL 模式中。例如

```
CREATE TABLE vertices (object_ID KEY, vert_ID INTEGER, x DOUBLE, y DOUBLE, z DOUBLE);
CREATE TABLE faces(object_ID KEY, vertex_A INTEGER, vertex_B INTEGER, vertex_C INTEGER); 
```

然后将您的对象加载到OpenGL

```
SELECT x,y,z FROM vertices WHERE objectID = ... ORDER BY vert_ID; 
```

并将结果放入顶点数组。面部相似

```
SELECT vertex_A, vertex_B, vertex_C FROM faces WHERE objectID = ...; 
```

并使用结果数组进行调用`glDrawElements`

如果你不知道如何使用顶点数组和glDrawElements，那么首先学习它们的使用，这样你就知道如何使用SQL转储的结果进行绘图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:16:22.090

我之前推荐过 Pixel Nerve 的[ObjImport](http://www.pixelnerve.com/processing/libraries/objimport/)来完成这种工作。请注意，这个工具实际上只是一个解析，你仍然需要编写大量代码才能让它做一些有用的事情。

还有另一个我没有使用过的选项，但我听说了一些好[消息——JMonkeyEngine](http://jmonkeyengine.org/introduction/)实际上与 OpenGL 集成。你仍然需要编写相当多的代码，但可以这么说，它更接近目标。

# c# - 将参数值从字符串转换为 Int32 失败

> ID：10675857
> 
> 赞同：8
> 
> 时间：2012-05-20T18:07:19.863
> 
> 标签：c#, sql, sql-server-2008

但是，我目前正在尝试为基于 Web 的应用程序完成交易；

> 将参数值从字符串转换为 Int32 失败

这是该功能的副本。

```
public static void completeTransaction(string storeCode, string employeeId, DateTime Date, string itemListNoId)
{
    using (SqlConnection conn = new SqlConnection("Data Source = ; Initial Catalog =Business ; Integrated Security = true;"))
    {
        using (SqlCommand command = new SqlCommand("dbo.completeTransaction", conn))
        {
            command.CommandType = CommandType.StoredProcedure;
            command.Parameters.Add("@storeCode", SqlDbType.Int).Value = storeCode;
            command.Parameters.Add("@employeeId", SqlDbType.Int).Value = employeeId;
            command.Parameters.Add("@Date", SqlDbType.DateTime).Value = Date;
            command.Parameters.Add("@itemListNoId", SqlDbType.Int).Value = itemListNoId;
            conn.Open();

            command.ExecuteNonQuery();
            conn.Close();
        }
    }
} 
```

My SQL Server 表包含以下表和类型

```
storeCode INT
employee INT
Date DATETIME
itemListNoId INT 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:13:20.360

我相信问题出在您的第一个参数（storeCode）中。您正在尝试将字符串作为 int 参数发送。

该行应如下所示：

```
command.Parameters.Add("@storeCode", SqlDbType.Int).Value = Convert.ToInt32(storeCode); 
```

还有一件更可疑的事情：参数的名称是 storeCode，这意味着一个 varchar 列。您试图作为 storeCode 传递的值是什么？你确定这是一个int？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:56:39.060

我建议您更改方法中参数的类型。

至

```
public static void completeTransaction(int storeCode, int employeeId, DateTime Date, string itemListNoId) 
```

并在将值传递给方法之前转换字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T18:09:53.520

其中一个输入是字符串，请检查以下声明：

```
storeCode
employeeId
itemListNoId 
```

我想`storeCode`是一个字符串。您可以通过将其解析为来解决此问题`Int`：

```
command.Parameters.Add("@storeCode", SqlDbType.Int).Value = int.Parse(storeCode); 
```

`storeCode`但是，如果永远没有 parasable ，这将导致问题`Int`。

# ruby - Ruby - Savon - JIRA SOAP - 在创建新问题时设置组件

> ID：10675859
> 
> 赞同：0
> 
> 时间：2012-05-20T18:07:48.790
> 
> 标签：ruby, jira, savon

如何在 JIRA 问题中设置组件？在创建新问题时，我将组件数组设置为我的`id`值`name`。正确的方法是什么？它也没有`assignee`价值。

```
username = 'admin'
password = 'admin'
project = 'Dev'

jira = Savon::Client.new(
  "https://something.com/rpc/soap/jirasoapservice-v2?wsdl"
)

login = jira.request(:login) do |soap|
  soap.body = {
    :in0 => username,
    :in1 => password
  }
end
login = login.to_hash
token = login[:login_response][:login_return]

def createissue jira, token, project, username
response = jira.request(:create_issue) do |soap|
  soap.body = {
    :in0 => token,
    :in1 => {
      :type => "3",
      :assignee => username,
      :project => project,
      :summary => "API Test",
      :description => "Jira's SOAP API test",
      :components => [ 'id' => '10786']
      #:components =>
        { 'components' =>
          { 'id' => '10786',
            'name' => 'General Troubleshooting'}} # tried these
      #:components =>
        { 'id' => '10786',
          'name' => 'General Troubleshooting'} # tried these
      # None of of the above component
      # options is setting component in my issue.
      # I have the correct 'id' and 'name'.
        }
  }
end
end

  createissue jira, token, project, username 
```

在 SOAPUI 中，它显示了所需的数据类型，但是我要为此构造 xml 吗？

```
<components
  xsi:type="jir:ArrayOf_tns1_RemoteComponent"
  soapenc:arrayType="bean:RemoteComponent[]"
  xmlns:jir="https://server/rpc/soap/jirasoapservice-v2" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:40:38.380

不是最优雅的方式，但如果我遇到此类问题，我的起点是在代码中构建 XML 字符串并将其分配给soap.body。

# javascript - 如何通过 JavaScript 获取类的内容

> ID：10675862
> 
> 赞同：5
> 
> 时间：2012-05-20T18:08:09.043
> 
> 标签：javascript, getelementbyid

我需要使用 JavaScript 来获取通过以下方式发布的用户名：

```
<div id="project_user">
    <p class="project_user">
        by <span class="project_username"><?php echo $OwnerName; ?></span>
     </p>
</div> 
```

我该怎么做？

我尝试了以下但没有奏效：

```
document.getElementById('project_username').innerHTML 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T18:11:20.063

`id`当您需要选择时，您选择`className`：

```
document.getElementsByClassName('project_username')[0].innerHTML 
```

[**现场演示**](http://jsfiddle.net/QVq9z/1/)

请注意，`document.getElementsByClassName`旧 IE 版本中未实现...

* * *

其他方式：

```
document.getElementById('project_user')
        .getElementsByTagName('span')[0].innerHTML; 
```

**[现场演示](http://jsfiddle.net/QVq9z/)**

* * *

您可以使用此“补丁”在旧浏览器中定义此功能：

```
if (!document.getElementsByClassName) {
    document.getElementsByClassName = function(classname) {
        var elArray = [];
        var tmp = document.getElementsByTagName("*");
        var regex = new RegExp("(^|\\s)" + classname + "(\\s|$)");
        for (var i = 0; i < tmp.length; i++) {
            if (regex.test(tmp[i].className))
                elArray.push(tmp[i]);
        }

        return elArray;
    };
}​ 
```

[**来源**](https://stackoverflow.com/a/5149557/601179)

* * *

或者使用这样的 javascript 库`jQuery`来实现（几乎）所有 css 选择器，例如：

```
$('.project_username').html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:11:01.197

### 哪种浏览器支持哪种方法？

`document.getElementById`仅当元素具有`id='targetvalue'`. 您上面的示例显示了`class`属性中的值，而不是`id`.

您可以使用`getElementsByClassName`，尽管 IE8 或更低版本不支持此功能。还有`document.querySelectorAll`，它在 IE 中的支持稍好一些。

### 嗯，浏览器支持图表很漂亮

[您可以在http://www.quirksmode.org/dom/w3c_core.html#gettingelements](http://www.quirksmode.org/dom/w3c_core.html#gettingelements)查看浏览器对在线获取元素的各种方法的支持。

### 一个人做的冗长

制作广泛的跨浏览器兼容解决方案可能很冗长：

```
var parent = document.getElementById("project_user"),
    element;

// If the browser supports querySelectorAll, use it.
if ( parent.querySelectorAll ) {
  element = parent.querySelectorAll('.project_username')[0];

// Else, if getElementsByClassName is supported, use it.
} else if ( parent.getElementsByClassName ) {
  element = parent.getElementsByClassName('project_username')[0];

// Else, roll up our sleeves, let's do this the hard way
} else {
  var spans = parent.getElementsByTagName("span"), 
      spani = spans.length;
  while ( spani-- ) {
    if ( spans[spani].className === "project_username" ) {
      element = spans[spani];
      break;
    }
  }
} 
```

### 使用好工具的简洁性

或者你可以使用像 jQuery 这样的东西来减少你的挫败感：

```
var $element = $(".project_username"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T18:15:09.743

尝试：

```
var project_username = document.getElementById('project_user').getElementsByClassName('project_username')[0].innerHTML;
alert(project_username); 
```

或者使用 jQuery 更容易：

```
var project_username = $('.project_username');
alert(project_username); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T18:47:06.567

`document.getElementsByClassName()`不像 IE 8 那样跨浏览器不支持它，您可能必须在不支持的地方编写自己的*getElementsByClassName()*。

这是一个替代方案：

```
var projUser = document.getElementById('project_user');
var projUsername = projUser.getElementsByTagName('span')[0]; // If you need 1st span's content
var userame = projUsername.innerHTML; 
```

您也可以将其写在一行中。

```
var userame = document.getElementById('project_user').getElementsByTagName('span')[0].innerHTML; 
```

# javascript - 自动换行元素中的可见词

> ID：10675864
> 
> 赞同：0
> 
> 时间：2012-05-20T18:08:32.703
> 
> 标签：javascript, jquery, prototypejs, mootools, yui

在一个长的 wordwrap 元素中，有什么方法可以检测到最左上角的可见词？

在每个单词或一堆单词周围使用 span 并不是一个好的选择，因为文本会太长并且动态加载而无法获得良好的性能，但我可能认为这不会出现其他任何情况。

示例代码（使用它[http://jsfiddle.net/8utcp/2/](http://jsfiddle.net/8utcp/2/)）：

```
<style> #test { height: 100px; width: 150px; overflow: auto; } </style>

<div id=test> with lots of text </div>

<script> $("#test").scrollTop(50); // simulate user scroll </script> 
```

现在你在测试 div 中有这个：

![带有自动换行的滚动文本](../Images/28621377385b7a8addd42d1c3369a9a5.png)

我如何确定第一个可见词是“Adpiscing”？

答案可以使用任何框架。基于javascript或css。即使是不适用于所有浏览器的解决方案也是受欢迎的，因为它们可以成为一个很好的起点。我根本找不到关于这个问题的任何信息。

更多澄清。如果我有一个长文本，我在浏览器中打开它并向下滚动，然后我在另一个设备中打开它，具有不同的屏幕尺寸，甚至在同一个浏览器中，但放大 10 倍。哪个属性/逻辑将确保第一个可见单词始终匹配。<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:56:18.827

简短的回答是，不，你不能得到单词的位置。长答案是，你可以做你想做的事，但它很hacky。

我能想到的是：

*   基于空格分割
*   遍历单词标记并在单词之前和之后注入一个 span 元素，比如在单词之前和之后绝对位置，您甚至可以将 innerHTML 设置为 orig`wordsArray.join(" <span></span>")`以便您的空格/单词变得可测量，或者您可以将每个单词包装在一个 span 中。
*   您现在可以从父级获取跨度的偏移量，为每个单词提供粗略的坐标
*   制定 - 基于滚动 - 哪一个可能是第一个可见的。
*   摆脱跨度。

# ios - 带自动释放的 iOS 内存管理

> ID：10675865
> 
> 赞同：0
> 
> 时间：2012-05-20T18:08:48.293
> 
> 标签：ios

[TestFlight](https://testflightapp.com)在我的应用程序中发现了一个我无法复制的崩溃，但它发生得足够多，我需要修复它。我认为该错误是`unrecognized selector sent to instance 0x34a9e0`当我尝试将 locationId 分配给被 GC 消除的对象时引起的。

```
-[UIViewAnimationState locationId]: unrecognized selector sent to instance 0x34a9e0

0 CoreFoundation 0x371e488f __exceptionPreprocess + 163
1 libobjc.A.dylib 0x34ee9259 objc_exception_throw + 33
2 CoreFoundation 0x371e7a9b -[NSObject doesNotRecognizeSelector:] + 175
3 CoreFoundation 0x371e6915 ___forwarding___ + 301
4 CoreFoundation 0x37141650 _CF_forwarding_prep_0 + 48
5 Skate Spots 0x0000b9b9 -[DetailViewController handlePhotosButtonClick:] (DetailViewController.m:92)
6 CoreFoundation 0x3713e3fd -[NSObject performSelector:withObject:withObject:] + 53
7 UIKit 0x30ed3e07 -[UIApplication sendAction:to:from:forEvent:] + 63
8 UIKit 0x30ed3dc3 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 31
9 UIKit 0x30ed3da1 -[UIControl sendAction:to:forEvent:] + 45
10 UIKit 0x30ed3b11 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 493
11 UIKit 0x30ed4449 -[UIControl touchesEnded:withEvent:] + 477
12 UIKit 0x30ec6b87 _UIGestureRecognizerUpdate + 5223
13 CoreFoundation 0x371b8b1b __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 19
14 CoreFoundation 0x371b6d57 __CFRunLoopDoObservers + 259
15 CoreFoundation 0x371b70b1 __CFRunLoopRun + 761
16 CoreFoundation 0x3713a4a5 CFRunLoopRunSpecific + 301
17 CoreFoundation 0x3713a36d CFRunLoopRunInMode + 105
18 GraphicsServices 0x338f9439 GSEventRunModal + 137
19 UIKit 0x30ee6cd5 UIApplicationMain + 1081
20 Skate Spots 0x0000325f -[Image willSendWithObjectLoader:] (Image.m:83)
21 Skate Spots 0x00002b18 + 0 
```

**原始代码：**

我假设 autorelease 将在此方法的范围内保留引用。

```
-(IBAction)handlePhotosButtonClick:(id)sender
{
  PhotosViewController *vc = [[[PhotosViewController alloc] init] autorelease];
  vc.locationID            = _location.locationId;
  [self.navigationController pushViewController:vc animated:YES];
} 
```

**我的代码更改：**

我猜这将消除原来的错误，但这是正确的做法吗？

```
-(IBAction)handlePhotosButtonClick:(id)sender
{
  NSLog(@"handlePhotosButtonClick");    
  PhotosViewController *vc = [[[PhotosViewController alloc] init] retain];
  vc.locationID            = _location.locationId;

  [self.navigationController pushViewController:vc animated:YES];
  [vc release];
} 
```

**编辑**

你们是正确的 _location 没有设置为保留值。

`@property (nonatomic, readwrite, assign) RKLocation *location;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:22:25.687

```
PhotosViewController *vc = [[[PhotosViewController alloc] init] retain]; // <--- this is over retaining and it's totally wrong, because init method returns an already retained object. 
```

该错误与您`_location.locationId`有关，它调用了 getter`_location`并且在某些时候您可能已经释放了它。检查您的代码的生命周期，`_location`并且最好使用属性而不是实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:29:21.937

关于您的代码，您的原始代码更接近您想要的。值得注意的是，您的最终代码：

```
-(IBAction)handlePhotosButtonClick:(id)sender
{
    NSLog(@"handlePhotosButtonClick");    
    PhotosViewController *vc = [[[PhotosViewController alloc] init] retain];
    vc.locationID            = _location.locationId;

    [self.navigationController pushViewController:vc animated:YES];
    [vc release];
} 
```

肯定是错误的，会导致泄漏。它应该是：

```
-(IBAction)handlePhotosButtonClick:(id)sender
{
    NSLog(@"handlePhotosButtonClick");    
    PhotosViewController *vc = [[PhotosViewController alloc] init];
    vc.locationID            = _location.locationId;

    [self.navigationController pushViewController:vc animated:YES];
    [vc release];
} 
```

这就像您的原始版本一样`autorelease`，但这更好，因为您通常应该只`autorelease`在需要延迟时使用`release`（在这种情况下您不需要）。

您的问题不在于视图控制器的保留计数，而无疑与 locationID 本身有关。你能与我们分享它的声明（在 PhotosViewController 类以及当前类中）吗？它是什么？它是如何宣布的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T18:17:32.243

```
-[UIViewAnimationState locationId]: unrecognized selector sent to instance 0x34a9e0 
```

所以发送的选择器是 locationId (getter)，而不是 setLocationId: (setter)。这意味着，不是自动释放的对象（在这种情况下是您的视图控制器）导致错误，因为您设置了它的属性，所以运行时调用 setLocationId: 就可以了。它评估在`_location`某处被释放的对象，然后另一个对象接管它的指针（在这种特殊情况下它是一个 UIViewAnimationState ），当然它不会响应 locationId getter。尝试修改您的代码，以便在您需要它的属性之前不会释放 _locationId 变量。

# ubuntu - chef-solo 错误 Errno::ENOENT: 没有这样的文件或目录 - solo.rb

> ID：10675867
> 
> 赞同：8
> 
> 时间：2012-05-20T18:09:24.923
> 
> 标签：ubuntu, nginx, chef-infra

我正在尝试通过 Ubuntu 12.04 服务器上的操作码说明书安装 nginx。我知道这取决于 ohai，所以我也下载了那本食谱。当我跑

```
$ sudo chef-solo -c solo.rb 
```

我收到一条错误消息

```
FATAL: Errno::ENOENT: No such file or directory - solo.rb 
```

不确定当它在我当前目录中时，solo.rb 是如何丢失的。

```
$ ls
cache  cookbooks  node.json  node.json~  solo.rb  solo.rb~ 
```

这是调试的输出

```
$ sudo chef-solo -l debug -c solo.rb
[Sun, 20 May 2012 14:00:10 -0400] INFO: *** Chef 0.10.10 ***
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Building node object for vagrant-ubuntu-precise
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Extracting run list from JSON attributes provided on command line
[Sun, 20 May 2012 14:00:10 -0400] INFO: Setting the run_list to ["recipe[ohai]", "recipe[main]", "recipe[nginx]"] from JSON
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Applying attributes from json file
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Platform is ubuntu version 12.04
[Sun, 20 May 2012 14:00:10 -0400] INFO: Run List is [recipe[ohai], recipe[main], recipe[nginx]]
[Sun, 20 May 2012 14:00:10 -0400] INFO: Run List expands to [ohai, main, nginx]
[Sun, 20 May 2012 14:00:10 -0400] INFO: Starting Chef Run for vagrant-ubuntu-precise
[Sun, 20 May 2012 14:00:10 -0400] INFO: Running start handlers
[Sun, 20 May 2012 14:00:10 -0400] INFO: Start handlers complete.
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: No chefignore file found at /var/chef/cookbooks/chefignore no files will be ignored
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook chef-jenkins's library file: /var/chef/cookbooks/chef-jenkins/libraries/manage_node.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook chef-jenkins's providers from /var/chef/cookbooks/chef-jenkins/providers/job.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loaded contents of /var/chef/cookbooks/chef-jenkins/providers/job.rb into a provider named chef-jenkins_job defined in Chef::Provider::ChefJenkinsJob
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook chef-jenkins's providers from /var/chef/cookbooks/chef-jenkins/providers/execute.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loaded contents of /var/chef/cookbooks/chef-jenkins/providers/execute.rb into a provider named chef-jenkins_execute defined in Chef::Provider::ChefJenkinsExecute
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook chef-jenkins's providers from /var/chef/cookbooks/chef-jenkins/providers/node.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loaded contents of /var/chef/cookbooks/chef-jenkins/providers/node.rb into a provider named chef-jenkins_node defined in Chef::Provider::ChefJenkinsNode
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook chef-jenkins's providers from /var/chef/cookbooks/chef-jenkins/providers/cli.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loaded contents of /var/chef/cookbooks/chef-jenkins/providers/cli.rb into a provider named chef-jenkins_cli defined in Chef::Provider::ChefJenkinsCli
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook chef-jenkins's resources from /var/chef/cookbooks/chef-jenkins/resources/job.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loaded contents of /var/chef/cookbooks/chef-jenkins/resources/job.rb into a resource named chef-jenkins_job defined in Chef::Resource::ChefJenkinsJob
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook chef-jenkins's resources from /var/chef/cookbooks/chef-jenkins/resources/node.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loaded contents of /var/chef/cookbooks/chef-jenkins/resources/node.rb into a resource named chef-jenkins_node defined in Chef::Resource::ChefJenkinsNode
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook chef-jenkins's resources from /var/chef/cookbooks/chef-jenkins/resources/execute.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loaded contents of /var/chef/cookbooks/chef-jenkins/resources/execute.rb into a resource named chef-jenkins_execute defined in Chef::Resource::ChefJenkinsExecute
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook chef-jenkins's resources from /var/chef/cookbooks/chef-jenkins/resources/cli.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loaded contents of /var/chef/cookbooks/chef-jenkins/resources/cli.rb into a resource named chef-jenkins_cli defined in Chef::Resource::ChefJenkinsCli
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Node vagrant-ubuntu-precise loading cookbook nginx's attribute file /var/chef/cookbooks/nginx/attributes/default.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Node vagrant-ubuntu-precise loading cookbook nginx's attribute file /var/chef/cookbooks/nginx/attributes/geoip.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Node vagrant-ubuntu-precise loading cookbook nginx's attribute file /var/chef/cookbooks/nginx/attributes/source.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Node vagrant-ubuntu-precise loading cookbook nginx's attribute file /var/chef/cookbooks/nginx/attributes/upload_progress.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Node vagrant-ubuntu-precise loading cookbook ohai's attribute file /var/chef/cookbooks/ohai/attributes/default.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Node vagrant-ubuntu-precise loading cookbook chef-jenkins's attribute file /var/chef/cookbooks/chef-jenkins/attributes/default.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading cookbook nginx's definitions from /var/chef/cookbooks/nginx/definitions/nginx_site.rb
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Loading Recipe ohai via include_recipe
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Found recipe default in cookbook ohai
[Sun, 20 May 2012 14:00:10 -0400] INFO: ohai plugins will be at: /etc/chef/ohai_plugins
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Platform ubuntu not found, using all defaults. (Unsupported platform?)
[Sun, 20 May 2012 14:00:10 -0400] INFO: Processing remote_directory[/etc/chef/ohai_plugins] action create (ohai::default line 23)
[Sun, 20 May 2012 14:00:10 -0400] INFO: Processing cookbook_file[/etc/chef/ohai_plugins/README] action create (dynamically defined)
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Platform ubuntu not found, using all defaults. (Unsupported platform?)
[Sun, 20 May 2012 14:00:10 -0400] ERROR: Running exception handlers
[Sun, 20 May 2012 14:00:10 -0400] ERROR: Exception handlers complete
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Re-raising exception: Errno::ENOENT - No such file or directory - solo.rb
/var/chef/cookbooks/ohai/recipes/default.rb:41:in `read'
/var/chef/cookbooks/ohai/recipes/default.rb:41:in `from_file'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/cookbook_version.rb:578:in `load_recipe'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/language_include_recipe.rb:46:in `load_recipe'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/language_include_recipe.rb:33:in `include_recipe'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `each'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `include_recipe'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/run_context.rb:72:in `load'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/run_context.rb:69:in `each'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/run_context.rb:69:in `load'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/client.rb:199:in `setup_run_context'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/client.rb:162:in `run'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application/solo.rb:207:in `run_application'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application/solo.rb:195:in `loop'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application/solo.rb:195:in `run_application'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application.rb:70:in `run'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/chef-solo:25
/usr/local/bin/chef-solo:19:in `load'
/usr/local/bin/chef-solo:19
[Sun, 20 May 2012 14:00:10 -0400] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[Sun, 20 May 2012 14:00:10 -0400] DEBUG: Errno::ENOENT: No such file or directory - solo.rb
/var/chef/cookbooks/ohai/recipes/default.rb:41:in `read'
/var/chef/cookbooks/ohai/recipes/default.rb:41:in `from_file'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/cookbook_version.rb:578:in `load_recipe'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/language_include_recipe.rb:46:in `load_recipe'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/language_include_recipe.rb:33:in `include_recipe'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `each'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/language_include_recipe.rb:27:in `include_recipe'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/run_context.rb:72:in `load'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/run_context.rb:69:in `each'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/run_context.rb:69:in `load'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/client.rb:199:in `setup_run_context'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/client.rb:162:in `run'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application/solo.rb:207:in `run_application'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application/solo.rb:195:in `loop'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application/solo.rb:195:in `run_application'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application.rb:70:in `run'
/var/lib/gems/1.8/gems/chef-0.10.10/bin/chef-solo:25
/usr/local/bin/chef-solo:19:in `load'
/usr/local/bin/chef-solo:19
[Sun, 20 May 2012 14:00:10 -0400] FATAL: Errno::ENOENT: No such file or directory - solo.rb 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T14:19:12.443

这是由于厨师的工作方式。它将目录更改为 / 以避免任何类型的权限问题，但这意味着需要访问命令行参数的插件将不再知道如何访问您的相对路径。

厨师代码中存在一个错误以解决该问题。

目前，为参数使用完整路径可以`chef-solo`解决问题。例如

```
$ chef-solo -c /full/path/to/solo.rb -j /full/path/to/node.json -l debug 
```

或者正如其他人指出的那样，删除`/etc/chef/ohai_plugins/README`文件也将“解决”问题。虽然不是真正的方式，但因为所做的只是触发 ohai_plugins 文件夹上的修改时间更新，从而触发厨师重新加载所有内容。该功能无法保证，并且可能会在上述错误修复之前中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T18:13:11.253

这似乎是 chef-solo 和 chef-client 的错误，我做了一些挖掘并在这里打开了一个错误：http: [//tickets.opscode.com/browse/COOK-1490?focusedCommentId=25572#comment -25572](http://tickets.opscode.com/browse/COOK-1490?focusedCommentId=25572#comment-25572)

就像已经建议的那样，解决方法是使用配置的绝对路径，任何相对路径都有同样的问题。每当 ohai 配方在不更改任何插件的情况下运行时也会发生这种情况，它并不特定于 nginx 食谱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T07:35:16.450

问题很可能是每次运行都会重新创建的“/etc/chef/ohai_plugins/README”。你只需要在运行 chef-solo 之前删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T20:29:52.160

如果 chef-solo 0.10.10 找不到你的`solo.rb`，它会在你的调试日志开始时抱怨以下消息：

```
$ chef-solo -c solo.rb -l debug
[2012-06-18T23:27:32+03:00] WARN: *****************************************
[2012-06-18T23:27:32+03:00] WARN: Did not find config file: solo.rb, using command line options.
[2012-06-18T23:27:32+03:00] WARN: *****************************************
[2012-06-18T23:27:32+03:00] INFO: *** Chef 0.10.10 ***
... 
```

所以错误在于以某种方式使用此配置文件名的配方的逻辑。

# asp.net - 从类内部访问 HttpApplicationState (Application["key"]) 数据

> ID：10675870
> 
> 赞同：0
> 
> 时间：2012-05-20T18:09:31.690
> 
> 标签：asp.net

我有一个.net 应用程序和一个类。在那个类中，我需要访问 HttpApplicationState 并在那里存储一些值。换句话说，这就是我需要做的：

`Application["myKey"] = "value";`

我怎样才能做到这一点？我的班级不提供申请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:11:58.677

你正在寻找`HttpContext.Current.Application["key"]`.

# c# - 从父窗体中获取值

> ID：10675872
> 
> 赞同：0
> 
> 时间：2012-05-20T18:09:37.297
> 
> 标签：c#, winforms

在我的应用程序中，我有一个主窗体，它是所有其他窗体的 MdiParent。登录时，默认情况下会打开此表单，并从此表单中的 menustrip 导航到其他表单，如下所示：

```
public partial class MainMenuForm : Form
{
    public MainMenuForm()
    {
        InitializeComponent();
        this.WindowState = FormWindowState.Maximized;
    }

    private void humanResourceToolStripMenuItem_Click(object sender, EventArgs e)
    {
        HumanResourceForm humanresourceform = new HumanResourceForm();
        humanresourceform.MdiParent = this;
        humanresourceform.Show();
    }
} 
```

在里面`HumanResourceForm`我有一个按钮，它将导航到另一个表单说`EmployeeTransferForm`：

```
private void button1_Click(object sender, EventArgs e)
{
    Administraror.Humanresource.EmployeeTransferForm emptranfrm = new Administraror.Humanresource.EmployeeTransferForm();
    emptranfrm.ShowDialog();
} 
```

现在我的问题在于`EmployeeTransferForm`我想从`HumanResourceForm`. 此外，不应允许用户在 HumanResourceForm`EmployeeTransferForm`打开或处于活动状态时关闭它。

我还想获取 TextBox 的 Text 属性，`HumanResourceForm`例如`EmployeeTransferForm`：

```
public partial class EmpLoctnChangeForm : Form 
{
    public EmpLoctnChangeForm( )
    {
        InitializeComponent();
    }

    private void EmpLoctnChangeForm_Load(object sender, EventArgs e)
    {
        intemppk = humanresourceform.txtpk.text;
    }
} 
```

期待大家的一些好的建议。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:08:00.660

我建议您在`EmployeeTransferForm`类中定义一些事件（您想要获取属性值的`Humanresources`表单）并在（您想要访问其属性的表单）中实现它们。我不建议`Form`在面向对象的体系结构中传递整个对象。

因此，代码形式`EmployeeTransferForm`可以如下所示：

```
public class EmployeeTransferForm: Form
{
    public delegate Text GetTextHandler();

    GetTextHandler getSampleTextFromTextBox = null;
    public event GetTextHandler GetSampleTextFromTextBox
    {
        add { getSampleTextFromTextBox += value; }
        remove { getSampleTextFromTextBox -= value; }
    }

    //the rest of the code in the class
    //...
} 
```

而对于`Humanresources`，像这样：

```
class Humanresources : Form
{
    private void button1_Click(object sender, EventArgs e)
    {
        Administraror.Humanresource.EmployeeTransferForm emptranfrm = new Administraror.Humanresource.EmployeeTransferForm();
        emptranfrm.GetSampleTextFromTextBox += new EmployeeTransferForm.GetTextHandler(GetSampleTextFromTextBox_EventHandler);
        emptranfrm.ShowDialog();
    }

    Text GetSampleTextFromTextBox_EventHandler()
    {
        return myTextBox.Text;
    }

    //the rest of the code in the class
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:02:34.590

您可以创建一个公共静态变量以从其他地方访问它：

```
public static HumanResourceForm Instance; 
```

然后在构造函数中设置值：

```
Instance = this; 
```

然后在您的 EmpLoctnChangeForm 中：

```
intemppk = HumanResourceForm.Instance.txtpk.Test; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T05:24:47.750

也许看看实现某种“视图控制器”，它负责这些“跨视图”通信和表单创建。这种方法将更好地封装创建表单（视图）并在它们之间共享数据的过程。它将提供更少的视图耦合，例如，如果您想更改视图显示信息的方式，您可以修改一个表单而无需修改另一个表单，该表单依赖于其上的控件是外部可见的，并且命名正确，甚至根本存在。

此视图控制器可以作为构造函数参数传递给视图，或者如果合适，您可以将其实现为系统范围的单例（因为在这种情况下，应用程序上下文的视图控制器不太可能超过 1 个）。

示例界面可能如下所示；

```
interface IViewController<T>
    where T : Form
{ 
    void ShowForm();
    void ShowFormModal();
} 
```

你可以开始为不同的场景创建专门的 ViewController；

```
public IEmployeeViewController : IViewController<EmployeeForm>
{
    void ShowForm(string intemppk);
} 
```

这确实是一个关于架构的非常基本的建议，它比我在一篇文章中描述的更复杂，但它可能会让你走上正确的轨道。

# shell - 如何知道给定用户是否对给定路径具有读取和/或写入权限

> ID：10675873
> 
> 赞同：9
> 
> 时间：2012-05-20T18:09:45.900
> 
> 标签：shell, unix, user-permissions, directory-permissions

我应该首先说我认为自己是一个熟练的用户。但是今天我需要自动化这个并且被难住了。

假设我是 root，因此我能够遍历整个文件系统，但我不能运行“sudo”或“su”。

我有一个给定的用户和一个给定的路径。

如何通过 CLI 检查用户是否能够读取和/或写入路径？

我知道这听起来很容易，但请记住：

*   我们不是，也不能成为用户。
*   我们不能只依赖最终目录的权限，因为路径更高的权限可能会阻止对最终目录的访问。
*   在这个继承组的时代，我们也不能仅仅依赖目录组权限。

我假设这不能通过任何命令完成，我需要首先收集所有用户组，然后遍历路径的整个层次结构，检查整个路径的读取权限，然后读取和写入最终目录。不过，听起来非常昂贵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:32:21.857

标记我一个脚本大师！

```
check_access() {
  checked_file=$1
  target_user=$2
  result=PASS

  groups=`id -G $target_user | sed -e 's| | -o -group |g' -e 's|^|\\( -group |' -e 's|$| \\)|'`

  while [ $checked_file != / ]; do 
    find $checked_file -maxdepth 0 \
      -type f \( \
        \( -user $target_user -perm 0400 \) \
        -o \( $groups -perm 0040 \) \
        -o -perm 0004 \
      \) -o -type d \( \
        \( -user $target_user -perm 0100 \) \
        -o \( $groups -perm 0010 \) \
        -o -perm 0001 \
      \) >/dev/null 2>&1 || result=FAIL
    checked_file=`dirname $checked_file`
  done
  echo $result
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:38:54.383

最好的方法是通过用户自己验证：

```
if sudo su - $user_to_check -c "[[ -r $path_to_check ]]"
then echo "$user_to_check can read $path_to_check"
else echo "$user_to_check can not read $path_to_check"
fi
if sudo su - $user_to_check -c "[[ -w $path_to_check ]]"
then echo "$user_to_check can write $path_to_check"
else echo "$user_to_check can not write $path_to_check"
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:32:58.813

我实际上无法提供完整的答案，也无法为您自己的想法添加任何实质性内容，也许除了以下内容：

我怀疑不存在检查有效访问权限的通用方法，仅仅是因为访问权限严重依赖于底层文件系统。例如，检查访问权限在使用标准 Unix`rwx`标志的文件系统（例如 Linux 的 ext2、ext3）与支持 ACL 的文件系统（例如[XFS](http://oss.sgi.com/projects/xfs/)或 NTFS）上的工作方式完全不同。

可能有*几个特定*的​​命令行工具可以为特定的文件系统类型执行您想要执行的操作。（类比：诸如`fsck`,之类的工具`mkfs`可能存在于每个文件系统类型中。）

尤其是在类 UNIX 操作系统中，各种文件系统都可以挂载在一个大目录结构中，假设只有一种特定的权限机制可能会导致问题。

如果您为这个问题构建自己的解决方案，请先考虑这个事实，然后准确决定您要支持哪种访问权限机制。（我不确定，但我可以想象 Unix / POSIX 规范将`rwx`访问权限标志规定为每个 Unix 应该支持的最低限度。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-18T04:53:35.780

`ls -l <file-name or dir-name>`

> 假设您要检查上传目录的权限。输入 `ls -l uploads` 这将是这样的结果

```
total 20
drwxrwxr-x 2 tomcat ec2-user 4096 Nov  5 04:21 deals
drwxrwxr-x 2 tomcat ec2-user 4096 Nov  5 04:25 gallery-images
drwxrwxr-x 3 tomcat ec2-user 4096 Nov  5 04:25 hotels
drwxrwxr-x 3 tomcat ec2-user 4096 Nov  5 04:28 rooms
drwxrwxr-x 3 tomcat ec2-user 4096 Nov  5 04:32 temp 
```

# css - 你如何停止一个内容 从调整大小时开始新行？

> ID：10675878
> 
> 赞同：0
> 
> 时间：2012-05-20T18:10:51.093
> 
> 标签：css, html, scroll, overflow

我有一个小项目的问题。我有一个导航栏，它是一个 div，里面有链接，但是每当我调整页面大小时，最后两个都会开始一个新行。我希望链接保持水平位置并在页面中添加滚动条。例如，当您在谷歌上并调整浏览器大小时，溢出的内容不会开始新行。添加滚动条。我曾尝试使用父 div 并设置最小宽度，但都没有奏效。

CSS：

```
.topBar {
    background-color:rgb(161,35,35);
    position:relative;
    display:inline-block;
    width:100%;
    text-align:center;
    height:40px;
}
.text2 {
    font-size:35;
    text-decoration:none;
    margin-left:4%;
    margin-right:4%;
}
.parent {
    min-width:100%;
} 
```

和 HTML：

```
<div class="parent">
    <div class="topBar">
        <a class="text2" href="placeholder.html">Media Mash</a>
        <a class="text2" href="placeholder.html">Film</a>
        <a class="text2" href="placeholder.html">Music</a>
        <a class="text2" href="placeholder.html">Games</a>
        <a class="text2" href="placeholder.html">Books</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:20:05.937

当内容太宽时，页面会自动水平滚动。如果您希望块中的许多元素保持太宽，那么您需要使它们的父级太宽（在这种情况下不适用）或停止父级包装内联元素（这是适用的）。要停止父级包装`<a>`标签，请添加`white-space: nowrap`到`.topbar`规则中。

如果您希望背景`.topbar`也始终填写在内容后面，那么您还需要将您的`width`属性更改为`min-width`.

这是一个没有修复[的例子](http://ibboard.co.uk/temp/page-scroll.html)`min-width`（对我来说它溢出了大约 800px 宽）。

正如评论中提到的，当内容比页面宽时，要确保边距不会溢出到父级之外，请添加`padding: 0.1px`到`.topbar`规则中。这会强制子页边距保持在父页边距内（而不是与其重叠），而不会对呈现产生太大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:14:44.663

您可以使用溢出属性。 [http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T18:22:18.960

然后你必须给你的 div 一个固定的宽度。

而不是`width: 100%;`用您的菜单的像素数替换它，例如： `width: 700px;`

```
.topBar {
    background-color:rgb(161,35,35);
    position:relative;
    display:inline-block;
    width: 700px;
    text-align:center;
    height:40px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T18:30:30.367

你需要的是在你的类中设置相应`white-space`的属性。`parent`

```
.parent {
  min-width: 100%;
  white-space: nowrap;
} 
```

您可以看到[一个工作示例](http://jsfiddle.net/rwYxX/)。

# javascript - 通过 Javascript 获取/设置 CSS 属性值：问题

> ID：10675885
> 
> 赞同：6
> 
> 时间：2012-05-20T18:11:25.883
> 
> 标签：javascript, html, css, dom

有些事情我不清楚：

```
var myDiv = document.getElementById("myDiv");
var computedStyle = window.getComputedStyle(myDiv); 
```

1）如果只有一种颜色，是否可以直接获取div的全局边框颜色，每一边都一样：

```
computedStyle.getPropertyValue("border-color"); 
```

而不是这样做：

```
computedStyle.getPropertyValue("border-left-color"); 
```

或者

```
computedStyle.getPropertyValue("border-right-color"); 
```

或者

```
computedStyle.getPropertyValue("border-top-color"); 
```

...

2）当在 CSS 文件中具有样式属性时，它们只能通过 getComputedStyle 方法访问，而不是通过样式属性（如内联定义的样式属性），通过 div 中的样式属性，我是对的吗？

```
myDiv.style.getPropertyValue("border-left-color"); 
```

这行不通。

3）如果我们要设置一个样式属性，我们必须使用元素的样式属性，难道不能使用计算的样式对象吗？

```
computedStyle.setProperty("border-color", "yellowgreen", null); 
```

我认为使用样式属性是“旧方法”，例如使用内联样式属性或使用 object.style.property = "value" 在 Javascript 中设置样式属性。

谢谢。

jsFiddle：http: [//jsfiddle.net/pgtFR/12/](http://jsfiddle.net/pgtFR/12/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T18:46:41.080

> 1）如果只有一种颜色，是否可以直接获取div的全局边框颜色，每一边都一样：

是的，它可以通过使用简写属性名称来获得计算的样式。我尝试了您在[jsfiddle](http://jsfiddle.net/pgtFR/12/)上共享的示例，并且 computedStyle.getPropertyValue("border-color") 确实返回 (265,65,0) ，这是预期的橙色的 rgb 代码。

> 2）当在 CSS 文件中具有样式属性时，它们只能通过 getComputedStyle 方法访问，而不是通过样式属性（如内联定义的样式属性），通过 div 中的样式属性，我是对的吗？

是的。getComputedStyle 在应用外部、内部和内联样式规则后返回浏览器最终计算的样式值。.style 属性仅指元素的内联样式。

> 3）如果我们要设置一个样式属性，我们必须使用元素的样式属性，难道不能使用计算的样式对象吗？

不，根据这个[文档](http://old.nabble.com/getComputedStyle-results-td16390247.html)，getComputedStyle 返回一个只读的 CSSStyleDeclaration 对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T19:15:04.580

> 如果只有一种颜色，是否可以直接获取div的全局边框颜色，每一边都一样

是和否。[规范](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSStyleDeclaration)描述了两种方法：

*   `getPropertyCSSValue()`返回`CSSValue`单个 CSS 属性的 a。它不适用于速记属性。
*   `getPropertyValue()`返回 a `DOMString`，也适用于速记属性。但是当有不同的边界时你需要小心，字符串将代表所有它们。

> 在 CSS 文件中具有样式属性时，它们只能通过 getComputedStyle 方法访问

不，它们也可以通过[`document.styleSheets`](https://developer.mozilla.org/en/Document_Object_Model_%28DOM%29/document.styleSheets)( [spec](http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-DocumentStyle-styleSheets) ) 访问，并且可以通过[`StyleSheet`interface](http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-StyleSheet)进行更改。

> ...而不是通过样式属性，如内联定义的样式属性，通过 div 中的样式属性，我是对的吗？

是的。该`.style`属性仅表示样式属性中的样式声明（内联样式）。

> 如果我们想设置一个样式属性，我们必须使用元素的样式属性

我猜你的意思是 CSS 属性。您还可以通过在元素（或通过样式表应用其他样式的任何其他内容）上设置类来影响计算样式。或者您可以动态创建样式表，它们将应用于文档。你也可以设置`style`一个元素的属性，但通常你会使用属性暴露的[`CSSStyleDeclaration`接口](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSStyleDeclaration)`.style`。

> 使用计算的样式对象是不可能的吗？

是的。[规范](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSview-getComputedStyle)说返回的“是*`CSSStyleDeclaration`只读的并且只包含绝对值*”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T18:54:45.643

好的，首先让我们解决这个问题：

> 我认为使用样式属性是“旧方法”，例如使用内联样式属性或使用 object.style.property = "value" 在 Javascript 中设置样式属性。

JS 中的 style 属性与 HTML 中的内联样式有很大不同。HTML 中的内联样式不好（恕我直言），因为：

1.  他们对你的设计师很粗暴；如果您将蓝色更改为浅蓝色，并且您有一个“蓝色”类，那么您有一个地方可以更改（您的样式表）。相反，如果您有一个充满`style='color:blue'`...的文档，那么现在您可以通过使用 Linux sed 命令进行大量查找/替换来获得一些乐趣；-)

2.  类在性能方面工作得更好。一方面，页面加载方式`style='color:blue'`比`class='blue'`. 当您开始拥有多个类/样式以及所有这些元素的许多元素时，它（有点）加起来了。同样，一旦进入 JS 领域，更改事物的类比直接更改样式要快一些。PPK 不久前在他的 quirksmode.org 博客上对此进行了研究。

但问题是，自从 PPK 进行这项研究以来，浏览器发生了很大变化，与更改样式相比，更改类最多可以节省几毫秒。同样，页面大小会随着类和样式的变化而变化，但是以今天的带宽，除非你有一些真正可怕的标记，否则这种变化不会很大。

因此，归根结底，首选类和样式表主要是因为 #1；尝试保持一致的外观，甚至是不丑但不一致的外观，对于内联样式来说基本上是不可能的。 ***也许***如果你做大量的服务器端处理来生成那些内联样式......但我不会推荐它。

但是，这并不排除使用 JS 属性“样式”。事实上，如果你查看 jQuery 的源代码，你会发现它充满了`.style`. jQuery 不仅仅是网络上最流行的库；这都是（最初的）John Resig 代码，这意味着它在质量方面与 JS 代码一样好。

所以，是的，使用风格。不要为此感到内疚:-)

现在，至于您的其他问题，简短的回答是 getComputedStyle 本质上是对样式表的 JS 引用，因此您无法更改它们（否为 3），它们没有内联样式（是2）老实说，我不确定在 1）情况下不同的浏览器会做什么；我不会期望任何一致的东西，但你可能会很幸运。

# c++ - 缓冲区长度错误（const char FAR*）

> ID：10675890
> 
> 赞同：-1
> 
> 时间：2012-05-20T18:12:04.683
> 
> 标签：c++, winapi, sockets, buffer

我有一个问题，我绕过函数 recv(ws2_32.dll) 并尝试读取数据。我得到了 leng 参数 - 17 但在实际缓冲区中只有 2 个字节的长度。

我的代码：

```
int WINAPI OwnSend(SOCKET s, const char FAR *buff, int leng, int flags )
{
    //why 'leng'==17 and (sizeof(char) * strlen(buff) + 1) == 2?
    return pTrampolineSend(s, buff, leng, flags);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T18:17:30.757

问题是那样`strlen()`没有用。您无法通过将缓冲区中的任何内容解释为字符串来判断缓冲区的长度。套接字可以发送和接收二进制数据。甚至尚未初始化的缓冲区可能包含任何内容。

恰好有一个 0 字节`buff[1]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:19:39.773

len 参数是您需要提供的。您应该为缓冲区参数分配内存并告诉您使用 len 参数分配了多少内存

# iphone - 在 Storyboard 中的 UIView 上绘制分隔线

> ID：10675892
> 
> 赞同：0
> 
> 时间：2012-05-20T18:12:33.723
> 
> 标签：iphone, ios, storyboard, line, draw

我正在尝试在 UIView 上绘制一条直线分隔线。基本上，这并不难，但我想知道是否存在更简单的方法来做到这一点。例如在故事板中。

实际上，我正在使用具有 1px 高度和某种背景颜色的自行创建的 UIView 绘制线条。

我想要做的是类似于 Apple 的邮件应用程序：（分隔线）

（抱歉图片太大了——有没有办法在这个编辑器中设置大小？）

![苹果邮件应用](../Images/fc23436e80b573381380242784a0b92e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:27:22.767

我的建议是使用静态 UITableView。您可以在情节提要上设置它并使用您的自定义单元格，并且 tableView 将创建该分隔线。我会从情节提要中创建每个单元格。

希望对你有帮助！

# c# - 如何关闭（杀死，释放？）处于 FIN_WAIT_2 状态的套接字？

> ID：10675900
> 
> 赞同：10
> 
> 时间：2012-05-20T18:13:38.003
> 
> 标签：c#, sockets

我有一个客户端应用程序，它使用非托管 dll 与服务器通信。

所有与网络相关的操作都在非托管 dll 中进行。在与服务器进行多次操作后，客户端的 TCP 端口已用完。如果我们使用“netstat -an”检查 netwotk 的状态，我们会得到以下结果：

```
...
TCP    192.168.11.55:56048    192.168.10.28:5000     FIN_WAIT_2
TCP    192.168.11.55:56049    192.168.10.28:5000     FIN_WAIT_2
TCP    192.168.11.55:56050    192.168.10.28:5000     FIN_WAIT_2
TCP    192.168.11.55:56051    192.168.10.27:5000     FIN_WAIT_2
TCP    192.168.11.55:56052    192.168.10.28:5000     FIN_WAIT_2
TCP    192.168.11.55:56053    192.168.10.27:5000     FIN_WAIT_2
TCP    192.168.11.55:56054    192.168.10.27:5000     FIN_WAIT_2
TCP    192.168.11.55:56055    192.168.10.27:5000     FIN_WAIT_2
TCP    192.168.11.55:56056    192.168.10.27:5000     FIN_WAIT_2
TCP    192.168.11.55:56057    192.168.10.28:5000     FIN_WAIT_2
TCP    192.168.11.55:56058    192.168.10.27:5000     FIN_WAIT_2
TCP    192.168.11.55:56059    192.168.10.28:5000     FIN_WAIT_2
TCP    192.168.11.55:56060    192.168.10.27:5000     FIN_WAIT_2
... 
```

只有在客户端关闭后才会释放端口。

如果我在调试模式下运行 VS 项目，它永远不会耗尽端口。但是，在发布模式下运行时，它正在发生。

而且我既无权访问服务器也无权访问客户端源。

如何释放或杀死处于 FIN_WAIT_2 状态的端口？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T08:36:19.920

当套接字处于 FIN_WAIT_2 时，本地套接字已关闭，正在等待远程套接字发送其关闭请求。如果此关闭请求从未到达，则套接字将保持 FIN_WAIT_2 状态一段时间。

这背后的原因是，如果来自远程方的关闭请求将被延迟并在另一个应用程序重用套接字之后到达，则该新连接将立即关闭。

您可以根据需要更改超时，但最终非托管 dll 还没有完全实现 TCP 关闭序列。有关更多信息，请参阅

[http://answers.microsoft.com/en-us/windows/forum/windows_7-networking/how-to-close-finwait2-connections-except-reboot/ba2fed9f-8b61-4b71-ab5b-d39dc9a387e3](http://answers.microsoft.com/en-us/windows/forum/windows_7-networking/how-to-close-finwait2-connections-except-reboot/ba2fed9f-8b61-4b71-ab5b-d39dc9a387e3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:22:35.650

`0 bytes`当您关闭/关闭客户端套接字时，服务器端套接字将读取。
此时，您应该关闭/关闭服务器套接字。您的连接将显示为`TIME_WAIT`并`PID0`最终消失。

我认为这是最好的。

# wpf - 如何将视图模型的一个属性分配给不同视图的另一个视图模型的另一个属性？

> ID：10675904
> 
> 赞同：0
> 
> 时间：2012-05-20T18:14:07.830
> 
> 标签：wpf, mvvm, ado.net-entity-data-model

在 WPF 项目中，我们将 MVVM 模式与 EDM 结合使用。我有一个屏幕，其中一个按钮名称作为模板和一个 ComboBox。当我单击模板按钮时，它将打开一个弹出屏幕并从 TreeView 中选择一个模板。我希望将选定的子节点绑定到原始 ComboBox。

怎么做？我是 MVVM 的新手。任何人都可以指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:36:31.943

通常你不应该跨多个视图绑定元素。您可以将多个 View 绑定到单个 ViewModel。

因此，您可以做的是向 ViewModel 添加一个名为 SelectedTemplate 的属性，并将 TreeView 的 SelectedItem 绑定到此属性。这样，您将始终知道选择了哪个模板。

在另一个视图中，您可以将 ComboBox 的 SelectedItem 绑定到 ViewModel 的 SelectedTemplate 属性。

# file - 如何从文件中逐行读取？在 AWK 中

> ID：10675906
> 
> 赞同：-1
> 
> 时间：2012-05-20T18:14:17.567
> 
> 标签：file, awk, split, line

我想从文件中读取行，然后我想在读取的文件上使用 split 命令。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T01:34:37.980

根据您的评论，这就是您所需要的。

```
awk '{print $16 + $17}' points.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:24:05.017

awk 一次读取数据文件中的所有行，并通过代码中的标记列表处理每一行。如果标记匹配，则该代码行上的指令将应用于匹配行。因此，Awk 为您完成了大部分工作。

# php - 在 php 中正确使用数组

> ID：10675908
> 
> 赞同：0
> 
> 时间：2012-05-20T18:14:29.477
> 
> 标签：php, arrays, performance, oop, multidimensional-array

一位更资深的 PHP 程序员向我解释说，使用 PHP 数组效率低下，因为它会导致额外的数据复制。然后他解释说，通过创建类来保存数据，甚至是数组，您可以获得更少的内存消耗和更高的性能。然后，PHP 不会像数组数组那样被迫复制/深度复制类中的数据。

他还解释说，我要寻找的对象在适当的结构化对象树中比在数组数组中更容易找到。这个我能理解。

问题来了，我知道它们有点模糊。

*   是否有合适的情况在对象上使用数组数组来存储数据？

*   将数据存储在对象中总是会更有效率和更高的内存效率吗？

非常感谢你们，我可以编写和分析一堆 PHP 应用程序来解决这个问题，但我相信你们中的很多人已经知道答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:19:53.633

这家伙做了一个测试，似乎没有太大区别：[http ://www.rooftopsolutions.nl/blog/148](http://www.rooftopsolutions.nl/blog/148)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:26:51.413

数组和类不应该混淆。类代表真实世界的实体及其动作。您不应该为此目的使用数组。关联数组可能支持属性但不支持动作。

这三样东西用数字索引的平凡数组、关联数组和对象的目的是不一样的。使用更好的套件。不要考虑现在的表现。开发软件时，您应该定义需要改进性能的用例。然后开始分析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T21:36:07.767

内存消耗/深度复制的区别在于，默认情况下，数组通过值传递给函数（因此，数组被复制）和对象 - 通过引用。由于您也可以通过引用传递数组（明确说明参数是通过引用 - `function foo(& $bar)`），因此数组与类的内存使用没有太大区别。如前所述，您必须以语义正确的方式使用数组/对象。PHP 不提供`struct`并且使用类来保存结构化数据通常比关联数组更好，因为您可以声明有效的实际键。但是选择数组与类的原因不是性能原因。

# android - opengl es 2.0 源码在android源码中的位置

> ID：10675917
> 
> 赞同：0
> 
> 时间：2012-05-20T18:15:18.760
> 
> 标签：android, opengl-es-2.0

我需要找到 glLinkProgram() 方法的代码，因为当我调用它时会发生奇怪的行为（它永远不会返回）。我下载了整个源代码，现在我必须找到 OpenGL ES 2.0 代码位置。我只找到了 frameworks/base/jni 绑定，但我还找不到肉。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:14:34.200

在 android 源代码中可能找不到任何内容。像 glLinkProgram 这样的 OpenGL 调用是在 GPU 的 OpenGL 驱动程序中处理的，我很确定它是专有的，你不会找到它的源代码。您可能在 android 中找到的最好的只是对 GPU 驱动程序的 glLinkProgram 调用的简单包装，这可能不会做任何有趣的事情。

很抱歉听到您遇到这个问题，您使用的是哪种手机/gpu？您是否确定它没有通过使用调试器并进入它来返回，它只是挂起整个系统？

在尝试链接它们之前，您是否确认两个着色器都已成功编译？无论哪种方式，您都不应该看到这种行为，但了解一下可能会很好。

如果你想把它放在那里，我会看看你[原来问题中的代码。](https://stackoverflow.com/questions/10660759/gles20-gllinkprogram-call-in-android-does-not-return)

# list - 嵌套列表 inlisp

> ID：10675927
> 
> 赞同：0
> 
> 时间：2012-05-20T18:16:44.947
> 
> 标签：list, lisp

我有一个练习来获得一个嵌套列表并将每个单词替换为一个“有趣”的单词。我们得到了一个关于什么是“有趣”这个词的声明。

我写了这段代码

```
(defun funny_nestes (nested_l)
  (cond ((null nested_l) "")
        ((atom (car nested_l))
         (cons (funnyw (car nested_l))
               (funny_nestes (cdr nested_l))))
        (t (cons (funny_nestes (car nested_l))
                 (funny_nestes (cdr nested_l)))))) 
```

当 'funnyw' 是返回 "funny" 单词的函数时。

如果我跑

```
(FUNNY_NESTES '(ata (she lamadta be JCT) oved be NDS)) 
```

我明白了

```
("AbATAbA " ("SHEbE " "LAbAMAbADTAbA " "BEbE " "JCT " . "")
 "ObOVEbED " "BEbE " "NDS " . "") 
```

我想得到

```
(AbATAb (SHEbE LAbAMAbADTAbA  BEbE  JCT) ObOVEbED  BEbE  NDS ) 
```

我该如何解决？我怎么能用 lambda 做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:06:15.543

“我怎么能用 lambda 做呢？” “用 lambda 做”是什么意思？

为什么你的代码中有一个空字符串？

如果您想要符号而不是字符串，则需要将字符串转换为符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:40:33.153

假设这是被问到的，我会在黑暗中刺伤：

```
(defun replace-with-gibberish (modifier words)
  (cond
    ((null words) nil)
    ((consp (car words))
     (cons (replace-with-gibberish modifier (car words))
           (replace-with-gibberish modifier (cdr words))))
    (t (cons (funcall modifier (car words))
             (replace-with-gibberish modifier (cdr words))))))

(replace-with-gibberish
 #'(lambda (x)
     (intern
      (coerce
       (mapcan #'list
               (coerce (symbol-name x) 'list)
               (coerce
                (make-string
                 (length (symbol-name x))
                 :initial-element #\b) 'list)) 'string)))
 '(ata (she lamadta be JCT) oved be NDS)) 
```

我可以从你展示的结果中推断出来。但是，您应该知道，如果您想摆脱符号周围的管道 - 您需要使用大写字母为符号生成乱码名称。（默认情况下，符号名称是大写的，如果它们需要包含小写字母，则需要对其进行转义）。

您的问题的问题是您基本上得到了正确发布的功能，但您没有发布的功能似乎是错误的（funnyw）。我继续假设您只想用任何函数替换它 - 这就是示例的原因。

# c# - 如何在对象中保存会话变量？

> ID：10675928
> 
> 赞同：2
> 
> 时间：2012-05-20T18:17:07.177
> 
> 标签：c#, asp.net, session

我有以下会话变量：`Session["UserId"];`

如何将此变量保存在类和公共变量中？像这样的东西：

```
public class UserDC
{
    //public static Session UserId = Session["UserId"] 
} 
```

我只想打电话：`UserDC.UserId`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T18:19:10.317

这是你想要的？

```
public class UserDC
{
    public static string UserId
    {
        get
        {
            if(HttpContext.Current.Session["Test"] != null)
                return HttpContext.Current.Session["Test"].ToString()
            else 
                return "";
        }

        set
        {
            HttpContext.Current.Session["Test"] = value;
        }
    }
} 
```

**编辑**：

为了在静态属性或静态方法中获取 Session 变量，您必须实际执行以下操作，因为`HttpContext.Current`它是静态的：

```
HttpContext.Current.Session 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:21:19.380

```
public static string UserId
{
   get
   {
      return (string)Session["UserId"];
   }
} 
```

# c++ - 视频程序在保存帧时冻结

> ID：10675935
> 
> 赞同：0
> 
> 时间：2012-05-20T18:18:03.820
> 
> 标签：c++, opencv

我正在尝试制作一个小程序，当您按住键时，它将显示文件中的视频并将帧保存为单独的图像。

它似乎工作正常，除了视频在保存帧时冻结，这使得很难弄清楚何时停止保存帧。我想知道是否有人知道如何避免这个问题。

这是程序原样：

```
#include "stdafx.h"
#include <cv.h>
#include <highgui.h>
#include <iostream>

int main( int argc, char** argv[] ) {
    int cnt = 1;
    char c;

    cvNamedWindow( "Video", CV_WINDOW_AUTOSIZE );
    CvCapture* capture = cvCreateFileCapture( "D:\\AVI Video\\SGVideo.mp4" );
    IplImage* frame;

    while(1) {
        char num[40]="D:\\Bilder\\SGVSamples\\";
        char str[10];
        char pmp[10]=".jpg";
        _itoa(cnt, str, 10);
        strcat(num,str);
        strcat(num,pmp);

        frame = cvQueryFrame( capture );
        if( !frame ) {
            cout << "End of video!\n"; 
            break;
        }
        cvShowImage( "Video", frame );
        c = cvWaitKey(34);

        // 'Space' -> Save frame :: 'Esc' -> Exit
        if( c == 32 ) {
            try {
                cvSaveImage( num, frame );
                cout << "Saved image: " << num <<" - Frame count: " << cnt << "\n";
            } catch(...) {
                cout << "Failed to save image!\n";
            }
        } else if( c == 27 ) {
            cout << "Shutting down...";
            break;
        }
        cnt = cnt+1;
    }

    cvReleaseCapture( &capture );
    cvDestroyWindow( "Video" );
} 
```

一般来说，我对 OpenCV 和 cpp 还很陌生，所以任何提示都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:25:08.490

您应该运行另一个线程来保存图像。

```
 try {
                cvSaveImage( num, frame );
                cout << "Saved image: " << num <<" - Frame count: " << cnt << "\n";
            } catch(...) {
                cout << "Failed to save image!\n";
            } 
```

那个块正在冻结。如果你有另一个线程只处理这个块（需要时），视频就不会被冻结。

# textmate - Textmate，关闭html标签时自动关闭缩进

> ID：10675942
> 
> 赞同：3
> 
> 时间：2012-05-20T18:19:13.040
> 
> 标签：textmate

我喜欢 Textmate，但这是一个一直困扰着我的小怪事。

我目前使用的是 1.5.10 版。

我`Command + Option + Dot`用来关闭一个html标签，但是当我这样做的时候结果是这样的。

```
<html>
  </html> 
```

我希望 Textmate 知道如何做到这一点。添加结束标签时自动取消缩进。

```
<html>
</html> 
```

顺便说一句，这对 Ruby 代码很有效。Textmate 在`end`键入时取消缩进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T03:52:14.773

TextMate 中的`Insert Close Tag (⌘⌥.)`命令（以及 Bundles 菜单中的所有其他命令）可以通过`Bundle Editor`.

如果您打开捆绑编辑器 ( `Bundles`> `Bundle Editor`> `Show Bundle Editor (⌃⌘⌥B)`)，并在左侧列表中找到“插入关闭标签”命令，您应该能够查看和编辑该命令中的代码。

要实现您的取消缩进功能，请找到这段代码（在文件末尾）：

```
else
    print "</#{stack.pop}>"
end 
```

并对其进行修改，使其看起来像这样：

```
else
    print "</#{stack.pop}>"
    %x{ osascript -e 'tell application "System Events" to key code 33 using command' }
end 
```

这行额外的代码告诉 TextMate 在插入结束标记后，它应该`Shift Left`通过模拟按键组合的按下来执行命令`⌘[`- 从而取消缩进您的代码。

# iphone - FlurryAnalytics 简单安装未注册任何应用程序活动

> ID：10675948
> 
> 赞同：-1
> 
> 时间：2012-05-20T18:19:37.340
> 
> 标签：iphone, ios, xcode4

根据我在注册时收到的说明，我已将 Flurry 包含在内。当我构建我的应用程序并成功提交到包括 Flurry 在内的 AppStore 时，我没有收到任何错误，但它显然不起作用，因为我没有看到仪表板中记录的任何活动。我的应用程序委托中有以下代码：

```
#import "FlurryAnalytics.h" 
```

和（实际 API ID 有一些变化）

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {
[FlurryAnalytics startSession:@"XXXX66V713R52CYTV9G"];
} 
```

在 XCODE 中，我有一个黄色的 FlurryAnalitics 文件夹，可以在我附加的屏幕抓取中看到。 ![在此处输入图像描述](../Images/bdafe6364008d8c24b3f37447715dd1d.png) 请你告诉我我做错了什么，因为我已经重复了很多次说明，看不到我错过了什么。

提前谢谢了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:03:03.797

你应该首先将flurry初始化代码放在你的applicationdidFinishLaunchingWithOptions函数中，然后删除你的applicationDidFinishLaunching函数。您不需要将您的应用程序提交到商店来测试 Flurry，并且您应该能够从测试中看到活动。您是否在初始化代码处设置了断点？如果它被正确击中，请尝试联系 Flurry 或在他们的系统上设置另一个应用程序。有时在记录的事件和它们显示在 Flurry 的仪表板上之间可能会有很长的延迟。

# search - 开源即插即用企业搜索引擎选项？

> ID：10675952
> 
> 赞同：1
> 
> 时间：2012-05-20T18:19:58.340
> 
> 标签：search, solr, amazon-web-services, search-engine, amazon-elastic-beanstalk

我一直在研究和测试各种搜索引擎选项，但似乎遇到了同样的问题——没有找到一个好的、即插即用的开源企业搜索引擎。我所说的即插即用是指一个搜索引擎，我可以插入、设置我的字段、添加数据和自定义 UI 的外观（搜索结果、构面等）。搜索还需要在没有技术人员监督的情况下轻松扩展。

我喜欢 Solr，但它不适合“非技术人员”的即插即用。我正在考虑将“配置”Solr 放到 AWS beanstalk 中，但是关于它的少数帖子（有些在 stackoverflow 上）不是很丰富或清晰。

我真的很想要一个盒子里的 Solr，我可以放入 AWS beanstalk 并专注于向搜索引擎添加数据。有人知道解决方案或类似选项吗？

我在 AWS beanstalk 中测试了 Searchblox。这是迄今为止我见过的最好的即插即用选项，但是，它似乎不支持通常在企业搜索引擎中找到的方面或许多功能。

我考虑过像 websolr 和 AWS CloudSearch 这样的“托管”解决方案。不过，这些选项不是即插即用的，需要技术人员来连接……当您想要拥有 1000 万或更多文档时，它们也不便宜。

是否有人对可以放入 AWS Beanstalk 等可扩展云解决方案的开源即插即用企业搜索引擎有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:59:57.403

[弹性搜索](http://www.elasticsearch.org/)是一个不错的选择。它是开源的、分布式的，专为云扩展而构建。它建立在 Apache Lucene 之上。你必须付出一些努力。连接 CloudSearch 似乎非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T18:46:28.770

Google Search Appliance、Fast Search 或 Coveo、Autonomy 的其他应用程序是少数可以满足您即插即用需求的 ESearch 引擎。

# android - logcat中的“真实对象已被删除”

> ID：10675956
> 
> 赞同：5
> 
> 时间：2012-05-20T18:20:19.217
> 
> 标签：android, android-emulator, android-logcat

这个问题以前被问过[这里](https://stackoverflow.com/questions/7362216/android-the-real-object-has-been-deleted)，但没有回答，也没有在网上找到任何解释这个问题的文章。

我的应用程序运行良好，但在某些时候`startActivityForResult`我看到 3 条日志`webcoreglue: The real object has been deleted`。

现在据称我的应用程序到目前为止一切正常，我不知道记录此消息的内容和原因。

在我尝试找出我的应用程序有什么问题之前，有人可以解释为什么以及何时发生这种情况以及这意味着什么？

**编辑：** 关于更多上下文的请求，我没有使用我认为的任何特殊库，只有 Facebok SDK。

我目前的应用程序是一个“创建游戏”活动，它有 3 个选项，从 facebook 邀请玩家，通过用户名邀请玩家并添加随机玩家。

从 facebook 按钮邀请玩家打开一个 ListActivity（用于结果），返回您选择的所有玩家。邀请用户打开带有 EditText 的对话框并在服务器中搜索用户数据。所有选定的播放器都出现在主活动内的 ListView 中，因此添加随机播放器只需将一个项目添加到该列表视图。

我相信错误可能是，我在我尝试从 ListActivity 使用的主要活动中使用静态字段。

ListActivity 得到一个 Parcelable，其中包含一个包含图像、名称和 ID 的 3 个 ArrayList 的类。该 parcable 包含来自所有 3 种方法的所有选定用户。希望这是足够的上下文，不知道我还能说什么，因为我不知道该日志与什么相关。

**编辑2：** 在另一次搜索后发现了[这个](https://stackoverflow.com/questions/7819690/webcoreglue-android)问题，它为问题提供了具体的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:47:13.730

有些东西超出了范围，它的析构函数被调用了。搜索“实物已被删除”。仅显示了屏幕旋转工件的特定解决方案和用于覆盖某些对象析构函数的 hack。将打印语句放在对象析构函数中以查看调用的内容和时间是很有教育意义的。

# android - J2ME 到 Android 端口 | 如何处理线程？

> ID：10675958
> 
> 赞同：1
> 
> 时间：2012-05-20T18:20:42.330
> 
> 标签：android, multithreading, java-me, midp

我编写了一个 J2ME 应用程序，在其中实例化并在 MIDlet 构造函数中启动了线程。
【线程需要在MIDlet启动时启动，并且会在MIDlet的整个生命周期中持续运行】

现在我决定将该应用程序移植到 android 平台。并写了一个Activity类。

现在在Android中哪个地方最好实例化这个线程？

1）Android中的构造函数不是方式

2) OnCreate() 被多次调用。比如屏幕方向改变等。

3) 不能在事件中声明它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:46:52.963

取决于你需要在你的线程中做什么。

您**可以**在第一个 Activity 的 onCreate() 中实例化它，然后将其存储在静态（类）变量中。然后，如果您的 Activity 由于方向更改而被破坏并重新创建，`onCreate()`您可以检查该变量是否仍指向活动线程，并根据需要实例化它或不实例化它。

另一种选择是在操作系统调用销毁您的活动之前返回对线程的引用`onRetainNonConfigurationInstance()`（如果由于方向更改而要重新创建它）。操作系统重新创建您的活动后，`onCreate()`您可以调用`getLastNonConfigurationInstance()`以恢复线程。当操作系统销毁并重新创建它们时，这是一种在 Activity 实例之间传递长期存在的对象（如线程、连接等）的简单方法。

**注意**nonConfigurationInstance 的东西在 4.0 中被弃用了，你可以使用 Fragments 来做同样的事情。

# qt - Qt Creator 中没有资源文件

> ID：10675960
> 
> 赞同：5
> 
> 时间：2012-05-20T18:20:54.470
> 
> 标签：qt, qt-creator, qresource

我正在使用 Qt Creator，并且我创建了一个资源文件。当我在设计器模式下尝试访问资源文件时，它说资源根为空。

如何指定资源目录？如果它在同一个文件夹中，为什么它不会出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:03:57.150

为了使用资源文件，即使它位于同一文件夹中，您也必须将资源文件添加到 Qtcreator 中的项目中才能使用它。只需右键单击 QtCreator 中项目树视图上的项目名称，然后单击添加现有文件，然后添加资源文件，现在您可以在项目中使用您的资源。

通过这种方式添加它，它将被添加到您的项目中。或者您可以注册资源以明确使用

```
 QResource::registerResource("/path/yourresource.rcc"); 
```

您可以使用`:/`前缀或`qrc:///`.

例如：`qrc:///files/yourfile`将带您进入`yourfile`您`files`添加的`resource`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-12T15:51:58.490

对于那些来这里寻找**如何在 OS X 上的 Qt Creator 中访问 .qrc 资源文件的人**，请尝试首先在 Qt Designer 中打开您的 UI 文件（不是 Qt Creator）。当您在 Qt Designer 中查找资源时，您可以选择添加新的 .qrc 资源文件（对我来说，Qt Creator 中不存在此选项）。添加 .qrc 资源文件，在 Qt Creator 中保存、关闭并重新打开。资源文件现在可用于所有图像。

# c# - Sp_msforeachtable 仅返回 C# 中的第一个表

> ID：10675964
> 
> 赞同：1
> 
> 时间：2012-05-20T18:21:33.347
> 
> 标签：c#, sql-server, sp-msforeachdb

我想用 sp_msforeachtable 列出数据库的表。我在 SSMS 中做得很好（我在 sp_list2 存储过程中写了它），但是当我想在 c# 中使用这个存储过程时，它只是在列表框中返回数据库的第一个表！

C#中的代码：

```
 SqlCommand cmd = cnn.CreateCommand();
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "sp_list2";
            SqlParameter inparam = cmd.Parameters.Add("@dbname", SqlDbType.NVarChar);
            inparam.Direction = ParameterDirection.Input;
            inparam.Value = "DB";
            SqlDataReader rdr = cmd.ExecuteReader();
            dap.SelectCommand = cmd;
            while (rdr.Read())
            {
              listBox1.Items.Add(rdr[0]);//this is tables name
            } 
```

我的存储过程：

```
create procedure sp_list2(@dbname nvarchar(max))
as
declare @query as nvarchar(max)
--declare @dbname as nvarchar(max)
SET @query=''
SET @query =@query + @dbname + '..sp_msforeachtable '' select ''''?'''' as ''''Table'''',           count(*) as ''''Rows'''' from ? ''' 
EXEC sp_executesql @query 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:45:02.513

您需要放入`rdr.NextResult();`循环`for`中：

```
while (rdr.Read())
{
    listBox1.Items.Add(rdr[0]);//this is tables name
    rdr.NextResult();
} 
```

`sp_MsForEachTable`返回多个结果集（每个表一个），因此`NextResult`当没有更多行可从当前结果集读取时，您必须使用移动到下一个结果集。

但是，看起来您正在尝试获取每个表中的行数，您也可以在只返回一个结果集的查询中执行此操作：

```
select t.name, p.rows from sys.tables t, sys.partitions p
where t.object_id = p.object_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:49:15.537

考虑从而`sys.tables`不是查询`sp_msforeachtable`：

```
select name from [DbName].sys.tables 
```

这将返回单个行集中的所有表。

# c - ncurses：窗口颜色不起作用

> ID：10675965
> 
> 赞同：2
> 
> 时间：2012-05-20T18:21:45.830
> 
> 标签：c, unix, command-line, colors, ncurses

我自己找到了解决方案：refresh `win`after `stdscr`.

* * *

我想在蓝屏中有一个白色窗口，我使用以下代码进行了尝试：

```
initscr();
WINDOW *win = newwin(10, 10, 10, 10);

start_color();
init_pair(1, COLOR_BLACK, COLOR_BLUE);
init_pair(2, COLOR_BLACK, COLOR_WHITE);

wbkgd(stdscr, COLOR_PAIR(1));
wbkgd(win, COLOR_PAIR(2));
wrefresh(win);
refresh(); 
```

但我只得到一个完全蓝屏。怎么了？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T13:14:00.563

解决方案：刷新窗口后`stdscr`：

```
refresh();
wrefresh(win); 
```

代替：

```
wrefresh(win);
refresh(); 
```

# vb.net - 如何：从一个带有退格键的文本框中删除一个字符，它将从另一个文本框中删除多个字符

> ID：10675967
> 
> 赞同：0
> 
> 时间：2012-05-20T18:22:02.927
> 
> 标签：vb.net

```
Private Sub txtInput_KeyPress(ByVal sender As Object, ByVal e As    System.Windows.Forms.KeyPressEventArgs) Handles txtInput.KeyPress

Dim len As Integer

 len = txtCode.Text.Length

If (Asc(e.KeyChar) = 65 Or Asc(e.KeyChar) = 97) Then

        txtCode.Text += "Acer" & " "

    ElseIf (Asc(e.KeyChar) = 66 Or Asc(e.KeyChar) = 98) Then
        txtCode.Text += "King" & " "

    ElseIf (Asc(e.KeyChar) = 8) Then
        Try
            txtCode.Text = txtCode.Text.Remove(len - 4, len)
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
     End If

     End Sub 
```

我没有发布图片的权限，所以请考虑一下

我想从第一个文本框中删除“b”，我应该从第二个文本框中删除“King”每个单词的长度相同“Acer”“King”长度始终为 4

但我收到以下错误

“索引和计数必须引用字符串中的位置。参数名称：计数”

我还尝试用另一个变量dim c替换“len-4”作为整数=len-4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:31:55.577

```
textbox2.text = left(textbox2.text,len(textbox2.text)-4) 
```

这基本上从`textbox2`.

# networking - 如何在另一台计算机上使用 DNS 操作 Active Directory？

> ID：10675977
> 
> 赞同：1
> 
> 时间：2012-05-20T18:23:24.440
> 
> 标签：networking, active-directory, dns

是否可以在 DNS 服务器在另一台计算机上运行时操作 Active Directory？或者它应该完全安装在运行 Active Directory 的计算机上？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:33:23.723

不，这是不可能的。DNS 区域是 DNS 域名空间的连续部分，DNS 服务器对其具有权限或具有权威性。在所有 DNS 中，DNS 都是权限级别的注册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:40:01.150

如果网络上没有 DNS，则无法安装 Active Directory，因为 Active Directory 使用 DNS 作为其定位服务。

但是，您可以单独安装 DNS，无需 Active Directory。如果您在域控制器上安装 DNS，您还可以选择是否使用 Active Directory 为 DNS 提供存储和复制。使用 Active Directory 进行存储和复制提供了一些好处，例如：提高容错性、安全性、更轻松的管理、更有效地复制大型区域。

查看[为 Active Directory 设置 DNS](http://technet.microsoft.com/en-us/library/cc959341.aspx)。

# ios - 如何在 iOS 中使用 Admob Phonegap 插件

> ID：10675978
> 
> 赞同：0
> 
> 时间：2012-05-20T18:23:29.523
> 
> 标签：ios, cordova, admob

我正在使用[这个在 iOS 上运行的 Phonegap 的 Admob 插件，](https://github.com/smithimage/phonegap-plugins/tree/master/iPhone/AdMob)如下所示：

```
window.plugins.AdMob.createBanner({"siteId":"my-site-id"});
window.plugins.AdMob.loadBanner();
// move banner to make it appear
window.plugins.AdMob.moveBanner({"positionX":0,"positionY":410}); 
```

它实际上正在工作。问题是这导致我的应用程序消耗大量内存，并且根据我从 iTunesConnect 获得的 Apple 崩溃报告，该应用程序在设备上崩溃。

你能帮我理解如何使用这个插件吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:06:21.580

您是否在任何地方使用 deleteBanner: 方法？我认为那里可能存在内存泄漏。该插件看起来像是从其超级视图中删除了 adBanner 属性并将其删除，但我认为它可能还需要：

*   设置`delegate`为`adBanner`_`nil`
*   释放`adBanner`（您可以通过查看保留计数来仔细检查`adBanner`）。我认为 UIViewController 会`dealloc`自动调用`removeFromSuperView`: 但是`deleteBanner`: 可能不会那样做？

# php - http post - 安卓应用程序

> ID：10675980
> 
> 赞同：0
> 
> 时间：2012-05-20T18:23:45.830
> 
> 标签：php, android, servlets, http-post

我应该连接到服务器以使用 http post 通过 php 脚本从数据库中获取数据。我正在为 Android 制作应用程序。你能告诉我一个可以直接下载源代码尝试的网站吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:36:58.763

我可以在下面为您提供样本。

这是您从数据库中获取信息所需的 PHP 代码

```
<?php

/*
* Following code will list all the products
*/

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all products from products table
$result = mysql_query("SELECT *FROM products") or die(mysql_error());

// check for empty result
if (mysql_num_rows($result) > 0) {
// looping through all results
// products node
$response["products"] = array();

while ($row = mysql_fetch_array($result)) {
    // temp user array
    $product = array();
    $product["pid"] = $row["pid"];
    $product["name"] = $row["name"];
    $product["price"] = $row["price"];
    $product["description"] = $row["description"];
    $product["created_at"] = $row["created_at"];
    $product["updated_at"] = $row["updated_at"];

    // push single product into final response array
    array_push($response["products"], $product);
}
// success
$response["success"] = 1;

// echoing JSON response
echo json_encode($response);
} else {
// no products found
$response["success"] = 0;
$response["message"] = "No products found";

// echo no users JSON
echo json_encode($response);
}
?> 
```

根据您的需要更改代码

然后是android的代码

```
public class AllProductsActivity extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> productsList;

// url to get all products list
private static String url_all_products = "http://10.0.2.2/android_connect/get_all_products.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_PRODUCTS = "products";
private static final String TAG_PID = "pid";
private static final String TAG_NAME = "name";

// products JSONArray
JSONArray products = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_products);

    // Hashmap for ListView
    productsList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    EditProductActivity.class);
            // sending pid to next activity
            in.putExtra(TAG_PID, pid);

            // starting new activity and expecting some response back
            startActivityForResult(in, 100);
        }
    });

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received 
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AllProductsActivity.this);
        pDialog.setMessage("Loading products. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                products = json.getJSONArray(TAG_PRODUCTS);

                // looping through All Products
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_PID);
                    String name = c.getString(TAG_NAME);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_PID, id);
                    map.put(TAG_NAME, name);

                    // adding HashList to ArrayList
                    productsList.add(map);
                }
            } else {
                // no products found
                // Launch Add New product Activity
                Intent i = new Intent(getApplicationContext(),
                        NewProductActivity.class);
                // Closing all previous activities
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AllProductsActivity.this, productsList,
                        R.layout.list_item, new String[] { TAG_PID,
                                TAG_NAME},
                        new int[] { R.id.pid, R.id.name });
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

} 
```

}

# php - MYSQL PHP 查询从一个表中获取数据到另一个表

> ID：10675983
> 
> 赞同：0
> 
> 时间：2012-05-20T18:24:34.457
> 
> 标签：php, mysql

我需要根据一张表过滤数据，但我不知道 php mysql 中 select from 函数的正确用法。下面的代码显示了我正在尝试做的事情，但我认为您可以使用多个 SELECT。

```
$query_Student = "SELECT Project_Title, Project_Lecturer FROM projects WHERE Project_id = 
 (SELECT Proj_id FROM project_course WHERE Cour_id = (SELECT Course_id from courses WHERE     
Code = (SELECT Course FROM users WHERE Username = ".$_SESSION['MM_Username']."))" 
```

任何人都可以对我需要写的内容提供任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:08:29.277

你想要做什么对我来说并不完全清楚，但要使你的查询工作，你需要在 周围加上单引号`$_SESSION['MM_Username']`，就像 gogowitsch 已经说过的那样。

还缺少另一个关闭括号。所以你的查询应该是这样的：

```
$query_Student = "SELECT Project_Title, Project_Lecturer FROM projects WHERE Project_id = 
 (SELECT Proj_id FROM project_course WHERE Cour_id = (SELECT Course_id from courses WHERE     
Code = (SELECT Course FROM users WHERE Username = '".$_SESSION['MM_Username']."')))" 
```

**但...**

这不是一个写得很好的查询。

我现在只是在猜测，但也许这就是你要找的：

```
SELECT 
p.Project_Title, 
p.Project_Lecturer 
FROM projects p
INNER JOIN project_course pc ON p.Project_id = pc.Proj_id
INNER JOIN courses c ON pc.Cour_id = c.Course_id
INNER JOIN users u ON c.Code = u.Course
WHERE u.Username = 'yourUserName'; 
```

If not, show us the tables you are using (do a `SHOW CREATE TABLE projects;` and so on for every table you are using and post it here) and maybe what output you expect, then we can really help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:37:46.147

您可能需要在用户名周围添加引号。可以`$_SESSION['MM_Username']`是字符串吗？

# java - 为什么接口比抽象类慢

> ID：10675984
> 
> 赞同：1
> 
> 时间：2012-05-20T18:24:39.270
> 
> 标签：java

> **可能重复：**
> [为什么接口方法调用比具体调用慢？](https://stackoverflow.com/questions/6839943/why-are-interface-method-invocations-slower-than-concrete-invocations)

> 由于额外的间接性，接口比抽象类慢。

请解释一下额外间接的详细含义。

# android - Android：自动完成多个输入

> ID：10675986
> 
> 赞同：1
> 
> 时间：2012-05-20T18:24:50.960
> 
> 标签：android, autocomplete

对于我的应用程序，我试图让自动完成建议框弹出文​​本框中的多个输入。

例如，假设输入是“Alice, Bob, Charlie”。用户开始输入“Alice”并从建议中选择名字，用“Alice,”更新文本视图。然后用户输入“Bob”，建议框再次弹出，用户点击名字，文本视图更新为“Alice, Bob,”。等等。

Android 中的默认 AutoCompleteTextView 似乎不支持那种为每个输入弹出建议框的功能，仅适用于第一个输入。如何为每个输入弹出建议框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T17:52:41.300

好的，我想通了，必须使用 MultiAutoCompleteTextView 而不是 AutoCompleteTextView。

# mysql - 显示像 'year%' >=2010 这样的表格

> ID：10675987
> 
> 赞同：3
> 
> 时间：2012-05-20T18:24:57.140
> 
> 标签：mysql, sql-like

我有带有表名的数据库

```
year200801
year200802
year200803
year201010
year201101
year201203
year201204
year201205
.... 
```

现在我需要在哪里获取表格`year > date('Y')-2`。怎么做？

```
"show tables like 'year%' AND $year>='year2012';" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T18:29:40.040

哎呀，这是一个不幸的模式。从长远来看，您最好取消这些与日期相关的表名。但是，您可以从以下位置获取它`information_schema`：

```
SELECT
  TABLE_NAME
FROM information_schema.TABLES
WHERE
  TABLE_SCHEMA='your_database_name'
  /* LEFT() should be faster than LIKE */
  AND LEFT(TABLE_NAME, 4)='year'
  /* The 4 char substring in the middle of the table name is >= 2 years ago */
  /* Use YEAR(NOW()) to get the current year */
  AND MID(TABLE_NAME, 5, 4) >= (YEAR(NOW()) - 2) 
```

### 更新：

要显示 2 年前和当前年份之间的表格，请使用：

```
 AND MID(TABLE_NAME, 5, 4) BETWEEN (YEAR(NOW()) - 2) AND YEAR(NOW()) 
```

### 更新 2 这应该完全按照您的要求工作：

```
mysql> SELECT yearstring, MID(yearstring, 5, 4) BETWEEN (YEAR(NOW()) - 2) AND YEAR(NOW()) FROM tmp;
+------------+-----------------------------------------------------------------+
| yearstring | MID(yearstring, 5, 4) BETWEEN (YEAR(NOW()) - 2) AND YEAR(NOW()) |
+------------+-----------------------------------------------------------------+
| year201001 |                                                               1 |
| year201005 |                                                               1 |
| year201205 |                                                               1 |
| year201301 |                                                               0 |
| year201112 |                                                               1 |
| year201304 |                                                               0 |
| year200912 |                                                               0 |
| year200901 |                                                               0 |
+------------+-----------------------------------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T18:56:08.200

```
Show tables LIKE 'year201%' 
```

将列出 2010-2019 范围内的所有表，如果您有 202x：

```
Show tables LIKE 'year202%' 
```

# nlog - nlog 中的时差

> ID：10675991
> 
> 赞同：2
> 
> 时间：2012-05-20T18:25:32.053
> 
> 标签：nlog

我想更改 nlog 布局，以便显示两个条目之间的时间。这样的布局可能吗？

这是我现在的输出，如果在时间旁边有自之前进入以来经过的秒数，那就太好了。

```
 2012-05-20 19:18:41.0924|INFO|HashMatcher.LocalMatcherControl|99 archives discovered
    2012-05-20 19:18:56.5267|INFO|HashMatcher.LocalMatcherControl|memory usage BEFORE loading samples 283.06 Mb
    2012-05-20 19:18:56.5267|INFO|HashMatcher.LocalMatcherControl|performing sample scan
    2012-05-20 19:19:08.9131|INFO|HashMatcher.LocalMatcherControl|memory usage BEFORE creating progress 285.43 Mb
    2012-05-20 19:20:16.5804|INFO|HashMatcher.LocalMatcherControl|skipped progress 0
    2012-05-20 19:20:17.6100|INFO|HashMatcher.LocalMatcherControl|memory usage BEFORE sorting progress 205.06 Mb 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:02:02.870

我认为 NLog 中没有内置任何东西可以“免费”提供此功能，但是您应该能够使用自定义[LayoutRenderer](http://nlog-project.org/wiki/Layout_renderers)自己轻松实现它。[你可以在这里](https://github.com/jkowalski/NLog/tree/master/src/NLog/LayoutRenderers)找到很多例子（在 NLog 的源代码库中）。

你最终可能会得到这样的东西（我既没有编译也没有测试过）：

```
[LayoutRenderer("ElapsedTime")]
[ThreadAgnostic]    
public class ElapsedTimeLayoutRenderer : LayoutRenderer    
{        
  DateTime? lastTimeStamp;

  public ElapsedTimeLayoutRenderer()
  {            
  }        

  protected override void Append(StringBuilder builder, LogEventInfo logEvent)        
  {            
    var stamp = logEvent.TimeStamp;

    var span = stamp - lastTimeStamp.HasValue ? lastTimeStamp : stamp;

    builder.Append(stamp.ToString());        

    lastTimeStamp = stamp;
  }    
} 
```

实质上，布局渲染器会记住记录的最后一条消息的时间戳。此布局渲染器的值是记录的最后一条消息与当前消息的时间戳之间的差异。这个布局渲染器可能会使用一些增强功能。如果您查看 DateTime，您会发现它还具有 CultureInfo 和 Format 的属性。根据您的需要，您甚至可能希望提供选项以提供自应用程序启动以来经过的时间（或至少自记录第一条消息以来）。

此外，由于正在修改成员变量 (lastTimeStamp)，因此可能应该使用 lock 语句对其进行保护。

希望这将帮助您获得所需的功能。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-16T13:15:41.043

```
[LayoutRenderer("elapsedtime")]
[ThreadAgnostic]
public class ElapsedTimeLayoutRenderer : LayoutRenderer
{
  Stopwatch sw;

  public ElapsedTimeLayoutRenderer()
  {
    this.sw = Stopwatch.StartNew();
  }

  protected override void Append(StringBuilder builder, LogEventInfo logEvent)
  {
    builder.Append(this.sw.ElapsedMilliseconds.ToString().PadLeft(6));
    this.sw.Restart();
  }
} 
```

**然后在程序开始时**注册这个渲染器

 **```
ConfigurationItemFactory.Default.LayoutRenderers.RegisterDefinition("elapsedtime", typeof (ElapsedTimeLayoutRenderer)); 
```

*笔记*

在运行上面的配置行之前，不应该发生日志记录，所以任何静态记录器成员都喜欢

```
static Logger logger = LogManager.GetCurrentClassLogger(); 
```

**在此行之前不允许**使用此渲染器。如果有人知道如何在配置中配置渲染器，请评论或编辑。**

# c# - 检测到 Callbackoncollecteddelegate 错误

> ID：10675992
> 
> 赞同：0
> 
> 时间：2012-05-20T18:25:53.910
> 
> 标签：c#, delegates, callback

我创建了一个需要登录并连接到数据库的应用程序 (C#)。该应用程序由多个用户控件组成，这些控件是主窗体的一部分。

```
namespace aNameSpace
{
    public partial class Login : UserControl
    {
        public delegate void LoginPressed(MySqlConnection connection, string userName);  
        public event LoginPressed successfulLogin;
        ...
        private void button_Login_Click(object sender, EventArgs e)
        {
            ...
            successfulLogin(connection, textBox_UserName.Text); 
        } 
```

我将此控件添加到主窗体并使用 LoginPressed 事件。

```
public partial class form_Main : Form
{
    public form_Main()
    {            
        ...

        Login loginControl = tabControls[login] as Login;
        loginControl.successfulLogin += new Login.LoginPressed(login_successfulLogin);
    } 
```

它成功登录并且工作正常，直到我关闭应用程序，然后我得到这个异常。

> 检测到 CallbackOnCollectedDelegate 消息：对类型为“System.Windows.Forms!System.Windows.Forms.NativeMethods+WndProc::Invoke”的垃圾收集委托进行了回调。这可能会导致应用程序崩溃、损坏和数据丢失。将委托传递给非托管代码时，托管应用程序必须使它们保持活动状态，直到保证它们永远不会被调用。

我一直在对这个错误进行一些研究，我认为它与被垃圾收集的委托或委托的生命周期有关......我已经尝试了很多东西，但我似乎无法摆脱这个错误。有想法该怎么解决这个吗？

# apache - 通过 cgi 运行 amixer

> ID：10675997
> 
> 赞同：0
> 
> 时间：2012-05-20T18:26:35.773
> 
> 标签：apache, bash, cgi, alsa

我正在尝试`amixer set Master 1+`通过 Web 界面运行 shell 命令（例如）。我已经在目标服务器（Ubuntu 12.04，桌面）上设置了 apache，并用一个简单的 Hellow 世界测试了设置！脚本。一切正常，但如果我尝试这样做，`amixer`我不会得到任何结果。我什至没有得到任何输出，但如果我尝试将输出打印到创建文件的文件中。

我不确定这是配置问题还是缺少命令问题。

我怎样才能做到这一点？

**编辑：**
我在这里附上`/var/log/apache2/error.log`我认为相关的部分

> amixer: Mixer attach default error: No such file or directory [Sat May 26 17:54:05 2012] [error] [client 192.168.1.103] 文件不存在：/var/www/favicon.ico

很抱歉回复晚了，由于意外的维修工作，我不得不离开家几天。