# StackOverflow 问答 10038000-10038999

# c# - 基于 LAN 的应用程序 - 如何在没有静态 IP 的情况下进行连接？

> ID：10038000
> 
> 赞同：0
> 
> 时间：2012-04-06T00:59:55.880
> 
> 标签：c#, networking, ip, lan

我正在开发一个基于 LAN 的数据库应用程序。它涉及一个中央“服务器”应用程序来容纳数据库，以及许多访问它的“客户端”应用程序。

“服务器”将是一个简单的基于 C# 的 HTTP 服务器，它响应 GET 和 POST 请求。但是，由于它被设计为能够从网络上的任何笔记本电脑上运行，我想知道如何在不知道 IP 地址的情况下建立客户端和服务器之间的连接。

我想我可以 ping 从 192.168.0.0 到 192.168.0.255 的每个 IP 地址，然后测试那些响应的地址，看看是否有我的服务器。但只有在没有更好的方法的情况下，我才会这样做。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:10:13.547

许多这些类型的发现服务通过在子网广播地址（对于 192.168.0.0/24 它将是 192.168.0.255）上放置某种信标或通过在多播地址上放置信标来运行。

多播特别有趣，因为在正确配置的网络中，它允许主机甚至跨子网找到服务。路由器和交换机通常不会跨子网边界转发广播数据包，但多播数据包会。

信标中将包含信息，例如运行服务的端口、服务类型、开始使用服务所需的任何信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:10:51.030

为了让你朝着正确的方向前进，你应该做的是让数据库服务器在指定的端口上运行。然后从客户端（需要连接到数据库的系统）向该端口发送[广播。](http://blog.eviac.com/2010/12/network-broadcasting-with-c.html)当数据库服务器收到此消息时，它将能够响应发送者，允许发生握手。

当然，您需要验证数据库服务器的真实性（以确保其安全，除非您对此不担心）。这可以简单到让客户端显示 4 个数字，然后需要将这些数字输入数据库，以便数据库可以将 4 个数字发送回客户端，证明它是正确的计算机（iTunes 遥控器如何工作），或者您可以使用证书（但这对我来说太复杂了，无法正确涵盖）。

之后，两台计算机将知道彼此的 IP，然后您就设置好了！

# http - 浏览器的永久 HTTP 重定向

> ID：10038001
> 
> 赞同：2
> 
> 时间：2012-04-06T01:00:49.507
> 
> 标签：http, browser

如果您设置了永久 HTTP 重定向（301 状态），那么浏览器是否仍会每次访问旧链接并获得重定向响应，或者他们会更好地了解并在执行请求之前在本地更改请求 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:04:15.613

不能保证，但他们应该缓存它，并且在实践中经常这样做。

从[规格](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.2)：

> 请求的资源已被分配一个新的永久 URI，并且任何将来对该资源的引用都应该使用返回的 URI 之一。如果可能，具有链接编辑功能的客户端应该自动将对 Request-URI 的引用重新链接到服务器返回的一个或多个新引用。除非另有说明，否则此响应是可缓存的。

# c# - LINQ 选择集合中不同类型的项目

> ID：10038009
> 
> 赞同：1
> 
> 时间：2012-04-06T01:04:14.880
> 
> 标签：c#, linq

如何实现 LINQ 从 A 类型的一个对象集合中提取 Guid，以便他们可以从 B 类型的另一个对象集合中排除这些 Guid。对象 A 和对象 B 都有一个名为“ID”的 Guid 字段。

我有以下内容：

1.  `ObservableCollection<Component> component` 组件有一个名为`ID`type的字段`Guid`
2.  `ObservableCollection<ComponentInformation> ComponentInformationCollection`ComponentInformation 有一个名为`ID`type的字段`Guid`

我的实现：

```
component =>
{
    if (component != null)
    {
        var cancelledComponents = new List<ComponentInformation>();
        foreach (Component comp in component)
        {
            cancelledComponents.Add(new ComponentInformation() { ID = comp.ID });
        }
        this.ComponentInformationCollection.Remove(cancelledComponents);
    }
}); 
```

我相信有一个更优雅的解决方案，我一直在努力解决，但我一直遇到的问题是创建一个“新的 ComponentInformation”，这样类型就不会给我错误。

====== 最终解决方案 =======

```
var cancelledComponentIDs = new HashSet<Guid>(component.Select(x => x.ID));
this.ComponentInformationCollection.Remove(
     this.ComponentInformationCollection.Where(x => cancelledComponentIDs.Contains(x.ID)).ToList()); 
```

谢谢：Jason - 我用这个作为我最终解决方案的模板（如下所列）。Servy - 虽然我可以使用比较器，但我认为对于这种特殊情况，比较器不是必需的，因为它是一次性使用类型的情况。

ComponentInformationCollection 是一个 Silverlight DependencyProperty，它会在更改时触发 INotifyChangedEvent（MVVM 模式），因此上述解决方案最适合我的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T01:10:44.703

我会这样做：

```
var ids = new HashSet<Guid>(
              component.Select(x => x.ID)
          );
var keepers = ComponentInformationCollection.Where(x => !ids.Contains(x.ID)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:39:32.930

如果`Component`尚未定义使用 ID 进行比较的 Equals 和 GetHashCode，您可以定义如下比较器：

```
class ComponentComparer : IEqualityComparer<Component>
{
  public int Compare(Component a, Component b)
  {
    return a.ID.CompareTo(b.ID);
  }

  public int GetHashCode(Component a)
  {
    return a.ID.GetHashCode();
  }
} 
```

然后你可以使用：

```
var result = componentCollectionA.Except(componentCollectionB, new ComponentComparer()); 
```

（写在我的头上；可能需要稍作修改才能编译。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T01:46:47.100

LINQ 将允许您找到所需的 GUID，但 LINQ 序列通常是不可变的；您仍然需要使用某种循环来实际更改集合。诀窍是获取要删除的原始集合的正确实例。

实现一个相等/比较接口是一种方法，如果你需要在多个地方比较你的对象是否相等，那绝对是一种方法。如果您不想这样做，这应该可以满足您的需求：

```
var removeme = (from x in this.ComponentInformationCollection
               join y in component on x.ID equals y.ID
               select x).ToList();
removeme.ForEach(x => this.ComponentInformationCollection.Remove(x)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T01:27:06.383

大声思考（意味着我没有创建项目和类型并编译它），但是如何：

```
var cancelledComponents = component.Select(c=> new ComponentInformation() {ID = c.ID}).ToList();
cancelledComponents.ForEach(c => ComponentInformationCollection.Remove(c)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T01:46:02.067

有很多方法可以解决这个问题……这是一个非常简单的 Linq 语句，用于从集合中查询您要查找的语句。

```
var keep = typeAList.Where(a => typeBList.FirstOrDefault(b => a.ID == b.ID) == null); 
```

这是我放在一起演示它的小测试应用程序。

```
class Program
    {
        static void Main(string[] args)
        {
            List<TypeA> typeAList = new List<TypeA>();
            typeAList.Add(new TypeA() { ID = Guid.NewGuid() });
            typeAList.Add(new TypeA() { ID = Guid.NewGuid() });
            typeAList.Add(new TypeA() { ID = Guid.NewGuid() });

            List<TypeB> typeBList = new List<TypeB>();
            typeBList.Add(new TypeB() { ID = typeAList[0].ID });
            typeBList.Add(new TypeB() { ID = typeAList[1].ID });

            //this is the statement
           var keep = typeAList.Where(a => typeBList.FirstOrDefault(b => a.ID == b.ID) == null);
        }
    }

    class TypeA
    {
        public Guid ID { get; set; }
    }

    class TypeB
    {
        public Guid ID { get; set; }
    } 
```

# android - 带有片段的布局设置

> ID：10038011
> 
> 赞同：2
> 
> 时间：2012-04-06T01:04:42.707
> 
> 标签：android, android-layout, android-fragments

我刚刚开始将我的应用程序转换为使用片段。我有一个 ListView 活动和一个“详细信息”活动，用户在 Listview 中选择一个项目后会转到该活动。我已经成功地将它们转换为片段，但是，我在每个活动的布局中都有一个标题。ListView 在标题中有一个“重新加载”图标，但细节中的标题没有。

当我以纵向查看应用程序时，一切正常，但我在“layout-land”文件夹中有一个布局，其中包含两个片段，因此，在横向查看时，您会看到 ListView 和“详细信息”视图。问题是标题布局显示在两个片段中。

我的问题是将我的布局覆盖到新片段设置的最佳实践是什么？我在想，不是在每个片段的布局中都有标题，而是将它添加到包含两个片段的布局中？

抱歉，如果这只是一个明显的问题，我仍在尝试围绕整个片段范式进行思考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:28:03.883

这就是为什么推荐使用 ActionBar 的原因。如果您在应用程序中包含一个带有刷新按钮的操作栏，用户将知道（并学习）使用该按钮。onClick 实现是您的全部，您可以相应地刷新列表适配器。无需在所有控件中构建这些 UI 元素。

# android - Eclipse：跨平台Phonegap文件夹结构中的svn：externals？

> ID：10038015
> 
> 赞同：0
> 
> 时间：2012-04-06T01:05:31.900
> 
> 标签：android, eclipse, svn, cordova

在 Eclipse（在 Windows 上）中，我为 Phonegap 创建了一个跨平台文件夹结构：

```
--phonegap_android 
   --assets
     --www         (symlink/junction to 'src')
       ...
--phonegap_ios   
    ...
--src
    index.html 
```

这是我为使其正常工作所做的工作：

*   基于该`phonegap-android` 文件夹在 Eclipse 中创建了一个 Android 项目。
*   `assets/www`为 ' ' 文件夹建立了一个连接以与 ' ' 链接`src`（使用 Sysinternals 命令）
*   为整个项目（具有 android、ios 和 src 不同文件夹的父项目）创建了一个 svn 存储库。

我现在可以运行该应用程序，但是将项目提交到 svn 时遇到问题。

“ `www`”文件夹是一个连接文件夹，因此当对该文件夹进行更改时，我希望该文件夹提交到*真正的*源文件夹：“ `src`”。

我尝试了不同的方法：

*   在 ' '上设置 svn:ignore`assets`以忽略 ' `www`'，但是当我在 Eclipse 中提交 android-project 时，当然 没有提交*任何内容。*`www`

*   在 ' '上设置 svn:externals`assets`以将 ' ' 定义`www`为 的外部`svn://myproject/src`，但它仍然尝试将所有内容提交到其中，`assets/www`并且我收到错误“没有版本控制的父目录”。

任何想法如何让`www`文件夹未提交，但同时让`src`文件夹提交到 svn 存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:19:17.633

迪伦，

跟随 svn:externals 将起作用。

*   创建文件夹“phonegap_android”
*   在“phonegap_android”下创建文件夹“资产”
*   将它们提交到 svn 存储库 'svn://myproject/phonegap_android'
*   现在对于“phonegap_android”文件夹，设置 svn:externals 如下
    *   '../src assets/www'（如果您的 src svn 路径与您的情况下的 phonegap-android svn://myproject/src 处于同一级别）
*   在使用 tortoise svn 的 Windows 上，它会让你提交带有 svn:external 更改的“phonegap_android”文件夹。
*   采取 svn 更新，你就完成了。

从今以后，无论您提交到 phonegap_android/asset/www 文件夹，它都将提交到 src 文件夹（svn://myproject/src）

# asp.net-mvc-3 - 如何在 MVC 3 组合框中显示文本并绑定到主键

> ID：10038023
> 
> 赞同：1
> 
> 时间：2012-04-06T01:06:32.253
> 
> 标签：asp.net-mvc-3, telerik-mvc

在 MVC3 应用程序中，如何显示文本（例如产品名称）但同时将值绑定到其主键（例如产品 ID）。这是我的 html 组合框

```
@(Html.Telerik().ComboBoxFor(model => model.ProductId)
        .AutoFill(true)
        .HighlightFirstMatch(true)
        .DataBinding(binding => binding.Ajax().Select("GetProductsyKeyword", "Product"))) 
```

GetProductsyKeyword 方法返回：

```
return new JsonResult { Data = new SelectList(Products, "Id", "Description") }; 
```

上面的代码对于新创建的产品是可以的，但在从数据库加载和显示数据时不行，因为组合框不知道如何显示文本。请帮忙！

# jquery - 动画后的jQuery切换类不起作用

> ID：10038024
> 
> 赞同：-1
> 
> 时间：2012-04-06T01:06:34.297
> 
> 标签：jquery, class, jquery-animate, attr

这是我想要发生的事情：

用户应该单击一个链接/按钮，该链接/按钮将为当前未显示在屏幕上的 div 设置动画，同时为屏幕外显示的 div 设置动画。

问题：

我的代码将为进出的 div 设置动画，但不会将类从`.notcurrent`to更改为`.current`反之亦然。

**HTML：**

```
<button id="R">Click 1</button>
<button id="G">Click 2</button>
<button id="B">Click 3</button>

<div id="box">
    <div id="one" class="current">
    </div>
    <div id="two" class="notcurrent">  
    </div>
    <div id="three" class="notcurrent">
    </div>
</div> 
```

**JS：**

```
var panel1 = $('#one');
var panel2 = $('#two');
var panel3 = $('#three');

var current = $('.current');
var notcurrent = $('.notcurrent');

var cTop = current.css('top');
var nTop = notcurrent.css('top');

var button1 = $('#R');
var button2 = $('#G');
var button3 = $('#B');

button1.click(function() {
    if (panel1.css('top') === '500px') {
        current.animate({
            top: "500px"
        }).attr("class", notcurrent);

        panel1.animate({
            top: "0px"
        }).attr("class", current);
    }
});

button2.click(function() {
    if (panel2.css('top') === '500px') {
        current.animate({
            top: "500px"
        }).attr("class", notcurrent);

        panel2.animate({
            top: "0px"
        }).attr("class", current);
    }
});

button3.click(function() {
    if (panel3.css('top') === '500px') {
        current.animate({
            top: "500px"
        }).attr("class", notcurrent);

        panel3.animate({
            top: "0px"
        }).attr("class", current);
    }
}); 
```

现场示例：http: [//jsfiddle.net/bz6cH/20/](http://jsfiddle.net/bz6cH/20/)

有人可以找出导致问题的原因以及是否有更好的方法来编写我想要的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:14:14.067

这就是你想要的？

```
var panel1 = $('#one');
var panel2 = $('#two');
var panel3 = $('#three');

var current = $('.current');
var notcurrent = $('.notcurrent');

var cTop = current.css('top');
var nTop = notcurrent.css('top');

var button1 = $('#R');
var button2 = $('#G');
var button3 = $('#B');

button1.click(function() {
    if (panel1.css('top') === '500px') {
        $('.current').animate({
        top: "500px"
        }).attr("class", "notcurrent");

        panel1.animate({
        top: "0px"
        }).attr("class", "current");
    }
});

button2.click(function() {
    if (panel2.css('top') === '500px') {
        $('.current').animate({
        top: "500px"
        }).attr("class", "notcurrent");

        panel2.animate({
        top: "0px"
        }).attr("class", "current");
    }
});

button3.click(function() {
    if (panel3.css('top') === '500px') {
        $('.current').animate({
        top: "500px"
        }).attr("class", "notcurrent");

        panel3.animate({
        top: "0px"
        }).attr("class", "current");
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:20:38.757

I think there are a couple of things you have going on that are not working. First, you create a variable early on to hold the current div, but that's not re-evaluated in your click handlers; it's always going to refer to the same div. Secondly, you're adding the "current" class without removing the "notCurrent" class, and vice versa. Here's a corrected version:

[http://jsfiddle.net/33D8c/](http://jsfiddle.net/33D8c/)

# objective-c - 使用 Graph API 将视频上传到 Facebook 时如何指定标签

> ID：10038025
> 
> 赞同：0
> 
> 时间：2012-04-06T01:07:05.110
> 
> 标签：objective-c, facebook-graph-api

我可以通过 Objective-C 使用最新的 Graph API 成功地将视频上传到 Facebook。但是，我还想标记视频中的某些 Facebook 用户。我不能让它工作。

[FB 文档](http://developers.facebook.com/docs/reference/api/video/)说有一个“标签”字段，它接受包含 id 和 name 字段的对象数组。但是，如果我尝试以这种格式传递 JSON 字符串，则视频上传失败，没有任何有用的错误消息。我是否正确传递了标签数据？

这是失败的示例代码。当我从参数中删除@"tags" 字段或将tagStr 设置为空数组时，代码成功，即@"[]"。

```
NSString *tagStr = @"[{\"id\":\"<id-removed>\", \"name\":\"<name-removed>\"}]";
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                              data, @"video.mov",
                              @"video/quicktime", @"contentType",
                              titleStr, @"title",
                              descStr, @"description",
                              tagStr, @"tags",          // specifying tags fails
                              nil];

[facebook requestWithGraphPath:@"me/videos"
                     andParams:params
                 andHttpMethod:@"POST"
                   andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:43:14.857

你的参数字典应该是这样的，

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   videoData, @"video.mov",
                                   @"video/quicktime", @"contentType",
                                   @"Birthday wishes", @"title",
                                   @"via Birthday wishes", @"description",facebook.accessToken,@"access_token",
                                   nil]; 
```

视频发布后，您可以在 - (void)request:(FBRequest *)request didLoad:(id)result 中标记朋友，如下所示

`[APP.facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/tags/%@?access_token=%@", photoID, [ar_tID objectAtIndex:i], APP.facebook.accessToken]andParams:nilandHttpMethod:@"POST" andDelegate:self];`

# css - 如何为动态大小的居中图像扩展 Twitter Bootstrap 图像轮播

> ID：10038026
> 
> 赞同：9
> 
> 时间：2012-04-06T01:07:08.930
> 
> 标签：css, html, twitter-bootstrap, carousel, centering

我正在尝试扩展默认的 Bootstrap 图像轮播以支持动态大小的图像（最大 500x400），水平和垂直居中。此外，我想保持原始的标题布局，它将标题锚定到图像的底部，标题 div 完全延伸到图像上（但没有更多。）

我整理了一个小提琴，这是默认 Bootstrap 设置的一个相当干净的实现（在 css 部分的末尾只有 4 个额外的样式）：

[http://jsfiddle.net/rdugan/JFBFU/26/](http://jsfiddle.net/rdugan/JFBFU/26/)

通过在图像和标题周围添加一个环绕的“内联”div，并在父级上使用“文本对齐：中心”，我可以相当轻松地完成水平居中和标题要求。但是，垂直居中仍然是一个问题（一如既往。）

作为替代方案，我还尝试在不同的 div 上使用 'display: table-cell' （以及随附的居中样式），结果各不相同 - 在某些情况下，我搞砸了轮播功能，而在其他情况下，我完成了图像居中，但失去了标题锚定。

任何提示将不胜感激 - 很长一段时间以来一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T10:57:24.733

您可以使用以下规则水平居中：

> .carousel-inner { 文本对齐：居中；}
> 
> .carousel .item > img { display: inline-block; }

对于垂直对齐，你应该看看这个： http: [//www.student.oulu.fi/~lauriirai/www/css/middle/](http://www.student.oulu.fi/%7Elaurirai/www/css/middle/)

并且为了在调整大小时保持图像纵横比，您只需要更改图像的宽度或高度，而不是一次更改两者，它将按照原始比例调整大小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T08:54:30.007

直接在包含轮播项目的 div 上使用 CSS 背景属性：

在 *.html 中：

```
<div class="item" style="background-image: url('[path-to-image].png')">
    <!-- omit the <img> tag -->
    <!-- the rest of the stuff that was in the <div> goes here -->
</div> 
```

在 *.css 中：

```
.carousel .item {
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
} 
```

但是，这似乎打破了轮播导航箭头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T15:50:31.553

尝试使用这个片段

```
.carousel-inner > .item > img {
    min-width: 100%;
} 
```

# css - 控制@font-face 浏览器下载

> ID：10038027
> 
> 赞同：3
> 
> 时间：2012-04-06T01:07:10.590
> 
> 标签：css, browser, download, font-face

在 css 中使用 @font-face 时，浏览器会在字体之前加载我的页面文本，这会导致字体从一种样式跳到另一种样式（从 Arial 到 myfont）。例如，当使用压缩字体时，这个问题在视觉上非常明显。

我只想显示我用@font-face 选择的一种字体。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:42:47.063

它被称为 FOUT 以我的经验处理它的最佳方法是使用 Google 的字体加载器：

[https://developers.google.com/webfonts/docs/webfont_loader](https://developers.google.com/webfonts/docs/webfont_loader)

本质上，您所做的是让页面正常加载（在此期间隐藏正文或隐藏样式字体块，您的选择），一旦加载它们，就会将一个类添加到页面正文中，这会触发样式的显示字体。

该脚本添加了这些类，以便您可以适当地设置样式：

```
 .wf-inactive - failed to load
 .wf-loading - during load
 .wf-active - loaded fine 
```

唯一的缺点是它需要Javascript ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:37:31.107

这被称为**Flash Of Unstyled Text**并且正如您所提到的，由于字体文件与页面的其余部分一起加载，其文本将使用默认或后备字体设置样式，直到新字体被加载并且可以被应用。

看来，尽量减少这种影响的发生的最好方法是尽量减少客户端加载自定义字体所花费的时间。您可以采取两种措施来实现这一点，即通过 gZip[压缩字体文件](http://www.phpied.com/gzip-your-font-face-files/)，并指定您的字体文件以供查看者的浏览器长期缓存，以便通过[far-future expires header](http://cjohansen.no/en/apache/using_a_far_future_expires_header)进行后续视图。

如果 FOUT 对您的用户来说仍然很刺耳，您可以指定一个类似形状的字体，它可能会安装在大多数查看者的机器上作为备用，以在加载自定义字体时保持您的页面大小相对一致。例如，对于您的精简字体，大多数查看器已经将 Impact 作为可用字体或 Arial Narrow，两者都遵循“精简”样式。

如果所有其他方法都失败了，您始终可以使用 JavaScript 设置整个文档的样式，`color: rgba(0,0,0,0)`并在计时器结束时删除该规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T01:45:05.760

这在某些浏览器（Firefox 3.5/3.6、IE 7-9）中是一个众所周知的问题。[WebINK](http://www.extensis.com/en/WebINK/fout-b-gone/)有一个可用的 JavaScript 文件，可让您解决该问题。

# installshield - InstallShield 2012：尝试在卸载期间运行 InstallScript 自定义操作但出现错误

> ID：10038028
> 
> 赞同：1
> 
> 时间：2012-04-06T01:07:44.733
> 
> 标签：installshield

我有一个在安装期间运行时运行良好的 InstallScript 函数，我需要在卸载期间运行该函数。它正在备份现有的应用程序。我为它创建了一个自定义操作，并在 InstallValidate 之后将其添加到执行序列中。

没有生成日志文件，据我所知卸载，所以我无法弄清楚为什么它失败并出现“功能转移错误”-1603。

我很确定该函数没有被调用，因为我将 MessageBox 作为第一件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:34:06.617

您应该将 Install UI Condition 或 Install Exec Condition 设置为

```
(REMOVE="ALL")OR(REMOVE="<feature_being_uninstalled>") 
```

以防万一您已经或将来要安装多个功能。（当然，除非您只想在卸载整个产品的情况下运行自定义操作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T02:07:02.607

要在卸载期间运行自定义操作，请将其条件设置为`REMOVE="ALL"`安装 UI 条件或安装执行条件，这适用于您的情况。

要在已安装产品时运行自定义操作，条件应设置为`Installed`。

要在未安装产品时运行自定义操作，应将条件设置为`Not Installed`。

我相信您可以使用以下[msiexec](http://technet.microsoft.com/en-us/library/cc759262%28v=ws.10%29.aspx)命令来记录卸载：

```
msiexec /x YourProduct.msi /L*v logfile.txt 
```

或者

```
msiexec /x {Your Product/Package Code} /L*v logfile.txt 
```

# bitmap - 是否可以在 libreoffice 中使位图图像透明？

> ID：10038030
> 
> 赞同：4
> 
> 时间：2012-04-06T01:08:12.053
> 
> 标签：bitmap, transparency, libreoffice

在 libreoffice draw/impress 中为“图片”（位图）更改“区域”的透明度没有效果。有可能改变它吗？或者是创建 gif 图像并在例如中添加一些 alpha 通道的唯一解决方案。瘸子？

# iphone - iphone锁屏应用

> ID：10038031
> 
> 赞同：2
> 
> 时间：2012-04-06T01:08:33.597
> 
> 标签：iphone, lockscreen

朋友们我是 iphone 开发新手，我主要使用 Android，现在我必须为 Iphone 开发一个小时钟，它应该像以下应用程序一样显示在锁定屏幕上

[http://itunes.apple.com/us/app/weather-lock-screen-free/id433369569?mt=8](http://itunes.apple.com/us/app/weather-lock-screen-free/id433369569?mt=8)

只是一个开始的想法，因为我已经创建了（模拟）时钟，如何在 iphone 锁定屏幕上放置应用程序，谢谢您的帮助

费萨尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T01:13:06.193

这个应用程序实际上并没有设置锁定屏幕的背景。它要求用户保存图像，然后用户必须手动将图像设置为锁定屏幕的背景。

没有 API 可以做你想做的事。

# php - 我如何以及在哪里放置我的 header() 以便我的 if else 条件可以运行多次？

> ID：10038033
> 
> 赞同：1
> 
> 时间：2012-04-06T01:09:02.317
> 
> 标签：php, header, echo, alert

我有一个供用户申请许可证的系统......当他们选择他们希望退休的许可证时，我的系统应该能够检查是否符合标准，或者他们之前是否已经申请过该许可证，以防止垃圾邮件。

但是，我有一个大问题。如果我把`header('Location:s_success.php');`警报不会出现。例如，由于用户可以选择 1 个或 2 个或更多许可，.

**设想**

假设选择一个他们有资格申请的许可证和另一个他们还没有资格的许可证。

**预期结果**

在这种情况下，应该发生的是系统应该将他们带到成功页面，同时提醒他们他们不符合资格的其他许可证不成功。

**但意想不到的结果：**

他们的系统只是进入成功页面，而不会警告用户不合格的许可不成功。

这是我的**代码**：

```
<?php
session_start();
include'Connections/database.php';
$conn = dbConnect ();
    if (! $conn)
    die("Couldn't connect to MySQL");

    $user = $_SESSION['eid'];
    $selectedPermit=$_POST['cat'];
    $_SESSION['selectedPermit']=$selectedPermit;

    foreach($selectedPermit as $permit)
    {
        $query="SELECT t.PREREQ1, t.PREREQ2, (CASE WHEN (t.PREREQ1 IS NOT NULL) AND (p1.PTYPE IS NULL) THEN 1 ELSE 0 END) AS missing1, (CASE WHEN (t.PREREQ2 IS NOT NULL) AND (p2.PTYPE IS NULL) THEN 1 ELSE 0 END) AS missing2 FROM type AS t LEFT JOIN permit AS p1 ON (t.PREREQ1=p1.ptype) AND ( p1.EID = '$user' ) AND (p1.STATUS='approved') LEFT JOIN permit AS p2 ON (t.PREREQ2=p2.ptype) AND ( p2.EID = '$user' ) AND (p2.STATUS='approved') WHERE t.PTYPE = '$permit' ";
        $result=mysql_query($query,$conn);
        $row=mysql_fetch_assoc($result);
        $missing1=$row['missing1'];
        $missing2=$row['missing2'];

        if($missing1=='1' or $missing2=='1')
        {
            $message='You have not met the pre-requisites for '. $permit .' \n';
//              echo "You did have not met the Pre-Requisites for." .$permit;
            echo "<script>alert(\"$message\");";
//              header('Location:s_apply2.php');
            echo "location.href='s_apply2.php';</script>";
        }
        elseif($missing1 =='0' and $missing2 =='0')
        {
            $query="SELECT PTYPE FROM permit WHERE EID='$user'";
            $result=mysql_query($query);

            if(mysql_num_rows($result)==0)
            {
                $query="SELECT MED FROM emp WHERE EID='$user'";
                    $result=mysql_query($query);
                    $row=mysql_fetch_assoc($result);
                    $med=$row['MED'];

                    if($med == 'yes')
                    {
//                          echo "You are Fine.";
                        $query = "INSERT INTO permit (EID, PTYPE) VALUES ('$user','$permit' )";
                        mysql_query($query);
                        header('Location:s_apply_success.php');
                    }
                    else
                    {
//                          echo "Go do Medical form";
                        header('Location:medical_question.php');
                    }
            }
            else
            {
                while($row=mysql_fetch_assoc($result))
                {
                    $appliedPermit[]=$row['PTYPE'];
                }

                if(in_array($permit,$appliedPermit))
                {
                        $message1='You have already applied '. $permit .' before. \n';
//                          echo"You have already applied for ".$permit ." before <br/>";
                        echo "<script>alert(\"$message1\");";
//                          header('Location:s_apply2.php');
                        echo "location.href='s_apply2.php';</script>";
                }
                else
                {
                    $query="SELECT MED FROM emp WHERE EID='$user'";
                    $result=mysql_query($query);
                    $row=mysql_fetch_assoc($result);
                    $med=$row['MED'];

                    if($med == 'yes')
                    {
                    //  echo "You are Fine.";
                        $query = "INSERT INTO permit (EID, PTYPE) VALUES ('$user','$permit' )";
                        mysql_query($query);
                        header('Location:s_apply_success.php');
                    }
                    else
                    {
                        echo "Go do Medical form";
                    //  header('Location:medical_question.php');
                    }
                }
            }
        }
    }

    dbDisconnect($conn);

?> 
```

**疑似错误：**

在我的代码中，我怀疑是因为我正在使用`header('Location:s_apply_success.php');`因此导致意外结果发生。但我无法确认这是否是错误。

**我为调试可疑错误所做的尝试**：

但我确实尝试使用`echo "You are Fine.";`而不是`header('Location:s_apply_success.php');`并且它有效。它确实起到了回声和弹出的作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:13:56.370

来自 PHP 手册：

> [http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)
> 
> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:15:04.747

总而言之，在 header() 之前不能显示或显示任何内容，将消息传递到下一页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T01:15:41.690

[输出缓冲](http://us.php.net/manual/en/ref.outcontrol.php)将在调用之前补偿您的输出回显`header()`：

```
<?php
session_start();
ob_start();
include'Connections/database.php';
$conn = dbConnect ();
    if (! $conn)
    die("Couldn't connect to MySQL");

    $user = $_SESSION['eid'];
    $selectedPermit=$_POST['cat'];
    $_SESSION['selectedPermit']=$selectedPermit;

    foreach($selectedPermit as $permit)
    {
        $query="SELECT t.PREREQ1, t.PREREQ2, (CASE WHEN (t.PREREQ1 IS NOT NULL) AND (p1.PTYPE IS NULL) THEN 1 ELSE 0 END) AS missing1, (CASE WHEN (t.PREREQ2 IS NOT NULL) AND (p2.PTYPE IS NULL) THEN 1 ELSE 0 END) AS missing2 FROM type AS t LEFT JOIN permit AS p1 ON (t.PREREQ1=p1.ptype) AND ( p1.EID = '$user' ) AND (p1.STATUS='approved') LEFT JOIN permit AS p2 ON (t.PREREQ2=p2.ptype) AND ( p2.EID = '$user' ) AND (p2.STATUS='approved') WHERE t.PTYPE = '$permit' ";
        $result=mysql_query($query,$conn);
        $row=mysql_fetch_assoc($result);
        $missing1=$row['missing1'];
        $missing2=$row['missing2'];

        if($missing1=='1' or $missing2=='1')
        {
            $message='You have not met the pre-requisites for '. $permit .' \n';
//              echo "You did have not met the Pre-Requisites for." .$permit;
            echo "<script>alert(\"$message\");";
//              header('Location:s_apply2.php');
            echo "location.href='s_apply2.php';</script>";
        }
        elseif($missing1 =='0' and $missing2 =='0')
        {
            $query="SELECT PTYPE FROM permit WHERE EID='$user'";
            $result=mysql_query($query);

            if(mysql_num_rows($result)==0)
            {
                $query="SELECT MED FROM emp WHERE EID='$user'";
                    $result=mysql_query($query);
                    $row=mysql_fetch_assoc($result);
                    $med=$row['MED'];

                    if($med == 'yes')
                    {
//                          echo "You are Fine.";
                        $query = "INSERT INTO permit (EID, PTYPE) VALUES ('$user','$permit' )";
                        mysql_query($query);
                        header('Location:s_apply_success.php');
                    }
                    else
                    {
//                          echo "Go do Medical form";
                        header('Location:medical_question.php');
                    }
            }
            else
            {
                while($row=mysql_fetch_assoc($result))
                {
                    $appliedPermit[]=$row['PTYPE'];
                }

                if(in_array($permit,$appliedPermit))
                {
                        $message1='You have already applied '. $permit .' before. \n';
//                          echo"You have already applied for ".$permit ." before <br/>";
                        echo "<script>alert(\"$message1\");";
//                          header('Location:s_apply2.php');
                        echo "location.href='s_apply2.php';</script>";
                }
                else
                {
                    $query="SELECT MED FROM emp WHERE EID='$user'";
                    $result=mysql_query($query);
                    $row=mysql_fetch_assoc($result);
                    $med=$row['MED'];

                    if($med == 'yes')
                    {
                    //  echo "You are Fine.";
                        $query = "INSERT INTO permit (EID, PTYPE) VALUES ('$user','$permit' )";
                        mysql_query($query);
                        header('Location:s_apply_success.php');
                    }
                    else
                    {
                        echo "Go do Medical form";
                    //  header('Location:medical_question.php');
                    }
                }
            }
        }
    }

    dbDisconnect($conn);
    ob_end_flush();
?> 
```

# iphone - 如何获得 UIScrollView 中包含的 UIView 的初始比例？

> ID：10038035
> 
> 赞同：0
> 
> 时间：2012-04-06T01:09:14.953
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

`UIView`这可能是一个菜鸟问题，但我是否确定 a放置在 a 内时的初始比例`UIScrollView` `(UIViewContentModeScaleAspectFit)`？我看到最初该比率设置为 1.0 (zoomScale)，但我想知道它是从什么缩放的。

非常感谢你花时间陪伴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:47:49.873

我不确定你的意思是什么，但 UIView 的初始比率将始终为 1.0，因为这是你开始的。如果您在比率更改后尝试获取比例，那么您可以使用 UIScrollView 的 zoomScale 属性

# entity-framework - How Do I Resolve "A specified Include path is not valid"?

> ID：10038037
> 
> 赞同：12
> 
> 时间：2012-04-06T01:09:38.340
> 
> 标签：entity-framework, ef-code-first

I have a parent-child relationship setup that is fairly basic. The end result is that I want to be able to return the resulting tables as JSON through ASP.NET MVC WebAPI. I am using Entity Framework 5.0 beta 2\.

I can demonstrate the error I'm running into with a simple example. Given the classes `Category` and `Product` with the corresponding data context:

```
public class Category
{
    public int CategoryId { get; set; }
    public string Title { get; set; }

    public virtual IEnumerable<Product> Products { get; set; }
}

public class Product
{
    public int ProductId { get; set; }
    public string Title { get; set; }

    public virtual Category Category { get; set; }
    public virtual int CategoryId { get; set; }
}

public class ProductDataContext : DbContext
{
    public DbSet<Category> Categories { get; set; }
    public DbSet<Product> Products { get; set; }
} 
```

When I try to run a query that includes the products I get the following error:

```
A specified Include path is not valid. The EntityType 'FooAndBar.Category' 
does not declare a navigation property with the name 'Products'. 
```

The statement to fetch is pretty straightforward:

```
var everything = dc.Categories
            .Include(c => c.Products); 
```

What is the correct way to setup the columns and/or the query so that the `Products` are included with the `Categories`?

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-06T01:16:41.883

Child collection properties must be declared as an`ICollection<T>`, not an`IEnumerable<T>`.

Also, you do not need to explicitly add a `CategoryId` field to the child class; EF will create that automatically in the database.

# ruby-on-rails - 由于某种原因没有得到 field_with_errors

> ID：10038043
> 
> 赞同：1
> 
> 时间：2012-04-06T01:10:30.853
> 
> 标签：ruby-on-rails

我正在使用 Rails 3.2.2 并且在验证失败时没有得到 field_with_errors div。

**意见/会话/new.html.erb**

```
<%= form_tag sessions_path do %>

  <p><%= label_tag :email %><br />
  <%= email_field_tag :email %></p>

  <p><%= label_tag :password %><br />
  <%= password_field_tag :password %></p>

  <p><%= submit_tag "Log in" %></p>

<% end %> 
```

**控制器/sessions_controller.rb**

```
 def create
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password]) && user.account.subdomain == request.subdomain
      session[:user_id] = user.id
      redirect_to home_path
      flash[:notice] = "Logged in!"
    else
      flash.now[:error] = "Invalid email or password"
      render 'new'
    end
  end 
```

**模型/用户.rb**

```
 attr_accessible :first_name, :last_name, :email, :password, :password_confirmation
  has_secure_password

  validates :email, :presence => true, :uniqueness => true
  validates :password, :presence => true, :on => :create 
```

我收到了 flash 消息，但如果验证失败，我的视图不会呈现 field_with_errors 包装器 div。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T01:38:51.220

默认情况下不再包含它，您需要呈现自己的错误消息。

这是在模型的脚手架中生成的一些示例代码`Post`：

```
<% if @post.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

    <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %> 
```

然后，您可以将其提取到部分中，以便与其他模型一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:04:48.370

我认为该`field_with_errors`功能仅适用于`form_for`. 如果需要，可以更改`authenticate`方法以向`@user`对象添加错误（它必须是实例变量才能工作），然后将表单更改为：

```
<%= form_for(@user) do |f| %>

  <%= f.error_messages %>

  <p><%= f.label :email %><br />
  <%= f.email_field :email %></p>

  <p><%= f.label :password %><br />
  <%= f.password_field :password %></p>

  <p><%= f.submit "Log in" %></p>

<% end %> 
```

# django - 如何更改 Django 管理静态文件 url？

> ID：10038050
> 
> 赞同：0
> 
> 时间：2012-04-06T01:11:19.353
> 
> 标签：django, django-admin

我在自己的服务器上托管我的 Django 项目，正如文档所说，Django 管理媒体停止显示。

解决方案就是自己托管它，我正在这样做。我遇到的问题是 Django 管理员用来尝试查找它们的 url 不正确。具体来说，Django 正在查看

```
<link rel="stylesheet" type="text/css" href="/ceasarb-cfa/admin/css/base.css"> 
```

当我想让它看的时候

```
<link rel="stylesheet" type="text/css" href="/ceasarb-cfa/static/admin/css/base.css"> 
```

我的问题是，我怎样才能改变这条路？

直观地说，我尝试在（当前设置为）中调整`ADMIN_MEDIA_PREFIX`文件，但摆弄该值似乎并没有改变任何东西。`settings.py``/ceasarb-cfa/static/admin`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:30:59.280

我的猜测是你的 settomgs.py 你有：

```
STATIC_URL = "/ceasarb-cfa/" 
```

但应该是

```
STATIC_URL = "/ceasarb-cfa/static/". 
```

以下是有关该设置的更多文档： [https ://docs.djangoproject.com/en/dev/ref/settings/#std:setting-STATIC_URL](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-STATIC_URL)

# objective-c - iOS - Observer 观察 tableView dequeue Reusable Cell

> ID：10038055
> 
> 赞同：0
> 
> 时间：2012-04-06T01:12:20.057
> 
> 标签：objective-c, ios, observers

是否可以在 iOS 开发中为单元格出列并在内部重用时添加观察者`UITableView`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:17:59.350

// 用 id 标记你的单元格

```
cell.Tag = item.ID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:22:53.900

您可以继承 UITableViewCell 然后覆盖该`[UITableViewCell prepareForReuse]`方法。请注意，这仅在您的单元子类具有与其关联的重用标识符时才有效，因此请确保您为该属性设置了一个值。

# facebook-graph-api - 更改 Facebook Oauth 重定向网址

> ID：10038056
> 
> 赞同：3
> 
> 时间：2012-04-06T01:12:42.520
> 
> 标签：facebook-graph-api, oauth

在我们的 Java EE 应用程序中，我们调用 fb oauth 流来获取 accessToken。为此，我们使用应用程序密钥和秘密使用回调 url 调用 fb 服务器。

此时，在 fb app url 部分中提供了相同的 url。

但是，如果我们可以更改重定向 url 以转到不同的服务器，是否有可能？我已经看到只是更改代码中的回调 url 不起作用。看起来它在代码和 fb 应用程序中必须相同。

这使得测试或使用相同的应用程序来尝试来自两个不同的 Web 服务器的事情变得非常困难。

对此有何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:35:07.733

不幸的是，这是不可能的。只需将用户重定向到您的 redirect_uri 即可将您重定向到正确的位置

> 用户单击对话框中的按钮后要重定向到的 URL。您指定的 URL 必须是与应用设置中指定的具有相同基本域的 URL、https://apps.facebook.com/YOUR_APP_NAMESPACE 形式的 Canvas URL 或[https](https://apps.facebook.com/YOUR_APP_NAMESPACE) [://](https://www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID)形式的页面选项卡 URL [www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID](https://www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID)

[https://developers.facebook.com/docs/reference/dialogs/oauth/](https://developers.facebook.com/docs/reference/dialogs/oauth/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T06:17:15.707

出于安全原因，您不能更改重定向 url。Facebook 检查您提供的重定向 URL 是否与您在注册​​应用程序时提供的相同。我解决这个问题的方法是在 facebook 上为每台服务器注册一个应用程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-25T16:35:51.693

[这是 Promo Group 的解决方案](http://promo.org.il/en/blog/OAuth-multilang-multidomain)

选项之一 - 添加第二个域（地址镜像主站点）
`Settings » Basic tab at the top» Mobile Site URL`

# html - 使用 HTML5 在 Canvas 中设计用户界面

> ID：10038057
> 
> 赞同：0
> 
> 时间：2012-04-06T01:12:43.723
> 
> 标签：html, canvas, interface

我在画布上设计了一个小游戏，我想为它添加一个界面（只是一个标准的东西，带有声音切换和其他设置等菜单选项）。

在 Angry Birds html5 (http://chrome.angrybirds.com) 中，除了 canvas 之外，他们没有任何 html 元素来处理他们的界面。

我只是想知道，我的整个游戏都用 html5 画布设计，然后用户界面完全使用 div 等 html 元素设计，并带有 css 样式，这对我来说是个坏习惯吗？

我想另一种方法是以某种方式编写某种碰撞系统来确定用户在屏幕上单击的位置。

我希望有人可以在这里为我指出正确的方向，并告诉我哪种方法（纯画布或带有 html 元素）最适合我的画布游戏。我在这里 100% 关心的是性能，测试两者都需要几天时间，而且会非常痛苦。`enter code here`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:29:58.297

确定用户在画布上单击的位置并不难。我使用图书馆[gee](http://georgealways.github.com/gee/)这使它变得非常容易。只需按照 API 中的示例创建您的 gee 画布并始终访问鼠标位置（g.mouseX、g.mouseY）和鼠标操作（g.mousedrag、g.mousedown、g.mouseover、ecc...）。当然，它还处理动画（g.draw）的自动刷新。

关于您的问题：是否使用 CSS 在画布中或外部制作 UI 取决于您。通常，您不需要关心用户界面的性能，也没有“更好的方法”：您的性能取决于您如何实现代码。一个糟糕的实现可能会导致性能滞后，无论您使用何种技术来连接它。

# php - PHP mail() 使用变量

> ID：10038062
> 
> 赞同：-3
> 
> 时间：2012-04-06T01:13:35.263
> 
> 标签：php, email, variables

我在 PHP 中使用一个脚本，它允许我发送电子邮件，[这里](http://php.net/manual/en/function.mail.php)的那个。我也有一些从文本框中接收数据的变量，但我知道这不是问题，因为我已经看到它起作用了。无论如何，我的问题是：如何将接收者设置为变量？我已经尝试了明显的方法，但没有奏效。它说电子邮件已发送，但我没有收到：S。对此有什么想法吗？谢谢，乔伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T01:17:30.163

只需使用来自同一来源的示例 示例 3

```
 <?php
$to = "somebody@example.com";
$subject = "My subject";
$txt = "Hello world!";
$headers = "From: webmaster@example.com" . "\r\n" .
"CC: somebodyelse@example.com";

mail($to,$subject,$txt,$headers);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:20:22.437

这是你要找的吗？

```
$email = "email@address.com";
$to = $email; 
```

# android - 在android中，我如何以编程方式称呼自己？

> ID：10038071
> 
> 赞同：2
> 
> 时间：2012-04-06T01:15:26.057
> 
> 标签：android, call, self

我看到一个应用程序可以让你用来电号码“0123456789”给自己打电话，我该如何复制这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:52:22.373

欺骗（假号码）不是设备本身发生的事情。这是通过电话网络发生的事情。我见过的应用程序会调用其他号码，然后将呼叫欺骗到您想要的号码。

如果您的意思只是从您的设备呼叫您的设备，那么它需要一个第三方电话连接，因为手机网络不允许您实际呼叫自己（它通常会转到 VM）。正如我所描述的那样，欺骗号码需要中间人。

# css - 组织 CSS 代码的结构化方式

> ID：10038080
> 
> 赞同：5
> 
> 时间：2012-04-06T01:16:24.987
> 
> 标签：css, organization, css-frameworks

在构建一个相对较大的网站时，CSS 结构应该从一开始就适当地确定范围和组织。如果不使用 CSS 框架，那么所有内容都可以集中到一个庞大的样式表中，但这很快就会出现问题，并可能成为巨大的维护责任。

在过去的几年里，我将我的样式表分解成各种文件，包括：base.css、layout.css、fonts.css、elements.css，但是样式定义很容易在文件之间跳转，这种方法需要更多严格的。我没有使用框架，因为我不喜欢 CSS 代码中的预设列和预定义元素。

你们可以建议什么方法、模式或技巧来保持事情井井有条？什么样的命名约定、可重用性实践和模式是有用的？这是应该使用框架的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T03:02:28.360

我曾经喜欢[LESS ，但现在我是](http://lesscss.org/)[Stylus](http://learnboost.github.com/stylus/)的忠实粉丝，因为我认为它比 LESS/SASS/CSS 编写的代码更简洁——没有分号、冒号或括号。

因为 Stylus（以及 LESS 和 SASS）允许您定义变量、模板和函数，所以我有以下文件，它们应该按以下顺序排列：

*   [reset - Eric Meyer 的 CSS 重置](http://meyerweb.com/eric/tools/css/reset/)的 Stylus 版本
*   variables - 颜色、字体等变量。
*   模板 - 模板，例如`border-radius`，过渡和 clearfix
*   每个页面的样式（主页、应用程序、服务条款等）

这些都使用简单的构建脚本连接并编译为 CSS。

您可以看到它们的样子；我为这些东西做[了一个 GitHub 存储库。](https://github.com/EvanHahn/Evan-Hahn-Project-Skeleton/tree/master/stylus)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T02:35:22.670

对于编写一致且可管理的样式表，CSS LESS 框架非常有益。
LESS 提供以下机制：用于动态编写 CSS 代码的变量、嵌套、mixins、运算符和函数，并且可以在客户端（Internet Explorer 6+、WebKit、Firefox）和服务器端运行，使用 Node.js 或 Rhino。

[http://lesscss.org/](http://lesscss.org/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T00:46:06.157

关于 Stylus - 缺少分号、冒号和括号会使您的代码在 IMO 的可读性降低，而不是更多。

# objective-c - 如何使用 Gdata for iOS App 将视频从私有 YouTube API 更改为公共 YouTube API

> ID：10038081
> 
> 赞同：1
> 
> 时间：2012-04-06T01:16:27.493
> 
> 标签：objective-c, ios, youtube-api, gdata-api

我有一个 iOS 应用程序，它通过 gdata 和 YouTube API 从用户那里获取所有视频。我的问题来自私人视频，我需要制作它以便在选择视频时公开私人视频。

出于某种原因，每当我尝试公开视频时，我都无法对其进行编辑，因为`editLink`YouTube API 返回的条目为空。

这是我的代码，有人可以告诉我我做错了什么或者我可以做些什么来做出改变：

```
GDataEntryBase *entry = [[feed entries] objectAtIndex:selectedRow];
    [[(GDataEntryYouTubeVideo *)entry mediaGroup] setIsPrivate:NO];

//GDataEntryYouTubeUpload *uploadEntry = 
//[GDataEntryYouTubeUpload uploadEntryWithMediaGroup:mediaGroup
//fileHandle:nil MIMEType:@"video/mp4" slug:[[entry title]
//stringValue]];

    GDataServiceTicket *ticket;
    GDataServiceGoogleYouTube *service = [self youTubeService];

    NSString *str = [entry canEdit] ? @"YES" : @"NO";
    NSLog(@"Can edit %@", str);
    NSLog(@"Edit URL %@", [[entry editLink] URL] );

 //       NSURL *url = [GDataServiceGoogleYouTube
                         //youTubeUploadURLForUserID:kGDataServiceDefaultUser];
    ticket = [service fetchEntryByUpdatingEntry:entry
    forEntryURL:[[entry editLink] URL] delegate:self
    didFinishSelector:@selector(uploadTicket:finishedWithEntry:error:)];
 //     ticket = [service fetchEntryByUpdatingEntry:entry
    //delegate:self didFinishSelector:@selector(uploadTicket:finishedWithEntry:error:)];
    NSLog(@"Ticket = %@", ticket);
   }
}

- (void)uploadTicket:(GDataServiceTicket *)ticket
    finishedWithEntry:(GDataEntryYouTubeVideo *)videoEntry error:(NSError
    *)error {
      NSLog(@"Finished...");
         UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Upload
         failed" message:[NSString stringWithFormat:@"Upload failed: %@",
         error] delegate:self cancelButtonTitle:@"Cancel"
          otherButtonTitles:nil, nil];

        if (error != nil) {
             NSLog(@"Errors: %@", error);
            [alert show];
        } else {
            NSLog(@"NO ERRORS :))");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:14:18.623

我在如下所示的请求/响应中包含了开发人员密钥，并在响应中收到了 editLink。您必须将使用 oauth 游乐场的协议与您的客户端语言相关联。

[https://groups.google.com/group/youtube-api-gdata/browse_thread/thread/346eb7c8bdd6c3ae](https://groups.google.com/group/youtube-api-gdata/browse_thread/thread/346eb7c8bdd6c3ae)

您是否验证了您的请求？

您是否指定了 v=2？

您是否在查询中包含了开发人员密钥？

如果您已通过身份验证并在查询字符串中使用 v=2，那么您应该获得编辑链接。

[在https://code.google.com/oauthplayground/](https://code.google.com/oauthplayground/)了解开发工具，我在其中提出以下请求，指定仅包含**链接 [@rel="edit"]**标记的部分 gdata 字段：

```
GET /feeds/api/users/default/uploads/7dtC4kS3x08?v=2&fields=link%5B%40rel%3D%22edit%22%5D&alt=json&key=${YT-devKeyValue} HTTP/1.1
Host: gdata.youtube.com
Authorization: OAuth ya29.AHES6ZSqIlhsyFfbzZ7x-PTVR1JiTj1PjPvBbfq7RtKnaJk 
```

响应包括底部的 editlink - 当您将更新发布到 api 时，您应该使用 attribute=href 的值：

```
{
"version":"1.0",
"encoding":"UTF-8",
"entry":{
"xmlns":"http://www.w3.org/2005/Atom",
"xmlns$yt":"http://gdata.youtube.com/schemas/2007",
"link":[
{
"rel":"edit",
"type":"application/atom+xml",
"href":"https://gdata.youtube.com/feeds/api/users/rowntreerob/uploads/7dtC4kS3x08?v=2"
}
]
}
} 
```

# jquery - Jquery Selector：检查输入字段是否具有所需的属性

> ID：10038086
> 
> 赞同：1
> 
> 时间：2012-04-06T01:17:12.763
> 
> 标签：jquery, validation, selector

我想检查输入字段是否具有所需的属性。如果这些字段具有空值，并且还具有必需的属性，则在每个字段后附加一个错误 div。在使用选择器时我有点难过

```
 // initialize validator for a bunch of input fields
 var inputs = $("#Contact :input")

 // Check all required fields
 if (inputs.attr("required") && inputs.val() === "") {
    var invalidFields = Select all fields that have the attribute required and an empty value, and assign them a class
     alert("Required Fields not completed"); 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T01:38:16.533

循环遍历每个元素应该做到这一点

```
$("#Contact :input [required]").each(function(){
if($(this).val()===""){
//the input doesn't have a value, but is required
//code here
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:29:28.140

您可以将该`filter`函数与回调一起使用，以将所选元素缩小到缺少所需的元素：

```
var inputs = $("#Contact :input");

var missing = inputs.filter(function() {
   return this.getAttribute("required") && this.value === "";
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T01:31:46.427

尝试这样的事情，它应该为所有符合条件的输入添加类

```
 $("#Contact :input").each(function(){
         if ($(this).attr("required") && $(this).val() === "") 
         {
        $(this).addClass("req");

         }
      }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T01:36:00.573

试试这个：http: [//jsfiddle.net/aramk/mK8YL/](http://jsfiddle.net/aramk/mK8YL/)

HTML：

```
<input id="some" class="required" name="some" type="text" value="" />
<input id="submit_btn" type="submit" value="Go!" /> 
```

JS：

```
$(document).ready(function() {

    $('#submit_btn').click(function() {
        // initialize validator for a bunch of input fields
        var valid = true;
        var inputs = $("input.required").each(function() {
            var input = $(this);
            // Check all required fields
             if (input.val() === '') {
                input.addClass('invalid');
                valid = false; // Avoid a submit
                alert("Required Fields not completed"); 
             } else if (input.hasClass('invalid')) {
                 input.removeClass('invalid');
             }
        });
        if (valid) {
            // This will submit
            alert('submit successful');
        } else {
            return false;
        }
    });

}
);
​ 
```

CSS：

```
.required {
    background: yellow;
    color: black;
}

.invalid {
    background: red;
    color: white;
}​ 
```

确保将这些输入添加到表单中以供提交。

# google-chrome-extension - onSelectionChanged、onActiveChanged 和 onActivated 有什么区别？

> ID：10038088
> 
> 赞同：0
> 
> 时间：2012-04-06T01:17:33.240
> 
> 标签：google-chrome-extension, deprecated

1.  [文档](http://code.google.com/chrome/extensions/tabs.html#event-onActivated)将**onActivated**描述为：`chrome.tabs.onActivated.addListener(function(object activeInfo) {...});`

    > 当窗口中的活动选项卡更改时触发。[...]

2.  作为对他自己对[另一个问题](https://stackoverflow.com/questions/9954211/chrome-tabs-onactivated-addlistener-throws-an-undefined-typeerror)的回答的评论，@RobW 说：

    > 正确的方法是 chrome.tabs.onActiveChanged，与不存在的 chrome.tabs.onActivated 具有相同的签名。

3.  最后，[一个示例扩展](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/docs/examples/api/pageAction/set_icon/)使用**onSelectionChanged**似乎是出于相同的目的：

    ```
    chrome.tabs.onSelectionChanged.addListener(function(tabId) {
      lastTabId = tabId;
      chrome.pageAction.show(lastTabId);
    }); 
    ```

**onSelectionChanged**和**onActiveChanged 有**什么区别？为什么没有关于**onSelectionChanged**的​​文档？*我*应该用什么来收听标签更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:44:55.833

您应该使用`onActivated`（仅限 Chrome 18+）来监听标签更改。`onActiveChanged`并且`onSelectionChanged`是已弃用的事件。

在源代码中（见附件），这些事件的目的，以及它们的用法。为了澄清，我已经用一个小演示更新[了我之前的答案。](https://stackoverflow.com/a/9954420/938089?chrome-tabs-onactivated-addlistener-throws-an-undefined-typeerror)

这是[源代码](http://src.chromium.org/svn/trunk/src/chrome/browser/extensions/extension_browser_event_router.cc)的相关部分：

```
void ExtensionBrowserEventRouter::ActiveTabChanged(
    TabContentsWrapper* old_contents,
    TabContentsWrapper* new_contents,
    int index,
    bool user_gesture) {
  ListValue args;
  int tab_id = ExtensionTabUtil::GetTabId(new_contents->web_contents());
  args.Append(Value::CreateIntegerValue(tab_id));

  DictionaryValue* object_args = new DictionaryValue();
  object_args->Set(tab_keys::kWindowIdKey, Value::CreateIntegerValue(
      ExtensionTabUtil::GetWindowIdOfTab(new_contents->web_contents())));
  args.Append(object_args);

  // The onActivated event replaced onActiveChanged and onSelectionChanged. The
  // deprecated events take two arguments: tabId, {windowId}.
  std::string old_json_args;
  base::JSONWriter::Write(&args, &old_json_args);

  // The onActivated event takes one argument: {windowId, tabId}.
  std::string new_json_args;
  args.Remove(0, NULL);
  object_args->Set(tab_keys::kTabIdKey, Value::CreateIntegerValue(tab_id));
  base::JSONWriter::Write(&args, &new_json_args);

  Profile* profile = new_contents->profile();
  DispatchEvent(profile, events::kOnTabSelectionChanged, old_json_args);
  DispatchEvent(profile, events::kOnTabActiveChanged, old_json_args);
  DispatchEvent(profile, events::kOnTabActivated, new_json_args);
} 
```

# iphone - 我目前有一个显示图像但不会清除/重置的加速度计动作

> ID：10038089
> 
> 赞同：0
> 
> 时间：2012-04-06T01:17:35.127
> 
> 标签：iphone, ios, xcode, ios4, accelerometer

作为一个练习，我创建了一个项目来试验 iPhone 的加速度计功能。现在，当我在我的设备上运行该应用程序时，它以一个空白屏幕开始，摇晃手机并显示图像。

我必须强制关闭应用程序才能清除图像。**我希望有人可以提供一个解决方案来重置图像，这样我就可以根据需要多次重复该过程。**（摇动手机，显示图像，清晰图像）我认为它需要一个计时器或其他东西，不确定。这是源代码。感谢您花时间阅读和帮助。

```
//  ViewController.m
//  AccelTest
//

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

-(void)viewWillAppear:(BOOL)animated{
    [self startAccel];
    [self view];

}

-(void)viewWillDisappear:(BOOL)animated{
    [self stopAccel];
    [self view];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return NO;
}

-(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration{

    double const kThreshold = 2.0;
//    double const kThreshold = 2.0;
    if ( fabsf(acceleration.x) > kThreshold
        || fabsf(acceleration.y) > kThreshold
        || fabsf(acceleration.z) > kThreshold){

        [self.view addSubview:[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"Icon.png"]]];

    }
}

-(void)startAccel{
    UIAccelerometer * accel = [UIAccelerometer sharedAccelerometer];
    accel.delegate = self;
    accel.updateInterval = .25;
}

-(void)stopAccel{
    UIAccelerometer * accel = [UIAccelerometer sharedAccelerometer];
    accel.delegate = nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T05:05:46.787

这是我将如何做（没有ARC）点击图像使其消失。

删除您的行：

```
[self.view addSubview:[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"Icon.png"]]]; 
```

并添加这些行：

```
UIImageView *myImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Icon.png"]];
myImageView.userInteractionEnabled = YES;
UITapGestureRecognizer *tapgr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(rm:)];
[myImageView addGestureRecognizer:tapgr];
[tapgr release]; tapgr = nil;
[self.view addSubview:myImageView];  
[myImageView release]; myImageView = nil; 
```

然后在 View Controller 中添加一个方法，以便在点击 UIImageView 时将其移除。

```
-(void)rm:(UITapGestureRecognizer *)tapgr {
    [tapgr.view removeFromSuperview];
} 
```

当该图像被点击一次时，将调用 rm: 方法，该方法将从 self.view 中删除该图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:48:16.293

将指向该图像视图的指针存储在某处，并在需要时将其从超级视图中删除。使用计时器，或用户操作，或类似的东西。

# c++ - 使用 boost::serialization 保存数据时出现 Seg 错误

> ID：10038090
> 
> 赞同：1
> 
> 时间：2012-04-06T01:17:37.623
> 
> 标签：c++, boost, segmentation-fault, boost-serialization

尝试使用 boost 序列化保存数据库时，遇到无法解决的段错误。你能帮忙吗？任何建议都将不胜感激。我已将以下声明确定为罪魁祸首，但不确定如何解决

```
oa << *this; 
```

我的代码部分如下：

```
template<class Archive>
void nDB::serialize(Archive &ar, const unsigned int version) {
    ar & _LAYERS;
    ar & _MACROS;
    ar & _MODULES;
    ar & _INSTS;
}

void nDB::save_db(string filename) {
    std::ofstream ofs(filename.c_str(), std::ios::out | std::ios::binary);
    //assert(ofs.good());
    boost::archive::binary_oarchive oa(ofs);
    oa << *this;
    ofs.close();
} 
```

嗨，我能够将问题指向我数据库中的循环引用。代码如下：

```
 template<class Archive>
    void pin::serialize(Archive &ar, const unsigned int version) {
    ar & pin_Port;
    ar & pin_Layer;
    } 
```

和

```
 template<class Archive>
    void port::serialize(Archive & ar, const unsigned int version){
    ar & port_Name;
    ar & port_Use;
    ar & port_Dir;
    ar & port_PINS;
    } 
```

嗨，下面是我的班级定义

```
 class pin {
    public:
    port*       pin_Port;
    layer*      pin_Layer;
    // rect*       pin_shape;

    pin();
    ~pin();

    void         set_port(port*);
    void         set_layer(layer*);
    string       get_name();
    port*        get_port();
    layer*       get_layer();
    string       get_layer_name();
    double       get_layer_width();
    private:
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version);
    };
    class port {
    public:
    string     port_Name;
    char       port_Use;
    char       port_Dir;
    pin_vector port_PINS;
    port();
    ~port();

    void         set_name(string);
    void         set_use(int);
    void         set_dir(int);
    string       get_name(void);
    string       get_use(void);
    string       get_dir(void);
    void         add_pin(pin*);
    pin_vector   get_all_pins(void);

    private:
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version);
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:27:46.670

我怀疑罪魁祸首是`ofs.close();`。对象需要在底层流关闭*之前*`binary_oarchive`超出范围，因为对象会尝试写入剩余数据并在其析构函数中刷新流。*`binary_oarchive`*

 *标准流超出范围时会自动刷新和关闭，因此该行完全没有必要（在这种情况下是有害的）。删除它，你应该很高兴。

（不相关的，但是`_LAYERS`，`_MACROS`等是**可怕**的名字，实际上在用户代码中是非法的。去掉前导下划线或大写字母，最好两者都去掉。）*

# android - onOptionsItemSelected 问题

> ID：10038093
> 
> 赞同：1
> 
> 时间：2012-04-06T01:18:20.293
> 
> 标签：android, android-intent, options-menu

我为我的数据库类创建了一个选项菜单。启动选项菜单后，我想在单击指定按钮时进行所需的活动。

但问题是，如果我点击任何选项，我会被定向到`MainMenu.class`. 任何想法为什么会发生这种情况？

代码：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        new MenuInflater(this).inflate(R.menu.optionmenu, menu);
        return(super.onCreateOptionsMenu(menu));
    }

    public boolean onOptionsItemSelected ( MenuItem item){
        switch (item.getItemId())
        {
        case R.id.item1:
        { Intent r=new Intent(Database.this,MainMenu.class);
            startActivity(r);
        }

        case R.id.takesurvey:
        { 
            Toast toast=Toast.makeText(this, "check", 2000);
               toast.show();
            Intent r1=new Intent(Database.this,SurveyActivity.class);
            startActivity(r1);
        }

        case R.id.viewstats:
        { Intent r2=new Intent(Database.this,Stats.class);
            startActivity(r2);
        }

        case R.id.changesort:
        { Intent r3=new Intent(Database.this,MainMenu.class);
            startActivity(r3);
        }

        case R.id.menuexit:
        { Intent r4=new Intent(Database.this,MainMenu.class);
            startActivity(r4);
        }
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T01:24:03.647

看起来您在每种情况下都缺少一个 break 语句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T01:55:20.563

```
 public boolean onOptionsItemSelected ( MenuItem item){
        switch (item.getItemId())
        {
        case R.id.item1:
        startActivity(new Intent(Database.this,MainMenu.class));
        break;

        case R.id.takesurvey:
        Toast.makeText(this, "check", 2000).show();
        startActivity(new Intent(Database.this,SurveyActivity.class));
        break;

        case R.id.viewstats:
        startActivity(new Intent(Database.this,Stats.class));
        break;

        case R.id.changesort:
        startActivity(new Intent(Database.this,MainMenu.class));
        break;

        case R.id.menuexit:
        startActivity(new Intent(Database.this,MainMenu.class));
        break;

        return true;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T01:24:15.007

对于 onOptionsItemSelected() 中的 Switch 语句中的每个条件，您必须返回 true。如果你处理这种情况，那么你必须返回 true，如果你不处理，那么你应该调用它的超类实现。

```
case R.id.item1:
    { Intent r=new Intent(Database.this,MainMenu.class);
        startActivity(r);
        return true;
    } 
```

通过此了解更多详细信息 [http://developer.android.com/guide/topics/ui/menus.html#options-menu](http://developer.android.com/guide/topics/ui/menus.html#options-menu)

# javascript - 使用 jQuery .load 打开所有链接

> ID：10038094
> 
> 赞同：0
> 
> 时间：2012-04-06T01:18:58.717
> 
> 标签：javascript, jquery

```
<html>
<head>
<title></title>
<script type="text/Javascript" src="includes/scripts/jquery-1.7.2.min.js"></script>
<script type="text/Javascript">
$('a').click(function() {
  window.open($(this).attr('href') );
});
</script>
</head>
<body>
<div id="content">
<a href="somepage.html">Somepage</a>
<br />
<a href="somepage.html">Somepage</a>
<br />
<a href="somepage.html">Somepage</a>
<br />
<a href="somepage.html">Somepage</a>
<br />
<a href="somepage.html">Somepage</a>
</div>
</body>
</html> 
```

我想用 jQuery .load() 打开页面中的所有链接。
但是我的代码似乎不起作用。
有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:21:16.803

```
$('a').click(function(e) {
    $("#content").load($(this).attr('href') );
    e.preventDefault();
}); 
```

此代码将使得当用户单击您页面上的链接时，而不是转到该页面，该页面的内容将被加载到您的`content`div 中。 `e.preventDefault()`将阻止链接的默认操作（离开页面）并将用户留在您的页面上。

现在，问题在于，一旦您单击了一个链接，加载到 div 中的任何内容都不会应用此代码。您可以通过使用带有 jquery 的事件委托`on`（或旧 jquery 版本中的委托）来解决这个问题。

```
$("#content").on("click", "a", function(e) {
    $("#content").load($(this).attr('href') );
    e.preventDefault();
}); 
```

此代码适用于 中的所有链接`#content`，包括最初的链接以及稍后加载的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:20:22.593

```
$(function () {
    $('a').each(function() {
      window.open($(this).attr('href') );
    });
}); 
```

[**click**](http://api.jquery.com/click/)实际上是点击 HTMLElement 的动作。[**每个**](http://api.jquery.com/jQuery.each/)都是通过它们的循环。

把所有东西都包装进去`$();`告诉 jQuery，

> “嘿，在一切准备就绪之前，不要运行我。我希望所有 DOM 元素都是可寻址的。”

它是`$(document).ready` [**[doc]**](http://api.jquery.com/ready/)的简写。

# ruby - 如何在 BASH 中合并来自两个 CSV 文件的数据？

> ID：10038098
> 
> 赞同：5
> 
> 时间：2012-04-06T01:19:29.100
> 
> 标签：ruby, perl, bash, csv, python-2.7

我有两个`@`用于划分每一列的 CSV 文件。第一个文件 (file1.csv) 有两列：

```
cat @ eats fish
spider @ eats insects 
```

第二个文件 (file2.csv) 有四列：

```
info @ cat @ info @ info
info @ spider @ info @ info
info @ rabbit @ info @ info 
```

我需要将第一个文件第二列的信息添加到第二个文件的新列中，以防第一个文件的第一列和第二个文件的第二列的详细信息匹配，例如结果以上将使得：

```
info @ cat @ info @ info @ eats fish
info @ spider @ info @ info @ eats insects
info @ rabbit @ info @ info @ 
```

如上所示，由于第一个文件不包含有关兔子的信息，因此在第二个文件的最后一行添加了一个新的空列。

到目前为止，我知道该怎么做：

`while read line`可用于循环浏览第二个文件中的行，例如：

```
while read line
do
    (commands)
done < file2.csv 
```

可以使用 来访问来自特定列的数据`awk -F "@*" '{print $n}'`，其中`n`是列号。

```
while read line
do
    columntwo=$(echo $line | awk -F "@*" '{print $2})
    while read line
    do
        columnone=$(echo $line | awk -F "@*" '{print $1})
        if [ “$columnone” == “$columntwo” ]
        then
            (commands)
        fi
    done < file1.csv
done < file2.csv 
```

我的方法似乎效率低下，我不确定如何使用将第二列中的数据添加`file1.csv1`到`file2.csv`.

*   第 1 列`file1.csv1`和第 2 列中的项目`file2.csv`对于这些文件是唯一的。这些文件中没有重复的条目。
*   结果文件的每一行应该正好有 5 列，即使有些列是空的。
*   该文件包含大量来自各种语言的 UTF-8 字符。
*   周围有空白`@`，但如果这导致脚本出现问题，我可以删除它。

如何将第一个文件中的数据添加到第二个文件中的数据中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T03:22:57.213

[jowdder 的答案](https://stackoverflow.com/a/10038133/900873)几乎就在那里，但由于我在评论中提到的问题而不完整：字段中会有不需要的空格，并且文件没有排序，这是它们需要的。

```
join -t@ -11 -22 -o2.1,0,2.3,2.4,1.2 <(sed 's/ *@ */@/g' file1.csv | sort -t@) <(sed 's/ *@ */@/g' file2.csv | sort -t@ -k2) | sed 's/@/ @ /g' > output-file 
```

这也可以写成 bash 脚本，我将解释其中的每个步骤：

```
#!/bin/bash -e

# Remove whitespace around the `@`s, then sort using `@` to separate fields (-t@). 
# -k2 tells sort to use the second field.
sed 's/ *@ */@/g' file1.csv | sort -t@ >temp-left
sed 's/ *@ */@/g' file2.csv | sort -t@ -k2 >temp-right

# Join the files. -t@ means break fields at @, 
# -11 says use the first field in the first file,  -22 is the second field in the second file.
# -o... controls the output format, 2.1=second file, first field; 0 is the join field.
join -t@ -11 -22 -o2.1,0,2.3,2.4,1.2 temp-left temp-right > temp-joined

# Add whitespace back in around the @s so it looks better.
sed 's/@/ @ /g' temp-joined >output-file

# Clean up temporary files
rm temp-{left,right,joined} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T04:04:24.137

还有一个不错的、干净的`awk`解决方案：

```
awk -F" *@ *" 'NR==FNR{lines[$2]=$0} NR!=FNR{if(lines[$1])lines[$1]=lines[$1] " @ " $2} END{for(line in lines)print lines[line]}' file2.csv file1.csv 
```

一个不错的单线。不是很短，但不是我见过的最长的。请注意，file2 和 file1 是切换的。同样，作为带有解释的脚本：

```
#!/usr/bin/awk -f

# Split fields on @ and the whitespace on either side.
BEGIN { FS = " *@ *" }

# First file
NR == FNR {
    #Store the line
    lines[$2] = $0
}

# Second file
NR != FNR {
    # If the appropriate animal was in the first file, append its eating habits.
    # If not, it's discarded; if you want something else, let me know.
    if(lines[$1]) lines[$1] = lines[$1] " @ " $2
}

# After both files have been processed
END {
    # Loop over all lines in the first file and print them, possibly updated with eating habits.
    # No guarantees on order.
    for(line in lines) print lines[line]
} 
```

调用 as`awk -f join.awk file2.csv file1.csv`或使可执行文件和`./join.awk file2.csv file1.csv`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T01:26:49.127

这就是 POSIX[`join`](http://pubs.opengroup.org/onlinepubs/000095399/utilities/join.html)实用程序的用途。在排序`file1.csv`和`file2.csv`（在第二个字段上对后者排序）之后，按照以下方式运行：

```
join -2 2 -a 2 -t @ -e '' -o 2.1,0,2.3,2.4,1.2 file1.csv file2.csv 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T08:15:36.467

这可能对您有用：

```
sed -e '1i\s/$/ @/' -e 's|^\([^@]*\)@\(.*\)|/^[^@]*@ \1/s/$/\2/|' file1.csv |
sed -f - file2.csv
info @ cat @ info @ info @ eats fish
info @ spider @ info @ info @ eats insects
info @ rabbit @ info @ info @ 
```

然而，在大容量上它可能不是很快！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T01:37:13.777

**编辑：**在挖掘文档[`Text::CSV`](http://p3rl.org/Text%3a%3aCSV)（这是底层解析器/编写器引擎）后，我找到了`quote_space`阻止空格的存在触发字段引用的选项。在您的问题中，您说您可以允许删除字符周围的空格`@`，此方法将在此过程中为您执行此操作，但如果可以接受，那么此答案现在应该符合所有标准。

这是一个使用 Perl 和我的[`Tie::Array:CSV`](http://p3rl.org/Tie%3a%3aArray%3a%3aCSV). 该模块允许您像处理原生 Perl 二维数组一样处理 CSV 文件。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Tie::Array::CSV;
use List::Util 'first';

my %opts = (
  text_csv => { 
    sep_char => '@',
    allow_whitespace => 1,
    quote_space => 0,
  }, 
);

tie my @file1, 'Tie::Array::CSV', 'file1.csv', %opts;
tie my @file2, 'Tie::Array::CSV', 'file2.csv', %opts;

foreach my $line (@file2) {
  my $animal = $line->[1];
  my $eats = first { $_->[0] eq $animal } @file1;
  if ( $eats ) {
    push @$line, $eats->[1];
  } else {
    push @$line, '';
  }
} 
```

根据 file1.csv 的大小，最好将整个文件解析到内存中以进行更有效的搜索。

无论如何，这是首先在 file1.csv 中解析的选项

```
#!/usr/bin/env perl

use strict;
use warnings;

use Tie::Array::CSV;

my %opts = (
  text_csv => { 
    sep_char => '@',
    allow_whitespace => 1,
    quote_space => 0,
  }, 
);

tie my @file1, 'Tie::Array::CSV', 'file1.csv', %opts;
tie my @file2, 'Tie::Array::CSV', 'file2.csv', %opts;

# parse in file1 so that it doesn't need to be searched each time
my %eats;
foreach my $line (@file1) {
  $eats{$line->[0]} = $line->[1];
}

foreach my $line (@file2) {
  my $animal = $line->[1];
  push @$line, $eats{$animal} || '';
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-06T01:57:19.847

另请查看 DBD::CSV perl 模块。它将每个文件视为一个表，并允许您在它们上编写 SQL 连接。[http://metacpan.org/pod/DBD::CSV](http://metacpan.org/pod/DBD::CSV)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-06T02:00:31.980

你还没有说为什么你必须在 bash 中这样做。使用 ruby​​、python 或 perl 等功能齐全的语言要容易得多。这是一个简短的 ruby​​ 程序：

```
#!/usr/bin/env ruby

f1_map = Hash[ * IO.readlines('file1.csv').map {|l| l.chomp.split(/\s+@\s+/,2) }.flatten ]

STDIN.each_line do |l|
  cols = l.chomp.split /\s+@\s+/
  puts ( cols << f1_map[cols[1]] ).join(' @ ')
end 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-01T17:45:31.997

我有一个[基于 Ruby 脚本的解决方案](https://stackoverflow.com/a/25085688/316700)，可以从控制台执行。

我相信您可以针对您的具体情况进行必要的调整，例如将“@”作为字段分隔符。

# oracle - 为什么 OracleAQ 将死订户留在队列中？

> ID：10038104
> 
> 赞同：3
> 
> 时间：2012-04-06T01:20:22.413
> 
> 标签：oracle, jms, oracle-aq, subscriber, orphaned-objects

这是 Oracle 11.2.0.3。

我们在使用 Oracle 的 JMS 而不是 OracleAQ 时遇到了问题。这工作正常，除了我们开始注意到队列被填满 1000 条消息，然后随着时间的推移数百万条消息。其中一些处于 PROCESSED 状态，但大多数处于就绪状态。我们将此行为追溯到该主题的“僵尸”或死亡订阅者。当 Java 进程终止并且没有机会注销自己时，它会将订阅者记录留在队列中，而 ORacle 似乎没有检测到它已经死亡。以至于 MONTHS 之后，发送到我们的多订阅者队列的新消息将乘以订阅者的数量，它认为这比实际要高得多。（当我们达到最大订阅者限制时，我们首先注意到了这一点。）

我们已经运行了 qmon 进程——我什至尝试增加最小进程数以使其无效。只要队列中没有死订阅者，队列清理就会非常顺利。

任何人都看到过这个，并希望找到一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T14:01:16.080

好的，所以我没有比这更好的解决方案了：

1) 使用名称创建您的订阅者并跟踪订阅者的姓名。

2）确保您有一个应用程序的关闭挂钩来执行以下过程，这将取消订阅并注销订阅者。

3) 在意外关机/崩溃的情况下，当无法取消订阅时，必须有一个清理任务来执行下面的代码：

```
DECLARE
 aqAgent SYS.AQ$_AGENT;
BEGIN
  for idx in (select consumer_name from 
    DBA_QUEUE_SUBSCRIBERS a where a.queue_name = '<Your Oracle AQ Name>') loop
    aqAgent := SYS.AQ$_AGENT(idx.consumer_name, NULL, NULL);
    DBMS_AQADM.REMOVE_SUBSCRIBER('<Your Oracle AQ Name>', aqAgent);
   end loop;
END; 
```

这将确保您的系统保持完整。

# java - 使用 jni 时将第三方线程附加到 vm

> ID：10038106
> 
> 赞同：1
> 
> 时间：2012-04-06T01:20:39.910
> 
> 标签：java, c, java-native-interface, pthreads

我正在编写一个 Java 程序，它使用用 c 编写的硬件驱动程序。此硬件驱动程序启动一个回调线程，您可以注册回调函数以在发生事情时调用。如何将此线程附加到 jvm，以便它可以为这些回调调用 Java 方法？我只有从 start_callbacks() 函数返回的线程 ID，以 int 形式返回，但它是调用 pthread_create() 时使用的 pthread_t。

我发现的一种方法是在每个回调函数的开头使用 pthread_once 并将线程附加到那里。但是没有办法将其分离。我尝试使用 pthread_cleanup_push/pop，但它们需要成对调用，这样就不起作用了。

在我看来，我唯一能做到这一点的选择是在每次回调调用时附加和分离线程。或者稍微重写驱动程序，我真的不想这样做。

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:45:18.253

这正是 JNI 的要求`AttachCurrentThread()`和`DetachCurrentThread()`目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-27T16:25:17.697

可以使用 thread_local 存储（C++ 11 及更高版本）解决您的问题。这允许您附加到任意线程，然后当线程存在时它会自动分离（即使您没有创建线程并且无法控制它的生命周期）。

如何在 C++ 中实现它的示例可以在我的回答中找到： [https ://stackoverflow.com/a/59934966/8367574](https://stackoverflow.com/a/59934966/8367574)

# iphone - 可以从中国上传二进制文件到 iTunes Connect 吗？

> ID：10038107
> 
> 赞同：2
> 
> 时间：2012-04-06T01:20:48.290
> 
> 标签：iphone, xcode, tcp, app-store-connect, firewall

我位于中国，过去，我曾多次将二进制文件上传到 iTunes Connect，没有问题。我最近升级到 Lion 和 XCode 4.3，一直无法成功上传。验证我的二进制文件后（使用存档，总是可以正常工作），我按分发，几分钟后，我收到以下错误。我联系了开发人员支持，他们告诉我他们无能为力，因为我的问题是由于位于中国。

我很难相信，因为 CanYouSeeMe.org 显示我的端口 443 是开放的，所以我的问题是：SO 上的任何人都位于中国并且您在上传二进制文件时遇到问题吗？如果是这样，您采取了哪些步骤来使其发挥作用？

* * *

我的错误代码：

> 通信故障。请使用诊断模式检查连接。您需要具有对 TCP 端口 443 的出站访问权限。
> 
> 发生异常：操作超时。
> 
> 无法连接到 Apple 的网络服务。
> 
> 连接到传输主机[https://itmsdav.apple.com](https://itmsdav.apple.com)时出错：操作超时。
> 
> 无法开始交付：所有传输都失败了诊断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:13:59.847

只是为了补充答案，如果这个截图是你得到的。（我的案例来自分发期间的 XCode 4.5.2 Organizer...

![上传时出现错误屏幕，发生异常 itmsdav.apple.com](../Images/df9b1c321337a27760c22033c8db0df2.png)

您应该尝试另一个互联网连接，在我的情况下，它在 WIFI 期间失败，但在我使用 Tethering 时成功！

这不是原始问题的永久解决方案，但现在至少提交了应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:23:07.713

您的 ISP 或路由器似乎有一些墙阻止了所有出站流量。我不是中国方面的专家，但我认为你应该能够绑定你的手机。如果不能，请在其中一家大型商店尝试随机 Wi-Fi 热点。（在美国星巴克）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-17T11:29:29.110

```
Use Application loader old version like 2.5.2. 
```

# java - Solr 空间距离错误

> ID：10038111
> 
> 赞同：1
> 
> 时间：2012-04-06T01:21:59.990
> 
> 标签：java, solr, lucene, spatial, geo

我正在尝试实现 solr 以使用空间搜索来查找存储在我的数据库中的点之间的距离。lat/lon 来自 Google Maps API，我认为它可以在 Solr 中使用。这个假设正确吗？我问的原因是因为我得到了一些奇怪的距离结果：

示例 1

*   原产地：45.15，-93.85（纽约州布法罗 - 来自 solr 空间示例）
*   位置：42.88，-78.8（纽约州布法罗 - 来自 google maps api）
*   距离：1227.7522

示例 2

*   原产地：45.15，-93.85（纽约州布法罗 - 来自 solr 空间示例）
*   位置：40.67，-73.9（纽约布鲁克林 - 来自谷歌地图 api）
*   距离：1694.3356

公里或英里，距离很远。我不是地理/空间专家，所以任何关于可能发生的事情的提示将不胜感激。如果您认为需要，我很乐意分享配置。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:32:39.573

嘿，您用于纽约布法罗的坐标在 Solr 示例中不正确。这些是明尼苏达州布法罗的坐标。从简单的 Google 搜索来看，纽约州布法罗市可能更接近北纬 42.8864°、西经 78.8786°（42.88、-78.87），这就是您声称 Google Maps API 报告的内容。

# c# - 知道为什么我的用户控件不在我的选项卡控件中居中吗？

> ID：10038112
> 
> 赞同：0
> 
> 时间：2012-04-06T01:22:11.587
> 
> 标签：c#, wpf

我有点困惑为什么这不起作用，因为我让它在原型中工作，我认为唯一的大区别是我使用自定义 TabItem 和 UserControl 而不是默认的。我正在尝试获取在选项卡窗口中居中的用户控件，但它似乎左对齐。

您将此方法交给您要使用的用户控件，然后将其格式化并将其粘贴在选项卡控件中。在我之前做的测试解决方案中，将滚动的水平和垂直对齐设置为拉伸修复了这个问题，但在这种情况下它不起作用。是否有其他设置或其他地方可以覆盖它？

```
public void CreateNewTab(UserControlGeneric new_user_control, string tab_header)
    {
        //TabItem tab = new TabItem();
        TabItemIndexed tab = new TabItemIndexed();
        //The scrollviewer is created/setup to make sure the usercontrol gets scroll bars if the window if ever made smaller than the usercontrol
        ScrollViewer scroll = new ScrollViewer();

        //How you programatically set a scrollviewer's height and width to be "Auto"
        scroll.Height = Double.NaN;
        scroll.Width = Double.NaN;

        scroll.HorizontalScrollBarVisibility = ScrollBarVisibility.Auto;
        scroll.VerticalScrollBarVisibility = ScrollBarVisibility.Auto;
        scroll.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;
        scroll.VerticalAlignment = System.Windows.VerticalAlignment.Stretch;

        scroll.Content = new_user_control;
        tab.Content = scroll;
        tab.Header = tab_header;

        //If there aren't any tabs, then hide the "No Workspaces Open" notice (Since we're adding a tab)
        if (!tabControl_main.HasItems) label_no_workspaces_open.Visibility = System.Windows.Visibility.Hidden;

        tabControl_main.Items.Add(tab);
        tabControl_main.SelectedItem = tab;

    } 
```

# javascript - Javascript：是否利用本地参考对自己可接受的编码实践？

> ID：10038113
> 
> 赞同：2
> 
> 时间：2012-04-06T01:22:21.717
> 
> 标签：javascript, callback, this

当我开始使用 Javascript 时，我学到了当你传递一个外部事件处理程序（如计时器）对对象中函数的引用时的艰难方法，你不能依赖`this.`引用你的对象 - 它会而是指任何触发事件的范围（在计时器的情况下，我认为它是`window`？）。

我看到正在使用的解决方法是为自己创建一个私有/本地引用并在回调逻辑中使用它。例如：

```
function MyObject() { 
  var myThis = this;
  this.foo = true; 
  this.callback = function() { return myThis.foo; }
  this.interval = 30;
  setInterval(function () { myThis.callback(); }, myThis.interval);
} 
```

对于这种情况，这是标准的编码实践吗？如果不是，首选的替代方案是什么以及为什么（例如，上述示例的风险是什么）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T01:25:22.700

一个现代的替代方案是使用`Function.prototype.bind()`...

```
setInterval(this.callback.bind(this), this.interval); 
```

该`.bind()`方法返回一个函数，其`this`值绑定到您提供的第一个参数*（在本例中为封闭`this`值）*。

它避免了需要`this`从嵌套函数的变量范围内引用封闭变量范围的变量中的所需值（如您的问题所示），从而提供更简洁的代码。

* * *

[您可以在`MDN`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)旧实现中找到足以满足大多数情况的兼容性补丁。

* * *

旁注，`this`JavaScript 中的值问题不是范围问题，而是调用上下文问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T01:27:29.740

简短回答：这是一种公认​​的做法，据我所知，没有任何缺点。

长（ish）答案：您可以操纵 Prototype 方法来执行此操作，请参阅**am not i am**的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T02:24:16.753

您可以在不使用临时“this”的情况下执行此操作，也可以通过使用闭包而不使用绑定。

*这在实践中并不是一个好方法*，而是说明了闭包和绑定上下文是如何工作的。如果你能理解为什么会这样，那么你应该能够看到如何编写代码`function.prototype.bind`来做同样的事情。

[http://jsfiddle.net/WRJqF/](http://jsfiddle.net/WRJqF/)

```
function MyObject() { 
    this.foo = true; 
    this.callback = function() { 
        // firebug
        console.log( this.foo); 
    };
    this.interval = 30;

    setTimeout((function (that) {
        return function() {
            that.callback();
       };
   }(this)), this.interval); 

} 
```

这使用了两个你会经常使用的 javascript 概念。

1 - 自执行功能。通过将函数包装在括号中，它会立即运行，并被有效地替换为其返回值，例如

```
(function add(x,y) {
    return x+y;
}(2,3)) 
```

变成`6`.

在上面的示例中，我们使用了一个自执行函数并`this`作为参数传递。这会创建一个闭包，并且参数的值（`that`只是为了让您感到困惑）与该函数永久关联。

2 - 用作第一类对象。`this`由于您可以返回一个函数（或通常像使用任何其他值一样使用它们），您可以从您的自执行函数中返回一个函数，该函数与创建它的堆栈帧的值绑定。因此，自执行功能实际上是

```
function() {
    that.callback();
}; 
```

...但是“that”实际上是在创建函数时有效的“this”！

都知道了吗？？

# javascript - CSS Hover 和 Javascript 在一个页面上工作，而不是在另一个页面上工作？

> ID：10038118
> 
> 赞同：0
> 
> 时间：2012-04-06T01:23:51.207
> 
> 标签：javascript, html, css

好的，我曾在此处寻求悬停并单击设置以适用于三个图像的一些帮助。

如果您访问[http://www.djcproductions.net/test.html](http://www.djcproductions.net/test.html)，您可以看到一切正常。

但是，当我将元素复制并粘贴到实际布局中时，它不会进行悬停。我已经盯着代码至少六个小时了，四处移动，改变我认为可能导致它的任何东西，我就是想不通。我有一种感觉，这是我错过的那些东西之一，因为我一直盯着它看。

加载到布局中的内容可以在[http://www.djcproductions.net找到](http://www.djcproductions.net)

如果有人可以查看这两个页面的源代码，并且可能会看到我做错了什么，那将比您想象的要感激-它使我发疯。

谢谢！

****编辑****我在另一台计算机上检查了这个 - 在 IE 中，悬停仍然不起作用，但三个图像显示并在点击时交换。在 chrome 中，只有网页设计和网络托管图像显示，广告图像无处可寻，但悬停和点击功能都可以使用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:16:55.060

我不是专家（根本），但查看您的页面，您似乎缺少`<a href="pages/ad.html" target="slider">`广告链接（~源代码的第 164 行）。这可能是它没有出现的原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T20:08:14.037

我看到您没有使用 window.onload，这可能会导致问题...或使用[jQuery .ready()](http://api.jquery.com/ready/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T20:50:56.483

IE 可能正在切换到 quirks 模式，您可以通过 IE 的开发人员工具检查（按`F12`）。如果您在 Intranet URL 上测试页面，IE 默认会切换到兼容模式，这可能会导致 quirks 模式。Avaya 也可能将 IE 切换到此模式。如果您将正确的`meta`标签添加到您的页面，您可以强制使用不同的文档模式。尝试将其放置在您的页面中（您也可以指定非边缘版本）：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# mysql - MySQL：许多对表的写入打算失败。馊主意？

> ID：10038120
> 
> 赞同：1
> 
> 时间：2012-04-06T01:23:55.490
> 
> 标签：mysql, database

我正在编写一个需要多次写入的应用程序（每秒最多 100 次）。我也打算经常阅读这张表。但是，由于重复的键索引，我将进行的大多数写入实际上都会失败。这是有意的。写入失败会消耗 MySQL 表资源吗？这是不好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T01:31:02.370

失败的写入将消耗系统资源，因为需要查阅表索引以确定是否违反了约束。至于这是否是不好的做法——故意抛出大量预期会失败的写入似乎有点不寻常，但另一方面，RDBMS 的工作是存储、组织和检索数据。数据库尝试`INSERT`违反唯一约束并失败的速度比首先查询是否可以由应用程序代码插入然后插入它（您*仍然*需要检查 RDBMS 上的约束）要快）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:26:19.063

通常，应用程序有一些业务规则抽象层，其中完整性问题在概念上被定义；如果是这样，大多数追随您的开发人员会期望验证发生在那里。OTOH，如果这是一次性实用程序，或者您将永远是唯一的开发人员，它会起作用。与读取索引字段相比，该 hack 可能不会带来任何显着的效率提升，而且一般来说，这是一个处理错误捕获和移植的不愉快的地方——除了你，这不是一个错误。（有点像“这不是错误，而是功能......”）

# java - 尝试访问类时出现空指针异常

> ID：10038123
> 
> 赞同：1
> 
> 时间：2012-04-06T01:24:20.670
> 
> 标签：java, android, class, methods, nullpointerexception

我试图从我的方法中获取值并将其显示在另一个类中作为祝酒词（只是为了确保我的方法有效）。我得到一个我似乎无法弄清楚的空指针异常，我尝试了多种不同的东西。我什至尝试给我的字符串值“This”和“That”。然后我的日志猫告诉我

04-05 21:17:29.633：E/AndroidRuntime(18838)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.cerealBarApps/com.cerealBarApps.Testing}：android.content.res.Resources$NotFoundException：字符串资源 ID #0x0

这是我想用来运行一切的类。

```
public class Testing extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        String Testeroni = "This";
        String Testerhynocerous = "That";

        LoginTest test = new LoginTest();

        Toast.makeText(getApplicationContext(), (test.TestUsername(Testeroni)),
                Toast.LENGTH_SHORT).show();

        Toast.makeText(getApplicationContext(),
                (test.TestPassword(Testerhynocerous)), Toast.LENGTH_SHORT)
                .show();

    }
} 
```

这是我要从中运行方法的类。

```
public class LoginTest {

    // 0 = Username length is less than 4 or greater than 15
    // 1 = Username character is not a letter/or digit
    // 9 = Everything is okay in username :)
    public int TestUsername(String username) {
        if (username.length() <= 4 || username.length() >= 15) {

            return 0;
        }

        for (int i = 0; i < username.length(); i++) {
            if (Character.isDigit(username.charAt(i))
                    || Character.isJavaLetter(username.charAt(i))) {
                System.out.println("");
                // Do Nothing
            } else

                return 1;
        }
        return 9;
    }

        // 2 = Passowrd length is less than 4 or greater than 15
        // 3 = Password character is not a digit
        // 8 = Everything is okay in password :)
        public int TestPassword(String password) {
            if (password.length() <= 4 || password.length() >= 15) {
                return 2;
            }

            for (int i = 0; i < password.length(); i++) {
                if (Character.isDigit(password.charAt(i))
                        || Character.isJavaLetter(password.charAt(i))) {
                    System.out.println("");
                    // Do Nothing
                } else
                    return 3;
            }
            return 8;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:27:19.767

问题在这里：

```
Toast.makeText(getApplicationContext(), (test.TestUsername(Testeroni)),
            Toast.LENGTH_SHORT).show(); 
```

TestUsername 返回一个 int，它被解释为资源 id，这当然是无效的。

将其更改为：

```
Toast.makeText(getApplicationContext(), String.valueOf((test.TestUsername(Testeroni))),
            Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:28:12.920

这些代码：

```
Toast.makeText(getApplicationContext(), (test.TestUsername(Testeroni)),
            Toast.LENGTH_SHORT).show();

    Toast.makeText(getApplicationContext(),
            (test.TestPassword(Testerhynocerous)), Toast.LENGTH_SHORT)
            .show(); 
```

有问题，`test.TestUsername(Testeroni)`返回`test.TestPassword(Testerhynocerous)`类型是int，所以想成字符串res id，所以if可以改成这样：

```
 Toast.makeText(getApplicationContext(), (""+test.TestUsername(Testeroni)),
            Toast.LENGTH_SHORT).show();

    Toast.makeText(getApplicationContext(),
            (""+test.TestPassword(Testerhynocerous)), Toast.LENGTH_SHORT)
            .show(); 
```

# forms - (ASP.NET) 单个表单中的多个按钮，并希望访问单击的按钮 ID

> ID：10038124
> 
> 赞同：0
> 
> 时间：2012-04-06T01:24:28.757
> 
> 标签：forms

这个想法是在列出的课程之一中注册员工。每门课程都有从我的数据库中检索到的 ID 并显示一个注册按钮。如果课程已满，则显示带有课程 ID 的等待按钮。

现在我想获取单击的按钮 ID 以将其插入数据库。

```
 <form   method="post" action="**to current page**">

<input  type="submit" name="btnWait"" value="register" ID="003"/>
<input  type="submit" name="btnWait"" value="register" ID="004"/>

<input  type="submit" name="btnWait"" value="wait" ID="005"/>
<input  type="submit" name="btnWait"" value="wait" ID="006"/> 
```

我试过了，但没有用我知道这是不对的，但是:(

```
<%
     If (Request.Form("btnRegister") = "register") Then
         MsgBox(Request("id"))
     ElseIf (Request.Form("btnWait") = "wait") Then
         MsgBox("wait")
     End If

 %>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:32:18.297

相反`<input type="submit" name="btnWait"" value="register" ID="003"/>`，您可以使用： `<asp:button id="003" runat="server" text=register" />`

然后在文件后面的代码中：

```
Button clickedbutton = (Button)sender;

if(clickedbutton.ID.Equals(003))
{
  //your piece of code
} 
```

希望能帮助到你

# java - 获取“用户输入的最大值”？

> ID：10038131
> 
> 赞同：0
> 
> 时间：2012-04-06T01:25:49.257
> 
> 标签：java, max

我需要从这段代码中获得最大值，但这真的很麻烦。有人有什么建议吗？

```
import java.util.Scanner;
public class Test{
    public static void main(String args[])
    {
        Scanner scan = new Scanner(System.in);

         final int sentinel = 0;
         int number;
         int maxval = 0;
         int count = 0;

         System.out.println ("Enter a number: ");

         number = scan.nextInt();
         while (number != sentinel)
         {
            count++;
            System.out.println("Enter another number");
            number = scan.nextInt();
            maxval = number;
         }

         if (number > maxval)
         {
            maxval = number;
            System.out.println ("The max value is " + maxval);
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:30:14.170

`maxval`每次获得新数字时都会覆盖变量。你必须做这样的事情

```
 while (number != sentinel)
 {
     count++;
     System.out.println("Enter another number");
     number = scan.nextInt();
     if (number > maxval && number != sentinel) //So you don't overwrite it when you get the sentinel character
        maxval = number;
 }
 System.out.println ("The max value is " + maxval); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:34:24.820

试试这个，它更简单一些，并解决了代码中的主要问题：比较`number > maxval` *必须*在主循环内：

```
 Scanner scan = new Scanner(System.in);

    final int sentinel = 0;
    int maxval = 0;
    int number = 0;

    do {
        System.out.print("Enter a number: ");
        number = scan.nextInt();
        if (number > maxval)
            maxval = number;
    } while (number != sentinel);

    System.out.println("The max value is " + maxval); 
```

# git - Tower Git GUI 说工作目录很干净但无法切换分支 - “您的工作树包含更改”错误

> ID：10038132
> 
> 赞同：1
> 
> 时间：2012-04-06T01:25:58.927
> 
> 标签：git, working-directory

我已经查看了大约 10 个似乎是类似问题的答案，但我不明白这些线程中的答案抱歉。

Tower 声明我的工作目录在三个分支中的两个是干净的 - 我可以在这两个分支之间切换而没有问题。

但是我有第三个分支，我无法切换到并得到错误：`Could not switch branch to “branch-name“. Your working tree contains changes that would be overwritten by checkout.`

**我怀疑这可能与我切换分支的原因有关：**

1.  我意识到我的`.gitignore`文件不起作用

2.  这是因为我之前提交了我现在试图忽略的文件（缓存文件）

**所以我经历了一个过程：**

1.  更新这些文件的权限

2.  删除它们

3.  更新每个分支中的 .gitignore 文件

4.  提交

我在每个分支上一个接一个地做这件事——从第三个分支开始，一直往回走。

现在这已在所有 3 个分支上完成，我无法切换回第三个分支。

第三个分支中的工作树现在是否有未提交的更改？

任何帮助将非常感激。

# objective-c - 术语“局部对象变量”是什么意思？

> ID：10038140
> 
> 赞同：2
> 
> 时间：2012-04-06T01:27:41.253
> 
> 标签：objective-c, terminology

“局部对象变量”是在方法中使用或初始化的变量，还是传入的参数？我在 Xcode 的文档或 Google 中找不到这个术语。

我在我正在使用的 Objective-C 书中找到了这一点。完整的报价是

> 作为基本 C 数据类型的局部变量没有默认初始值，因此您必须在使用它们之前将它们设置为某个值。reduce 方法中的三个局部变量在使用之前都设置了值，所以这里没有问题。**局部对象变量**默认初始化为*nil*。与您的实例变量（通过方法调用保留其值）不同，这些局部变量没有内存。因此，在方法返回后，这些变量的值就消失了。每次调用方法时，该方法中定义的每个局部变量都会重新初始化为使用变量声明指定的值（如果有）。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:35:54.573

根据您的评论，我明白这本书的意思。局部变量是特定范围的局部变量（在 C 和 Objective-C 中用大括号“{}”表示）。局部变量是在使用它们的范围内声明的，而不是全局变量，全局变量可以在全局范围内看到和使用（对于一个文件、多个文件或整个程序，取决于声明的可见性）。实例变量是类实例的一部分，可以被它的任何方法使用（如果使用@public 声明，其他类也可以使用，尽管这通常不是好的做法）。

原始局部变量是类型为 C 原始类型（如 int、float、char 等）的局部变量。本书所称的“局部对象变量”只是类型为（指向）Objective-C 对象的局部变量。例子`NSString *`是`NSDictionary *`和`id`。

局部变量存储在堆栈上，而不是堆上。堆栈上的变量在声明它们的方法或函数调用结束时消失。这个堆栈溢出问题有一些很好的答案来解释堆栈和堆之间的区别：堆栈和堆[是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

Google 搜索“局部变量objective-c”的第一个结果：http: [//blog.ablepear.com/2010/04/objective-c-tuesdays-local-variables.html](http://blog.ablepear.com/2010/04/objective-c-tuesdays-local-variables.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-20T14:09:39.103

局部变量是在方法中定义的，变量的作用域已经存在于方法本身中。

# javascript - 显示图像的一部分（图像条中的子图像）而不挤压它？

> ID：10038148
> 
> 赞同：4
> 
> 时间：2012-04-06T01:28:19.873
> 
> 标签：javascript, html, image, sprite

我在网页上有一张图片。然而，这是一个相当大的图像。它是 6144*768。实际上，它是一组 6 个图像混合在一起。

我读到加载这张图片而不是加载 6 张图片是更好的做法。当我使用表格和 CSS 时，我发现这也是正确的。

但是，当我将此图像设置为图像元素的来源，然后将图像元素的大小设置为 1024*768 时，图像会被挤压。确认！

如何仅使用 Javascript 使该图像不被挤压？另外，我怎么能移动图像的背景？

[示例：想象一条很长的纸条。然后，在纸条上的某处放置一个剪下的小矩形纸，这样您就只能看到矩形内部的纸条部分。这就是我想做的]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T01:47:56.883

将图像放在容器元素中，并使用 CSS 将溢出设置为隐藏。保持图像不变，它不会被压扁

# HTML

> ```
> <div id="imgContainer">
>     <img src="myImage.jpg" alt="" width="6144" height="768" />
> </div> 
> ```

# CSS

> ```
> #imgContainer
> {
>     height: 1024px;
>     width: 768px;
>     overflow: hidden;
> } 
> ```

然后移动图像，使用负值作为 CSS 样式`margin-left`。

> ```
> #imgContainer img
> {
>     margin-left: -1024px;
> } 
> ```

您可以使用 jQuery 执行此操作，如下所示

> ```
> $("#imgContainer img").css("margin-left", "-1024px") 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:34:40.527

OP 正在寻找的是[CSS Sprites](http://css-tricks.com/css-sprites/)（另见[A List Apart](http://www.alistapart.com/articles/sprites)或[Smashingmag](http://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T01:32:27.920

不要使用 CSS 缩放图像；相反，把它放在一个包装器 div 中，并在你的 CSS 中做这样的事情：

```
#myImageWrapper {
    height: 1024;
    width: 768;
    overflow: hidden;
} 
```

# php - 隐藏通过 php GET 传递的变量？

> ID：10038154
> 
> 赞同：2
> 
> 时间：2012-04-06T01:29:41.527
> 
> 标签：php, forms, variables, get, encode

我正在构建一个 mad libs 应用程序，当用户提交表单时，我在 url 中显示了所有变量，这很好，因为它可以被程序访问，你可以与你的朋友分享 url。我想知道是否有一种方法可以对 URL 进行编码，使其看起来像用户的随机字母，但变量仍然被传递。我不想将所有生成的故事存储在数据库中。我不想使用 POST，因为这会使朋友无法访问该页面。我是否应该坚持将所有变量留在那里查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:37:58.947

您可以将表单提交的结果存储在数据库中，并将 ID 粘贴到 URL 中。然后，如果您想让事情变得不那么明显，那么您可以将该整数的基数更改为 base16 或更高（因此 12 => A）。这样，如果您有其他完全相同数据的响应，那么您可以重用这些 ID。

该 URL 最终将是：

```
http://madlipswebsite.com/submission?i=XXXXX 
```

请记住，如果您计划将应用程序国际化，那么最好不要将实际值存储在 URL 中。

# .net - 如何检测 .NET WPF 内存泄漏或 GC 长期运行？

> ID：10038155
> 
> 赞同：6
> 
> 时间：2012-04-06T01:29:43.510
> 
> 标签：.net, wpf, memory-leaks, garbage-collection

我有下一个非常奇怪的情况和问题：

*   用于图表编辑 (WPF) 的 .NET 4.0 应用程序。

*   在我的 PC 上运行正常：8GB RAM，3.0GHz，i7 四核。

*   在创建对象（主要是图表节点和连接器，以及所有撤消/重做信息）时，TaskManager 显示，正如预期的那样，一些内存使用“跳跃”（向上和向下）。

*   在用户交互结束后，这些内存使用“跳转”也会继续执行。也许这是 GC 清理/重组内存？

*   为了查看发生了什么，我使用了 Ants 内存分析器，但它在某种程度上阻止了在用户交互之后发生这些“跳跃”。

问题：在我的 beta 测试人员的一些慢速/弱笔记本电脑/上网本（速度低于 2GHz 和 RAM 低于 2GB）中使用几秒钟或几分钟后，它会冻结/挂起。我在考虑内存泄漏，但是...

编辑1：此外，内存使用量会不断增长直到崩溃（仅在慢速机器中）。

*   在仅分配了 512MB RAM 的 Windows XP Mode 机器（Win 7 中的 VM）中，它可以在用户交互后没有内存使用“跳跃”的情况下正常工作（没有 GC 清理？！）。

编辑 2：当系统运行其他一些繁重的程序（如 Visual Studio、Office 和网页打开）时，问题会更糟。甚至连图表的第一个符号都无法创建，因为内存使用量像火箭一样飞向太空（数百 MB 在几秒钟内消耗）。有类似经历的人吗？他们的策略是什么？

所以，我真的遇到了很大的麻烦，因为我无法重现错误，只能看到这些奇怪的行为（内存跳跃），而应该向我展示正在发生的事情的工具却隐藏了问题（如“观察者悖论”）。

关于正在发生的事情以及如何解决它的任何想法？

编辑 3：Ants 内存分析器的此屏幕截图显示，如果来自非托管资源，则会大量消耗 ram（渐强）。

![在此处输入图像描述](../Images/6ccf31b5862e9813863e8bdca86ecef1.png)

但是，什么东西能消耗这么多内存，这么快？？？？！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:02:27.293

您所描述的对于 .NET 程序来说都是完全正常的行为，没有迹象表明您的代码有任何问题。

到目前为止，最大的问题是 TaskMgr.exe 并不是一个很好的程序来告诉您进程中发生了什么。它显示进程的“工作集”，这个数字与进程使用的内存量关系不大。

工作集是您的进程使用的 RAM 量。每个进程都有 2 GB 的*虚拟*内存用于代码和数据。即使在只有 512 MB RAM 的虚拟 XP 机器上。然而，所有这些进程都只有一定数量的 RAM 可供使用。在一台只有千兆字节的低端机器上。

显然，运行多个进程，每个进程都有千兆字节的虚拟内存和只有千兆字节的*真实*内存，这需要一些魔力。这是由操作系统提供的，Windows 虚拟化了 RAM。换句话说，它为每个进程创造了一种错觉，即它自己在具有 2 GB RAM 的机器上运行。这是通过一种称为*分页*的功能来完成的，每当一个进程需要读取或写入内存时，操作系统都会抓取一块 RAM 来提供物理内存。

不可避免地，它必须从另一个进程中取出*一些*RAM，以便您可以使用它。之前在该 RAM 块中的任何内容都需要保留。这就是*分页文件*的作用，它存储被分页的 RAM 内容。

显然，这不是免费的，磁盘非常慢，分页是一项昂贵的操作。这就是为什么当你要求它们运行几个大型程序时，低级机器表现不佳的原因。TaskMgr.exe 中也可以看到对此的真正衡量标准，但您必须添加它。查看+选择列并勾选“页面错误增量”。在您的流程运行时观察此数字。当您看到它出现峰值时，您可以预期您的程序会大大减慢并且显示的内存使用情况会迅速变化。

解决您的意见：

> 创建对象...... TaskManager 显示，正如预期的那样，一些内存使用“跳跃”

是的，您正在使用 RAM，因此工作集会增加。

> 这些内存使用“跳跃”在用户交互结束后仍然执行

没有灌篮，但其他进程有更多的时间来执行，依次使用 RAM 并将你的一些进程淘汰。检查页面错误增量列。

> 我使用了 Ants 内存分析器，但在某种程度上它可以防止在用户交互之后发生这些“跳跃”。

是的，内存分析器专注于程序的实际内存使用情况，即虚拟内存类型。他们在很大程度上忽略了工作集，您对此无能为力，而且这个数字毫无意义，因为它实际上取决于正在运行的*其他*进程。

> 存在内存使用量不断增长直到崩溃的情况

这可能是垃圾收集器的副作用，但这并不典型。您可能只是看到 Windows 正在修剪您的工作集，丢弃页面，这样您就不会消耗太多。

> 在仅分配了 512MB RAM 的 Windows XP Mode 机器（Win 7 中的 VM）中，它工作正常

这可能是因为您没有在该 WM 上安装任何会争夺 RAM 的大型程序。XP 还被设计为在内存很少的机器上运行良好，在 256 MB 的机器上运行流畅。Vista/Win7 绝对不是这种情况，它们旨在利用现代机器硬件。像 Aero 这样的功能很吸引眼球，但*非常*昂贵。

> 当系统运行其他一些繁重的程序时，问题会更糟

是的，您正在与需要大量 RAM 的其他进程竞争。

> 当内存使用像火箭一样起飞时，甚至无法创建图表的第一个符号

是的，您看到页面被映射回 RAM，从分页文件和 ngen-ed .ni.dll 文件重新加载。再次快速增加您的工作集。您还将看到页面错误增量数达到峰值。

综上所述，您的 WPF 程序只会消耗大量内存，并且需要马力才能正常运行。这不容易解决，需要进行相当大的重新设计才能降低资源需求。所以只要把系统要求放在盒子上，这样做是完全正常的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T01:53:36.850

这表明您可能会创建很多“垃圾” - 基本上，创建并让许多对象快速超出范围，但这需要足够长的时间才能进入 Gen1 或 Gen2。这给 GC 带来了很大的负担，这反过来又会导致许多系统冻结和挂起。

> 为了查看发生了什么，我使用了 Ants 内存分析器，但它在某种程度上阻止了在用户交互之后发生这些“跳跃”。

这个分析器（ANTS）可以掩盖这种行为的原因是它每次拍摄内存快照时都会强制执行一次完整的 GC。这将使它看起来没有内存“泄漏”（因为没有），但不会显示系统上的总内存压力。

[PerfView](http://blogs.msdn.com/b/vancem/archive/2011/12/28/publication-of-the-perfview-performance-analysis-tool.aspx)之类的工具可用于调查进程运行期间 GC 的行为。这将帮助您跟踪发生的 GC 数量，以及您在该时间点的应用程序状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T20:39:01.337

如果没有看到您的代码，很难确切地知道发生了什么，但这里有一些建议：

首先，关于垃圾收集器的一些信息。最重要的是要知道 GC 是不确定的，你无法知道它什么时候会运行。即使调用 GC.Collect() 也只是一个建议，而不是命令。Gen0 堆用于本地范围的对象，并且经常被收集。如果一个对象在 Gen0 集合中幸存下来，它将被移动到 Gen1 堆。稍后，Gen1 堆将被收集，如果一个对象在收集中幸存下来，它将被移动到不太频繁收集的 Gen2 堆。出于这个原因，如果您分配了许多使其进入 Gen1 或 Gen2 堆的对象，则可能会在内存图中看到锯齿模式。

使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653)之类的工具检查托管堆（Gen0、Gen1、Gen2 和大对象堆）的大小并找出内存所在的位置。如果您有很多短期对象（Gen1 堆），请考虑一种重用内存而不是重新分配内存的方法 -[对象池](http://en.wikipedia.org/wiki/Object_pool_pattern)之类的东西非常适合。

此外，尝试将托管堆的总大小与应用程序的总私有字节数进行比较。私有字节包括应用程序分配的托管和非托管内存。如果托管堆的大小和私有字节之间存在很大差异，则很可能您的应用程序正在分配未正确处理的非托管对象（通过图形对象、流等）。查找实现 IDisposable 但没有调用 Dispose() 的对象。

另一个问题可能是堆碎片。如果您的应用程序正在分配无法放入当前堆的大型对象，它将向操作系统请求更多内存。避免这种情况的解决方案是分配较小的块或内存，或者以顺序块而不是随机分配它们（想想数组与链表）。像 ANTS 内存分析器这样的工具应该能够告诉您这种情况正在发生。

@ReedCopsey 推荐 PerfView（或它的前身 CLR Profiler）是一个很好的建议，它可以让您更好地了解内存是如何分配的。

# objective-c - 翻转、增长和翻译动画

> ID：10038156
> 
> 赞同：8
> 
> 时间：2012-04-06T01:29:46.940
> 
> 标签：objective-c, ios, cocoa-touch, ipad, core-animation

看看MLB At Bat 应用程序的[这段视频](http://youtu.be/qIqv3OH9XIU?t=1m12s)。基本上，我只想展示一个`modalViewController`风格`UIModalPresentationFormSheet`，让它从另一个视图中生长，然后翻转。就像您在 MLB 应用程序的记分板上点击游戏一样。有谁知道我怎么能做到这一点？

谢谢

编辑：我的主要观点与 MLB 应用程序的设置几乎相同。我正在使用`AQGridView`并希望在点击网格视图中的单元格时发生动画。

编辑2：我也愿意放弃这个`UIViewController`概念，只使用一个 plain `UIView`，然后`UIModalPresentationFormSheet`手动复制风格，如果这样更容易的话。

编辑 3：好的，忘记使用 a`UIViewController`来执行此操作，因为我没有得到任何回复，我会假设这是不可能的。我的新问题是如何使用 just 复制已发布视频中的动画`UIView`？所以基本上，初始视图需要同时增长、移动和翻转。

编辑4：我想我已经弄清楚了实际的动画，现在我唯一的问题是计算要输入的坐标`CATransform3DTranslate`。我的视图需要像视频中一样进行动画处理。它需要从另一个视图开始并动画到屏幕的中心。这是我尝试计算在中心弹出的视图的坐标的方法：

```
CGPoint detailInitialPoint = [gridView convertPoint:view.frame.origin toView:detailView.frame.origin];
CGPoint detailFinalPoint = detailView.frame.origin; 
```

`gridView`是我的主视图的容器视图，其中包含较小的网格项。`view`是我们从中制作动画的特定网格项目。并且`detailView`是出现在屏幕中间的视图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T03:15:34.653

您可以使用 UIViewControler 上的类别实现自己的转换。

**UIViewController+ShowModalFromView.h**

```
#import <Foundation/Foundation.h>
#import <QuartzCore/QuartzCore.h>

@interface UIViewController (ShowModalFromView)
- (void)presentModalViewController:(UIViewController *)modalViewController fromView:(UIView *)view;
@end 
```

**UIViewController+ShowModalFromView.m**

```
#import "UIViewController+ShowModalFromView.h"

@implementation UIViewController (ShowModalFromView)

- (void)presentModalViewController:(UIViewController *)modalViewController fromView:(UIView *)view {
    modalViewController.modalPresentationStyle = UIModalPresentationFormSheet;

// Add the modal viewController but don't animate it. We will handle the animation manually
[self presentModalViewController:modalViewController animated:NO];

// Remove the shadow. It causes weird artifacts while animating the view.
CGColorRef originalShadowColor = modalViewController.view.superview.layer.shadowColor;
modalViewController.view.superview.layer.shadowColor = [[UIColor clearColor] CGColor];

// Save the original size of the viewController's view    
CGRect originalFrame = modalViewController.view.superview.frame;

// Set the frame to the one of the view we want to animate from
modalViewController.view.superview.frame = view.frame;

// Begin animation
[UIView animateWithDuration:1.0f
                 animations:^{
                     // Set the original frame back
                     modalViewController.view.superview.frame = originalFrame;
                 }
                 completion:^(BOOL finished) {
                     // Set the original shadow color back after the animation has finished
                     modalViewController.view.superview.layer.shadowColor = originalShadowColor;
                 }];
}

@end 
```

这可以很容易地更改为使用您想要的任何动画过渡；对于您的，您可能想要使用 CA3DTransform。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:28:56.017

要进行翻转、增长和平移动画，您可以使用以下代码：

```
- (void)animate {
    int newX, newY; //New position
    int newW, newH; //New size
    [UIView animateWithDuration:someDuration delay:someDelay animations:^{
        yourView.transform = CATransform3DMakeRotation(M_PI_2,1.0,0.0,0.0); //flip halfway
        yourView.frame = CGRectMake(newX/2, newY/2, newW/2, newH/2);
    } completion:^{
        while ([yourView.subviews count] > 0)
            [[yourView.subviews lastObject] removeFromSuperview]; // remove all subviews
        // Add your new views here 
        [UIView animateWithDuration:someDuration delay:someDelay animations:^{
            yourView.transform = CATransform3DMakeRotation(M_PI,1.0,0.0,0.0); //finish the flip
            yourView.frame = CGRectMake(newX, newY, newW, newH);
        } completion:^{
            // Flip completion code here
        }];
    }];
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T20:51:29.173

好的，我想通了。这是我所做的：

```
CGFloat duration = 0.8;

/*
//Detail View Animations 
*/

CATransform3D initialDetailScale = CATransform3DMakeScale(view.frame.size.width/vc.view.frame.size.width, view.frame.size.height/vc.view.frame.size.height, 1.0);
CATransform3D initialDetailTransform = CATransform3DRotate(initialDetailScale, -M_PI, 0.0, -1.0, 0.0);
CATransform3D finalDetailScale = CATransform3DMakeScale(1.0, 1.0, 1.0);
CATransform3D finalDetailTransform = CATransform3DRotate(finalDetailScale, 0.0, 0.0, -1.0, 0.0);

NSMutableArray *detailAnimations = [NSMutableArray array];

CABasicAnimation *detailTransform = [CABasicAnimation animationWithKeyPath:@"transform"];
detailTransform.fromValue = [NSValue valueWithCATransform3D:initialDetailTransform];
detailTransform.toValue = [NSValue valueWithCATransform3D:finalDetailTransform];
detailTransform.duration = duration;
[detailAnimations addObject:detailTransform];

CABasicAnimation *detailFadeIn = [CABasicAnimation animationWithKeyPath:@"opacity"];
detailFadeIn.fromValue = [NSNumber numberWithFloat:1.0];
detailFadeIn.toValue = [NSNumber numberWithFloat:1.0];
detailFadeIn.duration = duration/2;
detailFadeIn.beginTime = duration/2;
[detailAnimations addObject:detailFadeIn];

CABasicAnimation *detailMove = [CABasicAnimation animationWithKeyPath:@"position"];
detailMove.fromValue = [NSValue valueWithCGPoint:vc.view.layer.position];
detailMove.toValue = [NSValue valueWithCGPoint:self.view.layer.position];
detailMove.duration = duration;
[detailAnimations addObject:detailMove];

CAAnimationGroup *detailGroup = [CAAnimationGroup animation];
[detailGroup setAnimations:detailAnimations];
[detailGroup setDuration:duration];
detailGroup.removedOnCompletion = NO;
detailGroup.fillMode = kCAFillModeForwards;
detailGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
[vc.view.layer addAnimation:detailGroup forKey:@"anim"];

/*
//Grid Item View Animations
*/

CATransform3D initialGridScale = CATransform3DMakeScale(1.0, 1.0, 1.0);
CATransform3D initialGridTransform = CATransform3DRotate(initialGridScale, 0.0, 0.0, 1.0, 0.0);
CATransform3D finalGridScale = CATransform3DMakeScale(vc.view.frame.size.width/view.frame.size.width, vc.view.frame.size.height/view.frame.size.height, 1.0);
CATransform3D finalGridTransform = CATransform3DRotate(finalGridScale, M_PI, 0.0, 1.0, 0.0);

NSMutableArray *gridAnimations = [NSMutableArray array];

CABasicAnimation *gridTransform = [CABasicAnimation animationWithKeyPath:@"transform"];
gridTransform.fromValue = [NSValue valueWithCATransform3D:initialGridTransform];
gridTransform.toValue = [NSValue valueWithCATransform3D:finalGridTransform];
gridTransform.duration = duration;
[gridAnimations addObject:gridTransform];

CABasicAnimation *gridFadeOut = [CABasicAnimation animationWithKeyPath:@"opacity"];
gridFadeOut.fromValue = [NSNumber numberWithFloat:0.0];
gridFadeOut.toValue = [NSNumber numberWithFloat:0.0];
gridFadeOut.duration = duration/2;
gridFadeOut.beginTime = duration/2;
[gridAnimations addObject:gridFadeOut];

CABasicAnimation *gridMove = [CABasicAnimation animationWithKeyPath:@"position"];
gridMove.fromValue = [NSValue valueWithCGPoint:view.layer.position];
gridMove.toValue = [NSValue valueWithCGPoint:[self.view.layer convertPoint:self.view.layer.position toLayer:gridView.layer]];
gridMove.duration = duration;
[gridAnimations addObject:gridMove];

CAAnimationGroup *gridGroup = [CAAnimationGroup animation];
[gridGroup setAnimations:gridAnimations];
gridGroup.duration = duration;
gridGroup.fillMode = kCAFillModeForwards;
gridGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
gridGroup.removedOnCompletion = NO;
[view.layer addAnimation:gridGroup forKey:@"anim"]; 
```

我正在使用`AQGridView`. 在我的代码示例中是我正在制作动画`view`的实例。`AQGridViewCell`并且`vc.view`是我正在展示的细节`UIViewController`/ `UIView`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T17:53:47.167

我强烈建议您看看[这篇](https://stackoverflow.com/a/6654019)文章。

您不需要自己实际处理所有这些动画。

如果您使用`UIView`类方法[transitionFromView:toView:duration:options:completion:](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/transitionFromView:toView:duration:options:completion:)并传入`UIViewAnimationOptionTransitionFlipFromLeft`或`UIViewAnimationOptionTransitionFlipFromRight`-- 无论您希望动画以哪种方式翻转。

我已经使用这种方法实现了与 MLB 应用程序中显示的相同的东西。您`from view`将是网格中的单元格，而`to view`将是单元格“背面”的内容。

希望这将减少您需要的整体代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T19:58:02.820

我会使用带有自定义 UICollectionViewCell 的 UICollectionView 并使用其委托调用进行动画处理......只是其他人可以选择的示例。

```
#pragma mark - UICollectionViewDelegate
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:  
(NSIndexPath *)indexPath
{

[UIView beginAnimations:@"showImage" context:Nil];
    CGRect cellFrame = cell.frame;
    CGRect imgFram = cell.imageView.frame;
    [UIView setAnimationDuration:0.8];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:cell   
cache:YES];
    cellFrame.size = CGSizeMake(200, 200);
    cellFrame.origin.y = 10;
    cellFrame.origin.x = 45;
    cell.frame = cellFrame;
    imgFram.size = CGSizeMake(200, 200);
    cell.imageView.frame = imgFram;
    [collectionView bringSubviewToFront:cell];
    [UIView commitAnimations];
} 
```

# delphi - Delphi XE2 VCL 样式，更新标题阻止其他控件失效

> ID：10038161
> 
> 赞同：25
> 
> 时间：2012-04-06T01:30:39.797
> 
> 标签：delphi, styles, delphi-xe2, vcl, skinning

发现 VCL 样式的一个小故障：当您更新表单标题时，以前在同一过程中重绘的其他控件不会被重绘，并且您被迫调用 Repaint，从而失去了重绘的宝贵处理时间。

示例：（手动设置项目选项/vcl 样式）

```
unit Unit11;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ExtCtrls;

type
  TForm11 = class(TForm)
    Button1: TButton;
    Panel1: TPanel;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form11: TForm11;

implementation

{$R *.dfm}

procedure TForm11.Button1Click(Sender: TObject);
begin
  Panel1.Caption := 'test';
  caption := 'glitch';
end;

end.

object Form11: TForm11
  Left = 0
  Top = 0
  Caption = 'Form11'
  ClientHeight = 89
  ClientWidth = 352
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Button1: TButton
    Left = 8
    Top = 8
    Width = 121
    Height = 57
    Caption = 'Button1'
    TabOrder = 0
    OnClick = Button1Click
  end
  object Panel1: TPanel
    Left = 135
    Top = 8
    Width = 185
    Height = 57
    Caption = 'Panel1'
    TabOrder = 1
  end
end

program Project10;

uses
  Vcl.Forms,
  Unit11 in 'Unit11.pas' {Form11},
  Vcl.Themes,
  Vcl.Styles;

{$R *.res}

begin
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  TStyleManager.TrySetStyle('Cobalt XEMedia');
  Application.CreateForm(TForm11, Form11);
  Application.Run;
end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:41:54.990

按顺序设置字幕调用。

*   首先是 form.caption，然后是 child.caption。

一旦你调用了错误的序列，然后停止工作正确的序列。这就是我在这里使用“设置默认值”按钮的原因。

这个继续，只要没有修复它，我可以忍受。

![在此处输入图像描述](../Images/8f650ca9710032d475ab9711d813850e.png)

```
procedure TForm11.Button1Click(Sender: TObject);
begin // wrong order
  Panel1.Caption := 'test';
  caption := 'glitch';
end;

procedure TForm11.Button2Click(Sender: TObject);
begin // right order
  caption := 'glitch';
  Panel1.Caption := 'test';
end;

procedure TForm11.Button3Click(Sender: TObject);
var
i:integer;
begin // count no refresh
  for  i:= 1 to 300 do begin
  caption := 'glitch '+intToStr(i);
  Panel1.Caption := 'test '+intToStr(i);
  end;
end;

procedure TForm11.Button4Click(Sender: TObject);
var
i:integer;
begin // count with refresh
  for  i:= 1 to 300 do begin
  caption := 'glitch '+intToStr(i);
  Panel1.Caption := 'test '+intToStr(i);
  Panel1.Refresh;
  end;
end;

procedure TForm11.Button5Click(Sender: TObject);
begin // set default
  caption := 'Form11';
  Panel1.Caption := 'Panel1';
  Panel1.Refresh;
end;

end. 
```

如果你找到了另一个解决方案。请告诉我。

# c++ - 在类中获取“this”的上下文并分配给类指针 TheClass*

> ID：10038167
> 
> 赞同：0
> 
> 时间：2012-04-06T01:31:40.030
> 
> 标签：c++, class, pthreads

```
class classe (){
public: 
    int key;

    static void *funct(void *context){
        printf("Output: %d, ", key);
    }

    void Go(){
        classe c = static_cast<this>(context); //<- This doesn't work, Context of this-> goes here
        pthread_create(&t, NULL, &classe::funct, c);
    }
};

int main(){

    classe c;
    c.key = 15;
    c.Go();

    c.key = 18;
    c.Go();
} 
```

输出应该是`Output: 15, Output: 18,`，事情是获取`this`抛出错误的上下文。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T01:38:48.933

我可以看到您的代码存在一些问题：

首先，`static_cast<>`需要 , 中的类型`<>`，并且`this`像变量一样（所以不是类型）。的类型`this`是`classe*`（指向`classe`对象的指针）内`classe`。

其次，没有`context`可用的`classe:Go()`。该名称有一个参数`classe::fuct()`，但在您想使用它的地方不可用。

第三，`pthread_create()`假设一个自由函数（或静态成员函数）并且您提供了一个类成员函数（`classe::funct`）。类成员函数需要一个对象才能工作（有点像隐式参数 == `this`）。您也没有可以传递给的`t`定义`classe::Go()``pthread_create()`

你可以试试：

```
static void *funct(void *key){ // funct is now a free function, all data is provided to it
    printf("Output: %d, ", *static_cast<int*>(key)); 
} 

class classe ()
{ 
public:  
  int key; 

  void Go(){
    pthread t; 
    pthread_create(&t, NULL, funct, &key); // pass (address of) key to funct
  } 
}; 

int main(){ 

  classe c; 
  c.key = 15; 
  c.Go(); 

  c.key = 18; 
  c.Go(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:36:06.320

首先，您需要在`context`某个地方定义。其次，`this`是一个关键字，表示指向正在调用成员函数的对象的指针。`static_cast`在模板参数中需要一个类型。替换`static_cast<this>`为`static_cast<classe*>`, 并将类型更改为`c`以`classe *`使语句编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T01:57:13.120

尝试这样的事情：

```
#include <stdio.h>
#include <pthread.h>

class classe
{
public: 
    int key;

    static void* funct(void *context)
    {
        classe* c = static_cast<classe*>(context);
        printf("Output: %d, ", c->key);
        return context;
    }

    void Go()
    {
        pthread_t t;
        pthread_create(&t, NULL, &classe::funct, this);
        void* p = 0;
        pthread_join(t, &p);
    }
};

int main()
{
    classe c;
    c.key = 15;
    c.Go();

    c.key = 18;
    c.Go();
    return 0;
} 
```

我将使用上下文移动到正确的函数，并添加了 pthread_join 以便程序在线程有机会运行之前不会退出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T01:50:02.963

您似乎对某些关键部分的去向感到有些困惑。这是一个粗略的骨架，我认为它可以满足您的大部分需求。

```
class classe {
    public:
        classe(int k) : key(k) { }

        void Go() {
            // where does "t" come from?
            pthread_create(&t, NULL, &funct, static_cast<void*>(this));
        }

    private:
        int key;

        static void* funct(void* context) {
            classe* self = static_cast<classe*>(context);
            printf("Output: %d ", self->key);
            return 0; // not sure this is what you want
        }
};

int main() {
    classe c(15);
    c.Go();
} 
```

# google-chrome - 使用注册表添加外部扩展

> ID：10038172
> 
> 赞同：1
> 
> 时间：2012-04-06T01:32:26.220
> 
> 标签：google-chrome, google-chrome-extension

[我使用 Windows 7（64 位）并在Google Document](http://code.google.com/chrome/extensions/external_extensions.html)中重复步骤。

这是我在注册表中添加的。

```
In HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Google\Chrome\Extensions\nbfjanngloflombfddlmkgnambnfhgjc
path="C:\Extension.crx"
version="2.1" 
```

但是没有安装扩展。

在测试 .crx 文件分发之前，

我通过 UI(chrome://extensions) 多次安装和卸载了这个带有解压文件的扩展，用于开发和使用 register 测试设置策略。（但我现在删除了所有这些。）

它会导致任何问题吗？

但是当我在另一台干净的 PC（Windows XP 32 位）上测试同样的东西时，也没有任何改变。

[我已经多次检查了谷歌文档](http://code.google.com/chrome/extensions/external_extensions.html)中的一些常见错误，但我找不到任何错误。

```
- Not specifying the same id/version as the one listed in the .crx
- Key created in the wrong location in the registry
- Registry entry points to the wrong path to the .crx file (or path specified but no filename)
- Permissions problems on a network share 
```

我应该检查安装外部扩展程序的其他常见错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-26T16:46:34.317

根据此页面 - [https://developer.chrome.com/extensions/external_extensions](https://developer.chrome.com/extensions/external_extensions) - 不再可以使用注册表方法安装本地托管的 .crx 文件。事实上，唯一允许的扩展是来自 Google 扩展库的扩展。

请参阅以下来自 Google 政策页面的报价：

```
An extension that's installed automatically is known as an external extension. Google Chrome supports two ways of installing external extensions:

-Using a preferences JSON file (Mac OS X and Linux only)
-Using the Windows registry (Windows only)

Both ways support installing an extension hosted at an update_URL. In the Windows registry, the update_URL must point to the Chrome Web Store where the extension is hosted. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:13:02.217

1.  扩展 ID 不能随意选择。
    我已经`.crx`在 Chromium 18 (Linux) 和 Chrome 18 ( [VirtualBox 中的 Windows 7](https://stackoverflow.com/a/9538163/938089?which-version-of-windows-7-should-i-buy-to-run-under-vmware-fusion-for-web-dev) ) 中安装了您的文件，正确的扩展 ID 是：**`lhmigopickaaleaaelbppeabnbdgcdhe`**
2.  版本号必须匹配。在`manifest.json`文件中，在扩展名中，我看到`"version": "1.0"`. 因此，`version`注册表中的条目必须是`1.0`.
3.  我无法使用文档中的步骤通过注册表安装扩展。我找到了两种通过注册表安装扩展的正确方法。创建一个`.reg`文件，然后粘贴下面的文本以安装扩展：

**`set_page_color_chrome-extension.reg`**（基于[此文件](http://www.printmade.co.kr/oz/stackoverflow/set_page_color.crx)，^(md5: 10a1b95c249a2481bc88d3d1aead0e33)）。

```
Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SOFTWARE\Google\Chrome\Extensions\lhmigopickaaleaaelbppeabnbdgcdhe]
"version"="1.0"
"path"="C:\\set_page_color.crx" 
```

如果您遇到权限问题，或者您只想为当前用户安装扩展程序，请替换`HKEY_LOCAL_MACHINE`为。`HKEY_CURRENT_USER`

# opencv - 具有方向梯度直方图 (HOG) 特征类型的 OpenCV 级联分类

> ID：10038174
> 
> 赞同：3
> 
> 时间：2012-04-06T01:33:15.630
> 
> 标签：opencv, classification, object-detection

我正在尝试使用基于定向对象直方图 (HOG) 特征类型的 OpenCV 级联分类器——例如论文*“Fast Human Detection Using a Cascade of Histograms of Oriented Gradients”*。

在网上搜索，我发现 OpenCV 的 Cascade Classificator 只支持 HAAR/LBP 特征类型（[OpenCV Cascade Classification](http://opencv.willowgarage.com/documentation/cpp/objdetect_cascade_classification.html)）。

*   有没有办法将 HOG 与 OpenCV 级联分类器一起使用？你有什么建议？
*   有我可以使用的补丁或其他库吗？

提前致谢！

**编辑 1**

我一直在搜索，当我终于在[android-opencv](https://groups.google.com/forum/?fromgroups#!topic/android-opencv/Smu-0aEzsPw)中发现Cascade Classifier 中有一个树干允许它使用 HOG 功能时。但我不知道它是否有效......

链接：[http ://code.opencv.org/projects/opencv/repository/revisions/6853](http://code.opencv.org/projects/opencv/repository/revisions/6853)

**编辑 2**

我没有测试上面的fork，因为我的问题已经改变了。但是我发现了一个有趣的链接，它可能在将来非常有用（当我回到这个问题时）。

本页包含论文“Histograms of Oriented Gradients for Human Detection”的源代码。此外，更多信息。[http://pascal.inrialpes.fr/soft/olt/](http://pascal.inrialpes.fr/soft/olt/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T22:21:15.703

如果您使用 OpenCV-Python，那么您可以选择使用一些其他库，例如[scikits.image](http://scikits-image.org/)，这些库具有内置的定向梯度直方图。

几个月前我不得不解决同样的问题，并在这个[项目页面上](http://people.seas.harvard.edu/~ely/faceparts/software.html)记录了大部分工作（包括 HoG 的非常基本的 Python 实现，以及使用 PyCUDA 的 HoG 的 GPU 实现） 。那里有可用的代码。GPU 代码应该相当容易修改以便在 C++ 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T08:55:18.640

它现在似乎也可以在非 python 代码中使用。2.4.3 中的 opencv_traincascade 有一个 HOG 特征类型选项（我没有尝试）：

```
 [-featureType <{HAAR(default), LBP, HOG}>] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-28T12:10:38.130

是的，您可以使用`cv::CascadeClassifier`功能`HOG`。要做到这一点，只需加载它`hogcascade_pedestrians.xml`，您可能会在`opencv_src-dir/data/hogcascades`.

与...`hogcascade`相比，分类器工作得更快，结果也更好。`haarcascade`

# python - 为什么python多线程和Queue无助于加速读取大量文件？

> ID：10038178
> 
> 赞同：0
> 
> 时间：2012-04-06T01:34:02.167
> 
> 标签：python, multithreading, queue

我正在编写一个 Python 程序来从本地文件系统读取大约 110000 多个文本文件并将它们推送到 MongoDB。这是我的代码片段。

类 EmailProducer (threading.Thread):

```
def __init__(self, threadID, queue, path):
    self.threadID = threadID
    self.queue = queue
    self.path = path
    threading.Thread.__init__(self)

def run(self):
    if (queue.empty()):
        files = os.listdir(self.path)
        print(len(files))
        for file in files:
            queue.put(file) 
```

类 EmailConsumer (threading.Thread):

```
def __init__(self, threadID, queue, path, mongoConn):
    self.threadID = threadID
    self.queue = queue
    self.mongoConn = mongoConn
    self.path = path
    threading.Thread.__init__(self)
def run(self):
    while (True):
        if (queue.empty()):
            mongoConn.close()
            break
        file = queue.get()
        self.mongoConn.persist(self.path, file) 
```

EmailProducer 实例从本地文件系统读取文件，如果队列为空，则将它们存储在队列中；和 EmailConsumer 实例从队列中获取文件并将它们推送到 Mongo。我还编写了相同功能的顺序版本。我在带有 i-5 四核处理器的 ubuntu 12.04 32 位台式机上同时运行它们，并对它们进行了计时。多线程版本从 1 个生产者和 7 个消费者开始。但是，它们都花费了大约 23.7 秒的实时时间和 21.7 秒的用户时间。我认为线程在这里会有所帮助，但数字告诉我它没有帮助。

任何人对原因有任何深刻的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T01:37:26.190

线程对于 IO 绑定操作不是很有用。特别是没有全局解释器锁。所以一次只有一个线程在运行。我很惊讶没有线程它并没有更快。查看使用[选择模块](http://docs.python.org/library/select.html)或第三方库异步读取文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:43:03.860

Python 线程在某种程度上受到CPython 中的[Global Interpreter Lock的限制，这](http://wiki.python.org/moin/GlobalInterpreterLock)[被认为在性能方面非常差](https://blip.tv/carlfk/mindblowing-python-gil-2243379)，并且可能有助于您的结果。

所有 C 级扩展还需要特定的 GIL 支持，以避免通过在阻塞外部资源的同时持有 GIL[来“击败线程” 。](http://docs.python.org/c-api/init.html#threads)这意味着如果您使用 C 层库来与 MongoDB 通信，则它可能会在运行时阻塞其他线程。（我不知道它是否确实如此 - 只是它可能。）

# java - Java Else If Block 不能正常工作

> ID：10038179
> 
> 赞同：1
> 
> 时间：2012-04-06T01:34:17.190
> 
> 标签：java

希望这是一个快速的问题。我正在制作一个简单的石头剪刀布游戏。我做一个随机的计算机选择很好，让用户的选择很好。但是当我试图找出谁获胜时，它会在我的 else if 块中打印最后一个 else if 用于无效输入。

当做出正确的选择时，它会打印“输入一个有效的选择”。

```
import java.util.Random;
import javax.swing.JOptionPane;

public class JavaApplication4 {

    public static void main(String[] args) 
    {
        Random ranNums = new Random();

        int comp = ranNums.nextInt(3);
        String comp2;
        String winner;

        String user = JOptionPane.showInputDialog
                (null, "Enter rock, paper, or scissors");
        user.toLowerCase();

        if(comp == 0)
            comp2 = "rock";
        else if(comp == 1)
            comp2 = "paper";
        else 
            comp2 = "scissors";

        //Computer wins
        if(comp2 == "rock" && user == "scissors")
            winner = "The computer wins";

        else if(comp2 == "paper" && user == "rock")
            winner = "The computer wins";    

        else if(comp2 == "scissors" && user == "paper")
            winner = "The computer wins";

        //Tie game
        else if(comp2 == "rock" && user == "rock")
            winner = "It's a tie";

        else if(comp2 == "paper" && user == "paper")
            winner = "It's a tie";

        else if(comp2 == "scissors" && user == "scissors")
            winner = "It's a tie";

        //User wins
        else if(comp2 == "scissors" && user == "rock")
            winner = "You win!";

        else if(comp2 == "rock" && user == "paper")
            winner = "You win!";

        else if(comp2 == "paper" && user == "scissors")
            winner = "You win!";
        else
            winner = "Enter a valid choice";

        JOptionPane.showMessageDialog(null, "You picked " + user + "\n" +
            "The computer picked " + comp2 + "\n" +
                winner);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T01:37:27.897

你不能用

```
comp == "paper" 
```

比较java中的字符串。你用

```
comp.equals("paper") 
```

或者如果大小写无关紧要

```
comp.equalsIgnoreCase("paper") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T01:36:38.183

不要使用`==`. 请改用 equals 或 equalsIgnoreCase(...) 方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

简化代码的一种方法是创建 RockPaperScissors 枚举并为其提供比较方法。就像是：

```
enum RockPaperScissors {
   ROCK("Rock"), PAPER("Paper"), SCISSORS("Scissors");

   private String text;
   private static int[][] winMatrix = {{0, -1, 1}, {1, 0, -1}, {-1, 1, 0}};

   private RockPaperScissors(String text) {
      this.text = text;
   }

   @Override
   public String toString() {
      return text;
   }

   // can't use compareTo since it is a final method for enums
   public int compareVs(RockPaperScissors other) {
      int thisOrdinal = ordinal();
      int otherOrdinal = other.ordinal();
      return winMatrix[thisOrdinal][otherOrdinal];
   }
} 
```

然后比较一个枚举与另一个枚举，只需调用它的 compareVs(...) 方法传入另一个枚举。

所以你巨大的 if/else 块将减少到：

```
// assuming that user and comp are RockPaperScissors variables
int result = user.compareVs(comp);
if (result == 1) {
   System.out.println("You've won!");
} else if (result == 0) {
   System.out.println("It's a tie!");
} if (result == -1) {
   System.out.println("You've lost!");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T01:43:41.593

如果你像我一样喜欢原始代码：

```
import java.util.Random; 
import javax.swing.JOptionPane;

public class JavaApplication4 {

public static void main(String[] args) 
{
    Random ranNums = new Random();

    int comp = ranNums.nextInt(3);
    String comp2;
    String winner;

    String user = JOptionPane.showInputDialog
            (null, "Enter rock, paper, or scissors");
    user.toLowerCase();

    if(comp == 0)
        comp2 = "rock";
    else if(comp == 1)
        comp2 = "paper";
    else 
        comp2 = "scissors";

    //Computer wins
    if(comp2.equals("rock") && user.equals( "scissors"))
        winner = "The computer wins";

    else if(comp2.equals("paper") && user.equals( "rock"))
        winner = "The computer wins";    

    else if(comp2.equals("scissors") && user.equals( "paper"))
        winner = "The computer wins";

    //Tie game
    else if(comp2.equals("rock") && user.equals( "rock"))
        winner = "It's a tie";

    else if(comp2.equals("paper") && user.equals( "paper"))
        winner = "It's a tie";

    else if(comp2.equals("scissors") && user.equals( "scissors"))
        winner = "It's a tie";

    //User wins
    else if(comp2.equals("scissors") && user.equals( "rock"))
        winner = "You win!";

    else if(comp2.equals("rock") && user.equals( "paper"))
        winner = "You win!";

    else if(comp2.equals("paper") && user.equals( "scissors"))
        winner = "You win!";
    else
        winner = "Enter a valid choice";

    JOptionPane.showMessageDialog(null, "You picked " + user + "\n" +
        "The computer picked " + comp2 + "\n" +
            winner);
}
} 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T01:36:43.053

你不能像这样比较字符串：`if (comp2 == "rock")`

你需要写：`if ("rock".equals(comp2))`

# mysql - 使用mysql在表的最后一行显示总和

> ID：10038180
> 
> 赞同：8
> 
> 时间：2012-04-06T01:34:21.307
> 
> 标签：mysql, sql, select, aggregate-functions

我有以下表格元素我如何运行一个重现表格的查询，但在底部有一个额外的行显示 col2 的总和

```
Col1  | col2  
---------------
Water |  22  
water |   3      
water |   5      
Air   |  10      
Earth |   3       
Air   |   5 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T01:37:06.623

我不知道你为什么想要那个，但试试这个：

```
SELECT Col1, Col2 FROM tableName
UNION
SELECT 'SUM' as Col1, SUM(Col2) Col2 FROM tableName 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T04:44:38.887

```
insert into table_name(col2) (select sum(col2) from table_name) as a 
```

告诉我这是否有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T05:00:46.497

```
select IFNULL(col1,'SUM') col1,sumcol2 col2
from (select col1,col2,sum(col2) sumcol2
from summation_trick
group by col1,col2
with rollup) B
where (col1 is null and col2 is null)
or (col1 is not null and col2 is not null); 
```

这是您加载的数据

```
mysql> use junk
Database changed
mysql> drop table if exists summation_trick;
Query OK, 0 rows affected (0.04 sec)

mysql> create table summation_trick
    -> (
    ->     col1 varchar(20),
    ->     col2 int
    -> );
Query OK, 0 rows affected (0.09 sec)

mysql> insert into summation_trick values
    -> ('Water',22  ),('water', 3  ),
    -> ('water', 5  ),('Air'  ,10  ),
    -> ('Earth', 3  ),('Air'  , 5  );
Query OK, 6 rows affected (0.05 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> 
```

这是执行的查询

```
mysql> select IFNULL(col1,'SUM') col1,sumcol2
    -> from (select col1,col2,sum(col2) sumcol2
    -> from summation_trick
    -> group by col1,col2
    -> with rollup) B
    -> where (col1 is null and col2 is null)
    -> or (col1 is not null and col2 is not null);
+-------+---------+
| col1  | sumcol2 |
+-------+---------+
| Air   |       5 |
| Air   |      10 |
| Earth |       3 |
| water |       3 |
| water |       5 |
| Water |      22 |
| SUM   |      48 |
+-------+---------+
7 rows in set (0.00 sec)

mysql> 
```

# c++ - atof 改变全局数组的值

> ID：10038182
> 
> 赞同：0
> 
> 时间：2012-04-06T01:34:28.187
> 
> 标签：c++, visual-c++

我有一个问题，我基本上对此感到困惑。首先，我有两个全局数组 - trustArray[] 和 fashionArray[]。这是填充 trustArray 的函数：

```
void getTrust()
{
    string line;
    int reachedTrust=0;
    int numberOfTrustsRecorded=0;
    ifstream myfile ("BuyingJeans.Hw5 (1).csv");
    if (myfile.is_open())
    {
        while ( myfile.good() )
        {
            getline (myfile,line,',');
            //int found=line.find("Like-Purchase");
            if (line=="Trust-Like"){
                reachedTrust=1;
                getline (myfile,line,',');
            }
            if(reachedTrust==1){
                if(numberOfTrustsRecorded <6){
                    double testValue = atof(line.c_str());
                    trustArray[numberOfTrustsRecorded] = testValue;
                    numberOfTrustsRecorded++;
                }
            }
        }
        myfile.close();
    }
    else
        cout << "Unable to open file"; 
} 
```

出于某种原因，`atof()`此函数中的 正在更改 fashionArray[] 中的两个值。如果我将其更改为`atof()`an `atoi()`，则问题不再发生。这是填充正在更改的数组的方法 (fashionArray[])：

```
void getFashion(){
string line;
int reachedFashion=0;
int numberOfFashionsRecorded=0;
ifstream myfile ("BuyingJeans.Hw5 (1).csv");
if (myfile.is_open())
{
    while ( myfile.good() )
    {
        getline (myfile,line,',');
        if (line=="Like-Fash -->"){
            reachedFashion=1;
            getline (myfile,line,',');
            //cout<<line<<endl;
            //getchar();
        }
        if(reachedFashion==1){
            if(numberOfFashionsRecorded <6){
                fashionArray[numberOfFashionsRecorded] = atoi(line.c_str());
                numberOfFashionsRecorded++;
            }
        }

    }
    myfile.close();
}

else cout << "Unable to open file"; 
```

}

下面是调用这两个方法的主要方法：

```
int main () {

getFashion();
getTrust();

for(int x=0; x<6;x++)
    cout<<fashionArray[x]<<endl;
getchar();
return 0;
} 
```

fashionArray 的前两个值最终被更改为一些大得离谱的负整数和正整数。一件有趣的事情是，如果我颠倒在 main() 方法中调用这两个方法的顺序，问题就不再发生了。任何人都知道可能导致这种情况的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:32:01.293

我认为你正在超越`trustArray`和进入`fashionArray`。您没有提供初始化代码（请提供），但我想它看起来像这样：

```
float trustArray[N];
float fashionArray[N]; 
```

N 等于某个正整数。我的猜测是，在你的情况下，`N=5`.

在您的循环中，您测试`numberOfTrustsRecorded < 6`. 将通过该测试的值`numberOfTrustsRecorded`是 0、1、2、3、4、5。这是六 (6) 个浮点数以适合 5 的数组。写入`numberOfTrustRecorded[5]`将覆盖内存。更改您的测试或将缓冲区大小增加到 6。

为什么您在 fashionArray[0] 中看不到有效值？我不知道。也许您的编译器对齐了 fashionArray 内存缓冲区，以便在未使用的内存中开始覆盖，从而为您留下使 IEEE 浮点数所需的一半位。内存中的任何位都构成一个随机浮点数。内存转储会显示问题。

为什么以相反的顺序运行该方法有效？可能该错误仍然存​​在，但运行`getFashion()`second 会清除`getTrust()`. 你覆盖的记忆是你的，所以只要你不去理解它，没有人会抱怨。初始化`fashionArray[0] = 0.0`，运行，运行前`getTrust()`查看。您可能会看到随机浮动。`fashionArray[0]``getFashion()`

# grep - 使用 grep 搜索选项卡

> ID：10038188
> 
> 赞同：26
> 
> 时间：2012-04-06T01:35:21.167
> 
> 标签：grep

我有一个可能包含这样一行的文件。

`A B`//由制表符分隔

如果找到该行，如果未找到该值，我想返回`true`终端。`false`

当我这样做时 `grep 'A' 'file.tsv'`，它返回到行（不是真/假）但是

```
grep 'A \t B' "File.tsv" 
```

或者

```
 grep 'A \\t B' "File.tsv" 
```

或者

```
grep 'A\tB' 
```

或者

`grep 'A<TAB>B'`//按下标签按钮

不返回任何东西。

如何使用 grep 搜索制表符分隔值。

如何使用 grep 返回布尔值。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-06T01:44:08.307

使用文字`Tab`字符，而不是`\t`转义符。（您可能需要先按`Ctrl`+ `V`。）另外，`grep`不是 Perl 6（或带有`/x`修饰符的 Perl 5）；空格很重要，并且会按字面意思进行匹配，因此即使使用 周围的额外空格也不会，除非空格实际上在原版中`\t`。`A \t B``\t`

至于返回值，要知道你从程序中得到三种不同的响应：标准输出、标准错误和退出代码。后者为 0 表示成功，非 0 表示某些错误（对于大多数进行匹配的程序，1 表示未找到，2 及以上表示某种使用错误）。`grep`在传统的 Unix 中，如果您只需要退出代码，则可以重定向输出；使用 GNU `grep`，您可以改用该`-q`选项，但请注意，该选项不可移植。传统和 GNU 都`grep`允许`-s`抑制标准错误，但两者在处理方式上存在一些差异；最便携的是`grep PATTERN FILE >/dev/null 2>&1`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-06T02:14:36.260

两种方法：使用 -P 选项：

```
grep -P 'A\tB' "File.tsv" 
```

先输入ctrl+v再输入tab

```
grep 'A  B' "File.tsv" 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-08-26T20:22:11.613

这是创建一个以文字制表符作为其值的变量的便捷方法：

```
TAB=`echo -e "\t"` 
```

然后，您可以按如下方式使用它：

```
grep "A${TAB}B" File.tsv 
```

这样，就不需要文字标签。请注意，使用这种方法，您需要在模式字符串周围使用双引号（而不是单引号），否则变量引用将不会被替换。

# c# - 为什么我的 XML 阅读器读取所有其他元素？

> ID：10038193
> 
> 赞同：3
> 
> 时间：2012-04-06T01:36:09.980
> 
> 标签：c#, asp.net, xml, xmlreader

我建立了一个非常简单的表格，显示 4 列和 4 行。执行以下代码时，它会显示 .xml 文件中的所有其他元素。它不区分每个表行。它可以毫无问题地读取，并且我已经运行了 xml 验证器，所以它不是语法问题。

```
public partial class lblXmlOutput : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        XmlReaderSettings settings = new XmlReaderSettings();
        settings.ConformanceLevel = ConformanceLevel.Document;
        settings.IgnoreWhitespace = true;
        settings.IgnoreComments = true;

        XmlReader reader = XmlReader.Create(Server.MapPath("Part2XMLex.xml"), settings);

        string result = "";

        while (reader.Read())
        {
            if (reader.IsStartElement("td"))
                result += reader.ReadElementContentAsString();

            txtOutput.Text = result;
        }
   }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T01:41:41.400

因为`.Read()`和`.ReadElementContentAsString()`（无参数重载）都将阅读器移动到下一个节点。

将您的条件更改`while`为：

```
while (!reader.EOF) 
```

然后加：

```
else reader.Read(); 
```

# python - 表单的初始值不起作用

> ID：10038197
> 
> 赞同：0
> 
> 时间：2012-04-06T01:36:49.170
> 
> 标签：python, django, django-forms

我有一个带有初始值的表单，但我无法显示初始值。

```
def addaward(request):  
  if request.method == "POST":
      form = AwardForm(request.POST) 
      form.save()    

  else: 
    form = AwardForm(initial={'title': 'hi!'})
  return render_to_response('award.html',{'form': AwardForm}, context_instance = RequestContext(request)) 
```

真正奇怪的是当我删除该行时

```
 form = AwardForm(initial={'title': 'hi!'}) 
```

表单仍然显示没有错误消息。

**表格.py**

```
from django import forms
from django.forms import ModelForm
from students.models import Student

class AwardForm(ModelForm):
   class Meta:
        model = Award 
```

**模型.py**

```
class Award(models.Model)
   date = models.DateTimeField(auto_now_add = True, editable = True)
   student = models.ForeignKey('Student')
   type = models.CharField('Category', max_length = 30)
   title = models.CharField('Title of Award', max_length = 30)
   description = models.TextField('Description') 
```

任何想法都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:38:59.340

这个：

```
{'form': AwardForm} 
```

应该：

```
{'form': form } 
```

# wcf - 在另一个 WCF 服务中使用 WCF 服务的 DLL 引用

> ID：10038206
> 
> 赞同：0
> 
> 时间：2012-04-06T01:37:45.430
> 
> 标签：wcf, dll, service, reference, mismatch

抱歉，首先问了这么长的问题。我宁愿提出一个更简短的问题，但这是我能提供的最精简的版本，我可以清楚地解释我的观点。

我一直在尝试向我们的客户提供包装服务，该服务应该在其中提供多种服务。它背后的想法是将多次调用减少到一次调用并返回一个包含其他关联对象的对象。为了说明我的观点，让我举一个例子：

假设我们有以下服务：

*   我的公司.服务.捐赠
*   MyCompany.Services.Payment
*   MyCompany.Services.PartialPayment

通常客户应该查询捐赠服务（带有捐赠ID）以获取捐赠信息，然后使用检索到的捐赠信息，他们应该查询支付服务以获取支付相关详细信息，如果支付是在多个小额支付中完成的，则使用检索到的支付信息，他们应该查询 PartialPayment 服务以获取特定捐赠者的所有捐赠信息。

我将提供一个包装服务来接受donationID 作为单个参数并返回一个类似于此的类，而不是客户端这样做：

```
[DataContract(Namespace = "http://MyCompany.Services.DonationDetail")]
public class DonationDetail
{
     [DataMember]
     public MyCompany.Services.Donation.Record donationRecord;
     [DataMember]
     public PaymentDetail paymentDetail;    
}

[DataContract(Namespace = "http://MyCompany.Services.DonationDetail")]
public class PaymentDetail
{
     [DataMember]
     public MyCompany.Services.Payment.Record paymentRecord;
     [DataMember]
     public List<MyCompany.Services.PartialPayment.Record> partialPayments;
} 
```

因此，DonationDetail 记录的实例应返回与该捐赠相关的所有相关信息。

当我在包装服务中使用这些单独的服务 DLL* 时出现了我的问题，因为我使用包装服务传递给客户端的任何类都成为包装服务的一部分，并且客户端无法立即使用它们使用服务引用检索到的相应类型而不使用它们编写自定义构造方法以将一种类型转换为另一种类型 - 尽管它们是相同的对象。服务不是在原始命名空间中引用类，而是使用以下类，就像现在对上面提到的类一样：

*   DonationDetail.Record（捐赠记录 - 我希望 MyCompany.Services.Donation.Record）
*   DonationDetail.Record1（付款记录 - 我希望 MyCompany.Services.Payment .Record）
*   DonationDetail.Record2（PartialPayment Record - 我希望 MyCompany.Services.PartialPayment.Record）

有没有办法在没有自定义构造函数的情况下提供这样的接口？因此，如果他们为 MyCompany.Services.PartialPayment WCF 服务使用“PartialPayment”命名空间，他们可以在通过包装服务检索 DonationDetail 后执行以下操作吗？

```
PartialPayment.Record partialPayment = dDetailObj.paymentDetail.partialPayments[0]; 
```

*：不要问我为什么不使用服务引用，除非那是问题的原因，因为此时该选项给我带来了其他问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:23:08.637

So I think what you are saying, effectively, is that if you have two different services that return the same object and when you add this as two different service references to the client, even though ultimately they are the same object as far as the services are concerned (since they reference the same DLL), the client sees them as two different types so you can't take the object returned from one and send it as the input to the other service.

Assuming I have understood your question (and I apologise if I have not)...

You *could* map one type to the other by constructing it and setting the properties but that is really kind of a pain and not very friendly to the consumer etc, hence I am going to suggest something kind of radical...

Ditch the service references on the client.

Yup, I said it, why would I suggest such a thing!?! Here's why...

First of all I would make sure my project was structured something like this:

**Donation Detail Client Library**

*   IDonationService (this is the service contract - notice no implementation in the client library)
*   DonationRecord

**Payment Detail Client Library**

*   IPaymentService (this is the service contract - notice no implementation in the client library)
*   PaymentRecord

**Partial Payment Client Library**

*   IPartialPaymentService (this is the service contract - notice no implementation in the client library)
*   PartialPaymentRecord

**Wrapper Service Client Library (which references the three other client libraries)**

*   IWrapperService (this is the service contract - notice no implementation in the client library)

*Incidentally, I gave your records different class names but you could use namespaces if you like and call them all Record (I think calling them different names is less confusing, but that is probably just me).*

On the service end you reference the client library that you need to implement the service and do whatever you have to do just as you always have.

On the client you reference the client libary (or libraries depending on what service you want to call) too, in the same way (so you effectively have a shared library between server and client - yeah old skool, but hey, you will see why).

The client then has the interface for the service contract and all the data contracts so it does not need the whole service reference, generated code thing. Instead what you can do on your client is something like this:

```
DonationRecord donation;

using (var cf = new ChannelFactory<IDonationService>("EndpointNameInConfigurationFile"))
{
    IDonationService donationservice = cf.CreateChannel();
    donation = donationservice.GetDonation("Donation1234");
}

using (var cf = new ChannelFactory<IWrapperService>("EndpointNameInConfigurationFile"))
{
    IWrapperService wrapperService = cf.CreateChannel();
    wrapperService.DoSomethingWithDonation(donation);
} 
```

There, you see I took the data contract from one service and sent it to a completely unrelated service and it looks natural (I have an object that is returned from a method on class X and I took it and passed it as an agrument on class Y, job done, just like programming).

**NOTE**: Using this technique will not stop service references from working just as they always have so any existing client code would not have to change, just if you use your new wrapper service, you could use it like this to save having to map types.

# c# - 如何在 MVC 中使用 Javasctipt / AJAX 将整个对象传递给控制器 ？

> ID：10038216
> 
> 赞同：1
> 
> 时间：2012-04-06T01:39:38.170
> 
> 标签：c#, javascript, jquery, ajax, model-view-controller

我试图找出一种方法将整个类从我的视图传递到带有 Javascript/AJAX 的控制器。

我知道以下 Ajax 代码可用于仅传递 ID，但我可以传递整个模型吗？

```
 @model  User
    $.ajax(
        {
            type: "POST",
            url: "\User\",
            data: @model.id,
            success:
                reloadPage()
        }); 
```

我在搜索时看到了以下解决方案： [Is there a way to pass a "C#" object to a controller via AJAX?](https://stackoverflow.com/questions/6766984/is-there-a-way-to-pass-a-c-object-to-a-controller-via-ajax)

我可以简单地这样做吗？：

```
 @model  User
    $.ajax(
        {
            type: "POST",
            url: "\User\",
            data: @model,
            success:
                reloadPage()
        }); 
```

这行得通吗？有多安全？最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T02:20:59.380

查看[JavascriptSerializer.Serialize()](http://msdn.microsoft.com/en-us/library/bb292287.aspx)方法。所以是这样的：

```
@model  User
$.ajax({
    type: "POST",
    url: "\User\",
    data: JSON.parse(@(new JavascriptSerializer().Serialize(Model))),
    success: reloadPage
}); 
```

本质上，这会将您的模型序列化为 JSON 字符串，然后将其在客户端解析回 JS 对象，然后将其传递给 AJAX 请求。当请求到达服务器时，MVC 模型绑定处理基于 JSON 对象构造模型的实例。

请注意，旧版本的 IE 不支持 JSON.parse。您可以获取[json2.js](https://github.com/douglascrockford/JSON-js)来填充 IE 的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T01:42:46.107

虽然不是最佳实践，但如果没有其他方法可以获取此数据，那么您可以通过 tempdata 传递数据

看法：

```
@{
 TempData["myModel"] = Model;
} 
```

控制器：

```
var myModel = TempData["myModel"];
TempData.Remove("myModel"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T01:44:47.990

创建一个与原始对象具有相同属性的 Json 对象，将 Json 对象名称作为控制器参数名称。使用 AJAX 请求将 Json 对象传递给控制器

MVC 模型绑定将处理剩余的事情

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-15T23:44:16.663

尝试使用序列化（jQuery）

例如。

```
$.ajax({
   type: "POST",
   url: "\User\",
   data: $(form).serialize(),
   success: reloadPage()
}); 
```

# node.js - Node.js + Express + simpledb；尝试列出域时出现“TypeError：无法读取 null 的属性‘错误’”

> ID：10038218
> 
> 赞同：2
> 
> 时间：2012-04-06T01:39:58.420
> 
> 标签：node.js, express, amazon-simpledb

我正在尝试对使用 Node.js/Express 运行的 Amazon SimpleDB 进行非常简单的测试。这是我正在使用的代码（当然，AWS 密钥/秘密已消毒）：

```
var express = require('express');
var simpledb = require('simpledb');

var app = express.createServer();
var sdb = new simpledb.SimpleDB(
        {keyed:'MYKEY', secret:'MYSECRET'}, simpledb.debuglogger);

app.get('/', function(req, res) {
        console.log("about to list domains...");
        sdb.listDomains(function(error, result, meta) {
                console.log("listing domains, I think?");
        });
});

app.listen(8888); 
```

这是我得到的错误：

```
DEBUG: simpledb:  2012-04-06T01:34:24.856Z create {"keyid":"MYKEY","secret":"MYSECRET","secure":false,"consistent":true,"test":false,"maxtry":null,"expbase":null,"delaymin":null,"delayscale":null,"randomdelay":null} {"secure":false,"host":"sdb.amazonaws.com","path":"/","version":"2009-04-15","port":80}
about to list domains...
DEBUG: simpledb:  2012-04-06T01:34:29.253Z request 1333676069253 ListDomains {}
DEBUG: simpledb:  2012-04-06T01:34:29.387Z handle 1333676069253 ListDomains {"Action":"ListDomains","Version":"2009-04-15","SignatureMethod":"HmacSHA256","SignatureVersion":"2","Timestamp":"2012-04-06T01:34:29.253Z","AWSAccessKeyId":"MYKEY","Signature":"AWSSIGNATURE"} 1 false null

/home/rob/node_modules/simpledb/lib/simpledb.js:136
    if( res.Errors ) {
           ^
TypeError: Cannot read property 'Errors' of null
    at [object Object].handle (/home/rob/node_modules/simpledb/lib/simpledb.js:136:12)
    at /home/rob/node_modules/simpledb/lib/simpledb.js:188:18
    at Parser.<anonymous> (/home/rob/node_modules/simpledb/node_modules/aws-lib/lib/aws.js:81:13)
    at Parser.emit (events.js:67:17)
    at Object.onclosetag (/home/rob/node_modules/simpledb/node_modules/aws-lib/node_modules/xml2js/lib/xml2js.js:120:24)
    at emit (/home/rob/node_modules/simpledb/node_modules/aws-lib/node_modules/sax/lib/sax.js:148:32)
    at emitNode (/home/rob/node_modules/simpledb/node_modules/aws-lib/node_modules/sax/lib/sax.js:152:3)
    at closeTag (/home/rob/node_modules/simpledb/node_modules/aws-lib/node_modules/sax/lib/sax.js:226:5)
    at Object.write (/home/rob/node_modules/simpledb/node_modules/aws-lib/node_modules/sax/lib/sax.js:567:29)
    at Parser.<anonymous> (/home/rob/node_modules/simpledb/node_modules/aws-lib/node_modules/xml2js/lib/xml2js.js:145:29) 
```

我对 Node.js、simpledb 模块和 SimpleDB 本身还是很陌生，但这对我来说似乎是 simpledb 模块中的一个错误。否则我无法弄清楚我做错了什么 - 我相信我的密钥/秘密是有效的（因为我已经分别和一起测试了无效的设置，并且我从亚马逊返回了实际错误，表明密钥/秘密无效）。

不过，这个错误让我很困惑。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:55:16.543

这原来是 simpledb 节点模块中的依赖问题：

> 嗨 - 这似乎是由最新版本的依赖库引起的 - 我已经重建并发布了一个新版本 0.0.8 - 请让我知道这是否有效 - 谢谢！

[来源。](https://github.com/rjrodger/simpledb/issues/22)它已经被修复了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:05:59.593

仅供参考 - 自从您发布原始帖子以来，AWS 已经发布了他们的 Node.js 官方开发工具包。 [http://docs.aws.amazon.com/nodejs/latest/dg/nodejs-dg-examples.html](http://docs.aws.amazon.com/nodejs/latest/dg/nodejs-dg-examples.html)

```
var AWS = require('aws-sdk');
AWS.config.update({region: 'us-east-1'});

var db = new AWS.SimpleDB();
db.client.listDomains(function(error, data) {
  if (error) {
    console.log(error);
  } else {
    console.log(data);
  }
}); 
```

# php - php文件转pdf

> ID：10038220
> 
> 赞同：1
> 
> 时间：2012-04-06T01:40:35.830
> 
> 标签：php, html, pdf, dompdf

我正在使用 dompdf 将 HTML 文件转换为 PDF。我设法得到了想要的结果，但出现了一个问题，HTML 文件需要转换为 PHP，因为它会从表单（来自另一个文件）接收数据！

在这种情况下，dompdf 不起作用，它不会显示表单中所写内容的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:49:03.767

我认为您搜索的是用于替换 HTML 文件中的值的模板引擎。

有一些引擎，例如[Smarty](http://www.smarty.net/)、[TWIG](http://twig.sensiolabs.org/)。

您可以解析您的 HTML 文件，并使用 HTML 返回来创建您的 PDF 文件。

对于您的情况，它可能有点过大，但您可以构建自己的短引擎并解析您的 HTML 文件并用表单值替换您指定的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T06:49:33.150

您可以在 temp 中自动创建 html 文件。在请求您的 php 文件后，您的文件会自动生成一个 .html 文件（在 temp 中），然后从该文件创建您的 pdf。

# javascript - 用户离开页面时如何“取消缓存”ajax加载的html

> ID：10038221
> 
> 赞同：2
> 
> 时间：2012-04-06T01:41:01.570
> 
> 标签：javascript, jquery, html, ajax

现在，当用户单击我网站上的链接时，我使用 ajax 仅替换主框架中的内容（标题和侧边栏需要跨页面保持状态，所以我不想重新加载它们）。我使用 pushState 和 popState 来更改 url 栏。

我明确不缓存 ajax 内容并且我的网站运行良好——但感觉有点太慢了，尤其是在“返回”命令上。

如果我确实缓存了 xhr html 请求，那么该站点在内部运行良好。但是，如果用户输入新的 URL 并离开站点，如果他/她点击“返回”命令，则只会从缓存中提取无样式、标题和无侧边栏的主视图内容，并且站点将不会t 正确显示。

如果用户离开页面，我有什么办法可以在内部进行缓存但刷新缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:54:51.800

我想我现在明白你的描述了。

当我访问您网站上的 /page1.html 时，下载的 HTML 包含主要内容 + 标题 + 侧边栏。当我单击链接访问 /page2.html 时，AJAX 会加载页面并且下载的 HTML 仅包含主要内容。

因此，此时缓存包含完整的 /page1.html 和部分 /page2.html

现在，当我离开您的站点然后使用返回按钮返回时，浏览器会从缓存中获取 /page2.html。但这只是部分页面，您的网站会“中断”。

理想情况下，您希望浏览器仅在使用 XMLHttpRequest 请求时才获取部分内容。此外，如果部分页面和完整页面都可以缓存，那就太好了。

[pjax](https://github.com/defunkt/jquery-pjax)`_pjax=true`通过将参数附加到 AJAX 请求中的 URL 查询来解决此问题。我认为这应该只适用于大多数情况。

请注意，不要将此参数添加到传递给的 URL 中`pushState()`。

另一种方法是始终下载整个页面，然后`#main-view`在使用 AJAX 时提取。

当然，您可以通过切换到 PJAX 来解决其他人的问题（您需要使用该`fragment`选项）。

另一个为您处理 pushState() 的 JS 库是我的[HTMLDecor](http://github.com/shogun70/HTMLDecor)项目。使用 HTMLDecor，您的页面只包含主要内容 +`<link>`到另一个（可能是共享的）包含页眉/页脚/侧边栏的 HTML 页面。HTMLDecor 从浏览器中将这些添加到页面中。当用户单击链接浏览到另一个页面时，HTMLDecor 使用 AJAX 和 pushState - 无需配置。当然，如果浏览器不支持 pushState，那么就会发生正常的链接导航。

# android - 错误editext它无法在基本适配器的自定义布局（来自mysql数据库）中关注特定事物

> ID：10038222
> 
> 赞同：0
> 
> 时间：2012-04-06T01:41:07.837
> 
> 标签：android, web-services

您好先生，我在自定义列表视图中从数据库中获取项目名称附加到编辑文本。在编译所有项目名称后附加到`edittext`.

如果我想更改项目名称menas，我将在edittext上单击它，它会专注于另一个`edittext`

我的代码：

```
public class EditMainMenulistview extends BaseAdapter {
protected static Context Context = null;
int i;
public String editnewmainmenu, menuname, edittext;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname, itemcode;
public String[] itemnames, itemcodes;
HashMap<String, String> map = new HashMap<String, String>();

public EditMainMenulistview(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.itemcodes = new String[imageArrayJson.length()];

    try {

        for (i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);
            qrimage = image.getString("menuimage");
            itemname = image.getString("menuname");
            itemcode = image.getString("menucode");
            itemnames[i] = itemname;
            itemcodes[i] = itemcode;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0, qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height, true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(itemnames[i]);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {
    final HashMap<String, String> map = new HashMap<String, String>();
    View vi = convertView;

    vi = inflater.inflate(R.layout.editmainmenulist, null);

    final EditText text = (EditText) vi.findViewById(R.id.editmaimenu);
    ImageView image = (ImageView) vi.findViewById(R.id.menuimage);
    text.requestFocus();
    image.setImageBitmap(bmps[position]);
    text.append(itemnames[position]);
    String edittext = text.toString();

    // Toast.makeText(Context, edittext, Toast.LENGTH_LONG).show();

    return vi;

} 
```

请提到上面的代码，如果有人可以重播意味着真的很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:49:22.440

为什么在 getview() 中使用 text.requestFocus()。假设您在 listview 中有 10 个项目可见 getview 被调用 10 次。所以 text.requestFocus() 也被调用了 10 次，所以焦点将放在最后一个可见项目上

# c++ - Qt 物理场景多线程

> ID：10038224
> 
> 赞同：9
> 
> 时间：2012-04-06T01:41:14.767
> 
> 标签：c++, multithreading, qt, user-interface, physics

我有一个带有大约 1000 个 QGraphicsItems 的 QGraphicsScene，它们实际上是物理项目。他们前进的每一帧，检查碰撞，并解决这些碰撞，等等。我真的很想让物理多线程。

我的理解是 QGraphics 类不是线程安全的。意思是，它们只能从主线程调用。这是否迫使我使用信号/槽机制将每帧的最终项目属性（x、y、旋转）发送到主线程，然后使用主线程方法实际更新 QGraphicsItems？或者有没有更简单的方法来做到这一点？

以下只是一个假设：我可以使用 QtConcurrent 在我的 QGraphicsItems 列表上运行一个方法吗？如果我在我的 QGraphicsItem 绘制方法中使用 QMutex 并在我的物理方法中使用 QMutex（这将改变我的 QGraphicsItem 的属性），这是否可以保证在任何时候只有一个线程正在读取/写入每个 QGraphicsItem？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T20:23:12.487

1.  > 如果我在我的 QGraphicsItem 绘制方法中使用 QMutex 并在我的物理方法中使用 QMutex（这将改变我的 QGraphicsItem 的属性），这是否可以保证在任何时候只有一个线程正在读取/写入每个 QGraphicsItem？

    不，它不会。`QGraphicsItem`绘图时大量使用，不仅`paint`调用方法。例如，看[这里](http://qt.gitorious.org/qt/qt/blobs/4.8/src/gui/graphicsview/qgraphicsscene.cpp#line4882)。即使它可以工作，这将是一个丑陋的解决方案，因为显然，`QGraphicsItem`它不仅可以用于绘画。

2.  > 这是否迫使我使用信号/槽机制将每帧的最终项目属性（x、y、旋转）发送到主线程，然后使用主线程方法实际更新 QGraphicsItems？或者有没有更简单的方法来做到这一点？

    是的，您必须将项目更改过程移至主线程。你实际上有一些选择：

    *   如您所述，使用信号/插槽机制。
    *   使用[元](http://doc.qt.nokia.com/4.7-snapshot/qmetaobject.html#invokeMethod)调用`QueuedConnection`
    *   发送自定义事件。

    别忘了，你有[`BlockingQueuedConnection`](http://doc.qt.nokia.com/4.7-snapshot/qt.html#ConnectionType-enum)，如果你想等待绘画完成。

    此外，您可以将所有这些东西与`QtConcurent`.

*其实，管理起来并没有那么难。它比手动确保线程安全更安全、更容易。*

更大的问题是，即使尝试在工作线程中*读取*项目（`const`例如，仅使用成员），您也可能会失败。

[就目前而言，因为`QGraphicsItem`不是线程安全的，即使阅读*也不*是. 我在 Qt 中开发多线程应用程序的经验告诉我，如果可能发生不好的事情，它*就会*发生。]

# html - CSS 图像悬停水平工作，但不能垂直工作

> ID：10038225
> 
> 赞同：0
> 
> 时间：2012-04-06T01:41:28.927
> 
> 标签：html, css, debugging

我目前正在我的客户网站[http://cjcdigital.net/clients/andrea](http://cjcdigital.net/clients/andrea)上使用 CSS 导航系统，虽然顶部导航工作正常，但我无法在包含社交媒体的垂直侧边栏上重新创建翻转效果纽扣。

为了实现顶部导航效果，我按照以下步骤操作： [http](http://www.elated.com/articles/css-rollover-buttons/) : //www.elated.com/articles/css-rollover-buttons/ 我的导航元素每个都堆叠在顶部/底部。

然而，对于侧面导航，尽管将 image:hover 设置为将精灵推到左侧，但 image hover 属性根本不会启动。

下面是顶部导航的一些代码，下面是侧面导航的代码。

```
#headerMenu {width: 1200px;}
#headerMenu ul{display: inline;}
#headerMenu li a{top:334px; position:absolute;}
#magazine
{
  display: block;
  width: 112px;
  height: 17px;
  background: url("./images/magazine.gif") no-repeat 0 0;
  left:160px;

}

#magazine:hover
{ 
  background-position: 0 -17px;
}

#magazine span
{
  position: absolute;
  top: -999em;
} 
```

社交导航

```
#facebook
{
  display: block;
  width: 149px;
  height: 57px;
  background: url("./images/facebook.gif") no-repeat 0 0;
}

#facebook:hover
{ 
  background-position: -300 0;
}

#facebook span
{
  position: absolute;
  top: -999em;
} 
```

提前感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:48:03.283

您没有在 CSS 声明中为`#facebook:hover`. 您可能想做类似的事情：

```
#facebook:hover
{ 
  background-position: -300px 0;
} 
```

# c++ - 前缀符号字符串到 int 的转换

> ID：10038226
> 
> 赞同：0
> 
> 时间：2012-04-06T01:41:37.750
> 
> 标签：c++, string, int, prefix

我一直在想办法将字符串转换为整数，我知道 C 中的旧 atoi() 以及将字符串类型转换为整数的 sstream 函数。我正在尝试编写一个程序，该程序采用前缀表示法并递归地产生结果。当我使用 char 而不是 string 时，该程序可以工作，但我不确定我应该如何使用字符串来解决这个问题。我必须拥有它，以便用户输入 + 3 3 并且结果是 6。

```
#include <iostream>
#include <string>
using namespace std;

int stringToAscii(string value){
    if (value == '+')
        return '+';
    if (value == '*')
        return '*';
    if (value == '-')
        return '-';
    if (value == '/')
        return '/';
}

int prefixNotationCalc(string value){
    char newValue = value;
    int number1=0;
    int number2=0;
    //while () {
        switch (newValue){
        case '*':
            cin >> number1;
            cin >> number2;
            return (number1*number2);
            break;
        case '+':
            cin >> number1;
            cin >> number2;
            return (number1+number2);
            break;
        case '-':
            cin >> number1;
            cin >> number2;
            return (number1-number2);
            break;
        case '/':
            cin >> number1;
            cin >> number2;
            return (number1/number2);
            break;
        }
    //}
}

int main (){
    //The function takes in a string value
    string value;
    cin >> value;
    cout << "Result is: "<< prefixNotationCalc(value)<< endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:15:03.290

对于您的简单情况，伪代码解决方案可以是：

```
//assuming input like + 3 * 4 - * 6 10 8  
//(note: the ints can have more than one digit)
int prefixNotationCalc(string input, int &start)
{
  string token = scan_from_start_of_string_to_first_whitespace
  int whitespace_pos = whitespace_position
  if (token contains digits)
    return int_equivalent_of_token
  else 
    int op1 = prefixNotationCalc(input, whitespace_pos)
    int op2 = prefixNotationCalc(input, whitespace_pos)
    switch(token as operator)
      case + : return op1 + op2
       //...
} 
```

请注意，提取 op1 后，函数中的 whitespace_pos 应该已更改。

输入的样本运行 = + 3 * 4 - * 6 10 8

**令牌 , op1 , op2**
+ , 3 , * 4 - * 6 10 8
3
* , 4 , - * 6 10 8
4
- , * 6 10, 8
* , 6 , 10
6
10
8

请注意，我没有测试过它。此外，这可以以更好的方式在循环（而不是递归）中实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T17:24:15.833

```
declare a main string and a temp string;
declare an int number variable;
declare an int STL stack;
ask the user for the string and enter it into the main string;
declare an index variable and set its value to (main string length - 1);
start at the end of the string and check if that element is a digit;
     if it is a digit, push that digit into the temporary string, decrease
     the index variable, and check if the next element is also a digit;
     repeat this until you run into an element other than a digit;
     reverse the temp string;
     number = atoi(temp.c_str());
     push number onto the stack;
     repeat; 
```

# sql-server-2005 - 太多并行嵌套事务

> ID：10038229
> 
> 赞同：0
> 
> 时间：2012-04-06T01:42:29.300
> 
> 标签：sql-server-2005

```
Location:    lckmgr.cpp:385
Expression:  0
SPID:        94
Process ID:  3752
Description:     Too many parallel nested transactions 
```

我的脚本有很多表要遗漏连接，并且有一个表遗漏连接本身，该表格有2,100,000条记录。当我在sql server 2005中运行脚本时，它会返回此错误消息：并行嵌套事务过多。

如何处理？请给我一些帮助。非常感谢。

```
LEFT OUTER JOIN 
    DW.HouseholdDetail H 
    ON H.HouseholdCompositionID = T.HouseholdCompositionID 
LEFT OUTER JOIN 
    T_IC_CODE TRole 
    ON H.TenancyRoleCode = TRole.Code_ID 
LEFT OUTER JOIN 
    DW.HouseholdDetail RH 
    ON H.RelatedToClientCoreID = RH.ClientCoreID 
    AND RH.HouseholdCompositionID = H.HouseholdCompositionID 
LEFT OUTER JOIN 
    T_IC_CODE RTRole 
    ON RH.TenancyRoleCode = RTRole.Code_ID 
LEFT OUTER JOIN 
    #TenantErrM AS TE 
    ON T.TenancyAccountID = TE.TenancyAccountID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T09:32:02.327

这似乎是 SQL Server 中的一个已知问题。[请参阅相关的 Microsoft 知识库文章 940935](http://support.microsoft.com/kb/940935?wa=wsignin1.0)，其中建议：

> 此问题的修复首先在累积更新 3 中发布。

也许您需要安装 SQL2005 SP4。有关更新的详细信息，请参阅[知识库文章 939537](http://support.microsoft.com/kb/939537/LN)。

# wcf - 在从 B webrole 使用 A webrole 中的 WCFService 时得到 EndpointNotFoundException

> ID：10038230
> 
> 赞同：0
> 
> 时间：2012-04-06T01:42:45.780
> 
> 标签：wcf, azure, webrole

我有一个用于托管 Web 应用程序的 webrole，还有一个用于托管 WCF 服务的 webrole。现在我已经在 Windows Azure 上发布了我的 WCF 服务 webrole，但是带有 web 应用程序的 webrole 还没有，因为我仍在开发它。然后，当我尝试在 Web 应用程序中使用已在云上发布的 WCF 服务时，它会给出错误：EndpointNotFoundException，内部异常是找不到远程服务器。但实际上，我可以在不是 Azure 项目的 Web 应用程序中使用 WCF 服务。是不是因为一个 webrole 中的 web 应用程序不能使用另一个 webrole 中的 WCF 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:35:28.900

只要它们都不在 Azure 中，它就应该能够。那时，您将需要一个 InternalEndpoint 来代替他们进行通信。您是否将其添加为 Visual Studio 中的 Web 引用并且工作正常？你能从浏览器浏览到 WCF 服务并看到它吗？我的猜测是它的端口错误，也许您只是在将引用发布到 Azure 后手动更新了它。

# mysql - 使用连接、分组和全文的 where 子句中的未知列 xxx

> ID：10038235
> 
> 赞同：2
> 
> 时间：2012-04-06T01:43:35.837
> 
> 标签：mysql, sql, join, group-by, mysql-error-1054

我的查询有什么问题？

```
SELECT ...
       MATCH(results.keywords) AGAINST('".DB::e($_POST['s'])."' IN BOOLEAN MODE) AS aaa,
       SUM( MATCH(tags.keywords) AGAINST('".DB::e($_POST['s'])."' IN BOOLEAN MODE) ) AS bbb
  FROM table1
  JOIN table2 ... JOIN table3 ...
 WHERE (aaa > 0   here the alias doesn't work!
        OR bbb > 0   here the alias doesn't work! )
GROUP BY table1.id
ORDER BY aaa DESC,  but here the alias works!
         bbb DESC  but here the alias works! 
```

如果我删除 WHERE 子句效果很好......那么我的别名有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T01:45:20.287

您需要使用`HAVING`（[此处](http://www.w3schools.com/sql/sql_having.asp)和[此处](http://en.wikipedia.org/wiki/Having_%28SQL%29)，帮助较少：[此处](http://dev.mysql.com/doc/refman/5.5/en/select.html)）；该`WHERE`子句在别名甚至存在之前就被评估；）

# php - PHP htmlentities 允许且仅

> ID：10038236
> 
> 赞同：5
> 
> 时间：2012-04-06T01:43:40.490
> 
> 标签：php, tags, html-entities

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T01:46:07.650

这很容易

```
<?php
$string = htmlentities($text);
$string = str_replace(array("&lt;i&gt;", "&lt;b&gt;", "&lt;/i&gt;", "&lt;/b&gt;"), array("<i>", "<b>", "</i>", "</b>"), $string); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T01:50:54.117

我使用一个辅助函数：

```
#   Sanitizer function - removes forbidden tags, including script tags
function strip_tags_attributes( $str, 
    $allowedTags = array('<a>','<b>','<blockquote>','<br>','<cite>','<code>','<del>','<div>','<em>','<ul>','<ol>','<li>','<dl>','<dt>','<dd>','<img>','<ins>','<u>','<q>','<h3>','<h4>','<h5>','<h6>','<samp>','<strong>','<sub>','<sup>','<p>','<table>','<tr>','<td>','<th>','<pre>','<span>'), 
    $disabledEvents = array('onclick','ondblclick','onkeydown','onkeypress','onkeyup','onload','onmousedown','onmousemove','onmouseout','onmouseover','onmouseup','onunload') )
{       
    if( empty($disabledEvents) ) {
        return strip_tags($str, implode('', $allowedTags));
    }
    return preg_replace('/<(.*?)>/ies', "'<' . preg_replace(array('/javascript:[^\"\']*/i', '/(" . implode('|', $disabledEvents) . ")=[\"\'][^\"\']*[\"\']/i', '/\s+/'), array('', '', ' '), stripslashes('\\1')) . '>'", strip_tags($str, implode('', $allowedTags)));
} 
```

对于您的示例，从数组中删除除`<b>`和之外的所有内容。`<i>``$allowedTags`

# algorithm - 在 D*Lite 上定义路径方向

> ID：10038238
> 
> 赞同：1
> 
> 时间：2012-04-06T01:43:52.410
> 
> 标签：algorithm, path-finding, directed-graph, d-star

我目前正在研究 Sven Koenig 的 D*Lite 算法的实现。 [http://idm-lab.org/bib/abstracts/papers/aaai02b.pdf](http://idm-lab.org/bib/abstracts/papers/aaai02b.pdf)。基本上，我试图在开始实施之前了解所有细节。似乎该算法适用于有向图，这是定义`Pred`and`Succ`函数的方式。

如何定义图形的方向以及哪些参数决定了图形的方向。我应该使用诸如成本之类的参数的值`g`（这似乎不是一个好的选择……因为`g`成本与`rhs`算法更新的值一起使用）还是距离的启发式估计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T02:23:13.453

D* 和 D*-lite 都适用于有向图和无向图。

图是`G = (V, E)`，其中`V`是可以达到的配置（或状态）列表。`E`是顶点之间的连接列表。在有向图中，`E`是一组**有序**对的边`(u, v)`，其中`u`和`v`都是顶点。在无向图中，`E`是一组**无序**对。

在无向图上进行规划相当于在有向图上进行规划，具有双向边。也就是说，如果`(u,v)`是一条边`(v, u)`也将是一条边。

您如何构建图形是特定于应用程序的，并且从简单的网格到更复杂的策略（如晶格逼近到正向运动学）不等。

# matlab - 像素到像素转换

> ID：10038242
> 
> 赞同：0
> 
> 时间：2012-04-06T01:44:22.550
> 
> 标签：matlab, computer-vision, pixel, distance, transformation

我在将静止图像（RGB 图像）中某些对象的位置转换为拍摄图像的房间的 2D 视图时遇到问题。我在图像中有大约 3 个对象的坐标（我的意思是 X，y 坐标）以及它们之间的距离，我想将这三个对象的位置转移到平面图中。

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:51:29.613

您可能需要澄清您的问题，但如果我以正确的方式阅读它，它可能就像从一个对象到另一个对象的比率一样简单。

例如，如果您的传感器是 640 像素宽，并且覆盖了 10 米的水平长度，那么您知道在现实世界中每 64 像素代表一米。

请记住，这是假设现实世界中的对象位于同一平面上，与镜头矢量正交。如果物体位于不同的平面（深度），那么您手中的问题就会更大。

# perl - Perl：使用算法::循环

> ID：10038251
> 
> 赞同：4
> 
> 时间：2012-04-06T01:46:07.743
> 
> 标签：perl, for-loop

我正在尝试使用 NestedLoops 函数在 Perl 中构建一个排列程序。这是我的代码：

```
use strict;
use warnings;
use Algorithm::Loops qw(NestedLoops);

my @a = 'a'..'o';

my $length = 5;
my $start = 0;
my $depth = 2;

NestedLoops([
  [0..$length],
  ( sub {
    $start = 0 if $start == $depth;
    $start++;
    [$start * $length..$start * $length + $length - 1]
  }) x $depth,
], \&permute,);

sub permute {
  my @ind = @_;
  foreach my $i (@ind) {
    print $a[$i];
  }
  print "\n";
} 
```

所以我有一个数组，其中包含字母“a”到“o”（大小为 15）。我将数组视为有 3 行，所以我对数组的想象是这样的：

```
abcde
fghij
klmno 
```

然后每个循环对应于每一行......我想构建如下排列：

```
afk
afl
afm
afn
afo
agk  // fails here... I end up getting agg
... 
```

它适用于前 5 个值（最低 for 循环的整个运行），但随后第二次运行失败，因为最后一行的值`$start`被重置为 0......这是一个问题，因为这会破坏一切。

所以我想知道的是，我怎样才能`$start`根据级别保持持久的价值......所以我所要求的本质上是有常数。我的循环真的应该是这样的：

```
for my $a (0..5) {        # 0 at this level and never change
  for my $b (5..10) {     # $start should be 5 at this level and never change
    for my $c (10..15) {  # $start should be 10 at this level and never change
      permute($a, $b, $c);
    }
  }
} 
```

现在，因为我将有可变长度的 for 循环，所以我无法对每个起始值进行硬编码，所以我正在寻找一种方法来最初创建这些起始值，然后在循环重置时保留它们。

我意识到这是一个令人困惑的问题，所以请提出问题，我将帮助澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T06:36:49.873

你让这变得比它必须的更难。
部分问题在于[NestedLoops](http://p3rl.org/Algorithm::Loops/#NestedLoops1)的文档没有详细说明如何使用第一个参数中的子例程引用。

* * *

对于以下示例，假设这写在它们上方的某处。

```
use strict;
use warnings;
use Algorithm::Loops qw'NestedLoops'; 
```

真正调用[NestedLoops](http://p3rl.org/Algorithm::Loops/#NestedLoops1)来获得你想要的最简单的方法是这样的：

```
NestedLoops(
  [
    ['a'..'e'],
    ['f'..'j'],
    ['k'..'o'],
  ],
  \&permute
);

sub permute {
  print @_, "\n";
} 
```

如果您真的希望即时生成 NestedLoops 的参数[，](http://p3rl.org/Algorithm::Loops/#NestedLoops1)我建议您使用List [::MoreUtils中的](http://p3rl.org/List::MoreUtils)[部分](http://p3rl.org/List::MoreUtils#part-BLOCK-LIST)。

```
use List::MoreUtils qw'part';

my @a = 'a'..'o';

my $length = 5;
my $index;

NestedLoops(
  [
    part {
      $index++ / $length
    } @a
  ],
  \&permute
);

sub permute {
  print @_, "\n";
} 
```

如果由于某种原因您想调用带有数组索引的[NestedLoops ，使用](http://p3rl.org/Algorithm::Loops/#NestedLoops1)[part](http://p3rl.org/List::MoreUtils#part-BLOCK-LIST)仍然很容易。

```
use List::MoreUtils qw'part';

my @a = 'a'..'o';

my $length = 5;

NestedLoops(
  [
    part {
      $_ / $length
    } 0..@a-1
  ],
  \&permute
);

sub permute {
  print map { $a[$_] } @_;
  print "\n";
} 
```

实际上，您遇到的主要问题是您提供给[NestedLoops](http://p3rl.org/Algorithm::Loops/#NestedLoops1)的两个子例程引用正在修改相同的变量，并且它们都被多次调用。解决此问题的最佳方法是依赖在调用子例程时为其提供的最后一个值。（从实现来看，这似乎更接近它的用途。）

```
my @a = 'a'..'o';

my $length = 5;
my $depth = 3;

NestedLoops(
  [
    [0..$length-1],
    (sub{
      return  unless @_;
      my $last = pop;
      my $part = int( $last / $length ) + 1; # current partition
      my $start = $part * $length; # start of this partition
      my $end = $start + $length;
      [$start..$end-1] # list of variables in this partition
    }) x ($depth-1)
  ],
  \&permute
);

sub permute {
  print map { $a[$_] } @_;
  print "\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:10:52.987

当您使用子例程生成循环范围时，每次嵌套循环之一必须启动时都会调用它。这意味着包含循环的每次迭代一次。在每次调用之前都`$_`设置为包含循环变量的当前值，并且*所有*包含循环变量的值作为参数传递。

为了澄清这一点，`NestedLoops`您编码的语句等效于

```
sub loop_over {
  $start = 0 if $start == $depth;
  $start++;
  [$start * $length..$start * $length + $length - 1]
};

NestedLoops([
  [0..$length],
  (\&loop_over) x $depth,
], \&permute,); 
```

在原始 Perl 中，它看起来像

```
for my $i (0 .. $length) {

  $_ = $i;
  my $list = loop_over($i);

  for my $j (@$list) {

    $_ = $j;
    my $list = loop_over($i, $j);

    for my $k (@$list) {
      permute($i, $j, $k);
    }
  }
} 
```

所以也许现在你的计算`$start`是错误的更清楚了？在执行上升以重新启动包含循环之前，它会为最内层重新评估几次。

由于传递给子例程的参数由包含循环变量的所有值组成，`@_`因此可以检查 的大小以查看循环的哪个级别生成范围。例如，在上面的代码中， if`@_`包含两个值，它们是`$i`和`$j`，所以`$k`必须返回 for 的值；或者，如果只有一个参数，则为 的值`$i`，返回的值必须为 的范围`$j`。因此，您的正确值`$start`只是元素的数量，`@_`并且可以使用`my $start = @_;`.

使用这种方法，子程序也可以返回最外层循环的范围。代码看起来像这样

```
use strict;
use warnings;

use Algorithm::Loops qw(NestedLoops);

my @a = 'a'..'o';

my $length = 5;
my $start = 0;
my $depth = 2;

NestedLoops([
  (sub {
    $start = @_;
    [$start * $length .. $start * $length + $length - 1];
  }) x ($depth + 1)
], \&permute,);

sub permute {
  print map { $a[$_] } @_;
  print "\n";
} 
```

# javascript - 我的 XML 文件不是由 Google Chrome 和 Internet Explorer 提供的

> ID：10038256
> 
> 赞同：3
> 
> 时间：2012-04-06T01:47:40.000
> 
> 标签：javascript, xml, ajax, google-chrome, local

我正在制作一个简单的 javascript 应用程序，我需要在其中加载 xml 文件并将它们显示在用户面前。但我的代码只在 Mozilla Firefox 中有效，但在 chrome 和 Internet Explorer 中它们不起作用。我正在将我的 XML 文档加载到本地机器中。

```
$(document).ready(function() {
    $('.buttons').slideToggle('medium');

    $.ajax({ 
    url: "dictionary.xml", 
    success: function( xml ) { 
        $(xml).find("word").each(function(){ 
            $("ul").append("<li>" + $(this).text() + "</li>");
        }); 
   } 
    });
} 
```

这是我的 XML

```
 <?xml version="1.0" encoding="UTF-8"?> 
  <xml> 

    <word> 
      <threeletter>RIP</threeletter> 
      <fourletter>PIER</fourletter>
      <fiveletter>SPIRE</fiveletter> 
      <sixletter>SPIDER</sixletter> 
     </word>

     <word> 
      <threeletter>SUE</threeletter> 
      <fourletter>EMUS</fourletter>
      <fiveletter>SERUM</fiveletter> 
      <sixletter>RESUME</sixletter> 
     </word>

     <word> 
      <threeletter>COO</threeletter> 
      <fourletter>CON</fourletter>
      <fiveletter>CONDO</fiveletter> 
      <sixletter>CONDOM</sixletter> 
     </word>

    </xml> 
```

我发现了错误，在这里

```
XMLHttpRequest cannot load file:///C:/Users/John/Desktop/JsTwist/dictionary.xml. Origin null is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T02:31:37.200

`file://`默认情况下，Google Chrome 不允许通过协议进行 AJAX 请求。

您需要使用`--allow-file-access`开关启动 Chrome。

[以下是](http://www.chromium.org/developers/how-tos/run-chromium-with-flags)在每个操作系统上提供开关的说明。

我不确定如何为 IE 启用文件协议。

可能最简单的做法是设置本地 Web 服务器并运行您的应用程序以及其中的 xml 文件，那么您不必担心在任一浏览器中都会出现此问题。

**编辑**

后期编辑，我知道。我想把它扔在那里以防其他人有问题。

使用 jQuery 请求 xml 文档时，您应该*始终*在设置对象中提供数据类型。在内部，jQuery 最好猜测返回的内容，我已经让它认为一个非常好的 xml 文档是 HTML/XHTML。

为此，请添加**dataType: "xml"**。例如：

```
$(document).ready(function() {
    $('.buttons').slideToggle('medium');

    $.ajax({ 
        url: "dictionary.xml", 
        success: function( xml ) { 
            $(xml).find("word").each(function(){ 
                $("ul").append("<li>" + $(this).text() + "</li>");
            }); 
        },
        dataType: "xml"
    });
} 
```

支持的数据类型在[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)的文档页面上可用。

此外，我在尝试从远程服务器获取 RSS 提要时遇到了上面的**Access-Control-Allow-Origin错误。**我决定解决这个问题的唯一方法是从服务器端代码代理请求 RSS 提要并通过一些代理脚本传递它。这是 PHP 中的一个简单示例：

```
<?php

 if(isset($_GET['q']) && isAjax())
 {
    $q = strip_tags($_GET['q']);
    header("Status: 200");
    header("Content-type: text/xml");
    echo  file_get_contents('http://'.$q);   
    exit();
 }

function isAjax() {
    return (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && 
    ($_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest'));
}

?> 
```

**CAVEAT**`q`我强烈建议修改上述脚本，通过验证或进一步限制`isAjax`功能，仅允许您计划为您的客户端代码提供服务的那些位置。我不是 PHP 开发人员，也不假装知道 PHP 安全性的最佳实践。如果有人有改进 PHP 片段的建议，我很乐意应用它们。

# c++ - 我该如何解决这个问题 使用 std::function 时出错？

> ID：10038259
> 
> 赞同：10
> 
> 时间：2012-04-06T01:48:14.673
> 
> 标签：c++, c++11

在以下（工作）代码示例中，模板化的 register_enum() 函数用于迭代枚举并调用用户提供的回调以将枚举值转换为 c 字符串。所有枚举都在一个类中定义，枚举到字符串的转换是使用静态 to_cstring( enum ) 函数完成的。当一个类（如下面的着色器类）具有多个枚举和相应的重载 to_cstring(enum) 函数时，编译器无法确定传递给 register_enum() 的正确 to_cstring() 函数。我认为代码比我能解释得更好......

```
#include <functional>
#include <iostream>

// Actual code uses Lua, but for simplification
// I'll hide it in this example.
typedef void lua_State;

class widget
{
    public:
        enum class TYPE
        {
            BEGIN = 0,
            WINDOW = BEGIN,
            BUTTON,
            SCROLL,
            PROGRESS,
            END
        };

        static const char *to_cstring( const TYPE value )
        {
            switch ( value )
            {
                case TYPE::WINDOW: return "window";
                case TYPE::BUTTON: return "button";
                case TYPE::SCROLL: return "scroll";
                case TYPE::PROGRESS: return "progress";
                default: break;
            }
            return nullptr;
        }
};

class shader
{
    public:
        enum class FUNC
        {
            BEGIN = 0,
            TRANSLATE = BEGIN,
            ROTATE,
            SCALE,
            COLOR,
            COORD,
            END
        };

        enum class WAVEFORM
        {
            BEGIN = 0,
            SINE = BEGIN,
            SQUARE,
            TRIANGLE,
            LINEAR,
            NOISE,
            END
        };

        static const char *to_cstring( const FUNC value )
        {
            switch ( value )
            {
                case FUNC::TRANSLATE: return "translate";
                case FUNC::ROTATE: return "rotate";
                case FUNC::SCALE: return "scale";
                case FUNC::COLOR: return "color";
                case FUNC::COORD: return "coord";
                default: break;
            }
            return nullptr;
        }

        static const char *to_cstring( const WAVEFORM value )
        {
            switch ( value )
            {
                case WAVEFORM::SINE: return "sine";
                case WAVEFORM::SQUARE: return "square";
                case WAVEFORM::TRIANGLE: return "triangle";
                case WAVEFORM::LINEAR: return "linear";
                case WAVEFORM::NOISE: return "noise";
                default: break;
            }
            return nullptr;
        }
};

// Increment an enum value.
// My compiler (g++ 4.6) doesn't support type_traits for enumerations, so
// here I just static_cast the enum value to int... Something to be fixed
// later...
template < class E >
E &enum_increment( E &value )
{
    return value = ( value == E::END ) ? E::BEGIN : E( static_cast<int>( value ) + 1 );
}

widget::TYPE &operator++( widget::TYPE &e )
{
    return enum_increment< widget::TYPE >( e );
}

shader::FUNC &operator++( shader::FUNC &e )
{
    return enum_increment< shader::FUNC >( e );
}

shader::WAVEFORM &operator++( shader::WAVEFORM &e )
{
    return enum_increment< shader::WAVEFORM >( e );
}

// Register the enumeration with Lua
template< class E >
void register_enum( lua_State *L, const char *table_name, std::function< const char*( E ) > to_cstring )
{
    (void)L; // Not used in this example.
    // Actual code creates a table in Lua and sets table[ to_cstring( i ) ] = i
    for ( auto i = E::BEGIN; i < E::END; ++i )
    {
        // For now, assume to_cstring can't return nullptr...
        const char *key = to_cstring( i );
        const int value = static_cast<int>(i);
        std::cout << table_name << "." << key << " = " << value << std::endl;
    }
}

int main( int argc, char **argv )
{
    (void)argc; (void)argv;

    lua_State *L = nullptr;

    // Only one to_cstring function in widget class so this works...
    register_enum< widget::TYPE >( L, "widgets", widget::to_cstring );

    // ... but these don't know which to_cstring to use.
    register_enum< shader::FUNC >( L, "functions", shader::to_cstring );
    //register_enum< shader::WAVEFORM >( L, "waveforms", shader::to_cstring );

    return 0;
} 
```

编译器输出：

```
$ g++ -std=c++0x -Wall -Wextra -pedantic test.cpp -o test && ./test
test.cpp: In function ‘int main(int, char**)’:
test.cpp:140:69: error: no matching function for call to ‘register_enum(lua_State*&, const char [10], <unresolved overloaded function type>)’
test.cpp:140:69: note: candidate is:
test.cpp:117:7: note: template<class E> void register_enum(lua_State*, const char*, std::function<const char*(E)>) 
```

如何将正确的 to_cstring 函数传递给 register_enum()？我意识到我可以重命名各个 to_cstring() 函数，但如果可能的话，我想避免这种情况。也许我的设计很臭，你可以推荐一个更好的方法。

我的问题类似于[使用模板调用重载函数（未解决的重载函数类型编译器错误）](https://stackoverflow.com/q/8970152/331024)和[如何获取重载成员函数的地址？](https://stackoverflow.com/q/705854/331024)但到目前为止，我无法将该信息应用于我的具体问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T02:07:21.723

该错误告诉您可以使用两个潜在的重载，编译器无法为您做出决定。另一方面，您可以通过使用强制转换来确定使用哪个：

```
typedef const char *(*func_ptr)( shader::FUNC );
register_enum< shader::FUNC >( L, "functions", (func_ptr)shader::to_cstring ); 
```

或者没有 typedef （更难阅读的单行）：

```
register_enum< shader::FUNC >( L, "functions", 
             (const char *(*)( shader::FUNC ))shader::to_cstring ); 
```

^*请注意，在函数签名中，顶层`const`被删除。

下一个问题是为什么编译器自己没有找到合适的重载？问题在于，在对您的调用中`register_enum`传递了枚举的类型，这决定了`std::function`to be的类型`std::function< const char* ( shader::FUNC ) >`，但是`std::function`有一个模板化的构造函数，并且在尝试将参数的类型推断给构造函数之前，编译器必须知道你想使用哪个重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-18T22:40:59.623

我想说，在这种情况下，如果编译器无法在两个重载之间做出决定，你应该重命名其中一个！这将防止函数的进一步模棱两可的使用。

# php - 单击另一个文件中的链接后，如何在单个文件中显示帖子，例如“article.php？id =”

> ID：10038265
> 
> 赞同：-4
> 
> 时间：2012-04-06T01:48:55.823
> 
> 标签：php, mysql

我有一个显示帖子标题的文件，我希望将帖子的内容显示在单个 php 文件中，例如“article.php?id="。我只是想要一些帮助如何使用帖子的 ID 来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:57:30.870

在显示标题的页面上，您将使用`<a href='article.php?id={$id}'>`包装标题。请记住，`$id`每个标题的 都应该是唯一的。单击锚点应将用户带到 article.php，在页面上，从 url 获取 id 并在数据库中查询文章。例如

```
//Get the id first
$id = mysql_real_escape_string($_GET['id']);

//Then query your database for the article
$result = mysql_query("SELECT article FROM article_tbl WHERE id = '$id'"); 
```

希望这可以帮助。

# r - 在 r 中创建特殊数据对象

> ID：10038274
> 
> 赞同：2
> 
> 时间：2012-04-06T01:50:07.137
> 
> 标签：r, list, data-binding, package, data-objects

对于某些包，我可以看到特殊类型的对象。例如，当我尝试从包中打印数据集时收到以下消息。

> 多性状

```
This is an object of class "cross".
  It is too complex to print, so we provide just this summary.
    RI strains via selfing

    No. individuals:    162

......................and other summary information 
```

> 是（多重性状）

```
 [1] "riself" 
```

我想知道我们如何创建这样的对象。它们是数据框的特殊列表，向量矩阵吗？

```
X <- c("A", "B", "C")
Y <- data.frame (A = 1:10, B = 21:30, C = 31:40)
myeq <- c("Y ~ X1 + Y1")
K <- 100
A = 1:20
B = B= 21:40
J <- as.matrix(A,B )
myl1 <- list(J, K) 
```

现在我的复杂对象：

```
mycomplexobject <- list(X, Y, myeq, K, J, myl1) 
mycomplexobject
str(mycomplexobject)

List of 6
 $ : chr [1:3] "A" "B" "C"
 $ :'data.frame':       10 obs. of  3 variables:
  ..$ A: int [1:10] 1 2 3 4 5 6 7 8 9 10
  ..$ B: int [1:10] 21 22 23 24 25 26 27 28 29 30
  ..$ C: int [1:10] 31 32 33 34 35 36 37 38 39 40
 $ : chr "Y ~ X1 + Y1"
 $ : num 100
 $ : int [1:20, 1] 1 2 3 4 5 6 7 8 9 10 ...
 $ :List of 2
  ..$ : int [1:20, 1] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ : num 100 
```

> 是（我的复杂对象）

```
 [1] "list"   "vector" 
```

有没有办法制作特殊对象并防止打印整个列表而不是像“打印很复杂”这样的消息并提供摘要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T02:13:49.317

只需设置`class`您的对象并提供一个`print`方法。

```
class(mycomplexobject) <- c("too_complex", class(mycomplexobject))
print.too_complex <- function(x) {
  cat("Complex object of length", length(x), "\n")
}
mycomplexobject 
```

# r - 如何对 Matrix 包中的“sparseMatrix”类对象进行 QR 分解？

> ID：10038276
> 
> 赞同：2
> 
> 时间：2012-04-06T01:50:36.443
> 
> 标签：r, matrix

我想用`Matrix:::qr()`我创建的矩阵上的函数进行QR 分解`B<-as(A, "sparseMatrix")`。我知道我可以得到 R 矩阵`Matrix:::qr.R()`。但是，我还需要 Q 矩阵。Matrix 包中似乎没有 qr.Q() 函数。我如何获得 Q 矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:45:33.227

`Q`矩阵实际上存储在插槽`V`中。当前的 R Matrix 版本似乎包含一个错误 --- 它只是`a`在进行 qr 分解之前神秘地将零行添加到矩阵中。我希望开发人员能来解释一下。因此，以下代码可帮助您恢复 R 和 Q：

```
gx.qr.Q <- function(a){
  if(is(a, "qr")){
    return(qr.Q(a, complete = T))
  }else if(is(a, "sparseQR")){
    Q <- diag(nrow = a@V@Dim[1], ncol = a@V@Dim[1])
    for(i in rev(1:a@V@Dim[2])){
      Q <- Q - (a@V[ ,i] * a@beta[i]) %*% (a@V[ ,i] %*% Q)
    }
    return(Q[order(a@p), ][1:a@Dim[1], 1:a@Dim[1]])
  }else{
    stop(gettextf("gx.qr.Q() fails on class '%s'", class(a)[1]))
  }
}

gx.qr.R <- function(a){
  if(is(a, "qr")){
    return(qr.R(a, complete = T)[ ,order(a$pivot)])
  }else if(is(a, "sparseQR")){
    if(length(a@q) == 0){
      return(a@R[1:a@Dim[1], ])
    }else{
      return(a@R[1:a@Dim[1] ,order(a@q)])
    }
  }else{
    stop(gettextf("gx.qr.R() fails on class '%s'", class(a)[1]))
  }
} 
```

我已经通过随机设置矩阵大小和稀疏性进行了测试，它们工作顺利。然而，这是一种“不知道为什么就让它工作”的风格，在这里发布仅供讨论。因为我还没有破解“Matrix”包的实现细节。

# iphone - 我可以在我的 iPhone 应用程序中缓存多少张图片？

> ID：10038277
> 
> 赞同：1
> 
> 时间：2012-04-06T01:50:49.283
> 
> 标签：iphone, objective-c, ios, memory-management

我想知道我可以在 iPhone 文档目录中存储多少图像，这样我就不会遇到任何内存问题。每次用户想要访问它们时，我都会在缓存图像或从网络服务器加载它们之间纠结。在任何给定时间缓存的图像很可能不会超过 10-20 个......

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:13:22.753

文件夹中单个文件的最大大小上限为 2GB `/Documents`。除此之外，您可以存储任意数量的图像。iOS 本身并没有限制您可以在设备上使用多少空间。因此，您的空间限制是设备上 Flash 的大小（即 16GB、32GB 等）。

您可以考虑改用，`/Library/Caches`因为 iCloud 将尝试同步 Documents 文件夹（如果配置了权利）。我听说 App 因过度使用 Documents 文件夹而被审核拒绝。要获取路径，请`NSSearchPathForDirectoriesInDomains`致电`NSCachesDirectory`and调用`NSUserDomainMask`。

尽管用户可以确定您在系统设置中占用的空间大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T01:53:40.933

您可能可以缓存可用内存允许的尽可能多的文件，但是在任何给定时间缓存 10 到 20 张图像绝对应该是安全的。

顺便说一句，为什么不考虑使用缓存目录而不是使用文档目录，因为他（+1 给他！）建议？

[这是一个相关的问题，显示了如何获取目录的大小](https://stackoverflow.com/questions/2224642/size-of-nscachesdirectory-in-iphone)。

# android - android：可以在 30 秒内使用三星 Galaxy S2 的 LocationManager 获取位置

> ID：10038282
> 
> 赞同：2
> 
> 时间：2012-04-06T01:52:28.160
> 
> 标签：android, locationmanager

我使用 LocationManager.requestLocationUpdates 为 GPS 和网络提供商请求位置，并且在“位置和安全”设置中选择了位置设置。但是 onLocationChanged 永远不会在 30 秒内被调用。但是，该代码在其他手机上运行良好，例如 HTC 渴望。但我发现还有其他应用程序，例如人人网，可以在三星 Galaxy S2 中获取位置。你能帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:20:08.383

你一定来自中国。而你的 Galaxy S2 只在中国销售！我们称之为（行货）。locationManager 无法正常工作，因为 google 服务已从手机中删除。

和。您可以通过 WIFI 和 Cell-tower 直接查询位置。 [http://www.google.com/loc/json](http://www.google.com/loc/json)

# javascript - 如何向 d3 生成的力导向图的节点添加标题属性？

> ID：10038288
> 
> 赞同：2
> 
> 时间：2012-04-06T01:53:37.897
> 
> 标签：javascript, d3.js, tooltip, visualization, force-layout

在 d3 演示（[http://goo.gl/lN7Jo](http://goo.gl/lN7Jo)）之后，我正在尝试创建一个力导向图。我正在尝试向通过这样做创建的节点元素添加标题属性。

```
var node = svg.selectAll("circle.node")
      .data(json.nodes)
    .enter().append("circle")
      .attr("class", "node")

      // here is how I try to add a title.
      .attr("title", "my title")

      .attr("r", 5)
      .style("fill", function(d) { return color(d.group); })
      .call(force.drag); 
```

但是，我的图表的节点没有显示标题属性。这样做的正确方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:07:04.223

在 SVG`title`中，属性实际上是描述其父级的元素，因此您必须遵循您链接的示例...

```
var node = svg.selectAll("circle.node")
      .data(json.nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", 5)
      .style("fill", function(d) { return color(d.group); })
      .call(force.drag);

node.append("title")
    .text("my text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T11:03:13.347

在初始化节点的下方添加此代码。这将为每个节点添加一些硬编码文本作为标题。

```
node.append("title")
    .text("my text"); 
```

如果要添加`name`为标题，请执行此操作；

```
node.append("title")
    .text(function (d) {
            return d.name;
        }) 
```

# ios - Xcode：viewDidUnload 括号表示法而不是点表示法

> ID：10038291
> 
> 赞同：0
> 
> 时间：2012-04-06T01:53:44.353
> 
> 标签：ios, xcode, cocoa, syntax, properties

这不是关于括号与点符号的另一场辩论。我在 Xcode 中注意到，当我设置 outlets 时，Xcode 会自动将 ViewDidUnload 中的指针设置为 nil，如下所示：

```
- (void)viewDidUnload
{
    [self setScrollView:nil];
    [self setEnergyLabel:nil];
    [self setEnergyBar:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
} 
```

像这样使用括号表示法而不是点表示法是否有原因？

```
- (void)viewDidUnload
{
    self.scrollView = nil;
    self.energyLabel = nil;
    self.energyBar = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:59:12.347

没有区别。我认为后者更容易让脚本从类元数据生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:59:27.787

在这种情况下，没有区别。

# css - 如何管理现代/古代浏览器的资产

> ID：10038293
> 
> 赞同：1
> 
> 时间：2012-04-06T01:54:37.960
> 
> 标签：css, http, browser

有了新的浏览器增强功能，例如 CSS3 动画、渐变、SVG 背景等……新浏览器不必下载旧版 CSS 代码，旧版浏览器不必下载高级 CSS 代码。那么在 HTTP 级别（没有服务器端编程方法）你如何处理这样的问题？您是否应该将 base.css 文件提供给两组浏览器，然后根据请求的浏览器组提供一个额外的 CSS 文件？有没有办法包含一个简单地将浏览器重定向到浏览器组特定重写的 CSS 文件？或者这是应该首先在客户端弄清楚并下载的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:15:47.063

完全接受优雅降级和渐进增强的概念将允许您对所有目标浏览器使用相同的 css - 简而言之，如果浏览器不支持 css3 圆角 - 给它供应商前缀规则；如果它也不支持 - 没什么大不了的，该网站仍然可以使用方角。

与额外的 http 请求相比，下载具有供应商特定前缀和标准前缀的规则的开销将是最小的，并且将提高可维护性并通过不必依赖浏览器检测来为您省去麻烦。

特定于布局的 hack 通常只能应用于 IE 系列，它可以由 html 条件注释定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T03:08:53.953

我发现有三种方法可以做到这一点。

1.  为每个样式表和 javascript 资产使用一个大文件，然后使用诸如modernizr 和特性嗅探之类的东西来清除哪个浏览器在做什么。或者只是让所有浏览器都做同样的事情。这更适合开发输入和测试。

2.  使用两个文件（一个名为 Ancient.css，另一个名为 modern.css）并使用服务器端 HTTP 嗅探器操作检查浏览器的版本，然后为其提供适当的文件。将HTTP缓存设置为远期过期，防止每次访问服务器查看下载哪个文件。要生成文件，只需创建一个文件，其中包含所有浏览器之间共享的所有核心内容，另一个包含旧浏览器的模拟内容。好处是你可以使用所有新的 CSS3 和 HTML5-JavaScript 东西，但缺点是你需要测试以确保现代浏览器代码的东西与古老的东西一样工作。

3.  有两个资产文件（现代 + 古代）并首先下载现代。然后让浏览器通过modernizr查看它是否支持某些东西，如果不支持，则让它下载古代文件。这样做的好处是您不需要开发任何额外的服务器端内容，但缺点是您的网站渲染速度会变慢，并且您可能会同时下载同一资源的多个下载。

# java - facelet dataTable：在支持 bean 中找不到方法，试图将实例发送回 bean

> ID：10038299
> 
> 赞同：1
> 
> 时间：2012-04-06T01:55:49.927
> 
> 标签：java, jsf, facelets, el

如何将特定行的 ListDataTable 所在的当前 javax.mail.Message 发送回支持 bean，以便获取该特定 Message 实例的一些标头信息？我认为问题在于这是来自客户端数据表中的。

如何使 getUrl 可用于 ListDataTable？

我试过了：

```
<h:outputText value="#{messageBean.foo(m.header("Archived-at"))}"></h:outputText> 
```

返回以下错误：

```
Element type "h:outputText" must be followed by either attribute specifications, ">" or "/>". 
```

我认为它类似于[command link](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable)，它暗示了以下语法：

```
<h:commandLink action="#{bean.insert(item.id)}" value="insert" /> 
```

这与我正在做的事情很接近。就我而言，我只想将特定消息发送回 MessageBean.getUrl(Message) ，但这并不像我预期的那样工作。

我也试过：

```
/foo/client.xhtml @48,61 value="#{messageBean.url(m)}": Method url not found 
```

所以这显然不是将对象从模板客户端发送到支持 bean 的正确方法。但是，这就是我想要的方法，将实际的 Message 实例发送回 bean。

facelets 2.0 客户端：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./template.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="content">
        <h:dataTable value="#{messageBean.model}" var="m">
            <h:column>
                <f:facet name="subject">
                    <h:outputText value="subject" />
                </f:facet>
                <h:outputText value="#{m.subject}"></h:outputText>
            </h:column>
            <h:column>
                <f:facet name="content">
                    <h:outputText value="content" />
                </f:facet>
                <h:outputText value="#{m.sentDate}"></h:outputText>
            </h:column>
            <h:column>
                <f:facet name="date">
                    <h:outputText value="date" />
                </f:facet>
                <h:outputText value="#{m.sentDate}"></h:outputText>
            </h:column>
        </h:dataTable>
    </ui:define>
</ui:composition> 
```

后备豆：

```
package net.bounceme.dur.nntp;

import java.io.Serializable;
import java.net.URL;
import java.util.ArrayList;
import java.util.Enumeration;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.enterprise.context.SessionScoped;
import javax.faces.model.DataModel;
import javax.faces.model.ListDataModel;
import javax.inject.Named;
import javax.mail.Header;
import javax.mail.Message;

@Named
@SessionScoped
public class MessageBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger logger = Logger.getLogger(MessageBean.class.getName());
    private static Level level = Level.INFO;

    public MessageBean() {
        logger.log(level, "MessageBean..");
    }

    public DataModel getModel() throws Exception {
        logger.log(level, "MessageBean.getModel..");
        List<Message> messages = new ArrayList<Message>();
        SingletonNNTP nntp = SingletonNNTP.INSTANCE;
        messages = nntp.getMessages();
        DataModel messagesDataModel = new ListDataModel(messages);
        return messagesDataModel;
    }

    public List<String> getStringHeaders(Message message) throws Exception {
        List<Header> headerListOfHeaders = getHeaders(message);
        List<String> stringListOfHeaders = new ArrayList<String>();
        for (Header h : headerListOfHeaders) {
            stringListOfHeaders.add(h.getName() + " " + h.getValue() + "\n");
        }
        return stringListOfHeaders;
    }

    public URL getUrl(Message message) throws Exception {
        List<Header> headers = getHeaders(message);
        URL url = new URL("http://www.google.com/");
        for (Header h : headers) {
            if ("Archived-at".equals(h.getName())) {
                String s = h.getValue();
                s = s.substring(1, s.length() - 1);
                url = new URL(s);
            }
        }
        return url;
    }

    private List<Header> getHeaders(Message message) throws Exception {
            Enumeration allHeaders = message.getAllHeaders();
            List<Header> headers = new ArrayList<Header>();
            while (allHeaders.hasMoreElements()) {
                Header hdr = (Header) allHeaders.nextElement();
                headers.add(hdr);
            }
            return headers;
        }
} 
```

我想将 getUrl 与 MessageBean 一起保留，但愿意将该方法分解到另一个类。但是，哪个类，以及如何引用它？只是像 MyBeanOps 什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T04:27:21.613

至于你的第一次尝试，

```
<h:outputText value="#{messageBean.foo(m.header("Archived-at"))}" /> 
```

这会失败，因为您过早地结束属性值，然后以无效的属性 name=value 语法开始。注意语法高亮。对嵌套字符串使用单引号而不是双引号：

```
<h:outputText value="#{messageBean.foo(m.header('Archived-at'))}" /> 
```

至于你的第二次尝试，

```
<h:commandLink action="#{bean.insert(item.id)}" value="insert" /> 
```

我不确定为什么这对您来说会失败，因为它似乎是合法的语法。

至于您没有显示任何代码而只显示错误消息的第三次尝试，

```
/foo/client.xhtml @48,61 value="#{messageBean.url(m)}": Method url not found 
```

那是因为你没有方法`url(Message message)`。相反，您有一个方法`getUrl(Message message)`。所以你应该使用

```
<h:commandLink action="#{messageBean.getUrl(m)}" value="insert" /> 
```

但是，这并不能解决问题。这不是一个有效的操作方法。这应该被视为一个值表达式。所以，这应该这样做：

```
<a href="#{messageBean.getUrl(m)}">insert</a> 
```

这将打印`URL#toString()`作为属性值的结果`href`，这正是您想要的。您当然也可以使用 a `<h:outputLink>`：

```
<h:outputLink value="#{messageBean.getUrl(m)}">insert</h:outputLink> 
```

# objective-c - Objective C - 带有 ARC 的自定义设置器？

> ID：10038302
> 
> 赞同：34
> 
> 时间：2012-04-06T01:56:41.877
> 
> 标签：objective-c, properties, automatic-ref-counting

这是我以前编写自定义**保留**设置器的方式：

```
- (void)setMyObject:(MyObject *)anObject
{
   [_myObject release], _myObject =  nil;
   _myObject = [anObject retain];

   // Other stuff
} 
```

当属性设置为强时，如何使用 ARC 实现这一点。如何确保变量具有强指针？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-06T02:00:02.527

在`strong`ivar 级别上照顾自己，所以你只能做

```
- (void)setMyObject:(MyObject *)anObject
{
   _myObject = anObject;
   // other stuff
} 
```

就是这样。

注意：如果您在没有自动属性的情况下执行此操作，则 ivar 将是

```
MyObject *_myObject; 
```

然后 ARC 会为您处理保留和释放（谢天谢地）。`__strong`默认情况下是限定符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T06:00:11.447

只是总结一下答案

.h 文件

```
//If you are doing this without the ivar
@property (nonatomic, strong) MyObject *myObject; 
```

.m 文件

```
@synthesize myObject = _myObject;

- (void)setMyObject:(MyObject *)anObject
{
    if (_myObject != anObject)
    {
        _myObject = nil;
        _myObject = anObject;
    }
    // other stuff
} 
```

# php - PHP DOM：获取所有文本值

> ID：10038303
> 
> 赞同：3
> 
> 时间：2012-04-06T01:56:58.197
> 
> 标签：php, text, html-parsing, domdocument

我有一个可能看起来像这样的 HTML 字符串：

```
<body>
  <div>
    <span class="blah">Monkey </span>
    <p>breath really <b>stinks</b></p>
    And I don't like it!
  </div>
</body> 
```

正如您所看到的，有些文本作为值正确包含在元素内部，有些元素包含文本节点和其他元素。我希望能够获取body 下**的所有文本值**（假设 body 是我存储在变量中的 DOMElement）。

所以，输出看起来像：

> 猴子的呼吸真的很臭而且我不喜欢它！

我该怎么做？XPath？正则表达式？魔法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T02:13:08.483

如果您不介意使用 jquery，我可能对此有答案。

首先我们需要抓取内容。因此使用 php curl 并回显内容。在获取正文中的内容后，触发一个 jquery 函数，该函数具有以下行，

假设所有文本都包含在具有 id 内容的 div 中

```
$('#content').text() gives you the required output. 
```

请记住使用 jquery 委托将函数绑定到您选择的任何事件。

# wcf - 如果元数据在不同的模型项目中，如何在元数据文件中设置自定义验证

> ID：10038312
> 
> 赞同：2
> 
> 时间：2012-04-06T01:58:33.713
> 
> 标签：wcf, silverlight, silverlight-4.0, wcf-ria-services, ria

我的 silverlight 解决方案有 3 个项目文件

1.  Silverlight 部分（客户端）
2.  Web 部件（服务器）
3.  实体模型（我在一个单独的项目中维护了 edmx 和元数据）

元数据文件是具有相关数据注释验证的部分类。

```
[MetadataTypeAttribute(typeof(User.UserMetadata))]
public partial class User
{
    [CustomValidation(typeof(UsernameValidator), "IsUsernameAvailable")]
    public string UserName { get; set; }
} 
```

现在我的问题是我需要在哪里保留此类 UsernameValidator 如果我的元数据类和 edmx 在服务器端（Web），那么我知道我需要在我的 Web 项目中创建一个 .shared.cs 类，然后添加正确的静态方法。

我的 IsUserAvailable 方法实习生将调用 domainservice 方法作为 asyc 验证的一部分。

```
 [Invoke]
    public bool IsUsernameAvailable(string username)
    {
        return !Membership.FindUsersByName(username).Cast<MembershipUser>().Any();
    } 
```

如果我的元数据类与我的域服务在同一个项目中，那么我可以从我的 UsernameValidator.Shared.cs 类中调用域服务方法。

但是这里我的实体模型和元数据在单独的库中。

任何想法将不胜感激

Jeff 在这里很好地解释了 asyc 验证 [http://jeffhandley.com/archive/2010/05/26/asyncvalidation-again.aspx](http://jeffhandley.com/archive/2010/05/26/asyncvalidation-again.aspx) 但这仅在您的模型、元数据和共享类都在服务器端时才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:56:34.957

有一种黑客可以做到这一点。这不是一种干净的方法，但这可能是它的工作方式。

因为 .shared 负责代码生成，所以它不会抱怨代码的#if 括号中的某些编译错误。所以你可以做的是在任何项目中创建一个 Validator.Shared.cs 并确保它生成到 silverlight 端。

添加以下代码。并且不要忘记命名空间。

```
#if SILVERLIGHT
using WebProject.Web.Services;
using System.ServiceModel.DomainServices.Client;
#endif

#if SILVERLIGHT
            UserContext context = new UserContext();
            InvokeOperation<bool> availability = context.DoesUserExist(username);
            //code ommited. use what logic you want, maybe Jeffs post. 
#endif 
```

编译器将忽略此代码部分，因为它不满足 if 语句的条件。同时，在silverlight 客户端，它会尝试重新编译满足if 语句条件的共享验证器。

就像我说的。这不是一个干净的方法来做到这一点。而且您可能会因缺少名称空间而遇到麻烦。您需要在非生成的 Validator.shared.cs 中解决它们，最终让它在 silverlight 中工作。如果你做对了，你可以在 silverlight 中使用调用操作进行验证。但在您的项目中却没有像 Jeff 的帖子那样具有模型和元数据。

**编辑：我找到了一种更清洁、更好的方法**

您可以在 silverlight 客户端创建部分类并执行以下操作

```
public partial class User
    {
        partial void OnUserNameChanging(string value)
        {
            //must be new to check for this validation rule
            if(EntityState == EntityState.New)
            {
                var ctx = new UserContext();
                ctx.IsValidUserName(value).Completed += (s, args) =>
                {
                    InvokeOperation invop = (InvokeOperation) s;
                    bool isValid = (bool) invop.Value;

                    if(!isValid)
                    {
                        ValidationResult error = new ValidationResult(
                            "Username already exists",
                            new string[] {"UserName"});
                        ValidationErrors.Add(error;
                    }
                };
            }
        }
    } 
```

这是由 WCF RIA 服务生成的一种方法，可以很容易地进行部分化，您可以像这样添加带外验证。这是一种更简洁的方法，但这种验证现在仍然只存在于 silverlight 客户端。

希望这可以帮助

# python - 继承：方法从父类获取其文档字符串

> ID：10038313
> 
> 赞同：0
> 
> 时间：2012-04-06T01:58:41.953
> 
> 标签：python, docstring

我在玩文档字符串，最后得到了这段代码：

```
import inspect

class InheritedDoc(object):
    """ Decorator to find docstrings from parent classes of
        the method class.
        Decorator are interpreted on the import and not
        on the call, so the inherated docstrings will be
        read when we call help.

        @type mroOrder: bool
        @param mroOrder: follow the order of the
            method resolution order (True) or reserse it (False).
            Default: True.

        @Note: if this doc is seen in the code, instead of the
            docstring of a superClass, that must means the "()"
            are missing on the call of InheritedDoc:
                @InheritedDoc -> @InheritedDoc()
    """
    __empty_doc = 'No Doc found in parent classes.\n'
    __empty_doc += 'DocString needs to be set.'

    def __init__(self, mroOrder=True):
        """ Constructor
        """
        self.__mro_order = mroOrder

    def __call__(self, method):
        """ If there are decorator arguments, __call__()
            is only called once, as part of the decoration
            process!
            You can only give it a single argument,
            which is the function object.
        """
        # Generated only if help() were used.
        # Listing of super classes of the method class.
        #
        parent_classes = [
            element for name, element \
               in method.func_globals.items() \
                  if inspect.isclass(element)
        ]

        # We don't want to inheritate from the decorator itself.
        #
        parent_classes.remove(self.__class__)

        # Do we follow the order of the MRO or do we reverse it.
        #
        if not self.__mro_order:
            parent_classes = reversed(parent_classes)

        name = method.__name__

        doc = ''

        for parent_class in parent_classes:

            # Testing if the class define the method
            #
            if hasattr(parent_class, name):
                # Getting the method to find in it the doc.
                #
                class_method = eval('parent_class.%s' % name)
                doc = class_method.__doc__

                # We want to define the doc only if the method
                # got a doc set.
                #
                if doc:
                    # The doc is defined and we don't want
                    # to keep on defining it again and again. 
                    #
                    break

        # We may end up here without any docstring if none were 
        # actually set in parent classes.
        #
        method.__doc__ = doc or self.__empty_doc

        return method 
```

# c - AzureXplorer - 本地 blob 存储 - 手动创建文件夹时出现意外隐藏文件

> ID：10038314
> 
> 赞同：0
> 
> 时间：2012-04-06T01:58:44.917
> 
> 标签：c, azure, blob, local, hidden

AzureXplorer - 本地 blob 存储 - 手动创建文件夹时出现意外隐藏文件

我们在 Azure 中运行良好的 C# ListBlobs 方法显示每个文件夹在本地命名为“$$$.$$$”的额外文件在 AzureXplorer 或 ClumsyLeaf 中不可见。谷歌和 MSDN 都没有出现任何关于此的记录，所以我想知道是否有其他人看到过这个。AzureXplorer 中此缺陷的解决方法是使用不会生成这些隐藏文件的 ClumsyLeaf 手动创建本地 blob 文件夹，从而使我们无需专门围绕这些文件进行编码即可在本地继续测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T04:53:55.840

Windows Azure Blob 存储**不支持文件夹**。所有和任何伪造文件夹的软件都会创建文件（blob）。通过在 blob 名称中设置前缀来模拟文件夹（或目录）。因为斜杠字符对于 blob 名称是有效的。

您可以在以下资源中找到有关 blob 服务的更多信息：

*   [http://msdn.microsoft.com/en-us/library/windowsazure/dd179376.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179376.aspx)
*   [http://msdn.microsoft.com/en-us/library/windowsazure/dd135715.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd135715.aspx)

从第二个资源：

> Blob 服务基于平面存储方案，而不是分层方案。但是，您可以在 blob 名称中指定字符或字符串分隔符来创建虚拟层次结构。

这就是为什么，为了拥有一个“文件夹”，您必须在该“文件夹”中至少有一个 blob（文件）（我引用“文件夹”这个词，因为它不是真实的，而只是名称的一部分blob 本身）。

# android - 安卓流媒体声音

> ID：10038318
> 
> 赞同：1
> 
> 时间：2012-04-06T01:59:21.293
> 
> 标签：android, stream, streaming

我正在为 android 做一个流媒体音乐播放器。我尝试过使用 MediaPlayer

```
mp.setDataSource("http://www.myServerPage.com/songUrl.mp3"); 
mp.prepare(); 
mp.start(); 
```

它有效但不好。准备状态非常缓慢，并且应用程序经常处于冻结状态。

我在论坛和教程上进行了很多搜索，据我所知，这是常用的方法。

有谁知道这是打开流从服务器播放音乐的另一种方式，或者有任何好的建议，可能是在 NDK 或其他输入流中？

谢谢您的帮助。/米克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:08:28.780

[媒体播放文章](http://developer.android.com/guide/topics/media/mediaplayer.html)非常清楚如何处理远程媒体源：调用`prepareAsync()`并设置一个侦听器以在源准备好播放时获得通知。

原因正是您正在经历的：

> (...) 对 prepare() 的调用可能需要很长时间才能执行，因为它可能涉及获取和解码媒体数据。因此，与任何可能需要很长时间才能执行的方法一样，您**永远不应该从应用程序的 UI 线程中调用它**。这样做会导致 UI 挂起，直到方法返回，这是非常糟糕的用户体验，并可能导致 ANR（应用程序无响应）错误。

我建议您阅读上述文章以获取更多信息和提示，以帮助您进一步发展。

# c# - C# IDisposable 正确用法和调用

> ID：10038321
> 
> 赞同：0
> 
> 时间：2012-04-06T01:59:46.083
> 
> 标签：c#

这可能是一个新手问题，所以我会马上出来说。这是我第一次创建 IDisposable 类，我想确保我正确地创建了我的类，正确地调用它，并正确地处理它。谢谢！

```
使用系统；
使用 System.Collections.Generic；
使用 System.Linq；
使用 System.Text；

命名空间爬虫
{
    类 LoggingClass
    {
        公共类 LoggingDisposeable : IDisposable
        {
            public void GenericLogging(string systemMsg, string SystemClass, string SystemSection, string ID, string FixID, string baseURL, string mysqlQueryName, string mysqlQuery)
            {
                字符串 Loggingall = " 插入 tblLogs " +
                                "set SystemMsg='" + systemMsg.Replace("'", "''") + "'" +
                                ",SystemClass = '" + SystemClass.Replace("'", "''") + "'" +
                                ",SystemSection = '" + SystemSection.Replace("'", "''") +
                                ",ID = '" + CarID.Replace("'", "''") + "'" +
                                ",FixID = '" + FixID.Replace("'", "''") + "'" +
                                ",baseurl = '" + baseURL.Replace("'", "''") + "'" +
                                ",mysqlqueryName = '" + mysqlQuery.Replace("'", "''") +
                                ",mysqlquery = '" + mysqlQuery.Replace("'", "''") + "'" +
                                ",Site = '自动交易者'" +
                                ",TimeStamp = Now()";
                使用 (var MYSQLP = new MySQLProcessing.MySQLProcessor())
                {
                    MYSQLP.MySQLInsertUpdate(Loggingall, "Loggingall");
                }
            }

            公共无效处置（）
            {
                this.Dispose(true);
                GC.SuppressFinalize(this);
            }

            protected virtual void Dispose(bool disposing)
            {
                if (!this.Disposed)
                {
                    如果（处置）
                    {
                        // 在此处执行托管清理。

                    }

                    // 在此处执行非托管清理。

                    this.Disposed = true;
                }
            }

            受保护的布尔处置{得到; 私人套装；}

        }
    }
}

```

这就是我所说的。

```
var options = new ParallelOptions();
options.MaxDegreeOfParallelism = 5;
                Parallel.ForEach(urlTable.AsEnumerable(),options, drow =>
            {

 `using (var logClass = new LoggingClass.LoggingDisposeable())
                                {
                                    logClass.GenericLogging("ZipCode not available for this dealerL", "DealershipRequest", "checkExistingDealers", dealerID, "DealerShipZipCode",rDealerLink, "", "");
}
}</pre>` 

            回答 #1

赞同：2

时间：2012-04-06T02:19:40.453

我认为你打算做的是这样的：

```
public class LoggingDisposeable : IDisposable
{
    MySQLProcessing MySQLP;

    public LoggingDisposeable()
    {
        MYSQLP = new MySQLProcessing.MySQLProcessor();
    }

    public void GenericLogging(string systemMsg, string SystemClass, string SystemSection, string ID, string FixID, string baseURL, string mysqlQueryName, string mysqlQuery)
    {
        string Loggingall = " insert into tblLogs " +
                        "set SystemMsg='" + systemMsg.Replace("'", "''") + "'" +
                        ",SystemClass = '" + SystemClass.Replace("'", "''") + "'" +
                        ",SystemSection = '" + SystemSection.Replace("'", "''") +
                        ",ID = '" + CarID.Replace("'", "''") + "'" +
                        ",FixID = '" + FixID.Replace("'", "''") + "'" +
                        ",baseurl = '" + baseURL.Replace("'", "''") + "'" +
                        ",mysqlqueryName = '" + mysqlQuery.Replace("'", "''") +
                        ",mysqlquery = '" + mysqlQuery.Replace("'", "''") + "'" +
                        ",Site = 'AutoTrader'" +
                        ",TimeStamp = Now()";

            MYSQLP.MySQLInsertUpdate(Loggingall, "Loggingall");                
    }

    public void Dispose()
    {
        MYSQLP.Dispose();
    }
} 
```

然后像这样使用它：

```
using (var logClass = new LoggingDisposeable())
{
    var options = new ParallelOptions();
    options.MaxDegreeOfParallelism = 5;
    Parallel.ForEach(urlTable.AsEnumerable(), options, drow =>
        {
            logClass.GenericLogging("ZipCode not available for this dealerL", "DealershipRequest", "checkExistingDealers", dealerID, "DealerShipZipCode", rDealerLink, "", "");
        });
} 
```

```

# netbeans - 适用于不同客户的 YouTrack 连接器

> ID：10038328
> 
> 赞同：2
> 
> 时间：2012-04-06T02:00:56.320
> 
> 标签：netbeans, connector, youtrack

是否可以从 Web 客户端以外的其他客户端查询 YouTrack 问题？例如，是否有任何连接器可用于列出来自除 Idea（Netbeans 或其他任何东西等）以外的其他 IDE 的 YouTrack 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:49:55.500

在这里您可以找到适用于 YouTrack 的 ReSharper 插件：[https](https://github.com/JetBrains/YouTrackForReSharper) ://github.com/JetBrains/YouTrackForReSharper 。此外，这里是 YouTrack REST API 的描述：[http](http://confluence.jetbrains.com/display/YTD3/YouTrack+REST+API+Reference) ://confluence.jetbrains.com/display/YTD3/YouTrack+REST+API+Reference如果您想将 YouTrack 与几乎任何类型的工具集成，您可以使用它。

亚历山大

# asp.net-mvc-3 - 如何使我的网页适应不同的浏览器和不同的分辨率？

> ID：10038335
> 
> 赞同：0
> 
> 时间：2012-04-06T02:03:42.677
> 
> 标签：asp.net-mvc-3

我正在使用asp.net MVC3创建一个网站，但是虽然我在我的网页中使用了％，但网页无法适应不同的浏览器和分辨率，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:29:25.080

不确定什么显示不正确。

[我使用来自Yahoo 用户界面](http://yuilibrary.com/)API的 CSS 网格和字体。这为我处理了基本的浏览器差异。然后我只需添加我的 HTML 和 CSS。去下载框架，真的很不错。它将帮助您为可以构建的 CSS 打下坚实的基础。

一切顺利。

# php - 理解使用php在服务器端缓存js文件

> ID：10038338
> 
> 赞同：2
> 
> 时间：2012-04-06T02:04:34.993
> 
> 标签：php, javascript, caching

我正在尝试在服务器端缓存 js 文件并遇到此[链接](http://www.cforcoding.com/2009/05/supercharging-javascript-part-4-caching.html)。

整个想法是获取所有要缓存的 js 文件的内容并写入一个单独的文件，该文件也具有 .js 扩展名。

我无法得到的是，创建的缓存文件只是另一个 js 文件。它与普通的 js 文件有什么不同。对我来说，这就像将所有 js 文件组合成一个大 js 文件并作为缓冲区输出。也不是因为这个而增加了代码/文本的比率。请帮助我理解并避免代码/文本比率的增加。

我在谷歌和这个网站上搜索了很多答案，但无法得到任何接近的答案。所以请投反对票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:08:17.810

这样做的目的是减少与服务器的连接数。在这种方法中，下载一个大的 .js 文件，而不是一堆较小的文件。大概您将调整您的 php 以仅包含您实际需要的 js 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:22:59.937

您链接到的文章是系列文章的一部分，该[系列](http://www.cforcoding.com/2009/05/supercharging-javascript.html)文章提出了以下步骤以更高效地 JavaScript 服务器到客户端交付：

1.  从 HTML 链接单个 js 文件，并设置服务器以让 PHP（或其他服务器端技术处理它。服务器会将您的多个文件合并为一个，以避免额外的、耗时的 HTTP 调用。

2.  使用 gzip 压缩输出

3.  缩小代码。这可能意味着几件事，但至少要删除换行符、制表符和空格以减小文件大小。

4.  **在服务器上缓存：**不是在每次请求时处理您的 js 文件以组合它们，并且每次都缩小结果，而是将处理后的 js 文件保存在磁盘上，并直接将其提供给客户端。您可以编写一个脚本，在需要时更新该文件（当您的任何源文件被修改时）。

5.  在客户端缓存：设置正确的响应头，让浏览器在本地缓存你的 js 文件，并且只有在缓存过期时才从服务器请求一个新的。

我认为您是在断章取义地阅读 #4，它仅在 #1 和 #3 之后才有意义。

# video-processing - 对于只有一个静态图像和声音的视频，我应该使用哪种视频编码算法？

> ID：10038340
> 
> 赞同：3
> 
> 时间：2012-04-06T02:04:49.247
> 
> 标签：video-processing, video-encoding

我正在做视频处理任务，我需要解决的问题之一是为整个视频中只有一个静态图像的视频选择合适的编码算法。

目前我尝试了几种算法，例如 DivX 和 XviD，但它们为 1 分钟长的视频生成 3MB 视频。音频是 64kbit/s mp3，所以音频只需要 480KB。所以视频是2.5MB！

由于视频中的图像没有变化，因此可以非常有效地压缩它，因为它没有运动。图像大小本身（它是 jpg）只有 50KB。

所以理想情况下，我希望这个视频大约是 550KB - 600KB 而不是 3MB。

关于如何优化视频以使其不是那么大的任何想法？

我希望这是提出这个问题的正确 stackexchange 论坛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:33:58.970

将每秒帧数设置为非常低。如果可以的话，低于1fps。您的目标是尽可能接近两个关键帧（一个在开头，一个在结尾）。

您是否可以这样做取决于您使用的方案/编解码器以及编码器。

许多编解码器将具有与关键帧相关的选项。例如，这里有一些开源编码器：

lavc (libavcodec):

> keyint=<0-300> - 以帧为单位的关键帧之间的最大间隔（默认值：250 或在 25fps 电影中每十秒一个关键帧。
> 
> 这是 MPEG-4 的推荐默认值）。大多数编解码器需要常规关键帧以限制不匹配错误的累积。搜索也需要关键帧，因为只能对关键帧进行搜索 - 但关键帧比其他帧需要更多空间，因此这里的数字越大意味着文件略小但搜索精度较低。0 等价于 1，这使得每一帧都是关键帧。不建议使用 >300 的值，因为质量可能很差，具体取决于解码器、编码器和运气。MPEG-1/2 通常使用 <=30 的值。

xvidenc：

> max_key_interval= - 关键帧之间的最大间隔（默认值：10*fps）

有趣的是，此解决方案可能会降低在文件中查找的能力，因此您需要对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T02:20:53.887

我认为这个问题与视频编码器的实现有关，而不是视频编码标准本身。

实际上，大多数视频编码器的实现并不是针对静态图像的视频而设计的，因此当输入静态图像的视频时，它不会像我们想象的那样产生完美的比特流。大多数视频编码器实现都是为处理“自然”视频而设计的。

如果您真的需要更好的静态图像视频编码结果，您可以对开源视频编码器进行破解，从第 2 帧开始，将所有 MB 标记为“跳过”...

# css - 当我更改为横向时，移动页面会自动缩放所有内容

> ID：10038341
> 
> 赞同：1
> 
> 时间：2012-04-06T02:05:04.377
> 
> 标签：css, responsive-design

我正在使用 jquerymobile 的框架将我的大脑包裹在移动网站上。到目前为止，我有一个基本的小页面，它在纵向模式下看起来正确 - 然后我翻转到横向，*所有内容都*按比例缩放。

我正在尝试使用 css 的 @media 实现在头部设置这个元标记来控制它的外观：

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0"> 
```

例如，将以下 img 包裹在 div 中：

```
<div id="main-banner"><img src="mybanner.png" /></div> 
```

而且我有以下CSS，以便图像应调整为父DIV宽度是：

```
img {
max-width: 100%;
height: auto;
} 
```

声明取决于旧 iphone 的屏幕尺寸：

```
<!-- iPhone 2G, 3G, 3GS Portrait -->
@media only screen and (device-width: 320px) 
and (orientation: portrait) and not (-webkit-min-device-pixel-ratio: 2) {
    #main-banner {
        width: 300px;
    }
}

<!-- iPhone 2G, 3G, 3GS Landscape -->
@media only screen and (device-width: 480px) 
and (orientation: landscape) and not (-webkit-min-device-pixel-ratio: 2) {
     #main-banner {
        width: 460px;
    }
} 
```

**注意：**将宽度从 460 更改为更小的宽度绝对没有任何效果 - 可以肯定地说，景观 CSS 根本没有被启动。

我已经从一个站点复制了这段代码作为可以使用的东西，它似乎对其他人有用——但是就像我在我的文章中所说的那样，一切都按比例放大了——甚至图像......（我知道有一些缩放发生在文本，这应该是正常的，但我猜图像在横向模式下的宽度最终比 460px 大 20%。

我在这里想念/不明白什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:58:47.753

更新了头文件以包含最大比例！

# java - 使用 SharedPreferences 保存字符串

> ID：10038348
> 
> 赞同：0
> 
> 时间：2012-04-06T02:06:42.737
> 
> 标签：java, android, string, sharedpreferences

我有一些收集数字的代码，我能够证明我正在生成一个数字，但当我使用此代码保存数字时

```
public void SaveScore()
    {
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString("Score", (StringScore));
    } 
```

然后我稍后用这个代码在另一个页面中调用它

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
ScoreString = (settings.getString("Score", "0"));
Score.setText(ScoreString + "%"); 
```

它显示为 0 我知道这是默认号码，那为什么我不保存号码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T02:09:05.533

您忘记了`editor.commit()`提交更改。

# ruby-on-rails - 我什么时候应该使用 before_filter 和 helper_method？

> ID：10038350
> 
> 赞同：3
> 
> 时间：2012-04-06T02:06:43.867
> 
> 标签：ruby-on-rails, before-filter

我有以下 application_controller 方法：

```
 def current_account
    @current_account ||= Account.find_by_subdomain(request.subdomain)
  end 
```

我应该使用 before_filter 还是 helper_method 来调用它？两者之间有什么区别，在这种情况下我应该考虑什么权衡？

谢谢。

**更新以获得更好的清晰度**

我发现我可以使用 the`before_filter`而不是`helper_method`我可以从我的视图中调用控制器定义的方法。也许这是我安排代码的方式，所以这就是我所拥有的：

**控制器/application_controller.rb**

```
class ApplicationController < ActionController::Base

  protect_from_forgery

  include SessionsHelper

  before_filter :current_account
  helper_method :current_user

end 
```

**助手/sessions_helper.rb**

```
module SessionsHelper

  private

  def current_account
    @current_account ||= Account.find_by_subdomain(request.subdomain)
  end

  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end

  def logged_in?
    if current_user
      return true
    else
      return false
    end
  end
end 
```

**控制器/spaces_controller.rb**

```
class SpacesController < ApplicationController

  def home
    unless logged_in?
      redirect_to login_path
    end
  end
end 
```

**意见/空间/home.html.erb**

```
<%= current_account.inspect %> 
```

理论上，这应该行不通，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T02:13:41.213

使用 before_filter 或 helper_method 之间没有关系。当你的控制器中有一个方法想要在视图中重用时，你应该使用辅助方法，如果你需要在视图中使用它，这个 current_account 可能是 helper_method 的一个很好的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T02:14:09.130

它们是两个非常不同的东西。A`before_filter`是您希望在操作开始之前调用*一次的东西。*另一方面，辅助方法经常重复，通常在视图中。

您拥有的那种方法可以留在原地。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T03:10:58.300

我解决了我的问题。我是 Rails 新手，不知道 helpers 目录中定义的方法自动是 helper_methods。现在我想知道这如何影响内存/性能。但至少我解开了这个谜。感谢大家的帮助！

# c - C 程序：如何根据程序中稍后发生的事情改变第一几行代码的结果？

> ID：10038355
> 
> 赞同：1
> 
> 时间：2012-04-06T02:07:28.487
> 
> 标签：c, oracle-call-interface

我正在使用 Linux 机器上的 gcc -std=C89 开关编写一些 C 代码。[此 C 代码使用OCILIB](http://iweb.dl.sourceforge.net/project/orclib/OCILIB%20Guides/ocilib-3.5.0-user-guide.pdf)库调用的 OCI 驱动程序与 Oracle 数据库通信。从数据库下载必要的数据后，C 程序调用一个 C 函数 (my_function)，该函数执行大量复杂的数学运算。程序流程如下：

```
int main (void) {
    OCI_Connection *cn; 
    OCI_Statement  *st;
    OCI_Resultset  *rs; 
    ...
    /* FIRST CALL TO DB */
    OCI_Initialize(NULL, NULL, OCI_ENV_DEFAULT);
    cn = OCI_ConnectionCreate(...);
    st = OCI_StatementCreate(cn);
    OCI_Prepare(st, ...);
    OCI_Bindxxx(st, ...);
    OCI_Execute(st);

    printf(...); /* verify data retrieved from database is correct */

    /* SECOND CALL TO DB */
    OCI_Prepare(st, ...); /* different prepare stmt than above */
    OCI_Bindxxx(st, ...);
    OCI_Execute(st, ...);

    printf(...); /* verify data retrieved from database is correct */

    /* THIRD CALL TO DB */
    OCI_SetFetchSize(st, 200);
    OCI_Prepare(st, ...);
    OCI_Bindxxx(st, ...);
    OCI_Execute(st);
    rs = OCI_GetResultset(st);
    ...
    printf(...); /* verify data retrieved from database is correct */

    OCI_Cleanup();
    return EXIT_SUCCESS;

    my_function(...);
} 
```

如果我运行程序如图所示，`printf`所有语句都显示正确的数据已从数据库下载到 C 程序中。但是，`my_function`并没有执行。

如果我然后将`return EXIT_SUCCESS`代码行从 before移动`my_function()`到 AFTER `my_function()`，重新编译代码并运行它，`printf`语句显示第一次调用数据库的数据正确保存在 C 程序中，但第二次调用的数据不正确，并且`printf`第三次通话中的声明似乎没有做任何事情。

在编译和运行时没有报告错误或警告。

我在 C（或 OCILIB）方面没有那么丰富的经验，但对于那些有经验的人来说，是否有一个合乎逻辑的解释，代码中的位置如何`return EXIT_SUCCESS`与位于它之前的代码交互，从而导致这种情况？

在我的简单头脑中，我认为代码一次执行一行，所以如果代码工作到第 123 行（例如），对第 456 行代码的更改不应该影响到第 123 行的结果（例如，当比较更改前后到第 456 行时）。也许我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:33:48.003

另一种可能性是您的代码依赖于未初始化变量的值，并且通过`return`在调用之前添加`myfunction()`您正在更改编译器在内存中布置变量的方式。

例如，优化编译器可能会注意到对 的调用`myfunction()`由于 而无法访问`return`，因此它可能能够避免为`myfunction()`调用可能需要的临时变量留出空间。

确保您的编译器设置为警告使用未初始化的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:10:47.033

改写答案：

如果您的代码的行为与您描述的不同，则表明`return`调用之前的版本未在其可执行映像中包含您的函数（未使用的代码已被优化），这会改变内存布局。如果您有严重的内存管理问题，这可能会影响您的代码。

您是否尝试在第二批数据库活动之后重新打印第一批数据，以确保您仍然拥有您认为已成功读取的信息？您对检索到的信息的打印是否彻底和完整？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T02:22:09.867

我猜您的`printf`陈述不会以换行符结尾；在这种情况下，输出直到`main`结束才会刷新。这允许同时`my_function`腐败`stdout`。使用换行符或者`fflush`我敢打赌这种明显的异常行为将会停止。

# php - CouchDB 视图可访问，但不会运行查询

> ID：10038361
> 
> 赞同：1
> 
> 时间：2012-04-06T02:09:02.037
> 
> 标签：php, database, views, couchdb

我使用了 couchdb 的 PHP 库来添加一个视图：

```
public function addView() {
    $design_doc = new stdClass();
    $design_doc->_id = '_design/need';
    $design_doc->language = 'javascript';
    $design_doc->views = array( 'all' => array('map' => "function(doc) { if (doc.type == 'need')  emit(doc.type, doc) }" ) );
    $result = $this->client->storeDoc($design_doc);
    return $result;
} 
```

在我的 shell 中，我查看了它的文档以确认它已创建：

```
curl -X GET mysite.com/bids/_design/need
{
  "_id":"_design/need",
  "_rev":"1-0ed4b41b839ade9ca36fb950cac1c39b",
  "language":"javascript",
  "views":
    {
      "all":
        {
          "map":"function(doc) { if (doc.type == 'need')  emit(doc.type, doc) }"
        }
    }
} 
```

然后当试图实际执行视图时，它会抛出 eacces 错误：

```
curl -X GET mysite.com/bids/_design/need/_view/all
{
  "error":"error","reason":"eacces"
} 
```

**权限**：实例以 root 身份运行。

我是否使用错误的语法来执行视图查询？

会不会是通过 PHP 传递的字符串的编码存在问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:32:07.703

“eacces”表明这是存储数据库的目录的权限或所有权问题。

对于每个数据库，数据库服务器将创建一个名为的子目录，`.<db_name>_design`其中包含该数据库中每个设计文档的文件。您的 CouchDB 实例运行的用户可能没有创建该目录的权限，或者可能是其中的文件。

检查数据库所在的目录及其下的所有内容是否由运行 CouchDB 的用户所有，并且目录和文件是否具有合理的权限。如果您从源代码安装它是 /usr/local/var/lib/couchdb，但如果您使用包可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T21:36:33.707

php 的字符编码存在一些问题。在 curl 中运行完全相同的查询是成功的，然后视图能够正常运行

# matlab - MATLAB 中的 num2hex 与 dec2hex

> ID：10038364
> 
> 赞同：2
> 
> 时间：2012-04-06T02:09:21.633
> 
> 标签：matlab, hex

我不明白 MATLAB 中和它们的对立面之间的`hex2dec`区别`hex2num`。

假设我有一个十六进制值 3FD3B502C055FE00。当我使用`hex2dec`时，我得到 4.5992e+018 。当我使用`hex2num`时，我得到 0.3079。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T02:39:42.830

正如您所注意到的，这些函数的工作方式非常不同。`hex2dec`通过原始字节转换将十六进制字符串转换为浮点数，我认为您发现这可以按预期工作。但是，`hex2num`将十六进制字符串转换为其*IEEE 双精度*表示。

[IEEE 754 双精度标准](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)要求使用一位符号、11 位指数和 52 位小数。因此`hex2num`以这种格式解析十六进制，产生与`hex2dec`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:17:13.067

hex2dec - 将十六进制数字字符串转换为十进制数字

说明 d = hex2dec('hex_value') 将 hex_value 转换为其浮点整数表示。参数 hex_value 是存储在 MATLAB 字符串中的十六进制整数。**hex_value 的值必须小于十六进制的 10,000,000,000,000。**

如果 hex_value 是一个字符数组，则每一行都被解释为一个十六进制字符串。

hex2num - 将十六进制数字字符串转换为双精度数字

说明 n = hex2num(S)，其中 S 是一个 16 字符的字符串，表示一个十六进制数，返回它表示的 IEEE® 双精度浮点数 n。少于 16 个字符在右侧用零填充。如果 S 是字符数组，则每一行都被解释为一个双精度数。

正确处理了 NaN、无穷大和 denorms。

知道 3FD3B502C055FE00 大于 (10,000,000,000,000)16，超出范围。

# php - Symfony 1.4 中的教义查询，不确定我在这里做错了什么

> ID：10038369
> 
> 赞同：0
> 
> 时间：2012-04-06T02:10:15.407
> 
> 标签：php, symfony-1.4, doctrine-1.2

我有一个查询，内容如下：

```
$fields = Doctrine_Core::getTable('model_1')->findByColumnId($id); 
```

对字段进行了 var_dump，并按应有的方式检索数据；

接下来，我这样做

```
foreach($fields as $field)
{
 $newerFields[$field->getColumnId()] =
 Doctrine_Core::getTable('model2')->findByColumn2Id($field->getColumnId());
} 
```

我对每个 $newerFields[$field] 进行了一个 var_dump ，它确实产生了应有的结果。接下来我尝试这样做：

```
foreach($newerFields as $newerField)
{
 echo  $newerField->getColumn3();
} 
```

但这会吐出来： **Call to undefined method Doctrine_Collection::getColumn3() in actions.class.php on line 69**

我无法解决这个问题，并且对如何完成它感到心慌。谁能帮我找出麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:14:58.967

你`findByColumn2Id`返回一个 Doctrine_Collection 因为`findBy`总是返回一个集合（如果你没有在表文件中定义它），即使只有一个结果。如果要检索一个结果，请`findOneBy`改用。

否则，您将不得不循环`newerFields`子项来检索数据：

```
// array of Doctrine_Collection
foreach($newerFields as $newerFieldCollection)
{
  foreach($newerFieldCollection as $newerField)
  {
    echo $newerField->getColumn3();
  }
} 
```

# c - 如何重新分配数组的单词？

> ID：10038370
> 
> 赞同：0
> 
> 时间：2012-04-06T02:10:19.840
> 
> 标签：c

所以用户要输入未知数量的单词，我假设每个单词的最大长度为 10；我从 realloc 中得到了作为赋值 errr 的左操作数所需的左值。我是 C 新手，我尝试了 google，但找不到有用的答案。

代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    #define CAPACITY 10
    #define NUM_OF_WORDS 10
    int main(void)
    {

    char *word= malloc(10*sizeof(char));
    char *w[NUM_OF_WORDS];

    int i;
    int n;

    for(i = 0 ; scanf("%s", word)==1; ++i)
    {

    if( i == NUM_OF_WORDS-1)
    w = realloc(w, (NUM_OF_WORDS*=2) * sizeof(char));

    w[i] = malloc( strlen(word)+1 * sizeof(char));
    strcpy(w[i], word);
    }

    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:41:04.113

1.  NUM_OF_WORDS 是常数，不能赋值。

2.  w 不应该使用数组，应该使用 char **

3.  在 realloc 中，您应该使用 sizeof(char *)

修改代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define CAPACITY 10
#define NUM_OF_WORDS 10

int main(void)
{

    char word[10];
    char **w = (char **) malloc(NUM_OF_WORDS * sizeof(char *));

    int i;
    int capacity = NUM_OF_WORDS;

   for(i = 0 ; scanf("%s", word)==1; ++i)
   {

       if( i == capacity -1)
           w = (char **)realloc(w, (capacity *=2) * sizeof(char *));

       w[i] = (char *)malloc( strlen(word)+1 * sizeof(char));
       strcpy(w[i], word);
   }

   // at last, release w and w's element.
   while ( --i >= 0 )
   {
        free(w[i]);
   }

   free( w );       
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:16:28.150

如果您希望能够使用`realloc()`，则需要使用分配数组`w`而`malloc()`不是在堆栈上声明它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T02:21:16.430

```
w = realloc(w, (NUM_OF_WORDS*=2) * sizeof(char)); 
```

关于错误 -

预处理后的 (NUM_OF_WORDS*=2) 为 (10 *=2)。您不能将 10*2 的乘积分配给 10。 10 是一个右值，它不能被分配任何编译器抱怨的东西。您可能的意思是 (NUM_OF_WORDS * 2)

# c++ - 如果初始化失败，如何终止 qt 编程？

> ID：10038372
> 
> 赞同：5
> 
> 时间：2012-04-06T02:10:42.807
> 
> 标签：c++, qt

```
MainWindows::MainWindow(QWidget *parent) :
                 QMainWindow(parent) , ui(new Ui::MainWindow) {
      ui->setupUi(this);

      some initialization code here
} 
```

如果初始化失败，我想终止整个应用程序，我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-22T21:56:19.850

`qApp->exit()`在的构造函数中调用时`this->close()`两者都不起作用。`MainWindow`

正常的 Qt`int main()`函数如下所示：

```
int main(int argc, char *argv[])
{
    QApplication application(argc, argv);

    MainWindow mainWindow;
    mainWindow.show();

    return application.exec();
} 
```

...并且`qApp->exit()`只能*在*`qApp->exec()`/主循环内工作`application.exec()`，正如您在 中看到的那样`int main()`，您还没有在其中。因此它没有效果。

和`this->close()`,`MainWindow()`还没有完成创建，还没有显示，所以它没有打开 - 如果它没有打开，它就不能关闭。=)

## 使用延迟初始化

我认为解决这个问题的最简单方法是将初始化延迟到构造函数完成之后：

```
int main(int argc, char *argv[])
{
    QApplication application(argc, argv);

    MainWindow mainWindow;
    if(mainWindow.Initialize() == false)
        return 0;

    mainWindow.show();
    return application.exec();
} 
```

通常我更喜欢/建议在类的构造函数中进行初始化，但这里需要做一个例外来解决这种不寻常的情况。

## 使用“失败状态”标志

做同样事情的其他方法是继续在构造函数中初始化，但使用一个标志来标记 MainWindow 已经“初始化失败”：

```
int main(int argc, char *argv[])
{
    QApplication application(argc, argv);

    MainWindow mainWindow; //Initialize in constructor, like normal.
    if(mainWindow.Failed()) //Check results.
    {
        return 0;
    }

    mainWindow.show();
    return application.exec();
} 
```

## 使用异常

异常也是处理这种情况的另一种方法 - 但请确保您抓住它，因此操作系统不会显示错误消息（如果 Windows 检测到我忘记了）。在您的初始化中，您自己报告错误，因此您可以详细报告它。

```
int main(int argc, char *argv[])
{
    QApplication application(argc, argv);

    try
    {
        MainWindow mainWindow; //Initialize in constructor, like normal.

        mainWindow.show();
        return application.exec();
    }
    catch(...)
    {
        return 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T02:19:51.863

怎么样[`exit()`](http://www.cplusplus.com/reference/clibrary/cstdlib/exit/)？

```
MainWindows::MainWindow(QWidget *parent) :
                 QMainWindow(parent) , ui(new Ui::MainWindow) {
      ui->setupUi(this);

      //some initialization code here
      if (something_failed)
      {
          exit(1); // terminate process
      }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T16:09:25.160

这对我有用：

```
QMetaObject::invokeMethod(this, "close", Qt::QueuedConnection); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T08:10:38.360

您可以使用 assert 方法终止程序，该程序将自动检查条件，如果条件变为假，它将终止程序并给出它终止的行。语法如下：

Q_ASSERT(条件);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T06:36:58.280

> 如果初始化失败，我想终止整个应用程序，我该怎么做？

从构造函数中抛出异常。默认情况下，未处理的异常将终止整个应用程序。你也可以调用[QCoreApplication::quit](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#quit) - 但是最好还是抛出一个异常，在别处捕获它，如果事情真的出错了就使用 QCoreAPplication::quit。

如果您正在写入文件，简单地调用 exit 可能会导致数据丢失。

# php - 表单为 HMVC 小部件

> ID：10038375
> 
> 赞同：0
> 
> 时间：2012-04-06T02:11:22.423
> 
> 标签：php, forms, widget, hmvc, fuelphp

这是在 FuelPHP 中创建表单小部件的正确方法吗？

```
class Controller_Widget extends Controller
{
    public function action_show()
    {
        if (Request::is_hmvc())
        {
            // show form widget
        }
        else
        {
            // process form
        }
    }
} 
```

表单动作调用相同的函数来处理，但它会重定向到哪里呢？它将如何显示验证错误？

注意：小部件不应通过 URL 访问；如果直接通过 URL 访问，则表单不应显示自身。

[编辑：在 CodeIgniter HMVC 和动态小部件](https://stackoverflow.com/questions/1602061/hmvc-and-dynamic-widgets)中发现了类似的问题，但这是从 3 年前开始的。也许 FuelPHP 的人已经找到了更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:28:48.933

这似乎是一种奇怪的方法，一种称为 show 但同时处理显示和操作数据的方法？一个名为“show”（或 get、fetch、read 等）的方法不应该进行任何编辑，它的名称似乎明确暗示它是一个只读操作。

但它的进展方式似乎也不尽如人意。它的读取操作仅是 HMVC，但其操作操作仅是非 HMVC？这确实是一种错误的方法来确定该方法应该做什么，无论它是否是 HMVC 都不应该暴露它的作用。

在您的情况下，我将其分为两种方法：一种用于检索（`show()`），另一种用于操作（`edit()`例如）。您是否只想制作这些 HMVC 取决于您。解决这个问题的方法不止一种，我会选择：

`if ( ! Request::is_hmvc()) { throw new Exception('Only HMVC access allowed.'); }`

或者通过在您的 routes.php 配置文件中重新路由该方法，然后使用此处讨论的 HMVC 路由覆盖，使其无法路由到该方法：[https ://stackoverflow.com/a/9957367/727225](https://stackoverflow.com/a/9957367/727225)

# javascript - d3 力导向图的 JSON 中的节点、组和值是什么意思？

> ID：10038376
> 
> 赞同：6
> 
> 时间：2012-04-06T02:11:30.930
> 
> 标签：javascript, json, d3.js, visualization, force-layout

我正在尝试创建一个 d3 力导向图（[http://mbostock.github.com/d3/ex/force.html](http://mbostock.github.com/d3/ex/force.html)）。这是包含我的数据的简单 JSON 文件。

```
{"nodes":[{"name":"Node1","group":1}, {"name":"Node2","group":1}],

    "links":[{"source":1,"target":2,"value":2}]} 
```

我在同一个组中有两个节点。我也在尝试在两个节点之间创建链接。但是，我的页面仍然是空白的（我确信 JSON 以外的其他部分都是正确的）。

什么是“组”？为什么边缘既有“源”又有“目标”——这些值是什么？为什么链接有“价值”？链接不只是未加权的边缘吗？我无法理解数据存储的 JSON 结构。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T19:26:36.570

在 d3 force-directed graph [example](http://mbostock.github.com/d3/ex/force.html)中，链接的“值”映射到边缘的笔划宽度，节点的“组”映射到节点的颜色。链接中'source'和'target'的整数值是指nodes中对应节点的数组索引（[https://github.com/mbostock/d3/wiki/Force-Layout#wiki-links](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-links)）。

如果您将源链接更改为

```
 "links":[{"source":0,"target":1,"value":2}]} 
```

它，d3 应该在两个节点之间渲染一条边。

# java - For循环用空格分隔字符串（Java）

> ID：10038377
> 
> 赞同：-3
> 
> 时间：2012-04-06T02:11:58.483
> 
> 标签：java, string, spaces

有没有办法创建某种类型的 For 循环来用空格分隔字符串？到目前为止，我可以显示一个字符串并找出它有多少个字符。

```
import java.util.Scanner;
import java.lang.String;

public class Word{
  public static void main(String args[])
  {
     Scanner scan = new Scanner(System.in);

     int b;

    String word;

    System.out.println ("Enter a word: ");
    word = scan.next();

    b = word.length();

    System.out.println (word);
    System.out.println (b);
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T02:15:57.163

作为 的替代方法`Scanner`，您可以执行以下操作：

```
String[] parts = line.split(" ");
for (String part : parts) {
    //do something interesting here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T02:16:28.063

使用[`split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)String 类中的方法，如下所示：

```
String line = "a series of words";
String[] words = line.split("\\s+"); 
```

它将返回 a`String[]`中的单个单词`line`，对于上面的示例，它将产生：

```
{"a", "series", "of", "words"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T02:17:42.487

您可以使用`String.split`将句子拆分为单词数组..类似

```
string[] words = word.split(" ");
for (String s: words)
{
    System.out.println(s);
    System.out.println("\n");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T02:16:48.620

你试过看java API吗？您可以使用很多不同的功能......我的头顶分割会很好地工作，您甚至不必编写循环

[http://docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T02:18:25.713

这是未经测试的，但我觉得这是一个学习练习，所以这应该让你走上正确的道路。在 for 循环中，您将单词的每个字符作为子字符串访问，并在末尾连接一个空格（单词的结尾也是如此）。

```
string word2 ="";
for (int i = 0; i<word.length-1;i++) {
    word2 = word.substring(i, i+1)+" ";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-12T10:02:58.663

我正在使用以下代码：

```
Arrays.stream(yourString.split(" ")).forEach( element -> {
                // do something with each element
                System.out.println(element + "\n");
            }); 
```

# c# - 如何用颜色填充位图对象中的封闭区域

> ID：10038378
> 
> 赞同：2
> 
> 时间：2012-04-06T02:12:23.100
> 
> 标签：c#, graphics, bitmap, gdi

用颜色给区域内的点填充区域，类似于油漆桶功能中的“绘图”。
这。NET 框架，没有直接的等价物。
但我希望使用 C# 来做到这一点。
可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:00:42.087

这是一个非常幼稚的洪水填充算法，应该可以帮助您入门

```
void Form1_Paint(object sender, PaintEventArgs e)
{
    using (Bitmap bitmap = new Bitmap(500, 500))
    {
        using (Graphics g = Graphics.FromImage(bitmap))
        {
            g.Clear(Color.White);
            List<Point> points = new List<Point>();
            for (double i = 0; i < 10; i++)
            {
                double dist = (i % 2 == 0) ? 100 : 50;
                double x = 200 + Math.Cos(i / 10d * Math.PI * 2d) * dist;
                double y = 200 + Math.Sin(i / 10d * Math.PI * 2d) * dist;
                points.Add(new Point((int)x, (int)y));
            }
            g.DrawPolygon(Pens.Black, points.ToArray());
        }

        FloodFill(bitmap, 200, 200, Color.Red);

        e.Graphics.DrawImage(bitmap, 0, 0);
    }
}

void FloodFill(Bitmap bitmap, int x, int y, Color color)
{
    BitmapData data = bitmap.LockBits(
        new Rectangle(0, 0, bitmap.Width, bitmap.Height),
        ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);
    int[] bits = new int[data.Stride / 4 * data.Height];
    Marshal.Copy(data.Scan0, bits, 0, bits.Length);

    LinkedList<Point> check = new LinkedList<Point>();
    int floodTo = color.ToArgb();
    int floodFrom = bits[x + y * data.Stride / 4];
    bits[x + y * data.Stride / 4] = floodTo;

    if (floodFrom != floodTo)
    {
        check.AddLast(new Point(x, y));
        while (check.Count > 0)
        {
            Point cur = check.First.Value;
            check.RemoveFirst();

            foreach (Point off in new Point[] {
                new Point(0, -1), new Point(0, 1), 
                new Point(-1, 0), new Point(1, 0)})
            {
                Point next = new Point(cur.X + off.X, cur.Y + off.Y);
                if (next.X >= 0 && next.Y >= 0 &&
                    next.X < data.Width &&
                    next.Y < data.Height)
                {
                    if (bits[next.X + next.Y * data.Stride / 4] == floodFrom)
                    {
                        check.AddLast(next);
                        bits[next.X + next.Y * data.Stride / 4] = floodTo;
                    }
                }
            }
        }
    }

    Marshal.Copy(bits, 0, data.Scan0, bits.Length);
    bitmap.UnlockBits(data);
} 
```

# iphone - 什么类型的 CFBundleIconFiles 数组

> ID：10038379
> 
> 赞同：0
> 
> 时间：2012-04-06T02:12:49.810
> 
> 标签：iphone, ios

CFBundleIconFiles 是数组的类型。我的问题是什么类型的数组。它应该是 NSArray 还是 NSMutableArray。假设我们已经有了

```
NSDictionary    *plistDictionary = [[NSBundle mainBundle] infoDictionary]; 
```

我的问题是下面哪个声明是正确的

```
NSMutableArray  *array           =  [plistDictionary objectForKey:@"CFBundleIconFiles"];
NSArray         *array           =  [plistDictionary objectForKey:@"CFBundleIconFiles"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:10:30.060

它应该是 NSArray。有一些例外，但标准是当您从文件中读取集合时，默认情况下它们是不可变的。因为 objectForKey 返回`id`，所以这两个都可以编译和工作，但是如果你尝试修改它，你会得到一个运行时错误。

# javascript - IE 9 Like 按钮错误

> ID：10038387
> 
> 赞同：0
> 
> 时间：2012-04-06T02:13:54.497
> 
> 标签：javascript, facebook, facebook-like

我不确定这是什么时候开始的，但我最近在 IE 9 中收到以下错误：

SCRIPT438：对象不支持属性或方法“某些”DIcn3oT9qlo.js，第 41 行字符 1923

这是一些可以重现错误的示例代码（更改为使用有效的APP ID后）

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8" />
</head>
<body>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=" + "YOUR APP ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<script language="javascript">
        document.write('  <div id="like"><fb:like href="http://www.facebook.com" send="false" layout="button_count" width="53" show_faces="false"></fb:like></div>');
</script>

</body>
</html> 
```

它也不适用于 IE=EmulateIE7。如果我将 X-UA-Compatible 更改为 IE=9，它确实有效。

有没有人知道为什么这被打破了？

非常感谢您提供的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:13:14.547

消除

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

我做到了，而且我已经修复了它，显然这是最近发生的事情......不知道为什么会这样，它以前对我有用。

# c# - 将元素添加到预定义的 xml 文档

> ID：10038391
> 
> 赞同：0
> 
> 时间：2012-04-06T02:14:52.143
> 
> 标签：c#, xml

我正在寻找一种将元素添加到我通过序列化 List of Customers 构建的 xml 文档的方法。

**顾客 ：**

```
public class Customer
{
    [XmlElement("CustomerId")]
    public Guid CustomerId { get; set; }

    [XmlElement("FirstName")]
    public string FirstName { get; set; }

    [XmlElement("LastName")]
    public string LastName { get; set; }

    [XmlElement("DOB")]
    public DateTime DOB { get; set; }
} 
```

**客户列表（创建 xml 时为空）**

```
private void CreateXml(string path)
{
        File.Create(path).Close();
        List<Customer> customers = new List<Customer>();
        XmlSerializer serializer = new XmlSerializer(typeof(List<Customer>));
        TextWriter textWriter = new StreamWriter(path);
        serializer.Serialize(textWriter, customers);
        textWriter.Close();
} 
```

我现在如何在 xml 文件中添加一个新的 Customer 元素而不必编写分配的 DOM 样式代码？

**编辑 ：**

我找到了解决方法：

我让客户加入客户列表并将整个列表重新序列化为 xml 文档

```
public void AddCustomer(Customer customer)
{
    TextWriter textWriter = new StreamWriter(XMLRepository.CustomersPath);
    customers.Add(customer);
    serializer.Serialize(textWriter, customers);
    textWriter.Close();
} 
```

这是一个好方法，有人能想到更好的方法吗？（我猜是的）..

# sql-server - 用于跟踪随时间推移的进度的数据库设计

> ID：10038393
> 
> 赞同：5
> 
> 时间：2012-04-06T02:15:18.233
> 
> 标签：sql-server, database

我有一个看似简单的问题，但我无法找到解决方案。我正在创建一个数据库设计来存储目标。目标是手动更新的，每次更新目标时我都需要一个条目。例如：

减掉 10 磅：

第 1 天：减掉 1 磅。第 3 天：减掉 2 磅。第 7 天：减了 7 磅。

然后，一旦总磅数达到目标数量，该目标就完成了。到目前为止，这是我的设计，但我发现它存在一些问题：

**目标表：**

GoalId - int - PK

UserId = int - FK

GoalTypeId = int - FK

标题 - 字符串

**进度表：**

ProgressId - int - PK

GoalId - int - FK

IntervalX - 字符串？

间隔 - 字符串？

目标金额 - 字符串？

这是跟踪此问题的最佳方法吗？有没有人看到我可以建立的基本模式来完成这个？

我的另一个想法是可能对我所有的原始数据使用这种设计，并依靠存储过程和视图以我想要的方式呈现数据？

编辑：

对不起，我会详细说明一下。区间 X 和 Y 将是图表上的区间值。因此，如果 X = 1 且 Y = 10，则 x 轴将变为 1,2,3,... 而 Y 将变为 10,20,30,...（这完全是另外一回事，我需要找出最好的方式来实现，但现在是次要的）

目标的类型很棘手，因为我想做很多事情。它们需要是一堆不同的数据类型：

目标示例：

每日阅读 - 布尔值

减 10 磅 - int 或 float

节省 5000 美元 - 钱或浮动

达到销售配额 - 浮动

学习一门新语言——字符串？（不确定跟踪这个的最佳方法）

等等..希望这有助于澄清一点

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T07:29:07.023

You're certianly on the right track. The only other thing I can recommend is looking into key value indicators, and using this principle in your design. KVIs (or KPIs, as they're referred to in management) are values of disparate sources, which are converted into a common set of values that can be processed using common logic. This will help with evaulating progress on goals that have milestones of different types, and for compound goals, this is a crucial step. I'll elaborate a bit on this:

A goal is defined as reaching a certain milestone or combination of milestones within a certain period. The milestone is the value the needs to have a common processing value, or key value indiator. For example, losing 10 pounds, you could have a key value type of "Weight Loss", converting 1 pound to 1 KVI. Where you wish to compare milestones with one another, you may wish to adjust the weights. For example, I wish to become fitter and feel more energetic (goal). In order to do this, I must lose 10 pounds, cut sugar from my diet and cycle at least 15 miles per day (milestones). When comparing these values, 1 mile does not equate to 1 pound. More like 30 miles. Cutting sugar from my diet is not easy, but let's call the KVI "Days without sugar", and give each day without sugar a value equivalent to half a pound. The KVIs are then:

```
1 pound = 2 KVI
1 day without sugar = 1 KVI
1 mile = 1/30 KVI 
```

If I ride an extra 15 miles per day, I can probably forgive myself a little bit of sugar, so this should be built into the milestones. In other words, I can achieve 200% of my cycling milestone and only 75% of my sugar milestone, and still achieve my overall goal. However, I can't go over that and still expect to feel healthy. My milestone for this goal would therefore look something like:

```
Lose 10 pounds: KVIType="Weight Loss", Target=20KVI, cap=100%
No sugar for period (let's say 2 weeks):KVIType="Days without sugar", target=14KVI, cap=100%
Cycle 15 miles per day: KVIType="Cycling", target=7KVI, cap=200% 
```

Learning a new language is a good example. This requires learning the grammatical nuances of the language, sometimes a different alphabet, a whole new vocabulary and then tying these all together into daily use. So here's an example:

```
Learn language grammar = 100 KVI, which you can work as a percentage of a grammar course completed, for example
1000 words vocabulary = 100 KVI
Conversation = 20 KVI 
```

In this example, you would cap each milestone at 100%. You may know the grammar off by heart and have 10,000 words under your belt, but until you've spent some time speaking the language, you haven't learned it.

By adjusting the weights in your conversion table, you can start comparing goals with one another in a way that makes sense to you. I can afford to lose 10 pounds but don't need to, so I wouldn't put too high a price tag on that one. My friend Luka, however, is 100 pounds overweight and has to for health reasons, so he'd have a higher KVI value for that one. You can also expand on how the milestones are combined to provide a progress indication of the goal (i.e. using the sum of all KVIs, average or minimum percentage completed for any component milestone).

This is sort of what I had in mind:

```
CREATE TABLE KVIType (
    KVITypeId INT IDENTITY(1, 1) PRIMARY KEY CLUSTERED,
    KVIName VARCHAR(50),
    Description VARCHAR(200),
    Multiplier DOUBLE PRECISION
)

CREATE TABLE Goal (
    GoalId INT IDENTITY(1, 1) PRIMARY KEY CLUSTERED,
    UserId INT FOREIGN KEY REFERENCES User(UserId),
    GoalName VARCHAR(50),
    GoalStart DATETIME,
    GoalComplete DATETIME,
    TargetKVI DOUBLE PRECISION,
    CurrentKVI DOUBLE PRECISION
)

CREATE TABLE Milestone (
    MilestoneId INT IDENTITY(1,1) PRIMARY KEY CLUSTERED,
    GoalId INT FOREIGN KEY REFERENCES Goal(GoalId),
    KVITypeId INT FOREIGN KEY REFERENCES KVIType(KVITypeId),
    MilestoneName VARCHAR(50),
    Description VARCHAR(200),
    TargetKVI DOUBLE PRECISION,
    CurrentKVI DOUBLE PRECISION,
    TargetDate DATETIME,
    CompletedDate DATETIME,
    Cap INT)

CREATE TABLE Progress (
    ProgressId INT IDENTITY(1, 1) PRIMARY KEY CLUSTERED,
    MilestoneID INT FOREIGN KEY REFERENCES Milestone(MilestoneId),
    InputValue DOUBLE PRECISIoN,
    KVIValue DOUBLE PRECISION,
    OccuranceDate DATETIME
)

CREATE TABLE User (
    UserId INT IDENTITY(1, 1) PRIMARY KEY CLUSTERED,
    UserName VARCHAR(100)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:25:35.277

有这样的东西是不是不行：

```
Goals(Goal_ID, User_ID, Goal_Type_ID, Title, Goal_Amount)
Progress(Goal_ID, Date_Time, Progress)

PK_Goals(Goal_ID)
PK_Progress(Goal_ID, Date_Time)

FK_Progress_Goals(Goal_ID) 
```

进度可以是“自上次以来”或总金额 - 没关系。我不太确定区间 X 和区间 Y 在您的设计中提供哪些功能 - 您能否进一步详细说明？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T02:29:38.720

如果所有目标都与数字有关..即减少体重，跑步里程等..那么当然，你可以做到..

就像是

**UserTable** Userid(PK) 用户名

**GoalTable** GoalId(PK) GoalExpectedProgress(Int) UserId(FK)

**ProgressTable** GoadId(FK) Progress_Int

可以为相同的 GoalId 添加此 Progress_Int，然后确保它符合 GoalExpectedProgress..

但是对于完成一本书、购买杂货等目标，你必须想出一个更好的计划。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T18:54:00.570

感谢您的回答！我接受了你所说的一些内容，然后重新设计了我想要做的事情。这是我想出的解决方案：

**目标表**

目标 ID - PK

目标类型 ID - FK

用户 ID - FK

目标名称

目标开始

目标完成

完成目标

**目标类型表**

目标类型 ID - PK

类型名称

类型描述

进度数据类型

增量数据类型

**进度表**

ProgressId - PK

进度增量

时间增量

发生日期

**用户表**

用户 ID - PK

用户名

**我如何实现逻辑**

我试图完成的大部分工作是我离实现目标的距离，或完成的百分比。通过此设置，我在存储过程中使用了 If ElseIf 语句，该语句将操纵 Progress 表中的原始数据以提供所需的结果。If 语句将基于 GoalType 表来确定需要执行哪种逻辑。

感谢大家的投入！

# bash - 如何防止连续循环结束

> ID：10038408
> 
> 赞同：-1
> 
> 时间：2012-04-06T02:19:13.597
> 
> 标签：bash

我有一个简单的 bash 脚本，它每 10 分钟调用一个 php 脚本，执行一些维护。每隔一段时间，这个 php 脚本就会在它运行时终止，当这种情况发生时，bash 脚本就会退出。

我想这样做，即使 php 脚本失败，bash 脚本也会继续循环。谁能指出我正确的方向？我已经搜索了一段时间，但似乎找不到答案，也许我没有使用正确的搜索词。

```
#!/bin/sh
set -e    
while :    
do    
    /usr/bin/php /path/to/maintenance/script.php
    sleep 600    
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:39:47.797

Rjz 的评论是正确的，你应该使用`cron`. 为此，运行`crontab -e`并添加这一行：

```
*/10 * * * * /usr/bin/php /path/to/maintenance/script.php 
```

如果设置正确，`cron`将通过电子邮件向您发送任何输出（包括错误消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:05:10.857

这：

```
set -e 
```

行设置 shell 的“出错时退出”标志，它告诉它如果它运行的程序以非零状态退出，shell 也应该退出：

```
set -e
false
echo if this prints, your shell is not honoring "set -e" 
```

当然，状态正在测试的程序也有例外，因此：

```
set -e
if prog; then
    echo program succeeded
else
    echo program failed
fi
echo this will still print 
```

将正常工作（一个或另一个回声会发生，然后最后一个也会发生）。

回到昏暗的时代，当时`/bin/sh`是非 POSIX 并且是用 Bournegol 编写的，在某些版本的表达式中存在一个`sh`错误`||`：

```
set -e
false || true
echo if this prints, your shell is OK 
```

（逻辑错误也适用于`&&`内部的表达式，但在那里是无害的，因为`false && anything`它本身是错误的，这意味着整个表达式无论如何都会失败！）从那时起，我一直对“-e”保持警惕。

# object - 选择 TableView 单元格返回不正确的对象

> ID：10038410
> 
> 赞同：0
> 
> 时间：2012-04-06T02:19:33.527
> 
> 标签：object, uitableview, indexing

我按照我在网上找到的教程创建了一个表格视图，其中包含自定义对象数组中的部分和索引。此代码的工作原理是，当我在表中选择一行时，我是该部分的索引路径，而不是整个数组的索引路径。我知道为什么它不起作用，但我不知道如何解决这个问题，这是我的表格视图代码单元格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"NameCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

// Configure the cell...

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    int displayOrder = [defaults integerForKey:@"displayOrder"];
    int sortOrder = [defaults integerForKey:@"sortOrder"];

    NSString *alphabet = [listIndex objectAtIndex:[indexPath section]];

    NSPredicate *sectionPredicate = [[NSPredicate alloc] init];

    if (sortOrder == 1) {  
        //NSLog(@"fName is predicate at cell level");
        sectionPredicate = [NSPredicate predicateWithFormat:@"fName beginswith[c] %@", alphabet];
    } else {
        //NSLog(@"lName is predicate at cell level");
        sectionPredicate = [NSPredicate predicateWithFormat:@"lName beginswith[c] %@", alphabet];
    }
    NSArray *sectionContacts = [filteredList filteredArrayUsingPredicate:sectionPredicate];

if (isSearching) {
    current = [filteredList objectAtIndex:indexPath.row];
} else{
    current = [sectionContacts objectAtIndex:indexPath.row];        
}

if (displayOrder == 1) {
    NSString *fullName = [NSString stringWithFormat:@"%@ %@",[current valueForKey:@"fName"],[current valueForKey:@"lName"]];
    [cell.textLabel setText:fullName];  
    //NSLog(@"FirstNameFirst");

} else {
    NSString *fullName = [NSString stringWithFormat:@"%@ %@",[current valueForKey:@"lName"],[current valueForKey:@"fName"]];
    [cell.textLabel setText:fullName];
    //NSLog(@"LastNameFirst");

}

    [cell.detailTextLabel setText:[current valueForKey:@"extension"]];

return cell;  } 
```

然后我用这段代码调用 segue。

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

if ([segue.identifier isEqualToString:@"showContact"]) {

    DetailViewController *dvc = [segue destinationViewController];
    NSIndexPath *path = [self.tableView indexPathForSelectedRow];
    NSDictionary *c = [filteredList objectAtIndex:path.row];
    [dvc setCurrentContact:c];   
    [searchBar resignFirstResponder];
} } 
```

问题是 objectAtIndex:path.row 返回该部分的索引，但并未针对整个数组进行修改，因此如果点击该部分索引 4 处的“B”部分中的名称，它会返回主数组索引 4 处的对象。我一直在摸索如何获取完整数组的索引，而不是仅在该部分本地的索引。

如果你能帮忙，我会给你买 6 包你最喜欢的饮料！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:38:06.417

您的操作方式与他们在第一个函数中的操作方式相同，因此将您的 prepareForSegue 更改为：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showContact"]) {
        DetailViewController *dvc = [segue destinationViewController];
        NSIndexPath *path = [self.tableView indexPathForSelectedRow];

        NSDictionary *c;
        NSString *alphabet = [listIndex objectAtIndex:[path section]];
        NSPredicate *sectionPredicate = [[NSPredicate alloc] init];
        if (sortOrder == 1) {  
            sectionPredicate = [NSPredicate predicateWithFormat:@"fName beginswith[c] %@", alphabet];
        } else {
            sectionPredicate = [NSPredicate predicateWithFormat:@"lName beginswith[c] %@", alphabet];
        }
        NSArray *sectionContacts = [filteredList filteredArrayUsingPredicate:sectionPredicate];

        if (isSearching) {
            c = [filteredList objectAtIndex:path.row];
        } else{
            c = [sectionContacts objectAtIndex:path.row];        
        }

        [dvc setCurrentContact:c];   
        [searchBar resignFirstResponder];
    } 
} 
```

请注意，最好将通用代码提取出来并创建一个单独的函数，而不是像这样使用它两次。

# jsf - 将参数传递给实现 LazyDataModel 的类

> ID：10038413
> 
> 赞同：0
> 
> 时间：2012-04-06T02:19:59.270
> 
> 标签：jsf, primefaces

我的 JSF 之一通过元数据和 f:ViewParm 标记接收参数。我在预渲染视图的支持 bean 中使用这些参数来查询数据库并为数据表视图构建我的列表。它工作正常，但现在我需要切换到lazyDataModel（我使用的是 Primefaces 3.2）。如果我按照示例进行操作，那么我需要实现在支持 bean 的构造函数中完成的 LazyDataModel。我可以这样做，但是我无法访问参数。我的问题是如何获取参数并传递给实现 LazyDataModel 的类（比如 LazyCarDataModel）。我想在 LazyCarDataModel 的重写加载方法中使用这些参数。我无法访问构造函数中的传入参数。任何处理这种情况的建议/技巧将不胜感激。

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:02:30.237

`<f:event type="preRenderView">`在设置视图参数后，您可以使用它来调用支持 bean 方法。

例如

```
<f:metadata>
    <f:viewParam name="carId" value="#{bean.car}" converter="#{carConverter}" />
    <f:event type="preRenderView" listener="#{bean.init}" />
</f:metadata> 
```

和

```
private Car car;
private transient DataModel<Something> model;

public void init() {
    model = buildSomehowBasedOn(car);
} 
```

您也可以在数据表的 getter 中引入延迟加载。

```
public DataModel<Something> getModel() {
    if (model == null) {
        model = buildSomehowBasedOn(car);
    }

    return model;
} 
```

# javascript - jqueryui 对话框无法在 Firefox 11 中“选择（）”输入

> ID：10038414
> 
> 赞同：6
> 
> 时间：2012-04-06T02:20:03.967
> 
> 标签：javascript, jquery, jquery-ui, firefox

我在 Windows 7 上的 Firefox 11 中运行此代码。（请参阅[http://jsfiddle.net/QStkd/](http://jsfiddle.net/QStkd/)）。

```
$('<div><input type="text" value="val" /></div>').dialog(); 
```

`select()`​ 输入中的值没有被选中，这在 Chrome 和 IE 中是这样做的，如果我手动调用该方法也不起作用。

这是一个已知问题吗？有什么方法可以选择吗？[计时器可以工作](http://jsfiddle.net/yESV7/)，但是如果我`run`在加载后单击 jsfiddle，它就不再起作用了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T05:07:27.170

看起来像`focus()`在 Chrome 上调用（默认情况下 jquery-ui 对第一个可选项元素执行的操作）（无法测试 IE - 在 OS X 上）聚焦框并选择框中的文本。

取自[jquery.dialog.ui.js](https://github.com/jquery/jquery-ui/blob/1.8.16/ui/jquery.ui.dialog.js#L352)：

```
// set focus to the first tabbable element in the content area or the first button
// if there are no tabbable elements, set focus on the dialog itself
$(self.element.find(':tabbable').get().concat(
    uiDialog.find('.ui-dialog-buttonpane :tabbable').get().concat(
        uiDialog.get()))).eq(0).focus(); 
```

另一方面，Firefox 似乎只在调用焦点时将光标放在框内。因此，您必须在创建对话框后隐式调用 select 以实现您要执行的操作。

如果您重新加载计时器小提琴（而不是单击运行），您会注意到该示例每次都有效。我认为 jsFiddle 实际上是这里的罪魁祸首（可能是 hashchange 事件，或者在您按下“运行”后某个窗格上的一些焦点事件——我没有深入挖掘）。

**编辑**：（对不起，已经晚了）看起来“问题”的根本原因是Firefox。不确定这是否是设计行为，但据我所知，Firefox 似乎*不允许*在同一页面上同时在不同内容窗格中的两个不同输入元素中选择文本。这似乎不会影响 Chrome（假设是 IE9）。

我在本地做了一个简单的例子，它有两个并排的 iframe（我们称它们为左右）。左边包含一个文本区域，右边包含您的 jquery-ui 对话框——类似于您发布的小提琴。右边有以下代码：

```
<script type="text/javascript">
$('<div><input type="text" value="val" /></div>').dialog();
$('input').select();
</script> 
```

左边有以下代码：

```
<script type="text/javascript">
setTimeout( function() {
    $('textarea').focus();
}, 1000);
</script> 
```

如果您将它们拼凑在一起并在 Firefox 中查看结果，您会注意到输入已聚焦并被选中，直到左侧的文本区域聚焦。我怀疑 jsFiddle 中正在发生类似的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:54:22.403

尝试使用`open`ui 对话框的事件。打开对话框时触发此事件。

```
$('<div><input id="yourInput" type="text" value="val" /></div>').dialog({
    open:function(){
     $("#yourInput").focus().select();
    }
        }
) 
```

[http://jsfiddle.net/sergeir82/A6Wah/8/](http://jsfiddle.net/sergeir82/A6Wah/8/)

[http://jsbin.com/etivej/4/](http://jsbin.com/etivej/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:40:14.993

这是 dom 中的 FF 问题，确定您是否设置了`DOCTYPE`. 没有一个很好的方法来解决它，专注的计时器往往是“hack around”。但是还有另一个步骤，如果您的 Doctype 设置为 w3 xhtml 标准，您可以使用`this`它来选择焦点。添加`onfocus="this.select();"`为您的输入的属性，以便在获得焦点时立即选择它。

# javascript - 无法读取未定义的属性

> ID：10038415
> 
> 赞同：0
> 
> 时间：2012-04-06T02:20:07.573
> 
> 标签：javascript

我正在循环我的对象数据，但得到了这个未定义的值。

不知道为什么，但希望有人能解释一下。

我的对象是这样的：

```
//globally set
var sdata = {"4":{"7":["1","7","3","3"]},"3":{"3":["2","8","1","1"]}}; 
```

我像这样循环对象：

```
function is_occupied(position) {
    for (var x in sdata) {
        for (var y in sdata) {
            // error's here Cannot read property '2' of undefined
            var ex = sdata[x][y][2] > position.block_width ? (sdata[x][y][2] + (sdata[x][y][2] - position.block_width)) : sdata[x][y][2],
            var ey = sdata[x][y][3] > position.block_height ? (sdata[x][y][3] + (sdata[x][y][3] - position.block_height)) : sdata[x][y][3];
            if (position.x >= sdata[x][y][2] && position.x <= ex && position.y >= sdata[x][y][3] && position.y <= ey) {
                alert('hit');
            }
        }
    }
} 
```

我想知道为什么它会说它 undefined ？=/ 无法解决。它假设在该对象的数组数据中获得位置 [2]。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T02:22:48.773

我相信您想要循环`sdata[x]`，而不是`sdata`在您的内部循环中：

```
function is_occupied(position) {
    for(var x in sdata){
     for(var y in sdata[x]){ 
```

# c# - 使用实体的 InvalidProgramException

> ID：10038417
> 
> 赞同：0
> 
> 时间：2012-04-06T02:20:35.400
> 
> 标签：c#, mysql, entity-framework, exception

我不断收到 InvalidProgramException 试图通过实体框架获取数据。

```
using (var db = new Entities())
{
    var utrs = from u in db.users_to_roles
               select u; // utrs.Count() > 1 at this point. So, there IS data!

    users_to_roles utr = utrs.FirstOrDefault(); // InvalidProgramException!
    utrs.GetEnumerator(); // InvalidProgramException!
    utrs.ToList(); // InvalidProgramException!
} 
```

表很简单：

```
CREATE TABLE `users_to_roles` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `userid` bigint(20) NOT NULL,
  `roleid` bigint(20) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fkuserid` (`userid`),
  KEY `FK22FCE45052C7D0B5` (`roleid`),
) 
```

其他表我没有这个问题。我错过了什么？

异常：**System.InvalidProgramException - “公共语言运行时检测到无效程序。”**

堆栈跟踪：

```
 at System.Data.Entity.DynamicProxies.users_to_roles_026CF8D248576FA69379B3C621F372FAF9B6F2E4794C8490AE27BABE54609FF1.set_id(Decimal )
       at lambda_method(Closure , Shaper )
       at System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly[TEntity](Func`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet)
       at lambda_method(Closure , Shaper )
       at System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)
       at System.Data.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.MoveNext()
       at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
       at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
       at Users.Lib.DAOs.Mysql.MysqlUserDAO.RemoveRoleFromUser(String email, String roleName) in C:\Work\Users.Lib\DAOs\Mysql\MysqlUserDAO.cs:line 242 
```

**编辑**

解决方案，感谢下面的@Quintin。我的实体中的“id”列被映射到十进制而不是 Int64。不知道它是怎么做到的，但问题已经解决了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:57:51.113

我假设您在 EF 中遇到了错误，请参阅：[http ://connect.microsoft.com/VisualStudio/feedback/details/620031/invalidprogramexception-using-entityframework-poco-template-table-w-decimal-primary-key#](http://connect.microsoft.com/VisualStudio/feedback/details/620031/invalidprogramexception-using-entityframework-poco-template-table-w-decimal-primary-key#)

# actionscript-3 - 我是否需要将我的 swc 库转换为 spark 组件才能创建移动应用程序？

> ID：10038418
> 
> 赞同：0
> 
> 时间：2012-04-06T02:20:40.100
> 
> 标签：actionscript-3, apache-flex, adobe, flash-builder

我有一个复杂的 Flex 3 应用程序，它分为两个库项目和一个导入库的 Flex 应用程序。我想在 iOS 和 Andriod 上编译和运行它。

这些库（大部分）使用从 mx 组件派生的纯 actionscript 类。例如，从 mx.button 派生的具有附加功能的自定义按钮。大多数组件是通过将 mx 组件组合在一起来创建的。

Adobe 文档说您不能在移动应用程序中使用 mx 组件。我的问题是：我是否需要转换库以使用 mx 组件的 spark 等效项？

这样做的最佳方法是什么？

我是否需要对库应用任何特殊设置才能在移动 Flex 或项目中使用？

最后一个问题：移动项目是否将 as 代码转换为目标 c 并在针对 iOS 时进行编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T03:02:54.403

> Adobe 文档说您不能在移动应用程序中使用 mx 组件。我的问题是：我是否需要转换库以使用 mx 组件的 spark 等效项？

Adobe 文档并不完全准确。只是 MX 组件没有针对移动设备进行优化，因此 Flash Builder 移动项目默认不包含它们。您可以手动将 MX SWC 作为库添加到您的移动项目中。然后，您可以毫无问题地使用 MX 组件。

但是，MX 组件并未针对性能或触摸输入进行优化；因此，您在移动应用程序中使用它们可能会遇到限制。

> 最后一个问题：移动项目是否将 as 代码转换为目标 c 并在针对 iOS 时进行编译？

我不确定。我怀疑在将发布版本导出到 iOS 时，我假设 MXML/ActionScript/AIR 直接转换为在 iOS 机器上运行的某种形式的 iOS 字节码。IT 可以做一个中间步骤，将其转换为 Objective C 代码，然后编译该 Objective C 代码。具体细节没有记录。

# facebook - 应用程序的授权问题

> ID：10038422
> 
> 赞同：1
> 
> 时间：2012-04-06T02:21:11.407
> 
> 标签：facebook, facebook-php-sdk

我正在尝试通过重定向到此身份验证 url 来验证我的应用程序的用户

[http://www.facebook.com/dialog/oauth?client_id=](http://www.facebook.com/dialog/oauth?client_id=) {APP_ID}&redirect_uri=http%3A%2F%2Fapps.facebook.com%2F{APP_NAME}%2F&scope=email,user_about_me,user_birthday,user_hometown

在我创建应用程序的开发者帐户上一切正常，并且所有授权都可以。

当我使用未以任何方式链接到应用程序的另一个帐户时，我会出现以下错误，但不知道为什么？

![错误](../Images/858975f64c84ee5b83ef92716031f53b.png)

有没有人知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:01:21.240

看来我的 Facebook 应用程序在某种程度上已损坏。我在 Facebook 中使用新的 APP ID 和 Secret 创建了一个新应用，最终一切正常。

# rest - Kohana 模块重置 URL

> ID：10038424
> 
> 赞同：0
> 
> 时间：2012-04-06T02:21:23.803
> 
> 标签：rest, module, kohana

嗨，我正在尝试使用此模块->

[http://kohana-modules.com/modules/michealmorgan/kohana-restify](http://kohana-modules.com/modules/michealmorgan/kohana-restify)

它工作得很好，除非我使用 curl 发送请求，如果我发送这个

localhost/restify/test?id=1 然后我得到 id 的值

如果我这样做

localhost/restify/test/1 或 localhost/restify/test/index/1 我被路由到默认页面（错误页面）

所以我假设 Index 被映射到 GET ，所以任何不是 test/index 的东西都会被路由，但我不知道如何让它接受它。

有没有人解决这个问题？

谢谢

```
if (trim(Request::detect_uri(), '/') == 'restify/test')
{
Route::set('restify/test', '<directory>(/<controller>(/<action>(id/<id>)))')
->defaults(array
(
'directory'     => 'restify', 
'controller'    => 'test' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T23:17:54.617

尝试将其插入您的引导程序中...

```
echo Debug::vars(trim(Request::detect_uri(), '/')); 
```

如果在 curl 请求时它不等于 restify/test，则说明有问题，您可能需要修复模块

# facebook - Facebook 开发人员希望应用程序在应用程序和游戏中可见

> ID：10038425
> 
> 赞同：0
> 
> 时间：2012-04-06T02:21:27.243
> 
> 标签：facebook

我制作了一个 Facebook 应用程序。它是一个流媒体音乐播放器。[http://apps.facebook.com/viii_punkradio/](http://apps.facebook.com/viii_punkradio/)

当我从我的 Facebook 转到应用程序和游戏以在新应用程序下搜索我的应用程序时，它不会出现。有谁知道我是否必须以任何方式注册一个新的应用程序，或者有任何其他关于如何使我的应用程序可见的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:43:09.147

您需要 10 个每月活跃用户 (MAU)，然后等待一两个星期才能获得搜索索引。

# linux - 验证来自 bash 的输入

> ID：10038437
> 
> 赞同：1
> 
> 时间：2012-04-04T13:01:47.547
> 
> 标签：linux, bash, unix

我需要制作一个接受用户输入并进行一些验证的 bash 脚本。

输入很小。我只需要让用户选择“是”或“否”和一个文件路径，并确保输入确实是一个文件路径并且他输入的是或否。

如何验证用户输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T19:59:07.280

从您的 bash 提示符类型

**帮助阅读**

* * *

示例： ***步骤 1。***

> pete@ruthie ~ $ read -p "Yes or No :" 答案

是或否：**是**

> 皮特@ruthie ~ $ echo $ANSWER

**是的**

***第2步。***

```
case $ANSWER in 
    Y* | y* ) echo "ANSWER is yes" ;; 
    N* | n*) echo ANSWER is no;; 
     *) echo "Unclear Response" ;; 
esac 
```

答案是肯定的

或全部在一条线上：

```
case $ANSWER in Y* | y* ) echo "ANSWER is yes" ;; N* | n*) echo ANSWER is no;; *) echo "Unclear Response" ;; esac 
```

**答案是肯定的**

所以有点像::

```
 read -p "Enter File Name :" FILE_TO_CHECK 

    if [ ! -e "$FILE_TO_CHECK" ]; then 
        echo -e "There is no file called $FILE_TO_CHECK \n please check spelling"
    else
        echo  "Congratulations found $FILE_TO_CHECK. "
         ls -lah $FILE_TO_CHECK
         read -p "Process $FILE_TO_CHECK ? Y or N : PROCEED
           case $PROCEED in
             Y* | y*)
##call function or system command to do something with this data
               foo $FILE_TO_CHECK

             ;;
            * )
             echo -e "Note $USER\n No action taken by $0 on $FILE_TO_CHECK"
             ;;
            esac

    fi 
```

* * *

test 命令是你的朋友。你真的需要尽快学习它的方法。

`help [`

和

`help test`

“help bashthing”命令是一个很好的快速提醒。

另请参阅：高级 Bash 脚本指南 (ABS) [http://tldp.org/LDP/abs/html/](http://tldp.org/LDP/abs/html/ "高级 BASH 脚本指南")

FWIW：这是一个非常简单的示例，不会以意想不到的用户输入方式适应太多。我可能会为此每个步骤调用函数，因为这样我可以有条件地代表用户有另一个机会。

像这样嵌套的案例测试很丑:) === 很难整理好以后再读

对于 GTK 风格的 GUI，还有其他方法可以实现所有这些尝试***zenity***。

ABS非常好，但不要试图一次吃掉它！

# javascript - Backbone.js 获取回调

> ID：10038441
> 
> 赞同：4
> 
> 时间：2012-04-06T02:25:25.557
> 
> 标签：javascript, backbone.js

我正在使用 Backbone.js 并使用带有选项的 fetch，但它似乎没有收到错误或成功回调，但是正在返回数据。

```
this.user.fetch({data: {username : this.username.val(), check : 'true'}}, {
    error: function(model, response) {
        console.log(response);
    },
    success: function(model, response)  {
        console.log(response);
    }
}); 
```

这就是我的设置，我错过了什么吗？它永远不会遇到错误或成功，但它会执行 ajax 请求并返回数据。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T02:44:16.547

您将 2 个单独的参数传递给`fetch`. `data`将它们与、`success`和字段组合成一个对象，`error`它应该适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T12:26:20.000

x1a4 答案示例

```
var myModel = new MyModel({id: modelId});
myModel.fetch({
  success: function (model) {
    console.log('success: model fetched');
  },
  error: function () {
    console.log('error: loading model');
  }
});
```

# python - 当我将多行文本粘贴到输入提示符时，Python 脚本死机

> ID：10038445
> 
> 赞同：1
> 
> 时间：2012-04-06T02:25:55.727
> 
> 标签：python, python-3.x

我做了一个程序：

```
import collections
x = input("Enter in text: ")
x_counter = collections.Counter()
x_counter.update(x)
print("Your sequence contains:\n")
for i in '`1234567890-=qwertyuiop[]\asdfghjkl;zxcvbnm,./~!@#$%^&*()_+QWERTYUIOP\
{}|ASDFGHJKL:"ZXCVBNM<>?':
    print(i, x_counter[i]) 
```

这会打印出一个字母在文本中使用的次数。当用户输入较小尺寸的文本时，例如段落......程序运行良好。当用户输入很长的文本时，比如说 5 段...程序退出并以 bash 命令的形式运行所有输入...这是为什么？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T02:32:58.067

这是因为`input`只从用户那里得到一行，如下例所示：

```
pax> cat qq.py
x = raw_input ("blah: ") # using raw_input for Python 2
print x

pax> python qq.py
blah: hello<ENTER>
hello

pax> there<ENTER>
bash: there: command not found

pax> 
```

一种可能性是从文件中读取信息而不是使用`input`，但您也可以执行以下操作：

```
def getline():
    try:
        x = raw_input ("Enter text (or eof): ")
    except EOFError:
        return ""
    return x + "\n"

text = ""
line = getline()
while line != "":
    text = text + line;
    line = getline()
print "\n===\n" + text 
```

它将继续读取用户的输入，直到他们以 EOF 结束输入（Linux 下的 CTRL-D）：

```
pax> python qq.py
Enter text (or eof): Hello there,
Enter text (or eof): 
Enter text (or eof): my name is Pax.
Enter text (or eof): <CTRL-D>
===
Hello there,

my name is Pax. 
```

# iphone - 使用 Xcode 播放随机声音

> ID：10038446
> 
> 赞同：1
> 
> 时间：2012-04-06T02:25:58.597
> 
> 标签：iphone, objective-c, ios, xcode, audio

我打算使用此代码使随机声音与动作一起播放，但不确定如何命名我的声音文件。谢谢你的帮助。

```
int randomNumber = arc4random() % 24 + 1;

NSURL *soundURL = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:[NSString stringWithFormat:@"Sound%02d", randomNumber] ofType:@"mp3"]];

AVAudioPlayer * soundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:nil];

[soundPlayer prepareToPlay];
[soundPlayer play]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T03:19:45.313

像这样命名它们：

声音01.mp3 声音
02.mp3
...
声音24.mp3

# google-analytics - 调用 _trackPageview 后在 Google Analytics 中设置自定义变量

> ID：10038450
> 
> 赞同：8
> 
> 时间：2012-04-06T02:26:30.550
> 
> 标签：google-analytics

使用 Goggle Analytics 我想使用自定义变量。这是内置功能，但不幸的是我无法控制加载 GA 并调用 _trackPageview 的代码；

这意味着我不能在 _trackPageview 之前调用 _setCustomVar

如果我第二次调用 _trackPageview，它会记录两次页面浏览量吗？

例如

```
// I'm not able to change this order
_gaq.push(['_setAccount', 'UA-XXXXXXXX']);
_gaq.push(['_trackPageview']);

// I'm forced to run this after the first _trackPageview
_gaq.push(['_setCustomVar',1,'name','value']);
_gaq.push(['_trackPageview']); 
```

有没有其他方法来获取自定义变量集

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T05:43:02.880

是的，每个 _trackPageview 都会记录一个页面视图。

您可以将 pageURL 传递给第二个 _trackPageview，并在您的分析配置文件中设置过滤器以忽略这些页面浏览量。

```
_gaq.push(['_trackPageview', '/dummyPageName']); 
```

或者，您可以使用 _trackEvent 来引发跟踪 GIF 请求并传递自定义变量，而不是第二个 _trackPageview。

```
_gaq.push(['_setCustomVar', 1, 'name', 'value']);
_gaq.push(['_trackEvent', 'dummy category', 'dummy action']); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T13:06:12.977

为了防止影响页面查看次数和跳出率的统计信息，您可能应该使用 _trackEvent 方法并记住将 opt_noninteraction 变量设置为 false。这既不应该跟踪页面浏览量，也不应该影响跳出率

```
_gaq.push(['_setCustomVar', 1, 'name', 'value']);
_gaq.push(['_trackEvent', 'category', 'action', 'label', 1, true]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T10:52:27.427

我遇到了同样的问题，似乎更好的解决方案是在调用`_setCustomVar`之前移动。`_trackPageview`您将不得不`_gaq`在像这样之前启动变量`_setCustomVar`：

```
var _gaq = _gaq || [];
_gaq.push(['_setCustomVar',1,'name','value',3]); 
```

# c# - c# 如何在运行时添加 contextMenuStrip 项？

> ID：10038451
> 
> 赞同：2
> 
> 时间：2012-04-06T02:26:42.917
> 
> 标签：c#, winforms, visual-studio-2010

我确信这个问题的答案之前已经发布过。请原谅我，因为我认为我只是没有想到正确的搜索字符串。

我拥有的是分配给我的拨号器托盘图标的上下文菜单条。这个想法是让用户设置各种数字并从菜单中选择用户定义的数字并启动拨号。

所以菜单弹出`Presets`, `Setup`, & `Exit`。我希望预设菜单打开一个列出用户定义数字的新树。我还希望每次加载应用程序时都从 xml 文件中填充它。

我的问题是我不知道如何动态填充子菜单项并为其赋予功能。

那么我如何在启动时将用户定义的数字添加到预设 ->（`userNumber1, usernumber2, userNumber3`），然后`dial()`在单击时调用该函数？

* * *

所以我找到了如何添加到列表中......我现在觉得问这个很傻。对于任何想知道那个的人，列表项都有一个名称。我的情况是名称属性是“presetsToolStripMenuItem”

因此，要向其中添加项目，请调用名称

```
presetsToolStripMenuItem.DropDownItems.Add(string text) 
```

不继续。我现在被困在试图弄清楚如何将事件分配给新添加的功能。我确实找到了

```
presetsToolStripMenuItem.DropDownItems.Add(string text, image, eventargs) 
```

我正在努力解决这个问题。也许我需要停下来，稍后再回来。也许如果有人可以为我提供一个使用这条线调用 a 的示例，`function();`我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T21:23:16.607

对于任何感兴趣的人，我想出了在运行时添加上下文菜单项并能够调用函数的解决方案。

如前所述，要将子菜单项添加到父类别，请使用`parent.name`. 所以在我的情况下，预设菜单项名称是“presetsToolStripMenuItem”

要添加功能，我使用了 3 参数方法。

```
 ToolStripMenuItem.DropdownItems.Add("string name", image, eventargs); 
```

所以我的代码如下所示：

```
presetsToolStripMenuItem.DropDownItems.Add("added2", null, disp);

void disp(object sender, EventArgs e)
    {
        MessageBox.Show("It works!");
    } 
```

# iphone - In-App Purchase Programming - iPhone - 这也可以解锁我的网站社区上的内容吗？

> ID：10038454
> 
> 赞同：2
> 
> 时间：2012-04-06T02:26:55.257
> 
> 标签：iphone, in-app-purchase

我在一个开发团队中讨论我们是否应该处理优质内容的订阅

1) 在我们的在线社区网站上或

2) 在我们的 iPhone 应用中通过应用内购买功能。

我们仍然存在的问题是：

如果我们在线网站的会员（注册会员）下载 iPhone 应用程序（作为与我们在线内容交互的另一种方式）并决定通过 iPhone 应用程序内购买功能购买“高级”功能（解锁 iPhone 上的新内容）应用程序）

然后，我们的服务器能否**知道**该会员已通过应用程序升级并作为响应解锁我们网站上的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:16:46.167

每当用户进行应用内购买时，商店都会向应用发送消息，因此您的应用可以通过向您的服务器发送消息来对消息做出反应。我的问题是与 Apple 的合同是否允许这样做，特别是如果用户可以在不支付 Apple 费用的情况下购买网站上的内容，然后通过应用程序访问它。

# php - 在 PHP 中更改多维数组中字段的值

> ID：10038459
> 
> 赞同：1
> 
> 时间：2012-04-06T02:28:07.923
> 
> 标签：php

我有一个看起来像这样的数组

```
Array
(  
    [0] => Array
        (
            [Title] => The Title
            [Price] => 700
            [Quantity] => 2
        )

) 
```

假设我想将 Quantity 更改为 5，如果数组存储在变量 $ItemArray 中，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T02:39:59.237

试试`$itemArray[0]['Quantity'] = 5;`。

基本上，您有一个数组 ，`$itemArray`其中包含一个[关联数组](http://php.net/manual/en/language.types.array.php)。要访问内部数组，您只需使用标准 PHP 数组语法：`$itemArray[0]`.

然后，您需要该`Quantity`内部数组的字段。使用嵌套数组语法，您追加`['Quantity']`到我们之前的语句的末尾，结果是：`$itemArray[0]['Quantity']`。

至此，你有了你想要的字段，你可以使用法线`=`来设置字段值。

```
$itemArray[0]['Quantity'] = 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:39:33.690

这很简单，试试

```
$itemArray[0]["Quantity"] = 5; 
```

我们在这里所做的是访问 $itemArray 中为 0 的第一个索引；0 包含一个数组，所以我们现在指定要访问 0 的哪一部分： 基本上像这样：

```
$array[index][innerarrayindex] 
```

# opencv - 如何在 NDK 中获得权限

> ID：10038460
> 
> 赞同：1
> 
> 时间：2012-04-06T02:28:35.743
> 
> 标签：opencv, android-ndk

我是 Android NDK 的新手，我必须在 Android 中使用 OpenCV。

我试图提前运行 NDK，但发生了这些错误。也许我没有使用文件“/obj/local/armeabi/libopencv_contrib.a”的权限，如何获得权限？并且当第一个错误解决后，下一个错误是否可以？我的工作区操作系统是 Windows7。

```
$ NDK-build 
```

SharedLibrary : libImgFun.so D:/Android/android-ndk-r7b-windows/android-ndk-r7b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/../lib/gcc/arm -linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld.exe：./obj/local/armeabi/libopencv_contrib.a：没有这样的文件：权限拒绝

collect2：ld返回1退出状态/cygdrive/d/Android/android-ndk-r7b-windows/android-ndk-r7b/build/core/build-binary.mk:314：目标`obj/local/armeabi/的配方libImgFun.so' 失败生成：*** [obj/local/armeabi/libImgFun.so] 错误 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:02:51.083

我在 Windows 7 上遇到了同样的问题。我只能使用 chmod 手动设置权限，然后就可以了。我最好的猜测是，这是 Cygwin、Windows 和构建过程如何交互的错误。

*   打开控制台窗口
*   `> bash`
*   `> cd /cygdrive/<driveletter>/<wherever your project is>/obj/local/armeabi`
*   `> chmod 777 ./*`

# provisioning-profile - Xcode 代码签名错误：找不到配置文件“XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX”

> ID：10038461
> 
> 赞同：1
> 
> 时间：2012-04-06T02:28:38.377
> 
> 标签：provisioning-profile

上周我提交了几个被 Apple 撤销的应用程序。我修复了它们并尝试再次汇总这些应用程序。我已经收到这个错误两天了。我删除了配置门户上的所有证书和配置文件，并创建了所有新的。另外，我清理了钥匙串中的所有东西。

我确定我在 Xcode 的构建设置中使用了正确的配置文件，但我仍然收到此错误。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-03T04:02:35.117

我通过以下步骤解决了这个问题：

1.  转到保存配置文件的文件路径：

    ```
    ~/Library/MobileDevice/Provisioning Profiles 
    ```

    并删除您今天下载的所有配置文件。

2.  从 Apple 会员中心下载与您的项目匹配的新配置文件。

3.  按`Command`+ `B`，重建项目，看看这个问题是否仍然存在。

# iphone - UITableView 编辑时如何取消选定的单元格突出显示的背景色

> ID：10038465
> 
> 赞同：0
> 
> 时间：2012-04-06T02:29:24.677
> 
> 标签：iphone, ios, uitableview

我设置了单元格`[cell.contentView addSubview:chatView]`。chatView 有一个`UIImageView`、两个`UILabels`和 UILabel `backgroundColor = [UIColor clearColor]`。

编辑表格时，我选择单元格，单元格突出显示，UILabel backgroundColor 更改突出显示的颜色。如何取消 backgroupColor。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-24T10:36:41.897

```
theLabel.layer.backgroundColor = myColor 
```

这工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T02:41:15.767

如果您只想不突出显示单元格选择，您可以这样做：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

我不确定您是否要取消标签 BgColor 或单元格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T04:13:42.883

如果您不希望所选单元格更改其背景颜色，请将`selectionStyle`单元格的属性设置为`UITableViewCellSelectionStyleNone`Ie：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

标签的背景颜色设置为单元格的突出显示颜色的原因是因为您已将标签的背景颜色属性设置为清除颜色。

让我知道这是否可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T04:00:25.920

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
    if (self.editing) {

        for (UIView *view in self.contentView.subviews) {
            for (UIView *subview in view.subviews) {
                if ([subview isMemberOfClass:[UILabel class]]) {
                    subview.backgroundColor = [UIColor clearColor];
                }
            }

        }
    }
} 
```

我继承了 UITableViewCell，并重写了方法`- (void)setSelected:(BOOL)selected animated:(BOOL)animated`

# c++ - 指向 C++ 中的局部变量的指针

> ID：10038470
> 
> 赞同：1
> 
> 时间：2012-04-06T02:29:42.467
> 
> 标签：c++, pointers, local-variables

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

我在 C++ 中有以下代码

```
int* foo()
{
    int myVar = 4;
    int* ptr = &myVar;
    return ptr;
}

int main()
{
   printf("val= %d", *foo());
   return 0;
} 
```

我得到的输出是：

```
val = 4 
```

所以我的问题是，由于 myVar 是一个局部变量，它不应该在函数返回后消失吗？指向它的指针也不应该是空指针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:31:30.220

> 所以我的问题是，由于 myVar 是一个局部变量，它应该在函数返回后消失吗？

是的。它将指向您设置的地址。但是，该区域是该功能的本地区域。在它指向的内容超出范围后，假设它不属于您。

它与以下内容一样不正确：

```
uint8_t* p = (uint8_t*)malloc(count);
free(p);
p[0] = 1; 
```

但是对于您或您的工具来说，诊断错误要困难得多，因为该区域将存在于堆栈中（除非经过优化）。

> 指向它的指针也不应该是空指针吗？

不，C 和 C++ 不会为您管理这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T04:41:42.737

在您的情况下，`printf("val= %d", *foo())`正在打印垃圾值。由于没有其他代码，因此该数据没有更改。

你运行这段代码，你会明白的

```
 int* foo() 
    { 
        int myVar = 4; 
        int* ptr = &myVar; 
        return ptr; 
    } 

    int* foo1() 
    { 
        int myVar = 5; 
        int* ptr = &myVar; 
        return ptr; 
    } 
    int main() 
    { 
        int* x = foo();
        int* x1 = foo1();
       printf("val= %d", *x); 
       return 0; 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T03:10:42.917

包含保存*int myvar*的地址和属于该函数的任何其他局部变量的内存在函数返回的那一刻未被分配，但是 C 中没有清理过程，因此内存中的值将在返回之间的那一小段时间内保持不变和 printf 访问它。

在 C 中取消分配（或释放相同的东西）内存就像在 Windows 中删除文件一样，其中文件内容暂时仍在驱动器上，但只要该区域再次需要其他内容时就会被覆盖。您仍然可以阅读内容，但您不应该相信您阅读的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T02:35:16.177

ptr* 处的地址将保持分配状态，如果您再次调用函数，它将更改指针。至少那将是我的理论。出于性能原因，C++ 不会覆盖您的指针。

```
int foo(int val) {
  int myVar = val;
  int* ptr = &myVar;
  return ptr; 
}

int main()
{
   int *ptr = foo(4);
   foo(3);
   printf("val= %d", *ptr); //will print 3
   return 0;
} 
```

# java - eclipse 插件开发：如何从 cnf 打开自定义编辑器（双击）。

> ID：10038471
> 
> 赞同：1
> 
> 时间：2012-04-06T02:29:56.037
> 
> 标签：java, eclipse, plugins, cnf

我是 RCP 的新手，正在努力解决如何从 cnf（双击）打开自定义编辑器。我想可以在 plugin.xml 中声明它，但还没有弄清楚如何。

当我在 cnf 的项目中双击 xml 文件时，我想打开我自己的自定义编辑器而不是标准的 xml 编辑器。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:08:59.220

[Lars Vogel 的Eclipse Editors](http://www.vogella.de/articles/EclipseEditors/article.html#editor_editor)有一个很棒的教程来解释这一点。本质上，您在 plugin.xml 中使用您需要的扩展名定义它。您可以使用向导来创建编辑器。

请注意，当您右键单击文件时，“*打开方式”*菜单将显示该文件扩展名的所有可用编辑器。

# c++ - VIM 语法折叠：禁用折叠多行注释

> ID：10038477
> 
> 赞同：7
> 
> 时间：2012-04-06T02:30:28.283
> 
> 标签：c++, vim

我在 vim 7.3 中使用“语法”折叠方法。在 .vimrc 中：

```
set foldmethod=syntax 
```

当我打开 Test.cpp 时，包含：

```
/* A function with a multi-line
 * comment. This takes at least
 * four lines and I want to be
 * able to read all of them.
 */
void TheFunction()
{
  DoStuff();
} 
```

折叠时我看到以下内容：

```
+--  5 lines: A function with a multi-line---------------------------------------------
void TheFunction() 
+--  3 lines: {------------------------------------------------------------------------ 
```

我喜欢函数体折叠，但不喜欢评论折叠。我想禁用它，所以它看起来像这样：

```
/* A function with a multi-line
 * comment. This takes at least
 * four lines and I want to be
 * able to read all of them.
 */
void TheFunction() 
+--  3 lines: {------------------------------------------------------------------------ 
```

我该怎么做呢？我可以看到与 :syn list cComment 相关的语法组

```
cComment       xxx matchgroup=cCommentStart start=+/\*+ end=+\*/+  extend fold contains
=@cCommentGroup,cCommentStartError,cSpaceError,@Spell
                   links to Comment 
```

但是使用 vim 文档和谷歌工具大约一个小时并没有告诉我如何从该组中删除“折叠”属性。

我唯一的办法真的是编辑语言语法文件吗？我想复制系统语法文件并使用它不那么难看，但我应该能够在我的 .vimrc 中使用命令关闭特定组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T05:32:53.583

When`'foldmethod'`设置为`"syntax"`then`/* */ comments`并将`{ } blocks`成为折叠。如果您不希望评论成为折叠使用：

```
:let c_no_comment_fold = 1 
```

# javascript - 为什么子元素会导致调用“dropleave”（拖放文件上传）？

> ID：10038479
> 
> 赞同：1
> 
> 时间：2012-04-06T02:30:34.800
> 
> 标签：javascript, jquery, drag-and-drop, parent-child

我有一个 HTML5 拖放脚本，允许用户在#droparea 中放置文件。#droparea div 的子元素也是 div 元素。

```
<div id="droparea">
    <div id="showif_no_dragover">Drag files here!</div>
    <div id="showif_dragover">Drop the files!</div>
</div> 
```

相关的 javascript/jquery 是：

```
var droptarget = "#droparea";
$(droptarget).live('dragenter', dragEnter);
$(droptarget).live('dragleave', dragExit);
$(droptarget).live('dragover', nothing);
$(droptarget).live('drop', dropGo); 
```

（附带*问题：*我应该在这里使用 .live()、.on() 还是 .bind()？）

我在这里创建了一个带有一些附加代码的示例 jsFiddle：http: [//jsfiddle.net/PwFr9/3/](http://jsfiddle.net/PwFr9/3/)

如果您查看控制台，您会注意到当您在#droparea 中拖动文件时，会多次调用dragenter() 和dragleave()，即使拖动仍在#droparea 中。如果删除子元素（#child1 和#child2），问题就消失了，因为子元素消失了。如何保留子元素并防止它们弄乱拖动事件？

我已经在 Stackoverflow 和 Google 上搜索了几个小时而没有得到太多帮助。我在 Stackoverflow 上发现了这个问题：[如何防止子元素干扰 HTML5 拖放事件？](https://stackoverflow.com/questions/4942375/how-to-keep-child-elements-from-interfering-with-html5-dragover-and-drop-events) 不过，我不知道它为什么会起作用。

我尝试将 2 个 div 元素放在一起（通过 CSS 定位）。最顶部的 div 附加了拖动事件，而最底部的 div 具有子元素。我不喜欢这种方法，因为它不适用于我页面的其余部分，并且不允许鼠标单击与最底部的 div 交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T22:36:58.397

它是 HTML5 拖放规范的问题。阅读这篇冗长的文章以获得解释......

[http://www.quirksmode.org/blog/archives/2009/09/the_html5_drag.html](http://www.quirksmode.org/blog/archives/2009/09/the_html5_drag.html)

# android - Eclipse 无法识别我正在尝试导入的现有项目并且不正确地导入项目？

> ID：10038481
> 
> 赞同：0
> 
> 时间：2012-04-06T02:31:04.867
> 
> 标签：android, eclipse

我正在使用 Eclipse Indigo，我正在使用它来开发 Android 移动应用程序。我正在尝试导入新版本的 ActionBarSherlock 库以用于我已经拥有的项目。我试图去**File > Import... > Existing Projects**但没有找到任何东西，我也尝试过**File > New > Android Project > From existing source**但它只导入资源文件夹的一半和就是这样。它不导入任何其他文件，甚至省略了 AndroidManifest.xml 文件，这显然是这里的关键文件。
对我有什么帮助还是我被困住了？：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:28:19.537

将罐子放入您的`/workspace/<appname>/libs`文件夹中。回到 Eclipse，右键单击您的项目并选择刷新（确认新文件夹出现在您的项目中）。接下来，进入 Menu->Project->Properties [Java Build Path]。选择 Libraries 选项卡，然后选择 [Add Jars...]，最后浏览到您的 libs 文件夹。你的新罐子应该可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T03:09:56.560

您可能需要将该库添加为外部库，然后在清单文件中引用它，类似于我们为地图实现 GoogleAPI 的方式。

```
<uses-library android:name="com.google.android.maps" /> 
```

如果不是这样，接下来我会尝试将该项目复制/粘贴到您的应用程序项目文件夹下。您必须进入该项目并解析“包”名称以反映您自己的包名称。一旦你这样做了，所有这些类都将在你的项目中可见。如果存在冲突，您可能需要手动合并资源。

# bash - 使用传递的文件名打开 vi

> ID：10038482
> 
> 赞同：6
> 
> 时间：2012-04-06T02:31:13.010
> 
> 标签：bash, vim

我通常这样使用

```
$ find -name testname.c
./dir1/dir2/testname.c
$ vi ./dir1/dir2/testname.c 
```

再次输入带有位置的文件名很烦人。

我怎么能只用一步来做到这一点？

我试过了

```
$ find -name testname.c | xargs vi 
```

但我失败了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T02:34:17.600

使用`-exec`参数来`find`。

```
$ find -name testname.c -exec  vi {} \; 
```

如果您`find`返回多个匹配项，则文件将按顺序打开。也就是说，当您关闭一个时，它将打开下一个。您不会让它们都在缓冲区中排队。

要让它们在缓冲区中全部打开，请使用：

```
$ vi $(find -name testname.c) 
```

顺便说一句，这真的是 vi，而不是现在 vi 经常被别名的 Vim？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T03:04:52.570

您可以在 bash 中使用以下命令执行此操作：

要么使用

```
vi `find -name testname.c` 
```

或使用

```
vi $(!!) 
```

如果您已经输入`find -name testname.c`

编辑：可能的重复：[bash - 自动将最后执行的命令的输出捕获到变量中](https://stackoverflow.com/questions/5955577/bash-automatically-capture-output-of-last-executed-command-into-a-variable)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-06T02:43:32.383

问题是`xargs`接管`vi`那里的所有输入（并且没有其他追索权，然后传递`/dev/null`给，`vi`因为替代方法是传递文件列表的其余部分），让您无法与之交互。您可能想改用子命令：

```
$ vi $(find -name testname.c) 
```

遗憾的是，在您运行 initial 之后，没有简单的`fc`或调用可以轻松地为您完成此操作，尽管事后将字符添加到命令的两端很容易。`r``find`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-06T10:13:39.090

我最喜欢的解决方案是使用 vim 本身：

```
:args `find -name testname.c` 
```

顺便说一句，VIM 已经扩展了 shell globbing builtin，所以你可以说

```
:args **/testname.c 
```

它将在子目录树中递归找到。

也不是，VIM 在命令行上有文件名完成，所以如果你知道你真的在寻找一个文件，试试

```
:e **/test 
```

然后按`Tab`（重复）在子目录树中的任何匹配文件名之间循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-06T20:52:10.437

对于比其他更强大`vi $(find -name testname.c)`的东西，以下内容将防止文件名带有空格和其他解释的 shell 字符（如果你的文件名中嵌入了换行符，上帝会帮助你）。将此函数注入到您的 shell 环境中：

```
# Find a file (or files) by name and open with vi.
function findvi()
{
    declare -a fnames=()
    readarray -t fnames < <(find . -name "$1" -print)
    if [ "${#fnames[@]}" -gt 0 ]; then
        vi "${fnames[@]}"
    fi
} 
```

然后像这样使用

```
$ findvi Classname.java 
```

# objective-c - Objective-C - 只读变量不可分配？

> ID：10038483
> 
> 赞同：9
> 
> 时间：2012-04-06T02:31:23.793
> 
> 标签：objective-c, ios, automatic-ref-counting

我一直在使用下面的代码来移动视图，从来没有遇到过问题。我第一次在我的项目中开始使用 ARC，第二行出现以下错误。“只读变量不可赋值”

我想用 ARC 做不同的事情吗？

```
CGRect rect = self.frame;

[UIView animateWithDuration:0.4 animations:^{
    rect.origin.x = 57;
    self.frame = rect;
}]; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-06T02:51:33.627

问题是我在动画块中使用了 CGRect 。用 __block 标记变量解决了我的问题

```
__block CGRect rect = self.frame; 
```

# network-drive - 网络映射驱动器无法访问

> ID：10038487
> 
> 赞同：0
> 
> 时间：2012-04-06T02:32:04.543
> 
> 标签：network-drive

我有一个 VC++ exe，它使用字母名称“M”（M：\server-ip\sharename）调用网络映射驱动器。根据业务情况，将部分文件复制到网络共享文件夹，运行正常。

问题是，当我使用 Process.Start(startInfo) 从 .NET 应用程序调用 VC++ exe 时，网络映射驱动器抛出异常说 netwrok not found。

在某些用户 PC 中，即使从 .net 应用程序调用它也能正常工作。我们使用带有 sp1 的 .NET 框架 3.5，操作系统是 XP。请帮我解决这个问题。我什至尝试了 CASPOL.exe 来完全信任网络共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:58:00.130

Instead of starting your VC++ EXE you could start a command shell (cmd.exe) and look for yourself if the network drive exists.

If not it I'd look which user context your program and the cmd.exe are running under and make sure it is the same user and this user has the network drive.

# c++ - 函数指针存储的地址在哪里

> ID：10038491
> 
> 赞同：2
> 
> 时间：2012-04-06T02:33:32.247
> 
> 标签：c++, function, pointers

我知道函数指针存储函数的地址。

```
int fun(int x){
 //return something
} 
int (pfun*)(int)=&fun;

int main(){

std::cout << &fun << "\n"; // this print out 1
std::cout << fun << "\n" ; // this print out 1
std::cout << &pfun << "\n"; // this print out 0x0022ff40
std::cout << pfun << "\n" ; // this print out 1

 } 
```

**所以我的问题是：**
**1)**如果 fun() 甚至没有地址，pfun 怎么能指向 fun()。
**2）**例如在动态绑定中，当我在运行时使用指针函数时。编译器是否将 pfun 值更改为像 0X 之类的真实指针......以便在运行时知道要调用哪个函数，因为编译后名称不存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T02:44:56.883

表达式`fun`和`&fun`具有相同的含义：`&fun`相当于存储在 中的值`pfun`，因此它们三个产生相同的输出也就不足为奇了。`&pfun`是指针的地址，也就是变量的地址。

现在的问题是为什么`1`......嗯，答案是没有重载`operator<<`需要一个`std::ostream`和一个函数指针，所以编译器试图找到现有重载之间的最佳匹配，这恰好是`bool`（函数指针是隐式可转换的到`bool`）。只有当函数指针为空时，函数指针才会被转换`false`为空，事实并非如此。该`true`值最终打印为`1`（您可以通过执行以下操作进行检查：`std::cout << std::boolalpha << fun`which will print `true`）。

如果要获取函数的实际地址（在此过程中），可以强制强制转换为 void 指针并打印结果。这在技术上可能不正确，但它会给您一个不同于`1`...的数字。请注意，该值在不同的运行中可能会有所不同，并且基本上没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:44:43.077

`operator<<`没有用于打印函数指针的适当重载。试试这个。

```
#include <iostream>

void fun() {}

void (*pFun)() = &fun;

int main ()
{
  std::cout << (void*)pFun << "\n";
} 
```

# android - 如何在 Android-x86 上模拟 SMS 和 Telephony？

> ID：10038494
> 
> 赞同：4
> 
> 时间：2012-04-06T02:33:50.847
> 
> 标签：android, android-emulator, virtual-machine

我已经在 VirtualBox 上安装了 Android-x86 并设置`adb connect 10.0.2.15`成功。现在，我想使用 Emulator Control 将 SMS 和 Telephony 模拟到 VM，但 Emulator Control 被禁用。我可以在 VM 上进行 SMS 和电话模拟吗？怎么做？

# django - 当模型不清楚时，如何在视图上指定 get_absolute_url()？

> ID：10038495
> 
> 赞同：1
> 
> 时间：2012-04-06T02:34:14.927
> 
> 标签：django, permalinks

我在我的 Django 应用程序中有一个位置，我需要在第三方身份验证之后构造对我的域的回调，但我坚持如何做到这一点，因为有问题的视图并没有真正映射到一个模型（或相反，视图代码引用了多个模型），以及 get_absolute_url() 构造和永久链接所有参考模型的文档。

例如，在我的模板中，我目前有类似的内容：

```
<a class="btn btn-danger large" href="http://to/third/party?api_key=noneyobiz&cb=http://localhost:8000/signup">Join via Somethingorother</a> 
```

urls.py 中此视图的行是：

```
 url(r'^signup/$', 'signup', name="signup"), 
```

我希望硬编码的“http://localhost:8000/signup”是动态的。我希望这个功能不依赖于我使用通用视图。实际上我不明白为什么生成永久链接甚至与模型相关，似乎它应该只取决于 urlconf。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:47:43.470

`permalink`仅适用于直接引用模型时*的用例。*要查找非基于模型的 URL，您可以使用`url`标记 - 在您的情况下，`{% url signup %}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:27:36.840

`permalink`是`django.core.urlresolvers.reverse`. 它属于 django.db.models 是一个快捷方式，因为我们通常在模型`reverse`内部编写`get_absolute_url`。所以在这里使用反向

```
from django.core.urlresolvers import reverse
path = reverse('signup') 
```

*更新*

要使用绝对 URI，您可以

*   正如 Daniel 所建议的那样，在设置中硬编码或使用诸如`Site.objects.get_current()`w/ 获取路径`reverse`或`url`获取绝对 URI 之类的东西。
*   如果您的回调 URI 与呈现模板的视图在同一个域中，您可以依靠[`request`](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpRequest.build_absolute_uri)获取实际的绝对 URI：

    `request.build_absolute_uri(reverse('signup'))`

此外，您可能希望转义[template](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#urlencode)中的 URI ，例如`{{ absolute_uri|urlencode }}`. 或通过`urllib.quote`或`urllib.urlencode`

# asp.net - 将 Mono 移植到 .Net

> ID：10038501
> 
> 赞同：2
> 
> 时间：2012-04-06T02:35:10.950
> 
> 标签：asp.net, .net, linux, mono, porting

我有一个需要使用 ASP.NET 完成的项目。目前，我使用的是 Linux 机器并且无法访问 Windows，所以我想知道同时在 Mono.Net 中进行开发。最终项目需要在 Microsoft.NET 上完成。

将 Mono.NET 应用程序移植到 Microsoft.NET 有多容易？还是我应该等到我得到Windows机器？我不介意偶尔的挑战，但如果这会是一个很大的痛苦，我不介意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:38:24.070

只要确保您仅使用 Microsoft .NET API 或跟踪任何 Mono 或其他开源 DLL 并在 Windows 上运行时包含它们，它就应该可以正常工作。

MonoDevelop 也可以提供帮助，因为它创建了与 Visual Studio 兼容的项目文件，如果您以后还想迁移到 Visual Studio，这些文件可以帮助您进行迁移。

# xcode - Xcode 4.3.1 中的纹理工具在哪里？

> ID：10038506
> 
> 赞同：2
> 
> 时间：2012-04-06T02:35:49.577
> 
> 标签：xcode, textures, xcode4.3

我已经安装了 Xcode 4.3.1。

我正在寻找用于将 PNG 转换为 PVR 文件的“纹理工具”。

根据 ：

[http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TextureTool/TextureTool.html#//apple_ref/doc/uid/TP40008793-CH108-SW1](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TextureTool/TextureTool.html#//apple_ref/doc/uid/TP40008793-CH108-SW1)

该文件位于：

/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/texturetool

但是由于我从应用商店安装了 Xcode，所以 /Developer 不存在！这是 Xcode 的新“应用”版本。

编辑：好的，我在这里找到它：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin

我应该怎么做才能在不输入完整路径的情况下访问该工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:41:16.683

要在不输入完整路径的情况下访问该工具，您可以将该较长的路径添加到“ `PATH`”环境变量中。

`PATH`您可以在此问题的[答案](https://superuser.com/questions/345201/is-it-possible-to-set-path-on-mac-os-x-lion-without-restarting)中找到一些修改方法。

# ruby - 使用方法调用将 Nokogiri xml 构建器块中的 XML 插入另一个

> ID：10038507
> 
> 赞同：2
> 
> 时间：2012-04-06T02:35:55.880
> 
> 标签：ruby, xml, nokogiri

我正在尝试为我正在制作的库构建 xml。我想要做的是：

```
def block1
  builder = Nokogiri::XML::Builder.new do |xml|
    xml.SomeStuff {
      xml.ThingsUnderStuff
      (block2 needs to go here)
    }
  end
end

def block2
  builder = Nokogiri::XML::Builder.new do |xml|
    xml.AddedToStuff {}
  end
end 
```

我不确定该怎么做，除非我忽略了它，否则我无法在文档中找到任何可以用于此目的的东西。感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T02:46:05.183

```
require 'nokogiri'
def block1
  builder = Nokogiri::XML::Builder.new do |xml|
    xml.SomeStuff {
      xml.ThingsUnderStuff
      block2(xml)
    }
  end
end

def block2(xml)
    xml.AddedToStuff
end

puts block1.doc
#=> <?xml version="1.0"?>
#=> <SomeStuff>
#=>   <ThingsUnderStuff/>
#=>   <AddedToStuff/>
#=> </SomeStuff> 
```

# iphone - iPhone - 每个单元格中带有 UIImageViews 的 UIScrollView 的 UITableView 性能不佳

> ID：10038509
> 
> 赞同：0
> 
> 时间：2012-04-06T02:36:36.550
> 
> 标签：iphone, ios, uitableview

我有一个`UITableViewCell`包含一个`UIScrollView`. UIScrollView 包含不同数量的`UIImageViews`每一行。有些行在滚动视图中有 5 个图像，有些行在滚动视图中有 15 个图像。由于每行中的数量不同，所以在绘制每一行时`UIImageViews`我都坚持分配新的！`UIImageViews`这显然对我的`UITableView`. 我该如何解决这个问题以改善`UITableView`滚动？

此外，使用 Instruments 的 Time Profiler，我注意到方法调用`[tableView dequeueReusableCellWithIdentifier:MyIdentifier]`异常缓慢。这有助于指出问题吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *MyIdentifier = @"HuddleTableCell";

HuddleListItemTableViewCell *cellToReturn = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
if (cellToReturn == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"HuddleListItemTableViewCell" owner:self options:nil];
    cellToReturn = cell;

    UILabel *badgeLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];
    badgeLabel.font = [UIFont boldSystemFontOfSize:16];
    badgeLabel.numberOfLines = 2;
    badgeLabel.textAlignment = UITextAlignmentCenter;
    badgeLabel.textColor = [UIColor whiteColor];
    badgeLabel.backgroundColor = [UIColor clearColor];
    [cellToReturn.attendee4Image addSubview:badgeLabel];
    cellToReturn.othersOverlayLabel = badgeLabel;
    [badgeLabel release];
    cellToReturn.heartHolderView.layer.cornerRadius = 5;

    cellToReturn.heartHolderView.colors = [NSArray arrayWithObjects:(id)[[UIColor colorWithRed:.29 green:.39 blue:.57 alpha:1.0] CGColor],(id)[[UIColor colorWithRed:.19 green:.22 blue:.36 alpha:1.0] CGColor], (id)[[UIColor colorWithRed:.102 green:.122 blue:.17 alpha:1.0] CGColor], nil];
    cellToReturn.heartHolderView.colors = [NSArray arrayWithObjects:(id)[UIColorFromRGB(0x4A59A8) CGColor], nil];
    cellToReturn.heartHolderView.layer.cornerRadius = 5.0;

    UIView *polaroidView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 37, 39)];
    polaroidView.layer.shadowColor = [UIColor blackColor].CGColor;
    polaroidView.layer.shadowOpacity = 0.3;
    polaroidView.layer.shadowRadius = 1;
    polaroidView.layer.shadowOffset = CGSizeMake(5.0f, 5.0f);
    polaroidView.backgroundColor = [UIColor whiteColor];
    UIImageView *img = [[UIImageView alloc] initWithFrame:CGRectMake(4, 4, 29, 29)];
    [polaroidView addSubview:img];
    [cellToReturn.organizerImage addSubview:polaroidView];
    cellToReturn.polaroidView = polaroidView;
    cellToReturn.polaroidImageView = img;
    [img release];
    [polaroidView release];

    cellToReturn.gradientView.colors = [NSArray arrayWithObjects:(id)[[UIColor whiteColor] CGColor],(id)[[UIColor colorWithRed:.96 green:.96 blue:.96 alpha:1.0] CGColor],(id)[[UIColor colorWithRed:.85 green:.85 blue:.85 alpha:1.0] CGColor], nil];

    cellToReturn.votingTimerLabel.textColor = UIColorFromRGB(0x616163);
    cellToReturn.eventDateLabel.textColor = UIColorFromRGB(0x616163);
    cellToReturn.eventNameLabel.textColor = UIColorFromRGB(0x616163);
    cellToReturn.numInviteesLabel.textColor = UIColorFromRGB(0x616163);
    cellToReturn.numVotesLabel.textColor = UIColorFromRGB(0x616163);

    self.cell = nil;
}

NSString *organizerFbId = [[self.huddleList objectAtIndex:indexPath.row]objectForKey:@"userId"];
[cellToReturn.polaroidImageView setImageWithURL:[self.organizerImageUrls objectForKey:organizerFbId] placeholderImage:self.placeholderImage];

[[cellToReturn.imageScrollViewHolder subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];
if ([self.avatarScrollViews objectForKey:[[self.huddleList objectAtIndex:indexPath.row]objectForKey:@"id"]]) {
    [cellToReturn.imageScrollViewHolder addSubview:[self.avatarScrollViews objectForKey:[[self.huddleList objectAtIndex:indexPath.row]objectForKey:@"id"]]];
} else {
    UIScrollView *tempImageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 200, 46)];
    tempImageScrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    NSArray *fbUids = [[self.huddleList objectAtIndex:indexPath.row] objectForKey:@"facebookInvitees"];
    int i=0;
    for (i=0;i < [fbUids count];i++) {
        UIView *polaroidView = [[[UIView alloc] initWithFrame:CGRectMake((i * 45) + (3 * i), 0, 37, 39)] autorelease];
        polaroidView.layer.shadowColor = [UIColor blackColor].CGColor;
        polaroidView.layer.shadowOpacity = 0.3;
        polaroidView.layer.shadowRadius = 1;
        polaroidView.layer.shadowOffset = CGSizeMake(5.0f, 5.0f);

        polaroidView.backgroundColor = [UIColor whiteColor];
        UIImageView *img = [[[UIImageView alloc] initWithFrame:CGRectMake(4, 4, 29, 29)] autorelease];
        [img setImageWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://graph.facebook.com/%@/picture", [fbUids objectAtIndex:i]]] placeholderImage:self.placeholderImage];
        [polaroidView addSubview:img];
        [tempImageScrollView addSubview:polaroidView];
    }
    [tempImageScrollView setContentSize:CGSizeMake((i*45) + (3 * i), 46)];
    [self.avatarScrollViews setObject:tempImageScrollView forKey:[[self.huddleList objectAtIndex:indexPath.row]objectForKey:@"id"]];
    [cellToReturn.imageScrollViewHolder addSubview:tempImageScrollView];
    [tempImageScrollView release];
}

return cellToReturn;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T04:50:55.180

即使每个单元格的滚动条中有固定数量的图像，当单元格出列并重用时，您也会被困在分配它们的过程中。获得速度的方法是通过将单元格的子视图保存在表格外部的数组中来占用更多空间。

创建另一个与 huddleList 数组具有相同计数的数组。用包含 imageViews 的 UIScrollViews 填充该数组。cellForRowAtIndexPath 方法中的所有代码都可以移动到新数组的初始化方法，并被几行简单的代码替换：

```
// dequeue or build a cell

// tag the scroll views so you can find them
UIScrollView *oldScrollView = (UIScrollView *)[cell viewWithTag:kCELL_SCROLL_VIEW];

// this might be a reused cell, so remove the scroll view if it has one
if (oldScrollView) [oldScrollView removeFromSuperview];

// now add the one that you setup for this cell
// your init code that used to be in this method sets up the frame, the tag, etc
UIScrollView *currentScrollView = [self.cachedScrollViews objectAtIndex:indexPath.row];
[cell addSubview:currentScrollView];

// that's it 
```

不要忘记在内存警告上释放 cachedScrollViews

# java - 如何从指针中删除对象？

> ID：10038513
> 
> 赞同：3
> 
> 时间：2012-04-06T02:37:22.510
> 
> 标签：java

我有一个添加到几个不同 ArrayLists 的对象。我想避免更改每个列表，所以我试图更改指针，以便所有列表都更改。但是如果我想将对象设置为空，我就无法让它工作。例如：

```
ArrayList<Point> list1 = new ArrayList<Point>();
ArrayList<Point> list2 = new ArrayList<Point>();
Point a = new Point(2, 3);
list1.add(a); list2.add(a); 
```

此时，两个列表都有一个指向同一个对象的项目。值为“2, 3”。如果我改变对象的值。然后两个列表都发生了变化：

```
a.set(5,5); 
```

现在两个列表都有一个值为“5, 5”的项目。但是，如果我尝试将值设置为 null。

```
a = null; 
```

现在`a`设置为null，但两个列表的对象仍然是“5, 5”而不是我想要的null。我什至尝试向`Point`该类添加一个方法以将其设置为 null。但我也无法让它发挥作用。我可以做些什么来通过仅更改指针来删除所有列表上的对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T02:39:43.733

您可以更改引用变量持有的对象的状态，这将反映在引用同一对象的所有变量中，但如果您更改引用变量的分配，它只会影响该变量。所指的对象没有改变——正如预期的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T02:49:15.153

在 Java 中，您不能从其“指针”（更准确地说是“引用”）中*删除对象。*当一个对象被取消引用（意思是：没有指向它的引用）它成为垃圾回收的候选对象；Java 的垃圾收集器会自动为您删除对象，没有`free()`像其他语言（想到 C/C++）那样您必须手动管理内存的操作。

关于您的问题：您可以使用`remove()`in 方法从两个列表中删除对象`ArrayList`，或者手动将对象设置为`null`给定索引 ( `list.set(index, null)`) 的列表中，但是无法通过设置外部引用来删除对象（那些在列表）到`null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T02:38:41.133

最简洁的答案是不'。您不能通过更改指向对象的指针来更改对象的内容。

一个=空；只是清除指针，而不是对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T03:22:00.820

正如其他人所提到的，没有简单的方法可以满足您的要求。你可以做的，我不推荐这样做，是[`WeakReference`](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html)在你的 s 中使用`List`s。弱引用不会阻止您`Point`被垃圾收集。

```
List<WeakReference<Point>> list = new ArrayList<>();
Point p = new Point();
list.add(new WeakReference<>(p));
System.out.println(p);
System.out.println(list.get(0).get());

p = null;

System.gc(); System.gc(); System.gc(); System.gc(); // hopefully the GC collects p by now

System.out.println(list.get(0).get()); // null! 
```

只需手动从您的两个`remove`s .`Point``List`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T03:42:55.237

> 我可以做些什么来通过仅更改指针来删除所有列表上的对象？

没有。你不可能那样做。如果要将列表中对对象的引用设为空（或将它们从列表中删除），则**必须**对每个列表执行操作。

如果您无法修改列表，请考虑以下替代方案：

1.  使用`Point`具有额外字段的不同类，该字段说明该点是否“有效”，并让正在查看列表的代码检查此字段。

2.  创建一个自定义类，该类表示对 Point 的可为空引用；例如

    ```
     public class PointRef {
          private Point p;
          public PointRef(Point p) { this.p = p; }
          public Point get() { return p; }
          public void invalidate() { p = null; }
      }

      ArrayList<PointRef> list1 = new ArrayList<PointRef>();
      ArrayList<PointRef> list2 = new ArrayList<PointRef>();
      PointRef a = new PointRef(new Point(2, 3));
      list1.add(a); list2.add(a);

      ...

      a.invalidate;
      // Now both lists contain hold a PointRef that points to a null Point. 
    ```

但是这两者都使得*使用*列表及其包含的 Point 对象变得更加复杂。

（@Jeffrey 的回答建议使用`WeakReference`该类，但这具有错误的语义。特别是，如果 GC 检测到没有对该对象的强引用，该引用将“中断”。这不是您的用例所要求的......如果我正确理解你的问题。）

* * *

顺便说一句，我想不出任何一种编程语言可以让你按照你建议的方式去做你想做的事情。

# macos - CD 命令无法正常工作

> ID：10038515
> 
> 赞同：0
> 
> 时间：2012-04-06T02:37:47.080
> 
> 标签：macos, cmd, prompt, cd

看下面的代码：

```
ECHO A2
MKDIR -v  /tmp/"My Batch Script File Assignment"
ECHO

ECHO A3
CD "/tmp/My Batch Script File Assignment"
PWD
ECHO 
```

谁能告诉我为什么 ECHO A3 下的 cd 命令不起作用。以下 PWD 命令报告工作目录更改为 /tmp。但我想更改为“我的批处理脚本文件分配”。任何人都知道为什么它不是东这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:56:53.730

我假设您在 OS X 上使用 bash。

与“脚本”中的其他命令不同，更改目录 (cd) 命令必须是小写的，因为它需要是 shell 内置 cd，而不是 /usr/bin/cd（其目的我不知道）。

其他命令使用全部大写“工作”，因为 OS X 上的路径和文件名不区分大小写（默认情况下），因此 shell 会在 PATH 上找到正常的小写命令并调用它们。这对 CD 不起作用。您需要使用 cd。

所以：

MKDIR 调用 /bin/mkdir (ok)
ECHO 调用 /bin/echo (ok)
PWD 调用 /bin/pwd (ok)
CD 调用 /usr/bin/cd (不行，需要使用 shell 内置 cd)

# ruby - 从 textarea 读取文本，用 ruby 修改文本，并输出修改后的文本

> ID：10038523
> 
> 赞同：2
> 
> 时间：2012-04-06T02:39:22.680
> 
> 标签：ruby, textarea, sinatra

我正在尝试创建一个简单的 sinatra 应用程序，其中一个页面包含一个文本区域，下方有一个提交按钮。下面是另一个文本区域，它显示单击提交按钮后第一个文本区域的修改文本。

Sinatra 对我来说是新的，所以这是迄今为止我能想到的最好的：

CH.erb

```
<html>
<head>
    <title>CH</title>
</head>
<body>
    <div id="main">
        <form action="" method="post">
            <textarea id="orig" rows="25" cols="150"></textarea>
            <br /><br /><br />
            <button type="submit">Submit</button>
        </form>
        <br /><br /><br />
        <textarea id="result" rows="25" cols="150"></textarea>
    </div>
</body>
</html> 
```

CH.rb

```
require 'sinatra'

get '/hi' do
  erb :CH
end

post '/hi' do
  # ????
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T04:04:08.437

将此用于您的响应路线：

```
post '/hi' do
  @result = params['orig']
  erb :CH
end 
```

并像这样修改您的视图：

```
<textarea id="result" rows="25" cols="150"><%=@result%></textarea> 
```

*我个人主张 Haml 而不是 Erb，但对每个人来说都是他/她自己的。*

# syntax - Clojure：文档语法，关于 when-let 和 if-let

> ID：10038531
> 
> 赞同：3
> 
> 时间：2012-04-06T02:40:37.203
> 
> 标签：syntax, clojure

我一直在研究 if-let 和 when-let 宏，我无法确定它们究竟“做什么”。特别是，文档说：

```
clojure.core/when-let
([bindings & body])
Macro
  bindings => binding-form test

  When test is true, evaluates body with binding-form bound to the value of test 
```

因此，我对宏的记录方式有些困惑。

1）“=>”符号是什么意思？

2）“测试”指的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T07:00:06.940

直接回答您的问题：

1.  `=>`表示“扩展到”，如 BNF 表示法。在这种情况下，这意味着您需要两种形式：绑定形式和测试。
2.  “测试”是指任何可以评估为布尔值的东西。

顺便说一句，我认为这里的文档不清楚甚至可能是错误的。很难（或不可能）推断出构成绑定的两种形式需要包含在一个向量中。恕我直言，它应该是`when-let ([[bindings] & body])`（在 args 中显示的`bindings => [binding-form test]`向量）或（在类似 BNF 的扩展中显示的向量。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T07:19:38.703

在处理宏以调用`macroexpand`并查看生成的代码是什么时，这通常很有帮助。

```
(macroexpand
    '(if-let [x (myfunc)]
       (foo x)
       (bar))

; expands to

(let* [temp__3695__auto__ (myfunc)] 
   (if temp__3695__auto__ (clojure.core/let [x temp__3695__auto__] 
     (foo x)) 
     (bar)))

; the generated symbols are necessary to avoid symbol 
; capture but can confuse. The above is equivalent to:

(let* [ t (myfunc)]
    (if t
       (let [x t]
           (foo x))
       (bar)) 
```

因此，您可以看到这`if-let`是“将局部变量绑定到函数调用的结果的简写，如果该变量是真实的，则调用第一种形式，否则调用另一种形式。函数返回的值仅在 'truthy ' 分支。”

wrt 文档约定

```
bindings => binding-form test 
```

1.  `=>`读起来像'相当于'
2.  `test`是某种返回值的形式

对于这些功能中的大多数，[clojuredocs](http://clojuredocs.org/clojure_core/clojure.core/when-let)是您的朋友，示例用法通常可以说明问题。如果 clojuredocs 示例不适合您，您可以添加自己的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T03:04:04.357

考虑以下代码：

```
(if-let [x (a-function)]
  (do-something-with x) ;; (a-function) returned a truthy result
  (do-something-else)   ;; (a-function) returned nil or false 
```

这就像`let`，在 that`x`中将绑定到 的返回值`(a-function)`。这个函数可以返回`nil`或`false`。在这种情况下，隐式测试失败`(do-something-else)`并将被评估。如果`x`is not`nil`和 not `false`，`(do-something-with x)`将被评估。

这可能有用的场景：

```
(if-let [user (find-logged-in-user)]
  (do something with logged in user) ;; a user was found
  (redirect to login page)           ;; no user was found 
```

我有时使用类似下面的东西，有条件地将键添加到选项映射中：

```
(apply merge {:username "joe"
              :email "joe@example.com"}
             (when-let [name (find-full-name)] {:name name})
             (when-let [dob (find-date-of-birth)] {:dob dob})) 
```

这会产生一个带有`:username`和`:email`键的映射，`:name`如果找到用户的全名，则生成一个`:dob`键，如果找到了出生日期，则再加上一个键。

我希望这使得使用`if-let`和`when-let`更清晰。

# optimization - 编译器优化的极限是什么？它有多聪明？

> ID：10038537
> 
> 赞同：2
> 
> 时间：2012-04-06T02:41:33.583
> 
> 标签：optimization, compiler-construction

人们一直告诉我不要写“向左移动 1 位”，而是写“乘以 2”，因为它更具可读性，并且编译将足够智能以进行优化。

编译通常会做什么，而开发人员不应该做什么（为了代码可读性）？我总是写`string.length == 0`而不是`string == ""`因为我在 5-6 年前读过，说数字运算要快得多。这仍然是真的吗？

或者，大多数编译器是否足够聪明，可以转换以下内容：

`int result = 0; for (int i = 0; i <= 100; i++) { result += i; }`

变成：`int result = 5050;`？

你最喜欢做的“优化”是什么，因为大多数编译都不会做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T02:44:50.540

算法：到目前为止，地球上没有编译器可以为您选择更好的算法。太多的人在基准测试后匆忙跳到用 C 重写的部分，当他们真的应该考虑替换他们首先使用的算法时。

# c# - 返回错误：并非所有代码路径都返回值

> ID：10038539
> 
> 赞同：1
> 
> 时间：2012-04-06T02:42:17.337
> 
> 标签：c#

我正在尝试开发一种方法来检查用户输入，如果它通过验证，**则只返回输入。**

这就是我想要做的：

1.  用户输入输入
2.  检查输入值

3.  如果输入满足逻辑，则返回该值，否则再次调用该函数。

这*确实*是我想要的，但编译器指出`not all code paths return a value`：

```
 public static int UserInput(){
   int input =  int.Parse(Console.ReadLine());
   if (input < 1 || input > 4){
       Console.Write("Invalid Selection. Enter a valid Number (1,2,3 or 4): ");
       if (input < 1 || input > 4)  UserInput();

   } else{
       return input; 
   }
} 
```

但是，这是满足编译器的以下代码。

```
 public static int UserInput()
    {
       int input =  int.Parse(Console.ReadLine());
       if (input < 1 || input > 4)
       {
           Console.Write("Invalid Selection. Enter a valid Number (1,2,3 or 4): ");

           if (input < 1 || input > 4)
           {
               UserInput();
               return -1; // Never reached, but must be put in to satisfy syntax of C#
           }
           return input; // Never reached, but must be put in to satisfy syntax of C#
       }
       else
       {
           return input;

       }
    } 
```

这种工作，但我得到奇怪的结果。如果用户在`input`第一次输入时输入 1、2、3 或 4（即`if`语句计算为`false`），则返回的输入就是用户输入的任何内容。但是，如果用户要输入一个*不是*1、2、3 或 4的值，*然后*输入一个有效数字，那么程序将执行以下操作：

1.  返回输入；
2.  跳转到子 if 语句并运行 UserInput();
3.  然后返回-1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T02:44:20.083

你需要`return UserInput();`通过它的外观。它只是看起来像一个[递归函数](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)，它将通过不断调用自身直到满足满意的约束来向下钻取并返回底部。

您正在做的是向下钻取，让它返回一个值，然后在此之上返回一个 -1。

您还通过再次检查输入来复制自己。看起来这可以归结为以下几点：

```
public static int UserInput()
{
   int input =  int.Parse(Console.ReadLine());
   if (input < 1 || input > 4)
   {
       Console.Write("Invalid Selection. Enter a valid Number (1,2,3 or 4): ");
       return UserInput();
   }
   else
       return input;
} 
```

所以，会发生的是，如果用户输入了一个无效的号码，它会再次调用自己。如果他们然后输入一个有效的数字。该方法将返回到第一个调用，该调用将获取该值并将其返回到原始调用。

下面是使用 this 的递归调用的样子：

```
CallingMethod calls UserInput(0)
-UserInput(0)
--UserInput(5)
---UserInput(2) return 2
--UserInput(5) return 2
-UserInput(0) return 2
CallingMethod receives and uses 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:45:35.373

为什么不简化为以下（不需要 else 语句或第二个 if）。还要注意，递归调用应该返回以使其正常工作：

```
public static int UserInput()
{
   int input =  int.Parse(Console.ReadLine());
   if (input < 1 || input > 4)
   {
       Console.Write("Invalid Selection. Enter a valid Number (1,2,3 or 4): ");
       return UserInput(); //<--- problem was here
   }
   return input; 
} 
```

# python - 追踪 SciPy 的 `ttest_ind()` 函数所做的假设

> ID：10038543
> 
> 赞同：8
> 
> 时间：2012-04-06T02:43:26.437
> 
> 标签：python, algorithm, statistics

我正在尝试编写自己的 Python 代码来计算一个和两个有尾独立 t 检验的 t 统计量和 p 值。我可以使用正态近似值，但目前我试图只使用 t 分布。我未能将 SciPy 统计库的结果与我的测试数据相匹配。我可以用一双新的眼睛来看看我是否只是在某个地方犯了一个愚蠢的错误。

请注意，这是[从 Cross-Validated 交叉发布的，](https://stats.stackexchange.com/questions/25940/simple-t-statistic-flub)因为它在那里已经有一段时间没有回复了，所以我认为获得一些软件开发人员的意见也无妨。我试图了解我正在使用的算法是否存在错误，它应该重现 SciPy 的结果。这是一个简单的算法，所以很奇怪为什么我找不到错误。

我的代码：

```
import numpy as np
import scipy.stats as st

def compute_t_stat(pop1,pop2):

    num1 = pop1.shape[0]; num2 = pop2.shape[0];

    # The formula for t-stat when population variances differ.
    t_stat = (np.mean(pop1) - np.mean(pop2))/np.sqrt( np.var(pop1)/num1 + np.var(pop2)/num2 )

    # ADDED: The Welch-Satterthwaite degrees of freedom.
    df = ((np.var(pop1)/num1 + np.var(pop2)/num2)**(2.0))/(   (np.var(pop1)/num1)**(2.0)/(num1-1) +  (np.var(pop2)/num2)**(2.0)/(num2-1) ) 

    # Am I computing this wrong?
    # It should just come from the CDF like this, right?
    # The extra parameter is the degrees of freedom.

    one_tailed_p_value = 1.0 - st.t.cdf(t_stat,df)
    two_tailed_p_value = 1.0 - ( st.t.cdf(np.abs(t_stat),df) - st.t.cdf(-np.abs(t_stat),df) )    

    # Computing with SciPy's built-ins
    # My results don't match theirs.
    t_ind, p_ind = st.ttest_ind(pop1, pop2)

    return t_stat, one_tailed_p_value, two_tailed_p_value, t_ind, p_ind 
```

**更新：**

在阅读了更多关于 Welch t 检验的内容后，我看到我应该使用 Welch-Satterthwaite 公式来计算自由度。我更新了上面的代码以反映这一点。

有了新的自由度，我得到了更接近的结果。我的双边 p 值与 SciPy 版本相差约 0.008 ......但这仍然是一个太大的错误，所以我仍然必须做一些不正确的事情（或者 SciPy 分布函数非常糟糕，但很难相信它们只精确到小数点后 2 位）。

**第二次更新：**

在继续尝试的同时，我认为当自由度足够高（大约 > 30）时，SciPy 的版本可能会自动计算 t 分布的正态近似值。所以我改用正态分布重新运行我的代码，计算结果实际上比我使用 t 分布时更远离 SciPy。

**奖金问题:** )（更多统计理论相关；随意忽略）

此外，t 统计量为负。我只是想知道这对单边 t 检验意味着什么。这是否通常意味着我应该在负轴方向进行测试？在我的测试数据中，人群 1 是没有接受过某种就业培训计划的对照组。人口 2 确实收到了，测量的数据是治疗前后的工资差异。

所以我有理由认为人口 2 的平均值会更大。但从统计理论的角度来看，以这种方式编造一个测试似乎并不正确。我怎么知道在不依赖对数据的主观知识的情况下检查（对于单方面的测试）？或者这只是那些虽然在哲学上不严谨但需要在实践中完成的常客事情之一？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T21:07:40.920

通过使用 SciPy 内置函数`source()`，我可以看到该函数源代码的打印输出`ttest_ind()`。根据源代码，内置 SciPy 正在执行 t 检验，假设两个样本的方差相等。它没有使用 Welch-Satterthwaite 自由度。**SciPy 假设方差相等，但没有说明这个假设。**

我只想指出，至关重要的是，**这就是为什么您不应该只信任库函数的原因。**在我的情况下，我实际上确实需要对不等方差的总体进行 t 检验，并且自由度调整对于我将运行的一些较小的数据集可能很重要。

正如我在一些评论中提到的那样，对于 30 到 400 之间的样本量，我的代码和 SciPy 之间的差异约为 0.008，然后对于更大的样本量会慢慢变为零。这是等方差 t 统计量分母中额外 (1/n1 + 1/n2) 项的影响。准确性方面，这非常重要，尤其是对于小样本量。它肯定向我证实了我需要编写自己的函数。（可能还有其他更好的 Python 库，但至少应该知道这一点。坦率地说，令人惊讶的是，这并不是 SciPy 文档中的任何位置`ttest_ind()`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T04:33:10.787

您不是在计算*样本方差*，而是在使用总体方差。样本方差除以`n-1`，而不是`n`。`np.var`有一个可选参数调用`ddof`，原因与此类似。

这应该会给您预期的结果：

```
import numpy as np
import scipy.stats as st

def compute_t_stat(pop1,pop2):

    num1 = pop1.shape[0]
    num2 = pop2.shape[0];
    var1 = np.var(pop1, ddof=1)
    var2 = np.var(pop2, ddof=1)

    # The formula for t-stat when population variances differ.
    t_stat = (np.mean(pop1) - np.mean(pop2)) / np.sqrt(var1/num1 + var2/num2)

    # ADDED: The Welch-Satterthwaite degrees of freedom.
    df = ((var1/num1 + var2/num2)**(2.0))/((var1/num1)**(2.0)/(num1-1) + (var2/num2)**(2.0)/(num2-1)) 

    # Am I computing this wrong?
    # It should just come from the CDF like this, right?
    # The extra parameter is the degrees of freedom.

    one_tailed_p_value = 1.0 - st.t.cdf(t_stat,df)
    two_tailed_p_value = 1.0 - ( st.t.cdf(np.abs(t_stat),df) - st.t.cdf(-np.abs(t_stat),df) )    

    # Computing with SciPy's built-ins
    # My results don't match theirs.
    t_ind, p_ind = st.ttest_ind(pop1, pop2)

    return t_stat, one_tailed_p_value, two_tailed_p_value, t_ind, p_ind 
```

PS：SciPy 是开源的，主要使用 Python 实现。您可以自己检查源代码`ttest_ind`并找出错误。

对于奖励方面：您**不会**通过查看 t 值来决定单尾检验的一方。你事先用你的假设来决定它。如果您的零假设是均值相等，而您的备择假设是第二个均值较大，那么您的尾巴应该在左侧（负）侧。因为您的 t 值足够小（负）值将表明备择假设更有可能为真，而不是零假设。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T03:43:35.123

看起来您忘记了 df 的分子 **2。Welch-Satterthwaite 自由度。

```
df = (np.var(pop1)/num1 + np.var(pop2)/num2)/(   (np.var(pop1)/num1)**(2.0)/(num1-1) +  (np.var(pop2)/num2)**(2.0)/(num2-1) ) 
```

应该：

```
df = (np.var(pop1)/num1 + np.var(pop2)/num2)**2/(   (np.var(pop1)/num1)**(2.0)/(num1-1) +  (np.var(pop2)/num2)**(2.0)/(num2-1) ) 
```

# c# - C# 和互联网浏览器自动化

> ID：10038546
> 
> 赞同：1
> 
> 时间：2012-04-06T02:43:47.213
> 
> 标签：c#, internet-explorer

嗨，我正在研究 Internet Explorer 自动化，这对我来说是一个新领域，我收到一个错误，类型转换没有成功，你能看到我做错了什么吗？

无法将“System.__ComObject”类型的 COM 对象转换为接口类型“mshtml.HTMLElementCollection”。此操作失败，因为 IID 为“{3050F56B-98B5-11CF-BB82-00AA00BDCE0B}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

代码是：

```
 namespace IEAutomation {
        /// <summary>
        /// Summary description for IEDriverTest.
        /// </summary>
        /// 
        using mshtml;
        using System.Threading;
        using System;
        using SHDocVw;

        using System.Collections;
        using MySql.Data.MySqlClient;
        public class IEDriverTest {
            public IEDriverTest() {
            }

            public void TestGoogle() {

                object o = null;
                SHDocVw.InternetExplorer ie = new
                SHDocVw.InternetExplorerClass();
                WebBrowser wb = (WebBrowser)ie;
                wb.Visible = true;
                //Do anything else with the window here that you wish
                wb.Navigate("https://adwords.google.co.uk/um/Logout", ref o, ref o, ref o, ref o);
                while (wb.Busy) { Thread.Sleep(100); }
                HTMLDocument document = ((HTMLDocument)wb.Document);
                IHTMLElement element = document.getElementById("Email");
                HTMLInputElementClass email = (HTMLInputElementClass)element;
                email.value = "testtestingtton@gmail.com";
                email = null;
                element = document.getElementById("Passwd");
                HTMLInputElementClass pass = (HTMLInputElementClass)element;
                pass.value = "pass";
                pass = null;
                element = document.getElementById("signIn");
                HTMLInputElementClass subm = (HTMLInputElementClass)element;
                subm.click();
                subm = null;
                while (wb.Busy) { Thread.Sleep(100); }
                wb.Navigate("https://adwords.google.co.uk/o/Targeting/Explorer?", ref o, ref o, ref o, ref o);
                while (wb.Busy) { Thread.Sleep(100); }
                string connString = "SERVER=localhost;" +
                        "DATABASE=test;" +
                        "UID=root;";

                //create your mySQL connection
                MySqlConnection cnMySQL = new MySqlConnection(connString);
                //create your mySql command object
                MySqlCommand cmdMySQL = cnMySQL.CreateCommand();
                //create your mySQL reeader object
                MySqlDataReader reader;
                //open the mySQL connection
                cnMySQL.Open();
                int j=1;
                cmdMySQL.CommandText="SELECT * FROM `emails1` WHERE `send`>'" + j + "' order by `send` asc limit 0,1";
                reader = cmdMySQL.ExecuteReader();
                reader.Read();
                j = (int) reader.GetValue(1);
                HTMLElementCollection col = default(HTMLElementCollection);
                document = ((HTMLDocument)wb.Document);
                col = (HTMLElementCollection)document.getElementsByTagName("textarea");
               //the error happens here in this typecast

                Console.WriteLine(j);
            wb.Quit();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:30:36.653

尝试转换为一个`IHTMLElementCollection`。

```
col = (IHTMLElementCollection)document.getElementsByTagName("textarea"); 
```

或将 col 声明为 IHTMLElementCollection

```
IHTMLElementCollection col = document.getElementsByTagName("textarea"); 
```

# android - Android：如何记录击键？

> ID：10038561
> 
> 赞同：1
> 
> 时间：2012-04-06T02:46:38.150
> 
> 标签：android, android-softkeyboard, keystroke

我想制作一个可以从用户那里学习和保存新单词的智能键盘。我已经分别做了笔记和键盘，问题是：

1.  如何在后台读取所有击键并将其写入我的笔记？

2.  如何自动保存我的笔记？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:15:57.393

保留一个 String 或 StringBuilder 来存储用户键入的所有文本。通过软键盘发送的所有文本都必须通过 onKey 方法。

所以，我会做这样的事情：1）在onKey中，检查以确保primaryCode（按下的键码）是使用相应函数的字母/数字/撇号。所以，像

> Character.isDefined(primaryCode)

2) 将 primaryCode 连接到 StringBuilder/String 的末尾。

您还必须处理移动光标/退格的用户。在我的键盘中，我只存储最近的两个单词（每当用户移动光标时重置它）。这样，键盘就可以知道最后一个词给出的最有可能的词是什么。

您可以使用 ObjectOutputStream 或（如果它相当小）使用 sharedPreferences 保存您的“注释”。

如果您遇到更多问题，请给我发送电子邮件：我一直在编写软键盘，所以我对它非常熟悉。

# asp.net - 使用字节数组c#/asp.net创建PDF文件

> ID：10038563
> 
> 赞同：1
> 
> 时间：2012-04-06T02:47:05.043
> 
> 标签：asp.net, pdf-generation

谁能告诉我如何使用字节数组创建 PDF 文件？我尝试了这两种方法，但没有运气。

```
1) System.IO.File.WriteAllBytes(filePath, bytesArray);
2) using (System.IO.Stream stream = new System.IO.FileStream(filePath, System.IO.FileMode.Create))
   {
     stream.Write(bytesArray, 0, bytesArray.Length);
   } 
```

或者我需要使用任何 3rd 方组件来做同样的事情。

任何帮助将不胜感激......提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:00:39.330

你可以尝试这样的事情 -*未经测试*

```
Response.Clear();
    Response.ContentType = "application/pdf";
    Response.AppendHeader("Content-Disposition", "inline;filename=data.pdf");
Response.BufferOutput = true; byte[] pdf; Response.AddHeader("Content-Length", response.Length.ToString());
 Response.BinaryWrite(pdf);
 Response.End(); 
```

# java - JSP 导入的类实现不喜欢类型

> ID：10038564
> 
> 赞同：0
> 
> 时间：2012-04-06T02:47:31.410
> 
> 标签：java, jsp, tomcat, noclassdeffounderror

当我在网络服务器上有我的 jsp 文件时出现异常，它显示以下内容：

```
 type Exception report

    message 

    description The server encountered an internal error () that prevented it from fulfilling this request.

    exception 

    org.apache.jasper.JasperException: Unable to compile class for JSP: 

    An error occurred at line: 6 in the generated java file
    Only a type can be imported. edu.byu.isys413.data.Customer resolves to a package

    An error occurred at line: 124 in the jsp file: /account.jsp
    Customer cannot be resolved to a type
    121:                                         <tr valign=top>
    122:                                             <td height=19></td>
    123:                                             <% if (session.getAttribute("customer") != null) {
    124:                                                     Customer c = (Customer) session.getAttribute("customer");%>
    125:                                             <td align="center"><%="Welcome " +      c.getFirstName() + "!"%></td>
    126:                                             <% }%>
    127:                                             <td height=19></td>

    An error occurred at line: 124 in the jsp file: /account.jsp
    Customer cannot be resolved to a type
    121:                                         <tr valign=top>
    122:                                             <td height=19></td>
    123:                                             <% if (session.getAttribute("customer") != null) {
    124:                                                     Customer c = (Customer) session.getAttribute("customer");%>
    125:                                             <td align="center"><%="Welcome " + c.getFirstName() + "!"%></td>
    126:                                             <% }%>
    127:                                             <td height=19></td>

    Stacktrace:
    org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:439)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:356)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:321)
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

jsp页面看起来像

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01             Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
         <%@ page import="edu.Customer" %>
 <% if (session.getAttribute("customer") != null) {
                                                Customer c = (Customer)    session.getAttribute("customer");%>
 <td align="center"><%="Welcome " + c.getFirstName() + "!"%></td>
                                        <% }%> 
```

我知道很多人在这里发布了同样的问题，但我肯定 Customer.java 在 /WEB-INF/classes/edu/Customer.java 下。那么这里还有其他配置问题吗？我正在使用连接到 tomcat 的 IIS。我可以访问该文件，但我无法编译 JSP。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T02:49:38.167

> *我当然确定 Customer.java 在 /WEB-INF/classes/edu/Customer.java 下。*

您需要编译的类文件而不是原始 Java 源文件。所以，你必须有一个`/WEB-INF/classes/edu/Customer.class`.

您可以使用`javac`将 Java 源文件编译为类文件。或者，当您已经很好地掌握了手动构建/编译 Java 项目并很好地理解了“类路径”现象时，可以考虑使用 Eclipse、IntelliJ 或 Netbeans 等 IDE。然后 IDE 会自动为您完成这一切。

# java - 为 Eclipse Text 控件实现“选择焦点”行为

> ID：10038570
> 
> 赞同：1
> 
> 时间：2012-04-06T02:48:47.807
> 
> 标签：java, eclipse, textbox, swt, eclipse-3.6

### 目标

我正在尝试为 Eclipse[`Text`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FText.html)控件实现“选择焦点”行为：

*   当控件**已经**聚焦时：

    *   单击和拖动行为正常

*   当控件**没有**聚焦时：

    *   单击并拖动以选择文本行为正常

    *   单击而不选择文本将选择所有文本

    *   使用键盘给予焦点将选择所有文本

### 问题

*   通过鼠标单击聚焦时，仅选择所有文本`SWT.FocusIn`不会选择文本。

*   `SWT.FocusIn`***之前*** 被触发`SWT.MouseDown`，因此当用户按下鼠标时，无法判断控件是否已经获得焦点。

### 问题

1.  为什么 Eclipse 按该顺序触发事件？这对我来说没有任何意义。这是对某些支持的操作系统的限制吗？

2.  是否有一些解决方法可以用来实现此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T20:28:07.440

#eclipse 中有人将我链接到很久以前提出的一个 Eclipse 错误：[Can't use focus listener to select all text](https://bugs.eclipse.org/bugs/show_bug.cgi?id=46059)

使用那里的建议之一，我想出了以下解决方案（在 Windows 中有效，在其他平台上未经测试）：

```
/**
 * This method adds select-on-focus functionality to a {@link Text} component.
 * 
 * Specific behavior:
 *  - when the Text is already focused -> normal behavior
 *  - when the Text is not focused:
 *    -> focus by keyboard -> select all text
 *    -> focus by mouse click -> select all text unless user manually selects text
 * 
 * @param text
 */
public static void addSelectOnFocusToText(Text text) {
  Listener listener = new Listener() {

    private boolean hasFocus = false;
    private boolean hadFocusOnMousedown = false;

    @Override
    public void handleEvent(Event e) {
      switch(e.type) {
        case SWT.FocusIn: {
          Text t = (Text) e.widget;

          // Covers the case where the user focuses by keyboard.
          t.selectAll();

          // The case where the user focuses by mouse click is special because Eclipse,
          // for some reason, fires SWT.FocusIn before SWT.MouseDown, and on mouse down
          // it cancels the selection. So we set a variable to keep track of whether the
          // control is focused (can't rely on isFocusControl() because sometimes it's wrong),
          // and we make it asynchronous so it will get set AFTER SWT.MouseDown is fired.
          t.getDisplay().asyncExec(new Runnable() {
            @Override
            public void run() {
              hasFocus = true;
            }
          });

          break;
        }
        case SWT.FocusOut: {
          hasFocus = false;
          ((Text) e.widget).clearSelection();

          break;
        }
        case SWT.MouseDown: {
          // Set the variable which is used in SWT.MouseUp.
          hadFocusOnMousedown = hasFocus;

          break;
        }
        case SWT.MouseUp: {
          Text t = (Text) e.widget;
          if(t.getSelectionCount() == 0 && !hadFocusOnMousedown) {
            ((Text) e.widget).selectAll();
          }

          break;
        }
      }
    }

  };

  text.addListener(SWT.FocusIn, listener);
  text.addListener(SWT.FocusOut, listener);
  text.addListener(SWT.MouseDown, listener);
  text.addListener(SWT.MouseUp, listener);
} 
```

# ruby - 什么是正确的正则表达式来读取固定大小的 fron 文件中的前几个字节并从 ruby 中的第一个正则表达式 (.*) 部分读取剩余字节？

> ID：10038572
> 
> 赞同：0
> 
> 时间：2012-04-06T02:49:22.440
> 
> 标签：ruby, regex, file, byte

我正在使用 ruby​​ 读取一个文件，其中我在代码中编写了正则表达式，如下所示，假设它将从文件中读取前 4 个字节，接下来的四个字节，接下来的四个字节，文件中的其余字节，除了文件中的最后 8 个字节。现在我正在尝试使用以下代码从这些可变大小数据（。*）中进一步拆分字节。这是正确的方法吗？我得到了结果，但仍然不确定它们是否正确。

这是首先扫描第一个正则表达式的剩余星号部分内容`do..end`然后再次扫描第二个`do..end`正则表达式中剩余字节的正确方法吗？

```
File.open(filename,'rb') do |file|
file.read.scan(/(.{4})(.{4})(.{4})(.*)(.{8})/m).each do |a,b,c,d,e|
   puts "\Content 1:#{a}\n\n"
   b1 = b.unpack("N")
   puts "\n\nContent 2:\n#{b1}\n\n"
   puts "\n\nContent 3:\n#{c.unpack("N")}\n\n"
          d.scan(/(.{4})(.{4})(.{4})(.*)/).each do |p,q,r,s|
              puts "\n\nPContent 4:\n#{p.unpack("N")}\t"
              puts "Content 5\n:#{q.unpack("e")}\t"
              puts "Content 6:\n#{r.unpack("e")}\t"
              s.scan(/(.{4})(.{4})(.{4})(.{4})(.{4})(.{4})(.{4})(.{4})(.{4})(.{4})(.*)/).each do |f,g,h,i,j,k,l,m,n,o,p|
                  puts "Content 7:#{f.unpack("e")}"
                  puts "Content 8:#{g.unpack("B")}"
                  puts "Content 9:#{h.unpack("B")}"
                  puts "Content 10:#{i.unpack("B")}"
                  puts "Content 11:#{j.unpack("e")}"
                  puts "Content 12:#{k.unpack("e")}"
                  puts "Content 13:#{l.unpack("e")}"
                  puts "Content 14:#{m.unpack("B")}"
                  puts "Content 15:#{n.unpack("B")}"
                  puts "Content 16:\t#{o}#{p}"
              end
          end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:37:04.510

对我来说看上去很好。

一个建议是使用 \A 和 \z 将您的扫描锚定在字符串的开头和结尾

```
/\A...\z/ 
```

在我看来，这可以更容易地快速查看您想要匹配整个字符串，而不是使用 #scan 来迭代匹配项。它也可能执行得更快。

# windbg - 如何在windbg中检查特定调用堆栈帧上的寄存器值

> ID：10038573
> 
> 赞同：10
> 
> 时间：2012-04-06T02:49:28.433
> 
> 标签：windbg, callstack

我正在调查 WinDBG 中的 Windows 转储文件。我可以通过命令 .frame 切换调用堆栈帧，但我发现寄存器总是包含最后一个上下文。我的意思是，是否可以恢复属于特定调用堆栈帧但不是顶部的上下文？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T10:42:12.383

如果您正在调试 x64 目标，则可以使用：

```
.frame /r 
```

查看框架中的寄存器。此信息基于图像中的展开数据，因此非常可靠。您还可以使用以下方法更改上下文：

```
.frame /c 
```

在 x86 上，没有展开信息，所以这个技巧不起作用。.frame 仍会为您显示寄存器的某些内容，但它不太可能是正确的（基本上只能靠运气才能正确）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T15:46:33.203

尝试 findthis.py，这是一种通过反汇编调用堆栈中每个帧的序言来获取 CFI（调用帧信息）的方法。

[http://nick.luckygarden.org/find-this-ptr-within-a-callstack-in-a-dump-file/](http://nick.luckygarden.org/find-this-ptr-within-a-callstack-in-a-dump-file/)

# linux - linux中socket()函数实现的位置

> ID：10038574
> 
> 赞同：4
> 
> 时间：2012-04-06T02:49:30.273
> 
> 标签：linux, sockets

在 Linux 中，要创建套接字，我们包含 sys/socket.h 头文件并使用 socket() 函数。头文件位于 /usr/include/sys/socket.h。

```
extern int socket (int __domain, int __type, int __protocol) __THROW; 
```

谁能告诉 socket() 函数实际实现的位置。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T02:59:09.950

实际上， `int socket (int __domain, int __type, int __protocol) __THROW`

在 glibc 中实现，

[glibc 调用内核文件net/socket.c](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/net/socket.c?v=2.6.25.8)中实现的内核函数 sys_socket 。

```
asmlinkage long sys_socket(int family, int type, int protocol); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:39:36.350

[socket(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/socket.2.html)是一个[系统调用](http://en.wikipedia.org/wiki/System_call)。*Glibc*中的`socket`函数只是进行真正系统调用的一个小包装器。

 *从应用程序的角度来看，系统调用是*原子*的；换句话说，运行 Linux 应用程序的虚拟机是*x86*机器（非特权指令集），内核提供了 300 多个系统调用。另请参阅[Assembly Howto](http://tldp.org/HOWTO/Assembly-HOWTO/)，它解释了如何对系统调用进行编码。阅读有关[linux 内核](http://en.wikipedia.org/wiki/Linux_kernel)以及[syscalls(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)和[intro(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/intro.2.html)手册页的更多信息。

关于套接字的真正工作是在内核内部完成的，它是网络子系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T03:30:19.257

这是 => [socket.c](http://sourceware.org/git/?p=glibc.git;a=blob;f=socket/socket.c;h=273924a05c2beae4df1fbba415593fcb9be70272;hb=HEAD)。

通常大多数套接字函数，包括这个函数，只是系统调用（直接调用内核）的包装器，因此它都是由全能的内核自己处理的。

这是内核的实现：[SYSCALL_DEFINE3(socket, int, family, int, type, int, protocol){...}](http://www.koders.com/c/fid40497F7C1025CC6DC835CC1627C1910C44264CB9.aspx?s=%22sys_socket%22#L1266)*

# actionscript-3 - 奇怪的旋转值

> ID：10038577
> 
> 赞同：0
> 
> 时间：2012-04-06T02:49:49.040
> 
> 标签：actionscript-3, rotation, trigonometry

我得到了一个物体（称为 tempEnemy），它飞来飞去并射击。问题是我不能保持值 tempEnemy.rotateTo 为正值，即它应该在 0 到 359 度之间。目前 rotateTo 的范围为：rotateTo < 0 (bug) && rotateTo > 0 && rotateTo > 359 (bug)。

```
tempEnemy.dX = tempEnemy.destX - tempEnemy.x;
tempEnemy.dY = tempEnemy.destY - tempEnemy.y;

//I added 180 because my tempEnemy object was looking and shooting to the wrong direction
tempEnemy.rotateTo = (toDegrees(getRadians(tempEnemy.dX, tempEnemy.dY))) + 180; 

if (tempEnemy.rotateTo > tempEnemy.frame + 180) tempEnemy.rotateTo -= 360;
if (tempEnemy.rotateTo < tempEnemy.frame - 180) tempEnemy.rotateTo += 360;

tempEnemy.incFrame = int((tempEnemy.rotateTo - tempEnemy.frame) / tempEnemy.rotateSpeed); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:21:27.290

您始终可以使用模运算符 ( `%`) 来保持正值。该模块计算除法的其余部分。

例如（示例适用于整数，除法总是有剩余。）

```
19 % 5 = 4 
```

因为在数字 19 中，5 只适合 3 次（`3 * 5 = 15`,, `4 * 5 = 20`,, 20 太高了），剩下的是 4（`19 - 15`）。那是模数。

额外的例子：

```
7 % 3 = 1
15 % 4 = 3
21 % 9 = 3 
```

模运算的输出永远不会高于右手运算符 - 1 因为它非常适合您的问题。

如果您的对象旋转 1234 度，则使用模 360 对其进行运算，以获得 0 到 360 之间的相应数字。

```
1234 % 360 = 154 
```

其他更简单的例子：

```
720 % 360 = 0
360 % 360 = 0
540 % 360 = 180
-180 % 360 = 180
-720 % 360 = 0
-540 % 360 = 180 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T04:46:08.130

听起来像是一个经典的角度平均问题。这是一个适用于平均角度的公式

```
private function averageNums($a:Number, $b:Number):Number {
    return  = (Math.atan2( Math.sin($a) + Math.sin($b) , Math.cos($a) + Math.cos($b) ));
} 
```

# c# - 使用 Visual Studio 在我的本地计算机上设置测试环境

> ID：10038578
> 
> 赞同：0
> 
> 时间：2012-04-06T02:50:06.760
> 
> 标签：c#, .net, database, visual-studio

使用 Visual Studio 2008 在我的本地计算机上设置测试环境的最简单方法是什么，该网站具有通过 webhost 托管的 mssql 数据库？

我是网页设计师，我正在重新设计一个使用 .NET C# 构建的实时网站。我可以访问这些文件，当我在 Visual Studio (localhost) 中运行它时，显然只有静态文件被拉起，这对于测试来说是有问题的。我需要能够在本地运行整个网站。我根本不会弄乱数据库，但我知道我需要它才能拥有一个有效的本地副本。我对这些类型的事情不是很精通。我希望有人能指出我正确的方向（即搜索词、关键字），或者给我一些关于如何完成这项工作的说明。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:00:13.437

您应该首先设置 MSSQL 服务器。您可以使用从生产数据库中进行备份

```
RMC on DB -> Tasks -> Backup.. 
```

然后使用本地服务器上生成的 .bak 文件将数据库的副本插入到 SQL Server 实例中，如下所示：

```
RMC on Databases -> Restore Database -> Path to your backup.. 
```

在这一步，您的实例应该包含包含所有表和数据的数据库。接下来要做的是根据您的实例更改您的 web.config 文件连接字符串（或任何其他地方，其中“连接字符串”设置为将网站指向数据库）。如果是 MSSQLSERVER 实例名称，您可以使用以下连接字符串：

```
Data Source=(local);Initial Catalog=<database name>;Integrated Security=True; 
```

在此编译和运行您的源代码之后，应该会完整地返回您的站点。

# javascript - 道场查询子孙？

> ID：10038580
> 
> 赞同：1
> 
> 时间：2012-04-06T02:50:57.023
> 
> 标签：javascript, dojo

我的代码：

```
var parent = document.createElement('div');
var pen = document.createElement('div');
var dog = document.createElement('div');
dog.className = "dog";
pen.appendChild(dog);
parent.appendChild(pen);
dojo.query("> *", parent).forEach( function(node){
    if(node.className == "dog")alert('bark');
});
dojo.query("> .dog", parent).forEach( function(node){
    alert('bark');
}); 
```

我没有收到警报“吠叫”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:21:16.620

您的问题是生成的 html 与选择器不匹配：

```
<div title="parent">
    <div title="pen">
        <div class="dog">
        </div>
    </div>
</div> 
```

因为`> *`只会匹配`pen`，`> .dog`不会匹配。您可以将这些更改为：

```
var parent = document.createElement('div');
var pen = document.createElement('div');
var dog = document.createElement('div');
dog.className = "dog";
pen.appendChild(dog);
parent.appendChild(pen);
dojo.query("> * > *", parent).forEach(function (node) {
    if (node.className == "dog") {
        alert('bark');
    }
});
dojo.query("> * > .dog", parent).forEach(function (node) {
    alert('bark');
}); 
```

这是一个小提琴：http: [//jsfiddle.net/pTqmL/](http://jsfiddle.net/pTqmL/)

**编辑**

或者，如果它只需要在内部`parent`：

```
dojo.query("*", parent).forEach(function (node) {
    if (node.className == "dog") {
        alert('bark');
    }
});
dojo.query(".dog", parent).forEach(function (node) {
    alert('bark');
}); 
```

根据您的评论，我认为您可能忽略/不知道的核心问题是查询的范围在父级内部。

# php - 查询构建器加入多对多关系

> ID：10038581
> 
> 赞同：22
> 
> 时间：2012-04-06T02:50:58.727
> 
> 标签：php, symfony, doctrine-orm

我正在尝试使用查询生成器来选择属于某个特定`superCategory`（`category`并且`superCategory`具有多对多关系）的所有类别。

但是，我无法构建正确的查询构建器语句，因为我不知道如何引用`superCategory`from my ，因为我的类别 ID`category`中没有字段。`superCategory`

数据库中的对象如下所示：

```
Category:
  id
  name

SuperCategory
  id
  name

categories_superCategories
  id
  category_id
  superCategory_id 
```

这是我的对象（yml 文件）的定义：

```
YOP\YourOwnPoetBundle\Entity\TraitCategory:
  type: entity
  repositoryClass: YOP\YourOwnPoetBundle\Repository\TraitCategoryRepository
  table: null
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    name:
      type: string
      length: '255'
  lifecycleCallbacks: {  }
  manyToMany:
    superCategories:
      targetEntity: SuperCategory
      joinTable:
        name: traitCategories_superCategories
        joinColumns:
          traitCategory_id:
            referencedColumnName: id
        inverseJoinColumns:
          superCategory_id:
            referencedColumnName: id 
```

和

```
YOP\YourOwnPoetBundle\Entity\SuperCategory:
  type: entity
  repositoryClass: YOP\YourOwnPoetBundle\Repository\SuperCategoryRepository
  table: null
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    name:
      type: string
      length: '255'
  lifecycleCallbacks: {  }
  manyToMany:
    msgCategories:
      targetEntity: MsgCategory
      mappedBy: superCategories
    traitCategories:
      targetEntity: TraitCategory
      mappedBy: superCategories 
```

我将如何构建一个查询构建器语句来获取属于某个特定的类别`superCategory`？

我里面的查询`CategoryRepository`：

```
$this->createQueryBuilder('c')
            ->innerJoin( ?????? )
            ->setParameter('superCategoryName', $superCategoryName); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-08T07:04:31.240

知道了 ：

```
public function findBySuperCategoryName($superCategoryName)
{
    return $this->createQueryBuilder('c')
            ->innerJoin('c.superCategories', 's', 'WITH', 's.name = :superCategoryName')
            ->setParameter('superCategoryName', $superCategoryName);
} 
```

问题是我不得不要求 c.superCategories 而不是 c.superCategory ！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T08:22:59.157

就像是：

```
$this->createQueryBuilder()
        ->select('s')
        ->from('SuperCategory', 's')
        ->innerJoin('s.Category c ON c.category_id = s.superCategory_id')
        ->where('s.name = :superCategoryName')
        ->setParameter('superCategoryName', $superCategoryName)
        ->getQuery()
        ->getResult(); 
```

# arrays - 从 ColdFusion 中的多个列表中获取所有可能的唯一值组合

> ID：10038582
> 
> 赞同：2
> 
> 时间：2012-04-06T02:51:04.470
> 
> 标签：arrays, list, coldfusion

这是那些看起来应该很容易的 ColdFusion 事情之一......但我没有找到简单的路径。

我有一个列表数组。数组可以是任意大小，每个列表的长度可以是任意大小。（这可以被操纵成一个多维数组，无论如何......重点是，我有一个列表列表）

例如

1.  129,128,127

2.  130,131,132

3.  135,133,134

4.  137,138,136

5.  140,139

6.  141,142

或者一个简短的版本......它可能会有所不同

1.  13,14,15

2.  11,12

我需要的是一个数组、查询或其他包含所有可能唯一组合的数据结构，按顺序从每个列表中取一个......所以对于简短版本，将有 6 个唯一组合。对于第一个较长的示例，我们将有 3*3*3*3*2*2 = 324 个唯一组合。

计算它们很容易......但是以结构化格式获得实际组合的最佳方法是什么？一定缺少一些简单的东西......我已经很接近几个小时了！：-/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T12:49:29.463

这是我的看法。[归功于codingforums.com上这篇文章中的php函数：http: //www.codingforums.com/showpost.php?](http://www.codingforums.com/showpost.php?p=945289&postcount=3) p= 945289&postcount =3 我刚刚想出了如何在cfml中重新编写它。

```
<cfscript>
public array function array_cartesian_product(_arrays=[]) {
    var result = [];
    var _arrayslen = arraylen(arguments._arrays);
    var _size = (_arrayslen) ? 1 : 0;
    var _array = '';
    var x = 0;
    var i = 0;
    var j = 0;
    var _current = [];

    for (x=1; x lte _arrayslen; x++) {
        _size = _size * arraylen(arguments._arrays[x]);
        _current[x] = 1;
    }

    for (i=1; i lte _size; i++) {
        result[i] = [];

        for (j=1; j lte _arrayslen; j++) {
            arrayappend(result[i], arguments._arrays[j][_current[j]]);
        }

        for (j=_arrayslen; j gt 0; j--) {
            if (arraylen(arguments._arrays[j]) gt _current[j])  {
                _current[j]++;
                break;
            }
            else {
                _current[j] = 1;
            }
        }

    }

    return result;
}
</cfscript>
<cfset arrays = [[129,128,127],[130,131,132],[135,133,134],[137,138,136],[140,139],[141,142]]>
<cfset r = array_cartesian_product(arrays)>
<cfoutput>#arraylen(r)#</cfoutput>
<cfdump var="#r#"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:27:00.673

像这样的东西应该工作。循环遍历第一个列表中的每个项目，并与列表 2 和 3 中的每个项目进行组合，然后检查以确保其不在已知列表中，如果没有，则将其添加到组合列表中。

```
<cfset list1 = "1,2,3" />
<cfset list2 = "4,5,6" />
<cfset list3 = "7,8,9,1" />

<cfset combinations = [] />

<cfloop list="#list1#" index="i">
  <cfif not arrayFind(combinations,i)>
    <cfset arrayAppend(combinations,i) />
  </cfif>
  <cfloop list="#list2#" index="y">
    <cfif not arrayFind(combinations,y)>
      <cfset arrayAppend(combinations,y) />
    </cfif>
    <cfif not arrayFind(combinations, "#i#,#y#")>
      <cfset arrayAppend(combinations,"#i#,#y#") />
    </cfif>
    <cfloop list="#list3#" index="z">
       <cfif not arrayFind(combinations,z)>
         <cfset arrayAppend(combinations,z) />
       </cfif>
       <cfif not arrayFind(combinations, "#i#,#y#,#z#")>
         <cfset arrayAppend(combinations,"#i#,#y#,#z#") />
      </cfif>
    </cfloop>
  </cfloop>
</cfloop>

<cfdump var="#combinations#" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:25:35.843

好的，所以您需要遍历列表数组。在每次迭代中，您需要针对每个剩余列表遍历该位置的列表。

所以在位置一迭代 2 3 4 5 6 在位置二迭代 3 4 5 6 依此类推

# java - 使用二维数组递归检查井字游戏中的获胜者？

> ID：10038585
> 
> 赞同：-2
> 
> 时间：2012-04-06T02:51:37.400
> 
> 标签：java, recursion, multidimensional-array

我正在用 Java 制作井字游戏，我需要使用二维数组并使用递归来检查是否有赢家。

我觉得我可以轻松地对获胜者进行非递归检查，但是如果我要使用递归来做这件事，我不知道从哪里开始，因为我对递归非常陌生。有人可以指导我从哪里开始这种算法的过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:04:46.097

我同意为此使用递归似乎有点强迫。然而，一个想法是基于胜利的定义：在任何方向连续三个 X 或 O。首先选择一个潜在的起点（除了中间的任何地方，它不能开始一个 3 方格的行），然后选择一个可能有效的方向。（可能起作用的方向集是起始正方形的函数。）递归步骤是：如果您需要在特定方向上的一行中的*n*，例如 X，并且当前位置有一个 X，则取朝那个方向迈出一步，然后从那里开始朝那个方向连续寻找 ( *n - 1)。**当n* = 0时停止。为每个起点和方向执行整个过程，直到找到胜利或用完所有选择。

我认为，这足以让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:23:56.530

假设您的电路板看起来像：

```
 |            |
 cell[0][0] | cell[1][0] | cell[2][0]
            |            |
------------+------------+------------
            |            |
 cell[0][1] | cell[1][1] | cell[2][1]
            |            |
------------+------------+------------
            |            |
 cell[0][2] | cell[1][2] | cell[2][2]
            |            | 
```

一种方法是简单地递归检查相邻的单元格（在一个方向上）。例如（伪代码）：

```
def checkSame (val, cellX, cellY. deltaX, deltaY):
    # No winner if check value is empty.

    if val == empty: return false

    # Winner if we've gone off edge. No need to worry about < 0
    # since one direction is always ascending but I've left it
    # in anyway.

    if cellX > 2 or cellY > 2: return true
    if cellX < 0 or cellY < 0: return true

    # No winner if piece has changed.

    if cell[cellX][cellY] != val: return false

    # Otherwise use recursion to check next one.

    return checkSame (val, cellX + deltaX, cellY + deltaY, deltaX, deltaY) 
```

然后，我们只需要检查八个可能的起点/方向值：

```
# Check rows.

if checkSame (cell[0][0], 0, 0, 1, 0): return true
if checkSame (cell[0][1], 0, 1, 1, 0): return true
if checkSame (cell[0][2], 0, 2, 1, 0): return true

# Check columns.

if checkSame (cell[0][0], 0, 0, 0, 1): return true
if checkSame (cell[1][0], 1, 0, 0, 1): return true
if checkSame (cell[2][0], 2, 0, 0, 1): return true

# Check diagonals.

if checkSame (cell[0][0], 0, 0, 1, 1): return true
return checkSame (cell[0][2], 0, 2, 1, -1) 
```

现在，当然，这是对递归的相当有限（和人为）的使用，但是正如您所说，无论如何，这并不是真正适合递归的情况。`if`如果您不打算将其扩展到超过标准的 3x3 tic-tac-toe，则使用八个语句要好得多。

# c# - 如何将单个项目添加到 observablecollection

> ID：10038589
> 
> 赞同：0
> 
> 时间：2012-04-06T02:52:57.963
> 
> 标签：c#, windows-phone-7, observablecollection

我无法使用 ObservableCollection 的 Add 方法在单击事件时简单地将新字符串值添加到 observablecollection。我在 Settings.cs 类中创建我的 ObservableCollection，然后在我的 wp7.1 项目的多个页面中引用该 observablecollection。当我需要将一个 observablecollection 的多个项目添加到另一个时，该系统非常有效，或者将一个设置为另一个，或者使用 .Union，具体取决于所需的目的。不过，在这种情况下，我试图将单个字符串项添加到我的字符串类型的 ObservableCollection 中。我的代码如下

设置.cs

```
public static Setting<ObservableCollection<string>> Favorites = new Setting<ObservableCollection<string>>("Favorites", null); 
```

收藏夹.xaml

```
<ListBox x:Name="FavoritesListBox" Grid.Row="1" ItemsSource="{Binding}" Margin="12,0,12,0"
             SelectionChanged="FavoritesListBox_SelectionChanged"> 
```

收藏夹页面.xaml.cs

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        string favorUrl = null;
        NavigationContext.QueryString.TryGetValue("curUrl", out favorUrl);
        if (favorUrl != null )
        {
            //This works but the FavoritesListBox items are cleared upon new page navigation or closing
            //this.FavoritesListBox.Items.Add(favorUrl);

            //This does not work!?
            //if (Settings.Favorites.Value == null)
            //{
            //    //Settings.Favorites.Value.Add(favorUrl);
            //}
            //else
            //{
            //    Settings.Favorites.Value.Add(favorUrl);
            //}                     
        }

        //base.OnNavigatedTo(e);
    }

private void FavoritesListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        this.NavigationService.Navigate(new Uri("/MainPage.xaml?favUrl=" + e.AddedItems[0], UriKind.Relative));
    } 
```

在FavoritesPage.xaml.cs 中使用.Add 方法不会给我任何编码错误，但是在调试时我得到一个NullReferenceException。我也尝试使用 .Insert ，但也没有用。请帮助这似乎是一个简单的解决方案，但我无法弄清楚这一点！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:02:18.083

`null`在确认它是之后，您正在引用一个对象`null`！

```
if (Settings.Favorites.Value == null)
{
  Settings.Favorites.Value.Add(favorUrl);  // throws NullReferenceException 
                                           // because Value is null
} 
```

你需要这样做：

```
if (Settings.Favorites.Value == null)
{
  Settings.Favorites.Value = new ObservableCollection<string>();
}
Settings.Favorites.Value.Add(favorUrl); 
```

或者，您可以将初始化从

```
public static Setting<ObservableCollection<string>> Favorites = 
    new Setting<ObservableCollection<string>>("Favorites", null); 
```

到

```
public static Setting<ObservableCollection<string>> Favorites = 
    new Setting<ObservableCollection<string>>("Favorites", 
      new ObservableCollection<string>()); 
```

这样你就可以避免`null`检查。

# grails - Grails Spring Security 插件图像访问控制

> ID：10038591
> 
> 赞同：0
> 
> 时间：2012-04-06T02:53:16.210
> 
> 标签：grails, spring-security

我正在尝试制作一个在线照片库，用户可以将图像从他们的移动设备（如 Android）上传到服务器并可以访问它。目前我正在使用带有 Spring Security Plugin Core 的 Grails，并将所有上传的图像保存在 /web-app/uploaded-image 的文件夹中。上传部分目前正在工作，我可以将图像从我的设备上传到服务器上传的图像文件夹。但是，我的一个问题是，目前我在 Config.groovy 中使用这些行来执行访问控制部分

```
grails.plugins.springsecurity.interceptUrlMap = [
/uploaded_image/**':['IS_AUTHENTICATED_REMEMBERED']
] 
```

我计划让控制器将图像的路径与称为图像的 DomainClass 相关联，该图像将与每个用户的 DomainClass 相关联。我的问题是，我如何才能使不是图像所有者的用户无权查看图像？我尝试在谷歌搜索答案并没有找到很多有用的答案。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:49:36.187

首先，将图像上传到分解的 WAR 路径是一个坏主意。当您必须部署更新时会发生什么？最好将图像完全存储在 WAR 结构之外。

其次，我用几种不同的方式处理了这个问题。

*   通过 Grails 控制器将图像流回。这样您就可以直接访问图像请求并处理您想要的任何类型的安全性，包括检查角色等。

非常简单的版本，不考虑缓存、响应标头等：

```
def avatarFilePath = new File(userInstance.avatarURL)
response.setContentType("application/png")
response.setContentLength(avatarFilePath.size().toInteger())
OutputStream out = response.getOutputStream();
out.write(avatarFilePath.bytes);
out.close(); 
```

*   将图像存储在某个内容存储库（可能是 AmazonS3）中，然后通过提供程序 API 控制权限，或者让您自己的控制器管理安全性，然后通过提供程序进行适当的重定向。

*   在您的 Tomcat/Container 前面使用 Apache，并让 Apache 处理将图像流回的所有细节。但是，我不确定在这种情况下如何处理安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T20:36:03.137

您可以使用以下逻辑来确保不是图像所有者的用户无权查看图像

```
class ImageController {

  def springSecurityService

  def showImage() {
  Image image=Image.get(parmas.long("id")

 // this is the user  who is trying to access image from ui
    User user = User.get(image.userId) 

 //this is the logged-in user       
  User logged = User.get(springSecurityService.principal.id)
   if (user.id != logged.id) {
  {
      redirect(action: "accessDenied", controller='access' id: params.long("id"))        
    //re-direct accessDenied page

 }else{
 //show image  
  }
  }

  Class AccessController{
 def accessDenied= {

    render(view: "accessDenied")

}
} 
```

# c# - 在 C# 中分配此关键字

> ID：10038598
> 
> 赞同：16
> 
> 时间：2012-04-06T02:54:03.033
> 
> 标签：c#, .net, memory, specifications

主要问题是允许修改 this 关键字在有用性和内存方面的含义是什么？为什么在 C# 语言规范中允许这样做？

如果选择这样做，可以回答或不回答其他问题/子部分。我认为对他们的回答将有助于澄清主要问题的答案。

我在回答[你在 C# 或 .NET 中看到的最奇怪的极端情况是什么？](https://stackoverflow.com/questions/194484/whats-the-strangest-corner-case-youve-seen-in-c-sharp-or-net)

```
public struct Teaser
{
    public void Foo()
    {
        this = new Teaser();
    }
} 
```

我一直试图弄清楚为什么 C# 语言规范甚至允许这样做。 **第 1 部分**。有什么可以证明**这**是可修改的吗？都是有用的吗？

对该答案的评论之一是

> 从 CLR 通过 C#：他们这样做的原因是因为您可以在另一个构造函数中调用结构的无参数构造函数。如果您只想初始化结构的一个值而希望其他值为零/空（默认），您可以编写 public Foo(int bar){this = new Foo(); 特殊变量 = 酒吧；}。这效率不高，也不是很合理（specialVar 分配了两次），但仅供参考。（这就是书中给出的原因，我不知道为什么我们不应该只做 public Foo(int bar) : this()）

**第 2 部分。** 我不确定我是否遵循该推理。有人可以澄清他的意思吗？也许是如何使用它的具体例子？

编辑（忽略堆栈或堆的要点是关于内存释放或垃圾收集。您可以用 262144 个公共 int 字段代替 int[]这个结构将有一个 1 Mb 字节数组字段初始化为

```
public int[] Mb = new int[262144]; 
```

**子部分 3.**当调用 Foo 时，这是否会从堆栈中删除？在我看来，由于结构从未超出范围，因此不会从堆栈中删除。今晚没有时间创建一个测试用例，但也许我明天会做这个。

在下面的代码中

```
Teaser t1 = new Teaser();
Teaser tPlaceHolder = t1;
t1.Foo(); 
```

**第 4 部分**。t1 和 tPlaceHolder 占用相同还是不同的地址空间？

很抱歉提出一个 3 年前的帖子，但这个帖子真的让我头疼。

仅供参考关于stackoverflow的第一个问题，所以如果我的问题有问题，请发表评论，我会编辑。

2 天后，即使我已经在脑海中选择了获胜者，我也会在这个问题上悬赏 50，因为我认为答案需要合理的工作量来解释这些问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T04:09:16.110

首先，我认为您应该首先检查您是否提出了正确的问题。也许我们应该问，“为什么 C#**不允许**在结构中赋值`this`？”

分配给`this`引用类型中的关键字有潜在的危险：您正在覆盖对您正在运行的方法的对象的引用；您甚至可以在初始化该引用的构造函数中这样做。目前尚不清楚那应该是什么行为。为了避免必须弄清楚这一点，因为它通常没有用，规范（或编译器）不允许这样做。

但是，在值类型中分配给`this`关键字是明确定义的。值类型的赋值是一种复制操作。每个字段的值从赋值的右侧到左侧递归复制。这是对结构的完全安全的操作，即使在构造函数中也是如此，因为结构的原始副本仍然存在，您只是在更改其数据。它完全等同于手动设置结构中的每个字段。为什么规范或编译器应该禁止定义良好且安全的操作？

顺便说一句，这回答了您的一个子问题。值类型赋值是深拷贝操作，而不是引用拷贝。鉴于此代码：

```
Teaser t1 = new Teaser();
Teaser tPlaceHolder = t1;
t1.Foo(); 
```

您已经分配了两个`Teaser`结构副本，并将第一个中的字段值复制到第二个中的字段中。这是值类型的本质：具有相同字段的两种类型是相同的，就像两个`int`都包含 10 的变量是相同的，无论它们在“内存中”的什么位置。

此外，这很重要并且值得重复：仔细假设“堆栈”与“堆”上的内容。值类型最终始终在堆上，具体取决于使用它们的上下文。没有关闭或以其他方式解除其范围的短期（本地范围）结构很可能被分配到堆栈上。但这是一个*不重要的[实现细节](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)*，您既不应该关心也不应该依赖它。关键是它们是值类型，并且行为如此。

至于`this`真正有用的分配是：不是非常。已经提到了具体的用例。您可以使用它来主要使用默认值初始化结构，但指定一个小数字。由于您需要在构造函数返回之前设置所有字段，因此可以节省大量冗余代码：

```
public struct Foo
{
  // Fields etc here.

  public Foo(int a)
  {
    this = new Foo();
    this.a = a;
  }
} 
```

它还可以用于执行快速交换操作：

```
public void SwapValues(MyStruct other)
{
  var temp = other;
  other = this;
  this = temp;
} 
```

除此之外，它只是语言的一个有趣的副作用，以及你很可能永远不需要知道的结构和值类型的实现方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:41:12.150

拥有这个可分配允许具有结构的“高级”极端情况。我发现的一个例子是一种交换方法：

```
struct Foo 
{
    void Swap(ref Foo other)
    {
         Foo temp = this;
         this = other;
         other = temp;
    }
} 
```

我强烈反对这种用法，因为它违反了结构的默认“期望”性质，即不可变性。有这个选项的原因可以说是不清楚的。

现在谈到自己的结构。它们在以下几个方面与类不同：

*   它们可以存在于堆栈而不是托管堆上。
*   它们可以被封送回非托管代码。
*   不能将它们分配给 NULL 值。

有关完整的概述，请参阅：[http ://www.jaggersoft.com/pubs/StructsVsClasses.htm](http://www.jaggersoft.com/pubs/StructsVsClasses.htm)

相对于您的问题是您的结构是位于堆栈还是堆上。这是由结构的分配位置决定的。如果结构是类的成员，它将在堆上分配。否则，如果一个结构是直接分配的，它将在堆上分配（实际上这只是图片的一部分。一旦开始谈论 C# 2.0 中引入的闭包，整个过程将变得相当复杂，但现在它足以回答你的问题）。

.NET 中的数组默认分配在堆上（在使用不安全代码和 stackalloc 关键字时，此行为不一致）。回到上面的解释，这表明结构实例也在堆上分配。事实上，证明这一点的一种简单方法是分配一个大小为 1 mb 的数组，并观察如何抛出没有 stackoverflow 异常。

堆栈上实例的生命周期由其作用域决定。这与管理器堆上的实例不同，其生命周期由垃圾收集器确定（以及是否仍有对该实例的引用）。只要在范围内，您就可以确保堆栈上的任何内容都存在。在堆栈上分配一个实例并调用一个方法不会释放该实例，直到该实例超出范围（默认情况下，当声明该实例的方法结束时）。

一个结构不能有对它的托管引用（指针在非托管代码中是可能的）。在 C# 中使用堆栈上的结构时，您基本上有一个指向实例而不是引用的标签。将一个结构分配给另一个结构只是复制底层数据。您可以将引用视为结构。简单地说，引用只不过是一个包含指向内存中某个部分的指针的结构。当将一个引用分配给另一个时，指针数据被复制。

```
// declare 2 references to instances on the managed heap
var c1 = new MyClass();
var c2 = new MyClass();

// declare 2 labels to instances on the stack
var s1 = new MyStruct();
var s2 = new MyStruct();

c1 = c2; // copies the reference data which is the pointer internally, c1 and c2 both point to the same instance
s1 = s2; // copies the data which is the struct internally, c1 and c2 both point to their own instance with the same data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-19T21:16:54.523

您可以利用*这一点*并改变一个不可变的结构

```
public struct ImmutableData
{
    private readonly int data;
    private readonly string name;

    public ImmutableData(int data, string name)
    {
        this.data = data;
        this.name = name;
    }

    public int Data { get => data; }
    public string Name { get => name; }

    public void SetName(string newName)
    {
        // this wont work
        // this.name = name; 

        // but this will
        this = new ImmutableData(this.data, newName);
    }

    public override string ToString() => $"Data={data}, Name={name}";
}

class Program
{
    static void Main(string[] args)
    {
        var X = new ImmutableData(100, "Jane");
        X.SetName("Anne");

        Debug.WriteLine(X);
        // "Data=100, Name=Anne"
    }
} 
```

这是有利的，因为您可以实现`IXmlSerializable`和维护不可变结构的稳健性，同时允许序列化（一次只发生一个属性）。

上面示例中只有两种方法可以实现这一点：

```
 public void ReadXml(XmlReader reader)
    {
        var data = int.Parse(reader.GetAttribute("Data"));
        var name = reader.GetAttribute("Name");

        this = new ImmutableData(data, name);
    }
    public void WriteXml(XmlWriter writer)
    {
        writer.WriteAttributeString("Data", data.ToString());
        writer.WriteAttributeString("Name", name);
    } 
```

它创建了以下 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<ImmutableData Data="100" Name="Anne" /> 
```

并且可以阅读

```
 var xs = new XmlSerializer(typeof(ImmutableData));
        var fs = File.OpenText("Store.xml");
        var Y = (ImmutableData)xs.Deserialize(fs);
        fs.Close(); 
```

# delphi - 德尔福编程手册

> ID：10038600
> 
> 赞同：3
> 
> 时间：2012-04-06T02:54:12.503
> 
> 标签：delphi, x86, reverse-engineering

我正在尝试查找 Delphi 编程手册，其中可以看到每个函数的功能、参数和返回值的描述。有谁知道我在哪里可以找到一个？类似于[微软的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648046%28v=vs.85%29.aspx)东西？

正如你所知，我以前从未编写过 Delphi，我对此一无所知（而且我没有时间学习它）。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T03:05:27.390

Delphi 文档的官方站点是 Embarcadero Documentation Wiki，可以在这个位置找到[`Online Help for Delphi® XE2 and C++Builder® XE2`](http://docwiki.embarcadero.com/RADStudio/en/)，这*相当于*Microsoft 的 MSDN。如果您正在寻找教程，请检查此问题[`Delphi = Pascal? Resources for Learning?`](https://stackoverflow.com/questions/1149238/delphi-pascal-resources-for-learning)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:39:55.070

更好的资源之一是从早期版本中查找基于 Windows 的帮助文件。比当前的帮助（但并不完美！）要好得多、信息量大得多。我将 Delphi 6 文件加载到一个易于访问的文件夹中以供参考。或在 ebay 上搜索较旧的印刷手册。**多年来，基本的 VCL 和 Windows API调用**没有太大变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T06:27:00.617

如果您喜欢书籍而不是在线阅读。[http://www.lulu.com/shop/bob-swart/delphi-xe-development-essentials/paperback/product-13211362.html](http://www.lulu.com/shop/bob-swart/delphi-xe-development-essentials/paperback/product-13211362.html)

# java - 在 Eclipse 中，未显示 Eclemma 覆盖视图

> ID：10038602
> 
> 赞同：1
> 
> 时间：2012-04-06T02:55:12.940
> 
> 标签：java, eclipse

我刚刚在我的 Eclipse 中安装了 Eclemma 并创建了一个 JUnit 测试来覆盖。我运行了测试，它成功了，我的程序中显示了绿色和红色的横幅，但是我看不到任何像所示指令那样的“覆盖”视图（也不是在窗口显示视图中）。

我该如何解决这个问题？我是否必须重新编写我的 JUnit 测试或重新安装 EclEmma？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:06:19.853

> 窗口-> 显示视图-> 其他-> 选择覆盖/类型覆盖。

您将看到 java 代码覆盖率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-06T09:36:24.460

如果是第一次，您需要从市场安装 eclemma，安装后它将重新启动。

以下是查找覆盖范围的路径。

Window >> Show view >> Other >> Type coverage，点击coverage。

当您使用 junit 进行覆盖时，您可以看到代码覆盖率。

# arrays - 打印出存储在 DWORDS 数组中的字符串

> ID：10038603
> 
> 赞同：0
> 
> 时间：2012-04-06T02:55:13.860
> 
> 标签：arrays, string, assembly

我正在Assembly 中编写一个对字符串数组进行冒泡排序的程序。零长度字符串终止数组。我通过声明一个 DWORD 数组来解决这个问题，其中应存储字符串 var.，即字节大小。我的主要问题不是冒泡排序本身，而是存储在数组中的字符串没有完全输出。

为了清楚起见，这是我的代码：

```
.586
.MODEL FLAT

INCLUDE io.h   ; header file for input/output

space           equ     0
cr              equ     0dh

.STACK 4096

.DATA           
myStrings               byte    "Delts",0
                        byte    "Abs",0
                        byte    "Biceps",0
                        byte    0

labelStrOut             byte    "Output is: ", 0

stringOut               dword   11 dup (?)

stringNum               dword   0
stringArray             dword   20 dup (?)              

.CODE

_MainProc PROC  

            mov edi, offset myStrings
            mov esi, offset stringArray

 popltLp:       
            cmp BYTE PTR [edi], 0
            jz popltDone
            mov ebx, [edi]
            mov DWORD PTR [esi], ebx            
            add esi, 4
            inc stringNum
            xor ecx, ecx
            not ecx
            xor al, al
            repne scasb 
            jmp popltLp

popltDone: 
            xor edx, edx

            lea esi, stringArray
            mov ebx, DWORD PTR [esi]
            mov stringOut, ebx
            output labelStrOut, stringOut
            add esi, 4
            mov ebx, DWORD PTR [esi]
            mov stringOut, ebx
            output labelStrOut, stringOut   
            add esi, 4
            mov ebx, DWORD PTR [esi]
            mov stringOut, ebx
            output labelStrOut, stringOut

outptDone:

            mov  eax, 0                     ;     exit with return code 0
            ret
_MainProc ENDP

END                             ; end of source code 
```

可以看出，还没有进行冒泡排序......

'popltDone' 下面的行只是我在乱看字符串是否可以很好地转移到数组中。然而，当打印在屏幕上时，只显示了四个字符！整个字符串线都没有被打印出来，这让我发疯。有人可以告诉我我做错了什么吗？

感谢任何花时间阅读本文的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:54:29.410

问题是，您没有正确使用字符串指针。具体来说，这是我所指的代码：

```
mov ebx, [edi]
mov DWORD PTR [esi], ebx 
```

如果你把它翻译成英文，它会是这样的：

```
Move the 4 byte value pointed to by edi into ebx.
Move the value in ebx into the memory address pointed to by esi. 
```

这是完全合法的，在某些情况下实际上可能是您想要的，但我猜这不是其中之一。输出字符串数组时只看到前 4 个字符的原因是因为您将文字字符串复制到了数组中。DWORD 是 4 个字节，因此您可以得到前 4 个字符。这是我要写的：

```
mov DWORD PTR [esi], edi 
```

翻译成：

```
Move the pointer value edi into the memory address pointed to by esi. 
```

现在你没有一个字符串数组，而是一个字符串指针数组。如果你用 C 语言编写代码，反编译它，这很可能是你会看到的。重写您的比较和输出函数以使用指向字符串的指针而不是字符串中的文字字符，您将解决问题。

# python - 列表python的排列

> ID：10038604
> 
> 赞同：0
> 
> 时间：2012-04-06T02:55:32.107
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中生成列表的所有排列](https://stackoverflow.com/questions/104420/how-to-generate-all-permutations-of-a-list-in-python)

我想找到列表中元素的所有排列。但是随后施加了一些条件..嗯..可能一个例子可以帮助我更好地解释。

我有四个清单

```
["1"],["0"],["a","b","c],["d","e","f"] 
```

现在我想通过以下方式进行排列：

```
 "10ad" ,"10bd","10cd","10ae", "10be"
 ,"10bf".. 
```

等等..

所以基本上每个元素（每个元素）？现在我知道这样做的非常天真的方法。但是这样做的pythonic方法是什么？有的话？？有什么建议么

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T03:03:31.477

我认为您想使用该`itertools`模块，它是标准 Python 发行版的一部分。

例如：

```
import itertools

a = ["1"]
b = ["0"]
c = ["a","b","c"]
d = ["d","e","f"]

for item in itertools.product(a, b, c, d): 
    print(item) 
```

编辑：要清楚，该`itertools.product`函数提供输入列表中所有项目的所有*组合，而不是**permutations*。但根据 OP 的措辞，我认为这是他/她真正想要的。

# wcf - 对于多平台客户端，我需要 WCF 还是可以使用 MVC 3？

> ID：10038605
> 
> 赞同：3
> 
> 时间：2012-04-06T02:55:46.263
> 
> 标签：wcf, asp.net-mvc-3, mobile, n-tier-architecture

我在 MVC 3（带有数据访问层的 3 层）中有一个 Web 应用程序，我想将它扩展到本机 iPhone 和 Android 等......作为演示设备。

我可以只使用相同的控制器并进行一些修改，还是将访问逻辑组织到 WCF 服务中更好？

在良好的可扩展性和性能方面，您有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:07:52.240

对于可扩展性，最好将您的业务逻辑放在您的 UI（MVC 站点、iPhone 应用程序、Android 应用程序）简单调用的服务中。我个人建议在 WCF 上使用[ServiceStack](http://www.servicestack.net/)，因为它简化了对 POCO 对象的调用。这将有助于可扩展性以及维护，因为它可以更清晰地分离您的关注点（我建议您阅读[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)）。如果您需要对 UI 进行更改，这些更改不会影响您的业务逻辑（这可能会导致您的 iPhone 应用程序发生更改）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:18:49.453

这一切都取决于。你当然可以走贾斯汀推荐的路线。不过，这方面有很多工作要做。

MVC4 具有 WebAPI，它在类似 MVC 控制器的环境中为您提供 RESTful 服务。这允许您以最小的努力将服务层添加到您的 MVC 应用程序。

对于任何大规模，您可能应该使用完整的 WCF 实现。

仅供参考，MVC4 处于测试阶段，但有一个上线许可证，您可以在不安装 MVC4 的情况下安装 WebAPI，它可以通过 nuget 获得。

# android - setContentView 无法识别 .xml 页面

> ID：10038607
> 
> 赞同：0
> 
> 时间：2012-04-06T02:56:39.967
> 
> 标签：android, xml, splash-screen

我在我的应用程序的开头添加了一个起始页面，它持续了 5 秒，但是当我这样做时，它在 setContentView(R.layout.splash) 旁边放了一个小“x”；并且有一个 xml 文件，所以我不知道为什么它不起作用。我加粗的线是我遇到问题的线。

```
package com.jslsoftware;

import android.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class ILearnSignActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    Thread logoTimer = new Thread(){
    public void run(){
        try{
            sleep(5000);
            Intent menuIntent = new Intent("com.jslsoftware.MENU");
            startActivity(menuIntent);              
        }           
        finally{
            finish();               
        }
    }        
    };
    logoTimer.start();          
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T03:10:17.390

检查你的进口它不应该是

```
android.R; 
```

但

```
import com.jslsoftware.R; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T05:24:15.353

检查资源文件夹中是否有任何错误，如可绘制、字符串和布局等。如果有错误，android 无法创建 gen 文件夹。并查看 import android.R。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-29T16:09:05.853

**构建 >> 清洁项目**

**重启你的 Android Studio / Eclipse**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T05:37:55.377

斯科特，如果您使用 Eclipse：

在文件树中选择您的项目，然后转到顶部的项目菜单 -> 清理

这通常有助于重新组合您的 R 文件并将其与您的项目重新链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-03T13:06:12.290

我有同样的问题。我删除了这个：

```
 import android.R; 
```

并替换为

```
 import com.(ur package).R; 
```

它成功了。

# sqlite - Sqlite - 默认时间戳为“现在 + 几天”

> ID：10038609
> 
> 赞同：4
> 
> 时间：2012-04-06T02:57:26.947
> 
> 标签：sqlite, datetime

我试图让一个列保存时间戳值，其默认值为`today + a few days`. 这可以在表创建期间完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:51:29.640

是的，可以按照以下示例完成：

```
sqlite> create table foo (i int, j text default (datetime('now', '+5 days')));
sqlite> insert into foo (i) values (1);
sqlite> select * from foo;
1|2012-04-11 07:49:04
sqlite> insert into foo (i) values (2);
sqlite> select * from foo;
1|2012-04-11 07:49:04
2|2012-04-11 07:49:14 
```

如果您只想存储日期部分，请使用`date`而不是`datetime`. 这里我`datetime`用来说明默认表达式是在插入表时计算的，而不是在创建表时计算的。

# jquery - 5000px+ 宽水平滚动？

> ID：10038611
> 
> 赞同：1
> 
> 时间：2012-04-06T02:57:38.963
> 
> 标签：jquery, html, css, horizontal-scrolling

我正在建立这个网站，关于这个页面我基本上有两个问题： [http ://sites.publishyours.com.br/silviamecozzi/pt/obra/deserto_das_palmas.php](http://sites.publishyours.com.br/silviamecozzi/pt/obra/deserto_das_palmas.php)

在链接上，您会看到一些具有不同尺寸的“将是”图像，并且是图例。其中一些图像将宽至 1700px+，这是第一个问题和问题。

检查 html 和 css，您会看到一个 id 为“gallery”的 div，其中包含所有图像。它是绝对定位的，我将其宽度设置为 4800 像素（不足以容纳所有向左浮动的图像。如果将此宽度更改为 5000 像素，则足以容纳所有图像，一切都会好起来的应该是这样，但是……

问题01：为什么要设置div#gallery的宽度？我会有其他类似的部分，具有不同的图像/尺寸，我无法预览它需要多宽。我只是希望它尽可能宽，如果我以后需要添加更多图像，我希望它可以根据需要将它推到尽可能宽的位置。

问题02：首先注意我如何将“画廊”div的左侧位置设置为-150px。好吧，一旦我解决了第一个问题，我可能会将“html”标签设置为 {overflow-x:hidden; }。并使用与网站一样宽的水平滚动（+- 920px），就在图像的正下方，我希望图像从“隐藏的右侧”滚动（使用 jQuery 滚动），例如 { left: 0px; } 到“隐藏的左侧”，例如 { left: -3980px; } 的浏览器，反之亦然，因为用户使用滚动...此滚动将需要计算#gallery div 的宽度和所有...有人可以指点我一个 jQuery 插件来帮助我做到这一点? 我正在考虑 jscrollpane (http://jscrollpane.kelvinluck.com)，但我真的不知道它是否可行。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T03:22:49.697

问题1：可以使用`pre`或`nowrap`来防止换行。只要您的 html 结构和 css 正确，您就不需要设置画廊宽度。

问题 2：您可以使用 jQuery 中的 scrollLeft 属性来显示元素。你不需要插件。

[http://jsfiddle.net/3Tsfv/1](http://jsfiddle.net/3Tsfv/1)

然后使用 scrollLeft 属性将下一个元素动画化到视图中。此示例不处理边框情况，因此如果您单击左/右太多次，它将中断。不过，您应该很容易根据自己的需要对其进行修改。

css

```
body { white-space:nowrap; overflow: hidden; padding: 10px; }
img { margin: 5px; border: 1px solid black; }
img.active { border-color: orange; }
div{ position: fixed; }​ 
```

html

```
<div><button id="left"><-</button><button id="right">-></button></div><br /><br />
<img class="active" src="http://placehold.it/500x100/" /><img src="http://placehold.it/750x100/" /><img class="active" src="http://placehold.it/300x100/" /><img class="active" src="http://placehold.it/1000x100/" /> 
```

jQuery

```
$('#left').click(function() {
    var $prev = $('.active').prev();
    $('.active').removeClass('active');
    $prev.addClass('active');   
    $('body').animate( { scrollLeft: $prev.offset().left }, 'slow');
});

$('#right').click(function() {
    var $next = $('.active').next();
    $('.active').removeClass('active');
    $next.addClass('active');   
    $('body').animate( { scrollLeft: $next.offset().left }, 'slow');
});
​ 
```

# facebook - 移动应用程序中的身份验证

> ID：10038615
> 
> 赞同：0
> 
> 时间：2012-04-06T02:58:23.520
> 
> 标签：facebook, forms-authentication, mobile-application

我们正在开发一个混合移动应用程序（代码是用 HTML 编写的，并在浏览器外壳上作为设备上的本机应用程序运行）。我们需要针对外部安全管理器对用户进行身份验证。我在 iPhone 中看到了 Gmail 应用程序，它打开了一个浏览器来对用户进行身份验证。我们也在寻求做类似的事情。我们只需要收集您对如何在移动应用程序中使用某些外部安全管理器进行身份验证的想法。

我还注意到 Dailymotion 网站能够知道用户是否通过 Facebook 身份验证。这看起来像跨域身份验证。

您能否分享您对 Google 和其他人如何实施它的看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:04:06.977

您正在寻找的是 OAuth 和 OpenID 服务来联合您的登录。根据您的系统架构，您可以实现您喜欢的任何一个，甚至是两者的混合。

查看此链接：[Google 帐户的联合登录](https://developers.google.com/accounts/docs/OpenID)

它提供了您需要的所有有用信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T16:31:12.720

嗯，这个问题似乎很老，但如果你还没有找到答案，这里是我如何使用我的混合应用程序做到的：

1.  使用提供商的（facebook/twitter/instagram）网址在客户端打开网址以进行登录
2.  用户登录并被重定向到服务器的回调 url（我的服务器是用 nodejs 编写的）
3.  一旦我从提供商那里获得了访问令牌。我保存此令牌，然后为客户端创建一个令牌，以便在用户每次想要访问受保护的资源时重用。

下载[apk](https://drive.google.com/file/d/0B9GTa-_sqdVJNnZwbzl1TGQxZFE/edit?usp=sharing)并测试它。

如果这是您正在寻找的内容，您可以在以下位置查看客户端代码：[https ://github.com/malikov/Authenticate.me-client-cordova-ionic](https://github.com/malikov/Authenticate.me-client-cordova-ionic)

服务器端代码位于：[https ://github.com/malikov/Authenticate.me-Node-Server](https://github.com/malikov/Authenticate.me-Node-Server)

干杯

# iphone - [选择器dismissModalViewControllerAnimated:YES]; 不工作

> ID：10038617
> 
> 赞同：0
> 
> 时间：2012-04-06T02:59:07.820
> 
> 标签：iphone, ios, ipad

我在用

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
} 
```

对于图像选择器和使用

```
[picker dismissModalViewControllerAnimated:YES]; 
```

在 iPad 中关闭选择器。我也尝试使用

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker;{
    [picker dismissModalViewControllerAnimated:YES];
} 
```

完成工作后解雇选择器。但它并没有拒绝它。当我点击屏幕上的任何地方时，它会被解雇。

我做错了什么来解雇图像选择器？

许多想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T05:25:06.980

可能你一定没有设置选择器的代表。试试这个： -

```
picker.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:25:15.690

应该调用的视图控制器应该`dismissModalViewControllerAnimated:`与调用的视图控制器相同`presentModalViewController:animated:`

# android - 令牌上的语法错误，错误的构造 ***Android 错误***

> ID：10038620
> 
> 赞同：1
> 
> 时间：2012-04-06T02:59:11.523
> 
> 标签：android

我对 Android 开发相当陌生，并且正在制作一个使用 Google 翻译 API 翻译内容的程序。错误如下：'令牌语法错误，构造错误。谢谢你。这是我的Java文件：

```
package org.example.translate;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;

import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

import java.io.BufferedReader;

public class TranslateTask implements Runnable {
    private static final String TAG = "TranslateTask";
    private final Translate translate;
    private final String original, from, to;

    TranslateTask(Translate translate, String original, String from, String to) {
        this.translate = translate;
        this.original = original;
        this.from = from;
        this.to = to;
    }

    public void run() {
        String trans = doTranslate(original, from, to);
        translate.setTranslated(trans);

        String retrans = doTranslate(trans, from, to);
        translate.setRetranslated(retrans);
    }

    private String doTranslate (String original, String from, String to) {
        String result = translate.getResources().getString(
                    R.string.translation_error);
        HttpURLConnection con = null;
        Log.d(TAG, "dotranslate(" + original + ", " + from + ", " + to + ")");

//*This is where the error occours*// try {
            if (Thread.interrupted())
                throw new InterruptedException();

                // Build RESTful query for Google API
                String q = URLEncoder.encode(original, "utf-8");
                URL url = new URL(
                        "http://ajax.googleapis.com/ajax/services/language/translate" 
                        + "?v=1.0" + "&q=" + q + "&langpair=" + from
                        + "%7C" + to);
            con = (HttpURLConnection) url.openConnection();
            con.setReadTimeout(10000);
            con.setConnectTimeout(15000);
            con.setRequestMethod("GET");
            con.addRequestProperty("referer", 
                "http://www.pragprog.com/titles/eband3/hello-android");
            con.setDoInput(true);

            con.connect();

        if (Thread.interrupted())
            throw new InterruptedException();

            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(con.getInputStream(), "utf-8"));    
            String payload = reader.readLine();
            reader.close();

            JSONObject jsonObject = new JSONObject(payload);
            result = jsonObject.getJSONObject("responseData")
                .getString("translatedText")
                .replace("&#39;", "'")
                .replace("&amp;", "&");

        if (Thread.interrupted())finally
            throw new InterruptedException();

        } catch ("IOException", e) {
            Log.e(TAG, "IOException" e);
        }
        catch ("JSONException", e) {
            Log.e(TAG, "JSONException", e);
        }
        catch (InterruptedEception e) {
            Log.d(TAG, "InterruptedException", e);
            result = translate.getResources().getString(
                    R.string.translation_interrupted);
        }
        finally {
            if (con!= null) {
                con.disconnect();
        }   
    };
}; 
```

}

请帮我！明确的答案表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:07:40.840

我能看到的唯一一件事（可能是复制/粘贴的错误）是你的一条`finally`线上随机浮动：

```
 JSONObject jsonObject = new JSONObject(payload);
        result = jsonObject.getJSONObject("responseData")
            .getString("translatedText")
            .replace("&#39;", "'")
            .replace("&amp;", "&");

    if (Thread.interrupted())finally  // <-- this doesn't belong :)
        throw new InterruptedException();

    } catch ("IOException", e) {
        Log.e(TAG, "IOException" e);
    } 
```

# html - HTML/CSS 图标作为字体使用 - 悬停改变颜色

> ID：10038621
> 
> 赞同：2
> 
> 时间：2012-04-06T02:59:35.343
> 
> 标签：html, css, font-face

我正在考虑开始使用这种图标技术作为字体，因为它看起来非常棒。但我似乎无法弄清楚如何让它在链接悬停时改变颜色。这是一个供您使用的jsfiddle：

[http://jsfiddle.net/eNhUf/17/](http://jsfiddle.net/eNhUf/17/)

正如您将看到的，当您将“警告”之类的文本**悬停**时，文本变为蓝色，我也希望图标/字体也变为蓝色。

有人知道怎么做这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T03:10:20.077

```
.caution.icon:hover:before{content:"\0021";color:green } 
```

当您悬停链接时，这将使警告图标变为绿色，我相信您可以根据需要自定义想法！[http://jsfiddle.net/agentmilindu/eNhUf/24/](http://jsfiddle.net/agentmilindu/eNhUf/24/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:04:04.690

字体图标库通常使用预先生成的内容将图标注入到元素中。这意味着您需要定位该区域并设置颜色。

```
<p class="icon caution email">Email</p>
<style type="text/css">
   .icon.caution, .icon.caution:before { color:blue; }
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T03:11:12.393

试试这个：

```
.icon:hover, .icon:hover:before { color: blue; } 
```

# c - 打印出数组的单词时收到分段错误

> ID：10038622
> 
> 赞同：-4
> 
> 时间：2012-04-06T02:59:51.377
> 
> 标签：c

以下是一段代码，其中用户输入了未知数量的单词，直到`'E'`输入，程序应该停止并打印出所有输入的单词。但是，当运行此程序时会产生分段错误。我是否访问了一些我不应该拥有的内存？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define CAPACITY 10
#define NUM_OF_WORDS 10
int main(void)
{
    int num_words = 10;
    char *word= malloc(CAPACITY*sizeof(char));
    char **w=(char **) malloc(num_words*sizeof(char));
    int i;
    for(i = 0 ; scanf("%s", word)==1; ++i)
    {
        if(*word == 'E') 
            break;
        if( i == num_words-1)
            w = (char **)realloc(w, (num_words *=2) * sizeof(char));
        w[i] =(char *) malloc(strlen(word)+1 * sizeof(char));
        strcpy(w[i], word);
    }
    int x = 0;
    for(x = 0 ; x<num_words ; x++)
        printf("%s", w[x]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:06:09.267

您的初始分配代码如下：

```
char *word = malloc(CAPACITY*sizeof(char));
char **w = (char **) malloc(num_words*sizeof(char)); 
```

这两个都分配 10 字节的内存。你的第二个应该是：

```
char **w = (char **) malloc(num_words*sizeof(char *)); 
```

或者：

```
char **w = malloc(num_words*sizeof(*w)); 
```

它们都为 10 个指针分配了足够的内存（这可能是原始代码的八倍）。第二个可以说是更好的风格；第一个无疑是经典风格。在 C 中，`malloc()`不需要强制转换；在 C++ 中，它是。

这可能不是问题的全部；这几乎可以肯定是一个促成因素。

此外，您没有检查内存分配；这是不可取的。你应该经常检查它们。

* * *

这段代码：

```
if (i == num_words-1)
    w = (char **)realloc(w, (num_words *=2) * sizeof(char)); 
```

在两个帐户上玩火（加上先前诊断的问题的重复）：

1.  参数列表中的分配......通常不被认为是一个好主意。我不会用那个地方写代码，我会发回我被要求审查的包含它的代码。这在技术上并没有错。它会起作用的。但这并没有让后来的维护程序员的生活更轻松。

2.  您永远不应该重新分配一个指针，例如`w`并将新空间分配给同一个指针。如果内存分配失败，您将返回一个空指针，因此您丢失了指向先前数据的唯一指针，该数据仍被分配。那是内存泄漏。此外，如果内存分配失败，您必须撤消参数列表中的分配，因为分配的空间仍然是原始大小。我认为你最好使用：

    ```
    if (i == num_words - 1)
    {
        size_t new_size = (num_words * 2);
        char **new_data = realloc(w, new_size * sizeof(*new_data));
        if (new_data == 0)
            ...handle error; w is still valid, and num_words is still correct too...
        num_words = new_size;
        w = new_data;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:05:57.483

您的变量`num_words`保存数组的当前最大大小`w`，但这与数组中实际的字数不同。

当您遍历`w`数组时，您正在遍历太多项目 - 其中的某些元素`w`没有有效的字符串 - 尝试打印它们会导致段错误。

# c# - Application.Shutdown() 从 ContextMenu 失败

> ID：10038625
> 
> 赞同：1
> 
> 时间：2012-04-06T03:00:42.943
> 
> 标签：c#, wpf, delegates, contextmenu

此 WPF 程序显示一个 ContextMenu，它承载一个标有“退出”的 MenuItem，以及一个空窗口。选择“退出”应该会终止进程，但它只会关闭 Window 和 ContextMenu。我不是要强行终止这个程序，而是干净地结束它。

为什么在 Click 事件处理程序中调用 Application.Shutdown() 无法关闭程序？

```
using System;
using System.Windows;
using System.Windows.Controls;

class MyApp : Application {

    [STAThread]
    public static void Main() {
        new MyApp().Run();
    }

    protected override void OnStartup(StartupEventArgs e) {

        new Window().Show();

        MenuItem menuItem = new MenuItem();
        menuItem.Header = "Exit";
        menuItem.Click += delegate { Shutdown(); };

        ContextMenu contextMenu = new ContextMenu();
        contextMenu.Items.Add(menuItem);
        contextMenu.IsOpen = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:55:12.833

当打开 ContextMenu 时，这可能是 WPF 中的一个错误。我昨天遇到了完全相同的问题。我的解决方法是：

```
menuItem.Click += delegate {

    Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Input,
        (Action)(() => { Shutdown(); }));

}; 
```

但在我的情况下，我在托盘（通知）图标上打开 ContextMenu，所以我没有 WPF 父级。在您的情况下，我会尝试将 ContextMenu 设为 WPF 窗口的子级或先使用 PlacementTarget 属性。

# .htaccess - 将子域指向根目录中的文件夹

> ID：10038626
> 
> 赞同：0
> 
> 时间：2012-04-06T03:00:46.860
> 
> 标签：.htaccess, directory, point

我在 Godaddy 注册了一个域名，例如 www.domain.com

在我的域管理中，我的域指向“/”

我有一个指向“/”的子域

我已经在我的根目录中设置了一个 .htaccess。

这是我正在使用的 .htaccess 代码...

```
RewriteEngine On
Options +FollowSymlinks

RewriteCond %{HTTP_HOST}  domain.com$ [NC]
RewriteCond %{REQUEST_URI} !^/subfolder_1/.*$
RewriteRule ^(.*)$  /subfolder_1/$1 [L]

RewriteCond %{HTTP_HOST}  mysub_2.domain.com
RewriteCond %{REQUEST_URI} !^/subfolder_2/
RewriteRule ^(.*)$  /subfolder_2/$1 [L] 
```

* * *

顶部重写工作正常，我可以转到 domain.com 或 www.domain.com，它将指向 subfolder_1。

但是，如果我访问 mysub_2.domain.com，我似乎无法将其指向文件夹 subfolder_2。

文件夹结构如下：

根 - subfolder_1 - subfolder_2 - 统计信息 - cgi

有任何想法吗？已经为此工作了几个小时并失败了。

谢谢你，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:08:27.490

这个条件：

```
RewriteCond %{HTTP_HOST}  domain.com$ [NC] 
```

也匹配主机`mysub_2.domain.com`。您应该将 2 个主机检查条件更改为：

```
RewriteCond %{HTTP_HOST}  ^(www\.)?domain.com$ [NC] 
```

和

```
RewriteCond %{HTTP_HOST}  ^mysub_2.domain.com$ [NC] 
```

# javascript - 在 ExtJS 4 柱形图中设置最大条形宽度？

> ID：10038627
> 
> 赞同：2
> 
> 时间：2012-04-06T03:01:17.873
> 
> 标签：javascript, extjs, charts, extjs4

我有一个 250px 宽的柱形图，当系列中有 10 多个项目时它看起来很棒，但是当只有 2-3 个时，条形图绘制得非常宽，看起来有些奇怪。

```
 _____
  |     |
  |     |
-----|----- 
```

我可以在系列配置中设置宽度：

```
{
  style: { width: 25 }
} 
```

这可行，但较细的条仍与其先前位置左对齐，因此它们与轴刻度和标签不匹配。

像这样：

```
 _
  | |
  | |
-----|----- 
```

我不想改变轴间距，我想得到宽间距的 25px 条（正确地以轴刻度为中心）：

```
 _
    | |
    | |
-----|----- 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-04T07:40:08.577

```
renderer: function(sprite, record, attr, index, store) {                    

    return Ext.apply(attr, {
        fill: color,
        width: 50,
        x: Math.max(attr.x, attr.x + (attr.width - 50) / 2)
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-06T21:38:42.703

也许有点晚了，但这是我的解决方案

```
renderer: function(sprite, record, attr, index, store) {                    

    return Ext.apply(attr, {
        fill: color,
        width: 50,
        x: Ext.getCmp('chart_id').axes.items[1].inflections[value][0] - 25
    });
} 
```

在此示例中，我读取 x 轴并找到任何给定的点（标签条纹），而不是通过我的条循环，您可以使用计数或其他东西并使用 in 代替 value。希望它有效！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-07T12:32:23.087

```
//try like below
series:[
    {...
        style:{
            minBarWidth:5,
            maxBarWidth:5
        }
    },
    {...}
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T15:30:14.797

我认为问题在于您要查找的图表是笛卡尔图表，而柱形图对您不起作用，因为它没有任何确切的 X 值。

所以，我模拟笛卡尔图表（如折线图）看起来像这样的柱形图：

![在此处输入图像描述](../Images/b10d097351600da5a41c23fecb089b10.png)

不知何故，这是一个技巧，但对我来说效果很好。

```
axes: [{
        type: 'Numeric',
        position: 'bottom',
        fields: ['min-X','max-X']
}, {
        type: 'Numeric',
        position: 'left',
        fields: ['min-Y','max-Y']
}],

series: [{
        type: 'line',
        axis: ['bottom', 'left'],
        xField: 'line1-X',
        yField: 'line1-Y',
        showMarkers: false,
        style: {
                stroke: '#ccc',
                'stroke-width': 10
        }
},{
        type: 'line',
        axis: ['bottom', 'left'],
        xField: 'line2-X',
        yField: 'line2-Y',
        showMarkers: false,
        style: {
                stroke: '#ccc',
                'stroke-width': 10
        }
},{
        type: 'line',
        axis: ['bottom', 'left'],
        xField: 'line3-X',
        yField: 'line3-Y',
        showMarkers: false,
        style: {
                stroke: '#ccc',
                'stroke-width': 10
        }
},{
        type: 'line',
        axis: ['bottom', 'left'],
        xField: 'line4-X',
        yField: 'line4-Y',
        showMarkers: false,
        style: {
                stroke: '#ccc',
                'stroke-width': 10
        }
}] 
```

和数据：

```
{
        line1-X: 2,   line1-Y: 0,
        line2-X: 5,   line2-Y: 0,
        line3-X: 5.5, line3-Y: 0,
        line4-X: 8,   line4-Y: 0,

        min-X: 0,  min-Y: 0,
        max-X: 10, max-Y: 100
},{
        line1-X: 2,   line1-Y: 40,
        line2-X: 5,   line2-Y: 80,
        line3-X: 5.5, line3-Y: 60,
        line4-X: 8,   line4-Y: 100,

        min-X: 0,  min-Y: 0,
        max-X: 10, max-Y: 100
} 
```

但是在这种方法中，您必须知道您拥有的最大列数（行数）。并且每次将零（0）数据插入您不想显示的数据。如果您不知道列（行）的数量，则必须动态创建它们。

这是我的想法，它按照我想要的方式工作。也许它可以帮助您找到解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-16T12:22:49.210

尝试使用“gutter”属性来设置列之间的间隙。

# ef-code-first - 在 WebAPI 控制器中序列化 EF Code First 5.0 数据时出错

> ID：10038628
> 
> 赞同：7
> 
> 时间：2012-04-06T03:01:54.300
> 
> 标签：ef-code-first, asp.net-web-api, entity-framework-5

我最初问过这个问题： [如何解决“指定的包含路径无效”？](https://stackoverflow.com/questions/10038037/how-do-i-resolve-a-specified-include-path-is-not-valid)已回答，并且我的 .Include() 现在正在工作，但是，当序列化程序尝试工作时，它很神奇，我收到以下错误：

```
You must write an attribute 'type'='object' after writing the attribute 
with local name '__type'. 
```

以下是我为返回数据所做的工作：

```
var everything = dc.Categories
            .Include(c => c.Products); 
```

我的类定义相当简单：

```
public class Category
{
    public int CategoryId { get; set; }
    public string Title { get; set; }

    public virtual ICollection<Product> Products { get; set; }
}

public class Product
{
    public int ProductId { get; set; }
    public string Title { get; set; }

    public virtual Category Category { get; set; }
}

public class ProductDataContext : DbContext
{
    public DbSet<Category> Categories { get; set; }
    public DbSet<Product> Products { get; set; }
} 
```

我也尝试删除“虚拟”，但后来我得到了循环引用。我尝试将 ICollection Products 上的设置器设为私有（如此处建议：[http](http://forums.asp.net/t/1773164.aspx/1) ://forums.asp.net/t/1773164.aspx/1 ），这可以清除错误，但我的产品不是返回 JSON。

我需要做什么才能使数据与其中的类别及其产品序列化？

**编辑** 这是我得到的堆栈跟踪：

```
[SerializationException: Object graph for type &#39;System.Collections.Generic.List`1[[Test.Models.Product, Test.Models, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]&#39; contains cycles and cannot be serialized if reference tracking is disabled.]
System.Web.Http.WebHost.HttpControllerHandler.EndProcessRequest(IAsyncResult result) +30206
System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +10
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9478661
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +178 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T13:36:54.563

为了解决这个问题，我需要：

1.  禁用延迟加载，并且
2.  使用`IgnoreDataMember`from`System.Runtime.Serialization`作为`Category`导航属性的属性（类的反向引用`Product`）。

希望这可以帮助某人。

为了解决 XML 错误，我使用了这里的帮助：http: [//www.strathweb.com/2012/03/serializing-entity-framework-objects-to-json-in-asp-net-web-api/](http://www.strathweb.com/2012/03/serializing-entity-framework-objects-to-json-in-asp-net-web-api/)

为了解决循环引用的问题，我以此为指导： [MVC 4, Upshot entity cyclic references](https://stackoverflow.com/questions/9784507/mvc-4-upshot-entities-cyclic-references)

# css - 如何消除内联块元素之间的间隙

> ID：10038636
> 
> 赞同：3
> 
> 时间：2012-04-06T03:02:43.510
> 
> 标签：css, gaps-in-visuals

```
.item-list {
  letter-spacing: -0.3em;
}
.item-list a {
  letter-spacing: 0;
  display: inline-block;
}
```

```
<div class="item-list">
  <a href="#">a</a>
  <a href="#">a</a>
  <a href="#">a</a>
  <a href="#">a</a>
</div>
```

只在win ie6下，差距`a` 还在exit，`letter-spacing:-0.3em`删除样式后样式生效`a { letter-spacing:0 }`

为什么？我能解决这个问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T03:46:21.723

哇，这个让我难倒了一段时间......信不信由你，这是你的答案：

**字体大小：0；必须添加到父元素**

在您的示例中，我将分别定义 a 标签的字体大小，并添加“font-size:0;” 到父 div 元素

换句话说：

CSS：

.item-list{字母间距：-0.3em; 字体大小：0；}

.item-list a{letter-spacing:0;display:inline-block; 字体大小：更高的东西；}

（您的 DOCTYPE 声明也必须正确，否则显示内联块可能会在 IE 中出现问题，至少我在使用 IE7 时遇到了问题）

这应该会结束您在 display:inline-block; 中遇到的任何额外的保证金挫折；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T15:02:31.147

它与您输入 HTML 的方式有关。因为您在 IDE 中很好地格式化了它，例如，带有空格和换行符，所以这些空格和换行符在页面上显示时会显示出来。所以而不是

```
<div class="item-list">

    <a href="#">a</a>
    <a href="#">a</a>
    <a href="#">a</a>
    <a href="#">a</a>

</div> 
```

将其输入为一行，它们将消失：

```
<div class="item-list"><a href="#">a</a><a href="#">a</a><a href="#">a</a><a href="#">a</a></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T07:18:49.397

您可以添加此 CSS

```
a{float:left} 
```

差距将消除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T04:02:22.020

我总是使用：

```
 line-height: 2.2; //or whatever value you want 
```

我取自 facebook 布局，对我来说效果很棒

# c++ - 模棱两可的重载函数——如何以及为什么？

> ID：10038637
> 
> 赞同：2
> 
> 时间：2012-04-06T03:02:44.133
> 
> 标签：c++, overloading, ambiguity

我很难弄清楚是什么使某些函数调用模棱两可，而其他函数调用则很好。我的 BitPacker 对象中有以下重载函数调用：

```
static __declspec(dllexport) void PackBits(void *dstBuffer, unsigned long long data, unsigned int &offsetBits, const unsigned int numBits);
static __declspec(dllexport) void PackBits(void *dstBuffer, bool data, unsigned int &offsetBits, const unsigned int numBits);
static __declspec(dllexport) void PackBits(void *dstBuffer, float data, unsigned int &offsetBits, const unsigned int numBits);
static __declspec(dllexport) void PackBits(void *dstBuffer, double data, unsigned int &offsetBits, const unsigned int numBits); 
```

我正在尝试从另一个包含“BitPacker.h”的对象中进行以下调用：

```
void Date::ReflectToBitBuffer(void)
{
    unsigned int offsetBits = 0;
    BitPacker::PackBits(m_packedBuffer, m_year, offsetBits, YR_BITS);
    BitPacker::PackBits(m_packedBuffer, m_month, offsetBits, MO_BITS);
    BitPacker::PackBits(m_packedBuffer, m_day, offsetBits, DY_BITS);
} 
```

“m_year”、“m_month”和“m_day”是 int 成员变量。但是在尝试编译时出现以下错误：

```
error C2668: 'BitPacker::PackBits' : ambiguous call to overloaded function
could be 'void BitPacker::PackBits(void *,double,unsigned int &,const unsigned int)'
or 'void BitPacker::PackBits(void *,float,unsigned int &,const unsigned int)'
or 'void BitPacker::PackBits(void *,bool,unsigned int &,const unsigned int)'
or 'void BitPacker::PackBits(void *,unsigned __int64,unsigned int &,const unsigned int)'
while trying to match the argument list '(char *, int, unsigned int, )' 
```

所以我用以下 main.cpp 编写了一个测试解决方案来测试重载，我下面的编译很好：

```
void OverloadTest(float f);
void OverloadTest(int n, int &numbits);
void OverloadTest(double d);
void OverloadTest(char c, int &numbits);
void OverloadTest(long long l, int &numbits);
void OverloadTest(long long *l);
void OverloadTest(bool b);

int main(int argc, int *argv)
{
    int myInt = 77;
    bool myBool = true;
    float myFloat = 3.14159f;
    double myDouble = 1.57;
    long long myLongLong = 12345;
    long long *ptrLongLong = NULL;
    char myChar = 'q';
    int myNumBits = 10;

    OverloadTest(myInt, myNumBits);
    OverloadTest(myFloat);
    OverloadTest(myDouble);
    OverloadTest(myLongLong, myNumBits);
    OverloadTest(ptrLongLong);
    OverloadTest(myChar, myNumBits);
    OverloadTest(myBool);

    return 0;
}

void OverloadTest(float _f) { int x = 0; }
void OverloadTest(int _n, int &_numbits) { int x = 0; }
void OverloadTest(double _d) { int x = 0; }
void OverloadTest(char _c, int &_numbits) { int x = 0; }
void OverloadTest(long long _l, int &_numbits) { int x = 0; }
void OverloadTest(long long *_l) { int x = 0; }
void OverloadTest(bool b) { int x = 0; } 
```

我什至试图简化：

```
void Date::ReflectToBitBuffer(void)
{
    unsigned int offsetBits = 0;
    unsigned int testVar2 = 12;
    unsigned int testVar1 = 1977;

    BitPacker::PackBits(m_packedBuffer, testVar1, offsetBits, testVar2);
} 
```

我仍然有歧义。如果我使用浮点数，但我不会。目前我完全困惑为什么我的测试场景不会产生这个错误。任何人都能够阐明问题是什么，因为第一个代码示例中的函数原型签名在我看来是不同的足以允许它编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:11:21.467

看起来“int”可以转换为所有 4 种类型的重载函数，并且它们都不完全符合您的调用。也许这就是问题所在。尝试使您的呼叫与函数定义完全匹配，或者为您的呼叫制作一个 int 版本？

# javascript - HTML5 Canvas 渲染异常

> ID：10038646
> 
> 赞同：1
> 
> 时间：2012-04-06T03:04:11.327
> 
> 标签：javascript, html, canvas, rendering, typeerror

我正在学习 HTML5（和 OO Javascript），并且正在尝试制作一个简单的游戏引擎，但渲染到画布在非常奇怪的条件下工作。[这](http://www.scs.ryerson.ca/~aalksne/valGame/)是该页面的链接，这是我的 index.html：

```
<html>
<head>
    <script type="text/javascript">
        function load()
        {
            var game = new Game();
            game.start();   
        }
    </script>
    <title>Game</title>
    <style>
        canvas
        {
            outline:0;
            border:1px solid #000;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>
<body onload="load()">
    <canvas id='c'></canvas>

    <script src="classes/Tuple.js"></script>
    <script src="classes/Rect.js"></script>
    <script src="classes/Sprite.js"></script>
    <script src="classes/Game.js"></script>
</body>
</html> 
```

首次加载时，它将在 Firefox 11.0 中给出**NS_ERROR_DOM_TYPE_MISMATCH_ERR**异常，在 Chrome 18.0 中给出**TypeError异常。**为了使它工作：

# 火狐11.0

*   在地址栏中选择 URL 并手动按 Enter 或
*   单击刷新按钮或
*   按 F5。

# 铬 18.0

*   在地址栏中选择 URL 并手动按 Enter 或
*   单击刷新按钮或
*   按 F5 或
*   按 Shift/Ctrl + F5。

**我怀疑**- 只是一个猜测，但似乎一个或多个 .js 文件在第一页加载期间被调用时不可用/准备就绪。在 Firebug 中经历了几次之后，精灵图像似乎永远不会在第一页请求中加载。

也许一些 .js 文件仍在被下载，因为正在对 Game() 进行实例化，然后被缓存，并且只有在第二个页面加载时才可用？

有任何想法吗？非常感谢您的采纳，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T04:23:52.893

我在本地复制了您的文件并进行了一些测试。在我看来，不是你的 JavaScript 文件不可用，而是你的精灵。

在调用`Game.start`. 当你这样做时：

```
roadSpritesheetImage.src = "assets/sprites/player/playerSpriteSheet.png"; 
```

这将开始异步下载图像。其余代码在图像完全加载之前执行，因此当您对图像进行切片时，您将其切片，就好像 src 属性为空一样。

这就是为什么你可以点击刷新并且一切都按预期工作......图像被缓存。

您可以通过在画布之前添加图像标签来抢占精灵的加载：

```
<img src="assets/sprites/player/playerSpriteSheet.png" style="display:none;" /> 
```

这会起作用，因为在内容（包括图像）完全加载之前不会触发正文加载事件（我相信，我必须查一下）。然后，如果将此图像分配给`img.src`，您将引用缓存的图像。

或者，您可以将其余游戏功能绑定到`img.onload`. 例如：

```
self.loadSprites = function()
{
    var roadSpritesheetImage = new Image();     
    roadSpritesheetImage.onload = function() { 
        self.entities.push(new Sprite("testTile", 
            roadSpritesheetImage, 
            new Tuple(16, 16), 
            new Rect(0, 0, 32, 16)));
        self.run();
    };

    roadSpritesheetImage.src = "assets/sprites/player/playerSpriteSheet.png";
};

self.run = function() {
    var drawSuccessful = false;
    drawSuccessful = self.entities[0].draw(self.context);
    self.entities[0].nextFrame();

    //if we managed to draw the Sprite successfully without any raised exceptions
    if(drawSuccessful) {
        setTimeout(self.run, 300);
    } else { alert("stopping execution of the game."); }
};

self.start = function()
{
    self.loadSprites();
}; 
```

这样做会更干净一些，并且可以保证您的资源没有任何竞争条件。

我为从源图像绘制 N 拼图而创建的 jQuery 插件遇到了类似的问题。当时我发现[这个 MDN 文档](https://developer.mozilla.org/en/Canvas_tutorial/Using_images)非常有用，尽管我最终使用了切片 div 而不是画布。

# java - 关于两行java代码

> ID：10038647
> 
> 赞同：1
> 
> 时间：2012-04-06T03:04:25.477
> 
> 标签：java

我正在尝试学习基于 java 的程序，但我对 java 还是很陌生。我对以下两行java代码感到非常困惑。我想我的困惑来自于“class”和“cast”等概念，只是不知道如何分析。

对于这个

```
XValidatingObjectCorpus<Classified<CharSequence>> corpus
        = new XValidatingObjectCorpus<Classified<CharSequence>>(numFolds); 
```

`<Classified<CharSequence>>`在 Java 编程方面有什么用？如何理解它与`XValidatingObjectCorpus`和的关系`corpus`

对于第二个

```
LogisticRegressionClassifier<CharSequence> classifier
            = LogisticRegressionClassifier.<CharSequence>train(para1, para2, para3) 
```

怎么理解右边`LogisticRegressionClassifier.<CharSequence>train`？`LogisticRegressionClassifier.<CharSequence>train`和 和有什么不一样`LogisticRegressionClassifier<CharSequence> classifier` ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:08:42.467

*   `<Classified<CharSequence>>`是一个通用参数。
*   `LogisticRegressionClassifier<CharSequence>`是泛型类型。
*   `LogisticRegresstionClassifier.<CharSequence>train`是一种通用方法。

[Java 泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:20:48.207

这些被称为[泛型](http://docs.oracle.com/javase/tutorial/java/generics/index.html)。他们告诉 Java使用内部对象的类型来创建外部类的一个实例——或者`XValidatingObjectCorpus`或者——。`LogisticRegressionClassifier`

通常，这些用于列表和数组，例如[ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)或[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)。

## `XValidatingObjectCorpus`和之间有什么关系`corpus`？

`corpus`只是`XValidatingObjectCorpus`您使用该语句创建的新对象的名称（因此是`= new...`部分）。

## 是什么`LogisticRegressionClassifier.<CharSequence>train`意思？

我不知道，真的。我建议[查看 API](http://alias-i.com/lingpipe/docs/api/com/aliasi/classify/LogisticRegressionClassifier.html#toString%28%29)（我认为这是正确的类）。

## `LogisticRegressionClassifier.<CharSequence>train`和 和有什么不一样`LogisticRegressionClassifier<CharSequence> classifier`？

你不能真正比较这两者。左边的`=`是对象*标识符*，右边的是*分配器*（可能是错误的词，但它就是这样做的，有点）。

两者一起定义了 的实例`LogisticRegressionClassifier`，表示创建该类型的对象，调用它`classifier`，然后将`train()`方法返回的值赋予它。再次，查看 API 以进一步了解它。

顺便说一句，这些看起来像是学习 Java 的可怜例子。从简单的东西开始，或者至少是代码中更简单的部分。看起来有人用长名字玩得太开心了（API 有更长的名字）。不过说真的，我只是完全理解了这一点，而 Java 是我的主要语言有一段时间了（当你尝试做简单的事情时，它会变得非常混乱）。不管怎样，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T03:21:42.750

```
public class Sample<T> { // T implies Generic implementation, T can be substituted with any object. 

    static <T> Sample<T> train(int par1, int par2, int par3){
        return new Sample<T>(); // you are calling the Generic method to return Sample object which works with a particular type of generic object, may it be an Integer or a CharSequence. --> see the main method.

    }

    public static void main(String ... a)
    {
        int par1 = 0, par2 = 0, par3 = 1;
// Here you are returning Sample object which works with a sequence of characters.
        Sample<CharSequence> sample = Sample.<CharSequence>train(par1, par2, par3);
// Here you are returning Sample object which works with Integer values.
        Sample<CharSequence> sample1 = Sample.<Integer>train(par1, par2, par3);

    }

} 
```

# video - 通过 c/c++ 库转移 gpu 输出

> ID：10038648
> 
> 赞同：0
> 
> 时间：2012-04-06T03:04:28.520
> 
> 标签：video, io, gpu

问题：我正在寻找一种方法将 gpu 的输出（比如 Nvidia Geforce）通过总线转移到其他组件。对于初学者，一个包含原始数据的简单文本文件就可以了。无论如何，我不需要利用 gpu 的处理能力，我只想要发送到监视器的原始输出，所以我怀疑 Cuda 是一个可行的解决方案。“打印屏幕”屏幕浮现在脑海。还有各种程序可以捕获输出并将其存储在视频文件中。这几乎可行，但我对原始 hdmi、串行或数字输出的数据结构（无论叫什么线）更感兴趣，即蓝色、白色或 hdmi 线。我愿意使用 linux 或 windows 来完成这项任务。示例代码会很好，但更重要的是，向正确方向轻轻推动将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T02:16:40.037

捕获 (a) 帧缓冲区的内容、(b) 视频内容和 (c) 物理总线信号是三个完全不同的请求。

如果你想要 (a) 然后搜索屏幕捕获工具和库。如果需要 (b)，则搜索屏幕录制工具或考虑使用视频采集卡并将输出路由到视频卡。如果您想要 (c)，请搜索 HDMI、DVI、VGA 总线分析仪，并准备好花大价钱。 [http://www.home.agilent.com/agilent/product.jspx?cc=AW&lc=eng&ckey=1143984&nid=-536902932.687229.00&id=1143984](http://www.home.agilent.com/agilent/product.jspx?cc=AW&lc=eng&ckey=1143984&nid=-536902932.687229.00&id=1143984)。

# r - 如何排除某些东西被 gsub() 替换

> ID：10038650
> 
> 赞同：0
> 
> 时间：2012-04-06T03:04:40.277
> 
> 标签：r, replace, design-patterns, matching, gsub

抱歉，如果这是一个愚蠢的问题，我对 R 真的很陌生。我想知道的是，有没有办法在 gsub 或类似函数中指定排除项？我的数据看起来像这样：(15: .0234 , 12: .0151)，我想用与 (a: .b , c: .d) 模式匹配的另一个项目替换前导 15。但是，只需调用 gsub 就会用新模式替换前导 15 和小数点后面的 15。简单地告诉它只替换第一次出现是行不通的，因为嵌套了很多这些模式。我在想的是从 gsub 中排除小数点后面的数字和空格 - 这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T16:29:48.780

如果您`perl=TRUE`在 gsub 中设置，那么您可以使用正面和负面的前瞻或后视，这可能会解决您的问题，例如，模式`15(?=:)`将匹配 15，后跟冒号（但不会匹配/替换冒号）并且不会匹配任何后面没有冒号的 15s。模式`(?

有关更多详细信息，请参见`?regex`“perl”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:38:08.543

我可以向您展示如何仅替换“前 15 位”，但您没有提供生成测试用例的代码，在这些测试用例中您是否替换了这些嵌套模式，所以这有点猜测。

```
 vec <- c('15: .0234' , '12: .0151')
 gsub("^15", "aa", vec)
#[1] "aa: .0234" "12: .0151" 
```

正则表达式模式中的“^”符号表示字符串的开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T17:45:35.157

`(a, b, c, d, ...)`我会考虑将字符串解析为向量，而不是使用正则表达式。例如，您可以这样做：

```
strsplit("15: .0234, 12: .0151", ": |, ")
# [[1]]
# [1] "15"     ".0234" "12"    ".0151" 
```

`==`那么使用, `match`, `%in%`,`[`等函数进行替换应该会容易得多。

完成后，您可以使用`paste`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T03:34:49.927

包含而不是排除可能更容易。

首先，设置一些测试数据：

```
test <- c("15: .0234 , 12: .0151") 
```

在字符串开头替换 15 的示例（^ 执行此操作）。

```
gsub("^15","x",test)
[1] "x: .0234 , 12: .0151" 
```

一个更通用的示例，用于替换字符串开头的任何数字。

```
gsub("^([0-9]+)","x",test)
[1] "x: .0234 , 12: .0151" 
```

删除任何数字后跟冒号 (:) 并替换为 x 和冒号的示例

```
gsub("([0-9]+):","x:",test)
[1] "x: .0234 , x: .0151" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T03:35:03.373

这对你有用吗？

```
(foo <- "15: .0234 , 12: .0151")
# "15: .0234 , 12: .0151"
(bar <- "a: .b , c: .d")
# "a: .b , c: .d"
gsub("^15",bar, foo)
# "a: .b , c: .d: .0234 , 12: .0151" 
```

如果没有，请提供一些示例数据以及显示您的最终目标的示例对象。一串你的数据可能是什么样子的，它是句子“简单地告诉它只替换第一次出现是行不通的，因为有很多嵌套的模式”对我来说有点不清楚。您想在字符串中找到“15”，但如果它位于结尾或以小数点开头的数字的一部分，则不是？

你读过帮助文件`?gsub`吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T04:31:10.690

```
gsub("^15","a: .b , c: .d","15: .0234 , 12: .0151") 
```

这会解决你的问题吗？

# java - 通过分隔符在java中读取文件

> ID：10038653
> 
> 赞同：0
> 
> 时间：2012-04-06T03:04:58.407
> 
> 标签：java

我有一个图像文件，其末尾附加了另一个文件，由字符串分隔符分隔。我想要做的是将java中的两个文件分开，将附加到末尾的文件写入它自己的文件中，我尝试了一些解决方案，但是它们要么损坏了文件，要么效率低下。有人可以指出我正确的方向吗？

这是迄今为止我最好的解决方案，它几乎可以工作，但会稍微损坏文件。

```
public class FileExtractor {

    private static final String START_OF_FILE_DATA = "SOFD34qjknhwe3rjkhw";

    public void extractFile(String[] files)
    {
        try 
        {
            String first = readFileToString(files[0]);
            Pattern p1 = Pattern.compile(START_OF_FILE_DATA + "(.*)" + START_OF_FILE_DATA + "(.*)", Pattern.DOTALL);
            Matcher matcher1 = p1.matcher(first);
            String filename = "";
            if(matcher1.find())
            {
                filename = matcher1.group(1);
            }
            else
            {
                //throw exception of corrupted file
            }
            FileOutputStream out = new FileOutputStream(new File("buildtest/" + filename));
            out.write(matcher1.group(2).getBytes("cp1251"), 0, matcher1.group(2).length());
            for (int i = 1; i < files.length; i++) 
            {
                String content = readFileToString(files[i]);
                Pattern p = Pattern.compile(START_OF_FILE_DATA + "(.*)", Pattern.DOTALL);
                Matcher matcher = p.matcher(content);
                if(matcher.find())
                {
                    out.write(matcher.group(1).getBytes("cp1251"), 0, matcher.group(1).length());
                }
                else
                {
                    //throw exception of corrupted file
                }
            }
            out.close();
        } 
        catch (IOException e) 
        {
            System.out.println(e.getMessage());
        }
    }

    private String readFileToString(String file)
    {
        byte[] buffer = new byte[(int) new File(file).length()];
        BufferedInputStream f = null;
        try {
            f = new BufferedInputStream(new FileInputStream(file));
            f.read(buffer);
        } 
        catch (Exception e)
        {

        }
        finally 
        {
            if (f != null) {
                try {
                    f.close();
                } catch (IOException ignored) {
                }
            }
        }
        String ret = "";
        try
        {
            ret = new String(buffer, "cp1251");
        }
        catch(Exception e)
        {

        }
        return ret;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:27:24.720

[`Scanner`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)用方法做到这一点`useDelimiter()`。基本上：

```
Scanner in = new Scanner(new File(your_file_name));
in.useDelimiter(START_OF_FILE_DATA);

String first = in.next();   // Read the first part
String seconds = in.next(); // Read the second part

// Save the separate files 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:25:22.517

我建议将文件作为字节数组而不是字符串来操作。所以你需要找到字节序列从哪里开始。

```
byte[] fileData = // read the file into a byte array
byte[] separator = separatorString.getBytes();
int index = 0;
for (;;) {
    int start = index;
    index = findIndexOf(fileData, separator, start);
    if (index == -1) break;
    byte[] nextImage = new byte[index - start + 1];
    System.arrayCopy(fileData, start, nextImage, 0, nextImage.length);
    saveAsImage(nextImage);
    index += separator.length;
} 
```

当然你需要实现`findIndexOf(byte[] where, byte[] what, int startIndex)`（看看`String.indexOf`实现）。我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-09T16:05:51.900

```
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import com.google.common.io.Files;

    public class FileExtractor {

    private static final int START_OF_FILE_DATA = 0x1C;
    private static final String TEST_FILE_NAME = "test.txt";

    public static void main(String[] args) throws IOException {//test
        String separator = String.valueOf((char) START_OF_FILE_DATA);
        String bigFile = "file one" + separator + "second file" + separator + "file No. 3";
        Files.write(bigFile.getBytes(), new File(TEST_FILE_NAME));//create big file in project directory

        new FileExtractor().extractFile(TEST_FILE_NAME);
    }

    public void extractFile(String bigFile) {
        try (FileInputStream fis = new FileInputStream(bigFile);) {

            List<byte[]> files = new ArrayList<byte[]>();
            ByteArrayOutputStream baos = new ByteArrayOutputStream();

            int in;
            while ((in = fis.read()) != -1) {//read 1 byte from file until the file ends
                if (in == START_OF_FILE_DATA) {//START_OF_FILE_DATA have length 1 byte. For longer you need to remake it.
                    files.add(baos.toByteArray());
                    baos.reset();
                }
                baos.write(in);//beware, START_OF_FILE_DATA will be included in the file
            }

            files.add(baos.toByteArray());

            for (byte[] file : files)
                System.out.println("next file:\n" + new String(file));

        } catch (IOException e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

**输出：**
下一个文件：
文件一个
下一个文件：
第二个文件
下一个文件：
文件号 3

# android - 在 Android 中添加图像视图

> ID：10038654
> 
> 赞同：-2
> 
> 时间：2012-04-06T03:05:22.077
> 
> 标签：android

我有一个链接可以带我到图像。我将如何访问此链接并在 Android 中显示此链接？

示例：`http://chart.finance.yahoo.com/z?s=GOOG&t=6m&q=l`返回一个图表。如何在 Android 中使用此图表（下载和显示）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:15:27.077

您可以使用 HTPPGET 连接来获取 URL 的连接。因此，如果您使用 HTTPGET，您将获得一个输入流。

获得输入流后，只需将该输入流转换为 a`Bitmap`或 drawable 并根据需要使用。

示例代码如下。

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 30000);
HttpConnectionParams.setSoTimeout(httpParameters, 30000);
HttpClient httpclient = new DefaultHttpClient(httpParameters);
HttpGet httpGet = new HttpGet(url);
HttpResponse httpResponse = httpclient.execute(httpGet);
in = httpResponse.getEntity().getContent();
Bitmap bmp = BitmapFactory.decodeStream(instream); 
```

所以你可以根据需要使用这个位图并且你需要处理所有的连接异常。

# android - 存储在数据库中的树状结构

> ID：10038655
> 
> 赞同：0
> 
> 时间：2012-04-06T03:05:25.943
> 
> 标签：android, sql, database, sqlite, database-design

所以我正在开发一个图书跟踪应用程序，我需要存储有关图书的数据。使用对象我会存储一个作者对象列表，其中包括系列对象。那些会有书的对象。

将其转换为数据库的最佳方法是什么？将使用 SQLite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:13:22.370

您将根据您的对象结构和关系创建表。

看来你所拥有的是一个`Authors`有很多`Series`（表）的（表）。`Series`有很多`Books`（表）。如果我错了，请纠正我，我没有很好地理解你的最后一句话。

如果我是正确的，那么您将需要如下外键：`author_id`您的 series 表`series_id`上的 a 和您的 books 表上的 a 以链接回父表以进行查询。让我知道它是否有帮助！

# javascript - 使用 jquery 更改悬停时的背景颜色无法正常工作

> ID：10038657
> 
> 赞同：1
> 
> 时间：2012-04-06T03:05:44.307
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 JQuery 更改悬停时的 menuOption 背景颜色。我所有的代码都可以正常工作，我遇到的唯一问题似乎与 CSS 相关。当背景颜色发生变化时，它似乎只改变了文本的背景颜色，而不是整个 div，这就是我想要的。我觉得奇怪的是，当我进入 menuOption 元素的内联 CSS 并手动更改背景颜色时，它会更改整个 div 背景颜色（这就是我想要的）。但是，我需要使用 JQuery 来实现这一点。

标记片段

```
<div class='menuOption' style='list-style-type:none; border:1px solid red; float:left; width:180px; height:20px;'>
<a href='index.php/shop/$sub[cat_url]/' style='color:black;'>
<div class='cat_name'>$sub[cat_title]</div>
</a>
<div class='sub_menu' style='display:none; z-index:100; margin-top:-12px; position:absolute; background-color:#ddd; margin-left:182px; box-shadow:3px 3px 6px #444;'>$itemlist</div>
</div> 
```

jQuery 代码段

```
$(".cat_name").hover(function(){
    $(this).parent().parent().find(".sub_menu").show();
    $(this, ".menuOption").css("background-color", "#bbb");
});
$(".cat_name").mouseleave(function(){
    $(this, ".menuOption").css("background-color", "#eee");
}); 
```

我很感激任何关于如何解决这个问题的建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:53:44.643

这应该做你想要的：

示例：http: [//jsfiddle.net/jrDph/3/](http://jsfiddle.net/jrDph/3/)

```
$(".cat_name").hover(function() {
    $menuOption = $(this).closest(".menuOption");
    $menuOption.find(".sub_menu").show();
    $menuOption.css("background-color", "#bbb");
},
function() {
    $menuOption = $(this).closest(".menuOption");
    $menuOption.find(".sub_menu").hide();
    $menuOption.css("background-color", "#eee");
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:36:16.897

> 试试这个代码

[http://jsfiddle.net/jt795/1/](http://jsfiddle.net/jt795/1/)

```
$(this, "menuoption") it's not the rightway 
```

单独对其进行编码 $(this).css(....) $("menuoption").css(...) 因为 $(this) 返回对象它不会给出标记名，所以你不能这样写那。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T03:38:15.847

这是您的 jQuery 的一个想法：

如果你打算使用 find() 向下搜索 DOM，那么你应该使用最接近的() 向上搜索 DOM（而不是 .parent().parent()）。您可以输入 .closest('div') 或 .closest('.menuOption')。然后，如果您决定需要添加另一个包含猫名的元素，则不必添加另一个 parent() 调用。一个方法调用通常比多个方法调用要好。

此外，我正在成为咖啡脚本的大力倡导者。[http://coffeescript.org/](http://coffeescript.org/)。如果你有心情学习一些新东西，你应该研究一下。它编译成 javascript 并且看起来很像 javascript 减去所有的括号、括号和分号。易于阅读的代码是最好的代码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T03:39:35.913

试试这个代码

```
$(".cat_name").hover(function(){
  $(this).parent().parent().find(".sub_menu").show();
  $(this).css("background-color", "#bbb");
  $(".menuOption").css("background-color", "#bbb");
}, function(){
  $(this).css("background-color", "#eee");
  $(".menuOption").css("background-color", "#eee");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T03:26:39.017

理论：您不会将 JavaScript 置于“在文档加载后执行此操作”块中。看起来像这样：

```
$.fn.ready(function() {
    $(".cat_name").hover(function(){
        $(this).parent().parent().find(".sub_menu").show();
        $(this, ".menuOption").css("background-color", "#bbb");
    });
    $(".cat_name").mouseleave(function(){
        $(this, ".menuOption").css("background-color", "#eee");
    });
}); 
```

作为参考，`$.fn.ready`是另一种说法`$(document).ready`（我相信它更快）。

不过，这可能完全是一个单独的问题。

# c# - 按两个变量对列表进行排序

> ID：10038664
> 
> 赞同：1
> 
> 时间：2012-04-06T03:06:35.657
> 
> 标签：c#, list, sorting, coding-style

获得了“ClientContacts”列表——其中有一个 LastName（如果是人类）或一个 EntityName（如果是通用联系人，例如 techsupport@mycompany.com）。

我想要做的是按姓氏字母顺序排序此列表，并且在不存在姓氏的情况下（换句话说，存在实体名），将该实体名视为姓氏，并继续排​​序，就好像它是姓氏一样。

所以**想要的结果**看起来像：

1.  邦德詹姆斯
2.  客户支持
3.  盖茨比尔
4.  技术支持
5.  威廉姆斯罗宾

* * *

这会导致崩溃，因为它会遇到一些没有姓氏的 ClientContact。

```
clientContactList.Sort(
    delegate(ClientContact c1, ClientContact c2) 
        { return c1.LastName.CompareTo(c2.LastName); }); 
```

以下允许我在不崩溃的情况下通过，它按 ClientContact EntityName 的第一个排序，然后是 LastNames：

```
 list.Sort(delegate(ClientContact c1, ClientContact c2) {
            try
            {
                return c1.LastName.CompareTo(c2.LastName);
            }
            catch
            {
                try
                {
                    return c1.EntityName.CompareTo(c2.LastName);
                }
                catch
                {
                    return c1.EntityName.CompareTo(c2.EntityName);
                }

            }
        }); 
```

导致：

1.  客户支持
2.  技术支持
3.  邦德詹姆斯
4.  盖茨比尔
5.  威廉姆斯罗宾

* * *

我怎样才能让我的列表排序看起来像上面想要的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T03:10:53.243

尝试使用此比较：

```
(c1.LastName ?? c1.EntityName).CompareTo(c2.LastName ?? c2.EntityName) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T03:12:36.543

如果你使用 LINQ，你可以这样做：

```
var sortedList = list.OrderBy( x => x.LastName ?? x.EntityName ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T03:12:25.317

你可以这样做：

```
list.Sort(delegate(ClientContact c1, ClientContact c2)
{
    return !string.IsNullOrEmpty(c1.LastName) ?
        c1.LastName.CompareTo(c2.LastName) :
        c1.EntityName.CompareTo(c2.LastName);         
}); 
```

# ruby-on-rails-3 - 如何在 Rails 3.2.2 中关闭 tinyint 布尔仿真？

> ID：10038665
> 
> 赞同：1
> 
> 时间：2012-04-06T03:07:32.960
> 
> 标签：ruby-on-rails-3, activerecord

根据 api 文档：

如果您希望禁用此仿真（这是 0.13.1 及更早版本中的默认行为），您可以将以下行添加到您的 application.rb 文件中：

```
ActiveRecord::ConnectionAdapters::Mysql[2]Adapter.emulate_booleans = false 
```

但是当我这样做时，我得到：

```
uninitialized constant ActiveRecord::ConnectionAdapters::Mysql2Adapter 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T05:42:17.837

对于稍后看到此主题的人，我需要在**Rails 3.2.0**中要求具有完整路径的 mysql2_adapter ；

```
module MyApp
  class Application < Rails::Application
    require 'active_record/connection_adapters/mysql2_adapter'
    ActiveRecord::ConnectionAdapters::Mysql2Adapter.emulate_booleans = false
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-13T23:02:41.153

我有同样的问题，我认为你有。但在我的情况下，我不想关闭 tinyint 模拟，而只是将遗留数据库的一些 tinyint 列设置为整数类型而不是布尔类型。搜索，我找到了解决问题的方法。**Matt Jones** ¹ 展示了 Rails 代码文档²，解释了如何：

```
class SomeModel < ActiveRecord::Base
    attribute :a_tinyint_1_column_that_isnt_a_boolean, Type::Integer.new
end 
```

¹ [https://www.ruby-forum.com/topic/201859](https://www.ruby-forum.com/topic/201859)
² [https://github.com/rails/rails/blob/daffea59db118fce4247d335eabea026cc54d7bc/activerecord/lib/active_record/attributes.rb#L17](https://github.com/rails/rails/blob/daffea59db118fce4247d335eabea026cc54d7bc/activerecord/lib/active_record/attributes.rb#L17)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T01:56:38.997

文档不要求您在 application.rb 中要求 activerecord。要求它解决了这个问题。

# javascript - 用于圆形裁剪图像的 CSS/JS

> ID：10038668
> 
> 赞同：5
> 
> 时间：2012-04-06T03:07:51.040
> 
> 标签：javascript, ruby-on-rails, css, imagemagick

我的设计师给了我一个我希望能够复制的外观，但我不太确定如何做到这一点。

*   第一部分是头像的圆形裁剪（是方形上传）
*   第二部分是讲话泡泡

我愿意在后端做第一部分，但更喜欢 CSS/JS 解决方案。

![在此处输入图像描述](../Images/0de93752e4dadbb9a4714a7eab361df0.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T03:20:34.993

对于圆形图像，您可以使用 CSS 的边框半径：只需使其足够大，以便圆角接触即可。

```
.profile-img {
    -moz-border-radius: 50%;
    -webkit-border-radius: 50%;
    border-radius: 50%;
} 
```

卢克的回答对气泡来说是一个很好的答案：我已经根据它创建了气泡。我还使用 :before 和 :after CSS 伪元素调整了这种三角形技术，以在我的个人网站上创建一些有趣的效果。你可以让一个比另一个大，并且如果你需要的话，它看起来像一个边框。

[http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T03:12:07.107

对于气泡部分，我建议使用本教程。[http://nicolasgallagher.com/pure-css-speech-bubbles/](http://nicolasgallagher.com/pure-css-speech-bubbles/)我经常用它来表达想法和学习如何自己做。我给你一个教程，因为我想让你学习如何去做。如果你给了我需要帮助的代码，那么我会给你一个关于如何修复它的答案。你有任何代码吗？

同样对于裁剪，我认为一种快速的方法是在图像周围制作一个方形包装 div，然后给它一个边框半径（css），它是其中一侧长度的一半。将溢出设置为隐藏即可。

干杯!

# c# - 这段 c# 代码有异味..似乎应该有一种更简洁的方式来编写它

> ID：10038671
> 
> 赞同：0
> 
> 时间：2012-04-06T03:08:15.040
> 
> 标签：c#, string

任何人有任何想法来清理这个？

```
 public string FullName
    {
        get
        {
            var fullName = new StringBuilder();
            if (FirstName.Length > 0)
                fullName.Append(FirstName);
            if (LastName.Length > 0)
            {
                if (fullName.Length > 0)
                    fullName.Append(" " + LastName);
                else
                    fullName.Append(LastName);
            }
            return fullName.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T03:11:59.297

```
FullName = string.format("{0} {1}",FirstName,LastName).Trim() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:12:28.483

首先，在`StringBuilder`这里使用 a 似乎没有必要，因为您确切知道可以执行多少个连接 (4)，并且除非它已被证明是一个瓶颈，否则只会使代码混乱。

你可以通过使用来使它更简单`String.Format()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T03:25:05.497

```
public string FullName
{
    get
    {
        return string.IsNullOrEmpty(FirstName) ? LastName 
            : string.IsNullOrEmpty(LastName) ? FirstName : FirstName + " " + LastName;
    }
} 
```

# eclipse - 将 Eclipse 与 Play Framework 2.0 一起使用

> ID：10038673
> 
> 赞同：11
> 
> 时间：2012-04-06T03:09:21.043
> 
> 标签：eclipse, playframework-2.0

我是框架 2.0 的新手。在 Play 1.0 中，在您对项目进行 Eclipsify 之后，您有一个 *.launch 文件，您可以使用它来启动您的项目。

在 Play 2.0 中日食之后，您似乎没有任何类似的东西。有没有办法使用 Eclipse 来控制您的启动和调试 Play 2.0？

一个类似的问题： [Debug Playframework 2.0 in Eclipse](https://stackoverflow.com/questions/9778849/debug-playframework-2-0-in-eclipse)

该问题的答案没有足够具体的说明让我知道如何遵循。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-06T07:49:14.190

问题一：

完成 Eclipse 后，打开 Eclipse 并选择`File -> Import... -> Existing Projects into Workspace`. 将打开一个对话框，选择您的 Play Framework 2.0 项目文件夹并单击`Finish`。

问题2：

1.  使用`play debug run`. 你会看到这样的东西：

    在地址监听传输 dt_socket：9999 ...

2.  在 Eclipse 中，右键单击您的项目`Project Explorer`并选择`Debug As -> Debug Configurations...`.

3.  `Debug Configurations`将打开一个名为的新对话框。双击`Remote Java Application`，右侧会出现一个新窗口。将 更改为`Connection properties`指向 host`localhost`和 port `9999`。点击`Debug`按钮确认。

4.  在 Eclipse 中的应用程序中放置一个断点。

5.  在网络浏览器中正常尝试您的应用程序。如果它遇到断点，那么 Eclipse 将被置于最前面并让您进行调试。

# c# - 从包含变量的 C# 执行多个 Powershell 命令

> ID：10038685
> 
> 赞同：1
> 
> 时间：2012-04-06T03:10:30.650
> 
> 标签：c#, sharepoint, powershell, sharepoint-2010

我有一个我想从 C# 运行的 powershell 脚本。脚本的内容是：

```
$w = Get-SPWebApplication "http://mysite/"
$w.UseClaimsAuthentication = 1
$w.Update()
$w.ProvisionGlobally()
$w.MigrateUsers($True) 
```

并用于将站点设置为基于声明的身份验证。我知道如何从 C# 执行多个命令，但不确定如何在考虑变量 $w 的情况下运行整个脚本。

```
PowerShell OPowerShell = null;
Runspace OSPRunSpace = null;
RunspaceConfiguration OSPRSConfiguration = RunspaceConfiguration.Create();
PSSnapInException OExSnapIn = null;
//Add a snap in for SharePoint. This will include all the power shell commands for SharePoint
PSSnapInInfo OSnapInInfo = OSPRSConfiguration.AddPSSnapIn("Microsoft.SharePoint.PowerShell", out OExSnapIn);
OSPRunSpace = RunspaceFactory.CreateRunspace(OSPRSConfiguration);
OPowerShell = PowerShell.Create();
OPowerShell.Runspace = OSPRunSpace;
Command Cmd1 = new Command("Get-SPWebApplication");
Cmd1.Parameters.Add("http://mysite/");
OPowerShell.Commands.AddCommand(Cmd1);
// Another command
// Another command
OSPRunSpace.Open();
OPowerShell.Invoke();
OSPRunSpace.Close(); 
```

我将如何通过将它们添加为单独的命令或将脚本保存到文件并将其读取以执行来执行所有命令？最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:19:29.530

您可以使用该[`AddScript`](http://msdn.microsoft.com/en-us/library/dd182485%28v=vs.85%29.aspx)方法添加包含脚本的字符串：

```
OPowerShell.Commands.AddScript("@
 $w = Get-SPWebApplication ""http://mysite/""
 $w.UseClaimsAuthentication = 1
 $w.Update()
 $w.ProvisionGlobally()
 $w.MigrateUsers($True)
"); 
```

您可以在调用管道之前将多个脚本摘录添加到管道。您还可以将参数传递给脚本，例如：

```
OPowerShell.Commands.AddScript("@
 $w = Get-SPWebApplication $args[0]
 ...
");
OPowerShell.Commands.AddParameter(null, "http://mysite/"); 
```

您还可以查看[MSDN 上的 Runspace Samples](http://msdn.microsoft.com/en-us/library/windows/desktop/ee706576%28v=vs.85%29.aspx)。

--- 费尔达

# css - 歌剧中的 CSS 字体看起来很奇怪

> ID：10038686
> 
> 赞同：0
> 
> 时间：2012-04-06T03:10:35.827
> 
> 标签：css, opera, font-face, ubuntu-11.10

因此，我正在开发一个通过 Google webfonts 系统使用自定义字体的网站。在 Firefox 和 Chrome 中，所有字体看起来都很好。但是在 Ubuntu 11.10 上运行的 Opera 11.62 中，15px Lato 看起来真的很奇怪：http: [//i.imgur.com/x2GgQ.png](http://i.imgur.com/x2GgQ.png)。字体的重量似乎在字母中有所不同。我认为它只是应用暗示方式太多了。Google webfonts 正在以 .woff 格式发送文件，如果这会影响任何内容。

如何解决此问题或阻止 Opera 应用自定义字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:05:28.633

是的，您的屏幕截图肯定表明字体的提示并不完美。您可以尝试通过 Font Squirrel Generator 运行 Lato，看看是否能得到更好的结果。尽管我们的程序越来越好，但自动提示程序还是有点失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:14:37.540

一些想法：

1.  您是否尝试过加载其他 .woff 字体？他们看起来也很奇怪吗？
2.  尝试`font-weight`在 CSS 中设置一些东西，看看是否能解决它。
3.  它[在 Google 字体目录页面](http://www.google.com/webfonts/specimen/Lato)上显示奇怪吗？

可悲的是，我的 Ubuntu 11.10 系统*今天*无法使用，所以我无法测试。

# jquery - 使用 jQuery 和 JSON 的跨域请求在 Internet Explorer 中不起作用（安全问题？）

> ID：10038689
> 
> 赞同：2
> 
> 时间：2012-04-06T03:10:53.010
> 
> 标签：jquery, cross-domain

我想使用 Ajax 发出请求，但当我意识到域不同时，我决定改用 JSON。

编码：

### 主 PHP 文件（脚本代码）

```
$(".name").click(function(){
    //Get information
    var id = $(this).attr("id").substring(1);

    jQuery.getJSON("https:/otherdomain.com/makereq.php?id="+id+"&callback=?",
    function(data) {
         alert("id: " + data.id);
         return false;
    });
}); 
```

### Makereq PHP 文件

```
$jsonData = array('id'=>$_GET['id']);
echo $_GET['callback'] . '(' . json_encode($jsonData) . ');'; 
```

这在 Firefox 中运行良好。我得到数据，警报显示发送和接收的 id。但是在 Internet Explorer 中，会出现一个安全错误，指出内容已被阻止且未接收到数据。在 Chrome 中，它也不起作用。

为什么会发生这种情况或我做错了什么？是否有任何解决方案可以在没有来自其他域的浏览器错误/警报的情况下发送和接收数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:11:01.580

查看[jQuery](http://api.jquery.com/jQuery.getJSON/)页面`getJSON`。当您尝试在跨域请求中使用带有回调的数据时，**JSONP**部分就是您所追求的。

`getJSON()`不会在这里工作。您要做的是使用回调的名称编写一个函数，并将您的 php 文件返回的数据实际加载为 javascript 文件。

```
<script src="https:/otherdomain.com/makereq.php?id=1&callback=callBack"></script>

<script>
    callBack(data) {
       [do stuff...]
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:46:56.127

我认为这不能以这种方式进行。尝试在您的域上使用桥接 PHP 文件，该文件使用[cURL](http://en.wikipedia.org/wiki/CURL)读取其他主机内容。这肯定会奏效。

# junit - JUnit 数据库测试和测试排序

> ID：10038706
> 
> 赞同：5
> 
> 时间：2012-04-06T03:12:47.157
> 
> 标签：junit, database-testing

我认为数据库测试通常包含 CRUD 操作。因此，这些函数会修改数据库，使预期的值发生变化：例如。如果我测试 SELECT 返回 2 行，如果删除测试第一次运行，我可能会失败。类似于插入。JUnit 似乎没有按照定义运行测试，这使得期望值变得困难。

如果我在每次测试时都重新初始化我的数据库，它可能会矫枉过正而且速度很慢。那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T04:09:40.813

是的，正如 Steve Hall 所指出的，使用事务测试可以 100% 地解决测试和测试运行之间的数据库一致性问题。Spring 为这种类型的测试提供了非常精细的支持（参见[TestContext Framework 中的事务管理](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html#testcontext-tx)），但没有它实现起来并不难。

在最后回滚其事务的事务测试内部，只要它们是由测试启动的事务的一部分，您就可以自由地将任何 CRUD 操作应用于您的数据。然后在测试拆卸期间单次回滚消除了对数据库的所有 CRUD 影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:19:53.870

您可能想查看类似[DBUnit](http://www.dbunit.org/)的内容。如果这不符合您的需求，那么您可以尝试将您的测试包装在数据库事务中。您可以使用`setup`and`teardown`方法来启动和回滚您的事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T03:18:58.340

您的单元测试不应该依赖于顺序，但是对于单元级测试，您通常不应该使用真实的数据库。您应该使用 DBUnit 之类的东西来模拟数据库，或者如果您的数据库隐藏在服务层接口后面，请为此创建一个模拟。

# python - Python C-API PyUnicode_FromString

> ID：10038709
> 
> 赞同：1
> 
> 时间：2012-04-06T03:13:24.547
> 
> 标签：python, python-c-extension

我正在使用 Python C API，虽然我用谷歌搜索并发现了一些神秘的答案（这并不能解决我的问题），但我似乎无法克服这个错误。

使用`gcc -shared [...] 'pkg-config --cflags --libs python3' -fPIC [...]` *(而且，是的，pkg-config 行在反引号中)*编译我的程序时，但它会产生以下错误消息：

```
‘PyUnicodeUCS2_FromString((const char *)"[...]")’ is not a function 
```

有问题的代码行很简单： PyObject *value = PyUnicode_FromString("foo") 实际上取自[Python3 文档](http://docs.python.org/py3k/extending/newtypes.html#adding-data-and-methods-to-the-basic-example%28)。 *该示例的内容可以很好地编译并在 Python 解释器中运行，而不会出现与`gcc`.*

*非常*感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-24T18:39:12.483

在开发环境 (LabVIEW) 中嵌入 Python 时，我遇到了这种情况。我无法`PyUnicode_FromString`从 Python 文档示例中找到该函数，但我能够以`PyUnicodeUCS2_FromString`同样的方式成功使用 .

# android - 分支选项菜单

> ID：10038714
> 
> 赞同：0
> 
> 时间：2012-04-06T03:14:25.223
> 
> 标签：android, android-layout, android-widget

前几天我看到一个带有`branching options menu`. 我搜索了很多，但没有找到任何信息。我怎样才能创建这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:21:48.713

使用以下链接作为创建菜单和子菜单的参考。

[链接1](http://smartandroidians.blogspot.in/2009/11/creating-menu-submenu.html)

[链接2](http://www.edumobile.org/android/android-beginner-tutorials/sub-menu/)

如果没有任何效果，那么您也可以尝试以下方法::

[从创建菜单](http://developer.android.com/guide/topics/ui/menus.html)中可以看出，子菜单不能包含子菜单。

单击选项菜单中的项目后，您可以显示上下文菜单。这可以在屏幕上方的浮动视图中显示您的另外五个选项。

您必须覆盖 onCreateContextMenu 才能创建 ContextMenu，我认为您必须在 onOptionsItemSelected 方法中手动调用 contextMenu。有关如何创建上下文菜单的资源，请参阅上述文章中的本[段](http://developer.android.com/guide/topics/ui/menus.html#context-menu)。

要打开 ContextMenu，您可以在 Activity 中调用[openContextMenu](http://developer.android.com/reference/android/app/Activity.html#openContextMenu%28android.view.View%29)。您可能需要先注册 menuitem 才能使您的活动找到正确的上下文菜单。

# asp.net - 我应该使用会话变量来防止无限的 Web 表单弹出窗口吗？

> ID：10038719
> 
> 赞同：0
> 
> 时间：2012-04-06T03:14:49.413
> 
> 标签：asp.net, vb.net

我有一个允许用户查看家庭成员的 Web 应用程序。

当用户点击一个家庭成员时，它会显示该成员的基本信息。还有一个网格显示该家庭成员的相关家庭成员。（例如，用户可以点击父亲链接。从该弹出窗口中，他们可以点击父亲的父亲链接，然后点击父亲的父亲的孙子链接等）。

为了减少出现在屏幕上的弹出窗口的数量，我想阻止用户不断地点击超过三个成员的家庭链接。

跟踪弹出了多少数据表单的最佳方法是什么？或者这可以通过 Web 应用程序可靠地完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:34:17.943

我认为会话听起来有点矫枉过正。我会将计数写入页面上的隐藏字段。这是一种非常灵活的技术。它支持基于客户端和服务器端的弹出窗口加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:36:47.820

当然有很多方法可以做到这一点，所有可能都是有效的。我会在每个窗口（不是全局）上维护一个数字。我会使用每个弹出窗口的查询字符串来增加这个数字并将其推送到新窗口上。每个窗口都会将此计数加一并将其嵌入其页面上的链接中。一旦窗口中的计数为 2，则不再在该窗口中呈现超链接。这样他们一次只能打开 3 个，但仍然可以关闭一个以返回一个级别，然后单击不同的链接继续。

# windows - Windows驱动程序可以访问进程的页表吗？

> ID：10038720
> 
> 赞同：2
> 
> 时间：2012-04-06T03:15:11.603
> 
> 标签：windows, driver, virtual-memory

在 Windows 中，内核驱动程序可以执行诸如固定内存以备份虚拟地址范围 ( `MMProbeandLockPages`) 之类的操作。但是我找不到一种方法来实际验证虚拟地址对特定进程是否有效。换句话说，内核驱动程序有没有办法检查给定的虚拟页面是否包含在给定进程的页表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:26:44.067

如果驱动程序未在进程上下文中运行，则必须先调用 KeStackAttachProcess。

然后，您可以在 try / except 块中执行 ProbeForRead 或 ProbForWrite。例如，请参阅 WinDDK 示例中 src\general\ioctl\wdm\sys\sioctl.c 中的 IOCTL_SIOCTL_METHOD_NEITHER 处理。

# c# - 使用 C#，如何关闭格式错误的 XML 标记？

> ID：10038722
> 
> 赞同：3
> 
> 时间：2012-04-06T03:15:29.053
> 
> 标签：c#, xml, regex

## 背景

我继承了一组 XML 文件，这些文件始终包含一个带有两个开口而不是一个开口和一个闭包的标签。我需要遍历所有这些文件并更正格式错误的 XML。

这是错误 XML 的简化示例，它是每个文件中完全相同的标记：

```
<meals>
    <breakfast>
         Eggs and Toast
    </breakfast>
    <lunch>
         Salad and soup
    <lunch>
    <supper>
         Roast beef and potatoes
    </supper>
</meals> 
```

请注意，`<lunch>`标签没有闭包。这在所有文件中都是一致的。

## 问题

最好使用`regex`C# 来解决这个问题，如果是这样，我将如何做到这一点？

我已经知道如何迭代文件系统并将文档读入 XML 或字符串对象，因此您无需回答该部分。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T03:57:43.203

如果您损坏的 XML 相对简单，如您在问题中所示，那么您可以摆脱一些简单的逻辑和基本的正则表达式。

```
 public static void Main(string[] args)
    {
        string broken = @"
<meals>
    <breakfast>
         Eggs and Toast
    </breakfast>
    <lunch>
         Salad and soup
    <lunch>
    <supper>
         Roast beef and potatoes
    </supper>
</meals>";

        var pattern1 = "(?<open><(?<tag>[a-z]+)>)([^<]+?)(\\k<open>)";
        var re1 = new Regex(pattern1, RegexOptions.Singleline);

        String work = broken;
        Match match = null;
        do
        {
            match = re1.Match(work);
            if (match.Success)
            {
                Console.WriteLine("Match at position {0}.", match.Index);
                var tag = match.Groups["tag"].ToString();

                Console.WriteLine("tag: {0}", tag.ToString());

                work = work.Substring(0, match.Index) +
                    match.Value.Substring(0, match.Value.Length - tag.Length -1) +
                    "/" +
                    work.Substring(match.Index + match.Value.Length - tag.Length -1);

                Console.WriteLine("fixed: {0}", work);
            }
        } while (match.Success);
    } 
```

该正则表达式使用 .NET 正则表达式的“命名”捕获组功能。`?<open>`表示由封闭括号捕获的组将可以通过名称“open”访问。该分组捕获开始标签，包括尖括号。它假定开始标记上没有 xml 属性。在该分组中，还有另一个命名组 - 这个组使用名称“标签”并捕获标签名称本身，没有尖括号。

然后，正则表达式会延迟捕获一堆中间文本 ( `(.+?)`)，然后是另一个“打开”标记，该标记由反向引用指定。懒惰的捕获就在那里，所以它不会在文本中吞食任何可能的干预打开标签。

由于 XML 可能跨越多个换行符，因此您需要`RegexOptions.Singleline`.

然后，该逻辑在循环中应用此正则表达式，将任何匹配的文本替换为固定版本 - 带有结束标记的有效 xml。固定的 XML 是通过简单的字符串切片生成的。

如果出现以下情况，此正则表达式将不起作用：

*   开始标签上有 XML 属性
*   有奇怪的间距 - 包含标签名称的尖括号之间的空格
*   标签名称使用破折号或数字或任何非小写 ASCII 字符
*   之间的字符串包括尖括号（在 CDATA 中）

...但这种方法仍然有效。你只需要稍微调整一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T03:58:05.523

如果情况真的像您描述的那样简单，我认为正则表达式会有点矫枉过正（即，它总是相同的标签，而且总是只有一个标签）。如果您的 XML 文件相对较小（千字节，而不是兆字节），您可以将整个内容加载到内存中，使用字符串操作插入缺少的斜杠，然后就可以结束了。这将比尝试使用正则表达式更有效（更快）。如果您的文件非常大，您可以将其修改为逐行读取文件，直到找到第一个`<lunch>`标签，然后查找下一个并进行相应修改。这里有一些代码供您入门：

```
var xml = File.ReadAllText( @"C:\Path\To\NaughtyXml.xml" );

var firstLunchIdx = xml.IndexOf( "<lunch>" );
var secondLunchIdx = xml.IndexOf( "<lunch>", firstLunchIdx+1 );

var correctedXml = xml.Substring( 0, secondLunchIdx + 1 ) + "/" +
xml.Substring( secondLunchIdx + 1 );

File.WriteAllText( @"C:\Path\To\CorrectedXml.xml", correctedXml ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T04:08:06.723

如果您的 xml 文件中的唯一问题是您所显示的内容，那么 Chesso 的答案应该足以满足需要。事实上，即使它完全满足了我 80-90% 的需求，我也会走这条路——其余的情况，我可能会选择手动处理或编写特定的处理代码。

就是说，如果文件结构很复杂并且不像您描述的那样简单，那么您可能应该查看一些文本词法分析器，它可以让您将文件内容分解为标记。标记的语义分析以检查和纠正违规行为必须由您完成，但至少解析文本会更简单。请参阅下面链接到 C# 中词法分析的一些资源：

1.  [http://blogs.msdn.com/b/drew/archive/2009/12/31/a-simple-lexer-in-c-that-uses-regular-expressions.aspx](http://blogs.msdn.com/b/drew/archive/2009/12/31/a-simple-lexer-in-c-that-uses-regular-expressions.aspx)
2.  [穷人的 C#“词法分析器”](https://stackoverflow.com/questions/673113/poor-mans-lexer-for-c-sharp)
3.  [http://www.seclab.tuwien.ac.at/projects/cuplex/lex.htm](http://www.seclab.tuwien.ac.at/projects/cuplex/lex.htm)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-06T09:45:17.927

最好避免将它们视为 XML 文件：它们是非 XML 文件。这立即告诉您，为处理 XML 设计的工具将毫无用处，因为输入不是 XML。您需要使用基于文本的工具。在 UNIX 上，这可能是 sed/awk/perl；我不知道 Windows 上的等价物是什么。

# python - Python/iptables：捕获所有 UDP 数据包及其原始目的地

> ID：10038727
> 
> 赞同：12
> 
> 时间：2012-04-06T03:16:49.807
> 
> 标签：python, sockets, udp, iptables, packet-capture

我正在尝试编写一个`iptables`规则，将所有传出的 UDP 数据包重定向到本地套接字，但我还需要目标信息。我从

```
sudo iptables -t nat -A sshuttle-12300 -j RETURN   --dest 127.0.0.0/8 -p udp
sudo iptables -t nat -A sshuttle-12300 -j REDIRECT --dest 0.0.0.0/0   -p udp --to-ports 15000 
```

太好了，现在我可以通过使用端口 15000 上的套接字来获取所有传出的 UDP 数据包。

现在，我需要目标信息（目标主机和端口号），所以一个简单的 UDP 套接字是不够的；需要一个原始套接字，以便获得完整的 IP 标头。

然而，事实证明，收到的数据包似乎是针对`localhost:15000`. 这是有道理的，因为那是套接字所在的位置，但这不是我想要的；我想要在数据包被重定向之前的主机/端口`iptables`。

谷歌搜索导致了[这个问题](https://stackoverflow.com/questions/5615579/how-to-get-original-destination-port-of-redirected-udp-message)，答案提出了两种方法：`TPROXY`并且`SO_ORIGINAL_DST`，推荐前者，所以这就是我试图采用的方法。

添加了以下`iptables`规则`TPROXY`：

```
sudo iptables -t mangle -A PREROUTING -j TPROXY --dest 0.0.0.0/0 -p udp --on-port 15000 
```

从[tproxy.txt](http://www.mjmwired.net/kernel/Documentation/networking/tproxy.txt)读取，我们需要创建一个带有`IP_TRANSPARENT`选项的监听套接字（这是作为 root 完成的）：

```
from socket import *
s = socket(AF_INET, SOCK_RAW, IPPROTO_UDP)
# The IP_TRANSPARENT option isn't defined in the socket module.
# Took the value (19) from the patch in http://bugs.python.org/issue12809
s.setsockopt(SOL_IP, 19, 1)
s.bind(('0.0.0.0', 15000))
s.recv(4096) # Will hang until it receives a packet 
```

好的，现在让我们编写另一个脚本来生成一个测试包，看看是否有任何事情发生：

```
from socket import *
s = socket(AF_INET, SOCK_DGRAM)
s.connect(('192.168.1.1', 9001))
s.send('hello') 
```

但随后接收方没有任何反应。`recv`通话似乎挂起，没有收到任何数据。

因此，总体问题是：

*   从`TPROXY`规则接收数据的代码有问题吗？

或者

*   是否有另一种方法来实现这一点（将所有传出的 UDP 数据包重定向到本地套接字以获取目标信息）？

**编辑**：我应该坚持我想**重定向**（因此拦截）数据包，而不仅仅是在它们通过时检查它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T07:25:40.467

我发现你的问题很有趣。

以下解决方案基于标记主机生成的 UDP 流量并将其重新路由回本地主机应用程序。在应用程序中，应该使用 UDP 套接字来读取数据，即使是不是发往主机本身的数据（见下文如何）。

# 网络设置：

*   标记退出主机的 UDP 流量
*   标记为 1 的流量，传递到路由表 100 进行处理
*   将流量路由到应用程序

> ```
> iptables -A OUTPUT -t mangle -p udp -j MARK --set-mark 1
> ip rule add fwmark 1 lookup 100
> ip route add local 0.0.0.0/0 dev lo table 100 
> ```

# 套接字设置：

*   创建 UDP 套接字（常规）
*   为非本地地址启用绑定/读取

> ```
> #ifndef IP_TRANSPARENT
> #define IP_TRANSPARENT 19
> #endif
> 
> int val = 1; 
> setsockopt(sockfd, SOL_IP, IP_TRANSPARENT, &val, sizeof(val)); 
> ```

您现在应该可以从套接字读取。来自 Etienne Perot 的提示：要接受所有 UDP 流量，请绑定到 0.0.0.0。

我在这里发现非常有趣的是，本地生成的流量（而不是路由流量）可以使用 iptables 和路由规则进行分类和重新路由。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T19:36:56.187

您可以使用 tun/tap 设备，可以简单地从 python 中读取它，例如：

隧道.py

```
import os
from fcntl import ioctl
from select import select
import struct
import subprocess

TUNSETIFF = 0x400454ca
TUNMODE = 0x0001

tunFile = os.open("/dev/net/tun", os.O_RDWR)
ifs = ioctl(f, TUNSETIFF, struct.pack("16sH", "tun%d", TUNMODE))
ifname = ifs[:16].strip("\x00")
print "Allocated interface %s. Configure it and use it" % ifname
subprocess.call("ifconfig %s 192.168.13.1" % ifname,shell=True)
# Reading
def read():
    r = select([tunFile], [], [])[0][0]
    if r == tunFile:
        return os.read(tunFile, 1600)
    return None

# Writing
def write(buf):
    os.write(tunFile, buf) 
```

完整的例子可以在[这里找到](http://www.secdev.org/projects/tuntap_udp/)

并将您的数据包路由到接口“tun0”或打印的 inetrface 名称。

linux发行版不需要安装任何东西，但如果你在windows上使用[这个](http://www.varsanofiev.com/inside/using_tuntap_under_windows.htm)，对于mac os使用[这个](http://tuntaposx.sourceforge.net/)

编辑 1[注意](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)：

> tap 接口和 tun 接口之间的区别在于，tap 接口输出（并且必须给出）完整的以太网帧，而 tun 接口输出（并且必须给出）原始 IP 数据包（并且内核不添加以太网头） ）。接口的功能是像 tun 接口还是像 tap 接口，在创建接口时用标志指定。

要查找数据包头信息（如 src、dst 等...），您可以使用[dpkt](http://code.google.com/p/dpkt/)

```
from dpkt import ip 
from tunnel import read,write # tunnel.py
while 1:
    data = read()
    if data:
        ipObj = ip.IP(data[4:])
        print ipObj.src, ipObj.dst 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T04:37:46.213

你控制主机？如果是这样，您可以使用[Open vSwitch](http://openvswitch.org/)编写一个仅涵盖相关流的规则，将所有 IP 信息保留到分接端口（然后只需将侦听器绑定到分接端口）。

（OVS 可以做各种复杂得多的事情，但这是一个相对简单的任务）

# python - 在 django 上的两个日期字段之间进行过滤

> ID：10038731
> 
> 赞同：0
> 
> 时间：2012-04-06T03:17:57.903
> 
> 标签：python, django, orm

我有一个模型：

```
class FeaturedGroup(models.Model):
'''
Featured Group. Here we store the diferents groups of featureds items
'''
slug = models.SlugField(unique=True)
title = models.CharField(max_length=100)
description = models.TextField(blank=True)
picture = models.ImageField(upload_to="upload", default="img-tmp/featured_category.png")
items = models.ManyToManyField('FeaturedItem', blank=True, null=True)
cnt_show = models.IntegerField(_('Quantity of items'))
cnt_max = models.IntegerField(_('Max items'))
rotation_time = models.IntegerField()
price = CurrencyField(_("Price for each Freatured item"), decimal_places=2,
              max_digits=8, blank=True, null=True,
              help_text=_("Enter the price of the each featured item")) 
```

我在那个类中有一个方法是：

```
def all_items(self, limit=False):
    key = 'featured_all_items_%(limit)s_%(id)s'%{'id':self.id, 'limit':limit}
    items = cache.get(key)
    if not items:
        featured = self.items.filter(date_from=datetime.date.today)
        featured = featured.order_by('-print_count', 'id')
        if limit:
            featured = featured[:self.cnt_show]
        items = []
        for item in featured:
            item.print_count += 1
            items.append(item.get_object())
            item.get_object()
            item.save()
        cache.set(key, items, settings.CACHE_TIME)
    return items 
```

问题在于 self.items.filter(date_from=datetime.date.today) 的那条线，因为如果我有一个产品，例如 date_from 是一个代表昨天的值，但 date_to 是一个代表明天的值，今天它仍然是有效，但用那条线它不。

我已经尝试过范围，但我失败了。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T08:35:19.423

@Ignacio 是对的。

特色 = self.items.filter(date_from__lte=today, date_to__gte=today)

做到了

# ssl - nginx缓存$方案？一些保活设置？

> ID：10038736
> 
> 赞同：0
> 
> 时间：2012-04-06T03:18:49.590
> 
> 标签：ssl, nginx

新网站。http转到drupal。https 到静态页面。一旦我访问了 ssl 站点，我就无法回到非 ssl 站点，直到我清除缓存。

[http://donsbox.com](http://donsbox.com) [https://donsbox.com](https://donsbox.com)

我应该寻找什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:32:40.630

这是罪魁祸首：add_header Strict-Transport-Security "max-age=7200"; （见[http://www.chromium.org/sts](http://www.chromium.org/sts)）。猜猜我会为 SSL 使用不同的 FQN，例如 ssl.donsbox.com

# android - ANR 错误 --> ANR keyDispatchingTimedOut

> ID：10038741
> 
> 赞同：3
> 
> 时间：2012-04-06T03:19:20.507
> 
> 标签：android

我在开发控制台中的 ANR 错误下报告了此问题。我是否需要`onSignalStrengthsChanged`在我的服务中生成一个工作线程来停止长 sql 查询的 ANR？

我也无法判断这是否是互斥锁，但我只能通过`ContentProvider`.

这是长查询的 ANR 还是互斥锁 ANR？

> 达尔维克线程：（互斥体：tll=0 tsl=0 tscl=0 ghl=0 hwl=0 hwll=0）“main”prio=5 tid=1 NATIVE | group="main" sCount=1 dsCount=0 obj=0x4002a278 self=0xcf50 | sysTid=9149 nice=0 sched=0/0

```
at android.database.sqlite.SQLiteStatement.native_execute(Native Method) 
at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1582)
at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426)
at kenyu73.realsignal.DatabaseProvider.insert(DatabaseProvider.java:55)  
at android.content.ContentProvider$Transport.insert(ContentProvider.java:198)
at android.content.ContentResolver.insert(ContentResolver.java:618)  
at kenyu73.realsignal.DatabaseWrapper.insert(DatabaseWrapper.java:189)
at kenyu73.realsignal.SignalStats.updateDbStats(SignalStats.java:154) 
at kenyu73.realsignal.SignalStats.updateSignalStats(SignalStats.java:116)
at kenyu73.realsignal.RealSignalService$2.onSignalStrengthsChanged(RealSignalService.java:156)
at android.telephony.PhoneStateListener$2.handleMessage(PhoneStateListener.java:329)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)   
at android.app.ActivityThread.main(ActivityThread.java:3695)   
at java.lang.reflect.Method.invokeNative(Native Method)   
at java.lang.reflect.Method.invoke(Method.java:507)   
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)   
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:38:33.813

内容提供者查询默认在 ui 线程中运行，因此建议创建一个新线程来完成查询工作。

另外，`mutex lock`当尝试获取已锁定的锁时，会使用多次，但如果只有一个线程，则可能不需要锁。

# c - 一个有效的整数一维抖动函数？

> ID：10038744
> 
> 赞同：5
> 
> 时间：2012-04-06T03:20:14.190
> 
> 标签：c, function

我最近一直在玩 LED，由 8 位微控制器驱动。有时有必要使用脉冲宽度调制的纯软件实现来控制 LED 亮度 - 即快速打开和关闭灯，改变时间的比率。这很有效，直到我降低到大约 5% 的亮度，此时频闪开始看起来令人不舒服的闪烁。

将 PWM 实现为一个循环，它逐步遍历从 0 到 255 的每个数字，设置该时刻的灯打开或关闭。设置为 20 值的灯将在前 20 个循环中打开，然后关闭。

我正在寻找一个很好的函数，它将围绕这些数字进行洗牌，所以不是循环通过 0、1、2、3... 我的循环可以从可能性池中半随机地采样。随着时间的推移，总亮度是相同的，但是亮度值为 20 的灯可能会在 256 个循环中打开和关闭十几次，而不是仅点亮一次然后在大部分循环中关闭。即使循环运行速度稍慢，这也会减少闪烁效果。

当使用每个 8 位数字调用时，一个好的抖动函数需要返回 8 位范围内的每个数字。因此，它也不需要产生重复的数字——不是随机的，只是随机的。最好不要将相似的数字按顺序排列在一起——每个数字之间的差异应该很大——我认为理想情况下约为 64-127。

这些限制也很有趣——它是一个时间紧迫的应用程序。加法、减法和按位运算需要 1 个任意时间单位，乘法需要 2 个单位，除法需要 4 个单位。浮点数是不可能的，中间数字中使用的每 8 位的倍数的成本大约翻倍。查找表是可能的，但会使用设备总内存容量的大约一半 - 因此快速算法最适合可重用性，但当有空间进行预计算时，高质量的慢速算法也非常有用。

感谢您帮助我提出任何想法或沉思。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T03:26:58.440

不是 100% 确定我理解正确，但基本上我认为任何不除以 256 的数字都会生成数字组 0..255，如果你只是继续将它添加到自身以 256 为模 *。抽象代数类的一些闪回。 ..*

像这样：

```
s = {}

n = 157
for i in range(0, 256):
   s[n] = True
   print n
   n += 157
   n %= 256

print "check: has to be 256: ", len(s) 
```

编辑：用更大的发电机替换小型发电机，使分布更加“随机”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-08T05:09:06.927

示例：在 8 位寄存器中使用**相位累加器**进行 5 位抖动，其中占空比 = 1 到 31 [% = 占空比 / (1 << 位)]。

```
// Easier to do in assembly, where there is access to the carry flag
unsigned bits = 5;  // states = 1 << bits
unsigned carry = 7; // keep carry bit within an 8 bit register, limits bits
unsigned frq = ((1 << carry) * duty) / (1 << bits); // More than 8 bit intermediate value
unsigned phs = 0;
for (i = 0; i < (1 << bits); i++) {
    phs += frq;  // Carry is high bit
    output((phs >> carry) & 1);  // Output carry
    phs &= (1 << carry) - 1;  // Discard carry
} 
```

抖动模式如下所示：

```
00: 00000000000000000000000000000000
01: 00000000000000000000000000000001
02: 00000000000000010000000000000001
03: 00000000001000000000010000000001
04: 00000001000000010000000100000001
05: 00000010000010000001000001000001
06: 00000100001000010000010000100001
07: 00001000010001000010001000010001
08: 00010001000100010001000100010001
09: 00010001001000100100010010001001
10: 00010010010010010001001001001001
11: 00100100100100100100100100100101
12: 00100101001001010010010100100101
13: 00101001010010100101001010010101
14: 00101010010101010010101001010101
15: 00101010101010100101010101010101
16: 01010101010101010101010101010101
17: 01010101010101011010101010101011
18: 01010101101010110101010110101011
19: 01010110101101011010110101101011
20: 01011011010110110101101101011011
21: 01011011011011011011011011011011
22: 01101101101101110110110110110111
23: 01101110110111011011101101110111
24: 01110111011101110111011101110111
25: 01110111101110111101110111101111
26: 01111011110111110111101111011111
27: 01111101111101111110111110111111
28: 01111111011111110111111101111111
29: 01111111110111111111101111111111
30: 01111111111111110111111111111111
31: 01111111111111111111111111111111 
```

如果您没有足够宽的整数（或者在没有乘法或除法的情况下在汇编程序中），则可能需要一次一位地在循环中计算 frq 。

可选地，可以预先计算抖动模式并将其编码为查找表中的常数。

只有 2 的幂的模式没有噪音；除非您进行音频或射频合成，否则这无关紧要。否则其他模式有小鸟。在输出一次模式后打乱模式位的顺序会增加噪音，但会消除小鸟。可以使用具有长重复周期且不添加或删除位（1 和 0 的数量保持不变，只是它们的顺序发生变化）的 LFSR 函数来执行此操作。

请注意，要以 60 Hz 帧速率输出完整模式，需要 60 Hz * (1 << bits) = 1.92 kHz 的抖动频率。可能可以在没有闪烁的情况下为 LED 提供低得多的抖动频率，例如 (1 << bits) = 32 Hz。实验！

# c++ - 为什么即使 _HAS_ITERATOR_DEBUGGING、_SECURE_SCL、_SECURE_SCL_THROWS 设置为 0，VS2010 中的迭代器也会导致调试速度非常慢

> ID：10038745
> 
> 赞同：5
> 
> 时间：2012-04-06T03:20:23.657
> 
> 标签：c++, visual-studio-2010, debugging, visual-studio-debugging

我一直在试图找出为什么在调试模式下调试我们的程序需要这么长时间。在使用 xperf 查看堆栈的样子后，很明显我们在迭代器和 STL 容器上花费了大量时间。我用谷歌搜索了一段时间并找到了选项

```
_HAS_ITERATOR_DEBUGGING=0
_SECURE_SCL=0
_SECURE_SCL_THROWS=0 
```

我用#define在代码中设置了所有这些

```
#define _HAS_ITERATOR_DEBUGGING 0
#define _SECURE_SCL 0
#define _SECURE_SCL_THROWS 0 
```

但这似乎不起作用，所以我尝试使用 Visual Studio 项目中的预处理器定义，但这似乎仍然没有帮助。

我已经尝试了几乎所有我能想到的排列，包括将它们设置在标题中，并且毕竟包含，但无论我做什么，我在调试时都没有看到性能提升。举个例子，在发布模式下运行时，这一系列操作大约需要 140 秒。在调试模式下，它需要 2,400 多秒。处理时间大约增加 17-18 倍。

一些附加信息，托管这些 C++ dll 的进程是 C# .net 4 进程，并且我启用了非托管代码调试。基本上所有的过程都会为我们加载 DLL。所有真正的工作都是在 c++ 代码中完成的。

我在下面包含了完整的编译器命令行。

```
/I"..\CommonInclude" /Zi /nologo /W4 /WX /Od /Oy- /D "_CRT_SECURE_NO_WARNINGS" /D "WIN32" /D "_DEBUG" /D "_WINDOWS" /D "_USRDLL" /D "ENGINE_EXPORTS" /D "_HAS_ITERATOR_DEBUGGING=0" /D "_SECURE_SCL=0" /D "_SECURE_SCL_THROWS=0" /D "_VC80_UPGRADE=0x0710" /D "_WINDLL" /D "_MBCS" /Gm- /EHa /MDd /GS /fp:precise /Zc:wchar_t- /Zc:forScope /GR /Yu"StdAfx.h" /Fp".\Debug/Foo.pch" /Fa".\Debug/" /Fo".\Debug/" /Fd".\Debug/" /Gd /analyze- /errorReport:queue /EHa -Zm350 /MP3 
```

有什么想法为什么会这么慢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T22:37:10.887

根据您的描述，这会立即跳出：

> 我一直在试图找出为什么**在调试模式下**调试我们的程序需要这么长时间。在使用 xperf 查看堆栈的样子后，很明显我们在迭代器和**STL 容器**上花费了大量时间。

如果您使用基于节点的容器（例如，`map`、`set`、`unordered_map`、`unordered_set`、`multimap`、`multiset`、`list`等）并从调试器运行，您可能会遇到源于这些容器分配大量小尺寸对象的问题。当您从 Windows 中的调试器运行应用程序时，操作系统会将进程堆切换到调试堆。如果您有许多基于节点的容器处于负载状态，则释放它们将占用调试堆的大量时间。

一个简单的修复方法是通过将以下内容添加到调试选项的环境部分来禁用调试堆：`_NO_DEBUG_HEAP=1`

这将禁用调试堆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T22:24:12.803

有几件事可以尝试：

*   使用分析器，例如免费的[AMD CodeAnalyst](http://developer.amd.com/tools/codeanalyst/pages/default.aspx)，因为它会为您提供调用堆栈，并且通常比 Xperf 更易于使用。即使您正在处理调试代码，您仍然可能会发现一些热点
*   创建一个关闭优化的发布版本（您可以为此创建一个单独的配置）。这将关闭迭代器调试（如果这是您减速的原因），但可能会提供比原始版本构建更有用的调试信息。检查是否启用了省略帧指针的选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T21:53:20.913

产生巨大差异的一件事是，默认情况下，函数不会在调试模式下内联。这为使用许多小型访问器函数的代码增加了大量时间。

我有一些程序，其中调试和发布模式之间的差异是 100+ 倍，而不依赖于迭代器。

# java - 通过 DOM 解析器从 XML 处理 CDATA

> ID：10038747
> 
> 赞同：3
> 
> 时间：2012-04-06T03:20:41.943
> 
> 标签：java, xml, dom, cdata

我以前从未处理过 XML，所以我不确定如何在 XML 文件中处理 CDATA。我迷失在节点、父节点、子节点、nList 等中。

谁能从这些代码片段中告诉我我的问题是什么？

我的`getTagValue()`方法适用于除包含 CDATA 的“详细信息”之外的所有标签。

```
.....
NodeList nList = doc.getElementsByTagName("Assignment");
for (int temp = 0; temp < nList.getLength(); temp++) {
    Node nNode = nList.item(temp);
    if (nNode.getNodeType() == Node.ELEMENT_NODE) {
        Element eElement = (Element) nNode;
        results = ("Class : " + getTagValue("ClassName", eElement)) + 
                  ("Period : " + getTagValue("Period", eElement)) +
                  ("Assignment : " + getTagValue("Details", eElement));
        myAssignments.add(results);
    }
}
.....
private String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

    Node nValue = (Node) nlList.item(0);
    if((CharacterData)nValue instanceof CharacterData)
    {
        return ((CharacterData) nValue).getData();
    }
    return nValue.getNodeValue();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T18:07:24.750

我怀疑您的问题出在该`getTagValue`方法的以下代码行中：

```
Node nValue = (Node) nlList.item(0); 
```

你总是得到第一个孩子！但你可能有不止一个。

以下示例有 3 个子节点：文本节点“detail”、CDATA 节点“with cdata”和文本节点“here”：

```
<Details>detail <![CDATA[with cdata]]> here</Details> 
```

如果你运行你的代码，你只会得到“细节”，你会失去其余的。

以下示例有 1 个子节点：一个 CDATA 节点“此处带有 cdata 的详细信息”：

```
<Details><![CDATA[detail with cdata here]]></Details> 
```

如果你运行你的代码，你会得到一切。

但是上面的例子是这样写的：

```
<Details>
   <![CDATA[detail with cdata here]]>
</Details> 
```

现在有 3 个孩子，因为空格和换行符被拾取为文本节点。如果你运行你的代码，你会得到第一个带有换行符的空文本节点，你会丢失其余的。

您要么必须遍历所有子项（无论有多少）并连接每个子项的值以获得完整结果，或者如果区分纯文本和 CDATA 中的文本并不重要，则`coalescing`在文档上设置属性建造者工厂第一：

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
docFactory.setCoalescing(true);
... 
```

[合并指定此代码生成的解析器将 CDATA 节点转换为文本节点并将其附加到相邻（如果有）文本节点。默认情况下，此值设置为 false。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setCoalescing%28boolean%29)

# java - Java，仅提取 BigDecimal 的小数部分？

> ID：10038749
> 
> 赞同：63
> 
> 时间：2012-04-06T03:20:50.237
> 
> 标签：java, bigdecimal

在 Java 中，我正在使用`BigDecimal`该类，并且我的部分代码要求我从中提取小数部分。 `BigDecimal`似乎没有任何内置方法可以帮助我获取 a 小数点后的数字`BigDecimal`。

例如：

```
BigDecimal bd = new BigDecimal("23452.4523434"); 
```

我想`4523434`从上面表示的数字中提取 。最好的方法是什么？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-04-06T03:24:27.677

我会尝试`bd.remainder(BigDecimal.ONE)`。

使用[`remainder`](http://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#remainder-java.math.BigDecimal-)方法和[`ONE`](http://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#ONE)常数。

```
BigDecimal bd = new BigDecimal( "23452.4523434" );
BigDecimal fractionalPart = bd.remainder( BigDecimal.ONE ); // Result:  0.4523434 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-06-10T15:47:44.757

如果该值为负数，则 using`bd.subtract()`将返回错误的小数。

**使用这个**：

```
BigInteger decimal = bd.remainder(BigDecimal.ONE).movePointRight(bd.scale()).abs().toBigInteger(); 
```

它返回`4523434`或`23452.4523434``-23452.4523434`

* * *

此外，如果您不希望小数部分右侧有多余的零，请使用：

```
bd = bd.stripTrailingZeros(); 
```

在前面的代码之前。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-06T04:06:51.947

这是使用该方法的替代`remainder()`方法：

```
BigDecimal bd = new BigDecimal("23452.4523434");
BigDecimal fracBd = bd.subtract(new BigDecimal(bd.toBigInteger())); 
```

此外，您可以尝试使用 abs() 方法来确保小数部分为正：

```
BigDecimal fracBd = bd.subtract(new BigDecimal(bd.toBigInteger())).abs(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-23T14:11:59.263

它不起作用！

```
BigDecimal d = BigDecimal.valueOf(23452.4523434);
BigInteger decimal = 
d.remainder(BigDecimal.ONE).movePointRight(d.scale()).abs().toBigInteger(); 
```

当您输入数字时，小数部分以“0”开头，例如。“123.00456”。你得到“456”而不是“00456”。发生这种情况是因为我们转换了它`.toBigInteger()`，而**第一个零就消失了**；如果你使用`.toString()`而不是`.toBigInteger()`，你会得到 456.00000，**这也是错误的！**

所以我的建议是**使用这个**：

```
BigDecimal fractPart = bd.remainder(BigDecimal.ONE);
StringBuilder sb = new StringBuilder(fractPart.toString());
sb.delete(0, 2);
String str = sb.toString(); 
```

然后按照`str`你想要的方式使用它

# php - 如何用 PHP 制作多用户文件服务器系统？

> ID：10038752
> 
> 赞同：0
> 
> 时间：2012-04-06T03:21:35.717
> 
> 标签：php, permissions

我只是在这里寻找一个大局的想法；一旦提供指南，我就可以在谷歌上搜索细节。

出于教学原因，我想制作一个相对简单的文件托管网站，例如 dropbox 或 skydrive。

使用 PHP 和 MySQL 制作多用户登录和注册系统非常简单，但我将如何管理每个用户的文件目录和权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:26:12.457

可能有数百种方法可以做到这一点，但这是我会做的：

*   他们不应该有直接的下载路径，因为它可能被滥用。
*   所有文件都可以存储在同一个地方。
*   文件名应更改为唯一 ID 以避免重复。
*   将文件名、唯一 ID 和用户 ID 存储在数据库中。
*   当他们访问唯一 ID 的页面时，您可以进行检查并显示文件信息。
*   然后，您会将文件传递给他们，而不是让他们直接下载。
*   他们的用户页面将显示文件名和指向这些页面的链接等。

我希望这是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:26:43.803

最简单的方法是：将文件存储在您想要的任何层次结构中的某个位置，该位置不能简单地通过 Web 服务器公开访问。将有关每个文件的元信息存储在数据库中。在所述数据库中，存储文件的所有者是谁。编写一个脚本，允许人们下载这些文件（请参阅 参考资料[`readfile`](http://php.net/readfile)），要求用户登录并且只有文件的所有者才能登录。

# scala - 如何将框架源代码导入 IDE

> ID：10038755
> 
> 赞同：1
> 
> 时间：2012-04-06T03:21:57.023
> 
> 标签：scala, playframework-2.0

我想为 PlayFramework 2.0 做出贡献。

从命令行构建确实不是使用这种称为 Scala 的过于复杂的语言的最佳方式。它确实需要一个 IDE 来简化理解。（顺便说一句，有关此主题的更多详细信息，请参见[http://zeroturnaround.com/blog/scala-sink-or-swim-part-2/ ）](http://zeroturnaround.com/blog/scala-sink-or-swim-part-2/)

处理框架源代码的首选 IDE 是什么，以及如何导入代码？

换句话说，游戏开发人员如何工作？他们的设置是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T04:03:37.497

这并不难：

### 获取源

```
git clone https://github.com/playframework/Play20.git 
```

### 添加IDEA插件

*至`framework/project/plugins.sbt`*：

```
resolvers += "sbt-idea-repo" at "http://mpeltonen.github.com/maven/"
addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.0.0") 
```

### 生成IDE友好性

```
[...Play20/framework]$ sbt gen-idea 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T05:07:06.973

Today Idea、Eclipse 和 Ensime - 都支持导入 sbt 项目。所以，由你决定选择哪一个。

查看[Play20/.gitignore](https://github.com/playframework/Play20/commits/master/.gitignore)上的提交，
[Ignore IntelliJ IDEA 项目](https://github.com/playframework/Play20/commit/c13d666d919d23e23e90aff9a89a8e5e70ac1b31)提交告诉一些开发人员正在使用 Idea，
[最终与 sbteclipse 集成，使用 sbteclipse 2.0.0-M3。](https://github.com/playframework/Play20/commit/49163e48957f5670545da15bd859c9e7ad2a7243)commit 告诉我们有开箱即用的 Eclipse 支持。

我要补充一点，我在 Play 中使用 Ensime 很长时间了。它与其他 sbt 项目一样好用。

### 支持

*插件.sbt*：

```
resolvers += ScalaToolsSnapshots
addSbtPlugin("org.ensime" % "ensime-sbt-cmd" % "latest.milestone") 
```

从 sbt 控制台

```
$ ensime generate 
```

# xcode - NSView 在一个非常简单的程序中无法响应

> ID：10038758
> 
> 赞同：2
> 
> 时间：2012-04-06T03:22:12.970
> 
> 标签：xcode, cocoa, nsview

Objective C、Project Builder 和 IB 的新手，所以请原谅我缺乏知识...

我正在尝试创建一个简单的程序来学习和理解 NSView 类的使用。它由一个带有单个窗口`NSView`和四个标记为 RED、GREEN、BLUE 和 YELLOW 的按钮组成。

目标是按下一个按钮并让 NSView 填充适当的颜色。我尝试了几种代码变体，但似乎没有一个更接近结果。目前，在执行时，窗口出现一个纯黑色方块（我的`NSView`子类/对象称为 MyView）和四个按钮。

我可以在 MyView.h/.m 文件中成功更改 MyView 的初始颜色，但是，我似乎无法从我的控制器代码（称为 AppController.h/.m）中更改颜色或重绘 MyView。我总是收到编译器警告。

该接口是在 IB 中创建的，并且 Custom View 对象指向 MyView 子类。我在下面附上了我的代码。

```
//---------------------------
//
//  MyView.h
//

#import Cocoa/Cocoa.h

@interface MyView : NSView

int myColorChoice;

@end

//--------------------------
//
//  MyView.m
//

#import "MyView.h"

@implementation MyView

int myColorChoice = 4;

-(void) setMyColorChoice : (int) c {

    myColorChoice = c;

}

-(void) drawRect: (NSRect) rect {

    switch (myColorChoice) {

        case 1 :
        [[NSColor greenColor] set];
        break;

        case 2 :
        [[NSColor blueColor] set];
        break;

        case 3 :
        [[NSColor redColor] set];
        break;

        case 4 :
        [[NSColor yellowColor] set];
        break;
    }

    NSRectFill([self bounds]);
}

@end

//--------------------
//
//  AppController.h
//

#import <Cocoa/Cocoa.h>

@interface AppController : NSObject {

    IBOutlet id display;
}

- (IBAction)makeBlue:(id)sender;
- (IBAction)makeGreen:(id)sender;
- (IBAction)makeRed:(id)sender;
- (IBAction)makeYellow:(id)sender;

@end

//---------------------
//
//  AppController.m
//

#import "AppController.h"
#import "MyView.h"

@implementation AppController

- (IBAction)makeGreen:(id)sender {
    [MyView setMyColorChoice:1];
    [MyView setNeedsDisplay:YES];
}

- (IBAction)makeBlue:(id)sender {
    [MyView setMyColorChoice:2];
}

- (IBAction)makeRed:(id)sender {
    [MyView setMyColorChoice:3];
}

- (IBAction)makeYellow:(id)sender {
    [MyView setMyColorChoice:4];
}

@end 
```

我相当有信心我只是违反了一些基本原则，但我似乎无法理解这一点。我怀疑这一定与 MyView 设置不正确有关，就好像我尝试调用我的任何方法一样，对于我尝试过的任何方法，编译器都会给我“MyView 可能无法响应...”打电话。

注意：我只是在修改 makeGreen 方法进行实验。一旦成功，我将复制其他颜色的代码。

任何帮助将不胜感激！

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:26:14.117

要考虑的一件事是像这样设置您的`setMyColorChoice`方法：

```
-(void)setMyColorChoice:(NSColor *)newColor
{
    [newColor set];
    NSRectFill([self bounds]);
    [self setNeedsDisplay:YES];
} 
```

然后你可以清理你的`drawRect`方法而不是使用整数和开关。这将是最有效的方法，因为您不需要声明实例变量从而节省内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T05:14:15.790

您正在尝试在`MyView`类上调用实例方法。您`AppController`需要对该类的实例的引用。可能最好的方法是使用`IBOutlet`您在 IB 中连接的一个...如果这就是您的`display`ivar，那么您需要做的就是调用`[display setColorChoice:1]; [display setNeedsDisplay:YES];`等。

# sql - 如何在 SQLite 3 表中插入多行？

> ID：10038759
> 
> 赞同：7
> 
> 时间：2012-04-06T03:22:44.020
> 
> 标签：sql, sqlite, insert, bulkinsert

在 MySQL 中我会使用

```
INSERT INTO `mytable` (`col1`, `col2`) VALUES
  (1, 'aaa'),
  (2, 'bbb'); 
```

但这会导致 SQLite 出错。SQLite 的正确语法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T03:34:18.497

之前已经回答了这个问题：[是否可以在 SQLite 数据库中一次插入多行？](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)

要回答您对 OMG Ponies 的评论，请回答：

从 3.7.11 版开始，SQLite 支持多行插入。理查德·希普评论：

```
"The new multi-valued insert is merely syntactic suger (sic) for the compound insert. 
There is no performance advantage one way or the other." 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-06T03:25:09.013

使用联合：

```
INSERT INTO `mytable` 
 (`col1`, `col2`) 
SELECT 1, 'aaa'
UNION ALL
SELECT 2, 'bbb' 
```

`UNION ALL`比 快`UNION`，因为`UNION`删除重复项 -`UNION ALL`没有。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-16T16:16:27.587

从版本 2012-03-20 (3.7.11) 开始，sqlite 支持以下 INSERT 语法：

```
INSERT INTO 'tablename' ('column1', 'column2') VALUES
  ('data1', 'data2'),
  ('data3', 'data4'),
  ('data5', 'data6'),
  ('data7', 'data8'); 
```

阅读文档：[http ://www.sqlite.org/lang_insert.html](http://www.sqlite.org/lang_insert.html)

![SQLite INSERT 语句图](../Images/508fda31b924f4da15c26cc4a268aee2.png)

# javascript - javascript focus() 没有聚焦

> ID：10038765
> 
> 赞同：6
> 
> 时间：2012-04-06T03:23:16.197
> 
> 标签：javascript, focus, external

常规文本字段，用户输入字符串。测试 a) 输入中是否有内容，b) 输入中是否没有空格，以及 c) 是否仅为整数，没有其他字符。然后是提交按钮。您会注意到我没有使用 html 行为，输入中没有 onclick，严格的 Content/Presentation/Behavior 分离。

我的 HTML：

```
<form name="basicText" id="basicText" action="">
<p>Enter any ol' integer: 
<input type="text" id="inputBox" name="inputBox" size="14"/>    
<input value = "Next...?" type="submit" id="mySubmitBtn" name="mySubmitBtn"/>
</p>
</form>
<script src="js/w1bscript.js" type="text/javascript"></script> 
```

另请注意，外部 javascript 文件添加在末尾，因此所有元素都可以加载（现在不用担心 onload）。

JavaScript：

```
var myButton1 = document.getElementById("mySubmitBtn");
var myForm1 = document.getElementById("basicText");
var myTextBox = myForm1.inputBox;

function submitPress() {
 if(myTextBox.value.length == 0) {
    alert("You didn't enter anything! Once more time, with feeling...")
    basicText.focus();
    basicText.select();
 } else if(/\s/.test(myTextBox.value)) {
    alert("Eh... No spaces. Just integers. Try again...");
    basicText.focus();
    basicText.select();
  } else if (isNaN(myTextBox.value)==true) {
    alert("Eh... Gonna need you to enter ONLY digits this time. kthnx.");
    basicText.focus();
    basicText.select();
 } else {
    // The textbox isn't empty, and there's no spaces. Good.
    alert("you've passed the test!")
  }
}
myButton1.addEventListener('click', submitPress, false); 
```

当我输入不正确的输入时，逻辑有效，但无论我使用什么浏览器，光标都不会回到文本框。

小提琴：http: [//jsfiddle.net/2CNeG/](http://jsfiddle.net/2CNeG/)

谢谢你，唐

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T03:37:28.117

您将观察到，一旦您评论了警报框，您将能够看到您的焦点在工作。但是有一个相同的解决方案。试试这个。我认为它应该工作。

```
setTimeout(function() {
      document.getElementById('inputBox').focus();
    }, 0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T03:29:25.807

在我看来，您正在专注于表单元素；您需要专注于您的文本框：

```
document.getElementById('inputBox').focus(); 
```

或`myTextBox.focus()`在您的代码中。

# macos - 使用 mdls 命令生成元数据报告

> ID：10038766
> 
> 赞同：3
> 
> 时间：2012-04-06T03:23:31.097
> 
> 标签：macos, bash, metadata, spotlight

总而言之，
我有一个 shell 脚本，它遍历用户提供的文件夹中的所有媒体（音频、视频）文件，并创建一个不错的基于文本的元数据报告。我在**Mac OS X**上，我正在使用 Spotlight 的`mdls`命令来获取所有相关的元数据。问题是有时我会在所有媒体文件的报告中看到“空”结果。如果我再次运行脚本，它似乎可以工作。我很困惑为什么会这样。这是输出元数据报告的脚本的一部分：

```
cd "path_to_folder"
while IFS= read -r -d $'\0' file; do
  duration=`mdls -name kMDItemDurationSeconds "$file" | cut -d "=" -f 2 `
  duration=`printf "%.2f" $duration;`
  pixel_height=`mdls -name kMDItemPixelHeight "$file" | cut -d "=" -f 2`
  pixel_width=`mdls -name kMDItemPixelWidth "$file" | cut -d "=" -f 2`
  codec=`mdls -name kMDItemCodecs "$file" | cut -d "=" -f 2`
  temp="$i) [$file]\n- Duration: $duration\n- Dimensions: $pixel_width X $pixel_height pixels\n- Codec: $codec\n"
  metaDataOutput=$metaDataOutput"\n"$temp
  i=$((i + 1))
done < <(find .  \( -iname \*.m4v -o -iname \*.mov -o -iname \*.mp3 -o -iname \*.m4r -o -iname \*.m4a \)  -print0 )

echo -e  "\n[Report]\n"$metaDataOutput 
```

预期的输出是这样的：

1) **[./test1.mov]**
- 持续时间：22.03
- 尺寸：480 X 640 像素
- 编解码器：( "H.264" )

2) **[./test2.mov]**
- 持续时间：25.03
- 尺寸：480 X 640 像素
- 编解码器：( "H.264" )

但有时所有媒体文件的输出为空：

1) **[./test1.mov]**
- 持续时间：空
- 尺寸：空 X 空像素
- 编解码器：（空）

2）**[./test2.mov]**
- 持续时间：空
- 尺寸：空 X 空像素
- 编解码器：（空）

我在这里错过了一个技巧吗？为什么脚本有时会工作，有时会输出 null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:14:03.373

问题是 Spotlight 没有索引文件。我使用 mdimport 命令强制 Spotlight 为文件夹编制索引并解决了问题

# c# - 获取日期列表中的总天数 C#

> ID：10038771
> 
> 赞同：0
> 
> 时间：2012-04-06T03:24:54.170
> 
> 标签：c#, list, date, sum

我只想获取日期列表中的总天数。这是我的代码，它返回 10 天，应该打印 4 天左右。

```
static void Main(string[] args)
{
    //Initializes new List of DataTime Object.
    List<DateTime> Dates = new List<DateTime>();

    //Fills the List of DateTime Object.
    for (int i = 0; i < 5; i++)
    {
        Dates.Add(DateTime.Now.AddDays(i));
        //Adds new DataTime Object in the list of DateTime Object.
        Thread.Sleep(1000); //Stop filling dates for one second.
    }

    //Prints the List of DataTime Object.
    for (int i = 0; i <5 ; i++)
    {
        Console.WriteLine(Dates[i]);
    }
    avgDate(Dates);
}

public static void avgDate(List<DateTime> Dates) {
    long totalTicks = 0;
    string avgticks = "";
    TimeSpan days = new TimeSpan();

    for (int i = 0; i < Dates.Count; i++)
    {
        for (int j = 1; j < Dates.Count; j++)
        {
            days += (Dates[j] - Dates[i]);
        }
    }
    Console.WriteLine(days.TotalDays);
    Console.ReadLine();`
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:31:41.937

一圈就够了！编辑：我简化了更多。

```
public static void avgDate(List<DateTime> Dates) {
    long totalTicks = 0;
    string avgticks = "";
    TimeSpan days = new TimeSpan();

    for (int i = 1; i < Dates.Count; i++)
    {
        days += (Dates[i] - Dates[i-1]);
    }
    Console.WriteLine(days.TotalDays);
    Console.ReadLine();` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:56:41.333

既然您将日期列在列表中，为什么某些 linq 函数不起作用？

```
days = Dates.Max() - Dates.Min();
Console.WriteLine(days.TotalDays); 
```

我很确定 A < B < C，

(B - A) + (C - B) = C - A

# xcode4 - 用于 iOS 开发的 TextMate

> ID：10038778
> 
> 赞同：2
> 
> 时间：2012-04-06T03:25:34.947
> 
> 标签：xcode4, textmate

好吧，在使用 Xcode 近两年之后，我终于厌倦了 Xcode 4 的怪物。Xcode 3.* 有它的怪癖，但它速度更快，崩溃更少，并且使用起来更有趣一般的。到目前为止，我的 Xcode 会在感觉懒惰时删除所有语法突出显示，如果我关闭禁用断点会崩溃，开始使用应用程序然后再次打开它们。几周前，它随机无法从 App Store 更新，我一直在试图弄清楚如何修复它。在这一点上，苹果发布的每一个版本都让人越来越难以忍受。

我使用 TextMate 进行 Rails 开发（不过我对它很陌生），但同样，在这一点上，我对 Xcode 感到非常沮丧，以至于如果它有效，我愿意经历设置它的最初痛苦从长远来看更好。虽然我可以编写一些构建脚本，但我不希望它变得痛苦，所以我想知道是否有人已经这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:05:20.330

TextMate 有一个 XCode 捆绑包（我不确定它是否与 TM 一起提供，但 GetBundle 会找到它）。

您当然可以使用此命令构建 XCode 项目。我知道过去我也从 TextMate 在 XCode 中设置断点并运行了一些东西，但我不确定这些是标准捆绑包的一部分还是我自己用 Applescript 添加的东西。

对于相关的 SO 问题，请查看：[getting XCode 4.3 to build with the XCode.tmbundle](https://stackoverflow.com/questions/6313638/cant-build-xcode-4-project-from-textmate)

# php - 替换单个字符或多个字符

> ID：10038780
> 
> 赞同：0
> 
> 时间：2012-04-06T03:25:58.067
> 
> 标签：php, regex, preg-replace

我想更换换行符`\n`。如果出现一次，则将其替换为`<br>`. 如果连续有两个或更多，则将其替换为`<br><br>`. 我可以做任何一个，但我不确定如何为同一个变量做这两个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T03:40:29.327

如果你想用相同数量的换行符替换两个或更多，str_replace 应该可以工作。

```
str_replace("\n", '<br />', $text); 
```

但是，如果您只想用两个换行符替换三个换行符，那么您必须执行两次替换，至少一次使用正则表达式：

```
$text = preg_replace('/\n{2,}/', "<br /><br />", $text);
$text = str_replace("\n", '<br />', $text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:02:00.073

怎么样：

```
$pattern = array("/\n\n+/", "/\n/");
$replacement = array('<br/><br/>',  '<br/>' );
$str = "The quick \nbrown fox \n\n\njumps over \n\nthe lazy dog.";

$result = preg_replace($pattern, $replacement, $str); 
```

如果 <br> 是您真正想要的，只需将 <br/> 替换为 <br>。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T04:29:55.933

作为 Godwin 解决方案的（希望更简单）变体，请尝试：

```
$text = str_replace("\n\n", '<br /><br />', $text);
$text = str_replace("\n", '<br />', $text); 
```

这将用 2 个换行符替换任何 2 个连续的换行符，然后如果剩余任何单个换行符，它们将被单个换行符替换。这将实现您对 1、2 或 3 个（或更多）连续换行符的替换。

# rabbitmq - 使用 RabbitMQ 订阅远程队列

> ID：10038781
> 
> 赞同：2
> 
> 时间：2012-04-06T03:25:58.930
> 
> 标签：rabbitmq, masstransit

使用 Mass Transit 和 RabbitMQ 设置对远程端点发布的消息的订阅的建议方法是什么？

在我们的例子中，大多数 pub/sub 是本地的，但我们的开发人员都可以方便地订阅远程机器上的共享发布者。

我看到的所有示例似乎都是本地的： http: [//docs.masstransit-project.com/en/latest/configuration/sub_config_api.html](http://docs.masstransit-project.com/en/latest/configuration/sub_config_api.html)

似乎 RabbitMQ 联合可能是一种选择，但看起来更复杂，我们需要：[http ://www.rabbitmq.com/federation.html](http://www.rabbitmq.com/federation.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T20:31:10.693

`ReceiveFrom("rabbitmq://TheRemoteMachine/SubscriberName")`只需调用订阅远程发布者的订阅者和`ReceiveFrom("rabbitmq://localhost/QueueName")`订阅本地发布者的其他订阅者，我就能得到我想要的结果。

TheRemoteMachine 上的交换和绑定已按我的预期设置，本地主机上的交换和绑定也是如此。

[http://docs.masstransit-project.com/en/latest/configuration/quickstart.html](http://docs.masstransit-project.com/en/latest/configuration/quickstart.html)

[http://docs.masstransit-project.com/en/latest/overview/keyideas.html#address](http://docs.masstransit-project.com/en/latest/overview/keyideas.html#address)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T19:40:38.723

你有没有用 Masstransit 3 更新过这个？我遇到了同样的困难，因为现在有几件事发生了变化。

# javascript - 如何自动预选（不仅仅是设置值）billing_state 下拉列表与 shipping_state 下拉列表相同

> ID：10038789
> 
> 赞同：0
> 
> 时间：2012-04-06T03:26:43.983
> 
> 标签：javascript, javascript-events

我在谷歌上看了一遍，我想我只是不知道要搜索什么，因为我想做一些相对简单的事情。如果我无法在线找到答案，我会尝试仅在此处提问。

我正在寻找纯 JavaScript 的答案。我不想使用 jquery。非常感谢！

您知道当您在线填写表格以结帐时，您可以单击一个选项，上面写着“如果您的帐单信息与您的运输信息相同，请选中此框”，然后当您单击该框时，帐单信息会自动填充有运输信息。

我能够让所有输入类型的文本正常工作，但我似乎无法让 billing_state 的下拉选择框与已经为 shipping_state 选择的下拉选择框相同。

我正在使用所有州。以下只是为了简化示例。

我有一个带有 an 的复选框，`onchange="setBillingAddress(this)"`我正在使用 if 语句来检查该框是否被选中。所以这一切都很完美。

我可以让在 shipping_state 中设置的 billing_state 下拉值在 billing_state 下拉列表中突出显示（单击下拉列表后，您只能看到它的值设置为 shipping_state 下拉列表中的值） . 我希望它可以预先选择并显示状态，而无需单击“选择状态”。

我的问题是，我应该在`setBillingAddress()`函数内部放置什么来使 billing_state 被预选并显示给用户，这样他们就不必看到另一个显示“选择状态”的下拉框，即使该值已经设置。

我有两个下拉菜单。一个名为 shipping_state 的 id 为 shipping_state，另一个名为 billing_state 的 id 为 billing_state

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T03:33:23.553

您只需将一个的值设置为`select`另一个。您可能想检查一些旧问题并接受答案。

[http://jsfiddle.net/pZZQt/](http://jsfiddle.net/pZZQt/)

```
function setBillingAddress(elem) {
    document.getElementById('billing_state').value = elem.value;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:41:29.137

在您的帐单地址上添加一个“更改”事件处理程序，并在处理程序中，设置送货地址的选定索引以匹配帐单地址的选定索引（假设您的选择列表中的所有内容都匹配，它应该匹配）。在这里查看它的实际效果：

[http://jsfiddle.net/4AcjD/10/](http://jsfiddle.net/4AcjD/10/)

这是HTML：

```
<div id="billing">
<p>Billing:</p>
<select name="billingState" id="billingState">
    <option>Alabama</option>             
    <option>Alaska</option>                 
    <option>Arizona</option>
    <!-- etc -->
</select>
</div>

<div id="shipping">
<p>Shipping:</p>
<select name="shippingState" id="shippingState">
    <option>Alabama</option>             
    <option>Alaska</option>                 
    <option>Arizona</option>
    <!-- etc -->
</select>
</div> 
```

和 Javascript：

```
var billingState = document.getElementById( "billingState" );
var shippingState = document.getElementById( "shippingState" );
billingState.addEventListener( "change", 
    function() { 
        shippingState.selectedIndex = billingState.selectedIndex;
    } ); 
```

# java - 杀死Java目录中的所有进程（Windows）

> ID：10038795
> 
> 赞同：0
> 
> 时间：2012-04-06T03:27:46.677
> 
> 标签：java, windows, process, kill

有没有办法通过Java停止某个目录中的所有进程？我需要我的 java 程序来停止 C:\ 驱动器上目录“X”中的所有进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T05:21:56.363

您可以从 java 启动控制台命令，例如

```
Process p = Runtime.exec("taskkill /IM notepad.exe");
int exitValue = p.waitFor(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:46:23.707

[sysinternals](http://technet.microsoft.com/en-us/sysinternals)提供了一套工具。您可以查询进程并对它们采取行动。好吧，与Java没有多大关系。

查看有关[手柄的一些信息](http://blad.wordpress.com/2006/05/11/fuser-on-win32/)

# ios - 当我从另一个 url 下载图像时，将图像上传到特定 url 的正确方法是什么？

> ID：10038796
> 
> 赞同：0
> 
> 时间：2012-04-06T03:27:49.190
> 
> 标签：ios, xcode, ios4, nsurlconnection

我成功完成了 75% 的任务。主要问题是图片上传。连接已建立。但无法上传编码数据。我正在这样编写代码

```
UIImage *naveen = [UIImage  imageWithData: [NSData dataWithContentsOfURL:[NSURL  

URLWithString:@"http://www.watblog.com/wp-content/uploads/2011/11/b.jpg"]]];

myimages.image=naveen; 
```

通过使用上面的代码，我非常成功地加载了图像。

我写的上面的代码确实加载方法。

之后，我采取了 IBAction，因为我写了下面的代码

```
NSData *imageData = UIImageJPEGRepresentation(myimages.image, 90);

NSString *encodedImage = [Base64 encode:imageData];

NSLog(@"my encoded image is 6666%@",encodedImage); 
```

**//这里我正在获取编码的图像数据**

它也成功了

```
NSString *urlString = @"http://192.168.1.105:9966/PC/store";

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];

    [request setURL:[NSURL URLWithString:urlString]];

    [request setHTTPMethod:@"POST"];

NSString *boundary = [NSString stringWithString:@"--------------------------

-14737809831466499882746641449"];

NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; 

boundary=%@",boundary];

[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

 NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"rn--%@rn",boundary] 

dataUsingEncoding:NSUTF8StringEncoding]];

  [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; 

name=\"encodedImage\"; filename=\"http://www.watblog.com/wp-

content/uploads/2011/11/b.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-streamrnrn"] 

dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[NSData dataWithData:imageData]];

    [body appendData:[[NSString stringWithFormat:@"rn--%@--rn",boundary] 

dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil 

error:nil];

NSString *returnString = [[NSString alloc] initWithData:returnData 

encoding:NSUTF8StringEncoding];

NSLog(returnString);

} 
```

**每当我执行上述代码时，返回字符串都是**

> 最终[3077:f803]
> 
> html>Apache Tomcat/6.0.35 - 错误报告
> 
> 系列：Tahoma，Arial，无衬线；颜色：白色；背景颜色：#525D76；字体大小：22px；} H2
> 
> {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;}
> 
> H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-
> 
> 大小：14px；} 正文 {字体系列：Tahoma，Arial，无衬线；颜色：黑色；背景颜色：白色；} B
> 
> {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-
> 
> 系列：Tahoma，Arial，无衬线；背景：白色；颜色：黑色；字体大小：12px；}A {颜色：
> 
> 黑色;}A.name {颜色：黑色；}HR {颜色：#525D76;}-->
> 
> # HTTP 状态
> 
> 404 - /PC/商店
> 
> **类型** 状态报告
> 
> **消息**/PC/商店
> 
> **描述**请求的资源
> 
> (/PC/store) 不可用。
> 
> ### 阿帕奇
> 
> 雄猫/6.0.35

请任何人帮助我如何传递我的编码数据

我是 iPhone 编程的初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T11:07:40.047

这似乎更像是后端服务器的问题。尝试使用任何其他方法上传文件 - 即从简单的 HTML 表单。

这可能不是一个线索，但为什么您使用完整的 URL 作为文件名？

```
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"encodedImage\"; filename=\"http://www.watblog.com/wp-content/uploads/2011/11/b.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

# apache - 无法访问 Apache /var/www 中的内容

> ID：10038797
> 
> 赞同：0
> 
> 时间：2012-04-06T03:28:11.457
> 
> 标签：apache, apache2, tomcat6

我有一个 linux 服务器（Cent OS），其中安装了 tomcat 并在配置了域的端口 8080 上进行侦听。
我现在的域指向 tomcat ROOT 目录，我在 WEBAPPS 文件夹中有各种战争文件。现在我希望在 apache 服务器的*/var/www*中安装 drupal，当我将“Listen 8080”添加到我的 httpd.conf 时，它给了我一个错误，因为 TOMCAT 已经在运行它。
即使我停止 tomcat 并启动 httpd，我仍然看不到我在 /var/www/ 中的任何内容
在我的本地机器上，在我使用 xampp 安装所有内容并且我没有进行任何配置更改后，我没有这个问题。我是能够从“localhost”访问 apache 和 webapps 中的内容。你能告诉我为什么请求没有到达 apache'

```
<VirtualHost *:8080>
ServerName myservername
DocumentRoot /var/www
<Directory />
        Options FollowSymLinks
        AllowOverride None
</Directory>
<Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
 </Directory>
</VirtualHost> 
```

# iphone - cocos2d v2.0 rc0中的CCSprite

> ID：10038799
> 
> 赞同：0
> 
> 时间：2012-04-06T03:28:23.097
> 
> 标签：iphone, cocos2d-iphone

我对 CCSprite 有点困惑`position`：这是它的中心还是左下角？CCNode、CCLayer、CCMenu、CCMenuItem是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:35:27.393

`position`并且`anchorPoint`是相关领域；默认情况下，位置是指将放置精灵（节点）的中心点的位置。这是因为`anchorPoint is = ccp(0.5, 0.5)`默认情况下对于任何给定的`CCNode`继承者。请注意，anchorPoint 以它所描述的节点尺寸的百分比为单位进行测量。

这是一篇出色的文章，帮助我在学习时重新了解它：[http ://www.qcmat.com/understanding-anchorpoint-in-cocos2d/](http://www.qcmat.com/understanding-anchorpoint-in-cocos2d/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T19:29:01.743

默认为中心，CCNode、CCLayer 和 CCScene 除外，它位于左下角。

由于 CCNode 具有 0 宽度和 0 高度，因此左下角等于其中心，除非您手动设置 contentSize 属性。

锚点可以修改纹理在节点位置上的绘制位置。通常你不想改变它。见这里：[https ://stackoverflow.com/a/7810180/201863](https://stackoverflow.com/a/7810180/201863)

# url-rewriting - 如何在 URL 重写中使用 CouchDB 用户名？

> ID：10038800
> 
> 赞同：3
> 
> 时间：2012-04-06T03:28:44.000
> 
> 标签：url-rewriting, nosql, couchdb, rewrite

我有一个可以像这样访问的列表函数：

```
_list/characters/characters_by_user?startkey=["org.couchdb.user:rodriguez"]&endkey=["org.couchdb.user:rodriguez", {}] 
```

我正在尝试重写 URL，以便您可以以更友好的方式访问它...

```
/rodriguez/characters 
```

...通过编写此规则：

```
{from: '/:user/characters', to: '_list/characters/characters_by_user',
    query: {
        startkey: "[%22org.couchdb.user%3A:user%22]", 
        endkey: "[%22org.couchdb.user%3A:user%22,%20{}]"
    }
} 
```

但是，我收到此错误：

```
error: "query_parse_error",
reason: "No rows can match your key range, reverse your start_key and end_key or set descending=true" 
```

为什么查询会在完整 URL 中正常工作，但不使用重写？

* * *

**更新**

我相信这可能是 CouchDB 处理编码冒号 (%3A) 的方式的一个错误。我正在等待邮件列表的回复，并将相应地更新此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:47:42.143

我发现检查 CouchDB 的日志被证明是解决 URL 被重写的最佳方法。不幸的是，我提交给 CouchDB 邮件列表的问题尚未得到答复。

作为一种解决方法，我在没有完全限定的情况下发出了用户名，这符合我的目的：

```
var user = doc.createdBy.split(":")[1];
emit(user, doc); 
```

# javascript - 使用 javascript 添加和删除 dom 部分

> ID：10038801
> 
> 赞同：2
> 
> 时间：2012-04-06T03:28:55.260
> 
> 标签：javascript, html

我希望能够添加新部分（通过“添加”链接）并删除它们（通过“x”按钮），如图所示。

![截屏](../Images/ffb8d47a5805e68814abbaab15af7171.png)

图片的 HTML：

```
<fieldset>
   <legend>Legend</legend>

        <div id="section0">
            <input type="text" name="text1" value="Text1" />
            <input type="text" name="text2" value="Text2" size='40' />
            <input type="button" value="x" style="width: 26px" /><br />
        </div>

     <a href="#">add</a><br />

</fieldset> 
```

我想我可以根据需要添加新的部分（即section1、section2）并根据按下的按钮删除这些部分。每次单击“添加”链接时，都会有一个 JavaScript 函数在 DOM 中注入部分，而每次单击“x”按钮时，另一个函数会删除一个部分。

由于我在 HTML 和 Javascript 方面的经验很少，我不知道这是一个好/坏的解决方案。所以，我的问题正是：这是正确的方法还是有更简单/更好的方法？谢谢。

PS：随意用一些示例代码回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:39:09.963

几分钟前，我刚刚在这里使用 jQuery 回答了一个几乎相同的问题：[https](https://stackoverflow.com/a/10038635/816620) ://stackoverflow.com/a/10038635/816620 ，如果你想看看它是如何在那里工作的。

如果你想要纯 javascript，可以这样做。

HTML：

```
<div id="section0">
    <input type="text" name="text1" value="Text1" />
    <input type="text" name="text2" value="Text2" size='40' />
    <input type="button" value="x" style="width: 26px" /><br />
</div>

<a href="#" onclick="addSection(this)">add</a><br /> 
```

Javascript：

```
function addSection(where) {
    var main = document.getElementById("section0");
    var cntr = (main.datacntr || 0) + 1;
    main.datacntr = cntr;

    var clone = main.cloneNode(true);
    clone.id = "section" + cntr;
    where.parentNode.insertBefore(clone, where);    
}​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/TaNFz/](http://jsfiddle.net/jfriend00/TaNFz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:39:16.013

这是一种方法：

```
<script type="text/javascript">
function newrow() {
document.getElementById("customTable").innerHTML += "<tr><td><input type='text'></td><td><input type='text'></td><td><button onclick='del(this)'>X</button></td></tr>";
}

function del(field) {
field.parentNode.parentNode.outerHTML = "";
}
</script>

<body onload="newrow()">
<fieldset>
    <legend>Legend</legend>
    <table>
        <tbody id="customTable">
        </tbody>
    </table>
<button onclick="newrow()">Add</button> 
</fieldset>
</body> 
```

如果需要，您可以向它们添加 ID，或者您可以通过它们的位置来调用它们`document.getElementsByTagName("input")[x].value`输入将从 0 开始，所以左边是 0，右边是 1，添加行：左边是 2，右边是 3，等等。

如果您删除一个，则序列不会混乱（每次都会重新评估），这比硬编码的 ID 更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T03:50:45.263

[http://pastebin.com/QBMEJ2pq](http://pastebin.com/QBMEJ2pq)是一个稍长但稳健的答案。

# c# - 将记录插入 Access 数据库

> ID：10038805
> 
> 赞同：1
> 
> 时间：2012-04-06T03:30:22.903
> 
> 标签：c#, sql, ms-access, insert

我在将记录插入我的访问数据库时遇到了很大的困难。我已经在访问中尝试了查询，它插入得很好。我还尝试了查询生成器中的查询，它也可以工作，但是如果我运行此代码，它声称已将记录插入数据库，但是当我检查数据库时没有新记录的迹象。

```
 oleDbCommandCreateAppointment.Parameters["appointmentDate"].Value = "06/04/2012";
        oleDbCommandCreateAppointment.Parameters["timeSlotID"].Value ="21";
        oleDbCommandCreateAppointment.Parameters["startTime"].Value = "09:00";
        oleDbCommandCreateAppointment.Parameters["employeeID"].Value ="1";
        oleDbCommandCreateAppointment.Parameters["clientID"].Value ="1";
        oleDbCommandCreateAppointment.Parameters["assistantID"].Value ="1";
        oleDbCommandCreateAppointment.Parameters["appointmentType"].Value = "Quote";
        oleDbCommandCreateAppointment.Parameters["appointmentFlag"].Value = "Booked";

        try
        {
            oleDbConnection.Open();
            int rows = oleDbCommandCreateAppointment.ExecuteNonQuery();

            MessageBox.Show("Rows inserted " + rows.ToString());

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            oleDbConnection.Close();
        } 
```

SQL 命令

```
INSERT INTO tblAppointments
                     (appointmentDate, timeSlotID, startTime, employeeID, clientID, assistantID, appointmentType, appointmentFlag)
  VALUES        (?, ?, ?, ?, ?, ?, ?, ?) 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T03:37:01.980

~~您需要将连接与 db 命令对象相关联：~~

 ~~```
oleDbConnection.Open();
oleDbCommandCreateAppointment.Connection = oleDbConnection;
int rows = oleDbCommandCreateAppointment.ExecuteNonQuery(); 
```~~  ~~编辑 - 这~~可能~~与参数排序有关，试试这个：

```
oleDbCommandCreateAppointment.Parameters[0].Value = "06/04/2012";
oleDbCommandCreateAppointment.Parameters[1].Value = "21";
oleDbCommandCreateAppointment.Parameters[2].Value = "09:00";
oleDbCommandCreateAppointment.Parameters[3].Value = "1";
oleDbCommandCreateAppointment.Parameters[4].Value = "1";
oleDbCommandCreateAppointment.Parameters[5].Value = "1";
oleDbCommandCreateAppointment.Parameters[6].Value = "Quote";
oleDbCommandCreateAppointment.Parameters[7].Value = "Booked"; 
```

注意 - 我在处理这个问题时学到的东西，您不能将命名参数与 ODBC 和 OleDB 命令一起使用，只能使用位置参数（[参见表 6](http://msdn.microsoft.com/en-us/library/ms379620%28VS.80%29.aspx#vsgenerics_topic7)），并且此链接指出[OleDbCommand](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters%28v=vs.80%29.aspx)对象仅在命令类型为 时支持位置参数`Text`。位置参数取决于顺序。~~

# ruby-on-rails - 我的 Rails 应用程序部署到 Heroku 有问题

> ID：10038806
> 
> 赞同：0
> 
> 时间：2012-04-06T03:30:23.843
> 
> 标签：ruby-on-rails, ubuntu, heroku, github

我作为 heroku 指南进行部署。

但是当我使用推荐“heroku rake db:migrate”时，会出现以下错误：

```
Running rake db:migrate attached to terminal... up, run.1
(in /app)
rake aborted!
no such file to load -- test/unit/error
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/app/.gems/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:153:in `block in require'
/app/.gems/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
/app/.gems/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:153:in `require'
/app/.gems/gems/activesupport-2.2.2/lib/active_support/deprecation.rb:224:in `<top (required)>'
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/app/.gems/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:153:in `block in require'
/app/.gems/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
/app/.gems/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:153:in `require'
/app/.gems/gems/activesupport-2.2.2/lib/active_support.rb:37:in `<top (required)>'
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/app/.gems/gems/rails-2.2.2/lib/tasks/misc.rake:11:in `<top (required)>'
/app/.gems/gems/rails-2.2.2/lib/tasks/rails.rb:4:in `load'
/app/.gems/gems/rails-2.2.2/lib/tasks/rails.rb:4:in `block in <top (required)>'
/app/.gems/gems/rails-2.2.2/lib/tasks/rails.rb:4:in `each'
/app/.gems/gems/rails-2.2.2/lib/tasks/rails.rb:4:in `<top (required)>'
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/app/Rakefile:10:in `<top (required)>'
/usr/ruby1.9.2/lib/ruby/1.9.1/rake.rb:2373:in `load'
/usr/ruby1.9.2/lib/ruby/1.9.1/rake.rb:2373:in `raw_load_rakefile'
/usr/ruby1.9.2/lib/ruby/1.9.1/rake.rb:2007:in `block in load_rakefile'
/usr/ruby1.9.2/lib/ruby/1.9.1/rake.rb:2058:in `standard_exception_handling'
/usr/ruby1.9.2/lib/ruby/1.9.1/rake.rb:2006:in `load_rakefile'
/usr/ruby1.9.2/lib/ruby/1.9.1/rake.rb:1991:in `run'
/usr/ruby1.9.2/bin/rake:31:in `<main>'
jason@jason-VirtualBox:~/work/depot$ rake db:migrate
(in /home/jason/work/depot) 
```

我在heroku中访问我的应用程序，它出现了错误：

> 应用程序错误
> 应用程序发生错误，无法提供您的页面。请稍后重试。
> 
> 如果您是应用程序所有者，请查看您的日志以获取详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:32:34.400

Try adding pg gem in gem file for the production environment and execute the below command

```
 $ bundle install --without production 
```

Since Heroku uses Postgresql databases we must use this way. Hope helps you.

# optimization - 小型汇编代码序列优化（intel x86）

> ID：10038808
> 
> 赞同：1
> 
> 时间：2012-04-06T03:30:56.333
> 
> 标签：optimization, assembly, x86, intel

我正在用汇编语言做一些练习，我发现了一个我无法弄清楚的关于优化的问题。任何人都可以帮助我吗

所以问题是优化以下汇编代码：

----------------------------------------示例1--------- ----

```
mov dx, 0 ---> this one I know-> xor dx,dx 
```

----------------------------------------示例2--------- ---

```
cmp ax, 0
je label 
```

----------------------------------------示例3--------- ----

```
mov ax, x
cwd
mov si, 16  
idiv si 
```

----> 在这个例子中我能想到的最多的是通过 idiv 16 替换最后 2 行，但我不确定

----------------------------------------示例4--------- ----

```
mov ax, x
mov bx, 7
mul bx
mov t, ax 
```

----------------------------示例5--------- ------

```
mov si, offset array1
mov di, offset array2
; for i = 0; i < n; ++i
do:
   mov bx, [si]
   mov [di], bx
   add si, 2
   add di, 2
loop do
endforloop 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T03:41:19.997

例如 2，您应该查看`and`or`test`操作码。与示例 1 类似，它们允许您消除对常量的需求。

例如 4，记住 that与 or`x * 7`相同`x * (8 - 1)`，扩展 that, `x * 8 - x`。乘以八可以用移位指令完成。

例如 5，您会认为英特尔会提供一种更简单的方法来从 SI 转移到 DI，因为这就是它们存在的全部原因。也许像 REPetitive MOVe String Word 之类的东西 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:37:33.277

例如三，除以二的幂可以实现为右移。

请注意，在示例 5 中，当前代码无法根据需要初始化 CX（在优化版本中，您肯定也希望这样做）。

# javascript - Java Script 简单函数调用（函数不在范围内）

> ID：10038813
> 
> 赞同：0
> 
> 时间：2012-04-06T03:31:58.797
> 
> 标签：javascript, html, function, call

我遇到了一个名为 returnDayNumber 的全局方法的问题。如果我在我的 java 脚本中调用该函数，它工作正常。但是当我制作一个按钮来调用该函数时，它说：“self.returnDayNumber 不是一个函数”（认为 var self=this 可能会解决问题）。这是我的代码：

```
 /*
     * Global data
     * used to centralize user data to be used in graphs
     */
    var userModel = new userHealthModel();
    userModel.createUsers();

    userModel.addUser();

    var newChart = new NewHighCharts();

    returnDayNumber = function(month, day)
    {
        if(month==1)
        {
            return day;
        }
        else if(month==2)
        {
            return(31+day);
        }
        else if(month==3)
        {
            return(60+day);
        }
        else if(month==4)
        {
            return (91+day);
        }
        else if(month==5)
        {
            return(121+day);
        }
        else if(month==6)
        {
            return(152+day);
        }
        else if(month==7)
        {
            return(182+day);
        }
        else if(month==8)
        {
            return(213+day);
        }
        else if(month==9)
        {
            return(244+day);
        }
        else if(month==10)
        {
            return(274+day);
        }
        else if(month==11)
        {
            return(305+day);
        }
        else if(month==12)
        {
            return(335+day);
        }           
    }
    saveThis = function()
    {
        var self = this;
        alert("your about to save!")
        newChart.destroyChart();
        newChart= new NewHighCharts();
        var numberOfUsers = userModel.users().length;
        var users = userModel.users();
        var weights = userModel.getWeights();
        var dates = userModel.getDates();
        var dataArray = [];
        var xAndY = []
        var singleDate;
        var name;
        for(var i=0;i<numberOfUsers;i++)
        {
            name = users[i].name;
            xAndY = [];
            for(var x=0;x<dates.length-1;x++)
            {

                //extract month
                var month = ([dates[i][x]].toString()).substring(0,2);
                //extract day
                day = parseInt(([dates[i][x]].toString()).substring(3,5));
                //add the day number and weight of users to an array of x and y coordinates
                xAndY.push([self.returnDayNumber(month,day),weights[i][x]])
            }
            newChart.addNewSeries(name,xAndY);
        }       
     ///!!!!This works!!!///
     this.saveThis()//!!!

    }
    ko.applyBindings(userModel); 
```

我制作了一个 KO 用户模型，但我认为它不相关。这是我的 HTML，请注意它的 KO 语法，但它可以工作。

```
<button  data-bind="click: saveThis">Save</button> 
```

我可能犯了一个简单的错误，或者超出了范围。我是一个java脚本初学者，很抱歉这个简单的问题。非常感谢任何有帮助的程序员！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:41:37.080

移动`var self = this;`到你的`saveThis`函数之外而不是内部，这样`self`是在正确的范围内。

# dcpu-16 - DCPU-16 汇编程序“dat”是否带有一个应该为每个字符生成一个字节或单词的字符串？

> ID：10038816
> 
> 赞同：6
> 
> 时间：2012-04-06T03:32:05.893
> 
> 标签：dcpu-16

我不清楚是否

`dat "Hello"`

应该生成 5 个字或 3 个字（带有一个字节的填充）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T11:43:54.243

根据[这张图片](http://i.imgur.com/XIXc4.jpg)，它是每 8 位字符一个字：

所以

```
:data dat 0x170, "Hello ", 0x2e1 ... 
```

会产生

```
0x0170 0x0048 0x0065 0x006c 0x006c 0x006f 0x0020 0x02e1 
```

等等

他测试了普通字符和特殊字符之间的区别

```
ifg a, 0xff 
```

这将得出结论，所有 ascii char 都会有自己的单词

# objective-c - iOS 5 - 相机覆盖克隆

> ID：10038819
> 
> 赞同：1
> 
> 时间：2012-04-06T03:32:31.093
> 
> 标签：objective-c, ios

是否有一个开源 nib 是 Apple 用于其 Camera.app 的覆盖视图的克隆？我目前正在使用`UIImagePickerController`with `picker.showCameraControls = YES`，但我需要稍微调整一下功能。

我一直在考虑对 进行子类化`UIImagePickerController`，但这会给我更多的控制权`takePicture`吗？具体来说，我希望能够在不强制用户离开界面的情况下调用该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:57:24.793

这就是[AVCaptureSession](http://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html)类的用途。该文档显示了如何设置一个 captureSession，从那里开始一切顺利！

# c++ - 如何声明一个指向 int 数组的指针数组？

> ID：10038822
> 
> 赞同：0
> 
> 时间：2012-04-06T03:33:15.883
> 
> 标签：c++, arrays, pointers

我试图声明一个指针数组，每个指针指向不同大小的 int 数组。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T03:37:07.477

根据您的描述，听起来您正在寻找指向指针的指针。

```
int **aofa;
aofa = malloc(sizeof(int*) * NUM_ARRAYS);
for (int i = 0 ; i != NUM_ARRAYS ; i++) {
    aofa[i] = malloc(sizeof(int) * getNumItemsInArray(i));
}
for (int i = 0 ; i != NUM_ARRAYS ; i++) {
    for (int j = 0 ; j != getNumItemsInArray(i) ; j++) {
        aofa[i][j] = i + j;
    }
} 
```

`NUM_ARRAYS`数组可能有不同数量的元素，由`getNumItemsInArray(i)`函数返回的值决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T04:54:47.497

```
int* ar[2];
int ar1[] = {1,2, 3};
int ar2[] = {5, 6, 7, 8, 9, 10};
ar[0] = ar1;
ar[1] = ar2;
cout << ar[1][2]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-21T09:29:09.720

C 版本，应该有助于澄清不同类型的声明：

```
#include <stdio.h>

int main()
{
/* let's make the arrays first                                             */
int array_A[3] = {1, 2, 3};
int array_B[3] = {4, 5, 6};
int array_C[3] = {7, 8, 9};

/* now let's declare some pointers to such arrays:                          */
int (*pA)[3] = &array_A;
int (*pB)[3] = &array_B;
int (*pC)[3] = &array_C;  /* notice the difference:                         */
/* int *pA[3] would be an array of 3 pointers to int because the [] operator*/
/* has a higher precedence than *(pointer) operator. so the statement would */
/* read: array_of_3 elements of type_pointer_to_int                         */
/* BUT, "int (*pA)[3]" is read: pointer_A (points to) type_array_of_3_ints! */

/* so now we need a different array to hold these pointers:                 */
/* this is called an_ARRAY_of_3_pointers to_type_array_of_3_ints            */
int (*ARRAY[3])[3] = {pA, pB, pC};

/* along with a a double pointer to type_array_of_3_ints:                   */
int (**PTR)[3] = ARRAY;

/* and check that PTR now points to the first element of ARRAY:             */
if (*PTR == pA) printf("PTR points to the first pointer from ARRAY \n");

PTR++;

if (*PTR == pB) printf("PTR points to the second pointer from ARRAY! YAY!\n");

   return 0;
}

> $ clang prog.c -Wall -Wextra -std=gnu89 "-ansi"  output:   
> PTR points to the first pointer from ARRAY 
> PTR points to the second pointer from ARRAY! YAY! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T03:38:36.577

查看“指向对象数组的指针”部分 [http://www.functionx.com/cpp/Lesson24.htm](http://www.functionx.com/cpp/Lesson24.htm) 它可能会对您有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-18T06:38:08.590

在 C++ 中，您可以如下所示声明它。new 运算符可以像 C 中的 malloc 一样工作。

```
int** array = new int*[n]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-13T19:30:16.717

```
#include <iostream>

using namespace std;

#define arraySize 3

const int arr1[] = {48,49,50};
const int arr2[] = {64,65,66};
const int arr3[] = {67,68,69};

typedef const int (*arrayByte);

arrayByte arrayPointer[arraySize] = {
    arr1,arr2,arr3
};

void printArr(const int arr[], int size){
    for(uint8_t x=0;x<size;x++){
        printf("value%d=%d \n",x,arr[x]);
    }
}
int main()
{
    printf("Print Array 0\n");
    printArr(arrayPointer[0],arraySize);
    printf("Print Array 1\n");
    printArr(arrayPointer[1],arraySize);
    printf("Print Array 2\n");
    printArr(arrayPointer[2],arraySize);

    return 0;
} 
```

试试这个代码：[C++ online](https://www.onlinegdb.com/online_c++_compiler#)

# rsa - RSA 求公共指数的倒数

> ID：10038823
> 
> 赞同：2
> 
> 时间：2012-04-06T03:33:21.417
> 
> 标签：rsa

我对 RSA 密钥生成及其用法有一个非常基本的疑问。

在 RSA 密钥生成中，您选择两个非常大的质数。然后你将它们相乘。（eq `p * q = N`）现在，`Euler(N)=(p-1)(q-1)`。现在你找到一个数`0 < e < Euler(N)`，使得 e 和 Euler(N) 互质。`{e.Euler(N)}`成为你的公钥。现在你计算 d(private key) 使得`e * d =1 (mod(Euler(N)))`.
现在假设你用你的公钥加密了一些东西（m） -`c=m^e(mod(N)).` 现在在用私钥（d）解密时，你做了`c^d(mod(N))`。
现在我怀疑你在 mod(Euler(N)) 中找到了 e 的倒数，但是当你解密时，你是在 mod(N) 中做的。这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:56:47.753

[请参阅此处](https://en.wikipedia.org/wiki/RSA_(cryptosystem))和[此处](http://en.wikipedia.org/wiki/Euler%27s_theorem)的维基百科。基本上，您希望解密以“撤消”加密。由于对于某个整数 k，e⋅d = 1 mod φ(N) 等价于 e⋅d = 1 + k⋅φ(N)，因此您有：

c ^d mod N = (m ^e ) ^d mod N = m ^((e⋅d)) mod N = m ^((1 + k⋅φ(N))) = (m ¹ ) ⋅ (m ^(φ(N)) ) ^k mod N

通过应用您在代数中学到的以下规则：

1) a ^(xy) = (a ^x ) ^y = (a ^y ) ^x和
2) a ^(x+y) = a ^x ⋅ a ^y

为了完成这个并简化 (m ¹ ) ⋅ (m ^(φ(N)) ) ^k mod N，请记住 a ^(φ(N)) = 1 mod N，所以

(m ^(φ(N)) ) ^k mod N = 1 ^k = 1 mod N。

# android - 添加到收藏夹

> ID：10038829
> 
> 赞同：1
> 
> 时间：2012-04-06T03:34:14.590
> 
> 标签：android, database

我正在开发书籍应用程序，当用户单击列表中的一本书时，我的应用程序提供了将该书添加到收藏夹的选项。因此用户可以查看最喜欢的书籍，但我不知道如何实现。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T03:37:33.730

维护所有收藏书籍的数据库。当用户单击任何只是将该项目添加到数据库中时，并且每当需要查看该书时，只需从数据库中检索它并将其显示给用户，以便按照您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:50:18.340

你的问题有点含糊。我在这里看到两个悬而未决的问题：

1.  如何捕捉用户点击并处理事件？
2.  如何以及在哪里存储书名/详细信息？

对于 1：只需让您列出书籍的活动实现相应的事件侦听器。请参阅此处：[Android Doc - 输入事件](http://developer.android.com/guide/topics/ui/ui-events.html)

对于 2：取决于您想要存储的数据量，如果它只是一个最喜欢的书名列表，Preferences 可能会这样做。如果您想保留扩展存储列表的选项，其中包含每本书的详细信息，那么 SQLite 数据库是您的选择。

还有一个关于如何持久化数据的 Android 教程：请参阅此处：[Android Doc - Data Storage](http://developer.android.com/guide/topics/data/data-storage.html)

在这里，我们有一个教程“[在 Android 中创建和使用数据库](http://android10.org/index.php/articlesdatastorage/235-creating-and-using-databases-in-android-one)”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:06:48.807

您可以通过 2 种方式存储该值

1.  使用 Sqlite，但有些代码对此很繁重。

2.  使用序列化和反序列化来存储数据。

# objective-c - 使用 malloc 创建我班级的 2d C 样式数组

> ID：10038837
> 
> 赞同：-1
> 
> 时间：2012-04-06T03:35:38.480
> 
> 标签：objective-c

（编辑：把可能的解决方案放在最后）

我是一名 C/C++ 程序员，正在学习 Objective C 来开发 iPhone 应用程序。我将要编写的程序将处理大型二维对象数组。我已经阅读了关于使用 NSArray 的 NSArray 并有一些工作代码，但我试图了解如何使用 C 样式数组来节省开销并了解你可以做什么和不能做什么。

在这个片段中 MapClass 只包含两个属性，int x 和 int y。我有以下代码片段使用静态定义的 10x10 数组。

```
MapClass *arr[10][10];

arr[2][3] = [[MapClass alloc] init];
arr[2][3].x = 2;
arr[2][3].y = 3;

NSLog(@"The location is %i %i", arr[2][3].x, arr[2][3].y);
// Output: "The location is 2 3" 
```

这是一个使用一维数组并根据 X 和 Y 计算单元格位置的示例：

```
MapClass **arr = (MapClass**) malloc(10 * 10 * sizeof(MapClass *));

arr[3 * 10 + 2] = [[MapClass alloc] init];
arr[3*10 + 2].x = 2;
arr[3*10 + 2].y = 3;

NSLog(@"The location is %i %i", arr[3*10 + 2].x, arr[3*10 + 2].y);
// Output: "The location is 2 3" 
```

**我的问题是**：如何将我的数组作为二维数组进行 m​​alloc，以便我可以使用 arr[2][3] 样式符号来访问它？

我正在尝试的一切都是产生各种错误，例如“下标需要 [你的类] 的大小，这在非脆弱 ABI 中不是恒定的”。

谁能给我一个关于如何做到这一点的片段？我一直在阅读和实验，但无法弄清楚。我的一维数组示例做错了吗？

# 回答？

在玩弄 xzgyb 的回答之后，我有以下块工作。有什么问题吗？谢谢！

```
int dimX = 20;
int dimY = 35;

MapClass ***arr = (MapClass***) malloc( dimX * sizeof(MapClass **));
for (int x = 0; x < dimX; ++x)
{
    arr[x] = (MapClass **) malloc( dimY * sizeof(MapClass*));

}

for (int x = 0; x < dimX; ++x)
{
    for (int y = 0; y < dimY; ++y)
    {
        arr[x][y] = [[MapClass alloc] init];
        arr[x][y].x = x;
        arr[x][y].y = y;

    }
}

for (int x = 0; x < dimX; ++x)
{
    for (int y = 0; y < dimY; ++y)
    {
        NSLog(@"%i %i is %i %i", x, y, arr[x][y].x, arr[x][y].y);

    }
}

// Cleanup
for (int x = 0; x < dimX; ++x) {
    for (int y = 0; y < dimY; ++y) {
        [arr[x][y] release];
    }
}

for (int x = 0; x < dimX; ++x)
{
    free(arr[x]);
}

free(arr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T04:39:18.703

经过测试，使用 NSMutableString 类和各种字符串方法可以正常工作。我可能会建议使用标准的消息发送方括号，而不是使用较新的点运算符语法，以简化编译器您实际尝试完成的工作。

如果我理解您的意思， sizeof(ClassName *) 应该与 sizeof([ClassName class]) （以及 int或 id ）相同。*您发布的代码不应给出这样的错误，因为所有指针的大小都相同。现在，如果您尝试使用 sizeof(*someInstanceOfAClass) 之类的东西，那么您会遇到一些问题，因为您正在尝试分配足够的内存以适应 10*10*（对象的实际大小），这不是您想要的去做。（听起来像您的警告的目的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T04:39:51.460

试试下面的代码：

```
MapClass ***arr = (MapClass***) malloc(10 * 10 * sizeof(MapClass *));

for ( int row = 0; row < 10; ++row ) {
    arr[ row ] = (MapClass **)&arr[ row * 10 ];
}

arr[0][1] = [[MapClass alloc] init];
arr[1][2] = [[MapClass alloc] init]; 
```

# python - 程序没有运行，只是重新启动

> ID：10038840
> 
> 赞同：0
> 
> 时间：2012-04-06T03:35:54.123
> 
> 标签：python, restart

我刚刚写了一个程序来计算员工的工资率。对我来说，该程序看起来还不错，但是当我尝试运行它时，我会重新启动，但它没有运行。我试过重新启动 Python GUI，但没有运气。这是程序：

```
def get_info():
    hours = int(input("How many hours did you work this week?", ))
    while hours < 8 or hours > 86:
        print('Error ---- you must work at least 8 hours and no more than 86 hours')
        hours = int(input('Please enter your hours worked again:', ))
    print()
    rate = float(input("Please enter your pay rate: $", ))
    while rate < 7.00 or rate > 50.00:
        print("Error ---- pay rate cannot be less than $7.00 or greater than $50.00")
        rate = float(input("Please re-enter your pay rate: $", ))

    return hours, rate

def calc_hours(num):
    if num < 40:
        reg_hours = num
        overtime = 0
    else:
        reg_hours = 40
        overtime = num - 40

    return reg_hours, overtime

def calc_pay(num1, num2, pay_rate):
    regular_pay = num1 * pay_rate
    overtime_pay = num2 * (pay_rate * 1.5)
    total_pay = regular_pay + overtime_pay

    return regular_pay, overtime_pay, total_pay

def main():
    get_info()
    calc_hours(hours)
    cal_pay(reg_hours, overtime, rate)

    print ()
    print ("                     Payroll Information")
    print ()
    print ("Pay Rate", format(rate, '14.2f'))
    print ("Regular Hours", format(reg_hours, '10.2f'))
    print ("Overtime Hours", format(overtime, '10.2f'))
    print ("Regular Pay", format(regular_pay, '10.2f'))
    print ("Overtime Pay", format(overtime_pay, '10.2f'))
    print ("Total Pay", format(total_pay, '10.2f')) 
```

是的，图表会很不稳定。我一直没能成功运行它，所以它会顺利出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:56:18.100

```
hours, rate = get_info()
reg_hours, overtime = calc_hours(hours)
regular_pay, overtime_pay, total_pay = calc_pay(reg_hours, overtime, rate)

print ()
print ("                     Payroll Information")
print ()
print ("Pay Rate", format(rate, '14.2f'))
print ("Regular Hours", format(reg_hours, '10.2f'))
print ("Overtime Hours", format(overtime, '10.2f'))
print ("Regular Pay", format(regular_pay, '10.2f'))
print ("Overtime Pay", format(overtime_pay, '10.2f'))
print ("Total Pay", format(total_pay, '10.2f')) 
```

首先，看看你的`main():`. 你调用了你的`get_info()`函数，当函数完成时，它返回`hours, rate`，但你没有存储结果。（这是你的`hours`, `rate`）再次，接下来的两行也是如此。当您调用方法时，它会返回答案，您必须将它们存储到变量中。

这些是 3 行更改

```
hours, rate = get_info()
reg_hours, overtime = calc_hours(hours)
regular_pay, overtime_pay, total_pay = calc_pay(reg_hours, overtime, rate) 
```

最后，有一个错字，`calc_pay`而不是`cal_pay`你写的。因此，修复它将使您的程序正常工作，这是输出。

**输出**

```
How many hours did you work this week?8

Please enter your pay rate: $20

                     Payroll Information

Pay Rate          20.00
Regular Hours       8.00
Overtime Hours       0.00
Regular Pay     160.00
Overtime Pay       0.00
Total Pay     160.00 
```

让我向你解释一下这些赋值语句做了什么。表格是这样的： `variable = expression`

1.  正在评估 RHS 上的表达式（值是内存地址）
2.  将内存地址存储在 LHS 上的变量中

您可能会发现对阅读有帮助的链接：[定义函数](http://docs.python.org/tutorial/controlflow.html#defining-functions)

如果你想修复你的聊天，这里是如何做到的。

```
pattern = '{0:15s}    {1:4.2f}'
print(pattern.format('Pay Rate', rate))
print(pattern.format('Regular Hours', reg_hours))
print(pattern.format('Overtime Hours', overtime))
print(pattern.format('Regular Pay', regular_pay))
print(pattern.format('Overtime Pay', overtime_pay))
print(pattern.format('Total Pay', total_pay)) 
```

输出：

```
Pay Rate           20.00
Regular Hours      20.00
Overtime Hours     0.00
Regular Pay        400.00
Overtime Pay       0.00
Total Pay          400.00 
```

解释：

```
pattern = '{0:15s}    {1:4.2f}'
# 0 mean the blank should be filled with the first argument, 
# the colon(:) specifies the formatting of the string / number.
# s means to format a string, 15s means the string will be padded with spaces
# so it will take up exactly 15 spaces, without the number, s just mean
# use the string without any space padding
# d means format an integer, 4d mean the integer will be padded with space
# so it takes up exactly 4 spaces. f means float, and .2 mean 2 decimal point. 
```

# c++ - 如何检测错误写入

> ID：10038842
> 
> 赞同：1
> 
> 时间：2012-04-06T03:36:32.250
> 
> 标签：c++, debugging, memory

在我的代码中，我有一个内容完全是垃圾的对象。我猜在代码的其他部分发生了错误的写入，并且（不）运气它在我提到的对象的地址处写入。

我想知道是否有一些工具可以告诉我内存地址收到的每一次写入，这样我就可以跟踪这个错误的来源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T03:53:42.410

大多数调试器都支持写断点。

例如，在 Visual Studio 中，您必须在调试器中启动您的应用程序，中断（在接近可疑变量初始化的正常断点上），然后在菜单中转到“调试/新断点/新数据断点”。

在 SoftIce 中，您可以使用 BPM 命令。:) 那一个也可以打破内存访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:49:04.950

根据您的平台，您应该能够使用[VirtualProtect](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898%28v=vs.85%29.aspx)之类的东西来锁定该内存区域（我认为它是 linux 上的 mprotect）。这样，当内存区域访问不正确时，您将获得访问违规/段错误。当您获得访问违规/段错误时，您可以在调试器中捕获它们。

但是，要锁定内存区域，通常区域应该与内存页面对齐（至少在 Windows 上），这可能是一个问题。

除此之外，您可以在调试器中使用数据断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T05:20:41.560

如果您使用的是 Windows，则可以使用全局标志（gflags.exe，Windows 调试工具的一部分）并打开 PageHeap。（在“图像”选项卡上，键入 .exe 的名称，然后当它出现时单击“启用页面堆”复选框。）然后运行您的程序。

完成后请记住再次将其关闭。

# jquery - 使用正则表达式 VS jQuery 替换

> ID：10038843
> 
> 赞同：2
> 
> 时间：2012-04-06T03:36:45.347
> 
> 标签：jquery, regex, replace

鉴于此 HTML：

```
<div id="foo">
    <input type=button class="foo abtn_1">
    <input type=button class="joe bbtn_2">
    <input type=button class="doe cbtn_2">
    <input type=button class="joe dbtn_1">
    <input type=button class="foo ebtn_2">
</div> 
```

单击时，**我想获得带有下划线和数字的类的第一部分。**

所以从第*一个输入我会得到： abtn*

目前我使用：

```
$('#foo input').on('click', function () {
    var a = $(this).attr('class')
                   .replace('foo','')
                   .replace('joe','')
                   .replace('doe','')
                   .replace('_1','')
                   .replace('_2','')

console.log(a);

}); 
```

我想应该有一个更健壮和更快的性能方式可能使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T04:20:03.937

您可以使用正则表达式直接查找正确类名的正确部分，而无需进行任何替换：

```
$('#foo input').on('click', function () {
    var match = this.className.match(/(^|\s)([^\s_]+)_\d(\s|$)/);
    if (match) {
        var item = match[2];
        // do what you want with item here
    }
}); 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/EDrvJ/](http://jsfiddle.net/jfriend00/EDrvJ/)

这是解释的正则表达式：

```
(^|\s)    Match starting with either the start of the string ^ or whitespace \s
([^\s_]+) After that, match any number of characters that are not whitespace and not underscore and capture this match
_\d       After that, match an underscore and any digit
(\s|$)    After that, match whitespace or the end of the string 
```

`(^|\s)`开头和结尾的确保`(\s|$)`我们得到一个完整的类名匹配，而不仅仅是部分匹配。正则表达式中的`|`符号是 OR，因此我们可以将 a`^`或 a`\s`与匹配`(^|\s)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T03:41:07.980

它不是 jquery 替换，它是通用的 javascript 字符串替换

使用正则表达式可能看起来像：

```
var a = $(this).attr('class').replace(/(foo|joe|doe|_1|_2)/g, ''); 
```

如果你需要一些通用的东西

> 我想得到带有下划线和数字的类的第一部分。

然后使用

```
var a = $(this).attr('class').match(/\b([^ _]+?)_\d/, ''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T04:53:49.137

根据[这个测试](http://jsperf.com/split-vs-regex-in-date-processing)，我建议你使用 split() 函数，并请更正句子**“我想得到带有下划线和数字的类的第一部分”。**，你的功能没有做你强调的事情

假设您需要**没有数字和下划线**的类的第一部分：

```
 $('#foo input').on('click', function () {
    var a = $(this).attr('class').split('_');
    console.log(a[0]);
   }); 
```

# iphone - iPhone应用程序图标未注册

> ID：10038858
> 
> 赞同：0
> 
> 时间：2012-04-06T03:38:23.507
> 
> 标签：iphone, objective-c, ios, icons

我完全不知所措，因为我的应用程序图标根本不会注册。我已经尝试了几乎所有方法，但图标仍然无法注册。我认为这可能与我试图将我的项目重命名为别的事实有关，也许现在的目标不匹配。任何人都可以就为什么我的图标根本不会出现在手机上提供建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:59:02.767

PNG 压缩是编译器执行的一种小算法，用于减少应用程序中图像占用的空间。不幸的是，它一直是许多程序员存在的贝恩，因为一旦生成并运行二进制文件，它通常不会解压缩图像。只需将其设置为否。

PNG 压缩还为 iOS 设备优化了 PNG，如下所示：

> 1.  额外关键块 (CgBI)。
> 2.  Byteswapped (RGBA –> BGRA) 像素数据，大概用于高速 > 直接 blitting 到帧缓冲区。
> 3.  从 IDAT 块中删除的 Zlib 页眉、页脚和 CRC。
> 4.  预乘 alpha (color′ = color * alpha / 255)。

# ruby-on-rails - 操作方法是：id 和 link_to？

> ID：10038863
> 
> 赞同：0
> 
> 时间：2012-04-06T03:39:11.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我尝试通过单击链接订阅产品时：

```
<%= link_to "Subscribe", :controller => "products", :action => "subscribe_product", :id => product.id, :method => :post %> 
```

我收到此错误并注意到参数错误。

```
ActiveRecord::RecordNotFound in ProductsController#show

Couldn't find Product with id=subscribe_product

{"id"=>"subscribe_product", "method"=>"post"} 
```

我的 ProductsController 中的 subscribe_product 方法是：

```
def subscribe_product
  @product = Product.find(params[:id])
  @product.subscriptions.create(:subscriber_id => current_user.id)
end 
```

我的路线：

```
resources :products do
  post :subscribe_product, :on => :collection
end 
```

这些是关联：

```
class User
  has_many :products
  has_many :subscriptions, :foreign_key => :subscriber_id

class Product
  belongs_to :user
  has_many :subscriptions, :as => :subscribable

class Subscriptions
  belongs_to :subscriber, :class_name => "User"
  belongs_to :subscribable, :polymorphic => true 
```

用户订阅另一个控制器：

```
PagesController
  def index
   @product_history = current_user.products
  end
end

pages/index.html.erb

<% for product in @product_history %>
  <%= product.name %>
  <%= product.price %>
  <%= link_to "Subscribe", :controller => "products", :action => "subscribe_product", :id => product.id, :method => :post %>
<% end %> 
```

那么为什么我的操作方法被视为 ID 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:02:10.350

尝试 ：

```
resources :products do
  post :subscribe_product, :on => :member
end 
```

它将生成如下路线：

```
subscribe_product_product POST     /product/:id/subscribe_product(.:format)   {:action=>"subscribe_product", :controller=>"products"} 
```

并使用视图中的路径：

```
subscribe_products_path(product.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T03:41:14.427

请试试这个。将您的路线更改为：

```
resources :products do
  post :subscribe
end 
```

然后更改您的链接，例如：

```
<%= link_to "Subscribe", subscribe_products_path(:id => product.id), :method => :post %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T08:06:46.620

由于您要通过`id`，因此`subscribe_product`路线应该是`member`路线。试试这个，让我知道你得到了什么：

```
resources :products do
  member do
    post 'subscribe_product'
  end
end 
```

在控制器中（绕过不可分配的属性）：

```
def subscribe_product
  @product = Product.find(params[:id])
  subscription = Subscription.new
  subscription.subscriber_id = current_user.id
  @product.subscriptions << subscription
end 
```

# ruby-on-rails - 在 Rails 中使用 config.assets.precompile 在子目录中包含资产

> ID：10038867
> 
> 赞同：5
> 
> 时间：2012-04-06T03:40:11.223
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, asset-pipeline, assets

我在 Heroku 上运行了一个 Rails 3.1.3 应用程序，利用 S3 通过`asset_sync`. 我的`app/assets/css`目录中包含一个包含两个文件的子目录：`main.css.scss`和`categories.css.scss`. 我在我的以下行`production.rb`：

`config.assets.precompile += [ 'admin/main.css.scss', 'admin/categories.css.scss', 'print.css', 'products.css.scss', 'services.css.scss' ]`

当我推送到 Heroku 时，我所有的资产都被预编译并上传，除了这两个文件。我是否需要执行某种黑魔法才能在此过程中包含这两个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T13:33:53.720

只需键入不带 scss 的文件名，它就可以正常工作。

```
config.assets.precompile += [ 'admin/main.css', 'admin/categories.css', 'print.css', 'products.css', 'services.css' ] 
```

# iphone - 在objective-c中初始化单例中的属性

> ID：10038869
> 
> 赞同：0
> 
> 时间：2012-04-06T03:40:59.713
> 
> 标签：iphone

所以我有点不确定。我想要的是通过我所有不同的视图控制器了解数据的一类。这个类应该有一个我的对象数组，所以如果我有一个 detailViewController，我只会查看我的数组中 DataManager 将持有的一个实例。我认为这个 DataManager 将是一个单例。我遵循了 Apple 关于创建单例的文档，但现在我对属性有点困惑。

```
static DataManager *sharedDmgr = nil;
+ (id)sharedInstance {
    if (sharedDmgr == nil) {
        sharedDmgr = [[super allocWithZone:NULL] init];
    }
    return sharedDmgr;
} 
```

如果我想要一个 NSMutableArray 属性，初始化它的正确方法是什么？我会做类似的事情吗

```
+ (id)sharedInstance {
    if (sharedDmgr == nil) {
        sharedDmgr = [[super allocWithZone:NULL] init];
        [self sharedInit];
    }
    return sharedDmgr;
}

- (void)sharedInit {
      // initialize all my properties for the singleton here?
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T04:09:14.873

假设 DataManager 对象有一个名为“array”的 NSMutableArray 属性，那么您的目标是能够在所有代码中执行 [DataManager sharedDataManager].array。

这样做的方法是：

*   将 NSMutableArray *array 声明为 DataManager.h @interface 块上的属性。
*   为该属性声明一个@property。
*   在 - [DataManager init] 方法上初始化可变数组。像 self.array = [NSMutableArray array];

那么您的 sharedInstance 方法将是：

```
static DataManager *sharedDmgr = nil;
+ (id)sharedInstance {
    if (sharedDmgr == nil) {
        sharedDmgr = [[DataManager alloc] init];
    }
    return sharedDmgr;
} 
```

全部做完。如果您需要一些示例代码，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:33:05.367

您可以为您的属性获取器使用相同的惰性初始化模式。所以对于一个可变数组...

```
@interface DataManager ()
@property (strong, nonatomic) NSMutableArray *array;
@end 

@implementation DataManager
@synthesize array=_array;

// shared instance method like @fbernardo's suggestion

- (NSMutableArray *)array {

    if (!_array) {
        _array  = [[NSMutableArray alloc] init];
    }
    return _array;
} 
```

# c# - Windows XP Pro 上的 C# pinvoking CredWrite 问题

> ID：10038871
> 
> 赞同：1
> 
> 时间：2012-04-06T03:41:10.543
> 
> 标签：c#, pinvoke, credentials

我目前有一个用 c# 编写的程序，它[从 Advapi32.dll 调用 CredRead/CredWrite，](http://www.pinvoke.net/default.aspx/advapi32.credwrite)以便未加入域的用户轻松保存终端服务器/WebDAV 服务器凭据。（[http://msdn.microsoft.com/en-us/library/aa374788%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa374788%28v=vs.85%29.aspx)获取凭证结构信息）

这一切都很好，但前几天我遇到了一个在所有 XP 操作系统上都存在的问题；我无法保存终端服务器凭据。本机 CredWrite 方法返回错误代码 87 (ERROR_INVALID_PARAMETER)。

在尝试了许多不同的凭据持久性和类型组合之后，我意识到问题出在 TargetName 本身。要将终端服务器保存在 Windows 密钥环中，TargetName 是 TERMSRV/server.domain.com。在 Windows Vista 或更高版本上，这适用于我的代码，但在 Windows XP 上却不行。

奇怪的是，当您在 Windows XP 上运行远程桌面应用程序并让它保存凭据时，它不会大惊小怪。当我在使用 RDP 后创建了一种枚举已保存凭据的方法时（显然没有返回密码 blob），我可以看到目标与我的程序尝试编写的目标相同。

为了确认问题出在 TargetName 中，我删除了“/”，它工作正常。

以下是我的代码的相关部分：

```
var writeInt = NativeCredMan.WriteCred("TERMSRV/host.server.com", samAccountName, password, CRED_TYPE.DOMAIN_PASSWORD, CRED_PERSIST.LOCAL_MACHINE); 
```

……

```
public enum CRED_TYPE : uint
{
    GENERIC = 1,
    DOMAIN_PASSWORD = 2,
    DOMAIN_CERTIFICATE = 3,
    DOMAIN_VISIBLE_PASSWORD = 4,
    GENERIC_CERTIFICATE = 5,
    DOMAIN_EXTENDED = 6,
    MAXIMUM = 7,      // Maximum supported cred type
    MAXIMUM_EX = (MAXIMUM + 1000),  // Allow new applications to run on old OSes
}

public enum CRED_PERSIST : uint
{
    SESSION = 1,
    LOCAL_MACHINE = 2,
    ENTERPRISE = 3,
} 
```

……

```
 [DllImport("Advapi32.dll", EntryPoint = "CredReadW", CharSet = CharSet.Unicode, SetLastError = true)]
    static extern bool CredRead(string target, CRED_TYPE type, int reservedFlag, out IntPtr CredentialPtr);

    [DllImport("Advapi32.dll", EntryPoint = "CredWriteW", CharSet = CharSet.Unicode, SetLastError = true)]
    static extern bool CredWrite([In] ref NativeCredential userCredential, [In] UInt32 flags);

    [DllImport("Advapi32.dll", EntryPoint = "CredFree", SetLastError = true)]
    static extern bool CredFree([In] IntPtr cred);

    [DllImport("Advapi32.dll", EntryPoint = "CredDeleteW", CharSet = CharSet.Unicode)]
    static extern bool CredDelete(string target, CRED_TYPE type, int flags);

    //[DllImport("advapi32", SetLastError = true, CharSet = CharSet.Unicode)]
    //static extern bool CredEnumerateold(string filter, int flag, out int count, out IntPtr pCredentials);

    [DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
    public static extern bool CredEnumerate(string filter, uint flag, out uint count, out IntPtr pCredentials);

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    private struct NativeCredential
    {
        public UInt32 Flags;
        public CRED_TYPE Type;
        public IntPtr TargetName;
        public IntPtr Comment;
        public System.Runtime.InteropServices.ComTypes.FILETIME LastWritten;
        public UInt32 CredentialBlobSize;
        public IntPtr CredentialBlob;
        public UInt32 Persist;
        public UInt32 AttributeCount;
        public IntPtr Attributes;
        public IntPtr TargetAlias;
        public IntPtr UserName;

        internal static NativeCredential GetNativeCredential(Credential cred)
        {
            var ncred = new NativeCredential
                            {
                                AttributeCount = 0,
                                Attributes = IntPtr.Zero,
                                Comment = IntPtr.Zero,
                                TargetAlias = IntPtr.Zero,
                                Type = CRED_TYPE.DOMAIN_PASSWORD,
                                Persist = (UInt32) cred.Persist,
                                CredentialBlobSize = (UInt32) cred.CredentialBlobSize,
                                TargetName = Marshal.StringToCoTaskMemUni(cred.TargetName),
                                CredentialBlob = Marshal.StringToCoTaskMemUni(cred.CredentialBlob),
                                UserName = Marshal.StringToCoTaskMemUni(cred.UserName)
                            };
            return ncred;
        }
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    public struct Credential
    {
        public UInt32 Flags;
        public CRED_TYPE Type;
        public string TargetName;
        public string Comment;
        public System.Runtime.InteropServices.ComTypes.FILETIME LastWritten;
        public UInt32 CredentialBlobSize;
        public string CredentialBlob;
        public CRED_PERSIST Persist;
        public UInt32 AttributeCount;
        public IntPtr Attributes;
        public string TargetAlias;
        public string UserName;
    } 
```

……

```
 public static int WriteCred(string key, string userName, string secret, CRED_TYPE type, CRED_PERSIST credPersist)
    {

        var byteArray = Encoding.Unicode.GetBytes(secret);
        if (byteArray.Length > 512)
            throw new ArgumentOutOfRangeException("The secret message has exceeded 512 bytes.");

        var cred = new Credential
                       {
                           TargetName = key,
                           CredentialBlob = secret,
                           CredentialBlobSize = (UInt32) Encoding.Unicode.GetBytes(secret).Length,
                           AttributeCount = 0,
                           Attributes = IntPtr.Zero,
                           UserName = userName,
                           Comment = null,
                           TargetAlias = null,
                           Type = type,
                           Persist = credPersist
                       };
        var ncred = NativeCredential.GetNativeCredential(cred);

        var written = CredWrite(ref ncred, 0);
        var lastError = Marshal.GetLastWin32Error();
        if (written)
        {
            return 0;
        }
        var message = "";
        if (lastError == 1312)
        {
            message = (string.Format("Failed to save " + key + " with error code {0}.", lastError) + "  This error typically occurrs on home editions of Windows XP and Vista.  Verify the version of Windows is Pro/Business or higher.");
        }
        else
        {
            message = string.Format("Failed to save " + key + " with error code {0}.", lastError);
        }
        MessageBox.Show(message);
        return 1;
    } 
```

关于如何获得这些类型的凭据来保存，任何一点都可以指向正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:42:32.777

没关系。我发现了问题。在查看我的问题后，我注意到托管凭证计数器部分：

```
internal static NativeCredential GetNativeCredential(Credential cred)
    {
        var ncred = new NativeCredential
                        {
                            AttributeCount = 0,
                            Attributes = IntPtr.Zero,
                            Comment = IntPtr.Zero,
                            TargetAlias = IntPtr.Zero,
                            Type = CRED_TYPE.DOMAIN_PASSWORD,
                            Persist = (UInt32) cred.Persist,
                            CredentialBlobSize = (UInt32) cred.CredentialBlobSize,
                            TargetName = Marshal.StringToCoTaskMemUni(cred.TargetName),
                            CredentialBlob = Marshal.StringToCoTaskMemUni(cred.CredentialBlob),
                            UserName = Marshal.StringToCoTaskMemUni(cred.UserName)
                        };
        return ncred;
    } 
```

将 TYPE 预定义为 CRED.TYPE.DOMAIN_PASSWORD 而不仅仅是贴花类型。

更改为：

```
internal static NativeCredential GetNativeCredential(Credential cred)
    {
        var ncred = new NativeCredential
                        {
                            AttributeCount = 0,
                            Attributes = IntPtr.Zero,
                            Comment = IntPtr.Zero,
                            TargetAlias = IntPtr.Zero,
                            Type = cred.type,
                            Persist = (UInt32) cred.Persist,
                            CredentialBlobSize = (UInt32) cred.CredentialBlobSize,
                            TargetName = Marshal.StringToCoTaskMemUni(cred.TargetName),
                            CredentialBlob = Marshal.StringToCoTaskMemUni(cred.CredentialBlob),
                            UserName = Marshal.StringToCoTaskMemUni(cred.UserName)
                        };
        return ncred;
    } 
```

并将凭证作为 GENERIC 发送解决了问题。显然，Windows Vista/7 允许在 DOMAIN_PASSWORD 和 GENERIC 持久性密码上使用“/”，但 XP 只允许 GENERIC 使用。

# android - 从网站为 Android 应用程序收集数据的最佳方式

> ID：10038877
> 
> 赞同：2
> 
> 时间：2012-04-06T03:41:35.520
> 
> 标签：android, web, data-retrieval

我正在尝试为一个项目组合一个新的应用程序，该应用程序将为用户显示火车时间。

我知道有几种方法可以解决这个问题，但在我开始之前，我想从你那里得到一些帮助。

## 我的选择

1.  使用网络视图
2.  使用链接到包含所有数据的网站的数据库
3.  一直都是硬编码
4.  向网站索取数据/访问数据。

这是网站： [http ://www.njtransit.com/sf/sf_servlet.srv?hdnPageAction=LightRailTo](http://www.njtransit.com/sf/sf_servlet.srv?hdnPageAction=LightRailTo)

我正在寻找源代码，看看是否能找到任何东西，但结果一片空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T04:51:31.400

**方法#4**是最好的方法。请求访问他们的 web 服务，为您提供 xml/json 的结果。然后，您的 Android 应用程序会对其进行解析，然后根据其 UI 显示它，并为用户提供一些网站无法提供的额外功能。

**方法1）**使用webview - （嗯，技术上最简单的......但如果你只是打开网页，当浏览器可以做同样的事情时，我为什么要使用你的应用程序？）

**方法 2)**或多或少与方法 #4 相同

**方法 3)**火车时刻表可能会发生变化，您必须经常更新您的应用程序。

# asp.net-mvc-3 - 如何在单个帖子中接收控制器中所有上传的文件，例如一次在列表<>中？

> ID：10038879
> 
> 赞同：0
> 
> 时间：2012-04-06T03:41:48.947
> 
> 标签：asp.net-mvc-3, uploadify

我在 MVC 3 中使用 Uploadify 上传多个文件时遇到问题。我选择了 3 个文件并通过 ajax 发布。我在控制器中获取文件，但有问题。我没有在一篇文章中获取 3 个文件，而是看到控制器被 3 个文件击中 3 次。

我希望在一个帖子中提供控制器中的所有 3 个文件。

这可能吗？

```
[HttpPost]
public ActionResult UploadFiles()
{
   //This always shows one file i debug mode
   foreach (string fileName in Request.Files)
   {

   }
} 
```

我想一次性处理文件并一次性保存它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:24:23.127

不知道 Uploadify，但如果您想一次上传多个文件，请使用标准表单：

看法：

```
@using (Html.BeginForm("YourAction","YourController",FormMethod.Post,new { enctype="multipart/form-data"})) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Message</legend>           
         //your html here

          //as many input types you would like but they 
         //must have a same name attribute (files) 
          <input type="file" name="files"/> 
    </fieldset> 
```

控制器：

```
[HttpPost]
public ActionResult YourAction(FormCollection values, IEnumerable<HttpPostedFileBase> files)
{
    //do what you want with form values then for files
    foreach (var file in files)
    {
      if (file.ContentLength > 0)
      {
         byte[] fileData = new byte[file.ContentLength];
         file.InputStream.Read(fileData, 0, file.ContentLength);
         //do what you want with fileData
       }
     }
} 
```

因此，您将使用`IEnumerable<HttpPostedFileBase> files`多个文件，`HttpPostedFileBase file`单个文件，并将视图中的输入更改为

```
<input type="file" name="file"/> 
```

问候。

# asp.net-mvc-4 - ASP.NET Web API - 一个控制器上的多个 POST 方法？

> ID：10038881
> 
> 赞同：10
> 
> 时间：2012-04-06T03:42:26.517
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我一直在尝试向默认的 ValuesController 类添加第二个 POST 方法，该类将采用 id 参数并与 PUT 方法相同，如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Http;
using System.Web.Http;

namespace WebCalendar.Controllers {
    public class ValuesController : ApiController   {
        // GET /values
        public IEnumerable<string> Get()             {
            return new string[] { "value1", "value2" };
        }

        // GET /values/5
        public string Get(int id) {
            return "value";
        }

        // POST /values
        public void Post(string value) {
        }

        // POST /values/5
        public void Post(int id, string value) {
            Put(id, value);
        }

        // PUT /values/5
        public void Put(int id, string value){
        }

        // DELETE /values/5
        public void Delete(int id) {
        }
    }
} 
```

问题是，当我添加第二个 post 方法时，每当我发出 POST 请求时，都会收到错误消息：

```
"No action was found on the controller 'values' that matches the request." 
```

如果我注释掉其中一种方法（不管是哪一种），POST 将与另一种方法一起使用。我已经尝试重命名这些方法，甚至`[HttpPost]`对它们都使用，但没有任何效果。

如何在单个 ApiController 中有多个 POST 方法？

**编辑**

这是我正在使用的唯一路线：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "{controller}/{id}",
    defaults: new { controller = "values", id = RouteParameter.Optional }
); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T05:06:11.060

您必须在您的路线中包含该操作：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

# iphone - Objective C - SecItemAdd 有错误：EXC_BAD_ACCESS（第一次）和 errSecDuplicateItem（第二次）

> ID：10038885
> 
> 赞同：1
> 
> 时间：2012-04-06T03:43:09.340
> 
> 标签：iphone, objective-c, ios

我在我的应用程序中使用此代码[http://wiki.effectiveprogramming.com/index.php?title=CocoaEncryption&redirect=no](http://wiki.effectiveprogramming.com/index.php?title=CocoaEncryption&redirect=no)来实现登录功能。但我有一个错误方法 saveRSAPublicKey：

```
+ (BOOL)saveRSAPublicKey:(NSData*)publicKey appTag:(NSString*)appTag overwrite:(BOOL)overwrite {
    //Error here (when first call) - Program received signal: "EXC_BAD_ACCESS" -> crash
    OSStatus status = SecItemAdd((CFDictionaryRef)[NSDictionary dictionaryWithObjectsAndKeys:
                                                   (id)kSecClassKey, kSecClass,
                                                   (id)kSecAttrKeyTypeRSA, kSecAttrKeyType,
                                                   (id)kSecAttrKeyClassPublic, kSecAttrKeyClass,
                                                   kCFBooleanTrue, kSecAttrIsPermanent,
                                                   [appTag dataUsingEncoding:NSUTF8StringEncoding], kSecAttrApplicationTag,
                                                   publicKey, kSecValueData,
                                                   kCFBooleanTrue, kSecReturnPersistentRef,
                                                   nil],
                                                   NULL);   //don't need public key ref

    DebugLog(@"result = %@", [KeychainUtil fetchStatus:status]);

    if(status == noErr)
        return YES;
    else if(status == errSecDuplicateItem && overwrite == YES)
        return [CryptoUtil updateRSAPublicKey:publicKey appTag:appTag];

    return NO;
} 
```

当我`saveRSAPublickey`第一次调用时，我无法创建 OSStatus 并且我的应用程序崩溃了。当我`saveRSAPublickey`第二次调用时：状态 ==`errSecDuplicateItem`并运行 `[CryptoUtil updateRSAPublicKey:publicKey appTag:appTag]`-> 成功。

调试时很难发现这个问题，因为它只出现在新设备中（从未安装过我的应用程序）。最后顺便发现了错误：set new appTag before call saveRSAPublicKey。我在 system.log 中看到：

**4 月 6 日 12:30:29 MACs-MacBook-Pro 安全 [4372]：无法访问 hwaes 密钥**

请帮我 ！！！谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T13:49:30.587

如果你传递了第二个参数（你的结果会出来），那么你在调用时`NULL`不允许有一个集合（更改为或只是删除它）。`Return Type Key``SecItemAdd()``kCFBooleanTrue, kSecReturnPersistentRef``kCFBooleanFalse, kSecReturnPersistentRef`

我刚刚提交了一个关于这个的错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:01:22.887

我猜想 publicKey 或者更可能的是 appTag 不包含您认为他们所做的事情。尝试将它们注销。

# jquery - 未捕获的 TypeError：onmouseover 时无法读取 null 错误的属性“1”

> ID：10038887
> 
> 赞同：0
> 
> 时间：2012-04-06T03:43:21.183
> 
> 标签：jquery, tooltip

DIV是这样的

```
<div onmouseover="showTrackInfo(<?php echo $info['ID']; ?>);" id="pl_table_div_<?php echo $info['ID']; ?>"> 
```

JS是

```
function showTrackInfo(a) {
Tipped.create("#pl_table_div_"+a, 'test', {
      skin: "light",
      maxWidth: 400,
      fixed: true,
      hook: "middleleft"
   });
} 
```

我哪里错了？

# javascript - 通过外部链接访问 twitter 引导选项卡

> ID：10038892
> 
> 赞同：0
> 
> 时间：2012-04-06T03:44:06.393
> 
> 标签：javascript, tabs, twitter-bootstrap

我在 Rails 3.0 应用程序上设置了 twitter 引导程序，并有一个包含三个选项卡的页面 (edit.html.haml)。这是我的代码（我正在使用haml）：

```
.tabbable
    %ul.nav.nav-tabs
      %li.active
        %a{"data-toggle" => "tab", :href => "#1"} 
          %i.icon-pencil
          Edit Profile
      %li
        %a{"data-toggle" => "tab", :href => "#2"} 
          %i.icon-lock
          Privacy Preferences
      %li
        %a{"data-toggle" => "tab", :href => "#3"} 
          %i.icon-cogs
          Site Preferences
    .well-two  
      .tab-content
        #1.tab-pane.active
          %p ...
        #2.tab-pane
          %p ...
        #3.tab-pane
          %p ... 
```

当我在编辑页面上时，这些选项卡工作正常（我可以在它们之间移动，它们会做出应有的响应）；但是，假设我在显示页面 (show.html.haml) 上并且有一个按钮显示：单击此处更改您的隐私设置（即：转到编辑页面上的第二个选项卡）...什么代码是否需要链接到隐私设置 (#2) 内容？

我有以下代码：

```
=link_to "#{raw('<i class="icon-plus-sign icon-large"></i>')} Privacy Settings".html_safe, edit_path(current_profile, :anchor => "2") 
```

但它不工作......它带我到编辑页面，但不加载隐私设置数据（即＃2下的数据）。

注意：即使我在编辑页面上，并将我的 URL 从：[http://localhost:3000/users/1/edit 更改](http://localhost:3000/users/1/edit)为[http://localhost:3000/users/1/edit#2](http://localhost:3000/users/1/edit#2)，它确实如此不要带我去第二个标签。

我是否缺少任何其他 JS？您的帮助将不胜感激。此外，您的答案不必符合 Haml 或 Rails 标准......我可以重新编写它们，我只是寻求一些指导和建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:31:17.193

这段代码似乎解决了这个问题：

```
:javascript
  $(document).ready(function(){
    $('a[href="' + window.location.hash + '"]').click()
  }); 
```

# ubuntu - Ubuntu 11.10 上的 Smashing Stack

> ID：10038893
> 
> 赞同：7
> 
> 时间：2012-04-06T03:44:08.903
> 
> 标签：ubuntu, x86, segmentation-fault, stack

当您尝试覆盖`$esp`指针时，是否有人遇到过以下问题？

当然，尝试合法的缓冲区大小总是有效的！但是，当您尝试增加缓冲区大小以覆盖`$esp`并且您成功地触摸它的第一个字节、第二个字节或第三个字节时，`$esp`它可以完美地工作。但是，一旦您尝试覆盖它的全部 4 个字节，`$esp`它就会完全改变它的内容以及地址。它不再显示`41`s，因为我使用“A”来填充缓冲区。我附上了一个屏幕截图，也许它会更详细地解释。谢谢大家。

```
#include <stdio.h>
#include <string.h>
int main(int argc, char** argv)
{
    char buffer[500];
    strcpy(buffer, argv[1]);
    return 0;
} 
```

![粉碎尝试](../Images/f9052ccbe14715cf6c0d146957457789.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T06:06:32.057

这与在 32 位非 PAE Ubuntu 内核中实现[NX 仿真以及何时引发 CPU 异常有关。](https://wiki.ubuntu.com/Security/Features#nx)对于 NX 仿真线以下的内存区域（即“在”仿真 NX 区域“内”：从地址 0 到程序文本段的结尾——小于此二进制 in 的 0x08049000 结束地址`/proc/$pid/maps`），段错误在 EIP 之后传递已登陆实际的无效地址。对于线上的地址，故障通过报告故障的不同路径触发，而不将 EIP 向前移动到故障地址，而是停留在导致故障的“ret”指令上。

你可以在 gdb 中看到：

```
(gdb) x/1i $pc
=> 0x8048454 <main+64>: ret    
(gdb) info reg esp
esp            0xbffff54c       0xbffff54c
(gdb) x/wx $esp
0xbffff54c:     0x41414141 
```

您还可以看到`dmesg`输出中报告故障的方式的差异。这是与“508”尝试相关的输出：

```
[  585.913896] a.out[1528] general protection ip:8048454 sp:bff1e8ec error:0 in a.out[8048000+1000] 
```

这是针对“507”的：

```
[  598.999760] a.out[1531]: segfault at 414141 ip 00414141 sp bfcac2c0 error 4 in libc-2.13.so[5e7000+178000] 
```

如果您在安装了 PAE 内核的情况下启动`sudo apt-get install linux-image-$(uname -r)-pae`，并且您有一个支持 PAE 的 CPU，您将看到您所期望的行为（因为 NX 仿真将被禁用以支持硬件 NX），并且所有 4 次尝试都会出现段错误预期的 EIP。

# jquery - .getJson 没有填充数组

> ID：10038900
> 
> 赞同：0
> 
> 时间：2012-04-06T03:45:48.780
> 
> 标签：jquery, getjson

我有以下代码：

```
$(document).ready(function() {
    $.getJSON('../includes/_quiz.php?class_id=163&course_id=183',function(data){
        $.each(data,function(k,v){
            questions[k] = v.question;
            answers[k*4] = v.ansO;
            answers[k*4+1] = v.ansT;
            answers[k*4+2] = v.ansTh;
            answers[k*4+3] = v.ansF;
            });

        //html  
        });
    }); 
```

问题数组没有被填充，但是当我调试时，我得到了这个结果：当我在浏览器中请求页面时，我收到了相同的结果：

```
[{"question":"\u0623\u0647\u0645 \u0627\u0644\u0635\u0646\u0627\u0639\u0627\u062a \u0627\u0644\u0633\u0648\u0631\u064a\u0629 \u0648 \u062a\u062f\u062e\u0644 \u0628\u0627\u0644\u062a\u0635\u062f\u064a\u0631 :","ansO":"\u0627\u0644\u0623\u0633\u0645\u062f\u0629","ansT":"\u0627\u0644\u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0632\u0631\u0627\u0639\u064a\u0629","ansTh":"\u0627\u0644\u0632\u064a\u0648\u062a \u0627\u0644\u0646\u0628\u0627\u062a\u064a\u0629","ansF":"\u0627\u0644\u0635\u0646\u0627\u0639\u0627\u062a \u0627\u0644\u0646\u0633\u064a\u062c\u064a\u0629","corr":"4"},{"question":"\u064a\u0633\u062a\u0648\u0631\u062f \u0627\u0644\u0639\u0631\u0627\u0642 \u0628\u0639\u0636 \u0627\u0644\u0645\u0648\u0627\u062f \u0645\u0646\u0647\u0627:","ansO":"\u0627\u0644\u0646\u0641\u0637","ansT":"\u0627\u0644\u062a\u0645\u0648\u0631","ansTh":"\u0627\u0644\u0623\u0644\u0627\u062a","ansF":"\u0627\u0644\u063a\u0627\u0632 \u0627\u0644\u0637\u0628\u064a\u0639\u064a","corr":"3"},{"question":"\u064a\u0628\u0644\u063a \u0639\u062f\u062f \u0633\u0643\u0627\u0646 \u0644\u064a\u0628\u064a\u0627 :","ansO":"\/3.5\/ \u0645\u0644\u064a\u0648\u0646 \u0646\u0633\u0645\u0629","ansT":"\/4\/ \u0645\u0644\u064a\u0648\u0646 \u0646\u0633\u0645\u0629","ansTh":"\/5\/ \u0645\u0644\u064a\u0648\u0646 \u0646\u0633\u0645\u0629","ansF":"\/5.5\/ \u0645\u0644\u064a\u0648\u0646 \u0646\u0633\u0645\u0629","corr":"4"}], 
```

我调试了代码，发现里面进不去，直接移到最后

在我对代码进行一些修改之前，数组已被填充，可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:52:14.043

请将数据分配给一个变量

> 变量结果 = 数据

你就这么写

> 警报（结果[0].问题）

你得到一个数组格式，但没有分配给任何变量。首先分配给变量

```
result = [{"question":"\u0623\u0647\u0645 \u0627\u0644\u0635\u0646\u0627\u0639\u0627\u062a \u0627\u0644\u0633\u0648\u0631\u064a\u0629 \u0648 \u062a\u062f\u062e\u0644 \u0628\u0627\u0644\u062a\u0635\u062f\u064a\u0631 :","ansO":"\u0627\u0644\u0623\u0633\u0645\u062f\u0629","ansT":"\u0627\u0644\u062‌​3\u062f\u0648\u0627\u062a \u0627\u0644\u0632\u0631\u0627\u0639\u064a\u0629","corr":"4"}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T04:10:33.967

如果 JSON 文件包含语法错误，则请求通常会静默失败。所以添加.error方法并检查解析json是否有错误

```
// Assign handlers immediately after making the request,
// and remember the jqxhr object for this request
var jqxhr = $.getJSON("example.json", function() {
  alert("success");
})
.success(function() { alert("second success"); })
.error(function() { alert("error"); })
.complete(function() { alert("complete"); }); 
```

# qt - 如何在 qt creator 中设置源文件的默认文件编码？

> ID：10038905
> 
> 赞同：4
> 
> 时间：2012-04-06T03:46:45.327
> 
> 标签：qt, encoding

我的 qt 创建器中没有![在此处输入图像描述](../Images/beb077715a79c3f15943f13a38555421.png)默认文件编码选项。因此，每个新创建的文件都继承自系统编码，即我的 windows 框上的 gbk(cp936)。但我想将源文件的默认文件编码设置为 utf-8。如何？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T03:55:00.003

我在文本编辑器板中找到了该选项。![在此处输入图像描述](../Images/efe0f1ea311002e8be5dce4e6581cdcc.png)

*注意：将编码更改为“UTF-8”后，如果您的系统编码为 UTF-8，可能仍会显示“System”。Qt 创建者文档指出“如果默认系统编码设置为 UTF-8，默认编码字段仍显示值 System”。*

# mysql - MYSQL SQL 语句。这个条件查询可能吗？

> ID：10038914
> 
> 赞同：3
> 
> 时间：2012-04-06T03:47:59.650
> 
> 标签：mysql, sql, conditional

3我只是想知道这种类型的查询是否可能。如果是这样，我们将不胜感激。

```
 SELECT 

        field1,
        field2,
        field3

    FROM maintable

    WHERE maintable.field1 = passed_in_parameter

    IF (maintable.field2 = 1) THEN
            //do anything like joins
        INNER JOIN widgettable on widgettable.widgetid = field3

    ELSEIF (maintable.field2 = 2) THEN
            //do anything like joins
        INNER JOIN gizmottable on gizmottable.gizmoid = field3

    END IF 
```

我希望我正在尝试做的事情是有意义的。总之，我需要根据原始选择中的字段值来连接不同的表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T04:03:26.820

正如 zerkms 建议的那样，您可以将它们都从外部加入。请看以下是否有效

```
select mt.field1,
    mt.field2,
    mt.field3,
    CASE mt.field2 WHEN 1 THEN wt.widgetname WHEN 2 THEN gt.gizmoname END AS name 
from maintable mt
  left join widgettable wt
    on wt.widgetid = mt.field3
  left join gizmotable gt
    on gt.gizmoid = mt.field3
where mt.field1 = 'param'
   and ((mt.field2 = 1 and wt.widgetid is not null)
       or (mt.field2 = 2 and gt.gizmoid is not null)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T04:02:05.003

```
SELECT 
    maintable.field1,
    maintable.field2,
    maintable.field3,
    CASE maintable.field2
    WHEN 1 THEN widgettable.widget_name
    WHEN 2 THEN gizmotable.gizmo_name
    END AS consolidated_name
FROM      maintable
LEFT JOIN widgettable ON widgettable.widgetid = maintable.field3
LEFT JOIN gizmottable ON gizmottable.gizmoid  = maintable.field3
WHERE     maintable.field1 = 'passed in parameter' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T04:03:40.460

这听起来有点像 UNION 查询，只是您没有指定要查看连接表中的任何数据。这意味着内部连接是简单的存在性检查；他们检查连接表中是否有与主表中的行匹配的行。我已经采取了“激进”步骤，假设您需要连接表中的几列；您可以省略那些连接的列，而不会严重改变整体效果。此 UNION 查询假定您需要的 WidgetTable 和 GizmotTable 中的列非常相似。然后你可以写：

```
SELECT m.field1,
       m.field2,
       m.field3,
       w.column1,
       w.column3
  FROM maintable   AS m
  JOIN widgettable AS w ON w.widgetid = m.field3
 WHERE m.field1 = passed_in_parameter
   AND m.field2 = 1

UNION

SELECT m.field1,
       m.field2,
       m.field3,
       g.attribute23,
       g.attribute19
  FROM maintable   AS m
  JOIN gizmottable AS g ON g.gizmoid = m.field3
 WHERE m.field1 = passed_in_parameter
   AND m.field2 = 2 
```

您正在寻找的直接类似物是：

```
SELECT m.field1, m.field2, m.field3,
  FROM maintable   AS m
  JOIN widgettable AS w ON w.widgetid = m.field3
 WHERE m.field1 = passed_in_parameter
   AND m.field2 = 1
UNION
SELECT m.field1, m.field2, m.field3,
  FROM maintable   AS m
  JOIN gizmottable AS g ON g.gizmoid = m.field3
 WHERE m.field1 = passed_in_parameter
   AND m.field2 = 2 
```

# php - 如何找出导致页面加载速度变慢的原因

> ID：10038918
> 
> 赞同：0
> 
> 时间：2012-04-06T03:49:18.900
> 
> 标签：php, codeigniter, cookies

我将 Codeigniter 与 Tank Auth 身份验证库一起使用。当用户到达需要登录的页面并且他没有登录时，他将被重定向到登录页面。

**问题：**在本地主机上，当我刷新网页非常频繁时，页面开始加载可能需要长达 30 秒！有时，在等待页面加载后，我似乎已经注销，因为加载的页面是我被重定向到的登录页面。在实时服务器上，页面加载之前的长时间延迟不会发生，但用户可以看似随机地退出。

这里发生了什么事？如何找出导致加载时间过长的代码部分？是什么导致了随机注销？

**PHP 代码（控制器）**

```
function index() {
    $this->load->module('auth');
    if(!$this->auth->tank_auth->is_logged_in()) {
         redirect('login');
    } 
// If user registered/logged in after landing on another page
    if($this->session->userdata('entry_url')) {
        $entry_url = $this->session->userdata('entry_url');
        $this->session->unset_userdata('entry_url');
        redirect($entry_url);   // redirect back to entry url before registration/login
    }

    // Set User Session Variables
    $user_id = $this->session->userdata('user_id');
    $this->load->model('main_model');
    $name = $this->main_model->get_user_first_last_name($user_id);
    $this->session->set_userdata('first_name', $name['first_name']);
    $this->session->set_userdata('last_name', $name['last_name']);

    $this->load->view('main'); 
```

**配置文件**

```
$config['sess_cookie_name']     = 'cisession';
$config['sess_expiration']      = 0;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;

$config['cookie_prefix']    = "";
$config['cookie_domain']    = "";
$config['cookie_path']      = "/";
$config['cookie_secure']    = FALSE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T04:56:22.767

您的两个问题基本上都是在要求我们告诉您如何调试代码...如果您需要查看脚本的时间，请进行一些 microtime() 调用并输出差异以获得相当准确的执行时间。

至于随机注销，实际上任何人都可以在不查看源代码的情况下提供帮助……您应该将范围缩小到不仅仅是“可能导致这种情况的原因”。任何事情都可能导致它，如果没有更多信息，我们无法提供相关的见解。

[另外，你试过什么？](http://mattgemmell.com/2008/12/08/what-have-you-tried/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:38:02.630

使用 profile 和 benchmark 类来分析你的代码。 [http://codeigniter.com/user_guide/libraries/benchmark.html](http://codeigniter.com/user_guide/libraries/benchmark.html)

此外，如果您有会话 cookie，请检查其大小。也许它超出了允许的限制 (4096)，这可能是导致用户注销的原因。

# iphone - iphone app Cardiograph如何检测心跳？

> ID：10038920
> 
> 赞同：1
> 
> 时间：2012-04-06T03:50:03.237
> 
> 标签：iphone

如果您不知道，这里是心电图仪应用程序的一些信息： [http ://www.spotlightofpeace.com/techarea/photos/cardiograph-application-to-measure-heartbeat-from-iphone-and-ipad-camera/](http://www.spotlightofpeace.com/techarea/photos/cardiograph-application-to-measure-heartbeat-from-iphone-and-ipad-camera/)

好像是感应到了光。我知道这里有一些关于环境光传感器 [的讨论：关于 iPhone 中的环境光传感器](https://stackoverflow.com/questions/6408840/about-ambient-light-sensor-in-iphone)

但不确定这个应用程序是否使用了这个传感器，有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T04:09:05.230

这使用相机而不是环境光传感器。您将手指放在相机上，然后它会测量进入的光量（通过手指后）并寻找规律的变化（由血液中氧气水平的变化引起）

# sharepoint - 如何在 sharepoint 2010 中列出当前用户受众？

> ID：10038928
> 
> 赞同：0
> 
> 时间：2012-04-06T03:51:17.637
> 
> 标签：sharepoint

在 Sharppoint 2010 中，有一个 Web 部件可以关闭受众，以将内容定位到全球门户中的用户（内容无处不在）我怎样才能让用户能够查看他们当前所在的受众？

为什么？为了可用性，我想添加一个链接，显示用户当前所属的受众，以便他们理解为什么他们会看到他们在列表中看到的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:17:44.807

```
AudienceLoader objAudLoader = AudienceLoader.GetAudienceLoader();
    AudienceManager.IsCurrentUserInAudienceOf(objAudLoader, audience, false) 
```

AudienceLoader 属于 Microsoft.Office.Server.Audience 命名空间，并在此处记录：http: [//msdn.microsoft.com/en-us/library/microsoft.office.server.audience.audiencemanager.iscurrentuserinaudienceof.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.server.audience.audiencemanager.iscurrentuserinaudienceof.aspx)

希望这对你有帮助..

# ssl - 如何使用https？

> ID：10038929
> 
> 赞同：7
> 
> 时间：2012-04-06T03:51:31.477
> 
> 标签：ssl, https

如果在服务器上，我们已经设置/配置了 SSL 证书，我怎样才能让我的网站使用安全页面？只需链接到[https://example.com/etc.php](https://example.com/etc.php)？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T04:08:50.160

有两件事必须到位。

1.  您需要正确设置 ssl 证书，这听起来像是您拥有的
2.  正如另一位评论员所说，这将取决于您使用的网络服务器。很可能，apache：

阿帕奇：

您需要修改 apache 设置以支持您网站的 https 版本。如果您使用带有虚拟主机的现代 Apache2 安装，通常会有一个“站点可用”目录，其中每个域都存在单独的配置文件。对于同时具有 http 和 https（80 和 443）的域，假设 apache 正在侦听 127.0.0.1（大多数 apache 安装情况并非如此，因此请务必更改 ip ）。不用说，您需要更改以下路径和域名：

```
<VirtualHost 127.0.0.1:80>
  ServerAdmin somebody@domain.com
  ServerName somebody.com
  ServerAlias www.somebody.com
  DocumentRoot /home/somebody/www
  <Directory "/home/somebody/www">
        Options FollowSymLinks
        AllowOverride All
        Options -Indexes
  </Directory>
  ErrorLog /home/logs/somebody.error.log
  CustomLog /home/logs/somebody.access.log combined
</VirtualHost>

<VirtualHost 127.0.0.1:443>
  SSLEngine On
  SSLCertificateFile /etc/apache2/ssl/something.crt
  SSLCertificateKeyFile /etc/apache2/ssl/something.key
  SSLCertificateChainFile /etc/apache2/ssl/gd_bundle.crt
  ServerAdmin somebody@something.com
  ServerName somebody.com
  ServerAlias www.somebody.com
  DocumentRoot /home/somebody/www
  <Directory "/home/somebody/www">
        Options FollowSymLinks
        AllowOverride All
        Options -Indexes
  </Directory>
  ErrorLog /home/logs/somebody.ssl.error.log
  CustomLog /home/logs/somebody.ssl.access.log combined
</VirtualHost>
```

如果您使用的是 nginx，则需要为 :80 和 :443 提供类似的双重块。查看您已经拥有的 80 块并查阅他们的文档：

[http://nginx.org/en/docs/http/configuring_https_servers.html](http://nginx.org/en/docs/http/configuring_https_servers.html)

您也可能正在使用 iis，在这种情况下，这里是版本 7 的说明：

[如何在 IIS 7 中为 SSL 配置站点？](https://stackoverflow.com/questions/5194540/how-do-i-configure-a-site-in-iis-7-for-ssl)

# android - 共享偏好存储值在 android onCreate() 中不起作用

> ID：10038930
> 
> 赞同：4
> 
> 时间：2012-04-06T03:51:37.793
> 
> 标签：android, sharedpreferences

在我的应用程序中，我使用共享首选项，它在 onResume() 中工作正常，只是它在 onCreate() 中不起作用。有人知道原因吗？在 onCreate 中，共享首选项值始终仅为 null。

这是我的代码

```
@Override
protected void onResume() {

    setTextValues();
    super.onResume();
    }

private void setTextValues(){       
      txt1.setText(PreferenceConnector.readString(this,PreferenceConnector.MILEAGE, null));
      txt2.setText(PreferenceConnector.readString(this,PreferenceConnector.YEAR, null));
      txt3.setText(PreferenceConnector.readString(this,PreferenceConnector.CAPACITY, null));         
}

   package com.InternetGMBH.Sample.Utilities;

     import com.InternetGMBH.Tample.Activities.WheelActivity;

     import android.content.Context;
      import android.content.SharedPreferences;
     import android.content.SharedPreferences.Editor;

  public class PreferenceConnector{
  public static final String PREF_NAME = "PEOPLE_PREFERENCES";
  public static final int MODE = Context.MODE_PRIVATE;

public static final String MILEAGE= "MILEAGE";
public static final String YEAR= "YEAR";
public static final String CAPACITY= "CAPACITY";

public static void writeBoolean(Context context, String key, boolean value) {
    getEditor(context).putBoolean(key, value).commit();
}

public static boolean readBoolean(Context context, String key, boolean defValue) {
    return getPreferences(context).getBoolean(key, defValue);
}

public static void writeInteger(Context context, String key, int value) {
    getEditor(context).putInt(key, value).commit();

}

public static int readInteger(Context context, String key, int defValue) {
    return getPreferences(context).getInt(key, defValue);
}

public static void writeString(Context context, String key, String value) {
    getEditor(context).putString(key, value).commit();

}

public static String readString(Context context, String key, String defValue) {
    return getPreferences(context).getString(key, defValue);
}

public static void writeFloat(Context context, String key, float value) {
    getEditor(context).putFloat(key, value).commit();
}

public static float readFloat(Context context, String key, float defValue) {
    return getPreferences(context).getFloat(key, defValue);
}

public static void writeLong(Context context, String key, long value) {
    getEditor(context).putLong(key, value).commit();
}

public static long readLong(Context context, String key, long defValue) {
    return getPreferences(context).getLong(key, defValue);
}

public static SharedPreferences getPreferences(Context context) {
    return context.getSharedPreferences(PREF_NAME, MODE);
}

public static Editor getEditor(Context context) {
    return getPreferences(context).edit();
} 
```

}

如果我在 onCreate() 中调用 setTextValues() 它只显示空值。但 onResume 工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T04:09:53.000

您的活动似乎是您的应用程序的第一个活动，在 onCreate 方法 SharedPreferences 可能未正确初始化。

最好在 onStart 方法中使用 Preferences，而不是 onCreate 或 onResume 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T05:58:19.980

SharedPreferences 不同于首选项。您应该像下面的示例代码一样调用 getSharedPreferences：

```
public static String APP_PREFERENCES = "appPreferences";
public static String PREFERENCE_SAMPLE = "prefSample";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //get Shared preferences
    sharedPreferences = getSharedPreferences(APP_PREFERENCES, MODE_PRIVATE);

    //retrieve a preference
    String str = sharedPreferences.getString(PREFERENCE_SAMPLE, "");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-26T20:13:05.030

将此用作共享优先级

```
public class PreferenceConnector{
public static final String PREF_NAME = "PEOPLE_PREFERENCES";
public static final int MODE = Context.MODE_PRIVATE;

/*public static final String NAME = "NAME";
public static final String SURNAME = "SURNAME";
public static final String AGE = "AGE";*/

public static void writeBoolean(Context context, String key, boolean value) {
    getEditor(context).putBoolean(key, value).commit();
}

public static boolean readBoolean(Context context, String key, boolean defValue) {
    return getPreferences(context).getBoolean(key, defValue);
}

public static void writeInteger(Context context, String key, int value) {
    getEditor(context).putInt(key, value).commit();

}

public static int readInteger(Context context, String key, int defValue) {
    return getPreferences(context).getInt(key, defValue);
}

public static void writeString(Context context, String key, String value) {
    getEditor(context).putString(key, value).commit();

}

public static String readString(Context context, String key, String defValue) {
    return getPreferences(context).getString(key, defValue);
}

public static void writeFloat(Context context, String key, float value) {
    getEditor(context).putFloat(key, value).commit();
}

public static float readFloat(Context context, String key, float defValue) {
    return getPreferences(context).getFloat(key, defValue);
}

public static void writeLong(Context context, String key, long value) {
    getEditor(context).putLong(key, value).commit();
}

public static long readLong(Context context, String key, long defValue) {
    return getPreferences(context).getLong(key, defValue);
}

public static SharedPreferences getPreferences(Context context) {
    return context.getSharedPreferences(PREF_NAME, MODE);
}

public static Editor getEditor(Context context) {
    return getPreferences(context).edit();
} 
```

}

# c# - 将触摸输入更改为鼠标/键盘输入

> ID：10038936
> 
> 赞同：-2
> 
> 时间：2012-04-06T03:53:29.993
> 
> 标签：c#, wpf, touch

有没有办法将触摸输入转换为鼠标/键盘输入？需要虚拟触摸板的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:01:14.903

如果您使用 ELO 触摸屏，您可以将其变成一个完整的数字化仪，这样您就可以获得真正的优惠。这是他们的[数字化仪驱动程序](http://www.elotouch.com/files/unrestricted_drivers/SW601073_EloWin7MTDriver1.1.1.exe)的链接，适用于 W7/W8。

至于虚拟触摸板，我不确定您指的是什么代码。

# c# - 使用 XML 和 Excel 模板将数据导入 Excel

> ID：10038940
> 
> 赞同：0
> 
> 时间：2012-04-06T03:54:05.890
> 
> 标签：c#, xml, excel, csv, import

我正在从 C# 应用程序生成 CSV 数据。这可以很容易地导入 Excel，但我需要对文件应用格式。

一种选择是互操作，但运行此应用程序的计算机将没有安装 Office 产品，因此它已经过时了。

我被告知 XML 可以与 Excel 模板一起使用，我正在寻找一个关于如何实现这一点的入门示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:17:31.483

您可以使用出色的 OpenXML 包装器[ClosedXML](http://closedxml.codeplex.com/)来生成带格式的 xlsx 文件。或者，如果您愿意，可以使用纯[OpenXML](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=5124)。要使 ClosedXML 工作，需要安装 OpenXML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:37:48.983

我已经多次使用 excel 2003 xml 格式生成了 excel 电子表格，但您必须考虑使用此格式无法支持的以下功能：

> 此 XML 电子表格 2003 文件格式 (.xml) 不保留以下功能：
> 
> *   审计跟踪箭头
>     
>     
> *   图表和其他图形对象
>     
>     
> *   图表工作表、宏工作表、对话框工作表
>     
>     
> *   自定义视图
>     
>     
> *   数据整合参考
>     
>     
> *   绘图对象图层
>     
>     
> *   概述和分组功能
>     
>     
> *   受密码保护的工作表数据
>     
>     
> *   场景
>     
>     
> *   用户自定义功能类别
>     
>     
> *   VBA 项目

如果这是可以接受的，您可以使用有人建议的开源库，该库允许您在代码中生成电子表格，或者像我所做的那样，您可以使用 xml 转换或使用[spark](http://sparkviewengine.com/)模板引擎生成 xml。过去两者都为我工作，但使用火花视图引擎可能是最好的。

实现其中任何一个的最佳方法是按照您希望的方式创建模板并将其保存为 Excel 2003 Xml 格式并查看原始 xml。这应该使您可以轻松生成输出。您还可以下载 xml 定义以供参考。

# jquery - jQuery 正则表达式验证

> ID：10038941
> 
> 赞同：12
> 
> 时间：2012-04-06T03:54:11.470
> 
> 标签：jquery, regex, validation

我想检查输入字段是否具有“模式”属性，如果是，请执行正则表达式检查 aganst 所说的模式。我知道这已经由 HTML5 完成，但我想自己处理事件。我收到此错误：未捕获的类型错误：**对象 a-zA-Z 没有方法“测试”**

```
 ///Check Perform Reg///////////////////////////////////////////////////////
         if ($(this).attr("pattern")) {
             var reg = $(this).attr("pattern");
             var currentValue = $(this).val();

             if (reg.test(currentValue)) {
                 $(this).after($error.clone().text("Invalid Input.Try Again."));
                 $(".error:hidden").fadeIn("slow");
                 hasError = true;
                 return false;
             }

             }
        /////////////////////////////////////////////////////////////////////////// 
```

还是没有运气，

这也是我的html：

```
<div>
    <input class="formInput" name="First Name" pattern="^[A-Za-z_-][A-Za-z0-9_-]*$" type="text"  id="frmFirst" min="2" maxlength="30"  required="required"/>
    <span>First Name</span>
</div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-06T04:03:29.793

通常带有 javascript / jquery 句柄的正则表达式

```
var reg = /pattern/;
if (reg.test($(this).val())) {
    // perform some task
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T16:11:06.303

You can try something like this. It will alert "var2 failed".

```
var var1 = "1";
var var2 = "A";
var myRegEx = new RegExp('[0-9]+'); //make sure the var is a number

if (var1 != myRegEx.exec(var1)) {
    alert("var1 failed");
}

if (var2 != myRegEx.exec(var2)) {
    alert("var2 failed");
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T07:39:38.197

正如其他人已经提到的，您需要使用对象而不是 jQuery attr() 方法返回的字符串。你可以在这里看到两者之间的区别。

将返回“字符串”：

```
var reg = $(this).attr("pattern");
console.log(typeof reg) 
```

将返回“对象”：

```
var reg = new RegExp($(this).attr("pattern"));
console.log(typeof reg); 
```

因此，如果您更换：

```
var reg = $(this).attr("pattern"); 
```

和：

```
var reg = new RegExp($(this).attr("pattern")); 
```

**Uncaught TypeError: Object a-zA-Z has no method 'test'**错误将消失

...但是您的验证仍然不能很好地工作。您的条件逻辑表明，如果正则表达式测试返回 TRUE，则处理错误：

```
if (reg.test(currentValue)) {
    //error handling
} 
```

相反，如果测试返回 FALSE，它应该处理错误：

```
if (!reg.test(currentValue)) {
    //error handling
} 
```

这应该适合你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T04:17:59.373

字符串不是`RegExp`对象。你可以使用类似的东西：

```
var reg = new RegExp($(this).attr("pattern")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-22T19:07:48.877

下面是在 MVC 中使用 Jquery 基于正则表达式验证文本框的正确方法。请注意，此表达式用于验证一个字符串中的多个电子邮件地址：

```
 var emailReg = new RegExp(/^([A-Z0-9.%+-]+@@[A-Z0-9.-]+.[A-Z]{2,6})*([,;][\s]*([A-Z0-9.%+-]+@@[A-Z0-9.-]+.[A-Z]{2,6}))*$/i);
      var emailText = $('#email').val();

      if (!emailReg.test(emailText)) {
          alert('Wrong Email Address\Addresses format! Please reEnter correct format');
            return false;
        }
    } 
```

# ruby-on-rails - 为什么这个数据映射器对象不保存？

> ID：10038942
> 
> 赞同：1
> 
> 时间：2012-04-06T03:54:25.883
> 
> 标签：ruby-on-rails, ruby, sinatra, datamapper

这是模型：

```
class Target
  include DataMapper::Resource

  property :id, Serial
  property :owed, Integer, :default => 0, :required => true
  property :served, Integer, :default => 0, :required => true

  def go
    @owed -= 1
    @served += 1
    save
  end
end 
```

当我这样做时：

```
t = Target.first
t.go 
```

它似乎没有更新数据库。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T05:31:21.137

资源未保存，因为 DataMapper 不知道`owed`and`served`属性已更改。`#save`如果 DataMapper 认为资源是脏的，则只会保存资源。

相反，更改 和 的值`self.owed`，`self.served`这将导致资源内的状态更改，这会将资源标记为脏并允许`#save`触发。此外，您可以使用以下方法简化`go`方法`#update`：

```
def go
  update(:owed => self.owed - 1, :served => self.served + 1)
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T05:20:41.080

您需要使用`self.owed`and`self.served`来代替：

```
def go
  self.owed -= 1
  self.served += 1
  save
end 
```

# javascript - Javascript 中 display="block" 动作的淡化效果

> ID：10038944
> 
> 赞同：1
> 
> 时间：2012-04-06T03:54:48.493
> 
> 标签：javascript, jquery, fadein, css-transitions

我有一些 javascript 在单击 3 个选项卡中的 1 个时在 3 个 div 之间切换。

这是我的Javascript：

```
(function($){  
    $.fn.acidTabs = function(options) {     
            var settings = {
                        'style' : 'one'
             };     
                options = $.extend( settings, options );
                return this.each (function () {     
                    var o = options;
                    container = this;
                    container.setAttribute("class",o.style);
                    var navitem = container.querySelector("li");
                    //store which tab we are on
                    var ident = navitem.id.split("_")[1];
                    navitem.parentNode.setAttribute("data-current",ident);
                    //set current tab with class of activetabheader
                    navitem.setAttribute("class","tabActiveHeader");

                    //hide two tab contents we don't need
                    var pages = container.querySelectorAll(".tabpage");
                    for (var i = 1; i < pages.length; i++) {
                        pages[i].style.display="none";
                    }

                    //this adds click event to tabs
                    var tabs = container.querySelectorAll("li");
                    for (var i = 0; i < tabs.length; i++) {
                        tabs[i].onclick=displayPage;
                    }
                });

                // on click of one of tabs
                    function displayPage() {
                        var current = this.parentNode.getAttribute("data-current");
                        //remove class of activetabheader and hide old contents
                        document.getElementById("tabHeader_" + current).removeAttribute("class");
                        document.getElementById("tabpage_" + current).style.display="none";

                        var ident = this.id.split("_")[1];
                        //add class of activetabheader to new active tab and show contents
                        this.setAttribute("class","tabActiveHeader");
                        document.getElementById("tabpage_" + ident).style.display="block";
                        this.parentNode.setAttribute("data-current",ident);
                    }
            };
})(jQuery); 
```

我似乎无法修改它以接受褪色效果。或者也许有更好的方法来做到这一点？

很想得到你的帮助！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:27:15.970

这并不容易，因为你做不到。您需要拆分两个 css 语句。

具有 opacity:0 和 display:none 的新 div 将显示更改为阻塞，然后使用 setTimeout 更改不透明度（即使延迟 10 毫秒也可以）。

对将隐藏的 div 执行相反的操作。

像这样的东西：

```
var newdiv=document.getElementById("tabpage_" + ident);
newdiv.style.display="block";
setTimeout(function(){newdiv.style.opacity="1";},10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:12:37.673

好的，在 asp.net 论坛的帮助下弄清楚了。将函数 displayPage() 替换为：

```
var current = this.parentNode.getAttribute("data-current");
//remove class of activetabheader and hide old contents
$('#tabHeader_' + current).removeClass('tabActiveHeader');
$('#tabpage_' + current).hide();

var ident = this.id.split("_")[1];
//add class of activetabheader to new active tab and show contents
$(this).addClass("tabActiveHeader");
$('#tabpage_' + ident).fadeIn();
this.parentNode.setAttribute("data-current",ident); 
```

# ruby-on-rails - 每当我确定 routes.rb 的范围时，我的 rails 应用程序都会出现错误

> ID：10038948
> 
> 赞同：1
> 
> 时间：2012-04-06T03:55:10.257
> 
> 标签：ruby-on-rails, rails-routing

我正在尝试实现在 railscasts 中看到的国际化，每次我确定路由文件的范围时，我都会收到错误消息

```
 No route matches [GET] "/" 
```

或错误

```
missing :controller
config/routes.rb:6:in `block (2 levels) in <top (required)>'
config/routes.rb:5:in `block in <top (required)>'
config/routes.rb:1:in `<top (required)>' 
```

这是我的 routes.rb 文件

```
Jensenlocksmithing::Application.routes.draw do
  get "log_out" => "sessions#destroy", as: "log_out"
  get "log_in" => "sessions#new", as: "log_in"

  scope ":locale" do
    get "site/home"
    get "site/about_us"
    get "site/faq"
    get "site/discounts"
    get "site/services"
    get "site/contact_us"
    get "site/admin"
    get "site/posts"

    root :to => 'site#home'
  end

  #match '*path', to: redirect("/#{I18n.default_locale}/%{path}")
  #match '', to: redirect("/#{I18n.default_locale}")

  match "/savesort" => 'site#savesort'

  resources :users
  resources :abouts
  resources :sessions
  resources :coupons
  resources :monthly_posts
  resources :reviews

  resources :categories do
    collection { post :sort }
      resources :children, :controller => :categories, :only => [:index, :new, :create,  :new_subcategory]
  end
  resources :products do
    member do
       put :move_up
       put :move_down
   end 
  end
  resources :faqs do
    collection { post :sort }
  end 
end 
```

那么，为什么每当我添加范围 ":locale" do end line 时都会出现这些错误？没有它一切都很好。如果您需要查看更多代码，请告诉我。多谢你们

**编辑**

在我的应用程序控制器中，我有以下内容：

```
private

def default_url_options(options = {})
  {locale: I18n.locale}  
end 
```

这是否与在路由中传递哈希值相同？

**编辑 2**

如本要点所示，我将路线更改为以下路线。 [https://gist.github.com/2322844](https://gist.github.com/2322844)

那么为什么 :id 部分被添加到 get 路由中呢？像这个

```
 about_us_site GET  /sites/:id/about_us(.:format) 
```

不应该是这样的吗

```
 about_us_site GET  /sites/about_us(.:format) 
```

还添加了我的整个 routes.rb 文件及其生成的路由以获取更多信息。
[https://gist.github.com/2322861](https://gist.github.com/2322861)

**有兴趣的人回答：**

我变了

```
 get "site/home"
    get "site/about_us"
    get "site/faq"
    get "site/discounts"
    get "site/services"
    get "site/contact_us"
    get "site/admin"
    get "site/posts"

    root :to => 'site#home' 
```

到

```
 resources :sites, except: [:new, :edit, :index, :show, :update, :destroy, :create] do  
   collection do  
   get :home  
   get :about_us  
   get :faq  
   get :discounts  
   get :services  
   get :contact_us  
   get :admin  
   get :posts  
 end 
```

结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T04:21:19.330

传入哈希应该可以修复您的路线：

```
scope "(:locale)", :defaults => { :locale => "en" } do
  resources :sites
end 
```

此外，您可能需要考虑创建一个`SitesController`并给予它`members`：

```
resources :sites do
  member do
    get :about_us # Points to /sites/about_us
  end
end 
```

*   [Rails 关于在路由中定义默认值的指南](http://guides.rubyonrails.org/routing.html#defining-defaults)

# java - 每个项目的算法

> ID：10038952
> 
> 赞同：3
> 
> 时间：2012-04-06T03:55:52.967
> 
> 标签：java, algorithm

产品 A 成本 10 美元，B 成本 3 美元，C 成本 0.50 美元。一个人花 100 美元买了 100 件物品。该人购买了每种物品的数量。

我找到了答案——

```
94 * 0.5 = 47 
1 * 3    =  3    
5 * 10  =  50 
```

但是我无法在 java 中实现它作为我从 Hit and Trial 中得到结果的解决方案。解决这个问题的算法是什么

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T04:01:29.567

普通的蛮力：

```
 for (int i1 = 0; i1 <= 10; i1++) {
        for (int i2 = 0; i2 < 34; i2++) {
            int i3 = 100 - i2 - i1;
            int total = i1 * 10 + i2 * 3 + i3 / 2;
            if (total == 100 && i3 % 2 == 0)
                System.out.println(i1 + " * 10 + " + i2
                        + " * 3 + " + i3 + " * 0.5 = 100");

        }
    } 
```

给出两个答案：

*   0 * 10 + 20 * 3 + 80 * 0.5 = 100
*   5 * 10 + 1 * 3 + 94 * 0.5 = 100

PS 当然，这不是最佳解决方案，但仅适用于三个项目和 100 个总量 - 很好（并且从编码所需的时间点来看是最佳的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T04:11:00.853

你需要实现你的算法来解决这两个方程

```
A   +  B + C    = 100 -----------(1)
10A + 3B + 0.5C = 100 -----------(2) 
```

由(2)，我们可以得出：

```
C = 100 - A - B 
```

将此信息代入 (2)

```
10A + 3B + 0.5 * ( 100 - A - B) = 100
This reduces to 
19A + 5B = 100 
```

然后你可以扣除：

```
B = 20 - (19A/5) 
```

现在，尝试找出（使用 int 循环）的“整体”值`A`将`B`变成一个整体值（通常在此类问题中，您总是购买整体商品——如水果，没有分数）

你会发现，当 A=5 时，B=1。

继续以这种方式求解方程，并将 A、B 和 C 替换为 Java 变量，您将能够提供解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T04:30:24.373

这两种解决方案都很容易找到。Ring Bearer 已经给出了几乎所有的方法。环承载结束于：

```
B = 20 - (19A/5) 
```

不过，我们还知道其他一些事情：

```
A, B, and C are all non-negative integer values. 
```

这意味着 19A/5 必须是 (1) 整数（否则 B 将不是整数），并且 (2) 最多为 20（否则 B 将为负数）。这意味着对于 (1)，A 必须是 5 的倍数，对于 (2)，A 最多只能是 5。

另请注意，要求 19A/5 <= 20 可以重写为：

```
19A <= 100 
```

A 只有两个值满足这一点：0 和 5。找到所有解决方案的一种非常快速的方法是执行以下操作：

```
for (A = 0; 19*A <= 100; A += 5)
{
  // Show the solution for this value of A (with B = 20 - 19A/5 and C = 100 - A - B).
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T04:09:52.293

这是[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的变体，您可以寻找基于[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)的解决方案，该解决方案比蛮力（在计算复杂性方面）要好。一个简单的搜索产生了这样的[链接](http://jhave.org/learner/misc/knapsack/knapsack.shtml)

# php - 已达到 PHP 最大数据库连接数 - 使用 Kohana/ORM 启动连接

> ID：10038955
> 
> 赞同：2
> 
> 时间：2012-04-06T03:56:29.597
> 
> 标签：php, mysql, database, orm, kohana

在我们基于 PHP 的 Web 应用程序的负载测试中，我们可以轻松地达到最大连接数 150 的 DB 硬限制。我们使用 ORM 运行 Kohana 来管理数据库连接。

这会导致连接异常（从而导致事务失败），mysql_pconnect 似乎表现更差。

我们正在寻找一种在负载下优雅降级的解决方案。考虑的选项：

1.  一个数据库连接池（嗯，这对 PHP 来说是不可能的吧？）
2.  当失败是由于达到最大连接数时重试失败的连接

2 似乎合乎逻辑，但 Kohana/ORM 管理 DB 连接过程。我们可以以某种方式配置它吗？

有什么我*没有*想到的吗？

* * *

**编辑**

这是一个 Amazon AWS RDS 数据库实例，Amazon 为我设置了 150 个限制，并且服务器肯定配置正确。我只想确保在使用我使用的任何数据库的负载下优雅降级。显然，我总是可以升级数据库并拥有更高的连接限制，但我想防止出现故障，以防我们意外达到限制。负载下的优雅降级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T04:42:11.607

当您说负载测试时，我假设您正在推送大约 150 个并发请求，而不是因为您在同一个请求中建立了多个连接而达到了连接限制。如果是这样，请查看[mysql_pconnect](http://us.php.net/mysql_pconnect)。要在 Kohana 中启用它，只需在 config/database 文件中为您的连接启用 persistent = true 即可。

如果这不起作用，那么您将不得不找到一个允许更多连接的亚马逊产品，因为 PHP 不会在线程之间共享资源。

[这](https://stackoverflow.com/questions/39753/connection-pooling-in-php)回答了您关于 PHP 数据库连接池的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:31:48.880

如果连接限制为 150（[**max_connections**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_connections)的默认值为 151），您很可能在没有配置文件的情况下运行 mysql

您将需要创建一个配置文件来提高该数字

创建 /etc/my.cnf 并放入这两行

```
[mysqld]
max_connections=300 
```

您不必重新启动 mysql（如果您愿意，可以）

你可以运行这个 MySQL 命令来动态提升它

```
SET GLOBAL max_connections = 300; 
```

## **更新 2012-04-06 12:39 EDT**

尝试使用[mysql_pconnect](http://us2.php.net/manual/en/function.mysql-pconnect.php)而不是 mysql_connect。如果 Kohana 可以配置为使用 mysql_pconnect，那么您就可以开始了。

# c - 为什么 gcc 允许 void 类型的外部声明（非指针）？

> ID：10038964
> 
> 赞同：23
> 
> 时间：2012-04-06T03:58:06.650
> 
> 标签：c, gcc

为什么 gcc 允许 void 类型的外部声明？这是扩展还是标准C？这有可接受的用途吗？

我猜这是一个扩展，但我没有发现它在： http:
[//gcc.gnu.org/onlinedocs/gcc-4.3.6/gcc/C-Extensions.html](http://gcc.gnu.org/onlinedocs/gcc-4.3.6/gcc/C-Extensions.html)

```
$ cat extern_void.c
extern void foo; /* ok in gcc 4.3, not ok in Visual Studio 2008 */
void* get_foo_ptr(void) { return &foo; }

$ gcc -c extern_void.c # no compile error

$ gcc --version | head -n 1
gcc (Debian 4.3.2-1.1) 4.3.2 
```

将 foo 定义为 void 类型当然是编译错误：

```
$ gcc -c -Dextern= extern_void.c
extern_void.c:1: error: storage size of ‘foo’ isn’t known 
```

为了比较，Visual Studio 2008 在 extern 声明中给出了一个错误：

```
$ cl /c extern_void.c 
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 15.00.21022.08 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

extern_void.c
extern_void.c(1) : error C2182: 'foo' : illegal use of type 'void' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T05:23:29.590

奇怪的是（或者也许不是那么奇怪......）在我看来，gcc 接受这一点是正确的。

如果声明 this`static`而不是`extern`，那么它将具有内部链接，并且 §6.9.2/3 将适用：

> 如果对象标识符的声明是一个暂定定义并且具有内部链接，则声明的类型不应是不完整的类型。

如果它没有指定任何存储类（`extern`在本例中为 ），则 §6.7/7 将适用：

> 如果一个对象的标识符被声明为没有链接，则该对象的类型应在其声明符的末尾完成，如果它有初始化器，则在其 init-declarator 的末尾完成；在函数参数（包括原型）的情况下，需要完整的是调整后的类型（见 6.7.5.3）。

我在这两种情况下`void`都行不通，因为（§6.2.5/19）：

> void 类型 [...] 是无法完成的不完整类型。

*然而，这些都不*适用。这似乎只留下了 §6.7.2/2 的要求，这似乎允许使用 type 声明名称`void`：

> 在每个声明的声明说明符中，以及每个结构声明和类型名称的说明符-限定符列表中，至少应给出一个类型说明符。每个类型说明符列表应为以下集合之一（当一行中有多个集合时，以逗号分隔）；类型说明符可以以任何顺序出现，可能与其他声明说明符混合。
> 
> *   空白
> *   字符
> *   签名字符
> 
> [ ...省略了更多类型]

我不确定这是否真的是故意的——我怀疑`void`它真的是用于派生类型（例如，指向 void 的指针）或函数的返回类型之类的东西，但我找不到任何直接指定该限制的东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-27T15:43:11.447

我发现了声明的唯一合法用途

```
extern void foo; 
```

是什么时候`foo`是一个链接符号（由链接器定义的外部符号），它表示未指定类型的对象的地址。

这实际上很有用，因为链接符号通常用于传达内存范围；即 .text 段起始地址、.text 段长度等。

因此，使用这些符号的代码通过将它们转换为适当的值来记录它们的类型是很重要的。例如，如果`foo`实际上是内存区域的长度：

```
uint32_t textLen;

textLen = ( uint32_t )foo; 
```

或者，如果`foo`是同一内存区域的起始地址：

```
uint8_t *textStart;

textStart = ( uint8_t * )foo; 
```

我知道的在“C”中引用链接符号的唯一替代方法是将其声明为外部数组：

```
extern uint8_t foo[]; 
```

我实际上更喜欢`void`声明，因为它清楚地表明链接器定义的符号没有内在的“类型”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T12:05:34.987

GCC（也是 LLVM C 前端）绝对是错误的。不过，Comeau 和 MS 似乎都报告了错误。

OP 的片段至少有两个明确的 UB 和一个红鲱鱼：

从 N1570

[UB #1]`main`在托管环境中缺失：

> **J2。未定义的行为**
> 
> [...] 托管环境中的程序未使用指定形式之一定义名为 main 的函数 (5.1.2.2.1)。

[UB #2] 即使我们忽略上述内容，仍然存在获取`void`明确禁止的表达式地址的问题：

> **6.3.2.1 左值、数组和函数指示符**
> 
> 1 左值是可能指定对象的表达式（对象类型不是 void）；64)

和：

> **6.5.3.2 地址和间接运算符**
> 
> **约束**
> 
> 1 一元 & 运算符的操作数应为函数指示符、[] 或一元 * 运算符的结果，或指定不是位域且未使用寄存器存储类声明的对象的***左值***说明符。

[注意：强调*左值*矿井] 另外，标准中有一节专门针对`void`：

> **6.3.2.2 无效**
> 
> 1 void 表达式（具有 void 类型的表达式）的（不存在的）值不应以任何方式使用，并且不应将隐式或显式转换（除了 void）应用于此类表达式。

文件范围定义是主要表达式 (6.5)。因此，正在获取由 表示的对象的地址`foo`。顺便说一句，后者调用 UB。因此，这被明确排除。还有待弄清楚的是，如果删除`extern`限定符使上述有效或无效：

在我们的例子中，`foo`根据 §6.2.2/5：

> 5 [...] 如果对象标识符的声明具有文件范围且没有存储类说明符，则其链接是外部的。

即即使我们忽略了`extern`我们仍然会遇到同样的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-28T18:39:57.510

C 的链接器交互语义的一个限制是它没有提供允许数字链接时间常量的机制。在某些项目中，静态初始化程序可能需要包含在编译时不可用但在链接时可用的数值。在某些平台上，这可以通过在某处（例如，在汇编语言文件中）定义一个标签来实现，该标签的地址如果转换为`int`，将产生感兴趣的数值。`extern`然后可以在 C 文件中使用定义，以使该事物的“地址”可用作编译时常量。

这种方法在很大程度上是特定于平台的（就像使用汇编语言的任何东西一样），但是它使一些否则会出现问题的构造成为可能。它的一个有点令人讨厌的方面是，如果在 C 中将标签定义为类似 的类型`unsigned char[]`，则会传达出地址可能被取消引用或对其执行算术运算的印象。如果编译器将接受`void foo;`，则将`(int)&foo`使用`foo`与任何其他 `void*.

我认为我从来没有`void`为此目的使用过（我一直使用`extern unsigned char[]`），但如果`void`将其定义为合法扩展（C 标准中没有任何内容要求任何地方存在任何能力来创建链接器符号，可以用作除一种特定的非 void 类型以外的任何东西；在无法创建 C 程序可以定义为的链接器标识符的平台上`extern void`，编译器不需要允许这种语法）。

# java - 在游戏（MMORPG）客户端和服务器之间同步时间/事件？

> ID：10038972
> 
> 赞同：6
> 
> 时间：2012-04-06T04:00:34.783
> 
> 标签：java, actionscript-3, tcp, client-server, latency

我目前正在使用 Java 服务器端和 as3 客户端。我想知道是否有灵丹妙药可以在它们之间同步时钟。在可变延迟和可变时钟速度之间，似乎每个数据包都需要一个时间戳。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:42:16.243

这只是我的想法，没有任何代码。

1.  将代码放入服务器和客户端以发送和接收 ping。
2.  每次客户端连接时，都会从客户端向服务器发送 ping。
3.  记录当前时间作为发送时间。
4.  当客户端收到 ping 时，在接收时间记录当前时间。
5.  通过发送时间减去接收时间并除以 2 得到时间延迟。
6.  让服务器将当前时间发送给客户端。
7.  从发送的时间服务器中减去时间差。
8.  将客户端时间设置为步骤 6 中的时间。

我不确定这是否会 100% 准确，但我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:03:47.217

不，没有灵丹妙药。你必须即兴发挥。时间戳是个好主意。另外，尽量减少在服务器上完成的计算。不要模拟不相关的东西。只是你认为会破坏你的游戏逻辑的东西。让客户端计算其余的，并且只将结果广播给你的订阅者。

# iphone - NSFetchedResultsController 部分按动态条件分组？

> ID：10038973
> 
> 赞同：3
> 
> 时间：2012-04-06T04:01:15.230
> 
> 标签：iphone, objective-c, ios, ipad, core-data

我在 CoreData 中有 2 个实体（与此相关）。让我们称它们为`objectA`and `objectB`。每个实体与另一个实体具有一对多关系。

我有一个视图，它使用`NSFetchedResultsController`来显示表中所有`objectB`对象（记录）的列表。这一切都有效。

现在，我想要做的是，给定*任何**一个*** **，在第一部分中提供一个与特定**关系相关`objectA`的表格，其余部分在第二部分中。从我的尝试来看，它似乎不够灵活，无法允许这样的事情。`objectB` **`objectA``sectionNameKeyPath``NSFetchedResultsController`**

 **我错过了什么，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:47:21.753

不幸的是，这似乎`NSFetchedResultsController`不够灵活，所以我最终使用两个`NSFetchedResultsController`s 来分别获取具有不同谓词的第一和第二部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-14T07:01:12.903

我想建议另一种解决方案，

在您的实体（例如 sectionName 或类似）中创建一个属性，该属性将根据您的条件决定，例如。'一二'。

现在，当您创建 FRC 时，请根据“sectionName”（新条目）使用升序创建部分。

现在你有两个基于条件的部分。

我是这样弄的

在我的核心数据实体子类中创建了一个计算属性，

```
var groupSectionName:String?{
        return isPinned /**Or your condition*/ ? "One" : "Two"
    } 
```

在创建 FRC 的同时，

```
let frc = NSFetchedResultsController(fetchRequest: fetchRequest, managedObjectContext: context,    sectionNameKeyPath: "groupSectionName",cacheName: nil) 
```

现在，对于每个索引，FRC 都会调用计算属性。**

# android - 我可以同步停止服务吗？

> ID：10038978
> 
> 赞同：1
> 
> 时间：2012-04-06T04:02:11.437
> 
> 标签：android, service

我需要在删除数据库之前停止一对服务。服务正在访问数据库，如果不停止，应用程序将崩溃。

像这样：

```
stopService(new Intent(CurrentClass.this, FirstService.class));
stopService(new Intent(CurrentClass.this, SecondService.class));
CurrentClass.this.deleteDatabase(MyDatabaseHelper.DATABASE_NAME); 
```

据我所知，问题在于 stopService 是异步的。如何在我的数据库被删除之前强制我的服务停止？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T04:40:51.833

据我所知，服务被销毁的确切时间取决于 Android，并且可能不会立即发生......所以请记住这一点......我认为**如果您的数据库可用，您最好检查您的服务**。 .然后访问它...如果您认为..您不应该这样做检查数据库是否可用，始终在服务中...然后在您致电之前

```
stopService(new Intent(CurrentClass.this, FirstService.class));
stopService(new Intent(CurrentClass.this, SecondService.class)); 
```

广播一个要求服务停止的意图，并在您的服务中实现一个侦听器，并在该侦听器的 onreceive 中启动检查数据库是否可用的方法..像这样..例如..

```
 //this is in your service..
 bool stopping=false
 .......

 if(stopping)
  {
   //check if your databse is available and access it
  }
 else{
   //access your database directly..
  } 
```

并在收到您的广播接收器时

```
 @Override
  public void onReceive(Context context, Intent intent){
  stopping=true;
   } 
```

# c++ - 需要浮点精度，GUI gui 使用 int

> ID：10038981
> 
> 赞同：0
> 
> 时间：2012-04-06T04:02:22.290
> 
> 标签：c++

我有一个流程布局。在里面我有大约 900 张桌子。每张桌子都堆叠在一起。我有一个滑块可以调整它们的大小，从而导致流布局也调整大小。

问题是，表格应该线性调整大小。它们的基本尺寸为 200x200。所以当 scale = 1.0 时，表格的 w 和 h 为 200。

我每次都会调整一个固定的大小，使它们每次都大 4%。这意味着我希望它们每次增长 8 个像素。发生的情况是，每隔几次调整大小，表格就会增长 9 个像素。我到处使用双打。我试过四舍五入、地板和天花板，但问题仍然存在。我该怎么做才能使它们始终以正确的数量增长？

```
void LobbyTableManager::changeTableScale( double scale )
    {
        setTableScale(scale);
    }

    void LobbyTableManager::setTableScale( double scale )
    {
        scale += 0.3;
        scale *= 2.0;

        std::cout << scale << std::endl;
        agui::Gui* gotGui = getGui();
        float scrollRel = m_vScroll->getRelativeValue();
        setScale(scale);
        rescaleTables();
        resizeFlow();
    ...

    double LobbyTableManager::getTableScale() const
        {
            return (getInnerWidth() / 700.0) * getScale();
        }

    void LobbyFilterManager::valueChanged( agui::Slider* source,int val )
    {
        if(source == m_magnifySlider)
        {

            DISPATCH_LOBBY_EVENT
            {
                (*it)->changeTableScale((double)val / source->getRange());
            }
        }
    }

void LobbyTableManager::renderBG( GraphicsContext* g, agui::Rectangle& absRect, agui::Rectangle& childRect )
    {
        int cx, cy, cw, ch;
        g->getClippingRect(cx,cy,cw,ch);
        g->setClippingRect(absRect.getX(),absRect.getY(),absRect.getWidth(),absRect.getHeight());
        float scale = 0.35f;
        int w = m_bgSprite->getWidth() * getTableScale() * scale;
        int h = m_bgSprite->getHeight() * getTableScale() * scale;

        int numX = ceil(absRect.getWidth() / (float)w) + 2;
        int numY = ceil(absRect.getHeight() / (float)h) + 2;

        float offsetX = m_activeTables[0]->getLocation().getX() - w;
        float offsetY = m_activeTables[0]->getLocation().getY() - h;
        int startY = childRect.getY() + 1;
        if(moo)
        {
            std::cout << "TS: " << getTableScale() << " Scr: " << m_vScroll->getValue() << " LOC: " << childRect.getY() << " H: " << h << std::endl; 
        }
    if(moo)
    {
        std::cout << "S=" << startY << ",";
    }
        int numAttempts = 0;
        while(startY + h < absRect.getY() && numAttempts < 1000)
        {
            startY += h;
            if(moo)
            {
                std::cout << startY << ",";
            }

            numAttempts++;
        }

        if(moo)
        {
            std::cout << "\n";
            moo = false;
        }
        g->holdDrawing();
        for(int i = 0; i < numX; ++i)
        {
            for(int j = 0; j < numY; ++j)
            {
                g->drawScaledSprite(m_bgSprite,0,0,m_bgSprite->getWidth(),m_bgSprite->getHeight(),
                    absRect.getX() + (i * w) + (offsetX),absRect.getY() + (j * h) + startY,w,h,0);
            }
        }
        g->unholdDrawing();
        g->setClippingRect(cx,cy,cw,ch);
    }

        void LobbyTable::rescale( double scale )
        {
            setScale(scale);
            float os = getObjectScale();
            double x = m_baseHeight * os;
            if((int)(x + 0.5) > (int)x)
            {
                x++;
            }
            int oldH = getHeight();
            setSize(m_baseWidth * os, floor(x));
    ... 
```

我添加了相关代码。滑块发送一个更改的值，该值相乘以获得 4% 的增长（如果滑块移动 2 个值等，则为 8%），然后用这个重新调整表格。

![在此处输入图像描述](../Images/db17d742acbc1a0dfbfabe1819fd66b4.png)

前 3 次是表格大小增加 9 时，第 4 次增加了 8px。但比例因子每次增加 0.04。

为什么第四次不一致？

图案看起来像 8,8,8,9,9,9,8,8,8,9,9,9...

它增加了 1 个像素，然后减少了 1，十个增加了 1，等等，这就是我的问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T04:35:17.293

我仍然没有看到“添加 4%”的代码（无论如何都是我能理解的形式），但从你的描述中我想我看到了问题：两次添加 4% 不是添加 8%。它增加了 8.16% (1.04 * 1.04 == 1.0816)。再做几次，您将开始获得 9 个像素的跳跃。多做几次，你的跳跃会变得更大（当尺寸达到 400x400 时，跳跃会是 16 像素）。其中，恕我直言，我喜欢我的缩放发生方式。

# ruby - 使用循环在 Nokogiri::XML::Builder 代码块中创建多个节点

> ID：10038982
> 
> 赞同：1
> 
> 时间：2012-04-06T04:02:30.720
> 
> 标签：ruby, xml, nokogiri

我有需要循环的代码，它需要通过`each`循环更改节点名称，这是我的意思的一个例子：

```
builder = Nokogiri::XML::Builder.new do |xml|
  xml.HasThreeNodes {
    ['Node1','Node2','Node3'].each do |name|
      xml.name "value"
    end
  }
end 
```

输出：

```
<?xml version="1.0"?>
<HasThreeNodes>
  <name>value</name>
  <name>value</name>
  <name>value</name>
</HasThreeNodes> 
```

我尝试了不同的代码变体，但无济于事。我只需要它说`<name>`的地方`<Node1>`等等。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T04:19:22.387

这有效：

```
xml.send name, "value" 
```

还有为什么要混合卷曲和做/结束？如果它是一致的，它看起来会更好。

# c++ - 从 C++ 映射中删除键

> ID：10038985
> 
> 赞同：61
> 
> 时间：2012-04-06T04:03:23.907
> 
> 标签：c++, map

我想从 STL 映射中删除一个键。然而， `map.erase()`什么都不做。我该怎么做

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-04-06T04:08:17.383

这完全取决于您如何称呼它，但听起来您可能正在使用该`first,last`选项。如果你是，你需要记住它会删除从 开始的元素`first`，直到但*不包括* `last`。如果您遵循该规则，则基于迭代器的删除应该可以正常工作，无论是作为单个元素还是一个范围。

如果你用钥匙擦除，那么它也应该可以工作，当然假设钥匙在那里。

以下示例代码显示了所有三种方法的实际作用：

```
#include <iostream>
#include <map>

int main (void) {
    std::map<char,char> mymap;
    std::map<char,char>::iterator it;

    mymap['a'] = 'A'; mymap['b'] = 'B'; mymap['c'] = 'C';
    mymap['d'] = 'D'; mymap['e'] = 'E'; mymap['f'] = 'F';
    mymap['g'] = 'G'; mymap['h'] = 'H'; mymap['i'] = 'I';

    it = mymap.find ('b');             // by iterator (b), leaves acdefghi.
    mymap.erase (it);

    it = mymap.find ('e');             // by range (e-i), leaves acd.
    mymap.erase (it, mymap.end());

    mymap.erase ('a');                 // by key (a), leaves cd.

    mymap.erase ('z');                 // invalid key (none), leaves cd.

    for (it = mymap.begin(); it != mymap.end(); it++)
        std::cout << (*it).first << " => " << (*it).second << '\n';

    return 0;
} 
```

输出：

```
c => C
d => D 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-20T19:34:45.820

您必须先找到*迭代器*

```
map.erase( ITERATOR ) ; 
```

但是，为了确保安全，您需要确保 ITERATOR 存在。标准杆示例：

```
#include <stdio.h>
#include <map>
using namespace std ;

int main()
{
  map<int,int> m ;
  m.insert( make_pair( 1,1 ) ) ;
  map<int,int>::iterator iter = m.find(1) ;
  if( iter != m.end() )
    m.erase( iter );
  else puts( "not found" ) ;

} 
```

# ruby-on-rails - Resque：工人状态不对

> ID：10038988
> 
> 赞同：1
> 
> 时间：2012-04-06T04:03:34.760
> 
> 标签：ruby-on-rails, ruby, redis, resque

Resque 目前正在向我显示我有一名工人正在排队工作。该工人在队列中间被我关闭（它只是为了测试）并且该工人仍然显示为正在运行。我已经确认进程 ID 已被终止，并且 bluepill 不再监视它。我无论如何都无法在 UI 中找到强制清除它正在工作的内容。

更新当前启动的工作人员的状态的最佳方法是什么（我有 2 个，Web UI 报告 3 个）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:44:46.813

您可能有一个挥之不去的 pid 文件。该文件独立于运行的进程；换句话说，当你杀死进程时，它并没有删除 pid 文件。

如果您使用的是典型的 Rails 和 Resque 设置，Resque 会将 pid 存储在 Rails ./tmp 目录中。

一些 Resque 启动脚本在不同的位置指定 pid 文件，如下所示：

```
PIDFILE=foo/bar/resque/pid bundle exec rake resque:work 
```

无论脚本将 pid 文件放在哪里，查看那里，然后将其删除，然后重新启动。

同样在命令行上，您可以向 redis 询问正在运行的工作人员：

```
redis-cli keys *worker:* 
```

如果有您不期望的工作人员，您可以使用以下命令删除它们：

```
redis-cli del <keyname> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:16:39.950

尝试重新启动应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:03:43.880

供将来参考：还可以查看[https://github.com/resque/resque/issues/299](https://github.com/resque/resque/issues/299)

# java - 如何创建一个 LinkedLists 数组并将它们全部初始化为一个空字符串？

> ID：10038991
> 
> 赞同：0
> 
> 时间：2012-04-06T04:03:46.530
> 
> 标签：java, arrays, linked-list

我正在尝试在 java 中创建一个链表的字符串数组。然后将数组中的所有内容初始化为空字符串。`null`目前，由于构造函数，它们都被初始化。`NullPointerException`当我`equals()`对数组的内容使用方法时，这会导致。所以我想将它们全部初始化为一个空字符串。我该怎么做？

```
 private LinkedList<String>[] table;

    public Hashtable (int capacity, String hashFn) {
        table = new LinkedList[capacity]
        hashFn = hashFn;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T05:38:23.017

我认为你需要循环并将每个项目设置为一个空字符串，就像这样......

```
private LinkedList<String>[] table;

public Hashtable (int capacity, String hashFn) {
  table = new LinkedList[capacity];
  String emptyString = "";
  for (int i=0;i<capacity,i++){
    table.add(emptyString);
    }
  } 
```

我从来没有尝试过做你想做的事，但我找不到任何快速的方法来做。

当然，如果你把它变成 a`String[] array`而不是 a `LinkedList<String>[] array`，你可以简单地调用`java.util.Arrays.fill(array,"");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T06:14:28.533

如果我正确理解了您的问题，那么在我看来，如果您想将您的问题与任何给定的字符串进行比较，最好的做法是使用`.equals()`以下内容来避免：`NPE``String``LinkedList`

```
if("givenString".equals(strObjFromLinkedList)) {
        //Do what you want
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T04:08:20.437

直接的答案是`Collections`该类提供了一种`nCopies`方法，您可以使用如下方法：

```
 List<String> l = new LinkedList<String>(Collections.nCopies(capacity, "")); 
```

以避免编写显式`for`循环。不过，`for`循环会更有效。

* * *

但我真正想说的是，这`LinkedList`是实现主哈希表的错误选择。类似于`get(int)`和的操作`set(int, T)`是`O(N)`针对链表的。您应该使用`ArrayList<String>`，或者更好的是`String[]`. 它们具有`O(1)`获取和设置元素的操作。最重要的是，它们使用的内存要少得多。

`null`此外，与填充空字符串相比，您最好进行显式测试。实际上，无论如何，JVM 很可能会在所见的情况下执行该空测试。通过自己做，您 1) 避免与空字符串进行比较，以及 2) 节省初始化时间。

解决 NPE 问题的方法不止一种……

# ruby-on-rails - 轨道和表格：下拉数字范围和无限

> ID：10038993
> 
> 赞同：8
> 
> 时间：2012-04-06T04:03:50.820
> 
> 标签：ruby-on-rails, forms, drop-down-menu

我现在有这个：

```
<%= f.select :credit, (0..500) %> 
```

这将导致：

```
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
... 
```

我将如何在该选择中添加另一个选项，即“ **All** ”以及哪个值应该是**nil**？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T04:23:14.263

这*几乎*可以满足您的要求：

```
<%= f.select :credit, ((0..500).map {|i| [i,i] } << ["No limit",nil]) %> 
```

`select`选项列表可以采用多种格式。其中一个是数组数组，如此处给出。外部数组中的每个元素都是一个 2 元素数组，按顺序包含显示的选项文本和表单值。

`map`上面变成了这样的`(0..500)`数组，其中显示的选项与表单值相同。然后添加最后一个选项。

请注意，如果选择了“无限”，这将为参数生成一个值“”（一个空字符串） - 如果您将选择字段放入表单并提交表单，浏览器将为该表单参数发送*一些*内容，并且没有办法`nil`明确地作为表单参数发送。如果你*真的*想要，你可以使用一些聪明的 javascript 来让浏览器根本不发送参数，但这比简单地添加更多的工作：

```
param[:credit] == "" and param[:credit] = nil 
```

到您的控制器操作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-26T00:58:40.603

如果我正确理解了这个问题，您可以比所选答案中显示的更干净地使用`options_for_select`和执行此操作：`prompt`

```
<%= f.select :credit, options_for_select(0..500), { prompt: "No Limit" } %> 
```

请参阅此处的文档：http: [//apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select)

# android - Android：如何使用蓝牙向多个设备发送消息？

> ID：10038997
> 
> 赞同：1
> 
> 时间：2012-04-06T04:04:41.213
> 
> 标签：android, bluetooth

我使用以下代码将文本文件发送到多个设备，

```
ContentValues values = new ContentValues(); 
String filePath1   =Environment.getExternalStorageDirectory().toString()+"/filename.txt";
values.put(BluetoothShare.URI, Uri.fromFile(newFile(filePath1)).toString()); 
values.put(BluetoothShare.DESTINATION,itDevices.getAddress());               values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND); 
Long ts = System.currentTimeMillis(); 
values.put(BluetoothShare.TIMESTAMP, ts); 
Uri contentUri = getContentResolver().insert(BluetoothShare.CONTENT_URI, values); 
```

我想要相同类型的代码来发送消息。通过使用蓝牙 API 应用程序，当我首先尝试将消息发送到多个设备时，我连接到一个设备并将消息发送到该设备，然后再次断开连接并连接到另一个设备并以这种方式将消息发送到另一个设备。

是否可以在不断开通信的情况下将消息一一发送到多个设备？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T18:43:39.017

是的，我相信可以同时与多个 Android 蓝牙设备交换消息 - 无需断开连接和重新连接。

将 Android API 放在一边，蓝牙绝对可以让您同时连接到多个设备并与之通信。所有蓝牙连接都发生在微微网中，其中包括一个主设备和多达 7 个从设备。一个设备可以是多个微微网的一部分，但这效率低下（两个微微网的时序不协调）并且可能不可靠，因此如果您想连接到多个其他设备，您必须确保您是主设备。

[我已经使用 BlueZ（大多数 Linux 和 Android 设备上的蓝牙堆栈，包括AOSP](http://source.android.com/) ）完成了这种事情，因此我可以验证它是否相当简单并且工作可靠。

但是，我只在Android上进行了一对一的连接，所以我不能确定你如何控制那里的主从分配。与常规 Linux 相比，Android 提供的功能和控制要少得多，并且无法直接读取或更改主从角色分配。

从理论上讲，您应该能够根据发起连接的一方将成为主节点的规则来控制角色，但我想做一些测试以了解可能发生的其他情况。我的担心主要来自其中一个客户端设备（您希望成为从设备）可能已经连接到例如耳机或键盘的可能性，因此当它收到传入的连接请求时，它可能会请求切换到主角色因此它可以将您的服务器添加到其微微网中。

我的建议是，当您进行测试时，在您的一台设备（例如 Linux 机器或有根的 Android）上访问 hcitool 并执行“ [hcitool](http://linuxcommand.org/man_pages/hcitool1.html) con”，它会为您提供当前连接的列表，我认为这包括角色。（hcitool 是 Linux 上的标准工具，包含在 AOSP 中。）我想您也可以只使用经验方法：如果您能够创建一堆可靠工作的同时连接，那么它如何工作并不重要- 只需确保您测试某些设备与其他设备存在现有连接的情况。

很抱歉继续说下去，但我认为这是一个很好的问题，并且很想听听在 Android 上做过这件事的人的意见。我想我听说过适用于 Android 的多人蓝牙游戏——我想知道这些游戏是否可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T04:53:13.187

简单的回答，如果不断开与当前设备的连接，就无法发送到多个设备。蓝牙 API 使用一对一连接，它本身是同步的。所以你不能使用蓝牙 API 实现多次发送。

# php - PHP - 使用运算符比较数组值

> ID：10038998
> 
> 赞同：0
> 
> 时间：2012-04-06T04:04:42.170
> 
> 标签：php, arrays, operators, compare

如果我有一个数组：

```
$array = array ( [rock] => 40, [pop] => 30, [rap] => 20 ) etc... 
```

我该怎么做：

```
foreach key in $array 
{
if (array_value > 30) echo "> 30:" . $array_key . "<br>";
if (array_value < 30) echo "< 30:" . $array_key . "<br>";
} 
```

所以结果将是：

```
> 30:rock<br>
< 30:pop<br>
< 30:rap<br> 
```

谢谢！我希望这是有道理的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T04:07:38.993

```
foreach ($array as $key => $value) {
    if      ($value ...) echo $key...
    else if ($value ...) echo $key...
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T04:11:15.727

deceze 的回答通常是正确的，但更具体地说，以下代码应该可以工作：

```
foreach ($array as $key => $value) {
    if ($value > 30) {
        echo '> 30:' . $key . '<br>';
    } elseif ($value <= 30) { // Changed this to <= to cover the case of $value = 30
        echo '< 30:' . $key . '<br>';
    }
} 
```

# python - 无法使用 pyapns 发送 APN 通知

> ID：10038999
> 
> 赞同：2
> 
> 时间：2012-04-06T04:04:52.543
> 
> 标签：python, apple-push-notifications

我正在尝试使用[https://github.com/samuraisam/pyapns/](https://github.com/samuraisam/pyapns/)向我们的 iPhone 应用程序发送通知。

我已经测试过手动发送通知，并确认我们可以成功发送。我们正在寻找一个强大的解决方案，并且听说过关于 pyapns 的好消息。然而，这是我们在 twistd.log 中看到的日志输出，我们从未收到通知。

主要区别在于：

1.  我们正在使用 pyapns
2.  我们使用的是不同的证书——特别是，当我们手动发送通知时，我们同时提供了密钥和证书——然后提供密码来验证读取证书。对于 pyapns，我们创建了一个组合的 cert + 密钥，并删除了密码。但我们仍然无法收到通知。

我不确定根本原因是什么——如果证书有问题或者我们为什么无法发送通知。

以下是来自 twistd.log 的日志：

```
2012-04-04 01:21:51+0000 [-] Log opened.
2012-04-04 01:21:51+0000 [-] twistd 12.0.0 (/usr/bin/python 2.7.2) starting up.
2012-04-04 01:21:51+0000 [-] reactor class: twisted.internet.epollreactor.EPollReactor.
2012-04-04 01:21:51+0000 [-] Site starting on 7077
2012-04-04 01:21:51+0000 [-] Starting factory <twisted.web.server.Site instance at 0x1f2a908>
2012-04-04 01:31:57+0000 [HTTPChannel,0,127.0.0.1] APNSService __init__
2012-04-04 01:31:57+0000 [HTTPChannel,0,127.0.0.1] 127.0.0.1 - - [04/Apr/2012:01:31:57 +0000] "POST / HTTP/1.1" 200 114 "-" "xmlrpclib.py/1.0.1 (by www.pythonware.com)"
2012-04-04 01:34:32+0000 [HTTPChannel,1,127.0.0.1] APNSService write (connecting)
2012-04-04 01:34:32+0000 [HTTPChannel,1,127.0.0.1] APNSClientContextFactory ssl_cert_file={FROM_STRING}
2012-04-04 01:34:32+0000 [HTTPChannel,1,127.0.0.1] Starting factory <pyapns.server.APNSClientFactory instance at 0x2065b48>
2012-04-04 01:34:32+0000 [HTTPChannel,1,127.0.0.1] APNSClientFactory startedConnecting
2012-04-04 01:34:32+0000 [Uninitialized] APNSProtocol connectionMade
2012-04-04 01:34:32+0000 [Uninitialized] APNSProtocol sendMessage msg=00002079d7b66de69c6f5e78e5eef9d37d5c69b7b6e7adbdeba75ef5af5ce3b737dde7001a7b22617073223a7b22616c657274223a
2248656c6c6f21227d7d
2012-04-04 01:34:32+0000 [Uninitialized] 127.0.0.1 - - [04/Apr/2012:01:34:31 +0000] "POST / HTTP/1.1" 200 114 "-" "xmlrpclib.py/1.0.1 (by www.pythonware.com)"
2012-04-04 01:34:32+0000 [APNSProtocol (TLSMemoryBIOProtocol),client] APNSProtocol connectionLost
2012-04-04 01:34:32+0000 [APNSProtocol (TLSMemoryBIOProtocol),client] APNSClientFactory clientConnectionLost reason=[Failure instance: Traceback (failure with no frames): <clas
s 'twisted.internet.error.ConnectionDone'>: Connection was closed cleanly.
    ]
2012-04-04 01:34:32+0000 [APNSProtocol (TLSMemoryBIOProtocol),client] <twisted.internet.tcp.Connector instance at 0x2065c68> will retry in 2 seconds
2012-04-04 01:34:32+0000 [APNSProtocol (TLSMemoryBIOProtocol),client] Stopping factory <pyapns.server.APNSClientFactory instance at 0x2065b48>
2012-04-04 01:34:35+0000 [-] Starting factory <pyapns.server.APNSClientFactory instance at 0x2065b48>
2012-04-04 01:34:35+0000 [-] APNSClientFactory startedConnecting
2012-04-04 01:34:35+0000 [Uninitialized] APNSProtocol connectionMade
2012-04-04 01:34:53+0000 [HTTPChannel,2,127.0.0.1] APNSService read (connecting)
2012-04-04 01:34:53+0000 [HTTPChannel,2,127.0.0.1] APNSClientContextFactory ssl_cert_file={FROM_STRING}
2012-04-04 01:34:53+0000 [HTTPChannel,2,127.0.0.1] Starting factory <pyapns.server.APNSFeedbackClientFactory instance at 0x206ccb0>
2012-04-04 01:34:53+0000 [HTTPChannel,2,127.0.0.1] APNSFeedbackClientFactory startedConnecting
2012-04-04 01:34:53+0000 [Uninitialized] feedbackHandler connectionMade
2012-04-04 01:34:53+0000 [APNSFeedbackHandler (TLSMemoryBIOProtocol),client] feedbackHandler connectionLost [Failure instance: Traceback (failure with no frames): <class 'twist
ed.internet.error.ConnectionDone'>: Connection was closed cleanly.
    ]
2012-04-04 01:34:53+0000 [APNSFeedbackHandler (TLSMemoryBIOProtocol),client] 127.0.0.1 - - [04/Apr/2012:01:34:53 +0000] "POST / HTTP/1.1" 200 138 "-" "xmlrpclib.py/1.0.1 (by ww
w.pythonware.com)"
2012-04-04 01:34:53+0000 [APNSFeedbackHandler (TLSMemoryBIOProtocol),client] APNSFeedbackClientFactory clientConnectionLost reason=[Failure instance: Traceback (failure with no
 frames): <class 'twisted.internet.error.ConnectionDone'>: Connection was closed cleanly.
    ]
2012-04-04 01:34:53+0000 [APNSFeedbackHandler (TLSMemoryBIOProtocol),client] Stopping factory <pyapns.server.APNSFeedbackClientFactory instance at 0x206ccb0> 
```